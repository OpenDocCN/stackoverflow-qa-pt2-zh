# StackOverflow 问答 16067000-16067999

# .net - 从通用列表中获取最大和更大的对象

> ID：16067007
> 
> 赞同：2
> 
> 时间：2013-04-17T18:03:11.720
> 
> 标签：.net, vb.net, generic-list

我有一个`System.Version`对象列表，

我需要获取列表中最大的版本和大于指定版本的版本

```
Dim versions As New List(Of Version)
versions = LoadVersions()

' Get the greatest version object
Dim greatestVersion = versions.Greatest() '???

' Get version objects greater than the specified one
Dim ver = New Version("2.0.1.0")
Dim greaterVersions As List(Of Version) = version.GreaterThan(ver) '??? 
```

什么是这样做的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:05:20.233

最伟大的版本：

```
Dim greatestVersion = versions.Max() 
```

大于所选版本：

```
Dim greaterVersions = versions.Where(Function (x) x > ver) 
```

阅读[MSDN LINQ 参考](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:42:09.277

这就是我要解决的问题，后来我按照@Konrad 的建议对其进行了改进：

```
'Greatest version
Dim maxver = versions.Max(Of Version)(Function(ver As Version) ver)

'Greater versions
Dim currentVersion As New Version("2.0.1.0")
Dim geaterVers = versions.Where(Function(ver As Version) ver > currentVersion) 
```

# objective-c - 计算 JSON 对象的数量 - Objective-C

> ID：16067013
> 
> 赞同：-3
> 
> 时间：2013-04-17T18:03:27.980
> 
> 标签：objective-c, json

示例 JSON：

```
{ "image" : "http:\/\/www.domain.com\/blah\/blah\/blah\/5yph0gbfj3ip41a.jpg",
      "0" : { "thing1" : "Hello",
              "thing2" : "06\/21\/2013"
            },
      "1" : { "thing1" : "Goodbye",
              "thing2" : "06\/28\/2013"
            }
} 
```

如何计算`"0" : {whatever}`出现的次数？他们会增加一。就像上面的例子一样，我希望它返回 2。

我正在从 id 读取 JSON：`[zoneJSONobject objectForKey:@"thing1"];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:10:18.527

一种方法是使用该`- [NSDictionary count]`方法（[请参阅文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/count)）获取键的总数，然后减去您不想计算的值（如果存在）（`"image"`例如。）

另一种方法是遍历键，例如：

```
int keyCount = 0;
for (NSString *key in myDict)
    if (/* the string is a number */ )
        keyCount++; 
```

（有很多关于测试字符串是否为数字的单独的 SO 文章。）

但是，最好的方法是修改 JSON 对象以在数组中将这些字典返回给您，这样您就不必在开始迭代之前对它们进行计数。我不确定您是否可以使用该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:07:31.680

似乎图像有一个主要条目，然后是您要计算的所有项目。然后你可以使用**减法运算符：**

```
int n = dictionary.count - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:07:43.443

你想计算根键吗？使用内置的 NSJSONserialization 类从中创建 NSObjects。在这种情况下，您将获得一个 NSDictionary。调用它的 allKeys 属性，然后就是 count 属性！

# c - 阻塞 pcap 和多个 I/O `select`

> ID：16067015
> 
> 赞同：0
> 
> 时间：2013-04-17T18:03:28.653
> 
> 标签：c, linux, network-programming, libpcap

我想使用 pcap 来捕获数据包，然后将捕获的数据包发送到另一台主机，我的源代码片段如下：

```
 for(;;){
                    pcap_packet = pcap_next(pcap_handler, &pcap_header);
                    if(pcap_packet !=NULL)
                    printf("capture a packet with length of %d\n", pcap_header.len);

                    // send the packet as payload to the sender, excluding the Ethernet Header
                    n = send(sd_proxy, pcap_packet+ETHERNET_HDR_LEN, pcap_header.len-ETHERNET_HDR_LEN, 0);
                    if(n<0){
                            shutdown(connfd, SHUT_RDWR);
                            close(connfd);
                            break;
                    } new  

            } 
```

所以基本上，我希望程序被 pcap_next 阻止，一旦套接字 sd_proxy 与另一台主机建立 TCP 连接，如果另一台主机启动主动 TCP 关闭，我想检测这个主动关闭。理想情况下， 如果其他主机启动主动关闭，我应该使用 a`select`和 a ，会注意到有一些东西，然后我看看是否'n = 0'。但是用pcap，select不能和pcap配合`n=recv(rd_fd, ...)``select``rd_fd`

那么如何完成我的任务呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:36:12.333

> select不能和pcap配合

为什么不？您是否尝试过使用`pcap_get_selectable_fd()`on`pcap_handler`并将生成的文件描述符添加到`select()`调用中设置的文件描述符中？

你在 Linux 上工作，所以应该只是工作。

（如果你在使用 BPF 的系统上运行，例如 *BSD 或 OS X，你可能会遇到这个问题，至少在这些操作系统的旧版本中是这样；各种 *BSD 已经修复了它们的 select-with-BPF 错误一段时间；在 OS X 上，我在 Lion 中修复了它，因此在 Snow Leopard 和更早版本上可能会出现问题。）

# debugging - grails mail：在本地主机上工作而不是在测试环境中的内联图像

> ID：16067018
> 
> 赞同：2
> 
> 时间：2013-04-17T18:03:51.100
> 
> 标签：debugging, grails, localhost, html-email

我在本地主机上的邮件中添加内联图像：

```
inline 'footerImage', 'image/jpg', new File('./web-app/images/mailAssets/suchebottomre.gif').readBytes() 
```

哪个工作正常。当我部署到我的测试环境时，我收到此错误：

```
Class
java.io.FileNotFoundException
Message
cannot use ./web-app/images/mailAssets/alert_header_pre.png as an attachment as it does not exist 
```

使用此日志：

```
 Line | Method
->>  331 | inline      in grails.plugin.mail.MailMessageBuilder
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     20 | doCall      in de.docinsider.web.NotifierService$_contactUser_closure1
|     39 | sendMail .  in grails.plugin.mail.MailService
|     13 | contactUser in de.docinsider.web.NotifierService
|      7 | doCall . .  in de.docinsider.web.SendController$_closure1
|    195 | doFilter    in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter .  in grails.plugin.cache.web.filter.AbstractFilter
|   1145 | runWorker   in java.util.concurrent.ThreadPoolExecutor
|    615 | run . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run         in java.lang.Thread 
```

如何避免这种情况？

我还想通过以下方式实现资源加载器：

```
import org.springframework.context.ResourceLoaderAware
import org.springframework.core.io.ResourceLoader

class SendController implements ResourceLoaderAware {
    @Autowired
    ResourceLoader resourceLoader
    def notifierService

    def index() { }
    def welcome = {
        notifierService.contactUser(params.username, params.email, params.message)
        render view:"/send/feedback", model:[name:params.username, message:params.message]
     }

     void setResourceLoader(ResourceLoader resourceLoader) {
        resourceLoader = resourceLoader
    }

} 
```

这也行不通。

和：

```
 inline 'headerImage', 'image/jpg', resourceLoader.getResource('/images/mailAssets/header_top.png')
                inline 'footerImage', 'image/jpg', resourceLoader.getResource('/images/mailAssets/footer_bottom.gif') 
```

在服务中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-27T21:59:40.383

我知道这是一个旧线程，但是我遇到了同样的问题，发现服务器不知道图像的真实路径，而是使用字符串作为真实路径“./web-app/images/mailAssets/ alert_header_pre.png"。

阅读这篇[文章](https://stackoverflow.com/questions/16225657/how-to-get-absolute-path-for-a-grails-application)将帮助您获得真正的路径。代替：

```
inline 'footerImage', 'image/jpg', new File('./web-app/images/mailAssets/suchebottomre.gif').readBytes() 
```

用这个：

```
inline 'footerImage', 'image/jpg', resourceLoader.getResource("/images/mailAssets/suchebottomre.gif").getFile() 
```

您将需要`import org.springframework.core.io.Resource or org.springframework.core.io.ResourceLoader`和您的控制器实施`implements org.springframework.context.ResourceLoaderAware`和声明`ResourceLoader resourceLoader`

测试：产品服务器：glassfish。开发：Grails 2.3.7。

# wordpress - 使用_ID 显示/隐藏内容的Jquery 脚本？

> ID：16067019
> 
> 赞同：1
> 
> 时间：2013-04-17T18:03:57.780
> 
> 标签：wordpress, hide, show

我有一个 HTML 代码：

```
<div class="content">
 blablabla
</div>

<a href="#" class="show">Show hidden content</a>

<a href="#" class="hide">Hide content</a> 
```

我需要 Jquery 代码来显示或隐藏 div“内容”，但我需要使用该代码的代码`<?php the_ID (); ?>`将在帖子循环中使用，所以我需要唯一的 ID。

前任。：`<div class="content-<?php the_ID (); ?>">`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:06:03.123

尝试这个：

```
$('.show').click( function(){
    $('.content-<?php the_ID (); ?>').show();
});

$('.hide').click( function(){
    $('.content-<?php the_ID (); ?>').hide();
}); 
```

# web-services - 自动化测试网络服务

> ID：16067021
> 
> 赞同：12
> 
> 时间：2013-04-17T18:04:05.883
> 
> 标签：web-services, testing, automation, soapui

我为一个中层团队工作，我一直在使用 SOAP UI 手动测试 Web 服务。我的任务是让回归测试用例自动化。我们现在没有任何自动化团队，因此我可以完全自由地使用我想要的任何工具，并让我的经理知道哪种工具适合..但是我还没有学习自动化测试。任何人有任何关于哪个将是自动化测试中间层的好工具的建议吗？我们有许多服务可以使用 SAP 中的结果来验证结果。例如，如果我在 Midtier 中测试商品的价格，我应该去检查返回的价格是否与 SAP 中的价格相匹配。我一直在手动执行此操作，我登录到 SAP 转到提供的交易代码并检查该商品的价格，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T12:17:28.810

我正在处理类似的请求。由于客户已经使用soapUI（OS）自动化了一些服务，我的工作有点困难。

操作系统版本没有数据源、数据循环测试步骤来制作数据驱动的测试套件，但总有一种解决方法。

您甚至可以使用开源版本来实现三种流行的自动化框架。

1.  动作驱动框架 - 要将这个框架应用于soapUI，您必须在服务的设置、执行和验证中确定一些常见的测试步骤。一旦确定，将它们分开在测试套件和/或测试用例中，并简单地调用适当的测试套件/测试步骤。

    例如：我有一个测试步骤，验证服务已在数据库中输入了一个订单条目，因此我将创建一个测试套件 + 测试用例，并在其中添加一个 jdbc 测试步骤以根据我提供的数据。查询将被参数化。在实际脚本中，我将执行服务并提取运行 db 查询所需的所有值。这些值将通过运行测试测试步骤传递给可重用的测试用例。

    需要记住的几件事是，如果您有大量测试用例/参数并认为需要修改服务，则将参数放入 excel 文件并使用测试套件设置脚本区域中的 groovy 加载它们。

    您需要 scriptom api 才能使用 excel 或 Jxl（更复杂的实现）

2.  数据驱动框架，在这个框架中，您基本上确定要在服务上运行的不同场景并使用相关数据填充 excel，然后使用 groovy 和 scriptom 或 jexcel 或 jxl api 循环遍历 excel 中的所有行并执行服务具有不同的数据元素。这种方法可以随心所欲地复杂化，也可以随心所欲地简单化。

3.  关键字驱动的框架——这可能是所有要实现的最复杂的框架，因为它需要您进行大量的规划、开发等工作。我目前正在设计这样一个框架。如果没有保密协议，我会和你分享一些细节。

我也知道您是 groovy 的新手，您应该查看 soapUI 和 groovy 的网站，他们有很多非常好的示例，并记住总是有 stackoverflow 来回答您的问题。

让我知道你是如何通过这项努力做出来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T09:04:36.227

我们在一个大型项目中所做的是使用许多连接的遗留系统（200 多个服务）：

*   对于每个服务，我们创建了带有正确断言的 SoapUI 项目，这些断言反映了服务的优点（连接性、功能性等）
*   我们设置[Hudson](http://hudson-ci.org/)来运行服务的 SoapUI 项目列表。记录所有执行的服务（请求、响应）
*   我们创建了 ant 作业来分析记录的响应并创建每日报告（也在 Hudson 上运行）

我们还通过在服务器日志中搜索模式来接触异步服务。这里有一个 SoupUI 项目创建约定（命名、所需的断言等）很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:25:19.573

我在类似情况下所做的事情（需要测试一个非常复杂的、往往会出现质量问题的第三方应用程序）：我使用常规的 JUnit 4 环境编写了一些单元测试，但我没有测试本地 java 类，而是执行了Web 服务调用并检查响应。如果您需要针对 SAP R/3 后端验证结果，也可以使用[http://service.sap.com/connectors](http://service.sap.com/connectors)提供的 Java 连接器 (JCo) 。缺点是 - 您显然需要知道如何用 Java 编写测试代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T03:30:57.640

如果你想自动化你的 web 服务回归测试，你可以使用 Soap-UI Pro。自动化在soapui 中非常简单，我也在做同样的事情。我已经使用soap ui自动化了我的所有航班集成网络服务。您可以将 groovy 脚本语言用于复杂场景。

谢谢，哈努曼

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-11T08:24:20.097

如果您的 Web 服务是 REST，只需先使用 REST 客户端（Chrome 插件）使用 Maven 导出记录。创建Maven项目并添加插件exp：

```
<plugin>
    <groupId>com.restlet.client</groupId>
    <artifactId>maven-plugin</artifactId>    
    <version>2.3.0.1</version>
    <executions>
        <execution>
            <phase>test</phase>
            <goals>
                <goal>test</goal>
            </goals>   
            <configuration>
                <file>API_Testing.json</file>
                <selectedEnvironment>Staging</selectedEnvironment>
                <licenseKey/>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

# jquery - 列中所有元素的引导弹出窗口？

> ID：16067024
> 
> 赞同：0
> 
> 时间：2013-04-17T18:04:20.990
> 
> 标签：jquery, html, ajax, twitter-bootstrap

我正在通过 ajax 调用动态生成一个表格，我希望特定列中的所有元素在悬停时显示一个弹出框。我在成功事件中有以下代码：

```
strBtn1 = '<span data-trigger="hover" data-placement="right" data-content="testing popovers in a table" class="test22">test</span>'
$('#myReport').append('<tr><td>Column 1</td><td>' + strBtn1 + '</td></tr>'); 
```

然后我在我的主脚本中尝试了这个：

```
$(".test22").each(function () {
    $(this).popover();
}); 
```

该表按我的预期生成，有 15 行，但将鼠标悬停在“测试”文本上没有任何作用。

我也有一种“控制”确实有效：

```
<span id="test11" data-trigger="hover" data-placement="right" data-content="testing popovers in a table">test</span> 
```

这直接在标头的 HTML 文件中，并且在主脚本中：

```
$("#test11").popover(); 
```

所以在标题中我得到一个“测试”，当我悬停时会显示一个弹出窗口。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:07:22.193

您需要确保 `$(".test22").each(function () { $(this).popover(); });`仅*在*填充表后才运行，否则它将无法找到任何类。

要测试它是否正常工作，请尝试在每个函数中放置一个控制台日志，以查看该函数实际执行了多少次。

如果您没有返回任何控制台日志，那么这意味着您必须尝试运行 each，然后才能进行任何迭代。

如果确实如此，那么我建议将每个 jQuery 放入一个函数中，然后在 ajax 成功中调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:10:09.627

成功解决了这个问题。

```
counter += 1;
tmpID = 'thisCell' + counter;
strBtn1 = '<span id="' + tmpID + '" data-trigger="hover" data-placement="right" data-content="testing popovers in a table" class="test22">test</span>'
$('#myReport').append('<tr><td>Column 1</td><td>' + strBtn1 + '</td></tr>');
$('#' + tmpID).popover(); 
```

然后我完全删除了“每个”语句。

# php - 检查字符串是否为整数（包括负数） PHP

> ID：16067025
> 
> 赞同：2
> 
> 时间：2013-04-17T18:04:22.193
> 
> 标签：php, regex, integer, isinteger

下面的函数检查字符串是否为整数，这意味着它应该只包含数字。但它不检查数字是否为负（负数也应该返回真，因为它们是整数）。

```
function validateInteger($value)
{
   //need is_numeric to avoid $value = true returns true with preg_match
   return is_numeric($value) && preg_match('/^\d+$/', $value);
} 
```

我进行了测试并得到了结果：

```
'12.5'      => FALSE 
12.5        => FALSE 
'a125'      => FALSE 
'125a'      => FALSE 
'1a2.5'     => FALSE 
125         => TRUE 
'abc'       => FALSE 
false       => FALSE 
true        => FALSE 
'false'     => FALSE 
'true'      => FALSE 
null        => FALSE 
'null'      => FALSE 
'1231'      => TRUE 
-1231       => FALSE (SHOULD RETURN TRUE)
'-1231'     => FALSE (SHOULD RETURN TRUE) 
```

我不想使用`itnval() < 0`. 我更喜欢正则表达式来检查负数。

谢谢

编辑：

我还有一个函数`validateFloat`，如果给定数字是浮点数，则返回 true，这意味着它只能包含**数字**和**点**。我也需要对此应用相同的逻辑，以便它为**负浮点数返回 true**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:07:09.357

[`is_int`](http://us1.php.net/manual/en/function.is-int.php)对你来说还不够好吗？

`filter_var($input, FILTER_VALIDATE_INT)`应该具有相同的效果，但也适用于字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:12:46.473

只需使用`is_numeric(abs($val))`

# ruby-on-rails - 脚本/服务器不工作。执行命令时，显示以下错误

> ID：16067026
> 
> 赞同：0
> 
> 时间：2013-04-17T18:04:31.747
> 
> 标签：ruby-on-rails, ruby

```
/home/vinay/mynewapp/vendor/rails/railties/lib/rails/gem_dependency.rb:21:in `add_frozen_gem_path': undefined method `source_index' for Gem:Module (NoMethodError)
    from /home/vinay/mynewapp/config/boot.rb:47:in `load_initializer'
    from /home/vinay/mynewapp/config/boot.rb:38:in `run'
    from /home/vinay/mynewapp/config/boot.rb:11:in `boot!'
    from /home/vinay/mynewapp/config/boot.rb:114:in `<top (required)>'
    from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /usr/local/lib/site_ruby/1.9.1/rubygems/core_ext/kernel_require.rb:45:in `require'
    from script/server:2:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:43:23.643

你试过`rails server`了吗？

较短的版本：`rails s`甚至`r s`

# javascript - javascript jquery表单验证

> ID：16067027
> 
> 赞同：0
> 
> 时间：2013-04-17T18:04:33.930
> 
> 标签：javascript, jquery, validation

我正在尝试验证一个具有多个复选框的表单，并且在选中“其他”复选框时，“其他_text”输入中没有任何内容。我需要一个错误来触发要求输入其他文本。这是不适用于我的“其他”复选框的当前验证。

```
}else if(question_pos==24){    
        if((!$('#followup_six_45_physician').prop('checked') && !$('#followup_six_45_pharm').prop('checked')  && !$('#followup_six_45_nurse').prop('checked')  && !$('#followup_six_45_none').prop('checked')  && !$('#followup_six_45_other').prop('checked')) || 
        ($('#followup_six_45_other').prop('checked') && $('#followup_six_45_other_text').val() == "" )){

            if(( $('#followup_six_45_other').prop('checked') && $('#followup_six_45_other_text').val() == "")){
                alert("You selected \"Other\" for race, please fill in what other race you consider yourself to be.");
                return false;
            }else{
                alert("Please select an answer.");
                return false;
            }
        }else{ 
            question_pos+=1;
            showContent(question_pos,"right");
            progress(93, $('#progressBar'));
            return true;
        } 
```

这就是问题...

```
if(( $('#followup_six_45_other').prop('checked') && $('#followup_six_45_other_text').val() == "")){
                    alert("You selected \"Other\" for race, please fill in what other race you consider yourself to be.");
                    return false; 
```

这是html

```
<div id="area24">
   <div id="bl_blue">

        <form name="form24" action="handler_2.jsp" onsubmit="return verifyIt();" method="post" style="padding-bottom:20px;">
        <input type="hidden" id="from" name="from" value="baseline_01" />
        <input type="hidden" id="direction" name="direction" value="" />
  <h3>Advice from:</h3>
        <table class="screening" width="100%" cellspacing="5px">
          <tr>
            <td width="8%" align="right"><input name="followup_six_45_physician" id="followup_six_45_physician" type="checkbox" value="1" <%=(session.getAttribute("followup_six_45_physician")!=null && session.getAttribute("followup_six_45_physician").equals("1"))?"checked":""%>/></td>
            <td width="92%"><label for="followup_six_45_physician">a physician</label></td>
        </tr>
          <tr>
            <td width="8%" align="right"><input name="followup_six_45_pharm" id="followup_six_45_pharm" type="checkbox" value="1" <%=(session.getAttribute("followup_six_45_pharm")!=null && session.getAttribute("followup_six_45_pharm").equals("1"))?"checked":""%>/></td>
            <td width="92%"><label for="followup_six_45_pharm">a pharmicist</label></td>
        </tr>
          <tr>
            <td width="8%" align="right"><input name="followup_six_45_nurse" id="followup_six_45_nurse" type="checkbox" value="1" <%=(session.getAttribute("followup_six_45_nurse")!=null && session.getAttribute("followup_six_45_nurse").equals("1"))?"checked":""%>/></td>
            <td width="92%"><label for="followup_six_45_nurse">a nurse</label></td>
        </tr>
          <tr>
            <td width="8%" align="right"><input name="followup_six_45_other" id="followup_six_45_other" type="checkbox" value="1" <%=(session.getAttribute("followup_six_45_other")!=null && session.getAttribute("followup_six_45_other").equals("1"))?"checked":""%>/></td>
            <td width="92%"><label for="followup_six_45_other">Other:</label> <input name="followup_six_45_other_text" type="text" value="<%=session.getAttribute("followup_six_45_other_text")==null?"":session.getAttribute("followup_six_45_other_text")%>"/></td>
        </tr>
          <tr>
            <td width="8%" align="right"><input name="followup_six_45_none" id="followup_six_45_none" type="checkbox" value="1" <%=(session.getAttribute("followup_six_45_none")!=null && session.getAttribute("followup_six_45_none").equals("1"))?"checked":""%>/></td>
            <td width="92%"><label for="followup_six_45_none">I used none of these</label></td>
        </tr>
        </table>
            </form>

            </div></div> 
```

到目前为止，当另一个复选框被选中时，我得到一个错误，但是当我向输入中添加文本时，错误仍然会触发。我不知道该怎么做才能使错误仅在“followup_six_45_other_text”中没有文本并且选中“followup_six_45_other”时触发。

任何帮助将不胜感激，因为我现在完全陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:15:08.570

看起来您正在通过 id 查询 followup_six_45_other_text，但实际上并未设置 id（名称已设置，id 未设置，您正在通过 id 查询）。

```
 <td width="92%"><label for="followup_six_45_other">Other:</label> <input name="followup_six_45_other_text" type="text" value="<%=session.getAttribute("followup_six_45_other_text")==null?"":session.getAttribute("followup_six_45_other_text")%>"/></td> 
```

# c# - 文件未完全下载

> ID：16067035
> 
> 赞同：2
> 
> 时间：2013-04-17T18:04:58.543
> 
> 标签：c#, .net, download, httprequest

我正在开发一个从给定 URL 下载视频的应用程序。问题是我没有收到整个文件内容，然后无法播放文件。例如，尝试下载大小约为 2.23 MB 的视频，我只能得到 ~2.11 MB。当我在浏览器中使用 URL 时，它会显示一个对话框来保存视频并且文件已成功下载。

我尝试过使用`WebClient`类并且它可以工作，但我想分块下载文件以便能够报告状态（完成百分比）。这是我使用的代码：

```
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    int bufferSize = 1024 * 300;
    string filePath = saveFileDialog.FileName;
    if (File.Exists(filePath))
        File.Delete(filePath);
    int totalBytes = 0;
    HttpWebRequest webRequest = (HttpWebRequest)HttpWebRequest.Create(DownloadUrl);
    long contentLength = webRequest.GetResponse().ContentLength;
    using (Stream webStream = webRequest.GetResponse().GetResponseStream())
    using (StreamReader reader = new StreamReader(webStream))
    using (BinaryWriter fileWriter = new BinaryWriter(File.Create(filePath)))
    {
        do
        {
            char[] buffer = new char[bufferSize];
            bytesRead = reader.ReadBlock(buffer, 0, bufferSize); // also tried with Read(buffer, 0, bufferSize);
            totalBytes += bytesRead;
            Console.WriteLine("Bytes read: " + bytesRead + " Total Bytes: " + totalBytes + " Content length: " + contentLength);
            if (bytesRead > 0)
                fileWriter.Write(buffer, 0, bytesRead);
        } while (!reader.EndOfStream);
    }
} 
```

我也尝试阅读 until `bytesRead = 0`，但结果相同。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:08:27.157

我建议您改用[DownloadFileAsync](http://msdn.microsoft.com/SV-SE/library/system.net.webclient.downloadfileasync.aspx)。这为您提供了两个事件，使您可以更轻松地跟踪下载进度。

[下载ProgressChangedEventHandler](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)

[下载文件完成](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfilecompleted.aspx)

一个非常简单的实现看起来像这样。

```
WebClient client = new WebClient();

client.DownloadProgressChanged += 
        new DownloadProgressChangedEventHandler(DownloadProgressCallback);

client.DownloadFileAsync(DownloadUrl, filePath); 
```

然后有一个更新进度条的功能。

```
private void DownloadProgressCallback(object sender, 
                                      DownloadProgressChangedEventArgs e)
{
     myProgressBar.Value = e.ProgressPercentage;
} 
```

您还可以访问 和 等`e.BytesReceived`数据`e.TotalBytesToReceive`。

* * *

**编辑：**

我必须做的主要更改是将缓冲区从 更改`char[]`为`byte[]`，然后使用 Stream 而不是 StreamReader。

我们还通过检查是否有任何字节要写入我们的硬盘驱动器来检查文件的结尾。如果没有东西可写，我们就知道我们已经完成了。

```
private static void download()
{
    int bufferSize = 1024 * 300;
    string filePath = "Test.exe";

    if (File.Exists(filePath))
        File.Delete(filePath);
    int totalBytes = 0;
    HttpWebRequest webRequest =
        (HttpWebRequest)
        HttpWebRequest.Create(
            @"http://www.rarlab.com/rar/wrar420.exe");
    long contentLength = webRequest.GetResponse().ContentLength;
    Console.WriteLine(totalBytes);

    using (WebResponse webResponse = webRequest.GetResponse())
    using (Stream reader = webResponse.GetResponseStream())
    using (BinaryWriter fileWriter = new BinaryWriter(File.Create(filePath)))
    {
        int bytesRead = 0;
        byte[] buffer = new byte[bufferSize];
        do
        {
            bytesRead = reader.Read(buffer, 0, buffer.Length);
            totalBytes += bytesRead;
            fileWriter.Write(buffer, 0, bytesRead);
            Console.WriteLine("BytesRead: " + bytesRead + " -- TotalBytes: " + totalBytes);

        } while (bytesRead > 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:16:04.700

尝试

```
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    int bufferSize = 1024 * 300;
    string filePath = saveFileDialog.FileName;
    if (File.Exists(filePath))
        File.Delete(filePath);
    int totalBytes = 0;
    HttpWebRequest webRequest = (HttpWebRequest)HttpWebRequest.Create(DownloadUrl);
    long contentLength = webRequest.GetResponse().ContentLength;
    using (Stream webStream = webRequest.GetResponse().GetResponseStream())
    using (StreamReader reader = new StreamReader(webStream))
    using (BinaryWriter fileWriter = new BinaryWriter(File.Create(filePath)))
    {
        do
        {
            char[] buffer = new char[bufferSize];
            bytesRead = reader.ReadBlock(buffer, 0, bufferSize); // also tried with Read(buffer, 0, bufferSize);
            totalBytes += bytesRead;
            Console.WriteLine("Bytes read: " + bytesRead + " Total Bytes: " + totalBytes + " Content length: " + contentLength);
            if (bytesRead > 0)
                fileWriter.Write(buffer, 0, bytesRead);
        } while (!reader.EndOfStream);
        fileWriter.flush();
    }
} 
```

嗨，那是我的错，我刚刚添加了**fileWriter.flush();** 循环外

# php - 与 localhost 和 phpmyadmin 连接时出错 - wampserver

> ID：16067038
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:05:15.650
> 
> 标签：php, mysql, wamp

我遇到了一个奇怪的错误，每当我尝试启动 localhost 时，我都安装了 wampserver，我得到了那个错误

```
Forbidden

You don't have permission to access / on this server 
```

但是，当我尝试连接到 127.0.0.0 ...它连接.. !!! 我尝试编辑配置文件并允许从 localhost 访问并允许所有人访问，但它不起作用！

当我尝试打开 phpMyAdmin 我得到那个错误

```
phpMyAdmin - Error
The mysqli extension is missing. Please check your PHP configuration. 
```

我尝试了许多在线解决方案，但它们没有用，有什么帮助吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:01:19.330

**Solution 1**
"Here my WAMP installation is in the d:\wamp folder. Change it to your wamp path."

Change the file content of d:\wamp\alias\phpmyadmin.conf to the following.

```
<Directory "d:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
        Allow from all
</Directory> 
```

Previously, it was like this:

```
<Directory "d:/wamp/apps/phpmyadmin3.5.1/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1
</Directory> 
```

Stop and Restart your WAMP server after making these changes.

**Solution 2**
Just use 127.0.0.1 instead of localhost

This works: http:// 127.0.0.1/
This works: http:// 127.0.0.1/phpmyadmin/

# javascript - 如何在排除句点的同时替换字符串中的非数字字符？

> ID：16067040
> 
> 赞同：4
> 
> 时间：2013-04-17T18:05:19.683
> 
> 标签：javascript, jquery, regex, web

所以我有这个-

```
lr_min = $('#lr_min').val().replace(/\D/g,''); 
```

它消除了字符串中的所有非数字字符。如何从此替换中排除句点 (.)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T18:06:18.777

您可以使用

```
lr_min = $('#lr_min').val().replace(/[^\d.]+/g,''); 
```

`+`不是绝对必要的，但通常会提供[更好的性能](http://jsperf.com/replace-reg)（更少的替换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:10:38.727

您可以忽略数字之间的点。

`lr_min = $('#lr_min').val().replace(/[^\d.-]/g, '');`

# javascript - RequireJS 和通用配置

> ID：16067042
> 
> 赞同：4
> 
> 时间：2013-04-17T18:05:23.340
> 
> 标签：javascript, requirejs, config

是否可以在一个地方配置 requirejs 并在模块中重用它？

如

主.js：

```
requirejs.config({
    baseUrl: "static/js", 
    paths: {
         "jquery": "http://code.jquery.com/jquery-1.9.1.js",    
     "jquery-ui": "http://code.jquery.com/ui/1.10.2/jquery-ui.js"
},
shim: {
     "jquery-ui": {
          deps: ["jquery"]
     }
}
}); 
```

和

公共.js：

```
define(["main", "jquery", function(main, $) {
    // do some public stuff
}); 
```

客户端.js：

```
define(["main", "jquery", function(main, $) {
    // do some client stuff
}); 
```

在我的网络公开部分有

```
<script type="..." src="js/require.js" data-main="js/public.js"></script> 
```

在网络的客户端部分

```
<script type="..." src="js/require.js" data-main="js/client.js"></script> 
```

而且我还想为每个页面设置一个模块。因此，例如在公共上有一个索引模块

```
<script ...>
    require('public/index');
</script> 
```

和

公共/index.js：

```
define(["jquery", "slideshow"], function($, s) {
    $( function() { s.init() } );
}); 
```

RequireJS 有可能吗？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-13T15:15:51.643

`data-main`在非常简单的情况下是一个有用的快捷方式，但除此之外我发现它并没有太大用处，解决方案是完全转储它。

在每个页面上显式加载 main，然后使用回调加载特定于视图的脚本。

所以你有public.html：

```
<script src="/Scripts/require.js"></script>
<script>
require('main', function(){
  require('public');
})
</script> 
```

在client.html中：

```
<script src="/Scripts/require.js"></script>
<script>
require('main', function(){
  require('client');
})
</script> 
```

[我在这里写了一篇博文来阐述这个想法。](https://github.com/togakangaroo/Blog/blob/master/setting-up-requirejs.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:17:52.043

当您使问题更清楚时，我会编辑我的答案。

在您包含的任何页面`require.js`中，您还应该包含`main.js`以定义您的 RequireJS 配置。

你不能做类似的事情

```
define(["main", "jquery", function(main, $) {
    // do some public stuff
}); 
```

因为 ReuiqreJS 异步加载依赖项。尽管 "main" 放在 "jquery" 之前，但不能保证 RequireJS 会按该顺序加载它们。

所以你的 public/index.html 可以像：

```
<script type="..." src="js/require.js"></script>
<script type="..." src="js/main.js"></script>
<script ...>
    require('public/index');
</script> 
```

# ruby-on-rails-3 - ActiveRecord::StatementInvalid: Timeout::Error: execution expired

> ID：16067043
> 
> 赞同：1
> 
> 时间：2013-04-17T18:05:33.483
> 
> 标签：ruby-on-rails-3, heroku

我有一个在 heroku 上运行的应用程序，有时会报告 Timeout::Error 和 (ActiveRecord::StatementInvalid: Timeout::Error: execution expired) “execution expired”。

这发生在整个网站上（不适用于任何特定查询）。

例子 -：

ActiveRecord::StatementInvalid: Timeout::Error: execution expired: SELECT "users".* FROM "users" WHERE "users"."id" = 3881 LIMIT 1

我的应用程序在 Rails 3.2.11 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:14:41.690

你在使用 Rack::Timeout 吗？我一直在为同一个问题苦苦挣扎，我认为这是因为我的代码从 Rack::Timeout 超时，而 ActiveRecord 笨拙地包装了错误（请参阅：[Time out an ActiveRecord query](https://stackoverflow.com/questions/13307436/time-out-an-activerecord-query)）。

# git - 如何在 Git 工作副本中列出所有未版本控制的文件和目录？

> ID：16067048
> 
> 赞同：4
> 
> 时间：2013-04-17T18:05:56.750
> 
> 标签：git, file

我正在虚拟机上进行开发，并希望了解在部署项目时需要手动将哪些文件和目录添加到远程服务器上的 Web 目录中（例如，具有环境特定设置/凭据的文件）。如何获取这些文件/目录的列表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T18:22:10.903

```
git ls-files -o 
```

ls-files 的 -o 选项将显示未跟踪的文件。

如果您希望将未跟踪的目录列为目录而不是所有单独的文件，您可以这样做：

```
git ls-files -o --directory 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T18:22:52.203

```
git ls-files --others --exclude-standard 
```

*   `--others`选项显示`untracked`文件。

*   `--exclude-standard`选项排除包含在`gitignore`或中的文件`.git/info/exclude`。

请参阅[git-ls-files](https://www.kernel.org/pub/software/scm/git/docs/git-ls-files.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:26:44.617

```
git status -uall 
```

此命令将显示所有未跟踪的文件和目录，包括未跟踪目录中的未跟踪文件。用于`-unormal`隐藏未跟踪目录中未跟踪的文件。

# php - 来自 MYSQL 查询的多维数组 PHP

> ID：16067051
> 
> 赞同：0
> 
> 时间：2013-04-17T18:06:04.950
> 
> 标签：php, mysql, multidimensional-array

我在 MYSQL 中有以下表：

带有列的 CommentTable：comment、commenter、datecommented 和 postid 带有列的 PostTable：postid、dateposted

我在 php 中执行此查询

```
Select commentTable.comment, commentTable.commenter, commentTable.datecommented, shareTable.postid, shareTable.dateshared  from shareTable Left Join commentTable on commentTable.postid = shareTable.postid where shareTable.postid IN ($postidarray) order by  shareTable.dateshared desc 
```

其中 $postid 数组是一个帖子 ID 数组。

我遇到的问题是当我尝试将查询结果排序到多维数组中时。

我想要一个名为 comment 的多维数组，它会像这样

```
Comment{

[0] {
       [0] => "Comment 1 from first key in $postidaray"
       [1] =>  "Comment 2 from first key in $postidarray"
    }

[1] {
       [0] => "Comment 1 from second key in $postidarray"
     } // assuming there is only one comment for the second key in $postidarray

[2]{

       [0] => "Comment 1 from third key in $postidarray"
       [1] =>  "Comment 2 from third key in $postidarray"
       [2] =>  "Comment 3 from third key in $postidarray"
       [3] =>  "Comment 4 from third key in $postidarray"
   } 
   // assuming there are 4 comments for the third key in $postidarray
    }
} 
```

我这样做是为了当我做一个 php echo 时，我可以循环出与特定帖子相关的评论

例如，comment[0][1] 会回显“来自 $postidarray 中第一个键的评论 2”

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:34:38.253

你可以做一个`ORDER BY shareTable.postId THEN BY shareTable.dateshared DESC`

这将使具有相同 postId 的所有行一起出现，因此您可以检查 postId 的更改。

```
$i=-1;
$currentPostId=0;

$comment = array();
 while($assoc = mysql_fetch_assoc($res)){
     if($assoc['postId']!=$currentPostId){
              $currentPostId = $assoc['postId'];
              $i++;
     }
  $comment[$i][] = $res;
} 
```

这应该会给你你想要的结果。或者，如果您使用 PDO，请使用准备好的语句而不是使用单个查询`IN( ... )`

```
$stmt = $pdo->prepare("Select ... shareTable.postid=? order by ShareTable.dateshared desc");
 $comment = array();
$p = &$postIds[0];
$stmt->bindParam($p);
 foreach($postIds as $p){
      $stmt->execute();
      $comment[] = $stmt->fetchAll(PDO::FETCH_ASSOC);
 } 
```

# ruby-on-rails - RSpec 因多个 Rails 验证助手而崩溃

> ID：16067052
> 
> 赞同：0
> 
> 时间：2013-04-17T18:06:15.957
> 
> 标签：ruby-on-rails, ruby, rspec, ruby-on-rails-3.2, guard

我的 Customer 模型上的 :website 属性有两种不同的验证。一个是内置长度助手，最大值设置为 255，而另一个是自定义验证。它们都单独工作，并且适当的测试通过了，但是由于某种原因，当我使用两个验证运行我的测试时，RSpec 崩溃到我必须完成退出 Guard 并重新启动它的地步。

这是我的代码，它们之间有什么冲突吗？我以前从未经历过这种情况：

```
class Customer < Active Record::Base

  ...

  URL_REGEX = /(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i

  validates :website, length: { maximum: 255 }
  validate :valid_urls

  private
    def valid_urls
      ["website", "blog", "contact"].each do |attribute|
        errors.add(attribute, "needs to be a valid url") if send(attribute).present? && URL_REGEX.match(send(attribute)).nil?
      end
    end
end 
```

更新：感谢您的帮助，原来整个问题只是一个糟糕的正则表达式。我从 stackoverflow 线程中复制了正则表达式，该线程已经逃脱了一些＆符号，产生了一个错误的正则表达式。我刚刚从 jQuery 验证源中复制了它，它工作正常，很抱歉给您带来麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:36:06.073

Mackshkatz，您可以尝试删除自定义验证以使用 rails 提供的验证吗？像这样：

```
class Customer < ActiveRecord::Base
  validates :website, format: { with: URL_REGEX }, allow_blank: true, length: { maximum: 255 }
  validates :blog,    format: { with: URL_REGEX }, allow_blank: true
  validates :contact, format: { with: URL_REGEX }, allow_blank: true
end 
```

看看它是否通过？似乎问题可能出在您使用的复杂正则表达式中。

# php - 自动完成无法使用动态 html

> ID：16067057
> 
> 赞同：0
> 
> 时间：2013-04-17T18:06:36.107
> 
> 标签：php, jquery, autocomplete

我正在通过 enterPerson() 为输入标签动态添加 html，然后调用 onkeyup=changeOnType(this) 在 autoInvit.php 中回显 $results 时应该显示自动完成，但是为什么我的自动完成代码不起作用，如果我提醒它，事实数据会显示. 有人可以帮我吗？先感谢您 ：）

jquery 和自动完成的头文件：

```
<link rel="stylesheet" href="//code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />  
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script> 
<script src="//code.jquery.com/jquery-1.8.3.js"></script>
<script src="//code.jquery.com/ui/1.10.0/jquery-ui.js"></script> 
```

“main.php”中的自动完成：

```
<script>    
function changeOnType(x){

    $.post(
    "autoInvit.php",
    {
         vals: $(x).val()
    },
    function(data){

    $("#"+x.id).autocomplete( {source:"autoInvit.php" }  );

    //alert(data);  
    }
    );

}
</script> 
```

这是“invities.php”中动态 html 的 php 代码：

```
<?php 

echo '<input class="e" type="email" id="email"  onkeyup="changeOnType(this)"  autocomplete="on" role="textbox" aria-autocomplete="list" aria-haspopup="true"  />';
?> 
```

这是我的 php 文件“autoInvit.php”，它呼应了结果：

```
 <?php

    include("includes/connection.php"); 

    $value = strip_tags($_POST['vals']);

    $req = "SELECT email as name "
        ."FROM members "
        ."WHERE email LIKE '".$value."%' "; 

    $query = mysql_query($req);

    while($row = mysql_fetch_array($query))
    {
        $results[] = $row['name'];
    }

    echo json_encode($results);

    ?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:39:45.647

没有必要提出`post`请求。**编辑**：无需调用单独的函数或将侦听器附加到输入，只需注册自动完成插件即可。一旦 DOM 准备就绪，就需要调用它，因此您需要将它包装在一个 ready 函数中。这应该是您需要的所有 javascript：

```
$(function() {
    $("#"+x.id).autocomplete( {source:"autoInvit.php" }  );
}); 
```

用户输入的内容将与请求一起作为参数传递`term`

[来自自动完成](http://api.jqueryui.com/autocomplete/)的 jQuery 文档：

> 字符串：使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。它可以在同一台主机上，也可以在不同的主机上（必须提供 JSONP）。自动完成插件不过滤结果，而是添加了一个带有术语字段的查询字符串，服务器端脚本应该使用它来过滤结果。例如，如果源选项设置为“ [http://example.com](http://example.com) ”并且用户键入 foo，则会向[http://example.com?term=foo](http://example.com?term=foo)发出 GET 请求。数据本身可以采用与上述本地数据相同的格式。

此外，在将内容从用户直接传递到数据库时要小心。您可以打开自己的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

# regex - 解析 R 中的一行以选择不同的对象

> ID：16067058
> 
> 赞同：1
> 
> 时间：2013-04-17T18:06:40.153
> 
> 标签：regex, r

我有这条线：

```
system<-c("System configuration: type=Shared mode=Uncapped smt=4 lcpu=96 mem=393216MB psize=64 ent=16.00") 
```

我需要解析这个并选择 smt、lcpu、mem、mpsize 和 ent 进入不同的对象。

例如，我这样做是为了选择 smt，但它选择了整条线，有什么想法我在这里做错了吗？

```
smt<-sub('^.* smt=([[:digit:]])', '\\1', system) 
```

在这种情况下，smt 需要有一个数字 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:19:04.213

`strapplyc`在[gusbfn 包](http://gsubfn.googlecode.com)中使用以下内容创建一个列表`L`，其名称是左侧，例如`smt`，其值是右侧。

```
library(gsubfn)

LHS <- strapplyc( system, "(\\w+)=" )[[1]]
RHS <- strapplyc( system, "=(\\w+)" )[[1]]
L <- setNames( as.list(RHS), LHS ) 
```

例如，我们现在可以得到`smt`这样的结果（对于其他左侧也类似）：

```
> L$smt
[1] "4" 
```

更新：简化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:24:14.463

我会使用`strsplit`几次，并且`type.convert`：

```
parse.config <- function(x) {
   clean  <- sub("System configuration: ", "", x)
   pairs  <- strsplit(clean, " ")[[1]]
   items  <- strsplit(pairs, "=")
   keys   <- sapply(items, `[`, 1)
   values <- sapply(items, `[`, 2)
   values <- lapply(values, type.convert, as.is = TRUE)
   setNames(values, keys)
}

config <- parse.config(system)
# $type
# [1] "Shared"
# 
# $mode
# [1] "Uncapped"
# 
# $smt
# [1] 4
# 
# $lcpu
# [1] 96
# 
# $mem
# [1] "393216MB"
# 
# $psize
# [1] 64
# 
# $ent
# [1] 16 
```

输出是一个列表，因此您可以访问任何已解析的项目，例如：

```
config$smt
# [1] 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:25:03.330

添加`.*`到匹配表达式的末尾，您将得到“4”。

```
sub('^.* smt=([[:digit:]]+).*', '\\1', system) 
```

您可能希望添加`+`I 包含在实例中超过一位数的位置。

您也可以通过拆分空格并找到匹配项来解决此问题：

```
splits <- unlist(strsplit(system, ' '))
sub('smt=', '', grep('smt=', splits, value=TRUE))
# [1] "4" 
```

或将其包装在一个函数中：

```
matchfun <- function(string, to_match, splitter=' ') {
  splits <- unlist(strsplit(string, splitter))
  sub(to_match, '', grep(to_match, splits, value=TRUE))
}

matchfun(system, 'smt=')
# [1] "4" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T20:31:51.500

好吧，我投票给@GaborGrothendieck，但我将其作为一个更普通的选择：

```
inp <- c("System configuration: type=Shared mode=Uncapped smt=4 lcpu=96 mem=393216MB psize=64 ent=16.00")
inparsed <- read.table(text=inp, stringsAsFactors=FALSE)
vals <- unlist(inparsed)[grep("\\=", unlist(inparsed))]
vals
#           V3            V4            V5            V6            V7            V8            V9 
#  type=Shared mode=Uncapped         smt=4       lcpu=96  mem=393216MB      psize=64     ent=16.00 
vals[grep("smt|lcpu|mem|mpsize|ent", vals)]
            V5             V6             V7             V9 
       "smt=4"      "lcpu=96" "mem=393216MB"    "ent=16.00" 
```

我会注意到，鉴于`system`函数的存在，为变量选择名称“系统”似乎是最不明智的。

# c++ - 是否可以在一对中添加一个 int ？

> ID：16067061
> 
> 赞同：1
> 
> 时间：2013-04-17T18:06:46.633
> 
> 标签：c++, c, type-conversion

这是 c 和 c++ 中的有效操作吗？

`daysgoneby += months[monthindex].day;`

基本上将查找表中的一个字段添加到一个 int （在这种情况下，它是一个 int 到一个 int，所以它看起来是有效的）。

其中 daysgoneby 是 int 类型，`months[monthindex].day`参考下表。

如果不是为什么？以及如何规避这一点以使用表中的 int 类型。

```
struct Monthpairs                       // Fields for month & day lookup
{
    const char* mon;                    // Months
    int day;                            // Days
};

Monthpairs months[] =                   // Lookup table for months & day
{
    {"Jan", 31},
    {"Feb", 28},
    {"Mar", 31},
    {"Apr", 30},
    {"May", 31},
    {"Jun", 30},
    {"Jul", 31},
    {"Aug", 31},
    {"Sep", 30},
    {"Oct", 31},
    {"Nov", 30},
    {"Dec", 31},
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:11:27.540

您的陈述非常好，最后`day`您的查找表中的字段`int`也是如此。

关于您的问题的标题，虽然在您的配对中使用特定字段很好（只要类型对于运算符/函数是正确的），您不能添加到配对本身，因为它的类型与运营商期望。

# android - 如何在所有手机android中将敌人插入同一地面

> ID：16067064
> 
> 赞同：0
> 
> 时间：2013-04-17T18:07:02.147
> 
> 标签：android, opengl-es, bitmap, textures

我正在尝试使用 OpenGL 在 android 中制作游戏。

除了这个，一切都很好。

我有一个星系 S2，我的兄弟有一个星系 S3。

当你在我的手机上运行游戏时，敌人会准确地走到我想要的位置（Y 轴）。但是在我哥哥的手机上，敌人比我想要的位置要低一点。

这张图片解释得更好：

**左边是我的手机，右边是我弟弟的手机。**

![在此处输入图像描述](https://i.stack.imgur.com/lTYSo.png)

我定义敌人 Y 的方式是这样的：

```
 public void addSprite(float screenWidth, float screenHeight) {
        tempSprite = new NormalZombie();
        tempSprite.x = 0;
        tempSprite.y = screenHeight - 30; //IMO this is the problem
        tempSprite.startpos = screenHeight - 30;
        tempSprite.maxX = screenWidth;
        sprites.add(tempSprite);
        background = new GameBG();

    } 
```

我很确定我不能在那里使用'30'硬编码，因为分辨率之间的差异，但我需要在那里使用什么来将敌人放在每部手机的同一个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:25:55.920

在平板电脑上获取硬编码值`screenHeight`并将其定义为常量 MY_HEIGHT

```
static const int MY_HEIGHT = 800; // make the 800 your actual pixel height 
```

[在 wiki 上为Samsung Galaxy S II](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_II)找到 800 个。改变：

```
tempSprite.y = screenHeight - 30;
tempSprite.startpos = screenHeight - 30; 
```

至：

```
tempSprite.y = screenHeight - 30 * screenHeight / MY_HEIGHT;
tempSprite.startpos = screenHeight - 30 * screenHeight / MY_HEIGHT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:17:45.653

所以，我必须通过除以一个给我预期位置的数字来获得屏幕比例。

我是这样做的：

```
 double ystart;
ystart = screenHeight - (screenHeight / 24);
tempSprite = new NormalZombie();
tempSprite.x = 0;

tempSprite.y = (float)ystart;
tempSprite.startpos = (float)ystart;
tempSprite.maxX = screenWidth;
sprites.add(tempSprite);
background = new GameBG(); 
```

# sphinx - 合并实时索引和磁盘索引

> ID：16067065
> 
> 赞同：0
> 
> 时间：2013-04-17T18:07:02.953
> 
> 标签：sphinx

我是狮身人面像的新手（一般是全文搜索）。我读过 main+delta 方案适用于当您拥有大量不随时间变化的数据以及添加的一些新数据时。

所以我有两个索引。一个主指数和一个 RT 指数。主索引被索引一次使用 `>indexer --merge index_main index_rt --rotate`
但我得到这个错误 `FATAL: Failed to merge index index_rt to index_main: source index preload failed: failed to open C:\path\to\index\index_rt.sph ( No such file or directory )`

我猜这是因为实时索引的存储方式与磁盘索引不同。有没有办法直接合并这些索引？

我可能不需要实时索引更新。如果是这样，使用 cron 每天更新一次增量索引并每周合并它们会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:16:41.233

是的，我认为不支持合并 RT 索引。它们已经分成许多部分。

通常它是非此即彼的，要么使用 RT 索引，要么使用磁盘索引（通过 main+delta）。

如果要使用 RT 索引，只需一个大索引 - 不要拆分为 main+delta。

（在应用程序上并不难，如果你更新小增量，使用 sphinxQL，你可以很容易地更新一个大索引）

# javascript - 带有时间戳的 localStorage 内容以删除自身

> ID：16067066
> 
> 赞同：3
> 
> 时间：2013-04-17T18:07:02.973
> 
> 标签：javascript, jquery, local-storage

我想为 localStorage 中的内容设置一个计时器。

例如我有一个动态更新的 DIV

```
<div id="news"><p>test</p></div> 
```

并设法使用以下代码将其作为 html 块添加到 localStorage：

```
$(function() {
   localStorage["homeNews"] = JSON.stringify($("#news").html());
});
$(function() {
   if (localStorage["homeNews"] != null) {
       var contentsOfNews = JSON.parse(localStorage["homeNews"]);    
      $("#news").html(contentsOfNews);
 } 
}); 
```

我需要向 localStorage["homeNews"] 添加一个时间戳，并在 5 分钟后通过检查当前时间和我的 localStorage 的时间戳将其删除。

小提琴在这里：http: [//jsfiddle.net/Rn4NC/](http://jsfiddle.net/Rn4NC/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:53:41.860

# LocalStorage Content Timestamp with TTL Time To Live to remove its own

> JSFiddle：http: [//jsfiddle.net/Rn4NC/3/](http://jsfiddle.net/Rn4NC/3/)

目标是提供一个易于使用的接口，以根据程序员提供的时间提取不太旧的数据。这是简单的界面：

## 带 TTL 的 DB 示例的用法

### HTML

```
<div id="news"><p>test</p></div> 
```

### JavaScript

```
$(function() {
    // Set Value with TTL of 5 Seconds using Milliseconds.
    db.set( "homeNews", $("#news").html(), 5000 );
});

$(function() {
    // Get Value
    var contentsOfNews = db.get("homeNews");

    // Show Value
    $("#news").html(contentsOfNews);
}); 
```

这是示例用例，接下来是支持 TTL 的接口定义：

### 具有 TTL 接口定义的本地存储。

这是使用的接口逻辑，`db`在上面的示例中使用。查看[JSFiddle](http://jsfiddle.net/Rn4NC/3/)示例以了解完整用法。

```
$(function(){
    function now () {return+new Date}
    var db = window.db = {
        get  : function(key) {
            var entry = JSON.parse(localStorage.getItem(key)||"0");
            if (!entry) return null;
            if (entry.ttl && entry.ttl + entry.now < now()) {
                localStorage.removeItem(key);
                return null;
            }
            return entry.value;
        },
        set : function( key, value, ttl ) {
            localStorage.setItem( key, JSON.stringify({
                ttl   : ttl || 0,
                now   : now(),
                value : value
            }) );
        }
    };
}); 
```

# c# - 在程序的不同部分经常出现错误

> ID：16067067
> 
> 赞同：0
> 
> 时间：2013-04-17T18:07:04.163
> 
> 标签：c#, c#-4.0

我正在使用 Visual Studio 2012（OS Windows 8）中的控制台应用程序开发一个项目。`SqlConnection`该程序使用一个类连接到 SQL Server 2012，并使用`SqlBulkCopy`.

此外，该程序使用 a`StreamWriter`来打印结果。此外，该程序包含一些`Parallel.For`和`Parallel.Invoke`. 我在代码的不同部分经常遇到此错误。我使用了 try catch 块，但程序抛出了这个错误。

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

我查看了相关帖子，但找不到任何解决方案。我不知道这与我的硬件有关。我添加错误。你能帮我解决这个问题吗？

谢谢你。

![错误信息](https://i.stack.imgur.com/GkNqK.png)

![错误信息](https://i.stack.imgur.com/pb1ow.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:19:21.013

StreamWriter 不是线程安全的。因此，如果您在不同的并行块​​中重用相同的流写入器，则可能会导致问题。

其他一些指针：http: [//msdn.microsoft.com/en-us/library/dd997392.aspx](http://msdn.microsoft.com/en-us/library/dd997392.aspx)

# wpf - 在运行时更改绑定并保存类实例 WPF

> ID：16067070
> 
> 赞同：0
> 
> 时间：2013-04-17T18:07:10.727
> 
> 标签：wpf, xaml

我正在编写一个 WPF 程序 在 .NET 4.5 上编写一个程序，该程序将在内部保存很多设置，我面临着几个问题。

例如，我有一个相机，我需要在运行时创建该相机设置的另一个实例。对于 XAML 页面，我有很多绑定，现在对于第二个实例，我需要为该类的新实例清除它们的使用绑定，在该类的新实例中我持有该设置的属性（当然，如果我想正确的话）所以，我有2个问题：

1.  如何更改绑定，以便编写尽可能少的代码（请记住，我不知道将创建多少个实例）？

2.  我如何创建类的第二个、第三个等实例并丢失内存中的对象，因为我需要在运行时保存每个类的每个实例，并在这些实例之间切换时更改绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:30:12.100

创建一个为您管理和公开设置的视图模型。使用附加属性来提供当前选择的设置：

```
public class CameraSettings
{
  public string Title { get; set; }
  public bool Grayscale { get; set; }
}

public class CameraViewModel : INotifyPropertyChanged
{
  private CameraSettings _SelectedSettings;
  private List<CameraSettings> _Settings;

  public event PropertyChangedEventHandler PropertyChanged;

  public IEnumerable<CameraSettings> Settings
  {
    get { return _Settings; }
  }

  public CameraSettings SelectedSettings
  {
    get { return _SelectedSettings; }
    set
    {
      if (_SelectedSettings != value)
      {
        _SelectedSettings = value;

        if (PropertyChanged != null)
        {
          PropertyChanged(this, new PropertyChangedEventArgs("SelectedSettings"));
        }
      }
    }
  }

  public CameraViewModel()
  {
    _Settings = new List<CameraSettings>()
    {
      { new CameraSettings() { Title = "BlackWhite", Grayscale = true } },
      { new CameraSettings() { Title = "TrueColor", Grayscale = false } }
    };
  }

} 
```

然后你可以将你的视图绑定到这个视图模型。示例视图：

```
<Window.DataContext>
    <local:CameraViewModel />
</Window.DataContext>

<StackPanel>

    <ComboBox ItemsSource="{Binding Settings}" SelectedItem="{Binding SelectedSettings, Mode=TwoWay}">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <Label Content="{Binding Title}" />
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox>

    <TextBlock Text="{Binding SelectedSettings.Grayscale}" />

</StackPanel> 
```

# c# - A组减去B组

> ID：16067072
> 
> 赞同：3
> 
> 时间：2013-04-17T18:07:13.640
> 
> 标签：c#, .net, set

我正试图以最有效的方式从另一组中拿走一组。因此，如果我有以下集合 A 和 B，那么 A_minus_B 应该给出 {1, 2, 6}。这就是我所拥有的，尽管我确信这不是最有效的方法。

```
HashSet<int> A = new HashSet<int>{ 1, 2, 3, 4, 5, 6 };
HashSet<int> B = new HashSet<int> { 3, 4, 5 };

HashSet<int> A_minus_B = new HashSet<int>(A);

foreach(int n in A){
    if(B.Contains(n)) A_minus_B.Remove(n);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T18:08:18.480

您可以使用该`Except()`方法。这是代码：

```
HashSet<int> A_minus_B = new HashSet<int>(A.Except(B)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:09:55.847

用这个 ：

```
var setA= new HashSet<int>();
var setB= new HashSet<int>();
...

var remaining = new HashSet<int>(setA);
remaining.ExceptWith(setB); 
```

`remaining`是您的新过滤集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:09:09.747

您可以使用[exceptWith](http://msdn.microsoft.com/en-us/library/bb299875.aspx)，它将`A`通过删除以下项目进行修改`B`：

```
A.ExceptWith(B); 
```

您也可以使用`Except`which 将返回新集合；

# gwt - 在线获取 GWT 项目（使用 RPC）的最简单方法？

> ID：16067078
> 
> 赞同：1
> 
> 时间：2013-04-17T18:07:41.150
> 
> 标签：gwt, gwt-rpc

我有一个带有 RPC 的 GWT 程序，它在开发模式下运行良好。它从 war 文件夹中的 .txt 文件读取/写入。我想把它放到网上，例如，其他人可以使用 URL 在他们的 iPhone 上访问它。我拥有一个 GoDaddy 托管帐户。

我以前从未使用过Tomcat。我正在寻找让我的项目上线的最快和最简单的方法。如果可以的话请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:37:36.197

如果您没有运行 tomcat/jetty 实例的服务器并且您不想自己托管它，那么您应该查看[Google App Engine](https://cloud.google.com/products/)。

你可以在[这里](https://developers.google.com/web-toolkit/doc/1.6/tutorial/appengine)找到一个非常好的教程，如何将 GWT-Application 发布到 Google App Engine。

# angularjs - Angularjs - 看着一个承诺 - 变得未定义

> ID：16067081
> 
> 赞同：1
> 
> 时间：2013-04-17T18:07:45.550
> 
> 标签：angularjs, promise

我知道模板可以绑定到承诺或真实值，并且当该值更改时，模板会更新。

我想在指令中做类似的事情，我观察对承诺的更改，并在更新该承诺时重新加载指令中的数据。

但是，当我看到一个承诺时，它似乎注册了更改，但随后立即设置为“未定义”。

见[http://plnkr.co/edit/eOjkuvyrQvKhkAbVLGVG?p=preview](http://plnkr.co/edit/eOjkuvyrQvKhkAbVLGVG?p=preview)

如您所见，模板更新没有问题，但如果您检查控制台，“isNotAPromise”手表按预期工作，但“isAPromise”手表被触发两次，都是“未定义”。

有什么线索吗？

这是让您非常高兴的代码：

```
app.controller('MainCtrl', function($scope, $q) {
  var c;
  c = 1;
  setInterval(function() {
    c = c + 1;
    console.log('---------------');
    console.log(['c changed to ', c]);
    return $scope.$apply(function() {
      $scope.isNotAPromise = c;
      return $scope.isAPromise = $q.when(c);
    });
  }, 1000);
  $scope.$watch('isAPromise', function(newVal, oldVal) {
    return console.log(['isAPromise changed', oldVal, newVal]);
  });
  return $scope.$watch('isNotAPromise', function(newVal, oldVal) {
    return console.log(['isNotAPromise changed', oldVal, newVal]);
  });
}); 
```

谢谢，罗伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:49:23.687

我添加了一个时间戳来确定两个手表何时触发：

```
console.log [+new Date(), 'isAPromise changed', oldVal, newVal] 
```

样本输出：

```
["c changed to ", 3] app.js:12
[1366223960472, "isAPromise changed", 2, undefined] app.js:19
["isNotAPromise changed", 2, 3] app.js:22
[1366223960473, "isAPromise changed", undefined, 3] 
```

因此，两块手表`isAPromise`的发射间隔为 1 毫秒。我猜会发生什么`$q.when(c)`是第一次分配给 时`$scope.isAPromise`，这是`undefined`因为承诺尚未解决。然后 promise 被解析（可能在下一个 $digest 循环期间），`isAPromise`然后设置为（resolved？）promise 的值。

# amazon-fps - 使用亚马逊 FPS 市场选项是否要求发件人拥有亚马逊账户？

> ID：16067083
> 
> 赞同：1
> 
> 时间：2013-04-17T18:07:59.167
> 
> 标签：amazon-fps

这是一个非常基本的问题。似乎如果我使用带有 CBUI 的 FPS 市场选项从发件人那里获得付款授权，这要求发件人（网站上的消费者）有一个亚马逊帐户才能付款。或者他们可以在不需要亚马逊账户的情况下输入信用卡信息吗？

我喜欢消费者可以使用他们的亚马逊账户支付东西的选项，但我不能让所有消费者都要求这样做。我也喜欢使用 FPS 获得的灵活性，但似乎这只适用于愿意使用其亚马逊账户的消费者。

有没有什么方法可以在不要求发件人/消费者拥有亚马逊账户的情况下获得 FPS 市场功能的好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T15:15:42.253

不幸的是，是的。这是我在打电话给他们并亲自询问他们后才知道的。事实上，Checkout by Amazon、Simple Pay 和 FPS 都要求客户拥有（或创建）亚马逊账户。

# python - Python2 到 python3 列表和字节与字符串

> ID：16067084
> 
> 赞同：0
> 
> 时间：2013-04-17T18:08:03.013
> 
> 标签：python, arrays, string, cgi

我有一个 IP 地址列表，我可以远程登录并从中收集数据。我将这些数据放入两个变量中。然后我想将变量中的数据打印到 HTML 表中。它在 Python 2 中有效，但在 Python 3 中无效。它给了我以下错误：`Can't convert 'bytes' object to str implicitly`. 我看到其他人对字节码与字符串码进行了解释，但是列表呢？如果可以的话请帮忙。

```
#!/usr/bin/python3

import cgi, cgitb
import telnetlib
import re
import socket

user            = 'usr'
password        = 'pwd'

print ("Content-type:text/html\r\n\r\n")
print ("<html>")
print ("<head>")
print ("<title>Locating IP Addresses</title>")
print ("<link href=\"/styles/main.css\" type=\"text/css\" rel=\"stylesheet\" >")
print ("</head>")
print ("<body>")

for count in ["10.1.1.4", "10.1.1.3", "10.1.1.2"]:
    server = (count)
    try:
        tn = telnetlib.Telnet(server)
        tn.read_until(b"ogin")
        tn.write(user.encode('ascii') + b"\r\n")
        tn.read_until(b"assword")
        tn.write(password.encode('ascii') + b"\r\n")
        tn.write(b"environment no more\r\n")
        tn.write(b"configure\r\n")
        tn.write(b"router\r\n")
        tn.write(b"info\r\n")
        tn.write(b"logout\r\n")
        output = (tn.read_all())
        interfaces = (re.findall(b'interface\s\"(.+)\"', output))
        ipaddr = (re.findall(b'address\s(.+)/', output))
        print ("<table>")
        print ("<tr>")
        print ("<th class=\"bld\">%s</th>" % (server))
        print ("</tr>")
        for i,j in zip(interfaces, ipaddr):
            print ("<tr>")
            print (("<td class=\"sn\">"+j+"</td>" "<td class=\"prt\">"+i+"</td>"))

        except socket.error:
            print ("communication error with " + server)

print ("</body>")
print ("</html>") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:45:29.530

当您在正则表达式中使用字节时，结果也将是字节，在这种情况下，这意味着`interfaces`并且`ipaddr`将是字节列表。

稍后您尝试使用运算符将​​这些结果与字符串连接，该`+`运算符不允许混合`bytes`and `str`。

试试这个：

```
print("<td class=\"sn\">"+j.decode()+"</td><td class=\"prt\">"+i.decode()+"</td>") 
```

# c++ - ISAPI 和 Visual C++ 2010

> ID：16067087
> 
> 赞同：1
> 
> 时间：2013-04-17T18:08:18.213
> 
> 标签：c++, visual-studio-2010, isapi

我是一名 Visual C++ 程序员，主要通过 OpenSSL 处理 USB/串行通信和一些 HTTPS。我需要将旧的 VS 2003 项目更新到 VS 2010，但经过一些谷歌搜索后，我了解到 ISAPI 已从 MFC 类向导中删除，他们现在提供 SDK 。有谁知道在哪里学习这个？我实际上在互联网上进行了搜索，但我没有找到合适的。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:13:56.520

您不需要 MFC 来构建 ISAPI 扩展。这是一个非常好的教程，如何仅使用 WinAPI 进行操作：[什么是 ISAPI 扩展？](http://www.codeproject.com/Articles/1432/What-is-an-ISAPI-Extension)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:20:47.130

这是在 VS2008 中构建 MFC ISAPI 项目的一种解决方法，但它也应该在 VS2010 中工作 - [http://blogs.msdn.com/b/jpsanders/archive/2007/12/10/chttpserver-not-included-in-视觉工作室 2008.aspx](http://blogs.msdn.com/b/jpsanders/archive/2007/12/10/chttpserver-not-included-in-visual-studio-2008.aspx)

# midi - 从 MaxMSP 控制 Ableton Live 速度

> ID：16067092
> 
> 赞同：1
> 
> 时间：2013-04-17T18:08:36.640
> 
> 标签：midi, max-msp-jitter, ableton-live

我的问题是首先 - midi cc 信息是否仅为整数？即 0 - 127 但**不是**5.55

我问的原因是我试图从 MaxMSP 控制 Ableton Live 的节奏。

我发现 midi-cc 0 记录了 20bpm 的速度，而 midi-cc 127 记录了 999bpm 的速度

但似乎我的准确性完全被破坏了，因为每个 cc 整数之间的距离大约为 9bpm，而 9bpm off 并不是很有说服力。太乱了

我想知道是否有我错过的东西，或者可能使用其他协议。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:26:47.420

1）midi只发送整数，所以这不是控制bpm等高精度参数的好方法。

2) 我强烈推荐使用 OSC。为使用 live.object 访问 Live 的速度的实时补丁创建一个最大值，并使用 udpreceive 对象接收您使用 udpsend in max 发送的值。

让我知道这是否足够清楚，或者我可以为您制作一个示例最大值以用于实时补丁。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-05T17:43:43.550

如果您使用 max for live，您将能够使用实时对象模型来做您想做的事情。使用`live.path`和`live.object`选择`live_set`对象，并向 live.object 发送消息`set tempo [val]`。如果您正在使用 Max/MSP 做很多事情并进行直播，那么跨级可能是值得的。

[![现场设置的设置速度](https://i.stack.imgur.com/nYvB2.png)](https://i.stack.imgur.com/nYvB2.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T12:36:42.270

是的 MIDI 是 7Bit，所以最大数字是 127（0 到 127 = 128）。但是您可以使用 CC 来使用 14Bit 控制器。

LSB MSB 控制器

在这里您可以找到解释：

[https://www.sweetwater.com/insync/msb-lsb-applications/](https://www.sweetwater.com/insync/msb-lsb-applications/)

# android - Eclipse android 项目启动进度冻结

> ID：16067096
> 
> 赞同：0
> 
> 时间：2013-04-17T18:08:44.903
> 
> 标签：android, eclipse

我正在开发一个 android 应用程序，但遇到了一个可怕的问题。当我尝试启动应用程序时，“启动项目”的进度没有完成！它只是冻结，甚至不响应取消请求。不用说，任何其他的进步都无法完成，因此我什至无法超越。

我正在使用 Eclipse Indigo、ADT V 21.1、SDK API 版本 15 和 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:10:18.793

尝试改用[ADT 捆绑包](http://developer.android.com/sdk/installing/bundle.html)。这可能无济于事，但他们说我们应该使用 ADT Bundle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:43:02.790

不知道是什么问题。刚刚重新安装了 ADT，一切都恢复正常了。

# c# - 卡在异步方法

> ID：16067097
> 
> 赞同：1
> 
> 时间：2013-04-17T18:08:45.140
> 
> 标签：c#, multithreading, async-await

可能有一些明显的错误，但我正在做一些没有经验的事情。我正在尝试从互联网上获取一个字符串，但它不起作用。在 WinRT 中，我们必须在异步方法中使用 HttpClient，我这样做如下：-

```
 private async void update()
    {
        try
        {   
                rawdata = await client.GetStringAsync(url);     

        }
        catch
        {
            rawdata = "Updation failed. Error code:vish42042";
        }

      } 
```

现在，这是代码的调用方式：-

```
 string temp = @url;
                update();
          WAIT:
                if (rawdata == null) {
                    goto WAIT;
                } 
```

rawdata 是一个全局变量，我在 goto WAIT: 上进行了检查，以查看代码到底在哪里失败，以及在这里失败。我希望当从互联网更新 rawdata 时 if 循环会中断，但它永远不会发生。我做错了吗？（显然我没有以我知道的最好的方式做，但它也错了吗？）。问题出在哪里？

更新：实际上问题不在于如何使这个功能工作，它正在使用一两个修改。真正的问题是如何确保在调用 update() 函数后更新 rawdata，因为此后的代码期望它不是 null 而是更新的。

经过一些很好的解释和回答，我认为这就是可以解决问题的地方：-

```
 string xmlstring = xmlupobj.getUpdatedData(); 
     // Above is the ultimate point of return of data. 
    //Next code line is this, which throws a null exception 
                    XDocument xmldoc = XDocument.Parse(xmlstring); 
```

因此，我认为在使 getUpdatedData() 异步后，返回 Task，如果我们可以将 Task 转换为正确的字符串以防它已下载，如果尚未下载则为 null，那么我们可以使用一些错误的代码行进行检查：-

```
 string xmlstring = xmlupobj.getUpdatedData();
    WAIT:
        if (xmlstring == null)
        {
            goto WAIT;
        }
        xmldoc = XDocument.Parse(xmlstring); 
```

所以如果它是正确的，唯一的问题是如何设置xmlstring？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:11:31.303

你应该让这个方法返回一个`Task`：

```
private async Task update()
{
    try
    {
        using (var client = new HttpClient())
        {
            rawdata = await client.GetStringAsync(url);     
        }
    }
    catch
    {
        rawdata = "Updation failed. Error code:vish42042";
    }
} 
```

然后当你调用它时：

```
string temp = @url;
await update();

// rawdata will be set here 
```

* * *

另一种选择是直接返回字符串，而不是将其设置在变量中：

```
private async Task<string> UpdateAsync()
{
    try
    {
        using (var client = new HttpClient())
        {
            return await client.GetStringAsync(url);     
        }
    }
    catch
    {
        return "Updation failed. Error code:vish42042";
    }
} 
```

然后，您可以通过以下方式获取数据：

```
string rawdata = await UpdateAsync(); 
```

请注意，这两种方法都要求调用者也是一个`async`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:50:51.307

Based on your update:

> Actually the problem is not HOW TO MAKE THIS FUNCTION WORK, it is working with a modification or two. The real problem is how do I make sure that rawdata is updated once update() function is called, because the code thereafter is expecting it not to be null but updated.

The answer is simple. **You can't**.

The entire purpose of making the method asynchronous is that calling `update` will not set the value right then an there, it will start some unit of work that will set it *at some unknown point in the future* while letting you continue on with the program instead of waiting. In order to ensure that the variable is set before `update` returns you need to make the method synchronous, and wait inside of the method for a value to exist, instead of using asynchrony.

If you would like to keep `update` asychronous then you'll need to make some simple modifications, as indicated in [Reed's answer](https://stackoverflow.com/a/16067162/1159478) to allow the caller to be notified of when the result has been computed, and then you can either `await` the method, or manually add a continuation using `ContinueWith`, to execute the desired code once the result has been computed.

# java - Java - 错误：找不到符号

> ID：16067098
> 
> 赞同：0
> 
> 时间：2013-04-17T18:08:51.680
> 
> 标签：java

我正在编写一个程序，该程序调用同一文件夹中不同类的“发票”方法。我不断收到以下错误：

```
error: cannot find symbol

strInvoice = invoice();
             ^
symbol: method invoice() 
```

这是我在程序中调用该方法的方式：

```
strInvoice= invoice();
JOptionPane.showInputDialog(null, strInvoice, "*Name*'s Party Store", -1); 
```

这是该方法在位于同一文件夹中的类文件中的样子：

```
public String invoice()
{
    String strInfo=""; //string returned containing all the information
    double dBalloonNoDiscount;  //balloon total without discount
    double dCandleNoDiscount;   //candle total without discount
    double dBannerNoDiscount;   //banner total without discount
    double dSubtotal;       //subtotal
    double dTax;            //tax
    double dShippingCost;       //shipping cost
    double dTotal;          //total
    String strShippingType;     //shipping type

    dBalloonNoDiscount = balloons * 2.50;
    dCandleNoDiscount = candles * 6.00;
    dBannerNoDiscount = banners * 2.00;

    dSubtotal = subtotal();
    dTax = tax();
    dShippingCost = shippingCost();
    strShippingType = shippingType();
    dTotal = orderTotal();

    strInfo += "\nQuantity"
        + "\n\nBalloons: " + balloons + " @ $2.50 = " 
            + df.format(dBalloonNoDiscount) + "* Discount Rate: "
            + df.format(discount('B')) + " = " 
            + df.format(subtotal('B'))
        + "\n\nCandles: " + candles + " @ 6.00 = " 
            + df.format(dCandleNoDiscount) + "* Discount Rate: "
            + df.format(discount('C')) + " = " 
            + df.format(subtotal('C'))
        + "\n\nBanners: " + banners + " @ $2.50 = " 
            + df.format(dBannerNoDiscount) + "* Discount Rate: "
            + df.format(discount('N')) + " = " 
            + df.format(subtotal('N'))
        + "\nSubtotal: " + df.format(dSubtotal)
        + "\n  Tax: " + df.format(dTax)
        + "\nShipping: " + df.format(dShippingCost) + " - " 
            + strShippingType
        + "\n Total: " + dTotal;

    return strInfo;
} 
```

我希望这是足够的信息。我似乎无法找到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:11:19.250

```
I am writing a program that calls upon the "invoice" method from a different 
class in the same folder. 
```

然后你这样称呼它：

```
strInvoice= invoice(); 
```

这行不通，因为您需要将此方法称为：

```
strInvoice = obj.invoice(); 
```

其中 obj 是另一个类的实例。

或者，如果`invoice()`方法是`public static`那么你也可以这样称呼它：

```
strInvoice = SomeClass.invoice(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:05:44.063

如果您调用的方法在调用它的类之外，那么在调用方法之前您需要一个引用。

在您的情况下 invoice() 方法在其他类中可用，并且您在其他类中调用此方法，因此您需要在其中 invoice() 方法可用的类（对象）的引用。例如 ：

```
 ClassA object = new ClassA();
  object.invoice();   // assume invoice method is available in ClassA. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:11:11.447

如果您希望能够从不同的类调用方法，则需要将该方法设为静态，或者您需要获取定义它的类的实例。

在您的情况下，您可能需要一个实例，例如：

```
YourClass instance = new YourClass(); 
```

然后：

```
strInvoice = instance.invoice(); 
```

# asp.net - Ajax ModalPopup 在 IE8 中显示错误

> ID：16067099
> 
> 赞同：2
> 
> 时间：2013-04-17T18:08:53.053
> 
> 标签：asp.net, ajax, internet-explorer-8, datalist, modalpopupextender

我在 IE8 上使用 modalPopup 控件时遇到问题。需要弹出的面板已经弹出。

因为它看起来像（在比 IE 8 更新的浏览器中），一行中有面板，当您单击其中一个时，会弹出一个窗口（使用 AJAX modalPopUp） ![面板列表](https://i.stack.imgur.com/ki19f.png) ![弹出窗口](https://i.stack.imgur.com/caSYH.png)

在 IE8 中，它显示弹出窗口（面板），甚至无需单击列表中的面板之一。

![在此处输入图像描述](https://i.stack.imgur.com/q0tnP.png)

这是代码：

```
<asp:updatepanel id="UpdatePanel1" runat="server">
<contenttemplate>
<asp:panel id="PanelManufacturerPictures" runat="server" scrollbars="Auto" width="100%">
<asp:datalist id="DataListManufacturersPictures" runat="server" cellpadding="5" repeatdirection="Horizontal" repeatcolumns="11" showfooter="False" showheader="False" cellspacing="16">
<itemstyle height="75px" width="75px"/>
<itemtemplate>
    <asp:imagebutton id="ImageButtonManufacturerPicture" runat="server" alternatetext='<%# eval("manufacturername") %>' Height="100%" ImageUrl='<%# "~/elimansourwcf/manufacturerspictures/"+databinder.eval(container.dataitem, "imageurl") %>' ToolTip='<%# eval("manufacturername") %>' Width="100%" CausesValidation="False" /> <asp:roundedcornersextender id="RoundedCornersExtenderDetailsManufacturers" runat="server" targetcontrolid="PanelManufacturersDetails" radius="8" bordercolor="Red">
</asp:roundedcornersextender>
<asp:modalpopupextender id="ModalPopupExtenderManufacturerDetails" runat="server" popupcontrolid="PanelManufacturersDetails" targetcontrolid="ImageButtonManufacturerPicture" backgroundcssclass="modalBackgroundProducts" cancelcontrolid="ButtonManuCancel">
</asp:modalpopupextender>
<asp:panel id="PanelManufacturersDetails" runat="server" backcolor="White">
<div dir="rtl">
    <asp:label id="LabelManufacturerName" runat="server" font-bold="True" font-size="XX-Large"></asp:label>
    <div style="float: right;">
        <asp:table id="TableDetails" runat="server" cellpadding="15" font-bold="True" cellspacing="15">
        <asp:tablerow id="TableRow5" runat="server">
        <asp:tablecell id="TableCell8" runat="server" width="100px" horizontalalign="Left" columnspan="2">
        <asp:roundedcornersextender id="RoundedCornersExtenderDetailsManufacturerCancel" runat="server" targetcontrolid="ButtonManuCancel" radius="8">
        </asp:roundedcornersextender>
        <asp:button id="ButtonManuCancel" runat="server" text="צא מחלון זה" width="75px" causesvalidation="False" backcolor="Red" forecolor="White" font-bold="True"/>
        </asp:tablecell>
        </asp:tablerow>
        </asp:table>
    </div>
</div>
</asp:panel>
</itemtemplate>
</asp:datalist>
</asp:panel>
</contenttemplate>
</asp:updatepanel> 
```

我看到一个帖子：

> [Ajax ModalPopup 在 IE8 中显示错误 - IE9](https://stackoverflow.com/questions/14596684/ajax-modalpopup-wrong-display-in-ie8-ie9) 但我不明白将 css “位置：绝对；”放在哪里

这是该网站的网址：

[www.emansour.co.il](http://www.emansour.co.il)

感谢您的帮助

[编辑] 我注意到这个问题发生在我在有界数据控件中使用 modalPopup 时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:48:08.717

您的错误是由`RoundedCornersExtender`. 出于某种原因，有时这些控件不能很好地嵌套在众多`Panels`控件和`UpdatePanels`. 我通过删除`RoundedCornersExtender`你的按钮样式来解决这个问题。删除此`RoundedCornersExtender`控件，并在您的代码中添加以下 css 类以使您的按钮具有圆角：

```
.rounded
{
    color: white;
    background-color: red;
    font-weight: bold;
    width: 75px;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
    border-bottom-left-radius: 8px;
    border: 0px none;
} 
```

然后将样式应用于您的按钮：

```
<asp:Button ID="ButtonManuCancel" runat="server" Text="צא מחלון זה" Width="75px" CausesValidation="False" BackColor="Red" ForeColor="White" Font-Bold="True" CssClass="rounded" /> 
```

我离开了另一个`RoundedCornersExtender`并在 IE 上进行了测试，但没有收到错误消息。AjaxToolkit 有时会非常有用，但有时可能会让人头疼。如果你想添加像这样的简单功能（简单的 css），我建议不要使用 ControlExtension 来完成这样一个简单的事情。对于更复杂的东西，我会使用 Ajax.net 控件，或者完全避免使用它。

# sql - SQL Sum of last X Sum of records

> ID：16067105
> 
> 赞同：4
> 
> 时间：2013-04-17T18:09:11.970
> 
> 标签：sql, sql-server-2008

我已经找了一段时间，但我找不到这个问题的答案（也许我没有搜索正确的术语或其他东西）。基本上，我有一个数据库，每个日期有任意数量的条目。我需要获取包含条目的最后 X 天的总和（忽略没有条目的天数）。我知道如何找到每一天的总和。

假设我有一个名为“Yield”的表：

```
UnitID  Date        TestTime    NumMeasured NumPassing
1       2013-04-05  10:15       25          3
2       2013-03-31  10:12       30          1
3       2013-03-30  10:12       26          2
4       2013-03-29  10:30       11          1
5       2013-03-31  10:20       6           2
6       2013-04-05  10:30       5           0 
```

然后我使用这个查询：

```
SELECT DISTINCT 
    Date, 
    (
        SELECT SUM([NumMeasured]) 
        FROM [dbo].[Yield] T1 
        WHERE T1.Date = T2.Date
    ) AS 'NumMeasured', 
    (
        SELECT SUM([NumPassing]) 
        FROM [dbo].[Yield] T1 
        WHERE T1.Date = T2.Date
    ) AS 'NumPassing' 
FROM [dbo].[Yield] T2 
```

要获得每天通过/测量的总次数：

```
Date        NumMeasured NumPassing
2013-03-29      11          1
2013-03-30      26          2
2013-03-31      36          3
2013-04-05      30          3 
```

然后我需要一个查询，我可以在一个日期（比如我在 4 月 5 日调用它）获取包含条目的最后 X（比如 100）天并返回 NumMeasured 和 NumPassing 列的总和。天。我无法让这部分工作，我一直遇到我没有足够经验来解决的 SQL 问题。我正在寻找类似的东西

```
SELECT
    (
        SELECT TOP 100 SUM(T3.[NumMeasured]) 
        FROM T3 
        WHERE T3.Date <= '4/05/2013' 
        ORDER BY T3.Date
    ) AS 'NumMeasured', 
    (
        SELECT TOP 100 SUM(T3.[NumPassing]) 
        FROM T3 
        WHERE T3.Date <= '4/05/2013' 
        ORDER BY T3.Date
    ) AS 'NumPassing', 
    (
        SELECT DISTINCT 
            Date, 
            (
                SELECT SUM([NumMeasured]) 
                FROM [PhaseNoiseMonitoring].[dbo].[Yield] T1 
                WHERE T1.Date = T2.Date
            ) AS 'NumMeasured', 
            (
                SELECT SUM([NumPassing]) 
                FROM [PhaseNoiseMonitoring].[dbo].[Yield] T1 
                WHERE T1.Date = T2.Date
            ) AS 'NumPassing' 
        FROM [PhaseNoiseMonitoring].[dbo].[Yield] T2 
    )
AS T3 
```

预期的查询将返回：

```
NumMeasured NumPassing
103         9 
```

我意识到这是完全错误的，但我真的不知道如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:22:46.910

这是一个使用相关子查询的想法：

```
with bydays as (<your query here>)
select bd.*,
       (select sum(NumMeasured) from (select top 100 * from bydays bd2 where bd2.date <= bd.date order by date desc) t
       ) as Measured100,
       (select sum(NumPassingd) from (select top 100 * from bydays bd2 where bd2.date <= bd.date order by date desc) t
       ) as Measured100
from bydays 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:22:28.473

要获得最近 100 次约会，

```
SELECT TOP(100) DISTINCT date FROM yield ORDER BY date desc 
```

你可以用简单的东西来简化你的第一个查询

```
SELECT date, SUM(passing) as numpassing, SUM(Measured) as nummeasured
FROM yield
GROUP BY date 
```

如果您需要从现在到 100 天前的总和

```
SELECT SUM(passing) as npassing, SUM(measured) as nmeasured
FROM yield
WHERE date >= DATEADD(d,100,CURRENT) 
```

如果您需要最近 100 个日期的总和

```
SELECT SUM(passing) as npassing, SUM(measured) as nmeasured
FROM yield
WHERE date IN (SELECT TOP 100 date FROM yield WHERE date <= '04/05/2013' ORDER BY date desc) 
```

# c++ - 如何将通过构造函数传递的字符串转换为变量？

> ID：16067107
> 
> 赞同：1
> 
> 时间：2013-04-17T18:09:18.170
> 
> 标签：c++, constructor

我目前的一个项目要求我将文件的实际名称发送到一个类中，但我不知道如何将字符串转换为变量。换句话说，我需要在类中上交`Andrew`变量。 `name``Person`

**主程序**

```
#include <iostream>
#include <string>
#include "Person.h" 

using namespace std;

int main ()
{
Person p1("Andrew");

} 
```

**人.h**

```
 #include <iostream>

 using namespace std;

 class Person 
 {
 public:
    Person (string name);
    void setName(string name) {string name = name;}
    void printName(string name) {cout << name;} 
private:
    string name; 
  }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T18:12:54.830

首先，请注意，您在这里声明了一个本地变量`setName`并简单地将其分配给自身：

```
void setName(string name) {string name = name;} 
```

该成员`name`不受影响。你反而想要：

```
void setName(string name) { this->name = name; } 
```

你可以对构造函数做很多相同的事情：

```
Person (string name) { this->name = name; } 
```

但是，这有一个小问题。当您创建一个`Person`对象时，该`name`成员将首先被构造为一个空字符串，然后分配给。那完全没有意义。如果我们可以立即使用参数给出的值来构造它，那就太好了。事实上，我们可以，用一个成员初始化列表：

```
Person (string name)
  : name(name)
{ } 
```

这基本上是说“`name`用参数初始化成员`name`”。

你也有问题`printName`。它接受一个字符串参数，然后将其打印出来。您似乎更有可能想要打印出该`name`成员：

```
void printName() {cout << name;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T18:12:02.527

初始化成员变量：

```
Person(string n) : name(n) {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:12:47.057

在 Person 的构造函数中，执行以下操作：

```
Person (string name)
{
   this->name = name;
} 
```

**或者**

您可以使用成员初始化列表：

```
Person(string name)
: name(name) {} 
```

**或者**

你可以在构造函数中调用你的函数 setName

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T18:14:37.163

您需要`{string name = name;}`在构造函数中执行，而不是在集合名称中执行。

所以 ：

```
 class Person 
 {

 public:
    Person (string name) { this->name = name;}

    void printName(string name) {cout << name;} 
 private:
    string name; 
  }; 
```

我会使用不同的变量名`name`，`my_name`所以没有混淆。

# azure - HOWTO：将 NopCommerce 从 Team Foundation Service 部署到 Azure

> ID：16067108
> 
> 赞同：1
> 
> 时间：2013-04-17T18:09:18.973
> 
> 标签：azure, msbuild, tfsbuild, nopcommerce

我目前正在尝试建立一个基于 NopCommerce 的网站，因为我想自定义它，所以我使用源代码并控制构建过程。我的设置基于 Team Foundation Service Builds 并部署到 Azure 网站。

我的问题是 NopCommerce 使用自定义 MSBuild 进程，该进程执行许多文件操作来创建可部署文件夹，虽然可以运行（我的构建定义配置为运行执行此操作的自定义项目），但它似乎不是能够部署到 Azure，我认为这是因为它没有创建 TFS 期望的输出文件夹。

有没有人解决过这个问题？我发现了另一个类似的问题，但它没有帮助，因为我想自动化这一切，如果可能的话，与官方的 nopCommerce 构建过程保持同步：

[如何发布 NopCommerce 和 NopCommerce 管理网站？](https://stackoverflow.com/questions/15607629/how-to-publish-nopcommerce-and-nopcommerce-admin-website)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T20:27:41.913

1.  下载 nopCommerce 源代码
2.  用 Visual Studio 打开它
3.  添加新的 Azure 云服务
4.  打开 Azure 云服务项目
5.  选择 Roles 文件夹并右键单击以打开菜单
6.  选择“在解决方案中添加 Web 角色项目”
7.  通过向导发布到 Azure（确保选择“启用远程桌面”）

发布后，您无法加载任何插件。这是因为 nopCommerce 在 NetworkService 帐户下运行并且该帐户没有足够的权限。您可以远程访问服务器并将应用程序池标识更改为 LocalSystem 以测试它是否按预期工作。测试后确保分配另一个具有足够权限的身份。

# opacity - CSS3“提升的角落”不透明的阴影

> ID：16067109
> 
> 赞同：12
> 
> 时间：2013-04-17T18:09:22.207
> 
> 标签：opacity, css

我一直在玩一些 CSS3 阴影效果。我非常喜欢“抬高的角落”效果，但是在尝试为元素添加不透明度时遇到了问题。我的问题是：有没有办法在不透明的元素上创建“抬高的角落”效果？

[http://jsfiddle.net/WAvZu/](http://jsfiddle.net/WAvZu/)

```
.drop-shadow{
    position:relative;
    float:left;
    width:40%;
    padding:1em;
    margin:2em 10px 4em;
    background:#fff;
    -webkit-box-shadow:0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
    -moz-box-shadow:0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
    box-shadow:0 1px 4px rgba(0, 0, 0, 0.3), 0 0 40px rgba(0, 0, 0, 0.1) inset;
}
.drop-shadow:before,
.drop-shadow:after{
    content:"";
    position:absolute;
    z-index:-2;
}
.lifted{
    -moz-border-radius:4px;
    border-radius:4px;
}
.lifted:before,
.lifted:after{
    bottom:15px;
    left:10px;
    width:50%;
    height:20%;
    max-width:300px;
    max-height:100px;
    -webkit-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    -moz-box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    box-shadow:0 15px 10px rgba(0, 0, 0, 0.7);
    -webkit-transform:rotate(-3deg);
    -moz-transform:rotate(-3deg);
    -ms-transform:rotate(-3deg);
    -o-transform:rotate(-3deg);
    transform:rotate(-3deg);
}
.lifted:after{
    right:10px;
    left:auto;
    -webkit-transform:rotate(3deg);
    -moz-transform:rotate(3deg);
    -ms-transform:rotate(3deg);
    -o-transform:rotate(3deg);
    transform:rotate(3deg);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T19:50:03.740

问题在于理解[堆叠上下文](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)以及它们如何在浏览器中呈现。

> *   根元素（HTML），
> *   以“auto”以外的 z-index 值定位（绝对或相对），
> *   [不透明度值小于 1](http://www.w3.org/TR/css3-color/#transparency)的元素。
> *   在移动 WebKit 和 Chrome 22+ 上， position: fixed 总是创建一个新的堆叠上下文，即使 z-index 是“auto”

[9.9.1 指定堆栈级别：'z-index' 属性](http://www.w3.org/TR/CSS2/visuren.html#z-index)

> 1.  构成堆叠上下文的元素的背景和边框。
> 2.  具有负堆栈级别（最负优先）的子堆栈上下文。
> 3.  流入的、非内联级别的、非定位的后代。
> 4.  未定位的浮动。
> 5.  流入的、内联级的、非定位的后代，包括内联表和内联块。
> 6.  堆栈级别 0 的子堆栈上下文和堆栈级别 0 的定位后代。
> 7.  具有正堆栈级别的子堆栈上下文（最不积极的优先）。

的背景`#test`首先被渲染，因为这是应用不透明度的元素。之后，阴影在顶部，因为它们位于新的堆叠上下文中 ( `position: absolute`)。最后是 div 的文本。

**一个简单的解决方案：**将 div 包装在另一个 div 中并将不透明度应用于*该*div 而不是`#test`.

[http://jsfiddle.net/WAvZu/3/](http://jsfiddle.net/WAvZu/3/)

另一本好读物：[关于 Z-Index 的事没人告诉你](http://philipwalton.com/articles/what-no-one-told-you-about-z-index/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T19:26:04.930

在讨论之后，老实说我不太确定，但我发现了这篇文章：[堆叠上下文](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)。

据我所知，`z-index: -2`您示例中的技巧只是有效，因为您没有设置 a `z-index`on `.drop-shadow`，这意味着它没有堆叠上下文。通常一个孩子（`:before`也是`:after`某种孩子）不能低于`z-index`它的父母，但如果父母没有堆叠上下文，它可以低于它。

问题`opacity`在于，它形成了堆叠上下文：

> 在文档中的任何位置，任何元素都可以形成堆叠上下文
> 
> *   根元素（HTML），
> *   以“auto”以外的 z-index 值定位（绝对或相对），
> *   不透明度值小于 1 的元素。 (...),
> *   ...

话虽如此，您可以[通过使用包装器来解决](http://jsfiddle.net/s7p9p/)

```
<div class="wrapper">
    <div class="drop-shadow lifted">This is correct with opacity.</div>
</div> 
```

并设置在`opacity`那里。

```
.wrapper {
    opacity: .5;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:35:04.803

`div`我可以通过在容器内部添加一个带有“抬高的角”的方法来伪造一个解决方案。这是一个 hack，我想其他人可以想出一个更好的解决方案，但我想我会发布我的发现，以防有人好奇。

[http://jsfiddle.net/WAvZu/2/](http://jsfiddle.net/WAvZu/2/)

# objective-c - Objective-C 检查 self 是否也是一个子类

> ID：16067114
> 
> 赞同：5
> 
> 时间：2013-04-17T18:09:28.343
> 
> 标签：objective-c, inheritance

这是在 Objective C 的上下文中。我有 3 个类。 `ClassA`,`ClassB`和`ClassC`.

`ClassB`并且`ClassC`是 的子类`ClassA`。

```
@interface ClassB : ClassA
@interface ClassC : ClassA 
```

我需要办理登机手续`classA`，无论`self`是 a`ClassB`还是`ClassC`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-17T18:12:21.373

> 我需要...

**不，你没有。**如果基类需要有关其子类的知识，那么您就犯了一个**巨大的设计错误。**

* * *

无论如何，这是检查是否在特定子类中的方法：

```
if ([self isKindOfClass:[ClassB class]]) {
    // Class B
} else if ([self isKindOfClass:[ClassC class]]) {
    // Class C
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T18:16:39.393

> 我需要检查classA，无论self是ClassB还是ClassC。

一个更好的方法是调用一些可以在子类中定义的抽象方法：

**A类：**

```
- (void)doThing
{
    [self doSpecializedThing];
}

- (void)doSpecializedThing
{
    return;
} 
```

**B类：**

```
- (void)doSpecializedThing
{
    // ClassB's specialized version of whatever ClassA needs to do
} 
```

**C类：**

```
- (void)doSpecializedThing
{
    // ClassC's specialized version of whatever ClassA needs to do
} 
```

这可以防止 ClassA 必须知道有关其子类的任何具体信息，因为这几乎总是一个坏主意。

您还可以`-doThing`在 ClassB 和 ClassC 中覆盖并让它们`[super doThing]`在其实现中调用。但是，这不一定在每种情况下都是正确的解决方案，例如当 ClassA 中的代码`-doThing`依赖于子类中的某些行为时（例如，如果`-doSpecializedThing`要返回在 中使用的值`-doThing`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T18:13:19.347

```
if([self isKindOfClass:[ClassB class]]){
     ...
}
else if ([self isKindOfClass:[ClassC class]])
{

} 
```

希望这可以帮助...

正如 H2CO3 所说，将子类特定的行为带入子类本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-20T03:24:03.197

我在一个字符串中的解决方案是：

//不要使用这个类。使用子类代替 ASSERT([NSStringFromClass([self class]) isEqualToString:@"SDDocumentsViewController"]==NO);

# apache - 如何在 apache 重写规则中进行转发？

> ID：16067117
> 
> 赞同：0
> 
> 时间：2013-04-17T18:09:36.020
> 
> 标签：apache, rewrite

我想将所有请求 [domain]/hello.txt 转发到 [domain]/files/txt/hello.txt 原来的 url [domain]/hello.txt 应该仍然出现在浏览器地址栏中。

关于如何在 apache 重写规则中实现这一点的任何建议？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:20:08.147

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(hello\.txt)$ /files/txt/$1 [L,NC] 
```

**PS：**请注意，我没有`R`在上述规则中使用标志，因此浏览器中的 URI 不会改变，Apache 将在内部加载`/files/txt/hello.txt`URI。

# c# - C# 部分类和 get 访问器

> ID：16067120
> 
> 赞同：2
> 
> 时间：2013-04-17T18:09:42.613
> 
> 标签：c#, partial-classes

基于 Entity Framework 实体，我为其中一个创建了部分类。问题是，我想在`ContentValue`返回之前添加一些代码。但它不起作用 -

```
[MetadataType(typeof(ToolTip_Meta))]
public partial class Tooltip
{
    ..some methods etc
}

public class ToolTip_Meta
{
    [Required]
    public string ContentValue
    {
        get
        {
            if (!string.IsNullOrEmpty(this.ContentValue))
                return this.ContentValue.Replace("\n", "<br/>").Replace("\r", "").Replace("\r", "").Replace("'", "\\'").Replace("\"", "&quot;");
            return this.ContentValue;
        }
        set { ContentValue = value; }
    }
} 
```

当在我的项目中的某个地方我想获取`ContentValue`属性值时，我得到了未更改的字符串，我没有进入`get`访问器。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:18:01.570

我认为这实际上与部分类或元数据无关。你的问题其实很简单。

```
if (!string.IsNullOrEmpty(this.ContentValue)) 
```

当你访问`this.ContentValue`时，它调用那个getter，然后访问`this.ContentValue`，它调用getter......因此你将得到一个StackOverflowException或一个OutOfMemoryException。

如果您没有遇到这两个错误之一，请更新您的问题以解释它是*如何*不起作用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:24:12.270

在实体框架设计器中，将生成的属性的字段名称更改为`ContentValueInternal`，并将其标记为具有内部访问权限而不是公共的。这仍然可以映射到`ContentValue`.

然后，在您手动编码的部分类中，创建一个名为的新公共属性`ContentValue`，该属性具有您在问题中描述的逻辑，但在`ContentValueInternal`内部使用该属性来存储实际值。

# jquery - 试图获得最近班级的父母

> ID：16067121
> 
> 赞同：2
> 
> 时间：2013-04-17T18:09:45.067
> 
> 标签：jquery

我有一些div，例如：

```
<div id="parent">
  <div class="child">
    <div class="gChild">
     <button></button> 
    </div>
    <div class="gChild">
     <button></button> 
    </div>
  </div>
  <div class="child">
    <div class="gChild">
     <button></button> 
    </div>
    <div class="gChild">
     <button></button> 
    </div>
  </div>
</div>

<div id="NextSet">
  <div class="child">
    <div class="gChild">
     <button></button> 
    </div>
    <div class="gChild">
     <button></button> 
    </div>
  </div>
</div> 
```

现在我想从单击的按钮中获取“孩子”的索引。这适用于第一组'#parent'

```
$(this).parents('.child').index(); 
```

但不在第二组“#NextSet”中，因为#parent 中的所有 .child 元素也都添加到了 parents() 中。我试过了：

```
$(this).closest('.child').parent().index(); 
```

但这不对...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:12:57.410

`closest()`找到匹配选择器的第一个父级，所以它只是：

```
$(this).closest('.child').index() 
```

`parents()`将找到与选择器匹配的所有父母。

并获取所有`.child`元素中的索引，传递一个集合：

```
$(this).closest('.child').index('.child'); 
```

# java - 我只想在客户端第一次连接时从多线程服务器发送一个字符串

> ID：16067124
> 
> 赞同：1
> 
> 时间：2013-04-17T18:09:46.313
> 
> 标签：java, multithreading, tcp, java-server

我开发了一个运行良好的多线程服务器！**但现在我想让它第一次发送客户端连接一个字符串**，然后继续以相同的常规过程接收字符串并发送文件！这是我的服务器代码

```
import java.io.*;
import java.net.*;
import java.nio.ByteBuffer;
import java.util.Scanner;

class TCPServer {
    public static void main(String argv[]) throws Exception {

        System.out.println("Welcome to the stream Server");
System.out.println("listening to Clients");
        ServerSocket welcomeSocket = new ServerSocket(3248);
        while (true) {
            Socket connectionSocket = welcomeSocket.accept();
            if (connectionSocket != null) {
                Client client = new Client(connectionSocket);
                client.start();

            }
        }
    }
}

class Client extends Thread {
    private Socket connectionSocket;

    public Client(Socket c) throws IOException {
        connectionSocket = c;
    }

    public void run() {

        String path = "C:/pao/new2/";

        File folder = new File(path);
        File[] listOfFiles = folder.listFiles();

        try {

            String fileToSendStr = readFile();
            File fileToSend = null;
            for (File f : listOfFiles)

            {

                if (f.getName().equals(fileToSendStr)) {
                    fileToSend = f;
                    break;
                }
            }
            System.out.println("Connecting to Client to recieve the part " +fileToSendStr);
            if (fileToSend == null) {

            }
            System.out.println("Sending the chunk to Client");
            long length = fileToSend.length();
            byte [] longBytes = new byte[8];
            ByteBuffer bbuffer = ByteBuffer.wrap(longBytes);
            bbuffer.putLong(length);
            connectionSocket.getOutputStream().write(longBytes);

            BufferedOutputStream bout = new BufferedOutputStream(connectionSocket.getOutputStream());
            BufferedInputStream bain = new BufferedInputStream(new FileInputStream(fileToSend));

            byte buffer [] = new byte [1024];
            int i = 0;
            while((i = bain.read(buffer, 0, 1024)) >= 0){
                bout.write(buffer, 0, i);

            }
            System.out.println("chunk sended");
            bout.close();
            bain.close();

        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    private String readFile() throws IOException {

        BufferedReader r = new BufferedReader(new InputStreamReader(
                connectionSocket.getInputStream()));
        return r.readLine();

    }
} 
```

想要建立连接的客户端部分不同于它建立该连接的部分。只想第一次检索一个字符串，然后该部分不再可用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:57:11.310

`ServerSocket.accept()`是一种阻塞方法。如果未建立连接或发生超时（先前设置），它将不会返回。

将服务器代码放在客户端实例化的单独线程中，或为套接字设置超时：

```
ServerSocket welcomeSocket = new ServerSocket(3248);
welcomeSocket.setSoTimeout(2000); // waits 2 seconds for a client.
while (true) {
    (new Thread(new Runnable() {
         public void run() {
            Socket connectionSocket = welcomeSocket.accept();
            if (connectionSocket != null) {
                Client client = new Client(connectionSocket);
                client.start();
            }
          }
      })).start();
      try {
          welcomeSocket.accept();
      } catch(Exception e) {
          //socket timeout.
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:08:24.370

我不确定我是否理解得很好，但你说目前服务器运行良好，可以为客户服务。你想知道一个客户端之前是否已经连接过？您的服务器和客户端之间的通信跨越多个连接？

这需要概念性的思考。如果您在 HTTP 领域，这将意味着某种会话和/或 cookie 概念。使用 cookie，服务器可以在客户端存储信息（客户端上次连接时，某种状态）。使用会话 ID，您可以在与客户端通信期间跟踪您处于什么状态。

在您的情况下，您可能需要开发一个非常简单的应用程序级协议（ISO/OSI 网络堆栈的顶部）。因此，例如在连接建立后，客户端将向服务器发送一个字节，告知信息交换的位置，然后服务器将根据该信息做出反应。在通信结束时，该“状态”参数将被更新、修改。

这有帮助吗？

# sql-server - 将多个数据库文件还原到多个目录中，脚本出错

> ID：16067125
> 
> 赞同：0
> 
> 时间：2013-04-17T18:09:53.097
> 
> 标签：sql-server

我正在运行一个出现错误的脚本。当我注释掉脚本的一部分时，它说它成功了——但实际上什么也没做。该脚本是多个目录中多个数据库的还原脚本。该脚本应该将这些数据库恢复到与数据库同名的目录中。我将在此处附上脚本：

```
 use [master]
GO

set nocount on

declare @curdir nvarchar(400)
declare @line varchar(400)
declare @command varchar(400)
declare @counter bigint
Declare @Database_name varchar(400)
Declare @directory varchar(400)
Declare @filename_name varchar(400)
declare @is_final_restore varchar(1)

set @is_final_restore = 'N'

If (select count (*) from sys.objects where name='Output') <> 0 DROP TABLE output  
If (select count (*) from tempdb.sys.objects where name like '%#Tempoutput%') <> 0 DROP TABLE #Tempoutput   
If (select count (*) from tempdb.sys.objects where name like '%#dirs%') <> 0 DROP TABLE #dirs   

create table #dirs (DIRID bigint identity(1,1), directory varchar(400))
  Set @command = 'dir "E:\MVE_Backups\Full" /S/B/A:A'
 insert into #dirs exec xp_cmdshell @command
  set @counter = (select count(*) from #dirs)
create table #tempoutput (line varchar(400))

create table output (Path_name varchar(400),Directory varchar(400),Files varchar(400),Database_name varchar(400), FileSize varchar(400))
    While @Counter <> 0
      Begin
        Declare @filesize bigint
        set @curdir = (select directory from #dirs where DIRID = @counter)
        set @command = 'dir "' + @curdir +'"'
        insert into #tempoutput
        exec master.dbo.xp_cmdshell @command
           select @line = ltrim(replace(substring(line, charindex(')', line)+1,len(line)), ',', ''))
           from #tempoutput where line like '%File(s)%bytes'
           Set @filesize  = Replace(@line, ' bytes', '')
           Set @filename_name = reverse(left(reverse(@curdir), charindex('\', reverse(@curdir)) -1))
           Set @directory  = reverse(Right(reverse(@curdir), len(@curdir)-charindex('\', reverse(@curdir))))
           Set @Database_name = reverse(left(reverse(@directory), charindex('\', reverse(@directory)) -1))
        Insert into output (Path_name,Directory, Files,Database_name, Filesize) values (@curdir,@directory,@filename_name,@Database_name, @filesize)
        Set @counter = @counter -1
       End
  Delete from output where Path_name is null

DECLARE @fname VARCHAR(200) 
DECLARE @dirfile VARCHAR(300) 
DECLARE @LogicalName NVARCHAR(128) 
DECLARE @PhysicalName NVARCHAR(260) 
DECLARE @type CHAR(1) 
DECLARE @DbName sysname 
DECLARE @sql NVARCHAR(1000) 

  --- Create Temp tables for Restoring

CREATE TABLE #bdev( 
 BackupName NVARCHAR(128) 
,BackupDescription NVARCHAR(255) 
,BackupType smallint 
,ExpirationDate datetime 
,Compressed tinyint 
,Position smallint 
,DeviceType tinyint 
,UserName NVARCHAR(128) 
,ServerName NVARCHAR(128) 
,DatabaseName NVARCHAR(128) 
,DatabaseVersion INT 
,DatabaseCreationDate datetime 
,BackupSize numeric(20,0) 
,FirstLSN numeric(25,0) 
,LastLSN numeric(25,0) 
,CheckpointLSN numeric(25,0) 
,DatabaseBackupLSN numeric(25,0) 
,BackupStartDate datetime 
,BackupFinishDate datetime 
,SortOrder smallint 
,CodePage smallint 
,UnicodeLocaleId INT 
,UnicodeComparisonStyle INT 
,CompatibilityLevel tinyint 
,SoftwareVendorId INT 
,SoftwareVersionMajor INT 
,SoftwareVersionMinor INT 
,SoftwareVersionBuild INT 
,MachineName NVARCHAR(128) 
,Flags INT 
,BindingID uniqueidentifier 
,RecoveryForkID uniqueidentifier 
,Collation NVARCHAR(128) 
,FamilyGUID uniqueidentifier 
,HasBulkLoggedData INT 
,IsSnapshot INT 
,IsReadOnly INT 
,IsSingleUser INT 
,HasBackupChecksums INT 
,IsDamaged INT 
,BegibsLogChain INT 
,HasIncompleteMetaData INT 
,IsForceOffline INT 
,IsCopyOnly INT 
,FirstRecoveryForkID uniqueidentifier 
,ForkPointLSN numeric(25,0) 
,RecoveryModel NVARCHAR(128) 
,DifferentialBaseLSN numeric(25,0) 
,DifferentialBaseGUID uniqueidentifier 
,BackupTypeDescription NVARCHAR(128) 
,BackupSetGUID uniqueidentifier 
,CompressedBackupSize bigint
) 

--Table to hold result from RESTORE FILELISTONLY. Need to generate the MOVE options to the RESTORE command 
CREATE TABLE #dbfiles( 
 LogicalName NVARCHAR(128) 
,PhysicalName NVARCHAR(260) 
,Type CHAR(1) 
,FileGroupName NVARCHAR(128) 
,Size numeric(20,0) 
,MaxSize numeric(20,0) 
,FileId INT 
,CreateLSN numeric(25,0) 
,DropLSN numeric(25,0) 
,UniqueId uniqueidentifier 
,ReadOnlyLSN numeric(25,0) 
,ReadWriteLSN numeric(25,0) 
,BackupSizeInBytes BIGINT 
,SourceBlockSize INT 
,FilegroupId INT 
,LogGroupGUID uniqueidentifier 
,DifferentialBaseLSN numeric(25) 
,DifferentialBaseGUID uniqueidentifier 
,IsReadOnly INT 
,IsPresent INT 
,TDEThumbPrint uniqueidentifier 
) 

DECLARE dbfiles CURSOR FOR 
SELECT LogicalName, PhysicalName, Type FROM #dbfiles 

declare backup_cur cursor for
    select Path_name, Database_name from output 
open backup_cur

fetch next from backup_cur into @filename_name, @database_name

--Loop through each script.
while @@FETCH_STATUS = 0
BEGIN

    if @is_final_restore = 'Y'
    BEGIN
        set @dirfile = @filename_name

        set @Database_name = @Database_name + '_temp'

        print 'RESTORE DATABASE [' + @database_name + '] FROM  DISK = N''' + @dirfile + ''' WITH FILE = 1, NOUNLOAD'
        print 'GO'
        print 'USE [' + @database_name + ']'
        print 'GO'
        print 'sp_changedbowner ''' + @database_name + '_user'''
        print 'GO'
        print 'USE [master]'
        print 'GO'
        print 'ALTER DATABASE [' + @database_name + '] SET TRUSTWORTHY on'
        print 'GO'
        print 'GRANT UNSAFE ASSEMBLY TO [' + @database_name + '_user]'
        print 'GO'
        print 'sp_configure ''clr enabled'', 1'
        print 'GO'
        print 'reconfigure'
        print 'GO'
    END

    ELSE
    BEGIN

        --PRINT ('Now Restoring Database '+ @database_name+' in Non-Recovery Mode. From File :'+@filename_name  )
        set @dirfile = @filename_name
        --Get database name from RESTORE HEADERONLY, assumes there's only one backup on each backup file. 
        TRUNCATE TABLE #bdev 
        INSERT #bdev 
        EXEC('RESTORE HEADERONLY FROM DISK = ''' + @dirfile + '''') 
        SET @DbName = (SELECT DatabaseName FROM #bdev) 

        --Construct the beginning for the RESTORE DATABASE command 
        SET @sql = 'RESTORE DATABASE [' + @DbName + '] FROM DISK = ''' + @dirfile + ''' WITH NORECOVERY, MOVE ' 

        --Get information about database files from backup device into temp table 
        TRUNCATE TABLE #dbfiles 
        INSERT #dbfiles 
        EXEC('RESTORE FILELISTONLY FROM DISK = ''' + @dirfile + '''') 

        OPEN dbfiles 
        FETCH NEXT FROM dbfiles INTO @LogicalName, @PhysicalName, @type 
        --For each database file that the database uses 
        WHILE @@FETCH_STATUS = 0 
        BEGIN 
        IF @type = 'D' 
        SET @sql = @sql + '''' + @LogicalName + ''' TO ''' + 'F:\Database_Files\'+@database_name+'\' + @LogicalName  + '.mdf'', MOVE ' 
        ELSE IF @type = 'L' 
        SET @sql = @sql + '''' + @LogicalName + ''' TO ''' + 'F:\Database_Files\'+@database_name+'\' + @LogicalName + '.ldf''' 
        FETCH NEXT FROM dbfiles INTO @LogicalName, @PhysicalName, @type 
        END 
        PRINT ('EXECUTE master.dbo.xp_create_subdir N'''+'F:\Database_Files\'+@database_name+'''')
        PRINT ('GO')
        PRINT @SQL
        PRINT ('GO')
        close dbfiles
    END
fetch next from backup_cur into @filename_name, @database_name  
END

close backup_cur
deallocate backup_cur
DEALLOCATE dbfiles 

drop table output;

drop table #bdev
drop table #dbfiles 
```

我运行时的错误是：

消息 213，级别 16，状态 7，第 1 行 列名或提供的值的数量与表定义不匹配。消息 3013，级别 16，状态 1，第 1 行 RESTORE HEADERONLY 异常终止。

我注释掉的代码是这样的：

```
BEGIN
    set @dirfile = @filename_name

    set @Database_name = @Database_name + '_temp'

    print 'RESTORE DATABASE [' + @database_name + '] FROM  DISK = N''' + @dirfile + ''' WITH FILE = 1, NOUNLOAD'
    print 'GO'
    print 'USE [' + @database_name + ']'
    print 'GO'
    print 'sp_changedbowner ''' + @database_name + '_user'''
    print 'GO'
    print 'USE [master]'
    print 'GO'
    print 'ALTER DATABASE [' + @database_name + '] SET TRUSTWORTHY on'
    print 'GO'
    print 'GRANT UNSAFE ASSEMBLY TO [' + @database_name + '_user]'
    print 'GO'
    print 'sp_configure ''clr enabled'', 1'
    print 'GO'
    print 'reconfigure'
    print 'GO'
END

ELSE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:38:49.373

我弄清楚问题出在哪里......从 SQL 2008 R2 到 SQL 2012，创建#bdev 时缺少额外的列。

我通过检查两个 SQL 服务器的表结构解决了这个问题，并确定在 SQL 2012 中，他们添加了一个不在我的脚本中的新列......添加此列时，脚本运行良好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:03:16.200

如果我理解正确，您将在 SQL Serve 2012 服务器上恢复备份。正如文档[所说](http://msdn.microsoft.com/en-us/library/ms178536.aspx)，来自的结果集有一个名为SQL 2008 中没有`RESTORE HEADERONLY`的额外列，但您的表没有列。如果添加它，则结果将与表结构匹配。`containment``#bdev``containment``RESTORE HEADERONLY`

就个人而言，我会使用外部脚本而不是 TSQL 来执行此操作。使用外部脚本处理文件更容易，而且所有动态 SQL 都难以阅读和排除故障。从 PowerShell使用[SMO是一种选择，或者只使用您喜欢的脚本语言来执行 TSQL。](http://msdn.microsoft.com/en-us/library/ms162169.aspx)

# c++ - 为什么 c++ 不包括 \n 而 python 不是

> ID：16067127
> 
> 赞同：2
> 
> 时间：2013-04-17T18:10:01.140
> 
> 标签：c++, python

在给定输入文件的情况下，我编写了一段简单的代码来输出 c++ 和 python 中 ascii 值的总和。

对于相同的输入文本文件，c++ 部分似乎排除了 '\n' 而 python 部分确实包含 '\n' 作为其计算的一部分。

我想知道我的代码中是否有任何我忽略的步骤。

代码片段：

```
 import sys

    try:
         f=open(sys.argv[1]).read()
    except:
        print " file not found \n"  
        sys.exit()
    sum=0
    for line in f:
       for character in line:
          try:
        if character=='\n':
            pass
        else:
            print character
            sum+=ord(character)

    except:
        print "failed \n"
        pass

     print "The sum is %d \n" %sum 
```

而 C++ 部分是：

```
 #include "iostream"
    #include "fstream"
    #include "string"
    int k;
    int main(int argc, char *argv[])
    {
    int sum=0;
    std::string line;
    std::ifstream myfile (argv[1]);
    if (myfile.is_open())
      {while (myfile.good())
        {
        getline (myfile,line);
        for (k=0;k<(line.length());k++)
            {
                sum=sum+int(line[k]);
            }
    }
std::cout<<" The total sum is : " <<sum<<std::endl;
}
  else std::cout<< "Unable to open file ";
  return 0;
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:18:54.963

根据`std::getline()`[string.io]§7 的规范：

> 从 is 中提取字符并将它们附加到 str ... 直到发生以下任何情况：
> 
> *   ...
> *   traits::eq(c, delim) 用于下一个可用输入字符 c （在这种情况下， c 被**提取但不附加**）

（强调我的）。

这意味着当`getline`遇到分隔符（`\n`默认情况下）时，它会将其从流中删除，但不会将其存储在字符串中。

至于直接回答你的“为什么”问题：因为它是这样设计的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T18:15:46.863

默认情况下，`ifstream::getline`用作`'\n'`行尾的分隔符。它会丢弃分隔符，因此您所看到的就是您所期望的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:38:49.833

你的 Python 代码并没有按照你的想法去做。您正在将整个文件读入 string `f`，然后遍历它，生成单个字符串而不是行。

但是，即使您以正确的方式进行操作并`readlines`直接使用或迭代文件对象，您仍然会遇到与保留尾随换行符相同的问题。原因来自[输入输出教程](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)中的这句话：

> `f.readline()`从文件中读取一行；换行符 (\n) 留在字符串的末尾，如果文件不以换行符结尾，则仅在文件的最后一行省略换行符。这使得返回值明确；如果`f.readline()`返回一个空字符串，则表示已到达文件末尾，而空行由 '\n' 表示，该字符串仅包含一个换行符。

C++ 使用不同的方法来表示文件结束，因此它不需要保留这种区别并且可以随意丢失尾随的换行符。这通常更方便。

# javascript - Node.js 停止播放音频

> ID：16067130
> 
> 赞同：3
> 
> 时间：2013-04-17T18:10:18.163
> 
> 标签：javascript, node.js, audio, runtime-error

```
var fs = require('fs');
var lame = require('lame');
var Speaker = require('speaker');

var $stream = fs.createReadStream('sounds/test.mp3').pipe(new lame.Decoder).pipe(new Speaker);

setTimeout(function() {
    $stream.close();
}, 5000);

setTimeout(function() {
    console.log('It worked!');
}, 10000); 
```

这会产生以下输出。（不是“它起作用了！”正如预期的那样。）有没有办法停止播放音频文件？

```
node: pcm.c:1951: snd_pcm_bytes_to_frames: Assertion `pcm' failed.
Abgebrochen (Speicherabzug geschrieben) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:05:05.613

似乎可以使用`.end`，所以也许你不应该使用`close`. 否则，库中可能存在错误。

```
$stream.end(); 
```

# sencha-touch-2 - 更改按钮背景颜色 Sencha Architect

> ID：16067131
> 
> 赞同：0
> 
> 时间：2013-04-17T18:10:17.847
> 
> 标签：sencha-touch-2, sencha-architect

我正在尝试更改 Sencha Architect 2 上的按钮背景颜色

我尝试使用 cls，但它不起作用，我命名了 cls 并将其用于 css 文件，这是简单的脚本：

.btn //这是我的 cls 名称 { background-color:red; }

这是命名 cls 的屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/p55aA.png)

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:13:11.783

我想你`!important`最后错过了。所以如果你`cls`是`btn1`，你可以这样做：

```
.btn1 {
    background-color:red !important
} 
```

也许[这](https://stackoverflow.com/questions/15456061/how-to-give-a-overlay-panel-in-sencha-touch-a-transparent-background/15456934#15456934)可以提供一些参考：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:45:43.303

好的，您可以只提及“背景”而不是“背景颜色”（或），您可以使用配置下的内联“样式”属性更改按钮颜色。您只需要选择按钮->转到配置面板->搜索样式属性->并输入“背景：红色”![在此处输入图像描述](https://i.stack.imgur.com/Py6ax.png)

# tabs - 为什么 Glimpse 模型绑定选项卡被禁用？

> ID：16067142
> 
> 赞同：2
> 
> 时间：2013-04-17T18:10:37.480
> 
> 标签：tabs, glimpse

我正在使用 Glimpse MVC4 版本 1.2.0。

我注意到当我在浏览器中打开 Glimpse UI 时，“模型绑定”选项卡被禁用。我看不到如何启用它。阅读[Glimpse 文档](https://github.com/Glimpse/Glimpse/wiki/Configuration)显示您可以忽略选项卡

```
<glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
    <tabs>
        <ignoredTypes>
            <add type="{Namespace.Type, AssemblyName}"/>
        </ignoredTypes>
    </tabs>
</glimpse> 
```

但我的 web.config 中没有这些：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <section name="glimpse" type="Glimpse.Core.Configuration.Section, Glimpse.Core" />
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <httpRuntime targetFramework="4.5" />
    <compilation debug="true" targetFramework="4.5" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <!-- Glimpse: This can be commented in to add additional data to the Trace tab when using WebForms
        <trace writeToDiagnosticsTrace="true" enabled="true" pageOutput="false"/> -->
    <httpModules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" />
    </httpModules>
    <httpHandlers>
      <add path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet" />
    </httpHandlers>
  </system.web>
  <system.webServer>
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
      <add name="Glimpse" path="glimpse.axd" verb="GET" type="Glimpse.AspNet.HttpHandler, Glimpse.AspNet" preCondition="integratedMode" />
    </handlers>
    <validation validateIntegratedModeConfiguration="false" />
    <modules>
      <add name="Glimpse" type="Glimpse.AspNet.HttpModule, Glimpse.AspNet" preCondition="integratedMode" />
    </modules>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <glimpse defaultRuntimePolicy="On" endpointBaseUri="~/Glimpse.axd">
    <!-- If you are having issues with Glimpse, please include this. It will help us figure out whats going on.
      <logging level="Trace" /> -->
  </glimpse>
</configuration> 
```

所有其他选项卡均已启用。有人可以建议禁用此选项卡的原因吗？

编辑：我注意到“会话”选项卡也被禁用。

啊好的，我添加一个`Session["Testing"] = "123"`呼叫后，“会话”选项卡现在已启用。尽管如此，仍然无法启用“模型绑定”选项卡。这是我在回发中的视图代码：

```
[HttpPost]
public ActionResult Index([ModelBinder(typeof(MyModelBinder))]HomeIndexViewModel viewModel)
{
    return this.View(viewModel);
}

public class MyModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var viewModel = new HomeIndexViewModel();

        viewModel.Name = "From model binder.";
        return viewModel;
    }
} 
```

使用 PRG 的想法，我重新编写了我的代码，如下所示：

```
[HttpPost]
public ActionResult Index([ModelBinder(typeof(MyModelBinder))]HomeIndexViewModel viewModel)
{
    return this.RedirectToAction("SaveSuccess");
}

public ActionResult SaveSuccess(HomeIndexViewModel viewModel)
{
    return this.View();
} 
```

我遇到的问题是，在“历史记录”选项卡中，当我检查“SaveSuccess”请求时，我可以看到“模型绑定器”已启用，并显示正在使用的 DefaultModelBinder。但是，我使用自定义模型绑定器的索引请求未启用该选项卡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:53:43.473

当给定页面请求存在模型绑定活动时，将启用 Glimpse 中的模型绑定选项卡。如果没有模型绑定活动，该选项卡将显示为禁用。

模型绑定选项卡的另一个常见问题是使用 PRG（POST REDIRECT GET）模式。

如果包含模型绑定的操作方法重定向用户，则 Glimpse 将显示最后一个请求（即 GET），从而有效地隐藏模型绑定活动。您可以使用 Glimpse 中的 History 选项卡来选择上一个请求（原始 POST）并查看模型绑定数据。

`ModelBinderAttribute`最后，如果您使用（至少目前），Glimpse 将无济于事。而是使用`ModelBinders.Binders.Add()`或更好`IModelBinderProvider`地注册您的自定义模型绑定器。瞥见以这些方式注册的模型活页夹。

# python - 在 Pandas 中，如果列最初为空，如何使用 fillna 用字符串填充整个列？

> ID：16067144
> 
> 赞同：10
> 
> 时间：2013-04-17T18:10:46.430
> 
> 标签：python, pandas

我的桌子：

```
In [15]: csv=u"""a,a,,a
   ....: b,b,,b
   ....: c,c,,c
   ....: """

In [18]: df = pd.read_csv(io.StringIO(csv), header=None) 
```

将空列填充为“未知”

```
In [19]: df
Out[19]: 
   0  1   2  3
0  a  a NaN  a
1  b  b NaN  b
2  c  c NaN  c

In [20]: df.fillna({2:'UNKNOWN'}) 
```

得到错误

```
ValueError: could not convert string to float: UNKNOWN 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T18:25:17.630

您的`2`列可能有一个 float dtype：

```
>>> df
   0  1   2  3
0  a  a NaN  a
1  b  b NaN  b
2  c  c NaN  c
>>> df.dtypes
0     object
1     object
2    float64
3     object
dtype: object 
```

因此问题。如果您不介意将整个帧转换为`object`，您可以：

```
>>> df.astype(object).fillna("UNKNOWN")
   0  1        2  3
0  a  a  UNKNOWN  a
1  b  b  UNKNOWN  b
2  c  c  UNKNOWN  c 
```

根据是否存在非字符串数据，您可能希望在转换列 dtype 时更有选择性，和/或在读取时指定 dtypes，但无论如何，以上内容应该可以工作。

* * *

更新：如果您有要保留的 dtype 信息，而不是将其切换回来，我会采用另一种方式，只填写您想要的列，或者使用带有以下内容的循环`fillna`：

```
>>> df
   0  1  2   3  4   5
0  0  a  a NaN  a NaN
1  1  b  b NaN  b NaN
2  2  c  c NaN  c NaN
>>> df.dtypes
0      int64
1     object
2     object
3    float64
4     object
5    float64
dtype: object
>>> for col in df.columns[pd.isnull(df).all()]:
...         df[col] = df[col].astype(object).fillna("UNKNOWN")
...     
>>> df
   0  1  2        3  4        5
0  0  a  a  UNKNOWN  a  UNKNOWN
1  1  b  b  UNKNOWN  b  UNKNOWN
2  2  c  c  UNKNOWN  c  UNKNOWN
>>> df.dtypes
0     int64
1    object
2    object
3    object
4    object
5    object
dtype: object 
```

或者（如果你正在使用`all`），那么可能根本不使用`fillna`：

```
>>> df
   0  1  2   3  4   5
0  0  a  a NaN  a NaN
1  1  b  b NaN  b NaN
2  2  c  c NaN  c NaN
>>> df.ix[:,pd.isnull(df).all()] = "UNKNOWN"
>>> df
   0  1  2        3  4        5
0  0  a  a  UNKNOWN  a  UNKNOWN
1  1  b  b  UNKNOWN  b  UNKNOWN
2  2  c  c  UNKNOWN  c  UNKNOWN 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T18:41:10.373

作为一种解决方法，只需直接设置列，fillna 上转换应该可以工作并且是一个错误

```
In [8]: df = pd.read_csv(io.StringIO(csv), header=None)

In [9]: df
Out[9]: 
   0  1   2  3
0  a  a NaN  a
1  b  b NaN  b
2  c  c NaN  c

In [10]: df.loc[:,2] = 'foo'

In [11]: df
Out[11]: 
   0  1    2  3
0  a  a  foo  a
1  b  b  foo  b
2  c  c  foo  c

In [12]: df.dtypes
Out[12]: 
0    object
1    object
2    object
3    object
dtype: object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-11T08:53:10.143

```
df = pd.DataFrame({0:['a','b','c'], 1:['a','b','c'], 2:np.nan, 3:['a','b','c']})
df

    0   1   2   3
0   a   a   NaN a
1   b   b   NaN b
2   c   c   NaN c 
```

您可以通过在方括号内指定列的名称并使用`fillna`：

```
df[2].fillna('UNKNOWN', inplace=True) 
```

如果你 print `df`，它会是这样的：

```
 0   1         2  3
0   a   a   UNKNOWN  a
1   b   b   UNKNOWN  b
2   c   c   UNKNOWN  c 
```

您可以通过以下方式填充所有列中的所有空单元格：

```
df.fillna('UNKNOWN', inplace=True) 
```

# c# - 'Button' 类型的 'Button1' 必须放在带有 runat=server 的表单标签内。即使带有 runat ="server" 的表单内的按钮

> ID：16067149
> 
> 赞同：1
> 
> 时间：2013-04-17T18:10:55.323
> 
> 标签：c#, render

我得到'Button'类型的控件'Button1'必须放在带有runat = server的表单标签内。即使表单内的按钮带有 runat =“server”。请帮助

```
 public string RenderControlToHtml(Control ControlToRender)
    {
        if (this.Form.Controls.Contains(ControlToRender))
        {
            System.Text.StringBuilder sb = new System.Text.StringBuilder();
            System.IO.StringWriter stWriter = new System.IO.StringWriter(sb);
            System.Web.UI.HtmlTextWriter htmlWriter = new    System.Web.UI.HtmlTextWriter(stWriter);
            ControlToRender.RenderControl(htmlWriter);
            //ControlToRender.RenderControl(htmlWriter);
            return sb.ToString();
        }
        return string.Empty;
      } 
```

添加标记，此控件位于表单内部，带有 runat="server"

```
<%@ Page Language="C#" AutoEventWireup="true" EnableEventValidation="false" CodeFile="Default2.aspx.cs" Inherits="Default2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
   <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
           <table id="Table1" runat="server">
                <tr>
                    <td>
                        <asp:Label ID="LastNameLabel" runat="server" Text="Last Name" CssClass="MemberInfolabel"></asp:Label>
                    </td>
                    <td>
                        <asp:TextBox ID="LastNameBox" runat="server" ReadOnly="true" BackColor="#EEECE1"></asp:TextBox>
                    </td>
            </tr>
                <tr>
                    <td>
                    <asp:Label ID="FirstNameLabel0" runat="server" Text="First Name" CssClass="MemberInfolabel"></asp:Label>
                    </td>
                    <td>
                    <asp:TextBox ID="FirstNameBox" runat="server" ReadOnly="true" BackColor="#EEECE1"></asp:TextBox>
                    </td>
             </tr>

              <tr>
                <td> <asp:Label ID="DOBLabel" runat="server" Text="DOB" CssClass="MemberInfolabel"></asp:Label></td>
                <td>  <asp:TextBox ID="DOBBox" runat="server" ReadOnly="true" BackColor="#EEECE1"></asp:TextBox></td>
             </tr>
             <tr>
                <td> <asp:Label ID="MEMBIDLabel" runat="server" Text="Beneficiary ID" CssClass="MemberInfolabel"></asp:Label></td>
                <td> <asp:TextBox ID="MEMBIDBox" runat="server" ReadOnly="true" BackColor="#EEECE1"></asp:TextBox> </td>
            </tr>
             <tr>
                <td>
                <asp:Label ID="PCPLabel" runat="server" Text="Aligned Provider" CssClass="MemberInfolabel"></asp:Label>
                </td>
                <td>
                <asp:TextBox ID="PCPBox" runat="server" ReadOnly="true" BackColor="#EEECE1"></asp:TextBox>

                </td>
            </tr>
             <tr>
                <td>
                    <asp:Label ID="HospLabel" runat="server" Text="Hospital" CssClass="MemberInfolabel"></asp:Label>
                </td>
            </tr>
            </table>
    </form>
</body>
</html> 
```

# facebook - 简单的应用程序在本地工作，但在主机上返回 #368

> ID：16067151
> 
> 赞同：0
> 
> 时间：2013-04-17T18:10:57.053
> 
> 标签：facebook, localhost

我制作了一个应用程序，可以在我的 fb 墙上发布。当我使用 XAMPP 在本地开发它时，一切正常。现在我已经将我的作品上传到了一个主机上（000webhost，如果重要的话），我已经购买了一个域（来自 godaddy），我已经将它放在了 facebook 设置中，但是当我尝试使用该应用程序时，我确实成功登录但我无法发布当我收到此消息 (#368) 时，任何事情都已被视为滥用或以其他方式被禁止。任何对我应该做什么有所了解的人，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:39:42.627

那是因为您不能从另一个域（在您的情况下为 localhost）发布，同时拥有一个应用域，即您从 godaddy 购买的域。

要解决此问题，请将您的应用程序域设置为 facebook 上的 localhost，或者从您托管应用程序的实际域运行脚本。

但是从与应用程序不同的域运行代码会导致此错误。您还需要 SSL 支持进行生产。

# java - 每当我将一些表添加到我的数据库时，都没有这样的表错误

> ID：16067152
> 
> 赞同：1
> 
> 时间：2013-04-17T18:10:57.373
> 
> 标签：java, android, sqlite

每当我将一些表添加到我的数据库时，我都会收到此错误。如果我删除我的游戏并重新安装它，我不会收到那个错误，所以有那个表。我尝试将数据库版本更改为 2 而不是 1，但它已更新但仍然出现错误。有什么问题？这是logcat：

```
04-17 20:01:08.117: D/szipinf(10494): Initializing inflate state
04-17 20:01:08.217: D/szipinf(10494): Initializing inflate state
04-17 20:01:08.227: D/szipinf(10494): Initializing zlib to inflate
04-17 20:01:10.277: E/DataBaseHelper(10494): database updated
04-17 20:01:10.507: I/Database(10494): sqlite returned: error code = 1, msg = no such table: tblLogicTest
04-17 20:01:10.507: E/DataAdapter(10494): getTestData >>android.database.sqlite.SQLiteException: no such table: tblLogicTest: , while compiling: SELECT * FROM tblLogicTest WHERE 1 = 1  ORDER BY _ID ASC
04-17 20:01:10.507: D/AndroidRuntime(10494): Shutting down VM
04-17 20:01:10.507: W/dalvikvm(10494): threadid=1: thread exiting with uncaught exception (group=0x40018560)
04-17 20:01:10.527: E/AndroidRuntime(10494): FATAL EXCEPTION: main
04-17 20:01:10.527: E/AndroidRuntime(10494): java.lang.RuntimeException: Unable to start activity ComponentInfo{rs.androidaplikacije.themostcompleteiqtest/rs.androidaplikacije.themostcompleteiqtest.LogicTest}: android.database.sqlite.SQLiteException: no such table: tblLogicTest: , while compiling: SELECT * FROM tblLogicTest WHERE 1 = 1  ORDER BY _ID ASC
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.ActivityThread.access$1500(ActivityThread.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.ActivityThread$H.handleMessage(ActivityThread.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.os.Looper.loop(Looper.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.ActivityThread.main(ActivityThread.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at java.lang.reflect.Method.invoke(Method.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at dalvik.system.NativeStart.main(Native Method)
04-17 20:01:10.527: E/AndroidRuntime(10494): Caused by: android.database.sqlite.SQLiteException: no such table: tblLogicTest: , while compiling: SELECT * FROM tblLogicTest WHERE 1 = 1  ORDER BY _ID ASC
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at rs.androidaplikacije.themostcompleteiqtest.TestAdapter.getTestDataLogic(TestAdapter.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at rs.androidaplikacije.themostcompleteiqtest.LogicTest.nextQuestion(LogicTest.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at rs.androidaplikacije.themostcompleteiqtest.LogicTest.onCreate(LogicTest.java:93)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.)
04-17 20:01:10.527: E/AndroidRuntime(10494):    ... 11 more 
```

数据库助手：

```
public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "/data/data/rs.androidaplikacije.themostcompleteiqtest/databases/"; 
private static String DB_NAME ="pitanja.sqlite";// Database name
private static SQLiteDatabase mDataBase; 
private final Context mContext;
private static final int DATABASE_VERSION = 3;

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, 3);// 1 it's Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }

/**
 * Check if the database already exist to avoid re-copying the file each time you open the application.
 * @return true if it exists, false if it doesn't
 */
public boolean checkDataBase(){

SQLiteDatabase checkDB = null;

try{
String myPath = DB_PATH + DB_NAME;
checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}catch(SQLiteException e){

//database does't exist yet.

}

if(checkDB != null){

checkDB.close();

}

return checkDB != null ? true : false;
}
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }
    */

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }
    @Override
    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        try {
            // delete existing?

            // Copy the db from assests
            copyDataBase();
            Log.e(TAG, "database updated");
        } catch (IOException mIOException) {
            Log.e(TAG, mIOException.toString());
            try {
                throw mIOException;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

} 
```

适配器：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestDataMDPI(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanjaDanskaMDPI WHERE 1 = 1 " + whereClause + " ORDER BY _ID ASC";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
     public Cursor getTestDataHDPI(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanjaDanskaHDPI WHERE 1 = 1 " + whereClause + " ORDER BY _ID ASC";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
     public Cursor getTestDataLogic(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblLogicTest WHERE 1 = 1 " + whereClause + " ORDER BY _ID ASC";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:39:42.643

then`onUpgrade`方法不会被调用，除非你增加数据库版本。

# javascript - 在谷歌地图上添加多个标记会越来越长

> ID：16067163
> 
> 赞同：0
> 
> 时间：2013-04-17T18:11:35.080
> 
> 标签：javascript, google-maps

我试图找到我在地图上添加的经纬度。我已经尝试了很多东西，但无法弄清楚。

[这是我的完整代码](http://jsfiddle.net/XWZ3v/)

```
function initialize() {
  var mapOptions = {
    zoom: 4,
    center: new google.maps.LatLng(41,29),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

  google.maps.event.addListener(map, 'click', function(e) {
    placeMarker(e.latLng, map);
  });
}

function placeMarker(position, map) {
  var marker = new google.maps.Marker({
    position: position,
    map: map,
draggable: true
  });
  map.panTo(position);
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:21:34.750

supernova 是对的——Google Maps API 不提供在标记以任何其他方式添加到地图后引用标记的方法，而不是保留原始标记`google.maps.Marker`。一个简单的解决方案是在函数之外定义一个数组，并在创建时将所有标记一个一个地推到它上面。用于此的函数可能与此类似：

```
(function() {
   var markers = [];
   window.addMarkerToMap(parameters, map) {
     var params = parameters || {};
     params.map = map;
     var marker = new google.maps.Marker(params);
     markers.push({ "object": marker, "lat": params.position.lat(), "long": params.position.long() });
     return marker;
   };
   window.getMarkers() {
     return markers;
   };
})(); 
```

这为您提供了`addMarkerToMap()`带有签名的全局函数：`parameters: Object, map: google.map`. 每次使用它添加标记时，它都会在`window.getMarkers()`. 从那里，标记方便地位于 中`object`，而纬度/经度坐标分别位于`lat`和`long`中。

# java - 使用 Servlet、JSB 和 JavaBeans (MVC)

> ID：16067170
> 
> 赞同：1
> 
> 时间：2013-04-17T18:11:56.247
> 
> 标签：java, html, jsp, servlets, javabeans

对于“Web 工程”中的作业，我们必须使用 Servlet、Java Server Pages 和 Java Beans。（我知道 JSB 或多或少已被弃用，但我们必须将其用于训练）

基本上我们有一个小骰子游戏。有一条有 7 个字段的道路，您可以单击一个骰子，然后您会得到一个介于 1 - 3 之间的数字，并且您的汽车会移动您骰子的数字。然后轮到计算机，直到有人达到目标。

在规范中规定，我们必须使用 Java Bean 作为模型，JSP 作为视图，使用 Servlet 作为控制器。

我们已经创建了一个 Java Bean，其中包含玩家和游戏的所有信息（如回合、时间、领导者）。此信息与 JSP 一起显示。

我们想不通的是如何使用 servlet。基本上点击骰子，我猜它应该打开 servlet，但它怎么能与 JSP 和 bean 通信。

也许有人知道如何正确管理它？

这是一个截图： [http](http://gyazo.com/c5e5eaae2de23d20755d687c479dccce) ://gyazo.com/c5e5eaae2de23d20755d687c479dccce（它是德语）

左上角的表格是动态的，每次点击骰子都会改变，汽车和骰子也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:28:13.520

所以基本上，当你点击骰子时。您的浏览器将对 url 执行一些网络操作。通常是 POST 或 GET。在那个 URL 上监听你有一个 servlet。这个 servlet 有一种方法可以获取您在访问该 URL 时推送的数据。然后 servlet 会做一些事情，或者通过调用模型加载数据，或者更改数据。然后它会将您重定向到/加载带有该模型的 JSP。jsp 然后显示来自该模型的数据。我希望这会有所帮助！

# python - 在野外有没有好的用于 html 的 python css 内联模块？

> ID：16067172
> 
> 赞同：2
> 
> 时间：2013-04-17T18:12:06.967
> 
> 标签：python, css, email

我想使用 python 内联任意网页。我已经尝试了几个库，但它们都不能很好地处理“真实”内容，例如 nytimes 举一个复杂的例子。另外，我也希望内联外部样式表。你有什么建议吗？这是我目前的测试代码：

```
import requests
import codecs
from html5tidy import tidy

url = "http://www.nytimes.com/"

r = requests.get(url)
src = tidy(r.text)

from pypremailer import Premailer
p = Premailer(src)
output = p.premail()
f = open("/tmp/pypremailer.html", "w")
f.write(output)
f.close()

from premailer import transform
output = transform(src)
f = open("/tmp/premailer.html", "w")
f.write(output)
f.close()

import pynliner
output = pynliner.fromString(src)
f = open("/tmp/pynliner.html", "w")
f.write(output)
f.close()

from inlinestyler.utils import inline_css
output = inline_css(src)
f = open("/tmp/inlinestyler.html", "w")
f.write(output)
f.close() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-18T10:15:02.030

Pynliner 不再处于积极开发中，[还没有为 python3 做好准备](https://github.com/rennat/pynliner/issues/33)。所以我建议**使用[toronado](https://github.com/disqus/toronado)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T15:02:24.927

Pynliner 确实可能最适合 Web URL，特别是因为它能够处理 CSS 样式表标签。

```
from pynliner import Pynliner
p = Pynliner()
p.from_url('http://mashable.com/2014/06/03/iwilllisten-philadelphia/')
p.run() 
```

这是理论上的..实际上你会遇到一些需要解决的奇怪的 BeautifulSoup 问题..

# java - 为什么“数组类”有重载方法

> ID：16067175
> 
> 赞同：2
> 
> 时间：2013-04-17T18:12:24.733
> 
> 标签：java, arrays, generics

在浏览 Arrays Class 的 JavaDocs 时。我意识到有很多重载的方法。例如，

```
static int binarySearch(byte[] a, byte key)
static int binarySearch(char[] a, char key)
static <T> int binarySearch(T[] a, T key, Comparator<? super T> c) 
```

我无法理解，为什么需要这么多重载方法，而最后一个泛型方法似乎就足够了。

甚至在泛型之前，工作方法就`Object`可以解决问题。

为什么 Arrays 类设计了这么多重载的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T18:19:08.213

简单地说，原始数组不扩展`Object[]`，就像原始类型不是`Object`s 一样。出于这个原因，通用方法采用`T[]`不适用于像`int[]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:19:12.793

因为`java.util.Arrays`自 Java 1.2 以来就存在，远早于泛型被引入。它有那些重载的方法。其次，`byte[]`不能投到`Object[]`等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:15:59.787

仔细看：

```
static <T> int binarySearch(T[] a, T key, Comparator<? super T> c) 
```

还有一个**`Comparator`**类型的第三个参数，它在方法的其他变体中不存在`binarySearch`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T18:16:20.903

简而言之，为相同的功能使用相同的方法名称更容易。它们中的大多数被设计用于不同的原始类型，最后一种是用于对象。泛型类型 T[] 不适用于原始类型。

# c# - XDocument.Save() 在每个 XElement 上添加不需要的命名空间

> ID：16067176
> 
> 赞同：9
> 
> 时间：2013-04-17T18:12:25.073
> 
> 标签：c#, .net, xml, linq, ttml

我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<tt xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     
    xmlns="http://www.w3.org/ns/ttml" 
    xmlns:tt="http://www.w3.org/ns/ttml"     
    xmlns:tts="http://www.w3.org/ns/ttml#styling"
    xmlns:ttp="http://www.w3.org/ns/ttml#parameter" xml:lang="fr-FR"
    ttp:timeBase="smpte" ttp:frameRate="24" ttp:frameRateMultiplier="999 1000" ttp:dropMode="nonDrop">
  <head>
    <styling>
      <style xml:id="normal" tts:fontFamily="sansSerif" tts:fontWeight="normal" tts:fontStyle="normal" tts:color="white" tts:fontSize="100%"/>
      <style xml:id="bold" tts:fontFamily="sansSerif" tts:fontWeight="bold" tts:fontStyle="normal" tts:color="white" tts:fontSize="100%"/>
      <style xml:id="italic" tts:fontFamily="sansSerif" tts:fontWeight="normal" tts:fontStyle="italic" tts:color="white" tts:fontSize="100%"/>
      <style xml:id="bolditalic" tts:fontFamily="sansSerif" tts:fontWeight="bold" tts:fontStyle="italic" tts:color="white" tts:fontSize="100%"/>
    </styling> 
```

当我加载它`XDocument.Load()`然后保存它`XDocument.Save()`而不做任何更改时，我拥有的新 XML 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<tt:tt xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://www.w3.org/ns/ttml" xmlns:tt="http://www.w3.org/ns/ttml"
       xmlns:tts="http://www.w3.org/ns/ttml#styling"
       xmlns:ttp="http://www.w3.org/ns/ttml#parameter"
       xml:lang="fr-FR" ttp:timeBase="smpte"     ttp:frameRate="24" ttp:frameRateMultiplier="999 1000" ttp:dropMode="nonDrop">
  <tt:head>
    <tt:styling>
      <tt:style xml:id="normal" tts:fontFamily="sansSerif" tts:fontWeight="normal"     tts:fontStyle="normal" tts:color="white" tts:fontSize="100%" />
      <tt:style xml:id="bold" tts:fontFamily="sansSerif" tts:fontWeight="bold"     tts:fontStyle="normal" tts:color="white" tts:fontSize="100%" />
      <tt:style xml:id="italic" tts:fontFamily="sansSerif" tts:fontWeight="normal"     tts:fontStyle="italic" tts:color="white" tts:fontSize="100%" />
      <tt:style xml:id="bolditalic" tts:fontFamily="sansSerif" tts:fontWeight="bold"     tts:fontStyle="italic" tts:color="white" tts:fontSize="100%" />
    </tt:styling> 
```

有没有一种优雅的方式来加载和保存这种 XML 而无需更改任何内容？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:56:38.113

正如帕斯卡所说，问题来自 `xmlns="w3.org/ns/ttml"`和`xmlns:tt="w3.org/ns/ttml"`。我认为`XDocument.Save`生成这个 xml 因为默认的 xml 命名空间与另一个命名空间重复。（命名空间可能更多地由 valeu 识别而不是由 key 识别？）

第一个选项是删除输入文件中的重复项。使用这个新版本，你不会有任何问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<tt xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     
    xmlns="http://www.w3.org/ns/ttml"    
    xmlns:tts="http://www.w3.org/ns/ttml#styling"
    xmlns:ttp="http://www.w3.org/ns/ttml#parameter" xml:lang="fr-FR"
    ttp:timeBase="smpte" ttp:frameRate="24" ttp:frameRateMultiplier="999 1000" ttp:dropMode="nonDrop">
  <head>
    <styling>
      <style xml:id="normal" tts:fontFamily="sansSerif" tts:fontWeight="normal" tts:fontStyle="normal" tts:color="white" tts:fontSize="100%"/>
      <style xml:id="bold" tts:fontFamily="sansSerif" tts:fontWeight="bold" tts:fontStyle="normal" tts:color="white" tts:fontSize="100%"/>
      <style xml:id="italic" tts:fontFamily="sansSerif" tts:fontWeight="normal" tts:fontStyle="italic" tts:color="white" tts:fontSize="100%"/>
      <style xml:id="bolditalic" tts:fontFamily="sansSerif" tts:fontWeight="bold" tts:fontStyle="italic" tts:color="white" tts:fontSize="100%"/>
    </styling> 
```

第二种选择是在保存之前在某处删除重复的命名空间

```
doc.Root.Attributes(XName.Get("tt", @"http://www.w3.org/2000/xmlns/")).Remove(); 
```

# javascript - nvd3“线加条形图”示例未显示

> ID：16067177
> 
> 赞同：1
> 
> 时间：2013-04-17T18:12:26.177
> 
> 标签：javascript, python, graph, nvd3.js

我发现 nvd3 用于创建图表，我喜欢[Line plus bar chart](http://nvd3.org/ghpages/linePlusBar.html)。但我什至不能让他们的例子奏效。我在哪里做错了？我已经尝试在示例页面上包含几乎所有的 js 脚本（上面的链接）。这是我的python代码：

```
<!DOCTYPE html>
<head>
<meta charset="utf-8">
{% load staticfiles %}
    <style>
        #chart svg {
            height: 400px;
        }
    </style>

<link href="{% static "css/nv.d3.css" %}" rel="stylesheet">

<script src="{% static "js/d3.v3/d3.v3.min.js" %}"></script>
<script src="{% static "js/d3.v3/d3.v3.js" %}"></script>
<script src="{% static "js/d3.v3/fisheye.js" %}"></script>
<script type="text/javascript" src="{% static "js/graph/linePlusBar.js" %}"></script>
</head>

<body>
<div id="chart">
    <svg> </svg>
</div>

<h1>{{ stock.name }} dividend history</h1>
<ul>
{% for dividend in stock.dividend_set.all %}
    <li>{{ dividend.date}} - {{dividend.amount}}</li>
{% endfor %}
</ul>
</body>
</html> 
```

这是加载页面的 html 输出

```
<!DOCTYPE html>
<head>
<meta charset="utf-8">

    <style>
        #chart svg {
            height: 400px;
        }
    </style>

<link href="/static/css/nv.d3.css" rel="stylesheet">

<script src="/static/js/d3.v3/d3.v3.min.js"></script>
<script src="/static/js/d3.v3/d3.v3.js"></script>
<script src="/static/js/d3.v3/fisheye.js"></script>
<script type="text/javascript" src="/static/js/graph/linePlusBar.js"></script>
</head>

<body>
<div id="chart">
    <svg> </svg>
</div>

<h1>Agilent Technolog dividend history</h1>
<ul>

    <li>Nov. 1, 2006 - 2.057</li>

    <li>March 30, 2012 - 0.1</li>

    <li>June 29, 2012 - 0.1</li>

    <li>Sept. 28, 2012 - 0.1</li>

    <li>Dec. 27, 2012 - 0.1</li>

    <li>March 28, 2013 - 0.12</li>

</ul>
</body>
</html> 
```

并且默认 linePlusBar.js

```
nv.addGraph(function() {
    var testdata = exampleData(),
        chart = nv.models.linePlusBarChart()
            .margin({top: 30, right: 60, bottom: 50, left: 70})
            .x(function(d,i) { return i })
            .color(d3.scale.category10().range());

    chart.xAxis.tickFormat(function(d) {
        var dx = testdata[0].values[d] && testdata[0].values[d].x || 0;
        return d3.time.format('%x')(new Date(dx))
    });

    chart.y1Axis
        .tickFormat(d3.format(',f'));

    chart.y2Axis
        .tickFormat(function(d) { return '$' + d3.format(',f')(d) });

    chart.bars.forceY([0]);
    //chart.lines.forceY([0]);

    d3.select('#chart svg')
        .datum(exampleData())
        .transition().duration(500).call(chart);

    nv.utils.windowResize(chart.update);

    return chart;
});

function exampleData() {
    return [
        {
            "key" : "Quantity" ,
            "bar": true,
            "values" : [ [ 1136005200000 , 1271000.0] , [ 1138683600000 , 1271000.0] , [ 1141102800000 , 1271000.0] , [ 1143781200000 , 0] , [ 1146369600000 , 0] , [ 1149048000000 , 0] , [ 1151640000000 , 0] , [ 1154318400000 , 0] , [ 1156996800000 , 0] , [ 1159588800000 , 3899486.0] , [ 1162270800000 , 3899486.0] , [ 1164862800000 , 3899486.0] , [ 1167541200000 , 3564700.0] , [ 1170219600000 , 3564700.0] , [ 1172638800000 , 3564700.0] , [ 1175313600000 , 2648493.0] , [ 1177905600000 , 2648493.0] , [ 1180584000000 , 2648493.0] , [ 1183176000000 , 2522993.0] , [ 1185854400000 , 2522993.0] , [ 1188532800000 , 2522993.0] , [ 1191124800000 , 2906501.0] , [ 1193803200000 , 2906501.0] , [ 1196398800000 , 2906501.0] , [ 1199077200000 , 2206761.0] , [ 1201755600000 , 2206761.0] , [ 1204261200000 , 2206761.0] , [ 1206936000000 , 2287726.0] , [ 1209528000000 , 2287726.0] , [ 1212206400000 , 2287726.0] , [ 1214798400000 , 2732646.0] , [ 1217476800000 , 2732646.0] , [ 1220155200000 , 2732646.0] , [ 1222747200000 , 2599196.0] , [ 1225425600000 , 2599196.0] , [ 1228021200000 , 2599196.0] , [ 1230699600000 , 1924387.0] , [ 1233378000000 , 1924387.0] , [ 1235797200000 , 1924387.0] , [ 1238472000000 , 1756311.0] , [ 1241064000000 , 1756311.0] , [ 1243742400000 , 1756311.0] , [ 1246334400000 , 1743470.0] , [ 1249012800000 , 1743470.0] , [ 1251691200000 , 1743470.0] , [ 1254283200000 , 1519010.0] , [ 1256961600000 , 1519010.0] , [ 1259557200000 , 1519010.0] , [ 1262235600000 , 1591444.0] , [ 1264914000000 , 1591444.0] , [ 1267333200000 , 1591444.0] , [ 1270008000000 , 1543784.0] , [ 1272600000000 , 1543784.0] , [ 1275278400000 , 1543784.0] , [ 1277870400000 , 1309915.0] , [ 1280548800000 , 1309915.0] , [ 1283227200000 , 1309915.0] , [ 1285819200000 , 1331875.0] , [ 1288497600000 , 1331875.0] , [ 1291093200000 , 1331875.0] , [ 1293771600000 , 1331875.0] , [ 1296450000000 , 1154695.0] , [ 1298869200000 , 1154695.0] , [ 1301544000000 , 1194025.0] , [ 1304136000000 , 1194025.0] , [ 1306814400000 , 1194025.0] , [ 1309406400000 , 1194025.0] , [ 1312084800000 , 1194025.0] , [ 1314763200000 , 1244525.0] , [ 1317355200000 , 475000.0] , [ 1320033600000 , 475000.0] , [ 1322629200000 , 475000.0] , [ 1325307600000 , 690033.0] , [ 1327986000000 , 690033.0] , [ 1330491600000 , 690033.0] , [ 1333166400000 , 514733.0] , [ 1335758400000 , 514733.0]]
        } ,

        {
            "key" : "Price" ,
            "values" : [ [ 1136005200000 , 71.89] , [ 1138683600000 , 75.51] , [ 1141102800000 , 68.49] , [ 1143781200000 , 62.72] , [ 1146369600000 , 70.39] , [ 1149048000000 , 59.77] , [ 1151640000000 , 57.27] , [ 1154318400000 , 67.96] , [ 1156996800000 , 67.85] , [ 1159588800000 , 76.98] , [ 1162270800000 , 81.08] , [ 1164862800000 , 91.66] , [ 1167541200000 , 84.84] , [ 1170219600000 , 85.73] , [ 1172638800000 , 84.61] , [ 1175313600000 , 92.91] , [ 1177905600000 , 99.8] , [ 1180584000000 , 121.191] , [ 1183176000000 , 122.04] , [ 1185854400000 , 131.76] , [ 1188532800000 , 138.48] , [ 1191124800000 , 153.47] , [ 1193803200000 , 189.95] , [ 1196398800000 , 182.22] , [ 1199077200000 , 198.08] , [ 1201755600000 , 135.36] , [ 1204261200000 , 125.02] , [ 1206936000000 , 143.5] , [ 1209528000000 , 173.95] , [ 1212206400000 , 188.75] , [ 1214798400000 , 167.44] , [ 1217476800000 , 158.95] , [ 1220155200000 , 169.53] , [ 1222747200000 , 113.66] , [ 1225425600000 , 107.59] , [ 1228021200000 , 92.67] , [ 1230699600000 , 85.35] , [ 1233378000000 , 90.13] , [ 1235797200000 , 89.31] , [ 1238472000000 , 105.12] , [ 1241064000000 , 125.83] , [ 1243742400000 , 135.81] , [ 1246334400000 , 142.43] , [ 1249012800000 , 163.39] , [ 1251691200000 , 168.21] , [ 1254283200000 , 185.35] , [ 1256961600000 , 188.5] , [ 1259557200000 , 199.91] , [ 1262235600000 , 210.732] , [ 1264914000000 , 192.063] , [ 1267333200000 , 204.62] , [ 1270008000000 , 235.0] , [ 1272600000000 , 261.09] , [ 1275278400000 , 256.88] , [ 1277870400000 , 251.53] , [ 1280548800000 , 257.25] , [ 1283227200000 , 243.1] , [ 1285819200000 , 283.75] , [ 1288497600000 , 300.98] , [ 1291093200000 , 311.15] , [ 1293771600000 , 322.56] , [ 1296450000000 , 339.32] , [ 1298869200000 , 353.21] , [ 1301544000000 , 348.5075] , [ 1304136000000 , 350.13] , [ 1306814400000 , 347.83] , [ 1309406400000 , 335.67] , [ 1312084800000 , 390.48] , [ 1314763200000 , 384.83] , [ 1317355200000 , 381.32] , [ 1320033600000 , 404.78] , [ 1322629200000 , 382.2] , [ 1325307600000 , 405.0] , [ 1327986000000 , 456.48] , [ 1330491600000 , 542.44] , [ 1333166400000 , 599.55] , [ 1335758400000 , 583.98]]
        }
    ].map(function(series) {
            series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });
            return series;
        });
} 
```

我错过了什么？svg 在我的 html 页面上是空白的。感谢您的帮助，我真的迷失在这个微不足道的事情上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T19:44:42.497

如果您使用 Python 和 NVD3，您可能需要查看 python-nvd3： [https ://github.com/areski/python-nvd3](https://github.com/areski/python-nvd3)

我们还在开发 django 包装器： [https ://github.com/areski/django-nvd3](https://github.com/areski/django-nvd3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:23:54.613

看起来您还没有将 NVD3 库添加到您的项目中。你可以从[这里](http://cdnjs.com/libraries/nvd3)得到它。

在我的机器上使用 nvd3 javascript 库测试了您的代码，它工作正常。对我来说看起来像这样。 ![在此处输入图像描述](https://i.stack.imgur.com/AXPlT.jpg)

# android - Google Play In-app billing version 3 购买的服务器端验证

> ID：16067180
> 
> 赞同：40
> 
> 时间：2013-04-17T18:12:31.640
> 
> 标签：android, in-app-purchase, in-app-billing

在向用户提供可下载内容之前，我无法找到关于如何在服务器上验证应用内结算购买的直接答案。

我在应用计费版本 3 中使用。我使用基于 TrivialDrive 示例代码中的 IabHelper 类的代码购买托管产品。一切都很好，购买成功完成，我得到一个完整的购买对象和以下原始 JSON 数据：

```
{
    "orderId":"12999763169054705758.1364365967744519",
    "packageName":"my package name",
    "productId":"77",
    "purchaseTime":1366217534000,
    "purchaseState":0,
    "purchaseToken":"utfwimslnrrwvglktizikdcd.AO-J1OwZ4l5oXz_3d2SAWAAUgFE3QErKoyIX8WuSEnBW26ntsyDmlLgoUd5lshqIY2p2LnlV4tpH4NITB4mJMX98sCtZizH7wGf6Izw3tfW_GflJDKFyb-g"
} 
```

据我了解，我需要将 purchaseToken 和我看到的称为签名的东西传递给服务器。然后服务器使用私钥来验证购买。这个对吗？如果是这样，我从哪里获得签名，是否真的没有关于服务器端购买验证的体面文档？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-17T18:37:23.237

```
where do I get the signature from ? 
```

看看[官方文档](http://developer.android.com/google/play/billing/billing_integrate.html)，

它说在您的`onActivityResult()`方法中，您可以获得以下数据，如示例所示，

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
   if (requestCode == 1001) {           
      int responseCode = data.getIntExtra("RESPONSE_CODE", 0);
      String purchaseData = data.getStringExtra("INAPP_PURCHASE_DATA");
      String dataSignature = data.getStringExtra("INAPP_DATA_SIGNATURE");//this is the signature which you want

      if (resultCode == RESULT_OK) {
         try {
            JSONObject jo = new JSONObject(purchaseData);//this is the JSONObject which you have included in Your Question right now
            String sku = jo.getString("productId");
            String purchaseToken = jo.getString("purchaseToken");
           //you need to send sku and purchaseToken to server for verification
          }
          catch (JSONException e) {
             alert("Failed to parse purchase data.");
             e.printStackTrace();
          }
      }
   }
} 
```

**对于服务器端的验证，** 请查看[官方文档](https://developers.google.com/android-publisher/api-ref/purchases/products/get)

如前所述，客户端应用程序将发送`sku`和发送`purchaseToken`到服务器 API。服务器必须接收这些值，并且必须使用 android publish api 执行检查以验证购买：

服务器可以通过添加必要的参数来调用以下**GET 请求：**

[https://www.googleapis.com/androidpublisher/v2/applications/](https://www.googleapis.com/androidpublisher/v2/applications/) **packageName** /purchases/products/ **productId** /tokens/ **token**

这里，
packageName = 客户端应用程序的 packageName
productId = 从客户端应用程序收到的 sku
令牌 = 从客户端应用程序收到的 purchaseToken

它将导致`JSONObject`上述格式的响应：

```
{
  "kind": "androidpublisher#productPurchase",
  "purchaseTimeMillis": long,
  "purchaseState": integer,
  "consumptionState": integer,
  "developerPayload": string,
  "orderId": string,
  "purchaseType": integer
} 
```

这里，**purchaseState = 0 表示有效购买**

我希望它会有所帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-06T14:22:43.723

**我对减少应用内购买欺诈的小贡献**

外部服务器上的签名验证，在您的 Android 代码上：

**verifySignatureOnServer()**

```
 private boolean verifySignatureOnServer(String data, String signature) {
        String retFromServer = "";
        URL url;
        HttpsURLConnection urlConnection = null;
        try {
            String urlStr = "https://www.example.com/verify.php?data=" + URLEncoder.encode(data, "UTF-8") + "&signature=" + URLEncoder.encode(signature, "UTF-8");

            url = new URL(urlStr);
            urlConnection = (HttpsURLConnection) url.openConnection();
            InputStream in = urlConnection.getInputStream();
            InputStreamReader inRead = new InputStreamReader(in);
            retFromServer = convertStreamToString(inRead);

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (urlConnection != null) {
                urlConnection.disconnect();
            }
        }

        return retFromServer.equals("good");
    } 
```

**转换流到字符串（）**

```
 private static String convertStreamToString(java.io.InputStreamReader is) {
        java.util.Scanner s = new java.util.Scanner(is).useDelimiter("\\A");
        return s.hasNext() ? s.next() : "";
    } 
```

**虚拟主机根目录下的**verify.php****

 **```
<?php
// get data param
$data = $_GET['data'];

// get signature param
$signature = $_GET['signature'];

// get key
$key_64 = ".... put here the base64 encoded pub key from google play console , all in one row !! ....";

$key =  "-----BEGIN PUBLIC KEY-----\n".
        chunk_split($key_64, 64,"\n").
       '-----END PUBLIC KEY-----';   
//using PHP to create an RSA key
$key = openssl_get_publickey($key);

// state whether signature is okay or not
$ok = openssl_verify($data, base64_decode($signature), $key, OPENSSL_ALGO_SHA1);
if ($ok == 1) {
    echo "good";
} elseif ($ok == 0) {
    echo "bad";
} else {
    die ("fault, error checking signature");
}

// free the key from memory
openssl_free_key($key);

?> 
```

**笔记：**

*   您应该在您的 java 代码中加密 URL，如果不是，则可以通过在解压缩的应用程序 apk 中进行简单的文本搜索轻松找到该 URL

*   最好将 php 文件名、url 参数、好/坏响应更改为毫无意义的东西。

*   verifySignatureOnServer() 应该在一个单独的线程中运行，如果不是主线程上的网络将抛出异常。

希望它会有所帮助...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-30T10:14:53.220

这个问题太老了，但我希望我的回答可以帮助别人。

您必须在**客户端**验证签名，然后您必须传递`purchaseToken`到**服务器端**，然后服务器将联系**谷歌的服务器**并获取有关购买的所有必要信息，例如`purchaseState`和`consumptionState`。

[https://developers.google.com/android-publisher/api-ref/purchases/products](https://developers.google.com/android-publisher/api-ref/purchases/products)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-16T04:23:07.003

1.用composer安装谷歌客户端PHP库

```
composer require google/apiclient:"^2.0" 
```

2.  创建服务帐户，它将为您提供 json 并保存为 credentials.json

[![在此处输入图像描述](https://i.stack.imgur.com/vzH1k.png)](https://i.stack.imgur.com/vzH1k.png)

3.  起始码

    ```
    require $_SERVER['DOCUMENT_ROOT'] . '/client/vendor/autoload.php';

    $packageName='Your Package name'; //com.example.blahblah
    $productId='your_product_ID';
    $token='Purchase_Token_Form_Payment';

    $client = new \Google_Client();
    $client->setAuthConfig('credentials.json');
    $client->addScope('https://www.googleapis.com/auth/androidpublisher');

    $service = new \Google_Service_AndroidPublisher($client);
    $purchase = $service->purchases_products->get($packageName, $productId, $token);

    //echo $purchase['purchaseState'];
    //echo '<br>';
    echo json_encode($purchase); 
    ```

结果会是这样

```
{"acknowledgementState":1,"consumptionState":1,"developerPayload":"","kind":"androidpublisher#productPurchase","orderId":"GPA.3342-8146-5668-57982","productId":null,"purchaseState":0,"purchaseTimeMillis":"1586978561493","purchaseToken":null,"purchaseType":0,"quantity":null} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-06T22:39:26.950

这是一个非常古老的问题，但我认为它仍然是相关的。

我的小贡献。购买对象扩展了一个新参数“已确认”，现在它看起来：

```
{
  "orderId":"12999763169054705758.1364365967744519",
  "packageName":"my package name",
  "productId":"77",
  "purchaseTime":1366217534000,
  "purchaseState":0,
  "purchaseToken":"utfwimslnrrwvglktizikdcd.AO-J1OwZ4l5oXz_3d2SAWAAUgFE3QErKoyIX8WuSEnBW26ntsyDmlLgoUd5lshqIY2p2LnlV4tpH4NITB4mJMX98sCtZizH7wGf6Izw3tfW_GflJDKFyb-g",
  "acknowledged":true
} 
```

所以在检查签名时要小心添加这个额外的参数。**

# .net - 为什么我的 Xaml 控件给了我多个 CodeBehind 异常？

> ID：16067181
> 
> 赞同：1
> 
> 时间：2013-04-17T18:12:34.317
> 
> 标签：.net, xaml, sitecore

我在我的 Sitecore 实例中添加了一个 Xaml 控件，并且由于某种原因它返回了一个`Only one <CodeBeside> tag is allowed on each page`异常。问题是应用程序中只有一个 CodeBeside 标记（见下文）。我什至尝试删除一个 CodeBeside 标签，但我仍然遇到同样的问题。我该如何解决这个问题？

```
<control xmlns:def="Definition"
         xmlns="http://schemas.sitecore.net/Visual-Studio-Intellisense">
  <doThingy>
    <FormDialog Icon="Business/32x32/messages.png"
                Header="Thingy-doer"
                Text="Double-click each comment to edit or delete."
                OKButton="Close"
                CancelButton="false">
      <CodeBeside Type="Name.space.layout.layouts.Xaml.Dothingy.CommentsDisplayCodeBeside,CHLIHB.Web" />
      <div>Showing comments from between these dates:</div>
      <div style="outer-datepicker">
        <DatePicker ID="DateLowerBound"
                    Width="50%" />
        <DatePicker ID="DateUpperBound"
                    Width="50%" />
        <div style="clear:both" />
      </div>
      <div>
        <Scrollbox>
          <Listview ID="ThingyListItems"
                    View="Details"
                    Width="100%"
                    Background="white"
                    DblClick="nm:doubleclick"
                    Click="nm:headerclick">
            <ListviewHeader id="IndexHeader">
              <ListviewHeaderItem Name="userName"
                                  Header="User Name" />
              <ListviewHeaderItem Name="datePosted"
                                  Header="Date Posted" />
              <ListviewHeaderItem Name="contentTitle"
                                  Header="Article Title" />
              <ListviewHeaderItem Name="commentExcerpt"
                                  Header="Excerpt" />
            </ListviewHeader>
          </Listview>
        </Scrollbox>
      </div>
    </FormDialog>
  </doThingy>
</control> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:12:34.317

最可能的原因有两个。

*   您已在项目中移动控件
*   您的 web.config 中可能没有足够具体的`controlSources`节点，它正在查找旧版本的 Xaml 控件。似乎有时 Sitecore 会忽略找到的第二个控件，有时它会尝试解析两者（因此出现异常）。

请记住，无法保证 Visual Studio 会清理在移动源后留下的 Xaml 文件。这意味着一般来说，这是一个糟糕的政策，应该避免：

```
<source mode="on" namespace="Sitecore.Web.UI.XmlControls" 
        folder="/layout" deep="true" /> 
```

相反，请确保您指向特定文件夹并且（理想情况下）具有`deep="false"`：

```
<source mode="on" namespace="Sitecore.Web.UI.XmlControls" 
        folder="/layout/layouts/Xaml/Dothingy" deep="false" /> 
```

这可能意味着包括更多的`source`节点，但它实际上会带来更多的整体稳定性。

# python - 类方法和类方法中定义的变量

> ID：16067188
> 
> 赞同：2
> 
> 时间：2013-04-17T18:12:46.560
> 
> 标签：python, class

对于以下代码：

```
import os.path

class Test:

   @classmethod
   def foo(cls):
       cls.exist = os.path.exists
       print type(cls.exist)
       print type(os.path.exists)

def main():
   Test.foo() 
```

我得到的输出为：

```
<type 'instancemethod'>
<type 'function'> 
```

我只是将函数 os.path.exist 分配给类变量 cls.exist。但是当我打印两个变量时，我得到一个作为实例方法，另一个作为函数。为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:19:01.487

一、直观解释：

当您将一个函数分配给一个类时，它会被转换为一个未绑定的方法。

未绑定方法是一种神奇的东西，它为类的每个实例创建一个绑定方法。

绑定方法是一种神奇的东西，`self`它绑定了特殊的参数。

（这在 3.x 中略有不同，因为没有未绑定的方法；函数本身就是为类的每个实例创建绑定方法的神奇事物。但您显然是在询问 2.x。）

所以：

```
>>> class C(object): pass
>>> def foo(self): print(self)
>>> C.foo = foo
>>> c = C() 
```

现在你可以调用`c.foo()`了，`self`参数会自动填充为`c`。但是你不能在`C.foo()`没有参数的情况下调用，就像你不能`foo()`在没有参数的情况下调用一样。

```
>>> c.foo()
<__main__.C object at 0x108df7e50>
>>> C.foo()
TypeError: unbound method foo() must be called with C instance as first argument (got nothing instead)
>>> foo()
TypeError: foo() takes exactly 1 argument (0 given) 
```

当然，没有什么能阻止你打电话`C.foo()`或`foo()`使用明确的`self`论据。你通常不会这样做，但它工作正常：

```
>>> C.foo(1)
1
>>> foo(1)
1 
```

如果您查看函数、未绑定方法和绑定方法，它们很容易区分：

```
>>> foo, C.foo, c.foo
(<function __main__.foo>, <unbound method C.foo>, <bound method C.foo of <__main__.C object at 0x108df7e50>>)
>>> type(foo), type(C.foo), type(c.foo)
(function, instancemethod, instancemethod) 
```

* * *

如果您只是想要一种解决方法，您可以使用`staticmethod`. 这需要一个函数并创建一个东西，当它分配给一个类时，它就像一个函数而不是一个未绑定的方法：

```
>>> bar = staticmethod(foo)
>>> C.bar = staticmethod(foo)
>>> c = C()
>>> bar, C.bar, c.bar
(<staticmethod at 0x109e990f8>, <function __main__.foo>, <function __main__.foo>) 
```

现在，您可以在类或实例上将其作为常规函数调用，而无需使用魔法`self`方法：

```
>>> C.bar(1)
1
>>> c.bar(1)
1
>>> bar(1)
TypeError: 'staticmethod' object is not callable 
```

* * *

但这种直观的解释并不是真的。它总是会引导你找到正确的答案，但这并不是事情的真正运作方式。

要真正理解这一点，您需要了解[描述符](http://docs.python.org/2/howto/descriptor.html)的工作原理。

当您将函数作为属性分配给类时，不会发生任何神奇的事情。类字典中存储的只是普通的旧函数：

```
>>> C.__dict__['foo']
<function __main__.foo> 
```

当你创建一个实例时，它不会在实例字典中放任何东西，因为属性查找会自动回退到类字典：

```
>>> c.__dict__['foo']
KeyError: 'foo' 
```

真正的魔法发生在查找时。每当您查找任何属性（方法或其他）时，解释器不仅会从字典中返回对象，它还会调用该对象的`__get__`方法，传递实例（或者`None`，如果在类对象上调用）和类。

普通函数具有`__get__`根据需要生成绑定或未绑定方法的方法：

```
>>> C.__dict__['foo'].__get__(None, C)
<unbound method C.foo>
>>> C.__dict__['foo'].__get__(None, C) == C.foo
True
>>> C.__dict__['foo'].__get__(c, C)
<bound method C.foo of <__main__.C object at 0x108df7e50>>
>>> C.__dict__['foo'].__get__(c, C) == c.foo
True 
```

您可以手动执行相同的操作并获得相同的结果：

```
>>> types.MethodType(foo, None, C) == C.foo
True
>>> types.MethodType(foo, c, C) == c.foo
True 
```

现在你大概可以猜到是什么`staticmethod`样子了：它有一个`__get__`方法只返回原始函数，不管你传递什么。

处理可设置的数据属性等有点复杂，但实际上，这几乎就是全部，如果你理解了这一点，你就几乎理解了 Python 中的所有魔力。您可以自己构建`staticmethod`、`classmethod`和`property`，从头开始构建类等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:24:01.607

您可能将其分配为类变量，但它绑定到类：

```
Traceback (most recent call last):
  File "<stdin>", line 12, in <module>
TypeError: unbound method exists() must be called with Test instance as first argument (got str instance instead) 
```

您需要制作`exist`a`staticmethod`以使其“独立于”类：

```
cls.exist = staticmethod(os.path.exists) 
```

现在，两者都是同一类型：

```
<type 'function'>
<type 'function'> 
```

你实际上可以称之为：

```
>>> Test.exist('foo')
False 
```

# python - 我希望在要求用户再次输入内容之前弹出一个错误

> ID：16067193
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:13:01.943
> 
> 标签：python, python-3.x, function

在上面的代码中，当我按下任何其他键时，我希望在返回 user_input 之前弹出一条错误消息。请帮助某人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:15:46.637

`while`在循环结束时检查它是否有效：

```
currencies = ['pound', 'euro', 'dollar', 'yen', '$', '£', '¥','€']

def get_currency(msg):
    while True:
        user_input = input(msg).lower()

        if user_input not in currencies:
            print('Invalid currency')
        else:
            return user_input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:18:10.583

```
# -*- coding: utf-8 -*-
valid = ['pound', 'euro', 'dollar', 'yen', '$', '£', '¥','€']
msg="Enter currency: "
def get_currency(msg):

    input_valid = input(msg).lower()

    while input_valid not in valid:       #run this loop until the input is not valid
        print ("Invalid Input, Try again")  #the error message
        input_valid = input(msg).lower()

    return input_valid

print (get_currency(msg)) 
```

**输出：**

```
~$ python3 so.py
Enter currency: foo
Invalid Input, Try again
Enter currency: bar
Invalid Input, Try again
Enter currency: pound
pound 
```

# java - 确定适当的缓冲区大小

> ID：16067199
> 
> 赞同：6
> 
> 时间：2013-04-17T18:13:15.207
> 
> 标签：java, buffer, bytebuffer

我正在使用 ByteBuffer.allocateDirect() 分配一些缓冲内存，用于将文件读入内存，然后最终散列该文件字节并从中获取文件散列 (SHA)。输入文件的大小范围很大，从几 KB 到几 GB 不等。

我已经阅读了几个关于选择缓冲区大小的线程和页面（甚至一些关于 SO）。有些人建议尝试选择一个本机文件系统使用的文件系统，以尽量减少对部分块等进行读取操作的机会。比如 4100 字节的缓冲区，NTFS 默认为 4096，所以额外的 4 位需要单独的读取操作，非常浪费。

所以坚持使用 2、1024、2048、4096、8192 等的幂。我见过一些推荐的 32KB 大小的缓冲区，还有一些建议将缓冲区设置为输入文件的大小（对于小文件可能没问题，但是什么关于大文件？）。

坚持原生块大小的缓冲区有多重要？现代而言（假设现代 SATA 驱动器或更好的驱动器缓存至少为 8Mb，以及其他现代操作系统“魔术”来优化 I/O）缓冲区大小有多重要，我应该如何最好地确定将我的大小设置为什么？我可以静态设置它，还是动态确定它？感谢您的任何见解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:08:17.787

回答您的直接问题：（1）文件系统倾向于使用 2 的幂，因此您也想这样做。(2) 工作缓冲区越大，任何尺寸错误的影响就越小。

如您所说，如果分配 4100 并且实际块大小为 4096，则需要两次读取来填充缓冲区。相反，如果您有一个 1,000,000 字节的缓冲区，那么高或低一个块并不重要（因为填充该缓冲区需要 245 个 4096 字节的块）。此外，更大的缓冲区意味着操作系统有更好的机会来排序读取。

也就是说，我不会为此使用 NIO。相反，我会`BufferedInputStream`为我`read()`的 s 使用一个简单的 1k 缓冲区。

NIO 的主要好处是将数据保留在 Java 堆之外。例如，如果您正在读取和写入文件，`InputStream`则使用操作系统将数据读取到 JVM 管理的缓冲区中的方式，JVM 将其复制到堆上缓冲区，然后再次将其复制到堆外缓冲区，然后操作系统读取堆外缓冲区以写入实际的磁盘块（并且通常添加自己的缓冲区）。在这种情况下，NIO 将消除本机堆副本。

但是，要计算哈希，您需要将数据放在 Java 堆中，然后`Mac`SPI[会将其移动到那里](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/crypto/MacSpi.java#MacSpi.engineUpdate%28byte%5B%5D,int,int%29)。因此，您不会获得 NBI 将数据保持在堆外的好处，而且 IMO 的“旧 IO”更容易编写。

`InputStream.read()`只是不要忘记，*不能*保证读取您要求的所有字节。

# python - Tkinter gui中的指数函数

> ID：16067204
> 
> 赞同：2
> 
> 时间：2013-04-17T18:13:46.970
> 
> 标签：python, user-interface, tkinter, exponential

我在尝试在 Tkinter gui 中定义指数函数时遇到问题。My Gui 由三个组合框组成，我可以在其中选择不同的数字。当我选择所有数字时，它会显示基于指数函数的结果。我的意思如下：

*   选择 NumberA #Combobox 1
*   选择 NumberB #Combobox 2
*   选择 NumberC #Combobox 3

    ```
    Result = exp[(-NumberA/NumberB)* NumberC] 
    ```

到目前为止我所拥有的如下，但它不起作用：

```
#Main Selection
def exponential(*args):
    try:
        product.set('%g' %math.exp((float(Num_A.get())/float(Num_B.get())*float(Num_C.get()),2)))
    except ValueError:
        pass

## variables
NumA = StringVar() 
NumB = StringVar() 
NumC = StringVar()

product= DoubleVar()

#Combo boxes, 
#NumA NumB and NumC are similar
ttk.Label(stepTen, text="Select A):").grid(column =3, row = 0)
NumA_Select = Combobox(stepTen, values=("0.1", "0.2", "0.3","0.4",),textvariable=Num_OneT)
NumA_Select.grid(column=4, row=0, columnspan="5", sticky="nswe")
NumA.trace("w",exponential)

## display results
ttk.Label(stepTen, text = "Exponential Dist result:").grid(column = 3, row = 12)
ttk.Label(stepTen, textvariable=product).grid(column = 4, row = 12)

#End Code
root.mainloop() 
```

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:25:11.480

根据您的示例代码，您没有在任何地方设置`NumA`、`NumB`或`NumC`值，并且这些变量不与任何小部件相关联。另外，您创建名为`NumA`,`NumB`和的变量`NumC`，但在您的函数中使用`Num_A`,`Num_B`和`Num_C`。

# android - Eclipse MemoryAnalyzer 是如何工作的？

> ID：16067205
> 
> 赞同：1
> 
> 时间：2013-04-17T18:13:49.863
> 
> 标签：android, eclipse, heap-memory, ddms

我试图从我从 Eclipse 的 DDMS 中获取的 Android 应用程序的堆转储中找到一个字符串。我使用 SDK 的 hprof-conv 转换了文件。现在，如果我在 Eclipse MemoryAnalyzer 中打开文件，它会给我一个堆中的字符串列表，这很棒！我找到了我需要的东西。但是，我正在尝试编写一个脚本，该脚本将从堆转储中获取我正在寻找的字符串。我遇到的问题是，当我在转储上运行字符串或通过十六进制编辑器运行转储时，我没有看到这个字符串。我不明白 MemoryAnalyzer 从哪里得到我正在寻找的字符串。有人知道这里发生了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:53:53.213

Java 在内部对字符串使用[UTF-16](http://en.wikipedia.org/wiki/UTF-16)字符编码。因此，如果在转储上使用十六进制编辑器，您可能需要以该编码搜索您的搜索词。

# android - Android 浏览器处于无限加载状态 - 我可以看到正在加载的内容吗？

> ID：16067206
> 
> 赞同：1
> 
> 时间：2013-04-17T18:13:51.727
> 
> 标签：android, debugging, remote-debugging, android-browser

有没有办法查看 Android 浏览器应用程序中加载的内容？我的应用程序无法在此浏览器中完成加载，所以我很想看看是什么原因造成的。

# asp.net-mvc-3 - Telerik ASP.NET MVC 在一个视图渲染中扩展多个图表

> ID：16067207
> 
> 赞同：2
> 
> 时间：2013-04-17T18:13:59.307
> 
> 标签：asp.net-mvc-3, telerik-mvc

我正在使用 ASP.NET MVC3 并尝试创建一个包含 3 个 Telerik 图表和一个日历的视图。1个图表是饼图，1个是折线图，1个是面积图。

一切都在第一次完美加载，但是当您重新加载页面时，每个图表只加载每个图表的一部分。它们都没有在重新加载时完全呈现。

# jquery - 使用jquery在页面加载上设置目标选项卡？

> ID：16067212
> 
> 赞同：1
> 
> 时间：2013-04-17T18:14:19.923
> 
> 标签：jquery, tabs

我试图弄清楚如何在页面加载时设置目标选项卡，以便第一个选项卡始终处于打开状态！我见过类似的解决方案在我的情况下不起作用。

-选项卡的大小都不同，所以我无法做任何涉及位置的事情：绝对 -我无法将#c1 添加到将它们带到页面的链接中。

[http://buildmyled-sandbox.mybigcommerce.com/12-000k-reef-spectrum-fixture/#c1](http://buildmyled-sandbox.mybigcommerce.com/12-000k-reef-spectrum-fixture/#c1)

在这个例子中，我每次都需要将“#c1”添加到 URL 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:18:39.440

您可以像这样将点击事件发送到所需的选项卡：

```
$(".tabs-nav a").first().click() 
```

根据需要修改选择器 ( `.tabs-nav a`) 以定位所需的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:17:24.087

您可以使用以下方法将焦点集中在元素上：

```
$(window).scrollTop($('#c1').position().top); 
```

# python - 在使用 mpi4py 的并行环境中进行第一次迭代后，在 for 循环中使用 Popen 的系统调用失败

> ID：16067220
> 
> 赞同：1
> 
> 时间：2013-04-17T18:14:42.967
> 
> 标签：python, python-2.7, subprocess, mpi, hpc

下面的一个简单脚本将显示 Popen 在循环中仅发送“ECHO”的最简单情况下仅在第一次迭代中有效（在具有 RHEL 5 的 IBM iDataplex x86 系统上运行）。第一次迭代它可以毫无问题地多次调用 Popen，但之后只有 4 个进程可以访问 Popen。因此，如果有一个调用需要将信息传递给所有进程（例如，allgather 所以需要一个屏障），那么除了 4 个进程之外的所有进程都没有传递任何内容，因为 stdo=''（空字符串）。如果使用 while 循环，则它永远不会退出，因为除了 4 个进程之外的所有进程都陷入了循环。这是该系统特有的还是这里的任何人都知道这是怎么回事？

如果在 4 个或更少的进程上运行，它完全可以正常工作。

```
from mpi4py import MPI
from subprocess import Popen, PIPE

comm = MPI.COMM_WORLD
rank = comm.Get_rank()
num_proc = comm.Get_size()
if rank == 0:
    start_time = MPI.Wtime()
for i in range(10):
    stdo = ''
    cmd = ['echo','HELLO']
    # while stdo == '':
    a = Popen(cmd, shell=False, stdout=PIPE, stdin=PIPE)
    stdo, stder = a.communicate("Input")
    a.wait()
    if stdo != "HELLO\n":
        print "Rank", rank, "ITER: ", i, "OUT: ", stdo
    # comm.barrier()
    # r = comm.allgather(stdo) #Causes infinite loop because any number above 4 processors after the first iteration will never exit the while loop
#if any collective operation or barrier is removed, it will work properly
if rank == 0:
    print "Num Proc is", num_proc, "Time is",  MPI.Wtime() - start_time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T15:44:40.150

Popen 的第一个参数（传递给 bash 的参数）必须是一个字符串。我也总是做 shell=True。如果您是编写脚本的人，那么您知道代码应该做什么，因此运行起来是安全的。

```
cmd = 'echo HELLO'
a = Popen(cmd, shell=True, stdout=PIPE, stdin=PIPE) 
```

# javascript - 命名空间 AMD 模块的最佳方式是什么？

> ID：16067225
> 
> 赞同：0
> 
> 时间：2013-04-17T18:15:12.037
> 
> 标签：javascript, requirejs, modernizr, amd, js-amd

Modernizr 是使用 AMD 定义编写的，这很好，因为这是我在当前项目中使用的，并且可以在需要时引入 Modernizr 依赖项。问题是，Modernizr 模块都需要一个平面文件夹层次结构，但我已经将文件移动到我的项目中，如下所示：lib > modernizr

更改 Modernizr 定义中依赖项路径的最佳方法是什么？这是我可以用 RequireJS 处理的吗？我显然可以手动完成，但我希望将来能够轻松地引入 Modernizr 更新，而不必每次都手动更新路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:57:08.773

我认为这不是一个好主意。从[文档](http://modernizr.com/docs/#installing)：

> 我们建议将 Modernizr 放在头部的原因有两个：HTML5 Shiv（在 IE 中启用 HTML5 元素）必须在`<body>`.防止FOUC。

[无论如何，您可以在requirejs.config](http://requirejs.org/docs/api.html#config)中指定完整路径：

```
// in your main
require.config({
    paths: {
        "modernizr": "lib/modernizr"
    }
});

//in your module
define(["modernizr"], function (modernizr) {
}); 
```

# windows - 在 Windows 上使用 nginx/Lighttpd/mono/fastcgi 的 ASP.Net

> ID：16067226
> 
> 赞同：2
> 
> 时间：2013-04-17T18:15:17.593
> 
> 标签：windows, nginx, mono, fastcgi, lighttpd

为了满足 ASP.Net 应用程序的基本要求，我需要在 Windows 上运行 Web 服务器（nginx 或 lighttpd）。我正在尝试将 mono 2.10 中的 fastcgi-mono-server4 用于 windows，但没有任何运气。我的 ASP.Net 应用程序只是一个带有要初始化的最小 global.asax 的 httpmodule，而且我使用自己的 mvc 框架，所以我需要的 asp 真的太少了。我不提供任何特定的文件扩展名，所有请求都必须发送到模块处理程序。我正在尝试使用 Web 上的所有设置配置两台服务器，并使用所有可能的命令行配置 fastcgi-mono-server4，并且 fastcgi-mono-server4 似乎也可以工作，并且两个 Web 服务器也可以，但在最好的情况下我只是出现“没有为...定义应用程序”页面或 500 服务器错误，fastcgi 有时会显示“

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:18:49.400

自从我使用 nginx 托管我的 ASP.NET 应用程序以来已经有一段时间了，但回顾我的 nginx.conf 有一些不同之处。首先，我曾经将每个请求（无论扩展名如何）重定向到 fastcgi 套接字。另外，我有一个`root`指向我的 Web 应用程序根目录的指令。这是`location`我的 nginx.conf 的一部分：

```
 location / {
        root /home/whatever/Website/;
        fastcgi_pass 127.0.0.1:9000;
        include /etc/nginx/fastcgi_params;
    } 
```

我真的不知道发送到 fastcgi 套接字的内容，但您可以`root`尝试该指令，以及将所有内容重定向到它（有点像集成管道模型）。
另外，我的 fastcgi_params 的前两行以防万一：

```
fastcgi_param  PATH_INFO      "";
fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name; 
```

我将它与 Mono 2.10.8 一起使用，我的 ASP.NET MVC 3 网站运行良好。试试看，然后和我谈谈。

# scala - Scala 宏：构造匿名类

> ID：16067227
> 
> 赞同：3
> 
> 时间：2013-04-17T18:15:34.970
> 
> 标签：scala, macros, dsl

我对 Scala 宏相当陌生，并且正在尝试编写一个非常基本的 DSL。

我有以下 Scala 类：

```
abstract class SpecialFunction {
  def apply(): Unit
} 
```

和以下 Scala 宏：

```
def mImpl(c: Context)(bodyBlock: c.Expr[Unit]): c.Expr[X] =
  c.universe.reify {
    new X(new SpecialFunction {
      override def apply() {
        bodyBlock.splice
      }
    })
  }

def m(bodyBlock: Unit): X = macro mImpl 
```

到现在为止还挺好。例如，它允许我写：

```
def example = m {
  println("Hello, world")
} 
```

这编译为：

```
def example = new X(new SpecialFunction {
  override def apply() {
    println("Hello, world")
  }
}) 
```

但是这个公式不允许我在这样的“m 块”中有局部变量。例如，我*不能*写：

```
def example = m {
  val x = 7
  println(x.toString)
} 
```

在编译时我得到错误：

```
symbol value x does not exist in example 
```

但是，我想要实现的是：

```
def example = new X(new SpecialFunction {
  override def apply() {
    val x = 7
    println(x.toString)
  }
}) 
```

（我想我理解为什么会这样：子表达式在传递给宏之前被评估，因此对 x 的引用是无效的）。

所以我的问题是：我怎样才能使上述工作？（我只想将宏中定义的额外代码“复制粘贴”在“m 块”中的代码周围，就像在 C++ 宏中一样。）

任何帮助将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:24:34.933

您的输出表达式保留对旧`x`符号的引用，但它应该是对新符号的引用。`resetLocalAttrs`因此，您可以通过从[Context](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.macros.Context)应用来重置您打算重用的树中的所有垃圾引用。

怎么样...？

```
def mImpl(c: Context)(bodyBlock: c.Expr[Unit]): c.Expr[X] =
  c.universe.reify {
    new X(new SpecialFunction {
      override def apply() {
        c.Expr[Unit](c.resetLocalAttrs(bodyBlock.tree)).splice
      }
    })
  } 
```

在这个[问题](https://stackoverflow.com/q/11208790/1263978)中，您可以阅读 Scala Macros 专家的精彩解释。

# tomcat - 即时拉链有多贵？

> ID：16067228
> 
> 赞同：0
> 
> 时间：2013-04-17T18:15:36.557
> 
> 标签：tomcat, zip

我在服务器上有一个必须下载到移动设备的文件存储库。服务器上的文件下载到设备后可以在服务器上更新；并且在随后的连接中，只需将修改后的文件下载到设备中。

我的选择是提前准备拉链或在飞行中准备它们。为了提前创建它们，我必须为所有以前版本的存储库提前创建一个 zip。为了即时准备，我可以找出需要下载的文件并即时压缩它们。

我认为这个决定取决于即时准备这样一个拉链的成本。

我的问题是：

*   即时创建拉链有多贵？可能有成千上万的移动设备；应该可以缓存准备好的 zip 文件，但我还想考虑为每个连接单独压缩的成本。这样做的目的是避免在服务器上存储历史数据

*   除了即时压缩的成本外，我还应该考虑其他参数吗？

服务器在嵌入式 tomcat 进程中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:30:31.333

网络操作期间的动态压缩（用于 SSH/SFTP、SSL/TLS、HTTP(S) 等）不仅不会降低传输速度，还会显着提高传输速度！因此，只要有可能，就欢迎压缩。

现在，您可以压缩发送到通道的数据，也可以压缩文件并发送压缩文件。发送压缩 ZIP 的问题在于，在大多数情况下（流式 ZIP 压缩库很少见，但 IIRC 确实存在）您无法在打包时流式传输 ZIP 文件——您需要等待打包完成才能响应请求。如果档案很大（几十兆字节或更大），这可能会产生问题。好处是您可以将文件打包一次并将其保存在缓存中一段时间​​（例如一周或一个月）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:12:13.010

我建议您看一下[Google 演示文稿](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//people/jeff/stanford-295-talk.pdf)中的第 13 张幻灯片。

他们使用[zippy](https://code.google.com/p/snappy/)，这是一种定制的 zip 实现，但要点很明确：压缩比发送数据便宜得多。是的，您仍然需要发送文件，因此小文件节省的费用较小，但大多数情况下压缩都会得到回报。

# excel - Excel，VBA，我需要将 rng 发送到 lastcolumn。目前 MsgBox 将显示它

> ID：16067239
> 
> 赞同：0
> 
> 时间：2013-04-17T18:16:15.303
> 
> 标签：excel, vba, explode, csv

基本上我正在使用 TextToColumns 函数来分离在同一单元格中用分号分隔的数据。问题是有 2 列数据需要完成此功能，我必须在不覆盖的情况下插入数据。

（轻松一点，第一次使用 VBA 和 excel）这是我目前拥有的：

```
Sub Button1_Click()
    Dim rng As Range
    Dim sh As Worksheet

    Set sh = Worksheets("Sheet1")
    With sh

        Set rng = .[Q1]
        Set rng = .Range(rng, .Cells(.Rows.Count, rng.Column).End(xlUp))

        num = Application.WorksheetFunction.Max(Columns("P"))

        rng.Offset(0, 1).Resize(1, num).EntireColumn.Insert

        rng.TextToColumns Destination:=rng, DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=True, Comma:=False, Space:=False, Other:=False, _
        FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1)), TrailingMinusNumbers:=True
    End With

    Set sh2 = Worksheets("Sheet1")
    With sh2
        num2 = Application.WorksheetFunction.Max(Columns("P"))

        Dim lastColumn As Integer

        lastColumn = ActiveSheet.UsedRange.Column - 1 + ActiveSheet.UsedRange.Columns.Count

        MsgBox Replace(Cells(1, lastColumn).Address(False, False), "1", "")

        MsgBox lastColumn

        Set rng = .[W1]
        Set rng = .Range(rng, .Cells(.Rows.Count, rng.Column).End(xlUp))

        rng.TextToColumns Destination:=rng, DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=True, Comma:=False, Space:=False, Other:=False, _
        FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1)), TrailingMinusNumbers:=True
    End With
End Sub 
```

好的，所以我要修复的是在第二部分中将 rng 手动设置为 W1。rng 需要是下一个空列。所以使用 MsgBox 的 lastColumn 确实返回列“W”，但我无法将其设置为 rng（类型不匹配）。哦，num变量设置为我需要插入的列数。我的数据如下所示：

计数 | 带有 ; 的列 数据需要分离 | 带有 ; 的列 数据需要分离

5 | 分号隔开的5组数据| 不在乎，因为这是工作表的结尾

有没有更简单的方法来做到这一点？我什至接近吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:34:28.507

...如果我正确理解您的问题，最简单的解决方案...您为什么不创建一个等于 的第三列`Column1 & ";" & Column2`，然后在该单列上执行文本到列？

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:16:58.203

假设我正确理解了您的设置，以下代码应该可以工作。

如果从右到左处理数据列，则不必担心插入列时地址引用的变化。这意味着您可以使用单个插入/转换代码块，迭代两个数据地址引用，我假设它们是 `Q1`and `R1`。

另请注意，我向`TextToColumns`目标添加了一个偏移量，以避免覆盖原始数据。

```
Option Explicit

Sub myTextToColumns()
   Dim sh As Worksheet
   Dim rng As Range
   Dim num As Long
   Dim arr As Variant
   Dim i As Long  
   Set sh = Worksheets("Sheet1")
   arr = Array("R1", "Q1")
   num = Application.WorksheetFunction.Max(Columns("P"))
   With sh
       For i = LBound(arr) To UBound(arr)
           Set rng = .Range(arr(i))
           Set rng = .Range(rng, .Cells(.Rows.Count, rng.Column).End(xlUp))
           rng.Offset(0, 1).Resize(1, num).EntireColumn.Insert
           rng.TextToColumns Destination:=rng.Offset(0, 1), DataType:=xlDelimited, _
              TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=False, _
              Semicolon:=True, Comma:=False, Space:=False, Other:=False, _
              FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1)), TrailingMinusNumbers:=True
       Next
   End With
End Sub 
```

# sql - 从单独的表创建项目组

> ID：16067240
> 
> 赞同：1
> 
> 时间：2013-04-17T18:16:17.140
> 
> 标签：sql, ruby-on-rails, rails-activerecord

我有多个模型（事件、家务、账单和列表），每个模型都有自己的表格。我希望能够将这些实例中的任何一个组合在一起，例如将一个事件与要为其购买的物品列表和成本账单组合在一起。

我在想每个表都可以有一个组 ID，我可以通过合并每个表中的 group_id 等于项目 group_id 的记录来获取组中的其他项目。

```
group = Events.find_by_group_id(self.group_id).concat(Bills.find_by_group_id(self.group_id)) ... 
```

但这似乎是一种不好的方法。

我想到的另一种方法是在两个项目之间使用多态关系

```
tag
item_1_id | item_1_type | item_2_id | item_2_type
----------+-------------+-----------+------------ 
```

但在上面的示例中（一组三个不同的项目）将需要六条记录，每对之间有两条，以便每个项目知道该组中的所有其他项目。

有没有办法通过连接来做到这一点，我应该重新设计一些表吗？

# html - html5画布中的剪辑方法

> ID：16067244
> 
> 赞同：2
> 
> 时间：2013-04-17T18:16:28.350
> 
> 标签：html, canvas, clip

我需要在画布上放置一个图像，然后使用鼠标在画布上绘制一个随机形状，剪切形状内部的区域并从剪切区域创建另一个图像，以便我可以对其应用 som 变换。

例如，加载一张照片，用鼠标从图片中选择一个人，然后可以移动这个人，或者增加它的大小。

我在将剪辑区域内的图像转换为图像的步骤中遇到问题。

到目前为止，这是我的代码[http://jsfiddle.net/PB3rR/2/](http://jsfiddle.net/PB3rR/2/)

```
<!doctype>
<html>
<head>

    <script type="text/javascript">
        function mostrarImagenInicial() {
        var codigo = document.getElementById("codigobase").value;
        document.getElementById("miCanvas").style.backgroundImage = "url("+codigo+")";

        }
        function mostrarImagen() {
            var codigo = document.getElementById("codigobase").value;
            var elementoCanvas = document.getElementById("miCanvas");
            var cxt = elementoCanvas.getContext("2d");
            var img = new Image();
            img.src = codigo;
            img.onload = function() {
                cxt.drawImage(img, 0, 0, 150, 94);
            }

        }
        var pizarra_canvas;
        var pizarra_context;
        var top = 0;
        var left = 0;
        var right = 0;
        var bottom = 0;
        var posx;
        var posy;
        var imageData;

        /*function seleccionar(){
            var posx = e.clientX-pizarra_canvas.offsetLeft;
            var posy = e.clientY-pizarra_canvas.offsetTop;
            var imgData=pizarra_context.getImageData(posx,posy);
            alert(posx);
        }*/

    function empezar(){
        pizarra_canvas = document.getElementById("miCanvas");
        pizarra_context = pizarra_canvas.getContext("2d");
        pizarra_context.strokeStyle = "#000";
        pizarra_canvas.addEventListener("mousedown",empezarPintar,false);
        pizarra_canvas.addEventListener("mouseup",terminarPintar,false);
        //seleccionar();
    }

    function empezarPintar(e){
        pizarra_context.beginPath();
        pizarra_context.moveTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-pizarra_canvas.offsetTop);
        pizarra_canvas.addEventListener("mousemove",pintar,false);
    }

    function terminarPintar(e) {
        pizarra_context.closePath();
        pizarra_context.stroke();
        pizarra_context.clip();
        mostrarImagen();
        pizarra_canvas.removeEventListener("mousemove",pintar,false);
        //alert(posx+ " " +posy);
        document.getElementById("miCanvas").style.backgroundImage = "url()";
    }

    function pintar(e) {
    pizarra_context.lineTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-pizarra_canvas.offsetTop);
    pizarra_context.stroke();
    }

    </script>
</head>
<body onload="empezar();">

    <input type="text" placeholder="aqui va el codigo en base 64" name="codigobase" id="codigobase" value="data:image/gif;base64,R0lGODlhCwALAIAAAAAA3pn/ZiH5BAEAAAEALAAAAAALAAsAAAIUhA+hkcuO4lmNVindo7qyrIXiGBYAOw=="/>
    <input type="submit" value="Mostrar imagen" onClick="mostrarImagenInicial()" /> <br>
    <canvas id="miCanvas" width="500px" height="200px" style="border:1px solid black;background-repeat:no-repeat;background-size:150px 94px;"></canvas>

</html> 
```

# verilog - Verilog 分配第 n 次迭代

> ID：16067245
> 
> 赞同：0
> 
> 时间：2013-04-17T18:16:28.853
> 
> 标签：verilog

我有以下代码：

```
always @ (clk) begin 
  for (1=0,i<150, i++) begin
    abc[i] = xyz[i];
  end
end 
```

问题：如果我想获得`abc[8]`（使用分配语句的第 8 次迭代集）的值，我该怎么做？

我确实喜欢下面：

```
reg [31:0] abc;
wire [31:0] jkl;

always @ (clk) begin 
  for (1=0,i<150, i++) begin
    abc[i] = xyz[i];
  end
end 

assign jkl = abc[8];

$display ("value is 0x%x\n", jkl); 
```

我有一个错误，你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:56:10.293

似乎您误解了 for 循环在 Verilog 中的工作方式。在 Verilog 中，您正在定义始终并行运行的硬件。for 循环只是表达某些东西的便捷方式。您不应该将其视为迭代。

你的表达的意思是这样的：

> > **在每个时钟周期**`abc[i]`为从0 到 149`xyz[i]`的所有值赋值`i`

 **如果你真的想迭代，你需要创建一个在每个周期递增的计数器，并使用它而不是 for 循环。

* * *

现在，由于其他一些错误，您可能会收到错误消息：

1.  您不能将 a`$display`放在顺序代码块之外。也就是说，它需要在`always`or`forever`块或类似的内部。

2.  您正在分配`jkl`（一个 32 位值），`abc[8]`其中一个位

3.  您在 for 循环中分配`abc[0]`给，但只有 32 位宽`abc[149]``abc`**

# unix - ClearCase 命令不会在脚本中运行

> ID：16067246
> 
> 赞同：1
> 
> 时间：2013-04-17T18:16:28.940
> 
> 标签：unix, clearcase, ksh

我正在尝试通过 ksh 脚本自动化 ClearCase 签入。有一个奇怪的问题，以下命令在它是自动化脚本的一部分时不会运行，但如果我将它粘贴到命令行中运行良好。

脚本片段：

```
for dir in `cat $DIRS`
do
    RUNCMD="cleartool find <<vob_directory>>/$dir -type f -exec 'cleartool co -nc \$CLEARCASE_PN'"
    print $RUNCMD
    $RUNCMD
done
exit 1 
```

产生以下命令

```
cleartool find <<vob_directory>> -type f -exec 'cleartool co -nc $CLEARCASE_PN' 
```

这是错误

```
cleartool: Error: Extra arguments: "co"
Usage: find { pname ... [-depth | -nrecurse | -directory]
        | [pname ...] -all [-visible | -nvisible]
        | -avobs [-visible | -nvisible]
        }
        [-name 'pattern']
        [-cview]
        [-user login-name]
        [-group group-name]
        [-type {f|d|l}...]
        [-follow]
        [-kind object-kind]
        [-nxname]
        [-element query]
        [-branch query]
        [-version query]
        {-print | -exec command-invocation | -ok command-invocation} ... 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:55:28.070

`ksh`虽然（我的第一个测试是在）`bash`，您推荐的[`eval`解决方案](https://stackoverflow.com/a/16070962/6309)更常见（[`bash eval`有点不同](https://stackoverflow.com/a/14687868/6309)）。

您可以在这个[clearcase multisite script](http://www-01.ibm.com/support/docview.wss?uid=swg1IC52682)中看到它。
如果您需要将结果存储在变量中进行处理，您可以按照[以下问题](https://stackoverflow.com/a/2760797/6309)进行操作：

```
for dir in `cat $DIRS`
do
    RUNCMD="cleartool find <<vob_directory>>/$dir -type f -exec 'cleartool co -nc \$CLEARCASE_PN'"
    print $RUNCMD
    eval "res=\$( $RUNCMD )"
    print $res
done
exit 1 
```

* * *

原答案：

您可能需要添加[一些引号](https://stackoverflow.com/questions/11429183/clearcase-xpn-not-parsed-as-variable-in-clearcase-command/11429466#11429466)以防止 shell 过早扩展您的命令，如下[例所示](https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000014227571)：

```
RUNCMD="cleartool find <<vob_directory>>/$dir -type f -exec "'cleartool co -nc \$CLEARCASE_PN'"" 
```

甚至用双引号来改变单引号（如在[这个线程](https://www.ibm.com/developerworks/community/forums/html/topic?id=77777777-0000-0000-0000-000013985730)中）

```
RUNCMD="cleartool find <<vob_directory>>/$dir -type f -exec "cleartool co -nc \"\$CLEARCASE_PN\"" 
```

（注意`\"`周围的 ' '`\$CLEARCASE_PN`以考虑到路径名中带有空格）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:55:56.913

我无法解释为什么会这样，但一位同事向我透露了`eval`. 原来这行得通。

```
for dir in `cat $DIRS`
do
    RUNCMD="cleartool find <<vob_directory>>/$dir -type f -exec 'cleartool co -nc \$CLEARCASE_PN'"
    print $RUNCMD
    eval $RUNCMD
done
exit 1 
```

# automation - 在自动化测试 UI 中匹配两个字符串 - iOS

> ID：16067249
> 
> 赞同：0
> 
> 时间：2013-04-17T18:16:35.580
> 
> 标签：automation, instruments, ui-automation, ios-ui-automation

我正在为我的 iPad 应用程序使用仪器中的自动化工具编写自动化测试脚本。在登录屏幕中，当用户在未输入任何信息的情况下点击登录按钮时，我会显示一条错误消息。此错误消息显示在最初不可见的标签上，当必须显示错误消息时，将其变为可见并在该标签中显示错误。我想检查该标签中显示的错误消息是否与我期望收到的相同。我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T09:59:05.943

首先编写脚本，使错误消息出现在屏幕上，然后编写 `target.logElementTree();`
这样您就可以看到它的元素层次结构，然后将其与预期的错误消息进行比较，例如
`if (mainWindow.staticTexts()[0].name() == "expected_alert_message") {log_Pass} else {log_Fail}`

# ajax - 在ajax请求中获取0状态

> ID：16067254
> 
> 赞同：0
> 
> 时间：2013-04-17T18:16:45.190
> 
> 标签：ajax, status

我是ajax的新手。我刚刚开始学习它。下面是我的第一个 ajax 脚本。在教程中，相同的脚本显示状态 200，但当我在浏览器上运行它时，状态为 0。此外，输出仅在 Firefox、chrome 和 IE 上显示，没有显示输出

```
window.onload=onload_ajax;
var xhr=false;
function onload_ajax() 
{
if(XMLHttpRequest())
    xhr= new XMLHttpRequest();
else if(window.ActiveXObject){
    xhr= new ActiveXObject("Microsoft.XMLHTTP");
    }
if(xhr){
    xhr.onreadystatechange=showState;
    xhr.open("GET","colors.xml",true);
    xhr.send(null);
    }
    else document.getElementById('updateArea').innerHTML="Ahh... Some Error..!!";

}

function showState(){

    var curmsg= document.getElementById('updateArea').innerHTML;
    document.getElementById('updateArea').innerHTML=curmsg+"<p> The current
     Requestst state is "+ xhr.readyState + " and the status is "+ 
     xhr.status + " . </p>"

    } 
```

火狐上的输出

```
当前请求状态为 1 ，状态为 0 。

当前请求状态为 1 ，状态为 0 。

当前请求状态为 2 ，状态为 0 。

当前请求状态为 3 ，状态为 0 。

当前请求状态为 4 ，状态为 0 。
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T15:42:18.683

尝试将浏览器升级到最新版本，然后删除`()`：

```
if(XMLHttpRequest) 
```

# ruby-on-rails - MHartl 教程错误：NilClass:Class 的未定义方法“model_name”

> ID：16067257
> 
> 赞同：0
> 
> 时间：2013-04-17T18:16:58.487
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

因此，我正在学习 MHartl Rails 教程，到目前为止，它一直很棒，尽管我刚刚遇到了第一个错误，并且找不到有效的解决方案。

**错误：**

```
 NoMethodError in Users#new

Showing /Users/myname/Sites/rails_projects_updated/first_app/app/views/users/new.html.erb where line #6 raised:

undefined method `model_name' for NilClass:Class

Extracted source (around line #6):

3: 
4: <div class="row">
5:   <div class="span6 offset3">
6:     <%= form_for(@user) do |f| %>
7: 
8:       <%= f.label :name %>
9:       <%= f.text_field :name %> 
```

**新的.html.erb：**

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirmation" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

**和用户控制器**

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

   def create
      @user = User.new(params[:user])
      if @user.save
        # Handle a successful save.
      else
        render 'new'
      end
    end
  end 
```

任何帮助，将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:22:44.360

当然，您的控制器中缺少以下方法：

```
 def new
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end 
```

正在发生的事情是，当表单响应创建操作并点击`render 'new'`您在此问题中没有的操作时。因此，当`new`呈现操作时，它会执行`@user = User.new`这将使您能够创建新用户。

# kendo-ui - Kendo UI 选项卡 - 每次单击时重新加载选项卡

> ID：16067258
> 
> 赞同：1
> 
> 时间：2013-04-17T18:17:02.597
> 
> 标签：kendo-ui

我有一个 kendo UI 选项卡，每个选项卡都绑定到一个 Ajax 函数。我希望我的选项卡在每次更改选项卡时触发 ajax 调用以获取新内容，而不仅仅是第一次。有没有配置或推荐的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T20:28:45.170

您好，这可以通过TabStrip的**reload方法轻松实现。**

```
var ts = $(tabstrip).data().kendoTabStrip
ts.tabGroup.on('click','li',function(e){        
    ts.reload($(this));
}) 
```

# websocket - WAN 和 LAN 服务器之间的持久连接

> ID：16067260
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:17:08.420
> 
> 标签：websocket, long-polling, lan, wan

我们需要在 WAN 和 LAN 上的服务器之间建立持久连接。基本上，多个局域网服务器必须在互联网上注册一个服务器并始终保持开放连接，因为我们不能要求拥有局域网服务器的客户端设置端口转发，并且可能存在防火墙问题。

我在这里有什么选择？我在想，要么是 Websockets，要么是 LAN 上的服务器在 Internet 上长轮询我们的服务器。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T16:52:51.630

您的选择是 - 考虑到您想避免代理和防火墙的问题 - 可能：

*   使用 websocket，端口 80 或 443
*   使用长轮询（如果您需要双向通信，这不是真正持久的！）端口 80 或 443
*   使用端口 80 将任何数据封装到 http 请求中
*   使用带有 ssl 加密的端口 443，并在协议级别上做任何你想做的事情。通常，只要您将此端口与 ssl 加密一起使用，即使使用一些奇怪的自定义协议，您也不会遇到任何问题，因为防火墙和代理通常（尝试）在感知到他们认为是 https 时检查您正在做的事情.

就我所了解的情况而言，其他一切都可能超出您的范围，但是您应该能够使用端口 443 和一些用于持久连接的协议来做您需要做的事情（使用 websockets 是可能的，但您会遇到其他问题问题真的很快（比如缺少 ping/pong 实现）然后如果你不自定义构建你的代码，这可能会使首先使用 websockets 毫无意义）

# c# - 使用当前时间将字符串（Textbox.text）转换为 DateTime

> ID：16067261
> 
> 赞同：2
> 
> 时间：2013-04-17T18:17:11.877
> 
> 标签：c#, .net

我正在尝试将此例如 12/31/2012 格式转换为 DateTime，但是当我运行此代码时，转换有效，但时间不是当前的。我希望转换为 DateTime 但使用当前时间：

示例：当我运行以下代码并输入日期时：12/31/2012

我得到： 2012 年 12 月 31 日上午 12:00:00

我不确定如何获取当前时间而不是 12:00:00 AM

```
 Console.Write("Enter Current Date: ");

    string strMyDate = Console.ReadLine();

    DateTime dt = DateTime.Parse(strMyDate);

    Console.WriteLine(dt);

    Console.ReadKey(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T18:19:30.260

`DateTime.Now`您可以使用该属性仅提取时间`TimeOfDay`并将其添加到您手动输入的日期，例如

```
var time = dt.Add(DateTime.Now.TimeOfDay); 
```

作为附加说明，我会改用*DateTime.TryParse*，因为用户输入的值可能不是可解析的日期，例如

```
DateTime dt;
var isDate = DateTime.TryParse(strMyDate, out dt);
if(isDate)
{
   var time = dt.Add(DateTime.Now.TimeOfDay);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:19:36.483

`DateTime.Now`会给你当前时间。然后将第一个值的日期部分与时间部分相结合`Now`以获得结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:19:40.147

将此添加到您的字符串中：

```
string strMyDate = Console.ReadLine();
strMyDate = string.Format("{0} {1}",
    strMyDate,
    DateTime.Now.ToShortTimeString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T18:20:44.390

还没有真正编译这个，但这样的东西应该可以工作：

```
DateTime dt = DateTime.Parse("12/31/2012 " + DatTime.Now.TimeOfDay.ToString()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T18:21:33.867

您可以从 DateTime.Now 的小时、分钟和秒部分建立时间；

```
string strMyDate = "12/31/2012";
DateTime dt = DateTime.Parse(strMyDate);
DateTime current = DateTime.Now;
dt = dt.AddHours(current.Hour).AddMinutes(current.Minute).AddSeconds(current.Second);
Console.WriteLine(dt); 
```

# ruby-on-rails - 如何覆盖宝石的常量？(Ruby on Rails)

> ID：16067263
> 
> 赞同：4
> 
> 时间：2013-04-17T18:17:38.753
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, overriding

我正在我的项目中使用[Twitter-text](https://github.com/twitter/twitter-text-rb) gem，但我遇到了一些*错误*。我需要覆盖该 gem 的一个常量。

我在 StackOverflow 上看到一些关于方法覆盖的问题，这些问题对我有帮助，但我仍然遇到问题。我创建了一个名为`twitter-text.rb`in的文件`/config/initializers/`并编写了以下代码：

```
module Twitter
  class Regex
    HASHTAG_CHARACTERS = "/[[^ ]_#{LATIN_ACCENTS}]/io"
  end
end 
```

（这个正则表达式允许我用除空格之外的任何字符编写主题标签）。

我也在尝试覆盖一个方法，但它似乎也不起作用。按照我的代码（在同一个文件上）：

```
module Twitter
  module Autolink
    def auto_link_hashtags(text, options = {})  # :yields: hashtag_text
      text = text.downcase
      options = options.dup
      (...)
    end
  end
end 
```

我刚刚在此方法中添加了以下行：`text = text.downcase`. 那么，我能做些什么来覆盖这个方法和属性/常量呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T18:50:41.287

您可以尝试先删除常量，然后重新定义它：

```
module Twitter
  class Regex
    remove_const(:HASHTAG_CHARACTERS) if (defined?(HASHTAG_CHARACTERS))

    HASHTAG_CHARACTERS = "/[[^ ]_#{LATIN_ACCENTS}]/io"
  end
end 
```

不过，这是超级丑陋的[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch)领域。

# python - 创建字典后可以重新排列键吗？

> ID：16067264
> 
> 赞同：0
> 
> 时间：2013-04-17T18:17:40.990
> 
> 标签：python, dictionary

我很好奇在创建字典后是否可以重新排列键。

我想首先枚举每个键后面的值的总数，然后打乱顺序，以便它们可以从最大到最小打印出来。

说：

```
x= {'ONE': ['foo'], 'THREE': ['up', 'side', 'down'], 'TWO': ['hot', 'mess']} 
```

我可以让它看起来像，或者至少按三、二、一的顺序打印出来吗？

我可以结合`.get`某种`len()`方式来实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T18:18:46.517

字典键在 Python 中没有排序，因此无法重新排序。

但是，如果您确实想按列表大小的顺序将其打印出来，则可以将其显示为元组列表：

```
sorted(x.items(), key=lambda t: -len(t[1]))
# [('THREE', ['up', 'side', 'down']), ('TWO', ['hot', 'mess']), ('ONE', ['foo'])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:27:23.880

一种没有有序字典的方法：

```
x= {'ONE': ['foo'], 'THREE': ['up', 'side', 'down'], 'TWO': ['hot', 'mess']}
xkeys = sorted(x, key=lambda y: len(x[y])
for key in xkeys:
    print(x[key]) 
```

它不会重新排序您的 dict，但结果相同。但正如其他人所说，字典在 python 中的定义是无序的。Ordered dict 允许您将元素移动到最后，也可以在创建时对其进行排序。这里的文档：http: [//docs.python.org/dev/library/collections#collections.OrderedDict](http://docs.python.org/dev/library/collections#collections.OrderedDict) 所以你也可以使用那里找到的排序方法。

```
OrderedDict(sorted(d.items(), key=lambda t: len(t[1]))) 
```

# vb.net - VB.NET LDAP 身份验证错误：“服务器无法运行”

> ID：16067266
> 
> 赞同：1
> 
> 时间：2013-04-17T18:17:46.920
> 
> 标签：vb.net, active-directory, ldap

我们有一个 VB.NET 应用程序，它使用 LDAP 通过 Active Directory 对用户进行身份验证。

以前从未遇到过问题，但今天下午我的同事应用了 Windows 更新并重新启动了我们的域控制器（和 AD 服务器），现在每当有人尝试登录并使用该应用程序时，他们都会收到以下错误：

> 错误号：-2147016646
> 
> 错误描述：服务器无法运行。

使用以下代码进行身份验证：

```
Dim adEntry As New System.DirectoryServices.DirectoryEntry("LDAP://" & gsDomainName, sUserName, sPassword)
Dim adSearcher As New System.DirectoryServices.DirectorySearcher(adEntry)

adSearcher.SearchScope = DirectoryServices.SearchScope.OneLevel

Try
    Dim adResults As System.DirectoryServices.SearchResult = adSearcher.FindOne
    ... 
```

`adSearcher.FindOne`它在一段代码上失败了。

即时窗口提供更详细的错误信息

> System.DirectoryServices.dll 中出现“System.Runtime.InteropServices.COMException”类型的第一次机会异常

有人有想法么？

我尝试过的事情：

1.  刷新域控制器上的 DNS

2.  重新启动 DHCP 服务器

3.  重新启动 DNS 服务。

谢谢！

# php - 在 PHP 中，使用“LIKE”从 MySQL 搜索结果中获取整个单词

> ID：16067272
> 
> 赞同：4
> 
> 时间：2013-04-17T18:18:03.390
> 
> 标签：php, mysql, regex, search

我想要的是：假设我使用这样的查询搜索“goo”：`...WHERE message LIKE '%goo%'`它返回了一个结果，例如`I love Google to make my searches, but I'm starting to worry about privacy`，因此它将显示为结果，因为该词`Google`符合我的搜索条件。

我如何根据我的搜索字符串将整个`Google`结果保存在一个变量中？我需要这个，因为我正在使用一个正则表达式，它将突出显示搜索的单词并在此结果之前和之后显示内容，但它仅在搜索的单词与结果中的单词完全匹配时才有效，而且它的结构错误，所以它赢了不适用于没有被空格包围的单词。

这是正则表达式代码

```
<?=preg_replace('/^.*?\s(.{0,'.$size.'})(\b'.$_GET['s'].'\b)(.{0,'.$size.'})\s.*?$/',
            '...$1<strong>$2</strong>$3...',$message);?> 
```

我想要的是将此 $_GET['s'] 更改为我的变量，该变量将包含在我的查询字符串中找到的整个单词。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:27:19.290

我敢打赌，更改正则表达式以检查包含该术语的任何单词会更容易，那么：

```
<?=preg_replace('/^.*?(.{0,'.$size.'})(\b\S*'.$_GET['s'].'\S*\b)(.{0,'.$size.'}).*?$/i',
            '...$1<strong>$2</strong>$3...',$message);?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T12:40:03.937

我阅读[了您对此的讨论，](https://chat.stackoverflow.com/rooms/28393/discussion-between-arraintxo-and-joao-paulo-apolinario-passos)并且可能需要更强大的实现。特别是考虑到您需要支持[变音符号](http://en.wikipedia.org/wiki/Diacritics)。使用单个正则表达式来解决所有问题可能看起来很诱人，但它越复杂就越难以维护或扩展。引用[杰米·扎温斯基的话](https://twitter.com/jwz)

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。

由于我在本地机器上遇到问题，因此我使用了更简单的实现，如果您的情况需要，请[`iconv`](http://php.net/manual/en/function.iconv.php)随意使用[更复杂或更强大的东西。](https://stackoverflow.com/questions/3542818/remove-accents-without-using-iconv/)

我在此解决方案中使用了一个简单的正则表达式来仅获取一组字母数字字符（也称为“单词”），正则表达式中读取的部分`\p{L}\p{M}`确保我们也[获得所有多字节字符](http://www.regular-expressions.info/unicode.html)。

您可以[在 IDEone 上看到此代码](http://ideone.com/GELaBn)。

```
<?php
function stripAccents($p_sSubject) {
    $sSubject = (string) $p_sSubject;

    $sSubject = str_replace('æ', 'ae', $sSubject);
    $sSubject = str_replace('Æ', 'AE', $sSubject);

    $sSubject = strtr(
          utf8_decode($sSubject)
        , utf8_decode('àáâãäåçèéêëìíîïñòóôõöøùúûüýÿÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÑÒÓÔÕÖØÙÚÛÜÝ')
        , 'aaaaaaceeeeiiiinoooooouuuuyyAAAAAACEEEEIIIINOOOOOOUUUUY'
    );

    return $sSubject;
}

function emphasiseWord($p_sSubject, $p_sSearchTerm){

    $aSubjects = preg_split('#([^a-z0-9\p{L}\p{M}]+)#iu', $p_sSubject, null, PREG_SPLIT_DELIM_CAPTURE);

    foreach($aSubjects as $t_iKey => $t_sSubject){
        $sSubject = stripAccents($t_sSubject);

        if(stripos($sSubject, $p_sSearchTerm) !== false || mb_stripos($t_sSubject, $p_sSearchTerm) !== false){
            $aSubjects[$t_iKey] = '<strong>' . $t_sSubject . '</strong>';
        }
    }

    $sSubject = implode('', $aSubjects);

    return $sSubject;
}

/////////////////////////////// Test \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
$aTest = array(
      'goo' => 'I love Google to make my searches, but I`m starting to worry about privacy.'
    , 'peo' => 'people, People, PEOPLE, peOple, people!, people., people?, "people, people" péo'
    , 'péo' => 'people, People, PEOPLE, peOple, people!, people., people?, "people, people" péo'
    , 'gen' => '"gente", "inteligente", "VAGENS", and "Gente" ...vocês da física que passam o dia protegendo...'
    , 'voce' => '...vocês da física que passam o dia protegendo...'
    , 'o' => 'Characters like æ,ø,å,Æ,Ø and Å are used in Denmark, Sweden and Norway'
    , 'ø' => 'Characters like æ,ø,å,Æ,Ø and Å are used in Denmark, Sweden and Norway'
    , 'ae' => 'Characters like æ,ø,å,Æ,Ø and Å are used in Denmark, Sweden and Norway'
    , 'Æ' => 'Characters like æ,ø,å,Æ,Ø and Å are used in Denmark, Sweden and Norway'
);

$sContent = '<dl>';
foreach($aTest as $t_sSearchTerm => $t_sSubject){
    $sContent .= '<dt>' . $t_sSearchTerm . '</dt><dd>' . emphasiseWord($t_sSubject, $t_sSearchTerm) .'</dd>';
}
$sContent .= '</dl>';

echo $sContent;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T17:10:26.853

我不明白匹配搜索字符串中其他所有内容的重要性，这还不够吗？

```
<?=preg_replace('/\b\S*'.$GET['s'].'\S*\b/i', '<strong>$0</strong>', $message);?> 
```

据我所知，您只是将匹配的单词放在 html 标记中，而不对字符串的其余部分做任何事情？

上面的正则表达式适用于您只匹配整个单词、捕获字符串中的多个匹配项（应该有多个匹配项）以及不区分大小写的情况。

# ruby-on-rails-3 - 如何使用 jQuery 的 .on 和 Rails ajax 链接？

> ID：16067275
> 
> 赞同：0
> 
> 时间：2013-04-17T18:18:12.587
> 
> 标签：ruby-on-rails-3, jquery, ujs

我在让 jQuery 的 .on 与我的 Rails ajax 链接一起工作时遇到了很多问题。

具体来说，我有这个链接：

```
<div id="item_7_tools" class="item_tools">        
    <a rel="nofollow" id="book_item_7" data-remote="true" data-method="post" class="book_link" href="bookings">Book this item</a>
</div> 
```

我已经修剪了 HTML 中的一些文本，但足以说明这一点，并且我的控制器响应工作正常。我单击“预订此项目”，它转到控制器，控制器发挥其魔力，并将我的部分发回替换该 div 的内容。

所以我现在尝试在加载工作时用 ajax 微调器替换内容，这就是它的梨形。

我正在尝试最初的一堆 jQuery 代码，以确保我的 javascript 工作正常：

```
$('div.item_tools')
    .on('click', 'a', function() {
        console.log("clicky click")
    })
    .on('ajax:beforeSend', "a", function() {
        console.log('the a in div.item_tools is sending its ajax command');
    })
    .on('ajax:complete', "a", function() {
        console.log('ajax request completed');
    }) 
```

我对此的理解是，当我然后单击`a`位于具有该类的元素中的任何链接 () 时`item_tools`，它将冒泡到该函数，然后将消息记录到控制台中。同样，触发 ajax 请求的链接将得到相同的处理......（假设我可以让它工作，那么我将去工作做 ajax 加载器微调器）。

相反，我看到的行为是，当我单击链接时，我的控制台中没有出现任何消​​息（在 firefox 和 chrome 上都尝试此操作），并且我的 ajax 链接关闭并正确执行其操作。只是完全忽略了javascript ...这是因为我单击ajax链接以某种方式阻止了click事件冒泡吗？我知道有办法做到这一点，但我认为我在任何地方都不是故意这样做的。除非 OOTB rails/ujs 那样做？

所以我的问题：

1.  有没有办法知道绑定了什么？
2.  我的 javascript 做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:21:02.370

事实证明，在 DOM 加载之前触发了 javascript，这意味着这些东西没有被绑定......

```
$(function () {
    $('div.item_tools')
        .on('click', 'a', function itemToolsAjaxy() {
            console.log("clicky click");
        })
        .on('ajax:beforeSend', "a", function() {
            console.log('the a in div.item_tools is sending its ajax command');
            $(this).closest('div').html('<img src=/assets/ajax-loader.gif>');
        })
}); 
```

在开头添加了`$(function())`权利，它将绑定延迟到 DOM 加载后，然后它开始工作。通过使用 Chrome 开发人员工具在`div.item_tools`选择器上粘贴一个中断并观察浏览器在加载 DOM 之前点击它来解决这个问题。*/掌脸*

（我删除了`.on('ajax:complete')`回调，因为事实证明存在一个已知限制，原始触发元素不再存在，因为它已被替换，因此没有什么可以执行回调。与我原来的问题无关，但我认为我提一下。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:15:59.410

我一直在使用它……而且它似乎工作正常。

你试过添加一个`.on('ajax:success')`吗？

除此之外，尝试将`.`每一行放在前一行...？它可能会`$('div.item_tools')`根据javascript的标准自动插入分号......虽然如果是这种情况，我希望它会给你一个关于`.`下一行的JS错误。无论如何尝试将其更改为：

```
$('div.item_tools').
  on('click', 'a', function() {
    console.log("clicky click")
  }).
  on('ajax:beforeSend', "a", function() {
    console.log('the a in div.item_tools is sending its ajax command');
  }).
  on('ajax:complete', "a", function() {
    console.log('ajax request completed');
  }) 
```

如果情况变得更糟，请尝试这样做：

```
$("a").on("ajax:success", function(){
  console.log('ajax:success done');
}) 
```

看看它是否在没有事件委托的情况下工作......

然后将其更改为：

```
$(document).on("ajax:success", "a", function(){
  console.log("ajax:success with delegation to document");
}) 
```

看看委派是否一直工作到文件，而不仅仅是你的`item_tools`

你确定你把所有东西都命名正确了吗？它`div.item_tools a`在你的标记中？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T18:39:54.573

据我所知，您可以通过两种方式执行 ajax 操作：

1.  通过使用`:remote => true`
2.  通过使用 jQuery `$.ajax`（或`$.post`）。

使用 2 号，请务必更改您的`href='#'`

我的建议是删除`:remote => true`并手动进行 jQuery ajax 调用。这样你就可以使用 beforeSend、complete 等。

如果我在这里偏离轨道，也请有人帮助我澄清事情。

# c# - 如何从服务器显示 tiff 图像？

> ID：16067276
> 
> 赞同：1
> 
> 时间：2013-04-17T18:18:13.467
> 
> 标签：c#, image, image-processing, asp.net-mvc-4

我有很多图像存储在服务器端的文件夹中。数据库具有每个图像的 URL。我无法直接从客户端打开图像，因为客户端没有这样做的权限。

AJAX 调用正在搜索图像，当用户单击底部时，模式窗口会淡入，图像也应该淡入，但事实并非如此。我不确定是否可以找到图像，所以我使用 console.log 来查看它得到了什么值，并且返回了很多符号，这让我认为这是因为文件格式。

这是 AJAX 调用：

```
 $.ajax({
            url: "mainpage/SearchImage",
            data: "",
            type: "post",
            success:function(data){

                $("#img_1").css("src","data:image/tiff;base64,"+data);
                console.log(data);

            }

        }) 
```

搜索图像的操作结果是：

```
public ActionResult SearchImage() {
            var path = @"\\jesus-pc\Frontera\IMAGENES\SINGNOS DISTINTIVOS\0\75HP23891268272.TIF";//the url is static cuz it just a test to know how to display the image

            var img = base.File(path, "image/tiff");//this file format is valid, right?

            return img;
        } 
```

但是正如我所说，它可以找到它，但是它打印出很多符号，不是在#img_1 img 标签中而是在控制台中。

我怎样才能解决这个问题？

我正在使用 MVC 4 和 C#。

# jquery - 结果格式正确的 Jquery 函数

> ID：16067277
> 
> 赞同：0
> 
> 时间：2013-04-17T18:18:27.930
> 
> 标签：jquery, jquery-calculation

我的代码又快又安静，但是在一些计算中的结果是格式化的非常大，包括，得到的值没有进入计算。如何做到这一点看到正确的结果？

我希望计算的结果 (3 * 2215.40) 是 3 646.20 而不是 3.6450000000000005。

如何？

代码 - [http://jsfiddle.net/bruno_aw/M7JZu/](http://jsfiddle.net/bruno_aw/M7JZu/)

```
$(".calc_cub").on("keyup", ".qtd", function(){
    var valorCub = $("#CUB").text();        
    var number = parseFloat(valorCub);  
    var qtd = +$(this).val();
    $(".total").text(number * qtd).val().toFixed(2);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:30:50.067

您需要首先从文本中获取数字。在将文本设置为 .total 之后，您还调用了 .val() - 您真正需要做的就是`$(".total").text((number * qtd).toFixed(2))`；

```
$(".calc_cub").on("keyup", ".qtd", function () {
    var valorCub = $("#CUB").text().split(' '); // returns ["Valor", "CUB", "R$", "1,215.40"]
    var number = parseFloat(valorCub[valorCub.length - 1].replace(',','')); // get last one in array and remove comma
    var qtd = +$(this).val();
    $(".total").text((number * qtd).toFixed(2));
}); 
```

[http://jsfiddle.net/GMjjc/](http://jsfiddle.net/GMjjc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:30:48.127

您混淆了文本块的字符串和浮动的分隔符。尝试这个;

[http://jsfiddle.net/M7JZu/8/](http://jsfiddle.net/M7JZu/8/)

**JavaScript**

```
$(".calc_cub").on("keyup", ".qtd", function () {
    var valorCub = $("#CUB").text();
    valorCub = parseFloat(valorCub.split('$ ')[1].replace('.', '').replace(',', '.'));
    var qtd = $(this).val();
    $(".total").text(valorCub * qtd);
}); 
```

为了输出，您可以在输出时再次将`.`后面转换为`,`（逗号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:27:39.287

试试这个改变：

```
$(".total").text((number * qtd).toFixed(2)); 
```

请注意，在您的小提琴中，`CUB`div 包含文本和数字。`parseFloat()`当数字在字符串的前面时有效。因此，您需要安排一些事情，以便隔离号码。你可以这样做：

```
<div>Some text is here <span id="CUB">1234.50</span></div> 
```

# android - 如何制作安卓屏保应用程序？

> ID：16067281
> 
> 赞同：1
> 
> 时间：2013-04-17T18:18:41.793
> 
> 标签：android, screensaver, lockscreen

首先，我很抱歉关于 Android 屏幕保护程序的重复问题。我在 Google Play 商店下载了一些关于屏幕保护程序的应用程序，例如相册免费屏幕保护程序、无烟屏幕保护程序、海滩免费屏幕保护程序。我看到所有这个应用程序都具有相同的格式，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/4SdZk.png)

目前，我想制作一个类似于我上面提到的应用程序的应用程序。当android处于睡眠模式（锁定屏幕）时，我想显示画廊图像，当触摸屏幕上的任何位置时，它通常会返回锁定屏幕。

我搜索但没有对我有用的结果，我真的需要参考源代码。

谁能建议我怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:23:28.637

你是说白日梦吗？尽管请注意它仅适用于 4.2 及更高版本：http: [//developer.android.com/about/versions/android-4.2.html#Daydream](http://developer.android.com/about/versions/android-4.2.html#Daydream)

# mongodb - 如何使用 mongodb 为每个特定字段选择多条记录？

> ID：16067288
> 
> 赞同：3
> 
> 时间：2013-04-17T18:19:14.567
> 
> 标签：mongodb

我在 mongodb 中有一组文档，每个文档都有一个“组”字段，该字段指的是拥有该文档的组。文件如下所示：

```
{
  group: <objectID>
  name: <string>
  contents: <string>
  date: <Date>
} 
```

我想构建一个查询，该查询返回每个组的最新 N 个文档。例如，假设有 5 个组，每个组有 20 个文档。我想编写一个查询，它将返回每个组的前 3 个，它将返回 15 个文档，每个组 3 个。每组得到 3 个，即使另一组有最近的第 4 个。

在 SQL 世界中，我相信这种类型的查询是通过“分区依据”和计数器完成的。mongodb中是否有这样的事情，没有对N组进行N + 1个单独的查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T20:42:46.400

您还不能使用聚合框架执行此操作 - 您可以获得每个组的 $max 或顶部日期值，但聚合框架还没有办法累积前 N 个，而且无法将整个文档推送到结果集中（仅个别字段）。

所以你必须依靠 MapReduce。这是可行的方法，但我确信有很多变体（所有变体都需要基于特定属性以某种方式对对象数组进行排序，我从[这个问题的一个答案中](https://stackoverflow.com/questions/1129216/sorting-objects-in-an-array-by-a-field-value-in-javascript)借用了我的解决方案。

Map 函数 - 将组名作为键输出，将文档的整个其余部分作为值输出 - 但它将其输出为包含数组的文档，因为我们将尝试为每个组累积一个结果数组：

```
map = function () { 
    emit(this.name, {a:[this]}); 
} 
```

reduce 函数会将属于同一组的所有文档累积到一个数组中（通过 concat）。请注意，如果您通过检查日期优化 reduce 以仅保留前五个数组元素，那么您将不需要 finalize 函数，并且在运行 mapreduce 期间将使用更少的内存（它也会更快）。

```
reduce = function (key, values) {
    result={a:[]};
    values.forEach( function(v) {
        result.a = v.a.concat(result.a);
    } );
    return result;
} 
```

由于我保留了每个键的所有值，因此我需要一个 finalize 函数来仅提取每个键的最新五个元素。

```
final = function (key, value) {
      Array.prototype.sortByProp = function(p){
       return this.sort(function(a,b){
       return (a[p] < b[p]) ? 1 : (a[p] > b[p]) ? -1 : 0;
      });
    }

    value.a.sortByProp('date');
    return value.a.slice(0,5);
} 
```

使用类似于您提供的模板文档，您可以通过调用 mapReduce 命令来运行它：

```
> db.top5.mapReduce(map, reduce, {finalize:final, out:{inline:1}})
{
    "results" : [
        {
            "_id" : "group1",
            "value" : [
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe13"),
                    "name" : "group1",
                    "date" : ISODate("2013-04-17T20:07:59.498Z"),
                    "contents" : 0.23778377776034176
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe0e"),
                    "name" : "group1",
                    "date" : ISODate("2013-04-17T20:07:59.467Z"),
                    "contents" : 0.4434165076818317
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe09"),
                    "name" : "group1",
                    "date" : ISODate("2013-04-17T20:07:59.436Z"),
                    "contents" : 0.5935856597498059
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe04"),
                    "name" : "group1",
                    "date" : ISODate("2013-04-17T20:07:59.405Z"),
                    "contents" : 0.3912118375301361
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfdff"),
                    "name" : "group1",
                    "date" : ISODate("2013-04-17T20:07:59.372Z"),
                    "contents" : 0.221651989268139
                }
            ]
        },
        {
            "_id" : "group2",
            "value" : [
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe14"),
                    "name" : "group2",
                    "date" : ISODate("2013-04-17T20:07:59.504Z"),
                    "contents" : 0.019611883210018277
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe0f"),
                    "name" : "group2",
                    "date" : ISODate("2013-04-17T20:07:59.473Z"),
                    "contents" : 0.5670706110540777
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe0a"),
                    "name" : "group2",
                    "date" : ISODate("2013-04-17T20:07:59.442Z"),
                    "contents" : 0.893193120136857
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe05"),
                    "name" : "group2",
                    "date" : ISODate("2013-04-17T20:07:59.411Z"),
                    "contents" : 0.9496864483226091
                },
                {
                    "_id" : ObjectId("516f011fbfd3e39f184cfe00"),
                    "name" : "group2",
                    "date" : ISODate("2013-04-17T20:07:59.378Z"),
                    "contents" : 0.013748752186074853
                }
            ]
        },
        {
            "_id" : "group3",
                        ...
                }
            ]
        }
    ],
    "timeMillis" : 15,
    "counts" : {
        "input" : 80,
        "emit" : 80,
        "reduce" : 5,
        "output" : 5
    },
    "ok" : 1,
} 
```

每个结果都将 _id 作为组名，将值作为该组名集合中最近五个文档的数组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T18:26:00.497

您需要在 $limit 阶段通过管道传输的聚合框架 $group 阶段...您还希望以某种方式对记录进行 $sort ，否则限制将具有未定义的行为，返回的文档将是伪随机的（内部使用的顺序由蒙哥）

类似的东西： db.collection.aggregate([{$group:...},{$sort:...},{$limit:...}])

[如果您想了解更多信息，](http://docs.mongodb.org/manual/aggregation/)这里有文档

# jquery - 计算平均值时如何过滤数据？

> ID：16067289
> 
> 赞同：0
> 
> 时间：2013-04-17T18:19:22.393
> 
> 标签：jquery, grid, kendo-ui, kendo-grid, kendo-asp.net-mvc

我用这个：

```
.DataSource(dataSource = > dataSource.Ajax()
    .Aggregates(aggregates = > {
    aggregates.Add(p = > p.UnitsInStock).Min().Max().Count();
    aggregates.Add(p = > p.UnitsOnOrder).Average();
    aggregates.Add(p = > p.ProductName).Count();
    aggregates.Add(p = > p.UnitPrice).Sum();
})
    .Group(groups = > groups.Add(p = > p.UnitsInStock))
    .Read(read = > read.Action("Aggregates_Read", "Grid")) 
```

现在我想计算没有<0的价格和背景不透明（没有颜色）的UnitPrice的总和；我把代码写下来了，但它是错误的。

```
.DataSource(dataSource = > dataSource.Ajax()
    .Aggregates(aggregates = > {
    aggregates.Add(p = > p.UnitsInStock).Min().Max().Count();
    aggregates.Add(p = > p.UnitsOnOrder).Average();
    aggregates.Add(p = > p.ProductName).Count();
    aggregates.Add(p = > p.UnitPrice)
        .Sum(p.UnitPrice > 0 && p.background == transparent);
})
    .Group(groups = > groups.Add(p = > p.UnitsInStock))
    .Read(read = > read.Action("Aggregates_Read", "Grid")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:14:02.580

不支持自定义聚合。您可以考虑定义自己的模板并自己计算，您可能需要的信息可以从 dataSource.view() 或 dataSource.data() 方法中检索。

[这](http://www.kendoui.com/forums/framework/data-source/how-to-do-custom-aggregate-functions.aspx#_Mns6-Vdn0aoSfP7aW-x7g)是一篇解释相同的帖子。

# gwt - 在 SplitLayoutPanel 中拖放无法正常工作

> ID：16067294
> 
> 赞同：0
> 
> 时间：2013-04-17T18:19:37.613
> 
> 标签：gwt, gwtquery, gquery

我正在尝试将行从单元格表拖到我的其他小部件。为此，我创建了`DragAndDropCellTable`and `DroppableWidget`。当它们在同一个容器中时，它工作正常。但是因为我把它们放到 SplitLayoutPanel 上，所以它不能正常工作。我仍然有丢弃事件，但助手不可见。我试图在助手上设置 z-index 但这没有帮助。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:11:51.153

您是否尝试将选项设置`appendTo`为`"body"`？原因肯定是因为split panel的overflow css属性设置为hidden hidden

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T10:12:13.550

我在这里有同样的问题，但我没有完全得到你的答案。我猜你的意思是当助手离开面板时隐藏溢出的原因。到目前为止我是对的吗？但我不知道如何追加。如何将帮助程序附加到 rootPanel？或者我在这个错误的轨道上？

* * *

好，我知道了。我不必附加助手，而是将 DraggableOptions 附加到`"body"`

```
draggableOptions.setAppendTo("body"); 
```

[https://code.google.com/p/gwtquery-plugins/wiki/DraggablePluginGettingStarted#DraggableOptions_Object](https://code.google.com/p/gwtquery-plugins/wiki/DraggablePluginGettingStarted#DraggableOptions_Object)

谢谢

# adobe - 解码 adobe 颜色文件 (*.ACO)，需要输入有关理解语法的信息

> ID：16067301
> 
> 赞同：5
> 
> 时间：2013-04-17T18:20:19.630
> 
> 标签：adobe, decode, color-coding

因此，我正在开发一个 Web 应用程序，以便能够更轻松地将使用 Photoshop 创建的 *.ACO 或 *.ASE 格式的调色板分发给没有这些程序的同事。我在设置基础知识方面已经走了很长一段路，但现在我完全陷入困境，唯一的原因是我无法弄清楚样本文件的结构。

这是我在文本编辑器中打开 *.ASE 文件时得到的：

```
ASEF          &      S w a t c h   1  RGB                   &    S w a t c h   2  RGB ?
Œ ?€  ?€        &    S w a t c h   3  RGB ?oïð?)Ìª>mí      &     S w a t c h   1  RGB                   &    S w a t c h   2  RGB ?
Œ ?€  ?€        &    S w a t c h   3  RGB ?oïð?)Ìª>mí      &     S w a t c h   1  RGB                   &    S w a t c h   2  RGB ?
Œ ?€  ?€        &    S w a t c h   3  RGB ?oïð?)Ìª>mí      &     S w a t c h   1  RGB                   &    S w a t c h   2  RGB ?
Œ ?€  ?€        &    S w a t c h   3  RGB ?oïð?)Ìª>mí 
```

当我在 NP++ 中打开它时，它看起来像这样： ![在此处输入图像描述](https://i.stack.imgur.com/pyCzZ.png)

我希望（并且天真地期望）该格式将采用某种可理解的 XML 结构，但显然不是......

我已经尝试研究这个主题并找到了这些来源：

[http://www.nomodes.com/aco.html](http://www.nomodes.com/aco.html)

[http://www.selapa.net/swatches/colors/fileformats.php](http://www.selapa.net/swatches/colors/fileformats.php)

[http://www.adobe.com/devnet-apps/photoshop/fileformatashtml/PhotoshopFileFormats.htm#50577411_31265](http://www.adobe.com/devnet-apps/photoshop/fileformatashtml/PhotoshopFileFormats.htm#50577411_31265)

但老实说，能够把我的头绕起来对我来说感觉很复杂。如果任何对文件编码格式或颜色编码格式有更好了解的人对我有任何意见，我将不胜感激！

如果您想查看这些文件，请在此处下载：

[https://www.dropbox.com/sh/9vo2h7ophpfc201/p7saMtxi_k](https://www.dropbox.com/sh/9vo2h7ophpfc201/p7saMtxi_k)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-16T23:17:01.587

您看到的是二进制文件的 ASCII 表示。在您[之前](http://www.selapa.net/swatches/colors/fileformats.php)共享的链接中，您将看到文件格式是二进制的。因此，让我们以此为出发点。现在打开文件并像这样读入，

```
$handle = fopen("temp.aco", "rb");

while (!feof($handle)) 
{ 
     $data = fread($handle, 2); 
     echo bin2hex($data)."<br/>";  
} 
```

这将打开 .aco 文件并读取，直到到达文件末尾。通过使用 fread 并将第二个参数设置为 2，您可以从文件中读取 2 个字节的数据。然后你会看到像这样的输出，

```
0001 0008 0000 fafa e2e2 dbdb 0000 
```

现在查看您的[其他链接](http://www.nomodes.com/aco.html)，您将看到第一个数字 0001 代表版本号 0008 代表文件中的颜色数（在我的情况下为 8）然后您的颜色类型通常为 0000 (RGB) 0001 (HSB ) 0002 (CMYK) 其余请参阅颜色转换表。

颜色由 3 个或 4 个单词组成，因此有时您可以忽略最后一个单词，它会被归零。所以让我们看一个例子，

0000-(RGB Type) fafa-(红色代表0..65535范围) e2e2-(绿色代表0..65535范围) dbdb-(蓝色代表0..65535范围) 0000-(这里不需要数据定位为零）

通过将读取的单词转换为无符号整数并遵循转换表，您将获得适当的 rgb 值。这是我解析各种类型的代码。

```
function colorInColorSpace($colorSpace, $w, $x, $y, $z){

// RGB
if($colorSpace==0){
    $r = $w/256;
    $g = $x/256;
    $b = $y/256;
    //z component not used in rgb format
    print $colorSpace." ".$r." ".$g." ".$b."<br/>";
}
//HSB
else if($colorSpace==1){
    $h = $w/182.04;
    $s = $x/655.35;
    $b = $y/655.35;

    print $colorSpace." ".$h." ".$s." ".$b."<br/>";
}
//CYMK
else if($colorSpace==2){
    $c = 100 - ($w/655.35);
    $m = 100 - ($x/655.35);
    $y = 100 - ($y/655.35);
    $k = 100 - ($z/655.35);

    print $colorSpace." ".$c." ".$m." ".$y." ".$k."<br/>";
}
//Lab
else if($colorSpace==7){
    // print $colorSpace." ".bin2hex($w[0])." ".bin2hex($w[1])."<br/>";
}
//Grayscale
else if($colorSpace==8){
    $greyscale = $w/39.0625;
    print $colorSpace." ".$greyscale."<br/>";
}
//Wide CYMK
else if($colorSpace==9){
    $c = $w/100;
    $m = $x/100;
    $y = $y/100;
    $k = $z/100;

    print $colorSpace." ".$c." ".$m." ".$y." ".$k."<br/>";
} 
```

}

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-04T18:13:58.170

仅供参考，我遇到了类似的问题，发现了这个读取ACO文件并将它们转换为html的C程序。[http://www.hping.org/aco2html/](http://www.hping.org/aco2html/)

这是一个很棒的工具，但是因为我想修改它并让它变得更好，所以我决定将它移植到 JavaScript。这是我在 Github 上的代码[https://github.com/websemantics/Color-Palette-Toolkit](https://github.com/websemantics/Color-Palette-Toolkit)

还有现场演示

[http://websemantics.github.io/Color-Palette-Toolkit/](http://websemantics.github.io/Color-Palette-Toolkit/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T01:35:40.660

在我寻找解码 Adob​​e 的 .ASE 样本格式的方法时偶然发现了这篇文章。我不确定它是否对您有帮助。ACO，但我发现一个人写了一个从 .ASE 格式中提取颜色的类：

[~~Adobe Swatch Exchange 阅读器/解码器~~](http://blog.christenfeldt-edv.de/2010/04/03/adobe-swatch-exchange-ase-reader-in-php/)^(！断开的链接)

# django - 使用 Django 为 SQLite 生成 SQL 插入语句

> ID：16067303
> 
> 赞同：0
> 
> 时间：2013-04-17T18:20:30.357
> 
> 标签：django, sqlite, escaping, mysql-python

我想用 Django 生成一个完整的 SQL 文件，可以下载并执行它来创建一个 SQLite DB。

问题是转义字符串以将它们插入要下载的文件中。这是我到目前为止得到的：

```
name = MySQLdb.escape_string(self.name.encode("utf-8")).decode("utf-8")
return "INSERT INTO names VALUES(%d,'%s');" % (self.id, name) 
```

但不幸的是，MySQL 使用 SQlite 不喜欢的反斜杠 \ 转义单引号。我更喜欢使用 Django 中包含的东西来替换 MySQLdb.escape_string()。我不确定 MySQL 转义和 SQLite 之间是否存在其他不兼容问题，因此最好完全避免 MySQLdb.escape_string()。

作为最后的手段，我会在返回之前这样做：

```
name = name.replace("\\\'","\'\'") 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:41:59.777

SQLite 有这个`quote`功能。当您使用整个数据库时，`sqlite3`命令行工具也使用它。`.dump`

# php - 将mysql查询结果链接到同名的url

> ID：16067304
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:20:31.983
> 
> 标签：php, sql, html

我的查询根据年龄范围在数据库中查找用户的“用户名”。我想将结果链接中的“用户名”设置为 example.com/username 或 username.example.com 或任何最简单的链接。

这是我的代码：

```
$term = $_POST['term'];

$sql = mysql_query("select * from Users1 
WHERE `age` BETWEEN " . $_POST['age1'] . " and " . $_POST['age2'] . "

");

while ($row = mysql_fetch_array($sql)){
echo 'Username: '.$row['username'];
} 
```

非常感谢任何帮助！

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:26:12.703

> 我想将结果链接中的“用户名”设置为 example.com/username 或 username.example.com 或任何最简单的链接。

那你为什么不直接回应呢？

```
echo "<a href='http://example.com/".$row['username']."'>".$row['username']."</a>"; 
```

# asp.net - 验证器回发不需要

> ID：16067306
> 
> 赞同：0
> 
> 时间：2013-04-17T18:20:36.050
> 
> 标签：asp.net

我的网页中有多个验证器（比较、必需、自定义）。当我单击提交按钮时，页面回发。但是，我为所有字段提供了相同的验证组。怎么了？

```
 <div class="innerUserName" style="margin-top: 0px;">
                                <asp:TextBox ID="txtUserName" runat="server" ClientIDMode="Static" 
                                    MaxLength="20" Style="margin-left: 28px;" Width="230" CausesValidation="True"></asp:TextBox>

                            </div>

 <asp:HiddenField ID="hdnField" runat="server" ClientIDMode="Static" />
                            <div id="divUserNameAvailability">
                            </div>
                            <asp:RequiredFieldValidator ID="reqval_UName" runat="server" ControlToValidate="txtUserName"
                                CssClass="validation" Display="Dynamic" ErrorMessage="Please Provide User Name"
                                SetFocusOnError="True" ValidationGroup="SignUp"></asp:RequiredFieldValidator>
                                <%--User Name Not Available--%>
                            <asp:CustomValidator ID="cusval_UName" runat="server" ErrorMessage="" ClientIDMode="Static"
                                ClientValidationFunction="ValidateUsername" ControlToValidate="txtUserName" CssClass="validation"
                                Display="Dynamic" SetFocusOnError="True" ValidationGroup="SignUp"></asp:CustomValidator>

<div class="innerPwd" style="margin-top: 0px;">
                                <asp:TextBox ID="txtPassword" runat="server" TextMode="Password" 
                                    Style="margin-left: 28px;" Width="230" CausesValidation="True"></asp:TextBox>
</div>

 <span>
                            <asp:RequiredFieldValidator ID="reqval_Pwd" runat="server" ControlToValidate="txtPassword"
                                SetFocusOnError="true" CssClass="validation" Display="Dynamic" ErrorMessage="Please Provide Password"
                                ValidationGroup="SignUp" />
                            <asp:RegularExpressionValidator ID="regexPassword" runat="server" ControlToValidate="txtPassword"
                                SetFocusOnError="true" Display="Dynamic" ErrorMessage="Please Provide Valid Password"
                                ValidationExpression="^(?=.*[0-9]+.*)(?=.*[a-zA-Z]+.*)[0-9a-zA-Z]{6,20}$" ValidationGroup="SignUp"
                                CssClass="validation"></asp:RegularExpressionValidator></span>
                        <div>

<asp:Button ID="btnSignUp" runat="server" Text="Create Account" Style="border: 0px;
                                    background-color: #396fd1; font-weight: bold; height: 29px; font-size: 12px;
                                    color: #fff3dd;" ValidationGroup="SignUp" /> 
```

功能：

```
function ValidateUsername(sender, args) {
            var div = document.getElementById("divUserNameAvailability");
            var img = document.getElementById("imgUserNameAvailability");

            if (div.style.display == "none") {
                CallMe("txtUserName");
            }

            if (div.style.display == "inline") {
                var imgFileName = getName(img.src);
                if (imgFileName == "wrong")
                    args.IsValid = false;
                else
                    args.IsValid = true;
            }
        } 
```

# php - apache 的奇怪 Memcached 问题

> ID：16067307
> 
> 赞同：5
> 
> 时间：2013-04-17T18:20:43.613
> 
> 标签：php, apache2, memcached

```
apache2: libmemcached/storage.cc:341: memcached_return_t memcached_send_ascii(memcached_st*, memcached_server_write_instance_st, const char*, size_t, const char*, size_t, time_t, uint32_t, uint64_t, bool, bool, memcached_storage_action_t): Assertion `memcached_failed(rc)' failed. 
```

我不知道是什么导致这个抛出，什么时候抛出，或者为什么。

这是一个致命的错误吗？如果是这样，有谁知道我可以在哪里修复它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-21T20:43:14.690

SugarCRM Community Edition v6.5.15（Build 1083）也有同样的问题。我已经修复了这个强制 memcached 守护进程与客户端（包括 libmemcached C++ 客户端）协商二进制协议的问题。这对我有用，试试吧。

在 Debian Wheezy 中，memcached 软件包在*/etc/memcached.conf*有一个配置文件。在文件末尾添加这一行：

```
-B binary 
```

然后重启memcached服务

```
service memcached restart 
```

更多信息： http: [//linux.die.net/man/1/memcached](http://linux.die.net/man/1/memcached)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T18:33:36.170

我会查看 libmemcached 中 storage.cc 的第 341 行。libmemcached 在输入验证方面做得不好，所以取决于说......你的键值（不要在键或键命名空间中使用空格）你可能会遇到很多错误问题。

查看源代码，libmemcache 在发送命令后期待 memcache 服务器的回复，但发送命令失败。所以它可能有很多原因（密钥错误、连接错误等）。

[http://bazaar.launchpad.net/~tangent-trunk/libmemcached/1.0/view/head:/libmemcached/storage.cc](http://bazaar.launchpad.net/~tangent-trunk/libmemcached/1.0/view/head:/libmemcached/storage.cc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T10:39:35.360

首先 - 你应该检查连接限制。

当 memcached 服务达到连接限制 (-c 参数) 时会出现此错误。默认情况下，限制设置为 1024 个连接。但是，如果您尝试进行多线程处理，则可能很快就会达到极限。

默认配置路径：/etc/sysconfig/memcached

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-25T09:29:38.827

在开发库时，我遇到了完全相同的错误（“apache2”头除外），这是一个与线程相关的错误。memcached 客户端的一个实例被多个并发线程访问，因此客户端和服务器恰好处于不一致的状态。因此，在 libmemcached 中对返回代码 的断言`rc`失败。[据我所知](http://docs.libmemcached.org/libmemcachedutil.html?threads)，定义连接的 libmemcached 内部结构不是线程安全的。

同时，很难想象如何在不提供线程实用程序的 PHP 中发生这种情况，可能是线程错误。无论如何，您应该检查您的代码是否使用 memcached 连接进行异常操作。

# azure - 如何在 Azure 中使用密码保护静态站点

> ID：16067309
> 
> 赞同：9
> 
> 时间：2013-04-17T18:20:51.160
> 
> 标签：azure, security

我有一个托管在 Azure 中的静态站点（即所有 html 文件，没有 .Net 项目）。我正在尝试用密码保护这个网站。我读过我可以创建一个自定义授权模块，我已经完成了，但我无法安装它，因为我需要运行 appcmd.exe 命令来允许编辑 web.config 的正确位。

任何一个; 如何使用密码保护静态 Azure 站点，或者如何在没有 Visual Studio 项目的情况下利用 ServiceDefinition.csdef 的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-25T10:41:58.627

在管理门户上，您可以配置您的站点需要使用凭据。如果使用此方法，则通过 Azure 门户管理凭据。![在此处输入图像描述](https://i.stack.imgur.com/ZKJqh.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:36:05.980

您可以使用[Forms Authentication](http://msdn.microsoft.com/en-gb/library/7t6b43z4%28v=vs.100%29.aspx)，它应该很容易实现并且不需要任何启动任务（运行 appcmd.exe 所必需的）。

将您的应用程序设置为在 web.config 中使用表单身份验证。

```
<authentication mode="Forms">
  <forms name=".ASPXAUTH" loginUrl="/myadminlogin.aspx" protection="All" path="/" timeout="120" />
</authentication> 
```

在 web.config 中定义受保护的文件夹。

```
 <location path="secure">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location> 
```

在您的登录区域中检查条件并设置身份验证 cookie：

```
 'SET AUTH COOKIE
    FormsAuthentication.SetAuthCookie(sessionID, False)
    response.redirect(/secure/securearea.html) 
```

不幸的是，这是您需要一些服务器端代码的一页。

# jquery - jQuery 数据表和标题复选框

> ID：16067313
> 
> 赞同：1
> 
> 时间：2013-04-17T18:20:58.767
> 
> 标签：jquery, checkbox, datatable

我正在使用一个 jQuery 数据表，我想要一列复选框，并且标题应该包含一个全选复选框。我在数据表官方网站上没有找到任何有关此的详细信息。

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:42:11.220

一种方法是使用数据表的 aoColumns 属性，并将“sTitle”属性的标记呈现为 html 字符串。

[http://www.datatables.net/usage/columns](http://www.datatables.net/usage/columns)

```
//On datatable init the options would look something like this
"aoColumns": [{   "sTitle": "<input type='checkbox' id='selectAll'></input>"}] 
```

然后，您可以在创建数据表后将处理程序连接到标题复选框以选中/取消选中所有复选框；

所以像：

```
$("#selectAll").toggle(function () { 
       $("checkboxSelector", dataTable.fnGetNodes()).attr("checked", true); }
     , function () { 
         $("checkboxSelector", dataTable.fnGetNodes()).attr("checked", false); 
     }
 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-16T15:40:48.127

你可以有如下行

```
<tr>
<th><input type="checkbox" id="selectall"/></th>
<th>Cell phone</th>
<th>Rating</th> 
```

和 jquery 连接起来

```
<SCRIPT language="javascript">
$(function(){

// add multiple select / deselect functionality
$("#selectall").click(function () {
      $('.case').attr('checked', this.checked);
});

// if all checkbox are selected, check the selectall checkbox
// and viceversa
$(".case").click(function(){

    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }

    });
   });
  </SCRIPT> 
```

# php - 雄辩的模型关系返回为空

> ID：16067315
> 
> 赞同：0
> 
> 时间：2013-04-17T18:21:07.213
> 
> 标签：php, laravel, eloquent

我有一个 laravel 模型

```
class Project extends Eloquent {

    public static $timestamps = true;

    public $includes = array('members','members.memberdata');

    public function tasks() {

        return $this->has_many('Usertask','project_id');
    }

    public function members() {

        return $this->has_many('Projectmember','project_id');
    }
} 
```

和相关模型

```
class Projectmember extends Eloquent {

    public static $table = "project_members";
    public static $timestamps = true;

    public function project() {

        return $this->belongs_to('Project');
    }

    public function memberdata() {

        return $this->has_one('Usermetadata','user_id');
    }
}

class Usermetadata extends Eloquent {

    public static $table = "users_metadata";

    public function user() {

        return $this->belongs_to('User');
    }

    public function member() {

        return $this->belongs_to('Projectmember','user_id');
    }
} 
```

当我尝试像这样检索单个项目模型时

```
 $project = Project::find($id);

 return Response::eloquent($project); 
```

我的 json 输出看起来像这样

```
{"id":1,"user_id":1,"name":"UberWork","description":"Web based project management \/ task management app","target_date":"2013-11-15 00:00:00","budget":null,"status":0,"created_at":"2013-04-16 20:13:59","updated_at":"2013-04-16 20:13:59","members":[{"id":1,"project_id":1,"user_id":1,"created_at":"2013-04-16 20:13:59","updated_at":"2013-04-16 20:13:59","memberdata":{"user_id":1,"first_name":"Tamarakuro","last_name":"Foh","photo":"","company_name":null,"phone":null,"package":"free","subscription_start":"0000-00-00 00:00:00","subscription_end":"0000-00-00 00:00:00","api_key":"12b14a7d3ca48c53bb5b1a88fa3eca3b"}},{"id":3,"project_id":1,"user_id":3,"created_at":"2013-04-16 20:13:59","updated_at":"2013-04-16 20:13:59","memberdata":{"user_id":3,"first_name":"Ebere","last_name":"Uche","photo":"","company_name":"Chronotech Labs","phone":null,"package":"free","subscription_start":"0000-00-00 00:00:00","subscription_end":"0000-00-00 00:00:00","api_key":"ab446bd9ffbb898e818a892c7401e0f6"}},{"id":4,"project_id":1,"user_id":2,"created_at":"2013-04-17 08:13:00","updated_at":"2013-04-17 08:13:00","memberdata":null}]} 
```

我的数据库看起来像这样；

用户

*   ID
*   电子邮件
*   密码
*   IP地址
*   积极的
*   ...

用户元数据

*   ID
*   用户身份
*   名
*   姓
*   头像照片
*   ...

项目

*   ID
*   用户身份
*   姓名
*   描述
*   地位
*   ...

项目成员

*   ID
*   项目编号
*   用户身份

我的问题是为什么项目的最后一个成员的 memberdata 为“null”，而其他成员不为 null。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:39:22.383

Eloquent 中的关系总是将主键 (pk) 与外键 (fk) 联系起来。但是，您正在尝试基于两个外键建立关系，从而跳过了关系。唯一的 Eloquent 解决方案是包含额外的关系步骤。这里有一些模型（我已经省略了这个例子不需要的关系）......

```
class Project extends Eloquent {

    public static $timestamps = true;

    public $includes = array('members','members.user', 'members.user.metadata');

    public function members()
    {
        return $this->has_many('Projectmember','project_id');
    }
}

class Projectmember extends Eloquent {

    public static $table = "project_members";
    public static $timestamps = true;

    public function user()
    {
        return $this->belongs_to('User');
    }
}

class User extends Eloquent {

    public static $timestamps = true;

    public $hidden = array('password', 'ip_address');

    public function metadata()
    {
        return $this->has_one('Usermetadata');
    }

}

class Usermetadata extends Eloquent {

    public static $table = "users_metadata";

    public function user() {

        return $this->belongs_to('User');
    }

} 
```

我明白你为什么要跳过这段关系，但遗憾的是，关系不可能。

# css - 使用 CSS 更改悬停时的图像

> ID：16067317
> 
> 赞同：0
> 
> 时间：2013-04-17T18:21:20.577
> 
> 标签：css, image, html, button, hover

这段代码有什么问题？我已经为此工作了几个小时，无法弄清楚为什么 button.png 现在会显示，但链接在“一个”div 的位置。

```
#one
{
position: fixed;
left:225px;
top:702px;
}

.button
{
display: block;
width: 40px;
height: 40px;
background: url('images/button.png') bottom;
text-indent: -99999px;
}

.button:hover
{
background-position: 0 0;
background-color: transparent; 
border-style: none;
} 
```

_

```
<body>
    <div id="map">
        <img src="images/map.png"/>
    </div>

    <div id="one">
        <a class="button" href="images/one.jpg"/>
            <img src="images/button.png"/>
        </a> 
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:31:25.997

您的标题与您的问题并没有太大关系..所以我将尝试回答这个问题。

图像未显示，因为默认情况下`img`是内联元素并且您已设置`text-indent`为`-99999px`.

您可以删除它`text-indent`或将`display`of设置`img`为`block`：

```
.button img { display: block; } 
```

# android - 使用 android 标准查看器从 gridview 打开图像

> ID：16067318
> 
> 赞同：1
> 
> 时间：2013-04-17T18:21:21.610
> 
> 标签：android, gridview

我的问题是，当我想从 Gridview 单击图像时，我想使用 android 标准查看器显示它，请帮助我，这是我的代码！

```
public class ImageAdapterForGallery extends BaseAdapter {
private Context mContext;
public static Uri uri;
static File root = new File(Environment.getExternalStorageDirectory()
        + "/Rasha Bani Hani/");
static File[] gLry = root.listFiles();
int count = gLry.length;

public ImageAdapterForGallery(Context c) {
    mContext = c;

}

public int getCount() {
    return gLry.length; }

public Object getItem(int position) {
    return gLry[position];
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    uri = Uri.fromFile(gLry[position]);

    ImageView imageView;
    imageView = new ImageView(mContext);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(180, 180));

    imageView.setImageURI(uri);
    return imageView;

}} 
```

在这里需要帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:27:45.973

您可以使用 打开图像意图`ACTION_VIEW`。

请参阅这个[SO question](https://stackoverflow.com/q/1740654/792232)。单击 GridView 中的图像时，您可以调用意图。

# ruby-on-rails - ActionView::Template::Error (nil:NilClass 的未定义方法 `each')

> ID：16067325
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:21:38.863
> 
> 标签：ruby-on-rails, actionview

我有一个奇怪的问题。我在本地运行 Rails 服务器，一切正常。但是当我尝试在云服务器（亚马逊 AWS）中克隆 Rails 服务器时，一个控制器不起作用。

我是rails的新手，但我不知道发生了什么。我有一些其他实体在工作，但这个没有。

当我尝试获取 /ingressos 时：

```
Showing /home/ubuntu/bilheteria_mobile_server/app/views/ingressos/index.html.erb where line #14 raised:

undefined method `each' for nil:NilClass
Extracted source (around line #14):

11:     <th></th>
12:   </tr>
13: 
14: <% @ingressos.each do |ingresso| %>
15:   <tr>
16:     <td><%= ingresso.usuario.nome %></td>
17:     <td><%= ingresso.conteudo.titulo %></td>
Rails.root: /home/ubuntu/bilheteria_mobile_server 
```

我知道我的 Ingresso 越来越为零，但这会是什么？如果在我的本地服务器中我可以运行所有内容？

任何人都可以给我一个提示？谢谢！

编辑：

无缘无故，它变成了作品！好的，错误已经改变，出现：

我使用时加载 Base64 时出错：需要“Base64”。但我需要这个稍后在创建时做一些事情。如何加载 Base64？我的云服务器是 linux 机器和我的本地服务器在 mac 上有什么区别吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:24:21.540

正如我在评论中所说，将要求“Base64”更改为要求“base64”解决了我的问题。第一个错误消失了，这很奇怪，但我不会抱怨这个。感谢那些试图在评论会议中与我解决问题的人。青色

# c# - “无法对 System.Decimal 和 System.String 执行“赞”。”

> ID：16067326
> 
> 赞同：4
> 
> 时间：2013-04-17T18:21:40.090
> 
> 标签：c#

我在搜索`DataGridView`价格（十进制）时遇到问题，此代码适用于字符串类型，但在我尝试搜索价格时出错：“无法在 System.Decimal 和 System.String 上执行“赞”。”
这是代码：

```
BindingSource bs = new BindingSource();
bs.DataSource = dataGridView1.DataSource;
bs.Filter = "price like '%" + Convert.ToDecimal(textBox16.Text) + "%'";
dataGridView1.DataSource = bs; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:24:16.177

您正在尝试使用`decimal`as `string`，这就是您收到错误的原因。您必须将运算符用于数值`<, >, =`等

```
BindingSource bs = new BindingSource();
bs.DataSource = dataGridView1.DataSource;
bs.Filter = "price > " + Convert.ToDecimal(textBox16.Text) ;
dataGridView1.DataSource = bs; 
```

# verify - 准确验证年龄

> ID：16067328
> 
> 赞同：0
> 
> 时间：2013-04-17T18:21:48.747
> 
> 标签：verify

有没有办法在网上准确验证年龄？

我曾考虑使用信用卡数据进行验证，但我[读到](https://stackoverflow.com/q/11592631/825757)很少有银行允许访问个人数据。

我也考虑过 Javascript，但这很容易解决（只是谎报你的年龄）。

有没有办法在网上准确验证年龄？

注意：这是针对销售烟草产品的在线商店。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-24T18:12:18.410

如果我没记错的话，[Coursera会通过让学生给自己](http://coursera.org)[拍照](https://www.coursera.org/signature/guidebook/joining-what-is-a-signature)来验证他们的学生的一些特殊课程的身份（他们支付 50 美元，并且该网站将验证他们确实完成了课程，获得了任何成绩等）[和他们的驾照](https://www.coursera.org/signature/guidebook/joining-what-is-a-signature)。

显然，对于大多数情况来说，这太具有侵略性了，但老实说，这是迄今为止我遇到的唯一可以合理可靠地在网站上断言您的年龄的事情（卡片可能被盗等）。

不过，只是为了一家烟草店？也许坚持只收取很小的信用卡费用会奏效。我不知道这里是否也存在法律问题，关于什么被认为足够可靠，但这也可能值得检查。

# iphone - 如何在执行拖动手势时平滑地为 CGAffineTransform 设置动画

> ID：16067330
> 
> 赞同：1
> 
> 时间：2013-04-17T18:21:49.497
> 
> 标签：iphone, ios, cgaffinetransform, uipangesturerecognizer

我了解检测拖动手势的各种方法很好（目前我正在使用 a `UIPanGestureRecognizer`），但我对转换的理解是有限的，所以我不确定这是否/如何可能。本质上，我想要的是在用户在屏幕上其他地方执行拖动手势时以相同的*速度*（因为没有更好的词）应用到 UIView 的缩放转换。换句话说，当用户向上拖动时，我希望转换 UIView 的大小与该手势的位置成比例增加，如果用户随后开始向下拖动，它应该开始按比例缩小。

希望这是有道理的。作为一个虚拟的例子，想象一个滑块，你可以调整它来实时改变 UIView 的大小。有没有一种很好的方法来进行这些类型的增量和恒定大小更新`CGAffineTransform`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:42:22.353

在您的平移手势处理程序中，您只需抓住`translationInView`or `locationInView`，从中计算比例，然后相应地更新变换。例如：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static CGAffineTransform originalTransform;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalTransform = self.viewToScale.transform;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translation = [gesture translationInView:gesture.view];
        CGFloat scale = 1.0 - translation.y / 160.0;
        self.viewToScale.transform = CGAffineTransformScale(originalTransform, scale, scale);
    }
} 
```

您可以`scale`根据您想要做什么来进行计算，但希望您能明白这一点。

就个人而言，我宁愿使用捏合手势识别器来调整大小（它是用户接受过培训的 UI，它为您提供了`scale`开箱即用的因素等），但无论什么都适合您。如果你做了一个捏手势识别器，它可能看起来像：

```
- (void)handlePinch:(UIPinchGestureRecognizer *)gesture
{
    static CGAffineTransform originalTransform;

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        originalTransform = self.viewToScale.transform;
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        self.viewToScale.transform = CGAffineTransformScale(originalTransform, gesture.scale, gesture.scale);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-28T21:53:04.707

我发现最好的方法是使用 locationInView，这样您就可以将像素中的位置偏移与比例等同起来。例如，如果圆圈位于视图的中心：

```
func dragDot(recognizer: UIPanGestureRecognizer) {

    let locationX = recognizer.location(in: self.view).x

    // Expand and contract the circle
    let locationXOffset = locationX - self.view.center.x

    // We need scale to be 1 when locationXOffset = circle radius
    let scale: CGFloat = locationXOffset / (self.widthOfCircle / 2)

    self.ring.transform = CGAffineTransform(scaleX: scale, y: scale)
} 
```

如果圆圈不在视图的中心，则替换`self.view.center.x`为圆圈的初始位置。

此方法适用于所有设备和屏幕分辨率，并且无需校准常数

# sql - SQL Case语句抛出缺少关键字错误

> ID：16067331
> 
> 赞同：2
> 
> 时间：2013-04-17T18:21:52.520
> 
> 标签：sql, oracle, oracle10g, oracle11g

我正在尝试这个查询：

```
Select * from users_t t
where
case when sysdate <= to_date('20130131', 'yyyymmdd')
then t.user_id=1254664
else t.user_id=1259753
End 
```

为什么会发出“ORA-00905：缺少关键字”错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:24:02.850

您需要语句*之外*的比较运算符：`case`

```
Select * from users_t t
where
(case when sysdate <= to_date('20130131', 'yyyymmdd')
then 254664
else 1259753
End) = t.user_id 
```

`case`但是，您可以在没有语句的情况下编写此代码：

```
select *
from users_t t
where ((sysdate <= to_date('20130131', 'yyyymmdd') and t.user_id = 254664) or
      ((sysdate > to_date('20130131', 'yyyymmdd') and t.user_id = 1259753) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T18:24:03.210

您的案例陈述不正确。

```
SELECT * 
FROM users_t t
WHERE t.user_id = CASE WHEN SYSDATE <= TO_DATE('20130131', 'yyyymmdd')
                       THEN 1254664
                       ELSE 1259753
                  END 
```

这将完成您的任务。

编辑：更好的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:24:02.317

SQL 中的`CASE`语句总是返回一个值。您需要将此`CASE`声明等同于某事。[在此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)阅读更多相关信息。

您应该使用以下代码：

```
Select * from users_t t
where
t.user_id = case
                 when sysdate <= to_date('20130131', 'yyyymmdd')
                 then 1254664
                 else 1259753
            End 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T20:07:35.007

这个错误的根本原因是Oracle SQL 中没有布尔数据类型。（我个人认为这是一个巨大的错误。）

返回条件是一个完全有效的想法，它甚至可以在 PL/SQL 中使用：

```
declare
    v_test Boolean;
begin
    v_test := case when 1=1 then 1=1 else 1=2 end;
end;
/ 
```

# android - AsyncTask 使用 mysql 登录

> ID：16067337
> 
> 赞同：0
> 
> 时间：2013-04-17T18:22:21.043
> 
> 标签：android, android-asynctask

我正在创建一个 AsyncTask 以将用户登录到服务器。登录工作正常，但是如果他将字段留空，用户可以登录..我该如何更改，所以空白登录也是错误登录..任何帮助都会很好谢谢

```
package com.app.app;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;
import com.app.app.library.DatabaseHandler;
import com.app.app.library.JSONParser;
import com.app.app.library.UserFunctions;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import com.app.app.DashboardActivity;
import com.app.app.R;
import com.app.app.R.id;

import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class LoginTask extends AsyncTask<String, Void, Integer> {

    private ProgressDialog progressDialog;
    private LoginActivity activity;
    private int id = -1;
    private com.app.app.library.JSONParser jsonParser;
    private static String loginURL = "http://10.0.2.2/android/";
    private static String registerURL = "http://10.0.2.2/android/";
    private static String KEY_SUCCESS = "success";
    private static String KEY_ERROR = "error";
    private static String KEY_ERROR_MSG = "error_msg";
    private static String KEY_UID = "uid";
    private static String KEY_NAME = "name";
    private static String KEY_EMAIL = "email";
    private static String KEY_CREATED_AT = "created_at";
    private int responseCode = 0;

    public LoginTask(LoginActivity activity, ProgressDialog progressDialog)
    {
        this.activity = activity;
        this.progressDialog = progressDialog;
    }

    @Override
    protected void onPreExecute()
    {
        progressDialog.show();
    }

    protected Integer doInBackground(String... arg0) {
        EditText userName = (EditText)activity.findViewById(R.id.loginEmail);
        EditText passwordEdit = (EditText)activity.findViewById(R.id.loginPassword);
        String email = userName.getText().toString();
        String password = passwordEdit.getText().toString();
        UserFunctions userFunction = new UserFunctions();
        JSONObject json = userFunction.loginUser(email, password);

        // check for login response
        try {
            if (json.getString(KEY_SUCCESS) != null) {
                String res = json.getString(KEY_SUCCESS);

                if(Integer.parseInt(res) == 1){
                    //user successfully logged in
                    // Store user details in SQLite Database
                    DatabaseHandler db = new DatabaseHandler(activity.getApplicationContext());
                    JSONObject json_user = json.getJSONObject("user");
                    //Log.v("name", json_user.getString(KEY_NAME));
                    // Clear all previous data in database
                    userFunction.logoutUser(activity.getApplicationContext());
                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), 
                            json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                    responseCode = 1;
                    // Close Login Screen
                    //finish();

                }else{
                    responseCode = 0;
                    // Error in login
                }
            }

        } catch (NullPointerException e) {
            e.printStackTrace();

        }
        catch (JSONException e) {
            e.printStackTrace();
        }

        return responseCode;
    }

    @Override
    protected void onPostExecute(Integer responseCode)
    {
        EditText userName = (EditText)activity.findViewById(R.id.loginEmail);
        EditText passwordEdit = (EditText)activity.findViewById(R.id.loginPassword);

        if (responseCode == 1) {
            progressDialog.dismiss();
            Intent i = new Intent();
            i.setClass(activity.getApplicationContext(), DashboardActivity.class);
            activity.startActivity(i);
            //activity.loginReport(responseCode);   
        }
        else {
            progressDialog.dismiss();
            activity.showLoginError(responseCode);

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:27:45.043

像这样检查

```
String email = userName.getText().toString();
String password = passwordEdit.getText().toString();

if(email.length()!=0 && password.length()!=0)
{

// do stuff
} 
```

# c - C - 如何从位字段中接收位作为函数中的参数？

> ID：16067339
> 
> 赞同：3
> 
> 时间：2013-04-17T18:22:28.270
> 
> 标签：c, arduino, microcontroller, bit, bit-fields

我有一个这样定义的位字段（它来自微控制器库，所以看起来有点不同）：

```
typedef union {
    byte Byte;
    struct {
        byte PTAD0       :1;
        byte PTAD1       :1;                                       
        byte PTAD2       :1;
        byte PTAD3       :1;
        byte PTAD4       :1;
        byte PTAD5       :1;
        byte             :1;
        byte             :1;
    } Bits;
} PTADSTR;
extern volatile PTADSTR _PTAD @0x00000000;
#define PTAD                            _PTAD.Byte
#define PTAD_PTAD0                      _PTAD.Bits.PTAD0
#define PTAD_PTAD1                      _PTAD.Bits.PTAD1
#define PTAD_PTAD2                      _PTAD.Bits.PTAD2
#define PTAD_PTAD3                      _PTAD.Bits.PTAD3
#define PTAD_PTAD4                      _PTAD.Bits.PTAD4
#define PTAD_PTAD5                      _PTAD.Bits.PTAD5 
```

所以。假设我想要一个设置一点的函数，如下所示：

```
void setbit(bit Bit) {
     Bit = 1;
} 
```

当然，“位”声明不起作用。我想要一个可以使用的声明

```
setbit(PTAD_PTAD5) 
```

它会设置这个位。我可以

```
void setbit(byte Byte, byte number) {
     Byte |= 1<<(number);
} 
```

并且寄出

```
setbit(PTAD,5); 
```

效果很好，但是……这不是我想要的，因为我想做一些像 Arduino 的库之类的东西。任何人都知道如何以我喜欢的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:28:34.140

1.  C 是一种按值传递的语言，所以即使你可以这样做：

    ```
    void setbit(bit Bit) {
         Bit = 1;
    } 
    ```

    这将是一个无操作。

2.  您可以使用类似函数的宏来执行您正在尝试的操作：

    ```
    #define setbit(x) do { (x) = 1; } while(0) 
    ```

    如果你用 调用这个宏`PTAD_PTAD5`，它应该像你期望的那样工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:29:38.857

因为您可以单独访问位域中的位，所以设置位非常容易：

```
_PTAD_PTAD5 = 1; 
```

多亏了`#define _PTAD_PTAD5`，这将评估为

```
_PTAD.Bits.PTAD5 = 1; 
```

请注意，由于 C 是一种按值传递的语言，

```
void setBit(bit Bit){
    Bit = 1;
} 
```

不要做你所期望的。相反，它将（函数）局部变量`Bit`设置为 1，而您发送给它的变量保持不变。

通常，您会使用指向要在函数中更改的变量的指针，但是由于您不能在位域中获取位的地址，因此在这种情况下您不能这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:27:34.320

在 C 中，我不相信可以将位域作为数组访问。一种想法是传入一个枚举类型或常量，并将其值转换为 8 个不同的集合函数。不是最干净的方法，但我相信它会起作用。

```
 #define PTAD5  5
...

void setbit(PTADSTR byte, int bit)
{
    switch(bit)
    {
        ...
        case PTAD5  : byte.PTAD5 = 1; break;
        default: ASSERT_ALWAYS(); break;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-16T15:05:07.297

这个怎么样？使用 static const 限定符应确保内存开销大约为零

```
typedef struct
{
    uint8_t* reg;
    uint8_t bitnum;
}bit;

void setbit(bit b)
{
    *b.reg |= (1 << b.bitnum);
}

void clrbit(bit b)
{
    *b.reg &= ~(1 << b.bitnum);
}

static const bit PTAD_PTAD0 = {&PTAD, 0};
static const bit PTAD_PTAD1 = {&PTAD, 1};
static const bit PTAD_PTAD2 = {&PTAD, 2};
static const bit PTAD_PTAD3 = {&PTAD, 3};
static const bit PTAD_PTAD4 = {&PTAD, 4};
static const bit PTAD_PTAD5 = {&PTAD, 5};
static const bit PTAD_PTAD6 = {&PTAD, 6};
static const bit PTAD_PTAD7 = {&PTAD, 7};

int main()
{
    printf("PTAD: %02X\n", PTAD);
    setbit(PTAD_PTAD0);
    printf("PTAD: %02X\n", PTAD);
    clrbit(PTAD_PTAD0);
    printf("PTAD: %02X\n", PTAD);

} 
```

# javascript - Twitter Bootstrap 模式未打开？

> ID：16067342
> 
> 赞同：0
> 
> 时间：2013-04-17T18:22:36.203
> 
> 标签：javascript, jquery, asp.net-mvc-3, razor, twitter-bootstrap

我正在使用下面的代码创建一个模式，该模式会根据 id 弹出填充页面，然后允许您编辑位置。模态如何无法打开。有人能告诉我为什么吗？

```
@model IEnumerable<LocApp.Models.Location>

<table class="table table-bordered">
    <thread>
        <tr>
            <th>Name</th>
            <th>Active</th>
            <th>Actions</th>
        </tr>
    </thread>
    @foreach (var item in Model)
    {
        <thread>
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.active)
                </td>
                <td>
                    <a href="@Url.Action("Edit", "Location", new { id = item.id})" class="edit" data-target="#@item.id">Edit</a> |
                    @Html.ActionLink("Details", "Details", new { id = item.id }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.id })
                </td>
            </tr>
        </thread>

        <div class="modal hide fade" id="@item.id" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="myModalLabel">Edit @item.name</h3>
          </div>
          <div class="modal-body">
          </div>
        </div>        
    }
</table>
<script>
    $('a.edit').on('click', function (e) {
        e.preventDefault();
        var url = $(this).attr('href');
        $(".modal-body").html('<iframe width="100%" height="100%" frameborder="0" scrolling="no" allowtransparency="true" src="' + url + '"></iframe>');
    });
</script> 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:37:38.937

你几乎是对的：- [http://jsfiddle.net/wr9sE/1/](http://jsfiddle.net/wr9sE/1/)

您需要指定`data-toggle="modal"`和`data-target="#itemid"`

```
 <a href="@Url.Action("Edit", "Location", new { id = item.id})" data-toggle="modal" class="edit" data-target="#@item.id">Edit</a> 
```

> 无需编写 JavaScript 即可激活模式。在控制器元素（如按钮）上设置 data-toggle="modal" 以及 data-target="#foo" 或 href="#foo" 以定位要切换的特定模式。

只是一个替代建议，您也可以通过订阅显示事件来修改模式，而不是注册点击链接...。

```
$('.modal').on('show',function(){
    var url = $(event.srcElement).attr('href');
      $(".modal-body", this).html('<iframe width="100%" height="100%" frameborder="0" scrolling="no" allowtransparency="true" src="' + url + '"></iframe>');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T18:30:12.627

可能您缺少包含“bootstrap.js”（或者，具体而言，“bootstrap-modal.js”）

尝试在此处制作您的“包”（使用 Modals）并在您的页面中包含 javascript：http: [//twitter.github.io/bootstrap/customize.html](http://twitter.github.io/bootstrap/customize.html)

# terminal - RVM 安装后的 OS X 10.8.3 终端错误

> ID：16067347
> 
> 赞同：0
> 
> 时间：2013-04-17T18:22:45.477
> 
> 标签：terminal, rvm

我是一名业余前端 Web 开发人员，对 html5、css 和 jquery 有很好的掌握。
最近，我一直在用 Ruby on Rails 冒险进入未知领域。在看了我相当多的教程之后，我想我会试一试。

[因此，我通过http://railsinstaller.org](http://railsinstaller.org)安装了 Ruby & Rails ；但是，安装后，建议我通过 RVM 下载最新版本。因此，我卸载了 railsinstaller 并尝试通过 RVM 安装 Ruby on Rails，但每当我尝试运行初始终端`\curl`命令时，我都会收到权限被拒绝错误。

我在网上搜索了故障排除提示，发现了一些似乎很有帮助的提示。不幸的是，现在不仅没有安装 RVM，而且我的终端控制器都搞砸了。

每当我启动终端时，它都会说

```
-bash: /etc/profile.d/sm.sh: No such file or directory
-bash: /etc/profile.d/rvm.sh: No such file or directory
-bash: export: `/Users/joebruno/.rvm/scripts/rvm': not a valid identifier 
```

我的终端命令不再起作用。如何重置我的终端目录？

# java - JTable 大小问题

> ID：16067350
> 
> 赞同：0
> 
> 时间：2013-04-17T18:22:53.770
> 
> 标签：java, swing, jtable, gridbaglayout

我在使用 JTables 时遇到问题，我知道我的代码有点难以理解，它也有点混乱，因为它来自一个相当大的程序。是的，我刚刚了解了 Java 命名约定，在该约定中，变量不以大写字母开头。

```
final JFrame Menu = new JFrame("Crime Database 2013");
    Dimension screenSize0 = Menu.getToolkit().getScreenSize();
    Menu.setBounds(screenSize0.width / 4, screenSize0.height / 4,
            screenSize0.width / 2, screenSize0.height / 2);
    Menu.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Menu.setVisible(true);
    JPanel options = new JPanel(new GridBagLayout());
    GridBagConstraints a = new GridBagConstraints();
    Menu.add(options);
    JButton show = new JButton("Show all records");
    a.gridx = 0;
    a.gridy = 1;
    options.add(show, a);

    final JFrame Show = new JFrame("Crime Database 2013 - Show Records");
        Dimension screenSize3 = Show.getToolkit().getScreenSize();
        Show.setBounds(screenSize3.width/3 - 250, screenSize3.height/7,
                screenSize3.width - 150, screenSize3.height-200);
        Show.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Show.setLayout(new GridBagLayout());
        GridBagConstraints g = new GridBagConstraints();
        final JPanel data = new JPanel(new FlowLayout());
        JPanel sortselect = new JPanel(new GridBagLayout());
        GridBagConstraints h = new GridBagConstraints();
        g.gridx = 0;
        g.gridy = 2;
        Show.add(sortselect, g);
        g.gridx = 0;
        g.gridy = 0;
        g.gridheight = 2;
        g.gridwidth = 5;
        Show.add(data, g);
        JLabel label = new JLabel("Sort options");
        JRadioButton none = new JRadioButton("No Sort",true);
        JLabel frname = new JLabel("By First Name");
        JRadioButton frnameup = new JRadioButton("First name - Alphabetical");
        JRadioButton frnamedn = new JRadioButton("First name - Reverse-Alphabetical");
        JLabel lsname = new JLabel("By Last Name");
        JRadioButton lsnameup = new JRadioButton("Last name - Alphabetical");
        JRadioButton lsnamedn = new JRadioButton("Last name - Reverse-Alphabetical");
        JLabel byage = new JLabel("By Age");
        JRadioButton ageup = new JRadioButton("Age - Increasing");
        JRadioButton agedn = new JRadioButton("Age - Decreasing");
        JLabel bycrime = new JLabel("By Crime");
        JRadioButton crimeup = new JRadioButton("Crime - Alhabetically");
        JRadioButton crimedn = new JRadioButton("Crime - Reverse-Alphabetical");
        JLabel year = new JLabel("By Year of release");
        JRadioButton yearup = new JRadioButton("Expected Year of Release - First");
        JRadioButton yeardn = new JRadioButton("Expected Year of Release - Last");
        ButtonGroup sortgroup = new ButtonGroup();
        sortgroup.add(none);
        sortgroup.add(frnameup);
        sortgroup.add(frnamedn);
        sortgroup.add(lsnameup);
        sortgroup.add(lsnamedn);
        sortgroup.add(ageup);
        sortgroup.add(agedn);
        sortgroup.add(crimeup);
        sortgroup.add(crimedn);
        sortgroup.add(yearup);
        sortgroup.add(yeardn);
        h.insets = new Insets(10,10,10,10);
        h.gridx = 0;
        h.gridy = 2;
        sortselect.add(frname, h);
        h.gridx = 0;
        h.gridy = 3;
        sortselect.add(frnameup, h);
        h.gridx = 0;
        h.gridy = 4;
        sortselect.add(frnamedn, h);
        h.gridx = 1;
        h.gridy = 2;
        sortselect.add(lsname, h);
        h.gridx = 1;
        h.gridy = 3;
        sortselect.add(lsnameup, h);
        h.gridx = 1;
        h.gridy = 4;
        sortselect.add(lsnamedn, h);
        h.gridx = 2;
        h.gridy = 2;
        sortselect.add(byage, h);
        h.gridx = 2;
        h.gridy = 3;
        sortselect.add(ageup, h);
        h.gridx = 2;
        h.gridy = 4;
        sortselect.add(agedn, h);
        h.gridx = 3;
        h.gridy = 2;
        sortselect.add(bycrime, h);
        h.gridx = 3;
        h.gridy = 3;
        sortselect.add(crimeup, h);
        h.gridx = 3;
        h.gridy = 4;
        sortselect.add(crimedn, h);
        h.gridx = 4;
        h.gridy = 2;
        sortselect.add(year, h);
        h.gridx = 4;
        h.gridy = 3;
        sortselect.add(yearup, h);
        h.gridx = 4;
        h.gridy = 4;
        sortselect.add(yeardn, h);
        h.gridwidth = 5;
        h.gridheight = 1;
        h.gridx = 0;
        h.gridy =0;
        sortselect.add(label, h);
        h.gridx = 0;
        h.gridy = 1;
        sortselect.add(none, h);
            show.addActionListener(
                    new ActionListener() {
                        public void actionPerformed(ActionEvent e1) {
                            Menu.setVisible(false);
                            int entries = 0;
                            BufferedReader lines = null;
                            try {
                                lines = new BufferedReader(new FileReader("L:\\workspace\\new java\\sources\\c-database.txt"));
                            } catch (FileNotFoundException e) {
                                e.printStackTrace();
                            }
                            try {
                                while (lines.readLine() != null) {
                                    entries++;
                                }
                            } catch (IOException e2) {
                                e2.printStackTrace();
                            }
                            BufferedReader crimeinfo = null;
                            try {
                                crimeinfo = new BufferedReader(new FileReader("L:\\workspace\\new java\\sources\\c-database.txt"));
                            } catch (FileNotFoundException e) {
                                e.printStackTrace();
                            }
                            String namelist[] = new String[entries];
                            String agelist[] = new String[entries] ;
                            String crimelist[] = new String[entries];
                            String release[] = new String[entries];
                            for (int i = 0; i < entries; i++) {
                                String full = null;
                                try {
                                    full = crimeinfo.readLine();
                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                                String split[] = full.split(",");
                                namelist[i] = split[0];
                                agelist[i] = split[1];
                                crimelist[i] = split[2];
                                release[i] = split[3];
                            }
                            String firstnamelist[] = new String[entries];
                            String lastnamelist[] = new String[entries];
                            for (int i = 0; i < entries; i++) {
                                String namesplit[] = namelist[i].split(" ");
                                firstnamelist[i] = namesplit[0];
                                lastnamelist[i] = namesplit[1];
                            }
                            final String[] headers = {"First Name",
                                                "Last Name",
                                                "Age",
                                                "Crime committed",
                                                "Expected Year of Release"
                            };
                            final String[][] crimedata = new String[entries][5];
                            for (int i = 0; i < entries; i++) {
                                crimedata[i][0] = firstnamelist[i];
                                crimedata[i][1] = lastnamelist[i];
                                crimedata[i][2] = agelist[i];
                                crimedata[i][3] = crimelist[i];
                                crimedata[i][4] = release[i];
                                };
                            for (int i = 0; i < entries; i++) {
                                for (int j = 0; j < 5; j++) {
                                    System.out.println(headers[j]);
                                    System.out.println(crimedata[i][j]);
                                }
                            }
                            final JTable crimetable = new JTable(crimedata, headers);
                            JScrollPane scrollpane = new JScrollPane(crimetable);
                            crimetable.setAutoCreateRowSorter(true);
                            data.add(scrollpane);
                            Show.setVisible(true);
                        }
                    }
                ); 
```

*我只是将这里的代码放入 eclipse 中，然后取出所有单选按钮，它有点工作。虽然我不知道为什么*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:39:42.447

1.  `JTable`不能正确返回`Dimension`or `PreferredSize`，有三种方式

2.  `table.setPreferredScrollableViewportSize(table.getPreferredSize());`但也要注意[带有几行和几列的小型 JTable](https://stackoverflow.com/a/11280226/714968)

3.  也计算（部分）列和（部分）行的所需大小，然后将其`Dimension`以形式传递`table.setPreferredScrollableViewportSize(new Dimension(x, y));`

4.  覆盖`getPreferredSize`为`JScrollPane`

5.  然后`JFrame.pack(before JFrame.setVisible(true))`在屏幕上计算所需的大小

6.  `JPanel`已经`FlowLayout`在API中实现了，我建议改成BorderLayout，然后CENTER区域的JScrollPane可以填满整个（可用）区域，并且可以用JFrame调整大小，不能调整FlowLayout铺设的JComponent（连同它的容器）的大小

7.  必须调用`data.revalidate()`,`data.repaint()`并且`Show.pack()`作为最后的代码行而不是（删除此代码行） Show.setVisible(true);

8.  重命名`Show`为`myFrame`_`show``myButton`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T20:52:13.363

> 具体是`setPreferredScrollableViewportSize`做什么的？它只是强迫桌子总是那么大吗？什么是整包东西？

该`getPreferredScrollableViewportSize()`方法在`Scrollable`接口中定义，在[*实现 Scrolling-Savvy 客户端*](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#scrollable)中进行了讨论。您可以覆盖以更改默认值，而不是*设置首选大小。*[此处](https://stackoverflow.com/a/14429388/230513)说明`getPreferredScrollableViewportSize()`了将高度设为倍数。更多关于首选尺寸的信息可以在[这里](https://stackoverflow.com/q/7229226/230513)找到。方便的是，该方法“使其大小适合其子组件的首选大小和布局”。`getRowHeight()``pack()``Window`

# css - CSS 子菜单显示在正文之外

> ID：16067351
> 
> 赞同：1
> 
> 时间：2013-04-17T18:22:55.643
> 
> 标签：css, position, submenu

我试图找到我的问题的答案，虽然有类似的问题，但没有什么能像我一样跳出来解决我的问题。

我正在使用 CSS 添加一个子菜单，由于某种原因，水平子菜单只会显示在正文之外。你可以在这里看到一个例子[http://jsfiddle.net/sxP94/22/](http://jsfiddle.net/sxP94/22/)。

我需要让子菜单出现在菜单上的投资组合下方。如果有人能帮我弄清楚为什么会这样，我将不胜感激。

这是代码：

CSS

```
body {
margin:0;
padding:0;
width:100%;
color:#929292;
font:normal 12px/1.5em "Liberation sans", Arial, Helvetica, sans-serif;
}
html, .main {
padding:0;
margin:0;
} 
.main {
background:#f8f8f8;
}

a {
color:#0087c7;
text-decoration:underline;
}
.header, .content, .menu_nav, .fbg, .footer, form, ol, ol li, ul, .content .mainbar, .content .sidebar {
margin:0;
padding:0;
}
.header {
}
.header_resize {
margin:0 auto;
padding:0;
width:960px;
}

h1 a, h1 a:hover {
color:#000;
text-decoration:none;
}
h1 span {
}

.menu_nav {
margin:0 auto;
padding:70px 0 0;
height:15px;
float:right;
}
.menu_nav ul {
list-style:none;
padding:0 0 0 1px;
height:15px;
float:left;
background:url(../images/menu_split.gif) no-repeat left center;
}
.menu_nav ul li:first-child {
margin:0;
}
.menu_nav ul li {
margin:0;
padding:0 20px;
float:left;
background:url(../images/menu_split.gif) no-repeat right center;
}
.menu_nav ul li a {
display:block;
margin:0;
padding:0;
font-size:15px;
line-height:18px;
font-weight:bold;
color:#c4c4c4;
text-decoration:none;
text-transform:uppercase;
}
.menu_nav ul li.active a, .menu_nav ul li a:hover {
text-decoration:none;
color:#000;
}
.menu_nav > ul > li > ul {
height:1000px;
left:-99999px;
overflow:visible;
position:absolute;
top:37px;
width:115px;
float: left;

}
.menu_nav > ul > li:hover ul {
left:0;
top:37px;
}
.menu_nav > ul > li > ul > li {
background:none #343434;
border:1px solid #4f4f4f;
float:none;
height:29px;
margin:-1px 0 0;
padding:0 12px;
position:relative;
width:auto;
z-index:1000;
}
.menu_nav ul li ul li a {
color:#ffffff!important;
font-family:Arial, Helvetica, sans-serif;
font-size:14px;
line-height:28px;
text-transform:none;

}
.menu_nav ul li ul li.active a, .menu_nav ul li ul li a:hover {
color:#fff!important;
} 
```

HTML

```
<body>
<div class="main">
<div class="header">
<div class="header_resize">
  <div class="menu_nav">
    <ul>
      <li class="active"><a href="index.html"><span>Home</span></a></li>
      <li><a href="about.html"><span>About</span></a></li>
      <li><a href="services.html"><span>Services</span></a></li>
      <li><a href="portfolio.html"><span>Portfolio</span></a>
            <ul>
        <li><a href="boudoir.html">Boudoir</a></li>
        <li><a href="babies.html">Babies</a></li>
        <li><a href="engagement.html">Engagement</a></li>
        <li><a href="wedding.html">Wedding</a></li>
        <li><a href="lifestyle.html">Lifestyle</a></li>
        <li><a href="family.html">Family</a></li>
        <li><a href="grad.html">Grads</a></li>
        </ul>
        </li>
      <li><a href="blog.html"><span>Blog</span></a></li>
      <li><a href="contact.html"><span>Contact</span></a></li>
    </ul>
  </div>
</div>
</div>
</div> 
```

每当我更改任何左侧数字时，子菜单都会完全停止显示。当我将鼠标悬停在菜单上时，甚至不会出现在身体外部。所以我不知道如何移动它，因为我尝试的任何东西都会让它完全消失。感谢您抽出宝贵时间阅读本文，并提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:25:34.120

给`position: relative`子菜单的父级。给出了子菜单`position:absolute`，因此出现在外面。

```
.menu_nav ul li {
 position: relative;
} 
```

# java - 读取和更新 XML 字符串

> ID：16067353
> 
> 赞同：0
> 
> 时间：2013-04-17T18:22:58.623
> 
> 标签：java, xml, xml-parsing

我有一个包含多个 XML 文档的文本文件。如何解析这个 xml 并更新一些元素值。
当我在同一个文本文件中的单个 xml 或多个 xml 中重复元素名称时，可能存在这种可能性。在这种情况下，我将指的是父元素值。
我研究了 Java XPath API，但它需要单个 XML 文档来解析。在这里，我在单个文件中有多个 xml 作为字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:41:56.120

您可以使用或按每个随附文档的起始标签拆分它们，`"<?xml"`以便您拥有一组结构良好的 xml 文档。

然后，您可以创建一个输出流链并使用技术来使用 SAX 中描述的更新所需元素

[我们可以在运行时使用 SAX 解析器修改 XML 文件，例如删除、更新节点吗？](https://stackoverflow.com/questions/10716533/can-we-modify-the-xml-file-like-deleting-updating-the-nodes-using-sax-parser-at)

[使用 SAX 过滤器将新元素插入 XML 文件](https://stackoverflow.com/questions/10598035/insert-new-element-to-an-xml-file-using-sax-filter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:39:44.983

如果您在一个文件中有多个 XML 文档，您可以将文件拆分为每个文件一个 XML 文档并分别解析每个文件。或者您可以自己添加一个根节点来创建一个有效的 XML 文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:38:07.757

一个有效的 XML 文档必须有一个根元素，您可以在该根元素下指定所有其他元素。这是一个只能存在一个根元素的文档。阅读这里，[XML 规范](http://www.w3.org/TR/xml/#NT-document)点 2.1。

因此，首先尝试将文件转换为有效的 XML 文档，然后使用常规 API 对其进行解析。您必须将整个文件读入一个流，为其添加前缀和后缀，`<root>`并将该流呈现给 XML 解析器。

# ruby-on-rails - 带设计的 ActiveAdmin，登录时不返回 authentication_token

> ID：16067356
> 
> 赞同：4
> 
> 时间：2013-04-17T18:23:05.930
> 
> 标签：ruby-on-rails, devise, activeadmin

我有一个使用 User 模型（而不是默认的 AdminUser 模型）的 ActiveAdmin 应用程序。用户具有角色（空白或管理员）

应用程序/模型/user.rb：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, 
     :recoverable, :rememberable, :trackable, :validatable,
     :token_authenticatable

      attr_accessible :email, :password, :password_confirmation, :remember_me, :role

      has_and_belongs_to_many :groups
      has_many :items, :through => :groups

      before_save :ensure_authentication_token

      def is_admin?
        @role.eql?("admin") ? true : false
      end
end 
```

配置/路由.rb：

```
Lao::Application.routes.draw do
  ActiveAdmin.routes(self)
  devise_for :users, ActiveAdmin::Devise.config
end 
```

在 DeviseCreateUser 迁移中，我添加了：

```
## Token authenticatable
t.string :authentication_token 
```

如果我通过以下 HTTP POST 请求登录：

```
curl -H 'Content-Type: application/json' -H 'Accept: application/json' -XPOST http://localhost:3000/admin/login.json -d '{"user" : {"email" : "user@email.com", "password" : "password"}}' 
```

我没有获得身份验证令牌：

```
=> {"created_at":"2013-04-17T17:11:38Z","email":"user@email.com","id":2,"role":null,"updated_at":"2013-04-17T17:53:37Z"} 
```

如何在响应中获取身份验证令牌？我不知道为什么“created_at”、“email”、“id”、“role”和“updated_at”字段是发送出去的。如何更改此列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T22:19:19.877

请参阅此[答案](https://stackoverflow.com/a/13632264/1908371)以获得相当深入的信息。您需要使用返回所需 json 的内容覆盖 ActiveAdmin::Devise::SessionsController#create。

最简单（但不是理想）的方法就是添加

```
class ActiveAdmin::Devise::SessionsController
  def create
    #your session creation code
  end
  def destroy
    #your session destruction code
  end                 
end 
```

在 config/active_admin.rb 的最底部，它将 AA 的会话创建/销毁方法替换为您的。

有关更简单的替换代码，请参阅[此要点](https://gist.github.com/danielgatis/5666941)和最后一条评论。

# android - 我应该使用哪个 android 模板来创建 android 后台活动？

> ID：16067357
> 
> 赞同：0
> 
> 时间：2013-04-17T18:23:10.493
> 
> 标签：android, eclipse-juno

对不起，但我是 android 开发的新手。我正在尝试创建一个将在后台运行并检查传入的 SMS 消息并显示消息内容的弹出窗口的应用程序。我不知道要为这样的应用程序使用哪个 android 模板。我正在使用日食朱诺。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:24:42.570

您可以查看`Service`s 来做背景工作并发出通知。 [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:53:02.540

我建议你使用广播接收器

public void onReceive(Context ctx, Intent intent) {

```
Bundle extras = intent.getExtras();

if (extras == null)
return ;

Object[] dataArr = (Object[]) extras.get("pdus"); 
```

for (对象数据: dataArr) { SmsMessage sms = SmsMessage.createFromPdu((byte[]) data);

```
 String body = sms.getMessageBody();
        String sender = sms.getOriginatingAddress(); 
```

} }

并在清单中注册您的广播接收器

```
<receiver android:name=".sms.SMSReceiver" android:enabled="true" > 
<intent-filter > 
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
</intent-filter> 
```

```
<uses-permission android:name="android.permission.READ_SMS" />
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

希望这对您有所帮助。

# java - 我想使用 NetBeans IDE 6.9.1 在 Java 中清除我的输出屏幕

> ID：16067358
> 
> 赞同：2
> 
> 时间：2013-04-17T18:23:10.650
> 
> 标签：java, output, netbeans-6.9

## **我的整个代码可以在下面的链接中找到，我链接它是为了更短的帖子**

[http://pastebin.com/6kw8cx3b](http://pastebin.com/6kw8cx3b)

我想清除输出屏幕，我要让程序模拟用户按 ctrl+L，在 NetBeans IDE 6.9.1（我正在使用）中清除我的输出窗口。但是，我的代码出现错误。

```
public static void clearme()
{
    try
    {
        botthing pressbot = new botthing();
        pressbot.keyPress(17); // Holds CTRL key.
        pressbot.keyPress(76); // Holds L key.
        pressbot.keyRelease(17); // Releases CTRL key.
        pressbot.keyRelease(76); // Releases L key.
    }
    catch (AWTException ex)
    {
        Logger.getLogger(LoginPage.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

我的错误是...

找不到符号符号：类 botthing

找不到符号符号：AWTException 类

找不到符号符号：变量记录器

找不到符号符号：类 LoginPage

找不到符号符号：变量级别

**然而！** 添加这些导入语句后

```
import java.awt.AWTException;
import java.util.*;
import java.io.*;
import java.util.logging.Level;
import java.util.logging.Logger; 
```

我的错误是...

找不到符号符号：类 botthing 位置：类 program2

异常 java.awt.AWTException 永远不会在相应的 try 语句的主体中抛出

找不到符号符号：类 LoginPage 位置：类 program2

我不确定这些是什么意思，但我认为 java.awt 错误可能与我的 main() 有关，即 public static void main(String[] args) throws IOException

我要做的就是清除我的输出屏幕。我也试过

```
for(int x=0;x<999;x++)
{
    System.out.print("\b\b\b\b\b");
} 
```

和

```
Runtime.getRuntime().exec("cls"); 
```

但两者都无济于事。

如果我一直在尝试的代码不能轻易修复，或者如果有人知道更简单的方法，我很想知道。为了澄清，我想做的就是在多个 System.out.println 等之后清除我的输出窗口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:27:10.603

botthing 不是 JDK 中定义的东西，如果它是您定义的类，则编译器找不到它。

尝试使用：

```
try {
    Robot pressbot = new Robot();
    pressbot.keyPress(17); // Holds CTRL key.
    pressbot.keyPress(76); // Holds L key.
    pressbot.keyRelease(17); // Releases CTRL key.
    pressbot.keyRelease(76); // Releases L key.
} catch (AWTException ex) {
    Logger.getLogger(LoginPage.class.getName()).log(Level.SEVERE, null, ex);
} 
```

# asp.net - 由于意外的数据包格式，WebRequest 握手失败

> ID：16067361
> 
> 赞同：1
> 
> 时间：2013-04-17T18:23:33.693
> 
> 标签：asp.net, webrequest, handshake, webexception

我有许多 ASP.NET 网站和一个 Web 服务，它们使用相同的代码“登录”到第三方网站。这基本上包括使用 WebRequest 使用我的凭据对网站的登录页面进行 HTTP POST，将生成的 cookie 存储在 CookieContainer 中，并在任何后续 WebRequest 中使用该 CookieContainer 来授权我的网站访问第三方网站上的页面。

代码基本上如下：

```
 public LoginResults Login()
    {
        // Create the webrequest
        var request = CreateInitialWebRequest(LOGIN_URL);
        request.AllowAutoRedirect = false;

        // Set the cookiecontainer, which will be filled with the authentication cookies
        this.cookieContainer = new CookieContainer();
        request.CookieContainer = this.cookieContainer;

        // Set the username and pw in a HTTP POST call
        SetPostContent(request, string.Format(LOGIN_PARAMETERS, this.Username, this.Password));

        // Read the response
        using (var httpWebResponse = (HttpWebResponse)request.GetResponse())
        {
            using (var responseStream = httpWebResponse.GetResponseStream())
            {
                 // Omitted:
                 // read response and determine if login was successful
            } 
        }
    }

    private HttpWebRequest CreateInitialWebRequest(string uri)
    {
        var request = (HttpWebRequest)WebRequest.Create(uri);
        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
        return request;
    }

    private HttpWebRequest CreateWebRequest(string uri)
    {
        var request = this.CreateInitialWebRequest(uri);
        request.CookieContainer = cookieContainer;
        request.Accept = "image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/x-ms-application, application/vnd.ms-xpsdocument, application/xaml+xml, application/x-ms-xbap, application/x-shockwave-flash, */*";
        request.UserAgent = "User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506; .NET CLR 3.5.21022)";
        request.Method = "GET";
        request.Timeout = 10000; // 10 sec
        return request;
    }

    private static void SetPostContent(HttpWebRequest req, string postData)
    {
        req.Method = "POST";
        byte[] bytes = new ASCIIEncoding().GetBytes(postData);
        req.ContentType = "application/x-www-form-urlencoded";
        req.ContentLength = (long)bytes.Length;
        ((WebRequest)req).GetRequestStream().Write(bytes, 0, bytes.Length);
        ((WebRequest)req).GetRequestStream().Close();
    } 
```

这段代码已经工作了很长时间（几个月，半年多）。从这个周末开始，它开始经常失败（我估计有 90% 的时间，但不是 100% 的时间）。我一直看到的错误是：**System.Net.WebException：底层连接已关闭：发送时发生意外错误。---> System.IO.IOException: 由于意外的数据包格式，握手失败。** 堆栈跟踪如下：

```
System.Net.WebException: The underlying connection was closed: An unexpected error occurred on a send. ---> System.IO.IOException: The handshake failed due to an unexpected packet format.
at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToken message, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
at System.Net.TlsStream.CallProcessAuthentication(Object state)
at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)
at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)
at System.Net.ConnectStream.WriteHeaders(Boolean async)
--- End of inner exception stack trace ---
at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
at System.Net.HttpWebRequest.GetRequestStream()
at iRacingForumService.HttpPost.SetPostContent(HttpWebRequest req, String postData)
at iRacingForumService.HttpPost.Login() 
```

当我用谷歌搜索这个错误时，我一直看到的唯一解决方案是禁用 WebRequest 的 KeepAlive 属性和/或将 ProtocolVersion 设置为 HttpVersion10。我尝试了两者（在所有可能的组合中）并且没有任何帮助。

错误并不总是出现，但当它出现时，我可以继续尝试所有我喜欢的，我会一次又一次地收到错误。如果我将它放置几分钟再试一次，我有机会它会工作（一旦成功，它会继续工作一段时间）。

奇怪的是，我没有改变任何东西。这段代码已经运行了几个月没有问题。第三方网站完全有可能最终改变了一些东西，和/或我的虚拟主机提供商改变了一些东西。但以防万一我能做点什么来解决这个问题，我想问问我是不是做错了什么。

我可以联系第三方网站（可能不会得到回复）或我的虚拟主机，但我需要更好地了解到底出了什么问题，因为只是把这个错误扔给他们可能对他们没有帮助。

那么，有什么我可以做的吗，或者我是否有充分的理由突然在我的所有网站上看到这个错误（它们都连接到同一个第三方网站）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:37:49.637

由于这种情况间歇性发生，您可能需要联系服务器管理员并了解发生了什么。由于负载、配置错误或其他一些网络问题，服务器可能会简单地拒绝或关闭连接。

# actionscript-3 - As3 同时按字母和数字排序

> ID：16067374
> 
> 赞同：5
> 
> 时间：2013-04-17T18:24:16.243
> 
> 标签：actionscript-3, sorting

所以我有一种排序方法，旨在按字母顺序对值进行排序，几乎在所有情况下都很好用：

```
function alphabetical(name1, name2):int { 
        if (name1 < name2){ 
            return -1; 
        } else if (name1 > name2){ 
            return 1; 
        }else { 
            return 0; 
        };
    }; 
```

但问题是，当标题中包含数字时。

例如：

```
['abc 8','abc 1','abc 10'] 
```

会排序

```
['abc 1','abc 10','abc 8'] 
```

但我需要做的是让它按字母顺序排序，但是当它遇到一个数字时，会考虑一个数值，因此排序会返回

```
['abc 1','abc 8'.'abc 10'] 
```

我希望有某种现有的正则表达式或算法可以做到这一点，但恐怕我一点也不知道要搜索什么。我所有的排序搜索都是按字母顺序或数字顺序进行的，而不是两者兼而有之。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:40:38.907

我找到了一个转换为 AS3 的 JavaScript 解决方案：[Sort mixed alpha/numeric array](https://stackoverflow.com/questions/4340227/sort-mixed-alpha-numeric-array)。

解决方案看起来像：

```
var reA = /[^a-zA-Z]/g;
var reN = /[^0-9]/g;
function sortAlphaNum(a,b) {
    var aA = a.replace(reA, "");
    var bA = b.replace(reA, "");
    if(aA === bA) {
        var aN = parseInt(a.replace(reN, ""), 10);
        var bN = parseInt(b.replace(reN, ""), 10);
        return aN === bN ? 0 : aN > bN ? 1 : -1;
    } else {
        return aA > bA ? 1 : -1;
    }
}

var arr = ['abc 8','abc 1','abc 10'];
arr.sort(sortAlphaNum);

trace(arr); // abc 1,abc 8,abc 10 
```

# c++ - 如何不继承 C++ 类中的变量

> ID：16067377
> 
> 赞同：9
> 
> 时间：2013-04-17T18:24:29.820
> 
> 标签：c++, inheritance

使用 C++ 类，您可以让派生类从其父类继承变量。如何定义派生类以便`var2`不继承`derivclass`？

```
class mainclass{
public:
    int var1;
    char var2;
    void test(){
        cout<<var1<<var2<<endl;
    }
}
class derivclass : mainclass{
public:
    void test(){
        cout<<var1<<var2<<endl;
        //want a compiler error here that var2 is not defined
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T18:32:37.090

防止成员在 C++ 中被继承的规范方法是声明它`private`。尝试访问它的派生类将引发编译器错误。它看起来像这样：

```
class mainclass{
public:
    int var1;
    void test(){
        cout<<var1<<var2<<endl;
    }
private:
    char var2;
}
class derivclass : mainclass {
    public:
    void test(){
        cout<<var1<<var2<<endl;
        //compiler error here; var2 is not accessible
    }
} 
```

这是实现您所要求的最直接的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T18:32:41.870

你可以做到`private`。但你可能不应该。

它不应该从 Base 继承某些东西的事实意味着它可能根本不应该直接从 Base 继承。

而是创建另一个基类并使这两个类从该基类继承。

```
class Baseclass{
public:
    void test(){
        cout<<var1<<endl;
    }
protected:
    int var1;

}

class mainclass : public Baseclass{
public:
    char var2;
    void test(){
        cout<<var1<<var2<<endl;
    }
}

class derivclass : Baseclass{
public:
    void test(){
        cout<<var1<<endl;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T18:36:11.153

正如其他人所说，您可以在基类中将其设为私有，然后在任何子类中都无法访问它。但是，正如@Dave 所说，它仍然存在于基类中。如果您甚至不希望它作为对子类隐藏的变量存在，那么您必须将其从基类中取出。假设某个变量需要某个变量，那么您必须创建一个包含该变量的新子类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:25:39.557

派生类继承其基类的每个成员。句号。您不能选择性地继承基类的某些部分。

将变量设为私有不会阻止继承。该变量仍然存在，但在一般情况下它是不可访问的。通过各种友谊游戏，您可以使其易于访问。也许这里的部分混乱是由 Java 引起的，其中私有成员不被继承。那是，

```
struct Base {
private:
    int i;
};

struct Derived : Base {
};

Derived d;
d.i = 3; // error: d.i is not accessible 
```

如果`i`未继承，则错误将是`d`没有名为 的成员`i`。

编辑：另一个，也许更有意义的例子

```
void f();

class Base {
    void f();
};

class Derived : Base {
    void g() {
        f(); // error: Base::f is not accessible
}; 
```

使用 Java 的规则，调用 to`f()`是可以的，并且会调用 global `f()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-01T23:07:40.837

作为对所有其他答案的回应（并且可能捎带随机），您可以切换主类和派生类，其中新的主类将具有您在原始派生类中想要的所有成员值，将不需要的那些放入新的派生类（又名原来的主类）

观察：

```
class newMainClass{
public:
    int var1;
    virtual void test(){ //added virtual here so there aren't two definitions for test()
        cout<<var1<<var2<<endl;
        //want a compiler error here that var2 is not defined
    }
}

class newDerivedClass : public newMainClass{
public:
    char var2;
    void test(){
        cout<<var1<<var2<<endl;
    }
} 
```

# svn - 有没有办法删除 svn 工作副本？svn自动删除？

> ID：16067380
> 
> 赞同：6
> 
> 时间：2013-04-17T18:24:59.650
> 
> 标签：svn

有没有办法恢复 svn repo 的结帐？

我不小心在我的用户文件夹中检查了巨大的代码库，手动删除所有内容真的很痛苦，有没有办法删除工作副本？

有没有类似的东西`svn autoclean`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:52:10.820

SVN 不打算这样做，理想情况下您应该检查到一个空白目录。事后诸葛亮是 20/20，所以现在你需要的是 hack。

在您的存储库中创建一个空分支`svn switch`到该分支。这会将您的工作副本更新到该分支，其中没有任何内容，因此应从您的工作副本中删除任何版本控制下的文件。这将留下`.svn`元信息文件和文件夹，您可以单独处理它们，这比单独确定哪些文件受版本控制以及哪些不受版本控制要容易得多

此外，如果您的 SVN 历史记录将修订版 1 作为新的空存储库，您可以`SVN Update`对该修订版进行修改，这将与上面的切换操作相同，但我处理的大多数存储库已经在修订版 1 中有很多文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:34:26.193

`deltree`（在 Windows 上）或`rm -rf`（在其他任何地方）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T01:55:48.913

从@invertedspear 的好主意，我们可以有一个简单的解决方案

```
# find your repo root first
root_url=$(svn info --show-item repos-root-url)

# switch to version 0 (must be empty)
svn sw --ignore-ancestry "$root_url"@0

rm -rf .svn 
```

# c++ - 不能用 istream c++ 重载 >> 运算符

> ID：16067382
> 
> 赞同：2
> 
> 时间：2013-04-17T18:25:09.300
> 
> 标签：c++, class, overloading, operator-keyword

我正在尝试重载 >> 运算符，以便在我的班级中像 cin 一样使用它。这是代码：

```
class Base {
public:
    int mx;
    Base() {}
    Base(int x) : mx(x) {}
    friend std::istream &operator>>(std::istream &, Base &);
    friend std::ostream &operator<<(std::ostream &, const Base &);

};

std::istream &operator >>(std::istream &in, Base &object) {
    in >> object.mx;
    return in;
}

std::ostream &operator <<(std::ostream &out, const Base &object) {
    out << object.mx;
    return out;
}

int main() {

    Base test();
    std::cin >> test;
    std::cout << test;
    system("PAUSE");

    return 0;

} 
```

当我尝试编译时，我得到“错误 C2679: binary '>>' : no operator found 它采用'Base (__cdecl *)(void)' 类型的右手操作数（或没有可接受的转换）”和 Intellisense表示没有运算符 '>>' 匹配这些操作数。

ostream 版本似乎没有任何问题。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:28:01.800

您的代码有**两个**问题。

1）这声明了一个函数而不是定义变量：

```
Base test(); 
```

做到这一点：

```
Base test; 
```

2）您需要参考第二个参数`operator>>`：

```
std::istream &operator >>(std::istream &in, Base& object) 
```

此外，您的代码并不真正适用于`operator<<`，至少它不会做您期望它做的事情，除非您从上面解决问题 1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:33:05.813

您创建对象的方式是错误的，应该用作： `Base test;`

# java - 使用类文件构建 Maven 项目

> ID：16067383
> 
> 赞同：0
> 
> 时间：2013-04-17T18:25:14.190
> 
> 标签：java, maven

我的 Maven 项目使用 spring-security-oauth 的分叉 JAR。

我想添加额外的调试语句，所以我解压缩了 spring-security-oauth-custom.jar。

但是，当我导航到`org/springframework/security/oauth/common/signature`目录时，我看到了`class`文件。

`source`由于无法修改文件，如何改用这些`class`文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:30:02.657

Maven 中的工件是不可变的。假设您让 Maven`spring-security-oauth-custom.jar`从 Maven 存储库中获取，您不能只编辑 JAR 文件的内容并期望一切正常。

您必须执行以下操作：

1.  下载`spring-security-oauth-custom.jar`.
2.  在某处扩展来源。
3.  进行修改。
4.  `groupId`从这个新模块中创建一个新的工件（包括为其创建一个新的 POM 文件，为其提供独特的 Maven 协调，例如`artifactId`和`version`）。
5.  在您自己的工件存储库中安装新工件。
6.  调整您的调用模块（即调用模块`spring-security-oauth-custom`）以依赖于您修改后的版本，而不是原来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:29:43.313

要像这样使用自定义构建的 JAR 文件，您应该将其部署在本地存储库中并将其用作常规依赖项。您可以手动将其放入存储库中，也可以使用[`maven-install-plugin`](http://maven.apache.org/plugins/maven-install-plugin/usage.html). 无论哪种方式，您都应该为它创建一个唯一的版本号，这样它就不会与任何官方 Spring 工件“冲突”。

# django - 在 Django 中保存时迁移模型对象

> ID：16067384
> 
> 赞同：0
> 
> 时间：2013-04-17T18:25:14.393
> 
> 标签：django, django-models, archive

我想在 Django 中创建两个模型

```
class BlogPost(models.Model):
    body = models.TextField()
    delete = models.BooleanField(default=True)

    def save(self, *args, **args):
        if self.delete():
            # move object to Post Archive

class BlogPostArchive(BlogPost):
    date_deleted = models.DateTimeField(auto_now_add=True) 
```

我将如何定义将需要删除的 BlogPost 对象迁移到存档中的方法？

# php - 了解 $_REQUEST。为什么这没有得到 $_REQUEST['submit']？

> ID：16067387
> 
> 赞同：1
> 
> 时间：2013-04-17T18:25:22.137
> 
> 标签：php, mysql, insert

下面的代码能够从数据库中删除行，但不能插入。这是为什么？

```
<?php

    mysql_connect("localhost","formuser","password") or die(mysql_error());
    mysql_select_db("formpractice") or die(mysql_error());

    $name = $_POST['name'];
    $address = $_POST['address'];

    // Add into DB Query
    $insert = "INSERT INTO Users(name, address) VALUES ('$name', '$address')";
    $insert_result = mysql_query($insert);

    // Delete from DB Query
    $delete = "DELETE FROM Users WHERE name = '$name' OR address = '$address'";
    $delete_result = mysql_query($delete);

    if(isset($_REQUEST['submit'])) {
        if ($insert_result) {
            echo "Success";
        } else {
            echo "Failed to submit";
        }
        echo 'Submit Request'; 

    } else if (isset($_REQUEST['delete'])) {
        if ($delete_result) {
            echo "Deleted";
        } else {
            echo "Failed to submit";
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:32:54.813

尝试这个：

```
mysql_connect("localhost","formuser","password") or die(mysql_error());
mysql_select_db("formpractice") or die(mysql_error());

$name = $_POST['name'];
$address = $_POST['address'];

if(isset($_REQUEST['submit'])) {
     // Add into DB Query
    $insert = "INSERT INTO Users(name, address) VALUES ('$name', '$address')";
    $insert_result = mysql_query($insert);
    if ($insert_result) {
        echo "Success";
    } else {
        echo "Failed to submit";
    }
    echo 'Submit Request'; 

} else if (isset($_REQUEST['delete'])) {
    // Delete from DB Query
    $delete = "DELETE FROM Users WHERE name = '$name' OR address = '$address'";
    $delete_result = mysql_query($delete);
    if ($delete_result) {
        echo "Deleted";
    } else {
        echo "Failed to submit";
    }
} 
```

# c# - 如何在更新线程中的针值时刷新我的圆形仪表（C# winforms）？

> ID：16067388
> 
> 赞同：0
> 
> 时间：2013-04-17T18:25:26.933
> 
> 标签：c#, .net, multithreading, winforms

我用来制作一个从串行端口读取一些数据并将这些数据显示在圆形仪表上的项目。我制作了一个用于接收数据的线程，一个用于发送数据的线程和一个用于每个量规更新针值的线程。

我使用 11 个 dotnet 圆形仪表，每个仪表包含 2 个刻度和 2 个指针。在每个仪表的每个线程中，我制作了一个循环，缓慢更新针值，直到它达到我想要的值，没有这个循环，针突然跳到该值，我不会发生这种情况，所以当前值 +/- 0.003指针直到它到达该值。

我的问题是，当我单独运行每个仪表时，它工作正常，但是当所有仪表同时工作时，表单冻结，然后突然所有指针都跳转到该值如何处理这个问题？？？？（我不知道为什么会发生这种情况，假设每个仪表都在单独的线程中工作，为什么表格会冻结？）

我只想刷新针而不是整个仪表。

（每个仪表代表从 A 到 H 标记的电机） `My code:` [http://ideone.com/GntXoE](http://ideone.com/GntXoE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:02:11.437

Winforms 不支持从后台线程更新 UI 控件。每当您想从后台线程更新 UI 控件时，都需要从后台线程向 UI 线程传递消息，并在 UI 线程上执行控件的更新。

一种方法是使用[System.Threading.SynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)。在主 UI 线程上运行时将同步上下文捕获到一个变量中，然后将该上下文传递给每个后台线程。当后台线程需要更新 UI 控件时，调用 context.Post 并传入将在 UI 线程上执行的回调。

像这样的东西：

```
context.Post(() => { control.Percent += 10; }); 
```

这将使 UI 保持在 UI 线程中工作，其中 UI 线程消息循环将在表单和控件更改状态时处理它们的重绘。使用 Post() 而不是 Send() 将使您的后台线程立即返回其任务，而无需等待 UI 工作完成。Send() 将阻塞后台线程，直到 UI 工作完成。

# php - 如何使用 PDO 指定字符集？

> ID：16067389
> 
> 赞同：1
> 
> 时间：2013-04-17T18:25:27.283
> 
> 标签：php, mysql, pdo

我正在使用 PDO 将数据从一个数据库迁移到另一个数据库。不幸的是，我需要将字符集设置为 latin1，否则法语字符会搞砸。我已经完成了我的研究，显然这应该有效：

```
$DBH = new PDO("mysql:host=$host;dbname=$dbname;charset=latin1", $user, $pass); 
```

但不幸的是，事实并非如此。我也试过：

```
$DBH->exec("set names latin1"); 
```

也

```
$DBH->exec("SET NAMES 'latin1';
            SET CHARACTER
            SET latin1;"); 
```

在初始化语句之后，但没有找到任何运气。有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:31:42.253

感谢所有的帮助。

我弄清楚了问题所在。我做得对，但是当我将数据插入新数据库时，我不得不将字符集重新设置为 utf8。如果我的问题更清楚，我相信你们会知道的，哈哈。

# mysql - Mysql Query Left Join with Not in

> ID：16067390
> 
> 赞同：0
> 
> 时间：2013-04-17T18:25:33.347
> 
> 标签：mysql, join

对于给定的loanID，如果该loanID 已经存在于table1 中，但不在table2 中，我想选择所有属于该loanID 的项目名称，否则如果该loanID 存在于两个表（table1 和table2）中并且在这种情况下还需要balanceDue>0选择 itemnames 属于该 loanid。

表格1：

```
loanID, itemId, itemName, itemQty, balanceQty 
```

表2：

```
loanID, itemId, GRN, itemName, balanceDue, qty 
```

* * *

样本数据

**情况1**

表格1

```
loanID  itemId     itemName    
LN1     IT1        Item001        
LN1     IT2        Item002        
LN1     IT3        Item003        
LN2     IT1        Item001        
LN2     IT2        Item002        
LN2     IT3        Item003        
LN3     IT1        Item001        
LN3     IT2        Item002        
LN3     IT3        Item003 
```

表 2

```
loanID  itemId  itemName  balanceDue
LN1     IT1     Item001   0
LN1     IT2     Item002   0
LN1     IT3     Item003   0
LN2     IT1     Item001   0
LN2     IT2     Item002   0
LN2     IT3     Item003   1000 
```

如果我选择 LN3 作为 LoanID，由于 LN3 不在表 2 中，我需要获取属于 LN3 的所有项目名称 LN3 的结果必须是

```
item001, item002, item003 
```

**案例2**

如果我在表 2 中选择 LN3 作为 LoanID，如果任何项目的 balanceDue>0 属于 LN3，则必须生成这些项目名称。

LN3 的结果必须是

```
item001, item003 
```

如果我选择 LN2 作为loanID，则 LN2 的结果必须是

```
item001 
```

表格1

```
loanID  itemId  itemName    
LN1 IT1 Item001        
LN1 IT2 Item002        
LN1 IT3 Item003        
LN2 IT1 Item001        
LN2 IT2 Item002        
LN2 IT3 Item003        
LN3 IT1 Item001        
LN3 IT2 Item002        
LN3 IT3 Item003 
```

表 2

```
loanID  itemId  itemName    balanceDue
LN1 IT1 Item001        0
LN1 IT2 Item002        0
LN1 IT3 Item003        0
LN2 IT1 Item001        300
LN2 IT2 Item002        0
LN2 IT3 Item003        1000
LN3 IT1 Item001        500
LN3 IT2 Item002        0
LN3 IT3 Item003        0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:32:24.387

尝试

```
SELECT
  table1.loanID,
  GROUP_CONCAT( COALESCE( table2.itemName,table1.itemName ) )
FROM
  table1 
  LEFT JOIN table2 ON table1.loanID = table2.loanID
WHERE
  table2.loanID IS NULL OR balanceDue>0
GROUP BY
  table1.loanID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:28:18.430

```
SELECT
  table1.loanID,
  COALESCE(table2.itemName, table1.itemName)
FROM
  table1 LEFT JOIN table2 ON table1.loanID = table2.loanID
  AND balanceDue>0 
```

请[在此处](http://sqlfiddle.com/#!2/a4199/1)查看小提琴。如果loanID 存在于table2 中，但没有balanceDue>0 的行，这将返回table1.itemName。

**编辑**

我想你可能需要这个查询：

```
SELECT
  table1.itemName
FROM
  table1 LEFT JOIN table2
  ON table1.loanID = table2.loanID
  AND table1.itemId = table2.itemId                   
WHERE
  table1.loanID='LN3' AND
  COALESCE(table2.balanceDue>0, TRUE) 
```

或这个：

```
SELECT DISTINCT
  COALESCE(table2.itemName, table1.itemName)
FROM
  table1 LEFT JOIN table2
  ON table1.loanID = table2.loanID                   
WHERE
  table1.loanID='LN3' AND
  COALESCE(table2.balanceDue>0, TRUE) 
```

[在这里](http://sqlfiddle.com/#!2/79844/12)拉小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:44:30.867

```
SELECT T1.loanId, T1.itemName
FROM table1 AS T1
WHERE T1.loanId IN 
    (SELECT loanId FROM table2 WHERE loanId=T1.loadId AND balanceDue>0)
AND T1.loanId=? 
```

# c# - 用于 C#/.NET 代码分析的 API

> ID：16067395
> 
> 赞同：2
> 
> 时间：2013-04-17T18:25:49.107
> 
> 标签：c#, .net

我不确定标题是否准确描述了我要问的内容...

基本上，Visual Studio 如何查看 CSPROJ 中的代码文件并确定方法或变量的引用，或者`using`代码中是否未使用语句？显然它不仅仅是做简单的文本解析，而且它似乎在构建之前就可以工作，所以我不认为它引用了程序集/CLR。

如果我让用户选择他们的 CSPROJ 或 SLN 文件并能够报告`using`文件中未使用的语句，或者在他们的代码中的任何地方都没有被调用的方法/变量，是否有我可以从外部应用程序绑定的 API ?

我之所以问，是因为我正在考虑构建某种报告工具来显示可能发生代码清理的区域，但我不确定从哪里开始。

谢谢！

编辑：作为后续问题，是否已经有类似的工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T18:34:53.660

除了提供 Intellisense 之类的功能之外，Visual Studio 会即时进行编译，以确定许多类似的事情。

现在，编译器都是一个“黑匣子”，不能直接使用。[Roslyn 项目](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)的目标是改变这一点，让所有代码分析都可用。它目前在 CTP 中，现在可以使用。

> 编辑：作为后续问题，是否已经有类似的工具？

许多第三方扩展，例如[Resharper](http://www.jetbrains.com/resharper/)，提供了很多这种功能（例如他们的[安全删除](http://www.jetbrains.com/resharper/features/code_refactoring.html)重构和[解决方案范围检查](http://www.jetbrains.com/resharper/features/code_analysis.html)）。

# php - 在 PHP 中解析 HTML 时提供的空字符串作为输入

> ID：16067400
> 
> 赞同：0
> 
> 时间：2013-04-17T18:26:11.363
> 
> 标签：php, wordpress

我正在尝试制作一个 Wordpress 插件，因此，我正在尝试操作我的 DOM（帖子内容）。目前我有这个代码：

```
<?php
function mb_find_my_image( $content ) {
    if( is_home() ) { /* if is home start */

      $dom = new domDocument;
      $dom->loadHTML($content);
      $dom->preserveWhiteSpace = false;

    } /* if is home end */
    return $content;
}
add_filter( 'the_content', 'mb_find_my_image' );
?> 
```

但我总是收到以下错误：

> 作为输入提供的空字符串

我尝试使用任何其他具有 html 元素的自定义字符串并且它可以工作。我也尝试过使用 var_export($content, true)，这在一定程度上解决了问题，但我得到了以下错误：

> 在非对象上调用成员函数 getAttribute()

我做错了什么？我正在使用 WAMP 服务器在本地计算机上运行此脚本。

var_dump($content) 给了我：

> 空
> 字符串帖子内容（即帖子的实际html）...（长度= 805）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:37:13.547

我已经解决了这个问题。主要问题是我从 index.php 调用函数 (mb_find_my_image)，在我从 index.php 中删除调用之后，一切正常。

# java - Apache CXF 从 SOAP 反序列化对象后是否可以调用后反序列化方法？

> ID：16067407
> 
> 赞同：0
> 
> 时间：2013-04-17T18:26:42.397
> 
> 标签：java, soap, cxf

我正在使用 Apache CXF 来提供 SOAP 网络服务。有没有办法可以配置 CXF 反序列化以调用新反序列化对象上的方法来更新某些内部状态？

具体来说，对象从 SOAP 请求反序列化后需要构建一些列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T00:30:20.883

您可以创建一个[拦截器](http://cxf.apache.org/docs/interceptors.html)并获得对新反序列化对象的访问权限。

像那样：

```
import org.apache.cxf.interceptor.Fault;
import org.apache.cxf.message.Message;
import org.apache.cxf.phase.AbstractPhaseInterceptor;

public class PreInvokeInterceptor extends AbstractPhaseInterceptor<Message> {
    public PreInvokeInterceptor() {
        super(Phase.PRE_INVOKE);
    }

    public void handleMessage(Message message) throws Fault {
            MessageContentsList mcl = message.getContent(MessageContentsList.class);
            YourObject obj = (YourObject) mcl.get(0);
            obj.updateInternalState();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:31:02.890

如果您使用的是 JAXB，则可以使用[Unmarshaller.Listener.afterUnmarshal](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Unmarshaller.Listener.html#afterUnmarshal%28java.lang.Object,%20java.lang.Object%29)在从 XML 解组后获取对象。您需要编写一个实现 Unmarshaller.Listener 接口的类，然后使用 CXF 的[JAXBDataBinding.setUnmarshallerListener](http://cxf.apache.org/javadoc/latest/org/apache/cxf/jaxb/JAXBDataBinding.html#setUnmarshallerListener%28javax.xml.bind.Unmarshaller.Listener%29)将该类注册为侦听器。

这个Listener接口不是CXF特有的，有对应的[Marshaller.Listener](http://docs.oracle.com/javaee/5/api/javax/xml/bind/Marshaller.Listener.html)接口。

# ios - IB - 将项目拖入`scrollview`而不重新定位？

> ID：16067408
> 
> 赞同：0
> 
> 时间：2013-04-17T18:26:43.610
> 
> 标签：ios, xcode, autolayout

不幸的是，我决定使用 IB 制作我的应用程序，我发现这是一个糟糕的选择，但恐怕我必须处理它。

因此，最初，我将所有字段、按钮等放置在一个视图中，底部留有足够的空间，以便在 3.5 英寸屏幕上整齐地显示所有内容。

那是一个可怕的主意。现在我只需要在屏幕上添加一些东西，虽然它在 4" 模式下工作，但 3.5" 不走运。“啊哈，”我想，“我需要做的就是`scrollview`在我的屏幕上添加一个包含所有内容的内容，对于 3.5”，它将滚动而不是重新定位。

长话短说，我添加了我的`subview`，把它作为我屏幕上的最后一个对象，将所有项目拖到其中......我弄得一团糟。

![真是一团糟](https://i.stack.imgur.com/6RRRw.png)

这不就是花花公子吗。

无论如何，我想知道当我这样做时是否有办法让 Xcode 不重新定位所有这些元素，或者，是否有另一种方法可以让所有这些元素成为`subviews`this `scrollview`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:31:22.393

首先从左侧的树中选择所有视图。然后单击视图控制器的框架（黑色状态栏，而不是控制器内的对象）。现在按 cntl-c 复制所有这些。现在双击您希望添加它们的视图并粘贴它们。这将保留所有视图的布局位置。如果它们没有完全复制到位置，只需按住 shift 并按箭头键将它们放置到位。将视图拖到另一个视图中会将所有位置重置回中心。

# html - div 高度未扩展到所有元素

> ID：16067417
> 
> 赞同：0
> 
> 时间：2013-04-17T18:27:06.530
> 
> 标签：html, css

我有一个 div 用作简单的模态弹出窗口。这个 div 的高度设置为自动，但是当我查看它时，它并没有一直向下扩展以覆盖其中的所有元素。关于如何使 div 高度覆盖所有元素的任何想法？

任何帮助将不胜感激。

谢谢，

这是html

```
<div id="basic-modal-content">
      <h3 id="eventtitle"></h3>
      <p>Below you will find information on the clicked event including a brief description, start date, and the end date, location, and a link, if provided.</p>
      <br />
      <code><span style="color:#A17E13"><b>Description</b></span> - <span style="color:#006400" id="eventdescription"></span></code>
      <code><span style="color:#A17E13"><b>Start</b></span> - <span style="color:#006400" id="eventstart"></span></code>
      <code><span style="color:#A17E13"><b>End</b></span> - <span style="color:#006400" id="eventend"></span></code>
      <code><span style="color:#A17E13"><b>Location</b></span> - <span style="color:#006400" id="eventlocation"></span></code>
      <code><span style="color:#A17E13"><b>Link</b></span> - <span style="color:#006400" id="eventurl"></span></code>

      <input type="button" id="deletecalendarentry" style="display:none" value="DELETE" />
</div> 
```

这是CSS

```
#simplemodal-container {height:auto; width:auto; color:#006400; background-image:url(../Images/back.png); border:4px solid beige;  padding:12px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:37:22.937

试试这个**[jsFiddle](http://jsfiddle.net/Mee3/MWcSk/)。**

`#simplemodal-container`我已将您的 CSS ID 名称从To更改`#basic-modal-content`。

它对我有用，所以如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:36:42.967

您可以为 div 提供一些最小高度

```
#div{min-height:50px;} 
```

# c - 以格式字符串漏洞攻击访问数组的第二个元素

> ID：16067427
> 
> 赞同：9
> 
> 时间：2013-04-17T18:27:43.993
> 
> 标签：c, string, security, exploit, format-string

我正在研究一个格式字符串漏洞实验室，在那里我们得到了以下代码：

```
#define SECRET1 0x44
#define SECRET2 0x55

int main(int argc, char *argv[])
{
  char user_input[100];
  int *secret;
  int int_input;
  int a, b, c, d; /* other variables, not used here.*/

  /* The secret value is stored on the heap */
  secret = (int *) malloc(2*sizeof(int));

  /* getting the secret */
  secret[0] = SECRET1; 
  secret[1] = SECRET2;

  printf("The variable secret's address is 0x%.8x (on stack)\n", &secret);
  printf("The variable secret's value is 0x%.8x (on heap)\n", secret);
  printf("secret[0]'s address is 0x%.8x (on heap)\n", &secret[0]);
  printf("secret[1]'s address is 0x%.8x (on heap)\n", &secret[1]);

  printf("Please enter a decimal integer\n");
  scanf("%d", &int_input);  /* getting an input from user */
  printf("Please enter a string\n");
  scanf("%s", user_input); /* getting a string from user */

  /* vulnerable place */
  printf(user_input);
  printf("\n");

  /* Verify whether your attack is successful */
  printf("The original secrets: 0x%x -- 0x%x\n", SECRET1, SECRET2);
  printf("The new secrets:      0x%x -- 0x%x\n", secret[0], secret[1]);
  return 0;
  } 
```

我们根本不应该修改代码。仅使用输入，我们有 4 个目标：使程序崩溃，打印 secret[1] 处的值，修改 secret[1] 处的值，以及将 secret[1] 处的值修改为预定值。

我得到的示例输出是：

```
The variable secret's address is 0xbfffe7cc (on stack)
The variable secret's value is -x0804a008 (on heap)
secret[0]'s address is 0x0804a008 (on heap)
secret[1]'s address is 0x0804a00c (on heap)
Please enter a decimal integer
65535
Please enter a string
%08x.%08x.%08x.%08x.%08x.%08x.%08x%08x.
bfffe7d0.00000000.00000000.00000000.00000000.0000ffff.0804a008.78383025 
```

因此，通过输入 8 "%08x"s，我打印了 secret + 4 的地址，然后我打印了整数 a、b、c 和 d 的地址——但由于我从未给它们一个值，所以它们没有指向任何地方，只显示0。接下来是我输入的小数点，选择这样“ffff”将清晰可见。接下来是 secret[0] 的地址，然后我进入程序中存储的其他值。

如果我要输入`AAAA.%08x.%08x.%08x.%08x.%08x.%08x.%08x%08x.`.0804a008 之后将是 .41414141，因为字符串输入中的 A 将存储在那里。

程序很容易崩溃：字符串输入上足够的 %s 会导致段错误。不过，现在我需要读取 secret[1] 的值，我完全迷失了。我试图以某种方式将地址放在堆栈上，方法是将其放在字符串的开头，如下所示：`\xd0\xe7\xff\xbf_%08x.%08x.%08x.%08x.%08x.%08x.%s`，但地址没有被推送到任何地方，我只是打印 secret[0] （好奇的是'D'）。我尝试了各种地址，但过了一会儿我意识到我只是将它们全部存储为一个字符串，这些 A 之前出现过。他们没有被转换为十六进制或任何东西。

我在 SA 和其他地方看到了很多关于此代码的讨论，但我还没有看到有人谈论你如何在 secret[1] 上获得这些值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T20:41:12.837

要访问 secret[1]，您必须输入它的地址作为整数输入。

```
Please enter a decimal integer
73740
Please enter a string
%08x.%08x.%08x.%08x.%08x.%08x.%s
00008744.bead4ca4.bead4cc4.bead4dc4.00000001.000000a8.U 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T20:18:26.180

诀窍是`%n`在用户指定的格式字符串中使用说明符。 `%n`表示获取到目前为止写入的字节数*并将它们存储在下一个参数指向的地址*。如果您没有为 提供足够的参数`printf`，那么它写入的地址就是堆栈中的下一个值。如果您可以利用该地址成为您想要的地址，那么您基本上可以在内存中的任何位置写入一个 4 字节整数。

```
// Normal usage: count receives the value 14, since 14 bytes were written when
// the %n was encountered
int count;
printf("Hello, world!\n%n", &count);

// UNDEFINED BEHAVIOR: The value 14 will get written to some unknown location in
// memory 
printf("Hello, world!\n%n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-13T17:19:07.573

您实际上可以直接在格式字符串中指定偏移量。

例如。

```
$ printf "ADDRESS_IN_DECIMAL\n%%ADDRESS_OFFSET\$p_%%ADDRESS_OFFSET\$s\n" | ./vul_prog 
```

# asp.net-mvc - ASP.NET MVC 4 SPA 如何删除重定向到登录页面？

> ID：16067433
> 
> 赞同：3
> 
> 时间：2013-04-17T18:28:06.653
> 
> 标签：asp.net-mvc, asp.net-mvc-4, authorization, single-page-application

我们正在与 SPA (MVC 4 + angularjs) 网站合作，我们希望拒绝未经授权的访问者访问静态文件。目前，对这个静态文件的所有请求都以重定向到登录页面结束。我们希望收到 401 或 403 错误代码。也可以使用 ajax 请求此文件。

根**web.config**：

```
 <authentication mode="None">
    </authentication> 
```

**静态文件夹中的**Web.config ：****

 **```
<configuration>
  <system.web>
    <authorization>
      <deny users="?"/>
    </authorization>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <clear/>
      <add type="System.Web.StaticFileHandler" path="*" verb="*"  name="StaticFileHandler"/>
    </handlers>
  </system.webServer>
</configuration> 
```

我想知道我们如何拒绝未经授权的访问者访问静态文件（不重定向到登录页面）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T17:20:12.050

我最终得到了这个解决方案：

1.  将*web.config*添加到静态文件夹。

    > ```
    > <configuration>
    >   <system.web>
    >     <authorization>
    >       <deny users="?"/>
    >     </authorization>
    >   </system.web>
    >   <system.webServer>
    >     <handlers>
    >       <clear/>
    >       <add type="System.Web.StaticFileHandler" path="*" verb="*"  name="StaticFileHandler"/>
    >     </handlers>
    >   </system.webServer>
    > </configuration> 
    > ```

2.  添加抑制重定向到登录页面的特殊模块（在站点根*web.config中）。*

> ```
> <modules runAllManagedModulesForAllRequests="false">   
>   <add 
>     name="SuppressRedirect" 
>     type="Web.Common.Modules.SuppressRedirectModule, Web.Common"/>
> </modules> 
> ```

以及下面的模块代码

```
using System;
using System.Web;

namespace Web.Common.Modules
{
    public class SuppressRedirectModule : IHttpModule
    {
        public void Init(HttpApplication context)
        {
            context.AuthenticateRequest += this.OnEndRequest;
        }

        private void OnEndRequest(object sender, EventArgs eventArgs)
        {
            HttpContext context = ((HttpApplication)sender).Context;
            context.Response.SuppressFormsAuthenticationRedirect = true;
        }

        public void Dispose()
        {
        }
    }
} 
```**

# c# - 正则表达式 - 如何匹配 xml 值

> ID：16067439
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:28:31.697
> 
> 标签：c#, .net, regex

我想使用正则表达式来获取`<AirlineCode>`和`</AirlineCode>`标签之间的航空公司代码。

我只想要`<AirlineCode>`标签中的`<Flight>`标签值。外面有更多`<AirlineCode>`标签，我不想要它们的航空公司价值。

我尝试使用下面的正则表达式，但无论提到的位置考虑如何，它都会给我所有航空公司代码。请帮忙。

```
 var regex = new Regex(@"<AirlineCode>(.*?)</AirlineCode>", RegexOptions.IgnoreCase);

        Match m = regex.Match("<PNRViewRS><AirGroup><Flight CnxxIndicator=\"N\"><Arrival></Arrival><Carrier><AirlineCode>DL</AirlineCode></Carrier></Flight><Flight CnxxIndicator=\"N\"><Arrival></Arrival><Carrier><AirlineCode>AA</AirlineCode></Carrier></Flight></AirGroup></PNRViewRS>");
        int matchCount = 0;
        while (m.Success)
        {
            Console.WriteLine("Match" + (++matchCount));
            for (int i = 1; i <= 2; i++)
            {
                Group g = m.Groups[i];
                //do stuff...
            }
            m = m.NextMatch();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:31:52.827

通常，尝试使用正则表达式解析 XML 是个坏主意。原因是正则表达式表达能力不足，即使有反向引用等。评论中链接的问题值得一读，以了解为什么这通常是一个坏主意。

也就是说，如果您确定文件的格式，并且您也愿意进行一些非正则表达式解析，那么您就可以成功。

在您的情况下，您基本上有：

```
<Flight>
    <AirlineCode>
    </AirlineCode>
<Flight>
<AirlineCode>
</AirlineCode>
<Flight>
    <AirlineCode>
    </AirlineCode>
<Flight> 
```

并且您想要`<AirlineCode>`标签中出现的所有`<Flight>`标签。

解决此问题的方法是`<Flight>`使用一个正则表达式提取标签及其内容，然后使用另一个正则表达式`<AirlineCode>`从这些提取的标签中提取`<Flight>`标签。不要尝试在单个正则表达式中执行此操作。你不会成功。

如果您的数据真的那么简单，那么这将起作用。我不会说我推荐这种方法。有太多事情可能出错。数据格式有一种令人痛苦的变化趋势，如果格式发生一点点变化，那么脆弱的正则表达式解决方案很可能会崩溃。XML 解析器解决方案将更加健壮。

# android - 如何将按钮操作与surfaceview画布drawables连接起来？

> ID：16067441
> 
> 赞同：1
> 
> 时间：2013-04-17T18:28:41.823
> 
> 标签：android, button, canvas, drawable, surfaceview

我的问题是我不知道如何在单击我的按钮时更改可绘制画布的位置，该按钮位于主要活动中而不是surfaceview，因此工作代码应该在surfaceview上，这就是我所拥有的

```
public class JumpOnClick extends Activity implements OnClickListener{

DrawingSurface ds;
FrameLayout frm;
Button btnC;
int color=0xfff00000;
@Override

 public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
ds=new DrawingSurface(this);
setContentView(R.layout.activity_jump_on_click);

frm=(FrameLayout)findViewById(R.id.frameLayout);
frm.addView(ds);
btnC=(Button)findViewById(R.id.buttonColor);

btnC.setOnClickListener(this);

}

@Override

public void onClick(View v) {

//   how to connect  actions in here for my sprites on my surfaceview

// for example         AnimatedSprite a = new AnimatedSprite();             
//      if(b == null)
//b=BitmapFactory.decodeStream(res.openRawResource(R.drawable.explosion));          
//                   a.Initialize(b, 120, 159, 7, 20, true);
//                  mSprites.add(a);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T11:03:26.827

如果我理解正确，请在 SurfaceView 类中分别定义两个静态浮点变量 x 和 y，当您在 SurfaceView 中进行绘图时，只需将此变量用作 SurfaceView 的绘图方法中的位置参数。然后在按钮的 onClick 方法中返回您的活动，只需更改这些 x,y 变量，因为您无需创建对象即可访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T15:59:29.087

我相信你需要给你的按钮添加布局规则才能将它放置在Surfaceview中（实际上一个按钮不能添加到SurfaceView，你需要在你的Activity中创建一个带有Layout的错觉并将按钮放置到这个Layout中）。

您可以在此视频中查看这个简单的解决方案[https://www.youtube.com/watch?v=8qE9TQjQ5no&t=31s](https://www.youtube.com/watch?v=8qE9TQjQ5no&t=31s)

即使用Relativelayout 将按钮放置在顶部和底部的SurfaceView。我的观点是使用该技术，您既不需要 ontouchevent 方法，也不需要 x,y 位置，如果您在 ondraw 方法中创建一个按钮（那么不会是按钮而是位图图像），您将需要它......我的意见是如果位置是问题，请坚持第一个解决方案，以便它可以作为 onclicklistener 的按钮。

# sql - 根据条件使用top

> ID：16067442
> 
> 赞同：0
> 
> 时间：2013-04-17T18:28:42.230
> 
> 标签：sql, sql-server-2008-r2

我的存储过程中有一个参数，它指定要选择的行数。（可能的值：0-100。0 表示**选择所有行**）

例如`@Rows = 5;`

然后我可以这样做：

```
Insert into @MyTableVar   
   Select Top(@Rows) * 
   from myTable 
```

现在，正如我之前所说，如果提供 0，我需要返回所有行。
这是我需要的伪代码：

```
if (@Rows=0) then select * else select top(@Rows) * 
```

我发现有[SET ROWCOUNT](http://msdn.microsoft.com/en-us/library/ms188774.aspx)接受 0 以返回所有行，但我需要插入到不支持的表变量中`ROWCOUNT`。

没有动态sql是否可以实现这一点？

（我知道我可以编写一个简单的 if else 语句和重复查询，但是我有非常复杂的查询并且它们有很多，我只是想避免代码重复）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:35:34.927

一种方法是只输入一个大数字：

```
set @Rows = 5;
declare @RowsToUse = (case when @Rows = 0 then 1000000000 else @Rows end);

select top(@RowsToUse) * from myTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:39:03.420

首先，您缺少该`ORDER BY`子句，因为您使用的是`TOP`. 你可以这样做：

```
SET @Rows = 5;

WITH CTE AS
(
    SELECT  *,
            RN = ROW_NUMBER() OVER(ORDER BY Id) --put the right order here
    FROM myTable
)
INSERT INTO @MyTableVar
SELECT YourColumns
FROM CTE
WHERE RN <= @Rows OR @Rows = 0 
```

# php - 从哪个表格提交元素（类型为按钮）

> ID：16067443
> 
> 赞同：0
> 
> 时间：2013-04-17T18:28:57.160
> 
> 标签：php, jquery, forms, button

我进行了很多搜索，但找不到/理解解决此问题的方法。

我必须在同一页面中填写表格。

```
<form id="inquiry_theme_form" name="inquiry_theme_form" action"#" method="post">

                                /*Some fields etc*/

<button type="button" value="Go" id="inq_btn_sumbit" name="inq_btn_sumbit">Go</button>
</form>

<form id="booking_form" name="booking_form" action"#" method="post">

                              /*Some fields etc*/

<button type="button" name="book_btn_submit" id="book_btn_submit">Book now</button>
</form> 
```

我将按钮的类型设置为按钮，因为我想在发布之前验证一些字段。因此，如果用户填写了所有字段，我将使用 jquery 发布表单。

```
$("#inq_btn_sumbit").click(function() {
var the_form = $("#inquiry_theme_form");

                /* Validation */
         if(error){
                 /*Warn the user*/
        }
        else{
            the_form.submit();
        }
});

$("#book_btn_submit").click(function() {
var the_form = $("#booking_form");

                /* Validation */
         if(error){
                 /*Warn the user*/
        }
        else{
            the_form.submit();
        }
}); 
```

在我拥有表单的同一页面上，我在页面顶部有此代码。

```
if($_SERVER['REQUEST_METHOD'] == "POST"){
       /*I WANT HERE TO SOMEHOW CHECK WHICH FORM HAS BEEN SUBMITTED*/
} 
```

那么我如何识别用户按下了哪个按钮，即提交了哪个表单

对不起我的英语，谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:31:53.667

您可以使用`<input type="hidden" name="form" value"form1" />`.

# javascript - ajax.js 导入问题

> ID：16067445
> 
> 赞同：0
> 
> 时间：2013-04-17T18:29:01.103
> 
> 标签：javascript, jquery, ajax

在**index.html**中，我使用代码导入了**ajax.js**：

```
$(function() {
    $('a[name!=modal][name!=skipJQuery]').click(function(){
        $('#content').load($(this).attr('href'));
        $('#content').scrollTop();

            return false;
}); }); 
```

*#content*是一个加载页面的**div 。***#content*中的页面无法识别在**index.html**之上导入的**ajax.js。**我怎样才能解决这个问题？*..让#content*中加载的页面识别**ajax.js**？

 ****** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:29:22.637

Is it the click event not firing on links in the imported content? If so, maybe try using the 'on' event binder.

```
$("body").on("click", "a[name!=modal][name!=skipJQuery]", function(){
    $('#content').load($(this).attr('href'));
    $('#content').scrollTop();
    return false;
}); 
```*****

# eclipse - 在 ode 中运行 bpel 进程时出错

> ID：16067448
> 
> 赞同：2
> 
> 时间：2013-04-17T18:29:24.170
> 
> 标签：eclipse, tomcat, eclipse-plugin, bpel

我正在尝试学习使用 bpel。我选择 Eclipse Bpel Designer 和 apache ode（在 tomcat 服务器上）进行实验。我试图建模的过程是一个贷款过程。它有 3 项服务：creditRate 服务（用 eclipse bpel 设计器编写并在经过测试之前进行部署）、[货币转换器服务](http://www.webservicex.net/ws/WSDetails.aspx?WSID=10&CATID=2)和主编排流程。虽然我在从 Eclipse 测试 Web 服务时没有部署错误，但会发生以下错误：

> 错误 [ExternalService] 向 Axis2 发送消息以获取 ODE mex {PartnerRoleMex#hqejbhcnphr87mcnd0np43 [PID {CreditBuletinNamespace}CreditBuletin-137] 调用 org.apache.ode.bpel.epr.WSAEndpoint@a64453.getRating(...) 状态请求} org 时出错.apache.ode.axis2.OdeFault：未找到绑定操作：服务 { [http://www.webserviceX.NET/](http://www.webserviceX.NET/) }CurrencyConvertor 端口 CurrencyConvertorSoap 名称 getRating。在 org.apache.ode.axis2.util.SoapMessageConverter.createSoapRequest(SoapMessageConverter.java:154)

和

> 调用期间失败：错误向 Axis2 发送消息以获取 ODE mex {PartnerRoleMex#hqejbhcnphr87mcnd0np43 [PID {CreditBuletinNamespace}CreditBuletin-137] 调用 org.apache.ode.bpel.epr.WSAEndpoint@a64453.getRating(...) 状态请求} 21 ：09：14,421 INFO [BpelRuntimeContextImpl] ActivityRecovery：注册活动 19，失败原因：向 Axis2 发送消息时出错，用于 ODE mex {PartnerRoleMex#hqejbhcnphr87mcnd0np43 [PID {CreditBuletinNamespace}CreditBuletin-137] 调用 org.apache.ode.bpel.epr.WSAEndpoint @a64453.getRating(...) 状态请求} 在频道 33

有人可以帮我解决吗？我已经搜索了一些解决方案，但没有找到一个有效的解决方案。可能是由于我知识贫乏，我没有正确搜索或没有做正确的事情。因为这个描述可能会令人困惑，所以我附上了我的解决方案，因为我相信他们会更多地告诉我我正在尝试做什么以及我做错了多少。[http://www.mediafire.com/?9bjgt44spln1zwr](http://www.mediafire.com/?9bjgt44spln1zwr)

先感谢您

编辑：在进行迭代方法之后（如第一个答案中所建议的那样），外部转换服务似乎没有从 ode 响应。这很奇怪，因为该服务在浏览器中运行，并且在部署时没有报告错误。再次因为我知识贫乏，我相信代码比我的措辞更好。我只使用外部货币转换器制作了一个 Eclipse 项目。衷心感谢任何帮助/指导。先感谢您。[http://www.mediafire.com/?56csca1qgt5ka9a](http://www.mediafire.com/?56csca1qgt5ka9a)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:56:18.793

您的`CreditRating`流程运行良好，错误在于`CreditBuletin`流程。当我用soapUI 测试这个时，我得到一个`selectionFailure`. BPEL 中的这个错误告诉您，`from`您`to`的流程有问题。

在这里概述问题是您的`CreditBuletin`流程活动的一个非常简化的版本，简化为初始`receive`、最终`reply`和中间的一个`assign`活动。您可以将其粘贴到`sequence`您的主要过程中以重现该问题。

```
<bpel:receive name="receiveInput" partnerLink="clientInput" operation="getLoan" portType="tns:CreditBuletinPT" variable="receiveInput" createInstance="yes"></bpel:receive>

        <bpel:assign validate="no" name="AssignFinal">
            <bpel:copy>
                <bpel:from>
                    <bpel:literal>
                        <tns:SumaRON xmlns:tns="CreditBuletinNamespace" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                            <output>0</output>
                        </tns:SumaRON>
                    </bpel:literal>
                </bpel:from>
                <bpel:to variable="outputResult" part="parameters"></bpel:to>
            </bpel:copy>
            <bpel:copy>
                <bpel:from>
                    <![CDATA[$loanWithInterest * bpel:getVariableData('CurrencyRateInputResponse','parameters','ConversionRateResult')]]>
                </bpel:from>
                <bpel:to part="parameters" variable="outputResult">
                    <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">
                        <![CDATA[output]]>
                    </bpel:query>
                </bpel:to>
            </bpel:copy>
        </bpel:assign>

        <bpel:reply name="outputResult" partnerLink="clientInput" operation="getLoan" portType="tns:CreditBuletinPT" variable="outputResult"></bpel:reply> 
```

您尝试分配相同的变量两次，首先是默认初始化。这没有多大意义，但出于某种原因，BPEL 编辑器默认生成这些初始化。例如，如果您`from`将第二个中的语句更改`copy`为其他内容，您会得到正确的答复

```
<![CDATA[bpel:getVariableData('receiveInput','parameters','suma')]]> 
```

因此，您的问题来自您的`from`陈述，很可能是使用该`getVariableData()`功能的陈述。现在，我不想修复您流程中的所有表达式（因为有很多，这是您的任务），但我建议查看所有表达式。从一个最小的工作流程开始，例如上面`from`交换的流程，并在测试每个增量时对功能进行增量更新。这样，你最终会得到一些有用的东西。

# android - 带有 git 子模块的 Android Maven IntelliJ 项目

> ID：16067457
> 
> 赞同：2
> 
> 时间：2013-04-17T18:30:00.920
> 
> 标签：android, maven, intellij-idea

我们有一个带有 Git 子模块的 Maven 项目`contrib/holo-everywhere`和`contrib/ActionBarSherlock`

根 pom.xml 描述这样的模块：

```
<module>contrib/holo-everywhere/resbuilder</module>
<module>contrib/holo-everywhere/library</module>
<module>contrib/holo-everywhere/addons/preferences</module>
<module>contrib/holo-everywhere/addons/slidingmenu</module>
<module>contrib/ActionBarSherlock/actionbarsherlock</module> 
```

从控制台构建的 maven 可以完美运行，但是当项目被导入 IntelliJ IDEA 时会发生错误。

每个 pom.xml`contrib/ActionBarSherlock/actionbarsherlock/pom.xml`都无法从其项目父 pom 中的依赖管理中解析依赖版本。在这种情况下`contrib/ActionBarSherlock/pom.xml`

**contrib/ActionBarSherlock/pom.xml**

```
 <dependency>
    <groupId>android</groupId>
    <artifactId>android</artifactId>
    <version>${android.version}</version>
  </dependency> 
```

**contrib/ActionBarSherlock/actionbarsherlock/pom.xml**

```
 <dependency>
    <groupId>android</groupId>
    <artifactId>android</artifactId>
    <scope>provided</scope>
 </dependency> 
```

这只发生在`contrib`目录中的这些子模块上。我们有依赖于父 pom 的 maven 模块——它们的依赖关系得到了很好的解决。

这是一个错误还是我应该以其他方式导入项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:07:21.413

`<relativePath>`父母`pom.xml`失踪了。

# php - 截断数字的最后 X 位而不除以 10eX

> ID：16067462
> 
> 赞同：0
> 
> 时间：2013-04-17T18:30:14.490
> 
> 标签：php, time, blocking, usleep

我正在制作一个阻塞算法，我刚刚意识到，如果它应该保持精确，那么为这种算法添加超时并不是那么容易。
添加超时意味着，如果不是更早，阻塞算法应该在 X 毫秒之后中止。现在我似乎有两个选择：

1.  迭代时间（有错误，但很快）
    *   检查阻塞情况
    *   迭代`time_elapsed`1 （这意味着使用[usleep](http://cz2.php.net/manual/en/function.usleep.php) 1e-6 秒）
    *   `time_elapsed`与比较`timeout`。（**这里是我要讲的问题**）
    *   `usleep(1)`
2.  每次迭代获取系统时间（缓慢但精确）
    *   我**知道该怎么做**，请不要发布任何关于此的答案。

### 与`timeout`_`time_elapsed`

这就是困扰我的地方。在休眠 10e-6 秒`timeout`时将以毫秒 (10e-3)为单位。`usleep`所以 my`time_elapsed`将比 . 精确 1000 倍`timeout`。我想**截断**`time_elapsed`（运算等于不除的最后三位`floor($time_elapsed/1000)`。除法算法太慢。

### 概括

我想让我的变量小 1000 倍而不将其除以 1000。我只想摆脱数据。在二进制中我会使用位移运算符，但不知道如何在十进制系统上应用它。

### 代码示例：

有时，当 SO 上的人无法回答理论问题时，他们真的很渴望代码。这里是：

```
floor($time_elapsed/1000); 
```

我想用更快的东西替换这段代码。请注意，虽然问题本身充满了超时，但问题标题**只是关于 truncating that data**。其他用户可能会发现该解决方案对计时以外的其他目的有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:21:46.767

尝试这个：

```
(int)($time_elapsed*0.001) 
```

这应该快很多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:50:45.580

Maybe this will help [Php number format](http://php.net/manual/en/function.number-format.php). Though this does cause rounding, if that is unacceptable then I don't think its possible because PHP is loosely typed that you cant define numbers with a particular level of precision.

# javascript - Jquery标签与革命滑块冲突

> ID：16067465
> 
> 赞同：0
> 
> 时间：2013-04-17T18:30:16.453
> 
> 标签：javascript, jquery, tabs, conflict

我正在尝试创建一个包含旋转滑块和选项卡脚本的页面。

您可以在此处找到该页面：http: [//lovebomb.nl/dating](http://lovebomb.nl/dating)

但不知何故，这些脚本相互冲突。

旋转滑块的这一部分：

```
 var tpj=jQuery;
    tpj.noConflict();

    tpj(document).ready(function() {

    if (tpj.fn.cssOriginal!=undefined)
        tpj.fn.css = tpj.fn.cssOriginal;

        tpj('.fullwidthbanner').revolution(
            {
                delay:9000,
                startwidth:1024,
                startheight:616,
                onHoverStop:"on",                       // Stop Banner Timet at Hover on Slide on/off
                thumbWidth:100,                         // Thumb With and Height and Amount (only if navigation Tyope set to thumb !)
                thumbHeight:50,
                thumbAmount:3,
                navigationStyle:"round",                // round,square,navbar,round-old,square-old,navbar-old, or any from the list in the docu (choose between 50+ different item), custom
                navigationHAlign:"center",              // Vertical Align top,center,bottom
                navigationVAlign:"top",                 // Horizontal Align left,center,right
                navigationHOffset:0,    
                navigationVOffset:20,
                soloArrowLeftHalign:"left",
                soloArrowLeftValign:"center",
                soloArrowLeftHOffset:20,
                soloArrowLeftVOffset:0,
                soloArrowRightHalign:"right",
                soloArrowRightValign:"center",
                soloArrowRightHOffset:20,
                soloArrowRightVOffset:0,
                touchenabled:"off",                     // Enable Swipe Function : on/off
                stopAtSlide:1,                          // Stop Timer if Slide "x" has been Reached. If stopAfterLoops set to 0, then it stops already in the first Loop at slide X which defined. -1 means do not stop at any slide. stopAfterLoops has no sinn in this case.
                stopAfterLoops:0,                       // Stop Timer if All slides has been played "x" times. IT will stop at THe slide which is defined via stopAtSlide:x, if set to -1 slide never stop automatic
                hideCaptionAtLimit:0,                   // It Defines if a caption should be shown under a Screen Resolution ( Basod on The Width of Browser)
                hideAllCaptionAtLilmit:0,               // Hide all The Captions if Width of Browser is less then this value
                hideSliderAtLimit:0,                    // Hide the whole slider, and stop also functions if Width of Browser is less than this value
                fullWidth:"on",
                shadow:0                                //0 = no Shadow, 1,2,3 = 3 Different Art of Shadows -  (No Shadow in Fullwidth Version !)
            });
 }); 
```

似乎与选项卡脚本的这一部分冲突：

```
$(document).ready(function(){
$('#tabs div').hide();
$('#tabs div:first').show();
$('#tabs ul li:first').addClass('active');
$('#tabs ul li a').click(function(){ 
$('#tabs ul li').removeClass('active');
$(this).parent().addClass('active'); 
var currentTab = $(this).attr('href'); 
$('#tabs div').hide();
$(currentTab).show();
return false;
});
}); 
```

这些脚本组合在一个 JS 文件中，可以在这里找到：http: [//lovebomb.nl/dating/tabs.js](http://lovebomb.nl/dating/tabs.js)

我将此站点用作选项卡脚本的基础：[http ://www.snelgeldonlineverdienen.nl/](http://www.snelgeldonlineverdienen.nl/)

唯一的区别是 jquery 和 jquery UI 版本。如果我使用此页面的 jquery 版本，则旋转滑块不再起作用。

我已经尝试修复标签大约 4 小时。

真的可以使用一些帮助。

提前致谢 ：）

卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:07:55.167

在[tabs.js](http://lovebomb.nl/dating/tabs.js)的开头我们有声明：

```
var tpj=jQuery;
tpj.noConflict(); 
```

这将变量**tpj**设置为**jQuery**对象，然后将 jQuery 放入[noConflict()](http://api.jquery.com/jQuery.noConflict/)：

> “许多 JavaScript 库使用**$**作为函数或变量名，就像 jQuery 一样。在 jQuery 的情况下， $ 只是 jQuery 的别名，因此所有功能都可以在不使用**$**的情况下使用。如果您需要与 jQuery 一起使用另一个 JavaScript 库，通过调用**$.noConflict()将****$**的控制权返回给另一个库。”

 **现在 jQuery 处于无冲突模式，您不能再使用**$**来访问 jQuery。所以当我们运行 tabs.js 底部的代码时：

```
$(document).ready(function(){
    $('#tabs div').hide();
    $('#tabs div:first').show();
    $('#tabs ul li:first').addClass('active');
    $('#tabs ul li a').click(function(){ 
    $('#tabs ul li').removeClass('active');
    $(this).parent().addClass('active'); 
    var currentTab = $(this).attr('href'); 
    $('#tabs div').hide();
    $(currentTab).show();
        return false;
    });
}); 
```

我们得到错误

> “未捕获的 TypeError：对象 [object Object] 的属性 '$' 不是函数”

因为**$**不再引用**jQuery**。要访问 jQuery，我们必须使用**jQuery**或**tpj**

如果我们改变 tabs.js 将**$**更改为**jQuery**或**tpj**

```
tpj(document).ready(function(){
    tpj('#tabs div').hide();
    tpj('#tabs div:first').show();
    tpj('#tabs ul li:first').addClass('active');
    tpj('#tabs ul li a').click(function(){ 
    tpj('#tabs ul li').removeClass('active');
    tpj(this).parent().addClass('active'); 
    var currentTab = tpj(this).attr('href'); 
    tpj('#tabs div').hide();
    tpj(currentTab).show();
        return false;
    });
}); 
```

代码应该正确执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T16:42:02.600

使用最新的 jQuery 库版本（1.7.1 +）并尝试将上面的代码修改为以下并将两者合并到 init.js 中的单个文件中，并放置在页面中包含的所有 *.js 文件的底部。

```
 jQuery(document).ready(function() {
       if (jQuery.fn.cssOriginal!=undefined)
         jQuery.fn.css = jQuery.fn.cssOriginal;
           jQuery('.fullwidthbanner').revolution({

            delay:9000,
            startwidth:1024,
            startheight:616,
            onHoverStop:"on",        // Stop Banner Timet at Hover on Slide on/off
            thumbWidth:100,        // Thumb With and Height and Amount (only if navigation Tyope set to thumb !)
            thumbHeight:50,
            thumbAmount:3,
            navigationStyle:"round",   // round,square,navbar,round-old,square-old,navbar-old, or any from the list in the docu (choose between 50+ different item), custom
            navigationHAlign:"center",              // Vertical Align top,center,bottom
            navigationVAlign:"top",                 // Horizontal Align left,center,right
            navigationHOffset:0,    
            navigationVOffset:20,
            soloArrowLeftHalign:"left",
            soloArrowLeftValign:"center",
            soloArrowLeftHOffset:20,
            soloArrowLeftVOffset:0,
            soloArrowRightHalign:"right",
            soloArrowRightValign:"center",
            soloArrowRightHOffset:20,
            soloArrowRightVOffset:0,
            touchenabled:"off",                     // Enable Swipe Function : on/off
            stopAtSlide:1,                          // Stop Timer if Slide "x" has been Reached. If stopAfterLoops set to 0, then it stops already in the first Loop at slide X which defined. -1 means do not stop at any slide. stopAfterLoops has no sinn in this case.
            stopAfterLoops:0,                       // Stop Timer if All slides has been played "x" times. IT will stop at THe slide which is defined via stopAtSlide:x, if set to -1 slide never stop automatic
            hideCaptionAtLimit:0,                   // It Defines if a caption should be shown under a Screen Resolution ( Basod on The Width of Browser)
            hideAllCaptionAtLilmit:0,               // Hide all The Captions if Width of Browser is less then this value
            hideSliderAtLimit:0,                    // Hide the whole slider, and stop also functions if Width of Browser is less than this value
            fullWidth:"on",
            shadow:0                                //0 = no Shadow, 1,2,3 = 3 Different Art of Shadows -  (No Shadow in Fullwidth Version !)
        });
 });       

   jQuery(document).ready(function(){
      jQuery('#tabs div').hide();
      jQuery('#tabs div:first').show();
      jQuery('#tabs ul li:first').addClass('active');
      jQuery('#tabs ul li a').click(function(){ 
      jQuery('#tabs ul li').removeClass('active');
      jQuery(this).parent().addClass('active'); 
      var currentTab = jQuery(this).attr('href'); 
     jQuery('#tabs div').hide();
     jQuery(currentTab).show();
     return false;
    });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-08T05:20:18.953

在获取罐装 html/css/js 登录页面模板以在 Meteor 上工作时遇到此问题。在我的情况下，从解决方案中删除 jquery-1.11.1.min.js 和 jquery-1.11.1.min.map 文件解决了这个问题，因为我已经将最新版本安装为一个包。希望这对将来的解决方案搜索者有所帮助。**

# android - 内置应用程序完成加载后如何在 Android 中获取通知

> ID：16067470
> 
> 赞同：1
> 
> 时间：2013-04-17T18:30:29.907
> 
> 标签：android, android-intent

我正在尝试创建一个基准测试应用程序来启动一些应用程序并测量加载时间。启动计时器并启动应用程序（通过意图）是简单的部分。而且，如果我有子应用程序的源代码，我可以让它记录时间并将其传回，或者我可以让它在某个时候完全杀死自己。但是，我怎么知道股票应用程序何时完成加载？或者，我怎样才能让它们自动关闭，以便我的再次被带到前台以停止计时器？我知道股票应用程序的来源是公开的，但我认为尝试修改它对我来说并不实际。或者是吗？我无法将我的基准测试应用程序绑定到特定版本的 Android。

具体来说，我对测量浏览器、youtube 和邮件的加载时间很感兴趣。

我已经研究过使用 ActivityManager 来获取有关正在运行的应用程序的信息，但我认为在这种情况下我将不得不在后台进行轮询，而且我已经读过 ActivityManager 信息不一定总是最新的，无论如何。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:07:46.437

我决定只修改源代码并为每个版本的 Android/处理器构建我的应用程序版本。我不必专门针对每个设备，只针对处理器系列（Atom/armV7/等）

获取和编译 Android 源代码很[容易](http://source.android.com/source/initializing.html)

构建库存 AOSP 应用程序的自定义版本也[不错](https://stackoverflow.com/questions/14759579/how-can-i-modify-and-rerelease-an-aosp-app/)

从那里开始，只需使用意图来调用活动并传递信息。

# internet-explorer - CSS3 渐变在 Internet Explorer 中显示错误的颜色

> ID：16067473
> 
> 赞同：1
> 
> 时间：2013-04-17T18:30:36.420
> 
> 标签：internet-explorer, css, colors, generator, gradient

我使用 Ultimate CSS Gradient Generator 创建了以下渐变。它在除 IE 之外的任何浏览器中都能正确显示（我已经在 IE7、IE8 和 IE9 中对其进行了测试）。在大多数浏览器中，渐变是绿色的。在 IE 中，渐变是蓝色和黑色。任何想法为什么？自生成代码以来，我没有篡改代码。

```
 background: #104815; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMTAwJSIgeDI9IjEwMCUiIHkyPSIwJSI+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMTA0ODE1IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzkyYjY5MiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);
        background: -moz-linear-gradient(45deg,  #104815 0%, #92b692 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left bottom, right top, color-stop(0%,#104815), color-stop(100%,#92b692)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(45deg,  #104815 0%,#92b692 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(45deg,  #104815 0%,#92b692 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(45deg,  #104815 0%,#92b692 100%); /* IE10+ */
        background: linear-gradient(45deg,  #104815 0%,#92b692 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#104815', endColorstr='#92b692',GradientType=1 ); /* IE6-8 fallback on horizontal gradient */ 
```

这是使用 NetRenderer 的屏幕截图，显示了 IE8 中的蓝黑渐变：

![在此处输入图像描述](https://i.stack.imgur.com/xGJHx.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:30:00.840

过滤器属性中颜色值的引号被编码为 '. 这会导致颜色依赖错误处理并更改原始值。

固定引号将给出正确的绿色渐变。

# git - 非交互式 git squash/rebase 全部进入当前分支头

> ID：16067475
> 
> 赞同：1
> 
> 时间：2013-04-17T18:30:42.223
> 
> 标签：git, github, rebase, squash

对 git 存储库进行 rebase 的最简单方法是什么，以便只有当前分支的负责人保持完好，而其他所有内容都被压扁？最好是我可以应用于各种存储库的非交互式解决方案。

背景：我的存储库太大，因为它正在跟踪以前版本的大量遗留代码。我删除了我不再感兴趣的分支。对于剩余的分支，我想保留最终版本以用于存档目的，但清理所有中间更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:56:48.020

因为我发现这个问题很有趣，所以我写了一个小 bash 脚本，它（类似于）你想要的。

您可以[将其作为文件下载](http://ompldr.org/vaTRvbg)（或在 Github 上查看[其 repo](https://github.com/n3v1k/git-fresh-start)）并在下面找到源代码。这里有一点讨论：

用法：

> **`./start_git_repo_fresh.sh [-r] [<path to git repo>]`**
> where`-r`允许创建公共根提交，路径让您可以从不同位置使用脚本；如果省略路径，则使用当前目录 (CWD)

该脚本的主要任务是移植当前存在的分支，只需使用它们的最新提交（因为 Git 提交是完整存储库的快照，这很容易）。

如果您指定该`-r`标志，则会创建一个新的空根提交，并且所有分支都将创建为该根提交的直接后代。如果您不指定标志，则每个新分支都将有自己的根（它们将是*孤立*分支），并且每个分支都包含一个提交。

这是通过获取现有本地分支机构的一个分支并走过它们来完成的；对于每个分支（调用它`BR`），脚本将：

*   何时`-r`指定

    *   (a) 从新的公共根提交创建一个新分支
    *   (b) 从`BR`
*   何时`-r`未指定*_*

    *   (a) 退房`BR`
    *   (b) 创建一个新的孤立分支`BR`
*   (c)`BR`使用来自的提交消息提交文件`BR`
*   (d) 删除旧分支`BR`
*   (e) 将新创建的分支重命名为`BR`

如果在脚本启​​动时签出分支（repo 未处于*分离的 HEAD*状态），则该分支的新版本将在最后签出；如果 repo 位于分离的 HEAD 上，则最后创建的分支将被检出。

* * *

脚本来源：

```
#!/bin/bash

COMMON_ROOT=0
TEMP_ROOT_BRANCH="NEW_ROOT_COMMIT"

if [ "$1" == "-r" ]; then
    COMMON_ROOT=1
    shift 1
fi

if [ "$#" -eq 1 ]; then
    cd "$1"
fi

branches=$(git branch --color=never)
orig_branch=$(echo "$branches" | grep --color=never "^\* " | sed "s/^\* //")

if [ "$COMMON_ROOT" -eq 1 ]; then
    echo "Creating new (empty) common root commit"
    git checkout --orphan "$TEMP_ROOT_BRANCH" 2> /dev/null
    git rm -r --cached . >/dev/null
    git clean -dfx > /dev/null
    git commit --allow-empty -m "Initial commit" > /dev/null
fi

echo "$branches" | sed "s/^\* //" | while read branch; do
    echo "Transplanting branch $branch"
    newbranch="${branch}_new"
    if [ "$COMMON_ROOT" -eq 1 ]; then
        git checkout -b "$newbranch" "$TEMP_ROOT_BRANCH" > /dev/null 2>/dev/null
        git checkout "$branch" -- . > /dev/null 2>/dev/null
    else
        git checkout "$branch" > /dev/null 2>/dev/null
        git checkout --orphan "$newbranch" > /dev/null 2>/dev/null
    fi
    git commit -C "$branch" > /dev/null
    git branch -D "$branch" > /dev/null
    git branch -m "$newbranch" "$branch" > /dev/null
done

if [ "$COMMON_ROOT" -eq 1 ]; then
    git branch -D "$TEMP_ROOT_BRANCH" > /dev/null
fi

if [ -n "$orig_branch" ]; then
    git checkout "$orig_branch" 2>/dev/null
fi 
```

# azure - 如果已登录到另一个 Microsoft 帐户，使用 WAAD 作为 IdP 的 Azure ACS 会出现 WS-Federation 协议错误

> ID：16067476
> 
> 赞同：4
> 
> 时间：2013-04-17T18:30:45.267
> 
> 标签：azure, active-directory, acs, federated-identity

我的依赖方应用程序使用 Windows Azure ACS 进行用户身份验证。我已将 ACS 配置为使用 Windows Azure Active Directory (WAAD) 作为身份提供者。这在大多数情况下都有效，用户可以使用我在 WAAD 中为他们配置的身份登录我的应用程序。但是，我遇到的问题是，如果用户登录另一个 Microsoft 帐户，并且在同一个浏览器实例中尝试登录我的应用程序，他们会收到一个丑陋的 ACS 错误“ACS20012：请求不是有效的 WS-Federation 协议消息”。例如，如果我打开 Chrome 并使用我的 Windows Live Id 登录 Windows Azure 管理门户，然后打开一个新选项卡并尝试登录我的自定义应用程序，我将收到该错误。如果我打开一个新浏览器或清除我的 cookie，我可以正常登录。

我不应该能够在同一个浏览器实例中登录这两个应用程序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:07:01.917

没有。

这是要求在同一浏览器的实例中登录两个 Google 帐户（或两个 Live ID，或任何两个帐户）（实际上[可能使用 Chrome](http://scottcate.com/technology/multiple-users-in-chrome/)，但一般情况下是**NO**）。这在今天简直是不可能的。

然而，在 ACS 站点中看到该错误消息很难看。您是否在 ACS 中[为您的依赖方应用程序配置了 ERROR URL ？](http://msdn.microsoft.com/en-us/library/windowsazure/gg185906.aspx#BKMK_2)尽管此属性是可选的，但我强烈建议客户实际使用它，并正确处理对它的请求。我没有尝试过你的特定场景，但我假设 ACS 将用户重定向到错误 URL，一旦你配置它，所以你至少知道会发生什么。

请为您的信赖方配置错误网址，并告知我们是否会将用户重定向到您的网站。然后，您将能够生成一些适当的错误消息。

**更新**

如果您说这仅在您登录 Azure 管理门户时发生，那么这（我的猜测！）几乎与使用 WAAD 登录相同。自 WAAD 的 GA 以来，发生了一些变化。如果您按照 Fiddler 的实际登录流程，您会注意到登录管理门户时的流程略有不同，例如登录 Hotmail。如果您登录到 Hotmail，您只会被重定向到`login.live.com`您的登录名并返回 Hotmail。

现在，如果您在导航到时检查流量，`manage.windowsazure.com`您会注意到有第一个重定向到`login.microsoftonline.com`（这是 WAAD 处理的！）。然后重定向到`login.live.com`（这是针对您的 Live ID 帐户的）。我在这里的猜测是，来自`login.microsoftonline.com`联邦 Live ID ( `login.live.com`) 的 WAAD 用于身份验证。这就是您实际使用 WAAD 登录的原因，这就是您的应用程序失败的原因。

请执行以下实验以确认我是否错了：

1.  删除所有浏览器的 cookie
2.  转到**Hotmail**并使用您的 Live ID 帐户登录
3.  现在打开新选项卡并打开通过 ACS 联合 WAAD 的自定义应用程序

我怀疑现在您将能够登录到您的应用程序。

# graphviz - 用graphviz，HTML换行

> ID：16067483
> 
> 赞同：10
> 
> 时间：2013-04-17T18:31:10.287
> 
> 标签：graphviz, line-breaks

我创建了一个[graphviz 表节点](https://stackoverflow.com/questions/16062673/graphviz-node-internal-orientation/16063307#16063307)：

```
<TR>
    <TD COLSPAN="3" BGCOLOR="lightgrey">LineOne LineTwo</TD>
</TR> 
```

我想要`Line1`,`Line2`在单独的行中。我已经尝试过`<br>`和`\n`，`&nbsp;`但没有运气 - 有些只是在渲染图像中显示，有些会导致错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T18:31:55.790

这是一个自闭标签 nitpick：

```
<TD COLSPAN="3" BGCOLOR="lightgrey">LineOne<br/>LineTwo</TD>
                                              ^ 
```

# java - jsp中的连接池

> ID：16067484
> 
> 赞同：0
> 
> 时间：2013-04-17T18:31:12.540
> 
> 标签：java, jsp, servlets, jdbc, connection-pooling

> 我已将 tomcat-dbcp.jar 从 tomcat lib 目录复制到 jdk 的 jre\lib\ext 目录，并且在我的应用程序的 context.xml 文件中编码如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/Conn_Pool">

<Resource name="jdbc/murach" auth="Container"
  maxActive="100" maxIdle="30" maxWait="10000"
  username="root" password="1234"
  driverClassName=" com.mysql.jdbc.Driver"
  url="jdbc:mysql://localhost:3306/murach"
  logAbandoned="true" removeAbandoned="true"
  removeAbandonedTimeout="60" type="javax.sql.DataSource" 
/>

</Context> 
```

> 和一个类 ConnectionPool.java 如下所示：

```
package data;

import java.sql.Connection;
import java.sql.SQLException;
import javax.sql.*;
import javax.sql.DataSource;
import javax.naming.InitialContext;

public class ConnectionPool 
{
private static ConnectionPool pool=null;
private static DataSource dataSource=null;

private ConnectionPool()
{
    try
    {
        InitialContext ic = new InitialContext();
        dataSource = (DataSource)ic.lookup("java:/comp/env/jdbc/murach");
    }
    catch(Exception e)
     {
         e.printStackTrace();
     }
}

public static ConnectionPool getInstance()
{
    if(pool==null)
    {
        pool= new ConnectionPool();
    }

    return pool;
}

public Connection getConnection()
{
    try
    {
        return dataSource.getConnection();
    }

    catch(SQLException sqle)
            {
                sqle.printStackTrace();
                return null;
            }
}

public void freeConnection(Connection c)
{
    try{
        c.close();
    }
    catch(SQLException sqle){
        sqle.printStackTrace();
    }
}
} 
```

> 但公共连接 getConnection() 不起作用。
> 它不返回 dataSource.getConnection(); 在 try 块内。相反，它进入了 catch 块

# scala - 为什么 scala (1 to 1000).foreach 在这种情况下会抛出异常？

> ID：16067486
> 
> 赞同：7
> 
> 时间：2013-04-17T18:31:18.897
> 
> 标签：scala

在 repl 中，这会引发异常，我不知道为什么。我真的很想了解这一点。

```
scala> (1 until 10000).foreach("%s%s".format("asdf", "sdff"))
java.lang.StringIndexOutOfBoundsException: String index out of range: 8
    at java.lang.String.charAt(String.java:686)
    at scala.collection.immutable.StringLike$class.apply(StringLike.scala:54)
    at scala.collection.immutable.WrappedString.apply(WrappedString.scala:32)
    at scala.collection.immutable.WrappedString.apply(WrappedString.scala:32)
    at scala.collection.immutable.Range.foreach(Range.scala:75) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T18:35:00.850

将下面的代码视为未包装的伪代码：

```
val str = "%s%s".format("asdf", "sdff")
// "asdfsdff" you see, only 8 characters
(1 until 10000).foreach(x => str.getCharAt(x)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-17T18:37:22.780

`Strings`在 scala 中，可以像从索引到给定索引处的字符的函数一样使用：

```
val s: Int => Char = "abcd"
val c: Char = s(1) 
```

这是 Scala 中的一种通用机制，`apply`可以将具有方法的对象视为函数。字符串的`apply`方法在[StringOps](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringOps)中定义。

字符串“asdfsdff”被传递给foreach，并且范围内的每个连续值都被传递给函数。当索引到达时，这会引发异常，`8`因为这超出了范围。

# linux - CUPS Linux：帮助打印这些媒体类型：MS Excel、MS Word 和 HTML

> ID：16067489
> 
> 赞同：7
> 
> 时间：2013-04-17T18:31:41.633
> 
> 标签：linux, ms-office, cups, media-type

我需要在 Linux CUPS 服务器中打印 MS Excel、MS Word 和 HTML 文件。当我尝试打印这些媒体类型时，会出现以下情况，这是我到目前为止发现的：

*   对于 MS Excel 和 MS Word 文件：

    当我尝试打印这样的文件时，错误输出是：

    ```
    alvaro@alvaro-VM:~$ lp -d test_printer -o document-format=application/msword ptest.doc
    lp: Unsupported format 'application/msword'! 
    ```

    或者，同样的：

    ```
    alvaro@alvaro-VM:~$ lp -d test_printer  ptest.doc
    lp: Unsupported format 'application/msword'! 
    ```

    我在搜索 arround 时发现，据说可以使用*CUPS 过滤器*，在这种情况下，我发现的那个叫做“ *officetop* ”（[sourceforge/下载链接](http://sourceforge.net/projects/cupsaddons/files/officetops_or_pdf/)），可以打印 MS OFFICE 文件。这个“officetop”过滤器的问题是我不知道如何安装或配置它或使它工作所需的任何东西，我找不到任何教程或指南。所以我会很感激这方面的任何帮助。您是否建议使用此过滤器来执行此任务？我对任何替代解决方案持开放态度。

*   对于 HTML 文件：

    作为第一个测试，我做了：

    ```
    alvaro@alvaro-VM:~$ lp -d test_printer  -o document-format=text/html index.html 
    the requested id is test_printer-105 (1 archivo(s)) 
    ```

    并且，这给出了相同的结果：

    ```
    alvaro@alvaro-VM:~$ lp -d test_printer  index.html 
    the requested id is test_printer-106 (1 archivo(s)) 
    ```

    索引.html：

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">        
    <html><body><h1>It works!</h1>
    <p>This is a html print test.</p>
    </body></html> 
    ```

    结果：在打印纸上，您只能看到 de html 代码而不是格式化文本。

    编辑：如果我从 chrome 之类的网络浏览器打印网页，它会打印得很好，但是如果我使用浏览器选项“将网页另存为”下载网页，然后发出 *lp -d test_printer index.html* 会出现相同的情况我之前提到过，只是打印了 html 代码。

    请帮助解决这个问题。我想要的是获得可能的格式化文本。也可以打印 HTML+CSS?。

非常感谢你们。

问候。

PD：对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T06:23:26.157

**请记住，Linux 会从/etc/mailcap**获取有关打开哪些类型文件的应用程序的说明。此外，任何类型的打印文件都需要由能够执行此操作的应用程序“渲染”或“编译”，因此引用**/etc/mailcap**。电子邮件应用程序无法“呈现” Excel 文件，Photoshop 无法打开 HTML 文件 :)

从外观上看，您的**/etc/mailcap**中没有用于处理 Excel、Word 或 HTML 文件的应用程序的条目，这就是打印原始内容而不是“渲染”页面的原因（如果您从 Linux 打印）。

您是从 Linux 还是从 Windows 打印？如果您从 Windows 打印（通过 Linux 机器上的 cups 服务器）并且打印正常，那么您知道问题不在于打印机，而在于 Linux 上的**/etc/mailcap**。

# php - 查询工作，但运行后无法回显

> ID：16067493
> 
> 赞同：0
> 
> 时间：2013-04-17T18:32:02.850
> 
> 标签：php, mysql

```
function supervisor_from_email($email, $p_id) {
    $email = sanitize($email);
    return mysql_query("SELECT pm.supervisor FROM project_members AS pm JOIN users AS u ON pm.project_member_id = u.user_id WHERE u.email = $email AND pm.project_id = $p_id");
} 
```

是我调用的函数，$email 和 $p_id 是正确的，我已经在数据库上运行了查询，它返回了正确的值（1 或 0）

我希望能够在页面上回显它，然后根据它决定是否检查复选框，但是当我在运行函数后尝试回显时，如下所示：

```
$supervisor = supervisor_from_email($email, $p_id);
echo $supervisor; 
```

这没用？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:41:18.747

尝试

```
$result = mysql_query("SELECT pm.supervisor FROM project_members AS pm JOIN users AS u ON pm.project_member_id = u.user_id WHERE u.email = '$email' AND pm.project_id = $p_id");
if (!$result) 
{
die(mysql_error()); 
}

while($row = mysql_fetch_array($result))
{
echo $row['supervisor'];
} 
```

或者

```
$result = mysql_query("SELECT pm.supervisor FROM project_members AS pm JOIN users AS u ON pm.project_member_id = u.user_id WHERE u.email = '$email' AND pm.project_id = $p_id");
if (!$result) 
{
die(mysql_error()); 
}
mysql_result($result,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:41:45.980

`mysql_query`返回一个资源，因此您必须获取此资源以通过使用获取绑定到此资源的数据`mysql_fetch_array`，然后您必须转到新`mysqli`库，因为旧`mysql`库很快就会被弃用:)

**尝试这个 ：**

```
function supervisor_from_email($email, $p_id)
    {
        $email = sanitize($email);
        $email_rs = mysql_query("SELECT pm.supervisor FROM project_members AS pm JOIN users AS u ON pm.project_member_id = u.user_id WHERE u.email = '$email' AND pm.project_id = $p_id");
        if(is_resource($email_rs))
            {
                $email_res = mysql_fetch_array($email_rs);
                $email = $email_res[0];
                return $email;
            }
        else
            return "Invalid supervisor";
    } 
```

告诉我结果:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:43:04.683

你的功能应该是这样的..

```
function supervisor_from_email($email, $p_id) {
    $email = sanitize($email);
    $result=mysql_query("SELECT pm.supervisor FROM project_members AS pm JOIN users AS u ON pm.project_member_id = u.user_id WHERE u.email = $email AND pm.project_id = $p_id");
   $row=mysql_fetch_assoc($result);
    return $row['supervisor'];

} 
```

它将返回带有值的数组试试这个

# version - 选择解释器与选择 python 版本是一样的吗？

> ID：16067495
> 
> 赞同：0
> 
> 时间：2013-04-17T18:32:18.320
> 
> 标签：version, interpreter

新手程序员在这里：我的机器上安装了 python 2.7 和 3.3（Windows 7）。

选择解释器与告诉计算机要运行哪个版本的 python 是一样的吗？

假设我想运行使用 python 2.* 约定的脚本。我是否只是选择使用我的 python 2.7 解释器并排除 3.3 解释器？

我在问是否可以这样做，而不必卸载我想忽略的任何版本的 python。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:39:06.000

是的。解释器解释 Python 代码，所以 Python 2 解释器只解释 Python 2 代码。

由于两个版本都提供`python.exe`，您将只能使用系统 PATH 变量中较早的版本。为了解决这个问题，我只需在文件夹中复制`python.exe`文件`C:\Python27`并将其命名为`python2.exe`. 对 Python 3 执行相同的操作，但将其重命名为`python3.exe`.

现在，您可以运行`python2 script.py`. 调用 just`python`将执行首先出现在 PATH 中的 Python 安装，因此您可以重新排列它以获得“默认”Python 版本。

请注意，您的`C:\PythonXX\Scripts`文件夹可能会发生冲突，因此请确保您知道哪个 Python 版本是默认版本。

# r - geom_line() 没有附加透明度？

> ID：16067498
> 
> 赞同：0
> 
> 时间：2013-04-17T18:32:25.540
> 
> 标签：r, ggplot2, transparency, alpha

我注意到当我使用 geom_line() 并渲染为 pdf 时，线条的 alpha 透明度不是相加的（与 geom_point() 相比）。反正有没有增加透明度的线条？

（想做类似于[http://andrewgelman.com/2012/08/26/graphs-showing-regression-uncertainty-the-code/](http://andrewgelman.com/2012/08/26/graphs-showing-regression-uncertainty-the-code/)的事情）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:26:11.167

以下代码显示 pdf 输出中的行透明度适用于我的设置：

```
library(ggplot2)

dat = data.frame(x1=0, x2=1, y1=rnorm(100), y2=rnorm(100))

p = ggplot(dat, aes(x=x1, xend=x2, y=y1, yend=y2)) +
    geom_segment(alpha=0.2, size=2)

ggsave("lines.pdf", plot=p, width=5, height=3) 
```

![在此处输入图像描述](https://i.stack.imgur.com/2NB2V.png) 注意：此图像是 png 格式，但 pdf 在我的系统上看起来几乎相同。

您的问题可能与操作系统或图形设备差异有关。

```
sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: i386-apple-darwin9.8.0/i386 (32-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.9.3.1 
```

# java - 操作栏中的微调器：setAdapter 上的 NullPointerException (Android - Java)

> ID：16067499
> 
> 赞同：0
> 
> 时间：2013-04-17T18:32:25.900
> 
> 标签：java, android, nullpointerexception, spinner

我正在尝试将图像 + 文本放在 Spinner 中，但我在 setAdapter 上有一个 NullPointerException。整个下午我都在试图解决这个问题，但我无法弄清楚问题出在哪里。帮助将不胜感激！这是代码：

res/menu/main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
   android:id="@+id/action_bar_main"
   android:title="@string/action_bar_main_add"
   android:showAsAction="always|withText"
   android:actionLayout="@layout/action_bar_main"       
   />
</menu> 
```

res/layout/action_bar_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="3dip">

<Spinner
    android:id="@+id/spinnerActionBar"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"/>

<Button
    android:id="@+id/btnActionBarMainAdd"
    android:layout_height="match_parent"
    android:layout_width="wrap_content"
    android:text="@string/action_bar_main_add"
    android:drawableRight="@drawable/plus_32x32"
    android:drawablePadding="4dp" 
    android:textColor="@color/green"
    android:layout_alignParentRight="true"/>    

</RelativeLayout> 
```

res/layout/action_bar_spinner_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

<ImageView android:id="@+id/imgSpinnerActionBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15dip" />

<TextView 
    android:id="@+id/txtSpinnerActionBar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip" 
    android:layout_marginTop="10dip"/>
</LinearLayout> 
```

src/package/Events.java

```
public class Events extends Activity {
final String[] spinnerCategories = {
        "Events", 
        "Calendar", 
        "Map", 
        "Notes",
        "Metronome",
        "Gallery", 
        "Pay",
        "Recorder",
        "Tuner"};

 final Integer[] spinnerImages = {
        R.drawable.pen_32x32,
        R.drawable.calendar_32x32,
        R.drawable.map_pin_20x32,
        R.drawable.document_24x32,
        R.drawable.equalizer_32x32,
        R.drawable.camera_32x32,
        R.drawable.money_48x48,
        R.drawable.note_48x48 };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.d("DEBUG","--> Entrato in Events.onCreate()");

    // ACTIONBAR: Customizza lo Spinner aggiungendo immagine + testo
    Spinner mySpinner = (Spinner)findViewById(R.id.spinnerActionBar);
    CustomSpinnerAdapter adapter = new CustomSpinnerAdapter(this, R.layout.action_bar_spinner_row, spinnerCategories, spinnerImages);
    mySpinner.setAdapter(adapter); 

    Log.d("DEBUG","<-- Uscendo da Events.onCreate()");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    // ACTIONBAR: Nasconde il titolo e l'icona
    getActionBar().setDisplayShowTitleEnabled(false);
    getActionBar().setDisplayShowHomeEnabled(false);
    getActionBar().setDisplayShowCustomEnabled(true);

    // ACTIONBAR: Aggiunge oggetti all'actionbar, se è presente
    MenuInflater mMenuInflater = getMenuInflater();
    mMenuInflater.inflate(R.menu.main, menu);

    return true;
}
} 
```

src/package/CustomSpinnerAdapter.java

```
public class CustomSpinnerAdapter extends ArrayAdapter<String>{

String[] spinnerCategories;     
Integer[] spinnerImages;
LayoutInflater inflater;

public CustomSpinnerAdapter(Context context, int textViewResourceId,
        String[] spinnerCategories, Integer[] spinnerImages) {
    super(context, textViewResourceId, spinnerCategories);

    Log.d("DEBUG","--> Entrato nel costruttore di CustomSpinnerAdapter");        

    inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.spinnerCategories = spinnerCategories.clone();
    this.spinnerImages = spinnerImages.clone();

    Log.d("DEBUG","<-- Uscendo dal costruttore di CustomSpinnerAdapter");
}

@Override
public View getDropDownView(int position, View convertView,ViewGroup parent) {
    return getCustomView(position, convertView, parent);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    return getCustomView(position, convertView, parent);
}

public View getCustomView(int position, View convertView, ViewGroup parent) {

    Log.d("DEBUG","--> Entrato in CustomSpinnerAdapter.getCustomView()");

    View row = inflater.inflate(R.layout.action_bar_spinner_row, parent, false);

    TextView label=(TextView)row.findViewById(R.id.txtSpinnerActionBar);
    label.setText(spinnerCategories[position]);

    ImageView icon=(ImageView)row.findViewById(R.id.imgSpinnerActionBar);
    icon.setImageResource(spinnerImages[position]);

    Log.d("DEBUG","<-- Uscendo da CustomSpinnerAdapter.getCustomView()");

    return row;
}    
} 
```

**编辑：**我忘了发布控制台输出：

```
04-17 20:10:11.414: I/Process(22701): Sending signal. PID: 22701 SIG: 9
04-17 20:10:43.264: E/Trace(22838): error opening trace file: No such file or directory (2)
04-17 20:10:43.314: D/DEBUG(22838): --> Entrato in Events.onCreate()
04-17 20:10:43.324: D/DEBUG(22838): --> Entrato nel costruttore di CustomSpinnerAdapter
04-17 20:10:43.324: D/DEBUG(22838): <-- Uscendo dal costruttore di CustomSpinnerAdapter
04-17 20:10:43.324: D/AndroidRuntime(22838): Shutting down VM
04-17 20:10:43.324: W/dalvikvm(22838): threadid=1: thread exiting with uncaught exception (group=0x415d5930)
04-17 20:10:43.324: E/AndroidRuntime(22838): FATAL EXCEPTION: main
04-17 20:10:43.324: E/AndroidRuntime(22838): java.lang.RuntimeException: Unable to start activity ComponentInfo{it.romagnoli.andrea.myrehearsals/it.romagnoli.andrea.myrehearsals.Events}: java.lang.NullPointerException
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.os.Looper.loop(Looper.java:137)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at dalvik.system.NativeStart.main(Native Method)
04-17 20:10:43.324: E/AndroidRuntime(22838): Caused by: java.lang.NullPointerException
04-17 20:10:43.324: E/AndroidRuntime(22838):    at it.romagnoli.andrea.myrehearsals.Events.onCreate(Events.java:43)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.Activity.performCreate(Activity.java:5104)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-17 20:10:43.324: E/AndroidRuntime(22838):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-17 20:10:43.324: E/AndroidRuntime(22838):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:45:53.567

**第一的，**

删除您的通用参数，`ArrayAdapter`即`ArrayAdapter<String>`删除`<String>`并直接分配值而不是克隆

**第二，**

你`spinnerCategories` 有`9`元素，你`spinnerImages`有`8`，所以适配器的长度是`9`，当你试图读取`8`索引值时，你会得到

```
ArrayIndexOutOfBoundsException 
```

所以`remove`一个元素来自`spinnerCategories`或`add`一个图像`spinnerImages`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:40:43.623

如果您想在动作栏中使用带有动作布局的微调器，您需要阅读 onCreateOptionsMenu 中的微调器。

可能是这样的

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    View v = (View) menu.findItem(R.id.action_bar_main).getActionView();

    Spinner spinner= ( Spinner) v.findViewById(R.id.spinnerActionBar);
} 
```

看看这个[样本](https://github.com/TitusAbhi/ActionbarActionView)

# data-binding - 如何将图像绑定到刚刚从非应用文件夹中挑选的文件？

> ID：16067500
> 
> 赞同：0
> 
> 时间：2013-04-17T18:32:26.587
> 
> 标签：data-binding, windows-runtime, microsoft-metro, winrt-xaml

用户从文件系统中选择图像。之后，我想在页面上显示此图像。我应该怎么做？似乎图像控件无法访问拾取的文件。我应该将其复制到应用程序本地存储吗？这是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:04:21.103

您不必复制文件。`StorageFile`对象引用了存储在设备中的文件。检查MSDN 上的[文件选择器示例和](http://go.microsoft.com/fwlink/p/?linkid=234890)[使用文件选择器访问文件的](http://msdn.microsoft.com/en-US/library/windows/apps/hh465199)快速入门指南。

XAML

```
<Grid Background="{StaticResource ApplicationPageBackgroundBrush}">
    <Image x:Name="img" Stretch="None" />`
</Grid> 
```

C＃

```
private async Task SetImage()
{
    FileOpenPicker openPicker = new FileOpenPicker();
    openPicker.ViewMode = PickerViewMode.Thumbnail;
    openPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
    openPicker.FileTypeFilter.Add(".jpg");
    openPicker.FileTypeFilter.Add(".gif");
    openPicker.FileTypeFilter.Add(".png");

    StorageFile file = await openPicker.PickSingleFileAsync();
    if(file != null)
    {
        BitmapImage bmp = new BitmapImage();

        using(var stream = await file.OpenAsync(FileAccessMode.ReadWrite))
        {
            bmp.SetSource(stream);
        }
        img.Source = bmp;
    }
} 
```

# redis - Redis 发布/订阅重播最后

> ID：16067505
> 
> 赞同：0
> 
> 时间：2013-04-17T18:32:46.997
> 
> 标签：redis

[Redis](http://redis.io/)支持发布/订阅。如何让客户端检索最后一个值并订阅更改，这样我就不会错过消息。这是get + subscribe的问题：

1.  我从 Redis 得到最后一个值
2.  订阅更改
3.  在我存储 1 的最后一个值之前。我收到更新，因此用更新更新我的缓存
4.  我天真地继续存储 1 中的值。覆盖 3 中的值

# mysql - MySQL ODBC 更新查询非常慢

> ID：16067507
> 
> 赞同：1
> 
> 时间：2013-04-17T18:32:54.840
> 
> 标签：mysql, performance, odbc

我们的 Access 2010 数据库最近达到了 2GB 文件大小限制，因此我将数据库移植到 MySQL。

我在 Windows Server 2008 x64 上安装了 MySQL Server 5.6.1 x64。所有操作系统更新和补丁都已加载。

我正在使用 MySQL ODBC 5.2w x64 驱动程序，因为它似乎是最快的。

我的盒子有一个 i7-3960X，64GB RAM 和 480GB SSD。

我使用 Access Query Designer，因为我更喜欢该界面，并且我经常需要将丢失的记录从一个表附加到另一个表。

作为测试，我有一个带有两个链接表的简单 Access 数据库：

tblData 链接到另一个 Access 数据库和

tblOnline 将 SYSTEM DSN 用于链接的 ODBC 表。

这两个表都包含超过 1000 万条记录。我移植的一些工作表已经有超过 3000 万条记录。

为了选择要附加的记录，我使用了一个名为 INDBYN 的字段，该字段为真或假。

首先，我在 tblData 上运行更新查询：

```
UPDATE tblData SET tblData.InDBYN = False; 
```

然后我更新所有匹配的记录：

```
UPDATE tblData INNER JOIN tblData ON tblData.IDMaster = tblOnline.IDMaster SET tblData.InDBYN = True; 
```

这工作得相当快，甚至对链接的 ODBC 表也是如此。

最后，我将 INDBYN 为 False 的所有记录附加到 tblOnline。这也是可以接受的速度，尽管比附加到链接访问表要慢。

在 Access 中，一切都 100% 运行并且速度非常快，除了数据库变得太大。

在链接访问表上，更新 11,500,000 条记录需要 2 分 15 秒。

但是，我现在需要将 SOURCE 表移动到 MySQL，因为它已达到 2GB 的限制。

所以将来我需要在链接的 ODBC 表上运行 UPDATE 语句。

到目前为止，当我在链接的 ODBC 表上运行相同的简单 UPDATE 查询时，它运行了 20 多分钟，然后爆出说查询已超过 2GB 内存限制。

两个表的结构相同。

我不知道如何解决这个问题，需要建议。

我更喜欢使用 Access 作为前端，因为我已经为应用程序设计了数百个查询，并且没有时间重新开发应用程序。

我使用 InnoDB 引擎并尝试了各种调整但没有成功。由于我的数据库使用关系表，因此它看起来是使用 INNODB 而不是 MyISAM 的最佳选择。

我已经打开和关闭了双写，并尝试了各种缓冲池大小，包括查询缓存。它对这个特定的查询没有影响。

我当前的 my.ini 文件如下所示：

```
#-----------------------------------------------------------------------
# MySQL Server Instance Configuration File
# ----------------------------------------------------------------------

[client]
no-beep

port=3306

[mysql]

default-character-set=utf8

server_type=3
[mysqld]

port=3306

basedir="C:\Program Files\MySQL\MySQL Server 5.6\"

datadir="E:\MySQLData\data\"

character-set-server=utf8

default-storage-engine=INNODB

sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION"

log-output=FILE
general-log=0
general_log_file="SQLSERVER.log"
slow-query-log=1
slow_query_log_file="SQLSERVER-slow.log"
long_query_time=10

log-error="SQLSERVER.err"

max_connections=100

query_cache_size = 20M

table_open_cache=2000

tmp_table_size=502M

thread_cache_size=9

myisam_max_sort_file_size=100G

myisam_sort_buffer_size=1002M

key_buffer_size=8M

read_buffer_size=64K
read_rnd_buffer_size=256K

sort_buffer_size=256K

innodb_additional_mem_pool_size=32M

innodb_flush_log_at_trx_commit = 1

innodb_log_buffer_size=16M

innodb_buffer_pool_size = 48G

innodb_log_file_size=48M

innodb_thread_concurrency = 0

innodb_autoextend_increment=64M

innodb_buffer_pool_instances=8

innodb_concurrency_tickets=5000

innodb_old_blocks_time=1000

innodb_open_files=2000

innodb_stats_on_metadata=0

innodb_file_per_table=1

innodb_checksum_algorithm=0

back_log=70

flush_time=0

join_buffer_size=256K

max_allowed_packet=4M

max_connect_errors=100

open_files_limit=4110

query_cache_type = 1

sort_buffer_size=256K

table_definition_cache=1400

binlog_row_event_max_size=8K

sync_relay_log=10000
sync_relay_log_info=10000

tmpdir = "G:/MySQLTemp"
innodb_write_io_threads = 16
innodb_doublewrite
innodb = ON
innodb_fast_shutdown = 1

query_cache_min_res_unit = 4096

query_cache_limit = 1048576

innodb_data_home_dir = "E:/MySQLData/data"

bulk_insert_buffer_size = 8388608 
```

任何建议将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T05:30:04.450

MS Access 通过链接表与 MySQL 的通信很慢。非常慢。这是无法改变的事实。为什么会这样？Access首先从MySQL加载数据，然后处理命令，最后将数据放回去。此外，它逐行执行此过程！但是，如果您不需要在“更新”查询中使用本地表中的参数或数据，则可以避免这种情况。（换句话说 - 如果您的查询始终相同并且只使用 MySQL 数据）

诀窍是强制 MySQL 服务器处理查询而不是 Access！这可以通过**在 Access 中创建“pass-thru”查询**来实现，您可以在其中直接编写 SQL 代码（使用 MySQL 语法）。Access 然后将此命令发送到 MySQL 服务器，并直接在该服务器内处理。所以你的查询几乎和在本地访问表中一样快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:34:56.880

Access 是一个单用户系统。带有 InnoDB 的 MySQL 是一个事务保护的多用户系统。

当您发出一个`UPDATE`命中十左右兆行的命令时，MySQL 必须构造回滚信息，以防操作在命中所有行之前失败。这需要大量的时间和内存。

如果您要执行这些真正庞大的命令，请尝试将您的表访问方法切换到`UPDATE`MyISAM `INSERT`。MyISAM 不受事务保护，因此这些操作可能运行得更快。

您可能会发现使用 ODBC 以外的其他工具进行数据迁移很有帮助。正如您所发现的，ODBC 处理大量数据的能力受到严重限制。例如，您可以将 Access 表导出为平面文件，然后使用 MySQL 客户端程序将它们导入。见这里... [https://stackoverflow.com/questions/9185/what-is-the-best-mysql-client-application-for-windows](https://stackoverflow.com/questions/9185/what-is-the-best-mysql-client-application-for-windows)

将数据导入 MySQL 后，即可运行基于 Access 的查询。但要避免`UPDATE`触及数据库中所有内容的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T08:25:34.470

奥利，我明白你的意思是避免触及所有行的更新。我使用它来标记目标数据库中缺少的行，并且它是一种仅附加缺少的行的快速简便的方法。我看到 SQLyog 有一个仅追加新记录的导入工具，但这仍然贯穿导入表中的所有行，并且运行了几个小时。我会看看我是否只能将我想要的数据导出到 CSV，但如果可能的话，让 ODBC 连接器比现在更快地工作仍然会很好。

# asp.net-mvc-3 - 只需要从两个数据表中区分列值

> ID：16067510
> 
> 赞同：1
> 
> 时间：2013-04-17T18:33:06.420
> 
> 标签：asp.net-mvc-3, sql-server-2008, c#-4.0, datatable, ado.net

我有两个`DataTables`，其中我只需要在 final 中使用不同的列值，`DataTable`如下所示

**数据表(DT1)**

```
ID  Name    Salary
1   ABC     2000
2   XYZ     4000
3   Suresh  6000 
```

**数据表(DT2)**

```
ID  Name    Salary
1   ABC     3000
2   XYZ     5000
3   Suresh  6000 
```

**数据表(DT3)**

```
ID  Salary(DT1) Salary(DT2)
1   2000             3000
2   4000             5000 
```

如何使用 Datatables 上的 linq 查询或任何其他方式来完成此操作？我尝试循环并比较两个数据表的每列值，但我不知道如何存储在最终的数据表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:34:42.823

首先我们需要连接表（假设 ID 具有 PK/FK 关系），然后比较值并将它们放入新表中。

```
 var unMatchedRows = from DataRow dt1Row in dt1.Rows
                        join DataRow dt2Row in dt2.Rows
                        on dt1Row["id"] equals dt2Row["id"]
                        where Convert.ToDoubl(dt1Row["salary"]) != Convert.ToDouble(dt2Row["salary"])
                        select new { dt1Row, dt2Row }; 
```

这为我们提供了在工资不同的 ID 上连接的 DataRow 对象的集合。现在我们只需要用这些行填充一个新的 DataTable。

```
 foreach (var m in unMatchedrows)
    {
        dt3.ImportRow(m);
    } 
```

值得注意的是，DT3 需要与其他两个表具有相同的架构。这只会将不匹配的行放在新表中。有几种方法可以做到这一点，我现在不在 IDE 前进行测试，但这应该可以帮助您。希望这可以帮助！

# php - 为什么这个数组的第一个元素是空的？

> ID：16067511
> 
> 赞同：1
> 
> 时间：2013-04-17T18:33:07.933
> 
> 标签：php, arrays

我想知道为什么这个数组中的第一个元素是空的？

```
$first_names[] = array();
foreach ($rows as $row) { 
  $first_names[] = $row['first_name'];
} 
```

结果`var_dump($first_names);`是：

```
array(15) { [0]=> array(0) { } [1]=> string(5) "Johny" [2]=> string(5) "Jacob" ...} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T18:33:42.077

`$first_names[] = array();`

应该

`$first_names = array();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T18:34:11.473

这条线

```
$first_names[] = array(); 
```

明确地将一个空数组推到`$first_names`. 就是`$array[]=...`这样；它是 的同义词`array_push`。

我认为您的意图是将变量初始化为空数组。为此，您只需使用赋值运算符：

```
$first_names = array(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T18:37:23.250

它是空的，因为您要向`$first_names`变量中的第 0 个索引添加一个数组元素。

你应该试试

```
$first_names = array(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T18:34:09.593

将数组初始化为

```
$first_names = array(); 
```

# winapi - 如何在 TCM_SETCURSEL 消息后更新选项卡的内容

> ID：16067512
> 
> 赞同：2
> 
> 时间：2013-04-17T18:33:16.653
> 
> 标签：winapi, windows-messages

我正在尝试使用 WinAPI 在另一个应用程序的窗口中更改页面控件中的选项卡。

我向页面控件发送了一条 TCM_SETCURSEL 消息，该消息确实更改了选项卡，但没有更改选项卡内容。例如：页面控件在选项卡 0 上，我将 TCM_SETCURSEL Index: 1 发送到页面控件，页面控件现在在选项卡 1 上，但继续显示选项卡 0 的内容而不是选项卡 1 的内容。

我努力了：

*   在 TCM_SETCURSEL 之后将 WM_PAINT 发送到选项卡 1。
*   在 TCM_SETCURSEL 之后将 WM_NCPAINT 发送到选项卡 1。
*   将 TCM_SETCURSEL 之前的 WM_NOTIFY + TCN_SELCHANGING 和之后的 WM_NOTIFY + TCN_SELCHANGE 发送到页面控件。
*   对页面控件的父级执行上述操作。

我正在使用 delphi 2010，目标应用程序也是一个 delphi 应用程序。

这是最后一次代码迭代，它将通知发送到页面控件的父级：

```
procedure ChangeTab(PageControlHandle: HWND; TabIndex: Integer);
var
  Info: TNMHdr;
begin
  Info.hwndFrom := PageControlHandle;
  Info.idFrom := GetWindowLongPtr(PageControlHandle, GWL_ID);
  Info.code := TCN_SELCHANGING;
  if SendMessage(GetParent(PageControlHandle), WM_NOTIFY, PageControlHandle, lParam(@Info)) <> 0 then
    raise Exception.Create('Page control didn''t allow tab to change.');

  if SendMessage(PageControlHandle, TCM_SETCURSEL, TabIndex, 0) = -1 then
    raise Exception.Create('Failed to change tab.');

  Info.code := TCN_SELCHANGE;
  SendMessage(GetParent(PageControlHandle), WM_NOTIFY, PageControlHandle, lParam(@Info))
end; 
```

当我单击选项卡 1 WinSpy 显示它收到这些消息：

```
<000001> 001D0774 S WM_WINDOWPOSCHANGING lpwp:0018F308
<000002> 001D0774 R WM_WINDOWPOSCHANGING
<000003> 001D0774 S WM_CHILDACTIVATE
<000004> 001D0774 R WM_CHILDACTIVATE
<000005> 001D0774 S WM_WINDOWPOSCHANGED lpwp:0018F308
<000006> 001D0774 R WM_WINDOWPOSCHANGED
<000007> 001D0774 S WM_WINDOWPOSCHANGING lpwp:0018EF7C
<000008> 001D0774 R WM_WINDOWPOSCHANGING
<000009> 001D0774 S WM_NCPAINT hrgn:00000001
<000010> 001D0774 R WM_NCPAINT
<000011> 001D0774 S WM_ERASEBKGND hdc:33011920
<000012> 001D0774 R WM_ERASEBKGND fErased:True
<000013> 001D0774 S WM_WINDOWPOSCHANGED lpwp:0018EF7C
<000014> 001D0774 R WM_WINDOWPOSCHANGED
<000015> 001D0774 P WM_PAINT hdc:00000000
<000016> 001D0774 S WM_CTLCOLORSTATIC hdcStatic:FB01097B hwndStatic:001507D0
<000017> 001D0774 R WM_CTLCOLORSTATIC hBrush:261011F7
<000018> 001D0774 S WM_CTLCOLORSTATIC hdcStatic:FB01097B hwndStatic:001507D0
<000019> 001D0774 R WM_CTLCOLORSTATIC hBrush:261011F7
<000020> 001D0774 S WM_CTLCOLORSTATIC hdcStatic:530112DB hwndStatic:000608C2
<000021> 001D0774 R WM_CTLCOLORSTATIC hBrush:261011F7
<000022> 001D0774 S WM_CTLCOLORSTATIC hdcStatic:530112DB hwndStatic:000608C2
<000023> 001D0774 R WM_CTLCOLORSTATIC hBrush:261011F7
<000024> 001D0774 S WM_DRAWITEM idCtl:395458 lpdis:0018F728
<000025> 001D0774 R WM_DRAWITEM fProcessed:False
<000026> 001D0774 S WM_CTLCOLOREDIT hdcEdit:FB01097B hwndEdit:000808A8
<000027> 001D0774 R WM_CTLCOLOREDIT hBrush:3810149A
<000028> 001D0774 S WM_CTLCOLOREDIT hdcEdit:FB01097B hwndEdit:000808A8
<000029> 001D0774 R WM_CTLCOLOREDIT hBrush:3810149A
<000030> 001D0774 S WM_DRAWITEM idCtl:526504 lpdis:0018F728
<000031> 001D0774 R WM_DRAWITEM fProcessed:False
<000032> 001D0774 S WM_CTLCOLORSTATIC hdcStatic:530112DB hwndStatic:001A06F2
<000033> 001D0774 R WM_CTLCOLORSTATIC hBrush:261011F7
<000034> 001D0774 S WM_CTLCOLORSTATIC hdcStatic:530112DB hwndStatic:001A06F2
<000035> 001D0774 R WM_CTLCOLORSTATIC hBrush:261011F7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:07:09.390

通常，PageControl 本身`TCN_...`会向其自己的父级发送通知，因此用于这些通知的参数存在于 PageControl 和父级正在运行的同一地址空间中。您正在从另一个进程发送通知，因此您的`TNMHdr`指针位于发送应用程序，并且不是接收应用程序地址空间中的有效指针。更糟糕的`WM_NOTIFY`是，不允许跨进程边界发送，如[MSDN 所述](https://msdn.microsoft.com/en-us/library/windows/desktop/bb775583.aspx)：

> 对于 Windows 2000 及更高版本的系统，无法在进程之间发送 WM_NOTIFY 消息。

因此，您需要使用`VirtualAllocEx()`并`WriteProcessMemory()`分配和操作`TNMHdr`接收应用程序地址空间中的记录。您需要在接收进程中注入代码才能发送`TCN_...`消息。

尝试这个：

```
// this is a Delphi translation of code written by David Ching:
//
// https://groups.google.com/d/msg/microsoft.public.vc.mfc/QMAHlPpEQyM/Nu9iQycmEykJ
//
// http://www.dcsoft.com/private/sendmessageremote.h
// http://www.dcsoft.com/private/sendmessageremote.cpp

const
  MAX_BUF_SIZE = 512;

type
  LPFN_SENDMESSAGE = function(Wnd: HWND; Msg: UINT; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;

  PINJDATA = ^INJDATA;
  INJDATA = record
    fnSendMessage: LPFN_SENDMESSAGE;    // pointer to user32!SendMessage
    hwnd: HWND;
    msg: UINT;
    wParam: WPARAM;
    arrLPARAM: array[0..MAX_BUF_SIZE-1] of Byte;
  end;

function ThreadFunc(pData: PINJDATA): DWORD; stdcall;
begin
  Result := pData.fnSendMessage(pData.hwnd, pData.msg, pData.wParam, LPARAM(@pData.arrLPARAM));
end;

procedure AfterThreadFunc;
begin
end;

function SendMessageRemote(dwProcessId: DWORD; hwnd: HWND; msg: UINT; wParam: WPARAM; pLPARAM: Pointer; sizeLParam: size_t): LRESULT;
var
  hProcess: THandle;    // the handle of the remote process
  hUser32: THandle;
  DataLocal: INJDATA;
  pDataRemote: PINJDATA;    // the address (in the remote process) where INJDATA will be copied to;
  pCodeRemote: Pointer; // the address (in the remote process) where ThreadFunc will be copied to;
  hThread: THandle; // the handle to the thread executing the remote copy of ThreadFunc;
  dwThreadId: DWORD;
  dwNumBytesXferred: SIZE_T; // number of bytes written/read to/from the remote process;
  cbCodeSize: Integer;
  lSendMessageResult: DWORD;
begin
  Result := $FFFFFFFF;

  hUser32 := GetModuleHandle('user32');
  if hUser32 = 0 then RaiseLastOSError;

  // Initialize INJDATA
  @DataLocal.fnSendMessage := GetProcAddress(hUser32, 'SendMessageW');
  if not Assigned(DataLocal.fnSendMessage) then RaiseLastOSError;

  DataLocal.hwnd := hwnd;
  DataLocal.msg := msg;
  DataLocal.wParam := wParam;

  Assert(sizeLParam <= MAX_BUF_SIZE);
  Move(pLPARAM^, DataLocal.arrLPARAM, sizeLParam);

  // Copy INJDATA to Remote Process
  hProcess := OpenProcess(PROCESS_CREATE_THREAD or PROCESS_QUERY_INFORMATION or PROCESS_VM_OPERATION or PROCESS_VM_WRITE or PROCESS_VM_READ, FALSE, dwProcessId);
  if hProcess = 0 then RaiseLastOSError;
  try
    // 1\. Allocate memory in the remote process for INJDATA
    // 2\. Write a copy of DataLocal to the allocated memory
    pDataRemote := PINJDATA(VirtualAllocEx(hProcess, nil, sizeof(INJDATA), MEM_COMMIT, PAGE_READWRITE));
    if pDataRemote = nil then RaiseLastOSError;
    try
      if not WriteProcessMemory(hProcess, pDataRemote, @DataLocal, sizeof(INJDATA), dwNumBytesXferred) then RaiseLastOSError;

      // Calculate the number of bytes that ThreadFunc occupies
      cbCodeSize := Integer(LPBYTE(@AfterThreadFunc) - LPBYTE(@ThreadFunc));

      // 1\. Allocate memory in the remote process for the injected ThreadFunc
      // 2\. Write a copy of ThreadFunc to the allocated memory
      pCodeRemote := VirtualAllocEx(hProcess, nil, cbCodeSize, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
      if pCodeRemote = nil then RaiseLastOSError;
      try
        if not WriteProcessMemory(hProcess, pCodeRemote, @ThreadFunc, cbCodeSize, dwNumBytesXferred) then RaiseLastOSError;

        // Start execution of remote ThreadFunc
        hThread := CreateRemoteThread(hProcess, nil, 0, pCodeRemote, pDataRemote, 0, dwThreadId);
        if hThread = 0 then RaiseLastOSError;
        try
          WaitForSingleObject(hThread, INFINITE);

          // Copy LPARAM back (result is in it)
          if not ReadProcessMemory(hProcess, @pDataRemote.arrLPARAM, pLPARAM, sizeLParam, dwNumBytesXferred) then RaiseLastOSError;
        finally
          GetExitCodeThread(hThread, lSendMessageResult);
          CloseHandle(hThread);
          Result := lSendMessageResult;
        end;
      finally
        VirtualFreeEx(hProcess, pCodeRemote, 0, MEM_RELEASE);
      end;
    finally
      VirtualFreeEx(hProcess, pDataRemote, 0, MEM_RELEASE);
    end;
  finally
    CloseHandle(hProcess);
  end;
end; 
```

```
procedure ChangeTab(PageControlHandle: HWND; TabIndex: Integer);
var
  dwProcessId: DWORD;
  hParent: HWND;
  Info: TNMHdr;
begin
  GetWindowThreadProcessId(PageControlHandle, @dwProcessId);
  hParent := GetParent(PageControlHandle);

  Info.hwndFrom := PageControlHandle;
  Info.idFrom := GetWindowLongPtr(PageControlHandle, GWL_ID);
  Info.code := TCN_SELCHANGING;

  if SendMessageRemote(dwProcessId, hParent, WM_NOTIFY, WPARAM(PageControlHandle), @Info, SizeOf(TNMHdr)) <> 0 then
    raise Exception.Create('Page control didn''t allow tab to change.');

  if SendMessage(PageControlHandle, TCM_SETCURSEL, TabIndex, 0) = -1 then
    raise Exception.Create('Failed to change tab.');

  Info.code := TCN_SELCHANGE;
  SendMessageRemote(dwProcessId, hParent, WM_NOTIFY, WPARAM(PageControlHandle), @Info, SizeOf(TNMHdr));
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:59:35.023

发现使用 TCM_SETCURFOCUS 消息而不是 TCM_SETCURSEL 足以更改选项卡的内容。

```
procedure ChangeTab(PageControlHandle: HWND; TabIndex: Integer);
begin
  SendMessage(PageControlHandle, TCM_SETCURFOCUS, TabIndex, 0);
end; 
```

但是，如果页面控件处于按钮模式（具有 TCS_BUTTONS 样式），这将不起作用，因为按钮可以在不更改内容的情况下接收焦点。

# namespaces - 使用错误意外继承插槽（值）

> ID：16067514
> 
> 赞同：4
> 
> 时间：2013-04-17T18:33:25.873
> 
> 标签：namespaces, package, common-lisp

```
(defpackage :winner
  (:use :cl)
  (:export e1))

(in-package :winner)

(define-condition e1 ()
  ((name
    :initform "e1"
    :reader name)
   (package 
    :initform "winner"
    :reader related-package)))

(defmethod print-object ((err e1) stream)
  (FORMAT stream "~a~%~a~%" (name err) (related-package err)))

(defpackage :loser
  (:use :cl :winner)
  (:export e2))

(in-package :loser)

(define-condition e2 (e1)
  ((name
    :initform "e2")
   (package
    :initform "loser"))) 
```

我现在期望：

```
(make-instance 'e1)
e1
winner

(make-instance 'e2)
e2
loser 
```

但相反我得到

```
(make-instance 'winner:e1)
e1
winner

(make-instance 'loser:e2)
e1
loser 
```

这是非常出乎意料的。我犯了什么错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T19:16:25.343

如果您使用`DESCRIBE`.

```
? (make-instance 'loser:e2)
e1
loser

? (describe *)
e1
loser

Class: #<STANDARD-CLASS LOSER:E2>
Wrapper: #<CCL::CLASS-WRAPPER LOSER:E2 #x302000ECE15D>
Instance slots
WINNER::NAME: "e1"
PACKAGE: "loser"
LOSER::NAME: "e2" 
```

您看到的是该对象具有三个 (!) 插槽`WINNER::NAME`：`PACKAGE`和`LOSER::NAME`.

这是为什么？`PACKAGE`是包中的一个符号`CL`（`PACKAGE`在 Common Lisp 中是一个系统类，一个类型）。由于您的两个包都使用 CL，因此两者都具有相同的符号`PACKAGE`，因此只有一个 name 插槽`CL:PACKAGE`。

`NAME`是每个包的本地符号。每个包都有自己的符号名称。因此每个对象有两个不同的槽`WINNER::NAME`和`LOSER::NAME`。

由于您的打印机功能仅读取 slot `WINNER::NAME`，因此您只能获取其内容。

**你需要记住什么？**

*   有一个自定义打印机很好，但`DESCRIBE`用于调试
*   包是符号的命名空间。它们不是类、槽、函数等概念的模块。
*   包装`CL`带有许多符号。如果您的包使用 package `CL`，那么它具有所有这些符号。是否将它们用于函数名、变量、类名、槽名……都没有关系。

# javascript - 如何从以该模式打开的 iframe 访问包含模式的父窗口

> ID：16067515
> 
> 赞同：0
> 
> 时间：2013-04-17T18:33:28.513
> 
> 标签：javascript, jquery, ajax

我有一个名为 parent.html 的 html 页面，它有 Bootstrap 手风琴。通过单击手风琴上的链接，它会调用另一个页面 search.html 并在模式上打开 iframe。

search.html 有一个“完成”按钮，其功能是关闭模式，在手风琴上发布数据，手风琴应该保持打开状态。

我试过 .opener()。它似乎没有用。任何指针？

# 父.html

选购花店 找花店

```
$(function () {
    $("*[data-modal]").click(function (e) {
        e.preventDefault();
        var href = $(this).attr('href');
        if (href.indexOf('#') != 0) {
            $('<div id="searchBox" class="modal bigModal" data-backdrop="static"><div class="searchModal-header gutter10-lr"><button type="button" onclick="window.location.reload()" class="close" data-dismiss="modal" aria-hidden="true">×</button></div><div class=""><iframe id="search" src="' + href + '" class="searchModal-body"></iframe></div></div>').modal();
        }
    });
}); 
```

# 搜索.html

```
<!DOCTYPE html>
<html lang="en">
<head>
<head>
    <meta charset="utf-8">
    <title>Getting Started</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
</head>
<body id="detail">
<form class="form-horizontal" id="frmdetail" name="frmdetail" action="preferences"  method="POST">
<div class="row-fluid gutter10-tb border-t">
   <a class="btn btn-primary my-list" href="#">Finish</a>
</div>
</form>
</div>
<script type="text/javascript">
    $(document).ready(function(){

        if (top === window) {
            alert("this page is not in an iframe");
        } else {
            alert ("Im here");
            $('.my-list').click(function(){
                alert("Im clicked");
            $('.modal', opener.document).dialog('close');
        });
        }
    });
</script> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:42:21.030

您可以尝试使用 postMessage： [http ://en.wikipedia.org/wiki/Cross-document_messaging](http://en.wikipedia.org/wiki/Cross-document_messaging) [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

您应该从 search.html 向主页发送命令，让主页处理收到消息的事件。

你会在上面的链接中找到你需要的东西

示例（父页面）：

```
window.onmessage = function(e){
    //Here is the data that you receive from search.html
    var DataReceived = e.data;
    var OriginUrl = e.origin;

    //Do what you want when the message is received
}; 
```

示例（search.html）：

```
function buttonClick() {
    var curDomain = location.protocol + '//' + location.host; //This will be received as e.origin (see above)
    var commandString = "Hello parent page!"; //This will be received as e.data
    parent.postMessage(commandString,curDomain); //Sends message to parent frame
} 
```

父页面中的 windows.onmessage 应该在页面加载时“启动”。'buttonClick()' 函数可以在您想向父页面发送消息的时间和地点被调用，该页面将执行一些东西（在这种情况下，你的东西带有手风琴）

编辑：关闭模式尝试这种方式：

家长：

```
window.onmessage = function(e){
    //Here is the data that you receive from search.html
    var DataReceived = e.data;
    var OriginUrl = e.origin;
    if (e.data == 'close') {
        $(this).modal('hide'); //Example code, you can run what you want
    }
}; 
```

搜索：

```
function buttonClick() {
    var curDomain = location.protocol + '//' + location.host; //This will be received as e.origin (see above)
    var commandString = "close"; //This will be received as e.data
    parent.postMessage(commandString,curDomain); //Sends message to parent frame
} 
```

在这种情况下，您将消息“关闭”发送到父框架。当父母收到消息时，他检查它是否“关闭”，然后运行您想要的代码（在这种情况下，您使用 $(".modal").dialog('close') 关闭您的模式）

# php - 新闻源 imagecreatefromjpg() 批量错误

> ID：16067520
> 
> 赞同：0
> 
> 时间：2013-04-17T18:33:50.110
> 
> 标签：php, image, gd

我正在拉新闻提要并在循环中执行批处理 imagecreatefromjpg() 但我收到了这个错误。

> 警告：imagecreatefromjpeg(): php_network_getaddresses: getaddrinfo failed: Name or service not known in /home4/index.php on line 90

当我只做一个图像时它工作正常，但在一个循环中，它会出错。每个图像是否应该有某种 onComplete 处理程序，也许它做得太快了？

我只是抓取每个提要图像的平均颜色。

```
$filename = $inimage;    
$image = imagecreatefromjpeg($filename);
$width = imagesx($image);
$height = imagesy($image);
$pixel = imagecreatetruecolor(1, 1);
imagecopyresampled($pixel, $image, 0, 0, 0, 0, 1, 1, $width, $height);
$rgb = imagecolorat($pixel, 0, 0);
$color = imagecolorsforindex($pixel, $rgb);
$image_r = $color['red'];
$image_g = $color['green'];
$image_b = $color['blue']; 
```

谢谢。

# php - 在 MySQL/PHP 脚本中使用 php time() 而不是 now()

> ID：16067522
> 
> 赞同：0
> 
> 时间：2013-04-17T18:34:01.763
> 
> 标签：php, mysql

我有一个从 PHP 发送到 MySQL 的 SQL 查询，它看起来像这样：

```
SELECT (now()-table.created) FROM table 
```

现在我需要用 PHP 中的日期替换 MySQL 函数“now()”（因为它并不总是我想要的“现在”在查询中），但是当我将 PHP 传递给“time()”时它不起作用mysql。

我可以使用什么 PHP 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:38:59.323

MySQL 有一个名为[`UNIX_TIMESTAMP`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)and的函数[`FROM_UNIXTIME`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)，

```
-- NOW() => time()
SELECT UNIX_TIMESTAMP(NOW())
-- time() => DATETIME()
SELECT FROM_UNIXTIME(1366223878) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:39:03.227

嗯，嗯，这取决于`table.created`存储的格式。

如果它是一个 UNIXTIME 值（即与 PHP 的时间格式相同），那么您需要做的就是以正确的方式插入它：

```
<?php
$dbobj->query('SELECT ('.time().'-table.created) FROM table');
?> 
```

...如果相反，`table.created`是日期时间或类似值，则需要创建适当的日期格式：

```
<?php
$dbobj->query("SELECT ('".date('Y-m-d H:i:s', time())."'-table.created) FROM table");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:41:56.717

使用较新的 DateTine 对象；

```
$date = new DateTime('NOW');

$query = "SELECT * FROM table where date > ".$date->format('Y-m-d H:i:s') 
```

DateTime 对象中的`NOW`将根据您的喜好准确，因为它存储在您似乎想要它的那一刻，与在 MySQL 中完成时不同，可能是（微/毫秒）秒后。

# haskell - 外部 primop 的 cmm 调用格式（integer-gmp 示例）

> ID：16067523
> 
> 赞同：63
> 
> 时间：2013-04-17T18:34:03.300
> 
> 标签：haskell, ghc

我一直在检查[integer-gmp源代码，以了解如何根据](https://github.com/ghc/packages-integer-gmp)[GHC Primops page](http://hackage.haskell.org/trac/ghc/wiki/Commentary/PrimOps)中记录的 cmm 实现外国 primops 。我知道使用[llvm hack](http://breaks.for.alienz.org/blog/2012/02/09/parsing-market-data-feeds-with-ragel/)或 fvia-C/gcc 来实现它们的技术——这对我来说更像是一种学习经验，可以理解 interger-gmp 库使用的第三种方法。

[因此，我在 MSFT 页面（pdf 链接）](http://www.cminusminus.org/extern/man2.pdf)上查找了 CMM 教程，浏览了[GHC CMM 页面](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Compiler/CmmType)，但仍然有一些未解决的问题（如果不深入研究 CMM，很难将所有这些概念牢记在心，这就是我现在正在做的事情）。[integer-bmp cmm 文件](https://github.com/ghc/packages-integer-gmp/blob/master/cbits/gmp-wrappers.cmm)中有以下代码片段：

```
integer_cmm_int2Integerzh (W_ val)
{
   W_ s, p; /* to avoid aliasing */

   ALLOC_PRIM_N (SIZEOF_StgArrWords + WDS(1), integer_cmm_int2Integerzh, val);

   p = Hp - SIZEOF_StgArrWords;
   SET_HDR(p, stg_ARR_WORDS_info, CCCS);
   StgArrWords_bytes(p) = SIZEOF_W;

   /* mpz_set_si is inlined here, makes things simpler */
   if (%lt(val,0)) {
        s  = -1;
        Hp(0) = -val;
   } else {
     if (%gt(val,0)) {
        s = 1;
        Hp(0) = val;
     } else {
        s = 0;
     }
  }

   /* returns (# size  :: Int#,
                 data  :: ByteArray#
               #)
   */
   return (s,p);
} 
```

[如ghc cmm 标头](https://github.com/ghc/ghc/blob/master/includes/Cmm.h)中所定义：

```
W_ is alias for word.
ALLOC_PRIM_N is a function for allocating memory on the heap for primitive object.
Sp(n) and Hp(n) are defined as below (comments are mine):
#define WDS(n) ((n)*SIZEOF_W) //WDS(n) calculates n*sizeof(Word)
#define Sp(n)  W_[Sp + WDS(n)]//Sp(n) points to Stackpointer + n word offset?
#define Hp(n)  W_[Hp + WDS(n)]//Hp(n) points to Heap pointer + n word offset? 
```

我不明白第 5-9 行（如果您有 1/0 的困惑，第 1 行是开始）。进一步来说：

*   为什么ALLOC_PRIM_N(bytes,fun,arg)的函数调用格式是那样的？
*   为什么 p 被这样操纵？

我理解的函数（通过查看[Prim.hs](https://github.com/ghc/packages-integer-gmp/blob/master/GHC/Integer/GMP/Prim.hs)中的函数签名）接受一个 int，并返回一个 (int, byte array) （分别存储在`s`代码`p`中）。

对于任何想知道内联调用的人`if block`，它是 gmp [mpz_init_si 函数](http://stuff.mit.edu/afs/sipb.mit.edu/project/stk/src/STk-2.2.0/Mp/gmp-1.3.2/mpz_set_si.c)的 cmm 实现。我的猜测是，如果您通过 ccall 调用在目标文件中定义的函数，则它不能被内联（这是有道理的，因为它是目标代码，而不是中间代码 - LLVM 方法似乎更适合通过 LLVM IR 内联）。因此，优化是定义要内联的函数的 cmm 表示。如果这个猜测是错误的，请纠正我。

非常感谢对第 5-9 行的解释。我对 integer-gmp 文件中定义的其他宏有更多疑问，但在一篇文章中可能会问得太多。如果您可以通过 Haskell wiki 页面或博客回答问题（您可以发布链接作为答案），那将不胜感激（如果您这样做了，我也将不胜感激整数的逐步演练-gmp cmm 宏，例如`GMP_TAKE2_RET1`)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-22T14:54:39.793

这些行在 Haskell 堆上分配了一个新的 ByteArray#，因此要理解它们，您首先需要了解 GHC 的堆是如何管理的。

*   每个功能（= 执行 Haskell 代码的 OS 线程）都有自己专用的*Nursery*，这是堆的一个区域，它可以在其中进行正常的小型分配，例如这个。对象被简单地从低地址到高地址按顺序分配到该区域中，直到该功能尝试进行超过托儿所中剩余空间的分配，这将触发垃圾收集器。

*   所有堆对象都与字大小的倍数对齐，即在 32 位系统上为 4 个字节，在 64 位系统上为 8 个字节。

*   Cmm 级寄存器 Hp 指向已在 Nursery 中分配的最后一个字（开头）。HpLim 指向可以在 Nursery 中分配的最后一个单词。（HpLim 也可以被另一个线程设置为 0 以停止 GC，或发送异步异常。）

*   [https://ghc.haskell.org/trac/ghc/wiki/Commentary/Rts/Storage/HeapObjects](https://ghc.haskell.org/trac/ghc/wiki/Commentary/Rts/Storage/HeapObjects)包含有关单个堆对象布局的信息。值得注意的是，每个堆对象都以一个*信息指针*开头，它（除其他外）标识它是什么类型的堆对象。

Haskell 类型 ByteArray# 是用堆对象类型 ARR_WORDS 实现的。ARR_WORDS 对象仅由（一个信息指针后跟）一个大小（以字节为单位）和任意数据（有效负载）组成。有效负载不被 GC 解释，因此它不能存储指向 Haskell 堆对象的指针，但它可以存储任何其他内容。SIZEOF_StgArrWords 是所有 ARR_WORDS 堆对象共有的标头大小，在这种情况下，有效负载只是一个单词，因此 SIZEOF_StgArrWords + WDS(1) 是我们需要分配的空间量。

ALLOC_PRIM_N (SIZEOF_StgArrWords + WDS(1), integer_cmm_int2Integerzh, val) 扩展为类似

```
Hp = Hp + (SIZEOF_StgArrWords + WDS(1));
if (Hp > HpLim) {
    HpAlloc = SIZEOF_StgArrWords + WDS(1);
    goto stg_gc_prim_n(integer_cmm_int2Integerzh, val);
} 
```

第一行将 Hp 增加了要分配的数量。第二行检查堆溢出。第三行记录了我们尝试分配的数量，因此 GC 可以撤消它。第四行调用 GC。

第四行是最有趣的。参数告诉 GC 在垃圾收集完成后如何重新启动线程：它应该使用参数 val 重新调用 integer_cmm_int2Integerzh。stg_gc_prim_n 中的“_n”（以及 ALLOC_PRIM_N 中的“_N”）意味着 val 是一个非指针参数（在这种情况下是一个 Int#）。如果 val 是指向 Haskell 堆对象的指针，GC 需要知道它是活动的（因此它不会被收集）并使用对象的新地址重新调用我们的函数。在这种情况下，我们将使用 _p 变体。还有一些变体，例如 _pp 用于多个指针参数，_d 用于 Double# 参数等。

在第 5 行之后，我们成功分配了一个 SIZEOF_StgArrWords + WDS(1) 字节块，记住，Hp 指向它的最后一个字。因此，p = Hp - SIZEOF_StgArrWords 将 p 设置为该块的开头。第 8 行填充 p 的 info 指针，将新创建的堆对象标识为 ARR_WORDS。CCCS 是当前的成本中心堆栈，仅用于分析。启用分析后，每个堆对象都包含一个额外的字段，该字段基本上标识谁负责其分配。在非分析构建中，没有 CCCS 和 SET_HDR 只是设置信息指针。最后，第 9 行填写了 ByteArray# 的大小字段。函数的其余部分填充有效负载并返回符号值和 ByteArray# 对象指针。

所以，这最终更多地是关于 GHC 堆而不是关于 Cmm 语言，但我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-24T06:32:12.193

![在此处输入图像描述](https://i.stack.imgur.com/oq5rN.jpg)

## 所需知识

为了进行**算术和逻辑**运算，计算机在其**CPU**（中央处理单元）中具有称为**ALU**（算术逻辑单元）的**数字电路。****ALU 从输入寄存器**加载数据。**处理器寄存器**是在位于**CPU 芯片的****SRAM （静态随机存取****存储器**）中实现的**L1 高速缓存**（3 个 CPU 时钟周期内的数据请求）中的内存存储。一个处理器通常包含**几种**寄存器，通常根据**它们可以容纳的位数**来区分。

 ******数字以**离散位**表示，可以容纳有限数量的值。通常数字具有编程语言（[在 Haskell 中）公开的以下](http://hackage.haskell.org/package/base-4.7.0.1/docs/Data-Int.html)**原始类型**：

```
 8 bit numbers = 256 unique representable values
16 bit numbers = 65 536 unique representable values
32 bit numbers = 4 294 967 296 unique representable values
64 bit numbers = 18 446 744 073 709 551 616 unique representable values 
```

**这些类型的固定精度算术**已**在硬件中实现**。**字长**是指计算机的 CPU 一次可以处理的位数。对于**x86**架构，这是**32 位**，而**x64**是**64 位**。

**IEEE 754定义了****{16, 32, 64, 128} 位数字**的浮点数标准。例如，32 位点数（具有 4 294 967 296 个唯一值）可以保持近似值**[** **-3.402823e38 到 3.402823e38]**，**精度**至少为**7****个**浮点数。

![在此处输入图像描述](https://i.stack.imgur.com/KX0E1.png)

## 此外

首字母缩略词**GMP**表示**GNU 多精度算术库**，并增加了对软件模拟任意精度算术的支持。**Glasgow Haskell Compiler** Integer 实现使用它。

> GMP 的目标是在所有操作数大小上都比任何其他 bignum 库都快。这样做的一些重要因素是：
> 
> *   使用全字作为基本算术类型。
> *   对不同的操作数大小使用不同的算法；对于非常大的数字更快的算法通常对于小数字来说更慢。
> *   为最重要的内部循环高度优化的汇编语言代码，专门用于不同的处理器。

## 回答

对于某些 Haskell 可能有点难以理解语法所以这里是 javascript 版本

```
var integer_cmm_int2Integerzh = function(word) {
  return WORDSIZE == 32 
    ? goog.math.Integer.fromInt(word))
    : goog.math.Integer.fromBits([word.getLowBits(), word.getHighBits()]);
}; 
```

**goog**使用的[Google Closure 库](https://github.com/jarib/google-closure-library/)类位于Math.Integer[中](https://github.com/jarib/google-closure-library/blob/master/closure/goog/math/integer.js)。调用函数：

```
goog.math.Integer.fromInt = function(value) {
  if (-128 <= value && value < 128) {
    var cachedObj = goog.math.Integer.IntCache_[value];
    if (cachedObj) {
      return cachedObj;
    }
  }

  var obj = new goog.math.Integer([value | 0], value < 0 ? -1 : 0);
  if (-128 <= value && value < 128) {
    goog.math.Integer.IntCache_[value] = obj;
  }
  return obj;
};
goog.math.Integer.fromBits = function(bits) {
  var high = bits[bits.length - 1];
  return new goog.math.Integer(bits, high & (1 << 31) ? -1 : 0);
}; 
```

这并不完全正确，因为返回类型应该在`return (s,p);`哪里

*   s 是值
*   p 是符号

为了修复这个 GMP 包装应该被创建。这已在[Haskell to JavaScript 编译器](https://github.com/ghcjs/ghcjs)项目（[源链接](https://searchcode.com/codesearch/view/15504297/)）中完成。

## 5-9 行

```
ALLOC_PRIM_N (SIZEOF_StgArrWords + WDS(1), integer_cmm_int2Integerzh, val);
p = Hp - SIZEOF_StgArrWords;
SET_HDR(p, stg_ARR_WORDS_info, CCCS);
StgArrWords_bytes(p) = SIZEOF_W; 
```

如下面所述

*   分配空间作为新词
*   创建指向它的指针
*   设置指针值
*   设置指针类型大小******

# algorithm - 合并堆实现为排序数组

> ID：16067526
> 
> 赞同：0
> 
> 时间：2013-04-17T18:34:07.753
> 
> 标签：algorithm, data-structures, linked-list, heap

当我们将两个二进制最小堆实现为双排序链接链接时，关于将一个堆合并到另一个堆的最坏情况时间的最有效算法是什么，

我自己的想法是，我会将元素数量较少的堆元素插入到元素数量较多的堆中：

如果我可以随机访问元素（链表通常不是这种情况），它将在`O(m * log(n+m))`where完成，`m < n`因为我可以将较小堆的每个元素插入到较大的堆中，否则是`O(m * n)`因为我必须将每个元素插入到最少的已排序列表。

有没有其他想法可以更快地工作并且有更好的最坏时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:42:02.783

您可以在 O(m + n) 时间内轻松完成此操作，只要您能够跟踪在遍历堆时正在检查的节点即可。在伪代码中：

```
Iterator iterDest = largerHeap.getIterator();
Iterator iterSrc = smallerHeap.getIterator();

while (iterSrc.hasMore()) {
    valueSrc = iterSrc.getCurrent();
    valueDest = iterDest.getCurrent();

    if (valueSrc <= valueDest) {
        // Insert elements in their proper place in largerHeap
        iterDest.insertBeforeCurrent(valueSrc);
        iterSrc.moveNext();
    } else {
        if (iterDest.hasMore()) {
            iterDest.moveNext();
        } else {
            break;
        }
    }
}

// Append extra elements to the end of largerHeap
while (iterSrc.hasMore()) {
    largerHeap.append(iterSrc.getCurrent());
    iterSrc.moveNext();
} 
```

# c++ - 访问 DLL 中的重载函数

> ID：16067529
> 
> 赞同：3
> 
> 时间：2013-04-17T18:34:14.767
> 
> 标签：c++, winapi, direct2d

[Direct2D](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371073%28v=vs.85%29.aspx)系统库为函数提供了 4 个重载版本`D2D1CreateFactory`。`GetProcAddress`现在假设我正在动态加载 Direct2D 库，并使用系统调用获取指向 CreateFactory 函数的指针。将返回 4 个重载函数中的哪一个？有没有办法明确指定我需要哪个功能？这是动态加载与静态链接相比的缺点吗，因为某些重载函数将无法访问？

```
HMODULE hDllD2D = ::LoadLibraryExA("d2d1.dll", 0, LOAD_LIBRARY_SEARCH_SYSTEM32);
FARPROC fnCreateFactory = ::GetProcAddress(hDllD2D, "D2D1CreateFactory");
// What should be the call signature of `fnCreateFactory` ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:41:42.430

DLL 中的函数是最通用的一个，[`D2D1CreateFactory(D2D1_FACTORY_TYPE,REFIID,D2D1_FACTORY_OPTIONS*,void**) function`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368034%28v=vs.85%29.aspx). 如果您查看 中的声明`d2d1.h`，您会看到该函数已声明，而其他重载只是标题中的内联函数，它们调用通用函数：

```
#ifndef D2D_USE_C_DEFINITIONS

inline
HRESULT
D2D1CreateFactory(
    __in D2D1_FACTORY_TYPE factoryType,
    __in REFIID riid,
    __out void **factory
    )
{
    return 
        D2D1CreateFactory(
            factoryType,
            riid,
            NULL,
            factory);
}

template<class Factory>
HRESULT
D2D1CreateFactory(
    __in D2D1_FACTORY_TYPE factoryType,
    __out Factory **factory
    )
{
    return
        D2D1CreateFactory(
            factoryType,
            __uuidof(Factory),
            reinterpret_cast<void **>(factory));
}

template<class Factory>
HRESULT
D2D1CreateFactory(
    __in D2D1_FACTORY_TYPE factoryType,
    __in CONST D2D1_FACTORY_OPTIONS &factoryOptions,
    __out Factory **ppFactory
    )
{
    return
        D2D1CreateFactory(
            factoryType,            
            __uuidof(Factory),
            &factoryOptions,
            reinterpret_cast<void **>(ppFactory));
}

#endif // #ifndef D2D_USE_C_DEFINITIONS 
```

# facebook - Facebook Like 按钮登录问题

> ID：16067532
> 
> 赞同：1
> 
> 时间：2013-04-17T18:34:31.907
> 
> 标签：facebook, facebook-like

我在使用 Internet Explorer（Windows 7 上的 v10，但在测试时出现的任何版本上都会发生这种情况）时，特别是在 Facebook“赞”按钮上遇到问题。

仅当用户之前尚未在浏览器中登录 Facebook 时才会出现此问题（即，可能尚未将 cookie 保存在他们之前在其他地方登录 Facebook 的浏览器中）。

当用户单击“Like”按钮时，他们首先会看到一个登录屏幕对话框，他们必须在其中输入用户名和密码，然后在任何其他浏览器中通常会发生的情况是“Like”计数会增加并且用户将能够在他们的 Facebook 墙上发表评论。

然而，在 Internet Explorer 中发生的具体情况是，一旦用户登录 Facebook，登录屏幕就会消失，什么也没有发生。如果再次单击“喜欢”按钮，则会出现一个空白对话框，该对话框链接到一个 URL，该 URL 更改（对我来说太快了）到另一个 URL，包括**close_popup.php**，然后弹出窗口再次消失，没有任何反应。

但是，如果我然后刷新页面并在 Internet Explorer 中再次单击“Like”按钮，它将起作用，因为它应该增加“Like”计数并允许用户发表评论（这次虽然用户已经登录从之前的尝试）。

我仔细查看了其他问题并阅读了开发人员文档，但尽管我已经尝试过，但我似乎无法解决问题。如果有人能提出一种我可以解决问题的方法，我将不胜感激。

# git - 仅对某些 git url/域使用代理？

> ID：16067534
> 
> 赞同：67
> 
> 时间：2013-04-17T18:34:34.410
> 
> 标签：git, github, proxy

是否可以将 git 配置为仅对特定域使用代理？

我想使用我们的公司代理来访问 Github，但不要使用它来访问我们自己的内部 git 存储库。

我正在使用凉亭，它需要在我们的防火墙和 github 上都需要项目，所以我不能将其作为每个项目设置来执行。它需要是某种全局配置选项。有什么想法吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-09-10T07:00:35.357

要添加另一种可能性，您可以[通过`git config http.proxy`](https://stackoverflow.com/a/14750116/6309).

```
git config --global http.proxy http://mydomain\\myusername:mypassword@myproxyserver:proxyport 
```

但真正整洁的是，[从 git1.8.5 (October 2013) 开始](https://github.com/git/git/blob/bb80ee09974667a1db6bbc5e33574ed869b76a88/Documentation/RelNotes/1.8.5.txt#L69-L78)，您可以**为每个 url 设置 http 设置**。

**`http.*`现在可以根据配置应用的 URL 指定“** ”变量。
例如，

```
[http]
   sslVerify = true
[http "https://weak.example.com/"]
   sslVerify = false 
```

> `http.sslVerify`仅在与该指定站点交谈时才会关闭。

* * *

请参阅[提交 d4770964d5](https://github.com/git/git/commit/d4770964d5058a679ebfc051acceb7968a831f84)：

```
$ git config --bool --get-urlmatch http.sslVerify https://good.example.com
true
$ git config --bool --get-urlmatch http.sslVerify https://weak.example.com
false 
```

> 仅`<section>`指定后，您可以获得该部分中所有变量的列表，其值适用于给定的 URL。例如

```
$ git config --get-urlmatch http https://weak.example.com
http.sslverify false 
```

* * *

所有细节都在[提交 6a56993b](https://github.com/git/git/commit/6a56993b2ec7082521cf14f98ab9fb5a5def4b13)中：

```
http.<url>.*:: 
```

> 上面的任何 http.* 选项都可以选择性地应用于某些 url。
> 对于匹配 URL 的配置键，配置键的每个元素都会与 URL 的元素进行比较，顺序如下：

*   **方案**（例如，`https`在 中`https://example.com/`）。
*   **主机/域名**（例如，`example.com`在 中`https://example.com/`）。
*   **端口号**（例如，`8080`在 中`http://example.com:8080/`）。
*   **路径**（例如，`repo.git`在 中`https://example.com/repo.git`）。
*   **用户名**（例如，`user`in `https://user@example.com/repo.git`）

> 上面的列表按优先级递减排序；与配置键路径匹配的 URL 优先于与其用户名匹配的 URL。
> 例如，如果 URL 是`https://user@example.com/foo/bar`的配置键匹配，`https://example.com/foo`则将优先于 的配置键匹配`https://user@example.com`。
> 
> 在尝试任何匹配之前，所有 URL 都会被规范化（密码部分，如果嵌入在 URL 中，出于匹配目的始终会被忽略），以便简单拼写不同的等效 url 将正确匹配。
> 
> **环境变量设置总是覆盖任何匹配项**。
> 匹配的 url 是直接提供给 Git 命令的那些。
> 这意味着由于重定向而+访问的任何 URL 都不参与匹配。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-17T20:43:35.217

我通常使用环境变量：

*   `http_proxy=http://username:password@proxydomain:port`
*   `https_proxy=http://username:password@proxydomain:port`

这是在访问 GitHub 存储库时由 git 获取的。

笔记：

*   两者都`http_proxy`必须`https_proxy`使用*`http://`*代理的 url (no `https://`)。
*   始终使用（不要依赖其短名称）的[fqn（全限定名）](https://en.wikipedia.org/wiki/Fully_qualified_name)`proxydomain`

但是对于内部仓库，我所要做的就是定义并导出另外一个环境变量：

*   `no_proxy=.my.company,localhost,127.0.0.1,::1``myrepo.my.company`, 用于访问具有类似localhost的地址的任何 repo 。

你可以定义`NO_PROXY`or `no_proxy`，没关系。

但以防万一，我总是设置`HTTP_PROXY`, `HTTPS_PROXY`, `http_proxy`, `https_proxy`,`NO_PROXY`和`no_proxy`.

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2017-01-12T22:05:44.537

正如一些人在这里提到的，您可以通过指定 URL 和代理设置来做到这一点，但这是为我解决此问题的用例。感谢上面的VonC！

请注意，下面我指定了 Git 服务器的根目录。您克隆的 git 存储库的完整路径不是必需的。您可以使用单个条目来处理整个服务器。

将以下内容添加到您的 .gitconfig 文件中。在我的 Windows 系统上，我正在使用 %userprofile%\.gitconfig

```
[http]
    proxy = http://my.proxy.net:8080
[https]
    proxy = http://my.proxy.net:8443
[http "http://my.internalgitserver.com/"]
    proxy = "" 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-02-17T12:04:48.277

您可以专门为每个遥控器调整各种配置选项。假设我们有 2 个遥控器，分别命名为`origin`和`upstream`。您为每个执行以下操作调整代理：

```
git config --path remote.origin.proxy http://user:pass@proxy_for_origin:8080
git config --path remote.upstream.proxy http://user:pass@proxy_for_upstream:8080 
```

这将更改**本地存储库**配置 ( `.git/config`) 中每个远程的部分。

如果您愿意，您还可以调整**全局配置选项。**由于在全局配置文件 ( ) 中引用远程名称没有意义`$HOME/.gitconfig`，因此您可以使用**url 匹配**（IIRC，自 Git 1.8.5 起支持）。例子：

```
[http "https://example.com/repo1.git"]
    proxy = http://user:pass@proxy1:8080
[http "https://example.com/repo2.git"]
    proxy = http://user:pass@proxy2:8080 
```

如果您想查看已设置的内容：

```
git config --path --get-urlmatch https://example.com/repo1.git
git config --path --get-urlmatch https://example.com/repo2.git 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-02-13T10:01:49.293

假设您的代理（如我的`ss`）是：`socks5://127.0.0.1:1086`

## 配置 git 代理

*   对所有人
    *   **添加**：`git config --global http.proxy socks5://127.0.0.1:1086`
    *   **删除**：`git config --global --unset http.proxy`
*   仅适用于特定域，例如：[https ://github.com](https://github.com)
    *   **添加**：`git config --global http.https://github.com.proxy socks5://127.0.0.1:1086`
    *   **删除**：`git config --global --unset http.https://github.com.proxy`

### 笔记

添加代理后，使用

`cat ~/.gitconfig`

可以看到相关的全局配置：

```
[http]
        proxy = socks5://127.0.0.1:1086 
```

或者

```
[http "https://github.com"]
        proxy = socks5://127.0.0.1:1086 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-22T11:01:41.907

我有一个类似的问题，我在我的公司代理后面。我基本上有两种存储库：

1.  外部 - 需要代理
2.  内部 - 不需要代理

我必须在全局配置中设置一个代理，如果本地配置中没有另外指定，它将作为默认值。

下面是配置命令：

使用代理设置全局配置

```
git config --global --add http.proxy "http://username:password@proxydomain:port"
git config --global --add https.proxy "https://username:password@proxydomain:port" 
```

然后移动到包含 .git 文件夹且不需要代理的本地目录

```
cd "C:\Users\username\directory_without_proxy\" 
```

使用空代理设置本地配置

```
git config --local --add http.proxy ""
git config --local --add https.proxy "" 
```

也可以通过其他方式完成。也就是说，您使用代理设置将全局配置保持为空和本地配置。

仔细检查一下，您可以使用以下命令分别列出全局和本地的配置设置：

```
git config --global --list
git config --local --list 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-30T06:44:52.573

在 Windows 上，只需 [note without password] 以下对我有用

```
git config --global http.proxy http://mydomain\\myusername:@myproxyserver:proxyport

git config --global https.proxy http://mydomain\\myusername:@myproxyserver:proxyport 
```

# c++ - 我可以将编译时策略的创建和使用位置分开吗？

> ID：16067537
> 
> 赞同：4
> 
> 时间：2013-04-17T18:34:39.643
> 
> 标签：c++, templates, compile-time

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <sstream>

using namespace std;

struct SubAlgorithm1 { void operator () (int /*i*/) { cout << "1" << endl; } };
struct SubAlgorithm2 { void operator () (int /*i*/) { cout << "2" << endl; } };

template<typename SubAlgorithm, typename Collection>
void Alrogirthm(SubAlgorithm& f, Collection& stuff) {
  // In my code f is invoked ~ 1e9 times (it's a loop that is executed ~
  // 1e6 times, and stuff.size() is ~1000). The application spends ~90% of
  // it's time in this function, so I do not want any virtual function
  // calls to slow down my number-crunching.
  for (int i = 0; i < 1; ++i) for_each(stuff.begin(), stuff.end(), f);
}

int main(int , char**) {
  vector<int> stuff;
  stuff.push_back(1);

  bool runtime_flag = true; // let's pretend it was read from config
  if (runtime_flag) {
    typedef SubAlgorithm1 SubAlgorithm;

    SubAlgorithm sub_algorithm;
    Alrogirthm(sub_algorithm, stuff);
  }
  else {
    typedef SubAlgorithm2 SubAlgorithm;

    SubAlgorithm sub_algorithm;
    Alrogirthm(sub_algorithm, stuff);
  }

  return 0;
} 
```

我真的很想写而不是上面的 if 子句：

```
TypeClass SubAlgorithm = runtime_flag : SubAlgorithm1 ? SubAlgorithm2;
SubAlgorithm sub_algorithm;
Algorithm(sub_algorithm, stuff); 
```

有没有办法做类似的事情？或者某种完全其他的模式（但不是运行时多态性\虚拟函数）来解决这个问题？

PS 在我的应用程序中，算法有几个子算法作为参数，子算法也有类似的结构。而且有些子算法有不同的创建界面。使用运行时多态性，我可以使用一种工厂模式，整个事情看起来不错（[http://ideone.com/YAYafr](http://ideone.com/YAYafr)），但我真的不能在这里使用虚函数。

PPS 我怀疑问题措辞反映了我在代码中实际提出的问题，所以我很乐意得到任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:46:32.610

是的。我称这种技术为魔法开关。

你创建一个`std::tuple`你的算法。您创建了一个模板函数，该函数将传递其中一种算法。

如果需要，您可以通过完美的可变转发添加其他参数。

```
template<size_t Max, typename...Ts, typename Func>
bool magic_switch( int n, Func&& f,  std::tuple<Ts...> const & pick ) {
  if( n==Max-1 ) {
    f(std::get<Max-1>(pick));
    return true;
  } else {
    return magic_switch<Max-1>( n, std::forward<Func>(f), pick );
  }
} 
```

在伪代码中。将 Max==0 特化为只返回 false，您可能必须将其设为仿函数，以便您可以部分特化。

作为缺点，传入的函子写起来很烦人。

另一个变体是使用元工厂（嗯，元编程类型的工厂？也许它是一个元映射。好吧，随便。）

```
#include <iostream>
#include <tuple>
#include <vector>
#include <utility>
#include <cstddef>
#include <functional>
#include <array>
#include <iostream>

// metaprogramming boilerplate:
template<template<typename>class Factory, typename SourceTuple>
struct tuple_map;
template<template<typename>class Factory, template<typename...>class L, typename... SourceTypes>
struct tuple_map<Factory, L<SourceTypes...>> {
  typedef L< Factory<SourceTypes>... > type;
};
template<template<typename>class Factory, typename SourceTuple>
using MapTuple = typename tuple_map<Factory, SourceTuple>::type;
template<std::size_t...> struct seq {};
template<std::size_t max, std::size_t... s>
struct make_seq: make_seq<max-1, max-1, s...> {};
template<std::size_t... s>
struct make_seq<0, s...> {
  typedef seq<s...> type;
};
template<std::size_t max>
using MakeSeq = typename make_seq<max>::type;

// neat little class that lets you type-erase the contents of a tuple,
// and turn it into a uniform array:
template<typename SourceTuple, typename DestType>
struct TupleToArray;
template<template<typename...>class L, typename... Ts, typename DestType>
struct TupleToArray<L<Ts...>, DestType> {
  template<std::size_t... Index>
  std::array< DestType, sizeof...(Ts) > operator()( L<Ts...> const& src, seq<Index...> ) const {
    std::array< DestType, sizeof...(Ts) > retval{ DestType( std::get<Index>(src) )... };
    return retval;
  }

  std::array< DestType, sizeof...(Ts) > operator()( L<Ts...> const& src ) const {
    return (*this)( src, MakeSeq<sizeof...(Ts)>() );
  }
};
template< typename DestType, typename SourceTuple >
auto DoTupleToArray( SourceTuple const& src )
  -> decltype( TupleToArray<SourceTuple, DestType>()( src ) )
{
  return TupleToArray<SourceTuple, DestType>()( src );
}

// Code from here on is actually specific to this problem:
struct SubAlgo { int operator()(int x) const { return x; } };
struct SubAlgo2 { int operator()(int x) const { return x+1; } };

template<typename Sub>
struct FullAlgo {
  void operator()( std::vector<int>& v ) const {
    for( auto& x:v )
      x = Sub()( x );
  }
};

// a bit messy, but I think I could clean it up:
typedef std::tuple< SubAlgo, SubAlgo2 > subAlgos;
MapTuple< FullAlgo, subAlgos > fullAlgos;
typedef std::function< void(std::vector<int>&) > funcType;
std::array< funcType, 2 > fullAlgoArray =
  DoTupleToArray< funcType >( fullAlgos );

int main() {
  std::vector<int> test{1,2,3};
  fullAlgoArray[0]( test );
  for (auto&& x: test)
    std::cout << x;
  std::cout << "\n";
  fullAlgoArray[1]( test );
  for (auto&& x: test)
    std::cout << x;
  std::cout << "\n";
} 
```

这是很多样板文件，但我刚刚所做的是允许您使用无状态子算法并将其一次插入一个元素到您的完整算法中，然后键入擦除生成的完整算法并将其存储在一个`std::function`数组中。

有`virtual`调用开销，但它发生在顶层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:45:33.867

您应该使用一个接口，同时 SubAlgorithm1 和 SubAlgorithm2（您需要比这更好的名称）实现该接口。根据 runtime_flag 创建任一类的对象。

# javascript - 导出到excel在IE中不起作用

> ID：16067539
> 
> 赞同：2
> 
> 时间：2013-04-17T18:34:45.617
> 
> 标签：javascript, jquery, export-to-excel

我有一张要导出的表。我的目标是还保留应用于表格的 CSS，以便它在 excel 中的显示与它在页面上的外观完全一致（或非常接近）。我正在使用这个功能：

```
function exportToExcel( container ) {
    var begin = '<html xmlns:o="urn:schemas-microsoft-com:office:office" ' +
        'xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>' +
        '<!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>SlideIdTool</x:Name>"' +
        '<x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets>' +
        '</x:ExcelWorkbook></xml><![endif]--></head><body>';
    var end = '</body></html>';
    window.open( 'data:application/vnd.ms-excel,' + encodeURIComponent( begin + $( container ).html() + end ) );
} 
```

这在 Chrome 和 Firefox 中效果很好。但它在 IE 9 或 10 中不起作用。我看到一个窗口弹出但没有内容，没有请求下载任何内容，nada。在 chrome 中，它直接下载到一个文件，没有弹出窗口或任何东西。

关于调整或修复以从该功能中获得跨浏览器功能的任何建议？

# objective-c - 在哪里为 NSInvocationOperation 创建 NSManagedObjectContext

> ID：16067552
> 
> 赞同：0
> 
> 时间：2013-04-17T18:35:09.397
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext, nsinvocationoperation

我创建了多个 NSInvocationOperations 并将其添加到 NSOperationQueue。其中两个 NSInvocationOperations 创建了同一个父类的许多对象（Country 和 City 是 Location 的子类）。除了我注意到一个模型的变化或另一个模型有点被破坏之外，它大部分都很顺利。

查看商店（使用 sqlite 程序），我看到创建了第一个城市（可能总共 200 个），然后创建了所有国家（再次可能是 200 个）。如果我删除该应用程序并再次运行它，我将看到第一个国家，然后是所有城市。

我点击了文档并注意到 Apple 建议在您的 NSOperation 的启动方法中设置您的每个线程 MOC。但是我没有使用 NSOperation，我使用的是 NSInvocationOperation。这实际上让我更加质疑，为什么他们建议一开始就创建你的 MOC。

这是我的 NSInvocationOperation 的选择器...

```
+ (void)load:(NSString *)file
{
    NSManagedObjectContext *managedObjectContext = [(OSSMAppDelegate *)[[UIApplication sharedApplication] delegate] adHocManagedObjectContext];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(mergeChanges:)
                                             name:NSManagedObjectContextDidSaveNotification
                                           object:managedObjectContext];

    SBJsonParser *jsonParser = [[SBJsonParser alloc] init];

    NSString *json = [[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:file ofType:@"json"]];

    NSArray *objects = [[jsonParser objectWithString:json] valueForKeyPath:@"objects"];

    for(NSDictionary *object in objects)
    {
        [self createObjectWithObject:object inManagedObjectContext:managedObjectContext];
    }

    NSError *error = nil;
    [managedObjectContext save:&error]; 
```

}

...来自应用委托...

```
- (NSManagedObjectContext *)adHocManagedObjectContext
{
    NSManagedObjectContext *adHocManagedObjectContext = nil;

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil)
    {
        adHocManagedObjectContext = [[NSManagedObjectContext alloc] init];
        [adHocManagedObjectContext setPersistentStoreCoordinator:coordinator];
        [adHocManagedObjectContext setUndoManager:nil];
    }

    return adHocManagedObjectContext;
} 
```

...然后在其他地方（注意：firstRun 调用 load:)...

```
NSInvocationOperation *countryInvocationOperation = [[NSInvocationOperation alloc] initWithTarget:[Country class] selector:@selector(firstRun) object:nil];
[operationQueue addOperation:countryInvocationOperation]; 
```

在被调用的选择器中创建 MOC 有什么问题吗？我认为它必须是因为 MOC 与它创建的线程相关联。我想任何关于我哪里出错的指示都是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:34:40.340

I'm not sure I understand your problem (Do you have missing countries or cities?, do you have incorrect order? give an example of 'clobbered').

As for your question:

> > Is there any problem with creating the MOC in the selector that's being invoked?

No, there is no problem. the documentation only say it must be created ON the thread you intend to use it (`start` and `main` are methods that will run on the operation thread). hence, NSInvocationOperation will run your method in the operation thread, and you can create your MOC there without worries.

# pytest - 如何在 py.test 上选择多个测试？

> ID：16067559
> 
> 赞同：6
> 
> 时间：2013-04-17T18:35:40.150
> 
> 标签：pytest

我熟悉`py.test -k string`选择名称中包含的所有测试`string`并运行它的命令。

我想要的是选择具有多个`string`参数的测试，例如`OR`逻辑选择。例如，假设我有 3 个测试：

*   `test_should_connect`
*   `test_should_execute`
*   `test_should_return`

假设我只想跑步`test_should_connect`，而且`test_should_return`只有。我在[py.test 文档](http://pytest.org/latest/example/markers.html#using-k-expr-to-select-tests-based-on-their-name)中寻找了答案，为此我应该使用以下命令：

```
py.test -k "connect or return" 
```

但是，这不起作用=/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T13:36:36.880

`py.test -k "connect or return"`应该管用。你在使用 pytest==2.3.4 吗？您能否将“py.test”的输出与测试一起粘贴？

# html - moz-document url-prefix 不适用于超链接

> ID：16067560
> 
> 赞同：0
> 
> 时间：2013-04-17T18:35:44.760
> 
> 标签：html, css, firefox

我有一个名为 action1 的 css，我试图从中删除大纲属性，只是为了 Firefox 浏览器。这是课程

```
a.action1,a.action1:link,a.action1:visited {
    display: block;
    height: 27px;
    width: 200px;
    color: #FFFFFF;
    background-color: #666633;
    font-family: Century Gothic, sans-serif;
    font-size: 13px;
    text-align: center;
    vertical-align:middle;
    padding: 1px 2px;
    border: 1px solid #FFFFFF;
    outline: 1px solid #666633;
    text-decoration: none;
    margin: 1px;
    cursor: pointer;
    -moz-box-shadow: 0px 0px 6px 0px #888;
    -webkit-box-shadow: 0px 0px 6px 0px #888;
    box-shadow: 0px 0px 6px 0px #888;
} 
```

这是我在我的jsp中用来删除大纲属性的代码

```
<style>
@-moz-document url-prefix() {
    a.action1 {
        outline: 0px;
    }
}
</style> 
```

这是行不通的。

```
<a class="action1" onclick="dosomething()" href="gosomewhere">somename</a> 
```

尽管 moz-document 对于输入类型按钮工作得非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:02:32.830

使用 Firebug 检查 css 是否被应用，它的优先级是否比其他的低。

尝试

```
<style>
@-moz-document url-prefix() {
    a.action1 {
        outline: 0 none !important;
    }
}
</style> 
```

# c++ - Hadoop C++ 管道，SocketException：断管

> ID：16067561
> 
> 赞同：1
> 
> 时间：2013-04-17T18:35:46.480
> 
> 标签：c++, apache, hadoop, socketexception, broken-pipe

我在 Ubuntu 12.04 上运行 Hadoop Pipes 作业，但是当减速器启动时出现 Broken Pipe 错误：

2013-04-17 10:40:38,088 INFO org.apache.hadoop.mapred.ReduceTask：将 0 个段，0 个字节从内存合并到 reduce 2013-04-17 10:40:38,088 INFO org.apache.hadoop.mapred。合并：合并 1 个已排序的段 2013-04-17 10:40:38,088 INFO org.apache.hadoop.mapred.Merger：到最后一个合并通道，总大小还剩下 1 个段：1795675 字节 2013-04-17 10:40:38,118 INFO org.apache.hadoop.mapred.pipes.PipesReducer：启动应用程序 2013-04-17 10:40:38,264 INFO org.apache.hadoop.mapred.pipes.PipesReducer：等待完成 2013-04- 17 10:40:38,265 错误 org.apache.hadoop.mapred.pipes.BinaryProtocol：java.net.SocketException：在 java.net.SocketInputStream.read 的 java.net.SocketInputStream.read(SocketInputStream.java:189) 处的连接重置(SocketInputStream.java:121) 在 java.io.BufferedInputStream。fill(BufferedInputStream.java:235) at java.io.BufferedInputStream.read(BufferedInputStream.java:254) at java.io.DataInputStream.readByte(DataInputStream.java:265) at org.apache.hadoop.io.WritableUtils.readVlong (WritableUtils.java:299) 在 org.apache.hadoop.io.WritableUtils.readVInt(WritableUtils.java:320) 在 org.apache.hadoop.mapred.pipes.BinaryProtocol$UplinkReaderThread.run(BinaryProtocol.java:121)121)121)

2013-04-17 10:40:38,265 INFO org.apache.hadoop.mapred.pipes.Application：由于 java.net.SocketException 而中止：java.net 的 java.net.SocketOutputStream.socketWrite0（本机方法）的管道损坏.SocketOutputStream.socketWrite(SocketOutputStream.java:109) at java.net.SocketOutputStream.write(SocketOutputStream.java:153) at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:82

任何帮助表示赞赏，在此先感谢。

# sql - 如何最轻松地从 XLS 导入我的 rails 应用程序数据库？

> ID：16067566
> 
> 赞同：0
> 
> 时间：2013-04-17T18:36:07.700
> 
> 标签：sql, ruby-on-rails, import, xls

我在 Google 电子表格中开始了一个项目。我现在正在学习 Rails。但是我仍然有大约 1000 条记录要导入，以启动我的数据库。

[这个railcast](http://railscasts.com/episodes/396-importing-csv-and-excel)很棒，但我不需要用户做，我只需要做一次。

[我喜欢像这样](https://stackoverflow.com/questions/8342642/how-can-i-import-a-sql-file-into-a-rails-database)为 SQL 文件提供的单行解决方案……除了即使我有一个 SQL 文件（不是导出选项），​​我也不知道在哪里调用那一行。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:24:48.397

尝试这个：

[如何将 CSV 文件数据导入 PostgreSQL 表？](https://stackoverflow.com/questions/2987433/how-to-import-csv-file-data-into-a-postgres-table)

简而言之，您基本上设置了一个 CSV 文件，该文件反映了您要导入的数据库表的结构

如果您必须对数据进行一些操作，您可能会发现编写读取现有 CSV 格式文件并为每行创建数据库记录的内容会更容易。

使用 csv gem 或类似的东西：

[https://github.com/pillowfactory/csv-mapper](https://github.com/pillowfactory/csv-mapper)

# php - Typeahead 和 AJAX 查询不起作用

> ID：16067567
> 
> 赞同：0
> 
> 时间：2013-04-17T18:36:08.710
> 
> 标签：php, jquery, twitter-bootstrap, bootstrap-typeahead

我试图让**TB Typeahead**与 AJAX 结果和 PHP 一起工作，但不能。看到这是我为此编写的代码：

```
$('#search').typeahead({
    limit: 10,
    minLength: 2,
    source: function() {
        return $.ajax({
            url: $('base').attr('href') + 'index.php?route=product/search/AjaxProductSearch',
            type: "GET",
            data: "search=" + $("#search").val(),
            success: function(result) {
                return result;
            }
        });
    }
}); 
```

例如用“co”调用的结果是：

```
["Combo AMD A4 (14,708.06 BsF)","Combo AMD A8 (17,900.05 BsF)","Combo
Core i3 (17,200.01 BsF)","Combo Core i5 (20,399.95 BsF)","Combo Intel
G465 (13,699.99 BsF)","Combo Intel G630 (15,199.97 BsF)"] 
```

但是没有显示选项，为什么？怎么了？还可以添加一些方法来单击选项并转到特定的 URL？

我也检查[了这个帖子](https://stackoverflow.com/questions/15682095/returning-results-for-bootstrap-typeahead)和[这个其他](https://stackoverflow.com/questions/9232748/twitter-bootstrap-typeahead-ajax-example)的，最后[这个另一个](https://stackoverflow.com/questions/11178512/twitter-bootstrap-typeahead-2-0-4-ajax-error)但没有结果

**编辑**感谢@dikirill 的惊人帮助，我让这段代码部分工作：

```
$('#search').typeahead({
    limit: 10,
    minLength: 2,
    source: function(query, process) {
        $.ajax({
            url: $('base').attr('href') + 'index.php?route=product/search/AjaxProductSearch',
            type: "GET",
            data: "search=" + $("#search").val(),
            success: function(result) {
                return process(result.names);
            },
            dataType: 'json'
        });
    },
    updater: function(item) {
        var values = $('#search').data('values');
        alert(values);
        for (var index in values) {
            if (values[index].name == item) {
                location.href = values[index].href;
                break;
            }
        }
        return item;
    }
}); 
```

什么不工作？好吧，当我从预先输入的结果中单击任何元素时，我想要立即重定向到与该元素关联的 URL。看到这个 PHP 函数是返回值的函数：

```
public function AjaxProductSearch() {
    $this->load->model('catalog/product');

    if (isset($this->request->get['search'])) {
        $search = $this->request->get['search'];
    } else {
        $search = '';
    }

    $output = array();
    if (isset($this->request->get['search'])) {
        $data = array(
            'filter_name' => $search
        );

        $product_total = $this->model_catalog_product->getTotalProducts($data);
        $results = $this->model_catalog_product->getProducts($data);

        $output = array();
        foreach ($results as $result) {
            $output['names'][] = $result['name'];
            $output['values'][] = array(
                'name' => $result['name'],
                'href' => $this->url->link('product/product', 'product_id=' . $result['product_id'] . $url)
            );
        }
    }
    echo json_encode($output);
} 
```

然后返回的一个结果是例如这个：

```
{"names":["Combo AMD A4","Combo AMD A8","Combo Core i3","Combo Core i5","Combo Intel G465","Combo Intel G630"],"values":[{"name":"Combo AMD A4","href":"http:\/\/store.devserver\/amd-a4"},{"name":"Combo AMD A8","href":"http:\/\/store.devserver\/amd-a8"},{"name":"Combo Core i3","href":"http:\/\/store.devserver\/intel-corei3"},{"name":"Combo Core i5","href":"http:\/\/store.devserver\/intel-corei5"},{"name":"Combo Intel G465","href":"http:\/\/store.devserver\/intel-g465"},{"name":"Combo Intel G630","href":"http:\/\/store.devserver\/intel-g630"}]} 
```

正如您所看到的，我的**名称**允许我按照必须的方式构建预输入，而其他**值**是我获得与 href 关联的名称的地方。换句话说，如果我选择`Combo AMD A4`然后我应该重定向到`href":"http:\/\/store.devserver\/amd-a4`并且我的代码不起作用，有什么问题？

**编辑**现场演示在[这里](http://dstore.espiralinfinitoca.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:42:34.193

试试我的例子：

```
$('#search').typeahead({
    limit: 10,
    minLength: 2,
    source:function (query, process)
        $.ajax({
            url: $('base').attr('href') + 'index.php?route=product/search/AjaxProductSearch',
            type: "GET",
            data: "search=" + $("#search").val(),
            success: function(result) {
                if (typeof result.values != "undefined") {
                    $('#search').data('values', result.values);
                    return process(result.names);
                }
            },
            dataType: 'json'
        });
    },
    updater: function(item) {
        var values = $('#search').data('values');
        for (var index in values) {
            if (values[index].name == item) {
                location.href = values[index].href;
                break;
            }
        }
       return item;
    }
}); 
```

最后缺少“dataType”。

# git - 可以在 GIT 中创建别名吗？

> ID：16067568
> 
> 赞同：2
> 
> 时间：2013-04-17T18:36:09.417
> 
> 标签：git, alias

在 bash 中，我可以创建一个这样的别名：

```
alias ls="ls -h" 
```

这会改变命令`ls -l`的运行方式，如下所示：

```
drwxr-xr-x    1 joe bob        0 Mar 25 12:06 4.7
drwxr-xr-x    1 joe bob     4096 Mar 25 14:58 Adobe Flash Builder 4.7 Installer
-rw-r--r--    1 joe bob       92 Mar 20 12:41 Automation-Timer 
```

像这样运行：

```
drwxr-xr-x    1 joe bob        0 Mar 25 12:06 4.7
drwxr-xr-x    1 joe bob     4.0k Mar 25 14:58 Adobe Flash Builder 4.7 Installer
-rw-r--r--    1 joe bob       92 Mar 20 12:41 Automation-Timer 
```

请注意第二个示例中如何显示单位。

* * *

是否可以使用 git 命令执行此操作？

每当我以交互方式运行 a`git log`时，我希望它别名为`git log --relative-date`. 这可能吗？

我知道我可以创建一个新的 git 命令来执行此操作，但是我对此并不是特别感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:00:01.683

如果我对您的理解正确，我认为您希望`git log`始终使用 --relative-date 而不必传递标志-并且您不想使用除`git log`自身以外的命令。

答案是肯定的，这是通过配置文件完成的。

```
git config --global log.date 'relative' 
```

从现在开始，您调用`git log`它的任何时间都将使用相对日期。

要查看所有可配置选项的完整列表，请查看[git-config 的手册页](https://www.kernel.org/pub/software/scm/git/docs/git-config.html)

感谢@Saaman 提供链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:51:27.270

Shell 别名不能包含空格（在左侧），并且您不能使用 git 别名，但您可以创建一个 shell 函数。

```
git ()
{
  if [[ $1 = log ]]
  then
    shift
    /bin/git log --relative-date "$@"
  else
    /bin/git "$@"
  fi
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T19:01:04.173

我发现这样做的最佳解决方法是在 .bashrc 中执行类似的操作

```
alias gitl='git log --relative-date' 
```

然后仍然可以像这样运行它：

```
gitl --graph 
```

这将被扩展为这样的东西：

```
git log --relative-date --graph 
```

# javascript - 为打印选项javascript创建个人快捷方式

> ID：16067571
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:36:12.853
> 
> 标签：javascript, html

我正在寻找一个可以帮助我创建个人快捷方式的 java 脚本。

我们都知道 CTRL+P 指的是 PRINT。但我想将其更改为**Ctrl+Shift+W**。我的意思是当用户按下“Ctrl+Shift+W””（打开我的网页）时，打印框应该打开...

示例代码

```
shortcut.add("Ctrl+Shift+W",function() {
    alert("Hi there!");
}); 
```

[在http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)上进行检查以进行实时评估

kindle 请更新这段代码，这样当用户输入 Ctrl+Shift+W 时，打印框应该会打开。

谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:42:55.567

如果您想使用键盘快捷键，请查看鼠标陷阱：http: [//craig.is/killing/mice](http://craig.is/killing/mice)

```
Mousetrap.bind('command+shift+w', function(e) {
   window.print();
}); 
```

# ios - 从谷歌地图iOS中删除标记

> ID：16067575
> 
> 赞同：26
> 
> 时间：2013-04-17T18:36:29.047
> 
> 标签：ios, mapkit, google-maps-markers, google-maps-sdk-ios

我正在使用故事板和谷歌地图构建一个 iOS 应用程序。使用iOS6

我的应用程序具有在 facebook 应用程序中看到的拆分视图导航

在我的左视图中，我在列表中选择一个具有纬度/长线的项目，并通过以下方法在我的地图上显示它

`- (void)viewWillAppear:(BOOL)animated`

我想在添加另一个标记之前删除此方法中的所有标记（因此地图上只有一个标记），有没有办法做到这一点？下面是我向 mapView 添加标记的代码

在此先感谢 - 乔恩

```
- (void)loadView
{
    GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:poi.lat
                                                            longitude:poi.lon
                                                                 zoom:15];
    mapView = [GMSMapView mapWithFrame:CGRectZero camera:camera];

    mapView.myLocationEnabled = YES;
    self.view = mapView;
    mapView.mapType = kGMSTypeHybrid;

    //Allows you to tap a marker and have camera pan to it
    mapView.delegate = self;
}

-(void)viewWillAppear:(BOOL)animated
{
    GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
    options.position = CLLocationCoordinate2DMake(poi.lat, poi.lon);
    options.title =  poi.title;
    options.snippet = poi.description;
    options.icon =  [UIImage imageNamed:@"flag-red.png"];
    [mapView addMarkerWithOptions:options];

    [mapView animateToLocation:options.position];
    [mapView animateToBearing:0];
    [mapView animateToViewingAngle:0];
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2016-03-14T07:20:34.370

删除所有标记

```
mapView.clear() 
```

删除特定标记

```
myMarker.map = nil 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-01-27T18:09:21.463

要删除所有标记，请执行以下操作：

```
[self.mapView clear]; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-17T18:43:03.723

请参考谷歌地图文档：[Google Maps SDK for iOS](https://developers.google.com/maps/documentation/ios/marker)

请参阅标题“删除标记”部分。始终检查此类方法的文档。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-16T06:09:38.697

mapView.clear()

// 它将清除 GMSMapView 中的所有标记。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-16T07:50:10.853

如果您只想删除一组标记中的一个标记，这有点棘手。

```
 let marker = GMSMarker(position: coordinate) //
  marker.icon = UIImage(named: "ic_pin_marker")
  marker.map = mapView

  mapView.selectedMarker = marker //  the specific marker you want to remove or modify by set it as selectedMarker on the map. 
```

那么您要删除或修改

```
mapView.selectedMarker.map = nil //example to remove the marker form the map. 
```

希望对您的情况有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-23T06:28:15.557

**删除单个标记**

yourMarkerName.map = nil

**删除所有标记**

yourMapViewName.clear()

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-14T07:27:27.353

mapView.clear() 不是一个好主意。因为适用于 iOS 的 Places SDK 强制执行每 24 小时 1,000 个请求的默认限制。（如果您的应用程序超出限制，应用程序将开始失败。验证您的身份以每 24 小时获得 150,000 个请求。） whit mapView.clear( ) 请求增加。最好的方法是清除每个标记和折线。

# python - urllib.request：有什么方法可以在不修改请求对象的情况下读取它？

> ID：16067579
> 
> 赞同：6
> 
> 时间：2013-04-17T18:36:44.620
> 
> 标签：python, urllib

给定一个标准`urllib.request`对象，这样检索：

```
req = urllib.urlopen('http://example.com') 
```

如果我通过 读取其内容`req.read()`，则请求对象将为空。

然而，与普通的类文件对象不同，请求对象没有`seek`方法，因为我确信这是极好的原因。

但是，就我而言，我有一个函数，我希望它对请求做出某些确定，然后“安然无恙地”返回该请求，以便可以再次读取它。

我知道一种选择是重新请求它。但我希望能够避免对相同的 url 和内容发出多个 HTTP 请求。

我能想到的唯一其他选择是让函数返回提取的内容和请求对象的元组，并理解调用此函数的任何内容都必须以这种方式获取内容。

那是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:47:37.903

将缓存委托给一个`StringIO`对象（代码未经测试，只是为了给出想法）：

```
import urllib
from io import StringIO

class CachedRequest(object):
    def __init__(self, url):
        self._request = urllib.urlopen(url)
        self._content = None

    def __getattr__(self, attr):
        # if attr is not defined in CachedRequest, then get it from
        # the request object.
        return getattr(self._request, attr)

    def read(self):
        if self._content is None:
            content = self._request.read()
            self._content = StringIO()
            self._content.write(content)
            self._content.seek(0)
            return content
        else:
            return self._content.read()

    def seek(self, i):
        self._content.seek(i) 
```

如果代码实际上需要一个真实的`Request`对象（即`isinstance`检查类型的调用），那么子类`Request`，你甚至不必实现`__getattr__`.

请注意，函数可能会检查确切的类（在这种情况下，您不能什么都不做），或者，如果它是用 C 编写的，则使用 C/API 调用来调用方法（在这种情况下，被覆盖的方法不会是称为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:45:24.300

`urllib2.Request`创建一个使用 a`cStringIO.StringIO`来保存读取的内容的子类。然后你可以实施`seek`等等。实际上你可以只使用一个字符串，但这会更多的工作。

# javascript - 互动地图建议

> ID：16067580
> 
> 赞同：-2
> 
> 时间：2013-04-17T18:36:47.313
> 
> 标签：javascript, html, css

任何人都可以提出技术来制作像这个网站这样的交互式地图效果吗？

[苏比托](http://www.subito.it/)

除了 flash 之外的任何建议，因为这个网站不使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:53:12.130

如果您使用浏览器检查页面，您会看到他们使用[图像地图](http://en.wikipedia.org/wiki/Image_map)，带有地图和区域标签来绘制地图。

另一种方法是[使用 svg](http://www.google.com/search?num=20&hl=en&q=svg%20map)（通常与 vml 一起使用以实现跨浏览器兼容性）。此类解决方案的示例是[Google geocharts](https://developers.google.com/chart/interactive/docs/gallery/geochart?hl=pt-BR)和[dojo](http://demos.dojotoolkit.org/demos/mobileGeoCharting/demo.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:53:43.320

看看[d3.js](http://d3js.org)，它是一个很好的可视化框架。

[这](http://bl.ocks.org/mbostock/2206590)是一个如何将其用于地图的示例。

# wpf - 处理 WPF 按钮单击并启用禁用

> ID：16067581
> 
> 赞同：0
> 
> 时间：2013-04-17T18:36:48.040
> 
> 标签：wpf, mvvm

我有一个带有一些控件的 UI。

1.  最初加载表单时，搜索按钮将被禁用，一旦给出所有搜索条件，搜索按钮将自动启用。
2.  单击搜索按钮时，我想使用 MVVM 模式调用该方法并将结果绑定到网格中

XAML：

```
<Button Name="btnGetDetails" Content="Get Details" Grid.Row="2" Command="{Binding SearchCommand}"/> 
```

模型、视图模型和 XAML 中需要哪些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:11:21.330

所以这里有一些 MVVM 基础知识。你在正确的轨道上，只是错过了一步。您的视图模型中的 Command 实现应该（可能）接受两个输入：一个表示执行代码的 Action，以及一个返回 true/false 的谓词，判断您是否可以执行 Action 块中的代码。因此，在您的视图模型中，按照以下方式定义您的命令（注意：这是我的一个项目的示例）：

```
this.executeCommand = new RelayCommand(this.OnExecuteClicked, this.OnCanExecuteChanged); 
```

OnCanExecuteChanged 方法将根据您设置的任何条件返回一个布尔值。因此，如果您希望在正确设置属性 A 和属性 B 时启用提交按钮，则返回 true，否则返回 false。您的命令实现的内部工作将负责其余的工作。搜索 RelayCommand 实现（如果您还没有）或 DelegateCommand 以获取更多示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:48:24.113

只有在单击按钮时才会执行命令。如果您需要对按钮执行某些操作，那么您应该对包含该按钮的窗口执行此操作（假设您的按钮位于窗口中）。现在，如果您想坚持使用 MVVM 模式，那么您不应该使用 Window.OnLoaded，因为这会将代码放在您的代码后面。一种选择是使用您已单独下载的 System.Windows.Interactivity。这是它的样子：

```
<Window x:Class="..."
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="clr
        -namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding ...}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
</Window> 
```

至于你的 Model、View 和 ViewModel 应该是什么，我觉得你应该看看网上的一些教程。关于如何实现 MVVM 模式有一些很好的解释。我自己发现这个 youtube 视频信息量很大：

[http://www.youtube.com/watch?v=EpGvqVtSYjs](http://www.youtube.com/watch?v=EpGvqVtSYjs)

# java - Javascript / jQuery 到 Servlet 通信

> ID：16067592
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:37:33.253
> 
> 标签：java, jquery, ajax, jakarta-ee

我早些时候正在寻找这个，并且对我得到的答案有点困惑，所以我想为此编写一个完整的代码。这是为了我未来的工作，我希望有人能从中受益。

请看下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:37:58.943

这可以通过js和jquery来解决。但由于 jquery 更简单更短，所以我只是为此编写代码。在这种情况下，我将在 html / jsp 页面中更改选择时进行 ajax 调用

Jsp页面看起来像这样

```
<select class="target1">
   <option >Select type</option>
   <option >computer</option>
   <option >camera</option>
   <option >sound System</option>
   <option >battery</option>
</select>

<select class="target2">
    <option >Select type</option>
</select> 
```

在从 target1 中选择时，我想在 target2 选择中显示另一个列表。为此，jquery 函数如下所示

```
$('.target1').change(function() {
    $.ajax({
        $('.target2').empty();
        url: 'http://localhost:8080/YourAppName/ServletName',
        data: {selectedValue: $(this).val()},
        success: function(response) {
            $('.target2').append(response);
        }
    });
}); 
```

在这里，我指向 target1 并在内部进行 ajax 调用。最初我将 target2 选择设为空。然后通过 调用servlet`url`并使用 传递值`data`。成功时，我只是将结果附加到 target2 选择中

在 ServletName（servlet）中，我编写了以下代码：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        String selectedItem = request.getParameter("selectedValue");

        productList = connDB.getProduct(query);

        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            if(selectedItem == (Your Condition)){
                   out.println("<option >1</option>");
                   out.println("<option >2</option>");
                   out.println("<option >3</option>");
                   out.println("<option >4</option>");
            }else{}

        } finally {            
            out.close();
        }
    } 
```

执行此代码后，您应该进入选择`target2`

```
1
2
3
4 
```

正如您现在可以理解的那样，您可以随心所欲地对其进行自定义。

# java - 2个表和2个值（变量）之间的sql语句Java

> ID：16067594
> 
> 赞同：-3
> 
> 时间：2013-04-17T18:37:43.503
> 
> 标签：java, mysql, sql, select, jdbc

我正在尝试执行以下操作，但它不接受它。

```
String sql_eco = "select * from orders where EmployeeID=" +e_ID + " and CustomerID ="' + cu_ID + "'"; 
```

从两个表和两个值（变量）中选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:40:33.047

尝试，假设`CustomerID`和`EmployeeID`都是`Integer`列类型

```
String sql_eco = "select * from orders where EmployeeID=" +e_ID + " and CustomerID =" + cu_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:40:38.463

尝试这个：

```
String sql_eco = "select * +
                  from orders +
                  where EmployeeID=" +e_ID + " and CustomerID ='" + cu_ID + "'";   
                                                               ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:41:29.087

用这个。您已经放错了“ for CustomerId

```
String sql_eco = "select * from orders where EmployeeID=" +e_ID + " and CustomerID ='" + cu_ID + "'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:00:50.600

values variable u wanna say something like this?

```
String sql_eco = "select * +
                  from orders +
                  where 1=1 ";
if(e_ID  != null) {
 sql_eco += " AND EmployeeID=" +e_ID ;
}
if(cu_ID  != null){
 sql_eco  += " and CustomerID ='" + cu_ID + "'";  
} 
```

to improve this code u can use `stringbuilder/stringbuffer`

# jsf - 将请求从 JSF 托管 bean 转发到 Struts 2 操作不起作用

> ID：16067597
> 
> 赞同：1
> 
> 时间：2013-04-17T18:37:59.737
> 
> 标签：jsf, servlets, struts2, forward

在 JSF 托管 bean 中，我从[过去的问题](https://stackoverflow.com/questions/1922154/jsf-how-to-forward-a-request-to-another-page-in-action/1922184#1922184)中获取了以下代码：

```
String uri = "/myAction";
FacesContext.getCurrentInstance().getExternalContext().dispatch(uri); 
```

`myAction`是在 my 中定义的 Struts 动作的名称`struts.xml`。

但是，当我访问 JSF bean 时，我没有被转发到`/myAction`. 相反，我收到 404 http 错误：`The requested resource (/MyApp/myAction) is not available`.

为什么它不起作用？

当我尝试`/myAction`直接从浏览器访问时，`http://localhost:8080/MyApp/myAction`一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:59:52.720

设置 Struts 2 过滤器`web.xml`以接受转发（和直接请求（或重定向））：

在你的`web.xml`，改变：

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

至：

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>

    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <!-- uncomment if you plan to include struts action output -->
    <!--
    <dispatcher>INCLUDE</dispatcher>
    -->
</filter-mapping> 
```

信用：

[http://www.coderanch.com/t/59584/Struts/request-dispatcher-struts-action](http://www.coderanch.com/t/59584/Struts/request-dispatcher-struts-action)

[http://docs.oracle.com/cd/B32110_01/web.1013/b28959/filters.htm#BCFIEDGB](http://docs.oracle.com/cd/B32110_01/web.1013/b28959/filters.htm#BCFIEDGB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T20:20:18.303

线索在该`dispatch`方法的 javadoc 中：

“参数：path -指定资源的**上下文相对**路径，必须以斜杠（“/”）字符开头”

即，它发送到相对于您的应用程序上下文的 url，而不是您的网络服务器根文件夹

您需要的是`redirect`重定向到绝对 url 的方法。

# android - 比较移动显示器上的视口和屏幕尺寸

> ID：16067600
> 
> 赞同：1
> 
> 时间：2013-04-17T18:38:15.787
> 
> 标签：android, css, mobile, viewport

据我了解，有两种可靠的方法可以确定移动显示器上的视口宽度和屏幕宽度。视口宽度是虚拟像素，屏幕宽度是物理像素。这就是它应该的样子。但对我来说都是一样的。我已经使用 Android 4.0.4 的股票浏览器和当前版本的 Android 版 Chrome 测试了以下页面（它不会告诉我它的编号）。

```
<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div id="info"></div>
<script type="text/javascript">
setTimeout(function () {
    var virtualWidth = document.documentElement.clientWidth;
    var physicalWidth = screen.availWidth;

    document.getElementById("info").innerHTML =
        'Virtual width: ' + virtualWidth + '<br>' +
        'Physical width: ' + physicalWidth + '<br>' +
        'Ratio: ' + (physicalWidth / virtualWidth);
}, 500);
</script>
</body>
</html> 
```

结果如下：

股票浏览器为这两个值报告 540，Chrome 为这两个值报告 360。比率始终为 1。我的手机是摩托罗拉 RAZR i，它的物理宽度应该在 540 左右（纵向）和 1.5 的比率。此页面或方法或浏览器有什么问题？如果工具完全不可靠，那么做移动网页设计真的很难。（而且我还没有谈到 Chrome 中的随机文本大小......）

更新：这是一个[实时 URL](http://unclassified.de/tmp/ratio.html)，供您进行自己的测试。获取它的[二维码](http://chart.apis.google.com/chart?cht=qr&chs=480x480&chl=http://unclassified.de/tmp/ratio.html)。

# javascript - 使用 Django 将对象从模板传递到视图

> ID：16067603
> 
> 赞同：1
> 
> 时间：2013-04-17T18:38:25.147
> 
> 标签：javascript, python, django, django-views, javascript-objects

我正在尝试找出以下应用程序的架构：

1.  向用户呈现一张表格。
2.  每个表格单元格都有几个用户将填写的字段。
3.  有一个通用的提交按钮：当点击所有输入数据（以及基于输入值的每个单元格的一些计算数据）时，应该传递给 Django 视图。

以下是以下问题：

1.  我是否可以将数据结构组织为一组对象，使每个对象对应一个表格单元格，而最终将传递给 Django 视图的 Master 对象将是一组这些对象？

2.  如果是这样，如何将 Master 对象从模板传递给使用 Django 进行查看？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:32:53.370

**1\. 是否可以在 HTML/JS 中创建一个对象，其成员将包含来自字段的数据？**

您无法在 html/JS 中创建对象，但您可以构建代码以在 Django 中显示或请求来自对象的数据。

比如说，你有一个模型 Foo

```
class Foo(models.Model):
    GENDER = (
      ('F', 'Female'),
      ('M', 'Male'),
    )
    name = models.CharField(max_length=150)
    gender = models.CharField(max_length=1, choices=GENDER) 
```

你的模板看起来像这样

```
<body>
<form action="?" method="post">
<table>
    <tr>
        <td>Name</td>
        <td><input type="text" name="name" maxlength="150" /></td>
    </tr>
    <tr>
        <td>Gender</td>
        <td>
            <select name="gender">
                <option value="F">Female</option>
                <option value="M">Male</option>
            </select>
        </td>
    </tr>
</table>
<input type="submit">
</form>
</body> 
```

如果您填写字段并单击提交，那么您可以处理视图中的数据。

```
def add_foo(request):
    if request.method == "POST": # Check if the form is submitted
        foo = Foo() # instantiate a new object Foo, don't forget you need to import it first
        foo.name = request.POST['name']
        foo.gender = request.POST['gender']
        foo.save() # You need to save the object, for it to be stored in the database
        #Now you can redirect to another page
        return HttpResponseRedirect('/success/')
    else: #The form wasn't submitted, show the template above
        return render(request, 'path/to/template.html') 
```

我想，最后一点也回答了问题 2。希望这可以帮助。

# jquery - 没有 ajax 在 Rails 中使用简单的表单客户端验证

> ID：16067605
> 
> 赞同：0
> 
> 时间：2013-04-17T18:38:26.160
> 
> 标签：jquery, ajax, ruby-on-rails-3, simple-form, client-side-validation

我遇到了一个问题，即表单不会实时进行验证，它们仅在用户点击提交后才会显示。我将`simple_form`gem 与`client_side_validations`and一起使用`client_side_validations-simple_form`。任何帮助是极大的赞赏！

宝石文件

```
gem 'simple_form', '~>2.0.4'
gem 'client_side_validations'
gem 'client_side_validations-simple_form', '~>2.0.1' 
```

表格介绍

`<%= simple_form_for @position, validate: true do |f| %>`

位置.rb

`validates :cost_basis, presence: true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:55:51.750

我设法让它与[这个脚本](https://gist.github.com/ddarren/2705324#file_client_side_validations_twitter_boostrap_simple_form.js)一起工作。

# html - ajaxSubmit 导致不正确的字符解码

> ID：16067608
> 
> 赞同：1
> 
> 时间：2013-04-17T18:38:43.823
> 
> 标签：html, unicode, asp-classic, character-encoding, jquery-forms-plugin

考虑以下简单的 Asp 页面 - 一个带有一个文本输入和一个提交按钮的表单：

```
<%
    response.write(Request.Form("test") & "<br/>")
%>

<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="jquery.form.js"></script>

<form action="test.asp" method="post" id="form" name="form" accept-charset="ISO-8859-1">
    <input type="text" name="test" />
    <input type="submit" id="sub" />
</form>

<script type="text/javascript" />
    $('#form').submit(function () {
        $('#form').ajaxSubmit({
            success : function(responseText){

            },
            error : function(){
            }
        });

        return false;
    }); 
</script> 
```

使用值`®`：

如果我提交*没有*ajax 的表单（不使用底部脚本块），则响应为`®`. 数据被编码为`test=%AE`.

*如果我使用*ajax提交表单（使用底部脚本块），则响应为`Â®`. 数据被编码为`test=%C2%AE`.

由于`%C2%AE`是 的有效编码`®`，这是一个 vbscript 问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:50:32.107

> 如果我提交没有 ajax 的表单（不使用底部脚本块），则响应为 ®。数据被编码为 test=%AE。

这是因为`accept-charset="ISO-8859-1"`. `ajaxSubmit`另一方面，始终使用 UTF-8，忽略任何`accept-charset`. （这可能是因为 AJAX 的限制意味着在某些情况下任何其他编码都会中断）。

我建议删除该`accept-charset`属性（无论如何它在 IE 中都不能正常工作）并将页面[明确地](http://msdn.microsoft.com/en-us/library/39d1w2xf%28v=vs.100%29.aspx)作为 UTF-8 提供。这应该可以`Â®`解决问题。

# opencv - 为代码块配置 OpenCV 2.4.4 - 找不到 libopencv_core244.dll

> ID：16067609
> 
> 赞同：0
> 
> 时间：2013-04-17T18:38:46.597
> 
> 标签：opencv, codeblocks, configure

我已经尝试为 CodeBlocks 配置 OpenCV 2.4.4 已经有一段时间了，但即使我遵循在线指南不知何故我也做不到，我慢慢变得绝望。我尝试按照 bsdnoobz 先生在[本](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)主题中所说的进行操作，但仍然无法正常工作。这是我到目前为止所做的：

*   我已经成功安装了 OpenCV 2.4.4 和 MinGW：

    > C:\Users\Max\gcc
    > gcc: 致命错误：没有输入文件
    > 编译终止

*   我在 Path 中添加了这个：

    > D:\OpenCV\build\x86\mingw\bin;C:\MinGW\bin; D:\OpenCV\build\x86\vc10\bin

*   在代码块中，我设置了这样的所有内容：

但是我收到以下错误：

> 无法启动程序，因为找不到 libopencv_core244.dll

即使我尝试了很多，我也无法修复它。希望有人能帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:59:56.560

您需要将 opencv dll 文件复制并粘贴到 windows/system32 文件夹

# php - 引导按钮不打开模式

> ID：16067621
> 
> 赞同：0
> 
> 时间：2013-04-17T18:39:13.430
> 
> 标签：php, javascript, button, twitter-bootstrap

我有一个按钮：

```
<a data-target='#login' role='button' class='btn' data-toggle='modal'>Login</a> 
```

那是早些时候工作的，但现在它不会打开我的模式。
这是我的模态：

```
<!-- Login Modal -->
<div id="login" class="modal hide fade" tabindex="-1" aria-labelledby="loginform" aria-hidden="true">

<!-- Header -->
<div class="modal-header">

  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
  <h3>Welcome!</h3>

</div><!--/header -->

<!-- Body -->
<div class="modal-body">

  <form action="loginmanager.php" class="form-signin" method="post">

    <input name="username" type="text" class="input-block-level" placeholder="Username">
    <input name="password" type="password" class="input-block-level" placeholder="Password">
    <label class="checkbox">
      <input type="checkbox" value="remember-me">"Remember me"</label>
    </label>
    <button class="btn btn-large btn-primary" type="submit">Sign in</button>

   </form>

</div><!--/.modal-body -->

<!-- Footer -->
<div class="modal-footer">

  <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>

</div><!--/.modal-footer --> 
```

我到底做错了什么？看了好几遍都找不到原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:49:58.290

可能您缺少包含“bootstrap.js”（或者，具体而言，“bootstrap-modal.js”）

尝试在此处制作您的“包”（使用 Modals）并在您的页面中包含 javascript：http: [//twitter.github.io/bootstrap/customize.html](http://twitter.github.io/bootstrap/customize.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T09:37:39.093

只需从此行中删除“隐藏”类

```
<div id="login" class="modal hide fade" tabindex="-1" aria-labelledby="loginform" aria-hidden="true"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T00:55:19.183

找到了答案。当我使用查找和替换时，我损坏了我的 .js 和 .css 文件。哎呀！

# c++ - C++ 游戏音效

> ID：16067624
> 
> 赞同：0
> 
> 时间：2013-04-17T18:39:26.013
> 
> 标签：c++, wav

`wav`是否可以在不使用第三方库的情况下加载文件并在用 C++ 编写的游戏中进行游戏？

我的意思是，是否有一个小功能可以处理这个问题？

一些第三方库似乎使用大量代码来完成它。我在加载图像时发现了同样的事情。一些库有时可以在一个小函数中完成相同数量的工作时使用如此多的代码......我只是想知道音频文件是否相同？

如果没有，你们知道的最好/最基本的音频库是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:48:59.357

C++ 本身没有多媒体的概念。除非您编写自己的多媒体代码，否则您必须使用库或特定于平台的 API 来处理多媒体内容和输出。例如，在 Windows 上，最简单的选项是 Win32 API`PlaySound()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:01:54.720

Let me answer your questions one at a time.

**Is it possible to LOAD a wav file without using 3rd party lib.?**

Yes, certainly it is. A quick search brings up: [http://home.foni.net/~wkurz/dynaplot/applicationnotes/loadwav.htm](http://home.foni.net/~wkurz/dynaplot/applicationnotes/loadwav.htm)

**Is it possible to PLAY a wav file without using 3rd party lib.?**

Again, yes it is possible. Provided you are willing to write drivers for all possible combinations of hardware and OSs you are targetting.

Allow me to suggest a solution: use some opensource lib. There are many excellent ones out there. I use following for my (non-gaming apps)

*   Loading wav: [libsndfile](http://www.mega-nerd.com/libsndfile/)
*   Playing wav: [portaudio](http://www.portaudio.com/)

hope that helps

# django - git push django app 到 linux 虚拟服务器

> ID：16067625
> 
> 赞同：0
> 
> 时间：2013-04-17T18:39:31.440
> 
> 标签：django, git

过去几天我一直在用 django 编写小应用程序。我想将它上传到我的服务器上并使其与域名一起使用。我有debian vps。我想使用 git 来管理我的提交。

我在我的本地主机项目文件夹中运行了“git init”。然后“混帐添加。” 和“git commit -m”初始提交。“”。

在我的 vps 上，我为我的项目创建了名为 digrin 和 digrin.git 的文件夹。在 digrin.git 文件夹中，我运行了“git init”。（我读过不要使用 --bare 选项，不太清楚为什么）

在我的本地主机上，我运行了“git remote add prod username@example.com:/home/username/django/digrin/digrin.git”。然后我打电话给“git push prod”，一切都被推送到我的服务器上。但是除了 digrin.git 文件夹之外，我的 vps 服务器中没有文件。

```
~/django/digrin/digrin.git$ tree . -a
.
├── branches
├── config
├── description
├── HEAD
├── hooks
│   ├── applypatch-msg.sample
│   ├── commit-msg.sample
│   ├── post-commit.sample
│   ├── post-receive.sample
│   ├── post-update.sample
│   ├── pre-applypatch.sample
│   ├── pre-commit.sample
│   ├── prepare-commit-msg.sample
│   ├── pre-rebase.sample
│   └── update.sample
├── info
│   └── exclude
├── objects
│   ├── 02
│   │   └── f2cbb7b882ed57a4fff43bdf532de94bad41d5
│   ├── 04
│   │   └── 0fa757722bceb0dc75c7b4821d00cc43606563
│   ├── 07
│   │   └── 995fe83329848b4c566ddcc86bd07dc32d82a5
│   ├── 08
│   │   └── 36976b8eb689c162cb119e87f9d88b6e8e29f8
│   ├── 0b
│   │   └── c47f33ef3284d5e352f39d2390e60ab8eb0197
│   ├── 0e
│   │   └── 214630c80b0ac44bab534eb5777ebc8e5608c2
│   ├── 0f
│   │   └── 39f2b804cf3aca9cec86c70385f94a3fbe45d3
│   ├── 16
│   │   └── 186a0a73592d9955ce1eaf6e01abcef4b91a0d
│   ├── 19
│   │   └── 05dafee5038810e3a4b76359657c84ab950482
│   ├── 1f
│   │   └── f6ccd34c2559a5914ef2bf8b94b0842e77efb8
│   ├── 31
│   │   └── dcc5c921b454750ed39146a69d5f20f124ae76
│   ├── 3c
│   │   └── a63a79be8303c5634c689109ef81be0d2a4e89
│   ├── 3f
│   │   └── 7ddb26699288f66324a42aec222dec3a1d1da5
│   ├── 41
│   │   └── ab8a60fff54bf8fc4b7e449e1292742b48153a
│   ├── 46
│   │   └── 9efc28186bb775016c4509371582e1a045e232
│   ├── 50
│   │   ├── 1deb776c16733b19f3509d86e125df78958261
│   │   └── 8c4b59b95c58159f24d73d75973d323b852e77
│   ├── 62
│   │   └── 9cb8e0bbc80fa914bbaa6bb4e7c482ee61823e
│   ├── 64
│   │   └── 89697c4e181c7c04f4c3709acb86f30ab2fdc9
│   ├── 68
│   │   └── 0e9a1c95cb2badc3b4e931809bf9890e3ce069
│   ├── 6d
│   │   ├── 0122a95fee544f0517e574db27e1157e55b3eb
│   │   └── bbc67e671100bea49b0311923635751300e770
│   ├── 6f
│   │   └── f65f4949e3faf53fc7fe676b119536ed3d642e
│   ├── 73
│   │   └── 8c6bbc0148a688c9f3d095c8829c83b422cc93
│   ├── 74
│   │   └── 046c5b6fb91da7ec24cecc18990b515fdfbde6
│   ├── 75
│   │   └── 02f9639bf9922da1f8adda0f84f5a65186b66e
│   ├── 80
│   │   └── a116dc6f0f01a9c4447e97b68530416a5a0a7a
│   ├── 8b
│   │   └── cf2d891595ddda0646c3afb522cf810c8034e1
│   ├── 8d
│   │   ├── 96d731137d9887d3712f0c9095beb6a597c4e9
│   │   └── d7ffe74193b9ca8005809f1d2752da93961d75
│   ├── 92
│   │   └── 2003b8433bcad6ce9778a37628d738faa26389
│   ├── 93
│   │   └── c2369e2c7ba17a20be2dac781a431b527113c8
│   ├── 99
│   │   └── cf77062c3eaa3db593faa57b4348cabf6c85b6
│   ├── 9c
│   │   └── 0c4b2f4225ea34cb53773725c992a8673d9d15
│   ├── 9d
│   │   └── 2e7e951f8bed7ec2184cbabd674b068cd5fa5c
│   ├── a4
│   │   └── c19994b6c951cc9e9d05c979c6c6d64313c702
│   ├── a5
│   │   └── a06bffb5d49f398b4ba0cadff6e2d5c603f832
│   ├── a9
│   │   └── 33e8f9c9ffde2a2f4605d55b4cfebeff5bdba1
│   ├── b0
│   │   ├── 2a8c17efa6ec97285dd88cc2287560a40c8a0e
│   │   └── 7740899baf224f24f108d9de205576427152c0
│   ├── b4
│   │   └── 33bd4b78f2b6fe832efbcb6469357cfa175aa9
│   ├── c1
│   │   └── 3017c7b797da485f6dd3237516e430445328d8
│   ├── c2
│   │   └── 8299cf77c851adb152aabe692d8ac427e9ad07
│   ├── c3
│   │   └── f1e49dd8bc831a28d8d8251cfcea5a703fb891
│   ├── c4
│   │   └── 7823b62c6c311e0ffd895261323211fc2b7a7b
│   ├── c7
│   │   └── de1c83e2d80fd128bfd8beca37ee3af5f637be
│   ├── c8
│   │   └── eb157cdf6c4f57946bc3b81a93a305d8597e7e
│   ├── c9
│   │   └── 910ece37dc43b86cec9b992ba0a5d814f034e1
│   ├── cb
│   │   ├── 14b0a3af6697fae2b69296ca13f2bd7ed1f508
│   │   ├── 5f1cba777ccb1531975d380655988d2a4cc5cb
│   │   └── b2b3d4d31a25c5a099980f43e58f0161393bf6
│   ├── cc
│   │   └── 8299d9f8fe971d739133e01f9081656f16ab5b
│   ├── d6
│   │   └── 46ec5a4f477815535917860dd98e8d229b848a
│   ├── d7
│   │   └── 2d4051bb91278b325d6a6f76ac11c1eb02638d
│   ├── de
│   │   └── f6a6a18457989c7d18825c7c1bbfeefc8b261d
│   ├── e2
│   │   └── 06d70d8595e2a50675ba11de48efcfa012497d
│   ├── e6
│   │   └── 9de29bb2d1d6434b8b29ae775ad8c2e48c5391
│   ├── f2
│   │   └── 6f127af6d72d0da4c27150fbba0161aa06dc59
│   ├── f5
│   │   └── aaab0b2db340c254e0067f393a5d7effc025ba
│   ├── fb
│   │   └── 49096539a37b557f05567657ef8929f4038b6a
│   ├── fe
│   │   └── 03268ba74295c4d3681752dd679d292e16598d
│   ├── ff
│   │   └── e1c1262efed9e5c59f8af54c778eb4f5008ca1
│   ├── info
│   └── pack
└── refs
    ├── heads
    │   └── master
    └── tags

65 directories, 77 files 
```

我如何使它工作？如何将我的 localhost 文件上传到服务器，然后将 /var/www/digrin.tld 重定向到该 django 主文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:10:22.730

你在这里有两个很大的误解。第一个是，正如 Ngenator 在评论中所说，git 并没有像你想象的那样工作。推送到 git 远程只是推送原始 git 数据：它不会使服务器上的实际文件可用。您需要在该机器的其他位置创建第二个克隆，将现有远程添加到其中，并在每次从开发机器推送更新时拉取。如果您愿意，可以使用 git 挂钩自动执行该拉动。

第二个误解是部署 Django 站点也不会像您认为的那样工作。你不能仅仅“重定向/var/www/whatever”到一个文件夹并期望Django 为该站点提供服务。您需要实际设置适当的服务器，无论是 Apache 还是其他服务器，然后对其进行配置（可能通过 WSGI）来为您的站点提供服务。Django 文档详细解释了这一点。

# c# - 如何从网页中选择特定文本？

> ID：16067626
> 
> 赞同：2
> 
> 时间：2013-04-17T18:39:33.087
> 
> 标签：c#, html

我正在尝试选择按下网页的搜索按钮后给出的一些结果；这些结果在`<span>`没有 id 也没有类的标签内。如何选择这个特定的跨度？

```
Registration
ICANN Registrar:
MARKMONITOR INC.
Created:
1997-09-15
Expires:
2020-09-14
Updated:
2011-07-20 
```

这是我通过它创建的示例代码，我可以从网页中搜索文本，但我想选择显示文本的特定跨度`"Creation Date of a website"`

```
string downloadedString;
System.Net.WebClient client;

client = new System.Net.WebClient();
string text = "fun";
downloadedString = client.DownloadString("http://www.gmail.com");
if(downloadedString.Contains(text))
{
    MessageBox.Show(text);
} 
```

# c# - 扩展方法试图调用受保护的方法/动态参数的错误展示

> ID：16067642
> 
> 赞同：5
> 
> 时间：2013-04-17T18:40:13.340
> 
> 标签：c#, extension-methods

我有一个名为`NIFERepository`. 它包含一个`SaveObject`方法，该方法不返回任何内容并对数据库执行操作。

```
public class NIFERepository<E>
{
    protected void SaveObject(object saveObject)
    {
        if (saveObject is E)
            this.RepositorySession.Merge(saveObject);
    }
} 
```

1\. 我希望创建一个调用此`SaveObject()`方法的公共扩展方法，如下所示：

```
 public static class NIFERepositoryExtensions
    {
        public static T Save<T, E>(this T self, E saveObject) where T : NIFERepository<E>
        {
            self.SaveObject(saveObject);
            return self;
        }
    } 
```

但是受保护的范围不允许我的扩展方法识别它。

有没有办法让这种形式的方法起作用？

2\. 我用 2 种类型创建了我的扩展方法：`T`和`E`. `T`是调用它的实例，并且`E`是 my 中定义的类型`ProductRepository<Product>`，例如。当我调用此方法时，未显示定义的类型。 ![在此处输入图像描述](https://i.stack.imgur.com/okzD2.png)

我有办法让它工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T18:44:06.120

1.  您不能使用扩展方法来违反封装。
    如果类不公开方法，则不能调用它（反射除外）。
    该方法（希望）`protected`是有原因的；你可能做错了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:44:38.613

受保护的方法在继承的类中可见。所以继承并创建一个调用基本受保护方法的公共方法，如

```
public class BaseClass
{
  protected void SomeMethod()
   {

   }
}

public class ChildClass:BaseClass
{
  public void SomeMethodPublic()
        {
          base.SomeMethod()
        }
} 
```

# quickbooks - QBO 的 VendorCredit

> ID：16067643
> 
> 赞同：0
> 
> 时间：2013-04-17T18:40:29.273
> 
> 标签：quickbooks, intuit-partner-platform, quickbooks-online

使用 QuickBooks Online 的 VendorCredit 的 IPP API 是什么？

根据 IDS v2 文档，QBD 可以使用 VendorCredit，但 QBO 似乎省略了 VendorCredit。

IPP QuickBooks v3 幻灯片根本没有提到 VendorCredit（参见幻灯片 15 [http://docs.developer.intuit.com/@api/deki/files/810/QuickBooksAPIv3Webinar-Feb2013.pdf](http://docs.developer.intuit.com/@api/deki/files/810/QuickBooksAPIv3Webinar-Feb2013.pdf)）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:28:56.837

VendorCredit 不能通过 v2 API 用于 QuickBooks Online。v3 网络研讨会期间提出了 v3 规范中缺少 VendorCredit 的问题，IPP 团队注意到了这一点，但尚未对 VendorCredit 进行更新。

# regex - 是否有适用于多种编程语言的正则表达式引擎？

> ID：16067646
> 
> 赞同：2
> 
> 时间：2013-04-17T18:40:33.290
> 
> 标签：regex

由于每种编程语言似乎对正则表达式使用不同的语法，因此我正在寻找一种与所有编程语言兼容的正则表达式引擎（而不仅仅是其中的一种或两种）。是否有适用于多种编程语言的正则表达式引擎？如果没有，创建这样的正则表达式引擎是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:46:07.957

你的印象是错误的。“[与 Perl 兼容的正则表达式](http://www.pcre.org/)”得到广泛支持，主要是通过在后台使用相同的引擎。在 PHP 中，您可以通过`pcre_`函数族获得它们。在 python 中，它们是`re`支持的。`RLIKE`除了传统的 SQL 语法之外，甚至 Mysql 也支持这种正则表达式样式（带）。不支持完整 perl 语法的语言通常支持兼容的子集。

我无法提供支持它的语言的完整列表；我不确定这个问题是否能得到回答——如果游戏环境等在他们的命令语言中嵌入正则表达式，你会计算它们吗？但这有关系吗？寻找*你*感兴趣的语言的正则表达式支持，如果你没有找到完整的 PCRE 支持，你很可能会找到一个很好的子集。

主要不兼容的正则表达式系列是 SQL 的`LIKE`语法、shell 样式的“glob”（比完整的正则表达式更简单）和各种 unix 工具，由于历史原因，这些工具坚持使用正则表达式语法的变体：（`grep`所谓的“基本”正则表达式由默认），`sed`等等（请记住，不仅早于 perl，`grep`而且`sed`早于兼容实现的文化）。

# wcf - 使用 IParameterInspector 阻止未经授权的用户在 WCF 中没有正确访问权限的情况下读取数据

> ID：16067647
> 
> 赞同：1
> 
> 时间：2013-04-17T18:40:34.787
> 
> 标签：wcf

我有一个 WCF 服务和几个操作，我返回基本 poco 项目的数组。

为了减轻我错误地返回客户端无权访问的项目的情况，我计划使用 IParameterInspector，将其附加到 IOperationBehavior 属性，然后在 AfterCall 中验证读取访问权限。如果客户端没有读取权限，那么我会抛出 WebFaultException。

我在我的项目存储库（服务类）上使用自定义身份验证，当我输入 IParameterInspector.AfterCall 时 ServiceSecurityContext 为空，因此我无法使用它来检查客户端是否经过身份验证以读取项目。

我的问题是如何在 IParameterInspector.AfterCall 方法中访问服务实例 (PerCall)？

我还在使用 IOperationInvoker，我在 Invoke 方法中进行真正的身份验证（检查什么用户或是否匿名）。

我想知道 AfterCall 中的“输出”和“返回值”有什么区别？

```
public class ParameterInspector : IParameterInspector
{
    public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState)
    {
        var items = returnValue as Item[];
        if (items == null) return;
        foreach (var item in items)
        {
            User user = ?
            // Throw if no access
        }
    }

    public object BeforeCall(string operationName, object[] inputs)
    {
        return inputs;
    }
} 
```

* * *

```
public class AuthenticationOperationInvoker : IOperationInvoker
{
    public object Invoke(object instance, object[] inputs, out object[] outputs)
    {
        var repo = instance as RepositoryBase;
        User user;
        repo.Authenticate(out user);
        return _defaultInvoker.Invoke(instance, inputs, out outputs);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:04:57.237

您是否尝试过 OperationContext.Current.ServiceSecurityContext.PrimaryIdentity ？

**编辑：**

```
string MyFunction( AThing something, BThing another ) 
```

在这种情况下，returnValue 是 MyFunction 返回的字符串。输出将是一个又一个。

使用参数检查器等通用方法的困难在于，它通常因对象而异，您将如何确定是否允许用户查看该对象，或者允许他们查看哪些属性。

我通常会为此采取的方法（不知道域的细节）也将用户的身份传递给存储库，并让存储库负责确保只返回用户有权访问的信息。

例如，如果您有以下情况：

```
public class GroupTrip
{
   public string GroupName {get;set;}
   public DateTime Start {get;set;}
   public List<Person> Attendees {get;set;}
   public Person Organizer {get;set;}
   public bool IsStandBy {get;set;}
}

public class Person
{
   public string Name {get;set;}
   public string Phone {get;set;}
} 
```

您必须确保：

*   只有在参加时才能看到组对象。
*   如果您正在参加，您应该能够看到其他人的姓名，但看不到他们的电话号码
*   如果您参加，您应该能够看到组织者的姓名和电话号码
*   如果您正在参加，您不应该看到任何待命的人
*   如果您是组织者，您应该能够看到每个人的电话号码。

它很快就会变得非常复杂。将复杂性推送到存储库会有所帮助。

# delphi - 如何在不注册类类型的情况下使用 Spring 的 DI 容器模拟接口？

> ID：16067655
> 
> 赞同：2
> 
> 时间：2013-04-17T18:41:19.760
> 
> 标签：delphi, mocking, delphi-xe3, spring4d

我正在尝试解耦现有代码以便能够对其进行单元测试。我已经引入了接口来去除对UI对象的依赖。问题是Spring容器的RegisterComponent<T>调用需要一个TComponentType参数，所以我不能调用RegisterComponent<IMyProgressBar>我必须调用RegisterType<TMyProgressBar>.Implements<IMyProgressBar>这意味着我必须在 DUnit 中使用包含进度条类定义的单元，这违背了将 DIContainer 与 ServiceLocater 一起使用的目的，以便在我需要时请求进度条。

我不想创建模拟类并手动实现接口。有没有办法使用 Delphi.Mocks 自动模拟接口而不指定实现类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T11:28:20.733

您显然没有使用最新版本的 Spring4D，因为该功能已于去年 11 月实施（请参阅[https://stackoverflow.com/a/11315141/587106](https://stackoverflow.com/a/11315141/587106)中的更新）

目前没有容器的自动模拟，但我喜欢这个想法，并将研究实现一些使这更容易的东西（可能通过改进容器扩展）。

目前，测试用例方法看起来像这样（使用 DSharp 模拟语法）：

```
procedure TMyTestCase.TestSomething;
var
  progressBarMock: Mock<IProgressBar>;
  sut: TTestComponent;
begin
  container.RegisterType<TTestComponent>;
  container.RegisterType<IProgressBar>.DelegateTo(
    function: IProgressBar
    begin
      Result := progressBarMock;
    end);
  container.Build;

  // mock setup

  sut := container.Resolve<TTestComponent>;

  // perform test
end; 
```

无论如何，我强烈建议在不使用 DI 容器的情况下编写单元测试。

如果您的 SUT 有许多依赖项，则使用容器很有吸引力，这通常是违反某些设计原则的标志。

# java - 玩 2.0 和 IDEA。错过了 javaCore、javaJdbc、javaEbean 依赖项

> ID：16067657
> 
> 赞同：2
> 
> 时间：2013-04-17T18:41:37.007
> 
> 标签：java, scala, playframework, intellij-idea, playframework-2.0

我使用 Intellij IDEA 创建了新的 play 2.1 Java 项目，当我打开`Build.scala`文件来管理依赖项时，我看到 IDEA 无法解析某些依赖项和`play.Project`类。但是项目编译得很好，我可以在浏览器中运行它。哪里可能有问题？

![在此处输入图像描述](https://i.stack.imgur.com/YWWYL.png)

**更新**：我尝试使用 play 命令行重新创建项目（如 @biesior 和 @maba 建议的那样），所以现在我对依赖项没有任何问题，但所有 scala 代码都没有解决（例如在模板代码中）。我还注意到我在`Project Structure`菜单中有错误： ![在此处输入图像描述](https://i.stack.imgur.com/YIeka.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:16:57.137

**首先：**不要使用 Idea 创建 Play 项目，使用命令行，将其理想化（如 @maba 所写），最后在 Idea 中打开（打开，不要导入...），

**第二：**如果应用程序编译......不要关心IDE中的依赖关系:)

**注意：**我不会责怪 Idea 的插件 - 它是为 Play 2.0 创建的，并且模块化（`javaCore`等`javaEbean`）已包含在 Play 2.1 中......实际上 Play 2+ 是非常新鲜的东西，我认为我们需要稍等一下在 IDE 中获得完美的支持。最后，我是“JetBrainiacs”的粉丝，因为我对 Play 的变化反应相对较快 :)

# asp.net-mvc-4 - 使用 MVC4 创建移动应用程序

> ID：16067658
> 
> 赞同：0
> 
> 时间：2013-04-17T18:41:40.027
> 
> 标签：asp.net-mvc-4

我需要知道天气我可以使用 ASP.NET MVC4 框架创建一个移动应用程序。我关心的不是移动网站，而是可以安装在 iphone/android 上的应用程序，也可以上传到苹果商店。如果是，那么请建议一些参考链接来实现相同的目的。

谢谢罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:52:58.213

是的，有点。

您可以使用[PhoneGap 之](http://phonegap.com/)类的框架来创建带有 HTML、CSS 和 JavaScript 的 iPhone/Android 应用程序。PhoneGap 将向您的服务器发出请求，因此可以在任何您想要的地方实现。如果您想使用 ASP.NET MVC，我建议您将 JSON 数据结构返回到您的移动应用程序。

实际上，您可能最好`Web API`为此编写一个而不是 MVC 网站。

# asp.net-mvc - 关闭弹出窗口后刷新剑道网格

> ID：16067662
> 
> 赞同：1
> 
> 时间：2013-04-17T18:41:51.103
> 
> 标签：asp.net-mvc, kendo-ui

我正在为 asp.net mvc 使用 Kendo UI Web。我通过网格命令按钮生成一个弹出窗口。关闭此弹出窗口后，我希望刷新网格。

在弹出窗口上关闭事件：

```
function ClosingRateWindow(e) {
    var grid = $('#ContractDetailOrderEventGrid').data("kendoGrid");
    grid.dataSource.read();} 
```

此时网格未定义。

剑道窗口定义：

```
@(Html.Kendo().Window()
    .Name("Rates")
    .Title("Rates")
    .Visible(false)
    .Modal(true)
    .Draggable(true)
    .Width(850)
    .Height(1200)
    .Events(x => x.Close("ClosingRateWindow"))
) 
```

Javascript 打开窗口（返回部分视图）：

```
wnd.refresh({
    url: BASE_APP_URL + "ContractRateAdmin/OpenContractRate/",
    data: { data: data },
    traditional: true
});
wnd.center();
wnd.open(); 
```

网格定义：

```
@(Html.Kendo().Grid<TMS.MVC.TIMS.Models.Admin.Contract.ContractOrderEventGridModel>()
.Name("ContractDetailOrderEventGrid")
.Columns(columns =>
{
    columns.Command(o =>
    {
        o.Destroy();
        o.Edit();
    }).Width(100).Title("Commands");

    columns.Command(command => 
        { 
            command.Custom("Rates").Click("ShowRates");
        }).Title("Rates").Width(120);
    columns.Bound(o => o.ContractId).Hidden(true);
    columns.Bound(o => o.OrderTypeId).Hidden(true);
    //columns.Bound(o => o.ActiveRateMissing).Width(70).Title("Missing Rates?");
    columns.Bound(o => o.OrderLevelFlag).Width(50).Title("Order Level").EditorTemplateName("ContractOE_OrderLevelFlag");
    columns.Bound(o => o.Active).Width(80).Title("Active").EditorTemplateName("ContractOE_Active");
    columns.Bound(o => o.InvoiceDescription).Width(150).Title("Invoice Desc");
    columns.Bound(o => o.SourceContainerOwnerNameDisplay).Width(150).Title("Src Cont Owner").EditorTemplateName("ContractOE_SourceContainerOwner");
    columns.Bound(o => o.DestContainerOwnerNameDisplay).Width(150).Title("Dest Cont Owner").EditorTemplateName("ContractOE_DestContainerOwner");
    columns.Bound(o => o.SourceContainerTypeName).Width(150).Title("Src Cont Type").EditorTemplateName("ContractOE_SourceContainerTypeName");
    columns.Bound(o => o.DestContainerTypeName).Width(150).Title("Dest Cont Type").EditorTemplateName("ContractOE_DestContainerTypeName");
    columns.Bound(o => o.SourceContainerName).Width(150).Title("Src Container").EditorTemplateName("ContractOE_SourceContainerName");
    columns.Bound(o => o.DestContainerName).Width(150).Title("Dest Container").EditorTemplateName("ContractOE_DestContainerName");
    columns.Bound(o => o.EventAliasName).Width(150).Title("Event").EditorTemplateName("ContractOE_EventAliasName");
    columns.Bound(o => o.ProductName).Width(150).Title("Product").EditorTemplateName("ContractOE_ProductName");
    columns.Bound(o => o.OrderByNameDisplay).Width(150).Title("Order By").EditorTemplateName("ContractOE_OrderBy");
    columns.Bound(o => o.OrderTypeName).Width(150).Title("Order Type").EditorTemplateName("ContractOE_OrderTypeName");
    columns.Bound(o => o.EmployeeDisplay).Width(150).Title("Employee").EditorTemplateName("ContractOE_EmployeeDisplay");
    columns.Bound(o => o.CarrierName).Width(150).Title("Carrier").EditorTemplateName("ContractOE_CarrierName");
})
    .Events(e => e
        .Save("Contract_Save")
        //.Remove("ContractOrderEventGrid_Remove")
        .DataBound("Contract_DataBound"))
    .Scrollable(scrolling => scrolling.Enabled(true).Height("300px"))
    .ToolBar(toolbar =>  {
            if (Model.DetailModel.ContractAdminDetailPermissionModel.AddOrderEvent_Button_Visible == true)
                toolbar.Create().Text("Add");
    })
    .HtmlAttributes(new { style = "width: 1200px" })
    .Editable(editable => editable.Mode(GridEditMode.InLine))
    .Sortable(sorting => sorting.Enabled(true))
    .Pageable(paging => paging.Enabled(false))
    .Resizable(resizing => resizing.Columns(true))
    .Filterable(filtering => filtering.Enabled(true))
    .Groupable(grouping => grouping.Enabled(true))
    .DataSource(dataSource => dataSource
        .Ajax()
        .Model(model =>
        {
            model.Id(p => p.ContractOrderEventId);
            model.Field(x => x.ActiveRateMissing).Editable(false);
            model.Field(x => x.ContractId).Editable(false);
            model.Field(x => x.OrderTypeId).Editable(false);
            model.Field(x => x.Active).Editable(true).DefaultValue("Y");
            model.Field(x => x.OrderLevelFlag).Editable(true).DefaultValue("N");
            model.Field(x => x.InvoiceDescription).Editable(true).DefaultValue("Enter Invoice Description");
            model.Field(x => x.SourceContainerOwnerNameDisplay).Editable(true).DefaultValue("ALL");
            model.Field(x => x.DestContainerOwnerNameDisplay).Editable(true).DefaultValue("ALL");
            model.Field(x => x.SourceContainerTypeName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.DestContainerTypeName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.SourceContainerName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.DestContainerName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.EventAliasName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.ProductName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.OrderByNameDisplay).Editable(true).DefaultValue("ALL");
            model.Field(x => x.OrderTypeName).Editable(true).DefaultValue("ALL");
            model.Field(x => x.EmployeeDisplay).Editable(true).DefaultValue("ALL");
            model.Field(x => x.CarrierName).Editable(true).DefaultValue("ALL");
        })
           .Events(x =>
           {
              // x.RequestEnd("RefreshContractDetailOrderEventGrid");
               //x.Error("ContractDetailOrderEventGrid_Error");
           })
       .Create(update => update.Action("CreateContractOrderEvent", "ContractGrid", new { selectedContractId = Model.DetailModel.ContractId }))
       .Read(read => read.Action("ReadContractOrderEvent", "ContractGrid", new { contractId = Model.DetailModel.ContractId }))
       .Update(update => update.Action("UpdateContractOrderEvent", "ContractGrid", new { contractId = Model.DetailModel.ContractId }))
       .Destroy(update => update.Action("DestroyContractOrderEvent", "ContractGrid"))
    )) 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:10:05.153

基本上你需要使用 Window 的[close](http://docs.kendoui.com/api/web/window#events-close)事件和 Grid 的 refresh 方法，或者我猜你需要使用 dataSource.read() 方法来刷新 Grid 的数据:)

```
wnd.bind('close',function(){
    $('#Rates').data().kendoGrid.dataSource.read(); // or
    $('#Rates').data().kendoGrid.refresh();
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T19:03:59.737

该`grid`变量在弹出窗口中是未定义的，因为它是在父窗口中定义的；所以你需要做以下事情：

```
var grid = window.parent.$("#grid").data("kendoGrid");
grid.dataSource.read() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-03T21:54:24.370

\我确实看到很多关于未定义错误的回复。我正在尝试在这里做同样的事情。我对该问题的解决方案是将一个函数附加到编辑器窗口的关闭事件。：

```
.Editable(a => a.Mode(GridEditMode.PopUp).Window(q => q.Title("New Stage").Events(e => e.Close("UpdateStages")))) 
```

然后调用的函数是：

```
function UpdateStages() {
    $("#StagesForCourse").data("kendoGrid").dataSource.read();
} 
```

我不担心尝试接受变量，而是直接调用网格并告诉它读取数据源

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T19:51:35.407

你能试一下吗;

```
function ClosingRateWindow(e) {
    var grid = $('#ContractDetailOrderEventGrid').data("kendoGrid");
    grid.refresh();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T01:08:37.477

我知道这个答案可能已经晚了。但是，如果您从另一个 URL 获取内容。您需要设置 .Iframe(true)。经过数小时的调试后发现了这一点。他们在这方面的文档确实很差。

# python - 如何使用硒选择单选按钮

> ID：16067663
> 
> 赞同：1
> 
> 时间：2013-04-17T18:41:51.320
> 
> 标签：python, html, selenium

我正在尝试使用 selenium 和 python 单击此单选按钮。

```
<input type="radio" name="tweet_target_1" value="website" class="tweet-website-button radio-selection-validate serialize-me newline-before field-order-15"> 
```

我有

```
website = driver.find_element(name="tweet_target_1")
website.click() 
```

但它不允许我点击它。如何使用名称、值或类、值等的组合单击？

是否有关于如何使用硒的良好信息来源？因为我发现的大部分内容都在 java 上，而我正在使用 python。

**编辑：使用 XPATH**

我试过了

```
website = driver.find_elements(By.XPATH, "//form[@id='dmca_form' and @class='twitter-form custom-form']/div[20][@class='list-container']/div[1][@class='list-item']/div[7][@class='clearfix inf-tweet init-hide']/div[@class='input']/ul[@class='options']/li[2]/label/input[@class='tweet-website-button radio-selection-validate serialize-me newline-before field-order-15']/")
website.click() 
```

我不断得到

`AttributeError: 'list' object has no attribute 'click'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-07T17:06:24.577

我知道这可能来得太晚了，但我最近才加入。

提示：使用 Firebug 和 Firepath。找到单选按钮并找出相关元素的 xpath。

```
website = driver.find_element_by_xpath(".//**")
website.click() 
```

或者

```
website = driver.find_element_by_xpath(".//**").click() 
```

这应该在您尝试的所有时间都有效。此外，只需使用即可`from selenium import webdriver` 使该`click()`功能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:00:38.997

I'm not sure where you found the documentation that said you could call `find_element` like that, but you should either be doing `driver.find_element_by_name("tweet_target_1")` or `driver.find_element(By.NAME, "tweet_target_1")` (having first imported `By` of course). Also, Selenium Java code is pretty easily convertible to Python code; it follows a few pretty simple transformation rules, and if you still have questions, all the code for the library itself will also be on your machine to look at.

# c# - 是否可以在 ASP.net 应用程序中嵌入试用限制？

> ID：16067667
> 
> 赞同：5
> 
> 时间：2013-04-17T18:41:59.817
> 
> 标签：c#, asp.net, .net, web-applications

我有一个 ASP .NET 应用程序，我们提供给我们的客户，让他们将其部署在他们的 Web 服务器中并使用它。我担心的是我所有的 ASPX 页面源代码都是开放的，我们的客户可以打开 ASPX/CS 文件并查看其中的代码。

我想通过实施一些 15-20 天的试用限制来保护我的代码，例如 Windows 应用程序。另一方面，源代码必须有一些第三方 dll，这样每当他们尝试部署新版本时，它只能在有限的时间内使用。

我们客户的付款条件是，先源代码，然后付款。所以我在想，双方的信仰都保持原样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:06:17.547

发布您的 Web 应用程序，以便将文件背后的所有代码编译成 dll。这样他们就不能轻易看到您的代码。然而，他们将能够使用反射来查看使用 jetBrains dotPeeek 等工具的代码。

**最佳选择** 自己托管网站，但由于这不能回答您的问题，这里有一些其他选择

**第一个选项**

如果客户坚持托管站点，因为他们一致同意拥有数据，那么允许他们托管站点和数据库，但从您控制的集中托管站点中提取功能。你甚至可以提供一个 api。

您在 web.config 中为客户端提供哈希码，这将针对您的站点进行验证。哈希由以下组成：

*   盐前
*   网络服务地址
*   到期日
*   客户唯一标识符
*   您想要的任何其他信息
*   盐后

加密 web 服务的请求和响应并通过 ssl 发送。

客户端哈希将在请求中发送。使用相同的字段构建一个新的哈希，并根据您从客户端收到的哈希进行验证。如果它无效，则您不提供该功能。

谷歌地图要求您注册并获得一个哈希码，因为如果您滥用它，他们可以终止您对谷歌地图 API 的使用。

**第二个选项**

另一种选择是设置对您托管的站点的 Web 服务调用。

然后，已部署的已编译 Web 应用程序将使用来自您的 Web 服务的响应构建一个哈希，并将生成的哈希与您在响应中发送的哈希匹配。

这意味着如果客户端阻止到您的 Web 服务的流量或试图伪造响应，那么应用程序将停止工作。

如果他们试图伪造响应，还可以添加一些逻辑来提醒您。如果他们阻止对您的 Web 服务的调用，这显然不会起作用。

您不会在此处包含盐，因为如果他们反编译了您的代码，客户可以阅读它们。

**第三个选项** 将两个字段添加到您的 web.config：

*   您为客户端生成的哈希码
*   一个到期日。

如果客户更改到期日期以允许他们有更多时间，那么它将无法验证并且他们将被锁定。

选项 2 和 3 将允许客户在他们真正想要的情况下对哈希码进行逆向工程。

======================================

我真的不认为有必要，但如果你愿意，你可以使用其他帖子中提到的一些混淆工具，让客户更难阅读你的代码。但是即使他们可以阅读您的代码，他们也不应该能够自己创建有效的哈希码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:53:41.040

我建议您查看 .NET Reactor 和 Intellilock。.NET Reactor 将防止编译代码的反编译，但是对于 aspx，我不确定这将如何工作，因为它需要进行预编译。Intellilock 将提供设置过期时间的功能。我已经将两者都与标准可执行文件一起使用，但从未使用过 ASPX，所以我不确定它们是否会有所帮助。

链接：[http ://www.eziriz.com/](http://www.eziriz.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:48:10.723

DotFuscator 社区版是一种可能，但它可能对您的需求来说太基本了。

我建议你看看市场上的商业混淆器。这是我通过简单的 Google 搜索找到的一些列表。（这**不是**任何这些工具的推荐。）

*   Red Gate Software 的 .NET Obfuscator（我过去使用过他们的 Reflector 工具，效果很好。）
*   你可以自己做。[请参阅此 StackOverflow 线程](https://stackoverflow.com/questions/1857685/how-to-create-own-dotnet-obfuscator)。
*   这是[MSDN 上的一个线程](http://social.msdn.microsoft.com/Forums/en-US/netfxsetup/thread/e8459105-efbd-4434-abf5-59bea9a39287/)

# java - 具有行数据网关的注册表模式

> ID：16067680
> 
> 赞同：1
> 
> 时间：2013-04-17T18:42:44.943
> 
> 标签：java, design-patterns

我正在阅读 Martin Fowlers 的书，即企业应用程序模式：ftp: [//ftp.heanet.ie/mirrors/sourceforge/w/we/webtune/Patterns%20of%20Enterprise%20Application%20Architecture.pdf](ftp://ftp.heanet.ie/mirrors/sourceforge/w/we/webtune/Patterns%20of%20Enterprise%20Application%20Architecture.pdf)。我遇到了行数据网关模式，特别是注册表模式。这是本书第 149 页的代码片段：

```
public static Person find(Long id) {
    Person result = (Person) Registry.getPerson(id);
    if (result != null) 
        return result;
    PreparedStatement findStatement = null;
    ResultSet rs = null;
    try {
        findStatement = DB.prepare(findStatementString);
        findStatement.setLong(1, id.longValue());
        rs = findStatement.executeQuery();
        rs.next();
        result = load(rs);
        return result;
    } catch (SQLException e) {
        throw new ApplicationException(e);
    } finally {
         DB.cleanUp(findStatement, rs);
    }
} 
```

上面的代码调用了注册表类，但我不确定注册表类有什么好处。我已经阅读了关于注册表类的章节，但我仍然不清楚。我知道它们是静态方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:53:37.767

在这种情况下，注册表就像一个缓存（或者`IdentityMap`您很快就会看到或可能已经拥有的缓存），如果您的应用程序已经拥有对该`Person`对象的引用，它将不会从数据库中获取它。

从书中

> 当你想找到一个对象时，你通常从另一个与之有关联的对象开始，并使用该关联来导航到它。因此，如果您想查找客户的所有订单，您可以从客户对象开始，并在其上使用方法来获取订单。但是，在某些情况下，您将没有合适的对象开始。

该`Registry`模式基本上是对象引用的持有者，因此您不必遍历复杂的对象依赖关系来获取链中的最后一个对象。示例（您在实践中永远不会看到）：

```
class Book {
    public Author author;
}

class Author {
    public City city;
}

class City {
    public String name;
} 
```

您不希望必须经过`Book -> Author`才能获得`City`对象。

您`Registry`通常使用来保持对全局对象的引用，这就是 Fowler 建议使用`static`方法的原因，但正如您可以继续阅读的那样`page 409`，您应该很少使用这种模式`"as a last resort"`。

*设计不佳的*注册表示例

```
class CityRegistry {
    private static Map<String, City> references = new HashMap<>();
    public static void registerCity(String id, City reference) {
        references.put(id, reference);
    }

    public static City getCity(String id) {
        return references.get(id);
    }
} 
```

每当您创建某个类的实例时，您都会在其中注册它，`Registry`以便整个应用程序都可以访问它（这可能会导致比它解决的问题更多的问题）。

# algorithm - 迭代递归...迭代方法

> ID：16067681
> 
> 赞同：0
> 
> 时间：2013-04-17T18:42:47.777
> 
> 标签：algorithm, methods, recursion, iteration

我尝试使用迭代方法解决以下递归关系，

```
T(1) = 8  
T(n) = 3T(n-1) - 15 
```

迭代：

**我=1**

```
T(n) = 3(3T(n-2) - 15) -15 
```

**我=2**

```
3(3(3T(n-3) - 15) -15) - 15 
```

**我=3**

```
 3(3(3(3T(n-4) - 15) -15) - 15) - 15 
```

**我=4**

```
3(3(3(3(3T(n-5) - 15) -15) - 15) - 15) - 15 
```

从迭代模式我发现
**T(n) = 3 ^((i+1)) * T(n-(i+1)) - 15**

现在我需要找到这个递归关系的总和并获得封闭形式。我只是不确定如何进行。

有人可以指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:38:49.000

递归关系是，

```
T(n) = 3T(n-1) - 15                        ------ 1

T(n-1) = 3T(n-2) - 15                      ------ 2

1-2 ->  T(n) - T(n-1) = 3T(n-1) - 3T(n-2)  ------ 3

T(n) - 4T(n-1)  + 3T(n-2) = 0              ------ 4 
```

对应的特征方程为，

**x ² -4x + 3 = 0**

x = 3 和 x = 1 是解，

一般的解决方案是，

**T(n) = a 1 ^n + b 3 ^n**

这意味着**T(n) = a + b 3 ^n**

我们有 T(1) = 8，

那里为`a + 3b = 8 ---- 5`

T(2) = 9,

那里为`a + 9b = 9 ---- 6`

解决 5 和 6，我们得到 a = 15/2 和 b = 1/6。

因此，一般解决方案是**T(n) = (1/6) 3 ^n + 15/2**。

# google-app-engine - 无法在后端 AppEngine 实例中创建 Timer 类...为什么？

> ID：16067682
> 
> 赞同：0
> 
> 时间：2013-04-17T18:42:56.507
> 
> 标签：google-app-engine, timer

我能够创建线程，但是创建一个 Timer 并安排它让我望而却步。我不确定为什么这会失败......而且默默地！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:24:01.033

您可以在 GAE 中使用线程，但有一些限制：

1.  您必须通过 GAE 提供的创建它们[`ThreadManager`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/ThreadManager)。
2.  在前端实例上，线程不能超过请求。这意味着如果请求已经结束，从 http 请求启动的 Timer 无法运行 TimerTask - 我想这就是它静默失败的原因。

如果您需要启动延迟任务，请尝试使用带有[ETA 设置的](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/TaskOptions#etaMillis%28long%29http://)[DeferredTask](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/taskqueue/DeferredTask)（[这里是一个示例](https://stackoverflow.com/questions/7505116/java-gae-deferredtask-example)）。

# asp.net - Razor Generator：这是准确的吗？

> ID：16067687
> 
> 赞同：2
> 
> 时间：2013-04-17T18:43:04.657
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-mvc-5, razorgenerator, pre-compilation

我最近询问了我目前工作地点的前首席开发人员，为什么他选择使用***Razor 生成器***将我们的视图预编译到单独的程序集中。

他在下面提出了一些声明，但我似乎无法在网络上找到任何***Razor Generator***配置文件和/或指标来支持该声明（快 10-100 倍），和/或，如果***IIS7/ASP.NET***确实如此关于预编译与运行时编译的视图的幕后以及它们的好处或缺乏。

谁能指出我正确的方向？还是评论？

在我看来（就启动时间而言）只需为站点设置 IIS就可以平衡使用***Razor Generator***`autostart = true`进行预编译的任何好处。以下是他的声明：

 *为什么我们使用 Razor 生成器来预编译我们的视图以及为什么将它们放在单独的程序集中？

> 第一个是简单的编译时错误检查。有了这么多视图，这似乎是避免生产错误的好方法。不得不重新编译才能看到我承认的观点的变化有点令人沮丧，但（在我看来）知道你有更多的错误检查是完全值得的。
> 
> 第二个是当视图没有在项目中编译时，它们会在运行时编译，然后那些编译的表示必须存储在 ram 中。有时，如果不定期访问它们（大多数视图都是这种情况，因为有这么多），那些存储的编译版本会被丢弃并收集垃圾以节省内存。因此，除了像 gaf.com 这样的网站中最常访问的视图之外，所有视图最终都会在每次访问时重新编译。但是如果你把它们放在一个项目中，编译的版本只需要从 dll 加载，如果它还没有在内存中（是的，代码也可以被垃圾收集，但不那么频繁）。从 dll 加载它的速度要快 10 到 100 倍（这是来自 Razor Generator 项目的站点 - 我自己没有验证它，但听起来很合理）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T17:38:32.270

我们在同样的问题上苦苦挣扎。我们开始编译 Views 是为了捕捉在**集成测试**和**UX 测试**期间会出现在我们身上的明显问题。更糟糕的是不知何故潜入生产的错误。

但是，我们的构建时间变得无法忍受。我们的开发人员构建了无数次，这成为我们一天的主要部分。我们在午餐后开玩笑说要进行测试，这样我们就可以在外出时完成构建。

**我们最终在UX-tests**之前开始构建。

* * *

现在我们正朝着预编译的方向发展。目前我们团队中只有一个人采用了它，并且显然预编译明显优于构建（增量与总）。设置基本上是一个 nuget 提取。

这些文章应该是一个好的开始

[http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/](http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/)

[http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html](http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html)

* * *

预编译为我们提供了部署现成二进制文件的所有优势。我们的用户不会在第一次点击视图时体验到瞬时延迟。

据我所知`IIS autostart = true`，它将启动您的应用程序池，但不会强制编译您的视图。结果，您将获得第一个用户使用每个视图的初始启动命中。*

# c++ - C++ 仍在寻找 .lib 文件，但我不明白为什么

> ID：16067692
> 
> 赞同：0
> 
> 时间：2013-04-17T18:43:22.000
> 
> 标签：c++, windows, visual-studio-2010, linker

我有一个 VS 2010 C++ 项目。当我尝试编译它时，它告诉我

错误 1 ​​错误 LNK1104：无法打开文件“C:\Users\MyUser\Desktop\project1\Debug\mysynth.lib”。C:\Users\MyUser\Desktop\project1\subproject\LINK 子项目

我已经从 Linker->Input-> 中删除了所有依赖项，但它仍在寻找上述库。

这个链接还能在哪里说明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:47:53.770

您可以在配置对话框中指定其他链接器选项。查看链接器 | 命令行页面。也许在那里指定了错误的库。在任何情况下，您都可以在那里看到传递给链接器的命令行，并确定您的 lib 文件是否存在。

找出它们来自哪里的最简单方法是在文本编辑器中打开项目文件并搜索错误的 lib 文件。如果问题出在项目配置中，则此策略保证成功。

如果您已经从项目设置中删除了所有内容，并且没有将错误的 lib 传递给链接器命令行，那么可以指定 lib 文件的另一个位置是在代码中。在一份`#pragma`声明中。它看起来像这样：

```
#pragma comment(lib, "mysynth") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T22:02:17.263

查看属性资源管理器。阅读 MSBuild 文档以了解它们的阅读顺序。这是从 VS2008 开始最令人困惑的部分。

# database - 使用 MS Access 中另一个表中的值过滤表的正确方法？

> ID：16067694
> 
> 赞同：1
> 
> 时间：2013-04-17T18:43:24.847
> 
> 标签：database, performance, ms-access

我有一个交易表，其中包含一些交易 ID 和员工编号。我还有另外两个表，它们基本上只是一个充满交易或员工的列，需要从第一个表中过滤掉。

我一直在像这样运行我的查询：

```
SELECT * FROM TransactionMaster 
Where TransactionMaster.TransID 
NOT IN (SELECT TransID from BadTransactions) 
AND etc...(repeat for employee numbers) 
```

我注意到运行这些类型的查询时性能很慢。我想知道是否有更好的方法来构建这个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:24:22.487

如果您想要所有`TransactionMaster`不包含`TransID`匹配项的行，请`BadTransactions`使用 a并仅询问（不匹配的）`LEFT JOIN`那些行。`BadTransactions.TransID Is Null`

```
SELECT tm.*
FROM
    TransactionMaster AS tm
    LEFT JOIN
    BadTransactions AS bt
    ON tm.TransID = bt.TransID 
WHERE bt.TransID Is Null; 
```

该查询应该是相对较快的`TransID`索引。

如果您有可用的访问权限，请使用“不匹配的查询向导”创建一个新查询。它将指导您完成创建类似查询的步骤。

# asp.net - 无法从同一域 Asp.Net 上不同 Web 应用程序中的另一个页面读取 cookie

> ID：16067698
> 
> 赞同：0
> 
> 时间：2013-04-17T18:43:35.667
> 
> 标签：asp.net, web-applications, cookies

当我从同一域上的另一个 Web 应用程序打开一个页面时，我试图读取在原始页面上创建的 cookie，但我无法读取 cookie。如果我将该页面移动到同一个 Web 应用程序中，那么它可以工作，但这不是我想要的。

```
[Domain: MyCompany.mobi]
[WebApp A] - create cookie and launch page

Protected Sub Button6_Click(sender As Object, e As EventArgs) Handles Button6.Click
  Dim aCookie As New HttpCookie("TestCookie")
  aCookie.Value = "Hello World"
  aCookie.Expires = DateTime.Now.AddDays(1)
  Response.Cookies.Add(aCookie)

  Dim script = "window.open('http://MyCompany.mobi/webappB/default.aspx?id=TestCookie')"

  'open page in WebsiteB
  ScriptManager.RegisterStartupScript(Me, Me.GetType, "OpenPage", script, True)
End Sub 
```

* * *

```
[Domain: MyCompany.mobi]
[WebApp B] - read the cookie and display in label

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim id As String = ""

    If Request.QueryString("id") IsNot Nothing Then id = Request.QueryString("id").ToString

    If Request.Cookies(id) IsNot Nothing Then
        Dim aCookie As HttpCookie = Request.Cookies(id)
        Label1.Text = aCookie.Name & " : " & aCookie.Value
    Else
        Label1.Text = "Cannot read cookie"
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:54:04.163

Cookies 与*域名*相关联；而不是 DNS 指向的物理服务器。

出于安全原因，您不能从不同的域名读取 cookie。
您需要在 URL 中传递信息。

# ruby-on-rails - 如何根据rails 3.2.12中是否存在另一个模型/表来定义动态has_many关系？

> ID：16067700
> 
> 赞同：1
> 
> 时间：2013-04-17T18:43:41.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, has-many

我们的 Rails 应用程序中有`customers`和`projects`模型。然而`project`，模型可能会或可能不会与`customer`模型一起出现。他们的关系是：

```
class Project
  belongs_to :customer, :class_name => 'Customer'
end

class Customer
  has_many :projects, :class_name => 'Project', :conditions => if projects model exists
end 
```

基本上，我们希望根据项目模型是否存在使客户模型中的 has_many 动态化。这在 rails 3.2.12 中可行吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:07:19.010

我不确定我是否跟随。如果您需要根据关联类是否已定义来进行动态关联，那么您可以按照以下方式编写一些内容：

```
class Customer
   if defined? Project
      has_many :projects, :class_name => 'Project'
   end
end 
```

如果您的意思是像数据库中的对象或记录这样的模型，那么我不确定为什么关联不能停留在原处。

## 更新

是的，您可以在一行中做到这一点。但请注意，这在开发环境中不会按预期工作，因为 config.cache_classes 设置为 false，即“已定义？Project' 将始终返回 nil ，除非您明确调用它。

如果您需要测试此行为，请在您的 development.rb 中设置 config.cache_classes = true （请注意，除非您重新启动服务器，否则这将忽略代码更改）。

```
class Customer
   has_many :projects, :class_name => 'Project' if defined? Project
end 
```

# xslt - 有没有办法在覆盖该属性集时从 XSLT 属性集中删除所有属性？

> ID：16067702
> 
> 赞同：2
> 
> 时间：2013-04-17T18:43:58.557
> 
> 标签：xslt, xslt-2.0, xslt-3.0

我正在使用一些第三方 XSLT，它们大量使用属性集将 XML 转换为各种形式的 XSL:FO。例子：

笔记.xsl：

```
<xsl:template match="note">
    <fo:block xsl:use-attribute-sets="noteAttrs">
        <!-- This is a pretty big template with lots of xsl:choose/xsl:if/etc. -->
     </fo:block>
<xsl:template>

<xsl:attribute-set name="noteAttrs">
    <xsl:attribute name="margin-left">10px</xsl:attribute>
    <xsl:attribute name="margin-right">8px</xsl:attribute>
    <xsl:attribute name="margin-top">5px</xsl:attribute>
    <xsl:attribute name="font-size">10pt</xsl:attribute>
    <!-- several other attributes -->
</xsl:attribute> 
```

我的想法是导入这个 XSLT，重新定义我认为合适的属性集。如果我只需要给定 .fo 文档的不同字体大小...

```
<xsl:import href="notes.xsl"/>
<xsl:attribute-set name="noteAttrs">
    <xsl:attribute name="font-size">12pt</xsl:attribute>
</xsl:attribute> 
```

问题是有时我需要完全删除属性（即我从包​​含的 fo:block 继承），或者给定的 fo 文档将如此不同，以至于重新开始而不是合并我的属性集会更容易来自notes.xsl的那个。XSLT 2.0 中有没有一种方法可以做到这一点，而无需复制整个笔记模板并在 fo:block 上指定不同的属性集？我想我希望能够做这样的事情：

```
<xsl:import href="notes.xsl"/>
<xsl:attribute-set name="noteAttrs" merge_with_imported_attr_set="false">
    <xsl:attribute name="font-size">12pt</xsl:attribute>
</xsl:attribute> 
```

我不能立即切换到 XSLT 3.0 处理器，但是如果 3.0 中有新的东西可以实现这一点，我很想知道它。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:56:52.903

属性集的使用不是很广泛，要回答您的问题，我必须查看规范以刷新记忆。我认为没有任何方法可以实现您想要的。您不能真正覆盖导入样式表中的属性集，您只能对其进行补充。在精心设计的 XML 词汇表中，通常可以设置一个属性值，该值等同于省略该属性，但如果不是这种情况，那么您将陷入困境。

# android-notifications - 我无法设置大视图样式

> ID：16067709
> 
> 赞同：5
> 
> 时间：2013-04-17T18:44:17.293
> 
> 标签：android-notifications

我无法使用大视图样式创建通知。支持库问题？我的代码在 Eclipse 中没问题（没有错误），但通知只显示 contentTitle、ContentText、图标……就是这样！我的通知中没有多余的行...怎么了？非常感谢你的回复 。这是代码...

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
    // TODO Auto-generated method stub
    //Log.d("onMessage", String.valueOf(arg1));
    //Log.d("onMessage", "Receive a message");
    // Get the data from intent and send to notification bar
    String message = arg1.getExtras().getString("message");
    generateNotification3(arg0, message);
}

private static void generateNotification3(Context context, String message) {    
    NotificationCompat.Builder mbuilder =
            new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("lolo")
            .setContentText("text")
            .setDefaults(Notification.DEFAULT_ALL) // requires VIBRATE permission
            /*
             * Sets the big view "big text" style and supplies the
             * text (the user's reminder message) that will be displayed
             * in the detail area of the expanded notification.
             * These calls are ignored by the support library for
             * pre-4.1 devices.
             */
            .setStyle(new NotificationCompat.BigTextStyle()
                    .bigText(message));

     // Creates an explicit intent for an Activity in your app  
      Intent resultIntent = new Intent(context, Fsa.class);  

      // The stack builder object will contain an artificial back stack for  
      // the  
      // started Activity.  
      // This ensures that navigating backward from the Activity leads out of  
      // your application to the Home screen.  
      TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);  

      // Adds the back stack for the Intent (but not the Intent itself)  
      stackBuilder.addParentStack(Fsa.class);  

      // Adds the Intent that starts the Activity to the top of the stack  
      stackBuilder.addNextIntent(resultIntent);  
      PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,  
                PendingIntent.FLAG_UPDATE_CURRENT);  
      mbuilder.setContentIntent(resultPendingIntent);  

      NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);  

      // mId allows you to update the notification later on.  
      mNotificationManager.notify(100, mbuilder.build());  

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-16T13:59:57.420

根据官方文档[here](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify)，“只有在通知展开时才会出现大视图，这发生在通知位于通知抽屉的顶部，或者当用户用手势展开通知时”所以，为了让大视图样式，通知应放在列表顶部。

为此，当您创建通知时，请添加：

```
setPriority(Notification.PRIORITY_MAX) 
```

所以它会在收到时总是放在列表的顶部（当然如果用户没有打开通知抽屉并且其他具有最高优先级的通知到达，那么不能保证你的仍然在顶部）。

# jquery - jQuery 从特定表中删除特定 td

> ID：16067710
> 
> 赞同：0
> 
> 时间：2013-04-17T18:44:17.457
> 
> 标签：jquery

如果不删除除一个之外的所有 tr 和表，似乎无法使其工作。我试图从这个特定的表格中删除除 2 个 td 之外的所有国家，但我无法得到正确的语法。

```
$("table .country_id td .value").attr("name='location[country_id]'").not("select > option[value='GR']" ||  "select > option[value='CY']").remove(); 
```

任何帮助表示赞赏。

注意：下面的代码：

```
<div class="location_container">
<table class="form">
<tbody>
<tr class="country_id">
<td class="label">Country<span class="required_star">*</span></td>
<td class="value">
<select name="location[country_id]">
<option value="">Select</option>
<option value="AF">Afghanistan</option>
<option value="AX">Aland Islands</option>
... and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:47:35.300

尝试使用[过滤器（）](http://api.jquery.com/filter/)

```
$(".country_id td.value [name^=location] option").filter(function(){
   return !(this.value=='GR' || this.value == CY);
}).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:09:55.623

你有基本的想法，只是认为你的非选择器格式不正确。

```
$('.country_id').find('option').not('[value="GR"], [value="CY"]').remove(); 
```

[jsFiddle](http://jsfiddle.net/ferne97/QcmRn/2/)

# objective-c - 避免“在此块中强烈捕获自我很可能导致保留循环”消息

> ID：16067712
> 
> 赞同：11
> 
> 时间：2013-04-17T18:44:19.853
> 
> 标签：objective-c, cocoa-touch, cocoa, objective-c-blocks

每次我必须在这样的块内使用全局变量或属性时：

```
self.save = ^(){
  if (isItSaving == NO) {
      [self saveMyFile];
  }
}; 
```

我必须像这样重写

```
BOOL *iis = isItSaving;
id myself = self;

self.save = ^(){
  if (iis == NO) {
      [myself saveMyFile];
  }
}; 
```

否则 Xcode 会抱怨“在此块中强烈捕获自我可能会导致保留周期......

它甚至抱怨 BOOL 变量？

在块之前重新声明所有内容似乎是一个蹩脚的解决方案。

这是正确的方法吗？有没有优雅的方法？

这东西很丑。我正在使用 ARC。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T18:53:02.017

该问题仅在`self`从块内显式或隐式引用时发生。访问全局变量时不会发出警告。

在您的情况下，您可能访问了一个（布尔值）ivar。访问 ivar 隐式使用`self`，这就是编译器（正确地）警告您有关保留周期的原因。

修复保留周期的常用方法是：

```
typeof(self) __weak weakSelf = self;

self.save = ^() {
    typeof(weakSelf) __strong strongSelf = weakSelf;
    if (strongSelf != nil && ! strongSelf->isItSaving) {
        [strongSelf saveMyFile];
    }
}; 
```

...而且，是的，这是块的一个丑陋的部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-23T06:22:13.070

利用`__unsafe_unretained typeof(self) weakSelf = self;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T10:46:09.440

除了@NikolaiRuhe 的回复，在您的示例中，在声明属性时

```
BOOL *iis = isItSaving;
id myself = self; 
```

暗示`strong`引用，所以使用`__weak`self 来防止保留循环。然后你可能想知道为什么你需要`__strong`在块中声明对弱自身的引用，这是为了确保它在块的生命周期内不会被释放，否则`weakSelf->isItSaving`如果`self`被释放就会中断。

# html - 如何在图像标签上显示来自类的图像

> ID：16067713
> 
> 赞同：0
> 
> 时间：2013-04-17T18:44:20.247
> 
> 标签：html, css

我的 html 中有一个图像标签：

```
<img class="fruit1" /> 
```

以及我的CSS中的以下内容：

```
.fruit1 {
  background-image: url('./images/apple.png');
} 
```

但我无法显示实际图像，这是在 css 中分配图像并将其显示在视图中的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:50:28.833

In practice you should use a src attribute if the image is part of the page's content:

```
<img class="fruit1" src="images/apple.png" /> 
```

Background images are traditionally used to enhance content by replacing appropriate text (often headers):

```
<h2 class="apples">Our Apples</h2>

.apples {
  background-image: url('./images/apple.png');
  width: 100px;
  height: 100px;
  text-indent: -99999px; /* hide the text with a negative text-indent */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:53:31.050

```
<style>
.fruit1 {
  background-image: url('./images/apple.png');
    height:100px;
    width:100px;
    background-repeat:no-repeat;
}
</style>

<img class="fruit1" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T18:46:06.017

如果您有图像作为背景图像，也可以使用图像的宽度和高度。在这种情况下，您不应该有图像标签

```
<div class="fruit1" ></div>

.fruit1 {
  background-image: url('./images/apple.png');
  width: 200px;
   height: 200px
} 
```

像你所做的那样使用 HTML 来显示它；

```
<img class="fruit1" src= "./images/apple.png" width="200px" height="200px" /> 
```

# powershell - 组合链接的对象数组

> ID：16067715
> 
> 赞同：2
> 
> 时间：2013-04-17T18:44:33.077
> 
> 标签：powershell, powershell-2.0

我有 3 个对象数组。它们看起来像这样：

*   `$arr1`, `$arr2` : 具有 ( `ID`, `filename`, `size`, 等) 属性的对象。
*   `$arrlink`: 具有 ( `file1ID`, `file2ID`, misc) 等属性的对象。这链接了上述对象中的 2 个

我需要做的是将它们组合成一个数组，以便将其写入 CSV。这 3 个需要链接：`File1ID`并链接`File2ID`到`ID`其他 2 个数组中的列。我需要能够选择我想要的属性。这是一个例子

```
$arr1[0] = {1,"c:\filename1.txt",1000....}
$arr1[1] = {2,"c:\filename2.txt",2000....}

$arrlink[0] = {1,2,"aaaa") 
```

期望的结果：

```
newarray[0] = {"c:\filename1.txt", "c:\filename2.txt", "aaaa"} 
```

我知道我可以通过并做到这一点，但想知道是否有更简单/更直接的方法。

当然，每个数组中有很多项，但它们都以 1 对 1 的关系联系在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:33:28.810

我最终使用了这个。如果我修改底层对象（只要我不理会链接的字段），它可以节省大量输入并且不需要修改。

```
$arrOutput = @()

foreach($a in $arrMatch)
    {
    $objOut = New-Object PsObject

    $a.psobject.properties | % { $objOut | Add-Member -MemberType $_.MemberType -Name $_.Name -Value $_.Value}
    $arrS1[$a.file1].psobject.properties | % { $objOut | Add-Member -MemberType $_.MemberType -Name ($_.Name + "_1")  -Value $_.Value}
    $arrS2[$a.file2].psobject.properties | % { $objOut | Add-Member -MemberType $_.MemberType -Name ($_.Name + "_2") -Value $_.Value}
    $arrOutput+= $objOut
    } 
```

# php - 用 PHP 读取 Amazon Cloudfront API 结果

> ID：16067720
> 
> 赞同：2
> 
> 时间：2013-04-17T18:44:53.100
> 
> 标签：php, api, amazon-web-services

我有一个 PHP 脚本，它通过 API 向亚马逊的 Cloudfront 提交无效请求。

我可以捕获响应，但它返回的文本基本上如下所示：

```
HTTP/1.0 201 Created
Content-Type: text/xml
Location: https://cloudfront.amazonaws.com/2012-07-01/distribution/distribution ID/invalidation/invalidation ID

<Invalidation xmlns="http://cloudfront.amazonaws.com/doc/2012-07-01/">
   <Id>IDFDVBD632BHDS5</Id>
   <Status>InProgress</Status>
   <CreateTime>2013-04-16T19:37:58Z</CreateTime>   
   <InvalidationBatch>
      <Paths>
         <Items>
            <Path>/image1.jpg</Path>
         </Items>
      </Paths>
      <CallerReference>20130416090001</CallerReference>
   </InvalidationBatch>
</Invalidation> 
```

我基本上只是想获取状态值，我想我可以通过正则表达式或一些字符串操作来做到这一点，但我假设有更好的方法将返回的数据转换为对象并正确访问它。

我试过了：

```
$dom = new DOMDocument();
$dom->loadXML($data); 
```

但是 $data 不起作用，因为它实际上包含标题部分“HTTP/1.0 201...”

有人知道处理这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:10:57.967

你用的是什么脚本？您是否考虑过使用适用于 PHP 的 AWS 开发工具包 ( [https://github.com/aws/aws-sdk-php](https://github.com/aws/aws-sdk-php) )？

使用适用于 PHP 的 AWS 开发工具包，您可以执行以下操作：

```
// Instantiate a CloudFront client
$cloudfront = \Aws\CloudFront\CloudFrontClient::factory(array(
    'key'    => 'your-aws-access-key-id',
    'secret' => 'your-aws-secret-key',
));

// Get the status of an invalidation
$invalidationStatus = $cloudfront->getInvalidation(array(
    'DistributionId' => 'your-distribution-id',
    'Id'             => 'your-invalidation-id',
))->get('Status'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:03:02.077

Usually the Http client library should do that, you didn't mention the used one.

Still parsing that response should be simple as:

```
$dom->loadXML(substr($data, strpos("\n\n", $data)+2)) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-03T13:41:11.817

通过执行以下操作弄清楚了这一点。

```
$resp = substr($resp, strpos($resp, "\r\n\r\n")+4); // This strips out the header

$outputxml = simplexml_load_string($resp); // Converts it to an object in PHP which can be fed back more easily 
```

# python - Python 非常令人费解的正则表达式 unicode 行为

> ID：16067721
> 
> 赞同：7
> 
> 时间：2013-04-17T18:44:55.153
> 
> 标签：python, regex, unicode, python-2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T18:49:54.513

# bash - 使用 sed 从给定表的最后一行中提取字段

> ID：16067723
> 
> 赞同：0
> 
> 时间：2013-04-17T18:45:04.563
> 
> 标签：bash, sed, awk, grep

我想编写一个 bash 脚本来提取表格最后一行中的字段。我将举例说明。我有一个文本文件，其中包含带有空格分隔字段的表格，例如...

```
Table 1 (foobar)
num  flag  name   comments
1    ON    Frank  this guy is frank
2    OFF   Sarah  she is tall
3    ON    Ahmed  who knows him

Table 2 (foobar)
num  flag  name   comments
1    ON    Mike   he is short
2    OFF   Ahmed  his name is listed twice 
```

我想提取最后一行的第一个字段`Table1`，即`3`. 理想情况下，我希望能够使用任何给定表格的标题来做到这一点。每个表之间有保证的回车。最好使用 sed 和 grep 来实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:50:37.873

awk 是完美的，打印每条记录的最后一行的第一个字段：

```
$ awk '!$1{print a}{a=$1}END{print a}' file
3
2 
```

仅从第一条记录开始：

```
$ awk '!$1{print a;exit}{a=$1}' file
3 
```

* * *

**编辑：**

对于给定的表格标题：

```
$ awk -v t="Table 1" '$0~t{f=1}!$1&&f{print a;f=0}{a=$1}END{if (f) print a}' file
3

$ awk -v t="Table 2" '$0~t{f=1}!$1&&f{print a;f=0}{a=$1}END{if (f) print a}' file
2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T19:19:09.890

这条 sed 线似乎适用于您的示例。

```
table='Table 2'
sed -n "/$table"'/{n;n;:next;h;n;/^$/b last;$b last;b next;:last;g;s/^\s*\(\S*\).*/\1/p;}' file 
```

解释：当我们在 $table 中找到与表名匹配的行时，我们跳过该行，然后跳过下一行（字段标签）。从 :next 开始，我们将当前行推入保持空间，获取下一行并查看它是否为空白或文件末尾，如果不是，我们返回 :next，将当前行推入保持并获取另一行。如果它是空白或 EOF，我们跳到 :last，将保留空间（表格的最后一行）拉入模式空间，删除除第一个字段之外的所有字段并打印它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T02:32:30.210

只需将每个块作为记录读取，每行作为一个字段，然后打印您关心的任何记录的最后一个字段的第一个子字段：

```
$ awk -v RS= -F'\n' '/^Table 1/{split($NF,a," "); print a[1]}' file
3

$ awk -v RS= -F'\n' '/^Table 2/{split($NF,a," "); print a[1]}' file
2 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T18:56:58.720

更好的工具是 awk！
这是一个清晰易读的代码：

```
awk '{
    if(NR==1) {
        row=$0;
        next;
    }

    if($0=="") {
        $0=row;
        print $1;
    } else {
        row=$0;
    }
} END {
    if(row!="") {
        $0=row;
        print $1;
    }
}' input.txt 
```

# java - Does Jodatime have a method to get the months and days since some older date?

> ID：16067724
> 
> 赞同：4
> 
> 时间：2013-04-17T18:45:11.103
> 
> 标签：java, jodatime

I would like to know exactly how many months and days(possibly years) some older date is from today. Is there a method to do that?

I know how to get the difference of the months, I know how to get the difference in days. But I am unable to get the months and the days.

Ex:

old = '2013-03-04' now = '2013-04-17'

so the result im looking for is something like 1 month(s) and 13* day(s)

*maybe its 12 im not every sure.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:57:48.153

这可以通过在 JodaTime 中使用[Period来完成。](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html)

例如，

```
LocalDate old = new LocalDate(2013, 3, 4);
LocalDate now = new LocalDate(2013, 4, 17);

Period p = new Period(old, now, PeriodType.yearMonthDay()); 
```

要获取月份，请使用`p.getMonths()`, 获取天数`p.getDays()`。

该示例的结果是 1 个月 13 天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:57:26.330

是的，请参阅间隔[文档](http://joda-time.sourceforge.net/userguide.html#Intervals)：

> **间隔**
> 
> Joda-Time 中的时间间隔表示从一个瞬间到另一个瞬间的时间间隔。这两个瞬间都是日期时间连续体中完全指定的瞬间，并带有时区。
> 
> 间隔被实现为半开，也就是说，开始时刻是包含的，而结束时刻是排除的。结束总是大于或等于开始。两个端点都被限制为具有相同的年表和相同的时区。
> 
> 提供了两个实现，Interval 和 MutableInterval，它们都是 ReadableInterval 的特化。

# excel - 创建一个宏来删除满足特定条件的列中的单元格内容

> ID：16067725
> 
> 赞同：0
> 
> 时间：2013-04-17T18:45:12.103
> 
> 标签：excel, excel-formula, vba

你好有人可以帮助我。我有三列，如果符合某些条件，我想搜索每一列并删除内容。

B 列仅删除具有名称
的单元格 C 列仅删除具有单词托盘和数字的单元格 F 列仅删除带有 * 后跟四个 0000 然后以 * 结尾的单元格 这是我想出的，但它不起作用，我是不知道该怎么办。我已经搜索和搜索。我该怎么做谢谢？

列 B 名称列单元格格式 FN,LN 清除从第 16 行到最后一行的所有名称。有些'行可能有日期和时间我不想碰那些

列 C 范围格式托盘 226985 清除该列中任何行的内容，其中单词托盘后跟一个数字到最后一行

列 F 范围格式*000000226985*以 * 开头，然后是四个 0000 并以 * 结尾，将具有该格式的单元格内容删除到最后一行

```
Sub Macro1()

Range(b1, b65536).Value = ("*,*").clearcontent
Range(c1, c65536).Value = tray(*).clearcontent
Range(f1, f65536).Value = ("*0000*").clearcontent

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T00:15:43.573

下面应该通过遍历 A 列中的每个单元格并检查偏移单元格来完成您所需的任务。我已经复制了您的标准，但我不熟悉“托盘（*）”，我认为您可能希望将该行替换为以下内容：

```
If c.Offset(0, 2).Value Like "Tray*" Then 
```

如果它必须是“托盘”之后的数字，您可能需要研究替代方案，我会留给您来获得正确的标准，但希望我对循环方法有所帮助。

```
Dim sh As Worksheet
Dim rng As Range, c As Range

Set sh = ActiveSheet
Set rng = sh.Range("A:A")

For Each c In rng

    If c.Offset(0, 1).Value Like "*,*" Then
        c.Offset(0, 1).ClearContents
    End If
    If c.Offset(0, 2).Value Like tray(*) Then ' see note on replacing this line
        c.Offset(0, 2).ClearContents
    End If
    If c.Offset(0, 5).Value Like "*0000*" Then
        c.Offset(0, 5).ClearContents
    End If
Next c 
```

# regex - 从数据框中解析出文本和非数字字符

> ID：16067726
> 
> 赞同：-2
> 
> 时间：2013-04-17T18:45:12.940
> 
> 标签：regex, r

我有这个数据框。我想在数据框中只有数字。把它清理掉，这样就没有文本、没有 % 和没有 -。我尝试使用 gsub，但是当我使用 sub 时，它会将我的数据帧转换为字符，并且我无法再次将其转换回数据帧。有什么想法可以摆脱数据框中的字符和破折号吗？我还需要摆脱空行。

```
 V1    V2     V3     V4    V5    V6     V7    V8    V9   V10
1  %user  %sys  %wait  %idle physc %entc  lbusy   app  vcsw phint
2  ----- ----- ------ ------ ----- ----- ------   --- ----- -----
3   36.4  13.1   13.9   36.6  9.26  57.9   28.0 34.96 26049  3492
4   31.1  11.2   12.6   45.1  7.81  48.8   25.9 37.85 17515  2754
5   33.2  13.4   13.2   40.3  8.69  54.3   26.9 35.67 23510  3265
6   34.0  12.8   13.7   39.4  8.77  54.8   26.5 35.19 25151  3305
7   32.7  12.4   13.6   41.3  8.49  53.0   25.9 35.97 25214  3201
8   33.4  13.7   12.5   40.3  8.76  54.7   27.1 36.50 23943  3391
4 %user  %sys  %wait  %idle physc %entc  lbusy   app  vcsw phint
25 ----- ----- ------ ------ ----- ----- ------   --- ----- -----
26  32.9  14.1   11.3   41.7  8.66  54.1   27.9 36.46 22438  3253
27  33.2  13.9   12.0   41.0  8.74  54.6   27.4 37.38 23838  3135
28  30.5  13.3   11.0   45.1  8.13  50.8   26.2 37.42 21912  2752
29  29.9  13.4   11.8   44.8  8.11  50.7   25.5 37.92 23030  2791
30  30.6  12.6   11.1   45.8  8.01  50.1   25.7 37.03 21844  2811
31  32.6  12.2   11.4   43.8  8.30  51.9   28.0 36.84 22227  2723 
```

这不起作用：

gsub("-","",xx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:39:28.530

我会做的是试图强迫一切进入`numeric`：

```
numerics_only <- apply(data, 2, as.numeric) 
```

尝试将文本强制转换为数字将引入`NA`s：

```
Warning messages:
1: In apply(data, 2, as.numeric) : NAs introduced by coercion 
```

如果你愿意，这些你可以压制。然后过滤掉所有有 NA 的行。

```
newdata <- na.omit(numerics_only) 
```

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:50:27.503

只需删除 data.frame 的前两行：

```
data1 <- data1[-(1:2),] 
```

**添加了评论。**您要删除的行似乎总是以“%user”或“-----”开头。你可以像这样删除它们。这是未经测试的代码，因为您没有提供可重现的示例。

```
data1[!(data1[,1]=="%user"|data1[,1]=="-----"),] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:39:32.620

只是为了表明使用 as.numeric() 的方法当然有效：（适用于复制到文本文件的示例）

```
> df <- read.delim("testdf.txt", sep = " ", as.is = T)[,-1]
> str(df)
'data.frame':   16 obs. of  10 variables:
 $ V1 : chr  "%user" "-----" "36.4" "31.1" ...
 $ V2 : chr  "%sys" "-----" "13.1" "11.2" ...
 $ V3 : chr  "%wait" "------" "13.9" "12.6" ...
 $ V4 : chr  "%idle" "------" "36.6" "45.1" ...
 $ V5 : chr  "physc" "-----" "9.26" "7.81" ...
 $ V6 : chr  "%entc" "-----" "57.9" "48.8" ...
 $ V7 : chr  "lbusy" "------" "28.0" "25.9" ...
 $ V8 : chr  "app" "---" "34.96" "37.85" ...
 $ V9 : chr  "vcsw" "-----" "26049" "17515" ...
 $ V10: chr  "phint" "-----" "3492" "2754" ...
> (df <- data.frame(na.omit(apply(df, 2, as.numeric))))
     V1   V2   V3   V4   V5   V6   V7    V8    V9  V10
1  36.4 13.1 13.9 36.6 9.26 57.9 28.0 34.96 26049 3492
2  31.1 11.2 12.6 45.1 7.81 48.8 25.9 37.85 17515 2754
3  33.2 13.4 13.2 40.3 8.69 54.3 26.9 35.67 23510 3265
4  34.0 12.8 13.7 39.4 8.77 54.8 26.5 35.19 25151 3305
5  32.7 12.4 13.6 41.3 8.49 53.0 25.9 35.97 25214 3201
6  33.4 13.7 12.5 40.3 8.76 54.7 27.1 36.50 23943 3391
7  32.9 14.1 11.3 41.7 8.66 54.1 27.9 36.46 22438 3253
8  33.2 13.9 12.0 41.0 8.74 54.6 27.4 37.38 23838 3135
9  30.5 13.3 11.0 45.1 8.13 50.8 26.2 37.42 21912 2752
10 29.9 13.4 11.8 44.8 8.11 50.7 25.5 37.92 23030 2791
11 30.6 12.6 11.1 45.8 8.01 50.1 25.7 37.03 21844 2811
12 32.6 12.2 11.4 43.8 8.30 51.9 28.0 36.84 22227 2723
Warnmeldungen:
1: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
2: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
3: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
4: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
5: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
6: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
7: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
8: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
9: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt
10: In apply(df, 2, as.numeric) : NAs durch Umwandlung erzeugt 
```

# jquery - Nivo Slider Jquery Won't Slide

> ID：16067732
> 
> 赞同：0
> 
> 时间：2013-04-17T18:45:40.500
> 
> 标签：jquery, slider, nivo-slider

[http://www.dentalbenefitprogram.com/home-new.php](http://www.dentalbenefitprogram.com/home-new.php)

I've tried fixing this for hours but my Nivo Slider won't slide.

It looks like it's loading the script--but no motion.

Loader Script:

```
<script type="text/javascript">
        var j = jQuery.noConflict();
            j(document).ready(function () {
                j('#slider').nivoSlider();
            });
</script> 
```

html:

```
<div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">
                <img src="images/Slider1.png" alt="Slider1" width="559" height="358" />
                <img src="images/slider2.png" alt="Slider1" width="559" height="358" />
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:14:34.173

看起来您正在使用的 Nivo Slider 版本使用了已弃用的 .live() 函数。（[在 jQuery 1.9 中删除](http://jquery.com/upgrade-guide/1.9/#live-removed)）

我相信最新版本的 Nivo Slider 已经纠正了这个问题。

# java - 正则表达式匹配组

> ID：16067733
> 
> 赞同：1
> 
> 时间：2013-04-17T18:45:44.763
> 
> 标签：java, regex, string

我对 Java 字符串的 replaceAll 函数有疑问

```
replaceAll("regex", "replacement"); 
```

工作正常，但每当我的“替换”字符串包含“$0”、“$1”等子字符串时，它会通过用相应的匹配组替换这些 $x 来产生问题。

例如

```
input ="NAME";
input.replaceAll("NAME", "HAR$0I"); 
```

将产生一个字符串“HARNAMEI”，因为替换字符串包含“$0”，它将被匹配组“NAME”替换。我怎样才能超越这种性质。我只需要将结果字符串作为“HAR$0I”。

我逃脱了 $ .ie 我将替换字符串转换为“HAR\\$0I”，它工作正常。但是我正在寻找java中的任何方法，它可以为我在正则表达式世界中具有特殊含义的所有此类字符执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:50:31.993

The documentation of [java.lang.String.replaceAll()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29) says:

> Note that backslashes () and dollar signs ($) in the replacement string may cause the results to be different than if it were being treated as a literal replacement string; see Matcher.replaceAll. Use [Matcher.quoteReplacement(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29) to suppress the special meaning of these characters, if desired.

The documentation of [String quoteReplacement(String s)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#quoteReplacement%28java.lang.String%29) says:

> Returns a literal replacement String for the specified String. This method produces a String that will work as a literal replacement s in the appendReplacement method of the Matcher class. The String produced will match the sequence of characters in s treated as a literal sequence. Slashes ('\') and dollar signs ('$') will be given no special meaning.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:50:50.197

`$` in `replacement` is special character allowing you to use groups. To make it literal you will need to escape it with `\$` which needs to be written as `"\\$"`. Same rule apply for `\`, since it is special character used to escape `$`. If you would like to use `\` literal in replacement you would also need to escape it with another `\`, so you would need to write it as `\\\\`.

To simplify this process you can just use `Matcher.quoteReplacement("yourReplacement"))`.

* * *

In case where you don't need to use regular expression you can simplify it even more and use

```
replace("NAME", "HAR$0I") 
```

instead of

```
replaceAll("NAME", Matcher.quoteReplacement("HAR$0I")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:33:42.097

听起来您实际上是在尝试替换原始字符串，而根本不使用正则表达式。

您应该简单地调用[`String.replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence%2C%20java.lang.CharSequence%29)，它会在不使用正则表达式的情况下进行文字替换。

# c++ - qt link error related to Q_OBJECT

> ID：16067734
> 
> 赞同：0
> 
> 时间：2013-04-17T18:45:48.247
> 
> 标签：c++, qt, linker, qmake, qobject

Here is a sample qt code that is copied from qt documentation site.

```
#include <QtCore/QCoreApplication>
#include <QtCore/QFile>
#include <QtCore/QFileInfo>
#include <QtCore/QList>
#include <QtNetwork/QNetworkAccessManager>
#include <QtNetwork/QNetworkRequest>
#include <QtNetwork/QNetworkReply>
#include <QtNetwork/QSslError>
#include <QtCore/QStringList>
#include <QtCore/QTimer>
#include <QtCore/QUrl>
#include <QtCore>

#include <stdio.h>

class QSslError;

QT_USE_NAMESPACE

class DownloadManager: public QObject
{
    Q_OBJECT

    QNetworkAccessManager manager;
    QList<QNetworkReply *> currentDownloads;

public:
    DownloadManager();
    void doDownload(const QUrl & url);
    QString saveFileName(const QUrl & url);
    bool saveToDisk(const QString & fileName, QIODevice *data);
    virtual ~DownloadManager();

public slots:
    void execute();
    void downloadFinished(QNetworkReply *reply);
    void sslErrors(const QList<QSslError> & errors);

};

DownloadManager::~DownloadManager()
{

}

DownloadManager::DownloadManager()
{
    connect(&manager, SIGNAL(finished(QNetworkReply*)), SLOT(downloadFinished(QNetworkReply*)));
}

void DownloadManager::doDownload(const QUrl & url)
{
    QNetworkRequest request(url);
    QNetworkReply* reply = manager.get(request);
    connect(reply, SIGNAL(sslErrors(QList<QSslError>)), SLOT(sslErrors(QList<QSslError>)));
    currentDownloads.append(reply);
}

QString DownloadManager::saveFileName(const QUrl & url)
{
    QString path = url.path();
    QString basename = QFileInfo(path).fileName();

    if ( basename.isEmpty())
        basename = "download";

    if ( QFile::exists(basename))
    {
        int i=0;
        basename += '.';
        while ( QFile::exists(basename + QString::number(i)))
            i++;
        basename += QString::number(i);
    }

    return basename;

}

bool DownloadManager::saveToDisk(const QString &filename, QIODevice *data)
{
    QFile file(filename);
    if ( !file.open(QIODevice::WriteOnly))
    {
        fprintf(stderr, "Could not open %s for writing: %s\n",
                qPrintable(filename),
                qPrintable(file.errorString()));
        return false;
    }

    file.write(data->readAll());
    file.close();

    return true;
}

void DownloadManager::execute()
{
    QStringList args = QCoreApplication::instance()->arguments();
    args.takeFirst();

    if ( args.empty() )
    {
        printf("blah blah");
        QCoreApplication::instance()->quit();
        return;
    }

    foreach(QString arg, args)
    {
        QUrl url = QUrl::fromEncoded(arg.toLocal8Bit());
        doDownload(url);
    }
}

void DownloadManager::sslErrors(const QList<QSslError> &errors)
{
//#ifndef QT_NO_OPENSSL
    foreach(const QSslError & error, errors)
        fprintf(stderr, "SSL error: %s\n", qPrintable(error.errorString()));
//#endif
}

void DownloadManager::downloadFinished(QNetworkReply *reply)
{
    QUrl url = reply->url();
    if ( reply->error() )
    {
        fprintf(stderr, "Download of %s failed: %s\n",
                url.toEncoded().constData(),
                qPrintable(reply->errorString()));
    }
    else
    {
        QString filename = saveFileName(url);
        if ( saveToDisk(filename, reply))
            printf("Download of %s succeeded 9saved to %s\n",
                   url.toEncoded().constData(), qPrintable(filename));
    }

    currentDownloads.removeAll(reply);
    reply->deleteLater();

    if ( currentDownloads.isEmpty())
        QCoreApplication::instance()->quit();
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    DownloadManager manager;
    //QTimer::singleShot(0, &manager, SLOT(execute()));

    return a.exec();
} 
```

the .pro file is

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-04-17T11:17:07
#
#-------------------------------------------------

QT       += core network

QT       -= gui

TARGET = network3
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp 
```

As this is directly copied from the authentic site, it should build properly. But its not building.

The error this is showing..

```
asit@ubuntu:~/qt/network3-build-desktop$ make
g++ -Wl,-O1 -o network3 main.o    -L/usr/lib/i386-linux-gnu -lQtNetwork -lQtCore -lpthread 
main.o: In function `DownloadManager::DownloadManager()':
main.cpp:(.text+0x584): undefined reference to `vtable for DownloadManager'
main.o: In function `DownloadManager::~DownloadManager()':
main.cpp:(.text+0x61a): undefined reference to `vtable for DownloadManager'
collect2: ld returned 1 exit status
make: *** [network3] Error 1 
```

I followed most of the steps in the internet(which includes stackoverflow) to get rid of the error. But it does not work.

Can somebody show me some light in this darkness ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:03:43.410

将您的类接口放在 .h 文件中，问题应该会消失！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T19:12:48.350

您有 2 个选项。

## #1

将此类保留在`main.cpp`文件中，但在其**底部**添加以下内容：

```
#include "main.moc" 
```

## #2

将类的定义移动到头文件中，例如`main.h`，不要忘记在文件中添加以下内容`*.pro`：

```
HEADERS += main.h 
```

**注意：**您不应将整个类放入`main.h`中，而应仅将定义放入：

```
class DownloadManager: public QObject
{
    Q_OBJECT
    ...
}; 
```

并且执行可以留在`main.cpp`.

# ios - iOS TableView 表单导航

> ID：16067738
> 
> 赞同：0
> 
> 时间：2013-04-17T18:45:54.353
> 
> 标签：ios, xcode

使用 Safari 并填写表格时，键盘顶部有三个按钮，标记为“上一个”、“下一个”和“完成”。是否有可以启用这些的键盘设置，或者您是否必须手动创建和编程这些按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:51:20.870

我使用这个库取得了一些成功： [https ://github.com/simonbs/BSKeyboardControls](https://github.com/simonbs/BSKeyboardControls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:49:48.737

ios中没有提供键盘的默认属性。您需要为此添加工具栏。然后在工具栏中添加上一个、下一个或完成的 UIBarButtons。

当键盘出现时，工具栏也会使用一些动画显示在其上方，或者当它隐藏/消失时，您必须使用动画或通过更改其在视图中的位置来隐藏工具栏。

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:02:24.800

[XCDFormInputAccessoryView](https://www.cocoacontrols.com/controls/xcdforminputaccessoryview)是一个包含您需要的功能的附件。它很容易使用。这是键盘的外观
![在此处输入图像描述](https://i.stack.imgur.com/rtfEX.png)

# javascript - 调整滚动元素的大小

> ID：16067742
> 
> 赞同：0
> 
> 时间：2013-04-17T18:46:07.557
> 
> 标签：javascript, jquery

我正在尝试创建一个在滚动时“折叠”的标题。我几乎已经设置了功能，但是它是“倒退的”。

这是一个展示该概念的[JSFiddle 链接。](http://jsfiddle.net/M3MnU/5/)

问题是我希望标题在页面滚动时开始变高并降低高度（而不是相反）。

**jQuery：**

```
$(window).scroll(function() {    

var $myDiv = $('header');   
var st = $(this).scrollTop();

$myDiv.css("height", st ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:54:51.100

尝试这个 -

```
$(window).scroll(function() {    
    var $myDiv = $('header');   
    var st = $(this).height() - $(this).scrollTop();
    $myDiv.css("height", st );
}); 
```

**[小提琴](http://jsfiddle.net/mohammadAdil/M3MnU/7/)**

# cocoa - NSSharingService - 删除 facebook 和 twitter 并添加 Print

> ID：16067744
> 
> 赞同：2
> 
> 时间：2013-04-17T18:46:12.920
> 
> 标签：cocoa, osx-mountain-lion

我刚刚实现了一个共享按钮，它有一个共享菜单：

```
 [_shareButton sendActionOn:NSLeftMouseDownMask]; 
```

并已连接此操作：

```
-(IBAction)share:(id)sender {   
    NSArray *shareArray = @[@"testShare"];
    NSSharingServicePicker *sharingServicePicker = [[NSSharingServicePicker alloc] initWithItems:shareArray];
    sharingServicePicker.delegate = self;

    [sharingServicePicker showRelativeToRect:[sender bounds]
                                      ofView:sender
                               preferredEdge:NSMinYEdge];
} 
```

现在我的问题是，我不希望 Facebook 和 Twitter 成为菜单中的一个选项。我只希望电子邮件和消息可用。另外我想添加“打印”，但不知道我是否可以这样做。

那可能吗？

谢谢

（没有足够的代表点来添加“NSSharingService”作为标签）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T07:19:17.727

通过使用解决它`proposedSharingServices`。

```
- (NSArray *)sharingServicePicker:(NSSharingServicePicker *)sharingServicePicker sharingServicesForItems:(NSArray *)items proposedSharingServices:(NSArray *)proposedServices{

// Find and the services you want
NSMutableArray *newProposedServices = [[NSMutableArray alloc] initWithCapacity:5];
for (NSSharingService *sharingService in proposedServices) {
    if ([[sharingService title] isEqualToString:@"Email"] || [[sharingService title] isEqualToString:@"Message"]) {
        [newProposedServices addObject:sharingService];
    }
}
NSArray *services = newProposedServices;

NSSharingService *customService = [[NSSharingService alloc] initWithTitle:@"Print" image:[NSImage imageNamed:@"PrintImage"] alternateImage:nil handler:^{
    // Do whatever
}];

services = [services arrayByAddingObject:customService];

return services; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T13:59:23.767

将提议的服务与新的命名实例进行比较是可行的。这是我项目中的一个简单的 Swift 代码：

```
let excludedNames = [
    NSSharingServiceNamePostOnFacebook,
    NSSharingServiceNamePostOnTwitter,
]

var excludedServices = [NSSharingService]()

for name in excludedNames {
    if let service = NSSharingService(named: name) {
        excludedServices += [service]
    }
}

return proposedServices.filter {
    !excludedServices.contains($0)
} 
```

无需使用私有`name`财产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-01T18:30:12.983

而不是试图说出您不想要什么，而是简单地返回您想要什么的列表。

```
- (NSArray<NSSharingService *> *)sharingServicePicker:(NSSharingServicePicker *)sharingServicePicker sharingServicesForItems:(NSArray *)items proposedSharingServices:(NSArray<NSSharingService *> *)proposedServices
{
    NSArray *result = @[[NSSharingService sharingServiceNamed:NSSharingServiceNameComposeEmail], [NSSharingService sharingServiceNamed:NSSharingServiceNameComposeMessage]];
    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-15T05:30:56.467

这是一个更好的方法 - 不需要私有 API 访问。

```
NSArray *excludedServices = @[NSSharingServiceNamePostOnFacebook,
                              NSSharingServiceNamePostOnTwitter];

NSMutableArray *includedServices = [[NSMutableArray alloc] init];
for (NSSharingService *service in proposedServices) {
    if ([excludedServices indexOfObject:service] == NSNotFound) {
        [includedServices addObject:service];
    }
}

return includedServices; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-10T13:51:54.420

通过以下方式略有不同的方法`proposedSharingServices`：

```
- (NSArray*)sharingServicePicker:(NSSharingServicePicker *)sharingServicePicker sharingServicesForItems:(NSArray *)items proposedSharingServices:(NSArray *)proposedServices {

    NSArray *excludedServices = @[NSSharingServiceNamePostOnFacebook,
                                  NSSharingServiceNamePostOnTwitter];

    NSArray *sharingServices = [proposedServices filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"NOT (name IN %@)", excludedServices]];

    return sharingServices;
} 
```

# html - DIV 100% 在 DIV 内，保持页脚粘性

> ID：16067746
> 
> 赞同：2
> 
> 时间：2013-04-17T18:46:15.457
> 
> 标签：html, css

**目标：** “page-wrap”（蓝色背景）必须扩展整个页面的高度。

还要将页脚保留在页面底部。页脚不能与侧边栏/内容重叠。

**问题：** 在#container中添加height:100%会导致窗口调整大小时页脚重叠，并在页脚下添加由页眉引起的空白

我尝试了几十种不同的配置，但似乎无法达到我的目标。

[http://jsfiddle.net/fZmut/3/](http://jsfiddle.net/fZmut/3/)

```
<div id="container">    
    <div id="header">header</div>
    <div id="page-wrap">
        <div id="inside">
        <div id="sidebar">
            <p>sidebar</p>
            <p>sidebar</p>
            <p>sidebar</p>
            <p>sidebar</p>
        </div>
        <div id="flow-content"> 
           <p>content</p>
           <p>content</p>
           <p>content</p>
           <p>content</p>
        </div>
        </div>
        <div id="footer">footer</div>
    </div> 
</div> 
```

css

```
html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
    /* height:100%; */ /* causes footer to overlap when window resized, and adds blank space under footer caused by header */
    min-height: 100%;
    position:relative;
    margin: 0px auto 10px;
    background-color: black;
}
#header{
    background-color:green;
    width:100%;
    border-bottom: 2px solid black;    
}
#page-wrap {
    background: blue;
    width: 450px;
    margin: 0px auto 10px;  
    height:100%;    
}
#page-wrap #inside {
    margin: 0px 10px 0px 10px;
    padding-top: 10px;
    padding-bottom: 20px;
}
#sidebar {
    width: 50px;
    float: left;
    padding-left: 0px;
    padding-top: 0px;
    background-color: gray;
}
#flow-content {
    background-color: yellow;
    padding-left: 50px;
    padding-top: 1px;
    padding-right: 15px;    
}
#footer {
    background: #fff;
    border: 1px solid black;
    height: 20px;
    width: 430px;
    margin: 0 10px;

    bottom: 0;
    position: absolute;   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:04:50.353

您可以将 100% 添加到 #container 并解决您提到的 2 个问题：

使标题绝对位置以处理额外的高度问题。（但是您需要在蓝色区域添加额外的填充以适应。

还将页脚显示为表格行及其父表格以解决重叠问题：

```
#header{
    background-color:green;
    width:100%;
    border-bottom: 2px solid black;   

    **position:absolute;**
}
#page-wrap {
    background: blue;
    width: 450px;
    margin: 0px auto 10px;  
    height:100%;  

    **display:table;
    padding-top:20px;**
}

#footer {
    background: #fff;
    border: 1px solid black;
    height: 20px;
    width: 430px;
    margin: 0 10px;

    **display:table-row**
} 
```

[http://jsfiddle.net/fZmut/7/](http://jsfiddle.net/fZmut/7/)

# unit-testing - 尝试在 Zend Framework 控制器中调度时 PHPUnit 停止且没有反馈

> ID：16067747
> 
> 赞同：2
> 
> 时间：2013-04-17T18:46:18.613
> 
> 标签：unit-testing, zend-framework, phpunit

[编辑] 我的测试环境如[http://www.slideshare.net/DragonBe/unit-testing-after-zf-18](http://www.slideshare.net/DragonBe/unit-testing-after-zf-18)所示，并使用来自[https://github.com/DragonBe/zfunittest](https://github.com/DragonBe/zfunittest)的源代码。

当我尝试运行一个简单的调度（“/”）时，我得到以下答案：

```
C:\wamp\www\MyProject\tests>phpunit
PHPUnit 3.7.19 by Sebastian Bergmann.

Configuration read from C:\wamp\www\MyProject\tests\phpunit.xml

.
C:\wamp\www\MyProject\tests> 
```

有没有人知道发生了什么？

phpunit 只是停止并且没有给我任何反馈。

我在 Windows 7x 64、ZF 1.11、PHP 5.4.3 和 PHPunit 3.7 上运行 Wampserver 2.2。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:42:53.050

为了解决这个问题，我尝试重写我的文件。

从我的 TestHelper.php 的开头删除 ob_start()，给了我一个接一个的错误（感谢上帝！），因为我解决了每个错误（并且 phpunit 不再停止执行）：

*   会话必须在任何输出发送到浏览器之前启动
*   没有为此应用程序定义默认模块
*   致命错误：在 ...ErrorController.php 中的非对象上调用成员函数 hasResource()

在其他帖子中进行了一些搜索后，我在 IndexControllerTest.php 的 setUp 方法中尝试了以下操作：

```
public function setUp(){

    $this->bootstrap('session');
    $front = Zend_Controller_Front::getInstance();
    $front->setParam('noErrorHandler', true);
    $this->getFrontController()->setControllerDirectory(APPLICATION_PATH . '/controllers');
    parent::setUp();
} 
```

然后，现在这工作正常。

感谢所有帮助过我的人。

# c++ - 为什么这个双精度值打印为“-0”？

> ID：16067753
> 
> 赞同：23
> 
> 时间：2013-04-17T18:46:50.830
> 
> 标签：c++

```
double a = 0;
double b = -42;
double result = a * b;
cout << result; 
```

结果`a * b`是`-0`，但我意料之中`0`。我哪里做错了？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-17T18:49:59.347

和的位*表示***不同**，但它们的值**相同**，所以会返回。在您的情况下，is ，因为其中一个操作数是负数。`-0.0``0.0`****`-0.0==0.0``true``result``-0.0`****

 ****看这个演示：

```
#include <iostream>
#include <iomanip>

void print_bytes(char const *name, double d)
{
    unsigned char *pd = reinterpret_cast<unsigned char*>(&d);
    std::cout << name << " = " << std::setw(2) << d << " => ";
    for(int i = 0 ; i < sizeof(d) ; ++i)
       std::cout << std::setw(-3) << (unsigned)pd[i] << " ";
    std::cout << std::endl;
}

#define print_bytes_of(a) print_bytes(#a, a)

int main()
{
    double a = 0.0;
    double b = -0.0;

    std::cout << "Value comparison" << std::endl;
    std::cout << "(a==b) => " << (a==b)  <<std::endl;
    std::cout << "(a!=b) => " << (a!=b)  <<std::endl;

    std::cout << "\nValue representation" << std::endl;
    print_bytes_of(a);
    print_bytes_of(b);
} 
```

输出（[demo@ideone](http://ideone.com/0dR33z)）：

```
Value comparison
(a==b) => 1
(a!=b) => 0

Value representation
a =  0 => 0 0 0 0 0 0 0 0 
b = -0 => 0 0 0 0 0 0 0 128 
```

如您所见， 的*最后*一个字节与 .`-0.0`的*最后一个*字节不同`0.0`。

希望有帮助。****

# google-chrome - 如何加快使用画布标签在浏览器插件中显示解码的 h.264 数据包的过程？

> ID：16067758
> 
> 赞同：0
> 
> 时间：2013-04-17T18:47:01.703
> 
> 标签：google-chrome, plugins, browser, h.264, firebreath

我是浏览器插件和 firebreath 的新手。我尝试构建一个解码 h264 数据包的插件，然后将视频帧显示到浏览器 html5 上的画布标签中。但我测试通过我的插件修改 100x100 画布像素，只需 3-4 秒即可更改矩形颜色。

这是我的 html 代码的一部分

```
<canvas id="myCanvas" width="100" height="100"></canvas> 
```

这是我在 body 标记内的 javascript 的一部分

```
<script>
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
var imgData=ctx.createImageData(100,100);
for (var i=0;i<imgData.data.length;i+=4) {
    imgData.data[i+0]=255;
    imgData.data[i+1]=0;
    imgData.data[i+2]=0;
    imgData.data[i+3]=255;
}
ctx.putImageData(imgData,0,0);

function delayFunctionTest() {
    console.log('test\n');
    plugin().changeImagePixel(imgData.data);
    ctx.putImageData(imgData,0,0);
}
setTimeout(function(){delayFunctionTest()}, 2000);
</script> 
```

这是我的pluginapi.cpp

```
void sanypluginAPI::changeImagePixel(FB::JSObjectPtr& imageData)
{
    unsigned long i;

    for(i=0;i<imageData->GetProperty("length").convert_cast<unsigned long>();i+=4){
        imageData->SetProperty(i, 0);
        imageData->SetProperty(i+1, 100);
        imageData->SetProperty(i+2, 155);
        imageData->SetProperty(i+3, 255);
    }
} 
```

上面的代码在控制台上显示单词“test”后需要 3-4 秒来更改矩形颜色。有没有办法加快在浏览器插件中更改画布像素数据的过程？或者我天真的编码有什么问题？还是我的插件无法完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:23:43.753

没有办法直接访问画布像素数据；你最好的选择是（现在不要打我）对它进行base64编码并将其作为字符串传递给javascript，然后对其进行解码。

是的，我知道。我知道。

# jquery - 文档就绪错误

> ID：16067760
> 
> 赞同：1
> 
> 时间：2013-04-17T18:47:10.803
> 
> 标签：jquery, document, ready

我正在尝试运行此代码，但它破坏了我的整个页面。页面标记如下：

```
<script type="text/javascript">
$(document).ready(function() {
  $("#right_column h1").each( function() {  
   var link = $(this).html()+"<br />";
   document.write(link); 
});
});
</script>
<div id="right_column">
<h1>Company Profile</h1>
blablablablabla<br />

<h1>Nulla turpis nunc, dapibus ultricies.</h1>
blablablabla<br />
<h1>Pellentesque habitant morbi tristique proin laoreet.</h1>
blablablabla<br /> 
```

当我尝试运行代码时，它只显示了 3 个 h1 的内容，页面的其余部分（h1 本身）不再加载。当我删除 $(document).ready() 函数并将脚本块放在所有内容之后，它工作得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:48:56.690

`document.write`文档阅读后请勿使用。

如果要附加到页面，请执行以下操作：

```
 $(document).ready(function() {
     $("#right_column h1").each( function() {  
       var link = $(this).html()+"<br />";
       $(document.body).append($(link));   
     });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:54:47.700

我会使用这样的东西：

```
<script type="text/javascript">
$(document).ready(function() {
  $("#right_column h1").each( function() {  
   var link = $(this).html()+"<br />";
   $("#container-element").html('<a href="' + link + '">TEXT-YOU-WANT</a>');
});
});
</script> 
```

# php - Php ZipArchive 的 open/addFile 方法在大数据集上崩溃并出现致命错误

> ID：16067764
> 
> 赞同：1
> 
> 时间：2013-04-17T18:47:24.573
> 
> 标签：php, command-line-interface, ziparchive, supervisord

我们有一个 php（版本 5.3.10）cli 应用程序在 ubuntu 12.04 64 位机器上做一些繁重的工作。该脚本可以运行很长时间，具体取决于它接收到的数据集。这些数据集是包含大量 XML、图像和 MS doc 文件的 zip 文件。

早些时候，这个脚本使用很少的系统命令（shell、perl、java）来完成它的任务。那时我们没有问题。最近，我们将这些脚本升级为使用 RabbitMQ 进行多个并发调用，从基于 cron 的工作转移到 supervisord 以进行自动恢复和监控，并尽可能使用 php 的核心库和函数来避免 shell 调用。

现在，在部署到生产环境后，我们发现脚本在使用 ZipArchive 创建档案的线路上致命地崩溃了。具体来说，仅在其方法“open”和“addFile”上。我们用有问题的数据集对此进行了多次测试，发现这是真正的问题所在。

抛出的错误是“致命错误：超过 300 秒的最大执行时间”。我们知道 php 对执行时间的限制，我们仔细检查了 php.ini 和“/etc/php5/conf.d”文件夹下的所有设置，并且在任何地方我们都将“max_execution_time”设置为 0。我们还检查了脚本的 sapi模式是使用“php_sapi_name()”的“cli”。ini_get("max_execution_time") 也返回 0。

即使脚本由supervisord管理，上述模式和执行限制也是一样的。我们无法找到这个 300 秒的“max_execution_time”限制是从哪里触发的。

还有一件事，当脚本因这条消息而崩溃时，它实际上运行了 600 多秒。我们也觉得，只有当 ZipArchive 本身耗时超过 300 秒时，才会发生这种情况。但我们不确定。发生这种情况时它创建的部分 zip 存档也在 280 MB 和 290 MB 之间。因此，我们从其存储库下载了 php 源代码，并进行了快速 grep 以查看 ZipArchive 的代码库是否有任何此类限制。我们没有找到。

我们现在正尝试用 shell 命令替换 ZipArchive php 代码作为解决方法。我们还没有测试它。我很快就会在这里发布我们的发现。

你们中有人遇到过这样的问题吗？这与 ZipArchive 有关吗？是否建议使用 ZipArchive 创建大型档案？它在崩溃之前创建的部分 zip 文件在 280 MB 和 290 MB 之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:51:42.537

使用 zipArchive 文件 > 500 MB 时，我遇到过同样的问题。在某些情况下，当文件大小相当小但文件数量较多时，它也会起作用。最后，我最终在 linux zip/unzip 命令上创建了一个包装器并使用它们，以便在核心中它基本上只是在操作系统级别上执行 exec()。从来没有遇到过问题。当然，您需要一个 sysad 来设置权限和所有内容，但它是一个稳定的解决方案。

# regex - 如何让 REReplace 成为多行和全局

> ID：16067771
> 
> 赞同：1
> 
> 时间：2013-04-17T18:47:45.447
> 
> 标签：regex, coldfusion, lookahead

我收到以下错误（当我在我的正则表达式中查看后面并向前看时它们不会出现 - 但是即使我在正则表达式的开头执行 (?m) 它也不会执行多行和全局） ：

```
<!---
Detail: Reason: Sequence (?<...) not recognized.

Message: Malformed regular expression ""(.*)?(https?://)?(?<!@)(www.)?(example.com)(?=/)(.+)?"".

RAW_TRACE    coldfusion.runtime.StringFunc$MalformedRegularExpressionException: Malformed regular expression ""(.*)?(https?://)?(?<!@)(www.)?(example.com)(?=/)(.+)?"".

LINE     54
RAW_TRACE    at ...\file.cfm:54) --->

<!--- initialize a variable --->
<cfset stuff='<p><img alt="" src="/images/dsfsdfsd/all7color.jpg"</p>
  <br><a href="http://example.com/balsdjf.cfm">    
  <p><img alt="" src="/images/efwrer3fedf/all7color.jpg"</p>
  <br><a href="http://example.com/balsdjf.cfm">
'>

<cfscript>    
item=REReplace(stuff, 
               '"(.*)?(https?:\/\/)?(?<!\@)(www\.)?(example.com)(?=\/)\/(.+)?"', 
               '"/5"', 
               'ALL');    
</cfscript>    

<cfoutput>
  #item#
</cfoutput> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T20:56:59.067

如前所述，您收到错误是因为您使用的是后视功能，而 CFML 的正则表达式引擎（恐怕是[Apache ORO ）不支持它们。](http://jakarta.apache.org/oro/)

如果你想使用look-behinds，你可以使用Java 的正则表达式引擎。如果有帮助，我已经开始在我的博客上写下[如何通过 CFML 使用 Java 正则表达式。](http://adamcameroncoldfusion.blogspot.co.uk/2013/03/regular-expressions-in-coldfusion-part.html)我还没有讨论过正则表达式模式语法，但我确实涵盖了从 CFML 调用 Java，并且[模式语法在 Oracle 文档中有详细记录](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，并从文章链接到。

@m.buettner 也是完全正确的：“多行”标志“（？m）”，顺便说一句，无论如何都不会影响你的情况，因为它所做的只是改变方式`^`并被`$`解释，但你没有`^`或`$`在你的模式中。

要使用 CFML 正则表达式替换操作来实现“全局”标志，您需要指定`"all"`范围参数，就像您已经拥有的那样。

我认为这回答了您的问题，但我认为您要问的内容/原因可能需要重新考虑。除了不支持后视功能之外，您正在尝试做的事情实际上是什么不起作用？

# macos - 在 OS X 上从源代码构建 wireshark 时出错

> ID：16067774
> 
> 赞同：0
> 
> 时间：2013-04-17T18:47:54.120
> 
> 标签：macos, build, wireshark

我正在尝试在我的 mac 机器上从源代码（ URL：[http](http://anonsvn.wireshark.org/wireshark/trunk) ://anonsvn.wireshark.org/wireshark/trunk ）构建wireshark，但我收到以下错误消息：

```
checking for GTK+ - version >= 2.12.0 and < 3.0... no
*** Could not run GTK+ test program, checking why...
*** The test program failed to compile or link. See the file config.log for the
*** exact error that occured. This usually means GTK+ is incorrectly installed.
configure: error: Neither Qt nor GTK+ 2.12.0 or later are available, so Wireshark can't be compiled 
```

完整的日志可见： [http ://hastebin.com/yebayufoxi.vhdl](http://hastebin.com/yebayufoxi.vhdl)

请建议我，如何在我的 mac 机器上构建 wireshark。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:40:45.407

好吧，我的第一个建议是安装 GTK+ 和其他 Wireshark 需要的库。

安装Wireshark 需要的*所有*库（至少在 Snow Leopard 及更高版本上）的最简单方法`macosx-setup.sh`是在 Wireshark 源代码树的顶级目录中运行 shell 脚本。它将下载并安装各种软件包，包括 GTK+（和 GLib，GTK+ 和 Wireshark 本身都需要）。

默认情况下，该脚本还安装 Wireshark 不需要的库*，*但允许 Wireshark 支持其他功能（解密各种类型的流量、Lua 作为扩展语言、IP 地址的地理定位等）。

# sql - 嵌套 SQL 聚合函数查询以获取每位经理的最低薪酬员工：我的查询不起作用

> ID：16067775
> 
> 赞同：2
> 
> 时间：2013-04-17T18:47:55.667
> 
> 标签：sql, sql-server-2008, subquery

以下是我试图回答的提示：

显示该经理的经理编号和最低薪员工的工资（仅） - 适当标记。不包括经理未知的员工的工资。排除此处的任何组，最低工资低于 1000 美元。首先列出最低工资。

以下是我的 EMPLOYEES 表：

```
create table EMPLOYEES
    (EmpID    char(4)         unique Not null,
     Ename    varchar(10),
     Job      varchar(9),
     MGR      char(4),
     Hiredate date,
     Salary   decimal(7,2),
     Comm     decimal(7,2),
     DeptNo   char(2)         not null,
         Primary key(EmpID),
         Foreign key(DeptNo) REFERENCES DEPARTMENTS(DeptNo));

insert into EMPLOYEES values (7839,'King','President',null,'17-Nov-11',5000,null,10);
insert into EMPLOYEES values (7698,'Blake','Manager',7839,'01-May-11',2850,null,30);
insert into EMPLOYEES values (7782,'Clark','Manager',7839,'02-Jun-11',2450,null,10);
insert into EMPLOYEES values (7566,'Jones','Manager',7839,'02-Apr-11',2975,null,20);
insert into EMPLOYEES values (7654,'Martin','Salesman',7698,'28-Feb-12',1250,1400,30);
insert into EMPLOYEES values (7499,'Allen','Salesman',7698,'20-Feb-11',1600,300,30);
insert into EMPLOYEES values (7844,'Turner','Salesman',7698,'08-Sep-11',1500,0,30);
insert into EMPLOYEES values (7900,'James','Clerk',7698,'22-Feb-12',950,null,30);
insert into EMPLOYEES values (7521,'Ward','Salesman',7698,'22-Feb-12',1250,500,30);
insert into EMPLOYEES values (7902,'Ford','Analyst',7566,'03-Dec-11',3000,null,20);
insert into EMPLOYEES values (7369,'Smith','Clerk',7902,'17-Dec-10',800,null,20);
insert into EMPLOYEES values (7788,'Scott','Analyst',7566,'09-Dec-12',3000,null,20);
insert into EMPLOYEES values (7876,'Adams','Clerk',7788,'12-Jan-10',1100,null,20);
insert into EMPLOYEES values (7934,'Miller','Clerk',7782,'23-Jan-12',1300,null,10); 
```

以下是我的查询：

```
select empid, salary
from employees
where salary in
(select MIN(salary)
from employees
where empid in
(select empid
from EMPLOYEES
where JOB != 'manager'))
order by Salary asc; 
```

结果只是除了经理之外薪水最低的人。我需要每位经理薪酬最低的员工，包括总统领导下薪酬最低的经理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:03:43.547

```
select empid, salary
from employees
where salary in
(select MIN(salary)
from employees
where empid in
(select empid
from EMPLOYEES
where JOB != 'manager'
 group by EmpID
 )
 and
 JOB != 'manager' and MGR is not null
 group by mgr
 )
order by Salary asc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:08:42.007

尝试这个：

```
select MGR, MIN(salary)
from EMPLOYEES e
where Salary >= 1000 and MGR is not null
group by mgr
order by MIN(salary) 
```

也许：

```
select MGR, MIN(salary)
from EMPLOYEES e
where  MGR is not null
group by mgr
having min(salary) >= 1000
order by MIN(salary) 
```

“排除这里的任何团体，最低工资低于 1000 美元”这句话我不清楚。

# c++ - 尝试创建直接 x 11 窗口时出现链接器错误

> ID：16067780
> 
> 赞同：3
> 
> 时间：2013-04-17T18:48:17.823
> 
> 标签：c++, visual-studio-2012, linker, directx, directx-11

我一直在尝试使用 DirectX 11 一段时间，首先我有 Windows 7 的 Visual Studio 2010，当它没有创建 Direct3D 设备时遇到了 SDK 错误。所以我卸载了 SDK 并安装了 Visual Studio 2012，并使用了一套全新的代码来尝试创建窗口。

这是我现在尝试构建项目时遇到的错误：

```
error LNK2019: unresolved external symbol _D3D11CreateDeviceAndSwapChain@48 referenced in function "void __cdecl InitD3D(struct HWND__ *)" (?InitD3D@@YAXPAUHWND__@@@Z) C:\Users\thatguy\Documents\game dev\tutorial work\directx 11 tutorial\directx 11 tutorial\main.obj  directx 11 tutorial 
```

这是我要编译的代码：

```
// include the basic windows header files and the Direct3D header files
#include <windows.h>
#include <windowsx.h>
#include <d3d11.h>
#include <d3dx11.h>
#include <d3dx10.h>

// include the Direct3D Library file
#pragma comment (lib, "d3d11.lib")
#pragma comment (lib, "d3dx11.lib")
#pragma comment (lib, "d3dx10.lib")

// global declarations
IDXGISwapChain *swapchain;             // the pointer to the swap chain interface
ID3D11Device *dev;                     // the pointer to our Direct3D device interface
ID3D11DeviceContext *devcon;           // the pointer to our Direct3D device context

// function prototypes
void InitD3D(HWND hWnd);    // sets up and initializes Direct3D
void CleanD3D(void);        // closes Direct3D and releases memory

// the WindowProc function prototype
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

// the entry point for any Windows program
int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR lpCmdLine,
                   int nCmdShow)
{
    HWND hWnd;
    WNDCLASSEX wc;

    ZeroMemory(&wc, sizeof(WNDCLASSEX));

    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WindowProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = "WindowClass";

    RegisterClassEx(&wc);

    RECT wr = {0, 0, 800, 600};
    AdjustWindowRect(&wr, WS_OVERLAPPEDWINDOW, FALSE);

    hWnd = CreateWindowEx(NULL,
                          "WindowClass",
                          "Our First Direct3D Program",
                          WS_OVERLAPPEDWINDOW,
                          300,
                          300,
                          wr.right - wr.left,
                          wr.bottom - wr.top,
                          NULL,
                          NULL,
                          hInstance,
                          NULL);

    ShowWindow(hWnd, nCmdShow);

    // set up and initialize Direct3D
    InitD3D(hWnd);

    // enter the main loop:

    MSG msg;

    while(TRUE)
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);

            if(msg.message == WM_QUIT)
                break;
        }
        else
        {
            // Run game code here
            // ...
            // ...
        }
    }

    // clean up DirectX and COM
    CleanD3D();

    return msg.wParam;
}

// this is the main message handler for the program
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        case WM_DESTROY:
            {
                PostQuitMessage(0);
                return 0;
            } break;
    }

    return DefWindowProc (hWnd, message, wParam, lParam);
}

// this function initializes and prepares Direct3D for use
void InitD3D(HWND hWnd)
{
    // create a struct to hold information about the swap chain
    DXGI_SWAP_CHAIN_DESC scd;

    // clear out the struct for use
    ZeroMemory(&scd, sizeof(DXGI_SWAP_CHAIN_DESC));

    // fill the swap chain description struct
    scd.BufferCount = 1;                                    // one back buffer
    scd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;     // use 32-bit color
    scd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;      // how swap chain is to be used
    scd.OutputWindow = hWnd;                                // the window to be used
    scd.SampleDesc.Count = 4;                               // how many multisamples
    scd.Windowed = TRUE;                                    // windowed/full-screen mode

    // create a device, device context and swap chain using the information in the scd struct
    D3D11CreateDeviceAndSwapChain(NULL,
                                  D3D_DRIVER_TYPE_HARDWARE,
                                  NULL,
                                  NULL,
                                  NULL,
                                  NULL,
                                  D3D11_SDK_VERSION,
                                  &scd,
                                  &swapchain,
                                  &dev,
                                  NULL,
                                  &devcon);
}

// this is the function that cleans up Direct3D and COM
void CleanD3D(void)
{
    // close and release all existing COM objects
    swapchain->Release();
    dev->Release();
    devcon->Release();
} 
```

我添加了 DirectX 包含目录和 lib x64 和 x86 目录，但它仍然失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T18:53:32.080

您需要在属性 -> 链接器 -> 输入 -> 附加依赖项中添加 D3D11.lib。

你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-02T10:50:29.777

不要再使用 d3dx11.h。在 initd3d 函数之后调用 d3dclean。

# javascript - Node.js 在运行函数时设置“this”

> ID：16067782
> 
> 赞同：1
> 
> 时间：2013-04-17T18:48:26.150
> 
> 标签：javascript, node.js, eventemitter

我正在 Node.js 中创建一个具有导出类函数构造函数的模块。我在该类中添加了 2 个原型函数，但我也有一堆独立的函数。

我在类内部用作事件和回调处理程序的普通函数。我不想将这些函数作为类原型的一部分公开。

在独立函数的链接中，我想引用构建模块的主类，以便我可以发出事件（我使用过`util.inherits(myclassconsructor, EventEmitter)`）。但在我的内在功能`this`上是不正确的。我尝试为名为 self 的模块创建一个全局变量，并将其`self = this`作为构造函数的第一行。

然后我检查了如果我这样做`self.on("message name", function() {console.log("worked")});`，它确实有效。

然后我去了我的主模块，它构造了有问题的模块并创建了上面的模块并绑定到同一个事件。我没有收到模块外的事件...

模块 A

```
var self;
function A() {
  self = this;
  self.on('message name', function() { console.log('test') }); // Firing
  doStuff();
}
function doStuff() {
  api.callApi(callback);
}
function callback() {
  self.emit('message name');
} 
```

模块 B

```
var a = new A();
a.on('message name', domystuff);  // Not firing
function domystuff() {
  console.log('my stuff');
} 
```

发现这个线程似乎是我遇到的问题，但我无法重现结果。[node.js eventEmitter + http.request](https://stackoverflow.com/questions/10271336/node-js-eventemitter-http-request?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:03:43.540

如果我理解正确，您想使用：

```
doStuff.call(this); 
```

反而。该`call`函数将调用它所调用的函数，并设置`this`为第一个参数。

[请参阅Mozilla MDN](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call)上的文档

至于你的回调问题，我可能很想像这样重组你的代码......

```
var inst = this;
api.callApi(function(p1,p2,p3) { inst.emit('message name',p1,p2,p3); }); 
```

但是还有一些更优雅的方法。

# android - Android YouTubePlayer 在播放器顶部带有未经授权的覆盖

> ID：16067783
> 
> 赞同：18
> 
> 时间：2013-04-17T18:48:29.263
> 
> 标签：android, youtube-api, android-framelayout

我在 Fragment 中使用 YouTubePlayer（Android 的 YouTube api）我用 YouTube 播放器为 LinearLayout 充气，以这种方式：

```
fragmentManager = getActivity().getSupportFragmentManager();
                    fragmentTransaction = fragmentManager.beginTransaction();

                    player = new YouTubePlayerSupportFragment();
                    fragmentTransaction.add(R.id.youTubePlayerContainer, player); 
                    fragmentTransaction.commit(); 
```

...youTubePlayerContainer 是膨胀的 LinearLayout

播放器被正确检测到，开始播放并在第二个停止。日志显示以下内容：

```
YouTube video playback stopped due to unauthorized overlay on top of player. 
The YouTubePlayerView is obscured by android.widget.FrameLayout@4110d1f8\. 
YouTubePlayerView is completely covered, with the distance in px between each edge of the obscuring view and the YouTubePlayerView being: left: 484, top: 100, right: 100, bottom: 170.. 
```

这是我的 XML：（其中没有 FrameLayout）

```
 <LinearLayout
        android:id="@+id/curtain"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/withApi"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/youTubePlayerContainer"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                android:layout_gravity="center"
                android:layout_margin="30dp"
                android:layout_weight="1"
                android:orientation="vertical" >
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="3dp"
                android:background="@color/trans_popUp"
                android:padding="3dp" >

                <TextView
                    android:id="@+id/textYouTubeVisor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Title..."
                    android:textColor="@color/white" />
            </LinearLayout>
        </LinearLayout> 
```

我尝试更改边距但没有成功。看了官方文档但是没有成功 表示导致问题的FrameLayout是：android.widget.FrameLayout@4110d1f8 但是有了这样的引用并不能识别是指哪个

对他做这件事的人？

我很感激任何帮助。

问候

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-04-16T13:38:39.643

我今天遇到了同样的问题，对我来说，日志中的错误是：

```
W/YouTubeAndroidPlayerAPI﹕ YouTube video playback stopped due to unauthorized overlay on top of player. The YouTubePlayerView is not contained inside its ancestor com.google.android.youtube.player.YouTubePlayerView{42686bc8 V.E..... ........ 0,0-1200,675 #7f0a00a0 app:id/video_player}. The distances between the ancestor's edges and that of the YouTubePlayerView is: left: -10, top: -10, right: -10, bottom: -10 (these should all be positive). 
```

我通过删除布局中 YouTubePlayerView 中的填充来解决此问题。所以我的布局是这样的：

```
<com.google.android.youtube.player.YouTubePlayerView
    android:id="@+id/video_player"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#000" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-04T09:49:42.060

我有同样的错误。虽然我做了 XML 更改，但我仍然收到错误：

```
 YouTube video playback stopped due to unauthorized overlay on top of player. The YouTubePlayerView is obscured by android.view.View{59fa6ce V.ED..... ........ 0,0-1440,84 #102002f android:id/statusBarBackground}. The view is inside the YouTubePlayerView, with the distance in px between each edge of the obscuring view and the YouTubePlayerView being: left: 0, top: 0, right: 0, bottom: 2308.. 
```

**在我设置全屏后，它工作得很好**

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

希望它会帮助别人。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-08T20:29:42.873

问题仅在于布局，`YouTube Player`不允许任何视图停留在其上，既不可见也不透明。

为了使它在您的设备中可见，请在开发人员选项中启用布局边界。（使用`paddings`和警告`margins`）

请尝试在您的布局上注释掉其他视图的代码并再次测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-21T15:34:51.480

Android API 的演示代码在 Fragment 演示中使用了这种布局，也许这可以激发灵感。请参阅此页面：[https ://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

  <TextView
      android:layout_width="match_parent"
      android:layout_height="0dp"
      android:layout_weight="1"
      android:textAppearance="@android:style/TextAppearance.Small"
      android:gravity="center"
      android:text="@string/playerfragment_text"/>

  <fragment
      android:name="com.google.android.youtube.player.YouTubePlayerFragment"
      android:id="@+id/youtube_fragment"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-11T03:24:41.113

Youtube 播放器找出一些覆盖它的视图。只需为它们删除那些视图或 setVisible(View.GONE) 即可。请查看此链接以获取更多 [信息](https://stackoverflow.com/questions/14014087/views-overlayed-above-youtubeplayerfragment-or-youtubeplayerview-in-the-layout-h/21692394#21692394)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-28T17:16:05.427

您必须删除视频视图中的任何填充属性。

错误的：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical" >

   <com.google.android.youtube.player.YouTubePlayerView
    android:id="@+id/youtube_player"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    **android:padding="10dp"** />

    </LinearLayout> 
```

对：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <com.google.android.youtube.player.YouTubePlayerView
    android:id="@+id/youtube_player"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     />

    </LinearLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-14T06:32:38.793

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:id="@+id/id_base_layout"
android:fitsSystemWindows="true"
android:layout_height="match_parent"
android:background="#000000">

<com.google.android.youtube.player.YouTubePlayerView
    android:id="@+id/youtube_view"
    android:layout_width="match_parent"
    android:layout_centerInParent="true"
    android:layout_height="wrap_content"  /> 
```

1.添加fitSystemWindows。2.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-21T12:59:14.520

我在 youtubeplayer 中播放视频时遇到了同样的问题

当我添加此行时...它对我有用

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# java - 无法在 Android 中关闭进度对话框

> ID：16067784
> 
> 赞同：0
> 
> 时间：2013-04-17T18:48:30.040
> 
> 标签：java, android, mobile, dialog, progress

我想在 android 中创建一个进度对话框，保持打开 2 秒钟然后关闭它。

下面是我写的代码：

```
package com.example.proressdialogtest;

import android.app.activity;
import android.app.ProgressDialog;
import android.os.bundle;

public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState); 
        ProgressDialog pg = new ProgressDialog(MainActivity.this, 4);

        pg.show(MainActivity.this, null, "Searching...", false);

        try {
            Thread.sleep(2000);
        } catch (Exception e) {
            e.printStackTrace();
        }  

        pg.dismiss();
} 
```

当我在我的设备上运行代码时，ProgressDialog 会打开，然后保持打开状态，2 秒后它不会关闭。我究竟做错了什么？

* * *

根据下面的答案。我分别在 doInBackground 方法之前和之后添加了 onPreExecute() 和 onPostExecute() 方法。

这是这两种方法的代码。

```
ProgressDialog pd;

public void onPreExceute() {
    pd = new ProgressDialog(MainActivity.this);
    pd.show(MainActivity.this, "", "Searching...", false);
}

public void onPostExecute() {
    pd.dismiss();
} 
```

问题仍然存在。进度条不会关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:56:53.430

您正在调用`sleep()`. `UI Thread`不要这样做。使用`runOnUiThread`或`AsyncTask`

[无痛穿线](http://android-developers.blogspot.com/2009/05/painless-threading.html)

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

我会使用一个`AsyncTask`. 您将启动`ProgressDialog`in`onPreExecute()`然后将其关闭`onPostExecute()`。它是一个`UI`元素，所以使用它`doInBackground()`会给你错误

**[这个 SO answer 有一个很好的使用例子](https://stackoverflow.com/questions/7713222/android-progress-dialog/7713264#7713264)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:59:49.370

**编辑：**

使用此代码

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        final ProgressDialog pg ;

      pg =  ProgressDialog.show(MainActivity.this, null, "Searching...", false);

        Thread timer=new Thread(){
            public void run()
            {
                try {
                    sleep(2000);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                finally{
                     pg.dismiss();
                }
            }

        };
        timer.start();
}
} 
```

* * *

您正在通过调用暂停 UI 线程

```
 Thread.sleep(2000); 
```

因为 Thread.sleep(x) 会让当前线程休眠 x 毫秒

这是坏事。

地方

我不知道为什么

finally 块中的 pg.dismiss() 以确保关闭进度对话框。

> 而且您的代码也不会运行，因为您错过了

```
super.onCreate(savedInstanceState); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:24:11.087

以下代码将为您工作，

```
 new AsyncTask<Integer, Integer, Boolean>()
             {
                 ProgressDialog progressDialog = null;

                 @Override
                 protected void onPreExecute()
                 {                         
                     progressDialog = ProgressDialog.show(MainActivity.this, "",
                             "Loading...");
                 }

                 @Override
                 protected Boolean doInBackground(Integer... params)
                 {
                     if (params == null)
                     {
                         return false;
                     }
                     try
                     {

                         Thread.sleep(2000);

                     }
                     catch (Exception e)
                     {

                         return false;
                     }

                     return true;
                 }

                 @Override
                 protected void onPostExecute(Boolean result)
                 {
                     progressDialog.dismiss();                        

                 }
             }.execute(); 
```

# excel - 如何遍历 bean 的属性以填充电子表格的单元格

> ID：16067785
> 
> 赞同：0
> 
> 时间：2013-04-17T18:48:32.827
> 
> 标签：excel, apache-poi, xpages

我正在使用 POI 从我的托管 bean 生成 Excel 电子表格。这是我的学生豆：

```
package edu.phc.students.model;

public class Student {
private String m_firstName; 
private String m_lastName; 
private String m_id;

public Student() {} 

public Student(
String firstName, 
String lastName, 
String id,
) 
{ 
        m_firstName=firstName; 
        m_lastName=lastName;   
        m_id=id;

} 

public String getid() { 
        return m_id; 
} 

public void setid(String newid) { 
        m_id=newid; 
} 

public String getFirstname() { 
        return m_firstName; 
} 

public void setFirstname(String newFirstName) { 
        m_firstName=newFirstName; 
} 

public String getLastname() { 
        return m_lastName; 
} 

public void setLastname(String newLastname) { 
        m_lastName=newLastname; 
}    

} 
```

这是最终代码 (SSJS) 的一小部分。

```
var students:java.util.List = studentlist.getStudents();
var iterator:java.util.Iterator = students.iterator();
var count = 0;
while (iterator.hasNext()) {
        var student:edu.phc.students.model.Student = iterator.next();
        count++;
        var row:HSSFRow = sheet1.createRow(count);
        for( f = 0 ; f <= fieldList.length-1 ; f++){//column List
            // output student's data into Excel row 
            row.createCell((java.lang.Integer)(f)).setCellValue(student.getid());               
        }
} 
```

这完美地工作。它使用列名生成电子表格，并将学生 ID 插入每个单元格（对于迭代器返回的每一行）。

但是，我想遍历学生 bean 可用的属性 - ID、姓氏、名字等，并填充电子表格的单元格。我怎么做？我可以通过索引引用学生 bean 的属性吗？

谢谢，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:20:17.533

你可以使用*java.lang.reflection*。这是学生班级中所有字段的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

   <xp:repeat id="repeat1" rows="30" var="field">
      <xp:this.value><![CDATA[#{javascript: 
         var student = new edu.phc.students.model.Student();
         student.getClass().getDeclaredFields()}]]>
      </xp:this.value>
      <xp:label value="#{field.name}" id="labelFieldName" /><xp:br />
   </xp:repeat>
</xp:view> 
```

输出如下所示：

```
m_firstName
m_lastName
m_id 
```

请查看[文档以了解其他选项](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/package-summary.html)。

**编辑：**

此示例迭代方法并返回所有返回字符串的方法的当前值：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

<xp:repeat id="repeat1" rows="30" var="method">
    <xp:this.value><![CDATA[#{javascript: 
        var student = new edu.phc.students.model.Student();
        student.setid("A");
        student.setLastname("Meiser");
        student.setFirstname("Hans");
        student.getClass().getDeclaredMethods()}]]>
    </xp:this.value>
    <xp:label id="label1">
        <xp:this.value>
            <![CDATA[#{javascript:
                if( method.getReturnType().getSimpleName()  == 'String' )
                    return method.invoke(student, null );}]]>
        </xp:this.value>
    </xp:label>
    <xp:br />
</xp:repeat>

</xp:view> 
```

这将创建以下输出：

```
A

Hans

Meiser 
```

# java - SimpleDateFormat 不起作用

> ID：16067790
> 
> 赞同：1
> 
> 时间：2013-04-17T18:48:53.477
> 
> 标签：java

我正在尝试使用 SimpleDateFormat 做一些事情，但是在阅读了 Javadoc 之后，我变得更加困惑。我想要两种方法，一种用于时区，一种用于当前时间和日期。我的格式应该是这样的：

```
Time Zone: GMT +01:00
Time and Date: Wednesday 17/04/2013, 20:38:34 
```

我有一次从互联网上获取代码。效果很好：

```
 private String getFormattedTime() {
        Calendar cal = Calendar.getInstance();
        SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");        

        return sdf.format(cal.getTime());

    } 
```

这将输出：20:41:34

现在对于我的其他格式，我尝试了这样的事情（我还没有完全完成）：

```
private static String getFormattedDate() {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("EEEEEEEEE DD/MM/yyyy, HH:mm:ss");      

    return sdf.format(cal);

}

private static String getTimeZone() {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("z");       

    return sdf.format(cal.getTimeZone());

} 
```

如果您运行此代码，您会在第一`return`行得到 IllegalArgumentException。

Javadocs 似乎没有给出任何关于如何使用它的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T18:54:36.960

SimpleDateFormat 作用于日期，而不是日历。要进行转换，请使用 .getTime()，因此您的代码应为：

```
private static String getFormattedDate() {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("EEEEEEEEE dd:MM:yyyy, HH:mm:ss");      

    return sdf.format(cal.getTime());

}

private static String getTimeZone() {
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("z");       

    return sdf.format(cal.getTime());

} 
```

然而，使用[joda](http://joda-time.sf.net)可能是更好的方法，因为我可以写一篇博士论文。

# java - LWJGL 按住一个键

> ID：16067791
> 
> 赞同：1
> 
> 时间：2013-04-17T18:48:53.623
> 
> 标签：java, keyboard, lwjgl, keylistener

所以基本上我想做的是使用 LWJGL 现在让我的玩家在游戏中移动。玩家当前正在移动，但在您按住按钮时他并没有继续移动..

公共无效更新（）{同时（Keyboard.next（））{

```
 if(Keyboard.getEventKey() == Keyboard.KEY_RIGHT) {
            if(Keyboard.getEventKeyState()){
                System.out.println("KEY DOWN!");
                player.playerMovingRight();
            }
            else{
                System.out.println("KEY RELEASED!");
            }
        }
    } 
```

我尝试使用一段时间（Keyboard.getEventKeyState（）），但它只会让游戏崩溃，并且它不会识别我是否释放密钥。

那么，如果您按住按钮而不是快速按键来移动，我怎样才能让我的播放器继续移动。如果玩家同时按住 2 个按钮，我将如何使其工作？

更新代码：

```
public void update(){
    while(Keyboard.next()){

        //If key escape is down we shut the application down
        if(Keyboard.isKeyDown(Keyboard.KEY_ESCAPE)){
            System.exit(0);
        }

        //If key up was pressed move up
        else if(Keyboard.getEventKey() == Keyboard.KEY_UP) {
            if(Keyboard.getEventKeyState()){
                System.out.println("KEY DOWN!");
                moveUp = true;
            }
            else{
                System.out.println("KEY RELEASED!");
                moveUp = false;
            }
        }
        //If key down was pressed move down
        else if(Keyboard.getEventKey() == Keyboard.KEY_DOWN) {
            if(Keyboard.getEventKeyState()){
                System.out.println("KEY DOWN!");
                moveDown = true;
            }
            else{
                System.out.println("KEY RELEASED!");
                moveDown = false;
            }
        }

        if(moveUp == true){
            player.playerMovingUp();
        }
        if(moveDown == true){
            player.playerMovingDown();
        }
    } 
```

我的代码仍然存在同样的问题，我开始认为它的 Keyboard.next() 阻止了我按住按钮并且玩家仍然移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:03:56.333

您需要的是一个布尔标志，当按下按钮时触发，释放按钮时不触发。然后将该标志添加到移动代码之前的 if 语句中。像这样：

```
if(Keyboard.getEventKey() == Keyboard.KEY_RIGHT) {
        if(Keyboard.getEventKeyState()){
            System.out.println("KEY DOWN!");
            flag = true;       
        }
        else{
            System.out.println("KEY RELEASED!");
            flag = false;
        }
    }
}

//player movement code

if(flag) {
    player.playerMovingRight();
} 
```

使用多个键的方法是使用布尔触发器数组并重复检查每个键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T21:53:15.913

虽然上面的答案会起作用，但 LWJGL 有能力检测一个键是否被按住。但默认情况下未启用它，因此您需要启用它。为此，只需在输入初始化的某处将此标志设置为 true。

```
Keyboard.enableRepeatEvents(true); 
```

现在在您的事件循环中，只需检查您的键以查看它是否是重复的（按住键）。

```
if(Keyboard.isRepeatEvent()) 
```

这是一个小示例，用于查看如何检查不同键状态的键。

```
while(Keyboard.next())
    {
        if(Keyboard.getEventKey() == Keyboard.KEY_A)
            if(Keyboard.getEventKeyState())
            {
                if(Keyboard.isRepeatEvent())
                    // Key held down
                else
                    // Key pressed
            }
            else
                // Key released
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-09T15:19:58.643

`while(Keyboard.next())`应该与事件一起使用。

在您的情况下，您不想只在触发事件时做某事。但是您想确定每秒多次，是否按下某个键。如果是，您想做某事（例如移动）。

因此，这是使用该[`Keyboard.isKeyDown()`](http://www.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#isKeyDown%28int%29)功能的最佳解决方案。一个小例子：

```
if (Keyboard.isKeyDown(Keyboard.KEY_UP)) {
    System.out.println("pressing KEY_UP");
}
if (Keyboard.isKeyDown(Keyboard.KEY_DOWN)) {
    System.out.println("pressing KEY_DOWN");
}
if (Keyboard.isKeyDown(Keyboard.KEY_LEFT)) {
    System.out.println("pressing KEY_LEFT");
}
if (Keyboard.isKeyDown(Keyboard.KEY_RIGHT)) {
    System.out.println("pressing KEY_RIGHT");
} 
```

此外，可以在[这里](http://ninjacave.com/lwjglbasics2)找到一个很好的教程。

# php - 在javascript倒数计时器后更改图像一次

> ID：16067795
> 
> 赞同：0
> 
> 时间：2013-04-17T18:49:01.890
> 
> 标签：php, javascript, function

我是 Javascripting 的新手——事实上，我不是已经做了很多年了。

我试图在javascript倒计时结束时使用一个函数来更改和图像。在倒计时脚本中，它说我可以指定一个函数来完成调用。

```
onComplete      : changeImage, 
```

所以，在javascript倒数计时器的底部，我写了这个：

```
function changeImage(a) {document.getElementById("img").src=a.src;}
</script> 
```

我要更改的图像在脚本上方，写在这里：

`<a href="index.php"><img id="img" align="middle" height="450" src="images/samandwill.gif" class="logo" /></a>`

我想将图像 src 更改为“images/samandwill2.gif”

我怎样才能做到这一点？- 我正在使用 Dreamweaver 和 PHP。

这可能很简单，但我会非常感谢一些帮助。我能找到的只是 onclick 函数的答案，这不是我想要的。

我真的很感激一些帮助！

谢谢！

将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:57:35.353

[JSBin 示例](http://jsbin.com/ukarem/1/edit)

用于`setTimeout`在设定时间后触发您的代码：

```
setTimeout(function(){
  document.getElementById('img').src="http://placehold.it/200x200";
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:07:16.883

看起来您没有将任何内容传递给 changeImage 函数。此外，在您的更改图像功能中，您似乎期待一个图像元素？

这是一个例子：

[http://jsfiddle.net/C4CFa/](http://jsfiddle.net/C4CFa/)

```
setInterval( function(){changeImage('http://boardingarea.com/blogs/deltapoints/files/2012/07/test.jpg')},3000);

changeImage = function(a) {
    current_image = document.getElementById("img");
    current_image.src = a;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:09:39.767

首先尝试第 1 步：

```
onComplete      : changeImage(), 
```

第2步：

```
function changeImage() {document.getElementById("img").src='images/samandwill2.gif';}
</script> 
```

# angularjs - ng-repeat 和来自服务的数据 - 可能的参考问题？

> ID：16067796
> 
> 赞同：0
> 
> 时间：2013-04-17T18:49:04.083
> 
> 标签：angularjs

我对 AngularJS 很陌生。这是我第一次尝试任何类型的 JS，所以如果我屠杀了任何东西，我深表歉意。

这是我正在尝试做的事情的简要概述。

用户输入要搜索的术语，我从 Twitter 获取信息。推文以 ng-repeat 显示（让我的问题更令人沮丧）。用户检查他/她想要添加到“购物车”的推文。选择到我的服务数组（购物车服务中的“shoppingCart”）的 Ipush 推文。

然后我单击“添加到购物车”以转移到一个新页面 (results.html)，我想在其中显示用户选择的内容。

注意：出于我们的目的，我已经跳过了这个并对结果进行了硬编码。

这就是一切都崩溃的地方。我可以控制台打印数组以确保下一个控制器接收到服务，但我无法让 ng-repeat 工作。

我完全不知道我在这里搞砸了什么。我对 Angular 还是很陌生，所以很可能我犯了一个愚蠢的错误。我尝试通读文档并查看了 egghead.io 视频。不幸的是，我不能把两个和两个放在一起。

这是带有硬编码数组的服务：

```
myApp.service('cart', function Cart($rootScope) {
var self = this;
var shoppingCart = [{
    "created_at": "Wed, 17 Apr 2013 17:52:42 +0000",
    "from_user": "LopezCarlosB",
    "from_user_id": 244705286,
    "from_user_id_str": "244705286",
    "from_user_name": "carlos lopez",
    "geo": null,
    "id": 324581196224938000,
    "id_str": "324581196224937984",
    "iso_language_code": "en",
    "metadata": {
        "result_type": "recent"
    },

    "source": "",
    "text": "@Medicencaballo @ponnyloca AHHH AHH LESLEEEEEY ASD SIGYGIS",
    "to_user": "Medicencaballo",
    "to_user_id": 202598647,
    "to_user_id_str": "202598647",
    "to_user_name": "Axel Manrique",
    "in_reply_to_status_id": 324580938027765760,
    "in_reply_to_status_id_str": "324580938027765760"
}, {
    "created_at": "Wed, 17 Apr 2013 17:52:35 +0000",
    "from_user": "WhatNowTweeting",
    "from_user_id": 383266399,
    "from_user_id_str": "383266399",
    "from_user_name": "Herman",
    "geo": null,
    "id": 324581166764130300,
    "id_str": "324581166764130305",
    "iso_language_code": "en",
    "metadata": {
        "result_type": "recent"
    },

    "source": "",
    "text": "Life on the spectrum: 5 books about autism and Asperger's - Mother Nature Network #autism #asperger #pddnos #pdd #asd"
}, {
    "created_at": "Wed, 17 Apr 2013 17:52:32 +0000",
    "from_user": "Elchinitooooo",
    "from_user_id": 903231720,
    "from_user_id_str": "903231720",
    "from_user_name": "ChinoCochino..^^",
    "geo": null,
    "id": 324581154667782140,
    "id_str": "324581154667782147",
    "iso_language_code": "es",
    "metadata": {
        "result_type": "recent"
    },

    "source": "",
    "text": "Mañana viene mi amor :3 asd asd"
}];

self.add = function (item) {
    shoppingCart.push(item);

}

self.count = function () {
    console.log(shoppingCart);
    return shoppingCart.length;
}

self.log = function () {
    return shoppingCart;
}
}); 
```

这是下面视图的控制器：

```
myApp.controller('ResultsCtrl',

function ResultsCtrl($scope, $resource, cart) {

$scope.cart = cart;
$scope.shoppingCart = cart.shoppingCart;

}); 
```

这是该视图的 html：

```
<div>
<table>{{cart.log()}}
    <br>
    <ul>
        <li ng-repeat="item in shoppingCart">{{item.text}}</li>
    </ul>
</table>
</div> 
```

我在 Firebug 中没有收到任何错误，所以我想我没有正确引用数组，但一直无法弄清楚如何。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:54:49.480

看起来您正在尝试使用以下行直接从控制器访问 shoppingCart var

```
$scope.shoppingCart = cart.shoppingCart; 
```

但是，shoppingCart 没有附加到 self/this，从而有效地将其设为私有，因此我认为这种访问方式是不可能的。您的服务中的 log 方法返回 shoppingCart 变量，所以如果您将上面的行更改为：

```
$scope.shoppingCart = cart.log(); 
```

我不确定这是否可以使用该`.service`方法，因此如果它失败了，您可能需要考虑使用 using `.factory`，它的作用基本相同，`.service`但允许您返回一个将成为服务的对象，而不是`this`.

# ios - 将 segue 从 tableview 中的一个单元格推送到两页

> ID：16067799
> 
> 赞同：0
> 
> 时间：2013-04-17T18:49:29.470
> 
> 标签：ios, objective-c, uitableview, segue

我创建了一个页面 tableViewController ，我想什么时候点击单元格进入有条件的两个页面（例如，当 index.row < 5 进入带有推送样式转换的 firstViewController 时，当 index.row >= 5 进入另一个 TableViewController 有推动风格过渡）

我不知道这件事。请告诉我更多相关信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:57:19.317

你需要`UIViewController`继续`UIViewController`。

而不是给 segue on`UITableViewCell`给 segue on`UIViewController`

**在检查器中为这个 segue 提供适当的标识符。**

现在您可以根据需要使用此 segue。

因此，在您的情况下，您可以编写如下代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     if(<CONDITION>)
     {
          [self performSegueWithIdentifier:@"identifier_1" sender:self];
     }
     else 
     {
          [self performSegueWithIdentifier:@"identifier_1" sender:self];
     }
} 
```

这不是您的确切代码，因此请根据您的需要对其进行编辑。

一切顺利.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:57:51.117

你只需要`Push segues`在你的`Storyboard`, 每个中创建两个来链接你想要导航到的两个控制器（不要忘记为两者分配一个正确的标识符）。然后，在您的 tableview 单元格单击事件中，您将拥有类似这样的内容。-

```
if (index.row < 5) {
    [self performSegueWithIdentifier:kSegueIdentifier1 sender:nil];
} else {
    [self performSegueWithIdentifier:kSegueIdentifier2 sender:nil];
} 
```

# com - 我们可以在 Mac OS 上使用 MS office com 组件吗？

> ID：16067801
> 
> 赞同：0
> 
> 时间：2013-04-17T18:49:30.373
> 
> 标签：com, ms-office

我们可以在 Windows 上使用 OLE 自动化（Com 编程）阅读和处理 Office 文档（Word、Powerpoint）。但是在 Mac 上，我们必须使用 AppleScript，如果不启动软件并打开文档，它就无法工作。我们可以在 Mac 上为 MS Office 产品使用类似的 COM 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-12T07:22:15.790

经过这么多 RnD 之后，我开始知道在一台 Mac 上自动化 MS Office 的唯一方法是 AppleScript。

# android - Android Webview 内容在切换其可见性时不适合屏幕

> ID：16067802
> 
> 赞同：1
> 
> 时间：2013-04-17T18:49:32.240
> 
> 标签：android, android-listview, android-webview, meta-tags

我有一个列表视图，其中每一行都有一个 textview 和 webview。通过使用 viewholder 对象，我在滚动时重新使用了该行。最初，数据未加载到 webview 中，并且其可见性状态设置为 Gone。在点击 ListView 项目时，我正在使用 webview.loadDataWithBaseURL() 方法加载 webview 数据并将其可见性状态设置为 Visible。然后，如果您再次点击同一个项目，它的状态将设置为 Gone。现在的问题是，当我将 webview 可见性重置为 Visible 并再次加载数据时，webview 内容不适合屏幕。我在 webview 内容中设置了以下元标记。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, target-densityDpi=device-dpi> 
```

另外，我设置了以下方法。

webview.getSettings().setUseWideViewPort(true); webview.getSettings().setLoadWithOverviewMode(true);
webview.setInitialScale(1);

当我最初在项目点击时加载 webview 数据时，此设置工作正常。但是下次当我再次切换可见性并再次加载数据时，上述视口设置不起作用。

任何机构都可以提供同样的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T05:53:54.333

你的问题不是很清楚，但如果我猜你的意思是 webview 没有扩展到适合整个屏幕？请发布您的代码以支持您的问题。

要使 webview 扩展到整个屏幕，请在活动布局 xml 中添加 webview，并确保将 layout_width 和 layout_height 设置为 fill_parent。这是一个简单的例子：

> ```
>  <LinearLayout 
>   xmlns:android="http://schemas.android.com/apk/res/android"
>   android:orientation="vertical"
>   android:layout_width="fill_parent"
>   android:layout_height="fill_parent">
>   <WebView  
>       android:id="@+id/webview"
>       android:layout_width="fill_parent" 
>       android:layout_height="fill_parent"/>
>   </LinearLayout> 
> ```

# ios - 推送 JASidePanels 时右侧导航项消失

> ID：16067803
> 
> 赞同：1
> 
> 时间：2013-04-17T18:49:35.300
> 
> 标签：ios, objective-c

我正在使用[JASidePanels](https://github.com/gotosleep/JASidePanels)作为子模块，我想知道是否有办法让导航栏上的正确图标始终可见并正常工作。

现在我有我的中心面板，它是一个表格视图，左右面板都可以工作。

但是当我单击一个表格视图单元格时，它会在其上推送一个视图控制器，但 JASidePanel 控件丢失了......我无法将它滑到左侧以查看我的右侧面板。

是的，我知道左键将替换为后退键。这个对我来说很好，我只关心右边的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:54:01.117

UINavigationController 呈现 UIViewController（和子类）。每个 UIViewController 都与一个 UINavigationItem 相关联，该 UINavigationItem 包含有关工具栏项和导航栏项的信息。此信息仅在特定视图控制器出现在 UINavigationController 中时使用。如果要将 viewController 1 中的按钮放入 viewController 2 中，则需要将按钮分配给 viewController 2 的 UINavigationItem 实例。注意，如果按钮操作的 action:target 接收器不是 viewController 1，则可以轻松创建viewController2 的 viewDidLoad 方法中 viewController2 的 UINavigationItem 实例在 viewController1 中具有相同特征的 UIBarButtonItem 实例。

# vb.net - “&”之后的 Vb.net 表达式

> ID：16067805
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:49:39.897
> 
> 标签：vb.net, expression

我正在尝试将文本写入文件，并且除了一个错误之外都拥有它。它说“预期表达”

这是代码：

```
 Using writer As StreamWriter = New StreamWriter(filepath)
            writer.Write("[HealthBarSettings]" & vbNewLine &  _
"MaxHealthTicks = 50" & vbNewLine &  _
"MaxHealthMicroTicks = 100" & vbNewLine &  _
"DefaultHealthPerMicroTick = 50" & vbNewLine &  _
"DefaultHealthPerTick = 200" & vbNewLine &  _
"DefaultHealthPerMegaTick = 1000" & vbNewLine &  _
 & vbNewLine &  _
"TickAlpha = 200" & vbNewLine &  _
"MicroTickAlpha = 140" & vbNewLine &  _
"MicroTickHeight = 0.5" & vbNewLine &  _
"MegaTickAlpha = 255" & vbNewLine &  _
"TickThickness = 1.0" & vbNewLine &  _
"MicroTickThickness = 1.0" & vbNewLine &  _
"MegaTickThickness = 2.0" & vbNewLine &  _
 & vbNewLine &  _
"UseCompression = 1" & vbNewLine &  _
"GoTransparent = 1" & vbNewLine &  _ 
```

错误出现在第 8 行，如果它显示“& vbNewLine & _”，而该行没有其他内容，则第一个 & 带有下划线。像这样的其他行没有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:55:33.053

我真的很讨厌字符串连接。只是为了避免它，我会写

```
Dim sb = new StringBuilder(680)
sb.AppendLine("[HealthBarSettings]")
sb.AppendLine("MaxHealthTicks = 50")
sb.AppendLine("MaxHealthMicroTicks = 100")
sb.AppendLine("DefaultHealthPerMicroTick = 50")
sb.AppendLine("DefaultHealthPerTick = 200")
sb.AppendLine("DefaultHealthPerMegaTick = 1000")
sb.AppendLine()
sb.AppendLine("TickAlpha = 200")
sb.AppendLine("MicroTickAlpha = 140")
sb.AppendLine("MicroTickHeight = 0.5")
sb.AppendLine("MegaTickAlpha = 255")
sb.AppendLine("TickThickness = 1.0")
sb.AppendLine("MicroTickThickness = 1.0")
sb.AppendLine("MegaTickThickness = 2.0")
sb.AppendLine()
sb.AppendLine("UseCompression = 1")
sb.AppendLine("GoTransparent = 1")
writer.Write(sb.ToString()) 
```

我创建了一个初始容量为 680 个字符的 StringBuilder。（假设 17 行，每行 40 个字符）。[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)有一个内部缓冲区，用于存储字符。此缓冲区以 16 个字符的容量开始。您可以调用 StringBuilder 的构造函数说您需要 1K 缓冲区。这将为请求的大小创建内部缓冲区，如果它足够大，当添加更多字符时，框架不需要执行调整大小操作，超过缓冲区当前大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:50:50.760

Change line 8 to:

```
"DefaultHealthPerMegaTick = 1000" & vbNewLine  _

 & vbNewLine &  _ 
```

The problem was the extra &. You don't need a concatenation operator when using _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:59:54.517

您已使用并签名两次

```
1\. "MaxHealthTicks = 50" & vbNewLine &  _
2\. "MaxHealthMicroTicks = 100" & vbNewLine &  _
3\. "DefaultHealthPerMicroTick = 50" & vbNewLine &  _
4\. "DefaultHealthPerTick = 200" & vbNewLine &  _
6\. "DefaultHealthPerMegaTick = 1000" & vbNewLine &  _
7\. & vbNewLine &  _
8\. "TickAlpha = 200" & vbNewLine &  _
9\. "MicroTickAlpha = 140" & vbNewLine &  _
10\. "MicroTickHeight = 0.5" & vbNewLine &  _
11\. "MegaTickAlpha = 255" & vbNewLine &  _
12\. "TickThickness = 1.0" & vbNewLine &  _
13\. "MicroTickThickness = 1.0" & vbNewLine &  _
14\. "MegaTickThickness = 2.0" & vbNewLine &  _
15\.  & vbNewLine &  _
16\. "UseCompression = 1" & vbNewLine &  _
17\. "GoTransparent = 1" & vbNewLine &  _ 
```

请参阅我提到的最后一行...第 6 行有“&”，第 7 行也有“&”，所以它使用了两次，并且在 14 和 15 上也没有行，如果 17 没有行你的最后一行，则不需要使用

```
&  _ 
```

# ruby-on-rails - How can I disable "no existing match" when using the gem "rails3-jquery-autocomplete"?

> ID：16067809
> 
> 赞同：3
> 
> 时间：2013-04-17T18:49:55.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, autocomplete

I'm using the gem called **rails3-jquery-autocomplete**
[https://github.com/crowdint/rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete)

It used not to show the message "no existing match" when there's no matched record.
However, now it always pops up the message showing `"no existing match"`

How can I disable this??

My view

```
<%= autocomplete_field_tag 'search', params[:search], autocomplete_community_title_communities_path, :class =>'input', :placeholder => 'keyword' %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-17T14:19:30.943

试试下面的脚本

$('autocomplete_element_selector').on('autocompleteresponse', function(event, ui) { var content; if (((content = ui.content) != null ? content[0].id.length : void 0) = == 0) { $(this).autocomplete('close'); } });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T11:59:27.270

如果 Rails 向客户端返回一个空哈希（public/javascript/autocomplete-rails.js 中的第 59 行），则此 Gem 提供的 jQuery 脚本会推送此消息：

```
...

if(arguments[0].length == 0) {
  arguments[0] = []
  arguments[0][0] = { id: "", label: "no existing match" }
}
jQuery(arguments[0]).each(function(i, el) {
  var obj = {};
  obj[el.id] = el;
  jQuery(e).data(obj);
});
response.apply(null, arguments);

... 
```

我不知道你到底想做什么，但你可以，例如，从你的 autocomplete-rails.js 中删除下一个块（或更改标签值）

```
if(arguments[0].length == 0) {
  arguments[0] = []
  arguments[0][0] = { id: "", label: "no existing match" }
} 
```

该文件应位于您的 public/javascript 目录中。如果这个文件在你的情况下是压缩的，你可以通过官方文档中的这个命令解压缩它，然后修复它：

> rails 生成自动完成：未压缩

# html - CSS 和内部列

> ID：16067811
> 
> 赞同：1
> 
> 时间：2013-04-17T18:50:00.043
> 
> 标签：html, css

我有这个 CSS 样式表。

```
.visitscroll  {float:left;  width:750px; }
.visitscroll .interiorleft {width: 375px;  float: left;}
.visitscroll .interiorright {width: 375px; float: left; }
.visitscroll .fullwidth {float:left; width:750px; } 
```

左列和右列并正确对齐，但我想在左右列下方创建一个 div，即全宽。当我将某些内容放入全角 div 时，它会将页面变成一列。

所以我想要的是这样的：

```
A     |   B
      C 
```

我得到的是：

```
A
B
C 
```

我已经确认我的 div 结束标签是正确的，并且一直试图弄清楚这一点。

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:53:45.960

如果你想要一个元素：

**不要在浮动元素旁边冒泡**

设置`clear: left`，`clear: right`或`clear: both`取决于您要忽略的浮动。

**跨越其容器的宽度**

放`float: none`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:59:59.443

您没有清除浮动，您可以通过在包含 div 的父项上说`clear:both;`或使用来执行此操作`overflow:hidden;`

[http://jsfiddle.net/x26Mw/](http://jsfiddle.net/x26Mw/)

# jenkins - 如何为 Jenkins 构建发布 UNC 路径的超链接？

> ID：16067814
> 
> 赞同：0
> 
> 时间：2013-04-17T18:50:07.643
> 
> 标签：jenkins, jenkins-plugins

当构建成功完成时，我希望在该构建页面上显示一个 UNC 路径，任何人都可以单击该路径并将该文件夹打开到该构建的安装程序。

例如，我在构建运行的描述中出现了以下 UNC 路径。（它是一个插件）如果您想查看该文件夹，您必须复制它，打开资源管理器，将其粘贴... 只需单击它会很好，甚至 ctrl 单击它也可以。示例路径包括以下。

\\foo\bar\Departmental\IT\QA\team\program-a\Builds\81

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:41:11.167

您可以使用[https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin)在 jenkins 页面上显示一个用于构建的 html 页面，在其中放置您想要的任何链接。如果有办法从网页使用 UNC，您将能够使用它。

# c# - 无数据返回 如果选择查询的搜索条件仅包含数字并且查询表的 nVarChar 列

> ID：16067828
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:50:54.523
> 
> 标签：c#, windows-mobile, sql-server-ce

我有 windows 应用程序来同步存储在 SQL Server CE 数据库中的 windows mobile 应用程序的数据。我在同步连接到 Windows 7 32 位 PC 的移动设备时遇到了一些问题。

同步时，Windows 应用程序会将 SQL Server CE 数据库从移动设备复制到 PC，并与本地复制的数据库同步数据，然后复制回移动设备。如果完成同步的 PC 是 windows 7 32 位，那么在使用同步数据库时，我会在 Windows Mobile 应用程序中遇到以下问题。

如果有一个包含列的表`nVarChar`并对该列进行搜索查询，如果搜索条件包含带单引号的数字以将值表示为字符串（在以下示例`strProductID`中为`nVarchar`列） ，则不会返回任何数据

例如：-

```
SELECT * FROM Products WHERE strProductID = '2345' 
```

但是不带引号的数字或带引号的字母可以正常工作

例如：-

```
SELECT * FROM Products WHERE strProductID = 2345 
```

或者

```
SELECT * FROM Products WHERE strProductID = 'asdasd' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:41:35.193

正如 Aaron Bertrand 在评论中所说，如果您使用参数，您的查询将工作得更好。

`strProductID`NVARCHAR 字段有多大？50？我将假设为 50，因此我可以编写您的参数化查询：

```
private DataTable Get(string strProductID, string connStr) {
  var table = new DataTable();
  string cmdText = "SELECT * FROM Products WHERE strProductID=@strProductID";
  using (var cmd = new SqlCeCommand(cmdText, new SqlCeConnection(connStr))) {
    cmd.Parameters.Add("@strProductID", SqlDbType.NVarChar, 50).Value = strProductID;
    cmd.Connection.Open();
    table.Load(cmd.ExecuteReader());
    cmd.Connection.Close();
  }
  return table;
} 
```

但是，Microsoft 已经承认，断开连接的数据集在 Windows Mobile 设备中不是很可靠！[请参阅演练：创建偶尔连接的智能设备应用程序](http://msdn.microsoft.com/en-us/library/cc488004%28v=vs.90%29)中的注释。

# java - JRE 到期日期

> ID：16067829
> 
> 赞同：11
> 
> 时间：2013-04-17T18:51:00.743
> 
> 标签：java

Java Runtime Environment 版本 7u21 的发行说明中设置为 07/18/2013 的 JRE Expiration Date 是什么？

[JRE 7u21 发行说明](http://www.oracle.com/technetwork/java/javase/7u21-relnotes-1932873.html)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T18:11:01.403

这是 Java 认为自己过时的日期。一旦过期，无论是否发布了新的 Java 版本，它都会开始提示用户升级 Java。看来此日期设置为下一个预定发布 + 1 个月。

注意：Java 还会*打电话回家*并下载列出最新版本 Java 的文件。如果 Oracle 提前发布了带外补丁，他们可以立即在所有 Java 客户端上触发*update now消息。*

* * *

来自[Java 7 更新 10 的发行说明](http://www.oracle.com/technetwork/java/javase/7u10-relnotes-1880995.html)

> JRE 依靠与 Oracle 服务器的定期检查来确定它（JRE）是否仍然被认为是最新的，具有所有可用的安全修复程序（高于安全基线）。过去，如果 JRE 无法联系 Oracle 服务器，它会继续表现得好像它仍然是关于安全性的最新版本，无限期。
> 
> 为了避免这个问题，JDK 7u10 中添加了一种不依赖外部通信的辅助机制。从此版本开始，所有 JRE 都将包含一个硬编码的到期日期。到期日期计算为在下一个重要补丁更新的预定发布之后结束。
> 
> 这意味着长时间无法联系 Oracle 服务器的 JRE 现在将在一段合理的时间后开始提供额外的保护，并且不会继续表现得好像它们仍然是最新的安全修复程序一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T18:54:53.883

请参阅 Google 的“Java 生命终结”：

*   [终身支持](http://www.oracle.com/us/support/lifetime-support/index.html)
*   [Oracle Java SE 支持路线图](http://www.oracle.com/technetwork/java/eol-135779.html)

# c# - 外部和静态的顺序重要吗？

> ID：16067831
> 
> 赞同：4
> 
> 时间：2013-04-17T18:51:06.910
> 
> 标签：c#, static-methods, .net-1.0

比较两个文件（旧的和新的），我看到：

```
private extern static void SipShowIM(uint dwFlag); 
```

...在旧文件中，并且：

```
private static extern void SipShowIM(uint dwFlag); 
```

...在新文件中。

为什么他们变了我不知道；哪个先出现重要吗，外部还是静态？

## 更新

Resharper 必须这样做，因为我知道我没有（直接）这样做，但这是旧版本之间的另一个区别：

```
public volatile static bool ProcessCommands = true; 
```

...和新的：

```
public static volatile bool ProcessCommands = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:54:30.117

不，这些关键字的顺序无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T19:34:49.257

不，根据 C# 规范，所有方法修饰符排序都是等价的。4.0 版，B.2.7 节，第 493 页：

> 方法修饰符：
>       方法修饰符
>       方法修饰符方法修饰符
> 
> 方法修饰符：
>       新的
>       公共
>       保护
>       内部
>       私有
>       静态
>       虚拟
>       密封
>       覆盖
>       抽象
>       外部

这显然不是一个静态构造函数，但在第 497 页（仍然是 B.2.7 节），两个命令都被显式调用：

> static-constructor-modifiers:
>       extern [opt]静态
>       静态 extern [opt]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T19:11:55.130

*好吧*，我不相信这两种用法之间有区别。我只考虑*[MSDN](http://msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.110%29.aspx)*页面的代码，我尝试了两种方式（`extern static`和`static extern`），两种代码都生成相同的[IL](http://en.wikipedia.org/wiki/Intermediate_language)代码。

```
.method public hidebysig static int32  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       41 (0x29)
  .maxstack  4
  .locals init ([0] string myString,
           [1] int32 CS$1$0000)
  IL_0000:  nop
  IL_0001:  ldstr      "Enter your message: "
  IL_0006:  call       void [mscorlib]System.Console::Write(string)
  IL_000b:  nop
  IL_000c:  call       string [mscorlib]System.Console::ReadLine()
  IL_0011:  stloc.0
  IL_0012:  ldc.i4.0
  IL_0013:  call       native int [mscorlib]System.IntPtr::op_Explicit(int32)
  IL_0018:  ldloc.0
  IL_0019:  ldstr      "My Message Box"
  IL_001e:  ldc.i4.0
  IL_001f:  call       int32 ProgramConsole.Program::MessageBox(native int,
                                                                string,
                                                                string,
                                                                int32)
  IL_0024:  stloc.1
  IL_0025:  br.s       IL_0027
  IL_0027:  ldloc.1
  IL_0028:  ret
} // end of method Program::Main 
```

所以，我的钱是**NO**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T19:15:10.737

方法修饰符的顺序无关紧要。然而，它通常写为`static extern`.

StyleCop 之类的工具抱怨这一点：`SA1206: The 'static' keyword must come before the 'other' keyword in the element declaration.` 这只是编码风格的问题。

# mediawiki - 您如何获取包含可用格式链接的文章？

> ID：16067832
> 
> 赞同：2
> 
> 时间：2013-04-17T18:51:07.470
> 
> 标签：mediawiki, mediawiki-api

我有一个 mediawiki 的内部部署。在一些文章中是外部链接。我有另一个页面对 wiki 进行 API 调用以将文章拉入另一个网站。当我拉入这些文章时，链接没有被正确拉入。这是一个例子。

维基文章：

`Use [http://example.com THIS LINK] to contact the vendor.`

接口网址：

`https://mysite.com/mediawiki/api.php?action=query&format=json&prop=extracts&titles=Vendor`

API 结果：

`Use THIS LINK to contact the vendor.`

请注意，链接已完全剥离。我还尝试将我自己的 html 添加到 mediawiki 中以获取链接，但 mediawiki 转义了 < 和 > 符号，因此 API 看到了“<”和“>”。mediawiki 也显示 html 而不是实际链接。

如何进行 mediawiki API 调用并保留链接信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:45:29.940

为此，您可以`action=parse`改用。查询将如下所示：

```
https://mysite.com/mediawiki/api.php?action=parse&format=json&page=Vendor&prop=text 
```

# ms-access - MS Access 使表单上的导航选项不互斥

> ID：16067840
> 
> 赞同：0
> 
> 时间：2013-04-17T18:51:40.977
> 
> 标签：ms-access, ms-access-2010

我正在创建一个导航表单，其中一些导航按钮只是将过滤器应用于子表单。问题是现在每个选项都是排他的，即我可以按分支或职位选择员工。如何使选项不是排他性的，以便我可以一次应用多个过滤器？

编辑只是添加。我对VBA一无所知，所以我试图使用图形界面和宏来做到这一点。如果无法使用这些工具完成，那很好，我会找到不同的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:29:41.710

If you *replace* the `.Filter` property on a form (or subform) with a new value then the previous filter goes away. If you *append* a new clause onto an existing `.Filter` string, e.g. by changing...

```
[Branch]="Main" 
```

...to...

```
[Branch]="Main" AND [Title]="Manager" 
```

...then the new filter applies both criteria.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:42:26.260

该解决方案需要适量的 VBA（我想不出不需要它的解决方案）。将用户的选择存储在模块级变量中，然后使用主子`ApplyFilters`例程应用您的过滤器。

例如，给每个复选框一个 AfterUpdate 事件。本次活动将做两件事：

1.  使用用户的选择设置*模块*级变量
2.  启动*ApplyFilters*子

由于所有用户的选择现在都存储在模块级变量中，*ApplyFilters*可以看到它们。它会：

1.  获取所有模块级变量并创建一个主字符串（提示，如果您需要占位符，请使用`1=1`）
2.  应用该字符串作为子表单的过滤器。

其他注意事项：从主窗体访问子窗体的控件很简单。要将子表单的过滤器更改为字符串 NewFilter，请尝试：

```
 Forms!MyMainFormsName!MySubFormsName.Filter=NewFilter 
```

# python - 这个 if/else 条件代码有什么问题？

> ID：16067844
> 
> 赞同：0
> 
> 时间：2013-04-17T18:52:01.770
> 
> 标签：python

```
def who_are_you(tall,ginger,wears lenses):
    if tall and ginger and wears glasses:
        return "student 1"
    if tall and not ginger and not wears lenses:
        return " student 2"
    if ginger and wears lenses and not tall:
        return "student 3"
    if wears lenses and not tall and not ginger:
        return "student 4"
    if tall and wears lenses and not ginger:
        return "student 5"
    else:
        return "bossman"    

#This is just for you to see what happens when the function is called
print who_are_you(True, True, True) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:53:05.720

你的问题是变量名`wears lenses`

应该是`wears_lenses`或者别的。您不能在变量名中使用空格。

此外，您对变量名称有疑问：`wears glasses`应该是`wears_lenses`

# youtube - YouTube API“q”参数损坏？

> ID：16067853
> 
> 赞同：1
> 
> 时间：2013-04-17T18:52:49.457
> 
> 标签：youtube, youtube-api

根据 YouTube API 文档，“q”参数在元数据中搜索视频。这包括标题、描述和关键字。

然而，就在最近（据我所知，从昨天开始）“q”参数只搜索标题。

这是 NBA 的供稿：http: [//gdata.youtube.com/feeds/api/users/nba/uploads](http://gdata.youtube.com/feeds/api/users/nba/uploads)

有一个标题为“当晚最佳 5 场比赛：4 月 16 日”的视频，其描述为“查看周二 NBA 最佳比赛”。

如果我搜索“星期二”，视频不会出现：[http ://gdata.youtube.com/feeds/api/users/nba/uploads?q=Tuesday](http://gdata.youtube.com/feeds/api/users/nba/uploads?q=Tuesday)

如果我搜索“Top”，它会：[http ://gdata.youtube.com/feeds/api/users/nba/uploads?q=top](http://gdata.youtube.com/feeds/api/users/nba/uploads?q=top)

我相信谷歌会监控这个论坛。出了什么问题？我真的需要搜索我的应用程序的所有字段。在过去的一两年里我一直在使用它，但它突然坏掉了！请提供指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:17:23.290

这似乎确实被打破了。我知道 YouTube 不再公开公开标签（关键字），现在将它们称为标签，所以我猜这个[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#qsp)很旧。我建议您切换到使用[V3 数据 API 中的此查询](https://developers.google.com/youtube/v3/docs/search/list)来获得您想要的结果。

# unity3d - 在 mac os 上统一使用 Xbox 360 控制器

> ID：16067854
> 
> 赞同：1
> 
> 时间：2013-04-17T18:52:53.480
> 
> 标签：unity3d, xinput

SO的好人，

我目前正在使用 xbox 360（有线或非有线）控制器在 Unity3D 中开发游戏。我正在寻找一些“最佳实践”之王来实现对游戏的 Windows 和 MacOS 支持。

**步骤1**

我的第一种方法是创建一个完整的 InputManager.asset 映射到 4 个控制器，基于：

[http://wiki.unity3d.com/index.php/Xbox360Controller](http://wiki.unity3d.com/index.php/Xbox360Controller) [http://wiki.etc.cmu.edu/unity3d/index.php/Joystick/Controller](http://wiki.etc.cmu.edu/unity3d/index.php/Joystick/Controller) （和其他一些......）

并使用 Input.getAxis()。

**问题**

我遇到的主要问题是当您断开并重新连接控制器时：Axis ID 发生了变化……而且很难找到将控制器重新分配给游戏中正确的玩家实例。Unity 提供给我的唯一信息是 Input.GetJoystickNames() 以随时了解连接了多少个控制器......但它不足以知道谁被插入到哪里......

**第2步**

然后我听说了 XInput dll：

[http://forum.unity3d.com/threads/37542-XInput-NET-full-support-for-Xbox-360-Controller-(Windows)](http://forum.unity3d.com/threads/37542-XInput-NET-full-support-for-Xbox-360-Controller-(Windows))

那将解决有关使用控制器的所有问题...

**问题**

...但遗憾的是它在 macOS 中不起作用...

有什么解决办法吗？谢谢 ：）

# php - Bluehost MySQLi 配置问题

> ID：16067857
> 
> 赞同：0
> 
> 时间：2013-04-17T18:53:01.357
> 
> 标签：php, mysql, database, mysqli

我有以下脚本，它在我的本地机器（XAMPP v3.1.0 php v.5.4.7）上运行良好，但是当我上传到我的网络服务器（Bluehost php v5.4.13）时它不起作用。

我的表格很好，我提供的数据是有效的。

```
// Connect to DB
$mysqli = new mysqli("localhost","{USER_NAME}","{PASSWORD}","{TABLE_NAME}");
// Escaped post variables before SQL lookup
    // $email is valid -  "john@john.com";
$escapedEmail = $mysqli->real_escape_string($email);
$retrievedPassword = "";
$getUserPasswordQuery = "Select * FROM User Where Email='{$escapedEmail}'";
$loggedInUser = null;

if ($getUserPasswordResult = $mysqli->query($getUserPasswordQuery);)
{
    echo "GOT HERE";
    // Query was successful
}
$getUserPasswordResult->free(); // Line 66 (See below) 
```

我**没有**收到 echo 语句，但我**在**日志中收到以下内容（如果查询不起作用，这是可以理解的）。

```
Call to a member function free() on a non-object in .../script.php on line 66 
```

任何人都可以阐明这一点以及为什么它可以在本地服务器上工作而不是在野外。另外，我这样做是正确的方式还是有更防弹的范例？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:55:56.733

您在`free`测试之外调用以查看该变量是否定义正确：

```
if ($getUserPasswordResult = $mysqli->query($getUserPasswordQuery);)
{
    echo "GOT HERE";
    // Query was successful
    $getUserPasswordResult->free(); // Line 66 (See below)
} 
```

# c# - PictureBox 和 Dispose

> ID：16067859
> 
> 赞同：4
> 
> 时间：2013-04-17T18:53:05.563
> 
> 标签：c#

如果图像文件已经存在（覆盖它），而 a`PictureBox`显示相同，我必须删除它。但是，如果我尝试删除它被阻止的文件`PictureBox`。所以我写了以下代码：

```
if (File.Exists(file))
{
   Image _tmp = (Image)current_pic.Image.Clone();                 
   current_pic.Image.Dispose();
   current_pic.Dispose();
   File.Delete(path);
   current_pic.Image = _tmp;
   current_pic.Image.Save(file, ImageFormat.Jpeg);
}
else
   current_pic.Image.Save(file, ImageFormat.Jpeg); 
```

并且文件系统上的图像被删除，`pic.Dispose()`但图像没有更多地显示在`PictureBox`. 也许`Dispose()`方法无效`PictureBox`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:12:04.053

您可以在不锁定的情况下将图像读入图片框中，如下所示

```
Image img;
string file = @"d:\a.jpg";
using (Bitmap bmp = new Bitmap(file))
{
   img = new Bitmap(bmp);
   current_pic.Image = img;
}
if (File.Exists(file))
{
    File.Delete(file);
    current_pic.Image.Save(file, ImageFormat.Jpeg);
}
else
    current_pic.Image.Save(file, ImageFormat.Jpeg); 
```

我已经更新了代码以支持保存操作。

而之前的代码即使在链接图像后也支持删除。流已关闭，并且在保存时导致 GDI+ 错误。

新更新的代码满足您的所有要求，如下所示

*   允许在图像链接时删除文件
*   使用 Picturebox 控件中的 Image 属性保存图像

# linux - 64 位 Linux 上的三星智能电视

> ID：16067863
> 
> 赞同：3
> 
> 时间：2013-04-17T18:53:14.610
> 
> 标签：linux, eclipse, sdk, 32bit-64bit, samsung-smart-tv

我知道在 Smart TV SDK 的规范中，它需要 32 位系统。但是，是否有可能以某种方式在 64 位 Linux 上运行 SDK？

静默运行适应的 eclipse 失败，没有输出也没有创建窗口。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T08:03:52.333

对的，这是可能的！您只需在 64 位系统中使用 Java RE 32 位“欺骗”Eclipse。这样做的方法是更改​​文件“eclipse.ini”并添加：-vm /opt/sun-jdk-1.6.0.02/bin/java（将路径更改为 java 32 位）。看看这个页面：[http](http://wiki.eclipse.org/Eclipse.ini#-vm_value:_Linux_Example) ://wiki.eclipse.org/Eclipse.ini#-vm_value:_Linux_Example 。

我希望这个对你有用！：）

# ios - 通过兄弟子视图传播触摸事件？

> ID：16067865
> 
> 赞同：5
> 
> 时间：2013-04-17T18:53:17.643
> 
> 标签：ios, objective-c, touch, uitouch

我有一堆子视图，它们都有用户交互部分（儿童）和全屏。问题是，如果我触及堆栈顶部的非交互式部分，它不会将该触摸传播到堆栈的其余部分。我的设置：

视图A --view B（全屏容器，本身不交互但有交互子视图）----view B1（交互）----view B2（交互）--view C（与B相同）----视图C1（交互）----视图C2（交互）

B 和 C 都是全屏，但 B1/B2/C1/C2 只是屏幕的一小部分。

```
[a addSubview:b];
[a addSubview:c]; 
```

如果我触摸 C1/C2 之外的任何东西，我希望触摸事件然后检查它是否击中 B（B1/B2）内部的任何地方，但它只是返回到 A，然后返回到 A 的父级。是否有可能做到这一点？如果我在 C 上设置 userInteractionEnabled NO 而在 C1/C2 上设置 YES，它也不会得到任何对内部调用的调用，尽管在这种情况下，B 会按预期进行操作。

编辑：最终手动遍历视图堆栈以仅检查某些子视图而不是所有子视图：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    if (self != self.topCustomViewsContainer) {     
        for (UIView *v in self.createdSubviews) {
            CGPoint newPoint = point;
            newPoint.x -= v.frame.origin.x;
            newPoint.y -= v.frame.origin.y;
            UIView *hit = [v hitTest:newPoint withEvent:event];
            if (hit)
                return hit;
        }
        return nil;

    }

    return [super hitTest:point withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T19:20:21.710

一种可能性是覆盖

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event 
```

视图 B 中的方法。只有当 B 的子视图被命中时，才能使其返回。试试这样：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
  UIView *hitView = [super hitTest:point withEvent:event];
  if (hitView == self) {
    return nil;
  } else {
    return hitView;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:19:18.867

事件将视图层次结构从子级传播到父级（如您所见）。所以我想到了两种可能性：

让 C 成为 B 的子节点。它们的大小相同，而 C 显然已经有了透明背景，所以将其添加到 B 并使用`[viewB bringSubviewToFront:viewC]`使其首先接收触摸。它没有捕获的任何东西都将传递给它下面的视图，然后传递给父 A。

或者：手动捕获触摸，并强制它们查看 B（C 的兄弟）。这涉及在您的视图控制器类中实现它

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [viewC touchesBegan:touches withEvent:event];
    // Note this could be in sibling B or in parent A, depending on which
    // has a reference to the 'viewC' object
} 
```

# xpages - xe:breadCrumb 在没有树节点的情况下使用？

> ID：16067866
> 
> 赞同：0
> 
> 时间：2013-04-17T18:53:18.953
> 
> 标签：xpages

在我们公司采用 Domino 8.5.3 UP1 之前，我有一个带有页面 > 子页面结构的 XPages 应用程序，该结构由 URL 参数定义。既然我们确实有了 UP1，我就有点羡慕地盯着 xe:breadCrumbs 控件。不熟悉 xe:pageTreeNodes（由于我的 XPages 扩展库的副本，我知道它至少存在），我想我会“给朋友打电话”。我在这个话题上找不到太多。我的问题有两个：

1.  *应该*如何实现页面树结构以正确使用 xe:breadCrumbs 控件？
2.  使用我当前的设置（根页面是标准页面参数，子页面是第二个自定义参数），我如何轻松地将我的设置与 xe:breadCrumbs 一起使用？

在某些时候，我非常愿意减少我的损失，只是在一个 div 中构建一个带有一些计算 xp:link 控件的准面包屑元素。既然机会出现了，我想我会检查一下，看看是否有更好的选择。我知道这有点含糊，但我认为这个想法是在这里传达的。

[编辑：]我可能应该问这是否是更直接和专门用于 xe:navigator 的东西。如果是这样的话，那我可能会更难过一点，但会少一点困惑。[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:51:36.833

树节点很好。这是一个小例子。先决条件：

*   所有文件都在同一个数据库中。不是什么大问题，只需相应地更新 href 参数。
*   文档包含父文档（所有级别）的 ID 和标签（主题、标题）字段
*   视图“id”仅包含按文档 ID 排序的一列以打开它（Domino 语法） - 另请参阅：[本机 Domino 链接和 XPage](https://stackoverflow.com/questions/10802986/native-domino-links-and-xpages/11537085#11537085)
*   dds 是当前文档的数据源
*   ddsParent 是父文档的数据源

    ```
    <xe:breadCrumbs id="breadCrumbs1">

    <xe:this.treeNodes>

        <xe:basicLeafNode label="Top document: ${dds.fld_TopLabel}">
            href="/id/${dds.fld_TopID}">
        </xe:basicLeafNode>
        <xe:basicLeafNode label="Sub1: ${ddsParent.fld_Label}">
            <xe:this.href><![CDATA[#{javascript:"/0/" + ddsPonuka.getDocument().getUniversalID()}]]></xe:this.href>
        </xe:basicLeafNode>
        <xe:basicLeafNode label="Current level: ${dds.fld_Label}">
        </xe:basicLeafNode>
    </xe:this.treeNodes> 
    ```

您必须为每个 XPage 更改它。当然，您可以将其设为带有参数的自定义控件，但您最终会在每个 XPage 上使用大致相同结构的参数提供的自定义控件。

最好的选择是以某种方式使托管 bean 可配置并返回 ExtLib 树对象。然后您的来源将减少为：

```
<xe:beanTreeNode nodeBean="my.bean.Class"></xe:beanTreeNode> 
```

最好的例子是与 ExtLib 发行版捆绑在一起的 XPagesExt.nsf。

# c# - 从Windows批处理文件执行git命令，C#

> ID：16067867
> 
> 赞同：1
> 
> 时间：2013-04-17T18:53:24.533
> 
> 标签：c#, git, batch-file

我正在尝试编写小型 git 客户端，我只想使用 git pull 和 git clone 命令。

我正在这样做：

```
Process p = new Process();
            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardOutput = true;
            p.StartInfo.FileName = "path to my.bat";
            p.Start();
            string output = p.StandardOutput.ReadToEnd();
            p.WaitForExit(); 
```

bat 文件工作正常并执行简单的命令，但我想从该 bat 文件执行 git 命令并且 git 无法识别。

有什么正确的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-24T14:34:12.973

在批处理文件中添加一行

```
path 
```

并检查输出是否包含包含 git.exe 文件的目录。如果没有，请指定 git.exe 文件的完整路径。

# android - android.gesture.GestureOverlayView 不显示在图形布局上

> ID：16067868
> 
> 赞同：1
> 
> 时间：2013-04-17T18:53:26.767
> 
> 标签：android, android-layout, scrollview

以下是我的 xml 代码的一部分：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/table_detail"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp"
    tools:context=".SignCheckFragment" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <android.gesture.GestureOverlayView
            android:id="@+id/gestureOverlayView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="16dp" >
        </android.gesture.GestureOverlayView>          

        <TextView
            android:id="@+id/label_subtotal"
            style="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/subtotal" /> 
```

下图是对应的图形布局。问题是没有`GestureOverlayView`

![在此处输入图像描述](https://i.stack.imgur.com/aORgS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T08:50:11.337

我知道这是一个老问题，但这里有一个答案。

问题是，在您的 XML 代码中，您的 gestureOverlayView android:layout_width="match_parent" android:layout_height="wrap_content" 具有以下尺寸

这意味着在您指定某些内容之前，高度将为 0dp，即使它会一直延伸到整个视图 - 宽度与父级匹配。

使其出现的方法是添加一些文本或一些其他内容。

或者给 GestureOverlayView 一些高度和背景颜色，它应该变得可见。

# sql - 输出有问题。错误精确提取小于返回的行？

> ID：16067879
> 
> 赞同：0
> 
> 时间：2013-04-17T18:53:47.317
> 
> 标签：sql, plsql

我是 PL/SQL 的新手，我在输出这段代码时遇到了问题。我有一个填充的员工表，其中包含员工姓名、工作、工资、身份证等。我需要的是我的输出显示如下：

```
Employee Name:       Johnson
Job:                 Service Writer
Total Pay:           $32,000 
```

我不断收到错误，确切的提取返回比请求的行多

```
ACCEPT p_1 PROMPT 'Please enter the Employee ID:'

DECLARE
   v_eid     employee.employee_id%TYPE := &p_1;
   v_name    employee.employee_name%TYPE;
   v_job     employee.job%TYPE;
   v_pay     employee.salary%TYPE;
BEGIN
   SELECT employee_name, job, salary
   INTO v_name, v_job, v_pay
   FROM employee;
   DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_name);
   DBMS_OUTPUT.PUT_LINE('Job: ' || v_job);
   DBMS_OUTPUT.PUT_LINE('Total Pay: ' || v_pay);
END; 
```

我想我很接近？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:16:04.900

您的`SELECT`语句返回多于一行，这意味着该`SELECT INTO`语句将因“精确提取返回超过请求的行数”错误而失败。

尝试添加一个 WHERE 子句，这意味着 SELECT 语句将只返回一行。我猜你的代码，你想做这样的事情：

```
ACCEPT p_1 PROMPT 'Please enter the Employee ID:'

DECLARE
   v_eid     employee.employee_id%TYPE := &p_1;
   v_name    employee.employee_name%TYPE;
   v_job     employee.job%TYPE;
   v_pay     employee.salary%TYPE;
BEGIN
   SELECT employee_name, job, salary
   INTO v_name, v_job, v_pay
   FROM employee
   WHERE employee_id = v_eid;

   DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_name);
   DBMS_OUTPUT.PUT_LINE('Job: ' || v_job);
   DBMS_OUTPUT.PUT_LINE('Total Pay: ' || v_pay);
END; 
```

查看[http://www.techonthenet.com/oracle/errors/ora01422.php](http://www.techonthenet.com/oracle/errors/ora01422.php)以获取有关该错误的更多信息。

# android - 如何更高效地绘制 Open GL Elements

> ID：16067880
> 
> 赞同：1
> 
> 时间：2013-04-17T18:53:48.000
> 
> 标签：android, performance, object, opengl-es-2.0

我已经发布了我的绘图方法，它被称为每一帧。

我更改每帧的顶点以移动对象（基本上是一个精灵/纹理四边形）。

正如你所看到的，我最初是每帧创建一个数组，但我现在已经改变了这个，我最初创建了数组，只是每帧更新它，但是我想知道我是否可以做更多的事情来提高效率？（虽然我得到了大约 90fps 的精灵并没有一直平稳地移动，时不时地它只是暂停一瞬间）。我看不到垃圾收集器正在运行，但我猜这是由于分配造成的）。

当我添加更多精灵/四边形时，抖动变得更糟，但是在 100+ 四边形时，虽然平滑度几乎消失了，但我的帧速率仍然在 60fps 左右，所以我不明白是什么减慢了速度？

我还添加了分配跟踪器的屏幕截图

任何帮助，将不胜感激。

```
public void drawTest(float x, float y, float[] mvpMatrix){

//Convert Co-ordinates

//Left
xPlotLeft = (-MyGLRenderer.ratio)+((x)*MyGLRenderer.coordStepAmountWidth);
//Top
yPlotTop = +1-((y)*MyGLRenderer.coordStepAmountHeight);
//Right
xPlotRight = xPlotLeft+((quadWidth)*MyGLRenderer.coordStepAmountWidth);
//Bottom
yPlotBottom = yPlotTop-((quadHeight)*MyGLRenderer.coordStepAmountHeight);

//    Following has been changed as per below. I am now declaring the array initially and just updating it every frame.
//  float[] vertices = {

        //Top Left
//          xPlotLeft,yPlotTop,0, 0,0,
        //Top Right
//          xPlotRight,yPlotTop,0, 1,0,
        //Bottom Left
//          xPlotLeft,yPlotBottom,0, 0,1,
        //Bottom Right
//          xPlotRight,yPlotBottom,0, 1,1
//          };

vertices[0]=xPlotLeft;
vertices[1]=yPlotTop;
vertices[2]=0;
vertices[3]=0;
vertices[4]=0;

vertices[5]=xPlotRight;
vertices[6]=yPlotTop;
vertices[7]=0;
vertices[8]=1;
vertices[9]=0;

vertices[10]=xPlotLeft;
vertices[11]=yPlotBottom;
vertices[12]=0;
vertices[13]=0;
vertices[14]=1;

vertices[15]=xPlotRight;
vertices[16]=yPlotBottom;
vertices[17]=0;
vertices[18]=1;
vertices[19]=1;

 vertexBuf = ByteBuffer.allocateDirect(vertices.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();
 vertexBuf.put(vertices).position(0);
    //GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
//Bind texture
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texID);      
//Use program
GLES20.glUseProgram(iProgId);
// Combine the rotation matrix with the projection and camera view
    Matrix.multiplyMM(mvpMatrix2, 0, mvpMatrix, 0,  mRotationMatrix, 0);
// get handle to shape's transformation matrix
    mMVPMatrixHandle = GLES20.glGetUniformLocation(iProgId, "uMVPMatrix");
    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mvpMatrix2, 0);
    //Set starting position for vertices (0 for position)
vertexBuf.position(0);
//Specify attributes for vertex
GLES20.glVertexAttribPointer(iPosition, 3, GLES20.GL_FLOAT, false, 5 * 4, vertexBuf);
//Enable attribute for position
GLES20.glEnableVertexAttribArray(iPosition);
//Set starting position for vertices (3 for texture)
vertexBuf.position(3);
//Specify attributes for vertex
GLES20.glVertexAttribPointer(iTexCoords, 2, GLES20.GL_FLOAT, false, 5 * 4, vertexBuf);
//Enable attribute for texture
GLES20.glEnableVertexAttribArray(iTexCoords);
//Enable Alpha blending and set blending function
GLES20.glEnable(GLES20.GL_BLEND); 
GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE_MINUS_SRC_ALPHA);
//Draw
GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
//Disable Alpha blending
GLES20.glDisable(GLES20.GL_BLEND); 
```

}

![在此处输入图像描述](https://i.stack.imgur.com/9ztbG.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:37:49.210

`ByteBuffer.allocateDirect()`每帧在内存中分配一个新缓冲区，您可以创建一个初始缓冲区并覆盖内容。只需使用[`rewind()`](http://docs.oracle.com/javase/6/docs/api/java/nio/Buffer.html#rewind%28%29)or[`position(0)`](http://docs.oracle.com/javase/6/docs/api/java/nio/Buffer.html#position%28int%29)之前`put()`。

为了进一步改善问题，使用 VBO（顶点缓冲区对象，网上有很多教程，以及关于这个主题的 SO 的几个问题）并[`glBufferSubData`](http://www.opengl.org/sdk/docs/man/xhtml/glBufferSubData.xml)更新缓冲区。

# android - 如何使背景固定但列表视图可滚动？

> ID：16067883
> 
> 赞同：1
> 
> 时间：2013-04-17T18:53:53.277
> 
> 标签：android, listview, background-image, fixed, scrollable

我几乎完成了我的应用程序，现在我正在做最后的润色。我已经让我的列表视图变得透明，并且设置了背景，这太可怕了。如何使我的图像固定并且只有列表视图可滚动？

这是我的 XML。我有很多这样的清单。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="wrap_content"
        android:layout_height="1100dp"
        android:layout_alignParentRight="true"
        android:background="@android:color/transparent"
        android:cacheColorHint="#00000000"
        android:drawSelectorOnTop="true"
        android:textSize="10pt" >

    </ListView>

</RelativeLayout>
</ScrollView> 
```

# java - Android报错：无法执行此操作，因为连接池已关闭

> ID：16067884
> 
> 赞同：9
> 
> 时间：2013-04-17T18:53:53.753
> 
> 标签：java, android, android-fragments, android-sqlite

我已经在 StackOverflow 和网络上搜索了这个问题的答案，但我找不到答案。当我在 Gingerbread 上运行我的应用程序时，它运行良好。但是当我在 4.2.2 上运行它时，我收到了这个错误：`java.lang.IllegalStateException Cannot perform this operation because the connection pool has been closed` 我有一个 SherlockFragmentActivity，它包含两个片段。

片段 1：

```
public final class TodoFragment extends SherlockListFragment {
NotesDbAdapter db;

private static final int DELETE_ID = Menu.FIRST + 1;

public static TodoFragment newInstance(String s) {
    TodoFragment fragment = new TodoFragment();

    return fragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    db = new NotesDbAdapter(getActivity());

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }

    return ll;

} 
```

片段 2：

```
public final class NotesFragment extends SherlockListFragment {
NotesDbAdapter db;
private static final int ACTIVITY_EDIT = 1;

private static final int DELETE_ID = Menu.FIRST + 1;

public static NotesFragment newInstance(String content) {
    NotesFragment fragment = new NotesFragment();

    return fragment;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    db = new NotesDbAdapter(getActivity());

    db.open();
    if (db.fetchAllNotes().getCount() == 0) {
        doWelcomeMessage();
    }
    db.close();

}

private void doWelcomeMessage() {
    // Show welcome dialog
    startActivity(new Intent(getActivity(), NotesWelcome.class));

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    if (container == null) {
        return null;
    }

    db = new NotesDbAdapter(getActivity());

    db.open();
    if (db.fetchAllNotes().getCount() == 0) {
        doWelcomeMessage();
    }
    db.close();

    return ll;

} 
```

SherlockFragment活动：

```
public class NotesFragmentActivity extends SherlockFragmentActivity {

ViewPager mViewPager;
TabsAdapter mTabsAdapter;
TextView tabCenter;
TextView tabText;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(bar.newTab().setText("Notes"), NotesFragment.class,
            null);
    mTabsAdapter.addTab(bar.newTab().setText("Todo List"),
            TodoFragment.class, null);

}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
}
} 
```

我已经坚持了**几个小时**（不是开玩笑），非常感谢任何帮助。*再次感谢*。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T17:13:47.757

SQLiteConnectionPooling 是在 Android 4.1 之后添加的。而在以前的版本中，如果对已关闭的连接进行查询或其他操作，游标对象只会尝试重新打开数据库，而使用连接池，则会引发异常。NotesDBAdapter 可能是一个回归，它可能与 4.2.2 不兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-03T11:18:47.163

我遇到了同样的问题，因为多个线程访问相同`SQLiteOpenHelper`，因此同时打开和关闭连接。

我通过向`userCount`助手添加属性来解决它。现在助手只关闭连接，如果`userCount`是零，即当前没有其他线程正在使用数据库。

# javascript - jQuery 下拉菜单 - WordPress

> ID：16067886
> 
> 赞同：0
> 
> 时间：2013-04-17T18:53:58.973
> 
> 标签：javascript, jquery, wordpress

我正在尝试创建包含图像的 jquery 选择字段。(ddslick)

文件似乎有问题`.js`，因为控制台显示错误：未捕获的类型错误：对象 [对象对象] 没有方法 'ddslick' 但在 jsfiddle 中工作：http: [//jsfiddle.net/newbie123/ zUgyd/5/](http://jsfiddle.net/newbie123/zUgyd/5/)

它在 jsfiddle 中正确加载，但在控制台中给出了该错误并且不加载。

我也尝试将其放入页面的脚本中（使用 wordpress 上的脚本插件），即：

```
//Dropdown plugin data
            var ddData = [
                {
                    text: "Facebook",
                    value: "FB",
                    description: "Description with Facebook",
                    imageSrc: "http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
                },
                {
                    text: "Twitter",
                    value: "TWT",
                    description: "Description with Twitter",
                    imageSrc: "http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
                },
                {
                    text: "LinkedIn",
                    value: "LI",
                    description: "Description with LinkedIn",
                    imageSrc: "http://dl.dropbox.com/u/40036711/Images/linkedin-icon-32.png"
                },
                {
                    text: "Foursquare",
                    value: "FSQ",
                    description: "Description with Foursquare",
                    imageSrc: "http://dl.dropbox.com/u/40036711/Images/foursquare-icon-32.png"
                }
            ] 
```

HTML

```
<form id="quote" action="" method="get"><script type="text/javascript">// <![CDATA[
$('#quote').keyup(function (){   doTotal(this);   calcMenu(this); });
// ]]></script>
<script type="text/javascript">$('#myDropdown').ddslick({
    onSelected: function(selectedData){
        //callback function: do something with selectedData;
    }   
});</script>
<div id="myDropdown">
<select id="selectMenu">
        <option value="0" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/facebook-icon-32.png"
            data-description="Description with Facebook">Facebook</option>
        <option value="1" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/twitter-icon-32.png"
            data-description="Description with Twitter">Twitter</option>
        <option value="2" selected="selected" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/linkedin-icon-32.png"
            data-description="Description with LinkedIn">LinkedIn</option>
        <option value="3" data-imagesrc="http://dl.dropbox.com/u/40036711/Images/foursquare-icon-32.png"
            data-description="Description with Foursquare">Foursquare</option>
    </select>
</div>
</form> 
```

在`header.php`

```
 wp_head(); ?>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/script.js"></script>
<script type="text/javascript" src="<?php bloginfo("template_url"); ?>/js/jquery.ddslick.js"></script>
<!-- Make sure your CSS file is listed before jQuery -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

</head> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:57:23.827

这里：

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/script.js"></script>
<script type="text/javascript" src="<?php bloginfo("template_url"); ?>/js/jquery.ddslick.js"></script>
<!-- Make sure your CSS file is listed before jQuery -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script> 
```

.js 文件不是 CSS。:) 您的 jQuery 插件包含在 jQuery 之前。你应该解决这个问题。

# python - QValidator.fixup() 如何在 PySide 中工作？

> ID：16067893
> 
> 赞同：2
> 
> 时间：2013-04-17T18:54:07.677
> 
> 标签：python, pyside

我创建了一个 QLineEdit 并为其附加了一个自定义 QValidator。我试图向`fixup()`我的 QValidator 添加一个函数。当我在 QLineEdit 中输入一些文本时，它会调用`validate()`，然后调用`fixup()`，最后`validate()`再次调用，但仍然像修复之前的文本一样。我做错了什么？为什么 QLineEdit 没有被修复更新？

```
mylineedit = QtGui.QLineEdit()
mylineedit.setValidator(MyValidator())

class MyValidator(QtGui.QRegExpValidator):
    def __init__(self, parent=None):
        rx = QtCore.QRegExp('\\d+ m')
        super().__init__(rx, parent)

    def validate(self, text, pos):
        r = super().validate(text, pos)
        print(r)
        return r

    def fixup(self, text):
        if len(text) == 0:
            text = '0 m'
        else:
            text = text.strip() + ' m'
        print(text)
        return text 
```

输出将类似于（如果我按“1”+ Enter）：

```
(PySide.QtGui.QValidator.State.Intermediate, '1', 1)
1 m
(PySide.QtGui.QValidator.State.Intermediate, '1', 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-19T22:21:42.533

**我认为PySide**中QValidator的默认实现并不好，原因如下：

1.  `validate()`每当输入或删除字符时，甚至在输入完成之前，都会调用该方法。这可能会使编辑字段变得不可能，因为对目标字符串的所有编辑都是无效的并被拒绝。
2.  该`fixup()`方法被破坏，它的返回值被丢弃。

但是有一个解决方法。将`QLineEdit`自身传递给验证器构造函数，然后您可以控制它何时被验证并根据需要修复它的值：

```
class MyValidator(QValidator):

  def __init__(self, lineedit):
    super(MyValidator, self).__init__()
    self.lineedit = lineedit

  def validate(self, s, p):
    if self.lineedit.hasFocus(): #ignore validation while editing not complete
      return QValidator.Acceptable
    if s.startswith("http://"):
      return QValidator.Acceptable
    return QValidator.Invalid

  def fixup(self, s):
    self.lineedit.setText("http://" + s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T10:23:04.510

根据 MadeOfAirs 的回答，提出了以下替换空白的方法。不过，它会为每个小部件创建一个新的验证器。

```
class QLineEditValidator(QValidator):

    @classmethod
    def connect(cls, line_edit, fixup=lambda s: s, validate=None, **kwargs):
        line_edit.setValidator(cls(line_edit, fixup=fixup, validate=validate, **kwargs))

    def __init__(self, line_edit, fixup=lambda s: s, validate=None, **kwargs):
        super().__init__(**kwargs)
        self.line_edit, self._fixup, self._validate = line_edit, fixup, \
            (lambda s, p: fixup(s) == s) if validate is None else validate

    def validate(self, s, p):
        if self.line_edit.hasFocus():
            return QValidator.Acceptable
        return QValidator.Acceptable if self._validate(s, p) else QValidator.Invalid

    def fixup(self, s):
        self.line_edit.setText(self._fixup(s))

text = QLineEdit()
QLineEditValidator.connect(text, fixup=lambda s: s.replace(' ', '_'))
QLineEditValidator.connect(text, fixup=lambda s: s.replace(' ', '_'), 
    validate=lambda s, p: not ' ' in s) 
```

# java - 如何在 JFrame 中排列多个面板

> ID：16067894
> 
> 赞同：7
> 
> 时间：2013-04-17T18:54:12.930
> 
> 标签：java, swing, jpanel, layout-manager, calculator

我正在尝试制作一个简单的计算器来练习图形（我是一个完整的 GUI 菜鸟）。在 Polyashenkos Calulator 和文本区域以及文本区域和按钮之间的空间之后，我遇到了一些问题。另外，我如何保持该布局但消除空间并使底部的 3 个按钮更小。任何关于我在做什么或我如何能做得更好的提示将不胜感激。谢谢你。

![在此处输入图像描述](https://i.stack.imgur.com/ldhcg.jpg)

```
import javax.swing.*;
import java.awt.*;

public class calculator {

    public static void main(String[] args) {
        // creates the JFrame(a window with decorations)
        JFrame frame = new JFrame("Calculator"); 
        // stops the program when window is closed
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        frame.setSize(377, 350);

        // the main panel of the JFrame, 
        // remembet you cant add content directly to JFrame
        JPanel content = new JPanel(new GridLayout(4, 0)); 
        // panel for the text field
        JPanel textarea = new JPanel(new GridLayout(4, 0)); 
        // panel for the buttons, 
        // GridLayout(int rows, int cols, int horiz_gap, int vert_gap)
        JPanel buttonarea = new JPanel(new GridLayout(4, 5, 2, 2)); 

        //  the panel for the bigger bottom buttons
        JPanel secondbuttonarea = new JPanel(new GridLayout(1, 1, 2, 2)); 
        // the panel for the text on top
        JPanel label = new JPanel(); 
        content.add(label);
        content.add(textarea);
        content.add(buttonarea);
        content.add(secondbuttonarea);

        JLabel words = new JLabel("Polyashenko's Calculator", JLabel.CENTER);
        label.add(words);

        JTextField enterhere = new JTextField("0.", JTextField.CENTER);
        // will set the curser of the text bar on right side
        enterhere.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); 
        textarea.add(enterhere);

        // makes a button called b1 with text in it
        JButton b1 = new JButton("BkSP"); 
        // adds the backspace button to the buttonarea panel
        buttonarea.add(b1); 
        JButton b2 = new JButton("CE");
        buttonarea.add(b2);
        JButton b3 = new JButton("C");
        buttonarea.add(b3);
        JButton b4 = new JButton("/");
        buttonarea.add(b4);
        JButton b5 = new JButton("sqrt");
        buttonarea.add(b5);
        JButton b6 = new JButton("7");
        buttonarea.add(b6);
        JButton b7 = new JButton("8");
        buttonarea.add(b7);
        JButton b8 = new JButton("9");
        buttonarea.add(b8);
        JButton b9 = new JButton("*");
        buttonarea.add(b9);
        JButton b10 = new JButton("%");
        buttonarea.add(b10);
        JButton b11 = new JButton("4");
        buttonarea.add(b11);
        JButton b12 = new JButton("5");
        buttonarea.add(b12);
        JButton b13 = new JButton("6");
        buttonarea.add(b13);
        JButton b14 = new JButton("-");
        buttonarea.add(b14);
        JButton b15 = new JButton("1/x");
        buttonarea.add(b15);
        JButton b16 = new JButton("1");
        buttonarea.add(b16);
        JButton b17 = new JButton("2");
        buttonarea.add(b17);
        JButton b18 = new JButton("3");
        buttonarea.add(b18);
        JButton b19 = new JButton("+");
        buttonarea.add(b19);
        JButton b20 = new JButton("+/-");
        buttonarea.add(b20);

        JButton b21 = new JButton("0");
        secondbuttonarea.add(b21);
        JButton b22 = new JButton(".");
        secondbuttonarea.add(b22);
        JButton b23 = new JButton("=");
        secondbuttonarea.add(b23);

        // adds the buttonarea panel to the main panel
        frame.getContentPane().add(content); 
        // makes the window visible, put at end of program
        frame.setVisible(true); 
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:14:57.047

[Hovercraft Full Of Eels](https://stackoverflow.com/search?tab=newest&q=user:522444%20calculator)的一课(-: forums.sun.com :-)

![在此处输入图像描述](https://i.stack.imgur.com/2qL50.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/zV6Dl.jpg)

```
import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.Window;
import java.awt.event.*;
import javax.swing.*;

public class SciCalc {

    private static void createAndShowUI() {
        SciCalcGui gui = new SciCalcGui();
        SciCalcMenu menu = new SciCalcMenu(gui);
        JFrame frame = new JFrame("Calculator");
        frame.getContentPane().add(gui.getMainPanel());
        frame.setJMenuBar(menu.getJMenuBar());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }

    private SciCalc() {
    }
}

class SciCalcGui {

    private static final String[][] STANDARD_BTN_TEXTS = {
        {"7", "8", "9", "/"}, {"4", "5", "6", "*"},
        {"1", "2", "3", "-"}, {"0", ".", "=", "+"}};
    private static final String[][] SCIENTIFIC_BTN_TEXTS = {
        {"sqrt", "1/x", "sin"}, {"%", "Exp", "cos"},
        {"x^y", "ln", "tan"}, {"x^2", "n!", "sec"}};
    private static final int GAP = 5;
    private static final Font BTN_FONT = new Font(Font.DIALOG, Font.BOLD, 20);
    private JPanel mainPanel = new JPanel();
    private JPanel sciPanel;
    private JTextField display = new JTextField();

    SciCalcGui() {
        display.setFont(BTN_FONT);
        JPanel standardPanel = createBtnPanel(STANDARD_BTN_TEXTS, "Standard");
        sciPanel = createBtnPanel(SCIENTIFIC_BTN_TEXTS, "Scientific");
        mainPanel.setLayout(new BorderLayout());
        mainPanel.setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
        mainPanel.add(standardPanel, BorderLayout.CENTER);
        mainPanel.add(sciPanel, BorderLayout.WEST);
        mainPanel.add(display, BorderLayout.NORTH);
        sciPanel.setVisible(false);
    }

    public void sciPanelSetVisible(boolean visible) {
        sciPanel.setVisible(visible);
        Window win = SwingUtilities.getWindowAncestor(mainPanel);
        win.pack();
    }

    public JPanel getMainPanel() {
        return mainPanel;
    }

    private JPanel createBtnPanel(String[][] texts, String title) {
        JPanel btnPanel = new JPanel();
        int rows = texts.length;
        int cols = texts[0].length;
        btnPanel.setLayout(new GridLayout(rows, cols, GAP, GAP));
        for (int row = 0; row < texts.length; row++) {
            for (int col = 0; col < texts[row].length; col++) {
                JButton btn = new JButton(texts[row][col]);
                btn.setFont(BTN_FONT);
                btnPanel.add(btn);
            }
        }
        btnPanel.setBorder(BorderFactory.createTitledBorder(title));
        return btnPanel;
    }
}

class SciCalcMenu {

    private static final String STANDARD = "Standard";
    private static final String SCIENTIFIC = "Scientific";
    private SciCalcGui gui;
    private JMenuBar menuBar = new JMenuBar();
    private JMenuItem standardView;
    private JMenuItem scientificView;

    SciCalcMenu(SciCalcGui gui) {
        this.gui = gui;
        standardView = new JMenuItem(STANDARD, KeyEvent.VK_T);
        scientificView = new JMenuItem(SCIENTIFIC, KeyEvent.VK_S);
        ViewAction viewAction = new ViewAction();
        standardView.addActionListener(viewAction);
        scientificView.addActionListener(viewAction);
        standardView.setEnabled(false);
        JMenu viewMenu = new JMenu("View");
        viewMenu.setMnemonic(KeyEvent.VK_V);
        viewMenu.add(standardView);
        viewMenu.add(scientificView);
        menuBar.add(new JMenu("Edit"));
        menuBar.add(viewMenu);
        menuBar.add(new JMenu("Help"));
    }

    public JMenuBar getJMenuBar() {
        return menuBar;
    }

    private class ViewAction implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            String command = e.getActionCommand();
            if (command.equals(STANDARD)) {
                gui.sciPanelSetVisible(false);
                standardView.setEnabled(false);
                scientificView.setEnabled(true);
            } else if (command.equals(SCIENTIFIC)) {
                gui.sciPanelSetVisible(true);
                standardView.setEnabled(true);
                scientificView.setEnabled(false);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:04:59.377

在这种情况下， A`GridLayout`永远不会看起来很好。

内容扩展以填充网格中的框。您只能对行和列之间的间距进行最少的控制。

您可能必须更改布局以使其看起来像您想要的那样。`GridBagLayout`拥有所有控制权，但配置起来要困难得多。

有时您可以嵌套面板`BorderLayout`并`GridLayout`使其看起来合理。但它是 Swing，这意味着它可以使用，但很难让它看起来光滑。

我总是喜欢使用`FlowLayout`OK/Cancel 按钮。在我看来，它们看起来最好，您可以将它们全部向左、向右或居中推。您的计算器按钮应该可以很好地与 a 配合使用，`GridLayout`但您不能轻易拥有高大的“Enter”按钮或宽的“0”按钮。

例如，尝试使用垂直`BoxLayout`而不是 4 高 x 1 宽的网格。

# asp.net-mvc - ASP MVC 3 - 导出到 CSV 方法，包括不在数据库中的垃圾字符

> ID：16067897
> 
> 赞同：1
> 
> 时间：2013-04-17T18:54:30.587
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, csv, export-to-csv

下面是我用来将表格内容导出到 CSV 的（粗略）方法。我是即时想出这个的，但是表中的数据是从 Sharepoint 站点创建的 Excel 电子表格中加载的。我不知道是那个转换过程还是我的方法的原因，但是大量的这些字符：`Â`正在被导入到单元格中。

此外，大量记录的字段被分成两行，而不是仅仅一行。这是我第一次尝试以编程方式导出到 CSV（而不是使用 excel），因此非常感谢任何帮助。

控制器方法

```
 public ActionResult ExportToCsv()
    {
        using (StringWriter writer = new StringWriter())
        {
            var banks = db.BankListMaster.Include(b => b.BankListAgentId).ToList();

            writer.WriteLine("Bank Name, EPURL, AssociatedTPMBD, Tier, FixedLifeMasterSAF, VariableLifeMasterSAF, FixedLifeSNY, VariableLifeMasterSNY, SpecialNotes, WelcomeLetterReq, " +
                             "BackOfficeNotification, LinkRepsToDynamics, RelationshipCode, INDSGC, PENSGC, LicensingContract, MiscellaneousNotes, ContentTypeID1, CreatedBy, MANonresBizNY, Attachment");

            foreach (var item in banks)
            {
                writer.Write(item.BankName + ",");
                if(String.IsNullOrWhiteSpace(item.EPURL))
                {
                    writer.Write(item.EPURL + ",");
                }
                else
                {
                    writer.Write(item.EPURL.Trim() + ",");
                }
                writer.Write(item.AssociatedTPMBD + ",");
                writer.Write(item.Tier + ",");
                writer.Write(item.LicensingContract + ",");
                writer.Write(item.MiscellaneousNotes + ",");
                writer.Write(item.ContentTypeID1 + ",");
                writer.Write(item.CreatedBy + ",");
                writer.Write(item.MANonresBizNY + ",");
                writer.Write(item.Attachment);
                writer.Write(writer.NewLine);
            }

            return File(new System.Text.UTF8Encoding().GetBytes(writer.ToString().Replace("Â", "")), "text/csv", "BankList.csv");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:23:03.600

CSV 是一种指定不明确的文件格式。几个重要的事情没有指定：

*   字段分隔符。即使它被称为“逗号分隔”，Excel 有时也会使用分号（取决于您的语言环境！）。
*   编码（UTF-8、ISO-8859-1、ANSI/Windows-1252 等）
*   换行符的种类（CR、NL 或 CR NL）。
*   是所有字段都必须用双引号引起来，还是只包含字段分隔符、行分隔符、空格等。
*   是否从未引用的字段中修剪空白。
*   引用字段中是否允许换行（Excel 允许）。
*   如果双引号是字段内容的一部分（通常是双引号），它们如何转义

Excel 通常是有效 CSV 格式的参考。但即使 Excel 也会根据您的语言环境选择字段分隔符和编码。

在您的情况下，编码很可能是主要问题。您使用 UTF-8，但消费者将其视为 ISO-8859-1 或 ANSI。出于这个原因，字符`Â`经常出现，其二进制代码在 UTF-8 中用于引入两个字节序列。更改编码以修复`Â`.

下一步，正确引用文本字段，即在开头和结尾添加双引号，并将字段内的所有双引号加双引号。

# image - 如何通过拖动更改 UIScrollView 中子视图的顺序？

> ID：16067899
> 
> 赞同：0
> 
> 时间：2013-04-17T18:54:38.537
> 
> 标签：image, animation, uiscrollview, drag

这个问题在谷歌搜索和stackoverflow后没有答案。

我有一个水平滚动视图，我将添加一些照片（UIButton 中的 setImage）作为子视图，我需要做的是拖动一个 UIButton 并移动到一个新位置然后放下，就是这样，就像 iMovie 的时间线一样，人们可以将一帧拖到一个新的位置，这个操作的目的是改变帧的顺序。

我该怎么办？或者应该使用像UITabelView（只有一行）这样可以通过内置功能拖动来重新排列照片缩略图的东西？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:03:43.073

我想我从 Xcode 示例中找到了一个名为 Autoscroll 的答案，在 ScrollViewSuite 的示例组下，他们做了我想做的事情。我不知道为什么很少有人谈论这个把戏。

# c - 从 Linux 内核模块中调用用户空间函数

> ID：16067902
> 
> 赞同：6
> 
> 时间：2013-04-17T18:54:46.313
> 
> 标签：c, linux, linux-kernel, driver, linux-device-driver

我正在编写一个简单的 Linux 字符设备驱动程序，以通过 I/O 端口将数据输出到硬件。我有一个函数可以执行浮点运算来计算硬件的正确输出；不幸的是，这意味着我需要将此函数保留在用户空间中，因为 Linux 内核不能很好地处理浮点运算。

这是设置的伪表示（请注意，此代码没有做任何具体的事情，它只是显示我的代码的相对布局）：

**用户空间功能**：

```
char calculate_output(char x){
    double y = 2.5*x;
    double z = sqrt(y);

    char output = 0xA3;

    if(z > 35.67){
        output = 0xC0;
    }

    return output;
} 
```

**内核空间代码**：

```
unsigned i;
for(i = 0; i < 300; i++){
    if(inb(INPUT_PORT) & NEED_DATA){
        char seed = inb(SEED_PORT);
        char output = calculate_output(seed);
        outb(output, OUTPUT_PORT);
    }

    /* do some random stuff here */
} 
```

我考虑过使用`ioctl`从用户空间函数传入数据，但我不确定如何处理函数调用处于循环中并且在下一次调用`calculate_output`发生之前执行更多代码的事实。

我设想这项工作的方式是：

1.  主用户空间程序将启动内核空间代码（可能通过`ioctl`）
2.  用户空间程序**阻塞**并等待内核空间代码
    *   内核空间程序向用户空间程序*询问*输出数据，并**阻塞**等待
    *   用户空间程序**解除**阻塞、计算和发送数据（`ioctl`？），然后再次**阻塞**
    *   内核空间程序**解除**阻塞并继续
3.  内核空间程序完成并*通知*用户空间
4.  用户空间**解除阻塞**并继续下一个任务

那么我如何在内核空间和用户空间之间进行通信，并且还具有阻塞，以便我没有用户空间不断轮询设备文件以查看它是否需要发送数据？

* * *

一个警告：虽然定点算术在我的示例代码中可以很好地工作，但在实际代码中它不是一个选项；我需要浮点提供的大范围，而且——即使没有——我担心重写代码以使用定点算术会混淆未来维护者的算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T01:12:25.803

我认为最简单的解决方案是在您的内核驱动程序中创建一个字符设备，并使用您自己的虚拟文件操作。然后用户空间可以打开这个设备`O_RDWR`。您必须实现两个主要文件操作：

*   `read`-- 这就是内核将数据传回用户空间的方式。此函数在调用`read()`系统调用的用户空间线程的上下文中运行，在您的情况下，它应该阻塞，直到内核具有另一个需要知道其输出的种子值。

*   `write`-- 这就是用户空间将数据传递到内核的方式。在您的情况下，内核只会获取对先前读取的响应并将其传递给硬件。

然后你会在用户空间中得到一个简单的循环：

```
while (1) {
    read(fd, buf, sizeof buf);
    calculate_output(buf, output);
    write(fd, output, sizeof output);
} 
```

并且内核中根本没有循环——一切都在驱动事物的用户空间进程的上下文中运行，内核驱动程序只负责将数据移入/移出硬件。

根据您在内核方面的“在这里做一些随机的事情”是什么，可能不可能这么简单地做到这一点。如果您真的需要内核循环，那么您需要创建一个内核线程来运行该循环，然后有一些变量`input_data`，如`input_ready`、`output_data`和`output_ready`，以及几个等待队列和您需要的任何锁定。

当内核线程读取数据时，您将数据放入`input_ready`并设置`input_ready`标志并向输入等待队列发出信号，然后执行`wait_event(<output_ready is set>)`. `read`文件操作将执行 a并`wait_event(<input_ready is set>)`在准备好时将数据返回到用户空间。类似地，`write`文件操作会将它从用户空间获取的数据放入`output_data`并设置`output_ready`输出等待队列并发出信号。

另一种（更丑，更不便携）的方法是使用类似的东西`ioperm`，`iopl`或者`/dev/port`完全在用户空间中做所有事情，包括低级硬件访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:18:44.520

我建议您将执行所有“繁重工作”的代码移至用户模式——也就是说，一次计算所有 300 个值，然后将它们传递给内核。

我什至不确定您是否可以让任意一段代码从内核调用用户模式。我确信这是可以做到的，因为例如“信号”就是这样做的，但我不相信你可以“以任何你喜欢的方式”做到这一点（而且几乎可以肯定，有一些限制，例如，什么你可以在那个函数中做）。这当然看起来不是一个好主意，而且多次回调到用户模式肯定会很慢。

# javascript - 如果元素宽度大于，则执行 jQuery 代码

> ID：16067906
> 
> 赞同：1
> 
> 时间：2013-04-17T18:54:58.507
> 
> 标签：javascript, jquery, width, element, dynamic-css

我在相关 html 区域下方有以下 javascript，但它似乎无法正常工作。我很确定我有正确的方法来获取相关 div 标签的宽度，但不知道为什么

```
<script type="text/javascript">
var pageWidthNow = document.getElementById('top-area').clientWidth;

if (pageWidthNow > 700) {
    $('#search-form').addClass(topRightSearchBox);
};
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T18:57:10.030

看起来你只需要添加引号

```
$('#search-form').addClass("topRightSearchBox"); 
```

# java - 如何更快地加载互联网输入流？

> ID：16067907
> 
> 赞同：1
> 
> 时间：2013-04-17T18:55:00.313
> 
> 标签：java, android, inputstream, httpresponse

我正在开发一个与 Web 服务通信的 Android 应用程序。网络服务为我提供了一些几何文件，因此这些文件可能会变得非常大。

因为您不能等待 1-3 分钟才能收到回复，所以我需要降低加载时​​间。

所以这里有一些代码：

```
    long startTime = System.currentTimeMillis();

    InputStream 是 = httpResponse.getEntity().getContent();
    ByteArrayOutputStream 缓冲区 = 新的 ByteArrayOutputStream();

    诠释nRead；
    字节[]数据=新字节[1000000]；

    而 ((nRead = is.read(data, 0, data.length)) != -1) {
      buffer.write（数据，0，nRead）；
    }

    long endTime = System.currentTimeMillis();

    Log.d("ARks", (endTime - startTime) / 1000 + " seconds");

```

执行此操作所需的时间始终在 50 到 75 秒之间（对于相当小的文件而言）。

有没有办法加快这件事？也许一些Android特定的东西可以让应用程序更多的带宽？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:14:32.593

如果您*知道*带宽是您的问题，请压缩您的流：[http ://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPInputStream.html](http://docs.oracle.com/javase/6/docs/api/java/util/zip/GZIPInputStream.html)

如果您在处理之前不需要所有数据，请减小缓冲区的大小。这将允许您在处理一些对象时处理其他对象。

# javascript - 如何让 x-editable 使用 ajax 内容

> ID：16067908
> 
> 赞同：4
> 
> 时间：2013-04-17T18:55:02.167
> 
> 标签：javascript, jquery, ajax

我对实时加载的 ajax 内容和 .editable(); 有疑问

我正在通过需要能够绑定到父页面上的 .editable() 函数的 ajax 加载内容。我在解决这个问题的文档方面没有找到太多东西。我想我一定是瞎了眼了。

尝试通过 ajax 实时加载的内容访问它时，如何让这个 .editable 工作：

```
 $('#charge_name a').editable({
     // scripts here...
 }); 
```

非常感谢你的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T10:25:33.883

Among the options there is a parameter called `selector`

More info here [http://vitalets.github.io/x-editable/docs.html#editable](http://vitalets.github.io/x-editable/docs.html#editable)

This would delegate editable to the targets even after they've been added to the DOM after load.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:25:37.630

我不确定这是否是最好的方法，但为了找不到更好的解决方案，这就是我想出的：

我创建了一个函数来包含我的可编辑脚本，例如：

```
 function myEditables(){
       $('#charge_name a').editable({
          // scripts here...
       });
 } 
```

然后，当我需要在页面上激活我的可编辑项时，无论是在 ajax 调用还是页面加载之后，我都只需调用函数的名称：myEditables();

如果有人知道更好的方法，请告诉我，我将不胜感激。谢谢！

# asp.net - 自动完成和 RadAjaxPanel

> ID：16067909
> 
> 赞同：0
> 
> 时间：2013-04-17T18:55:03.010
> 
> 标签：asp.net, telerik, telerik-ajax

我的页面中有三个 RadAjaxPanel。第一个面板有一个 ASP.net AjaxControlToolkit 自动完成文本框（txtname）和其他控件。基于 txtname 的 textchanged 事件，我更新了其余两个面板中的一些控件值。

问题是当我为自动完成文本框使用 RadAjaxpanel 时，它不会更新 textchange 事件上的其他控件。但是一旦我删除了 RadAjaxPanel1，那么控件就会得到更新。

有人遇到同样的问题吗？有什么想法吗？

谢谢

```
 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
<AjaxSettings>
    <telerik:AjaxSetting AjaxControlID="RadAjaxPanel1">
        <UpdatedControls>
            <telerik:AjaxUpdatedControl ControlID="RadAjaxPanel2" />
            <telerik:AjaxUpdatedControl ControlID="RadAjaxPanel3" />
        </UpdatedControls>
    </telerik:AjaxSetting>
</AjaxSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:36:53.323

为了在拥有 RadAjaxManager1 之前使用 Ajax，您应该拥有 RadScriptManager

```
<telerik:RadScriptManager ID="RadScriptManager1" runat="server">
 <Scripts>
   <asp:ScriptReference Assembly="Telerik.Web.UI"
      Name="Telerik.Web.UI.Common.Core.js"></asp:ScriptReference>
        <asp:ScriptReference Assembly="Telerik.Web.UI"
      Name="Telerik.Web.UI.Common.jQuery.js"></asp:ScriptReference>
        <asp:ScriptReference Assembly="Telerik.Web.UI"
      Name="Telerik.Web.UI.Common.jQueryInclude.js"></asp:ScriptReference>
        </Scripts>
    </telerik:RadScriptManager> 
```

根据您的代码，您的逻辑应该是

RadAjaxPanel1 将更新 RadAjaxPanel2、RadAjaxPanel3

在 Yuor 列表中还包括 RadAjaxPanel1 ：

```
 <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
    <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="RadAjaxPanel1">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadAjaxManager1" />
                <telerik:AjaxUpdatedControl ControlID="RadAjaxPanel2" />
                <telerik:AjaxUpdatedControl ControlID="RadAjaxPanel3" />
            </UpdatedControls>
        </telerik:AjaxSetting>
    </AjaxSettings>

  </telerik:RadAjaxManager> 
```

# ruby-on-rails - 如何使用 rspec 测试路由约束

> ID：16067910
> 
> 赞同：17
> 
> 时间：2013-04-17T18:55:04.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, constraints, rails-routing

我正在开发一个主要用作 API 的应用程序（除了一些次要视图，例如会话/注册，这将是“标准”）。我喜欢[Railscast #350: Versioning an API](http://railscasts.com/episodes/350-rest-api-versioning)中最终确定的方法，因此遵循了它。我的路线看起来像：

```
namespace :api, :defaults => {:format => 'json'} do
  scope :module => :v1, :constraints => ApiConstraints.new(:version => 1, :default => false) do
    resources :posts, :only => [:create, :show, :destroy, :index]
  end

  scope :module => :v2, :constraints => ApiConstraints.new(:version => 2, :default => true) do
    resources :posts, :only => [:create, :show, :destroy, :index]
  end
end 
```

在每条路线中，我的约束是一个新的 ApiConstraints 对象，它位于我的`./lib`文件夹中。该类如下所示：

```
class ApiConstraints
  def initialize(options)
    @version = options[:version]
    @default = options[:default]
  end

  def matches?(req)
    @default || req.headers['Accept'].include?("application/vnd.MYAPP.v#{@version}")
  end
end 
```

现在，当手动测试时，一切都按预期工作。在我的 API 中，每个版本我可能有 5 到 10 个控制器，并且不想测试 API 约束是否适用于每个单独的控制器，因为这没有任何意义。我正在寻找一个测试我的 API 约束的规范文件，但我不确定将该规范放在哪里。

我试过添加一个`spec/routing/api_spec.rb`文件来测试东西，但它不能正常工作，因为它抱怨没有提供一些东西，就像这样：

```
it "should route an unversioned request to the latest version" do
  expect(:get => "/api/posts", :format => "json").to route_to(:controller => "api/v1/posts")
end 
```

即使控制器正确匹配，上述内容也会引发错误。它失败并出现以下错误：

```
The recognized options <{"format"=>"json", "action"=>"index", "controller"=>"api/v1/posts"}>
did not match <{"controller"=>"api/v1/posts"}>,
difference: <{"format"=>"json", "action"=>"index"}>. 
```

请注意，控制器已正确确定，但由于我不想在此测试中测试格式和操作，因此会出错。我希望有 3 个“API 规范”：

*   它应该将未版本化的请求路由到最新版本
*   如果没有指定，它应该默认为 JSON 格式
*   它应该在请求时返回指定的 API 版本

有没有人有为这类路线编写规范的经验？我不想为 API 中的每个控制器添加规范，因为它们不负责此功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:59:22.417

Rspec 的`route_to`匹配器委托给[`ActionDispatch::Assertions::RoutingAssertions#assert_recognizes`](http://api.rubyonrails.org/classes/ActionDispatch/Assertions/RoutingAssertions.html#method-i-assert_recognizes)

的参数`route_to`作为`expected_options`散列传入（经过一些预处理，使其也能理解速记风格的参数，如`items#index`）。

您期望与匹配`route_to`器匹配的哈希（即`{:get => "/api/posts", :format => "json"}`）实际上不是`expect`. 如果您查看[源代码](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/matchers/routing_matchers.rb)，您可以看到我们获得了匹配的路径 via

`path, query = *verb_to_path_map.values.first.split('?')`

这`#first`是一个确定的信号，表明我们期待一个只有一个键值对的散列。所以该`:format => "json"`组件实际上只是被丢弃了，并没有做任何事情。

断言希望您将`ActionDispatch`完整的路径 + 动词与一组完整的控制器、操作和路径参数相匹配。所以 rspec 匹配器只是传递了它委托给的方法的限制。

听起来 rspec 的内置`route_to`匹配器不会做你想做的事。所以下一个建议是假设`ActionDispatch`会做它应该做的事情，而不是为你的`ApiConstraints`班级编写规范。

为此，我首先建议*不要*使用默认的`spec_helper`. Corey Haines 有一个很好的要点，关于[如何制作一个不会启动整个 rails 应用程序的更快的规范助手](https://gist.github.com/coreyhaines/2068977)。它可能不适合您的情况，但我只是想指出它，因为您只是在这里实例化基本的 ruby​​ 对象并且并不真正需要任何 rails 魔法。`ActionDispatch::Request`如果您不想像我在这里做的那样存根请求对象，您也可以尝试要求& 依赖项。

那看起来像

`spec/lib/api_constraint.rb`

```
require 'active_record_spec_helper'
require_relative '../../lib/api_constraint'

describe ApiConstraint do

  describe "#matches?" do

    let(:req) { Object.new }

     context "default version" do

       before :each do
         req.stub(:headers).and_return {}
         @opts = { :version => nil, :default => true }
       end

       it "returns true regardless of version number" do
         ApiConstraint.new(@opts).should match req
       end

     end

  end

end 
```

...aaand 我会让你弄清楚如何设置上下文/为你的其他测试编写期望。

# visual-studio - VS2012中的任务列表？

> ID：16067911
> 
> 赞同：4
> 
> 时间：2013-04-17T18:55:04.927
> 
> 标签：visual-studio

由于没有 2012 年的页面，而 2010 年非常接近，我使用了[这些说明](http://msdn.microsoft.com/en-us/library/vstudio/zce12xx2%28v=vs.100%29.aspx)

我写了下面，但我看到一个空的任务列表。我该如何正确地做到这一点？注意：“枚举评论任务”设置为 true。

```
void myfunc() {
    ...
    // TODO Fix this function.
    ... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T20:11:27.790

VS 2012、2010、2008：切换到任务列表窗口时，最上面的控件是一个下拉列表。将其从“用户任务”切换到“评论”。您的评论中的 TODO 应该会出现。如果 C++ 有一些限制，请查看我的特定 C++ 答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T00:06:10.313

对于 C++，出于性能原因，枚举默认关闭：[link](https://stackoverflow.com/questions/8794314/visual-studio-todo-task-list-not-showing-up)。另请参阅：[链接](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/5d229fd3-e501-40c1-a236-0cb490a83fff/)。但是如果我启用另一个 StackOverflow 主题中提到的开关，我仍然没有看到所有的 TODO。我必须实际打开一个带有 TODO 的文件，然后我只能看到当前打开的文件中的 TODO。

# ios - 跨应用程序的唯一 iOS 设备 ID

> ID：16067912
> 
> 赞同：0
> 
> 时间：2013-04-17T18:55:14.270
> 
> 标签：ios, uuid, udid

我目前正在开发一套 iOS 应用程序，它们将使用同一台服务器进行身份验证。服务器使用 UDID 进行设备身份验证。我知道 uniqueIdentifier 现在已弃用，所以我想知道在应用程序中使用唯一标识符的最佳做法是什么？（我知道如何生成自己的并将其存储在钥匙串中，但这将是特定于应用程序的）我看过有关 identifierForVendor 和 identifierForAdvertising 的帖子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:01:48.243

The docs say:

> [`uniqueIdentifier` is] deprecated in iOS 5.0\. Use the identifierForVendor property of this class or the advertisingIdentifier property of the ASIdentifierManager class instead, as appropriate, or use the UUID method of the NSUUID class to create a UUID and write it to the user defaults database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:12:13.617

正如我们所知， **uniqueIdentifier**在 iOS 5.0 中已被弃用，因此文档建议您使用[CFUUID](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFUUIDRef/Reference/reference.html#//apple_ref/c/func/CFUUIDCreate)

反而。您可以使用 CFUUID

```
CFUUIDRef uuidRef = CFUUIDCreate(kCFAllocatorDefault);
NSString *uuidString = (NSString *)CFUUIDCreateString(NULL,uuidRef);
CFRelease(uuidRef); 
```

请将 uuidString 保存在用户默认值或其他位置，因为您无法再次生成相同的 uuidString。

希望它可以帮助你。

# heroku - 带有回形针+ImageMagick+Heroku 的视频缩略图

> ID：16067913
> 
> 赞同：0
> 
> 时间：2013-04-17T18:55:14.383
> 
> 标签：heroku, imagemagick, paperclip, rmagick

我正在尝试拍摄上传视频的快照。以下 Paperclip 处理器在我的本地环境中运行良好，但在 Heroku 中失败。

```
module Paperclip
   class VideoThumbnail < Processor

  require 'RMagick'
   attr_accessor :current_geometry, :target_geometry, :format, :whiny, :convert_options, :source_file_options

    def initialize file, options = {}, attachment = nil
      super
      @file                = file
      @format_op              = options[:format]
      @format = File.extname(@file.path)
      @basename = File.basename(@file.path, @format)
    end

    def make  
      src = @file
      dst = Tempfile.new([@basename, ".png"])
      dst.binmode
      parameters = []
      parameters << "-quiet"
      parameters << ":source"
      parameters << ":dest"
      parameters = parameters.flatten.compact.join(" ").strip.squeeze(" ")

      success = Paperclip.run("convert", parameters, :source => "#{File.expand_path(file.path)}[1]", :dest => File.expand_path(dst.path))

      dst
    end
  end
end 
```

错误如下：

```
2013-04-17T18:25:20.781972+00:00 heroku[router]: at=info method=POST path=/admin/content_items host=mclauncher.herokuapp.com fwd="186.55.107.205" dyno=web.1 connect=1ms service=12253ms status=500 bytes=643
2013-04-17T18:25:20.774386+00:00 app[web.1]: convert: Delegate failed `"ffmpeg" -v -1 -vframes %S -i "%i" -vcodec pam -an -f rawvideo -y "%u.pam" 2> "%Z"' @ delegate.c/InvokeDelegate/1060.
2013-04-17T18:25:20.779544+00:00 app[web.1]: 
2013-04-17T18:25:20.774386+00:00 app[web.1]: convert: missing an image filename `/tmp/Valves20130417-2-170vly120130417-2-78zghs.png' @ convert.c/ConvertImageCommand/2838.
2013-04-17T18:25:20.774386+00:00 app[web.1]: convert: unable to open image `/tmp/magick-XXqompcz.pam': No such file or directory @ blob.c/OpenBlob/2480.
2013-04-17T18:25:20.779544+00:00 app[web.1]: 
2013-04-17T18:25:20.779544+00:00 app[web.1]: 
2013-04-17T18:25:20.780154+00:00 app[web.1]: Processing by Admin::ContentItemsController#create as HTML
2013-04-17T18:25:20.779544+00:00 app[web.1]:   lib/paperclip_processors/video_thumbnail.rb:47:in `make'
2013-04-17T18:25:20.779544+00:00 app[web.1]: ):
2013-04-17T18:25:20.780154+00:00 app[web.1]: Command :: convert -quiet '/tmp/Valves20130417-2-170vly1.mp4[1]' '/tmp/Valves20130417-2-170vly120130417-2-78zghs.png'
2013-04-17T18:25:20.779544+00:00 app[web.1]: 
2013-04-17T18:25:20.779544+00:00 app[web.1]: Cocaine::ExitStatusError (Command 'convert -quiet '/tmp/Valves20130417-2-170vly1.mp4[1]' '/tmp/Valves20130417-2-170vly120130417-2-78zghs.png'' returned 1\. Expected 0
2013-04-17T18:25:20.779544+00:00 app[web.1]: Here is the command output:
2013-04-17T18:25:20.780154+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"F5Y3tflzqvUlDbaOPBDiYHwUTGIVpoMaUIXL/QQfkbg=", "content_item"=>{"content_group_id"=>"3", "name"=>"asd", "emailable"=>"", "app_launch_url"=>"", "app_install_url"=>"", "file_item"=>#<ActionDispatch::Http::UploadedFile:0x000000061d2878 @original_filename="Valves.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"content_item[file_item]\"; filename=\"Valves.mp4\"\r\nContent-Type: video/mp4\r\n", @tempfile=#<File:/tmp/RackMultipart20130417-2-1wvc61m>>}, "commit"=>"Create Content item"} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:28:31.760

我可能遗漏了一些东西，但看起来 heroku 有一个只读磁盘存储。看看[这个](https://devcenter.heroku.com/articles/read-only-filesystem)。相反，使用 S3 上传是存储文件的首选方式。他们也有[一篇](https://devcenter.heroku.com/articles/s3)关于这个主题的文章。

# php - 如何判断点击了哪个按钮？

> ID：16067922
> 
> 赞同：0
> 
> 时间：2013-04-17T18:55:48.437
> 
> 标签：php, javascript, jquery

我有两个按钮 prev/next 调用`getJSON`. 我想根据单击的按钮更改查询。这是我的按钮和`getjson`语句

```
<input class="buttonsr" type="button" onClick="next()" name="NextLoad" value="Next Load"><input class="buttonsr" type="button" onClick="prev()"name="PrevLoad" value="Prev. Load"> 
```

```
$.getJSON("loadloads.php", document.getElementById('LoadNumber').value, jsonhandler) 
```

我想使用`LoadNumber`GET 执行类似下面的操作。

```
if isset($_GET['prev']){
    $find = 'Where L.$_GET['LoadNumber'] > (max)LoadNumber FROM tblLoads'
}
if isset($_GET['next']){
    $find = 'Where L.$_GET['LoadNumber'] < (min)LoadNumber FROM tblLoads'
}
else{
    $find = 'L.LoadNumber = (SELECT MAX(LoadNumber) FROM tblLoads)'
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:06:02.850

您应该使用相同的函数并将参数传递给服务器。就像是

```
<input class="buttonsr" type="button" onClick="page('next')" name="NextLoad" value="Next    Load">

function page(direction) {
   $.getJSON("loadloads.php?direction="+direction,document.getElementById('LoadNumber').value,jsonhandler)
} 
```

在服务器端，使用 $_GET['direction'] 来查看您是走 NEXT 还是 PREVIOUS。

```
if ($_GET['direction'] == 'next') { 
   // GO NEXT
} else {
   // GO PREV
} 
```

顺便说一句，“isset()”只需要 2 个“s”；）希望这会有所帮助，如果我错过了重点，您可以发表评论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:46:49.673

我可能错了，但我相信如果你想访问 $_GET 超级全局中的“LoadNumber”，那么你需要为 $.getJSON 中的数据参数传入一个对象，如下所示：

```
 $.getJSON("loadloads.php", { LoadNumber:$('#LoadNumber').val() }, jsonhandler);
    // NOTE: I used jquery shorthand instead of document.getElementById() to get the value
    // simply to shorten it up. 
```

我以前没有使用过 $.getJSON() ，但是从文档中： [http](http://api.jquery.com/jQuery.getJSON/)
://api.jquery.com/jQuery.getJSON/ 它说 $.getJSON 只是 $.ajax 使用 get 请求方法的简写，所以如果你传递一个带有您要查找的密钥的对象，然后我的猜测是 $.getJSON 会将其放入 $_GET 中供您获取。

Kolkin 也是正确的，这段代码容易受到 SQL 注入的影响，你不应该直接将来自 $_GET、$_POST 或 $_REQUEST 的数据插入到你的 SQL 查询中而不过滤它。您可能会向恶意注入打开代码，这些注入可能会清除数据库中的数据或访问敏感数据并将其返回。

希望这可以帮助。

# javascript - 尝试使用 jQuery.data() API 缓存 jQuery 插件中的函数

> ID：16067923
> 
> 赞同：3
> 
> 时间：2013-04-17T18:55:48.957
> 
> 标签：javascript, jquery, html, jquery-plugins, dom-events

请针对以下提到的场景提出解决方案

**背景（jQuery插件）：**

```
$.fn.myplugin = function (action) {
    if (actions[action]) {
        return actions[action].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof action === 'object' || !action) {
        return actions.init.apply(this, arguments);
    } else {
        $.error('Action ' + action + ' does not exist on myplugin');
        return this;
    }
}; 
```

和可变**动作**看起来像：

```
var actions = {
    init: function (options) {
        if (this.length) {
            var settings = $.extend({}, $.fn.myplugin.defaults);
            return this.each(function () {
                if (options) {
                    settings = $.extend(settings, options);
                }

                $(this).data('myplugin', new MyPlugin($(this), settings));
            });
        } else {
            throw new Error('unable to init undefined');
        }
    },
    update: function () {
        ...
    },
    destroy: function () {
        ...
    }
}; 
```

和**MyPlugin**看起来像

```
function MyPlugin($el, settings) {
    var $content = $('.content', $el);

    var a = function setup() { ... };

    var b = function hold() { ... }

    $content.on({
        'click': function(e) { ... },
        'hover': function(e) { ... }
    });
} 
```

我知道我可以将 $.cache 转储到控制台并查看 .data() 中关联的内容。

**想要的问题/建议：**

如果我像这样调用更新函数，`$('myEle').myplugin('update')`我需要`update function`更改使用`.data()`API 创建和缓存的 MyPlugin 实例的状态。有哪些可能的方法来做到这一点？

我目前的结果`$('myEle').data('myplugin')`显示`MyPlugin{}`在花括号之间没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:54:25.883

The problem doesn't have anything to do with jQuery or the `data()` API, it's due to a misunderstanding about functions, objects and constructors in JavaScript.

This is easy to test inside the JavaScript console in a browser:

```
> function MyPlugin() { var a = 1; var b = 2; }
undefined
> new MyPlugin()
MyPlugin {}

> function MyPlugin() { this.a = 1; this.b = 2; }
undefined
> new MyPlugin()
MyPlugin {a: 1, b: 2} 
```

# java - C++ 到 Java 的转换 - 析构函数

> ID：16067925
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:55:53.837
> 
> 标签：java, c++, destructor

我需要将此程序转换为java。我可以处理除析构函数以外的所有事情。现在我已经阅读了有关 GC（垃圾收集器）及其不可靠性的全部内容。我在想，如果没有办法或其他方法，为什么要为我放置一个析构函数来转换。

```
#include<iostream>

using namespace std;

class Timer{
      public:
             Timer();
             ~Timer();
      };
Timer::Timer(){
               cout<<"Install a timer"<<endl;
               }
Timer::~Timer(){
                cout<<"Demolition of timer"<<endl;
                }

class Bomb: public Timer{
      public:
             Bomb();
             ~Bomb();
             };
Bomb::Bomb(){
             cout<<"Install a timer in bomb"<<endl;
             }
Bomb::~Bomb(){
              cout<<"Bomb explode..."<<endl;
              }

int main()
{
    Timer* aTimer = new Timer;
    Bomb* aBomb = new Bomb;
    delete aTimer;
    delete aBomb;

    system("pause");
    return 0;
} 
```

到目前为止，我想出的是使用 Eclipse 的这些东西......

```
public class mainting{

    public static void main(String test[])
    {
        timer atimer = new timer();
        bomb abomb = new bomb();

    }
}

public class bomb extends timer {
    public bomb(){
        System.out.println("Install a timer in bomb");

    }

}

public class timer {

    public timer()
    {System.out.println("Install a timer");}

} 
```

我知道很直截了当。

这是 C++ 代码的输出

```
Install a timer
Install a timer
Install a timer in bomb
Demolition of timer
Bomb exploded
Demolition of timer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:24:20.680

您可能想查看[StackOverflow](https://stackoverflow.com/questions/2506488/java-finalize-method-call)上的这篇文章- 但请仔细阅读，因为它`finalize()`与 C++ 析构函数不同！您不能对它是否被调用、哪些对象仍然可用等做出假设。

我不确定Java是否`finalize`被认为是有害的。

对于您在考试中的简短程序，（如果您`finalize()`在 Java 版本中提供了一个方法），GC 不太可能调用它。但是，您可以证明您知道它是如何工作的，以及 C++ 和 Java wrt 对象销毁之间的区别。

编辑：

在 C++ 程序中，最后三行输出与 C++ Timer 对象的销毁相关联，然后是 C++ Bomb 对象，但该行`Demolition of timer`出现了两次 - 我认为您的教授可能试图在 C++ 中证明这一点，因为 Bomb继承自Timer，析构函数按派生类到基类的顺序调用。

附带说明一下，应该制作 C++ 析构函数`virtual`，但您可能会在将来的某个时候了解到这一点。

作为使用该`finalize()`功能的替代方法，您可以尝试以下操作：

```
public class mainting{

    public static void main(String test[])
    {
        timer atimer = new timer();
        bomb abomb = new bomb();

        atimer.destroy();  // since no destructor in Java, add a "destroy()" method
        abomb.destroy();

    }
}

public class bomb extends timer {
    public bomb(){
        System.out.println("Install a timer in bomb");

    }

    public void destroy(){
        System.out.println("Bomb exploded");
        super.destroy(); // destroy parent object
    }
}

public class timer {

    public timer()
    {System.out.println("Install a timer");}

    public void destroy() {
      System.out.println("Destruction of timer");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:01:43.283

您可以使用 try-with-resources 或使用`PreDestroy`注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:02:52.493

C++ 需要析构函数来释放对象持有的资源。最常见的需要是处理动态分配的内存。

在 Java 中，动态分配的内存由垃圾回收自动处理。为此，不需要析构函数。

其他资源可以通过显式方法处理。`finally`您可以在块中或在 Java 7 中使用[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)调用此方法。无论如何，请考虑实现一个`java.io.Closeable`表明需要显式处理的接口，并提供一种方法来执行此操作。

对于这个程序，主要方法的近似翻译是：

```
public static void main(String test[])
{
    timer atimer = new timer();
    bomb abomb = new bomb();

    try {
       atimer.close();
       abomb.close();
    } catch ( java.io.IOException e ) {
        System.err.println( "An error occurred." );
    }
} 
```

# java - 表格如何左对齐 - 即在使用管道和 xmlparser 生成的 pdf 文档中？

> ID：16067926
> 
> 赞同：1
> 
> 时间：2013-04-17T18:55:54.137
> 
> 标签：java, css, itext

我正在使用下面的“管道”技术将 html 字符串转换为 PDF 格式。

它工作正常，除了 html 表显然默认位于页面的中心。--这是默认行为吗？如果是这样，是否有任何工作循环？

无论如何，我希望表格***保持***合理。

我怎样才能做到这一点？

注意：“文本对齐：左；” 例如，“margin-left: 5px”没有任何效果......也不支持老式的“align: left”属性。

感谢您的任何帮助/指导！

* * *

# java代码片段：

```
 -
         -
         -
        document.open();

        HtmlPipelineContext htmlContext = new HtmlPipelineContext(null);

        htmlContext.setTagFactory(Tags.getHtmlTagProcessorFactory());

        // CSS
        CSSResolver cssResolver = new StyleAttrCSSResolver();
        InputStream csspathtest = Thread.currentThread().getContextClassLoader().getResourceAsStream("css/testpdf.css");            
        CssFile cssfiletest = XMLWorkerHelper.getCSS(csspathtest);
        cssResolver.addCss(cssfiletest);             

        Pipeline<?> pipeline =  new CssResolverPipeline(cssResolver, new HtmlPipeline(htmlContext, new PdfWriterPipeline(document, writer)));

        XMLWorker worker = new XMLWorker(pipeline, true);
        XMLParser p = new XMLParser(worker);
        p.parse(is); //new FileInputStream("results/demo2/walden.html"));

        // step     
        document.close();
         -
         -
         - 
```

* * *

# CSS 片段：

```
 div
    {
        margin-left: 5px;
        padding-left: 5px;
    }

    h2
    {
        color:blue;
        text-align: center;
        font-size: 16pt;
        margin-bottom: 20px;
    }

    h6
    {
        color:#777;
        text-align: center;
        font-size: 14pt;
        margin-bottom: 20px;    
    }

    p
    {
        color: green;
        text-align: center; 
        font-style: italic;    
        font-size: 12pt;
        margin-bottom: 20px;    
    }

    table
    {
        font-family: Arial, Helvetica, sans-serif;
        color: blue;
        border-color: #777;
        border-style: solid;
        border-width: .1px;
        border-collapse: collapse;
        text-align: left;
        vertical-align: top;
        margin-bottom: 50px;
        margin-left: 5px;
        padding-left: 5px;
    }

    th
    {
        color: #777;
        font-size: 10pt;
        background-color: lightgrey;
        padding: 5px;
        text-align: left;
        vertical-align: top;    
    }

    td
    {
        font-size: 8pt;
        color: navy;
        border-top-color: #777;
        border-top-width: .01px;       
        padding: 5px;   
        text-align: left;
        vertical-align: top;     
    } 
```

# jquery - jQuery按钮单击不会运行

> ID：16067928
> 
> 赞同：1
> 
> 时间：2013-04-17T18:55:59.443
> 
> 标签：jquery, onclick

我无法让这个简单的脚本运行并盯着它看了一会儿，也没有看到任何语法错误。只希望在点击时显示警报。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type='text/javascript'>

$(document).ready(function() {
    $("#authenticate_button").click(function() {
        alert("click");
    });
});

</script>

</head>
<body>
    <input id="code" type="text"> 
    <button id='authenticate_button'>Authenticate</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T18:58:47.537

您正在使用网络浏览器直接打开文件。`//`是您当前协议（即`file://`）的简写，因此 jQuery 不会从 Google 的 CDN 加载。

您需要通过在此行中添加`http:`before来明确指定协议：`//`

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

我还要添加一个文档类型：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:05:37.843

你也可以试试这个：

**使用 MediaTemple 提供的 jQuery 的 CDN**

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

**使用微软的 CDN**

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.js"></script> 
```

作为 jQuery js 文件的替代品。

我建议这样做：

```
<script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.9.0.min.js"></script>  
<script>  
     // Fallback to loading jQuery from a local path if the CDN is unavailable  
     (window.jQuery || document.write('<script src="/scripts/jquery-1.9.0.min.js"><\/script>'));  
</script> 
```

# hsqldb - HSQL 迭代 FOR 语句不起作用

> ID：16067929
> 
> 赞同：1
> 
> 时间：2013-04-17T18:56:00.997
> 
> 标签：hsqldb

*使用HSQL* 2.2.5 我需要在存储过程中一次处理一行，所以我认为“迭代 FOR”语句可能对我有用。不幸的是，我似乎无法让它发挥作用。它应该看起来像：

FOR SELECT somestuff FROM sometable DO 一些随机的 SQL 语句 END FOR;

这留下了一些语法，但现在已经足够接近了。

问题似乎是循环内的语句永远不会执行。我已经验证了我的 SELECT 语句确实返回了一些东西。

所以让我们具体一点。当我执行这个存储过程时：

```
CREATE PROCEDURE b()
MODIFIES SQL DATA
BEGIN ATOMIC
   DECLARE count_var INTEGER;
   SET count_var = 0;
   WHILE count_var < 10 DO
      INSERT INTO TTP2 VALUES(count_var);
      SET count_var = count_var + 1;
   END WHILE;
END; 
```

我将 10 行插入到表 TTP2 中，值从 0 到 9。（TTP2 只定义了一列，类型为 INTEGER。）

但是当我像这样用 FOR 语句代替 WHILE 时：

```
CREATE PROCEDURE c()
MODIFIES SQL DATA
BEGIN ATOMIC
   DECLARE count_var INTEGER;
   SET count_var = 0;
   FOR SELECT id FROM ttp_by_session FETCH 10 ROWS ONLY DO
      INSERT INTO TTP2 VALUES(count_var);
      SET count_var = count_var + 1;
   END FOR;
END; 
```

我没有任何东西插入到 TTP2 中。（我已经验证 SELECT 语句返回 10 行，一列整数。）

当我关闭 FETCH 子句时，我仍然没有得到任何结果。ttp_by_session 是一个视图，但同样的事情发生在一个裸表上。

我究竟做错了什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:53:48.960

这适用于最新版本的 HSQLDB。尝试使用来自 HSQLDB 网站的 2.3.0 候选版本快照。

大约两年前最初添加 FOR 语句时，它的功能有限。该功能在以后的版本中得到了扩展。

# java - LinkedList subList 返回 List 而不是 LinkedList？

> ID：16067933
> 
> 赞同：2
> 
> 时间：2013-04-17T18:56:30.650
> 
> 标签：java, list, oop, types, linked-list

我有一个函数`f`，它获取 a 的子列表`LinkedList`并将其传递给`g`，它也需要 a `LinkedList`：

```
public static <T> void g(LinkedList<T> l) {
}

public static <T> void f() {
    LinkedList<T> l = new LinkedList<T>();
    ...
    LinkedList<T> l2 = l.subList(i,j);
    ...
    g(l2);
} 
```

但这不会编译，因为显然`LinkedList.subList`返回`List`而不是`LinkedList`. 所以我必须把它改成这样：

```
LinkedList<T> l2 = (LinkedList<T>)l.subList(i,j); 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:02:05.877

`subList` is defined in the `List` interface and returns a `List`. And if you check the implementation in `LinkedList`, which is actually in one of the parent classes (`AbstractList`), you will see that it does **not** return a `LinkedList` but a `SubList` and your cast will throw an exception.

Unless you use methods specific to `LinkedList`, the easiest way to fix this would be to change `g` to:

```
public static <T> void g(List<T> l) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:02:22.690

if g() doesn't use the method of LinkedList but only the List interface is preferable to define g() as follow:

```
public static <T> void g( List<T> l ) {
} 
```

and the main becomes:

```
public static <T> void f() {
    List<T> l = new LinkedList<T>();
    ...
    List<T> l2 = l.subList(i,j);
    ...
    g(l2);
} 
```

For a justification, [please consult this post](https://stackoverflow.com/questions/4062982/java-oop-list-versus-arraylist-as-reference-type).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:04:46.257

该方法在由 实现的接口中`sublist`声明。接口中方法的签名是：`List``LinkedList``sublist``List`

```
 List<E> subList(int fromIndex, int toIndex) 
```

因此，每当您从`LinkedList`类中调用此方法时，对象将为`LinkedList`，但方法的返回类型为`List`，因此将以 的形式给出`List`。但是，您可以将变量转换为`LinkedList`并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-15T13:17:15.340

您不能实例化“对象”这样的列表。List 是一个接口，而不是一个具体的类。接口只是一个类可以实现的一组功能；实例化一个接口没有任何意义。

希望能帮助到你。

克莱门西奥·莫拉莱斯·卢卡斯。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-17T19:02:49.637

Java wants as much polymorphism as you can get, so subList returns List, and you have to cast it to what you want.

# php - 如何在接口中使用多态性？

> ID：16067940
> 
> 赞同：0
> 
> 时间：2013-04-17T18:56:52.587
> 
> 标签：php, oop, inheritance, polymorphism

我正在尝试实现类似于存储库模式的东西。为此，我有一个所有 repos 都实现的接口和一个所有模型都扩展的模型基类。

我从 PHP 收到以下错误消息

> 致命错误： MVCBP\Repositories\UserRepository::add() 的声明必须与 D:\wamp\www\mvc\MVCBP\Repositories\ 中的 MVCBP\Core\RepositoryInterface::add(MVCBP\Core\Model $model) 兼容第 9 行的 UserRepository.php

我想要的是我在存储库类中的方法应该根据接口接受模型的实例作为参数。但是我想在实现中输入一个特定的模型。这在 PHP 中可行吗？

存储库接口.php

```
 <?php
  namespace MVCBP\Core;

  use MVCBP\Core\ModelInterface;

  interface RepositoryInterface
  {
    public function add(ModelInterface $model);
  } 
```

用户存储库.php

```
<?php
namespace MVCBP\Repositories;

use MVCBP\Core\PDOMySQL;
use MVCBP\Core\RepositoryInterface;
use MVCBP\Models\User;

class UserRepository extends PDOMySQL implements RepositoryInterface
{
    public function add(User $user)
    {
        //Omitted
    }

    //Omitted
} 
```

模型接口.php

```
<?php
namespace MVCBP\Core;

interface ModelInterface {} 
```

用户.php

```
<?php
namespace MVCBP\Models;

use MVCBP\Core\ModelInterface;
use MVCBP\Core\Validate;
use MVCBP\Repositories\UserRepository;

require_once(__DIR__ . '/../lib/password.php');

class User implements ModelInterface
{
    //Omitted
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:32:29.203

你可以这样做。您必须修改 UserRepository 定义。您的`add`方法只接受`MVCBP\Core\Model`实例。

用户存储库.php

```
<?php
namespace MVCBP\Repositories;

use MVCBP\Core\PDOMySQL;
use MVCBP\Core\RepositoryInterface;

//There was another mistake. Your User class is in MVCBP\Models namespace;
//use MVCBP\Core\Models\User; -> wrong one
use MVCBP\Models\User; //correct one
use MVCBP\Core\Model;

class UserRepository extends PDOMySQL implements RepositoryInterface
{
    public function add(Model $user)
    {
        if (!$user instanceof User)
            throw new \Exception('Exception msg', 101); //example exception
        //Omitted
    }

    //Omitted
} 
```

我更喜欢需要一个接口实例，即。

```
public function add(SomeInterface $user)
{
    if (!$user instanceof User)
       throw new \Exception('Exception msg', 101); //example exception
}

class User implements SomeInterface {
//some code
} 
```

然后 ReposituryInterface.php 看起来像这样：

```
<?php
namespace MVCBP\Core;

use MVCBP\Core\Model;
use MVCBP\Core\SomeInterface;

interface RepositoryInterface
{
    //We must change method definition so it can take SomeInterface implementation
    public function add(SomeInterface $model);
    public function find($id);
    public function edit(Model $model);
    public function remove($id);
    public function all();
} 
```

# time - 序言中的时间超出异常，获取中断前的最后一个值

> ID：16067950
> 
> 赞同：1
> 
> 时间：2013-04-17T18:57:13.967
> 
> 标签：time, prolog, try-catch

我有谓词计算数字 N 的阶乘，但是当时间超过 1 秒时，它被中断：

```
factorial( 0, 1 ).
factorial( N, Value ) :-
    N > 0,
    Prev is N - 1,
    factorial( Prev, Prevfact ),
    Value is Prevfact * N.

fact(N,V) :-
catch(call_with_time_limit(1, factorial(N,V)  ),
    time_limit_exceeded,
    write('time exceeded!')). 
```

如何在阶乘中断之前获得 V 的最后一个值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:31:07.233

在计算被中断之前，您的代码中没有最后一个值`V`- 它还没有被实例化。如果它被实例化，那么计算已经结束并且没有中断。

如果您想找出在一秒钟内可以计算出的最大阶乘，则必须通过某种不会被回溯破坏的机制来保存它（因为`catch/3`回溯）。

但是按照您的代码编写方式，在计算进行到一半之前，您将没有*任何价值可以保存。*如果它总共需要 3 秒，这意味着在它的前 1.5 秒运行期间您将没有任何价值可以保存：

```
factorial( 0, 1 ).
factorial( N, Value ) :-
    N > 0,
    Prev is N - 1,
    factorial( Prev, Prevfact ),
    % here - save the value of Prevfact, e.g. with nb_setval/2
    Value is Prevfact * N. 
```

那是因为它在从递归深度返回的路上计算它的阶乘。

要使其立即计算一些值，请将其更改为使用累加器：

```
factorial(N,F):- factorial(N,1,1,F).
factorial(N,A,K,F):- K>N -> F=A ; 
  A2 is A*K, K2 is K+1,   % save (A2,K) here
  factorial(N,A2,K2,F). 
```

# git - Phpstorm 创建我没有创建的随机差异

> ID：16067956
> 
> 赞同：2
> 
> 时间：2013-04-17T18:57:27.377
> 
> 标签：git, phpstorm

我使用 PHPStorm 作为我的 IDE。我也使用 Git 作为我的 VCS。

我去某些文件并进行一些更改；但是，由于某种原因，PHPStorm 也会自动创建我没有创建的其他差异，而这些差异只是删除和重新添加相同的行而不更改它们。

例如，假设我有 xyz.php：

```
$j = 1;
$f = 2; 
```

...然后我做一些小改动

```
$j = 1;
$f = 2;
$x = 3; //added this change - that's it 
```

然后保存。

运行 a`git diff`会显示：

```
-$j = 1;
+$j = 1;
-$f = 2;
+$f = 2;
+$x = 3; //added this change - that's it 
```

这在选定的几个文件中始终如一地发生。

关于可能导致这种情况以及如何使其停止发生的任何想法？

此外，如果它有帮助，如果我在 Eclipse 或任何其他编辑器中编辑文件，这不会发生。

# c# - 按列排序的 Linq 查询摘要

> ID：16067961
> 
> 赞同：3
> 
> 时间：2013-04-17T18:57:48.793
> 
> 标签：c#, linq, c#-4.0

场景是这样的

```
public class Test {
   public string name;
   public int val1;
    public int val1;
}

name |val 1 |val 2|
'aa' | 10   | 4   | 
'aa' | 30   | 5   | 
'bb' | 14   | 4   |
'bb' | 16   | 6   | 
'cc' | 5    | 5   |
'cc' | 2    | 1   |
'cc' | 1    | 1   | 
```

按名称分组并为每个名称获取摘要 val_1 和 val_2 的最佳方法是什么

作为

```
name |val 1 |val 2|
'aa' | 40   | 9   | 
'bb' | 30   | 10  | 
'cc' | 8    |  7  | 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T18:59:46.393

尝试这个

```
var results =
    from t in db.Tests
    group t by t.name into g
    orderby g.Key
    select new
    {
        name = g.Key,
        val_1 = g.Sum(x => x.val_1),
        val_2 = g.Sum(x => x.val_2)
    }; 
```

或者，如果您更喜欢流畅的语法：

```
var results = db.Tests.GroupBy(t => t.name)
                      .OrderBy(g => g.Key)
                      .Select(g => new
                              {
                                  name = g.Key,
                                  val_1 = g.Sum(x => x.val_1),
                                  val_2 = g.Sum(x => x.val_2)
                              }); 
```

# vba - 键值对，遍历字典 vba

> ID：16067965
> 
> 赞同：4
> 
> 时间：2013-04-17T18:58:01.177
> 
> 标签：vba, excel

我正在尝试一次读取一个单元格并将其存储为单元格并将其频率作为其值。然后我想将所有键值对放入一个范围内，比如列 P 和 Q。我想我用下面的代码完成了工作的第一部分（虽然不是 100%）现在如何放置键值对到一个范围？

```
Dim D As Dictionary
Set D = New Dictionary
Dim DR As Range

 Set DR = Range(Cells(2, 2), Cells(2, 2).End(xlDown))

    For Each Cell In DR.Cells

        If Not D.Exists(Cell.Value) Then
        D.Add Cell, 1
        Else
        D.Exists (Cell.Value)
        D.Item(Cell.Value) = D.Item(Cell.Value) + 1
        End If

    Next Cell 
```

我大致有按每个键遍历字典的想法，但我做不到

```
Dim k as key 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:33:20.477

试试下面的代码：

```
Sub test()

    Dim D As Dictionary
    Set D = New Dictionary
    Dim DR As Range

    Dim lastRow As Long
    lastRow = Range("A65000").End(xlUp).Row

    Set DR = Range("A2:A" & lastRow)

    For Each Cell In DR

        If D.Exists(CStr(Cell.Value)) = False Then
               D.Add CStr(Cell.Value), 1
        Else
            D.Exists (Cell.Value)
            D.Item(Cell.Value) = D.Item(Cell.Value) + 1
        End If

    Next

    i = 2
    For Each Key In D
        Range("P" & i).Value = Key
        Range("Q" & i).Value = D(Key)
        i = i + 1
    Next

End Sub 
```

# xml - golang XML 未正确解组

> ID：16067966
> 
> 赞同：6
> 
> 时间：2013-04-17T18:58:02.817
> 
> 标签：xml, xml-parsing, go

我需要解组的 XML 格式如下：

```
data := `
<table>
    <name>
        <code>23764</code>
        <name>Smith, Jane</name>
    </name>
    <name>
        <code>11111</code>
        <name>Doe, John</name>
    </name>
</table>
` 
```

我尝试了以下结构和代码无济于事：

```
type Customers struct {

    XMLName xml.Name `xml:"table"`
    Custs []Customer
}

type Customer struct {

    XMLName xml.Name `xml:"name"`
    Code string `xml:"code"`
    Name string `xml:"name"`
}

...

var custs Customers
err := xml.Unmarshal([]byte(data), &custs)
if err != nil {
    fmt.Printf("error: %v", err)
    return
}

fmt.Printf("%v", custs)

for _, cust := range custs.Custs {

    fmt.Printf("Cust:\n%v\n", cust)
} 
```

范围没有打印出来，打印`custs`只会给我`{{ table} []}`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T19:06:29.063

正确的结构如下：

```
type Customer struct {
    Code string `xml:"code"`
    Name string `xml:"name"`
}

type Customers struct {
    Customers []Customer `xml:"name"`
} 
```

[你可以在这里的操场上](http://play.golang.org/p/D2CCP0dwdo)试一试。问题是您没有为 .xml 分配 xml 标记`[]Customer`。

你解决这个问题的方式，使用`xml.Name`也是正确的，但更冗长。[您可以在此处](http://play.golang.org/p/LJFSctBgSi)查看工作代码。如果您出于某种原因需要使用该`xml.Name`字段，我建议您使用私有字段，以免结构的导出版本混乱。

# linux - cppcms - 共享库 - Linux

> ID：16067967
> 
> 赞同：4
> 
> 时间：2013-04-17T18:58:05.753
> 
> 标签：linux, debian, shared-libraries, cppcms

我正在尝试在 Linux（Debian 发行版）上使用 cppcms 框架。

我按照网站上构建教程中描述的步骤进行操作，然后尝试构建 hello world 应用程序。

我已经成功编译了源代码，但是当我尝试运行它时，出现以下错误：

./hello：加载共享库时出错：libcppcms.so.1：无法打开共享对象文件：没有这样的文件或目录

我对 Linux 比较陌生，所以我不得不进行一些研究并遇到了这些称为共享库的东西。据我了解，这些 *.so 文件正是我需要创建的。我还读到库的基本文件夹是 /home/usr/lib 所以我尝试将文件复制到该文件夹​​中，但它没有帮助。

我非常感谢任何可能让我解决这个问题的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-12T15:14:35.260

我能够通过执行“sudo ldconfig”从这个问题中恢复过来

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T08:01:35.173

这也对我有用：

```
export LD_LIBRARY_PATH=/path/to/library/
./hello -c config.js 
```

其中“/path/to/library/”是 libcppcms.so.1 所在的实际目录。（我的是 /usr/local/lib/）

[从[http://comments.gmane.org/gmane.comp.lib.cppcms.user/764](http://comments.gmane.org/gmane.comp.lib.cppcms.user/764)得到它]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:45:57.833

1.  而不是自己构建 CppCMS，安装准备使用 deb：[http ://cppcms.com/wikipp/en/page/apt#Apt-Get.Repositories](http://cppcms.com/wikipp/en/page/apt#Apt-Get.Repositories)
2.  您可以使用提到您正在谈论的问题的故障排除指南：http: [//cppcms.com/wikipp/en/page/cppcms_1x_build_troubleshooting#My.sample.application.does.not.find.the.shared.object。 .code.libcppcms.so..code..when.I.try.to.run.it。](http://cppcms.com/wikipp/en/page/cppcms_1x_build_troubleshooting#My.sample.application.does.not.find.the.shared.object..code.libcppcms.so..code..when.I.try.to.run.it.)

# java - 将长日期解析为月-日-年字符串的快速方法

> ID：16067968
> 
> 赞同：1
> 
> 时间：2013-04-17T18:58:05.793
> 
> 标签：java, gwt

您如何将 Long 日期解析为：`1366222239935`以空格分隔的字符串`Month-Day-Year`？喜欢成`"Apr 18 2013"`

将它传递给 a`java.util.Date`和 a`String`将给出一个日期字符串，其中包含很多我不需要在 GWT 应用程序中呈现的信息。

需要做这种风格，因为我会将结果传递给 3 个`<span>`元素；所以实际上以空格分隔的日期将分为几部分：

*   月
*   天
*   年

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:15:53.617

由于 gwt 不支持 `SimpleDateFormat`

而是使用 Gwt [**DateTimeFormat**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/DateTimeFormat.html)

```
DateTimeFormat f = DateTimeFormat.getFormat("dd-MMM-yyyy");

String datestring =f.format(dateGeneratedbyLong); 
```

并确保`DateTimeFormat`你可以同时使用的 import`client`和`server`side 。

还有另一个同名但包不同的类，它是客户端（限制您只能在客户端使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:03:02.413

该`Long`数字只是自 JavaScript 纪元（1970 年 1 月 1 日午夜，UTC 时间）以来的毫秒数。因此，不要解析它，而是使用`Date`对象的构造函数：

```
 var myDate = new Date(1366222239935);
  alert(myDate); 
```

这将显示“2013 年 4 月 17 日星期三 11:10:39 GMT-0700（太平洋夏令时间）”。我在 PST，但它将默认为您在语言环境设置中的任何时区。

在 Java 中的 GWT 应用程序中，只需执行以下操作：

```
 Date date=new Date(1366222239935); 
```

然后你可以用`SimpleDateFormat`它来渲染它为“dd/MM/yy”。

见[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:04:55.567

您可以将其转换为 a `Date`，然后`String`像这样手动构建您的 -

```
Date date = new Date(timeInMils);
String res = date.get(Calendar.MONTH) + " " + 
             date.get(Calendar.DAY_OF_MONTH) + " " + 
             date.get(Calendar.YEAR); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T19:03:23.000

尝试使用 SimpleDataFormat 检查[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html) >

`SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd/MM/yy");`

`String dateAsString = simpleDateFormat.format(new Date());`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T19:09:34.180

这样做

```
 Date d = new Date();

    d.setTime(1366222239935l);

    System.out.println(d);

    SimpleDateFormat sdf =  new SimpleDateFormat("MMMM dd yyyy");

    try {
        System.out.println(sdf.format((d)));
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T19:15:36.567

```
 long diff = 1366222239935l;

    Date date = new Date(diff);
    SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy");
    System.out.println(sdf.format(date)); 
```

# intuit-partner-platform - 销售收据流程信用卡支付QBO V2

> ID：16067969
> 
> 赞同：-1
> 
> 时间：2013-04-17T18:58:13.233
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在尝试自动创建销售收据并通过 QBOE 向信用卡收费。API 似乎表明通过设置 Detail->CreditCard->CreditChargeInfo 可以做到这一点。我希望在 CreditChargeResponse 元素中收到一些信息，但是我在响应中没有收到有关尝试的 CC 收费的信息。此外，创建了销售收据并选择了正确的付款方式，但付款下没有保存 CC 信息，并且似乎没有尝试从以下请求中提供的卡中扣款。我剩下以下问题

1.  为了在 QBOE 中保留和收取 CC 费用，我是否缺少某些要素？
2.  是否有关于使用 IPP API 处理 CC 所需的业务逻辑的任何文档？
3.  谁能提供一个工作示例来说明此请求的外观？

要求 ：：：

```
<SalesReceipt xmlns='http://www.intuit.com/sb/cdm/v2'>
<Header xmlns:ns3='http://www.intuit.com/sb/cdm/v2'>
    <ns3:TxnDate>2013-04-17-07:00</ns3:TxnDate>
    <ns3:TaxRate>9.2</ns3:TaxRate>
    <ns3:TaxAmt>0.138</ns3:TaxAmt>
    <ns3:CustomerId>1027</ns3:CustomerId>
    <ns3:TotalAmt>1.64</ns3:TotalAmt>
        <ShipAddr>
            <Line1>1234 Fake St SE</Line1>
            <City>Fake City</City>
            <CountrySubDivisionCode>WA</CountrySubDivisionCode>
            <PostalCode>98258</PostalCode>
        </ShipAddr>
    <ns3:PaymentMethodId>13</ns3:PaymentMethodId>
    <ns3:PaymentMethodName>MasterCard</ns3:PaymentMethodName>
    <ns3:Detail xmlns:ns5='http://www.intuit.com/sb/cdm/v2'>
         <ns5:CreditCard xmlns:ns7='http://www.intuit.com/sb/cdm/v2'>
            <ns7:CreditChargeInfo xmlns:ns8='http://www.intuit.com/sb/cdm/v2'>
                <ns8:Number>[ACTUALY_VALID_CC#]</ns8:Number>
                <ns8:Token>************1111</ns8:Token>
                <ns8:Type>MasterCard</ns8:Type>
                <ns8:NameOnAcct>Andrew L Reifers</ns8:NameOnAcct>
                <ns8:CcExpirMn>**</ns8:CcExpirMn>
                <ns8:CcExpirYr>**</ns8:CcExpirYr>
                <ns8:BillAddrStreet>1234 Fake St SE</ns8:BillAddrStreet>
                <ns8:ZipCode>98258</ns8:ZipCode>
                <ns8:Cvv>***</ns8:Cvv>
                <ns8:CCTxnMode>CardPresent</ns8:CCTxnMode>
                <ns8:CCTxnType>Charge</ns8:CCTxnType>
            </ns7:CreditChargeInfo>
        </ns5:CreditCard>
        </ns3:Detail>
</Header>
<Line xmlns:ns11='http://www.intuit.com/sb/cdm/v2'>
    <ns11:Id>1</ns11:Id>
    <ns11:Desc>Fake Sale Item</ns11:Desc>
    <ns11:Amount>1.50</ns11:Amount>
    <ns11:Taxable>true</ns11:Taxable>
    <ns11:ItemId>359</ns11:ItemId>
    <ns11:UnitPrice>0.50</ns11:UnitPrice>
    <ns11:Qty>3</ns11:Qty>
</Line> 
```

回复 ：：：

```
<SalesReceipt xmlns="http://www.intuit.com/sb/cdm/v2" xmlns:qbp="http://www.intuit.com/sb/cdm/qbopayroll/v1" xmlns:qbo="http://www.intuit.com/sb/cdm/qbo">
<Id idDomain="QBO">7413</Id>
<SyncToken>0</SyncToken>
<MetaData>
    <CreateTime>2013-04-17T11:50:06-07:00</CreateTime>
    <LastUpdatedTime>2013-04-17T11:50:06-07:00</LastUpdatedTime>
</MetaData>
<Header>
    <DocNumber>4170</DocNumber>
    <TxnDate>2013-04-17-07:00</TxnDate>
    <CustomerId idDomain="QBO">1027</CustomerId>
    <SalesTaxCodeId idDomain="QBO">1</SalesTaxCodeId>
    <SalesTaxCodeName>IS_TAXABLE</SalesTaxCodeName>
    <SubTotalAmt>1.50</SubTotalAmt>
    <TaxRate>9.2</TaxRate>
    <TaxAmt>0.14</TaxAmt>
    <TotalAmt>1.64</TotalAmt>
    <ToBePrinted>false</ToBePrinted>
    <ToBeEmailed>false</ToBeEmailed>
    <ShipAddr>
        <Line1>1234 Fake St SE</Line1>
        <City>Fake City</City>
        <CountrySubDivisionCode>WA</CountrySubDivisionCode>
        <PostalCode>98258</PostalCode>
        <GeoCode>LAT=47.974638,LNG=-122.073567</GeoCode>
    </ShipAddr>
    <ShipMethodId idDomain="QBO"/>
    <DepositToAccountId idDomain="QBO">37</DepositToAccountId>
    <DepositToAccountName>Undeposited Funds</DepositToAccountName>
    <PaymentMethodId idDomain="QBO">13</PaymentMethodId>
    <PaymentMethodName>MasterCard</PaymentMethodName>
    <DiscountTaxable>true</DiscountTaxable>
</Header>
<Line>
    <Id>1</Id>
    <Desc>Fake Sale Item</Desc>
    <Amount>1.50</Amount>
    <Taxable>true</Taxable>
    <ItemId>359</ItemId>
    <UnitPrice>0.5</UnitPrice>
    <Qty>3</Qty>
</Line> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:35:16.843

不幸的是 v2 不支持信用卡，注释说明它是一个只读字段。没有 v2 解决方法。支持的 api 是 v3，如果您想在此处注册 v3 测试版：http: [//ippblog.intuit.com/blog/2013/03/application-for-early-access-to-quickbooks-api-v3 .html](http://ippblog.intuit.com/blog/2013/03/application-for-early-access-to-quickbooks-api-v3.html)

谢谢贾里德
_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:24:52.183

V2 IPP API 的解决方法是创建发票而不是销售收据，然后使用 Payment API 和适当的信用卡立即接受发票付款，并将 ProcessPayment 布尔值设置为 true。正如 Jared 所提到的：无法将此付款应用于销售收据。

# php - 在一个字符串中打印 PHP 数组值

> ID：16067971
> 
> 赞同：0
> 
> 时间：2013-04-17T18:58:27.893
> 
> 标签：php, arrays, string

我有一个数组，我加载如下：

```
foreach ($_SESSION['cart'] as $item) 
{
  $pid = $item['itemId'];
  $q = $item['qty']; 
  $orderedItems[]=array('itemId'=>$pid,'qty'=>$q);
} 
```

我现在需要创建一个变量，它将数组的结果存储在一个字符串中，如下所示：

```
"For itemA ==> 2 sample
For itemB ==> 1 sample" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:05:02.173

```
$string = join("\n", array_map(function($x) {return "For $x[itemId] ==> $x[qty] sample";}, $orderedItems)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:01:11.427

```
$string = "";
foreach ($orderedItems as $item)
    $string .= "For item{$item['itemId']} ==> {$item['qty']} sample\n";
$string = rtrim($string); 
```

# jquery - 使用 jquery 修改 Dom 元素？

> ID：16067972
> 
> 赞同：0
> 
> 时间：2013-04-17T18:58:30.723
> 
> 标签：jquery

大家好，我有一个需要修改的 html..这是我的 html

```
 <div class="navbar navbar-inverse">
<div class="navbar-inner">
    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a>
    <div class="nav-collapse collapse">
        <ul class="nav-pills SC-Topmenu nav">

            <div class="top-nav ">
                <div class="title-bar">
                    <div data-original-title="Doubleclick for edit" class="title username editable editable-click" data-type="text" data-pk="" data-url="/post" rel="tooltip" data-placement="bottom">Home</div>
                </div>
                <div class="panel"></div>
            </div>
            <div style="display: inline-block;" class="top-nav">
                <div class="title-bar">
                    <div style="display: block;" data-original-title="Doubleclick for edit" class="title username editable editable-click editable-unsaved" data-type="text" data-pk="" data-url="/post" rel="tooltip" data-placement="bottom">Categorys</div>
                </div>
                <div class="panel"></div>
                <div style="display: table-cell;" class="jstree jstree-8 jstree-2">
                    <ul>
                        <li id="Li7" class="Root jstree-last jstree-open"><ins class="jstree-icon">&nbsp;</ins><a href="javascript:void(0)" class="Titleanchor"><ins class="jstree-icon">&nbsp;</ins>Title1</a>
                            <ul class="MenuContentholder">
                            <li><a><ins class="jstree-icon">&nbsp;</ins>1</a></li>
                        <li><a><ins class="jstree-icon">&nbsp;</ins>2</a></li>
                            </ul>
                            </li>
                    </ul>
                </div>
                <div style="display: table-cell;" class="jstree jstree-10 jstree-focused jstree-4">
                     <ul>
                        <li id="Li6" class="Root jstree-last jstree-open"><ins class="jstree-icon">&nbsp;</ins><a href="javascript:void(0)" class="Titleanchor"><ins class="jstree-icon">&nbsp;</ins>Title2</a>
                            <ul class="MenuContentholder">
                            <li><a><ins class="jstree-icon">&nbsp;</ins>1</a></li>
                        <li><a><ins class="jstree-icon">&nbsp;</ins>2</a></li>
                            </ul>
                            </li>
                    </ul>
                </div>
                <div style="display: table-cell;" class="jstree jstree-7 jstree-1">
                    <ul>
                        <li id="Li5" class="Root jstree-last jstree-open"><ins class="jstree-icon">&nbsp;</ins><a href="javascript:void(0)" class="Titleanchor"><ins class="jstree-icon">&nbsp;</ins>Title3</a>
                            <ul class="MenuContentholder">
                            <li><a><ins class="jstree-icon">&nbsp;</ins>1</a></li>
                        <li><a><ins class="jstree-icon">&nbsp;</ins>2</a></li>
                            </ul>
                            </li>
                    </ul>
                </div>
                <div style="display: table-cell;" class="jstree jstree-9 jstree-3">
                    <ul>
                        <li id="Li4" class="Root jstree-last jstree-open"><ins class="jstree-icon">&nbsp;</ins><a href="javascript:void(0)" class="Titleanchor"><ins class="jstree-icon">&nbsp;</ins>Title4</a>
                            <ul class="MenuContentholder">
                            <li><a><ins class="jstree-icon">&nbsp;</ins>1</a></li>
                        <li><a><ins class="jstree-icon">&nbsp;</ins>2</a></li>
                            </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </ul>
    </div>
</div> 
```

上面的html应该这样转换

```
 <div class="navbar navbar-inverse">
    <div class="navbar-inner">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a>
        <div class="nav-collapse collapse">
            <ul class="nav-pills SC-Topmenu nav">
                <li><a href="Index.html">Home </a></li>
                <li><a href="Index.html">Categorys </a>
                    <div>
                        <ul>
                            <h3>Title1</h3>
                             <li><a>1</a></li>
                             <li><a>2</a></li>

                        </ul>
                         <ul>
                            <h3>Title2</h3>
                             <li><a>1</a></li>
                             <li><a>2</a></li>

                        </ul>
                         <ul>
                            <h3>Title3</h3>
                             <li><a>1</a></li>
                             <li><a>2</a></li>

                        </ul>
                         <ul>
                            <h3>Title4</h3>
                             <li><a>1</a></li>
                             <li><a>2</a></li>

                        </ul>
                         <ul>
                            <h3>Title5</h3>
                             <li><a>1</a></li>
                             <li><a>2</a></li>

                        </ul>

                    </div>

                </li>
                </ul>
            </div>
        </div>
    </div> 
```

到目前为止，所有属性都应该被删除

```
 $('.top-nav').each(function () {
        var container = $(this);
        //$(container).find('.custom-content').each(function () { var custom_content = $('.custom-content').html(); $(container).find('.MenuContentholder').append('<li><a href="javascript:void(0)">' + custom_content + '</a></li>'); });
        $(container).find('.jstree-icon').addClass('icon');
        $(container).wrap('<div></div>')
        $(container).wrap('<li></li>');
        $(container).find('.title').wrap('<a href="#" class="SC-Title"><a>');
        //$(container).find('.widget-controls').remove();
        $(container).find('.SC-Title').html($(container).find('.SC-Title').children().html());
        $(container).find('.Root').parent('ul').unwrap();
        $(container).find('.SC-Title').unwrap();
        //$(container).find('ul').parent('div').children('ul').unwrap();

        //$('.panel').remove();
        alert($('.' + Areaclassselector).html());
        $('.Titleanchor').each(function () {            
            $(this).html('<h3>' + $(this).html() + '</h3>');
            $(this).find('h3').unwrap();
        });
        $(container).find('ins').remove();

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:49:39.367

我觉得很愚蠢，但我实际上已经为你做到了。干得好;

[JSfiddle](http://jsfiddle.net/Allendar/LBsmJ/)

**JavaScript**

```
$(document).ready(function() {
    var new_menu = '';

    $('.SC-Topmenu .top-nav').each(function() {
        var menuItem = $(this);
        var menuItemName = $('.title-bar div', this).html();

        new_menu += '<li><a href="Index.html">' + menuItemName + '</a>';

        counter = 0;

        $('[id^=Li]', this).each(function() {
            var subMenuItem1 = $(this);
            var subMenu1Name = $('.Titleanchor', this).html().split('</ins>')[1];
            var subMenu1Href = $()

            if (counter == 0) {
                new_menu += '<div>';
            }

            new_menu += '<ul>';
            new_menu += '<h3>' + subMenu1Name + '</h3>';

            $('ul li', this).each(function() {
                var subMenuItem2 = $(this);
                var subMenuItem2Name = $('a', this).html().split('</ins>')[1];

                new_menu += '<li><a>' + subMenuItem2Name + '</a></li>';
            });

            new_menu += '</ul>';

            if (counter == subMenuItem1.length - 2) {
                new_menu += '</div>';
                counter = 0;
            }

            counter++;
        });

        new_menu += '</li>';
    });

    $('.SC-Topmenu').html(new_menu);
}); 
```

# php - 用于拆分字符串的正则表达式，但 URL 除外

> ID：16067973
> 
> 赞同：2
> 
> 时间：2013-04-17T18:58:38.333
> 
> 标签：php, regex, preg-match-all, preg-split

`/`我需要在除and之外的任何非字母数字字符上拆分字符串`-`。例如，在`preg_split()`：

```
/[^a-zA-Z0-9\/\-]/ 
```

这很好用，但现在我想在所有这些点拆分字符串，*除非*在 URL 中找到字符（即我想将 URL 保持在一起）。我认为 URL 是一个以空格分隔的子字符串，以`http://`or开头`https://`。换句话说：

```
My string. https://my-url.com?q=3 More strings. 
```

应该分成：

```
[0] My
[1] string
[2] https://my-url.com?q=3
[3] More
[4] strings 
```

我尝试了一些天真的方法，`/[^a-zA-Z0-9\/\-(https?\:\/\/.\s)]+/`但不幸的是，我不知道如何在字符类之外执行此操作，这显然没有给我想要的结果。

我现在正在使用 PHP，我希望只是使用`preg_split()`，但我愿意接受比这更好、更全面的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:01:58.487

You can't just stuff things into the character class. Everything will be treated as single characters. What you would want is a negative lookbehind, that ensures, there is no `https?://` before your match (separated only by non-whitespace characters). But only .NET supports variable-length lookbehinds. You could reverse the input and pattern and result to work around this, but that's a bit over kill. Just go from splitting to matching:

```
preg_match_all('~https?://\S*|[a-zA-Z0-9/-]+~', $input, $matches); 
```

Now `$matches[0]` will contain your desired array.

[Working demo.](http://ideone.com/6Ep7yB)

Note that you can change the delimiter to [pretty much anything](http://www.php.net/manual/en/regexp.reference.delimiters.php). This comes in handy, if you have loads of forward slashes, so you don't have to escape them. You also don't need to escape the hyphen if it's the last character in a character class, but in that case whether you do or not is rather a matter of taste.

# database - 根据表的数量计算查询的复杂度指数

> ID：16067974
> 
> 赞同：0
> 
> 时间：2013-04-17T18:58:39.177
> 
> 标签：database

在工作中，我们试图根据使用了多少表、它们之间的连接数以及（如果它证明实际上更适合计算）行数来形成某种查询复杂程度的度量标准。

是否有任何系统可以做到这一点或类似的事情？如果不是，那么用这些比例不完全恒定的事物创建度量标准的最佳方法是什么？最后，我们还将考虑在查询中要完成的输入数量和数据转换的数量（或复杂性）。是否有任何缺失的变量因素需要考虑在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:08:28.940

我不知道可以使用此类工具，但您可以在[此处](https://stackoverflow.com/a/3376793/80851)查看答案。

# jekyll - 我可以从两个不同的目录在 Jekyll 中生成内容吗

> ID：16067976
> 
> 赞同：3
> 
> 时间：2013-04-17T18:58:40.507
> 
> 标签：jekyll

我有两个有点不相关的来源，我想使用 Jekyll 将它们变成一个“站点”。但它们位于两个目录中。假设`PROJECT/site/`有主页和副本等，并且`PROJECT/clientlib/`有一堆库。例如，我想`PROJECT/site/index.md`成为`/index.html`和`PROJECT/clientlib/foo.js`成为`/clientlib/foo.js`

这是一个开源项目，所以我真的很想避免使用符号链接或子模块，这可能会使某人更难检查项目并开始使用它。而且我希望能够使用 Jekyll 开发服务器，而不需要对生成的文件进行修复。

有没有办法配置（或破解） Jekyll 以获得我希望的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-14T20:16:06.327

我刚刚发布了一个可以完成此任务的自定义 gem。它允许您指定一个`shared_dir`可以在多个 Jekyll 配置之间使用的公共基础：

[https://github.com/sumdog/jekyll-multisite](https://github.com/sumdog/jekyll-multisite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:48:01.693

您可以在 _config.yaml 文件中为它们提供相同的目标路径（代替默认路径`_site`，请参阅[https://github.com/mojombo/jekyll/wiki/Configuration](https://github.com/mojombo/jekyll/wiki/Configuration)

例如

```
destination: ../_site 
```

但是如果它们在两者之间重复，您将覆盖文件名等。

# c# - AVIReader - 保存帧的时间太长

> ID：16067977
> 
> 赞同：0
> 
> 时间：2013-04-17T18:58:45.553
> 
> 标签：c#, .net, aforge

我正在开发一个程序来从四个相机中抓取图像，并将它们变成一张图片，只有四张风格，一张四张图片。它会生成一个 .avi

```
 AVIReader reader = new AVIReader();
        List<byte[]> ImagemMainb = new List<byte[]>();
        reader.Open(_rootPath + Path.GetFileName(_arqsCam01[i]));
        while (reader.Position - reader.Start < reader.Length)
            {
                Bitmap aux = reader.GetNextFrame();
                Bitmap r = new Bitmap(aux.Width * 2, aux.Height * 2, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
                using (var g = Graphics.FromImage(r))
                {
                    g.DrawImage(aux, new Rectangle(0, 0, aux.Width, aux.Height));
                    ImagemMainb.Add(ImageToByte(r));                                                             
                 }                                    
            }
            reader.Close();
            reader.Dispose(); 
```

这是 ImageToByte 方法

```
public static byte[] ImageToByte(Image img)
    {
        byte[] byteArray = new byte[0];
        using (MemoryStream stream = new MemoryStream())
        {
            img.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
            stream.Close();

            byteArray = stream.ToArray();
        }
        return byteArray;
    } 
```

使用这些代码需要很长时间才能完成该过程！当我有一个 84000 个位图列表时，在这种情况下是 280 个视频，帧速率 = 5，大小 = 320x240，它需要很长时间。这段代码会有什么问题或有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:32:52.893

我找到了答案。

```
 AVIReader reader = new AVIReader();
 List<Bitmap> ImagemMain = new List<byte[]>();
 reader.Open(_rootPath + Path.GetFileName(_arqs[0]));
 while (reader.Position - reader.Start < reader.Length)
 {
        using (var aux = reader.GetNextFrame())
        {
             using (var r = new Bitmap(640, 480))
             {
                   using (var g = Graphics.FromImage(r))
                   {                                               
                       g.DrawImage(aux, new Rectangle(0, 0, aux.Width, aux.Height));                                                   
                       ImagemMain.Add((Bitmap)r.Clone());
                   }

             }
         }
  } 
```

每个视频上传 AVIWriter 我打开文件 .avi 并添加位图。有了这个速度更快，几乎不占用内存。

# c# - 标记枚举按位运算符未按预期工作

> ID：16067982
> 
> 赞同：1
> 
> 时间：2013-04-17T18:59:03.683
> 
> 标签：c#

我在 Windows Mobile 6.5 上将 C# 3.5 用于移动应用程序，我一直在使用这个简单的代码，但它突然停止工作：

```
//Regroup the issues
ScanIssuesEnum NewIssues = 0;
NewIssues |= Direction1Issues;
NewIssues |= Direction2Issues;

//Remove invalid directions because we don't care about them in bidirectionnal mode
NewIssues ^= ScanIssuesEnum.InvalidDirectionIssue;
return NewIssues; 
```

我彻底检查了我的所有类型，以确保我没有使用其他类型，所有内容都基于相同的 ScanIssuesEnum 类型，并且该类型是 [Flag] 的，如下所示：

```
[Flags] public enum ScanIssuesEnum
{
    TicketUsedTooSoonIssue = 1,
    TicketUsedTooLateIssue = 2,
    TicketUsageBustedIssue = 4,
    InvalidTripIssue = 8,
    InvalidDirectionIssue = 16,
    StartStopTooSoonIssue = 32,
    StartStopNotFoundIssue = 64,
    EndStopTooLateIssue = 128,
    EndStopNotFoundIssue = 256,
    MultipleUsageSameTripIssue = 512,
    MultipleUsageInFewHoursIssue = 1024,
    StudentTicketIssue = 2048,
    ConnectingTripWithinTimeframeFlag = 4096,
    UDESStudentTicketIssue = 8192,
} 
```

在我当前的问题中，我可以在两个 DirectionIssues 中看到 EndStopNotFoundIssue，当组合成 NewIssues 时，我得到一个包含两倍 EndStopNotFoundIssue 的值。我认为在我返回值之前并不重要，也许这只是一个视觉 IDE 错误，但不，问题仍然存在。更糟糕的是，当我点击删除 InvalidDirectionIssue 标志的行时，它会将其添加到 NewIssues ...

我疯了吗？^= 相当于 x = x ^ y 不是吗？所以我应该删除标志，而不是添加它吗？

谢谢

**编辑 #1 - DirectionIssues 的值**

根据 Wonko 的要求，Direction1Issue 和 Direction2Issue 的值都是 EndStopNotFoundIssue 或 256。

在“NewIssues ^= ScanIssuesEnum.InvalidDirectionIssue;”行之后 我的新问题由“EndStopNotFoundIssue | EndStopNotFoundIssue | InvalidDirectionIssue”组成。显然它不应该！

**编辑 #2 - DirectionIssues 的值被错误读取**

哈，两个 DirectionIssues 有不同的值，我只是读错了。实际上是 EndStopNotFoundIssue 和 EndStopTooLateIssue。该死的头脑没有读完整个单词嘿嘿。所以 OR 部分很好，是我的大脑在欺骗我。

我更改了关于 InvalidDirectionIssue 的有问题的部分，我试图使用“x = x & ~y”形式进行异或运算，并且它有效，不知道为什么它有效，而“x ^= y”却没有，但地狱！找到解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:14:29.763

有几件事可能会对您有所帮助。

*   ^ 是异或，因此它会切换/切换您应用的位，它不会清除它们。因此，如果`EndStopNotFoundIssue`未设置该值，则使用 ^ 将设置它，而不是清除它。如果要清除一个值，请使用`x &= ~y`(AND x 与 y 的反转位)。

*   `EndStopNotFoundIssue | EndStopNotFoundIssue`等于`EndStopNotFoundIssue`。将一个值与自身进行 ORing 只会返回相同的值。所以你没有告诉我们什么。您使用的是 a`+`而不是 an`|`或其他东西吗？您正在 ORing 中的变量的值真的是您认为的那样吗？您是否已在调试器中单步执行代码以查看每个阶段的值是什么？您需要发布更多代码，以便我们找出问题所在。

*   您使用的值似乎不是来自您的枚举（例如 0 和 Direction1Issues）。因此，我们无法阅读您的代码来找出可能出了什么问题，因为我们不知道 Direction1Issues 设置为什么。混合不同类型通常是个坏主意。0 是整数，但您将其设置为枚举类型。定义一个常量`None=0`，让您的代码更具可读性和类型安全性。

*   对于您的常量，请尝试使用以下样式 - 更容易查看您正在设置的位，知道您只设置了一位，并确保在添加新项目时正确计算下一个值：

    ```
    public enum ScanIssuesEnum
    {
        TicketUsedTooSoonIssue = 1<<0,
        TicketUsedTooLateIssue = 1<<1,
        TicketUsageBustedIssue = 1<<2,
        InvalidTripIssue       = 1<<3,
        InvalidDirectionIssue  = 1<<4,
        ... 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:03:34.150

`x ^= y`相当于`x = x ^ y`。这意味着它在标志枚举中切换 y 的状态存在。它可用于设置或取消设置。

# entity-framework - 实体框架迁移历史表

> ID：16067985
> 
> 赞同：0
> 
> 时间：2013-04-17T18:59:21.613
> 
> 标签：entity-framework, .net-4.5

是否可以更改迁移框架使用的历史表的名称？

我发现了这个：[http ://entityframework.codeplex.com/wikipage?title=Migrations%20History%20Table%20Customization](http://entityframework.codeplex.com/wikipage?title=Migrations%20History%20Table%20Customization)

但我无法在 .Net 框架的 4.5 版上派生 HistoryContext。

如果可能的话，有人可以提供一个例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T12:04:55.567

`HistoryContext`仍然可以从中派生。它位于以下命名空间中：

`System.Data.Entity.Migrations.History`

它包含在 EntityFramework 程序集中。我可以看到 EntityFramwork 6 也是如此。也许您使用的是旧版本？确保已更新 NuGet 包。

# javascript - 将外部数据加载到谷歌地图并构建热图

> ID：16067986
> 
> 赞同：0
> 
> 时间：2013-04-17T18:59:28.820
> 
> 标签：javascript, google-maps, google-maps-api-3

在我的数据库中，我有一组邮政编码和特定邮政编码的订单数量

```
zip    | count
--------------
12-456 |   23
12-100 |  120
12-220 |   93
10-300 |    2 
```

我需要一种使用 GoogleMaps 将数据显示为热图的方法。[我在https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap](https://developers.google.com/maps/documentation/javascript/examples/layer-heatmap)找到了基本示例 这是一个不错的开始，但它需要我将所有点添加到我的页面。

是否有显示页面的选项，然后向服务器发出请求以获取所有积分？我知道我可以向服务器发出 ajax 请求，得到 json 作为结果，然后在循环中将这些点添加到`taxiData`（来自示例的代码），但也许这可以更容易完成？在波兰有近 23000 个邮政编码，所以我可以从服务器获得非常大的数据集。

是否可以将数据加载为`latitude, longitude, count`？我可以将邮政编码转换为位置（GPS 坐标），但我想在该位置发送订单数量。

如何显示特定区域的热图？就像在这个示例中一样：http: [//maps.forum.nu/v3/gm_customTiles.html](http://maps.forum.nu/v3/gm_customTiles.html)热图仅适用于美国。

任何关于如何开始的想法（链接、示例）都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:30:12.300

第一个问题：只是一个想法，您可以对邮政编码进行抽样并让用户选择详细信息。如果他想要更多细节，则需要加载更多。在低地图缩放中，您不需要那么多点。如果用户想要在更高的地图缩放中获得更多细节，那么您可以获取更多。但是不要低估 ajax，我有一个网站页面，它加载了大约 9000 个数据库条目，它在大约 3 秒内准备就绪，可能更短。只是不要阻止页面，也不要忘记使用加载器:)

第二个问题：在 SQL 中你可以做

```
SELECT latitude, longitude, COUNT(*) count FROM Table GROUP BY latitude, longitude 
```

这将为您提供唯一的纬度和经度对及其计数。如果你愿意，你可以使用小数点来获得或多或少的准确性。

第三个问题：该地图使用 MCustomTileLayer。您可以在此处查看和下载源代码[http://code.google.com/p/biodiversity-imageserver/source/browse/trunk/unittest/gmap3/MCustomTileLayer.js?r=49](http://code.google.com/p/biodiversity-imageserver/source/browse/trunk/unittest/gmap3/MCustomTileLayer.js?r=49)

该网站的示例：

```
var hMap = new MCustomTileLayer(map,theme);

var oDiv = document.getElementById('controlsDiv');
var tlcOptions = {
    parent: oDiv,
    overlay: hMap,
    caption: theme.toUpperCase()
}
var tlc = new MTileLayerControl(tlcOptions); 
```

老实说，我更喜欢标准的 google API，它更简单、更漂亮。他们只是生成图像并将其放置在地图上。您可以使用热图半径来填充您想要的区域。

希望能帮助到你 ：）

# c# - 将 Popup 控件放在 ListView 的单元格上

> ID：16067988
> 
> 赞同：0
> 
> 时间：2013-04-17T18:59:31.603
> 
> 标签：c#, wpf, xaml, listview

我有一个列表视图，并且希望在按下按钮时在弹出窗口中显示更多信息。无论如何，我的列表视图看起来像：

```
<ListView Name="TableListView">
  <ListView.View>
    <GridView>
      <GridViewColumn  Width="50"
                       Header="ID">
        <GridViewColumn.CellTemplate>
          <DataTemplate>
            <Label Content="{Binding Id}"
                   HorizontalAlignment="Center" />
          </DataTemplate>
        </GridViewColumn.CellTemplate>
      </GridViewColumn>

      <!-- I am having trouble with this column! -->
      <GridViewColumn  Width="50"
                       Header="ID">
        <GridViewColumn.CellTemplate>
          <DataTemplate>
            <StackPanel>
              <Button Content="Click to show more Info">
                <Button.Triggers>
                  <Trigger Property="IsMouseOver"
                           Value="True">
                    <Setter TargetName="PopupSelectFile"
                            Property="IsOpen"
                            Value="True">
                    </Setter>
                  </Trigger>
                </Button.Triggers>
              </Button>
              <Popup x:Name="PopupSelectFile">
                <Button Width="100"
                        Height="100"></Button>
              </Popup>
            </StackPanel>
          </DataTemplate>
        </GridViewColumn.CellTemplate>
      </GridViewColumn>

    </GridView>
  </ListView.View>
</ListView> 
```

基本上我想在单击第二列上的按钮时显示一个弹出窗口（PopupSelectFile）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:22:52.787

```
<ToggleButton x:Name="theButton">
    ...
</ToggleButton>
<Popup IsOpen="{Binding IsChecked, ElementName=theButton">
    ...
</Popup> 
```

# javascript - 覆盖 Backbone.View delegateEvents，以便事件对象可以包含移动事件

> ID：16067989
> 
> 赞同：0
> 
> 时间：2013-04-17T18:59:36.300
> 
> 标签：javascript, backbone.js, hammer.js

我正在使用 Hammer.js 在主干视图中捕获触摸屏事件。Hammer 有一个特殊的语法来添加触摸监听器，我一直在 View 的初始化函数中使用它：

```
$("#next-button").hammer({prevent_default: true}).on('tap', $.proxy(this.next, this)); 
```

我宁愿将它添加到标准事件对象中，如下所示：

```
events: {"tap #next-button":"next"} 
```

所以我破解了 Backbone.View 的 delegateEvents 方法的结尾：

```
var isMobileEvent=["tap", "doubleTap"].indexOf(eventName)!=-1;
        if (selector === '') {
            if (isMobileEvent){
                this.$el.hammer({prevent_default: true}).on(eventName, method);
            } else {
                this.$el.on(eventName, method);
            }
        } else {
            if (isMobileEvent){
                this.$el.hammer({prevent_default: true}).on(eventName, selector, method);
            } else {
                this.$el.on(eventName, selector, method);
            }

        } 
```

这工作正常。但是当我试图在需要覆盖的一个视图中覆盖该方法时（担心我会忘记 Backbone 中的这个 hack，或者用新版本的 Backbone 覆盖它等），我的视图的 delegateEvents 停止工作. 问题是方法回调不被识别为方法：

```
if (!_.isFunction(method)) method = this[events[key]]; 
```

为什么？我从字面上将函数复制并粘贴到 View 子类中。这是在 Backbone 中工作的整个 delegateEvents，但不在我的 Backbone.View 中：

```
delegateEvents: function(events) {
      if (!(events || (events = _.result(this, 'events')))) return;
      this.undelegateEvents();
      for (var key in events) {
        var method = events[key];
        if (!_.isFunction(method)) method = this[events[key]];
        if (!method) throw new Error('Method "' + events[key] + '" does not exist');
        var match = key.match(delegateEventSplitter);
        var eventName = match[1], selector = match[2];
        method = _.bind(method, this);
        eventName += '.delegateEvents' + this.cid;
        var isMobileEvent=["tap", "doubleTap"].indexOf(eventName)!=-1;
        if (selector === '') {
            if (isMobileEvent){
                this.$el.hammer({prevent_default: true}).on(eventName, method);
            } else {
                this.$el.on(eventName, method);
            }
        } else {
            if (isMobileEvent){
                this.$el.hammer({prevent_default: true}).on(eventName, selector, method);
            } else {
                this.$el.on(eventName, selector, method);
            }

        }
      } 
```

修复：

替换这一行：

```
var match = key.match(delegateEventSplitter); 
```

有了这个：

```
var match = key.match(/^(\S+)\s*(.*)$/); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:56:25.880

这个[jsbin](http://jsbin.com/iqibur/1/edit)`View`展示了如何覆盖`delegateEvents`.

您可以根据需要轻松扩展它来处理 Hammer.JS，就像上面扩展 Backbone 以支持各种触摸事件一样。

我需要复制`delegateEventSplitter`本地的值，因为它是在 Backbone 库中私下声明的（在闭包内）。只有在该变量的上下文中执行/返回的函数才能访问该值。由于您的新类不在该上下文中执行，因此无法直接访问该值。

相关代码：

```
var SampleView = Backbone.View.extend({
  events: {
    "click" : '_clicked' 
  },

delegateEvents: function(events) {
      if (!(events || (events = _.result(this, 'events')))) return;
      this.undelegateEvents();
      for (var key in events) {
        var method = events[key];
        if (!_.isFunction(method)) method = this[events[key]];
        if (!method) throw new Error('Method "' + events[key] + '" does not exist');
        var match = key.match(/^(\S+)\s*(.*)$/);
        var eventName = match[1], selector = match[2];
        method = _.bind(method, this);
        eventName += '.delegateEvents' + this.cid;
        if (selector === '') {
           this.$el.on(eventName, method);
        } else {
           this.$el.on(eventName, selector, method);
        }
      }  
},

  render: function() {        
     this.$el.html("hi");
     return this; 
  },        
  _clicked: function() {
     alert("clicked!"); 
  }
});

// assumes there's an element with an id of "content"
$(function() {
  var view = new SampleView();
  $("#content").append(view.render().$el);  
}); 
```

# ruby-on-rails - Rails 的 to_query 方法的对立面是什么？

> ID：16067993
> 
> 赞同：3
> 
> 时间：2013-04-17T18:59:49.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经使用 to_query 方法将哈希转换为参数。

如何将其变回哈希？

我试过这个：

```
require 'rack'
@tester = Rack::Utils.parse_nested_query(params[:search]) 
```

鉴于：`<%= @tester.class %>`

这给出了 NilClass。

参数是：

```
"search"=>"fields%5B%5D=exhb_0&fields%5B%5D=exh0_1&fields%5B%5
D=t_g_a&fields%5B%5D=hp_1&fields%5B%5D=s1&fields%5B%5D=overflade_0&railing%5B%5D
=A-3&railing_m=0&type%5B%5D=ltrappa&wood%5B%5D=wood_6" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T19:04:45.720

这是[这个问题](https://stackoverflow.com/questions/6049011/rails-opposite-of-hashto-param)的副本：只需使用：

```
Rack::Utils.parse_query(my_query_string) 
```

为了解码示例中的行，请务必先取消转义字符串：

```
require 'rack'

my_string = 'fields%5B%5D=exhb_0&fields%5B%5D=exh0_1&fields%5B%5D=t_g_a&fields%5B%5D=hp_1&fields%5B%5D=s1&fields%5B%5D=overflade_0&railing%5B%5D=A-3&railing_m=0&type%5B%5D=ltrappa&wood%5B%5D=wood_6'

unescaped_string = URI.unescape(my_string)
# => "fields[]=exhb_0&fields[]=exh0_1&fields[]=t_g_a&fields[]=hp_1&fields[]=s1&fields[]=overflade_0&railing[]=A-3&railing_m=0&type[]=ltrappa&wood[]=wood_6"

params_hash = Rack::Utils.parse_query(unescaped_string)
# => {"fields[]"=>["exhb_0", "exh0_1", "t_g_a", "hp_1", "s1", "overflade_0"], "railing[]"=>"A-3", "railing_m"=>"0", "type[]"=>"ltrappa", "wood[]"=>"wood_6"} 
```

# google-apps-script - 表单提交触发器 - 来自 Google 文档表单的脚本结果

> ID：16067997
> 
> 赞同：2
> 
> 时间：2013-04-17T19:00:01.943
> 
> 标签：google-apps-script, google-docs

我有一个提交数据的表单，一旦将新表单数据附加到电子表格，就需要测试和操作。因此我希望使用“On form submit”触发器来处理最新的条目（新的最后一行）。

但是，在我深入研究该触发器的脚本之前，我很想知道“表单提交”触发器是否可靠。例如，它会立即触发吗？如果同时（或几乎同时）提交 2 个（或更多）表单会发生什么？附加到该触发器的脚本会分别并按顺序处理每个表单提交吗？最终，我主要担心的是，如果先前的脚本仍在运行，而从表单提交中附加新记录，则附加记录将被跳过测试。

另一种选择是“时间驱动”触发器，尽管这需要测试所有数据，然后处理满足特定标准的记录。我不反对使用这种类型的触发器，但它需要更复杂的脚本，以及不同的流程方法。

有没有人可以与我分享与“提交表单”触发器相关的成功/恐怖故事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T19:06:44.607

请参阅： [类锁定](https://developers.google.com/apps-script/reference/lock/lock?hl=en)

互斥锁的表示。此类允许脚本确保一次只有一个脚本实例在执行给定的代码段。这对于回调和触发器特别有用，其中用户操作可能会导致对共享资源的更改，并且您希望确保不会发生冲突。以下示例展示了如何在表单提交处理程序中使用锁。

```
// Generates a unique ticket number for every form submission.
 function onFormSubmit(e) {
   var targetCell = e.range.offset(0, e.range.getNumColumns(), 1, 1);

   // Get a public lock on this script, because we're about to modify a shared resource.
   var lock = LockService.getPublicLock();
   // Wait for up to 30 seconds for other processes to finish.
   lock.waitLock(30000);

   var ticketNumber = Number(ScriptProperties.getProperty('lastTicketNumber')) + 1;
   ScriptProperties.setProperty('lastTicketNumber', ticketNumber);

   // Release the lock so that other processes can continue.
   lock.releaseLock();

   targetCell.setValue(ticketNumber);
 } 
```

如果没有 LockService，如果两个用户几乎同时提交表单，则票号可能最终相同，因为 lastTicketNumber 属性在从 ScriptProperties 读取之后但在新值写回之前可能会发生变化。

> 以上内容是从新的和改进的文档中复制的。

# java - Java socket 无限读阻塞

> ID：16067998
> 
> 赞同：2
> 
> 时间：2013-04-17T19:00:07.293
> 
> 标签：java, sockets, robots.txt

在使用 Java 套接字时，我遇到了一个非常奇怪的问题。这个问题只发生在我正在处理的 URL 的一个非常小的子集上。让我们调用一个示例 url abc.com。

编辑： url`lists.wikimedia.org/robots.txt`给我带来了问题。

我可以完美地`lists.wikimedia.org`使用路径curl/netcat/telnet 。`/robots.txt`Telnet 甚至告诉我 IP 地址`lists.wikimedia.org`（见下文）。但是，当我尝试使用 Java 套接字执行相同操作时，如下所示：

```
Socket s = new Socket("208.80.154.4", 80);  // IP is same as the IP printed by telnet
BufferedWriter writer = new BufferedWriter(s.getOutputStream());
writer.println("HEAD /robots.txt HTTP/1.1");
writer.println("Host: lists.wikimedia.org");
writer.println("Connection: Keep-Alive");
writer.flush();

InputStreamReader r = new InputStreamReader(s.getInputStream());
BufferedReader reader = new BufferedReader(r);

String line;
while ((line = reader.readLine()) != null) {
    ...
} 
```

readLine 无限阻塞，直到套接字超时......

有谁知道为什么会发生这种情况？相同的代码适用于大多数其他 URL，有趣的是，这个错误只发生在一些 ROBOTS.TXT 请求中……我很困惑为什么会发生这种情况。

编辑：

有趣的是，使用 apache HttpClient 库给了我正确的结果`lists.wikimedia.org/robots.txt`。如果我想通过 Socket 手动完成，我还需要做些什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:55:27.037

可能您缺少用于结束 HTTP 请求标头的附加 CRLF。我也会明确地写出来，以避免平台混淆，就像这样（未经测试）：

```
writer.print("HEAD /robots.txt HTTP/1.1\r\n");
writer.print("Host: lists.wikimedia.org\r\n");
writer.print("Connection: Keep-Alive\r\n");
writer.print("\r\n");
writer.flush(); 
```

还可以考虑使用 HTTPURLConnection 而不是普通的套接字，消除所有这些负担：

```
HttpURLConnection connection = (HttpURLConnection) new URL(url).openConnection();
connection.setRequestMethod("HEAD");
... 
```

# javascript - Chrome - 不播放多个视频 - 网络卡在待处理

> ID：16067999
> 
> 赞同：1
> 
> 时间：2013-04-17T19:00:14.350
> 
> 标签：javascript, html, google-chrome, video, html5-video

我的测试页面上有 2 个视频元素，如下所示：

```
<div id="parent">
    <video id="foo" autoplay>
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.mp4" type="video/mp4" />
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.webm" type="video/webm" />
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.ogv" type="video/ogg" />
    </video>
    <video id="bar" autoplay>
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.mp4" type="video/mp4" />
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.webm" type="video/webm" />
        <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.ogv" type="video/ogg" />
    </video>
</div> 
```

在最新的 FF 中，一切正常。然而，在 Chrome 中，这些视频都不会播放；查看 net 选项卡可以发现，他们陷入“待定”状态的时间从几秒到无限长不等。如果我注释掉/删除一个视频元素，另一个将播放。

我已经看到多个 Chromium 错误报告谈论类似的问题，但似乎没有一个与父容器直接相关。我尝试通过 JS 动态构建标记，结果相同。我也尝试过添加编解码器属性，但没有成功。

为了争论起见，可以说重组页面以使没有视频存在于同一父级中不是一种选择。这只是一个无法修复的错误吗？任何可能的解决方法，但是很老套？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T19:56:52.050

已解决 - 显然同时从同一台服务器请求相同的文件名让 Google 吓坏了。更改文件名或域可以正常工作。FWIW，我复制了测试视频并将 1、2、3 等添加到文件名的末尾，并从同一服务器运行它们。按预期工作。使用来自不同领域的测试视频让我找到了解决方案。