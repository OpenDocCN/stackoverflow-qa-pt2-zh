# StackOverflow 问答 15500000-15500999

# java - 如何比较从 SQLite 数据库填充的按钮？

> ID：15500003
> 
> 赞同：1
> 
> 时间：2013-03-19T12:50:17.283
> 
> 标签：java, android, sqlite

好的，我已经设法将预填充的 sqlite 数据库导入到我的 Assets 文件夹并从中读取，并将我的问题随机设置为我的 TextView，将 A 列设置为左侧按钮，将 B 列设置为右侧按钮。下面你可以看到我的 dbhelper、测试助手和我的游戏类。在这里我被困住了。我需要比较左侧和右侧，当用户单击一侧的按钮时，例如在 A4 上，要正确，他需要单击 B4。我怎么能比较这个？

![在此处输入图像描述](../Images/917fb229887081ccf5eb9b508580723b.png)

数据库助手：

```
public class DataBaseHelper extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = "/data/data/rs.androidaplikacije.spojnice/databases/"; 
private static String DB_NAME ="pitanja.sqlite";// Database name
private static SQLiteDatabase mDataBase; 
private final Context mContext;
private static final String KEY_ID = "_ID";
private static final String KEY_PITANJE = "PITANJE";
private static final String TABLE_NAME = "tblPitanja";

public DataBaseHelper(Context mojContext) 
{
    super(mojContext, DB_NAME, null, 1);// 1? its Database Version
    DB_PATH = mojContext.getApplicationInfo().dataDir + "/databases/";
    this.mContext = mojContext;
}

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
    /*Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }
    */

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }
    @Override
    public void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {
        }

    @Override
    public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
        Log.w("DataBaseHelper", "Upgrading database!!!!!");
          onCreate(arg0);

    }

} 
```

测试适配器：

```
public class TestAdapter 
{
    protected static final String TAG = "DataAdapter";

    private final Context mContext;
    private SQLiteDatabase mDb;
    private DataBaseHelper mDbHelper;

    public TestAdapter(Context context) 
    {
        this.mContext = context;
        mDbHelper = new DataBaseHelper(mContext);
    }

    public TestAdapter createDatabase() throws SQLException 
    {
        try 
        {
            mDbHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public TestAdapter open() throws SQLException 
    {
        try 
        {
            mDbHelper.openDataBase();
            mDbHelper.close();
            mDb = mDbHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDbHelper.close();
    }

     public Cursor getTestData(String whereClause)
     {;
         try
         {
             String sql ="SELECT * FROM tblPitanja WHERE 1 = 1 " + whereClause + " ORDER BY RANDOM() LIMIT 1";

             Cursor mCur = mDb.rawQuery(sql, null);
             if (mCur!=null)
             {
                mCur.moveToNext();
             }
             return mCur;
         }
         catch (SQLException mSQLException) 
         {
             Log.e(TAG, "getTestData >>"+ mSQLException.toString());
             throw mSQLException;
         }
     }
} 
```

我的游戏课：

```
public class Spojnice extends Activity implements View.OnClickListener{

LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {
        }
        };

    Button a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8;
    TextView pitanje;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);   //full screen
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.spojnice);

        a1 = (Button) findViewById(R.id.bA1);
        a2 = (Button) findViewById(R.id.bA2);
        a3 = (Button) findViewById(R.id.bA3);
        a4 = (Button) findViewById(R.id.bA4);
        a5 = (Button) findViewById(R.id.bA5);
        a6 = (Button) findViewById(R.id.bA6);
        a7 = (Button) findViewById(R.id.bA7);
        a8 = (Button) findViewById(R.id.bA8);
        b1 = (Button) findViewById(R.id.bB1);
        b2 = (Button) findViewById(R.id.bB2);
        b3 = (Button) findViewById(R.id.bB3);
        b4 = (Button) findViewById(R.id.bB4);
        b5 = (Button) findViewById(R.id.bB5);
        b6 = (Button) findViewById(R.id.bB6);
        b7 = (Button) findViewById(R.id.bB7);
        b8 = (Button) findViewById(R.id.bB8);
        pitanje = (TextView) findViewById(R.id.tvPitanje);

        nextQuestion();
    }

    private void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            pitanje.setText(c.getString(1));

            List<String> labelsA = new ArrayList<String>();
            List<String> labelsB = new ArrayList<String>();

            labelsA.add(c.getString(2));
            labelsA.add(c.getString(4));
            labelsA.add(c.getString(6));
            labelsA.add(c.getString(8));
            labelsA.add(c.getString(10));
            labelsA.add(c.getString(12));
            labelsA.add(c.getString(14));
            labelsA.add(c.getString(16));

            labelsB.add(c.getString(3));
            labelsB.add(c.getString(5));
            labelsB.add(c.getString(7));
            labelsB.add(c.getString(9));
            labelsB.add(c.getString(11));
            labelsB.add(c.getString(13));
            labelsB.add(c.getString(15));
            labelsB.add(c.getString(17));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            a1.setText(labelsA.get(0));
            a1.setOnClickListener(clickListener);

            a2.setText(labelsA.get(1));
            a2.setOnClickListener(clickListener);

            a3.setText(labelsA.get(2));
            a3.setOnClickListener(clickListener);

            a4.setText(labelsA.get(3));
            a4.setOnClickListener(clickListener);

            a5.setText(labelsA.get(4));
            a5.setOnClickListener(clickListener);

            a6.setText(labelsA.get(5));
            a6.setOnClickListener(clickListener);

            a7.setText(labelsA.get(6));
            a7.setOnClickListener(clickListener);

            a8.setText(labelsA.get(7));
            a8.setOnClickListener(clickListener);

            b1.setText(labelsB.get(0));
            b1.setOnClickListener(clickListener);

            b2.setText(labelsB.get(1));
            b2.setOnClickListener(clickListener);

            b3.setText(labelsB.get(2));
            b3.setOnClickListener(clickListener);

            b4.setText(labelsB.get(3));
            b4.setOnClickListener(clickListener);

            b5.setText(labelsB.get(4));
            b5.setOnClickListener(clickListener);

            b6.setText(labelsB.get(5));
            b6.setOnClickListener(clickListener);

            b7.setText(labelsB.get(6));
            b7.setOnClickListener(clickListener);

            b8.setText(labelsB.get(7));
            b8.setOnClickListener(clickListener);

    }
        finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
            mDbHelper.close();
        }

}

    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }
} 
```

# jquery - jQuery访问动态创建的表单中的字段

> ID：15500011
> 
> 赞同：0
> 
> 时间：2013-03-19T12:50:37.320
> 
> 标签：jquery

我动态地创建了几种这样的形式

```
<form id="form1".....>
    ...
    <input type="submit" ...
    <div id="output1"><!--Here I want to show a message--></div>
</form>
<form id="form2".....>
...
    <input type="submit" ...
    <div id="output2"><!--Here I want to show a message--></div>
</form>
<form id="form3".....>
...
    <input type="submit" ...
    <div id="output3"><!--Here I want to show a message--></div>
</form>
<form id="form4".....>
    <input type="submit" ...
    <div id="output4"><!--Here I want to show a message--></div>
</form>
...

jQuery(function($) {
    $('form[data-async]').live('submit', function(event) {
        var $form = $(this);
        var $target = $($form.attr('data-target'));
    $.ajax({
            type: $form.attr('method'),
            url: $form.attr('action'),
            data: $form.serialize(),

            success: function(data, status) {
                $("#output").text("My Success Message");
                //How can I  select the correct id for this output?

            }
        });

        event.preventDefault();
    });
}); 
```

我需要在使用 Ajax 提交的表单中设置消息文本。$("#output").text("我的成功消息"); 我不知道如何为提交的表单选择输出 div！我怎么才能得到它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:55:43.027

更改此行：

```
$("#output").text("My Success Message"); 
```

至

```
$form.find('[id^="output"]').text("My Success Message"); 
```

# php - 即使文本字段为空，isset() 的计算结果也为 true。这是为什么？

> ID：15500012
> 
> 赞同：3
> 
> 时间：2013-03-19T12:50:38.600
> 
> 标签：php, isset

第一个片段从两个文本字段中获取数据并发送到`action script.php`. 问题是`if`即使我没有在文本字段中输入任何内容，这两个语句都评估为 true。这是为什么 ？

```
try.php

<form method='get' action='./action_script.php'>
        <input type="text" id="text_first" name="text_first" /> <br />
        <input type="text" id="text_second" name="text_second"/> <br />
        <input type="submit" id="submit" />
</form> 
```

* * *

```
action_script.php

<?php

  if(isset($_GET['text_first'])) {
        echo "Data from the first text field : {$_GET['text_first']} <br>";
  }
  if(isset($_GET['text_second'])) {
        echo "Data from the second text field : {$_GET['text_second']} <br>";
  }

  echo "After the if statement <br />"; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T12:53:13.643

因为它们都已设置 - 变量存在于`$_GET`数组中。即使它们的值是空字符串。

尝试检查空虚

```
 if( isset($_GET['text_first']) && $_GET['text_first'] !== '' ) 
```

或者

```
if ( ! empty( $_GET['text_first'] ) ) { 
```

请注意，您不需要使用`isset()`，因为`empty()`如果变量不存在，则不会生成警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:55:47.557

如果字段存在于表单中，它将评估为真。要检查表单是否已正确提交并具有值，我使用**以下 if 语句**：

```
if (isset($_GET['text']) && !empty($_GET['text'])) { // If the value is set and is not empty
    // Processing code here..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:16:19.700

当您提交没有任何值的表单时，将为变量 text_first 和 text_second 发布空值，但在 $_GET 数组中为它们设置了一个带有空值的键，即`$_GET['text_first']=''`和

```
$_GET['text_second']='' 
```

, 但值是为两者设置的。

因此，如果您想检查是否为空，请使用 empty() ，因为 isset() 在设置时返回 true

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T07:45:55.547

这对我有用：

```
if ( (isset($_POST['DEVICEINPUT'])) && (!empty($_POST['DEVICEINPUT'])) && (trim($_POST['DEVICEINPUT']) !== null) ) {

....

} 
```

# mysql - 如何一次加入 A 和 B 以及 B 和 C？

> ID：15500013
> 
> 赞同：1
> 
> 时间：2013-03-19T12:50:39.240
> 
> 标签：mysql, sql, database

我有三个 A、B、C 表。

如何一次加入 A 和 B 以及 B 和 C？

例如，如果我有这些表：订单、产品、用户，我想要这样的查询：

```
SELECT Product.title, User.username, Order.id
FROM Order
/* with this condition: */
Order.ProductID = Product.ID
Product.UserID = User.ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:54:12.033

在 from 子句中组合连接：

```
select * 
  from aaa a inner join bbb b
     on a.x = b.y
  inner join ccc c
     on b.x = c.y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:29:30.073

尝试：

```
SELECT Product.title, User.username, Order.id
FROM Order
INNER join Product ON Order.ProductID = Product.ID
INNER JOIN user ON Product.UserID = User.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:53:00.420

```
select * from A a join B a on a.id = b.id /* condition for join*/ join C c on A.id = c.id /* condition for join*/ where ;//condition 
```

# android - 无论哪些子项可见，如何检索某个位置的 GridView 子项？

> ID：15500014
> 
> 赞同：1
> 
> 时间：2013-03-19T12:50:40.753
> 
> 标签：android, gridview

假设 GridView 有以下子项：

```
0  1  2
3  4  5
6  7  8 
```

当它们都可见时，getChildAt(5) 返回子 5。如果第一行不可见，我相信 getChildAt(5) 返回子 8。

我的理解正确吗？如果是这样，我怎样才能始终获得具有指定索引的 GridView 的孩子？

以下代码是我想如何使用位图 bm 更新位置 iPosition 的孩子：

```
GridView gridview = (GridView) findViewById(R.id.gridview);
View vGrid = gridview.getChildAt(iPosition);

ImageView iv = (ImageView) vGrid.findViewById(R.id.imageView);
iv.setImageBitmap(bm); 
```

适配器的getView：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vGrid;

    if (convertView == null) { // if it's not recycled, initialize some attributes

        vGrid = new View(activity);
        LayoutInflater li = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        vGrid = li.inflate(R.layout.devicetile, parent, false);

    } else {
        vGrid = convertView;
    }

    ImageView iv = (ImageView) vGrid.findViewById(R.id.imageView);
    iv.setImageBitmap(null);

    return vGrid;
} 
```

# windows - Spark WindowedApplication，监听keyUp事件

> ID：15500021
> 
> 赞同：2
> 
> 时间：2013-03-19T12:50:51.457
> 
> 标签：windows, apache-flex, air, flex-spark

我有一个 WindowedApplication，我需要监视一个`keyUp`，以便我可以在按下退出键时关闭应用程序。但是，我的代码不起作用：

```
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       keyUp="windowedapplication1_keyUpHandler(event)">

<fx:Script>
        <![CDATA[   

            protected function windowedapplication1_keyUpHandler(event:KeyboardEvent):void
            {
                //Monitor key press {ESC}
                if(event.keyCode == 27){
                    exit();
                }
                else{
                    trace("key = " + event.keyCode);
                }
            }   

        ]]>
</fx:Script> 
```

似乎这个事件根本没有触发，我什至试图覆盖`keyUpHandler`并追踪一些信息，但什么也没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:11:06.020

我在 Adob​​e 论坛上发现[了这个类似的问题](http://forums.adobe.com/thread/700419)，它帮助解决了这个问题。

我通过侦听`applicationComplete`然后在处理程序中将`keyUp`侦听器附加到`stage`.

```
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       applicationComplete="init()">

<fx:Script>
        <![CDATA[   

            protected function init():void
            {
                stage.addEventListener(KeyboardEvent.KEY_UP, windowedapplication1_keyUpHandler);
            }

            protected function windowedapplication1_keyUpHandler(event:KeyboardEvent):void
            {
                //Monitor key press {ESC}
                if(event.keyCode == 27){
                    exit();
                }
                else{
                    trace("key = " + event.keyCode);
                }
            }       

        ]]>
</fx:Script> 
```

# .htaccess - .htaccess 设置（重写 URL 规则）适用于 Localhost，但不适用于 Live Site

> ID：15500022
> 
> 赞同：0
> 
> 时间：2013-03-19T12:50:56.643
> 
> 标签：.htaccess, magento, url-rewriting, magento-1.7

我的 .htaccess 重写规则如下：

```
RewriteCond %{REQUEST_URI} ^/eshop/$ 
RewriteRule ^(.*)$ %{REQUEST_URI}index.php/eshop-new-home/ [R,L]
RewriteCond %{REQUEST_URI} ^/eshop/index.php/$
RewriteRule ^(.*)$ %{REQUEST_URI}eshop-new-home/ [R,L] 
```

这些设置在本地主机上正常工作，但在实时网站上不起作用。任何解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:16:12.663

启用模组重写

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

和

```
AllowOverride All 
```

在你的 apache 配置中

# javascript - 用于在网页中绘制的 Graphml javascript 库

> ID：15500024
> 
> 赞同：9
> 
> 时间：2013-03-19T12:51:00.910
> 
> 标签：javascript, visualization, styling, graphml

我有一个 GraphML 文件，我必须在网页上显示它并使用 JavaScript 更改显示属性（例如更改节点、边缘等的颜色）。

可能吗？

如果有任何 JavaScript 库可以在网页上加载、解析和绘制 GraphML，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T22:59:28.460

可以使用 JavaScript XSLT API 调用将 GraphML 作为输入并输出 SVG 的 XSLT 样式表。例如：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/2000/svg">
 <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
 <xsl:template match="graph">
   <!-- when finding a 'graph' element, create the 'svg' root and its 'defs' section -->
   <svg>
     <defs>
       <marker id="arrow" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="10" markerHeight="10" orient="auto">
         <path fill="black" d="M0 0 10 5 0 10z"/>
       </marker>
     </defs>
     <!-- for each 'node' create a 'g' element with its contents -->
     <xsl:for-each select="node">
       <g>
         <rect width="100" height="100" fill="silver"/>
         <text style="font-size:24;font-weight:bold">
           <xsl:value-of select="@id"/>
         </text>
       </g>
     </xsl:for-each>
     <!-- for each 'edge' create a 'line' with the arrow if it is a 'directed' edge -->
     <xsl:for-each select="edge">
       <line>
         <xsl:if test="not(@directed='false')">
           <xsl:attribute name="style">marker-end:url(#arrow)</xsl:attribute>
         </xsl:if>
       </line>
     </xsl:for-each>
   </svg>
 </xsl:template>
</xsl:stylesheet> 
```

**参考**

*   [使用 XSLT 将 GraphML 转换为 SVG](http://www.svgopen.org/2003/papers/ComparisonXML2SVGTransformationMechanisms/#s2)
*   [Mozilla JavaScript XSLTProcessor API](https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_JavaScript_interface_to_XSL_Transformations)
*   [Microsoft JavaScript MSXML 转换 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms757834)
*   [在 IE 中以编程方式使用 XSLTProcessor 来最小化客户端-服务器带宽](http://blogs.msdn.com/b/adioltean/archive/2005/02/09/370067.aspx)
*   [使用 AIR 进行 XSLT 处理](http://blogs.adobe.com/briggs/2008/05/using_air_for_xslt_processing.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-17T07:18:38.553

这项任务的重要竞争者（至少在商业环境中）将是[yFiles for HTML Javascript Graph Drawing Library](http://www.yworks.com/yfileshtml)：

*   它的主要图形交换格式是 GraphML（请参阅[此实时 GraphML 演示](http://live.yworks.com/yfiles-for-html/1.3/demos/graphviewer/demo.yfiles.graphml.graphml/index.html)）
*   如果您的 GraphML 使用特定的“方言”（GraphML 本身没有描述如何指定坐标、颜色甚至标签等可视化细节的标准），则可以轻松自定义 GraphML 解析过程以解析更多 GraphML 扩展。
*   如果您的 GraphML 不包含坐标，而只包含图形的结构，您可以使用布局算法在图形显示之前自动动态计算出漂亮的布局
*   该库具有完整的编辑功能，因此您可以通过编程方式以及使用鼠标和触摸手势以交互方式修改图形

全面披露：我为创建该库的公司工作，但我不代表我的雇主在 SO

# php - 为什么 "hash('md5', 'string')" 比 "md5('string')" 快？

> ID：15500026
> 
> 赞同：12
> 
> 时间：2013-03-19T12:51:06.147
> 
> 标签：php, hash, md5

在[http://www.php.net/manual/en/function.hash.php#73792](http://www.php.net/manual/en/function.hash.php#73792)上，它声明了一个测试，表明该`md5()`函数比等效`hash()`函数慢约 3 倍。

什么可以解释这种差异？该`md5()`功能有什么不同和/或更多？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:08:46.397

**是的 100% 正确**...也就是说，如果您仍在使用 PHP 早期版本，`PHP`例如 `PHP 5.1.2`在`PHP 5.2.2`大多数最新的稳定版本中，`PHP`它们是相同的，并且`md5`在某些版本中运行速度稍快

[这是大多数 PHP 版本中的一个简单测试](http://3v4l.org/GDVgk)

您还需要注意，基准方法是错误的，改变位置会影响结果......这是获得更好结果的方法。

```
set_time_limit(0);
echo "<pre>";

function m1($total) {
    for($i = 0; $i < $total; $i ++)
        hash('md5', 'string');
}

function m2($total) {
    for($i = 0; $i < $total; $i ++)
        md5('string');
}

function m3($total) {
    for($i = 0; $i < $total; $i ++)
        hash('sha1', 'string');
}

function m4($total) {
    for($i = 0; $i < $total; $i ++)
        sha1('string');
}

function m5($total) {
    for($i = 0; $i < $total; $i ++)
        hash('md5', $i);
}

function m6($total) {
    for($i = 0; $i < $total; $i ++)
        md5($i);
}

function m7($total) {
    for($i = 0; $i < $total; $i ++)
        hash('sha1', $i);
}

function m8($total) {
    for($i = 0; $i < $total; $i ++)
        sha1($i);
}

$result = array(
        'm1' => 0,
        'm2' => 0,
        'm3' => 0,
        'm4' => 0,
        'm5' => 0,
        'm6' => 0,
        'm7' => 0,
        'm8' => 0
);

$total = 10000;

for($i = 0; $i < 100; ++ $i) {
    foreach ( array_keys($result) as $key ) {
        $alpha = microtime(true);
        $key($total);
        $result[$key] += microtime(true) - $alpha;
    }
}

echo '<pre>';
echo "Single Run\n";
print_r($result);
echo '</pre>'; 
```

输出

```
Single Run
Array
(
    [m1] => 0.58715152740479                 <--- hash/md5/string
    [m2] => 0.41520881652832                 <--- md5/string
    [m3] => 0.79592990875244                 <--- hash/sha1/string
    [m4] => 0.61766123771667                 <--- sha1/string
    [m5] => 0.67594528198242                 <--- hash/md5/$i
    [m6] => 0.51757597923279                 <--- md5/$i
    [m7] => 0.90692067146301                 <--- hash/sha1/$i
    [m8] => 0.74792814254761                 <--- sha1/$i

) 
```

[现场测试](http://codepad.viper-7.com/QxqQvG)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:06:37.997

有一样的！！！你需要用大字符串测试它来检查它，我使用这个代码：

```
<?php

$s="";
for ($i=0;$i<1000000;$i++)
$s.=$i;
$time=microtime(1);
   hash('md5', $s);
echo microtime(1)-$time,': hash/md5<br>';

$time=microtime(1);

 md5($s);
echo microtime(1)-$time,': md5<br>';

$time=microtime(1);
hash('sha1', $s);
echo microtime(1)-$time,': hash/sha1<br>';

$time=microtime(1);
sha1($s);
echo microtime(1)-$time,': sha1<br>';
?> 
```

这是我的结果：

```
0.015523910522461: hash/md5
0.01521897315979: md5
0.020196914672852: hash/sha1
0.020323038101196: sha1 
```

非常相似！！！

# c# - 如何规避未使用的输出参数值？

> ID：15500033
> 
> 赞同：0
> 
> 时间：2013-03-19T12:51:22.760
> 
> 标签：c#, parameters, null, void, out

我正在使用`ConcurrentDictionary`，我需要使用删除元素`TryRemove`。

的实现`TryRemove`需要一个 out 参数，该参数返回将被删除的对象。

```
Body dummy;
if (!bulletBodies.TryRemove(bullet, out dummy))
{

}
... 
```

每当我删除字典中的条目时，我都不想在虚拟变量上使用额外的一行：这就是为什么我试图绕过 out return 参数，但未能成功键入下面的恐怖内容。我也google了一下，没有成功。

```
bulletBodies.TryRemove(bullet, null);
bulletBodies.TryRemove(bullet, out null);
bulletBodies.TryRemove(bullet, void);
... 
```

有没有办法或聪明的技巧来管理未使用的输出参数，所以不需要在任何地方声明虚拟变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:52:12.363

您可以创建不返回已删除值的扩展方法 TryRemove。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T12:54:50.703

您可以编写一个扩展方法，例如：

```
public static bool TryRemove<TKey, TValue>(this ConcurrentDictionary<TKey, TValue> dictionary, TKey key)
{
    TValue dummy;
    return dictionary.TryRemove(key, out dummy);
} 
```

# javascript - 通过 Javascript 在谷歌地图上创建约 50K 对象

> ID：15500035
> 
> 赞同：1
> 
> 时间：2013-03-19T12:51:28.457
> 
> 标签：javascript, google-maps, web

我正在设计一个应用程序，它在谷歌地图上显示近5**万辆****汽车**，其中包含一些细节，如名称、编号和图片。

 **我想知道这样做的最佳做法是什么。有些人建议制作原生移动应用程序或桌面应用程序，但我需要一个可以在网络浏览器上运行的**网络应用程序。**数据将以**JSON**格式直接从服务器中提取。

我应该限制数据还是有一些解决方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:38:15.013

正如评论中所建议的那样，您最好将要显示的 50K 数据点聚类。

即使在 24 英寸 1920x1080 显示器上看到 50K 数据点，意味着每个数据点大约有 41 个像素，这意味着每个数据点有 6x6 个像素方块，它们会填满整个屏幕。

很明显，你会有很多重叠。

此外，以 JSON 格式从服务器获取 50K 数据点（并且您可能会得到一个包含所有这些数据的大 json）意味着您将至少有 50k x 10 x 2 = 1,000,000 字节 = 每个 1MB请求从服务器拉取。（每个浮点数 50k 点 x 10 个字节，小数点后 5 个 x 2 个数字，因为您有纬度和经度）。

因此，如果您希望这是实时的，您可能必须每 2 秒左右发出这些请求。

此外，并非所有这些都适合视口，因此您必须排除那些不在视口中的内容，因为它们无论如何都不会显示。所以服务器应该知道客户端正在使用什么样的显示（分辨率）。

我认为最好的方法是让您在服务器端编写一些集群逻辑，让客户端处理更少的数据点。（我在这里聚类的意思是多个点被[组合在一起](http://i.imgur.com/9zxM41o.png)，当放大时，它们[开始展开](http://i.imgur.com/j7FeSMd.png)成不同的组）

**更新**：

还要考虑到随着 DOM 节点数的增加，选择器会运行得更慢，因为它们必须搜索许多节点。但是，如果您将标记放在一个图层中并且不让选择器接触该图层，那么您可以避免速度问题，这样他们就不会浪费时间。

**更新#2**：

为了有效地发送数据，您可以使用[BSON](https://github.com/jbenet/bson-cpp)对其进行编码，然后将其[压缩](http://www.zlib.net/)并将其传递到客户端，您可以使用[zlib.js](https://github.com/imaya/zlib.js)解压缩并使用[BSON](https://github.com/mongodb/js-bson)读取它。

我假设您将在服务器端使用 C++，但也有[许多其他语言的 BSON 实现](http://bsonspec.org/#/implementation)。

**更新#3**：

Also check the [mqtt protocol](http://mqtt.org/) which is a lightweight transport protocol. It has a Javascript implementation here [MQTT.js](https://github.com/adamvr/MQTT.js/)

**UPDATE #4**: In some cases, some points might have kept their position since the last update, in which case, you wouldn't need to send their positions.

Similarly, depending on the speed of the points, and the zoom level, some points might appear as if they're not moving at all(if you're viewing them from really far away) so you might not want to send the positions of those points each time. So only sending those that would change position on the client-side display would make sense(since the other ones would appear as being static, although they're not).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:34:29.500

IMHO, best way at such large number of object is using server-side rendering of raster.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:44:59.307

Get all data at once but Draw only those markers which are on the view port or near the view port. ;)**

# ruby - 是否有使用没有 cookie 的会话的 Rack 中间件？

> ID：15500041
> 
> 赞同：11
> 
> 时间：2013-03-19T12:51:43.003
> 
> 标签：ruby, session, cookies, rack

Rack 提供的会话管理中间件都是基于 cookie 来识别用户的。由于我正在开发一个 api，我宁愿将 session-id 作为查询字符串参数显式传递。查看代码库，似乎没有考虑到这个用例，因为所有会话中间件都从一个通用类扩展而来，该类读取/写入 cookie。

所以我的问题是 - 是否有一个项目可以维护替代机架中间件或机架内置中间件的猴子补丁，这将允许我在查询字符串上维护会话 ID，而不是 cookie 存储？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T13:50:46.723

Rack 可以使用自定义会话 ID 项而不是 cookie：

```
require 'rack/session/abstract/id' 
```

Rack 文档可能是您开始搜索的一个有用的地方。我相信您正在寻找“跳过”选项（或“延迟”选项）。

文件：

ID 为实现基于 id 的会话服务建立了一个基本框架。发送给客户端以维护会话的 Cookie 将仅包含一个 id 引用。只有#get_session 和#set_session 需要被覆盖。

所有参数都是可选的。

*   :key 确定 cookie 的名称，默认为 'rack.session'
*   :path、:domain、:expire_after、:secure 和 :httponly 设置相关的 cookie 选项，如 Rack::Response#add_cookie
*   :skip 不会在响应中设置 cookie 也不会更新会话状态
*   :defer 不会在响应中设置 cookie，但如果与后端一起使用，仍会更新会话状态
*   :renew （依赖于实现）将提示生成新的会话 id，并迁移要在新 id 处引用的数据。如果设置了 :defer，它将被覆盖并设置 cookie。
*   :sidbits 设置生成的会话 ID 的长度位数。

这些选项可以根据每个请求在 env['rack.session.options'] 的位置进行设置。此外，会话的 id 可以在键 :id 的选项散列中找到。强烈不建议更改其值。

Rack::Utils::Context 是否兼容。

默认不包含；你必须需要'rack/session/abstract/id'才能使用。

来源：

```
 class ID
    DEFAULT_OPTIONS = {
      :key =>           'rack.session',
      :path =>          '/',
      :domain =>        nil,
      :expire_after =>  nil,
      :secure =>        false,
      :httponly =>      true,
      :defer =>         false,
      :renew =>         false,
      :sidbits =>       128,
      :cookie_only =>   true,
      :secure_random => (::SecureRandom rescue false)
    } 
```

我希望这能给你一个领导......当你了解更多时，你能在这里分享你的结果吗？

## 编辑：

魔术技巧是将选项`:cookie_only => false`与`:defer => true`. 当然，标准的 Rack::Session::Cookie 在这里没有多大意义，所以你可以这样做：

```
use Rack::Session::Pool, :cookie_only => false, :defer => true 
```

有趣的是，您可以在运行时更改选项。在我的用例中，我实际上需要支持传统的基于 cookie 的机制以及显式参数传递样式，所以我做了以下工作：

```
class WebApp < Sinatra::Base

  configure do
    use Rack::Session::Pool, :key => 'session_id'
  end

  before do
    # Switch to parameter based session management if the client is an ios device
    if env['HTTP_USER_AGENT'] =~ /iOS/
      session.options[:cookie_only] = false
      session.options[:defer] = true
    end
  end

  get '/' do
    session[:user_id] ||= nil # This triggers a session-write, giving us a valid session-id
    body "session_id=#{session.id}"
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T11:22:22.973

如果您想在 API 应用程序中消除 cookie 的使用，但仍想管理会话。例如，在我的情况下，会话标识符来自令牌。您需要重新定义`extract_session_id`从收到的令牌中提取会话标识符的方法。这个方法必须在你的会话存储类上重新定义，因为`Rack::Session::Abstract::ID`它提供了基于 cookie 的默认实现。它是从调用会话对象上的方法的`Rack::Session::Abstract::ID#current_session_id`方法调用`#id`的，通常由`Rack::Session::Abstract::SessionHash`实例表示。最终在您的会话存储中调用了此`SessionHash#id`方法`#extract_session_id`。

我想单独配置会话标识符提取器会更简单，但是希望将会话标识符与会话数据一起存储在 cookie 中会导致这种欺骗设计。

同样，`Rack::Session::Abstract::ID`在方法`#commit_session`和类中看到 cookie 交互有点奇怪`#set_cookie`。因此，要完全确定不会设置 cookie，您也可以`#set_cookie`在商店中重新定义方法。正如此处的答案之一所述，通过设置会话存储中间件可能可以实现相同的目标`cookie_only: false, defer: true`，但我尚未对此进行检查。

当然，您需要修改您的中间件堆栈以排除所有与 cookie 交互的中间件以及可能特定于浏览器的中间件。在默认的 rails 中间件堆栈上，它可能如下所示：

```
# config/application.rb
[
  Rack::MethodOverride, # browser specific
  ActionDispatch::Cookies,
  ActionDispatch::Flash
].each do |middleware|
  config.middleware.delete(middleware)
end 
```

同样，您肯定需要将会话存储替换为在服务器端存储信息的东西，例如 redis，例如：

```
# config/initializers/session_store.rb
Rails.application.config.session_store ::Custom::Session::TokenRedisStore 
```

就我而言，`::Custom::Session::TokenRedisStore`继承`::RedisSessionStore`并重新定义了上面提到的所有方法。 `::RedisSessionStore`包含在`redis-session-store`宝石中。`Gemfile`所以，很明显，如果你要使用它，你需要将它添加给你。

我在 Rails 4.2.x 上这样做，但同样的方法可以在任何框架中采用，因为在任何`Rack`地方都是一样的。

# android - mTabHost.getTabWidget().getChildAt(4).performClick() 在姜饼中不起作用

> ID：15500042
> 
> 赞同：1
> 
> 时间：2013-03-19T12:51:44.133
> 
> 标签：android, tabwidget

我正在制作一个基于标签的应用程序。当用户单击弹出的设置按钮时，我必须转到设置选项卡。以下代码用于此目的，它在 ICS 中完美运行，但不适用于姜饼。

```
mTabHost.getTabWidget().getChildAt(4).performClick(); 
```

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:33:10.157

尝试这个：

```
mTabhost.setCurrentTab(4); 
```

# jquery - 我应该如何在开源应用程序中打包或声明 Javascript 依赖项？

> ID：15500045
> 
> 赞同：9
> 
> 时间：2013-03-19T12:51:46.053
> 
> 标签：jquery, perl, github, open-source

我有一个 Web 应用程序，包括前端和后端代码，我想将其推送到 github，但是，它目前有一些依赖项管理它的源代码树。后端代码是 Perl，从 CPAN 安装模块依赖项很好理解，所以我没有那些。我主要有 jQuery 库和其他一些开源的 Javascript 库。

```
-mycode
-mydir
   -mycode
   -jquerylibs (with their license)
   -mycode
   -jslibs     (with their own licenses)
-mycode 
```

对于部署，这非常方便，因为我可以控制正在使用哪些版本的库，也不会强迫人们使用 CDN（内容交付网络）从可能仍然不在线的远程域加载 jQuery 等三五年内。

但是，我不确定在我的应用程序中包含其他项目的源代码是否合适，即使我包含了许可证文件。

在开源 Web 应用程序中包含这样的依赖项的最佳方式是什么，在尊重依赖项的同时保持工作部署的便利性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T20:49:24.000

您是否考虑过为您的 JS 依赖项使用像[Bower这样的包管理？](http://bower.io/)这种前端东西的包管理变得越来越流行，并且类似于后端模块（CPAN、gems、pip 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:52:09.773

没有什么会永远存在 - 我认为您在这里试图回答的问题是如何设置，以便真相的来源将持续依赖于它们的代码的生命周期。

如果它只是几件事并且您依赖于特定版本，那么在您的树中包含源代码是完全合理的。

作为替代方案，既然您无论如何都要推送到 GitHub，也许您可​​以派生必要的先决条件，为您的应用程序适当地标记它们，然后将它们作为 Git 子模块包含在内。这样，它们至少与主应用程序源代码的规范事实来源一样长。

如果它们现在不在 GitHub 上，但它们是开源的，那么您自己将它们添加到 GitHub，然后将这些新的 GitHub 存储库作为子模块添加到您的项目中仍然是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T13:51:44.323

只要您遵守许可证，在您的项目中包含源代码就可以了。不过这可能会让人分心。不熟悉 jQuery 或其他任何东西的人可能不会意识到它是第三方代码。他们可能会浪费时间深入研究它或其他东西，而没有意识到它与您的项目无关。

无论如何，您都应该在自述文件中记录依赖关系（例如，README、INSTALL、DEPENDS 等）。可能是您当前使用 jQuery xyz，但其中可能存在影响您的软件的错误。所以你不能保证固定版本永远是理想的。

通常不是捆绑源代码（因为它不会改变并且几乎不需要跟踪），而是编写一个辅助 bash 或 Perl 程序来从网络中获取依赖项。这样，有一个简单的按钮可能适用于那些不想做大量阅读或手动工作的人，但你不会因为其他项目的混乱而分散人们对你自己的代码的注意力，并且依赖项是不会被您的存储库不必要地跟踪。

**附加：**

如果可能，您还应该更喜欢在树中将第三方软件与您自己的软件完全分开，以便清楚第三方软件从哪里开始以及您的软件在哪里（同样，这样人们就不会误认为它是您的软件，这可能会导致荒谬的您的要求等）。

```
* <root>/
`-* README
`-* extlib/  <-- third party stuff can be tucked away in here, for example
| `-* <third_party_code>
| `-* jquery-x.y.z/
| | `-* ...
| `-* other-x.y.z/
|   `-* ...
`-* include/
`-* Makefile
`-* src/
  `-* <your_code>
  `-* main.c
  `-* ... 
```

如果它需要在部署时混合，那么让构建系统复制或链接到适当的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T20:15:44.610

我认为没有简单的“最佳”解决方案可以满足您的要求。我确实在各种项目中使用了许多不同的方法。他们都做得很好——重要的是你喜欢如何组织代码，所以你可以很容易地在更长的时间内维护它。这当然是一件相当私人的事情。

我自己喜欢将 CDN 用于 jQuery - 它比（非常不可能的）风险具有更多优势，即 google-CDN 服务器停机时间超过 5 秒。即使这样，您也可以在您的代码中构建故障保存以加载本地托管的 jQuery 框架，以防 CDN 无法访问，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/lib/jquery-1.10.2.min.js"></script>')</script> 
```

关于代码组织：我更喜欢按以下结构管理我的文件

```
/app
  +- /js
  |   +- /src               <- my custom scripts go into "/js/src"
  |   |    +- general-ui.js <- I create/edit this file
  |   |                        Usually I only edit files in this directory
  |   +- general-ui.min.js  <- the minified version is automatically stored in "/js"
  |   |                        I never edit a file in here
  |   +- /lib               <- external libraries go in here.
  |       |                    NEVER edit a file inside the "/js/lib" folder!
  |       +- jquery-1.10.2.min.js   <- Always add version-number to the files in /js/lib
  +- /css
  |   +- /scss              <- my SCSS source files which compile into "/css/style.css"
  |   +- /lib               <- stuff like twitter bootstrap css. Never edit files in here
  |   +- /font              <- webfonts used by the css
  +- /inc                   <- my own PHP classes/modules/etc
  |   +- /lib               <- external PHP modules (again: never edit these files yourself)
  +- /img                   <- all images used by the application
  +- /web                   <- my own PHP/HTML files
  +- index.php              <- this will load the /inc/application.php class which handles the rest
  +- debug.php              <- same as index, but enables some debugging flags enabled
  +- config.php             <- config stuff (DB, etc) 
```

在我的方法中，我将始终在应用程序快照中包含所有外部文件（例如，包括 jquery 和其他库的版本号）——因为毕竟应用程序是为某个外部库构建、测试并依赖于某个外部库的；所以我想将这些库“硬链接”到代码，因为它们形成一个单元。

所以我的建议是不要使用 git 子模块，而是拥有一个包含所有文件的单一存储库，您可以完全控制这些文件。但是使用 CDN 加载库（您可以准确控制要加载的版本，这使得这个解决方案非常好）。新版本的 jQuery？首先在本地实现，测试一下，然后将新的jQuery文件添加到/js/lib文件夹中（不要覆盖旧的，而是添加一个具有唯一版本号的新文件）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-24T22:00:12.113

我还会确定您需要该应用程序的许可证类型。出于开源的目的，有一些可以让下载者更改甚至更改许可证类型并用于它的用途。当然，还有 GPL 许可甚至 MIT 许可的变体。寻找适合您需求的那一款。

# unix - 编码帮助 (KeyBasic)

> ID：15500047
> 
> 赞同：2
> 
> 时间：2013-03-19T12:51:46.477
> 
> 标签：unix, translate, basic

我有这个文件[http://pastebin.com/pH4Pk0sf](http://pastebin.com/pH4Pk0sf)没有扩展名，它可能是 COBOL，因为它托管的计算机使用 BASIC、COBOL 和一个叫做“KEY BASIC”的东西......我不明白这个代码.. .我用一些线条但不是全部......

我想将其转换为 C#，但我不知道如何，如果有人能告诉我它是哪种语言，也许我可以挖掘更多。

该程序读取这个其他文件[http://pastebin.com/rdbdappQ](http://pastebin.com/rdbdappQ)并为打印机创建一个输出......我需要知道它是如何工作的，以便让 Windows 程序（通过 C#）做同样的事情...... .

谢谢你。

**更新**

感谢您的帮助，我正在尝试重新创建代码，我看到这样的事情`OPEN '3/1/TABPRESU' FOR RANDOM IO ELSE DISPLAY 'NO ABRE TABPRESU';STOP`我不知道什么是“3/1/TABPRESU”当然它是一个文件，我有“TABPRESU”但是什么是“3 /1" ? 不是文件系统，因为它不存在，或者它可能是某种数据库？

我们使用的程序是 SovereignX，在 UNIX 下，它有一个选项`UNIXCOPY`允许用户将文件从 SovereignX 复制到 UNIX 文件系统，我没有找到任何关于 SovereignX 的信息...

找到一种方法来查看所有内容的源代码并重新创建它会非常有帮助，我们在一个名为`BE`(Batch Entry) 的命令下执行 INPUT。我正在尝试通过 FTP 将整个操作系统下载到 USB 驱动器（我不知道为什么机器无法启动 UBUNTU LIVE USB，主板允许您启动它，但没有任何反应，所以唯一的选择是通过 FTP 下载并尝试在某个虚拟机下运行它...

[http://en.wikipedia.org/wiki/Northgate_Information_Solutions](http://en.wikipedia.org/wiki/Northgate_Information_Solutions)

Northgate 购买了 Microdata（SovereignX 的创建者），然后 Mcdonell Douglas 购买了 northgate...这项研究让我很生气...似乎一切都在某种数据库下，用 DATA/BASIC 和 PROC 编写

[http://timmcnulty.iofm.net/realityx.htm](http://timmcnulty.iofm.net/realityx.htm)

**更新 2** 它是关键语言...但是如果我用 NP++ 打开文件会有点混乱，我需要从 SovereignX 导出然后才能读取它...但是用 ~100 个文件这样做是极端的...有人知道 KeyBasic IDE 吗？嗯谢谢

**更新 3** 该程序具有的 .DAT 和 .IDX 文件受密码保护，从控制台它不会要求我输入密码，但如果我使用 DBISAM Viewer 并且没有人知道密码......该死的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T14:03:54.957

绝对是 BASIC 方言。相当老的代码，所以没有什么太晦涩难懂的。一个 IF ... THEN 是一个 IF ... THEN。

编号`5`和`90`行之间的代码（您的 pastebin 中的第 10 到 38 行）是您的主要处理循环。行的[GOSUB](http://en.wikipedia.org/wiki/GOSUB)`5000`和`9000`是从主循环调用的子例程。

我在这里看到的一些更神秘的功能，与方言无关：

*   [OCONV](http://docs.intersystems.com/cache20082/csp/docbook/DocBook.UI.Page.cls?KEY=RVBS_foconv)是一个格式化函数；把它想象成 sprintf()
*   PRINT 语句似乎在每个非空行之前插入一个空格；老式行式打印机通常将打印行的第一个字符解释为控制字符以前进到新页面，例如；空格表示“只打印该行”

**更新**

我在第一次阅读时错过了一些东西：括号语法正在执行子字符串操作。因此，例如，您的 pastebin 第 12 行的代码，

```
IF R[26,2]='20' THEN GOSUB 9000;GOTO 5 
```

将缓冲区（与`READ`at 行相关联`5`）的字符 26 和 27 与 string 进行比较`'20'`。在下一行中`R[26,2]#30`，`#`是一个不等于运算符。

**更新**

我和你在一起，文档中并未解释所有格式字符串。但我怀疑`Z`, `9`, 和`,`他们在 COBOL 中的工作方式一样。

*   `Z`: 抑制前导零：如果对应的数字和左边的所有数字都为零，则打印空格，否则打印数字
*   `,`：如果左边有一个非空白/非零数字，则打印逗号，否则打印空格
*   `9`：打印相应的数字，即使它是零

因此，格式字符串为`MDZZ,ZZ9`：

```
0     prints as      0
12    prints as     12
123   prints as    123
1234  prints as  1,234
12345 prints as 12,345 
```

**更新**

您的 pastebin 中的语句语法与`OPEN`Caché MultiValue Basic 和 UniBasic 的文档不完全匹配。但是，我可以推测字符串的一部分`'1/1/FSNC0128S'`表示通道号 1，并且它与出现在

```
5    READ R FROM 1 ELSE GOTO 90 
```

将通道号想象为 Perl 中的文件句柄或 C 文件描述符。

我会假设`1`字符串中的另一个是某种访问修饰符（尽管`FOR RANDOM IO`这似乎是矛盾的），并且只专注于定位文件`FSNC0128S`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-25T11:58:12.860

我可以告诉你它最初是什么，因为我在 1976/77 年左右实现了 KEYBASIC。我在 CMC 的 Sovereign 系统上工作并实施了他们的数据输入系统。该公司已经有一个相当标准的 Basic 解释器和运行时系统，它在 Sovereign 系统上运行。我首先将其修改为分时共享，因为多个数据输入用户使用一个 Sovereign 处理器，其次添加了一些额外的面向数据输入的功能，这些功能都以“K”为前缀。修改后的语言被称为“KEYBASIC”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T13:35:21.613

[Cache MultiValue Basic](http://docs.intersystems.com/cache20082/csp/docbook/DocBook.UI.Page.cls?KEY=RVBS)是我能找到的最合适的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:55:24.863

这绝对是 BASIC 的一些方言。几年前，Data General 有一个基本版本，在当时非常适用于严肃的多用户业务应用程序。维基百科有一篇文章提到了这种方言和一些类似的竞争对手。

[http://en.wikipedia.org/wiki/Data_General_Business_Basic](http://en.wikipedia.org/wiki/Data_General_Business_Basic)

如果代码很旧，您是否检查过它是 CBASIC 的可能性？CBASIC 是在早期微型计算机上开发业务应用程序的流行方式。

[http://en.wikipedia.org/wiki/CBASIC](http://en.wikipedia.org/wiki/CBASIC)

# jquery - 显示一个简单的 GIF，同时使用 HTML5 上传文件

> ID：15500057
> 
> 赞同：0
> 
> 时间：2013-03-19T12:52:13.277
> 
> 标签：jquery, html, file-upload, progress-bar, gif

使用 HTML5 上传文件，是否可以检查文件是否正在上传？最终我想展示一个简单的 gif，比如进度条，但没有任何困难的计数器/数学，所以只是一个像这样的简单 gif；

![在此处输入图像描述](../Images/85f3bc6249179d27d3a50a9a38b3cc67.png)

[http://jsfiddle.net/DFT78/](http://jsfiddle.net/DFT78/)

当文件上传时，我希望它再次隐藏。我想知道的是；我如何“检查”文件是否正在上传？

**代码**(HTML5rocks)

```
 <style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:56:24.543

我不确定执行此操作的“正确”方法。但是我使用 iframe 到上传页面，然后我可以在上传工作时在其中放置一个 gif。

# java - 指定范围内没有适用于 > javax.jdo:jdo-api:jar:[3.0, 4.0) 的版本

> ID：15500058
> 
> 赞同：0
> 
> 时间：2013-03-19T12:52:15.413
> 
> 标签：java, google-app-engine, maven, maven-3, datanucleus

我正在尝试增强我的 Google App Engine 项目，但我不断收到此错误。在我不得不在我的机器上重新安装我的操作系统之前它工作正常，现在它抱怨这个：

> [错误] 无法在项目 codex-gae 上执行目标 net.kindleit:maven-gae-plugin:0.9.5:enhance (default-cli)：执行目标 net.kindleit:maven-gae-plugin:0.9 的 default-cli .5：增强失败：插件 net.kindleit:maven-gae-plugin:0.9.5 或其依赖项之一无法解析：无法收集 net.kindleit:maven-gae-plugin:jar:0.9.5 的依赖项(): 指定范围内没有适用于 javax.jdo:jdo-api:jar:[3.0, 4.0) 的版本 -> [帮助 1]

这是我的相关节`pom.xml`：

```
<plugin>
    <groupId>org.datanucleus</groupId>
    <artifactId>maven-datanucleus-plugin</artifactId>
    <version>3.0.1</version>
    <configuration>
        <api>JPA</api>
        <verbose>true</verbose>
    </configuration>
    <executions>
        <execution>
            <phase>process-classes</phase>
            <goals>
                <goal>enhance</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

我签入了我`~/.m2/repository/`的文件，`.jar`文件在那里：

```
[jhr@Jarrods-Mac-Pro] [~/.m2/repository/javax/jdo/jdo-api/3.0.1]

-rw-r--r--  1 jhr  staff   196K Mar 14 23:18 jdo-api-3.0.1.jar
-rw-r--r--  1 jhr  staff    40B Mar 14 23:18 jdo-api-3.0.1.jar.sha1
-rw-r--r--  1 jhr  staff   7.7K Mar 14 23:18 jdo-api-3.0.1.pom
-rw-r--r--  1 jhr  staff    40B Mar 14 23:18 jdo-api-3.0.1.pom.sha1 
```

**有什么建议为什么找不到依赖项？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:10:00.373

所以Maven已经失去了阴谋。删除任何 maven-metadata-* 文件（可能在上面的目录中）并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T20:01:35.593

我将增强任务添加到官方支持的 appengine 插件中。你可能想试一试。它刚刚添加，因此非常感谢任何反馈。 [https://code.google.com/p/appengine-maven-plugin/](https://code.google.com/p/appengine-maven-plugin/)

# android - android中的rawQuery()

> ID：15500063
> 
> 赞同：-2
> 
> 时间：2013-03-19T12:52:26.457
> 
> 标签：android, sqlite

我有一个这样的sql查询：

```
 String loadFav = "SELECT Aid FROM  Author_table where " + " Author_name= 'Sultan' ";
   Cursor result2 = db.rawQuery(loadFav, null); 
```

但是我对这段代码感到异常。有什么理由得到例外吗？我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:04:48.360

```
String loadFav = "SELECT Aid FROM  Author_table where ...";
Cursor result2 = db.rawQuery(loadFav, null); 
```

很可能您的错误被抛出，因为您`SQLiteDatabase`被分配到`NULL`. 确保你在它之前打电话

```
db = helper.getWritableDatabase(); // or getReadableDatabase() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:16:06.313

这不是您问题的答案（我猜 Sajmon 是对的），但考虑使用参数化查询而不是您的，它更安全有效：

```
String[] whereCriteria = new String[] {"Sultan"};
String query ="SELECT Aid FROM  Author_table where Author_name=?";
Cursor cursor = db.rawQuery(query, whereCriteria); 
```

# outlook-addin - 插件功能区控制按钮不显示图像

> ID：15500070
> 
> 赞同：0
> 
> 时间：2013-03-19T12:52:42.800
> 
> 标签：outlook-addin, outlook-2010

我在 Microsoft.Outlook.Mail.Compose 中为 Outlook 创建了一个插件按钮。我的问题是我可以看到按钮但看不到图像。我在回调方法中返回位图图像。我还尝试使用转换图像stdole.IPictureDisp，但没有希望。谁能告诉我我错过了什么。我应该尝试将图像添加到 Outlook 的剪贴板吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:30:58.353

此代码可能会有所帮助：[https ://github.com/frankfralick/InventorAddIns/blob/master/SimpleAddInIronPython/PictureDispConverter.cs](https://github.com/frankfralick/InventorAddIns/blob/master/SimpleAddInIronPython/PictureDispConverter.cs)

调用 ToIPictureDisp 获取 stdole.IPictureDisp

# sql - H2删除查询限制

> ID：15500072
> 
> 赞同：4
> 
> 时间：2013-03-19T12:52:46.987
> 
> 标签：sql, h2

我正在尝试从 h2 数据库（版本 1.0.71）中删除记录，但出现查询语法错误。我执行的查询是：

```
DELETE FROM TABLE_NAME WHERE QUERY_FIELD LIKE '%somevalue%' LIMIT 1000; 
```

我收到的错误消息是（这对我没有太大帮助）：

```
Syntax error in SQL statement DELETE FROM TABLE_NAME WHERE QUERY_FIELD LIKE '%somevalue%' LIMIT[*] 1000; 
```

这`LIMIT`部分似乎是问题所在，这在 h2 1.0.71 中不支持吗？

当我执行类似的`SELECT`查询时：

```
SELECT * FROM TABLE_NAME WHERE QUERY_FIELD LIKE '%somevalue%' LIMIT 1000; 
```

它给了我预期的结果。是`LIKE`和`LIMIT`可能有问题的组合吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:55:15.060

您可以像这样`SELECT`在`WHERE`子句中添加一条语句：

```
DELETE
FROM TABLE_NAME
WHERE QUERY_FIELD LIKE '%somevalue%'
AND id_field IN (SELECT id_field
                   FROM table_name
                  WHERE QUERY_FIELD LIKE '%somevalue%'
                  LIMIT 1000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:07:37.680

此解决方案甚至适用于旧版本的 H2：

```
DELETE FROM TABLE_NAME 
WHERE QUERY_FIELD LIKE '%somevalue%' 
AND ROWNUM() < 1000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T15:27:27.867

升级到 H2 的更新版本，然后`LIMIT`像以前一样使用。

您使用的 H2 版本 (1.0.71) 大约有 5 年历史，不再受支持。要升级，请生成一个 SQL 脚本（使用`SCRIPT`语句），然后执行该脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:56:29.883

尝试

```
DELETE TOP 1000 FROM TABLE_NAME WHERE QUERY_FIELD LIKE '%somevalue%'; 
```

# c++ - 函数中的字符数组

> ID：15500077
> 
> 赞同：-1
> 
> 时间：2013-03-19T12:52:55.197
> 
> 标签：c++, arrays

我面临一个令人困惑的问题，我有一个返回字符数组的函数我尝试读取并打印出来，但输出似乎是垃圾值

```
char  *ssl;
ssl = router_con.get_ssp_IO('1',this->no_io_l1);

for(int qq=0;qq<this->no_io_l1;qq++)
{ std::cout<<ssl[qq]<<"\n";
} 
```

get_ssp_IO 函数如下

```
char*  TCP_IP_Connection::get_ssp_IO(char level,int id)
{
int ctr,ss=0;
char sspi[id];
for(int a=0,ctr=0;a<this->len;a++)
  {
if(this->data[a]=='?')
{
    do
    {
        a++;
    }while(this->data[a]!='\n');
}
else if(this->data[a]==' ')
      {
     ctr++;

        if(ctr==3)
       {
            sspi[ss]=this->data[a+1];

            ctr=0;
            ss++;
       }

       }

    }
  return(sspi);
} 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:00:01.777

没有进一步的细节，我的怀疑是`get_ssp_IO(....)`看起来像这样：

```
.... get_ssp_IO(....) {
    char ret[some_length];
    ....
    return ret;
} 
```

但是一旦函数返回，数组内存是未定义的。正如您在 C++ 中一样，您应该`std::string`改用它，这将使您摆脱所有内存管理问题。

# html - MVC 4向导航菜单添加子项

> ID：15500078
> 
> 赞同：1
> 
> 时间：2013-03-19T12:52:55.573
> 
> 标签：html, css, drop-down-menu, asp.net-mvc-4, responsive-design

我开始使用 MVC4（响应式）、HTML5 和 CSS3。

我创建了一个新的 MVC4 项目，现在我想在导航菜单中添加子项，我想保留当前结构以保持响应性，我只想添加子项。

HTML是这样的：

```
<nav>
  <ul id="menu">
    <li>@Html.ActionLink("Menu 1", "Index", "Home")
      <ul>
        <li><a href="#">Sub 1.1</a></li>
        <li><a href="#">Sub 1.2</a></li>
        <li><a href="#">Sub 1.3</a></li>
      </ul>
    </li>
  </ul>
</nav> 
```

CSS看起来像：

```
/* menu */
nav {
    margin-bottom: 5px;
}

ul#menu {
    margin: 0;
    padding: 0;
    text-align: center;
}

ul#menu li {
    margin: 0;
    padding: 0;
} 
```

我必须做哪些更改才能制作下拉菜单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:13:21.060

你将另一个嵌套`<ul>`在一个`<li>`

```
<ul>
  <li><a href="#">Menu1</a></li>
  <li><a href="#">Menu2</a></li>
  <li><a href="#">Menu3</a></li>
  <li>
    <a href="#">Menu4</a>
    <ul class='nested'>
        <li><a href="#">SubMenu1</a></li>
        <li><a href="#">SubMenu2</a></li>
        <li><a href="#">SubMenu3</a></li>
    </ul>
  </li>
</ul> 
```

然后你会想要嵌套的 ul 上的一些样式来隐藏它，直到用户在 parent 上执行鼠标悬停`<li>`。

```
#nav ul{
    display : none;
}
#nav li:hover > ul{
    display : block;
} 
```

这里有一个小提琴供你看：http: [//jsfiddle.net/8QtaL/6/](http://jsfiddle.net/8QtaL/6/)

这是一个纯 html/css 解决方案。没有 jQuery 或 javascript。

# javascript - 没有从 $.ajax 成功函数收到适当的答案

> ID：15500082
> 
> 赞同：0
> 
> 时间：2013-03-19T12:53:01.110
> 
> 标签：javascript, jquery, ajax

我使用**$.ajax**函数来获取一些内容，然后我需要从中打印出一些特殊的标签，但是那里没有数据！我这样做：

```
$(document).ready(function(){
  $("button").click(function(){
    $.ajax({
        url:"http://127.0.0.1/demo/w/?p=97",
        dataType: "html",
        success:function(out){
            mine = $(out).find(".especial");
            $("body").html(mine);
        }
    });
  });
}); 
```

当然，当我完全打印出内容时，没有问题。像这样：

```
$(document).ready(function(){
  $("button").click(function(){
    $.ajax({
        url:"http://127.0.0.1/demo/w/?p=97",
        dataType: "html",
        success:function(out){
            mine = out;
            $("body").html(mine);
        }
    });
  });
}); 
```

似乎问题是我无法声明`out`为 jQuery 对象`$(out)`，因此该`find()`函数不起作用。或者问题可能出在其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:57:16.010

我打赌你需要`find()`用`filter()`.

```
mine = $(out).filter(".especial"); 
```

或者

```
mine = $("<div/>").html(out).find(".especial"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T04:34:03.537

我自己找到了答案。代码没有错误！

问题是我使用的 JQuery 1.9.1 女巫不支持该代码！所以我改用JQuery 1.7.1，问题就解决了！

然后在我在这里借助迁移代码再次使用 JQuery 1.9.1 之后：http: [//code.jquery.com/jquery-migrate-1.1.1.min.js](http://code.jquery.com/jquery-migrate-1.1.1.min.js)

**问题解决了** :-)

# android - 如何将 Horizo ntalListView 的高度设置为 wrap_content？

> ID：15500084
> 
> 赞同：0
> 
> 时间：2013-03-19T12:53:05.530
> 
> 标签：android, android-layout

## 背景

Android没有horizo​​ntalListView，所以我用[了这个](https://github.com/dinocore1/DevsmartLib-Android)（[这里是直接链接](https://github.com/dinocore1/DevsmartLib-Android/blob/master/devsmartlib/src/com/devsmart/android/ui/HorizontalListView.java)）。

## 问题

我需要将 Horizo​​ntalListView 的高度设置为与其中的项目相同，并且由于某种原因，对于普通 listView 工作正常的东西在这里不起作用 - wrap_content 使视图占据整个高度，但项目采取他们需要的最小高度。两个高度应该相同。

因此，例如，此代码有效：

```
<TextView
android:layout_width="match_parent"
android:layout_height="0px"
android:background="#ff00ff00"
android:text="tt2" android:layout_weight="1"
android:textSize="30dp" />

<TextView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffff0000"
android:text="tt"
android:textSize="30dp" /> 
```

但是如果我使用 Horizo​​ntalListView 作为底视图，它会占用整个区域。如果我使用RelativeLayout，它也不起作用。

不仅如此，使用每个项目的 layoutParams 具有特定高度（在 getView() 方法内）也不会改变任何事情，并且它们会继续采用所需的最小高度（即使我将它们设置为 2倍大）。

## 问题

这个类有什么修复方法可以像我们使用 ListView 一样使用它吗？

# java - Javafx 将表格复制到 Excel

> ID：15500102
> 
> 赞同：5
> 
> 时间：2013-03-19T12:53:57.320
> 
> 标签：java, javafx, copy-paste

我正在创建一个应用程序，在其中以图表和表格的形式显示一些数据。现在我希望用户能够从表中复制数据并将其插入 Excel。我的复制功能工作正常，但输出有些问题。

例如，如果我想复制下表：

![我的桌子](../Images/3159eb5b29efc0fb482ec398b299d5a8.png)

我在 Excel 中得到以下输出：

![在此处输入图像描述](../Images/f95b6f8c0d9805665631b5b33ceaaceb.png)

如果您看不出来，数据将显示在 Excel 的单列中。

有谁知道，当粘贴到 Excel 中时，如何实现正确的输出，以便每个数据进入单独的列？

以下是我用来复制的代码：

```
table.getSelectionModel().setCellSelectionEnabled(true);
table.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);
MenuItem item = new MenuItem("Kopiér");
item.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        ObservableList<TablePosition> posList = table.getSelectionModel().getSelectedCells();
        int old_r = -1;
        StringBuilder clipboardString = new StringBuilder();
        for (TablePosition p : posList) {
            int r = p.getRow();
            int c = p.getColumn();
            Object cell = table.getColumns().get(c).getCellData(r);
            if (cell == null)
                cell = "";
            if (old_r == r)
                clipboardString.append('\t');
            else if (old_r != -1)
                clipboardString.append('\n');
            clipboardString.append(cell);
            old_r = r;
        }
        final ClipboardContent content = new ClipboardContent();
        System.out.println(clipboardString);
        content.putString(clipboardString.toString());
        Clipboard.getSystemClipboard().setContent(content);
    }
});
MenuItem item2 = new MenuItem("Kopier række");
item2.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {
        String rowContent = "";
        ObservableList<TablePosition> posList = table.getSelectionModel().getSelectedCells();
        System.out.println(rowContent);
        for (TablePosition p : posList) {
            int c = 1;
            int row = p.getRow();
            System.out.println("c " +c);
            System.out.println("row "+row);
            for (int i = 1; i < table.getColumns().size(); i++) {
                rowContent = rowContent +" "+table.getColumns().get(c).getCellData(row);
                if (c < 13) {
                    c++;            
                }   
            }       
        }
        final ClipboardContent allContent = new ClipboardContent();
        allContent.putString(rowContent.toString());
        Clipboard.getSystemClipboard().setContent(allContent);
        System.out.println(allContent.toString());
        rowContent = "";
    }
});
ContextMenu menu = new ContextMenu();
menu.getItems().addAll(item,item2); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T12:58:03.830

`\t`在列之间添加一个选项卡。Excel 应该识别这一点并使用新的单元格。它在使用标签在记事本中编写并将其粘贴到excel中时起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T13:56:58.517

[我的图书馆](https://github.com/jalva-top/jalvafx)解决方案方法签名：

```
TableViewUtils.copyToClipboard(TableView<T> table, ObservableList<T> rows) 
```

或者

```
// add 'Copy table' and 'Copy row' menu items
TableViewUtils.addCopyToClipboardMenuItem(TableView<T> table) 
```

[![在此处输入图像描述](../Images/8e41efdaf438202b708923ccce9da63f.png)](https://i.stack.imgur.com/uwyPO.png)

# c++ - 检查所有值是否在链表中至少重复两次

> ID：15500106
> 
> 赞同：2
> 
> 时间：2013-03-19T12:54:04.243
> 
> 标签：c++, list, linked-list

[我有与http://www.cplusplus.com/forum/beginner/73928/](http://www.cplusplus.com/forum/beginner/73928/)上定义的完全相同的`Elem`类`List`

`true`如果所有值都重复了两次或更多次，您能否提出一些关于如何编写返回函数的提示？例如

```
1,1,1,2,2 - true
1,2 - false 
```

我有点觉得它肯定需要一个动态数组，但想不出算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:57:51.547

是的，[`std::map<int,int>`](http://www.yolinux.com/TUTORIALS/CppStlMultiMap.html)在你计算列表中每个数字的出现次数的地方做一个。此计算需要遍历所有列表。

然后，再次遍历`std::map`刚刚创建的值，看看所有值是否大于或等于 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:22:55.337

该函数看起来像这样（未经测试）：

```
 std::map<int,int> m_mapCount;
  std::map<int,int>::iterator m_Iterator;

  for (l.start(); !l.end(); l.next()) // put the content of your linkedlist to map
  {
       m_mapCount[l.current->num] += 1;
  }

  for (m_Iterator=m_mapCount.begin(); m_Iterator!=m_mapCount.end(); m_Iterator++)
  {
      if(m_Iterator->second >= 2) return true;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:34:30.230

```
bool twoormore()
    {
        int count = 0;// for counting elements in list
        int temp;// temprorary element for sorting and logical part
        int cik;// how much times the value has been mentioned
        bool res = true;// function result
        int * arr;// pointer for the upcoming dynamic array
        for(start();!end();next())
        {
            count++;// counting the elements

        }
        if(count != 0){
            arr = new int[count];//creating array
            int i = 0;
            for(start();!end();next())
            {
                arr[i++] = current->num;//filling array
            }
            /** array sorting **/
            for(int i = 0;i < count;i++)
                for(int j = 0; j < count; j++)
                {
                    if(arr[j] > arr[i])
                    {
                        temp = arr[i];
                        arr[i] = arr[j];
                        arr[j] = temp;
                    }
                }
            /** sort ends **/
            temp = arr[0]; // setting first element ar temp.. for upcoming check
            cik = 1;// it's been its first time
            for(int i = 1;i < count;i++)
            {
                if(arr[i] == temp)
                {
                    cik++; continue;// if upciming element is equal to temprorary , then add 1 to counter.. and continue looping
                }else
                {
                    if(cik > 1)
                    {
                        temp = arr[i];// if everything ok, but element value changes.
                        cik = 1;// sets defualt
                        continue;
                    }
                    else
                    {
                        res = false;// other way, the value wasnt there two times
                        break;
                    }
                }

            }
            delete arr;//deleting allocated space for array
            return res;// returning bool, true or false.
        }
    } 
```

# r - 在嵌入函数 R 之后对矩阵进行排序

> ID：15500112
> 
> 赞同：0
> 
> 时间：2013-03-19T12:54:18.190
> 
> 标签：r, sorting, matrix, embed

所以就这么简单，谢谢。

我想不出一个通用函数可以帮助我对嵌入函数的结果矩阵进行排序。

前任：

```
moustache <- embed(c(1:4),3)
    moustache
          [,1] [,2] [,3]
    [1,]    3    2    1
    [2,]    4    3    2  

I would rather like the matrix :
          [,1] [,2] [,3]
    [1,]    1    2    3
    [2,]    2    3    4 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:58:48.703

您可以使用标准索引来做到这一点：

```
embed(1:4,3)[,3:1]
      [,1] [,2] [,3]
[1,]    1    2    3
[2,]    2    3    4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:59:56.273

反转列：

```
moustache[ , ncol(moustache):1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:59:44.727

这可以对任何矩阵进行排序：

```
t(apply(moustache,1,sort)) 
```

# android - 使用 Actionbar_sherlock 在姜饼上显示 searchview

> ID：15500115
> 
> 赞同：2
> 
> 时间：2013-03-19T12:54:23.587
> 
> 标签：android, mono, actionbarsherlock

我想在姜饼中使用搜索视图（比如 Whatsapp 是如何做到的）。我正在使用 ActionBar_Sherlock 4.2.0，但由于某种原因我找不到 Searchview，但应该支持它（我可以找到类文件）

ActionBar_Sherlock.widget 只有 ShareActionProvider。我不知道为什么这不起作用。有人可以帮帮我吗？

谢谢

# .htaccess - 如何使用 .htaccess 重定向目录名称，而不是页面名称？

> ID：15500117
> 
> 赞同：0
> 
> 时间：2013-03-19T12:54:28.687
> 
> 标签：.htaccess

所以我正在编辑的网站既有`/Drug-Charges`Drug-Charges.html 也有。

我如何重定向一个，而不是另一个？我所做的一切似乎都会影响两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:57:06.490

尝试使用美元符号：

```
RewriteRule ^/Drug-Charges$ /something-else 
```

符号表示这`^`是字符串的开头，而是字符串`$`结尾的标记。

# windows-phone-8 - Windows Phone 8 网络浏览器控制行为

> ID：15500123
> 
> 赞同：0
> 
> 时间：2013-03-19T12:54:41.997
> 
> 标签：windows-phone-8

如何防止`WebBrowser`在 Windows Phone 8 中的控件中缩放和平移网页？我将以下元标记放在我的网页中，但没有效果。

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no;"> 
```

此外，在上下垂直滚动时，我的控件中会显示空白`WebBrowser`。有谁知道如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:09:40.137

```
body {
         -ms-touch-action: none;
     } 
```

# powerbuilder - PowerBuilder 复合数据窗口

> ID：15500128
> 
> 赞同：1
> 
> 时间：2013-03-19T12:54:49.390
> 
> 标签：powerbuilder, datawindow

我有一个包含 2 个报告的复合数据窗口，一个在详细信息带中，另一个在摘要带中。我的预期结果是详细信息带中的报告首先出现，当它结束时，另一个报告开始。但是，情况并非如此，摘要中的报告与详细报告重叠。

我怎样才能达到我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:00:26.810

先到先得是什么意思？完成检索或图形重叠？根据定义，组合是多个 DW 报告。你不能控制他们的顺序？您是否将每个组设置为自动调整大小？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:13:16.827

澄清一下：我的合成中有 2 个报告，问题是它们显示在彼此之上，即使我将它们放在不同的波段中。他们实际上画错了。

经过一些实验，我发现这是我填充报告的方式。我在 for 循环中同时填充它们。我猜测 Composite 无法确定第一个结束的位置，因此另一个可以开始。我以前用 SQL-reports 做了复合，然后这个错误就不会发生了。

解决方案是首先在顶部填充报告，同时将数据添加到临时数据存储区。当我完成循环时，我将数据从数据存储复制到复合底部的报告中，这给了我想要的效果。

# excel - Excel：需要帮助在 Excel 公式中使用 IF 函数

> ID：15500133
> 
> 赞同：0
> 
> 时间：2013-03-19T12:55:01.510
> 
> 标签：excel, if-statement, excel-formula

我的功能如下所示：

```
=CONCATENATE("[a href=""url", LEFT(J2,SEARCH(";",J2)-1), ".asp""]link text[/a]", "[/br][/br]", B2) 
```

该`LEFT/SEARCH`函数将单元格值`J2`取到第一个分号为止。我想合并一个`IF`函数，以便在`J2`没有分号的情况下获取整个单元格值。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:00:24.807

试试这个（假设你有 Excel 2007+）：

```
=CONCATENATE("[a href=""url", IFERROR(LEFT(J2,SEARCH(";",J2)-1),J2), ".asp""]link text[/a]", "[/br][/br]", B2) 
```

如果没有，请告诉我，我会给你一个不同的公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:06:16.250

尝试：

```
=CONCATENATE("[a href=""url", LEFT(J2,IF(ISERROR(SEARCH(";",J2),LEN(J2),SEARCH(";",J2)-1))), ".asp""]link text[/a]", "[/br][/br]", B2) 
```

# android - ListActivity 永远占用，应用程序给出一个空白屏幕

> ID：15500135
> 
> 赞同：0
> 
> 时间：2013-03-19T12:55:06.863
> 
> 标签：android, android-asynctask, listactivity

我正在构建一个警报应用程序。单击按钮后，应用程序的一部分会扫描设备的内部和外部存储器，然后显示`ListView`系统中的所有音频文件。相关部分代码如下：

```
UpdateTime.java:

public class UpdateTime extends Activity {

    Intent changeSound;
    Button alarmSound;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.update_time);

        alarmSound = (Button)findViewById(R.id.alarmSound);
        alarmSound.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {

                changeSound = new Intent (UpdateTime.this, SelectAudio.class);
                startActivityForResult(changeSound, 1);         
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.update_time, menu);
        return true;
    }
} 
```

这是找到音频文件然后将它们显示在`ListActivity`. 我已经在`listData()`其他地方检查了这个类的方法，它工作得很好，所以如果你愿意，你可以跳过阅读该部分。

```
SelectAudio.class:

public class SelectAudio extends ListActivity {

    public static final int selectAudioInteger = 2;

    Intent incomingIntent;
    String fileName [];
    String fileTitle [];
    String names = "";
    String titles = "";

    ContentResolver myResolver;
    Cursor myCursor;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        myResolver = this.getContentResolver();
        incomingIntent = getIntent();
        listData();
        fileName = names.split("\n");
        fileTitle = titles.split("\n");

        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, fileTitle));

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        String str =  fileName[position];
        incomingIntent.putExtra("fileTitle", str);
        setResult(selectAudioInteger, incomingIntent);
        Toast toast = Toast.makeText(getApplicationContext(), fileTitle[position] + " selected" , Toast.LENGTH_SHORT);
        toast.show();
        finish();
    }

    void listData()
    {
        Uri uriInternal = android.provider.MediaStore.Audio.Media.INTERNAL_CONTENT_URI;
        Uri uriExternal = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;

        Cursor curExternal = myResolver.query(uriExternal, null, MediaStore.Audio.Media.IS_MUSIC, null, null);
        Cursor curInternal = myResolver.query(uriInternal, null, MediaStore.Audio.Media.IS_MUSIC, null, null);

        int iTitleExternal = curExternal.getColumnIndex(MediaStore.Audio.Media.TITLE);
        int iTitleInternal = curInternal.getColumnIndex(MediaStore.Audio.Media.TITLE);

        int iNameExternal = curExternal.getColumnIndex(MediaStore.Audio.Media.DATA);
        int iNameInternal = curExternal.getColumnIndex(MediaStore.Audio.Media.DATA);

        while(!curExternal.moveToLast())
        {
            names = names + curExternal.getString(iNameExternal) + "\n";
            titles = titles + curExternal.getString(iTitleExternal) + "\n";
            curExternal.moveToNext();
        }

        while (!curInternal.moveToLast())
        {
            names = names + curInternal.getString(iNameInternal) + "\n";
            titles = titles + curInternal.getString(iTitleInternal) + "\n";
            curInternal.moveToLast();
        }

    }

} 
```

这段代码的问题是，一旦单击按钮，屏幕就会变为空白，在 logcat 上，我收到一条消息，内容如下：

```
03-19 18:18:18.798: W/ActivityManager(59): Activity pause timeout for HistoryRecord{4a2a3d70 com.ikshvaku.intelligentalarm/.UpdateTime}
03-19 18:18:21.854: I/ActivityManager(59): Displayed activity com.ikshvaku.intelligentalarm/.SelectAudio: 3053 ms (total 3053 ms)
03-19 18:18:28.322: W/ActivityManager(59): Launch timeout has expired, giving up wake lock!
03-19 18:18:28.855: W/ActivityManager(59): Activity idle timeout for HistoryRecord{4a12ce98 com.ikshvaku.intelligentalarm/.SelectAudio} 
```

我知道，问题的解决方案与使用 AsyncTask 类有关。我只是无法找到解决问题的方法。

任何人都可以请帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:05:43.540

当您为列表活动调用 onCreate 时...您应该放置一个加载视图并打开一个异步任务来获取您的数据...当数据最终完成加载时..然后更新列表视图...用户知道您的应用程序没有被冻结或任何东西的方式......这就是我会做的事情......假设你的其余代码完美运行！

```
public class SelectAudio extends ListActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        myResolver = this.getContentResolver();
        incomingIntent = getIntent();
        fileName = names.split("\n");
        fileTitle = titles.split("\n");

        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_expandable_list_item_1, fileTitle));
        new GetDataFromDisk().execute();
    }

    private class GetDataFromDisk extends AsyncTask<String, Void, String> {

          @Override
          protected String doInBackground(String... params) {
             listData();
             return null;
          }      

          @Override
          protected void onPostExecute(String result) {               
          }

          @Override
          protected void onPreExecute() {
            ArrayAdapter adapter = getListAdapter();
            adapter.notifyDataSetChanged();
          }
    }
} 
```

# c# - 在 Unity3d 中将游戏对象动态添加到场景中

> ID：15500137
> 
> 赞同：21
> 
> 时间：2013-03-19T12:55:10.457
> 
> 标签：c#, unity3d, gameobject, ngui

我正在创建一个场景，我想在其中显示优惠列表。为了显示报价，我创建了一个带有占位符的预制件，用于在运行时获得的报价详细信息。我在场景中创建了一个占位符以将预制件添加到场景中，但它没有显示在 UI 上。OfferHolderClass:

```
using UnityEngine;
using System.Collections;

public class OfferHolder : MonoBehaviour {

    public GameObject localOffer;
    // Use this for initialization
    void Start () {
        GameObject offer = Instantiate(localOffer) as GameObject;
        offer.GetComponent<Offer>().Text = "Testing";
        offer.transform.parent = this.transform;
    }

    // Update is called once per frame
    void Update () {

    }
} 
```

我是 Unity 的新手，我不确定我在这里缺少什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-15T14:36:16.053

```
//Drag object prefab to variable in inspector
public GameObject spawnObject;
//---------------------------------------- 
```

下面将使用对象**自己**的变换设置创建游戏对象。

```
 GameObject clone;
    clone = Instantiate(spawnObject.transform, 
                        spawnObject.transform.position, 
                        spawnObject.transform.rotation) as GameObject; 
```

下面将使用对象**父母**变换设置创建游戏对象。

```
 GameObject clone;
    clone = Instantiate(spawnObject.transform, 
                        transform.position, 
                        transform.rotation) as GameObject; 
```

不确定这是否有帮助，但祝你游戏好运:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-03T10:26:33.050

在 Unity 中，您可以这样做。

```
 GameObject.Instantiate(prefab,new Vector3(1,1,0),Quaternion.identity); 
```

另请参阅：[http ://docs.unity3d.com/Documentation/ScriptReference/Object.Instantiate.html](http://docs.unity3d.com/Documentation/ScriptReference/Object.Instantiate.html)

特别是**Position**，它必须在你的相机前面，否则你可能看不到它。

更重要的是，我建议你看看NGUI。它是一个功能强大的 GUI 系统，带有一些有用的 API 用于开发。顺便说一句，我无法想象没有这样的东西开发游戏有多难，所以你迟早会需要它；\

有了它，您可以轻松做到这一点。

```
Gameobject go = NGUITools.AddChild(Gameobject Parent, Gameobject Prefab) 
```

**更新：**

当我回答这个问题时，NGUI 是**唯一**可用的 gui 系统，所以我推荐它。然而，有一个官方的 Unity UI 系统（AKA uGUI），你不必真的使用 NGUI，更不用说 gui 战争仍在继续。

更重要的是，您可能想参加泳池系统。它用于处理大型游戏对象，如子弹、立方体等。如果您在同一场景中有数百个特定游戏对象并且遭受实例化，那么您可能需要一个池。我个人尝试过 FastPool 并且效果很好，实际上所有同类资产的工作方式完全相同。

# eclipse - Eclipse和maven项目——生命周期配置

> ID：15500139
> 
> 赞同：1
> 
> 时间：2013-03-19T12:55:16.860
> 
> 标签：eclipse, maven, project, squash

当我想将开源项目 Squash Test Management 作为项目导入 Eclipse 时遇到问题。当我导入在下载包中找到的所有项目时，作为现有的 Maven 项目，我在 Eclipse 中有很多项目，但在每个项目中，我在 pom.xml 文件中都有一个错误：

```
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (execution: default-compile, phase: compile) 
```

我想我在 Eclipse 中的 Maven 插件有问题。我寻找答案但没有成功。有任何想法吗？如果我没有指定足够的信息，让我现在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:34:20.370

我认为这只是 maven 告诉您 eclipse/maven 协作并不确切知道如何处理该插件。

转到 pom 文件编辑器中的 XML Source 选项卡并使用建议的快速修复错误。快速修复应该插入一段 XML，告诉 M2E/Eclipse 如何处理插件。否则，maven 会忽略此节。

添加节后，查找：

```
<action>
    </ignore>
</action> 
```

并将其替换为

```
<action>
    <execute >
        <runOnIncremental>false</runOnIncremental>
    </execute >
</action> 
```

# c++ - 如何将一个类的对象传递给同一个类的函数？

> ID：15500141
> 
> 赞同：0
> 
> 时间：2013-03-19T12:55:22.937
> 
> 标签：c++

```
int main(){

   int choice;
   fstream in, out;                             

  switch(choice)
  {

  case 1: 
      filename = s.studentRegister();
      out.open(filename.c_str(), ios::out);
      out.write((char *)&s, sizeof(Student));
      cout<<endl<<"Registered successfully."<<endl;

  case 2:
      s.studentLogin();
  }                                   
}

class Student
{
std::string studentName, roll, studentPassword;
fstream in, out;

public:

std::string studentRegister()
{
    cout<<"Enter roll number"<<endl;
    cin>>roll;
    cout<<"Enter current semester"<<endl;
    cin>>ch;
    cout<<"Enter your name"<<endl;
    cin>>studentName;
    cout<<"Enter password"<<endl;
    cin>>studentPassword;

    return (roll+".dat");
}

void studentLogin()
{
            Student s;
    cout<<"Enter roll number: "<<endl;
            cin>>roll;
    cout<<"Enter password: "<<endl;
    cin>>studentPassword;

    filename = roll + ".dat";
    in.open(filename.c_str(), ios::in);
    in.read((char *)&s, sizeof(Student));

    read.close();

    if((studentPassword.compare(s.studentPassword)==0))
    {
        system("cls");
        cout<<"Welcome "<<s.studentName<<"!"<<endl;
        displayStudentMenu();
    }

    else
    {
        cout<<"Invalid user";
        exit(0);
    }

} 
```

我的学生班有两个功能：`studentRegister()`和`studentLogin()`. 调用 studentRegister 时，它接受学生的所有详细信息，然后将相应班级的对象写入 DAT 文件。现在，登录时，我正在尝试将文件的内容读入对象“s”，使用 `in.read((char *)&s, sizeof(Student));`

但是，这会导致运行时错误并且控制台突然关闭。出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:15:10.847

读写不能按照您尝试的方式工作。它们只适用于没有指针的类，但字符串有指针，而你的类有字符串，所以你不能使用它们。

您将不得不找到一种不同的方式来读取和写入数据。这有什么问题

```
out << studentName << ' ' << roll << ' ' << studentPassword << '\n'; 
```

和

```
in >> studentName >> roll >> studentPassword;` 
```

也不是你问的问题，但`in`也不`out`应该在你的`Student`课堂上声明。它们应该在您使用它们的函数中声明。

# sql-server - 使用 LiveCode 通过 ODBC 从 SQL Server 检索 unicode 数据

> ID：15500142
> 
> 赞同：3
> 
> 时间：2013-03-19T12:55:24.040
> 
> 标签：sql-server, unicode, odbc, livecode

我在使用 LiveCode 时遇到了这个问题，但我不知道这是问题所在还是与 ODBC 驱动程序有关。

LiveCode 内置的应用程序定期通过 ODBC 连接到 SQL Server 数据库，以检索各种数据。

负责数据库的应用程序正在升级，作为其中的一部分，所有文本字段都将转换为 Unicode 文本字段。本质上，这意味着以前定义为 varchar 的字段现在定义为 nvarchar，而以前定义为 text 的字段现在定义为 ntext。（顺便说一下，这是 SQL Server 2008。）

使用我们过去一直使用的查询，我们现在得到一个字符（字段中的第一个字符）而不是整个文本。我现在可以通过在选择查询中指定到 varchar 的转换来解决这个问题，例如，应用程序曾经发出请求，如 SELECT id，name FROM tab1 它现在发出请求，如 SELECT id，convert(varchar(255) , name) AS name FROM tab1

这行得通——我找回了以前得到的东西——但是（a）它很笨拙，（b）现在这很好，当客户只是将他们所有现有的数据迁移到数据库中时，但迟早他们可能会真正采取利用这次升级可以在字段中输入一些 Unicode 字符，然后我大概不会把它们弄出来。

不幸的是，我无权访问数据库或应用程序以插入测试数据——但我假设这个问题会出现——而且很可能它不会很明显，即我的只是一个微妙的问题应用程序没有处理输入的数据（但认为是）。

那么：有没有办法让 LiveCode 应用程序使用当前的 ODBC 驱动程序从 nvarchar 或 ntext 字段中正确检索完整数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:06:36.297

您是否可以使用 revDataFromQuery 而不是更强大的 revQueryDatabase？我不使用 revDataFromQuery 但我猜它使用的是不支持 UTF16 的 c 字符串函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:43:21.973

Hmmm. Depends on where the conversion is taking place. I haven't had to deal with this one, so take this with a grain of salt...

If the whole unicode result is making its way through the odbc driver and LiveCode's db layer then you should be able to unidecode the result. It looks like you're getting back double-byte chars and the second byte is zero, which will null-terminate the string if it's being treated as single-byte chars. This, as you noted, is what's happening when you do the conversion to varchar in the SQL request.

If the conversion is taking place in either the odbc layer or LC's db layer, then you're out of luck until that becomes open source and can be rewritten to handle unicode.

So I would say don't do the conversion to varchar, try to unidecode the result before examining it, and you've got a good chance of seeing what you expect.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T18:49:43.657

因此，为了任何遇到此问题的人的利益：事实证明，如果我只阅读文档的正确部分，我应该知道的问题是我在简单模式下使用 revDatabaseColumnNumbered -

```
put revDatabaseColumnNumbered(iConnID, iColNum) into tData 
```

...但该模式只能返回文本，这实际上不是我们这里所拥有的，而是二进制数据。所以解决方法是使用第二种模式，

```
get revDatabaseColumnNumbered(iConnID, iColNum, "tData") 
```

...此时我们获得了完整的 Unicode 数据，然后可以决定如何处理它。根本不是`revQueryDatabase`代码路径的错误，只是我在使用`revDatabaseColumnNumbered`.

感谢所有试图帮助我的人！

# clang - Clang：将所有警告升级为错误，除了……

> ID：15500143
> 
> 赞同：23
> 
> 时间：2013-03-19T12:55:26.440
> 
> 标签：clang, compiler-flags

在我目前正在 - 并且可能会在一段时间内 - 工作的项目中，我们决定使用该`-Werror`标志，作为我们之前的“无警告！” 政策没有按预期发挥作用。

然而，这带来了一个特定的问题：

API 不能再以以下方式标记为已弃用：a) 由正常的构建工具链标记，并且 b) 不会破坏构建。

所以我想问题归结为：

**有没有类似的标志`-Werror-no-${something_I_dont_want_to_promote_to_an_error}`？**

我发现*几乎*`#pragma clang diagnostic error`实现了我想要的——除了我没有捕捉到编译器*隐式启用的***所有**警告......</p>

****提前致谢。****

 ***** * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-19T13:25:46.613

[从手册](http://clang.llvm.org/docs/UsersManual.html#options-to-control-error-and-warning-messages)：

> `-Wno-error=foo`：即使`-Werror`指定了警告“foo”也将变成警告。****

# git - 在每个远程基础上使用 .gitignore？

> ID：15500144
> 
> 赞同：6
> 
> 时间：2013-03-19T12:55:26.707
> 
> 标签：git

是否可以在每个远程的基础上进行 .gitignore？我希望能够从开源项目的公共存储库中提取核心更新，但将本地更改从（当前）.gitignored 目录推送到我在不同远程的私有 git 存储库。这可能吗？

谢谢！

**编辑：**进一步思考，看起来 git 子模块可能是处理这个问题的好方法。

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

**EDIT2：**我整天都在使用子模块，该解决方案似乎非常适合我想要完成的任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:02:59.563

由于`.gitignore`文件存储在存储库中，因此它像任何其他文件一样进行版本控制。因此，它可能因分支而异，因此您可以对您喜欢的本地副本进行任何更改并将其提交到您的本地分支。

该`.gitignore`文件的内容不会影响检索存储库的内容，因此进行本地更改不会更改从项目公共存储库中提取时获得的结果。但是，当公共存储库中的版本发生更改时，您可能需要手动解决该文件中的冲突。

或者，您可以只保留该`.gitignore`文件并使用它`git add -f`来添加要在本地跟踪的文件。将文件添加到 git 存储库后，它被忽略将无效。但是，如果您经常将文件添加到被忽略的目录，那么修改`.gitignore`文件可能是个好主意，以便 git 可以提醒您有需要添加的文件。

如果您要进行其他更改，并希望将这些更改发送到公共项目的上游，则应在分支上进行这些更改，而无需对`.gitignore`文件进行本地更改以及添加那些否则会被忽略的文件。然后，您可以将这些更改与被忽略的文件合并到您的本地分支中以供您正常使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-15T11:44:14.117

我也有一个类似的问题，我使用 2 个遥控器，需要忽略它们上的不同文件。

这就是我所做的：

```
 $ git fetch <public remote> 
```

合并所有但排除对当前*.gitignore的更改*

```
 $ git merge --no-ff --no-commit <public remote>/master
 $ git checkout master path/to/.gitignore
 $ git commit -m "Merged ... into ... excluding the .gitignore" 
```

这样我就可以从远程提取更改并保留现有的*.gitignore*文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:59:20.457

No it's not possible. You'll need to maintain separate branches for that.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:51:46.033

我不这么认为——但 git 之前让我感到惊讶。

我的理解`.gitignore`是存储库范围并适用于所有内容。

可以明确指定`git add ...`被忽略的文件，然后 git 将继续跟踪它们，就好像它们没有被忽略一样——但这不是每个远程的。

# git - 多次提交后添加 gitignore

> ID：15500145
> 
> 赞同：2
> 
> 时间：2013-03-19T12:55:28.100
> 
> 标签：git

我现在在专业环境中工作了大约六周，从一开始我就一直在学习 git。这里没有版本控制系统，所以我的工作之一就是改变它。

因为我们使用的每个网站都在 Wordpress 上运行，所以我一直将完整的 wordpress 安装放入 git。过了一段时间，它变得很烦人，因为网站上传文件，显然这些文件没有被 git 跟踪。

找到[这个](https://gist.github.com/jdbartlett/444295)后，我在一个全新的网站上尝试了它，并进行了少量编辑，它完美运行！现在我真的很想在所有网站上使用它，但我不知道如果我只是将文件放入 repo 会发生什么。在阅读了一些内容后，git 会忽略已经跟踪的文件的忽略。所以我需要自己删除文件，但这对于整个 Wordpress 安装是不可撤销的！有没有办法不丢失我过去的提交信息，但仍然使用新的忽略文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:58:38.097

`git rm --cached <file>`将从存储库中删除该文件，但不会从本地文件系统中删除，`git commit`然后根据您的新文件停止跟踪该`.gitignore`文件。

# javascript - 即使浏览器支持 html5 视频，也显示后备图像

> ID：15500154
> 
> 赞同：12
> 
> 时间：2013-03-19T12:55:50.873
> 
> 标签：javascript, jquery, html, html5-video

这听起来可能很奇怪，但在这种情况下我还能显示后备图像吗？

由于移动设备（Android 和 iOS）中的视频元素在点击时会打开其原生视频播放器应用程序，因此我想显示适用于 Android 和 iOS 的视频的 GIF 版本（我将作为后备图像放置）。我知道如何通过 Javascript 检测浏览器是否是移动的，我只需要一些关于最佳实践的建议。

我在做什么

```
<video>
    <source mp4>
    <source ogg>
    <source webm>
    <img src="*.gif">
</video> 
```

然后在js中

```
if(site.isMobile()){
    $('video').hide();
    $('video img').show();
} 
```

当然它不起作用，因为 img 在视频内。我想我可以克隆 img 并将其附加到视频元素之前，然后隐藏视频元素，如下所示：

```
if(site.isMobile()){
    $('video img').clone().prependTo('video'); // just some pseudocode
    $('video').hide();
} 
```

这是一个好习惯吗？有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-19T17:12:31.987

`poster`可能是您正在寻找的：

> **海报**：一个 URL，指示要在用户播放或搜索之前显示的海报框架。如果未指定此属性，则在第一帧可用之前不显示任何内容；然后第一帧显示为海报帧。-通过[https://developer.mozilla.org/en-US/docs/HTML/Element/video](https://developer.mozilla.org/en-US/docs/HTML/Element/video)

### 例子：

```
<video width="316" height="161" poster="https://i.stack.imgur.com/BfXRi.png" controls>
  <source src="https://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" type="video/mp4" />
  <source src="https://clips.vorwaerts-gmbh.de/big_buck_bunny.ogv" type="video/ogg" />
  Your browser does not support the video tag.
</video>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T12:58:09.430

尝试这个-

```
if(site.isMobile()){
    $('video *').hide();
    $('video img').show();
} 
```

而不是创建图像的副本。

# jsp - JSP中的后退按钮覆盖

> ID：15500155
> 
> 赞同：1
> 
> 时间：2013-03-19T12:55:53.583
> 
> 标签：jsp

我需要在我的项目中实现一个功能，其中有两个 jsp Jsp1 和 jsp2。请求通过 java 类发送到 jsp2，该类根据各种条件设置一些 cookie。当用户在 jsp2 上并单击浏览器后退按钮时，控制权应仅保留在 Jsp2 上。

我尝试为此设置cookie，但这会产生很多问题，所以我不会采用这种方法。

请提出一些想法来实现此功能。

# ios - NSPredicate 按年月日过滤

> ID：15500166
> 
> 赞同：9
> 
> 时间：2013-03-19T12:56:41.997
> 
> 标签：ios, date, core-data, nspredicate

我使用 Core Data 来存储我的数据模型对象。每个对象都有 NSDate 属性。

NSDate 属性的格式如下：

```
2013-03-18 12:50:31 +0000 
```

我需要创建一个谓词，它会在`2013-03-18`没有时间的情况下通过这个值来获取我的对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T13:02:38.893

如果您的日期存储为实际日期，那么您应该利用它来发挥自己的优势，而不是摆弄格式。您可以简单地创建一个谓词来检查日期是否在两个日期之间（带有时间）。第一个日期是您的日期，时间为 00:00:00，第二个日期是在那之后的一天。

```
// Create your date (without the time)
NSDateComponents *yourDate = [NSDateComponents new];
yourDate.calendar = [NSCalendar currentCalendar];
yourDate.year  = 2013;
yourDate.month = 3;
yourDate.day   = 18;
NSDate *startDate = [yourDate date];

// Add one day to the previous date. Note that  1 day != 24 h
NSDateComponents *oneDay = [NSDateComponents new];
oneDay.day = 1;
// one day after begin date
NSDate *endDate = [[NSCalendar currentCalendar] dateByAddingComponents:oneDay 
                                                                toDate:startDate
                                                               options:0];

// Predicate for all dates between startDate and endDate
NSPredicate *dateThatAreOnThatDay = 
    [NSPredicate predicateWithFormat:@"(date >= %@) AND (date < %@)", 
                                     startDate, 
                                     endDate]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T13:11:07.083

虽然 David 展示了如何创建谓词，但我想添加一种更简单的方法来生成 0:00 的日期

```
NSDate *startDate = [NSDate date];
NSTimeInterval lengthDay;

[[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit 
                                startDate:&startDate
                                 interval:&lengthDay 
                                  forDate:startDate]; 
```

`startDate`现在包含代表`0:00`今天当前时区的日期

```
NSDate *endDate = [startDate dateByAddingTimeInterval:lengthDay]; 
```

现在我们可以把它放到谓词中

```
NSPredicate *daySpanPredicate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date < %@)", startDate, endDate]; 
```

[感谢[MartinR](https://stackoverflow.com/users/1187415/martin-r)的改进。]

# wsdl - 为什么 Websphere Process Server WSDL 导入会添加一个间接级别

> ID：15500178
> 
> 赞同：1
> 
> 时间：2013-03-19T12:57:01.913
> 
> 标签：wsdl, mapping, websphere-7, websphere-process-server

我们有一个 Web 服务，它返回一个对象（例如`CustomerResponse`），它的属性是一个列表（例如`ListOfCustomers`）。

当我们将其导入 WPS 时，它会创建一个 的层次结构`CustomerResponse`，其中有一个对象`ArrayOfListOfCustomers`，而该对象又包含实际的`ListOfCustomers`.

WPS 为什么要添加这个额外的层？有什么办法可以关闭它？

# jodatime - 如何使用 joda-time 表示大量时间

> ID：15500182
> 
> 赞同：0
> 
> 时间：2013-03-19T12:57:12.683
> 
> 标签：jodatime, period

我试图以小时分钟和秒表示值 3419779（以秒为单位）但是使用 joda 时间周期返回 -243h-06min-28，我可以用什么来以大约 950 小时 x 的正确形式表示它分钟？

我发现我做错了什么，我乘以秒 * 1000 返回一个负整数，因为结果非常大，为了纠正我做了秒 * 1000L。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T07:25:29.160

该问题是由如上所述的整数溢出引起的。请将问题标记为已回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T20:24:55.580

我发现我做错了什么，我乘以秒 * 1000 返回一个负整数，因为结果非常大，为了纠正我做了秒 * 1000L。

# c# - 没有背景点击事件的网格

> ID：15500184
> 
> 赞同：4
> 
> 时间：2013-03-19T12:57:22.607
> 
> 标签：c#, xaml, windows-8

我有一个简单的网格。我想处理 Tapped 事件。

```
<Grid Grid.Column="0" Grid.Row="0" Tapped="PlanszaItemTapped"  /> 
```

但是当 Grid 没有任何背景时，事件不会响应。

这段代码可以正常工作，但这里是背景。

```
<Grid Grid.Column="0" Grid.Row="0" Tapped="PlanszaItemTapped" Background="#FFF7F4F4" Opacity="0" /> 
```

我不需要这个背景。不透明度为 0，但是当我使动画背景可见时。

如何解决这个问题？

一般来说，我的目标是创建具有 10 列和 10 行的网格，并且 OnClick 任何项目只需添加图像。

我使用空网格来响应点击事件。

有什么最短的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:20:58.717

`Background="Transparent"`应该是一个选项，否则我相信它只是相当于`IsHitTestVisible="True"`

# asp.net - 覆盖页面渲染后 Telerik 控件不起作用

> ID：15500187
> 
> 赞同：1
> 
> 时间：2013-03-19T12:57:35.010
> 
> 标签：asp.net, ajax, telerik, telerik-grid

昨天我正在做某事，发现 Telerik 控件一旦覆盖页面呈现就会出现这种意外行为。当我编写以下代码时，我看到网格排序和 Telerik ajax 不起作用。
如果有人知道为什么以下代码片段会发生这种情况，我将不胜感激。

```
 protected override void Render(HtmlTextWriter writer)
{
    // setup a TextWriter to capture the markup
    TextWriter tw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(tw);
    // render the markup into our surrogate TextWriter
    base.Render(htw);
    // get the captured markup as a string
    string pageSource = tw.ToString();
    MatchCollection matches = Regex.Matches(pageSource, @"\[\!\[(.*?)\]\!\]");
    List<string> finishedCaptures = new List<string>();
    // Use foreach loop.
    foreach (Match match in matches)
    {
        foreach (Capture capture in match.Captures)
        {
            if (!finishedCaptures.Contains(capture.Value))
            {
                pageSource = pageSource.Replace(capture.Value, ConfigFactory.Instance[capture.Value.Trim(new char[] { '[', ']', '!' })]);
                finishedCaptures.Add(capture.Value);
            }
        }
    }
    writer.Write(pageSource);
} 
```

-感谢您宝贵的时间。

# sql-server-2008 - 向表中插入数据时的冲突包含 2 PK

> ID：15500189
> 
> 赞同：0
> 
> 时间：2013-03-19T12:57:44.490
> 
> 标签：sql-server-2008, conflict

我有 3 个表，其连接如下：

```
http://imageshack.us/photo/my-images/7/41645335.jpg/ 
```

以及我将数据输入到此表的存储过程，如下所示：

```
@tutor_id as varchar(20),
@module_id as varchar(20)

INSERT INTO tutor_module(tutor_id, module_id) VALUES(@tutor_id, @module_id); 
```

当用户单击按钮“添加”时，将数据提供给表单中的 2 个变量

但是当我调用存储过程时，我遇到了这个问题：“INSERT 语句与 FOREIGN KEY 约束“FK_tutor_module_module”冲突。冲突发生在数据库“C:\USERS\DUCTRIEU\DESKTOP\DROPBOX\G20547722\APP_DATA\G20547722DB。 MDF”，表“dbo.module”，列“module_id”。语句已终止。”

谁能让我知道如何将数据插入此表而不会出错？它们的数据格式是 varchar(20)。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:30:59.543

您正在尝试插入表`module_id`中不存在的值，`module`这就是外键的全部意义所在。这听起来很明显，但为了避免这个错误，您首先需要确保两者的值`tutor_id`和分别`module_id`存在于`tutor`和`module`表中

# wordpress - wordpress 不断循环到 Nginx 上的 wp-admin.php

> ID：15500192
> 
> 赞同：0
> 
> 时间：2013-03-19T12:57:49.560
> 
> 标签：wordpress, loops, nginx

我刚刚从 latest.tar.gz 文件中安装了一个全新的 wordpress 3.5.1 实例。

安装目录为：

/home/wordpress

数据库访问正常。该站点在 url doc.site.com 上正确显示

当我尝试通过 doc.site.com/wp-login.php 访问并输入我的管理员凭据时，wordpress 会不断循环回到 wp-login.php 而没有任何错误。

我在端口 80 和 php-fpm 上使用 Nginx、Varnish。

我不确定什么是合适的重写规则。我还验证了 wordpress 数据库中的 home 和 siteurl，值是[http://doc.site.com](http://doc.site.com)

这是我的“可用站点”文件的副本：

```
 server {
        listen 8080;
        server_name doc.site.com;
        access_log /var/log/nginx/doc.site.com.access.log;
        error_log /var/log/nginx//doc.site.com.error.log;

        root /home/wordpress;

        index index.php index.html index.htm;

        # unless the request is for a valid file, send to bootstrap
        if (!-e $request_filename)
        {
            rewrite ^(.+)$ /index.php?q=$1 last;
        }

        # catch all
        error_page 404 /index.php;

        # use fastcgi for all php files
        location ~ \.php$
        {
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME /home/wordpress$fastcgi_script_name;
            include fastcgi_params;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:54:50.327

nginx 应该支持开箱即用的 Wordpress，除了短 urls/slugs，它需要将指令添加到站点的`server`或`location`块中。

您的设置和我的设置之间的唯一区别是您使用 Varnish 来加速您的应用程序。如果您尝试关闭它会发生什么？

如果您让站点在端口 80 上侦听会发生什么？

最后，`/var/log/nginx//doc.site.com.error.log`当您通过以下方式登录时，错误日志会说什么`wp-admin.php`？

```
tail -F /var/log/nginx/doc.site.com.error.log 
```

# sql - Sql datetime format?

> ID：15500193
> 
> 赞同：-4
> 
> 时间：2013-03-19T12:57:50.133
> 
> 标签：sql, sql-server, sql-server-2008, datetime-format

My datetime that is stored in my DB, look like this:

```
2012-18-08 09:00:00 
```

I want to get it in this format

```
dd.MM.yyyy - hh:mm

// expected output:
// 18.08.2012 - 09:00 
```

How can I achieve that? Something like following

```
SELECT CONVERT(VARCHAR(10),Date,104) ?? 
```

I use MsSql 2008.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:03:18.473

Assuming SQL Server 2008 and previous versions:

```
SELECT CONVERT(VARCHAR(10),YourField,104) + '-' + 
       CONVERT(VARCHAR(5),YourField,108) 
```

For SQL Server 2012:

```
SELECT FORMAT(YourField, 'dd.MM.yyyy - hh:mm') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:05:41.240

Here you go: [Date-Formats](http://www.sql-server-helper.com/tips/date-formats.aspx)

```
SELECT CONVERT(VARCHAR(10),GETDATE(),104) + ' - ' + 
       CONVERT(VARCHAR(5),GETDATE(),108) 
```

OUTPUT: `19.03.2013 - 18:35`

## [Live Demo](http://www.sqlfiddle.com/#!3/d41d8/11219)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:04:00.653

In MySQL, there is a DATE_FORMAT() function ([https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)).

In your case, I would use:

```
DATE_FORMAT(`col`, "%d.%m.%Y - %H:%i"); 
```

# java - GWT：如何实现文件下载

> ID：15500194
> 
> 赞同：3
> 
> 时间：2013-03-19T12:57:50.813
> 
> 标签：java, gwt, servlets

我是 GWT 和一般 Web 应用程序的新手。

我正在制作一个 GWT Web 应用程序。它提供的一项功能是通过单击网页上的按钮来下载文件。不幸的是，文件本身实际上并不位于服务器端。服务器端需要通过对另一个 Web 服务的 REST 调用来获取它，以获取文件的 InputStream。

我的问题是：

1.  如何将流传递到客户端以便浏览器可以开始下载？
2.  在开始之前我是否必须在服务器上物理写入文件？

非常感谢

编辑：我找到了这个例子： [How to use GWT when download Files with a Servlet?](https://stackoverflow.com/questions/2937126/how-to-use-gwt-when-downloading-files-with-a-servlet)

在此示例中，文件物理上位于服务器端。我通过流从 Web 服务获得的文件非常大，我不想将它们保存在我的 GWT 服务器端。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:20:25.997

我们使用上面示例中的 servlet。只需确保将标题和文件名设置为适当的类型即可。（文件名必须以正确的结尾结尾）

```
// process the data (In your case go get it)
byte[] data = generateReturnBuffer();
// do not cache
response.setHeader("Expires", "0");  
response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");  
response.setHeader("Pragma", "public");
// content length is needed for MSIE
response.setContentLength(data.length);
// set the filename and the type
response.setContentType("application/pdf");  
response.addHeader("Content-Disposition", "attachment;filename=" + "fileName.pdf");  
ServletOutputStream out = resp.getOutputStream();
out.write(data);
out.flush(); 
```

其中响应是 servlet HttpServletResponse。
[在此处查找有效的 mime 类型](http://www.iana.org/assignments/media-types)。
在某些时候，您需要将数据存储在文件或内存中，因为某些版本的 Internet Explorer 需要文件长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:24:23.107

将输入流转换为首选格式并创建临时文件

```
File f = File.createTempFile("tmp", "yourformat(.txt)", new File("C:/"));

 // deletes file when the virtual machine terminate
 f.deleteOnExit(); 
```

创建临时文件下载用户，退出时自动删除。

# twitter - 如何使用 Twitter API 获取人口统计数据或见解，

> ID：15500197
> 
> 赞同：0
> 
> 时间：2013-03-19T12:57:52.077
> 
> 标签：twitter

我看过简单测量的报告、twitter 计数器、tweetstats 等。我使用过 Twitter api，我查看了文档。我没有找到获取分析数据的方法。所以，我想知道他们如何准备这些数据。我必须保存每个用户和我自己的所有数据吗？

# neo4jclient - 如何将 lucene 查询传递到 .net Neo4J 客户端

> ID：15500198
> 
> 赞同：1
> 
> 时间：2013-03-19T12:57:52.590
> 
> 标签：neo4jclient

我想使用 .net neo4j 客户端和像这样开头的密码查询

```
START n=node:node_auto_index('facebookId:("123", "456", "789")') 
```

我注意到这`CypherStartBitWithNodeIndexLookup`需要一个键和对象值，而不是一个任意的 lucene 查询字符串。

我应该如何使用 .net neo4j 客户端执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:41:08.380

请改用[CypherStartBitWithNodeIndexLookupWithSingleParameter](https://bitbucket.org/Readify/neo4jclient/src/35383bee74d4d7dcfbc55af5d0eb8ac197738544/Neo4jClient/Cypher/CypherStartBitWithNodeIndexLookupWithSingleParameter.cs?at=default)。

# java - 线程“主”java.lang.ArithmeticException 中的异常：/ 零 - 查找因素

> ID：15500202
> 
> 赞同：0
> 
> 时间：2013-03-19T12:58:08.753
> 
> 标签：java, factorization

此方法采用 int - 但是我不断收到错误消息，有人知道为什么吗？

```
 //finds the factors of a number that was entered
public void findFactors(int t)
{
    System.out.println("factors of " +t+ " are:");

    for(int i =0; i<t+1; i++)
    {
        if(t%i == 0)
        {
            System.out.println(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:11:10.437

问题是当 i 为 0 时 t%i 未定义，因为您不能除以零也不能找到余数。

与其从 0 开始循环，不如从 1 开始。

改变

```
for(int i =0; i<t+1; i++) 
```

至

```
for(int i =1; i<t+1; i++) 
```

（您也可以考虑从 2 开始测试，因为 1 将是所有整数的一个因素）

# shell - Makefile：将命令行参数传递给 Makefile 中的文件

> ID：15500204
> 
> 赞同：10
> 
> 时间：2013-03-19T12:58:15.743
> 
> 标签：shell, makefile, command-line-arguments

在我的 Makfile 中，我有以下内容，

```
smktestrun: smktest
    @../projects/test.sh 
```

我称之为：

```
Make smktestrun 
```

但有时我需要与这个文件（test.sh）一起传递一个参数/参数

所以基本上我想：

```
test.sh -abc 
```

但是，如果我只是在 Makefile 本身中传递参数，则该参数不会被视为简单地执行了 sheel 脚本。

那么有没有一种方法可以在 Makefile 中指定一个参数需要与该文件一起传递？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T13:03:05.283

就像是

```
smktestrun: smktest
        @../projects/test.sh $(TESTARGS) 
```

然后调用 Makefile

```
$ make smktestrun TESTARGS="-abc" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T13:04:37.410

您可以在 Makefile 中定义一个变量。

```
smktestrun: smktest
    @../projects/test.sh ${ARG} 
```

那么make的命令行是：

```
make smktestrun ARG="something" 
```

# c# - 如何在 DLL 中导出事件？

> ID：15500205
> 
> 赞同：1
> 
> 时间：2013-03-19T12:58:19.183
> 
> 标签：c#, dll, delegates

我有以下两个课程：

```
public class DLLClass {
     public delegate void dllDelegate(Object sender, EventArgs e);
     public event dllDelegate dllEvent;
     .....
}

class AppClass {
     DLLClass dll;

     public AppClass() {
         dll.dllEvent += new DLLClass.dllDelegate(dllEventHandler);
     }

     public void dllEventHandler(Object sender, EventArgs e){
     }
} 
```

每一个都是同一个解决方案的一部分，但指的是不同的项目。

`dllEvent`问题是编译器说`DLLClass`.

**编辑：** 错误：

> 错误 CS1061：“AppNamespace.DLLClass”不包含“dllEvent”的定义，并且找不到接受“AppNamespace.DLLClass”类型的第一个参数的扩展方法“dllEvent”（您是否缺少 using 指令或程序集引用？ )
> 
> 错误 CS0426：“AppNamespace.DLLClass.ParametersPanel”类型中不存在类型名称“dllDelegate”

此外，当我尝试`DLLClass`从 的代码中查看 的定义时`AppClass`，MSVS 会显示来自元数据的类定义，其中没有委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:04:19.870

如果您的参考不是*项目参考*，而是文件参考，您可能需要先构建第一个项目。在**Build**菜单中，选择**Rebuild All**。

如果这没有帮助，您可能引用了错误的文件。删除对第一个项目的引用，并添加一个*Project 引用*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:57:35.920

找到[了这个链接](https://stackoverflow.com/questions/837037/go-to-definition-in-visual-studio-only-brings-up-the-metadata)。

问题出在`.csproject`文件中。

# javascript - HTA xss 奇怪的行为

> ID：15500213
> 
> 赞同：0
> 
> 时间：2013-03-19T12:58:47.277
> 
> 标签：javascript, html, xss, hta

我选择 HTA 来制作一个小型网站，因为据称它忽略了同源政策。为了测试这一点，我用这 4 个 iframe 编写了一个小型测试站点：

iframe id="google" src="http://www.google.nl" application="yes">
iframe id="test" src="test.html">
iframe id="test2" src="C: /test.html">
iframe id="test3" src="D:/test/test.html">

为所有四个 iframe 准确显示内容。但是，当我使用 JS 获取 iframe 的主体时，我遇到了一个奇怪的问题：

$(document).ready(function() {

alert($("#google").contents().find("body").html());
alert($("#test").contents() .find("body").html());
alert($("#test2").contents().find("body").html());
alert($("#test3").contents ().find("body").html());
});

所有测试 id-s 的警报都按预期工作。但是，#google 的返回未定义。

我运行 HTA 的主文件位于 C:/some/directory/deep/in/test.hta

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:39:04.140

您可能误解[了 HTA 的安全策略](http://msdn.microsoft.com/en-us/library/ms536496%28v=VS.85%29.aspx#Security)。Using`application=yes`允许 中的代码*访问`iframe`*主窗口，但您无法访问跨域`iframe`文档，即使使用 HTA。想想会发生什么，如果可能的话！

我能给出的唯一建议是：***永远不要***在 HTA 中`application=yes`为第三方`iframe`（或s）设置。`frame`这真的很危险，里面的代码`iframe`可以在你的机器上做任何它想做的事情。

# dynamics-crm-2011 - req.readyState==1 ，如何改变这个？

> ID：15500218
> 
> 赞同：1
> 
> 时间：2013-03-19T12:59:04.787
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我试图使用 SOAP 请求获取实体`Priority Code`的选项集值。`Task`

```
if (typeof (SDK) == "undefined")
{ SDK = { __namespace: true }; }

SDK.SOAPSamples = {
    _getServerUrl: function () {

        var OrgServicePath = "/XRMServices/2011/Organization.svc/web";
        var serverUrl = "";
        if (typeof GetGlobalContext == "function") {
            var context = GetGlobalContext();
            serverUrl = context.getServerUrl();
        }
        else {
            if (typeof Xrm.Page.context == "object") {
                serverUrl = Xrm.Page.context.getServerUrl();
            }
            else
            { throw new Error("Unable to access the server URL"); }
        }
        if (serverUrl.match(/\/$/)) {
            serverUrl = serverUrl.substring(0, serverUrl.length - 1);
        }
        return serverUrl + OrgServicePath;
    },
    assignRequest: function (successCallback, errorCallback) {

        if (successCallback != null)
            this._parameterCheck(successCallback, "Function", "The SDK.SOAPSamples.assignRequest method successCallback parameter must be a function.");

        this._parameterCheck(errorCallback, "Function", "The SDK.SOAPSamples.assignRequest method errorCallback parameter must be a function.");

        var request = "POST https://tamaldomain.api.crm5.dynamics.com/XRMServices/2011/Organization.svc/web";
        request += "Content-Type: text/xml; charset=utf-8";
        request += "SOAPAction: http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute";

        request += "<s:Envelope xmlns:s='http://schemas.xmlsoap.org/soap/envelope/'>";
        request += "<s:Body>";
        request += "<Execute xmlns='http://schemas.microsoft.com/xrm/2011/Contracts/Services' xmlns:i='http://www.w3.org/2001/XMLSchema-instance'>";
        request += "<request i:type='a:RetrieveAttributeRequest' xmlns:a='http://schemas.microsoft.com/xrm/2011/Contracts'>";
        request += "<a:Parameters xmlns:b='http://schemas.datacontract.org/2004/07/System.Collections.Generic'>";
        request += "<a:KeyValuePairOfstringanyType>";
        request += "<b:key>MetadataId</b:key>";
        request += "<b:value i:type='c:guid' xmlns:c='http://schemas.microsoft.com/2003/10/Serialization/'>00000000-0000-0000-0000-000000000000</b:value>";
        request += "</a:KeyValuePairOfstringanyType>";
        request += "<a:KeyValuePairOfstringanyType>";
        request += "<b:key>RetrieveAsIfPublished</b:key>";
        request += "<b:value i:type='c:boolean' xmlns:c='http://www.w3.org/2001/XMLSchema'>false</b:value>";
        request += "</a:KeyValuePairOfstringanyType>";
        request += "<a:KeyValuePairOfstringanyType>";
        request += "<b:key>EntityLogicalName</b:key>";
        request += "<b:value i:type='c:string' xmlns:c='http://www.w3.org/2001/XMLSchema'>task</b:value>";
        request += "</a:KeyValuePairOfstringanyType>";
        request += "<a:KeyValuePairOfstringanyType>";
        request += "<b:key>LogicalName</b:key>";
        request += "<b:value i:type='c:string' xmlns:c='http://www.w3.org/2001/XMLSchema'>prioritycode</b:value>";
        request += "</a:KeyValuePairOfstringanyType>";
        request += "</a:Parameters>";
        request += "<a:RequestId i:nil='true' />";
        request += "<a:RequestName>RetrieveAttribute</a:RequestName>";
        request += "</request>";
        request += "</Execute>";
        request += "</s:Body>";
        request += "</s:Envelope>";

        var req = new XMLHttpRequest();
        req.open("POST", SDK.SOAPSamples._getServerUrl(), true)

        req.setRequestHeader("Accept", "application/xml, text/xml, */*");
        req.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
        req.setRequestHeader("SOAPAction", "http://schemas.microsoft.com/xrm/2011/Contracts/Services/IOrganizationService/Execute");
        req.onreadystatechange = function () { SDK.SOAPSamples.assignResponse(req, successCallback, errorCallback); };
        req.send(request);

    },
    assignResponse: function (req, successCallback, errorCallback) {
        debugger;
        if (req.readyState == 4) {
            if (req.status == 200) {
                if (successCallback != null)
                { successCallback(); }
            }
            else {
                errorCallback(SDK.SOAPSamples._getError(req.responseXML));
            }
        }
    } 
```

问题是 的值为`req.readyState`1，表示“服务器连接已建立”。但我不知道这到底是什么意思。

如何将 的值更改`req.readyState`为 4 以便从该请求中获得响应？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:36:01.093

onreadystatechange 事件被触发五次（0-4），readyState 的每一次变化触发一次。有关此状态的更多信息，请参见[此处。](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:32:54.573

我发现在某些情况下使用 javascript 编程很麻烦。因此，我创建了一个“通用处理程序”（.ashx）来编写我的解决方案并使用 XmlHttpRequest 对象从 javascript 执行此处理程序，而不是单独使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T12:45:36.750

尝试将 req 移动到 SDK.SOAPSamples 范围，然后在 assignResponse 中使用它，如下所示：

```
SDK.SOAPSamples = {
    req: null,
    _getServerUrl: function () { … },
    assignRequest: function (successCallback, errorCallback) { 
        //...           
        var req = SDK.SOAPSamples.req = new XMLHttpRequest(); 
        //...
    },
    assignResponse: function (successCallback, errorCallback) { //remove req param
        var req = SDK.SOAPSamples.req;

        if (req.readyState == 4) {
        if (req.status == 200) {
        if (successCallback != null) { successCallback(); }}
        else { errorCallback(SDK.SOAPSamples._getError(req.responseXML));}}
    }
} 
```

# java - Java 字符串连接和 System.out.println 不起作用

> ID：15500220
> 
> 赞同：2
> 
> 时间：2013-03-19T12:59:08.093
> 
> 标签：java, string

我有一个包含 100 个名称的文件，我尝试在屏幕上打印。

```
StringTokenizer sb = new StringTokenizer(fileContents, " ,\n\t");
  while (sb.hasMoreElements())
  {
     String name = sb.nextToken();
     System.out.print(name);
     System.out.print(" [ ");
     System.out.println();
  } 
```

当我`//System.out.print(" [ ");`注释掉时，它会正确显示所有 100 个名称。

取消注释将`" [ "`仅显示 100 行，根本不显示名称。

为什么会这样？这是我第一次`system.out.println`决定忽略输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:19:41.767

您的文件的编码可能包含其他可能导致打印空（或`[`）行的字符。

尝试在 StringTokenizer 中将回车`\r`特殊字符添加到您的列表中。

# jquery - 通过 jquery 获取新闻源中每个帖子的永久链接

> ID：15500221
> 
> 赞同：0
> 
> 时间：2013-03-19T12:59:13.650
> 
> 标签：jquery, facebook, jquery-selectors, google-chrome-extension

我是一个新手，试图为 facebook 编写 Chrome 扩展程序。

我的要求
1\. 在 Like/Share/Comment 区域附近显示一个“字符串”（在 HTML 中找到 class='uiStreamFooter'）
2\. 将字符串链接到帖子的永久链接。

我都做过。这是我面临的问题：

```
 $('.genericStreamStory').each(function(){
       var link = $('.uiStreamSource').find('a').attr('href');
       $('.uiStreamFooter').append("<span class='string'><a href='"+ link +"'>Permalinked String</a></span>");  
}); 
```

我在这里要做的是找到具有“genericStreamStory”类的“每个”元素，将一个名为“Permalinked String”的字符串附加到每个帖子中找到的SPAN元素“uiStreamFooter”（类= genericStreamStory）。

我能够在我的新闻源中的所有帖子下获取字符串。 **但是，链接（所有帖子）只是第一篇帖子的永久链接！**

我确信它只与 jQuery 选择和遍历有关。我自己也想不通。

*.genericStreamStory* - 每个 facebook 帖子的类
*.uiStreamSource* - 包含永久链接锚点的跨度
*.uiStreamFooter* - 包含我打算添加“字符串”的 Like、Comment、Share 按钮的 span。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:12:06.190

```
$('.genericStreamStory').each(function(){
   var link = $('.uiStreamSource').find('a').attr('href'); 
```

您不会将`.uiStreamSource`此处的元素搜索限制为特定的`.genericStreamStory`- 因此它只会为您获取在文档中找到的第一个元素的属性。

所以使用类似的东西

```
var link = $(this).find('.uiStreamSource a').attr('href'); 
```

相反，这应该可以按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:19:34.843

试试这个

```
$('.genericStreamStory').each(function(){
       var link = $(this).find('.uiStreamSource a').attr('href');
       $(this).find('.uiStreamFooter').append("<span class='string'><a href='"+ link +"'>Permalinked String</a></span>");  
}); 
```

# vbscript - 使用 vbscript 提取 ISO

> ID：15500224
> 
> 赞同：0
> 
> 时间：2013-03-19T12:59:17.333
> 
> 标签：vbscript, batch-file, iso-image

今天的问题是这样的：

我需要使用 VBScript 为 Windows 更新提取 ISO 映像文件。使用 VBScript 的原因是因为一切都在独立系统上，我试图通过制作脚本来自动化这个过程。

该 ISO 文件将位于 CD/DVD 上，通过 D：

如果有可能并且任何人都可以帮助我，那就太棒了！

虽然，如果不可能，是否可以使用标准的 Windows 命令行，使用批处理文件来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:13:33.543

如果您的服务器运行的是 Windows Server 2012 或 Windows 8 并安装了 PowerShell，则可以使用 PowerShell[将 ISO 映像挂载](https://superuser.com/a/499265/204705)为驱动器，对内容执行所需的操作，然后卸载。要在不需要用户输入的情况下自动安装，您可以`Mount-DiskImage`在 Microsoft 的[Mount-DiskImage TechNet 文章](http://technet.microsoft.com/en-us/library/hh848706.aspx)中找到命令行开关。

我不确定哪个版本的 PowerShell 开始包含`Mount-DiskImage`cmdlet。它在我安装了 PowerShell v2.0 的 Win 7 计算机上似乎不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:58:47.350

VBScript 不提供提取 ISO 图像的功能。正如@rojo 在他的评论中已经说过的那样：你为什么要首先在 CD 上将 ISO 映像刻录为文件？这样做你不会得到任何东西。更合适的程序是：

*   从映像创建一张 CD（如果您只需要该映像中的文件）。这样您就可以使用您的脚本简单地访问驱动器 D: 上的文件。
*   从 ISO 中提取文件并将它们刻录到 CD（如果要添加其他文件）。访问与上述相同。
*   从 ISO 中提取文件并将它们打包到 Zip 存档中（如果 CD 上的空间有限）。然后，您可以从驱动器 D: 上的存档中提取文件，如下所示：

    ```
    Set sa  = CreateObject("Shell.Application")
    Set zip = sa.NameSpace("D:\your.zip")
    Set dst = sa.NameSpace("C:\destination\folder")

    For Each f In zip.Items
      dst.CopyHere(f)
    Next 
    ```

    请注意，这`CopyHere`是异步的，因此它会立即返回，但您可能需要等待一段时间才能完成提取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:40:01.447

我只知道你可以使用iso工具来提取这种文件。像 Poweriso、magiciso 和 WinISO。并希望该工具对您有所帮助。

# php - 在检查变量时分配变量

> ID：15500237
> 
> 赞同：3
> 
> 时间：2013-03-19T12:59:54.817
> 
> 标签：php, variables, if-statement

我不确定这是否可能，但我正在寻找一种在`if (...) { }`语句中检查变量时分配变量的方法。基本上是什么使这...

```
$var = somefunction();

if ($var == 10) {
    #do something
} 
```

变成这样

```
if(($var = somefunction()) == 10) {
    #do something
} 
```

正如我所说，我不确定这是否可能，但只是想知道是否有办法先保存分配变量。我想要这个，因为我有一个输出数组或错误的函数。

* * *

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:02:17.283

这也将起作用：

```
if(($var = somefunction()) == 10) {
    #do something
} 
```

但是您提出的第一种方法简单、清晰且易读，除了您需要使用`==`or `===`， not`=`进行相等检查：

```
$var = somefunction();

if ($var == 10) {
    #do something
} 
```

你为什么不直接使用它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:06:35.660

我相信这样的事情会起作用：

```
if(($var = somefunction()) == 10) {
    //Do something
} 
```

本质上，这是一个评估问题。括号首先被评估，这就是为什么它会`$var = somefunction()`首先执行，然后检查返回值（$val 的值）是否为 10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T13:08:53.713

如果您不需要该变量以供以后使用，那么

```
if (somefunction() == 10) {
  //do something
} 
```

也足够了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T13:05:10.737

试试这个

```
$var ;

 if (true) {
   $var= somefunction();
   if($var==10) {
      # Handler
    }
  } 
```

# sql-server-2012-express - “LocalDb”是什么意思？

> ID：15500246
> 
> 赞同：1
> 
> 时间：2013-03-19T13:00:05.213
> 
> 标签：sql-server-2012-express

我了解到，为了连接到 SQL Server Express 2012，我必须使用实例名称“(LocalDb)\v11.0”。

这个 localDb 是本地开发的特殊数据库，还是与 Sql Express 2008 完全相同，但名称不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T02:02:28.687

我不知道你为什么一直问 SQL Server 2008 Express 是否等同于随 Visual Studio 2012 安装的 SQL Server 2012 Express 版本。

答：它们完全不同：2008、2008R2、2012。

更重要的是，SQL Express 也不同于使用新的 SSDT SQL Server 数据库项目在 Visual Studio 2012 中运行 (LocalDB)。正如另一个人所说，它仅在您运行代码时运行。

那里已经有很多信息：http: [//blogs.msdn.com/b/ssdt/archive/2012/06/06/getting-started-with-localdb-debugging-using-ssdt.aspx](http://blogs.msdn.com/b/ssdt/archive/2012/06/06/getting-started-with-localdb-debugging-using-ssdt.aspx) [http:// msdn.microsoft.com/en-US/library/ms246989.aspx](http://msdn.microsoft.com/en-US/library/ms246989.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:03:26.617

它们的不同之处在于 SQL Server Express 作为服务运行，而 localdb 在用户模式下按需运行。就创建数据库/插入数据/选择数据而言，我相信它们在功能上是相同的。

# javascript - 使用数组中的参数创建 JavaScript 函数

> ID：15500258
> 
> 赞同：3
> 
> 时间：2013-03-19T13:00:47.580
> 
> 标签：javascript

我想以自动方式从字符串中创建 JavaScript 中的函数对象，但我在参数方面有点挣扎。到目前为止，我能做的如下：

```
var objectStr = "function(x) { return x; }";
var myFunc = Function("x", "{ return x; }"); 
```

如果我做出一些假设，该函数将始终以“function(x)”开头，我可以这样做：

```
var objectStr  = "function(x) { return x;}";
var funcBody = objectStr.replace("function(x)", "");
var myFunc = Function("x", funcBody); 
```

这让我接近一种自动方法。我还可以将字符串“x”分配给一个值并将其作为我的参数传递。但是，我真的很想去一个可以提供以下内容的地方：

```
var objectStr = "function(x, y) { return x*y; }"; 
```

此时我想将参数 x 和 y 提取到一个字符串数组中。我确信我可以非常明智地使用正则表达式来做到这一点。

```
var parameters = [ "x", "y" ]; 
```

但问题是，我现在如何从我的参数数组中创建一个具有多个参数的函数？

**编辑**

想要这样做的原因是为回调生成一个函数。我无法控制这些参数的值。一个用于说明的 jQuery 示例（尽管这不是我正在使用的库）可能是：

```
// Define myFunc using approach above
// then somewhere later in 3rd party code an itterator block
// like below will call:
jQuery(data).each(function() {
    myFunc(this);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:05:06.000

```
var parsedParameters = ["x", "y"];
var parsedBody = "return x*y";
var func = Function.apply(null, parsedParameters.concat(parsedBody));
    /*function anonymous(x,y) {
        return x*y
    }*/ 
```

它之所以有效，是因为：

[http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.1](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.1)

> 15.3.1 作为函数调用的函数构造函数
> 
> 当 Function 作为函数而不是构造函数调用时，它会创建并初始化一个新的 Function 对象。因此，函数调用 Function(...) 等价于具有相同参数的对象创建表达式 new Function(...)。

因此，不必使用`new`，从而可以使用`.apply`。`.apply`用于调用带有来自数组的参数的函数。见[功能#apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

示例中传递给`.apply`after的数组`.concat`是：

```
["x", "y", "return x*y"] 
```

所以静态等价物是`new Function("x", "y", "return x*y")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:06:56.737

您可以尝试使用 eval 例如 [http://jsfiddle.net/tXe9T/](http://jsfiddle.net/tXe9T/)：

```
var objectStr = "function(x) { alert (x); }";
var evalStr = "var myfunc = " + objectStr;
eval(evalStr);
myfunc("HI"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T13:17:02.287

您可以使用 eval 评估您的功能。像这样。

[http://jsfiddle.net/sujesharukil/3Qpfx/](http://jsfiddle.net/sujesharukil/3Qpfx/)

```
var funcMultipleParam = "function(x,y) {return x*y;}",
    FuncMultiple = eval("(" + funcMultipleParam + ")");

alert(FuncMultiple(10, 20)); 
```

希望有帮助。

苏杰

# iphone - 在仅纵向应用程序中以横向模式添加子视图

> ID：15500261
> 
> 赞同：0
> 
> 时间：2013-03-19T13:00:51.777
> 
> 标签：iphone, ios6, orientation

我的应用程序是仅纵向应用程序。我需要在横向模式下添加一个子视图。对于要添加的新视图，我在 iOS 6 中设置了以下方向。

```
-(NSUInteger)supportedInterfaceOrientations
{
    NSUInteger options = UIInterfaceOrientationMaskAll;

    if (self.inAppBrowserOrientation)
     {
        if (self.inAppBrowserOrientation == UIInterfaceOrientationLandscapeLeft || self.inAppBrowserOrientation == UIInterfaceOrientationLandscapeRight)
        options = UIInterfaceOrientationMaskLandscape;
        return options;
    }
} 
```

视图将以纵向模式添加。在方向上，此视图将仅在横向模式下旋转，这是预期的。

第一次添加视图，为什么要在纵向模式下添加？虽然`self.inAppBrowserOrientation`是`UIInterfaceOrientationLandscapeRight`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:05:42.493

尝试使用以下代码段

```
-(NSUInteger)supportedInterfaceOrientations
{
    NSUInteger options = UIInterfaceOrientationMaskAll;

    if (self.inAppBrowserOrientation)
     {
        if (self.inAppBrowserOrientation == UIInterfaceOrientationLandscapeLeft || self.inAppBrowserOrientation == UIInterfaceOrientationLandscapeRight)
        options = UIInterfaceOrientationMaskLandscape;
        return options;
    }
    else
    {
        return UIInterfaceOrientationMaskLandscape;
    } 
```

}

我不确定，但当您第一次加载 aqpp 时，这可能是个问题

享受编程！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:26:14.710

```
- (void)viewDidAppear:(BOOL)animated
{ 
    [super viewDidAppear:animated];

    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:NO];
    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(degreesToRadian(270));
    landscapeTransform = CGAffineTransformTranslate (landscapeTransform, 0.0, 0.0);
    [[self navigationController].view setTransform:landscapeTransform];
    self.navigationController.view.bounds = CGRectMake(0.0, 0.0, 480, 320);
    self.navigationController.navigationBar.frame = CGRectMake(0.0, 20.0, 480, 44.0);

} 

-(void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];   

    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO];
    CGAffineTransform landscapeTransform = CGAffineTransformMakeRotation(degreesToRadian(0));
    landscapeTransform = CGAffineTransformTranslate (landscapeTransform, 0.0, 0.0);
    [[self navigationController].view setTransform:landscapeTransform];
    self.navigationController.view.bounds = CGRectMake(0.0, 0.0, 320, 480);
    self.navigationController.navigationBar.frame = CGRectMake(0.0, 20.0, 320.0, 44.0);

} 
```

在这里，默认方向是纵向，但是当编译器转到 viewDidAppear 时，它将旋转 270 度，因此在横向模式下.. 相应地调整帧大小...

祝你好运 ！！

# java - SetText 不可能，因为线程不好

> ID：15500267
> 
> 赞同：0
> 
> 时间：2013-03-19T13:01:10.387
> 
> 标签：java, html, multithreading, android-asynctask, settext

我开始使用 android 应用程序，我遇到了一个小问题。我的应用程序占用了 HTML 页面的一部分，并将该 HTML 的一些文本放在 Textviews 中。错误是：“只有创建视图层次结构的原始线程才能触及其视图”。如果我不明白，这意味着我应该将“setText()”放在 onCreate() 函数中，但它也不起作用，因为 HTML 没有完全加载。

对不起，我的英语很差，如果你有答案，谢谢。

```
package com.example.goo;

import java.text.Normalizer;
import java.util.Arrays;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;

@SuppressLint("NewApi")
public class Classement extends Activity{

    Document doc;
    String code;

    static TextView Club1;
    static TextView Club2;
    static TextView Club3;
    static TextView Club4;
    static TextView Club5;
    static TextView Club6;
    static TextView Club7;
    static TextView Club8;
    static TextView Club9;
    static TextView Club10;
    static TextView Club11;
    static TextView Club12;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.classement);

        //Attribution des TextView
        this.Club1  = (TextView)findViewById(R.id.TVClub1);
        this.Club2  = (TextView)findViewById(R.id.TVClub2);
        this.Club3  = (TextView)findViewById(R.id.TVClub3);
        this.Club4  = (TextView)findViewById(R.id.TVClub4);
        this.Club5  = (TextView)findViewById(R.id.TVClub5);
        this.Club6  = (TextView)findViewById(R.id.TVClub6);
        this.Club7  = (TextView)findViewById(R.id.TVClub7);
        this.Club8  = (TextView)findViewById(R.id.TVClub8);
        this.Club9  = (TextView)findViewById(R.id.TVClub9);
        this.Club10  = (TextView)findViewById(R.id.TVClub10);
        this.Club11  = (TextView)findViewById(R.id.TVClub11);
        this.Club12  = (TextView)findViewById(R.id.TVClub12);

        //Appel de la classe gérant le HTTP
        new NetworkOperation().execute();
    }   

    //Gère le HTTP
    class NetworkOperation extends AsyncTask<Void, Void, String > {
        protected String doInBackground(Void... params) {
            //On se connecte au site et on charge le document html grâce au plugin Jsoup
            try {
                System.out.println("1");
                doc = Jsoup.connect("http://www.nationalleague.ch/NL/fr/index.php").get();
                System.out.println("2");
                //Récupère le texte d'une balise ayant tblAdvA pour id
                Element getId = doc.getElementById("tblAdvA");
                code = getId.text();
                System.out.println(code);

                //Supprime les accents
                code = Normalizer.normalize(code, Normalizer.Form.NFD);
                code = code.replaceAll("[^\\p{ASCII}]", "");

                //Appelle la fonction permettant de donner le classement
                Classement.splitText(code);
            } catch (Exception e) {
                e.printStackTrace();
            }
            return null;
        }
    }

    //Splitte le texte
    public static String [] splitText(String text){

        int [] tabInt = new int [12];
        String [] tabString = new String [12]; 

        tabString[0]        = "" + text.indexOf("Fribourg", 0) + "Fribourg";
        tabString[1]        = "" + text.indexOf("SC Bern", 0)  + "Bern";
        tabString[2]        = "" + text.indexOf("EV Zug", 0)   + "Zug";
        tabString[3]        = "" + text.indexOf("ZSC", 0)      + "ZSC";
        tabString[4]        = "" + text.indexOf("HC Davos", 0) + "Davos";
        tabString[5]        = "" + text.indexOf("Lugano", 0)   + "Lugano";
        tabString[6]        = "" + text.indexOf("Geneve", 0)   + "Geneve";
        tabString[7]        = "" + text.indexOf("Biel", 0)     + "Bienne";
        tabString[8]        = "" + text.indexOf("Kloten", 0)   + "Kloten";
        tabString[9]        = "" + text.indexOf("Ambri", 0)    + "Ambri";
        tabString[10]       = "" + text.indexOf("Lakers", 0)   + "Lakers";
        tabString[11]       = "" + text.indexOf("SCL", 0)      + "SCL";

        //Extraction des entiers
        for (int i = 0; i < tabString.length; i++) {
            tabInt[i] = Integer.parseInt(tabString[i].replaceAll("[a-zA-Z]", ""));
        }

        //Tri du tableau des entiers
        Arrays.sort(tabInt);

        //Sort le Classement exact
        for (int j = 0; j < tabString.length; j++) {
            for (int i = 0; i < tabString.length; i++) {
                if (tabInt[i] == Integer.parseInt(tabString[j].replaceAll("[a-zA-Z]", ""))) {
                    System.out.println(tabString[j].replaceAll("[\\d]", ""));
                }
            }
        }

        //Edite Classement
        System.out.println("4");
        Club1.setText(tabString[0]);
        Club2.setText(tabString[1]);
        Club3.setText(tabString[2]);
        Club4.setText(tabString[3]);
        Club5.setText(tabString[4]);
        Club6.setText(tabString[5]);
        System.out.println("5");
        Club7.setText(tabString[6]);
        Club8.setText(tabString[7]);
        Club9.setText(tabString[8]);
        Club10.setText(tabString[9]);
        Club11.setText(tabString[10]);
        Club12.setText(tabString[11]);

        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:34:04.980

您应该使用事件来使视图线程更新视图:) 再看一下文档。

# ruby-on-rails - 具有看起来像索引页面的视图的集合操作？

> ID：15500268
> 
> 赞同：1
> 
> 时间：2013-03-19T13:01:11.803
> 
> 标签：ruby-on-rails, activeadmin

我有一个 ActiveAdmin 控制器，它已经有一个索引操作。我想要这个控制器中的自定义操作，它呈现一个外观和功能类似于默认 ActiveAdmin 索引视图的视图。

我添加了一个`collection_action`并添加了一个带有`.arb`Arbre 扩展的相应视图。然后我`table_for`在这个视图文件中使用，但它给出的是一个普通表，它没有像索引页面上的可排序列。

有什么办法可以做到这一点吗？

谢谢。

# postgresql - 插入触发器中的字符串匹配 - 如何在条件中使用返回 NULL？

> ID：15500270
> 
> 赞同：0
> 
> 时间：2013-03-19T13:01:17.107
> 
> 标签：postgresql, triggers, plpgsql, string-matching, postgresql-8.4

在使用 UTF8 编码的 PostgreSQL 8.4.13 数据库中，我在此表中保留了一个（非英语）字典：

```
create table good_words (
        word varchar(64) primary key
); 
```

以及以下错误（但经常建议或输入错误）单词的列表：

```
create table bad_words (
        word varchar(64) primary key
); 
```

对于前一个表，我有一个[BEFORE INSERT 触发器](http://www.postgresql.org/docs/8.4/static/plpgsql-trigger.html)，我正在尝试扩展它：

```
create or replace function keep_clean() returns trigger as $body$
        begin
                new.word := upper(new.word);

                perform true
                        from bad_words
                        where word = new.word;

                if found then
                        return null;
                end if;

                -- forbid words with [XYZ] at beginning and Z at the end
                -- forbid words with LLL unless it is KLLL or MLLL

                return new;
        end;
$body$ language plpgsql;

create trigger count_letters
        BEFORE INSERT on good_words
        for each row execute procedure keep_clean(); 
```

**我的问题是：**我正在尝试`NULL`向我的触发器添加 3 条规则（返回）：

1.  禁止使用以 X、Y 或 Z 字母开头的单词
2.  禁止以 Z 字母结尾的单词
3.  连续 3 个相同字母的单词非常罕见，只有在出现时才允许使用`like '%KLLL%' or like '%MLLL%'`

作为 Perl 程序员，我非常了解正则表达式，但我的问题是 Pl/PgSQL 部分 - 如何在该语言中执行正则表达式匹配，我总是必须使用`SELECT INTO`or`PERFORM`吗？或者我可以`:=`在这里使用运算符，甚至可以在`IF`语句中执行字符串匹配？

**更新：**

经过克雷格的解释（谢谢！）我准备[了以下 SQL Fiddle](http://sqlfiddle.com/#!11/0e834)，但它仍然存在2个问题：

```
create table good_words (
        word varchar(64) primary key
);

create or replace function keep_clean() returns trigger as $body$
        begin
                new.word := upper(new.word);

                /* next line does not compile? */
                IF new.word !~ '^[\x0410-\x042F]{2,}$' THEN
                    RAISE EXCEPTION 'Not an uppercased Russian word in UTF8';
                END IF;

                IF new.word ~ '^[ЪЫЬ]' OR new.word ~ 'Ъ$' THEN
                    return NULL;
                END IF;

                /* does not return NULL for 'ошибббка'? */
                IF new.word ~ '(.)\1\1' AND new.word NOT LIKE '%ШЕЕЕ%' AND new.word NOT LIKE '%ЗМЕЕЕ%' THEN
                    return NULL;
                END IF;

                return new;
        end;
$body$ language plpgsql; 
```

它不应该在这里采用 UTF8 编码的第一个两个单词，但它确实：

```
insert into good_words (word)
  values
    ('abcde'),          /* bad word: non-russian */
    ('ошибббка'),       /* bad word: 3 letters in a row */
    ('длинношеее'),
    ('проверка')
;

select * from good_words; 
```

**更新 2：**触发器现在可以工作了，谢谢：[http ://sqlfiddle.com/#!11/98403/1](http://sqlfiddle.com/#!11/98403/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:18:22.597

使用 PostgreSQL 的`~`运算符或`regexp_matches`函数。请参阅文档中的[模式匹配](http://www.postgresql.org/docs/current/static/functions-matching.html)。

简单的 PL/PgSQL 示例：

```
DO
$$
BEGIN
  IF 'XABCK' ~ '^[XY]' THEN
    RAISE EXCEPTION 'Disallowed character';
  END IF;
END;
$$; 
```

如您所见，`IF`可以接受表达式。这些表达式可能具有任意复杂性，并且可能包括子查询、、`CASE`几乎任何在 SQL 中合法的东西。

# iphone - 淡出表格视图中的单元格

> ID：15500273
> 
> 赞同：0
> 
> 时间：2013-03-19T13:01:28.183
> 
> 标签：iphone, uitableview, fade

我有一个表格视图，我已经在其中实现`UITableViewCellEditingStyleDelete`了，在特定单元格上滑动时，会出现删除按钮。
现在我想淡化手指滑动的单元格，这样当删除按钮出现时，后面的单元格应该会淡化。在此先感谢您的帮助。

这是我的代码：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView
           editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    return UITableViewCellEditingStyleDelete;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:34:08.543

**只需将其粘贴到您的代码中：**

```
- (void)tableView:(UITableView*)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (cell.contentView.alpha != 0.5)
    {
        [cell.contentView setAlpha:0.5];
    }
    else
    {
        [cell.contentView setAlpha:1.0];
    }
}
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView.editing == UITableViewCellEditingStyleDelete)
    {

        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        if (cell.contentView.alpha != 0.5)
        {
            [cell.contentView setAlpha:0.5];
        }
        else
        {
            [cell.contentView setAlpha:1.0];
        }
    }
       return YES;
}
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView.editing == UITableViewCellEditingStyleDelete)
    {
        [tableView beginUpdates];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];
        [self.arrayForRows removeObjectAtIndex:indexPath.row];
        [tableView endUpdates];
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        [cell.contentView setAlpha:1.0];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:09:50.280

在您的类中覆盖以下方法

```
 - (void) setEditing:(BOOL)editing animated:(BOOL)animated {

        [super setEditing:editing animated:animated];

       /*
            your code for style of cell being edited
       */

      } 
```

# r - 将滚动功能应用于 xts 对象列表

> ID：15500277
> 
> 赞同：1
> 
> 时间：2013-03-19T13:01:39.293
> 
> 标签：r, list, xts, rolling-computation

这类似于其他几个问题，但我仍然没有设法让它工作。我正在尝试将滚动功能（`runMAD`来自 TTR 包）应用于一系列财务信息（交易价格和交易量），但滚动操作都应该是当日的（即不会跨入第二天，也不会从前一天开始） ）。

数据存储为 xts 对象，具有两列（价格和数量）。我按天拆分此对象以按天创建 xts 对象列表，希望我可以`runMAD`在每天应用该函数，并返回一个包含四列的 xts 对象列表（两个原始价格和交易量列，然后是两个新的 runMAD-price 和 runMAD-volume)。然而，它似乎`lapply`只能返回一个长度等于天数的列表 - 所以像每日平均值这样的函数可以工作，但不确定如何让滚动函数工作，每天抛出多个结果。最后，我想测试每一行价格和交易量，看看它与中位数的偏差是否比其各自的滚动 MAD 大 3 倍。然后将此类实例保存在变量中（使用 xts 索引）。

```
sample data:
2011-01-02 09:11:00     20.20     20000
2011-01-02 10:42:00     20.40     50000
2011-01-02 12:33:00     20.90      5000
2011-01-02 12:33:00     20.90     10000
2011-01-02 13:25:00     20.90     10000
2011-01-02 15:36:00     20.90     50000
2011-01-02 15:39:00     20.90     50000
2011-01-02 16:12:00     20.90     15000
2011-01-02 16:33:00     20.90     50000
2011-01-02 17:04:00     20.90     50000
2011-01-02 17:05:00     20.90     50000
2011-01-02 18:26:00     20.90     10000
2011-01-03 09:21:00     20.20     20000
2011-01-03 11:19:00     20.40     50000
2011-01-03 17:33:00     20.90      5000
2011-01-06 12:33:00     20.90     10000
2011-01-06 13:25:00     20.90     10000
2011-01-06 15:36:00     20.90     50000
2011-01-06 15:39:00     20.90     50000
2011-01-06 16:20:00     20.90     15000
2011-01-06 16:20:00     20.90     50000
2011-01-06 17:24:00     20.90     50000
2011-01-06 17:55:00     20.90     50000
2011-01-06 18:49:00     20.90     10000 
```

[**编辑**：根据 GSee 的评论，这里是一个更大的（和固定的）数据样本：]

```
dput(head(sample.data,200))
structure(c(23.48, 19.08, 22.43, 21.75, 19.78, 19.76, 23.11, 23.31, 19.58, 19.28, 23.68, 23.47, 22.13, 23.17, 24.53, 22.79, 20.28, 19.73, 22.05, 19.23, 22.40, 23.43, 20.40, 23.58, 19.94, 19.58, 21.70, 20.65, 21.69, 24.09, 22.21, 21.42, 19.48, 24.20, 23.37, 24.68, 21.64, 23.24, 23.59, 19.61, 21.89, 23.21, 19.47, 24.77, 19.64, 19.61, 21.07, 24.68, 20.20, 23.37, 24.47, 22.55, 19.64, 22.73, 23.94, 21.31, 19.69, 19.51, 21.27, 20.47, 23.67, 23.42, 20.56, 20.60, 22.23, 22.16, 20.78, 21.47, 24.82, 19.34, 19.08, 24.92, 24.12, 20.46, 21.67, 22.25, 19.16, 22.47, 24.00, 23.32, 21.13, 23.67, 20.35, 20.80, 23.48, 21.22, 21.51, 21.91, 24.06, 22.17, 24.23, 22.43, 24.94, 20.99, 24.93, 22.48, 21.74, 19.18, 21.14, 21.89, 20.23, 24.80, 22.81, 20.96, 24.30, 21.11, 23.69, 23.20, 20.09, 23.09, 21.56, 20.93, 22.97, 24.53, 23.96, 19.33, 24.63, 19.27, 19.57, 21.40, 24.04, 22.37, 24.95, 21.37, 24.01, 20.42, 21.82, 19.06, 23.08, 20.37, 21.28, 19.87, 21.84, 20.95, 20.89, 24.59, 19.18, 24.26, 20.64, 22.12, 20.85, 24.31, 22.55, 24.32, 19.90, 24.58, 24.13, 21.55, 21.06, 20.84, 20.68, 23.47, 19.67, 21.82, 23.31, 19.67, 19.45, 24.56, 20.06, 24.46, 19.89, 21.57, 20.21, 24.20, 20.53, 19.91, 23.67, 22.95, 21.18, 21.57, 20.01, 19.36, 20.65, 19.75, 22.12, 19.79, 21.07, 24.77, 21.46, 20.64, 21.94, 19.81, 23.58, 22.48, 21.03, 19.37, 19.46, 22.68, 24.56, 21.40, 21.94, 23.27, 21.26, 20.34, 23.39, 21.97, 22.25, 22.40, 23.44, 24.38, 5900, 2400, 3100, 1200, 5100, 5700, 3400, 4900, 3900, 6400, 2600, 2200, 2800, 6200, 1100, 2500, 3500, 5900, 6600, 5100, 1800, 4200, 4500, 1200, 6200, 1400, 2800, 2400, 1500, 900, 2900, 3200, 5800, 3500, 4500, 4500, 4500, 6800, 5000, 4900, 5300, 6100, 3400, 1500, 6200, 1500, 5400, 5800, 800, 6300, 5000, 3400, 5500, 5600, 2100, 3700, 4400, 3100, 4600, 2700, 2700, 2700, 2600, 1200, 1700, 2900, 5300, 4900, 2600, 3100, 4000, 6000, 2500, 3000, 6500, 3600, 5900, 2300, 1600, 1300, 4800, 3800, 4000, 1500, 5600, 5500, 1500, 3100, 1300, 3200, 1500, 1400, 1400, 4600, 5300, 5600, 1200, 1500, 6100, 2200, 6700, 1700, 4000, 6200, 2700, 1100, 4500, 5400, 1600, 2600, 5700, 4100, 7000, 2300, 2600, 5100, 4500, 1900, 2400, 2600, 6900, 2100, 3500, 3600, 2900, 900, 2800, 2200, 4900, 1700, 3000, 800, 2500, 6100, 3300, 6500, 2600, 6200, 900, 4000, 6600, 6400, 1000, 4800, 6900, 4000, 2800, 1200, 6200, 2700, 1300, 1200, 2800, 1300, 5900, 4000, 3900, 5300, 2400, 4700, 6900, 2900, 6200, 3300, 6900, 2200, 1800, 5500, 2000, 6400, 3500, 5300, 5000, 6700, 4500, 3200, 1700, 3300, 5000, 5800, 4900, 2100, 1200, 5200, 1000, 900, 2600, 1000, 5500, 3400, 1600, 4700, 1500, 5900, 6900, 3700, 4900, 5700, 900, 2400), class = c("xts", "zoo"), .indexCLASS = c("POSIXlt", 
"POSIXt"), .indexTZ = "", tclass = c("POSIXlt", "POSIXt"), tzone = "", index = structure(c(1325584080, 1325594940, 1325594940, 1325604600, 1325759100, 1325762520, 1325762520, 1325769300, 1325769300, 1325848080, 1325864880, 1326128220, 1326196500, 1326196500, 1326196500, 1326196500, 1326196500, 1326196500, 1326209700, 1326279480, 1326283620, 1326288300, 1326288300, 1326289680, 1326289680, 1326289680, 1326292320, 1326294060, 1326294600, 1326297600, 1326387000, 1326456720, 1326467160, 1326711600, 1326723000, 1326724260, 1326809940, 1326814860, 1326885960, 1326885960, 1326889980, 1326894000, 1326895200, 1326895200, 1326898080, 1326986700, 1326987240, 1326992100, 1327072140, 1327328040, 1327328040, 1327328040, 1327417920, 1327423140, 1327424820, 1327425240, 1327483200, 1327496520, 1327570320, 1327570320, 1327575420, 1327588680, 1327588980, 1327595880, 1327595880, 1327595880, 1327664820, 1327674720, 1327680660, 1327680780, 1327680780, 1327683960, 1327914300, 1327914300, 1327915260, 1327918140, 1327924860, 1327924920, 1327924980, 1327924980, 1327927680, 1328013360, 1328014200, 1328025000, 1328025000, 1328026740, 1328089440, 1328091360, 1328091360, 1328110620, 1328111340, 1328111340, 1328112420, 1328113800, 1328193540, 1328194080, 1328194140, 1328196720, 1328274360, 1328274420, 1328278320, 1328519280, 1328520120, 1328520600, 1328520600, 1328524140, 1328527980, 1328531580, 1328540880, 1328540880, 1328547600, 1328547660, 1328547720, 1328547780, 1328607060, 1328608080, 1328618760, 1328623380, 1328623380, 1328625720, 1328631480, 1328717760, 1328717880, 1328793000, 1328797980, 1329132840, 1329210480, 1329215400, 1329215820, 1329215820, 1329219480, 1329223140, 1329300900, 1329301620, 1329315240, 1329315240, 1329388740, 1329389700, 1329390000, 1329390000, 1329390180, 1329391860, 1329391860, 1329391860, 1329402120, 1329467700, 1329467700, 1329469080, 1329469080, 1329471300, 1329477000, 1329477000, 1329489840, 1329732660, 1329732660, 1329733080, 1329745980, 1329745980, 1329750120, 1329750120, 1329750780, 1329753780, 1329753780, 1329753900, 1329754080, 1329754260, 1329755520, 1329755520, 1329755820, 1329755880, 1329755880, 1329756000, 1329815040, 1329815040, 1329826380, 1329840000, 1329841200, 1329841200, 1329842220, 1329901080, 1329901200, 1329901200, 1329901680, 1329901680, 1329902040, 1329902100, 1329902100, 1329902100, 1329902340, 1329902340, 1329902340, 1329902520, 1329902880, 1329902880, 1329906720, 1329906840, 1329908460, 1329910980, 1329911880, 1329914400), tzone = "", tclass = c("POSIXlt", "POSIXt")), .Dim = c(200L, 2L), .Dimnames = list(NULL, c("sample.dataprice", "sample.datavol"))) 
```

在同一时间段内经常有多笔交易，在这种情况下，`runMAD`如果还没有，我希望单独查看每笔交易。此外，我意识到 的窗口`runMAD`可能大于特定日期的交易数量，在这种情况下，我想忽略当天的（NA） - 或者如果可能的话，将`runMAD`窗口大小动态减小为交易数量在那一天。

我的数据的str：

> str（样本。数据）

```
An ‘xts’ object on 2012-01-03 09:11:00/2012-03-30 18:49:00 containing:
  Data: num [1:459, 1:2] 22.6 22.5 22.5 22.5 22.8 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:2] "sample.dataprice" "sample.datavol"
  Indexed by objects of class: [POSIXlt,POSIXt] TZ: 
  xts Attributes:  
 NULL 
```

我`split`这几天然后`runMAD`：

```
sample.data.days <- split.xts(sample.data, f="days")
require(TTR)
runMAD(sample.data.days, n=6, stat="median", cumulative=FALSE, constant=1)
*Error in runMedian(x, n, cumulative = cumulative) : (list) object cannot be coerced to type 'double'* 
```

为了避免应用于`runMAD`观察次数少于窗口长度的日子，我只保留观察次数充足的日子：

```
sample.data.days6<- sample.data.days[vapply(sample.data.days, FUN=nrow, FUN.VALUE=0L)>6] 
```

我也试过这个：

```
do.call(runMAD, lapply(as.numeric(index(sample.data.days6)), function(x) runMAD(sample.data.days6, constant=1))) 
```

但它会引发与上述相同的错误（runMedian(x, n,累积=累积)中的错误：（列表）对象不能被强制输入'double'）。

我没有将数据放入列表中以分解为天，而是尝试了以下方法：

```
apply.daily(sample.data, function(d){
  c(runMAD_price = runMAD(d$sample.data[, 1], n=6),
    runMAD_volume = runMAD(d$sample.data[, 2], n=6),
  )
})
*Error in array(x, c(length(x), 1L), if (!is.null(names(x))) list(names(x),  : 'data' must be of a vector type 
```

这个问题的一个细微变化是看看如何对移动时间窗口（例如 1 小时）而不是移动交易窗口进行同样的处理。

无论窗口是基于时间还是基于观察，我都想最终创建一个 xts 对象，其中包含所有观察值（价格或交易量）与某个窗口中位数的偏差除以 MAD（在中间-窗口），高于某个阈值（例如 3）。由于当一半的观察值相同时，MAD 将为 0，我想用任何先前的 MAD>0 替换任何 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:52:33.933

您需要遍历`sample.data.days`列表并应用于`runMAD`每个元素。然后你可以将它与你的原始对象合并回来。例如：

```
library(TTR)
data(sample_matrix)
x <- as.xts(sample_matrix)
close.months <- split(x$Close,"months")
mad <- do.call(rbind, lapply(close.months, runMAD, n=6, constant=1))
y <- merge(x,Close.MAD=mad) 
```

# objective-c - iOS的自定义滑动方法？

> ID：15500278
> 
> 赞同：3
> 
> 时间：2013-03-19T13:01:39.293
> 
> 标签：objective-c, core-data, uiswipegesturerecognizer, swipeview

如何使用 SWIPE METHOD for iOS 在另一个视图控制器中显示我的 tableview 或我的核心数据中的所有内容？

好吧，这次我需要知道如何从我的核心数据实体中显示所有内容或所有对象类。为了更好地理解它在图片中的样子，我正在寻找： ![在此处输入图像描述](../Images/5c608ef6e9c30e213e686a7af025b6c8.png)

因此，在我的项目中，它可以正常运行并完美运行我的添加对象方法并在表格视图中显示。我也有一种方法可以从我的 tableview 中删除一个项目并且工作正常。从另一个问题中，我学习并运行了示例核心数据的所有方法。但是我需要在另一个视图控制器中以 SWIPE 方法一对一地显示我的类实体中的所有内容或所有对象。我确实找到了一些带有滚动视图和分页控制或滑动方法识别的示例和教程，但这些非常简单并且没有使用核心数据模型。

它可能会像这个例子一样创建一个滑动方法？：

![在此处输入图像描述](../Images/0064e134a0c6c2eb5ff864cb2d649210.png)

但有动态视图？按钮、标签的空白和功能？

我确实从以下教程中学到了：

1.  [http://www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)
2.  [https://github.com/nicklockwood/SwipeView](https://github.com/nicklockwood/SwipeView)
3.  [http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html)

但是这些教程和示例适用于静态视图或图像。我如何使用这些方法来显示我的实体核心数据模型中的所有对象，我使用的是 xcode 4.6 和 iOS 6，所以我需要你的帮助！！！再次感谢！！！！XD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T16:25:46.833

所以基本上你想要一个水平的 UITableView （其中虚拟化单元格是开发人员的描述页面）。你只针对iOS6吗？然后 UICollectionView 对任务有好处：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html)

WWDC 2012 关于它的内容：

[https://developer.apple.com/videos/wwdc/2012/?id=219](https://developer.apple.com/videos/wwdc/2012/?id=219)

它的父级是 UIScrollView 所以分页也可用。

# web - 如何使用 Scrapy 抓取整个网站？

> ID：15500281
> 
> 赞同：11
> 
> 时间：2013-03-19T13:02:04.453
> 
> 标签：web, web-scraping, scrapy

我无法爬取整个网站，Scrapy 只是在表面上爬，我想爬得更深。过去 5-6 小时一直在谷歌搜索，但没有任何帮助。我的代码如下：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.item import Item
from scrapy.spider import BaseSpider
from scrapy import log

class ExampleSpider(CrawlSpider):
    name = "example.com"
    allowed_domains = ["example.com"]
    start_urls = ["http://www.example.com/"]
    rules = [Rule(SgmlLinkExtractor(allow=()), 
                  follow=True),
             Rule(SgmlLinkExtractor(allow=()), callback='parse_item')
    ]
    def parse_item(self,response):
        self.log('A response from %s just arrived!' % response.url) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T00:36:16.620

规则短路，这意味着链接满足的第一个规则将是应用的规则，您的第二个规则（带有回调）将不会被调用。

将您的规则更改为：

```
rules = [Rule(SgmlLinkExtractor(), callback='parse_item', follow=True)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-06T09:06:51.363

解析时`start_urls`，标签可以解析更深的 url `href`。然后，可以在函数中产生更深层次的请求`parse()`。[这是一个简单的例子](https://blog.siliconstraits.vn/building-web-crawler-scrapy/)。最重要的源代码如下所示：

```
from scrapy.spiders import Spider
from tutsplus.items import TutsplusItem
from scrapy.http    import Request
import re

class MySpider(Spider):
    name            = "tutsplus"
    allowed_domains = ["code.tutsplus.com"]
    start_urls      = ["http://code.tutsplus.com/"]

    def parse(self, response):
        links = response.xpath('//a/@href').extract()

        # We stored already crawled links in this list
        crawledLinks = []

        # Pattern to check proper link
        # I only want to get tutorial posts
        linkPattern = re.compile("^\/tutorials\?page=\d+")

        for link in links:
        # If it is a proper link and is not checked yet, yield it to the Spider
            if linkPattern.match(link) and not link in crawledLinks:
                link = "http://code.tutsplus.com" + link
                crawledLinks.append(link)
                yield Request(link, self.parse)

        titles = response.xpath('//a[contains(@class, "posts__post-title")]/h1/text()').extract()
        for title in titles:
            item = TutsplusItem()
            item["title"] = title
            yield item 
```

# c# - 如何以编程方式分析数据流任务？

> ID：15500284
> 
> 赞同：2
> 
> 时间：2013-03-19T13:02:11.900
> 
> 标签：c#, ssis

我正在使用工具（C#.Net）来分析 SSIS 包。在这里，我使用`Microsoft.SqlServer.Dts.Pipeline.Wrapper.IDTSComponentMetaData100`（dts.interop 中的类）类来迭代数据流任务（MainPipe）。请在下面找到代码。

```
//Cast the Executable as a data flow
MainPipe pipe = (MainPipe)taskHost.InnerObject;
foreach (IDTSComponentMetaData100 comp in pipe.ComponentMetaDataCollection)
{
//Here i need
//1\. Source details
//2\. Destination details

} 
```

是否可以将每个`IDTSComponentMetaData100`对象类型转换为 XMLSource、OLEDB Destination 等数据流组​​件的某些对象？如果可能，我将如何识别来源、目的地等？

如果不可能，请提供一些提示来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T22:15:25.280

简短的回答是，没有特别有用的方法可以将 an`IDTSComponentMetaData100`转换为“数据流组件的对象”，这在很大程度上是因为**没有**“数据流组件的对象”。在幕后，SSIS 是一个**COM**驱动的应用程序，特别是对于库存组件，而不是一个原生的 .NET 应用程序。这就是为什么以编程方式创建 SSIS 数据流如此痛苦的部分原因。（有关更详细的讨论，请参阅在 MSDN 中以[编程方式添加数据流组件 。）](http://msdn.microsoft.com/en-us/library/ms135932.aspx)

也就是说，该`IDTSComponentMetaData100`接口确实公开了一个`ObjectType`属性，即[DTSObjectType](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.pipeline.wrapper.dtsobjecttype.aspx)枚举。数据流中的源将具有`ObjectType`of `OT_SOURCEADAPTER`、destination`OT_DESTINATIONADAPTER`和转换`OT_TRANSFORM`。

或者，您可以研究将包保存为 .dtsx 文件并解析生成的 XML 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T23:22:37.533

基于上面 Edmunds 的回答，您可以测试 OT_SOURCEADAPTER 和 OT_DESTINATION 对象类型，然后通过 RuntimeConnectionCollection 遍历自定义属性和任何链接的连接。这将允许您检索任何自定义属性值或关联的连接以及任何连接属性，例如连接名称。
下面的伪代码用于显示自定义属性并获取源连接名称，假设您已经打开了包并引用了 MainPipe。

```
Mainpipe df; 
Package pkg;

foreach (IDTSComponentMetaData100 comp in df.ComponentMetaDataCollection)
{
  if ((comp.ObjectType & DTSObjectType.OT_SOURCEADAPTER ) == DTSObjectType.OT_SOURCEADAPTER )
  {

    foreach (IDTSCustomProperty100 cp in comp.CustomPropertyCollection)
    {
       Debug.WriteLine(string.Format("{0} - {1}",cp.Name,cp.Value));
    }

    if (comp.RuntimeConnectionCollection.Count > 0)
    {
      IDTSRuntimeConnection100 rtconn = comp.RuntimeConnectionCollection[0];
      if (pkg.Connections.Contains(rtconn.ConnectionManagerID))
      {
        var conn = Package.Connections[rtconn.ConnectionManagerID];
        // Get the connection name
        varconnName = conn.Name;
      }
   }
 } 
```

检索从[MSDN获取的 MainPipes 连接的示例](https://msdn.microsoft.com/en-gb/library/microsoft.sqlserver.dts.pipeline.wrapper.idtsruntimeconnection100.connectionmanager.aspx)

# ios - 使用 NSpredicate 过滤 NSArray 的 Big-O 运行时

> ID：15500289
> 
> 赞同：5
> 
> 时间：2013-03-19T13:02:23.137
> 
> 标签：ios, objective-c, cocoa, big-o, nspredicate

使用 NSPredicate 过滤数组的近似 big-O 运行时是多少？我似乎找不到有关谓词运行时的任何信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:13:19.860

使用 NSPredicate 过滤 NSArray 的 Big-O**将是 O(n)。**

# android - 使用硬件加速的 Android MediaCodec 解码器的本机代码中的访问冲突

> ID：15500290
> 
> 赞同：5
> 
> 时间：2013-03-19T13:02:26.680
> 
> 标签：android, access-violation, native-code

我的目标是使用 Android MediaCodec 解码视频流，然后使用输出图像在本机代码中进行进一步的图像处理。

平台：华硕tf700t android 4.1.1。测试码流：H.264 全高清 @ 24 frm/s

内置 Tegra-3 SoC，我指望硬件支持视频解码。从功能上讲，我的应用程序的行为符合预期：我确实可以访问解码器图像并正确处理它们。但是，我遇到了非常高的解码器 CPU 负载。

在以下实验中，进程/线程负载由 adb shell 中的“top -m 32 -t”测量。为了从“顶部”获得可靠的输出，所有 4 个 cpu 内核都通过运行几个以最低优先级永远循环的线程来强制激活。这可以通过重复执行“cat /sys/devices/system/cpu/cpu[0-3]/online”来确认。为简单起见，只有视频解码，没有音频；并且没有时序控制，因此解码器尽可能快地运行。

第一个实验：运行应用程序，调用 JNI 处理函数，但所有进一步的处理调用都被注释掉了。结果：

*   吞吐量：25 frm/s
*   应用程序的 VideoDecoder 线程负载 1%
*   进程/system/bin/mediaserver的线程Binder_3负载24%

解码速度似乎受 CPU 限制（四核 CPU 的 25%）...启用输出处理时，解码图像正确且应用程序正常工作。唯一的问题：解码的 CPU 负载太高。

经过大量的实验，我考虑给 MediaCodec 一个表面来绘制它的结果。在所有其他方面，代码是相同的。结果：

*   吞吐量 55 frm/s（很好！！）
*   应用程序的 VideoDecoder 线程负载 2%
*   进程 /system/bin/mediaserver 的线程 mediaserver 负载 1%

事实上，视频显示在提供的 Surface 上。由于几乎没有任何 cpu 负载，这必须是硬件加速的......

似乎 de MediaCodec 仅在提供 Surface 时才使用硬件加速？

到现在为止还挺好。我已经倾向于使用 Surface 作为解决方法（不是必需的，但在某些情况下甚至是不错的选择）。但是，如果提供了表面，我将无法访问输出图像！结果是本机代码中的访问冲突。

这真的让我很困惑！[我没有在文档http://developer.android.com/reference/android/media/MediaCodec.html](http://developer.android.com/reference/android/media/MediaCodec.html)中看到任何访问限制的概念。[在 google I/O 演示http://www.youtube.com/watch?v=RQws6vsoav8](http://www.youtube.com/watch?v=RQws6vsoav8)中也没有提到这个方向。

**那么：如何使用硬件加速的 Android MediaCodec 解码器并访问原生代码中的图像？如何避免访问冲突？任何帮助表示赞赏！还有任何解释或提示。**

我很确定 MediaExtractor 和 MediaCodec 使用正确，因为应用程序功能正常（只要我不提供 Surface）。它仍然是相当实验性的，一个好的 API 设计在待办事项列表中；-)

请注意，两个实验之间的唯一区别是变量 mSurface: null 或 "mDecoder.configure(mediaFormat, mSurface, null, 0);" 中的实际 Surface

初始化代码：

```
mExtractor = new MediaExtractor();
mExtractor.setDataSource(mPath);

// Locate first video stream
for (int i = 0; i < mExtractor.getTrackCount(); i++) {
    mediaFormat = mExtractor.getTrackFormat(i);
    String mime = mediaFormat.getString(MediaFormat.KEY_MIME);
    Log.i(TAG, String.format("Stream %d/%d %s", i, mExtractor.getTrackCount(), mime));
    if (streamId == -1 && mime.startsWith("video/")) {
        streamId = i;
    }
}

if (streamId == -1) {
    Log.e(TAG, "Can't find video info in " + mPath);
    return;
}

mExtractor.selectTrack(streamId);
mediaFormat = mExtractor.getTrackFormat(streamId);

mDecoder = MediaCodec.createDecoderByType(mediaFormat.getString(MediaFormat.KEY_MIME));
mDecoder.configure(mediaFormat, mSurface, null, 0);

width = mediaFormat.getInteger(MediaFormat.KEY_WIDTH);
height = mediaFormat.getInteger(MediaFormat.KEY_HEIGHT);
Log.i(TAG, String.format("Image size: %dx%d format: %s", width, height, mediaFormat.toString()));
JniGlue.decoutStart(width, height); 
```

解码器循环（在单独的线程中运行）：

```
ByteBuffer[] inputBuffers = mDecoder.getInputBuffers();
ByteBuffer[] outputBuffers = mDecoder.getOutputBuffers();

while (!isEOS && !Thread.interrupted()) {
    int inIndex = mDecoder.dequeueInputBuffer(10000);
    if (inIndex >= 0) {
        // Valid buffer returned
        int sampleSize = mExtractor.readSampleData(inputBuffers[inIndex], 0);
        if (sampleSize < 0) {
            Log.i(TAG, "InputBuffer BUFFER_FLAG_END_OF_STREAM");
            mDecoder.queueInputBuffer(inIndex, 0, 0, 0, MediaCodec.BUFFER_FLAG_END_OF_STREAM);
            isEOS = true;
        } else {
            mDecoder.queueInputBuffer(inIndex, 0, sampleSize, mExtractor.getSampleTime(), 0);
            mExtractor.advance();
        }
    }

    int outIndex = mDecoder.dequeueOutputBuffer(info, 10000);
    if (outIndex >= 0) {
        // Valid buffer returned
        ByteBuffer buffer = outputBuffers[outIndex];
        JniGlue.decoutFrame(buffer, info.offset, info.size);
        mDecoder.releaseOutputBuffer(outIndex, true);
    } else {
        // Some INFO_* value returned
        switch (outIndex) {
        case MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED:
            Log.i(TAG, "RunDecoder: INFO_OUTPUT_BUFFERS_CHANGED");
            outputBuffers = mDecoder.getOutputBuffers();
            break;
        case MediaCodec.INFO_OUTPUT_FORMAT_CHANGED:
            Log.i(TAG, "RunDecoder: New format " + mDecoder.getOutputFormat());
            break;
        case MediaCodec.INFO_TRY_AGAIN_LATER:
            // Timeout - simply ignore
            break;
        default:
            // Some other value, simply ignore
            break;
        }
    }

    if ((info.flags & MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
        Log.d(TAG, "RunDecoder: OutputBuffer BUFFER_FLAG_END_OF_STREAM");
        isEOS = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T00:12:33.863

如果您配置输出 Surface，则解码后的数据将写入可用作 OpenGL ES 纹理的图形缓冲区（通过“外部纹理”扩展）。各种硬件以他们喜欢的格式传递数据，CPU 不必复制数据。

如果您不配置 Surface，则输出将进入`java.nio.ByteBuffer`. 至少有一个缓冲区副本可以将数据从 MediaCodec 分配的缓冲区`ByteByffer`获取到您的 . 我希望您看到的是间接成本而不是软件解码成本。

您*可以*通过将输出发送到 a `SurfaceTexture`，渲染到 FBO 或 pbuffer，然后使用`glReadPixels`来提取数据来改善问题。如果您从本机代码中读取“直接”`ByteBuffer`或调用`glReadPixels`，则可以减少 JNI 开销。这种方法的缺点是您的数据将采用 RGB 而不是 YCbCr。（OTOH，如果您想要的转换可以在 GLES 2.0 片段着色器中表达，您可以让 GPU 代替 CPU 来完成这项工作。）

如另一个答案中所述，不同设备上的解码器`ByteBuffer`以不同格式输出数据，因此如果可移植性对您很重要，则在软件中解释数据可能不可行。

**编辑：** [Grafika](http://github.com/google/grafika)现在有一个使用 GPU 进行图像处理的示例。[您可以在此处](http://www.youtube.com/watch?v=kH9kCP2T5Gg)观看演示视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T20:50:03.207

我在nexus 4上使用mediacodec api并获得QOMX_COLOR_FormatYUV420PackedSemiPlanar64x32Tile2m8ka的输出颜色格式。我认为这种格式是一种硬件格式，只能通过硬件渲染来渲染。有趣的是，我发现当我使用 null 和实际 Surface 为 MediaCodec 配置表面时，输出缓冲区长度将分别更改为实际值和 0。我不知道为什么。我认为您可以在不同的设备上进行一些实验以获得更多结果。关于硬件加速，您可以查看 [http://www.saschahlusiak.de/2012/10/hardware-acceleration-on-sgs2-with-android-4-0/](http://www.saschahlusiak.de/2012/10/hardware-acceleration-on-sgs2-with-android-4-0/)

# c# - IndexOf C# 出错

> ID：15500291
> 
> 赞同：4
> 
> 时间：2013-03-19T13:02:28.587
> 
> 标签：c#, .net

我显然在这里遗漏了一些东西..

我正在编写一个函数，它返回由特定字符串分隔的子字符串的数量。这是相当简单的功能 -

```
public static FuncError DCount(String v1, String v2, ref Int32 result) {
        result = 0;
        if (String.IsNullOrEmpty(v1)) {
            return null;
        }
        if (String.IsNullOrEmpty(v2)) {
            return null;
        }

        int ct = 1;
        int ix = 0;
        int nix = 0;

        do {
            nix = v1.IndexOf(v2, ix);
            if (nix >= 0) {
                ct++;

                System.Diagnostics.Debug.Print(
string.Format("{0} found at {1} count={2} result = {3}",
v2, nix, ct, v1.Substring(nix,1)));
                ix = nix + v2.Length;
            }
        } while (nix >= 0);
        result = ct;
        return null;
    } 
```

当我使用在特定情况下用作分隔符的特殊字符进行调用时，问题就出现了。它返回了很多误报。从 Debug.Print 开始，第一个和最后一个参数应该始终相同。

```
þ found at 105 count=2 result = t
þ found at 136 count=3 result = t
þ found at 152 count=4 result = þ
þ found at 249 count=5 result = t
þ found at 265 count=6 result = t
þ found at 287 count=7 result = t
þ found at 317 count=8 result = t
þ found at 333 count=9 result = þ
þ found at 443 count=10 result = þ
þ found at 553 count=11 result = þ
þ found at 663 count=12 result = þ
þ found at 773 count=13 result = þ
þ found at 883 count=14 result = þ
þ found at 993 count=15 result = þ 
```

如果我将 þ 作为字符传递，它可以正常工作。如果我使用 þ 作为分隔符拆分字符串，它将返回正确数量的元素。至于错误识别的't'，结果中还有其他't'没有被拾取，所以不是字符转换问题。

使困惑 ...

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T13:13:20.057

这里的问题是不同的文化如何代表人物，在某些情况下如何将它们结合起来。

您正在搜索的字母[Thorn](http://en.wikipedia.org/wiki/Thorn_%28letter%29)显然可以用这些`th`字母表示。

[在LINQPad](http://linqpad.net)中尝试此代码：

```
void Main()
{
    string x = "uma thurman";
    x.IndexOf("þ").Dump();
} 
```

它将输出`4`.

*（注意我在挪威的一台机器上运行这个程序，它可能对结果有影响，也可能没有影响）*

*在某些文化中*，这与双 S - ß 的德语字母相同的“问题”可以在两个 s 一起出现的单词中找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T13:35:28.520

您可以使用[`StringComparison.Ordinal`](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)获取与文化无关的字符串匹配。

使用 Lasse V. Karlsen 的[例子](https://stackoverflow.com/a/15500523/580951)：

```
string x = "uma thurman";
x.IndexOf("þ", StringComparison.Ordinal).Dump(); 
```

将导致`-1`.

有关详细信息，请参阅[在 .NET Framework 中使用字符串的最佳实践](http://msdn.microsoft.com/en-us/library/dd465121.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:40:29.670

您正在使用[以下重载`IndexOf`](http://msdn.microsoft.com/en-us/library/7cct0x33.aspx)：

> 使用当前区域性执行单词（区分大小写和区域性）搜索

因此结果取决于`CurrentCulture`你的线程。大多数文化认为[字母 thorn](http://en.wikipedia.org/wiki/Thorn_%28letter%29)等同于`th`. 请参阅 Lasse 的回答。

例如，被称为Þórr 的古老北欧神通常用英语写作Thor，首字母在“Thursday”（Thor's day）中发音为“Th”。

要解决您的问题，请更改`v1.IndexOf(v2, ix)`为：

```
v1.IndexOf(v2, ix, StringComparison.Ordinal) 
```

请参阅[有关该重载的文档](http://msdn.microsoft.com/en-us/library/ms224424.aspx)。

序数比较`char`以一种幼稚的方式逐一比较值，只是比较它们的数值。相比之下，文化相关的比较做了很多标准化，无论是关于重音字母的不同表示，还是关于文化认为等效的不同字母。这在排序规则中也非常重要，例如对于序数比较，字符串***在排序中位于字符串之后***`"naïve"`（因为该值的数值高于）。*`"nasty"``System.Char``'ï'``'s'`*

# linux - 如何查找文件中的选项卡数？

> ID：15500297
> 
> 赞同：1
> 
> 时间：2013-03-19T13:02:50.493
> 
> 标签：linux, bash, shell

我想编写一个 shell 脚本来计算给定文件中使用的选项卡的数量，然后将结果写入文件`output.txt`。这该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:33:06.570

试试这个：

```
tr -cd '\t' < your_file_with_tabs | wc -c 
```

第一部分 ( `tr -cd '\t'`) 删除除了选项卡之外的所有内容，管道的第二部分计算字符（都是选项卡）。

感谢 @imp25 提供有关`wc -c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:50:49.123

```
grep --only-matching input.txt | wc -l > output.txt 
```

例子：

```
$ grep --only-matching $'\t' <<< $'\t\t\t\t' | wc -l
4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:07:14.500

试试这个 ：

```
perl -lne '$c += s/\t/\t/g;END{print $c}' file 
```

或者

```
perl -lne '$c += split /\t+/; $c--;END{print $c}' file 
```

或者

```
 perl -lne '$c += tr/\t//;END{print $c}' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:58:09.380

尝试：

```
awk '{t+=gsub(/\t/,x)} END{print t}' file 
```

# chef-infra - 厨师用运行列表配置节点，可以在引导时以外的事件中运行？

> ID：15500298
> 
> 赞同：1
> 
> 时间：2013-03-19T13:02:53.667
> 
> 标签：chef-infra, chef-recipe

我需要使用厨师框架将运行列表分配给节点。但我只看到在节点引导期间运行食谱中的食谱的能力。有没有办法指定“何时”在客户端运行配方而不是在引导程序中运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:07:53.693

当然，通常`chef-client`作为服务运行或通过`cron`. 见特别。食谱的`init_style`属性： [https ://github.com/opscode-cookbooks/chef-client#attributes](https://github.com/opscode-cookbooks/chef-client#attributes)`chef-client`

# jquery - 第 n 个孩子以上的所有内容

> ID：15500299
> 
> 赞同：1
> 
> 时间：2013-03-19T13:02:56.487
> 
> 标签：jquery, html

我正在尝试选择某个孩子之上的所有内容，我尝试过使用 gt: 和 slice 但无法让它工作。它必须是一个选择器，它在特定孩子之后获取所有内容，而不是专门删除第一个孩子。目前它只取出第二列，我需要包括第二列和之后的所有内容。

有问题的行是：

```
var myColumn = $('.partnerGroupContent > :nth-child(2)') 
```

这是小提琴：

[http://jsfiddle.net/kL3c8/20/](http://jsfiddle.net/kL3c8/20/)

```
<div class="partnerGroupContent group">

   <div class="column"> 
        <div class="sponsor">1</div>
        <div class="sponsor">2</div>
   </div>
    <div class="column"> 
        <div class="sponsor">3</div>
        <div class="sponsor">4</div>
   </div>
    <div class="column"> 
        <div class="sponsor">5</div>
        <div class="sponsor">6</div>
   </div>
    <div class="column"> 
        <div class="sponsor">7</div>
        <div class="sponsor">8</div>
   </div>

</div>

var rowCount = 2

var myColumn = $('.partnerGroupContent > :nth-child(2)')

if (rowCount == 2) {

        $('.partnerGroupContent').after(
        $('<div>', {
        'class': 'partnerGroupContent2'
         }).append(myColumn))

$('.partnerGroupContent').cycle();
$('.partnerGroupContent2').cycle();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:06:13.017

采用`:gt()`

```
$("div :gt(4)").css("background-color", "yellow"); 
```

[http://api.jquery.com/gt-selector/](http://api.jquery.com/gt-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:07:43.573

您可以`:gt()`在 jQuery 中使用。

*   `:gt(n)`对于大于 n
*   `:lt(n)`小于 n
*   `:eq(n)`等于 n

    ```
    $("div :gt(4)").css("background-color", "colour name"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:10:36.423

我尝试过的其中一件事确实有效：

```
var myColumn = $('.partnerGroupContent > :nth-child(n + 2)') 
```

然而，这些 div 被隐藏在彼此之上，这使它看起来好像不起作用。谢谢你的帮助。

# spring - 可以从 JAR 中找到导入的 Spring bean，但不能从 WAR 中找到

> ID：15500302
> 
> 赞同：1
> 
> 时间：2013-03-19T13:03:07.320
> 
> 标签：spring, rest, maven, jar, war

我的应用程序包含三个 Maven 项目（我省略了其他模块）：FrameworkBase (JAR)、FrameworkBaseImpl (JAR)、FrameworkRestService (WAR)。

FrameworkRestService 是 FrameworkBaseImpl 的插件，从 FrameworkBase 中提取其类/接口定义，FrameworkBaseImpl 实现/扩展。（我不得不拆分 FrameworkBase 以避免 Maven 曲线依赖）。

FrameworkBaseImpl 有一个 main，它调用 Jetty，传递 FrameworkRestService 战争。

我试图让 Spring 在 FrameworkBaseImpl 的 FrameworkMain 类的（唯一）实例中注入一个 RestService 实例作为字段成员。我的 Spring 指向 FrameworkRestService 项目中的 FrameworkRestService 类作为实现 restService bean。

这就是问题所在：尽管 Spring 似乎在 WAR 中找到了包含该 bean 的导入 framework_rest_service.context 文件，但它无法注入它（没有找到名为 restService 的 bean）。但是，如果我将 FrameworkRestService 转换为 JAR - 它会神奇地成功！我被困了2天！请帮忙！

框架基础 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <artifactId>framework.base</artifactId>
  <packaging>jar</packaging>
  <name>framework.base</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <parent>
    <groupId>controlapps</groupId>
    <artifactId>controlapp</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>../controlapp/pom.xml</relativePath>
  </parent>
</project> 
```

FrameworkBase RestService：

```
package com.company.controlapps.framework.base;

public class RestService {
    public FrameworkMain frameworkMain;

    /* Setters for Spring */
    public void setFrameworkMain(FrameworkMain frameworkMain) 
            {this.frameworkMain = frameworkMain;}
} 
```

FrameworkBase框架主要：

```
package com.company.controlapps.framework.base;

public interface FrameworkMain {    
...
} 
```

FrameworkBaseImpl pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <artifactId>framework.base.impl</artifactId>
  <packaging>jar</packaging>
  <name>framework.base.impl</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <parent>
    <groupId>controlapps</groupId>
     <artifactId>controlapp</artifactId>
     <version>0.0.1-SNAPSHOT</version>
     <relativePath>../controlapp/pom.xml</relativePath>
  </parent>

  <dependencies>
      <dependency>
    <groupId>controlapps</groupId>
    <artifactId>framework.base</artifactId>
     <version>0.0.1-SNAPSHOT</version>
  </dependency>
  <dependency>
     <groupId>controlapps</groupId>
     <artifactId>framework.restservice</artifactId>
     <version>0.0.1-SNAPSHOT</version>
     <scope>runtime</scope>
     <type>war</type>       
   </dependency>
  </dependencies>
</project> 
```

FrameworkBaseImpl FrameworkMainImpl：

```
package com.company.controlapps.framework.base.impl;

public class FrameworkMainImpl implements FrameworkMain {
    ....
    protected RestService restService;
    public void setRestService(RestService restService) 
        {this.restService = restService;}
}

public static void main(String[] args) {        
    context = new ClassPathXmlApplicationContext(SPRING_CONTEXT_FILENAME);
    FrameworkMainImpl frameworkMain = (FrameworkMainImpl) context.getBean("frameworkMain");
        ...
} 
```

FrameworkBaseImpl spring context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <import resource="classpath*:framework_restservice_context.xml"/>

    <bean id="frameworkMain" class="com.company.controlapps.framework.base.impl.FrameworkMainImpl" >
    <property name="restService" ref="restService" />
    </bean> 
</beans> 
```

FrameworkRestService FrameworkRestService pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <artifactId>framework.restservice</artifactId>
  <packaging>war</packaging>
  <name>framework.restservice</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <jersey.version>1.12</jersey.version>
  </properties>

  <parent>
    <groupId>controlapps</groupId>
    <artifactId>controlapp</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>../controlapp/pom.xml</relativePath>
  </parent>

  <dependencies>
      <dependency>
      <groupId>controlapps</groupId>
      <artifactId>framework.base</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      </dependency>
      <dependency>
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-server</artifactId>
      <version>${jersey.version}</version>
      </dependency>
      <dependency>
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-json</artifactId>
      <version>${jersey.version}</version>
      </dependency>
      <dependency>
       <groupId>com.sun.jersey</groupId>
       <artifactId>jersey-server-linking</artifactId>
       <version>${jersey.version}</version>
      </dependency>
      <dependency>
    <groupId>com.sun.jersey.contribs</groupId>
    <artifactId>jersey-spring</artifactId>
    <version>${jersey.version}</version>
</dependency>
<dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.5.4</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
  </dependencies>
</project> 
```

FrameworkRestService spring framework_restservice_context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

   <bean id="restService" class="com.radware.controlapps.framework.restservice.FrameworkRestService">
    <property name="frameworkMain" ref="frameworkMain" />
   </bean>
</beans> 
```

FrameworkRestService FrameworkRestService.java 片段：

```
package com.company.controlapps.framework.restservice;

@Path("myresource")
public class FrameworkRestService extends RestService {
    ... 
    @Context
    UriInfo uriInfo;
    @Context
    Request request;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public MyResource getMyResource() {
    ...
    frameworkMain.doSomething();
    ....
} 
```

对不起，很长的问题。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:12:36.710

这不是类加载器问题。我让 WAR 和 JAR 使用相同的类加载器（JAR）。有人评论说我不应该尝试链接 WAR 并在其中查找 bean。

因此，我没有尝试解决问题，而是通过取消 JAR 和 WAR 之间的 Spring 依赖关系来绕过它。在 WAR 中，我仍然需要对 JAR 中实例化的 FrameworkMain 单例的引用。

我“破解”如下：我添加了一个名为 Holder 的类，其中包含公共静态方法获取和设置 FrameworkMain 实例单例。我从 WAR 中调用 get，并从 jar 中设置。我无法将此添加到 FrameworkMain，它实际上是 FrameworkBase jar 中的一个接口（由 FrameworkBaseImpl jar 中的 FrameworkMainImpl 实现）。

谢谢。

# zeromq - ZMQ c#绑定HWM不起作用

> ID：15500303
> 
> 赞同：0
> 
> 时间：2013-03-19T13:03:13.077
> 
> 标签：zeromq

HWM 似乎在 clrzmq 2.2.5 中不起作用。这是我的代码

```
 private static ulong hwm = 50;
    static void testMQ()
    {

        var _Context = new Context(1);

        var pubSock = _Context.Socket(SocketType.PUB); 
        pubSock.HWM = hwm;  
        pubSock.Bind("tcp://*:9999");

        new Thread(testSub).Start(); 
        Thread.Sleep(1000); // client connect

        int i = 0;
        while (true)
        {
            pubSock.Send(i.ToString(), Encoding.ASCII);
            Debug.WriteLine(pubSock.Backlog + "/" + i++);
        }
    }

    static void testSub()
    {
        var _ZmqCtx = new Context(1);

        var subSock = _ZmqCtx.Socket(SocketType.SUB);
        subSock.HWM = 500;
        subSock.Identity = new ASCIIEncoding().GetBytes("bla");
        subSock.Connect("tcp://127.0.0.1:9999");

        Debug.WriteLine("connected");
        subSock.Subscribe("", Encoding.ASCII);
        while (true)
        {
            Debug.WriteLine("r:" + subSock.Recv(Encoding.ASCII));
            Thread.Sleep(10);
        }
    } 
```

输出：

```
'quickies.vshost.exe' (Managed (v4.0.30319)):      
Loaded 'B:\sdev\MSenseWS\GoogleImporter\bin\Debug\clrzmq.dll', Symbols loaded.
connected
r:0
100/0
100/1
100/2 
[...]
100/13
r:1
100/14
[...] 
100/2988
100/2989
100/2990
100/2991
100/2992
100/2993
100/2994
100/2995
100/2996
r:179
100/2997
100/2998 
```

预期行为： pubSock.Send 在 500 条消息排队后阻塞。经历过的行为：pubSock.Sends 不会阻塞并永远发送，直到抛出内存异常 vom 本机代码 (clrzmq.dll)。

另外：为什么积压总是100？

感谢您的见解，阿明

编辑：推送/轮询套接字达到相同的结果

##

解决方案： - 错误在我这边，因为我期望 HWM 是客户端未提交（接收）的未完成消息的数量。事实上，HWM 是缓冲和排队等待通过网络发送的消息数量。

*   就我而言，我有一个客户端无法足够快地处理消息，因此分配了缓冲区空间直到内存不足。

*   为了解决这个问题，我发现在客户端套接字上设置 HWM 和 SWAP 解决了我的问题，因为消息被 zmq 排队到一个大的交换文件中，并被应用程序连续处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:33:46.760

啊，所以我猜你有订阅者线程睡眠，但这并不意味着底层 ZMQ 套接字线程也睡眠。因此，订阅者将继续从发布者队列中取出消息。换句话说，使用`Thread.Sleep()`可能不是模拟有限网络连接或您期望导致运行到 HWM 的其他问题的好方法。

# javascript - 在 JQuery Mobile 中动态下移标题中的元素

> ID：15500307
> 
> 赞同：1
> 
> 时间：2013-03-19T13:03:33.333
> 
> 标签：javascript, jquery, html, jquery-mobile

在 JQuery Mobile 中，我正在创建一个标题，其左侧对齐后退按钮和中心对齐标题。理想情况下，这两个元素应该在同一行对齐，但是当由于空间原因不能在同一行中容纳两个元素（尤其是在描绘模式下）时，标题应该向下移动到后退按钮下方。应该使用什么 CSS 属性？

这是代码：

```
<div class="back-header" data-role="header" data-position="fixed" position="absolute" data-theme="a">

    <a href="index.html" data-icon="arrow-l" data-iconpos="left" data-transition="slide" data-direction="reverse" class="back-button">Back</a>

    <p class="menu-label" align="center">
            <img src="images/biglogoreduced.png" class="menu-label-image" height="20" width="20">
        Data Monitor
    </p>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:13:52.487

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/TRZjY/](http://jsfiddle.net/Gajotres/TRZjY/)

调整“结果窗口”的大小以查看差异。

```
@media all and (max-width: 300px) {
    h3.ui-title {
        margin: 40px 5% 0.8em !important;
        white-space: normal !important;
    }
} 
```

自定义**max-width: 300px**根据您的需要，具体取决于您的标题。同时更改 **边距：40px 5% 0.8em !important;** . 您应该只更改 40px，因为我使用 h3 标签作为标题容器。

# performance - 对于 ARM，为什么单条 STM 指令一般比多条 STR 指令快？

> ID：15500308
> 
> 赞同：3
> 
> 时间：2013-03-19T13:03:37.533
> 
> 标签：performance, assembly, arm, cpu-architecture

它与某些预取技术有关吗？还是具有 DDR 访问时序特性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T13:31:38.337

IIRC 从 ARMv5TE 开始，写入缓冲区和 L1 缓存的路径为 64 位宽，以适应 LDRD/STRD 指令。这允许 STM 每个周期写入两个寄存器。

您还将节省一些 L1 指令缓存并在双问题内核上仅使用一条管道，这也是一个额外的收获。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T13:54:55.093

更多指令、更多获取周期、更多指令执行需要更长的时间。总线是 64 位宽或可以是 64 位宽，对于单个寄存器 stm 没有增益，但如果使用多个寄存器，则可以减少用于移动数据的总线周期数，并且取决于内存系统，如果64 位宽你没有读-修改-写，这也很慢。如果它必须读取-修改-写入到缓存中，通常是写入，您会丢失缓存空间以及读取成本。即使它在缓存中命中，读取-修改写入也可能会让您付出代价。

您可以访问 arm 站点并下载 amba/axi 规范并查看总线事务如何工作，一旦您通过开销，每个事务都涉及多个时钟周期（多个事务可以同时进行，是的）它是每 64 位数据的一个时钟，因此 128 位比 64 位需要多一个时钟来传输。32 位和 64 位传输相同数量的时钟（如果对齐）。

我不能代表所有架构，但我相信至少有一种架构我看到只有读取实际上每次传输会超过 64 位。写入被分成单独的 64 位传输。我可能记错了。

如果您移动 4 个字的数据，读取或写入，未对齐，我相信这会变成 4 个单独的传输，一个用于每个奇数字，一个用于中间对齐的 64 位。所以对齐很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T13:16:45.287

什么时候是真的？

根据[这个方便的表格](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0091a/BEIEDGJJ.html)，该`STM`指令需要 2 个周期来存储单个寄存器，或者*n**个*周期来存储*n* > 1的寄存器。

 *另一方面，`STR`总是需要 1 个单周期。

你什么时候得到`STM`比 更快`STR`？

*   对于一个寄存器，`STM`速度较慢。
*   对于*n 个*寄存器 ( *n* > 1)，它们是相同的。

另一方面，上面的参考是针对ARM9TDMI架构的，ARM有很多。*

# r - 如何包含负值 STAR 绘图

> ID：15500309
> 
> 赞同：0
> 
> 时间：2013-03-19T13:03:43.597
> 
> 标签：r

我正在使用这个名为“ [star](http://stat.ethz.ch/R-manual/R-devel/library/graphics/html/stars.html) ”的函数来绘制从负值到正值的值。
默认情况下，比例从 0 到 1。是否可以在绘图时包含负值？

我的数据：

```
 X1 X2 X3
AP         1405.706720        225.51701          -262.66689
PP           -286.345142        193.28586          422.23567 
```

# asp.net-web-api - ASP.NET WebApi 模型绑定到包含 DateTime 的复杂类型

> ID：15500312
> 
> 赞同：2
> 
> 时间：2013-03-19T13:03:57.113
> 
> 标签：asp.net-web-api

这个问题是关于 MVC 4 中的 ASP.NET WebApi，而不是 ASP.NET MVC。

考虑以下 WebApi 模型

```
 public class MyComplex 
  {
        public DateTime? Date { get; set; }
  } 
```

由模型绑定作为参数绑定到以下 ApiController 方法

```
public class MyController : ApiController
{
    [HttpPost]
    public HttpResponseMessage PostMyComplex(MyComplex id){ .. }
} 
```

如何声明模型绑定器应该期望 MyComplex.Date 的格式？正如我所看到的，当参数本身是 DateTime 类型时，WebApi 中的 Modelbinders 可以解决问题，但是当日期格式是复杂类型的一部分并且我想限制什么是可接受的时，我还没有看到处理日期格式的好方法api。我已经尝试了 Modelbinders 和 ValueProviders，它们似乎都不合适。

我想明确限制可接受的 HttpPosts 格式为 dd-MM-yyyy。

# php - PHP 替换变音符号来解析 XML；几种方法不起作用

> ID：15500313
> 
> 赞同：1
> 
> 时间：2013-03-19T13:03:57.403
> 
> 标签：php, xml, replace, special-characters

我有以下问题： 我有一个解析 XML 文件的 php 页面。php 获取一个 ID，然后查询数据库以从该 ID 获取信息并将此信息输出为 XML。碰巧，数据库中有特殊字符，特别是 [é, è, ö, ä, ü.. etc ]。该文件保存为 UTF-8（我尝试保存为 UTF-16，但输出看起来很糟糕）。php 文件如下所示：

```
 <?php
    header('Content-Type: text/xml');
    echo '<?xml version="1.0" encoding="UTF-16" standalone="yes" ?>';
    include ('config.php');
    echo '<response>';
    $id = $_GET["id"];
    // configure server request
    $db_q1 = "SELECT * from table WHERE id = '" . $id . "'";
    $db_r1 = mysql_query($db_q1);
    while($rec = mysql_fetch_assoc($db_r1)) {
        $string = $rec["name"];
        ...
    }
    echo '<name>' . $string . '</name>';

    echo '<response>';
    ?> 
```

此文件适用于任何没有特殊字符的 db-entry，但是当它出现时，我收到以下错误：编码错误。这恰好发生在特殊字符的位置，即 xml 被解析到那里。在研究了错误之后，我认为这一定是由于特殊字符造成的（也因为 xml 被解析到那里并适用于其他条目）。

根据此处和其他地方的研究以及阅读某些技术的 php 手册后，我尝试了以下方法：

*   $string = iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $string); --> 有效，但从特殊字符（“Brötchen”->“Br”）中截断字符串。

*   $string = str_replace(搜索，替换，$string); --> 根本没有效果。我犯了同样的错误。

*   使用将返回更改字符串的函数，例如 from [here](https://stackoverflow.com/questions/158241/php-replace-umlauts-with-closest-7-bit-ascii-equivalent-in-an-utf-8-string)，这也没有任何效果。
*   htmlentities($string) --> 我收到以下错误：“实体 'uuml' 未定义”。
*   htmlspecialchars() 返回原始错误。
*   urlencode() 没有用，因为它将字符串视为 url 并添加“+”。
*   以下函数（不幸的是，我不记得我在哪里得到它，否则我会归功于编写它的人，因为它似乎很有用）：

    ```
    function remove_accents($str)
    { 
       $from = array(
         "á", "à", "â", "ã", "ä", "é", "è", "ê", "ë", "í", "ì", "î", "ï", 
         "ó", "ò", "ô", "õ", "ö", "ú", "ù", "û", "ü", "ç", "Á", "À", "Â", 
         "Ã", "Ä", "É", "È", "Ê", "Ë", "Í", "Ì", "Î", "Ï", "Ó", "Ò", "Ô", 
         "Õ", "Ö", "Ú", "Ù", "Û", "Ü", "Ç"
       ); 
       $to = array(
         "a", "a", "a", "a", "a", "e", "e", "e", "e", "i", "i", "i", "i", 
         "o", "o", "o", "o", "o", "u", "u", "u", "u", "c", "A", "A", "A", 
         "A", "A", "E", "E", "E", "E", "I", "I", "I", "I", "O", "O", "O", 
         "O", "O", "U", "U", "U", "U", "C"
       );
    return str_replace($from, $to, $str); 
    }

    $string = remove_accents($string); 
    ```

我真的不知道我做错了什么以及为什么这么多不同的方法都无法完成这项任务。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-22T17:23:41.443

对于遇到类似问题的其他人；我也遇到了通过 POST 输入的变量的字符串替换问题。

这对我有用：

```
$string = str_replace(
array('ä','á','à','â','ë','é','è','ê','ï','í','ì','î','ö','ó','ò','ô','ü','ú','ù','û'),
array('a','a','a','a','e','e','e','e','i','i','i','i','o','o','o','o','u','u','u','u'),
utf8_encode($string))); 
```

utf8_encode() 成功了！

我只需要小写字母，如果您需要大写字母，则必须为这些特殊字符添加所有大写变体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:06:30.130

这是 Wordpress 核心中的一个功能，它可以从字母中删除重音符号，它应该可以工作：

```
function remove_accents($string) {
    if ( !preg_match('/[\x80-\xff]/', $string) )
        return $string;

    if (seems_utf8($string)) {
        $chars = array(
        // Decompositions for Latin-1 Supplement
        chr(194).chr(170) => 'a', chr(194).chr(186) => 'o',
        chr(195).chr(128) => 'A', chr(195).chr(129) => 'A',
        chr(195).chr(130) => 'A', chr(195).chr(131) => 'A',
        chr(195).chr(132) => 'A', chr(195).chr(133) => 'A',
        chr(195).chr(134) => 'AE',chr(195).chr(135) => 'C',
        chr(195).chr(136) => 'E', chr(195).chr(137) => 'E',
        chr(195).chr(138) => 'E', chr(195).chr(139) => 'E',
        chr(195).chr(140) => 'I', chr(195).chr(141) => 'I',
        chr(195).chr(142) => 'I', chr(195).chr(143) => 'I',
        chr(195).chr(144) => 'D', chr(195).chr(145) => 'N',
        chr(195).chr(146) => 'O', chr(195).chr(147) => 'O',
        chr(195).chr(148) => 'O', chr(195).chr(149) => 'O',
        chr(195).chr(150) => 'O', chr(195).chr(153) => 'U',
        chr(195).chr(154) => 'U', chr(195).chr(155) => 'U',
        chr(195).chr(156) => 'U', chr(195).chr(157) => 'Y',
        chr(195).chr(158) => 'TH',chr(195).chr(159) => 's',
        chr(195).chr(160) => 'a', chr(195).chr(161) => 'a',
        chr(195).chr(162) => 'a', chr(195).chr(163) => 'a',
        chr(195).chr(164) => 'a', chr(195).chr(165) => 'a',
        chr(195).chr(166) => 'ae',chr(195).chr(167) => 'c',
        chr(195).chr(168) => 'e', chr(195).chr(169) => 'e',
        chr(195).chr(170) => 'e', chr(195).chr(171) => 'e',
        chr(195).chr(172) => 'i', chr(195).chr(173) => 'i',
        chr(195).chr(174) => 'i', chr(195).chr(175) => 'i',
        chr(195).chr(176) => 'd', chr(195).chr(177) => 'n',
        chr(195).chr(178) => 'o', chr(195).chr(179) => 'o',
        chr(195).chr(180) => 'o', chr(195).chr(181) => 'o',
        chr(195).chr(182) => 'o', chr(195).chr(184) => 'o',
        chr(195).chr(185) => 'u', chr(195).chr(186) => 'u',
        chr(195).chr(187) => 'u', chr(195).chr(188) => 'u',
        chr(195).chr(189) => 'y', chr(195).chr(190) => 'th',
        chr(195).chr(191) => 'y', chr(195).chr(152) => 'O',
        // Decompositions for Latin Extended-A
        chr(196).chr(128) => 'A', chr(196).chr(129) => 'a',
        chr(196).chr(130) => 'A', chr(196).chr(131) => 'a',
        chr(196).chr(132) => 'A', chr(196).chr(133) => 'a',
        chr(196).chr(134) => 'C', chr(196).chr(135) => 'c',
        chr(196).chr(136) => 'C', chr(196).chr(137) => 'c',
        chr(196).chr(138) => 'C', chr(196).chr(139) => 'c',
        chr(196).chr(140) => 'C', chr(196).chr(141) => 'c',
        chr(196).chr(142) => 'D', chr(196).chr(143) => 'd',
        chr(196).chr(144) => 'D', chr(196).chr(145) => 'd',
        chr(196).chr(146) => 'E', chr(196).chr(147) => 'e',
        chr(196).chr(148) => 'E', chr(196).chr(149) => 'e',
        chr(196).chr(150) => 'E', chr(196).chr(151) => 'e',
        chr(196).chr(152) => 'E', chr(196).chr(153) => 'e',
        chr(196).chr(154) => 'E', chr(196).chr(155) => 'e',
        chr(196).chr(156) => 'G', chr(196).chr(157) => 'g',
        chr(196).chr(158) => 'G', chr(196).chr(159) => 'g',
        chr(196).chr(160) => 'G', chr(196).chr(161) => 'g',
        chr(196).chr(162) => 'G', chr(196).chr(163) => 'g',
        chr(196).chr(164) => 'H', chr(196).chr(165) => 'h',
        chr(196).chr(166) => 'H', chr(196).chr(167) => 'h',
        chr(196).chr(168) => 'I', chr(196).chr(169) => 'i',
        chr(196).chr(170) => 'I', chr(196).chr(171) => 'i',
        chr(196).chr(172) => 'I', chr(196).chr(173) => 'i',
        chr(196).chr(174) => 'I', chr(196).chr(175) => 'i',
        chr(196).chr(176) => 'I', chr(196).chr(177) => 'i',
        chr(196).chr(178) => 'IJ',chr(196).chr(179) => 'ij',
        chr(196).chr(180) => 'J', chr(196).chr(181) => 'j',
        chr(196).chr(182) => 'K', chr(196).chr(183) => 'k',
        chr(196).chr(184) => 'k', chr(196).chr(185) => 'L',
        chr(196).chr(186) => 'l', chr(196).chr(187) => 'L',
        chr(196).chr(188) => 'l', chr(196).chr(189) => 'L',
        chr(196).chr(190) => 'l', chr(196).chr(191) => 'L',
        chr(197).chr(128) => 'l', chr(197).chr(129) => 'L',
        chr(197).chr(130) => 'l', chr(197).chr(131) => 'N',
        chr(197).chr(132) => 'n', chr(197).chr(133) => 'N',
        chr(197).chr(134) => 'n', chr(197).chr(135) => 'N',
        chr(197).chr(136) => 'n', chr(197).chr(137) => 'N',
        chr(197).chr(138) => 'n', chr(197).chr(139) => 'N',
        chr(197).chr(140) => 'O', chr(197).chr(141) => 'o',
        chr(197).chr(142) => 'O', chr(197).chr(143) => 'o',
        chr(197).chr(144) => 'O', chr(197).chr(145) => 'o',
        chr(197).chr(146) => 'OE',chr(197).chr(147) => 'oe',
        chr(197).chr(148) => 'R',chr(197).chr(149) => 'r',
        chr(197).chr(150) => 'R',chr(197).chr(151) => 'r',
        chr(197).chr(152) => 'R',chr(197).chr(153) => 'r',
        chr(197).chr(154) => 'S',chr(197).chr(155) => 's',
        chr(197).chr(156) => 'S',chr(197).chr(157) => 's',
        chr(197).chr(158) => 'S',chr(197).chr(159) => 's',
        chr(197).chr(160) => 'S', chr(197).chr(161) => 's',
        chr(197).chr(162) => 'T', chr(197).chr(163) => 't',
        chr(197).chr(164) => 'T', chr(197).chr(165) => 't',
        chr(197).chr(166) => 'T', chr(197).chr(167) => 't',
        chr(197).chr(168) => 'U', chr(197).chr(169) => 'u',
        chr(197).chr(170) => 'U', chr(197).chr(171) => 'u',
        chr(197).chr(172) => 'U', chr(197).chr(173) => 'u',
        chr(197).chr(174) => 'U', chr(197).chr(175) => 'u',
        chr(197).chr(176) => 'U', chr(197).chr(177) => 'u',
        chr(197).chr(178) => 'U', chr(197).chr(179) => 'u',
        chr(197).chr(180) => 'W', chr(197).chr(181) => 'w',
        chr(197).chr(182) => 'Y', chr(197).chr(183) => 'y',
        chr(197).chr(184) => 'Y', chr(197).chr(185) => 'Z',
        chr(197).chr(186) => 'z', chr(197).chr(187) => 'Z',
        chr(197).chr(188) => 'z', chr(197).chr(189) => 'Z',
        chr(197).chr(190) => 'z', chr(197).chr(191) => 's',
        // Decompositions for Latin Extended-B
        chr(200).chr(152) => 'S', chr(200).chr(153) => 's',
        chr(200).chr(154) => 'T', chr(200).chr(155) => 't',
        // Euro Sign
        chr(226).chr(130).chr(172) => 'E',
        // GBP (Pound) Sign
        chr(194).chr(163) => '',
        // Vowels with diacritic (Vietnamese)
        // unmarked
        chr(198).chr(160) => 'O', chr(198).chr(161) => 'o',
        chr(198).chr(175) => 'U', chr(198).chr(176) => 'u',
        // grave accent
        chr(225).chr(186).chr(166) => 'A', chr(225).chr(186).chr(167) => 'a',
        chr(225).chr(186).chr(176) => 'A', chr(225).chr(186).chr(177) => 'a',
        chr(225).chr(187).chr(128) => 'E', chr(225).chr(187).chr(129) => 'e',
        chr(225).chr(187).chr(146) => 'O', chr(225).chr(187).chr(147) => 'o',
        chr(225).chr(187).chr(156) => 'O', chr(225).chr(187).chr(157) => 'o',
        chr(225).chr(187).chr(170) => 'U', chr(225).chr(187).chr(171) => 'u',
        chr(225).chr(187).chr(178) => 'Y', chr(225).chr(187).chr(179) => 'y',
        // hook
        chr(225).chr(186).chr(162) => 'A', chr(225).chr(186).chr(163) => 'a',
        chr(225).chr(186).chr(168) => 'A', chr(225).chr(186).chr(169) => 'a',
        chr(225).chr(186).chr(178) => 'A', chr(225).chr(186).chr(179) => 'a',
        chr(225).chr(186).chr(186) => 'E', chr(225).chr(186).chr(187) => 'e',
        chr(225).chr(187).chr(130) => 'E', chr(225).chr(187).chr(131) => 'e',
        chr(225).chr(187).chr(136) => 'I', chr(225).chr(187).chr(137) => 'i',
        chr(225).chr(187).chr(142) => 'O', chr(225).chr(187).chr(143) => 'o',
        chr(225).chr(187).chr(148) => 'O', chr(225).chr(187).chr(149) => 'o',
        chr(225).chr(187).chr(158) => 'O', chr(225).chr(187).chr(159) => 'o',
        chr(225).chr(187).chr(166) => 'U', chr(225).chr(187).chr(167) => 'u',
        chr(225).chr(187).chr(172) => 'U', chr(225).chr(187).chr(173) => 'u',
        chr(225).chr(187).chr(182) => 'Y', chr(225).chr(187).chr(183) => 'y',
        // tilde
        chr(225).chr(186).chr(170) => 'A', chr(225).chr(186).chr(171) => 'a',
        chr(225).chr(186).chr(180) => 'A', chr(225).chr(186).chr(181) => 'a',
        chr(225).chr(186).chr(188) => 'E', chr(225).chr(186).chr(189) => 'e',
        chr(225).chr(187).chr(132) => 'E', chr(225).chr(187).chr(133) => 'e',
        chr(225).chr(187).chr(150) => 'O', chr(225).chr(187).chr(151) => 'o',
        chr(225).chr(187).chr(160) => 'O', chr(225).chr(187).chr(161) => 'o',
        chr(225).chr(187).chr(174) => 'U', chr(225).chr(187).chr(175) => 'u',
        chr(225).chr(187).chr(184) => 'Y', chr(225).chr(187).chr(185) => 'y',
        // acute accent
        chr(225).chr(186).chr(164) => 'A', chr(225).chr(186).chr(165) => 'a',
        chr(225).chr(186).chr(174) => 'A', chr(225).chr(186).chr(175) => 'a',
        chr(225).chr(186).chr(190) => 'E', chr(225).chr(186).chr(191) => 'e',
        chr(225).chr(187).chr(144) => 'O', chr(225).chr(187).chr(145) => 'o',
        chr(225).chr(187).chr(154) => 'O', chr(225).chr(187).chr(155) => 'o',
        chr(225).chr(187).chr(168) => 'U', chr(225).chr(187).chr(169) => 'u',
        // dot below
        chr(225).chr(186).chr(160) => 'A', chr(225).chr(186).chr(161) => 'a',
        chr(225).chr(186).chr(172) => 'A', chr(225).chr(186).chr(173) => 'a',
        chr(225).chr(186).chr(182) => 'A', chr(225).chr(186).chr(183) => 'a',
        chr(225).chr(186).chr(184) => 'E', chr(225).chr(186).chr(185) => 'e',
        chr(225).chr(187).chr(134) => 'E', chr(225).chr(187).chr(135) => 'e',
        chr(225).chr(187).chr(138) => 'I', chr(225).chr(187).chr(139) => 'i',
        chr(225).chr(187).chr(140) => 'O', chr(225).chr(187).chr(141) => 'o',
        chr(225).chr(187).chr(152) => 'O', chr(225).chr(187).chr(153) => 'o',
        chr(225).chr(187).chr(162) => 'O', chr(225).chr(187).chr(163) => 'o',
        chr(225).chr(187).chr(164) => 'U', chr(225).chr(187).chr(165) => 'u',
        chr(225).chr(187).chr(176) => 'U', chr(225).chr(187).chr(177) => 'u',
        chr(225).chr(187).chr(180) => 'Y', chr(225).chr(187).chr(181) => 'y',
        );

        $string = strtr($string, $chars);
    } else {
        // Assume ISO-8859-1 if not UTF-8
        $chars['in'] = chr(128).chr(131).chr(138).chr(142).chr(154).chr(158)
            .chr(159).chr(162).chr(165).chr(181).chr(192).chr(193).chr(194)
            .chr(195).chr(196).chr(197).chr(199).chr(200).chr(201).chr(202)
            .chr(203).chr(204).chr(205).chr(206).chr(207).chr(209).chr(210)
            .chr(211).chr(212).chr(213).chr(214).chr(216).chr(217).chr(218)
            .chr(219).chr(220).chr(221).chr(224).chr(225).chr(226).chr(227)
            .chr(228).chr(229).chr(231).chr(232).chr(233).chr(234).chr(235)
            .chr(236).chr(237).chr(238).chr(239).chr(241).chr(242).chr(243)
            .chr(244).chr(245).chr(246).chr(248).chr(249).chr(250).chr(251)
            .chr(252).chr(253).chr(255);

        $chars['out'] = "EfSZszYcYuAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy";

        $string = strtr($string, $chars['in'], $chars['out']);
        $double_chars['in'] = array(chr(140), chr(156), chr(198), chr(208), chr(222), chr(223), chr(230), chr(240), chr(254));
        $double_chars['out'] = array('OE', 'oe', 'AE', 'DH', 'TH', 'ss', 'ae', 'dh', 'th');
        $string = str_replace($double_chars['in'], $double_chars['out'], $string);
    }

    return $string;
} 
```

# java - The content of the adapter has changed but ListView did not receive a notification.content adapter is not modified from a background thread

> ID：15500314
> 
> 赞同：1
> 
> 时间：2013-03-19T13:03:57.733
> 
> 标签：java, android

this error showing in my logcat

```
03-19 12:48:54.527: E/AndroidRuntime(2066): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131165193, class android.widget.ListView) with Adapter(class com.example.recipestutors.ItemListBaseAdapter)] 
```

Itemlistadapter.java

```
ublic class ItemListBaseAdapter extends BaseAdapter {
private static ArrayList<Recipedetails> itemDetailsrrayList;

private Integer[] imgid = {
                R.drawable.vegeterian,
                R.drawable.nonveg,
                R.drawable.pickels,
                R.drawable.soup,
                R.drawable.sweets,
                R.drawable.cakes,
                R.drawable.icecreams,
                R.drawable.chinesevegdishes,
                R.drawable.chinesenonveg,
                R.drawable.chinesenoodles,
                R.drawable.chinesesoup,
                R.drawable.godhumaivegadai,
                R.drawable.soyamorekoozh,
                R.drawable.tomatokulambu,
                R.drawable.tomatoupma,
                R.drawable.vadanavratrispecial,
                R.drawable.eggkurma,
                R.drawable.milagu,
                R.drawable.rasam,
                R.drawable.vegetablekootu,
                R.drawable.avial,
                R.drawable.kothavarangaicurry,
                R.drawable.allepeyfishcurry,
                R.drawable.spicymadraschicken,
                R.drawable.prawns,
                R.drawable.keralachickenstew,
                R.drawable.nilgirichickenkorma,
                R.drawable.pepperchickencurry,
                R.drawable.chettiandchicken,
                R.drawable.prawnmasala,
                R.drawable.beeffry,
                R.drawable.crispyfish,
                R.drawable.amlapickle,
                R.drawable.avakaipickle,
                R.drawable.capsicumpickle,
                R.drawable.lemonpickle,
                R.drawable.onionpickle,
                R.drawable.mangopickle,
                R.drawable.tendermangopickle,
                R.drawable.tomatopickle,
                R.drawable.chillipickles,
                R.drawable.gingerpickle,
                R.drawable.garlicsoup,
                R.drawable.mixedvegsoup,
                R.drawable.chickenmanchowsoup,
                R.drawable.cleartomatosoup,
                R.drawable.sweetcornvegetablesoup,
                R.drawable.prawnandnoodlesoup,
                R.drawable.beetrootsoup,
                R.drawable.capsicumsoup,
                R.drawable.muttonsoup,
                R.drawable.spinachsoup,
                R.drawable.vegcurry,
                R.drawable.mushroommutter,
                R.drawable.alooparatha,
                R.drawable.daltadka,
                R.drawable.aloomethi,
                R.drawable.rajma,
                R.drawable.paneerbhujri,
                R.drawable.alooghobi,
                R.drawable.aloosabzi,
                R.drawable.kadhaipaneer,
                R.drawable.chickenwithbellpeppers,
                R.drawable.butterchicken,
                R.drawable.fishkorma,
                R.drawable.prawnfry,
                R.drawable.tandoorichicken,
                R.drawable.maccherjholfish,
                R.drawable.shamikabab,
                R.drawable.saagmeat,
                R.drawable.sindhichickenbiryani,
                R.drawable.punjabichickencurry,
                R.drawable.gulabjamun,
                R.drawable.basundi,
                R.drawable.peda,
                R.drawable.badhamhalwa,
                R.drawable.coconutburfi,
                R.drawable.kulfi,
                R.drawable.ladoo,
                R.drawable.mysorepak,
                R.drawable.ricekheer,
                R.drawable.badam,
                R.drawable.cauliflowersoup,
                R.drawable.cucumbersoup,
                R.drawable.tomatosoup,
                R.drawable.mulligatawnysoup,
                R.drawable.greenpeassoup,
                R.drawable.northindianmuttonsoup,
                R.drawable.chickennoodlesoup,
                R.drawable.spicybeansoup,
                R.drawable.eggdropsoup,
                R.drawable.springvegsoup,
                R.drawable.mushroomandseitan,
                R.drawable.tofuwith3spices,
                R.drawable.creamyvegpie,
                R.drawable.grilledvegmedley,
                R.drawable.bakedsquash,
                R.drawable.africanchickenstew,
                R.drawable.westafricanchicken,
                R.drawable.africanyamsoup,
                R.drawable.chickenchilliroast,
                R.drawable.chilliblackbeans,
                R.drawable.williecake,
                R.drawable.pumpkingingercupcakes,
                R.drawable.doublelayerpumpkincheesecake,
                R.drawable.carrotcake,
                R.drawable.sexcake,
                R.drawable.chocolatechipicecream,
                R.drawable.cookieicecream,
                R.drawable.cinnamonicecream,
                R.drawable.appleicecream,
                R.drawable.walnut,
                R.drawable.chineseaubergins,
                R.drawable.spicycucumber,
                R.drawable.chinesemushrooms,
                R.drawable.chinesegobi,
                R.drawable.spicytofu,
                R.drawable.chinesetilchicken,
                R.drawable.chickenmoongali,
                R.drawable.sweetsourchicken,
                R.drawable.cherrychicken,
                R.drawable.mymasalachicken,
                R.drawable.coldseasamenoodles,
                R.drawable.sobanoodles,
                R.drawable.noodleswithtofu,
                R.drawable.chinesevegandbeef,
                R.drawable.noodleswithpepper,
                R.drawable.jhingasoup,
                R.drawable.masalachickensoup,
                R.drawable.cabbagesoup,
                R.drawable.chinesepumpkinsoup,
                R.drawable.baconsoup,

                };

private LayoutInflater l_Inflater;

public ItemListBaseAdapter(Context context, ArrayList<Recipedetails> results) {
        itemDetailsrrayList = results;
        l_Inflater = LayoutInflater.from(context);
}

public int getCount() {
        return itemDetailsrrayList.size();
}

public Object getItem(int position) {
        return itemDetailsrrayList.get(position);
}

public long getItemId(int position) {
        return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
                convertView = l_Inflater.inflate(R.layout.item_details_view, null);
                holder = new ViewHolder();
                holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
                holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
                holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);

                convertView.setTag(holder);
        } else {
                holder = (ViewHolder) convertView.getTag();
        }

        holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
        holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
        holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);
        return convertView;
}
public synchronized   void refreshAdapter(ArrayList<Recipedetails> items) {
    itemDetailsrrayList.clear();
    itemDetailsrrayList.addAll(items);
   notifyDataSetChanged();
}

static class ViewHolder {
        TextView txt_itemName;
        TextView txt_itemDescription;
        ImageView itemImage;
}
} 
```

soutindian.java

```
public class SouthIndian extends Activity {
ItemListBaseAdapter _itemListAdapter;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<Recipedetails> image_details = new ArrayList<Recipedetails>();

        _itemListAdapter = new ItemListBaseAdapter(this, image_details);

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(_itemListAdapter);

        lv1.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                        Object o = lv1.getItemAtPosition(position);
                        Recipedetails obj_itemDetails = (Recipedetails)o;
                        Toast.makeText(SouthIndian.this, "You have chosen : " + " " +      obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                        switch(obj_itemDetails.getImageNumber())
                        {
                            case 1:
                                 Intent newActivity = new Intent(SouthIndian.this,
                                                 AndroidTabLayoutActivity.class);    
                     startActivity(newActivity);
                                break;

                            case 2:
                                Intent new1Activity = new Intent(SouthIndian.this,
                                                AndroidTabLayoutActivity1.class);    
                            startActivity(new1Activity);
                                break;

                            case 3:
                                Intent new2Activity = new Intent(SouthIndian.this,
                                                AndroidTabLayoutActivity2.class);    
                            startActivity(new2Activity);
                                break;

                            case 4:
                                Intent new3Activity = new Intent(SouthIndian.this,
                                                AndroidTabLayoutActivity3.class);    
                            startActivity(new3Activity);
                                break;        

                           default:
                                   Toast.makeText(SouthIndian.this, "Wrong Input", Toast.LENGTH_LONG).show();
                        }

                }
        });

        refreshYourAdapter(GetSearchResults());
    }

    // THIS IS WHAT IT SHOULD LOOK LIKE MORE OR LESS. THIS IS AS MUCH AS I CAN HELP

    private void refreshYourAdapter(final ArrayList<Recipedetails> newData) {
         //this is what I meant. The error clearly states you are not updating the adapter on the UI thread
         runOnUiThread(new Runnable() {
             public void run() {
                 _itemListAdapter.refreshAdapter(newData);
             }
         });
    }

    private ArrayList<Recipedetails> GetSearchResults(){
        ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

        Recipedetails item_details = new Recipedetails();
        item_details.setName("Vegterian");
        item_details.setItemDescription("Recipes made by raw materials");
            item_details.setImageNumber(1);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Non-Vegterian");
        item_details.setItemDescription("Flesh of sweet animals");
        item_details.setImageNumber(2);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Pickels");
        item_details.setItemDescription("Touchable dish  by Homemade");
        item_details.setImageNumber(3);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soups");
        item_details.setItemDescription("Startup for our food");
            item_details.setImageNumber(4);
        results.add(item_details);

        return results;
    }
} 
```

Northindian.java

```
public class NorthIndian  extends Activity {
 ItemListBaseAdapter _itemListAdapter;

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<Recipedetails> image_details = new ArrayList<Recipedetails>();

        _itemListAdapter = new ItemListBaseAdapter(this, image_details);

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(_itemListAdapter);

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                Recipedetails obj_itemDetails = (Recipedetails)o;
                Toast.makeText(NorthIndian.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                switch(obj_itemDetails.getImageNumber())
                {
                    case 1:
                         Intent newActivity = new Intent(NorthIndian.this, 
                                 AndroidTabLayoutActivity4.class);     
                         startActivity(newActivity);
                        break;

                    case 2:
                        Intent new1Activity = new Intent(NorthIndian.this, 
                                AndroidTabLayoutActivity5.class);     
                        startActivity(new1Activity);
                        break;

                    case 5:
                        Intent new2Activity = new Intent(NorthIndian.this, 
                                AndroidTabLayoutActivity6.class);     
                        startActivity(new2Activity);
                        break; 

                    case 4:
                        Intent new3Activity = new Intent(NorthIndian.this, 
                                AndroidTabLayoutActivity7.class);     
                        startActivity(new3Activity);
                        break;      

                   default:
                       Toast.makeText(NorthIndian.this, "Wrong Input", Toast.LENGTH_LONG).show();
                }
            }  
        });
        refreshYourAdapter(GetSearchResults());
    }
  private void refreshYourAdapter(final ArrayList<Recipedetails> newData) {
      //this is what I meant. The error clearly states you are not updating the adapter on the UI thread
      runOnUiThread(new Runnable() {
          public void run() {
              _itemListAdapter.refreshAdapter(newData);
          }
      });
 }

    private ArrayList<Recipedetails> GetSearchResults(){
        ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

        Recipedetails item_details = new Recipedetails();
        item_details.setName("Vegterian");
        item_details.setItemDescription("Recipes made by raw materials");
        item_details.setImageNumber(1);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Non-Vegterian");
        item_details.setItemDescription("Flesh of sweet animals");
        item_details.setImageNumber(2);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Sweets");
        item_details.setItemDescription("Tasty sweets made from indians");
        item_details.setImageNumber(5);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soups");
        item_details.setItemDescription("Startup for our food");
        item_details.setImageNumber(4);
        results.add(item_details);

        return results;
    }
} 
```

after clicking the first time in listview,it will goes to the function,if we come back again clicking the next item in the listview,it shows my application has stopped. **My problem not solved i tried all the ways**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:43:08.523

two code is needed in our listadapter

```
public synchronized   void refreshAdapter(ArrayList<Recipedetails> items) {
        //itemDetailsrrayList.clear();
        itemDetailsrrayList = items;
       notifyDataSetChanged();
    } 
```

and our listview activity also

```
private void refreshYourAdapter(final ArrayList<Recipedetails> items) {
//this is what I meant. The error clearly states you are not updating the adapter on the UI thread
runOnUiThread(new Runnable() {
public void run() {
_itemListAdapter.refreshAdapter(items);
}
});
} 
```

and one more code also in listview

```
 @Override
    protected void onResume() {
    super.onResume();
    results = new ArrayList<Recipedetails>(); 
    _itemListAdapter = new ItemListBaseAdapter(this, image_details);
    refreshYourAdapter(GetSearchResults());
    lv1.setAdapter(_itemListAdapter);

    } 
```

# mysql - 如何进行亚马逊备份

> ID：15500318
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:06.690
> 
> 标签：mysql, amazon-web-services, amazon-rds

如何从 amazon rds 服务备份我的 mysql rds 实例。有哪些可用的备份选项？意味着我想每天、每周和每小时进行一次备份，我必须在哪里配置它，以及亚马逊在哪里存储这些备份。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:30:50.897

AWS 基本上提供了两个数据库备份选项：**`automated backups`**和**`database snapshots`**.

启用自动备份后，Amazon RDS 会自动对您的数据执行完整的每日快照（在您首选的备份窗口期间）并捕获事务日志。默认情况下，Amazon RDS 会在不收取额外费用的情况下启用数据库实例的自动备份，保留期为 1 天，但这是可配置的。您可以使用`ModifyDBInstance API`来更改现有的数据库设置。

数据库快照是用户启动的，使您能够根据需要随时备份已知状态的数据库实例。

数据库快照和自动备份存储在 S3 中。

**在 datasage 的评论后**编辑：****

 **我发现了这个讨论[What are the pros/cons of hosting a MySQL DB in Amazon RDS vs a DB instance in EC2](http://www.quora.com/What-are-the-pros-cons-of-hosting-a-MySQL-DB-in-Amazon-RDS-versus-a-DB-instance-in-EC2)。它讨论了使用 MyISAM 表的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:07:10.107

RDS 控制台允许您设置备份选项（频率、要保留的数量等），您无需担心存储 RDS 会为您执行此操作。

如果您想在 RDS 之外备份 RDS 实例，那么这取决于您在 RDS、MySQL、Oracle 或 SQLServer 上托管的数据库类型 - 每个都有自己的备份工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T12:09:46.680

如果您想将数据库备份到本地系统，这里有一个 bash 脚本可以为您完成。[https://github.com/jeevandongre/aws-repo](https://github.com/jeevandongre/aws-repo)（我写了这个脚本并开源了）**

# asp.net - 每次按钮都会导致完全回发，即使它在更新面板中

> ID：15500320
> 
> 赞同：2
> 
> 时间：2013-03-19T13:04:07.837
> 
> 标签：asp.net, jquery, asp.net-ajax

在我的代码中，每个 DropDownList 都在更新面板中，并且它们不是回发。对于每个按钮，都会发生完整的回发，但我的按钮位于更新面板中。我尝试使用 asynpostback 触发器，在这种情况下不显示服务器端消息。我也想要那个消息。

我的代码是：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="true">
    </asp:ScriptManager>
    <table align="center" style="border: thin solid #FF0000" width="80%">
        <tr>
            <th colspan="2" align="center" bgcolor="Black" style="color: #FFFFFF">
                Schedule New Batch
            </th>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <div>
                    <asp:Label ID="lblError" runat="server" Style="font-weight: 700; color: #FF0000;"
                        Text="Label" Visible="False"></asp:Label>
                    <asp:Label ID="lblSucess" runat="server" Style="font-weight: 700; color: #006600;
                        background-color: #FFFFFF;" Text="Label" Visible="False"></asp:Label>
                </div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td class="style44" align="right">
                Technology<span class="style23">*</span> :
            </td>
            <td class="style45">
                <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlTechnology" runat="server" Width="155px" Class="valid" OnSelectedIndexChanged="ddlTechnology_SelectedIndexChanged"
                            AutoPostBack="True" Height="23px">
                        </asp:DropDownList>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style49" align="right">
                Courses<span class="style23">*</span> :
            </td>
            <td class="style50">
                <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlCourse" runat="server" Width="155px" Class="valid" OnSelectedIndexChanged="ddlCourse_SelectedIndexChanged"
                            AutoPostBack="True" Height="23px">
                        </asp:DropDownList>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style9" align="right">
                Faculty<span class="style23">*</span> :
            </td>
            <td class="style47">
                <asp:UpdatePanel ID="UpdatePanel3" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlFaculty" runat="server" Width="155px" Class="valid" OnSelectedIndexChanged="ddlFaculty_SelectedIndexChanged"
                            AutoPostBack="True" Height="23px">
                        </asp:DropDownList>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style44" align="right">
                Timing<span class="style24">*</span> :
            </td>
            <td class="style45">
                <asp:UpdatePanel ID="UpdatePanel4" runat="server">
                    <ContentTemplate>
                        <asp:DropDownList ID="ddlTiming" runat="server" Width="155px" Height="23px" AutoPostBack="True"
                            Class="valid" OnSelectedIndexChanged="ddlTiming_SelectedIndexChanged">
                        </asp:DropDownList>
                        <asp:Button ID="btnAdd" runat="server" Text="Add" />
                        <cc1:modalpopupextender id="btnAdd_ModalPopupExtender" runat="server" cancelcontrolid="btnCancleInsertTime"
                            dynamicservicepath="" enabled="True" popupcontrolid="Panel1" targetcontrolid="btnAdd">
                </cc1:modalpopupextender>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style44" align="right">
                Start Date<span class="style23">*</span> :
            </td>
            <td class="style45">
                <asp:UpdatePanel ID="UpdatePanel6" runat="server">
                    <ContentTemplate>
                        <asp:TextBox ID="txtInsertdate" runat="server" Width="150px" Height="16px" Class="valid"></asp:TextBox>
                        <cc1:calendarextender id="CalendarExtender1" runat="server" targetcontrolid="txtInsertdate"
                            format="yyyy-MM-dd">
                </cc1:calendarextender>
                    </ContentTemplate>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td class="style51">
                &nbsp;
            </td>
            <td class="style45">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td>
                <div style="text-align: right">
                    <asp:Button ID="btnSchedule" runat="server" Text="Schedule" Style="font-weight: 700;
                        margin-left: 0px;" Width="81px" Height="24px" OnClick="btnSchedule_Click" />
                </div>
            </td>
            <td>
                <asp:UpdatePanel ID="UpdatePanel5" runat="server">
                    <ContentTemplate>
                        <asp:Button ID="btnreset" runat="server" OnClick="btnreset_Click" Style="font-weight: 700"
                            Text="Reset" Width="67px" CausesValidation="False" UseSubmitBehavior="false" />
                    </ContentTemplate>
                    <Triggers>
                        <asp:PostBackTrigger ControlID="btnreset" />
                    </Triggers>
                </asp:UpdatePanel>
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <asp:Panel ID="Panel1" runat="server" aline="center">
                    <table style="border: thin solid #FF0000; background: #7F8778">
                        <tr>
                            <th class="style53">
                                Please Add a Time
                            </th>
                        </tr>
                        <tr>
                            <td align="center" style="color: #FF0000" class="style53">
                                <asp:TextBox ID="txtInsertTime" runat="server" Width="124px"></asp:TextBox>
                                &nbsp; EX: 09:15AM
                            </td>
                        </tr>
                        <tr>
                            <asp:UpdatePanel ID="UpdatePanel7" runat="server">
                                <ContentTemplate>
                                    <td align="center" class="style53">
                                        <asp:Button ID="btnInsertTime" runat="server" Text="Add Time" Width="73px" OnClientClick="return InsertTime()"
                                            OnClick="btnInsertTime_Click" class="cancel" />
                                        &nbsp; &nbsp;
                                        <asp:Button ID="btnCancleInsertTime" Text="Cancel" Width="55px" runat="server" class="cancel" />
                                    </td>
                                </ContentTemplate>
                            </asp:UpdatePanel>
                        </tr>
                    </table>
                </asp:Panel>
            </td>
        </tr>
    </table>
    <br />
    </form>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:37:02.177

我已经使用 Visual Studio 2010、.NET Framework 4.0 在空白解决方案中尝试了您的代码。更改以下内容，我设法避免了按钮的完整回发：

我已经`AsyncPostBackTriger`为每个按钮和`SelectedIndexChanged`DropDownLists 添加了 Click 事件的属性。我还配置了 UpdatePanel 属性`ChildrenAsTriggers="false"`和`UpdateMode="Conditional"`. 对每个 UpdatePanel 遵循相同的方法就可以了。

```
<asp:UpdatePanel ID="UpdatePanel4" runat="server" ChildrenAsTriggers="false" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="ddlTiming" EventName="SelectedIndexChanged" />
        <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
    </Triggers>
    <ContentTemplate>

        <asp:DropDownList ID="ddlTiming" runat="server" Width="155px" Height="23px" AutoPostBack="True"
            Class="valid" OnSelectedIndexChanged="ddlTiming_SelectedIndexChanged">
        </asp:DropDownList>
        <asp:Button ID="btnAdd" runat="server" Text="Add" />
        <cc1:modalpopupextender id="btnAdd_ModalPopupExtender" runat="server" cancelcontrolid="btnCancleInsertTime"
            dynamicservicepath="" enabled="True" popupcontrolid="Panel1" targetcontrolid="btnAdd">
        </cc1:modalpopupextender>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我注意到该按钮`Schedule`不在更新面板内，因此显然它导致了整页回发。

# php - 带有 2 个单词的 Codeigniter 搜索查询

> ID：15500323
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:15.473
> 
> 标签：php, database, codeigniter

我有一个基于 codeIgniter 的属性站点，它使用表单进行搜索。一切都很好，除非你用 2 个词搜索，然后即使关键词在那里也没有结果。我看不出我哪里出错了。URL 看起来不错，它把关键字放在那里

例如：

```
 /family%20home/ 
```

但没有带来任何结果。如果你只是搜索家庭，结果会很好。

希望有人可以帮助解决这个问题！:-)

控制器看起来像：

```
function index($page=0,$keyword='0',$min='0',$max='0',$bed='0',$rentbuy='0',$ord_by='DESC')
{ 
  $condition=" where 1 ";
  $keyword=empty($keyword)?(!empty($_POST["keyword"])?trim($_POST["keyword"]):'0'):$keyword;
  if(!empty($keyword)){
    $data['keyword']=$keyword;
    $condition.=" and (town like '%$keyword%' or street like '%$keyword%' or postcode like '%$keyword%' or main_advert like '%$keyword%' or main_advert2 like '%$keyword%' or main_advert3 like '%$keyword%' or main_advert4 like '%$keyword%')";
  }
  $bed=empty($bed)?(!empty($_POST["bed"])?$_POST["bed"]:'0'):$bed;
  if($bed>0){
    $condition.=" and bedrooms>=$bed";
  }    
  $min=empty($min)?(!empty($_POST["min"])?$_POST["min"]:0):$min;
  if($min>0){
    $condition.=" and price>=$min";
  }       
  $max=empty($max)?(!empty($_POST["max"])?$_POST["max"]:0):$max;
  if($max>0){
    $condition.=" and price<=$max";
  }       
 $orderby=' order by price DESC';
 // $ord_by=(!empty($_POST["ord_by"]))?$_POST["ord_by"]:$ord_by;      
  $rentbuy=empty($rentbuy)?(!empty($_POST["rentbuy"])?$_POST["rentbuy"]:'0'):$rentbuy;
  if(!empty($rentbuy)){
  $rarry=array('','Residential Sales','Residential Lettings');
    $condition.=" and department='".$rarry[$rentbuy]."'";
  }
  //echo $condition;
  $perpage=4;
  $start=($page);

  $limit=" LIMIT ".$start.",".$perpage."";

    $data["count"] = $this->property->get_count($condition);
    $data["list"] = $this->property->get_list($condition.$orderby.$limit);
    $config['urlpara']='/'.$keyword."/".$min."/".$max."/".$bed."/".$rentbuy."/".$ord_by."/";
    $config['total_rows']=$data["count"] ;
    $config['uri_segment']=3;
    $config['per_page']=$perpage;
    $config['base_url']=base_url().'/properties/index/';

    $this->load->library('pagination');
    $this->pagination->initialize($config);

    $data['links']=$this->pagination->create_links();
    if($_POST){
        redirect(base_url().'properties/index/0'.$config['urlpara']);       
    }
    $data['page']=$page;
    $data['bed']=$bed;
    $data['min']=$min;
    $data['max']=$max;
    $data['rentbuy']=$rentbuy;
    $data['ord_by']=$ord_by;       
    $this->_common($data);
    $this->load->view('property_results',$data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:43:10.610

在 codeigniter 中，当查询字符串或关键字被发送到控制器时

```
$query="World Hospital";
echo site_url('Controller/Controller_Function/'.$query); 
```

Codeigniter 将 $query 假定为 URL 并将其编码为 World%20Hospital。当然mysql不会给你这个字符串的结果。您需要的是在实际使用控制器中的变量之前解码字符串，如上述答案中提到的 JCO。这样做;

```
Public function something()
{
   $my_query=urldecode($this->url->segment(3));
   // Now you can use $my_query in your query.
} 
```

希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:22:27.757

如果关键字是“Family%20home”，您是否尝试过 urldecode() 来删除 url 编码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:33:30.930

我不确定我是否了解您实际需要做什么。如果要使用多个关键字执行搜索，则可以将关键字变量分解为数组

```
$keywords=explode(' ',$keywords); 
```

然后进行循环并构建您的搜索查询

# apache - 在本地模式下配置 hive

> ID：15500326
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:22.010
> 
> 标签：apache, hadoop, hive

我正在尝试在本地模式配置中设置 hive-0.9.0。在 /conf 中，我创建了 hive-site.xml 并指定了仓库文件夹的属性。但我认为 hive 没有使用我定义的位置，因为它没有在该位置创建“仓库”文件夹。

此外，是否有必要让 hadoop 集群在本地模式配置单元配置中运行，因为当我在没有启动 hadoop 集群的情况下发出任何 DDL 命令时它会引发错误。

```
FAILED: Error in metadata: MetaException(message:Got exception: java.net.ConnectException Call to localhost/127.0.0.1:54310 failed on connection exception: java.net.ConnectException: Connection refused) 
```

hive-site.xml的内容如下：

```
<?xml version="1.0"?>

<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<configuration>

<property>

<name>hive.metastore.warehouse.dir</name>

<value>/home/hadoopuser/hive/warehouse</value>

<description>

Local or HDFS directory where Hive keeps table contents.

</description>

</property>

<property>

<name>hive.metastore.local</name>

<value>true</value>

<description>

Use false if a production metastore server is used.

</description>

</property>

<property>

<name>javax.jdo.option.ConnectionURL</name>

<value>jdbc:derby:;databaseName=/home/hadoopuser/hive/metastore_db;create=true</value>

<description>

The JDBC connection URL.

</description>

</property>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:35:01.487

Hive 查询在内部运行 mapreduce。因此，当您尝试查询 Hive 时，hadoop 必须启动。

# osgi - 在 Weblogic Server 10.3.3 上嵌入 OSGi

> ID：15500328
> 
> 赞同：1
> 
> 时间：2013-03-19T13:04:34.553
> 
> 标签：osgi, weblogic, equinox

我是 OSGi 的新手，正在尝试在 Weblogic Server 上配置 Equinox/Felix。但是我在任何地方都找不到嵌入在 Weblogic Server 中的任何 OSGi 容器的任何信息。所以我的问题是——

1\. 有人用 Weblogic Server 配置过 Equinox 或 Felix 吗？是否支持？

2\. SpringDM支持tomcat和jetty，是否也支持Weblogic？

3\. 我可以在不使用 SpringDM 的情况下将 Spring MVC 应用程序部署为捆绑包吗？OSGi 容器可以是 Felix/Equinox；应用服务器是 Weblogic 10.3.3

感谢任何帮助/示例/参考以了解 Weblogic 中的 OSGi 支持。

提前致谢

-dee

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T13:45:52.520

请看看我几个月前提出的这个问题：[WebLogic and OSGi](https://stackoverflow.com/questions/11032214/weblogic-and-osgi)。我也更新了这个问题。从版本 12.1.2 开始，Weblogic 开箱即用地支持 OSGi。

# android - Fragmenttabhost 性能慢？

> ID：15500331
> 
> 赞同：9
> 
> 时间：2013-03-19T13:04:36.940
> 
> 标签：android, fragment, fragment-tab-host

我已经使用了`v4 support lib`for`FragmentTabHost`

要求是，当我将标签页切换到另一个标签页和另一个标签页时，这就是调用

**onCreateView() & onActivityCreated()**每次。

这就是为什么我的代码性能很慢。

那么，还有其他解决方案吗？如何提高片段选项卡中的性能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T17:11:08.637

听起来像是设计的味道。

重新设计您的代码，以便异步完成繁重的工作。片段应该能够快速构建。如果需要进行任何大型处理以使 Fragment 显示有用信息，则应在创建 Fragment 后提前或异步完成该工作，并在工作完成时通知 Fragment 更新其内容.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:49:07.537

您应该注意的第一件事是注意计算/加载大量数据应该放在与主 UI 线程不同的工作线程上。最好的选择（在我看来）是使用`AsyncTask`. 您可以在 Fragment 中使用类似的东西：

```
private class LoadData extends AsyncTask<Void, Void, Void>{

      @Override
      protected void onPreExecute(){
          super.onPreExecute();
          // this is the place where you can show
          // progressbar for example to indicate the user
          // that there is something which is happening/loading in the background
      }

      @Override
      protected void doInBackground(Void... params){

          // that's the place where you should do 
          // 'the heavy' process which should run on background thread
      }

      @Override
      protected void onPostExecute(Void result){
          super.onPostExecute();
          // you should update your UI here.
          // For example set your listview's adapter
          // changes button states, set text to textview and etc.
      }
} 
```

这是使您的标签工作更快的方法。希望这会对您有所帮助！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T06:46:29.383

我找到了解决方案。我在创建时插入了所有网络服务和数据库事务代码。因为 oncreate 每次都不会调用，直到 ondestroy 没有调用。并且我们可以使用另一种解决方案

片段.show();

& 片段.hide(); 方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T20:37:16.680

作为 Android-Developer 的补充：如果您已经在使用 AsyncTask，请记住，即使您使用多个 AsyncTask，它们也会在后台执行，但都是按顺序执行的！如果您想要更多线程来处理您的任务，请查看这篇文章，它完美地解释了如何实现这一目标！[同时运行多个 AsyncTask —— 不可能吗？](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible)

# c# - 从内存中删除类/变量实例（完全）

> ID：15500333
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:47.190
> 
> 标签：c#, class, memory, memory-management, instance

我正在使用 c# (.NET) 开发一个套接字项目。我正在处理一些类（数据包）的数据。当我查看数据传入时的内存使用情况时，它正在上升！即创建类。如何从内存中删除（手动）类和未使用的变量/类（不使用 GC！）？

如果我尝试基本的东西，比如只接收数据，它会再次上升。此时，我想**完全**从内存中删除/删除类/变量！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T13:07:23.160

你不能。您无法在 C# 中手动删除对象。如果垃圾收集器没有自动执行此操作，那么您很可能在某处持有该对象。使用分析器找出位置并修复您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T13:10:06.013

*您不能*手动执行此操作的好处和痛苦（在某些情况下）。即使强迫`GC.Collect()`您也不能保证获得空闲内存。

另外，内存清理请求是一个*请求*，因此可能会延迟一些时间，而不是立即发生。

因此`CLR`，**如果我们在谈论 .NET 对象分配**，清理内存的唯一方法是：清理您的对象，让它们没有其他对象指向它们，并且

*   等到`GC`会收集它们，如果会（取决于世代）

*   手动调用`GC.Collect()`，不建议使用，但也可以使用，顺便说一下不保证会清理内存。

进一步阅读：[垃圾收集中的世代是什么？](https://stackoverflow.com/questions/2257563/what-are-the-generations-in-garbage-collection)

# python - Python - IndentationError：预期 if 上有一个缩进块

> ID：15500335
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:04:49.493
> 
> 标签：python

我是python新手，所以这是我的问题。我在第 31 行的 y_list 上收到错误“IndentationError: expected an indented block” -> 在第一个 if 之后。我加载的文件包含很多数字，我们的想法是跳过所谓的 y_list 中的负数。

```
filename = "data_5.dat" # this file can also be found in the sandbox folder 
x_list = []
y_list = []

fp = open(filename)
for line in fp:
    var1, var2  = line.split(",")    # here we wish to split the line using the ',' character

    # since we want them in numeric format we need to convert
    a = float(var1)
    b = float(var2)

    # put them into two lists
    x_list.append(a)
    y_list.append(b)

fp.close()    # close the file

x = x_list
y = y_list

I = 0.0
L = 0.0

for k in range(1, len(x)):
if y_list>0:
        y_list.append(y)
        I += y[k-1] * (x[k] - x[k-1])

for k in range(1, len(x)):
if y_list>0:
        y_list.append(y)
        L += y[k] * (x[k] - x[k-1])

print I
print L
print (I+L)/2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:11:19.830

```
for k in range(1, len(x)):
if y_list>0:
        y_list.append(y)
        I += y[k-1] * (x[k] - x[k-1]) 
```

这些`if`块是块的一部分`for`，因此它们需要缩进一个：

```
for k in range(1, len(x)):
    if y_list>0:
        y_list.append(y)
        I += y[k-1] * (x[k] - x[k-1]) 
```

标准是使用四个空格，但是如果您混合制表符和空格，即使它在技术上是有效的 Python，也很容易遇到这样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:06:45.440

转到第 31 行（然后是第 36 行）并缩进它。在行的开头点击 tab 键，这样它会在右边突出一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-04T16:10:54.407

```
 #!/usr/bin/python

 import base64

 if naujas==20:
      Ivestis=input('Iveskite failo varda kuri noresite koreguoti')

 file2 = open(Ivestis, 'r')

 failas=file2.read() file2.close() file4=open(Ivestis,'r+')

 bfailas=failas.encode("UTF-8") efailas=base64.b64encode(bfailas)
 print(efailas)

 # encoded _data has the encoded form of our text – ’see the source’

 efailas=str(efailas)

 file4.write(efailas)

 file4.close()

 elif naujas==20:

 file3 = open('Naujas.txt', 'r+') 

 naujas=base64.b64decode(file3.read())

 print(naujas)

 else

 print('Tikriausiai tokio failo nera') 
```

相同的

*不工作：/

# bash - Bash脚本无法解析符号链接

> ID：15500336
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:49.197
> 
> 标签：bash

我的一个 bash 脚本中有以下内容：

```
PID_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )/../pids/" && pwd )"

#...

if [ -e $PID_PATH/the_file.pid ]; then
    echo "the_file was found!"
else
    echo "the_file was not found!"
fi 
```

当我回显 PID_PATH 时，它是 100% 正确的，但 if 语句一直评估为假？pids 文件夹本身是一个符号链接，我怀疑 Ubuntu 不喜欢 if 语句中的那个。

有任何想法吗？

编辑：

奇怪的是，当我使用 PID_PATH 变量作为单独的脚本（在同一路径中）单独运行 if 语句时，它可以 100% 工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:47:51.520

一些可能性：

*   是否`PID_PATH`包含任何空格或其他`[^a-zA-Z0-9._-]`字符？您应该双引号`$PID_PATH/the_file.pid`以避免空格扩展。
*   之前有试过`echo "$PID_PATH"`上线`if`吗？
*   您确定您没有简化示例中可能相关的一些代码吗？
*   您收到任何错误消息吗？尝试`set -o errexit -o nounset -o pipefail`在文件顶部使用。
*   符号链接是否在执行期间的某个时间点损坏？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:35:20.197

奇怪的是，通过在检查 .pid 文件是否存在之前添加短暂的延迟来解决这个问题。

```
PID_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )/../pids/" && pwd )"

#...

sleep 0.3 
if [ -e $PID_PATH/the_file.pid ]; then
    echo "the_file was found!" 
else
    echo "the_file was not found!"
fi 
```

必须与仍在创建的文件有关，同时想要过早地检查它，这是一个典型的赛车条件问题。

# java - JFrame的图标不显示

> ID：15500337
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:51.510
> 
> 标签：java, swing

我有一个以 Swing 的 JFrame 作为主要 GUI 单元的 Java 应用程序。我已经通过 setIconImage() 为它设置了图标。当我在 NetBeans 中运行该程序时，一切正常，并且显示了框架的图标。但是当我编译它并尝试运行 jar 文件（使用 JRE7）时，该应用程序具有 Duke 的标准图标。在 NetBeans 之外运行应用程序时如何更改该图标？

UPD：好的，这是代码：

```
public static void main(String[] args) throws IOException{
    URL imgUrl = Polygon.class.getResource("/imgs/icon.png");
    Image img = ImageIO.read(imgUrl);

    JFrame f = new JFrame();
    f.setSize(new Dimension(500, 500));
    f.setIconImage(img);
    f.setVisible(true);
} 
```

UPD2：我已将此行添加到代码的末尾：

```
 JOptionPane.showMessageDialog(null, new ImageIcon(img)); 
```

图像一切正常！它加载！但它没有显示为图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:10:56.730

当您从 Netbeans 内部运行应用程序时，项目文件夹中的文件可用，但如果您自己运行已编译的 JAR，它们可能不可用。

阅读此[示例](http://www.kodejava.org/examples/223.html)（注意注释）以正确加载您的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T12:18:45.570

试试`getClass().getResource("imgs/icon.png")`。这个对我有用。注意绝对路径和相对路径之间的区别。您可能不需要领先的`/`.

# c# - 什么是 EF4 中的 ObjectStateManager

> ID：15500338
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:51.940
> 
> 标签：c#, entity-framework-4.1

我听说 EF4 的性能比以前的版本更好。所以我在我的一个项目中使用了 EF4。

我需要一些关于它是什么`ObjectStateManager`以及它是如何工作的详细描述。它如何执行更新以及处理时在后台发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:11:23.373

这是我不久前在搜索时遇到的一个很好的答案

[http://entityframeworktutorial.net/objectstatemanager.aspx#.UUhjRRwjzQU](http://entityframeworktutorial.net/objectstatemanager.aspx#.UUhjRRwjzQU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:08:15.620

维护实体类型实例和关系实例的身份管理和对象状态。

您可以阅读此链接，该链接提供有关课程的详细信息

[http://msdn.microsoft.com/fr-fr/library/system.data.objects.objectstatemanager.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.objects.objectstatemanager.aspx)

来自 ObjectContext 的 ObjectStateManager 并使用状态管理器访问上下文中的对象。

```
ObjectStateManager objectStateManager = context.ObjectStateManager;
    ObjectStateEntry stateEntry = null;

    var order = (from o in context.SalesOrderHeaders
                 where o.SalesOrderID == orderId
                 select o).First();

    // Attempts to retrieve ObjectStateEntry for the given EntityKey.
    bool isPresent = objectStateManager.TryGetObjectStateEntry(((IEntityWithKey)order).EntityKey, out stateEntry);
    if (isPresent)
    {
        Console.WriteLine("The entity was found");
    } 
```

# c - 错误时转储调用堆栈？

> ID：15500339
> 
> 赞同：0
> 
> 时间：2013-03-19T13:04:52.430
> 
> 标签：c, windows, winapi

我正在调试一个用纯 C（没有 C++、MFC、.NET 等）编写的程序到 WIN32API。它必须在 VS2005（在 Win 2K/XP 下运行）和 VS2010（在 Win7 下运行）都编译。我无法复制我的客户似乎能够相当可靠地复制的错误，所以我正在寻找方法让我的程序按原样“调试自身”。它正在监视所有正在更改的键值，但我真正想看到的是值更改时的堆栈转储。哦，如果不在客户的机器上安装编译器，我就无法运行“真正的”调试版本（使用调试库），这不是一个选项，所以这必须内置到我的发布版本中。

除了将我自己的函数进入/退出调用添加到我自己的堆栈监视器之外，还有什么方法可以做到这一点？我特别希望能够在特定内存地址意外更改时设置硬件断点（因此我需要能够在少数预期更改位置周围禁用/启用它。）这可能吗？在 Windows 程序中？

如果可能的话，我更喜欢不需要更改几千行代码的东西。是的，在开发工具方面，我的地位非常低下——我认为自己很幸运拥有 Visual Studio IDE 的专业版。

--edit-- 除了下面提供的出色答案之外，我还在[http://www.codereversing.com/blog/?p=76](http://www.codereversing.com/blog/?p=76)找到了一些关于在您自己的代码中使用硬件断点的信息。我认为它是为了破解其他程序的想法而编写的，但它看起来可能会满足我的需要，允许我在意外位置写入变量时创建一个小型转储。那会很酷而且非常有用，尤其是如果我可以概括它的话。感谢您的回答，现在我要去看看我可以使用所有这些新信息创建什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:20:19.790

您可以使用`MiniDumpWriteDump`创建转储的函数，该转储可用于事后调试。在应用程序崩溃的情况下，您可以`MiniDumpWriteDump`从设置的未处理异常处理程序中调用`SetUnhandledExceptionFilter`。如果你说的bug不是crash，`MiniDumpWriteDump`当检测到一些意外情况时，你可以从程序的任何地方调用。更多关于崩溃转储和事后调试的信息：http: [//www.codeproject.com/Articles/1934/Post-Mortem-Debugging-Your-Application-with-Minidu](http://www.codeproject.com/Articles/1934/Post-Mortem-Debugging-Your-Application-with-Minidu)

该技术的主要思想是将在客户端站点上生成的小型转储文件发送给开发人员，它们可以进行调试 - 线程、堆栈和变量信息可用（由代码优化引起的明显限制）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:16:45.840

dbghelp32.dll 中有一堆 Win32 函数，可用于为给定线程生成堆栈跟踪：有关此示例，请参见此[代码](https://github.com/DavidKinder/Windows-Inform7/blob/master/Inform7/StackTrace.cpp)。

您还可以在 MSDN 上查找 StackWalk64() 和相关函数。

要获得有用的信息，您应该在编译器中为您的发布版本打开 PDB 文件生成：如果您设置安装程序，以便在客户的计算机上 PDB 文件与 DLL 位于同一位置，那么您可以获得带有函数名称等的可理解的堆栈跟踪。没有这些，您将只获得函数的 DLL 名称和十六进制地址。

我不确定设置硬件断点有多实用：您可以编写某种使用 Win32 调试 API 的调试器，但这可能比它的价值更麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T13:37:33.387

如果您可以添加**有限**的检测以在症状再次出现时引发可识别的异常，则可以使用[Process Dumper](http://www.microsoft.com/en-us/download/details.aspx?id=4060)在该异常的任何实例上生成完整的进程转储。

我发现我经常引用这个工具，它对于难以调试的生产问题来说是天赐之物，但似乎鲜为人知。

# sql - 根据条件增加一个值

> ID：15500340
> 
> 赞同：1
> 
> 时间：2013-03-19T13:04:56.043
> 
> 标签：sql, sql-server, database

我有以下问题...

我有一个表`AccountingEntry`，它当前有一个主键，即accounting `ID`。我还有一列告诉我它是哪种类型的条目...

我需要做的是以下...

如果该行是某种类型（假设`CreditCardPayment`，我需要增加另一列的值，假设`CCId`增加一个......我该如何完成这个？？

（只是提醒，不能做表格分离）

这需要在 INSERT 语句中完成......

可以说在我的数据库中我有..

身份证 | 类型 | 另一个 ID
1 | 借方 | -
2 | 信用 | 1
3 | 借方 | -
4 | 信用 | x -> 这需要是最后一个信用 'AnotherID' + 1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:06:16.963

简单`UPDATE`的`WHERE`条件应该在这里完成工作：

```
UPDATE TableName SET CCId = CCId + 1 WHERE Type = 'CreditCardPayment' 
```

*更新*

您可以`INSERT`使用触发器在语句后自动执行此操作：

```
CREATE TRIGGER autoIncrement
ON TableName
AFTER INSERT
AS
    UPDATE
        TableName
    SET
        CCId = -- put your 'get last of that type + 1 here
    WHERE
        Type = 'CreditCardPayment' AND Id = inserted.Id
GO 
```

`-- put your 'get last of that type + 1 here`可以是这样的：

```
SELECT TOP(1) AnotherID FROM TableName WHERE Type = 'CreditCardPayment' ORDER BY AnotherID DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:42:20.683

这是由此产生的触发器......非常适合我需要的东西。在运行脚本以更改我目前为止在我的数据库中的数据后，每次插入记录时，如果它是我需要的类型，它将自动增加字段 InvoiceNumber。

```
CREATE TRIGGER IncrementInvoiceNumber 
       ON  AccountingEntry
       AFTER INSERT
    AS 
    BEGIN
        DECLARE @insertedId INT;
        SELECT TOP(1) @insertedId = IdAccountingEntry FROM AccountingEntry ORDER BY IdAccountingEntry DESC;
        UPDATE AccountingEntry SET InvoiceNumber = ( SELECT TOP(1) InvoiceNumber FROM AccountingEntry
                                                     WHERE AccountEntryType = 'I'
                                                     ORDER BY InvoiceNumber DESC    
                                                    ) + 1
                               WHERE IdAccountingEntry = @insertedId;

    END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:20:41.190

如果您希望运行一次性实例，可以使用 Row_Number() 函数。

```
select rowtype, accountingid, ROW_NUMBER() over(partition by rowtype order by rowtype, accountingid) 
```

这将为您提供按 accountingid 排序的每个行类型的唯一行号。然后，如果您需要数据库中的此信息，您可以使用 select 运行更新或将选定的行放在临时表中并以这种方式更新。

# php - 如何为未登录的用户隐藏 WordPress 中的特定菜单

> ID：15500346
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:05:27.477
> 
> 标签：php, wordpress

由于我是 WordPress 新手，我不知道如何通过检查用户是否登录的会话来显示/隐藏菜单。我将在哪里为此编写逻辑（PHP 代码）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:14:35.717

这不是[is_user_logged_in()](http://codex.wordpress.org/Function_Reference/is_user_logged_in)函数的用途吗？

# c - 我如何在C中的函数中传递参数的数字变量

> ID：15500347
> 
> 赞同：0
> 
> 时间：2013-03-19T13:05:27.557
> 
> 标签：c, function, arguments, variadic-functions

我正在创建一个函数，必须传递至少 2（两个）参数：myStruct 和 value，其他参数是可选的。

这是我的功能示例：

```
int find(struct myStruct *, void * value, ...); 
```

这是所有可能的论点：

```
struct myStruct *, void * value, int (*comparable) (void *, void *), int flag 
```

我相信我将不得不使用 va_list，但我不想将 null 传递给最后一个参数。这个有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:18:55.933

使用可变参数，您至少有以下选项：

*   最后一个参数为 NULL（或可识别为终止符的其他参数）
*   “第一个”参数是函数必须识别的参数数量。
*   第一个参数指定，必须遵循什么（如格式字符串）

但请记住：您（程序员）必须确保您提供正确数量的参数。因此，如果您想从您的函数中创建一个接口（供其他程序员使用），请确保它是故障安全且尽可能自然的。如果是这样，fe 一个多重创建 GUI 函数，一个 gui 元素的 NULL 终止列表会在脑海中浮现。

# bash - 来自 bash 文本文件的 Lotus Notes 部分

> ID：15500348
> 
> 赞同：0
> 
> 时间：2013-03-19T13:05:29.197
> 
> 标签：bash, lotus-notes, mailx

我希望能够使用 mailx 和 cat 从 unix/bash 发送邮件（

例子：

```
cat testMailWithSection.txt | mailx -s "testMail" -r "sender@machine" "destination@company" & 
```

但是，这将是一封很长的邮件，我想将其中的一部分放在一个部分中。仅使用这些工具就可以做到吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:28:54.343

抱歉不行。事实上，以编程方式在代码上创建部分也不是那么容易，但这是唯一的方法。无法将标记从电子邮件正文转换为 Notes 客户端上的部分。

# django - 跨域 CSRF

> ID：15500349
> 
> 赞同：4
> 
> 时间：2013-03-19T13:05:32.010
> 
> 标签：django, csrf

我有两个不同的 django 项目，其中一个位于域 A 上并具有一堆功能（其中包括 REST）。站点 B 很简单，我想将 ajax 表单发布到站点 A，但要保持 csrf 安全。那可能吗？

顺便说一句，如有必要，网站可以共享数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:35:54.860

我有一个类似的问题，我已经设法通过以下方式解决它：

1.  从站点 B 向站点 A 发出 GET 请求以获取表单（带有 csrf 字段）
2.  将表单发布回站点 A。

对我来说，主要问题是让跨站点 ajax 请求正常工作。为了实现这一点，我必须在服务器端正确配置 CORS（我稍微编辑了这个中间件：[https](https://gist.github.com/strogonoff/1369619) ://gist.github.com/strogonoff/1369619 ）并设置`xmlHttp.withCredentials = true`（其中 xmlHttp 是我的 XMLHttpRequest 对象） ajax POST 函数。

我已经在同一个 IP 地址上的两个不同端口上测试了这个解决方案，但我认为它也应该可以跨域工作。

# javascript - Node.js 中的多线程？

> ID：15500352
> 
> 赞同：13
> 
> 时间：2013-03-19T13:05:39.333
> 
> 标签：javascript, multithreading, node.js, azure, socket.io

我正在为 Windows Azure 项目在 node.js 中实现 socket.io。我必须定期向所有连接的客户端发送数据。

我是 node.js 的新手，但我想多线程是不可能的。socket.io 的目的是支持实时应用程序，那么有什么方法可以让我定期向所有连接的客户端连续发送数据，并同时处理客户端发送到 socket.io 服务器的任何数据？

编辑：

这大致是我的socket.io实现

```
var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('first', "connected");

  socket.on('clientData', function (data) {
    //processing the data
  });
});

function requestQueue() {
// some processing
io.sockets.emit('broadcast', recordsQueue);
// should go to sleep for a time period
} 
```

本质上，我希望 requestQueue 方法像线程一样连续运行，它将以特定的时间间隔向连接的客户端发送数据。而且，如果客户端向“clientData”事件发送任何数据，那么我应该能够接收数据并处理它。

关于我该怎么做的任何想法？

谢谢

我的解决方案：

```
 var io = require('socket.io').listen(80);

io.sockets.on('connection', function (socket) {
  socket.emit('first', "connected");

  socket.on('clientData', function (data) {
    //processing the data
  });
});

function requestQueue() {
var sleepTime = 0;

// calcuate sleepTime 

io.sockets.emit('broadcast', recordsQueue);

// should go to sleep for a time period
   if(sleepTime !=0)
   setTimeout(function () { requestQueue() }, sleepTime);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T17:29:29.237

正如其他人所建议的那样，您可以通过使用`setInterval`or`setTimeout`函数定期向连接的客户端发送数据来实现此目的。尽管一切都在同一个控制线程中运行，但所有 I/O 都是异步完成的，因此您的应用程序仍然可以响应。IE，定时器运行时收到的任何数据都会在定时器函数返回后排队处理。

有关更多信息，请参阅node.js 手册中的[计时器](http://nodejs.org/api/timers.html)。

* * *

附带说明一下，您需要让您的 node.js 应用程序专注于近乎实时地处理异步 I/O，因为这是 node.js 的优势所在。如果您需要进行任何繁重的计算，那么您将希望通过简单地对结果发出异步请求，以某种方式将其卸载到另一个线程/进程。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-19T13:13:23.893

你是对的，节点是单线程的。但它大量使用了事件。

您应该采用的策略是侦听连接上的事件，检索数据，当您希望将数据发回时，您会这样做，因为已经发出另一个事件。

如果您查看 socket.io 头版上的示例，您将看到它们如何使用事件来开始处理流。on(eventName, function) 方法是您在 NodeJS 中侦听事件的方式。

如果您希望根据时间做某事（通常是个坏主意），请查看[setInterval](http://nodejs.org/dist/v0.6.19/docs/api/globals.html#globals_setinterval_cb_ms)方法。

服务器

```
 var io = require('socket.io').listen(80);

    io.sockets.on('connection', function (socket) {
      socket.emit('news', { hello: 'world' });
      socket.on('my other event', function (data) {
        console.log(data);
      });
    }); 
```

客户

```
 <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io.connect('http://localhost');
      socket.on('news', function (data) {
        console.log(data);
        socket.emit('my other event', { my: 'data' });
      });
    </script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-23T16:58:05.387

还有一个用于处理线程的 Node.js 库：node-webworker-threads

[https://github.com/audreyt/node-webworker-threads](https://github.com/audreyt/node-webworker-threads)

这基本上实现了node.js的[Web Worker 浏览器 API 。](http://en.wikipedia.org/wiki/Web_worker)

请注意，这不符合 node.js 的单线程哲学，但如果您需要它，它就在那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-18T03:17:32.963

Node.js 中的多线程？

是的..在nodejs中使用npm模块'java4node'是可能的，它这个包一个方法是.multiThreading（tasks，callbacks）这个函数用于以java脚本方式执行多线程

使用此模块链接：[https ://www.npmjs.com/package/java4node](https://www.npmjs.com/package/java4node)

运行推荐

***npm 安装 java4node***

```
var java = require('java4node')

java.multiThreading({
           one: function(callback,parameters) {
               console.log("function one is running independently");
               callback()
           },
           two: function(callback,parameters) {
                console.log("function two is running independently");
               callback()
           },
           three: function(callback,parameters) {
                console.log("function three is running independently");
               callback()
           }
       }, function(err, results) {
           callback(err, results)
       }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-10T08:42:26.007

您在 setInterval 等中定义的逻辑不会在单独的线程中工作并最终阻塞主线程。假设有 1000 个用户，您调用 setTimeout 等 1000 次，最终他们将运行并花费宝贵的时间。只有最终的 IO 操作是非阻塞的！

您可以考虑在 node.js 中研究[nodeJX的多线程](http://nodejx.com)

# javascript - 脚本或 CSS 将所有大写的单词加粗

> ID：15500354
> 
> 赞同：0
> 
> 时间：2013-03-19T13:05:40.697
> 
> 标签：javascript, html, css

我有点n00b，但我试图找出一种快速浏览我的html并`<strong>`在所有大写单词上放置标签的方法。这可以通过 CSS 完成还是必须是 JavaScript？无论哪种方式，方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:18:56.560

获取元素的内容（在我的示例中为普通 div），并使用正则表达式搜索大写的单词。

```
var div = document.querySelector("div");
var html = div.innerHTML;
html = html.replace(/(\b[A-Z]{2,}\b)/g,"<strong>$1</strong>");
div.innerHTML = html; 
```

关键点是字符类`[A-Z]`，它只接受包含在单词边框中的大写字母`\b`。

[的文档`replace`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)。

[例子](http://jsfiddle.net/gLj8V/1/)

# objective-c - 如何从彩色图像动画到灰色图像？

> ID：15500355
> 
> 赞同：3
> 
> 时间：2013-03-19T13:05:41.073
> 
> 标签：objective-c

我正在制作带有彩色图像的应用程序封面。我想让这个图像变成灰色的动画。

我用 NYXImagesKit 创建了一个灰度图像。但我不知道如何使用 UIImage 在这两个图像之间制作动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:11:06.723

1：创建两个具有相同框架的图像视图。

2：将它们作为子视图添加到同一个父视图中，一个在另一个之上。

3：将它们的`image`属性分别设置为彩色和灰度图像。

4：将`alpha`包含彩色图像的图像视图的属性设置为`1.0`，并将此属性设置`0.0`为另一个（显示灰度图像的）。

5：然后只是淡入淡出两个图像视图反平行：

```
[UIView animateWithDuration:1.0 animations:^{
    grayscaleImageView.alpha = 1.0;
    coloredImageView.alpha = 0.0;
}]; 
```

# asp.net - 如何集成 ASP.NET 线程模型和 ZeroMQ 套接字？

> ID：15500357
> 
> 赞同：2
> 
> 时间：2013-03-19T13:05:42.430
> 
> 标签：asp.net, multithreading, iis-7, zeromq

我正在构建一个 ASP.NET 服务（一个简单的 aspx），它需要对 ZeroMQ REP 节点进行 REQ 调用。

所以我必须使用 REQ/REP 模式，但我无法找出在 ASP.NET 管道中初始化 ZeroMQ 上下文的正确方法。

此外，我可以在不同的 ASP.NET 线程之间共享一个连接吗？如果可以，如何？

**编辑**：经过一些研究，在我看来，专用线程中的[inproc路由器](http://zguide.zeromq.org/page%3aall#Shared-Queue-DEALER-and-ROUTER-sockets)应该是可行的方法，因为它可以处理sincronization。

但更多的问题出现了：

1.  这种inproc节点的另一端应该是DEALER？如果是这样，它应该连接到 REQ 节点吗？或者它应该绑定到一个 tcp 端口，我应该编写 REP 服务器节点来连接它（后者会有点麻烦，因为我可以让不同的服务器公开服务）？
2.  作为替代方案，在一端构建一个绑定到 ROUTER 套接字的 inproc 节点并在另一端与 REQ 连接是否正确？如果是这样，我是否应该对节点进行编码，以便它处理每条消息的手动信封，以便能够将响应发送回正确的请求线程？
3.  Application_Start 是正确的管道点来初始化处理此类路由器的线程吗？

目前，连接到 REQ 服务器的 ROUTER/DEALER inproc 节点看起来是最好的选择，但我不确定是否可以从 DEALER 套接字**连接。**但这仍然只是一种猜测，可能是完全错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:34:53.120

zmq_socket[手册](http://api.zeromq.org/2-1%3azmq-socket)指出：

> ØMQ 套接字不是线程安全的。应用程序不得使用来自多个线程的套接字，除非将套接字从一个线程迁移到另一个具有“全栅栏”内存屏障的线程。

# delphi - 双击禁用表单最大化

> ID：15500361
> 
> 赞同：1
> 
> 时间：2013-03-19T13:05:56.353
> 
> 标签：delphi, resize

我希望在用户调整表单大小时按比例调整表单大小。我`OnCanResize`使用以下代码在事件中完成了此操作：

```
NewHeight := Round(Height / Width* NewWidth); 
```

为了防止用户通过单击最大化按钮来最大化表单，我设法禁用它`WMSysCommand`使用以下代码处理消息：

```
if (AMsg.CmdType = SC_MAXIMIZE) then MessageBeep(0); 
```

我没有设法做的是防止用户双击标题栏时最大化表单。有没有办法在德尔福做到这一点？

我希望很清楚我不想阻止用户调整表单的大小。我只想在单击最大化按钮并双击标题栏时防止调整大小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T13:16:49.487

首先，删除您在`WM_SYSCOMMAND`消息处理程序中使用的解决方法，然后[`biMaximize`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TBorderIcons)从表单的属性中删除选项，[`BorderIcons`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TCustomForm.BorderIcons)或者换句话说，通过`BorderIcons.biMaximize`在 Object Inspector 中将 False 设置为 False，您将获得最大化按钮以及表单标题双击最大化禁用。

在运行时，您可以简单地使用：

```
BorderIcons := BorderIcons - [biMaximize] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T13:19:03.250

@TLama 的明显[答案](https://stackoverflow.com/a/15500599/937125)的替代方案：

```
SetWindowLong(Handle, GWL_STYLE, 
  GetWindowLong(Handle, GWL_STYLE) and not WS_MAXIMIZEBOX); 
```

与设置相反`BorderIcons`，这不会强制重新创建窗口句柄（不会调用`RecreateWnd`）。这在动态切​​换/更改窗口样式而不丢失窗口状态/句柄时可能很有用。

# php - 我需要做些什么来允许 IIS 上的 php 中的备用逻辑语法吗

> ID：15500369
> 
> 赞同：0
> 
> 时间：2013-03-19T13:06:20.210
> 
> 标签：php, iis

我遇到了一个奇怪的问题，让 PHP 脚本在 IIS 上工作。在我的脚本中，我使用了替代逻辑语法：

```
<?php
     if ($a == 5):
         echo "a equals 5";
         echo "...";
     elseif ($a == 6):
         echo "a equals 6";
         echo "!!!";
     else:
         echo "a is neither 5 nor 6";
         endif;
?> 
```

现在我发现这会导致“500 服务器错误”消息，直到我将语法更改为：

```
 if($a==5){
         echo "a equals 5";
    } 
```

我必须在 IIS 上做些什么来打开 if/elseif/else 的替代语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:10:37.820

当您在 IIS 的生产环境中时，通常会触发 500 服务器错误，并且它会触发任何错误。

在这种情况下，我在开发模式下测试了您的代码，它告诉我“未定义的变量：a”

我设置`$a = 6;`并且您的代码运行良好。我在 IIS7/PHP 5.4.13

如果您想查看错误，您可以：

*   在 IIS manager > your pool > PHP Management 上，您可以将环境更改为开发。

*   更改 php.ini 并根据需要设置 error_reporting，并将 display_errors 设置为 On。

*   在运行时：将其添加到脚本的开头：`error_reporting(E_ALL)`和`ini_set('display_errors', 'On')`

# html - 如何保持 和之外 对齐

> ID：15500373
> 
> 赞同：0
> 
> 时间：2013-03-19T13:06:26.933
> 
> 标签：html, css

我有以下 CSS 代码：

```
.blackbox {
    background: black;
    width: 17px;
    height: 18px;
    line-height: 18px;
    text-align: center;
} 
```

在我的 HTML 文件中，我调用以下内容。

```
<div class="blackbox">
  10
</div>
<img src="icon-local.png">
<img src="icon-national.png"> 
```

如何将通过 CSS 调用呈现的框和通过 img 标签调用的图像保持在同一水平线上？

目标是创建一个看起来与此类似的东西，但 CSS 框位于其他图标的前面。示例图像：[示例图像](http://i.imgur.com/yr1H2tH.png)

提前致谢！

肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:10:36.853

您可以使用`display:inline-block`或`display:table`。

```
<div class="parent">
    <div class="blackbox">10</div>
    <img src="icon-local.png" />
    <img src="icon-national.png" />
</div> 
```

和CSS

```
.parent div, .parent img {
    display:inline-block;
    *display:inline; /* IE7 hack */
    zoom:1 /* IE7 */
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:09:23.663

制作你的黑盒类`inline`或`inline-block`：

```
.blackbox {
    display:inline-block;
    background: black;
    width: 17px;
    height: 18px;
    line-height: 18px;
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:09:37.790

元素的默认显示`<div>`是“块”（也就是说，它在它之前和之后添加一个换行符）所以你可以使用：

```
.blackbox {
    background: black;
    width: 17px;
    height: 18px;
    line-height: 18px;
    text-align: center;
    display: inline;
} 
```

注意`display: inline;`

此外，`display: inline-block;`在许多情况下也很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:13:59.437

您需要定义`div`as`display:inline-block`并将图像向左浮动，以便获得与示例图像相同的结果。如果您更改 HTML 并将图像放在 div 之前，则可以避免浮动图像。看这个演示：http: [//jsfiddle.net/G5Q4k/1/](http://jsfiddle.net/G5Q4k/1/)

# matlab - 在matlab中绘制excel数据

> ID：15500386
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:07:04.707
> 
> 标签：matlab

好的，所以我已经在 Excel 电子表格上编译并完成了给定数据的计算。现在，因为数据太大，我想用matlab来绘制它。因此，我将每个数据集从 1-10 中分离出来，并将它们保存为文件夹中的 txt 文件。我想使用代码将一些列分配到第 1 列和第 2 列等等，例如从第 2 组开始，然后绘制它们。我应该如何处理它？我目前正在使用“importdata”代码。如何选择我特别需要的列？这是我到目前为止的示例：

```
set2=importdata(file2.txt)

column3=set2(?) (say i need column 3)

column4=set2(?)  (say i need column 4)

plot(column3,column4) 
```

我不擅长matlab。我想要一些帮助。谢谢

```
set2 data saved as file2

350 1.2 858  0.02   1300        
550 1.4 721  0.02   1300            
650 1.8 673  0.02   1300                
750 2.2 600  0.01   1300 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:52:38.510

请注意，您可以只使用 MATLAB 的内置 xlsread() 函数来读取数据，而不是保存到文本文件然后加载。提取列仍然与以前的发布者的答案相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:24:14.100

利用

```
 column2 = set2(:,2)
 column3 = set2(:,3) 
```

ETC

# c++ - ct_param 非法值 0

> ID：15500387
> 
> 赞同：1
> 
> 时间：2013-03-19T13:07:06.273
> 
> 标签：c++, sybase

我正在使用带有 CS_VERSION_100 的 sybase 15/12.5

当我尝试使用 ct_param 时出现错误：

```
An illegal value of 0 was placed in the status field of the CS_DATAFMT structure. 
```

但是，我创建了我的结构。

```
CS_DATAFMT datafmt;
strcpy(datafmt.name, "@interface");
datafmt.namelen = 11;
datafmt.datatype=CS_INT_TYPE;
datafmt.maxlength=4;
datafmt.status=CS_INPUTVALUE;
datafmt.locale = NULL;
datafmt.format = 0;
datafmt.scale = -99999;
datafmt.count = 1;
datafmt.usertype=0;

ct_param(command, &datafmt, /* value 300 */, 4, 0) 
```

当我使用 varchar 执行此操作时，它返回 1（真），但它当然告诉我我正在尝试将 varchar 参数放在 int 参数的位置。我更改为上一个版本，现在似乎 sybase 从 maxlength 获取状态值。现在它告诉我该值为 4。如果我将 maxlength 更改为 256，它可以工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:17:35.060

看起来您正在设置一个返回变量 - 根据[The Fine Manual](http://manuals.sybase.com/onlinebooks/group-cnarc/cng1110e/ctref/@Generic__BookTextView/47625;hf=0;pt=47755#X) ，您需要使用 CS_RETURN 作为 datafmt.status，而不是 CS_INPUTVALUE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:10:15.283

问题是，我正在为 64 位编译，并且每个 64 位的 sybase 程序都需要一个 -DSYB_LP64。然后我用 64 位编译，但 sybase 类型是 32 位，然后结构就乱了。

# django - django-dynamic-formset 和 django-autocomplete-light - 自动完成不适用于新行

> ID：15500392
> 
> 赞同：0
> 
> 时间：2013-03-19T13:07:18.140
> 
> 标签：django, formset, django-autocomplete-light

我将自动完成光与 django-dynamic-formset 一起使用。对于动态添加的行，自动完成不起作用 - 它显示带有自动完成的弹出窗口，但将其粘贴到最后一个静态创建的行。如果我选择列表中的项目 - 它会将值插入最后一个静态创建的行，而不是当前行。对于静态创建的表单集 autocomplete-light 效果很好。

这是我的表单和表单集：

```
class MassSvidForm(forms.Form):
    num = CharField(label=u'Номер', required=True)
    kod_num = CharField(
                widget=autocomplete_light.TextWidget('KodZvtKod'))
    zvt_type = CharField(ZVTType.objects.all(),
            widget=autocomplete_light.TextWidget('ZVTTypeAutocomplete'))

    zvt_name = CharField(ZVTName.objects.all(),
            widget=autocomplete_light.TextWidget('ZVTNameAutocomplete'))

SvidFormset = formset_factory(
                            extra=0,
                            form=MassSvidForm,
                            can_delete=True,
                            )

svid_formset = SvidFormset(request.POST or None,
                           initial=[{
                                'template': tmpl.id,
                                'kod_num': tmpl.reservednumber.kod_zvt.kod,
                                },],
                           ) 
```

这是我的 js formset 创建：

```
<script type="text/javascript">
    $(function() {
        $('#massForm tbody tr').formset({
            prefix: '{{ formset.prefix }}',
            added: (function(row) {
                $(row.find('.autocomplete-light-text-widget')).each(function() {
                    $(this).trigger('initialize');
                })
            })
        });
    })
</script> 
```

我使用 Django 1.5、django-dynamic-formset 1.2、autocomplete-light 1.1.23

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:33:51.727

感谢您的帮助，这已在 1.1.26 中修复。

# c# - 将某些像素的 alpha 设置为零

> ID：15500393
> 
> 赞同：1
> 
> 时间：2013-03-19T13:07:19.440
> 
> 标签：c#, xamarin.ios, uiimage, alpha, cgimage

假设我有 2 张图像，一张在另一张之上。我想将顶部图像像素的 alpha 值的一部分设置为零，所以我得到了如下所示的效果：

![](../Images/9854bd2ee7c649c0055e019fd62d1fe6.png)

棕色是顶部图像，蓝色水是底部图像。最终，我要做的是让顶部图像像素的 alpha 通道在用户触摸 iPad 屏幕时变为零，这样他们基本上可以用指尖绘图并出现蓝色水图像。

我有一个函数可以检查图像，计算它的 alpha 等于 0 的像素。我还有一个将像素的 alpha 设置为零的函数，但我认为它不起作用。 **我可以读取 alpha 值，并设置 alpha 值。然后我可以重新读取 alpha 值以确认它已设置。但是当我设置新图像时，我看不出有什么不同！**

这是我的示例项目的保管箱链接：

[https://www.dropbox.com/s/e93hzxl5ru5wnss/TestAlpha.zip](https://www.dropbox.com/s/e93hzxl5ru5wnss/TestAlpha.zip)

以下是来源：

```
 Water = new UIImageView(this.Bounds);
        Water_OriginalImage = UIImage.FromFile("Media/Images/Backgrounds/WaterTexture.png");
        Water.Image = Water_OriginalImage;
        this.AddSubview(Water);

        Dirt = new UIImageView(this.Bounds);
        Dirt_ModifiableImage = UIImage.FromFile("Media/Images/Backgrounds/DirtBackground.png");
        Dirt.Image = null;
        this.AddSubview(Dirt);

        CGImage image = Dirt_ModifiableImage.CGImage;
        int width = image.Width;
        int height = image.Height;
        CGColorSpace colorSpace = image.ColorSpace;
        int bytesPerRow = image.BytesPerRow;
        int bitmapByteCount = bytesPerRow * height;
        int bitsPerComponent = image.BitsPerComponent;
        CGImageAlphaInfo alphaInfo = image.AlphaInfo;

        // Allocate memory because the BitmapData is unmanaged
        IntPtr BitmapData = Marshal.AllocHGlobal(bitmapByteCount);

        CGBitmapContext context = new CGBitmapContext(BitmapData, width, height, bitsPerComponent, bytesPerRow, colorSpace, alphaInfo);
        context.SetBlendMode(CGBlendMode.Copy);
        context.DrawImage(new RectangleF(0, 0, width, height), image);

        // Console output from this function call says "alpha count = 0"
        CountZeroedAlphas(BitmapData, Dirt_ModifiableImage);

        RemoveSomeAlpha(BitmapData, Dirt_ModifiableImage);

        // Console output from this function call says "alpha count = 2000".  So it seems that I have set the alpha of 2000 pixels to zero...
        CountZeroedAlphas(BitmapData, Dirt_ModifiableImage);

        // Set the Dirt Image equal to the context image, but I still see all top image, I dont' see any bottom image showing through.  
        Dirt.Image = UIImage.FromImage (context.ToImage());

        // Free memory used by the BitmapData now that we're finished
        Marshal.FreeHGlobal(BitmapData);

    public void CountZeroedAlphas( IntPtr bitmapData, UIImage Image )
    {
        int widthIndex = 0;
        int heightIndex = 0;
        int count = 0;

        while ( widthIndex < Image.Size.Width )
        {
            while ( heightIndex < Image.Size.Height )
            {
                PointF point = new PointF(widthIndex, heightIndex);
                var startByte = (int) ((point.Y * Image.Size.Width + point.X) * 4);
                byte alpha = GetByte(startByte, bitmapData);

                if ( alpha == 0 )
                    count++;

                heightIndex++;
            }

            widthIndex++;
        }

        Console.WriteLine("alpha count = " + count);

    }

    public void RemoveSomeAlpha( IntPtr bitmapData, UIImage Image )
    {
        int widthIndex = 0;
        int heightIndex = 0;

        while ( widthIndex < Image.Size.Width )
        {
            while ( heightIndex < Image.Size.Height )
            {
                PointF point = new PointF(widthIndex, heightIndex);
                var startByte = (int) ((point.Y * Image.Size.Width + point.X) * 4);
                ZeroByte(startByte, bitmapData);

                heightIndex++;
            }

            widthIndex++;
        }

    }

    public unsafe byte GetByte(int offset, IntPtr buffer)
    {
        byte* bufferAsBytes = (byte*) buffer;
        return bufferAsBytes[offset];
    }

    public unsafe void ZeroByte(int offset, IntPtr buffer)
    {
        byte* bufferAsBytes = (byte*) buffer;
        bufferAsBytes[offset] = 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:29:52.727

得到它的工作！我不确定到底是什么问题（假设我在意外或其他情况下访问了错误的字节），但我有工作代码。

[这](https://stackoverflow.com/questions/448125/how-to-get-pixel-data-from-a-uiimage-cocoa-touch-or-cgimage-core-graphics)非常有用：

```
 // Create layers of matter on the battlefield.  Example:  Grass, dirt, water
        Water = new UIImageView(UIScreen.MainScreen.Bounds);
        Water_OriginalImage = UIImage.FromFile("WaterTexture.png");
        Water.Image = Water_OriginalImage;
        this.View.AddSubview(Water);

        Dirt = new UIImageView(UIScreen.MainScreen.Bounds);
        Dirt_ModifiableImage = UIImage.FromFile("DirtBackground.png");
        Dirt.Image = null;
        this.View.AddSubview(Dirt);

        CGImage image = Dirt_ModifiableImage.CGImage;
        int width = image.Width;
        int height = image.Height;
        CGColorSpace colorSpace = image.ColorSpace;
        int bytesPerRow = image.BytesPerRow;
        // int bytesPerPixel = 4;
        int bytesPerPixel = bytesPerRow / width;
        int bitmapByteCount = bytesPerRow * height;
        int bitsPerComponent = image.BitsPerComponent;
        CGImageAlphaInfo alphaInfo = image.AlphaInfo;

        // Allocate memory because the BitmapData is unmanaged
        IntPtr BitmapData = Marshal.AllocHGlobal(bitmapByteCount);

        CGBitmapContext context = new CGBitmapContext(BitmapData, width, height, bitsPerComponent, bytesPerRow, colorSpace, alphaInfo);
        context.SetBlendMode(CGBlendMode.Copy);
        context.DrawImage(new RectangleF(0, 0, width, height), image);

        int tempX = 0;

        while ( tempX < Dirt_ModifiableImage.Size.Width )
        {
            int tempY = 0;
            while ( tempY < Dirt_ModifiableImage.Size.Height )
            {
                int byteIndex = (bytesPerRow * tempY) + tempX * bytesPerPixel;

                ZeroByte(byteIndex+3, BitmapData);

                byte red = GetByte(byteIndex, BitmapData);
                byte green = GetByte(byteIndex+1, BitmapData);
                byte blue = GetByte(byteIndex+2, BitmapData);
                byte alpha = GetByte(byteIndex+3, BitmapData);

                //Console.WriteLine("red = " + red + " green = " + green + " blue = " + blue + " alpha = " + alpha);

                tempY++;
            }
            tempX++;
        }

            NSData newImageData = NSData.FromBytes(BitmapData, (uint)(bitmapByteCount));
            Dirt.Image = UIImage.LoadFromData(newImageData); 
```

# wpf - C#混合使用Task和Dispatcher.Invoke，为什么会停止？

> ID：15500398
> 
> 赞同：6
> 
> 时间：2013-03-19T13:07:28.920
> 
> 标签：wpf, task, dispatcher

我尝试了以下片段：

```
 public Task RunUiTask(Action action)
    {
        var task = Task.Factory.StartNew(() =>
        {
            Dispatcher.Invoke(DispatcherPriority.Background, action);
        });
        return task;
    }

    private void OnCreateTask(object sender, RoutedEventArgs e)
    {
        var task = RunUiTask(() =>
            {
                for(int i=0;i<10;i++)
                {
                    ResultTextBlock.Text += i.ToString();
                }
            });
        task.Wait();                        //(a) Program stopped here
        ResultTextBlock.Text += "Finished"; //(b) Never called;
    } 
```

我不明白为什么，当调用 OnCreateTask（按钮单击事件处理程序）时，程序会在 (a) 处停止，而 (b) 永远不会被调用。

注意：我知道我可以使用 Dispatcher.BeginInvoke 使程序响应，但这不是我关心的问题。

任何人都可以说出为什么程序在 (a) 处停止，以及为什么 (b) 从未被调用吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T13:14:07.407

的呼唤

```
Dispatcher.Invoke(DispatcherPriority.Background, action); 
```

将`Action`在您的 UI 线程中执行，并在`Action`执行后返回。问题是，您的 UI Thead 由于`task.Wait()`您`OnCreateTask`的 .

**编辑**

而不是你的，`task.Wait()`你应该使用延续和更新`ResultTextBlock.Text`

```
task.ContinueWith(t=>{
     ResultTextBlock.Text += "Finished";
}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

# out-of-memory - SqlCommand ExecuteNonQuery 抛出 OutOfMemoryException

> ID：15500399
> 
> 赞同：2
> 
> 时间：2013-03-19T13:07:29.560
> 
> 标签：out-of-memory, sqlcommand, executenonquery

我在执行 Sql 时遇到问题，这实际上是对 SqlServer 存储过程的简单调用。

考虑下面的 Sql 存储过程：

```
 CREATE PROCEDURE InfiniteLoop
    AS
    BEGIN
        DECLARE @ixi NUMERIC(38) = 0
        DECLARE @i NUMERIC(38) = 0
        WHILE 1 = 1
        BEGIN
           SET @i = @i + 1
           SET @ixi = @ixi * @i
           PRINT N'some text'
        END
    END; 
```

现在我以这种方式从 C# 调用此过程：

```
public void CallProcedure()
{
   SqlCommand cmd = this._connection.CreateCommand();
   cmd.CommandType = CommandType.StoredProcedure;
   command.CommandText = 'InfiniteLoop';

   //Line below throws OutOfMemoryException
   cmd.ExecuteNonQuery();

   cmd.Dispose();
} 
```

内存开始快速增长。几秒钟后抛出异常。通常所有这些代码都使用“try/catch”和“using”部分，但我已经简化了这个代码段以表明问题来自 SqlClient 库而不是直接来自我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T07:14:20.090

经过更多研究，我找到了如何停止 OutOfMemoryException 并采取预期 TimeoutException 的解决方案。

由于存储过程中使用了 PRINT，因此这种情况下的内存正在增长。驱动程序默认从数据库收集输出。因此，如果用户没有阅读此内容，则可能会发生 OutOfMemoryException。

根据您想要的结果，可以使用两种解决方案。

当数据库输出对您不重要并且您期望在执行需要很长时间时出现超时时，第一个很好。下面的片段以这种方式解决了问题：

```
public void CallProcedure()
{
   // Line below release all Errors/PRINT output from command. Command is now
   // not collecting them, so memory is not growing. 
   // CommandTimeout will be thrown after preset value on command object.
   this._connection.FireInfoMessageEventOnUserErrors = true;

   SqlCommand cmd = this._connection.CreateCommand();
   cmd.CommandTimeout = 15;
   cmd.CommandType = CommandType.StoredProcedure;
   command.CommandText = 'InfiniteLoop';

   //Line below throws OutOfMemoryException
   cmd.ExecuteNonQuery();

   cmd.Dispose();
} 
```

第二个是goog，当您想要执行可能需要大量时间的真正耗时的程序时。永远不会发生超时异常。要启用此行为，您需要在 SqlConnection 中的 InfoMessage 上附加 SqlInfoMessageEventHandler。请参见下面的片段：

```
public void CallProcedure()
{
   // By attaching this event no Timeout exception on ExecuteNonQuery occur
   // Your ExecuteNonQuery can hang infinitly!
   // If you need Timeout then you need to write you own handler from different thread
   this._connection.InfoMessage += new SqlInfoMessageEventHandler(OnInfoMessage);

   // Line below release all Errors/PRINT output from command. Command is now
   // not collecting them so memory is not growing.
   this._connection.FireInfoMessageEventOnUserErrors = true;

   SqlCommand cmd = this._connection.CreateCommand();

   // In this case Timeout will never occur
   cmd.CommandTimeout = 15;
   cmd.CommandType = CommandType.StoredProcedure;
   command.CommandText = 'InfiniteLoop';

   //Line below throws OutOfMemoryException
   cmd.ExecuteNonQuery();

   cmd.Dispose();

   this._connection.InfoMessage -= new SqlInfoMessageEventHandler(OnInfoMessage);
}

void OnInfoMessage(object sender, SqlInfoMessageEventArgs e)
{
   System.Diagnostics.Debug.WriteLine(DateTime.Now.ToString()+": "+ e.Message);
} 
```

# jquery - 图例和 google vis 之间的差距。图表

> ID：15500400
> 
> 赞同：3
> 
> 时间：2013-03-19T13:07:33.630
> 
> 标签：jquery, css, margin, google-visualization

我有一个谷歌可视化图表和图表顶部该图表的图例。

这些是我的图表选项：

```
var chartOptions ={
    width: 700, height: 500,
    chartArea: {width: '80%', height: '80%', top:20},
    legend: {position: 'top'},
    titlePosition: 'in', 
    axisTitlesPosition: 'in',
    hAxis: {showTextEvery: '1', textPosition: 'out'}, 
    vAxis: {textPosition: 'out'}    
} 
```

我想知道是否有办法设置图例和图表之间的边距，或者我可能通过设置这些选项搞砸了。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:41:02.877

我自己发现了问题。

在努力使图表最大化的过程中，我将属性 top 设置为 chartArea 的 20。当我删除此属性时，问题就解决了。

最大化图表的解决方案是将主题设置为“最大化”，如 google api 中所述，或者如果您没有任何外部标签或图例，则将图表区域的宽度和高度设置为 100%。

选项 var 的最终代码是：

```
var options ={
        width: 700, height: 500,
        chartArea: {width: '80%', height: '75%'},
        legend: {position: 'top'},
        titlePosition: 'in', axisTitlesPosition: 'in',
        hAxis: {showTextEvery: '1', textPosition: 'out'}, 
        vAxis: {textPosition: 'out'}
} 
```

# html - a:hover 图片溢出问题

> ID：15500403
> 
> 赞同：0
> 
> 时间：2013-03-19T13:07:46.820
> 
> 标签：html, css, hyperlink, hover

我正在创建悬停效果，以便当有人将鼠标悬停在图像上时出现扫描线，但无法让该死的叠加图像与图像大小相同。

看看这个小提琴：http: [//jsfiddle.net/number8pie/wwmPL/](http://jsfiddle.net/number8pie/wwmPL/)

这是HTML：

```
<div class="container">
 <a href="#">
  <div class="overlay"></div>        
  <img src="http://www.mainlymunros.co.uk/images/green%20square.bmp" repeat>
 </a>
</div> 
```

这是CSS：

```
.container {
  position: relative;
  max-width: 200px;
}
img {
  width: 100%;
  position: relative;
  z-index: 1;
  padding: 7px;
  border: 1px solid #333;
}
.overlay {
  display: none;
  position: absolute;
  z-index: 5;
  width: 100%;
  height: 100%;
  margin: 8px;
  background: url(https://dl.dropbox.com/u/29825082/scanlines.png) repeat;
}

a:hover .overlay {
  display: block;
} 
```

如果您将鼠标悬停在绿色块上，您可以看到底部的扫描线重叠，我想删除这种重叠。

图像是动态的，并且会根据浏览器大小的大小而改变大小。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:22:06.850

问题是你给了它 100% 的高度和 100% 的宽度，但是你给了它边距。你告诉它是它包含`a`元素的确切大小，然后将它向下推一点。

您需要添加一个额外的容器，删除图像的填充和边框并将其分配给新容器。

```
<a href="#">
    <div class="image">
        <div class="overlay"></div>        
        <img src="http://www.mainlymunros.co.uk/images/green%20square.bmp"/>
    </div>
</a>

.container a { 
    display:block;
    padding:7px;
    border: 1px solid #333;
}
.image {
    position:relative;
    width:100%;
    height:100%;
    display:block;
}
img {
    width: 100%;
    position: relative;
    z-index: 1;
}
.overlay {
    display: none;
    position:absolute;
    z-index: 5;
    width: 100%;
    height: 100%;
    background: url(https://dl.dropbox.com/u/29825082/scanlines.png) repeat;
} 
```

示例：[JSFiddle](http://jsfiddle.net/wwmPL/4/)。

你现在的问题是你`img` **的不是 square**。作为一个宽度大于高度的矩形图像意味着它将填充 100% 的宽度，但会切断部分高度。使您的图像成为正方形或使您的叠加层具有相同的纵横比，这将完美地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:14:52.227

它的填充属性会产生溢出。所以改变图像和 .overlay 的高度

那会的。

```
 fiddle :http://jsfiddle.net/wwmPL/2/ 
```

我希望这能解决你的问题:)

# c# - 将所有选定（选中）TreeNodes 从一个树视图复制到另一个（包括未选中的父级）C#

> ID：15500405
> 
> 赞同：0
> 
> 时间：2013-03-19T13:07:47.473
> 
> 标签：c#, recursion, treeview, treenode

我在左侧创建了一个目录和文件浏览器 TreeView。我希望用户能够浏览树并检查他们想要移动到另一个树视图的文件和目录。

另一个 TreeView 是我在网上找到的一个名为 TreeViewColumn 的用户控件。我将使用该控件来允许用户将其他数据（类别、属性）添加到选定的文件和文件夹中。

我遇到的麻烦是双重的，我需要递归地添加所有孩子（我可以弄清楚），但我需要将未经检查的父母添加到已检查的孩子（以保留层次结构）。

```
 private void IterateTreeNodes(TreeNode originalNode, TreeNode rootNode)
    {
        //Take the node passed through and loop through all children
        foreach (TreeNode childNode in originalNode.Nodes)
        {
            // Create a new instance of the node, will need to add it to the recursion as a root item 
            // AND if checked it needs to get added to the new TreeView.
            TreeNode newNode = new TreeNode(childNode.Text);
            newNode.Tag = childNode.Tag;
            newNode.Name = childNode.Name;
            newNode.Checked = childNode.Checked;
            if (childNode.Checked)
            {
                // Now we know this is checked, but what if the parent of this item was NOT checked. 
                //We need to head back up the tree to find the first parent that exists in the tree and add the hierarchy.
                if (tvSelectedItems.TreeView.Nodes.ContainsKey(rootNode.Name)) // Means the parent exist?
                {

                    tvSelectedItems.TreeView.SelectedNode = rootNode;
                    tvSelectedItems.TreeView.SelectedNode.Nodes.Add(newNode);
                }
                else
                {
                    AddParents(childNode);

                    // Find the parent(s) and add them to the tree with their CheckState matching the original node's state
                    // When all parents have been added, add the current item.
                }
            }
            IterateTreeNodes(childNode, newNode);
        }

    }

    private TreeNode AddParents(TreeNode node)
    {
        if (node.Parent != null)
        {
            //tvDirectory.Nodes.Find(node.Name, false);
        }
        return null;
    } 
```

任何人都可以帮助使用此代码，以便它递归地添加检查节点（及其父节点，无论检查状态如何）。我需要维护目录层次结构。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:51:24.580

一个相当（不太干净和不喜欢）的解决方案可能是首先克隆树，然后删除未检查的分支。

否则，当你添加一个节点时，编写一个递归方法来遍历节点的父节点，直到你找到根节点。并且通过检查 childNode.parent 是否已经存在来简单地优化它，只需忽略分支并继续前进。即回溯到根节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:40:12.310

我让它工作了。我已经知道@Yahya 在说什么，我希望有一种更简单/更好的方法。

下面的代码肯定不是最佳的，我将继续改进它，但此时它正在查看左侧的树视图并将所有选中的项目（及其父项 - 无论 CheckedState ）复制到树视图上对。

希望这对某人有所帮助，并感谢您回答@Yahya。我对改进持开放态度，但请记住，这是一次性使用的实用程序。

```
 private void cmdMoveRight_Click(object sender, EventArgs e)
    {
        tvSelectedItems.TreeView.Nodes.Clear();
        // Traverse first level Tree Nodes
        foreach (TreeNode originalNode in tvDirectory.Nodes)
        {

            TreeNode newNode = new TreeNode(originalNode.Text);
            newNode.Name = originalNode.Name;
            newNode.Tag = originalNode.Tag;
            newNode.Checked = originalNode.Checked;

            //Only add to the new treeview if the node is checked
            if (originalNode.Checked)
            {
                tvSelectedItems.TreeView.Nodes.Find(originalNode.Parent.Name,true)[0].Nodes.Add(newNode);
            }
            //Start recursion - this will be called for each first level node - there should technically only be 1 "ROOT" node.
            IterateTreeNodes(originalNode, newNode);
        }

    }

    private void IterateTreeNodes(TreeNode originalNode, TreeNode rootNode)
    {
        //Take the node passed through and loop through all children
        foreach (TreeNode childNode in originalNode.Nodes)
        {
            // Create a new instance of the node, will need to add it to the recursion as a root item 
            // AND if checked it needs to get added to the new TreeView.
            TreeNode newNode = new TreeNode(childNode.Text);
            newNode.Tag = childNode.Tag;
            newNode.Name = childNode.Name;
            newNode.Checked = childNode.Checked;
            if (childNode.Checked)
            {
                // Now we know this is checked, but what if the parent of this item was NOT checked. 
                //We need to head back up the tree to find the first parent that exists in the tree and add the hierarchy.
                  TreeNode[] nodestest = tvSelectedItems.TreeView.Nodes.Find(childNode.Parent.Name, true);
                  if (nodestest.Length > 0)
                  {
                      tvSelectedItems.TreeView.Nodes.Find(childNode.Parent.Name,true)[0].Nodes.Add(newNode);
                  }
                  else
                  {
                      AddParents(childNode);// Find the parent(s) and add them to the tree with their CheckState matching the original node's state

                  }
            }
            //recurse
            IterateTreeNodes(childNode, newNode);
        }

    }

    private void AddParents(TreeNode node)
    {

        if (node.Parent != null)// Check if parent is null (would mean we're looking at the root item
        {
            TreeNode[] nodestest = tvSelectedItems.TreeView.Nodes.Find(node.Parent.Name, true);
            if (nodestest.Length > 0)
            {

                TreeNode[] nodes = tvDirectory.Nodes.Find(node.Name, true);
                TreeNode newNode = new TreeNode(nodes[0].Text);
                newNode.Name = nodes[0].Name;
                newNode.Tag = nodes[0].Tag;
                newNode.Checked = nodes[0].Checked;
                tvSelectedItems.TreeView.Nodes[node.Parent.Name].Nodes.Add(newNode);
            }
            else
            {
                AddParents(node.Parent);

                TreeNode newNode = new TreeNode(node.Text);
                newNode.Name = node.Name;
                newNode.Tag = node.Tag;
                newNode.Checked = node.Checked;
                tvSelectedItems.TreeView.Nodes.Find(node.Parent.Name,true)[0].Nodes.Add(newNode);

            }
        }
        else // deal with root node
        {
            TreeNode rootNode = new TreeNode(node.Text);
            rootNode.Name = node.Name;
            rootNode.Tag = node.Tag;
            rootNode.Checked = node.Checked;
            tvSelectedItems.TreeView.Nodes.Add(rootNode);
        }

    } 
```

# java - Java Servlet 响应为 CSV 设置内容长度

> ID：15500406
> 
> 赞同：0
> 
> 时间：2013-03-19T13:07:52.443
> 
> 标签：java, servlets, httpresponse, content-length

要求

下载 CSV 文件

代码

我有一个 csvFormattedString 之类的

```
String csvFormattedString = "\"Column_One\",\"Column_Two\"\n\"Row_Col1\",\"Row_Col2\"\n"; 
```

此 CSV 字符串使用

```
response.getWriter().write(csvFormattedString); 
```

我已将标头设置为 application-force-download 并将字符编码设置为 UTF-8。

我也想将响应长度发送回用户。

`csvFormattedString.length()`似乎不正确，因为我的一些角色被截断了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:04:20.943

`csvFormattedString.length()`计算字符。用于`s.getBytes("UTF-8").length`获取用于表示为 UTF-8 的字符串的字节数。

你必须抓住`UnsupportedEncodingException`才能使用`getBytes(String encoding)`。

# java - 如何使用 Spring MVC 在 DTO 上绑定日历

> ID：15500409
> 
> 赞同：2
> 
> 时间：2013-03-19T13:07:58.193
> 
> 标签：java, spring-mvc, validation, dto

我有一个带有日期字段的表格。我想知道如何绑定具有 Calendar 属性的 DTO。我正在尝试使用 String，但转换为 java.sql.Date 非常复杂。

HTML

```
<input type="text" id="date" name="date" /> 
```

春季MVC

```
@RequestMapping(value = "/newholiday", method=RequestMethod.POST)
public String cadastrar(ModelMap model, HolidayDTO dto) {
    System.out.println(dto.getDate());
    return "/newholiday";
} 
```

DTO

```
public class HolidayDTO extends DTO<Holiday> {
    private Calendar date;
} 
```

如果直接，则返回异常：

```
HTTP ERROR 500

Problem accessing /cemiterio/feriados/cadastrar/. Reason:

    org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'holidayDTO' on field 'date': rejected value [23/12/1988]; codes [typeMismatch.holidayDTO.date,typeMismatch.date,typeMismatch.java.util.Calendar,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [holidayDTO.date,date]; arguments []; default message [date]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Calendar' for property 'date'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [java.util.Calendar] for property 'date': no matching editors or conversion strategy found]
Caused by:

org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 1 errors
Field error in object 'holidayDTO' on field 'date': rejected value [23/12/1988]; codes [typeMismatch.holidayDTO.date,typeMismatch.date,typeMismatch.java.util.Calendar,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [holidayDTO.date,date]; arguments []; default message [date]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Calendar' for property 'date'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [java.util.Calendar] for property 'date': no matching editors or conversion strategy found]
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doBind(HandlerMethodInvoker.java:810)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:359)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:23:19.647

`Calendar`我强烈建议您使用[Joda Time](http://joda-time.sourceforge.net/) ，而不是使用对象，因为您将拥有进行日期时间操作的所有灵活性，最重要的是，它是不可变的。将 Joda 转换`DateTime`为`java.sql.Date`就像这样简单：-

```
DateTime dateTime = ...;
java.sql.Date sqlDate = new java.sql.Date(dateTime.getMillis()); 
```

这是一个例子：-

**弹簧形式**

```
public class MyForm {

    @DateTimeFormat(pattern = "MM/dd/yyyy")
    private DateTime dateTime;

    public DateTime getDateTime() {
        return dateTime;
    }

    public void setDateTime(DateTime dateTime) {
        this.dateTime = dateTime;
    }
} 
```

**控制器**

```
@Controller
@RequestMapping(value = "/")
public class HomeController {

    @RequestMapping(method = RequestMethod.POST)
    public String post(@ModelAttribute MyForm myForm) {
        System.out.println("@@@@@@: " + myForm.getDateTime());
        return "home";
    }
} 
```

**JSP**

```
<spring:form modelAttribute="myForm">
    <spring:input path="dateTime"/>
    <spring:button>Submit</spring:button>
</spring:form> 
```

# python - 是否可以通过 python 的引用来调用 C 函数？

> ID：15500410
> 
> 赞同：2
> 
> 时间：2013-03-19T13:08:09.240
> 
> 标签：python, c, automated-tests, ctypes

我是 python 的初学者，我需要测试一个通过引用调用的 C 函数。

这是我的 C 文件：myfile.c

```
#include<stdio.h>

int my_function(int *x)
{
int A;
printf("enter value of A");
scanf("%d",&A);
*x = 10 * A; // this sets the value to the address x is referencing to
 return 0; 
} 
```

现在，我的 python 脚本应该调用 my_function() 并传递参数，以便我可以检查和验证结果。

就像是 ：

`result = self.loaded_class.my_function(addressOf(some_variable))`

`self.assertEqual(some_variable,10)`

这可能吗 ？？我怎么能做到这一点。我正在用 python 编写脚本进行自动测试，而不是使用交互式 python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:04:12.553

如果您将文件编译为共享库或 dll（我不知道该怎么做），您可以使用这样的[ctypes](http://docs.python.org/2/library/ctypes.html)（假设它是此示例的 dll）：

```
import ctypes as ct

mylib = ct.cdll.myfile
c_int = ct.c_int(0)
mylib.my_function(ct.byref(c_int))
print c_int.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:12:03.647

您可以为 C 函数编写 Python 接口，一个简单的示例在[Python doc](http://docs.python.org/2/extending/extending.html#a-simple-example)中。但是，如果您只想测试 C 函数，那么您可能最好使用 C/C++ 测试框架，例如[Google Test](http://code.google.com/p/googletest/)。

# jquery - 单击多个 div 时交换图像

> ID：15500411
> 
> 赞同：1
> 
> 时间：2013-03-19T13:08:09.597
> 
> 标签：jquery, if-statement, replace, swap

我被要求在[此页面](http://cookware.lecreuset.com/cookware/content_Le-Creuset-Truckette_10151_-1_20002)中添加另一种颜色选项。如果您单击马赛标志，卡车会从橙色变​​为蓝色；如果再次单击它，它会变回橙色。如果单击右侧的探索标志，则会出现两个视图，它们也具有交换的图像颜色。

我想向页面添加一个新的 div，使其变为黄色。所以蓝色按钮应该从黄色或橙色变为蓝色，然后如果在蓝色时单击它，则返回橙色。黄色按钮应从蓝色或橙色变为黄色，然后再变为橙色。
蓝色按钮不应使卡车变黄，黄色按钮不应使其变蓝。

如果有人单击“探索”，则所选颜色需要保持不变。

这是进行图像交换的原始 jQuery：

```
 var isOrange = true;
        $("#marseilleBtn").click(function(){
         $("img.img-swap").each(function(){
                    if(isOrange){
                        this.src = this.src.replace("_orange","_blue");
                    } else{
                        this.src = this.src.replace("_blue","_orange");
                    }
         });
         if(isOrange){
             isOrange = false;
         } else {
             isOrange = true;
         }
    }); 
```

我没有编写这段代码，而且我是 jQuery 新手，所以这对我来说很有挑战性。我写了这段代码，它几乎可以工作。问题是，如果黄色卡车开着，我点击蓝色标志，它不会改变颜色。另外，如果蓝色卡车亮着，我点击黄色标志，它不会改变颜色。如果我从橙色开始，它只会改变颜色......希望这是有道理的。

```
 var isOrange = true;
        $("#marseilleBtn").click(function(){
         $("img.img-swap").each(function(){
                    if(isOrange){
                        this.src = this.src.replace(("_orange") || ("_soleil"),"_blue");
                    } else{
                        this.src = this.src.replace("_blue","_orange");
                    }
         });
         if(isOrange){
             isOrange = false;
         } else {
             isOrange = true;
         }
    });

        var isOrange = true;
        $("#soleilBtn").click(function(){
         $("img.img-swap").each(function(){
                    if(isOrange){
                        this.src = this.src.replace(("_orange") || ("_blue"),"_soleil");
                    } else{
                        this.src = this.src.replace("_soleil","_orange");
                    }
         });
         if(isOrange){
             isOrange = false;
         } else {
             isOrange = true;
         }
    }); 
```

任何人都可以帮助我实现我想要做的事情吗？如果您也知道更好的方法，我对完全不同的方法持开放态度……走这条路是因为我是从给定的代码开始的。我也尝试创建一个 OR 语句，但这根本不起作用，不知道为什么：

```
 this.src = this.src.replace(('_orange, _yellow'),'_blue'); 
```

奖金问题！我对这段代码的第一部分感到困惑，它将变量 isOrange 声明为 true，然后最后的 if/else 语句将其声明为 false。谁能帮我分解一下？我理解它的图像交换部分......

```
 if(isOrange){
             isOrange = false;
         } else {
             isOrange = true;
         }
    }); 
```

提前感谢您的帮助。

更新：

正在处理此问题，但在更改两次后需要额外单击才能更改颜色。即点击马赛，变成蓝色。单击马赛，变为橙色。点击点击返回马赛。

```
 var color = "orange";  //first default color of img is orange
          $("#marseilleBtn").click(function(){  //on click 
             $("img.img-swap").each(function(){   // find all the images that has class img-swap ..i guess there is 3 more images there
                  if(color == "orange"){  //check if orange .. which is correct and 
                     this.src = this.src.replace("_orange","_blue"); //change it to blue
                  } else if(color == "yellow"){   //if yellow
                     this.src = this.src.replace("_soleil","_blue"); //chnage to yello
                  }else{ //if blue
                     this.src = this.src.replace("_blue","_orange"); //chnage to yellow
                  }

             });

             if(color =="orange"){
                 color = "blue";
             }else if(color == "blue"){
                 color = "yellow";
             }else{
                 color = "orange";
             }

        });

        var color = "orange";  //first default color of img is orange
          $("#soleilBtn").click(function(){  //on click 
             $("img.img-swap").each(function(){   // find all the images that has class img-swap ..i guess there is 3 more images there
                  if(color == "orange"){  //check if orange .. which is correct and 
                     this.src = this.src.replace("_orange","_soleil"); //change it to yellow
                  } else if(color == "blue"){   //if blue
                     this.src = this.src.replace("_blue","_soleil"); //chnage to yello
                  }else{ //if yellow 
                     this.src = this.src.replace("_soleil","_orange"); //chnage to yellow
                  }

             });

             if(color =="orange"){
                 color = "blue";
             }else if(color == "blue"){
                 color = "yellow";
             }else{
                 color = "orange";
             }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:17:36.673

尝试这个

**更新**

```
 var color = "orange";  //first default color of img is orange
      $("#marseilleBtn").click(function(){  //on click 
         $("img.img-swap").each(function(){   // find all the images that has class img-swap ..i guess there is 3 more images there
              if(color == "orange"){  //check if orange .. which is correct and 
                 this.src = this.src.replace("_orange","_blue"); //change it to blue
              } else if(color == "yellow"){   //if yellow
                 this.src = this.src.replace("_soleil","_blue"); //chnage to yello
              }else{ //if blue
                 this.src = this.src.replace("_blue","_orange"); //chnage to yellow
              }

         });

         if(color =="orange"){
             color = "blue";
         }else if(color == "yellow"){
             color = "blue";
         }else{
             color = "orange";
         }

    });

      $("#soleilBtn").click(function(){  //on click 
         $("img.img-swap").each(function(){   // find all the images that has class img-swap ..i guess there is 3 more images there
              if(color == "orange"){  //check if orange .. which is correct and 
                 this.src = this.src.replace("_orange","_soleil"); //change it to yellow
              } else if(color == "blue"){   //if blue
                 this.src = this.src.replace("_blue","_soleil"); //chnage to yello
              }else{ //if yellow 
                 this.src = this.src.replace("_soleil","_orange"); //chnage to yellow
              }

         });

         if(color =="orange"){
             color = "yellow";
         }else if(color == "blue"){
             color = "yellow";
         }else{
             color = "orange";
         }

    }); 
```

和奖金答案！！！第一个`var color`是橙色的默认颜色......结束if / else条件是因为你也有三个图像`Explore`......你需要一个循环并且在循环中你正在检查颜色......所以在第一次通话中......橙色是颜色，因此它会变为蓝色（运行循环 3 次..），然后进入此 if/else 条件，将值颜色更改为蓝色...在第二次单击中。因为现在颜色是蓝色..循环将其更改为黄色......等等..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:21:36.573

好吧，让我印象深刻的第一件事是你两次写相同的功能。

你也可以这样写：

```
var isOrange = true;
$("#marseilleBtn, #soleilBtn").click(function () {
    $("img.img-swap").each(function () {
        if (isOrange) {
            this.src = this.src.replace(("_orange") || ("_soleil"), "_blue");
        } else {
            this.src = this.src.replace("_blue", "_orange");
        }
    });
    if (isOrange) {
        isOrange = false;
    } else {
        isOrange = true;
    }
}); 
```

告诉，`if(isOrange)else isOrange = false;`要切换到什么颜色。因此，如果您想添加第三种颜色，则不能再使用简单的布尔值，因为它只有两个值。为了保持代码清晰，我会使用一个字符串。

您的代码可能如下所示：

```
var curentColor = "orange";
$("#marseilleBtn, #soleilBtn").click(function () {
    $("img.img-swap").each(function () {
        if (curentColor === "orange") {
            this.src = this.src.replace("_orange", "_blue");
            curentColor = "blue";
        } else if(curentColor === "blue") {
            this.src = this.src.replace("_blue", "_yellow");
            curentColor = "yellow";
        } else if(curentColor === "yellow") {
            this.src = this.src.replace("_yellow", "_orange");
            curentColor = "orange";
        }
    });
}); 
```

这会将颜色从橙色变为蓝色再变为黄色，然后再次变为橙色，从而完成色环。

# c++ - 通过事件进行线程同步的开销

> ID：15500415
> 
> 赞同：0
> 
> 时间：2013-03-19T13:08:22.313
> 
> 标签：c++, multithreading, winapi, events, thread-synchronization

我目前正在试验多线程同步。对于背景，我有一组大约 100000 个对象 - 可能更多 - 我想以不同的方式每秒处理多次。

现在最关心我的是同步的性能。

这是我认为应该可以正常工作的（我省略了所有安全方面，因为这只是一个测试程序，如果出现错误，程序只会崩溃..）。我写了两个函数，第一个由程序的主线程执行，第二个由所有附加线程运行。

```
void SharedWorker::Start()
{
    while (bRunning)
    {
        // Send the command to start task1
        SetEvent(hTask1Event);

        // Do task1 (on a subset of all objects) here

        // Wait for all workers to finish task1
        WaitForMultipleObjects(<NumberOfWorkers>, <ListOfTask1WorkerEvents>, TRUE, INFINITE);

        // Reset the command for task1
        ResetEvent(hTask1Event);

        // Send the command to start task2
        SetEvent(hTask2Event);

        // Do task2 (on a subset of all objects) here

        // Wait for all workers to finish task2
        WaitForMultipleObjects(<NumberOfWorkers>, <ListOfTask2WorkerEvents>, TRUE, INFINITE);

        // Reset the command for task2
        ResetEvent(hTask2Event);

        // Send the command to do cleanup
        SetEvent(hCleanupEvent);

        // Do some (on a subset of all objects) cleanup

        // Wait for all workers to finish cleanup
        WaitForMultipleObjects(<NumberOfWorkers>, <ListOfCleanupWorkerEvents>, TRUE, INFINITE);

        // Reset the command for cleanup
        ResetEvent(hCleanupEvent);
    }
}

DWORD WINAPI WorkerThreads(LPVOID lpParameter)
{
    while (bRunning)
    {
        WaitForSingleObject(hTask1Event, INFINITE);

        // Unset finished cleanup
        ResetEvent(hCleanedUp);

        // Do task1 (on a subset of all objects) here

        // Signal finished task1
        SetEvent(hTask1);

        WaitForSingleObject(hTask2Event, INFINITE);

        // Reset task1 event
        ResetEvent(hTask1);

        // Do task2 (on a subset of all objects) here

        // Signal finished task2
        SetEvent(hTask2);

        WaitForSingleObject(hCleanupEvent, INFINITE);

        // Reset update event
        ResetEvent(hTask2);

        // Do cleanup (on a subset of all objects) here

        // Signal finished cleanup
        SetEvent(hCleanedUp);
    }

    return 0;
} 
```

为了指出我的要求，我只给你一个小例子：假设我们从上面得到 100000 个对象，分成 8 个子集，每个子​​集 12500 个对象，一个具有 8 个逻辑内核的现代多核处理器。相关部分是时间。所有任务必须在大约 8ms 内完成。

我现在的问题是，我能否从拆分处理中获得显着的时间提升，或者通过事件进行同步是否过于昂贵？或者如果所有任务都需要以这种方式完成，是否还有另一种方式可以以更少的努力或处理时间来同步线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:02:11.817

如果您对单个对象的处理速度很快，请不要在线程之间拆分它。Windows 上的线程同步在每次上下文切换时都会消耗超过 50 毫秒。这个时间不被系统使用，而只是系统上运行其他东西的时间。

但是，如果每个对象处理将花费大约 8 毫秒，则需要跨线程池调度工作。但是，对象处理可能会有所不同，并且大量工作线程将在不同的时刻完成工作。

更好的方法是组织一个同步的对象队列，您可以将对象添加到其中进行处理，并从中取出它们进行处理。此外，由于单个对象的处理远低于线程的调度间隔，因此最好将它们分批进入处理线程（如10-20）。您可以估计池中的最佳工作线程数以及带有测试的批次的最佳大小。

所以伪代码看起来像：

```
main_thread:
    init queue
    start workers

    set counter to 100000
    add 100000 objects to queue
    while (counter) wait();

worker_thread:
    while (!done)
        get up to 10 objects from queue
        process objects
        counter -= processed count
        if (counter == 0) notify done 
```

# javascript - 验证码在 ie7 中显示未定义？

> ID：15500416
> 
> 赞同：3
> 
> 时间：2013-03-19T13:08:27.097
> 
> 标签：javascript, jquery, internet-explorer

我的验证码在所有浏览器中都可以正常工作，但在 ie7 中显示错误。

这是小提琴：http: [//jsfiddle.net/KMupW/4/](http://jsfiddle.net/KMupW/4/)

这是我的代码：

```
function randomString(length, chars) {
    var result = '';
    for (var i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];
    return result;
}
 var code= randomString(5,'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');

 document.getElementById("txtCaptcha").value = code;
 document.getElementById("txtCaptchaDiv").innerHTML = code; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:10:34.930

```
result += chars[index]; 
```

问题就在这里，Internet Explorer 不支持像数组这样的字符串操作，你应该这样写：

```
result += chars.charAt(index); 
```

所以这条线最终应该是：

```
result += chars.charAt(Math.round(Math.random() * (chars.length - 1))); 
```

一个例子：http: [//jsfiddle.net/XDxR7/2/](http://jsfiddle.net/XDxR7/2/)

# android - Android 中的 java.lang.NullPointerException

> ID：15500422
> 
> 赞同：1
> 
> 时间：2013-03-19T13:08:49.913
> 
> 标签：android, nullpointerexception, broadcastreceiver, bootcompleted

我面临的问题是`NullPointerException`我无法在我的代码中找出问题所在。请帮帮我。

```
java.lang.RuntimeException: Unable to start receiver me.radhakrishna.buddyreader.TextMessageReceiver: java.lang.NullPointerException
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2146)
at android.app.ActivityThread.access$1500(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4441)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at me.radhakrishna.buddyreader.MainActivity.stopReading(MainActivity.java:81)
at me.radhakrishna.buddyreader.TextMessageReceiver.onReceive(TextMessageReceiver.java:59)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2139)
... 10 more 
```

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="me.radhakrishna.buddyreader"
    android:versionCode="14"
    android:versionName="1.2.2" >

    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="me.radhakrishna.buddyreader.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="me.radhakrishna.buddyreader.MessageActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="me.radhakrishna.buddyreader.PreferActivity"
            android:label="@string/app_name" >
        </activity>
        <receiver android:name="me.radhakrishna.buddyreader.TextMessageReceiver" android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>

</manifest> 
```

我的`TextMessageReceiver.java`文件：

```
package me.radhakrishna.buddyreader;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract.PhoneLookup;
import android.telephony.SmsMessage;

public class TextMessageReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent){

        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            String val="";
            FileInputStream fileos;
            try {
                fileos = context.getApplicationContext().openFileInput("startup");
                byte[] input = new byte[fileos.available()];
                while(fileos.read(input) != -1){
                    val += new String(input);
                }
                if(val.equals("ON")){
                    Intent myIntent = new Intent(context, MainActivity.class);
                    myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(myIntent);
                }
                fileos.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        Bundle bundle=intent.getExtras();
        Object[] messages=(Object[])bundle.get("pdus");
        SmsMessage[] sms=new SmsMessage[messages.length];

        for(int n=0;n<messages.length;n++){
            sms[n]=SmsMessage.createFromPdu((byte[]) messages[n]);
        }

        for(SmsMessage msg:sms){
            final String mobileNum = msg.getOriginatingAddress();
            Uri uri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(mobileNum));           
            Cursor cursor= context.getContentResolver().query(uri, new String[]{PhoneLookup.DISPLAY_NAME},null,null,null);

            final MainActivity main = new MainActivity();
            main.stopReading();
            main.setSpeechSpeed();
            String messageFormat = "Message from "+mobileNum+". Message: "+msg.getMessageBody();
            FileOutputStream fos;
            try {
                fos = context.getApplicationContext().openFileOutput("lastmessage",Context.MODE_PRIVATE);
                fos.write(messageFormat.toString().getBytes());
                fos.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (cursor.getCount()>0){
                cursor.moveToFirst();
                String contactName = cursor.getString(0);
                cursor.close();

                String enteredText = "Excuse me sir, You got a message from "+contactName+". Message, "+msg.getMessageBody();
                String words = enteredText.toString();
                main.speakWords(words);
            }else{
                String enteredText = "Excuse me sir, You got a message from "+mobileNum+". Message, "+msg.getMessageBody();
                String words = enteredText.toString();
                main.speakWords(words);
            }
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:34:18.437

请不要从活动中读取功能，因为您不确切知道它何时处于活动状态。我几个月都遇到了类似的问题。所以在一个通用类中编写函数然后使用它。

# c++ - opencv 给出 cvFindStereoCorrespondenceBM 异常

> ID：15500423
> 
> 赞同：0
> 
> 时间：2013-03-19T13:08:53.597
> 
> 标签：c++, exception, opencv, stereo-3d

我写了一个代码来从“左”和“右”两个图像中找到视差图；并将地图保存为“立体”。代码对我来说似乎没问题，但不知何故我遇到了异常：

在终端窗口上：

> OpenCV 错误：未知函数中的错误参数（未知数组类型），文件......\src\opencv\modules\core\src\matrix.cpp，第 698 行

代码是

```
Mat left = imread( "files\\left.jpg" );
Mat right = imread( "files\\right.jpg" );
Size size = left.size();
namedWindow( "left", CV_WINDOW_AUTOSIZE );
imshow("left", left);
cvNamedWindow( "right", CV_WINDOW_AUTOSIZE );
imshow("right", right);

Mat left_C1;
cvtColor(left, left_C1, CV_RGB2GRAY);
Mat right_C1;
cvtColor(right, right_C1, CV_RGB2GRAY);

Mat stereo = Mat(size, CV_16SC1);
CvStereoBMState* state = cvCreateStereoBMState();

state->preFilterSize=5;
state->preFilterCap=1;
state->SADWindowSize=5;
state->minDisparity=0;
state->numberOfDisparities=64;
state->textureThreshold=0;
state->uniquenessRatio=0;

cvFindStereoCorrespondenceBM(&left_C1, &right_C1, &stereo, state);

namedWindow( "stereo", CV_WINDOW_AUTOSIZE );
imshow("stereo",stereo);
waitKey(0); 
```

我正在使用 VS Ultimate 2012、Windows 8、OpenCV 2.4.4。请指导我如何解决此异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:28:36.320

我认为 `cvFindStereoCorrespondenceBM`需要`IplImage`或`cvMat`。由于您使用的是`Mat`，您应该使用 OpenCV 的 C++ API。

```
StereoBM sbm;
sbm.state->SADWindowSize = 23;
sbm.state->numberOfDisparities = 96;
sbm.state->preFilterSize = 25;
sbm.state->preFilterCap = 63;
sbm.state->minDisparity = 0;
sbm.state->textureThreshold = 20;
sbm.state->uniquenessRatio = 10;
sbm.state->speckleWindowSize = 25;
sbm.state->speckleRange = 8;
sbm.state->disp12MaxDiff = 1;
// change the parameters

sbm(left_c1, right_c1, stereo); 
```

由于您使用的是 Mat，您应该尝试一下并检查它是否有效。

```
cvFindStereoCorrespondenceBM(left_C1, right_C1, stereo, state); 
```

我不知道这是否有效，但 C++ API StereoBM 肯定会有效。

试试这个，看看它是否有效。

```
#define WIDTH 426
#define HEIGHT 320 
```

您可以定义一些大小。

```
CvSize imageSize = {WIDTH,HEIGHT};
CvMat* frame1r = cvCreateMat( imageSize.height,imageSize.width, CV_8U );
CvMat* frame2r = cvCreateMat( imageSize.height,imageSize.width, CV_8U );
CvMat* disp = cvCreateMat( imageSize.height, imageSize.width, CV_16S );
CvMat* vdisp = cvCreateMat( imageSize.height,imageSize.width, CV_8U );

// Load image in frame1r and frame2r

cvFindStereoCorrespondenceBM( frame1r, frame2r, disp, state);
cvNormalize( disp, vdisp, 0, 256, CV_MINMAX );                   
cvShowImage( "disparity", vdisp ); 
```

# mysql - SELECT 查询偶尔会执行很长时间

> ID：15500426
> 
> 赞同：4
> 
> 时间：2013-03-19T13:08:59.380
> 
> 标签：mysql, performance, innodb

我的 MySQL InnoDB 数据库中有一个非常奇怪的问题。我有以下查询：

```
SELECT DISTINCT p.idProject AS idProject, p.name AS name, 0 AS isConfirm
FROM Projects p
    JOIN team_project tp ON (p.idProject = tp.idProject) 
    JOIN projtimes pt ON (p.idProject = pt.idProject) 
    JOIN CalledTimesTbl ctt ON (p.idProject = ctt.idProject)
    LEFT JOIN NextCalls nc ON (ctt.idCustomer = nc.idCustomer 
        AND ctt.idProject = nc.idProject) 
WHERE tp.idTeam = 158
    AND p.activated = 1 
    AND current_date >= p.projStart
    AND current_date < p.confirmStart 
    AND pt.invitesCount < pt.maxPerPresentation
    AND (nc.idCustomer IS NULL OR nc.nextCall < now())
ORDER BY p.name 
```

通常查询运行良好，但有时 - 例如当我设置`tp.idTeam = 147`它运行非常慢（如 10 或 20 秒）。当我创建替代团队并调整适当的表值以具有不同`idTeam`值的相同结果时 - 查询在几分之一秒内执行。

我分析了查询并注意到当查询执行缓慢时 - 大部分时间都消耗了一件事：

```
Copying to tmp table      | 12.489197 
```

我对查询创建了一个 tmp 表感到有点惊讶，但是没关系——每次查询执行时都会创建它——当它快速执行时也是如此。我只是补充说 db 设计得很好，所有需要的外键等等。

如何找到执行缓慢的根源并消除它？

编辑：`EXPLAIN`结果：

```
id   select_type   table   type     possible_keys                    key              key_len   ref                                                   rows   Extra                             
1    SIMPLE        tp      ref      unique_row,idTeam                idTeam           4         const                                                 56     Using temporary; Using filesort   
1    SIMPLE        p       eq_ref   PRIMARY,projStart,confirmStart   PRIMARY          4         xxx.tp.idProject                                      1      Using where                       
1    SIMPLE        pt      ref      uniq_projtimes                   uniq_projtimes   4         xxx.tp.idProject                                      1      Using where; Distinct             
1    SIMPLE        ctt     ref      idProject                        idProject        4         xxx.tp.idProject                                      3966   Using index; Distinct             
1    SIMPLE        nc      eq_ref   PRIMARY,idProject                PRIMARY          8         xxx.ctt.idCustomer,xxx.tp.idProject                   1      Using where; Distinct 
```

EDIT2：`EXPLAIN EXTENDED`第一个用于快速查询的结果，第二个用于慢速查询。

```
id   select_type   table   type     possible_keys                    key              key_len   ref                                           rows    filtered   Extra                  1    SIMPLE        tp      ref      unique_row,idTeam                idTeam           4         const                                                 1       100        Using temporary         
1    SIMPLE        p       eq_ref   PRIMARY,projStart,confirmStart   PRIMARY          4         xxx.tp.idProject                              1       100        Using where             
1    SIMPLE        pt      ref      uniq_projtimes                   uniq_projtimes   4         xxx.tp.idProject                              1       100        Using where; Distinct   
1    SIMPLE        ctt     ref      idProject                        idProject        4         xxx.tp.idProject                              46199   100        Using index; Distinct   
1    SIMPLE        nc      eq_ref   PRIMARY,idProject                PRIMARY          8         xxx.ctt.idCustomer,xxx.tp.idProject           1       100        Using index; Distinct  

id   select_type   table   type     possible_keys                    key              key_len   ref                                           rows   filtered   Extra                                
1    SIMPLE        p       eq_ref   PRIMARY,projStart,confirmStart   PRIMARY          4         xxx.ctt.idProject                             1      100        Using where                          
1    SIMPLE        pt      ref      uniq_projtimes                   uniq_projtimes   4         xxx.ctt.idProject                             1      100        Using where; Distinct                
1    SIMPLE        tp      ref      unique_row,idTeam                unique_row       8         xxx.pt.idProject,const                        1      100        Using where; Using index; Distinct   
1    SIMPLE        nc      eq_ref   PRIMARY,idProject                PRIMARY          8         xxx.ctt.idCustomer,xxx.tp.idProject           1      100        Using index; Distinct 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:38:16.523

试试这个调整后的查询。（它将加入更少的行）

```
SELECT DISTINCT p.idProject AS idProject, p.name AS name, 0 AS isConfirm
FROM Projects p
    JOIN projtimes pt ON 
        p.idProject = pt.idProject
        AND p.activated = 1
        AND current_date >= p.projStart
        AND current_date < p.confirmStart
        AND pt.invitesCount < pt.maxPerPresentation
    JOIN team_project tp ON 
        p.idProject = tp.idProject
        AND tp.idTeam = 158
    JOIN CalledTimesTbl ctt ON (p.idProject = ctt.idProject)
    LEFT JOIN NextCalls nc ON (ctt.idCustomer = nc.idCustomer 
        AND ctt.idProject = nc.idProject) 
WHERE (nc.idCustomer IS NULL OR nc.nextCall < now())
ORDER BY p.name 
```

# c# - 通过反射获取显式转换运算符

> ID：15500427
> 
> 赞同：1
> 
> 时间：2013-03-19T13:09:02.683
> 
> 标签：c#, reflection, casting

我可以通过反射和调用（或者如果该操作有更好的名称）来获取转换运算符吗？这是主要问题，如果是，它解决了我的问题。

但是，如果有人知道以下问题的另一种解决方案：

我有很多对象变量（直到运行时的数量未知），每个都有不同的类型，但它们都是数字（双精度、整数、短）。

另一方面，我有相同数量的双变量，并且需要比较每个值。

```
object[] Value1; //this can be double, short or int, only known at runtime.
double[] Value2;

//I need simply to do:
(for int i = 0; i < Value1.Length, i++)
{
    (if Value1[i] == Value2[i]) //here's the problem
    //the comparison always return false, because of different types
    .... 
```

我尝试了很多东西，包括通过反射调用的“CompareTo”方法，但它要求对象变量与包含调用的方法的实例类型相同。（不能从 double 调用并传递 int 参数，也不能从 int 调用并传递 double 参数）

因此，如果我可以将它们转换为：一种方法是从 double 转换为未知类型（为此我必须使用一些反射）另一种方法是从 object 到未知类型的两步转换，然后从该转换为 double .

限制：

*   动态不是一个选项（旧框架）

*   Value1 项目从外部不可更改的方法中单独“作为对象”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:12:07.217

更改`Value1`为`double[]`. 如果您`object`要放入其中（例如`short`, `int`,`double`等），请使用[`Convert.ToDouble(value)`](http://msdn.microsoft.com/en-us/library/kx3x7f55.aspx)，或者如果您有已知的`short`or `int`，它将被隐式转换为`double`. 然后可以将这些与 中的`double`s进行比较`Value2`。

# sql-server - 在 sql server 中查找任何字段是否已更新

> ID：15500429
> 
> 赞同：0
> 
> 时间：2013-03-19T13:09:14.890
> 
> 标签：sql-server, triggers

如果我们收到一条更新语句，它不检查 where 子句中的值是否已更改，那么在触发器中忽略该更新的不同方法是什么？

我知道我们可以对每个单独的字段进行比较（也处理 ISNULL 端），但是如果它是一个有 50 多个字段的表，有没有更快/更简单的方法呢？

注意：我想在日志中保存更新字段的每个事件。例如，我有 50 个字段，其中一个字段已更新（对于单行而不是整个表），然后我只想保存更新后的字段旧值和日志中的新值。

提前致谢， 拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:16:07.103

如果这更多是关于记录对表的更改，则更简单的解决方案可能是使用更改数据捕获 (CDC) 表。

每次对表进行更改时，都会将一行写入您的 CDC 表。然后，您可以在 CDC 表上编写一个查询，以仅返回已更改的数据。

有关 CDC 表的更多信息可在此处获得：http: [//msdn.microsoft.com/en-us/library/bb522489 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb522489(v=sql.105).aspx)

# vb.net - 以字符串数据类型构造 ascii 消息

> ID：15500431
> 
> 赞同：0
> 
> 时间：2013-03-19T13:09:19.083
> 
> 标签：vb.net

我需要构造一条消息以发送到 1024 个 ASCII 字符的串行设备。如果我以常规字符串数据类型构造此消息，这会起作用吗？我认为数据会出错，因为字符串是 Unicode 格式的。我怎么能去做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:13:24.280

首先，字符串不是为处理二进制数据而设计的，因此当您需要访问行二进制数据时不应该使用它。

最合适的候选者是字节数组。它将确保数据完全存储在您想要的位置。

对于写入串行端口，您应该使用二进制流。它将采用二进制数组，并且可以放在任何可写设备上。

# php - 包括动态目录的 Apache 重写规则

> ID：15500434
> 
> 赞同：0
> 
> 时间：2013-03-19T13:09:22.787
> 
> 标签：php, apache, .htaccess, sysadmin

我正在尝试`.htaccess`使用以下条件创建规则：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^year=2013$ 
RewriteRule ^/media/news/info.php$ /media/news/month=Month&date=1 [L,R=301] 
```

显然这个规则应该有效，但它不是`/media/news`动态生成的，`apache`也没有找到那些目录，并将请求退回给返回`404`.

我的问题是我怎样才能“使”`apache`无视`validation`for`dynamic directories`而只是让用户遵循`RewriteRule`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:18:52.657

如果`RewriteCond`和`RewriteRule`的条件与您的查询匹配，`RewriteRule`则将使用 HTTP 301 进行重定向，并且不会检查目标是否存在。

这意味着您的浏览器的位置应该已更改。如果它没有改变，`RewriteCond`则您的 URI 不匹配，或者您`RewriteRule`的 ' 条件不匹配。

如果您希望 Apache 识别 /media/news/ URL，您`RewriteRule`当然需要一个单独的 .

# c# - 如何检查 XmlDocument 是否已更改？

> ID：15500438
> 
> 赞同：2
> 
> 时间：2013-03-19T13:09:35.747
> 
> 标签：c#, .net, xml, c#-4.0

我有条件地更改`XmlDocument`代码的各个部分。不是传递“更改”标志，而是`XmlDocument`对象是否有为此构建的标志（如`isDirty`）？

```
var doc = new XmlDocument();
doc.Load(file);

if (...) parent.AppendChild(element);
if (...) parent2.AppendChild(element2);
if (...) parent3.AppendChild(element3);

//METHOD DOESN'T EXIST
if (doc.isDirty())
  doc.Save(file); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:22:35.000

尽管**XmlDocument**没有公开**IsDirty**标志，但它确实具有诸如**NodeChanged**、**NodeInserted**和**NodeRemoved 之**类的事件，您可以使用它们来保留单个标志，而无需将其传递给任何突变方法：

```
var doc = new XmlDocument();
doc.Load(file);

bool changed = false;

XmlNodeChangedEventHandler handler = (sender, e) => changed = true;
doc.NodeChanged += handler;
doc.NodeInserted += handler;
doc.NodeRemoved += handler;

// do some work

if (changed)
    doc.Save(file); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:12:19.560

不，XmlDocument 存储一个文档，它不跟踪更改。将它包装在一个辅助类中，按照您的描述设置一个标志，或者创建一些其他 OO 结构以按照您想要的方式工作。

# svn - 詹金斯和 SVN 发布者完成了成功但没有发布

> ID：15500441
> 
> 赞同：5
> 
> 时间：2013-03-19T13:09:38.600
> 
> 标签：svn, jenkins

所以在我的 Jenkins 项目中，我有 SVN 发布者插件并打开了一份工作。该作业应该运行一个黄瓜脚本，并在脚本中修改文件。我正在使用 svn publisher 将更改的文件发布到 SVN，所以当我们第二天来的时候，我们可以更新项目并获取当天的新数字。

我收到`Attempting to import to SVN`消息，以及`SVN Publisher`行和`Finished: SUCCESS`消息，但是当我查看 SVN 时，项目文件保持不变。我已经验证了目标路径和 svn 路径是有效的，而且 hudson 似乎认为它正在正确发布，但我在 SVN 中看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:09:53.290

您可以添加构建后操作来触发第二个作业（构建其他项目 -> 要构建的项目，勾选“仅在构建成功时触发”）。这第二项工作所做的就是运行一个命令（使用“执行 shell”字段），然后在运行脚本（用于在工作目录中发布您的更改）之后，您将看到新的提交。享受！！！

# php - 提交按钮不起作用

> ID：15500447
> 
> 赞同：0
> 
> 时间：2013-03-19T13:09:52.087
> 
> 标签：php, codeigniter

当我点击我的按钮时，我想要的只是回显'a'。

我的代码中有以下代码`view`：

```
<?php echo form_submit('btnSearch', 'Search');?> 
```

我的控制器中的这段代码：

```
if(isset($_POST['btnSearch'])) 
{
    echo 'a';
} 
```

这是我在控制器中的完整代码：

```
public function index() {
    //table     
    $data_umat = $this->backend_m->get_umat()->result();

    $this->table->set_heading(
        'No',
        'Nama',
        'Kelas',
        'Alamat',
        'Sekolah',
        'Nomor Telepon',
        'Keterangan'        
    );

    $table_template = array('table_open' => '<table border="1" id="custom_table">');
    $this->table->set_template($table_template);

    $no = 1;
    foreach($data_umat as $list_temp) 
    {
        $this->table->add_row(
            $no++,
            $list_temp->nama,
            $list_temp->kelas,
            $list_temp->alamat,
            $list_temp->sekolah,
            $list_temp->no_tlpn,
            $list_temp->keterangan
        );
    }

    $data = $this->backend_m->get_kelas()->result();

    foreach($data as $row)
    {
        $data['list_kelas'][$row->kelas_id] = $row->kelas;
    }

    $data['table'] = $this->table->generate();

    $this->load->view('backend/home_v', $data);

    if(isset($_POST['btnSearch'])) 
    {
        echo 'a';
    }
} 
```

**编辑** 这是我的`view`完整代码：

```
<body>
<div id="header"><h1>HEADER</h1></div>
<div id="side_menu">
    <ul>
        <li><a href="#">Daftar Umat</a></li>
        <li><a href="#">Daftar Pengurus</a></li>
        <li><a href="#">Absensi</a></li>
    </ul>
</div>
<div id="content">
<form>
<p>Search by Kelas :
<?php echo form_dropdown('kelas_id', $list_kelas, 'id="ddl_kelas1"');?> -
<?php echo form_dropdown('kelas_id', $list_kelas, 'id="ddl_kelas2"');?>
</p>
<?php echo form_submit('btnSearch', 'Search');?>
<?php echo $table?>
</form>
</div>
</body> 
```

但是当我单击按钮时，'a' 没有显示。我的错误在哪里？感谢：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:26:19.300

您尚未在 HTML 中打开表单标签，如下所示

```
<?php
    echo form_open('Controller/Controller_Function');
    echo form_dropdown('kelas_id', $list_kelas, 'id="ddl_kelas1"');
    echo form_dropdown('kelas_id', $list_kelas, 'id="ddl_kelas2"');
    echo form_submit('btnSearch', 'Search');
    echo form_close();
?> 
```

现在它应该可以工作了。第一行类似于

```
<form method="POST" action="Controller/Controller_Function"> 
```

现在它应该可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:31:29.673

你错过了`form`标签。请包括那个。

```
 echo form_open('your_controller_name/index');
    echo form_dropdown('kelas_id', $list_kelas, 'id="ddl_kelas1"');
    echo form_dropdown('kelas_id', $list_kelas, 'id="ddl_kelas2"');
    echo form_submit('btnSearch', 'Search');
    echo form_close(); 
```

现在它将发布到控制器功能`index()`

# javascript - Chrome window.print() 打开时间太长

> ID：15500448
> 
> 赞同：4
> 
> 时间：2013-03-19T13:09:53.647
> 
> 标签：javascript, google-chrome, chromium

我有模态对话框，应该打印一些文本，并打印链接。所以当我按下打印时，我需要大约 30 秒才能在 chrome 中打开预览对话框（firefox，safari，即很好）。这是什么原因？

对话：

```
<div id="dialog">
    <div id="to_print_data">
    My data to print!!!!!
    </div>
    Click <a href="#" onclick="window.print(); return false;"> here</a>
</div> 

    <style>
    @media print {
      body * {
        visibility:hidden;
      }

    #to_print_data, #to_print_data * {
        visibility:visible;
      }
      #to_print_data {
        position:absolute;
        left:0!important;
        top:0!important;
        border:0!important;
        font-size:16px!important;
      }
    }
    </style> 
```

**更新：**

我发现原因，在后台运行一些脚本，这使得发布请求，并且请求在完成打印对话后大约 30 秒处于待处理状态。如何在打印等待发布请求完成而不删除脚本时防止这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T08:35:51.280

我找到了原因。如果在后台运行某些扩展，则会发出发布请求。这个请求有大约 30 秒的待处理状态。只有在它完成打印对话后才会出现。所以挂起的请求会阻止打开打印对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T23:25:44.883

在我的情况下，在我刷新页面之前它甚至根本不会打印，如下所述：[Chrome: window.print() print dialog opens only after page reload (javascript)](https://stackoverflow.com/questions/18622626/chrome-window-print-print-dialogue-opens-only-after-page-reload-javascript)。

@noypiscripter 的回答为我解决了这个问题：

```
function printPage() {
    window.print();

    //workaround for Chrome bug - https://code.google.com/p/chromium/issues/detail?id=141633
    if (window.stop) {
        location.reload(); //triggering unload (e.g. reloading the page) makes the print dialog appear
        window.stop(); //immediately stop reloading
    }
    return false;
} 
```

# c++ - 数组 C++ 中最常见的前 5 个

> ID：15500450
> 
> 赞同：0
> 
> 时间：2013-03-19T13:09:58.673
> 
> 标签：c++, arrays, random, frequency, dynamically-generated

嗨，我有一个数组，我希望从这个数组中获得最常出现的前 5 个。

```
static std::string pickRandomStockSymbol()
{
    static std::string stockSymbols[] = {"SIRI", "INTC", "ZNGA", "BBRY", "MSFT", 
        "QQQ", "CSCO", "FB", "MU", "DELL", "AMAT", "NWSA", "AAPL", "AFFY", "ORCL", 
        "YHOO", "GRPN", "MDLZ", "VOD", "CMCSA" };

    return stockSymbols[rand() % 20]; 
```

^^ 这是我将使用的数组。

交易是使用这个结构随机创建的：

```
struct Transaction
{
string stockSymbol;     // String containing the stock symbol, e.g. "AAPL"
string buyerName;       // String containing the buyer's name e.g. "Mr Brown"
int buyerAccount;       // Integer containing an eight digit account code
int numShares;          // Integer containing the number of sold shares
int pricePerShare;      // Integer containing the buy price per share
}; 
```

我打算在这个函数中这样做，我只是不知道我用什么方法来处理这个：

```
string* Analyser::topFiveStocks()
{

return new string[5];
} 
```

有没有人愿意告诉我如何通过交易来获得这些前 5 个出现的元素？

如果需要更多信息，我将非常乐意提供。

在此先感谢，安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:14:30.360

您可以使用[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)带有股票代码的 a 作为键，并将交易计数作为值。然后将最高的五个放在 a 中`std::vector`并返回。

至于将前 N 个放入向量中，可以保持排序，并在每次插入后重新排序，以便事务数最高的股票排在第一位。然后很容易看出当前股票在遍历 map 时是否比向量中的最后一项（也就是向量中事务计数最小的项）具有更高的事务计数，然后将其添加到向量中并重新解决。

* * *

您也可以将地图中的所有股票添加到向量中，然后使用地图中的值对其进行排序，并获取向量中的前五个条目。

这可能是这样的：

```
using transaction_map_type = std::unordered_map<std::string, unsigned int>;

transaction_map_type transactions;

// ...

std::vector<std::string> topFiveStocks()
{

    std::vector<transaction_map_type::value_type> all_trans;

    // Copy all transaction into our vector
    std::copy(std::begin(transactions), std::end(transactions),
              std::back_inserter(all_trans));

    // Now sort the transactions
    std::sort(std::begin(all_trans), std::end(all_trans),
              [](const transaction_map_type::value_type& t1,
                 const transaction_map_type::value_type& t2)
              { return t1.second > t2.second; });

    // And get the top five (or less) results into a separate vector
    std::vector<std::string> top_five;

    auto count = std::min(5UL, all_trans.size());
    for (unsigned i = 0; i < count; i++)
        top_five.push_back(all_trans[i].first);

    return top_five;
} 
```

另外，请记住在进行交易时增加地图中交易的计数器。

**注意：**此方案未经测试，只是在浏览器中编写。甚至可能无法编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:25:37.043

累积股票代码：

*   计入一个`map<string, int>`
*   最高的 5 个符号`set<string>`
*   最高 5 个符号的最低频率成`int`
*   最高 5 个符号中最低的一个`string`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:13:40.637

只需对数组进行排序，然后对其进行循环以计算相等的元素的最长间隔。

# r - 使用 Shiny renderTable 显示 POSIXt 对象

> ID：15500451
> 
> 赞同：6
> 
> 时间：2013-03-19T13:10:00.707
> 
> 标签：r, shiny

我正在制作一个应用程序来用 Shiny 分析时间序列数据。我使用的数据如下所示：

```
 V1     V2
1 2013-02-04 18:15:00 -4.746
2 2013-02-04 18:20:00 -4.745
3 2013-02-04 18:25:00 -4.746
4 2013-02-04 18:30:00 -4.747
5 2013-02-04 18:35:00 -4.747
6 2013-02-04 18:40:00 -4.747 
```

我想在表格中绘制数据：

```
output$view <- renderTable({
  head(datasubset(), 
  n=nrow(datasubset()))
}) 
```

这样做我在运行 Shiny 时遇到错误：

```
Error in Math.POSIXt(x + ifelse(x == 0, 1, 0)) : 
      'abs' not defined for "POSIXt" objects 
```

有没有人有这个错误的解决方案？

更新：错误是由 xtable 引起的：renderTable 使用 xtable() 生成输出，看起来 xtable 通常不能很好地处理日期。

Winston Chang 在这里提出了一个问题： [https ://github.com/rstudio/shiny/issues/129](https://github.com/rstudio/shiny/issues/129)

解决方法可在以下位置获得：[R: xtable and dates](https://stackoverflow.com/questions/8652674/r-xtable-and-dates)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-15T10:43:44.183

查看基本包中的 strftime 函数。Strftime 将 POSIXt 对象格式化为字符，并让您指定格式。

在打印表格之前，您可以执行以下操作：
`datasubset$V1 <- strftime(datasubset$V1, format="%Y-%m-%d %H:%M:%S")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-07T09:07:57.457

希望这会有所帮助-

```
output$$view  <- DT::renderDataTable({

DataFrame<<-read.xlsx(inFile$datapath, 1 )

datatable(DataFrame)%>%
  formatDate(2, method = 'toISOString')

return(DataFrame)

 }) 
```

在这里，您可以在主面板中绘制数据框“DataFrame”，也可以在您的应用程序中使用此数据框进行进一步的计算/修改

```
return(DataFrame) 
```

# sql-server - 根据另一列的条件检查 row_number 结果的行

> ID：15500452
> 
> 赞同：0
> 
> 时间：2013-03-19T13:10:05.417
> 
> 标签：sql-server

我有一个查询输出一些我需要“过滤”的行。

我要过滤的数据是这样的：

```
rownum value
1       0
2       0
3       1
4       1 
```

我需要前 2 行，但仅当它们在值列中有“0”时。

查询的结构是这样的：

```
select count(x)    
from     
(     
    select row_number() over (partition by X order by y) as rownum, bla, bla    
    from [bla bla] 
```

按 [bla bla] 分组）作为 temp
where

```
/* now this is where i want the magic to happen */

temp.rownum = 1 AND temp.value = 0

AND

temp.rownum = 2 AND temp.value = 0 
```

因此，仅当第 1 行和第 2 行的值列中有“0”时，我才需要 x。

如果第 1 行或第 2 行的值列中有“1”，我不想要它们。

我基本上按照我在此处编写的方式编写了 where 子句，但它返回的数据集在第 1 行或第 2 行中具有“1”作为值。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:17:34.377

给定列的单行中的值永远不能同时是`1`两者`2`。

所以，首先，要么使用`OR`（这是我相信你的意图）：

```
WHERE (temp.rownum = 1 AND temp.value = 0)
OR (temp.rownum = 2 AND temp.value = 0) 
```

或者完全简化查询：

```
WHERE temp.rownum <= 2 AND temp.value = 0 
```

* * *

从这里，您将只获得前两行，并且仅当`value = 0`. 如果您只想要*两*行都返回时的行（即两行都有`value = 0`），请添加

```
HAVING COUNT(1) = 2 
```

到查询。

# r - 分析整个数据帧而不是 r 中的单独子集

> ID：15500456
> 
> 赞同：0
> 
> 时间：2013-03-19T13:10:16.753
> 
> 标签：r, subset

我有分析运动中的 Gforces 的代码，它会随着时间的推移返回给我一个 GForces 图。该脚本适用于数据的子集（按 ID 分类），我不知道如何使它兼容一次分析整个数据帧，将结果以多面图的形式返回给我（例如 ggplot）。有谁知道如何做到这一点，或者我注定要一次通过一个 ID 分析我的数据？

代码是：

```
#Subset by ID
number1 <-subset(positions,subset=(ID==1))
head(number1)

A <- numeric()
Al <- numeric()
Radius <- numeric()
GForce <- numeric()
D12 <- numeric()
D13 <- numeric()
D23 <- numeric()
Proportion <- numeric()
Proportion_sel <- numeric()

nr<-length(number1$Timestamp)
for(i in 3:nr){

  D12[i] <- sqrt((positions$X[i-2]-positions$X[i-1])^2 + (positions$Y[i-2]-positions$Y[i-1])^2)
  D23[i] <- sqrt((positions$X[i-1]-positions$X[i])^2 + (positions$Y[i-1]-positions$Y[i])^2)
  D13[i] <- sqrt((positions$X[i-2]-positions$X[i])^2 + (positions$Y[i-2]-positions$Y[i])^2)

  if (D13[i]>0) {
    if ((((D12[i]^2+D13[i]^2-D23[i]^2)^2)/(4*(D13[i]^2))) > D12[i]^2) {
      A[i] <- 0
      Radius[i] <- 0
      GForce[i] <- 0
    } 
    else {
       A[i] <- sqrt(D12[i]^2-(((D12[i]^2+D13[i]^2-D23[i]^2)^2)/(4*(D13[i]^2))))
      Radius[i] <- ((0.5*D13[i])^2+(A[i])^2)/(2*A[i])
      GForce[i] <- ((D12[i]+D23[i])/2)^2/Radius[i]
    }
  }
  else {
    A[i] <- 0
Radius[i] <- 0
    GForce[i] <- 0
  } 

}

# GForce plot over Time
plot(number1$Timestamp,GForce) 
```

这又回到了我身上： - Gforces 随时间变化的图

问题似乎出现在找到一种方法来返回每个 ID 的 GForce 并将它们作为附加列返回到原始数据帧。如果可能的话，使用 ggplot 绘制每个 ID 也很容易，但我不知道如何实现这一点..

数据（简化）：

```
 dput(positions)
structure(list(ID = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L
), Timestamp = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 
12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 24L, 
25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 33L, 34L, 35L, 36L, 37L, 
38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L, 1L, 2L, 3L, 4L, 5L, 6L, 
7L, 8L, 9L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 
20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 
33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L
), X = c(-34.126, -34.087, -34.047, -34.01, -33.983, -33.973, 
-33.985, -34.019, -34.07, -34.13, -34.188, -34.237, -34.273, 
-34.295, -34.305, -34.307, -34.305, -34.301, -34.299, -34.297, 
-34.296, -34.29, -34.272, -34.235, -34.178, -34.107, -34.034, 
-33.967, -33.91, -33.865, -33.832, -33.81, -33.799, -33.8, -33.814, 
-33.841, -33.878, -33.923, -33.975, -34.033, -34.098, -34.17, 
-34.243, -34.311, -34.366, -33.691, -33.646, -33.598, -33.547, 
-33.497, -33.452, -33.414, -33.383, -33.357, -33.331, -33.302, 
-33.268, -33.234, -33.203, -33.179, -33.163, -33.154, -33.145, 
-33.132, -33.111, -33.081, -33.041, -32.993, -32.937, -32.873, 
-32.807, -32.74, -32.676, -32.611, -32.543, -32.468, -32.384, 
-32.293, -32.199, -32.109, -32.029, -31.959, -31.899, -31.846, 
-31.796, -31.749, -31.704, -31.659, -31.612, -31.561), Y = c(3.393, 
3.396, 3.398, 3.402, 3.408, 3.419, 3.434, 3.452, 3.471, 3.489, 
3.506, 3.518, 3.525, 3.526, 3.523, 3.518, 3.513, 3.511, 3.511, 
3.513, 3.516, 3.517, 3.51, 3.494, 3.467, 3.434, 3.402, 3.376, 
3.358, 3.348, 3.343, 3.343, 3.346, 3.351, 3.36, 3.373, 3.39, 
3.408, 3.43, 3.453, 3.479, 3.506, 3.532, 3.555, 3.57, 6.684, 
6.757, 6.823, 6.887, 6.953, 7.024, 7.099, 7.174, 7.245, 7.307, 
7.363, 7.414, 7.466, 7.52, 7.579, 7.643, 7.71, 7.781, 7.853, 
7.923, 7.988, 8.047, 8.098, 8.139, 8.173, 8.202, 8.228, 8.251, 
8.27, 8.285, 8.298, 8.314, 8.337, 8.372, 8.423, 8.487, 8.558, 
8.628, 8.688, 8.735, 8.768, 8.792, 8.814, 8.843, 8.881)), .Names = c("ID", 
"Timestamp", "X", "Y"), row.names = c(NA, 90L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:41:02.163

我加入@Arun，你需要解释你在做什么。该代码并没有真正的帮助，特别是如果写得不好并且有一些错误。

也就是说，如果我查看您的代码，您会按 ID 进行处理。一个想法是将您的代码放在一个函数中，并使用`lapply`.

您按 ID 创建 3 个图，因此您可以创建一个矩阵布局，在其中绘制每行中的 3 个图。

```
ids <- unique(positions$ID)
layout(matrix(1:(length(ids)*3),ncol=3,byrow=TRUE)) 
```

然后为每个 ID 调用您的流程，例如：

```
lapply(ids,function(myID){
  number1 <-subset(positions,subset=(ID==myID))
  .....

  # GForce calculation
  plot(number1$Timestamp,GForce)    ## I change one line 

   ...
  sum(GForce[3:max])
}) 
```

![在此处输入图像描述](../Images/bf07c43b9849a557406f93d0c46d0cb5.png)

# java - 如何在我的控制器命令中使用转发和重定向视图？

> ID：15500467
> 
> 赞同：1
> 
> 时间：2013-03-19T13:10:47.080
> 
> 标签：java, jakarta-ee, websphere-7

我正在使用新的 Controller 命令。我只想知道如何在我的控制器命令中同时使用转发和重定向视图来重定向到在我的 struts-config-ext.xml 中配置的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:12:55.160

你可以尝试这样的事情：

**重定向：**

```
public void performExecute() throws ECException {
        //do something here...
        //....................
        TypedProperty rspProp = new TypedProperty();
        rspProp.put(ECConstants.EC_URL, "YourViewName");
        rspProp.put(ECConstants.EC_VIEWTASKNAME, ECConstants.EC_GENERIC_REDIRECTVIEW);
        //....................
        //....................
    } 
```

**向前：**

```
public void performExecute() throws ECException {
        //do something here...
        //....................
        TypedProperty rspProp = new TypedProperty();
        rspProp.put(ECConstants.EC_VIEWTASKNAME, "YourViewName");       
        //....................
        //....................
    } 
```

转发和重定向都可以在你的控制器命令中使用，将控制从你的命令传递到在你的 strut-config-ext.xml 中配置的视图。如果使用 forward，命令和视图都在单个事务中运行，如果视图中出现任何异常，命令中保存的所有数据都将回滚。但是，如果您在命令中使用重定向视图，则命令和视图在两个事务中运行，这与转发不同。命令完成后，它会提交一个新事务以供查看。在这种情况下，您视图中的异常可能不会回滚您的命令中提交的数据。

# javascript - 尝试为 jQuery Mobile 对话框制作透明背景时出现问题

> ID：15500469
> 
> 赞同：1
> 
> 时间：2013-03-19T13:11:03.213
> 
> 标签：javascript, jquery, jquery-mobile

我在我的项目中使用 jQuery Mobile 1.2.0，在尝试使对话框背景透明时遇到了这样的问题。我已经从[如何删除 Jquery Mobile Dialog 的页面背景中的答案修改了脚本？](https://stackoverflow.com/questions/7776475/how-to-remove-page-background-for-jquery-mobile-dialog/)到这个。

```
$(function() {

$('div[data-role="dialog"]').live('pagebeforeshow', function(e, ui) {
    if( !$('[data-role="old-page"]').length ) {

        $('[data-role="page"].ui-page-active')
            .eq(0).clone()
                .attr('data-role','old-page')
                .appendTo('body')
                .addClass('ui-dialog-background-hidden');
    }
    if ( !!$('[data-role="old-page"].ui-dialog-background-hidden').length ) { 
        $('[data-role="old-page"].ui-dialog-background-hidden')
            .removeClass('ui-dialog-background-hidden')
            .addClass("ui-dialog-background ");
    } 
});

$('div[data-role="dialog"]').live('pagehide', function(e, ui) {
    console.log('pageBeforeHide');
    console.log('old-page',$('[data-role="old-page"].ui-dialog-background'))
    if (!$('.ui-dialog.ui-page-active').length) {
        $('[data-role="old-page"].ui-dialog-background')
            .removeClass('ui-dialog-background')
            .addClass('ui-dialog-background-hidden')
            .remove();
    }
}); 
```

此脚本在打开对话框之前将页面版本保存到 DOM 中。

它“几乎”工作得很好，接受这样一个事实，在我转到另一个页面后，调用对话框然后关闭它，jQuery Mobile 在第 3379 行抛出错误“无法调用未定义的方法'_trigger'”。

有什么想法吗？

先感谢您。

# java - Java Swing JLabel 文本长于界限

> ID：15500475
> 
> 赞同：0
> 
> 时间：2013-03-19T13:11:16.967
> 
> 标签：java, swing, jlabel, bounds, absolutelayout

我对 Java Swing JLabel 有疑问。我想在 JLabel 上显示的文本超出了 JLabel 的范围。我想通过 Marqueeeffect 显示它。我已经实现了效果，但是当有一个字符串超出 JLabel 的范围时，它会被切断，其余的会被替换为“...”。

我的问题是，如果有机会单独设置 JLabel 的文本长度，而不取决于边界，它不会被切断？

希望有人为我解答。

我不使用任何 LayoutManagers 并且我不希望 JLabel 调整大小，它应该只能包含比它的边界更长的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:19:40.777

> 我想通过 Marqueeeffect 显示它。

查看[选取框面板](http://tips4java.wordpress.com/2011/04/24/marquee-panel/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:48:08.557

在本文[`LayoutTest`](https://stackoverflow.com/a/3597688/230513)中，您可以看到标签的 UI 代理如何在`layoutCompoundLabel()`标签大小低于首选大小时删除文本。

其中[`MarqueeTest`](https://stackoverflow.com/a/3621417/230513)，`MarqueePanel`有一个默认值`FlowLayout`，它采用显示标签的首选大小。

![图片](../Images/5594956b8f7eace43032ddd43a7a7abd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:19:16.737

Swing JLabel 不是为做选取框滚动而设计的。

这是 JLabel 的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/JLabel.java)。您可以修改文本处理例程以进行选取框滚动，而不是使用省略号压缩文本。

哦，你最好使用布局管理器。如果没有布局管理器，您的选取框 JLabel 将无法正确布局。

# android - 将 ViewPager 选项卡更改为 ImageViews：

> ID：15500481
> 
> 赞同：0
> 
> 时间：2013-03-19T13:11:30.840
> 
> 标签：android, tabs, android-viewpager, android-imageview

我使用本教程实现了一个`ViewPager`with s：`Tab`

[http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)

它按我的预期工作，但现在我需要`Tab`用 clickable替换`ImageView`s，有没有简单的方法可以做到这一点？

这是当前的结果：

![在此处输入图像描述](../Images/1d7f25f1e255f57cf92f0a0e5a30761a.png)

这是我当前的代码：

**TabsViewPagerFragmentActivity：**

```
public class TabsViewPagerFragmentActivity extends FragmentActivity implements
ViewPager.OnPageChangeListener, TabHost.OnTabChangeListener 
{
static final String TAG = "TabsActivity";
private TabHost mTabHost;
private ViewPager mViewPager;
private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabsViewPagerFragmentActivity.TabInfo>();
private ViewPagerAdapter mPagerAdapter;

/**
* Maintains extrinsic info of a tab's construct
*/
private class TabInfo 
{
    private String tag;
    private Class<?> clss;
    private Bundle args;
    private Fragment fragment;

    TabInfo(String tag, Class<?> clazz, Bundle args) 
    {
        this.tag = tag;
        this.clss = clazz;
        this.args = args;
    }
}

/**
 * A simple factory that returns dummy views to the Tabhost
 */
class TabFactory implements TabContentFactory {

    private final Context mContext;

    /**
     * @param context
     */
    public TabFactory(Context context) {
        mContext = context;
    }

    /** (non-Javadoc)
     * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
     */
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        v.setBackgroundResource(R.drawable.free_text_save_button_selector);
        return v;
    }
}

/** (non-Javadoc)
 * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
*/
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    // Inflate the layout
    setContentView(R.layout.tabs_screen_activity_layout);
    // Initialise the TabHost
    this.initialiseTabHost(savedInstanceState);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
    }
    // Intialise ViewPager
    this.intialiseViewPager();
}

 /** (non-Javadoc)
 * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
 */
protected void onSaveInstanceState(Bundle outState) {
    outState.putString("tab", mTabHost.getCurrentTabTag()); //save the tab selected
    super.onSaveInstanceState(outState);
}

/**
 * Initialise ViewPager
 */
private void intialiseViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();

    fragments.add(Fragment.instantiate(this, Tab1Fragment.class.getName()));
    fragments.add(Fragment.instantiate(this, Tab2Fragment.class.getName()));
    fragments.add(Fragment.instantiate(this, Tab3Fragment.class.getName()));

    this.mPagerAdapter  = new ViewPagerAdapter(super.getSupportFragmentManager(), fragments);
    this.mViewPager = (ViewPager)super.findViewById(R.id.pager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);
}

/**
 * Initialise the Tab Host
 */
private void initialiseTabHost(Bundle args) {
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();
    TabInfo tabInfo = null;
    TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab1").setIndicator("Tab 1"), ( tabInfo = new TabInfo("Tab1", Tab1Fragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab2").setIndicator("Tab 2"), ( tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab3").setIndicator("Tab 3"), ( tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));
    this.mapTabInfo.put(tabInfo.tag, tabInfo);
    // Default to first tab
    //this.onTabChanged("Tab1");
    //
    mTabHost.setOnTabChangedListener(this);
}

/**
 * Add Tab content to the Tabhost
 * @param activity
 * @param tabHost
 * @param tabSpec
 * @param clss
 * @param args
 */
private static void AddTab(TabsViewPagerFragmentActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
    // Attach a Tab view factory to the spec
    tabSpec.setContent(activity.new TabFactory(activity));
    tabHost.addTab(tabSpec);
}

/** (non-Javadoc)
 * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
 */
public void onTabChanged(String tag) {
    //TabInfo newTab = this.mapTabInfo.get(tag);
    int pos = this.mTabHost.getCurrentTab();
    this.mViewPager.setCurrentItem(pos);
}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageScrolled(int, float, int)
 */
@Override
public void onPageScrolled(int position, float positionOffset,
        int positionOffsetPixels) {
    // TODO Auto-generated method stub

}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageSelected(int)
 */
@Override
public void onPageSelected(int position) {
    // TODO Auto-generated method stub
    this.mTabHost.setCurrentTab(position);
}

/* (non-Javadoc)
 * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageScrollStateChanged(int)
 */
@Override
public void onPageScrollStateChanged(int state) {
    // TODO Auto-generated method stub

}
} 
```

**ViewPagerAdapter：**

```
public class ViewPagerAdapter extends FragmentPagerAdapter 
{
private List<Fragment> fragments;

/**
 * @param fm
 * @param fragments
 */
public ViewPagerAdapter(FragmentManager fm, List<Fragment> fragments) {
    super(fm);
    this.fragments = fragments;
}

/* (non-Javadoc)
 * @see android.support.v4.app.FragmentPagerAdapter#getItem(int)
 */

@Override
public Fragment getItem(int position) {
    return this.fragments.get(position);
}

/* (non-Javadoc)
 * @see android.support.v4.view.PagerAdapter#getCount()
 */

@Override
public int getCount() {
    return this.fragments.size();
}
} 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:25:42.473

您可以将任何视图添加到您`Tabhost`的如下 -

```
 TabSpec tabSpec = mTabHost.newTabSpec("Tag");
        ImageView indicator = new ImageView(activity.getBaseContext());
        indicator.setImageResource(R.id.tab_img);

        tabSpec.setIndicator(indicator);
        tabSpec.setContent(activity.new TabFactory(activity));
        mTabHost.addTab(tabSpec); 
```

`R.id.tab_img`如果您还想更改选定状态和正常状态的可绘制对象，请记住创建一个选择器。

# .net - 如何在 TitleBar 中添加“最小化到系统托盘”按钮？

> ID：15500482
> 
> 赞同：0
> 
> 时间：2013-03-19T13:11:31.620
> 
> 标签：.net, vb.net, visual-studio, titlebar, custom-titlebar

如何在表单标题栏中的“最小化”按钮附近添加“最小化到系统托盘”？

初学者是容易还是难？我需要用 WinAPI 做吗？

我找不到有关此的任何信息或完整示例。

PS：我在 Win7 上使用 VB.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T22:09:47.840

在 nView 菜单上有这样的东西，或者你可以将 formborderstyle 设置为 none，添加一个按钮，然后添加以下代码：

```
Dim i As New NotifyIcon With {Set properties here}
Me.Hide() 
```

然后向通知图标添加一个事件以使表单显示。

编辑：我刚刚找到这个链接：[添加自定义标题栏按钮](https://stackoverflow.com/questions/6172470/adding-a-custom-button-in-title-bar-vb-net)。

# php - SQL查询GROUP BY id过滤器？

> ID：15500483
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:11:42.013
> 
> 标签：php, mysql, sql, database

这是查询的输出： ![在此处输入图像描述](../Images/319b9d7e21372af39cf68fcb91883b11.png)

```
选择 * 从
                    （（选择
                        privatemsgs.id,
                        privatemsgs.useradn,
                        privatemsgs.useraid,
                        privatemsgs.title,
                        privatemsgs.created,
                        privatemsgs.timee，
                        privatemsgs.isread,
                        u.photo AS creatorphoto,
                        privatemsgs.relatedto
                    来自私人信息
                    左连接
                        用户 AS u ON(privatemsgs.useraid = u.id)
                    WHERE userbid='$myid'
                        AND relatedto=0 和 bdel=1)
                    联盟
                    （选择
                        privatemsgs.id,
                        privatemsgs.useradn,
                        privatemsgs.useraid,
                        privatemsgs.title,
                        privatemsgs.created,
                        privatemsgs.timee，
                        privatemsgs.isread,
                        u.photo AS creatorphoto,
                        rel.relatedto
                    FROM privatemsgs AS rel
                        加入 privatemsgs ON(rel.relatedto = privatemsgs.id)
                        左连接
                        用户 AS u ON(rel.useraid = u.id)
                    WHERE rel.userbid='$myid'
                    )) 私人信息
                    按 ID 分组
                    ORDER BY timee DESC

```

我有双重身份“2”。第一个带有“isread = 0”，第二个带有“isread = 1”。

当我添加“group by id”时，我得到了（第 2 行）

但我需要输出显示 isread = 1 （如第 3 行）

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:20:12.507

在 * 附近添加 MAX(isread)。GROUP BY 仅适用于聚合函数

# mysql - 如何从 MySQL 中删除数据库

> ID：15500487
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:12:02.540
> 
> 标签：mysql

我无法删除我得到的 MySQL 数据库，我使用的是 5.6 MySql

当我点击显示数据库时：

但是，当我使用命令时，我有数据库列表，例如`gameserver_beta`,`loginserver_beta`等等**`drop database <gameserver_beta>;`**

我得到一个

> 错误 1064 (42000) 您的 SQL syntec 有错误，请检查与您的 MySQL 服务器版本对应的手册...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:13:29.687

```
drop database database_name;

drop database ; 
```

在这里您没有指定任何数据库名称

试试这个

# css - 如何用全高背景颜色填充引导程序中的列

> ID：15500494
> 
> 赞同：0
> 
> 时间：2013-03-19T13:12:14.217
> 
> 标签：css, twitter-bootstrap

无论列高如何，我都希望左侧的列完全填充背景色。有人对此问题有解决方案吗？

例子：

![图片](../Images/099aa62eb60f014a8a2e6e70d655bea1.png)

我的 HTML 是：

```
<div class="row">
 <div class="span8">
 </div>
 <div class="span4">
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:24:44.617

只需为左列创建一个 div

```
<div id="coloredcolumn">
    empty div at the left
    </div>

    #coloredcolumn{
    height: inherit;
    position: absolute
    background-color: #3A3A3A;
    padding: 0;
    margin: 0;
    } 
```

你要这个？当我理解正确时。

# mysql - 用我的表设置主键有什么问题？“平等或删除建议”

> ID：15500498
> 
> 赞同：0
> 
> 时间：2013-03-19T13:12:19.743
> 
> 标签：mysql, phpmyadmin, primary-key

我在 MySQL 中创建了这个表：

```
CREATE TABLE ACESSO -- cadastro de usuários para acesso ao sistema
(
    ACESSO_ID           CHAR(20) UNIQUE NOT NULL PRIMARY KEY,   
    LICENCIADO          CHAR(20), -- identifica a qual empresa este usuário faz parte, conectando o acesso de acordo com o registro do sistema  
    CADASTRO            CHAR(20) NOT NULL, -- cadastro da tabela de cpf
    SITUACAO            ENUM('NORMAL','BLOQUEADO','SUSPENSO'), 
    SENHA               CHAR(32) NOT NULL,                          
    DISPOSITIVO         VARCHAR(11), -- número do chip celular 3g usado no coletor de dados
    PERFIL              ENUM('LICENCIADO','ADMINISTRADOR','OPERADOR','ENTREVISTADOR','SISTEMA'), 
    ACESSOS             INT UNSIGNED DEFAULT 0, -- número de acessos ao sistema
    ULTIMO_ACESSO       DATETIME, -- data e hora do último acesso ao sistema
    COMENTARIOS         VARCHAR(255), -- qualquer texto de interesse do administrador do sistema sobre este usuário
    UNIQUE INDEX (CADASTRO, LICENCIADO)  -- estes dois indices permitem que hava mais de um cadastro com o mesmo cpf e email
)
ENGINE=INNODB DEFAULT CHARSET=utf8  COLLATE=utf8_general_ci; 
```

当我在 PHPMyAdmin 中编译它时，它可以工作，但我得到了这个建议：

```
"The indexing PRIMARY and ACESSO_ID appear to be equal or one of them may have been removed." 
```

如图所示：

![在此处输入图像描述](../Images/3387bbfb6aa2a0294f906e215d88e7bb.png)

**我的桌子将来会有问题吗？**所有这些都显示了该信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:16:43.477

主键已经是唯一的。

只需删除唯一。

# asp.net - 如何使用用户控件和母版页进行常见登录

> ID：15500501
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:12:34.650
> 
> 标签：asp.net, user-controls, master-pages

[请参阅此处的代码](https://stackoverflow.com/questions/15480287/a-page-can-have-only-one-server-side-form-tag)

我希望使用母版页对所有页面进行通用登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:25:40.810

只需创建一个基本的用户控件，然后将其拖到您的母版页上。

这是一个简单的例子：

[http://www.c-sharpcorner.com/UploadFile/cvinodkumar/LoginUserControl11232005011130AM/LoginUserControl.aspx](http://www.c-sharpcorner.com/UploadFile/cvinodkumar/LoginUserControl11232005011130AM/LoginUserControl.aspx)

# ios - 如何处理来自 facebook api 的字符串响应？

> ID：15500506
> 
> 赞同：1
> 
> 时间：2013-03-19T13:12:44.923
> 
> 标签：ios, nsstring, fbconnect

嗨，我从 facebook api 得到的字符串为：

```
family = (
    {relationship = brother;uid = 100767;},
   relationship = cousin;uid = 10900;},
   {name = myaunt;relationship = aunt;},
   { name = krish; relationship = uncle;}
); 
```

如何从中获取一系列关系和uid？

我得到的结果是：

```
relation = (
    brother,
    cousin,
    aunt,
    uncle
) 
```

如何处理这个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:16:04.873

没有使用 Objective-c 解析 JSON 响应的本机代码，但有现成的第三方库可用。[TouchJSON](https://github.com/TouchCode/TouchJSON)是一个流行的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:31:08.617

如果您使用的是 ios 5

```
NSDictionary *responseDictionary = [NSJSONSerialization JSONObjectWithData: self.responseData options: NSJSONReadingMutableContainers error: &err]; 
```

否则使用来自 github parser 的 SBJSON 来解析 facebook api 的响应

```
NSArray *response = [[responseDictionary objectForKey:@"family"] valueForKey:@"relationship"]; 
```

并将它们存储在数组中，同样可以为 UID 实现

# c# - 使用多变量选择变量

> ID：15500508
> 
> 赞同：1
> 
> 时间：2013-03-19T13:12:49.427
> 
> 标签：c#, variables

我有很多`Int32`要选择的变量`int`要检查。是否可以制作这条线并使用多变量选择一个变量？

```
Int32 redleft0 = 0; 
Int32 redleft1 = 0; 
Int32 redleft2 = 0; 
Int32 redleft3 = 0; 
Int32 redleft4 = 0; 
Int32 redleft5 = 0;
Int32 blueleft0 = 0; 
Int32 blueleft1 = 0; 
Int32 blueleft2 = 0; 
Int32 blueleft3 = 0;     
Int32 blueleft4 = 0; 
Int32 blueleft5 = 0;

redorblue = "red";    
for (int i = 0; i < count; i++)
{ 
    String checkleftint = (redorblue + "left" + i);                   
    if (checkleftint < 0)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T13:16:02.990

你应该在这里使用一个数组——或者更确切地说是两个——：

```
var red = new int[]{0,0,0,0,0,0};
var blue = new int[]{0,0,0,0,0,0};

var arrayToUse = redorblue == "red" ? red : blue;
for (int i = 0; i < count; i++)
{
    var value = arrayToUse[i];
    // ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:16:10.443

使用带有键和值的数组或字典，以便您可以使用键提取值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:16:31.593

它不会那样工作。要么不使用单独的变量，而是使用数组：

```
int[,] vars = new int[2,6] { { 0, 0, 0, 0, 0, 0 },  { 0, 0, 0, 0, 0, 0 } };
// int[0,*] would be redleft and int[1,*] would be blueleft 
```

或使用`Dictionary<string, int>`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T13:16:43.597

如果您使用[enum](http://msdn.microsoft.com/it-it/library/sbbt4032%28v=vs.110%29.aspx)是可能的，例如：

```
enum values { redleft0 = 0; redleft1 = 120; redleft2 = 13; } 
```

通过使用`enum`

所以你要做的只是：

```
for (int i = 0; i < count; i++)
{  
   if(i == values.redLeft0){
     ...
   }
} 
```

通过使用`enum`，您可以将您想要的*名称*与您想要的*号码*相关联。

如果这不是您要的，请澄清。

# vhdl - 如何使这个 VHDL 代码可合成？

> ID：15500510
> 
> 赞同：2
> 
> 时间：2013-03-19T13:12:53.760
> 
> 标签：vhdl

我有使用闲置语法的 VHDL 代码：

```
 signal_1   <= (others => '0')     when cau_state = st_idle       else
                  signal_2 - signal_3  when cau_state = st_cycle_1    else
                  signal_4             when cau_state = st_cycle_2    else
                  signal_5             when cau_state = st_cycle_3    else
                  signal_6             when cau_state = st_cycle_4    else
                  signal_1; 
```

where`cau_state`是保持当前状态的信号。这种语法在 Model-Sim 上的模拟中工作，一切正常。但是当我想将代码烧录到 FPGA 上时，代码并没有在 Altera Quartus II 32 位版本上合成。12.1 我收到了以下错误消息：

```
Warning (13012): Latch CAU:uut|cross_3_sig[0][31] has unsafe behavior
Warning (13013): Ports D and ENA on the latch are fed by the same signal CAU:uut|cau_state.st_cycle_2
Warning (13012): Latch CAU:uut|cross_3_sig[0][30] has unsafe behavior
Warning (13013): Ports D and ENA on the latch are fed by the same signal CAU:uut|cau_state.st_cycle_2 
```

我收到许多信号的这些消息，但**不是**所有使用此语法的信号。对于获得此消息的信号，我得到它的所有位：`cross_3_sig[0][31]`to `cross_3_sig[0][0]`. 信号的语法`cross_3_sig(0)`是：

```
constant WIDTH          : integer := 32;
...
subtype scalar          is std_logic_vector((WIDTH-1) downto 0);                                  
type    vector_nd       is array (natural range <>) of scalar;
subtype vector_3d       is vector_nd(2 downto 0);
...
signal cross_3_sig          : vector_3d;
...
cross_3_sig(0)      <= sum_mults_out_sig              when cau_state = st_cycle_2  else              
                       mult1_out_sig - mult2_out_sig  when cau_state = st_cycle_9  else                          
                       cross_3_sig(0); 
```

还有一些地方我分配给`cross_3_sig(0)`其他信号，即：

```
numer_sig           <= C_ZERO - cross_3_sig(0) & (16 downto 0 => '0'); 
mult1_in2_sig       <= (others => '0') when cau_state = st_idle       else
                       ...
                       cross_3_sig(0)  when cau_state = st_cycle_11   else
                       ... 
```

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:45:27.830

问题是这种形式的表达式创建了一个锁存器（它对其控制信号上的毛刺很敏感），而且它是一个具有多个控制信号的锁存器，在实际硬件中没有直接的等价物。

```
 signal_1   <= (others => '0')     when cau_state = st_idle       else
              ...
              signal_6             when cau_state = st_cycle_4    else
              signal_1; 
```

任何时候你看到（在时钟进程之外）类似的东西

```
signal_1   <= ... else signal_1; 
```

你知道你有问题。这是一个直接馈送自身的信号，尝试使用简单的电线作为记忆。

这种模式的正确用途是作为多路复用器，而不是作为存储器，

```
output_1 <= input_1 when ... else
            input_2 when ... else
            input_n; 
```

记住 signal1 旧值的正确方法是时钟进程，例如

```
process (clk)
begin
    if rising_edge(clk) then
        if    cau_state = st_idle    then signal_1   <= (others => '0') 
        ...
        elsif cau_state = st_cycle_4 then signal_1  <= signal_6;
        end if;
    end if;
end process; 
```

如果没有赋值，signal_1 将保持其当前值。

或者更好的选择：在过程中使用 case 语句：

```
process (clk)
begin
    if rising_edge(clk) then
        case cau_state is
           when st_idle    => signal_1   <= (others => '0') 
           ...
           when st_cycle_4 => signal_1  <= signal_6;
           -- when others => some default action
        end case;
    end if;
end process; 
```

这确实将语义更改为时钟设计，但至少可以说，非时钟设计在 FPGA 中很麻烦！

# python - neo4jrestclient ，在创建节点后添加属性

> ID：15500516
> 
> 赞同：0
> 
> 时间：2013-03-19T13:13:10.373
> 
> 标签：python, nosql, neo4j

我正在尝试创建新节点，但是当我在下一行添加额外的属性时它失败了。例如：

```
gdb = GraphDatabase("http://localhost:7474/db/data/")
index = gdb.nodes.indexes.create('blogger')
for i in b:
  uid = gdb.nodes.create(user_id=x,gender=i[0],profile_views=i[1],industry=i[2],occupation=i[3],email=i[4],locality=i[5],country=i[6],region=i[7])
# till here it adds all the properties as mentioned
# following 2 lines of code fails
uid.setProperty('hosts',<value>)
uid.relationships.create("follows",<value>) 
```

另一个查询：**我们如何将一个节点的属性与另一个节点的属性添加关系**

例如：在上述关系中，我想创建每个节点唯一的主机之间的关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:05:02.077

根据作者的说法，@versae 是

在 neo4j-rest-client 中，语法只是

```
uid.set('hosts',<value>) 
```

或者

```
uid['hosts'] = <value> 
```

见：[https ://groups.google.com/d/msg/neo4j/YbIKeHh4lCw/Grj8nRx7UdAJ](https://groups.google.com/d/msg/neo4j/YbIKeHh4lCw/Grj8nRx7UdAJ)

# iphone - 使用 AVFoundation 框架捕获叠加图像

> ID：15500517
> 
> 赞同：0
> 
> 时间：2013-03-19T13:13:10.950
> 
> 标签：iphone, uiimageview, avfoundation, avcapturesession, camera-overlay

我想用叠加图像拍照。

代码：

```
- (void)addStillImageOutput
{

   // NSLog(@"You capture image");
    [self setStillImageOutput:[[[AVCaptureStillImageOutput alloc] init] autorelease]];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys:AVVideoCodecJPEG,AVVideoCodecKey,nil];
    [[self stillImageOutput] setOutputSettings:outputSettings];

    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in [[self stillImageOutput] connections]) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo] ) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) {
            break;
        }
    }

    [[self captureSession] addOutput:[self stillImageOutput]];
}

- (void)captureStillImage
{
    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in [[self stillImageOutput] connections]) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual:AVMediaTypeVideo]) {
                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) {
            break;
        }
    }

    NSLog(@"about to request a capture from: %@", [self stillImageOutput]);

    [[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:videoConnection
                                                         completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error) {
                                                             CFDictionaryRef exifAttachments = CMGetAttachment(imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
                                                             if (exifAttachments) {
                                                                 NSLog(@"attachements: %@", exifAttachments);
                                                             } else {
                                                                 NSLog(@"no attachments");
                                                             }
                                                             NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
                                                             UIImage *image = [[UIImage alloc] initWithData:imageData];
                                                             [self setStillImage:image];
                                                             [image release];
                                                             [[NSNotificationCenter defaultCenter] postNotificationName:kImageCapturedSuccessfully object:nil];
                                                         }];

} 
```

叠加图像：

```
-(void)ButtonPressed1{

UIImageView *overlayImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"sof.png"]];
    [overlayImageView setFrame:CGRectMake(30, 100, 260, 200)];

    [[self view] addSubview:overlayImageView];
    [overlayImageView release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:55:14.533

`captureStillImageAsynchronouslyFromConnection`仅从连接 ( `AVCaptureConnection`) 中捕获数据，并且其他图像未连接。他们在视野中。

因此，要“生成”包含所有元素（图片和叠加层）的图像，您必须执行以下操作：

```
UIGraphicsBeginImageContext(stillImage.size);

[stillImage drawInRect:CGRectMake(0, 0, picture.size.width, picture.size.height)];
[overlayImageView drawInRect:CGRectMake(overlayImageView.frame.origin.x, overlayImageView.frame.origin.y, overlayImageView.frame.size.width, overlayImageView.frame.size.height)];

UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

此代码考虑图片大小等于屏幕大小。如果图片大小不同，则必须计算坐标以将叠加层放置在`drawRect`方法中。抱歉英语不好。

# spring - 在 SecurityContext 中找不到 Authentication 对象 - Spring 3.2.2

> ID：15500519
> 
> 赞同：51
> 
> 时间：2013-03-19T13:13:16.163
> 
> 标签：spring, spring-mvc, spring-security

我正在尝试从实现`ApplicationListener<AuthenticationSuccessEvent>`成功登录接口的类（Spring 3.2.2 和 Spring Security 3.2.0 M1）调用受保护的方法。[这](https://stackoverflow.com/q/15493237/1391249)是我之前的问题。

该应用程序在以下环境下运行。

*   春天 3.2.2
*   春季安全 3.2.0
*   JPA 2.0
*   JSF 2.1.9
*   MySQL 5.6.11
*   JDK-7u11
*   NetBeans 7.2.1

我已将以下与 Spring 安全性相关的库添加到类路径中。

*   spring-security-core-3.2.0.M1.jar
*   spring-security-config-3.2.0.M1.jar
*   spring-security-web-3.2.0.M1.jar

* * *

实现的类`ApplicationListener<AuthenticationSuccessEvent>`如下。

```
package loginsuccesshandler;

import admin.dao.service.StateService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationListener;
import org.springframework.security.authentication.event.AuthenticationSuccessEvent;
import org.springframework.stereotype.Service;

@Service
public final class AuthSuccessHandler implements ApplicationListener<AuthenticationSuccessEvent>
{
    @Autowired
    private StateService stateService;

    @Override
    public void onApplicationEvent(AuthenticationSuccessEvent event) 
    {
        System.out.println(event.getAuthentication());
        System.out.println("rowCount = "+stateService.rowCount());
    }
} 
```

即使使用正确的凭据并显示以下消息，这也可以防止用户登录（这只是一个示例。根本不需要在成功验证时计算状态数）。

> 在 SecurityContext 中找不到 Authentication 对象

* * *

引发事件。方法内的第一条语句`onApplicationEvent()`显示以下内容。

```
org.springframework.security.authentication.UsernamePasswordAuthenticationToken@45264a59: Principal: org.springframework.security.core.userdetails.User@586034f:Username: admin; 
Password: [PROTECTED]; 
Enabled: true; 
AccountNonExpired: true; 
credentialsNonExpired: true; 
AccountNonLocked: true; 
Granted Authorities: ROLE_ADMIN; 
Credentials: [PROTECTED]; 
Authenticated: true; 
Details: org.springframework.security.web.authentication.WebAuthenticationDetails@380f4: RemoteIpAddress: 127.0.0.1; 
SessionId: 88777A678DC5BB0272F84CA4BC61FAF2;
Granted Authorities: ROLE_ADMIN 
```

所以看起来用户已通过身份验证并且身份验证对象可用。

* * *

我的`springSecurity.xml`文件如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/utility/Login.jsf*" security="none"/>
    <debug/>
    <http auto-config='true' use-expressions="true" disable-url-rewriting="true">
        <session-management session-fixation-protection="newSession">
            <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
        </session-management>

        <intercept-url pattern="/admin_side/**" access="hasRole('ROLE_ADMIN')" requires-channel="any"/>
        <intercept-url pattern="/utility/Login.jsf" access="permitAll" requires-channel="any"/>
        <http-basic />
        <anonymous />

        <form-login login-processing-url="/j_spring_security_check" login-page="/utility/Login.jsf" authentication-success-handler-ref="loginSuccessHandler" authentication-failure-handler-ref="authenticationFailureHandler"/>
        <logout logout-success-url="/utility/Login.jsf" invalidate-session="true" delete-cookies="JSESSIONID"/>
    </http>

    <authentication-manager>
       <authentication-provider>
            <jdbc-user-service data-source-ref="dataSource"
               users-by-username-query="select email_id, password, enabled from user_table where lower(email_id)=lower(?)"
               authorities-by-username-query="select ut.email_id, ur.authority from user_table ut, user_roles ur where ut.user_id=ur.user_id and lower(ut.email_id)=lower(?)"/>
       </authentication-provider>
    </authentication-manager>

    <beans:bean id="loginSuccessHandler" class="loginsuccesshandler.LoginSuccessHandler"/>
    <beans:bean id="authenticationFailureHandler" class="loginsuccesshandler.AuthenticationFailureHandler" />        

    <global-method-security secured-annotations="enabled" pre-post-annotations="enabled" proxy-target-class="false">
        <protect-pointcut expression="execution(* admin.dao.*.*(..))" access="ROLE_ADMIN"/>
    </global-method-security>
</beans:beans> 
```

* * *

当文件中省略以下 XML 行时，Spring 安全性工作正常`spring-security.xml`。

```
<global-method-security secured-annotations="enabled" proxy-target-class="false">
     <protect-pointcut expression="execution(* admin.dao.*.*(..))" access="ROLE_ADMIN"/>
</global-method-security> 
```

`ApplicationListener<AuthenticationSuccessEvent>`可以从实现接口的类中调用受保护的方法（应用了方法安全性）吗？如果是，那么在我的情况下缺少什么？到目前为止，我已经点击了数千个链接，但找不到任何线索。

* * *

该`application-context.xml`文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
       http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <context:component-scan base-package="admin.mangedbean loginsuccesshandler" use-default-filters="false">
        <context:include-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
        <context:include-filter expression="org.springframework.web.bind.annotation.ControllerAdvice" type="annotation"/>  
    </context:component-scan>

    <mvc:annotation-driven/>
    <context:annotation-config/>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>            

    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory" >
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.enable_lazy_load_no_trans">true</prop>
            </props>
        </property>

        <property name="jpaPropertyMap">
            <map>
              <entry key="eclipselink.weaving" value="false"/>
            </map>
        </property>

        <property name="loadTimeWeaver">
            <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>

    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:comp/env/jdbc/social_networking"/>
    </bean>

    <!--The bean shown in the beginning is configured here-->
    <bean id="authSuccessHandler" class="loginsuccesshandler.AuthSuccessHandler"/> 

    <bean id="testService" class="admin.dao.TestDAO"/>
    <bean id="stateService" class="admin.dao.StateDAO"/>
    <bean id="sharableService" class="admin.dao.SharableDAO"/>
</beans> 
```

* * *

该`web.xml`文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">        

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <!--<param-value>Development</param-value>-->
        <param-value>Production</param-value>
    </context-param>

    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.properties</param-value>
    </context-param>

    <context-param>
        <param-name>log4jExposeWebAppRoot</param-name>
        <param-value>false</param-value>
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>        

    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <security-constraint>
        <display-name>Restrict direct access to XHTML files</display-name>
        <web-resource-collection>
            <web-resource-name>XHTML files</web-resource-name>
            <url-pattern>*.xhtml</url-pattern>
        </web-resource-collection>
        <auth-constraint />
    </security-constraint> 

    <session-config>
        <session-timeout>
            120
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/utility/Login.jsf</welcome-file>
    </welcome-file-list>

    <resource-ref>
        <res-ref-name>jdbc/social_networking</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
</web-app> 
```

* * *

当尝试登录最终失败时，可以在下面看到调试信息。

```
DEBUG [http-apr-8080-exec-55] (AntPathRequestMatcher.java:116) - Checking match of request : '/j_spring_security_check'; against '/utility/login.jsf*'
DEBUG [http-apr-8080-exec-55] (AntPathRequestMatcher.java:116) - Checking match of request : '/j_spring_security_check'; against '/utility/login.jsf*'
DEBUG [http-apr-8080-exec-55] (FilterChainProxy.java:337) - /j_spring_security_check at position 1 of 13 in additional filter chain; firing Filter: 'ChannelProcessingFilter'
DEBUG [http-apr-8080-exec-55] (AntPathRequestMatcher.java:116) - Checking match of request : '/j_spring_security_check'; against '/admin_side/**'
DEBUG [http-apr-8080-exec-55] (AntPathRequestMatcher.java:116) - Checking match of request : '/j_spring_security_check'; against '/utility/login.jsf'
DEBUG [http-apr-8080-exec-55] (FilterChainProxy.java:337) - /j_spring_security_check at position 2 of 13 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
DEBUG [http-apr-8080-exec-55] (HttpSessionSecurityContextRepository.java:139) - HttpSession returned null object for SPRING_SECURITY_CONTEXT
DEBUG [http-apr-8080-exec-55] (HttpSessionSecurityContextRepository.java:85) - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@1103da5\. A new one will be created.
DEBUG [http-apr-8080-exec-55] (FilterChainProxy.java:337) - /j_spring_security_check at position 3 of 13 in additional filter chain; firing Filter: 'ConcurrentSessionFilter'
DEBUG [http-apr-8080-exec-55] (FilterChainProxy.java:337) - /j_spring_security_check at position 4 of 13 in additional filter chain; firing Filter: 'WebAsyncManagerIntegrationFilter'
DEBUG [http-apr-8080-exec-55] (FilterChainProxy.java:337) - /j_spring_security_check at position 5 of 13 in additional filter chain; firing Filter: 'LogoutFilter'
DEBUG [http-apr-8080-exec-55] (FilterChainProxy.java:337) - /j_spring_security_check at position 6 of 13 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
DEBUG [http-apr-8080-exec-55] (AbstractAuthenticationProcessingFilter.java:189) - Request is to process authentication
DEBUG [http-apr-8080-exec-55] (ProviderManager.java:152) - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
DEBUG [http-apr-8080-exec-55] (JdbcTemplate.java:637) - Executing prepared SQL query
DEBUG [http-apr-8080-exec-55] (JdbcTemplate.java:572) - Executing prepared SQL statement [select email_id, password, enabled from user_table where lower(email_id)=lower(?)]
DEBUG [http-apr-8080-exec-55] (DataSourceUtils.java:110) - Fetching JDBC Connection from DataSource
DEBUG [http-apr-8080-exec-55] (DataSourceUtils.java:327) - Returning JDBC Connection to DataSource
DEBUG [http-apr-8080-exec-55] (JdbcTemplate.java:637) - Executing prepared SQL query
DEBUG [http-apr-8080-exec-55] (JdbcTemplate.java:572) - Executing prepared SQL statement [select ut.email_id, ur.authority from user_table ut, user_roles ur where ut.user_id=ur.user_id and lower(ut.email_id)=lower(?)]
DEBUG [http-apr-8080-exec-55] (DataSourceUtils.java:110) - Fetching JDBC Connection from DataSource
DEBUG [http-apr-8080-exec-55] (DataSourceUtils.java:327) - Returning JDBC Connection to DataSource
DEBUG [http-apr-8080-exec-55] (AbstractBeanFactory.java:246) - Returning cached instance of singleton bean 'authSuccessHandler'
DEBUG [http-apr-8080-exec-55] (AbstractBeanFactory.java:246) - Returning cached instance of singleton bean 'org.springframework.security.core.session.SessionRegistryImpl#0'
DEBUG [http-apr-8080-exec-55] (AbstractFallbackTransactionAttributeSource.java:106) - Adding transactional method 'rowCount' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
DEBUG [http-apr-8080-exec-55] (DelegatingMethodSecurityMetadataSource.java:65) - Caching method [CacheKey[admin.dao.StateDAO; public abstract java.lang.Long admin.dao.service.StateService.rowCount()]] with attributes [ROLE_ADMIN]
DEBUG [http-apr-8080-exec-55] (AbstractBeanFactory.java:246) - Returning cached instance of singleton bean 'transactionManager'
DEBUG [http-apr-8080-exec-55] (AbstractPlatformTransactionManager.java:366) - Creating new transaction with name [admin.dao.StateDAO.rowCount]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly; ''
DEBUG [http-apr-8080-exec-55] (JpaTransactionManager.java:369) - Opened new EntityManager [org.hibernate.ejb.EntityManagerImpl@84ff11] for JPA transaction
DEBUG [http-apr-8080-exec-55] (JpaTransactionManager.java:408) - Not exposing JPA transaction [org.hibernate.ejb.EntityManagerImpl@84ff11] as JDBC transaction because JpaDialect [org.springframework.orm.jpa.DefaultJpaDialect@d9dbb8] does not support JDBC Connection retrieval
DEBUG [http-apr-8080-exec-55] (AbstractSecurityInterceptor.java:194) - Secure object: ReflectiveMethodInvocation: public abstract java.lang.Long admin.dao.service.StateService.rowCount(); target is of class [admin.dao.StateDAO]; Attributes: [ROLE_ADMIN]
DEBUG [http-apr-8080-exec-55] (AbstractBeanFactory.java:246) - Returning cached instance of singleton bean 'authSuccessHandler'
DEBUG [http-apr-8080-exec-55] (AbstractBeanFactory.java:246) - Returning cached instance of singleton bean 'org.springframework.security.core.session.SessionRegistryImpl#0'
DEBUG [http-apr-8080-exec-55] (AbstractPlatformTransactionManager.java:844) - Initiating transaction rollback
DEBUG [http-apr-8080-exec-55] (JpaTransactionManager.java:534) - Rolling back JPA transaction on EntityManager [org.hibernate.ejb.EntityManagerImpl@84ff11]
DEBUG [http-apr-8080-exec-55] (JpaTransactionManager.java:594) - Closing JPA EntityManager [org.hibernate.ejb.EntityManagerImpl@84ff11] after transaction
DEBUG [http-apr-8080-exec-55] (EntityManagerFactoryUtils.java:338) - Closing JPA EntityManager
DEBUG [http-apr-8080-exec-55] (AbstractAuthenticationProcessingFilter.java:346) - Authentication request failed: org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext
DEBUG [http-apr-8080-exec-55] (AbstractAuthenticationProcessingFilter.java:347) - Updated SecurityContextHolder to contain null Authentication
DEBUG [http-apr-8080-exec-55] (AbstractAuthenticationProcessingFilter.java:348) - Delegating to authentication failure handler loginsuccesshandler.AuthenticationFailureHandler@14883a3
DEBUG [http-apr-8080-exec-55] (DefaultRedirectStrategy.java:36) - Redirecting to '/SocialNetworking/utility/Login.jsf'
DEBUG [http-apr-8080-exec-55] (HttpSessionSecurityContextRepository.java:269) - SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
DEBUG [http-apr-8080-exec-55] (SecurityContextPersistenceFilter.java:97) - SecurityContextHolder now cleared, as request processing completed
DEBUG [http-apr-8080-exec-49] (AntPathRequestMatcher.java:116) - Checking match of request : '/utility/login.jsf'; against '/utility/login.jsf*'
DEBUG [http-apr-8080-exec-49] (AntPathRequestMatcher.java:116) - Checking match of request : '/utility/login.jsf'; against '/utility/login.jsf*'
DEBUG [http-apr-8080-exec-49] (FilterChainProxy.java:180) - /utility/Login.jsf has an empty filter list 
```

* * *

最后一件事情：

当我放弃这个bean并从`application-context.xml`文件中注销时，登录成功，但在服务器控制台上可以看到以下信息。

```
DEBUG [http-apr-8080-exec-165] (HttpSessionSecurityContextRepository.java:139) - HttpSession returned null object for SPRING_SECURITY_CONTEXT
DEBUG [http-apr-8080-exec-165] (HttpSessionSecurityContextRepository.java:85) - No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@b910c1\. A new one will be created. 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-05-24T03:17:32.250

安全的授权检查部分从 中获取经过身份验证的对象`SecurityContext`，该对象将在请求通过 spring 安全过滤器时设置。我在这里的假设是登录后不久，这没有被设置。您可能可以使用下面给出的技巧来设置值。

```
try {
    SecurityContext ctx = SecurityContextHolder.createEmptyContext();
    SecurityContextHolder.setContext(ctx);
    ctx.setAuthentication(event.getAuthentication());

    //Do what ever you want to do

} finally {
    SecurityContextHolder.clearContext();
} 
```

更新：

您还可以查看[InteractiveAuthenticationSuccessEvent](http://static.springsource.org/spring-security/site/docs/3.2.x/apidocs/org/springframework/security/authentication/event/InteractiveAuthenticationSuccessEvent.html)，一旦设置，它将被调用`SecurityContext`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-03-13T14:36:28.857

如果您在创建时将`@PreAuthorize`或`@PostAuthorize`放入 Bean 中，也会发生这种情况。我建议将此类注释移至感兴趣的方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-24T10:31:29.700

正如@Arun P Johny 已经指出的那样，问题的根本原因是在`AuthenticationSuccessEvent`处理时`SecurityContextHolder`没有被身份验证对象填充。因此，任何声明性授权检查（必须从中获取用户权限`SecurityContextHolder`）都将不起作用。我给你另一个想法如何解决这个问题。成功验证后，您可以通过两种方式立即运行自定义代码：

1.  听`AuthenticationSuccessEvent`
2.  提供您的自定义`AuthenticationSuccessHandler`实现。

`AuthenticationSuccessHandler`与第一种方式相比，有一个重要优势：`SecurityContextHolder`将已被填充。因此，只需将您的`stateService.rowCount()`调用转移到`loginsuccesshandler.LoginSuccessHandler#onAuthenticationSuccess(...)`方法中，问题就会消失。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-01T11:16:30.113

有类似的问题。我添加了这里给出的监听器

[https://stackoverflow.com/questions/3145936/spring-security-j-spring-security-logout-problem](https://stackoverflow.com/questions/3145936/spring-security-j-spring-security-logout-problem)

它对我在 web.xml 中添加以下行很有用。很晚才发布，应该可以帮助寻找答案的人。

```
<listener>
    <listener-class> org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
</listener> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-22T10:39:46.420

我在使用 SpringBoot 2.1.4 和 Spring Security 5（我相信）时遇到了同样的错误。在尝试了 Google 提供的所有功能一天后，我发现了我的案例中的错误原因。我有一个微服务设置，身份验证服务器与资源服务器不同。我的 application.yml 中有以下几行，尽管包含了 dependencies`spring-boot-starter-security`和. 我在导致错误的属性（在开发期间）中包含了以下内容。`spring-security-oauth2``spring-security-jwt`

```
spring:
  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration 
```

评论它为我解决了它。

```
#spring:
#  autoconfigure:
#    exclude: org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration 
```

希望，它可以帮助某人。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-30T23:26:48.880

对我来说，问题在于 ContextRefreshedEvent 处理程序。我正在做一些数据初始化，但当时在应用程序中尚未设置身份验证。这是一个问题 22，因为系统需要身份验证才能授权，并且需要授权才能获取身份验证详细信息:)。我最终将授权从类级别放松到方法级别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-07T08:16:21.710

如果您使用 Content-Type: application/json 而不是 Content-Type:application/x-www-form-urlencoded 也会出现此错误

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-22T15:55:08.747

在我的情况下，我只是忘记初始化 Spring Security，这可以通过在使用空 web.xml 文件时扩展 AbstractSecurityWebApplicationInitializer 来完成。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-22T13:43:54.893

我遇到了同样的问题，我通过使用以下注释解决了它：

```
@EnableAutoConfiguration(exclude = {
        SecurityAutoConfiguration.class
})
public class Application {...} 
```

我认为这种行为与 Abhishek 解释的相同

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-11T00:33:16.593

我的问题是我需要正确禁用安全性并实施我自己的预授权。与 OP 不同，我试图完全禁用身份验证并实施我自己的解决方案。

```
@Configuration
@EnableWebSecurity
public class CustomWebSecurityConfigurerAdapter extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity httpSecurity) throws Exception {
        httpSecurity.csrf().disable().authorizeRequests().antMatchers("/**").permitAll();
    }

} 
```

# java - Spring 以编程方式注册 RequestMapping

> ID：15500521
> 
> 赞同：3
> 
> 时间：2013-03-19T13:13:19.793
> 
> 标签：java, spring, spring-mvc

我有一个这样的工作网址：`localhost/info`

```
@Controller
@RequestMapping("/info")
public class VersionController {

   @RequestMapping(value = "", method = RequestMethod.GET)
   public @ResponseBody
   Map get() {
      loadProperties();
      Map<String, String> m = new HashMap<String, String>();
      m.put("buildTimestamp", properties.getProperty("Application-Build-Timestamp"));
      m.put("version", properties.getProperty("Application-Version"));
      return m;
   }

} 
```

我会在初始化我的应用程序时注册一些其他映射，如下所示：

```
localhost/xxxx/info
localhost/yyyy/info
localhost/zzzz/info 
```

所有这些 url 将返回相同的响应`localhost/info`

应用程序的 xxxx、yyyy 部分是可变的。我必须将自定义映射注册为

```
@Override
public void addViewControllers(ViewControllerRegistry registry) {
    registry.addViewController("???").setViewName("???");
} 
```

但这仅适用于视图。

动态注册的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:26:57.580

您可以注册一个新的[HandlerMapping](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/servlet/HandlerMapping.html)，您可以在其中为您的 URL 路径添加处理程序；最方便的实现是[SimpleUrlHandlerMapping](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/servlet/handler/SimpleUrlHandlerMapping.html)。

如果您希望这些处理程序是 bean 方法（如用 注释的那些`@RequestMapping`），您应该将它们定义为[HandlerMethod](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/web/method/HandlerMethod.html)包装器，以便已经注册的`RequestMappingHandlerAdapter`将调用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-26T14:17:45.067

从 Spring 开始`5.0.M2`，Spring 提供了一个功能性 Web 框架，允许您以编程方式创建类似“控制器”的构造。

在您的情况下，您需要做的是为您需要处理的 URL 创建一个适当的[RouterFunction](http://docs.spring.io/spring/docs/5.0.0.M2/javadoc-api/org/springframework/web/reactive/function/RouterFunction.html)，然后使用适当的[HandlerFunction](http://docs.spring.io/spring/docs/5.0.0.M2/javadoc-api/org/springframework/web/reactive/function/HandlerFunction.html)简单地处理请求。

但是请记住，这些构造不是 Spring MVC 的一部分，而是 Spring Reactive 的一部分。

查看[这篇](https://spring.io/blog/2016/09/22/new-in-spring-5-functional-web-framework)博文了解更多详情

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-13T19:43:48.737

我相信这个简单的例子值得超过 1000 字:) 在 SpringBoot 中它看起来像......

定义您的控制器（示例健康端点）：

```
public class HealthController extends AbstractController {

    @Override
    protected ModelAndView handleRequestInternal(@NotNull HttpServletRequest request, @NotNull HttpServletResponse response) {
        return new ModelAndView(new MappingJacksonSingleView(), "health", Health.up().build());
    }

} 
```

并创建您的配置：

```
@Configuration
public class CustomHealthConfig {

    @Bean
    public HealthController healthController() {
        return new HealthController();
    }

    @Bean
    public SimpleUrlHandlerMapping simpleUrlHandlerMapping() {
        SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping();
        mapping.setOrder(Integer.MAX_VALUE - 2);
        mapping.setUrlMap(ImmutableMap.of("/health", healthController()));
        return mapping;
    }

} 
```

关于处理程序顺序 - 看看这里的原因：[SimpleUrlHandlerMapping的Java配置（Spring boot）](https://stackoverflow.com/questions/25037113/java-configuration-of-simpleurlhandlermapping-spring-boot)

`MappingJacksonSingleView`为了返回模型和视图的单个 json 值的辅助类：

```
public class MappingJacksonSingleView extends MappingJackson2JsonView {

    @Override
    @SuppressWarnings("unchecked")
    protected Object filterModel(Map<String, Object> model) {
        Object result = super.filterModel(model);
        if (!(result instanceof Map)) {
            return result;
        }

        Map map = (Map) result;
        if (map.size() == 1) {
            return map.values().toArray()[0];
        }
        return map;
    }

} 
```

杰克逊单视图源 - 这篇博文：[https ://www.pascaldimassimo.com/2010/04/13/how-to-return-a-single-json-list-out-of-mappingjacksonjsonview/](https://www.pascaldimassimo.com/2010/04/13/how-to-return-a-single-json-list-out-of-mappingjacksonjsonview/)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-10T09:53:06.570

（现在）可以通过`RequestMappingHandlerMapping.registerMapping()`方法注册请求映射。

例子：

```
@Autowired
RequestMappingHandlerMapping requestMappingHandlerMapping;

public void register(MyController myController) throws Exception {
    RequestMappingInfo mappingInfo = RequestMappingInfo.paths("xxxx/info").methods(RequestMethod.GET).build();
    Method method = myController.getClass().getMethod("info");
    requestMappingHandlerMapping.registerMapping(mappingInfo, myController, method);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-05T16:38:22.830

[您可以通过扩展RequestMappingHandlerMapping](http://docs.spring.io/spring-framework/docs/3.2.0.M1/api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerMapping.html)来注册自己的 HandlerMapping ，例如覆盖`registerHandlerMethod`.

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-03-19T13:28:45.563

目前尚不清楚您要实现的目标，但也许您可以在@RequestMapping 中使用@PathVariable，例如：

```
@RequestMapping("/affId/{id}")
public void myMethod(@PathVariable("id") String id) {} 
```

编辑：原始示例已更改它的出现，但您可能仍然可以使用 PathVariable。

# java - Java 字符串字符编码 - 法语 - 荷兰语语言环境

> ID：15500529
> 
> 赞同：4
> 
> 时间：2013-03-19T13:13:30.747
> 
> 标签：java, character-encoding

我有以下一段代码

```
public static void main(String[] args) throws UnsupportedEncodingException {
        System.out.println(Charset.defaultCharset().toString());

        String accentedE = "é";

        String utf8 = new String(accentedE.getBytes("utf-8"), Charset.forName("UTF-8"));
        System.out.println(utf8);
        utf8 = new String(accentedE.getBytes(), Charset.forName("UTF-8"));
        System.out.println(utf8);
        utf8 = new String(accentedE.getBytes("utf-8"));
        System.out.println(utf8);
        utf8 = new String(accentedE.getBytes());
        System.out.println(utf8);
} 
```

上面的输出如下

```
windows-1252
é
?
Ã©
é 
```

有人可以帮我理解这是做什么的吗？为什么这个输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T13:24:31.513

如果您已经有了`String`，则无需立即对其进行编码和解码，该字符串已经是某人已解码原始字节的结果。

在字符串文字的情况下，某人是编译器，将您的源作为原始字节读取并以您指定的编码对其进行解码。如果您已经以 Windows-1252 编码物理保存了源文件，并且编译器将其解码为 Windows-1252，那么一切都很好。如果没有，您需要通过声明编译器在编译源代码时使用的正确编码来解决此问题...

线

```
String utf8 = new String(accentedE.getBytes("utf-8"), Charset.forName("UTF-8")); 
```

绝对什么都不做。（编码为 UTF-8，解码为 UTF-8 == 无操作）

线

```
utf8 = new String(accentedE.getBytes(), Charset.forName("UTF-8")); 
```

将字符串编码为 Windows-1252，然后将其解码为 UTF-8。结果只能在 Windows-1252 中解码（因为*它是*在 Windows-1252 中编码的，呵呵），否则会得到奇怪的结果。

线

```
utf8 = new String(accentedE.getBytes("utf-8")); 
```

将字符串编码为 UTF-8，然后将其解码为 Windows-1252。与前面的情况相同的原则适用。

线

```
utf8 = new String(accentedE.getBytes()); 
```

绝对什么都不做。（编码为 Windows-1252，解码为 Windows-1252 == 无操作）

用整数类比可能更容易理解：

```
int a = 555;
//The case of encoding as X and decoding right back as X
a = Integer.parseInt(String.valueOf(a), 10);
//a is still 555

int b = 555;
//The case of encoding as X and decoding right back as Y
b = Integer.parseInt(String.valueOf(b), 15);
//b is now 1205 I.E. strange result 
```

这两者都是无用的，因为在执行任何代码之前我们已经拥有了我们需要的东西，整数`555`。

*当您的字符串离开您的系统*时需要将其编码为原始字节，当原始字节进入*您的系统*时需要将其解码为字符串。无需*在系统内*直接进行编码和解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:30:29.327

第 1 行 - 您系统上的默认字符集是 windows-1252。

第 2 行 - 您通过将字符串文字编码为 UTF-8 字节创建了一个字符串，然后使用 UTF-8 方案对其进行解码。结果是格式正确的String，可以使用windows-1252编码正确输出。

第 3 行 - 您通过将字符串文字编码为 windows-1252 创建了一个字符串，然后使用 UTF-8 对其进行解码。UTF-8 解码器检测到一个不可能是 UTF-8 的序列，并用问号“？”替换了有问题的字符。（UTF-8 格式表示，任何最高位设置为 1 的字节都是多字节字符的一个字节。但是 windows-1252 编码只有一个字节长......所以，这是糟糕的 UTF- 8)

第 4 行 - 您通过 UTF-8 编码然后在 windows-1252 中解码创建了一个字符串。在这种情况下，解码并没有“失败”，但它产生了垃圾（又名 mojibake）。输出 2 个字符的原因是“é”的 UTF-8 编码是 2 字节序列。

第 5 行 - 您通过编码为 windows-1252 并解码为 windows-1252 创建了一个字符串。这会产生正确的输出。

* * *

总的教训是，如果您使用一种字符编码将字符编码为字节，然后使用不同的字符编码进行解码，您很可能会受到一种或另一种形式的破坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:24:56.760

当您调用 String [getBytes](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28%29)方法时：

> 使用平台的默认字符集将此字符串编码为字节序列，并将结果存储到新的字节数组中。

所以每当你这样做：

```
accentedE.getBytes() 
```

它将重音字符串的内容作为在默认操作系统代码页中[编码的字节，在您的情况下](http://en.wikipedia.org/wiki/Character_encoding)[为 cp-1252](http://en.wikipedia.org/wiki/Windows-1252)。

这一行：

```
new String(accentedE.getBytes(), Charset.forName("UTF-8")) 
```

获取重音字节（以 cp1252 编码）并尝试以 UTF-8 解码它们，因此出现错误。另一方的情况相同：

```
new String(accentedE.getBytes("utf-8")) 
```

getBytes 方法采用以 cp-1252 编码的重音字节，以 UTF-8 重新编码它们，但随后 String[构造函数](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d%29)使用默认的 OS 代码页（即 cp-1252）对它们进行编码。

> 通过使用平台的默认字符集解码指定的字节数组来构造一个新的字符串。新字符串的长度是字符集的函数，因此可能不等于字节数组的长度。

我强烈推荐阅读这篇优秀的文章：

[每个软件开发人员绝对、绝对必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)

更新：

简而言之，每个字符都存储为一个数字。为了知道哪个字符是哪个数字，操作系统使用代码页。考虑以下代码段：

```
String accentedE = "é";

System.out.println(String.format("%02X ", accentedE.getBytes("UTF-8")[0]));
System.out.println(String.format("%02X ", accentedE.getBytes("UTF-8")[1]));
System.out.println(String.format("%02X ", accentedE.getBytes("windows-1252")[0])); 
```

输出：

```
C3 
A9 
E9 
```

这是因为[UTF-8](http://www.utf8-chartable.de/unicode-utf8-table.pl)中的小重音 e 存储为两个字节的值`C3A9`，而在[cp-1252](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT)中存储为单个字节的值`E9`。有关详细说明，请阅读链接的文章。

# deployment - heroku 或其他云平台上的蓝绿色部署即服务

> ID：15500530
> 
> 赞同：7
> 
> 时间：2013-03-19T13:13:34.723
> 
> 标签：deployment, heroku, paas, blue-green-deployment

我们目前正在 Heroku 上运行一个 Ruby on Rails 项目 (RefineryCMS)，其中包含两个 dyno。

每次我们更新网站时，我们都会经历大约 1 到 2 分钟的停机时间。管理层对此并不满意。

我们真正想要的是某种（透明的）蓝绿部署：[http ://martinfowler.com/bliki/BlueGreenDeployment.html](http://martinfowler.com/bliki/BlueGreenDeployment.html)

这可以在 Heroku 或其他云平台即服务上实现吗？

我们也在使用 Unicorn，但如有必要，我们很乐意进行更改。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-02-17T09:03:15.730

Heroku 不支持*蓝/绿部署*。

我向 Heroku 支持人员提出了一个问题，他们回答说 Cedar 堆栈不是为此而设计的。所以你不能真正防止停机

如果您的应用程序无法启动（由于配置问题或在启动阶段的部分迁移），预启动功能将无济于事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T15:18:10.640

看看[Heroku 预启动](https://devcenter.heroku.com/articles/preboot)它是一个实验室功能，但听起来正是您所需要的。

# xml - 如何在 xslt 的表格中显示属性？

> ID：15500542
> 
> 赞同：0
> 
> 时间：2013-03-19T13:14:13.523
> 
> 标签：xml, xslt

简单的问题，在我的 xslt 中，我想在表格中打印属性的固定值，如果将其放在标签中，我会得到相同的结果，但我想做好吗？谁能告诉我怎么做？谢谢。
在我的 doc.xml `<unit_price currency="$"> 4.00 </unit_price>`

在我的 doc.xslt

```
 <table>
 <xsl:for-each select="TotalProducts/products">
 <tr>
 <td>
    <xsl:value-of select="unit_price"/>
    <label> $ </label>
 </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:30:47.563

如果要显示 XML 中的属性，可以使用 xpath 选择器`@`。因此，您可以将`label`行更改为以下内容。

```
<xsl:value-of select="unit_price/@currency" /> 
```

# eclipse - 在 Windows 和 Mac 之间工作时在 Eclipse 上使用外部 JAR

> ID：15500543
> 
> 赞同：0
> 
> 时间：2013-03-19T13:14:16.277
> 
> 标签：eclipse

我在 Dropbox 上设置了我的 java 项目，包括我在这些项目中使用的外部库。问题是 jar 文件，当包含在项目的构建配置中时，是静态链接的，并且 jar 所在的 Dropbox 文件夹的路径在操作系统之间是不同的。这意味着每次我从不同的操作系统开始处理项目时，我都必须删除路径并为当前操作系统重新配置它们。

有没有更好的方法可以在 eclipse 中链接它，这样我就不必这样做了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:26:59.393

您可以尝试使用`Linked Resources`：转到`Preferences`-> `General`-> `Workspace`-> `LinkedResources`：您可以在此处指定一个包含 Dropbox 文件夹路径的变量，然后使用此变量配置您的路径。

您需要在两个环境中配置此变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:07:00.337

好的，这就是为我做的：

1.  将 JAR 复制到项目目录（或子目录）。
2.  在 Eclipse 中，刷新项目并导航到“包资源管理器”窗口中的 JAR(s)
3.  选择/右键单击 JAR 并按“添加到构建路径”

这会将 JAR(s) 复制到相对于项目目录引用它们的构建路径

# vba - VBA for Excel 2010/2013 - 如何识别系统区域设置

> ID：15500552
> 
> 赞同：4
> 
> 时间：2013-03-19T13:14:46.710
> 
> 标签：vba, excel

我正在编写一个包含希伯来语和英语的宏，但如果系统语言环境设置为希伯来语，我只想显示希伯来语字符，否则我想用英语音译。

这是由于 Excel 宏似乎处理语言或至少是希伯来语的方式有一个怪癖（出于某种原因，即使您将键盘设置为希伯来语并且将在几乎每个应用程序中输出希伯来语，它也不适用于 Excel 宏编辑器直到您将系统本地设置为希伯来语，因此电子表格也不会显示希伯来语，即使您直接在单元格中输入它也会显示正常 - 至少对于 Excel 2010 和 2013 来说是这样）。

无论如何，我已经尝试了几行无效的行，它们是：

```
Application.LanguageSettings.LanguageID(msoLanguageIDUI)
Application.LanguageSettings.LanguageID(msoLanguageIDInstall)
Application.LanguageSettings.LanguagePreferredForEditing(msoLanguageIDHebrew) 
```

无论是在英语（美国）语言环境还是希伯来语（以色列）语言环境中，这些都无法识别系统语言环境并输出相同的值。

谁能告诉我我需要做什么来通过数字或文本指示系统区域设置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:35:35.520

我在[这里找到了这个：](http://office.microsoft.com/en-us/excel-help/creating-international-number-formats-HA001034635.aspx?CTT=1)

您的第一行代码`Application.LanguageSettings.LanguageID(msoLanguageIDUI)`给出了`1033`用于英语（美国）或`1037`希伯来语的 LCID。

您可以使用这些数字来执行一个简单的`IF`语句`Application.LanguageSettings.LanguageID(msoLanguageIDUI)` 来更改语言环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:39:05.440

```
Sub LangCheck()

   Dim lang_code As Long
        lang_code = Application.LanguageSettings.LanguageID(msoLanguageIDUI)

        MsgBox lang_code

End Sub 
```

美国是 1033，希伯来语是 1037，根据这个链接：

[MSDN](http://msdn.microsoft.com/en-us/goglobal/bb964664)

# forms - Symfony2 将多步表单合并为一个结果

> ID：15500559
> 
> 赞同：2
> 
> 时间：2013-03-19T13:15:05.067
> 
> 标签：forms, symfony, entity, symfony-2.2

这是我在 SF2 上的第一步。我想在包含其他实体的实体上设置多步骤表单。

我有一个表单类型（缩短）

```
class ApplicationFormType extends AbstractType
{
    protected $_step = 1;

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        if ($this->_step == 1) {
            $builder
                ->add('patient', new Type\PersonType())
                ->add('insurance', 'entity', array(
                    'class' => 'Acme\MainBundle\Entity\Insurance',
                ));
        } elseif ($this->_step == 2) {
            $nurse = new Type\PersonType();
            $nurse->requireBareData();
            $builder
                ->add('nurse', $nurse)
                ->add('nurse_type', 'entity', array(
                    'class' => 'Acme\MainBundle\Entity\NurseType',
                    'expanded' => true,
                    'multiple' => false,
                ))
                ->add('nursing_support', 'checkbox', array(
                    'required' => false,
                ));
        }
    }

    public function setStep($step)
    {
        $this->_step = $step;
    } 
```

我的控制器看起来像

```
public function assistAction() {
    $request = $this->getRequest();

    $step = $this->getSession()->get('assist_step', 1);
    if ($request->getMethod() != 'POST') {
        $step = 1;
        $this->getSession()->set('assist_data', NULL);
    }
    $this->getSession()->set('assist_step', $step);
    $application = new Application();
    $type = new ApplicationFormType();
    $type->setStep($step);

    $form = $this->createForm($type, $application, array(
        'validation_groups' => array($step == 1 ? 'FormStepOne' : 'FormStepTwo'),
    ));
    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        if ($form->isValid()) {
            if ($step == 1) {

                $data = $form->getData();
                $this->getSession()->set('assist_data', serialize($data));
                $this->getSession()->set('assist_step', ++$step);
                $type = new ApplicationFormType();
                $type->setStep($step);
                $form = $this->createForm($type, $application, array(
                    'validation_groups' => array('FormStepTwo'),
                ));

            } else {

                $step_1 = unserialize($this->getSession()->get('assist_data', ''));
                $data = $form->getData();
=>                $data->setPatient($step_1->getPatient());
=>                $data->setInsurance($step_1->getInsurance());
                $this->getSession()->set('assist_data', NULL);
                $this->getSession()->set('assist_step', 1);

            }
        }
    }

    return $this->render('Acme:Default:onlineassist.html.twig', array(
        'form' => $form->createView(),
        'step' => $step,
    ));
} 
```

我的问题是，如果我必须单独“复制”第一个表单步骤的属性，例如：

```
$data->setPatient($step_1->getPatient());
$data->setInsurance($step_1->getInsurance()); 
```

或者我可以将会话中的未序列化数据与第二个表单步骤中的数据合并吗？还是有完全不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:38:56.547

实体可以根据[stackoverflow](https://stackoverflow.com/questions/9384836/symfony2-serialize-entity-object-to-session)上的响应进行序列化并放入会话中。

如果每个表单都是不同的类型，我建议您将类型分解为多种类型。

这是我的设想：

```
public function submitAction($step = 1)
{
    switch ($step) {
        case 1:
            $entity = new EntityOne();
            $form = $this->createForm(new EntityOneType(), $entity);
            $template = "template_one.html.twig";
            $redirect = $urlToStepTwo; // which redirects to this controller action with $step = 2
            break;
        case 2:
            $entity = new EntityTwo();
            $form = $this->createForm(new EntityTwoType(), $entity);
            $template = "template_two.html.twig";
            $redirect = $urlToStepThree; // which redirects to this controller action with $step = 3
            break;
        case 3:
            $entity = new EntityThird();
            $form = $this->createForm(new EntityThreeType(), $entity);
            $template = "template_three.html.twig";
            $redirect = $urlToConfirmPage; // which redirects to another controller action that unserialize all entities and save them in the DB
            break;
        default:
            throw $this->createNotFoundException();
            break;
    }

    $request = $this->get('request');
    $session = $this->get('session');

    if ($request->isMethod('post') === true) {

        $form->bind($request);

        if ($form->isValid() === true) {
            $session->set('entity_'. $step, serialize($entity));

            return $this->redirect($redirect);
        }
    }

    $params = array(
        'form'    => $form->createView(),
        'entity'  => $entity
    );

    return $this->render($template, $params);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T16:07:39.263

好的，除了单独设置前置步骤字段之外别无他法，比如

```
$pre_step = unserialize($this->getSession()->get('assist_data', ''));
$data->setPatient($pre_step->getPatient());
$data->setInsurance($pre_step->getInsurance());
$data->setInsuranceNumber($pre_step->getInsuranceNumber());
$data->setInsuranceLevel($pre_step->getInsuranceLevel()); 
```

这就是我迄今为止所做的。

# java - 在java中使用htmlworker将html转换为pdf

> ID：15500560
> 
> 赞同：0
> 
> 时间：2013-03-19T13:15:08.743
> 
> 标签：java, itext

我正在使用 htmlworker（itext 库）将 html 文档转换为 pdf，如下所示

```
String path = "temp.pdf";
PdfWriter pdfWriter = null;

// create a new document
Document document = new Document();
pdfWriter = PdfWriter.getInstance(document, new FileOutputStream(
                    path));
document.open();
HTMLWorker htmlWorker = new HTMLWorker(document);
String str = "";
StringBuilder contentBuilder = new StringBuilder();
BufferedReader in = null;
try {
    in = new BufferedReader(new FileReader("temp1.html"));

     while ((str = in.readLine()) != null) {

           contentBuilder.append(str);

    }
} catch (IOException e) {
    System.out.print("HTML file close problem:" + e.getMessage());
} finally {
    in.close();

}
String content = contentBuilder.toString();

htmlWorker.parse(new StringReader(content));

document.close(); 
```

现在我的问题是我能够使用上面的代码将 html 转换为 pdf。但如果我的 html 页面包含**table**标记，它将创建相同大小的**td**。如何在生成的 pdf 中设置**td标签的宽度？**提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T10:31:04.197

最后我得到了解决方案：

```
try {

            // get Instance of the PDFWriter
            pdfWriter = PdfWriter.getInstance(document, new FileOutputStream(
                    path));
            //pdfWriter.setPdfVersion(PdfWriter.PDF_VERSION_1_4);
            pdfWriter.setLinearPageMode();
            pdfWriter.setFullCompression();

            // document header attributes
            document.addAuthor("");
            document.addCreationDate();
            document.addProducer();
            document.addCreator("aaa");
            document.addTitle("");
            document.setPageSize(PageSize.A4);

            // open document
            document.open();

            HTMLWorker htmlWorker = new HTMLWorker(document);

            String str = "";
            StringBuilder contentBuilder = new StringBuilder();
            BufferedReader in = null;

            System.out.println("Html Content :");
            try {
                in = new BufferedReader(new FileReader(
                        htmlfile));

                while ((str = in.readLine()) != null) {

                    contentBuilder.append(str);
                    System.out.println(str);
                }
            } catch (IOException e) {
                System.out.print("HTML file close problem:" + e.getMessage());
            } finally {

                in.close();
                System.gc();
            }
            String content = contentBuilder.toString();

            htmlWorker.parse(new StringReader(content));

            document.close();

            pdfWriter.close();

        }

        catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (DocumentException e) {
            e.printStackTrace();
        } 
```

# django - /accounts/login/ id 处的 TypeError 必须是 (str, unicode, ObjectId) 的实例，而不是

> ID：15500566
> 
> 赞同：3
> 
> 时间：2013-03-19T13:15:18.047
> 
> 标签：django, mongodb, pymongo

这是我的第一个示例代码`mongodb`

我正在尝试将我`django`的与`mongodb`. 我成功完成了我的注册部分，但是当我尝试登录时，它显示了一个错误页面。

```
TypeError at /accounts/login/
id must be an instance of (str, unicode, ObjectId), not type 'int' 
```

我正在使用 django 用户身份验证，

这是我的网址 **`url(r'^accounts/login/', 'django.contrib.auth.views.login'),`**

以下是我的完整回溯，

```
TypeError at /admin/profile/
id must be an instance of (str, unicode, ObjectId), not <type 'int'>
Request Method: GET
Request URL:    http://www.myapp.com/accounts/login/
Django Version: 1.3
Exception Type: TypeError
Exception Value:    
id must be an instance of (str, unicode, ObjectId), not <type 'int'>
Exception Location: /home/sakeer/workspace/entevirtual/lib/python2.7/site-
packages/pymongo-2.4.2-py2.7-linux-x86_64.egg/bson/objectid.py in __validate, line 198
Python Executable:  /home/sakeer/workspace/entevirtual/bin/python
Python Version: 2.7.3
Python Path:    
['/home/sakeer/workspace/enteproject',
 '/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/djangotoolbox-0.9.2-py2.7.egg',
 '/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/django_mongodb_engine-0.4.0-py2.7.egg',
 '/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages/pymongo-2.4.2-py2.7-linux-x86_64.egg',
 '/home/sakeer/workspace/entevirtual/lib/python27.zip',
 '/home/sakeer/workspace/entevirtual/lib64/python2.7',
 '/home/sakeer/workspace/entevirtual/lib64/python2.7/plat-linux2',
 '/home/sakeer/workspace/entevirtual/lib64/python2.7/lib-tk',
 '/home/sakeer/workspace/entevirtual/lib64/python2.7/lib-old',
 '/home/sakeer/workspace/entevirtual/lib64/python2.7/lib-dynload',
 '/usr/lib64/python2.7',
 '/usr/lib/python2.7',
 '/usr/lib64/python2.7/lib-tk',
 '/home/sakeer/workspace/entevirtual/lib/python2.7/site-packages',
 '/home/sakeer/workspace/enteproject/lib',
 '/home/sakeer/workspace/enteproject/lib'] 
```

我在哪里和缺少什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T18:30:33.167

似乎是 Django 中的一个错误，它假定用户 ID 始终是整数，这对于关系数据库来说是有意义的。在使用 Mongodb 的情况下，键或 _id 将是一个对象 ID。

这方面有一些开放的错误，似乎再次弹出（例如，这个[https://code.djangoproject.com/ticket/14881](https://code.djangoproject.com/ticket/14881)）。目前，我在 django 用户帐户中添加了一条评论（[https://github.com/pinax/django-user-accounts/issues/103](https://github.com/pinax/django-user-accounts/issues/103)），这似乎很合适。

它可能需要一个补丁来修复。

奇怪的是，我让它与 django 1.5 和 mongoengine 一起工作，但是在升级到 django 1.6.1 之后，问题又回来了。

# javascript - 在 CSS 或 JS 中检测 Kindle Fire

> ID：15500567
> 
> 赞同：4
> 
> 时间：2013-03-19T13:15:22.257
> 
> 标签：javascript, css, twitter-bootstrap, media-queries, kindle-fire

我有一个基于 Twitter Bootstrap 的网站。每当我在 Kindle Fire 上移动站点时，导航栏（本应固定在视口顶部）需要一秒钟才能赶上并移动到那里。它看起来很丑。导航栏在所有其他设备的视口上保持固定 - ipad、samsung s3、台式机。

是否可以通过 CSS 或 javascript 检测 Kindle Fire，以便我可以将导航栏修复到页面而不是浏览器行为异常的视口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:19:39.793

您可以使用 javascript 嗅探 Silk 浏览器的用户代理。例如

```
if (navigator.userAgent.indexOf("Silk") !== -1) {
    // This is the Kindle Fire's Silk browser.
} 
```

# digital-signature - 为什么非公开消息传递提供否认，而 RSA 不提供？

> ID：15500568
> 
> 赞同：1
> 
> 时间：2013-03-19T13:15:39.607
> 
> 标签：digital-signature, off-the-record-messaging

在 OTR 消息中，加密密钥是在接收者读取加密消息后发布的，因此显然不存在不可否认性。在 RSA 中，私钥显然没有公开，但没有人能证明它在过去没有被泄露。因此，Alice 总是可以否认发送并签署了特定消息。

我不明白为什么 RSA 可以合法地证明谁发送了消息，但 OTR 阻止了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:26:24.550

RSA 不能证明 Alice 发送了某些东西，但是使用 Alice 的密钥完成的 RSA 签名可以被第三方使用，以查明某些东西确实是由 Alice 的密钥签名的。当然，她仍然可以说“一定是有人偷了我的钥匙，我从来没有签名过！”，但这可能不太*可信*。OTR 提供的是*似是而非*的否认：每个人都知道签名可能由任何人完成，因此消息可能由恶意方制作是*似是而非的。*

# php - 如果图像存在，则从 url 下载图像

> ID：15500571
> 
> 赞同：0
> 
> 时间：2013-03-19T13:15:46.700
> 
> 标签：php

我有这个网址`www.example.com/1.png`。我想运行一个循环，如下所示：

```
for ($i=0; $i<=10; $i++){
$url = 'www.example.com/'.$i.'.png';
} 
```

现在我有 10 个网址。假设 10 个网址中有 7 个是图片，而其他 3 个不可用。我想从每个 o url 下载图像，如果 url 不存在，那么它不会下载任何东西。

这是同样的事情，但我认为更基本的解释是：

```
www.example.com/1.png --- url exists, so i download the image and save it in my folder.
www.example.com/2.png --- url exists, so i download the image and save it in my folder.
www.example.com/3.png --- url doesnt exist, so i dont download anything
www.example.com/4.png --- url exists, so i download the image and save it in my folder.
www.example.com/5.png --- url exists, so i download the image and save it in my folder.
www.example.com/6.png --- url exists, so i download the image and save it in my folder.
www.example.com/7.png --- url doesnt exist, so i dont download anything
www.example.com/8.png --- url exists, so i download the image and save it in my folder.
www.example.com/9.png --- url exists, so i download the image and save it in my folder.
www.example.com/10.png  --- url doesnt exist, so i dont download anything 
```

抱歉英语不好，有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:20:51.890

下载图像`file_get_contents()`会生成一个`$http_response_header`变量，其中包含您可以检查的 HTTP 响应标头。在此处查看[文档](http://php.net/manual/en/reserved.variables.httpresponseheader.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:19:22.737

您可以检查标头是否存在 404 错误。

```
$file_headers = @get_headers($url);
if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    //Does not exist
}
else
{
    //Exists, so put download code here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-29T00:05:37.037

您可以做的是将它们全部排入一个多 curl 请求中，然后过滤掉那些不返回值 < 399 的请求。这样，您可以让 curl 一次请求它们，而不是一次请求一个。还要设置此操作应花费的时间，例如 5 秒。

# azure - Azure 网站 Mercurial 部署错误

> ID：15500572
> 
> 赞同：2
> 
> 时间：2013-03-19T13:15:51.527
> 
> 标签：azure, mercurial, web, bitbucket

我希望利用 Bitbucket Mercurial 存储库中对 Azure 网站的新部署支持。我为 Azure 网站设置了我的存储库，并且所有内容都正确链接。但是，当触发部署时，我收到以下错误：

```
Process 'hg.exe' aborted due to idle timeout. 
```

日志中没有其他错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:51:18.227

我想你可能会超时。我不知道为什么，因为你的回购不是那么大。

幸运的是，您应该能够覆盖它。请尝试以下方法：

*   在门户中，转到仪表板选项卡，然后单击“与 bitbucket 断开连接”
*   转到配置选项卡
*   创建一个名为 AppSetting 的 AppSetting`SCM_COMMAND_IDLE_TIMEOUT`并将其设置为 600（意思是 600 秒，即 10 分钟。默认为 3 分钟）。
*   返回仪表板选项卡，然后单击“从源代码管理设置部署”，并将其重新链接到您的存储库。

我们将在未来努力改进，所以它只是默认工作。

# mercurial - GNU make 和 hg：哪个文件可以用来确定我的目标是否过时？

> ID：15500574
> 
> 赞同：0
> 
> 时间：2013-03-19T13:15:55.060
> 
> 标签：mercurial, makefile, gnu-make

假设一个 Mercurial 存储库`foo`。此外，假设`make`从那里运行的作业`crontab`应该更新从修订版`0`到`tip`存储库中发生更改的所有内容的捆绑包。让我们假设`GNUmakefile`它也是我们存储库工作目录的一部分`foo`。

`foo/.hg`我可以依赖哪个文件作为依赖项来决定是否运行`hg bundle`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:22:38.473

我认为你可以做的比看更糟糕`.hg/store/00changelog.i`。这包含存储库中变更集元数据的索引（对于非常小的存储库，它还包含相应的数据）。请注意，这并没有说明工作目录的内容！但是，如果您只想要一个完整的捆绑包，那应该没关系。

不过，这确实取决于`.hg/requires`文件的内容。特别是，存储库至少需要该`store`标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:57:26.543

I *suppose*, direct working with files inside `.hg` is **not** The Right Thing (tm)

If "...whenever something changes within the repository" you have new changeset(s), or old changeset-id may be changed (rewritten history?). In this case, output of native Mercurial commands will change and you can compare results of previous run and current and make choice

`hg id -i`, for example, in commit-hook can write into (ignored) file in Working Directory of repository or in just *some file*, which you crontab-job check ater

# javascript - 我尝试使用 jquery 反复试验，但它不起作用

> ID：15500576
> 
> 赞同：-2
> 
> 时间：2013-03-19T13:16:02.580
> 
> 标签：javascript, jquery

我有一个用 php 创建的包含许多选择的表单。该表格有 3 种选择：第二种选择取决于第一种选择，第三种选择取决于第二种选择。每个 select 都有一个像这样的 id：type[00], type [01], type[02]; 制造[00]，制造[01]，制造[02]；型号[00]、型号[01]、型号[02] ...

我使用[这个脚本](http://forum.codecall.net/topic/59341-php-sql-jquery-and-ajax-populate-select-boxes/#sthash.i2ISGn69.dpbs)。我试图编辑代码以满足我的需要，但我对 java 或 jquery 一无所知。我认为问题出在函数 finishAjax 上，因为我不知道怎么说任何选择的 id 都不同。

```
$(document).ready(function() {

        $('select[id^="type"]').change(function(){

            $('select[id^="make"').fadeOut();

            $.post("ajax/ajax_make.php", {
                type: $('select[id^="type"]').val()
            }, function(response){
                setTimeout("finishAjax('make', '"+escape(response)+"')", 400);
            });
            return false;
        });

        $('select[id^="make"').change(function(){

            $('select[id^="model"').fadeOut();

            $.post("ajax/ajax_model.php", {
                type: $('select[id^="type"]').val(),
                make: $('select[id^="make"').val()
            }, function(response){
                setTimeout("finishAjax('model', '"+escape(response)+"')", 400);
            });
            return false;
        });

        });

        function finishAjax(id, response){

         $('select[id^="'+id+'"]').html(unescape(response));
         $('select[id^="'+id+'"]').fadeIn();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:28:03.470

```
<select name="type_0" data-id="0" class="type">
  <option value="1">a</option>
  <option value="2">b</option>
  <option value="3">c</option>
</select>

<select name="type_1" data-id="1" class="type">
  <option value="1">a</option>
  <option value="2">b</option>
  <option value="3">c</option>
</select>

<select name="make_0" data-id="0" class="make">
  <option value="1">a</option>
  <option value="2">b</option>
  <option value="3">c</option>
</select>

<select name="make_1" data-id="1" class="make">
  <option value="1">a</option>
  <option value="2">b</option>
  <option value="3">c</option>
</select>

<script type="text/javascript">
  $(document).ready(function() {

    /** Execute an ajax request **/
    function dispatchRequest(url, data, timeout) 
    {
      setTimeout(function() {
        $.ajax({
          type    : "POST",
          url     : url,
          data    : data,
          success : finishAjax,
          type    : "JSON"
        });
      }, timeout);
    };

    /** Finish AJAX request **/
    function finishAjax(response)
    {
      /** IMPORTANT 

        response is now a JSON object, this is just a simple string
        that represents a complex object. I this case, it is up to the
        target URL (ajax/ajax_make.php) to create this string by using 
        the provided data (id,type)

        At a minimum we need three values:

        response.HTML = HTML of the select options
        response.id   = The identity of the select item
        response.type = The type of select option

      **/

      $("select[name=" + response.type + "_" + response.id)
        .html(unescape(response.html))
        .fadeIn();
    }

    /** Find ALL the selects of each type, hence class selector **/
    $selectType = $(".type");
    $selectMake = $(".make");

    /** 
      Change event for "type" select option 
    **/
    $selectType.on("change", function(){
      var id  = $(this).data("id");

      /** Hide all "make" select options **/
      $selectMake.each(function(){
        $(this).fadeOut();
      });

      dispatchRequest("ajax/ajax_make.php", {
        id   : $(this).data("id"),
        type : $(this).attr("class")
      }, 1000);

      return true;
    });

  });
</script> 
```

重要的变化是响应是一个 JSON 对象，包含多个键值对 - 其中之一是您需要的“id”。

注意：这是未经测试的午餐时间代码。当我有机会时，我会测试并给出更好的解释。与此同时，希望代码能给你一些洞察力..

# r - 将时间戳矩阵的特定列转换为每个时间戳索引的行

> ID：15500586
> 
> 赞同：0
> 
> 时间：2013-03-19T13:16:12.737
> 
> 标签：r, timestamp

我有一点 data.frame （现在是 xts 的时间戳，我希望这不是问题），像这样：

```
> head(testData)
                    Year Day Hour  Min   Sec.    E1.S1    E1.S2 E1.S3  E1.S4     E1.S5  E1.S6
2000-05-01 10:25:59 2000 122   10 25.0 35.144 3.572000 2.912000 2.512  6.352 10.604000  8.078
2000-05-01 10:26:48 2000 122   10 26.0 31.570 2.203333 2.423333 6.160 13.000  9.463333  3.970
2000-05-01 10:27:48 2000 122   10 26.8 35.964 2.118000 3.044000 4.232 11.770 12.696000  6.088
                      E1.S7    E1.S8  E2.S1  E2.S2   E2.S3     E2.S4     E2.S5  E2.S6     E2.S7
2000-05-01 10:25:59  3.0444 3.574000 0.9244 1.5868  1.3224  1.852800  2.646000  2.910  2.382000
2000-05-01 10:26:48  3.3100 3.083333 1.1000 1.5440  1.9800  2.646667  2.646667  3.310  1.763333
2000-05-01 10:27:48  2.6440 2.646000 1.8528 1.8524  2.9120  2.648000  3.970000  5.292  1.850000
                        E2.S8      E3.S1     E3.S2   E3.S3     E3.S4     E3.S5   E3.S6   E3.S7
2000-05-01 10:25:59  1.586000  0.7920000 1.0568000  1.7184  1.720400  2.116400  0.9248  2.1180
2000-05-01 10:26:48  1.983333  0.4413333 0.2206667  1.5400  1.100667  2.646667  0.8800  0.8800
2000-05-01 10:27:48  1.452000  0.9264000 1.1908000  2.5140  1.718400  2.250400  2.2504  1.8504
                      E3.S8      E4.S1      E4.S2   E4.S3   E4.S4      E4.S5     E4.S6      E4.S7
2000-05-01 10:25:59  1.1880  0.9252000  0.1324000  0.6612  0.6604  0.5288000  0.132400  0.6612000
2000-05-01 10:26:48  2.2040  0.2206667  0.2206667  0.4400  0.4400  0.8813333  1.100667  0.8813333
2000-05-01 10:27:48  0.9240  0.7936000  0.7928000  0.9244  1.3208  0.6612000  0.132400  0.5288000
                      E4.S8    FP5.S1 FP5.S2    FP5.S3    FP5.S4    FP5.S5     FP5.S6  FP5.S7
2000-05-01 10:25:59  1.0560 0.0662000 0.3310 0.3968000 0.0662000 0.0000000  0.2648000 0.19860
2000-05-01 10:26:48  1.1000 0.1103333 0.3310 0.2206667 0.1103333 0.4413333  0.2206667 0.33100
2000-05-01 10:27:48  0.5288 0.2648000 0.4632 0.0000000 0.4632000 0.2648000  0.2648000 0.72660
                       FP5.S8 FP6.S1    FP6.S2 FP6.S3  FP6.S4    FP6.S5 FP6.S6 FP6.S7    FP6.S8
2000-05-01 10:25:59 0.2648000 0.1324 0.1986000 0.2648 0.00000 0.1324000 0.1324 0.1324 0.0662000
2000-05-01 10:26:48 0.2206667 0.0000 0.1103333 0.0000 0.00000 0.2206667 0.0000 0.0000 0.1103333
2000-05-01 10:27:48 0.1324000 0.0000 0.0000000 0.0000 0.00000 0.1986000 0.1324 0.1324 0.0662000
                    FP7.S1 FP7.S2  FP7.S3 FP7.S4    FP7.S5    FP7.S6 FP7.S7  FP7.S8 PA.LEFS60S1
2000-05-01 10:25:59 0.1324 0.0000 0.00000 0.0000 0.1324000 0.3310000 0.0000 0.39680       79.46
2000-05-01 10:26:48 0.0000 0.0000 0.00000 0.0000 0.4413333 0.1103333 0.0000 0.00000       78.50
2000-05-01 10:27:48 0.0000 0.3972 0.00000 0.1324 0.1324000 0.1986000 0.1324 0.00000       84.10
                    PA.LEFS60S2 PA.LEFS60S3 PA.LEFS60S4 PA.LEFS60S5 PA.LEFS60S6 PA.LEFS60S7
2000-05-01 10:25:59    83.26000      103.48    131.6000    157.6000    148.6000   120.60000
2000-05-01 10:26:48    99.93333      130.00    160.6667    153.6667    121.6667    92.96667
2000-05-01 10:27:48    95.68000      118.60    144.6000    155.0000    134.6000   109.10000
                    PA.LEFS60S8       BX         BY       BZ Bmag....nT.
2000-05-01 10:25:59    94.44000 3.608000  2.6620000 5.032000      6.8840
2000-05-01 10:26:48    75.63333 4.943333 -0.5133333 4.816667      6.9300
2000-05-01 10:27:48    89.44000 3.908000  0.9634000 5.490000      6.8460

> dput(head(testData))
structure(c(2000, 2000, 2000, 2000, 2000, 2000, 122, 122, 122, 
122, 122, 122, 10, 10, 10, 10, 10, 10, 25, 26, 26.8, 28, 29, 
30, 35.144, 31.57, 35.964, 21.4, 24.892, 25.354, 3.572, 2.20333333333333, 
2.118, 3.8025, 4.628, 5.292, 2.912, 2.42333333333333, 3.044, 
1.488, 3.97, 5.428, 2.512, 6.16, 4.232, 4.465, 3.836, 7.54, 6.352, 
13, 11.77, 7.775, 8.604, 14.16, 10.604, 9.46333333333333, 12.696, 
10.93, 16.68, 23.96, 8.078, 3.97, 6.088, 10.425, 15.612, 29.1, 
3.0444, 3.31, 2.644, 5.135, 10.32, 20.612, 3.574, 3.08333333333333, 
2.646, 3.1425, 3.966, 9.918, 0.9244, 1.1, 1.8528, 2.645, 4.368, 
8.476, 1.5868, 1.544, 1.8524, 2.315, 3.572, 6.218, 1.3224, 1.98, 
2.912, 3.4725, 6.34, 12.832, 1.8528, 2.64666666666667, 2.648, 
6.4475, 8.86, 24.74, 2.646, 2.64666666666667, 3.97, 7.275, 12.948, 
30.7, 2.91, 3.31, 5.292, 7.44, 12.988, 30.42, 2.382, 1.76333333333333, 
1.85, 3.315, 12.174, 32.28, 1.586, 1.98333333333333, 1.452, 2.81, 
7.286, 17.72, 0.792, 0.441333333333333, 0.9264, 1.655, 4.234, 
10.194, 1.0568, 0.220666666666667, 1.1908, 1.1555, 3.8388, 7.016, 
1.7184, 1.54, 2.514, 3.3105, 8.192, 14.004, 1.7204, 1.10066666666667, 
1.7184, 4.1375, 11.504, 37.44, 2.1164, 2.64666666666667, 2.2504, 
4.135, 17.876, 51.74, 0.9248, 0.88, 2.2504, 4.4675, 18.28, 52.38, 
2.118, 0.88, 1.8504, 5.465, 14.696, 52.12, 1.188, 2.204, 0.924, 
3.1425, 10.73, 30.82, 0.9252, 0.220666666666667, 0.7936, 0.331, 
5.03, 14.152, 0.1324, 0.220666666666667, 0.7928, 1.983, 3.97, 
10.714, 0.6612, 0.44, 0.9244, 1.653, 10.196, 20.1, 0.6604, 0.44, 
1.3208, 3.9675, 20.76, 54.78, 0.5288, 0.881333333333333, 0.6612, 
4.47, 20.52, 68, 0.1324, 1.10066666666667, 0.1324, 5.7925, 21.44, 
78.42, 0.6612, 0.881333333333333, 0.5288, 3.4775, 24.604, 76.12, 
1.056, 1.1, 0.5288, 2.313, 15.082, 42.86, 0.0662, 0.110333333333333, 
0.2648, 0.579, 1.6552, 3.838, 0.331, 0.331, 0.4632, 1.1565, 2.446, 
2.054, 0.3968, 0.220666666666667, 0, 0.41375, 1.7862, 3.97, 0.0662, 
0.110333333333333, 0.4632, 0.9935, 2.976, 9.792, 0, 0.441333333333333, 
0.2648, 0.6605, 2.78, 9.672, 0.2648, 0.220666666666667, 0.2648, 
0.74425, 2.9782, 10.592, 0.1986, 0.331, 0.7266, 1.32375, 4.036, 
9.136, 0.2648, 0.220666666666667, 0.1324, 0.908, 2.7144, 5.292, 
0.1324, 0, 0, 0, 0, 0.1986, 0.1986, 0.110333333333333, 0, 0.1655, 
0, 0, 0.2648, 0, 0, 0.1655, 0, 0, 0, 0, 0, 0.08275, 0.331, 0.1324, 
0.1324, 0.220666666666667, 0.1986, 0.24825, 0.2648, 0.0662, 0.1324, 
0, 0.1324, 0.331, 0.3972, 0.662, 0.1324, 0, 0.1324, 0, 0.1324, 
0.1324, 0.0662, 0.110333333333333, 0.0662, 0.1655, 0.0662, 0.1324, 
0.1324, 0, 0, 0, 0, 0.1324, 0, 0, 0.3972, 0.1655, 0.3968, 0, 
0, 0, 0, 0.08275, 0.0662, 0.0662, 0, 0, 0.1324, 0.1655, 0, 0.2648, 
0.1324, 0.441333333333333, 0.1324, 0, 0.1324, 0.0662, 0.331, 
0.110333333333333, 0.1986, 0.331, 0.1986, 0.1986, 0, 0, 0.1324, 
0, 0.2648, 0.1986, 0.3968, 0, 0, 0.08275, 0.1986, 0, 79.46, 78.5, 
84.1, 89.2, 90.06, 93.8, 83.26, 99.9333333333333, 95.68, 92.4, 
90.08, 87.88, 103.48, 130, 118.6, 108.75, 104.42, 97.36, 131.6, 
160.666666666667, 144.6, 131.75, 127, 118, 157.6, 153.666666666667, 
155, 149.75, 147.6, 141.2, 148.6, 121.666666666667, 134.6, 144, 
147.6, 151.8, 120.6, 92.9666666666667, 109.1, 122, 127, 136, 
94.44, 75.6333333333333, 89.44, 100.775, 104.4, 112.2, 3.608, 
4.94333333333333, 3.908, 2.885, 2.548, 1.708, 2.662, -0.513333333333333, 
0.9634, 2.0675, 2.544, 3.208, 5.032, 4.81666666666667, 5.49, 
5.7875, 5.776, 5.768, 6.884, 6.93, 6.846, 6.8025, 6.838, 6.824
), .indexCLASS = c("POSIXlt", "POSIXt"), .indexTZ = "", tclass = c("POSIXlt", 
"POSIXt"), tzone = "", class = c("xts", "zoo"), index = structure(c(957173159, 
957173208, 957173268, 957173329, 957173389, 957173450), tzone = "", tclass = c("POSIXlt", 
"POSIXt")), .Dim = c(6L, 73L), .Dimnames = list(NULL, c("Year", 
"Day", "Hour", "Min", "Sec.", "E1.S1", "E1.S2", "E1.S3", "E1.S4", 
"E1.S5", "E1.S6", "E1.S7", "E1.S8", "E2.S1", "E2.S2", "E2.S3", 
"E2.S4", "E2.S5", "E2.S6", "E2.S7", "E2.S8", "E3.S1", "E3.S2", 
"E3.S3", "E3.S4", "E3.S5", "E3.S6", "E3.S7", "E3.S8", "E4.S1", 
"E4.S2", "E4.S3", "E4.S4", "E4.S5", "E4.S6", "E4.S7", "E4.S8", 
"FP5.S1", "FP5.S2", "FP5.S3", "FP5.S4", "FP5.S5", "FP5.S6", "FP5.S7", 
"FP5.S8", "FP6.S1", "FP6.S2", "FP6.S3", "FP6.S4", "FP6.S5", "FP6.S6", 
"FP6.S7", "FP6.S8", "FP7.S1", "FP7.S2", "FP7.S3", "FP7.S4", "FP7.S5", 
"FP7.S6", "FP7.S7", "FP7.S8", "PA.LEFS60S1", "PA.LEFS60S2", "PA.LEFS60S3", 
"PA.LEFS60S4", "PA.LEFS60S5", "PA.LEFS60S6", "PA.LEFS60S7", "PA.LEFS60S8", 
"BX", "BY", "BZ", "Bmag....nT."))) 
```

对于每个时间戳，我需要绘制（并获取一些统计信息）E1.S* 值与 PA.LEFS60S* 值的 cos。例如，对于时间戳 2000-05-01 10:25:59：

```
# These are the values from PA.LEFS60S1 to PA.LEFS60S8    
x = c(79.46, 83.26000, 103.48, 131.6000, 157.6000, 148.6000, 120.60000, 94.44000)
# These are the values from E1.S1 to E1.S8
y = c(3.572000, 2.912000, 2.512, 6.352, 10.604000, 8.078,3.0444, 3.574000)
plot(cos(x),y) 
```

然后我需要在一段时间内绘制平均值（y）与时间戳之类的东西......我只能在我获得一种自动化过程的方法之后才能做到这一点。

到目前为止，我只能手动完成。尽管我可以想出一种方法来使用 for 循环并检查表中的每个名称。但这似乎在计算上太慢太复杂，根本不像 R。

我尝试了使用**rshape2包中的****melt**功能 -但输出只是来自多行以 timeStamp 作为索引且没有列信息的行。`melt(testData)`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:21:57.277

这是您的问题的解决方案。它涉及一些数据重塑。

首先，将存储在值中的数据转换为行。这是单独为`x`和`y`数据完成的。

```
x <- stack(as.data.frame(t(testData[ , grep("^PA", names(testData))])))
y <- stack(as.data.frame(t(testData[ , grep("^E1", names(testData))]))) 
```

将数据合并到一个数据框中：

```
xydf <- setNames(cbind(x, y[-2]), c("x", "time", "y")) 
```

**图1**

绘制不同时间戳的`y`对比图。`cos(x)`使用该`ggplot2`软件包很容易。

```
library(ggplot2)
ggplot(xydf, aes(x = cos(x), y = y)) +
  geom_point() +
  facet_wrap( ~ time) 
```

![在此处输入图像描述](../Images/130ffb854c0254748ec89143fe6d9254.png)

**图 2**

`y`计算并绘制沿时间戳的平均值。

```
yMeans <- aggregate(y ~ time, xydf, mean)

ggplot(yMeans, aes(x = time(testData), y = y)) + 
  geom_point() +
  geom_line() 
```

![在此处输入图像描述](../Images/276c299e47fe757732675f535c8d600c.png)**

# javascript - XmlHttpRequest 错误：尽管“header('Access-Control-Allow-Origin: *');”，但 Access-Control-Allow-Origin 不允许 Origin null

> ID：15500595
> 
> 赞同：1
> 
> 时间：2013-03-19T13:16:43.603
> 
> 标签：javascript, jquery, xmlhttprequest, same-origin-policy

嘿那里，

我正在实现一个小书签，它需要将一些 XMLHttpRequests 发布到通过 JQuery 完成的 php 脚本。

基本上这看起来像这样（只是简单的例子......）：

Javascript：

```
$.post('https://www.myserver.com/script.php').always(function(data) {
    console.warn('data:', data);
} 
```

脚本.php：

```
<?php
header('Access-Control-Allow-Origin: *');

$res["isSession"] = false;
echo json_encode($res); 
```

起初，由于 null-origin，这根本不起作用，但在我看到[这篇文章后](https://stackoverflow.com/a/4968221/1273551)，我添加了“header（'Access-Control-Allow-Origin：*'）;” 线。

有了这一行，当我在本地安装的 Apache 上执行脚本时，它至少可以工作。

不幸的是，一旦我尝试在位于共享主机上的在线站点上执行它，它就不起作用，但会给我“XmlHttpRequest 错误：Access-Control-Allow-Origin 不允许 Origin null”错误消息。

在共享主机上，它也在运行 Apache。这可能是由某些 Apache 配置引起的吗？如果是，是哪一个？

还有什么问题，我该如何解决？

谢谢

ps.：如果我明确使用 jsonp 作为 jquery-post 的数据类型，它可以工作，但因此我必须重写一些 php 文件和其他一些使用它们的 javascript。因此，如果可能的话，我想避免这个选项......

* * *

编辑：我刚刚发现在线服务器上的 php 文件位于一个用 htaccess 文件“锁定”的目录中。如果我将 php 文件移动到每个人都可以访问的目录，我不会收到上述错误消息。

有人现在我可以如何规避这个问题吗？将 php 文件放到可公开访问的目录中并不是我的首选...

# android - 如何突出显示 GridView 中的元素？

> ID：15500606
> 
> 赞同：1
> 
> 时间：2013-03-19T13:17:04.893
> 
> 标签：android

我有一个带有 BaseAdapter 的 GridView。我会突出显示具有焦点或选中或选中状态的元素。

我试图设置 grid.setSelection(0) 以突出显示第一个元素，但什么也没发生。

我设置了我的可绘制状态背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:26:12.220

将此代码放在`GetView()`基础适配器的方法中

```
If(items[position] == selectedIndex){

  // Change background or something alpha or anything so that it looks like it is selected
} 
```

在`onItemSelected()`方法中

```
 @Override
    public void onItemSelected(AdapterView<?> parent, View view,
           int position,long id) {

         selectedIndex = position;
         adapter.notifyDataSetChanged();
    } 
```

如果您没有得到任何东西，请随时询问

# jsp - 两个 Web 目录之间的会话数据丢失

> ID：15500619
> 
> 赞同：0
> 
> 时间：2013-03-19T13:17:36.840
> 
> 标签：jsp, session, gwt, tomcat

但是我还没有在 JSP 中看到解决方案。所以，我有 GWT 应用程序和 JSP 欢迎和登录页面。Thera 是两个网络档案。

*   欢迎.war
*   应用程序战争

Tomcat 有两个目录：

*   mydomain.com/欢迎/
*   mydomain.com/app/

在 mydomain.com/welcome/login.jsp 的登录过程中，我设置了会话属性。当用户使用超链接移动到 mydomain.com/app/app.jsp 时，login.jsp 中设置的会话属性将丢失。

你知道如何保持会话属性的值吗？

谢谢维特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:03:03.523

你有两场战争，这意味着你有两个不同的背景。每个上下文都有自己的会话管理。但是您可以在这两个上下文之间共享会话数据。参考[链接](http://www.fwd.at/tomcat/sharing-session-data-howto.html)

# html - 如何从第 N 行文本开始应用“文本溢出”？

> ID：15500620
> 
> 赞同：1
> 
> 时间：2013-03-19T13:17:37.220
> 
> 标签：html, css

[w3schools.com/cssref/css3_pr_text-overflow.asp](http://www.w3schools.com/cssref/css3_pr_text-overflow.asp)

如何创建一个 div 并让其中的文本正常换行，但只能换行至某一行（例如第二行），然后让`text-overflow: ellipsis`属性生效并隐藏该 div 中的剩余文本，如上关联？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:19:38.443

就我个人而言，我使用的 Trunk8 插件正是你想要的。看看[演示](http://jrvis.com/trunk8/?rel=github)

例如，在您使用的插件的情况下：

```
$('#div').trunk8({
  lines: 2
}); 
```

[插件链接](https://github.com/rviscomi/trunk8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:44:17.013

对于纯 CSS 解决方法，并且由于`text-overflow`不打算用于多行文本，如果您的文本容器具有**固定的宽度和行高**并控制文本应该开始隐藏的位置，则可以使用*hack 。*

 **用于模拟的 CSS `text-overflow`：

```
div{
    width:55%;
    padding:20px;
    line-height:20px;
    height:20px; /*for showing 2 lines of text*/
    overflow:hidden;
    position:relative;
}

div:after{
    content:"...";
    position:absolute;
    bottom:0;
    right:10px;
} 
```

看这个演示：http: [//jsfiddle.net/kfJAy/](http://jsfiddle.net/kfJAy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:21:18.717

您想要做的事情没有 css，但可能的解决方法是：

```
.ellipsis{
    line-height: 10px; //10px for easy multiplication
    height: 30px; //line-height * n
    text-overflow: ellipsis;
} 
```**

# c++ - C/C++算法从不同平台上的相同种子产生相同的伪随机数序列？

> ID：15500621
> 
> 赞同：3
> 
> 时间：2013-03-19T13:17:39.580
> 
> 标签：c++, c, random, portability, consistency

标题说明了一切，我正在寻找最好是独立的东西，因为我不想添加更多库。

性能应该不错，因为我需要它在一个紧凑的高性能循环中。我想这将以随机性为代价。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T13:24:34.250

任何特定的伪随机数生成算法都会表现得像这样。问题`rand`在于它没有具体说明它是如何实现的。不同的实现将以不同的方式表现，甚至具有不同的质量。

但是，C++11 提供了新的[`<random>`](http://en.cppreference.com/w/cpp/numeric/random)标准库头文件，其中包含许多出色的随机数生成工具。其中定义的随机数引擎是明确定义的，并且给定相同的种子，将始终产生相同的数字集。

例如，流行的高质量随机数引擎是`std::mt19937`，它是以特定方式配置的 Mersenne twister 算法。无论你在哪台机器上，以下总是会产生相同的 0 到 1 之间的实数集：

```
std::mt19937 engine(0); // Fixed seed of 0
std::uniform_real_distribution<> dist;
for (int i = 0; i < 100; i++) {
  std::cout << dist(engine) << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T13:25:37.013

这是[梅森捻线机](http://en.wikipedia.org/wiki/Mersenne_twister#Pseudocode)

这[是 C 中的另一个 PRNG 实现](http://benpfaff.org/writings/clc/prng.c)。

您可以在[这里找到 PRNG 的集合](http://random.mat.sbg.ac.at/results/karl/server/)。

这是简单的经典 PRNG：

```
#include <iostream>
using namespace std;

unsigned int PRNG()
{
    // our initial starting seed is 5323
    static unsigned int nSeed = 5323;

    // Take the current seed and generate a new value from it
    // Due to our use of large constants and overflow, it would be
    // very hard for someone to predict what the next number is
    // going to be from the previous one.
    nSeed = (8253729 * nSeed + 2396403); 

    // Take the seed and return a value between 0 and 32767
    return nSeed  % 32767;
}

int main()
{
  // Print 100 random numbers
    for (int nCount=0; nCount < 100; ++nCount)
    {
        cout << PRNG() << "\t";

        // If we've printed 5 numbers, start a new column
        if ((nCount+1) % 5 == 0)
            cout << endl;
    }
} 
```

# python - 如何在python中重置输入流？

> ID：15500623
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:17:47.353
> 
> 标签：python, input, command-prompt

我正在 Python 2.7 中编写提示参数，以便使用命令行界面导入我的数据文件。

```
REFERENCE = raw_input("Reference (*.shp):")
SEGMENTED = raw_input("Segmented (*.shp):")
METHOD = raw_input("Method (ke, pu, clinton):")
if METHOD != "ke" and METHOD != "pu" and METHOD != "clinton":
    raise ValueError("%s is not a valid method" % METHOD)
if METHOD == "ke" or METHOD == "clinton":
    THRESHOLD = input("Threshold (0.0 - 1.0):")
    if not check_threshold(THRESHOLD):
        raise AccuracyException("Threshold of %s is not valid" % THRESHOLD)
else:
    THRESHOLD = None
SEP = raw_input("Sep:")
if SEP != "space" and SEP != "tab" and SEP != "comma" and SEP != "colon" and SEP != "semicolon" and SEP != "hyphen" and SEP != "dot":
    raise ValueError("%s is not valid" % SEP)
HEADER = raw_input("Header (True/False):")
if HEADER.strip() != "True" and HEADER.strip() != "False":
    raise ValueError("%s is not valid" % HEADER)
# output 
OUTPUT = raw_input("Output (*.txt):") 
```

加载后我希望从头开始重置，以便在不重新加载 *.py 文件的情况下导入新数据，因为我的目标是使用 py2exe 将 *.py 转换为 *.exe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:29:25.917

正如 DJV 所建议的那样，我认为这就像将脚本包装在一个 while 循环中一样简单，以便在用户完成所有选项后在 while 块的顶部继续

```
while True:
  REFERENCE = raw_input("Reference (*.shp):")
  SEGMENTED = raw_input("Segmented (*.shp):")
  METHOD = raw_input("Method (ke, pu, clinton):")
  if METHOD != "ke" and METHOD != "pu" and METHOD != "clinton":
    raise ValueError("%s is not a valid method" % METHOD)
  if METHOD == "ke" or METHOD == "clinton":
    THRESHOLD = input("Threshold (0.0 - 1.0):")
    if not check_threshold(THRESHOLD):
        raise AccuracyException("Threshold of %s is not valid" % THRESHOLD)
  else:
    THRESHOLD = None
  SEP = raw_input("Sep:")
  if SEP != "space" and SEP != "tab" and SEP != "comma" and SEP != "colon" and SEP != "semicolon" and SEP != "hyphen" and SEP != "dot":
    raise ValueError("%s is not valid" % SEP)
  HEADER = raw_input("Header (True/False):")
  if HEADER.strip() != "True" and HEADER.strip() != "False":
    raise ValueError("%s is not valid" % HEADER)
  # output 
  OUTPUT = raw_input("Output (*.txt):") 
```

# c# - 对话框不仅仅是在关闭时隐藏自己

> ID：15500624
> 
> 赞同：0
> 
> 时间：2013-03-19T13:17:50.973
> 
> 标签：c#, winforms, dialog

根据 MSDN 文档，使用[ShowDialog()](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)显示的表单上的关闭操作只会导致表单被隐藏。对 ShowDialog() 的后续调用将取消隐藏表单。

确切地说，这似乎并非如此。我有一个带有树视图的表单。在调用 ShowDialog() 之间会保留检查状态，但用户所做的任何节点扩展都会重置回其默认状态。此外，每次也会执行 Load 事件。所以它似乎不仅仅是“隐藏”表单。有人知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:27:54.167

我自己也经历过这个问题。出于某种原因，在模态表单上调用`Form.Hide`或设置至少在某些情况下会调用。为了解决这个问题，我将不透明度设置为零。您也可以改用。`visible = false``Form.Close``Form.Show`

如果您想象模态对话的行为，这有点直观。它阻塞了父窗口。因此，如果您将其隐藏，则用户将无法与之交互的活动窗口。FWIW，我认为行为应该是父母再次变得活跃。情况并非总是如此。

# java - byte[] 到字符串并返回到 byte[]

> ID：15500625
> 
> 赞同：2
> 
> 时间：2013-03-19T13:17:52.163
> 
> 标签：java, string, byte

我在解释文件时遇到问题。该文件的构建如下：

> “姓名”-@-“日期”-@-“作者”-@-“签名”

签名是一个字节数组。当我读回文件时，我将其解析为 String 并拆分它：

```
myFileInpuStream.read(fileContent);    
String[] data = new String(fileContent).split("-@-"); 
```

如果我查看 var fileContent，我发现字节都很好。但是当我尝试获取签名字节数组时：

```
byte[] signature=  data[3].getBytes(); 
```

有时我会得到错误的 63 值。我尝试了一些解决方案：

```
new String(fileContent, "UTF-8") 
```

但没有运气。有人可以帮忙吗？签名不是固定长度，因此我无法对其进行硬编码...

一些额外的信息：

原始签名：

> [48、45、2、21、0、-123、-3、-5、**-115、84**、-86、26、-124、-112、75、-10、-1、-56、40、13 , -46, 6, 120, -56, 100, 2, 20, 66, -92, -8, 48, -88, 101, 57, 56, 20, 125, -32, -49, -123, 73 , 96, 76, -82, 81, 51, 69]

文件内容（阅读后的变量）：

> ... 48、45、2、21、0、-123、-3、-5、**-115、84**、-86、26、-124、-112、75、-10、-1、-56、40 , 13, -46, 6, 120, -56, 100, 2, 20, 66, -92, -8, 48, -88, 101, 57, 56, 20, 125, -32, -49, -123 , 73, 96, 76, -82, 81, 51, 69]

签名（拆分和getBytes（）之后）：

> [48、45、2、21、0、-123、-3、-5、63、84、-86、26 **、** -124、63、75、-10、-1、-56、40、13、- 46、6、120、-56、100、2、20、66、-92、-8、48、-88、101、57、56、20、125、-32、-49、-123、73、96 , 76, -82, 81, 51, 69]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:21:07.987

您无法访问`data[4]`，因为您`String`的桌子上有 4 个。所以你可以`data`从0访问到3。

```
data[0] = name

data[1] = date

data[2] = author

data[3] = signature 
```

解决方案 ：

```
byte[] signature = data[3].getBytes(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:46:31.247

*编辑：*我想我终于明白你在做什么了。

您有四个部分：姓名、日期、作者、签名。姓名和作者是字符串，日期是日期，签名是散列或加密的字节数组。您希望将它们作为文本存储在文件中，以 . 分隔`-@-`。为此，*您首先需要将每个字符串转换为有效的字符串*。姓名和作者已经是字符串。将日期转换为字符串很容易。将字节数组转换为字符串并不容易。

您可以使用*base64*编码将字节数组转换为字符串。用于[`javax.xml.bind.DatatypeConverter printBase64Binary()`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#printBase64Binary%28byte%5b%5d%29)编码和[`javax.xml.bind.DatatypeConverter parseBase64Binary()`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html#parseBase64Binary%28java.lang.String%29)解码。

例如，如果您有 name `denBelg`、 date `2013-03-19`、 author`Virtlink`和此签名：

```
30 2D 02 15 00 85 FD FB 8D 54 AA 1A 84 90 4B F6 FF C8 28 0D D2 06 78 C8 64 02 14
 42 A4 F8 30 A8 65 39 38 14 7D E0 CF 85 49 60 4C AE 51 33 45

```

然后，在签名的连接和base64编码之后，生成的字符串变成了，例如：

```
denBelg-@-20130319-@-Virtlink-@-MC0CFQCF/fuNVKoahJBL9v/IKA3SBnjIZAIUQqT4MKhlOTgUfeDPhUlgTK5RM0U=

```

稍后，当您拆分字符串时，`-@-`您可以解码 base64 签名部分并取回一个字节数组。

**请注意**，当*姓名*或*作者*可以包含`-@-`在他们的姓名中时，他们可能会弄乱您的代码。例如，如果我将 name 设置为，`den-@-Belg`那么您的代码将失败。

* * *

*原帖：*

Java`String.getBytes()`对字符串使用平台默认编码。编码是将字符串字符映射到字节值的方式。因此，根据平台的不同，生成的字节可能会有所不同。

修复编码`UTF-8`并使用相同的编码读取它，您的问题就会消失。

```
byte[] signature = data[3].getBytes("UTF-8");

String sigdata = new String(signature, "UTF-8"); 
```

* * *

> 0-???����T�?��K���(�?x�d??B��0�e98?}�υI`L�Q3E

您的示例代表了一些乱码（是加密的还是什么？），但是您突出显示的字节显示了问题：

**您从-115**的字节值开始。减号表示它是高于 0x7F 的字节值，其字符表示高度依赖于使用的编码。让我们假设扩展的 US-ASCII，然后您的字节代表（根据[此表](http://www.asciitable.com/)）字符`ì`（带有重音符号）。现在，当您对其进行解码时，解码器（取决于您使用的编码）可能无法理解字节值 0x8D 而是用问号表示它`?`。请注意，问号是 US-ASCII 字符**63**，这就是您的 63 的来源。

因此，请*确保*您始终如一地使用您的编码，并且不要依赖系统的默认值。

* * *

**此外，切勿使用字符串编码来解码不代表字符串的字节数组（例如散列或其他加密内容）。**

根据您的评论，您正在尝试读取加密数据（即字节）并使用解码器将它们转换为字符串？*这**永远不会**以您期望的任何方式起作用*。在你加密了一些东西之后，你有一个字节数组，你应该*按原样*存储。当您读回它们时，您必须将字节放入解密器以重新获得未加密的字节。只有当这些解密的字节表示一个字符串时，您才能使用编码来解码该字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:44:16.953

对我来说听起来像是一个编码问题。

首先，您需要知道文件使用的是什么编码，并在读取文件时使用它。

其次，你说你的签名是一个字节数组，但java字符串总是unicode。如果你想要不同的编码（我猜你想要 ASCII），你需要做`getBytes("US-ASCII")`.

当然，如果您的输入是 ascii，那么这可能会导致编码问题，这很奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:40:18.280

通过手动将这些字节转换为字符串，您正在为自己做额外的工作。你为什么不使用为此而设计的类呢？

```
// get the file /logs/access.log
Path path = FileSystems.getRoot().getPath("logs", "access.log");
// open it, decoding UTF-8
BufferReader reader = Files.newBufferedReader(path, StandardCharsets.UTF_8);
// read a line of text, properly decoded
String line = reader.readLine(); 
```

或者，如果您使用的是 Java 6：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream("/logs/access.log"), "UTF-8"));
String line = reader.readLine(); 
```

链接：

*   [Files.newBufferedReader](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newBufferedReader%28java.nio.file.Path,%20java.nio.charset.Charset%29)
*   [输入流读取器](http://docs.oracle.com/javase/7/docs/api/java/io/InputStreamReader.html)

# ruby-on-rails - 在 Devise 中为 after_sign_out_path_for 方法注销后识别用户

> ID：15500627
> 
> 赞同：0
> 
> 时间：2013-03-19T13:17:56.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, devise

对于登录后路径，您可以执行以下操作：

```
def after_sign_in_path_for(resource)
  if resource.class == User
    if resource.sign_in_count < 2
      '/dashboard'
    else
      '/dashboard/home'
    end
  elsif resource.class == AdminUser
    I18n.locale = "en"
    '/admin/dashboard'
  else
    I18n.locale = "en"
    '/'
  end
end 
```

但是，如何检查我的用户是 a`User`还是`AdminUser`after `sign_out`？

```
def after_sign_out_path_for(resource_or_scope)
  if resource_or_scope == AdminUser 
```

这不起作用。有什么方法可以检查吗？

注意：虽然我已经做了一个猴子补丁并为管理员定义了新的root并且我的问题已经解决了，但是我想知道是否有任何方法可以实现使用`after_sign_out_path_for`Devise的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:33:47.680

Devise 会`current_user`在您登录后为您提供登录用户。用户是管理员还是普通用户，没有什么比这更重要的了。

所以它不是你可以使用的。

您可以使用其他方式来获得您想要的东西。

一个是与 Devise 配合得很好的 Cancan，您可以定义用户角色。

使用 Cancan，您可以在用户表中定义一个列，例如角色，其中包含每个用户（如管理员或普通用户）的值。那么就会有`Ability.rb`Cancan 的文件，你可以在那里定义你的逻辑。

您可以使用条件 -

```
if user.role? :admin
 #admin related logic
elsif user.role? :general
 #general user related logic
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:40:16.960

这将在这里工作。

```
def after_sign_out_path_for(resource_or_scope)
  if resource_or_scope == :user
    redirect_to ... # users path
  elsif resource_or_scope == :admin
    redirect_to .... # admins path
  end
end 
```

Devise 将调用**after_sign_out_path_for**方法，并以类名的符号作为参数，因此我们可以根据该符号检查条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T08:26:21.137

在您的用户模型中，如果您有一个用于指定用户角色的列，您可以执行类似的操作。

```
def admin?
  role == "admin"
end 
```

那么你要做的就是

```
def after_sign_out_path_for(user)
  if user.admin? 
```

# java - Java Spring 和 CORS

> ID：15500628
> 
> 赞同：1
> 
> 时间：2013-03-19T13:18:20.417
> 
> 标签：java, spring, cors

我需要创建一组 web 服务，这将由来自其他域的 javascript 请求。

我发现有一个很酷的跨域支持包：CORSFilter。

我看到，CORS 的实现是通过添加到 web.xml：

```
<web-app>
<filter>
    <filter-name>CORSFilter</filter-name>
    <filter-class>CORSFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CORSFilter</filter-name>
    <url-pattern>/api/*</url-pattern>
</filter-mapping> 
```

但我有自己的配置：

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-context.xml</param-value>
    </context-param>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

当我尝试将 CORS 配置添加到我的 web.xml 时：

```
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>corsFilter</filter-name>
    <filter-class>com.thetransactioncompany.cors.CORSFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>corsFilter</filter-name>
    <servlet-name>/*</servlet-name>
</filter-mapping> 
```

我收到一个错误：

```
 mar 19, 2013 2:17:08 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error filterStart
mar 19, 2013 2:17:08 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [] startup failed due to previous errors 
```

我应该如何实施它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:28:35.970

在“filter-mapping”部分，你有一个“servlet-name”标签，但里面实际上是一个 url 模式，而不是一个 servlet 名称。所以你应该有

```
<servlet-name>appServlet</servlet-name> 
```

或者

```
<url-pattern>/*</url-pattern> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-21T12:58:16.343

您可能应该考虑使用从[Spring Framework 4.2 GA](https://spring.io/blog/2015/07/31/spring-framework-4-2-goes-ga)开始提供的本机 CORS 支持。有关更多详细信息，请参阅[此博客文章](https://spring.io/blog/2015/06/08/cors-support-in-spring-framework)。

如果您更喜欢继续使用`Filter`基于方法的方法，例如，如果您不使用 Spring MVC 而只是使用 Spring Web，那么[`CorsFilter`](http://docs.spring.io/spring/docs/4.2.x/javadoc-api/org/springframework/web/filter/CorsFilter.html)还提供了 Spring。

# php - PHP：更短的 GET 变量访问

> ID：15500632
> 
> 赞同：0
> 
> 时间：2013-03-19T13:18:38.797
> 
> 标签：php, post, request

目前我正在访问我的编辑脚本，如下所示：

```
http://example.com/editStuff.php?id=1234

$id = $_REQUEST["id"];
echo($id);                //write: 1234 
```

我想访问这样的脚本：

```
http://example.com/editStuff.php?1234 
```

我想在 上拆分 URL `?`，但您可能知道更简单的方法。
你知道实现这一点的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:20:50.143

您可以简单地使用[`$_SERVER['QUERY_STRING']`](http://php.net/manual/en/reserved.variables.server.php)如下：

```
$id = $_SERVER['QUERY_STRING'];
echo $id; 
```

从文档：

> 访问页面的查询字符串（如果有）。

# spring - Spring MVC中所有页面中的动态内容

> ID：15500638
> 
> 赞同：0
> 
> 时间：2013-03-19T13:18:58.917
> 
> 标签：spring, spring-mvc, sitemesh

我正在使用 Sitemesh 在 Spring MVC 中开发我的网站。![这是示例](../Images/3fd85d2b5b7ee13488407db80972d895.png)

我可以在模板定义中包含的每个页面、菜单和页脚都更改动态内容。但是问题来了。在动态内容下方的每个站点上，都应该有一个新闻列表，其中包含来自我的数据库的一些新闻。我创建了我的@Controller，它加载了 5 条最新消息，但是如何在我的模板中添加它？什么请求映射应该实现我的新闻控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:32:00.207

我不知道 Sitemesh 是如何工作的，但我通过使用拦截器解决了这样的问题：

创建一个扩展类：**HandlerInterceptorAdapter**

覆盖方法**postHandle**并像这样填充 modelAndView 对象：

```
modelAndView.addObject("newslist",myNewsList); 
```

因此，您将有一个变量**$newslist**注入到您的所有视图中。

不要忘记在你的 mvc-congig.xml 中声明 bean：

```
<bean id="newsListInterceptor" class="mypackage.NewsListInterceptor"/> 
```

由于每个请求都会执行拦截器，因此我还使用 ehcache 来存储结果并避免在每次调用的数据库中进行选择期间。

# java - jsp中相互关联的动态选择框

> ID：15500639
> 
> 赞同：0
> 
> 时间：2013-03-19T13:19:00.423
> 
> 标签：java, javascript, spring, jsp, jstl

我有两个列表，例如部门和经理，我将这两个列表放在请求范围内。现在我想在选择框中显示两个列表，这样当用户选择一个部门时，相应的经理应该默认出现在下一个选择框中。如果我想更换经理，我可以选择任何其他并保存。

我的jsp是这样的。第一个有部门的选择框。

```
<select id="dname" name="Name" onchange="autoPopulateModifydept();">
       <option value="">-Select</option>
       <c:forEach var="departmentList" items="${departmentList}">
           <option value='${departmentList.getDepartment()}@${departmentList.getId()}'>${departmentList.getDepartment()}</option>
       </c:forEach>
</select> 
```

具有管理器列表的第二个选择框。

```
<select  id="deptHead" name="deptHead" onchange="autoPopulatedeptHead();">
       <option value="">-Select-</option>
            <c:forEach var="projectmanager" items="${projectManagerList}">
            <option value='${projectmanager.getProjectManagerName()}@${projectmanager.getPmId()}'>${projectmanager.getProjectManagerName()}</option>
            </c:forEach>
</select> 
```

这里部门中的 getId 和经理中的 getPmId 是相同的。基于此，我想链接两个选择框。怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T06:34:36.263

这可以使用 javascript 来完成，请参见下面的示例。在更改第一个列表选择时调用此方法，并将第一个列表的选定值与第二个列表进行比较，并使用匹配的第一个列表 Id 值选择第二个列表。

```
function changeMangerId(){ 
var emplId =document.getElementById("firstList").value;
<c:forEach var="paramObj"
    items="${managerList}]
var managerIdId= '<c:out value="${Id}"/>';
             if(emplId)!= null && (emplId)!= '' && trim(emplId)=== trimm(anagerIdId) {
                 $("#SecondListId option[value='"+ managerIdId +"']").attr("selected", "selected");
          }
</c:forEach>
} 
```

# javascript - 即使没有通过单击链接调用 iframe，也会加载 Java 类。为什么？

> ID：15500641
> 
> 赞同：0
> 
> 时间：2013-03-19T13:19:00.613
> 
> 标签：javascript, jsp, iframe

我遇到了一个奇怪的问题。我有一个 jsp ，它正在调用 iframe 。iframe 加载了来自 java 的数据。

现在要渲染 iframe，我正在使用自定义 [的 control-modal.js](http://code.google.com/p/infoscoop/source/browse/trunk/src/main/web/js/lib/control.modal.js?r=370)。

现在我的 iframe 在 li 标签之后编码，如下所示：

```
<li>
<a id="modalLink"  href="#myModal">Set up my Modal</a>
</li>
<div id="myModal" >
<div class="modalsubcol">
<p class="close"><a href="#"><img src="/.../close-button.gif" alt="Close"/></a></p>
<iframe id="modal-frame"style="display:none;" height="430" 
width="675" src="<%= getTheModal()%>"></iframe>
</div>
</div> 
```

我在我的jsp的头部调用模态，如下所示：

```
<script type="text/javascript">
window.onload=function modalOverride(){
var myModal;
$('modal-frame').style.display ='block';
myModal = new Control.Modal($('modalLink'), {
afterOpen : function(){$$('.close a').invoke('observe','click',function(e){Control.Modal.close(); Event.stop(e);});},
opacity: 0.3,
width: 675,
fade: true,
fadeDuration: 0.1,
autoOpenIfLinked: false
});
}
</script> 
```

现在链接：**设置我的模态**是包含许多链接的页面的一部分。当我打开该页面时，也会调用从模态渲染数据的 java 类。但这只有在我单击**设置我的模态**链接时才会发生。

在有人告诉我之前，这个问题不是由于

```
 window.onload 
```

事件，我已经使用它，否则当我单击前面提到的链接时，模式不会被加载。我也尝试过删除**window.onload**事件。如果我这样做，java 类仍然会被加载，现在我的 iframe 没有被加载。火虫也没有错误出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:20:39.007

当您将其放在页面上时：

```
<iframe id="modal-frame"style="display:none;" height="430" width="675" src="<%= getTheModal()%>"></iframe> 
```

无论您是否设置了 display: none css 属性，都会加载 iframe 的源代码。

另请注意，JSP 不会“调用”iframe，它们只是在 HTTP 响应中呈现 iframe 标记，浏览器会解释 iframe 并呈现 iframe src

如果您希望显示/隐藏 iframe，您可以使用 JQuery 来执行此操作：

```
$('.modal-frame').toggle(); 
```

如果您确实希望仅在单击链接时包含其他页面，则需要在单击链接时使用 AJAX 发出请求或使用 Javascript 动态加载 iframe。

# hash - 用于安全支付网关的coldfusion哈希

> ID：15500649
> 
> 赞同：2
> 
> 时间：2013-03-19T13:19:26.327
> 
> 标签：hash, coldfusion, payment-gateway

我正在尝试在coldfusion中创建一个哈希密码，以便我们的安全支付网关接受交易。

不幸的是，支付网关拒绝接受我生成的哈希。

该表单通过交易的所有元素发送，并根据五个不同的字段发送生成的哈希。

在 PHP 中是-：

```
<?php
echo hash('sha256', '
test_site1234
GBP
OrderTotal
OrderID
PASSWORD
');;
?> 
```

我认为coldfusion中的代码应该是正确的 - ：

```
 <cfset sitesecurity = Hash("test_site1234"&"GBP"&#OrderTotal#&#URL.ThisOrderID#&"PASSWORD", "SHA-256")>

<cfoutput>#sitesecurity#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:38:39.957

我相信 Miguel-F 发布的链接将解决您的问题。Coldfusion 的哈希输出全部大写，而我见过的大多数（全部？）其他输出都是小写。根据网关处理区分大小写的方式，您应该尝试传递小写哈希。

```
<cfset sitesecurity = lCase(hash("test_site1234GBP"&OrderTotal&URL.ThisOrderID&"PASSWORD", "SHA-256"))> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:24:14.877

代码应该按照它的方式运行，但在我看来，最好将值创建为一个大字符串来散列。附加到字符串是“昂贵的”，因为每次添加到字符串时都会创建一个新字符串，而旧字符串会被销毁。如果您每分钟处理一笔交易，您永远不会注意到差异，但无论哪种方式都是一种很好的做法。我会用。

```
 <cfset sitesecurity = Hash("test_site1234GBP#OrderTotal##URL.ThisOrderID#PASSWORD", "SHA-256")> 
```

现在您可能会遇到在 PHP 中获取 HASH 以匹配 ColdFusion 中的 HASH 的问题，但这是一个单独的问题。

样本

```
<cfset OrderTotal = 10>
<cfset url.ThisOrderID = 50>
<cfset sitesecurity = Hash("test_site1234GBP#OrderTotal##URL.ThisOrderID#PASSWORD", "SHA-256")>
<cfdump var="#sitesecurity#" abort> 
```

退货

```
92A14E1D03833CB3FD6932A8E240861CDEC66E46723A544DFBC3C592D5EE7E66 
```

# python-2.7 - ImportError：无法导入名称 CSafeLoader

> ID：15500655
> 
> 赞同：1
> 
> 时间：2013-03-19T13:19:41.130
> 
> 标签：python-2.7, pip

安装了juju的所有依赖项

```
pip install pyparsing==1.5.7
pip install pyOpenSSL PyYAML txaws pydot oauth txzookeeper zc-zookeeper-static
pip install juju 
```

所有安装都很好，但是当我开始时`juju`，失败并出现以下错误：

```
(jujuapp) ± juju                                                                                           
Traceback (most recent call last):
  File "/Users/millisami/.virtualenvs/jujuapp/bin/juju", line 4, in <module>
    from juju.control import main
  File "/Users/millisami/.virtualenvs/jujuapp/lib/python2.7/site-packages/juju/control/__init__.py", line 7, in <module>
    from .utils import ParseError
  File "/Users/millisami/.virtualenvs/jujuapp/lib/python2.7/site-packages/juju/control/utils.py", line 8, in <module>
    from juju.state.environment import EnvironmentStateManager
  File "/Users/millisami/.virtualenvs/jujuapp/lib/python2.7/site-packages/juju/state/environment.py", line 8, in <module>
    from juju.environment.config import EnvironmentsConfig
  File "/Users/millisami/.virtualenvs/jujuapp/lib/python2.7/site-packages/juju/environment/config.py", line 8, in <module>
    from juju.lib import serializer
  File "/Users/millisami/.virtualenvs/jujuapp/lib/python2.7/site-packages/juju/lib/serializer.py", line 1, in <module>
    from yaml import CSafeLoader, CSafeDumper, Mark
ImportError: cannot import name CSafeLoader 
```

这是什么错误？我在 Mac 10.6 上，通过自制软件安装了 python 和 pip。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T03:41:45.130

我刚刚在 10.8 遇到了这个问题；juju 使用 PyYaml 中的 libyaml 绑定，所以它需要安装 PyYaml `--with-libyaml`，这比 mac 上需要更多。这是我如何让它工作的：

*   `brew install libyaml`自制
*   下载 PyYaml 源码（[说明](http://pyyaml.org/wiki/PyYAMLDocumentation)）

现在修改`[pyyaml-install-dir]/setup.cfg`如下：

```
# List of directories to search for 'yaml.h' (separated by ':').
include_dirs=/usr/local/Cellar/libyaml/0.1.4/include/

# List of directories to search for 'libyaml.a' (separated by ':').
library_dirs=/usr/local/Cellar/libyaml/0.1.4/lib/ 
```

所以它可以找到你的 libyaml 的自制安装。然后你还需要安装`Cython`..

*   `sudo pip install cython`

最后..

*   `sudo python setup.py --with-libyaml install`（在 PyYaml 目录中）

现在juju应该可以工作了！

# php - ZEND 会自动包含 PhP 单元吗？

> ID：15500658
> 
> 赞同：-10
> 
> 时间：2013-03-19T13:19:42.410
> 
> 标签：php, phpunit

我曾经问过这个代码有什么问题：

```
static $result = null;

if  (isNull($result))
{
    return $result;
} 
```

经过大量的反对（问题消失了），问题是没有这样的东西叫做 isNull 函数。我们拥有的是 is_null

伟大的。我想知道我最初是如何使用 isNull 的。

原来它是自动完成工作。

现在我发现了为什么我输入 isNull。该功能实际存在。我按 ctrl 单击然后转到

```
/**
 * Returns a PHPUnit_Framework_Constraint_IsNull matcher object.
 *
 * @return PHPUnit_Framework_Constraint_IsNull
 * @since  Method available since Release 3.3.0
 */
function isNull()
{
    return PHPUnit_Framework_Assert::isNull();
}

/**
 * Returns a PHPUnit_Framework_Constraint_IsTrue matcher object.
 *
 * @return PHPUnit_Framework_Constraint_IsTrue
 * @since  Method available since Release 3.3.0
 */
function isTrue()
{
    return PHPUnit_Framework_Assert::isTrue();
} 
```

它来自一个名为functions.php 的文件。我不知道这是什么问题

```
<?php
/**
 * PHPUnit
 *
 * Copyright (c) 2002-2011, Sebastian Bergmann <sebastian@phpunit.de>.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *   * Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *   * Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in
 *     the documentation and/or other materials provided with the
 *     distribution.
 *
 *   * Neither the name of Sebastian Bergmann nor the names of his
 *     contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
 * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
 * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 * @package    PHPUnit
 * @subpackage Framework
 * @author     Sebastian Bergmann <sebastian@phpunit.de>
 * @copyright  2002-2011 Sebastian Bergmann <sebastian@phpunit.de>
 * @license    http://www.opensource.org/licenses/bsd-license.php  BSD License
 * @link       http://www.phpunit.de/
 * @since      File available since Release 3.5.0 
```

那是什么？知道该文件是如何进入我的 PHP 的吗？我从来不记得以前有那个文件。

我从来没有添加过这个框架。不是我知道的。然而它就在那里。它必须是一些强大的框架。

我怎么知道自动完成如何认为它是我的代码的一部分？我试过在资源管理器中显示，在导航器中显示，什么都没有。Windows 资源管理器中没有显示选项。

PhPUnit 一定是一个著名的框架，它在我不知道的情况下进入了我的代码。它是由 ZEND 自动安装的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:23:32.697

`isNUll()`是来自 PHPUnit 的一个函数，它是一个“项目”（PHP 框架）。

你的问题看起来像：

```
<?php
 if(myFooRandomFunction($a,$b,2,3.14))
 {
  //do something
 }
} 
```

这是`myFooRandomFunction()`什么，这会做什么？

它没有任何意义（因为我们谈论的是php的功能）！

# 然而

```
PHPUnit_Framework_Assert::isNull() 
```

是该框架的一个功能，用于根据此断言测试您的值。显然，名称`isNull`不是随机的，而是按原样编写的，以便从 php 的标准中识别它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:24:37.090

PHP 单元测试是一个 PEAR 库，用于**测试**PHP 代码并断言分隔代码中是否满足某些条件。

`isNull()`不是内置的 PHP 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T13:23:16.277

PHPUnit 是一个单元测试框架。当您（或某人）将其添加到您的代码中时，它的功能显然在您的代码中随处可用。

这是编程中的常见情况，而不仅仅是 PHP。它发生在每一种语言中——您可以添加其他人的代码或框架或插件或插件，而没有意识到全部含义。在这里，您的框架添加了功能（isNull），如果您决定删除 PHPUnit，这些功能将中断。因此，使用插件可能是有风险的。

# javascript - 如何在画布动画下的画布上播放视频？

> ID：15500660
> 
> 赞同：1
> 
> 时间：2013-03-19T13:19:47.837
> 
> 标签：javascript, html, animation, canvas

如何在画布动画下的画布上播放视频？

比如[这个](http://trailers.apple.com/movies/marvel/ironman3/ironman3-tlr2_h480p.mov)剪辑。

所以这个动画沿着视频的底部移动。

代码：

```
 <html>
       <head>
<script type='text/javascript' src='http://code.jquery.com/jquery-1.8.3.js'></script>
        <script type="text/javascript">
            var context;
            var text = "";
            var textDirection ="";

            $(function()
            {
                context = document.getElementById("cvs").getContext("2d");            
                setInterval("animate()", 360);

                textDirection ="right";
                textXpos = 5;
                text = "This is my video..";    
            });  

            function animate() {            
                // Clear screen
                context.clearRect(0, 0, 500, 500);
                context.globalAlpha = 1;
                context.fillStyle = '#fff';
                context.fillRect(0, 0, 500, 500);    

                var metrics = context.measureText(text);
                var textWidth = metrics.width;

                if (textDirection == "right") {
                    textXpos += 10;

                    if (textXpos > 500 - textWidth) {
                        textDirection = "left";
                    }
                }
                else {
                    textXpos -= 10;

                    if (textXpos < 10) {
                        textDirection = "right";
                    }                    
                }

                context.font = '20px _sans';
                context.fillStyle = 'black';
                context.textBaseline = 'top';
                context.fillText  ( text, textXpos, 180);    
              }    
              </script>
          </head>
          <body> 
             <div id="page">
                <canvas id="cvs" width="500" height="500">
                   Your browser does not support the HTML 5 Canvas. 
                </canvas>
             </div>
          </body>
       </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:23:28.963

我认为您不需要在画布中播放视频。只需在您的 HTML 中创建一个视频元素并使用 CSS 将您的画布元素放在它上面。

**HTML：**

```
<div id="page">
  <video id="video" autoplay loop>
    <source id='mp4'
    src="http://media.w3.org/2010/05/sintel/trailer.mp4"
    type='video/mp4'>
    <source id='webm'
    src="http://media.w3.org/2010/05/sintel/trailer.webm"
    type='video/webm'>
    <source id='ogv'
    src="http://media.w3.org/2010/05/sintel/trailer.ogv"
    type='video/ogg'>
    <p>Your user agent does not support the HTML5 Video element.</p>
  </video>
  <canvas id="cvs" width="500" height="500">
    Your browser does not support the HTML 5 Canvas. 
  </canvas>
</div> 
```

**CSS：**

```
#cvs {
   position: absolute; 
   top: 0px;
   left: 0px;
} 
```

[小提琴](http://jsfiddle.net/jBHCN/1/)。

# spring - Spring声称相同的类名不同

> ID：15500662
> 
> 赞同：0
> 
> 时间：2013-03-19T13:19:49.927
> 
> 标签：spring, classpath

我正在第一次涉足春季，并在尝试在 Eclipse 上运行时遇到以下错误：

```
org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'model' must be of type [com.myCompany.project.Model], but was actually of type [com.myCompany.project.Model] 
```

导致异常的代码：

```
import com.myCompany.project.Model;
// some code
public Model getModel() {
    ClassPathXmlApplicationContext applicationContext = 
            new ClassPathXmlApplicationContext("client-context.xml");
    return applicationContext.getBean("model", Model.class);
} 
```

春天的xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config />

    <bean id="model" class="com.myCompany.project.Model" />

</beans> 
```

client-context.xml位于project/resources，代码在project/src/main/

我认为这是一个类路径问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:22:24.077

Java 和 Spring 区分大小写。这个：

```
<bean id="model" class="com.myCompany.project.model" /> 
```

与此不同：

```
<bean id="model" class="com.myCompany.project.Model" /> 
```

我会想一些更好的名字。这些都不是很有见地。

我不喜欢你这样做的方式。您不应该有一个必须以这种方式访问​​应用程序上下文的 bean。您必须发布更多代码才能确定，但​​您应该将该模型 bean 连接到需要它的对象中，而不是做您正在做的事情。

这样做的唯一原因是与应用程序上下文交互的 bean 是使用 new 而不是 Spring bean factory 创建的。由于您刚刚开始使用 Spring，我建议让 Spring 处理所有依赖项。

# php - CodeIgniter distinct 功能不起作用

> ID：15500665
> 
> 赞同：1
> 
> 时间：2013-03-19T13:19:58.743
> 
> 标签：php, mysql, codeigniter, distinct

这是我想要做的。我希望我的左侧菜单是基于组的。如果我已授予组查看菜单的权限，那么该组应该可以看到它。

现在在继续之前的问题详细信息。我想向您展示到目前为止我所做的事情以及我在哪里应用这个特定的菜单组权限。

`My_Controller.php`这是在核心文件夹中命名的基本控制器。

我的`Main`控制器从`My_Controller`.

这里是`My_Controller`编码。

```
<?php
/**
 * Created by JetBrains PhpStorm.
 * User: SBPS
 * Date: 3/13/13
 * Time: 4:55 PM
 * To change this template use File | Settings | File Templates.
 */

class My_Controller extends CI_Controller{
    function __construct(){
        parent::__construct();
    }
    public function UserGroups(){
        $UserID=1;
        $this->load->model('ui_components/Left_menu_cpanel');
        $Groups=$this->Left_menu_cpanel->get_user_groups($UserID);
        return $Groups;
    }
} 
```

这是我的`Main`控制器。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Main extends My_Controller {
    /*
     * Main Controller
     * Designed By: Kifayat Ullah
     * Purpose: To work as a main Control Panel for the Authenticated users
    */

    public function index() {
        if(!$this->session->userdata('UserID')
         || $this->session->userdata('UserID')<=0){
             redirect('user_management/login_form');
         }// end of session check
        // Prepare the LeftHandSide Menu Object and Send it to the View for Display
        $this->load->model('ui_components/Left_menu_cpanel');
        $UserGroups=$this->UserGroups();

         // retrive menu List object

        // Pass the name of the view that you want to load
        $data['main_container']='tamplet_includes/tamplet_main_container_tags'; 
        $data['UserGroups']=$UserGroups;
        //$data['UserGroups']=$this->UserGroups();
        $this->load->view('SystemView',$data);

        //var_dump($UserGroups);
    }

    function UserAdditionForm(){

        echo 'hello';
    }

}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */ 
```

现在轮到模特了。

我命名的基本模型`My_Model.php`位于核心文件夹中。我`left_menu_cpanel`的扩展自`My_Model.php`.

`My_Model.php`基本模型文件：

```
<?php
/**
 * Created by JetBrains PhpStorm.
 * User: SBPS
 * Date: 3/19/13
 * Time: 3:13 PM
 * To change this template use File | Settings | File Templates.
 */

class My_Model extends CI_Model{
    function __construct(){
        parent::__construct();
    }

    public function get_user_groups($UserID){
        //$UserID=1; // We will Update this UserID Later
        $this->load->helper('security');
        $this->db->select('*');
        $this->db->from('sys_user_accounts');
        $this->db->join('sys_user_groups_memberships', 'sys_user_groups_memberships.UserID = sys_user_accounts.UserID', 'INNER');
        $this->db->where('sys_user_accounts.UserID', $UserID);
        $this->db->join('sys_user_groups', 'sys_user_groups.GroupID = sys_user_groups_memberships.GroupID', 'INNER');
        $query = $this->db->get();

        return $query->result(); // return all forms list

    }
} 
```

`left_menu_cpanel.php`模型文件：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Left_menu_cpanel extends My_Model {
  function __construct()
    {
        parent::__construct();
    }

    // This function returns true if a user authenticaton is successfull
    public function get_left_menu_items($GroupID){
        //$GroupID=1; // We need update this to a Group Array from the users permissions list
        $this->load->helper('security');
        $this->db->distinct();
        $this->db->select('*');
        $this->db->from('sys_group_roles_forms_view');
        $this->db->where('GroupID', $GroupID);
        $query = $this->db->get();  

        return $query->result(); // return all forms list       

    }// end of authenticate function
}//end of class
/* End of file left_menu_cpanel.php.php */
/* Location: ./application/models/user_management/left_menu_cpanel.php.php */
?> 
```

我的表结构`sys_group_roles_forms_view` ![在此处输入图像描述](../Images/e090663844a58692101a1392ea23489d.png)

我的`sys_user_groups` ![在此处输入图像描述](../Images/5e2262ba352f88de701d820072ec1f00.png)

**用户可以属于多个组，一个组可以有多个用户。**

现在我想我已经发布了所有细节，

所以我的问题是，如果我已授予组查看某个选项卡的权限，那么如果我将该权限授予两个或更多组，那么只有选项卡应该出现一次。

但是由于用户属于 3 个不同的组，因此由于这个原因，它重复了 Tab 3 次。但我只想要一次。

通过选项卡，我的意思是左侧菜单重复三次。 ![在此处输入图像描述](../Images/70e6b71f9548ad2799bc63ae2207b160.png)

我试图在网上搜索解决方案，我得到了具有不同功能的解决方案。但是该功能在我尝试时不起作用。

请让我理解为什么该功能不起作用，如果它在我的场景中起作用，那么如何应用该功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:18:02.940

Distinct 对整行进行操作，包括组 id、组名等。您只需选择您需要的列（避免`select *`）并改用该`group_by()`方法。

# javascript - 将 div 内容保存在 cookie 中

> ID：15500672
> 
> 赞同：1
> 
> 时间：2013-03-19T13:20:38.490
> 
> 标签：javascript, jquery, html, cookies, store

首先，在我的站点中，DIV 是动态添加的，具有唯一的 ID（如 div0、div1、div2 ...）。这些 DIV 可以由用户添加或删除：添加时，数组存储 DIV 唯一 ID；删除时，相同的数组会删除 DIV id。所有这些 DIV 都有很多输入字段，我想存储这些内容（即使它是空白的）。我已经搜索了一个解决方案，我发现了类似的东西：

```
var numCookies=0;
function setCookie(){
    var name;
    for(var i=0; i<arrayDivs.length; i++){//ArrayDivs is the array with the DIV id's.
          name='cookie'+numCookies;
          $.cookie(name, $('#'+arrayDivs[i]).html(),{expires:10});                 
          numCookies++;                                                         
    }
} 
```

当我尝试“显示”（警报） - 例如 - 'cookie0' 时，警报为“null”。

```
name='cookie0';
alert(name);
var myCookie=($.cookie(name));
alert(myCookie); //here the alert is 'null' 
```

至少创建了 1 个 div，因此“arrayDivs”不为空，并创建了“cookie0”。显然我做错了什么（非常错误哈哈）。如何将 DIV（及其所有内容）存储在 cookie 中？如果这个实现不是完全错误的，我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:10:59.903

## 试试这个

[http://jsfiddle.net/aiioo7/zSBnG/](http://jsfiddle.net/adiioo7/zSBnG/)

**为 div 使用公共类并使用以下代码块。**

JS代码：-

```
var numCookies = 0;

$(function () {
    $(".cookieClass").each(function () {
        name = 'cookie' + numCookies;
        $.cookie(name, $(this).html(), {
            expires: 10
        });
        numCookies++;
    });

    $("#btnCookie").on("click",function(){
        alert("Cookie 0 : " +$.cookie("cookie0"));
        alert("Cookie 1 : " +$.cookie("cookie1"));
        alert("Cookie 2 : " +$.cookie("cookie2"));
    });

}); 
```

HTML 代码：-

```
<div id="div0" class="cookieClass">val1</div>
<div id="div1" class="cookieClass">val2</div>
<div id="div2" class="cookieClass">val3</div>

<input type="button" id="btnCookie" value="Show Cookie"></input> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:49:39.407

你可以通过迭代获得cookies

```
var nameEQ = 'cookie0' ;
var ca = document.cookie.split(';');
for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) 
             result=c.substring(nameEQ.length,c.length);//this will be the cookie0 :)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:50:55.583

你可以先试试这个简单的例子来开始：

```
// set
$.cookie("cookie", $('#dvContainer').html())

// get
var content = $.cookie("cookie");
var $dvContainer = $('<div class="">' + content + '</div>');

$('body').append($dvContainer); 
```

[**演示在这里**](http://jsfiddle.net/8UpM8/)

# forms - Symfony2如何不转义实体字段属性中使用的字符

> ID：15500676
> 
> 赞同：0
> 
> 时间：2013-03-19T13:20:41.593
> 
> 标签：forms, symfony, escaping

我正在使用`Symfony 2.1.8`并且我有一个与它具有多对一关系的实体的表格。我为此成员使用实体字段，并将其`buildForm()`称为：

> $builder->add('direction', 'entity', array('class' => 'CompanyBundle:Direction',
> 'property' => 'enTranslation.arrowedTitle',
> 'empty_value' => false,
> 'label' => '连接方向',
> '必需' => false ));

`enTranslation.arrowedTitle`是一个函数，它返回一个字符串，其中包括`'&rArr;'`（右箭头的字符集）

当我打电话时，`{{ form_widget(form.direction) }}`我看到的是字符串，（不是箭头，而是 &rArr）为了显示目的，必须显示箭头，但我在字段中看到 &rArr。

对于简单的字符串渲染，`|raw`使用了过滤器，但它不适用于小部件。我应该怎么做才能显示 ⇒ 而不是 '&rArr ;' 在形式？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:06:07.130

您必须至少为标签中包含该字符的字段类型创建表单主题。

为了安全起见，Symfony/Twig 默认会转义值。

有关更多信息，请参阅文档的这一部分：http: [//symfony.com/doc/current/cookbook/form/form_customization.html#form-theming](http://symfony.com/doc/current/cookbook/form/form_customization.html#form-theming)

# sql - 在 ORDER BY 中使用 case 语句 - “',' 附近的语法不正确”

> ID：15500677
> 
> 赞同：1
> 
> 时间：2013-03-19T13:20:44.000
> 
> 标签：sql, sql-server

```
select *

FROM ##RawTrans

ORDER BY GroupBy ASC, 
    CASE WHEN @RepType = 'Emp' THEN 
        CASE WHEN @OrderBy = 0 THEN [Code] ELSE [Name] END, [Date], [Time]
    CASE WHEN @RepType = 'ClockEmp' THEN
        [Clock], CASE WHEN @OrderBy = 0 THEN [Code] ELSE [Name] END, [Date], [Time]
    CASE WHEN @RepType = 'EmpClock' THEN
        CASE WHEN @OrderBy = 0 THEN [Code] ELSE [Name] END, [Clock], [Date], [Time]     
END 
```

有人可以帮我知道我在这段代码中的错误在哪里吗？

我在第 7 行遇到错误

> [',' 附近的语法不正确]

GroupBy 是在此代码之前声明的变量

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T13:37:25.137

表达式必须`case`返回单个值，您不能让它返回逗号分隔的字段名称。

您必须`case`为每个值创建一个，例如：

```
ORDER BY
  GroupBy ASC,
  CASE WHEN @RepType = 'ClockEmp' THEN [Clock] ELSE '' end,
  CASE WHEN @OrderBy = 0 THEN [Code] ELSE [Name] END,
  CASE WHEN @RepType = 'EmpClock' THEN [Clock] ELSE '' end,
  [Date],
  [Time] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:25:36.587

您有 a 的`CASE`内部，`CASE`但不要同时结束它们：

```
CASE WHEN @RepType = 'Emp' THEN 
        CASE WHEN @OrderBy = 0 THEN [Code] ELSE [Name] END, 
```

你结束了你的第二个案例，但不是你的第一个。

如果您打算按不同的标准进行组织，则需要重新组织 CASE 语句，以便它们一次影响一个列顺序选择。

# python - python列表列表索引超出范围

> ID：15500679
> 
> 赞同：0
> 
> 时间：2013-03-19T13:20:44.433
> 
> 标签：python, list, multidimensional-array, outofrangeexception

我已经阅读了一个数字矩阵，我正在尝试使用每个单元格并对每个单元格进行测试。如果数字是 != 0 我想使用它，所以如果它是 0 我目前正在递增 x 和 y 以找到一个非零数。

最后，我将首先查看顶行，然后如果它们都为 0，则开始向下查看第一列，只要我仅指一个（行或列），它就可以正常工作。

为什么我会收到此错误？我是否错误地考虑了单元格的设置方式还是我的代码错误？

矩阵如下所示：

```
0,2,4,1,6,0,0
2,0,0,0,5,0,0
4,0,0,0,0,5,0
1,0,0,0,1,1,0
6,5,0,1,0,5,5
0,0,5,1,5,0,0
0,0,0,0,5,0,0 
```

当我开始尝试这样做时：

```
y = y + 5
x = x + 5
node = Alist[x][y] 
```

我收到一条错误消息：

```
node = Alist[x][y]
IndexError: list index out of range 
```

如果我只是写：

```
y = y + 5
node = Alist[x][y]
print node 
```

它完全可以正常工作，但是当我同时引入 x 和 y 时，我开始出现列表索引超出范围的问题。在我看来，它现在应该是：

```
node = Alist[5][5] 
```

如果遵循矩阵，则为 0

```
def create_matrix(file):
    with open('network.txt') as f:
        Alist = []
        for line in f:
            part = []
            for x in line.split(','):
                part.append(int(x))
            Alist.append(part)
    return Alist

#used to set the start node, used once          
def start_node(Alist):
        x=0
        y=0
        #point node to pos [0][0] of Alist
        node = Alist[x][y]
        #test if node == 0
        while node == 0:
                y = y + 5
                x = x + 5
                node = Alist[x][y]
        #create a list to hold co-ordinates
        if node != 0:
                #return node for processing by check_neighbours
                return node, x, y

#def current_node(Alist, x, y)

#test neighbours to see if they can be used
def check_neighbours(node, Alist, i, j):
        #print out values of x and y
        print "x = %d" %i
        print "y = %d" % j
        print "node in check_neighbours is " + str(node)

#running of code begins here
def main():
        file = ("F:/media/KINGSTON/Networking/network.txt")
        Alist = create_matrix(file)
        node, x, y = start_node(Alist)
        check_neighbours(node, Alist, x, y)
main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:27:26.360

这是循环失败的第二次迭代，因为它将`x`and设置`y`为 10，每个维度中只有 7 个项目。

您的循环`while node == 0:`一次沿着矩阵的对角线向下移动五步，从末端掉落。即使它一次只去一个，它也会从末端掉下来，因为那个对角线全为零。

也许你的意思是`if node == 0`？

我不知道代码实际上想要做什么，但你需要重新考虑算法。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:25:41.027

如果我遵循你的代码，`start_node`你就是

a) 不执行任何类型的边界检查

和

b）跳下矩阵的对角线元素，它们都为零，直到超出界限，正如您的错误告诉您的那样。大概当您只增加一个索引时，您很幸运，因为您在超出界限之前遇到了一个非零元素

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T14:17:07.610

在此代码中，`start_node`返回第一个非零“节点”。
我使用`mat`而不是`Alist`因为我觉得它更 Pythonic。
评论指出更改和提示。

```
def create_matrix(fname): # don't use built-ins as variable names!!
    with open(fname) as f: # you take filename in arguments, but don't use it..
        # why not use in-built functions and list comprehensions ?
        mat = [map(int,line.split(',')) for line in f]
    return mat

#used to set the start node, used once          
def start_node(mat):
    # for each row in matrix (index)..
    for i1 in range(len(mat)):
        # for each cell in row (index)..
        for i2 in range(len(mat[i1])):
            # mat[i1][i2] is the node/cell..
            if mat[i1][i2] != 0:
                # return node, x, y :)
                return mat[i1][i2], i2, i1

# test neighbours to see if they can be used
# same as yours
def check_neighbours(node, Alist, i, j):
    #print out values of x and y
    print "x = %d" % (i,)
    print "y = %d" % (j,)
    print "node (in check_neighbours) is " + str(node)

#running of code begins here
def main():
    fname = "F:/media/KINGSTON/Networking/network.txt"
    mat = create_matrix(fname)
    node, x, y = start_node(mat)
    check_neighbours(node, mat, x, y)
main() 
```

* * *

![差异荧光笔](../Images/64f5d2ec6cd6279a5926abc0c6fc4c45.png)

* * *

解释：

1.  `mat = [map(int,line.split(',')) for line in f]`
    这是一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。[map](http://docs.python.org/2/library/functions.html#map)是一种内置方法。
2.  中的 for 循环`start_node`...

    ```
    for i1 in range(len(mat)):         # 1
        for i2 in range(len(mat[i1])): # 2 
    ```

    1.  `len(mat)`是矩阵中的行数。
        `range(len(mat))`给我们每一行的索引。
    2.  `len(mat[i1])`给我们当前行的长度。
        `range(len(mat[i1]))`给我们该行中每一列的索引。

    在您的代码中，您同时增加了 x 和 y （此处`i2`和`i1`分别），因此沿对角线移动。

# objective-c - 处理图像时出现 Retina 显示问题

> ID：15500680
> 
> 赞同：6
> 
> 时间：2013-03-19T13:20:46.027
> 
> 标签：objective-c, macos, retina-display, nsimage

我在处理视网膜显示器时遇到了问题。NSImage 大小是正确的，但是如果我从中创建 NSBitmapImageRep 并将其写入文件，我会得到图像女巫的大小是原始图像的两倍。当我在非视网膜显示器上使用它时没有这样的问题。

*   我从文件（1920x1080）创建 NSImage
*   我在上面画了一些图
*   我从带有图纸的图像创建 NSBitmapImageRep
*   我把它写到文件中
*   我得到 3840x2160 尺寸的图像

是什么原因造成的？

* * *

```
NSImage *originalImage = [[NSImage alloc] initWithContentsOfURL:fileUrl];

NSImage *editedImage = [[NSImage alloc] initWithSize:originalImage.size];

[editedImage lockFocus];
//I draw here NSBezierPaths
[editedImage unlockFocus];

NSBitmapImageRep *savingRep = [NSBitmapImageRep imageRepsWithData:[editedImage TIFFRepresentation]];
NSData *savingData = [savingRep representationUsingType: NSPNGFileType properties: nil];
[savingData writeToFile:desiredFileLocationAndName atomically:no]; 
```

* * *

如果我打开图像并保存而不进行编辑，我会得到正确的尺寸图像

```
NSImage *imageFromFile = [[NSImage alloc] initWithContentsOfURL:fileURL];
NSBitmapImageRep *newRepresentation = [[NSBitmapImageRep imageRepsWithData:[imageFromFile TIFFRepresentation]];
NSData *savingData = [newRepresentation representationUsingType: NSPNGFileType properties: nil];
[savingData writeToFile:desiredFileLocationAndName atomically:no]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:25:39.130

图像的位图表示以像素为单位。它的大小*是*原来的两倍。NSImage 以点为单位为您提供大小，在视网膜设备上每点测量 2 个像素。它给你的东西没有错。

# extjs3 - extjs 中不显示的简单 HTML 数据

> ID：15500694
> 
> 赞同：0
> 
> 时间：2013-03-19T13:21:22.393
> 
> 标签：extjs3, dataview

我有一个 XTemplate 来显示 html 数据，如下所示

```
var headerTmp = new Ext.XTemplate(
'<br><br><br>',
'<div class="contact-display-container" style="height:100px; width:400px">',
'<div style="font-size:12px; left:15px">Hello </div>',
'</div>',
'<br><br><br>'
); 
```

我指的是数据视图中的数据

```
var dataView1 = new Ext.DataView({
autoScroll: false,
tpl: headerTmp,
itemSelector: 'div.contact-display-container'
}); 
```

我正在尝试在窗口中显示数据

```
var win = new Ext.Window({
height:700,
width:700,
border:false,
modal:true,
title: 'Review Contact Information',
items:[{
    layout : 'vbox',
    items  : [dataView1]
}],
    buttons:[{
                text: 'Cancel',
                handler:function(){
                win.close();
                }
              }]
            });

win.show(); 
```

但是数据“你好”没有显示在窗口上。你能告诉我哪里出错了。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:53:35.243

1.  数据视图应绑定到商店的实例。尝试将商店配置添加到您的数据视图。

2.  您在窗口中过度嵌套了项目。您应该将 dataView 作为子项直接添加到您的窗口中。如果您需要一个额外的父级面板，请将其布局更改为类似的内容，`fit`或者如果您想将其保留为`vbox`，请将`flex`配置添加到数据视图。

这是一个工作示例：http: [//jsfiddle.net/KUqM9/419/](http://jsfiddle.net/KUqM9/419/)

# javascript - 如何将音频流正确嵌入网页，并设置所需的音量？

> ID：15500696
> 
> 赞同：0
> 
> 时间：2013-03-19T13:21:25.417
> 
> 标签：javascript, jquery, html, media-player, asx

如何将 asx 音频流正确嵌入网页，并设置所需的音量？我想设置背景音乐，播放器应该隐藏在网页上。我尝试了下面的示例代码，它可以工作，但我无法设置音量级别 - 它总是以最大音量播放。ps asx 流播放也没有自动启动参数。

```
<embed src="http://top.tk/wma/audiostream.asx" width="0" height="0" autostart="true"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:41:42.943

好的，我自己找到解决方案。

```
<object type="application/x-shockwave-flash" data="http://flash-mp3-player.net/medias/player_mp3_js.swf" width="1" height="1">
    <param name="movie" value="http://flash-mp3-player.net/medias/player_mp3_js.swf" />
    <param name="AllowScriptAccess" value="always" />
    <param name="FlashVars" value="mp3=http%3A//mysite.com/audio/file.mp3&amp;autoplay=1&amp;volume=30" />
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:25:22.010

研究使用[HTML 5 音频](http://www.w3schools.com/tags/ref_av_dom.asp)元素，它有一个音量属性，您可以使用 jQuery 设置和控制。看到这个[堆栈溢出](https://stackoverflow.com/questions/9589292/using-jquery-to-control-html5-audio-volume)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:26:40.923

```
<embed src="http://top.tk/wma/audiostream.asx" volume="XXX" width="0" height="0" autostart="true"> 
```

**XXX**是一个介于 0 和 100 之间的值。

# git - 在带有最新组件的 git 存储库中使用 Zurb

> ID：15500697
> 
> 赞同：2
> 
> 时间：2013-03-19T13:21:33.113
> 
> 标签：git, github, components, zurb-foundation

我已经在我的一个 git 存储库中安装了 Zurb Foundation 框架。继续使用最新的 scss 组件的最佳方式是什么？

Git子模块？宝石文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:01:07.670

在与 Zurb 合作几周后，我现在意识到答案是……

**宝石文件**

Zurb[正是为此目的](http://foundation.zurb.com/docs/sass.html)提供宝石。您仍然可以包含所需的组件，并使用以下命令更新到最新版本：

`gem update zurb-foundation`

但是，我发现我确实需要定期查阅[repo 中的 scss 文件夹，](https://github.com/zurb/foundation/tree/master/scss/foundation/components)以了解如何应用样式和 mixins。

# multithreading - 在 screen.forms 上列出索引超出范围

> ID：15500701
> 
> 赞同：0
> 
> 时间：2013-03-19T13:21:48.117
> 
> 标签：multithreading, delphi, delphi-2010

我用reportbuilder在表格上做一些报告。在主窗体上，我在网格上选择了一些项目，然后生成项目的报告。我想在 Tthread 中执行此操作，但出现错误“列表索引超出范围”。

这是调用堆栈：

```
Classes.TList.Get(1244868)
Classes.TList.Get(???)
Forms.TScreen.GetCustomForms(???)
Forms.TApplication.DoActionIdle
Forms.TApplication.Idle(???)
Forms.TApplication.HandleMessage
Forms.TApplication.Run 
```

似乎某些表单没有及时添加到 Screen.Forms 集合中，或者在 DoActionIdle 中的循环期间从它中释放出来。

关于如何规避这个问题的任何想法？我在 windows XP 和 delphi 2010 上工作。

我也有我的应用程序上的测试程序的问题 TForm3 只是一个没有代码的表单。

```
TDebugThread = class(TThread)
protected
  procedure Execute; override;
public
  constructor Create();
end;

constructor TDebugThread.Create;
begin
   FreeOnTerminate := True;
   inherited Create(False);
end;

procedure TDebugThread.Execute;
var
  oReport:  DeBugReport.TForm3;
begin
  inherited;
  oReport:=  DeBugReport.TForm3.Create(Nil);
  try
    sleep(1000);
  finally
    oReport.Free;
  end;
end;

....
procedure RunThread();
begin
  TDebugThread.Create();
end; 
```

概括：

我在表格上有一份干预清单。我可以在 2/5 报告上打印干预的每个细节和恢复。因此，我在另一个表单（不可见）上使用报告组件（reportbuilder）。新功能是在列表中多选一些干预，并将报告设置为 pdf 格式的文件夹。这很简单，只需在每次干预时调用报告表和一些要更改并保存为 pdf 的参数。但这需要很长时间。用户必须等到程序结束。没问题我在一个线程中设置程序。但是我收到错误“列表索引超出范围”。ArgggArggg，我怀疑报告表（创建，他的工作，然后销毁）的问题，但希望有另一种解决方案。我正在考虑将 TForm 更改为 TDataModule。我可以将表单的所有组件设置到数据模块中吗？我使用 TDbGrid 来查看设计中的一些值。但是在 Tdatamodule 中我无法设置 TDBGrid。好的，我可以没有 TDbGrid。所以我将 TForm 转换为 TDataModule。但 TDataModule 不是答案。在那里，我从 TBitmap 收到错误“Graphics.OutOfResource”。我认为 TBitmap 是从 TppReport 调用的。现在我完成了。我更改代码超过 2 天都没有结果。这次我离开了 TThread。我认为 TBitmap 是从 TppReport 调用的。现在我完成了。我更改代码超过 2 天都没有结果。这次我离开了 TThread。我认为 TBitmap 是从 TppReport 调用的。现在我完成了。我更改代码超过 2 天都没有结果。这次我离开了 TThread。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:31:30.817

让我们来看看`TApplication.DoActionIdle`：

```
procedure TApplication.DoActionIdle;
var
  I: Integer;
begin
  for I := 0 to Screen.CustomFormCount - 1 do
    with Screen.CustomForms[I] do
      if HandleAllocated and IsWindowVisible(Handle) and
        IsWindowEnabled(Handle) then
        UpdateActions;
end; 
```

让我们假设`Screen.CustomFormCount`and 被正确实现并且总是返回由 索引的项目数`Screen.CustomForms`。在这种情况下，结论是循环体正在删除一个表单。那是`Screen.CustomFormCount`在循环执行期间发生变化。

可能发生的唯一方法是表单的操作更新处理程序之一导致表单被删除。所以，我不能告诉你更多，但这个分析应该会引导你找到问题的根本原因。

* * *

你问题的第二部分很简单。您不能在主 GUI 线程之外使用 VCL 组件。

事实上，在你的线程中破坏 VCL 表单是`Screen.CustomFormCount`导致`TApplication.DoActionIdle`.

# php - 如何检查用户是否来自 Google Adwords（例如使用 __utm* coockie）？

> ID：15500702
> 
> 赞同：1
> 
> 时间：2013-03-19T13:21:54.327
> 
> 标签：php, cookies, google-ads-api

如果用户通过 adwords 活动来，我如何检查 PHP？前段时间，有一个cookie“utmcsr”用来保存这些信息，但现在我如何提取这些信息呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T20:23:34.757

你必须做的两件事：

1.  在您的 AdWords 帐户中启用自动标记 [https://support.google.com/adwords/answer/1752125?hl=en](https://support.google.com/adwords/answer/1752125?hl=en)
2.  现在在您的网站上，您可以获得 HTTP_REFERER ($_SERVER['HTTP_REFERER']) 并在字符串中搜索“clid”。如果引荐来源网址包含字符串“clid”，则它来自 AdWords。q= 甚至给你关键字。

# c++ - 使用 scanf() 读取时间 - 如何忽略部分输入

> ID：15500704
> 
> 赞同：0
> 
> 时间：2013-03-19T13:22:06.700
> 
> 标签：c++

我有以下数据：
`10:15:14 D`
`00:15:14 T`
`00:15:14 G`

和七个变量：

`int h1,h2,m1,m2,s1,s2;`
`char mark;`

第一行数据的输出应该是：
`h1==1`
`h2==0`
`m1==1`
`m2==5`
`s1==1`
`s2==4`
`mark=='D'`

`":"`使用时如何忽略`scanf()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:36:44.413

你可以这样做

```
int h1,h2,m1,m2,s1,s2;
h1 = h2 = m1 = m2 = s1 = s2 = 0;
char mark;
if (scanf("%1d%1d:%1d%1d:%1d%1d %c", &h1, &h2, &m1, &m2, &s1, &s2, &mark) != 7)
{
    //some error handling
} 
```

对数字使用不同的变量而不是小时、分钟和秒确实很奇怪，比如

```
scanf("%d:%d:%d %c", &h, &m, &s, &mark); 
```

对于那些评论 cstdio 已过时的人，我个人更喜欢它而不是`iostream`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:35:52.810

阅读[文档](http://linux.die.net/man/3/scanf)你会发现它很简单

```
int h, m, s;
char mark;
const char* buf = "00:15:14 D";
sscanf(buf, "%d:%d:%d %c", &h, &m, &s, &mark);
fprintf(stdout, "h = %d, m = %d, s = %d, mark = %c\n", h, m, s, mark); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:39:08.133

您可以使用垃圾变量扫描带有 %c 的 ':' 部分

```
scanf("%1d%1d%c%1d%1d%c%1d%1d", &h1, &h2, &trash, &m1, &m2, &trash, &s1, &s2); 
```

但是，我也投票不使用 scanf 并使用更强大的输入解析器（取决于您使用它的上下文）

# java - 玩 2.0。豆豆。OneToMany 孤儿删除中断

> ID：15500706
> 
> 赞同：1
> 
> 时间：2013-03-19T13:22:07.587
> 
> 标签：java, playframework-2.0, ebean

我需要帮助。我有两个具有 onetomany 关系的类：

```
@Entity
public class Parent extends Model{

  @Id
  public Long id;

  @OneToMany(fetch = FeatchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)
  public List<Child> children;

} 
```

和

```
@Entity
public class Child extends Model{

  @Id
  public Long id;

} 
```

因此，当我调用 remove() 子实体时，不要从数据库中删除。

```
Parent parent = Parent.find.byId(id);
parent.children.remove(parent.children.get(0));
parent.save(); 
```

下次我 find.byId - 所有孩子都在那里，就像他们从未被删除一样:(

玩 2.0.4，inMemory 数据库。

如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T11:32:24.717

我对此做了一些修改，并意识到为什么这不起作用。

由于您具有没有任何连接表的单向关系，因此实际删除关联将意味着删除相应的子记录（或至少更新 parent_id 列）。EBean 不这样做可能是一件好事，因为它不知道/检查其他表是否与 Child 有外键关系。

您可以做的是明确指出没有其他表与子表有 FK 关系，它由 Parent “拥有”，并且 Ebean 在从关系中删除时完全删除实体是可以的。这是通过在 的属性上添加`@PrivateOwned`注释来完成的。`children``Parent`

这篇文章提示我：[https ://groups.google.com/forum/?fromgroups=#!topic/ebean/dXPWpJCQkj8](https://groups.google.com/forum/?fromgroups=#!topic/ebean/dXPWpJCQkj8)

# endeca - 如何让 Endeca 搜索特定的目标字段，而不是搜索所有索引字段？

> ID：15500710
> 
> 赞同：2
> 
> 时间：2013-03-19T13:22:27.187
> 
> 标签：endeca

我们在电子邮件内容的多个字段（主题和正文）中配置了 Endeca 索引。但我们只希望在主题行上执行搜索。Endeca 也在体内返回匹配项。你如何限制搜索的主题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:11:59.460

您可以通过使用 Ntk 参数指定一个或多个特定字段来搜索它（它们）。

或者，如果您希望经常搜索特定的一组字段，您可以设置一个接口（也使用 Ntk 参数指定），其中包括该组字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T16:46:17.660

这就是您可以使用演示 API 的方法。

```
final ENEQuery query = new ENEQuery();
final DimValIdList dimValIdList = new DimValIdList("0");
query.setNavDescriptors(dimValIdList);
final ERecSearchList searches = new ERecSearchList();
final StringBuilder builder = new StringBuilder();
for(final String productId : productIds){
    builder.append(productId);
    builder.append(" ");
}
final ERecSearch eRecSearch = new ERecSearch("product.id", builder.toString().trim(), "mode matchany");
searches.add(eRecSearch);
query.setNavERecSearches(searches); 
```

[请参阅此帖子以获取完整示例。](http://ourownjava.com/endeca/endeca-presentation-api-navigation-query-multiple-ids/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T11:58:07.863

`Search Interfaces`中使用`Developer Studio`。

参考 - [http://docs.oracle.com/cd/E28912_01/DeveloperStudio.612/pdf/DevStudioHelp.pdf#page=209](http://docs.oracle.com/cd/E28912_01/DeveloperStudio.612/pdf/DevStudioHelp.pdf#page=209)

# web-applications - 如何跟踪部署为公共网络应用程序的 Google 脚本的使用情况？

> ID：15500712
> 
> 赞同：0
> 
> 时间：2013-03-19T13:22:28.150
> 
> 标签：web-applications, google-apps-script, statistics, google-analytics-api

我正在 Google Script 平台上开发一个应用程序，该应用程序稍后将作为网络应用程序部署给公众。我想跟踪人们如何使用脚本，就像谷歌分析对网站所做的那样。可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T16:12:15.583

您需要更具体地说明“人们如何使用脚本”是什么意思。

[获取脚本的公共请求统计信息的一种快速方法是通过Google URL Shortener](http://goo.gl)将 URL 发布到脚本。在那里，您将能够在“详细信息”下查看统计信息。

* * *

但请注意，虽然缩短的 URL 与您的 Google 帐户相关，但这些 URL 的统计信息对所有人都是公开的。您可以自己检查 - 选择任何缩短的 URL（通过 Google Shortener）并将其插入到下面的 URL 中，但没有“http://”前缀：

```
http://goo.gl/#analytics/<Your-Short-URL-goes-here>/all_time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T03:31:00.197

现在可以使用[Google Measurement API](https://developers.google.com/analytics/devguides/collection/protocol/v1/)来完成。

# ruby - 问题：在 Windows 7 上安装 Fluentd gem

> ID：15500724
> 
> 赞同：0
> 
> 时间：2013-03-19T13:23:10.390
> 
> 标签：ruby, rubygems, gem, fluentd

我遇到了 FLUENTD gem 安装的问题。
**问题：：**

```
C:\RailsInstaller\Ruby1.9.3\bin>gem install fluentd-0.10.32.gem  
Temporarily enhancing PATH to include DevKit...  
Building native extensions.  This could take a while...  
ERROR:  Error installing fluentd-0.10.32.gem:  
        ERROR: Failed to build gem native extension.    
C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb  
checking for rb_thread_blocking_region()... yes  
checking for rb_thread_alone()... yes  
checking for rb_str_set_len()... yes  
checking for clock_gettime() in -lrt... no   
checking for sys/select.h... no  
checking for poll.h... no  
checking for sys/epoll.h... no  
checking for sys/event.h... no  
checking for port.h... no  
checking for sys/resource.h... no  
checking for sysctlbyname() in sys/param.h,sys/sysctl.h... no  
creating Makefile  
make  
generating cool.io_ext-i386-mingw32.def  
compiling cool.io_ext.c  
In file included from cool.io.h:11:0,                
from cool.io_ext.c:11:  c:/RailsInstaller/Ruby1.9.3/include/ruby-  
1.9.1/ruby/backward/rubyio.h:2:2: warning: warning use "ruby/io.h"   
instead of "rubyio.h"  
.  
..  
..//Issues a lot of warnings 
.  stat_watcher.c: In function 'Coolio_StatInfo_build':  
stat_watcher.c:249:13: error: 'ev_statdata' has no member named 'st_blksize' 
stat_watcher.c:250:13: error: 'ev_statdata' has no member named 'st_blocks'  
make: *** [stat_watcher.o] Error 1  Gem files will remain installed in          
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0 for 
inspection.  
Results logged to C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/cool.io-1.1.0/ext/cool.io/gem_make.out 

RubyGems Environment:   
- RUBYGEMS VERSION: 1.8.24   
- RUBY VERSION: 1.9.3 (2013-02-22 patchlevel 392) [i386-mingw32]  
- INSTALLATION DIRECTORY: C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1  
- RUBY EXECUTABLE: C:/RailsInstaller/Ruby1.9.3/bin/ruby.exe  
- EXECUTABLE DIRECTORY: C:/RailsInstaller/Ruby1.9.3/bin  
- RUBYGEMS PLATFORMS:  
- ruby      
- x86-mingw32   
- GEM PATHS:  
- C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1       
-  C:/Users/ssabaris/.gem/ruby/1.9.1  
- GEM CONFIGURATION:  
- :update_sources => true  
- :verbose => true  
- :benchmark => false   
- :backtrace => false  
- :bulk_threshold => 1000  
- REMOTE SOURCES:  
- http://rubygems.org/ 
```

**问题 ::**如何解决这个**cool.io**依赖问题，以便我可以继续安装 Fluentd？

**相关链接::** [https://rubygems.org/gems/fluentd](https://rubygems.org/gems/fluentd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:00:55.787

如果您想记录事件而不是将它们路由到应用程序的其他部分，Log4r 或 Logging 可能是潜在的替代方案。

你的要求是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T02:27:01.787

Fluentd 不能在 Windows 上运行。您可以使用 ngxlog 将日志从 Windows 收集到 Fluentd。请检查此博客条目。

*   [http://docs.fluentd.org/articles/windows](http://docs.fluentd.org/articles/windows)

# django - 如何发现 Django 何时发出 COMMIT sql 语句

> ID：15500725
> 
> 赞同：3
> 
> 时间：2013-03-19T13:23:12.900
> 
> 标签：django, relational-database, commit

我使用 Django 和 postgres。我需要检查 Django SQL 活动以进行优化，但`connection.queries`不包括 COMMIT 语句。有谁知道我如何找到我在代码中使用的事务策略如何准确影响 SQL 命令的方式？理想情况下，我希望有一个类似 `connection.queries`但包含提交和回滚的列表。

# c++ - SDL 图像的问题

> ID：15500728
> 
> 赞同：1
> 
> 时间：2013-03-19T13:23:18.560
> 
> 标签：c++, sdl

我在 mac OS 10.8.2 上运行并使用以下命令编译我的程序；

```
g++ main.cpp `sdl-config --cflags --libs` -o whateverfilename 
```

我可以很好地编译 SDL 程序，但是一旦我尝试使用 SDL 图像库，就会出错 - 我收到以下错误：

```
Undefined symbols for architecture x86_64:
  "_IMG_Init", referenced from:
      _SDL_main in cco8lzYA.o
  "_IMG_Load_RW", referenced from:
      _SDL_main in cco8lzYA.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我猜链接器缺少搜索路径或其他东西。我一直在尝试查找和编辑链接器搜索路径，但似乎无法管理，所以如果有人能告诉我如何做到这一点或我可能会导致什么其他问题，我将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:30:05.383

我认为您需要添加`lSDL_Image`编译器标志，当涉及到 C++ 和 SDL 时，我是一个菜鸟，自从我用它做任何事情以来已经很久了。

我也非常推荐[LazyFoo 的教程](http://lazyfoo.net/SDL_tutorials/index.php)

# asp.net - 如何在 Visual Studio 2012 的空 Web 应用程序项目中添加具有剃刀语法的 Web Pages 2？

> ID：15500731
> 
> 赞同：2
> 
> 时间：2013-03-19T13:23:19.843
> 
> 标签：asp.net, asp.net-webpages

我想创建简单的 Web Pages 2 应用程序。

我想使用`File->New->Project->Empty Web Application`而不是`File->New-Web Site`.

创建新的空 Web 应用程序后，我无法添加 .cshtml 文件。

我能做到的唯一方法是：

*   Nuget -> 使用 razor 库安装 Web Pages 2
*   添加->新建->Razor MVC 视图

我没有将 .cshtml 文件放在 Views 目录中。相反，我将其保留在根目录中并将其命名为 Default.cshtml

这真的是这样做的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-06T00:18:37.077

实际上，您可以这样做。我已经这样做了。

打开 VS 2013

从主菜单：文件 > 新建 > 项目

在已安装的模板下

选择模板 Visual C#（或 VB）Web（不要选择 VS 2012）

从屏幕右侧的项目列表中选择 ASP.NET Web Application

下一个屏幕 - 选择 Empty Project，检查 Webforms

运行一次，出现没有默认页面的错误

仅项目 Global.asax Web.config 中的文件

在解决方案资源管理器中选择“项目”（不要选择解决方案）选择管理 NuGet 包

```
Microsoft ASP.NET Web Pages
Microsoft ASP.NET Web Pages Data (Important! Includes WebMatrix dlls) 
```

添加布局和查看页面注意代码被识别为错误

如果你运行，你会得到一个 ViewBag 不存在的服务器错误 Change ViewBag to Page

再次运行。您应该能够像标准网页一样开发，但使用 Razor 并且没有视图状态。

应该是这样的。自 VS 2012 以来，我一直在这样做，并且喜欢结果。我联系了 MS 的 Scott H.，将其添加为项目类型。没走多远。他没有看到以这种方式进行项目的意义。恕我直言，我不同意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T15:18:20.233

Web Pages 2 应用程序是 Web *Sites*，而不是 Web *Applications*，因此您应该执行以下操作：

```
File » New Web Site » ASP.NET Web Site (Razor 2) 
```

# ajax - 我们如何使用 GWT UI-Binder 开发 ajax 应用程序

> ID：15500732
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:23:21.187
> 
> 标签：ajax, gwt, uibinder

根据我的项目要求，我想使用 GWT Ui-Binder 开发一个 Ajax 应用程序。用于在从数据库获取内容时自动刷新页面。

记住：不点击刷新按钮（或）任何鼠标动作。如果你知道这个任务......你能给我任何相关的例子吗......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:32:20.733

如果您想自动刷新，那么您可能会遇到从数据库获取数据的任何情况，例如 rpc 出现在**成功**方法等上。然后只需调用 `Window.Location.refresh();`那里。

# windows-phone-8 - 为深色 WP 8 主题设计白色（浅色）皮肤是不好的做法吗？

> ID：15500733
> 
> 赞同：0
> 
> 时间：2013-03-19T13:23:28.783
> 
> 标签：windows-phone-8, windows-phone

我正在考虑设计一个 Windows Phone 应用程序，并且一直在阅读有关深色/浅色主题选项的信息。

我设计的公司品牌基于大多数白色界面。据我所知，设备默认为黑暗。

我注意到大多数应用程序不考虑这种切换能力，但希望人们的意见/最佳实践或者我错过了技术选项。

因此，我针对 WP 8 深色方案设计了我的白色主题应用程序，或者我应该只针对浅色方案进行设计，并以某种方式强迫用户使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:56:38.583

您可以使您的应用程序主题不可知。只需覆盖全局资源字典中的所有样式，无论主题如何，您的应用程序看起来都一样。

您会注意到 Windows Phone 中的默认邮件应用程序始终是白色的。此外，Foursqare 和 Facebook 应用程序是无主题的。

如果您希望为您的应用程序使用个人样式，则由您决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:32:07.287

使用不同的搜索词后，我发现了几个链接

[如何在 Windows Phone 7 中强制使用浅色主题？](https://stackoverflow.com/questions/4096388/how-to-force-to-use-light-theme-in-windows-phone-7) [http://matthiasshapiro.com/2011/01/17/theme-forcing-for-windows-phone-7-silverlight/](http://matthiasshapiro.com/2011/01/17/theme-forcing-for-windows-phone-7-silverlight/)

似乎这是最好的解决方案

[http://www.jeff.wilcox.name/2012/01/phonethememanager/](http://www.jeff.wilcox.name/2012/01/phonethememanager/)

# c# - 通过分解批处理任务来增强可测试性

> ID：15500735
> 
> 赞同：0
> 
> 时间：2013-03-19T13:23:34.317
> 
> 标签：c#, dependency-injection, decomposition

我似乎找不到太多关于这方面的信息，所以我想我会在这里提出来。我经常发现自己遇到的问题之一是在处理列表时对单个对象的创建进行单元测试。例如，我有一个方法签名，例如`IEnumerable<Output> Process(IEnumerable<Input> inputs)`. 当对单个输入进行单元测试时，我会创建一个输入列表并简单地调用`First()`结果并确保它是我期望的。这将导致诸如：

```
public class BatchCreator
{
    public IEnumerable<Output> Create(IEnumerable<Input> inputs)
    {
        foreach (var input in inputs)
        {
            Console.WriteLine("Creating Output...");
            yield return new Output();
        }
    }
} 
```

我目前的想法是，也许一个类应该负责创建对象，而另一个类负责编排我的输入列表。请参见下面的示例。

```
public interface ICreator<in TInput, out TReturn>
{
    TReturn Create(TInput input);
}

public class SingleCreator : ICreator<Input, Output>
{
    public Output Create(Input input)
    {
        Console.WriteLine("Creating Output...");
        return new Output();
    }
}

public class CompositeCreator : ICreator<IEnumerable<Input>, IEnumerable<Output>>
{
    private readonly ICreator<Input, Output> _singleCreator;

    public CompositeCreator(ICreator<Input, Output> singleCreator)
    {
        _singleCreator = singleCreator;
    }

    public IEnumerable<Output> Create(IEnumerable<Input> inputs)
    {
        return inputs.Select(input => _singleCreator.Create(input));
    }
} 
```

通过上面发布的内容，我可以轻松测试我是否能够创建一个`Output`给定的`Input`. 请注意，除了 from 之外，我不需要调用`SingleCreator`代码库中的任何其他位置`CompositeCreator`。创建`ICreator`还可以让我在需要执行类似任务的其他时间重复使用它，我目前在当前项目中执行 2-3 次

有没有人有这方面的经验可以提供一些启示？我只是想太多了吗？非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:57:14.887

一般来说，你的推理本质上没有错。或多或少这就是解决问题的方法。

但是，您`CompositeCreator`实际上并不是复合的，因为它恰好使用一种“创建方法”。

很难说更多，因为我们不了解您的项目内部情况，但如果它很好地集成到您的用例中，那就没问题了。我会尝试的只是留下来`ICreator<Tin, Tout>`并制作一个扩展方法`IEnumerable<Tout> CreateMany(this IEnumerable<Tin> c)`来处理集合。您可以轻松、独立地测试两者（伪造`ICreator`并检查是否处理了输入集合）。这样你就可以摆脱`ICreator<IEnumerable, ...>`，这通常是好的，因为作为一个整体对集合进行操作和对单个项目进行操作通常不能很好地结合在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:00:54.697

我不完全确定你为什么需要 IEnumerable 输入/输出选项，复合创建者，除非它不仅仅是一个集合，因为这是 LINQ 解决的问题，看起来像：

```
var singleCreator = new SingleCreator();
var outputs = InputEnumerable.Select(singleCreator.Create); 
```

我认为这是主观的，并且取决于您传递的类的复杂性 - 如果它不仅仅是一个 IEnumerable ，那么拥有某种多重创建者是值得的，它可能需要也可能不需要是一个类。

# java - 如何从部署在同一个tomcat中的另一个war文件重新配置war文件的log4j

> ID：15500738
> 
> 赞同：0
> 
> 时间：2013-03-19T13:23:39.813
> 
> 标签：java, logging, war, log4j

我在 tomcat 中部署了两个战争文件 WARA 和 WARB，它们都使用相同的 log4j 属性文件。如何通过部署在同一个tomcat中的另一个独立应用程序重置两个war文件中的log4j配置而不干扰WARA和WARB？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:22:43.360

如果轮询是一个选项，您可以使用`PropertyConfigurator.configureAndWatch()`.

更多**[在这里](http://janvanbesien.blogspot.in/2010/02/reload-log4j-configuration-in-tomcat.html)**。

如果您需要手动执行此操作，则该过程会更长一些。在高层次上如下。

1.  为您的应用程序服务器/servlet 容器配置 JMX。
2.  编写一个 MBean 以触发完全重新配置。
3.  在 WARA 和 WARB 中注册 MBean。
4.  从另一个 webapp 连接到 MBean 服务器。
5.  在 WARA 和 WARB 中调用 MBean。

如果您可以提供有关您正在使用的软件堆栈的更多详细信息，我可以提供有关如何执行上述操作的具体详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:32:31.230

不是最好的方法，而是制作一个包含属性文件的 jar 文件，并将其放在 tomcat lib 文件夹中，所有应用程序都使用相同的属性文件。

# php - 另一个页面的范围值

> ID：15500748
> 
> 赞同：-2
> 
> 时间：2013-03-19T13:24:21.710
> 
> 标签：php, javascript, html

我想要一个有范围的程序，最后我想给用户所有的结果。

首先是范围

**Javascript**：

```
 function imgShow(Target)
 {
   for(var i=1; i<=images; i++)
   {
        if(i != Target) 
          document.getElementById('img' + i).style.display = 'none';
        else 
          document.getElementById('img' + i).style.display = 'block';
   }
 } 
```

**HTML**

```
 <input type="range" id="slider" max="<?php echo ($images*1); ?>" min="1"
   value="1" onchange="imgShow(parseInt(this.value/1));" />
 <output>
  <?php 
    for ($i=0; $i<$images; $i++){
      $image = $files[$i];
      echo '<div id="img' . ($i+1) . '" class="photo" style=""><img src="' . $image . '" /></div>';
    }
  ?>
</output> 
```

> ***上面的代码很好（我写这个是为了让你知道我使用了哪些变量）***

你看我每次改变图像时都会给出范围的值。然后我的问题是，我需要将它放入数据库中，所以我首先想在文本区域中显示它，以便用户知道他们在测试中的得分。

```
 echo '<form action="'. $_SERVER["PHP_SELF"] .'" method="post">';
 echo 'Solution:<br>';
 echo '<textarea name="message"></textarea><br>';
 echo '</form>'; 
```

我想我需要在 textarea 之间写一些东西，但我不知道是什么。已经尝试了一些东西。是的，因为我在“if($_SERVER[REQUEST_METHOD]=='POST')”的 else 中执行此操作。我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:27:50.193

`textarea`元素在它们内部而不是在`value`属性中具有它们的值。

IE

`<textarea> value here </textarea>`

# rest - 重定向 Sinatra 请求更改方法和正文

> ID：15500759
> 
> 赞同：0
> 
> 时间：2013-03-19T13:24:55.127
> 
> 标签：rest, redirect, sinatra

有没有办法在 Sinatra 上处理 GET 请求并在同一服务器上使用不同的主体发出 PATCH 请求？用户发出请求`GET /clean_beautiful_api`，服务器将其重定向到`PATCH /dirty/clogged_api_url_1?crap=2 "{request_body: 1}"`?

我想在不干扰功能的情况下清理遗留 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:28:09.313

如果我理解正确，最简单的方法是将用于的块提取`patch`到帮助器中：

```
patch "/dirty/clogged_api_url_1"
  crap= params[:crap]
end 
```

到：

```
helpers do
  def patch_instead( params={} )
    # whatever you want to do in here
    crap= params[:crap]
  end
end

get "/clean_beautiful_api" do
  patch_instead( params.merge(request_body: 1) )
end

patch "/dirty/clogged_api_url_1"
  patch_instead( params )
end 
```

或者你可以使用 lambda...

```
Patch_instead = ->( params={} ) {
  # whatever you want to do in here
  crap= params[:crap]
}

get "/clean_beautiful_api" do
  Patch_instead.call( params.merge(request_body: 1) )
end

# you get the picture 
```

主要是将方法提取到其他地方然后调用它。

* * *

编辑：您还可以[通过 Rack 接口在内部触发另一条路](http://www.sinatrarb.com/intro#Triggering%20Another%20Route)由`call`。

# asp.net-mvc - 使用 ASP.NET MVC 的 Knockout JSON 数据重新加载问题

> ID：15500765
> 
> 赞同：0
> 
> 时间：2013-03-19T13:25:16.407
> 
> 标签：asp.net-mvc, json, knockout.js

我已经使用 ko.mapping.fromJS(Model) 将 ASP.NET MVC viewModel 加载到 KnockoutJS 中。

我的 viewModel 看起来像这样：

```
public IEnumerable<FunkyThing>funkyThings;
public FunkyThing selectedFunkyThing; 
```

每个 FunkyThing 都有一个字符串属性 funkyThingName。映射工作正常，我可以看到表中所有时髦的东西及其名称。

我想添加一个快速刷新按钮。所以我创建了一个简单的按钮，然后将数据绑定到按钮单击到敲除功能刷新，看起来像这样：

```
 model.refresh= function () {
            var url = '@Url.Action(MVC.FunkyThings.RefreshJSON())';
            $.getJSON(url, function (returnedData) {                
                ko.mapping.fromJS(returnedData, {}, model.funkyThings);
            }); 
```

成功调用刷新函数，该函数又调用服务器上的 RefreshJSON 方法。服务器传回 JSON 数据——一个更新的 funkyThings 数组，当我将鼠标悬停在 chrome 的调试器中的 returnedData 上时，我可以在 chrome 中看到这些数据。

然而不幸的是，在映射函数被调用后，绑定中断：

未捕获的错误：无法解析绑定。消息：ReferenceError：funkyThingName 未定义；绑定值：文本：funkyThingName

而且我不确定为什么...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:51:02.507

是`model.funkyThings`可观察的吗？如果是，那么您可以尝试将其作为函数传递给映射方法：

```
ko.mapping.fromJS(returnedData, {}, model.funkyThings()); 
```

如果做不到这一点，你确定刷新方法返回的 JSON 的结构是正确的吗？

啊，如果你得到一个 JSON 字符串，那么你需要调用映射插件的 fromJSON 方法：

```
ko.mapping.fromJSON(returnedData, {}, model.funkyThings); 
```

您可能也需要在 funkyThings 上加上括号，但不要先尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:33:12.787

如果返回的对象格式正确并且绑定也很好，您只需要执行以下操作：

```
 model.FunkyThings(returnedData). 
```

# ruby-on-rails - gem bundler 错误在 Window 7 64 位上找不到 gem 'myql2 (~> 0.3.11) x86-mingw32'

> ID：15500767
> 
> 赞同：1
> 
> 时间：2013-03-19T13:25:17.883
> 
> 标签：ruby-on-rails, rubygems, mysql2

我在 Windows 7 64 位上使用带有 rails 3.2.12 的 ruby​​ 1.9.3 并出现以下错误并且在安装 mysql2 gem 时遇到问题。

```
gem install mysql2

I am getting following error
  You've installed the binary version of mysql.
  It was built using MySQL Connector/C version 6.0.2.
  It's recommended to use the exact same version to avoid potential issues.

  At the time of building this gem, the necessary DLL files where available
  in the following URL:

  http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick

  You can put the lib\libmysql.dll available in this package to your Ruby bin directory.
  E.g. C:\Ruby\bin 
```

我按照 dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick 并按照指示复制但没有运气。

我也遵循[这一点](https://stackoverflow.com/questions/8740868/mysql2-gem-compiled-for-wrong-mysql-client-library)，但最后得到同样的错误任何帮助将不胜感激。谢谢

# sql-server - 我可以用生成的错误日志做什么？

> ID：15500769
> 
> 赞同：1
> 
> 时间：2013-03-19T13:25:26.913
> 
> 标签：sql-server, web-applications, error-handling

我目前正在开发一个生成每日错误（和非错误）日志的 Web 应用程序。

当前系统将每个任务的日志输出到文本文件，并将严重错误以及“开始”和“完成”类型的消息输出到电子邮件帐户。

当前的工作流程如下：搜索邮箱是否有错误，然后去查找 .txt 文件查看相关的错误并查找原因。

大约有 30 个 txt 文件分布在大约 5 个服务器上。

该系统是在我之前建立的，但我正在寻找有关如何处理这种情况的任何建议。

我可以控制形成错误日志的脚本，所以几乎可以做任何事情——但我不知道从哪里开始：我考虑过某种面向 Web 的仪表板工具，也许将文件输出到 RSS 或其他什么？我应该使用任何外部或内部工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:38:43.843

当然，您可以使用[SQL Server Reporting Services](http://en.wikipedia.org/wiki/SQL_Server_Reporting_Services)或查看[此比较表](http://en.wikipedia.org/wiki/Comparison_of_network_monitoring_systems)，有一些软件包可能支持 SQL Server，但它们可能对您的任务来说不堪重负。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:59:44.283

目前尚不清楚您的问题是什么或您想要做什么，但如果我理解正确，您最大的问题是某些消息被记录到日志文件中，而其他消息是通过电子邮件发送的。因此，没有一个位置包含所有错误消息，这使得分析和故障排除变得困难。

最好的解决方案是使用支持多个日志记录目标（文件、数据库、电子邮件）和严重性的日志记录框架。这将允许您指定一个配置，例如“所有错误都记录到文本文件中，关键错误*也*通过电子邮件发送”，因此您可以确保将所有内容放在一个地方进行一般分析，但也优先处理严重错误.

您没有提到您使用的编程语言，但假设它是基于 .NET 的，那么[log4net](http://logging.apache.org/log4net/)和[Enterprise Library](http://msdn.microsoft.com/en-us/library/ff648951.aspx)是两个常见的框架，并且在 SO 上有很多关于它们的问题。谷歌搜索应该让您对您的情况的利弊有一个很好的了解。如果您使用不同的语言，那么您可以寻找等效的包：log4j (Java)、`logging`(Python) 等。

# jquery - 在 Jquery Isotope 插件上按下所有按钮时如何删除特定元素？

> ID：15500770
> 
> 赞同：1
> 
> 时间：2013-03-19T13:25:27.730
> 
> 标签：jquery

这就是我要排序的代码。我需要所有按钮来隐藏带有类退出的 div，并且当单击“超过 1265”按钮再次显示它时。

```
 <!doctype html>
        <html lang="en">
        <head>

          <meta charset="utf-8" />
          <title>Combination filters &middot; Isotope Demo</title>

          <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

          <link rel="stylesheet" href="../css/style.css" />

          <!-- scripts at bottom of page -->

        </head>
        <body class="demos ">

          <section id="content">

            <h1>Find your topload Tester</h1>
            <h3>Customize your datasheet according to your sample's dimensions</h3>

        <section id="options" class="clearfix combo-filters">

            <div class="option-combo height">
              <h4>Height (mm)</h4>
              <ul class="filter option-set clearfix " data-filter-group="height"> 
                <li><a id="all" href="#filter-height-any" data-filter-value="*" class="selected">All</a>

                  <li><a href="#filter-height-525" data-filter-value=".525">525 or less</a>

                  <li><a href="#filter-height-645" data-filter-value=".645">645 or less</a>

                  <li><a href="#filter-height-1265" data-filter-value=".1265">more than 1265</a>

              </ul>
            </div>
            <br>
            <br>
            <div class="option-combo width">
              <h4>Width &nbsp;(mm)</h4>
              <ul class="filter option-set clearfix " data-filter-group="width"> 
                <li><a id="all" href="#filter-width-any" data-filter-value="" class="selected">All</a>

                  <li><a href="#filter-width-134" data-filter-value=".134w">134 or less</a>

                  <li><a href="#filter-width-190" data-filter-value=".190w">190 or less</a>

                  <li><a href="#filter-width-290" data-filter-value=".290w">290 or less</a>

                  <li><a href="#filter-width-328" data-filter-value=".328w">328 or less</a>

                  <li><a href="#filter-width-420" data-filter-value=".420w">420 or more</a>

              </ul>
            </div>
            <br>
          <br>
            <div class="option-combo depth">
              <h4>Depth (mm)</h4>
              <ul class="filter option-set clearfix " data-filter-group="depth"> 
                <li><a id="all" href="#filter-depth-any" data-filter-value="" class="selected">All</a>

                  <li><a href="#filter-depth-134" data-filter-value=".134d">134 or less</a>

                  <li><a href="#filter-depth-190" data-filter-value=".190d">190 or less</a>

                  <li><a href="#filter-depth-290" data-filter-value=".290d">290 or less</a>

                  <li><a href="#filter-depth" data-filter-value=".328d">328 or less</a> 

                  <li><a href="#filter-depth-420" data-filter-value=".420d">420 or more</a>           
              </ul>
            </div>
            <br>
            <br>

            <div class="option-combo load">
              <h4>Load (kN)&nbsp;&nbsp;&nbsp;&nbsp;</h4>
              <ul class="filter option-set clearfix " data-filter-group="load"> 
                <li><a id="all" href="#filter-load-any" data-filter-value="" class="selected">All</a>

                  <li><a href="#filter-load-2.5" data-filter-value=".2-5l">2.5 or less</a>

                  <li><a href="#filter-load-5" data-filter-value=".5l">5 or less</a>

                  <li><a href="#filter-load-10" data-filter-value=".10l">10 or less</a>

                  <li><a href="#filter-load-25" data-filter-value=".25l">25 or less</a> 

                  <li><a href="#filter-load-50" data-filter-value=".50l">50 or more</a>           
              </ul>
            </div>

        </section> <!-- #options -->

        <div id="container" class="clearfix">

                <div id="data1" class="width-height-depth 525 134w 290w 290d 134d 2-5l blue">Datasheet1</div>

                <div id="data2" class="width-height-depth 645   190w 328w 328d 190d 5l">Datasheet2</div>

                <div id="data3" class="width-height-depth 50l 25l 10l ">Datasheet3</div>

                <div id="exit" class="width-height-depth 1265">This configuration is beyond the standard range of top-load testers. Please contact Mecmesin Sales to discuss ways to meet your requirements</div>

        </div> <!-- #container -->

        <script src="../js/jquery-1.7.1.min.js"></script>
        <script src="../jquery.isotope.min.js"></script>
        <script>
          $(function(){

            var $container = $('#container'),
                filters = {};

            $container.isotope({
              itemSelector : '.width-height-depth',

              masonry: {
                columnWidth: 80
              },
              filter: '#data1,#data2 , #data3'
            });

            // filter buttons
            $('.filter a').click(function(){
              var $this = $(this);
              // don't proceed if already selected
              if ( $this.hasClass('selected') ) {
                return;
              }

              var $optionSet = $this.parents('.option-set');
              // change selected class
              $optionSet.find('.selected').removeClass('selected');
              $this.addClass('selected');

              // store filter value in object
              // i.e. filters.color = 'red'
              var group = $optionSet.attr('data-filter-group');
              filters[ group ] = $this.attr('data-filter-value');
              // convert object into array
              var isoFilters = [];
              for ( var prop in filters ) {
                isoFilters.push( filters[ prop ] )
              }
              var selector = isoFilters.join('');
              $container.isotope({ filter: selector });

              return false;
            });

          });

        </script>

            <footer>
             <p>If you cant find what you are looking for blah blah blah....</p>
            </footer>

          </section> <!-- #content -->

        </body>
        </html> 
```

我试过你的解决方案。它几乎可以工作，但是当我按下“超过 1265”按钮时，文本不再出现。似乎应用了 display:none 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:32:59.823

如果你的意思是*remove*是*hide*，那很简单。

1.  首先，您在单击“全部”按钮时绑定一个处理程序，该按钮将隐藏所述元素。

2.  `select`然后在元素更改时绑定另一个处理程序。检查您的值是否合适，然后显示。

您的代码将如下所示：

```
 $('button').on('click', function(){

    $('#exit').hide();

  });

  $('select').on('change', function(){

    if( $(this).val() === '{your-appropriate-value}' ) $('#exit').show();

  }); 
```

`[**Working demo**](http://jsbin.com/oqafix/1)`

## 编辑

既然你编辑了你的问题，我会给你一个更具体的答案。对于将来可能会搜索类似内容的任何人，我都会保留我的一般答案。

为了做你想做的事，你必须在上面的代码中改变：

1.  将点击功能绑定到`a#all`.

2.  将您的第二个功能绑定到单击，`.filter a`然后检查是否合适并显示。老实说，这根本没有必要，您可以将其绑定到您的特定元素（`#filter-height-1265`），因为您的所有元素都有一个`id`. 不过，我给你一个更一般的答案，所以如果你需要调整它，你就会明白要点。

3.  此外，在这种情况下，您可能希望函数`return false`.

您的代码将如下所示：

```
 $('a#all').on('click', function(){

    $('#exit').hide();
    return false;

  });

  $('.filter a').on('click', function(){

    if( $(this).data('filter-value') == '.1265' ) $('#exit').show();
    return false;

  }); 
```

# ruby-on-rails - 载波上的照片上传限制未定义的用户方法

> ID：15500776
> 
> 赞同：0
> 
> 时间：2013-03-19T13:25:40.353
> 
> 标签：ruby-on-rails, carrierwave

我正在使用 CarrierWave 作为我的相册，并且我正在尝试进行设置，以便我可以防止用户最多只能将 5 张照片上传到他们的画廊。但是，当单击页面标题为“PhotosController#create 中的 NoMethodError”的“上传照片”按钮时，我收到了“未定义的方法‘用户’”错误

照片.rb：

```
class Photo < ActiveRecord::Base
  attr_accessible :title, :body, :gallery_id, :name, :image, :remote_image_url
  belongs_to :gallery
  mount_uploader :image, ImageUploader

    LIMIT = 5

    validate do |record|
      record.validate_photo_quota
    end

    def validate_photo_quota
      return unless self.user
      if self.user.photos(:reload).count >= LIMIT
        errors.add(:base, :exceeded_quota)
      end
    end
end 
```

照片_控制器：

```
class PhotosController < ApplicationController

  def new
    @photo = Photo.new(:gallery_id => params[:gallery_id])
  end

  def create
    @photo = Photo.new(params[:photo])
    if @photo.save
      flash[:notice] = "Successfully created photos."
      redirect_to @photo.gallery
    else
      render :action => 'new'
    end
end

  def edit
    @photo = Photo.find(params[:id])
  end

  def update
    @photo = Photo.find(params[:id])
    if @photo.update_attributes(paramas[:photo])
      flash[:notice] = "Successfully updated photo."
      redirect_to @photo.gallery
    else
      render :action => 'edit'
    end
  end

  def destroy
    @photo = Photo.find(params[:id])
    @photo.destroy
    flash[:notice] = "Successfully destroyed photo."
    redirect_to @photo.gallery
  end
end 
```

我以为我以前已经定义了用户，除非必须为每个控制器完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:58:08.803

你正在调用`self.user`模型`Photo`。`self`在这种情况下，关键字代表`photo`. 根据您的定义， a`photo`属于 a `gallery`，因此，`user`不能从照片中调用。

如果 a`gallery`属于用户，那么您应该能够调用`self.gallery.user`以选择该照片的用户所有者。

* * *

您还可以定义`has_many :through`关联，以便您可以直接从该照片调用用户，或检索该用户的所有照片。

这可以按照[文档](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)来完成。在你的情况下：

```
class User < ActiveRecord::Base
  has_many :galeries
  has_many :photos, :through => :galeries
end

class Photo < ActiveRecord::Base
  belongs_to :user, :through => :gallery
  belongs_to :gallery
end

class Gallery < ActiveRecord::Base
  belongs_to :user
  has_many :photos
end 
```

然后你应该能够打电话`photo.user`并获得图片的所有者。

# android - android：使用户仅在一个时间段范围内选择日期

> ID：15500781
> 
> 赞同：3
> 
> 时间：2013-03-19T13:25:42.760
> 
> 标签：android, validation, android-datepicker

我希望用户仅在该月内选择一个日期，并且不小于当前日期。

例如：如果这一天是 13 年 3 月 18 日，那么用户 shud 只选择从 13 年 3 月 18 日到 31 日 3 月 31 日的任何日期。此外，我有两个按钮用于选择“从日期”和“到日期”，它们使用相同的监听器进行日期选择器。我已经尝试了本网站上已经建议的不同解决方案，但在这种情况下它们不兼容。如果我使用建议的代码，我将失去对两个按钮使用相同日期选择器侦听器的功能。我尝试了下面的代码，但它不工作。

```
public class Leave_form extends Activity 
{

    private static EditText tvDislpayResult;
    private Button startPickDate;
    private Button endPickDate;
    private Calendar startDate;
    private Calendar endDate;
    //private EditText startDateDisplay;
    //private EditText endDateDisplay;
    static final int DATE_DIALOG_ID = 0;
    private TextView startDateDisplay;
    private TextView endDateDisplay;
    private TextView activeDateDisplay;
    private Calendar activeDate;

    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_leave_form);

        /*  capture our View elements for the start date function   */
        startDateDisplay = (EditText) findViewById(R.id.e_from_date);
        startPickDate = (Button) findViewById(R.id.Set_date1);

        /* get the current date */
        startDate = Calendar.getInstance();

        /* add a click listener to the button   */
        startPickDate.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v) 
            {
                showDateDialog(startDateDisplay, startDate);
            }
        });

        /* capture our View elements for the end date function */
        endDateDisplay = (EditText) findViewById(R.id.e_to_date);
        endPickDate = (Button) findViewById(R.id.Set_date2);

        /* get the current date */
        endDate = Calendar.getInstance();

        /* add a click listener to the button   */
        endPickDate.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                showDateDialog(endDateDisplay, endDate);
            }
        });

        /* display the current date (this method is below)  */
       // updateDisplay(startDateDisplay, startDate);
       // updateDisplay(endDateDisplay, endDate);
    }

    private void updateDisplay(TextView dateDisplay, Calendar date) {
        dateDisplay.setText(
                new StringBuilder()
                    // Month is 0 based so add 1
                    .append(date.get(Calendar.DAY_OF_MONTH) ).append("-")
                    .append(date.get(Calendar.MONTH)+1).append("-")
                    .append(date.get(Calendar.YEAR)).append(" "));

    }

    public void showDateDialog(TextView dateDisplay, Calendar date)
    {
       activeDateDisplay = dateDisplay;
        activeDate = date;
        showDialog(DATE_DIALOG_ID);
    }

    private OnDateSetListener dateSetListener = new OnDateSetListener() {
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) 
         {

             try {
                    Date selectedDate = new SimpleDateFormat("yyyy/MM/dd").parse(year+"/"+monthOfYear+"/"+dayOfMonth);
                    Date currDate = new Date();
                    if(selectedDate.compareTo(currDate ) >=0 )
                        {
                          activeDate.set(Calendar.YEAR, year);
                          activeDate.set(Calendar.MONTH, monthOfYear);
                          activeDate.set(Calendar.DAY_OF_MONTH, dayOfMonth);
                          updateDisplay(activeDateDisplay, activeDate);
                          unregisterDateDisplay();

                        }
                    else
                        {
                         //show message
                        }

              }
              catch(Exception e)
              {
                  e.getMessage();

               }
                   }
    };

    private void unregisterDateDisplay() {
        activeDateDisplay = null;
        activeDate = null;
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
            case DATE_DIALOG_ID:
                return new DatePickerDialog(this, dateSetListener, activeDate.get(Calendar.YEAR), activeDate.get(Calendar.MONTH), activeDate.get(Calendar.DAY_OF_MONTH));
        }
        return null;
    }

    @Override
    protected void onPrepareDialog(int id, Dialog dialog) {
        super.onPrepareDialog(id, dialog);
        switch (id) {
            case DATE_DIALOG_ID:
                ((DatePickerDialog) dialog).updateDate(activeDate.get(Calendar.YEAR), activeDate.get(Calendar.MONTH), activeDate.get(Calendar.DAY_OF_MONTH));
                break;
        }
    }

    public void leave(View view)
    {
        Intent intent1=new Intent(this,Rough.class);
        setContentView(R.layout.activity_rough);
        startActivity(intent1);

    }

} 
```

# android - OpenCV 未定义对 cv::SURF::SURF() eclipse 的引用

> ID：15500783
> 
> 赞同：2
> 
> 时间：2013-03-19T13:25:53.923
> 
> 标签：android, c++, opencv, surf, image-stitching

我正在尝试像全景视图一样在 android 中拼接图像。我正在尝试使用 surf 描述符来拼接图像。我正在使用 2.4.0 版本的 openCv，因为更高版本不包含用于 surf 描述符的非自由文件夹。我还包括

```
 #include "opencv2/nonfree/features2d.hpp"
 #include "opencv2/nonfree/nonfree.hpp" 
```

在标题中，并 在包含所有**.a文件的 GNU 路径中给出了路径****..\jni\include**和**..\native\libs\armeabi-v7a** 。 下面是我从 OpenCV 示例中获取的代码

 **```
 #include <stdio.h>
 #include <iostream>
 #include "opencv2/core/core.hpp"
 #include "opencv2/features2d/features2d.hpp"
 #include "opencv2/highgui/highgui.hpp"
 #include "opencv2/calib3d/calib3d.hpp"
 #include "opencv2/nonfree/features2d.hpp"
 #include "opencv2/nonfree/nonfree.hpp" 

 using namespace std;
 using namespace cv;

void readme();

 int main( int argc, char** argv )
{
 if( argc != 3 )
 { 
  readme(); return -1; 
 }

 Mat img_object = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
 Mat img_scene = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );

 if( !img_object.data || !img_scene.data )
 { std::cout<< " --(!) Error reading images " << std::endl; return -1; }

 //-- Step 1: Detect the keypoints using SURF Detector
 int minHessian = 400;

 SurfFeatureDetector detector(400); //error:undefined reference to cv::SURF::SURF(double, int, int, bool, bool)

 std::vector<KeyPoint> keypoints_object, keypoints_scene;

 detector.detect( img_object, keypoints_object );
 detector.detect( img_scene, keypoints_scene );

//-- Step 2: Calculate descriptors (feature vectors)
SurfDescriptorExtractor extractor; //error:undefined reference to cv::SURF::SURF()

Mat descriptors_object, descriptors_scene;

extractor.compute( img_object, keypoints_object, descriptors_object );
extractor.compute( img_scene, keypoints_scene, descriptors_scene );

//-- Step 3: Matching descriptor vectors using FLANN matcher
FlannBasedMatcher matcher;
std::vector< DMatch > matches;
matcher.match( descriptors_object, descriptors_scene, matches );

double max_dist = 0; double min_dist = 100;

//-- Quick calculation of max and min distances between keypoints

for( int i = 0; i < descriptors_object.rows; i++ )
{ double dist = matches[i].distance;
 if( dist < min_dist ) min_dist = dist;
  if( dist > max_dist ) max_dist = dist;}

printf("-- Max dist : %f \n", max_dist );
printf("-- Min dist : %f \n", min_dist );

 //-- Draw only "good" matches (i.e. whose distance is less than 3*min_dist )
 std::vector< DMatch > good_matches;

 for( int i = 0; i < descriptors_object.rows; i++ )
 { if( matches[i].distance < 3*min_dist )
  { good_matches.push_back( matches[i]); }
  }

 Mat img_matches;
 drawMatches( img_object, keypoints_object, img_scene, keypoints_scene,
           good_matches, img_matches, Scalar::all(-1), Scalar::all(-1),
           vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

  //-- Localize the object from img_1 in img_2
  std::vector<Point2f> obj;
  std::vector<Point2f> scene;

  for( size_t i = 0; i < good_matches.size(); i++ )
  {
  //-- Get the keypoints from the good matches
   obj.push_back( keypoints_object[ good_matches[i].queryIdx ].pt );
   scene.push_back( keypoints_scene[ good_matches[i].trainIdx ].pt );
  }

 Mat H = findHomography( obj, scene, CV_RANSAC );

 //-- Get the corners from the image_1 ( the object to be "detected" )
  std::vector<Point2f> obj_corners(4);
  obj_corners[0] = cvPoint(0,0); obj_corners[1] = cvPoint( img_object.cols, 0 );
  obj_corners[2] = cvPoint( img_object.cols, img_object.rows ); obj_corners[3] = cvPoint( 0, img_object.rows );
  std::vector<Point2f> scene_corners(4);

  perspectiveTransform( obj_corners, scene_corners, H);

 //-- Draw lines between the corners (the mapped object in the scene - image_2 )
 Point2f offset( (float)img_object.cols, 0);
 line( img_matches, scene_corners[0] + offset, scene_corners[1] + offset, Scalar(0, 255, 0), 4 );
 line( img_matches, scene_corners[1] + offset, scene_corners[2] + offset, Scalar( 0, 255, 0), 4 );
 line( img_matches, scene_corners[2] + offset, scene_corners[3] + offset, Scalar( 0, 255, 0), 4 );
 line( img_matches, scene_corners[3] + offset, scene_corners[0] + offset, Scalar( 0, 255, 0), 4 );

 //-- Show detected matches
 imshow( "Good Matches & Object detection", img_matches );

 waitKey(0);

 return 0;}

 /**
 * @function readme
 */
void readme()
{ std::cout << " Usage: ./SURF_Homography <img1> <img2>" << std::endl; } 
```

我收到了 SurfFeatureDetector 和 SurfDescriptorExtractor 声明的错误。我在评论中写了错误。任何人对此有任何想法，然后请提出建议。我真的坚持这个问题。:(提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T14:13:00.333

我知道我迟到了，但如果有人有同样的问题，这对我有用。在 Project Explorer 中选择您的项目。然后转到项目/属性。单击“C/C++ Build”选项左侧的箭头以显示其子列表。现在单击“设置”选项。它将显示在您的右侧“设置”面板。在此面板中，单击“工具设置”选项卡。在“设置”面板的左侧，您将看到另一个选项列表。单击“GCC C++ 链接器”箭头以显示/隐藏其子列表。在此子列表中单击“库”，面板将显示您的链接库（库（-l））和您的库搜索路径（库搜索路径（-L））。单击 (Libraries(-l)) 右上角带有加号的表示文档的按钮并写入 opencv_nonfree 。单击“确定”按钮，然后在“设置”面板中再次单击“确定”。祝你好运！**

# r - 无法从库或 .zip 安装 ggplot2

> ID：15500793
> 
> 赞同：1
> 
> 时间：2013-03-19T13:26:12.420
> 
> 标签：r, ggplot2

我看过很多关于安装 ggplot2 的主题，但没有遇到我的问题。

我正在使用 R Studio 版本 0.97.332。我已经安装了 sm 和extremevalues 没有任何问题，但是我无法安装ggp​​lot2。

我尝试了以下两种方法，但它们都不起作用。

```
install.packages("C:\\Temp\\ggplot2_0.9.3.1.zip", repos=NULL,                   
lib.loc="...\Documents\\R\\win-library\\2.15")
Installing package(s) into ‘...\Documents/R/win-  
library/2.15’ (as ‘lib’ is unspecified)
inferring 'repos = NULL' from the file name
package ‘ggplot2’ successfully unpacked and MD5 sums checked
Warning in install.packages :
  unable to move temporary installation         
‘\\..\Documents\R\win-
library\2.15\file15c06ecb4488\ggplot2’ to         
‘\\...\Documents\R\win-library\2.15\ggplot2’ 
```

我已经手动删除了ggplot2的任何损坏的（？）文件夹，但这也不起作用手动移动文件夹也不起作用。

```
install.packages("ggplot2")
Installing package(s) into ‘\\.../Documents/R/win-        
library/2.15’
(as ‘lib’ is unspecified)
trying URL 'http://cran.rstudio.com/bin/windows/contrib/2.15/ggplot2_0.9.3.1.zip'
Content type 'application/zip' length 2665534 bytes (2.5 Mb)
opened URL
downloaded 2.5 Mb

    package ‘ggplot2’ successfully unpacked and MD5 sums checked
    Warning in install.packages :
      unable to move temporary installation         
    ‘\\...\Documents\R\win-
    library\2.15\file15c0758038ea\ggplot2’ to 
    ‘\\...\Documents\R\win-library\2.15\ggplot2’

    The downloaded binary packages are in
C:\Users\...\AppData\Local\Temp\RtmpmocnrL\downloaded_packages 
```

我尝试了相同的方法来安装 corrplot，但也没有用。

任何帮助将不胜感激，我现在​​已经尝试了很多次......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:42:18.923

我现在没有使用 Windows，但似乎可能是权限问题。您是否尝试过以管理员身份启动 R 并运行 install.packages("ggplot2")？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T14:42:44.050

正如 daj 所指出的，这可能是一个权限问题。我发现可以通过手动创建目标文件夹来规避这个问题。在这种情况下，创建一个名为的文件夹`ggplot2`：

```
\\...\Documents\R\win-library\2.15\ 
```

然后再次尝试在 R 中安装包。

# php - DOMPDF PNG 输出 - 多个 PNG 仅显示一个颜色不正确的 PNG

> ID：15500795
> 
> 赞同：1
> 
> 时间：2013-03-19T13:26:15.197
> 
> 标签：php, iis, dompdf

DOMPDF 对 PNG 文件的渲染存在一些严重的令人费解的问题。

根据他们的 Github 页面，在 Windows IIS 服务器上使用最新版本的 DOMPDF。

* * *

我有两个问题：

1.  无论图像的颜色如何，PNG 图像都以黑色背景和白色前景显示
2.  如果我使用多个 PNG 图像，页面上的所有图像都显示为第一个图像，被压缩成不同的大小比例

这是一个屏幕截图来解释：

![横幅](../Images/833310e4bc5b333b92fe11425b6198d9.png)

现在，如果我用 JPEG 文件替换其中一张图像，它可以工作：

![JPEG](../Images/26af72842a0cf517a059b57c59589aa2.png)

如果我更改要渲染的第一个 PNG 图像，它会显示如下：

![巴里](../Images/d18f9137fd25c1ea9cb8f3e6eed2d54c.png)

* * *

我使用的 HTML 如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
        <title>test</title>

        <style type="text/css">

            *{
                color:'.$font.';
                font-family:Helvetica, Arial, Serif;
            }

            .i{font-style: italic;}
            .b{font-weight:bold;}

            h1, h2, h3, h4, h5, h6{display:inline;}
            h1{font-size:350%;}
            h3{font-size:275%;}
            h6{font-size:150%;}
            span{font-size:125%;}
            div{background-color:'.$bg.';}

        </style>
    </head>

    <body>

        <div align="center" style="margin-left:10px;margin-right:10px;padding:0px;">
            <br />
            <br />
            <br />
            <br />
            <img src="img/banner/'.$type.'/top.png" />
            <br />
            <br />
            <h1 class="b" style="color:'.$font.';">'.$type.' Certificate</h1>
            <br />
            <br />
            <h3 class="i" style="color:'.$font.';">'.$name.'</h3>
            <br />
            <br />
            <h6 style="color:'.$font.';">This certificate has been awarded to you for earning over '.$points.' points on the LEAP System.</h6>
            <br />
            <br />
            <img src="img/barry.png" />
            <br /><br />
            <img src="img/badge.png" />
            <br />
            <h6 class="i">' . 'Date Awarded: '.date("d-m-Y").'</h6>
            <br />
            <br />
            <span>Awarded by: '.$school.'</span>
            <br />
            <br />
            <img src="img/banner/'.$type.'/bottom.png" />
            <br />
            <br />
            <br />
            <br />
        </div>

    </body>
</html> 
```

我用来生成 PDF 的 PHP 代码如下：

```
public function save($data, $size, $orientation, $name, $type){
    $dompdf = new DOMPDF();
    $dompdf->set_paper($size, $orientation);
    $dompdf->load_html($data);
    $dompdf->render();
    $data = $dompdf->output();

    $filename = 'data/'.$type.'/'.$name.' - '.date("d-m-Y").'.pdf';
    return file_put_contents($filename, $data);
} 
```

* * *

生成证书后，我得到以下登录信息`dompdf\lib\fonts\log.htm`：

```
52 7936.00 KB 1073.05 ms OFF
ï»¿[__construct img/banner/Bronze/top.png][__construct img/barry.png][__construct img/badge.png][__construct img/banner/Bronze/bottom.png]get_min_max_width() auto auto;758.85850393701pt auto;773.85850393701pt auto;1010 121|757.5 90.75;get_min_max_width() auto auto;758.85850393701pt auto;773.85850393701pt auto;115 100|86.25 75;get_min_max_width() auto auto;758.85850393701pt auto;773.85850393701pt auto;187 60|140.25 45;[image:C:\Inetpub\wwwroot\frog\certificate_generator/img/banner/Bronze/top.png|1010|121|3]!!!png!!![addImagePng .png]
Warning: unlink(.png) [function.unlink]: No such file or directory in C:\Inetpub\wwwroot\frog\certificate_generator\dompdf\lib\class.pdf.php on line 4046
[image:C:\Inetpub\wwwroot\frog\certificate_generator/img/barry.png|115|100|3]!!!png!!!
Warning: unlink(.png) [function.unlink]: No such file or directory in C:\Inetpub\wwwroot\frog\certificate_generator\dompdf\lib\class.pdf.php on line 4046
[image:C:\Inetpub\wwwroot\frog\certificate_generator/img/badge.png|187|60|3]!!!png!!!
Warning: unlink(.png) [function.unlink]: No such file or directory in C:\Inetpub\wwwroot\frog\certificate_generator\dompdf\lib\class.pdf.php on line 4046
get_min_max_width() auto auto;758.85850393701pt auto;773.85850393701pt auto;1010 121|757.5 90.75;[image:C:\Inetpub\wwwroot\frog\certificate_generator/img/banner/Bronze/bottom.png|1010|121|3]!!!png!!!
Warning: unlink(.png) [function.unlink]: No such file or directory in C:\Inetpub\wwwroot\frog\certificate_generator\dompdf\lib\class.pdf.php on line 4046 
```

有谁知道是什么导致了这些看似奇怪的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:30:34.947

好的，原来是因为我们的服务器上没有安装 ImageMagick。DomPDF 应该在尝试生成包含 PNG 文件的 PDF 之前检查它的存在吗？

仅作记录，以下是我在 IIS 上安装 ImageMagick 所需的步骤：

*   从 PHP 卸载现有的 imagick 安装和 DLL 扩展
*   `ImageMagick-6.6.2-10-Q16-windows-dll`从[这里](http://image_magick.veidrodis.com/image_magick/binaries/)安装imagick 。
*   例如，将最新版本的线程安全 (ts) 或非线程安全 (nts) dll 添加到来自此[链接](http://valokuva.org/builds/)`php_imagick_nts.dll`的 PHP 扩展目录。
*   添加`extension=php_imagick_nts.dll`到 php.ini
*   运行以下 cmd 命令将 IIS 权限添加到临时目录：`cacls c:\windows\temp /E /C /G iusr_SERVERNAME:R`

值得注意的是，最后一条语句在工作安装中可能被认为是不安全的。您可以在配置设置中更改 imagick 临时目录，但我个人无法使其正常工作。

# maven - 如何强制在 Maven POM 中声明所有编译依赖项？

> ID：15500798
> 
> 赞同：1
> 
> 时间：2013-03-19T13:26:22.500
> 
> 标签：maven

有时我们的开发人员使用的类没有直接定义为`compile`POM 中的依赖项。它们宁愿依赖于一个工件（又是 scope `compile`），而该工件又具有`compile`对包含所用类的工件的传递依赖。

像这样：

*   A 使用 B 和 C 类
*   A 依赖于 B，但不依赖于 C
*   B 取决于 C

有什么方法可以在 Maven 构建期间检查这一点（依赖报告等除外），甚至强制所有编译依赖项必须直接在项目的 POM 中声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:07:56.067

如果您想在构建期间强制正确声明依赖项，只需使用[依赖项：仅分析](http://maven.apache.org/plugins/maven-dependency-plugin/analyze-only-mojo.html)mojo。

你可以在这里看到一个很好的例子：http: [//www.stuartgunter.org/minimally-complete-dependency-declaration-maven/](http://www.stuartgunter.org/minimally-complete-dependency-declaration-maven/)

# powershell - 使用 Batch 运行远程 PowerShell V1.0 命令

> ID：15500801
> 
> 赞同：0
> 
> 时间：2013-03-19T13:26:31.393
> 
> 标签：powershell, scripting, batch-file, hyper-v

我正在尝试从我的 Hyper-V 主机收集一些信息。我有一大堆，想自动化这个过程。我需要获取在每个主机上运行的虚拟机。我想从批处理脚本中做到这一点。当我在 PowerShell V1.0 窗口（在 Hyper-V 主机上）中运行此命令时，它可以工作并为我提供必要的信息：

```
get-vmmemory | select VMelementName,reservation | out-file c:\Output.txt 
```

这就是我从批处理脚本运行它的方式：

```
\\<RemoteMachine>\c$\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -command get-vmmemory >>aa.txt 
```

这是我得到的输出

```
The term 'get-vmmemory' is not recognized as the name of a cmdlet, function,
script file, or operable program. Check the spelling of the name, or if a path
was included, verify that the path is correct and try again.
At line:1 char:16
+ & {get-vmmemory <<<< }
    + CategoryInfo          : ObjectNotFound: (get-vmmemory:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException 
```

有没有人知道为什么我一直得到这个输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:43:04.830

`Get-VMMemory`不是标准/内置 cmdlet - 它是 Hyper-V 模块的一部分。所以你真的有两个问题：

1.  如果您真的在运行 PowerShell v1.0（EXE 位于 1.0 目录中，但所有版本都在同一个位置），该模块可能甚至无法工作
2.  您没有加载模块，或者在运行批处理文件的地方没有可用的模块。

对于 #1，以这种方式检查版本： \c$\Windows\System32\WindowsPowerShell\v1.0\powershell.exe "write-host $psversiontable.psversion"

旁白：您为什么使用 UNC 路径指向本地计算机的 C 盘？

对于＃2，您需要将代码包装在 PS1 文件中并告诉 powershell.exe 执行该文件，以便您可以导入模块。PowerShell 3.0 会自动加载模块，但我不知道当你像这样执行 cmdlet 时它是否会这样做。

```
import-module Hyper-V
get-vmmemory | select VMelementName,reservation | out-file c:\Output.txt 
```

`powershell.exe -f myscript.ps1`

编辑：根据您的评论，这些都不起作用。您需要使用 PSRemoting 从您的系统在远程系统上执行命令。

```
invoke-command -computername hypervhost -scriptblock {get-vmmemory | select VMelementName,reservation 
```

以上未经测试。如果这不起作用，您将需要在您的环境中设置 PSRemoting。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:19:52.800

通过使用 UNC 路径，您将从本地计算机上的远程计算机运行 PowerShell 可执行文件。但是，这不会为您带来任何好处，因为它与运行安装在本地计算机上的 PowerShell 可执行文件没有什么不同。您将无法像那样加载安装在远程机器上的模块。

您需要做的是在本地计算机上安装[提供 Get-VMMemory 的库](http://pshyperv.codeplex.com/releases)[，](http://www.virtualizationadmin.com/articles-tutorials/microsoft-hyper-v-articles/management/managing-hyper-v-from-command-line-part1.html)导入模块（如此处所述），然后对远程主机使用 cmdlet：

```
Get-VMMemory -VM "virtual_host" -Server "hyper-v_host" 
```

或者，您可以移至[System Center Virtual Machine Manager](http://technet.microsoft.com/en-us/library/gg610610.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:32:47.477

get-vmmemory 不是标准的 cmdlet。如果该 cmdlet 在您运行 powershell 的计算机上不可用，您将收到此错误。

您可能需要运行 import-module 以确保将 vmware Ps 模块加载到会话中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:38:32.543

当我在运行 hyper v（不是 VM）的机器上的 PowerShell V1.0 控制台上键入 get-vmmemory 时，该命令有效。

# .htaccess - 将带有查询字符串的 url 重定向到根文档

> ID：15500802
> 
> 赞同：0
> 
> 时间：2013-03-19T13:26:32.373
> 
> 标签：.htaccess, redirect

我在我的网站管理员工具中找到了类似的不同网址

```
ndd.com/cat/subcat/doc?format=feed&type=rss&start=2
ndd.com/cat/subcat/doc?option=view&layout=blog&Itemid=154 
```

我不知道它们来自哪里，我尝试了许多 htaccess 规则。

例如这个

```
RewriteCond %{QUERY_STRING} ^format=([a-zA-Z]+)$
RewriteRule (.*) http://ndd.com/$1? [R=301,L] 
```

几乎可以，它重定向到主文档，它摆脱了`format=feed` 除了：它`index.php`在 url 中包含一个

所以而不是拥有

`ndd.com/cat/subact/doc?format=feed`

我有

`ndd.com/**index.php**/cat/subact/doc`

我发现了类似的问题，但没有答案。我也做了功课，并在网上四处寻找，最终得到了这个几乎很好的重写规则。

你能帮我并告诉我如何摆脱`index.php`url 吗？还有一种方法可以对所有其余的查询字符串做同样的事情吗？（`start=`，`type=`）等？

我试过 `RewriteCond %{QUERY_STRING} ^(format=([a-zA-Z]+)|type=([a-zA-Z]+))$` 了，但也没有用。谢谢 ：）

编辑这是我的整个 htaccess

```
#Block bad bots
RewriteEngine On 
RewriteCond %{HTTP_USER_AGENT} ^BlackWidow [OR]
RewriteCond %{HTTP_USER_AGENT} ^Bot\ mailto:craftbot@yahoo.com [OR]
RewriteCond %{HTTP_USER_AGENT} ^ChinaClaw [OR]
RewriteCond %{HTTP_USER_AGENT} ^Custo [OR]
RewriteCond %{HTTP_USER_AGENT} ^DISCo [OR]
RewriteCond %{HTTP_USER_AGENT} ^Download\ Demon [OR]
RewriteCond %{HTTP_USER_AGENT} ^eCatch [OR]
RewriteCond %{HTTP_USER_AGENT} ^EirGrabber [OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailSiphon [OR]
RewriteCond %{HTTP_USER_AGENT} ^EmailWolf [OR]
RewriteCond %{HTTP_USER_AGENT} ^Express\ WebPictures [OR]
RewriteCond %{HTTP_USER_AGENT} ^ExtractorPro [OR]
RewriteCond %{HTTP_USER_AGENT} ^EyeNetIE [OR]
RewriteCond %{HTTP_USER_AGENT} ^FlashGet [OR]
RewriteCond %{HTTP_USER_AGENT} ^GetRight [OR]
RewriteCond %{HTTP_USER_AGENT} ^GetWeb! [OR]
RewriteCond %{HTTP_USER_AGENT} ^Go!Zilla [OR]
RewriteCond %{HTTP_USER_AGENT} ^Go-Ahead-Got-It [OR]
RewriteCond %{HTTP_USER_AGENT} ^GrabNet [OR]
RewriteCond %{HTTP_USER_AGENT} ^Grafula [OR]
RewriteCond %{HTTP_USER_AGENT} ^HMView [OR]
RewriteCond %{HTTP_USER_AGENT} HTTrack [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Stripper [OR]
RewriteCond %{HTTP_USER_AGENT} ^Image\ Sucker [OR]
RewriteCond %{HTTP_USER_AGENT} Indy\ Library [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^InterGET [OR]
RewriteCond %{HTTP_USER_AGENT} ^Internet\ Ninja [OR]
RewriteCond %{HTTP_USER_AGENT} ^JetCar [OR]
RewriteCond %{HTTP_USER_AGENT} ^JOC\ Web\ Spider [OR]
RewriteCond %{HTTP_USER_AGENT} ^larbin [OR]
RewriteCond %{HTTP_USER_AGENT} ^LeechFTP [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mass\ Downloader [OR]
RewriteCond %{HTTP_USER_AGENT} ^MIDown\ tool [OR]
RewriteCond %{HTTP_USER_AGENT} ^Mister\ PiX [OR]
RewriteCond %{HTTP_USER_AGENT} ^Navroad [OR]
RewriteCond %{HTTP_USER_AGENT} ^NearSite [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetAnts [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetSpider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Net\ Vampire [OR]
RewriteCond %{HTTP_USER_AGENT} ^NetZIP [OR]
RewriteCond %{HTTP_USER_AGENT} ^Octopus [OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Explorer [OR]
RewriteCond %{HTTP_USER_AGENT} ^Offline\ Navigator [OR]
RewriteCond %{HTTP_USER_AGENT} ^PageGrabber [OR]
RewriteCond %{HTTP_USER_AGENT} ^Papa\ Foto [OR]
RewriteCond %{HTTP_USER_AGENT} ^pavuk [OR]
RewriteCond %{HTTP_USER_AGENT} ^pcBrowser [OR]
RewriteCond %{HTTP_USER_AGENT} ^RealDownload [OR]
RewriteCond %{HTTP_USER_AGENT} ^ReGet [OR]
RewriteCond %{HTTP_USER_AGENT} ^SiteSnagger [OR]
RewriteCond %{HTTP_USER_AGENT} ^SmartDownload [OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperBot [OR]
RewriteCond %{HTTP_USER_AGENT} ^SuperHTTP [OR]
RewriteCond %{HTTP_USER_AGENT} ^Surfbot [OR]
RewriteCond %{HTTP_USER_AGENT} ^tAkeOut [OR]
RewriteCond %{HTTP_USER_AGENT} ^Teleport\ Pro [OR]
RewriteCond %{HTTP_USER_AGENT} ^VoidEYE [OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Image\ Collector [OR]
RewriteCond %{HTTP_USER_AGENT} ^Web\ Sucker [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebAuto [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebCopier [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebFetch [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebGo\ IS [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebLeacher [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebReaper [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebSauger [OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ eXtractor [OR]
RewriteCond %{HTTP_USER_AGENT} ^Website\ Quester [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebStripper [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebWhacker [OR]
RewriteCond %{HTTP_USER_AGENT} ^WebZIP [OR]
RewriteCond %{HTTP_USER_AGENT} ^Wget [OR]
RewriteCond %{HTTP_USER_AGENT} ^Widow [OR]
RewriteCond %{HTTP_USER_AGENT} ^WWWOFFLE [OR]
RewriteCond %{HTTP_USER_AGENT} ^Xaldon\ WebSpider [OR]
RewriteCond %{HTTP_USER_AGENT} ^Zeus
RewriteRule ^.* - [F,L]

#Prevent viewing of .htaccess file
<Files .htaccess>
order allow,deny
deny from all
</Files>

# BEGIN Expire headers
<IfModule mod_expires.c>
 ExpiresActive On
 ExpiresDefault "access plus 7200 seconds"
 ExpiresByType image/jpg "access plus 2592000 seconds"
 ExpiresByType image/jpeg "access plus 2592000 seconds"
 ExpiresByType image/png "access plus 2592000 seconds"
 ExpiresByType image/gif "access plus 2592000 seconds"
 AddType image/x-icon .ico
 ExpiresByType image/ico "access plus 2592000 seconds"
 ExpiresByType image/icon "access plus 2592000 seconds"
 ExpiresByType image/x-icon "access plus 2592000 seconds"
 ExpiresByType text/css "access plus 2592000 seconds"
 ExpiresByType text/javascript "access plus 2592000 seconds"
 ExpiresByType text/html "access plus 7200 seconds"
 ExpiresByType application/xhtml+xml "access plus 7200 seconds"
 ExpiresByType application/javascript A259200
 ExpiresByType application/x-javascript "access plus 2592000 seconds"
 ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
</IfModule>
# END Expire headers

## Can be commented out if causes errors, see notes above. 
## Options +FollowSymLinks 

# mod_rewrite in use 

RewriteEngine On 

RewriteBase / 

#redirections 500
RewriteCond %{QUERY_STRING} ^format=([a-zA-Z]+)$
RewriteRule (.*) http://android-pour-les-nuls.fr/$1? [R=301,L]
RewriteCond %{REQUEST_URI} ^(/component/option,com) [NC,OR] ##optional - see notes## 
RewriteCond %{REQUEST_URI} (/|\.htm|\.php|\.html|/[^.]*)$ [NC] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule (.*) index.php 

########### Custom Code
#add trailing slash
RewriteRule ^(([a-z0-9\-]+/)*[a-z0-9\-]+)$ $1/ [NC,R=301,L]

########## Begin - Rewrite rules to block out some common exploits 
## If you experience problems on your site block out the operations listed below 
## This attempts to block the most common type of exploit `attempts` to Joomla! 
# 
# Block out any script trying to set a mosConfig value through the URL 
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR] 
# Block out any script trying to base64_encode crap to send via URL 
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR] 
# Block out any script that includes a <script> tag in URL 
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR] 
# Block out any script trying to set a PHP GLOBALS variable via URL 
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR] 
# Block out any script trying to modify a _REQUEST variable via URL 
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) 
# Send all blocked request to homepage with 403 Forbidden error! 
RewriteRule ^(.*)$ index.php [F,L] 
# 
########## End - Rewrite rules to block out some common exploits 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:30:13.080

您需要检查不同规则的顺序。

我想您希望在重写 /index.php 之前应用此规则？

我们是谁你的整个 .htaccess

# deployment - 在单个实例中部署 Web 角色和辅助角色

> ID：15500803
> 
> 赞同：1
> 
> 时间：2013-03-19T13:26:37.250
> 
> 标签：deployment, azure, azure-web-roles, azure-worker-roles

我正在开发一个可扩展的应用程序，我使用网络角色、队列、工作者角色设计......但现在（在 alpha 测试阶段）我有点担心削减成本，因为我正在遭受常见的“没钱”的问题...

因此，由于阶段的测试性质，我想知道是否有办法让角色表现为网络角色和工作者角色？所以我可以在一个实例上部署我的两个项目（“WebFrontEnd”项目和“QueueProcessor”项目）......

Edit1：我确实知道如何在同一个实例上部署各种 Web 项目......或者一个 Web 项目和一个 WCF 项目......但我无法管理工作角色项目......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:46:25.500

有很多关于同一主题的主题基本上会告诉你不要这样做。例如，请参阅此线程：[我们可以在 Azure 云服务的单个实例中拥有一个辅助角色和一个 Web 角色](https://stackoverflow.com/questions/15212154/can-we-have-a-worker-role-and-a-web-role-in-a-single-instance-of-azure-cloud-ser)。但是，请查看有关结合网络和工作角色的博客文章：[http ://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2010/12/how-to-combine-worker-and-网络角色 in.html](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2010/12/how-to-combine-worker-and-web-role-in.html)。

另一个想法可能是将它们分开，但是将它们部署在 Extra Small 实例而不是更大的实例中（就成本而言，1 Small Instance = 6 Extra Small Instance）。如果您不关心 SLA，您可能只部署您的 Web 和辅助角色的单个实例（在单独的虚拟机中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:47:01.897

您不能在一个实例上部署两个不同的“端点”项目。但是，您的实例可以容纳两者的代码库，并用作容纳这两个可执行文件的单一机器。

只需从您的 WebFrontEnd 项目中引用 QueueProcessor 项目并从您的 WebRole.cs 启动 QUEeueProcessor

# python - 子语言的优先级

> ID：15500808
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:26:53.300
> 
> 标签：python, ply

我正在为一种由两种子语言组成的语言在 PLY 中编写解析器：“普通”表达式语言和类型注释语言。问题是它们共享一些标记，并且两种语言之间的优先级不同。

例如，在表达式语言中`a | b, c`应该等价于`(a | b), c`（并且与在 Python 中的含义相同），而在类型语言中应该等价于`a | (b, c)`（ type`a`或 type `b, c`，即具有 type`b`和 type成员的元组`c`）。

真正的问题比这要复杂一些，但基本上还是一样的。

在 PLY 中是否可以临时更改优先级？如果没有，我可以应用另一种解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:32:48.593

事实证明，您可以`%prec fakeToken`在生产的末尾使用不同的优先级，并`facetoken`在优先级列表中的正确位置插入。

# symfony - symfony/路由和请求上下文

> ID：15500816
> 
> 赞同：2
> 
> 时间：2013-03-19T13:27:14.807
> 
> 标签：symfony, routing

阅读 symfony/路由[自述文件](https://github.com/symfony/Routing)：

```
// ...

$context = new RequestContext();

// this is optional and can be done without a Request instance
$context->fromRequest(Request::createFromGlobals());

$matcher = new UrlMatcher($routes, $context); 
```

它是可选的是什么意思？没有它，Matcher 功能会受到某种限制吗？匹配器如何使用请求对象？

**编辑**

我发现 RouteListener 负责使用当前请求信息（主机、方法等）更新上下文。因此，当通过事件调度程序完成路由匹配时，不需要此可选步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:43:46.427

创建新的[RequestContext](http://api.symfony.com/2.1/Symfony/Component/Routing/RequestContext.html)时，构造函数采用以下参数，如果您不这样做，则使用以下默认值。

```
$baseUrl   = ''
$method    = 'GET'
$host      = 'localhost'
$scheme    = 'http'
$httpPort  = 80
$httpsPort = 443
$path      = '/' 
```

但是，RequestContext 对象可以从 HttpFoundation\Request 对象中检索这些值（如果已给出）。我相信这是 2.1 的新功能，因为 2.0 API 文档中没有提到它

您可以从自定义请求对象生成自己的上下文，而不是使用从 PHP Globals 创建的对象

```
use Symfony\Component\Routing\Matcher\UrlMatcher;
use Symfony\Component\Routing\RequestContext;
use Symfony\Component\HttpFoundation\Request;

$context = new RequestContext();

$context->fromRequest(Request::create('?foo=1&bar=2'));
$matcher = new UrlMatcher($routes, $context); 
```

或直接应用 PHP Global 而无需创建新的 Request 对象

```
$context = new RequestContext($_SERVER['REQUEST_URI']); 
```

# java - ArrayIndexOutOfBoundsException 在 HSQLDB 中动态创建数据库

> ID：15500818
> 
> 赞同：1
> 
> 时间：2013-03-19T13:27:23.003
> 
> 标签：java, database, hsqldb

我有 HSQLDB 作为服务器运行。我将 remote_open 属性设置为 true，以便我可以动态创建新数据库。

当我尝试创建一个新数据库时，我得到一个 ArrayIndexOutOfBoundsException -1。我查看了文件夹结构，似乎数据库文件都在那里；它只是没有被添加到服务器上的数据库中。

```
Connection c = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/xdb;filepath=file:C:/files/mydatabase", "SA", ""); 
```

抛出异常：

```
java.sql.SQLException: java.lang.ArrayIndexOutOfBoundsException: -1 java.lang.ArrayIndexOutOfBoundsException: -1
   at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
   at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
   at org.hsqldb.jdbc.JDBCConnection.<init>(Unknown Source)
   at org.hsqldb.jdbc.JDBCDriver.getConnection(Unknown Source)
   at org.hsqldb.jdbc.JDBCDriver.connect(Unknown Source)
   at java.sql.DriverManager.getConnection(Unknown Source)
   at java.sql.DriverManager.getConnection(Unknown Source) 
```

# css - 使用 Hover 属性 CSS 编辑多个事物

> ID：15500819
> 
> 赞同：1
> 
> 时间：2013-03-19T13:27:23.067
> 
> 标签：css

因此，当 div 悬停时，我尝试使用纯 CSS 编辑 div 中的元素。我现在拥有的如下。

```
<html>
<head>
<style>
div{
background-color:blue;
border-radius:5px;
width:50px;
height:60px;
transition:width 2s;
-moz-transition:width 2s;
-webkit-transition:width 2s;

}
p.op{
opacity:0.0;
transition:opacity 2s;
-moz-transition:opacity 2s;
-webkit-transition:opacity 2s;

}

div:hover{
width:120px;
}
</style>
</head>
<body>
<div>
<p class="op">Hello World</p>
</div>
</body>
</html> 
```

我想知道如何在 div 的悬停上编辑文本的不透明度，这样文本会随着 div 的扩展而从不可见变为可见。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:28:33.047

```
div:hover p.op
{
  opacity:1;
} 
```

***现场演示：http:** [//jsfiddle.net/ypzxk/1/](http://jsfiddle.net/ypzxk/1/)*

* * *

Demo 还包含对 CSS 的一些更改，以便示例的文本更清晰，并且当`div`宽度太短时文本不会换行：

```
div{
background-color:blue;
border-radius:5px;
width:50px;
height:60px;
transition:width 2s;
-moz-transition:width 2s;
-webkit-transition:width 2s;
overflow:hidden;
}
p.op{
opacity:0.0;
color:#fff; 
transition:opacity 2s;
-moz-transition:opacity 2s;
-webkit-transition:opacity 2s;
width:120px;
}

div:hover{
width:120px;
}

div:hover p.op
{
  opacity:1;
} 
```

# .net - 如何在 WPF 中实现嵌入阴影效果

> ID：15500820
> 
> 赞同：10
> 
> 时间：2013-03-19T13:27:23.583
> 
> 标签：.net, wpf, silverlight, xaml, styles

我在 HTML 中设计了一个界面，并希望将其转换为 WPF，但在插入阴影时遇到了麻烦。

```
box-shadow: inset 0 2px 7px 0 rgba(0, 0, 0, 0.5); 
```

我正在寻找的效果在这个[jsFiddle](http://jsfiddle.net/cKbtT/)中，我怎样才能将它准确地翻译成 WPF？

**更新**

我目前基于理查兹的回答如下，但它仍然没有显示阴影吗？

```
<Border Grid.Row="1" CornerRadius="3" Grid.Column="0"  Margin="13,0,12,0" BorderThickness="0"  BorderBrush="#d2d2d2" ClipToBounds="True" Background="#fff0f0f0" >
    <Border Background="Transparent" BorderBrush="Black"  CornerRadius="3" BorderThickness="0" Margin="0">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="2" BlurRadius="7" Color="Black" Direction="270" Opacity="0.5"/>
        </Border.Effect>
    </Border>
</Border> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-19T13:29:49.737

你可以尝试这样的事情，相应地调整厚度：

```
<Border Background="LightGray" BorderBrush="DarkGray" 
           BorderThickness="1" ClipToBounds="True">
  <Border Background="Transparent" BorderBrush="Black" 
              BorderThickness="0 2 7 0" Margin="-2">
    <Border.Effect>
      <DropShadowEffect ShadowDepth="0" BlurRadius="10"/>
    </Border.Effect>
  </Border>
</Border> 
```

# php - XMLException 格式不正确（令牌无效）

> ID：15500822
> 
> 赞同：0
> 
> 时间：2013-03-19T13:27:29.907
> 
> 标签：php, android, xml, eclipse

尝试解析下面的 XML 时出现此错误。我正在通过 Eclipse 中的 Android 执行此操作。

XMLException：SAXException：在第 1 行，第 0 列：格式不正确（无效标记）

```
<?php
header('Content-type: text/xml');
echo '<wardrobe>
<item id="1">
    <path>images/pink.jpg</path>
    <name>pink top</name>
    <description>size 12 pink top</description>
    <category>tops</category>
</item>
<item id="2">
    <path>images/bluepants.jpg</path>
    <name>blue trousers</name>
    <description>size 10 light blue trousers</description>
    <category>bottoms</category>
</item>
<item id="3">
    <path>images/skirt.jpg</path>
    <name>grey skirt</name>
    <description>sze 10 grey skirt</description>
    <category>bottoms</category>
</item>
<item id="4">
    <path>images/runners.jpg</path>
    <name>runners</name>
    <description>exercise runners</description>
    <category>shoes</category>
</item>
<item id="5">
    <path>images/heels.jpg</path>
    <name>black heels</name>
    <description>dance shoes</description>
    <category>shoes</category>
</item>
</wardrobe>';
?> 
```

我找不到这个无效令牌，我的 XML 看起来与 w3schools 示例相同： [http ://www.w3schools.com/xml/xml_server.asp](http://www.w3schools.com/xml/xml_server.asp)

任何人都可以发现这个令牌吗？

请帮助&谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:38:44.367

SAXparser 可能会抛出，因为您缺少文档声明。

w3schools 上的示例仅在这方面与您自己的代码不同。

```
<?php
header("Content-type: text/xml");
echo "<?xml version='1.0' encoding='ISO-8859-1'?>"; <-- This line.
echo "<note>";
echo "<from>Jani</from>";
echo "<to>Tove</to>";
echo "<message>Remember me this weekend</message>";
echo "</note>";
?> 
```

# android - Android 为平板电脑和手机开发

> ID：15500823
> 
> 赞同：1
> 
> 时间：2013-03-19T13:27:32.503
> 
> 标签：android

我正在为 Android 手机和平板电脑开发应用程序。现在两部手机的用户界面将有所不同。为两种设备创建两个不同的项目是否有意义，还是使用单个项目并使用不同的布局更有意义？

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:30:07.537

最好使用具有不同布局的单个项目，除非手机和平板电脑的 UI 如此不同以至于它们本质上是不同的应用程序。

请注意，您可能需要两种以上的布局，以支持不同尺寸的手机和平板电脑、不同的分辨率、不同的方向等。在一个项目中拥有所有这些比拥有很多项目要好得多。

另请注意，如果您使用两个项目，则必须在 Google Play 中分发两个不同的应用程序，客户可能会感到困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T13:37:21.180

在一个应用程序中有多种处理不同屏幕尺寸设备的方法

像

1.  由不同的处理`Drawable folder`检查[这个](https://stackoverflow.com/questions/5558534/do-i-need-14-different-layouts-to-support-all-android-devices)

2.  通过处理不同[的](https://stackoverflow.com/questions/7414178/multiple-screen-support-do-we-need-different-layouts-for-each-screen?lq=1)`Drawable Layout`检查

3.  通过编码获取设备的大小并根据它更改一些 UI。（这是一项艰巨的任务）

这取决于应用程序图形、应用程序大小等参数的数量

有时您必须同时使用不同的`Drawable Folder`和不同`Dravable Layout`的以获得更好的应用程序性能

根据您的用途使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:30:34.373

您不需要为两种设备制作不同的项目。您需要为不同的 - 2 分辨率设备制作不同的 - 2 布局。阅读以下文件：-

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

另请参阅以下链接：-

[Android 手机上最流行的屏幕尺寸/分辨率](https://stackoverflow.com/questions/6272384/most-popular-screen-sizes-resolutions-on-android-phones)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:31:26.823

应用程序开发人员可以通过多种方式支持各种设备。最好的参考[是](http://developer.android.com/guide/practices/screens_support.html). 阅读本文，您将了解您不必创建两个不同的项目。

# msp430 - 如何在 Mspgcc 中声明中断处理程序 (ISR)？

> ID：15500826
> 
> 赞同：10
> 
> 时间：2013-03-19T13:27:40.803
> 
> 标签：msp430, mspgcc

在 mspgcc 中声明中断处理程序的首选方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T13:27:40.803

**请注意，此信息适用于 MSPGCC v4.6.3，它早于 MSPGCC 的 Ti/Redhat/SOMNIUM 端口，现在随代码编写器工作室分发。**

感谢 Mspgcc-users 邮件列表的 Peter Bigot 提供此答案。

有两种可能：

**一个**。使用 Code composer studio 风格的语法（具有可移植到 CCS 的额外好处）：

```
#pragma vector=TIMER0_A0_VECTOR    
__interrupt void
ta0cc0_isr (void) 
```

（请注意，这是在 Mspgcc 版本 20120406 附近的某个地方引入的）。

**乙**。使用本机 gcc 语法：

```
static void
__attribute__((__interrupt__(TIMER0_A0_VECTOR)))
isr_cc0_TA0 (void) 
```

**C.** _ 正确命名函数，使其包含在向量表中（对 ASM 函数很有用）。

中断属性导致函数被命名`__isr_X`，其中 X 是中断从向量表开始的字偏移量（等于中断属性参数的值除以 2）。

这些`__isr_X`符号用于初始化 crt0ivtbl.o 中的向量表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-17T10:01:16.580

澄清一下，因为这是 Google 的早期结果。

```
__attribute__((__interrupt__(TIMER0_A0_VECTOR)))
void __isr_5(void)
{
        ...
} 
```

当前的 GCC 仍然（我相信这是 arvindpdmn 评论的内容）在使用上述语法时会引发错误。

```
internal compiler error: in msp430_attr, at config/msp430/msp430.c:1835
 {
 ^ 
```

[在 TI E2E 社区](https://e2e.ti.com/support/development_tools/compiler/f/343/t/389045)对此进行报告后提出了一个问题，但表示问题仍处于“计划”状态，甚至不清楚跟踪器属于谁。（您可以通过上面链接中的线程访问该问题。）

查看代码，显然引发了错误，因为唯一可能有参数的属性是`interrupt`属性。

事实上，如果省略前导和后下划线，编译就可以正常工作。

**这就是正确的语法！**

```
__attribute__((interrupt(TIMER0_A0_VECTOR)))
void name_does_not_matter(void)
{
        ...
} 
```

事实上，这个属性[记录在官方 GNU GCC 文档](https://gcc.gnu.org/onlinedocs/gcc/MSP430-Function-Attributes.html#MSP430-Function-Attributes)中。回想起来，首先不清楚下划线的来源。所以，基本上，这里唯一的问题是错误消息信息太少。

# jquery - 根据手机的显示方式更改文本大小

> ID：15500829
> 
> 赞同：1
> 
> 时间：2013-03-19T13:27:46.777
> 
> 标签：jquery, css, jquery-mobile

我正在 JQuery Mobile 中开发一个小应用程序。如果手机处于描绘模式，我希望标题的文本尺寸更小，如果是横向，则更大。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:31:49.677

最好的方法是使用 CSS 媒体选择器：

```
@media screen and (orientation:portrait) {
    /* Portrait styles */
}

@media screen and (orientation:landscape) {
    /* Landscape styles */
} 
```

除 4.0 之前的 iOS 版本外，所有移动设备都支持媒体选择器。幸运的是，这些都比较少见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:33:20.543

如此[**链接**](http://www.wintellect.com/cs/blogs/rrobinson/archive/2011/07/25/how-to-scale-a-jquery-mobile-site-for-ios.aspx)中所述，只需在 head 标签中添加以下代码即可完成。

```
<meta content="width=device-width, minimum-scale=1, maximum-scale=1" name="viewport"> 
```

您可能还想参考此[链接](http://davidbcalhoun.com/2010/viewport-metatag)以获得更多理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:42:10.403

首先，不要在这里使用 css 媒体查询或 window.orientation。各种媒体设备具有不同的纵向/横向值。

您可以在这里找到更多信息：http: [//www.matthewgifford.com/2011/12/22/a-misconception-about-window-orientation/](http://www.matthewgifford.com/2011/12/22/a-misconception-about-window-orientation/)

不幸的是，jsFiddle 无法检测到orientationchange 事件，所以经典的HTML 示例应该可以解决问题，只需直接复制/测试即可。

这应该以一种古老的残酷方式完成，使用 jQuery 来比较窗口高度和窗口宽度，如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <style>
        .larger {
            font-size: 18px !important;
        }   

        .smaller {
            font-size: 12px !important;
        }   

    </style>
    <script type="text/javascript" src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>   
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
    <script>    

        $(document).on('pageshow', '#index', function(){       
            detectOrientationMode();
        }); 

        $(window).bind('orientationchange', function() {            
            detectOrientationMode();            
        });     

        function detectOrientationMode() {
            if($(window).height() > $(window).width()) {
                $.mobile.activePage.find('h3.ui-title').removeClass('smaller').addClass('larger');
            } else {
                $.mobile.activePage.find('h3.ui-title').removeClass('larger').addClass('smaller');
            }
        }
    </script>
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

你也应该被警告。通过更改字体大小，您也在更改标题大小，因此请考虑到这一点。

# jquery - 通过 Ajax 加载下一个图像并添加到 Fancybox

> ID：15500835
> 
> 赞同：2
> 
> 时间：2013-03-19T13:27:51.270
> 
> 标签：jquery, ajax, fancybox, fancybox-2

我的问题是我有一个大画廊，不应该在第一页加载时完全加载。所以我加载了 50 张图片中的 10 张，并为它们添加了 fancybox。当用户单击下一个按钮时，第 11 个图像应通过 Ajax 加载并附加到画廊容器。

问题在于，fancybox 停在第 10 个图像，因为它不知道动态加载图像。

如何将动态加载的图像添加到 fancybox2？

目前我有这个：

```
function loadFancybox() {
    $('a.lightbox').fancybox({
        helpers: {
            overlay: {
                css: {
                    'background': 'rgba(0,0,0,0.8)'
                }
            }
        },

        beforeLoad: function() {
            this.title = $(this.element).data('title');
            ajaxGetNextImages();
            loadFancybox();
        },
        loop: false
    });
}
loadFancybox(); 
```

`ajaxGetNextImages()`获取下一张图片:)

之后我调用 loadFancybox() 以便所有新图像都属于图库。但是在我重新打开fancybox之前它们不包括在内......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T18:13:51.577

好的，只是为了好玩，基于[imran-a](https://github.com/imran-a)在这个[GitHub](https://github.com/fancyapps/fancyBox/issues/257)问题上的评论，这是你被黑的解决方案：

```
$(".fancybox").fancybox({
    loop: false,
    beforeLoad: function () {
        if ((this.index == this.group.length - 1) && !done) {
            ajaxGetNextImages();
            done = true;
            this.group.push(
               { href: "images/04.jpg", type: "image", title: "Picture 04", isDom: false },
               { href: "images/05.jpg", type: "image", title: "Picture 05", isDom: false },
               { href: "images/06.jpg", type: "image", title: "Picture 06", isDom: false }
            ); // push 
        } // if
    } // beforeLoad
}); // fancybox 
```

**请注意**，除了调用`ajaxGetNextImages()`（将新图像放置在文档流中）之外，我还必须（手动）将新图像推送到 fancybox 的组中。

不是一个完美的解决方案，但它有效，请参阅**[此处的演示](http://www.picssel.com/playground/jquery/loadImagesinGalleryDynamically_19mar13.html)**；您将在页面加载时看到三个缩略图。一旦您打开 fancybox 并导航到最后一个项目，文档中将添加三个缩略图，以及 fancybox 库中的 3 个相应图像。

另请注意，您必须`var done = false;`在脚本开始时进行初始化。

顺便说一句，忘记功能`loadFancybox()`，不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:39:07.767

`.fancybox();`动态加载图像后尝试再次调用

# scala - 如何使用 yield 语句返回不同的集合

> ID：15500836
> 
> 赞同：0
> 
> 时间：2013-03-19T13:27:51.537
> 
> 标签：scala

根据我有限的知识，我知道编译器会自动继承集合返回类型，并基于它确定要返回的集合类型，所以在下面的代码中我想返回`Option[Vector[String]]`。

我尝试使用以下代码进行试验，但出现编译错误

```
type mismatch;  found   : scala.collection.immutable.Vector[String]  required: Option[Vector[String]] 
```

**代码：**

```
def readDocument(v:Option[Vector[String]]) : Option[Vector[String]] =    
{
   for ( a <- v;  
   b <- a )
     yield 
     {
        b
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:39:22.283

```
scala> for (v <- Some(Vector("abc")); e <- v) yield e
<console>:8: error: type mismatch;
 found   : scala.collection.immutable.Vector[String]
 required: Option[?]
              for (v <- Some(Vector("abc")); e <- v) yield e
                                               ^

scala> for (v <- Some(Vector("abc")); e = v) yield e
res1: Option[scala.collection.immutable.Vector[String]] = Some(Vector(abc)) 
```

嵌套`x <- xs`意味着[`flatMap`](https://stackoverflow.com/questions/1052476/can-someone-explain-scalas-yield)并且仅当返回的类型与[最外层](https://stackoverflow.com/questions/4719592/type-mismatch-on-scala-for-comprehension)的类型相同时才会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:38:54.107

`for`理解已经为您拆箱，所以`Option`这应该有效

```
def readDocument(v:Option[Vector[String]]) : Option[Vector[String]] =    
{
  for ( a <- v )
  yield 
  {
    a
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:20:42.550

这个怎么样？

```
 def readDocument(ovs: Option[Vector[String]]): Option[Vector[String]] =
    for (vs <- ovs) yield for (s <- vs) yield s 
```

# php - Apache，将查询字符串放在重定向的网址之前？

> ID：15500841
> 
> 赞同：0
> 
> 时间：2013-03-19T13:27:58.607
> 
> 标签：php, apache, mod-rewrite, redirect, url-rewriting

是否可以将用户从 url 重定向`http://localhost/welcome?url=1&another=2`到 index.php?another=2&url=welcome？我的意思是，我想将所有查询字符串放在解析部分之前。是否可以？

我知道我可以做这样的事情： `RewriteRule ^(.*)$ index.php?%{QUERY_STRING}&url=$1 [QSD,L]` 并通过使用在 php 中捕获 URL，`$_SERVER[ 'REDIRECT_QUERY_STRING' ]`但我想从 GET 数组中获取查询字符串。

如果我只是 GET 我有 url 等于`index.php`（文件名），如果我将标志更改为`QSA`，则在所有重定向后添加查询字符串......

有任何想法吗？

*-- 编辑 --*
我检查了一些问题，我发现这是因为循环。我已经这样做了，但也许有人对如何解决这个问题有更好的想法。

```
RewriteCond %{QUERY_STRING}  !&rw=1$ [NC]
RewriteRule ^(.*)$           index.php?%{QUERY_STRING}&url=$1&rw=1 [QSD,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:52:57.153

> 是否可以将用户从 url 重定向`http://localhost/welcome?url=1&another=2`到 index.php?another=2&url=welcome？

是的，您可以在根目录的 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}    !index\.php               [NC]
RewriteCond %{QUERY_STRING}   ^url=1&([^=]+)=([\d]+)/?  [NC]
RewriteRule ^(.*)     /index.php?%1=%2&url=$1?          [NC,L] 
```

静默地图：

`http://localhost/par1?url=1&par2=val2`

到：

`http://localhost/index.php?par2=val2&url=par1`

其中*par1*、*par2*和 numeric *val2*是动态字符串。

对于永久重定向，将 [NC,L] 替换为 [R=301,NC,L]

# c - 信号处理程序不会看到全局变量

> ID：15500844
> 
> 赞同：6
> 
> 时间：2013-03-19T13:28:09.470
> 
> 标签：c, signals, scope, signal-handling

这就是问题所在：这个程序应该从标准输入接收输入并计算插入的字节数；SIGUSR1 信号将停止主程序并在文件标准错误上打印当我发送 SIGUSR1 时复制了多少字节。

这就是我的老师希望我这样做的方式：在一个终端运行

```
cat /dev/zero | ./cpinout | cat >/dev/null 
```

而从第二个终端发送信号

```
kill -USR1 xxxx 
```

其中 xxxx 是 cpinout 的 pid。

我更新了我以前的代码：

```
/* cpinout.c */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <signal.h>

#define BUF_SIZE 1024   

volatile sig_atomic_t countbyte = 0;
volatile sig_atomic_t sigcount = 0;

/* my_handler: gestore di signal */
static void sighandler(int signum) {
    if(sigcount != 0)
        fprintf(stderr, "Interrupted after %d byte.\n", sigcount);
    sigcount = countbyte;    
}

int main(void) {

    int c;
    char buffer[BUF_SIZE];
    struct sigaction action;

    sigemptyset(&action.sa_mask);
    action.sa_flags = 0;
    action.sa_handler = sighandler;
    if(sigaction(SIGUSR1, &action, NULL) == -1) {
        fprintf(stderr, "sigusr: sigaction\n");
        exit(1);
    }
    while( c=getc(stdin) != EOF ) {
        countbyte++;
        fputc(c, stdout);
    }
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:21:56.310

信号只能`volatile sig_atomic_t`根据 C89 和[POSIX 7](http://pubs.opengroup.org/onlinepubs/9699919799/functions/signal.html) 标准写入变量：

> 如果信号处理程序引用除 errno [Option End] 以外的任何对象 [CX] [Option Start] 且具有静态存储持续时间，而不是通过将值分配给声明为 volatile sig_atomic_t 的对象，则行为未定义

实现通常提供更多，但我怀疑使用非易失性全局变量或 printf 是您提供的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T14:26:44.797

* * *

**编辑**

在您提到的评论中，您将命令运行为：

`cat /dev/zero | ./namefile | cat >/dev/null`

行为其实很好。`/dev/zero`是无穷无尽的零流，它们被发送到程序。所以它会很快地把它们计算出来。当你打断时，它会停止，你会留下很多。

* * *

问题可能与在更新全局变量时可能会调用信号处理程序有关（如果这需要多条指令）。但是，GNU 文档声明可以安全地假设 an`int`在 POSIX 系统上始终是原子的。

我能想到的唯一另一种可能性是您`fputc`在循环中调用，`printf`在处理程序中（但是，如果程序没有调用处理程序，则在处理程序中调用应该是安全`printf`的）。尝试`fputc`从循环中删除以查看是否可以解决问题。

**编辑：**

这似乎可以解释问题。这与从信号处理程序中安全调用的函数类型有关：

> 如果函数使用静态数据结构进行内部簿记，它们也可以是不可重入的。此类函数最明显的示例是 stdio 库的成员（printf()、scanf() 等），它们更新缓冲 I/O 的内部数据结构。因此，当在信号处理程序中使用 printf() 时，如果处理程序在执行 printf() 或另一个 stdio 的调用过程中中断主程序，我们有时可能会看到奇怪的输出——甚至是程序崩溃或数据损坏功能。（*Linux 编程接口*）

您的程序正在中断一个 stdio 函数，这似乎非常适合。

* * *

这是另一种方法：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <signal.h>

int countbyte = 0;  // for main program
int sigcount = 0;   // for signal handler

/* my_handler: signal handler */
static void sighandler(int signum)
{
   sigcount = countbyte;
}

int main(void)
{ 
   int c;
   struct sigaction sigact;

   sigemptyset(&sigact.sa_mask);
   sigact.sa_flags = 0;
   sigact.sa_handler = sighandler;
   sigaction(SIGUSR1, &sigact, NULL);
   while ((c = getc(stdin)) != EOF) {
      countbyte++;
      fputc(c, stdout);
   }
   if (sigcount != 0) {
      printf("Interrupted after %d bytes\n", sigcount);
   }

   return 0;
} 
```

# sql - SQL - datediff（分钟）不包括周末

> ID：15500845
> 
> 赞同：2
> 
> 时间：2013-03-19T13:28:14.227
> 
> 标签：sql, sql-server, datediff

你能帮帮我吗，我正在使用下面的 sql 视图（然后我在水晶报告中使用）。我需要日期差异（以分钟为单位），但现在我需要排除周末。请帮忙 ：）

```
SELECT intwc                             AS wc,
       Datediff(n, start_date, end_date) AS time,
       mh_start_date                     AS date,
       'Repair'                          AS type
FROM   dbo.xxxxxxx 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-05T20:16:09.613

这是@bendataclear 答案的修改版本。它直接计算周末分钟，而不是计算天数并乘以 24*60。它还解释了周六/周日开始/结束的所有 4 种组合

我`CONVERT(date,@StartDate)`用来获取时间为 的日期，`@StartDate`然后`00:00:00`用于计算部分星期日和星期六。有[更好](https://stackoverflow.com/questions/113045/how-to-return-the-date-part-only-from-a-sql-server-datetime-datatype)的方法可以做到这一点，但我选择了最简单的方法。

```
DECLARE @StartDate DATETIME
DECLARE @EndDate DATETIME
SET @StartDate = '2013/03/15 23:30:00'
SET @EndDate = '2013/03/17 00:30:00'

SELECT
(   DATEDIFF(MINUTE, @StartDate, @EndDate)
    - ( DATEDIFF(wk, @StartDate,@EndDate)*(2*24*60)
        -- End on Sunday
        -(CASE WHEN DATEPART(dw, @EndDate)  = 1 THEN 24.0*60-DATEDIFF(minute,CONVERT(date,@EndDate),@EndDate) ELSE 0 END)
        -- Start on Saturday
        -(CASE WHEN DATEPART(dw, @StartDate) = 7 THEN DATEDIFF(minute,CONVERT(date,@StartDate),@StartDate) ELSE 0 END)
        -- End on Saturday
        +(CASE WHEN DATEPART(dw, @EndDate)  = 7 THEN DATEDIFF(minute,CONVERT(date,@EndDate),@EndDate) ELSE 0 END)
        -- Start on Saturday
        +(CASE WHEN DATEPART(dw, @StartDate) = 1 THEN 24.0*60-DATEDIFF(minute,CONVERT(date,@StartDate),@StartDate) ELSE 0 END)
    )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:45:13.160

这个答案假设您想按分钟排除周末，它也完全基于[这个问题](https://stackoverflow.com/questions/252519/count-work-days-between-two-dates-in-t-sql)的答案：

```
DECLARE @StartDate DATETIME
DECLARE @EndDate DATETIME
SET @StartDate = '2013/03/15 23:30:00'
SET @EndDate = '2013/03/18 00:30:00'

SELECT
   (DATEDIFF(MINUTE, @StartDate, @EndDate))
  -(DATEDIFF(wk, @StartDate, @EndDate) * (2*24*60))
  -(CASE WHEN DATENAME(dw, @StartDate) = 'Sunday' THEN (24*60) ELSE 0 END)
  -(CASE WHEN DATENAME(dw, @EndDate) = 'Saturday' THEN (24*60) ELSE 0 END) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:02:39.847

因此，您确实需要能够处理一些 CASE 语句来处理所有边缘情况。这是我放在一起的一个例子。Numbers 表只是一个计数表，在本例中为 1 到 30。

```
CREATE TABLE #times (id INT IDENTITY(1,1), start_stamp DATETIME, end_stamp DATETIME)

INSERT INTO #times
        ( 
          start_stamp ,
          end_stamp
        )
SELECT DATEADD(DAY, -2*Number, CURRENT_TIMESTAMP), DATEADD(DAY, -1*Number, CURRENT_TIMESTAMP)
FROM Common.NUMBERS
WHERE Number < 31

SELECT id, start_stamp, end_stamp,
CASE WHEN DATEDIFF(DAY, start_stamp, end_stamp) < 7 THEN
    CASE WHEN DATEPART(weekday, start_stamp) < DATEPART(weekday, end_stamp)
        THEN DATEDIFF(MINUTE, start_stamp, DATEADD(HOUR, -48, end_stamp))
        ELSE DATEDIFF(MINUTE, start_stamp, end_stamp) END
    ELSE DATEDIFF(MINUTE, start_stamp, DATEADD(HOUR, -48*(DATEDIFF(WEEK, start_stamp, end_stamp)), end_stamp)) END
    + CASE WHEN DATENAME(weekday,start_stamp) IN ('Sunday', 'Saturday') THEN 1440 ELSE 0 END
    + CASE WHEN DATENAME(weekday,end_stamp) IN ('Sunday', 'Saturday') THEN 1440 ELSE 0 END
FROM #times 
```

可能有一种更优雅的方法可以做到这一点，但代码允许您针对整个结果集运行并按行计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:35:32.293

```
SELECT intwc                             AS wc,
   Datediff(n, start_date, end_date) AS time,
   mh_start_date                     AS date,
   'Repair'                          AS type
FROM   dbo.xxxxxxx 
Where DATEPART(dw, start_date) NOT IN (1, 7) and DATEPART(dw, end_date) NOT IN (1, 7) 
```

# django - 在美味派资源的 POST 方法中找不到 404

> ID：15500846
> 
> 赞同：0
> 
> 时间：2013-03-19T13:28:18.470
> 
> 标签：django, angularjs, tastypie

我正面临 django-tastypie 的一个非常奇怪的问题。好吧，这有点过于复杂，所以让我从我的应用程序的技术堆栈开始。

### 技术栈

1.  [django](https://www.djangoproject.com/) -***版本 1.4.1***
2.  [django-tastypie](http://django-tastypie.readthedocs.org/en/v0.9.11/) -***版本 0.9.11***
3.  [angularjs](http://angularjs.org/) -***版本 1.0.4***

### 问题

我有一个`comment`模型和两个用户模型`Student`，`Teacher`它们是从基用户模型的子类派生而来的。类似于以下内容。

```
## Base User
class BaseUser(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    # some more common fields here

## Teacher Model
class Teacher(BaseUser):
    college = models.ForeignKey(College)

## Student Model
class Student(BaseUser):
    Address = models.OneToOneField(Address)

## Comment Model
class Comment(models.Model):
    date = models.DateTimeField(auto_now_add=True)
    user = models.ForeignKey(backend.models.CustomUser)
    body = models.TextField()
    # Generic Relation with other models
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    user = generic.GenericForeignKey('content_type', 'object_id') 
```

现在，正如您在我的`comment`模型中看到的那样，我使用[`GenericForeignKey`](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)了这样一个用户可以评论任何其他模型。

我在我的 sweetpie api.py 文件中定义了如下资源：

```
class TeacherResource(BaseModelResource):
    college = fields.ToOneField(CollegeResource, 'college', full=True)

    class Meta(BaseModelResource.Meta):
        queryset = models.Teacher.objects.all()
        resource_name = 'teacher'

    def dehydrate(self, bundle):
        # Add content type url
        ctype = models.ContentType.objects.get_for_model(models.Teacher)
        bundle.data['content_type_id'] = ctype.id
        bundle.data['content_type'] = '/api/v1/contrib/contenttype/%i' % ctype.id
        return bundle

class StudentResource(BaseModelResource):

    class Meta(BaseModelResource.Meta):
        queryset = models.Student.objects.all()
        resource_name = 'student'

    def dehydrate(self, bundle):
        # Add content type url
        ctype = models.ContentType.objects.get_for_model(\
                models.ProspectiveCandidate)
        bundle.data['content_type_id'] = ctype.id
        bundle.data['content_type'] = '/api/v1/contrib/contenttype/%i' % ctype.id
        return bundle

class CommentResource(BaseModelResource):
    custom_user = fields.ToOneField(CustomUserResource,
                                 'custom_user', full=True)
    user = fields.ToOneField(ContentTypeResource, 'content_type')

    class Meta(MarketingResource.Meta):
        queryset = models.Comment.objects.all()
        resource_name = 'comment'
        always_return_data = True
        filtering = {
            'user' : ALL_WITH_RELATIONS,
            'object_id': ALL_WITH_RELATIONS
        }

    def hydrate(self, bundle):
        print bundle.data
        bundle.obj.user = models.ContentType.objects.get_for_id(\
                int(bundle.data['object_id']))
        bundle.obj.object_id = int(bundle.data['object_id'])
        bundle.obj.employee = bundle.request.user.custom_user
        return bundle

    def dehydrate(self, bundle):
        if bundle.obj.date:
            bundle.data['date'] = timesince.timesince(bundle.obj.date)
        return bundle 
```

以上所有资源均已正确注册。每个资源的`GET`方法都可以完美运行。我`angularjs'` `$resource`用来调用tastepie 的REST api。以下是我用来发送发布请求`CommentResource`以创建新的 commetn 对象的通用方法。

```
function make_comment(service, scope){
    service.save({
        "user": scope.user.content_type,
        "object_id": scope.user.id,
        "comments": $("textarea#comment").val()
    }, function(data){
        // Success callback Method
        scope.comments.push(data);
    }); 
} 
```

很简单吧？现在在上述方法中，a`scope.user`可以是教师对象或学生对象，并且该方法只需使用该服务使用给定数据发出 POST 请求：

```
http://127.0.0.1:8000/api/v1/comment 
```

问题是，当它`scope.user`是一个学生对象并且我调用上述方法时，我得到了`201 created`响应，但是当它是一个教师对象时，它给了我一个`404 Not Found`错误。

### 调试

*   我已经确定传入的数据是正确的。
*   我已确保教师对象存在。
*   我已确保传入的内容类型正确。
*   使用学生和教师对象时传入的数据非常相似（如下所示）：

    ### 对于传入的学生数据和响应是：

    数据 = {'user': '/api/v1/contrib/contenttype/15', 'object_id': '16', 'comments': 'sadfsadfsadfasdf'} 响应 = [19/Mar/2013 18:08:47] “POST /api/v1/comment HTTP/1.1”201 741

    ### 对于传入的教师数据是：

    数据 = {'user': '/api/v1/contrib/contenttype/14', 'object_id': '62', 'comments': 'test comment'} 响应 = [19/Mar/2013 18:09:44 ] "POST /marketing/api/v1/comment HTTP/1.1" 404 3211

我无法理解为什么使用相同的代码适用于一种模型而不适用于另一种？你能给我一些指点吗？谢谢。

### 更新

所以我使用了一个自定义的 http 错误跟踪中间件，它会`404 Not Found`在我关闭它时发送响应，我现在收到以下错误。

> ContentType 匹配查询不存在

我查找了数据库，id 为 14 的内容类型是教师，它在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:50:49.747

问题在于水合物方法：

```
def hydrate(self, bundle):
    print bundle.data
    bundle.obj.user = models.ContentType.objects.get_for_id(\
            int(bundle.data['object_id'])) // this should be content_type_id
    bundle.obj.object_id = int(bundle.data['object_id'])
    bundle.obj.employee = bundle.request.user.custom_user
    return bundle 
```

因此更改了注释功能以传入`content_type_id`并将水合物方法更改为

```
def hydrate(self, bundle):
    print bundle.data
    bundle.obj.user = models.ContentType.objects.get_for_id(\
            int(bundle.data['content_type_id'])) // this was friggin stupid.
    bundle.obj.object_id = int(bundle.data['object_id'])
    bundle.obj.employee = bundle.request.user.custom_user
    return bundle 
```

# javascript - 检测字符串中的数字 - javascript regex

> ID：15500848
> 
> 赞同：0
> 
> 时间：2013-03-19T13:28:20.153
> 
> 标签：javascript, regex

我如何编写正则表达式来查找电话号码

这是一个号码 09876 09875

它应该检测 09876 09875 作为一个整数

这是一个号码 +17865 8658 u98765

这应该检测到两个数字 +17865 8658 和 98765

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:36:34.837

使用以下正则表达式

```
/[+0-9]+(?:\.[0-9]*)?/g 
```

[对于工作示例，请单击](http://regexr.com?346c7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:31:25.930

删除空格并将加号与以下数字匹配：

```
var input   = 'this is a number +17865 8658 u98765',
    outputs = input.replace(/ /g, '').match(/\+?\d+/g); 
```

输出：

```
["+178658658", "98765"] 
```

不替换空格：

```
var input   = 'this is a number +17865 8658 u98765',
    outputs = input.match(/\+?\d( *\d+)+/g); 
```

输出：

```
["+17865 8658", "98765"] 
```

# java - FsReadOnlyArchiveFilesystemException

> ID：15500849
> 
> 赞同：0
> 
> 时间：2013-03-19T13:28:20.773
> 
> 标签：java, file, truezip

嗨，我正在尝试使用 TrueZIP 解压缩文件，但这样做时出现异常

> `de.schlichtherle.truezip.fs.archive.FsReadOnlyArchiveFileSystemException: This is a read-only archive file system!`

它适用于某些文件并为其他文件抛出异常。

所以我尝试更改权限并使其可写，但这也不起作用。

这是我的代码：

```
public void unzipFiles(TFile[] files){
    try{
        for(int i=0; i < files.length; i++){
            System.out.println("Processing please wait ...");
            if(files[i].isArchive()){
                if(files[i].getName().endsWith(".zip")){
                    System.out.println(files[i].getName());
                    System.out.println("Is writable "+files[i].canWrite());
                    //change the file permission to be writable
                    if(files[i].canWrite() == false){
                        files[i].setWritable(true);
                        files[i].setExecutable(true);
                        System.out.println("After setting it writeable "+files[i].canWrite());
                    }
                    String filename = files[i].getName();
                    String pathToExtract = files[i].getParent() + "\\" + filename.substring(0, filename.lastIndexOf("."));
                    File createdirectory = new File(pathToExtract);

                    TFile directoryToExtract = new TFile(pathToExtract);
                    TFile.cp_rp(files[i], directoryToExtract, TArchiveDetector.NULL, TArchiveDetector.NULL);
                    System.out.println("Unzipping files ..");
                    TFile.rm_r(files[i]);
                    System.out.println("Deleting Zip file..");
                    numOfZips = numOfZips + 1;
                    unzipFiles(directoryToExtract.listFiles());
                }
            }else{
                if(files[i].isDirectory()){
                    unzipFiles(files[i].listFiles());
                }
            }
        }
    }catch(Exception e){
        e.printStackTrace();
    } 
```

有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:12:42.370

请注意，TrueZIP 不支持权限。因此`setWritable`，`setExecutable`关于唯一不会被覆盖以在存档文件中有意义的方法。如果您检查了它们的布尔返回值，您会发现`false`如果文件对象正在处理归档文件中的条目，它们就会返回。

除此之外，我看不到您将在哪里修改存档文件，因此我无法评论您如何获得`FsReadOnlyArchiveFileSystemException`. 如果您尝试修改只读存档文件系统，即存档文件是只读的，通常会抛出此错误。

如果您提供堆栈跟踪，那么为什么会发生这种情况可能会变得很明显。

# nosql - 查询大数据的最佳（NoSQL）数据库

> ID：15500855
> 
> 赞同：1
> 
> 时间：2013-03-19T13:28:50.883
> 
> 标签：nosql, gis, bigdata

我们正在开发一个应用程序，它使用一个非常大的数据库。它应该支持的基本操作是： - 查找给定地图 id 的所有多边形的 id - 对于每个多边形，获取坐标来绘制它（4 个坐标）

所以，一切都是为了优化阅读。没有写作，没有一致性问题。当然，一些额外的事情很重要，但这是关键。多边形的元组数量非常大，在数亿（几 TB）的范围内。

你能为此推荐最好的数据库吗？目前我们最喜欢的是 Sharded Mysql、MongoDB 和 CouchBase。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:38:54.097

我仍在尝试了解您需要做什么操作（我对 GIS 很感兴趣）。但这是我的（跛脚？）尝试提出一些建议 -

如果你想坚持使用 RDBMS，你可以使用[PostGRESQL](http://www.postgresql.org/)[GridSQL](http://sourceforge.net/projects/gridsql/)一起使用，它在你的 SQL 查询中引入了并行查询执行功能。我有一位同事看到了使用它的显着收益。

这是一个关于缩放的案例研究[这是一个使用 GridSQL](http://www.slideshare.net/jim_mlodgenski/scaling-postgresql-with-gridsql)

如果您更愿意进行实验，我希望您考虑在大数据领域享有盛誉的[Apache HBase 。](http://hbase.apache.org/)

# php - 合并从 csv 文件加载的多维数组

> ID：15500857
> 
> 赞同：1
> 
> 时间：2013-03-19T13:28:55.153
> 
> 标签：php, csv, multidimensional-array, merge

我使用[php-csv-parser](https://code.google.com/p/php-csv-parser/)从 csv 文件转换了 2 个数组。这是最旧的文件：

```
Array
(
[0] => Array
    (
        [0] => A Single Man
        [1] => Tom Ford
        [2] => 2009
        [3] => Somestring
    )

[1] => Array
    (
        [0] => Bram Stoker Dracula
        [1] => Francis F. Coppola
        [2] => 1992
        [3] => Somestring
    )
) 
```

这是最新的：

```
Array
(
[0] => Array //this is a new record
    (
        [0] => A Single Man
        [1] => Tom Ford
        [2] => 1988
    )

[1] => Array //this record already exists in oldest array
    (
        [0] => A Single Man
        [1] => Tom Ford
        [2] => 2009
    )

[2] => Array //this record already exists but has a modify
    (
        [0] => Bram Stoker Dracula
        [1] => Francis Ford Coppola //modified string
        [2] => 1992
    )
) 
```

我想创建第三个“合并”数组，其中包含新记录和修改后的字符串。请注意，如果*Array[i][2]*是不同的字符串，我必须创建一个新记录，但如果任何其他参数发生更改，只需修改记录。之后，对于每条新记录，我必须填写所有其他空参数。

这是预期的输出

```
Array
(
[0] => Array
    (
        [0] => A Single Man
        [1] => Tom Ford
        [2] => 1988
        [3] => //empty for now, to fill
    )

[1] => Array
    (
        [0] => A Single Man
        [1] => Tom Ford
        [2] => 2009
        [3] => Somestring
    )

[2] => Array
    (
        [0] => Bram Stoker Dracula
        [1] => Francis Ford Coppola
        [2] => 1992
        [3] => Somestring
    )
) 
```

# c++ - 竞争条件效应

> ID：15500863
> 
> 赞同：-1
> 
> 时间：2013-03-19T13:29:01.940
> 
> 标签：c++, linux, multithreading, race-condition

我知道竞争条件的风险以及写入或读取的值可能已损坏。我处于布尔和整数以及几个类实例的比赛中。

除了数据无效之外，这是否会导致程序崩溃或对我的程序产生任何其他不良影响？我有最坏的打算吗？

我的程序有两个版本，一个是调试版本，另一个版本有很多优化选项。我很担心最后一个，因为它要投入生产。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:34:45.097

`data not being valid`可能会导致**任何**结果（即您调用**未定义的行为**）。因此，考虑到这一点，您的应用程序可能会崩溃、内存泄漏、格式化硬盘驱动器以及几乎其他任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:37:22.380

> *这会导致程序崩溃吗*

取决于正在争夺的资源，但是是的。如果一个线程获取资源而另一个线程需要它继续进行，您可能会出现未定义的行为，甚至程序崩溃。

> *除了数据无效之外，对我的程序还有其他不良影响吗？*

除了无效数据（因此实际上是一个无用的程序）之外，您还可能容易出现死锁。

关于比赛条件的[维基百科文章](http://en.wikipedia.org/wiki/Race_condition)是寻找此类问题答案的好地方。

# javascript - 从两个变量计算任务的紧迫性

> ID：15500864
> 
> 赞同：5
> 
> 时间：2013-03-19T13:29:02.783
> 
> 标签：javascript, mysql, math, statistics, pseudocode

我试图找出一个公式来计算一组任意任务的紧迫性，基于“截止日期”之前的天数和已完成任务的完成百分比。

到目前为止，我有一个“函数”，它给出了代表：

```
U = ((dd * 25) - (100 - cp))

Where: 
dd = Day difference from deadline to current date (in an integer value)
cp = current completion % (in an integer value - in increments of 5 currently) 
```

这给了我一个线性函数，函数中的 25 表示任务每天进展 25%。

因此，在任何给定日期：

```
Where U <0 task is urgent
Where U =0 task is on schedule
Where U >0 task is ahead of schedule
(The actual display on if a task is on schedule (within a range) would be handled separately) 
```

是否有任何其他方法可以根据两个日期的差异并由变量加权来计算任务的紧迫性？从当前响应：使用`start date`,`end date`和`current date`差异以及完成百分比来计算紧迫性

可能使用非线性函数在 cp > 75% 时增加 U 并在 cp < 75% 时减少 U。线性与非线性函数有什么优势吗？

这将在 MySQL 和 javascript 中使用，因为我想要一种显示任务如何使用 U 值的方法。因此，找到一种方法来正确（比我目前的方法）计算 U 的值是我正在尝试做的。

## 解决方案

我采用的解决方案（基于标记的解决方案）：

```
((((((end_date - now) / (end_date - start_date)) * 100) * (100 - cp)) * 10) * -1) 
```

### 所做的小改动

使用`rule of three`作为开始，乘以 10 只是为了增加值并创建更广泛的范围，而无需过多考虑浮点值。也乘以 -1，这样完成的任务就会给出一个负数，而未完成的任务显示一个更高的数字（有道理：任务的紧迫性更高，因此数字更高）我将来可能会添加到这个，增加速度对于建议的任务并考虑分配给给定任务的人数。此功能仅用于粗略指南，以向某人显示可能需要首先执行的任务（在给定列表中）。

此外，当我在 MySQL 中使用它时，需要将函数包装在 IFNULL 中（由于我的情况下存在现有数据）

```
IFNULL( *function* ,-200) 
```

如果它是空值，则初始任意值 -200（因为某些任务没有开始/结束日期）

感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:09:52.800

鉴于：

*   **到期**日是截止日期与当前日期的天差
*   **估计**是完成一项任务所需的时间
*   **done**是百分比的进度

这将是三个简单的规则：

```
var rest = estimated / 100 * (100 - done);

if(due < rest) {
    state = 'behind';
}
if(due == rest) {
    state = 'on';
}
if(due > rest) {
    state = 'ahead';
} 
```

请注意，可能很少有任务会“按计划进行”，因为它们必须完全匹配，您还可以检查范围之类`rest < due + 0.5 && rest > due - 0.5`的，模仿非线性优先级。

# c# - 如何降低 GetHashCode 的复杂度

> ID：15500865
> 
> 赞同：2
> 
> 时间：2013-03-19T13:29:03.597
> 
> 标签：c#, performance, gethashcode

我想减少我的代码执行时间。查看一些测试结果，我发现 GetHashCode() 占用了我 21.62% 的执行时间。

我也收到了警告：

> 警告 1 DA0010: .*.GetHashCode() = 7,63; GetHashCode 函数应该很便宜并且不分配任何内存。如果可能，降低哈希码函数的复杂性。

**代码片段：**

我在字段类中的 GetHashCode()：

```
 public override int GetHashCode()
    {
        int hash = 7;
        hash = (hash * 13) + this.Coordinate.GetHashCode();
        return hash;
    } 
```

我在坐标类中的 GetHashCode()：

```
 public override int GetHashCode()
    {
        int hash = 17;

        hash = (hash * 23) + this.Row.GetHashCode();
        hash = (hash * 23) + this.Column.GetHashCode();

        return hash;
    } 
```

**编辑：**行和列只是字节变量。我只是调用他们的属性，它在 get 访问器中返回一个字节

我在数独类中的 GetHashCode()：

```
 public override int GetHashCode()
    {
        int hash = 7;

        hash = (hash * 5) + this.Grid.GetHashCode();

        return hash;
    } 
```

**编辑：** Grid 只是一个类型的多维数组：`Field[,]`，我只是在这里调用它的属性，它通过它的 get 访问器返回一个 Field[,] 网格。

**问题：**如何大大降低 GetHashCode() 的复杂性并提高其性能？为什么 GetHashCode() 方法的性能如此之低？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:38:32.320

您的计算只是在您的哈希码中添加一个 conts。只有哈希码的组合需要有更好的哈希码，然后只需添加两个值：

```
//Field 
public override int GetHashCode()
{
    return this.Coordinate.GetHashCode();
}

//Coordinate 
public override int GetHashCode()
{
    return  this.Column.GetHashCode() * 17 + this.Row.GetHashCode();
}    

//Sudoku, I doubt if this is ever called...
public override int GetHashCode()
{
    return this.Grid.GetHashCode();
} 
```

对于性能，它实际上取决于您调用 GetHashCode 的频率（如果您进行任何计算）。或者，如果您将它们存储在某种字典中，问题可能是具有相同哈希的多个值，这将减少您访问字典/哈希表中对象的时间。所以你的散列函数必须是你存储的集合的一个很好的分布。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T13:42:02.860

我怀疑你会发现这`GetHashCode`不是你的问题。如果您将超过 20% 的时间花在 中`GetHashCode`，那么您必须进行大量的字典查找。或者您正在将哈希码用于您可能不应该使用它的东西。

`GetHashCode`可能是性能问题的表现，但几乎可以肯定不是原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T13:51:22.360

如果你的类没有太多的修改器，你可以缓存哈希码并从`GetHashCode()`. （即使你有很多变异器，你也可以这样做，但如果对象经常变异，它的效率可能会低得多。）

你应该懒惰地评估它。您将需要知道它何时变脏并需要重新计算。您可以通过添加一个`bool isHashCodeDirty`字段轻松地做到这一点，该字段在构造类时初始化为 true，并且也由每个 mutator 方法初始化。

然后在`GetHashCode()`if`isHashCodeDirty`为 true 的实现中，将其设置为 false 并重新计算并返回哈希码。如果为假，则只返回缓存的值。

当然，你必须小心这里的多线程。我认为向 GetHashCode() 添加锁会极大地影响性能！

理想的当然是拥有不可变的类；然后你只需在构造函数中计算一次哈希码，之后它就永远不会改变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:31:33.313

看起来问题不在于整数加法，而在于访问 this.Coordinate、this.Grid 等属性

看看他们的 get 访问器，他们可能正在做一些额外的工作。

# c# - Monotouch SIGABRT 错误

> ID：15500868
> 
> 赞同：2
> 
> 时间：2013-03-19T13:29:11.973
> 
> 标签：c#, ios, xamarin.ios, sigabrt

在 iOS 的 Monotouch 中启动我的应用程序时，它会崩溃。

奇怪的是，它刚刚开始工作，而且只做了一点小小的改动，它确实给我丢了一个 SIGABRT 错误。即使在重做之后尝试运行，它也给出了相同的结果。我试图清理代码并重建。

这是完整的应用程序输出：

```
Starting iOS simulator 6.0
Launching application
Application launched. PID = 16751
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll [External]
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll [External]
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/System.dll [External]
Loaded assembly: /Users/Emil/Projects/Lectio2/Lectio2/bin/iPhoneSimulator/Debug/Lectio2.exe
Thread started: 
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/MonoTouch.Dialog-1.dll [External]
Loaded assembly: /Users/Emil/Downloads/FlyoutNavigation-master/FlyoutNavigation/bin/Debug/FlyoutNavigation.dll [External]
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/Mono.Security.dll [External]
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/System.Json.dll [External]
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/System.Web.Services.dll [External]
Loaded assembly: /Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll [External]

Unhandled Exception:
0   Lectio2                             0x0008fa0e mono_handle_exception_internal_first_pass + 2190
1   Lectio2                             0x00091452 mono_handle_exception_internal + 1602
2   Lectio2                             0x00091f9f mono_handle_exception + 47
3   Lectio2                             0x000d50f2 mono_x86_throw_exception + 306
4   ???                                 0x0b496f8f 0x0 + 189362063
at System.Reflection.MonoCMethod.Invoke (System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:545
at System.Activator.CreateInstance (System.Type,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo,object[]) [0x00174] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:299
at System.Activator.CreateInstance (System.Type,object[],object[]) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:234
at System.Activator.CreateInstance (System.Type,object[]) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:229
at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (intptr,intptr) [0x0000d] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:230
at MonoTouch.ObjCRuntime.Runtime.GetNSObject (intptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:279
at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (intptr) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:296
at (wrapper native-to-managed) MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (intptr) <IL 0x00017, 0x00094>
13  Lectio2                             0x0020a3a3 get_managed_object_for_ptr + 115
14  Lectio2                             0x0020f230 monotouch_trampoline + 448
15  Foundation                          0x0198ae8e _NSSetUsingKeyValueSetter + 82
16  Foundation                          0x0198a9b7 -[NSObject(NSKeyValueCoding) setValue:forKey:] + 267
17  Foundation                          0x019b5428 -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 412
18  UIKit                               0x029420cc -[UIRuntimeOutletConnection connect] + 106
19  libobjc.A.dylib                     0x04031663 -[NSObject performSelector:] + 62
20  CoreFoundation                      0x0133d45a -[NSArray makeObjectsPerformSelector:] + 314
21  UIKit                               0x02940bcf -[UINib instantiateWithOwner:options:] + 1327
22  UIKit                               0x02805e37 -[UIViewController _loadViewFromNibNamed:bundle:] + 280
23  UIKit                               0x02806418 -[UIViewController loadView] + 302
24  UIKit                               0x02806648 -[UIViewController loadViewIfRequired] + 73
25  UIKit                               0x02806882 -[UIViewController view] + 33
26  UIKit                               0x02806b2a -[UIViewController contentScrollView] + 36
27  UIKit                               0x0281def5 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 36
28  UIKit                               0x0281dfdb -[UINavigationController _layoutViewController:] + 43
29  UIKit                               0x0281e286 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 254
30  UIKit                               0x0281e381 -[UINavigationController _startTransition:fromViewController:toViewController:] + 72
31  UIKit                               0x0281eeab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386
32  UIKit                               0x0281efc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41
33  UIKit                               0x0281c225 -[UINavigationController defaultFirstResponder] + 156
34  UIKit                               0x02834082 -[UIResponder(Internal) _deepestDefaultFirstResponder] + 36
35  UIKit                               0x0283409e -[UIResponder(Internal) _deepestDefaultFirstResponder] + 64
36  UIKit                               0x0283413a -[UIResponder(Internal) _promoteDeepestDefaultFirstResponder] + 36
37  UIKit                               0x0275ef14 -[UIWindow _makeKeyWindowIgnoringOldKeyWindow:] + 363
38  UIKit                               0x0275eda4 -[UIWindow makeKeyWindow] + 41
39  UIKit                               0x0275ef81 -[UIWindow makeKeyAndVisible] + 91
40  UIKit                               0x02722fcc -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1797
41  UIKit                               0x02723fab -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
42  UIKit                               0x02735315 -[UIApplication handleEvent:withNewEvent:] + 1022
43  UIKit                               0x0273624b -[UIApplication sendEvent:] + 85
44  UIKit                               0x02727cf8 _UIApplicationHandleEvent + 9874
45  GraphicsServices                    0x04d10df9 _PurpleEventCallback + 339
46  GraphicsServices                    0x04d10ad0 PurpleEventCallback + 46
47  CoreFoundation                      0x012b7bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
48  CoreFoundation                      0x012b7962 __CFRunLoopDoSource1 + 146
49  CoreFoundation                      0x012e8bb6 __CFRunLoopRun + 2118
50  CoreFoundation                      0x012e7f44 CFRunLoopRunSpecific + 276
51  CoreFoundation                      0x012e7e1b CFRunLoopRunInMode + 123
52  UIKit                               0x027237da -[UIApplication _run] + 774
53  UIKit                               0x0272565c UIApplicationMain + 1211
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x00056, 0x001f5>
at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
at Lectio2.Application.Main (string[]) [0x00000] in /Users/Emil/Projects/Lectio2/Lectio2/Main.cs:17
at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00049, 0x0012e>
58  Lectio2                             0x0000a762 mono_jit_runtime_invoke + 722
59  Lectio2                             0x0016d2ee mono_runtime_invoke + 126
60  Lectio2                             0x001714e4 mono_runtime_exec_main + 420
61  Lectio2                             0x001768d5 mono_runtime_run_main + 725
62  Lectio2                             0x00067c45 mono_jit_exec + 149
63  Lectio2                             0x00205195 main + 2005
64  Lectio2                             0x00003795 start + 53
65  ???                                 0x00000004 0x0 + 4

2013-03-19 14:26:20.191 Lectio2[16751:c07] Unhandled managed exception: Exception has been thrown by the target of an invocation. (System.Reflection.TargetInvocationException)
  at System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x0011f] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:536 
  at System.Reflection.MonoCMethod.Invoke (BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Reflection/MonoMethod.cs:545 
  at System.Activator.CreateInstance (System.Type type, BindingFlags bindingAttr, System.Reflection.Binder binder, System.Object[] args, System.Globalization.CultureInfo culture, System.Object[] activationAttributes) [0x00174] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:299 
  at System.Activator.CreateInstance (System.Type type, System.Object[] args, System.Object[] activationAttributes) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:234 
  at System.Activator.CreateInstance (System.Type type, System.Object[] args) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Activator.cs:229 
  at MonoTouch.ObjCRuntime.Runtime.ConstructNSObject (IntPtr ptr, IntPtr klass) [0x0000d] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:230 
  at MonoTouch.ObjCRuntime.Runtime.GetNSObject (IntPtr ptr) [0x0001f] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:279 
  at MonoTouch.ObjCRuntime.Runtime.GetNSObjectWrapped (IntPtr ptr) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/ObjCRuntime/Runtime.cs:296 
  at (wrapper native-to-managed) MonoTouch.ObjCRuntime.Runtime:GetNSObjectWrapped (intptr)
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 
  at Lectio2.Application.Main (System.String[] args) [0x00000] in /Users/Emil/Projects/Lectio2/Lectio2/Main.cs:17 
Stacktrace:

Native stacktrace:

    0   Lectio2                             0x000922cc mono_handle_native_sigsegv + 284
    1   Lectio2                             0x000d84dd sigabrt_signal_handler + 109
    2   libsystem_c.dylib                   0x95ad786b _sigtramp + 43
    3   ???                                 0xffffffff 0x0 + 4294967295
    4   libsystem_sim_c.dylib               0x041e157b abort + 140
    5   Lectio2                             0x00216e2b monotouch_unhandled_exception_handler + 283
    6   Lectio2                             0x0008dd3c mono_invoke_unhandled_exception_hook + 140
    7   Lectio2                             0x00091e4a mono_handle_exception_internal + 4154
    8   Lectio2                             0x00091f9f mono_handle_exception + 47
    9   Lectio2                             0x000d50f2 mono_x86_throw_exception + 306
    10  ???                                 0x0b496f8f 0x0 + 189362063
    11  ???                                 0x0e91b66c 0x0 + 244430444
    12  ???                                 0x0e91ac54 0x0 + 244427860
    13  ???                                 0x0e91a56c 0x0 + 244426092
    14  ???                                 0x0e91a4f0 0x0 + 244425968
    15  ???                                 0x0e91a2d8 0x0 + 244425432
    16  ???                                 0x0e91a1bc 0x0 + 244425148
    17  ???                                 0x0e91a0c4 0x0 + 244424900
    18  ???                                 0x0b4ba374 0x0 + 189506420
    19  Lectio2                             0x0020a3a3 get_managed_object_for_ptr + 115
    20  Lectio2                             0x0020f230 monotouch_trampoline + 448
    21  Foundation                          0x0198ae8e _NSSetUsingKeyValueSetter + 82
    22  Foundation                          0x0198a9b7 -[NSObject(NSKeyValueCoding) setValue:forKey:] + 267
    23  Foundation                          0x019b5428 -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 412
    24  UIKit                               0x029420cc -[UIRuntimeOutletConnection connect] + 106
    25  libobjc.A.dylib                     0x04031663 -[NSObject performSelector:] + 62
    26  CoreFoundation                      0x0133d45a -[NSArray makeObjectsPerformSelector:] + 314
    27  UIKit                               0x02940bcf -[UINib instantiateWithOwner:options:] + 1327
    28  UIKit                               0x02805e37 -[UIViewController _loadViewFromNibNamed:bundle:] + 280
    29  UIKit                               0x02806418 -[UIViewController loadView] + 302
    30  UIKit                               0x02806648 -[UIViewController loadViewIfRequired] + 73
    31  UIKit                               0x02806882 -[UIViewController view] + 33
    32  UIKit                               0x02806b2a -[UIViewController contentScrollView] + 36
    33  UIKit                               0x0281def5 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 36
    34  UIKit                               0x0281dfdb -[UINavigationController _layoutViewController:] + 43
    35  UIKit                               0x0281e286 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 254
    36  UIKit                               0x0281e381 -[UINavigationController _startTransition:fromViewController:toViewController:] + 72
    37  UIKit                               0x0281eeab -[UINavigationController _startDeferredTransitionIfNeeded:] + 386
    38  UIKit                               0x0281efc9 -[UINavigationController _startDeferredTransitionIfNeeded] + 41
    39  UIKit                               0x0281c225 -[UINavigationController defaultFirstResponder] + 156
    40  UIKit                               0x02834082 -[UIResponder(Internal) _deepestDefaultFirstResponder] + 36
    41  UIKit                               0x0283409e -[UIResponder(Internal) _deepestDefaultFirstResponder] + 64
    42  UIKit                               0x0283413a -[UIResponder(Internal) _promoteDeepestDefaultFirstResponder] + 36
    43  UIKit                               0x0275ef14 -[UIWindow _makeKeyWindowIgnoringOldKeyWindow:] + 363
    44  UIKit                               0x0275eda4 -[UIWindow makeKeyWindow] + 41
    45  UIKit                               0x0275ef81 -[UIWindow makeKeyAndVisible] + 91
    46  UIKit                               0x02722fcc -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1797
    47  UIKit                               0x02723fab -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
    48  UIKit                               0x02735315 -[UIApplication handleEvent:withNewEvent:] + 1022
    49  UIKit                               0x0273624b -[UIApplication sendEvent:] + 85
    50  UIKit                               0x02727cf8 _UIApplicationHandleEvent + 9874
    51  GraphicsServices                    0x04d10df9 _PurpleEventCallback + 339
    52  GraphicsServices                    0x04d10ad0 PurpleEventCallback + 46
    53  CoreFoundation                      0x012b7bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    54  CoreFoundation                      0x012b7962 __CFRunLoopDoSource1 + 146
    55  CoreFoundation                      0x012e8bb6 __CFRunLoopRun + 2118
    56  CoreFoundation                      0x012e7f44 CFRunLoopRunSpecific + 276
    57  CoreFoundation                      0x012e7e1b CFRunLoopRunInMode + 123
    58  UIKit                               0x027237da -[UIApplication _run] + 774
    59  UIKit                               0x0272565c UIApplicationMain + 1211
    60  ???                                 0x0e917f75 0x0 + 244416373
    61  ???                                 0x0e914bc8 0x0 + 244403144
    62  ???                                 0x0e913f38 0x0 + 244399928
    63  ???                                 0x0e91408e 0x0 + 244400270
    64  Lectio2                             0x0000a762 mono_jit_runtime_invoke + 722
    65  Lectio2                             0x0016d2ee mono_runtime_invoke + 126
    66  Lectio2                             0x001714e4 mono_runtime_exec_main + 420
    67  Lectio2                             0x001768d5 mono_runtime_run_main + 725
    68  Lectio2                             0x00067c45 mono_jit_exec + 149
    69  Lectio2                             0x00205195 main + 2005
    70  Lectio2                             0x00003795 start + 53
    71  ???                                 0x00000004 0x0 + 4

=================================================================
Got a SIGABRT while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:43:39.293

它已被修复.. 这是用于读取/写入 txt 文件的方法 :) 无论如何感谢您的帮助！

# clickonce - C# - ClickOnce - 本地文件中的自动更新功能。

> ID：15500869
> 
> 赞同：0
> 
> 时间：2013-03-19T13:29:18.003
> 
> 标签：clickonce, auto-update

我有一个点击一次的应用程序。此应用程序的输出是一个文件（具有自定义扩展名。例如 .xyz）。只有当我通过桌面上的快捷方式访问此应用程序时，自动更新功能才可用。但是当我通过输出文件（或本地文件夹中应用程序的 exe）访问应用程序时，自动更新不起作用。我知道桌面快捷方式是一个 .appref-ms 文件，它首先访问服务器。请让我知道任何可用于获取此自动更新功能的选项，即使是从 exe/输出文件。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:10:48.613

您可以编写代码来检查 ClickOnce 应用程序是否有可用的更新。如果有可用更新，您可以以编程方式调用更新。这将在您的 exe 中工作，而不是使用快捷方式。

[如何：使用 ClickOnce 部署 API 以编程方式检查应用程序更新](http://msdn.microsoft.com/en-us/library/ms404263%28v=VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T01:14:54.537

无法运行 exe 并获得自动更新。您必须通过 appref-ms 快捷方式将其作为 ClickOnce 应用程序运行。当你这样做时，它会检查服务器上的部署清单是否有新版本，如果找到它就会安装它，然后运行应用程序。从 exe 运行，它甚至无法识别它是 ClickOnce 安装的应用程序。

# java - 多线程“死锁”Java中的套接字

> ID：15500872
> 
> 赞同：1
> 
> 时间：2013-03-19T13:29:19.890
> 
> 标签：java, multithreading, sockets, deadlock

我正在尝试在同一进程上启动服务器和客户端线程，但似乎服务器线程正在阻塞客户端线程（反之亦然）。我不允许在这些线程之间使用任何全局变量（如信号量或互斥锁，因为客户端和服务器线程是由我无权访问的上层启动的）。

[我在这里](https://stackoverflow.com/questions/8192733/it-seems-to-be-deadlock-two-socket-java-code)发现了一个类似的问题，但它仍然使用两个不同的过程（两个主要功能）。

这是我的代码示例

服务器代码：

```
public class MyServer implements Runnable{

    ServerSocket server;
    Socket client;
    PrintWriter out;
    BufferedReader in;

    public MyServer() throws IOException{
        server = new ServerSocket(15243, 0, InetAddress.getByName("localhost"));
    }

    @Override
    public void run() {
        while(true){
            try {

                ArrayList<String> toSend = new ArrayList<String>();

                System.out.println("I'll wait for the client");
                client = server.accept();
                out = new PrintWriter(client.getOutputStream(), true);
                in = new BufferedReader(new InputStreamReader(client.getInputStream()));

                String inputLine;
                while((inputLine = in.readLine()) != null){
                    toSend.add("answering : "+inputLine);
                }

                for(String resp : toSend){
                    out.println(resp);
                }

                client.close();
                out.close();
                in.close();

            } catch (IOException ex) {
            }

        }
    }
} 
```

和客户端代码：

```
public class MyClient implements Runnable{

    Socket socket;
    PrintWriter out;
    BufferedReader in;

    public MyClient(){
    }

    @Override
    public void run() {
        int nbrTry = 0;
        while(true){
            try {
                System.out.println("try number "+nbrTry);
                socket = new Socket(InetAddress.getByName("localhost"), 15243);

                out = new PrintWriter(socket.getOutputStream(), true);
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

                out.println("Hello "+nbrTry+" !! ");

                String inputLine;
                while((inputLine = in.readLine()) != null){
                    System.out.println(inputLine);
                }
                nbrTry++;
            } catch (UnknownHostException ex) {
            } catch (IOException ex) {
            }
        }
    }
} 
```

以及启动这些线程的假定上层阶级：

```
public class TestIt {

    public static void main(String[] argv) throws IOException{
        MyServer server = new MyServer();
        MyClient client = new MyClient();
        (new Thread(server)).start();
        (new Thread(client)).start();
    }
} 
```

它给了我作为输出：

```
I'll wait for the client
Try number 0 
```

它卡在这里。我应该怎么做才能保持服务器和客户端代码运行？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:20:32.723

我愿意回答你的问题，但基本上你需要更仔细地思考你的逻辑。

MyServer.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.ServerSocket;
import java.net.Socket;

public class MyServer implements Runnable {

  ServerSocket server;

  public MyServer() throws IOException {
    server = new ServerSocket(15243, 0, InetAddress.getByName("localhost"));
  }

  @Override
  public void run() {
    while (true) {
      try {
        // Get a client.
        Socket client = server.accept();

        // Write to client to tell him you are waiting.
        PrintWriter out = new PrintWriter(client.getOutputStream(), true);
        out.println("[Server] I'll wait for the client");
        // Let user know something is happening.
        System.out.println("[Server] I'll wait for the client");

        // Read from client.
        BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
        String inputLine = in.readLine();

        // Write answer back to client.
        out.println("[Server] Answering : " + inputLine);

        // Let user know what it sent to client.
        System.out.println("[Server] Answering : " + inputLine);

        in.close();
        out.close();
        client.close();
      } catch (Exception e) {

      }
    }
  }
} 
```

我的客户端.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

public class MyClient implements Runnable {

  Socket socket;
  PrintWriter out;
  BufferedReader in;

  public MyClient() throws UnknownHostException, IOException {
  }

  @Override
  public void run() {
    int nbrTry = 0;
    while (true) {
      try {
        // Get a socket
        socket = new Socket(InetAddress.getByName("localhost"), 15243);

        // Wait till you can read from socket.
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        String inputLine = in.readLine();
        //inputLine contains the text '[Server] I'll wait for the client'. means that server is waiting for us and we should respond.

        // Write to socket
        out = new PrintWriter(socket.getOutputStream(), true);
        out.println("[Client] Hello " + nbrTry + " !! ");

        // Let user know you wrote to socket
        System.out.println("[Client] Hello " + nbrTry++ + " !! ");

      } catch (UnknownHostException ex) {
      } catch (IOException ex) {
      }
    }
  }
} 
```

TestIt.java

```
import java.io.IOException;

public class TestIt {

  public static void main(String[] argv) throws IOException {
    MyServer server = new MyServer();
    MyClient client = new MyClient();
    (new Thread(server)).start();
    (new Thread(client)).start();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T14:24:45.063

您的客户端发送一个字符串，然后读取直到流用完：

```
 while((inputLine = in.readLine()) != null){ 
```

我记得 BufferedReader.readLine() 只在流的末尾返回 null 。在流上，它将阻塞直到输入可用

您的服务器接收直到流用完，然后发回其响应。

发送一行后，您现在拥有：

*   您的客户正在等待回复。
*   您的服务器仍在等待来自客户端的更多数据。但它不会发送任何东西，直到客户端的流结束（这永远不会发生，因为客户端正在等待您的响应）。

# javascript - 进行 mongo 更新时重复更新

> ID：15500874
> 
> 赞同：0
> 
> 时间：2013-03-19T13:29:22.197
> 
> 标签：javascript, mongodb

请在脚本下方找到更新集合中的字段

```
var limit = 500000;
var sourcecollections = db.sourcecollection.find().limit(limit);
sourcecollections.forEach(function(sourcecollection) {

log('Updating ');
db.sourcecollection.update({_id: sourcecollection._id}, {$set : {'ext.index': '.' + sourcecollection.ext.index, 'ext.value': '.' +sourcecollection.ext.value}});

}); 
```

这里的问题是每条记录发生多次更新，看起来像在 foreach 中循环不止一次。

有什么线索吗？

谢谢，普拉茨

# perl - 将击键发送到 linux 进程的 STDIN

> ID：15500879
> 
> 赞同：0
> 
> 时间：2013-03-19T13:29:28.263
> 
> 标签：perl, stdin, keystrokes

我有一个发布实时市场数据率的应用程序。此应用程序从命令行调用，并具有交互模式，用户可以通过简单地键入参数和相应的值来即时更改各种参数。

例如你的 2000

会将更新速率动态设置为每秒 2000 次更新。

我需要做的是进行几个小时/天的浸泡测试，并且我需要能够在随机时间将更新速率更改为不同的值。我通常使用 Perl 编写所有脚本，因此我需要一种调用脚本的方法（足够简单），然后让脚本能够随机更改任何给定参数（如更新率）。

任何想法或建议将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:47:44.390

您可以使用打开程序的管道`open my $fh, "|-", ...`，然后将句柄设置为自动刷新

```
select $fh;
$| = 1; 
```

现在，您可以直接连接到被测系统的标准输入，如下面的演示所示。

```
#! /usr/bin/env perl

use strict;
use warnings;
no warnings "exec";

my @system_under_test = ("cat");

open my $fh, "|-", @system_under_test or die "$0: open @system_under_test: $!";

select $fh;
$| = 1;  # autoflush

for (map int rand 2000, 1 .. 10) {
  print $fh "ur $_\n";
  sleep int rand 10;
}

close $fh or warn "$0: close: $!"; 
```

对于您的浸泡测试，您当然希望睡眠更多的时间间隔并多次迭代循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:47:11.453

您可以使用命令“mkfifo”。这将创建一个命名管道。如果您使用 fifo 作为输入启动程序，它应该可以工作。

创建一个先进先出：

```
mkfifo MyFifo 
```

使用 fifo 作为输入启动您的应用程序：

```
./yourAppName < MyFifo 
```

现在所有你写到“MyFifo”的东西（例如使用echo）都会被转发到yourAppName 的stdin。

# c# - Winform：具有另一种外观和感觉的单选按钮逻辑？

> ID：15500882
> 
> 赞同：0
> 
> 时间：2013-03-19T13:29:35.563
> 
> 标签：c#, .net, winforms, radio-button

我需要以另一种外观和感觉实现单选按钮逻辑（多种可能性，一种选择）。

外观应该与此类似： ![在此处输入图像描述](../Images/2b83e6150880e913615f77d733a6662c.png)

含义：一张图片、一个标题和一个简短的描述，没有单选按钮，但所选按钮的边框。

我想知道您是否知道任何可以执行此操作的现有组件（在 c# 或 devexpress 库中），或者我是否必须自己实现。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:33:49.497

这看起来像一个列表视图，而不是一个单选框。[请参阅此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.view.aspx)的MSDN 帮助。

View.Details 枚举：

> 每个项目出现在单独的行中，有关每个项目的更多信息按列排列。最左边的列包含一个小图标和标签，随后的列包含应用程序指定的子项。一列显示一个标题，该标题可以显示该列的标题。用户可以在运行时调整每列的大小。

View.Tile 枚举

> 每个项目都显示为一个全尺寸图标，其右侧有项目标签和子项目信息。出现的子项信息由应用程序指定。此视图仅适用于 Windows XP 和 Windows Server 2003 家族。在早期的操作系统上，该值被忽略，ListView 控件显示在 LargeIcon 视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:55:59.350

我终于找到了可以做这种行为的 DevExpress SimpleButton 组件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T20:13:34.767

使用 RadioButton 您可以设置 Appearance=Button，也可以使用 Image 属性。

# c# - 调整内容大小时，TableLayoutPanel 自动滚动到顶部

> ID：15500883
> 
> 赞同：0
> 
> 时间：2013-03-19T13:29:38.987
> 
> 标签：c#, winforms

我在**TableLayoutPanel**遇到了一个奇怪的问题。每当表格中的内容自行调整大小时，将最小化按钮缩小到仅标题），滚动条将自动滚动到**TableLayoutPanel**的顶部。我怎样才能防止这种情况？

**AutoSize**设置为**true**（因此表单将继续扩展新行 **AutoScroll**已在**true**和**false**上进行了测试。我现在将它们都设置为**false**。

调整大小的控件有一个单击的小框。单击该框时，它会在标题下方的主控制面板 ( **FlowLayoutPanel ) 上将****Visible**设置为**False 。**

 **我**不**希望**TableLayoutPanel**将自身滚动回顶部，我只希望它保持当前滚动。我在这里做错了什么？

编辑：修正错别字。太早了 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:34:20.693

最终通过在隐藏内容之前在控件上调用**Focus来解决此问题。****

# symfony - Doctrine (Symfony 2.0.x) createBuilder 一对多 - 不知道如何获得正确的实体

> ID：15500886
> 
> 赞同：3
> 
> 时间：2013-03-19T13:29:54.113
> 
> 标签：symfony, doctrine, dql, createquery

我现在在网上搜索了几个小时，但找不到以下（减少的）问题的解决方案：

我的 Symfony2 项目中有两个实体：

```
/**
 * @ORM\Entity(repositoryClass="myBundle\Entity\AppuserRepository")
 * @ORM\Table(name="appuser")
 */
class Appuser implements UserInterface {
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id = "";

    /**
     * @ORM\OneToMany(targetEntity="Watched", mappedBy="appuserReference")
     */
    protected $watches;

    // ________________________________________________________________________

    public function __construct() {
        $this->watches = new \Doctrine\Common\Collections\ArrayCollection();
    }

}
/**
 * @ORM\Entity
 * @ORM\Table(name="watched")
 */
class Watched extends WatchedAbstract {
    /**
     * @ORM\ManyToOne(targetEntity="Appuser", inversedBy="watches")
     * @ORM\JoinColumn(name="appuserReference_id", referencedColumnName="id")
     */
    protected $appuserReference;
} 
```

如何使用 queryBuilder oder createQuery 来获取所有用户，这些用户由几个 Watched-Entities 引用（即 ID 为 1、3 和 12 的用户；-)）？

这是在 MySql 中运行的 SQL，我无法将其“翻译”为 DQL：

```
SELECT * FROM appuser WHERE id IN (
    SELECT w.appuserReference_id 
        FROM watched w WHERE w.id IN (1, 3, 12)); 
```

我只是设法加入另一个方向，因为 Appuser-Entity 没有“手表”的相关列。我不能使用“appuserReference_id”或“appuserReference”来进行内部选择。

希望你能理解我，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:47:04.530

由于您的实体是相关的，因此您应该使用`JOIN`而不是多个`SELECT`s：

```
$repository = $this->getDoctrine()->getRepository('jwatchBundle:Appuser');

$query = $repository->createQueryBuilder('u')
                    ->join('u.watches', 'w')
                    ->where('w.id IN :watched_ids')
                    ->setParameter('watched_ids', array(1, 3, 12))
                    ->getQuery();

$result = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:44:56.577

据我所知，Sub-`SELECT`在 Doctrine 中是不可能的。

但是，当我理解您纠正这样的事情时，可以完成这项工作：

```
$query = $this->createQueryBuilder('a')
    ->where('a.watches in (1, 3, 12)')
    ->getQuery(); 
```

如果我错过了你的目标，请告诉我。

# asp.net - 是否为每个用户加载了 asp.net 应用程序中的媒体文件夹

> ID：15500888
> 
> 赞同：0
> 
> 时间：2013-03-19T13:29:58.050
> 
> 标签：asp.net, web-applications

我有一个媒体文件夹，其中包含我添加到我的 Web 应用程序的大约 1GB 数据。当用户开始会话时，是否为每个用户复制媒体？我应该将媒体文件夹放在应用程序文件夹之外吗？

```
Solution 'TestApp'
>  TestApp
   My Project
>  Media  ...(folder with about 1 gb of data)       
   Default.aspx
   Global.asax
   jquery-1.4.1.min.js
   Web.Config 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:47:23.947

我不知道任何称为媒体文件夹的特殊文件夹

. 此文件夹中的所有资源将提供给需要的用户。借助 IIS 和 Web 浏览器的缓存功能，所有内容甚至可能不会被提供两次。

这么简单：不！媒体文件夹的内容不会为每个会话加载到内存中。

默认情况下，IIS 直接提供静态内容。

[https://serverfault.com/questions/255849/iis-7-5-optimizations-for-a-site-serving-only-static-content](https://serverfault.com/questions/255849/iis-7-5-optimizations-for-a-site-serving-only-static-content)

[http://www.ckode.dk/server-configuration/tuning-iis-7-for-static-content/](http://www.ckode.dk/server-configuration/tuning-iis-7-for-static-content/)

# cmd - CMD 和窗口 ID

> ID：15500892
> 
> 赞同：0
> 
> 时间：2013-03-19T13:30:08.217
> 
> 标签：cmd, registry

我一直在谷歌搜索，什么都没有。你能告诉我如何使用 cmd 获取 Windows 产品 ID，因为如果我不想让某人使用我的程序，程序将退出，我想使用它。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:35:05.680

`wmic`可以为您获取产品 ID。

```
wmic os get serialnumber 
```

要将其刮到变量中：

```
for /f "tokens=2 delims==" %%I in ('wmic os get serialnumber /format:list') do set productid=%%I 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:23:24.247

您可以像这样从注册表中读取产品 ID：

```
reg query "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion" /v ProductId 
```

在较新的 Windows 版本上，您还可以从以下`systeminfo`命令获取信息：

```
systeminfo | find /i "product id:" 
```

# asp.net - ajax 选项卡容器 CSS 未正确显示

> ID：15500893
> 
> 赞同：1
> 
> 时间：2013-03-19T13:30:08.830
> 
> 标签：asp.net, css

我正在使用 AJAX 选项卡容器，如下所示。我有一个 CSS 来格式化标签面板标题。我在那里使用了图像（浅蓝色）。现在我想要两件事：1.我想摆脱虚线框 2.我希望选定的选项卡变成浅蓝色。（我知道背景中存在浅蓝色图像。只是它没有出现在选定的选项卡上）

![选项卡容器](../Images/eb7857752ef4a626f910180b44dc4870.png)

```
 <asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" 
                    CssClass="ajax__tab_lightblue-theme">
                    <asp:TabPanel runat="server" HeaderText="My Profile" ID="tbpnlMyProfile">
                        <HeaderTemplate>
                            My Profile</HeaderTemplate>
                        <ContentTemplate>
                            <table style="width: 100%;">
                                <tr>
                                    <td class="colwid colht">
                                         <strong><a href="#" id="lnkEditMyInfo" class="small-heading">Edit My Info</a>
                                        </strong>
                                    </td>
                                    <td>
                                        &nbsp;<asp:Label ID="lblFirstNameMyProfile" runat="server" Text="First Name"></asp:Label>
                                    </td>

.ajax__tab_lightblue-theme .ajax__tab_header 
{
font-family:arial,helvetica,clean,sans-serif;
font-size:small;
border-bottom:solid 5px #c2e0fd;
}
.ajax__tab_lightblue-theme .ajax__tab_header .ajax__tab_outer 
{
background-image:url('Images1/lightblue.jpg') #d8d8d8 repeat-x;
margin:0px 0.16em 0px 0px;
padding:1px 0px 1px 0px;
vertical-align:bottom;
border:solid 1px #a3a3a3;
border-bottom-width:0px;
}
.ajax__tab_lightblue-theme .ajax__tab_header .ajax__tab_tab
{    
color:#000;
padding:0.35em 0.75em;    
margin-right:0.01em;
}
.ajax__tab_lightblue-theme .ajax__tab_hover .ajax__tab_outer 
{
background-image: url('Images1/lightblue.jpg') #bfdaff repeat-x left -1300px;
}
.ajax__tab_lightblue-theme .ajax__tab_active .ajax__tab_tab 
 {
color:#000;
}
.ajax__tab_lightblue-theme .ajax__tab_active .ajax__tab_outer
{
background-image:url('Images1/lightblue.jpg') #ffffff repeat-x left -1400px;
}
    .ajax__tab_lightblue-theme .ajax__tab_body 
{
font-family:verdana,tahoma,helvetica;
font-size:10pt;
padding:0.25em 0.5em;
background-color:#ffffff;    
border:solid 1px #808080;
border-top-width:0px;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:35:36.863

由于您使用的是 AjaxToolKit，因此请在 CSS 中设置以下内容。

```
/*Remove the border from the TabStrip*/
.ajax__tab_lightblue-theme .ajax__tab_header 
{
    border-bottom:none;
}

/*Add a border to the active tab*/
.ajax__tab_lightblue-theme .ajax__tab_active .ajax__tab_outer
{
    border:solid 5px #c2e0fd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:55:19.793

虚线框来自轮廓，这是浏览器特有的功能，所有浏览器都以不同的方式呈现。您可以通过添加样式来禁用它`outline:none;`。话虽如此，我不推荐它，因为残疾人在浏览网站时会依赖它。

至于地址簿选项卡下的空间。这很可能是一些不需要的填充或边距。将地址簿的边距和填充设置为`padding:0;`，`margin:0;`看看会发生什么。

**回答您的评论：**

好吧，我没有看到“我的个人资料”和“通讯录”的标记。所以我假设这是一些“开箱即用”的 ASP.NET 东西。但是您需要将其添加到“我的个人资料”和“地址簿”链接。

**所以假设你生成的 HTML 是这样的：**

```
<ul>
   <li><a href="">My Profile</a></li>
   <li><a href="">Address Book</a></li>
</ul> 
```

**您可以像这样向您的元素添加一个类：（** *注意类 tabednav）*

```
<ul class="tabednav">
   <li><a href="">My Profile</a></li>
   <li><a href="">Address Book</a></li>
</ul> 
```

**然后将 CSS 添加到您的样式表中：**

```
.tabednav li a {outline:none;} 
```

# css - SVG中文本的背景颜色

> ID：15500894
> 
> 赞同：129
> 
> 时间：2013-03-19T13:30:13.047
> 
> 标签：css, svg, background-color

我想给 svg 的背景上色，`text`类似于`background-color`css

我只能找到关于`fill`文本本身的颜色的文档

甚至可能吗？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-06-01T13:14:52.063

不，这是不可能的，SVG 元素没有`background-...` [表示属性](https://developer.mozilla.org/en-US/docs/SVG/Attribute#Presentation)。

为了模拟这种效果，您可以在文本属性后面使用`fill="green"`或类似的东西（过滤器）绘制一个矩形。使用 JavaScript，您可以执行以下操作：

```
var ctx = document.getElementById("the-svg"),
textElm = ctx.getElementById("the-text"),
SVGRect = textElm.getBBox();

var rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    rect.setAttribute("x", SVGRect.x);
    rect.setAttribute("y", SVGRect.y);
    rect.setAttribute("width", SVGRect.width);
    rect.setAttribute("height", SVGRect.height);
    rect.setAttribute("fill", "yellow");
    ctx.insertBefore(rect, textElm); 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2015-06-23T21:03:37.293

您可以使用过滤器来生成背景。

```
<svg width="100%" height="100%">
  <defs>
    <filter x="0" y="0" width="1" height="1" id="solid">
      <feFlood flood-color="yellow" result="bg" />
      <feMerge>
        <feMergeNode in="bg"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  <text filter="url(#solid)" x="20" y="50" font-size="50">solid background</text>
</svg>
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2017-01-27T19:58:15.637

我使用的解决方案是：

```
<svg>
  <line x1="100" y1="100" x2="500" y2="100" style="stroke:black; stroke-width: 2"/>    
  <text x="150" y="105" style="stroke:white; stroke-width:0.6em">Hello World!</text>
  <text x="150" y="105" style="fill:black">Hello World!</text>  
</svg>
```

正在放置具有笔画和笔画宽度属性的重复文本项。笔画应该与背景颜色相匹配，并且笔画宽度应该足够大，以创建一个“splodge”，在上面写下实际的文本。

有点破解，有潜在的问题，但对我有用！

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-06-24T04:48:08.450

不，您不能为 SVG 元素添加背景颜色。您可以使用[d3](http://d3js.org/)以编程方式执行此操作。

```
var text = d3.select("text");
var bbox = text.node().getBBox();
var padding = 2;
var rect = self.svg.insert("rect", "text")
    .attr("x", bbox.x - padding)
    .attr("y", bbox.y - padding)
    .attr("width", bbox.width + (padding*2))
    .attr("height", bbox.height + (padding*2))
    .style("fill", "red"); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-01-10T18:58:01.363

可以使用标签而不是使用`<text>`标签 [`<foreignObject>`](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/foreignObject)，它允许使用 CSS 的 XHTML 内容。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-03-14T10:24:47.410

罗伯特朗森（@RobertLongson）的回答并进行了修改：

```
<svg width="100%" height="100%">
  <defs>
    <filter x="0" y="0" width="1" height="1" id="solid">
      <feFlood flood-color="yellow"/>
      <feComposite in="SourceGraphic" operator="xor"/>
    </filter>
  </defs>
  <text filter="url(#solid)" x="20" y="50" font-size="50"> solid background </text>
  <text x="20" y="50" font-size="50">solid background</text>
</svg> 
```

而且我们没有模糊，也没有沉重的“getBBox” :) 填充是由带有过滤器的文本元素中的空格提供的。它对我有用

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-12T05:19:19.983

您可以将过滤器与文本结合使用。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title>SVG colored patterns via mask</title>
  </head>
  <body>
    <svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <filter x="0" y="0" width="1" height="1" id="bg-text">
          <feFlood flood-color="white"/>
          <feComposite in="SourceGraphic" operator="xor" />
        </filter>
      </defs>
	  <!-- something has already existed -->
    <rect fill="red" x="150" y="20" width="100" height="50" />
    <circle cx="50"  cy="50" r="50" fill="blue"/>

      <!-- Text render here -->
      <text filter="url(#bg-text)" fill="black" x="20" y="50" font-size="30">text with color</text>
      <text fill="black" x="20" y="50" font-size="30">text with color</text>
    </svg>
  </body>
</html> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-19T20:10:17.100

这是我最喜欢的 hack（不确定它是否可以工作）。它引用了一个尚未显示的元素，并且效果很好

```
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 620 40" preserveAspectRatio="xMidYMid meet">
    <defs>
        <filter x="-0.02" y="0" width="1.04" height="1.1" id="removebackground">
            <feFlood flood-color="#00ffff"/>
        </filter>
    </defs>

    <!--Draw the text--> 
    <use xlink:href="#mygroup" filter="url(#removebackground)" />
    <g id="mygroup">
        <text id="text1" x="9" y="20" style="text-anchor:start;font-size:14px;">custom text with background</text>  
        <line x1="200" y1="18" x2="200" y2="36" stroke="#000" stroke-width="5"/> 
        <line x1="120" y1="27" x2="203" y2="27" stroke="#000" stroke-width="5"/> 
    </g>
</svg>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-05T11:28:05.790

对于那些想知道如何在文本元素具有[Robert 的答案](https://stackoverflow.com/a/31013492/4159337)中的背景时对其应用填充的人，请执行以下操作：

```
 <svg>
    <defs>
      <filter x="-0.1" y="-0.1" width="1.2" height="1.2" id="solid">
        <feFlood flood-color="#171717"/>
        <feComposite in="SourceGraphic" operator="xor" />
      </filter>
    </defs>
    <text filter="url(#solid)" x="20" y="50" font-size="50">Hello</text>
  </svg> 
```

在上面的示例中，过滤器的**x**和**y**位置可以按原样使用`transform: translate(-10%, -10%)`，**宽度**和**高度**值可以读取为`120%`和`120%`。所以我们将背景扩大了 20%，并将其抵消了 -10%，所以背景现在在文本的每一侧都扩大了 10%。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-09T18:37:19.563

先前的答案依赖于将文本加倍并且缺少足够的空格。

通过使用`atop`，`&nbsp;`我能够得到我想要的结果。

此示例还包括箭头，这是 SVG 文本标签的常见用例：

```
<svg viewBox="-105 -40 210 234">
<title>Size Guide</title>
<defs>
    <filter x="0" y="0" width="1" height="1" id="solid">
        <feFlood flood-color="white"></feFlood>
        <feComposite in="SourceGraphic" operator="atop"></feComposite>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
        <path d="M 0 0 L 10 5 L 0 10 z"></path>
    </marker>
</defs>
<g id="garment">
    <path id="right-body" fill="none" stroke="black" stroke-width="1" stroke-linejoin="round" d="M0 0 l30 0 l0 154 l-30 0"></path>
    <path id="right-sleeve" d="M30 0 l35 0 l0 120 l-35 0" fill="none" stroke-linejoin="round" stroke="black" stroke-width="1"></path>
    <use id="left-body" href="#right-body" transform="scale(-1,1)"></use>
    <use id="left-sleeve" href="#right-sleeve" transform="scale(-1,1)"></use>
    <path id="collar-right-top" fill="none" stroke="black" stroke-width="1" stroke-linejoin="round" d="M0 -6.5 l11.75 0 l6.5 6.5"></path>
    <use id="collar-left-top" href="#collar-right-top" transform="scale(-1,1)"></use>
    <path id="collar-left" fill="white" stroke="black" stroke-width="1" stroke-linejoin="round" d="M-11.75 -6.5 l-6.5 6.5 l30 77 l6.5 -6.5 Z"></path>
    <path id="front-right" fill="white" stroke="black" stroke-width="1" d="M18.25 0 L30 0 l0 154 l-41.75 0 l0 -77 Z"></path>
    <line x1="0" y1="0" x2="0" y2="154" stroke="black" stroke-width="1" stroke-dasharray="1 3"></line>
    <use id="collar-right" href="#collar-left" transform="scale(-1,1)"></use>
</g>
<g id="dimension-labels">
    <g id="dimension-sleeve-length">
        <line marker-start="url(#arrow)" marker-end="url(#arrow)" x1="85" y1="0" x2="85" y2="120" stroke="black" stroke-width="1"></line>
        <text font-size="10" filter="url(#solid)" fill="black" x="85" y="60" class="dimension" text-anchor="middle" dominant-baseline="middle"> 120 cm</text>
    </g>
    <g id="dimension-length">
        <line marker-start="url(#arrow)" marker-end="url(#arrow)" x1="-85" y1="0" x2="-85" y2="154" stroke="black" stroke-width="1"></line>
        <text font-size="10" filter="url(#solid)" fill="black" x="-85" y="77" text-anchor="middle" dominant-baseline="middle" class="dimension"> 154 cm</text>
    </g>
    <g id="dimension-sleeve-to-sleeve">
        <line marker-start="url(#arrow)" marker-end="url(#arrow)" x1="-65" y1="-20" x2="65" y2="-20" stroke="black" stroke-width="1"></line>
        <text font-size="10" filter="url(#solid)" fill="black" x="0" y="-20" text-anchor="middle" dominant-baseline="middle" class="dimension">&nbsp;130 cm&nbsp;</text>
    </g>
    <g title="Back Width" id="dimension-back-width">
        <line marker-start="url(#arrow)" marker-end="url(#arrow)" x1="-30" y1="174" x2="30" y2="174" stroke="black" stroke-width="1"></line>
        <text font-size="10" filter="url(#solid)" fill="black" x="0" y="174" text-anchor="middle" dominant-baseline="middle" class="dimension">&nbsp;60 cm&nbsp;</text>
    </g>
</g>
</svg> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-17T15:16:32.000

进一步使用@dbarton_uk [answer](https://stackoverflow.com/a/41902064/2937955)，为避免重复文本，您可以使用`paint-order=stroke`样式：

```
<svg>
  <line x1="100" y1="100" x2="350" y2="100" style="stroke:grey; stroke-width: 100"/>    
  <text x="150" y="105" style="stroke:white; stroke-width:0.5em; fill:black; paint-order:stroke; stroke-linejoin:round">Hello World!</text>
</svg>
```

请注意，`stroke-linejoin:round`这是避免看到 W 锐角尖峰所必需的。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-10-01T18:34:15.927

您可以为文本添加样式：

```
 style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); 
    text-shadow: rgb(255, 255, 255) -2px -2px 0px, rgb(255, 255, 255) -2px 2px 0px, 
     rgb(255, 255, 255) 2px -2px 0px, rgb(255, 255, 255) 2px 2px 0px;" 
```

白色，在这个例子中。在 IE 中不起作用 :)

# css - 时事通讯中的 Outlook 2007/2010 和 GMail 段落间距问题

> ID：15500897
> 
> 赞同：0
> 
> 时间：2013-03-19T13:30:22.873
> 
> 标签：css, html-email, outlook-2010, outlook-2007

我在 Outlook 2007/2010/2013 和 GMail 中得到双倍间距，但在其他地方看起来不错。我正在创建一个时事通讯，我尝试了各种方法：边框折叠、边距、填充、跨度，但仍然无法理解这一点。谁能看到我哪里出错了？我错过了什么吗？

下面的链接 - 源代码太长，无法在此处粘贴。对不起。

[http://pastebin.com/FW3RgYuv](http://pastebin.com/FW3RgYuv)

 `* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:11:11.690

其一，所有样式都必须是内联的。大多数邮件客户端不支持样式表。

您不是在构建网页，而是在构建电子邮件，因此您的 HEAD 部分中的所有内容都将被删除，包括您的嵌入式样式表。

在你的代码中你有`</br>`. 这不是一个有效的标签。使用`<br />`.

**永远不要**使用`!important`. 内联样式已经覆盖了其他样式，而且您可能会陷入死胡同。

将您的文本放在 DIV 或 P 中并设置样式，而不是 TD。并非每个邮件客户端都支持所有样式。[这是一个比较好的列表](http://www.campaignmonitor.com/css/)。`

# java - 考虑将序列化的 java 对象作为 JSON 存储到 cassandra 中。问题是什么？

> ID：15500898
> 
> 赞同：10
> 
> 时间：2013-03-19T13:30:27.033
> 
> 标签：java, json, cassandra

我正在使用 Cassandra 1.2.2。我发现使用 Jackson 将我的对象在 json 和 java 之间来回映射以存储在数据库中非常容易。我实际上很想对我的所有数据执行此操作。我的问题是，这是个好主意吗？这样做对我的应用程序有什么缺点。我的第一个猜测可能是更多的处理开销，但果汁值得挤压吗？还有我需要知道的其他缺点吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-19T17:05:50.087

一个缺点是，要修改必须读取原始数据、反序列化、进行更改、序列化和写出整个对象的数据。在 Cassandra 中，写入比读取更有效，因此如果可能的话，避免在写入之前先读取是有益的。

另一种方法是为 JSON 中的每个字段使用单独的列。您可以将复合列用于多维数据。

所以如果你有数据：

```
{
  name: "fred"
  address: "some town"
  age: 42
} 
```

并且您想更改地址，如果您将这些作为单独的 Cassandra 列，您只需插入一个名为 address 的列。如果您将 JSON 序列化，您将不得不做更多的工作。如果您的数据是一次性写入的，则这不适用。

即使您的数据是一次写入的，如果您只想从数据中读取一个字段，您可以在单独存储的情况下读取该列，而不是读取整个内容并反序列化。这仅适用于您要读取部分数据的情况。

总之，如果您必须更新数据或只想一次读取部分内容，则使用单独的列可能会带来显着的性能优势。

# iphone - 未调用 UIApplication 委托方法

> ID：15500902
> 
> 赞同：0
> 
> 时间：2013-03-19T13:30:37.860
> 
> 标签：iphone, ios, facebook, delegates

我在将 Facebook SDK 3.2 与我的应用程序集成时遇到问题，我的应用程序转到 facebook 应用程序进行审批和登录，但是当

```
 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation; 
```

facebook授权完成后需要调用，它只是跳过它。当我通过模态视图控制器强制 webView facebook 登录时效果很好，但是当我想使用已安装的 facebook 应用程序/safari 时它就不起作用。有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:37:25.077

确保将 UIApplicationDelegate 放在接口声明中。

```
@interface AppDelegate : NSObject <UIApplicationDelegate> 
```

还要验证其正确的 App 委托类

```
int main(int argc, char *argv[]) {

    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate");
    [pool release];
    return retVal;
} 
```

还要在 plist 中添加 fb Id。 ![在此处输入图像描述](../Images/56b2c11760a76fd069adf75b54d3efe0.png)

# entity-framework - 实体框架从数据库更新关系

> ID：15500905
> 
> 赞同：0
> 
> 时间：2013-03-19T13:30:42.647
> 
> 标签：entity-framework, entity-relationship, updatemodel

我有两个有关系的表，像这样的表：

第一个表：ProductionDemand --- ID(PK),Name,RevisionID(FK, not null)

第二个表：Revision --- ID(PK), Name

我通过使用两个表和其他表（大约 20 个表）创建模型

但是然后 RevisionID(FK, not null) 到 RevisionID(FK, null) 并从数据库更新模型，我从刷新选项卡中选择了 ProductionDemand 表。我建立了我的项目，但它失败了。我从未加载的外键和实体类中得到错误。

我希望你知道我的问题。

注：模型更新后，图中 1..* 的关系没有改变。它必须是 0..1 ....*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:44:27.193

您可以通过更新模型设计器中的关系属性将其手动更改为 0..1

# service - 多个应用程序单个配置文件

> ID：15500913
> 
> 赞同：0
> 
> 时间：2013-03-19T13:31:03.897
> 
> 标签：service, .net-4.0, app-config

我正在尝试编写服务和配置应用程序。VB/C++ 2010 我在 google 上获得了很多点击，但它们在很大程度上似乎已经过时了。到目前为止，我所拥有的是一个具有单个表单应用程序和一个服务应用程序的项目。单一表单应用程序有一个“app.config”文件，我添加了一个部分：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings file="settings.config">
    </appSettings>
</configuration> 
```

在解决方案中，我添加了一个“settings.config”文件，其内容为：

```
<?xml version="1.0" encoding="utf-8"?>
<appSettings>
    <add key="Setting1" value="This is Setting 1 from settings.config" />
    <add key="Setting2" value="This is Setting 2 from settings.config" />
    <add key="ConnectionString" value="ConnectString from settings.confg" />
</appSettings> 
```

我添加了对 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\Profile\Client\System.Configuration.dll 的引用

表单应用程序和服务应用程序中的库

在非常简单的表单应用程序中，我有以下代码

```
 Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load

        Dim s As String = _
 System.Configuration.ConfigurationManager.AppSettings("ConnectionString")
        TextBox1.Text = s
    End Sub 
```

它不起作用！现在很明显我错过了一些东西。它可能非常简单。但我有限的理解是，这是由我拥有的配置文件自动配置的？MS 以他们惯常的方式似乎只提供 2012 年和净 4.5 或更高的样本。我需要它才能在 2003 服务器上工作（以及）所以我仅限于 net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:36:19.447

这里的问题是该行`System.Configuration.ConfigurationManager.AppSettings("ConnectionString")`正在寻找`ConnectionString`应用程序`app.config`文件中的密钥。

您在 app.config 文件中包含该密钥这一事实`file`并不会神奇地告诉您`ConfigurationManager`从其他文件加载设置。如果这是您想要的，则必须读取`file`密钥的设置，然后从该文件手动加载配置。

自从 .Net 的早期版本以来，这并没有改变，所以我不确定为什么你会被这些例子所困扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:36:38.983

添加对现有程序集的`.Net section`引用`Add Reference Popup`

但我建议你`connectionStrings section`在你的配置文件中使用

```
<connectionStrings>
<add name="myConnectionString" connectionString="server=localhost;database=myDb;uid=myUser;password=myPass;" />
</connectionStrings>

string connStr = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString; 
```

# android - 如何在android中的bendenboski日期滑块小部件中设置日期范围

> ID：15500920
> 
> 赞同：1
> 
> 时间：2013-03-19T13:31:30.330
> 
> 标签：android, android-widget

我正在使用来自[Here的 DateSlider 小部件](https://github.com/bendemboski/DateSlider)

这是一个不错的小部件，但我想设置日期范围以选择日期，如何在此小部件中设置日期范围。我在此小部件中使用 MonthYearDateSlider。

或任何 datePicker 小部件在 android 中允许用户在某个范围内仅选择年份和月份。

# javascript - 使用 HTML5 Canvas + KineticJS 绘制完美的圆弧

> ID：15500925
> 
> 赞同：5
> 
> 时间：2013-03-19T13:31:38.557
> 
> 标签：javascript, html5-canvas, kineticjs, antialiasing, stroke

我目前正在尝试使用 KineticJS 画布框架绘制弧线。我遇到的问题是这些弧线并不像要求的那样“完美”圆形。

他们被抽出来如下：

```
var redArc = new Kinetic.Shape({
    drawFunc: function (canvas) {
        var ctx = canvas.getContext();
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI / 2, true);    // Arc of 270°
        canvas.fillStroke(this);
    },
    x: x,
    y: y,
    stroke: 'rgb(255,0,0)',
    strokeWidth: 20,
    offset: [x, y]
}); 
```

我知道这可能是个问题，因为没有在基于像素的介质上渲染近乎完美的圆形而不在笔划上使用抗锯齿

如果这个问题可以通过矢量图形渲染或是否有替代解决方案来解决，我一直在徘徊？

我已经包含了一个 JSFiddle 来概述这个问题，圆圈正在围绕它们的轴旋转。这种效果在弧线旋转时显得“摆动”时更加明显。

JSFiddle：http: [//jsfiddle.net/EHDFV/](http://jsfiddle.net/EHDFV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:12:06.717

摇晃会不会是一种视错觉。

在动画周围添加了一个静止的黑色圆圈。

```
var blackCircle = new Kinetic.Shape({
    drawFunc: function (canvas) {
        var ctx = canvas.getContext();
        ctx.beginPath();
        ctx.arc(x, y, (r + 10), 0, 2 * Math.PI, true);
        canvas.fillStroke(this);
    },
    x: x,
    y: y,
    stroke: 'rgb(0,0,0)',
    strokeWidth: 1,
    offset: [x, y]
}); 
```

您的摆动是否在任何时候穿过黑色圆圈或留下空隙？

新小提琴[http://jsfiddle.net/EHDFV/1/](http://jsfiddle.net/EHDFV/1/)

# xml - XPATH - 查找类型的节点 - 不要搜索子节点

> ID：15500926
> 
> 赞同：0
> 
> 时间：2013-03-19T13:31:39.493
> 
> 标签：xml, xpath

我不知道如何：

1 场景：在给定示例中仅找到父节点（包括所有子节点）“骨骼”-骨骼#1、骨骼#2、骨骼#3，而不是其他节点。

1.  场景：在给定的示例中找到所有“骨骼”，但通过删除其间不是骨骼的节点（示例中的一个）来保持层次结构完整。

示例（父骨骼不必处于同一级别：

```
<node>
    <bone id="1">
        <bone id="1.2">
            <node>
                <bone id="1.3">
                    <bone id="1.4"></bone>
                </bone>
            </node>
        </bone>
    </bone>
    <node>
        <bone id="2"></bone>
    </node>
    <bone id="3"></bone>
</node> 
```

在此先感谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:58:55.060

据我了解，此查询可能会对您有所帮助：`//bone[not(ancestor::bone)]`

# html - CSS 下拉菜单 z-index

> ID：15500933
> 
> 赞同：0
> 
> 时间：2013-03-19T13:32:03.853
> 
> 标签：html, css

我正在尝试做一个我用 Photoshop 设计的下拉菜单。但是，此菜单顶部有一个边框。图像，可以更好地解释它：

![我需要做的菜单](../Images/54db7762abc3b33fc4b33ea4ab7756e5.png)

使用 CSS，我得到的只是一条涵盖更多设计目标的行。我尝试使用 z-index 位置进行制作，但没有成功。看看我的代码：

 `````
nav{

    display: inline;
    font-weight:900;
    text-transform:uppercase;
    font-size:13px;
    margin-left:95px;
}
.menu > li > a {

    width:auto;
    padding:10px 20px 10px 10px;
    background-image:url('img/seta_menu.png');
    background-repeat:no-repeat;
    background-position:right 50%;
}

.menu>li{   

    width:auto;
    margin-right:45px;
    padding:10px;
    border-left: solid 1px #F8FAFA;
    border-right: solid 1px #F8FAFA;
    border-top:solid 1px #F8FAFA;
    border-bottom:solid 1px #F8FAFA;
}

.menu>li:hover{

    border-left: solid 1px #bdc9c5;
    border-right: solid 1px #bdc9c5;
    border-top:solid 1px #bdc9c5;
    border-bottom:solid 1px #bdc9c5;
    background-color:white;

}

nav>div{

    display:inline; 

}
nav>div>ul{

    display: inline;

}
.menu li{
    display: inline-table;
}
.menu>li:hover >ul{

    display:block;

}
.sub-menu{

    position:absolute;  
    display:none;
    padding:10px;
    margin-left:-11px;
    margin-top:10px;
    border-left: solid 1px #bdc9c5;
    border-right: solid 1px #bdc9c5;
    border-bottom:solid 1px #bdc9c5;
    /*border-top:solid 1px #bdc9c5;*/
    background-color:white; 

}

.sub-menu ol, ul {

    padding:0px;
    margin:0px;

}
.sub-menu > li{

    display:block;

} 
```` 

`[http://jsfiddle.net/btgfE/](http://jsfiddle.net/btgfE/)`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:58:32.813

Problem solved...

**jsfiddle**: [http://jsfiddle.net/btgfE/2/](http://jsfiddle.net/btgfE/2/)

1) uncomment the top border of the `.sub-menu`

2) comment out the bottom border of the `.menu>li:hover`

3) give `.sub-menu` the css rule `z-index:-1;`

4) decrease the `margin-top` of `.sub-menu` to `9px`

Really what this is doing is letting the top level menu item slightly overlap ontop of the sub-menu item's top border, giving the appearance you are looking for

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:39:17.670

我在这里编辑了你的小提琴：

[http://jsfiddle.net/btgfE/4/](http://jsfiddle.net/btgfE/4/)

我给了`.submenu`-1的a `z-index`，这修复了它。

我还更改了颜色，使它们更容易看到。您需要将绿色设置为白色，我这样做是为了让您可以看到边框位于子菜单边框的顶部``

# php - 在查询结果中使用 foreach() 而不是 while()

> ID：15500940
> 
> 赞同：1
> 
> 时间：2013-03-19T13:32:27.390
> 
> 标签：php, mysql, foreach

我有这个代码工作（我想）。

```
$sql = "SELECT
          order.id,
          order.date
        FROM
          order";
$result = mysql_query($sql) or die(mysql_error());
$rows = mysql_fetch_assoc($result);

foreach($rows as $row){
  echo $row['id'].": ".$row['date']."<br>";
} 
```

结果与我使用的结果相同：

```
while($row = mysql_fetch_assoc($result)){
  echo $row['id'].": ".$row['date']."<br>";
} 
```

但奇怪的是，今天它停止工作了。或者它从来没有，但后来我有点疯了。

我想使用 foreach() 因为数组 $rows 也可以“手动”填充，而不是来自查询。

我究竟做错了什么..？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:34:06.907

那从来没有（正确地）起作用。`mysql_fetch_assoc()`只返回一行，你`foreach`只是从结果集中迭代第一行的列。

如果`foreach`不首先使用`while`（或`for`）循环将结果行提取到数组中，则无法使用。

`foreach`如您所说，如果您想使用，请执行以下操作：

```
 $rows = array();
 while ($row = mysql_fetch_assoc($result)) {
     $rows[] = $row;
 }

 foreach ($rows as $row) {
     // ...
 } 
```

另外，[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:39:57.250

首先，值得知道这些`mysql_xx()`功能已被弃用；建议不要再使用它们，而是将代码切换到`mysqli`或`PDO`库。

现在，回答你的问题：

您不能`foreach`与函数返回的记录集一起使用`mysql_xxx()`。根本做不到。

但是，这两个替代 API (`mysqli`和`PDO`) 都将它们的记录集对象作为迭代器返回，这意味着您*可以*使用`foreach`它们来循环它们。

所以你的问题的答案是：如果你想使用`foreach`循环记录集，你需要切换到其他数据库 API 之一。

（作为奖励，如果您确实切换，其他 API 也提供了相当多的旧功能的额外`mysql_xx()`功能）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:35:16.530

`mysql_fetch_assoc`只读取单行。

这意味着`foreach`迭代单行的列。

# hadoop - 使用 HDFS+Map Reduce 的示例应用程序

> ID：15500944
> 
> 赞同：1
> 
> 时间：2013-03-19T13:32:34.600
> 
> 标签：hbase, hadoop, mapreduce, hiveql, piglatin, cloudera, vm, hadoop, , , windows, linux, i7, hadoop, mapreduce, hbase, hdfs, hiveql

我有一门学术课程“中间件”，涵盖了分布式软件系统的不同方面，包括对 [tag:Distributed File system] 等主题的介绍。这还涉及到[hbase](/questions/tagged/hbase "显示标记为“hbase”的问题")、[hadoop](/questions/tagged/hadoop "显示标记为“hadoop”的问题")、[mapreduce](/questions/tagged/mapreduce "显示标记为“mapreduce”的问题")、[hiveql](/questions/tagged/hiveql "显示标记为“hiveql”的问题")、[piglatin](/questions/tagged/piglatin "显示标记为“piglatin”的问题")的介绍。我想知道，我可以有一个尝试整合上述技术的小项目。对于初学者，我知道[cloudera](/questions/tagged/cloudera "显示标记为“cloudera”的问题")提供的[vm](/questions/tagged/vm "显示标记为“vm”的问题")用于体验[hadoop](/questions/tagged/hadoop "显示标记为“hadoop”的问题")和使用 Eclipse。我正在考虑实现一个接受事件流作为输入的应用程序，分析它并给出输出。

我的机器上有[windows](/questions/tagged/windows "显示标记为“windows”的问题") / [linux](/questions/tagged/linux "显示标记为“linux”的问题")，带有[i7](/questions/tagged/i7 "显示标记为“i7”的问题") procoessor和4Gb Ram。

请让我知道如何开始一切，欢迎对简单示例应用程序提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:06:37.927

[这](http://www.thecloudavenue.com/2013/03/analyse-tweets-using-flume-hadoop-and.html)是一篇关于使用 Hive/HDFS 分析推文的博客文章。这是一篇关于使用 Pig 和 Hive 执行点击流分析的博客文章[。](http://www.thecloudavenue.com/2013/03/clickstream-analysis-using-pig-and-hive.html)

[在这里](http://www.thecloudavenue.com/p/usecases.html)查看一些大数据用例并尝试解决一个有趣的问题。

# java - 配置 checkstyle 以忽略空的 catch 块

> ID：15500946
> 
> 赞同：4
> 
> 时间：2013-03-19T13:32:41.167
> 
> 标签：java, eclipse, checkstyle

在我的团队中，我们使用 checkstyle 来改进我们的编码标准，但现在我们遇到了一个可以改进的规则。

Empty Block 规则给我们一个关于空 catch 块的警告（没有 java 代码和没有注释），但在标准配置中，如果块包含注释，它也会生成一个警告。

例如

两者不应导致警告：

```
try {
    // some code
} catch (NumberFormatException ignore) {
    // ignore
}

try {
    // some code
} catch (NumberFormatException e) {
    logger.debug("some debug");
} 
```

这应该会导致警告：

```
try {
    // some code
} catch (NumberFormatException ignore) {

} 
```

如果 catch 块中没有注释且没有 java 代码，我们如何改进 checkstyle 以只给我们一个警告？

我寻找了一个解决方案，但我 stackoverflow 和谷歌没有任何解决方案。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T13:56:17.727

这个问题回答了如何定制 Checkstyle 的一般问题：

*   [如何禁用特定代码行的特定 checkstyle 规则？](https://stackoverflow.com/questions/4023185/how-to-disable-a-particular-checkstyle-rule-for-a-particular-line-of-code)

用于定制块检查的 Checkstyle 文档在这里：

*   [http://checkstyle.sourceforge.net/config_blocks.html](http://checkstyle.sourceforge.net/config_blocks.html)

而你需要的具体样式配置是：

```
 <module name="EmptyBlock">
    <property name="option" value="text"/>
    <property name="tokens" value="LITERAL_CATCH"/>
  </module> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-30T12:23:23.337

该问题已在[https://github.com/checkstyle/checkstyle/issues/571](https://github.com/checkstyle/checkstyle/issues/571)得到解决，新检查已创建 - EmptyCatchBlock - [http://checkstyle.sourceforge.net/config_blocks.html#EmptyCatchBlock](http://checkstyle.sourceforge.net/config_blocks.html#EmptyCatchBlock)

在配置 EmptyBlock 中，请移除 CATCH 令牌，因为验证将由不同的 Check now 完成

# asp.net-mvc - RedirectToAction 和 ActionLink 的差异导致 .post() 不起作用

> ID：15500950
> 
> 赞同：0
> 
> 时间：2013-03-19T13:32:55.293
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, url-routing

我有应用程序在登录后使用 RedirectToAction() 将用户从帐户控制器重定向到某个控制器的索引页面。

```
RedirectToAction("Index", "MyController"); 
```

它把我重定向到`//MyApp/MyController/`

我在 MasterPage 视图上也有导航，我使用 ActionLink：

```
@Html.ActionLink("Index", "SomeOtherController")
... (other links) 
```

这将我重定向到`//MyApp/SomeOtherController`

问题在于`**/**`第一条路线的尽头。我在 onClick 调用 jQuery .post() 的母版页上有 partialView。

```
function SomeFunction(id) {
    $.post("Controller/Action", { id: id },
        function () {
            ... some code
        });
} 
```

但是当我从登录重定向后调用该函数时，它会尝试访问此路由：

```
/MyController/Controller/Action 
```

那不存在。如果我将我的邮寄电话更改为

```
$.post("../Controller/Action",  ... 
```

它工作正常，但不适用于导航链接，因为它们`**/**`在路线尽头没有。

我该怎么办？如何从 RedirectToAction 和 ActionLink 获得独特的路径，无论`**/**`最后有还是没有？

笔记：

我可以`<a></a>`用于母版页上的导航并`**/**`在最后输入路径，但我宁愿使用 ActionLink

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:23:43.067

这里的关键是您需要 MVC 生成路由 URL，以便您传递到 jQuery 函数中。

1.如果您的 jQuery 代码嵌套在您的视图中，您可以执行以下操作：

```
function SomeFunction(id) {
    $.post('@Url.RouteUrl("Action", "Controller")', { id: id },
        function () {
            ... some code
        });
} 
```

2.如果您的 jQuery 代码位于外部文件（例如 myScripts.js）中，那么您将需要以某种方式将 MVC 生成的路由传递给您的 jQuery 函数。由于这不直接与元素绑定，因此最好将其设置为视图中的隐藏元素。

**看法**

```
<input type="hidden" id="jsRoute" value="@Url.RouteUrl("Action", "Controller")"/> 
```

**JS**

```
function SomeFunction(id) {
    $.post('$("#jsRoute").val()', { id: id },
        function () {
            ... some code
        });
} 
```

# amazon-web-services - AWS Elastic Mapreduce 优化 Pig 作业

> ID：15500954
> 
> 赞同：0
> 
> 时间：2013-03-19T13:33:00.707
> 
> 标签：amazon-web-services, apache-pig, boto, emr

我正在使用 boto 2.8.0 在存储在 S3 中的大型日志文件上创建 EMR 作业流。我对 Elastic Mapreduce 比较陌生，并且正在了解如何正确处理此问题的工作流。

有问题的日志文件存储在 s3 中，其键对应于它们从日志服务器发出的日期，例如：`/2013/03/01/access.log`. 这些文件*非常非常大*。我的 mapreduce 作业运行一个 Apache Pig 脚本，它只检查存储在日志文件中的一些 uri 路径并输出与我们的业务逻辑相对应的通用计数。

我在 boto 中的客户端代码将日期时间作为 cli 的输入，并为每个需要的日期安排一个带有`PigStep`实例的工作流。因此，传递类似的东西`python script.py 2013-02-01 2013-03-01`会迭代超过 29 天的 datetime 对象，并使用 s3 的相应输入键创建 pigsteps。`from_date`这意味着生成的工作流可能有很多很多步骤，在和之间的时间增量中每天一个`to_date`。

我的问题是我的 EMR 工作流程非常缓慢，几乎是荒谬的。它已经运行了一个晚上，甚至还没有完成该示例集的一半。我在创建许多这样的工作流程步骤时有什么问题吗？我是否应该尝试为不同的键概括猪脚本，而不是在客户端代码中对其进行预处理并为每个日期创建一个步骤？这是在 Elastic Mapreduce 上寻找优化的可行地方吗？值得一提的是，一项类似的工作需要将几个月的可比数据传递给 AWS `elastic-mapreduce`cli ruby​​ 客户端大约需要 15 分钟才能执行（这项工作是由同一个 pig 脚本推动的。）

**编辑**

不得不提的是，作业被安排在两个 m1.small 类型的实例上，诚然，这本身可能就是问题所在。

# java - 在 toString() 中使用 ∞ 而不是“无穷大”

> ID：15500959
> 
> 赞同：3
> 
> 时间：2013-03-19T13:33:18.517
> 
> 标签：java, numbers, special-characters, tostring, infinity

在打印/toString'ing浮点值（float，double，Float，Double）时，如何使Java使用∞符号而不是字符串“infinity”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T13:35:08.387

您不能更改默认`toString`方法，该方法不是用于用户显示，而是用于调试/记录。

但是您可以配置自己的[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)：

```
DecimalFormatSymbols symbols = new DecimalFormatSymbols(Locale.ENGLISH);
symbols.setInfinity("∞");
DecimalFormat decimalFormat = new DecimalFormat("#.#####", symbols); 
```

你像这样使用它：

```
String str = decimalFormat.format(myDouble); 
```

请注意，在负无穷大的情况下，格式化程序将自动添加减号。

# php - 如何将php var传递给js文件中定义的函数

> ID：15500961
> 
> 赞同：0
> 
> 时间：2013-03-19T13:33:21.243
> 
> 标签：php, javascript, function, parameters

如果我不向函数 myFunction 传递任何参数，它会很好地工作，但如果我传递一个像“$word”这样的参数，它就不起作用。

无参数：php 文件：

```
<?php
......
$word="bulabula";
$hint="<li onclick='myFunction()'>" . $word . "</li>";
......
echo $hint;
?> 
```

.html 文件：......

```
<script>
  function myFunction(){
  document.getElementById("s_form_q").value="bulabula";
}
</script> 
```

使用参数：php 文件：

```
<?php
......
$word="bulabula";
$hint="<li onclick='myFunction($word)'>" . $word . "</li>";
......
echo $hint;
?> 
```

.html 文件：......

```
<script>
function myFunction(str){
        document.getElementById("s_form_q").value=str;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:35:01.993

您需要引用您传递的参数：

和：

```
$hint="<li onclick='myFunction($word)'>" . $word . "</li>"; 
```

假设`$word`是`"hello"`，上面的行将输出：

```
<li onclick='myFunction(hello)'>hello</li> 
```

代替

```
<li onclick='myFunction("hello")'>hello</li> 
```

正确的用法是：

```
$hint="<li onclick='myFunction(\"$word\")'>" . $word . "</li>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:35:19.590

改变

`$hint="<li onclick='myFunction($word)'>" . $word . "</li>";`

到

`$hint="<li onclick='myFunction(\"$word\")'>" . $word . "</li>";`

`\`将转义您的参数，并将`$word`替换为其内容

# python - 使用 urllib 模块时出现 python 错误

> ID：15500964
> 
> 赞同：0
> 
> 时间：2013-03-19T13:33:29.917
> 
> 标签：python, module, urllib, urllib2

我正在使用 python http 横幅抓取器，`urllib`但它给了我一个错误。

我无法将其导入`urllib2`（未找到模块错误），因此尝试使用 with`urllib`代替。

这是代码，它有什么问题？

```
#!/usr/bin/env python
import urllib   
url=urllib.urlopen('www.bing.com')
print (url.info()) 
```

错误：

```
AttributeError: 'module' object has no attribute 'urlopen' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:34:18.687

您正在使用 Python 3；改为使用[`urllib.request`](http://docs.python.org/3/library/urllib.request.html)。

```
import urllib.request

url = urllib.request.urlopen('http://www.bing.com')
print(url.info()) 
```

这记录在[页面](http://docs.python.org/2/library/urllib2.html)[顶部`urllib2`](http://docs.python.org/2/library/urllib2.html)：

> **注意**：该[`urllib2`](http://docs.python.org/2/library/urllib2.html#module-urllib2)模块已在 Python 3 中的多个模块中拆分，命名为`urllib.request`和`urllib.error`. 在将源代码转换为 Python 3 时，该[`2to3`](http://docs.python.org/2/glossary.html#term-to3)工具将自动调整导入。

# iphone - 为什么我的网站在我的 iPhone Safari 浏览器上看起来不同，我做错了什么吗？

> ID：15500967
> 
> 赞同：0
> 
> 时间：2013-03-19T13:33:36.170
> 
> 标签：iphone, html, css, xhtml, safari

我已经完成了 HTML 网站的设计，并在 Windows 计算机上查看了适用于 Google Chrome、Safari、IE 9、Firefox 和 Opera 网络浏览器的结果。在 Android 设备（三星 S3）上查看我的网站时，结果与在台式 PC/MAC 上查看的结果相同，但在我的 iPhone 5 或我的朋友 iPhone 4s 上查看时，结果不同。有些文本被放大了，而有些则没有。我很困惑，我希望有人能尽快帮助我。

期待您的回复，并亲自了解我的意思：

```
 Visit http:///www.islandtoislandshipping.com 
```

代码 HTML：

```
 <p id="intro">Island to Island Shipping and Removal LTD is a developing 
        organisation keen to<br />provide a high standard of service to its 
        customers. The company specialises in worldwide shipment of any household                 
        products or any goods, however, we<br />specialise directly to the Caribbean  
        (but that is not our limitation!). Island to Island Shipping and Removal LTD 
        provide an efficient, reliable and prosperous service<br />ensuring the highest  
        care is taken to in the process of delivery.</p>

        <img id="aim" src="imgs/aim.png" width="450" height="174" />

    <p>
    <br />As a company, we aim to provide our clients with all the 
    services they<br />require, from practical (shipping, removals) 
    to advise on packing materials<br />and household maintenance. 
    </p>

    <p id="stafftext">All our staffs are very friendly and courteous,<br />feel free to      
    discuss any queries you may have<br />and they will be happy to help. We are a<br   
    />dedicated team aiming to provide a stress<br />free experience for our customers.
    </p> 
```

代码：

```
#intro{
position:relative;
margin-top:20px;
}

#aim{
margin-top:20px;
}

#stafftext {
position:relative;
margin-left:190px;
margin-top:90px;
 }

.staffimg {
margin-top:-100px;
}

#link1 {
position:relative;
margin-left:130px;
bottom:130px;
text-align:center;
font-size:9px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T18:59:29.553

iPhone 浏览器不喜欢分割边距或填充 css 样式。尝试使用连接边距/填充方式。

而不是写：

```
margin-top: 90px;
margin-left: 190px; 
```

尝试：

```
margin: 90px 0 0 190px; 
```

那是边距：右上左下；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:54:49.853

我会尝试添加`-webkit-text-size-adjust: 100%`到`body`您的 CSS 中。它将禁用 iOS 设备上的文本大小调整。

[https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust](https://developer.mozilla.org/en-US/docs/CSS/text-size-adjust)
[http://blog.55minutes.com/2012/04/iphone-text-resizing/](http://blog.55minutes.com/2012/04/iphone-text-resizing/)

# php - PHP：如何捕获或跟踪在单页加载中调用的所有方法？

> ID：15500968
> 
> 赞同：0
> 
> 时间：2013-03-19T13:33:39.340
> 
> 标签：php, magento

假设我正在加载一些页面。这个页面使用了几个带有一些方法和变量的类。例如，我如何跟踪这些方法，我的意思是文件、行和时间？我正在做一些研究，我在 PHP 中找到了 debug_backtrace 函数，但我只是想知道是否还有其他方法可以做到这一点？我也想在magento中采用这个功能。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:28:49.447

试试看 - [https://github.com/facebook/xhprof](https://github.com/facebook/xhprof)

XHProf 是 PHP 的函数级分层分析器，具有基于 HTML 的简单用户界面。原始数据收集组件是用 C 语言实现的（作为 PHP 扩展）。报告/UI 层全部使用 PHP。它能够报告函数级调用计数以及包含和排除的挂墙时间、CPU 时间和内存使用情况。此外，它还支持比较两次运行（分层 DIFF 报告）或汇总多次运行的结果。XHProf 最初在 Facebook 开发，于 2009 年 3 月开源。

非常有用的东西！

# jpa - JPARepository 是否使用方法返回类型来查找目标表？

> ID：15500970
> 
> 赞同：0
> 
> 时间：2013-03-19T13:33:42.717
> 
> 标签：jpa, spring-data, spring-data-jpa

这似乎有效，但我希望有人确认这一点：

我的实体有一个基类 BaseEntity 。

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public abstract class BaseEntity {
...
} 
```

然后我有几个实体，比如从 BaseEntity 扩展的 A、B 和 C。此外，我有一个 JPARepository 定义为：

```
JPARepository<BaseEntity, Long> 
```

现在**看起来**我可以使用这个存储库来分别查询表 A、B 或 C，只需更改返回类型。例如：

```
public List<B> findBsByNameContaining(String name); 
```

将产生一个仅从表 B 中选择行的查询。

这真的是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:48:36.847

如果您提供您在存储库接口级别声明的类型的子类型，我们将使用它来执行查询（阅读：本质上是触发器`em.createQuery(typeReturnedByTheMethod)`）。如果返回的类型*不是*存储库管理的域类的子类型，我们仍将使用普通域类型。

# android - 来自 VFR 图像序列的视频

> ID：15500974
> 
> 赞同：2
> 
> 时间：2013-03-19T13:33:51.370
> 
> 标签：android, ffmpeg, android-camera, frame-rate

我正在使用`ffmpeg`从 Android`Camera`的`PreviewCallback`方法中获取的图像序列创建视频`onPreviewFrame`...

使用以下命令将图像写入连接到的管道`ffmpeg`：`stdin`

`ffmpeg -f image2pipe -vcodec mjpeg -i - -f flv -vcodec libx264 <output_file>`

出现的问题是输出视频与实际录制时间相比非常短，并且所有帧都显示得非常快......

但是当帧大小设置为支持的最低预览大小时，视频似乎与实际录制时间同步......

据我估计，这似乎是与输入图像序列的帧速率和输出视频的帧速率有关的问题......

但主要问题是生成的帧`onPreviewFrame`具有可变速率......

有什么方法可以从具有可变帧速率的图像序列构建平滑的视频......？

此外，图像序列与来自麦克风的音频混合在一起，这似乎也与视频不同步......

使用上述过程生成的视频和来自麦克风的音频是否可以完美同步地混合...？

# java - 如何在下拉列表中显示默认选项

> ID：15500975
> 
> 赞同：1
> 
> 时间：2013-03-19T13:33:52.290
> 
> 标签：java, html, struts

给定

```
<html:select property="loginPathId" style="width:190px">
    <option value=""></option>
    <html:optionsCollection property="loginPath" value="id" label="displayName"/>
</html:select> 
```

现在，它是一个默认值为空的下拉列表。默认情况下，我如何使用 say 填充它`option value=1`？

这可以在**不**使用 jQuery 的情况下完成，而只使用 struts、java、javascript 和 html 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:35:35.133

在您想要选择的选项内：

```
<option selected="selected">value</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:37:54.343

```
<html:select property="status" value="...your status choise here...">
  <html:optionsCollection name="loginPath" label="displayName" value="id" />
</html:select> 
```

# language-agnostic - 构建不以文件为中心的系统

> ID：15500984
> 
> 赞同：2
> 
> 时间：2013-03-19T13:34:11.607
> 
> 标签：language-agnostic, automation, build-automation

我们有一个软件基础设施，其工作方式与软件构建系统非常相似：信息从不同来源收集并用于生成一些输出。与传统的软件构建一样，我们有不同类型的输出、依赖树等。

主要区别在于我们的源、中间结果和输出不是天生基于文件的。相反，它们是（唯一可寻址的）数据对象。

现在，我们正在结合传统的构建系统 (SCons) 将我们的数据结构映射到文件和目录，但这并不能扩展，无论是性能还是（更重要的是）可维护性。因此，我正在寻找一种从头开始为此目的而构建的基础设施。

作为说明，假设您有 3 个 XML 文档`A`，`B`并且`C`. 假设`B/foo/bar`要从`A/x/y`和计算`A/x/z`，同样`C/a/b`是从 计算`A/x/y`。我需要一个基础设施来

1.  实现这些关系（即转换及其依赖关系）
2.  更改后自动重新构建相关部分

使用文件的一个主要问题是，如果我将 和 映射到某些文件`A`，并且使用传统的构建系统，那么任何*对*的更改都会触发和的重建，即使和（的原始依赖项）没有被修改。因此，对于细粒度的依赖解决方案，我需要将每个映射，而不是映射到文件，而是映射到每个子目录代表一个元素，文件代表属性等的目录。正如我所说，这不适用于我们。`B``C``A.xml``B.xml``C.xml`*`A.xml``B.xml``C.xml``A/x/y``A/x/z``B``A``B``C`*

 *（请注意，我们的系统实际上并不是基于 XML）

现在，我正在寻找任何指向这个方向的现有软件、基础设施或概念，无论实现语言和底层数据结构如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T18:55:56.257

因此，没有什么可以完全解决您的问题，但是有一些工具可能会让您比现在更接近一点：

1）您也许可以使用 Fuse 将一些东西放在一起，这样您就可以更好地控制数据对象如何映射到文件。Fuse 基本上允许您从所需的任何支持数据构建任意文件系统。（[python 绑定](http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FUSE_Python_tutorial)非常友好，但也有许多其他语言接口可用）。然后，您可以使用传统的构建工具，并利用与您的数据更好地关联的文件之类的对象。

2) Cmake 有一种非常可扩展的语言来编写自定义目标，您可能可以将其投入使用。不幸的是，它的语言非常具有教学性，并且学习曲线陡峭，所以它不是我的首选。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:29:22.357

听起来您需要像[GemStone/S这样的活动对象数据库管理系统 (](http://www.gemstone.com/products/gemstone) [ODBMS](http://en.wikipedia.org/wiki/Object_database) ) 。ODBMS 提供传统的持久性服务，没有将数据结构映射到文件的旧成本以及对象技术的众所周知的好处。正如您提到的依赖树和可寻址对象，在 ODBMS 中，导航引用作为其数据的一部分存储，允许表示/访问对象之间的任何复杂交互模式。当您预测使用继承、对象嵌套和交叉引用的系统时，尤其如此。

尽管对象引擎对于您的要求来说可能看起来过大，但对于大型生产业务系统来说，在并发和多用户环境中使用 OODBM 存储和执行方法是很常见的。它不是免费的，因为你必须投资于等式中的人性部分（教育和经验），但一旦克服了最初的恐惧，它就会获得投资回报。

对于在进行更改（来自播音员的通知）后重新构建（订阅）部分，您可以使用[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)或其变体之一（[SASE](http://www.object-arts.com/downloads/papers/ExtendingSUnitToTestSASEEvents.pdf)或[公告框架](http://www.cincomsmalltalk.com/userblogs/vbykov/blogView?showComments=true&entry=3310034894)）来实现您的公告/订阅架构。正如您已经注意到的那样，在这种类型的事件框架下，存在传统的基于文件的解决方案难以解决的内在问题。例如，依赖机制通常管理一个对象的替换，或者在您的示例中，一个 XML 文档被另一个替换。任何现代事件框架都应该在删除对象时进行管理，插入旧对象的所有依赖项都更新为新引用。

最后，还有一个免费的[GemStone/S 堆栈](http://seaside.gemstone.com/downloads.html)，其中包含对象依赖框架，因此您可以尝试使用真正的对象数据库。*

# html - 更新视图时执行特定于视图的 javascript

> ID：15500989
> 
> 赞同：2
> 
> 时间：2013-03-19T13:34:24.060
> 
> 标签：html, angularjs

我一直在尝试找出如何在模型发生更改时执行一些特定于视图的 javascript 代码。在下面的示例中，每当您单击“Say”按钮时，都会向模型添加一个新条目，从而更新条目列表。样式表将条目列表的高度限制为大约五个条目。

调用类似的正确方法是什么`scrollLastChatEntryElementIntoView();`？我知道如何将元素滚动到视图中，但我似乎找不到任何有关如何以及何时响应视图更新的信息？我应该在哪里声明脚本，什么时候应该调用它？

```
<div class="chat">
   <ol class="entries">
      <li class="entry" ng-repeat="entry in chat.entries">
         <label>{{entry.sender}}</label> {{entry.text}}
      </li>
   </ol>
   <form class="newEntry" ng-submit="chat.newEntry.submit()">
      <input class="text" ng-model="chat.newEntry.text" placeholder="Type to chat"/>
      <span class="button submit" ng-click="chat.newEntry.submit()">Say</span>
   </form>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:17:03.133

我最近遇到了类似的情况，我这样做的方式是创建一个“自动滚动”指令，该指令正在侦听列表元素上的“DOMSubtreeModified”事件，并在添加新元素时自动向下滚动。

```
app.directive('autoScrolling', function() {
    return {
        restrict: 'A',
        link: function(scope, element, attrs) {

            var el = angular.element(element);

            scope.scrollDown = function(evt) {
                // scroll down:
                el.scrollTop(el.prop('scrollHeight'));
            };

            scope.scrollDown();
            // each time the DOM element of the list changes, 
            // make sure we are scrolled all the way down...
            element.bind('DOMSubtreeModified', scope.scrollDown);
        }
    };  
}); 
```

然后在你的列表元素上

```
<ol auto-scrolling>... 
```

[plnkr 演示在这里](http://plnkr.co/edit/BUZinQ?p=preview)

# java - 在 Jtable 中搜索文本字段中的值

> ID：15500990
> 
> 赞同：0
> 
> 时间：2013-03-19T13:34:27.660
> 
> 标签：java, swing, jtable, jtextfield, rowfilter

如果有人可以帮助我解决这个问题，我将不胜感激。

我正在尝试在我的 JTable（显示数据库表中的数据）中搜索 JtextField 中的用户条目。

如果字段是文本，则搜索方法将搜索文本是否包含条目。

一旦找到匹配项（无论哪个字段包含它），我希望表格重新排列行以显示包含开头的 textField 值的行。

# android - Android - xml 布局作为背景

> ID：15500996
> 
> 赞同：8
> 
> 时间：2013-03-19T13:34:37.297
> 
> 标签：android, android-layout, android-drawable

是否可以制作由多个图像/比例/对齐组成的xml背景？所以有一个复杂的可绘制 xml 可用作 android 布局的背景。

例如，这是我想做的动态 xml 背景： ![在此处输入图像描述](../Images/9d0230e20c2244ec9b266e52dfd78a1c.png)

因此，对于我所有不同的活动，将我不同的布局/视图放在上面： ![在此处输入图像描述](../Images/8ea41b35e1361c6d9f6325db370c272b.png)

我知道我不能将布局设置为*layout_background*，但这是我想做的设计（根据以前的图片）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background_image" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/main_image" />
        </RelativeLayout>

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="2" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="50dp"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:src="@drawable/footer_image" />
        </RelativeLayout>
    </LinearLayout>

</RelativeLayout> 
```

我看到我们可以将位图设置为可绘制的 xml，但是用于缩放和对齐？有没有更简单的方法来进行这种视觉渲染？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T13:46:58.727

您可以根据需要创建一个布局， `dynamic xml background`并且可以像这样[包含](http://developer.android.com/training/improving-layouts/reusing-layouts.html)在后面的所有屏幕中`RelativeLayout`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width=”match_parent”
    android:layout_height=”match_parent”
    android:background="@color/app_bg"
    android:gravity="center_horizontal">

    <include layout="@layout/my_dynamic_layout"/>

    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

    ...Your layout code ...

    </RelativeLayout >

</RelativeLayout > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:58:41.470

我很确定您的要求是什么，假设您想将一些具有不同图像的 xml 文件放在一个 xml 文件中，我将给出答案。

根据您的要求创建 3 个布局，然后在要放置这 3 个布局的位置创建一个主布局。

-

*   例如：假设你有

一个.xml

二.xml

三.xml

并假设您已根据您的要求将您选择的背景应用于上述所有布局

现在在 main.xml

```
< LinearLayout
---
--->
< include
android:layout_width="fill_parent" android:layout_height="wrap_content"
layout="@layout/one.xml" />
< include
android:layout_width="fill_parent" android:layout_height="wrap_content"
layout="@layout/two.xml" />
< include
android:layout_width="fill_parent" android:layout_height="wrap_content"
layout="@layout/3.xml" />
< /LinearLayout> 
```

根据您的要求安排布局，如果您需要按一定百分比划分这些布局，请使用 weight=".50"

希望它对你有用。

# node.js - express js 需要来自另一个文件的 url

> ID：15500997
> 
> 赞同：0
> 
> 时间：2013-03-19T13:34:38.890
> 
> 标签：node.js, express, coffeescript

我有这个：

./urls.coffee

```
urlConfig = [
    ["/", (req, res) -> res.send "hello world"]
]
module.exports = urlConfig 
```

./utils/helpers.coffee

```
getUrl = (app, urlconfig)->
    for url in urlconfig
       app.get url[0], url[1]
module.exports.getUrl = getUrl 
```

./app.coffee

```
express = require "express",
app = express();
helper = require "./utils/helper"
urls = require "./urls"

helper.getUrl app, urls 
```

我试图`url`通过`app.coffee`在另一个文件中定义它来区分`url.coffee`。

但是回调不能接收`(req, res)`参数，错误是： `req is not defined`，但是如果回调没有接收到参数，它工作正常。有人有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:43:07.717

不应该是这样的：

```
var express = require "express",
helper = require "./utils/helper"

app = express();
app.get = helper.getUrl 
```

?