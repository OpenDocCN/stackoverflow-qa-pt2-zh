# StackOverflow 问答 12621000-12621999

# jquery - jQuery .not() 方法是否需要 CSS 选择器

> ID：12621000
> 
> 赞同：0
> 
> 时间：2012-09-27T12:06:58.163
> 
> 标签：jquery, html, jquery-selectors

除了许多其他`a`类元素，我还有一个带有标记的链接

`<a class="editLink" href="www.somelink.com"> Edit <\a>`

我想`a`使用 jQuery 选择每个元素，除了这个`editLink`类中的元素。

所以我使用`a.not(".editLink")`了 jQuery 选择器，它工作得很好。但是我注意到当我这样做时这也`a.not("editLink")`有效`a.not("#editLink")`

就像 jQuery 忽略了作为`not()`方法参数的一部分传递的 CSS。文档建议有必要传递 id/class CSS，但据我所知，这是不必要的。

任何人都可以对此有所了解吗？我是愚蠢还是发生了什么魔术？

谢谢

* * *

更新 - 好的，我认为我的语法有误。我在做：

```
$("p, a.not(".editLink")").click()... 
```

应该是什么时候

```
$("p, a").not("a.editLink").click()... 
```

所以我的坏。有趣的是，虽然原版确实选择了除`editLink`类中的元素之外的所有 a 元素。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:12:55.040

它确实需要一个选择器字符串。它只是将`"editLink"`其视为代表一个名为 的元素的选择器字符串，`<editLink>`显然您的`<a>`元素不是。

所以，你的代码`a.not("editLink")`“工作”......只是不是你期望它的方式：而不是过滤掉那些没有具有该名称的类的元素，它什么都不做，因为所有`<a>`元素都不是`<editLink>`元素。而且，如果您的`<a>`元素都没有具有该名称的 ID，那么`a.not("#editLink")`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T12:10:42.980

你也可以像这样使用 CSS：`$('a:not(.editLink)')`

# objective-c - 自定义标签栏大小

> ID：12621004
> 
> 赞同：1
> 
> 时间：2012-09-27T12:07:22.327
> 
> 标签：objective-c, ios5, uitabbar

我正在制作一个自定义标签栏，我添加了一个 320x82 背景图像，并且对于每个标签，我都有一个高度为 82 的选择图像。问题是当标签栏框架与背景高度 (82) 匹配时，它会得到一种阴影，它不在原始布局上，并且选择图像未对齐。这里我如何设置我的标签栏：

```
 self.tabBatController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:myView1, myView2, myView3, nil];

    UIImage *tabBackground = [[UIImage imageNamed:@"tab_bar_background"] resizableImageWithCapInsets:UIEdgeInsetsMake(0,0,0,0)];
    [[UITabBar appearence] setBackgroundImage:tabBackground];

    UITabBar *tabBar = self.tabBarController.tabBar;

    CGRect viewFrame = tabBar.frame;
    viewFrame.origin.y -=41; //the correct position of the tab bar
    viewFrame.size.height = 82; //the correct height
    tabBar.frame = viewFrame;

    UITabBarItem *item1 = [tabBar.items objectAtIndex:0];
    UITabBarItem *item2 = [tabBar.items objectAtIndex:1];
    UITabBarItem *item3 = [tabBar.items objectAtIndex:2];

//this set of images are not aligned with the tabs
    [item1 setFinishedSelectedImage:[UIImage imageNamed:@"tab1_selected"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab1_unselected"]];

    [item2 setFinishedSelectedImage:[UIImage imageNamed:@"tab2_selected"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab2_unselected"]];

    [item3 setFinishedSelectedImage:[UIImage imageNamed:@"tab3_selected"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab3_unselected"]]; 
```

该选项卡具有正确的大小，但它具有此阴影和未对齐的选择图像。我该如何纠正？

# php - PHP：替换一个unicode符号

> ID：12621011
> 
> 赞同：0
> 
> 时间：2012-09-27T12:07:46.117
> 
> 标签：php, string, unicode, utf-8

`$str = str_replace ('–', '-', $str);`不起作用（如我所愿，较长的 Unicode 破折号字符不会替换为减号字符。

$str 是从数据库中读取的，应该是 UTF-8 格式。

PHP 代码从 Apache 服务器运行。

我需要用减号替换所有这些长破折号。

* * *

```
$破折号=“–”；
回声“字符串：”。bin2hex($str) 。“，破折号：”。bin2hex($dash) 。"\n";
回声“字符串：”。$str 。“，破折号：”。$破折号。"\n";

string: 5a656c626f726166202623383231313b20d0bdd0bed0b2d18bd0b920d0bfd180d0b5d0bfd0b0d180d0b0d18220d0b4d0bbd18f20d0bbd0b5d187d0b5d0bdd0b8d18f20d0bcd0b5d0bbd0b0d0bdd0bed0bcd18b, dash: e28093
字符串：Zelboraf – новый препарат для лечения меланомы，破折号：–</pre>

出了什么问题（不是正确的 UTF-8）：字符串还是破折号？

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:12:11.423

这是一个编码为“-”的 HTML 实体 :-) 那是我的失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:27:26.207

```
<?php

$str = 'Test–asd';

$old = '–';
$new = '!';

$str = str_replace ( $old, $new, $str );

echo $str;

?> 
```

这对我来说很好：

输出：

```
Test!asd 
```

似乎您有不同编码的问题，而不是 UTF8 字符更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:10:06.427

**EDIT:**

try this:

```
$str = str_replace('\xe2\x80\x94', '-', $str); 
```

* * *

Try:

```
$str = str_replace(chr(150), '-', $str);    // endash 
```

or

```
$str = str_replace(chr(151), '-', $str);   // emdash 
```

I think that the second one suits you more.

# java - Android - Eclipse 使用 SDK 2.2 上的项目构建/运行速度很慢

> ID：12621018
> 
> 赞同：1
> 
> 时间：2012-09-27T12:07:58.067
> 
> 标签：java, android, eclipse, android-2.2-froyo

我一直在开发我的 Android 应用程序，最初的目标是 2.1 版（API 级别 7）。我现在更改了`min/target SDK to 2.2 (API level 8)`以支持 Google `Cloud Messaging`。

自从这个改变以来，我注意到在 Eclipse 中构建和运行项目的时间大大增加了。

我不使用模拟器（反正太慢了）并直接运行到我的手机上，当我只对一个 .java 文件进行微小更改时，构建/运行最多需要 20 秒。以 2.1 为目标时速度要快得多。

有什么我可以在 Eclipse 中调整来改进的吗？

我正在使用`Eclipse Juno 4.2.0`. 我的电脑是 Windows 7，Intel Core2 Duo CPU @1.4Ghz，5GB RAM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:20:16.470

请确保 eclipse.ini 不包含类似的行：

```
CompileThreshold=5 
```

如果是这样，只需从您的配置中删除任何 CompileThreshold 规范。

# android - 安卓切换按钮

> ID：12621019
> 
> 赞同：12
> 
> 时间：2012-09-27T12:08:00.350
> 
> 标签：android, view

通过阅读这篇[文章](http://ww1.mokasocial.com/)，我能够创建一个由图像组成的切换按钮。我的切换没有任何文字，只有开/关图像。

当我的切换按钮被创建时，它被拉伸并失去了它的比例，我如何让它保持原来的大小？

这些是我使用的图像：

[![在](../Images/0bf64df18b8363a9c8ff021ac9bb32eb.png)](https://i.stack.imgur.com/AoWWY.png)

[![离开](../Images/fb213db9a31326b09f8ef672520b1a70.png)](https://i.stack.imgur.com/daY3s.png)

编码：

***主.xml：***

```
<ToggleButton
   android:id="@+id/changeNumerals"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentLeft="true"
   android:layout_alignParentTop="true"
   android:checked="true"
   android:background="@drawable/toggle_bg"
   android:textOn=""
   android:textOff=""            
/> 
```

***可绘制/切换.xml：***

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_checked="false" android:drawable="@drawable/toggle_off" />
   <item android:state_checked="true" android:drawable="@drawable/toggle_on" />
</selector> 
```

***可绘制/toggle_bg.xml：***

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:id="@+android:id/background" android:drawable="@android:color/transparent" />
   <item android:id="@+android:id/toggle" android:drawable="@drawable/toggle" />
</layer-list> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T12:41:00.650

尝试以下属性`<ToggleButton>`

```
android:background="@android:color/transparent"
android:button="@drawable/toggle_bg" 
```

它应该工作。祝你好运 ：）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-27T12:33:09.507

尺寸是“硬编码”的，但它们会随着屏幕的大小而缩放。

所以xml看起来像：

```
android:layout_width="64dp"
android:layout_height="24dp" 
```

dps 的官方文档在[这里](http://developer.android.com/guide/topics/resources/available-resources.html#dimension)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-20T12:04:34.603

为了支持从 GINGERBREAD 到当前版本的版本，我最终使用了：

```
<ToggleButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/filterPhotos"
    android:checked="true"
    android:textOn=""
    android:textOff=""
    android:paddingLeft="5dp"
    android:drawableRight="@drawable/toggle_filter_photos"
    android:background="@null"/> 
```

和可绘制的toggle_filter_photos.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/picture_filter_icons"
          android:state_checked="true" />
    <item android:drawable="@drawable/picture_inactive_filter_icons" />
</selector> 
```

上面的其他解决方案不适用于 GINGERBREAD 和更新版本，因为图标根本不会显示（`android:button`在 GINGERBREAD 上）或纵横比丢失（`android:background`在 JELLY_BEAN_MR1 (4.2.2) 上）。

# printing - 在 IE9 打印/打印预览中禁用 Cufon

> ID：12621024
> 
> 赞同：0
> 
> 时间：2012-09-27T12:08:04.370
> 
> 标签：printing, styles, internet-explorer-9, cufon

我正在使用 Cufon 作为图像替换工具。为了清楚起见，我想在打印时恢复为标准字体。

这发生在除 IE9 之外的所有浏览器中。IE9 尝试在 Cufon 中呈现字体。

任何人都可以帮我找出一种方法来阻止 IE9 在打印中呈现 Cufon 字体吗？

谢谢，汤姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:33:51.150

打印时，Cufon 和 IE9 存在一个已知问题。它与打印时仍然应用的正常样式有关。解决它的最佳方法是添加打印样式表并覆盖当前样式。

此外，将此添加到您的打印样式表中

`cufon.cufon canvas {display:inline !important;}`

# c# - WebSocket java插件无法连接

> ID：12621027
> 
> 赞同：0
> 
> 时间：2012-09-27T12:08:18.723
> 
> 标签：c#, android, websocket

我正在使用这个[http://anismiles.wordpress.com/2011/02/03/websocket-support-in-android%E2%80%99s-phonegap-apps/#comment-689](http://anismiles.wordpress.com/2011/02/03/websocket-support-in-android%E2%80%99s-phonegap-apps/#comment-689)插件。当我创建 websocket 对象和用 c# 编写的常规 tcp 服务器时，我遇到了一个问题。我确认收到了连接标头，但是，javascript 中的 onopen 或 onmessage 事件没有被触发？有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:53:07.847

您提到使用常规的 tcp 服务器。您是否知道 websocket 连接比常规 tcp 连接稍微复杂一些？您必须完成一次握手，然后构建所有后续消息。您的浏览器在客户端为您处理所有这些；您必须在服务器上提供等效代码。

如果您想编写自己的服务器，[RFC 6455描述了该协议。](https://www.rfc-editor.org/rfc/rfc6455)或者，您可以使用现有的 C# 服务器 - 使用[.NET v4.5 类](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket.aspx)或[第三方服务器](https://github.com/statianzo/Fleck/)。

# iphone - 为什么有两个地方指定App Icon File？

> ID：12621028
> 
> 赞同：0
> 
> 时间：2012-09-27T12:08:21.950
> 
> 标签：iphone, ios, xcode

应用程序图标文件在 plist 以及目标的 Info 选项卡中定义。

这有什么原因还是只是多余的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:11:48.347

在一个地方移除物品会导致它们在另一个地方也被移除。所以我想这是多余的。同样，将图标文件拖放到目标“摘要”选项卡下的“应用程序图标”插槽中也可以达到相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:14:23.990

这只是完全相同设置的两个不同位置。在一个地方改变它会在另一个地方改变它。

Summary 选项卡中的“Bundle Identifier”、“Version”和“Build”字段也是如此，这将更改 Info.plist 中的值。

实际上，“摘要”选项卡中存在的每条信息只是表示 Info.plist 文件中常见信息的另一种方式，它只是完全相同信息的更易读的表示。“信息”选项卡也是如此，它直接显示 Info.plist 键，并在单独的视图中提取一些特殊键，如文档类型、UTI 和 URL 类型：其中的所有内容也只是 Info.plist 文件的另一个表示.

* * *

**“图标”属性的特别说明**：由于各种 SDK 的演变，有**多种方法可以在 Info.plist 键中定义应用程序图标。**并且**“摘要”选项卡中的图标仅影响定义图标的最新方式**。

*   一开始只有一个`CFBundleIconFile`字符串类型的键定义了一个唯一的图标名称。很简单。
*   然后`CFBundleIconFiles`添加了另一个键来接受图标列表（NSArray），以支持多种分辨率和用途（搜索图标等）
*   最后，在 iOS5 中，再次引入了另一个键`CFBundleIcons`，它现在是一个字典，允许您列出每个图标文件及其相关用途（报亭图标、搜索图标、应用程序图标……）

有关更多详细信息，请阅读详细说明差异的[信息属性列表键参考。](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html)

# iphone - Xcode 4.5 - 没有崩溃日志

> ID：12621033
> 
> 赞同：2
> 
> 时间：2012-09-27T12:08:40.460
> 
> 标签：iphone, objective-c, ios, xcode, crash

我正在使用**Xcode 4.5**，我正在使用`LLDB`（并且我也尝试过使用`GDB`）。我启用了“所有异常”断点。但是我没有运气获得任何崩溃日志/堆栈跟踪。

我正在构建一个应用程序，所以你可以想象我到处都是崩溃。如果没有崩溃日志，我无法修复它们。

**笔记：** `There is no crash log on the device or simulator`

感谢帮助！

# ios - 如何在 Adob e AIR 应用程序中强制 iPad 中的横向和 iPhone 中的纵向？

> ID：12621037
> 
> 赞同：1
> 
> 时间：2012-09-27T12:08:52.357
> 
> 标签：ios, actionscript-3, air

这个问题有点奇怪。在 Adob​​e AIR 中，我试图将我的应用程序的 iPhone 和 iPad 版本组合成一个应用程序。但是我很难处理方向。我需要 iPad 上的应用程序以横向模式显示，而在 iPhone 上它应该以纵向模式显示。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:14:13.087

在 shouldAutorotateToInterfaceOrientation 中执行此操作

但不要忘记相应地调整视图（为 subView 设置适当的帧）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
     return UIInterfaceOrientationIsPortrait(interfaceOrientation);
 else
     return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:59:23.050

第一个问题是检测设备是 iPad 还是 iPhone。我相信做到这一点的唯一方法是检查设备分辨率（当然，您可以为不同的设备分发单独的二进制文件，但您提到在一个应用程序中执行此操作）。

通常您可以在 XML 应用程序描述符中处理屏幕旋转，例如：

```
<aspectRatio>landscape</aspectRatio>
<autoOrients>false</autoOrients> 
```

但是，由于您想根据设备执行不同的操作，因此这是行不通的。

我过去使用的另一种方法是检测方向事件并阻止默认设置并通过 AS3 手动设置方向。这是一个很好的例子：[AS3 - iOS force landscape mode only?](https://stackoverflow.com/questions/6559265/as3-ios-force-landscape-mode-only)

使用那里提供的代码示例，只需获取您的设备检测/屏幕分辨率检测代码并将屏幕方向设置为该设备的适当检测（并防止该设备的适当方向事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:34:40.577

如果您仍然需要它，我对“仅强制横向模式”进行了调整，以仅对纵向执行相同操作。这是代码：

```
var startOrientation:String = stage.orientation;
if ( startOrientation == StageOrientation.ROTATED_RIGHT)
  {
    stage.setOrientation(StageOrientation.UPSIDE_DOWN);
  }else if(startOrientation == StageOrientation.ROTATED_LEFT){
      StageOrientation.DEFAULT;
  }
  else
  {
    stage.setOrientation(startOrientation);
  }                    

stage.addEventListener(StageOrientationEvent.ORIENTATION_CHANGING, orientationChangeListener);

function orientationChangeListener(e:StageOrientationEvent)
{
   if (e.afterOrientation ==  StageOrientation.ROTATED_RIGHT || e.afterOrientation ==  StageOrientation.ROTATED_LEFT )
   {
     e.preventDefault();
   }
} 
```

# java - 如何让 Callable 等到执行？

> ID：12621041
> 
> 赞同：1
> 
> 时间：2012-09-27T12:09:01.170
> 
> 标签：java, multithreading, task, callable

我有一个 Callable 我使用

```
FutureTask<Integer> task = new FutureTask<Integer>(new MyCallable(name, type));
pool = Executors.newSingleThreadExecutor();
pool.submit(task); 
```

我想知道执行是在之后继续`pool.submit(task)`还是它将等待可调用来完成其执行？

简而言之，我只想知道有没有像`thread.join()`Callable 这样的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T12:11:26.957

> ...有没有像 thread.join() 这样的 Callable 方法？

如果线程在池中可用，该`pool.submit(callable)`方法将返回 a`Future`并立即开始执行。要执行 a `join`，您可以调用`future.get()`which joins 与线程，返回方法返回的值`call()`。需要注意的是，如果方法抛出，`get()`可能会抛出一个。`ExecutionException``call()`

您*不需要*将您的包装`Callable`在`FutureTask`. 线程池为您做到这一点。所以你的代码是：

```
pool = Executors.newSingleThreadExecutor();
Future<String> future = pool.submit(new MyCallable(name, type));

// now you can do something in the foreground as your callable runs in the back

// when you are ready to get the background task's result you call get()
// get() waits for the callable to return with the value from call
// it also may throw an exception if the call() method threw
String value = future.get(); 
```

这当然是你的`MyCallable`工具`Callable<String>`。将`Future<?>`匹配您`Callable`的任何类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:11:41.700

`task.get()`(task being a `FutureTask`) 期望当前线程等待线程池完成托管任务。

该方法最终返回一个具体结果或抛出与作业线程在其任务期间将抛出的相同检查异常（尽管包装在 ExecutionException 中）。

# database - 函数返回 sys_refcursor

> ID：12621044
> 
> 赞同：0
> 
> 时间：2012-09-27T12:09:09.467
> 
> 标签：database, oracle, function, plsql, oracle10g

我有一个关于 sys_refcursor 的问题。

sys_refcursor 只能与 select 语句一起使用，或者可以像下面这样使用。我希望该函数返回 sys_refcursor。

**p_cursor 定义为 sys_refcursor**

```
FOR i IN c
    LOOP
        IF (p_start_date BETWEEN i.start_date AND i.end_date)
            OR (p_end_date BETWEEN i.start_date AND i.end_date)
        THEN
            p_cursor := i.product_no;
        END IF;
    END LOOP; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:39:16.633

根据您的需要，您有两种方法可以做到这一点。

**首先**
，如果您始终希望将列放在光标中，并且根据该条件，是否为该列分配值。您可以执行以下操作

代码：

```
OPEN p_cursor FOR   
SELECT i.columna1, i.columna2,
       (SELECT i.product_no
          FROM dual
         WHERE (p_start_date BETWEEN i.start_date AND i.end_date)
            OR (p_end_date BETWEEN i.start_date AND i.end_date)
        ) as product_no
FROM table_name i 
```

**其次**
，如果您有时想要拥有该专栏，而有时您却没有。您可以动态地在变量中创建查询`varchar`，然后将该查询分配给游标。

代码：

```
DECLARE
  var VARCHAR2(200);  
BEGIN

  var := 'select * from dual';

  open p_cursor for var;

END; 
```

# python - 仅针对一个模块使用 Mock 修补功能？

> ID：12621049
> 
> 赞同：6
> 
> 时间：2012-09-27T12:09:30.233
> 
> 标签：python, unit-testing, python-mock

我需要修补`os.listdir`和其他`os`函数来测试我的 Python 函数。但是当它们被修补时，`import`声明失败了。是否可以仅在单个模块（真正的模块）内修补此功能，并让 tests.py 正常工作？

这是一个打破的例子`import`：

```
import os
from mock import patch

# when both isdir and isfile are patched
# the function crashes
@patch('os.path.isdir', return_value=False)
@patch('os.path.isfile', return_value=False)
def test(*args):
    import ipdb; ipdb.set_trace()
    real_function(some_arguments)
    pass

test() 
```

我想看`real_function`一个补丁`os.path`，并测试以查看正常功能。

**[这是回溯](http://pastebin.com/Vp1p511V)**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T13:31:46.600

您可以`patch`用作上下文管理器，因此它仅适用于`with`语句内的代码：

```
import os
from mock import patch

def test(*args):
    import ipdb; ipdb.set_trace()
    with patch('os.path.isdir', return_value=False):
        with patch('os.path.isfile', return_value=False):
            real_function(some_arguments)
    pass

test() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:51:18.537

以下适用于您的需要。请注意，我在测试运行之前和之后打印 os.listdir 只是为了显示所有内容都返回到正确的状态。

```
import unittest, os
from unittest import TestLoader, TextTestRunner

def tested_func(path):
    return os.listdir(path * 2)

class Example(unittest.TestCase):

    def setUp(self):
        self._listdir = os.listdir
        os.listdir = lambda p: ['a', 'b', 'a', 'b']

    def test_tested_func(self):
        self.assertEqual(tested_func('some_path'), ['a', 'b', 'a', 'b'])

    def tearDown(self):
        os.listdir = self._listdir

print os.listdir
TextTestRunner().run(TestLoader().loadTestsFromTestCase(Example))
print os.listdir 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:51:26.130

您可以在测试方法或测试类上使用补丁作为装饰器。它使代码看起来非常干净。请注意，已修补的对象被传递到测试方法中。您可以在测试类级别做同样的事情，模拟对象将被传递到每个测试方法中。在这种情况下不需要使用 setUp 或 tearDown 因为这一切都是自动处理的。

```
# module.py
import os

def tested_func(path):
    return os.listdir(path * 2)

# test.py
from mock import patch

@patch('module.os.listdir')
def test_tested_func(self, mock_listdir):
    mock_listdir.return_value = ['a', 'b']

    self.assertEqual(tested_func('some_path'), ['a', 'b', 'a', 'b'])
    mock_listdir.assert_called_with('some_path' * 2) 
```

另请注意，您在要实际测试的模块中模拟了要修补的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T13:26:13.417

你不仅“可以”，而且“应该”这样做[http://mock.readthedocs.org/en/latest/patch.html#where-to-patch](http://mock.readthedocs.org/en/latest/patch.html#where-to-patch)

ps：如果你想做更多“声明性”的方式来描述你想要修补的单元的副作用，我建议使用库[http://mockstar.readthedocs.org/](http://mockstar.readthedocs.org/)

# vb.net - VB.Net 中的 HTTP 文件服务器（130 行代码）

> ID：12621050
> 
> 赞同：3
> 
> 时间：2012-09-27T12:09:31.390
> 
> 标签：vb.net, http

两周前，我发现了一篇非常有趣的文章：[“130 行代码中的 HTTP 文件服务器”](http://realfiction.net/go/166)。我用 Visual Basic 翻译了原始代码（我使用 Visual Basic Net 2005 Express）。

```
Imports System
Imports System.IO
Imports System.Net
Imports System.Text
Imports System.Web
Public Class HttpFileServer
    Implements IDisposable
    Public rootPath As String
    Private Const bufferSize As Integer = 1024 * 512
    '512KB
    Private ReadOnly http As HttpListener
    Public Sub New(ByVal rootPath As String)
        Me.rootPath = rootPath
        http = New HttpListener()
        http.Prefixes.Add("http://localhost:80/")
        http.Start()
        http.BeginGetContext(requestWait, Nothing)
    End Sub
    Public Sub Dispose() Implements System.IDisposable.Dispose
        http.[Stop]()
    End Sub
    Private Sub requestWait(ByVal ar As IAsyncResult)
        If Not http.IsListening Then
            Return
        End If
        Dim c = http.EndGetContext(ar)
        http.BeginGetContext(requestWait, Nothing)
        Dim url = tuneUrl(c.Request.RawUrl)
        Dim fullPath = IIf(String.IsNullOrEmpty(url), rootPath, Path.Combine(rootPath, url))
        If Directory.Exists(fullPath) Then
            returnDirContents(c, fullPath)
        ElseIf File.Exists(fullPath) Then
            returnFile(c, fullPath)
        Else
            return404(c)
        End If
    End Sub
    Private Sub returnDirContents(ByVal context As HttpListenerContext, ByVal dirPath As String)
        context.Response.ContentType = "text/html"
        context.Response.ContentEncoding = Encoding.UTF8
        Using sw = New StreamWriter(context.Response.OutputStream)
            sw.WriteLine("html")
            sw.WriteLine("head meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8""/head")
            sw.WriteLine("body ul")
            Dim dirs = Directory.GetDirectories(dirPath)
            For Each d As Object In dirs
                Dim link = d.Replace(rootPath, "").Replace("\"c, "/"c)
                sw.WriteLine("<li>&lt;DIR&gt; a href=""" + link + """ " + Path.GetFileName(d) + "/a  /li ")
            Next
            Dim files = Directory.GetFiles(dirPath)
            For Each f As Object In files
                Dim link = f.Replace(rootPath, "").Replace("\"c, "/"c)
                sw.WriteLine(" li <a href=""" + link + """ " + Path.GetFileName(f) + " /a  /li ")
            Next
            sw.WriteLine(" /ul  /body  /html ")
        End Using
        context.Response.OutputStream.Close()
    End Sub
    Private Shared Sub returnFile(ByVal context As HttpListenerContext, ByVal filePath As String)
        context.Response.ContentType = getcontentType(Path.GetExtension(filePath))
        Dim buffer = New Byte(bufferSize - 1) {}
        Using fs = File.OpenRead(filePath)
            context.Response.ContentLength64 = fs.Length
            Dim read As Integer
            While (InlineAssignHelper(read, fs.Read(buffer, 0, buffer.Length))) > 0
                context.Response.OutputStream.Write(buffer, 0, read)
            End While
        End Using
        context.Response.OutputStream.Close()
    End Sub
    Private Shared Sub return404(ByVal context As HttpListenerContext)
        context.Response.StatusCode = 404
        context.Response.Close()
    End Sub
    Private Shared Function tuneUrl(ByVal url As String) As String
        url = url.Replace("/"c, "\"c)
        url = HttpUtility.UrlDecode(url, Encoding.UTF8)
        url = url.Substring(1)
        Return url
    End Function
    Private Shared Function getcontentType(ByVal extension As String) As String
        Select Case extension
            Case ".avi"
                Return "video/x-msvideo"
            Case ".css"
                Return "text/css"
            Case ".doc"
                Return "application/msword"
            Case ".gif"
                Return "image/gif"
            Case ".htm", ".html"
                Return "text/html"
            Case ".jpg", ".jpeg"
                Return "image/jpeg"
            Case ".js"
                Return "application/x-javascript"
            Case ".mp3"
                Return "audio/mpeg"
            Case ".png"
                Return "image/png"
            Case ".pdf"
                Return "application/pdf"
            Case ".ppt"
                Return "application/vnd.ms-powerpoint"
            Case ".zip"
                Return "application/zip"
            Case ".txt"
                Return "text/plain"
            Case Else
                Return "application/octet-stream"
        End Select
    End Function
    Private Shared Function InlineAssignHelper(Of T)(ByRef target As T, ByVal value As T) As T
        target = value
        Return value
    End Function
End Class 
```

但我得到了错误：

> 错误 1 ​​未为“Private Sub requestWait(ar As System.IAsyncResult)”的参数“ar”指定参数。第 19 行
> 错误 2 未为“Private Sub requestWait(ar As System.IAsyncResult)”的参数“ar”指定参数。第 31 行

这两个错误都指向表达式`http.BeginGetContext(requestWait, Nothing)`。但我不知道如何处理这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:18:56.783

要编译代码，请更改行

```
http.BeginGetContext(requestWait, Nothing) 
```

到

```
http.BeginGetContext(AddressOf requestWait, Nothing) 
```

你可以看看[AddressOf Operator](http://msdn.microsoft.com/en-us/library/y72ewk2b.aspx)和[这个问题](https://stackoverflow.com/questions/7725511/vb-net-to-c-sharp-equivalent-of-addressof)。

# java - 如何生成只有 CMYK 颜色的 JFreeChart

> ID：12621053
> 
> 赞同：1
> 
> 时间：2012-09-27T12:09:36.630
> 
> 标签：java, itext, jfreechart

如何仅使用 CMYK 颜色生成 JFreeChart？

我必须调用所有的`.setPaint(new CmykColor(...))`还是有更优雅的方式？即使我不知道所有可能的`.setPaint(...)`方法。

为了重现这个问题，我写了一个小单元测试。它生成一个图表，最后将其添加到仅允许 CMYK 的 PDF/x。

如果否，则测试变为绿色`com.lowagie.text.pdf.PdfXConformanceException`：不允许使用颜色空间 RGB。抛出异常。

```
public class TestChart
{
    public static final int WIDTH   = 500;
    public static final int HEIGHT  = 400;

    private JFreeChart      chart;

    @Before
    public void createChart()
    {
        final DefaultPieDataset dataSet = new DefaultPieDataset();
        dataSet.setValue("United States", 4.54);
        dataSet.setValue("Brazil", 2.83);

        this.chart = ChartFactory.createPieChart("World Population by countries", dataSet, true, true, false);

//      ChartUtilities.saveChartAsPNG(new File("test.png"), chart, width, height);
    }

    @Test
    public void shouldAddChartToPdfX() throws FileNotFoundException, DocumentException
    {
        final Document document = new Document();
        document.addTitle("Test PDF/x");

        final PdfWriter pdfWriter = PdfWriter.getInstance(document, new FileOutputStream("test.pdf"));
        pdfWriter.setPDFXConformance(PdfWriter.PDFX1A2001);

        document.open();

        final PdfContentByte directContent = pdfWriter.getDirectContent();
        final PdfTemplate pdfTemplate = directContent.createTemplate(TestChart.WIDTH, TestChart.HEIGHT);
        final Graphics2D graphics2d = pdfTemplate.createGraphics(TestChart.WIDTH, TestChart.HEIGHT);

        final Rectangle2D rectangle2d = new Rectangle2D.Double(0, 0, TestChart.WIDTH, TestChart.HEIGHT);

        this.chart.draw(graphics2d, rectangle2d);

        graphics2d.dispose();

        directContent.addTemplate(pdfTemplate, 0, 0);

        document.close();

    }
} 
```

要执行此操作，您需要此 Maven 依赖项：

```
<dependency>
    <groupId>com.lowagie</groupId>
    <artifactId>itext</artifactId>
    <version>2.1.7</version>
</dependency>

<dependency>
    <groupId>org.jfree</groupId>
    <artifactId>jfreechart</artifactId>
    <version>1.0.14</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T01:52:18.283

好吧，您可以通过调用 plot.setDrawingSupplier() 并提供您喜欢的颜色来更改绘图将用于不同数据集的颜色（如果有帮助，您可以使用 ChartColor 类）。它是一个界面，因此您可以自己制作，也可以使用 DefaultDrawingSupplier 并且它是多参数构造函数以使其更简单。然后是 setOutlinePaint、setBackgroundPaint 和 setNoDataPaint，以防万一。这应该涵盖大多数东西，除了我相信已经是灰色的刻度线等。

# java - Is There macro substitution in java?

> ID：12621054
> 
> 赞同：1
> 
> 时间：2012-09-27T12:09:38.970
> 
> 标签：java

I would know if exists "**macro substitution**" in java... I'm developing a system in Android that was originally developed in Visual Fox Pro, now I have to turn some methods with "**macro substitution**" to Java Language.

How Can I achieve it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:40:54.323

您可能在询问*宏扩展*，您可以在其中输入带有参数的宏并将其扩展为可编译的 Java 代码。

简单的答案是*否定*的。

有关模拟宏扩展的另一种方法，请参阅[java 中宏替换的替代方案。](https://stackoverflow.com/q/4948533/509840)

大多数 IDE（Eclipse 是我选择的毒药）会做一些与宏扩展平行的事情。如果您键入 foreach 和 Ctrl-Space，它会将其扩展为 for 循环 Java，并最好地猜测您正在迭代的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T20:17:36.683

我熟悉 Visual FoxPro 中的宏替换。它本质上允许程序员使用在运行时而不是在编译时评估的变量名称来引用变量的值：

```
myvar = "MyVariable"
&myvar = 42
? myvar
? &myvar
? MyVariable 
```

输出：

> 我的变量
> 42
> 42

此代码在运行时动态创建一个名为`MyVariable`.

这是可能的，因为 Visual FoxPro 支持动态类型或“后期绑定”，因为它是一种解释语言而不是编译语言。Java 不直接支持动态类型。Java 开发人员似乎更喜欢的方法是使用 Map 将变量名称及其值关联起来。请参阅线程[如何在 Java 中动态命名对象？](https://stackoverflow.com/questions/2711067/how-do-i-dynamically-name-objects-in-java).

# java - Authenticating users by their IPs in a Active Directory system in Java

> ID：12621055
> 
> 赞同：1
> 
> 时间：2012-09-27T12:09:42.280
> 
> 标签：java, linux, active-directory, ldap

Can I authenticate my users by their IPs in a Active Directory system in Java language? I am connected to network by a linux machine. I don't know where I must start form.

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:52:43.583

也许使用 SASL 或扩展。

LDAP 没有规定来确定客户端的 IP 地址。

[SASL](http://ldapwiki.willeke.com/wiki/SASL)在 LDAP 协议之外

-吉姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:35:36.910

使用[UnboundID LDAP SDK](https://www.unboundid.com/products/ldapsdk/) `SimpleBindRequest`或 SASL 绑定请求类之一来验证 LDAP 客户端连接。客户端将需要可分辨名称和简单 BIND 请求的凭据。LDAP 客户端应确定如何从 IP 地址创建专有名称。例如：

```
final String hostname = "the hostname";
final int port = PORT; // sometimes 389
try
{
    final LDAPConnection connection = new LDAPConnection(hostname,port);
    try
    {
        final SimpleBindRequest request = new SimpleBindRequest(bindDN,bindPassword);
        final BindResult result = connection.bind(request);
    }
    finally
    {
        connection.close();
    }
}
catch(final LDAPException ex)
{
     handle the exception ...;
} 
```

### 也可以看看

*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)

# php - 在加载时使用复选框加载隐藏的 div

> ID：12621058
> 
> 赞同：0
> 
> 时间：2012-09-27T12:09:54.633
> 
> 标签：php, javascript, jquery, checkbox

因此，除非选中复选框，否则我有一堆在加载时隐藏的 div。

它适用于更改事件，但在页面刷新时，div 返回隐藏，除非您关闭复选框然后再打开。

我想知道是否有一种方法可以检查加载时勾选了哪个复选框，然后显示：块，而不是勾选和取消勾选。

**HTML/PHP**

```
<div class="misc-pub-section">
    <label><b>Year of release</b></label>
    <input name="review_release_year" value="<?php echo $review_release_year; ?>" />
</div>

<div class="misc-pub-section">
    <label><b>Director/Author/Company/Developer</b></label>
    <input name="review_owner" value="<?php echo $review_owner; ?>" />
</div>

<div class="misc-pub-section">
    <label><b>Generic Website Link</b></label>
    <input name="review_website_link" value="<?php echo $review_website_link; ?>" />
</div>

<div class="misc-pub-section feature-short-webseries" style="display:none;">
    <label><b>IMDb Title Link</b></label><br/>
    <em style="color: #999;">imdb.com/title/</em><input size="9" name="review_imdb_link" value="<?php echo $review_imdb_link; ?>" />
</div>

<div class="misc-pub-section feature-short-webseries" style="display:none;">
    <label><b>Story rating (out of 5)</b></label>
    <input max="5" name="review_story_rating" value="<?php echo $review_story_rating; ?>" />
</div>

<div class="misc-pub-section feature-short-webseries-videogame" style="display:none;">
    <label><b>Enjoyment rating (out of 5)</b></label>
    <input max="5" name="review_enjoy_rating" value="<?php echo $review_enjoy_rating; ?>" />
</div>

<div class="misc-pub-section feature-short" style="display:none;">
    <label><b>Soundtrack rating (out of 5)</b></label>
    <input max="5" name="review_sound_rating" value="<?php echo $review_sound_rating; ?>" />
</div>

<div class="misc-pub-section webseries" style="display:none;">
    <label><b>Attention span rating (out of 5)</b></label>
    <input max="5" name="review_span_rating" value="<?php echo $review_span_rating; ?>" />
</div>

<div class="misc-pub-section hardware-software" style="display:none;">
    <label><b>Features rating (out of 5)</b></label>
    <input max="5" name="review_features_rating" value="<?php echo $review_features_rating; ?>" />
</div>

<div class="misc-pub-section hardware-software" style="display:none;">
    <label><b>Function rating (out of 5)</b></label>
    <input max="5" name="review_function_rating" value="<?php echo $review_function_rating; ?>" />
</div>

<div class="misc-pub-section hardware-software" style="display:none;">
    <label><b>Value rating (out of 5)</b></label>
    <input max="5" name="review_value_rating" value="<?php echo $review_value_rating; ?>" />
</div>

<div class="misc-pub-section software" style="display:none;">
    <label><b>Operating System</b></label>
    <input name="review_system_rating" value="<?php echo $review_system_rating; ?>" />
</div>

<div class="misc-pub-section videogame" style="display:none;">
    <label><b>Graphics rating (out of 5)</b></label>
    <input max="5" name="review_graphics_rating" value="<?php echo $review_graphics_rating; ?>" />
</div>

<div class="misc-pub-section videogame" style="display:none;">
    <label><b>Gameplay rating (out of 5)</b></label>
    <input max="5" name="review_gameplay_rating" value="<?php echo $review_gameplay_rating; ?>" />
</div> 
```

**jQuery**

```
$(function() {
    var a = $("#in-review-type-14"), b = $("#in-review-type-67"), f = $("#in-review-type-68"), d = $("#in-review-type-69"), e = $("#in-review-type-70"), c = $("#in-review-type-71"), h = $("#review-typechecklist input");
  $(h).change(function() {
    a.is(":checked") || b.is(":checked") || c.is(":checked") ? $(".feature-short-webseries").show() : $(".feature-short-webseries").hide();
    a.is(":checked") || b.is(":checked") || c.is(":checked") || e.is(":checked") ? $(".feature-short-webseries-videogame").show() : $(".feature-short-webseries-videogame").hide();
    a.is(":checked") || b.is(":checked") ? $(".feature-short").show() : $(".feature-short").hide();
    c.is(":checked") ? $(".webseries").show() : $(".webseries").hide();
    f.is(":checked") || d.is(":checked") ? $(".hardware-software").show() : $(".hardware-software").hide();
    d.is(":checked") ? $(".software").show() : $(".software").hide();
    e.is(":checked") ? $(".videogame").show() : $(".videogame").hide()
  })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:13:56.813

如果事件处理函数的逻辑`change`已经正常工作，您需要做的就是在页面加载时触发该事件处理程序（在它被绑定之后）：

```
$(h).change(function() {
    ...
}).trigger('change'); 
```

在不相关的注释中，三元运算符通常用于基于条件存储或传递值，而不是分支执行（这就是`if`语句的用途）。您的代码可以工作，如果您通过 JSLint 之类的工具运行它，您只会得到错误，它会抱怨它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:16:57.920

您需要为每个复选框选项创建 cookie。

例如，如果您选中一个选项并且 DIV 现在可见，则为该 DIV 创建 cookie，将其命名为与该 DIV 相关的内容，并将其内容设置为与您相关联的内容，即它像真一样为 ON。

然后在 php 中重新加载页面时检查该 cookie 是否存在并且它的 content = true 以及是否设置样式显示以阻止该特定 DIV。

要关闭可见性，您可以将 cookie 时间设置为 -x 秒以使其过期或将 cookie 内容更新为 false。

您可以在单击那些复选框的同一页面上使用 javascript 制作 cookie，无需重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:24:20.840

每次加载页面都会删除 DOM，因此您必须将临时数据保存在 cookie 中。

# iphone - FBSession 的 Facebook SDK 3.0 权限数组持有错误的权限

> ID：12621059
> 
> 赞同：1
> 
> 时间：2012-09-27T12:10:02.333
> 
> 标签：iphone, ios, facebook, sdk, permissions

使用 Facebook sdk 3.1，我想确保应用程序在我发送发布请求之前就具有“publish_stream”。

问题是 [FBSession.activeSession.permissions indexOfObject:@"publish_stream"] 永远不会返回 NSNotFound 即使用户在登录期间选择不允许。这自然会导致问题，因为我假设我有权发送帖子但它返回 HTTP状态码 403，因为我实际上没有所需的权限。

IS 是一个错误，或者是否有其他方法可以检查活动会话的权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:49:52.930

如果您对当前与您正在使用的访问令牌关联的所有权限进行 API 调用，`/me/permissions`则将返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:51:42.120

Facebook 确认这是 iOS SDK 中的一个错误：[https ://developers.facebook.com/bugs/111727002307769](https://developers.facebook.com/bugs/111727002307769)

该错误仍然存​​在于 iOS SDK 3.1 中

`/me/permissions`一种解决方法是使用Igy 建议的API 调用检查权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T13:30:42.943

```
[FBSession.activeSession.permissions indexOfObject:@"publish_stream"] != NSNotFound 
```

上面的代码不是检查写权限的正确方法。

取而代之的是，请尝试以下方法：

```
-(BOOL)hasWritePermissions{

    NSArray *permissiones = [FBSession activeSession].permissions;
    for (NSString *permission in permissiones) {

        if ([permission isEqualToString:@"publish_actions"]) {
            return YES;
        }
    }

    return NO;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-12T15:52:06.463

正如@Zorayr 所说，您可以执行以下操作。

```
NSArray *permissions = FBSession.activeSession.permissions;
    if ([permissions containsObject:@"publish_actions"]) {
       [self performNextTestWithLastPostID:nil];
    } else {
        ...
} 
```

# wix - 'wix 在管理员卸载前执行批处理

> ID：12621060
> 
> 赞同：0
> 
> 时间：2012-09-27T12:10:05.350
> 
> 标签：wix, uninstallation, custom-action, servicecontroller

我的 WiX XML 文件安装了包含名为 OLOLO_SERVICE 的 Windows 服务的应用程序（例如）。我想在安装/重新安装我的应用程序时停止此服务。

我使用带有 ExeCommand='sc stop OLOLO_SERVICE' 的 CustomAction。

```
<CustomAction Id='EnsureThatServiceIsStopped' Directory='INSTALLLOCATION' 
Impersonate="no" Execute="immediate" ExeCommand="sc 
stop OLOLO_SERVICE" Return="ignore" /> 
```

<InstallExecuteSequence> 标签里面是动作

```
<Custom Action='EnsureThatServiceIsStopped' Before='InstallValidate' /> 
```

但这不起作用，卸载程序显示此窗口“要继续卸载，您应该停止关注可执行文件”（可能不是 100% 正确，因为在我的俄语 Windows 7 中它是用俄语编写的）。

我认为可能的原因是

*   脚本在获得管理员权限之前运行（并且停止服务失败，因为它需要管理员权限）
*   脚本在验证后运行（检查已安装的可执行文件时验证失败）

请帮帮我，我想使用批处理“sc stop OLOLO_SERVICE”停止服务

PS。我决定简化一个问题：我希望我的 WiX 在检查正在运行的应用程序之前以管理员权限执行“sc stop OLOLO_SERVICE”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:53:02.893

您不需要在批处理文件中执行此操作，您可以使用[ServiceControl](http://wix.sourceforge.net/manual-wix2/wix_xsd_servicecontrol.htm)元素：

```
<ServiceControl Id="ServiceControl_OloService" 
                Name="OLOLO_SERVICE"
                Stop="both"
                Remove="uninstall"
                Wait="yes" /> 
```

# wcf - FileUpload with WCF and streaming works locally but fails in Azure

> ID：12621062
> 
> 赞同：1
> 
> 时间：2012-09-27T12:10:08.067
> 
> 标签：wcf, azure, upload, stream

I have implemented a fileupload in my ASP.NET 4.0 WebSite which runs in Azure. The AJAX Call to the WCF-Service works fine locally, but when i deploy it to Azure it fails with the following Exception:

System.Web.HttpException Request.BufferlessInputStream can not be used because the Request's contents have already been read.

at the following line:

```
HttpContext.Current.Request.GetBufferlessInputStream().Read(COMPLETEBufferedFileContent, 0, fileContentLength); 
```

My WebService-Method is declared like:

```
public Stream UploadProfileImage() 
```

And a part of my configuration for the service looks like:

```
<bindings>
  <customBinding>
    <binding name="NiPDefaultCustomBinding" 
             openTimeout="00:01:00" 
             closeTimeout="00:01:00" 
             sendTimeout="00:01:00" 
             receiveTimeout="00:01:00" >   
      <sslStreamSecurity/>    
      <webMessageEncoding webContentTypeMapperType="XXXMapperForStreamInParamAndJSON, AssemblyX">
        <readerQuotas maxArrayLength="16384"
                      maxBytesPerRead="4096"
                      maxDepth="32"
                      maxNameTableCharCount="16384"
                      maxStringContentLength="8192" />
      </webMessageEncoding>    
      <httpsTransport maxBufferPoolSize="524288"
                      maxBufferSize="65536" 
                      maxReceivedMessageSize="6291456" 
                      transferMode="Streamed" 
                      manualAddressing="true">       
      </httpsTransport>
    </binding>
  </customBinding> 
```

My XXXMapperForStreamInParamAndJSON overrides GetMessageFormatForContentType() and returns WebContentFormat.Raw in this scenario.

I know that i am using streaming, but buffering the complete content which doesn't make sense for streaming, but in this case it doesn't make a problem, because i upload images with this method and i need to create a thumbnail, so i need the bitmap anyway complete in buffer / memory.

I do not access .Form, .Files or .InputStream or any other relevant from the Request-Object, so i don't understand why the call fails in azure, but works locally. Everything is 100% the same.

Can anybody help me, please?

Please, has anybody a tip for me? This problem is very hard and it is very important that i fix this, because otherwise i have no chance to get online on azure some day.

# generics - 避免不属于 Haskell 类的样板文件

> ID：12621063
> 
> 赞同：1
> 
> 时间：2012-09-27T12:10:08.720
> 
> 标签：generics, haskell, template-haskell, scrap-your-boilerplate

我正在开发人工生命实验的框架。该框架可以支持多个物种，只要每个物种都是代理类的一个实例。我将每个 Agent 包装在一个 AgentBox 中，这样我就可以在不知道底层类型的情况下读取、写入和使用它们。

这很好用，但是框架的用户必须编写一个小的样板函数。我很想知道是否有办法避免这种情况。我无法在 Agent 类中提供该函数的默认实现，因为该函数的类型签名没有提及类型变量。我可以忍受样板，但我很想知道是否有更好的方法。

这是我正在谈论的最小工作示例。最后的 getRock 函数是我希望避免强迫我的用户编写的函数。Agent 类的每个实例都需要提供一个函数来读取代理并将其包装在一个盒子中，并且实现看起来总是与 getRock 完全一样。

```
{-# LANGUAGE ExistentialQuantification, DeriveGeneric #-}

import qualified Data.Serialize as DS (Get, Serialize, get, put)
import Data.Serialize.Put (PutM)
import Data.List (find)
import Data.Maybe (fromJust, isNothing)
import GHC.Generics ( Generic )

class Agent a where
  agentId :: a -> String
  speciesId :: a -> String
  -- other functions to be added

-- This wrapper allows me to use Agents without knowing their type.
data AgentBox = forall a. (DS.Serialize a, Agent a) => AgentBox a

-- Instructions for deserialising an agent
data ReaderSpec = ReaderSpec { tag :: String, getter :: DS.Get AgentBox }

-- Serialise an AgentBox by putting the species tag, then the agent.
putAgentBox :: AgentBox -> PutM ()
putAgentBox (AgentBox a) = do
  DS.put $ speciesId a
  DS.put a

-- Deserialise an agent by getting the species tag, looking up the getter
-- for that species of agent, and then getting the agent itself.
getAgentBox :: [ReaderSpec] -> DS.Get (Either String AgentBox)
getAgentBox xs = do
  s <- DS.get :: DS.Get String
  let a = find (\x -> tag x == s) xs
  if isNothing a
     then return $ Left $ "No getter found for " ++ s
     else do
        let d = (getter . fromJust) a
        t <- d
        return $ Right t

--
-- Everything above this line is provided by the framework.
-- The user of the framework would create their own instances of the class
-- Agent, by writing something like this:
--

data Rock = Rock String Int deriving (Show, Generic)

rockTag :: String
rockTag = "Rock"

readerSpec :: ReaderSpec
readerSpec = ReaderSpec rockTag getRock

instance Agent Rock where
  agentId (Rock name _) = name
  speciesId _ = rockTag
  -- other functions to be added

instance DS.Serialize Rock

-- | Get the agent and wrap it in a box.
getRock :: DS.Get AgentBox
getRock = do
  t <- DS.get :: DS.Get Rock
  return $ AgentBox t 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:30:54.303

您可以编写一个函数来`ReaderSpec`为任何给定的 type 创建 s `a`，几乎像这样：

```
-- Create a 'ReaderSpec' that deserializes objects of type 'a'
mkReaderSpec :: (DS.Serialize a, Agent a) => String -> ReaderSpec 
```

由于`a`不会出现在参数或返回类型中，因此有必要将类型的代理作为额外参数传递。通常这是通过传递一个未定义的值来完成的。`a`通过调用强制表达式具有类型`asTypeOf`。

```
-- Create a 'ReaderSpec' that deserializes objects of type 'a'
mkReaderSpec :: (DS.Serialize a, Agent a) => String -> a -> ReaderSpec
mkReaderSpec tag dummy = ReaderSpec tag getter
  where
    getter = do {t <- DS.get; return $ AgentBox (t `asTypeOf` dummy)} 
```

现在框架可以`ReaderSpec`为任何给定类型生成 s。用户通过传入来选择类型和关联的类实例`undefined`。

```
readerSpec = mkReaderSpec "Rock" (undefined :: Rock) 
```

# python - Pyside：将函数中生成的var传递给另一个函数

> ID：12621066
> 
> 赞同：0
> 
> 时间：2012-09-27T12:10:15.043
> 
> 标签：python, function, pyside

以下功能均由单独的单击信号激活`QPushButton`。我想让用户可以选择一个`.pdf`文件，进行一些程序特定的编辑并将其保存到用户定义的位置。

我怎样才能将路径`.pdf`传递给另一个函数？

```
 def select(self):
    dir = "."
    fileObjOpen = QFileDialog.getOpenFileName(self, "Select a .pdf file", dir=dir, filter="PDF Files (*.pdf)")
    fileObjOpenName = fileObjOpen[0]

    if (len(fileObjOpenName) > 1):
        path_to_pdf = fileObjOpenName

def save(self):
    dir = "."
    fileObjSave = QFileDialog.getSaveFileName(self, "Where to save the new pdf file", dir=dir, filter="PDF Files (*.pdf)")
    fileNameSave = fileObjSave[0]

    if (len(fileNameSave) > 1):
        path_to_pdf = path_to_pdf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:25:50.387

我对此一无所知`pyside`，但似乎您正在使用一个类，因为`self`它是每个函数的第一个参数。如果是这种情况，您可以将其设置`path_to_pdf`为类实例的属性。

例如

```
def select(self):
    #snip ...
    if len(fileObjOpenName) > 1:
       self.path_to_pdf = fileObjOpenName

def save(self):
    #snip ...
    if len(fileNameSave) > 1:
       path_to_pdf = self.path_to_pdf 
```

如果我严重误解了这一点，请告诉我，我将删除我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:28:23.690

确保你的函数返回一些东西......：

```
def select(self):
    ...
    (filename, fileselector) = QFileDialog.getOpenFileName(...)
    if filename:
        return filename
    return 
```

默认情况下，`select`与 Python 中的任何方法或函数一样，将返回`None`，因此最后一个`return`是多余的（但我喜欢显示它实际结束的位置）。

现在，您将调用您的`other_function`as `other_function(YourWidget.select())`。

您还可以将输出存储在`.select()`您的属性中`QWidget`

# asp.net - Website (Store Front) configuration IIS 7 Issue

> ID：12621068
> 
> 赞同：0
> 
> 时间：2012-09-27T12:10:18.623
> 
> 标签：asp.net, iis, iis-7

I have a website working fine on another system, but when i tried to configure it on my laptop (Windows 7 , IIS7), It is showing following error on running. I searched alot on internet but unable to fix the issue. Anyone plz help

![enter image description here](../Images/65b588953c3749edf2894890d2384fff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T08:08:56.857

在浏览了许多网页并尝试了不同的解决方案后，我通过执行以下步骤解决了这个问题

*   在 Visual Studio 中打开命令窗口并编写 debug.startwithoutdebugging
*   出现错误页面，错误为 500.22
*   [我在 Follow Post](https://stackoverflow.com/questions/7370513/http-error-500-22-internal-server-error-an-asp-net-setting-has-been-detect)上搜索了错误 500.22 的解决方案，在我的情况下在 web.config 中添加了以下代码

这篇文章还有很多其他好的解决方案

# c# - c#如果一行不为空，则更改其颜色

> ID：12621070
> 
> 赞同：1
> 
> 时间：2012-09-27T12:10:21.420
> 
> 标签：c#, datagridview, colors, datagridviewcolumn

我有一张桌子，上面有一些值。如果行单元格“名称”不为空，则将背景颜色更改为紫色。

```
Name    ID    Customers

Niky    1     yes       // here change background to violet
        2     no
Donna   3     yes       // here change background to violet
Baka    4     no        // here change background to violet
        5     yes
        6     no 
```

我试过这段代码，但我不工作，不知道为什么：

```
 foreach (DataGridViewRow row1 in dataGridView1.Rows)
        {
            if (row1.Cells[0].Value != null)
            {
                row1.DefaultCellStyle.BackColor = Color.Violet;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:55:08.390

如果代码在事件处理程序中，则通常放置这种排序的位置，`DataBindingComplete`如下所示附加事件或使用设计器：

```
dataGridView1.DataBindingComplete += new DataGridViewBindingCompleteEventHandler(dataGridView1_DataBindingComplete); 
```

然后在处理程序中你有这样的东西：

```
void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    foreach (DataGridViewRow row1 in dataGridView1.Rows)
    {
        if (row1.Cells.Cast<DataGridViewCell>().Any(c => c.Value == null || string.IsNullOrWhiteSpace(c.Value.ToString())))
        {
            row1.DefaultCellStyle.BackColor = Color.Violet;
        }
        else
        {
            row1.DefaultCellStyle.BackColor = Color.White;
        }
    }
} 
```

在上面的代码中，我将您的原始代码更改为现在查看所有单元格，而不仅仅是第一个。

* * *

您还可以将代码放在 CellFormatting 事件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:14:14.553

我不知道你把颜色代码放在哪里，但我总是在绘图部分做

这是我根据状态为线着色的地方，除了依赖黄色或蓝色的第一列 - 这是正在进行的代码，应该整理一下

```
 private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
    {
        if (e.RowIndex >= 0 && e.ColumnIndex > 0)
        {
            if (dataGridView1.Rows[e.RowIndex].Cells[].Value.ToString() == "good")
            {
                e.CellStyle.BackColor = Color.PaleGreen;
                    e.CellStyle.SelectionForeColor = Color.Black;
                    e.CellStyle.SelectionBackColor = Color.Wheat;

            }
            if (dataGridView1.Rows[e.RowIndex].Cells[3].Value.ToString() == "warning")
            {
                e.CellStyle.BackColor = Color.LightGoldenrodYellow;
                e.CellStyle.SelectionForeColor = Color.Black;
                e.CellStyle.SelectionBackColor = Color.Wheat;
            }
            if (dataGridView1.Rows[e.RowIndex].Cells[3].Value.ToString() == "error")
            {
                e.CellStyle.BackColor = Color.Salmon;
                e.CellStyle.SelectionForeColor = Color.Black;
                e.CellStyle.SelectionBackColor = Color.Wheat;
            }

                if (e.Value.ToString() == "Yellow")
                {
                    e.CellStyle.BackColor = Color.Yellow;
                }
                else
                    if (e.Value.ToString() == "Blue")
                    {
                        e.CellStyle.BackColor = Color.LightBlue;
                    }

        }
    } 
```

或者你可以这样做：

```
foreach(DataGridViewRow r in dataGridView1.Rows) 
{ 
      if(!String.IsNullOrEmpty(r.Cells[0].Value.ToString()))
      { 
           r.DefaultCellStyle.BackColor = Color.Violet; 
      } 
} 
```

因此，如果一行的所有第一个单元格都不为空，则将该行着色为紫色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:20:22.710

你可以在gridview的rowdatabound事件上做到这一点

你也可以使用这个用法可以通过它：

```
foreach(DataGridViewRow r in dataGridView1.Rows)
{
      if(r.Cells.Cast<DataGridViewCell>().Any(c => c.Value.ToString() == string.Empty)) 
      {
           r.DefaultCellStyle.BackColor = Color.Violet;
      }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:47:24.987

实现这一点的一个好的（但不是高性能的）方法是`cell-formatting`datagridview 的事件。[您可以阅读MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)中的整个文档。本质是，您订阅了格式化事件，在此您可以解决格式化问题。

这样，无论用户是否正在调整大小、滚动任何内容，您都可以确保颜色等都很好。

顺便说一句：我不会在绘图事件中这样做，因为我了解到通常你会破坏一些自动绘图逻辑；）

[有关更多信息， MSDN](http://msdn.microsoft.com/en-us/library/1yef90x0.aspx)中有一篇关于 cellstyles 的文章，在这种情况下，这将是矫枉过正。但你永远不会知道足够的:)

# c# - 一种解决方案依赖于另一种解决方案 dll

> ID：12621071
> 
> 赞同：1
> 
> 时间：2012-09-27T12:10:30.053
> 
> 标签：c#, visual-studio-2010, dependency-properties, solution

我的解决方案在预构建步骤中构建了另一个解决方案 - 将工件作为“部署文件夹”作为“部署文件夹”。

假设文件在那里，我的引用在 dll 级别。

奇怪的是，我在第一个解决方案中编写的任何新代码（例如更改方法名称）都会被依赖于第一个解决方案的第二个解决方案忽略。

我尝试了很多东西，比如干净的解决方案、重建、在测试之间禁用 QTagent 等等。似乎他记得课程的第一个快照，仅此而已 - 当我尝试调试时不会进行任何更改。

在解决方案之间工作的最佳方式是什么，以便可以以这种方式调用代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:13:49.750

您应该在解决方案 (2) 中引用原始项目（解决方案 1），然后在主项目中添加对引用的原始项目的引用。Visual Studio 负责其余的工作。

这看起来像：
[示例 http://imageshack.us/a/img11/7493/57388651.png](http://imageshack.us/a/img11/7493/57388651.png)

如果您使用它来运行测试，那么您可以将测试项目添加到原始解决方案中。使用默认的 Visual Studio 单元测试，这看起来像：
[示例 2 http://imageshack.us/a/img39/3590/25226157.png](http://imageshack.us/a/img39/3590/25226157.png)

# solr - Denormalize datasource input for Solr

> ID：12621072
> 
> 赞同：1
> 
> 时间：2012-09-27T12:10:32.110
> 
> 标签：solr, lucene, denormalization

I have a MySql database from which I need to fetch data into Solr that is normalized in MySql over several tables. For example, I have an 'articles' table that have a 'companyId' column. 'companyIds' are linked to 'companyName' in a second table 'company'. So in order to be able to find articles by company name using Solr I need to denormalize when building the Solr index.

What is the easiest way to do this? Can denormalization be done in the data source configuration or do I need to denormalize prior to creating the index?

Feeding data using Solrj and normalizing while doing it seems to be the easiest method I can come up with at the moment (although it seems unnecessary if Solr has those features).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:16:37.503

啊，我在数据导入处理程序的文档中找到了我想要的东西。可以使用下面的“子实体”查询来提取对包含在当前表中找到的引用值的表的查询。

通过使用父实体/查询中的 category_id 从类别表中选择来解析项目的类别名称：

```
<entity name="item_category" query="select category_id from item_category where item_id='${item.id}'">
    <entity name="category" query="select description from category where id = '${item_category.category_id}'">
                <field column="description" name="cat" />
    </entity>
</entity> 
```

来自这里的 XML： [http ://wiki.apache.org/solr/DataImportHandler#Full_Import_Example](http://wiki.apache.org/solr/DataImportHandler#Full_Import_Example)

# iphone - iphone FMDB / SQLite 更新查询不起作用

> ID：12621073
> 
> 赞同：2
> 
> 时间：2012-09-27T12:10:36.100
> 
> 标签：iphone, ios, sqlite, sql-update, fmdb

我尝试使用 sql wrapper (FMDB) 在表中进行更新。插入方法没问题，当我尝试更新表中的数据时会出现问题。

```
- (void)saveUserMoneyValidation:(UserDebtInfo *)entities
{
    NSLog(@"entities.client_index = %d", entities.client_index);

    [self deleteUserMoneyValidation:entities.client_index];

    FMDatabase *newdb = [FMDatabase databaseWithPath:databasePathStore];

    [newdb setLogsErrors:TRUE];
    [newdb setTraceExecution:FALSE];

    if (![newdb open])
    { 
        NSLog(@"!!! Could not open db."); 
        return; 
    }
    else 
    { 
        NSLog(@"DB Open successfuly."); 
    }

    [newdb beginTransaction];
    NSLog(@"entities = %@",entities);

    [newdb executeUpdate:@"INSERT INTO MoneyValidation (client_index, client_name, sum, duration, monthly_payment, payment_type, debt_type, debt_code, categoryType) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)",
    [NSNumber numberWithInt:entities.client_index],
     entities.client_name,
     entities.sum,
     entities.duration,
     entities.monthly_payment,
     entities.payment_type,
     entities.debt_type,
     [NSNumber numberWithInt:entities.debt_code],
     entities.categoryType
     ];

    [newdb commit];
    [newdb close];
} 
```

更新方法：

```
 -(void)updateUserMoneyValidation:(UserDebtInfo *)entities{
NSLog(@"entities.client_index = %d", entities.client_index);

FMDatabase *newdb = [FMDatabase databaseWithPath:databasePathStore];

[newdb setLogsErrors:TRUE];
[newdb setTraceExecution:FALSE];

if (![newdb open])
{ 
    NSLog(@"!!! Could not open db."); 
    return; 
}
else 
{ 
    NSLog(@"DB Open successfuly."); 
}

BOOL success = NO;

[newdb beginTransaction];
NSLog(@"entities = %@",entities);

success = [newdb executeUpdate:@"UPDATE MoneyValidation SET client_name = ?, sum = ?, duration = ?, monthly_payment = ?, payment_type = ?, debt_type = ?, debt_code = ?, categoryType = ?  WHERE client_index = %d;", entities.client_name, entities.sum, entities.duration, entities.duration, entities.monthly_payment, entities.payment_type, entities.debt_type, entities.debt_code, entities.categoryType, entities.client_index];

if (success)
{
    NSLog(@"OK");
    [db commit];
    [db close];
}
else 
{
    NSLog(@"FAIL");
}

NSLog(@"OBJ - %@", entities);} 
```

表结构：

```
CREATE TABLE MoneyValidation (ID INTEGER PRIMARY KEY, client_index INTEGER, client_name TEXT, sum TEXT, duration TEXT, monthly_payment TEXT, payment_type TEXT, debt_type TEXT, debt_code INTEGER, categoryType TEXT) 
```

*   client_index 是唯一代码；

    有人可以帮我就这个问题提供一些建议吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:26:07.700

我认为问题在于您的更新声明。传递给“executeUpdate”的所有值都应该是对象。

在您的更新 SQL 语句中，`entities.debt_code`并且`entities.client_index`作为 INTEGERS 传递，您需要将它们作为**NSNumber**对象传递。

尝试以下操作：

```
success = [newdb executeUpdate:@"UPDATE MoneyValidation 
           SET client_name = ?, sum = ?, 
           duration = ?, monthly_payment = ?, 
           payment_type = ?, debt_type = ?, 
           debt_code = ?, categoryType = ?  
           WHERE client_index = %d;", 

          entities.client_name, entities.sum, 
          entities.duration, entities.duration, 
          entities.monthly_payment, entities.payment_type, 
          entities.debt_type, 
          [NSNumber numberWithInt:entities.debt_code],  // Convert int to object type
          entities.categoryType, 
          [NSNumber numberWithInt:entities.client_index] // Convert int to object type
          ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:15:16.830

把你的更新 SQL 放到一个 NSString 中，这样你就可以在 NSLog 中输出它，看看它是否有问题。还要检查 FMDatabase 对象上的 lastError 属性 - 如果它不为零，则 NSLog 同一对象的 lastErrorMessage 属性以查看 FMDB 抱怨的内容。

# java - How to find the selected option of a Dropdown?

> ID：12621075
> 
> 赞同：0
> 
> 时间：2012-09-27T12:10:36.693
> 
> 标签：java, selenium, webdriver, selenium-webdriver

How do we find the selected option of a Dropdown in Selenium Webdriver??

I tried -

```
WebElement element = driver.findElement(By.xpath(locator1));
Select select = new Select(element);
List<WebElement> SO = select.getAllSelectedOptions();
String S = SO.toString();
System.out.println(S); 
```

which returns WebElements like -

```
[[[[[FirefoxDriver: firefox on XP (c388e8a8-09d5-41b9-b086-0278c639d8b1)] -> xpath: .//*[@id='city']]] -> tag name: option]] 
```

I want to find the option that is selected?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:21:41.730

您可以在对象`getFirstSelectedOption()`上使用该方法`Select`来解析所选元素，并可以通过该`getText()`方法获取它的文本。请参见下面的示例：

**对于单选：**

```
WebElement element = driver.findElement(By.xpath(locator1));
Select select = new Select(element);
WebElement selectedOption = select.getFirstSelectedOption();
System.out.println(selectedOption.getText()); 
```

**对于多项选择：**

```
WebElement element = driver.findElement(By.xpath(locator1));
Select select = new Select(element);
List<WebElement> selectedOptions = select.getAllSelectedOptions();
for(WebElement selectedOption : selectedOptions) {
    System.out.println(selectedOption.getText());
} 
```

# php - How to create login form to access private area

> ID：12621080
> 
> 赞同：0
> 
> 时间：2012-09-27T12:11:02.887
> 
> 标签：php, login

I have a client that wants users to access a private area on their HTML website to download resources.

Just wanted your advice on what the best solution would be to set this up.

My knowledge in PHP is pretty poor.

We have also spoke about moving their website over to a CMS such as wordpress. Would this be easier to do with Wordpress via a plugin, or is it just as easy to implement on a static HTML site?

Any advice would be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:14:25.177

我认为在您的情况下，最简单的方法是创建一个 htpasswd 文件。

将`.htaccess`文件放在您希望私有的目录中并写入：

```
AuthUserFile /real/path/to/file/.htpasswd
AuthType Basic
AuthName "Secreat place"
require valid-user 
```

并`.htpasswd`写入用户和**加密**密码：

```
admin:$apr1$nOq27Mwz$xnM1lIqrwyvbBmp0V/.TJ1 
```

PS：这个代表密码*admin*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:17:40.590

这取决于很多很多事情。我建议您搜索`user authentication php`并选择最适合您需求的解决方案。然后，如果您在实施它时遇到麻烦，请在 Stack 上提问。

# java - Exit gracefully from blocked process

> ID：12621081
> 
> 赞同：3
> 
> 时间：2012-09-27T12:11:08.603
> 
> 标签：java, process

I am launching a service (process) with the code below. My issue is as follows:

*   I need to read the output of the process to make sure it gets started
*   if it gets started, I return and everything is fine
*   if it does not get started for whatever reason, the while will block forever as the process just hangs without outputting anything

Any ideas how I could exit the method gracefully if I don't get the expected string?

ps: I could do it with a Future and a timeout on get but thought there might be a better way.

```
public boolean startService() {
    try {
        ProcessBuilder pb = new ProcessBuilder("service.exe");
        pb.directory(new File("C:/serviceFolder/"));
        pb.redirectErrorStream(true);
        Process p = pb.start();
        BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line;
        while ((line = reader.readLine()) != null) {
            if (line.toLowerCase().contains("started")) {
                return true;
            }
        }
        return false; //I never get there when it fails
    } catch (IOException e) {
        throw new RuntimeException("Could not start the service.exe process", e);
    }        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:57:44.113

如果您可以修改服务代码，最好将其更改为在无法启动时不要挂起 - 它应该退出并记录错误消息。这样，您的 Java 代码将按原样工作。

如果不能，除了设置超时之外别无他法，因为您的 Java 代码无法知道发生了什么。

当然，如果您可以修改服务，另一种方法是监视进程的标准输出/错误以外的输出，例如 PID 文件、错误日志消息或其他任何内容。例如，如果子进程已经创建了一个 PID 文件，您可以安排对该文件而不是标准输入的检查，但实际上这是相同的概念，只是应用不同以使用更好/更简单的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:38:50.393

似乎该`Future#get`方法是首选。为了将来参考，我通过以下方式修改了代码：

```
public boolean startService() {

    Callable<Boolean> start = new Callable<Boolean>() {
        @Override
        public Boolean call() throws Exception {
            ProcessBuilder pb = new ProcessBuilder("service.exe");
            pb.directory(new File("C:/serviceFolder/"));
            pb.redirectErrorStream(true);
            Process p = pb.start();
            BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String line;
            while ((line = reader.readLine()) != null) {
                if (line.toLowerCase().contains("started")) {
                    return true;
                }
            }
            return false;
        }
    };

    ExecutorService executor = Executors.newSingleThreadExecutor();
    Future<Boolean> future = executor.submit(start);

    try {
        return future.get(1, TimeUnit.SECONDS);
    } catch (InterruptedException ignore) {
        Thread.currentThread().interrupt();
        return false;
    } catch (ExecutionException | TimeoutException e) {
        logger.error("Could not start service", e);
        return false;
    } finally {
        executor.shutdownNow();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:38:46.387

像这样的东西应该工作。本质上，在一个单独的线程中启动服务并创建一个`Timer`在一段时间后中断它的服务。请注意，计时器任务是一个`Daemon`，因此如果它需要退出，它不应该阻止您的进程。

`reader.readLine()`显然，如果消耗和丢弃中断，这将不起作用。

```
private static class ServiceRunner implements Runnable {
  // Am I running?
  volatile boolean running = true;
  // My thread.
  volatile Thread thread = Thread.currentThread();

  @Override
  public void run() {
    // Start a timer.
    Timer timer = new Timer("Wait for ServiceRunner to finish.", true);
    // Fire it after 2 seconds.
    timer.schedule(new StopTask(), 2000);
    try {
      // Start the service.
      startService();
    } finally {
      // No longer running.
      running = false;
    }
  }

  class StopTask extends TimerTask {

    @Override
    public void run() {
      if (running) {
        // Interrupt the service runner.
        thread.interrupt();
      }
    }
  }

  public boolean startService() {
    try {
      ProcessBuilder pb = new ProcessBuilder("service.exe");
      pb.directory(new File("C:/serviceFolder/"));
      pb.redirectErrorStream(true);
      Process p = pb.start();
      BufferedReader reader = new BufferedReader(new InputStreamReader(p.getInputStream()));
      String line;
      while ((line = reader.readLine()) != null) {
        if (line.toLowerCase().contains("started")) {
          return true;
        }
      }
      return false; //I never get there when it fails
    } catch (IOException e) {
      throw new RuntimeException("Could not start the service.exe process", e);
    }
  }
} 
```

我没有测试过这段代码，但它应该可以工作。

您将需要进行调整以保留服务是否已启动。

# android - reading accelerometer value

> ID：12621082
> 
> 赞同：0
> 
> 时间：2012-09-27T12:11:11.007
> 
> 标签：android

I'm quite new to android development, and just know started to learn how to use the sensors.

I started reading about the sensors in the the developers.android site, and came across [this](http://developer.android.com/reference/android/hardware/SensorEvent.html#values) article.

it says there that in order to get the real acceleration you should apply a `high pass filter`, because the sensor reads also the gravity force.

*my question is:* why not just subtract the gravity force (g) from the value?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:15:27.673

因为实际感应到的重力取决于您的设备与垂直方向的角度。

高通将过滤常数（和慢动作）

什么是包含指向各种资源的链接[的高通和低通滤波器。](https://stackoverflow.com/questions/35530/what-are-high-pass-and-low-pass-filters)

# javascript - 如何在单击按钮时加载地图

> ID：12621083
> 
> 赞同：0
> 
> 时间：2012-09-27T12:11:21.980
> 
> 标签：javascript, html, google-maps

试图实现以下但它不起作用

```
<script>
     function loadmap(lat,lng)
                {
                //alert("lat,lang");
                var point = new google.maps.LatLng('12.9833','77.5833');
                document.getElementById("menu").disabled=true;
              }
    </script>
<body>
<div id="container">

<div id="header" style="background-color:#FFA500;">
<h1 style="margin-bottom:0;">World Traveler</h1></div>

<div id="menu" style="background-color:#FFD700;height:800px;width:100px;float:left;">
<table border="0">
<tr>
<th>Cities</th>
</tr>
<tr>
<td onclick="loadMap('40.44','83.43');">newyork</td>
</tr>
<tr>
<td onclick="loadMap('42.3295','-83.1908');">Michigan</td>
</tr>
script type="text/javascript">
        var map;
        var markersArray = [];

        function initialize()
        {
            var latlng = new google.maps.LatLng(12.9833, 77.5833);
            var myOptions = {
                zoom: 10,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            // add a click event handler to the map object
            google.maps.event.addListener(map, "click", function(event)
            {
                // place a marker
                placeMarker(event.latLng);

                // display the lat/lng in your form's lat/lng fields
                document.getElementById("latFld").value = event.latLng.lat();
                document.getElementById("lngFld").value = event.latLng.lng();
            });
        }
        function placeMarker(location) {
            // first remove all markers if there are any
            deleteOverlays();

            var marker = new google.maps.Marker({
                position: location,
                icon: "http://localhost:8080/HTML5/pin_blue.png",
                map: map
            });

            // add marker in markers array
            markersArray.push(marker);

            //map.setCenter(location);
        }

        // Deletes all markers in the array by removing references to them
        function deleteOverlays() {
            if (markersArray) {
                for (i in markersArray) {
                    markersArray[i].setMap(null);
                }
            markersArray.length = 0;
            }
        }
    </script> 
```

每当用户单击菜单时，应显示带有标记的特定地图。iam 在 js 中实现此功能...任何帮助都会被应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:44:24.307

检查您的 javascript 调试控制台。我认为这是因为您调用的`<td>`是 to`'loadMap()'`但该函数被调用`loadmap()`。Javascript 区分大小写。

但是你仍然需要更新你的 loadmap 函数，因为它目前没有做任何事情。像这样的东西：

```
 <table border="0">
         <tr>
            <th>Cities</th>
         </tr>
         <tr>
             <td onclick="loadMap('40.44','83.43');">newyork</td>
         </tr>
         <tr>
              <td onclick="loadMap('42.3295','-83.1908');">Michigan</td>
         </tr>
      <table>
    <div id="map_canvas" style="width:400px; height:400px"></div>
          <p>latitude: <span id="lat"></span></p>
          <p>longitude: <span id="lng"></span></p>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
      var map;
      var home;
      var markersArray = [];

      function initialize() {
           home = new google.maps.LatLng('12.9833','77.5833');   
           var opts = {
                zoom: 8,
                center: home,
                mapTypeId: google.maps.MapTypeId.ROADMAP
           };

           map = new google.maps.Map(document.getElementById('map_canvas'), opts);
           google.maps.event.addListener(map, "click", function(event) {
                  showMarker(event.latLng);
               });    

      }

      function loadMap(lat,lng)
           {
               var location= new google.maps.LatLng(lat, lng);
               map.setCenter(location);
               document.getElementById("lat").innerHTML = location.lat();
               document.getElementById("lng").innerHTML = location.lng();
           }

        function showMarker(location) {    
               deleteOverlays();               
               var marker = new google.maps.Marker({
                   position: location,
                   map: map
               });
               markersArray.push(marker);
               document.getElementById("lat").innerHTML = location.lat();
               document.getElementById("lng").innerHTML = location.lng();
        }

       function deleteOverlays() {
            if (markersArray) {
                for (i=0; i < markersArray.length; i++) {
                    markersArray[i].setMap(null);
                }
            markersArray.length = 0;
            }
        }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:35:19.793

您的`loadMap`功能现在没有做任何事情。您需要在函数`LatLng`中创建的地图上放置一个标记。`loadMap`

```
function loadmap(lat,lng) {
    //alert("lat,lang");
    var point = new google.maps.LatLng('12.9833','77.5833');
    placeMarker(point);
    document.getElementById("menu").disabled=true;
} 
```

# android - Guide: How to compile a c program for Android

> ID：12621088
> 
> 赞同：3
> 
> 时间：2012-09-27T12:11:27.207
> 
> 标签：android, c, android-ndk

> **Possible Duplicate:**
> [How to compile and run a C/C++ program on the Android system](https://stackoverflow.com/questions/8698798/how-to-compile-and-run-a-c-c-program-on-the-android-system)

I recently got a project to compile a c program to be used on Android. I already had an makefile for it, but the problem was how to simply compile it to be used on Android, using a linux emulator on my Windows PC. I've searched the net for a good tutorial and couldn't find a simple one.

I hope it'll help someone

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T12:11:27.207

That's the first time I write a tutorial or a guide here, and English isn't my native language, so i'm sorry about the quality of this tutorial ahead :)

Goal: To compile a c program, using gcc, for being used in an Android app.

The things you need:

1.  Linux or linux emulator (such as VMWare).

2.  Latest NDK from google: [http://developer.android.com/tools/sdk/ndk/index.html#Downloads](http://developer.android.com/tools/sdk/ndk/index.html#Downloads)

All the next instructions should be done by using some Linux shell. I've used "Terminal".

1.  create a shortcut for your NDK download dir, something like: "NDK=$HOME/android-ndk-r8b"

2.  declare SYSROOT- which is a root directory gcc is using for compilation. something like: "SYSROOT=$NDK/platforms/android-8/arch-arm".

3.  Link SYSROOT and the binaries needed for compilation, by typing something like: "cd $NDK/build/tools" "sh make-standalone-toolchain.sh --arch=arm --ndk-dir=$HOME/android-ndk-r8b --install-dir=$HOME/android-toolchain --platform=android-8"

4.  Expand PATH, which will be used for invoking gcc. something like: "export PATH=$HOME/android-toolchain/bin:$PATH"

5.  Create a shortcut for the Android gcc, by something like: export CC=arm-linux-androideabi-gcc

I've used android-8 as my minimum needed NDK version. You can set it to every NDK- supported SDK version, available in the NDK.

Now you can compile for arm on linux by simply invoking "$CC" instead of "gcc" for normal linux c compiling.

# .htaccess - .htaccess rewrite except images and script files

> ID：12621098
> 
> 赞同：0
> 
> 时间：2012-09-27T12:11:52.950
> 
> 标签：.htaccess, redirect, rewrite, match

I have the following rewrite:

```
RewriteRule ^/blog/(.*)$ http://www.domain.co.uk [NC,L,R=301] 
```

But I only want it to happen if it is not a image file (.jpg, .gif, .png) or a script file (.js). Does anyone know how to set this?

(It is a wordpress blog and I want to redirect all pages but keep the scripts and images active.)

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:29:47.810

我发现我必须将位于 wordpress 文件中的 .htaccess 文件编辑为：

```
RewriteEngine On

RedirectMatch 301 ^/blog/$ http://www.domain.co.uk

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . / [R=301,L]
</IfModule>

# END WordPress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:16:10.620

```
RewriteCond %{REQUEST_FILENAME} !^(.+)\.js$
RewriteCond %{REQUEST_FILENAME} !^(.+)\.png$
RewriteCond %{REQUEST_FILENAME} !^(.+)\.jpg$
RewriteCond %{REQUEST_FILENAME} !^(.+)\.jpeg$
RewriteCond %{REQUEST_FILENAME} !^(.+)\.gif$
RewriteRule ^/blog/(.+)$ http://www.domain.co.uk [NC,L,R=301] 
```

# ios - 将应用程序从 iOS 5.1 更新到 6.0 - 新警告？

> ID：12621104
> 
> 赞同：0
> 
> 时间：2012-09-27T12:12:07.630
> 
> 标签：ios, xcode, warnings

我是应用程序和 Xcode 的更新/版本控制过程的新手，所以这里有几个问题：

我创建了应用程序，并获得了在旧 xcode 和模拟器 5.1 中运行的苹果的批准。我没有任何警告信息。现在在新的 xcode 和模拟器 6.0 中运行时，我收到 20 多条新的警告消息。

Apple 是否希望在任何版本的任何版本中都没有警告？我需要修复所有警告还是只修复某些警告？（即我的应用程序文件与我包含/导入应用程序的外部第 3 方框架/库）为此版本 6.0 修复它们可能会因旧版本而中断，对吗？该应用程序是使用 5.1 的目标创建的，但想将其移回 4.3（更多用户覆盖），我只能在模拟器上进行测试，可以吗？

以下是一些示例警告： - JSONKit.m - 语义问题 - 直接访问 Objective-c 的 isa 已被弃用，取而代之的是 object_setClass() 和 object_getClass() - 许多类型，如 - 格式说明类型为“无符号长”，但参数有type 'NSUInteger' (aka 'unsigned int') - Cocoa API 问题 - 使用带有文字的'stringWithString:' 是多余的

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:17:54.503

Apple 不知道您在编译代码时收到了哪些警告。他们所看到的只是一个签名的二进制文件，一个可以工作（批准）或不工作（拒绝）的二进制文件。

你为什么现在得到它们？因为新版本的 Xcode 具有更好的启发式检查可疑代码。弃用警告是因为您现在使用更新版本的 iOS 作为目标。

你应该修理它们吗？大概。我确实发布了带有编译警告的代码，但您需要考虑不根据具体情况修复警告的风险。有些比其他的更重要或更危险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:23:54.143

约定是编译器生成错误和警告。

错误是阻止编译器解析源代码和生成代码的致命问题。

编译器警告是关于潜在问题，这些问题不会阻止编译成功，但可能会导致运行时出现问题，或者标记您应该注意的问题。

您应该了解每个警告所描述的问题，并决定是否采取措施。

具体来说，弃用警告是一个“提示”，即未来版本的 iOS（或库或其他）可能不再支持您正在使用的 API，是时候考虑迁移到新的 API，或者删除依赖于该 API 的代码。

通常，可以安全地忽略警告，但最好的做法是保持代码中没有警告，以便任何新警告都很明显，并引起您的注意。

Apple 不会根据编译警告拒绝应用程序。Apple 只能看到提交的二进制文件，无权访问源代码和任何相关警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:20:53.507

在使用 JSONKit 的情况下，我建议将您的代码包装在一个适配器类周围，以便您可以将 NSJSONSerialization 用于高于或等于 5.0 的版本。

iOS 版本低于 5.0 的用户群有多大？我读到它不到1％？

# javascript - JavaScript CSS 选择器

> ID：12621119
> 
> 赞同：0
> 
> 时间：2012-09-27T12:12:58.637
> 
> 标签：javascript, html, css, slider

我正在阅读一些 JavaScript 以尝试创建自己的滑块，但遇到了一些让我有点困惑的东西。有一个 CSS 规则如下：

```
html.js #slideshow .slides img
{
    position: absolute;
} 
```

解释说，该规则仅在 JavaScript 可用时才适用。现在我有点困惑......如果浏览器中提供 JavaScript，是否会应用此规则？或者文件“html.js”是否已包含在 html 页面中，或者是否包含任何 JavaScript 文件？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:14:37.330

这是一种使用 javascript 将类“js”添加到 html 标记的技术。没有 javascript，没有 js 类。让你的 CSS 很容易知道 JS 是否启用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:14:29.953

可能在您的页面中，您的头部有一个脚本，该脚本`js`向根元素添加了一个类

这将确保仅当客户端上的 javascript 可用时才应用 CSS 规则。当然，如果 javascript 不可用，则脚本不会插入该类。

这是一种现代方法，专门用于防止无样式内容 (FOUC) 的闪现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:18:30.010

您看到的页面可能正在使用[Modernizr](http://modernizr.com/)。它是一个 JavaScript 库，可检测用户浏览器中的 HTML5 和 CSS3 功能，并通过向 HTML 元素添加类“no-js”来工作，当页面加载时，Modernizr 将其替换为您正在测试的规则集。

如果您想在浏览器中测试特定功能，请查看 Modernizr 网站了解更多详细信息。

如果您不想使用 Modernizr，您可以使用 JavaScript 直接将其放置在您的`<title>`标签中：

```
<script>
    document.documentElement.className = document.documentElement.className.replace(/(\s|^)no-js(\s|$)/, '$1' + 'js' + '$2');
</script> 
```

# c# - 统计 Youtube

> ID：12621125
> 
> 赞同：0
> 
> 时间：2012-09-27T12:13:29.977
> 
> 标签：c#, youtube-api

我正在“玩”YouTube API，只知道访问次数、评分、收藏夹等。我想知道是否有任何选项可以获取 youtube 用来绘制统计图的数据，比如在 youtube 页面中完成？

我的意思是知道视频播放的次数。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:17:05.283

根据[Youtube 2.0 API](https://developers.google.com/youtube/2.0/developers_guide_protocol_insight)，您可以提及`user_starttime`并`user_endtime`获得一份洞察报告，其中包含从不早于 2009 年 3 月 1 日开始的长达 31 天的数据。

您可以获取您想要绘制的每个月的样本。

* * *

还有一个处于测试阶段的[Youtube Analytics 程序](https://developers.google.com/youtube/analytics/)

> *   指标是对用户活动的单独衡量，例如视频观看次数或评分（喜欢和不喜欢）。
>     
>     
> *   维度是可用于聚合数据的通用标准，例如用户活动发生的日期或用户所在的国家/地区。维度也可用于过滤数据。例如，您可以只检索来自特定国家或特定视频的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:03:05.980

我已经找到并测试了这段代码，它可以让我从 youtube 视频中获得喜欢和不喜欢。尽管它不允许我获取统计图（我认为这是不可能的），但我从视频中获得了更多信息 :)

雷诺感谢您的关注！！！

[https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/UBbiyE3Cw5M](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/UBbiyE3Cw5M)

顺便说一句，我尝试使用带有 c# 的 Analytics 程序...没有好的结果

# moq - 如何设置 Moq 以执行 Moq 的某些方法

> ID：12621129
> 
> 赞同：3
> 
> 时间：2012-09-27T12:13:40.547
> 
> 标签：moq

我有一个测试，我传入一个像这样的对象：

```
var repo = new ActualRepo();

var sut = new Sut(repo); 
```

在我的测试中，Repo 有一个我需要实际执行的方法，而另一个我想模拟而不执行的方法。

例如，以这个伪代码为例：

```
var repo = new Mock<IRepo>();

repo.Setup(m => m.MethodIWantToCall()).WillBeExecuted();
repo.Setup(m => m.MethodIWantToMock()).Returns(false); 
```

使用最小起订量，这可能吗？怎么做？

编辑：我过去使用过 TypeMock，你可以做类似的事情。

```
Isolator.When(() => repo.MethodToIgnore()).WillBeIgnored();
Isolator.When(() => repo.MethodToActuallyRun()).WillBeExecuted(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:26:40.087

从问题中不太确定这是否有用，但如果您要模拟的方法是*virtual* ，则可以部分模拟对象。

```
public class Foo {
    public string GetLive() {
        return "Hello";
    }

    public virtual string GetMock() {
        return "Hello";
    }
}

public class Snafu {
    private Foo _foo;
    public Snafu(Foo foo) {
      _foo = foo;
    }

    public string GetMessage() {
        return string.Format("{0} {1}", _foo.GetLive(), _foo.GetMock());
    }
}

[TestMethod]
public void NotMocked() {
    var snafu = new Snafu(new Foo());
    Assert.AreEqual("Hello Hello", snafu.GetMessage());
}

[TestMethod]
public void Mocked() {

    var mockFoo = new Mock<Foo>();
    mockFoo.Setup(mk => mk.GetMock()).Returns("World");

    var snafu = new Snafu(mockFoo.Object);

    Assert.AreEqual("Hello World", snafu.GetMessage());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T12:46:12.447

如果您使用相同的对象，则不能使用 Moq 执行此操作，除非其中一种方法是虚拟的，并且您的模拟基于类型而不是接口。

这是因为当你传递一个基于接口的模拟对象时，你并没有传递一个真实的对象，因此它无法访问该对象的真实方法。

您正在传递一个[动态代理](http://www.castleproject.org/projects/dynamicproxy/)，它将响应它已设置响应的方法。

我相信 TypeMock 会在运行时重写程序集来实现这一点，而 Moq 绝对不会这样做。

如果您想使用 Moq 获得类似的结果：

*   你可以模拟这两种方法
*   您必须将这两种方法提取到不同的依赖项，以便模拟一个依赖项而不是另一个。
*   你可以让你需要模拟的方法是虚拟的，这将是我更喜欢的解决方案。

**编辑：阅读**[AlanT 的答案](https://stackoverflow.com/a/12624872/153797)后，我编辑了我的答案以确保正确性。

# c# - 如何在ListView中将两列的值连接成一列

> ID：12621133
> 
> 赞同：0
> 
> 时间：2012-09-27T12:13:58.500
> 
> 标签：c#, wpf, listview, mvvm

我有一个包含列表视图的 .xaml 文件。Listview 有 2 个项目，其中以下列方式绑定：

```
<ListView  Name="listView" ItemsSource="{Binding DeviceList}" SelectedItem="{Binding ConnectedDevice, Mode=TwoWay}" >
        <ListView.View>
            <GridView>
                <GridViewColumn Width="300" Header="Name" DisplayMemberBinding="{Binding Description}" />
                <GridViewColumn Width="240" Header="Connection Status" DisplayMemberBinding="{Binding DeviceName}" />
            </GridView>
        </ListView.View>
    </ListView> 
```

**描述**和设备名称都是**ModelClass**的一部分。在我的 ViewModel 类中，我能够从我连接的硬件中提取设备名称和描述。

```
 public ObservableCollection<ComDeviceInfo> DeviceList
    {
        get { return comDevices; }
        set
        {
            comDevices = value;
            NotifyPropertyChanged("DeviceList");
        }
    }

    public ComDeviceInfo ConnectedDevice
    {
        get { return connectedDevice; }
        set
        {
            connectedDevice = value;
            NotifyPropertyChanged("ConnectedDevice");
        }
    }        

    //Called Inside Constructor
    private void checkForDevicesTimer_Elapsed(Object source, ElapsedEventArgs e)
    {            
        DeviceList = ComDeviceManagement.FindDevices();            
    } 
```

这里**ComDeviceManagement**是我的类，它有**FINDDevices()**它返回设备名称和描述。你可以注意到上面的 DeviceList = ComDeviceManagement.FindDevices() 表明描述和名称都存在于列表中。

一切正常。但我基本上想要的是在一列中显示设备名称和描述，而不是两个单独的列。那么我在这里面临的问题是设备名称和描述。即使它们都显示不同的值，难道不是我可以将它们连接起来并将两个值显示到单个列中的一种方式吗？？？您可能会注意到 .xaml 文件中的另一列，但我想在 listView 的单个列中显示（连接）这两个列。我怎样才能做到这一点？

请帮忙！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:43:33.147

使用带有格式字符串的[MultiBinding 。](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)

```
<GridViewColumn>
    <TextBlock>
        <!-- the Text property is of type System.String -->
        <TextBlock.Text>
            <MultiBinding StringFormat="{0} {1}">
                <Binding Path="Description "/>
                <Binding Path="Name"/>
             </MultiBinding>
         </TextBlock.Text>
     </TextBlock> 
</GridViewColumn> 
```

对于 MultiBinding，您必须了解的是，如果目标属性*不是字符串*，那么您必须提供一个转换器。如果它*是一个字符串*，你可以只使用格式字符串。

因此，在您的情况下，您不能（轻松地）通过 DisplayMemberBinding 使用它，您必须像上面的示例中那样指定内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T12:25:38.807

两种方法

在 ComDeviceInfo 类中，只需添加一个连接属性

```
 public string DescName 
  {
      get 
      {
           return Description + " " + Name;
      }
  {

<GridViewColumn Width="300" Header="Name" DisplayMemberBinding="{Binding DescName}" /> 
```

或者使用多值转换器

[MultiBinding.Converter](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.converter.aspx)

将提供和示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T12:44:04.620

我会添加一个新属性，但不要忘记在其组件更改时也对其进行更新。

```
 private ComDeviceInfo _model;

 public string DeviceName
 {
     get { return _model.Name; }
     set
     {
         _model.Name = value;
         NotifyPropertyChanged("DeviceName");
         NotifyPropertyChanged("Combined");
     }
 }
 public string Description
 {
     get { return _model.Description; }
     set
     {
         _model.Description = value;
         NotifyPropertyChanged("Description");
         NotifyPropertyChanged("Combined");
     }
 } 
 public string Combined
 {
     get { return string.Format("{0} : {1}", _description, _deviceName; }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T05:52:23.727

如果您使用 LINQ 查询来获取数据，您可以这样做：

```
var query = from devices in DeviceList
            select new
            {.DeviceDesc = devices.device + " " devices.desc}

listview.ItemsSource = query; 
```

然后进入 GridView.Column 并使用：

```
DisplayMemberBinding="{Binding DeviceDesc}" 
```

它将绑定您刚刚创建的连接列。显然你需要编写正确的查询，我的只是一个例子......

# javascript - 使用 innerHTML 插入的活动 javascript

> ID：12621134
> 
> 赞同：0
> 
> 时间：2012-09-27T12:14:03.910
> 
> 标签：javascript, ajax

我正在尝试使 Ajax 页面更有用，其中一些包含 java 脚本可以以某种方式激活 java 脚本，因为到目前为止我没有找到任何可以帮助我的东西：

```
 <script>
   var d=document.getElementById("foo");
   d.innerHTML="<script type='text/javascript'>alert('yey');</script>";
 </script> 
```

我希望这能提醒我“耶”，但它自然没有任何 idias 吗？请不要查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:25:07.273

您正在尝试的内容将不起作用，因为加载页面时机器上会解释 javascript，因此，当您插入代码时，页面的整个脚本已经被浏览器的 javascript 引擎和您的代码解析在页面上插入被引擎视为纯文本。

在页面刷新之前，代码不会再次发送到引擎，但是当它这样做时，您插入的 javascript 将消失，因为它在页面加载时不存在。

您需要做的是在您的内容上使用某种类型的模板/包含系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:28:04.007

我知道了！

```
var d=document.getElementById("foo");
 d.innerHTML="<script type='text/javascript'>alert('yey');</script>";

startScrypt(d);

function startScrypt(obj) {.
 if (!obj) return;
 var children=obj.childNodes;  
 for (var i in children) 
   if (children[i]){
                       if (children[i].tagName=="SCRIPT") { 
                          if (!children[i].src || children[i].src=="") 
                               window.setTimeout(children[i].innerHTML,0); 
                               else {load_scrit_src(children[i].src);}
                        }   else startScrypt(children[i]);
                   }
} 
```

那很好……谢谢大家。

# jquery - 悬停显示带有动画的图像的jQuery

> ID：12621141
> 
> 赞同：0
> 
> 时间：2012-09-27T12:14:17.737
> 
> 标签：jquery

`a`我在标签中有两张图片

```
<a>
<img src="blabla.jpg" class="VisibleImage" />
<img src="lolo.jpg" class="HoverImage" />
</a> 
```

默认情况下，具有类的图像`VisibleImage`是可见的并且`HoverImage`是隐藏的，但是当有人将鼠标悬停在`a`标签上时，`VisibleImage`它是隐藏的并且`HoverImage`是可见的。

我正在使用这个 CSS：

```
a .VisibleImage{display:block}
a .HoverImage{display:none}

 //on hover
a:hover .VisibleImage{display:none}
a:hover .HoverImage{display:block} 
```

但我想要一个类似的动画`Slide up`，我尝试使用 css3 但它没有用。我搬到了 jQuery 并使用了 jQuery `hover()`，但我失败了。请给我jQuery代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:23:36.493

给你，不确定你想用 slideUp() 实现什么，但这会起作用。

```
$(document).ready(function(){
    $('.HoverImage').slideUp();
$('a').bind('mouseenter', function() {
    $(this).find('.HoverImage').slideUp().fadeOut('slow', function() {
        $(this).parent().find('.VisibleImage').slideDown().fadeIn('slow');
    })
});
$('a').bind('mouseleave', function() {
    $(this).find('.VisibleImage').slideUp().fadeOut('slow', function() {
        $(this).parent().find('.HoverImage').slideDown().fadeIn('slow');
    })
});​
}); 
```

[http://jsfiddle.net/shannonhochkins/QxyH3/](http://jsfiddle.net/shannonhochkins/QxyH3/)

干杯，香农

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:20:29.887

使用 css3 过渡来获得像幻灯片一样的动画

```
.HoverImage{
  max-height:0px;
  height:auto;
  -webkit-transition: max-height 2s;
  display:none;
}

a:hover .HoverImage{
   display:block;
    max-height:500px;
} 
```

css3 过渡教程

[http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

# c - 双指针转换，使用 `const void **ptr` 参数传递给函数

> ID：12621142
> 
> 赞同：5
> 
> 时间：2012-09-27T12:14:18.203
> 
> 标签：c, pointers, gcc

GCC 给了我以下警告：

```
note: expected 'const void **' but argument is of type 'const struct auth ** 
```

有没有可能导致问题的情况？

更大的片段是

```
struct auth *current;
gl_list_iterator_next(&it, &current, NULL); 
```

函数只是存储在`current`某个`void *`指针中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T12:21:58.367

错误消息很清楚：您正在传递`struct auth **`a`void **`被接受的地方。这些类型之间没有隐式转换，因为 a`void*`的大小和对齐方式可能与其他指针类型不同。

解决方案是使用中间体`void*`：

```
void *current_void;
struct auth *current;

gl_list_iterator_next(&it, &current_void, NULL);
current = current_void; 
```

**编辑**：为了解决下面的评论，这里有一个例子说明为什么这是必要的。假设您在一个平台上，其中`sizeof(struct auth*) == sizeof(short) == 2`, 而`sizeof(void*) == sizeof(long) == 4`; 这是 C 标准所允许的，并且实际上存在具有不同指针大小的平台。然后OP的代码将类似于做

```
short current;
long *p = (long *)(&current);  // cast added, similar to casting to void**

// now call a function that does writes to *p, as in
*p = 0xDEADBEEF;               // undefined behavior! 
```

然而，这个程序也可以通过引入一个中间体来工作（尽管结果可能只有在' 值小到可以存储在 a 中`long`时才有意义）。`long``short`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:50:50.080

嗯...我认为像这样的构造`const void *`没有多大意义。

因为如果用户想要访问`void *`他需要从 void 转换的数据，并且此操作绕过编译器类型检查，因此 - 常量。

考虑这个例子：

```
#include <stdio.h>
#include <stdlib.h>

int main () {

  int i = 6;
  int * pi = &i;

  const void * pcv = pi;
  const int  * pci = pi;

  // casting avoids type checker, so constantness is irrelevant here
  *(int *)pcv = 7;

  // here we don't need casting, and thus compiler is able to guard read-only data
  *pci = 7;

  return 0;
} 
```

所以结论是我们需要 void 指针 或 来确保数据的恒定性，但不能两者兼而有之。

# c++ - 什么是 HTREEITEM？

> ID：12621152
> 
> 赞同：3
> 
> 时间：2012-09-27T12:14:40.310
> 
> 标签：c++, mfc

我正在尝试调试一些树视图代码，并且我想检查`HTREEITEM`返回的 by`CTreeCtrl.InsertItem`在内存中是否有效。

但是，我在我经常检查的任何地方（谷歌、MSDN、同事）都找不到任何文档`HTREEITEM`，只有一大群人在问同样的问题。

你知道`HTREEITEM`定义是什么吗？您知道任何详细说明 a 内部结构的好链接`HTREEITEM`吗？

*我正在使用 C++，但 C 引用也会有所帮助。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:17:09.140

它只是 Windows 上默认[树视图](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759988%28v=vs.85%29.aspx)控件中树项的不透明句柄。您可以使用例如获取句柄[`TVM_INSERTITEM`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773733%28v=vs.85%29.aspx)，它们用于其他功能，然后用于引用项目。

句柄在`CommCtrl.h`（Windows SDK 的一部分）中定义，如下所示：

```
struct _TREEITEM;
typedef struct _TREEITEM *HTREEITEM; 
```

这也是不透明句柄的本质：您只知道它引用了一些数据（`struct`在本例中为 a ），但您不知道数据的定义。

# extjs - 如何在 Extjs4.1 模型中进行枚举？

> ID：12621153
> 
> 赞同：3
> 
> 时间：2012-09-27T12:14:46.893
> 
> 标签：extjs, enums, extjs4.1

我想在模型中分配一个枚举字段。像这样的东西：

```
fields:[
    {name:'method', type:'string', enum:['method1', 'method2', 'method3']}
] 
```

而且我希望其他组件能够知道枚举中有多少成员，甚至可以通过数字访问枚举成员。（就像使用数组一样）

ExtJS4.1 有这样的特性吗？我在 api 中找不到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:31:37.243

简短的回答是，这并不简单。

如果您查看[这些文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-type)，您会发现没有 enum 选项。

但是，正如相同的文档所建议的那样，您可以创建自己的数据类型。所以你可以在那里模拟一个枚举。我建议您查看现有类型（例如日期）的实现，以了解这是如何完成的。

# c++ - 配置eclipse CDT和openCV

> ID：12621155
> 
> 赞同：2
> 
> 时间：2012-09-27T12:14:59.967
> 
> 标签：c++, eclipse, opencv, windows-7

我正在尝试在 Windows 7 中配置 OpenCV 和 eclipse CDT (Juno)。我已经安装了 MinGW，并且一直在使用 eclipse 和 MinGW 来编写 C++ 程序。我现在正在尝试合并 OpenCV 库。以下是我遵循的步骤：

1.  下载并解压 OpenCV 2.4.2 到 F:\Applications\opencv
2.  创建新的 Eclipse C++ 项目
3.  在 c/c++ build > settings > GCC C++ Compiler > Includes > Include Paths (-I) 下的项目属性下，我添加了*“F:\Applications\opencv\build\include\”*
4.  在 MinGW C++ Linknker > Libraries > Libraries (-l) 我添加了“opencv_core242”、“opencv_imgproc242”、“opencv_highgui242”
5.  在 MinGW C++ Linker > Libraries > Library search path (-L) 我添加了*“F:\Applications\opencv\build\x86\lib”*

然后我尝试编写简单的程序：

```
#include "opencv2\opencv.hpp"
#include <iostream>
using namespace std;
using namespace cv;
int main(void)
{
    Mat A;
    A = imread("lena.png", CV_LOAD_IMAGE_COLOR);

    imshow("image", A);

    cout << "Done" << endl;
    return 0;
} 
```

但是什么也没发生，我什至没有在输出中得到“完成”消息。我现在很困惑，因为我是 C++ 和 OpenCV 的新手，并且不太确定如何调试它并继续前进。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:02:26.917

我发现了问题，我不得不添加 F:\Applications\opencv\build\x86\mingw\bin; 到我的系统路径

# mysql - 你如何优化这个半复杂的 mysql 查询？

> ID：12621156
> 
> 赞同：4
> 
> 时间：2012-09-27T12:15:09.290
> 
> 标签：mysql

问候flowstackers同胞！

这是 db 模式（简化为相关字段）以帮助说明我的难题：

![在此处输入图像描述](../Images/725bdb065454ac0144781681ecc0f411.png)

*   网上商店有`items`，也`items`有`item_options`。
*   同一个`item`可以出现在多个`categories`.
*   `categories`,`items`并且`item_options`都可以是活动的或非活动的 (BOOL)。

类别看起来像这样（注意 parent_id 嵌套，其中水果种子位于种子内部）：

```
id   parent_id   name              active
 1           0   Seeds                  1
 2           1   Vegetable Seeds        1
 3           1   Fruit Seeds            0
 4           0   Plants                 1
 5           4   Vegetable Plants       1
 6           4   Fruit Plants           1 
```

我想要的是所有活动类别（id、parent_id 和名称）的快速列表，以及包含活动 item_options 的每个类别的活动项目的计数。

查询结果如下所示：

```
id   parent_id   name              item_count
 1           0   Seeds                      0
 2           1   Vegetable Seeds           52
 4           0   Plants                     0
 5           4   Vegetable Plants         103
 6           4   Fruit Plants              79 
```

此查询有效，**但需要 ~430ms**：

```
 SELECT c.`id`, c.`parent_id`, c.`name`,
        (SELECT COUNT(*)
            FROM `item_categories` AS ic
            LEFT JOIN `items` AS i
                ON (i.`id` = ic.`item_id`)
            LEFT JOIN `item_options` AS io
                ON (i.`id` = io.`item_id`)
            WHERE c.`id` = ic.`category_id`
                AND i.`active` = 1
                AND io.`active` = 1
            ) AS `item_count`
    FROM `categories` AS c
    WHERE c.`active` = 1; 
```

下一个查询**只需要约 55 毫秒，但未能**包含顶级类别（其中`parent_id`= 0）：

```
 SELECT c.`id`, c.`parent_id`, c.`name`,
        COUNT(ic.`item_id`) AS `item_count`
    FROM `categories` AS c
    LEFT JOIN `item_categories` AS ic
        ON (c.`id` = ic.`category_id`)
    LEFT JOIN `items` AS i
        ON (i.`id` = ic.`item_id`)
    LEFT JOIN `item_options` AS io
        ON (i.`id` = io.`item_id`)
    WHERE c.`active` = 1
      AND i.`active` = 1
      AND io.`active` = 1
    GROUP BY c.`id`; 
```

有人知道如何加快第一个查询或修复第二个查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:37:28.673

哦！这似乎做到了......

```
(
    SELECT c.`id`, c.`parent_id`, c.`name`,
        COUNT(ic.`item_id`) AS `item_count`
    FROM `categories` AS c
    LEFT JOIN `item_categories` AS ic
        ON (c.`id` = ic.`category_id`)
    LEFT JOIN `items` AS i
        ON (i.`id` = ic.`item_id`)
    LEFT JOIN `item_options` AS io
        ON (i.`id` = io.`item_id`)
    WHERE c.`active` = 1
      AND i.`active` = 1
      AND io.`active` = 1
    GROUP BY c.`id`
)
UNION
(
    SELECT c.`id`, c.`parent_id`, c.`name`, 0
    FROM `categories` AS c
    WHERE c.`parent_id` = 0
      AND c.`active` = 1
)
ORDER BY `parent_id`, `NAME`; 
```

有人看到更好的方法吗？:D

# delphi - 分配给 BitBtn 的操作时的奇怪行为

> ID：12621161
> 
> 赞同：2
> 
> 时间：2012-09-27T12:15:24.677
> 
> 标签：delphi

我有一个分配给 BitBtn 和菜单项的操作。动作的标题是“&Save”（s 上有一个加速键）。此操作的快捷方式是“Ctrl+S”。

当我运行应用程序并按下 S 键时，由于加速器而执行了操作。我觉得很奇怪。用户看到键盘快捷键是“Ctrl+s”，但仍然使用“s”执行操作。该程序说了些什么但做了一些别的 - 这可以被认为是一个成熟的错误。对？

另外，如果有多个操作具有相似的快捷方式（ctrl+s、ctrl+shift+s 等）或许多菜单中的项目以 's' 作为加速器，用户将非常困惑为什么 's' 确实'save file '而不是'保存项目'。

我希望使用 'Ctrl+s' 执行操作。我怎么做？

（我知道我可以编辑按钮的标题以删除其加速键，但如果我将操作重新分配给按钮，我将不得不记住重新编辑按钮的标题。那里的操作和按钮太多了。）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:22:51.837

那是正常的行为。这就是键盘加速器一直以来的工作方式，并且注定要发挥作用。停止`S`调用按钮单击的键的方法是删除加速器。

# c# - C# 可点击网格

> ID：12621163
> 
> 赞同：1
> 
> 时间：2012-09-27T12:15:27.407
> 
> 标签：c#, .net, winforms

我正在尝试创建一个具有网格的游戏，用户可以单击网格区域来切换其状态。我正在使用 WinForms。我可以找到两种方法来做到这一点，看起来都很复杂：

1.  一个表格布局面板，并在每个区域放置一个标签或按钮，当单击该按钮时，找出（不知何故）单击在哪一列和哪一行，并采取相应的行动。
2.  未绑定的 GridView。

处理这样的事情似乎都非常复杂。

例如，想想井字游戏。在这种情况下，我想要的只是一个 3x3 网格，并知道单击了哪个区域 (x,y) 并在该区域中绘制了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:26:33.570

使用 PictureBox 并自己绘制网格线。例如，您可以通过注册事件 Paint 来做到这一点。然后注册事件[MouseClick](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseclick.aspx)以获取用户单击网格（在 PictureBox 上）的位置的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:10:05.270

让我向您展示我写的更接近您需求的东西，也许：

```
 private Button button;
    private Dictionary<string, Image> images = new Dictionary<string, Image>();

    public Form1()
    {
        InitializeComponent();
        InitializeTableLayoutPanel();
        AssignClickEvent();

        InitializeDictionary();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    /// <summary>
    /// Create Buttons for all Cells in the TableLayouPanel
    /// </summary>
    private void InitializeTableLayoutPanel()
    {         
        for (int i = 0; i < tableLayoutPanel.ColumnCount; i++)
        {
            for (int j = 0; j < tableLayoutPanel.RowCount; j++)
            {
                button = new Button();
                button.Visible = true;
                button.Dock = DockStyle.Fill;

                tableLayoutPanel.Controls.Add(button, i, j);
            }
        }
    }

    /// <summary>
    /// Assign a Click event of all Buttons in the TableLayoutPanel
    /// </summary>
    private void AssignClickEvent()
    {
        foreach (Control c in tableLayoutPanel.Controls.OfType<Button>())
        { 
            c.Click += new EventHandler(OnClick);
        }
    }

    /// <summary>
    /// Handle the Click event
    /// </summary>
    /// <param name="sender">Button</param>
    /// <param name="e">Click</param>
    private void OnClick(object sender, EventArgs e)
    {
        Button button = sender as Button;
        button.Visible = false;

        int column = tableLayoutPanel.GetPositionFromControl(button).Column;
        int row = tableLayoutPanel.GetPositionFromControl(button).Row;

        InitializePictureBox(column, row);
    }

    /// <summary>
    /// Create the PictureBox 
    /// </summary>
    /// <param name="column">TableLayoutPanel Column</param>
    /// <param name="row">TableLayoutPanel Row</param>
    private void InitializePictureBox(int column, int row)
    {
        PictureBox box = new PictureBox();
        box.Dock = DockStyle.Fill;

        string key = string.Format("{0}{1}", column.ToString(), row.ToString());

        box.Image = GetImageFromDictionary(key);

        tableLayoutPanel.Controls.Add(box, column, row);           
    }

    /// <summary>
    /// Get an Image from the Dictionary by Key
    /// </summary>
    /// <param name="key">the calling cell by combined column and row</param>
    /// <returns>Image</returns>
    private Image GetImageFromDictionary(string key)
    {
        return images.Where(x => x.Key == key).Select(x => x.Value).Cast<Image>().SingleOrDefault();             
    }

    /// <summary>
    /// Add Bitmaps to the Dictionary
    /// </summary>
    private void InitializeDictionary()
    {
        string key = string.Empty;
        for (int i = 0; i < tableLayoutPanel.ColumnCount; i++)
        {
            for (int j = 0; j < tableLayoutPanel.RowCount; j++)
            {
                key = string.Format("{0}", i.ToString() + j.ToString());
                Image image = CreateBitmap();
                images.Add(key, image);
            }
        }
    }

    /// <summary>
    /// Create Bitmaps for the Dictionary
    /// </summary>
    /// <returns>Bitmap</returns>
    private Bitmap CreateBitmap()
    {
        System.Drawing.Bitmap image = new Bitmap(button.Width, button.Height);
        for (int x = 0; x < image.Width; x++)
        {
            for (int y = 0; y < image.Height; y++)
            {
                image.SetPixel(x, y, Color.Red);
            }
        }
        return image;
    } 
```

点击前：

![在点击按钮之前](../Images/9da37a1f040fb1d0f1b380931a0937b8.png)

点击后：

![点击按钮后](../Images/c22ac2ffc904d00c061032eda4c396d1.png)

请注意，我已经通过设计器创建了列和行，但我认为以编程方式创建它们并没有什么特别之处。

下一步可能是什么？

1.  创建各种彩色图片
2.  以编程方式创建面板的列和行
3.  通过设置单独的设置更灵活地构建它

希望这会有所帮助。

# objective-c - iCloud和objective-c：evictUbiquitousItemAtURL似乎并没有真正删除本地文件，即使它返回true

> ID：12621165
> 
> 赞同：3
> 
> 时间：2012-09-27T12:15:42.947
> 
> 标签：objective-c, ios, icloud, nsfilemanager

我正在为一些项目编写一个简单的 iCloud 管理器。

目前我有一个小的测试代码来查看我的经理是否成功地将文件从设备的本地存储中逐出（并且不会从 iCloud 存储中删除它们）。为此，文档说明您使用：

***evictUbiquitousItemAtURL：错误：***

*删除指定的基于云的项目的本地副本。*

我的测试片段如下所示：

```
if ([self evictLocaleFile:@"myTestFile.txt"])
    NSLog(@"File was evicted successfully!");

[self listAllLocalFiles]; 
```

这里的想法是我首先驱逐指定的文件，然后列出本地 iCloud 文件夹中的本地文件，看看它是否仍然存在。

第一种方法简单地逐出指定的文件，如下所示：

```
-(BOOL) evictLocaleFile:(NSString *)name
{
     NSURL *deletionURL = [[NSURL alloc] initFileURLWithPath:[ubiquityContainerURL path]];

     deletionURL = [deletionURL URLByAppendingPathComponent:@"Documents" isDirectory:YES];
     deletionURL = [deletionURL URLByAppendingPathComponent:name isDirectory:NO];
     NSLog(@"EVICTION URL: %@", deletionURL.path);

     NSError* err = nil;

     BOOL didEvict = [[NSFileManager defaultManager] evictUbiquitousItemAtURL:deletionURL error:&err];

     if (err != nil)
     {
         NSLog(@"Eviction error: %@", err.description);
     }

     return didEvict;
} 
```

列出本地文件的方法如下所示：

```
-(NSArray*) listAllLocalFiles
{
     NSString *localPath = [[ubiquityContainerURL path] stringByAppendingFormat:@"/Documents"];

     NSLog(@"PATH: %@", localPath);

     NSArray* files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:localPath error:nil];

     for (NSString* fileName in files)
     {
         NSLog(@"FILE %@", fileName);
     }

     return files;
} 
```

现在奇怪的是，当我执行程序时，它确实声明它成功驱逐了文件。但是该文件仍然在语言环境文件下列为存在？此时文件不应该被完全删除并且不存在吗？我不确定为什么该文件没有被删除。

我什至尝试先将文件保存下来，然后关闭 WIFI 并再次运行代码以确保不是因为 iCloud 强制再次下载文件，但这并没有解决问题。

任何人都知道会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:35:29.027

你试过`NSFileManager`了吗`removeItemAtURL:error:`？

我使用这种方法从 iCloud 中删除文件，效果很好。

根据[`evictUbiquitousItemAtURL:error:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)描述的文档，它仅删除指定的基于云的项目的本地副本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T11:03:34.603

所以我发现了问题所在。

我的代码实际上是正确地从我的本地设备中逐出文件。这是由于误解了 ubiquity 容器实际上是如何代表我工作的。我的印象是每个应用程序都有一个本地 ubiquity 容器，它显示当前设备上的本地状态（这意味着只有您在测试设备上下载的文件），而不是使用的 ubiquity 容器 URL 显示所有可用的文件，无论您是否已在当前设备上下载它们。

# java - 使用java程序在防火墙中添加异常

> ID：12621167
> 
> 赞同：1
> 
> 时间：2012-09-27T12:15:46.160
> 
> 标签：java, firewall

有谁知道如何使用 java 程序向防火墙添加例外？因为当我使用java程序上传照片并打开防火墙时，很多时候它会产生问题并且照片没有上传。

有人知道为什么会这样吗？

提前致谢。

# c# - 使用 WMI (C#) 设置静态 IPv6 IP 地址

> ID：12621172
> 
> 赞同：0
> 
> 时间：2012-09-27T12:16:10.340
> 
> 标签：c#, wmi, ipv6

我正在使用 ManagementClass 构建此 IP 管理器工具，但在尝试通过 WMI 设置 IPv6 地址时遇到问题。

我正在使用的代码的相关部分如下：

```
ManagementBaseObject ipParams = wmiManager.GetMethodParameters("EnableStatic");
ipParams["IPAddress"] = ipAddresses; // { "fe80::fcd8:70b5:89f3:825d" }
ipParams["SubnetMask"] = netmasks;   // { "64" }
wmiObject.InvokeMethod("EnableStatic", ipParams, null); 
```

当带有子网掩码（整数格式）的 IPv6 地址（标准格式）传递给 EnableStatic 方法时，它似乎没有应用它。

我认为验证子网掩码可能有问题，但我不确定是否有适用于 IPv6 的完整子网掩码表示法。再说一遍，它也可能是对 IP 地址或完全不同的东西的验证。

我对这个 ManagementClass 东西很陌生，我还没有找到读出错误的方法。如果有人对此有一些指示，请告诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:14:29.240

Per @Codelgnoto [comment](https://stackoverflow.com/a/4953965/1569434), which points to @Mike answer, it is impossible to set this on Vista and higher; IPv6 has only limited support, such as *reading* the value - not setting it. See Mike's post for brief (surprising) answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T06:52:56.900

与当前网络适配器关联的所有 IP 地址的数组。

**从 Windows Vista 开始**，此属性可以包含 IPv6 地址或 IPv4 地址。有关详细信息，请参阅[WMI 中的 I Pv6 和 IPv4 支持](https://msdn.microsoft.com/en-us/library/aa394217(v=vs.85).aspx)。

# iphone - Youtube 视频嵌入在 iPhone 上不起作用

> ID：12621176
> 
> 赞同：0
> 
> 时间：2012-09-27T12:16:18.827
> 
> 标签：iphone, html, ios, youtube

我正在尝试使用 Youtube 的新视频嵌入代码，该代码通过 iframe 检测浏览器是否支持 Flash 并提供适当的内容。

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/i2b8pEuj0U8" frameborder="0" allowfullscreen></iframe> 
```

但是，在检查了 iPhone 之后，它似乎不起作用。

有谁知道我如何才能在 iPhone 上制作 youtube 视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:25:27.797

我忘了我的iphone上没有VPN，因为我在中国，所以它被伟大的防火墙阻止了:P

# zend-framework2 - Zend 2：如何覆盖模块的配置文件？

> ID：12621177
> 
> 赞同：4
> 
> 时间：2012-09-27T12:16:26.687
> 
> 标签：zend-framework2

如何覆盖 ./vendor/.../module_name/config/module.config.php 下的配置文件？

不，这个[链接](http://akrabat.com/zend-framework-2/overriding-module-configuration-in-zf2/)对我不起作用。我不确定为什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T12:33:58.140

尝试命名配置文件 filename.global.php 或 filename.local.php。

在 application.config.php 里面有这一行：

```
config/autoload/{,*.}{global,local}.php 
```

**关于 ZfcUser 模块和更改主路由。**

在`zfcuser.global.php`文件底部修改以下内容：

```
return array(
    'zfcuser' => $settings,
    'service_manager' => array(
        'aliases' => array(
            'zfcuser_zend_db_adapter' => (isset($settings['zend_db_adapter'])) ? $settings['zend_db_adapter']: 'Zend\Db\Adapter\Adapter',
        ),
    ),
    'router' => array(
        'routes' => array(
            'zfcuser' => array(
                'options' => array(
                    'route' => '/member',
                    'defaults' => array(
                        'controller' => 'zfcuser',
                        'action' => 'index',
                    ),
                ),
            )
        )
    )
); 
```

# java - 在 SWT 组件中加载 Android 的图像（字节数组格式）

> ID：12621180
> 
> 赞同：0
> 
> 时间：2012-09-27T12:16:31.350
> 
> 标签：java, android, image, swt, bytearray

这是场景：在 Android 操作系统中加载图像 --> 将其转换为字节数组 --> 将其发送到基于 SWT 的应用程序 --> 将其加载到组件中（我不知道，标签、按钮......）。

我正确接收字节数组，但我无法解析它以转换为图像。

这是我在网上找到的唯一代码，它有效：

```
byte[] bs = { (byte) 0x11, (byte) 0x11, (byte) 0x11, (byte) 0x00, (byte) 0x00,
              (byte) 0x11, (byte) 0x11, (byte) 0x11, (byte) 0x11, (byte) 0x10, (byte) 0x00, (byte) 0x01,
              (byte) 0x10, (byte) 0x00, (byte) 0x01, (byte) 0x11, (byte) 0x11, (byte) 0x00, (byte) 0x22,
              (byte) 0x01, (byte) 0x10, (byte) 0x33, (byte) 0x00, (byte) 0x11, (byte) 0x10, (byte) 0x02,
              (byte) 0x22, (byte) 0x01, (byte) 0x10, (byte) 0x33, (byte) 0x30, (byte) 0x01, (byte) 0x10,
              (byte) 0x22, (byte) 0x22, (byte) 0x01, (byte) 0x10, (byte) 0x33, (byte) 0x33, (byte) 0x01,
              (byte) 0x10, (byte) 0x22, (byte) 0x22, (byte) 0x01, (byte) 0x10, (byte) 0x33, (byte) 0x33,
              (byte) 0x01, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00,
              (byte) 0x00, (byte) 0x00, (byte) 0x01, (byte) 0x11, (byte) 0x11, (byte) 0x01, (byte) 0x10,
              (byte) 0x11, (byte) 0x11, (byte) 0x10, (byte) 0x01, (byte) 0x11, (byte) 0x11, (byte) 0x01,
              (byte) 0x10, (byte) 0x11, (byte) 0x11, (byte) 0x10, (byte) 0x00, (byte) 0x00, (byte) 0x00,
              (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x10, (byte) 0x44,
              (byte) 0x44, (byte) 0x01, (byte) 0x10, (byte) 0x55, (byte) 0x55, (byte) 0x01, (byte) 0x10,
              (byte) 0x44, (byte) 0x44, (byte) 0x01, (byte) 0x10, (byte) 0x55, (byte) 0x55, (byte) 0x01,
              (byte) 0x10, (byte) 0x04, (byte) 0x44, (byte) 0x01, (byte) 0x10, (byte) 0x55, (byte) 0x50,
              (byte) 0x01, (byte) 0x11, (byte) 0x00, (byte) 0x44, (byte) 0x01, (byte) 0x10, (byte) 0x55,
              (byte) 0x00, (byte) 0x11, (byte) 0x11, (byte) 0x10, (byte) 0x00, (byte) 0x01, (byte) 0x10,
              (byte) 0x00, (byte) 0x01, (byte) 0x11, (byte) 0x11, (byte) 0x11, (byte) 0x11, (byte) 0x00,
              (byte) 0x00, (byte) 0x11, (byte) 0x11, (byte) 0x11, };*/

Color white = display.getSystemColor(SWT.COLOR_WHITE);
Color black = display.getSystemColor(SWT.COLOR_BLACK);
Color yellow = display.getSystemColor(SWT.COLOR_YELLOW);
Color red = display.getSystemColor(SWT.COLOR_RED);
Color green = display.getSystemColor(SWT.COLOR_GREEN);
Color blue = display.getSystemColor(SWT.COLOR_BLUE);
// Create a source ImageData of depth 4
PaletteData palette = new PaletteData(new RGB[] { black.getRGB(), white.getRGB(),
yellow.getRGB(), red.getRGB(), blue.getRGB(), green.getRGB() });

ImageData sourceData = new ImageData(16, 16, 4, palette, 1, b); 
```

但是当我更改字节数组时不起作用。在这种情况下如何设置 PaletteData 和 ImageData？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T03:48:01.930

```
****It's work for me****

String filepath = "/sdcard/Image/Image01.jpg";
           File imagefile = new File(filepath);
            FileInputStream fis = null;
            try 
            {
                fis = new FileInputStream(imagefile);
            } 
            catch (FileNotFoundException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Bitmap bm = BitmapFactory.decodeStream(fis);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();  
            bm.compress(Bitmap.CompressFormat.PNG, 100 , baos);    
            byte[] b = baos.toByteArray(); 
            System.out.println(baos);
            Bitmap bm1=BitmapFactory.decodeByteArray(b,0, b.length);
            imgViewBitmap.setImageBitmap(bm1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:34:58.187

好的，正确的方法是：

```
contact.setImage(pCur.getBlob(0));
publishProgress("befor compress");
Bitmap image = BitmapFactory.decodeByteArray(contact.getImage(), 0, contact.getImage().length);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
image.compress(Bitmap.CompressFormat.JPEG, 50, stream); //JPEG or what you want
contact.setImage(stream.toByteArray());
stream.close(); 
```

无论如何我不能发送格式良好的字节数组。我发送约 1700 字节的字节数组，并接收约 2800 个元素的数组。我不知道为什么。我用 UTF-8 字符串编码。但是本地文件中的打印数组有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:35:46.187

我认为您应该可以`ImageIO.read`用来解析图像：

```
InputStream in = new ByteArrayInputStream(imageDataByteArray);
BufferedImage bufImg = ImageIO.read(in);
ImageIcon icon = new ImageIcon(bufImg);
myButton.setIcon(icon); 
```

作为`BufferedImage`的子类`java.awt.Image`，您应该能够按原样使用它。我自己没有测试过，但我不明白为什么它不起作用。

另请注意，您不能随机更改字节数组并期望它代表有效图像。如果您提供的数组不包含有效的图像数据（或包含不支持格式的图像），`ImageIO.read`将返回`null`. 查看[`ImageIO.read`文档](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.InputStream%29)以获取更多信息。

# apache2 - Apache 拒绝访问图像文件夹，但仍然可以通过现场显示

> ID：12621185
> 
> 赞同：1
> 
> 时间：2012-09-10T14:18:00.900
> 
> 标签：apache2, security, database, access-control

我的网站上有一个图像文件夹，我们称它为`/images/`我保存大量图像的地方。我不希望任何人通过网络直接访问图像，所以我在我的 Apache 配置中放置了一个新指令来实现这一点：

```
<Directory "/var/www/images/">
    Options Includes
    AllowOverride All
    Order allow,deny
    Deny from All
</Directory> 
```

这是有效的，但它阻止了所有访问，我无法再通过我的网页显示图像。我想这是有道理的。那么如何有选择地控制对这些图像的访问呢？

基本上我只想通过某些网页和某些用户显示某些图像。最好的方法是什么？我需要将图像保存到数据库吗？

蒂姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:31:44.663

这是需要在代码中完成的事情。您必须重写代码，以便对于某些用户，代码将从本地磁盘读取图像（而不是将其作为 html 元素发送）并将其直接发送到 html 输出。下一个链接可能会提供有关如何执行此操作的一些信息：
[如何从服务器检索图像并使用 json 解析显示？](https://stackoverflow.com/questions/4232076/how-to-retrieve-image-from-server-and-display-using-json-parsing)
[http://www.codingforums.com/showthread.php?t=168935](http://www.codingforums.com/showthread.php?t=168935)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:41:10.223

如果您想授予对图像的访问权限而不是直接从网络访问图像，您可以扮演角色并授予特定用户的图像权限，并使用该用户去阅读图像，还需要包含一个索引文件以不允许用户列出您目录中的所有图像。

用于`chown`更改文件的权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-01T17:25:07.613

一个非常简单的替代方法是在*images*文件夹中添加空*index.html*以返回 my-picture.png 但返回空白页！ *`http://example.com/images/my-picture.png`
`http://example.com/images/`*

# php - 与 mantisbt 的肥皂连接

> ID：12621188
> 
> 赞同：1
> 
> 时间：2012-09-27T12:16:54.957
> 
> 标签：php, soap, soap-client, mantis

我正在尝试与个人应用程序的网络服务螳螂错误跟踪器建立肥皂连接。

```
 public function issues_get($username, $password) {
    try {
       $client = new SoapClient($this->adresse);
        $response = $client->mc_filter_get_issues($username, $password, $this->projectId, $this->ersFilter, 0, 0);
        $response = convert::object2array($response);
        return $response;
    }
    catch (SoapFault $e){
        echo $e->faultcode; 
        //$e->getMessage();
    }
} 
```

怎么了 ？

$this->adresse = "http://localhost/mantisbt/api/soap/mantisconnect.php?wsdl"

当我用浏览器访问这个地址时，我看到了正确的 XHTML 文件

这是有错误的这一行：`$client = new SoapClient($this->adresse);`

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:12:14.767

正确的入口点是`http://localhost/mantisbt/api/soap/mantisconnect.php`（省略`?wsdl`部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:02:51.293

我解决了这个问题。我不知道为什么，但错误是“localhost”。我把IP地址和脚本工作正常。

```
$this->adresse = "http://192.x.x.x.x/mantisbt/api/soap/mantisconnect.php?wsdl" 
```

谢谢大家的帮助:)

# javascript - 如何在 HTML + CSS 中重新创建 eBay 新徽标页面

> ID：12621191
> 
> 赞同：6
> 
> 时间：2012-09-27T12:17:02.913
> 
> 标签：javascript, html, css

我有一个很棒的网站创意，我认为 eBay 为其新徽标创建的页面非常有趣。我只是想知道是否有人可以给我有关如何重新创建它的任何见解。

[http://pages.ebay.com/announcements/new/index.html](http://pages.ebay.com/announcements/new/index.html)

我想你可以通过间隙看到的标志被设置为主背景，固定，前部只是滚动过去。

两个主要问题：

*   他们如何让“前”div 填充页面
*   当您向下滚动页面时，他们如何让背景发生变化。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:31:23.133

其实很简单。他们有多个背景图像应用于多个`section`元素，然后他们应用了 a`fixed` `background-attachment`以便背景始终位于同一位置。结果是一个元素在某种程度上起到了掩蔽其背景的作用。

您可以真正轻松地重新创建效果，并使用以下代码理解实现：

*HTML*

```
<div></div>
<div class="ebay-img1"></div>
<div></div>
<div class="ebay-img2"></div>
<div></div>
<div class="ebay-img3"></div> 
```

*CSS*

```
div { height: 600px; background-attachment:fixed; border-bottom: 1px solid black; }
.ebay-img1 { background: black url("http://pics.ebaystatic.com/aw/pics/announcements/new/logo/logo-1.png") no-repeat 50% 0 fixed }
.ebay-img2 { background: black url("http://pics.ebaystatic.com/aw/pics/announcements/new/logo/logo-2.png") no-repeat 50% 0 fixed }
.ebay-img3 { background: black url("http://pics.ebaystatic.com/aw/pics/announcements/new/logo/logo-3.png") no-repeat 50% 0 fixed } 
```

原位代码见这里：http: [//jsfiddle.net/CAMEn/](http://jsfiddle.net/CAMEn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:27:16.563

“背景”实际上`<section>`是在实际内容项之间插入的一些标签。它是页面背景的错觉是通过指定`background-attachment: fixed;`背景元素的样式来实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:24:34.627

在 CSS 源代码中，他们正在处理不断变化的背景和 div 填充，它没有隐藏，因此您可以随意查看并下载并使用它:)

# django - Django 图像上传在本地环境中有效，但在运行 nginx 的 Amazon EC2 上无效

> ID：12621196
> 
> 赞同：3
> 
> 时间：2012-09-27T12:17:26.797
> 
> 标签：django, nginx, amazon-ec2, uwsgi, django-forms

我正在尝试使用 Django ModelForm 上传图像。在我的家用电脑上一切正常，所以问题可能不在模板或视图功能上。但是，在 nginx + uwsgi + Amazon EC2 实例上运行时，不会上传图像文件。

1）我在 nginx error.log 或浏览器中没有收到错误。

2) PIL 支持 JPEG。

3) form.save() 在模型实例中保存正确的文件名并验证表单。它甚至可以识别文件夹中冲突的文件名。

4）媒体文件夹有777权限。

5) 通过 FTP 上传的图像可以正常工作，因此 nginx 可以正确提供媒体文件。

6）模型中的字段就这么简单 img = models.ImageField('Kuvatiedosto',upload_to="images")

我不知道在哪里寻找错误了。

已解决：我的媒体根与 nginx 的媒体设置不符。所以文件一直上传，只是不是我预期的......

# ruby - 使用看起来像 Arel 关系的奇怪数组

> ID：12621200
> 
> 赞同：0
> 
> 时间：2012-09-27T12:17:45.783
> 
> 标签：ruby

我正在从我的 Rails 应用程序中的 API 返回这个数组：

```
[#<GoCardless::User created_at=Wed, 13 Jun 2012 10:41:35 +0000, email="bob@cat.com", first_name="bob", id="03hhsXP5AX", last_name="cat">] 
```

我该如何使用它？例如，我想获取它的 ID，但是虽然它看起来像一个 arel 关系，但它的类是一个数组，这让我感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:20:06.050

只需获取数组的第一个元素。

```
res = api.call # => [#<GoCardless::User created_at=Wed, 13 Jun 2012 10:41:35 +0000
res.first # => #<GoCardless::User created_at=Wed, 13 Jun 2012 10:41:35 +0000
res.first.id # => "03hhsXP5AX" 
```

# sql-server - SQL Server 2008 R2 等待类型-'PREEMPTIVE_OS%'

> ID：12621208
> 
> 赞同：4
> 
> 时间：2012-09-27T12:18:14.130
> 
> 标签：sql-server, sql-server-2008-r2

我在哪里可以找到有关等待类型的文档（SQL Server 2008 R2）：

```
Select * from sys.dm_os_wait_stats  where wait_type like 'PREEMPTIVE_OS%' 
```

例如“PREEMPTIVE_OS_CRYPTIMPORTKEY”。[msdn](http://msdn.microsoft.com/en-us/library/ms179984%28v=sql.105%29.aspx)中没有记录这样的等待类型..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T12:25:38.797

SQL Server 通常在协作多任务中运行线程。当它调用操作系统时，它必须更改为抢占式多任务处理。所以`PREEMPTIVE_OS%`等待意味着 SQL Server 正在等待操作系统做某事。

`PREEMPTIVE_OS_`您可以通过剥离零件来找到它正在等待的东西的文档。例如，`CryptImportKey`可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380207%28v=vs.85%29.aspx)找到文档。

# c# - 检查对象中的任何空值

> ID：12621209
> 
> 赞同：1
> 
> 时间：2012-09-27T12:18:16.410
> 
> 标签：c#, null

如果我有一个具有其他嵌套对象和属性的对象，如下所示。

```
var request = new GetInfoRequest
{
   GetInformation = new GetInformationType
   {
      Code = "abc",
      Id = "123",
      Item = new InfoItem
      {
         Itemid = "test",
         ItemName = "testname"
      },
      StartDate = new StartdatumType { Start = new DateTime(1990, 1, 1)},
      EndDate = new EndDateType { End = new DateTime.Now }    
   }
}; 
```

将此对象传递给函数时，我想检查其属性或对象是否为`null`.

```
public InfoResponse getInfo(request)
{
  // Check that the request object has no null properties or objects.
} 
```

有没有比使用 if 语句遍历每个子对象和属性更简单的检查方法？递归方法或类似方法？

**扩展**
在我的**getInfo**函数中，我不想这样写：

```
if (request != null && request.GetInformation != null && ... etc.) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:47:59.573

使用反射并遍历所有属性以检查是否为空。这是一个开始的片段

```
using System.Reflection;

GetInfoRequest objGetInfoRequest;
Type getInfoRequestType = objGetInfoRequest.GetType();
PropertyInfo[] myProps = getInfoRequestType.GetProperties(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:20:30.883

您可以使用[反射](http://msdn.microsoft.com/en-US/library/system.type.getfields%28v=vs.80%29.aspx)来遍历字段。

您需要对嵌套值进行一些递归。

# linq - OR'd Linq 多列外连接

> ID：12621214
> 
> 赞同：0
> 
> 时间：2012-09-27T12:18:42.660
> 
> 标签：linq, linq-to-entities

我编写了一个 Linq 查询来对多个列进行外部联接。我的问题是我想或列。换句话说，我需要加入条件：

```
on Bar.Id equals Foo.BarId1 or Bar.Id equals Foo.BarId2 
```

我在此站点上看到的一些示例使用匿名类型来创建 AND 条件，但我无法弄清楚如何使用匿名类型构造 OR，甚至是否可能。我找不到匹配的例子。

我的查询：

```
 var data = (from f in Foos
                join b in Bars on f.BarId1 equals b.Id into tb
                  from xb in tb.DefaultIfEmpty()
                join b in Bars on f.BarId2 equals b.Id into tb2
                  from xb2 in tb2.DefaultIfEmpty()
                select new { Foo = f, Bar1 = xb, Bar2 = xb2 }); 
```

这行得通，但我觉得这不是最好的解决方案

**编辑**

我说得太早了。它不起作用：当 Foo.BarId1 指向一个有效的 Bar，而 Foo.BarId2 没有，它实际上为 Bar1 和 Bar2 返回相同的 Bar。在这种情况下，我期望 Bar1 有效，而 Bar2 为空。

**编辑**

我越来越近了。这是我最新的查询：

```
var data = from f in Foos
            from b in Bars.Where(x => x.Id == p.BarId1 || x.Id == p.BarId2).DefaultIfEmpty()
            select new { Foo = p, Bars = b }; 
```

我期待它回来：

```
Foo Bar    
f1  b1      
    b2 
```

我得到的是：

```
Foo Bar
f1  b1
f1  b2 
```

**编辑**

我终于找到了返回我想要的查询：

```
var data = from f in Foos
       select new
       {
           Foo = f,
           Bar1 = Bars.FirstOrDefault(x => x.Id == f.Bar1Id),
           Bar2 = Bars.FirstOrDefault(x => x.Id == f.Bar2Id)
       }; 
```

仍然想知道我可以对此做出的任何改进。

**最终编辑**

我回到了原来的查询：

```
 var data = (from f in Foos
                join b in Bars on f.BarId1 equals b.Id into tb
                  from xb in tb.DefaultIfEmpty()
                join b in Bars on f.BarId2 equals b.Id into tb2
                  from xb2 in tb2.DefaultIfEmpty()
                select new { Foo = f, Bar1 = xb, Bar2 = xb2 }); 
```

事实证明这实际上是有效的，但是我的 Linqpad 测试中的一个错误让我认为它不是。

它也比前一个更有效 - 在 SQL Profiler 中，我可以看到它生成 1 个 SQL 选择，而前一个生成 3*n 选择（每个 Foo 选择是否有 2 个 Bar 选择）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:07:12.630

如以下链接所示，**LINQ**仅支持 support `equal`。如果您需要任何其他类型的连接，请使用交叉连接，其中：

[Linq - 在多个（OR）条件下左连接](https://stackoverflow.com/a/1265008/920359)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:48:39.190

LINQ 还通过将连接放在 Where 子句中来支持 ANSI-82 语法。看看以下是否适合您：

```
var data = from f in Foos
           from b in Bars
           where f.Id == b.BarId1 || f.Id == b.BarId2
           select new { Foo = p, Bars = bx }; 
```

我怀疑这只会给你一个内连接而不是外连接，你可能需要为 !Contains 添加另一个 where 子句，以根据你的要求评估外部条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:01:03.473

如果您愿意引入导航属性`Foo.Bar1`和`Foo.Bar2`. 然后你可以这样做：

```
from f in Foos
select new { f, f.Bar1, f.Bar2 } 
```

这将在 SQL 中创建外连接。（这可能是不喜欢这些导航属性的一个原因，因为很容易忘记它们会导致外部连接，没有它们你总是被敦促自己控制）。

# php - 使用 foreach 循环将 PHP 变量插入 MySQL 数据库

> ID：12621218
> 
> 赞同：2
> 
> 时间：2012-09-27T12:18:57.107
> 
> 标签：php, mysql, sql

我有一个数组：`$product_counts = array_count_values($product_array);`

该数组的键是商家 ID，值是整数（产品计数）。因此，如果我要编写以下代码：

```
foreach($product_counts as $key => $value){
    echo "key: $key";
    echo "value: $value";
        } 
```

我会得到以下（这是我想要的）：

```
key: 26816928 value: 13
key: 26816931 value: 2 ... 
X the amount of indexes in the array. 
```

但是，如果我要编写以下代码：

```
foreach($product_counts as $key => $value){
    mysql_query("INSERT INTO merchantinfo(ProductCount) VALUES $value WHERE MerchantID = $key"); 
} 
```

$value 变量的值不会进入 MerchantID = $key.... 的字段，而是元组默认为 null，这是我设置它们的方式。我相信这可能是需要将变量类型转换为整数的情况....但我通常对此很迷茫。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:22:09.980

不能在插入语句中使用 where 子句。我认为您想改用更新。

```
mysql_query("update merchantinfo set ProductCount= $value WHERE MerchantID = $key"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:21:55.263

在 () 中也取值，例如：

```
INSERT INTO tbl_name (a,b,c) VALUES(1,2,3),(4,5,6),(7,8,9); 
```

在您的情况下，您必须使用`UPDATE`而不是`INSERT`

```
UPDATE merchantinfo SET ProductCount = $value WHERE MerchantID = $key 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:26:20.997

看起来您想要更新值而不是插入：这应该适合您：

```
$query = "UPDATE merchantinfo set ProductCount='$value' WHERE MerchantID='$key'"; 
```

如果要插入新行，则：

```
$query = "INSERT INTO merchantinfo(ProductCount,MerchantID) VALUES('$value','$key')"; 
```

无论如何使用 PDO 和准备语句会好得多（至少更安全）

```
$stmt = $pdo->prepare("UPDATE merchantinfo set ProductCount=? WHERE MerchantID=?");
foreach($product_counts as $key => $value){
    $stmt->execute(array($value, $key));
} 
```

# php - json_encode 不返回值

> ID：12621219
> 
> 赞同：0
> 
> 时间：2012-09-27T12:19:02.040
> 
> 标签：php, json

我正在使用 php 和 MSSQL 开发 Web 服务。我可以连接 db 并检索值。但是当我使用 json 时，它不会返回任何值。

用于 Web 服务的 ajax 代码是

```
 $.ajax({
        url: 'http://209.249.81.138/dev/logintalk.php',
        type: 'POST',
        data: "username=" + $("#username").val()+"&password=" + $("#password").val(),
        dataType: 'json',
        success: function(data){
            alert(data);
        },
        error: function(){
            alert("failure...");
        }
       });
} 
```

使用的php代码是

```
<?php

    $server = "server";
    $username = "username";

    $password = "secret";
    $database = "db";

    $con = mssql_connect($server, $username, $password) or die("Couldn't connect to SQL Server on $Server");

    $users = $_POST['username'];
    $passwd = $_POST['password'];

    $selected = mssql_select_db($database, $con) or die("Couldn't open database $database");

    mssql_query('SET CHARACTER SET utf8'); 
    $query = "SELECT * FROM zNewUsers WHERE memberid = '$users' AND userid = '$passwd'";
    $result = mssql_query($query) or die ("Unable to verify user because ");
    $row = mssql_fetch_array($result);
    $count = mssql_num_rows($result);

    if($count == 0){
        $data=array(0=>"Incorrect values...");
        $value[]=$data[0];
        echo json_encode($value);
    }
    else{
    $val[]=$row['SessionID'];
    echo json_encode($val);
    }  
    mssql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:44:30.373

毫无疑问的一些提示：

1.  ```
    success: function(data){
        console.log(data);
        //This is better for debugging if you use firebug, if you don't do it.
    }, 
    ```

2.  ```
    if($count == 0){
        echo json_encode(array(0=>"Incorrect values..."));
        //Why create new variables? Pass what you want directly to json_encode()
    }
    else{
        echo json_encode($row['SessionID']);
    } 
    ```

回到问题：

var_dump() 在编码之前要编码的数据并确保它没问题，然后检查你在浏览器中获得的`console.log(data)`信息并与我们分享这些信息，以便我们提供更好的帮助。

# postgresql - 从 postgres 数据构建数据/统计图？

> ID：12621220
> 
> 赞同：1
> 
> 时间：2012-09-27T12:19:05.250
> 
> 标签：postgresql

我有一个表，它存储一段时间内网络上的带宽使用情况。一列将包含记录带宽的日期时间（主键），另一列将包含实际带宽值。

我需要从这些数据中生成一些图表（饼图、条形图等）和其他统计图表。但是，我想在数据库服务器上生成数据，而不是将所有数据返回给客户端以供其处理和生成图形。

我的问题是在 Postgres 中是否有任何库或技术可以帮助做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:37:45.447

这可以通过 R 和 PL/R 图形开发包来实现。

[参考](http://www.varlena.com/GeneralBits/Tidbits/bernier/art_66/graphingWithR.html)

# java - 应用了 Jboss 冲洗组件

> ID：12621226
> 
> 赞同：0
> 
> 时间：2012-09-27T12:19:24.520
> 
> 标签：java, jakarta-ee

您好，我在播放 ear 时遇到问题，当我诱导 o web xhtml 我在 jboss 服务器中有 INFo

> 10:09:02,196 错误 [STDERR] 2012-09-27 10:09:02 com.sun.facelets.impl.DefaultFacelet 刷新信息：Facelet [/layout/template.xhtml] 已修改 @ 10:09:02，冲洗应用组件@ 09:58:57

我没有更改 jboss 或系统中的配置。我工作了 4-5 小时，我得到了这个信息....我不想使用 REFRESH-PERIOD 有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:13:07.870

我认为这是一个时间问题。应用程序服务器所在的工作站具有 DateTime 设置 - 比当前时间少 2 小时（错误的时钟设置）。因此，在其上部署我们的应用程序后，我们会收到这样的异常，因为 xhtml 文件的创建时间大于工作站上的当前时间。

当部署从时间设置与部署应用程序的服务器不同的机器创建的新 EAR 或 war 时，可能会刷新 JSF 组件。

# c# - MVC 3 控制器操作以 JSON 格式返回本地化字符串

> ID：12621228
> 
> 赞同：0
> 
> 时间：2012-09-27T12:19:27.183
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, localization

我目前正在开发我们的产品，它是一个基于 MVC 3 的项目。该产品最近计划在加拿大推出，那里的法律要求所有网站提供英语和法语版本的副本。

基本架构包括： - 本地化类库 - MVC3 应用程序 - A DAL - 所有控制器都继承自可本地化的基本控制器类，该类将当前线程的 CurrentCulture 和 CurrentUICulture 设置为正确的语言。这很好用（借自 Scott Hansel 的代码）。- 它还有一个基本的 REST API，可以从 UI 中通过 jQuery 调用。

我的所有视图都按要求工作，但我在获取操作以返回正确的消息语言时遇到问题。API 控制器操作不返回 ActionResults，而是返回 JSON 字符串。我不相信这是我痛苦的罪魁祸首。

我目前正在尝试利用 ResourceManager 对象，但没有成功。这是我尝试过的最新代码。

请注意，CultureName 是 BaseLocalizableController 对象提供的属性。

```
var rm = new ResourceManager("ProductXYZ.Localization.App_GlobalResources.Messages", Assembly.Load("ProductXYZ.Localization"));
viewModel.Message = rm.GetString("SuccessfullySaveChanges", CultureInfo.CreateSpecificCulture(user.Language ?? CultureName)); 
```

GetString 函数总是返回英语，它应该返回法语的事件。我知道我在这里缺少一些基本的东西，但只是无法找到它，我现在面临着一个艰难的最后期限。

任何帮助将不胜感激。

谢谢

**附加信息***** ** *** *****

 **我在 Visual Studio 2012 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:49:31.780

如果你的架构在你的应用程序中是正确的，那么使用`Thread.CurrentThread.CurrentCulture`and`Thread.CurrentThread.CurrentUICulture`应该设置为法语（如果你在法语站点上）。

如果不是这种情况，您应该在 Global.asax 中处理它，这可以通过以下方式完成：

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs e)
{
    CultureInfo ci = CultureInfo.CreateSpecificCulture(HttpContext.Current.User.Language ?? CultureName);
    Thread t = System.Threading.Thread.CurrentThread;
    t.CurrentCulture = ci;
    t.CurrentUICulture = ci;
} 
```

完成此操作后，使用全球化的每个功能都将根据适当的文化运行。（这还包括例如：`(5.52M).ToString()`，这将取决于`5.52`或中的文化结果`5,52`。

一个重要的步骤是更改线路：

```
viewModel.Message = rm.GetString("SuccessfullySaveChanges", CultureInfo.CreateSpecificCulture(user.Language ?? CultureName)); 
```

至：

```
viewModel.Message = rm.GetString("SuccessfullySaveChanges"); 
```**

# ruby-on-rails - 为什么此事务在 ActiveRecord 中不起作用？

> ID：12621229
> 
> 赞同：5
> 
> 时间：2012-09-27T12:19:28.730
> 
> 标签：ruby-on-rails, ruby, activerecord, transactions

我目前正在玩交易，无法围绕以下场景进行思考：

假设有用户名“johnny”和全名“John Smith”的用户。

我启动两个 Rails 控制台并按此顺序执行以下命令：

控制台 A：

```
ActiveRecord::Base.transaction { user = User.find_by_username("foo"); sleep 10; user.update_attribute(:full_name, "#{user.full_name}-1"); } 
```

控制台 B：

```
ActiveRecord::Base.transaction { user = User.find_by_username("foo"); sleep 10; user.update_attribute(:full_name, "#{user.full_name}-2"); } 
```

所以时间安排如下：

A 读“约翰·史密斯”

B 读“约翰·史密斯”

A 写“John Smith-1”

B 写“约翰·史密斯-2”

根据我的数据库类事务 B 应该无法写入“John Smith-2”，因为数据在读取后发生了变化。所以事务应该被回滚并且事务A应该获胜。我希望用户名是“John Smith-1”，但结果是“John Smith-2”。

任何想法为什么会发生这种情况或如何获得预期的行为？

亲切的问候

尼尔斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:45:15.293

据我了解事务与锁定无关，事务的主要目的是确保原子更改。例如，当您从支票账户中扣除资金并将其存入您的储蓄账户时，您需要确保两个 INSERT 都成功或都失败，否则您将处于不一致的状态。您需要的是锁定，例如[http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Optimistic.html)。

**更新：**据我所知，ACID 并不意味着回滚事务。如果没有错误，则两个事务都会成功。你得到的结果确实取决于隔离。如果`SERIALIZABLE`使用级别，您将获得“John Smith-1-2”，但 InnoDB 默认使用`REPEATABLE READ`级别[http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html#isolevel_repeatable- read](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html#isolevel_repeatable-read)，这意味着如果`SELECT`是非锁定 ( `User.find_by...`) 它不会锁定记录以供读取，并且您从事务 A 开始时创建的快照中获得原始结果（即`SELECT`从 B 将不会锁定，直到 A 完成，如`SERIALIZABLE`）。

**UPDATE:** Meanwhile you can check [http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html) for pessimistic locking.

# java - Class.forName 给出 ClassNotFound 异常

> ID：12621231
> 
> 赞同：13
> 
> 时间：2012-09-27T12:19:33.117
> 
> 标签：java

我正在使用以下代码::

```
String className  = "SmsHelper"
Class c = Class.forName(className); 
```

我得到以下

堆栈跟踪 ：：

```
 inside main java.lang.ClassNotFoundException: SmsURLHelper
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at com.tcs.sms.actions.SmsUtil.invoke(SmsUtil.java:131) 
```

注意：存在 SmsHelper 类。

如果我错过了任何事情，请提出建议。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-27T12:22:12.393

使用完全限定名称。

例子：

```
Class.forName("com.yourownpackage.SmsHelper"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T12:23:28.153

**请在forName**方法中将类名及其包名（您的类所在的类）作为字符串写入。这是要使用的示例：

```
String className  = "com.testpackage.SmsHelper";
Class c = Class.forName(className); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T12:24:10.993

1.  `class.forName()`需要一个完全限定的类名——例如`com.tcs.foo.bar.SmsURLHelper`.

2.  为什么不直接写`SmsHelper.class`——这将在编译时检查，编译为对 class.forName() 的适当调用。

# java - 在摆动中关闭父窗口

> ID：12621233
> 
> 赞同：2
> 
> 时间：2012-09-27T12:19:43.800
> 
> 标签：java, swing, menu, jframe, jinternalframe

嗨，我正在使用 JFrame 在 JFrame 中单击菜单时设计摇摆应用程序，我的要求是在 JFrame 上添加 JInternal 框架及其工作。现在的问题是我想根据在 jinternalframe 上单击的按钮刷新 Jframe 并关闭当前的 JInternal Frame。我正在使用以下代码的 JInternal 框架的按钮单击怎么可能？

```
 try
   {
  MainForm frm= new Mainform();
  frm.cp.add("adding here JEditor Pane");
 this..dispose();
   }
 catch(Exception ex)
 {
  } 
```

它的工作和关闭 JinternalFrame 但 JFrame 表单的页面在新窗口中打开不刷新前一个你能建议我的代码吗？

非常感谢提前

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:30:32.237

*   Oracle 教程[How to Use Internal Frames中解释了您的部分问题](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

*   其余描述在`Rules of Using Internal Frames`

*   阅读[如何使用按钮](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)和[如何编写动作监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

*   如果您是一个真正的问题，则[SSCCE](http://sscce.org/)的帖子展示了您的问题`JButton`，`ActionListener`以及`JInternalFrames`

*   我会被重用`JInternalFrames`并且只在屏幕上改变它们的可见性

# java - 从独立客户端访问在 JBoss 7.1.1 上的 WAR 中部署的 @Remote EJB

> ID：12621234
> 
> 赞同：0
> 
> 时间：2012-09-27T12:19:45.410
> 
> 标签：java, jakarta-ee, jboss, ejb, war

我有点失落。我已经在谷歌上搜索了很长时间。`@Remote`是否可以使用从独立 java 客户端打包到 WAR 文件中的EJB 访问？我正在使用 JBoss 7.1.1 和我尝试的每一个 JNDI 名称组合我不断收到 NameNotFoundException。

我在文档中找不到任何相关内容。只是说在 Java EE 网络配置文件`@Remote`中不受支持，但我想如果我在 JBoss 7.1.1 上运行它，它会在完整配置文件上运行，而不是在网络配置文件上运行（只是因为它被打包在 WAR ）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:17:55.437

试试[这个文档](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)。如果这对你来说太长了，你可以在[github上查看我的示例代码](https://github.com/mmazi/jboss-ee/tree/master/client)

需要注意的重要事项：

1.  查看您`jboss/bin/client/README.txt`的如何轻松包含相关库
2.  使用`ejb:/...`名称进行查找；`java:...`您在部署时在日志中看到的 名称是远程暴露的注释
3.  这两个`*.properties`文件：在某些情况下（当某些库丢失等时），您可能认为需要在其中添加一些内容，但它们很好；确保您正确设置了其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T15:01:29.040

您需要生成一个 EAR 文件。这意味着您拥有一个 Java EE 应用程序，而不仅仅是 Web。然后，您将能够从 Java 客户端定位并调用您的远程 EJB。

# tsql - 我可以在 SQL Server 2005 中使用 MERGE 语句吗？

> ID：12621241
> 
> 赞同：12
> 
> 时间：2012-09-27T12:19:57.953
> 
> 标签：tsql, sql-server-2005, merge

我正在使用 SQL Server 2005，我想在 SQL Server 2005 的单个查询中创建 MERGE 语句或概念。这可能吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-27T12:34:55.940

[`MERGE`](http://technet.microsoft.com/en-us/library/bb510625(v=sql.100).aspx)在 SQL Server 2008 中引入。如果要使用该语法，则需要升级。

否则，典型的方法将取决于源数据的来源。如果它只是一行并且您不知道是否需要更新或插入，您可能会这样做：

```
UPDATE ... WHERE key = @key;

IF @@ROWCOUNT = 0
BEGIN
    INSERT ...
END 
```

如果您的源是#temp 表、表变量、TVP 或其他表，您可以执行以下操作：

```
UPDATE dest SET ...
  FROM dbo.destination AS dest
  INNER JOIN dbo.source AS src
  ON dest.key = src.key;

INSERT dbo.destination SELECT ... FROM dbo.source AS src
  WHERE NOT EXISTS (SELECT 1 FROM dbo.destination WHERE key = src.key); 
```

与`MERGE`（正如[Michael Swart 在这里演示的那样](http://michaeljswart.com/2011/09/mythbusting-concurrent-updateinsert-solutions/)）一样，您仍然希望用适当的事务、错误处理和隔离级别来包围这些方法中的任何一个，以使其表现得像一个真正的单一操作。即使是单个`MERGE`语句也不能保护您免受并发的影响。

我在[此处](http://www.mssqltips.com/sqlservertip/3074/tip-on-using-caution-with-merge/?utm_source=AaronBertrand)和[此处](https://sqlblog.org/merge)更详细地发布了有关 MERGE 的其他一些注意事项。

# batch-file - 即使 IF 语句成功，我也无法退出以下代码中的 forloop

> ID：12621242
> 
> 赞同：0
> 
> 时间：2012-09-27T12:19:59.620
> 
> 标签：batch-file

即使 IF 语句成功，我也无法退出以下代码中的 for 循环。目前的情况是代码完全通过“for循环”，如果 if 语句成功，则不会移动到 :next。我不知道该怎么办？

```
FOR %%A IN (2,3,4) DO GOTO %%A

:2
echo wscript.echo ^(Date^(^)-2^)>yesterday.vbs
for /f %%a in ('cscript //nologo yesterday.vbs') do set ydate1=%%a
del yesterday.vbs
set ydate1=%ydate1:/=%
set m=%ydate1:~0,2%
set d=%ydate1:~2,2%
set y=%ydate1:~4,4%
set ydate2=%m%-%d%-%y%
echo yesterday was %ydate2%
IF EXIST ATELBSNT40_complete_txs_%ydate2%.log GOTO :NEXT

:3
echo wscript.echo ^(Date^(^)-3^)>yesterday.vbs
for /f %%a in ('cscript //nologo yesterday.vbs') do set ydate1=%%a
del yesterday.vbs
set ydate1=%ydate1:/=%
set m=%ydate1:~0,2%
set d=%ydate1:~2,2%
set y=%ydate1:~4,4%
set ydate2=%m%-%d%-%y%
echo yesterday was %ydate2%
IF EXIST ATELBSNT40_complete_txs_%ydate2%.log GOTO :NEXT

:4
echo wscript.echo ^(Date^(^)-4^)>yesterday.vbs
for /f %%a in ('cscript //nologo yesterday.vbs') do set ydate1=%%a
del yesterday.vbs
set ydate1=%ydate1:/=%
set m=%ydate1:~0,2%
set d=%ydate1:~2,2%
set y=%ydate1:~4,4%
set ydate2=%m%-%d%-%y%
echo yesterday was %ydate2%
IF EXIST ATELBSNT40_complete_txs_%ydate2%.log GOTO :NEXT

:NEXT 
ECHO ^<TD WIDTH="25%" VALIGN="TOP" HEIGHT=1^>>>c.html
ECHO ^<FONT FACE="Arial" SIZE=1 COLOR="#808080"^>^<P^>%ydate2%^</FONT^>^</TD^>>>c.html
ECHO ^<TD WIDTH="25%" VALIGN="TOP" HEIGHT=1^>>>c.html
ECHO ^<FONT FACE="Arial" SIZE=1 COLOR="#808080"^>^<P^>%CDate%^</FONT^>^</TD^>>>c.html
GOTO END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:05:48.760

我不确定`for`循环有什么问题，但你并不真的需要它。's 提供您需要的`if`所有流控制。

```
REM Starts here
echo wscript.echo ^(Date^(^)-2^)>yesterday.vbs
for /f %%a in ('cscript //nologo yesterday.vbs') do set ydate1=%%a
del yesterday.vbs
set ydate1=%ydate1:/=%
set m=%ydate1:~0,2%
set d=%ydate1:~2,2%
set y=%ydate1:~4,4%
set ydate2=%m%-%d%-%y%
echo yesterday was %ydate2%
IF EXIST ATELBSNT40_complete_txs_%ydate2%.log GOTO :NEXT

REM If file doesn't exist fall over to here, same with the others
echo wscript.echo ^(Date^(^)-3^)>yesterday.vbs
for /f %%a in ('cscript //nologo yesterday.vbs') do set ydate1=%%a
del yesterday.vbs
set ydate1=%ydate1:/=%
set m=%ydate1:~0,2%
set d=%ydate1:~2,2%
set y=%ydate1:~4,4%
set ydate2=%m%-%d%-%y%
echo yesterday was %ydate2%
IF EXIST ATELBSNT40_complete_txs_%ydate2%.log GOTO :NEXT

echo wscript.echo ^(Date^(^)-4^)>yesterday.vbs
for /f %%a in ('cscript //nologo yesterday.vbs') do set ydate1=%%a
del yesterday.vbs
set ydate1=%ydate1:/=%
set m=%ydate1:~0,2%
set d=%ydate1:~2,2%
set y=%ydate1:~4,4%
set ydate2=%m%-%d%-%y%
echo yesterday was %ydate2%
IF EXIST ATELBSNT40_complete_txs_%ydate2%.log GOTO :NEXT

:NEXT 
ECHO ^<TD WIDTH="25%" VALIGN="TOP" HEIGHT=1^>>>c.html
ECHO ^<FONT FACE="Arial" SIZE=1 COLOR="#808080"^>^<P^>%ydate2%^</FONT^>^</TD^>>>c.html
ECHO ^<TD WIDTH="25%" VALIGN="TOP" HEIGHT=1^>>>c.html
ECHO ^<FONT FACE="Arial" SIZE=1 COLOR="#808080"^>^<P^>%CDate%^</FONT^>^</TD^>>>c.html
GOTO END 
```

# php - PHP解析多个发布变量数组

> ID：12621246
> 
> 赞同：0
> 
> 时间：2012-09-27T12:20:11.663
> 
> 标签：php, arrays, object

所以我正在做一些背景知识。我正在使用包含大量姓名和电子邮件列表的 Excel 电子表格，并根据一系列过滤器向它们发送列表的较小子集。为了完成过滤，我将每个 Excel 行分解为 JSON 数组并将其放入 DOM 中，然后使用 Javascript/jQuery 填充一些隐藏字段。

完成所有过滤后，我有大约十几个逗号分隔的列表，然后在发布表单时使用 PHP explode 将其转换回数组。我需要能够使用特定于该人的数据来切换电子邮件正文中的一些变量。在不涉及太多细节和冒着让你困惑的风险的情况下，我基本上需要用 PHP 发布的数组中的值替换电子邮件正文中的一些值。

我将发布的数据拉入并使用以下代码将它们转换为数组：

```
//Bring in Hidden fields - turn into arrays
$companies = explode(",", $_POST['companies']);
$kw_signed = explode(",", $_POST['kw_signed']);
$header_rows = explode(",", $_POST['header_rows']);
$first_names = explode(",",$_POST['first_names']);
$emails = explode(",",$_POST['emails']);
$full_names = explode(",",$_POST['full_names']);
$markets = explode(",",$_POST['market']);
$zones = explode(",",$_POST['zones']);
$cities = explode(",",$_POST['cities']);
$states = explode(",",$_POST['states']);
$zipcodes = explode(",",$_POST['zipcodes']);
$p_factors = explode(",",$_POST['perf_factor']); 
```

在我创建了一堆数组之后，我使用 for 循环遍历数组并使用 foreach 将电子邮件正文中的变量替换为它们各自的值，如下所示：

```
for($i=0; $i<$count; $i++) {
    //Create temp variable for body temp    
    $body_temp = $email_text;   
    //Replace header strings with value
    foreach($header_rows as $header) {
        if($header == '{first_name}') {
            $body_temp = str_replace($header, $first_name[$i], $body_temp);
        } else if($header == '{email}') {
            $body_temp = str_replace($header, $emails[$i], $body_temp);
        } else if($header == '{company}') {
            $body_temp = str_replace($header, $companies[$i], $body_temp);
        } else if($header == '{zone}') {
            $body_temp = str_replace($header, $zones[$i], $body_temp);
        } else if($header == '{market}') {
            $body_temp = str_replace($header, $markets[$i], $body_temp);
        } else if($header == '{city}') {
            $body_temp = str_replace($header, $cities[$i], $body_temp);
        } else if($header == '{state}') {
            $body_temp = str_replace($header, $states[$i], $body_temp);
        } else if($header == '{zip}') {
            $body_temp = str_replace($header, $zipcodes[$i], $body_temp);
        } else if($header == '{facility_type}') {
            $body_temp = str_replace($header, $facility_type[$i], $body_temp);
        }
    } 
```

所以，现在到了这个问题。
如何更有效地进行替换？
我是否使用包含信息的数组创建一个对象并循环遍历数组以替换每个发布名称的对象变量，或者我是否完全以错误的方式进行此操作？任何见解将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:34:53.513

您可以按以下方式进行替换

```
for($i=0; $i<$count; $i++) {
    //Create temp variable for body temp    
    $body_temp = $email_text;
    $body_temp = str_replace(array('{firsname}','{email}'), array($first_name[$i],$emails[$i]), $body_temp);  
} 
```

# jakarta-ee - JSF 列表 提交时列表为空

> ID：12621249
> 
> 赞同：0
> 
> 时间：2012-09-27T12:20:22.287
> 
> 标签：jakarta-ee, jsf-2, richfaces, form-submit

好吧，标题不是很好，但我找不到更好的......

在java中

我有一个带有一些属性的类型化类和另一个类型的列表......

在 HTML 中，我有一个表格，其中每一行都是上面列表的一个元素，我可以成功获取每一行的属性，但是当我提交表单时，列表为空/null

这是我的代码：

**测试**

```
package rip;

import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;

@ManagedBean
public class Testata {
    private String codice = "asd"; // set up for test
    private String descrizione = "descrizione"; // set up for test
    private Date data_inizio = new Date(); // set up for test
    private Date data_fine = new Date(); // set up for teset

    private List<Righe> righe;

    public Testata()
    {  // set up righe for test
            righe = new ArrayList<Righe>();
            righe.add(new Righe("001", "descrizione riga 1", "G", true));
            righe.add(new Righe("002", "descrizione riga 2", "G", false));
            righe.add(new Righe("003", "descrizione riga 3", "P", false));
    }

       // base setter/getter
     public List<Righe> getRighe() {
        return (righe);
    }
    public void setRighe(List<Righe> righe) {
        System.out.println("Set Righe"); // used for debug, in my tests 
                                             // it was never printed
        this.righe = righe;
    }

    public String validateSecond()
    {
        if (righe != null)
        {
            for (int i = 0 ; i < righe.size() ; i++)
            {
                System.out.println(righe.get(i).getCodice());
            }
        }
        else
        {
            System.out.println("Righe is null"); // usually submitting the 
                                        // form I got this message in console
        }
        return null;
    } 
```

**右**

```
public class Righe {

    private String codice;
    private String descrizione;
    private String tipo;
    private Boolean YESNO;      

    private static String [] codiceLists = {"001","002","003","004","005","006","007","008"};
    private static String [] descrizioneLists = {"desc 001","desc 002","desc 003","desc 004","desc 005","desc 06","desc 007","desc 008"};
    private static String [] tipoLists = {"P", "G"};

// getter / setter

    // getter for static lists

public String [] getCodiceLists() {
    return codiceLists;
}

public String [] getDescrizioneLists() {
    return descrizioneLists;
} 
```

**righthe.xhtml**

```
<h:form id="form_righe">                        
    <h:dataTable var="righe"  styleClass="table_dettaglio"
        rowClasses="table_dettaglio_row"            
            value="#{testata.righe}"            
            columnClasses="column_generic,column_generic,tipo_column,column_generic,column_generic"             
            >               
                <h:column>
                    <f:facet name="header">Codice</f:facet>                                         
                    <rich:select id="codice" enableManualInput="false" value="#{righe.codice}">
                            <f:selectItems value="#{righe.codiceLists}" />
                            <a4j:ajax event="selectitem" render="@form" execute="@this"/>
                </rich:select>                      
                </h:column>         
                <h:column>
                    <f:facet name="header">Descrizione</f:facet>                        
                    <rich:select enableManualInput="true"   id="descrizione"                        
                            defaultLabel="#{righe.descrizione}">
                            <f:selectItems value="#{righe.descrizioneLists}" />
                </rich:select>
                </h:column>     
                <h:column>
                <h:outputStylesheet>
                    .mySelectStyle input{
                    width: 100px;
                }</h:outputStylesheet>
                    <f:facet name="header">Tipo</f:facet>                       
                    <rich:select enableManualInput="false"                                  
                        styleClass="mySelectStyle"                          
                    defaultLabel="#{righe.tipo}">
                    <f:selectItems value="#{righe.tipoLists}" />
                    </rich:select>
                </h:column>         
                <h:column>
                    <f:facet name="header">Valore</f:facet>
                    <h:inputText value="#{rige.valore}" style="width: 150px;"/>                     
                </h:column>

                <h:column>
                    <f:facet name="header">YesNo?</f:facet>
                    <h:selectOneRadio id="flag_medico" value="#{righe.flag_medico}" layout="pageDirection"                                  
                                styleClass="radio_check"/> 

                </h:column>
            </h:dataTable>                          
      <h:commandButton class="button btn btn-warining btn-large" action="#{testata.validateSecond}"
                                       value="Salva" />
       <h:commandButton type="reset" class="button btn btn-warining btn-large" value="Pulisci"/>
  </div>
</h:form> 
```

打开页面，我正确显示了所有行，并且正确评估了每个字段。在`validateSecond`方法中提交后，我得到一个空值`List<Righe>` 我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:46:19.427

尝试将`@ViewScoped`or `@SessionScoped`（取决于您的需要）添加到您的托管 bean 中，因为没有该注释，默认值将是`@NoneScoped`

使用数据表时，至少使用它更常见`@ViewScoped`

看看这个[@ViewScoped 的好处和陷阱 - BalusC](http://balusc.blogspot.co.il/2010/06/benefits-and-pitfalls-of-viewscoped.html)

# java - Liferay：如何隐藏注册页面以登录用户。只向客人展示？

> ID：12621252
> 
> 赞同：1
> 
> 时间：2012-09-27T12:20:29.263
> 
> 标签：java, jsp, liferay, portal

知道如何在哪个文件或代码中执行此操作。我想要改变。

请帮助如何在用户登录时从导航菜单中隐藏**SignUP 。**

# iphone - UICollectionView 制作EPG

> ID：12621254
> 
> 赞同：2
> 
> 时间：2012-09-27T12:20:30.723
> 
> 标签：iphone, objective-c, ios, uicollectionview, epg

WWDC 的一些人告诉我，UICollectionView 非常适合在 iOS 中创建 EPG（电子节目指南）样式视图，如下图所示。但是，我找不到任何接近这个的样本......有人知道吗？

![在此处输入图像描述](../Images/6bcbcc140c9602cb8a91bccba12048c5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-14T22:24:55.740

[这是使用 UICollectionView 和自定义 UICollectionViewLayout https://github.com/CoderXpert/EPGGrid](https://github.com/CoderXpert/EPGGrid) ...快速创建 EPG 网格的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:10:18.057

在很多情况下，您可以通过子`UICollectionViewFlowLayout`类化来完成它。但在这种情况下，您必须编写自己的布局。因为`UICollectionViewFlowLayout`适用于基于行的布局，其中行在末尾断开。但在这种情况下，这是行不通的。

所以自定义布局是要走的路。您可能想查看有关自定义布局和 Apple 文档的 WWDC 会议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:29:39.580

好吧，看起来很简单，您只需要 CollectionView 中的一个部分和每个项目的高度相同。要使项目的长度动态化，您只需要这个 api，您可以在其中计算空间并返回适当的大小。

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
```

这是 UICollectionViewDelegateFlowLayout 协议方法之一。确保您的水平滚动已启用集合视图，您可以从情节提要中设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-15T09:43:56.047

[https://github.com/NOUSguide/NGVaryingGridView](https://github.com/NOUSguide/NGVaryingGridView) 一个允许为单元设置单个矩形的 GridView。因此，您可以定义具有不同大小的单元格，例如用于时间表、EPG 等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T09:26:05.517

我有同样的问题 - 我不确定，但我认为你（我们）将不得不子类化

```
UICollectionViewFlowLayout 
```

为了实现这种布局：P

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-19T12:35:19.587

[https://github.com/inspace-io/INSElectronicProgramGuideLayout](https://github.com/inspace-io/INSElectronicProgramGuideLayout) UICollectionViewLayout 用于显示对您有帮助的电子节目指南。

# c# - 通过 ssl 连接以打开 LDAP

> ID：12621256
> 
> 赞同：4
> 
> 时间：2012-09-27T12:20:37.377
> 
> 标签：c#, openldap

我正在一个用于重置 LDAP 用户密码的网站上工作。我无法通过 ssl 与服务器建立连接。我尝试了各种代码和身份验证类型。

这是在服务器上用于与托管网站的 LDAP 连接的内容。我还使用两个 ssl 端口对其进行了测试。636 和 3269。

```
0 = ldap_set_option(ld, LDAP_OPT_ENCRYPT, 1)
res = ldap_bind_s(ld, NULL, &NtAuthIdentity?, NEGOTIATE (1158)); v.3

{NtAuthIdentity?: User='_ldapuser'; Pwd='unavailable';; domain = 'SJTPNOC.DOMAIN'} 
```

我在网站中使用以下代码

```
LdapConnection connection = new LdapConnection(new LdapDirectoryIdentifier("SJTP.DOMAIN",636));

connection.SessionOptions.ProtocolVersion = 3;

connection.AuthType = AuthType.Basic;

connection.Credential = new NetworkCredential("CN=user,CN=Users,DC=SJTPNOC,DC=DOMAIN", "password","CN=Users,DC=SJTPNOC,DC=DOMAIN");

connection.SessionOptions.SecureSocketLayer=true;

connection.Bind(); 
```

获取异常“LDAP 服务器不可用”。我尝试了使用 389 端口且没有 ssl 的代码，它工作正常。

请让我知道出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:57:03.080

如果您只想要加密并且不需要 ldap 服务器的强身份验证，也许您应该添加：

```
connection.SessionOptions.VerifyServerCertificate =
                new VerifyServerCertificateCallback((con, cer) => true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-29T21:51:27.000

我也有通过 SSL 连接的问题，但不是通过纯文本。我做了一些网络嗅探，并且能够看到虽然我将 LdapConnection.AuthType 设置为 Basic，但我的客户端计算机正在查找并使用客户端证书进行 SSL 握手。它找到的证书（不知道我是否应该对 VisualStudio 或 .NET LdapConnection 类感到生气）是 LDAP 服务器不喜欢的俗气的自签名证书。它返回一个非常安全的“服务器不可用”错误；很好。所以在 SessionOptions 中有一个客户端证书解析器委托，我需要提供一个非常简单的实现：

```
public static X509Certificate ClientCertFinder(LdapConnection connection,
                                                byte[][] trustedCAs)
{
   return null;
} 
```

然后，将 SessionOptions QueryClientCertificateCallback 委托设置为使用存根，如下所示：

```
connection.SessionOptions.QueryClientCertificate =
      new QueryClientCertificateCallback(ClientCertFinder); 
```

您甚至可以像@jbl's answer for the validation callback 那样将其设为oneliner，但也许有一天我会想要进行客户端证书身份验证，并且拥有该存根可以提醒您如何做到这一点。

# ios - 与 iPhone 3G 和 iPhone 5 兼容的应用程序

> ID：12621257
> 
> 赞同：1
> 
> 时间：2012-09-27T12:20:38.277
> 
> 标签：ios, xcode

AFAIK，在 Xcode 4.5 中，`armv6`支持已被弃用，部署目标应该是 minimum `iOS 4.3`。

因此，**不可能开发适用于 iPhone 3G 和 iPhone 5 的应用程序**。这是正确的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:31:04.537

这是正确的。好吧，您可以使用较旧的 Xcode 构建您的应用程序，这样它就可以在 iPhone 3G 和 iPhone 5 上运行，但不会占用 iPhone 5 上的整个屏幕。这是有意的，iPhone 3G 支持早已不复存在。

编辑：这里提供了一个非官方的解决方案作为答案：[How to support armv6 and armv7s for release build in xcode 4.5](https://stackoverflow.com/q/12619124/877465)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:47:07.417

Apple 已停止接受支持 iOS5 之前的设备并包含 iPhone 5 启动图像的版本。这是我提交的基于 Xcode 4.4.1 构建的最后一个构建的电子邮件

> 亲爱的开发者，
> 
> 我们发现您最近交付的“”存在一个或多个问题。要处理您的交付，必须更正以下问题：
> 
> 无效的启动图像 - 您的应用包含一个带有大小修饰符的启动图像，仅支持使用 iOS 6.0 SDK 或更高版本构建的应用。
> 
> 更正这些问题后，请转到“版本详细信息”页面并单击“准备上传二进制文件”。继续完成提交过程，直到应用状态为“等待上传”。然后，您可以提供更正后的二进制文件。
> 
> 问候，
> 
> 应用商店团队

# javascript - onChange 函数未定义

> ID：12621258
> 
> 赞同：21
> 
> 时间：2012-09-27T12:20:48.000
> 
> 标签：javascript, jquery, undefined, onchange

这一定很简单。我搜索了互联网，只发现语法错误是导致此问题的原因，但我找不到语法错误。

这是javascript：

```
<script type="text/javascript" src="http://localhost/acrilart/javascript/jquery-1.6.4.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        function hi(){
            alert('hi');
        }
        hi();
    });
</script> 
```

和 HTML：

```
<input type="text" name="cep" value="" id="cep" class="required cep field"
       onChange="hi()" /> 
```

在页面加载时，该函数`hi`按预期调用，但我的`onChange`事件导致 Firebug 错误，表示该函数未定义。我真的很难过。我拼错了“嗨”吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-27T12:22:30.973

该`hi`函数仅在`ready`事件处理程序的范围内。将其移到事件处理程序之外，或在其中处理绑定（并从标记中删除内联事件处理程序属性）：

```
$(document).ready(function(){
    function hi(){
        alert('hi');
    }
    $("#cep").on("change", hi);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T12:22:51.210

该`hi`功能仅在`ready`块中定义。在外面，它已经不存在了。

您不需要将函数定义包装在 中`.ready()`，因此只需将其删除。或者，像这样定义函数：

```
window.hi = function() {...} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T12:24:51.183

在您的代码块中：

```
<script type="text/javascript">
    $(document).ready(function(){
        function hi(){
            alert('hi');
        }
        hi();
    });
</script> 
```

`hi`不是全局函数。您只能在您的范围内访问它`function(){...}`，而不能从外部访问它。

由于您使用的是 jQuery，因此您可以更改将函数绑定到`onChange`事件的方式。您可以编写以下代码，而不是从 html 标记调用它：

```
<script type="text/javascript">
    $(document).ready(function(){
        function hi(){
            alert('hi');
        }
        hi();

        $('#cep').on( 'change', function(){ hi(); } );
    });
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T12:25:25.410

`onchange`仅在控件模糊时触发。试试`onkeypress`吧。

```
$("#cep").on("change", function() {
   alert(1);
}); 
```

*或者*

```
<input type="text" name="cep" value="" id="cep" class="required cep field" 
onkeypress="hi()"  /> 
```

使用以下事件而不是`onchange`：

```
- onkeyup(event)
- onkeydown(event)
- onkeypress(event) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-27T12:29:26.253

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript"> 
function hi(){ 
    alert('hi'); 
} 
</script>

<input type="text" name="cep" value="" id="cep" class="required cep field" onKeyPress="javascript:hi();" /> 
```

# html - 如何在不使用 Flash 的情况下在线播放音频/视频？

> ID：12621263
> 
> 赞同：1
> 
> 时间：2012-09-27T12:21:11.260
> 
> 标签：html, audio, video, broadcast, wowza

我想直接从网站播放音频/视频，而不使用 Flash。

我知道我应该使用广播服务器（我已经发现 wowza 是好的服务器），但我的问题是如何将来自输入的音频/视频（音频、视频标签，如果我使用 html5）发送到广播服务器。

（我的页面语言是 PHP）。

谢谢您的帮助。

# jquery - 如何设置 cookie 来存储 .animate() 之后的页面状态

> ID：12621265
> 
> 赞同：0
> 
> 时间：2012-09-27T12:21:13.663
> 
> 标签：jquery, cookies

我有一个由两个面板组成的页面：左侧的固定侧边栏和右侧的流动内容。

我还有一个按钮可以触发动画效果，部分隐藏侧边栏。

我的问题是：如何在页面刷新后隐藏左侧面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:24:04.673

只需设置 cookie 并检查它的值，以确定如何显示您的侧边栏。操纵cookie，有很好的[插件](http://javascriptmvc.com/docs.html#!jQuery.cookie)

# javascript - Firefox 扩展中的 Html 弹出 iframe

> ID：12621267
> 
> 赞同：1
> 
> 时间：2012-09-27T12:21:18.200
> 
> 标签：javascript, firefox-addon, xul

我在`contentAreaContextMenu`（右键单击）菜单中添加了一个菜单项，单击该菜单项以将 HTML 页面作为弹出窗口打开，就像您看到[“Google 新闻”](https://stackoverflow.com/questions/2075697/replicating-google-chrome-browser-actions-popup-effect-in-a-firefox-extension)的方式一样。我已经读到 an`<iframe>`用于此，但经过这么多阅读后，我仍然不知道如何让弹出窗口打开并显示 HTML 页面（`popup.html`）。

如果有人有建议或知道如何执行此操作，请提供帮助。它是我的第一个 Firefox 扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:41:17.260

您只需捕获点击事件，然后调用函数 openDialog( URL );

# python - Python：网格点 X、Y 和 Z 以提取统计属性

> ID：12621272
> 
> 赞同：2
> 
> 时间：2012-09-27T12:21:47.743
> 
> 标签：python, numpy, geospatial, raster, gdal

很抱歉这个简单的问题，但我是 Python 新手，我需要同样的帮助。

我的数据采用点格式：X、Y、Z。其中 X 和 Y 是坐标，z 是值。

我的问题是：创建一个 0.5 m x 0.5 m（或 1 x 1 m）的栅格（以 TIF 或 ASCII 格式），其中每个像素的值是 Z 的平均值。如果我在像素中没有点-i该值需要为 NAN。

我很高兴能得到一些我可以学习和实现的代码的帮助，

提前感谢您的帮助，我真的需要。

我试着研究并写了一段代码：

```
from osgeo import gdal, osr, ogr
import math, numpy
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as ml
import matplotlib.delaunay

tiff = 'test.tif'

gridSize = 0.5
# my area boundary
xmax, xmin = 640000.06, 636999.83
ymax, ymin = 6070000.3, 6066999.86

# number of row and columns
nx = int(math.ceil(abs(xmax - xmin)/gridSize))
ny = int(math.ceil(abs(ymax - ymin)/gridSize))

# Plot the points
plt.scatter(x,y,c=z)
plt.axis([xmin, xmax, ymin, ymax])
plt.colorbar()
plt.show()

# Generate a regular grid.
xi = np.linspace(xmin, xmax, nx)
yi = np.linspace(ymin, ymax, ny)
xi, yi = np.meshgrid(xi, yi) 
```

从这一点来看，我很难理解如何索引 x、y、z 点以了解它们的下降位置。我的第一个想法是为网格网格提供索引并标记点。之后，我可以对像素内的点进行平均。空像素（没有存在点的地方）是 NAN。

但我不知道这是处理我的数据的正确方法。

之后，我编写了以下代码以通过 GDAL 以 TIFF 格式保存

```
target_ds = gdal.GetDriverByName('GTiff').Create(tiff, nx,ny, 1, gdal.GDT_Byte) #gdal.GDT_Int32
target_ds.SetGeoTransform((xmin, gridSize, 0,ymax, 0, -gridSize,))

if EPSG == None:
    proj = osr.SpatialReference()
    proj.ImportFromEPSG(EPSG)
    # Make the target raster have the same projection as the source
    target_ds.SetProjection(proj.ExportToWkt())
else:
    # Source has no projection (needs GDAL >= 1.7.0 to work)
    target_ds.SetProjection('LOCAL_CS["arbitrary"]')

target_ds.GetRasterBand(1).WriteArray(numpy.zeros((ny,nx)))
target_ds = None 
```

真的感谢所有的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:59:30.757

一个方法：

*   定义您的网格`spacing`（一个浮点数），即同一维度中两个像素/体素中点之间的距离
*   算出你需要的网格大小，即网格点的数量`x`和`y`尺寸`N_x`， 和`N_y`。
*   使用例如创建两个`numpy`该大小的数组，所有值都为零`np.zeros([N_x, N_y])`
*   遍历您的一组 (x, y, v) 点和
    *   将每个 (x, y) 对投影到其对应的像素中，通过两个（整数）索引标识：`x_i, y_i = tuple([int(c//spacing) for c in (x, y)])`
    *   将 1 添加到一个数组中`(x_i, y_i)`（保存“计数”）
    *   将值添加`v`到另一个数组中`(x_i, y_i)`（保存值的总和）
*   在填充了两个数组后，将值数组之和除以计数数组。0/0.0 将自动分配给`NaN`，而 c/0.0 将分配给`Inf`。

# tfs - TFS 签入中的用户名是否不可变

> ID：12621273
> 
> 赞同：1
> 
> 时间：2012-09-27T12:21:48.373
> 
> 标签：tfs

在 TFS 2010 中，作为签入的一部分捕获的用户名是来自 Active Directory 的“用户登录”。我的公司使用 x12345 格式进行用户登录。

该组织最近开始回收登录信息，例如 2 年前的 x54321 可能是 John Doe，今天 John 离开了公司，该号码重新分配给 Jane Smith。这意味着 TFS 2010 历史将显示代码已由 x54321 签入，但该数字所代表的个人将发生变化。这当然是一个问题，因为它损害了我们审核代码和了解谁进行了某些更改的能力。

我的理解是 TFS 2012 为用户使用 Active Directory“显示名称”。这是不可变的吗？即在上面的场景中，将在 2 年前检查登录 x54321 的代码在 TFS 历史记录中显示为“John Doe”，而今天由 x54321 检查的代码显示为“Jane Smith”，或者历史记录将被更改为显示“Jane Smith”进行了较旧的签到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:28:48.510

如果我正确理解您的问题，您想知道是否更新 AD 中的显示名称是否会反映在 2 年前发生的 TFS 签入中。在 TFS 2010 和更新版本中，答案是肯定的，这些名称将针对旧的 TFS 签入进行更新。TFS 有一个定期运行的身份同步过程，因此一旦您在 AD 中进行更改，您将需要等待同步发生，然后才会反映更改。

在 tfspreview.com 和 TFS 2012 上，用户可以直接在 TFS 中设置自定义显示名称，因此可以完全绕过 AD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:58:25.573

TFS 2012 项目集合将项目与 Active Directory SID 相关联，因此如果删除了 AD 用户，则会使用相同的用户名创建另一个用户，他们将不会被视为同一个人。但是我不确定历史中会显示什么，因为 TFS 无法查找用户。

TFS 2012 Warehouse 似乎保留了域、sid、友好名称、域登录和电子邮件。并且有一个变更集的维度，我认为它不会存储所做的确切更改，但可以让您在需要时查找用户名。

虽然它不相关，但我很想知道为什么你的它离开重用登录，而 tfs 2012 可能不是问题，我相信还有很多其他问题。

# javascript - 单击另一个标记时关闭信息窗口

> ID：12621274
> 
> 赞同：6
> 
> 时间：2012-09-27T12:21:49.810
> 
> 标签：javascript, google-maps

当单击特定标记并打开一个窗口时，我有以下代码来打开一个信息窗口。有谁知道单击另一个信息窗口时如何关闭上一个信息窗口？

```
 google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map1, marker);
        }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T12:39:36.430

只要确保只`infoWindow`在全局范围内创建 ONE，如下所示：

```
infoWindow = new google.maps.InfoWindow; //static infoWindow for all your markers
google.maps.event.addDomListener(window, 'load', function() {
   //create your markers here
   google.maps.event.addListener(marker, 'click', function() {
               infoWindow.open(map1, marker); //take care with case-sensitiveness
          });
}); 
```

**更新**：

*   修复邓肯发现的区分大小写的问题。
*   说明标记单击处理程序必须在标记创建后连接，两者都在页面加载事件内。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-09T17:21:51.490

在您的 JS 文件中创建一个全局变量，将其命名为 lastOpenedInfoWindow 或任何您想要的名称，然后在打开新信息窗口之前将其关闭，将“lastOpenedInfoWindow”分配给当前打开的窗口等等

```
google.maps.event.addListener(marker, 'click', (function(marker, content, infowindow) {
        return function() {
            closeLastOpenedInfoWindow();
            infowindow.setContent(content);
            infowindow.open(map, marker);
            lastOpenedInfoWindow = infowindow;
        };
    })(marker, makrerdata[i], infowindow));
}

function closeLastOpenedInfoWindow() {
    if (lastOpenedInfoWindow) {
        lastOpenedInfoWindow.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-10T14:24:10.453

确保您拥有一个 InfoWindow 实例 - 新的 google.maps.InfoWindow。因此，每次单击标记时，只有一个实例在您的初始化方法中声明或全局声明的 InfoWindow 中声明。

var infoWindow = new google.maps.InfoWindow
确保此 infoWindow 仅实例化一次。否则，每次单击标记时都会打开多个窗口。

```
marker.addListener('click', function () {                                
    infoWindow.setContent(infowincontent);
    infoWindow.open(clntLocMap, marker);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:36:53.973

`infowindow.close()`将关闭一个打开的信息窗口。这取决于您如何创建信息窗口 - 您是否只有一个信息窗口变量来处理所有信息，或者您是否为每个标记创建多个信息窗口对象？在这个阶段如果没有看到更多代码，很难更具体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-06T08:37:22.683

我也遇到了这个问题，我是这样做的：

```
function initMap() {
//---------------------map
var options = {
    zoom: 12,
    center: {
        lat: 43.5963020324707,
        lng: 1.4221688508987427
    }
}
var map = new google.maps.Map(document.getElementById('map'), options);    
//--------------- Adresses
let addresses = [
    "23 Quai Lucien Lombard",
    "18 Place Laganne",
    "266 Avenue de Fronton",
    "3 Impasse du Professeur Nougayrol",
    "1 Allées Charles de Fitte",
    "5 Avenue de Casselardit",
    "84 Chemin des Argoulets"
];

// ---------------- globales
let markers = []
let infowindowArray = []

// ---------------- Adresses Géocoder
geocodeAdresses(addresses)
    .then(res=>{

        geocodeAdressesArray = res;         
        return geocodeAdressesArray
    })
    .then(geocodeAdressesArray=>{
    // --------------create markers
        for (let i = 0; i < geocodeAdressesArray.length; i++){  

            let marker = new google.maps.Marker({ 
                'id': geocodeAdressesArray[i].id,
                'adresse': geocodeAdressesArray[i].adresse,
                'position':{
                    'lat':geocodeAdressesArray[i].lat,
                    'lng':geocodeAdressesArray[i].lng
                }
            });
            markers.push(marker)// push globale             
            marker.setMap(map)
    // ---------- create infowindows

            let infowindow = new google.maps.InfoWindow({
                'position' : marker.position,                
                'content': marker.adresse,
            });
            infowindowArray.push(infowindow) // push globale
        }
    // ---------------close infowindows on clic 
        for (let i = 0; i < markers.length; i++) {
            let marker = markers[i];

            marker.addListener( 'click', ()=>{                  

                for (let j = 0; j < infowindowArray.length; j++) { 
                    let infowindow = infowindowArray[j];
                    infowindow.close(map, marker)
                }
                let currentInfowindows = infowindowArray[i]
                currentInfowindows.open(map)               
            })
        }
    }) 
```

}

对于我的 geocodeAdresses（地址），这是我从 google geocode API 创建的一个函数。

我希望它会有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-26T10:21:28.927

`marker`如果您对“this”有任何问题（在我的情况下，我使用的是 Vue.js），您可以直接使用带箭头函数作为回调。请参阅[文档](https://developers.google.com/maps/documentation/javascript/infowindows)。

就我而言，我有（确保创建一个标记、内容并让 this.mapsInfoWindow 全局实例化，顺便说一句，不需要设置它的内容）：

```
...
marker.addListener("click", () => {
    if (this.mapsInfoWindow) {
        this.mapsInfoWindow.close();
    }
    this.mapsInfoWindow.setContent(content);
    this.mapsInfoWindow.open(this.map, marker);
}); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-02T17:08:14.047

为了在单击另一个信息窗口时关闭前一个信息窗口，您需要确保以下代码在函数 initialize() 循环中。

infoWindow = 新的 google.maps.InfoWindow;

# javascript - 搜索选择器时文件意外结束。由于选择器错误，规则集被忽略

> ID：12621276
> 
> 赞同：0
> 
> 时间：2012-09-27T12:21:57.447
> 
> 标签：javascript, jquery, firefox

这是我正在尝试做的事情：

-单击图像时，`unbind`单击事件（在该图像上）并显示弹出窗口。

- 只要显示弹出窗口，您就不能单击该图像。

- 一旦弹出窗口被解除，点击事件再次绑定在图像上。

所以这是我的代码（图像包含在`li`标签中）。

```
$('li').click(clickOnImage());//Bind the click event with call to clickOnImage method

function clickOnImage(){
  var id=$(this).attr("id");
  console.log('you selected image with id name: '+id);
  showWithAnimation();//Show the popup with animation
}//End function

           function showWithAnimation(){    

                   console.log('animation called');

                   $('#popup').show();

                   $("#popup").css({"top": "10%", "left": "30%"}).animate({top:(($(window).height()/2)-($('#popup').outerHeight()/2))-10}, 1000, 'easeOutBounce').show();

    //As long as the popup is shown, Unbind the click event on images
                   $('li').unbind('click');
}//End function

     function hidePopUp(){

          $('#popup').hide();
           $('li').bind('click',clickOnImage());//if popup is hidden, re-bind the click event and here is the issue!

      }//End function 
```

在 FireFox 上运行时，我在控制台中收到此错误：

```
Unexpected end of file while searching for selector.  Ruleset ignored due to bad selector. 
```

我认为问题在于该函数被递归调用。但我需要执行这种方法。请问我该如何解决。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:29:52.457

你绑定点击事件是错误的。

```
$('li').bind('click',clickOnImage); 
```

你也可以这样绑定

```
$('li').on('click',clickOnImage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:26:32.337

您绑定点击错误。您正在调用该函数，而不是分配它。[在多个地方完成]

```
$('li').click(clickOnImage()); 
```

需要需要

```
$('li').click(clickOnImage); 
```

当您绑定隐藏时，您也会遇到问题。

实际上，您不需要绑定/取消绑定。功能。只需使用元素的状态来确定是否需要隐藏或显示。

# java - 想要 Java 代码创建 OMR Sheet Reader

> ID：12621283
> 
> 赞同：0
> 
> 时间：2012-09-27T12:22:18.200
> 
> 标签：java, swing

任何人都可以提供一些关于如何从图像中捕获数据的示例代码或想法。我的图像是扫描的 OMR 表，我想阅读内容文本输入以及标记的气泡。这样我就可以评估 omr 表的答案。我**不想****使用已经可用的 ocr 工具或 ocr 阅读器。** 我想**创建自己的 omr 阅读器和检查器。**所以请帮助我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:24:35.983

[我认为您必须获得像ImageJ](http://rsbweb.nih.gov/ij/)这样的现有库的支持。

在库中，大部分常用的图像处理功能都已实现和优化，因此您无需担心功能的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:57:33.817

我可以给你一个想法。

祝你好运实现这个想法，因为很难正确地进行光学字符识别 (OCR)。像 IBM 这样的大公司几十年来一直致力于 OCR，而准确率几十年来一直停滞在 90% 的中高水平。

你想做两件事。

首先，您要将文本图像转换为文本。那就是光学字符识别（OCR）。[这是一篇关于光学字符识别](http://en.wikipedia.org/wiki/Optical_character_recognition)的 Wikipedia 文章，可帮助您入门。

其次，您要确定人们提供了哪些答案，也称为光学标记识别 (OMR)。这是一个更容易解决的问题。基本上，您可以在 OMR 表单上找到对齐标记。这些对齐标记将对应于`Rectangle`具有 x、y 原点以及宽度和高度的特定标记。您在对齐标记之间找到图像上的其他标记，并计算标记对应的答案。[这是一篇关于光学标记识别](http://en.wikipedia.org/wiki/Optical_mark_recognition)的 Wikipedia 文章，可帮助您入门。

# apache - 将移动请求重定向到不同的 url

> ID：12621293
> 
> 赞同：0
> 
> 时间：2012-09-27T12:22:54.473
> 
> 标签：apache, http, mobile

我试图根据 apache 2.2 中的 HTTP_USER_AGENT 将移动请求重定向到我网站上的不同 url，比如 abcd.com

我在 apache conf 文件夹的 http.conf 文件中编写了以下脚本，

```
<IfModule mod_rewrite.so>
    RewriteEngine On

    RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]

    RewriteRule ^$ https://abcd.com/userMaster/rl_login [L,R=302]
</IfModule> 
```

请建议我是否做错了什么

谢谢普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:43:23.760

我建议您跳过尝试通过您的`http.conf`文件执行此操作，而是使用`.htaccess`位于网站根文件夹中的文件执行此操作。

为此，只需在本地计算机上创建一个文本文件，添加以下代码：

```
RewriteEngine On

RewriteCond %{HTTP_USER_AGENT} "alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|playbook|sagem|sharp|sie-|silk|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte" [NC]

RewriteRule ^$ https://abcd.com/userMaster/rl_login [L,R=302] 
```

并将其保存为`.htaccess`文件。然后，使用您的 FTP 客户端登录到您的服务器并将该`.htaccess`文件上传到网站的根目录。

如果您能够使用 FTP 上传文件，那么您必须能够将`.htaccess`文件添加到服务器。

# asp.net - 缺少 OnClientClick 时 ASP 按钮不起作用

> ID：12621297
> 
> 赞同：0
> 
> 时间：2012-09-27T12:23:00.043
> 
> 标签：asp.net, vb.net, button

我生成了一个带有加载另一个页面的 ASP 按钮的页面。

```
<asp:Button ID="ServerCredentials" runat="server" Text="Server Credentials" Font-Names="Verdana" Font-Size="12px" OnClick="Credential_Click" Width="135px"/> 
```

加载另一个页面的功能：

```
 Protected Sub Credential_Click(ByVal sender As Object, ByVal e As System.EventArgs)
        Response.Redirect("~/WebPage/Booking/ExchangeServer.aspx")
    End Sub 
```

此代码仅在我使用交换数据在页面上注册时才有效。

当我没有注册时，什么都不会发生。

但是，如果我将 onclientclick 与任何功能一起使用，它就会再次起作用。像这样：

```
<asp:Button ID="ServerCredentials" runat="server" Text="Server Credentials" Font-Names="Verdana" Font-Size="12px" OnClientClick="return CheckDateVonBis()"  OnClick="Credential_Click" Width="135px"/> 
```

onclick 和 onclientclick 有什么区别？

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:26:30.727

`onclick for server side function` 和`onclientclick for client side`

OnClientClick : 如果你想调用 javascript 函数

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclientclick(v=vs.80).aspx)

OnClick ：如果您希望在服务器端声明的函数后面调用代码

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclick.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.button.onclick.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:30:17.267

而不是 Response.Redirect 您可以尝试

```
Server.TransferRequest("~/WebPage/Booking/ExchangeServer.aspx") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T17:40:36.247

我找到了解决方案：

我只需要在 False 上设置一个 CausesValidation 来解决问题：

```
 <asp:Button ID="ServerCredentials" runat="server" Text="Server Credentials" Font-Names="Verdana" Font-Size="12px" CausesValidation="False" OnClick="Credential_Click" Width="135px"/> 
```

我看起来该网站需要验证才能运行该功能

# f# - 为什么 F# 不允许 C# 允许的多个属性？

> ID：12621301
> 
> 赞同：8
> 
> 时间：2012-09-27T12:23:07.320
> 
> 标签：f#, attributes, attributeusage, allowmultiple

以下代码在 C# 中编译：

```
[ContentType("text")]
[ContentType("projection")]
public class Class1
{
} 
```

F# 中的以下代码无法编译：

```
[<ContentType("text")>]
[<ContentType("projection")>]
type Class1() = class end 
```

F# 中的编译错误是：*“属性类型 'ContentTypeAttribute' 具有 'AllowMultiple=false'。此属性的多个实例不能附加到单个语言元素。”*

通过反编译 ContentType，我可以看到 ContentType 继承自 MultipleBaseMetadataAttribute，它在 AttributeUsage 中具有*“AllowMultiple=true”*。

事实上，F# 似乎没有从父类继承 AttributeUsage。

```
[<AttributeUsage(AttributeTargets.Class, AllowMultiple = true)>]
type FooAttribute() = 
    inherit Attribute()

type BarAttribute() =
    inherit FooAttribute()

[<Foo>]
[<Foo>]
type MyClassCompiles() = class end 
```

在哪里

```
[<Bar>]
[<Bar>]
type MyClassDoesNotCompile() = class end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T14:30:12.340

看起来像一个错误。电子邮件 fsbugs[at]microsoft.com。这是另一个明显的错误：它似乎没有兑现`AttributeTargets`：

```
[<AttributeUsage(AttributeTargets.Enum)>]
type FooAttribute() = 
  inherit Attribute()

[<Foo>]
type T = struct end //happily compiles 
```

# javascript - 单个函数中的正则表达式

> ID：12621305
> 
> 赞同：0
> 
> 时间：2012-09-27T12:23:22.553
> 
> 标签：javascript, html

我已经做了一些正则表达式验证，下面是我所做的，

Javascript：

```
function fn1() {
var var1=/^(\s*|\d+)$/ 
if (document.myform.inp1.value.search(var1)==-1) {
alert("validation for digits failed")
}
}

function fn2() {
var var2=/^(?:\d+(?:,\d+)*(?:\.\d{2})?|\d+(?:\.\d{3})*(?:,\d{2})?)$/ 
if (document.myform.inp2.value.search(var2)==-1) {
alert("validation for currency failed")
}
}

function fn3() {
var var3=/^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d$/ 
if (document.myform.inp3.value.search(var3)==-1) {
alert("validation for date failed")
}
}
</script> 
```

下面是我的HTML，

```
<form name="myform">
<div id="div1">

<input type="text" name="inp1"  />
<input type="button" onClick="fn1()" value="chk1"/>
</div>

<div id="div2">

<input type="text" name="inp2" />
<input type="button" onClick="fn2()" value="chk2" />
</div>

<div id="div3">

<input type="text" name="inp3" />
<input type="button" onClick="fn3()" value="chk3" />
</div>

</form> 
```

现在我需要将所有这些组合成一个函数，该函数应该接受正则表达式作为参数。所以应该有一个 JavaScript 函数可以接受三个参数 ( `<<selector for input field>>, <<regular Expression>>, <<Error message>>`)。请帮助如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:30:55.497

```
function expression(selector, regex, error) {
    if (selector.value.search(regex)==-1) {
        alert(error);
    }
} 
```

`selector`必须是类似的东西`document.myform.inp1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:31:01.897

你可以这样做；

```
function checkItem(elem, regex, errMsg) {
    if (elem.value.search(regex) == -1) {
        alert(errMsg);
    }
} 
```

例子：

```
checkItem(document.myform.inp1, /^(\s*|\d+)$/, "validation for digits failed"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:34:23.150

首先将您的验证函数放入一个对象中：

```
var validationFunctions = {
    digits: function (val) {
        ... fn1 here ...
    },
    currency: function (val) {
        ... fn2 here ...
    },
    date: function (val) {
        ... fn3 here ...
    }
}; 
```

然后你的通用函数看起来像这样：

```
var validate = function (elementID, type) {
    var value = document.getElementById(elementID).value;

    return validationFunctions[type](value);
}; 
```

你会这样称呼它：

```
validate('inputBoxID', 'digits');
validate('inputBoxID', 'currency');
validate('inputBoxID', 'date'); 
```

# c# - 具体的正则表达式模式

> ID：12621310
> 
> 赞同：0
> 
> 时间：2012-09-27T12:23:33.133
> 
> 标签：c#, regex

假设我有这个示例字符串

```
 <td><a href="/one-two-three/menus" title="test"</td>
<td><a href="/one-two-three/menus/13:00 title="test"</td>
<td><a href="/one-two-three/schedule/could be multiple delimiters/14:00 title="test"</td> 
```

我想使用正则表达式仅在完整字符串`/one-two-three`以`hh:mm`. 例如我想得到：

```
/one-two-three/menus/13:00
/one-two-three/schedule/could be multiple delimiters/14:00 
```

我试过正则表达式模式`/one-two-three[\s\S]+?[0-9][0-9]:[0-9][0-9]`

但这给了

```
Found 2 matches:
1./one-two-three/menus" title="test"</td>     <td><a href="/one-two-three/menus/13:00
2./one-two-three/schedule/could be multiple delimiters/14:00 
```

我可以明白为什么我会得到结果，但我的问题是我可以使用什么模式来排除部分，而在和`hh:mm`之间可以有任意数量的分隔符`/one-two-three``hh:mm`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:29:04.547

如果 HTML 结构对您很重要，那么[正则表达式是错误的方法](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

否则（如果你可以在任何地方匹配字符串，只要它被 包围`"`），你可能想试试这个：

```
/one-two-three[^"]+?[0-9][0-9]:[0-9][0-9] 
```

`[\s\S]`基本上是指**任何**字符。但是您只需要不是 的字符`"`，因为这标志着路径的结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:42:37.530

尝试

搜索 `".*\"/{one-two-three}{.*}{[0-9][0-9]:[0-9][0-9]}.*"`

用。。。来代替

`\1 = one-two-three` `\2 = middle parts` `\3 = hh:mm`

如果你用它替换`\1\3`它将消除中间部分

希望这可以帮助 ：）

# php - 主题和发件人中带有 ASCII 字符的 PHP 邮件

> ID：12621312
> 
> 赞同：0
> 
> 时间：2012-09-27T12:23:35.493
> 
> 标签：php, html, email

我有一些发送邮件的 PHP 代码，我需要主题包含 Ø 的 ASCII 代码，`&Oslash;`但如果我只是在我的 php scipt 中输入它，它只会发送给我`&Oslash;`而不是 Ø..
Mime 与字符集..

```
$header = "Content-Type: text/html;charset=iso-5589-1" . "\n"; <br />
$header .= "MIME-Version: 1.0" . "\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:31:59.940

$newsubject='=?UTF-8?B?'.base64_encode($subject).'?=';

是什么帮助了我，只记得原始主题中的ÆØÅ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:26:39.557

尝试这个

```
$newsubject='=?UTF-8?B?'.base64_encode($subject).'?='; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:45:10.690

我认为你需要给它一个标题以及对主题进行编码，虽然我没有尝试过......

```
$charset = "GB2312";
$subject = 'some chinese text'
$encoded_subject = "=?$charset?B?".base64_encode($subject)."?=\n" ;
$header .= "Content-Type: text/plain; charset={$charset}\n"; 
```

这种预感的来源在[这里](http://bytes.com/topic/php/answers/745913-how-send-subject-chinese-using-mail)

# jquery - jQuery正确放置NOT在选择器中的位置

> ID：12621317
> 
> 赞同：1
> 
> 时间：2012-09-27T12:23:49.027
> 
> 标签：jquery, jquery-selectors

我有以下 jquery 行

```
$('[genre*="'+$(this).attr('id')+'"]').fadeOut('fast'); 
```

它淡出其值包含该元素的 id 值的类型的元素。

但是我想要实现的是淡出剩余的元素，而不是匹配的元素。所以是这样的：

```
$('[genre*="'+$(this).attr('id')+'"]:not').fadeOut('fast'); 
```

在哪里放置“不”的正确位置。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:25:25.760

你必须把它放在选择器的前面

```
$(':not([genre*="'+$(this).attr('id')+'"])').fadeOut('fast'); 
```

要获取更多信息和示例，请查看官方参考[`not`](http://api.jquery.com/not-selector/)

**编辑**

特别是该选择器会导致不良影响。你可以用这样的东西来修复它

```
$('[genre]').filter(':not([genre*="'+$(this).attr('id')+'"])').fadeOut('fast');​​​​​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:38:34.357

以下应该工作。我在这里编写了代码，但想法是选择所有具有“流派”属性的元素并检查该属性中是否不包含 id 值。如果不是这样，则淡出该元素。

```
var id = $(this).attr('id');

$('[genre]').each(function(){
  if(!$(this).attr('genre').search(id))
    $(this).fadeOut('fast');
}); 
```

编辑：顺便说一句，您正在搜索具有流派属性并且在这个包含一些关键字的 attirubte 上具有值的元素。如果您在此选择器上使用 not 运算符，您最终会得到除那些元素之外的所有元素，这些元素最终会出现在文档中的几乎所有元素中。据我所知，jQuery 中没有一个选择器类似于“具有“某些”属性和不包含“此值”的值”。

# sql - 为什么这个 VB 和 SQL 不起作用？

> ID：12621326
> 
> 赞同：1
> 
> 时间：2012-09-27T12:24:21.633
> 
> 标签：sql, database, vba, ms-access

```
Private Sub Text46_AfterUpdate()

Dim strSource2 As String

strSource2 = "SELECT [Product Code],[Stock Level],[Description] FROM [products/stock]       WHERE [Product Code] LIKE " & "'%" & Me.Text46.Value & "%';"

Me.listSource.RowSource = strSource2
Me.listSource = vbNullString

End Sub 
```

它应该在数据库中搜索所有产品代码以某种方式与 Text46 的值匹配的产品，但我真的无法让它工作，我真的不知道为什么。listSource 是我希望信息出现在其中的列表框。

在此先感谢，鲍勃 P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:26:16.977

在 MS Access 中，通配符是 * 而不是 %，除非您正在使用 ADO，或者您在选项中更改了 ANSI 标准。

```
"SELECT [Product Code],[Stock Level],[Description] " _
& "FROM [products/stock] " _
& "WHERE [Product Code] LIKE " & "'*" & Me.Text46.Value & "*';" 
```

# ruby-on-rails-3 - highcharts 显示在我的渲染 html 页面中，我想在 rails 中使用 wkhtmltopdf 将其转换为 PDF

> ID：12621327
> 
> 赞同：2
> 
> 时间：2012-09-27T12:24:24.610
> 
> 标签：ruby-on-rails-3, highcharts, wkhtmltopdf

我有一个带有一些文本数据和图形的 html 页面。我正在使用 wkhtmltopdf gem 从 html 页面生成 pdf。使用 highcharts，我正在生成图表。

> 我能够成功生成 PDF，但 PDF 只包含文本数据并且没有图表。

我已经尝试过以下一些选项

```
 - plotOptions: { series: { enableMouseTracking: false, shadow: false, animation: false } }, in Hightcharts jquery coding.. 
```

请协助我解决此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T01:26:20.503

我不熟悉 wkhtmltopdf，但我确实使用 wkhtmltoimage 创建包含来自 highcharts 的图形的页面图像。我注意到的一件事是我必须将 --javascript-delay 设置为几秒钟，以确保图表有足够的时间加载。似乎 wkhtmltopdf 确实支持此选项（[wkhtmltopdf v0.10.0_rc2 docs](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf_0.10.0_rc2-doc.html "wkhtmltopdf v0.10.0_rc2 文档")）。你看看这是否有帮助？

这是我们如何称呼它，带有 3 秒的 javascript 延迟：

```
/bin/wkhtmltoimage --javascript-delay 3000 "http://example.com/chartPage" "/path/to/image.png" 
```

# java - Glassfish 嵌入式 JNDI 模块范围查找

> ID：12621328
> 
> 赞同：1
> 
> 时间：2012-09-27T12:24:25.800
> 
> 标签：java, glassfish, ejb-3.0, jndi

我正在尝试使用嵌入式 glassfish 服务器和 EJB3 编写 JUnit 测试。

我正在使用 maven，我的项目有 3 个模块，我想在每个模块中执行测试。

我目前正在尝试为其编写测试的模块称为后端。

问题是，我在测试环境中的 jndi 查找需要一个“java:module/”范围，但是当我执行测试时，似乎只存在“java:global/classes/”。

有谁知道我如何在嵌入式 glassfish 服务器中执行模块范围查找？

一些进一步的信息：

*   模块结构：
    *   EJB 模块（称为后端）
    *   WAR 模块（称为前端）
    *   JAR 模块（实用的东西）
*   POM 测试依赖：

    ```
    <dependency>
        <groupId>org.glassfish.main.extras</groupId>
        <artifactId>glassfish-embedded-all</artifactId>
        <version>3.1.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
        <type>jar</type>
    </dependency> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:06:52.020

好的，我通过使用 Arquillian 并将我的 EAR 存档部署为 EnterpriseArchive 解决了这个问题。

# java - 接口中常量的初始化条件

> ID：12621330
> 
> 赞同：0
> 
> 时间：2012-09-27T12:24:35.457
> 
> 标签：java, design-patterns

我有一个接口，我在其中定义了跨应用程序使用的常量。我有一个场景，我需要根据条件初始化常量。

例如，类似的东西，

```
if(condition){
public static final test = "some value";
} 
```

这可能吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:29:33.260

`Interface`不包含代码。

将您的接口拆分为许多特定接口，声明和初始化它们自己的常量。

这将遵循`Interface Segregation Principle`一个类不必对一些无用的常量或方法感到厌烦的地方。

当然，Java 让类一次实现多个接口。因此，如果您有特定的接口来混合一个具体的类，这将非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:24:58.877

接口将被实现。它们不应该用作常数的载体。如果您需要这样的东西，您可以考虑使用私有构造函数的最终类。

您似乎想要的是一个全局变量或单例，这是相当有问题的设计，或者类似 ac 预处理器指令，在编译时动态评估。

因此，请考虑它是否真的是您需要的常量 - 在编译（或类加载）时定义的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:00:18.760

这可能是接口常量不好的另一个原因。您可以简单地使用`enums`如下所示。

```
public enum Const {
    SAMPLE_1(10), SAMPLE_2(10, 20);

    private int value1, value2;
    private Const(int value1, int value2) {
        this.value1 = value1;
        this.value2 = value2;
    }

    private Const(int value1) {
        this.value1 = value1;
    }

    //Value based on condition
    public int getValue(boolean condition) {
        return condition == true ? value2 : value1;
    }

    //value which is not based on conditions
    public int getValue() {
        return value1;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:29:45.030

您可以通过以下方式设置带有条件的静态最终变量：

```
public class Test {

    public static final String test;
    static {
      String tmp = null;
        if (condition) {
            tmp = "ss";
        }
        test = tmp;
    }

} 
```

您可以在一行中完成，也可以在以下界面中完成：

```
public static final String test = condition ? "value" : "other value"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:30:09.937

```
public interface InitializeInInterface {

    public static final String test = Initializer.init();

    static class Initializer {
        public static String init() {
            String result = "default value";
            InputStream is = InitializeInInterface.class.getClassLoader().getResourceAsStream("config.properties");
            Properties properties = new Properties();
            try {
                properties.load(is);
            } catch (IOException e) {
                e.printStackTrace();
            }
            if ("bar".equals(properties.getProperty("foo"))) {
                result = "some value";
            }
            return result;
        }
    }
} 
```

# vim - Vim 视觉键输入奇怪的行为

> ID：12621333
> 
> 赞同：1
> 
> 时间：2012-09-27T12:24:38.417
> 
> 标签：vim

所以我有以下小测试用例

```
vnoremap <silent> d :<C-u>call Test()<cr>
vnoremap <silent> e :<C-u>call Test2()<cr>
fun! AskUser()
    let v = input('is this really ok with you? (y/n) ')
    redraw
    return v
endfun

fun! Test() range
    call AskUser()
    if 1
        echo 'hi hi hi'
        echo 'hi hi hi'
    endif
endfun

fun! Test2() range
    call AskUser()
    echo 'hi hi hi'
    echo 'hi hi hi'
endfun 
```

那么任何人都可以解释为什么可视模式 d 键绑定根本无法显示任何消息而 e 键绑定工作没有问题

请注意，问题根本与键绑定无关，而是与调用输入函数后有 if 语句有关

我已经在 MacVim 和 linux 上的终端 vim 上测试了它，在从 mercurial 源代码编译的最新 vim 版本上，都有这个问题

**更新：**有些人不明白问题是什么。详细解释一下，当您在可视模式下按 d 时，您会收到输入提示，当您回答它时，您在命令行中看不到任何消息，而当您按 e 并回答提示时，您会看到消息 hi hi hi 两次一行和“按 ENTER 或键入命令继续”消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:28:16.643

我不知道这种不同行为的原因，但测试我意识到如果函数以条件结尾`if`并且最后一句是`endif`，则消息不会显示在屏幕上。

我`vimrc`只使用您的代码创建了一个自定义，并使用`vim -N -u new-custom-vimrc infile`. `endif`像这样，我可以重现问题的行为，但是当我避免使用函数的最后一句时，它似乎可以工作，例如：

```
fun! Test() range
    call AskUser()
    if 1
        echo 'hi hi hi'
        echo 'hi hi hi'
    endif
    let dummy = 1 
endfun 
```

也可以这样工作：

```
fun! Test() range
    call AskUser()
    if 0
        return
    endif
    echo 'hi hi hi'
    echo 'hi hi hi'
endfun 
```

# service - 骡服务启动脚本引发异常与日志文件

> ID：12621336
> 
> 赞同：0
> 
> 时间：2012-09-27T12:24:42.757
> 
> 标签：service, mule, rhel

我正在尝试重写 mule 启动脚本，以便它在 RHEL 上作为服务工作。

目前我大部分都完成了。它正在启动，我将大部分日志文件成功写入我想要的位置。但是有一个按字面命名的文件`.log`，我不知道它的用途，也不知道在哪里配置（它的名称和路径）。

`mule_ee.log`这样的文件在启动时 添加了以下讨厌的行：

```
log4j:ERROR setFile(null,true) call failed.
java.io.FileNotFoundException: .log (Permission denied)
    at java.io.FileOutputStream.openAppend(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:207)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:131)
    at org.apache.log4j.FileAppender.setFile(FileAppender.java:294)
    at org.apache.log4j.FileAppender.activateOptions(FileAppender.java:165)
    at org.apache.log4j.config.PropertySetter.activate(PropertySetter.java:307)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:172)
    at org.apache.log4j.config.PropertySetter.setProperties(PropertySetter.java:104)
    at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:809)
    at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:735)
    at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:615)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:502)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:547)
    at org.mule.module.launcher.log4j.ApplicationAwareRepositorySelector.configureFrom(ApplicationAwareRepositorySelector.java:166)
    at org.mule.module.launcher.log4j.ApplicationAwareRepositorySelector.getLoggerRepository(ApplicationAwareRepositorySelector.java:95)
    at org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:208)
    at org.apache.log4j.LogManager.getLogger(LogManager.java:228)
    at org.mule.module.logging.MuleLoggerFactory.getLogger(MuleLoggerFactory.java:77)
    at org.mule.module.logging.DispatchingLogger.getLogger(DispatchingLogger.java:419)
    at org.mule.module.logging.DispatchingLogger.isInfoEnabled(DispatchingLogger.java:191)
    at org.apache.commons.logging.impl.SLF4JLog.isInfoEnabled(SLF4JLog.java:78)
    at org.mule.module.launcher.application.DefaultMuleApplication.init(DefaultMuleApplication.java:188)
    at org.mule.module.launcher.application.PriviledgedMuleApplication.init(PriviledgedMuleApplication.java:46)
    at org.mule.module.launcher.application.ApplicationWrapper.init(ApplicationWrapper.java:64)
    at org.mule.module.launcher.DefaultMuleDeployer.deploy(DefaultMuleDeployer.java:46)
    at org.mule.module.launcher.DeploymentService.guardedDeploy(DeploymentService.java:398)
    at org.mule.module.launcher.DeploymentService.start(DeploymentService.java:181)
    at org.mule.module.launcher.MuleContainer.start(MuleContainer.java:157)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.mule.module.reboot.MuleContainerWrapper.start(MuleContainerWrapper.java:56)
    at org.tanukisoftware.wrapper.WrapperManager$12.run(WrapperManager.java:3925)` 
```

那个`.log`文件是干什么用的？将其设置为写入mule用户有权写入的位置的conf文件在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:05:13.270

由于操作系统权限，log4j 似乎找不到该文件。您可以 chmod 在您的 MULE_HOME 目录中添加权限。并查看您的 log4j 配置，了解为什么要尝试读取 .log 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T02:09:35.840

该`.log`文件似乎来自**00_mmc-agent**应用程序。

因此，问题出在`log4j.properties`位于`./apps/00_mmc-agent/classes`此类文件中的文件中配置了以下附加程序：`log4j.appender.file.File=${app.name}.log` 该`${app.name}`变量似乎没有正确配置（即使在默认未修改的 mule 启动脚本中也没有）。因此`.log`文件名。

在`./apps/mmc/webapps/mmc/WEB-INF/classes/log4j.properties`appender 中是这样配置的`log4j.appender.R.File=${mule.home}/logs/mmc-console-app.log`

因此，为了修复启动错误，我修改了`log4j.properties`位于其中的文件的附加程序`./apps/00_mmc-agent/classes`以具有此路径：

`log4j.appender.file.File=${mule.home}/logs/00_mmc-agent.log`

# .net - 如何处理父窗口的刷新？

> ID：12621339
> 
> 赞同：0
> 
> 时间：2012-09-27T12:24:50.633
> 
> 标签：.net, winforms, datagridview

我有一个表格可以显示另一个表格。

第`Activated`一个表单上的事件当前刷新了一个`DataGridView`.

如何保留行选择`DataGridView`？刷新`DataGridView`会导致第一行被选中。

中的数据`DataGridView`通过以下方式刷新：

```
MyDataGridView.DataSource = getDataTableFromDb(); 
```

哪里`getDataTableFromDb()`返回一个`DataTable`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T13:43:16.720

要解决这个问题，您可能需要一个`BindingSource`- 不是问题，因为没有任何理由不拥有一个。

您可以简单地将`BindingSource`控件拖到窗体的设计图面上，就像任何其他控件一样。

然后`DataTable`将绑定源设为数据源，并将绑定源设为网格的数据源。

设置绑定源的代码非常简单：

```
bindingSource1.DataSource = getDataTableFromDb();
MyDataGridView.DataSource = bindingSource1; 
```

这*可能*足以解决您的问题。（我已经看到它在某些情况下有效）

* * *

如果该位置仍未保持，那么使用绑定源您现在可以使用`Find`and`Position`成员。

首先 - 在您重新绑定之前，您需要获取有关当前所选项目的一些独特信息。通常来自数据库的主键。

您可以从绑定源的`Current`属性中获取此信息，例如：

```
DataRowView r = bs.Current as DataRowView;
var id = int.Parse(r.Row.ItemArray[0].ToString()); 
```

然后使用这个 id，在你重新绑定网格之后，有类似的东西：

```
int index = bs.Find("CustomerId", 3);
bs.Position = index; 
```

上面的“CustomerId”属性是代表您*在数据表中*使用的主键列的名称属性。

* * *

需要注意的重要一点是，这只适用于您的数据源 - DataTable 支持“开箱即用”。如果您更改为 BindingList 之类的东西，您将需要自己实现 FindCore 成员。

# machine-learning - 什么是训练集中短语的原型向量

> ID：12621341
> 
> 赞同：2
> 
> 时间：2012-09-27T12:24:59.883
> 
> 标签：machine-learning, wikipedia

我正在尝试在[论文](http://www.mpi-inf.mpg.de/~bast/papers/ester.pdf)之后实施一种方法来消除实体的歧义。该过程包括两个步骤，训练阶段和消歧阶段。我想问一下训练阶段，我不太明白如何获得原型向量，如本段所述：

> 在训练阶段，我们为每个与特定实体链接至少 10 次的单词或短语计算我们所谓的原型向量：这是一个 tf.idf 加权的标准化列表，其中包含出现在一个特定实体中的所有术语各个链接的邻域（我们考虑左右各 10 个单词）。请注意，同一个单词或短语可以有多个这样的原型向量，每个实体一个对应于从集合中该单词或短语的某些出现链接的每个实体。

他们使用了维基百科的方法，并使用来自维基百科的链接作为训练集。

有人可以帮我举一个原型向量的例子吗？我是这个领域的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T22:13:55.800

这是原型向量的草图：

首先要注意的是，维基百科中的一个词可以是[维基百科](http://en.wikipedia.org/wiki/Entity)页面的超链接（我们将其称为*实体*）。*该[实体](http://en.wikipedia.org/wiki/Entity_class)以某种方式与单词相关，但同一个单词可以链接到不同的实体。*

### “对于每个与特定实体至少链接 10 次的单词或短语”

在整个维基百科中，我们计算`word_A`链接到的次数`entity_B`，如果超过 10 次，我们继续（写下它们链接的实体的位置）：

```
[(wordA, entityA1), (wordA, entityA2),...] 
```

*这里`wordA`发生在`entityA1`它链接到的地方`entityB`，等等。*

### “出现在相应链接的邻域之一中的所有术语的列表”

在`entityA1`,`wordA`左右各有 10 个单词（我们在两边只显示 4 个）：

```
are developed and the entity relationships between these data
                      wordA
                      link # (to entityB)

['are', 'developed, 'and', 'the', 'relationships', 'between', 'these', 'data'] 
```

每对`(wordA, entityAi)`都给我们这样一个列表，将它们连接起来。

### “tf.idf 加权、标准化列表”

基本上，[tf.idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)意味着您应该比不常见的词赋予常用词更少的“权重”。例如，`'and'`and`'the'`是非常常见的词，因此我们赋予它们的*意义*（在它们旁边`'entity'`）比`'relationships'`or少`'between'`。

归一化，意味着我们应该（基本上）计算一个单词出现的次数（它出现的次数越多，我们认为它与`wordA`.将最常见的最不常见的词放在顶部。

### “请注意，同一个单词或短语可以有多个这样的原型向量”

这不仅依赖于，`wordA`而且`entityB`，您可以将其视为映射。

```
(wordA, entityB) -> tf.idf-weighted, normalized list (as described above)
(wordA, entityB2) -> a different tf.idf-weighted, normalized list 
```

*这表明从单词中与[猫](http://en.wikipedia.org/wiki/Cats)的链接比与[猫女人](http://en.wikipedia.org/wiki/Cat_woman)`'cat'`的链接更不可能有邻居。`'batman'`*

# uitableview - UIApplication openURL 打不开网址

> ID：12621342
> 
> 赞同：0
> 
> 时间：2012-09-27T12:25:04.553
> 
> 标签：uitableview, nsstring, nsurl, uiapplication, openurl

我正在尝试实现一个求职应用程序。结果在 UITableView 中显示给用户。当用户点击一个单元格时，它应该会打开原始的职位公告。为此，我实现了以下方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    NSString *url = [[NSString alloc]init];
    url=[[[xmlParser jobs] objectAtIndex:indexPath.row] urlAddress]; //UrlAddress is an instance variable of type NSString
    NSURL *urlJobDetail = [NSURL URLWithString:(url)];

    [[UIApplication sharedApplication] openURL: urlJobDetail];
} 
```

有趣的部分是：如果我输入一个像 @"http://www.google.com" 或任何其他链接的 NSString，它就可以工作。但是当我尝试打开一个“urlJobDetail”时，它就不起作用了......什么都没有发生......

我在 stackoverflow.com 中搜索了它，发现了这个：

```
url = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

比 url 有效，但此方法更改了原始 url 地址并添加了许多 % 符号，例如：“http://www.google.com%20 %20 %20”所以我得到一个找不到页面的错误。

我不明白为什么这个函数不接受常规的 NSString 变量？

我用 NSLog 检查了它，并且 url 似乎是完美的。

任何帮助都会非常非常感谢！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:12:43.987

因为它是[URL 规范](http://www.w3.org/Addressing/URL/url-spec.txt)相关的限制

> URL 中的空格和控制字符必须转义才能在 HTTP 中传输，其他不允许的字符也必须转义......必须使用标准对 URL 中不允许的任何字符进行编码，包括空格和其他不在允许字符集中的二进制数据“%”字符后跟两个十六进制数字的约定。

# spring - 如何将变量值从jstl传递给控制器

> ID：12621343
> 
> 赞同：0
> 
> 时间：2012-09-27T12:25:04.830
> 
> 标签：spring, spring-mvc, controller, jstl

我在 jsp/jstl 中有名称和密码，我试图将名称和密码传递给控制器​​。

这是我的控制器类

包 com.simple.controller；

```
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
@RequestMapping("/welcome")
public class HelloController {
    private String name;
    private String password;
        private String user;
    @RequestMapping(method = RequestMethod.POST)
    public String printWelcome(ModelMap model) {
            System.out.println(user);
        model.addAttribute(name);
        model.addAttribute(password);

        model.addAttribute("message", "Spring 3 MVC Hello World");
        return "hello";

    }

} 
```

这是带有表单标签和 c 标签库的 index.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
    <%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Registration Page</title>
    </head>
    <body bgcolor="#999966">
<p>&nbsp;</p>
<form method="POST" action="welcome">

<p><font color="#800000" size="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
UserName:</font><input type="text" name="name" size="20"></p>
 <c:set var="user" value="{param.name}" scope="request">
</c:set> 

<p><font color="#800000" size="5">
password:</font><input type="text" name="password" size="20"></p>
<p><input type="submit" value="Submit" name="B1"></p>
</form>
</body>
    </html> 
```

我正在尝试将此表单中的变量用户（值取自名称变量）传递给控制器​​。

```
<c:set var="user" value="{param.name}" scope="request">
    </c:set> 
```

任何人都可以帮助我如何使用 c 标签来做到这一点..

我已经使用了 commandName="registereduser"，其中用户是 RegisteredUser 类的对象。

但是我正在尝试仅传递变量（带有c标签）我在sysout中为用户获取空值

有什么办法可以处理带有集合的c标签

谢谢你..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:25:39.763

在您的控制器中：

```
@Controller
@RequestMapping("/welcome")
public class HelloController {

    @RequestMapping(method = RequestMethod.POST)
    public String printWelcome(ModelMap model, @RequestParam String name, @RequestParam String password) {    
        // do something with name & password
        model.addAttribute(name);
        model.addAttribute(password);
        model.addAttribute("message", "Spring 3 MVC Hello World");
        return "hello";
    }
} 
```

并在您的 JSP 中（您必须使用常规的 HTML 表单）：

```
<form method="POST" action="welcome">
    <table>
        <tr>
            <td>User Name :</td>
            <td><input type="text" id="name" name="name"/></td>
        </tr>
        <tr>
            <td>Password :</td>
            <td><input type="password" id="password" name="password"/></td>
        </tr>

        </table>
        <tr>
            <td colspan="2"><input type="submit"></td>
        </tr>
    </table>
</form> 
```

**编辑问题（添加了用户变量）：**
您需要将`user`输入隐藏传递给控制器​​并将另一个添加`@RequestParam`到控制器方法：

JSP：

```
<input type="hidden" id="user" name="user" value="${name}"/> 
```

控制器方法：

```
 public String printWelcome(ModelMap model, @RequestParam String name, 
@RequestParam String password, @RequestParam String user) { 
        ... 
```

我认为您不能`user`使用 c 标签向服务器发送值，您需要将数据（表单）提交给控制器。

# javascript - 相同的 RegEx 验证适用于服务器端，但不适用于客户端

> ID：12621345
> 
> 赞同：0
> 
> 时间：2012-09-27T12:25:07.420
> 
> 标签：javascript, asp.net, regex, validation

我正在使用 ASP.Net MVC 来验证一个字符串不会包含超过 2 个任何形式的数字。

我正在使用以下服务器端代码：

```
[RegularExpression(@"[^\d]*\d?[^\d]*\d?[^\d]*",ErrorMessage = "More than 2 Numbers are not allowed")] 
```

这很好用，但以下 JavaScript 代码将始终返回`0`：

```
>> var mystring = "test123"; 
>> var myregax = new RegExp("[^\d]*\d?[^\d]*\d?[^\d]*"); 
>> mystring.search(myregax); 
0 
>> mystring = "test"; 
"test" 
>> mystring.search(myregax); 
0 
```

我缺少什么以及 ASP.Net 和 JavaScript 的正则表达式语法有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:25:53.877

使用 `RegExp`对象你必须`\`在你的模式中转义

```
new RegExp("[^\\d]*\\d?[^\\d]*\\d?[^\\d]*"); 
```

或者，作为替代，使用此语法

```
var myregax = /[^\d]*\d?[^\d]*\d?[^\d]*/; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:52:03.157

除了完全正确的 Fabrizio Calderan 的回答之外，您正在使用[`search()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/search).

`search()`返回第一个匹配的起始索引，这是`0`因为整个字符串与正则表达式匹配。您应该[`test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)改为调用，如果正则表达式匹配或不匹配，它将返回一个布尔值。

编辑：像[这样](http://regexr.com?329q1)的正则表达式：

`/\D*\d{1}\D*\d{1}\D*/`

将返回`true`具有两个或更多数字的任何东西，因此您的条件是：

```
if (/\D*\d{1}\D*\d{1}\D*/.test(string)) {
    // 2 or more numbers, validation failed
} else {
    // less than 2 numbers, validation passed
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:32:54.590

```
var mystring = "test123";
var filter=/[^\d]*\d?[^\d]*\d?[^\d]*/
if(filter.test(mystring)) {
alert("true");
} else {
alert("false");
} 
```

# redis - 如何删除许多哈希

> ID：12621346
> 
> 赞同：0
> 
> 时间：2012-09-27T12:25:11.407
> 
> 标签：redis

我有很多 redis 哈希，例如：

```
offer:1:20120909
offer:1:20120908
offer:1:20120909
offer:1:20120906
... 
```

如何在不知道它们的整个列表的情况下删除密钥？

我使用[phpredis](https://github.com/nicolasff/phpredis)。

# c# - 运行多线程时程序执行缓慢

> ID：12621349
> 
> 赞同：1
> 
> 时间：2012-09-27T12:25:18.070
> 
> 标签：c#, multithreading, networking

我用 C# 编写了一个程序，它使用不同的线程执行大量并行工作。当我达到大约 300 个线程时，程序的 GUI 开始变慢，线程的执行速度也急剧下降。线程正在从运行在不同机器上的 mySQL 数据库读取和写入数据。

有趣的是，如果我在同一台机器上的两个进程之间分配工作，一切都会完美运行。.net 框架或 Windows 中的每个进程是否有线程限制？或者为什么我会出现这种行为？会不会是网络相关的问题？我正在运行 Windows 7 Ultimate，并且我已经尝试了具有相同行为的 VS2010 和 VS 2012。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:39:52.740

300个线程是愚蠢的。

线程数应在系统支持的内核数 (2..8) 和/或最大同时连接数（有时仅通过 TCP 4 个）的范围内。

超越这一点，您只会浪费内存，每个线程 1 MB。在 32 位系统中，300 MB 已经消耗了大量可用的内存空间。我假设每个线程都附加了一些缓冲区。

如果 2 个单独的进程执行得比 1 好，那么可能不是上下文切换，而是内存使用或连接限制阻碍了你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T12:28:55.170

处理器时间的分配方式是操作系统给每个进程处理器时间，然后每个进程给每个线程时间。所以两个进程将获得两倍的处理器时间，这就是为什么如果你把程序分成两个进程，它的工作速度会更快。如果您想让 GUI 运行更流畅，只需为该线程设置更高的优先级。这样，GUI 线程将比其他线程获得更多的处理器时间，但不会太多以至于它会明显减慢其他线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:38:03.883

使用[线程池](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)。这应该通过限制存在的线程数来根据您的系统自动分配最佳线程数。您还可以设置任意一次允许的最大线程数。

此外，如果您正在分配线程以从 for-loop、foreach-loop 或 linq 语句中并行化任务，您应该查看[Parallel Class](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.aspx)或[PLINQ](http://msdn.microsoft.com/en-us/library/dd460688.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:40:16.540

起初，如果您的应用程序有 300 个线程，那么您可能应该重新考虑您的程序设计。

设置 GUI 线程优先级可以为您提供更好的 GUI 性能。但是如果你运行这么多线程，操作系统必须在程序堆栈中分配空间。堆栈是内存的连续段。因此，每次创建新线程时，为堆栈分配的内存空间可能无法容纳新线程。然后操作系统必须在内存中分配更大的连续空间，并将所有数据从旧堆栈复制到新堆栈。所以很明显这可能会导致你的程序性能变慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:31:20.710

[这个问题](https://stackoverflow.com/questions/481900/whats-the-maximum-number-of-threads-in-windows-server-2003)的公认答案可能会解释正在发生的事情，但对于任何正常的应用程序来说，300 个线程似乎是一个好主意。

# java - 在网格布局中垂直居中定位面板

> ID：12621354
> 
> 赞同：0
> 
> 时间：2012-09-27T12:25:33.957
> 
> 标签：java, swing, alignment, grid-layout

我正在尝试在内容窗格中构建一个带有网格布局的数独游戏，并将我的 Cell 对象（扩展 JPanel）添加到其中。但是，我无法将组件垂直居中对齐。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:35:49.980

将您的内容窗格设置为使用其他布局管理器，例如`GridBagLayout`并向其中添加`GridLayout`包含所有 Cell 对象的面板。这样，您的数独面板将居中，其内容（单元格）不会扩大以填满整个区域。

# svn - 初学者对颠覆指南的请求

> ID：12621355
> 
> 赞同：3
> 
> 时间：2012-09-27T12:25:38.327
> 
> 标签：svn, tortoisesvn

我们的编程团队正在为我们所有的代码寻找一种版本控制方法。推荐使用 Subversion，所以我们决定检查一下。然而，由于我们对这个想法都很陌生，我们很难弄清楚如何去设置和使用它。

*   我们是一个由 3-5 人组成的小型团队，在 Windows 机器上本地协作
*   之前没有一个程序员使用过像 Subversion 这样的同步软件
*   我们可以使用通过 VirtualBox 设置的 Ubuntu Server 访问本地机器
*   我们也有付费的服务器托管，我们可以使用

有没有办法在本地机器或付费服务器上设置 Subversion 或类似的东西？如果是这样，是否有一个易于理解的指南来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:33:24.427

[SVN 书提供了](http://svnbook.red-bean.com/)分步说明。[TortoiseSVN](http://tortoisesvn.net/)包含一个副本（`Help`来自 TortoiseSVN 菜单，或打开`TortoiseSVN_en.chm`产品文件夹中的帮助文件`bin`），甚至可以自定义它以使用该 GUI。两者都有基本教程，并且有关于设置、配置和使用它的各个方面的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:55:24.610

我强烈建议您阅读[SVNBook](http://svnbook.red-bean.com/en/1.7/index.html)，因为您通常是[Apache Subversion](http://subversion.apache.org/)和版本控制的新手。

强烈建议 Apache Subversion 新手使用以下介绍性主题：

*   [什么是颠覆？](http://svnbook.red-bean.com/en/1.7/svn.intro.whatis.html)
*   [基础概念](http://svnbook.red-bean.com/en/1.7/svn.basic.html)
*   [基本用法](http://svnbook.red-bean.com/en/1.7/svn.tour.html)

由于您使用的是 Windows，因此我强烈建议您考虑[TortoiseSVN](http://tortoisesvn.net/)客户端（除了上述文档之外，它还是[手册）。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/index.html)[VisualSVN Server](http://www.visualsvn.com/server/)是 Windows 的 Subversion 服务器解决方案的最佳选择。您可以将它安装在网络中的一台机器上，您将拥有专门为 Windows 和 Active Directory 环境绑定的完整 Subversion 服务器解决方案。

在您的问题中，您说*“以前没有程序员使用过像 Subversion 这样的同步软件”*。Apache Subversion**不是**同步软件，它是一个集中的版本控制系统，正如 Apache Subversion 网站上所说的：*“面向大众的企业级集中版本控制”*。所以，这与同步无关。它是关于保持您的开发过程版本化、组织化和快速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:28:58.120

在我看来，[红皮书](http://svnbook.red-bean.com/)是最好的 SVN 手册。如果你想设置一个 SVN 服务器，你可以看这里[How to setup a Subversion (SVN) server on GNU/Linux - Ubuntu](https://stackoverflow.com/questions/60736/how-to-setup-a-subversion-svn-server-on-gnu-linux-ubuntu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:32:12.347

您可以找到有关安装和配置的文章

链接：[http ://tortoisesvn.net/support.html](http://tortoisesvn.net/support.html)

你可以在这里下载：http: [//tortoisesvn.net/downloads.html](http://tortoisesvn.net/downloads.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:28:58.667

这是一篇写在SVN上的简单[文章。](http://www.clear.rice.edu/comp314/svn.html)但是，如果您对内部结构不感兴趣，[备忘单](http://www.abbeyworkshop.com/howto/misc/svn01/)总是比长篇文章有用且速度更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T12:36:10.867

您的团队可以尝试下载并启动 SVN[虚拟设备](http://en.wikipedia.org/wiki/Virtual_appliance)。当解决方案满足您的需求时，您可以将设备移动到更强大的硬件中。

我喜欢[Virtual Box](https://www.virtualbox.org/wiki/Downloads)作为跨平台的虚拟化应用程序，它是开源的。在这里（[http://virtualboximages.com/Virtual.Appliance.Subversion.Trac.amd64.9.10](http://virtualboximages.com/Virtual.Appliance.Subversion.Trac.amd64.9.10)）你可以找到你准备启动的服务器。

但是如果你用谷歌搜索，有很多选择：

*   [预构建的开发人员 VM（用于 Oracle VM VirtualBox）](http://www.oracle.com/technetwork/community/developer-vm/index.html)

# cuda - CUDA 驱动程序 API：nvcuda 在哪里？

> ID：12621380
> 
> 赞同：2
> 
> 时间：2012-09-27T12:26:54.957
> 
> 标签：cuda

CUDA C 编程指南 4.2 版指出：

```
The driver API is implemented in the nvcuda dynamic library which is copied on 
the system during the installation of the device driver. 
```

我在我的 Linux 机器上安装了 RC5.0 开发驱动程序以及 SDK 4.2 和 5.0。现在我很难找到这个图书馆。它不在（或在）、、、`/usr`或其中一个 SDK 库中：`/lib``/lib64`

CUDA 4.2：

```
ls /usr/local/cuda-4.2/cuda/lib64/

libcublas.so        libcudart.so        libcufft.so        libcuinj.so        libcurand.so        libcusparse.so        libnpp.so
libcublas.so.4      libcudart.so.4      libcufft.so.4      libcuinj.so.4      libcurand.so.4      libcusparse.so.4      libnpp.so.4
libcublas.so.4.2.9  libcudart.so.4.2.9  libcufft.so.4.2.9  libcuinj.so.4.2.9  libcurand.so.4.2.9  libcusparse.so.4.2.9  libnpp.so.4.2.9 
```

CUDA 5.0：

```
ls /usr/local/cuda-5.0/cuda/lib64/

libcublas.so        libcudart.so        libcufft.so        libcuinj.so        libcurand.so        libcusparse.so        libnpp.so        libnvToolsExt.so
libcublas.so.5.0    libcudart.so.5.0    libcufft.so.5.0    libcuinj.so.5.0    libcurand.so.5.0    libcusparse.so.5.0    libnpp.so.5.0    libnvToolsExt.so.5.0
libcublas.so.5.0.7  libcudart.so.5.0.7  libcufft.so.5.0.7  libcuinj.so.5.0.7  libcurand.so.5.0.7  libcusparse.so.5.0.7  libnpp.so.5.0.7  libnvToolsExt.so.5.0.7 
```

这个库安装在哪里？

并不是说 RC 5.0 中不包含驱动 API。我刚刚重新安装了 devdriver 4.2，它仍然不在上面提到的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:06:23.223

找到了。但使用不同的名称（`libcuda`代替`libnvcuda`）：

```
/usr/lib/libcuda.so.295.41 
```

这必须是手册中的错字/错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T17:03:27.940

`libcuda`始终**默认**安装到`/usr/lib/`64 位 linux 上`/usr/lib64`

有关其他驱动程序组件的列表和位置，另请参见[第 5 章。已安装组件列表。](http://us.download.nvidia.com/XFree86/Linux-x86/280.13/README/installedcomponents.html)

# ruby-on-rails - Active Record has_many 生成带有外键 IS NULL 的 sql

> ID：12621382
> 
> 赞同：5
> 
> 时间：2012-09-27T12:27:00.593
> 
> 标签：ruby-on-rails, activerecord, foreign-keys, relationship, has-many

我不希望以 NULL 作为外键的模型属于任何东西！

我有以下 Rails 应用程序，模拟蚂蚁和蚂蚁山（受 Jozef 启发）。

```
$ rails -v
Rails 3.2.8
$ rails new ant_hill
$ cd ant_hill 
```

创建蚂蚁山和蚂蚁模型。一个蚂蚁可以属于一个蚁丘，一个蚁丘可以有很多蚂蚁。

```
$ rails generate model AntHill name:string
$ rails generate model Ant name:string ant_hill_id:integer
$ vim app/models/ant.rb
$ cat app/models/ant.rb
class Ant < ActiveRecord::Base
  belongs_to :ant_hill
end
$ vim app/models/ant_hill.rb
$ cat app/models/ant_hill.rb
class AntHill < ActiveRecord::Base
  has_many :ants
end
$ rake db:migrate
==  CreateAntHills: migrating =================================================
-- create_table(:ant_hills)
   -> 0.0013s
==  CreateAntHills: migrated (0.0016s) ========================================

==  CreateAnts: migrating =====================================================
-- create_table(:ants)
   -> 0.0035s
==  CreateAnts: migrated (0.0037s) ============================================ 
```

在控制台中运行以下代码。

```
$ rails c
Loading development environment (Rails 3.2.8) 
```

创建几个蚂蚁，坚持，不属于任何蚂蚁山。

```
1.9.2-p290 :001 > Ant.create! name: "August"
 => #<Ant id: 1, name: "August", ant_hill_id: nil, created_at: "2012-09-27 12:01:06", updated_at: "2012-09-27 12:01:06">
1.9.2-p290 :002 > Ant.create! name: "Bertil"
 => #<Ant id: 2, name: "Bertil", ant_hill_id: nil, created_at: "2012-09-27 12:01:13", updated_at: "2012-09-27 12:01:13"> 
```

现在实例化一个蚁丘，但暂时不要保存它。

```
1.9.2-p290 :003 > ant_hill = AntHill.new name: "Storkullen"
 => #<AntHill id: nil, name: "Storkullen", created_at: nil, updated_at: nil> 
```

我希望这个蚂蚁山没有任何蚂蚁，但它没有。

```
1.9.2-p290 :004 > ant_hill.ants
 => [] 
```

我仍然希望蚂蚁山没有任何蚂蚁，但现在它有两个。

```
1.9.2-p290 :005 > ant_hill.ants.count
   (0.1ms)  SELECT COUNT(*) FROM "ants" WHERE "ants"."ant_hill_id" IS NULL
 => 2 
```

同样，在处理外键时，它不应该生成包含“IS NULL”的查询。我的意思是“belongs_to NULL”不能属于任何东西，对吧？

```
1.9.2-p290 :006 > ant_hill.ants.all
  Ant Load (0.4ms)  SELECT "ants".* FROM "ants" WHERE "ants"."ant_hill_id" IS NULL
 => [#<Ant id: 1, name: "August", ant_hill_id: nil, created_at: "2012-09-27 12:01:06", updated_at: "2012-09-27 12:01:06">, #<Ant id: 2, name: "Bertil", ant_hill_id: nil, created_at: "2012-09-27 12:01:13", updated_at: "2012-09-27 12:01:13">] 
```

持久化后，它的行为符合预期。

```
1.9.2-p290 :007 > ant_hill.save!
 => true
1.9.2-p290 :008 > ant_hill.ants.count
   (0.4ms)  SELECT COUNT(*) FROM "ants" WHERE "ants"."ant_hill_id" = 1
 => 0
1.9.2-p290 :009 > ant_hill.ants.all
  Ant Load (0.4ms)  SELECT "ants".* FROM "ants" WHERE "ants"."ant_hill_id" = 1
 => [] 
```

有什么见解吗？这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:58:56.417

虽然这似乎违反直觉，但我认为鉴于您的示例，这种行为是有道理的。举个`ant_hill.ants.count`例子。Count 是一种命中数据库的 ActiveRecord 查询方法，您实际上是在要求 ActiveRecord 为您提供所有不属于蚁丘的蚂蚁。Rails 只是让你做一些你不应该做的事情，而不是抱怨它。这应该引发异常吗？可能。

如果你真的想知道有多少蚂蚁属于这个 ant_hill 对象，你应该使用 size。它在未持久化或关联已加载时查询对象，否则查询数据库。

```
ant_hill.ants.size 
```

绕过这种奇怪的一种方法是通过验证 ant_hill_id 的存在来使 ant_hill_id 成为必填字段。

**TL;DR 如果父对象未持久化到数据库，请避免使用 ActiveRecord 查询接口。**

# jakarta-ee - 创建会话时侦听器方法的顺序

> ID：12621383
> 
> 赞同：0
> 
> 时间：2012-09-27T12:27:04.003
> 
> 标签：jakarta-ee

创建会话时调用侦听器方法的顺序是什么？

```
 HttpSession hs = request.getSession(); 
```

--> HttpSessionListener 的 sessionCreated()

--> HttpSessionBindingListener 的 valueBound()

--> HttpSessionAttributeListener 的attributeAdded()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:57:47.823

创建会话时，它根本不包含任何属性，因此只会调用 HttpSessionListener。因为它是唯一被调用的监听器，所以它也是第一个 :-)

# r - 在 R 中的所有并行作业完成后提交一个新脚本

> ID：12621389
> 
> 赞同：0
> 
> 时间：2012-09-27T12:27:29.497
> 
> 标签：r, parallel-processing

我有一个 R 脚本，它创建多个脚本并将它们同时提交到计算机集群，并且在所有多个脚本都完成并且输出已经写入各自的文件夹之后，我想自动启动另一个可以运行的 R 脚本这些输出。

我无法弄清楚在 R 中是否有办法做到这一点：函数“等待”不是我想要的，因为脚本作为不同的作业提交，并且每个脚本都以不同的方式完成并写入其输出文件次，但我实际上想在所有输出出现后运行后续脚本。

我想到的一种方法是计算已创建的文件，如果存在正确数量的输出文件，则提交下一个脚本。但是要做到这一点，我想我必须打开一个脚本来不时检查文件是否存在，我不确定这是否是一个好主意，因为它可能需要一天或更长时间才能完成第一个脚本。

你能帮我找到解决办法吗？

非常感谢您的帮助-fra

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:11:03.520

我认为您以错误的方式看待这个问题：

*   根本不是 R 问题，R 恰好是您的批处理作业的客户端。

*   这是队列/批处理处理器可以在您的集群上解决的问题。

*   最坏的情况是，您可以在 shell（或 R 脚本）中等待/休眠，直到触及“达到最终条件”文件

*   相互依赖也可以用 make 来表达

# javascript - 移动重定向：元还是 Javascript？

> ID：12621390
> 
> 赞同：1
> 
> 时间：2012-09-27T12:27:31.323
> 
> 标签：javascript, redirect, mobile, meta-tags, url-redirection

**移动设备上哪种类型的客户端重定向最可靠？**

这是一个更基本的问题。让我们只假设我们现在需要处理 iOS 和 Android 设备（没有 BB 或 Windows）并且具有重定向的网页只是一个传递页面（意味着它完成了它的工作，然后必须传递用户到下一页）

我找到[了这篇博](http://joshmccarty.com/2011/08/redirect-in-sharepoint-using-meta-vs-javascript/)文，其中讨论了它们各自的优缺点。

我觉得元重定向的最大缺点是它会在浏览器历史记录中添加一个条目。

在我看来，JavaScript 重定向似乎不太可靠，但具有更好的 UX（没有浏览器历史记录条目，并且您可以在其中放入一些逻辑和动态值）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:31:32.243

您可以混合使用这两种方法：创建一个延迟 300 毫秒左右的 javascript 重定向。作为备份（如果 javascript 被禁用或由于任何原因无法正常工作），请在您的页面上放置一个比 javascript 重定向多 300 毫秒的元重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:09:09.197

我发现这个小插件非常适合移动检测 - [http://detectmobilebrowsers.com](http://detectmobilebrowsers.com)。我在该页面上使用 jQuery 版本，但还有其他用于 PHP、ASP、纯 javascript 等的脚本。

因此，使用 jQuery 版本，您只需执行此操作即可进行重定向 -

```
if($.browser.mobile) {

   window.location = 'http://yourmobilesite.com'; 

} 
```

# java - Java 将 POST 数据发送到被 accessRules 方法阻止的 PHP 服务器

> ID：12621395
> 
> 赞同：0
> 
> 时间：2012-09-27T12:27:40.263
> 
> 标签：java, php, swing, yii, access-rules

我正在将一些数据发布到 Yii 框架中的 PHP 服务器。登录工作正常。这意味着我的数据已正确发送到服务器。

但是登录后，我的后续请求被`accessRules`服务器上的方法拒绝，我得到登录页面作为响应。

这是 PHP 中的 accessRules 函数。工程师是管理员以外的普通用户。

```
public function accessRules()
    {
        return array(

            array('allow',  // allow all users to perform 'index' and 'view' actions
                'actions'=>array('index','view','AssignedUsers',),
                'roles'=>array('admin', 'engineering'),
                //'users'=>array('*'),
            ),
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions'=>array('create','update','userReport','userNewReport',),
                'roles'=>array('admin'),
                //'users'=>array('@'),
            ),
            array('allow', // allow admin user to perform 'admin' action
                'actions'=>array('admin'),
                'roles'=>array('admin', 'engineering'),
            ),
            array('allow', // allow admin user to perform 'delete' action
                'actions'=>array('delete'),
                'roles'=>array('admin', 'admin'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    } 
```

但我被服务器拒绝了。

这是 JAVA 请求

```
String content ="user=" + URLEncoder.encode(userId,encoding) +
"&apiKey=" + URLEncoder.encode(apiKey,encoding); 
```

此内容与 url 一起使用。

```
 connection = (HttpURLConnection)url.openConnection();
        connection.setRequestMethod("POST");
        connection.setDoInput(true);
        connection.setDoOutput(true);
        connection.setUseCaches (false);
        connection.setRequestProperty("Content-length",String.valueOf (content.length())); 
        connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");

        DataOutputStream printout = new DataOutputStream (connection.getOutputStream ());

        System.out.println(url+",Content = "+content);

        printout.writeBytes (content);
        printout.flush ();
        printout.close (); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:43:48.010

发送 cookie。

当您登录时...将在服务器中创建一个会话，并且**会话 ID**将作为 cookie 在 http 响应标头上发送。

您必须从登录响应中捕获这些 cookie，并在后续请求中继续发送相同的内容。

我刚刚用谷歌搜索并找到了这个例子： [如何从响应中检索 cookie 以及如何在请求中发送它](http://www.hccp.org/java-net-cookie-how-to.html "如何从响应中检索 cookie 以及如何发送请求")

# python - 如何在 Windows 上运行已安装的 python 包？

> ID：12621397
> 
> 赞同：0
> 
> 时间：2012-09-27T12:27:50.807
> 
> 标签：python, windows-7

我对 Python 不太熟悉，需要使用 oauth-proxy 服务器，推荐使用 Python 创建的。

安装 python 后，我得到了从 cmd 行运行“easy_install oauth-proxy”的简单说明。我已经安装了 ActiveState Python 2.7 并做到了，一切似乎都在安装 Python 脚本集（各种消息下载、复制和安装没有错误消息的包）。

我现在应该能够简单地`oauth-proxy --consumer-key [your public key] --consumer-secret [your private key]`在 cmd 行上输入，但这些说明适用于 MAC OS，我正在运行 win 7。当我这样做时，我得到了错误`'oauth-proxy' is not recognized as an internal or external command, operable program or batch file.`

我可以看到，运行 easy_install 后，在`C:\Python27\Scripts location`. 它是一个包含以下内容的文本文件：

```
#!/bin/sh

twistd -n oauth_proxy $* 
```

`C:\Python27\Scripts`在我的路径上，我如何在 Windows 上运行这个文件？我假设这个文本文件是某种包装器，但无论如何都无法调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:36:11.003

尝试制作该文件的副本并将副本命名为 oauth-proxy.bat 并删除第一行，然后从命令行尝试。告诉 *nix 系统使用`#!/bin/sh`哪个程序来打开文件。该行`twistd -n oauth_proxy $*`是[Twisted](http://twistedmatrix.com/trac/)的命令行快捷方式，我猜 easy_install 得到了这种依赖。如果你得到一个错误`'twistd' is not recognized as an internal or external command, operable program or batch file.`，这意味着你的`path`变量不知道 Twisted 在哪里。

`twistd.py -n oauth_proxy $*`从 C:\Python27\Scripts运行时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:03:04.920

我想你是从这里或类似的地方得到的：[https ://github.com/mojodna/oauth-proxy](https://github.com/mojodna/oauth-proxy)

正如您所描述的，我很惊讶（就像 Ionut 一样）发现这不是一个库，而是一些脚本。

然而，这个 oauth-proxy 脚本本质上是一个 unix 的东西。

Windows 不会知道如何处理 $*

我可以看到 Windows (http://twistedmatrix.com/trac/wiki/Downloads) 支持 Twisted，但我看不到任何告诉我 oauth-proxy 是的东西。

如果您发现 oath-proxy 的简易安装确实安装了 twisted，那么您可能能够找到 twisted 可执行文件（twistd.exe 或 twistd.bat），确认它在您的路径上，然后直接从命令行，使用您要传递给 oauth-proxy 而不是 $* 的实际参数。

我猜前面还有一些令人头疼的问题，比如twisted 是如何找到你所说的oauth-proxy 文件的？

你可能会比我更好地偿还给谷歌，并检查这个东西是否真的在 Windows 下受支持:)

请注意，从我在上面找到并指出的发行版中运行 oauth-proxy.py 对您没有帮助 - 该文件只是一个类库。

# php - 别名 url 上的 RewriteRule

> ID：12621401
> 
> 赞同：0
> 
> 时间：2012-09-27T12:28:06.583
> 
> 标签：php, apache, .htaccess, kohana

查询：

```
domain.com/page/do 
```

我需要：

```
domain.com/index.php/page/do 
```

等等

我使用 htaccess 文件，我添加别名

```
RewriteBase /index.php/ 
```

我如何将 RewriteRule 写入此 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:11:31.653

试试这个，它应该做你想做的事，并且不需要在你的 uri 中有 index.php

```
###
# Rewrite Rules
#

<IfModule mod_rewrite.c>

    ### Enable mod_rewrite

    RewriteEngine On
    RewriteBase /

    ### Checks if the URI request path coincides with a literal path
    ### on the filesystem relative to the webroot. If it does not exist,
    ### then it passes the path through index.php.

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:37:48.377

将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteBase /
RewriteCond ^/index.php
RewriteRule ^/?(.*)$ /index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:34:53.083

尝试这个：

```
RewriteRule ^(.*)/(.*)$  /$1/$2 [L] 
```

# c++ - 字符串“mod-12k”的 utext_openUTF8 返回错误；

> ID：12621403
> 
> 赞同：0
> 
> 时间：2012-09-27T12:28:18.063
> 
> 标签：c++, unicode, icu

在以下小程序中，我无法弄清楚为什么 utext_openUTF8 返回错误..

```
 int utf8_is_it_model3(std::string input_string)
  {
int error_number=0;
UText *ut = NULL;
    UErrorCode status;

    //char *pEnd;
const char * c2 = input_string.c_str();
    ut = utext_openUTF8(ut, c2, -1, &status);
 if(U_FAILURE(status))
 {
            error_number=-1
    std::cout<<" Error!\n";
    return error_number;
 }

utext_close(ut);

 return error_number;

 }   

int main(int argc, char* argv[])
{
int i;
bool is_it_model=false;
std::string input_string="mod-12k";
//std::string input_string="m54-q";
//std::string input_string="- ";
i=utf8_is_it_model3(input_string);

return 0;
    } 
```

输出：错误！

当我更改 std::string input_string="mod-12k"; 使用 std::string input_string="sko-w"; 我没有错误...

我正在使用 ubuntu 64 位 12.04 和 c++ 和 ICU 49

我无法找出我做错了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:33:54.683

真正的问题是你在第 5 行需要这个：

`UErrorCode status = U_ZERO_ERROR;`

# css - CSS 溢出属性

> ID：12621409
> 
> 赞同：0
> 
> 时间：2012-09-27T12:28:48.323
> 
> 标签：css, overflow

我发现了一些 CSS 模板，其中一些类具有 overflow:hidden 属性，但没有定义大小。如果我没记错的话，除非另有说明，否则块元素会拉伸以适应其内容。既然不是这样，我觉得放上overflow:hidden是没有意义的，我可以毫不犹豫地删除它。这是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:34:20.130

虽然这是该`overflow`属性的主要用途，但它并不是它对渲染的唯一影响。它的另一个主要影响是设置`overflow`为（默认）以外`visible`的任何内容都会导致块框建立自己的[块格式化上下文](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)。

这主要用于包含浮动而不需要 clearfix；但这并不是拥有新 BFC 的唯一效果；还有许多其他极端情况在规范的其他地方有更好的描述。另请参阅有关此行为原因的[冗长](https://stackoverflow.com/questions/9943503/why-does-css2-1-define-overflow-values-other-than-visible-to-establish-a-new-b/11854515#11854515)文章（奇怪的是，这与包含浮点数几乎没有关系；实际上最终只不过是一种副作用）。

因此，如果您删除该`overflow`声明，您可能会破坏浮动布局等。我建议避免这样做，除非绝对必要或者您确定它不会影响布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:32:35.387

如果该 div 内有浮动子项，则`overflow: hidden`可能包含它们。

`overflow: hidden`创建一个新的块格式化上下文，创建新块格式化上下文的元素包含浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:32:23.313

这可能取决于。如果您的 div 包含一些浮动元素，您可以使用

```
div {
   height: auto;
   overflow : hidden;
} 
```

作为清算的解决方法。所以我不会在没有看到对布局的影响的情况下删除该规则

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:33:16.730

`overflow:hidden`如果您有一个指定宽度大于容器最大允许宽度的子元素，则可以派上用场。否则它会拉伸容器。

[查看示例](http://jsfiddle.net/yJRuL/)

一个常见的用途是在显示带有浮动子元素的[轮播时。](http://www.pixelzdesign.com/blog_view.php?id=55)元素需要显示为内联但隐藏，以便在`left`更改 CSS 属性时它们可以出现。

# iphone - 使用延迟加载在 UITableView 中加载更多图像

> ID：12621416
> 
> 赞同：0
> 
> 时间：2012-09-27T12:29:03.657
> 
> 标签：iphone, ios

我有一个 UITableView，其中包含像相册这样的图像，图像正在加载延迟加载。我想在滚动到表格视图底部或到达表格视图的最后一行时加载更多图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:35:54.793

检查这个

[http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

和这个[在 UITableView 中延迟加载图像](https://stackoverflow.com/questions/1130089/lazy-load-images-in-uitableview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:36:02.483

UITableView 已经为你做了延迟加载。它只会要求可见的单元格。如果您正在考虑在用户滚动时向表格添加更多图像，您可以实现 UIScrollViewDelegate 方法来计算当前滚动位置，并且当用户到达某个点时，将更多图像添加到数据源上的 NSMutableArray 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:40:41.380

您可以使用[SDWebImage](https://github.com/rs/SDWebImage)。

这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

1.  向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别

2.  一个异步图片下载器

3.  具有自动缓存过期处理的异步内存 + 磁盘映像缓存

4.  保证不会多次下载相同的 URL

5.  保证不会一次又一次地重试虚假 URL 性能！

# memory-leaks - valgrind - 在共享库中查找内存泄漏

> ID：12621418
> 
> 赞同：13
> 
> 时间：2012-09-27T12:29:13.150
> 
> 标签：memory-leaks, shared-libraries, valgrind

我需要知道如何找出共享库中的内存泄漏，该共享库将被加载到发布二进制文件中。我的意思是我使用 -g 选项构建的共享库，但加载共享库的二进制文件不是使用 -g 选项构建的。

我得到的泄漏报告如下。

```
==739==    at 0x4A05809: malloc (vg_replace_malloc.c:149)
==739==    by 0x84781B1: ???
==739==    by 0x87507F5: ???
==739==    by 0x874CF47: ???
==739==    by 0x874E657: ???
==739==    by 0x874F7C2: ???
==739==    by 0x8779C0C: ??? 
```

请让我知道如何从共享库中获取泄漏的堆栈跟踪？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T10:02:31.437

假设泄漏确实来自您的共享库，那么我认为问题不在于主可执行文件中缺乏调试。

您的问题更可能是可执行文件`dlclose`在完成之前通过调用来卸载共享库。这意味着当 valgrind 来检查泄漏时，库的所有符号信息都消失了，因为不再加载库。

如果您可以重建可执行文件，那么最简单的解决方案可能是暂时停止它的调用`dlclose`，以便库保持加载直到结束。

如果您不能这样做，请尝试使用`LD_PRELOAD`来保持库的加载，如下所示：

```
LD_PRELOAD="/path/to/library.so" valgrind my-executable 
```

这有望欺骗动态链接器，即使在关闭库后也能保持库的加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T06:57:31.967

正如前面的答案所暗示的，这是因为您在程序终止之前关闭了库，因此 valgrind 无法使用符号信息。

使用 LD_PRELOAD 对我不起作用；我现在有两个版本；一个明确不调用 dlclose(); 在这个版本中，valgrind 正确地报告行号信息，正如您对动态链接所期望的那样。

# java - 如何从 xml 解析器获取值到另一个类

> ID：12621419
> 
> 赞同：1
> 
> 时间：2012-09-27T12:29:16.033
> 
> 标签：java, android, xml, parsing, baseadapter

我在整个互联网上搜索，但我没有找到任何东西，我可以使用。所以这是我的问题：我有一个在列表视图中工作的 xml 解析器，但我想将歌曲的 id 提供给其他活动，以便我可以显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:43:36.290

您可以通过 using`setTag()`和`getTag()`方法在此处查看我的答案[How to acces variable in arrayadapter getView from onItemClick](https://stackoverflow.com/a/12619178/964741)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:05:03.550

**1.**首先你需要`OnItemClickListener()`方法`ListView`

**2.**然后，一旦您捕获了`index of the row`您单击的内容，`Intent()`就可以将其传递给另一个活动。

**笔记：**

`For this to work, please make the Map as static, and please do map.clear() , everytime before loading the Map with parsed data.`

**3.**当你去另一个`Activity`时，我希望你的歌曲顺序`Map`和里面`ListView`是一样的，

因此，假设您按下 上的第二个项目`ListView`，传递的索引将为 1，而在其他情况`Activity`下只需调用第`Map's`一个索引。

**笔记：**

**添加标头会影响索引**，`ListView`因此更好地`getItemIdAtPosition(arg)`在`onClick()`方法中使用。

**例如：**

```
ListView lv = (ListView)findViewById(R.id.MyListView);

lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                i = new Intent(ProductActivity.this, ProductDetails.class);

                i.putExtra("keyAapo", (int) lv.getItemIdAtPosition(arg2));

                startActivity(i);

            }

        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:28:25.193

已经说过 Intent 额外传递选项，但是，如果您要传递大量数据，则始终可以使 XML 处理器可重用并仅传递 XML。它已经是一种编码格式

# xcode - Phonegap/Cordova 构建错误 - Apple Mach-O 链接器错误：没有这样的文件或目录：libCordova.a

> ID：12621421
> 
> 赞同：32
> 
> 时间：2012-09-27T12:29:29.263
> 
> 标签：xcode, cordova

在创建新的 Cordova 2.1.0 项目并使用以前的 PhoneGap 应用程序中的一些代码更新 www 文件夹后，我收到错误消息。

```
clang: error: no such file or directory: '/Users/peterbanjo/Library/Developer/Xcode/DerivedData/OpuzMobile-bhwawiqfaptmxvfosawfabudgbkj/Build/Products/Debug-iphoneos/libCordova.a' 
```

仅当我尝试在设备上运行应用程序时才会出现该错误 - 在模拟器中它工作正常。

我在目标 iPad 上运行 Xcode 4.5 和 iOS6。我尝试了一个干净的构建，libCordova.a 出现在 Build Phases > Link Library With Libraries 选项卡中，但它是红色的。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-27T13:05:06.733

通过从 1.4 升级，我发现 PhoneGap/Cordova 2.1.0 令人困惑的是我的应用程序中有两个项目。有 MyApplication.xcodeproj 和 CordovaLib.xcodeproj。解决此问题的更改需要应用于 CordovaLib 项目。

*   将“仅构建活动架构”更改为“是”
*   将文本文件 project.pbxproj 更新[为这些值](https://issues.apache.org/jira/browse/CB-1360)
*   在模拟器和设备的构建模式之间切换（使用停止按钮旁边的选择菜单。不知何故，这似乎会导致检测到更改）。

它能为您提供帮助吗？我错过了什么？

PS：为了更好地理解这个问题，看看这个[谷歌论坛线程](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ywoc9wNydZ8)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-20T00:37:31.420

我正在使用 Cordova/Phonegap 2.9，这解决了我的问题。没有碰任何拱形的东西。我的一切都设置为 armv7 armv7s。

**请按照以下步骤解决此问题：**

1.  转到项目设置和构建选项卡。
2.  搜索“其他链接器标志”
3.  双击 Release 的链接器标志并将 ${TARGET_BUILD_DIR}/libCordova.a 更改为 ${BUILT_PRODUCTS_DIR}/libCordova.a
4.  对 Debug Clean 执行相同操作并再次构建存档

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-10-19T10:20:10.687

我有同样的错误并通过恢复到旧版本的cordova ios来修复它。

解决问题的步骤：

1.  首先卸载cordova-ios，使用`npm uninstall cordova-ios`
2.  安装旧版本的cordova-ios`npm install cordova-ios@4.4.0`
3.  `ionic cordova platform rm ios`使用or删除现有的 ios 平台`ionic platform rm ios`
4.  之后我们应该添加平台`ionic cordova platform add ios@4.4.0`或`ionic platform add ios@4.4.0`
5.  运行 ionic cordova build ios。

指令来自[这里](https://github.com/ionic-team/ionic/issues/12849#issuecomment-328472880)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-29T22:53:14.180

为了让它工作，我从[http://connect.apple.com](http://connect.apple.com)下载了独立的 Xcode 4.4.1。使用这个版本，我可以使用 armv6 构建我的 phonegap 应用程序 :)

是的，在这种情况下，您的计算机上需要有两个 Xcode。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-03T22:57:05.260

只需要从 YourProject 和 CordovaLib 中删除**armv6 ：**![从 CordovaLib 中删除 armv6 并对 YourProject 执行相同操作](../Images/e94cbeee70311935065f78d69dfb03d8.png)

这样做的后果是什么？显然，它仍在 iPhone 3GS 上运行，但不是以前的版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-03T20:39:54.297

不要假设 have`Standard (armv7,armv7s) - $(ARCHS_STANDARD_32_BIT)` 与上面的修复相同。手动将此值更改为 only`armv7`并为我修复它。我非常沮丧。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-28T11:00:24.023

看看这个[https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ywoc9wNydZ8](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/ywoc9wNydZ8)

为我工作

-- OS X 10.8.2 XCode 4.5 iOS 6.0 PhoneGap 2.1.0

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-05T20:08:31.767

如果您在此处完成了所有操作，但仍然无法正常工作，并且除了发布和调试之外您还有单独的配置 - 对于此示例是生产。确保 Cordova 项目中存在“生产”构建配置。再次构建 Cordova 项目并构建 + 归档您的主项目。

# php - Facebook SDK，覆盖标头要求

> ID：12621426
> 
> 赞同：0
> 
> 时间：2012-09-27T12:29:46.063
> 
> 标签：php, facebook

我编写了一个函数，它可以获取 Facebook 相册和主要基于图像的投资组合网站的图像详细信息。现在 facebook 类要求我在我的页面上输出任何标题之前执行此操作。

从 facebook 获取数据的函数 ( `fb_get_albums`) 存储为会话数组。一切正常，但加载需要几秒钟，在此期间屏幕基本上是空白的。

无论如何，我可以先显示我的内容，然后才能继续获取数据？如果我尝试这个，我会得到错误`'headers already sent...'`

```
<?php
session_start();   
require_once 'classes/fb-sdk/src;  
fb_get_albums( "fb-username" );  
?>  
<!DOCTYPE html>  
<html>....</html>  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:16:02.940

您可以先显示页面内容并使用 Javascript SDK，获取图像并显示它。如果获取过程通常需要更多时间，则显示一个旋转的加载器图像，以通知用户可能需要一些时间才能完成。您可以使用此在线工具创建不同类型的加载程序：[ajaxload.info](http://ajaxload.info/)

如果您不想使用 Javascript SDK，请尝试创建一个单独的页面来获取图像。因此，在页面加载后，当用户按下按钮或其他东西时，发出 AJAX 请求以从第二页获取图像。

也就是`page1.php`包含你页面的基本内容的一个按钮。当使用按下该按钮时，使用 AJAX`page2.php`访问，这会将图像位置或其他详细信息输出回调用者。

顺便说一句，您是否尝试过调试代码以发现获取图像导致的延迟？

此外，在您当前的代码中，有一个小错字：

```
require_once 'classes/fb-sdk/src/facebook.php'; 
```

我的意思是，路径不完整并且缺少结束单引号字符。

祝你好运。

# javascript - HTML5 所需属性和 javascript 函数的问题

> ID：12621427
> 
> 赞同：0
> 
> 时间：2012-09-27T12:29:46.683
> 
> 标签：javascript, properties, required

我有一个表单，取决于您选择显示或隐藏 div 的选项。

在这个 div 中，我有两个元素输入。

如果将 div 设置为显示，我有一个添加属性 required true 的函数。

如果设置为不显示，则不显示，但它会告诉我

name='montant_creance' 的无效表单控件不可聚焦。index.php:1 name='condition2' 的无效表单控件不可聚焦。

但我真的不明白为什么，因为 div 设置为不显示。

这是我使用的功能

```
 <script type="text/javascript">
function addattribute()
{
    if (document.getElementById('montant').style.display == "block")
    {
        document.getElementsByName('montant_creance')[1].setAttribute('required');
        document.getElementsByName('condition2')[0].setAttribute('required');
    }

}
</script> 
```

那么谁能解释我为什么它在控制台中显示这条消息？我试过使用那个功能

```
<script type="text/javascript">
function addattribute()
{
    if (document.getElementById('montant').style.display == "block")
    {
        document.getElementsByName('montant_creance')[0].setAttribute('required');
        document.getElementsByName('condition2')[0].setAttribute('required');
    }
    if (document.getElementById('montant').style.display == "none")
    {
        document.getElementsByName('montant_creance')[0].setAttribute('required','false');
        document.getElementsByName('condition2')[0].setAttribute('required','false');
    }
}
</script> 
```

它经常说

name='montant_creance' 的无效表单控件不可聚焦。index.php:1 name='condition2' 的无效表单控件不可聚焦。

我还尝试添加一些隐藏的输入类型；使用该功能：

```
<script type="text/javascript">
function addattribute()
{
    if (document.getElementById('montant').style.display == "block")
    {
        document.getElementsByName('montant_creance')[1].setAttribute('required');
        document.getElementsByName('condition2')[1].setAttribute('required');
    }
    if (document.getElementById('montant').style.display == "none")
    {
        document.getElementsByName('montant_creance')[0].setAttribute('required','false');
        document.getElementsByName('condition2')[0].setAttribute('required','false');
    }
}
</script> 
```

这是预览：http: [//jsfiddle.net/VUZQP/](http://jsfiddle.net/VUZQP/)

接受我最大的尊重

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:38:11.453

仅使用一个参数调用`.setAttribute()`将有效地将属性设置为“false”。你真的不应该使用`setAttribute()`：

```
document.getElementsByName('montant_creance')[1].required = true; // or false 
```

HTML 中的大多数属性都是作为 DOM 元素的属性实现*的*，无需使用`.setAttribute()`. 它们是对象的直接属性，应该这样对待。

# iphone - mySLComposerSheet 上的格式字符串未使用错误数据参数

> ID：12621430
> 
> 赞同：5
> 
> 时间：2012-09-27T12:29:55.223
> 
> 标签：iphone, xcode, ios6, xcode4.5

我对为什么收到错误“格式字符串未使用的数据参数”感到有些困惑

有没有其他人在 Xcode 4.5 for iOS6 中得到这个或修复这个？

```
- (IBAction)facebookPost:(id)sender
{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
{
    mySLComposerSheet = [[SLComposeViewController alloc] init];
    mySLComposerSheet = [SLComposeViewController  composeViewControllerForServiceType:SLServiceTypeFacebook];

    [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"I'm listening to Boilerroom Recordings via the Boilerroom iPhone Application",mySLComposerSheet.serviceType]];

    [mySLComposerSheet addImage:[UIImage imageNamed:@"BOILERROOM_LOGO_250x250.png"]];
    [self presentViewController:mySLComposerSheet animated:YES completion:nil];
}
[mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
    NSLog(@"dfsdf");
    switch (result) {
        case SLComposeViewControllerResultCancelled:
            break;
        case SLComposeViewControllerResultDone:
            break;
        default:
            break;
    }
}];

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T12:34:32.967

您遇到的错误是不言自明的：当您使用`stringWithFormat`时，您应该在格式字符串中提供一些格式化占位符（例如`%@`作为对象的占位符、`%d`整数、`%f`作为浮点数的占位符等，就像所有类似 printf 的方法）。

但你不使用任何。因此，`mySLComposerSheet.serviceType`您在格式字符串之后放置的参数不会被格式字符串（无占位符）使用，并且在这里没有用。因此错误说“`mySLComposerSheet.serviceType`格式字符串不使用数据参数（即 ）”。

* * *

所以解决方案取决于你打算做什么：

*   如果你真的想`serviceType`在你的字符串中插入某个地方，只需在你的格式字符串中添加一个`%@`（作为`serviceType`一个`NSString*`，因此是一个对象）占位符，在你`mySLComposerSheet.serviceType`要插入的值的位置。例如：

    ```
    [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"I'm listening to Boilerroom Recordings via the Boilerroom iPhone Application and want to share it using %@ !",mySLComposerSheet.serviceType]]; 
    ```

*   但我想实际上你不想`serviceType`在你的 initialText 字符串的任何地方插入值（我想知道你为什么首先添加这个参数）。在这种情况下，您可以简单地删除调用的这个无用的附加参数`stringWithFormat:`。或者更好，**因为那时你的`stringWithFormat`**调用**根本不会有任何格式占位符，****无论如何**`%@`这**完全没用`stringWithFormat`**，所以**直接使用字符串文字**！

    ```
    [mySLComposerSheet setInitialText:@"I'm listening to Boilerroom Recordings via the Boilerroom iPhone Application"]; 
    ```

# javascript - `document.referrer` 是否是 url 编码的？

> ID：12621431
> 
> 赞同：3
> 
> 时间：2012-09-27T12:29:56.873
> 
> 标签：javascript, cross-browser, url-encoding, referrer

我写了一个小测试页面来使用 javascript 抓取`document.referrer`用户并将其发送到一个简单的日志服务器（如`sendReferrer(document.referrer)`）。

Firefox 发送的引荐来源网址始终是 url 编码的（例如，当引荐来源网址为 www.google.com/search?q=Ü 时，“http://www.google.com/search?q=%C3%9C”）

但有些客户端（如 Win7 上的 IE9）发送没有 url 编码的 url (www.google.com/search?q=Ü)

是否`document.referrer`在所有浏览器中都进行了 url 编码？这是否可靠（任何标准的一部分）？

**更新：**在 Firefox15/Chrome21（在 ubuntu 上）document.referrer 是 url 编码的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T12:38:52.067

document.referrer 不是 URL 编码的 我最近在所有主流浏览器中都对其进行了测试，结果表明它在每个浏览器中都没有编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:12:23.990

我对这个问题的最终答案：`Referer`可能/可能不会被编码！通过我的测试，一些（只有一些！）IE 发送未编码的引荐来源网址（我想这取决于客户端系统的语言环境）

# javascript - 每次页面加载时，Javascript 弹出窗口仅弹出一次

> ID：12621432
> 
> 赞同：0
> 
> 时间：2012-09-27T12:29:58.220
> 
> 标签：javascript, popup, forms

当我提交表单时，会弹出一个指向另一个 URL 的窗口。如果我关闭弹出窗口并重新提交表单，则窗口会在新选项卡中打开，直到我重新加载页面。如何在不重新加载页面的情况下每次都在弹出窗口中打开窗口？

```
<form action="http://stackoverflow.com/" method="post" enctype="multipart/form-data" name="imgform" onsubmit="process(); return false;">
    // FORM PARAMS
    <input type="submit" name="submit" value="Submit" />
</form> 
```

Javascript函数：

```
process = function(){
    popWindow = window.open('','popup','width=800,height=600,resizable=yes');
    document.imgform.setAttribute('target','popup');
    document.imgform.setAttribute('onsubmit','');
    document.imgform.submit();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:39:38.720

删除`document.imgform.setAttribute('onsubmit','');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:40:29.347

在这条线上：

`document.imgform.setAttribute('onsubmit','');`

您正在清除对`process`打开弹出窗口的函数的 javascript 调用。你试过删除这条线吗？

# ios - 内存警告/性能问题

> ID：12621433
> 
> 赞同：0
> 
> 时间：2012-09-27T12:29:59.250
> 
> 标签：ios, xcode, ios6

iOS 6 开发工具包。Xcode 4.5。

使用故事板和弧线。我正在制作一个应用程序，其中包含许多计算各种公式的计算器。在一个场景中，我使用`UIButton`具有 PNG 文件作为背景图像的 8 s，它们被标记为不同的公式类别，以允许用户导航到 8 个不同的公式，这些公式包含在 8 个不同的场景中。

我正在使用模态序列，并正在利用该`[self.presenting dismissViewController]`方法来关闭每个场景。这一切都很好。

特别是在一个计算器上，我将场景设置为类似于一个实际的计算器。我在上面使用了`UIImageView`a`UILabel`来充当显示器。即使没有附加代码，在我的设备上运行时，我注意到过渡到该场景时会挂起。我不确定为什么。此外，每当我按下按钮时，我都会在控制台中收到接收内存警告。我还显示仪器有泄漏。

此应用程序在模拟器中完美运行，但在实际手机上无法正常运行。我不确定出了什么问题。可能是我的编译器设置？还是我没有以编程方式设置按钮图像的事实？即使只有一个`UIImage`带有蓝色图片 PNG 和顶部的标签，没有按钮或该视图的视图控制器，它仍然会挂起。

我会很感激任何提示或教程，或者只是简单地告诉我我做错了什么，哈哈。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:25:32.750

我发现出了什么问题。我在每个按钮上都使用了非常高分辨率的图像。当我用低分辨率图像替换它时，内存问题就消失了

# jsf - 表示 Primefaces DataTable 中的布尔值

> ID：12621436
> 
> 赞同：2
> 
> 时间：2012-09-27T12:30:11.613
> 
> 标签：jsf, primefaces, datatable, boolean

所以我试图将对象值从 bean 传递到 primefaces 数据表（目前使用 primefaces 3.4），但是我面临两个问题。

**1.**我似乎找不到任何方法在数据表的列中显示（或表示）布尔值。每次我尝试这样做时，表都会返回完全为空（即使没有布尔列，其他列也填充了来自 bean 的数据）。

**2.**另一个更大的问题（我认为与 java 的关系比 primefaces 更重要）是我目前从 Siebels CRM ONDemand 云解决方案中获得了 26 个不同的对象，每个对象都包含自己的数据类型和属性值。我一生都无法弄清楚如何根据特定对象显示的下拉选择来动态显示primefaces数据表中的对象字段。到目前为止，我刚刚设法将其中一个对象的一些字段显示为一种原型，但我遇到了布尔值显示的问题，这也是一场噩梦。

有人有类似的经历吗？或建议？我已经为此困惑了两个多星期了，我快疯了！

如果需要，我可以提供代码示例或其他详细信息:)

**非常感谢我非常感谢任何帮助！**

雷吉

html代码：

```
<p:panel header ="Source Environment" style="margin-bottom:5px;">
    <p:dataTable draggableColumns="true" id="tableFieldSet1" value="#{ODComBean.fields}" var="tableFieldSet1" rowKey="#{ODComBean.fields}" selectionMode ="multiple" style="font-family:sans-serif; width:max-content;">
        <p:panel header="OD Object Selection" style="margin-bottom:5px;">
            <h:panelGrid columns="2" cellpadding="5">
                <p:selectOneMenu immediate ="true" id="pickList" value="#{ODComBean.fieldSetData}" effect="fade"  style="font-size: 12px; font-family:sans-serif;" >
                    <f:selectItems value="#{ODComBean.fieldSet}"  itemLabel="#{fieldSet.objectName}" var="fieldSet"/>
                    <p:ajax event="change" update="@form" />
                </p:selectOneMenu>
            </h:panelGrid>
        </p:panel> 
        <p:panel header ="Source Environment" style="margin-bottom:5px;">          
            <p:dataTable draggableColumns="true" id="tableFieldSet1" value="#{ODComBean.fields}" var="tableFieldSet1" rowKey="#{ODComBean.fields}" selectionMode ="multiple" style="font-family:sans-serif; width:max-content;">     
                 <p:column headerText="Type"  styleClass="singleLine" style="height: 10px; font-size: 8pt;"> 
                     <h:outputText value="#{tableFieldSet1.fieldType}"/>
                 </p:column>
                  <p:column headerText="Required">
                         <p:graphicImage value="/resources/images/tick.png" rendered="#{tableFieldSet1.readOnly}"/>
                         <p:graphicImage value="/resources/images/red-cross.png" rendered="#{not tableFieldSet1.readOnly}"/>
                 </p:column>
                 <p:column headerText="Name"  styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                     <h:outputText value="#{tableFieldSet1.name}"/>
                 </p:column>
                 <p:column headerText ="Display Name" styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                     <h:outputText value="#{tableFieldSet1.displayName}"/>
                 </p:column>
                 <p:column headerText="Default Value"   styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                     <h:outputText value="#{tableFieldSet1.defaultValue}"/>
                 </p:column>
                 <p:column headerText="Generic Integration Tag" styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                     <h:outputText value="#{tableFieldSet1.genericIntegrationTag}"/>
                 </p:column>
                 <p:column headerText ="Integration Tag"  styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                      <h:outputText value="#{tableFieldSet1.integrationTag}"/>
                 </p:column>
                 <p:column headerText ="Translations" styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                     <h:outputText value="#{tableFieldSet1.listOfFieldTranslations}"/>
                 </p:column>
                 <p:column headerText ="Validation Error"  styleClass="singleLine" style="height: 10px; font-size: 8pt;">
                     <h:outputText value="#{tableFieldSet1.validationErrorMsg}"/>
                 </p:column>
                     <!-- When I add the next Column it will only show data for the first line, and display a <div half tag in the last column... strange... !-->

    </p:dataTable>
</p:panel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T11:25:28.753

如果您想使用 ah:outputText，您可以将其转换器设置为您实现的内容，并在该转换器内部决定显示值。否则，如果您想根据值查看图标，可以这样做：

```
<p:column headerText="My Boolean Value">
   <p:graphicImage value="/resources/images/tick.png" rendered="#{MODEL.boolean}"/>
   <p:graphicImage value="/resources/images/red-cross.png"  rendered="#{not MODEL.boolean}"/>
</p:column> 
```

我希望这是有帮助的 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T10:47:19.553

*布局*设置为*内联*的[输出面板](http://www.primefaces.org/showcase/ui/panel/outputPanel.xhtml)会生成一个带有您提供的样式类的*<span>标记。*

例如，您可以使用框架提供的[*jquery-ui*图标。](http://api.jqueryui.com/theming/icons/)像这样：

```
<p:outputPanel layout="inline" styleClass="ui-icon ui-icon-circle-check" rendered="#{project.inBudget}" />
<p:outputPanel layout="inline" styleClass="ui-icon ui-icon-circle-close" rendered="#{!project.inBudget}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-26T18:31:11.803

**您可以简单地为空字符串**使用复**选****标记**符号`true`，或为.****`false`****

 ****```
<p:column headerText="Required" style="text-align: center">
    <h:outputText value="#{tableFieldSet1.readOnly ? '✓' : ''}"/>
</p:column> 
```****

# android - 如何永久杀死应用程序？

> ID：12621437
> 
> 赞同：0
> 
> 时间：2012-09-27T12:30:13.970
> 
> 标签：android

在我的应用程序中，当我在 url 中给出有效输入时工作正常并给出响应。当我给出无效输入时，它显示 toast 消息无效输入。但是如果我再次给出有效输入，它显示无效输入消息，为什么会发生这种情况? 有没有保存历史的地方？？

```
xmlResponse = A("www.xyz/AgMainServlet?messageType=MIN&pin=" +    
    txtPinno.getText().toString() + "&mobile=" + AgAppHelperMethods.varMobileNo + 
"&source="  + AgAppHelperMethods.varMobileNo + "&channel=INTERNET"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:05:04.477

要永久终止应用程序，只需完成所有现有活动。如果您没有跟踪未完成的活动，只需使用标志“CLEAR_TOP”开始一项活动，然后完成该活动。这应该会杀死您的应用程序。

# sql - 根据查询结果创建平面文件

> ID：12621445
> 
> 赞同：0
> 
> 时间：2012-09-27T12:30:52.610
> 
> 标签：sql, ssis

我有一个返回完整数据集的 SQL 查询：例如

ID, EmployeeNumber, Column1, Col2, Col3, Col4, Insurance1, Insurance2, Charges1,..Charges5 ... InsurancePmt1, InsurancePmt2,..Deductible, Copay,..Col70

我需要根据返回的数据集创建一个文件，该文件应具有以下结构：
L1--> *TR STATS* , TotalChgs, TotalEmployees...
L2 --> *EMP* , EmployeeNumber1, Column1, Column2, Col3, Charges1, Charges 5...
L3 --> *INS* , Insurance1, InsurancePmt1
L4 --> *INS* , Insurance2, InsurancePmt2
L5 --> *PMT* , Deductible, Copay
L6 --> *EMP* , EmployeeNumber2, Column1, Column2, Col3, Charges1, Charges 5。 ..
L7 --> *INS*，Insurance1，InsurancePmt1
L8 --> *INS*，Insurance2，InsurancePmt2
L9 --> *PMT*, 免赔额, 共付额

对于数据集中返回的每个“员工编号”，依此类推。
文件的格式/布局是一项要求。我正在使用 MSSQL，但对文件的后勤工作感到困惑。是否可以使用 sql 来实现我想要实现的目标？如果是这样，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:36:05.557

我不确定我是否正确理解您，但这是我对您的问题的解决方案（也许不是最好的）：

```
select case piv.rank_
 when 1 then 'L1--> ' + sel1.a + sel1.c 
 when 2 then 'L2--> ' + sel1.b + sel1.d
 when 3 then 'L3--> ' + sel1.a + sel1.b + sel1.d
 when 4 then 'L4--> ' + sel1.c + sel1.b + ' any data u need'
 when 5 then 'EmployeeNumber = ' + sel1.EmployeeNumber
 else 'nothing'  
 end as linesToFile, piv.rank_, sel1.EmployeeNumber
                from
       (
       select sel.a, sel.b, sel.c, sel.d, sel.EmployeeNumber from (
           SELECT 'data_1_1' a, 'data_1_2' b, 'data_1_3' c, 'data_1_4' d, '33333333' EmployeeNumber
           UNION ALL
           SELECT 'data_2_1' a, 'data_2_2' b, 'data_2_3' c, 'data_2_4' d, '44444444' EmployeeNumber
           UNION ALL
           SELECT 'data_3_1' a, 'data_3_2' b, 'data_3_3' c, 'data_4_4' d, '55555555' EmployeeNumber) sel
       ) sel1,
       (SELECT TOP 5 ROW_NUMBER() OVER (ORDER BY sel4.a ASC) AS rank_ from(SELECT '1' a
       UNION ALL
       SELECT '2' a
       UNION ALL
       SELECT '29' a
       UNION ALL
       SELECT '9' a
       UNION ALL
       SELECT '19' a
       UNION ALL
       SELECT '29' a) sel4) piv
order by EmployeeNumber, rank_; 
```

`sel1`您的表在哪里，`piv`是用于生成 rownum 的表（您可以在架构中使用某些表，这些表肯定比您需要显示的行数多`Employee Number`），`TOP 5` 每个`EmployeeNumber`您需要显示的行数（等于 number of `CASEs`）。

在`CASE`写你的文件结构。

# php - 强制在 cakephp 中访问表单

> ID：12621451
> 
> 赞同：0
> 
> 时间：2012-09-27T12:31:11.677
> 
> 标签：php, cakephp

我有两种注册表格。我正在会话中保存第一个表单数据。问题是用户可以在不填写第一个表单的情况下访问第二个表单。

我想限制用户直接访问第二种形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:37:10.900

您可以在第二种形式中检查会话中的数据是否可用。如果不可用，那么您可以将他重定向到第一个表单

如果您有任何疑问，请随时询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:38:35.023

所以基本上你想要的是用户不能访问表单，如果没有会话？正确的？因为如果是这样，它的问题是做出一个 if-else 语句。

我所做的是当我创建会话时，我创建一个会话变量，例如使用用户名。然后在第二个表单的下一页上检索该数据

```
$UserName = $_SESSION['Username']; 
```

然后你运行一个 if else 语句

```
if (!isset($_SESSION['Username']) || $_SESSION['Username'] == '')
{ echo "ERROR STATEMENT or Redirect back to first form";}
else
{ echo "your second form";} 
```

希望这可以帮助你

# ruby-on-rails-3 - 使用 Draper 将参数从 Rails 中的控制器传递给装饰器

> ID：12621452
> 
> 赞同：1
> 
> 时间：2012-09-27T12:31:18.477
> 
> 标签：ruby-on-rails-3, draper

我不知道如何将参数从控制器传递给装饰器：

装饰师：

```
def as_json(options = nil)
  {
   :name => user.name,
   :dob => user.dob
   :created_at => user.created_at,
   :url => user
  }
end 
```

控制器：

```
format.json { render :json => UserJsonDecorator.new(@user)} 
```

仅向新方法传递一个额外的参数是行不通的：

```
UserJsonDecorator.new(@user,options) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T23:39:53.913

我基本上是用错了。

传递附加参数的正确形式是：

```
UserJsonDecorator.new(@user).to_json(options) 
```

# ruby-on-rails - Rspec 存根操作变量

> ID：12621455
> 
> 赞同：2
> 
> 时间：2012-09-27T12:31:23.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

假设我有这个代码

```
class SomeController < ApplicationController
  def some_methode
    some_var = some_value
    render text: some_var
  end
end 
```

现在，在 Rspec 中，我想用不同的值测试控制器。
我如何`some_other_value`分配`some_var`？
我看着[存根](https://github.com/rspec/rspec-mocks)，但它不起作用。我试过：

```
assign(:some_var, some_other_value )
controller.some_methode.stub(some_var: some_other_value )
some_methode.stub(some_var: some_other_value )
controller.some_methode.stub!(some_var: some_other_value )
controller.some_methode.stub(:some_var).and_return(some_other_value ) 
```

它们都不起作用。`some_var`不会更改为`some_other_value`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:05:34.903

如果您想测试`some_var`分配了 value `some_value`，那么您可以使用`assigns`（我注意到不在您的列表中）：

```
it "assigns some_value to some_var" do
  get :some_method
  assigns(:some_var).should == some_value
end 
```

但是，如果您要做的是实际*覆盖*`some_value`to的分配`some_var`，那么我的建议是重新考虑（并可能重构）您的控制器代码。我不相信这在 rspec 中是可能的，但即使是这样，我也不认为在这里做正确的事情。

如果值`some_value`会发生变化，那么最好为它创建一个控制器方法并存根该方法。

例如，在您的控制器代码中创建一个方法`get_value`并分配`some_var`给它：

```
def some_method
  some_var = get_value
  render text: some_var
end

private

def get_value
  some_value
end 
```

`get_value`然后你可以在你的规范中存根：

```
it "does something when some_var is assigned value_to_test" do
  controller.stub(:get_value).and_return(value_to_test)
  get :some_method
  ... should ...
end 
```

另一方面，如果`some_value`来自`params`散列，那么您可以通过更改传递给 HTTP 操作调用的内容来控制它：

```
it "does something when passed value_to_test" do
  get :some_method, :some_var => value_to_test
  ... should ...
end 
```

这将设置`params[:some_var]`在`value_to_test`您的控制器操作中。

有关这方面的更多信息，另请参阅[此讨论](http://www.ruby-forum.com/topic/180028)（有点旧但相关）。

# c# - 从标准输入中获取字符串

> ID：12621457
> 
> 赞同：1
> 
> 时间：2012-09-27T12:31:29.240
> 
> 标签：c#, batch-file

我有一个名为“MyApp.exe”的命令行应用程序，我想像这样使用它：

```
DoSomething|MyApp.exe 
```

也就是说，`DoSomething`将字符串输出到标准输出，然后管道将其作为标准输入发送到 MyApp.exe。

如何在 MyApp.exe 中接受此字符串？

UPD。

如果我想测试这个怎么办？我正在使用公共方法来启动我的应用程序活动：

```
using (MyApp app = new MyApp())
{ 
 result = app.Run(args);
}
If(result!=0) Assert.Fail("Failed"); 
```

即我需要在执行 Run() 之前将一些数据写入输入流

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T12:33:18.803

您可以使用[Console.In](http://msdn.microsoft.com/en-us/library/system.console.in.aspx)访问标准输入。

或者`Console.ReadLine()`这只是`Console.In.ReadLine()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T06:27:15.393

`Console.ReadLine()` 用于读取输入

# java - String.format 查询

> ID：12621464
> 
> 赞同：1
> 
> 时间：2012-09-27T12:31:53.837
> 
> 标签：java, string, format

今天早些时候我在搞乱字符串和格式化，发现了一个 API 奇怪的地方。

通常当我格式化我使用的字符串时

```
String.format("mystr %s", 1); 
```

或类似的东西。

现在这个[静态方法](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)也可以被这个类的实例化对象访问。下面的代码显示了`String.format`静态使用和`format`直接从对象使用方法的结果。

```
@Test
public void test() {
    assertEquals("abc 123", String.format("abc %s", 123));
    assertEquals("abc 123", "abc".format("abc %s", 123));
    assertEquals("def 123", "abc".format("def %s", 123));
} 
```

最后一个 assertEquals() 基本上覆盖了我希望查看格式签名的第一个“abc”字符串。

我是否错过了使用实例化对象中的静态方法的一些时髦用法。还是因为静态 String.format() 也可以访问 String 的实例化对象，所以它只是可见的？换句话说，API 奇怪/错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:33:11.860

所有静态方法也可以在其类的实例上调用。

通常不建议使用此功能（许多工具会跟踪它），但这并不是真正的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:34:05.823

静态方法总是可以通过类实例（对象）访问，没有什么特别的`String.format`。

# printing - OpenLayers 打印地图

> ID：12621468
> 
> 赞同：3
> 
> 时间：2012-09-27T12:32:17.727
> 
> 标签：printing, map, openlayers, geoserver

如何从 OpenLayers 打印地图？我想在我的 OpenLayers 页面中添加打印按钮 =) 我的地理服务器有 MapFish 扩展，但不知道如何向它发出请求。欢迎任何其他想法）请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:30:36.847

我在使用反向代理时遇到了类似的问题，因为我发现 info.json 的答案包含本地 ip 引用而不是公共 url

为了残酷地解决，我用ajax请求中的公共url替换了ip referenze（参见下面的代码。我希望它对其他人有用......

```
this.capabilities.createURL = this.capabilities.createURL.replaceAll("192.168.0.0:8080", "mypublicurl");
this.capabilities.printURL= this.capabilities.printURL.replaceAll("192.168.0.0:8080", "mypublicurl");

Ext.Ajax.request({
    url:this.capabilities.createURL,
    jsonData:jsonData,
    success:function(response){
        response.responseText = response.responseText.replaceAll("192.168.0.0:8080", "mypublicurl");
        window.open(Ext.decode(response.responseText).getURL);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T08:14:02.487

最简单的方法是使用 GeoExt.PrintMapPanel（[geoext 示例](http://api.geoext.org/1.1/examples/print-preview-osm.html)）。并且一定要阅读[GeoServer Printing Module](http://docs.geoserver.org/latest/en/user/community/printing/index.html)。

**UPD** GET 请求示例。您必须修改 url、“baseURL”、“layers”。如果您指定现有层，则此请求必须返回 pdf 文件。

```
http://demo.opengeo.org/geoserver/pdf/print.pdf?spec={"units":"degrees","srs":"EPSG:4326","layout":"A4","dpi":75,"mapTitle":"Printing Demo","comment":"This is a simple map printed from GeoExt.","layers":[{"baseURL":"http://demo.opengeo.org/geoserver/wms","opacity":1,"singleTile":true,"type":"WMS","layers":["topp:tasmania_state_boundaries"],"format":"image/jpeg","styles":[""]}],"pages":[{"center":[146.56000000001,-41.56],"scale":8192000,"rotation":0}]} 
```

# sql-server-2008 - SQL Server：根据参数将存储过程结果插入表中

> ID：12621469
> 
> 赞同：9
> 
> 时间：2012-09-27T12:32:17.690
> 
> 标签：sql-server-2008

我有一个`Test_Sp`以这种方式返回数据的存储过程：

```
 Id  Name     Age   Address  State  Country
 1   ManiS    25     aaaa     bbb     ccc 
```

此存储过程返回 6 列数据，但我只想将前 2 列插入临时表。

我的临时表变量是：

```
Declare @testTbl Table (RowId int identity, Name nvarchar(100), Age int);
INSERT INTO @testTbl(Name,Age) EXEC [Test_Sp] 23;
Select * from @testTbl; 
```

但我得到这个错误：

> 消息 50000，级别 16，状态 0，过程 Test_Sp，第 16 行
> 不能在 INSERT-EXEC 语句中使用 ROLLBACK 语句。

我知道`Select * into`&如果我创建一个与存储过程输出具有相同列的临时表意味着它将起作用..

我的问题：是否可以根据参数从存储过程输出中仅将两列插入临时表变量？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T13:24:24.553

选项1：

使用 sp 返回的所有列创建一个中间临时表，然后执行以下操作：

```
INSERT INTO Temp
Exec [Test_Sp] 23; 
```

然后

```
INSERT INTO @testTbl(Name,Age)
select name,age from temp 
```

选项 2：

修改您的 sproc 并添加一个位数据类型参数 @limitedcolumn 如果 @limitedcolumn=true 则仅返回必需的列，否则返回所有列

```
INSERT INTO @testTbl(Name,Age) EXEC [Test_Sp] 23,true; 
```

# java - Java 在 if 语句处终止，退出值 0

> ID：12621478
> 
> 赞同：0
> 
> 时间：2012-09-27T12:32:42.867
> 
> 标签：java, bufferedreader, terminate, filewriter, stringreader

我有一个程序，它使用 while 循环（条件为）从文件（两行）中读取行`bufferedReader.readLine()!=null`，分配`myJSONObject`从文件中读取的 JSON，然后我有一个 if 语句（`if(bufferedReader.readLine()!=null&&!bufferedReader.readline.matches(DELETE_REGEX))`如果这是真的（即如果我们的行read 不为空，并且我们不匹配正则表达式）然后对 JSON 执行一些函数，该函数应该将该新 JSON 附加到文件中。

我在一些 try-catch 块中有这个。它看起来有点像这样：

```
try{
    openFiles;
    while(buff.readLine()!=null){
          try {
              instatiateAndUseJSONParser;
              if(bufferedReader.readLine()!=null
                    &&!bufferedReader.readline.matches(DELETE_REGEX)) 
              {doSomeStuff;}
              else
              {continue;}
          } catch (AllTheExceptions e){e.printStackTrace}
     }
     closeFiles;
}catch(SomeMoreExceptions e){e.printStackTrace} 
```

当我运行时，这是进入 iff 语句，然后以退出值终止：0（程序正常关闭）

为什么是这样？它不会靠近“继续”或捕获块。

如果我删除第二行，由于 String Reader 的第 50 行，我会得到一个 NullPointerException，但我没有使用`StringReader`（我尝试过导入它，但 eclipse 黄色下划线它并没有任何改变）。调试时，它会弹出一个选项卡`StringReader.<init>(String) line: 50`，只显示“找不到源”。

我对Java很陌生，所以我真的不知道发生了什么。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:38:37.873

每次`readLine()`调用时，它都会读取一个新行。因此，您可以在当前代码中每次迭代读取 3 行。您应该将第一次调用的结果分配给一个变量，并使用这个变量：

```
String line = null;
while ((line = buff.readLine()) !=null) {
    try {
        instatiateAndUseJSONParser;
        if (line.matches(DELETE_REGEX)) {
            doSomeStuff;
        }
    } 
    catch (AllTheExceptions e){
        throw new RuntimeException(e);
    }
} 
```

您还应该避免吞咽异常。

# wix - Wix：删除所有用户的本地应用数据

> ID：12621479
> 
> 赞同：2
> 
> 时间：2012-09-27T12:32:48.593
> 
> 标签：wix, wix3.6

在我的 wix 安装程序中，我需要在卸载期间删除应用程序为所有用户创建的所有应用程序数据。我可以为当前用户轻松删除它，但不能为所有用户删除。除了创建自定义操作之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:34:59.700

不，没有*简单*的方法可以为其他用户做到这一点。

您唯一能做的就是进入每个用户的个人资料并尝试删除那里的文件。这适用于本地用户。但是对于漫游配置文件用户，它不会像您期望的那样工作。

因此，应用程序在卸载时通常会将其内容留在用户配置文件中。

# iphone - 带有 iOS 6 和 Xcode 4.2 问题的 iPhone

> ID：12621481
> 
> 赞同：5
> 
> 时间：2012-09-27T12:32:54.443
> 
> 标签：iphone, xcode4.2, ios6

我已将我的 iPhone 升级到 iOS 6，但我目前使用的是 Xcode 4.2（在雪豹上）。现在我收到此错误消息：

> “xxx xxx”上的 iOS 版本与使用此 iOS SDK 安装支持开发的任何 iOS 版本不匹配。请将设备恢复到下面列出的 iOS 版本，或更新到最新版本的 iOS。

是否可以将我的 iPhone 恢复到旧版本，比如 5.1，或者如何让我的 Xcode 支持/识别 iOS6？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T12:53:36.000

我按照以下步骤通过使 Xcode 支持 iOS 6 来解决我的问题：

[1.首先从这里](https://developer.apple.com/downloads)下载 Xcode 4.5 .dmg 文件（您需要开发者帐户）。

2.然后安装此图像并使用上下文菜单中的“显示包内容”。

3.然后复制以下文件夹

> 内容/开发者/平台/iPhoneOS.platform/DeviceSupport/6.1 (10A403)

到您的 mac 的以下文件夹（此路径可能因 mac 的版本而异。`Snow Leopard`您可能会在下面的部分中找到该`Developer`文件夹​​，并且可能在 上，您必须右键单击并必须使用）：`Finder``PLACES``Lion``Xcode.app``Show Package Contents`

> 开发者/平台/iPhoneOS.platform/DeviceSupport

4\. 类似地从以下目录复制 iOS 6 SDK 文件夹：

> 内容/开发者/平台/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk

到你的 mac 的以下文件夹

> 开发者/平台/iPhoneOS.platform/Developer/SDKs

5.也`version.plist`从`Contents/Developer/Platforms/iPhoneOS.platform`文件夹复制到你的mac`Developer/Platforms/iPhoneOS.platform`文件夹。

6.重新启动 Xcode 并重新连接设备。

答对了 ！！现在 Xcode~~支持~~识别 iOS6 设备，甚至我能够在我的 iPhone 上使用 iOS6 运行和调试我的应用程序（为旧版 SDK 构建）（虽然我不确定 iPhone 6.0 模拟器）。

但是，答案`How to restore iPhone to older version say 5.1`仍然悬而未决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:21:41.620

您无法在 Xcode 4.2 中调试 iO6 设备。**iO6**设备仅在**Xcode 4.5（最新版本）**中调试。最重要的是**安装 Xcode 4.5**，在你的机器上必须**至少有 Lion 操作系统**。为了有效地调试 iOS 设备，你必须升级你的操作系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T05:55:33.150

我有完全相同的问题！

Apple 不再正式支持在 iPhone 中降级 iOS 6：

[https://discussions.apple.com/thread/4533316?start=0&tstart=0](https://discussions.apple.com/thread/4533316?start=0&tstart=0)

对我有用的是将 Lion 安装在外部 HD USB 中，将 Xcode 升级到最新版本，并在我的 Apple Developer 帐户中针对此环境升级 Provisioning Profiles。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-27T12:40:37.833

升级到 Xcode 4.5（和 OSX 山狮）。没有以前版本的 Xcode 支持 iOS 6。您还可以通过获取 .ipsw 文件并在 iTunes 上选择设备时单击“恢复”按钮来检查是否可以使用以前版本的 iOS 恢复手机。

# proxy - cloudfoundry vmc登录错误，代理后面的系统

> ID：12621485
> 
> 赞同：0
> 
> 时间：2012-09-27T12:33:07.743
> 
> 标签：proxy, cloud-foundry

当我在提供用户名和密码后尝试进行 vmc 登录时，出现以下错误。

登录“http://api.cloudfoundry.com”出现问题，连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。- 连接（2），重试或注册一个帐户。

但是 curl api.cloudfoundry.com/info 是成功的。即使从浏览器我也可以正常访问它。

我在环境变量中正确设置了 HTTP_PROXY 和 HTTPS_PROXY。

请在这方面帮助我，我应该检查什么？看起来 vmc 没有通过代理。

我已经在家里完成了 cloudfoundry 设置，一切都很顺利。但是当我尝试在办公室做同样的事情时。我正面临这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:47:11.650

验证是否正在使用代理的方法是添加`-t`选项：

`$ vmc login -t`

这将显示 HTTP 请求和响应标头。

# javascript - 加载 javascript 后加载 Mathjax

> ID：12621491
> 
> 赞同：2
> 
> 时间：2012-09-27T12:33:22.210
> 
> 标签：javascript, html, mathjax

这是我的简单`HTML`代码

```
<html>
<head>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
}
</script>
</head>
<body>
<p>This is the line that load correct  \[ \frac{x+y}{z} \]</p>
<p id="step1"></p>
<script>
var x = gup('x');
var y = gup('y');
var z = gup('z');
var text = "This is the line that NOT show correct" + "\[ \frac{" + x + " + " + y + "}{" + z +"}\]";
document.getElementById("step1").innerHTML= text;
</script>
</body>
</html> 
```

当我加载这个 html 文件并通过 url 发送参数时

```
sample.html?x=1&y=2&z=3 
```

第一句显示正确的形式和负载`Mathjax`，但第二句不是。这是因为`Mathjax`在 java 脚本代码之前加载。你知道`Mathjax`之后怎么加载`Javascript`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:42:40.610

您可以尝试使用带有回调的 JavaScript 加载器来加载 MathJax 并在回调中运行您的代码。例如，请参阅[https://github.com/niftylettuce/javascript-async-callback](https://github.com/niftylettuce/javascript-async-callback)。

编辑：

```
<html>
<head>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script>
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
}
</script>

<script>
$(function() {
  var x = gup('x');
  var y = gup('y');
  var z = gup('z');
  var text = "This is the line that NOT show correct <-- It's OK now" + "\\[ \\frac{" + x + " + " + y + "}{" + z +"} \\]";
  document.getElementById("step1").innerHTML= text;
});
</script

</head>
<body>
<p>This is the line that load correct  \[ \frac{x+y}{z} \]</p>
<p id="step1"></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T18:57:04.983

如果在 MathJax 运行后修改文档以添加数学，则需要告诉 MathJax 再次运行。你这样做使用

```
<script>
  MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
</script> 
```

有关详细信息，请参阅相关的[MathJax 文档](http://www.mathjax.org/docs/2.0/typeset.html)。

在您的情况下，应该这样做：

```
<script>
var x = gup('x');
var y = gup('y');
var z = gup('z');
var text = "This is the line that NOT show correct" + "\[ \frac{" + x + " + " + y + "}{" + z +"}\]";
document.getElementById("step1").innerHTML= text;
MathJax.Hub.Queue(["Typeset",MathJax.Hub,"step1"]);
</script> 
```

# android - 图像在模拟器中加载但不在设备上（Titanium Studio Android）

> ID：12621493
> 
> 赞同：1
> 
> 时间：2012-09-27T12:33:25.667
> 
> 标签：android, ios, imageview, emulation, titanium-mobile

我是 Titanium Studio 的新手。我将所有图像（png 格式）放在 Resources 文件夹（Resources\Images）内的 Images 目录中。

当我通过提及带有路径的图像名称来设置 ImageView 的图像时，如下所示，

```
var image = Ti.UI.createImageView({Image: 'Images/myimage.png', top: 20, height: 100, width: 100, left: 30}); 
```

我看到它在模拟器中运行良好，但在我的设备中却不行。当我在 Iphone Simulator 和 IPod touch 中测试相同的代码时，它运行良好。有谁能够帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:10:46.907

模拟器在文件名方面不区分大小写，但设备是 - 确保它与大小写无关。

# jquery - 使用 jQuery 在 html 中插入变量值

> ID：12621495
> 
> 赞同：0
> 
> 时间：2012-09-27T12:33:49.247
> 
> 标签：jquery

嗨，您如何使用 jQuery 在 html 中插入名称变量的值（在数据对象内）？

你能用jQuery实现这个吗？我的代码：

```
data = { // data object
    action: 'addMember',
    managerPassword: App.manager,
    name: $('#name_add').attr('value'),
    email: $('#email_add').attr('value')
};

$.ajax({
    url: App.URL_manager,
    data: data,
    dataType: 'json',
    type: 'POST',
    success: function(r) {
        if (r.success) {
            $('.add_staff').fadeOut(1000, function() {
                $('.success').find('#name').([INSERT VARIABLE HERE]);
                $('.success').fadeIn(1000);
            })
        }
        else {
            alert('you looser');
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:39:34.940

只需使用`.`来引用对象数据，您可以这样做`data.name`：

```
success: function(r){
    if (r.success) {
        $('.add_staff').fadeOut(1000, function(){
            $('.success').find('#name').html(data.name);
        $('.success').fadeIn(1000);
        })
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:36:38.833

```
$('.success').find('#name').html(data["name"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:39:58.753

设置属性

```
$('.success').find('#name').attr('disabled', 'disabled'); 
```

如果你删除喜欢

```
$('.success').find('#name').removeAttr('disabled'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:35:13.093

```
$('.success').find('#name').html(data); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-27T12:35:27.430

```
$('.success').find('#name').html( r.whatYouNeed ); 
```

# ios - Speex（在 ios 中）质量很差（和机器人）声音

> ID：12621500
> 
> 赞同：4
> 
> 时间：2012-09-27T12:34:11.040
> 
> 标签：ios, audiounit, speex

我正在尝试使用 speex 进行编码/解码，当我不这样做时，音频响亮而清晰，但是当我编码/解码以测试音频质量时，我得到的音频质量非常差，而且声音很机器人。

这是我的初始化音频方法：

```
#define AUDIO_QUALITY 10
- (void) initAudio {
    try {   
        //SPEEX CONFIG
        speex_bits_init(&bits_in);
        speex_bits_init(&bits_out);
        enc_state = speex_encoder_init(&speex_nb_mode);
        dec_state = speex_decoder_init(&speex_nb_mode);
        int quality = AUDIO_QUALITY;
        speex_encoder_ctl(enc_state, SPEEX_SET_QUALITY, &quality);
        int tmp=1;
        speex_decoder_ctl(dec_state, SPEEX_SET_ENH, &tmp);

        OSStatus status;

        XThrowIfError(AudioSessionInitialize(NULL, NULL, rioInterruptionListener, self), "couldn't initialize audio session");

        float aBufferLength = 0.02; // In seconds
        status = AudioSessionSetProperty(kAudioSessionProperty_PreferredHardwareIOBufferDuration,
                                         sizeof(aBufferLength), &aBufferLength);
        XThrowIfError(status, "");

        UInt32 audioCategory = kAudioSessionCategory_PlayAndRecord;
        XThrowIfError(AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(audioCategory), &audioCategory), "couldn't set audio category");
        XThrowIfError(AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, propListener, self), "couldn't set property listener");

        // Describe audio component
        AudioComponentDescription desc;
        desc.componentType = kAudioUnitType_Output;
        desc.componentSubType = kAudioUnitSubType_RemoteIO;
        desc.componentFlags = 0;
        desc.componentFlagsMask = 0;
        desc.componentManufacturer = kAudioUnitManufacturer_Apple;

        // Get component
        AudioComponent inputComponent = AudioComponentFindNext(NULL, &desc);

        // Get audio units
        status = AudioComponentInstanceNew(inputComponent, &rioUnit);
        XThrowIfError(status, "1");

        // Enable IO for recording
        UInt32 flag = 1;
        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioOutputUnitProperty_EnableIO, 
                                      kAudioUnitScope_Input, 
                                      kInputBus,
                                      &flag, 
                                      sizeof(flag));
        XThrowIfError(status, "2");

        // Enable IO for playback
        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioOutputUnitProperty_EnableIO, 
                                      kAudioUnitScope_Output, 
                                      kOutputBus,
                                      &flag, 
                                      sizeof(flag));
        XThrowIfError(status, "3");

        // Describe format
        AudioStreamBasicDescription audioFormat;
        audioFormat.mSampleRate         = 8000.00;
        audioFormat.mFormatID           = kAudioFormatLinearPCM;
        audioFormat.mFormatFlags        =   kAudioFormatFlagIsSignedInteger |
                                            kAudioFormatFlagsNativeEndian |
                                            kAudioFormatFlagIsPacked;
        audioFormat.mFramesPerPacket    = 1;
        audioFormat.mChannelsPerFrame   = 1;
        audioFormat.mBitsPerChannel     = 16;
        audioFormat.mBytesPerPacket     = 2;
        audioFormat.mBytesPerFrame      = 2;

        // Apply format
        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioUnitProperty_StreamFormat, 
                                      kAudioUnitScope_Output, 
                                      kInputBus, 
                                      &audioFormat, 
                                      sizeof(audioFormat));
        XThrowIfError(status, "");

        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioUnitProperty_StreamFormat, 
                                      kAudioUnitScope_Input, 
                                      kOutputBus, 
                                      &audioFormat, 
                                      sizeof(audioFormat));
        XThrowIfError(status, "");

        // Set input callback
        AURenderCallbackStruct callbackStruct;
        callbackStruct.inputProc = recordingCallback;
        callbackStruct.inputProcRefCon = self;
        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioOutputUnitProperty_SetInputCallback, 
                                      kAudioUnitScope_Global, 
                                      kInputBus, 
                                      &callbackStruct, 
                                      sizeof(callbackStruct));
        XThrowIfError(status, "");

        // Set output callback
        callbackStruct.inputProc = playingCallback;
        callbackStruct.inputProcRefCon = self;
        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioUnitProperty_SetRenderCallback, 
                                      kAudioUnitScope_Global, 
                                      kOutputBus,
                                      &callbackStruct, 
                                      sizeof(callbackStruct));
        XThrowIfError(status, "");

        // Disable buffer allocation for the recorder (optional - do this if we want to pass in our own)
        flag = 0;
        status = AudioUnitSetProperty(rioUnit, 
                                      kAudioUnitProperty_ShouldAllocateBuffer,
                                      kAudioUnitScope_Output, 
                                      kInputBus,
                                      &flag, 
                                      sizeof(flag));

        // Allocate our own buffers (1 channel, 16 bits per sample, thus 16 bits per frame, thus 2 bytes per frame).
        // Practice learns the buffers used contain 512 frames, if this changes it will be fixed in processAudio.
        tempBuffer.mNumberChannels = 1;
        tempBuffer.mDataByteSize = FRAME_SIZE * 2;
        tempBuffer.mData = malloc( FRAME_SIZE * 2 );

        XThrowIfError(AudioSessionSetActive(true), "couldn't set audio session active\n");

        // Initialise
        status = AudioUnitInitialize(rioUnit);
        XThrowIfError(status, "");

        status = AudioOutputUnitStart(rioUnit);
        XThrowIfError(status, "");
    }
    catch (CAXException &e) {
        NSLog(@"CAXException...");
    }
    catch (...) {
        fprintf(stderr, "An unknown error occurred\n");
    }
} 
```

我的 speex 编码和解码功能：

```
#define FRAME_SIZE 160
#define COMP_FRAME_SIZE 62
char* encodeSpeex(spx_int16_t *buffer, UInt32 inSize, int *encodedSize) {
    char *outputBuffer = (char *)malloc(COMP_FRAME_SIZE);

    speex_bits_reset(&bits_in);
    speex_encode_int(enc_state, buffer, &bits_in);
    *encodedSize = speex_bits_write(&bits_in, outputBuffer, FRAME_SIZE * 2);
    return outputBuffer;
}

short* decodeSpeex(char* buffer, int encodedSize, int decodedSize) {
    short *outTemp = (short *)calloc(1, FRAME_SIZE * 2);
    speex_bits_read_from(&bits_out, buffer, encodedSize * FRAME_SIZE * *2);
    speex_decode_int(dec_state, &bits_out, outTemp);
    return outTemp;
} 
```

最后，调用 speex 编码和解码的函数并将其复制到将由特定回调播放的缓冲区：

```
- (void) processAudio: (AudioBufferList*) bufferList
{
    AudioBuffer sourceBuffer = bufferList->mBuffers[0];

    NSLog(@"Origin size: %lu", sourceBuffer.mDataByteSize);
    int size = 0;
    char *encodedAudio = encodeSpeex((spx_int16_t*) sourceBuffer.mData, sourceBuffer.mDataByteSize, &size);
    NSLog(@"Encoded size: %i", size);
    short* decodedAudio = decodeSpeex(encodedAudio, size, sourceBuffer.mDataByteSize);
    free(encodedAudio);

    memcpy(tempBuffer.mData, decodedAudio, FRAME_SIZE * 2);
    free(decodedAudio);        
} 
```

任何人都会知道为什么我的质量如此差？根据网站上的 speex 示例，它不应该这样呈现......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:19:18.233

我也偶然发现了这个问题。我通过检查我的缓冲区实际上是否正确填充来解决它。否则，您会得到播放的空数据，从而产生机器人声音。

# asp.net - 为什么 jquery 在我的内容页面中不起作用

> ID：12621509
> 
> 赞同：0
> 
> 时间：2012-09-27T12:34:40.700
> 
> 标签：asp.net

为什么我的 jquery 函数在内容页面内不起作用，在我的母版页标题中，我调用了 jquery 函数代码：

```
<script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script>

<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.19.custom.css" rel="stylesheet" /> 
```

在我的内容页面中，我为我的 datetimepicker 赋值

源代码 ：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#<%=TextBox1.ClientID %>").datepicker();

    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:11:40.290

如果你使用的是 ASP.NET 4，你可以设置 ClientIDMode 属性，看[这里](http://www.codeproject.com/Articles/34151/ASP-NET-4-0-Client-ID-Feature)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:13:24.057

jQuery UI 依赖于 jQuery，意味着它使用了 jQuery 核心库函数

所以你需要包括喜欢

```
<script type="text/javascript" src="js/jQuery.js"></script>
<script type="text/javascript" src="js/jQueryUI.js"></script> 
```

还要放入调试器关键字并在快速查看中查看 $(document)。如果你能找到方法，那么你已经包含了 jQuery。如果你能找到 $.datepicker() 那么你也包含了 jQuery UI。第三步是检查 $("#<%=TextBox1.ClientID %>").size() > 0

```
<script type="text/javascript">
debugger;
$(document).ready(function() {
$("#<%=TextBox1.ClientID %>").datepicker();
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:37:42.250

您需要确保还包括 jQuery 库，而不仅仅是 jQuery-UI 库

```
<script type="text/javascript" src="js/jquery-version-number.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.19.custom.min.js"></script> 
```

# gdb - gdb 不会从外部架构中读取核心文件

> ID：12621511
> 
> 赞同：9
> 
> 时间：2012-09-27T12:34:46.777
> 
> 标签：gdb, arm, core-file

我正在尝试在我的 Linux 桌面上读取 ARM 核心文件，但它似乎无法找出我的核心文件。有什么方法可以指示 gdb 我的核心文件是什么类型的？

```
$ file ~/daemon
./daemon: ELF 32-bit LSB executable, ARM, version 1, dynamically linked (uses shared libs), for GNU/Linux 2.0.0, not stripped
$ file ~/core
./core: ELF 32-bit LSB core file ARM, version 1 (SYSV), SVR4-style, from './daemon -v -v -v -v -e 10 -t foo'
$ gdb-multiarch ~/daemon ~/core
GNU gdb (GDB) 7.5-ubuntu
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from ./daemon...done.
"./core" is not a core dump: File format is ambiguous
(gdb) core-file ~/core 
"./core" is not a core dump: File format is ambiguous 
```

根据“集合架构”列表，生成平台是 gdb-multiarch 声称支持的 armv4。

编辑：澄清一下，我运行 gdb 的台式机是“x86_64-linux-gnu”，即 64 位 Intel Ubuntu 机器。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-08T13:01:20.273

这可能会有所帮助：

```
$ gdb-multiarch
...
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
(gdb) set gnutarget elf32-littlearm
(gdb) file daemon
...
(gdb) target core core
...
(gdb) 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-27T14:42:55.253

*仅当您的桌面（您尝试运行 gdb-multiarch 的地方）是 x86 时，以下内容才相关。*

Gdb 是一个调试器。因此，它将无法在您的 x86 台式机上调试外部架构可执行文件，因为您无法在 x86 处理器上运行 arm 代码。但是，您可以使用将在 arm 机器上运行的 gdb-server 远程调试它。

你的桌面是arm还是x86？

# css - 灵活的布局以适应浏览器宽度

> ID：12621519
> 
> 赞同：0
> 
> 时间：2012-09-27T12:35:09.567
> 
> 标签：css, layout, html

我有 3 列的布局。我需要将左右 div 的宽度固定为像素，中间 div 应该根据浏览器宽度进行扩展。

参考图像

![在此处输入图像描述](../Images/d631802e27f83ee27a7bf1df7995be5e.png)

灰色和红色 div 的宽度以像素为单位固定，因此这两个应该始终位于浏览器的左右两侧，绿色 div 不应该有任何宽度，因为它应该根据浏览器宽度扩展。

这是我到目前为止尝试过的演示[http://jsfiddle.net/JvHZ7/](http://jsfiddle.net/JvHZ7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:14:56.530

试试这个jquery，

```
var left = $(".left").width();
var right = $(".right").width();
var main = $(".wrapper").width();
var setwidth = main - right - left;
$('.center').css("width", setwidth); 
```

这里的演示：[小提琴](http://jsfiddle.net/JvHZ7/6/)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:15:34.733

你可以检查这个：http: [//jsfiddle.net/SHnc9/1/](http://jsfiddle.net/SHnc9/1/)

这种技术被称为负列，如果您需要支持 IE7 及以下版本，则使用它。

考虑这个 HTML：

```
<div class = "container">
    <div class = "fixed first">
        I'm the first fixed
    </div>
    <div class = "fluid">
        I'm fluid!
    </div>
    <div class = "fixed last">        
        I'm the last fixed
    </div>
</div>
​ 
```

和 CSS

```
html, body {
    height: 100%;
    font-family: 'Arial', 'Helvetica', Sans-Serif;
}
.container {
    display: table;
    width: 100%;
    height: 100%;
}
.container > div {
    text-align: center;
    float:left;
}
.fixed {
    background: rgb(34, 177, 77);
    color: white;
    width:150px;
    position:relative;
}
.fluid {
    background: rgb(0, 162, 232);
    float:left;
    width:100%;
    margin-left:-150px;
    margin-right:-150px;
}
​ 
```

这种方法是跨浏览器的，不需要任何 hack，也不需要 JavaScript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:47:27.987

您可以使用 CSS 表格。这是一个演示：[小链接](http://jsfiddle.net/glee/SHnc9/)。基本大纲看起来像这样，HTML：

```
<div class = "container">
    <div class = "fixed">
        I'm 150px wide! Glee is awesome!
    </div>
    <div class = "fluid">
        I'm fluid! Glee is awesome!
    </div>
    <div class = "fixed">        
        I'm 150px wide! Glee is awesome!
    </div>
</div> 
```

CSS：

```
html, body {
    height: 100%;
}
.container {
    display: table;
    width: 100%;
    height: 100%;
}
.container > div {
    display: table-cell;
}
.fixed {
    width: 150px; /*or whatever you want*/
}
.fluid {
    /*yep, nothing*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:57:52.690

显示：表格；在 IE 7 中不兼容；

如果要使用 jquery，请执行以下操作。

```
var thisWidth = ($(window).width()) - 220 - 140;
$('.center').css("width", thisWidth);​ 
```

还要注意 height:100%; 无法用周围的 div 来固定高度。

# c# - 我需要克隆一个列表

> ID：12621523
> 
> 赞同：-1
> 
> 时间：2012-09-27T12:35:15.893
> 
> 标签：c#, list, clone

我有一个需要克隆的 originalDailyDetailReport 列表。其中的数据会在申请期间更改，但是当我打印最终报告时，我确实需要原始数据。

我虽然这段代码应该可以解决问题，但最后，我仅用于打印报告的 duplicateDailyDetailReport 列表已更改。

有任何想法吗？

```
 public DailyDetailReports SaveOriginalDailyDetailReportData(DailyDetailReports originalDailyDetailReport )
            {
                DailyDetailReports duplicateDailyDetailReport = new DailyDetailReports();

                try
                {
                    duplicateDailyDetailReport.Rec.AddRange(
originalDailyDetailReport.Rec.ConvertAll<Receivables>(rec => rec));

    duplicateDailyDetailReport.Dil.AddRange(
originalDailyDetailReport.Dil.ConvertAll<Dilution>(dil=> dil));

    duplicateDailyDetailReport.Acc.AddRange(
originalDailyDetailReport.Acc.ConvertAll<Accountable>(acc => acc));
                                duplicateDailyDetailReport.Out.AddRange(
originalDailyDetailReport.Out.ConvertAll<Outstanding>(o => o));
                                }
                                catch (Exception ex)
                                {
                                    MessageBox.Show(ex.Message);
                                }

                                return duplicateDailyDetailReport ;
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:37:42.370

您可以尝试以下操作，克隆每个项目并创建一个新列表。

```
var newList = yourlist.Select(r => r.Clone()).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:39:12.777

您需要遍历原始列表，制作**每个元素**的副本（其实例的副本，而不仅仅是引用的副本），然后将该副本添加到新列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:12:30.370

列表由对单个对象而非实际对象的引用组成。复制列表时，会创建一个新列表，该列表引用与旧列表相同的对象。您必须逐个字段深度复制对象并将其推送到列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T16:21:54.923

我自己做的。我用反射。

这是代码。无论好坏，它都有效。

```
public static DailyDetailReports CloneLists(DailyDetailReports listToClone)
        {
            DailyDetailReports clonedList = new DailyDetailReports();

            clonedList.Rec.AddRange(PerformTheCloning(listToClone.Rec));
            clonedList.Dil.AddRange(PerformTheCloning(listToClone.Dil));
            clonedList.Acc.AddRange(PerformTheCloning(listToClone.Acc));
            clonedList.Out.AddRange(PerformTheCloning(listToClone.Out));

            return clonedList;
        }

    public static List<T> ListCloning<T>(List<T> listToClone)
            {
                PropertyInfo[] listToCloneProperties = listToClone.GetType().GetGenericArguments().First().GetProperties();

                try
                {
                    List<T> clonedList = new List<T>();

                    foreach (object t in (IEnumerable<object>)listToClone)
                    {
                        object clonedListRecord = Activator.CreateInstance(typeof(T), null);

                        foreach (PropertyInfo t1 in listToCloneProperties)
                        {
                            PropertyInfo clonedListProperty =
                                clonedListRecord.GetType().GetProperties().FirstOrDefault(record=> record.Name == t1.Name);

                            if (clonedListProperty != null)
                                clonedListProperty.SetValue(clonedListRecord, t1.GetValue(t, null), null);
                        }

                        clonedList.Add((T)clonedListRecord);
                    }

                    return clonedList;
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }

                return null;
            } 
```

# javascript - 使用Javascript滚动页面时，带有xcode 4.5的ios6 UIWebview闪烁

> ID：12621524
> 
> 赞同：1
> 
> 时间：2012-09-27T12:35:15.737
> 
> 标签：javascript, jquery, uiwebview, ios6, xcode4.5

这个问题可以在 ios6 中使用 xcode 4.5 重现。如果您在 UIWebView 中加载网页，该网页使用 jquery scrollTop 或 window.scrollTo 或什至通过更改文档的哈希值在特定超时后滚动窗口/文档，则 UIWebView 将在开始滚动之前立即显示其背景。这是一个（[JS fiddle](http://jsfiddle.net/nitinbizsingh/QuLkW/)），如果您在使用 xcode 4.5 构建的 UIWebView 中打开将导致上述效果。

但是，当您滚动可滚动的 div 时，这不会发生。

有人在使用新的 xcode 时遇到过这个问题吗？有什么建议/修复吗？

# python - 如何比较python opencv2.4中的冲浪功能

> ID：12621535
> 
> 赞同：4
> 
> 时间：2012-09-27T12:35:44.790
> 
> 标签：python, opencv

我有两个图像，我想使用 python 和 opencv 进行比较。

我从这本书中了解了如何从单个图像中提取冲浪特征：Programming Computer Vision with Python。

我提取的特征如下：

```
import cv2
from numpy import *

# read image
im = cv2.imread('empire.jpg')

# downsample
im_lowres = cv2.pyrDown(im)

# convert to grayscale
gray = cv2.cvtColor(im_lowres,cv2.COLOR_RGB2GRAY)

# detect feature points
s = cv2.SURF()
mask = uint8(ones(gray.shape))

keypoints = s.detect(gray,mask)

# show image and points
vis = cv2.cvtColor(gray,cv2.COLOR_GRAY2BGR)
for k in keypoints[::10]:
    cv2.circle(vis,(int(k.pt[0]),int(k.pt[1])),2,(0,255,0),-1)
    cv2.circle(vis,(int(k.pt[0]),int(k.pt[1])),int(k.size),(0,255,0),2)

cv2.imshow('local descriptors',vis)
cv2.waitKey() 
```

现在我如何将关键点与来自参考图像的另一组关键点进行比较？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T13:32:58.557

Python OpenCV 有一个 FLANN 实现，我自己用过，效果很好。最初很难弄清楚，但[这个问题](https://stackoverflow.com/questions/8301962/opencv-pythons-api-flannbasedmatcher/8311498#8311498)对我帮助很大，请参阅[Esteban Angee 的](https://stackoverflow.com/users/1053925/esteban-angee)回答。

你也可以看看我对[这个问题](https://stackoverflow.com/questions/12508934/error-using-knnmatch-with-opencvpython/12517147#12517147)的回答，我在这里快速解释了代码。我在这里重复解释。

```
r_threshold = 0.6
FLANN_INDEX_KDTREE = 1  # bug: flann enums are missing 
```

构建你的参数字典：

```
flann_params = dict(algorithm = FLANN_INDEX_KDTREE, trees = 4)
flann = cv2.flann_Index(desc2, flann_params) 
```

执行最近邻搜索：

```
idx2, dist = flann.knnSearch(desc1, 2, params = {}) # bug: need to provide empty dict
mask = dist[:,0] / dist[:,1] < r_threshold
idx1 = np.arange(len(desc1))
pairs = np.int32( zip(idx1, idx2[:,0]) ) 
```

返回匹配的描述符：

```
return pairs[mask] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:48:21.660

匹配 SURF 描述符通常使用 k-最近邻（k=2）完成。当然，对于 C++，OpenCV 有一个内置类来执行此操作 - 快速近似最近邻描述符匹配器（[FLANN_matcher](http://opencv.itseez.com/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html?highlight=flann)），尽管我似乎找不到任何 Python 版本的文档。大概挖一下，看看能不能找到？

如果您最终需要从头开始执行此操作，[这篇文章](https://stackoverflow.com/questions/10984313/opencv-2-4-1-computing-surf-descriptors-in-python)有一个很好的代码示例 using `cv2.KNearest`，这绝对是 Python 版本。

# wxpython - 如何使 wxpython PropertyGrid DirProperty 在 osx 上提供新文件夹

> ID：12621548
> 
> 赞同：0
> 
> 时间：2012-09-27T12:36:45.820
> 
> 标签：wxpython

使用 wxpython，我用 wxpg.DirPropery 元素实例化一个 wxpg.PropertyGrid：

```
#http://wxpropgrid.sourceforge.net/cgi-bin/index
import wx.propgrid as wxpg

#...

    this_backup = wxpg.PropertyGrid(self._mainDisplay, wx.NewId(), 
                                    style = wxpg.PG_SPLITTER_AUTO_CENTER) 
    this_backup.Bind( wxpg.EVT_PG_CHANGED, self.OnBackupGridChange )

    this_backup.Append( wxpg.DirProperty("Backup Root",value=backup['Backup Root'])) 
```

在 Windows 下，当此代码运行并且我按下 dir 属性条目的“浏览”省略号时，我会看到一个对话框，允许我创建一个新目录作为选择。

但是，在 osx 10.8.2 下，似乎无法在同一个对话框中创建新目录。

我如何说服 osx 使用对话框来选择提供“新文件夹”作为选项之一的目录选择？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:37:17.580

它在 wxPython 演示中有效吗？查看演示代码，看起来它重写了 OnEvent 方法以显示 wx.DirDialog。如果这不起作用，那么 Mac 的本机对话框可能不允许该功能。

当然，由于您要覆盖事件，因此您可以使用您选择的任何对话框，因此您可以改用 MultiDirDialog (wx.lib.agw.multidirdialog)。这是一个纯 Python 小部件，所以它应该可以工作。

编辑（2012 年 10 月 15 日）：

在我的 wxPython 2.9 Demo 中，我有以下事件处理程序：

```
def OnEvent(self, propgrid, primaryEditor, event):
    if event.GetEventType() == wx.wxEVT_COMMAND_BUTTON_CLICKED:
        dlg = wx.DirDialog(propgrid,
                           _("Select a directory to be added to "
                             "the list:"))

        if dlg.ShowModal() == wx.ID_OK:
            new_path = dlg.GetPath()
            old_value = self.m_value
            if old_value:
                new_value = list(old_value)
                new_value.append(new_path)
            else:
                new_value = [new_path]
            self.SetValueInEvent(new_value)
            retval = True
        else:
            retval = False

        dlg.Destroy()
        return retval

    return False 
```

对我来说，这看起来像是演示创建者摆脱了 OnEvent 方法。

# jquery - 手风琴 - 不想让第一个单元格处于活动状态

> ID：12621550
> 
> 赞同：0
> 
> 时间：2012-09-27T12:36:51.237
> 
> 标签：jquery, html, jquery-ui, accordion, jquery-ui-accordion

好吧，我正在使用[**jQuery 手风琴**](http://jqueryui.com/demos/accordion/#no-auto-height)。以下是我所拥有的

```
$(document).ready(function(){
    $("#accordion001").accordion({
        collapsible: true,
        autoHeight: false,
        navigation: true
    });
}); 
```

问题是它总是默认显示第一个链接数据。

```
+++++++++++++++++++++++++++++++++++++++
+   Link 1                            +
+     Link 1 line 1                   +
+     Link 1 line 2                   +
+     Link 1 line 3                   +
+   Link 2                            +
+   Link 3                            +
+   Link 4                            +
+++++++++++++++++++++++++++++++++++++++ 
```

我不想显示第一个链接数据。我只想显示所有可用的链接，如下所示。

```
+++++++++++++++++++++++++++++++++++++++
+   Link 1                            +
+   Link 2                            +
+   Link 3                            +
+   Link 4                            +
+++++++++++++++++++++++++++++++++++++++ 
```

可行吗？我需要写什么选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:40:25.493

```
$("#accordion001").accordion({
        collapsible: true,
        autoHeight: false,
        navigation: true,
        active:false,
    }); 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:39:18.060

$( "#accordion001" ).accordion( "option", "active", 2 );

它将在加载时打开。

# pcap - 使用 libpcap Mac 查找活动的 Internet 连接

> ID：12621552
> 
> 赞同：0
> 
> 时间：2012-09-27T12:36:53.287
> 
> 标签：pcap, libpcap, internet-connection

我正在尝试使用 pcaplib 监视当前活动 Internet 连接的数据包。但我不确定如何找到当前活动的互联网连接。我知道`pcap_findalldevs()`会返回可用网络设备的列表。但用户可能会使用 en0、en1 甚至是 VPN 连接。我想知道如何找到当前的互联网连接以及如何在它发生变化时收到通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:45:58.503

OS X（或许多其他操作系统）中没有任何内容明确指示哪个接口是“当前的 Internet 连接”。

最接近的是默认路由的接口；有代码可以做到这一点，但它有点复杂。

在大多数情况下（如果不是所有情况）可能会给出正确答案的一种更简单的方法是获取`pcap_findalldevs()`并查找具有 AF_INET 或 AF_INET6 地址的第一个接口（不要只查找具有*任何*地址，如在 OS X 和 *BSD 中，可能包括链路层地址）并且没有设置 PCAP_IF_LOOPBACK。

# c# - c#/oracle：打开/关闭连接

> ID：12621553
> 
> 赞同：1
> 
> 时间：2012-09-27T12:36:56.483
> 
> 标签：c#, winforms, oracle

我需要有关数据库连接和我的 winapp 的帮助。

我有一个 Windows 应用程序 (C#)，在我登录后，它开始在 Oracle 数据库中运行 5 或 6 个不同的查询，每 5-10 秒。应用程序是 24/7。

这样做的正确方法是什么？我应该在登录期间打开连接并且在关闭应用程序之前永远不要关闭它，还是应该在每次运行查询时打开和关闭连接？例如：

```
//first query
conn.Open();
DataSet ds1 = new DataSet();

string sql = "SELECT * FROM table1";

OracleCommand cmd = new OracleCommand(sql, conn);
cmd.CommandType = CommandType.Text;
OracleDataAdapter da = new OracleDataAdapter(cmd);
da.Fill(ds1, "Result1");
conn.Dispose();

return ds1; 
```

* * *

```
//second query    
conn.Open();
DataSet ds2 = new DataSet();

string sql = "SELECT * FROM table2";

OracleCommand cmd = new OracleCommand(sql, conn);
cmd.CommandType = CommandType.Text;
OracleDataAdapter da = new OracleDataAdapter(cmd);
da.Fill(ds2, "Result2");
conn.Dispose();

return ds2; 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:42:38.280

您在应用程序中使用的 Oracle OleDB 提供程序实现了池。因此，当您创建和关闭连接时，您只需从“真实连接”池中获取/释放连接。

这使得创建和处理 Connection 对象成为一项非常便宜的操作。如果我是你，我会打开一个连接，执行我的一批查询，并在我完成并进入睡眠状态（即使是几秒钟）后立即关闭+释放该连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:41:44.957

当然，另一种选择是为每个“批次”查询设置一个连接

但是，如果您经常访问数据库，那么听起来您需要在应用程序期间建立永久连接。

我当然假设您的示例只是示例，您实际上并没有使用原始 SQL 访问数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:45:55.397

我建议您使用`using`block 来`clean``non managed object`

```
using(var connection = new OracleConnection("..."))
{
 .....

} 
```

注意：在处理结束时对您的对象使用执行处置

链接： http: [//msdn.microsoft.com/fr-fr/library/yh598w02 (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/yh598w02(v=vs.80).aspx)

# asp.net - 由 ASP.Net 应用程序返回的 Flash 内容在 IE 9 上不显示

> ID：12621554
> 
> 赞同：1
> 
> 时间：2012-09-27T12:36:57.420
> 
> 标签：asp.net, flash

我有 ASP.Net 应用程序，它具有 ASHX 处理程序来为某些请求返回“应用程序/x-shockwave-flash”的内容类型。

当我尝试在本地服务器上测试应用程序时，IE 不显示任何内容，但是当我使用 Chrome 尝试它时，它运行良好。

本地 Internet 区域的安全设置是默认设置，高级设置也是默认设置。

我有 Adob​​e Flash Player 11 ActiveX

这是我的代码：

```
HttpResponse response = context.Response;

response.Clear(); 

context.Response.ContentType = "application/x-shockwave-flash";

byte[] buffer = BlobStorageService.DownloadByteArray("MyContainer","8_L001_1.swf");

System.IO.MemoryStream ms = new System.IO.MemoryStream(buffer);
ms.WriteTo(response.OutputStream);

ms.Close();
response.End(); 
```

可能是什么问题呢？

# php - 在 php 中连接到 mysql 时，query_id 没有返回任何内容

> ID：12621556
> 
> 赞同：1
> 
> 时间：2012-09-27T12:37:02.287
> 
> 标签：php, mysql

我的查询是：

```
$sqlCommand="select `ID` from `freecomputermarket`.`members` where `UserName`='$this->_userName';"; 
```

我将 XAMPP 用作 apache 服务器，我正在使用端口 (89)

这个类负责数据库连接：

```
<?php
class MySql
{
    private $_link_Id,$_query_Id,$_serverName,$_userName,$_password,$_dbName,$_rowNum;

    public function __construct()
    {
       $this->_serverName="localhost";
       $this->_userName="root";
       $this->_password="";
       $this->_dbName="freecomputermarket";
    }
    public function connect()
    {
       $this->_link_Id=mysql_connect($this->_serverName,$this->_userName,$this->_password);
       if(!$this->_link_Id)
       {
          exit("The Connect is Failed");
       }
       $db_select=mysql_select_db($this->_dbName,$this->_link_Id);
       if(!$db_select)
       {
          exit("Can't Select DataBase");
       }
    }
    public function query($sqlcommand)
    {
       $sqlcommand= addslashes($sqlcommand);
       //echo $sqlcommand;
       $this->_query_Id=mysql_query($sqlcommand,$this->_link_Id);
       exit($this->_query_Id);//print it to check if it is available.
       if(!$this->_query_Id)
          exit("Query failed");
       $this->_rowNum=mysql_affected_rows();
    }
    public function getRow()
    {
       if($this->_rowNum)
       {
          return mysql_fetch_assoc($this->_query_Id);
       }
    }
    public function getAllRows()
    {
       $arr=array();
       $count=0;
       while($count<$this->_rowNum)
       {
          array_push($arr,$this->GetRow());
          $count++;
       }
       return $arr;
    }
    public function getAffectedRowsNumber()
    {
       return $this->_rowNum;
    }
}   
?> 
```

此代码用于连接到 mysql dbms 并执行查询。打印 $_link_Id 时，它有一个值。 **打印 $_query_Id 时，它什么都没有？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:12:25.253

问题在于您没有在范围内启动连接的公共函数查询（$sqlcommand）。你应该在函数查询($sqlcommand) 中启动 connect()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:09:16.347

```
<?php
class MySql
{
    private $_link_Id,$_query_Id,$_serverName,$_userName,$_password,$_dbName,$_rowNum;

    public function __construct()
    {
        $this->_serverName="localhost";
        $this->_userName="root";
        $this->_password="";
        $this->_dbName="freecomputermarket";
    }
    public function connect()
    {
        $this->_link_Id=mysql_connect($this->_serverName,$this->_userName,$this->_password);
        if(!$this->_link_Id)
        {
                                                exit("The Connect is Failed");
        }
        $db_select=mysql_select_db($this->_dbName,$this->_link_Id);
        if(!$db_select)
        {
                                                exit("Can't Select DataBase");
        }
    }
    public function query($sqlcommand)
    {
                                        // $sqlcommand= addslashes($sqlcommand);
                                          //echo $sqlcommand;
        $this->_query_Id=mysql_query($sqlcommand,$this->_link_Id);
                                          exit($this->_query_Id);//print it to check if it is available.
        if(!$this->_query_Id)
                                                exit("Query failed");
        $this->_rowNum=mysql_affected_rows();
    }
    public function getRow()
    {
        if($this->_rowNum)
        {
                                                return mysql_fetch_assoc($this->_query_Id);
        }
    }
    public function getAllRows()
    {
        $arr=array();
        $count=0;
        while($count<$this->_rowNum)
        {
                                                array_push($arr,$this->GetRow());
                                                $count++;
        }
        return $arr;
    }
                    public function getAffectedRowsNumber()
                    {
                        return $this->_rowNum;
                    }
}   
?> 
```

addlashes() 函数是问题所在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:39:24.307

问题就在这里

```
$sqlcommand= addslashes($sqlcommand); 
```

不要使用加斜线。

像这样使用

```
//$sqlcommand= addslashes($sqlcommand);
$this->_query_Id=mysql_query($sqlcommand,$this->_link_Id); 
```

# java - 我必须从 java 程序中调用 .sql 文件

> ID：12621558
> 
> 赞同：2
> 
> 时间：2012-09-27T12:37:10.230
> 
> 标签：java, sql

我必须从 java 程序中调用 .sql 文件。

SQL 文件有一些帐号，下面是一个选择查询。应该对选择查询上方存在的所有帐号执行选择查询。

如果上述要求有任何示例代码，请提供给我。这可能吗？
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:42:02.700

没有标准框架可以做到这一点；您将不得不使用[Java IO](http://tutorials.jenkov.com/java-io/index.html)来读取文件、解析内容，然后使用[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/index.html)来执行 SQL 查询。

由于 JDBC 有时使用起来有点奇怪/无聊，您可能想看看一个让您的生活更轻松的框架。我建议[jOOQ](http://www.jooq.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:42:37.473

SQL 文件不是“可调用的”。如果您有数据库连接，则可以在数据库上以这种方式执行它。

因此，您的 java 应用程序必须连接到数据库，然后执行 SQL 脚本。您应该阅读一些有关 JDBC 连接的内容，这里有一个教程：[http ://docs.oracle.com/javase/tutorial/jdbc/TOC.html](http://docs.oracle.com/javase/tutorial/jdbc/TOC.html)

# jakarta-ee - @Singleton bean 初始化失败，因为不是预期的事务状态

> ID：12621559
> 
> 赞同：3
> 
> 时间：2012-09-27T12:37:11.793
> 
> 标签：jakarta-ee, transactions, weblogic

我有一个场景，我需要在应用程序启动时加载一个 bean (ReportManager)，以便它可以安排执行报告（由 DataStore bean 从数据库轮询）。

谷歌搜索我发现了@Singleton、@Startup 和@DependsOn 注释，我使用过这样的注释：

```
@Singleton
@Startup
@DependsOn("DataStore")
public class ReportManager {
    @EJB
    DataStore dataStore;

    @PostConstruct
    public void scheduleReports() {
       logger.log("INITIALIZED");
       List<Report> reports = dataStore.getReports();
       ....
    }
}

@Singleton
@RolesAllowed("user") //I had security checks implemented like that beforehand
public class DataStore {
    @PostConstruct
    public void initialize() {
        logger.log("INITIALIZED");
    }

    public List<Report> getReports() {
        ...
    }
} 
```

问题是我在部署期间遇到了非常奇怪的异常：

```
<2012-09-27 14:04:15 CEST> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application "app".>
<2012-09-27 14:04:15 CEST> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: Exception starting module: EJBModule(app-ejb-1.0-SNAPSHOT.jar)

Unable to deploy EJB: ReportManager from app-ejb-1.0-SNAPSHOT.jar:

Singleton ReportManager(Application: app, EJBComponent: app-ejb-1.0-SNAPSHOT.jar) failed to initialize.

   at weblogic.ejb.container.deployer.EJBModule.start(EJBModule.java:592)
 .....

Caused By: weblogic.ejb.container.InternalException: Transaction marked rollback or not expected transaction status: 1
   at weblogic.ejb.container.manager.SingletonSessionManager.postCallback(SingletonSessionManager.java:464) 
```

不是真正有用的异常消息。特别是我也没有得到任何“初始化”日志条目。当我注释掉 dataStore.getReports() 调用时，一切正常，bean 以正确的顺序构造（产生了“INITIALIZED”消息）。包括 dataStore 方法调用导致了上述错误，并且以某种方式抑制了所有日志输出。

我正在使用 Weblogic 12c。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:38:34.853

最后，我弄清楚了导致错误的原因。这是`@RolesAllowed`由于空的安全上下文而阻塞方法调用的声明，`@PostConstruct`在 bean 中执行时未在方法中设置`@Startup`（来自[EJB 3.1 规范，第 4.3.4 章](http://download.oracle.com/otndocs/jcp/ejb-3.1-pfd-oth-JSpec/)：PostConstruct 生命周期回调拦截器方法在未指定的安全上下文中执行。） .

使它工作所需的只是添加`@PermitAll`到调用的方法中：

```
@PermitAll
public List<Report> getReports() {
   ...
} 
```

这个错误太令人误解了，我决定把这个案例放在这里，因为我无法用谷歌搜索答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T13:32:48.083

就我而言，我使用的是 SpringLoader.java 类，它是一个加载 Spring 配置的 @Singleton。Spring 配置了 Quartz 调度程序，该调度程序正在尝试访问其 DB 表（作为某些事务的一部分）。

所以在我的例子中，它有助于在这个 SpringLoader 类中添加以下行：@TransactionManagement(TransactionManagementType.BEAN)

之后，会显示一些更有意义的错误消息：ORA-00942：表或视图不存在。

顺便说一句：它也值得添加这一行：@ConcurrencyManagement(ConcurrencyManagementType.BEAN)

# c++ - 从 int16_t 转换为 uint32_t

> ID：12621563
> 
> 赞同：4
> 
> 时间：2012-09-27T12:37:23.770
> 
> 标签：c++, c

```
int16_t s;
uint32_t ui = s; 
```

将值转换为`int16_t`值`uint32_t`编译器的结果是否取决于？如果不是，规则是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T12:44:21.563

结果明确；非负值保持不变，负值以 2^32 为模减少。但是需要**精确**大小的类型`int16_t`的情况`uint32_t`很少见。`int`除了和这里真的不需要任何东西`unsigned long`：这些类型**至少有**和和一样多的位，`int16_t`与and`uint32_t`不同，它们**必须存在**于任何符合要求的实现中。如果你真的想要性感的新尺寸类型，至少要使用 和 的便携性。`int16_t``uint32_t`**`int_least16_t``uint_least32_t`**

# javascript - 验证javascript中的单选按钮列表

> ID：12621566
> 
> 赞同：0
> 
> 时间：2012-09-27T12:37:28.270
> 
> 标签：javascript, validation, list, button, radio

```
 <asp:RadioButtonList ID="rblradio" runat="server">

        <asp:ListItem Value="M" Text="Male"></asp:ListItem>

        <asp:ListItem Value="F" Text="Female"></asp:ListItem>

    </asp:RadioButtonList> 
```

如何在 javascript 中验证此单选按钮列表我正在做这个事件，如果我

选择了它说未选择的任何选项

```
function ValidateAccessLevel() {

        var AccessLevelIndexValue = document.getElementById('<%=rblradio.ClientID%>');

         if (AccessLevelIndexValue.checked)
         {
            return false;

            }

        else
        {
            return true;
        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:44:21.110

由于您已经在使用 ASP RadioButtonList 来呈现单选按钮，我建议坚持使用 ASP 框架并使用 ASP RequiredFieldValidator 来使单选按钮成为必需。

```
<asp:RequiredFieldValidator 
    id="radioValidator 
    runat="server" 
    ControlToValidate="rblradio"
    Display="Dynamic">
    *
</asp:RequiredFieldValidator> 
```

[如何在 aspnet 中为单选按钮使用 requiredfieldvalidator](http://www.itjungles.com/net-controls/how-to-use-requiredfieldvalidator-for-radio-button-in-asp-net)

# jquery - 即使选中了我的单选按钮，该字段也未启用

> ID：12621573
> 
> 赞同：0
> 
> 时间：2012-09-27T12:37:50.350
> 
> 标签：jquery

我必须元素单选按钮和文本字段：

```
<label><input id="GRP010" type="RADIO" value ="900">Radio button</label>
    <input id="AF92" maxlength="254" size="15" name="AF92"> 
```

我想使用 jquery 来禁用文本字段，但是在选中单选按钮并且值相等时启用它。

到目前为止，我已经写了这个：

```
$(document).ready(function(){

    var value2 = $('input:radio[name="GRP010"]').val();
    var checked2 = $('input:radio[name="GRP010"]').is(':checked');

    if (checked2 == true && value2 == '900') {
        $("#AF92").attr("enabled", "enabled");
    } else {
        $("#AF92").attr("disabled", "disabled"); 
    }
}); 
```

但是，如果我选择单选按钮，文本字段将被禁用且未启用。我该如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:40:08.037

没有属性称为`enabled`它只是禁用，使用它来做到这一点

```
$("#AF92").attr("disabled","disabled"); // will disable
$("#AF92").removeAttr("disabled"); // to enable 
```

你还有其他问题。首先，您试图通过`name="GRP010`不存在的错误属性来定位您的输入，因为您有一个 id 只是使用它。此外，一旦单选按钮更改，您没有事件处理程序来更改输入的状态，请参阅 live [fiddle](http://jsfiddle.net/yyTmm/)

此外，最好将输入启动为禁用。

这是事件处理程序

```
$('#GRP010').on('change', function(){
var checked = this.checked;

    if(checked && value2 == '900')
        $("#AF92").removeAttr("disabled");
    else
        $("#AF92").attr("disabled","disabled");
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:56:32.647

利用

```
$(document).ready(function(){
    var value2 = $("#GRP010").val();
    var checked2 = $("#GRP010").is(':checked');

if (checked2 == true && value2 == '900')
   {
     $("#AF92").attr('readonly', false);
   }
else {
        $("#AF92").attr('readonly', true);

    }

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:40:18.883

要再次启用它，请使用：

```
$("#AF92").removeAttr("disabled") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:41:38.613

该函数已绑定，`ready`因此仅在启动时检查。您需要在单击单选按钮时绑定以再次检查以启用禁用。

里面的文件准备写。

```
$(".radioclass").click(function(){
    if ($('#GRP010').val()) { //you actually don't need double check
        $("#AF92").removeAttr("disabled");
    } else {
       $("#AF92").attr("disabled",true);
    }
}); 
```

`radioclass`为所有单选按钮提供通用类，或为这些单选按钮使用您的首选选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:48:21.667

用这个

```
<label><input id="GRP010" type="checkbox" value ="900">CheckBox</label>
<input id="AF92" maxlength="254" size="15" name="AF92"> 
```

和jQuery

```
$(document).ready(function(){
    $('#GRP010').on('change', function(){
        if($('#GRP010').is(':checked') && $('#GRP010').val()== '900')
            $("#AF92").removeAttr("disabled");
        else  
            $("#AF92").attr("disabled","disabled");
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T12:49:28.267

您正在使用的选择器正在寻找一个`radio`具有`name`属性的按钮`GRP010`- 它没有。由于您有 ID，只需将其用作选择器：`$('#GRP010')`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T12:54:44.783

从 1.6 开始，您可以使用[`.prop()`](http://api.jquery.com/prop/)

```
$(function(){
    var radio = $('#GRP010'),
        txtInput = $('#AF92');

    var changeState = function()
    {
        txtInput.prop("disabled", radio.is(':checked') && radio.val() == '900');
    };
    changeState ();

    radio.change(changeState);
}); 
```

演示：http: [//jsfiddle.net/TqXE9/](http://jsfiddle.net/TqXE9/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-27T12:46:43.540

你应该处理单选按钮更改事件

```
$("#GRP010").bind('change', handler);

function handler(){
  var value2 = $('input:radio[name="GRP010"]').val();
        var checked2 = $('input:radio[name="GRP010"]').is(':checked');

 if (checked2 == true && value2 == '900')
       {
         $("#AF92").attr("enabled","enabled");
       }
 else {
            $("#AF92").removeAttr("disabled"); 

        }

} 
```

它对你有用。

# wpf - 在 ToolTip 中显示 DataGrid-ValidtionError

> ID：12621574
> 
> 赞同：2
> 
> 时间：2012-09-27T12:37:55.830
> 
> 标签：wpf, validation, datagrid, tooltip

我正在使用 DataGrid 来显示和编辑数据。视图（数据网格）绑定到视图模型。不，我添加了一个自定义 ValidationRule（按照本教程：http: [//blogs.u2u.be/diederik/post/2009/09/30/Validation-in-a-WPF-DataGrid.aspx](http://blogs.u2u.be/diederik/post/2009/09/30/Validation-in-a-WPF-DataGrid.aspx)）

```
namespace Presentation.ViewsRoot.ValidationRules
{
    class IsPositiveIntegerRule : ValidationRule
    {
        public override ValidationResult Validate(object value, System.Globalization.CultureInfo cultureInfo)
        {
            if (string.IsNullOrEmpty(value as string))
            {
                return new ValidationResult(true, null);
            }
            else
            {
                int proposedValue;

                if (!int.TryParse(value.ToString(), out proposedValue))
                {
                    return new ValidationResult(false, "'" + value.ToString() + "' ist no positive integer (>=0).");
                }

                if (proposedValue < 0)
                {
                    // Something was wrong.
                    return new ValidationResult(false, "Value can't be smaller than 0.");
                }
            }

            // Everything OK.
            return new ValidationResult(true, null);
        }
    }
} 
```

我在 xaml 中绑定到这个验证规则

```
<DataGridTextColumn Header="Shitfs" IsReadOnly="False">
   <DataGridTextColumn.Binding>
       <Binding Path="Shifts">
          <Binding.ValidationRules>
             <validationRules:IsPositiveIntegerRule />
          </Binding.ValidationRules>
       </Binding>
   </DataGridTextColumn.Binding>
</DataGridTextColumn> 
```

输入错误值时，单元格会出现红色边框，并且行标题显示红色感叹号 (!)。但是没有显示带有消息的工具提示。我尝试在其中添加自定义样式，`UserControl.Resources`但没有奏效：

```
<Style TargetType="TextBlock">
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip"
               Value="{Binding RelativeSource={x:Static RelativeSource.Self},
                  Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

关于如何在数据网格的工具提示中显示错误内容的任何想法？我想我错过了一些重要的东西，但我找不到什么......

**工作解决方案：**

```
<Style x:Key="CellEditStyle" TargetType="TextBox">
   <Style.Triggers>
       <Trigger Property="Validation.HasError" Value="true">
           <Setter Property="ToolTip"
                   Value="{Binding RelativeSource={RelativeSource Self},
                   Path=(Validation.Errors)[0].ErrorContent}"/>
       </Trigger>
   </Style.Triggers>
</Style> 
```

结合有关使用`{Binding RelativeSource Self}`和按名称引用它的评论是可行的。我还必须将 TargetType 从更改`TextBlock`为`TextBox`. 感谢您的有用评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:27:13.610

尝试

```
<Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}"/> 
```

# android - 在android中压缩位图时出错

> ID：12621576
> 
> 赞同：2
> 
> 时间：2012-09-27T12:38:03.880
> 
> 标签：android

```
File file = new File(imgfilepath);
if(file.exists()&&file.canRead())
{
    try{
        bitmap = BitmapFactory.decodeFile(imgfilepath);
    }catch(Exception e)
    {
        error=1;
    }

    try{
        blob = new ByteArrayOutputStream();
    }catch(Exception e)
    {
        error=2;
    }

    try{
        bitmap.compress(Bitmap.CompressFormat.JPEG,1, blob);
    }catch(Exception e)
    {
        error=3;
    }

    try{
        bitmapdata = blob.toByteArray();
    }catch(Exception e)
    {
        error=4;
    }
} 
```

我得到错误值 3 如何解决这个问题，提供的图像是 jpg。它工作了一段时间，但现在它会返回错误

# excel - 当函数的名称在单元格中时，如何调用 Excel VBA 函数

> ID：12621577
> 
> 赞同：4
> 
> 时间：2012-09-27T12:38:04.703
> 
> 标签：excel, vba

我有一个 XLS 可以检索动态生成的报告列表：

```
 B  |   C  |   D  |   E  |   F  |   G         |   H  |   I  |   J
1   1  |  Bob |Jones |bjones| rep 1|Sales Report | Desc.|   X  |  fnGenerateSalesReport
2   1  |  Bob |Jones |bjones| rep 2|Revenue Rep. | Desc.|   _  |  fnGenerateRevenueReport
3   1  |  Bob |Jones |bjones| rep 3|Customer List| Desc.|   _  |  fnGenerateCustReport
4   1  |  Bob |Jones |bjones| rep 4|Stock Report | Desc.|   _  |  fnGenerateStockReport 
```

用户在他们希望生成的报告（第 I 列）旁边标记 X，然后按下“生成”按钮。如何根据用户选择运行相关功能。相关功能的名称（每个报告一个功能）列在报告列表的特定列 (Col J) 中（见下文）。

在这一`debug.print`行，我希望它使用保存的动态值调用函数`c.Offset(0, 1).Value`

```
Dim ws As Worksheet, rng As Range, stRows As Long
Dim c As Range

Set ws = Sheets("AVAILABLE REPORTS")

Set rng = ws.Range("B12:B12")
Set rng = ws.Range(rng, rng.End(xlDown))
stRows = rng.Rows.Count

Set rng = ws.Range("I12:I12")
Set rng = ws.Range("I12:I" & 11 + stRows)

For Each c In rng.Cells
    If c.Value = "X" Or c.Value = "x" Then
       Debug.Print "> [" & c.Value & " (" & c.Offset(0, 1).Value & ")]"
    End If
Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:04:19.160

```
For Each c In rng.Cells
    If c.Value = "X" Or c.Value = "x" Then
       CallByName myReportGenerator, "GenerateReport", vbMethod, c.Offset(0, 1).Value
    End If
Next 
```

注意：我假设这`myReportGenerator`是一个类的实例，它包含`GenerateReport`采用 1 个参数的方法。

**编辑**：如果它适用于您，请将函数放在工作表中（例如`Sheet1`）。
`CallByName Sheet1, c.Offset(0, 1).Value, vbMethod`

假设是`c.Offset(0, 1).Value`包含方法名称，它是`public`内部的方法`Sheet1`。

**EDIT2**：假设您已将此方法放在名为`class1`. 这是你要做的

```
dim reportHelper as Class1
set reportHelper = new Class1

CallByName reportHelper, c.Offset(0, 1).Value, vbMethod 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:09:01.393

就像一个替代建议：

您是否考虑过使用“相关函数”名称作为参数调用 ONE 函数？

然后，您可以只`SELECT CASE`调用这个相关函数，然后您就可以处理输入错误，以防相关函数名称出现错误。

```
For Each c In rng.Cells
    If c.Value like "X" Then
       CallRelevantFunction c.Offset(0, 1).Value
    End If
Next 
```

`CallRelevantFunction`如有必要，甚至可以有多个参数。

```
CallRelevantFunction ("rep 1", "fnGenerateSalesReport") 
```

最后，只要您不动态创建报表生成函数，我就会重新考虑您的设计方法。因为，当报表函数是静态的时，您只能在一组已定义的函数中进行选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:53:11.550

如果您将函数（或子）的名称存储在变量中，则可以使用`Run Method`- 请参阅此[链接](http://msdn.microsoft.com/en-us/library/office/aa220716%28v=office.11%29.aspx)

例如，如果变量`fncName = ws.Range("J1").value`

然后你可以使用调用函数

```
Application.Run fncName 
```

如果您的函数/子需要参数，则此方法最多允许 30 个。尝试提供工作簿、模块和函数名称的完整路径，以避免任何潜在的冲突。然后可以跨任何工作簿调用函数，而不必担心冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:42:47.797

一个`EVALUATE` ~~函数~~方法可能会有用：

```
debug.Print Sheet2.Cells(1,1).Value
Day(Now())&Month(Now())&Year(Now())

Debug.Print Evaluate(Sheet2.Cells(1,1).Value)
2792012 
```

# android - 如何使用 Android Service 以固定的时间间隔重复调用函数？

> ID：12621589
> 
> 赞同：0
> 
> 时间：2012-09-27T12:38:37.757
> 
> 标签：android, service, notifications, onstart

这是我的代码，我想在固定间隔后一次又一次地调用该日志，但有些问题如何存在。

```
 @Override
   public void onStart(Intent intent, int startId) {      
       super.onStart(intent, startId);  
       Toast.makeText(this, "Service Started...", Toast.LENGTH_LONG).show();
       Log.i(tag, "Service started...");

       Handler handler = new Handler(); 
       handler.postDelayed(new Runnable() { 
            public void run() { 
               Log.i(tag, "Post Delayed Function"); 
            } 
       }, 2000); 

   } 
```

# c++ - 新建分区盘winapi

> ID：12621592
> 
> 赞同：0
> 
> 时间：2012-09-27T12:38:46.727
> 
> 标签：c++, winapi, disk-partitioning

我正在尝试创建新分区并将卷安装到这个新分区，我认为`CreateFile`让我这样做，使用以下代码：

```
LPCTSTR lpFileName=L"\\\\.\\Device\\Harddisk0\\Partition3";
HANDLE handl=CreateFile( lpFileName,
                            GENERIC_READ | GENERIC_WRITE,
                            FILE_SHARE_READ | FILE_SHARE_WRITE,
                            NULL,
                            CREATE_ALWAYS,
                            FILE_ATTRIBUTE_NORMAL,
                            NULL  );
   if (handl==INVALID_HANDLE_VALUE)
   {
   qDebug()<<"handl invalid"<<" error"<<GetLastError();}

   bool success = DefineDosDevice(DDD_RAW_TARGET_PATH,L"I:",L"\\Device\\Harddisk0\\Partition3");
   if(!success)
       qDebug()<<" DefineDosDevice failed "<<GetLastError();

   bFlag = GetVolumeNameForVolumeMountPoint(
               L"I:\\", // input volume mount point or directory
               /** what u do in this directory u find it in th mount piont and vice versa**/
                  Buf, // output volume name buffer
              BUFSIZE  // size of volume name buffer
           );
   if (bFlag != TRUE)
   {
      //_tprintf( TEXT("Retrieving volume name for %s failed.\n"), argv[2] );
      qDebug()<<"Retrieving volume name failed.      "<<GetLastError();
      return (-2);
   }
    qDebug()<<"Volume name"<<QString::fromWCharArray(Buf);

    bool fResult = DefineDosDevice (
                         DDD_RAW_TARGET_PATH|DDD_REMOVE_DEFINITION|
                         DDD_EXACT_MATCH_ON_REMOVE, L"I:",
                         L"\\Device\\Harddisk0\\Partition3");
    if (!fResult)
                qDebug()<<"DefineDosDevice failed  "<< GetLastError();

   bFlag = SetVolumeMountPoint(L"D:\\myDirExample\\example\\", // mount point
                               /** should b empty**/
                                Buf // volume to be mounted
                               );

   if (!bFlag)
      {
        qDebug()<<"Attempt to mount failed";
        qDebug()<<"error "<<GetLastError();
      }

   return (bFlag);

   CloseHandle(handl); 
```

我有：

```
handl invalid  error 3 
Retrieving volume name failed  erorr  2 
```

第一个错误是ERROR_PATH_NOT_FOUND：系统找不到指定的路径。那么我该如何解决`lpFileName`才能使其正常工作

在此先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T15:48:57.830

有，我用它做我的碎纸机。唯一棘手的部分是管理文件指针的 LARGE_INTEGER（用于选择扇区）。您需要首先使用 CreateFile() 使用设备的句柄。使用 FSCTL_LOCK_VOLUME 锁定驱动器后，使用 SetFilepointerEx 设置扇区并使用 IOCTL_DISK_SET_PARTITION_INFO_EX 创建新扇区。

干杯；）

编辑了几次 - 不确定是否也需要 IOCTL_DISK_SET_PARTITION_INFO，但事实并非如此，您也可以使用 IOCTL_DISK_SET_PARTITION_INFO_EX 设置类型。

# android - 获取服务器回复中未设置的异常请求令牌或令牌机密。您使用的服务提供商可能有问题

> ID：12621596
> 
> 赞同：3
> 
> 时间：2012-09-27T12:38:57.077
> 
> 标签：android, twitter

我在我的 android 应用程序中做 twitter 插件。在此期间，当我单独运行 twitter API 时，它运行良好，但在集成到我的应用程序后，当我第一次登录 twitter 时，它显示以下异常：

```
oauth.signpost.exception.OAuthExpectationFailedException: Request token or token secret not set in server reply. The service provider you use is probably buggy.
at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:206)
at oauth.signpost.AbstractOAuthProvider.retrieveAccessToken(AbstractOAuthProvider.java:108)
at com.dotinfotech.snapthat.twitter.TwitterApp$3.run(TwitterApp.java:242) 
```

我得到以下行的错误形式：

```
mHttpOauthprovider.retrieveAccessToken(mHttpOauthConsumer,verifier); 
```

请任何人帮助我...

# c# - 使用 Linq 在两个日期之间重叠记录

> ID：12621601
> 
> 赞同：5
> 
> 时间：2012-09-27T12:39:10.593
> 
> 标签：c#, linq, date

在我的应用程序中，用户可以委托另一个用户批准订单。

我需要验证的是，没有循环引用，因此如果`User A`已`User B`在某个时期内委派，`User B`则不能`User A`在该时期内的任何时间委派，即存在重叠（日期在 中`dd/mm/yyyy`）：

```
Delegator    Delegated To    DateFrom    DateTo
User A       User B          01/11/2012  08/11/2012
User A       User B          16/12/2012  24/12/2012 
```

这是我必须检查重叠的代码：

```
var overlaps = .Session.QueryOver<DelegateOrderApproval>()
    .Where(x => x.DateFrom > DateTime.Now && delegateOrderApproval.DelegatedUser.UserId == x.DelegatorUser.UserId)
    .And(x => x.DateFrom >= delegateOrderApproval.DateFrom && delegateOrderApproval.DateTo <= x.DateTo
              || (x.DateFrom >= delegateOrderApproval.DateFrom && x.DateTo <= delegateOrderApproval.DateTo)
              || (x.DateFrom <= delegateOrderApproval.DateFrom && x.DateTo >= delegateOrderApproval.DateFrom)
              || (x.DateFrom <= delegateOrderApproval.DateFrom && x.DateTo >= delegateOrderApproval.DateTo))
    .List(); 
```

如果我尝试添加以下记录：

```
Delegator: User B
Delegated  To: User A
Date From: 15/11/2012
DateTo:    21/11/2012 
```

应该没有冲突，因为在那个时间段内`User B`没有代表？`User A`它在 12 月创下纪录。

我搜索了日期范围重叠代码并尝试了所有方法，但似乎没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:15:32.543

你不能简单地做

```
var doesOverlapExist = Session.QueryOver<DelegateOrderApproval>()
     .Any(x => 
        x.DateFrom > DateTime.Now && 
        delegateOrderApproval.DelegatedUser.UserId == x.DelegatorUser.UserId &&
        x.DateFrom <= delegateOrderApproval.DateTo &&
        x.DateTo >= delegateOrderApproval.DateFrom); 
```

或者如果您没有，请替换为

```
Where(x=> blabla).Count() >0 
```

重叠检查逻辑： [确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)

# visual-studio-2012 - 其他用户签出在源代码管理资源管理器 (TFS Express) 中不可见

> ID：12621607
> 
> 赞同：9
> 
> 时间：2012-09-27T12:39:25.853
> 
> 标签：visual-studio-2012

其他用户签出在 Visual Studio 2012 的源代码管理资源管理器中不可见，TFS 是快速版：

![签出不可见](../Images/ef49df886ec3f111098de9e5db62c155.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T13:34:42.677

TFS 2012 引入了一个名为*local workspaces*的新概念，它与以前版本的 TFS 中的工作区行为略有不同（旧的默认行为现在称为*服务器工作区*。）

使用本地工作区，TFS 的行为类似于编辑/合并/提交类型的版本控制系统。也就是说，文件不是只读的，而是 TFS 将扫描您的文件系统以确定已更改的内容。您不再需要从服务器签出文件，事实上，服务器不知道您签出了什么。

因此，您将无法看到其他用户已签出该文件 - 此信息仅存在于他或她的本地工作区中。

如果这个其他用户正在使用传统的*服务器工作区*，那么服务器将拥有此信息并将其呈现给您。

# ruby-on-rails - Ruby on Rails 3：如何通过关联方法找到关联记录？

> ID：12621608
> 
> 赞同：0
> 
> 时间：2012-09-27T12:39:32.807
> 
> 标签：ruby-on-rails

我有许多物品和付款的发票。

这是我的发票模型（至少是其中的一部分）：

```
def total
  items.sum { |item| item.total }
end

def balance
  self.payments.sum(:amount) - self.total
end 
```

现在在付款视图中，我试图找到余额小于 0 的所有发票：

```
<%= f.select(:invoice_id, current_user.invoices.where("balance > ?", 0)) %> 
```

这当然行不通，因为*balance*不是一列。但是我怎样才能在那里插入一个方法呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:59:26.343

你有几个选择。您总是可以创建`balance`一个列（在添加付款或项目时适当地更新它），这将允许您有效地执行此类查询。

但是，您可以只使用简单的 Ruby 方法 - 特别是[`Array#select`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-select). 就像是

```
current_user.invoices.to_a.select {|invoice| invoice.balance < 0} 
```

会把你带到那里。但是，如果用户有大量发票，则效率不会很高。

**更新**：此外，如果您这样做，您将遇到[N+1 查询情况](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)，因为每张发票都需要从数据库中检索其项目和付款。为避免这种情况，您需要在原始查询中包含项目和付款，如下所示：

```
current_user.invoices.includes(:items, :payments).to_a.select{ ... } 
```

# java - Axis2 系统无法推断传输信息错误

> ID：12621615
> 
> 赞同：4
> 
> 时间：2012-09-27T12:39:45.167
> 
> 标签：java, eclipse, web-services, soap, axis2

我正在尝试使用客户端代码发送 SOAP 请求，该客户端代码使用 wsdl2java 工具为 Eclipse 生成的库，但不断收到此错误：

```
[错误] 系统无法从地址推断传输信息：http://172.17.4.2:8081/axis2/services/CDMS URL。

```

该客户端是一种位于“真实”客户端和服务器之间的代理。我从真实客户端的 SOAP 消息的 wsa:To 字段中获取了 URL，并使用它来创建到服务器的连接。

对于寻找可能的错误来源，我很迷茫，有人可以提示吗？我不确定我可以在这里提供哪些可能有用的信息，所以请告诉我应该提供哪些其他错误消息或配置文件提取物来帮助您帮助我:)

谢谢...

**更新：**

我进行了更多试验，如果我将 URL 字符串硬编码到客户端存根，而不是从另一条消息中获取它，则请求成功发送：

```
ConfigurationContext cc = ConfigurationContextFactory.createConfigurationContextFromFileSystem("/home/me/axis2-1.6.2/repository", "/home/me/axis2-1.6.2/conf/axis2.xml");
CDMSStub stub = new CDMSStub(cc, "http://172.17.4.2:8081/axis2/services/CDMS"); 
```

我不明白为什么，因为我提供的字符串与硬编码的字符串具有完全相同的值/内容....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-11T14:44:51.590

错误本身表示它无法解析用于发送消息的端点。您需要确保您的后端服务已启动并正在运行。还要确保您的代理服务正确配置为将消息发送到后端服务。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:15:01.747

不知道这是否会有所帮助，但我已经与这个错误作斗争了好几天。有一位同事帮助我，她解释说，当我从 wsdl 文件创建 Java 类时，默认（使用 RAD 7.5）是使用 JAXB-WS。对于独立应用程序，她建议我使用 Axis。重建了所有的 java 类，修复了一些参数，并且生活得很好。

# c# - 使用@tpv 的过程在 c# 中不起作用

> ID：12621619
> 
> 赞同：0
> 
> 时间：2012-09-27T12:39:54.107
> 
> 标签：c#, sql, procedure

我在 Sql 中有一个将 @tpv 作为参数的过程。当我从 c# 执行过程时 - 它不工作，当我从 Sql 执行过程时 - 它工作完美。为什么？

编辑：当我从 c# 执行 proc 时 - 它没有出现错误，看起来它工作正常，但表根本没有改变，而`misRow=0`不是`misRow=1`.

程序：

```
CREATE procedure [dbo].[UpdateAdsList]
@tvp ListCrc32 readonly
as
 update tb
 set a_update=CONVERT(date,GETDATE(),101)
 from Ads tb
 join @tvp t on t.crc32 = a_crc32 
```

从 Sql 执行：

```
declare @ ListCrc32

insert into @ (crc32)
select 1652908150

exec UpdateAdsList @ 
```

从 C# 执行：

```
int mis=1652908150;

//create the dataTable
dt = new DataTable();
dt.Columns.Add("crc32", typeof(int));
var row = dt.NewRow();
row["crc32"] = mis;
dt.Rows.Add(row);

//exec the proc
con.Open();
var cmd = new SqlCommand("UpdateAdsList",con);
cmd.Parameters.Add("@tvp",SqlDbType.Structured);
cmd.Parameters["@tvp"].Value = dt;
cmd.Parameters["@tvp"].TypeName = "ListCrc32";
int misRow=cmd.ExecuteNonQuery();
con.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:52:52.850

您可以尝试添加不带类型的参数：

```
int mis=1652908150;

//create the dataTable
dt = new DataTable();
dt.Columns.Add("crc32", typeof(int));
var row = dt.NewRow();
row["crc32"] = mis; // I do not see the point of convert.
dt.Rows.Add(row);

//exec the proc
var cmd = new SqlCommand("UpdateAdsList",con);
cmd.CommandType = Syste.Data.CommandType.StoredProcedure;

cmd.Parameters.AddWithValue("@tvp",dt);

con.Open();

int misRow=cmd.ExecuteNonQuery();

con.close(); 
```

# android - Drawable.Dynamic 改变 ShapeSize

> ID：12621620
> 
> 赞同：1
> 
> 时间：2012-09-27T12:39:56.427
> 
> 标签：android, drawable

我有一些问题。何时按下按钮 - 必须更改形状的大小。一种变体是创建具有新大小的新对象，但我认为这很愚蠢。请帮助我，或者写下你的想法如何制作它！

**代码：**

```
public class MainActivity1 extends Activity {
ShapeDrawable d1;
ShapeDrawable d2;
    //
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_activity1);
    d1 = new ShapeDrawable(new RectShape());
    d2 = new ShapeDrawable(new OvalShape());
    ImageView ob1 = (ImageView) findViewById(R.id.imageView1);
    ImageView ob2 = (ImageView) findViewById(R.id.imageView2);

    d1.setIntrinsicHeight(100);
    d1.setIntrinsicWidth(100);
    d1.getPaint().setColor(Color.RED);
    ob1.setImageDrawable(d1);

    d2.setIntrinsicHeight(100);
    d2.setIntrinsicWidth(100);
    d2.getPaint().setColor(Color.YELLOW);
    ob2.setImageDrawable(d2);

    Button btn_ob1 = (Button) this.findViewById(R.id.button1);
    btn_ob1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {

            d1.getPaint().setColor(Color.BLUE);
            d1.invalidateSelf();
                            d1.setIntrinsicHeight(150);
                            d1.setIntrinsicWidth(150);
        }
    });
    Button btn_ob2 = (Button) this.findViewById(R.id.button2);
    btn_ob2.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            d2.getPaint().setColor(Color.BLUE);
            d2.invalidateSelf();
                            d2.setIntrinsicHeight(150);
                            d2.setIntrinsicWidth(150);
        }
    });
} 
```

# android - AsyncTask 与 facebook 和 twitter4j

> ID：12621638
> 
> 赞同：0
> 
> 时间：2012-09-27T12:40:48.160
> 
> 标签：android, facebook, twitter, android-asynctask, twitter4j

我有两个图像按钮，当我按下它时我想分享/发送推文，但是我在活动中编写所有代码，所以有一天不再工作了我不知道为什么：/它抛出了一个异常NetworkOnMainThreadException 并且及时使用 AsyncTask 完成所有操作。从那以后我一直在寻找一段时间，我测试过的所有解决方案都不起作用......所以我希望你能帮我解决这个问题：D

```
class TweetTask extends AsyncTask<String, Void, String> {

        @Override
        protected String doInBackground(String... params) {
            try {
                AccessToken accessToken = loadAccessToken();
                if (accessToken == null) {
                    twitterL = new TwitterFactory().getInstance();
                    twitterL.setOAuthConsumer(consumerKey, consumerSecret);
                    RequestToken requestToken = twitterL
                            .getOAuthRequestToken(CALLBACKURL);
                    String url = requestToken.getAuthenticationURL();
                    Intent it = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
                    it.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                    startActivity(it);
                    saveRequestData(requestToken.getToken(),
                            requestToken.getTokenSecret());
                } else {
                    twitterL.setOAuthAccessToken(accessToken);
                    if (loadAccessToken() != null) {
                        String tweet = "I'm listening ";
                        twitterL.updateStatus(tweet);
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
                showToast(e.getMessage());
            }

            return "1";
        }

        @Override
        protected void onPostExecute(String tweet) {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:51:10.917

从 Android Honeycomb 开始，在 UI 线程/Main Activity 线程上执行的任何网络活动都会抛出 NetworkOnMainThreadException

一直建议在单独的 AsyncTask 而不是 UI 线程中执行长时间运行的方法调用。从 Internet 获取数据的方法是长期运行方法的一个示例。请阅读有关[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的更多信息并在您的代码中实现它以避免抛出此异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:00:22.550

你**可以**做的是在你的网络调用之前添加这个：

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
```

它将允许它在主线程上。但仅对极其简单的网络调用执行此操作。我的意思是非常简单。

正如 zeiger 所说，您绝对应该了解[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并在这种情况下使用它。

# c# - 将变量四舍五入到小数点后两位 C#

> ID：12621640
> 
> 赞同：46
> 
> 时间：2012-09-27T12:40:52.540
> 
> 标签：c#, variables, decimal, rounding

我对如何将变量四舍五入到小数点后两位很感兴趣。在下面的示例中，奖金通常是一个小数点后四位的数字。有什么办法可以确保薪酬变量总是四舍五入到小数点后两位？

```
 pay = 200 + bonus;
  Console.WriteLine(pay); 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-09-27T12:41:58.800

使用[Math.Round](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)并指定小数位数。

```
Math.Round(pay,2); 
```

[Math.Round 方法 (Double, Int32)](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)

> **将双精度浮点**值四舍五入为指定的小数位数。

或[Math.Round 方法（十进制，Int32）](http://msdn.microsoft.com/en-us/library/zy06z30k.aspx)

> 将十进制值四舍五入为指定的小数位数。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-27T12:46:51.353

您应该使用[`Math.Round`](http://msdn.microsoft.com/en-us/library/as4h66hd.aspx). 请注意，除非您指定一个值`Math.Round`，否则默认为银行家的四舍五入（四舍五入到最接近的偶数） 。[`MidpointRounding`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx)如果您不想使用银行家四舍五入，则应使用[`Math.Round(decimal d, int decimals, MidpointRounding mode)`](http://msdn.microsoft.com/en-us/library/ms131274.aspx)，如下所示：

```
Math.Round(pay, 2, MidpointRounding.AwayFromZero); // .005 rounds up to 0.01
Math.Round(pay, 2, MidpointRounding.ToEven);       // .005 rounds to nearest even (0.00) 
Math.Round(pay, 2);    // Defaults to MidpointRounding.ToEven 
```

（[为什么.NET 使用银行家的四舍五入？](https://stackoverflow.com/questions/311696/why-does-net-use-bankers-rounding-as-default)）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-27T12:43:01.623

```
decimal pay  = 1.994444M;

Math.Round(pay , 2); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-27T12:44:18.703

您可以将结果四舍五入并用于`string.Format`设置精度，如下所示：

```
decimal pay = 200.5555m;
pay = Math.Round(pay + bonus, 2);
string payAsString = string.Format("{0:0.00}", pay); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-27T12:45:16.313

使用 System.Math.Round 将十进制值四舍五入为指定的小数位数。

```
var pay = 200 + bonus;
pay = System.Math.Round(pay, 2);
Console.WriteLine(pay); 
```

MSDN 参考资料：

*   [http://msdn.microsoft.com/en-us/library/system.math.round.aspx](http://msdn.microsoft.com/en-us/library/system.math.round.aspx)
*   [http://msdn.microsoft.com/en-us/library/zy06z30k.aspx](http://msdn.microsoft.com/en-us/library/zy06z30k.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-27T12:45:58.393

确保提供一个数字，通常使用双精度数。Math.Round 可以接受 1-3 个参数，第一个参数是要舍入的变量，第二个是小数位数，第三个是舍入类型。

```
double pay = 200 + bonus;
double pay = Math.Round(pay);
// Rounds to nearest even number, rounding 0.5 will round "down" to zero because zero is even
double pay = Math.Round(pay, 2, MidpointRounding.ToEven);
// Rounds up to nearest number
double pay = Math.Round(pay, 2, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-27T12:48:35.977

注意`Round` **查房**的事实。

所以（我不知道这对你的行业是否重要），但是：

```
float a = 12.345f;
Math.Round(a,2);

//result:12,35, and NOT 12.34 ! 
```

为了使*您的情况*更准确，我们可以执行以下操作：

```
int aInt = (int)(a*100);
float aFloat= aInt /100.0f;
//result:12,34 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-27T12:44:12.893

```
Console.WriteLine(decimal.Round(pay,2)); 
```

# bash - 以 n 列输出数据库中的所有表

> ID：12621643
> 
> 赞同：0
> 
> 时间：2012-09-27T12:41:04.357
> 
> 标签：bash, mysql

我在这里遇到了一个愚蠢的问题。这没什么大不了的，但是因为我几乎每天都有它，所以我正在寻找一种解决方法。

我正在处理一个大约有 250 张桌子的项目。我经常需要查看这些列表，但是当我启动“show tables;”时，MySQL 每行输出 1 列。

这是一个快速示例：

```
| contact                              |
| content_footer                       |
| content_footer_translation           |
| content_homepage                     |
| content_homepage_image               |
| content_homepage_translation         | 
```

我想要的是能够通过自己定义 n 来将它显示在 n 列中，或者更好的是，应该以某种方式计算 n，以便行宽不会超过 X 个字符。

预期输出：

```
| contact                              | content_footer                       | content_footer_translation           |
| content_homepage                     | content_homepage_image               | content_homepage_translation         | 
```

我不确定纯粹在 MySQL 中是否真的可以做到这一点，但如果你知道一个可以在 Bash 中做到这一点的不错的单线，那也很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:46:49.110

试试这个：

```
mysql databasename -NBe 'show tables;' | fmt 
```

这会将名称组合成合适长度的行。您可以使用`-w`标志来调整行长`fmt`。但是，它不会形成新的列。

构建列的解决方案如下：

```
set -- $(mysql databasename -NBe 'show tables') '' ''
while [[ $# -ge 3 ]]; do
    printf "| %-20s | %-20s | %-20s |\n" "$1" "$2" "$3"
    shift 3
done 
```

为了便于阅读，它被写成五行，当然你也可以用分号把它写在一个逻辑行中。如果要调整列数，则必须在五个地方进行：空字符串的数量、循环测试、格式字符串、printf 参数和 shift 参数。如果要调整列宽，则必须在格式字符串中重复执行此操作。不涉及自动计算。

# php - 从 CLI 运行时抑制 PHP 错误的 HTML 标记

> ID：12621644
> 
> 赞同：3
> 
> 时间：2012-09-27T12:41:10.060
> 
> 标签：php, debugging, command-line-interface

当我`php -l someFile`在 CLI 上运行时，输出用 HTML 标记标记：

```
$ php -l someFile.php 
<br />
<b>Parse error</b>:  syntax error, unexpected T_ECHO in <b>/home/someUser/public_html/someFile.php</b> on line <b>42</b><br />
Errors parsing someFile.php
$ 
```

如何抑制这些 HTML 标签？我实际上正在使用自定义`php.ini`进行解析（未在示例中显示以简化），因此如果 php.ini 修改将解决问题，那很好。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:43:10.593

[在您的 ini 文件http://php.net/manual/en/errorfunc.configuration.php#ini.html-errors](http://php.net/manual/en/errorfunc.configuration.php#ini.html-errors)中将 html_errors 设置为 false

```
$ php -dhtml_errors=0 -l someFile 
```

# android - 显示错误 对于 EngineOptions 类型的方法 setNeedsSound(boolean) 未定义

> ID：12621645
> 
> 赞同：1
> 
> 时间：2012-09-27T12:41:13.470
> 
> 标签：android, andengine

```
public EngineOptions onCreateEngineOptions() {
    instance = this;
    mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
            new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera)).setNeedsSounds(true);
} 
```

启用声音时显示错误它显示错误该方法 setNeedsSound(boolean) 未定义类型 EngineOptions

也试过

```
return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
                new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera)).getAudioOptions().setNeedsSound(true); 
```

但显示错误 Type mismatch: cannot convert from AudioOptions to EngineOptions

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:44:00.323

试试这种方式

```
final EngineOptions engineOptions = new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED,
            new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
    engineOptions.getAudioOptions().setNeedsSound(true);
    engineOptions.getAudioOptions().setNeedsMusic(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:46:12.763

您的代码中似乎有额外`)`的内容。尝试：

```
return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera).setNeedsSounds(true); 
```

# android - 更改了 splash.png 图像，但在模拟器中没有更改

> ID：12621646
> 
> 赞同：4
> 
> 时间：2012-09-27T12:41:17.363
> 
> 标签：android, eclipse, android-emulator, splash-screen

我只是在与 Eclipse 争吵，并更新了 res/ 文件夹中的 splash.9.png 图像，但是当在我的手机（USB 连接）上测试运行该应用程序时，它仍然显示旧的启动画面图像。

我需要清除 Eclipse 中某处的缓存吗？为移动开发人员运行 Eclipse Juno。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:48:42.380

我曾经在 Helios 上遇到过同样的问题，但在 Juno 上还没有，它似乎会在我下次保存更改时自动更新。

尝试将图像移动到不同的目录，在 Eclipse 中进行更改并保存，以便它注册缺少可绘制对象，然后将更新的图像移回。无论如何，这就是我过去在 Helios 中修复它的方式。

# powershell - PowerShell - 从打印服务器中删除打印队列

> ID：12621648
> 
> 赞同：0
> 
> 时间：2012-09-27T12:41:20.197
> 
> 标签：powershell, windows-server-2008, wmi, powershell-2.0, windows-server-2003

我有一台打印机服务器，可托管大约 1000 台打印机。我想删除其中之一。

我目前正在使用这个命令：

```
$p = Get-WmiObject -Class Win32_printer -ComputerName $server -namespace "root\CIMV2" -filter "name='printer0456'" 
```

它起作用了，它找到了打印机，然后我可以使用这个命令来删除它：

```
$p.delete() 
```

但让我大吃一惊的是，第一个命令需要 2-3 分钟才能找到打印机。对我来说，这完全有道理。

有什么我做错了，或者我可以用其他什么来更快地删除打印机？

**编辑：检查我的回复**

这样，它只会在找到正确的打印机之前进行获取，而不是解析整个打印机列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-16T06:47:30.677

您应该使用 WMI 加速器来加速您对 WMI 的查询。

```
$PrinterInstance = [wmi]"\\$CentralServer\root\cimv2:Win32_Printer.DeviceID='$PrinterName'" 
```

DeviceID 是 WMI 数据库中的索引值，默认情况下 DeviceID 应与打印机名称相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:22:37.183

它是成本的 WMI 查询，因此缓存结果。拉出集合中的所有打印机。过滤集合并删除您想要的打印机。

```
$printers = gwmi Win32_printer -ComputerName $server -namespace "root\CIMV2"

$del = $printers | ? { $_.Name -eq "printer1"}
$del.delete()
$del = $printers | ? { $_.Name -eq "printer6"}
$del.delete()
$del = $printers | ? { $_.Name -eq "printer89"}
$del.delete() 
```

您可以使用`-like`和`-match`过滤具有足够相似名称的打印机。像这样，

```
$printers = gwmi Win32_printer -ComputerName $server -namespace "root\CIMV2"

$del = $printers | ? { $_.Name -match "printer10[1-3]" } # Match printer101..103
$del | % {$_.delete()} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:48:35.453

**我找到的临时解决方案**

```
$p = $null
Get-WmiObject -Class Win32_printer -ComputerName $server|ForEach-Object{
    if($_.name -eq "printer0456"){
        $p = $_
        break
    }
}
if($p -ne $null){
    $p.delete()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:19:55.570

`$p = gwmi win32_printer | ? {$_.name -match "PrintServer"} | % ($i in $p) {$i.delete()}`

这只会删除名称路径中具有以下打印服务器名称的打印机。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-20T19:49:45.940

```
$PrintersTodelete = Get-WmiObject -Class Win32_printer -ComputerName $server -filter "name='printer0456'"
 if($printersToDelete){
     Foreach($printer in $PrintersTodelete){
         $printer.delete()
      }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-12T17:43:41.930

```
<#
    Delete printers on remote servers using csv list(server,printer)
    Note: For queues with job(s), they will be stuck in a "deleting"
    state and you must clear the job(s) manually, the queue will delete
    after that. Or, you will need to write in code to stop spooler and
    delete jobs from \spool\printers. Not a big enough deal to warrant
    risk of spooler not starting back up.
#>

$InCSVPath = "\\path_to_list_file\printerstodelete.csv"

$csv = Import-Csv $InCSVPath
foreach($item in $csv){ 

       $server = $item.Server

       $printer = $item.Printer 

       $a = Get-WmiObject -Class Win32_printer -ComputerName $server -Filter "name= '$printer'"

        if($a){

             "Deleting Printer: " + $a.Name #

              $a.Delete()

         }

         else{

               "could not delete: "+$printer

         }

} 
```

# eclipse - eclipse中发生休眠异常

> ID：12621651
> 
> 赞同：-2
> 
> 时间：2012-09-27T12:41:25.523
> 
> 标签：eclipse, hibernate, jsf

> **可能重复：**
> [javax.faces.application.ViewExpiredException：无法恢复视图](https://stackoverflow.com/questions/3642919/javax-faces-application-viewexpiredexception-view-could-not-be-restored)

```
Sep 27, 2012 6:08:12 PM com.sun.faces.lifecycle.Phase doPhase
SEVERE: JSF1054: (Phase ID: RESTORE_VIEW 1, View ID: ) Exception thrown during phase execution: javax.faces.event.PhaseEvent[source=com.sun.faces.lifecycle.LifecycleImpl@d0deb5]
Sep 27, 2012 6:08:12 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/qwerty] threw exception [viewId:/pages/welcome.jsf - View /pages/welcome.jsf could not be restored.] with root cause
javax.faces.application.ViewExpiredException: viewId:/pages/welcome.jsf - View /pages/welcome.jsf could not be restored.
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:186)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:104)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:141)
    at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:281)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:27:42.373

这是一个 JSF 异常，说明视图和可能的 HTTP 会话已过期。这可能是因为查询需要很长时间才能执行。

*   要么增加会话超时
*   在页面上实现循环 AJAX 轮询以保持会话处于活动状态
*   调整查询以更高效地执行
*   或执行以上所有操作

# css - Magento - 管理导航中的自定义 CSS

> ID：12621663
> 
> 赞同：1
> 
> 时间：2012-09-27T12:42:29.190
> 
> 标签：css, magento, navigation, admin, adminhtml

我有一个问题，但尚未设法找到解决方案。我有一个模块。对于这个模块，我在管理顶部导航菜单中有一个条目。我想从这个定制：

![在此处输入图像描述](../Images/4d24fc4895a1b668622f64b832ee05f1.png)

对此：

![在此处输入图像描述](../Images/14f13bef1e8894a60079eb11fdd369c8.png)

有没有人现在可以解决这个问题？也许一种将css类添加到`<a>`包装`<span>`文本的方法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:57:20.420

对此没有不同的节点，但`CDATA`可以使用。

```
<menu>
    <your_module translate="title" module="your_module">
        <title><![CDATA[<span class="custom-class">Checklist</span>]]></title>
    </your_module>
</menu> 
```

有关具体信息，请参阅[`Mage_Adminhtml_Block_Page_Menu::_buildMenuArray()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Adminhtml/Block/Page/Menu.php#L130)。

但是，你真的想这样搞定菜单吗？想象一下，如果每个开发人员都这样做。不添加顶级导航项目通常是好的/礼貌的做法，尤其是带有图标的。深思熟虑:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T07:26:29.237

似乎在 Magento 的更高版本中，菜单标题的值被转义，因此即使使用 CDATA 也不起作用。我见过的一些模块成功地添加了图标，实际上重载了`Mage_Adminhtml_Block_Page_Menu`类以防止这种情况。

但实际上，您可以通过定位导航菜单中的 URL，使用简单的 CSS 规则将图标放入其中！

```
ul#nav .level1 a[href*="url_here"] span {
    background-image: url('../images/logo.png');
    background-position: left 4px;
    background-position-x: 5px;
    background-repeat: no-repeat;
    padding-left: 25px;
    background-size: 14px;
} 
```

# javascript - Firefox 中的事件“e 未定义”

> ID：12621667
> 
> 赞同：0
> 
> 时间：2012-09-27T12:42:40.237
> 
> 标签：javascript, javascript-events

我有一个功能可以在按下时获取键码。

这是我的代码：

```
function Getkeycode(e){
   var keycode = null;
   if (window.event) 
       keycode = window.event.keyCode;
   else 
       keycode = e.which;
   return keycode;
}

window.onkeydown = function(){
   alert(Getkeycode());  // I'm tried to using  Getkeycode() or Getkeycode(e) but still error
} 
```

以前的代码在 Internet Explorer 中运行良好，但在 Firefox 中总是出现错误消息 >>`e is undefined`或`e is not defined`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:43:57.707

在 IE 中，当事件发生时，它可以在窗口变量中全局访问。在其他浏览器中并非如此。

为了将事件传递给您的函数，请将您的代码更改为

```
window.onkeydown = function(e){ // <== receive e
   alert(Getkeycode(e));  // <== pass e
} 
```

# mysql - MYSQL : PHP ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)

> ID：12621669
> 
> 赞同：0
> 
> 时间：2012-09-27T12:42:44.683
> 
> 标签：mysql

当我尝试使用登录 mysql shell 时

```
mysql -u root -p 
```

我得到了

> ERROR 2002 (HY000): 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

请帮我看看mysql有什么问题

我可以使用登录`mysql --host=127.0.0.1 frontend`

**更新** /etc/hosts

```
 127.0.0.1       localhost
    127.0.1.1       shweta-desktop
    127.0.0.1       webfaction
    # The following lines are desirable for IPv6 capable hosts
    ::1     ip6-localhost ip6-loopback
    fe00::0 ip6-localnet
    ff00::0 ip6-mcastprefix
    ff02::1 ip6-allnodes
    ff02::2 ip6-allrouters 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T03:56:06.033

我发现这是因为mysql数据库没有运行使用这个命令来启动它

```
service mysqld start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T19:33:36.657

我遇到了这个问题。我发现我在 /root 中有一个包含信息的 .netrc。

我删除了它，问题消失了。

`mysql -uroot -p`现在可以使用没有问题的方式登录mysql 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:38:51.343

关于您在那里的评论，sandhaya 的答案没有错。请参阅有关 Serverfault 的答案和评论： [https ://serverfault.com/questions/295285/mysql-cannot-connect-via-localhost-only-127-0-0-1](https://serverfault.com/questions/295285/mysql-cannot-connect-via-localhost-only-127-0-0-1)

总结一下：如果你使用特殊的虚拟主机名“localhost”（默认）连接到 mysql，mysql 会尝试连接到 /etc/my.conf 中指定的套接字。这似乎是一个不正确的。我不能说您的主机别名有什么问题，您的 /etc/hosts 似乎是正确的。所以用127.0.0.1连接其实是一种解决办法，另外一种就是找到正确的socet，放到你的/etc/my.conf中。

# javascript - JavaScript OOP 最佳实践：构造和扩展

> ID：12621676
> 
> 赞同：6
> 
> 时间：2012-09-27T12:43:09.537
> 
> 标签：javascript, oop, optimization

我正在努力优化我在 JS 中的实践，但我无法构建一个完美的基准来回答我以下问题。

**JS“类”的最佳结构是什么？**

我已经尝试了以下各项，但没有任何明显的性能峰值。

```
(function() { // Scope! as a JS function
    //0.example
    var A = new function() {
            this.x = 0; // Will be constructed on runtime initiation
            A.prototype.afunc = function() {
                // do something
                return this;
            };
        };

    //1.example
    var B = new function() {
            var x = 0;
            B.prototype.bfunc = function() {
                // do something
                return this;
            };
        };

    //2.example
    var C = new function() {
            var x = 0;
            this.cfunc = function() {
                // do something
                return this;
            };
        };

    //3.example
    function D() { // old fashion way
        var x = 0;

        function dfunc() {
            // do something
            return this;
        };
    };

    //4.example
    var E = { // Interface style, but works perfect as an Enum style but I can't extend it
        x: 0,
        efunc: function() {
            // do something
            return this;
        }
    };
})(); 
```

但到目前为止，我注意到 0-2 个示例具有最好的扩展能力，并且可以适应更好的 OOP 规则。

**以下哪项可以作为类构造函数，为什么？**

这是我的主要问题之一。我无法清楚地确定类构造函数的最佳结构。当涉及到扩展类（并将其用作超级/父构造函数）时，问题会变得更糟

以下代码是我的使用示例。我的经验告诉我，在“类”内部的灵活性方面，第 6 （5）个示例是最好使用的。但是继承仍然很棘手。

```
 //5.example
var F = new function(a, b, c) {
        var x = 0;

        F.prototype.init = function(a, b, c) {
            // do something
            return this;
        };
        // During runtime will compute & initilize
        return this.init(a, b, c);
    };

//6.example
function G(a, b, c) {
    var x;
    var y;

    function init() {
        x = a;
        y = b + c;
        return this;
    };
    return this.init();
};

//7.example
var H = new function(a, b, c) {
        var instance = { // Runtime Construction
            x: a,
            y: b + c,
        };
        // do something
        return init;
    }; 
```

**是否有可能像在任何常见的 OOP 语言中一样实现扩展和继承？**

我尝试了各种技术，但没有一个能说服我成为最佳技术。

```
//8.example
var I = new F.prototype;
I.prototype.ifunc() {
    // do something
    return this;
}

//9.example
var J = new G(0,1,2);
J.jfunc() {
    // do something
    return this;
} 
```

综上所述，编写 OO JS 的最佳实践是什么？以及您如何对其进行基准测试以拒绝其他人？

# c++ - 如何将对象传递给本地对象方法？

> ID：12621678
> 
> 赞同：3
> 
> 时间：2012-09-27T12:43:15.360
> 
> 标签：c++

我有 B 类和 A 类。在 B 类的方法中（让它命名为 foo()）我定义了 A 类的本地对象。在 AI 类中有采用 B 对象的方法。当 A 对象在 B 类的方法中是本地的时，如何将 B 对象传递给 A 类的这个方法。？

```
class B {
public:
  void foo()
  {
     A a;
     a.bar(???); // want to pass B object?
  }
};

class A {
public:
  void bar(B& b)
  {
     ...
  }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:45:30.330

如果要传递的当前实例`B`：

```
a.bar(*this); 
```

如果你想要一个不同的实例：

```
B b;
a.bar(b); 
```

如果你想传递一个临时的，你需要修改`A::foo`为：

```
void bar(const B& b) 
```

然后直接通过它：

```
a.bar(B()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T12:45:19.573

指针是您所`this`需要的，它指向调用成员函数的实例。

```
a.foo(*this); // dereference since 'this' is a pointer 
```

# ios - 将录制的视频文件保存在 Web 服务器上

> ID：12621680
> 
> 赞同：1
> 
> 时间：2012-09-27T12:43:22.850
> 
> 标签：ios, avcam

嗨，我想将录制的视频文件从 ipad 保存到网络服务器，我按照此链接进行视频录制[http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Read_Me_txt.html](http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Read_Me_txt.html)，所以任何人都可以提供帮助对于我该怎么办，我对此比较新鲜。

# javascript - 更改 ckeditor iframe 对话框 url

> ID：12621681
> 
> 赞同：1
> 
> 时间：2012-09-27T12:43:24.597
> 
> 标签：javascript, iframe, plugins, ckeditor, src

我正在开发一个ckeditor插件。我有一个这样的 iframe 对话框：

```
CKEDITOR.dialog.add( 'imageDialog', function ()
            {
               return {
                  title : 'add image',
                  minWidth : 700,
                  minHeight : 360,
                  contents :
                        [
                           {
                              id : 'iframe',
                              label : 'Lien',
                              expand : true,
                              elements :
                                    [
                                       {
                                          type : 'iframe',
                                          src : 'index.php',
                                          width : '100%',
                                          height : '100%',
                                          onContentLoad : function() {
                                          }
                                       }
                                    ]
                           }
                        ],
                  buttons: {disabled:true}
               };
            } ); 
```

我想在每次对话框打开时更改 src url。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T07:29:01.400

我成功地做了我想做的事！我在对话框中添加了一个 onShow 函数，其中包含：

```
this.definition.getContents('iframe').elements[0].src = iframeurl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T15:37:35.503

我会假设先前的正确答案适用于版本 3，但任何使用版本 4 的人 - 我发现这有效；

`this.definition.dialog.definition.contents[0].elements[0].src = iframeurl;`

该行在`onShow : function() { }`更改 iframe url 时起作用。可能有更好的方法来做到这一点，但我没有找到。

# c - 请告诉我我的错误

> ID：12621687
> 
> 赞同：0
> 
> 时间：2012-09-27T12:43:44.150
> 
> 标签：c, file-io, queue, fopen

这段代码应该“打开”输入的保存的txt文件，用户可以编辑......

例如，我在 save.txt 中保存了“Bob 12345 17”和“Max 123456 18”...当我打开文件文件并在我的链接列表中打印所有内容时，它只显示：“Max 123456 18”...和每当我关闭程序并尝试先打开 save.txt 而不覆盖它时，当我在链接列表中打印所有内容时它不会显示任何内容...

```
FILE* open;
char filenameopen[100];

printf ("\nType the name of the file you want to open: ");
scanf ("%s", filenameopen);
printf ("\n");

open = fopen (filenameopen, "r");
if (filenameopen == NULL)
    printf ("No such file exists\n\n");
else
{   
    phonebook_t *openentry = (phonebook_t*) malloc (sizeof(phonebook_t));
    openentry = head;

    while (1)
    {
        fscanf (open, "%s %s %d", openentry -> name, openentry -> tel, &openentry -> age);
        if (feof (open))
        {
            openentry -> next = NULL;
            break;
        }
        openentry -> next = (phonebook_t*) malloc (sizeof(phonebook_t)); 
        openentry = openentry -> next;  
    }

    fclose(open);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:47:18.737

看起来在您的`while`循环中，当您将链表分配给下一个节点时，您丢失了链表的头部......所以一旦您完成循环，您将无法打印整个列表.

将您的代码调整为如下所示：

```
//declare you head-pointer outside the scope of the if-statement
phonebook_t *ll_head = (phonebook_t*) malloc (sizeof(phonebook_t));

if (...)
{
    //...
}
else
{
    //assign a temporary pointer to use in your while-loop
    phonebook_t* openentry = ll_head;

    //...rest of your code
} 
```

现在，当您完成 while 循环后，开始打印，`ll_head`因为它仍然指向链表的开头，而不是最后一个节点。

# facebook - iPad：无法在 UIWebview 中加载 facebook 页面墙

> ID：12621697
> 
> 赞同：1
> 
> 时间：2012-09-27T12:44:09.453
> 
> 标签：facebook, ipad, facebook-graph-api, facebook-ios-sdk

我在这个问题上苦苦挣扎已经太久了。经过大量搜索后，我决定在这里发布一个问题。

**我的应用程序做什么**

1.  拍摄照片
2.  上传页面墙上的照片
3.  `UIWebview`上传完成后显示facebook页面墙

**4天前一切都按预期工作:)突然出了点问题:(**

**代码**

```
 NSString *facebookPageURL =@"https://m.facebook.com/pages/<myPageName>/<myPageID>?v=wall"
    UIWebView *webView = [[UIWebView alloc] initWithFrame:kAppFrame];
    [webView setUserInteractionEnabled:NO];
    [webView setBackgroundColor:[UIColor clearColor]];
    webView.delegate = self;
    [webView setHidden: YES];

    NSURL *url = [NSURL URLWithString:[facebookPageURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] relativeToURL:[NSURL URLWithString:@"http://login.facebook.com"]];
    NSMutableURLRequest *request = nil;

    if(url)
        request = [NSMutableURLRequest requestWithURL:url];        
       [webView loadRequest:request];
    [self.view addSubview:webView];
    [webView reload];
    [self.view bringSubviewToFront:webView];
    webView = nil; 
```

**设想**

1.  `facebookPageURL`如果我在 Safari 中打开 url`iOS Simulator`效果很好
2.  如果我在 Mac 上的任何浏览器中打开 url，它运行良好
3.  在`webView`我看到一个**白屏**
4.  如果我将`facebookPageURL`要删除的更改`?v=wall`为`?v=info`我仍然可以看到该页面。（至少不是空白屏幕）。

**注意** 1\. 我的 facebook 页面不是`unpublished`并且是可见的。2\. 我已经交叉检查了 facebook 页面的权限。

我怀疑 Facebook 方面一夜之间发生了一些变化。

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:49:54.970

似乎曾经反复无常的人`Facebook`已经取消了查看墙壁的权限。我得出了这个结论，因为当我在单独的项目中尝试相同的事情时，我得到了*信息*和*照片*，但是对于*墙壁*，它变成了灰色

因此，这里为所有遭受或可能遭受此问题的人提供解决方案。

我收到一本字典来回应这篇文章

**`{"id":"<imge_id>","post_id":"<post_id>"}`**

**`http://www.facebook.com/photo.php?fbid=<imge_id>`**

它就像一个魅力。

**编辑：1** 刚才我发现了一个问题对于有年龄限制的页面，我们需要在我的应用程序中验证哪个 SSO 不支持 UIWebView。

我不得不降级为不再使用 SSO。现在它无论如何都有效。

只需在[此处](http://www.cocoanetics.com/2012/04/disabling-facebook-sso-elegantly/)添加，您就可以找到如何巧妙地降级为`non-sso`机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:58:54.570

我想它会帮助你

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if ([(NSMutableURLRequest *)request respondsToSelector:@selector(setValue:forHTTPHeaderField:)]) {
        [(NSMutableURLRequest *)request setValue:@" Safari/537.1" forHTTPHeaderField:@"User_Agent"];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T22:57:53.830

我把头撞在墙上了一会儿。iPhone 上的相同请求和 webview 将打开一个 facebook 页面，但在 iPad 上会产生一个空白页面。更改用户代理并不能解决问题。

我可以通过使用 stringWithContentsOfURL 拉下我正在寻找的页面的 HTML 然后手动将 HTML 加载到 webview 中来破解它

如果你能提供帮助，你不想从你的主线程调用 [NSString stringWithContentsofURL，因为它会阻止你的线程直到结果返回。这是我在后台运行它并更新我已经创建并添加到名为“facebookWebView”的子视图中的 UIWebView 的解决方案：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSString *rawHTML = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.facebook.com/link.to.your.page.on.facebook"] encoding:NSASCIIStringEncoding error:nil];

        dispatch_async(dispatch_get_main_queue(), ^(void) {

            [facebookWebView loadHTMLString:rawHTML baseURL:[NSURL URLWithString:@"http://www.facebook.com"]];

        });
    }); 
```

希望这可以帮助一些人。

# php - while(1) 与 for(;;) 中的奇怪内存使用情况

> ID：12621709
> 
> 赞同：2
> 
> 时间：2012-09-27T12:45:06.757
> 
> 标签：php, performance, execution-time

我有以下2个代码。

1：

```
$i = 0;
while(1)
{
    $i++;

    echo "big text for memory usage ";
    if ( $i == 50000 )
    break;
}

echo "<br />" . memory_get_usage(); 
```

它每次都回响：`1626464`

2：

```
$i = 0;
for(;;)
{
    $i++;

    echo "big text for memory usage ";
    if ( $i == 50000 )
    break;
}

echo "<br />" . memory_get_usage(); 
```

它每次都回响：`1626656`

任何人都可以解释这两种不同的内存使用之间的差异吗？即使他们那么小……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:49:23.927

这是一个实现细节。对于 for 循环，PHP 可能会使用一些空间来存储三个指针，一个用于初始化，一个用于递增，一个用于停止条件。如果您使用的是 64 位系统，那么这说明了`64 * 3 = 192`您所看到的额外位。当然，如果不查看实际代码，很难判断我是否正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T12:50:08.770

您看到的内存差异量非常微不足道，不应该是一个问题。这两个循环的编译方式不应影响内存使用，但它们可能会影响运行时速度（尽管仍然可以忽略不计）。

例如： `while(1)`: 这将导致编译器检查是否`1`为真；如果不是，它将跳转到循环的末尾 - 如果是，它将处理循环的内容。

`for(;;)`: 一个标准的`for`循环做三件事。它定义了一个迭代器，你可以跳过它，检查迭代器是否满足条件，你也跳过它，执行正文内容，然后递增迭代器并跳回条件检查。跳转仍然在原地，但是您的代码在每个处都没有做任何事情（因此是“无限循环” - 当然，直到您手动中断）。

作为一个潜在答案的纯粹猜测 - 为什么`for`-loop 在内存中会有非常轻微的增加可能是*因为*它应该工作的方式 - 使用定义/托管的迭代器。即使您不使用它，PHP 也可以预先分配额外的空间（如果非常小）以容纳此迭代器和垃圾收集。

# ios - UIAppearance - 放置的正确位置

> ID：12621711
> 
> 赞同：3
> 
> 时间：2012-09-27T12:45:11.063
> 
> 标签：ios, uiappearance

我正在尝试更改我的应用程序的导航栏，但我无法弄清楚该代码的确切位置：

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"navigationBar.png"]]]; 
```

我已经尝试过 de AppDelegate 和第一个视图的 viewDidLoad ，但它仍然不起作用。这段代码错了吗？我可以把它放在哪里？

问候！

**编辑**

当我将此代码放在委托上时，它在 iOS 6 上运行良好，但在 iOS 5.0 和 5.1 上仍然无法运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:48:08.390

这应该适用于您的 AppDelegate 的`application:didFinishLaunchingWithOptions:`.

如果它不起作用，则可能是因为其他原因。例如，您确定`[UIImage imageNamed:@"navigationBar.png"]`不会返回吗（例如，如果您错误`nil`地从目标的“复制捆绑资源”构建文件中删除了`navigationBar.png`，或者您的文件名中有一些拼写错误）...</p>

# java - Java+mySQL：将日期读取为字符串

> ID：12621716
> 
> 赞同：3
> 
> 时间：2012-09-27T12:45:33.870
> 
> 标签：java, mysql, datetime

我尝试读出一个表格并将其写入一个 csv 文件。

```
while (rs2.next())
{
    Enumeration<String> en = sqlfields.keys();
    while (en.hasMoreElements())
    {
        String field = en.nextElement();
        String value = rs2.getString(field);
        bw.write(Kapseln + value + Kapseln + Trennzeichen);
    }

    bw.newLine();
    cur++;
} 
```

但是，如果该字段是类型：DateTime，我会收到以下错误消息：

```
java.sql.SQLException: Cannot convert value 
'0000-00-00 00:00:00' from column 12 to TIMESTAMP. 
```

为什么 Java 会尝试转换为时间戳？

我喜欢将值作为 String =>`rs2.getString(field)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:51:07.343

放

```
zeroDateTimeBehavior="convertToNull" 
```

在您的 JDBC 连接属性中。参考：[http ://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-configuration-properties.html)

**编辑**将使您的连接字符串如下所示：

```
jdbc:mysql://yourserver:3306/yourdatabase?zeroDateTimeBehavior=convertToNull 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:03:28.980

以下代码工作正常。用这个检查你的代码... emp 表的第四个字段是 jDate，它是一个 DateTime 数据类型。

```
 Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","test");

        System.out.println("Connection is : " + con);
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery("select * from emp");

        //stmt = con.createStatement();

        while(rs.next()) {
            String value = rs.getString(4);
            System.out.println(value);
        }
        System.out.println("Connection is : " + con);
        con.close(); 
```

# axapta - 更改网格中列的背景颜色

> ID：12621719
> 
> 赞同：4
> 
> 时间：2012-09-27T12:45:42.093
> 
> 标签：axapta, dynamics-ax-2009, dynamics-ax-2012

我有以下表格，我想根据其他列的值更改列的背景颜色； ![在此处输入图像描述](../Images/f1f4471a41624bfe31edfef0e8e7075d.png)

在橙色列中，我希望单元格颜色不是显示橙色背景，而是颜色属性部分下的红色、绿色和蓝色字段的 RGB 组合。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T17:19:05.313

假设您需要更改其背景的控件名为 FirstFieldControl。将其`AutoDeclaration`属性设置为`Yes`和。`BackgroundColor``Window background`

现在您需要覆盖`displayOption`数据源上的方法，例如：

```
public void displayOption(Common _record, FormRowDisplayOption _options)
{
    YourTable   yourTable   = _record;
    int         color;
    ;

    switch (yourTable.Name)
    {
         case 'Red' :
                 color = WINAPI::rgbCon2int([255, 0, 0]);
                 break;
         case 'Green' :
                 color = WINAPI::rgbCon2int([0, 255, 0]);
                 break;
         case 'Blue' :
                 color = WINAPI::rgbCon2int([0, 0, 255]);
                 break;
    }

    if (color)
    {
        _options.backColor(color);
        _options.affectedElementsByControl(FirstFieldControl.id());
    }
    else
    {
        super(_record, _options);
    }
} 
```

这只是一个给你一个想法的例子——不要复制粘贴:)

将颜色值存储在表格中更容易，代码会更好。

**PS**如果您在运行时更改颜色，您可能需要使用以下代码来刷新记录：

```
yourTable_ds.clearDisplayOption(yourTable);
yourTable_ds.refresh(); 
```

# c# - 交点 - 信封

> ID：12621723
> 
> 赞同：0
> 
> 时间：2012-09-27T12:45:48.660
> 
> 标签：c#, collections, set, intersection, set-intersection

我有`Envelope[][] extents = new Envelope[][];`建筑。每个信封具有`MinX`、和属性`MaxX`，并表示网格的一个图块（左下角和右上角）。现在我有另一个包含 和 的最小值和最大值。我想获得与.`MinY``MaxY``Envelope bounds;``X-``Y-axis``extents``bounds`

有什么简单的方法可以做到这一点`Envelope.Intersect`吗？

**[编辑]**
现在我是这样做的（蛮力 xD）：

```
List<Envelope> intersectedTiles = new List<Envelope>();
for (int i = 0; i < extents.LongLength; i++)
{
    for (int j = 0; j < extents.Length; j++)
    {
        if (extents[i][j].MinX >= bounds.MinX && extents[i][j].MaxX <= bounds.MaxX &&
            extents[i][j].MinY >= bounds.MinY && extents[i][j].MaxY <= bounds.MaxY)
        {
            intersectedTiles.Add(extents[i][j]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:05:57.040

```
private static bool Intersects(Envelope e1, Envelope e2)
{
    return e1.MinX >= e2.MinX && e1.MaxX <= e2.MaxX && e1.MinY >= e2.MinY && e1.MaxY <= e2.MaxY;
}

List<Envelope> intersectedTiles = extents.SelectMany(es => es)
    .Where(e => Intersects(e, bounds))
    .ToList(); 
```

# javascript - 将图像悬停效果和功能应用到 PSD 图像

> ID：12621729
> 
> 赞同：0
> 
> 时间：2012-09-27T12:46:16.647
> 
> 标签：javascript, jquery, html, css, psd

我正在使用分层的 PSD 图像，我需要在其上应用悬停效果和功能。我已经看到了一些使用 HTML 地图和精确坐标的示例，但我没有这些坐标，或者至少我目前不知道如何获取它们。

有任何想法吗？几乎没有坐标的[这个功能。](http://jsfiddle.net/sb9j7/)

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:51:17.680

HTML 地图适用于像素（但您称它们为坐标）。想象一个 100px * 100px 的图像。如果将该图像分成 4 个虚构的 scuares，则每个应该是 25px *25px。不，假设你想映射左上角的正方形，你只需要写“坐标”，女巫是 (0, 0, 25, 25)。即从左到右从0px，从上到下0px，从左到右到25px，从上到下到25px。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:54:35.050

你可以用dreamweaver直观地做到这一点（只是地图链接区域）

其他[工具](http://code.google.com/p/imgmap/)（下载桌面adobe-air版）

# android - 对于 String (JSONArray) 类型，方法 add(String) 未定义

> ID：12621730
> 
> 赞同：-2
> 
> 时间：2012-09-27T12:46:16.900
> 
> 标签：android, mysql, arrays, json, add

在使用 MySQL 查询从 PHP 文件中接收数据后，我想用数据填充两个数组。第一个数组有效：

```
results.add((String) json_data.get("product") + "\n" + json_data.get("owner")); 
```

但是当我添加第二个数组时：

```
mysql_id.add((String) json_data.get("id")); 
```

Eclipse 显示错误：

> 对于 String 类型，方法 add(String) 未定义

没有可用的建议，我不知道问题所在。我到处都有“mysql_id”声明为“结果”，但它不起作用！

感谢帮助！

这是完整的代码：

```
package de.maartenfricke.coffeebar;

import java.io.BufferedInputStream;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.lang.reflect.Array;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.Toast;

public class Overview extends Activity {
    InputStream is;
    ArrayList<String> results = new ArrayList<String>();
    ArrayList<String> mysql_id = new ArrayList<String>();
    JSONObject json_data;
    JSONObject json_data_2;
    Boolean dataComplete = false;   

@Override
public void onCreate(Bundle savedInstanceState) {                
    super.onCreate(savedInstanceState);

    Bundle zielkorb = getIntent().getExtras();
    String text2 = zielkorb.getString("datenpaket1");

    Context context = getApplicationContext();
    CharSequence text = "Sie haben soeben einen " + text2 + " bestellt";
    int duration = Toast.LENGTH_LONG;
    Toast toast = Toast.makeText(context, text, duration);
    toast.show();

    getData();        
    while(!this.dataComplete) {// es soll solange gewartet werden bis die ArrayList ganz gefüllt ist und die Abfrage beendet wurde
        //ProgressDialog pd = ProgressDialog.show(Overview.this,"Loading...","Frage Daten von Server ab...");
    try {
        Thread.sleep(50);
    } catch (InterruptedException e) {
    // TODO Auto-generated catch block
        e.printStackTrace();
    }
    }   
    //pd.demiss();
    this.fillList(); 

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_overview, menu);
    return true;
}

public void getData() {
    Thread t = new Thread() {   //Setzte Tread
    private String result = ""; //Setze Variable String für die Ergebnisse
    private String mysql_id = "";   //Setze Variable mysql_id für mysql_id
    public void run() {
        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();   //Definiere Arrayliste
    try {
        HttpClient httpclient = new DefaultHttpClient(); //http client ünterstützt das indirekte verbinden mit webseiten ohne Browser und upload, download etc.
        HttpPost httppost = new HttpPost("http://192.168.178.35/getAllOrders.php"); //Rufe Link auf
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } 
    catch(Exception e) {    //Wenn ein Fehler auftritt:
        Log.e("log_tag", "Fehler bei der http Verbindung "+e.toString());
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        mysql_id=sb.toString();
        result=sb.toString();

    }
    catch(Exception e) {    //Wenn ein Fehler auftritt:
        Log.e("log_tag", "Error converting result "+e.toString());
    }

    try {
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++) {
            json_data = jArray.getJSONObject(i);
            results.add((String) json_data.get("product") + "\n" + json_data.get("owner"));
            //mysql_id.add((String) json_data.get("id")); 
        }       
        dataComplete = true;
    }
    catch(JSONException e) { //Wenn ein Fehler auftritt:
    Log.e("log_tag", "Error parsing data "+e.toString());
    }
}       
};
t.start();
}

public void fillList() {
    //this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, results));

    ScrollView sv = new ScrollView(this);
    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);
    sv.addView(ll);

    for (int i = 0; i < results.size(); i++) {
        String tag = results.get(i);
        final CheckBox cb = new CheckBox(this);
        cb.setText(tag);
        cb.setTag("checkbox");
        cb.setOnCheckedChangeListener(new OnCheckedChangeListener() { 
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) { 
                // TODO Auto-generated method stub 
                if (buttonView.isChecked()) { 
                    try {
                        setOrderFinish(cb.getId());
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                } else { 
                    Toast.makeText(getBaseContext(), "UnChecked: " + buttonView + isChecked, 
                    Toast.LENGTH_SHORT).show(); 
                }
            }
        }); 
        ll.addView(cb);
    }
    this.setContentView(sv);
}

public void setOrderFinish(int product_id) throws IOException {
    URL url = new URL("http://192.168.178.35/setOrderAsFinished.php?id="+product_id);
    URLConnection urlConnection = url.openConnection();
    InputStream in = new BufferedInputStream(urlConnection.getInputStream());
    try {
        Context context = getApplicationContext();
        CharSequence text = "Finished: " + product_id;
        int duration = Toast.LENGTH_LONG;
        Toast toast = Toast.makeText(context, text, duration);
        toast.show(); 
    } finally {
        in.close();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:57:42.860

尝试使用 getString() 而不是 get()：

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;
...
for (int i = 0; i < array.length(); i++) {                                              
   JSONObject obj = array.getJSONObject(i);                                 
   String product= (obj.getString("product"));
   results.add(product);
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:48:41.760

您的 mysql_id 被重新定义为匿名线程的成员：

```
private String mysql_id = "";   //Setze Variable mysql_id für mysql_id 
```

并且也被这样使用

```
mysql_id=sb.toString(); 
```

使用不同的变量名（例如，给你的数组命名复数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:49:24.380

`ArrayList<String> results = new ArrayList<String>();`在我看来，结果的类型是 arrayList 而不是字符串。这就是为什么您可以在其上调用 add 方法的原因。

mysql_id 是 string 类型，不支持 add 方法。将其类型更改为 ArrayList

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:49:49.700

在这里你声明为字符串

```
public void getData() {
Thread t = new Thread() {   //Setzte Tread
private String result = ""; //Setze Variable String für die Ergebnisse
private String mysql_id = ""; 
```

实际上它应该是arraylist

```
ArrayList<String> results = new ArrayList<String>();
ArrayList<String> mysql_id = new ArrayList<String>(); 
```

# svn - 用于 Subversion 的 Go 绑定

> ID：12621731
> 
> 赞同：3
> 
> 时间：2012-09-27T12:46:17.987
> 
> 标签：svn, go

有没有人为 Subversion 编写过 Go 绑定？[我的意思是对Subversion API](http://subversion.apache.org/docs/api/latest/)的编程访问。如果没有我会考虑写一些。

我看了这些地方：

*   [http://go-lang.cat-v.org/library-bindings](http://go-lang.cat-v.org/library-bindings)
*   [http://godashboard.appspot.com/](http://godashboard.appspot.com/)
*   [https://www.google.com/search?q=golang+subversion](https://www.google.com/search?q=golang+subversion)
*   [https://www.google.com/search?q=golang+svn](https://www.google.com/search?q=golang+svn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:41:08.657

看起来没有任何现有的 SVN 绑定，或者至少没有什么突出的。以下是[GitHub 上](https://github.com/search?langOverride=&q=language%3Ago+svn&repo=&start_value=1&type=Repositories)的结果，尽管这可能不是检查 SVN 工具的最佳位置。正如@PW 建议的那样，您可以尝试为 SVN 任务调用系统 shell。这可能不是最理想的，但这取决于您希望在开发绑定方面付出多少努力。如果你这样做，他们肯定会受到赞赏。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-27T10:00:05.300

[https://github.com/Masterminds/vcs](https://github.com/Masterminds/vcs)
支持 - **Git、SVN、Bazaar (Bzr) 和 Mercurial (Hg)**

[https://github.com/assembla/svn2go](https://github.com/assembla/svn2go)
它围绕 libsvn-dev 的包装。

[https://godoc.org/golang.org/x/tools/go/vcs](https://godoc.org/golang.org/x/tools/go/vcs)
围绕 VCS 开发工具

# wpf - 如何从控件模板中按钮的单击事件中获取父级？

> ID：12621744
> 
> 赞同：1
> 
> 时间：2012-09-27T12:46:51.497
> 
> 标签：wpf

用户控件具有以下控件模板

```
<ControlTemplate x:Key="MarkerTemplate"  >
        <ToggleButton x:Name="btnMarkerPin" Click="btnMarkerPin_Click" >
            <ToggleButton.Template>
                <ControlTemplate>
                    <Grid>
                        <Ellipse Fill="Green" Width="25" Height="25" VerticalAlignment="Center" HorizontalAlignment="Center" ToolTip="{Binding}" />
        </Grid>
                </ControlTemplate>
            </ToggleButton.Template>               
        </ToggleButton> 
```

通过 btnMarkerPin_Click 事件，我可以将 togglebutton 对象作为 sender ，但要求是获取应用此模板的父对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:09:29.680

```
var templatedParent = ((ToggleButton)sender).TemplatedParent; 
```

# controller - EXTJS 控制器视图自动生成的 getter

> ID：12621749
> 
> 赞同：1
> 
> 时间：2012-09-27T12:47:21.293
> 
> 标签：controller, extjs, extjs4.1, getter, refs

我正在开发一个 Extjs 应用程序。这是我的控制器之一

```
Ext.define('ACP.controller.CodeTabs', {
extend: 'Ext.app.Controller',

/*
views: [
    'CodeTabs'
],
*/

refs: [
    {
        ref: 'codetabs',
        selector: 'codetabs',
    }
],

init: function() {
    this.application.on({
        addtab: this.addTab,
        closetab: this.closeTab,
    });
},

addTab: function() {
    var tabs = this.getCodetabs();
    tabs.add(
        {
            title: 'New tab',
            iconCls: 'tabs',
            html: 'VICTORY',
        }
    ).show();
},

closeTab: function() {
    alert("closetab");
},
}); 
```

这里是相关视图：

```
Ext.define('ACP.view.CodeTabs', {
extend: 'Ext.tab.Panel',
alias: 'widget.codetabs',
layout: 'fit',
items: [
    {
        title: 'Test',
        html: 'HELLO ASLAN'
    }
],
}); 
```

问题是 getter this.getCodetabs() 是未定义的。它不应该由 refs 自动生成吗？我究竟做错了什么 ？

这是我的应用程序：[http](http://atomcodepad.com/acp) : //atomcodepad.com/acp 您可以尝试单击“addtab”按钮来查看我的问题正在发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:16:10.713

您在应用程序的范围内，而不是定义 ref 的控制器。使用 getController(name) 方法获取对控制器的引用，从那里定义您的 getter。

# php - php删除特定文件夹及其所有内容

> ID：12621753
> 
> 赞同：2
> 
> 时间：2012-09-27T12:47:32.483
> 
> 标签：php, recursion, directory

我正在使用 php 删除包含已删除帖子图像的文件夹。我正在使用我在网上找到的下面的代码并且做得很好。

我想知道当文件夹中有其他文件夹时，如何仅删除文件夹中的特定文件夹。

当我使用下面的代码时，怎么可能做到这一点？使用：/dev/images/norman/8 -> 不会删除文件夹 8 使用：/dev/images/norman/ -> 将删除所有文件夹

```
Eg:
/dev/images/norman/8 -> I need to delete only this folder
/dev/images/norman/9
/dev/images/norman/10
/dev/images/norman/11
/dev/images/norman/12

<?php
$path = $_SERVER['DOCUMENT_ROOT'].'/dev/images/norman/8';

emptyDir($path);

function emptyDir($path) { 

    // INITIALIZE THE DEBUG STRING
    $debugStr  = '';
    $debugStr .= "Deleting Contents Of: $path<br /><br />";

    // PARSE THE FOLDER
    if ($handle = opendir($path)) {

        while (false !== ($file = readdir($handle))) {

            if ($file != "." && $file != "..") {

                // IF IT"S A FILE THEN DELETE IT
                if(is_file($path."/".$file)) {

                    if(unlink($path."/".$file)) {
                    $debugStr .= "Deleted File: ".$file."<br />";   
                    }

                } else {

                    // IT IS A DIRECTORY
                    // CRAWL THROUGH THE DIRECTORY AND DELETE IT'S CONTENTS

                    if($handle2 = opendir($path."/".$file)) {

                        while (false !== ($file2 = readdir($handle2))) {

                            if ($file2 != "." && $file2 != "..") {
                                if(unlink($path."/".$file."/".$file2)) {
                                $debugStr .= "Deleted File: $file/$file2<br />";    
                                }
                            }

                        }

                    }

                    if(rmdir($path."/".$file)) {
                    $debugStr .= "Directory: ".$file."<br />";  
                    }

                }

            }

        }

    }
    echo $debugStr;
}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:57:29.790

```
<?php

delete_directory($dirname) {
   if (is_dir($dirname))
      $dir_handle = opendir($dirname);
   if (!$dir_handle)
      return false;
   while($file = readdir($dir_handle)) {
      if ($file != "." && $file != "..") {
         if (!is_dir($dirname."/".$file))
            unlink($dirname."/".$file);
         else
            delete_directory($dirname.'/'.$file);    
      }
   }
   closedir($dir_handle);
   rmdir($dirname);
   return true;
 }
?> 
```

如果您使用的是 5.1 及更高版本，

```
<?php
function deleteDir($dir) {
   $iterator = new RecursiveDirectoryIterator($dir);
   foreach (new RecursiveIteratorIterator($iterator, RecursiveIteratorIterator::CHILD_FIRST) as $file) 
   {
      if ($file->isDir()) {
         rmdir($file->getPathname());
      } else {
         unlink($file->getPathname());
      }
   }
   rmdir($dir);
}

deleteDir("temporary");
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:51:14.943

你想听听[`rmdir`](http://php.net/manual/en/function.rmdir.php)。

```
if(is_file($path."/".$file)) {

    if(unlink($path."/".$file)) {
    $debugStr .= "Deleted File: ".$file."<br />";   
    }

} else {

    if(rmdir($path."/".$file)) {
        $debugStr .= "Deleted Directory: ".$file."<br />";   
    }

} 
```

编辑：由于`rmdir`只能处理空目录，您可以使用 rmdir 页面评论中报告的此解决方案：

```
function rrmdir($dir) {
    foreach(glob($dir . '/*') as $file) {
        if(is_dir($file))
            rrmdir($file);
        else
            unlink($file);
    }
    rmdir($dir);
} 
```

它只是递归地删除 中的所有内容`$dir`，然后摆脱目录本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:35:33.797

```
$path='./ggg';
rrmdir($path);
function rrmdir($dir) {
if (is_dir($dir)) {
 $objects = scandir($dir);
 foreach ($objects as $object) {
   if ($object != "." && $object != "..") {
     if (filetype($dir."/".$object) == "dir") rrmdir($dir."/".$object); else unlink($dir."/".$object);
   }
 }
 reset($objects);
 rmdir($dir);
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T12:55:52.070

您可以使用系统命令 ex。`exec("rm -rf {$dirPath}");`或者如果你想用 PHP 来做，你必须递归，循环不会做对。

```
public function deleteDir($path) {

    if ($handle = opendir($path)) {

        while (false !== ($file = readdir($handle))) {

            if ($file != "." && $file != "..") {

                // IF IT"S A FILE THEN DELETE IT
                if(is_file($path."/".$file)) {

                    if(unlink($path."/".$file)) {
                        $debugStr .= "Deleted File: ".$file."<br />";
                    }

                } else {
                    deleteDir($path."/".$file."/");
                    rmdir($path."/".$file);
                }
            }
        }
    }
} 
```

> 当我使用下面的代码时，怎么可能做到这一点？使用：/dev/images/norman/8 -> 不会删除文件夹 8 使用：/dev/images/norman/ -> 将删除所有文件夹

我认为您的问题是您在“/dev/images/norman/8”的末尾缺少“/”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:01:00.303

我`$exclude`在您的函数中添加了一个参数，该参数是一个数组，其中包含您要排除的目录名称，如下所示：

```
$path = $_SERVER['DOCUMENT_ROOT'].'/dev/images/norman/';

emptyDir($path); //will delete all under /norman/
emptyDir($path, array('8')); //will delete all under /norman/ except dir 8
emptyDir($path, array('8','10')); //will delete all under /norman/ except dir 8 and 10

function emptyDir($path,$exclude=false) { 

    // INITIALIZE THE DEBUG STRING
    $debugStr  = '';
    $debugStr .= "Deleting Contents Of: $path<br /><br />";
    if (!$exclude) {
       $exclude = array();
    }

    // PARSE THE FOLDER
    if ($handle = opendir($path)) {

        while (false !== ($file = readdir($handle))) {

            if ($file != "." && $file != "..") {

                // IF IT"S A FILE THEN DELETE IT
                if(is_file($path."/".$file)) {

                    if(unlink($path."/".$file)) {
                    $debugStr .= "Deleted File: ".$file."<br />";   
                    }

                } else if (!in_array($file, $exclude)) {

                    // IT IS A DIRECTORY
                    // CRAWL THROUGH THE DIRECTORY AND DELETE IT'S CONTENTS

                    if($handle2 = opendir($path."/".$file)) {

                        while (false !== ($file2 = readdir($handle2))) {

                            if ($file2 != "." && $file2 != "..") {
                                if(unlink($path."/".$file."/".$file2)) {
                                $debugStr .= "Deleted File: $file/$file2<br />";    
                                }
                            }

                        }

                    }

                    if(rmdir($path."/".$file)) {
                    $debugStr .= "Directory: ".$file."<br />";  
                    }

                }

            }

        }

    }
    echo $debugStr;
} 
```

# php - PHP：如何在 php 中降级 gd 库

> ID：12621759
> 
> 赞同：0
> 
> 时间：2012-09-27T12:48:09.113
> 
> 标签：php, gdlib

是否可以降级 gd-library，如果可以，请告诉我 how.google 没有帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:56:53.940

1.  完全卸载当前库
2.  下载你想要的gd版本的源文件
3.  提取档案
4.  ./configure && make && make install（在谷歌上搜索如何从源代码安装 GD）。
5.  进行所需的任何配置编辑（即将库添加到 php.ini）。

GD 来源可以在这里找到：[https ://bitbucket.org/pierrejoye/gd-libgd/downloads](https://bitbucket.org/pierrejoye/gd-libgd/downloads)

# ios - 需要根据苹果的应用提交指南修改澳大利亚的 GeoJson 文件吗？

> ID：12621765
> 
> 赞同：0
> 
> 时间：2012-09-27T12:48:22.407
> 
> 标签：ios

在将我的应用程序提交到应用商店时，我需要为澳大利亚上传 geo.json 文件。在苹果的 iTunes Connect 上，提到 geo.json 文件必须有一个多边形元素，并且在 multipolygon 元素内必须至少有一个多边形元素的开始和结束坐标应该相同。下面是澳大利亚的 geo.json 数据，但它在 multipolygon 元素中没有任何多边形元素。我需要在下面的书面代码中进行哪些更改：

```
{"type":"FeatureCollection","features":[
{"type":"Feature","properties":{"name":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[145.397978,-40.792549],[146.364121,-41.137695],[146.908584,-41.000546],[147.689259,-40.808258],[148.289068,-40.875438],[148.359865,-42.062445],[148.017301,-42.407024],[147.914052,-43.211522],[147.564564,-42.937689],[146.870343,-43.634597],[146.663327,-43.580854],[146.048378,-43.549745],[145.43193,-42.693776],[145.29509,-42.03361],[144.718071,-41.162552],[144.743755,-40.703975],[145.397978,-40.792549]]],[[[143.561811,-13.763656],[143.922099,-14.548311],[144.563714,-14.171176],[144.894908,-14.594458],[145.374724,-14.984976],[145.271991,-15.428205],[145.48526,-16.285672],[145.637033,-16.784918],[145.888904,-16.906926],[146.160309,-17.761655],[146.063674,-18.280073],[146.387478,-18.958274],[147.471082,-19.480723],[148.177602,-19.955939],[148.848414,-20.39121],[148.717465,-20.633469],[149.28942,-21.260511],[149.678337,-22.342512],[150.077382,-22.122784],[150.482939,-22.556142],[150.727265,-22.402405],[150.899554,-23.462237],[151.609175,-24.076256],[152.07354,-24.457887],[152.855197,-25.267501],[153.136162,-26.071173],[153.161949,-26.641319],[153.092909,-27.2603],[153.569469,-28.110067],[153.512108,-28.995077],[153.339095,-29.458202],[153.069241,-30.35024],[153.089602,-30.923642],[152.891578,-31.640446],[152.450002,-32.550003],[151.709117,-33.041342],[151.343972,-33.816023],[151.010555,-34.31036],[150.714139,-35.17346],[150.32822,-35.671879],[150.075212,-36.420206],[149.946124,-37.109052],[149.997284,-37.425261],[149.423882,-37.772681],[148.304622,-37.809061],[147.381733,-38.219217],[146.922123,-38.606532],[146.317922,-39.035757],[145.489652,-38.593768],[144.876976,-38.417448],[145.032212,-37.896188],[144.485682,-38.085324],[143.609974,-38.809465],[142.745427,-38.538268],[142.17833,-38.380034],[141.606582,-38.308514],[140.638579,-38.019333],[139.992158,-37.402936],[139.806588,-36.643603],[139.574148,-36.138362],[139.082808,-35.732754],[138.120748,-35.612296],[138.449462,-35.127261],[138.207564,-34.384723],[137.71917,-35.076825],[136.829406,-35.260535],[137.352371,-34.707339],[137.503886,-34.130268],[137.890116,-33.640479],[137.810328,-32.900007],[136.996837,-33.752771],[136.372069,-34.094766],[135.989043,-34.890118],[135.208213,-34.47867],[135.239218,-33.947953],[134.613417,-33.222778],[134.085904,-32.848072],[134.273903,-32.617234],[132.990777,-32.011224],[132.288081,-31.982647],[131.326331,-31.495803],[129.535794,-31.590423],[128.240938,-31.948489],[127.102867,-32.282267],[126.148714,-32.215966],[125.088623,-32.728751],[124.221648,-32.959487],[124.028947,-33.483847],[123.659667,-33.890179],[122.811036,-33.914467],[122.183064,-34.003402],[121.299191,-33.821036],[120.580268,-33.930177],[119.893695,-33.976065],[119.298899,-34.509366],[119.007341,-34.464149],[118.505718,-34.746819],[118.024972,-35.064733],[117.295507,-35.025459],[116.625109,-35.025097],[115.564347,-34.386428],[115.026809,-34.196517],[115.048616,-33.623425],[115.545123,-33.487258],[115.714674,-33.259572],[115.679379,-32.900369],[115.801645,-32.205062],[115.689611,-31.612437],[115.160909,-30.601594],[114.997043,-30.030725],[115.040038,-29.461095],[114.641974,-28.810231],[114.616498,-28.516399],[114.173579,-28.118077],[114.048884,-27.334765],[113.477498,-26.543134],[113.338953,-26.116545],[113.778358,-26.549025],[113.440962,-25.621278],[113.936901,-25.911235],[114.232852,-26.298446],[114.216161,-25.786281],[113.721255,-24.998939],[113.625344,-24.683971],[113.393523,-24.384764],[113.502044,-23.80635],[113.706993,-23.560215],[113.843418,-23.059987],[113.736552,-22.475475],[114.149756,-21.755881],[114.225307,-22.517488],[114.647762,-21.82952],[115.460167,-21.495173],[115.947373,-21.068688],[116.711615,-20.701682],[117.166316,-20.623599],[117.441545,-20.746899],[118.229559,-20.374208],[118.836085,-20.263311],[118.987807,-20.044203],[119.252494,-19.952942],[119.805225,-19.976506],[120.85622,-19.683708],[121.399856,-19.239756],[121.655138,-18.705318],[122.241665,-18.197649],[122.286624,-17.798603],[122.312772,-17.254967],[123.012574,-16.4052],[123.433789,-17.268558],[123.859345,-17.069035],[123.503242,-16.596506],[123.817073,-16.111316],[124.258287,-16.327944],[124.379726,-15.56706],[124.926153,-15.0751],[125.167275,-14.680396],[125.670087,-14.51007],[125.685796,-14.230656],[126.125149,-14.347341],[126.142823,-14.095987],[126.582589,-13.952791],[127.065867,-13.817968],[127.804633,-14.276906],[128.35969,-14.86917],[128.985543,-14.875991],[129.621473,-14.969784],[129.4096,-14.42067],[129.888641,-13.618703],[130.339466,-13.357376],[130.183506,-13.10752],[130.617795,-12.536392],[131.223495,-12.183649],[131.735091,-12.302453],[132.575298,-12.114041],[132.557212,-11.603012],[131.824698,-11.273782],[132.357224,-11.128519],[133.019561,-11.376411],[133.550846,-11.786515],[134.393068,-12.042365],[134.678632,-11.941183],[135.298491,-12.248606],[135.882693,-11.962267],[136.258381,-12.049342],[136.492475,-11.857209],[136.95162,-12.351959],[136.685125,-12.887223],[136.305407,-13.29123],[135.961758,-13.324509],[136.077617,-13.724278],[135.783836,-14.223989],[135.428664,-14.715432],[135.500184,-14.997741],[136.295175,-15.550265],[137.06536,-15.870762],[137.580471,-16.215082],[138.303217,-16.807604],[138.585164,-16.806622],[139.108543,-17.062679],[139.260575,-17.371601],[140.215245,-17.710805],[140.875463,-17.369069],[141.07111,-16.832047],[141.274095,-16.38887],[141.398222,-15.840532],[141.702183,-15.044921],[141.56338,-14.561333],[141.63552,-14.270395],[141.519869,-13.698078],[141.65092,-12.944688],[141.842691,-12.741548],[141.68699,-12.407614],[141.928629,-11.877466],[142.118488,-11.328042],[142.143706,-11.042737],[142.51526,-10.668186],[142.79731,-11.157355],[142.866763,-11.784707],[143.115947,-11.90563],[143.158632,-12.325656],[143.522124,-12.834358],[143.597158,-13.400422],[143.561811,-13.763656]]]]},"id":"AUS"}
]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:51:04.160

“每个多边形必须代表一个封闭区域 - 即第一个和最后一个坐标值必须始终相同”在您的情况下，您需要使用 [145.397978,-40.792549]]]]

# bash - 如何在服务器上退出 bash 模式

> ID：12621767
> 
> 赞同：0
> 
> 时间：2012-09-27T12:48:23.930
> 
> 标签：bash

> **可能重复：**
> [退出 Bash 模式？](https://stackoverflow.com/questions/10523431/exit-bash-mode)

每次我进入我的服务器时，我现在都处于 Bash 模式。

我不想进入 bash 模式，因为在这种模式下，我的左侧没有当前路径。

这个问题已经在这里问过： [退出 Bash 模式？](https://stackoverflow.com/questions/10523431/exit-bash-mode#comment16992733_10523431)
但是 OP 接受了一个不是真正答案的答案。

我已经尝试过“重置”并删除了我的 .bashrc 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:51:50.840

如果要使用 sh，请尝试“chsh -s /bin/sh”。要查看可用的 shell，请使用“cat /etc/shells”。您还可以通过“echo $0”查看您当前的 shell，只需“exec /bin/sh”即可更改会话的 shell（而不是 perm）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:59:42.363

更改默认 shell - /etc/passwd - 为您的 unix 帐户：

```
username:x:1000:1000:,,,:/home/username:/bin/bash
                                        ^^^^^^^^^ 
```

# svn - 在提交之前强制 svn

> ID：12621775
> 
> 赞同：1
> 
> 时间：2012-09-27T12:49:01.143
> 
> 标签：svn, version-control

我一直在使用 svn fast and furious 来进行提交，因为我是空想，我似乎不记得在提交之前要“svn up”。有谁知道 svn 在提交之前强制执行“svn up”的方法？我在 Ubuntu 上使用 svn。非常感谢！珍妮

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T12:52:11.027

在你的 shell 中为你自己创建一个别名。像这样的东西：

```
svnci = svn up;svn ci 
```

甚至是你的 $ 中的一个小 shell 脚本`PATH`

但是，当这种情况发生时，您将如何管理合并冲突和编译错误？

`svn commit`不应该允许你提交（好吧，服务器不应该），除非你的工作副本已经达到了`HEAD`修订版。因此，在您当前的状态下，最糟糕的情况是您的提交被服务器拒绝。

# iphone - 在单独的文件中定义委托函数（而不是在 ViewController 中）

> ID：12621776
> 
> 赞同：1
> 
> 时间：2012-09-27T12:49:07.640
> 
> 标签：iphone, ios, xcode, ios5

我有一个 ViewController 和一个 UIView。UIView 有一个委托，委托功能是在 ViewController 中设置的。

**我想做的就是在单独的文件中定义委托函数。**所以 UIView.m #imports 单独的文件，而不是所有使用 UIView 的 ViewControllers。

我相信这是一个标准程序，但为了让它发挥作用，我一直在为自己摔倒。:| 非常感谢一些帮助。谢谢。

**我的视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "myUIView.h"
@protocol ModalViewDelegate                     
-(void)didReceiveMessage:(NSString *)message;   
@end
@interface myViewController : UIViewController <ModalViewDelegate>
@property (nonatomic, strong) myUIView *myUIViewItem;
@end 
```

**我的视图控制器.m**

```
#import "myViewController.h"
#import "myUIView.h"
@interface myViewController ()
@end
@implementation myViewController

@synthesize myUIViewItem;
- (void)didReceiveMessage:(NSString *)message { //<<< THIS IS WHAT
    NSLog(@"Message from button: %@", message); //<<< NEEDS MOVING
}
- (void)viewDidLoad
{
…
myUIViewItem.delegate = self;
… 
```

**我的UIView.h**

```
#import <UIKit/UIKit.h>
@protocol ModalViewDelegate;
@interface myUIView : UIView {
    id<ModalViewDelegate> delegate;
}
@property (nonatomic, strong) id<ModalViewDelegate> delegate; 
```

**我的UIView.m**

```
#import "myUIView.h"
#import "myViewController.h"
@implementation myUIView
@synthesize delegate;
...
[delegate didReceiveMessage:@"Data from UIView!"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:17:08.423

嗯，实际上有一种方法，

只需获取一个 .h 文件，然后说`connectionDelegate.h`并声明您的协议初始化

在 connectionDelegate.h 中：

```
 #import <UIKit/UIKit.h>  
     @protocol ConnectionDelegate
     -(void)getResult:(NSString*)_result;
     @end 
```

然后在您的视图控制器中：

```
 #import "ConnectionDelegate.h"

 @interface myViewController : UIViewController <ConnectionDelegate>
{
 id delegate;
} 
```

然后在 .m 文件中，只需调用该方法

```
[delegate getResult:_result]; 
```

**关于警告的**编辑：****

 **您需要在视图控制器中声明该方法，您需要这样做。

```
 [self getResult:urlDataString];

-(void)getResult:(NSString*)_result{
    [delegate getResult:_result];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:32:02.503

根据您的评论：

> 我想在单独的文件中定义函数“didReceiveMessage”。这样我就不必在每个使用 UIView 和委托的 ViewController 中重复它。例如 ModalViewDelegate_Action.h 和 ModalViewDelegate_Action.m

给我的方法是使用子类，这对我来说效果很好。在我的 iOS 项目中，我有一个名为 BaseViewController 的类，它是 UIViewController 的子类。我在其中放了很多与 HUD 管理、NSOperations 管理等相关的代码。然后几乎我所有的视图控制器都是它的子类。**

# c# - CheckedListBox 和检查项目列表及其索引

> ID：12621778
> 
> 赞同：6
> 
> 时间：2012-09-27T12:49:19.520
> 
> 标签：c#, winforms, checkedlistbox

我有一个`CheckedListBox`这样的：

```
:'''''''''''''''/\
: [ ] item1     ||
: [x] item2     ||
: [ ] item3     ##
: [ ] item4     ||
: [x] item5     ||
L...............\/ 
```

现在我想提取检查项目的索引：

```
int[] indexes = ExtractCheckedIndexes (myCheckedListBox); 
```

现在索引应该有 2 个元素 = { 1, 4 }。
如何做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T13:43:21.753

```
int[] indexes = myCheckedListBox.CheckedIndices.Cast<int>().ToArray() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:50:43.227

MSDN 示例：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.checkeditems.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.checkeditems.aspx)

# google-app-engine - appengine 数据存储中的引用计数是个好主意吗？

> ID：12621783
> 
> 赞同：0
> 
> 时间：2012-09-27T12:49:29.373
> 
> 标签：google-app-engine, datastore

当我在考虑实现一个系统，使用户能够相互发送消息时，我想到了如果不是为每个接收者保存消息副本，而是保存一条消息，你可以保存的数据量接收者名单。

实际上会有 3 个列表，一个接收者列表，一个布尔值列表，如果 b[i]，则接收者[i] 已阅读该消息，第三个列表包含所有未删除该消息的用户。每天，我都会运行一个 cron 作业，查找包含此类用户的空列表的消息，然后将其删除。

这个模型会不会有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:11:03.417

第一个模式，就像试图复制电子邮件架构，它已经过时并且不能很好地工作。

当然，第二种方法更好。

问题？没有人，而您的代码没有错误。但是，如果您必须支持他们，请考虑回复。如果实例不超过 1M 大小限制，也许第四个列表就足够了。

但实际上，答案的分离模型更加一致和直观。这个新模型还将有类似的列表：`readed_by`、`deleted_by`等。

cron 作业可能是不必要的。*如果*`message.deleted_by == message.receivers + message.from`. _ _

# c# - 单选按钮不返回所选值

> ID：12621785
> 
> 赞同：0
> 
> 时间：2012-09-27T12:49:33.397
> 
> 标签：c#, asp.net

我在asp.net 中使用单选按钮列表控件。我试图在按钮单击事件上获取选定的值，但是，我得到`Empty string` 并且我想要它没有 javascript。

我怎样才能做到这一点？

```
<asp:RadioButtonList ID="RadioButtonList1" EnableViewState="true" runat="server" 
    Width="287px">
<asp:ListItem Value="Single" runat="server" Text="Single"></asp:ListItem>
<asp:ListItem Value="Jointly" runat="server" Text="Married Filing Jointly/Widower"></asp:ListItem>
<asp:ListItem Value="Separately" runat="server" Text="Married Filing Separately"></asp:ListItem>
<asp:ListItem Value="Household" runat="server" Text="Head Of Household "></asp:ListItem>
</asp:RadioButtonList> 
```

C# 代码

```
protected void btnCalculate_Click(object sender, EventArgs e)
{
    string selectedValue = RadioButtonList1.SelectedValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:18:55.100

当您绑定 RadioButtonList 时，您可以将代码放入 中，以便在发布控件（单击事件）时`! IsPostback`不要选择您的值。`erase`

页面加载：

```
if(! isPostBack)
{
   //Bind your radioButtonList

}` 
```

注意：您将数据持久化为`ViewState`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:59:40.040

首先在 page_load 中检查您的回发事件。然后您可以使用**RadioButtonList1.SelectedValue**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T12:54:55.173

**MSDN 对 RadioButtonList SelectedValue 的备注**

> 此属性返回所选 ListItem 的 Value 属性。SelectedValue 属性通常用于确定列表控件中选定项的值。如果选择了多个项目，则返回具有最低索引的选定项目的值。*如果未选择任何项目，则返回一个空字符串 ("")。*

所以建议 #1 是您至少使用属性 Selected="true" 将项目作为默认选择

建议 #2 将（只是一种意见）为了便于阅读使用 SelectedItem.Value

```
protected void btnCalculate_Click(object sender, EventArgs e)
{
    string selectedValue = RadioButtonList1.SelectedItem.Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:07:07.467

或者你可以使用：--

```
string selectedValue = RadioButtonList1.SelectedValue.ToString(); 
```

# wordpress - 我的菜单栏“菜单”正在消失我应该怎么做才能显示它？

> ID：12621787
> 
> 赞同：0
> 
> 时间：2012-09-27T12:49:44.107
> 
> 标签：wordpress

我在这里想念的是**在外观下**设置功能“菜单”吗？

我正在构建新主题。

我有以下代码来定义菜单，但正如您在图像中看到的那样，它消失了。

非常感谢

**头文件.php**

```
<nav id="access" role="navigation">
                <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
                <?php /* Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
                <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>

                <?php /* Our navigation menu. If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assigned to the primary location is the one used. If one isn't assigned, the menu with the lowest ID is used. */ ?>
                <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
            </nav><!-- #access --> 
```

**函数.php**

```
// This theme uses wp_nav_menu() in one location.
    register_nav_menu( 'primary', __( 'Primary Menu', 'twentyeleven' ) ); 
```

**索引.php**

```
<?php twentyeleven_content_nav( 'nav-above' ); ?> 
```

![在此处输入图像描述](../Images/e17da7cbc4581808fa349fc542cced24.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:09:46.847

确保在 Functions.php 文件中打开菜单支持。

```
 if (function_exists('add_theme_support')) {
          add_theme_support('menus');
    } 
```

更多信息在这里： [http ://templatic.com/news/wordpress-3-0-menu-management/](http://templatic.com/news/wordpress-3-0-menu-management/)

# assembly - 了解lui操作MIPS组装

> ID：12621790
> 
> 赞同：1
> 
> 时间：2012-09-27T12:49:54.617
> 
> 标签：assembly, mips

我是 MIPS 程序集的新手，我正在尝试了解 lui 操作的工作原理。我知道它代表“立即加载”并阅读了一些关于它的内容，但不确定如何使用它来解决问题。我希望有人可以引导我完成一些简单的代码来演示 lui 的功能。

提前致谢。

# windows-8 - 使用 Visual Studio 2012 在第二台显示器上调试 WinRT 应用程序

> ID：12621794
> 
> 赞同：6
> 
> 时间：2012-09-27T12:50:17.407
> 
> 标签：windows-8, windows-runtime

当我运行或调试 winrt 应用程序时，Visual Studio 2012 似乎总是在同一个监视器上启动它。

如何强制 Visual Studio 2012 在我的另一台显示器上启动应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T13:13:04.940

Windows 将部署到您上次查看“开始”屏幕的哪个监视器。所以，这就是我要做的。

*   在主监视器中启动 VS
*   在辅助显示器上调出魅力栏并选择开始魅力
*   在主监视器中从 VS 启动调试

您的应用程序现在应该在辅助监视器中启动。

我不知道是否有办法设置一个选项来做到这一点 - 我还没有找到一个，但看起来并不难，因为这对我来说很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-07T16:40:41.840

在 Win8.1 上，应用程序似乎总是在主显示器上打开。我交换了我的主要和次要显示器（右键单击桌面 -> 屏幕分辨率 -> “将此作为我的主显示器”）。

我还自定义了我的任务栏，使其出现在所有显示器上（右键单击任务栏-> 属性->“在所有显示器上显示任务栏”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:08:01.067

您只需激活要启动应用程序的 Metro 屏幕！或者之后你可以使用这些快捷键：Win+PageUp 和 Win+PageDown 来切换

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:13:21.973

您不能强制应用程序在第二台显示器上启动，但您可以将 Visual Studio 2012 移动到第二台显示器并在第一台显示器上启动 WinRT 应用程序。如果需要，交换或移动主显示器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T08:09:21.240

您还可以将应用程序本身拖到备用监视器。正如其他人所指出的，这些应用程序将继续在您使用的最后一个显示器上打开。

更新：如果您有 Visual Studio 2013，最新更新会记住用于运行 WinRT 应用程序的监视器并在该屏幕上打开它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-27T13:10:03.347

我想，这是不可能的。您唯一的解决方案是将其移动到该监视器，然后在调试时仅在其上打开开始屏幕。在这种情况下，Win Store 应用程序将在那里打开

# mysql - SQL：按不变状态间隔长度分组

> ID：12621795
> 
> 赞同：1
> 
> 时间：2012-09-27T12:50:28.000
> 
> 标签：mysql, sql, join, group-by

有一个`event`带有属性`start`, `end`,的表`status`。可能有以下条目：

```
09:00:00 27.09.2012 10:00:00 27.09.2012 有效
10:00:00 27.09.2012 11:00:00 27.09.2012 有效
11:00:00 27.09.2012 12:00:00 27.09.2012 活动
12:00:00 27.09.2012 13:00:00 27.09.2012 睡觉
13:00:00 27.09.2012 14:00:00 27.09.2012 睡觉
14:00:00 27.09.2012 15:00:00 27.09.2012 活跃

```

现在我想提取状态没有改变的间隔。这个例子的结果是：

```
09:00:00 27.09.2012 12:00:00 27.09.2012 有效
12:00:00 27.09.2012 14:00:00 27.09.2012 睡觉
14:00:00 27.09.2012 15:00:00 27.09.2012 活跃

```

是否有一些 SQL 习惯用法来创建这种结果？我正在使用 MySQL，但如果你给我一些其他 SQL 方言，我也可以翻译它，只要它不使用一些奇怪的供应商功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:12:44.620

假设时间段不重叠，您可以在 MySQL 中使用相关子查询执行此操作：

```
 select min(start) as start, max(end) as end, e.status
 from (select e.*,
             (select min(start)
              from event e2
              where e2.status <> e.status and e2.start > e.start
             ) as nextperiodstart
      from event e
     ) e
 group by status, nextperiodstart
 order by 1 
```

这使用下一个周期的开始来标识正在完成的组。

顺便说一句，在几乎任何其他数据库中，我都会以非常不同的方式执行此操作，使用`ROW_NUMBER`MySQL 不支持的 ANSI 标准函数。小心你所说的“一些奇怪的供应商功能”。大多数数据库在某种程度上偏离了标准。这是 MySQL 偏离的一种方式。

# java - 在 Eclipse 中开发的 Java 应用程序在网页中不起作用

> ID：12621796
> 
> 赞同：0
> 
> 时间：2012-09-27T12:50:31.110
> 
> 标签：java, html, eclipse, japplet

我为一个站点开发了一个小型 JApplet。这是我第一次做这样的事情，所以这可能是一个愚蠢的错误或误解，但我无法找出它是什么。

这是从 HTML 调用的第一个类：

```
public class MapGenerator extends JApplet {

    private static final long serialVersionUID = 1L;
    private int numero_immagini;
    private BufferedImage[] images;
    private int[] floors;

    private static final String N_IMMAGINI = "numero_immagini";
    private static final String IMMAGINE = "immagine";
    private static final String PIANO_IMMAGINE ="numero_piano";

    public void init() {

        numero_immagini = Integer.parseInt(this.getParameter(N_IMMAGINI));

        images = new BufferedImage[numero_immagini];
        floors = new int[numero_immagini];

            for(int i=0; i< numero_immagini; i++) {
                try {
                    URL url = new URL(this.getParameter(IMMAGINE+i));
                    images[i] = ImageIO.read(url);
                    floors[i] = Integer.parseInt(this.getParameter(PIANO_IMMAGINE+i));
                } catch (IOException ioe) {}
            }    
    }

    public void start() {

        Editor ed = new Editor(this.getContentPane(), images, floors);

        this.setSize(400, 400);

        this.add(ed.getPanel());

        Toolkit kit = this.getToolkit();
        Dimension dim = kit.getScreenSize();
        this.setBounds(dim.width/4, dim.height/4, dim.width/4, dim.height/4);
        this.setVisible(true);
        this.repaint();
    }
} 
```

这是HTML：

```
<applet code="MapGenerator.class"
    archive="MapGenerator.jar"
    width= 400 height = 200>

        <param name=numero_immagini value=1>
        <param name=immagine0 value="IMG_20111009_171138.jpg">
        <param name=numero_piano0 value=0>
</applet> 
```

在 Eclipse 中我根本没有任何问题，但是当我尝试使用 Chrome 时，页面只显示一个灰色框。

感谢大家的帮助。

编辑

该应用程序无法从我传递的链接加载图像。

它使用随机链接图像进行测试

```
java.security.AccessControlException: access denied (java.net.SocketPermission www.hyros.net:80 connect,resolve)
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:15:32.993

问题是代码，而不是我使用 HTML、jar 文件或其他东西的方式，所以我[在这里](https://stackoverflow.com/questions/12624572/java-applet-cant-load-images-from-web)打开了一个新问题，以更正确的方式描述问题。

谢谢您的回答。

# asp.net-mvc - 将数据从控制器超类传递到视图？

> ID：12621801
> 
> 赞同：0
> 
> 时间：2012-09-27T12:50:41.577
> 
> 标签：asp.net-mvc

我正在编写一个 Asp.net MVC 应用程序（我的第一个 MVC 应用程序）。我需要将数据传递给 _Layout 视图以自定义页面上的页眉和页脚 - 哪些用户已登录，如果他们有任何通知等。_Layout 页面始终需要此信息，但子页面不需要。

我应该如何将这些数据传递给视图？我可以创建一个`LoggedInUser`视图可以访问的属性，就像有一个`Model`和一样`ViewBag`吗？ `LoggedInUser`可以由基本控制器类填充。

还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:07:43.393

要检测身份验证：

```
User.Identity.IsAuthenticated 
```

然后你可以使用部分[ASP.NET MVC 3: Layouts and Sections with Razor](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx) or/and `@Html.RenderAction`( [Html.RenderAction 和 Html.Action](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:31:02.257

如果您使用 MembershipProvider 和/或 RoleProvider ，您可以按照 webdeveloper 指出的方式获取当前用户的身份`User.Identity.Name`，如果显示它的名称是您想要的。

您也可以输入您`_layout`的型号以使用特定型号，但我不建议这样做。有关更多详细信息，请参阅此[问题](https://stackoverflow.com/q/4154407/544283)的[答案](https://stackoverflow.com/a/4155413/544283)。

最后，您可以在控制器上填充 ViewBag 属性以获取所需的用户信息。

我想指出你可以做一个局部视图来实现这一点，并避免`_layout`在每个请求上键入和填充 ViewBag。

# database - 需要帮助替换 Visual Studio 2005 中已部署项目的访问 db 文件

> ID：12621803
> 
> 赞同：1
> 
> 时间：2012-09-27T12:50:52.313
> 
> 标签：database, vb.net, ms-access, visual-studio-2005

几年前，我在 Windows XP 上使用 Access DB 开发了一个基于 VB 的 VS2005 应用程序，它一直运行良好，直到迁移到 Windows 7。我通过更改为 x64 平台重新构建了解决方案，同时修改了 Access DB有点导致解决方案中包含一个新的 Access DB 文件。当我在 VS2005 中调试时，我的 project\x86\Release 文件夹中有新版本的 DB，并成功访问了这个新版本。

问题是，一旦我创建了部署解决方案，部署的应用程序就会继续打开旧版本的访问数据库 (mdb) 文件。即使从已安装的文件夹中删除了 mdb，我也无法找到它从哪里打开旧版本的 DB。我在网络上进行了很多挖掘和研究，但无法找到解决这个问题的方法。

有人可以帮忙告诉我如何让我部署的应用程序打开新版本的数据库吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:06:11.933

听起来您不允许虚拟化-您知道吗？出于安全原因，在 XP（Vista 及更高版本）之后，Microsoft 不允许写入 Programs 文件夹，如果遇到尝试执行此操作的应用程序，则会复制尝试写入的文件（在您的情况下为 Access 数据库）并放置它隐藏在临时用户的某个地方（目前不记得确切的位置）。

例如，如果您在 .exe 文件的同一位置查看 Win 7 计算机上的数据库，我应该认为您会发现它未使用 - 由于它安装在计算机上，操作系统一直将请求重定向到读取/将您的数据库写入它为您创建的虚拟化副本。

所以，首先找到这个另一个副本（对不起，我目前在 Mac 上，不记得位置），看看它是否包含您的应用程序正在创建的数据。然后尝试替换您的新数据库（当然首先复制旧数据库）并查看您的应用程序是否可以读取/写入它。

然后是在应用程序安装期间处理数据库替换的问题。

但是，您应该认真考虑将数据库放置在未虚拟化的位置！

# android - 使用复选框在自定义列表视图中保存复选框的状态

> ID：12621804
> 
> 赞同：2
> 
> 时间：2012-09-27T12:50:57.673
> 
> 标签：android, listview, checkbox, sharedpreferences

我有一个带有复选框的列表视图，我希望当用户选择任何复选框并关闭应用程序并再次打开应用程序时，应该选择相同的复选框。即我必须使用 sharedpref 方法保存列表视图项目的复选框的状态。在这里我已经实现了相同的，但没有得到想要的结果，我已经尝试了很多，请帮助我。

MyCustomAdapter.java

```
public class MyCustomBaseAdapter extends BaseAdapter implements OnCheckedChangeListener {
    private static ArrayList<SearchResults> searchArrayList;
    ViewHolder holder;
    private LayoutInflater mInflater;
    Editor editor;
    Context context;

    public MyCustomBaseAdapter(Context context, ArrayList<SearchResults> results) {
        searchArrayList = results;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return searchArrayList.size();

    }

    public Object getItem(int position) {
        return searchArrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        SharedPreferences sharedPrefs = context.getSharedPreferences("sharedPrefs", Context.MODE_PRIVATE);

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_row_view, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.name);
            holder.cB = (CheckBox)convertView.findViewById(R.id.cb_category);

            convertView.setTag(holder);
        } 
        else {
            holder = (ViewHolder) convertView.getTag();
        }

        editor = sharedPrefs.edit();

        holder.txtName.setText(searchArrayList.get(position).getName());

        holder.cB.setChecked(sharedPrefs.getBoolean("CheckValue", false));

        return convertView;
    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        // TODO Auto-generated method stub

        if(holder.cB.isChecked()){

            editor.putBoolean("CheckValue", holder.cB.isChecked());
            editor.commit();
        }
    }

    static class ViewHolder {
        TextView txtName;
        CheckBox cB;
    }

} 
```

CutmListviewActivity.java

```
public class CustomListViewActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<SearchResults> searchResults = GetSearchResults();

        final ListView lv1 = (ListView) findViewById(R.id.ListView01);
        lv1.setAdapter(new MyCustomBaseAdapter(this, searchResults));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View view, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                SearchResults fullObject = (SearchResults)o;
                String s=fullObject.getName().toString();
                Toast.makeText(CustomListViewActivity.this, "You have chosen: " + " " + s, Toast.LENGTH_LONG).show();
                Toast.makeText(CustomListViewActivity.this, s, Toast.LENGTH_LONG).show();

            }  
        });

    }

    private ArrayList<SearchResults> GetSearchResults()
    {
        ArrayList<SearchResults> results = new ArrayList<SearchResults>();

        SearchResults sr1 = new SearchResults();
        sr1.setName("John Smith");

        results.add(sr1);

        sr1 = new SearchResults();
        sr1.setName("Jane Doe");

        results.add(sr1);

        sr1 = new SearchResults();
        sr1.setName("Steve Young");

        results.add(sr1);

        sr1 = new SearchResults();
        sr1.setName("Fred Jones");

        results.add(sr1);

        return results;
    }
} 
```

GetterSetter 类

```
package com.list;

public class SearchResults {
     private String name = "";

     public void setName(String name) {
      this.name = name;
     }

     public String getName() {
      return name;
     }

    } 
```

row_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  >
  <TextView 
  android:id="@+id/name"
  android:textSize="14sp" 
  android:textStyle="bold" 
  android:textColor="#FFFFFF" 
  android:layout_width="wrap_content" 
  android:layout_height="wrap_content"
  android:text="TextView"/>

  <CheckBox 
      android:id="@+id/cb_category"
      android:layout_height="wrap_content"
      android:layout_width="wrap_content"
      android:layout_marginLeft="25dp"/>

</LinearLayout> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:text="Custom ListView Contents" />

    <ListView
        android:id="@+id/ListView01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T13:01:23.003

您的代码几乎是正确的。只需要做一些改变...

检查我的`setOnCheckedChangeListener`复选框代码..我希望它会起作用

```
public class MyCustomBaseAdapter extends BaseAdapter {
    private static ArrayList<SearchResults> searchArrayList;
    ViewHolder holder;
    private LayoutInflater mInflater;
    Editor editor;
    Context context;

    public MyCustomBaseAdapter(Context context, ArrayList<SearchResults> results) {
        searchArrayList = results;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return searchArrayList.size();

    }

    public Object getItem(int position) {
        return searchArrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        SharedPreferences sharedPrefs = context.getSharedPreferences("sharedPrefs", Context.MODE_PRIVATE);

        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_row_view, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.name);
            holder.cB = (CheckBox)convertView.findViewById(R.id.cb_category);

            convertView.setTag(holder);
        } 
        else {
            holder = (ViewHolder) convertView.getTag();
        }

        editor = sharedPrefs.edit();

        holder.txtName.setText(searchArrayList.get(position).getName());

        holder.cB.setChecked(sharedPrefs.getBoolean("CheckValue"+position, false));
       holder.cB.setOnCheckedChangeListener(new OnCheckedChangeListener() {
       @Override
       public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
       editor.putBoolean("CheckValue"+position, isChecked);
       editor.commit();
       }});
        return convertView;
    }

    static class ViewHolder {
        TextView txtName;
        CheckBox cB;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T19:59:48.213

声明一个布尔数组来记录`setOnCheckedChangeListener()`每个位置项的检查状态（在 中），然后调用`setChecked()`after `setOnCheckedChangeListener()`。就这么简单。

# html - 这个 DOCTYPE 标记是否使 IE9 以兼容模式呈现页面？

> ID：12621805
> 
> 赞同：0
> 
> 时间：2012-09-27T12:51:01.617
> 
> 标签：html, xhtml, doctype

我刚开始在一个网站上工作，在 IE9 中它以“ *IE9 兼容性视图*”浏览器模式呈现。

以下 DOCTYPE 标记中是否有任何内容会强制执行此操作？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

`<head>`标签的完整内容：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Applications</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Applications" />
<meta name="Description" content="Applications" />
<link rel="stylesheet" type="text/css" media="screen" href="ui/2009/css/screen.css" />
<link rel="stylesheet" type="text/css" media="screen" href="ui/2009/css/standard.css" />
<link rel="stylesheet" type="text/css" media="screen" href="ui/2009/css/home.css" />
<link rel="stylesheet" type="text/css" media="print" href="ui/2009/css/print.css" />
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" media="screen" href="ui/2009/css/ie.css" /><![endif]-->
<!--[if lte IE 6]><link rel="stylesheet" type="text/css" media="screen" href="ui/2009/css/ie6.css" /><![endif]-->

<script type="text/javascript" src="ui/2009/js/swfobject-2.js"></script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:52:16.640

有任何理由使用（旧的）XHTML 文档类型吗？

如果没有，请使用当前的：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T19:38:16.490

我不知道是否可以通过修改doctype来解决问题

但它的元标记应该可以帮助您：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"> 
```

IE=edge - 它告诉 IE 使用可用的最高模式和 chrome=1 - 它告诉 IE6、7、8、9 使用 Chrome 框架（如果已安装）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:03:54.083

不，文档类型中没有任何内容会导致“兼容模式”（又名“怪癖模式”）。它是触发“标准模式”的文档类型之一。但是在 IE 上，有几件事可能会使浏览器进入“兼容模式”。

也许最简单的方法是，尝试访问 IE 9 上的任何网页，按 F12，选择“兼容模式”，然后访问另一个页面。即使新页面具有符合标准的文档类型，浏览器仍将保持“兼容模式”。也就是说，手动设置模式使其持久化。

还有其他可能的原因，请参阅[http://hsivonen.iki.fi/doctype/](http://hsivonen.iki.fi/doctype/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-27T14:00:18.233

Sirko - 世界上并不是每个人都有 HTML5 / XHTML5 浏览器功能。在它被 100% 标准化并且是使用它的“多数”而不是“少数”之前，XHTML 1.0（或 2.0）的广泛兼容性要好得多。

IE9 正在进入兼容性视图，因为 IE9 仅原生支持 XHTML5 而不是旧的 XHTML 1.0 和 XHTML 2.0

在这里检查：

[http://blogs.msdn.com/b/ie/archive/2010/11/01/xhtml-in-ie9.aspx](http://blogs.msdn.com/b/ie/archive/2010/11/01/xhtml-in-ie9.aspx)

您可以在此处验证您的网站：

[http://validator.w3.org/#validate_by_upload](http://validator.w3.org/#validate_by_upload)

希望它有帮助=)

# php - 如何使用 Zend_Dom_Query 获取元数据

> ID：12621806
> 
> 赞同：1
> 
> 时间：2012-09-27T12:51:01.167
> 
> 标签：php, zend-framework, web-scraping, zend-dom-query

使用 Zend_Dom_Query，我想从 HTML 字符串中检索元数据。

要检索链接，您可以像这样简单地查询：

```
$results = $dom->query('a'); //Where $dom is your html string 
```

不幸的是，这似乎不适用于元

```
$results = $dom->query('meta'); //doesn't work 
```

如何检索元数据，然后按其“属性”属性进行过滤？

我正在寻找的一个例子：

```
 public function meta($dom)
{
    $results = $dom->query('meta'); //This is not a correct query (does anyone have an alternative?)
    $links = array();
    foreach ($results as $index => $result) {
        if ($result->getAttribute('property') == 'title') { //find <meta property="title"
            echo $result->getAttribute('content') . '<br />'; //echo the content attribute of the title
        }
    }
    return $results;
} 
```

一旦查询正确，此代码将起作用。但是，我想更进一步，直接查询`<meta property="title" content="This is the Title" />`而不是检索所有元数据并循环获取正确的元数据。

对于使用 zend_dom_query 获取所有元数据或（更重要的是）查询以仅接收 property == title 的元数据的任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:26:52.877

元***标记***不是*有效的 CSS 选择器*，因此您必须使用该`$dom->queryXpath($xPathQuery)`方法而不是`$dom->query()`.

也许是这样的：

```
$dom->queryXpath('/html/head'); 
```

我不确定要使用的确切查询字符串，但这就是想法。

[Zend_Dom_Query 操作理论。](http://framework.zend.com/manual/1.12/en/zend.dom.query.html#zend.dom.query.operation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T03:50:10.233

## 如果你有 url 试试这个：

* * *

> > $metatagarray = get_meta_tags($url);
> > if (!empty($metatagarray["keywords"]))
> > $metakey = $metatagarray["keywords"];
> > if (!empty($metatagarray["description"]))
> > $metadesc = $metatagarray["description"];

# android - 清除android中的活动堆栈

> ID：12621809
> 
> 赞同：0
> 
> 时间：2012-09-27T12:51:08.293
> 
> 标签：android, android-intent, android-activity, activity-stack

我有一个`LoginActivity`作为我的启动器屏幕。而`SettingsActivity`作为我的`fifth screen`.

我有一个`logout button`设置屏幕。`On clcik`这个按钮，我怎样才能从活动堆栈 中`Screen-1 (i.e LoginActivity)`清除所有剩余的活动？`(i.e 2nd, 3rd, 4th)`

注意：我已经完成`LoginActivity`但没有剩余的活动。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:56:50.913

很简单，在您的注销按钮上设置一个 onclick，然后将其添加到您的意图中：

```
Intent newIntent = new Intent(this, login.class);

    newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    startActivity(newIntent);
    finish(); 
```

这应该清除 login.class 上方的整个堆栈

如果您今天感觉很有趣，请添加

```
 newIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

这将摆脱 S3 上烦人的“显示 android 主屏幕”问题

# c# - mvc 表单身份验证重定向

> ID：12621814
> 
> 赞同：2
> 
> 时间：2012-09-27T12:51:18.777
> 
> 标签：c#, asp.net-mvc, forms-authentication

我正在尝试将表单身份验证添加到 mvc 站点，当我运行应用程序时，我被重定向到登录页面（这是正确的）。但是，每次我尝试登录时，页面都会被刷新，并且控制器永远不会收到发布请求。我认为我的表单身份验证已关闭并将所有请求重定向回登录页面？任何帮助将不胜感激！

以下是我的网络配置信息：

```
<authentication mode="Forms">
      <forms loginUrl="~/Account" timeout="30" slidingExpiration="false" requireSSL="false" />      
    </authentication>
<authorization>
      <deny users ="?" />
      <allow users = "*" />
    </authorization> 
```

下面是我的登录页面：

```
@using (Html.BeginForm("Login", "Account", FormMethod.Post))
{
    @Html.LabelFor(x => x.Username)<br />
    @Html.TextBoxFor(x => x.Username)

    <br />
    <br />

    @Html.LabelFor(x => x.Password)<br />
    @Html.TextBoxFor(x => x.Password)

    <br />
    <br />
    <br />

    <input type="submit" value="Login" />
} 
```

下面是我的控制器：

```
[HttpGet]
        public ActionResult Index()
        {
            return View("~/Views/Account/Login.cshtml", new LoginViewModel());
        }

        [HttpPost]
        public ActionResult Login(LoginViewModel viewModel)
        {
            Membership.ValidateUser(viewModel.Username, viewModel.Password);
            FormsAuthentication.SetAuthCookie(viewModel.Username, viewModel.RememberMe);

            return View("~/Views/Account/Login.cshtml", viewModel);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:55:19.713

我相信`POST`正在发生，但我朋友遇到的问题是，您正在重定向到`POST`.

```
return View("~/Views/Account/Login.cshtml", viewModel); 
```

将用户引导至主页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:03:52.377

其他人建议从您的 Login HttpPost 操作重定向到主页，但由 Visual Studio 创建的标准 MVC“Intranet 应用程序”模板尝试重定向到由 FormsAuthentication 基础结构作为查询字符串传递给 Login 操作的 returnUrl：

```
if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
{
    return Redirect(returnUrl);
}
else
{
    return RedirectToAction("Index", "Home");
} 
```

我会复制这个，除非你有充分的理由不这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:54:27.407

这是正确的。由于该代码：

```
public ActionResult Index()
{
   return View("~/Views/Account/Login.cshtml", new LoginViewModel());
} 
```

将其更改为`return View();` 并在相应文件夹中创建名为 Index 的视图。

# c++ - 静态库 LNK2019 中的 _tWinMain

> ID：12621817
> 
> 赞同：1
> 
> 时间：2012-09-27T12:51:37.343
> 
> 标签：c++, windows, unicode, static-libraries, winmain

我尝试将 main(WinMain) 放在静态库中：

```
#include <tchar.h>
#include <Windows.h>

int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
LPTSTR lpCmdLine, int nCmdShow) {...} 
```

但我得到了：

```
MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup 
```

我尝试构建为“Unicode”和“多字节”。

我尝试在没有“_t”（和 LPSTR）的情况下编写。

我试着写外部“C”。

链接器标志包括`/SUBSYSTEM:WINDOWS`和我的静态库

我知道这是可能的，因为它是在 SDL、SFML 等库中完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:18:40.187

您的问题是 lib 中的函数称为 _ **tWinMain**。

只需将其称为**WinMain**，您就可以开始使用了。

# jquery - Ajax 调用填充 Typeahead Bootstrap

> ID：12621823
> 
> 赞同：16
> 
> 时间：2012-09-27T12:52:06.593
> 
> 标签：jquery, ajax, json, twitter-bootstrap

我想要做的是通过 Ajax 获取一个 json 对象，并用一种​​值填充 Bootstrap Typeahead。

这是我的代码：

```
nameTypeHead: function () {
        var _self = this,
            searchInput = $('#nameTypeHead'),
            arr = [];

        function getArray() {
            $.ajax({
                url: '/Home/AutoComplete',
                type: 'post',
                dataType: 'json',
                data: { searchText: searchInput.val() },
                success: function (data) {
                    $.each(data, function () {
                        arr.push(this.Name);
                    });
                    return arr;
                }
            });
        }

        searchInput.typeahead({
            source: getArray()
        });
    } 
```

我收到**arr 为空的错误**

我也尝试过`.parseJSON()`但没有成功：

```
$.each($.parseJSON(data), function () {
   arr.push(this.Name);
}); 
```

我该怎么做才能在 Typeahed 中只显示我的 Json 对象的值名称？

如果在 Ajax Success 我把`alert(JSON.stringify(data));`它正确地提醒我的 Json 对象。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-27T13:15:28.970

我是从零开始的：

```
$('#typeahead').typeahead({

    source: function (query, process) {
        return $.getJSON(
            'path/to/lookup',
            { query: query },
            function (data) {
                return process(data);
            });
    }

}); 
```

`data`一个简单的 JSON 数组在哪里，例如：

```
 [
   "John",
   "Jane",
   "Alfredo",
   "Giovanni",
   "Superman"
 ] 
```

如果您的`data`数组有不同的结构，只需在将其传递给`process()`方法之前重新排列它。

[你可以在这里](http://moonwave99.webfactional.com/typeahead/)找到一个活生生的例子。

编辑 - 基于您的 json 数据：

```
[
    {'id':'0', 'name':'John'},
    {'id':'1', 'name':'Jane'}, 
    {'id':'2', 'name':'Alfredo'},
    ...
} 
```

`getJSON`回调变为：

```
function (data) {

    var newData = [];

    $.each(data, function(){

        newData.push(this.name);

    });

    return process(newData);

}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T04:18:20.130

检查这个要点。自动完成，处理快速打字机和缓存

[https://gist.github.com/mrgcohen/5062352](https://gist.github.com/mrgcohen/5062352)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-11T06:59:10.497

这对我有用：-

**HTML 设置：**

```
<!-- HTML Setup-->
<input type="text" id="my-typeahead" /> 
```

**Javascript：**

```
/* 
example remote-data-source
[
  {
    id:1,
    name:'Batman'
  },{
    id:2,
    name:'Superman'
  } 
]
*/

$('#my-typeahead').typeahead({
    hint: true,
    highlight: true,
    minLength: 1
}, {
    name: 'myDataset',
    source: function(str, sync, async) {
        // abstracting out the "REST call and processing" in a seperate function
        restCall(str, async);
    },
    templates: {
        suggestion: function(user) {
            return '<div>' + user.name + '</div>';
        },
        pending: '<div>Please wait...</div>'
    }
});

// The function that will make the REST call and return the data
function restCall(str, async) {
    return $.ajax('http://url-for-remote-data-source/query?name=' + str, {
        // headers and other setting you wish to set-up
        headers: {
            'Content-Type': 'application/json',
        },
        // response
        success: function(res) {
            //processing data on response with 'async'
            return async(res.data);
        }
    });
} 
```

**参考：**

`Typeahead Docs - Datasets`：[https ://github.com/twitter/typeahead.js/blob/master/doc/jquery_typeahead.md#datasets](https://github.com/twitter/typeahead.js/blob/master/doc/jquery_typeahead.md#datasets)

`Jquery **$.ajax()**`：[https ://api.jquery.com/jquery.ajax/](https://api.jquery.com/jquery.ajax/)

祝你好运。

# sql - 将 CHECK 约束添加到已填充的表

> ID：12621824
> 
> 赞同：9
> 
> 时间：2012-09-27T12:52:07.610
> 
> 标签：sql, sql-server-2008-r2, check-constraints

我创建了一个名为`test`列的表，名为`code`：

```
create table test(  
code char(3) not null); 
```

然后我用以下数据填充了表格：

```
insert into test values ('A12');
insert into test values ('B23');
insert into test values ('C45'); 
```

然后我更改了该列以使其成为 char(4)：

```
alter table test
alter column code char(4) not null; 
```

然后，我在所有现有数据中添加了一个“X”，使其变为 4 个字符长：

```
update test
  set code='X'+code
where LEN(code)=3; 
```

到目前为止一切都很好，但是当我尝试添加检查约束时：

```
alter table test
add constraint codeCheck check (code like 'A-Z''A-Z''0-9''0-9'); 
```

我收到了这个错误：

`The ALTER TABLE statement conflicted with the CHECK constraint "codeCheck".`

我了解该错误意味着现有数据违反了我尝试添加到表中的检查约束，但为什么呢？

以及如何使现有数据和检查约束不相互冲突？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T12:54:27.353

您的模式语法错误。它应该是

```
alter table test
add constraint codeCheck check (code like '[A-Z][A-Z][0-9][0-9]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:54:03.303

因为您的数据不符合 like 约束。

尝试

```
alter table test
     add constraint codeCheck check (code like '[A-Z][A-Z][0-9][0-9]' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:01:50.083

我不知道它如何与 SQL Server 一起工作，但你的 like 子句看起来很奇怪。尝试使用

> '[AZ]{2}\d{2}'

# php - 输出数列：1:1、2:1、3:1

> ID：12621826
> 
> 赞同：1
> 
> 时间：2012-09-27T12:52:10.263
> 
> 标签：php

我正在为 3x3 平铺网格创建一系列坐标。

例如（x：y）

```
1:1 2:1 3:1
1:2 2:2 3:2
1:3 2:3 3:3 
```

使用此代码：

```
$c1 = 1;
$c2 = 1;
for($i = 0; $i < 9; $i++){

    if($c1 == 1){

        $x = $c1;
        $y = $c2;

        ++$c1;
    }
    elseif($c1 == 3){

        $x = $c1;
        $y = $c2;

        $c1 = 1;
        ++$c2;
    }
    else{
        $x = $c1;
        $y = $c2;

        ++$c1;
    }

    echo $x.':'.$y.'<br />';
} 
```

这是实现这一目标的最有效方法吗？

我有一种直觉，我错过了一些可以简化这个过程的东西。

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:56:20.197

这应该有效：

```
for ($i = 1; $i <= 3; $i++) {
    for ($j = 1; $j <= 3; $j++) {
        echo $j . ":" . $i . " ";
    }
    echo "<br />";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T12:56:55.157

嵌套循环是你的朋友：

```
<?php
for ($row=1; $row<=3; $row++)
{
    for ($col=1; $col<=3; $col++)
    {
        echo "{$col}:{$row} ";
    }
    echo PHP_EOL;
} 
```

结果：

```
~> php -f g.php
1:1 2:1 3:1
1:2 2:2 3:2
1:3 2:3 3:3 
```

享受

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T12:57:35.483

为什么不使用 2 个循环：

```
for($x = 1; $x <= 3 ; $x++) {
  for($y = 1; $y <= 3; $y++) 
    echo $y . ' : ' . $x . ' ';
  echo '<br>' 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T12:56:51.647

这可能更简单：

```
<?php
$size = 3;
for ( $x=1; $x<=$size; $x++ ) {
    for ( $y=1; $y<=$size; $y++ ) {
        echo $y . ":" . $x . " ";
    }
    echo "<br />";
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T12:57:44.157

```
<?php
function numberGrid($x, $y)
    {
    $output = '';
    for($i = 1; $i <= $x; $i++)
        {
        for($j = 1; $j <= $y; $j++)
            {
            $output .= $i.':'.$j.' ';
            }
        $output .= "\n";
        }
    return $output;
    }

echo '<pre>'.numberGrid(5, 7).'</pre>'; 
```

输出：

```
1:1 1:2 1:3 1:4 1:5 1:6 1:7 
2:1 2:2 2:3 2:4 2:5 2:6 2:7 
3:1 3:2 3:3 3:4 3:5 3:6 3:7 
4:1 4:2 4:3 4:4 4:5 4:6 4:7 
5:1 5:2 5:3 5:4 5:5 5:6 5:7 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T12:57:53.347

```
<?php
for($i=1;$i<=3;$i++)
{
    for($j=1;$j<=3;$j++)
    {
        echo $j.':'.$i.' ';
    }
    echo "\n";
}
?> 
```

# google-app-engine - 谷歌应用引擎如何确定您每月存储的数据使用量？

> ID：12621830
> 
> 赞同：0
> 
> 时间：2012-09-27T12:52:22.943
> 
> 标签：google-app-engine, google-cloud-datastore, billing

Google 应用引擎会按月向您收取存储数据的费用，但它如何确定要收取多少费用？它是按月末的数据量计费，还是按当月某个时间点存储的最大数据量计费？还是其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:34:13.017

> 对于免费和付费应用程序，App Engine 会在每个日历日开始时重置所有资源测量值（存储数据除外，它始终表示正在使用的数据存储存储量）。当免费应用程序达到其资源配额时，它们无法使用该资源，直到配额得到补充。付费应用程序可以超过免费配额，直到其预算用尽。
> 
> 每日配额每天在太平洋时间午夜补充。每分钟配额每 60 秒刷新一次。

所以是日常。如果您超出每日配额并且预算中没有更多资金，那么您的应用程序将停止运行。

[https://developers.google.com/appengine/docs/quotas#Safety_Quotas_and_Billable_Quotas](https://developers.google.com/appengine/docs/quotas#Safety_Quotas_and_Billable_Quotas)

# magento - 将属性标签添加到 Magento 1.6 中的选项下拉列表

> ID：12621831
> 
> 赞同：1
> 
> 时间：2012-09-27T12:52:31.323
> 
> 标签：magento, magento-1.6

我正在尝试将属性标签添加到产品页面上的“选择选项”下拉列表中，但没有对其进行硬编码，因为我可能会添加其他属性，因此例如我想显示“选择尺寸”或选择颜色” 。

我已经玩过并尝试了来自各种论坛的一些代码，但似乎无法让它工作 - 任何想法或任何建议的扩展

可配置的.phtml 中的核心代码是：

```
 <?php
 $_product    = $this->getProduct();
 $_attributes = Mage::helper('core')->decorateArray($this->getAllowAttributes()); 
```

?>

isSaleable() && count($_attributes)):?>

```
 <dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt>
    <dd<?php if ($_attribute->decoratedIsLast){?> class="last"<?php }?>>
        <div class="input-box">
            <select name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]" id="attribute<?php echo $_attribute->getAttributeId() ?>" class="required-entry super-attribute-select">
                <option><?php echo $this->__('Choose Option')?></option> 
              </select>
          </div>
    </dd>
<?php endforeach; ?>
</dl> 
```

var spConfig = new Product.Config(getJsonConfig() ?>);

```
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:26:41.960

实际上，我上周刚刚在博客上发布了[一个简单的解决方案。](http://zaclee.net/magento/change-default-option-text-for-configurable-products)我不想扩展核心代码，因为那很麻烦。简而言之，这就是我想出的：

* * *

/~theme/default/template/catalog/product/view/type/options/configurable.phtml

```
<?php
$jsonConfig = json_decode($this->getJsonConfig());
$jsonConfig->chooseText = 'Select ' . $_attribute->getLabel();
?>

<script type="text/javascript">
    var spConfig = new Product.Config(<?php echo json_encode($jsonConfig); ?>);
</script> 
```

* * *

如果您有兴趣，我的博客文章会提供更多背景信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:17:35.853

问题是您的前端 Javascript 更改了选项文本的内容，而您的 PHP 无法解决该问题。

但是，您可以使用一些前端代码做很多事情。

如果您只有一个可预测的选项，例如大小，您可以执行以下操作：

```
<script type="text/javascript">
    var spConfig = new Product.Config(<?php echo $this->getJsonConfig() ?>);
    // if only one drop down then set it to 'choose size'. If 'One Size' set value and hide
    if($$('select.super-attribute-select').length==1) {
        $$('select.super-attribute-select')[0].options[0].update('Choose Size');
        if($$('select.super-attribute-select')[0].options.length==2) {
            $$('select.super-attribute-select')[0].options[1].selected=true;
            $$('select.super-attribute-select')[0].up().hide();
        }
    }
</script> 
```

如果只有一种尺寸，这也会隐藏下拉菜单。

要扩展此方法并使其适用于任何下拉列表，您可能希望从页面中获取每个下拉列表的标签值：

```
 $$('select.super-attribute-select').each(function(element) {
    element.options[0].update('CHOOSE ' + element.up().up().previous().down().innerHTML.replace(/(<([^>]+)>)/ig,"").replace(/\*/g, '').toUpperCase());
    if(element.options.length==2) {
        element.options[1].selected=true;
        element.up().up().up().hide();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-10T14:06:19.803

前面的代码片段只是产品页面上单个下拉属性的解决方案。这是多个下拉属性的解决方案。

首先像这样编辑选项标签的标记（app/design/frontend/[package]/[theme]/template/catalog/product/view/type/options/configurable.phtml）：

```
<option><?php echo $this->__('Choose %s...', $_attribute->getLabel()) ?></option> 
```

现在我们必须在 JSON 配置中为每个属性的第一个选项添加一个字符串，因为下拉项将在前端使用 JavaScript 创建。因此，我们遍历超级属性（与上面相同的文件）：

```
<script type="text/javascript">
   <?php
   $jsonConfig = json_decode($this->getJsonConfig());
   if (!empty($jsonConfig->attributes)) {
       foreach ($jsonConfig->attributes as $key => $attribute) {
           $jsonConfig->attributes->$key->chooseText = $this->__('Choose %s...', $attribute->label);
       }
   }
   ?>
   var spConfig = new Product.Config(<?php echo json_encode($jsonConfig); ?>);
</script> 
```

现在 JSON 已扩展，但 Magento JS 不使用该条目。因此，我们需要在第 172 行修改文件 js/varien/configurable.js。更改此：

```
element.options[0].innerHTML = this.config.chooseText; 
```

进入：

```
element.options[0].innerHTML = this.config.attributes[attributeId].chooseText; 
```

现在我们在页面加载时、下拉更改后以及每个页面的多个超级属性中都有正确的选项标签。

# javascript - 查找 DOM 滚动条宽度

> ID：12621832
> 
> 赞同：3
> 
> 时间：2012-09-27T12:52:36.267
> 
> 标签：javascript, jquery, browser-feature-detection

我想找到垂直和水平滚动条的像素宽度。我知道它们对于不同的操作系统/浏览器是不同的。

我发现这段代码试图检测它，但是唉，它似乎在 IE7 上不起作用：

```
function scrollbarWidth() {
    var scrollbarWidth = 0;                    
    if ($.browser.msie) {
        var $textarea1 = $('<textarea cols="10" rows="2"></textarea>')
        .css({ position: 'absolute', top: -1000, left: -1000 }).appendTo('body'),
        $textarea2 = $('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>')
        .css({ position: 'absolute', top: -1000, left: -1000 }).appendTo('body');
        scrollbarWidth = $textarea1.width() - $textarea2.width() + 2; // + 2 for border offset
        $textarea1.add($textarea2).remove();
    } else {
        var $div = $('<div />')
        .css({ width: 100, height: 100, overflow: 'auto', position: 'absolute', top: -1000, left: -1000 })
        .prependTo('body').append('<div />').find('div')
        .css({ width: '100%', height: 200 });
        scrollbarWidth = 100 - $div.width();
        $div.parent().remove();
    }
    return scrollbarWidth;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-02T01:00:59.827

这个函数应该给你垂直滚动条的宽度：

```
function scrollbarWidth()
{
    var outer = document.createElement("div");
    outer.style.visibility = "hidden";
    outer.style.width = "100px";

    // for win 8
    outer.style.msOverflowStyle = "scrollbar";

    document.body.appendChild(outer);

    var widthNoScroll = outer.offsetWidth;

    // force scrollbars
    outer.style.overflow = "scroll";

    // add innerdiv
    var inner = document.createElement("div");
    inner.style.width = "100%";
    outer.appendChild(inner);        

    var widthWithScroll = inner.offsetWidth;

    // remove divs
    outer.parentNode.removeChild(outer);

    return widthNoScroll - widthWithScroll;
} 
```

该函数的主要步骤如下：

*   创建一个宽度为 100px 的外部 div

*   然后强制滚动条出现在外部div中

*   创建一个新的内部 div 并附加到外部 div 内。将其高度设置为 100%

*   计算两个宽度之间的差异。

同样，您也可以同时获取垂直滚动条的宽度和水平滚动条的高度，为外部 div 设置给定的高度，并计算两个 div 的高度差，如下所示：

```
function scrollbarWidthHeight()
{
    var outer = document.createElement("div");
    outer.style.visibility = "hidden";
    outer.style.width = "100px";
    outer.style.height = "100px";

    // for win 8
    outer.style.msOverflowStyle = "scrollbar";

    document.body.appendChild(outer);

    var widthNoScroll = outer.offsetWidth;
    var heightNoScroll = outer.offsetHeight;

    // force scrollbars
    outer.style.overflow = "scroll";

    // add innerdiv
    var inner = document.createElement("div");
    inner.style.width = "100%";
    inner.style.height = "100%";
    outer.appendChild(inner);        

    var widthWithScroll = inner.offsetWidth;
    var heightWithScroll = inner.offsetHeight;

    // remove divs
    outer.parentNode.removeChild(outer);

    return {
        width: widthNoScroll - widthWithScroll,
        height: heightNoScroll - heightWithScroll
    };
} 
```

在 chrome、firefox、IE6、IE8 和 safari 中测试。它还使用原生 JavaScript（DOM 函数），并且不使用 jQuery 等外部依赖项 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:48:53.650

你为什么要这样做？一些上下文会很好。如果您正在尝试制作自定义主题的滚动条，有很多脚本可以做到这一点，一个很好的脚本是[jQuery Scrollbars](http://github.com/nathggns/Scrollbars)。

# msbuild - 在解决方案上运行的 MSbuild 样式警察扩展任务

> ID：12621833
> 
> 赞同：1
> 
> 时间：2012-09-27T12:52:40.857
> 
> 标签：msbuild, stylecop

我需要帮助在解决方案中包含的所有 cs 文件上运行 stylecop 任务。请让我知道它是否可能以及如何？现在我可以在文件上运行它，但不能在解决方案上运行。

```
 <CreateItem Include="$(RootPath)\**\*.cs">
  <Output TaskParameter="Include" ItemName="StyleCopFiles"/>
</CreateItem>

 <MSBuild.ExtensionPack.CodeQuality.StyleCop
          TaskAction="Scan"
          ShowOutput="true"
          ForceFullAnalysis="true"
          CacheResults="false"
          SourceFiles="@(StyleCopFiles)"
          logFile="$(OutDir)\StyleCopLog.txt"
          SettingsFile="$(MSBuildStartupDirectory)\..\Settings.StyleCop"
          ContinueOnError="false">
          <Output TaskParameter="Succeeded" PropertyName="AllPassed"/>
          <Output TaskParameter="ViolationCount" PropertyName="Violations"/>
          <Output TaskParameter="FailedFiles" ItemName="Failures"/>
    </MSBuild.ExtensionPack.CodeQuality.StyleCop> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:42:02.997

您是否考虑将自动运行 StyleCop 规则作为项目构建过程的一部分？这不会在解决方案级别运行所有规则，而是在项目级别运行。我更喜欢这种方法，因为只要您构建项目/解决方案，规则就会运行，并且会在错误列表面板中显示为警告（双击导航到有问题的代码行）。逐个项目地配置它可能看起来很痛苦，但我们为单元测试项目设置了一组不同的 StyleCop 规则，这允许我们单独配置它们。

此外，您不必将 MSBuild 任务显式添加到构建脚本中，因为构建项目将自动执行 StyleCop 规则。

还值得注意的是，我正在使用 NuGet 包：StyleCop.MSBuild（版本 4.7.17.1）并使用相对路径从我的 .csproj 文件中引用包，如下所示：

```
<Project>
    <Import Project="..\Packages\StyleCop.MSBuild.4.7.17.1\tools\StyleCop.targets" />
</Project> 
```

[http://stylecop.codeplex.com/wikipage?title=Running%20StyleCop%20in%20VS2005%20or%20VS%20Express&referringTitle=Documentation](http://stylecop.codeplex.com/wikipage?title=Running%20StyleCop%20in%20VS2005%20or%20VS%20Express&referringTitle=Documentation)

您还可以在希望规则运行时设置条件。如果条件评估为假，StyleCop 将不会运行。我们在运行单元测试时使用条件来抑制 StyleCop

```
<Project>
    <Import Project="..\Packages\StyleCop.MSBuild.4.7.17.1\tools\StyleCop.targets" Condition="'$(NCrunch)'!='1'" />
</Project> 
```

为了配置 StyleCop 规则，您需要安装 StyleCop_v4.7.17.0.msi。我们只为整个代码库定义了一个 Settings.StyleCop 文件（父设置文件）。

[http://stylecop.codeplex.com/wikipage?title=Sharing%20StyleCop%20Settings%20Across%20Projects&referringTitle=Documentation](http://stylecop.codeplex.com/wikipage?title=Sharing%20StyleCop%20Settings%20Across%20Projects&referringTitle=Documentation)

# ruby-on-rails - 动态指定返回值

> ID：12621834
> 
> 赞同：0
> 
> 时间：2012-09-27T12:52:50.597
> 
> 标签：ruby-on-rails, ruby

我的主模型中有一个方法，它应该根据设置的参数返回特定的值：

```
def self.retrieve_profiles( params )

  case params[:view]

    when 'image_only'
      fields = %w{ avatar }

    when 'profile_minimal'
      fields = %w{ avatar username age }

    when 'profile_medium'
      fields = %w{ avatar username age first_name last_name bio relationship_status seeking }

    when 'profile_extended'
      fields = %w{ avatar username age first_name last_name bio relationship_status seeking country city photos }

  end    

  profiles = Profile.that_has_photos
  profiles = profiles.where( :country_id => params['country'] ) unless params['country'].nil?    
  profiles = profiles.order( "RAND()" ).limit( params['count'] )      

  # works fine up to here (returns all fields)

  profiles.each do |a|
    fields.each do |field|
      puts a.eval(field)
    end
  end

  # above block makes it fail (private method `eval' called)

end 
```

我的问题是：如何只返回`fields`hash 指定的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:56:30.277

使用`send`而不是`eval`. 这段代码应该可以正常工作。

```
 profiles.each do |a|
    fields.each do |field|
      puts a.send(field)
    end
  end 
```

# html - 溢出滚动不显示 OL 标签上的滚动

> ID：12621838
> 
> 赞同：1
> 
> 时间：2012-09-27T12:52:57.780
> 
> 标签：html, css

我为此创造了小提琴。溢出滚动未在 ol 上显示滚动。为什么？

[http://jsfiddle.net/nLnum/](http://jsfiddle.net/nLnum/)

我认为 OSx Lion 隐藏滚动功能存在问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T12:55:17.310

它就在那里——只是高度太小而无法显示。看这个例子：http: [//jsfiddle.net/nLnum/12/](http://jsfiddle.net/nLnum/12/)

你不能滚动吗？

如果您不想要更多的垂直空间，请改用 overflow-y 来删除空白滚动条：http: [//jsfiddle.net/nLnum/11/](http://jsfiddle.net/nLnum/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:56:18.263

我更新了你[的 jsfiddle](http://jsfiddle.net/nLnum/9/)。您将 ol 的最大高度设置为 20px

# maven - 指定要在父 pom 中使用的 maven 构建插件

> ID：12621839
> 
> 赞同：0
> 
> 时间：2012-09-27T12:52:59.637
> 
> 标签：maven

我有几个项目，都在构建部分使用相同的插件。是否可以指定在中心位置的构建部分中运行哪些插件？

我知道您可以将插件配置放在父 poms pluginManagement 部分中，但是您仍然必须在构建部分中列出所有插件。

例如，我想要类似的东西：

父.pom

```
<pluginManagement>
  <plugins>
    <plugin>
      <artifactId>plugin1</artifactId>
      ...
    </plugin>
    <plugin>
      <artifactId>plugin2</artifactId>
      ...
    </plugin>
  </plugins>
</pluginManagement> 
```

孩子.pom

```
<build>
    <include-plugins-from-parent-without-listing-plugin1-and-plugin2/>
</build> 
```

另外，我想对报告做同样的事情。在单个文件中定义要运行的报告并将其包含在每个其他项目中。

更新：在多个项目之间同步相同构建设置的任何其他方式也可以。我只是不想在所有 POM 文件中复制和粘贴相同的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:16:26.587

在 parent.pom 内部声明插件`<build>\<plugins>`而不是`<pluginManagement>`：

```
<build>
  <plugins>
    <plugin>
      <artifactId>plugin1</artifactId>
      ...
    </plugin>
 </plugins>
</build> 
```

# sql - 在选择列表中按一列分组-SQL

> ID：12621841
> 
> 赞同：0
> 
> 时间：2012-09-27T12:53:07.640
> 
> 标签：sql, sql-server, group-by

他们是按 a.MEMB 分组的一种方式吗？我已经对其进行了研究，并找到了一些解决方法，但似乎无法让它发挥作用。我对其他冷却器中的内容不感兴趣，但我确实需要在结果中显示它们。

```
 ;with main as (SELECT a.MEMB
   , ta.DRAW
   , ta.foc
   , a.ENTRY
  , tc.DESCRIP

   FROM a with (nolock)
          inner join  tal      
   inner join  ta      
         inner join tc        
  WHERE a.ENTRY between @start and @end
   and a.TRAN != 0
   and tc.TRANN=a.TRANN
   and tc.TRANT=a.TRANT  
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:58:17.513

您可以使用`ROW_NUMBER()`对数据进行分区。但是，您的查询目前无法工作，因为您缺少连接

```
;with main as 
(SELECT a.MEMB, ta.DRAW, ta.foc, a.ENTRY, tc.DESCRIP,
        row_number() over (partition by a.MEMB order by a.Memb) rn
 FROM a with (nolock) 
 inner join  tal on ...
 inner join  ta  on ...     
 inner join tc     on    tc.TRANN=a.TRANN 
     and tc.TRANT=a.TRANT   
  WHERE a.ENTRY between @start and @end 
   and a.TRAN != 0 
) 
    select * from main where rn = 1 
```

# google-apps-script - 填写 - 用于电子表格的 Google Apps 脚本

> ID：12621842
> 
> 赞同：28
> 
> 时间：2012-09-27T12:53:08.090
> 
> 标签：google-apps-script, google-sheets

是否有一个函数可以将数据填充到上一行的所有空单元格中？

如果没有，任何人都可以帮助我使用可以遍历我的谷歌电子表格中的每一行的谷歌应用程序脚本（或其他解决方案），检查空单元格，如果找到，用上面行中的数据填充它们？

我认为这样的功能应该已经包含在电子表格程序中（并且也应该“填充”）。

谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-27T21:58:04.160

> 我认为这样的功能应该已经包含在电子表格程序中（并且也应该“填充”）。

我将尝试在与此相关的 GSheets中描述本*机功能。*

1.  如果双击所选单元格或范围右下角的蓝色小方块，这将自动将该单元格填充到左侧填充单元格块的末尾。或者，您可以拖动这个蓝色的小框（向下、向上、向左或向右）来自动填充。

2.  您可以选择源单元格及其下方的单元格（请参阅第 4 点），然后按`Ctrl`+ `Enter`, 向下填充。您也可以使用`Ctrl`+`Enter`或`Ctrl`+`R`来填充右边。

3.  您可以选择源单元格，按`Ctrl`+`C`复制，然后选择上方的单元格（或左侧 - 再次参考第 4 点），然后按`Ctrl`+`V`粘贴。这具有填充（或离开）的效果。

4.  `Ctrl`您可以通过按+ `Shift`+ `Down`（或向上、向右或向左）快速选择源单元格下方（或上方、右侧或左侧）的空白单元格。这会将您带到工作表的限制或下一个填充的单元格。如果是后者，您可以按`Shift`+ `Up`（或向下、向左或向右）返回到最后一个空白单元格。然后按照第 2 点和第 3 点的要求填写。

5.  您需要对每个不连续的空白单元组执行此操作。如果您希望能够快速自动填充不连续的空白单元组，那么是的，需要一个脚本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-17T03:22:08.577

这是一个向您的 Google 表格添加自定义菜单的工作脚本。加载 Google 表格的脚本，在表格上选择一个范围，然后从自定义菜单中选择“填充空白单元格”。空白单元格将填充上面单元格的值。

```
function onOpen() {
  var ui = SpreadsheetApp.getUi();
  // Or DocumentApp or FormApp.
  ui.createMenu('Custom Menu')
      .addItem('Fill Blank Cells', 'menuItem1')
      .addToUi();
}

function menuItem1() {
  fillBlankWithAbove()
}

//Iterates over the range from top to bottom
//and left to right, and fills blank cells 
//with the value right above them.
function fillBlankWithAbove() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var range = sheet.getActiveRange();
  Logger.log('Range height is: ' + range.getHeight());
  var values = range.getValues();

  var width = values[0].length;
  var height = values.length;
  Logger.log('Width is ' + width);
  Logger.log('Height is ' + height);

  for (var i = 0; i < width; i++) {
    var lastVal = '';
    for(var j = 0; j < height; j++) {   
      var currValue = values[j][i];

      var dataType = typeof(currValue);
      //Empty string check returns true if dataType
      //is a number, and value is zero.  In that case
      //we don't want to overwrite the zero, so only
      //check emptyString for string types.
      if(currValue === undefined || 
         (dataType === 'string' && currValue == '')
        )  {
        //getCell parameters are relative to the current range
        //and ones based
         var cell = range.getCell(j+1, i+1);
         cell.setValue(lastVal);

      }
      else {
        lastVal = currValue;
      }
    }
  }
  SpreadsheetApp.flush();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-20T13:46:21.487

使用[`copyTo`](https://developers.google.com/apps-script/reference/spreadsheet/range#copyTo%28Range%29). 我将主要调整[我在这里找到的答案](https://stackoverflow.com/a/19959129/274502)：

```
 var sheet = SpreadsheetApp.getActiveSheet();
  var originRange = sheet.getRange("A1:B1");
  var target = sheet.getRange("A2:B");
  originRange.copyTo(target); 
```

这将自动填充/扩展**公式**到`originRange`下面的所有内容，就像复制和粘贴一样。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-13T15:30:48.187

```
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Name");
var formulas = sheet.getRange(10, 1, 1, 10).getFormulasR1C1();
var newRange = sheet.getRange(11, 1, 1, 10);
newRange.setFormulasR1C1(formulas); 
```

使用 getFormulasR1C1() 然后 setFormulasR1C1(formulas) 这个函数模拟鼠标拖动公式

请注意，如果单元格不包含公式，则会显示错误。您需要通过清空单元格来解决此问题。

# html - 响应式网页设计 + SCSS 网站组织

> ID：12621845
> 
> 赞同：1
> 
> 时间：2012-09-27T12:53:27.903
> 
> 标签：html, css, responsive-design, sass

对我来说`HTML`+`CSS`是相当复杂的。`HTML`+ `CSS`+`@media`是噩梦。现在我的`HTML`+`CCS`看起来像意大利面条。请帮我解决问题：

1.  我应该如何组织我的`SCSS`包含：按功能（页眉/页脚）或按维度（0_480）？
2.  我应该如何使用@media 限制：
    *   仅最大宽度：0-420、0-870，无限制
    *   最小宽度 + 最大宽度：0-420、421-870、871+
    *   仅最小宽度：870+、420+、0+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:04:10.403

可以轻松快速地测试站点的适应性！ [http://plastilin5.com/tools/](http://plastilin5.com/tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:59:00.070

这是一个很好的例子（检查网站的下部）

[http://m.alistapart.com/articles/responsive-web-design/](http://m.alistapart.com/articles/responsive-web-design/)

您可以将所有样式表导入放在标题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:07:46.827

1.  这是我所做的：
    *   仅为最大尺寸编写 CSS
    *   在 CSS 文件的末尾（如果项目很大，则为 @import）添加“@media screen and (max-width: 1700px)”并写入该分辨率的所有更改
    *   为每个需要的分辨率重复上一步

我认为这是最好的方法的主要原因是，对于较小的屏幕，您可以（并且很可能会）决定不显示某些元素，您只需添加 display:none; 即可做到这一点。对于要隐藏的第一个（最大）分辨率的元素。当您以相反的方式构建 CSS 时，添加元素变得有点难以遵循。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T14:28:14.053

Sass 有他们所谓的“媒体查询冒泡”，这意味着无论您的媒体查询放置在什么嵌套级别，它们都会冒泡到顶部。如果您不负责任地使用它，这既是好事也是坏事（很好，您可以将媒体查询与相关样式分组，如果过度使用则不好，因为您最终会收到 100 多个媒体查询） .

我发现对我的工作流程有用的是将媒体查询与其所针对的内容块尽可能多地组合在一起。每个主要的样式块都被分解成自己的文件（主布局、图片库、客户端等），并且每个文件将具有尽可能少的媒体查询（通常只有 1 或 2 个，对于更复杂的文件，通常只有 3 个或更多块）。

```
$x-small-device: 25em; // smallest
$small-device: 35em; // larger mobile
$medium-device: 55em; // tablet or really small desktop

.clients {
    // no matter what resolution, these styles are always applied

    @media (min-width: $small-device) {
        // have our clients display in a 2-col layout
    }

    @media (min-width: $medium-device) {
        // have our clients display in a 3-col layout
    }
} 
```

如果您尝试根据目标设备的宽度对其进行拆分，则在更改样式时更难找到样式的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-23T13:41:07.233

好的，首先我认为你应该阅读更多关于 CSS 架构的内容。第一个问题有点复杂，涉及不同的概念。我建议检查[OOCSS](http://coding.smashingmagazine.com/2011/12/12/an-introduction-to-object-oriented-css-oocss/)、[SMACSS](http://smacss.com/)或[Atomic 设计](http://bradfrostweb.com/blog/post/atomic-web-design/). 有一些非常棒的想法。我通常做的是在所有这些东西之间混合使用。我想你会发现它适合你的项目。媒体查询不应基于设备或某些流行的分辨率。您应该根据您拥有的内容设置断点。尝试遵循移动优先概念，看看内容需要更新的地方。很多时候，不同的断点与您网站的不同部分有关。我的意思是一个媒体查询可能只引用应用程序的标头。另一个只有页脚等等。我还建议使用媒体查询冒泡。即将这些部分放置在要更改的容器中，而不是放在单独的文件中或当前文件的末尾。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T13:15:13.403

关于如何使用`@media`最大和最小宽度，一些开发人员会强烈主张“移动优先”，例如先关注小屏幕的样式，然后再覆盖大屏幕的样式。

*   [http://stuffandnonsense.co.uk/blog/about/320_and_up/](http://stuffandnonsense.co.uk/blog/about/320_and_up/)

我认为这将与您的“仅最大宽度：0-420、0-870、无限制”选项最匹配。

# php - H2O 模板引擎和 PDO/Mysql - 如何查询数据库？

> ID：12621848
> 
> 赞同：0
> 
> 时间：2012-09-27T12:53:34.317
> 
> 标签：php, templates, pdo

我一直在使用 h2O 模板引擎 (h [ttp://www.h2o-template.org/](http://www.h2o-template.org/) )

虽然它适用于基本的 html，因为我使用了它附带的演示文件。

我的代码：

```
 <?php
    /**
     *   Simple example rendering a user list
     *   ------------------------------------
     *   
     *   @credit - adapt from ptemplates sample
     */
    require 'h2o.php';

    $template = new H2o('test.html', array(
        'cache_dir' => dirname(__FILE__)
    ));

    $time_start = microtime(true);

    echo $template->render(array(
        'users' => array(
            array(
                'username' =>           'peter <h1>asdfasdf</h1>',
                'tasks' => array('school', 'writing'),
                'user_id' =>            1,
            ),
            array(
                'username' =>           'anton',
                'tasks' => array('go shopping <h1>je</h1'),
                'user_id' =>            2,
            ),
            array(
                'username' =>           'john doe',
                'tasks' => array('write report', 'call tony', 'meeting with arron'),
                'user_id' =>            3
            ),
            array(
                'username' =>           'foobar',
                'tasks' => array(),
                'user_id' =>            4
            )
        )
    ));

    echo "in ".(microtime(true) - $time_start)." seconds\n<br/>"; 
```

和模板文件 test.html：

```
{% extends 'layout.html' %}
{% block title %}Userlist | {{ block.super }}{% endblock %}
{% block content %}
  <h2>Userlist</h2>
  <ul>
  {% for user in users limit:3 %}
    <li>
      <a href="/users/{{ user.username|urlencode }}">{{ user.username|truncate 4 }}</a> -

      {{ user.tasks.first | safe }}
    </li>

    {% if not user.username == 'foobar' %}
        haha
    {% endif %}

  {% endfor %}
  </ul>

{% endblock %} 
```

如此处所述，我将如何在 PDO/Mysql 中执行[此](http://devzone.zend.com/1886/creating-web-page-templates-with-php-and-twig-part-1/)操作-语法在某种程度上类似于 Twig，但 H2O 网站上的文档中没有关于从数据库查询的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:20:00.493

你必须为此使用php，而不是h2o ...

# javascript - 如何在帖子中发出更改信号？

> ID：12621863
> 
> 赞同：1
> 
> 时间：2012-09-27T12:54:25.097
> 
> 标签：javascript, html, ajax, updating

我想知道如何重现即使在 StackOverflow 页面上也可见的功能：当用户编辑其他用户的答案时，会出现：“已对此帖子进行编辑；点击加载”。这是我指的功能： [https ://meta.stackexchange.com/questions/125677/new-feature-real-time-updates-to-questions-answers-and-inbox](https://meta.stackexchange.com/questions/125677/new-feature-real-time-updates-to-questions-answers-and-inbox)

基本上，我有一个函数需要一些时间来返回值，一旦发生，我想更新 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:55:03.940

正如他们在您链接的帖子中所说，只有支持网络套接字的浏览器才能使用此功能。阅读这些，它们并不太难使用。它基本上使服务器能够将数据“推送”到客户端。请注意，尽管目前大多数服务器不支持没有扩展的 Web 套接字。所有浏览器也没有。

另一种解决方案是使用 AJAX 请求，使用`setInterval`or `setTimeout`，检查是否有新帖子到达，即每 10 秒。这会产生更多的http请求，但应该更兼容。此外，它不是真正的实时。

# javascript - Google Maps API v3 重绘以前保存的可编辑和可选择的形状

> ID：12621866
> 
> 赞同：1
> 
> 时间：2012-09-27T12:54:27.827
> 
> 标签：javascript, google-maps, maps

我创建了一个应用程序，使用它可以在地图上绘制形状并且它们是可编辑的并且可以选择。

这是通过向绘图管理器添加“overlaycomplete”侦听器并编写用于设置所选形状或清除选择或删除形状的函数来实现的：

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {

        drawingManager.setDrawingMode(null);

        var shape = e.overlay;
        shape.type = e.type;

        google.maps.event.addListener(shape, 'click', function() {
            select(shape);
          }); 
```

然后可以将所有形状的详细信息保存在数据库中。我现在需要重新创建具有相同形状的地图，这些形状应该可以再次编辑。从数据库加载详细信息后，我重新创建了形状，但似乎无法在它们上设置侦听器以使用与以前使用的相同的功能。通过指定它们来简单地重绘形状：

```
shape = new google.maps.Polygon({
                map: map,
                paths: paths,
                zIndex: 90,
                strokeWeight: 0,
                fillColor: color,
                fillOpacity: 0.65,
                editable: true
              }); 
```

以这种方式绘制形状后，它们是可编辑的，但我不能一次选择一个形状，例如删除它。IE。无法使用先前编写的功能来操作形状。

有没有办法设置监听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:06:30.430

我找到了解决我的问题的方法。我保存的形状是由一个循环绘制的，并且总是有一个变量名，该变量名在循环运行时会递增。因此，在循环运行时，我在每个形状上设置了地图侦听器：

```
varString = "shape"+i;

    //Output shape
    window[varString] = new google.maps.Polygon({
                map: map,
                paths: paths,
                zIndex: 90,
                strokeWeight: 0,
                fillColor: color,
                fillOpacity: 0.65,
                myIndex: i,
                editable: true
              });

    google.maps.event.addListener(window[varString],"mouseout",function(){
                 path = this.getPath();
                 area = google.maps.geometry.spherical.computeArea(path);
                                     alert("area");
                }); 
```

现在我可以在每个形状上设置相同的功能，并且用户可以像以前一样编辑它们，主要区别在于现在无法使用“选择”功能，并且所有形状似乎始终都是“选择”的（可以拖动的角上的点在所有形状上始终可见）。

# javascript - 如何根据文本值构建简单的 jQuery 字典字母过滤器？

> ID：12621871
> 
> 赞同：2
> 
> 时间：2012-09-27T12:54:42.913
> 
> 标签：javascript, jquery, html, list, filter

我创建它没有问题，我的问题是：当我尝试检测空返回时。我准备了 jsFiddle 进行检查，点击“B”来寻找我想要的东西，但是用一种可靠的方式。

基本上我正在尝试用聪明的方式检查结果是否为空？

**[jsFiddle 示例。](http://jsfiddle.net/AeGQt/23/)**

**jQuery：**

```
var triggers = $('ul.alphabet li a');
var filters = $('ul.medical_dictionary li strong');

triggers.click(function() {
    var takeLetter = $(this).text();;
    filters.parent().hide();

    filters.each(function(i) {
        var compareFirstLetter = $(this).text().substr(0,1);
        if ( compareFirstLetter ==  takeLetter ) {
            $(this).parent().fadeIn(222);
        }

        //problem on detecting empty one. Press 'B' for example.
        //i can reach manually but this way is useless
        if (takeLetter ==='B') {console.log('There is no result.');}
    });

}); 
```

​</p>

**html:**

```
<ul class="alphabet">
    <li><a>A</a></li>
    <li><a>B</a></li>
    <li><a>C</a></li>
    <li><a>...</a></li>
</ul>

<ul class="medical_dictionary">
      <li><strong>Abdominoplasti</strong>: Lorem ipsum.</li>
      <li><strong>Absans</strong>: Lorem ipsum.</li>
      <li><strong>Abse</strong>: Lorem ipsum.</li>
      <li><strong>....</strong>: Lorem ipsum.</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:06:56.307

尝试以下操作：

请注意，我添加了新变量`found`，该变量设置为`false`每当单击新字母时。一旦找到与字母匹配的字典条目，此变量就会设置为 true。

现在，在循环之后检查相同的变量以检查是否找到相关条目，或者如果没有找到条目则不显示任何结果。

```
var triggers = $('ul.alphabet li a');
var filters = $('ul.medical_dictionary li strong');

triggers.click(function() {
    var takeLetter = $(this).text();
    var found = false;
    filters.parent().hide();

    filters.each(function(i) {
        var compareFirstLetter = $(this).text().substr(0,1);
        if ( compareFirstLetter ==  takeLetter ) {
            $(this).parent().fadeIn(222);
            found = true;
        }
    });
    if (!found) {console.log('There is no result.');}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:07:59.773

您的警报将始终在`filters`达到第二个元素时触发。怎么样：

```
triggers.click(function() {
    var takeLetter = $(this).text(), result = 0;
    filters.parent().hide();

    filters.each(function(i) {
        if ( RegExp('^'+takeLetter).test($(this).text()) ) {
            result += 1;
            $(this).parent().fadeIn(222);
        }
    });
    if (result<1) {alert('There is no result.');}
}); 
```

看到[这个jsfiddle](http://jsfiddle.net/KooiInc/UFZEg/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T13:16:53.780

我重写了它（只有 JavaScript，不是 HTML）如下：[jsFiddle](http://jsfiddle.net/AeGQt/33/)。

我正在做的是首先根据大写字母过滤条目，然后如果没有找到任何元素则从函数返回。

如果找到了元素，我只在它们的子集上迭代以显示它们。

```
var triggers = $('ul.alphabet li a');
var filters = $('ul.medical_dictionary li strong');

triggers.click(function() {
    var takeLetter = $(this).text();
    filters.parent().hide();

    var availableResults = filters.filter(function (f) {
        return $(this).text()[0] === takeLetter;
    });

    if (!availableResults.length) {
        console.log('There is no result.');
        return;
    }

    availableResults.each(function(i) {
        $(this).parent().fadeIn(222);
    });
}); 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:11:00.500

`.letter-A`我更改了您的代码以向每个元素添加一个类`strong`- 然后您可以计算/隐藏/显示这些。我认为这有点简单：

```
var triggers = $('ul.alphabet li a');
var filters = $('ul.medical_dictionary li strong');

filters.each(function(){
    $(this).addClass('letter-' + $(this).text().substr(0,1));
});

triggers.click(function() {
    var takeLetter = $(this).text();
    filters.parent().hide();

    var matches = filters.filter('.letter-' + takeLetter);
    matches.parent().fadeIn(222);

    if (matches.length == 0) {
        alert('There is no result for ' + takeLetter);
    };

});
​ 
```

见小提琴：http: [//jsfiddle.net/adamh/AeGQt/31/](http://jsfiddle.net/adamh/AeGQt/31/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T13:15:51.247

你需要一种计数器。

```
var triggers = $('ul.alphabet li a');
var filters = $('ul.medical_dictionary li strong');

triggers.click(function() {
var takeLetter = $(this).text();;
var matches = filters.length;
filters.parent().hide();

filters.each(function(i) {
    var compareFirstLetter = $(this).text().substr(0,1);
    if ( compareFirstLetter ==  takeLetter ) {
        $(this).parent().fadeIn(222);
    }

    if (takeLetter != compareFirstLetter)
        matches--;
});

if (matches == 0)
    console.log('There is no result.');
}); 
```

[http://jsfiddle.net/jezen/AeGQt/34/](http://jsfiddle.net/jezen/AeGQt/34/)

# sql - 如何使用邻接列表中的数据创建闭包表？

> ID：12621873
> 
> 赞同：12
> 
> 时间：2012-09-27T12:54:43.437
> 
> 标签：sql, sql-server, hierarchy, transitive-closure-table

我有一个数据库，其中包含使用邻接列表模型存储的类别层次结构。

层次结构为 3 级深（不包括虚构的根节点），包含大约 1700 个节点。第 2 层和第 3 层的节点可以有多个父节点。一个附加表用于多对多关系，如下所示：

```
CREATE TABLE dbo.Category(
    id int IDENTITY(1,1) NOT NULL,
    name varchar(255) NOT NULL,
)

CREATE TABLE dbo.CategoryHierarchy(
    relId int IDENTITY(1,1) NOT NULL,
    catId int NOT NULL,
    parentId int NOT NULL,
) 
```

如果我转而使用传递闭包表方法（为了数据完整性等），是否可以执行一个相对简单的查询来生成闭包表的值？（使用 SQL Server 2005）

我已经浏览了诸如 Bill Karwin 的[分层数据模型](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)之类的文章和演示文稿，但它只包含针对单个节点的插入查询，而且我要花很长时间才能创建这样的树。

谢谢。

**编辑：**
CategoryHierarchy 表中的 RelID 纯粹是为了主键，它与 Category 表的节点 ID 无关。

同样通过闭包表，我的意思是这样的表：

```
CREATE TABLE ClosureTable (
    ancestor int NOT NULL,
    descendant int NOT NULL,
    [length] int NOT NULL,
) 
```

其中前两列是复合主键，并且分别是 Category.id 的外键。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-04-15T00:26:31.267

我试图弄清楚同样的事情，但希望它在递归 CTE 中。这对您不起作用（SQL Server 2008+），但这是我为其他人寻找的最终结果。

关键是锚点不是你的根节点（在哪里`parent_id IS NULL`），而是你*所有*的零深度行都在闭包表中。

### 桌子

```
CREATE TABLE dbo.category (
    id         INT IDENTITY(1, 1) NOT NULL,
    parent_id  INT                    NULL
) 
```

### 数据

```
INSERT INTO dbo.category (id, parent_id)
VALUES
    (1, NULL),
    (2, 1),
    (3, 1),
    (4, 2) 
```

### CTE

```
WITH category_cte AS
(
    SELECT
        id AS ancestor,
        id AS descendant,
        0  AS depth
    FROM dbo.category

    UNION ALL

    SELECT
        CTE.ancestor  AS ancestor,
        C.id          AS descendant,
        CTE.depth + 1 AS depth
    FROM dbo.category AS C
    JOIN category_cte AS CTE
        ON C.parent_id = CTE.descendant
)
SELECT * FROM category_cte 
```

### 结果

```
ancestor descendant depth
-------- ---------- -----
1        1          0     <- anchor query
2        2          0
3        3          0
4        4          0
2        4          1     <- first recursive query
1        2          1
1        3          1
1        4          2     <- second recursive query 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T16:38:04.593

我想我已经能够自己制定解决方案。

如果有人有更好的方法，请发表评论。

```
IF OBJECT_ID('dbo.ClosureTable', 'U') IS NOT NULL
    DROP TABLE dbo.ClosureTable
GO

CREATE TABLE dbo.ClosureTable (
    ancestor int NOT NULL,
    descendant int NOT NULL,
    distance int NULL
)
GO

DECLARE @depth INT
SET @depth = 1

INSERT INTO dbo.ClosureTable (ancestor, descendant, distance)
SELECT catid, catid, 0 FROM dbo.Category -- insert all the self-referencing nodes

WHILE (@depth < 4) -- my tree is only 4 levels deep, i.e 0 - 3
BEGIN
    INSERT INTO dbo.ClosureTable (ancestor, descendant, distance)
    SELECT ct.ancestor, h.catid, @depth
    FROM dbo.ClosureTable ct INNER JOIN dbo.CategoryHierarchy h ON ct.descendant = h.parentid
    WHERE ct.distance = @depth - 1

    SET @depth = @depth + 1
END 
```

干杯:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T13:12:07.370

```
 WITH Children (id, name, iteration) AS (
    SELECT id, name, 0
    FROM Category 
    --WHERE id = @folderid -- if you want a startpoint
    UNION ALL 
    SELECT b.id, b.name, a.iteration + 1
    FROM Children AS a, Category AS b, CategoryHierarchy c
    WHERE a.id = c.parentId
      AND b.id = c.catId 
  )
  SELECT id, name, iteration FROM Children 
```

未经测试，但应该像这样工作。至少开始如何在没有循环的情况下快速执行此操作。

编辑：我错过了，而不是 relId，它是必须链接到 Childrens 表的 parentId。但结果应该是一个包含所有表格的表格。所以这不是你最初想要的吗？

# java - primefaces p：日历组件模式

> ID：12621878
> 
> 赞同：1
> 
> 时间：2012-09-27T12:54:55.517
> 
> 标签：java, jsf, jsf-2, primefaces, jsf-1.2

我刚刚得到一个简单的查询。我在我的项目中使用**p:calendar 。**它可以正常工作`pattern="HH:mm"`，但如果我将其更改为`pattern="KK:mm"`它仅显示当前时间的输入文本。

这很好用

```
<p:calendar id="p6" value="#{testBean.date}" pattern="HH:mm"   styleClass="calStyle" timeOnly="true" > 
```

但这不是。

```
 <p:calendar id="p6" value="#{testBean.date}" pattern="kk:mm"   styleClass="calStyle" timeOnly="true" > 
```

我想要从 01:00 到 24:59 的时间，因此我使用“kk:mm”模式。任何指导都受到高度赞赏。

谢谢：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:15:11.880

我认为原因是 Primefaces 使用[Jquery](https://github.com/jquery/globalize#dates)日期模式。[您可以在ConvertPattern](http://code.google.com/p/primefaces/source/browse/primefaces/trunk/src/main/java/org/primefaces/component/calendar/CalendarUtils.java?r=6605)方法中获得概述。HH 应该已经提供 24h 和 hh 12h。

# ruby - 每个环境的 sinatra config.yml 设置不起作用

> ID：12621881
> 
> 赞同：3
> 
> 时间：2012-09-27T12:55:05.893
> 
> 标签：ruby, sinatra, yaml, configuration-files

我尝试为我的 sinatra 应用程序设置一个配置文件，并且简单的设置工作。（我的代码中的 puts 打印“Hello!!”）但我阅读[了这个文档](http://www.sinatrarb.com/contrib/config_file.html)，它说我可以定义每个环境的设置。我试过了，但它不起作用。我究竟做错了什么？;) 我正在使用这段代码：

```
#settings.yml
#environments: :production, :development
environment: :development

bla: Hello!!

development:
  db_adapter:   "sqlite3"
  db_location:  "db/development"
  db_logfile:   $stdout
  db_loglevel:  :debug
  haml: "format => :html5, :ugly => true"

production:
  db_adapter:   "sqlite3"
  db_location:  "db/production"
  db_logfile:   "log/production_db.log"
  db_loglevel:  :error 
```

和

```
#main.rb
#!/usr/bin/ruby

require 'rubygems'
require 'sinatra'             #Webframework
require 'sinatra/config_file' #Config

set :environment, :development
config_file("settings.yml")

puts settings.bla

DataMapper::Logger.new(settings.db_logfile, settings.db_loglevel)
DataMapper.setup(:default, "#{settings.db_adapter}://#{Dir.pwd}/#{settings.db_location}")
... 
```

它为 settings.db_logfile 引发了 noMethodError ...对不起我的英语不好；）

EDIT1：我明白了；）我必须把它写到我的 main.rb 中：

```
set :environment, :development

configure :development do
  set :db_adapter     ,  "sqlite3"
  set :db_location    ,  "db/development"
  set :db_logfile     ,  $stdout
  set :db_loglevel    ,  :debug
  set :haml           ,  :format => :html5
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-11T11:18:56.183

很久很久以前...

我认为如果您加载 config.yml 文件，但像我看到的那样在主文件中设置您的配置，您还没有解决任何问题。

我在 settings.some_yaml_value 中遇到了关于 noMethodError 的同样问题，原因是路径参数。我是这样解决的：

```
config_file '/config.yml' 
```

注意 /

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T20:08:59.807

我在加载文件但没有拾取环境时遇到问题，所以我必须参考`settings.development.foo`

事实证明，如果您的`.yml`文件包含与您的环境不匹配的任何顶级密钥，则整个环境加载将被取消。

不好的例子：

```
defaults: &defaults
  foo: asd
  bar: xyz

development:
  <<: *defaults

test:
  <<: *defaults

production:
  <<: *defaults 
```

好例子：

```
development: &defaults
  foo: asd
  bar: xyz

test:
  <<: *defaults

production:
  <<: *defaults 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-27T14:51:53.420

你想像这样配置你的环境：

```
configure :production do
  set :db_adapter, "sqlite3"
  set :db_location, "db/production"
  set :db_logfile, "log/production_db.log"
  set :db_loglevel, :error
end

configure :development do
  set :db_adapter, "sqlite3"
  set :db_location, "db/development"
  set :db_logfile, $stdout
  set :db_loglevel, :debug
  set :haml, {:format => :html5, :ugly => true}
end

configure :test do
  ...
end 
```

请参阅[Sinatra 自述文件](https://github.com/sinatra/sinatra#configuration)

# asp.net - razor 网页中的表单安全问题

> ID：12621883
> 
> 赞同：0
> 
> 时间：2012-09-27T12:55:11.490
> 
> 标签：asp.net, razor, asp.net-webpages

我有一个隐藏的表单字段来删除我的剃刀网页应用程序中的项目

```
<input type="hidden" value="137" name="id"> 
```

用户可以轻松更改项目值并删除其他用户的产品，我们如何确保这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:56:42.017

您应该进行服务器端验证，以确保该用户具有编辑/删除（或任何其他操作）该实体的适当授权。

例如，在您的`Controller`

```
[HttpPost]
public ActionResult Delete(int? id)
{
   if (CanUserDeleted(id))
   {
      Delete(id);
      // more magic
   }
   else
   {
      // Give the user an error
   }
} 
```

# .net - TFS 2010 获取最新解决冲突

> ID：12621890
> 
> 赞同：2
> 
> 时间：2012-09-27T12:55:32.100
> 
> 标签：.net, tfs

我目前正在使用 TFS 2010 进行源代码控制，但我遇到了一些奇怪的问题。

发生的情况是，开发人员 1 签出一些文件，进行一些修改，然后将它们签入。然后，当开发人员 2 在源代码管理中对这些文件执行“获取最新”时，它将打开“解决冲突”选项卡和开发人员的每个文件1 修改将在那里，冲突类型：“现有文件”和描述：“本地存在同名文件”。我还应该提到，Developer 2 没有签出文件，所以我假设不会发生冲突，它只会在所有文件上获得最新的。

每次有人做出改变时都会发生这种情况。有没有其他人遇到过这样的问题，如果有，你是如何解决的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T18:25:56.530

I saw this recently using VS2012 & TFS2012\. We'd recently upgraded TFS, so I assume that was when/how my workspace got screwed up.

Can confirm that the TFS workspace nuke-it-from-orbit procedure fixed it for me:

1.  Manually delete all files on the development machine under the problematic project that can be deleted manually
2.  Right-click on the project and Get Specific Version (VS2012 moved this to Advanced > Get Specific Version)
3.  Make sure both Overwrite check-boxes are checked

Some of that is clearly unnecessary, but it's a bit of feel-better voodoo.

# javascript - 在 html 中显示视口值并实时更新

> ID：12621893
> 
> 赞同：0
> 
> 时间：2012-09-27T12:55:45.673
> 
> 标签：javascript, jquery, html

我的页面上有一个`<p>`元素，我希望它包含视口值，我可以使用它：

```
<p>
  <script>
    document.write($(this).width());
  </script>
</p> 
```

但它“静态地”显示它。当我调整浏览器视口大小时，如何让这个值动态更新（显示实时实际值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:59:32.733

您必须将该功能附加到窗口的调整大小事件。

检查[这个](http://msdn.microsoft.com/en-us/library/ie/ms536959%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:47:09.823

好吧，也许它会很有用，用下面的代码完成，不是最好的解决方案，但它有效！也许有人可以改进它或提出另一种更简单的方法。

```
 window.onresize = resize;

            function resize() {
                var viewPort = $(window).width();
                $("#window").text(viewPort);
            } 
```

# data-structures - Map 结构中的两个数组还是一个？

> ID：12621898
> 
> 赞同：0
> 
> 时间：2012-09-27T12:55:59.587
> 
> 标签：data-structures

我正在尝试创建一个地图，其中数据将是静态的，并且在程序启动后不会更改（实际上是从服务器加载的）

有两个数组是否更好，例如在 Java 中：

```
String keys[] = new String[10];
String values[] = new String[10]; 
```

其中键[i] 对应于值[i]？

或将它们保存在单个数组中，例如

```
String[][] map[] = new String[10][2];
where map[i][0] is the key and map[i][1] is the value? 
```

就个人而言，第一个对我来说更有意义，但第二个对我的伴侣更有意义。在性能方面是否更好？更容易理解？

**更新**：我希望在不存在 Map 和 KeyValuePairs 的 JavaScript 中执行此操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T13:00:41.007

使用[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)实现（在 Java 中）会使这更容易理解，因为关联更清晰：

```
static final Map<String, String> my_map;
static
{
    my_map = new HashMap<String, String>();
    // Populate.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:00:20.430

A[`Hashtable`](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)看起来像你需要的。它以这样一种方式散列键，使得查找可以在 O(1) 中发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:15:52.803

因此，您希望在 javascript 中执行此操作。地图中js中的任何数组或对象，所以你可以这样做

```
var mymap = {'key1':'value1','key2':'value2'}; 
```

# c# - 使用 Visual Studio 2012 捆绑时如何正确路径相对 CSS 路径？

> ID：12621901
> 
> 赞同：13
> 
> 时间：2012-09-27T12:56:06.157
> 
> 标签：c#, css, asp.net-mvc, visual-studio-2012, asp.net-optimization

我有一个在 Visual Studio 2012 上运行的 MVC 3 / .NET 4.0 应用程序。

我刚刚为我的所有 JS 和 CSS 文件创建了一个静态包。

它首先对我大喊大叫，因为我在开始时使用了没有“~/”的路径，但是我需要包含位于我服务器上另一个虚拟目录中的文件，所以我使用 /../ 来获取它们。

我的捆绑包如下所示：

```
Bundle css = new Bundle("~/MyCSS", typeof(CssMinify));
css.AddFile("~/Content/css/Site.min.css");   
css.AddFile("~/../CommonWeb/css/fontawesome/css/font-awesome.css");   
BundleTable.Bundles.Add(css); 
```

我正在尝试包含令人敬畏的字体。它发现 CSS 文件很好，但没有字体和图标进入。我猜是这样的行导致了问题：

```
src: url('../font/fontawesome-webfont.eot');  /* From Font-Awesome */ 
```

关于如何解决这个问题的任何想法？谢谢！

**编辑：更多信息：**

在查看相对 CSS 路径的请求时，它位于我服务器的根目录之后：

```
http://localhost/font/fontawesome-webfont.woff 
```

代替

```
http://localhost/CommonWeb/css/fontawesome/font/fontawesome-webfont.woff 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T12:58:08.307

CSS由浏览器解析。CSS 中的 URL 与**CSS**文件的位置相关。不是 HTML 页面。

因此，只需检查您的字体上传的位置，它们应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T13:00:24.393

这将转到 Web 应用程序的相对根目录上方的目录：

```
css.AddFile("~/../CommonWeb/css/fontawesome/css/font-awesome.css"); 
```

不要这样做，而是将该 CSS 文件复制到它所在项目的构建后事件中`Content/css`，并使用宏语法使`COPY`命令更容易。[您可以在此处](http://msdn.microsoft.com/en-us/library/42x5kfw4%28v=vs.80%29.aspx)找到该语法。Visual Studio 还提供了一种扩展对话框并为您提供帮助的机制，因为它显示了实际路径。

最后，更改要使用的捆绑包：

```
css.AddFile("~/Content/css/font-awesome.css"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-01T14:14:11.287

[这篇 SO 帖子](https://stackoverflow.com/a/12587256/429973)对此问题有一个有用的解决方案，它似乎是由实际为 Microsoft 工作的人在 ASP.net Bundle 代码上编写的。*（奇怪的是，谁编辑了这个问题，但没有发布答案！）*

> 问题很可能是 css 文件中的图标/图像使用了相对路径，因此如果您的捆绑包与未捆绑的 css 文件不在同一个应用程序相对路径中，它们就会成为断开的链接。
> 
> 我们在待办事项列表中的 css 中重新设置了 url，但现在，最简单的做法是让你的 bundle 路径看起来像 css 目录，这样相对 url 就可以工作，即：

```
new StyleBundle("~/Static/Css/bootstrap/bundle") 
```

> 更新：我们在 1.1beta1 版本中添加了对此的支持，因此要自动重写图像 url，您可以添加一个新的 ItemTransform 来自动执行此变基。

```
bundles.Add(new StyleBundle("~/bundles/publiccss").Include(
            "~/Static/Css/bootstrap/bootstrap.css",
            "~/Static/Css/bootstrap/bootstrap-padding-top.css",
            "~/Static/Css/bootstrap/bootstrap-responsive.css",
            "~/Static/Css/bootstrap/docs.css", new CssRewriteUrlTransform())); 
```

* * *

由于未正确使用相对路径，这解决了我在生产服务器上的 Font Awesome 图标上出现 404 错误的问题。

```
bundles.Add(new StyleBundle("~/Content/font-awesome/css/bundle").Include(
      "~/Content/font-awesome/css/font-awesome.css", new CssRewriteUrlTransform())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T06:04:54.173

我在 Django 上遇到过这个问题，如果你愿意使用 CDN，你就不会遇到这个问题。

只需添加这个

```
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> 
```

`src: url('../font')`部分将在 CDN 级别内解决，而不是您的服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-02T22:06:16.003

我的捆绑方式与您的略有不同，但是您对*CSS 相对路径*的编辑痛苦地看起来像同样的问题。这就是我捆绑的方式。

```
 bundle.Add(new StyleBundle("~/Content/css").Include("~/Content/font-awesome.css", new CssRewriteUrlTransform())); 
```

`new CssReWriteUrlTransform()``@font-face`在 css转换`src: url('../fonts/fontawesome')`为`src: url('/fonts/fontawesome')`

**我拿出来** `new CssReWriteUrlTransform()`，字体加载正常。

另外，确保字体路径是相对于 CSS 文件的。`.woff2`如果您在 II8 中托管，请确保您已添加`.woff`MIME 类型。

# c# - 使用 protobuf-net 的惰性流驱动对象序列化

> ID：12621902
> 
> 赞同：5
> 
> 时间：2012-09-27T12:56:08.293
> 
> 标签：c#, wcf, serialization, streaming, protobuf-net

我们正在开发用于流式传输大量数据的 WCF 服务，因此我们选择使用[WCF 流](http://msdn.microsoft.com/en-us/library/ms733742.aspx)式传输功能与[protobuf-net](http://code.google.com/p/protobuf-net/)序列化相结合。

**语境：**

通常一个想法是序列化服务中的对象，将它们写入流并发送。在另一端，调用者将收到一个 Stream 对象，它可以读取所有数据。

所以目前服务方法代码看起来有点像这样：

```
public Result TestMethod(Parameter parameter)
{
    // Create response
    var responseObject = new BusinessResponse { Value = "some very large data"};

    // The resposne have to be serialized in advance to intermediate MemoryStream
    var stream = new MemoryStream();
    serializer.Serialize(stream, responseObject);
    stream.Position = 0;

    // ResultBody is a stream, Result is a MessageContract
    return new Result {ResultBody = stream};
} 
```

BusinessResponse 对象被序列化为 MemoryStream 并从方法返回。在客户端，调用代码如下所示：

```
var parameter = new Parameter();

// Call the service method
var methodResult = channel.TestMethod(parameter);

// protobuf-net deserializer reads from a stream received from a service.
// while reading is performed by protobuf-net, 
// on the service side WCF is actually reading from a 
// memory stream where serialized message is stored
var result = serializer.Deserialize<BusinessResponse>(methodResult.ResultBody);
return result; 
```

因此，当`serializer.Deserialize()`被调用时，它会从流中读取`methodResult.ResultBody`，同时在服务端 WCF 正在读取已从`TestMethod`.

**问题：**

我们想要实现的是立即摆脱`MemoryStream`服务端整个对象的初始序列化。由于我们使用流式传输，我们希望避免在发送之前将序列化对象保留在内存中。

**主意：**

完美的解决方案是返回一个空的、定制的 Stream 对象（来自`TestMethod()`），并引用一个要序列化的对象（在我的示例中为“BusinessResponse”对象）。因此，当 WCF 调用`Read()`我的流的方法时，我在内部使用 protobuf-net 序列化对象的一部分并将其返回给调用者，而不将其存储在内存中。

现在有一个问题，因为我们真正需要的是在读取流的那一刻，可以将一个对象逐个序列化。我知道这是完全不同的序列化方式 - 我不想将对象推送到序列化程序，而是希望逐个请求序列化内容。

使用 protobuf-net 可以以某种方式进行这种序列化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:52:21.390

我编写了一些代码，可能与 Marc 的门想法一致。

```
public class PullStream : Stream
{
    private byte[] internalBuffer;
    private bool ended;
    private static ManualResetEvent dataAvailable = new ManualResetEvent(false);
    private static ManualResetEvent dataEmpty = new ManualResetEvent(true);

    public override bool CanRead
    {
        get { return true; }
    }

    public override bool CanSeek
    {
        get { return false; }
    }

    public override bool CanWrite
    {
        get { return true; }
    }

    public override void Flush()
    {
        throw new NotImplementedException();
    }

    public override long Length
    {
        get { throw new NotImplementedException(); }
    }

    public override long Position
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        dataAvailable.WaitOne();
        if ( count >= internalBuffer.Length)
        {
            var retVal = internalBuffer.Length;
            Array.Copy(internalBuffer, buffer, retVal);
            internalBuffer = null;
            dataAvailable.Reset();
            dataEmpty.Set();
            return retVal;
        }
        else
        {
            Array.Copy(internalBuffer, buffer, count);
            internalBuffer = internalBuffer.Skip(count).ToArray(); // i know
            return count;
        }
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        throw new NotImplementedException();
    }

    public override void SetLength(long value)
    {
        throw new NotImplementedException();
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        dataEmpty.WaitOne();
        dataEmpty.Reset();

        internalBuffer = new byte[count];
        Array.Copy(buffer, internalBuffer, count);

        Debug.WriteLine("Writing some data");

        dataAvailable.Set();
    }

    public void End()
    {
        dataEmpty.WaitOne();
        dataEmpty.Reset();

        internalBuffer = new byte[0];

        Debug.WriteLine("Ending writes");

        dataAvailable.Set();
    }
} 
```

这是一个简单的流后代类，仅实现读取和写入（和结束）。没有数据可用时读取阻塞，数据可用时写入阻塞。这种方式只涉及一个字节缓冲区。其余部分的 linq 复制已打开以进行优化；-) 添加了 End 方法，因此在没有数据可用且不再写入数据时执行 Read 时不会发生阻塞。

您必须从单独的线程写入此流。我在下面展示这个：

```
 // create a large object
    var obj = new List<ToSerialize>();
    for(int i = 0; i <= 1000; i ++)
        obj.Add(new ToSerialize { Test = "This is my very loooong message" });
    // create my special stream to read from
    var ms = new PullStream();
    new Thread(x =>
    {
        ProtoBuf.Serializer.Serialize(ms, obj);
        ms.End();
    }).Start();
    var buffer = new byte[100];
    // stream to write back to (just to show deserialization is working too)
    var ws = new MemoryStream();
    int read;
    while ((read = ms.Read(buffer, 0, 100)) != 0)
    {
        ws.Write(buffer, 0, read);
        Debug.WriteLine("read some data");
    }
    ws.Position = 0;
    var back = ProtoBuf.Serializer.Deserialize<List<ToSerialize>>(ws); 
```

我希望这可以解决您的问题 :-) 无论如何编写代码很有趣。

问候， 雅科

# python - 包含 lin 时，Python ljust 无法正确显示

> ID：12621907
> 
> 赞同：3
> 
> 时间：2012-09-27T12:56:20.913
> 
> 标签：python, string, format

我正在使用 Django 创建一个用于记录足球队的网站，我有一个带有 CSS 等的“漂亮”显示，但作为备份/旧学校版本，我试图让代码将信息写入一个基本的 .html 文件正在使用 rjust、ljust 等来格式化文本。在下面的代码中，如果我删除链接代码，并且只显示团队名称的字符串，所有内容都正确排列。一旦我添加了链接的 HTML，尽管列没有对齐并且完全不正常。我做错了什么？

```
standings = Team.objects.filter(active=True).order_by('-wp')

output += '<pre>\n'  
output += '%s   %s   %s   %s\n' % (str('Rk').rjust(3), str('Team').ljust(50), str('W').rjust(2), str('L').rjust(2))
output += '%s   %s   %s   %s\n' % (str('--').rjust(3), str('----').ljust(50), str('-').rjust(2), str('-').rjust(2))

for row in mpi:
    the_team = "<a href=\"%s\">%s</a>" % (row.slug, row.name)
    output += '%s   %s   %s   %s\n' % (str(row.rank).rjust(3), str(the_team).ljust(50), str(row.won).rjust(2), str(row.lost).rjust(2))
output += '</pre>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:23:50.280

该字符串`"<a href=\"%s\">%s</a>"`包含一些未在浏览器上呈现的字符，您正在格式化源代码，而不是可视化。

替换`str(row.the_team).ljust(50)`为，`str(row.the_team).ljust(50+len(row.slug)+15)`因为有 15 个不可见的字符（即`<a href=""></a>`）加上 slug。

**更新：**您可能想要删除一些`str`. 如果某个值已经是字符串，则无需再次（重新）将其转换为字符串。您也可以将长行拆分为较短的行。

```
output = '<pre>\n'
output += '%s %s%s%s\n' % ('Rk'.rjust(3), 'Team'.ljust(50), 'W'.rjust(2), 'L'.rjust(2))
output += '%s %s%s%s\n' % ('--'.rjust(3), '----'.ljust(50), '-'.rjust(2), '-'.rjust(2))

for team in teams:
    link = '<a href="%s">%s</a>' % (team.slug, team.name)
    link = link.ljust(50 + len(team.slug) + 15)
    rank, won, lost = str(team.rank).rjust(3), str(team.won).rjust(2), str(team.lost).rjust(2)
    output += '%s %s%s%s\n' % (rank, link, won, lost)
output += '</pre>'
print output 
```

# xcode - 我可以将 UIView 图像设置为像 css 中一样覆盖吗？

> ID：12621908
> 
> 赞同：0
> 
> 时间：2012-09-27T12:56:25.797
> 
> 标签：xcode, image, uiview, cover

目前 UIView 设置为缩放以适应。有没有办法将它设置为填充整个元素并将其设置为中心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:11:32.567

有一种称为方面填充的内容缩放模式可能会满足您的需求。

# if-statement - if 语句层的替代方案

> ID：12621909
> 
> 赞同：1
> 
> 时间：2012-09-27T12:56:27.073
> 
> 标签：if-statement, lisp, boolean, conditional

有时，我的 lisp 代码中会出现多层 if 语句。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:00:06.030

不幸的是，这是其中一种情况，答案是“视情况而定”。在某些情况下，显而易见的选择是使用`cond`.

```
(if condition1
   result1
   (if condition2
       result2
       default))

;; naturally converted to:
(cond (condition1 result1)
      (condition2 result2)
      (t default)) 
```

在其他时候，`cond`搭配一点`or`或`and`可能正是您想要的。

```
(if condition1
   (if condition2
       result12
       result1)
   (if condition2
       result2
       default))

;; naturally turns intoteh answe
(cond ((and condition1 condition2) result12)
      (condition1 result1)
      (condition2 result2)
      (t default)) 
```

注意，我只写过这段代码，没有测试过，但原则上应该没问题。

不幸的是，有时即使是更简单易读的`cond`形式也不够清晰，在这种情况下，通常值得更加努力地关注实际问题。可能有一种更好的方式分解逻辑的方法（调度表，具有合适参数的外部逻辑调用函数，......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T14:46:24.657

您可以更改代码的方向很少。

1.  创建封装条件的高阶函数，或者可能是宏，或者可能重用现有的宏（例如看[一下 case 宏](http://clhs.lisp.se/Body/m_case_.htm)）。`remove-if`将是一个高阶函数的例子，它可以让你不用写一个“if”。

2.  使用多态性。Lisp 有类、对象、重载和所有你期望对象系统拥有的工具（甚至可能还有一点额外的；）。

假设您有以下代码：

```
;; Suppose your `person' is a list that has that person's
;; name as its first element:

(defun hello! (person)
  (if (string= (car person) "John")
        (concatenate 'string "Hello, " (car person))
     (print "Hello, who are you?")))

(defun goodbye! (person)
  (if (string= (car person) "John")
        (concatenate 'string "Goodbye, " (car person))
     (print "Goodbye, mysterious stranger!")))

;; You would use it like so:
(hello! '("John" x y z))
(goodbye! '(nil x y z)) 
```

现在，您可以将其重写为：

```
(defclass person () ())

(defclass friend (person)
  ((name :accessor name-of
         :initarg :name)))

(defgeneric hello! (person))
(defgeneric goodbye! (person))

(defmethod hello! ((person person))
  (print "Hello, who are you?"))

(defmethod hello! ((person friend))
  (print (concatenate 'string "Hello, " (name-of person))))

(defmethod goodbye! ((person person))
  (print "Goodbye, mysterious stranger!"))

(defmethod goodbye! ((person friend))
  (print (concatenate 'string "Goodbye, " (name-of person))))

;; Which you would use like so:

(hello! (make-instance 'person))
(goodbye! (make-instance 'friend :name "John"))

;; Note that however the later is significantly more verbose
;; the ratio will change when you have more `if's which you
;; can systematize as objects, or states. 
```

换句话说，通过封装状态，您可以避免显式编写条件语句。在此过程中，您还将获得一些可读性，因为您不需要记住列表的哪一部分包含哪些信息 - 您现在将其标记为“名称”。

# php - 向不同用户展示不同版本的页面

> ID：12621911
> 
> 赞同：0
> 
> 时间：2012-09-27T12:56:27.857
> 
> 标签：php, optimization

我正在创建一个网站，其中不同的帐户类型将显示每个页面的不同版本。我有它的工作，但我的问题是关于速度/“最佳实践”。以下哪一项（或完全不同的方式）是最好的方法？

选项 1\. 将每种帐户类型分解为文件的各个部分：

```
if($accountType == "type1"){
  //All lines of code for the account type1 page
}
elseif($accountType == "type2"){
  //All lines of code for the account type2 page
}
elseif($accountType == "type3"){
  //All lines of code for the account type3 page
} 
```

选项 2\. 使用包含文件将每个帐户类型分成文件的部分：

```
if($accountType == "type1"){
  //this file has all of the code for account type1 page
  require('includes/accounts/type1/file.php');
}
elseif($accountType == "type2"){
  //this file has all of the code for account type1 page
  require('includes/accounts/type2/file.php');
}
elseif($accountType == "type3"){
  //this file has all of the code for account type1 page
  require('includes/accounts/type3/file.php');
} 
```

选项 3\. 在整个文件中使用大量条件语句为每种帐户类型生成页面：

```
if($accountType == "type1"){
  $result = mysql_query("//sql statement for account type1");
}
elseif($accountType == "type2"){
  $reslut = mysql_query("//sql statement for account type2");
}
elseif($accountType == "type3"){
  $result = mysql_query("//sql statement for account type3");
}
while ($row = mysql_fetch_array($result)) {
  $variable1 = $row['variable1'];
  if($accountType == "type1"){
    $variable2 = $row['type1Variable2'];
    $variable3 = $row['type1Variable3'];
  }
  elseif($accountType == "type2"){
    $variable2 = $row['type2Variable2'];
  }
  elseif($accountType == "type3"){
    $variable2 = $row['type3Variable2'];
  }
  $variable4 = $row['Variable4'];
}
echo "The variables echoed out are $variable1, $variable2";
if($accountType == "type1"){
  echo ", $variable3";
}
echo "and $variable4";
//the rest of the file to follow in the same way 
```

基本上可以归结为：

选项1：文件为1000行代码。
方案二：文件30行代码，每个include文件250-350行代码之间。选项3：文件为650行代码。它较少，因为某些代码可以在所有三种帐户类型之间“共享”。

哪个选项是最快/“最佳实践”？我倾向于选项 3，因为整体文件大小会更小，但是使用此选项有更多的条件语句（选项 1 和 2 只有三个条件语句，而选项 3 例如有 40 个）。有这么多的条件语句会使文件处理速度变慢吗？选项 1 和选项 2 之间实际上有什么区别（将代码块分成包含文件是否意味着它只会为每种帐户类型加载一个包含文件？还是 php 加载所有三个文件并只选择正确的一个？）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T13:03:35.180

就效率而言，选项 3 将是最慢的，因为它的条件检查比其他任何方式都多 - 但是，速度将非常（*非常*）可以忽略不计。

定义“最佳实践”是不可能的——它实际上归结为“什么对*你*和*你的工作人员来说*最容易维护”。如果，在路上，你必须对代码进行大量更改，但只是为了`$accountType == "type2"`，你想通过大量的意大利面条代码（选项 3），还是更多的分块（选项 1），或者只需打开该类型的特定文件（选项 2）？

在我个人看来，即使不使用 OOP/MVC 框架实践，我也会推荐选项 2。如果您需要更新任何内容，将每个单独的类型拆分为自己的单独文件将为您省去很多麻烦。您甚至可以合并某些部分 - 例如，如果所有三种类型都有一个具有相同外观和感觉的“块”，您可以在它自己的包含中定义它并将其包含在所有三种类型的文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:04:55.623

请把第 1 版扔出窗外，好吗！它对错误非常敏感，而且大型文件并不是很方便。

我自己，我使用选项 2，但我不确定它是否与较小的代码部分有关。我发现为每个术语创建单独的文件更容易，因此数据不会混淆。除此之外，它更容易修改。如果您不注意，版本 3 是敏感的混合数据，我试图避免这种情况。所以我个人会在我的工作版本 2 中选择并且仍然选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T13:06:41.457

在性能方面，我认为任何选项之间没有太大区别。

关于**最佳实践**，我建议您选择选项 2，这在我看来是最易于维护的，因为您可以将与每种类型的用户相关的事情分开并在他们自己的范围内。

如果要在页面之间复用代码，仍然可以为可以封装的共享代码创建控件。

选项 1 听起来像是拥有一个巨大的文件，当您想要修改时很难找到其中的内容，并且您必须担心不修改其他帐户类型的内容。

选项 3 恕我直言，是最糟糕的，因为您获得了糟糕的意大利面条代码，并且为了找出每种帐户类型显示的内容意味着必须遍历所有代码。

# r - 使多个ggplot在r中具有相同的点颜色

> ID：12621916
> 
> 赞同：0
> 
> 时间：2012-09-27T12:56:43.393
> 
> 标签：r, ggplot2, dendrogram, aesthetics

我需要在一页上显示 3 个 ggplot 散点图和一个树状图。如何使每个散点图中的点颜色相同（即，我需要第二组的点对于所有 3 个图表的颜色都相同）。

```
require(graphics)
require(ggplot)
require(ggdendro)

#Scatter plots
df1<-data.frame(x=c(3,4,5),y=c(15,20,25),grp=c(1,2,2))
df1$grp =factor(df1$grp)
colnames(df1)[3]="Group"
p<-ggplot(df1,aes(x,y))
p<-p+ geom_point(aes(colour=factor(Group)),size=4)
p1<-p + coord_fixed()

df2<-data.frame(x=c(3,4,5,6),y=c(15,20,25,30),grp=c(1,2,2,3))
df2$grp =factor(df2$grp)
colnames(df2)[3]="Group"
p<-ggplot(df2,aes(x,y))
p<-p+ geom_point(aes(colour=factor(Group)),size=4)
p2<-p + coord_fixed()

df3<-data.frame(x=c(3,4,5,6,7),y=c(15,20,25,30,35),grp=c(1,2,2,3,4))
df3$grp =factor(df3$grp)
colnames(df3)[3]="Group"
p<-ggplot(df3,aes(x,y))
p<-p+ geom_point(aes(colour=factor(Group)),size=4)
p3<-p + coord_fixed()

#Dendrogram
dis <- hclust(dist(USArrests), "ave")       
d<-as.dendrogram(dis)
ddata<-dendro_data(d,type="rectangle")
dp<-ggplot(segment(ddata)) + geom_segment(aes(x=x,y=y,xend=xend,yend=yend))
dp<-dp+geom_hline(aes(yintercept=50),colour="red") 
```

我尝试使用[多图函数](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20%28ggplot2%29/) multiplot(p1,p2,p3,dp,cols=2) 并得到：

![在此处输入图像描述](../Images/9a7170db483a0c6def4108aac43a4f81.png)

奖励：这些图都有一个固定的纵横比，因此散点图的大小不同，这很好，但我真的不需要散点图占用这么多空间。如何控制最终图中每个图的空间大小？

# iphone - Iphone 应用程序在横向启动后没有响应

> ID：12621925
> 
> 赞同：1
> 
> 时间：2012-09-27T12:57:04.440
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uiinterfaceorientation

我的 iPhone 应用程序有一个非常奇怪的行为。

该应用程序应以任何方向运行。Plist 键已全部设置并`shouldAutorotateToInterfaceOrientation`始终返回`YES`。

此外，它是一个仅限 iPhone 的应用程序，但目前我只能在 iPad 上测试它。

现在，当我以纵向模式启动它时，一切正常。但是，如果它以横向模式启动，则视图不会收到任何触摸输入，按钮和手势根本不起作用。只要窗口保持不变，就会发生这种情况。如果我旋转应用程序，然后将其旋转回横向，它就可以工作。此外，如果我按下 iPad 上的“2x”按钮，该应用程序也开始正常工作。

我检查了所有的视图框架，一切都正确绘制。

在模拟器中运行时，它会忽略初始方向并以纵向模式绘制自身。

可能是什么原因以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:07:54.867

我发现这是 iOS 6 独有的（你会在运行 iOS 6 的 iPad 甚至 iOS 6 iPad 模拟器上看到这一点，但在运行 iOS 5 的设备/模拟器上不会看到）。如果您删除应用程序列表中“支持的界面方向”下的所有条目，这个问题似乎就消失了。或者，如果您在目标设置的摘要屏幕上选中“状态栏”设置的“应用程序启动期间隐藏”选项，这也可以修复它：

![在此处输入图像描述](../Images/cfec38d2a864c93cd0341829ffc3a65a.png)

为什么这些中的任何一个都应该修复错误是没有意义的，但它们似乎可以。

如果您使用“支持的方向”调整，在 iOS 6 中，您仍然可以通过编程方式控制允许的界面方向[`supportedInterfaceOrientations`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)（在 iOS 5 中，您仍然可以使用[`shouldAutorotateToInterfaceOrientation:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation:)）。

# tsql - 对照自身检查 SQL Server 表值

> ID：12621927
> 
> 赞同：2
> 
> 时间：2012-09-27T12:57:12.567
> 
> 标签：tsql, levenshtein-distance

想象一下我有这张桌子：

```
declare @tmpResults table ( intItemId int, strTitle nvarchar(100), intWeight float )

insert into @tmpResults values (1, 'Item One', 7)
insert into @tmpResults values (2, 'Item One v1', 6)
insert into @tmpResults values (3, 'Item Two', 6)
insert into @tmpResults values (4, 'Item Two v1', 7) 
```

还有一个函数，我们称之为 fn_Lev，它接受两个字符串，将它们相互比较，并以整数形式返回它们之间的差异数（即 Levenshtein 距离）。

查询该表的最有效方法是什么，检查每个 strTitle 的 fn_Lev 值与表中的所有其他 strTitle 并删除行彼此相似，Levenshtein 距离为 3，宁愿保持更高的 intWeights？

所以在删除之后，@tmpResults 应该包含

```
1   Item One    7
4   Item Two v1 7 
```

我可以想办法做到这一点，但没有什么不是非常慢的（即迭代）。我确定有更快的方法吗？

干杯，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:06:04.467

如果我对您的理解正确，您可以使用交叉连接

```
SELECT t1.intItemId AS Id1, t2.intItemId AS Id2,  fn_Lev(t1.strTitle, t2.strTitle) AS Lev
FROM @tmpResults AS t1
CROSS JOIN @tmpResults AS t2 
```

交叉连接将为您提供连接左侧和右侧之间的每个行组合的结果（因此它不需要任何 ON 子句，因为它将所有内容与其他所有内容匹配）。然后，您可以使用 SELECT 的结果来选择要删除的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T13:18:04.177

```
SELECT strvalue= CASE 
                WHEN t1.intweight >= t2.intweight THEN t1.strtitle 
                ELSE t2.strtitle 
              END, 
       dist = Fn_lev(t1.strtitle, t2.strtitle) 
FROM   @tmpResults AS t1 
       INNER JOIN @tmpResults AS t2 
         ON t1.intitemid < t2.intitemid 
WHERE  Fn_lev(t1.strtitle, t2.strtitle) = 3 
```

这将执行一个自连接，每行只匹配一次。它将排除匹配自身的行或先前匹配的反向，即如果 A<->B 是匹配项，则 B<->A 不是。

case语句选择权重最高的结果

# jquery - asp.net mvc 3站点所有页面上的jquery灯箱

> ID：12621928
> 
> 赞同：1
> 
> 时间：2012-09-27T12:57:13.190
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我正在开发 mvc 中的 nopcommerce 网站 2.65 版本。它有几个布局页面。我需要显示一个登录弹出窗口，以便用户在访问网站上的任何页面之前需要输入用户名和密码。如何在所有页面上添加此弹出窗口（基本上是 jquery 灯箱）？

# ruby - !nil 没有方便的方法吗？

> ID：12621929
> 
> 赞同：3
> 
> 时间：2012-09-27T12:57:13.533
> 
> 标签：ruby, ruby-on-rails-3

如果我问自己`object.not_nil?`vs ，我想我会更好地看到我的代码`!object.nil?`。所以我的问题是：真的没有！nil 的便捷方法吗？加糖？它是在我眼前而我看不到它还是我只是错过了一个重要的点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T13:00:26.603

这个怎么样？

```
not object.nil? 
```

但更容易做的事情是通过测试变量本身来检查“真实性”。因为`nil`是隐含的`false`，你可以检查`object`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T13:10:00.880

您可以在上层引入糖。代替：

```
if not object.nil? 
```

你可以写：

```
unless object.nil? 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T13:12:31.030

*   那这个呢 ？

    ```
    if object
      # sth
    end 
    ```

    它与如果为 false 则不会执行`object`不同，但取决于您的代码，它可能会更好。

*   另一种解决方案（这也不相同），因为您用`ruby-on-rails-3`: using `present?`which will not execute the block for `[]`or `{}`distinct标记您的问题`!object.nil?`。

*   另一个取决于具体情况：如果您的情况更复杂（使用and/or ） ，使用`unless`which 将不是很好。`&&``||`

*   如果您的情况是这种形式：

    ```
     if !object.nil? && object.something?
       # sth
     end 
    ```

    您可以`try`像使用 Rails 一样使用，如下所示：

    ```
    if object.try(:something?)
      # sth
    end 
    ```

*   在所有其他情况下，`!object.nil?`或者`not object.nil?`保持我猜的最佳解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-27T13:19:53.477

#nil 附近什么时候方便？讨论，Activesupport 的方法#blank？和#present？也不应该被遗忘。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-27T13:46:33.993

不是你一定想要，但你可以`not_nil?`自我介绍：

```
class Object
    def not_nil?
        !self.nil?
    end
end 
```

那么您可以执行以下操作：

`nil.not_nil?`
`==> false`

`3.not_nil?`
`==> true`

`a = []`
`a.not_nil?`
`==> true`

# objective-c - iOS 中的 PayPal 错误 - 此应用未使用受支持的 PayPal 库版本

> ID：12621932
> 
> 赞同：0
> 
> 时间：2012-09-27T12:57:15.673
> 
> 标签：objective-c, ios, paypal, sandbox

昨天我与 PayPal 沙盒集成的应用程序运行良好，而今天它无法运行。刚刚从 PayPal 版本 1.6 下载了最新的库，但是 PayPal 的示例应用程序也出现了这个错误。有任何想法的人有什么问题吗？是来自 PayPal 还是来自 iOS 端？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:50:33.220

问题解决了！我更新到 Mac OS X 10.7.4 并安装了 Xcode 4.5，然后集成了新的 PayPal 库 1.6 并且它工作正常。我相信 PayPal 开发人员必须为 iOS 6 更新那里的 sdk。该库现在支持 iOS 4.3 到 iOS 6。

# java - getHibernateTemplate NullPointerException

> ID：12621933
> 
> 赞同：1
> 
> 时间：2012-09-27T12:57:20.113
> 
> 标签：java, hibernate, jdbc, nullpointerexception, dao

我有一个简单的应用程序可以从 oracle DB 中检索数据：

```
public class userExportImpl extends HibernateDaoSupport {

    public User getUser (final String username) throws OssObjectNotFoundException, OssIllegalArgumentException
    {
       Session session = null;
       SessionFactory sessionFactory = new
            Configuration().configure().buildSessionFactory();
       session = sessionFactory.openSession();
       User user= null;
       createHibernateTemplate(sessionFactory);
       user = (User)getHibernateTemplate().execute( new HibernateCallback()
       {
          public Object doInHibernate(Session session) throws HibernateException, SQLException
          {
            User user = (User) session.get(User.class, username);

            return user;
          }
       });
    session.close();
    return user;
}} 
```

这是我调用getUser的main（）：

```
public class userExportTool {
public static void main(String args[]){
   userExportImpl userExport = new userExportImpl();
   User user = userExport.getUser("test");
}} 
```

这就是我尝试运行它时遇到的异常：

```
Exception in thread "main" java.lang.NullPointerException
    at com.tektronix.userExport.userExportImpl.getUser(userExportImpl.java:40)
    at com.tektronix.userExport.uacnExportTool.main(uacnExportTool.java:17)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

起初我认为 getHibernateTemplate 需要一个会话工厂并打开会话，所以我添加了这些，但我仍然收到一个 nullPointerException 并且我不知道为什么会发生这种情况。hibernate.cfg.xml 和 User.hbm.xml 都存在，我已经尝试通过 session.get() 等更简单的方法使用 db，所以连接必须没问题。你能给我一些想法吗？

# javascript - 使用 javascript 获取对象 XMLHttpRequest 的内容

> ID：12621935
> 
> 赞同：0
> 
> 时间：2012-09-27T12:57:30.100
> 
> 标签：javascript, jquery, xmlhttprequest

我正在尝试调试一些 jquery/ajax 表单内容的问题，并且我需要访问传递给我的 error() 函数的 XMLHttpRequest 对象的内容——最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:15:18.620

使用 Chrome（或 Firebug，或其他），如果您设置断点，您将能够检查局部变量。因此，如果您在错误函数的开头设置断点，它将停止代码，您将能够检查 jQuery 对象。您还可以将 Javascript 语句[`debugger;`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/debugger)用作回调中的第一个语句。

另一种方法是，在错误函数的开头，将对象写入`console.log(error)`. Chrome 控制台很智能，可以让您浏览对象。这是错误回调的签名：

```
error(jqXHR, textStatus, errorThrown) 
```

# actionscript-3 - 如何在动作脚本中获取函数的信息？

> ID：12621938
> 
> 赞同：0
> 
> 时间：2012-09-27T12:57:35.313
> 
> 标签：actionscript-3

我经常遇到参数不匹配错误，这通常需要我很多时间来调试程序。该死的，我真的希望我知道函数的入口要求以及它们来自哪里。

因为我只知道函数变量是函数，所以没有任何其他信息。我写了大量这样的代码

```
 public static function call(func:Function,params:Array = null,addToTailIfNotNull:*=null):void{
        if (func!=null){
            var args:Array =[];
            if(params!=null){
                args = ArrayTools.clone(params); 
            }
            if (addToTailIfNotNull!=null){
                args.push(addToTailIfNotNull);
            }
            func.apply(null,args);
        }
    } 
```

我应该更聪明地做事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:07:56.533

I can suggest you using flash.utils.describeType() method. It returns an XML with a description of an object you passed as a parameter.

Lets say you have a Class:

```
public class Example {
    public function someMethod(number:Number, string:String):void {

    }
} 
```

And you call somewhere:

```
flash.utils.describeType(Example); 
```

You should get an XML with something like this in there:

```
<method name="someMethod" declaredBy="com.example::Example" returnType="void">
  <parameter index="1" type="Number" optional="false"/>
  <parameter index="2" type="String" optional="false"/>
  <metadata name="__go_to_definition_help">
    <arg key="pos" value="501"/>
  </metadata>
</method> 
```

I am not sure that this is what you looking for, as in your example if you pass you Function argument there you will get a description of Function class:

```
<type name="builtin.as$0::MethodClosure" base="Function" isDynamic="false" isFinal="true" isStatic="false">
  <extendsClass type="Function"/>
  <extendsClass type="Object"/>
  <accessor name="length" access="readonly" type="int" declaredBy="Function"/>
  <accessor name="prototype" access="readwrite" type="*" declaredBy="builtin.as$0::MethodClosure"/>
</type> 
```

But maybe you can refactor you "call" method so it could get the right description (for example pass additional info into it - like an object class and a method name - so you could analyse the method signature in it. Not the most beautiful solution, but still...)

# jquery - 在单个页面上加载 jQuery 会有助于整个网站页面的加载时间吗？

> ID：12621939
> 
> 赞同：0
> 
> 时间：2012-09-27T12:57:38.277
> 
> 标签：jquery, performance

如果仅在某些页面上需要 jQuery，那么在这些单独的页面上加载 jQuery 是否有助于整个网站页面的加载时间？

鉴于浏览器将缓存 javascript，它不会有太大的区别。但总的来说，会吗？或者至少这样做并没有什么坏处。正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:01:55.187

您永远不应该导入您不使用的库。

这么说

*   如果您担心服务器工作量：使用[Google 的 CDN 版本](https://developers.google.com/speed/libraries/devguide)。
*   如果您担心浏览器的加载时间：不要。如果你在其他页面上使用 jQuery，它会被浏览器缓存。
*   如果您担心浏览器的执行时间：不要。JQuery 初始化速度太快而无法注意到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:00:38.910

没错，仅在需要它的页面上加载 jQuery 将有助于不使用 jQuery 的页面的性能。但是，如果已经查看了包含 jQuery 库的页面，这不会有太大的不同，因为 javascript 文件已经在本地缓存了。

一般来说，除非你只在 1% 的页面上使用 jQuery，否则我认为将 jQuery 放在`head`每个页面中并没有什么坏处。

如果您担心性能，可以链接到 Google 上托管的脚本。这有好处，因为如果用户查看过的另一个站点已经下载了这个脚本，那么它已经为您的网站缓存了。

[https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

# jquery - 基本的 jQuery 问题重新。blueimp-jQuery-File-Upload with Java

> ID：12621940
> 
> 赞同：0
> 
> 时间：2012-09-27T12:57:38.150
> 
> 标签：jquery, jquery-plugins, file-upload, blueimp

我正在使用 GWT Java，我是 jQuery 新手。我真的不知道要搜索什么来澄清这个问题。也许有人可以指出我正确的方向。最初，我想要一个 GWT 中的多文件上传表单，但 GWT FormPanel 一次只接受一个文件。所以我在看 blueimp-jQuery-File-Upload。

这里有代码： [https](https://github.com/blueimp/jQuery-File-Upload/wiki/Google-App-Engine-Java) ://github.com/blueimp/jQuery-File-Upload/wiki/Google-App-Engine-Java 用于在 Java 中将 blueimp-jQuery-File-Upload 与 App Engine 一起使用。服务器端代码似乎很有意义，但我无法测试它，因为前端似乎什么都不做。

我包含了 jQuery 代码 my_jquery_functions.js

在 HTML 头中，就在 jquery-1.8.2.min.js 之后

我已经阅读了有关 jQuery 的基本内容，其中说典型的 jQuery 语法适用于事件处理程序：$(selector).action()

但是这里的代码（上面的代码链接）以： $(function() { $('#fileupload').fileupload();

我希望通过单击上传按钮来调用这样的代码，但是没有这样的按钮，只有一个浏览按钮，并且在 HTML 中没有引用它。为什么表单没有上传按钮？

如果我添加： alert("jQ called"); 在 jQuery 函数顶部附近没有警报，确认该函数永远不会被调用。

我错过了什么或者这个示例代码是垃圾吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:21:09.647

您指向的代码示例使用输入类型 =“文件”。此输入在浏览器中显示为“浏览”按钮。所以这段代码完全按照它应该做的。

该事件不会在 jQuery 中触发，因为您从未告诉它运行。你应该有类似的东西

```
jQuery(document).ready(function ($) {...} 
```

告诉 jQuery 在页面加载时执行。

# ajax - JQuery ajax OPTIONS 授权请求不起作用

> ID：12621946
> 
> 赞同：0
> 
> 时间：2012-09-27T12:57:46.153
> 
> 标签：ajax, ruby-on-rails-3, jquery, cors

我想将数据发布到另一个域并接收操作返回的确认消息。所以为了让 CORS 工作，我有一个选项操作来处理我的 rails 控制器中的 OPTION HTTP 方法（在与 POST 相同的路径上），目前看起来像这样：

```
def options
  headers['Access-Control-Allow-Origin'] = "*"
  headers['Access-Control-Allow-Methods'] = 'GET, POST, PUT, OPTIONS'
  headers['Access-Control-Max-Age'] = '100'
  headers['Access-Control-Allow-Headers'] = '*, x-requested-with, content-type, accept, origin, referer, user-agent'
  render :text => '', :content_type => 'text/plain'
end 
```

我的 jquery ajax 请求如下所示：（coffeescript）

```
$.ajax
  type: 'POST'
  url:  'http://my-other-domain.com/'
  data: data
  contentType: "application/json; charset=UTF-8"
  crossDomain: true
  success: (response) => 
    if response.data_saved
      ...
  error: () => ... 
```

但是......它不起作用。

OPTIONS 请求似乎正在工作，返回`Access-Control-Allow-Origin:*`和所有，服务器接收并处理发布的数据，但 Chrome 仍然抛出

```
XMLHttpRequest cannot load http://my-other-domain.com/. Origin http://my-main-domain.com is not allowed by Access-Control-Allow-Origin. 
```

在控制台中并触发错误回调。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:42:32.770

标`Access-Control-Allow-Origin: *`头必须包含在所有响应中，而不仅仅是预检 OPTIONS 响应中。在 POST 响应中添加该标头应该可以解决问题。

（另请注意， '*' 不是 中的有效值`Access-Control-Allow-Headers`，但它不应该破坏任何东西）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:03:45.367

我记得我遇到过这样的问题，交叉 ajax 问题，在 php 中我用 header("..."); 解决了这个问题。然后我开始 `.getJSON` 在 Jquery 中使用方法

# python - “预期的字符串或缓冲区”

> ID：12621954
> 
> 赞同：3
> 
> 时间：2012-09-27T12:57:59.150
> 
> 标签：python, string

我有这个代码：

```
x=os.system("host www.google.com")
b=re.findall(r'\w',x)
print b 
```

但这会返回以下错误：

```
TypeError: expected string or buffer 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T16:20:42.567

[os.system](http://docs.python.org/library/os.html#os.system)的返回值是进程的退出代码。这是一个整数，而不是一个字符串，所以你基本上是这样做的：

```
>>> re.findall(r'\w', 0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 177, in findall
    return _compile(pattern, flags).findall(string)
TypeError: expected string or buffer 
```

我认为您正在寻找的功能是[subprocess.check_output](http://docs.python.org/library/subprocess.html#subprocess.check_output)：

```
>>> import subprocess
>>> print subprocess.check_output(['host',  'www.google.com'])
www.google.com has address 173.194.75.147
www.google.com has address 173.194.75.99
www.google.com has address 173.194.75.103
www.google.com has address 173.194.75.104
www.google.com has address 173.194.75.105
www.google.com has address 173.194.75.106
www.google.com has IPv6 address 2607:f8b0:400c:c03::6a 
```

# java - 创建一个 MAVEN 存储库

> ID：12621956
> 
> 赞同：-4
> 
> 时间：2012-09-27T12:58:04.440
> 
> 标签：java, maven

我希望在我的网络上创建一个内部 Maven 存储库。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T13:05:14.813

查看这些开源管理器：

*   [关系](https://www.sonatype.com/products/repository-oss)
*   [档案馆](https://archiva.apache.org/)
*   [神器](https://jfrog.com/artifactory/)
*   [资源库](https://reposilite.com/)

完整列表（还有商业版本）：

*   [存储库管理软件](https://maven.apache.org/repository-management.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:02:39.507

看看 Maven 存储库管理器，例如 Nexus：[http ://maven.apache.org/repository-management.html](http://maven.apache.org/repository-management.html)

也看看如何配置你的设置文件： http: [//www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T13:03:09.147

您正在考虑部署[Nexus Repository](http://www.sonatype.org/nexus/)。

# android - Android：如何获取片段的视图

> ID：12621960
> 
> 赞同：4
> 
> 时间：2012-09-27T12:58:07.743
> 
> 标签：android, nullpointerexception, android-fragments

在课堂上，我以编程方式添加片段。

这个片段包含一个按钮，我想要一个 onClick 实现。

这是我的课程：

```
public class ShareProduct extends SherlockFragmentActivity {

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.share_product);

        FragmentManager fragmentManager = getSupportFragmentManager();
        final FragmentTransaction fragmentTransaction = fragmentManager
                .beginTransaction();

        ProductFragment1 fragment = new ProductFragment1();
        fragmentTransaction.add(R.id.share_product_parent, fragment);
        fragmentTransaction.commit();

        Button done_button = (Button) fragment.getView().findViewById(
                R.id.done_product_1);
        done_button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {

                ProductFragment2 fragment = new ProductFragment2();
                fragmentTransaction
                        .replace(R.id.share_product_parent, fragment);
                fragmentTransaction.commit();
            }
        });
    }
} 
```

我的 ProductFragment1 类是：

```
public class ProductFragment1 extends SherlockFragment {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater
                .inflate(R.layout.share_product_1, container, false);
        return view;
    }
} 
```

我的主要课程使用的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/share_product_parent"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="right|center_vertical"
    android:orientation="horizontal" >

</RelativeLayout> 
```

我的 ProductFragment1 使用的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="25dp" />

    <EditText
        android:id="@+id/et1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/tv1"
        android:textSize="25dp" />

    <Button
        android:id="@+id/done_product_1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/et1"
        android:text="Done" />

</RelativeLayout> 
```

**问题是：**

我在主课的这一行得到了 NullPointerException：

```
Button done_button = (Button) fragment.getView().findViewById(R.id.done_product_1);
done_button.setOnClickListener .... 
```

当我搜索`getView()`片段返回的内容时。我发现它从`onCreateView();`

我检查了它不返回null。

谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T13:03:23.370

你在这里走错了路。您会得到 ，`NPE`因为`Fragments`尚未创建视图。`Fragments`也有一个生命周期，就像`Activities`.

你应该做的是分配`OnClickListener`你的`Fragments` `onViewCreated()`方法内部。然后从那里......您应该创建一个回调并通知您举办`Activity`活动。

# java - 清除远程服务器的ehcache

> ID：12621963
> 
> 赞同：3
> 
> 时间：2012-09-27T12:58:11.007
> 
> 标签：java, ehcache

我们如何`ehcache`在远程服务器上清除？

我的应用程序在登台环境（主机`111.22.3.44`和端口`17000`）中运行，我想编写一个实用方法，可以连接到给定`host:port`并清除`ehcache`我的应用程序。该实用程序应该可以在 Windows 和 Linux 中运行。

我使用`JConsole.exe`实用程序来刷新`ehcache`在 stage-server 中创建的缓存，但是有一种情况我需要以编程方式进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T13:20:32.253

Hurrey ... :) 我得到了`ehcache`在远程环境中清除的解决方案。在这里，我编写了一个 Java 实用程序方法，该方法将清除`ehcache`由主机名和端口指定的给定远程机器。

```
public void flushEhcache() throws IOException, NamingException,  MalformedObjectNameException, NullPointerException, AttributeNotFoundException, InstanceNotFoundException, MBeanException, ReflectionException {
    String host = "111.22.3.44";
    String port = "16000";
    JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://"
        + host + ":" + port + "/jmxrmi");
    JMXConnector jmxc = JMXConnectorFactory.connect(url, null);
    MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();        
    ObjectName beanName = new ObjectName("net.sf.ehcache:type=CacheManager,name=Your  Application Name Here");        
    mbsc.invoke(beanName, "clearAll", new Object[0], new String[0]);
    System.out.println("Flushed out ehcache succesfully");
} 
```

# c++ - sdl c++ 键盘输入使用位图

> ID：12621968
> 
> 赞同：2
> 
> 时间：2012-09-27T12:58:35.283
> 
> 标签：c++, sdl

我必须制作一个允许我写的程序，并且我将在键盘上按下的所有字母都可以从位图图像中获取一个片段，该片段响应我按下的字母。我不能仅使用 SDL_ttf 和 C++ 的 SDL_image。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:56:22.817

1.  找到一个漂亮的充满 ASCII 字形的位图，比如[这个](http://i.stack.imgur.com/YTEpc.png)。

2.  使用 SDL_image 加载到 SDL_Surface。

3.  在您的键盘处理循环中，当一个键被击中时获取 ASCII 值。

4.  使用 ASCII 值在位图中找到正确的 8x8 块以进行复制。

5.  将 SDL_Blit 与适当的 src rect（来自步骤 4）和 dst x/y 一起使用以 blit 到屏幕

6.  将您的 dst x 值增加 8。如果它变得“太大”，则换行，然后将您的 dst y 增加 8。

7.  **砰！**俗气的图形文本输入。处理退格和/或回车的奖励积分。

# internet-explorer - 通过命令行清除浏览器缓存

> ID：12621969
> 
> 赞同：19
> 
> 时间：2012-09-27T12:58:35.827
> 
> 标签：internet-explorer, firefox, google-chrome, command-line, browser-cache

我在媒体领域工作。我需要检查所有主流浏览器（即 IE、Firefox、Chrome、Safari 和 Opera）的每一个变化。

要清除缓存，每次我需要使用 Ctrl + Shift + del。

有没有其他方法可以使用命令行清除每个 Web 浏览器的缓存？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-04-05T23:23:55.083

以下是如何通过命令行清除所有垃圾和缓存（浏览器中没有其他私人数据）。这是一个处理所有垃圾的命令行批处理脚本（截至 2014 年 4 月）：

```
erase "%TEMP%\*.*" /f /s /q
for /D %%i in ("%TEMP%\*") do RD /S /Q "%%i"

erase "%TMP%\*.*" /f /s /q
for /D %%i in ("%TMP%\*") do RD /S /Q "%%i"

erase "%ALLUSERSPROFILE%\TEMP\*.*" /f /s /q
for /D %%i in ("%ALLUSERSPROFILE%\TEMP\*") do RD /S /Q "%%i"

erase "%SystemRoot%\TEMP\*.*" /f /s /q
for /D %%i in ("%SystemRoot%\TEMP\*") do RD /S /Q "%%i"

@rem Clear IE cache -  (Deletes Temporary Internet Files Only)
RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8
erase "%LOCALAPPDATA%\Microsoft\Windows\Tempor~1\*.*" /f /s /q
for /D %%i in ("%LOCALAPPDATA%\Microsoft\Windows\Tempor~1\*") do RD /S /Q "%%i"

@rem Clear Google Chrome cache
erase "%LOCALAPPDATA%\Google\Chrome\User Data\*.*" /f /s /q
for /D %%i in ("%LOCALAPPDATA%\Google\Chrome\User Data\*") do RD /S /Q "%%i"

@rem Clear Firefox cache
erase "%LOCALAPPDATA%\Mozilla\Firefox\Profiles\*.*" /f /s /q
for /D %%i in ("%LOCALAPPDATA%\Mozilla\Firefox\Profiles\*") do RD /S /Q "%%i"

pause 
```

我很确定当你第一次运行它时它会运行一段时间:) 享受吧！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-04-23T06:06:00.267

**您可以运行 IE Options 控制面板小程序的 Rundll32.exe 并完成以下任务。**

* * *

*删除所有历史记录*-`RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 255`

*仅删除历史记录*-`RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 1`

*仅删除 Cookie* -`RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 2`

*仅删除临时 Internet 文件*-`RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 8`

*仅删除表单数据*-`RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 16`

*仅删除密码历史记录*-`RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 32`

# java - com.ibm.db2.jcc.am.io：DB2 SQL 错误：SQLCODE=-440，SQLSTATE=42884

> ID：12621970
> 
> 赞同：4
> 
> 时间：2012-09-27T12:58:35.657
> 
> 标签：java, properties, batch-file, db2

在这里我可能有一个简单的问题。我正在尝试连接到 DB2 数据库并通过 java 执行 SP。我能够连接到数据库，但是在执行 SP 时出现错误。请让我知道如何解决这个问题。顺便说一下，我将所有 JDBC url、模式、用户名和密码放在一个属性文件中并运行一个批处理文件

这是我运行批处理文件时的堆栈跟踪

```
URL :`jdbc:db2://ip:50001/RMSDB:currentSchema=etwrms;currentPackagePath=etwrms,sysibm,sysfun,sysproc;currentFunctionPath=sysibm,sysfun;

Santosh....after WF_NON_MSG_SEND

ERROR [main] WorkflowMailer (processcycle:344) - DB2 SQL Error: SQLCODE=-440, SQ
LSTATE=42884, SQLERRMC=WF_NON_MSG_SEND;PROCEDURE, DRIVER=3.57.82
com.ibm.db2.jcc.am.io: DB2 SQL Error: SQLCODE=-440, SQLSTATE=42884, SQLERRMC=WF_
NON_MSG_SEND;PROCEDURE, DRIVER=3.57.82
        at com.ibm.db2.jcc.am.bd.a(bd.java:676)
        at com.ibm.db2.jcc.am.bd.a(bd.java:60)
        at com.ibm.db2.jcc.am.bd.a(bd.java:127)
        at com.ibm.db2.jcc.am.km.c(km.java:2506)
        at com.ibm.db2.jcc.am.km.d(km.java:2483)
        at com.ibm.db2.jcc.am.km.a(km.java:1963)
        at com.ibm.db2.jcc.t4.db.g(db.java:139)
        at com.ibm.db2.jcc.t4.db.d(db.java:75)
        at com.ibm.db2.jcc.t4.t.d(t.java:63)
        at com.ibm.db2.jcc.t4.sb.k(sb.java:170)
        at com.ibm.db2.jcc.am.km.fb(km.java:1958)
        at com.ibm.db2.jcc.am.lm.kc(lm.java:2813)
        at com.ibm.db2.jcc.am.lm.b(lm.java:3515)
        at com.ibm.db2.jcc.am.mm.Yb(mm.java:113)
        at com.ibm.db2.jcc.am.mm.execute(mm.java:96)
        at com.ramco.rvw.workflow.mail.WorkflowMailer.processcycle(WorkflowMaile
r.java:338)
        at com.ramco.rvw.workflow.mail.WorkflowMailer.main(WorkflowMailer.java:6
5)
` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T13:39:11.253

下次遇到 DB2 错误时，可以访问这个方便的[错误消息网站](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.codes/src/tpc/n440.htm)查找原因。

## -440

NO AUTHORIZED routine-type BY THE NAME routine-name HAVING COMPATIBLE ARGUMENTS 在当前路径中找到

**解释**

尝试调用例程，但 DB2® 无法将例程的调用（包括参数列表）解析为特定的例程定义。

*常规型*

例程的类型，例如 FUNCTION 或 PROCEDURE。

*例程名称或模式名称。例程名称*

例程的名称。如果原始语句引用限定名称，则消息文本中的例程名称由模式名称限定。

**此错误的可能原因包括：**

*   例程名称指定不正确或在数据库中不存在。
*   使用了限定引用，并且错误地指定了模式限定符。
*   用户的 SQL 路径不包含所需函数所属的架构，并且使用了非限定引用。
*   包含错误数量的参数。
*   例程引用中包含正确数量的参数，但一个或多个参数的数据类型不正确。
*   例程的调用者无权执行例程。

**你的回应**

查看您的 SQL 语句并找出问题所在。

# android - Android 从 XML 问题中获取多行字符串

> ID：12621971
> 
> 赞同：0
> 
> 时间：2012-09-27T12:58:37.857
> 
> 标签：android, android-xml

我正在尝试打印从服务器获取的文本。转义所有特殊字符并安全打印的最佳方法是什么？因为从服务器获取的字符串是由用户输入的，所以将其存储在数据库中。所以有可能使用`<?php ?>`，`&`等可能导致错误。我已经尝试过`&lt; &gt;`解决了这个问题。但是当 setText() 将字符串转换为 EditText 后，字符串会被截断`&`

所以我需要一个最佳的解决方案，用户输入的文本将安全地保存在数据库中，并安全地检索带有特殊字符的多行字符串。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:55:46.320

无论如何，通过`URLDecode.decode()`在应用程序和`urldecode(),stripslashes()`服务器端使用解决了问题。

不知道这是否是完美的解决方案，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:09:53.187

我认为您应该使用**StringBuilder**而不是简单地从 XML 读取文本。

按着这些次序 ：

1) 对于 XML 中的每个新标签（在 startElement 中），创建一个字符串构建器

2) 在从 Character 方法中读取时，将文本附加到相同的 StringBuilder 中。

3) 最后，将该 StringBuider 分配给标签末尾的某个字符串（在 EndElement 中）。

希望这会给你一些解决问题的想法。

尝试 ...！！！

# php - 将JPG图像转换为tiff文件格式

> ID：12621973
> 
> 赞同：0
> 
> 时间：2012-09-27T12:58:45.377
> 
> 标签：php

我正在尝试将 jpeg 图像转换为 tiff 图像，但是使用 PHP 没有成功。请帮我解决这个问题。

主要是 imagemagick 和 exec() system() 及相关命令被我的服务提供者屏蔽了。

因此，请为我提供解决方案，该解决方案不使用 imagick 和命令工具进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:03:45.993

对于此操作，您需要在获得 Imagemagic 支持后在您的服务器上安装 Imagemagic（默认情况下安装在普通 Web 服务器上），然后执行以下操作：

```
$command = "convert /path_to_file/filename.jpg /path_to_file/filename.tiff";
exec($command); 
```

*   如果你没有 imagemagic 从这里安装它： [http ://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

# c# - 不同线程调用函数的问题

> ID：12621983
> 
> 赞同：1
> 
> 时间：2012-09-27T12:59:26.930
> 
> 标签：c#, multithreading, windows-phone-7, asynchronous, webclient

我有一个功能。我想通过不同的线程多次调用这个函数。我怎样才能做到这一点 ？。我的功能如下

```
public void DownloadImage(List<String> imageUrl)
    {
        imageCount = imageUrl.Count;

        foreach (string url in imageUrl)
        {
            StartDownload(url);
        }
    } 
```

我有 10 张图片要下载。我正在使用 webclient 下载图像。所以我想用 10 个线程调用这个函数。我怎样才能做到这一点 ？

我尝试了下面的代码。但它显示编译错误

```
ParameterizedThreadStart starter;

        for (int i = 0; i < 10; i++)
        {
            _imageDownloader = new ImageDownloader(); //this is class where I defined the function above ie DownloadImage
            _imageDownloader.OnCompleted+=new Completed(_imageDownloader_OnCompleted);
            starter = new ParameterizedThreadStart(_imageDownloader.DownloadImage); // in this line it showing a compile error "No overload for 'DownloadImage' matches delegate 'System.Threading.ParameterizedThreadStart'"
            Thread imageThread = new Thread(starter);
            imageThread.Start();
        } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:09:22.550

您可以使用任务并行库：

```
public void DownloadImage(List<String> imageUrl)
{
    Parallel.ForEach(imageUrl, url => StartDownload(url));
} 
```

# c# - 使用 SWIG 的 DCMTK 库的 C# 包装器

> ID：12621986
> 
> 赞同：3
> 
> 时间：2012-09-27T12:59:32.770
> 
> 标签：c#, c++, wrapper, swig, dicom

我想使用 SWIG 为[DCMTK](http://dicom.offis.de/dcmtk.php.en)库（用 C++ 编写）创建 C# 包装器。我有[DCMTK](http://dicom.offis.de/dcmtk.php.en)的完整源代码，但我有一个问题我无法解决......

我的 SWIG 脚本如下所示：

```
#ifndef WRAPPER_SWIG_I
# define WRAPPER_SWIG_I
%{ 
%}

%include "include/dcmtk/dcmjpeg/ddpiimpl.h"
%include "include/dcmtk/dcmjpeg/dipijpeg.h"
%include "include/dcmtk/dcmjpeg/djcodecd.h"
#endif 
```

然后我从命令行运行 SWIG：

```
swig -includeall -Wall -c++ -csharp -outdir $(SolutionDir)\dcmjpegcsharp\ -module dcmjpeg -namespace dcmjpeg dcmjpeg.i 
```

...并且它会引发许多错误，即无法找到头文件（包含在脚本中列出的这些文件中）。例如，头文件“include/dcmtk/dcmjpeg/ddpiimpl.h”包含了位于完全不同位置的文件“dcmtk/config/osconfig.h”。

问题是[DCMTK](http://dicom.offis.de/dcmtk.php.en)库源代码中的 C++ 头文件分散在多个文件夹中，并且它们“看不到彼此”。有一个简单的解决方案吗？也许强制 SWIG 在 DCMTK 源的某个根目录中自动递归搜索头文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:56:12.427

此外，请查看[FO-DICOM](https://github.com/rcd/fo-dicom)（以前称为 mDCM）和 ClearCanvas API（基于 mDCM 构建）。我发现它们比为 C# 包装的 DCMTk 更容易使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:02:44.587

我知道您专门询问了 DCMTK，因此选择该选项可能有很好的理由，但是此信息可能对您或其他人有用：

另一个主要的 Dicom takeit ( [GDCM](http://gdcm.sourceforge.net) ) 已经有一个使用 SWIG 创建的 C# 包装器。GDCM 是一个成熟的 Dicom 库，用于 Dicom IO 的大型产品，例如[ITK](http://itk.org/) ..

# winforms - 尽管在 Visual Studio 2010 中更改了按钮的背景颜色，但仍保持悬停颜色

> ID：12621988
> 
> 赞同：1
> 
> 时间：2012-09-27T12:59:39.447
> 
> 标签：winforms, visual-studio-2010

我想更改 Visual Studio 2010 中按钮的颜色。但我喜欢带有蓝色悬停颜色和深度印象的默认样式。

当我写`Button.BackColor = Color.LightCoral`的时候，悬停颜色和深度印象消失了。我怎样才能解决这个问题？

我在 Windows 7、Visual Studio 2010 上，使用 WinForms，而不是 WPF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:23:57.840

我选择的解决方案是保持按下按钮的视觉风格。

这样做的聪明方法实际上不是使用按钮，而是使用按钮外观的复选框，就像解释[这里](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/b267fcd6-1e13-4828-9c6c-0e03d9a4d5ab)一样。

# c++ - 在 .NET Web 应用程序中重用 C++/CLI 用户控件

> ID：12621991
> 
> 赞同：3
> 
> 时间：2012-09-27T12:59:45.903
> 
> 标签：c++, web-applications, .net-4.0, c++-cli, direct3d9

我有一个非常复杂的类，它扩展了`System.Windows.Forms.UserControl`. 它是用带有开关的 C++/CLI 编写的`/clr`，因为它使用本机 C++ dll。该类的主要职责是充当非托管 Direct3D9 dll 的包装器，该 dll 在纹理、缩放、平移等上呈现图像。

有没有办法在 .NET Web 应用程序中重用这个类？换句话说，我想让我的用户控件在浏览器中运行。这里的主要不确定因素是对本机 dll 的访问以及 Direct3D 的使用。我正在设置一个小测试，看看我是否可以让它工作，但我想要其他人的一些输入。

**更新**：我遵循[了本指南](http://www.4guysfromrolla.com/articles/052604-1.aspx)。在第一次尝试时，我收到一条错误消息，说它无法加载控件的 dll 或其依赖项之一。所以，只是为了测试，我将它使用的所有非托管 dll 复制到 system32。现在我可以毫无错误地加载页面，但我仍然看不到控件。`About`我在默认 C# Web App 项目的页面中放置了对它的引用，如下所示：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        About
    </h2>
    <p>
        Put content here.
    </p>
    <object id="MyWinControl1" height="200" width="200" classid="http:MNeoConsole.dll#MNeoConsole.MNeoConsoleControl">
        <param name="Title" value="Locura loca" />
        <param name="Visible" value="true" />
    </object>
</asp:Content> 
```

我现在将尝试 ActiveX 方法，但即使可行，我想这也会迫使我的客户使用 Internet Explorer，或安装一些插件，不是吗？那真的很麻烦。

**编辑**：到目前为止，我愿意尝试其他方法。例如，由于我的 C++/CLI 类只是一个包装器，我愿意用其他语言编写另一个包装器。如果我这样做，该语言应该尽可能与 Web 应用程序友好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T15:28:35.940

`runat="server"`不会让您的控件在浏览器中运行。我认为您对 ASP.NET 的工作原理存在根本性的误解。Web 控件不在浏览器内运行。它们在服务器上运行并生成发送到浏览器的 HTML 代码，并且可能包含各种 HTML 控件和 Javascript 片段。

除 HTML5 (Javascript) 之外的任何客户端代码机制都需要客户端支持，即您试图避免使用的插件。在可能的插件中，最接近 WinForms 和最便携的插件将是 Silverlight。对于用户界面组件，它使用 WPF，而不是 WinForms。WinForms 控件有一个 WPF 主机，但我不知道您是否可以在 Silverlight 中使用它。

此外，您需要一组特殊的编译选项才能将 C++/CLI 与 Silverlight 一起使用。默认情况下，C++/CLI 会生成在浏览器沙箱之外运行的特定于机器的本机代码。这将被任何具有合理安全配置的用户阻止。您将需要发出纯 MSIL 代码并启用“部分信任”。然后，您将在包装的本机组件上遇到麻烦。

在网络浏览器中执行此操作几乎没有任何优势。只需让用户下载一个 WinForms 应用程序。您可以使用 ClickOnce 或其他打包技术将应用程序更新到您站点上的最新版本，但是 ASP.NET 和任何浏览器技术都不能很好地与您的控件配合使用。您的另一个选择是重写，而不是包装器，而是整个 OpenGL 渲染层，以使用 WebGL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T13:14:08.327

我不能说这是否适用于您的特定场景，但您可以尝试将其加载为 ActiveX。看到这个：

[http://www.codeproject.com/Articles/4953/Simple-way-to-expose-a-NET-WinForm-control-as-an-A](http://www.codeproject.com/Articles/4953/Simple-way-to-expose-a-NET-WinForm-control-as-an-A)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T15:39:38.040

想一想，您想从运行在网页，并且您想使用适用于任何浏览器（或至少大多数浏览器？）的标准方法。在我看来，没有这样的东西可用，你应该回退到 OCX，正如你所说，只有 MSIE 和某些版本的 Geko（FireFox）通过 window.GeckoActiveXObject 支持，或者使用更便携的插件，如 Flash 或 Silverlight 可以在任何（或至少大多数平台）并将您的本机函数调用替换为那些插件中可用的函数调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T13:21:35.557

C++/CLI 是一种 .NET 语言，为什么不呢？如果您的意思是要从 C# Web 应用程序项目中使用它，那也很简单，只需将 C++/CLI 项目编译为类库项目（DLL）并从 C# 项目中添加对它的引用。