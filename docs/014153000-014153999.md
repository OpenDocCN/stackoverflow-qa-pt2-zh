# StackOverflow 问答 14153000-14153999

# magento - 以编程方式添加属性

> ID：14153000
> 
> 赞同：2
> 
> 时间：2013-01-04T07:32:30.173
> 
> 标签：magento

我正在尝试从设置脚本中添加属性。即使添加了属性，但某些选项的值与设置脚本中指定的值不同

```
/* @var $installer Mage_Eav_Model_Entity_Setup */
$installer = $this;

$installer->startSetup();

$entityTypeId = 'catalog_product';
$attributeCode ='dz_video';

$data = array(
    'type'=>'textarea',
    'input'=>'text',
    'label'=>'Video',
    'is_required' =>'0',
    'is_unique' =>'0',
    'is_global' =>Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    'is_comparable'=>'0',
    'is_wysiwyg_enabled'=>'0',
    'is_searchable'=>'0',
    'is_used_for_price_rules'=>'0',
    'is_html_allowed_on_front'=>'1',
    'is_visible_on_front'=>'1',
    'used_in_product_listing'=>'0',
    'used_for_sort_by'=>'0',
    'user_defined'=>'1',
    'is_configurable'=>'1'
);

$installer->addAttribute($entityTypeId,$attributeCode,$data); 
```

例如，“is_required”的指定值为 0，但在管理员“必需”选项中设置为是

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:36:37.033

这在 EAV 设置类中有点奇怪。当您使用 addAttribute 时，您的数据数组将被重新映射。updateAttribute 中不是这种情况。检查类 Mage_Eav_Model_Entity_Setup 及其 _prepareValues() 方法。例如，您的 is_required 需要简单地“必需”才能按预期工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:00:09.127

mpaepper 的回答是正确的。此外，在某些情况下，该值需要为真或假，而不是 1 或 0。例如：

```
'required' => false, 
```

# android - 如何进行本地化？

> ID：14153001
> 
> 赞同：-1
> 
> 时间：2013-01-04T07:32:35.290
> 
> 标签：android, localization

我对本地化这个词真的很陌生，你们中的任何人都可以解释一下吗，我一直在寻找好的参考资料。你们中的任何人都可以为我提供一些很好的参考吗，或者你们中的任何人都可以解释一下这个问题，以便给我更多的见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:55:02.903

基本上你只需要为`strings.xml`你想要支持的每种语言创建一个单独的文件。

您的备用语言在目录中`res/values`。你的德语翻译会是 in `res/values-de`，西班牙语是 in`res/values-es`等等。

另请阅读有关此的[官方文档](http://developer.android.com/guide/topics/resources/localization.html)。

# java - Mockito 非存根函数

> ID：14153004
> 
> 赞同：1
> 
> 时间：2013-01-04T07:32:54.687
> 
> 标签：java, android, mocking, mockito

我刚开始使用 Mockito，所以不太熟悉它。我嘲笑过这样的对象：

```
CInjectorFactory mockFactory = mock(CInjectorFactory.class); 
```

现在，如果我不存根某个特定函数，它就不会调用原始 CInjectorFactory 的函数，我会得到一个“空”值：

```
public CMainActivityHelper getMainActivityHelper() 
```

这是否意味着只有存根函数可用于模拟对象？这个模拟对象不继承被模拟对象的原始函数？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:26:05.227

您可以使用 ：

```
CInjectorFactory mockFactory = mock(CInjectorFactory.class, Mockito.CALLS_REAL_METHODS); 
```

然后，未存根的方法将委托给真正的实现。

`Mockito.CALLS_REAL_METHODS`来自javadoc的示例：

```
Foo mock = mock(Foo.class, CALLS_REAL_METHODS);

 // this calls the real implementation of Foo.getSomething()
 value = mock.getSomething();

 when(mock.getSomething()).thenReturn(fakeValue);

 // now fakeValue is returned
 value = mock.getSomething(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T07:39:39.727

是的，这是[记录在案的行为](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#2)：

> 默认情况下，对于所有返回值的方法，mock 返回 null、空集合或适当的原始/原始包装器值（例如：0、false、...对于 int/Integer、boolean/Boolean、...）。

如果您希望在不被存根时调用真正的方法，您应该[监视真正的对象](http://docs.mockito.googlecode.com/hg/org/mockito/Mockito.html#13)：

> 您可以创建真实对象的间谍。当您使用 spy 时，会调用真正的方法（除非方法被存根）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T07:40:07.597

mockito[网站](http://code.google.com/p/mockito/)的首页清楚地显示了如何存根方法调用：

```
CMainActivityHelper expected = ...;
when(mockFactory.getMainActivityHelper()).thenReturn( expected ); 
```

然后当你调用`mockFactory.getMainActivityHelper()`它会返回`expected`。

# ruby-on-rails - rvm 安装 - /usr/local/rvm : 权限被拒绝（在此之前，我在 Ubuntu 中错误地删除了主目录）

> ID：14153005
> 
> 赞同：3
> 
> 时间：2013-01-04T07:32:55.663
> 
> 标签：ruby-on-rails, ruby, rvm

> **可能重复：**
> [如何修复使用 SUDO 完成的 RVM 安装](https://stackoverflow.com/questions/7999439/how-do-i-fix-a-rvm-install-that-was-done-using-sudo)

我在我的服务器 'myuser' 上创建了一个用户。登录并运行此 cmd ：

```
curl -L get.rvm.io | bash -s -- --auto-dotfiles 
```

一切都很好并且安装正确。

误会了，我使用另一个用户登录删除了主目录，即 /home/myuser（安装了 rvm）（由其他用户“anthuser”登录）。

然后丢失了 rvm，因此尝试运行相同的 install cmd，但现在出现此错误：

```
 curl -L get.rvm.io | bash -s -- --auto-dotfiles
   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
  100   185  100   185    0     0    349      0 --:--:-- --:--:-- --:--:--  1094
  100 10956  100 10956    0     0  10248      0  0:00:01  0:00:01 --:--:-- 10248
 Turning on auto dotfiles mode.
  mkdir: cannot create directory `/usr/local/rvm': Permission denied 
```

所以，我删除了用户，再次创建了同一个用户并再次运行了这个命令，但又出现了同样的错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T20:13:31.727

您需要清理旧安装：

```
sudo rm -rf /etc/rvmrc /etc/profile.d/rvm.sh /usr/local/rvm 
```

并重新启动以清理所有加载的 shell 环境 - 这是必需的步骤

# php - Jquery我想要每次点击一次又一次的相同效果

> ID：14153014
> 
> 赞同：1
> 
> 时间：2013-01-04T07:33:56.947
> 
> 标签：php, jquery, codeigniter

我在下面附加了我的 jquery 代码。当我单击 + 链接时，一个文本框应该向下滑动，工作正常。但我希望每次单击 + 时都具有相同的效果。希望任何人都可以帮助我 `Jquery`

 ````
$(".more_button").click(function(){
    $("#topping_more").slideDown();
    });
**Html Code**

<div class="display_none" id="topping_more">
  <p>
      <label></label>
       <input type="text" name="topping"  maxlength="50" class="validate[required]" value="<?php //echo set_value('topping',$this->form_data->topping);?>"/>
      <span><strong>price</strong></span>
       <input style="width:80px;" type="text" name="price"  maxlength="50" class="validate[required]" value="<?php //echo set_value('menu_item',$this->form_data->menu_item);?>"/>
  </p>
</div>
 <p>
     <a style="margin-left:650px;"  id="add_more" class="more_button fl"> + </a>
 </p> 
```` 

`我想要同样的这种效果[http://jsfiddle.net/7yU3n/](http://jsfiddle.net/7yU3n/) ...但是当我再次点击添加相同的**添加**应该在前面的**添加下**`

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:40:45.257

我不知道你到底想要什么，但这段代码是如果你想在每次点击时上下滑动

```
$(".more_button").click(function(){

    if($("#topping_more").css('display')=='hide'){    
          $("#topping_more").slideDown();
    }else{
          $("#topping_more").slideUp();
}

    }); 
```

此代码用于每次向下滑动....

```
$(".more_button").click(function(){
$("#topping_more").slideUp();
$("#topping_more").slideDown();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:57:56.750

用于`clone()`克隆输入并将`appendTo`其添加到块中

**HTML**

```
 <div id="displayblock"> //add this block in your html
    <div class="display_none" id="topping_more">
    ....
    </div>
 </div> 
```

**查询**

```
$(".more_button").click(function(){
   $("#topping_more").clone().appendTo('#displayblock').slideDown();
});​ 
```

这是[小提琴](http://jsfiddle.net/7yU3n/10/)

* * *

**更新**

**查询**

```
 var clickedcount = 1; 
 $(".more_button").click(function(){            
   $("#topping_more").clone().attr('id','topping_more'+clickedcount).appendTo('#displayblock');

   var newSpan = $('<span>',{
                 class:"close",
                 text:"close"

             });
   newSpan.appendTo($('#topping_more'+clickedcount).find('p'));
   $('#topping_more'+clickedcount).slideDown();
   clickedcount++;
 });

 $('#displayblock').on('click','.close',function(){
    $(this).parent().slideUp('slow',function(){
        $(this).parent().remove();
  });
}); 
```

新[小提琴](http://jsfiddle.net/7yU3n/14/)在这里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T07:59:21.290

您还可以克隆 p 标签并将其附加到 div ，如下所示。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $(".more_button").click(function(e)
        {
            e.preventDefault();
            $("#topping_more").slideDown();
            var clone = $("#topping_more p:first").clone();
            $("#topping_more").append(clone);

            //also do below
            var clone = $("#topping_more p:first").clone();
            clone.appendTo("#topping_more").slideDown('slow');
            //also above will work
        });
    });
</script>

<div class="display_none" id="topping_more" style="display:none;">
  <p>
      <label></label>
       <input type="text" name="topping"  maxlength="50" class="validate[required]" value="<?php //echo set_value('topping',$this->form_data->topping);?>"/>
      <span><strong>price</strong></span>
       <input style="width:80px;" type="text" name="price"  maxlength="50" class="validate[required]" value="<?php //echo set_value('menu_item',$this->form_data->menu_item);?>"/>
  </p>
</div>
<p>
    <a style="margin-left:650px;"  id="add_more" class="more_button fl" href="#"> ADD </a>
</p> 
```

作为对您的评论的回应，您还可以给 p 标签样式 display none 和 appendTo div 并将其向下滑动，然后第一次单击时您将看不到两个 p。`

# javascript - js 插件可以这样写吗？获取元素

> ID：14153017
> 
> 赞同：-1
> 
> 时间：2013-01-04T07:34:11.470
> 
> 标签：javascript, jquery, jquery-plugins, plugins, element

我不知道这种方式是否可行，请指教。

我正在尝试使插件可以以这种方式调用，`$(el).plugin.a()`而不是`$(el).plugin()`或者`$(el).plugin().a()`

我不知道该怎么做，或者是否可能。非常感谢您的建议。

下面的代码我可以阅读在函数中给出参数，但不能阅读元素。请帮助和建议一种获取元素的方法。

```
$.fn.plugin = {
  a : function(aa){
    alert(aa);
    //HOW READ ELMENT HERE??  <- $(el)
    //the 'this' here mean the object variable plugin himself 
  },
}

$(el).plugin.a('xx'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:45:35.917

不，但您可以使用简单的替代语法；

```
$.fn.plugin = function() {

      var methods = {
           a : function() {
               .. do something ..
               Note: 'this' is a jQuery object, when executed.
           },
           b : function() {
               .. do something ..
               Note: 'this' is a jQuery object, when executed.
           }
      };

      $.extend(this, methods);

      return this;
}; 
```

另请参阅此 jsfiddle：http: [//jsfiddle.net/x8zwC/2/](http://jsfiddle.net/x8zwC/2/)

# c# - System.ArgumentException：未定义“http://somenamespace.com/2012/10/”命名空间

> ID：14153020
> 
> 赞同：0
> 
> 时间：2013-01-04T07:34:25.010
> 
> 标签：c#, wcf, web-services, soap

我为以下所有内容设置了一致的命名空间 (http://somenamespace.com/2012/10/)：

1.  服务契约命名空间
2.  服务命名空间
3.  数据契约命名空间
4.  绑定命名空间

但是，我在服务日志 (.svclog) 文件中收到此错误。有人可以启发我吗？我已经咨询了几个网站，但无济于事。

这是一个很好的参考：[http ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/ee11d86f-f25c-4284-8f51-b1f035346cb3/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/ee11d86f-f25c-4284-8f51-b1f035346cb3/)

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131074</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2013-01-04T06:57:48.7620812Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{eadc96c2-323f-41df-bc3d-df56367dda52}" />
<Execution ProcessName="w3wp" ProcessID="2088" ThreadID="54" />
<Channel />
<Computer>SOMECOMPUTER007</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.EventLog.aspx</TraceIdentifier>
<Description>Wrote to the EventLog.</Description>
<AppDomain>/LM/W3SVC/1/ROOT/SomeApplication-1-130017541311895789</AppDomain>
<ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/DictionaryTraceRecord">
<CategoryID.Name>EventLogCategory</CategoryID.Name>
<CategoryID.Value>7</CategoryID.Value>
<InstanceID.Name>EventId</InstanceID.Name>
<InstanceID.Value>3221356549</InstanceID.Value>
<Value0>System.ArgumentException: The 'http://somenamespace.com/2012/10/' namespace is not defined.
   at System.Xml.XmlWriter.WriteQualifiedName(String localName, String ns)
   at System.Runtime.Serialization.XmlWriterDelegator.WriteAttributeQualifiedName(String attrPrefix, XmlDictionaryString attrName, XmlDictionaryString attrNs, XmlDictionaryString name, XmlDictionaryString ns)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteTypeInfo(XmlWriterDelegator writer, XmlDictionaryString dataContractName, XmlDictionaryString dataContractNamespace)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.WriteTypeInfo(XmlWriterDelegator writer, DataContract contract, DataContract declaredContract)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteArrayOfPaymentTypeBaseToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )
   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteMerchantCountryToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )
   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerializeReference(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteArrayOfMerchantCountryToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , CollectionDataContract )
   at System.Runtime.Serialization.CollectionDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeAndVerifyType(DataContract dataContract, XmlWriterDelegator xmlWriter, Object obj, Boolean verifyKnownType, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.SerializeWithXsiType(XmlWriterDelegator xmlWriter, Object obj, RuntimeTypeHandle objectTypeHandle, Type objectType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, Type declaredType)
   at System.Runtime.Serialization.XmlObjectSerializerWriteContext.InternalSerialize(XmlWriterDelegator xmlWriter, Object obj, Boolean isDeclaredType, Boolean writeXsiType, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle)
   at WriteMerchantExtendedToXml(XmlWriterDelegator , Object , XmlObjectSerializerWriteContext , ClassDataContract )
   at System.Runtime.Serialization.ClassDataContract.WriteXmlValue(XmlWriterDelegator xmlWriter, Object obj, XmlObjectSerializerWriteContext context)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObjectContent(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.DataContractSerializer.InternalWriteObject(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObjectHandleExceptions(XmlWriterDelegator writer, Object graph, DataContractResolver dataContractResolver)
   at System.Runtime.Serialization.XmlObjectSerializer.WriteObject(XmlDictionaryWriter writer, Object graph)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameterPart(XmlDictionaryWriter writer, PartInfo part, Object graph)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeParameter(XmlDictionaryWriter writer, PartInfo part, Object graph)
   at System.ServiceModel.Dispatcher.DataContractSerializerOperationFormatter.SerializeBody(XmlDictionaryWriter writer, MessageVersion version, String action, MessageDescription messageDescription, Object returnValue, Object[] parameters, Boolean isRequest)
   at System.ServiceModel.Dispatcher.OperationFormatter.OperationFormatterMessage.OperationFormatterBodyWriter.OnWriteBodyContents(XmlDictionaryWriter writer)
   at System.ServiceModel.Channels.Message.ToString(XmlDictionaryWriter writer)
   at System.ServiceModel.Diagnostics.MessageLogTraceRecord.WriteTo(XmlWriter writer)
   at System.ServiceModel.Diagnostics.MessageLogger.LogInternal(MessageLogTraceRecord record)
   at System.ServiceModel.Diagnostics.MessageLogger.LogMessageImpl(Message&amp; message, XmlReader reader, MessageLoggingSource source)
   at System.ServiceModel.Diagnostics.MessageLogger.LogMessage(Message&amp; message, XmlReader reader, MessageLoggingSource source)</Value0>
</ExtendedData>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T15:32:01.567

从堆栈跟踪来看，我怀疑您的合同中某处有一个派生类，特别是在 PaymentType、PaymentTypeBase 周围。

[尝试使用KnownType](http://msdn.microsoft.com/en-us/library/ms730167.aspx)属性装饰您的顶级 DataContract 。这可以帮助反序列化器了解反序列化响应的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:57:38.730

您可能刚刚打开了“处理 OO 主体”但“使用服务”的蠕虫罐头。

在某个地方，您必须“付钱给提琴手”关于您将实际使用的抽象类的哪个具体，也就是通过服务线传递。

这是一种方法：（这种方法使用反射来找出具体情况）

[http://ashgeek.blogspot.com/2011/02/wcf-serialization-dynamically-add.html](http://ashgeek.blogspot.com/2011/02/wcf-serialization-dynamically-add.html)

这是另一个：（这个使用一个小文本文件来列出具体内容）

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6b70e9f4-52bc-4fa9-a0ff-c0859e041e85/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6b70e9f4-52bc-4fa9-a0ff-c0859e041e85/)

最后：服务喜欢具体，它们不喜欢抽象类或接口。

糟糕的是，多年来我们一直被告知要对接口（或抽象类）进行编程，而不是对具体的实现进行编程。

# mysql - MySQL查询父子关系

> ID：14153024
> 
> 赞同：1
> 
> 时间：2013-01-04T07:34:34.257
> 
> 标签：mysql

我想编写一个选择查询来获取从子到父的完整路径：

```
| Unique Id | Child Code | Parent Code |
|     X     |     9      |     7       |
|     Y     |     7      |     6       |
|     Z     |     6      |     5       |
|     A     |     5      |    NULL     |
|     B     |     11     |     33      |
|     C     |     33     |     22      |
|     D     |     22     |    NULL     | 
```

如果选择的代码为​​ 9，则查询应返回其所有父级作为结果，它们是：9-7-6-5....

如果选择的代码是 11，那么查询应该返回：11-33-22....

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:44:12.303

试试这个查询

```
SELECT *
FROM (
    SELECT
        @r AS _id,
        (SELECT @r := parent_code FROM mytable WHERE unique_id = _id) AS parent_id,
        @l := @l + 1 AS lvl
    FROM
        (SELECT @r := 9, @l := 0) vars,
        mytable m
    WHERE @r <> 0) T1
JOIN mytable T2
ON T1._id = T2.id
ORDER BY T1.lvl DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T07:17:35.587

与`NULL`父值：

```
SELECT *
FROM <table_name>
ORDER BY COALESCE(<parent_id>,<id>), <id>), category_parent_id IS NOT NULL 
```

与`ZERO`父值：

```
SELECT *
FROM <table_name>
ORDER BY COALESCE((SELECT NULLIF(<parent_id>,0)), <id>), NULLIF(<parent_id>,0) IS NOT NULL 
```

# c# - 为什么 Xml 文档的 selectSingleNode 具有空值？

> ID：14153028
> 
> 赞同：2
> 
> 时间：2013-01-04T07:34:48.090
> 
> 标签：c#, asp.net, .net, xml

这是我的 XML 文件：

```
<Response>
<Ip>120.63.40.84</Ip>
<CountryCode>IN</CountryCode>
<CountryName>India</CountryName>
<RegionCode>07</RegionCode>
<RegionName>Delhi</RegionName>
<City>New Delhi</City>
<ZipCode/>
<Latitude>28.6</Latitude>
<Longitude>77.2</Longitude>
<MetroCode/>
</Response> 
```

这就是我将它加载到 C# 中的 XML 文档对象的方式：

```
 XmlDocument doc = new XmlDocument();
  doc.Load("http://freegeoip.net/xml/");//the url 
```

但是当我尝试像这样读取单个节点时：

```
XmlNode IPnode = doc.DocumentElement.SelectSingleNode("Response/Ip"); 
```

它给了我一个空节点。我已经调试了代码并确认 XML 确实加载到了 XMLDocument 对象中，但由于某种原因，我无法像这样访问单个节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:38:36.037

只需更改您的 XPath 以表明您正在尝试从根目录搜索。

```
 XmlNode IPnode = doc.DocumentElement.SelectSingleNode("/Response/Ip"); 
```

由于您无论如何都是从文档元素中搜索的，因此您也可以使用下面的代码。

```
 XmlNode IPnode = doc.DocumentElement.SelectSingleNode("Ip"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-20T06:55:58.750

一个比@ryadavilli 更简单、或许更快的实现（避开XPath 表达式解析）是：

```
XmlNode IPnode = doc.DocumentElement["Ip"]; 
```

...它应该找到文档元素的第一个子元素，其标签名称为`"Ip"`.

# php - 仅输出背景颜色，仅图像或两者一起输出

> ID：14153030
> 
> 赞同：1
> 
> 时间：2013-01-04T07:34:59.690
> 
> 标签：php

在我的模板上，我有一个字段，用户可以在其中选择和选择他们网站的背景。

![在此处输入图像描述](../Images/851264d5c32be5933da6eb28ecb12d09.png)

这是从`background-one`数组中的 ID 调用的。

我的问题是，如果只为用户提供以下选项，我如何能够正确地将其输出到我的 CSS 的 head 部分：

1) 仅选择背景颜色

> 背景：#990000；

2) 仅选择背景图像

> 背景：url(../images/example.jpg) 不重复左上滚动；

3）或背景颜色和图像的选择

> 背景：#990000 url(../images/example.jpg) 不重复左上滚动；

* * *

这是我当前将脚本输出到 css head 部分的代码片段：

```
<?php $background = of_get_option('background-one'); {  
    if ($background['color'] || $background['image']) {
        echo 'body {
        background: ' . $background['color'] . ' url(' . $background['image']. ') ' .$background['repeat']. ' ' .$background['position']. ' ' .$background['attachment']. ';';
    }

    else if ($background['color']) {  
        echo 'body {
        background: ' . $background['color']. ';';
    }

    else if ($background['image']) {
        echo 'body {
        background: ' . 'url(' . $background['image']. ') ' .$background['repeat']. ' ' .$background['position']. ' ' .$background['attachment']. ';';
    };
}
?> 
```

但这样一来，结果是：

1) 仅选择背景颜色

> 背景：#990000 url() 不重复左上滚动；

2) 仅选择背景图像

> 背景：`url(../images/example.jpg) 不重复左上滚动；`

 `3）或背景颜色和图像的选择

> 背景：#990000 url(../images/example.jpg) 不重复左上滚动；

由于我对编写 PHP 还很陌生，我将如何重新编写上面的代码片段以获得我想要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:39:15.977

更改以下内容：

```
if ($background['color'] || $background['image']) { 
```

对此：

```
if ($background['color'] && $background['image']) { 
```

你的代码片段不能像你想要的那样工作的原因是因为“||” 等于“OR”，这意味着如果设置了“$background['color']”或“$background['image']”，则将应用 if 语句。

改用“&&”，在英文中的意思是“AND”，如果同时设置了“color”和“image”，if 语句将只适用。`

# asp.net - 从一个数据库填充多个gridview

> ID：14153032
> 
> 赞同：0
> 
> 时间：2013-01-04T07:35:10.890
> 
> 标签：asp.net, gridview

我有一个包含注册员工信息的表，因此该表中的行数不断变化。在我的 Web 应用程序中，我想在单页上显示员工信息。我想在三个不同的网格视图中显示员工信息（水平 - 每个网格视图将包含表中总行数的 1/3）。我怎样才能做到这一点？

# asp.net - 如何解决此“远程服务器返回错误：Silverlight + WCF 中的 NotFound”

> ID：14153035
> 
> 赞同：0
> 
> 时间：2013-01-04T07:35:15.823
> 
> 标签：asp.net, wcf, silverlight, webcam

嗨，我是新的 Silver light，我正在做一个应用程序，我想使用 silver light 插件将图像存储在服务器端

我正在使用`WCF`将图像发送到服务器端的服务

```
 public string EndSaveImageOnServer(System.IAsyncResult result) {
            object[] _args = new object[0];
            string _result = ((string)(base.EndInvoke("SaveImageOnServer", _args,     result)));//here i got error
            return _result;
        } 
```

# java - 如何使用 Spring RestTemplate 发送数组？

> ID：14153036
> 
> 赞同：3
> 
> 时间：2013-01-04T07:35:18.513
> 
> 标签：java, spring, rest

如何使用 Spring RestTemplate 发送数组参数？

这是服务器端的实现：

```
@RequestMapping(value = "/train", method = RequestMethod.GET)
@ResponseBody
public TrainResponse train(Locale locale, Model model, HttpServletRequest request, 
    @RequestParam String category,
    @RequestParam(required = false, value = "positiveDocId[]") String[] positiveDocId,
    @RequestParam(required = false, value = "negativeDocId[]") String[] negativeDocId) 
{
    ...
} 
```

这是我尝试过的：

```
Map<String, Object> map = new HashMap<String, Object>();
map.put("category", parameters.getName());
map.put("positiveDocId[]", positiveDocs); // positiveDocs is String array
map.put("negativeDocId[]", negativeDocs); // negativeDocs is String array
TrainResponse response = restTemplate.getForObject("http://localhost:8080/admin/train?category={category}&positiveDocId[]={positiveDocId[]}&negativeDocId[]={negativeDocId[]}", TrainResponse.class, map); 
```

以下是明显不正确的实际请求 URL：

```
http://localhost:8080/admin/train?category=spam&positiveDocId%5B%5D=%5BLjava.lang.String;@4df2868&negativeDocId%5B%5D=%5BLjava.lang.String;@56d5c657` 
```

一直在尝试四处搜索，但找不到解决方案。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-06T06:53:38.390

Spring 的 UriComponentsBuilder 可以做到这一点，并且还允许变量扩展。假设您要将字符串数组作为参数“attr”传递给您只有一个带有路径变量的 URI 的资源：

```
UriComponents comp = UriComponentsBuilder.fromHttpUrl(
    "http:/www.example.com/widgets/{widgetId}").queryParam("attr", "width", 
        "height").build();
UriComponents expanded = comp.expand(12);
assertEquals("http:/www.example.com/widgets/12?attr=width&attr=height", 
   expanded.toString()); 
```

否则，如果您需要定义一个应该在运行时扩展的 URI，并且您事先不知道数组的大小，请使用[https://www.rfc-editor.org/rfc/rfc6570](https://www.rfc-editor.org/rfc/rfc6570) UriTemplate with {?key*} 占位符并使用来自[https://github.com/damnhandy/Handy-URI-Templates](https://github.com/damnhandy/Handy-URI-Templates)的 UriTemplate 类对其进行扩展 。

```
UriTemplate template = UriTemplate.fromTemplate(
    "http://example.com/widgets/{widgetId}{?attr*}");
template.set("attr", Arrays.asList(1, 2, 3));
String expanded = template.expand();
assertEquals("http://example.com/widgets/?attr=1&attr=2&attr=3", 
    expanded); 
```

对于 Java 以外的语言，请参阅[https://code.google.com/p/uri-templates/wiki/Implementations](https://code.google.com/p/uri-templates/wiki/Implementations)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:38:00.337

我最终通过遍历集合来构建 URL。

```
Map<String, Object> map = new HashMap<String, Object>();
map.put("category", parameters.getName());

String url = "http://localhost:8080/admin/train?category={category}";
if (positiveDocs != null && positiveDocs.size() > 0) {
    for (String id : positiveDocs) {
        url += "&positiveDocId[]=" + id;
    }
}
if (negativeDocId != null && negativeDocId.size() > 0) {
    for (String id : negativeDocId) {
        url += "&negativeDocId[]=" + id;
    }
}

TrainResponse response = restTemplate.getForObject(url, TrainResponse.class, map); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:14:26.120

试试这个

更改您的请求映射

```
@RequestMapping(value = "/train", method = RequestMethod.GET) 
```

到

```
 @RequestMapping(value = "/train/{category}/{positiveDocId[]}/{negativeDocId[]}", method = RequestMethod.GET) 
```

和你在 restTemplate 中的 URL

以以下给定格式更改 URl

```
http://localhost:8080/admin/train/category/1,2,3,4,5/6,7,8,9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-22T13:23:13.267

这是我实现它的方法：

REST 控制器：

```
@ResponseBody
@RequestMapping(value = "/test", method = RequestMethod.GET)
public ResponseEntity<Response> getPublicationSkus(
       @RequestParam(value = "skus[]", required = true) List<String> skus) {
    ...
} 
```

请求：

```
List<String> skus = Arrays.asList("123","456","789");

Map<String, String> params = new HashMap<>();
params.put("skus", toPlainString(skus));

Response response = restTemplate.getForObject("http://localhost:8080/test?skus[]={skus}", 
                                      Response.class, params); 
```

然后你只需要实现一个方法，将 the`List`或 the转换`String[]`为用逗号分隔的普通字符串，例如 in`Java 8`将是这样的：

```
private static String toPlainString(List<String> skus) {
    return skus.stream().collect(Collectors.joining(","));
} 
```

# c# - 如何允许在 ListView/GridView 项控件中进行操作，同时允许在 ListView/GridView 上进行滚动和交叉滑动操作？

> ID：14153038
> 
> 赞同：2
> 
> 时间：2013-01-04T07:35:31.693
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps

具体来说，我有一个自定义用户控件，它接收操作事件以滚动自定义 DirectX 控件。此控件和其他类似控件是 GridView 中的项。我希望 GridView 能够通过默认的 TranslateRailsX 操作水平滚动，而控件应该能够接收 TranslateRailsY 操作事件。

到目前为止，在我的实验中，通过将控件的操作模式设置为 System，我可以让 GridView 滚动工作，但控件不会接收任何操作事件。通过将控件的操作模式设置为 All、TranslateY 或 TranslateRailsY，我可以让我的自定义控件接收操作事件，但 GridView 触摸滚动将不起作用。

我怎样才能允许这两种操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:10:32.503

它不能用 8.0 完成（对于 8.1 滚动到 EDIT）。您将需要实现自己的 ScrollViewer 以在 GridView 模板中使用，或者在 GridView 上放置一个图层并按照我[之前的建议](https://stackoverflow.com/questions/12636216/scrollviewer-and-handling-manipulation-events-on-child-elements)中继所有输入调用。实际上，也许实现您自己的 ScrollViewer 版本并不难（一个带有一个子项的 Canvas 控件，它在操作事件的子项上调用 Canvas.SetLeft）。

我有一个可能对您有用的新想法是在您的 DirectX 控件前面放置另一个 ScrollViewer 并使用它的 ViewChanged 事件，就像您使用操作事件一样 - 检查这个：

**XAML**

```
<Page
    x:Class="App84.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App84"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <Grid
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <GridView>
            <Grid
                Width="300"
                Height="300">
                <Rectangle
                    x:Name="DirectXControlPlaceholder"
                    Width="300"
                    Height="300"
                    Fill="Yellow" />
                <ScrollViewer
                    x:Name="ManipulationCaptureScrollViewer"
                    Style="{StaticResource VerticalScrollViewerStyle}"
                    VerticalScrollBarVisibility="Hidden"
                    ViewChanged="ScrollViewer_OnViewChanged">
                    <Rectangle
                        Width="200"
                        Height="10000"
                        Fill="Transparent"/>
                </ScrollViewer>
                <TextBlock
                    x:Name="OffsetTextBlock"
                    Foreground="Black"
                    FontSize="24"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    />
            </Grid>
            <Rectangle
                Width="300"
                Height="300"
                Fill="GreenYellow" />
            <Rectangle
                Width="300"
                Height="300"
                Fill="LimeGreen" />
            <Rectangle
                Width="300"
                Height="300"
                Fill="Red" />
            <Rectangle
                Width="300"
                Height="300"
                Fill="OrangeRed" />
            <Rectangle
                Width="300"
                Height="300"
                Fill="DarkOrange" />
            <Rectangle
                Width="300"
                Height="300"
                Fill="Orange" />
        </GridView>
    </Grid>
</Page> 
```

**背后的代码**

```
using Windows.UI.Xaml.Controls;

namespace App84
{
    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
        }

        private void ScrollViewer_OnViewChanged(object sender, ScrollViewerViewChangedEventArgs e)
        {
            OffsetTextBlock.Text =
                ManipulationCaptureScrollViewer.VerticalOffset.ToString();
        }
    }
} 
```

**编辑***

此外，在 Windows 8.1 中，您可以获得`ManipulationModes.System`与其他模式（但不支持缩放和旋转）相结合的方式，应该允许您在`ScrollViewer`. [`CancelDirectManipulations()`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.canceldirectmanipulations.aspx)然后，一旦您希望其父级`ScrollViewers`停止处理平移和缩放操作，您就可以调用被操作元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T11:24:19.430

您可以在 xaml 中为 ManipulationMode 设置两个值。它有望处理它。

```
ManipulationMode="TranslateX,System" 
```

# iphone - 获取在 JavaPNS 中卸载应用程序的设备的成功状态

> ID：14153041
> 
> 赞同：1
> 
> 时间：2013-01-04T07:35:46.547
> 
> 标签：iphone, apple-push-notifications

我正在测试设备已经卸载应用程序的情况。

当我尝试通过 JavaPNS 向卸载应用程序的 iPhone 推送通知时，我获得了成功，但在设备中没有收到任何消息。

**为什么即使设备上不再安装相关应用程序，JavaPNS 仍返回成功？我该如何解决这个问题？**

```
 for (PushedNotification notification : notifications) {
            if (notification.isSuccessful()) {
                //success
            } else {
                iPhoneFailedPushed += 1;
                String deviceId = notification.getDevice() != null ? notification.getDevice().getDeviceId() : "";
                String exception = notification.getException() != null ? notification.getException().getMessage() : "";
                /* Add code here to remove invalidToken from database */
                if (notification.getResponse() != null)
                {
                    //show error code
                }
                else
                {
                    //show exception                
                }
                //log fail token
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:12:29.607

在这种情况下，您将永远不会收到错误响应数据包，因为这是一个有效的设备令牌（卸载应用程序不会改变它）。检测应用程序已卸载的唯一方法是使用反馈服务。

从 APNS 文档：

> 如果提供者尝试向应用程序发送推送通知，但该应用程序不再存在于设备上，则设备会将该事实报告给 Apple Push Notification Service。这种情况经常发生在用户卸载应用程序时。如果设备报告应用程序的交付尝试失败，APNs 需要某种方式通知提供者，以便它可以避免向该设备发送通知。这样做可以减少不必要的消息开销并提高整体系统性能。
> 
> 为此，Apple Push Notification Service 包含一个反馈服务，APN 会不断更新每个应用程序的失败交付尝试设备列表。设备由以二进制格式编码的设备令牌标识。提供商应定期查询反馈服务以获取其应用程序的设备令牌列表，每个设备令牌都由其主题标识。然后，在验证应用程序最近没有在识别的设备上重新注册后，提供商应该停止向这些设备发送通知。

# android - GPS是否需要互联网才能确定纬度和经度？

> ID：14153045
> 
> 赞同：0
> 
> 时间：2013-01-04T07:36:16.453
> 
> 标签：android, gps

> **可能重复：**
> [GPS 需要互联网吗？](https://stackoverflow.com/questions/12128990/does-gps-require-internet)

我只需要使用 GPS 计算纬度和经度。GPS为此需要互联网吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T07:37:15.850

不，GPS 不需要任何互联网来获取您的位置。它只是一个卫星定位系统。有关简要说明，您可以参考此[链接。](https://stackoverflow.com/a/12131727/1649309)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T07:40:11.670

如果您听说过 A-GPS 或辅助 GPS，互联网连接将有助于“辅助”GPS，或快速“修复”。但这根本不是必需的。

个人经验——没有任何网络或互联网，我的手机有时需要长达 10 分钟才能得到“修复”。如果我打开 A-GPS，它会在一分钟内锁定。

> 辅助GPS，通常缩写为A-GPS或aGPS，是一种在特定条件下可以提高GPS卫星定位系统的启动性能或首次定位时间（TTFF）的系统

来自[http://en.wikipedia.org/wiki/Assisted_GPS](http://en.wikipedia.org/wiki/Assisted_GPS)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:01:07.683

设备 GPS 确实需要互联网（最初）来获取设备可以从中检查卫星定位的列表。

获取列表后，即在地图上，您可以清楚地看到您的位置，精度<40m，您可以关闭数据，gps 将跟踪您的位置。（除非您关闭应用程序）

基本上，GPS 只不过是从卫星接收到的时间戳消息，比较 3 个此类消息（x、y 和 z 坐标），并且设备的卫星相对定位得出其位置。卫星越多，精度越高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T07:39:57.793

无需互联网即可找出纬度和经度...您只需在设备中打开 GPS...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T07:43:36.520

GPS 正是根据从至少 4 颗可见卫星接收到的*数据计算纬度和经度的技术。*

然而，许多消费者接收器，尤其是具有 GPS 接收器的手机，确实不敏感，需要互联网连接才能估计卫星的数据、时间和轨迹（称为星历）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T08:08:02.717

不，GPS 不需要互联网。我认为您正在混合在地图中显示位置。只需找到您不需要互联网的 GPS 位置。但如果您想在地图上显示您的位置，则需要互联网。在 MAP 上映射您当前的位置。由于 Mapview 需要互联网

# html - 没有z-index的堆叠？

> ID：14153051
> 
> 赞同：6
> 
> 时间：2013-01-04T07:36:38.310
> 
> 标签：html, css, z-index

我搜索了很多关于如何在没有 z-index 的情况下堆叠 HTML 元素，但是找不到任何具体的东西。我确实发现没有 z-index 的堆叠是按照 HTML 的出现顺序发生的。

[https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Stacking_without_z-index](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Stacking_without_z-index)

这个规范对 IE 有效吗？我有两个 div 包含在另一个 div 中。两个 div 都有绝对位置：

```
<div>
    <div id"div1" style="position:absolute"></div>
    <div id"div2" style="position:absolute"></div> 
</div> 
```

对于两个 div，即 div1 和 div2， 和 的值`left`是`width`相同的。根据我对 CSS 行为的理解，div2 应该始终与 div1 重叠。'div1' 与 'div2' 重叠的可能性有多大？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T15:00:25.403

在您的示例中，根据[您引用的文档](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/Stacking_without_z-index)，两个`div`元素都已**定位**但没有 z-index，因此具有相同的优先级（注意：它们的堆叠顺序确实高于未定位的元素）。这意味着它们按照它们在标记中出现的顺序堆叠，最后声明的元素具有最高的堆叠索引。

因此，按照那个定义，上面出现的**机会是不可能**的。`div1``div2`

有关更多信息，请参阅[有关堆叠上下文的 W3C CSS2 规范](http://www.w3.org/TR/CSS2/zindex.html#painting-order)。特别注意**第8点**：

> 所有具有“z-index：auto”或“z-index：0”的定位后代，按树顺序排列。

基本上源中定义的顺序是堆叠的顺序（不指定`z-index`等于`z-index: auto`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:54:29.770

如果将两个 DIV 的 left 和 top 属性设置为相同，则第二个 DIV 将始终与第一个 DIV 重叠。

这就是我所知道的。

# version-control - 使用异花授粉跟踪、维护销售/营销 Word 文档的多种变体/风格的策略？

> ID：14153052
> 
> 赞同：3
> 
> 时间：2013-01-04T07:36:43.380
> 
> 标签：version-control, ms-word, branching-and-merging

使用异花授粉跟踪、维护销售/营销 Word 文档的多种变体/风格的策略？

*   我一直在阅读人们使用 Tortoise、Plastic SCM、Magnet SVN、Mercurial 等来维护 word 文档的有趣示例（有/没有各种插件等）
*   我已经阅读了一些关于 SVN、Git、Hg 等的基本信息。
*   我有技术背景，但我想从作家/用户的角度来问这个问题。现在的问题与其说是技术问题，不如说是基于“能力”的问题。
*   目前，将由一个用户（我自己）处理这些变化/口味。

方向：

*   我将从 Master Word 文档（产品和服务销售/营销提案）开始。

*   最终目标可能不是单个主 Word 文档，而是现有 Word 文档将采用和维护的各种独立变体/风格。

*   将会有“定制”的变化可能永远保持独立（用于营销和展示给不同的人）

*   来自这些风格/变体的一些更新、元素和数据有时可能会相互“共享”和“合并”，并且某些部分可能永远保持独立和不同。

*   **没有最终目标是融合成单一风味/变体。**

*   **这些正在定制以吸引不同的客户和客户，但希望有一些方法可以随着时间的推移内插/交叉授粉。**

问题：

*   **这些版本控制系统是否能够通过交叉授粉来管理/处理这些销售/营销文档的此类“长期”风味/变化？**
*   **如果是，那么请就执行这些多种口味/变化提出一些“策略”？我已经阅读了与代码相关的“分支、主干、标签、克隆”。这里有什么好的策略/执行想法？**

提前致谢。请多多指教。

PS：当然，Word 文档的 Visual diff & Interpolating/ Merging 部分会经常发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:31:23.670

Well, from my POV, your task can be easy powered by any existing SCM (most headache will go from ugly MS-side, not VCS).

AFAICS, your history will be strictly linear, thus - you can don't worry about "better|worse merging" (in any case merging Word-files is terrible nightmare).

I think, you imagine you workflow slightly incorrect (as I see your task): at some stage you'll have **a set of**: * Master Documents * (different) files , different combination of which are included in different Masters as Subdocuments

All Masters and Subs are versioned and, therefore, changes are tracked. Reordering of parts in Master and|or adding|deleting|editing Subs files change final **business-documents**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:34:03.010

对于 Word 文档，您可能最好查看文档管理系统而不是 SCM 系统。

例如，在 Java 世界中，alfresco、eXo、nuxeo 等。我不会称之为轻量级，但您可以在笔记本电脑上运行 alfresco。

某些 DMS 为内容重用提供特殊支持。

如果您不在 Word 中工作，则可以使用 XML 组件管理系统。参见例如[http://en.wikipedia.org/wiki/EasyDITA](http://en.wikipedia.org/wiki/EasyDITA)或[http://www.componize.com/](http://www.componize.com/)

事实上，您可以使用这种方法。您可以将您的 Word docx（即解压缩，然后将可重复使用的块）分解成 eXist 或 MarkLogic。当有人想在 Word 中查看文档时，这些系统可以动态地重新组合文档。可重用的块可以单独进行版本控制。并且您可以有一个界面用于重新组合以创建新文档。这些部件就在那里，但您需要自己进行一些（不是不可忽视的）开发来创建一个完整的系统。

一些让您思考的链接（谷歌“组件管理”ECM OR 文档）：

*   [http://www.cmprofessionals.org/index.cfm?fuseaction=Feature.showFeature&featureID=41](http://www.cmprofessionals.org/index.cfm?fuseaction=Feature.showFeature&featureID=41)
*   www.single-source-forum.de/rueckblicke/2005/folien/ssf05_folien_kuppers.pdf
*   [http://www.component-management.com/](http://www.component-management.com/)

另一种方法完全是查看文档组装系统。其中一些支持组件（内容重用）。文档组装系统还使您能够拥有一个包含所有变体的“智能”模板，而不是多个文档。

如果您在 Google 上搜索“文档汇编”，您会看到所有价位都可用的系统（从免费到昂贵）。进一步参见[http://en.wikipedia.org/wiki/Document_automation](http://en.wikipedia.org/wiki/Document_automation)和[http://www.americanbar.org/publications/law_practice_today_home/law_practice_today_archive/september12/magic-in-minutes.html](http://www.americanbar.org/publications/law_practice_today_home/law_practice_today_archive/september12/magic-in-minutes.html)

# ocr - tesseract 训练过程中的单词列表是否需要该语言的所有单词？

> ID：14153053
> 
> 赞同：2
> 
> 时间：2013-01-04T07:36:51.447
> 
> 标签：ocr, tesseract

我正在训练一种谷歌代码中不存在的新语言，并且正在制作单词列表，但它没有解释列表是关于什么的......我的意思是它是训练 tiff 中的单词列表图像还是整个语言中的单词列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-10T00:01:59.037

从文档中：

> Tesseract 为每种语言使用多达 8 个字典文件。这些都是可选的，并帮助 Tesseract 确定不同可能字符组合的可能性。

字典有很多种，一开始可以忽略。

其中一本字典应该包含几乎所有的单词，而其他字典应该包含最流行的单词。其余的包含其他内容。

如果我知道您正在为哪种语言创建训练数据，我可以提供一些指示。

但重申一下：你*不需要*它们中的任何一个。

请参阅[文档的相关部分](http://code.google.com/p/tesseract-ocr/wiki/TrainingTesseract3#Dictionary_Data_%28Optional%29)

# sql - 如何实现这一点（在这种情况下查询数据库的最佳方法）

> ID：14153054
> 
> 赞同：0
> 
> 时间：2013-01-04T07:36:51.483
> 
> 标签：sql, sql-server, stored-procedures, cursor

我正在使用 MS SQL DB 开发一个 asp.net 应用程序。我有以下情况

包含用户位置信息的表格

用户 ID、地理位置、位置类型

我想做以下事情：

在表格上方查询特定用户，例如 userid 1 我将获取他的所有位置

现在我想再次以地理点为参数为上面返回的每一行查询同一个表，以便我可以搜索特定距离内的任何其他用户。我知道如何使用地理点并获取特定距离内的记录。但是，我需要您帮助我如何遍历第一个查询中的记录并将所有结果合并到一个输出中。

对此最好的方法是什么.. 例如 SQL 查询、SP、游标或来自 ASP.net 端处理。我怎样才能做到这一点？提前感谢您的所有帮助。

*我将查询每个位置类型的表，例如，如果位置类型 = A，那么距离应该是 10 公里，如果 B 是 50 公里等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:41:40.987

基于集合的解决方案应该始终是您在使用 SQL 时尝试找到的第一件事。我们不做循环（*）

```
SELECT
    * --TODO - Select columns
FROM
    UserLocations ul1
        inner join
    UserLocations ul2
        on
            ul1.User != ul2.User and
            ul1.Point.StDistance(ul2.Point) < 10 --Whatever you distance criteria is
WHERE
    ul1.User = 1 
```

* * *

(*) 除非我们已经尝试并未能找到性能足够好的基于集合的解决方案。

* * *

如果您想为每种位置类型提供*一个*结果集，则类似于：

```
SELECT
    * --TODO - Select columns
FROM
    UserLocations ul1
        inner join
    UserLocations ul2
        on
            ul1.User != ul2.User and
            ul1.Point.StDistance(ul2.Point) <
                CASE WHEN ul1.LocationType='A' THEN 10
                     WHEN ul1.LocationType='B' THEN 50
                END
WHERE
    ul1.User = @UserID --User parameter
ORDER BY
    ul1.LocationType --Guessing you might want each location types rows together 
```

如果您想分别执行每个位置（不知道为什么要这样做，但无论如何）：

```
SELECT
    * --TODO - Select columns
FROM
    UserLocations ul1
        inner join
    UserLocations ul2
        on
            ul1.User != ul2.User and
            ul1.Point.StDistance(ul2.Point) <
                CASE WHEN ul1.LocationType='A' THEN 10
                     WHEN ul1.LocationType='B' THEN 50
                END
WHERE
    ul1.User = @UserID --User parameter
    AND ul1.LocationType = @Location --Location parameter 
```

# c# - 尽量避免显示相同的图像两次

> ID：14153057
> 
> 赞同：2
> 
> 时间：2013-01-04T07:37:00.067
> 
> 标签：c#, winforms, picturebox

我正在使用图片框显示图像，并以一秒为间隔进行计时。我试图避免连续两次显示相同的图像，并使用数组列表来执行此操作以避免相同的随机图像紧随其后。

这就是我所做的。没有像我预期的那样工作得很好，最终得到了一个例外。我该如何改进以避免连续两次显示相同的图像？

```
Random random = new Random();
        ArrayList imagesList = new ArrayList();
        Image[] images = { imageOne, imageTwo, imageThree, imageFour, imageFive, imageSix, imageSeven };

        do
        {
            try
            {
                for (int i = 0; i < images.Length; i++)
                {

                    imagesList.Add(images[random.Next(0, 7)]);

                    while (imagesList.Contains(images[i]))
                    {
                        imagesList.Clear();
                        imagesList.Add(images[random.Next(0, 7)]);     

                    }
                    picImage.Image = (Image)imagesList[0];

                }

                Thread.Sleep(1000);
            }
            catch (IndexOutOfRangeException ind)
            {
                MessageBox.Show(ind.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
            catch (Exception exe)
            {
                MessageBox.Show(exe.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }

        } while (true);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:50:18.147

您可以进行随机播放而不是获取随机数。然后，您无需每次都检查图像是否已被使用。看这里，看看如何洗牌：http: [//www.dotnetperls.com/shuffle](http://www.dotnetperls.com/shuffle)。现在您可以遍历数组，它现在是随机的并且您不会得到重复。

我猜您使用 sleep 来避免每次都获得相同的随机值？你现在可以删除它。除此之外，它会阻止用户界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:04:50.683

只需重新排序图像：

```
Image[] randomOrder = images.OrderBy(i => Guid.NewGuid()).ToArray(); 
```

并遍历该数组。

您还需要使用计时器来更改图像，因为您当前正在阻塞 UI 线程。`System.Windows.Forms.Timer`将是适当的。您`Tick`的计时器事件处理程序如下所示：

```
private int index = 0;

private void Timer_Tick(Object sender, EventArgs args) 
{
  picImage.Image = randomOrder[index % randomOrder.Length];
  index++;
} 
```

此类的[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)示例代码`Timer`也很有帮助。请注意，框架中有几个`Timer`可用的类，这个可能是最好的。

# javascript - 绑定和取消绑定切换

> ID：14153064
> 
> 赞同：2
> 
> 时间：2013-01-04T07:37:33.170
> 
> 标签：javascript, jquery, html, bind

我有一个圆圈，单击该圆圈应在顶部显示一个关闭按钮。单击该关闭按钮时，它应该隐藏并仅显示该圆圈。

我应该能够一次又一次地做那个手术。

```
<div class="circle"><div class="close"></div></div>​ 
```

CSS：

```
.circle
    {
        background: url("http://upload.wikimedia.org/wikipedia/commons/thumb/8/85/Blue_circle_logo.svg/100px-Blue_circle_logo.svg.png");
        height: 100px;
        width:100px;        
    }
.circle .close
    {   display:none;
        position:relative;
        background: url("http://www.dlf-data.org.uk/images/icons/close-icon.png");
        height: 30px;
        width:30px;   
        float: right;

    } 
```

​</p>

JS：

```
$(".circle").click(function() {

$(".close").fadeIn();
$(".circle").unbind("click");
});

$(".close").click(function() {

$(".close").fadeOut();
$(".circle").bind("click");

});​ 
```

这是小提琴！这做了我想要的但不允许第二次点击！ [http://jsfiddle.net/RaExx/1/](http://jsfiddle.net/RaExx/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T07:40:36.773

```
$(".circle").click(function() {
    $(".close").fadeIn();
});

$(".close").click(function(e) {
    e.stopPropagation();
    $(".close").fadeOut();
});​ 
```

[小提琴](http://jsfiddle.net/RaExx/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T07:58:10.363

问题是您尝试重新绑定单击圆圈并不能说明要绑定什么功能。您只是说“绑定点击事件”，而没有说要执行什么功能。可以做的就是先声明圆形点击事件处理函数，然后可以多次绑定。

```
//Declare the event handler to use
var circleClick = function() {
  $(".close").fadeIn();
  $(".circle").unbind("click");
};

//Initital binding to circle click
$(".circle").click(circleClick);

//Bind close click
$(".close").click(function() {
  $(".close").fadeOut();
  //Re-binding to circle click
  $(".circle").click(circleClick);
});​ 
```

注意：使用 bind 方法绑定事件需要 2 个参数：事件名称和事件处理程序。

代替：

```
$(".circle").click(circleClick); 
```

你可以使用：

```
$(".circle").bind("click", circleClick); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T07:58:33.100

在 jQuery 中， .bind() 事件很麻烦。建议改用 .on() 事件。

[http://api.jquery.com/bind/](http://api.jquery.com/bind/)

> 从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。

像这样试试

```
$(".circle").on("click", function() {
  $(".close").fadeIn();
});

$(".close").on("click", function(event) {
  event.stopPropagation();
  $(".close").fadeOut();
});​ 
```

[http://jsfiddle.net/RaExx/4/](http://jsfiddle.net/RaExx/4/)

# java - 詹姆斯的发件箱

> ID：14153071
> 
> 赞同：0
> 
> 时间：2013-01-04T07:38:11.667
> 
> 标签：java, web-applications, jakarta-mail, james

我是网络开发的新手。我正在使用 James 邮件服务器。我分别创建了两个域和两个用户。我可以互相发送消息，并在此帮助下从“收件箱”文件夹中获取[消息](http://www.ibm.com/developerworks/java/library/j-james1/index.html)。我找不到在商店中获取“sentbox”的方法（我不确定是否有这样的文件夹）。必须有另一种方法和见解来获得詹姆斯可能持有的发件箱选秀权。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:10:14.873

“sentbox”、“outbox”、“draft”，这些都是邮件服务器中的常规文件夹。与收件箱不同，它们没有什么特别之处。您选择文件夹的名称。您可以像创建任何其他文件夹一样创建该文件夹。您将消息存储在文件夹中，就像任何其他文件夹一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-26T09:03:09.047

您的用例实际上很常见，并且有一种标准的方法来实现它。

它依赖于 Mailet 配置。使您的本地交付不重影电子邮件。然后在其后面放置一个带有 SenderIsLocal 匹配器的 ToSenderFolder，以确保邮件在已发送的框中传递。Finnaly 使用 Null mailet 和 RecipientIsLocalMatcher 为本地用户发送幽灵电子邮件。

这不是标准的，因为处理这个逻辑是 MUA 工作。然而，使用标准组件仍然很容易实现。

干杯，

贝努瓦

# sql - SQL获取行值之间的差异？

> ID：14153075
> 
> 赞同：2
> 
> 时间：2013-01-04T07:38:48.330
> 
> 标签：sql, sql-server

我有以下代码

```
SELECT MRT.sno, MRT.TypeName, MR.Adate, MAX(MRD.Value) AS Value
FROM MeterReadings MR 
INNER JOIN MeterReadingDetails MRD ON MRD.ReadingId = MR.sno
INNER JOIN MeterReadingTypes MRT ON MRT.sno = MRD.ReadingTypeId
WHERE MRT.sno IN (7,10,11)
GROUP BY MRT.sno,MRT.TypeName,MR.Adate
ORDER BY MR.Adate DESC 
```

结果

```
sno TypeName                Adate                   Value

11  Toplam Kapasitif        2013-01-04 00:00:00     33,313
7   Toplam                  2013-01-04 00:00:00     7819,33
10  Toplam Reaktif          2013-01-04 00:00:00     640,492
11  Toplam Kapasitif        2013-01-03 00:00:00     33,276
7   Toplam                  2013-01-03 00:00:00     7805,934
10  Toplam Reaktif          2013-01-03 00:00:00     639,862 
```

我想要一个名为“OldValue”的附加列。OldValue 列显示前一天的值，如下所示（上例的最后三行）

```
33,276
7805,934
639,862
null
null
null 
```

我怎样才能做到这一点？可能有一个类似的例子来告诉我方法。

提前致谢...

**更新**

事实上，我写了这样的东西

```
SELECT MRT.sno, MRT.TypeName, MR.Adate, MAX(MRD.Value) AS Value, 

(SELECT Value From
    (SELECT TOP 1 XMR.Adate,XMRD.ReadingTypeId,MAX(XMRD.Value) AS Value 
    FROM MeterReadings XMR,MeterReadingDetails XMRD 
    WHERE XMRD.ReadingId = XMR.sno AND XMRD.ReadingTypeId = MRT.sno AND XMR.Adate<MR.Adate 
    GROUP BY XMR.Adate,XMRD.ReadingTypeId 
    ORDER BY XMR.Adate DESC) AS TBL
) AS OldValue

FROM MeterReadings MR 
INNER JOIN MeterReadingDetails MRD ON MRD.ReadingId = MR.sno
INNER JOIN MeterReadingTypes MRT ON MRT.sno = MRD.ReadingTypeId
WHERE MRT.sno IN (7,10,11)
GROUP BY MRT.sno,MRT.TypeName,MR.Adate 
```

但我不知道，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:05:35.130

如果您使用的是 SQL Server 2012，则可以使用新的[`LAG`分析功能](http://blog.sqlauthority.com/2011/11/15/sql-server-introduction-to-lead-and-lag-analytic-functions-introduced-in-sql-server-2012/)

> SQL Server 2012 引入了新的分析函数 LEAD() 和 LAG()。此函数在不使用自连接的情况下访问同一结果集中的后续行（用于领先）和上一行（用于滞后）的数据。

你的陈述然后变成

```
SELECT  *, LAG(Value) OVER (PARTITION BY sno ORDER BY Adate DESC)
FROM    (
          SELECT  MRT.sno, MRT.TypeName, MR.Adate, MAX(MRD.Value) AS Value, 
          FROM    MeterReadings MR 
                  INNER JOIN MeterReadingDetails MRD ON MRD.ReadingId = MR.sno
                  INNER JOIN MeterReadingTypes MRT ON MRT.sno = MRD.ReadingTypeId
          WHERE   MRT.sno IN (7,10,11)
          GROUP BY
                  MRT.sno,MRT.TypeName,MR.Adate
        ) q
ORDER BY
        Adate DESC 
```

使用 SQL Server 2005/2008，我会将语句编写为

```
;WITH q AS (
  SELECT  MRT.sno, MRT.TypeName, MR.Adate, MAX(MRD.Value) AS Value, rn = ROW_NUMBER() OVER (PARTITION BY MRT.sno ORDER BY MR.Adate DESC)
  FROM    MeterReadings MR 
          INNER JOIN MeterReadingDetails MRD ON MRD.ReadingId = MR.sno
          INNER JOIN MeterReadingTypes MRT ON MRT.sno = MRD.ReadingTypeId
  WHERE   MRT.sno IN (7,10,11)
  GROUP BY
          MRT.sno,MRT.TypeName,MR.Adate
)
SELECT  q1.*, q2.Value
FROM    q q1
        LEFT OUTER JOIN q q2 ON q2.sno = q1.sno AND q2.rn = q1.rn + 1 
```

**编辑**

使用其中任何一种解决方案与您的主要区别在于，您的解决方案必须**为每条**记录检索先前的结果，这是一项昂贵的操作，而此解决方案本质上可以连接两个完整（相同）的数据集。

# jquery - 在彼此下方自动显示网格元素

> ID：14153078
> 
> 赞同：0
> 
> 时间：2013-01-04T07:38:55.373
> 
> 标签：jquery, asp.net, html, css

看到我在这个页面上工作，第一个是女性，第二个是男性：

```
http://www.woolovers.com/cashmere-merino/womens/classic-ladies-crew-cardigan.aspx
http://www.woolovers.com/lambswool/unisex/lambswool-slipover-vest.aspx 
```

如您所见，样本颜色网格顶部的尺寸各不相同。男士 (SML XL XXL) 和女士 (SML XL)

![在该页面上查看此网格](../Images/cf3e62decab7f424daff9990f3369ecb.png)

aspx 文件中该网格的 html 是：

```
<div class="SwatchGrid sw-color">
    <div class="sw-item">
        <asp:HyperLink ID="lnkColourURL" runat="server">
            <asp:Image ID="imgSwatch" runat="server" Height="20px" Width="20px" BorderWidth="0" />
        </asp:HyperLink><span><a id="hrfColourLink" runat="server" class="SwatchColourLabel ordr_grid">
            <asp:Literal ID="lblColour" runat="server"></asp:Literal></a></span></div>
    <div class="sw-sizes-av">
        <div id="tdXs" runat="server" visible="false">
            <span id="spXS" runat="server" visible="false">
                <img id="imgXSarge<%=mstrXSID%>" src="<%=mstrXSURL%>" onclick="ImageClicked('imgXSarge',<%=mstrXSID%>,'<%=mstrXSMsg%>',<%=onXSWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrXSSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrXSTitle%>" title="<%=mstrXSTitle%>"
                    class="CurPointer" /></span>
        </div>
        <div id="tdS" runat="server" visible="false">
            <span id="spS" runat="server" visible="false">
                <img id="imgSmall<%=mstrSID%>" src="<%=mstrSURL%>" onclick="ImageClicked('imgSmall',<%=mstrSID%>,'<%=mstrSMsg%>',<%=onSWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrSSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrSTitle%>" title="<%=mstrSTitle%>"
                    class="CurPointer" /></span>
        </div>
        <div id="tdM" runat="server" visible="false">
            <span id="spM" runat="server" visible="false">
                <img id="imgMedium<%=mstrMID%>" src="<%=mstrMURL%>" onclick="ImageClicked('imgMedium',<%=mstrMID%>,'<%=mstrMMsg%>',<%=onMWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrMSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrMTitle%>" title="<%=mstrMTitle%>"
                    class="CurPointer" /></span>
        </div>
        <div id="tdL" runat="server" visible="false">
            <span id="spL" runat="server" visible="false">
                <img id="imgLarge<%=mstrLID%>" src="<%=mstrLURL%>" onclick="ImageClicked('imgLarge',<%=mstrLID%>,'<%=mstrLMsg%>',<%=onLWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrLSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrLTitle%>" title="<%=mstrLTitle%>"
                    class="CurPointer" /></span>
        </div>
        <div id="tdXL" runat="server" visible="false">
            <span id="spXL" runat="server" visible="false">
                <img id="imgXLarge<%=mstrXLID%>" src="<%=mstrXLURL%>" onclick="ImageClicked('imgXLarge',<%=mstrXLID%>,'<%=mstrXLMsg%>',<%=onXLWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrXLSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrXLTitle%>" title="<%=mstrXLTitle%>"
                    class="CurPointer" /></span>
        </div>
        <div id="tdXXXL" runat="server" visible="false">
            <span id="spXXXL" runat="server" visible="false">
                <img id="imgXXXLarge<%=mstrXXXLID%>" src="<%=mstrXXXLURL%>" onclick="ImageClicked('imgXXXLarge',<%=mstrXXXLID%>,'<%=mstrXXXLMsg%>',<%=onXXXLWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrXXXLSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrXXXLTitle%>" title="<%=mstrXXXLTitle%>"
                    class="CurPointer" /></span></div>
        <div id="tdXXL" runat="server" visible="false">
            <span id="spXXL" runat="server" visible="false">
                <img id="imgXXLarge<%=mstrXXLID%>" src="<%=mstrXXLURL%>" onclick="ImageClicked('imgXXLarge',<%=mstrXXLID%>,'<%=mstrXXLMsg%>',<%=onXXLWait %>)"
                    onmouseover="ImageOver(<%=mstrStyleID%>,<%=mstrXXLSwatchID%>,<%=mstrColWay %>,'<%=ImagePath %>','<%=strAlt %>')"
                    onmouseout="ImageOut(<%=mstrColWay %>)" alt="<%=mstrXXLTitle%>" title="<%=mstrXXLTitle%>"
                    class="CurPointer" /></span>
        </div>
    </div>
    <div class="cls">
    </div>
</div>
<%}
  else
  { %>
<%--<div class="sw-item1">&nbsp;</div>--%>
<div class="sw-sizes">
    <div id="tdHXS" runat="server" visible="false">
        <span id="spHXS" runat="server" visible="false" >
            <asp:Literal ID="Literal1" runat="server" Text="<%$Resources:common,Size_XS%>"></asp:Literal></span></div>
    <div id="tdHS" runat="server" visible="false">
        <span id="spHS" runat="server" visible="false" >
            <asp:Literal ID="Literal2" runat="server" Text="<%$Resources:common,Size_S%>"></asp:Literal></span></div>
    <div id="tdHM" runat="server" visible="false">
        <span id="spHM" runat="server" visible="false" >
            <asp:Literal ID="Literal3" runat="server" Text="<%$Resources:common,Size_M%>"></asp:Literal></span></div>
    <div id="tdHL" runat="server" visible="false">
        <span id="spHL" runat="server" visible="false" >
            <asp:Literal ID="Literal4" runat="server" Text="<%$Resources:common,Size_L%>"></asp:Literal></span></div>
    <div id="tdHXL" runat="server"  visible="false">
        <span id="spHXL" runat="server" visible="false" >
            <asp:Literal ID="Literal5" runat="server" Text="<%$Resources:common,Size_XL%>"></asp:Literal></span></div>
    <div id="tdHXXXL" runat="server" visible="false">
        <span id="spHXXXL" runat="server" visible="false">
            <asp:Literal ID="Literal7" runat="server" Text="<%$Resources:common,Size_XXXL%>"></asp:Literal></span></div>
    <div id="tdHXXL" runat="server" visible="false"> 
        <span id="spHXXL" runat="server" visible="false">
            <asp:Literal ID="Literal6" runat="server" Text="<%$Resources:common,Size_XXL%>"></asp:Literal></span></div>
</div>
<% } %> 
```

现在的问题是，产品上可能有随机尺寸（从小号 (S) 到 Triple XL (XXXL)）。在这种情况下，有 4 个（S/M/L/XL）。现在，如果黑色上没有 M 尺寸，则黑色的 S 尺寸图像向右移动（因为 .sw-sizes-av 具有 width:auto ）。如何在不将其放入表格布局的情况下将其和任何其他图像保留在其位置？我希望你能明白我在这里想说的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:52:14.957

首先，删除

```
<div id="ctl00_ContentPlaceHolder1_SwatchGrid1_swl11_tdXXXL">
        </div> 
```

和

```
<div id="ctl00_ContentPlaceHolder1_SwatchGrid1_swl11_tdXs">   
    </div> 
```

如果不需要。我看到标题只有 S,M,L,XL,XXL 但有 7 种不同的`<div>`. XS，S，M，L，XL，XXL，XXXL。如果您没有相应的标题，请不要使用 div。

其次，所有可能/可能没有可用尺寸的 div 都应该有一个类。让我们创建那个类`content-size`。

您将以下 css 添加到此类

```
.content-size{
width:20px; /* because your span has 2px margin */
height:18px;
} 
```

附上相关html的截图

![在此处输入图像描述](../Images/f984e23bfd53b9f13bab4769b2664b82.png)

# html - 为 980px 使用 Twitter Bootstrap

> ID：14153082
> 
> 赞同：1
> 
> 时间：2013-01-04T07:39:12.877
> 
> 标签：html, css, twitter-bootstrap, grid

我的一位设计师给我发了 980px 宽度的 PSD。我想为此使用 Twitter Bootstrap 响应式布局。

实际上我是后端开发人员，我对前端的了解不多。我发现 bootstreo 容器类支持 940px。

如何将其用于 980 像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:49:55.277

您需要从 bootstrap 的[github](http://twitter.github.com/bootstrap/)获取带有 .less 文件的预编译版本，然后检查 variables.less 文件。您可以根据需要指定网格大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:51:58.810

您可以在 bootstrap-responsive.css 中更改媒体查询的宽度。他们看着像是：

```
@media (min-width: 768px) and (max-width: 980px) {
  /* Your CSS here */
} 
```

# ios - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序...原因（键：networkCarrier）

> ID：14153085
> 
> 赞同：2
> 
> 时间：2013-01-04T07:39:17.973
> 
> 标签：ios, exception, arguments

当我运行 iPad 模拟器时，我在应用程序中收到此错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: object cannot be nil (key: networkCarrier)' 
```

请帮我解决这个问题....它进入主线程

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T07:55:36.047

添加异常断点。这将导致代码在发生错误的地方停止。转到 xcode->查看->导航器->显示断点导航器。在左侧窗格中单击“+”并选择“添加异常断点”。运行应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T01:22:38.433

我认为您正在尝试将对象（为 nil）添加到键“networkCarrier”的字典中。

# cookies - 我怎样才能找到哪些 cookie 用于登录网站

> ID：14153090
> 
> 赞同：0
> 
> 时间：2013-01-04T07:39:50.080
> 
> 标签：cookies, web

假设我访问该网站`www.example.com`，然后我可以在萤火虫 cookie 控制台中看到一堆 cookie。

现在，当我没有登录时，这些 cookie 甚至存在。

现在那些也有今天的到期日。

现在，当我登录时，我也会看到相同的 cookie。

怎样才能找到哪些cookies是登录目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:26:00.790

使用 FireFox 插件 Cookie 管理器。它有一个单选按钮来显示哪个标记会话

# r - ddply 错误的含义：'names' 属性 [9] 必须与向量 [1] 的长度相同

> ID：14153092
> 
> 赞同：38
> 
> 时间：2013-01-04T07:40:03.060
> 
> 标签：r, plyr

我正在为黑客学习机器学习，我被困在这条线上：

```
from.weight <- ddply(priority.train, .(From.EMail), summarise, Freq = length(Subject)) 
```

这会产生以下错误：

```
Error in attributes(out) <- attributes(col) : 
  'names' attribute [9] must be the same length as the vector [1] 
```

这是一个回溯（）：

```
> traceback()
11: FUN(1:5[[1L]], ...)
10: lapply(seq_len(n), extract_col_rows, df = x, i = i)
9: extract_rows(x$data, x$index[[i]])
8: `[[.indexed_df`(pieces, i)
7: pieces[[i]]
6: function (i) 
   {
       piece <- pieces[[i]]
       if (.inform) {
           res <- try(.fun(piece, ...))
           if (inherits(res, "try-error")) {
               piece <- paste(capture.output(print(piece)), collapse = "\n")
               stop("with piece ", i, ": \n", piece, call. = FALSE)
           }
       }
       else {
           res <- .fun(piece, ...)
       }
       progress$step()
       res
   }(1L)
5: .Call("loop_apply", as.integer(n), f, env)
4: loop_apply(n, do.ply)
3: llply(.data = .data, .fun = .fun, ..., .progress = .progress, 
       .inform = .inform, .parallel = .parallel, .paropts = .paropts)
2: ldply(.data = pieces, .fun = .fun, ..., .progress = .progress, 
       .inform = .inform, .parallel = .parallel, .paropts = .paropts)
1: ddply(priority.train, .(From.EMail), summarise, Freq = length(Subject)) 
```

priority.train 对象是一个数据框，这里有更多信息：

```
> mode(priority.train)
[1] "list"
> names(priority.train)
[1] "Date"       "From.EMail" "Subject"    "Message"    "Path"      
> sapply(priority.train, mode)
       Date  From.EMail     Subject     Message        Path 
     "list" "character" "character" "character" "character" 
> sapply(priority.train, class)
$Date
[1] "POSIXlt" "POSIXt" 

$From.EMail
[1] "character"

$Subject
[1] "character"

$Message
[1] "character"

$Path
[1] "character"

> length(priority.train)
[1] 5
> nrow(priority.train)
[1] 1250
> ncol(priority.train)
[1] 5
> str(priority.train)
'data.frame':   1250 obs. of  5 variables:
 $ Date      : POSIXlt, format: "2002-01-31 22:44:14" "2002-02-01 00:53:41" "2002-02-01 02:01:44" "2002-02-01 10:29:23" ...
 $ From.EMail: chr  "removed@removed.ca" "removed@removed.net" "removed@removed.ca" "removed@removed.net" ...
 $ Subject   : chr  "please help a newbie compile mplayer :-)" "re: please help a newbie compile mplayer :-)" "re: please help a newbie compile mplayer :-)" "re: please help a newbie compile mplayer :-)" ...
 $ Message   : chr  "    \n Hello,\n   \n         I just installed redhat 7.2 and I think I have everything \nworking properly.  Anyway I want to in"| __truncated__ "Make sure you rebuild as root and you're in the directory that you\ndownloaded the file.  Also it might complain of a few depen"| __truncated__ "Lance wrote:\n\n>Make sure you rebuild as root and you're in the directory that you\n>downloaded the file.  Also it might compl"| __truncated__ "Once upon a time, rob wrote :\n\n>  I dl'd gcc3 and libgcc3, but I still get the same error message when I \n> try rpm --rebuil"| __truncated__ ...
 $ Path      : chr  "../03-Classification/data/easy_ham/01061.6610124afa2a5844d41951439d1c1068" "../03-Classification/data/easy_ham/01062.ef7955b391f9b161f3f2106c8cda5edb" "../03-Classification/data/easy_ham/01063.ad3449bd2890a29828ac3978ca8c02ab" "../03-Classification/data/easy_ham/01064.9f4fc60b4e27bba3561e322c82d5f7ff" ...
Warning messages:
1: In encodeString(object, quote = "\"", na.encode = FALSE) :
  it is not known that wchar_t is Unicode on this platform
2: In encodeString(object, quote = "\"", na.encode = FALSE) :
  it is not known that wchar_t is Unicode on this platform 
```

我会发布一个示例，但内容有点长，我认为内容与这里无关。

同样的错误也发生在这里：

```
> ddply(priority.train, .(Subject))
Error in attributes(out) <- attributes(col) : 
  'names' attribute [9] must be the same length as the vector [1] 
```

有没有人知道这里发生了什么？该错误似乎是由与priority.train 不同的对象生成的，因为它的names 属性显然有9 个元素。

我会很感激任何帮助。谢谢！

**问题解决了**

由于@user1317221_G 使用 dput 函数的提示，我发现了问题。问题在于 Date 字段，此时它是一个包含 9 个字段（sec、min、hour、mday、mon、year、wday、yday、isdst）的列表。为了解决这个问题，我只是将日期转换为字符向量，使用 ddply 然后将日期转换回日期：

```
> tmp <- priority.train$Date
> priority.train$Date <- as.character(priority.train$Date)
> from.weight <- ddply(priority.train, .(From.EMail), summarise, Freq = length(Subject))
> priority.train$Date <- tmp
> rm(tmp) 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-02T03:58:02.390

正如 Hadley 建议的那样，我通过将格式从 POSIXlt 转换为 POSIXct 解决了这个问题 - 一行代码：

```
 mydata$datetime<-strptime(mydata$datetime, "%Y-%m-%d %H:%M:%S") # original conversion from datetime string : > class(mydata$datetime) [1] "POSIXlt" "POSIXt" 
    mydata$datetime<-as.POSIXct(mydata$datetime) # convert to POSIXct to use in data frames / ddply 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T09:15:20.410

您可能已经[看到了这一点](https://stackoverflow.com/q/10566473/1317221)，但它并没有帮助。我想我们可能还没有答案，因为人们无法重现您的错误。

A`dput`或更小`head(dput())`可能对此有所帮助。但这里有一个替代方案`base`：

```
x <- data.frame(A=c("a","b","c","a"),B=c("e","d","d","d"))

ddply(x,.(A),summarise, Freq = length(B))
  A Freq
1 a    2
2 b    1
3 c    1

 tapply(x$B,x$A,length)
a b c 
2 1 1 
```

这`tapply`对你有用吗？

```
x2 <- data.frame(A=c("removed@removed.ca", "removed@removed.net"),
                 B=c("please help a newbie compile mplayer :-)", 
                     "re: please help a newbie compile mplayer :-)"))

tapply(x2$B,x2$A,length)
removed@removed.ca removed@removed.net 
              1                   1 

ddply(x2,.(A),summarise, Freq = length(B))
                    A Freq
1  removed@removed.ca    1
2 removed@removed.net    1 
```

你也可以更简单地尝试：

```
table(x2$A)

 removed@removed.ca removed@removed.net 
              1                   1 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T17:58:46.940

我有一个非常相似的问题，但不确定它是否相同。我收到以下错误。

```
Error in attributes(out) <- attributes(col) : 
  'names' attribute [20388] must be the same length as the vector [128] 
```

我在列表模式下没有任何变量，所以 Mota 的解决方案不适用于我的情况。我对问题进行排序的方式是删除 plyr 1.8 并手动安装 plyr 1.7。然后错误消失了。我也尝试重新安装 plyr 1.8 并复制了问题。

HTH。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-30T09:13:41.287

我也遇到了 ddply 的类似问题，并给出了以下代码/错误：

```
 test <- ddply(test, "catColumn", function(df) df[1:min(nrow(df), 3),])
    Error: 'names' attribute [11] must be the same length as the vector [2] 
```

数据框“测试”中有很多分类变量。

如下将分类变量转换为字符变量使 ddply 命令起作用：

```
 test <- data.frame(lapply(test, as.character), stringsAsFactors=FALSE) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-14T17:40:27.290

一旦您了解干扰的是一个日期列，您也可以在运行命令时简单地忽略该列而不是转换它...

所以

```
from.weight <- ddply(priority.train, .(From.EMail), summarise, Freq = length(Subject)) 
```

可以变成

```
from.weight <- ddply(priority.train[,c(1:7,9:10)], .(From.EMail), summarise, Freq = length(Subject)) 
```

例如，如果 POSIXlt 日期恰好在数据框的第 8 列中。报告的错误的奇怪之处在于它可能与您尝试分组的内容或您正在寻找的输出信息无关......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-24T21:18:38.673

我在使用`ddply`和修复时遇到了同样的问题`doBy`

```
library(doBy) 
bylength = function(x){length(x)} 
newdt = bylength(X ~From.EMail + To.EMail, data = dt, FUN = bylength) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-11T09:56:04.153

我也遇到了同样的问题，我通过只保留 ddply 所需的数据并使用 as.character 将过滤器变量和所有所需的 Text 变量转换为字符来解决它

有效

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-24T17:31:48.340

没有数据我无法对此进行测试，但请尝试使用`dplyr`而不是`plyr`. 像这样的东西应该返回预期的输出。您必须将其强制返回数据框，因为`dplyr`输出将是一个小标题。

```
from.weight <- priority.train %>%
               group_by(From.EMail) %>%
               summarise(Freq = length(Subject)) %>%
               ungroup() %>%
               as.data.frame() 
```

# android - 当打开日期DialogueFragment改变方向时强制关闭

> ID：14153093
> 
> 赞同：6
> 
> 时间：2013-01-04T07:40:04.090
> 
> 标签：android, datepicker, android-fragments

我有一个活动，我想要的只是

> Activity--> OnClick of Some layout (That has textview)-->Open Datepicker--> set selected value in txtvalue

我想使用带有以下代码的 DialogFragment 访问 Datepicker。

```
package com.app.ourforms.date;

import java.util.Calendar;

import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.os.Bundle;
import android.util.Log;
import android.widget.DatePicker;
import android.widget.TextView;

public class DatePickerFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {

    TextView txt;

    public DatePickerFragment() {
    }

    public DatePickerFragment(TextView txt) {
        this.txt = txt;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceSateate) {

        Log.i("TAG", "Inside onCreateDialog");
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        return new DatePickerDialog(getActivity(), this, year, month, day);
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        Log.i("TAG", "Inside onDateSet");
        txt.setText(day + "/" + (month + 1) + "/" + year);
        // Do something with the date chosen
    }
} 
```

上面的代码在设备不改变其方向时工作正常。但是当显示 Datepicker 并且方向更改时，我将强制关闭，如下所示

```
01-04 07:34:14.580: E/AndroidRuntime(2375): FATAL EXCEPTION: main
01-04 07:34:14.580: E/AndroidRuntime(2375): java.lang.NullPointerException
01-04 07:34:14.580: E/AndroidRuntime(2375):     at com.app.ourforms.date.DatePickerFragment.onDateSet(DatePickerFragment.java:39)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at android.app.DatePickerDialog.tryNotifyDateSet(DatePickerDialog.java:148)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at android.app.DatePickerDialog.onClick(DatePickerDialog.java:116)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at android.os.Looper.loop(Looper.java:137)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at java.lang.reflect.Method.invokeNative(Native Method)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at java.lang.reflect.Method.invoke(Method.java:511)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-04 07:34:14.580: E/AndroidRuntime(2375):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我调用 DatePickerFragment 的方法

```
public void showDatePickerDialog(View v) {
        Log.i("TAG", "Inside showDatePickerDialog");
        DialogFragment newFragment = new DatePickerFragment((TextView)v);
        newFragment.show(getFragmentManager(), "datePicker");
    } 
```

请帮助我摆脱困境。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:11:21.510

我不确定此解决方案是否适合您，但您可以尝试一下。

您面临的问题是，每次方向更改时，您的活动都会重新加载。您可以调用`OnConfigurationchanged()`方法并在 Menifest 文件中将 Configuchanges 设置为`orientation|screensize`

通过这样做，您的活动将不会在方向更改时加载，并且您将不会再面对您当前面临的问题。

可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:45:05.797

您的 TextView 引用为空。NPE 位于 DatePickerFragment 的第 39 行。其 null 的原因是，当方向更改时，会重新创建整个视图层次结构，并且对传递给 DatePickerFragment 的 TextView 的引用不再存在。

尝试传入 TextView 的 ID，而不是传入 TextView 实例。

```
new DatePickerFragment(v.getId()); 
```

然后实施

```
public Bundle onSaveInstanceState () 
```

和

```
public void onRestoreInstanceState (Bundle savedInstanceState) 
```

当您的 DatePickerDialog 被销毁和重新创建时，保存和恢复您的 TextView 的 ID。

然后，您将需要使用

```
getActivity().findViewById(your_text_view_ID) 
```

在视图层次结构中找到您的 TextView 实例，以便您可以设置它的文本。

# linq - 之前和之后的 OrderBy 除外

> ID：14153100
> 
> 赞同：0
> 
> 时间：2013-01-04T07:40:11.637
> 
> 标签：linq

在这个查询中

```
var list = (from t in ObjectCollection
            select t).OrderBy(v => v.Date)
           .Except(from i in items select i.value).OrderBy(v => v. 
```

第一个 OrderBy 中的 lambda 表达式显示 Date 属性，但在第二个 OrderBy 中没有。为什么？

**编辑＃1** `ObjectCollection`并且`items`是不同的类型。`ObjectCollection`是学生的集合，而`items`是学生 ID 的集合。现在我看到了问题。我将如何排除那些有身份证的学生`items`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:55:36.230

您应该检查您的对象`ObjectCollection`是否具有与在`i.value`子句中返回的值兼容的类型。我用 LinqPad 和 Visual Studio 做了一个简单的测试——一切都很好。请注意，我的`v.Date`表达式返回实例，`DateTime`也`i.value`返回实例`Datetime`，因此`Except`方法对两个兼容的数据序列进行操作。LinqPad 版本![在此处输入图像描述](../Images/1e47d2750e27241f59c65f56eca2f57c.png) Visual Studio 版本 ![在此处输入图像描述](../Images/132545f48ff749003800aeffc027c1d9.png)

**编辑：**您应该尝试使用下面给出的查询。`Except`方法接受两个**相同**类型的序列，并从第一个序列中删除元素，这些元素存在于第二个序列中。谢谢@lazyberezovsky，我将通过将 studentToExclude 序列带入内存来更新我的答案。

```
var studentsToExclude = items.Select(i => i.Value).ToList();

var result = from student in ObjectCollection
             where !studentsToExclude.Contains(student.ID) //I suppose your IDs are stored here
             orderby student.Date
             select student; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:11:03.487

看起来您正在尝试让 ID 不在项目列表中的学生：

```
var values = items.Select(i => i.Value).ToList();
var list = ObjectCollection.Where(v => !values.Contains(v.ID))
                           .OrderBy(v => v.Date); 
```

或加入（如果项目列表中没有重复项）：

```
var list = from v in ObjectCollection
           join i in items on v.ID equals i.Value
           orderby v.Date
           select v; 
```

# python - 用正则表达式捕获嵌套标签？

> ID：14153104
> 
> 赞同：-1
> 
> 时间：2013-01-04T07:40:46.923
> 
> 标签：python, regex, nested

```
s = '''<p>Plain text, <i>italicized phrase,
 <i>italicized subphrase</i>, <b>bold
 subphrase</b></i>, <i>other italic
 phrase</i></p>'''

r1 = r'''(?sx)(
<i>(
(?!</?i>).
|
<i> ( (?!</?i>). )* </i>
)*</i>
)''' 
```

`<i>...</i>`我使用 r1 模式在字符串 s中捕获。但`<i>italicized subphrase</i>`不能被捕获。为什么？

**我不是真的在处理 HTML 代码，而是与 HTML 的嵌套结构类似的东西！我只是以这些代码为例。** 我的问题是如何仅在一层嵌套结构中捕获嵌套和嵌套标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:47:53.673

您正在使用正则表达式，并且将 XML 与此类表达式匹配变得[太复杂、太快](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

请不要为难自己，而是使用 HTML 解析器，Python 有几个可供选择：

*   [ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)是标准库的一部分
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)是一个流行的第三方库
*   [lxml](http://lxml.de/)是一个快速且功能丰富的基于 C 的库。

元素树示例：

```
from xml.etree import ElementTree

tree = ElementTree.parse('filename.html')
for elem in tree.findall('i'):
    print ElementTree.tostring(elem) 
```

# c# - 具有多行的Sql表作为另一个表中的逗号分隔字段？

> ID：14153106
> 
> 赞同：0
> 
> 时间：2013-01-04T07:40:52.990
> 
> 标签：c#, asp.net-mvc-2, sql-server-2008-r2

> **可能重复：**
> [SQL Server：我可以用逗号将多行分隔为一列吗？](https://stackoverflow.com/questions/2046037/sql-server-can-i-comma-delimit-multiple-rows-into-one-column)

这可能吗？我有一个可以有很多行的临时表，例如：

```
 interaction type     name   points
        6             India     50
        8             India     100 
```

在我的主表 CategoriesTable 我有一个名为 HintText 的字段

我怎样才能让这些行成为 HintText = 6,India,50|6,India,100？

到目前为止，这是我的代码：

```
 UPDATE #CategoriesTable
  SET HintText =  t.Name + ',' + t.Points + ',' + t.interactiontype
 FROM #CategoriesTable
 INNER JOIN #temp1 t ON t.userId = #CategoriesTable.UserId
 WHERE t.userId = #CategoriesTable.UserId 
```

在我的存储过程中：

```
 HintText nvarchar(256), 
```

在我的存储库中：

```
 trainingModuleProgressState.HintText = row["HintText"].ToString(); 
```

在我的数据模型中：

```
 public string HintText { get; set; } 
```

这会给我一排，我如何进入第二排？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:26:26.013

我认为你想要类似于`GROUP_CONCAT`MySQL 的东西。不幸的是，在 SQL Server 中似乎没有简单的方法可以做到这一点。[这](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)是关于它的众多讨论之一。

MySQL`GROUP_CONCAT`看起来像：（我知道语法是 100%）

```
UPDATE #CategoriesTable
SET HintText = (SELECT GROUP_CONCAT(t.Name + ',' + t.Points + ',' + t.interactiontype)
                FROM #temp1 t
                WHERE t.userId = #CategoriesTable.UserId) 
```

# iphone - 是否有任何 sdk 或工具包来处理 iOS 中的 microsoft office 格式？

> ID：14153112
> 
> 赞同：2
> 
> 时间：2013-01-04T07:41:20.827
> 
> 标签：iphone, ios

我正在开发一个通用的文档编辑器、注释器以及我正在将所有东西放在一起的东西。我几乎可以用 pdf 文件做所有我想做的事情，但是 MS-Office 格式呢？有什么SDK或什么可以做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T20:31:18.177

实际上有一个库可以打开称为[LibXLS的 Excel 文件](http://sourceforge.net/projects/libxls/)

要显示 Word 文档，我建议您使用 UIWebView，因为它可以处理 word 文件。

如果您不想使用 UIWebView，那么您可以将[QLPreviewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)用于 Word、PDF 文件和 ppt 文件。

教程可以在[这里找到](http://soulwithmobiletechnology.blogspot.in/2012/07/tutorial-how-to-use-qlpreviewcontroller.html)

# java - 单例线程的含义

> ID：14153113
> 
> 赞同：0
> 
> 时间：2013-01-04T07:41:29.910
> 
> 标签：java, android, multithreading, broadcastreceiver

我只是想创建一个线程的单个对象，即一个单例，这样我就在整个应用程序中只创建了一个线程对象。每当我打电话时，它的工作都是一样的。我不想让进程在主应用程序线程中运行。

如果从多个位置调用作业，我还想同步作业（由 runnable 完成的工作）。

这种设计会很好吗？它的优点和缺点是什么？

我实际上将从android接收器（我有几个）调用runnable的运行，它将启动一个服务并调用runnable。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:28:24.303

我不认为单例线程是推荐的事情。如果您想要一个一直运行并处理您的请求的线程实例，那么请考虑使用[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)，它基本上是一个带有 Looper 的线程，可以让线程保持运行并等待您的消息。

您**不会**像在普通线程中那样覆盖`run()`方法，而是通过连接到 handlerThread 循环器的 Handler 对象发送消息来与线程通信。这是一个例子：

定义并启动您的 HandlerThread

```
 HandlerThread handlerThread = new HandlerThread("My handler thread");
 handlerThread.start(); 
```

创建与handlerThread looper关联的处理程序并覆盖handleMessage

```
 Handler handler = new Handler(handlerThread.getLooper()) {
      public void handleMessage(Message msg) {

    switch (msg.what) {
    case DO_SOMETHING:
        // do your logic
        break;

    case DO_ANOTHER_THING:
        // do your logic
         break;        
    }        
  }
} 
```

与您的线程交流 发送消息

```
Message msg = new Message();
msg.what = DO_SOMETHING; // an arbitrary constant integer
// You can pass extra arguments in msg.arg1, msg.arg2 and msg.obj
handler.sendMessage(msg); 
```

当你完成后记得停止你的 handlerThread

```
handlerThread.quit(); 
```

# mongodb - 使用 Monger 返回更新的文档

> ID：14153119
> 
> 赞同：5
> 
> 时间：2013-01-04T07:41:59.147
> 
> 标签：mongodb, clojure, monger

在 Monger 中有一个`insert-and-return`函数用于返回一个新插入的文档。

没有`update-and-return`功能。

如何从执行更新的函数返回更新的文档？

我想我可以使用`save-and-return`，但在我看来，我无法使用像`$push`这个函数这样的运算符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T00:12:43.173

这就是 Monger[`find-and-modify`](http://reference.clojuremongodb.info/monger.collection.html#var-find-and-modify)函数的目的。

```
;; Atomically find the doc with a language of "Python", set it to "Clojure", and
;; return the updated doc.
(mgcol/find-and-modify collection 
  {:language "Python"} 
  {:$set {:language "Clojure"} }
  :return-new true) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T12:08:01.257

我可以为您看到两个选项。

第一种选择是使用[JohnnyHK 的功能解决](https://stackoverflow.com/questions/14153119/return-updated-document-with-monger#14349338)方案`find-and-modify`：

```
(mc/find-and-modify "users"
  (select-keys my-doc [:_id])
  { $push { :awards { :award "IBM Fellow"
                      :year  1963
                      :by    "IBM" }}}
  :return-new true) 
```

* * *

第二种选择是使用`save`而不是`update`. 如果您已经从 mongodb 加载了整个文档，这是一个不错的选择。您可以轻松地将 mongodb 运算符替换`$push`为[update-in](http://clojuredocs.org/clojure_core/clojure.core/update-in)`clojure`等函数。对我来说，使用 clojure 地图进行操作似乎是更好的方法。如果您在为 mongodb 运算符寻找 clojure 替代品时遇到问题，我可以为您提供帮助。

对于我之前的示例，它将如下所示：

```
(mc/save-and-return "users"
  (update-in my-doc [:awards] conj
    { :award "IBM Fellow"
      :year  1963
      :by    "IBM" })) 
```

我自己，我更喜欢这种方式，因为它看起来更像 Clojure 风格。

# android - 如果播放器关闭，背景声音将如何播放？

> ID：14153120
> 
> 赞同：-1
> 
> 时间：2013-01-04T07:41:58.693
> 
> 标签：android

在 Google 的帮助下，我在 android 中开发了一个音频播放器，它工作正常，但是当我关闭播放器歌曲停止播放时我遇到了一个问题。我希望歌曲应该播放未点亮的用户手动停止歌曲。所以有人有任何建议我怎么能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:06:21.200

基本上就像所有人说的那样，我们需要使用服务来完成这项任务，因为活动会丢失其内容。所以看看下面的例子。

链接[http://www.helloandroid.com/tutorials/musicdroid-audio-player-part-i](http://www.helloandroid.com/tutorials/musicdroid-audio-player-part-i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:10:24.310

[本指南](http://developer.android.com/guide/topics/media/mediaplayer.html)应该可以帮助您入门，还可以[在此处](https://stackoverflow.com/questions/13875146/ensure-mediaplayer-oncompletionlistener-is-called-and-the-thread-is-not-dead/14061862#14061862)查看我的答案以获取完整示例

# nfc - 获取 DesFire RFID 唯一 ID

> ID：14153123
> 
> 赞同：1
> 
> 时间：2013-01-04T07:42:12.593
> 
> 标签：nfc, rfid, mifare

我之前在这里问了一些关于 Mifare RFID 卡的问题，我成功读取了卡片唯一 ID 的十六进制值。

现在我得到了一些我遇到问题的其他卡，我的阅读器对它们做出反应，并且 HID 全键阅读器确实从工作台应用程序中读取了这个 ID 号，我之前发送了以下十六进制序列：FF CA 00 00 00 这允许我从标准 mifare 卡中读取此内容，但是对于 Desfire，这似乎对我不起作用，

有人在这里有任何智能输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:51:00.847

如果我理解您的问题，您是在询问发送到 Mifare DESFire 卡以获取唯一 ID (UID) 的 APDU 序列是什么。

这篇[博文](https://ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/)可能会对您有所帮助。

有一个名为 GetVersion() 的命令将连续返回几个有趣的信息。该命令的十六进制代码为 0x60。您有两种发送方式：

任何一个

```
--> 60
<-- AF 04010101001805 
```

或者

```
--> 9060000000
<-- 04010101001805 91AF 
```

收到的答案是一个例子。它是关于硬件的信息，AF（在答案的开头或结尾）意味着该卡可以提供更多信息。该答案中的其他信息与 UID 无关，但在前面指出的博客文章中进行了描述。

要获取更多信息，请发送

```
--> AF
<-- AF 04010101041805 
```

或者

```
--> 90AF000000
<-- 04010101041805 91AF 
```

您从卡中收到与获取 UID（它是软件信息）无关的新答案，但在博客文章中进行了描述。新的 AF 表明有更多可用信息。

你发送

```
--> AF
<-- 00 048A4AAAA62D80BA34D5E9103612 
```

或者

```
--> 90AF000000
<-- 048A4AAAA62D80BA34D5E9103612 9100 
```

You will finally receive an answer with the UID. **The first 7th bytes are your UID**. In my example it's : 04 8A 4A AA A6 2D 80.

# java - Spring @Transactional 和继承

> ID：14153124
> 
> 赞同：9
> 
> 时间：2013-01-04T07:42:27.100
> 
> 标签：java, spring, transactions, spring-transactions, transactional

我确实有一个基于泛型的 DAO 类，它是我项目中所有其他 DAO 类的基础，并包含通用功能：

```
public class Dao<E> {

    private SessionFactory factory;

    public void setSessionFactory(SessionFactory factory) {
        this.factory = factory;
    }

    public E get(int id) {
        // ....
    }

    public void save(E entity) {
        // ...
    }

    public void delete(E entity) {
        // ...
    }

} 
```

在我的项目中，我使用多个数据源，指向不同的数据库，因此，我确实有多个会话和事务管理器：

```
<bean id="factory1" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="source1" />
</bean>

<bean id="manager1" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="factory1" />
</bean>

<bean id="factory2" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="source2" />
</bean>

<bean id="manager2" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="factory2" />
</bean> 
```

现在我想创建几个 DAO，在不同的数据库上运行：

```
@Repository
@Transactional("manager1")
public class Dao1 extends Dao<Entity1> {

    @Overrides
    @Autowired
    @Qualifier("factory1")
    public void setSessionFactory(SessionFactory factory) {
        super.setSessionFactory(factory);
    }

}

@Repository
@Transactional("manager2")
public class Dao1 extends Dao<Entity2> {

    @Overrides
    @Autowired
    @Qualifier("factory2")
    public void setSessionFactory(SessionFactory factory) {
        super.setSessionFactory(factory);
    }

} 
```

但问题是，子类`Dao`没有涵盖所有公共方法，因此不会发生事务管理。`@Transactional`我能想到的唯一选择是覆盖父类方法，因此它们是在继承类中定义的，因此需要注意`@Transactional`：

```
@Repository
@Transactional("manager1")
public class Dao1 extends Dao<Entity1> {

    @Overrides
    @Autowired
    @Qualifier("factory1")
    public void setSessionFactory(SessionFactory factory) {
        super.setSessionFactory(factory);
    }

    @Overrides
    public Entity1 get(int id) {
        return super.get(id);
    }

    @Overrides
    public void save(Entity1 entity) {
        super.save(entity);
    }

    @Overrides
    public void delete(Entity1 entity) {
        super.delete(entity);
    }

} 
```

但是后来我需要在**每个**DAO 类中执行此操作，并且代码到处都是相同的......

有没有更好的方法可以在所有类之间共享通用功能并且仍然具有声明式事务管理的所有好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-12T22:33:28.033

如果你不介意这个`super`类也`@Transactional`一样，你应该把注释放在`super`DAO 上。如果你介意的话，我建议创建一个扩展类`TransactionalDao`来扩展主 DAO，`@Transactional`并且所有应该扩展的 DAO 都`@Transactional`将扩展它：

```
public class Dao<E> {

    private SessionFactory factory;

    public void setSessionFactory(SessionFactory factory) {
        this.factory = factory;
    }

    public E get(int id) {
        // ....
    }

    public void save(E entity) {
        // ...
    }

    public void delete(E entity) {
        // ...
    }

}

@Transactional
public class TransactionalDao<E> extends Dao<E>{

    private SessionFactory factory;

    public void setSessionFactory(SessionFactory factory) {
        this.factory = factory;
    }

    public E get(int id) {
        return super.get(id);
    }

    public void save(E entity) {
        super.save(entity);
    }

    public void delete(E entity) {
        super.delete(entity);
    }
} 
```

现在扩展类看起来像这样：

```
@Repository
@Transactional("manager1") // You'd probably still want the @Transactional for new methods
public class Dao1 extends TransactionalDao<Entity1> {

    @Overrides
    @Autowired
    @Qualifier("factory1")
    public void setSessionFactory(SessionFactory factory) {
        super.setSessionFactory(factory);
    }   
} 
```

这样你只需要做`super`一次包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T22:25:41.147

您是否尝试过将 @Transaction 放在父 DAO 类的方法上？

```
public class Dao<E> {

    private SessionFactory factory;

    public void setSessionFactory(SessionFactory factory) {
        this.factory = factory;
    }
    @Transactional(readOnly = true)
    public E get(int id) {
        // ....
    }
    @Transactional
    public void save(E entity) {
        // ...
    }
    @Transactional
    public void delete(E entity) {
        // ...
    }
} 
```

这样，当您在 DAO1 上调用 save 时，它​​将从子类中获取类级别的 @Transaction（它将指定要使用的 TX 管理器），然后从父类的 save 方法中获取方法级别的 @Transactional。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-04T07:52:06.450

[您应该使用基于 AOP 的事务管理](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html)`@Transactional`，而不是到处添加注释，例如 -

```
<bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
  <property name="dataSource" ref="dataSource"/>
</bean>

  <tx:advice id="txAdvice" transaction-manager="txManager">  
  <tx:attributes>  
    <tx:method name="get*" read-only="true"/>  
    <tx:method name="*"/>
  </tx:attributes>
  </tx:advice> 
```

在服务层使用事务是一种很好的做法。

# javascript - 向表中添加行

> ID：14153125
> 
> 赞同：0
> 
> 时间：2013-01-04T07:42:30.633
> 
> 标签：javascript, jquery, html

当我使用这行代码时，表中的行被添加

```
$('#preq > tbody:last').append('<tr><td>Added here</td></tr>'); 
```

但是当我为此使用它时它不起作用

```
$('#preq > tbody:last').append('<tr><td><input title="Enter Kind Of work new" readonly="readonly" onclick="if(this.value!=''){this.value='';opendrop();}else{opendrop();}" id="other_work5" name="other_work5" type="text" size="30" onclick="opendrop()"  <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_workn']).'"'; } ?>></td><td><input name="client_name5" type="text" id="client_name5" size="40"/></td><td><input name="firm_name5" type="text" id="firm_name5" size="40"/></td></tr>'); 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T07:45:03.247

### 未转义的字符串：

`$('#preq > tbody:last').append('<tr><td><input title="Enter Kind Of work new" readonly="readonly" onclick="if(this.value!='')`
`--------------------------------------------^ {this.value='';opendrop();}else{opendrop();}" id="other_work5"`
`------------^`
`name="other_work5" type="text" size="30" onclick="opendrop()" <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_workn']).'"'; } ?>></td><td><input name="client_name5" type="text" id="client_name5" size="40"/></td><td><input name="firm_name5" type="text" id="firm_name5" size="40"/></td></tr>');`

只需使用它们来逃避它们`\'`，你就很好了！

### 工作一：

> `$('#preq > tbody:last').append('<tr><td><input title="Enter Kind Of work new" readonly="readonly" onclick="if(this.value!=\'\'){this.value=\'\';opendrop();}else{opendrop();}" id="other_work5" name="other_work5" type="text" size="30" onclick="opendrop()" <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_workn']).'"'; } ?>></td><td><input name="client_name5" type="text" id="client_name5" size="40"/></td><td><input name="firm_name5" type="text" id="firm_name5" size="40"/></td></tr>');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:45:13.503

代码中未转义的单引号被单引号包围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T07:46:20.023

您需要转义单引号。试试这个：

```
$('#preq > tbody:last').append('' +
  '<tr>' +
    '<td>' +
      '<input title="Enter Kind Of work new" readonly="readonly" ' +
        'onclick="if(this.value!=\'\'){this.value=\'\';opendrop();}else{opendrop();}" id="other_work5" name="other_work5" type="text" size="30" ' +
        'onclick="opendrop()"  <?php if (isset($errors)) { echo 'value="'.htmlentities(@$_POST['other_workn']).'"'; } ?>>' +
    '</td>' +
    '<td>' +
      '<input name="client_name5" type="text" id="client_name5" size="40"/>' +
    '</td>' +
    '<td>' +
      '<input name="firm_name5" type="text" id="firm_name5" size="40"/>' +
    '</td>' +
  '</tr>'
); 
```

另请注意，由于 PHP 是服务器端，因此 php 将在附加 html 之前执行...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T07:45:19.963

中的第一个单引号 (')

```
"if(this.value!='') 
```

关闭打开的字符串

```
append(' 
```

转义要附加的字符串中的所有单引号。

# python - 如何在python中使用urllib2捕获重定向的url

> ID：14153132
> 
> 赞同：1
> 
> 时间：2013-01-04T07:43:47.957
> 
> 标签：python, url, redirect, urllib2, httplib

我正在使用 urllib2 模块读取 html 页面，下面是我的代码

**代码.py**

```
import urllib2, httplib

httplib.HTTPConnection.debuglevel = 1  
request = urllib2.Request("http://www.vodafone.in/Pages/tuesdayoffers_che.aspx")
opener = urllib2.build_opener()
f = opener.open(request)
print f.url 
```

**结果**

```
'http://www.vodafone.in/pages/tuesdayoffers_che.aspx?cid=che' 
```

当我在浏览器中给出上面的 url 时，它被重定向到`http://www.vodafone.in/pages/home_che.aspx?cid=che`，但是从上面的代码中，我得到了相同的给定 url

所以最后如何使用 urrlib2 捕获重定向的 url 并从中读取数据，因为我有许多 url 将被重定向到其他一些 url，最后我的意图是捕获重定向的 url 并从捕获的 url 中读取数据，那么如何在python中使用`urllib2 and httplib`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:00:39.933

正则表达式不是必需的。该站点正在通过 JavaScript 重定向，但是仍然返回 302 状态代码。您可以通过以下方式验证这一点：

```
url = 'http://www.vodafone.in/Pages/tuesdayoffers_che.aspx'
file_pointer = urllib2.urlopen(url)
print file_pointer.getcode() 
```

当返回 302 状态码`Location`时，响应标头中有一个标头。您可以通过以下方式查看：

```
url = 'http://www.vodafone.in/Pages/tuesdayoffers_che.aspx'
file_pointer = urllib2.urlopen(url)
print file_pointer.info() 
```

记录`Location`网址。这将是您被重定向到的页面。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T08:46:33.363

Yes, @Sp is right, this web page is redirected by javascript. The following is the page source.

```
<script>document.write("<meta http-equiv=\"refresh\" content=\"3;url=/pages/home_che.aspx\">");</script> 
```

One approach is using a regular expression to extract the redirection location. like `url\=([a-z_./]*)`

```
>>> import re
>>> p = re.compile(r'url\=([a-z_./]*)')
>>> p.findall(r'''<script>document.write("<meta http-equiv=\"refresh\"content=\"3;url=/pages/home_che.aspx\">");</script>''')
['/pages/home_che.aspx'] 
```

# hibernate - 在 Hibernate Search / Lucene 中转义正斜杠字符

> ID：14153134
> 
> 赞同：1
> 
> 时间：2013-01-04T07:43:52.133
> 
> 标签：hibernate, lucene, hibernate-search

我正在使用休眠搜索 4.2、Lucene 3.6。

我在域中有以下列：

```
@Column(name = "summarycontent")
@Field(index = Index.YES, store = Store.YES)
public String getSummarycontent() {
    return this.summarycontent;
} 
```

在数据库中我有数据：`abcdef dsfasdf 14/12 fdfdf`.

执行查询`query: +summarycontent:14/12~0.3`时，它不返回任何结果。

我认为这是因为 Lucene 没有在单词“14/12”中转义正斜杠字符。

请帮助我在 Hibernate 中使用正向 Flash 字符处理 Lucene 搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:01:08.293

您需要查看 Lucene 中可用的不同分词器，因为我认为 Classic 和 Standard 分词器在分词期间都会丢弃“/”。

# php - 如何限制用户不执行浏览器“另存为”、“打印”操作

> ID：14153137
> 
> 赞同：-3
> 
> 时间：2013-01-04T07:43:55.930
> 
> 标签：php, javascript, jquery, html

为了限制用户打印答案，[链接](https://stackoverflow.com/questions/7022310/how-to-disable-save-as-and-print-option-of-browser)中给出了..

如何处理另存为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:47:05.653

一旦您的内容在他们的计算机上，您就不能限制用户对您的内容所做的事情。甚至在那个问题中链接的 CSS hack 也很容易被击败。

如果他们想将它保存到磁盘、打印、折叠、旋转或破坏它，他们有这种能力，你无法有效地阻止它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:20:46.850

Save-As-Feature 由浏览器以不同方式处理。有些只是复制他们的缓存文件，有些提出新请求并将文件重写到本地结构。**有可能接受您可能想到的所有保护！**

但是，如果你真的很在意，你至少可以通过一些 javascript 和 css hack 让保存内容变得不那么容易。（也建议参见[此链接](http://bytes.com/topic/javascript/answers/512445-code-disable-print-save)）

1.  **通过使用 *{display:none} 设置打印样式表来**禁用打印- 对用户来说非常烦人，但可以****
***   **禁用鼠标右键**，不让用户看到您的源 - 非常非常烦人，大多数操作都可以通过浏览器导航菜单使用。*   **禁用剪贴板**- 大多数用户不会看到该“功能”，但它可以工作。*   **通过动态加载内容禁用另存为**可以在某些浏览器中工作。为此，您必须提供一个仅包含 javascript（或至少是页眉、页脚等）的页面，该页面在页面加载时使用 ajax 加载页面内容。**

# android - 捏缩放和拖动图像视图会从屏幕上消失吗？

> ID：14153144
> 
> 赞同：1
> 
> 时间：2013-01-04T07:44:28.670
> 
> 标签：android, imageview, drag, pinchzoom

我需要**拖动和捏缩放图像视图**。我上网并从[这里](http://pragprog.com/titles/eband3/source_code "这里")获取代码。它工作得很好，但是当我放大更多时，它超出了屏幕。我想在屏幕内保持缩放和拖动。我尝试了以下方式，但它对我不起作用。

我将 imageview 的 Tanslate 属性设置为：
`matrix.setTranslate(width / 2, height / 2);`
其中宽度和高度是屏幕宽度和高度。

我试图检查这种情况，但它从来没有帮助过我：

```
case MotionEvent.ACTION_MOVE:

  if (mode == DRAG) {

     int newX = event.getX() - start.x;
     int newY = event.getY() - start.y;
     if ( (newX <= 0 || newX >= screenWidth) ||
          (newY <= 0 || newY >= screenHeight) )
         break;

     matrix.set(savedMatrix);
     matrix.postTranslate(newX, newY); 
```

**完整的源代码：**

```
public class Touch extends Activity {

// These matrices will be used to move and zoom image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// We can be in one of these 3 states

static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming

PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;

// Widgets

private Gallery galleryIcons;
private Intent intent;
private ImageLoader imageloader = null;
private String filePath = null;
private Uri myUri = null;
private Bitmap preview_bitmap = null;
private Utils utils = null;
private ImageView imgRawBg;
private View adminIcons = null;
private View icon_cost_description = null;
public ProgressDialog mProgressDialog;
public ProgressDialog mProgDiagSndToServer;
private String uploadStatus = null;

private Activity activity;
private InputStream is;
private ImageView imgIcon;
private TextView txtImgMetaTitle;
private TextView txtImgTitle;
private TextView txtImgDesc;
private TextView btnImgPrice;
private TextView btnImgCancel;
private Dialog inAppDialog;
private TextView txtTitle;
private Button btnBuyIcon;
private Button btnCancelDialog;
protected int mIconIndex = 0;
private View yesOrNoConfirmation;
private ImageButton btnOkConfirm;
private ImageButton btnCancel;
private ImageView imgToDragAndPan;
private FrameLayout saveImage;
private File imageFile;
private File photo;
private boolean serverUploadException = false;
private String uploadPhotoID = null;

static int height;
static int width;

private static final float MIN_ZOOM = 1.0f;
private static final float MAX_ZOOM = 5.0f;

// Menus and its properties

private static final int CHANGE_TOUCH_MODE_MENU_ID = Menu.FIRST;
private static final int SAVE_PROCESSED_IMAGE = 3;
public static final boolean Debugging = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.dragview);

    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    height = metrics.heightPixels;
    width = metrics.widthPixels;

    setupViews();

    imgToDragAndPan.setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent rawEvent) {
            WrapMotionEvent event = WrapMotionEvent.wrap(rawEvent);
            ImageView view = (ImageView) v;

            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                mode = DRAG;
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                oldDist = spacing(event);
                if (oldDist > 10f) {
                    savedMatrix.set(matrix);
                    midPoint(mid, event);
                    mode = ZOOM;
                }
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == DRAG) {

                 int newX = event.getX() - start.x;
     int newY = event.getY() - start.y;
     if ( (newX <= 0 || newX >= screenWidth) ||
      (newY <= 0 || newY >= screenHeight) )
     break;

                    matrix.set(savedMatrix);
                    matrix.postTranslate(newX, newY);

                    // matrix.postTranslate(event.getX() - start.x,
                    // event.getY() - start.y);

                } else if (mode == ZOOM) {
                    float newDist = spacing(event);
                    if (newDist > 10f) {

                        matrix.set(savedMatrix);
                        float scale = newDist / oldDist;
                        matrix.postScale(scale, scale, mid.x, mid.y);

                    }
                }
                break;
            }
            view.setImageMatrix(matrix);
            return true;
        }
    });

    matrix.setTranslate(width / 2, height / 2);
    // matrix.setTranslate(1f, 1f);

    imgToDragAndPan.setImageMatrix(matrix);

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 4;
    preview_bitmap = BitmapFactory.decodeStream(is, null, options);

    galleryIcons = (Gallery) findViewById(R.id.galleryIcons);
    galleryIcons.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View arg1, int index,
                long arg3) {
            mIconIndex = index;
            if (SplashScreen.adminIcons.get(index).getPaymentType()
                    .equals("0")) {

                imageloader.DisplayImage(SplashScreen.adminIcons.get(index)
                        .getLargeIcons(), imgToDragAndPan);
                imgToDragAndPan.setVisibility(View.VISIBLE);
                adminIcons.setVisibility(View.VISIBLE);
                icon_cost_description.setVisibility(View.GONE);

            } else {
                imgToDragAndPan.setVisibility(View.GONE);
                adminIcons.setVisibility(View.GONE);
                icon_cost_description.setVisibility(View.VISIBLE);
                imageloader.DisplayImage(SplashScreen.adminIcons.get(index)
                        .getSmallIcons(), imgIcon);
                txtImgMetaTitle.setText(SplashScreen.adminIcons.get(index)
                        .getName());
                txtImgTitle.setText(SplashScreen.adminIcons.get(index)
                        .getName());
                txtImgDesc.setText(SplashScreen.adminIcons.get(index)
                        .getDescription());
                btnImgPrice.setText(SplashScreen.adminIcons.get(index)
                        .getPrice());
                btnImgCancel.setText(Constant.cancel);
            }
        }
    });

    btnImgCancel.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            adminIcons.setVisibility(View.VISIBLE);
            icon_cost_description.setVisibility(View.GONE);
        }
    });

    btnImgPrice.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            ShowBuyDialog();
        }
    });

    btnOkConfirm.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if (utils.isConnectingToInternet(Touch.this)) {
                new UploadImagesToServer().execute();
            } else {
                utils.showToast(getApplicationContext(),
                        Constant.noNetworkConnection);
            }
        }
    });

    btnCancel.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            imgToDragAndPan.setEnabled(true);
            adminIcons.setVisibility(View.VISIBLE);
            icon_cost_description.setVisibility(View.GONE);
            yesOrNoConfirmation.setVisibility(View.GONE);
        }
    });

    activity.runOnUiThread(new Runnable() {
        public void run() {
            mProgressDialog = ProgressDialog.show(Touch.this,
                    "Please wait...", "Loading..");

            File photo = new File(myUri.getPath());
            preview_bitmap = utils.decodeFile(photo);
            imgRawBg.setImageBitmap(preview_bitmap);
            galleryIcons.setAdapter(new AdminIconsAdapter(Touch.this,
                    SplashScreen.adminIcons));

            if (mProgressDialog.isShowing() && mProgressDialog != null) {
                mProgressDialog.dismiss();
            }
        }
    });
}

public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    menu.add(0, CHANGE_TOUCH_MODE_MENU_ID, 0, "Show / Hide");
    menu.add(0, SAVE_PROCESSED_IMAGE, 0, "Save Image");
    return true;
}

public boolean onPrepareOptionsMenu(Menu menu) {

    if (yesOrNoConfirmation.isShown()) {
        menu.findItem(SAVE_PROCESSED_IMAGE).setVisible(false);
        menu.findItem(CHANGE_TOUCH_MODE_MENU_ID).setVisible(false);
    } else {
        menu.findItem(SAVE_PROCESSED_IMAGE).setVisible(true);
        menu.findItem(CHANGE_TOUCH_MODE_MENU_ID).setVisible(true);
    }
    return super.onPrepareOptionsMenu(menu);
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case CHANGE_TOUCH_MODE_MENU_ID: {

        if (adminIcons.isShown()) {
            adminIcons.setVisibility(View.GONE);
        } else {
            adminIcons.setVisibility(View.VISIBLE);
        }
        return true;
    }
    case SAVE_PROCESSED_IMAGE: {
        imgToDragAndPan.setEnabled(false);
        adminIcons.setVisibility(View.GONE);
        icon_cost_description.setVisibility(View.GONE);
        saveProcessedImage();
        processedImgHandler.sendEmptyMessageDelayed(0, 500);
    }
    }
    return super.onOptionsItemSelected(item);
}

Handler processedImgHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        preview_bitmap = utils.decodeFile(imageFile);
        yesOrNoConfirmation.setVisibility(View.VISIBLE);
        super.handleMessage(msg);
    }
};

private void saveProcessedImage() {

    photo = new File(Environment.getExternalStorageDirectory()
            + "/Mashallah", "photoToShare.png");

    // create bitmap screen capture
    Bitmap bitmap = null;
    View v1 = saveImage.getRootView();
    v1.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);
    OutputStream outStream = null;
    imageFile = new File(photo.getAbsolutePath());

    try {
        outStream = new FileOutputStream(photo.getAbsolutePath());
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);
        outStream.flush();
        outStream.close();

    } catch (FileNotFoundException e) {

    } catch (IOException e) {

    }
}

private void setupViews() {
    utils = new Utils();
    intent = getIntent();
    imageloader = new ImageLoader(Touch.this);
    activity = this;
    filePath = intent.getStringExtra("filePath");
    myUri = Uri.parse(filePath);
    imgToDragAndPan = (ImageView) findViewById(R.id.imgToDrag);
    imgRawBg = (ImageView) findViewById(R.id.imgbg);

    // imgToDragAndPan.getLayoutParams().height = height;
    // imgToDragAndPan.getLayoutParams().width = width;
    // imgToDragAndPan.setMaxHeight(height);
    // imgToDragAndPan.setMaxWidth(width);
    //
    // imgRawBg.getLayoutParams().height = height;
    // imgRawBg.getLayoutParams().width = width;
    // imgRawBg.setMaxHeight(height);
    // imgRawBg.setMaxWidth(width);

    icon_cost_description = (View) findViewById(R.id.icon_cost_description);
    adminIcons = (View) findViewById(R.id.adminIcons);
    yesOrNoConfirmation = (View) findViewById(R.id.confirm_yes_or_no);
    saveImage = (FrameLayout) findViewById(R.id.saveImage);

    // Icon_cost_description

    imgIcon = (ImageView) findViewById(R.id.imgIcon);
    txtImgMetaTitle = (TextView) findViewById(R.id.txtImgMetaTitle);
    txtImgTitle = (TextView) findViewById(R.id.txtImgTitle);
    txtImgDesc = (TextView) findViewById(R.id.txtImgDesc);
    btnImgPrice = (TextView) findViewById(R.id.btnImgPrice);
    btnImgCancel = (TextView) findViewById(R.id.btnImgCancel);

    // Confirm_yes_no layout

    btnOkConfirm = (ImageButton) findViewById(R.id.btnOkConfirm);
    btnCancel = (ImageButton) findViewById(R.id.btnCancel);

    // Setting visibility

    imgToDragAndPan.setVisibility(View.INVISIBLE);
    yesOrNoConfirmation.setVisibility(View.GONE);
    icon_cost_description.setVisibility(View.GONE);

}

/** Determine the space between the first two fingers */
private float spacing(WrapMotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/** Calculate the mid point of the first two fingers */
private void midPoint(PointF point, WrapMotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-19T04:58:09.917

尝试这个，

我有一个解决方案给你，我希望它对你有用，

```
try to use TouchImageView instead of ImageView in Layout.because touchimageview have property that zooming in or out itself

https://github.com/MikeOrtiz/TouchImageView from this link you learn how to use touchimageview...

<com.luminous.pick.TouchImageView
                android:id="@+id/img2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

Then After implement onDragListener of imageview so you can get DRAG And Drop of Imageview easily...

@Override
public boolean onDrag(View v, DragEvent event) {

    switch (event.getAction()) {

        case DragEvent.ACTION_DROP:

            ImageView target = (ImageView) v;
            ImageView dragged = (ImageView) event.getLocalState();

            Drawable target_draw = target.getDrawable();
            Drawable dragged_draw = dragged.getDrawable();

            dragged.setImageDrawable(target_draw);
            target.setImageDrawable(dragged_draw);

   }
    return true;
} 
```

我希望你能尽快解决你的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:11:25.277

尝试使用`event.getRawX()`和`getRawY();`

并且比较语句检查是否**`drag`**大于屏幕**宽度**或**高度**。它应该是类似的东西

```
 int newX = event.getRawX();//or +/- the current width of the element under drag
 int newY = event.getRawY();
 if ( (newX <= 0 || newX >= screenWidth) ||
      (newY <= 0 || newY >= screenHeight) )
     break; 
```

请检查它是否有帮助。

# php - php, foreach 中的 foreach

> ID：14153145
> 
> 赞同：0
> 
> 时间：2013-01-04T07:44:34.563
> 
> 标签：php, foreach

在这段代码中，有两个 foreach。当我单独使用它时效果很好。但是，它不能一起工作。我已经为这个问题苦苦挣扎了两天。。

```
$urls = nl2br($this->input->post('urls'));
$result = explode("<br />", $urls);

$n = 0;
foreach($result as $row)
{
$n++;   
    $Google_Play_URL = $row;
    $string = file_get_contents($Google_Play_URL);

    $dom = new DOMDocument();
    @$dom->loadHTML($string);
    $anchors = $dom->getElementsByTagName('a');

    $i = 0;
    foreach ($anchors as $anchor) 
    {
    $i++;

        if ($anchor->nodeValue === 'Email Developer') {
            $email = str_replace('mailto:', '', $anchor->getAttribute('href'));

            if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
                echo $email;

                $id = $this->session->userdata(SESSION_USERID); 

                $country = 'US';
                $type = 'android';

                $query = 'SELECT idx FROM db_advertisers WHERE email = "'.$email.'"';
                $result = $this->db->query($query);

                if($result->num_rows() < 1)
                {
                    $query = 'INSERT INTO db_advertisers (email, type, url, country, submit_user) VALUES ("'.$email.'", "'.$type.'", "'.$Google_Play_URL.'", "'.$country.'", "'.$id.'")';
                    $this->db->query($query);   
                }
            }
        }
    } 
```

}

当我发送多个值时，此代码仅保存一个数据。它应该保存多个数据。你能看出问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:46:50.380

唯一明显的问题是，在内部 foreach 循环中，您正在设置

```
$result = $this->db->query($query); 
```

这与外部 foreach 循环中的变量相同

```
foreach($result as $row) 
```

更改其中一个变量名称应该可以解决问题。

# firefox - 从 Mozilla Firefox 查看本地保存的内容

> ID：14153147
> 
> 赞同：0
> 
> 时间：2013-01-04T07:44:53.290
> 
> 标签：firefox, caching, media, history

当使用 Mozilla Firefox 浏览并加载带有音频文件的网页时，该音频文件应该保存在本地的媒体缓存中，对吗？

是否有一种方法或插件/工具可以从 Mozilla 的网页显示中选择媒体缓存中的音频文件并将其保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:11:47.637

CacheViewer Continued 做我想要的，没有上下文菜单选项。 [https://addons.mozilla.org/en-US/firefox/addon/cacheviewer-continued/](https://addons.mozilla.org/en-US/firefox/addon/cacheviewer-continued/)

# java - 如何在偏好活动中识别偏好

> ID：14153150
> 
> 赞同：2
> 
> 时间：2013-01-04T07:45:01.833
> 
> 标签：java, android, xml, android-preferences

我有一个`ListPreference`被 an 调用的`Intent`：

```
package com.timeofcubeeliteDYLANFERRIS.cubetimerelite;

import android.os.Bundle;

public class MainPreferenceActivity extends PreferenceActivity {

    private OnPreferenceChangeListener onPreferenceChangeListener = new
        OnPreferenceChangeListener() {
        public boolean onPreferenceChange(Preference arg0, Object arg1){
                return true;
        }
    };

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.main_settings);
        Preference p;
        p.setOnPreferenceChangeListener(onPreferenceChangeListener);
    }
} 
```

这`Preference p;`是我所关心的。我还有其他东西可以找到它何时发生变化，但我不知道如何实际识别`Preference`. `Preference`位于`xml.main_settings.xml`。_ 它的关键是`timerIncrement`。谁能帮我解决这个问题？

摘要：
我不知道如何定义一个`Preference`位于 XML 文件中的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:49:04.660

您只需使用`findPreference(CharSequence key)`以检索`Preference`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:50:33.840

当您使用 Preference Activity 进行扩展时，您可以直接`findPreference(CharSequence key)`从 xml 文件中获取您的偏好。

所以你可以将 Preference 定义为

```
Preference p = (Preference)findPreference(keyofpreferenceitemyouhavetaken); 
```

如果它是 EditTextPreference 那么它将是：

```
EditTextPreference p = (EditTextPreference)findPreference(keyofpreferenceitemyouhavetaken); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T07:51:45.470

使用以下两行可以解决您的问题。

```
PreferenceManager.getDefaultSharedPreferences("sPEICFY YOUR XML LOCATION HERE");
Prefs.registerOnSharedPreferenceChangeListener(this); 
```

# python - 如何在Python中对单个元素中具有不同优先级字符的嵌套列表进行排序？

> ID：14153153
> 
> 赞同：2
> 
> 时间：2013-01-04T07:45:12.690
> 
> 标签：python, list, sorting, nested-lists

很抱歉不能出一个好的标题。

我有一个清单：

```
some_list = [[X, '4x01'], [X, '3x02'], [X, '4x02'], [X, '3x01']] 
```

`X`我不在乎的东西在哪里。

我想使用以下优先级对列表中的第二个元素进行排序：

1.  降序排列的第一个字符。
2.  最后 2 个字符按升序排列。

最终输出应该是：

```
some_list = [[X, '4x01'], [X, '4x02'], [X, '3x01'], [X, '3x02']] 
```

**注意**：给出错误答案的解决方案是：

```
output = sorted(some_list, key=lambda lis: lis[3], reverse=True) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T07:48:56.047

```
output = sorted(some_list, key=lambda x: (-ord(x[1][0]), x[1][-2:])) 
```

示例运行（定义 X`None`以便我可以复制粘贴您的列表定义）：

```
>>> X = None
>>> some_list = [[X, '4x01'], [X, '3x02'], [X, '4x02'], [X, '3x01']]
>>> output = sorted(some_list, key=lambda x: (-ord(x[1][0]), x[1][-2:]))
>>> output
[[None, '4x01'], [None, '4x02'], [None, '3x01'], [None, '3x02']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:00:57.423

在这种情况下，您可以像 @Amber 那样使用复合键。但是，这种方法并不总是有效：例如，如果两个组件都是两个字符长（因为这个`-ord(x[1][0])`技巧不再有效），它就会失败。

这是一个更通用的解决方案：

```
In [15]: X = None

In [16]: some_list = [[X, '4x01'], [X, '3x02'], [X, '4x02'], [X, '3x01']]

In [17]: l = sorted(some_list, key=lambda (x,y):y[-2:])

In [18]: l = sorted(l, key=lambda (x,y):y[:1], reverse=True)

In [19]: l
Out[19]: [[None, '4x01'], [None, '4x02'], [None, '3x01'], [None, '3x02']] 
```

它一次对列表进行一个标准排序，并利用 Python 的排序是[stable](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)的事实。

一种更通用的方法是提供一个比较器：

```
def f((x1,y1), (x2,y2)):
    c = cmp(y1[:1], y2[:1])
    if c != 0: return -c
    return cmp(y1[-2:], y2[-2:]) 
```

这可以按如下方式使用：

```
In [39]: sorted(some_list, cmp=f)
Out[39]: [[None, '4x01'], [None, '4x02'], [None, '3x01'], [None, '3x02']] 
```

# javascript - 如何在每次点击时获取 iframe 的下一个文本元素？

> ID：14153160
> 
> 赞同：3
> 
> 时间：2013-01-04T07:45:50.877
> 
> 标签：javascript, jquery

我有一个 iframe，通过点击它的任何内容，css 类被应用在它上面（比如“selected”）。之后

**单击下一个按钮时，它应该将此类应用于包含文本的下一个元素**

并返回文本。遍历应该是基于文本节点的。虽然我确实试图做一些非常丑陋的事情，但我想必须有一些简单的解决方案可用。

这是我的代码：

```
$(function(){
$('#next').click(function(){
    var current_segment =$('#my_iframe').contents().find(".highlight");

    // if current segment has children
    if($(current_segment).children().not('.traversed_already').length > 0){
        $(current_segment).children().not('.traversed_already').first().addClass('highlight');
        $(current_segment).removeClass('highlight');

        // add class to stop repitative traversing
        $(current_segment).addClass('traversed_already');
    //                                                return false;

    // if has siblings and no children
    }else if($(current_segment).siblings().not('.traversed_already').length > 0 
        && $(current_segment).children().not('.traversed_already').length <= 0){
        $(current_segment).siblings().not('.traversed_already').first().addClass('highlight');
        $(current_segment).removeClass('highlight');

        // add class to stop repitative traversing
        $(current_segment).addClass('traversed_already'); 
    //                                                return false;

    // if no siblings and no children
    }else if($(current_segment).siblings().not('.traversed_already').length == 0 && 
        $(current_segment).children().not('.traversed_already').length == 0){

        // check the very first parent if traversed check its siblings
        var parent_segment = $(current_segment).parent().first();

        // if parent is already traversed already
        if($(parent_segment).hasClass('traversed_already')){

            // if parent is traversed but parent has sibling that is untraversed
            if($(parent_segment).siblings().not('.traversed_already').length > 0){
                $(parent_segment).siblings().not('.traversed_already').first().addClass('highlight');
                $(parent_segment).removeClass('highlight');

                // add class to stop repitative traversing
                $(parent_segment).addClass('traversed_already');
            //                                                        return false;
            // if no untraversed sibling then search for parent(s)
            }else{
                // Look for the parent in Dom tree which is not traversed
                $(parent_segment).parents().not('.traversed_already').first().addClass('highlight');
                $(parent_segment).removeClass('highlight');

                // add class to stop repitative traversing
                $(parent_segment).addClass('traversed_already');
            //                                                        return false;
            } // end of if traversed parent has siblings(untraversed).

        // if parent is not traversed
        } else {
            $(parent_segment).addClass('highlight');
            $(current_segment).removeClass('highlight');

            // add class to stop repitative traversing
            $(current_segment).addClass('traversed_already');
        } // end of if parent is already traversed or not

    //                                                return false;
    } // end of else if no siblings and no parents 
```

此代码的问题是：

它只是通过首先看到孩子然后是兄弟姐妹然后是父母兄弟姐妹来遍历下一个元素，但是当出现父母>父母>父母兄弟姐妹时它会失败。

***注意：我相信这可以通过 DOM 遍历很容易地完成，但我无法找到正确的解决方案。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:59:05.060

这是一个最小的 DOM 遍历脚本。我不知道它是最好的还是最小的，但我很确定它正在工作（仅浏览器测试，但看起来很可靠）。

```
getNextElement = function(element, goingUp) {
  if (element.firstChild && !goingUp){
    return element.firstChild;
  }
  else if (element.nextSibling){
    return element.nextSibling;
  }
  else if (element.parentNode) {
    return arguments.callee(element.parentNode, true);
  }
}; 
```

这实际上会命中文本节点以及其他节点。我认为您实际上可以利用它。但如果你只想要元素，只需更改`firstChild`为`firstElementChild`和。尽管 IE8 或更低版本不支持此功能。通过运行然后运行来尝试一下`nextSibling``nextElementSibling``element = getNextElement(document.getElementsByTagName('body')[0])`

```
if (element.style){element.style.backgroundColor = 'yellow'};
element = getNextElement(element); 
```

反复遍历（并突出显示）DOM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T04:09:50.703

最简单的解决方案是**DOM TreeWalker**，我很幸运，我花了很长时间才弄清楚这一点。

[这](http://paul.kinlan.me/dom-treewalker/)是它的链接。希望它能帮助面临同样问题的人，而不是加速数小时或数天，它会立即帮助他们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T01:43:58.223

我不确定你的 iframe 的标记有多复杂，所以我使用了一些我自己快速创建的标记。

首先，单击一个元素以记下您的起始位置 - 该元素将突出显示 - 然后单击“下一步”按钮，代码将运行突出显示它找到的下一个元素。一旦所有元素都被突出显示，就不会再发生任何事情了。取决于元素的嵌套程度取决于代码是否会看到一个元素并突出显示它。一直以来，找到的内容都将在控制台窗口中可见，并给出“已选择”类。

我知道您要求提供基于文本节点的解决方案，但我“认为”这可行。试试看吧。

iframe.html：

```
<html>
<head>
<title>iFrame</title>
</head>
<body>
<ul>
<li><abbr title="Cascading Style Sheets">CSS</abbr> (an abbreviation; <code>abbr</code> markup used)</li>
<li><acronym title="radio detecting and ranging">radar</acronym> (an acronym; <code>acronym</code> markup used)</li>
<li><b>bolded</b> (<code>b</code> markup used - just bolding with unspecified semantics)</li>
<li><big>big thing</big> (<code>big</code> markup used)</li>
<li><cite>Origin of Species</cite> (a book title; <code>cite</code> markup used)</li>
<li><code>a[i] = b[i] + c[i);</code> (computer code; <code>code</code> markup used)</li>
<li>here we have some <del>deleted</del> text (<code>del</code> markup used)</li>
<li>an <dfn>octet</dfn> is an entity consisting of eight bits (<code>dfn</code> markup used for the term being defined)</li>
<li>this is <em>very</em> simple (<code>em</code> markup used for emphasizing a word)</li>
<li><i lang="la">Homo sapiens</i> (should appear in italics; <code>i</code> markup used)</li>
<li>here we have some <ins>inserted</ins> text (<code>ins</code> markup used)</li>
<li><q>Hello!</q> (<code>q</code> markup used for quotation)</li>
<li>He said: <q>She said <q>Hello!</q></q> (a quotation inside a quotation)</li>
<li><small>this is not that important</small> (<code>small</code> markup used)</li>
<li><strike>overstruck</strike> (<code>strike</code> markup used; note: <code>s</code> is a nonstandard synonym for <code>strike</code>)</li>
<li><strong>this is highlighted text</strong> (<code>strong</code> markup used)</li>
<li>In order to test how subscripts and superscripts (<code>sub</code> and <code>sup</code> markup) work inside running text, we need some dummy text around constructs like x<sub>1</sub> and H<sub>2</sub>O (where subscripts occur). So here is some fill so that you will (hopefully) see whether and how badly the subscripts and superscripts mess up vertical spacing between lines. Now superscripts: M<sup>lle</sup>, 1<sup>st</sup>, and then some mathematical notations: e<sup>x</sup>, sin<sup>2</sup><i>x</i>, and some nested superscripts (exponents) too: e<sup>x<sup>2</sup></sup> and f(x)<sup>g(x)<sup>a+b+c</sup></sup> (where 2 and a+b+c should appear as exponents of exponents).</li>
<li><u>underlined</u> text (<code>u</code> markup used)</li>
<li>the command <code>cat</code><var>filename</var> displays the file specified by the <var>filename</var> (<code>var</code> markup used to indicate a word as a variable).</li>
</ul>
</body>
</html> 
```

演示.html：

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script><script type="text/javascript">
$(document).ready(function(){
    $('#iframe').load(function(){
        $all = $('#iframe').contents().find('body *').filter(function(){
            var $this = $(this);
            return $this.children().length == 0 && $.trim($this.text()).length > 0;
        });         

        $('#next').on('click', highlightTextNode);
        $('#iframe').contents().find('body').on('click', highlightTextNode);
    });

    var highlightTextNode = function(event){
        event.stopPropagation();
        $el = $(event.target).children().length == 0 ? $(event.target) : $(event.target).find(':first-child').first();

        if(!$el.hasClass('selected') && $.trim($el.text()).length > 0 && $('#iframe').contents().find('body').find('.selected').length == 0){
            $el.addClass('selected').css({backgroundColor: 'yellow'});
            console.log($.trim($el.text()));
        } else {
            var found = false;
            var finished = false;

            $all.each(function(){
                finished = true;

                if(found && !$(this).hasClass('selected')){
                    found = false;
                    $(this).addClass('selected').css({backgroundColor: 'yellow'});
                    console.log($.trim($(this).text()));
                    finished = false;
                    return false;
                }

                if($(this).hasClass('selected'))
                    found = true;
            });

            if(finished){ //start at the beginning again
                $all.each(function(){                   
                    if(found && !$(this).hasClass('selected')){
                        found = false;
                        $(this).addClass('selected').css({backgroundColor: 'yellow'});
                        console.log($.trim($(this).text()));
                        return false;
                    }

                    if($(this).hasClass('selected'))
                        found = true;                   
                });
            }
        }
    }       
});
</script>
</head>
<body>
<input type="button" value="NEXT" id="next" />
<iframe id="iframe" src="iframe.html" width="100%" height="100%"></iframe>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T20:33:51.177

你为什么不使用一些`while`功能，比如

```
$(function(){
$('#next').click(function(){
    var current_segment =$('#my_iframe').contents().find(".highlight");
    var doWhile = true; // variable that will determine that You have to go again trough the loop
    while (doWhile){
       ... // Your code
       // Every time where You put
          // add class to stop repitative traversing
          $(element).addClass('traversed_already');
      // give also
          doWhile = false; // to stop while function
      // of course return will take You out as well
    } 
```

它应该工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T19:50:33.537

下面的解决方案应该可以满足您的目标。

笔记：

*   它使用了一些较新的浏览器/JS 功能，因此您可能必须将其移植到 jQuery 或类似的东西以实现跨浏览器兼容性。
*   它会预先计算完整的文本节点列表，因此只有当您的 iframe DOM 是静态的时它才会起作用。
*   它遍历所有文本节点，而不是所有包含文本的元素。也就是说，对于 HTML `<div id="a">1<div id="b">2</div>3</div>`，它将选择`1`then而不是`2`then 。我相信这是您所要求的，但不是 100% 清楚。`3``a``b`
*   我没有测试过。

编码：

```
// First grab the iframe's document object.
var iframeDocument = document.querySelector('iframe').contentDocument;

// Then generate the list of all text nodes in the iframe.
var textNodes = [];
function findTextNodes(curElem){
    Array.prototype.slice.apply(curElem.childNodes).forEach(function(childNode) {
        switch (childNode.nodeType) {
            case Node.TEXT_NODE:
                textNodes.push(childNode);
            case Node.ELEMENT_NODE:
                findTextNodes(childNode);
        }
    }, this);
}
findTextNodes(iframeDocument.body);

// Helper function to move the text node selection.
function selectTextNodeAtIndex(index){
    if (index > 0) {
        // Replace the old .selected wrapper with the original text node.
        var oldWrapperElem = iframeDocument.querySelector('.selected');
        oldWrapperElem.parentNode.replaceChild(textNodes[index - 1], oldWrapperElem);
    }

    // Replace the current text node with a .selected wrapper.
    var wrapperElem = iframeDocument.createElement('span');
    wrapperElem.classList.add('selected');
    wrapperElem.textContent = textNodes[index].textContent;
    textNodes[index].parentNode.replaceChild(wrapperElem, textNodes[index]);
}

// Finally, select the first text node and set up the click handler.
var curIndex = 0;
selectTextNodeAtIndex(curIndex);
document.querySelector('#next').addEventListener('click', function () {
    curIndex++;
    selectTextNodeAtIndex(curIndex);
}, true); 
```

# ruby-on-rails-3.2 - 如何解决意外的子元素

> ID：14153162
> 
> 赞同：1
> 
> 时间：2013-01-04T07:46:05.767
> 
> 标签：ruby-on-rails-3.2, axis2, savon

我试图用 Savon 调用一个简单的操作，但它一直在抛出

Savon::SOAPFault ((soapenv:Server) org.apache.axis2.databinding.ADBException: Unexpected subelement OperationRequest):

这是我的两行抛出这个：

client = Savon.client(wsdl: 'http://wsdl_location') response = client.call(:operation, message: { id: id })

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:42:49.453

该错误意味着来自远程系统的消息格式错误。消息解析器在期待其他内容时遇到 XML 中的 OperationRequest 元素。

# html - 在较小分辨率的屏幕上，尽管安装了我的网站，但总是有一个无用的水平滚动条

> ID：14153163
> 
> 赞同：0
> 
> 时间：2013-01-04T07:46:08.243
> 
> 标签：html, css, layout

在较小分辨率的屏幕上，尽管安装了我的网站，但总是有一个无用的水平滚动条。我想知道是否有人可以给我任何提示以使我的网站更好地适应屏幕？

如果您使用的是笔记本电脑，很容易注意到水平滚动条向右移动得太远，只能变成空白灰色。我的内容正确居中，但背景长度太长。

这是我的背景 CSS 和保存我的内容的容器。

```
body {
width: auto;
margin: 0px 0px 0px 0px;
text-align:center;
background: #E8E8E8;
}

.page {
  box-shadow: 0px 0px 4px 4px rgba(0,0,0,0.1);
  margin: 0 auto;
  height: 100%;
}

#container {
width: 1100px;
margin: 0 auto;
background: #ffffff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:51:40.530

这是一个很好的做法，`%`而不是`px`在开发响应式设计时使用。由于您已硬编码宽度，您将始终获得屏幕尺寸小于 1100 像素的滚动条。我建议你使用
`#container { width: 99%; margin: 0 auto; background: #ffffff; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:51:38.893

问题在于容器大小。

对于大多数小型显示器来说，1100 像素有点太多了。即使是分辨率为 1080 x 720 的屏幕也必须使用滚动条来显示剩余的 20 个像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T07:52:22.257

首先。你为什么要在你的身体里加载大量的 css/js？！

第二：您的容器 div 的宽度为 1100 像素，导致任何分辨率低于该值的滚动条。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T03:26:26.883

另一种选择是将身体或容器的溢出设置为隐藏。这将为您删除滚动条。

在你的CSS尝试添加：

```
body{overflow-x:hidden;} 
```

另一种方法是使用媒体查询根据本机屏幕大小调整容器大小。例如，如果在最大屏幕宽度为 300 像素的移动设备上显示页面，您可以将以下内容添加到您的 css

```
@media screen and (max-width:300px){
    #container{width:300px;}
} 
```

您可能还想阅读这篇关于响应式设计的文章： http: [//coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/](http://coding.smashingmagazine.com/2011/01/12/guidelines-for-responsive-web-design/)

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T07:52:38.887

您的#topnav 导航面板似乎太宽，并且它的左偏移量也为 320 像素。尝试使其宽度等于 780px

# google-analytics - 网络应用程序中的谷歌分析

> ID：14153165
> 
> 赞同：0
> 
> 时间：2013-01-04T07:46:22.290
> 
> 标签：google-analytics

将 GA 代码放在 Web 应用程序的所有页面中是个好主意吗？Web 应用程序具有只能由登录用户访问的页面。我应该将 GA 代码放在受限页面中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:54:10.550

我认为不应该将任何分析代码放入受限页面并使它们对机器人和爬虫开放。现在可能不会有任何安全风险，但谁知道可能会出现一些新的威胁，你的受限页面变得容易受到攻击。

顺便说一句，在我的博客中，我使用[http://icrunched.co/all-in-one-webmaster/](http://icrunched.co/all-in-one-webmaster/)将 GA 代码集成到所有页面中，因为它没有太多用户限制的内容。

# sql-server-2008 - 通过在sql server中加入两个表来获取数据

> ID：14153166
> 
> 赞同：0
> 
> 时间：2013-01-04T07:46:24.417
> 
> 标签：sql-server-2008

我有两张桌子

```
 1) T_SETTLEMENT_Transaction (master table)
        2) T_SETTLEMENT_Activity (child table) 
```

T_SETTLEMENT_Transaction 表中的数据；

```
SettlemtTransactionID(pk) PC_TransactioID  Form_Of_PAyment  AgentName    CreatedeDateTime         PaymentTransaDate
1000                       1753014          CASH              Test1       2013-01-10 21:00:00.937  2013-01-10 21:00:00.937
1001                       1456325          Check             test2       2013-01-10 21:00:00.937  2013-01-10 21:00:00.937 
```

T_SETTLEMENT_Activity 表中的数据；

```
SettlementActivity_ID(pk)   SettlementTransactionID(foreighKey) RoutingNumber  SettlementAmount   SettlemtDate             SettlementStatus SettlementType Bank_Account_NUM
 1                             1000                                1111111111     525            2013-01-10 21:00:00.937       PEND             STL       1234567890
 2                             1001                                1111111122     625             2013-01-10 21:00:00.937       PEND             STL       1234567891
 3                             1000                                1111111111     25             2013-01-13 21:10:00.937       PEND             FEE       1234567890 
```

需求场景是：

1)

```
 Im selecting records based on "date" , "PEND" & "STL" status from 
 "settlementDate", "settlement_status" and "settlemnt_trans_type" columns. 
```

2)

```
 If "STL" status record is having "FEE" record then i should add
  SettlementAmount of "FEE" record to "STL" record and only "STL" record should be retrieved.
  (we are checking "STL" is having "FEE" record or Not based on Settlement_TransactionId column (Pls refer the tables i mentioned above)). 
```

3)

```
 I would insert the "FEE" record for same Settlement_TransactionID 
 (eg.for Settlement_TransactionID=1000 )on same day of inserting "STL" record(if im having FEE record for that) or after 3 days(approx 3 or 5 days)  with different SETTLEMENT_DATE(which is in  
 selected column ). 
```

请参阅下面显示的（预期输出）表数据，它告诉我想要的预期输出

我加入两个如下表

```
 SELECT DISTINCT sum(xa.SETTLEMENT_AMOUNT) AMT,
                xa.ROUTING_NUMBER,
                xa.BANK_ACCOUNT_NUM,
                xa.SETTLEMENT_DATE   
                xa.SETTLEMENT_TRANSACTION_ID
                xt.PAYMENT_AGENT_NAME
                xt.PC_TRANSACTION_ID
                xt.CREATED_DATE_TIME,
                xt.PAYMENT_TRANS_DATE
                        FROM
    PCTransDB.dbo.T_SETTLEMENT_Transaction xt,
    PCTransDB.dbo.T_SETTLEMENT_Activity xa
    with (NOLOCK)
    where xa.SETTLEMENT_DATE <='2013-01-10 21:00:00.937'
     and xa.SETTLEMENT_STATUS='PEND'
     and xa.SETTLEMENT_TRANS_TYPE in('FEE','STL')
     and xt.SETTLEMENT_TRANSACTION_ID=xa.SETTLEMENT_TRANSACTION_ID 
            group by xa.SETTLEMENT_TRANSACTION_ID,
                     xa.ROUTING_NUMBER,
                     xa.BANK_ACCOUNT_NUM,
                     xa.SETTLEMENT_DATE  
                     xa.SETTLEMENT_TRANSACTION_ID 
                     xt.PAYMENT_AGENT_NAME
                     xt.PC_TRANSACTION_ID
                     xt.CREATED_DATE_TIME,
                     xt.PAYMENT_TRANS_DATE; 
```

上述查询的当前输出是

```
 AMT    Routing Number    Bank_Account_Num  SETTLEMENT_DATE       SETTLEMENT_TRANSACTION_ID PAYMENT_AGENT_NAME  PC_TRANSACTION_ID  CREATED_DATE_TIME        PAYMENT_TRANS_DATE
525.00    111111111     1234567890          2013-01-01 20:00:00.0   1000                    TEST                171477             2012-06-25 00:00:00.0       2012-06-25 00:00:00.0
25.00      111111111    1234567890          2013-01-02 20:10:00.0   1000                    TEST                 171477            2012-06-  25 00:00:00.0  2012-06-25 00:00:00.0
625.00   111111122       1234567891         2013-01-01 20:00:00.0   1001                    TEST1               171478             2012-06-25 00:00:00.0    2012-12-25 21:00:00.0 
```

但我的预期输出如下

```
 AMT    Routing Number    Bank_Account_Num  SETTLEMENT_DATE       SETTLEMENT_TRANSACTION_ID PAYMENT_AGENT_NAME  PC_TRANSACTION_ID  CREATED_DATE_TIME        PAYMENT_TRANS_DATE
550.00    111111111     1234567890          2013-01-02 20:10:00.0   1000                    TEST                171477             2012-06-25 00:00:00.0       2012-06-25 00:00:00.0

625.00   111111122       1234567891         2013-01-01 20:00:00.0   1001                    TEST1               171478             2012-06-25 00:00:00.0    2012-12-25 21:00:00.0 
```

如果我在查询中出错以获得预期的输出，请纠正我。

注意：我在这里粘贴我的表格列：

T_SETTLEMENT_TRANSACTION

```
 SETTLEMENT_TRANSACTION_ID     NUMERIC(12,0)
    PC_TRANSACTION_ID             NUMERIC(12,0)
    PAYMENT_SOURCE_SYSTEM         VARCHAR(9)
    TRANSACTION_AMOUNT            NUMERIC(9,2)
    PAYMENT_AGENT_ID              VARCHAR(10)
    PAYMENT_AGENCY_ID             VARCHAR(10)
    USER_CLUB_CODE                VARCHAR(3)
    FORM_OF_PAYMENT               VARCHAR(4)
    PAYMENT_TRANS_DATE            DATETIME
    PAYMENT_USERREPO_AGENT_ID   VARCHAR(20)
    PAYMENT_AGENT_STATE           VARCHAR(10)
    PAYMENT_AGENT_NAME            VARCHAR(100)
    ACH_REJECT_COUNTER            BIGINT
    CREATED_BATCH_ID              VARCHAR(50)
    CREATED_DATE_TIME             DATETIME 
```

2) T_SETTLEMENT_ACTIVITY

```
 SETTLEMENT_ACTIVITY_ID          NUMERIC(12,0)
     SETTLEMENT_TRANSACTION_ID       NUMERIC(12,0)
     ORDER_TRACE_NUMBER              VARCHAR(15)
     SETTLEMENT_STATUS               VARCHAR(10)
     SETTLEMENT_TRANS_TYPE           VARCHAR(10)
     SETTLEMENT_AMOUNT               NUMERIC(9,2)
     ROUTING_NUMBER                  VARCHAR(9)
     BANK_ACCOUNT_NUM                VARCHAR(20)
     SETTLEMENT_DATE                 DATETIME
     ACH_SUBMISSION_DATE_TIMESTAMP     DATETIME
     ACH_REJECT_CODE                 VARCHAR(10)
     ACH_TRACE_NUMBER                VARCHAR(15)
     ACH_RETURN_TRACE_NUMBER         VARCHAR(15)
     CREATED_BATCH_ID                VARCHAR(50)
     CREATED_DATE_TIME               DATETIME
     TRANS_XREF                      NUMERIC(12,0)
     NSF_XREF                        NUMERIC(12,0)
     MODIFIED_BY                     VARCHAR(50)
     LAST_MODIFIED_DATE_TIME         DATETIME
     SETTLEMENT_CANCEL_REASONCODE     VARCHAR(10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:06:57.170

此查询似乎产生了所需的输出。但是您发布的查询可能无法运行，示例数据也无法正常工作。“BANK_ACCOUNT_NUM”列不与任何示例数据相关联，它位于 GROUP BY 子句中，因此可能会让您失望。

```
SELECT DISTINCT sum(xa.SETTLEMENT_AMOUNT) AMT,
                xa.ROUTING_NUMBER,
                xa.BANK_ACCOUNT_NUM,
                xa.SETTLEMENT_DATE,
                xa.SETTLEMENT_TRANSACTION_ID,
                xt.PAYMENT_AGENT_NAME,
                xt.PC_TRANSACTION_ID,
                xt.CREATED_DATE_TIME,
                xt.PAYMENT_TRANS_DATE
FROM
    T_SETTLEMENT_Transaction xt,
    T_SETTLEMENT_Activity xa
where xa.SETTLEMENT_DATE <='2013-01-10 21:00:00.937'
  and xa.SETTLEMENT_STATUS='PEND'
  and xa.SETTLEMENT_TRANS_TYPE in('FEE','STL')
  and xt.SETTLEMENT_TRANSACTION_ID=xa.SETTLEMENT_TRANSACTION_ID 
group by xa.SETTLEMENT_TRANSACTION_ID,
         xa.ROUTING_NUMBER,
         xa.BANK_ACCOUNT_NUM,
         xa.SETTLEMENT_DATE,
         xa.SETTLEMENT_TRANSACTION_ID, 
         xt.PAYMENT_AGENT_NAME,
         xt.PC_TRANSACTION_ID,
         xt.CREATED_DATE_TIME,
         xt.PAYMENT_TRANS_DATE; 
```

在解决 SQL 问题时，将其简化为这样通常会有所帮助。

```
SELECT DISTINCT 
    sum(xa.SETTLEMENT_AMOUNT) AMT,
    xa.SETTLEMENT_TRANSACTION_ID
FROM
    T_SETTLEMENT_Transaction xt,
    T_SETTLEMENT_Activity xa
where xt.SETTLEMENT_TRANSACTION_ID=xa.SETTLEMENT_TRANSACTION_ID 
group by xa.SETTLEMENT_TRANSACTION_ID; 
```

如果可行，您可以添加更多列和 WHERE 条件。

在未来发布工作 DDL 和 SQL INSERT 语句。这将使这里的人们只需粘贴代码并运行它。比试图找出所有列错误命名、数据截断和误导性数据要快得多。

# javascript - 检测键盘是否连接到 Windows Surface？

> ID：14153169
> 
> 赞同：4
> 
> 时间：2013-01-04T07:46:28.497
> 
> 标签：javascript, c++, windows-8, tablet

我试图检测键盘何时与表面连接或分离。目前我正在做的是每 1 秒通过 SetInterval 设置一个函数，然后调用 API 进行鼠标检测（显然键盘总是返回 true）。

```
var mouse = new Windows.Devices.Input.MouseCapabilities(). 
```

基于返回值，我正在做我的工作。一切正常，但速度很慢。

我可以做点别的吗？喜欢而不是 pull ，是他们的东西 push 相当于这个。

将东西从 Js 转移到 Cpp 会改善这一点吗？如果是，该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:00:42.600

仅通过浏览 API 文档，我认为[DeviceWatcher](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.devicewatcher.aspx)事件可能就是您正在寻找的。

# joomla - 在 joomla 网站上使用 Curl 登录

> ID：14153173
> 
> 赞同：0
> 
> 时间：2013-01-04T07:46:53.953
> 
> 标签：joomla

我无法让 php curl 登录到 joomla 网站。我无权访问该站点以下是我使用的类似代码。这是https网站。它给我的对象已移至此处。

```
<?php
$uname = $_POST['username'];
$upswd = $_POST['password'];
$url = "https://www.mytestjoomla.com/index.php?option=com_user&view=login";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url );
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );
curl_setopt($ch, CURLOPT_COOKIESESSION, TRUE );
curl_setopt($ch, CURLOPT_COOKIEJAR, realpath('./cookie.txt'));
curl_setopt($ch, CURLOPT_COOKIEFILE, realpath('./cookie.txt'));
curl_setopt($ch, CURLOPT_HEADER, TRUE );
$ret = curl_exec($ch);
if (!preg_match('/name="([a-zA-z0-9]{32})"/', $ret, $spoof)) {
    preg_match("/name='([a-zA-z0-9]{32})'/", $ret, $spoof);
}

// POST fields
$postfields = array();
$postfields['username'] = urlencode($uname);
$postfields['passwd'] = urlencode($upswd);
$postfields['option'] = 'com_user';
$postfields['task'] = 'login';
$postfields[$spoof[1]] = '1';
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
echo $ret = curl_exec($ch);

// Get logged in cookie and pass it to the browser
preg_match('/^Set-Cookie: (.*?);/m', $ret, $m);
$cookie=explode('=',$m[1]);
setcookie($cookie[0], $cookie[1]);
?> 
```

# jquery - jquery追加多个内容，只需要一个

> ID：14153176
> 
> 赞同：-2
> 
> 时间：2013-01-04T07:47:02.927
> 
> 标签：jquery, append

多个内容只需要其中之一。

```
 switch (clickedcount){
        case 1:
            var i = $("<a> 1 content </a>");
            break;
        case 2:
            var i = $("<a> 2 content </a>");
            break;
        case 3:
            var i = $("<a> 3 content </a>");
            break;
        case 4:
            var i = $("<a> 4 content </a>");
            break;
        case 5:
            var i = $("<a> 5 content </a>");
            break;             
    }

    clickedcount++;
    b.append(i); 
```

只需要他们一个。

看看这个 [http://jsfiddle.net/huZzq/7/](http://jsfiddle.net/huZzq/7/) [http://jsfiddle.net/huZzq/8/](http://jsfiddle.net/huZzq/8/)

对不起，我的英语太差了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:01:51.927

在您之前的问题中发布答案和评论...检查...

在我的代码中使用`html()`并进行了一些修改..

无论如何..

这是[小提琴](http://jsfiddle.net/huZzq/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:54:21.270

虽然我无法理解这个问题，但我认为您每次点击只想打印一个项目。

`.html()`在这里使用而不是`.append()`

这将在每次单击时仅打印一项：

```
 switch (clickedcount){
        case 1:
            var i = $("<a> 1 content </a>");
            break;
        case 2:
            var i = $("<a> 2 content </a>");
            break;
        case 3:
            var i = $("<a> 3 content </a>");
            break;
        case 4:
            var i = $("<a> 4 content </a>");
            break;
        case 5:
            var i = $("<a> 5 content </a>");
            break;             
    }

    clickedcount++;
    b.html(i);
    //^^^^---------html replaces the old content. 
```

# c# - 如何绑定列表 到调度器

> ID：14153177
> 
> 赞同：0
> 
> 时间：2013-01-04T07:47:03.170
> 
> 标签：c#, .net, winforms, devexpress

我有一个类 myclass，它从 Appointment 扩展而来。现在我有一个调度程序，我将 schedulerStorage.Appoinments.Datasource 的数据源设置为 myclass。在运行时我创建一个列表并将其设置为数据源。在我看来，调度程序应该将列表中的 myclass 对象作为 Appoinments。但调度程序不显示任何内容。找不到一个约会。

有人可以告诉我如何以正确的方式将对象列表绑定到调度程序？我想误会了什么。

测试：

```
storage1.Appointments.DataSource = myListWithCustomAppointments;
storage1.RefreshData();
MessageBox.Show(Convert.ToString(storage1.Appointments.Count)); 
```

测试给我的数字是 6，这是正确的。但调度程序不显示约会。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:45:39.440

我失败了映射。您必须将类的一些属性映射到 Appointment 类的属性。最简单的方法是如果您从约会中延长。

# javascript - Redis 自动发布新条目

> ID：14153179
> 
> 赞同：3
> 
> 时间：2013-01-04T07:47:08.163
> 
> 标签：javascript, node.js, redis, publish-subscribe

我有一个 Web 服务，它非常频繁地向 Redis 服务器写入新条目，并且我有一个 NodeJS 应用程序，它将与 Redis 服务器交互。我意识到我可能会问一个过去以多种形式提出的问题，但我必须问一下，以免我花更多时间在圈子里寻找答案，但是“我的 NodeJS 应用程序服务器有什么方法可以自动收到新条目？'; 类似于 RSS 提要如何自动接收新文章。

我知道 Redis 有一个发布/订阅范式，但我难以理解的是“Redis 可以在收到新条目时自动发布它们吗？” 此外，Redis 是否可以在收到特定键时自动发布新条目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:56:58.163

node.js 有 redis 客户端。找到一个实现完整协议的协议，包括`subscribe`.

订阅（或模式的 psubscribe）使用 a`key`来指定连接通道。因此，例如（使用[https://github.com/mranney/node_redis](https://github.com/mranney/node_redis)）

```
connection.on("message", function (channel, message) {
   if (channel == "myInterestingChannel") {
       console.log(message);
   } else if (channel == "anotherChannel") {
       console.warn(message);
   }
}

connection.subscribe("myInterestingChannel");
connection.subscribe("anotherChannel"); 
```

然后，当您希望您的 node.js 代码了解这些渠道之一中的某些内容时，只需发布​​一条消息。例如在 python 的 redis 客户端中：

```
connection.publish("myInterestingChannel", "poop goes in the potty"); 
```

在您的问题中，您问“此外，Redis 是否可以在收到特定密钥时自动发布新条目？”

如果您将它们发布到正在订阅的频道上，则可以。但是，当您执行类似的操作时，它不能自动发布

```
connection.set("myInterestingChannel", "some other message") 
```

相反，如果您想存储它并让您的节点应用程序知道，您可以最轻松地执行以下操作：

```
msg = "some other message"
connection.set("some key", msg)
connection.publish("myInterestingChannel", msg) 
```

# magento - 在 Magento 中如何获取 AccessToken 和 Access Secret Token

> ID：14153181
> 
> 赞同：2
> 
> 时间：2013-01-04T07:47:12.707
> 
> 标签：magento, magento-1.7, magento-1.4

我已将 Advanced Rest Client 安装到我的 chrome 中。从我的 magento 我可以从管理面板获取消费者密钥和密钥。我试图从链接[http://term.ie/oauth/example/client.php](http://term.ie/oauth/example/client.php)获取令牌，但它以以下方式返回..这里没有令牌密钥..

```
request url: ://192.168.1.101:8000/magento/admin/oauth/token ?oauth_version=1.0&oauth_nonce=XXXXXXXXX&oauth_timestamp=XXXXXXX&oauth_consumer_key=xxxxxxxxx&oauth_signature_method=HMAC-SHA1&oauth_signature=xxxxxxxxx%3D
OAuthRequest Object
(
    [parameters:OAuthRequest:private] => Array
        (
            [oauth_version] => 1.0
            [oauth_nonce] => XXXXXXXXXX
            [oauth_timestamp] => XXXXXXX
            [oauth_consumer_key] => XXXXXXXXXXXXXXXXXXXXXXXXXXX
            [oauth_signature_method] => HMAC-SHA1
            [oauth_signature] => XXXXXXXXXXXXXXXXXXXX=
        )

    [http_method:OAuthRequest:private] => GET
    [http_url:OAuthRequest:private] => 192.168.1.101:8010/magento/admin/oauth/token 
    [base_string] => GET&%3A%2F%2F192.168.1.101%2Fmagento%2Fadmin%2Foauth%2Ftoken%20&oauth_consumer_key%XXXXXXXXXXXXXXXXXXXXXXX%26oauth_nonce%XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX%26oauth_signature_method%XXXXXXXXXX%26oauth_timestamp%XXXXXXXXX%26oauth_version%3D1.0
) 
```

所以建议我如何获得访问令牌和访问秘密令牌....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T12:40:37.907

据我说，您已经**为 REST**和**OAUTH 消费者**创建了管理员角色，所以我将跳过它。

在根目录下创建下面的 test.php 文件。将 CONSUMERKEY 和 CONSUMERSECRET 替换为您的值。

```
<?php
/**

* Example of update product record via Magento REST API. OAuth authorization is used

*/

$callbackUrl = "http://yourhost/test.php";
$temporaryCredentialsRequestUrl = "http://yourhost/oauth/initiate?oauth_callback=" . urlencode($callbackUrl);
$adminAuthorizationUrl = 'http://yourhost/admin/oauth_authorize';
$accessTokenRequestUrl = 'http://yourhost/oauth/token';
$apiUrl = 'http://yourhost/api/rest';
$consumerKey = '[your consumer key here]';
$consumerSecret = '[your consumer Secret here]';

echo "<pre/>";

session_start();

if (!isset($_GET['oauth_token']) && isset($_SESSION['state']) && $_SESSION['state'] == 1) {

$_SESSION['state'] = 0;

}

try {

$authType = ($_SESSION['state'] == 2) ? OAUTH_AUTH_TYPE_AUTHORIZATION : OAUTH_AUTH_TYPE_URI;

$oauthClient = new OAuth($consumerKey, $consumerSecret, OAUTH_SIG_METHOD_HMACSHA1, $authType);

$oauthClient->enableDebug();

$oauthClient->disableSSLChecks();

if (!isset($_GET['oauth_token']) && !$_SESSION['state']) {

$requestToken = $oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
echo "<pre>";print_r($requestToken);die();
$_SESSION['secret'] = $requestToken['oauth_token_secret'];

$_SESSION['state'] = 1;

header("Location: " . $adminAuthorizationUrl . "?oauth_token=" . $requestToken['oauth_token']);

exit;

} 
```

?>

上面的输出应该是数组

```
Array
(
    [oauth_token] => "tokenkey"
    [oauth_token_secret] => "token secret"
    [oauth_callback_confirmed] => true
) 
```

希望这对你有帮助。

# ios - 从导航控制器弹出时如何保持在同一个选项卡中

> ID：14153184
> 
> 赞同：0
> 
> 时间：2013-01-04T07:47:23.223
> 
> 标签：ios, uitableview, uibutton, tabbarcontroller, poptoviewcontroller

我的意图是创建一个应用程序，该应用程序具有可单击的 UIButton 的主视图。单击其中一个按钮后，将进入 TabBarController 视图。

例如，当您单击 sample1 按钮时，将自动选择 TabBarController 视图中的第二个选项卡。当您单击 sample2 按钮将转到第三个选项卡时，更多按钮将转到更多选项卡，该选项卡将显示表格视图。

我的问题是当我单击 MoreViewController 中的 UITableViewCell 进入详细视图时。但是，当我想通过单击左上角按钮返回 TabBarController 时。该选项卡将更改为我在主视图中单击的选项卡。

TabBarController 的 selectedIndex 似乎没有改变，即使我在委托方法中设置了值

```
- (void)tableView:(UITableView *)tableView 
didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

或其他地方，例如`viewWillAppear` `viewWillDisappear`，`MoreViewController`仍然，价值`selectedIndex`保持不变。

示例代码在这里-> [http://uploadingit.com/file/qxfbw4cuzjdkk56v/9s.zip](http://uploadingit.com/file/qxfbw4cuzjdkk56v/9s.zip)

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:02:14.637

实际上，您正在使用主导航控制器从主视图推送您的标签栏控制器。因此，它会在 POP 退出时将您带到主视图。

试试这个来创建标签栏

```
tabBar_Controller = [[UITabBarController alloc] init];
NSMutableArray *localControllersArray =[[NSMutableArray alloc]initWithCapacity:2];

firstViewController = [[FirstViewController alloc] initWithNibName:@"firstViewController" bundle:nil];
nav = [[UINavigationController alloc] initWithRootViewController:firstViewController];
nav.tabBarItem.title = @"item1";
nav.navigationBar.barStyle = UIBarStyleBlack;
[localControllersArray addObject:nav];
[self setNav:nil];

secondViewController = [[SecondViewController alloc] initWithNibName:@"secondViewController" bundle:nil];
nav = [[UINavigationController alloc]initWithRootViewController:secondViewController];
nav.tabBarItem.title = @"item2";
[localControllersArray addObject:nav];
[self setNav:nil];

tabBar_Controller.viewControllers = localControllersArray;
tabBar_Controller.delegate = self;
tabBar_Controller.selectedIndex = 0;
[self.window addSubview:tabBar_Controller.view]; 
```

# php - 从表中选择特定的列名

> ID：14153190
> 
> 赞同：0
> 
> 时间：2013-01-04T07:47:50.847
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 查询以获取列名？](https://stackoverflow.com/questions/4165195/mysql-query-to-get-column-names)

我需要查询数据库以获取列/字段名称，不要与表中的数据混淆。例如，如果我有一个名为`wp_deals`包含的表，`deal_id, deal_price, creation_date`那么我想从查询中检索这些字段名称，而不是别的。

所以查询应该是这样的

```
select column_names1,column_name2,column_name3 from table_name. 
```

确保它应该只给出我想要的那些列名，而不是全部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:53:23.590

使用`DESCRIBE`命令。

```
DESCRIBE `table_name`; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:51:16.570

这样做：

```
SELECT COLUMN_NAME1, COLUMN_NAME2 FROM INFORMATION_SCHEMA WHERE TABLE_NAME = 'my_table'; 
```

或者

```
SHOW columns FROM my-table; 
```

阅读更多....

[http://dev.mysql.com/doc/refman/5.0/en/columns-table.html](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T07:51:50.640

```
SELECT `COLUMN_NAME` 
FROM `INFORMATION_SCHEMA`.`COLUMNS` 
WHERE `TABLE_SCHEMA`='yourdatabasename' 
    AND `TABLE_NAME`='yourtablename'; 
```

致谢：@ircmaxell

参考：[这篇文章](https://stackoverflow.com/questions/4165195/mysql-query-to-get-column-names)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T07:53:25.950

试试这个并检查这个链接[**COLUMNS Table**](http://dev.mysql.com/doc/refman/5.5/en/columns-table.html)：

```
SELECT GROUP_CONCAT(COLUMN_NAME) 
FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'dbName' AND TABLE_NAME = 'tableName'; 
```

# php - 如何在wordpress中使用提交的数据cformsll插件并单独存储在数据库中

> ID：14153194
> 
> 赞同：1
> 
> 时间：2013-01-04T07:48:32.903
> 
> 标签：php, database, wordpress

我正在使用 cformsll [http://www.deliciousdays.com/cforms-plugin/](http://www.deliciousdays.com/cforms-plugin/)插件并创建了一个联系表格（名称='投票表格'）并将其插入**投票**页面

```
<!--cforms name="Polling Form"--> 
```

**为了显示数据，我在轮询**页面上编写代码如下

```
<!--cforms name="Polling Form"-->

<?php
$array = get_cforms_entries();   /* all data, no filters */

echo '<table>';
echo '<tr><th>Name</th><th>Email</th><th>Website</th></tr>';
foreach( $array as $e ){
    echo '<tr><td>' . $e['data']['Your Name'] . '</td><td>' . $e['data']['Email'] . '</td><td>' . $e['data']['Website'] . '</td><tr>';
}
echo '</table>';
?> 
```

但是当我提交页面时什么都没有发生并且警告即将到来

```
Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\wordpress-test\wp-content\plugins\exec-php\includes\runtime.php(42) : eval()’d code on line 8 
```

我搜索了很多论坛，但无法获得如何使用提交的数据并单独存储在数据库中的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:26:36.713

我正在使用您现在拥有的代码的变体，它工作正常。我认为您遇到的问题是您正在尝试使用 2 年未维护的插件在页面上执行 PHP：

[http://wordpress.org/extend/plugins/exec-php/](http://wordpress.org/extend/plugins/exec-php/)

您需要将代码取出到主题的函数文件中，并创建一个短代码，如下所示：

```
function mydatadisplay {
$array = get_cforms_entries();   /* all data, no filters */

/* CHECK TO SEE IF YOU HAVE DATA. Otherwise, your script may fail */
if (! $array) {echo '<p>Query returned no results.</p>'; } else {

/* OK, we have data, so let's display it */

echo '<table>';

echo '<tr><th>Name</th><th>Email</th><th>Website</th></tr>';

foreach( $array as $e ){
echo '<tr><td>' . $e['data']['Your Name'] . '</td><td>' . $e['data']['Email'] . '</td>        <td>' . $e['data']['Website'] . '</td><tr>';}

echo '</table>'; }
}

add_shortcode('myshortcode', 'mydatadisplay'); 
```

然后在您的页面中调用简码：

```
[myshortcode] 
```

# nosql - 我可以按键排序并随机分区吗？

> ID：14153195
> 
> 赞同：3
> 
> 时间：2013-01-04T07:48:34.293
> 
> 标签：nosql, cassandra

例如，如果我处理大量事务 [时间戳（键）、值、交易者、..]，我希望进行随机分区以实现负载平衡。

但是为了查询，我希望这些事务按每个节点上的时间戳排序，以便在最后 5 分钟（或其他时间段）内完成所有事务并使用 MapReduce 合并总数会非常快。

如果我使用随机分区器，为什么 cassandra 会对文件中的键进行随机排序？

**Q1：**有解决办法吗？我可以使用索引，但这并不理想。

**Q2。**出于好奇，我想知道为什么一个节点中的键排序与分区策略有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:54:53.703

节点是 Cassandra 是环形式的，环中的每个节点负责键范围（数据集）。这个想法是，在环中的所有节点上平均分配数据，另外独立地执行每个写入操作 - 这样我们就不需要跟踪最后的更新来平衡环中的数据。

Random Partitioner 使用[Consistent Hashing](http://en.wikipedia.org/wiki/Consistent_hashing)将行键存储在随机节点上，以便以后找到它们。它基本上生成真实行键的哈希（这是BigInteger），并在环中找到负责这个哈希的节点（它在这个节点的范围内）。

例如，我们在环中有 4 个节点（为了简单起见，我将使用较小的数字）：

*   节点 1 = initial_token: 0
*   节点 2 = initial_token: 100
*   节点 3 = initial_token: 200
*   节点 4 = initial_token: 300

行键“value1”的哈希值为 23，因此它将存储在节点 1 上

行键“value2”的哈希值为 123，因此它将存储在节点 2 上

为了解决您的问题，您需要编写手动索引，二级索引可能不是完美的想法 - 它有一些限制（低肉体）

# c# - UpdatePanel 在刷新期间未修复

> ID：14153199
> 
> 赞同：-1
> 
> 时间：2013-01-04T07:48:55.027
> 
> 标签：c#, asp.net, ajax, asp.net-ajax, updatepanel

我有整个页面的更新面板。当我单击链接时，会出现相应的更新面板并显示一个网格视图。一旦用户更新网格并单击提交按钮，网格视图就会更新为最新数据。但问题是面板尺寸增加并且网格已经移向页面底部。

```
 <tr>
  <td>  
   <asp:UpdatePanel ID="updatePanelMenu" runat="server">   
                 <ContentTemplate>
  <table>            
    <tr>

<asp:Panel ID="pnlNeedApproval" Visible="false" runat="server" Height="480px" Width="800px" >
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td style="width: 665px">
                <asp:UpdatePanel ID="updatePanelApproval" runat="server">
                  <ContentTemplate>
                     <table class="EditTemplate" width="100%">
                        <tr>
                            <td colspan="6" align="center">
                                <div id="Div9" style="width:800px;HEIGHT:450px">
                                    <igtbl:UltraWebGrid ID="uwgApproval" runat="server" 
                                        DisplayLayout-AutoGenerateColumns="false" Width="800px" 
                                        DataKeyField="Approval_log_ID" OnInitializeRow="uwgApproval_InitializeRow">
                                        <Bands>
                                            <igtbl:UltraGridBand AllowUpdate="Yes"
                                                FixedHeaderIndicator="Button"  AllowRowNumbering="Continuous"  
                                                BaseTableName="Approval_log" DataKeyField="Approval_log_ID" SortingAlgorithm="QuickSort">
                                                <Columns>
                                                    <igtbl:UltraGridColumn BaseColumnName="Approval_log_ID"  Hidden="True" Key="Approval_log_ID" DataType="System.Int32">
                                                        <Header Caption="Approval_log_ID"></Header>
                                                    </igtbl:UltraGridColumn>                                                  
                                                    <igtbl:TemplatedColumn AllowUpdate="Yes" Type="DropDownList" BaseColumnName="Approval_Status"  Key="Approval_Status" >
                                                        <HeaderTemplate>
                                                            <div nowrap>Approve/Reject</div>
                                                        </HeaderTemplate>
                                                        <CellTemplate>
                                                           <asp:DropDownList ID="cboApprovalStatus" Width="110px" runat="server" onchange="SetApprovalStatus(this);">
                                                               <asp:ListItem  value="2"><--Select One--></asp:ListItem>
                                                                <asp:ListItem  value="0">Reject</asp:ListItem>
                                                                <asp:ListItem  value="1">Approve</asp:ListItem>
                                                            </asp:DropDownList>
                                                        </CellTemplate>
                                                     </igtbl:TemplatedColumn>  
                                                     <igtbl:UltraGridColumn BaseColumnName="APPROVAL_TYPE" Key="APPROVAL_TYPE" Hidden="true">
                                                        <Header Caption="Type">
                                                            <RowLayoutColumnInfo OriginX="1" />
                                                        </Header>
                                                        <Footer>
                                                            <RowLayoutColumnInfo OriginX="1" />
                                                        </Footer>
                                                    </igtbl:UltraGridColumn>
                                                    <igtbl:UltraGridColumn BaseColumnName="Assigned_By" Key="Assigned_By" Hidden="true">
                                                        <Header Caption="Assigned_By"></Header>
                                                    </igtbl:UltraGridColumn>
                                                    <igtbl:UltraGridColumn BaseColumnName="CommonKey" Key="CommonKey" Hidden="true">
                                                        <Header Caption="CommonKey"></Header>
                                                    </igtbl:UltraGridColumn>
                                                </Columns>
                                            </igtbl:UltraGridBand>
                                        </Bands>
                                    </igtbl:UltraWebGrid>
                                </div>
                            </td>
                        </tr>
                       <tr> 
                            <td colspan="6" align="center">
                                <asp:Button ID="btnApprovalSubmit" CssClass="inputbut" OnClick="btnApprovalSubmit_serverclick" runat="server" Text="Submit" ></asp:Button>
                                <asp:Button ID="btnApprovalReset" CssClass="inputbut" OnClick="btnApprovalReset_serverclick" runat="server" Text="Reset"  ></asp:Button> 
                            </td>
                        </tr>
                    </table>
                </ContentTemplate>
                </asp:UpdatePanel> 
            </td>
        </tr>

    </table>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:45:10.550

我在那个代码上看到你有两个`UpdatePanels`一个在另一个里面。这可能会引起问题，一个就足够了 - 外部的 UpdatePanel 也在更新另一个的内部内容。

最好删除内部的 UpdatePanel，并且通常您使用更多的 UpdatePanel，只有您要区分某些操作。还要记住，UpdatePanel 内部的内容会发生变化，所以它的内容必须是完整的渲染代码，而不是它的一部分，例如，不是表格的一部分，而是完整的表格。

# events - 如何使用 Meteor js 触发自定义事件

> ID：14153205
> 
> 赞同：6
> 
> 时间：2013-01-04T07:49:43.490
> 
> 标签：events, meteor

是否可以使用 Meteor 触发自定义事件？我看到触发自定义 jquery 事件不起作用，因为 Meteor 事件与 jQuery 是分开的（[如此处所述](https://stackoverflow.com/questions/10646570/how-to-handle-custom-jquery-events-in-meteor)）。

所以如果我有类似的东西：

```
Template.foo.events({
    'mouseenter .box, makeSelected .box': function() { ... }
}) 
```

如果我可以按照以下方式做一些事情，那就太好了：

```
Meteor.trigger($('.box')[0], 'makeSelected') 
```

我目前的解决方法是将我想要的 id 存储在`data-id="{{_id}}"`dom 元素上，然后使用它来修改 Session 中的键，但是能够触发事件感觉更“干”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:03:00.790

Meteor 目前似乎不支持自定义事件，但您始终可以使用 jQuery（或任何您想要的）创建自定义事件，然后确保`rendered`通过模板上的事件将它们重新附加到各自的元素：

```
Template.foo.rendered = function() {
  attachEvents();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-29T19:35:43.067

显然，这现在可以使用 jQuery 事件触发和标准 Meteor 事件监听语法。查看 Bootstrap 轮播的代码，它通过执行以下操作发出自定义 jQuery 事件：

```
var slideEvent = $.Event('slide.bs.carousel', {
    // event state
})
this.$element.trigger(slideEvent) 
```

我通过以下方式成功收听了此事件：

```
Template.carousel.events({
    'slide.bs.carousel': function (event, template) {
        // event handler code here...
    }
}); 
```

Bootstrap (jQuery) 事件与 Meteor 的结合让我感到惊喜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T02:48:45.787

Meteor 在您以 jQuery 方式触发事件时做出反应（假设已安装）

```
$('.box').mouseenter(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-26T14:59:02.457

单击`#showOffered`将 设置`#searchFilter`为特殊值并过滤结果（未显示）：

```
<template name="brokerProducts">
            <div class="input-group">
              <input id="searchFilter" type="text" class="filter form-control" placeholder="Search for ..." value="{{filterValue}}">
              <span id="showOffered" class="btn input-group-addon">Show Offered</span>
            </div>
</template> 
```

这些事件对我有用。单击设置值并触发过滤结果的输入事件（未显示）：

```
Template.brokerProducts.events({
  'input .filter': (event, templateInstance) => {
    templateInstance.filter.set(event.currentTarget.value);
  },
  'click #showOffered': (event, templateInstance) => {
    $('input#searchFilter').val('show:offered').trigger('input');
  }
}) 
```

# javascript - 我想在模式窗口中显示 PDF ajax 响应

> ID：14153207
> 
> 赞同：4
> 
> 时间：2013-01-04T07:50:05.257
> 
> 标签：javascript, html, jquery

使用 ajax 我将响应作为 PDF base64 数据。在此示例中，我在新窗口中显示它，而不是我想在模式弹出窗口中显示 PDF。有没有办法做到这一点？

```
$.ajax({
        type : "POST",
        url : getPrintablePDF,
        dataType : "json",
        contentType : 'application/json; charset=utf-8',
        data : JSON.stringify(params),
        success : function(data) {
            //console.log(data);
            var myResponse = eval(data);
            window.open('data:application/pdf;base64,' + myResponse.base64EncodedResponse);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T07:53:20.547

### 尝试使用`<object />`or`<embed />`或使用`<iframe />`

我举一个例子，`<iframe />`因为它受到所有浏览器的支持。

```
$.ajax({
    type : "POST",
    url : getPrintablePDF,
    dataType : "json",
    contentType : 'application/json; charset=utf-8',
    data : JSON.stringify(params),
    success : function(data) {
        var myResponse = eval(data);
        $("<iframe />") // create an iframe
          // add the source
          .attr('src', 'data:application/pdf;base64,' + myResponse.base64EncodedResponse)
          .appendTo('.modal-body'); // append to modal body or wherever you want
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T12:05:30.167

我根据这篇[文章让它工作](http://www.anujvarma.com/rendering-pdf-in-a-modal-popup-asp-net-mvc/)

您需要有一个返回文件的控制器操作：

```
 [HttpGet]
    public async Task<ActionResult> Print(int? poId) {
        if (poId == null) {
            return Json(new { success = true, errorMessage = "Could not find purchase order!" }, JsonRequestBehavior.AllowGet);
        }

        try {
            PurchaseOrderWork dal = new PurchaseOrderWork(db);
            var db_po = await dal.GetAsyncPurchaseOrderById(poId.Value);

            var viewModel = GetEntryViewModel(db_po);
            var file = ControllerContext.GeneratePdf(viewModel, "_PrintOut");
            ViewBag.ID = poId;
            return File(file, "application/pdf");
        }
        catch (DataException ex) {
            return Json(new { success = true, errorMessage = "Failed to extract purchase order!", errorDetails = ex.Message },JsonRequestBehavior.AllowGet);
        }
    } 
```

然后在您的 cshtml 中在您的模态中放置一个 html 对象：

```
<div class=" container row form-horizontal">
<div id="printModal" class="modal fade in" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg print-dialog">
        <div class="modal-content print-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Report ID = @ViewBag.ID</h4>
            </div>
            <div class="modal-body">
                <div id="detailAlert" class="alert alert-danger display-hide">
                    <button class="close" data-close="alert"></button>
                    <span>Some Errors have occured!</span>
                </div>
                <div class="form-group">
                    <object id="pdfbox" style="width: 100%; height: 800px; overflow:hidden"
                            type="application/pdf" data="@Url.Action("Print", "PurchaseOrders", new { poId=10 })"></object></object>
                </div>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn green-haze btn-outline pull-left">
                    <span><i class="fa fa-fw fa-save"></i></span>&nbsp; Save
                </button>
                <button type="button" data-dismiss="modal" class="btn dark btn-outline">Close</button>
            </div>
        </div>
    </div>
</div> 
```

最后传递`url`给你的`html object`：

```
 function PrintOrder(poId) {
    var url = '/PurchaseOrders/Print?poId=' + poId;
  //  $.get(url, function (data) {
        $('#printModal').find('object').prop('data', url);
        $('#printModal').modal('show');
  //  });
} 
```

请评论此代码是否可以改进

# entity-framework - 无法确定相关操作的有效排序

> ID：14153208
> 
> 赞同：25
> 
> 时间：2013-01-04T07:50:13.613
> 
> 标签：entity-framework

这是我的模型

```
public string Content { get; set; }

public Faq Reply { set; get; }

public int? ReplyId { get; set; }

public ICollection<Faq> Children { get; set; }

[ForeignKey("WriterId")]
public virtual UserProfile Writer { get; set; }

public virtual int? WriterId { get; set; }

public Status Status { get; set; }

[ForeignKey("DepartmentId")]
public virtual Department Department { get; set; }

public virtual int? DepartmentId { get; set; } 
```

这是我的错误

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-10T16:29:31.673

另一个可能的原因是外键属性设置不正确。

例如，这可能发生在以下场景中：

1.  DepartmentId 设置为零或任何其他不是有效外键的值。
2.  Department 或者为 null，或者它是一个 Department 对象，该对象包含其自己的 DepartmentId 属性的 null 值。
3.  此配置将导致 Entity Framework 失败，因为它尝试查找主键为零的部门，而该部门可能不存在。

当我将一个对象映射到另一个对象并且我错误地将外键设置为零而不是将其设置为空时，我遇到了这个异常。

在没有看到属性的实际值的情况下，我不能说这种配置是导致您的异常的原因，但这是一种可能性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-04T16:52:16.097

避免此错误的简单方法是首先创建主对象 SaveChanges，然后在再次调用 SaveChanges 之前创建依赖对象。

在这种情况下，首先创建上面显示的对象 SaveChanges，然后创建 Faq 子对象，将其添加到集合中并将其设置为回复，然后再次设置 SaveChanges。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-06T19:16:07.647

FWIW，我刚刚花了一个上午在 EF 6.1 中调试了一个类似的问题。在我的情况下，这是由于意外混合了不同上下文拥有的对象：在一个上下文拥有的对象中设置导航属性的值，以及不同上下文拥有的对象。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-18T15:15:02.980

我有一个具有自引用导航属性的实体类。如果与该导航属性关联的外键属性设置为零，则会失败并出现此错误。

如果我将它设置为另一个无效值，例如 -1 或数据库中不存在的另一个值，它不会收到此错误。如果我更改导航属性以引用错误的实体（因此它不是自引用的），即使使用零也不会出现此错误。

所以显然 EF 为自引用导航属性做了一些特殊的零。我知道该关系定义正确，因为我使用它的查询提取了正确的数据。

我能够通过使用 null 而不是零来解决我的问题。无论如何，这对我来说确实是合适的价值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-11T17:53:56.673

在我的情况下，这是由于在创建过程中将新的依赖对象嵌套在另一个新对象中引起的，如下所示：

```
var mySecondaryObject = new MyClass1 { ... };
var myPrimaryObject = new MyClass2 { Child = mySecondaryObject, ... };
dbContext.MyClass2Collection.Add(mySecondNewOject);
dbContext.SaveChanges(); 
```

在创建主对象后删除嵌套引用并分配子对象解决了这个问题。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-11-21T15:58:10.890

以下是我们解决此问题的方法。我们有定义了 sql 查询来填充实体的实体。该实体有一列标记为键，并具有插入、更新和删除 CRUD 方法。使用 Oracle 存储过程自动填充键列并在游标中返回。插入新行时出现此错误。

经过研究和调查，我们发现问题是由于插入存储过程作为参数值传递键列，并且在存储过程返回键列自动生成的值时也被填充。

我们从插入 SP 中删除了键列参数，问题得到解决。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-03T18:11:03.550

这发生在我身上。EF 6.1/MVC

IN：公共 ActionResult 创建（OfficeRecordModel officeData）

我们有：

```
Office newOffice = new Office();
newOffice.Parent = officeData.Parent;
newOffice.Level = officeData.Level != null ? officeData.Level.Value : -1;
newOffice.ShortName = officeData.ShortName.Trim();
newOffice.LongName = officeData.LongName.Trim();
newOffice.IsActive = officeData.IsActive;                        
dbCtxt.Office.Add(newOffice);
dbCtxt.SaveChanges(); 
```

我得到：{“无法确定依赖操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。”}

办公实体：

```
public int ID { get; set; }
public Nullable<int> Parent { get; set; }
public int Level { get; set; }
public string ShortName { get; set; }
public string LongName { get; set; }
public bool IsActive { get; set; } 
```

Office 表有一个我们没有设置的身份 ID。所以.. EF 使用 0。好吧，我们在 Office 表中有一条 ID=0 记录（此递归自引用表中的根办公室）。

为了解决这个问题，我们将身份 ID 设置为 -1。因此，现有密钥中不再有冲突。-1 最终被忽略并设置身份。

添加：newOffice.ID = -1；成功了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-24T11:25:59.040

可能晚了，但我遇到了同样的问题并解决了这个问题。如果有父级，则将子级添加到父子级属性，如果不只是保存对象。

```
 using (var context = new MyEntities())
            {
                child.CreatedOn = DateTime.Now;

                if (child.ParentId == null)
                {
                    context.Things.Add(child);
                }
                else
                {
                    var parent = context.Things.Where(x => x.Id == child.ParentId).SingleOrDefault();

                    if(parent == null)
                    {
                        return false;
                    }

                    parent.Things.Add(child);
                }

                context.SaveChanges();

                return true;
            } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-17T10:39:08.693

当您有两个关系时，我创建了一个[示例项目](https://github.com/AndiRudi/UnableToDetermineValidOrdering)来模拟错误。基本上，这个想法是您有一个带有订单列表的客户。然后在您要存储的客户上附加一个属性来标记当前订单。这导致实体框架在一个事务中存储和删除问题的“两个”关系。

最好在订单上创建一个布尔标志“IsCurrent”并对其进行过滤。也可以在客户上创建一个自动进行过滤的属性或扩展。这已经在[这篇](https://stackoverflow.com/questions/8100568/clean-way-to-deal-with-circular-references-in-ef)文章中解释过了。

我认为除了使用两次对 SaveChanges 的调用之外别无他法，这很糟糕，因为你会抛弃 UnitOfWork 的想法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-18T16:19:33.170

所以遇到了这个问题，想分享一下我解决它的方法，不是调用两次保存更改那么简单，但是比那个方法有一些优势。

我有一种情况，我希望所有记录都成功或失败，部分插入子项是不可接受的。我也不想编写代码来删除父级，如果子级失败（如果该代码中有错误，如果该代码失败怎么办等）。

其次，可能有一组记录，我希望所有这些记录在一个事务中成功或失败。本质上，我对 EF 非常具体（我的 EF 版本是 6.1.3）。此外，我只在父子关系中深入了一层，而不是任意数量的深度。

```
int tempId = -1;
int parentTempId = -1;
foreach(var record in recordsToSave)
{
    var childRecords = record.ChildRecords.ToList();

    record.ChildRecords.Clear();

    record.RecId = tempId;
    parentTempId = tempId;
    tempId--;

    _db.Records.Add(record);

    foreach(var childRecord in childRecords)
    {
        childRecord.RecId = tempId;
        childRecord.ParentRecId = parentTempId;
        tempId--;
        _db.Records.Add(childRecord);
    }
}

using (TransactionScope tran = new TransactionScope())
{
    _db.SaveChanges();
    tran.Complete();
} 
```

*   首先，我清除了子集合并将其复制到临时列表中。EF 与我的关系有问题。
*   我创建了一个临时 id 并将其分配给父记录，并将其存储起来供孩子以后使用。
*   我通过我的临时 ID 手动将孩子连接到父母。

它起作用了，它还以一种视觉上吸引人的方式插入了我的数据（至少对我来说）[![在此处输入图像描述](../Images/f5ba6e265b2d9c08905c23e7f0ce62df.png)](https://i.stack.imgur.com/8Zsq2.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-14T21:47:50.630

在我的情况下，由于删除了它们之间具有循环引用的表而产生了此错误。like 数据库不允许我删除页面行，因为它在书表中有针对书签页面的引用。也在这里重现了这种情况。

```
 public class Book
{
   public int Id { get; set; }
   public int Name { get; set; }

   [ForeignKey("BookMarkedPage")]
   public int BookMarkedPageId { get; set; }
   public Page BookMarkedPage { get; set; }
}

public class Page
{
        public int Id { get; set; }

        [ForeignKey("Book")]
        public int BookId { get; set; }
        public Book Book { get; set; }
} 
```

**解析度**

有两种可能的替代方法来解决此错误

1.  在从页表中删除页记录之前，首先从书表中删除书签页引用，然后尝试删除页行

2.  或者不是创建一个循环引用，而是在页表中创建一个位`isbookMarkedPage`来标识一本书的书标记页

```
 public class Book
{
   public int Id { get; set; }
   public int Name { get; set; }
}

public class Page
{
        public int Id { get; set; }

        [ForeignKey("Book")]
        public int BookId { get; set; }
        public Book Book { get; set; }

        public bool IsBookMarkedPage
} 
```

# java - 将用于跳过缺失信息的正则表达式从 python 转换为 java-7

> ID：14153210
> 
> 赞同：1
> 
> 时间：2013-01-04T07:50:25.563
> 
> 标签：java, python, regex, java-7, regex-lookarounds

我有以下测试用例，我需要为其开发一个正则表达式，以便捕获命名组中的特定信息部分。

测试用例是：

```
Title v01
Title v01 c01
Title v01 c01-02
Title c01
Title c01-02 
```

要查找的组是：Title、Volume、ChapterStart 和 ChapterEnd。例如在下面的情况下，这些会捕获

```
Title v02 c05-08
1      2   3  4

1\.        Title: "Title"
2\.       Volume: "02"
3\. ChapterStart: "05"
4\.   ChapterEnd: "08" 
```

唯一的强制性组是 Title，其他是可选的，如上面列出的其他用例场景中所示。

到目前为止，我能够想出以下正则表达式，它成功地处理了前三种情况：

```
(?P<Title>.*)((((( |\.)v))(?P<Volume>\d+))(( |\.)c(?P<ChapterStart>\d+)(-(?P<ChapterEnd>\d+))?)?) 
```

但是，我不知道如何在一个正则表达式中处理最后两种情况，而不必回收组名。组名是静态的，因为接收此正则表达式的程序使用它们来提取特定的信息片段（系列名称、标题、卷和章节编号等）

我现在有两个问题：

1.  如何让正则表达式处理卷信息缺失的情况。

2.  如何将此正则表达式从 python re 兼容性转换为 Java 1.7 正则表达式兼容性，目前无法匹配完全相同的测试用例。（我只通过删除“P”来更改命名组符号）

任何帮助将不胜感激。

注意：标题可以是任意数量的单词，包含大写字母、小写字母、数字、特殊字符、unicode 字符，以空格、点、下划线和/或破折号等分隔。所以唯一的方法是识别结尾是否查找前面有空格字符（空格、点、下划线等）或到达字符串末尾的 av 或 c。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:32:31.280

我对你的正则表达式中括号的数量感到惊讶，所以我重写了它。这是我想出的：

```
(?<Title>.*?)( v(?<Volume>\d+))?( c(?<ChapterStart>\d+)(-(?<ChapterEnd>\d+))?)? 
```

注意几件事：

*   这使用 Java 7 的命名组
*   对于标题，我使用的是 a`reluctant quantifier`这样它就不会占用整个字符串，而不会为卷和章节留下任何内容。[您可以在Pattern api 文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#sum)中阅读有关`reluctant`、`greedy`和`possessive`量词的信息。
*   你的没有`?`后卷组，我相信会导致`Title c01`章节不匹配。
*   你的`( |\.)`在 v 和 c 之前有一个部分。我把它们拿出来是因为它与您的测试用例不匹配，而且您似乎没有表明可以使用句点代替空格。如有必要，您可能必须将其放回原处。

随意适应你的目的。

# php - 如何从下拉菜单中传递 PHP 变量

> ID：14153211
> 
> 赞同：0
> 
> 时间：2013-01-04T07:50:30.540
> 
> 标签：php, javascript, html

您好，我正在制作`<select>`下拉菜单并尝试制作它，因此当有人单击下拉选项之一时，它将打开新窗口，同时单击主页的 PHP 变量选项应传递到该新窗口

谁能告诉我我哪里错了，这是我的代码-

```
 <div class='fieldgroup'>
            <label for=@label>@label</label>
            <select name="@label" title="select optin" style="cursor:pointer;cursor:hand;text-align:center;font-weight:bold;float: left;margin: 10px 0px 0px 0px;height: 25px;">
                <option>@option1</option>
                <option <a href="#" onclick="window.open('@newwindow.php?@value=<?$@value?>','newWindow','width=800,height=600,left=150,top=200,toolbar=no,addressbar=yes,resizable=false');"></a>>@option2</option>
                <option>@optin3</option>
                <option>@optin3</option>
                <option>@option4</option>
                </select>
   </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:04:16.647

专注于它的真正含义：HTML/Javascript 问题。它与PHP无关。尝试一步一步来：

*   在 HTML 中构建一个简单的选择。
*   然后弄清楚如何打开一个窗口。你几乎已经明白了。
*   然后了解[jQuery](http://jquery.com)。它将使您的 Javascript 开发在未来变得更容易和更强大。
*   弄清楚如何在更改所选值时调用操作。（[提示](http://api.jquery.com/change)）
*   然后（也许在一个新示例中）弄清楚如何在更改选择时读出属性。（[提示](http://api.jquery.com/attr/)）
*   一旦你到达那里，把它们放在一起，用 PHP 动态创建你的 html 代码，你就完成了。

通过这种方式，您将了解很多关于事物如何工作以及在哪个世界（HTML、Javascript、PHP）中发生的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:54:58.413

您不能在选项中使用 A 标签，这样的东西应该可以工作：

```
<select onChange=" window.open('yoururl.php?value=' + this.options[this.selectedIndex]);"> 
```

# sql - 按 IN (0,1,2) 集排序 SQL 数据

> ID：14153214
> 
> 赞同：2
> 
> 时间：2013-01-04T07:50:35.030
> 
> 标签：sql

我在sql查询中遇到了一些困难

```
select * from country order by 
case when country_id in(254,43,253,91,82,175) then 0  else country.country_id  end
ASC 
```

我希望记录的第一个案例条件按照它们在查询中给出的方式排序，比如......

```
254
43
253
91
82
175 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:54:27.320

如果您使用 MySQL，我相信这就是您想要的查询。

```
SELECT * 
FROM country  
ORDER BY FIELD(country_id, 175, 82, 91, 253, 43, 254) DESC  -- reverse order here
       , country_id ; 
```

或者这个（对于任何 SQL 产品）：

```
SELECT * 
FROM country  
ORDER BY CASE country_id
           WHEN 254 THEN 1
           WHEN  43 THEN 2
           WHEN 253 THEN 3
           WHEN  91 THEN 4
           WHEN  82 THEN 5
           WHEN 175 THEN 6
               ELSE 7
         END 
       , country_id ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:21:09.367

如果您想符合以下解决方案，请使用以下解决方案[`core SQL-99 standard`](http://developer.mimer.com/validator/parser99/index.tml)：

```
SELECT *
FROM country
ORDER BY
 CASE 
      WHEN country_id IN (254,43,253,91,82,175) THEN 1
      ELSE 666
 END, country_id 
```

# sql - SQL Server 2008 中工作日的数据类型

> ID：14153215
> 
> 赞同：1
> 
> 时间：2013-01-04T07:50:36.180
> 
> 标签：sql, database, sql-server-2008

我有一份在指定日期交付商品的制造商列表。例如，制造商 A 可能会在周一和周四交付商品。我需要设计一个显示此信息的页面。该页面基本上包含 7 个复选框，周一到周日，制造商可以打开/关闭设置他们首选的交货日期。

我在 SQL Server 2008 中创建的表将包含制造商 ID，它是充当主键的整数和用于存储交货日期的字段。

交货日期最合适的数据类型是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:26:24.937

假设寻求一天；

我会选择`TINYINT`因为；

```
SELECT DATEPART(WEEKDAY, GETDATE()) 
```

将产生一个介于 1-7 之间的整数（包括）

假设需要多天；

编辑：我认为 n:n 解决方案可能表现更好，但尚未确认。

您是否有兴趣寻求这样的解决方案？我之所以选择这种方法，是因为我觉得它比使用 n:n 表“更整洁”。当您扩展您的要求时，我们可以对其进行扩展。

```
USE tempdb
GO

IF OBJECT_ID('tempdb.dbo.Manufacturer') IS NOT NULL DROP TABLE Manufacturer
IF OBJECT_ID('tempdb.dbo.DeliveryDays') IS NOT NULL DROP TABLE DeliveryDays
CREATE TABLE [dbo].[Manufacturer](
    [ManufacturerID] [int] IDENTITY(1,1) NOT NULL,
    [Manufacturer] [varchar](50) NOT NULL,
    [DeliveryDaysBinScore] [int] NULL,
 CONSTRAINT [PK_Manufacturer] PRIMARY KEY CLUSTERED 
(
    [ManufacturerID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE DeliveryDays
(
     WeekdayNum INT
    ,tDayName   VARCHAR(9)
    ,DayBinVal  INT
)
INSERT INTO DeliveryDays VALUES 
(1, 'Sunday', 1),
(2, 'Monday', 2),
(3, 'Tuesday', 4),
(4, 'Wednesday', 8),
(5, 'Thursday', 16),
(6, 'Friday', 32),
(7, 'Saturday', 64)

/*
    Sunday      = 1 = 1
    Monday      = 2 = 2
    Tuesday     = 3 = 4
    Wednesday   = 4 = 8
    Thursday    = 5 = 16
    Friday      = 6 = 32
    Saturday    = 7 = 64
*/

INSERT INTO Manufacturer VALUES
('ABC Co', 16 + 1), ('Boxer PTY', 64+8), ('ConsumeIT', 1+4+16)

SELECT *
FROM Manufacturer   M
JOIN DeliveryDays   D ON M.DeliveryDaysBinScore & D.DayBinVal != 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:23:41.900

**有多个交货日：**

最好的想法可能是拥有 7 个 BIT 字段。在索引和查询这些字段时需要扫描的记录数量方面，这比存储为单个 INT 或 VARCHAR 具有优势。

为了完整起见，我应该注意 MySQL 有一个可变长度的二进制字段（据我所知，SQL-Server 没有）。

另一种方法是使用单个 INT 字段并使用按位运算来确定检查的日期（如果您希望能够在执行时轻松查看值，则可以使用 VARCHAR `SELECT *`，但您始终可以为此使用计算字段或存储过程） .

**单一交货天数：**

我只建议存储一个值可以为 0-6 或 1-7 的 INT。

# android - 图像视图（钛）

> ID：14153218
> 
> 赞同：0
> 
> 时间：2013-01-04T07:50:48.303
> 
> 标签：android, imageview, titanium

我正在尝试`checkbox`使用以下代码创建记住使用图像视图，并且`ios`即使在 android 中也可以正常工作，if else 语句工作正常但是

```
 remember_me.image = 'images/buttons/checkbox_not_ticked.png';' 
```

如果我再次单击它，它只会在 android 中工作一次，它不会将图像从勾选更改为`unticked`. 请提出错误

```
ar remember_me = Titanium.UI.createImageView({
      image:'images/buttons/checkbox_not_ticked.png',
      width:Ti.UI.SIZE,
      height:Ti.UI.SIZE,
      left:20
    });
    row2.add(remember_me);
    row2.add(remember_me_label);

    remember_me.addEventListener('singletap', function(e) {

        if(!remember_me_var)
        {
            remember_me_var = true;
            remember_me.image = 'images/buttons/checkbox_ticked.png';
        }
       else
       {
            remember_me_var = false;
            remember_me.image = '';
            remember_me.image = 'images/buttons/checkbox_not_ticked.png';
       }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T03:51:02.733

appcelerator 钛在双击图像视图时遇到了问题。这已[在此处](https://jira.appcelerator.org/browse/TIMOB-10342)报告。您可以通过使用视图而不是 imageview 来解决此问题。我也遇到过这个问题，我用视图解决了这个问题。

```
 var remember_me = Titanium.UI.createView({
       backgroundImage:'images/buttons/checkbox_not_ticked.png',
       width:Ti.UI.SIZE,
       height:Ti.UI.SIZE,
       left:20
    });
    row2.add(remember_me);
    row2.add(remember_me_label);

    //Click event can be used instead of singletap. Singletap also fires click event
    //Changing the image while clicking on the image
    remember_me.addEventListener('click', function(e) {
       if(!remember_me_var)
       {
          remember_me_var = true;
          remember_me.backgroundImage = 'images/buttons/checkbox_ticked.png';
       }
       else
       {
          remember_me_var = false;
          remember_me.backgroundImage = 'images/buttons/checkbox_not_ticked.png';
       }
    }); 
```

希望这能解决您的问题。快乐编程:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T08:13:15.937

我建议不要以编程方式执行此操作，而是使用可绘制的选择器来定义 CheckBox 的开/关状态：

复选框.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true" android:drawable="@drawable/checkbox_ticked" />
    <item android:state_checked="false" android:drawable="@drawable/checkbox_not_ticked" />
</selector> 
```

然后，您可以将其添加`android:button=@drawable/checkbox`到您的小部件。这对我来说非常有效。

# c# - 在表面启用右键单击检测

> ID：14153219
> 
> 赞同：0
> 
> 时间：2013-01-04T07:50:57.397
> 
> 标签：c#, .net, wpf, pixelsense

我是 Surface 开发的新手。我想按下鼠标右键（我猜这是按住事件）。

不知道我应该处理哪个事件？我搜索了几个论坛，但没有任何帮助。我知道 Surface 已禁用此事件。是这样吗？（我想要的是长按检测，它在手指周围显示蓝/白圆圈）。

# python - 删除了 MacPorts，现在 Python 坏了

> ID：14153221
> 
> 赞同：5
> 
> 时间：2013-01-04T07:51:02.367
> 
> 标签：python

我已经从我的 Mac (10.7.5) 中删除了 MacPorts，现在 Python 似乎坏了。我正在尝试运行scrapy，最后出现以下错误：

```
ImportError: dlopen(/Library/Python/2.7/site-packages/lxml-2.3.4-py2.7-macosx-10.7-intel.egg/lxml/etree.so, 2): Symbol not found: _exsltDateXpathCtxtRegister
  Referenced from: /Library/Python/2.7/site-packages/lxml-2.3.4-py2.7-macosx-10.7-intel.egg/lxml/etree.so
  Expected in: /usr/lib/libexslt.0.dylib
 in /Library/Python/2.7/site-packages/lxml-2.3.4-py2.7-macosx-10.7-intel.egg/lxml/etree.so 
```

当我运行 python 并尝试导入该库时，我收到与以下相同的错误：

```
$ python
Python 2.7.2 (v2.7.2:8527427914a2, Jun 11 2011, 14:13:39) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from lxml import etree
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: dlopen(/Library/Python/2.7/site-packages/lxml-2.3.4-py2.7-macosx-10.7-intel.egg/lxml/etree.so, 2): Symbol not found: _xsltDocDefaultLoader
  Referenced from: /Library/Python/2.7/site-packages/lxml-2.3.4-py2.7-macosx-10.7-intel.egg/lxml/etree.so
  Expected in: flat namespace
 in /Library/Python/2.7/site-packages/lxml-2.3.4-py2.7-macosx-10.7-intel.egg/lxml/etree.so 
```

我现在该如何收拾这个烂摊子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T07:57:24.393

假设这是系统 Python，并且您`lxml`通过 安装到它`pip`，并且 10.7.5 附带的 libxml2 版本对您来说已经足够了（我认为他们在 10.7 中开始发布一些最新版本 - 就像在 2.7.x 中一样 - 但我不记得了），它应该很简单：

```
sudo pip uninstall lxml
sudo pip install lxml 
```

这里的问题是它`lxml`是针对 MacPorts `libxml2`/构建`libxslt2`的，而不是针对您的系统版本。从理论上讲，用 重新指向依赖项是可能的`install_name_tool`，但这更有可能惨遭失败——或者，如果你真的不走运，似乎可以工作，但当你真正需要它时会崩溃……只需重新构建就`lxml`可以解决问题. 如果您使用过`pip`，那么就像卸载/重新安装一样简单。

如果您没有使用`pip`，则从干净的 tarball 副本重新执行手册`sudo python setup.py install`，或重新执行`sudo easy_install lxml`，或在`sudo pip install lxml`已有的基础上进行操作，*可能会*起作用，但这不能保证。

如果我对 Lion 带来的体面有误`libxml2`，请在评论中说出来，我会为您提供获取它的选项（无需重新安装 MacPorts）。

如果你想确定你已经清理了所有东西，你总是可以通过这样做将你的系统站点包恢复到它们的默认状态：

```
sudo rm -rf /Library/Python/2.7/site-packages/*
rm -rf ~/Library/Python/2.7/site-packages/* 
```

然后，当然，你必须重新安装你安装的任何东西。`pip`（如果您上次没有使用，请先使用`sudo easy_install pip`，然后再`pip`用于其他所有内容……）您可以通过在相同的目录上执行一个非常好的了解您安装的确切内容`ls`，但这不一定会告诉您你*是如何*安装一切的。（例如，我有几个使用 安装的软件包`pip install git+https://some.site/some/repo`，或者来自二进制安装程序，或者在某种情况下我完全不知道......）所以，如果你别无选择，请考虑这是核选项 - 不是首选，但比重新安装 OS X 的热核选项更好。

# spring - 测试中的 Jmock、Spring 和带注释的资源

> ID：14153223
> 
> 赞同：0
> 
> 时间：2013-01-04T07:51:17.037
> 
> 标签：spring, unit-testing, testing, jmock

我用 Jmock 为 Spring 编写控制器测试。控制器使用接口进行数据库操作。这些是服务类。我可以对它们进行 jmock 并通过 setter 将它们传递给控制器​​进行测试。

真正的控制器有一个标有@Reource-annotation 的服务

@Resource 私有服务服务；

测试最终服务 service = context.mock(Service.class); 控制器.setService（服务）；控制器.CallMethodToTest();

在控制器代码中，服务对象通常使用 Spring 的 @Resource 注释进行初始化。问题是当控制器在某些内部调用中使用相同的服务时，例如验证器或内部类。

真正的验证器也有一个标有@Reource-annotation 的服务

@Resource 私有服务服务；

在测试中，我可以例如引入验证器对象，在其上设置服务并将其传递给控制器​​。

```
 MyValidator validator = new MyValidator();
 validator.setService(service);
 controller.setValidator(validator); 
```

比方说验证器。验证调用 service.getSomething。我需要为 getSomething(); 写期望。在控制器中也可以调用相同的方法。

```
 context.checking(new Expectations() {
        {
            allowing(service).getSomething();
            will(returnValue(mockData));

        }
    }); 
```

尽管有允许基数，但这种情况会导致

```
 allowed, already invoked 1 time 
```

这是一种常见的情况，我无法提供更具体的代码。我想这与控制器和验证器服务方法调用有关。任何人都可以给我一个解决这个问题的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:14:50.570

如果您使用 JMock，那么每个模拟对象都有一个名称。此名称必须是唯一的。

如果您使用该方法`Mockery.mock(Class<T> typeToMock)`，则名称将从类名派生。因此，您只能使用此方法为每个类创建一个模拟。

如果您需要同一类的多个不同模拟，请`Mockery.mock(Class<T> typeToMock, String name)`改用，并给每个模拟一个不同的名称。

# java - Jsoup 不适用于 GWT

> ID：14153231
> 
> 赞同：0
> 
> 时间：2013-01-04T07:51:50.297
> 
> 标签：java, eclipse, gwt, jsoup

我正在尝试在 GWT 上运行一个简单的应用程序，其中 Jsoup 获取一个 Wiki 页面，对其进行解析以找到一些文本，然后将该文本放入一个按钮中。我已将 Jsoup jar 文件放在所需的文件夹中（如您所见：）

![在此处输入图像描述](../Images/a419dc1789e6045e850172906039e455.png)

导入工作正常，因为在代码的后面部分使用这些 Jsoup 类型变量没有显示错误。但我仍然收到这里看到的错误：

![在此处输入图像描述](../Images/db261c2cd39033dc6af52f0af30a4257.png)

谁能告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:02:14.290

**Jsoup 是一个服务器端处理jar。它没有 GWT 端口！！！**

## 选项1 -

您需要分叉并将其移植到 GWT 兼容代码（如果它使用 GWT 不支持的 api 则不可能）以在客户端使用它。

## 选项 2 -

相反，您应该尝试仅在服务器端使用它。处理 wiki 页面并将文本字符串发送到客户端。

## 选项 3 -

GWT 中的类似第三方库 - [http://code.google.com/p/gwt-html/](http://code.google.com/p/gwt-html/)

注意：它们并不总是得到维护。所以只有在你理解的情况下才使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:31:57.260

最简单的方法是使用[gwtquery](http://code.google.com/p/gwtquery/)（又名 gquery）。在最好的情况下，您的代码可能如下所示：

```
$(".myButton").load("file.html"); 
```

gwtquery 是 gwt 的 jquery api 的一个端口，jsoup 是相同的，但用于 jvm。Gquery 维护得很好。

这是将快照中的代码移植到 gquery 的示例：

```
// The target url should be in the same domain unless you configure CORS
GQuery.get("http://stats...", null, new Function() {
  public void f() { 
    $("<div>" + getDataObject() + "</div>") // wrap the server response in a div
      .find("p").each(new Function() {
        public void f() {
          System.out.println($(this).text());
        }
       });
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:48:11.950

Jsoup 是一个服务器端库，您不能在您的 gwt 代码（位于 中的 java 类`com.google.gwt.sample.stockwatcher.client`）中使用它。

我在您的 StockWatcher 类 ( `import org.jsoup.helper.Validate`) 中看到一些未使用的导入，您必须删除它们（按`Ctrl`+ `Shift`+ `O`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-10T07:11:23.220

虽然 Jsoup 被设计为一个服务器端库，但修改它以在客户端与 GWT 一起运行并非不可能。为了做到这一点，必须削减一些功能，并且必须删除任何使用 File 或 InputStream 的功能。我选择的 IDE 是 IntelliJ Idea，“查找用法”功能对于确定可以安全删除哪些功能以及必须模拟哪些其他功能非常有帮助。提一句建议，最好将您认为不需要的函数注释掉，而不是完全删除它，因为进一步检查后，您可能会发现您实际上需要修改或模拟该函数。

以下是我模拟的类或函数：

*   StringBuilder.appendCodePoint(int codePoint)
*   字符集
*   字符集编码器
*   String.format(final String 格式, final Object... args);

替代品：

*   java.util.Pattern 变为 com.google.gwt.regexp.shared.RegExp。
*   Map loadEntities(String filename) 可以硬编码。

如果您想接受我的工作，可以在这里下载： [http ://www.mediafire.com/download/b3le77rrvc33vpa/Jsoup.zip](http://www.mediafire.com/download/b3le77rrvc33vpa/Jsoup.zip)
*免责声明：*您可以将此文件用作我上面概述的步骤的参考，但我不能保证在删除与 GWT 不兼容的代码的过程中的某个地方我没有引入 XSS 攻击的可能性。如果您发现这样的错误，请告诉我。

# node.js - 使用闭包时内存泄漏

> ID：14153232
> 
> 赞同：1
> 
> 时间：2013-01-04T07:51:54.253
> 
> 标签：node.js, memory-leaks, express

我正在使用`express`and `node`，并自己添加了一个中间件，以便将纯文本转换为 json 对象，代码如下：

```
app.use(function(req, res, next){
   var tmpJson ='';
   req.setEncoding('utf8');
   req.on('data', function(chunk){
       tmpJson += chunk;
   });
   req.on('end', function(){
       req.json = JSON.parse(tmpJson);
       next();
       tmpJson = null;
   });
}); 
```

这段代码会导致内存泄漏吗？据我所知，在事件`req.json`的回调函数中使用时`end`，它会增加一个`count of usage`for `req`，这会使这个`req`永远不会释放？

如果它确实导致内存泄漏，我是否可以避免使用它？

# php - Android不发送json字符串

> ID：14153238
> 
> 赞同：0
> 
> 时间：2013-01-04T07:52:22.057
> 
> 标签：php, android, json, http-post

我正面临发送 jsonstring 的问题，但该字符串为空。

当我使用这个 php 代码来查看我是否正在接收一个字符串以及我得到什么时：

```
POST: 
Array
(
)

 GET: 
Array
(
    [data] => 
) 
```

这是我的安卓代码：

```
HttpClient httpclient = new DefaultHttpClient(); 

        HttpPost httppost = new HttpPost("http://www.myserver.nl/locatie.php?data="); 
        httppost.setHeader("Content-type", "application/json"); 

        // Create json object here... 
        json = new JSONObject(); 
        try { 
            json.put("id", "0612838"); 
            json.put("longitude", "-143.406417"); 
            json.put("latitude", "32.785834"); 
            json.put("timestamp", "10-10 07:56"); 

        } catch (JSONException e) { 
        // TODO Auto-generated catch block 
        e.printStackTrace(); 
        } 

        /// create StringEntity with current json obejct 

        try { 
        se = new StringEntity(json.toString()); 
        } catch (UnsupportedEncodingException e) { 
        // TODO Auto-generated catch block 
        e.printStackTrace(); 
        } 

        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); 
        httppost.setEntity(se); 

        try { 
        response = httpclient.execute(httppost); 
        String temp = EntityUtils.toString(response.getEntity()); 
        } catch (IOException e) { 
        // TODO Auto-generated catch block 
        e.printStackTrace(); 
        } 
```

有人看到我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:01:14.157

使用`NameValuePair`：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httpost = new HttpPost("http://www.myserver.nl/locatie.php");

    json = new JSONObject(); 
    try { 
        json.put("id", "0612838"); 
        json.put("longitude", "-143.406417"); 
        json.put("latitude", "32.785834"); 
        json.put("timestamp", "10-10 07:56"); 

    } catch (JSONException e) { 
    // TODO Auto-generated catch block 
    e.printStackTrace(); 
    } 

    /// create StringEntity with current json obejct 

    try { 
    se = new StringEntity(json.toString()); 

        List <NameValuePair> nvps = new ArrayList <NameValuePair>();
        nvps.add(new BasicNameValuePair("data", se));

        httpost.setEntity(new UrlEncodedFormEntity(nvps, HTTP.UTF_8));

        System.out.println("send about to do post");
        HttpResponse response = httpclient.execute(httpost);
        System.out.println("send post done");
        HttpEntity entity = response.getEntity();
           ....

    } catch (UnsupportedEncodingException e) { 
    // TODO Auto-generated catch block 
    e.printStackTrace(); 
    } 
```

**服务器端**

```
 if (isset($_POST["data"]))
  {                                                                                                                                       
  // Takes a JSON encoded string and converts it into a PHP variable.
  $sub = json_decode($_POST"data"],true);
  .....
  } 
```

# javascript - jvectormap在JS Firefox问题中具有共同区域的国家

> ID：14153242
> 
> 赞同：0
> 
> 时间：2013-01-04T07:52:32.480
> 
> 标签：javascript, firefox, jvectormap

我们创建了一个 js 文件，用于使用 Converter.py 显示 JVectorMap 非洲地图。现在我们想将几个国家合并在一起，并为该地区贴上一个共同的标签。我们打开 js 文件，合并这些国家的 Path 属性，并输入地区的通用名称。

"南非": { "路径": "M197.62,397.95l-3.9,-4.3l-2.22,-4.46l-4.64,-19.99l-0.89,-10.73l-5.31,-7.66l-4.39,-11.15 l-4.64,-5.75l-0.31,-4.08l5.82,-1.98l3.53,0.17l3.34,2.61l24.61,-0.57l4.16,2.87l14.08,0.85l15.53,-3.8 l3.57,0.33l1.85,1.09l-4.66,1.22l-3.36,2.13l-2.43,-2.31l-13.69,2.78l-0.17,21.08l-5.74,0.69l-0.0,40.71l-4.87, 3.03l-2.91,0.43l-5.94,-1.59l-1.05,-2.66l-2.3,-1.72l-3.09,2.77Z", "名称": "南非" },

该解决方案在 IE 上运行良好，但在 Firefox 上运行良好。谁能告诉我们如何合并它们，以便它适用于所有浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:47:53.110

SVG 路径字符串由 M、L 和 Z 组成（在这两种情况下）。大写字母表示绝对值，小写字母表示相对值。您可以在以下链接中找到更多详细信息：http: [//commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths](http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths)

对于绝对路径，您可以立即合并它们，但对于相对路径，您需要在 2 条路径之间放置一些值，以便第二条路径从正确的位置开始。

# android - onPost Execute 中的列表视图无法显示

> ID：14153243
> 
> 赞同：0
> 
> 时间：2013-01-04T07:52:33.707
> 
> 标签：android, database

我没有收到任何错误，但我无法在我的模拟器中看到数据。我也没有得到任何强制关闭。活动正在运行。我成功地得到了我所有的印刷品。我不知道我想错过什么我应该添加任何人帮助我提前感谢。我的代码是

> 我的 onPostExecute

```
 protected void onPostExecute(String file_url) {
  super.onPostExecute(toString());
  pDialog.dismiss();
  groupnamelist=new ArrayList<String>(new HashSet<String>(tnamelist));
  System.out.println("List Success :"+tnamelist);
    lv = (ListView) findViewById(R.id.ListView);
            // selecting single ListView item
  setListAdapter(new ArrayAdapter<String>    
      (Topic.this,android.R.layout.simple_list_item_1));

    System.out.println("Before call another class Topic names :"+groupnamelist);

            return;
 } 
```

我在我的 LogCat 中没有收到任何错误，任何人都可以帮助我在这方面缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:11:57.323

看起来您从 URL 接收的数据是 XML 而不是 JSON。首先手动检查数据源，并且您没有得到 404 或其他内容。

# mule - 如何在 Mule 轮询频率属性中进行算术运算？

> ID：14153246
> 
> 赞同：0
> 
> 时间：2013-01-04T07:52:44.730
> 
> 标签：mule, integer-arithmetic

我以秒为单位将轮询频率存储在属性文件中。但是 Mule 中“poll”组件的频率属性期望频率以毫秒为单位。如何在这里执行乘法运算？以下两个似乎不起作用：

```
(1) <poll frequency="${GiantsNew.poll*1000}">
(2) <poll frequency="${GiantsNew.poll}*1000"> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T02:50:12.737

很抱歉，Mule 不支持属性中的[SpEL](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html)，`frequency`所以我不得不构建如下所示的可怕装置，以仅使用配置元素来实现您的要求。

您还可以创建一个自定义类来解析初始`properties`bean，而不是`MethodInvokingFactoryBean`像我在下面那样使用。

```
<spring:beans>
    <util:properties id="properties" location="classpath:appProperties.properties" />
    <spring:bean id="giantsNewProperty"
        class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"
        p:targetObject-ref="properties" p:targetMethod="setProperty">
        <spring:property name="arguments">
            <spring:list>
                <spring:value>GiantsNewComputedPoll</spring:value>
                <spring:value>#{ T(java.lang.Integer).valueOf(properties.getProperty("GiantsNew.poll")) * 5 }</spring:value>
            </spring:list>
        </spring:property>
    </spring:bean>

    <spring:bean id="computedProperties" factory-bean="properties"
        factory-method="clone" depends-on="giantsNewProperty" />

    <context:property-placeholder
        properties-ref="computedProperties" />
</spring:beans>

...

<poll frequency="${GiantsNewComputedPoll}"> 
```

# javascript - 快速点击屏幕外的 div 动画

> ID：14153250
> 
> 赞同：0
> 
> 时间：2013-01-04T07:53:18.300
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有这个代码：

```
$(document).ready(function(){

    $(".subscriptions").click(function (){

        if($(".pollSlider").css("margin-right") == "-200px"){
            $('.pollSlider').animate({"margin-right": '+=200'});
            }else{
            $('.pollSlider').animate({"margin-right": '-=200'});
            }
        });

//other exceptions

if($(".pollSlider").css("margin-right") > "200px"){
    $(".pollSlider").css({'margin-righ':'200px'});
    }
if($(".pollSlider").css("margin-right") < "0px"){
    $(".pollSlider").css({'margin-righ':'0px'});
    }
 }); 
```

这是CSS：

```
.pollSlider{
    overflow: auto;
    top:0px;
    position:fixed;
    height:100%;
    background:red;
    width:200px;
    right:0px;
    margin-right: -200px;
    z-index:100;
} 
```

我有一个 div，当用户单击一个按钮时，div 从左侧 200px 滑入屏幕，当用户再次单击同一个按钮时，div 动画向右 200px。这个系统工作得很好，但问题是，如果用户在 div 向左或向右动画时继续单击，则 div 将在屏幕之外（向右）动画，并且当用户再次单击时不会再次返回。所以我尝试添加 //other 异常，但那些 if 语句不起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:33:32.157

我创建了一个**[演示](http://jsfiddle.net/N6kv9/1/)**，我试图在其中实现您想要产生的效果。正如评论中提到的，jQuery[`.stop(…)`](http://api.jquery.com/stop/)用于在开始下一个动画之前清空动画队列。

我还将单位从相对（`+=200`和`-=200`）更改为固定数字（`0`和`-width`）。如果您假设动画将在中途停止并且您需要重新制作动画，则您需要使用固定数字，或者在每个新动画之前即时进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:12:51.957

我对此类问题的解决方案是添加一个全局变量，在用户单击后将其设置为 false，并在动画完成后将其设置回 tru：

```
var allowAnimate = true;
$(document).ready(function(){

$(".subscriptions").click(function (){
    if(allowAnimate){
    if($(".pollSlider").css("margin-right") <= "-200px"){
        allowAnimate = false;
        $('.pollSlider').animate({"margin-right": '+=200'}, function(){allowAnimate = true});
        }else if($(".pollSlider").css("margin-right") >= "200px")){
        $('.pollSlider').animate({"margin-right": '-=200'}, function(){allowAnimate = true});
        }
    }
    });

//other exceptions
.... 
```

因此，如果用户单击一个按钮，`allowAnimate`则检查变量是否为`true`，我将其设置为`false`，并且动画将开始，在动画回调函数中我将其设置回`true`。

# iphone - 如何从 sqldb 中提取数据并显示在 UILocalnotification 的 alertbody 上？

> ID：14153253
> 
> 赞同：0
> 
> 时间：2013-01-04T07:53:22.850
> 
> 标签：iphone, objective-c, xcode, uilocalnotification

嗨，我正在尝试显示来自 db 的数据`UILocalNotification`。我的数据库中有项目列表，每个项目都有描述。我想在 中显示描述`UILocalNotification`。当我点击项目时，`UILocalNotification`应该会出现一个带有描述的项目。当我点击另一个项目时，它的描述应该出现在`alerview`.

我正在从数据库中检索数据。我不知道如何把它放在`UILocalNotification's`警戒体上。

```
didSelectedListID = [[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyID"]intValue]; 
```

`didSelectedListID`包含该特定 List 的 ID 号。

```
NSDate *alertTime = [[NSDate date] dateByAddingTimeInterval:01];
UIApplication* app = [UIApplication sharedApplication];
UILocalNotification* notifyAlarm = [[UILocalNotification alloc] init];
if(notifyAlarm)
{
    notifyAlarm.fireDate = alertTime;
    notifyAlarm.timeZone = [NSTimeZone defaultTimeZone];
    notifyAlarm.repeatInterval = 0;
    notifyAlarm.alertBody = [];
    [app scheduleLocalNotification:notifyAlarm];
} 
```

# python - Python 2.7 的用户输入功能出现问题，无法让这些输入与程序一起使用

> ID：14153260
> 
> 赞同：0
> 
> 时间：2013-01-04T07:53:49.313
> 
> 标签：python, python-2.7, user-input, numerical-methods

我对 python 世界很陌生，尽管我已经用 php 做了很多事情......这是我的情况......

1.  我正在用 python 2.7 为我的小程序编写一些代码。
2.  在那个程序中，我需要接受 2 个用户输入，它们都是数字。
3.  第一个数字不得大于 11 且不得小于 0。
4.  第二个不得大于 59 且不得小于 0。
5.  所以首先，我要检查两个用户输入是否有效，如果他们做错了，程序必须给他们一个警告，让他们再试一次。
6.  最后，如果他们正确输入了两个数字，我想添加这些数字并提示一条消息，例如“您的数字之和是……等等……等等……”。

所以这是我的代码：

```
def validNum1(Num1):
    if Num1 < 0:
        print "%s is not valid value. Try again." % Num1
        return 0
    elif Num1 > 11:
        print "%s is not valid value. Try again." % Num1
        return 0
    else:
        return 1

def getInput_Num1():
    while 1:
        Num1 = raw_input("Enter Num1 Value: ")
        if validNum1(int(Num1)):
            break
    print "You're right. %s is a valid Num1." % Num1
    return
def validNum2(Num2):
    if Num2 < 0:
        print "%s is not valid value. Try again." % Num2
        return 0
    elif Num2 > 59:
        print "%s is not valid value. Try again." % Num2
        return 0
    else:
        return 2
def getInput_Num2():
    while 2:
        Num2 = raw_input("Enter Num2 Value: ")
        if validNum2(int(Num2)):
             break
    print "You're right. %s is a valid Num2." % Num2
    return

if __name__ == '__main__':
    getInput_Num1()
    getInput_Num2() 
```

所以现在我想你们已经明白了需要填写什么；但让我说得更清楚。我想添加到这个程序是添加 Num1 和 Num2 并向用户显示总和的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:37:18.743

我会尝试将其分解为两个接受参数的函数。`limits`这也意味着，您可以通过更改使代码更灵活的列表来更改限制的数量及其值 。它还使用更简洁的新样式字符串格式。

```
def validNum(num,limit):
    if 0< num <limit:
        print "{0} is a valid value.".format(str(num))
        return num
    print "{0} is not a valid value. Try again.".format(str(num))

def getInput(limits):
    results = []
    for limit in limits:
        while True:
            num = int(raw_input("Enter a numeric Value: "))            
            if validNum(num,limit):
                results.append(int(num))
                break   
    print 'The sum of chosen numbers is {0}'.format(str(sum(results)))

limits=[11,59]   
getInput(limits) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:32:35.057

我建议不要创建一个函数，而是分离关注点：您想要输入（两次，使用不同的提示），您想要验证，您想要乘以并且您想要打印结果。对于后两者，由于它们的复杂性较低，因此不需要任何功能。对于前两个，创建函数并将**它们重用于 num1 和 num2**。

尝试这个：

```
def is_valid_number(number_str):
    try:
        number = int(number_str)
    except ValueError:
        return False
    if number < 0 or number > 11:
        return False
    else:
        return True

def get_input_number(prompt):
    while True:
        num = raw_input(prompt)
        if is_valid_number(num):
            return int(num)
        else:
            print "%s is not a valid value. Try again." % num

if __name__ == '__main__':
    num1 = get_input_number("Enter Num1 Value: ")    
    num2 = get_input_number("Enter Num2 Value: ")
    print "%i + %i = %i" % (num1, num2, num1+num2) 
```

主例程只有三行，每个方法都按照其名称的含义进行操作，并且可以重用。

关注点分离（SoC）是软件设计的主要原则之一，它使代码更具可读性、可维护性、优雅且不易出错

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:15:28.870

尝试将所有功能合并为一个（我会说它使它更清洁），然后您可以添加`Num1`并`Num2`打印结果。

```
def getInput():
    while True:
        Num1 = raw_input('Enter Num1 Value: ')
        if Num1 in range(12):
            print 'You're right. %s is a valid Num1.' % Num1
            break
        print '%s is not valid value. Try again.' % Num1
    while True:
        Num2 = raw_input('Enter Num2 Value: ')
        if Num2 in range(60):
            print 'You're right. %s is a valid Num2.' % Num2
            break
        print '%s is not valid value. Try again.' % Num2
    print 'The sum of your numbers is %s.' % (Num1 + Num2)

if __name__ == '__main__':
    getInput() 
```

但是，如果您不想更改太多代码，请更改第二个`getInput`函数，使其接受参数`Num1`，然后让第一个函数调用第二个函数，并将参数输入为`Num1`。然后编写第三个函数，接受两个数字，将它们相加并打印结果。所以像这样：

```
getInput_Num2(Num1)  #add this to end of `getInput_Num1` function

def getInput_Num2(Num1):  #add a `Num1` parameter to pass to the new function

addNums(Num1, Num2)  #call the new function at the end of `getInput_Num2`

def addNums(Num1, Num2):
    print 'The sum of your numbers is %s.' % (Num1 + Num2)
    #do whatever else you want to do

if __name__ == '__main__':
    getInput_Num1() 
```

# jquery - 没有在 jquerymobile 中获取列表视图功能

> ID：14153263
> 
> 赞同：1
> 
> 时间：2013-01-04T07:54:00.813
> 
> 标签：jquery, html, css, listview, jquery-mobile

我对 jquerymobile 很陌生。我正在做一个示例，我试图在其中显示一个列表视图，这是我的代码。

```
<!doctype html>
<html>
<head>

<link rel="stylesheet" href="jquery.mobile-1.2.0.min.css"/>

<script type="text/javascript" charset="UTF-8" src="jquery.js"></script>
<script type="text/javascript" charset="UTF-8" src="jquery.mobile-1.2.0.min.js"></script>

</head>

<body bgcolor="#e8e8e8">

<div data-role="page" id="emplist-page">

<div data-role="header" data-theme="b">
<h1>Employee Details</h1>
</div>

<div data-role="content">

<ul data-role="listview" id="emplist" data-theme="d">
<li data-role="divider">Names</li>
<li data-icon="arrow-r" >Surendra</li>
<li data-icon="arrow-r" >Bala</li>
</ul>

</div>

<div data-role="footer" data-theme="b" data-position="fixed">
<h1>@2012</h1>
</div>

</div>

</body>
</html> 
```

在此，我没有得到列表视图的功能，例如分隔符作为分隔符不可见，并且箭头图标对于列表项不可见。

这是我得到的输出。

![在此处输入图像描述](../Images/a46e3dc97d1c2bb29c9b48b4db41c5f0.png)

我也添加了图像文件夹。

我该怎么办 ？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:04:57.633

您的 li 元素必须有一个子标签，只有这样箭头才会可见，然后您才能使用***data-icon***属性或***data-split-icon***属性来查看 li 图标。如果标签不应该像链接一样使用***href="#"***。

像这样：

```
 <ul data-role="listview" data-theme="a">
            <li><a href="#">item1</a></li>
            <li><a href="#">item1</a></li>
            <li><a href="#">item1</a></li>
        </ul> 
```

可以在[此处](http://jquerymobile.com/test/docs/lists/docs-lists.html)找到有关此的更多信息。

看看这个例子：http: [//jsfiddle.net/Gajotres/Defxd/](http://jsfiddle.net/Gajotres/Defxd/)

现在看看没有标签：http: [//jsfiddle.net/Gajotres/LwfJ6/](http://jsfiddle.net/Gajotres/LwfJ6/)

此外，如果您刚刚开始查看此[链接](http://brooky.cc/2011/04/23/jquery-mobile-cheat-sheet/)，它是 jQM 的备忘单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T15:14:03.150

这里有很多列表视图的示例，例如基本链接列表、嵌套、编号、拆分按钮、列表分隔符、计数气泡等。请查看下面的 url。

[http://jquerymobile.com/demos/1.2.0/docs/lists/lists-ul.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-ul.html)

# box2d - 我应该用什么关节来拉物体？

> ID：14153276
> 
> 赞同：1
> 
> 时间：2013-01-04T07:55:07.680
> 
> 标签：box2d

想象一下，我有这个蓝色对象（box2d 主体），我需要将其绘制到前端的红色“x”。在被拉动时，蓝色物体必须与路径上的其他物体发生碰撞。

你认为我应该用什么样的关节来拉这个物体？

谢谢

![在此处输入图像描述](../Images/b0f076da18ced1739915927afa3ed968.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:11:36.737

您是否希望用户使用鼠标或手指手动拉动对象？如果是这样，那么您可能会想要[`b2MouseJoint`](http://www.box2d.org/manual.html#_Toc258082974)（第 10 节）

如果另一个物体会在重力（或施加的力）下拉动它，那么您可能想要[`b2DistanceJoint`](http://www.box2d.org/manual.html#_Toc258082974)（第 5 节）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:11:23.530

您可以尝试使用绳索接头，并随着时间的推移改变绳索的长度。我不认为它看起来是正确的，因为绳索接头只会将身体限制在最大距离内，它不会像真正的绳索拉动那样将任何速度传递给身体。

你也可以在没有任何关节的情况下对 X 施加一个力，可能会更好。

# python - 如何从 Python 中的单个函数委托给多个函数？

> ID：14153277
> 
> 赞同：0
> 
> 时间：2013-01-04T07:55:11.610
> 
> 标签：python

我需要在 Python 中通过多个节点在系统上运行许多命令。我希望每个节点独立运行，所以我想我会为每个节点创建一个类，并用特定于节点的方法填充它。但是在编写我的算法来使用这些方法时，我发现我必须将每个调用都放在一个 for 循环中：

```
class MultipleThings(object):
    def __init__(self, index):
        self.index = index

    def some_function(self):
        print "I am index ", self.index

class CollectionOfThings(object):
    def __init__(self):
        self.list_of_objects = []
        for index in range(5):
            self.list_of_objects.append(MultipleThings(index))

        for thing in self.list_of_objects:     # Yuck!!
            thing.some_function()

main = CollectionOfThings() 
```

这段代码完美运行，给了我 5 个打印语句。但它是丑陋和乏味的。我怎样才能摆脱“self.list_of_objects 中的事物：”，只需调用 self.some_function() 一次，然后也许让装饰器对我的事物列表中存在的所有事物执行 for 循环？

编辑：我猜你可以认为这是一个“批处理”模式？例如，我想在 10 个系统上运行“ls -l”，然后让每个类实例处理这些命令。全部完成后，下一个命令可能是在所有 10 个系统上执行“rm tmp”，依此类推。还需要多处理，以便 for 循环不会在每个节点上阻塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:05:37.737

不确定这是否符合您的要求：

```
class CollectionOfThings(object):
    def __init__(self):
        self.list_of_objects = []
        self.list_of_objects = [MultipleThings(index) for index in range(5)]
        self.callFunc(self.list_of_objects, "some_function")

    def callFunc(self, items, func, *args, **kwargs):
        for thing in items:
            getattr(thing, func)(*args, **kwargs) 
```

正如@Thorsten 指出的那样，简单地使用`map`with a`lambda`是一种做你想做的事情的方法。我的尝试是制定一个通用的解决方案。

您可以像这样传递函数本身以避免传递字符串参数。

```
class CollectionOfThings(object):
    def __init__(self):
        self.list_of_objects = []
        self.list_of_objects = [MultipleThings(index) for index in range(5)]
        self.callFunc(self.list_of_objects, MultipleThings.some_function)

    def callFunc(self, items, func, *args, **kwargs):
        for thing in items:
            func(thing, *args, **kwargs) 
```

这将返回一个列表和字典：

```
class MultipleThings(object):
    def __init__(self, index):
        self.index = index

    def some_function(self, key, value):
        return "I am index %s with key %s and value %s" % (self.index, key, value)

class CollectionOfThings(object):
    def __init__(self):
        self.list_of_objects = []
        self.list_of_objects = [MultipleThings(index) for index in range(5)]
        retList, retDict = self.callFunc(self.list_of_objects, MultipleThings.some_function, "foo", value="bar")
        print retList, retDict

    def callFunc(self, items, func, *args, **kwargs):
        retList = []
        retDict = {}
        for i, thing in enumerate(items):
            funcReturn = func(thing, *args, **kwargs)
            retList.append(funcReturn)
            retDict[i] = funcReturn

        return retList, retDict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:33:15.390

听起来您有`list`10 个项目，然后您想在 中的每个项目上运行 50 个函数`list`，并且您不想编写 50 个`for`循环。

一种可能性是编写一个将其包装起来的函数：

```
def apply(method, seq):
    for item in seq:
        method(item) 
```

然后，而不是这个：

```
for thing in self.list_of_objects:     # Yuck!!
    thing.some_function()
for thing in self.list_of_objects:     # Yuck!!
    thing.other_function()
for thing in self.list_of_objects:     # Yuck!!
    thing.third_function()
# ... 47 more times 
```

你可以这样做：

```
apply(ThingClass.some_function, self.list_of_objects)
apply(ThingClass.other_function, self.list_of_objects)
apply(ThingClass.third_function, self.list_of_objects)
# ... 47 more times 
```

函数和方法是 Python 中的一等对象，就像其他任何东西一样，因此您可以轻松地将它们传递给其他函数。当然`first_thing.some_function`和`second_thing.some_function`实际上是不同的绑定方法；诀窍是您可以从类中获取未绑定的方法，然后将对象作为显式`self`参数传递给它。（尝试打印出`first_thing.some_function`、`ThingClass.some_function`、`type(first_thing.some_function)`和`type(ThingClass.some_function)`，并在交互式解释器中使用它们。）

当然，这假设所有这些项目具有相同方法的原因是它们是同一类的实例。如果这不是真的，并且您依赖于鸭子打字，那么您需要一些稍微不同的东西：

```
def apply(methodname, seq):
    for item in seq:
        getattr(item, methodname)()

apply('some_function', self.list_of_objects)
# ... 49 more times 
```

在这里，诀窍是`getattr`函数，它允许您在运行时按名称获取任何方法或成员。

但是如果你仔细想想，你真正想要的是迭代这 50 个未绑定的方法或名称，而根本不必重复自己。例如：

```
for name in ('some_function', 'other_function', 'third_function',
             # ... 47 more names
            ):
    for obj in self.list_of_objects:
        getattr(obj, name)() 
```

请注意，该`apply`方法的第一个版本可以很容易地被内置的`map`（仅在 Python 2.x，而不是 3.x 中），甚至是列表推导式替换。但是，有一些理由不这样做：

*   `map`当您仅调用该函数的副作用时，它通常被认为是有问题的使用风格或理解。
*   如果您有*很多*项目，而不仅仅是 50*10，那么它会浪费内存和时间来构建`list`您不需要的结果。
*   在 Python 3 中，`map`返回一个迭代器而不是 a `list`，因此它实际上根本不会执行函数，除非您以某种方式对其进行迭代。（由于您的`print`陈述，您今天显然在使用 2.x，但大概有一天您会切换到 3.x。）

`itertools.imap`您可以通过使用（或生成器表达式）而不是`map`（或列表推导式）并通过例如将其馈入 0-sized 来处理可迭代对象来解决这些问题`deque`。但到那时，您的代码在做什么并不完全清楚。

同时，显式编写函数意味着当您发现需要时很容易修改为例如第二个版本。

# android - 资源未找到异常android

> ID：14153285
> 
> 赞同：0
> 
> 时间：2013-01-04T07:55:43.827
> 
> 标签：android, android-layout, spinner

当我尝试为微调器添加自定义视图时出现以下异常。这是日志猫

```
01-04 12:37:11.299: E/AndroidRuntime(759): FATAL EXCEPTION: main
01-04 12:37:11.299: E/AndroidRuntime(759): android.content.res.Resources$NotFoundException: File res/drawable-hdpi/spinner.png from xml type layout resource ID #0x7f020055
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1916)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1871)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.content.res.Resources.getLayout(Resources.java:731)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:332)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.ArrayAdapter.getView(ArrayAdapter.java:323)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:192)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.View.measure(View.java:8313)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.View.measure(View.java:8313)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.View.measure(View.java:8313)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.View.measure(View.java:8313)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.View.measure(View.java:8313)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.os.Looper.loop(Looper.java:123)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-04 12:37:11.299: E/AndroidRuntime(759):  at java.lang.reflect.Method.invokeNative(Native Method)
01-04 12:37:11.299: E/AndroidRuntime(759):  at java.lang.reflect.Method.invoke(Method.java:507)
01-04 12:37:11.299: E/AndroidRuntime(759):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-04 12:37:11.299: E/AndroidRuntime(759):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-04 12:37:11.299: E/AndroidRuntime(759):  at dalvik.system.NativeStart.main(Native Method)
01-04 12:37:11.299: E/AndroidRuntime(759): Caused by: java.io.FileNotFoundException: Corrupt XML binary file
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.content.res.AssetManager.openXmlAssetNative(Native Method)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:486)
01-04 12:37:11.299: E/AndroidRuntime(759):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1898)
01-04 12:37:11.299: E/AndroidRuntime(759):  ... 31 more 
```

这是我新添加到项目中的代码。我正在创建自定义微调器样式。

```
ArrayAdapter<String> dataAdapter3 = new ArrayAdapter<String>

    (this,R.drawable.spinner,R.id.textView2, list3);
                dataAdapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spinner1.setAdapter(dataAdapter3); 
```

我确定这不是清理项目，或者在 log cat 中提到 hdpi 文件夹中不存在图像。因为如果我用我以前的应用程序替换上面的 ArrayAdaptor 代码，它会运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:57:07.977

我认为你在这里犯了一个错误

```
(this,R.drawable.spinner,R.id.textView2, list3); 
```

将其替换为

```
(this,R.id.spinner,R.id.textView2, list3); 
```

如果它不起作用，

使用布局而不是 id，

```
(this,R.layout.yourxmlfile,R.id.textView2, list3); 
```

# android - 没有从 SharedPreference 获取整数值

> ID：14153286
> 
> 赞同：1
> 
> 时间：2013-01-04T07:55:56.010
> 
> 标签：android, get, int, sharedpreferences

我正在尝试将用户 ID 存储在 SharedPreference 中的一个活动中，并希望在任何活动中获取此整数 ID。
要将此值放入 Shared Preference 中，我使用以下代码。

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putInt("userId", varaible);                 
prefsEditor.commit(); 
```

然后我试图获得这个值，我为此使用以下代码

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    int userId = myPrefs.getInt("userId", -1); 
```

但它返回我 -1 而不是 userId。如果我使用以下行来获取整数值，那么它将显示运行时异常。

```
 int userId = myPrefs.getInt("userId", Integer(null)); 
```

我不明白我的代码有什么问题。如何在我的另一个活动中获取此整数用户 ID。
请给我任何参考或提示。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:52:03.530

您的代码没有任何问题，我测试了这个确切的案例，它运行良好。当然，您可以使用默认值**-1**。

你在同一个应用程序中有两个活动吗？

我对调试的建议是确保您的应用程序按照您期望的顺序运行并且该值被正确存储。您可以尝试将其存储在同一活动中后直接检索它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T07:57:44.350

改变这个：

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
int userId = myPrefs.getInt("userId", -1); 
```

对此

```
SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
int userId = myPrefs.getInt("userId", 0); 
```

它应该这样工作。

# selenium - Selenium2 sendkeys 方法的强制键盘布局

> ID：14153288
> 
> 赞同：1
> 
> 时间：2013-01-04T07:56:01.097
> 
> 标签：selenium

是否可以强制 Selenium2 webdriver sendkeys 方法在特定测试用例中使用特定键盘布局而不是 Windows 活动键盘布局？

我遇到的问题是我的默认键盘布局是“拉脱维亚语（撇号）”（在重音字母之前按下撇号）和

```
webdriver.findElement(By.name("lastName")).sendKeys("O'Neill"); 
```

实际上在字段中输入为“OŅeill”。

PS 找不到，但也许有一些 Selenium2 webdriver 方法可以在不输入的情况下将字段值设置为一个整体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:44:48.690

我也没有找到任何解决方案。所以我的解决方案实际上是，我系统中的默认布局是英语，对于特定应用程序（邮件），我手动将键盘切换到我需要的布局（在我的情况下是捷克语）

请在此处查看我的问题：[将符号 ("@") 转换为 CharSequence](https://stackoverflow.com/questions/7186474/convert-at-symbol-to-charsequence)

我接受了一个答案，它为解决方法提供了很好的提示，但它不能 100% 工作

# android - 使用 Toast 时出错

> ID：14153294
> 
> 赞同：-2
> 
> 时间：2013-01-04T07:57:06.280
> 
> 标签：android

我使用 Toast 来显示一些消息，但遇到了一些问题。有我的代码：

```
 private Button btPush;
    private EditText etxMessage;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        btPush = (Button) findViewById(R.id.btPushMe);
        btPush.setOnClickListener(sayHello);

        etxMessage = (EditText) findViewById(R.id.editText1);
    }

    View.OnClickListener sayHello = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            LayoutInflater inflated = getLayoutInflater();
            View layout = inflated.inflate(R.layout.activity_main,(ViewGroup) findViewById(R.id.layout));
            String string = etxMessage.getText().toString();
            Toast toast = new Toast(getApplicationContext());
            toast.setText(string);
            toast.setGravity(Gravity.TOP|Gravity.LEFT, 0, 0);
            toast.setDuration(Toast.LENGTH_LONG);
            toast.setView(layout);
            toast.show();
            //Toast.makeText(getApplicationContext(),string,Toast.LENGTH_SHORT).show();
        }
    }; 
```

如果我使用：

```
Toast.makeText(getApplicationContext(),string,Toast.LENGTH_SHORT).show(); 
```

有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:30:22.917

Toast.makeText(YourActivity.this,"你的文字在这里", Toast.LENGTH_LONG).show();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:04:54.317

尝试这个：

```
LayoutInflater inflated = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inflated.inflate(R.layout.activity_main, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:03:26.590

你可以试试这个..如果错误仍然存​​在，然后粘贴你的 log-cat 输出，我们很容易给你答案

```
 Toast msg = Toast.makeText(ToastExample.this,"YOUR TEXT HERE", Toast.LENGTH_LONG);     
   msg.show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:07:46.453

尝试像这样膨胀的布局：

```
LayoutInflater inflated = LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
View layout = inflated.inflate(R.layout.activity_main, null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-17T10:53:16.170

使用 Toast 显示消息的多种方法...

使用 Toast 对象 ...
**Toast toast = new Toast(YourClassName.this);**

或尝试从单击事件显示然后使用此代码...但是此“v”是 View 的对象。

**Toast toast = new Toast(v.getContext());**

或者

下面的代码你可以在 YourActivityClass 的任何地方使用...
**Toast.makeText(YourClassName.this,"Your Message",Toast.LENGTH_LONG).show();**

# sql - 将 ADO.net SqlParameters 作为可选列表/数组/其他传递给方法的整洁方式

> ID：14153296
> 
> 赞同：2
> 
> 时间：2013-01-04T07:57:23.540
> 
> 标签：sql, vb.net, ado.net, overriding

我有一个非常简单的 ADO.net 帮助类（[在此处复制](http://www.heavencore.co.uk/forum/viewthread.php?thread_id=185&pid=423#post_423)），它帮助我们从使用经典 adodb 迁移到 ado.net，即使用*非常*简单：

```
Public db As New SimpleDataAccess
Public RS As New DataTable

db.ConnectionStringName = "DEV"
db.ConnectDatabase()
db.Execute_Query(RS, "SELECT * FROM whatever WHERE IntColumn = " & tools.parseint(EmployeeID, 0) & " or TextColumn = '" & db.Escape("bla'blabla") & "'")
For Each DB_Row As DataRow In RS.Rows
   response.write(DB_Row("IntColumn"))
Next
db.CloseDatabase() 
```

现在，虽然这很好用，但它依赖于用户使用`parseint()`and`Escape()`函数来防止 sql 注入等（甚至以粗略的方式） - 我想做的是开发 以某种方式接受的`Execute_NonQuery()`&`Execute_Query()`函数的第二个版本`SqlParameter()'s`.

将 mutliple`SqlParameter()'s`可选地传递给`Execute_NonQuery()`&`Execute_Query()` 方法的最整洁的方法是什么？

PS：这仅用于 .net 2.0 和 .net 3.5 框架

**编辑 1 - 我的第一次尝试**

在我的第一次尝试中，我刚刚给该方法一个新名称（V2），您还会注意到，我添加了一个名为的可选参数`ParamList`，它是`List(Of SqlParameter)`：

```
Public Function Execute_QueryV2(ByRef TargetDataTable As DataTable, ByVal CommandText As String, Optional ByVal ParamList As List(Of SqlParameter) = Nothing, Optional ByVal CommandType As CommandType = CommandType.Text) As Boolean
    If CommandText = "" Then
        m_ErrorDesc = "Error running query: Query text was blank"
        EmailError(m_ErrorDesc)
        Return False
    Else
        Try
            NukeDataTable(TargetDataTable)
            m_db_Command = New SqlCommand(CommandText, m_db)
            m_db_Command.CommandType = CommandType
            If IsNothing(ParamList) = False Then
                For i As Integer = 0 To ParamList.Count - 1
                    m_db_Command.Parameters.Add(ParamList(i))
                Next
            End If
            m_db_DataAdapter.SelectCommand = m_db_Command
            m_db_DataAdapter.Fill(TargetDataTable)
            m_db_DataAdapter.Dispose()
            Return True
        Catch ex As Exception
            m_ErrorDesc = "Error running query: " & ex.Message & "<br /><br />Query:<hr />" & CommandText
            EmailError(m_ErrorDesc)
            Return False
        End Try
    End If
End Function 
```

这意味着我的用法可以如下完成：

```
Dim QueryParameters As New List(Of SqlParameter)
QueryParameters.Add(New SqlParameter("@value", Trim(Request.QueryString("value"))))
db.Execute_QueryV2(rs, "SELECT * FROM whatever WHERE value = @value", QueryParameters) 
```

我唯一的问题是任何使用我的 db 类的页面都需要包含`System.Collections.Generic`- 有没有一种更简便的方法来做到这一点，不需要在所有调用页面中额外包含？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:06:49.320

您不能覆盖非虚拟方法。但是，您可以创建从 SimpleDataAccess 类派生的新类并将新方法标记为 Shadows。此外，要对您的班级用户隐藏它，请使用[EditorBrowsable(EditorBrowsableState.Never)](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx)属性对其进行标记。现在，VS 智能不会显示它，您可以使用所需的签名创建新的公共方法。

**更新** 我会传递命令对象本身。它包含参数列表和所有必需的基础设施。如果不可能，我会创建一个 Dictionary，它是一个包含对 parameterName 及其值的字典，或者一个 List 对象，其中包含设置了值的所需参数列表。

# c# - 反序列化来自第三方 DLL 的二进制序列化实例提供未初始化/空实例

> ID：14153302
> 
> 赞同：1
> 
> 时间：2013-01-04T07:57:49.453
> 
> 标签：c#, properties, deserialization

我有一组文件，其中包含来自第三方 dll 的类的二进制序列化实例。我无权访问第三方源代码，但我有 dll。我需要将这些文件反序列化为类的实例。

我只是这样做：

```
Stream stream = File.Open(@"C:\my\path", FileMode.Open);
BinaryFormatter binaryFormatter = new BinaryFormatter();
ThirdPartyType o = binaryFormatter.Deserialize(stream) as ThirdPartyType;
stream.Close(); 
```

这没有错误。当我在调试模式下运行项目并在反序列化后放置断点时，我可以检查实例`o`。的所有成员`o`都创建了实例`null`，`0`但没有成员被初始化为正确的值。

我尝试反编译 dll（使用 .Net Reflector）并在以下位置插入断点：

```
protected ThirdPartyType(SerializationInfo info, StreamingContext context) {} 
```

现在我可以检查参数`info`，在这里我可以看到成员`m_types`, `m_members`&`m_data`被设置为我期望从序列化文件中获得的正确值。但是，由于某种原因，构造函数不会使用它并正确初始化实例。我只能看到这个构造函数头，反编译不会显示它的代码。

为了自己控制初始化，我创建了该类的本地子类：

```
[Serializable]
public class FakeThirdPartyType : ThirdPartyType
{
    protected FakeThirdPartyType(SerializationInfo info, StreamingContext context) : base(info, context)
    {
        int width = info.GetInt32("clientWidth");
        this.ClientWidth = width;
        //Many other properties as well...
    }
} 
```

然后我将 my 绑定`BinaryFormatter`到请求时`SerializationBinder`返回的 a （以及任何其他调用的正确类型）。现在，当我运行它时，我得到了我的反序列化构造函数。但在这里我有一个非常奇怪的问题。我可以看到它被分配了正确的值（），但在下一行之后仍然是. 与以下结果相同：`FakeThirdPartyType``ThirdPartyType``width``!=0``this.ClientWidth``0`

```
base.GetType().GetProperty("ClientWidth").SetValue(this, width, null); 
```

可能有什么我做错了吗？我遇到的问题可能是由交叉汇编反序列化引起的吗？错误是否可能在于我无法访问的第三方代码？似乎属性的设置器不起作用（至少不影响与 getter 返回相同的变量）。

在调试期间，我可以检查`ThirdPartyType`类型并查看它是否具有私有字段`_clientWidth`，但我找不到任何直接设置它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T02:27:48.813

经过一些反编译后，该类的属性都如下所示：

```
 public int Property
    {
        [MethodImpl(MethodImplOptions.NoInlining)]
        get
        {
            return 0;
        }
        [MethodImpl(MethodImplOptions.NoInlining)]
        set
        {
        }
    }

    public Object Property2
    {
        [MethodImpl(MethodImplOptions.NoInlining)]
        get
        {
            return null;
        }
    } 
```

这当然是导致反序列化后所有值都为 null 和 0 的原因。为什么这些属性是这样的，虽然是一个谜。但这不在这个问题的范围内。

# javascript - 将多个css规则分配给javascript中的元素

> ID：14153310
> 
> 赞同：0
> 
> 时间：2013-01-04T07:58:29.497
> 
> 标签：javascript, html, css

这是几行用于动态创建 div 元素的 java 脚本代码。但我的疑问是在创建该元素之后，是否有任何快捷方式来分配多个 css 规则，而不是一次又一次地键入 (container.style)。

```
<script>
    (function(){
        window.onload = function(){
            var container = document.createElement('div');
            container.style.width = '500px';
            container.style.height = '200px';
            container.style.backgroundColor = 'red';
            container.style.margin = '0 auto';

            document.body.appendChild(container);
        }
    }());
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T08:03:08.687

使用 CSS 类并将类分配给元素：

```
.MyClass {
   width: 500px;
   height: 200px;
   background-color: red;
   margin: 0 auto;
} 
```

然后`container.className = "MyClass";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:17:45.170

您可以使用`for`循环来迭代对象，将属性一一应用到样式属性：

```
(function(){
    window.onload = function(){
        var container = document.createElement('div'),
            styles = {
                "width": "500px",
                "height": "200px",
                "backgroundColor": "red",
                "margin": "0 auto"
            },
            i;
        for (i in styles) {
            container.style[i] = styles[i];
        }

        document.body.appendChild(container);
    }
}());​ 
```

值得注意的是，这比原始代码长：-p 如果将`for`循环包装在另一个函数中并重复使用该函数，它可能会很有用。如果您发现自己反复需要这个，我强烈建议您包含[jQuery](http://jquery.com/)（或[ZeptoJS](http://zeptojs.com/)）并使用[`.css(…)`](http://api.jquery.com/css/)来应用 CSS。jQuery 在应用属性时对属性进行了几次转换……它将属性名称中的连字符更改为正确的驼峰式大小写，进行更改以应用 IE 的正确属性或属性值等。它使编码更加容易，并且任何未来代码维护者也将从这种便利中受益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:26:04.650

您可以编写自己的`css`函数：

```
<script>
    (function(){
        window.onload = function(){
            var container = document.createElement('div');
            css(container,
                {'width': '500px',
                 'height': '200px',
                 'backgroundColor': 'red',
                 'margin': '0 auto'});

            document.body.appendChild(container);
        }

        function css(element, style){
            for(key in style){
                if(style.hasOwnProperty(key)){
                    element.style[key] = style[key];
                }
            }
        }
    }());
</script> 
```

然后，您可以将该`css()`函数重新用于其他元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:04:45.183

你可以这样使用

```
var container = document.createElement('div');
                container.setAttribute("id","div1");
                document.body.appendChild(container);

$("#div1").css({"width":"500px","height":"200px","background-color":"red"}); 
```

[演示](http://jsfiddle.net/Dineshkani/bc9Hn/)

# xml - 使用 xslt 获取第一个 xml 块的标签名称

> ID：14153324
> 
> 赞同：1
> 
> 时间：2013-01-04T07:59:33.630
> 
> 标签：xml, xslt

我有一个非常大的 xml，其中一个块不断重复。现在我只想要第一个块的标签名称。我的 xsl 很差。我试过但徒劳无功。请任何人帮助。我的 xml 如下所示，

```
<catalog>
<product>
<title>GATE MCQ For Electronics &amp; Communication Engineering</title>
<originalprice>Rs 680</originalprice>
<sellingprice>Rs 680Rs 530</sellingprice>
<discount>22% Off</discount>
<payment>Cash on delivery available</payment>
<review/>
</product>
<product>
<title>Gate Guide Computer Science / Information Technology (with CD)</title>
<originalprice>Rs 695</originalprice>
<sellingprice>Rs 695Rs 480</sellingprice>
<discount>31% Off</discount>
<payment>Cash on delivery available</payment>
<review/>
</product> 
```

产品块不断重复但具有不同的值。我现在使用的 xsl 是，

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns="http://www.java2s.com"
            xmlns:xsd="http://www.w3.org/2000/10/XMLSchema"
            version="1.0">

<xsl:output method="xml" indent="yes"/>

<xsl:template match="//*[local-name() = 'product'][1]/*">

<xsl:value-of select="name()"/>
</xsl:template>

</xsl:stylesheet> 
```

得到的输出是，

```
 title
    originalprice
    sellingprice
    discount
    payment 
    review 

   Gate Guide Computer Science / Information Technology (with CD)
   Rs 695
   Rs 695Rs 480
   31% Off
   Cash on delivery available 
```

但所需的输出是，

```
 title
    originalprice
    sellingprice
    discount
    payment 
    review 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:22:53.597

你需要从根开始你的模板（通过匹配'/'），然后限制你想要使用'apply-templates'处理的元素，如下所示：

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns="http://www.java2s.com"
            xmlns:xsd="http://www.w3.org/2000/10/XMLSchema"
            version="1.0">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:template match="/">
    <xsl:apply-templates select="/catalog/product[position() = 1]"/>
  </xsl:template>
  <xsl:template match="product">
    <xsl:for-each select="./*">
      <xsl:value-of select="name()"/>
      <xsl:text>
      </xsl:text>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

这将产生所需的输出......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T12:59:06.183

**就这么简单**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="product[1]/*">
     <xsl:value-of select="concat(name(), '&#xA;')"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<catalog>
    <product>
        <title>GATE MCQ For Electronics &amp; Communication Engineering</title>
        <originalprice>Rs 680</originalprice>
        <sellingprice>Rs 680Rs 530</sellingprice>
        <discount>22% Off</discount>
        <payment>Cash on delivery available</payment>
        <review/>
    </product>
    <product>
        <title>Gate Guide Computer Science / Information Technology (with CD)</title>
        <originalprice>Rs 695</originalprice>
        <sellingprice>Rs 695Rs 480</sellingprice>
        <discount>31% Off</discount>
        <payment>Cash on delivery available</payment>
        <review/>
    </product>
</catalog> 
```

**产生了想要的正确结果：**

```
title
originalprice
sellingprice
discount
payment
review 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:03:25.503

`"//*"`是“从根开始的所有节点”，您可能需要更严格的 XPath，例如“/catalog/product/*”（`local-name`如果您不想正确处理命名空间，则与函数类似）。

# json - 包含关系（PK、FK）的 EF 实体不能被 Json 编辑？

> ID：14153325
> 
> 赞同：0
> 
> 时间：2013-01-04T07:59:41.337
> 
> 标签：json, entity-framework

我已经建立了一个非常简单的数据库模式

```
**Tickets**:
TicketId (PK)
AreaId (FK)
SeverityId (FK)
AssigneeId (FK)

**Areas**:
AreaId(PK)
AreaName

**Severities**:
SeverityId(PK)
SeverityName

**Assignees**:
AssigneeId(PK)
AssigneeName 
```

我创建实体模型，并在 TicketController 中尝试检索并 Json 的门票表中的数据。

```
[HttpPost]
public ActionResult Index([DataSourceRequest]DataSourceRequest result)
{
var tickets = db.Tickets.Include(t=> t.Areas).Include(t=> t.Assignees).Include(t=> t.Severities)

DataSourceResult result = tickets.ToDataSourceResult(request);

Return Json(result);
} 
```

出于某种原因，当我将结果 Json 以将其传递给视图中的 KendoUiGrid 时，我无法理解，我得到“循环引用错误”。**我在我的表/实体关系中看不到循环引用！！**

在剑道文档中，我读到了这个

> 如果您决定直接使用 Kendo UI JavaScript 库，返回 JSON 很简单。您只需要定义一个控制器方法并在返回结果上调用 this.Json。如果 .NET 可以序列化您的响应，这就是它的全部。

以上所有是否意味着实际上我不能使用来自具有主/外键的健全数据库模式的 Json 实体？

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:25:25.193

尝试禁用延迟加载。可能是它试图将数据库中的所有内容序列化为 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T22:19:25.423

创建一个平面模型类并将模型传递给 Json 和 Grid。您将不得不比您在此处尝试执行的操作更多地手动填充模型，但是拥有模型还有其他好处，您稍后会发现。循环引用是因为 EF 类的导航属性。在 MVC 中，模型并不意味着数据模型类，而是您创建的新类。做得好，新模型应该完成大部分工作，验证，翻译等。控制器只是传递东西，视图只是渲染。希望这可以帮助！

# objective-c - 在 OS X App Sandbox 中更新文件的最佳实践

> ID：14153327
> 
> 赞同：0
> 
> 时间：2013-01-04T08:00:18.027
> 
> 标签：objective-c, cocoa, sandbox, appstore-sandbox

我知道将非沙盒应用程序迁移到应用程序沙盒的方法，尽管我想知道一旦已经在应用程序沙盒容器中更新文件（主要是首选项列表）的最佳实践是什么？

最终，如果有一种类似的方法可以`NSUserDefaults`在应用程序沙箱容器中更新我的偏好列表，这就是我想要做的。

我读过的资料：

•[应用沙盒设计指南](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/MigratingALegacyApp/MigratingAnAppToASandbox.html)

• [NSUserDefaults 类参考](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

•[应用沙盒](https://developer.apple.com/devcenter/mac/app-sandbox/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:03:26.530

如果您实际存储首选项，只需使用 NSUserDefaults。它在沙箱内部和外部的工作方式相同（从 API 的角度来看）。最好假装偏好没有存储在 plist 中。依赖该实现细节可能会对最近的操作系统产生各种不幸的副作用，因此只需使用 API。

如果您尝试修改任意 plist 而不是存储首选项，*请不要*使用 NSUserDefaults。使用 NSPropertyListSerialization 并直接读/写它们。

# javascript - 为什么使用 jQuery trigger() 调用时事件 args 没有值？

> ID：14153330
> 
> 赞同：2
> 
> 时间：2013-01-04T08:00:29.353
> 
> 标签：javascript, jquery, jquery-events, hammer.js, eventtrigger

我尝试使用触发事件。如果我用手独立触发事件，我就没有问题，并且事件参数包含我需要的所有字段。如果我使用 jQuery`trigger()`一切正常，但事件参数几乎一无所获。

```
<div id="dragDiv">
    <button id='dragButton' >tap</button>
</div>

$("#dragButton")
   .hammer({
        // options...
   })
   .bind("drag", doCall);

function doCall(ev){
    console.log(ev);
}

$('#dragButton').trigger("drag"); 
```

结果

```
v.Event {type: "drag", timeStamp: 1357286124612, jQuery18306904058358632028: true, isTrigger: true, exclusive: undefined…}
currentTarget: <button>
data: null
delegateTarget: <button>
exclusive: undefined
handleObj: Object
isTrigger: true
jQuery18306904058358632028: true
namespace: ""
namespace_re: null
result: undefined
target: <button>
timeStamp: 1357286124612
type: "drag"
__proto__: Object 
```

但是我需要：

```
v.Event {type: "drag", originalEvent: MouseEvent, position: Object, direction: "right", distance: 22.825424421026653…}
angle: -28.810793742973058
currentTarget: <button>
data: null
delegateTarget: <button>
direction: "right"
distance: 22.825424421026653
distanceX: 20
distanceY: -11
exclusive: undefined
handleObj: Object
isTrigger: true
jQuery18306904058358632028: true
namespace: ""
namespace_re: null
originalEvent: MouseEvent
position: Object
result: undefined
target: <button>
timeStamp: 1357286139160
touches: Array[1]
type: "drag"
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:17:05.403

这是正确的行为，因为缺少的属性是用户操作相关的，或者是指触发事件的原始用户操作，如果通过 jQuery 触发事件，这些属性显然是未定义的。

你的期望是什么？如果您希望自动填充这些值，则它们不能，因为它们需要一个标准。如果您知道在事件中需要什么值，或者您可以在触发事件时指定它，请以这种方式传递它们：

```
var event = jQuery.Event("drag");
event.missingproperty = "myvalue";
event.anothermissingproperty = "anothervalue";
$("selector").trigger(event); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:21:44.647

出于安全考虑，当您使用 javascript 触发事件时，它的注册方式与用户触发事件时不同。你会注意到在你的输出中有一个

```
isTrigger: true 
```

自己触发事件总是与用户触发事件不同。

# powershell - 我可以在批处理文件中使用 sharepoint 2010 powershell 吗？

> ID：14153332
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:00:45.657
> 
> 标签：powershell, sharepoint-2010, batch-file

可以使用包含 power shell 命令的批处理文件来管理 sharepoint 2010 及其用户配置文件、角色吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:13:39.177

有专门的 cmdlet 来管理 sharepoint 2010：请参阅[此链接](http://blogs.technet.com/b/heyscriptingguy/archive/2010/09/20/get-started-managing-sharepoint-2010-with-powershell-cmdlets.aspx)

但是，如果你想使用现有的批处理，你可以在 powershell 中这样调用它们

```
PS>cmd /c "C:\temp\test.cmd param1 param2" 
```

# c# - 解析“2013-Jan-31”格式的日期时间会引发错误

> ID：14153334
> 
> 赞同：2
> 
> 时间：2013-01-04T08:00:54.127
> 
> 标签：c#, .net, datetime, exception-handling, datetime-parsing

我在数据库中有一个日期时间列。

```
DateTime end_date = DateTime.ParseExact("2013-Jan-31", "yyyy-MM-dd", CultureInfo.InvariantCulture); 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:04:12.870

这不起作用，因为`MM`这意味着一月是 01。如果这是您尝试解析的日期的格式，请尝试使用 format `"yyyy-MMM-dd"`。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:04:37.380

试试这样；

```
DateTime a = DateTime.ParseExact("2013-Jan-31", "yyyy-MMM-dd", System.Globalization.CultureInfo.InvariantCulture);
Console.WriteLine (a); 
```

输出：

```
31.01.2013 
```

从 MSDN 看[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T08:11:12.333

要使用这样的月份名称，您需要使用“MMM”，这样它将是

```
 myObject.end_date = DateTime.ParseExact("2013-Jan-31", "yyyy-MMM-dd", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T08:05:49.920

`MM`表示两位数的月份（例如“01”）。

`MMM`表示缩写月份（如“Jan”）。

这意味着你需要

```
myObject.end_date = DateTime.ParseExact("2013-Jan-31", "yyyy-MMM-dd", System.Globalization.CultureInfo.InvariantCulture); 
```

有关字符串格式说明符的列表，请参阅[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

# haskell - 连接相同含义但返回值类型不同的函数的最简单方法

> ID：14153342
> 
> 赞同：1
> 
> 时间：2013-01-04T08:02:02.927
> 
> 标签：haskell

我正在编写小型“hello world”类型的程序，它按不同的“原因”对相同的文件进行分组，例如相同的大小、相同的内容、相同的校验和等。

因此，当我想编写这样的函数时，我已经到了关键点（DuplicateReason 是一种代数类型，它说明了两个文件相同的原因）：

```
getDuplicatesByMethods :: (Eq a) => [((FilePath -> a), DuplicateReason)] -> IO [DuplicateGroup] 
```

在每个元组中，第一个函数将是通过文件路径返回一些（Eq a）值的函数，例如字节串（带有内容），或带有校验和的 Word32，或带有大小的 Int。

显然，Haskell 不喜欢这些函数的类型不同，所以我需要以某种方式收集它们。

我看到它创建类型的唯一方法是

```
data GroupableValue = GroupString String | GroupInt Int | GroupWord32 Word32 
```

然后为了让生活更轻松，让 typeclass 像

```
class GroupableValueClass a where
  toGroupableValue :: a -> GroupableValue
  fromGroupableValue :: GroupableValue -> a 
```

并为我要获得的每个值实现实例。

问题：我做对了吗？（如果没有）有没有更简单的方法来解决这个任务？

更新：

这是完整的最小代码，应该描述我想要的（简化，没有 IO 等）：

```
data DuplicateGroup = DuplicateGroup

-- method for "same size" -- returns size
m1 :: String -> Int
m1 content = 10

-- method for "same content" -- returns content
m2 :: String -> String
m2 content = "sample content"

groupByMethods :: (Eq a) => [(String -> a)] -> [DuplicateGroup]
groupByMethods predicates = undefined

main :: IO ()
main = do
  let groups = (groupByMethods [m1, m2])
  return () 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:24:53.610

列表总是同质的，因此您不能将不同的项目放入同一个`a`列表中（如您所见）。有几种方法可以解决这个问题，但我通常更喜欢使用[GADTs](http://en.wikibooks.org/wiki/Haskell/GADT)。例如：

```
{-# LANGUAGE GADTs #-}

import Data.ByteString (ByteString)
import Data.Word

data DuplicateReason = Size | Checksum | Content
data DuplicateGroup

data DuplicateTest where
    DuplicateTest :: Eq a => (FilePath -> IO a) -> DuplicateReason -> DuplicateTest

getSize :: FilePath -> IO Integer
getSize = undefined

getChecksum :: FilePath -> IO Word32
getChecksum = undefined

getContent :: FilePath -> IO ByteString
getContent = undefined

getDuplicatesByMethods :: [DuplicateTest] -> IO [DuplicateGroup]
getDuplicatesByMethods = undefined 
```

这个解决方案仍然需要一个新类型，但至少您不必提前指定所有案例或创建样板类型类。现在，由于泛型类型`a`本质上是“隐藏”在 GADT 中，因此您可以定义一个列表，其中包含具有不同返回类型的函数，并包装在`DuplicateTest`GADT 中。

```
getDuplicatesByMethods
    [ DuplicateTest getSize Size
    , DuplicateTest getChecksum Checksum
    , DuplicateTest getContent Content
    ] 
```

您也可以在不使用任何语言扩展或引入新类型的情况下通过简单地重新考虑您的函数来解决这个问题。主要目的是根据某些属性对文件进行分组`a`，因此我们可以定义`getDuplicatesByMethods`为

```
getDuplicatesByMethods :: [([FilePath] -> IO [[FilePath]], DuplicateReason)] -> IO [DuplicateGroup] 
```

即，我们采用根据某些标准对文件进行分组的功能。然后我们可以定义一个辅助函数

```
groupWith :: Eq a => (FilePath -> IO a) -> [FilePath] -> IO [[FilePath]] 
```

`getDuplicatesByMethods`像这样打电话

```
getDuplicatesByMethods
    [ (groupWith getSize, Size)
    , (groupWith getChecksum, Checksum)
    , (groupWith getContent, Content)
    ] 
```

# android - java.lang.RunTimeException：恢复相机活动时在 release() 之后调用的方法

> ID：14153343
> 
> 赞同：1
> 
> 时间：2013-01-04T08:02:12.257
> 
> 标签：android, android-camera

首先，我想说我已经广泛研究了这个问题，我意识到这个网站（和其他网站）已经提出了很多解决方案，但绝对没有一个对我有用。

拍照后，我的应用程序允许用户将 Exif 标签添加到照片中。添加数据后，我希望用户能够返回相机并继续拍照。但是，在返回我的相机活动`java.lang.RunTimeException: Method called after release()`时，当我尝试拍摄另一张照片时遇到上述错误。

现在我意识到这是因为我在发布相机后尝试使用相机，并且根据 Android API 我需要`open()`在我的`onResume()`方法中重新使用相机。但是，当我这样做时，我得到了一个`Failed to connect to camera service`错误。许多人还建议将其放入`mCamera.setPreviewCallback(null)`该`onResume()`方法中，但这也会导致`Method called after release()`错误。

这是我的logCat：

```
01-04 10:03:08.187: E/AndroidRuntime(1876): FATAL EXCEPTION: main
01-04 10:03:08.187: E/AndroidRuntime(1876): java.lang.RuntimeException: Method called      
                                            after release()
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.hardware.Camera.native_takePicture(Native Method)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.hardware.Camera.takePicture(Camera.java:789)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.hardware.Camera.takePicture(Camera.java:753)
01-04 10:03:08.187: E/AndroidRuntime(1876): at com.example.unititest.CameraActivity$6.onClick(CameraActivity.java:180)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.view.View.performClick(View.java:2485)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.view.View$PerformClick.run(View.java:9080)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.os.Handler.handleCallback(Handler.java:587)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.os.Handler.dispatchMessage(Handler.java:92)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.os.Looper.loop(Looper.java:123)
01-04 10:03:08.187: E/AndroidRuntime(1876): at android.app.ActivityThread.main(ActivityThread.java:3687)
01-04 10:03:08.187: E/AndroidRuntime(1876): at java.lang.reflect.Method.invokeNative(Native Method)
01-04 10:03:08.187: E/AndroidRuntime(1876): at java.lang.reflect.Method.invoke(Method.java:507)
01-04 10:03:08.187: E/AndroidRuntime(1876): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-04 10:03:08.187: E/AndroidRuntime(1876): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-04 10:03:08.187: E/AndroidRuntime(1876): at dalvik.system.NativeStart.main(Native Method) 
```

抛出错误的地方：

```
 // Add a listener to the Capture button
        Button captureButton = (Button) findViewById(R.id.button_capture);
        captureButton.setOnClickListener(
            new View.OnClickListener() 
            {
                @Override
                public void onClick(View v) 
                {
                    //Picture is taken and saved to file
                    //ERROR IS THROWN HERE  
                    mCamera.takePicture(null, null, mPicture);
                }
            }           
        ); 
```

# java - “SparseArray - 索引中可能存在空白”是什么意思？

> ID：14153345
> 
> 赞同：2
> 
> 时间：2013-01-04T08:02:24.800
> 
> 标签：java, android, data-structures, containers, sparse-array

开发一个程序，它使用哈希映射，整数作为键，对象作为值。我不断收到 Lint 警告，通知 SparseArray 更有效，当我读到此[链接](http://developer.android.com/reference/android/util/SparseArray.html)中给出的相同内容时，索引中可能存在空白。这实际上意味着什么，我无法得到。

这是否意味着，如果我有像 1,5、10 这样的键，那么数组大小将为 3，索引为 1、5、10。（或）数组大小将为 11，存在 1、5、10 个索引的对象，其余为空?

请澄清一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T08:12:21.240

效率的提高`SparseArray`不仅是由于结构不同（正如其他答案所指出的那样），而且还因为您在用作键时避免了[自动装箱。](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)`int`

换句话说，当使用 eg 时`map.get(1)`，您实际上是在执行`map.get(Integer.valueOf(1))`. 也就是说，您正在将原语转换`int`为`Integer`类实例。

有了`SparseArray`，就没有这种类型的转换，你只是在使用`int`. 查看自动装箱链接了解更多详情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:08:16.910

如果您查看[SparseArray 的源代码，](http://www.netmite.com/android/mydroid/frameworks/base/core/java/android/util/SparseArray.java)它会更有意义。它只有两个数组——一个包含键，另一个包含值；所以你的第一个推理是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:06:37.780

您可以从示例中获得键 1、5 和 10，从而有效地产生 `SparseArray`长度为 3 的 a。

# php - mysql vs mysqli结果不一样？

> ID：14153346
> 
> 赞同：1
> 
> 时间：2013-01-04T08:02:29.217
> 
> 标签：php, mysql, mysqli

我有这个旧的 mysql 查询：

```
$sql = mysql_query("SELECT id FROM nf_users 
    WHERE points > 
        (SELECT points FROM nf_users WHERE id = 1) 
    AND played > 0");
$row = mysql_fetch_array($sql);

$rank = mysql_num_rows($sql)+1; 
```

这给出了`$rank`的值`2578`。现在，如果我尝试像这样对 mysqli 做同样的事情：

```
$sql = mysqli_query($connect,"SELECT id FROM nf_users 
    WHERE points > 
        (SELECT points FROM nf_users WHERE id = 1) 
    AND played > 0");
$row = mysqli_fetch_array($sql);

$rank = mysqli_num_rows($sql)+1; 
```

现在`$rank`只说`1`？

我究竟做错了什么？

请提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:27:13.203

好吧，除了最有可能由简单的错字引起的 num_rows 问题之外，还有更重要的事情要提一下：

选择行而不是它们的计数是一种非常糟糕的做法，这会给您的应用程序带来不必要的负载。始终要求您的数据库进行计数，而不是 API

```
$sql = "SELECT count(*) FROM nf_users 
        WHERE points > (SELECT points FROM nf_users WHERE id = 1) 
        AND played > 0";
$res  = mysqli_query($connect,$sql) or trigger_error(mysqli_error($connect)." [$sql]");
$row  = mysqli_fetch_row($res);
$rank = $row[0]+1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T09:15:50.510

您的`mysql_xxx()`代码和您的`mysqli_xx()`代码都不会检查错误。

这是你的根本错误。优雅地处理错误和意外事件是编写健壮代码的关键之一。

在这种情况下，很清楚发生了什么：原来`mysql_query()`的工作正常，但`mysqli_query()`抛出错误。在没有错误处理程序的情况下，程序正在获取 num 行（这是`false`由于错误），加 1，最终结果为 1。

这一点很清楚。所以问题不是“发生了什么”，而是“为什么”？

这里没有足够的代码可以确定，但是两个代码片段之间的明显区别在于`$connect`变量的引入。

正如您显然已经知道的那样，这些`mysqli`函数要求您传递连接对象，而旧`mysql`函数不需要（如果您不传递它，它们默认为隐藏的全局连接 - 这是导致的设计缺陷之一旧的`mysql`扩展被认为不好使用）。

我的猜测是，尽管您正在传递`$connect`，但实际上并未填充连接变量。我能想到的最可能的原因是，如果连接是在程序的另一部分建立的，而您还没有传递`$connect`给这个函数。

但是，如果您添加一些错误处理，这将变得清晰。

# c++ - 类包含复制构造函数和赋值运算符时的继承行为

> ID：14153347
> 
> 赞同：1
> 
> 时间：2013-01-04T08:02:38.343
> 
> 标签：c++, inheritance, copy-constructor, assignment-operator

我无法理解这种行为。我有一个A类，

```
class A
{
public:
int ch;
char *s;
A()
{}
A(char *st):ch(0)
{
    s = new char[10];
    strcpy(s,st);

}
A(const A& rhs):ch(rhs.ch)
{
    s = new char[strlen(rhs.s)+1];
    strcpy(s,rhs.s);
}
const A& operator=(const A& rhs)
{
    char *temp = new char[strlen(rhs.s)+1];
    strcpy(temp,rhs.s);
    delete[] s;
    s=temp;
    ch = rhs.ch;
    return *this;
}
~A()
{
    delete []s;
}
}; 
```

到目前为止，一切都按预期进行，我能够测试我的复制构造函数和赋值运算符，它们工作正常。

现在我创建了一个子类 B，我收到了堆损坏错误。我无法理解，这是与 A 类析构函数相关的问题吗？? 下面是我的B班，

```
class B:public A
{

public:
int a;
B():a(0){}
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:05:40.507

要解决您的问题，您需要做的就是更换：

```
char *s; 
```

和

```
std::string s; 
```

只需通过 摆脱手动内存管理`char *`，这正是 C++ 为您提供的原因`std::string`。

> **可能是什么问题？**

您的不带任何参数的默认构造函数不会进行动态分配。
如果您通过此构造函数创建了类对象，则您的析构函数最终会`delete`生成一个未分配的指针，`new`从而导致未定义的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T08:06:28.577

在析构函数中， you `delete[] s;`，但在默认构造函数中，你没有`new[]`ed 。事实上，你甚至还没有初始化`s`.

基类的默认构造函数在您实例化派生类时被调用，因为否则您尚未初始化基类 ( `: A(...)`)。因此，您不知道要删除什么，甚至不知道明天早餐要吃什么，因为这是未定义的行为。

为了保持一致，`new[]`s 在默认构造函数中。为了避免头痛，我建议使用类似的东西`std::string`而不是字符指针。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T08:08:03.970

您的默认构造函数`A`不会初始化成员`s`（指针）：

```
A()
{} 
```

因此，当使用此构造函数构造元素时，当析构函数删除未初始化的元素时会崩溃：

```
~A()
{
  delete []s;
} 
```

类`B`使用默认构造函数`A`，因此会触发此问题。通过在默认构造函数中正确初始化所有成员来避免它：

```
A() : ch(), s(0)
{ } 
```

# html - 是否可以通过 Google Chrome 使用 URL 参数链接（通过#）到 PDF 中的目标？

> ID：14153348
> 
> 赞同：4
> 
> 时间：2013-01-04T08:02:51.540
> 
> 标签：html, pdf, cross-browser, anchor, url-parameters

`#`运算符通常用于引用 HTML 代码中的锚点。例如像这样：

```
<a href="http://www.example.com/mypage.html#myanchor">
  Open mypage.html and auto scroll down to myanchor
</a> 
```

我创建了一个 pdf，其中包含一个所谓的[`destinations`](http://forums.adobe.com/thread/438777). 其中一个目的地被命名为 mydestination。我想深度链接到这个目的地并编写了以下代码：

```
<a href="http://www.example.com/mydoc.pdf#mydestination">
  Open mydoc.pdf and auto scroll down to mydestination
</a> 
```

当我在 Internet Explorer 和 Mozilla Firefox 中单击链接时，mydoc.pdf 被打开并向下滚动到目标`mydestination`。当我单击 Google Chrome 中的链接时，mypage.pdf 已打开且未向下滚动。

这种替代语法`nameddest`在 IE 和 FF 中也可以正常工作，而在 Chrome 中则不行：

```
<a href="http://www.example.com/mydoc.pdf#nameddest=mydestination">
  Open mydoc.pdf and auto scroll down to mydestination
</a> 
```

作为一种解决方法，我实施了以下解决方案：

```
<a href="http://www.example.com/mydoc.pdf#page=2">
  Open mydoc.pdf and auto scroll down to page 2
</a> 
```

当我点击 IE、FF 和 Chrome 中的链接时，mydoc.pdf 被打开并向下滚动到第 2 页的开头。

因此，谷歌浏览器能够根据`#`运算符后提供的参数向下滚动。是否可以设置此参数以使其向下滚动到目的地？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-24T08:37:59.787

目的地是由“目的地”选项卡中的文本表示的链接的终点。目的地使您能够在 Adob​​e PDF 文档集合中设置导航路径。跨文档链接时建议链接到目标，因为与指向页面的链接不同，指向目标的链接不受在目标文档中添加或删除页面的影响。

在 Acrobat 7.0（专业版或标准版）中设置目的地：

1.  将缩放和页面位置设置为您希望在屏幕上显示的方式。

2.  选择视图 > 导航选项卡 > 目的地以打开“目的地”选项卡。

3.  从目的地选项卡中选择选项 > 新目的地。

4.  为目的地命名。

5.  通过将 #[destination name] 添加到链接 URL 的末尾来创建指向此目标的 HTML 链接。

例如，此 HTML 标记在名为 myfile.pdf 的 PDF 文件中打开名为“glossary”的目标：

或者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T09:13:57.760

这确实按预期工作。试试看或查看 Chromium 问题[95176](https://code.google.com/p/chromium/issues/detail?id=95176)和[144303](https://code.google.com/p/chromium/issues/detail?id=144303)。

# git - SVN 到 GIT 迁移与分支历史合并

> ID：14153350
> 
> 赞同：1
> 
> 时间：2013-01-04T08:03:02.537
> 
> 标签：git, svn, migration

关于 svn 到 git 迁移的另一个“愚蠢”问题：) 我有一个旧的 svn 存储库，里面有大约 20 个项目。

```
/
|-projectA
|-projectB
|-projectC
|.... 
```

我只想迁移 projectA 并保留其所有历史记录。听起来很简单 :) 但主要问题在于 projectA 内部的结构和修订历史。

```
/
|-projectA
|       |-trunk
|       |-branches
|       |         |-version 1.0 
|       |         |-version 1.1
|       |         |-version 1.2
|       |-tags 
```

*   2009：我们只有“主干”，所有更改都提交到主干
*   2010：基于主干创建分支版本 1.0。提交到主干并提交到 1.0 版（一些客户有来自主干的版本，一些来自分支）
*   2011：基于 1.0 版本创建分支版本 1.1。提交到主干，提交到版本 1.0 和 1.1
*   2012：基于 1.1 版本创建分支版本 1.2。提交到主干，提交到版本 1.0、1.1 和 1.2

现在我们要将所有客户升级到 1.2 版本并将项目迁移到 git。所以 **我想迁移到 GIT：**

*   具有历史意义的新项目主干：
    *   承诺 2009 年的主干
    *   提交到 2010 年的 1.0 版（表示为对主干的提交）
    *   提交到 2011 年的 1.1 版（表示为对主干的提交）
    *   提交到 2012 年的 1.2 版（表示为对主干的提交）

**我不想迁移的内容：**

*   标签
*   2010-2012 年期间的主干历史
*   2011-2012 年 1.0 版历史
*   2012 年版本 1.1 历史记录

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:18:14.387

不要试图迁移所有提交。这不值得努力。拍摄每个重要标签、分支等的快照，并以反映 SVN 中所做的方式将它们提交到 git 中。

取而代之的是，将 SVN 历史记录保存在服务器、CD、DVD 等上，以便您可以在需要时进行检查。你刚刚拯救了你的理智。

# eclipse - 打开eclipse时无法识别的vm选项

> ID：14153358
> 
> 赞同：1
> 
> 时间：2013-01-04T08:03:33.060
> 
> 标签：eclipse, java

我`eclipse.ini`按照帖子中的建议定制了我[的 Eclipse 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse#144349). 当我用这个 eclipse.ini 运行 eclipse 时。它在我的机器上运行良好。我向我的同事推荐了这些文件。他们中的一个有这个例外。

```
UnRecognized vm option -XX:ConcGCThreads . 
```

异常发生 jdk 版本 - 1.6.0_16 。

我正在使用 jdk `1.6.0_24`。我怎么知道 jdk 支持的所有 jvm 选项是什么`1.6.0_0`？.

**Eclipse.ini**

```
 -showsplash
-vmargs
-Xincgc
-Xss500k
-Dosgi.requiredJavaVersion=1.6
-Xms512m
-Xmx1024m
-XX:NewSize=8m
-XX:PermSize=128m
-XX:MaxPermSize=150m
-XX:MaxPermHeapExpansion=10m
-XX:+UseConcMarkSweepGC
-XX:CMSInitiatingOccupancyFraction=70
-XX:+UseCMSInitiatingOccupancyOnly
-XX:+UseParNewGC
-XX:+CMSConcurrentMTEnabled
-XX:ConcGCThreads=2
-XX:ParallelGCThreads=2
-XX:+CMSIncrementalPacing
-XX:CMSIncrementalDutyCycleMin=0
-XX:CMSIncrementalDutyCycle=5
-XX:GCTimeRatio=49
-XX:MaxGCPauseMillis=20
-XX:GCPauseIntervalMillis=1000
-XX:+UseCMSCompactAtFullCollection
-XX:+CMSClassUnloadingEnabled
-XX:+DoEscapeAnalysis
-XX:+UseCompressedOops
-XX:+AggressiveOpts
-XX:+ExplicitGCInvokesConcurrentAndUnloadsClasses
-Xverify:none 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:15:02.513

除了阅读您正在使用的 JVM 的文档之外，您无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:28:44.170

我假设您使用的是 Oracle 的 JDK 实现。垃圾收集的文档 ( [http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html) ) 没有提到该`-XX:ConcGCThread`选项。据我了解，该选项`-XX:ParallelGCThreads=2`仅用于并行 GC。如果您没有因垃圾收集而出现过多的暂停，我不会费心更改 eclipse 的 vm 设置。我为 Eclipse 更改的唯一设置是`MaxPermSize`堆大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:18:39.030

这取决于您使用的 JDK 版本以及 JVM 及其支持的错误。我在这里找到了类似的讨论。希望这可以帮助。：

[http://www.eclipse.org/forums/index.php/t/87365/](http://www.eclipse.org/forums/index.php/t/87365/)

# python - 使用正则表达式重新排序字符串

> ID：14153364
> 
> 赞同：5
> 
> 时间：2013-01-04T08:04:22.933
> 
> 标签：python, regex, replace, location

我想将第一次出现的日期或一般的正则表达式带到我的文本开头：

示例： `"I went out on 1 sep 2012 and it was better than 15 jan 2012"` 我想得到 `"1 sep 2012, I went out on and it was better than 15 jan 2012"`

我正在考虑替换`"1 sep 2012"`为`",1 sep 2012,"`，然后从中删除字符串，`","`但我不知道该写什么，而不是`replace_with`：

```
line = re.sub(r'\d+\s(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s\d{4}', 'replace_with', line, 1) 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T08:08:04.817

使用[捕获组](http://www.regular-expressions.info/named.html)：

```
>>> import re
>>> s = "I went out on 1 sep 2012 and it was better than 15 jan 2012"
>>> r = re.compile('(^.*)(1 sep 2012 )(.*$)')
>>> r.sub(r'\2\1\3',s)
'1 sep 2012 I went out on and it was better than 15 jan 2012' 
```

括号捕获部分字符串：

```
(^.*)          # Capture everything from the start of the string
(1 sep 2012 )  # Upto the part we are interested in (captured)
(.*$)          # Capture everything else 
```

然后只需在替换``\2\1\3'` *说明中重新排序捕获组：*引用捕获组需要一个原始字符串`r'\2\1\3'`。我的示例中的第二组只是文字字符串`(1 sep 2012 )`，但当然这可以是任何正则表达式，例如您创建的正则表达式（`\s`最后有一个额外的）：

```
(\d+\s(?:jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s\d{4}\s)

>>> r = re.compile(r'(^.*)(\d+\s(?:aug|sep|oct|nov)\s\d{4}\s)(.*$)')
>>> r.sub(r'\2\1\3',s)
'1 sep 2012 I went out on and it was better than 15 jan 2012' 
```

来自[docs.python.org](http://docs.python.org/2/reference/lexical_analysis.html)：

> 当存在 'r' 或 'R' 前缀时，反斜杠后面的字符将不加更改地包含在字符串中。

# jquery - 可拖动克隆

> ID：14153376
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:05:06.690
> 
> 标签：jquery, jquery-ui-draggable

拖放示例。克隆禁用
[源](http://jsbin.com/oduxex/3/edit)
我需要克隆代码

```
 .parent('.ui-wrapper').draggable({
                    revert  : 'invalid'
                    ,helper:'clone'// I added this line
                }); 
```

有哪些必要的改变？如果您查看源代码，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:24:52.443

将两行更改为

```
revert  : "invalid", // note the double quotes
helper : "clone"// I added this line 
```

在你的例子中让它对我有用。

# flyway - flyway 是否适用于 Felix (OSGi) 框架？

> ID：14153379
> 
> 赞同：1
> 
> 时间：2013-01-04T08:05:25.740
> 
> 标签：flyway

我尝试在 felix 容器中安装 flyway 包。由于 MANIFEST.MF 文件包含对 quinox 的依赖项，因此捆绑包无法启动：

要求捆绑：org.eclipse.equinox.common

由于[flyway](http://code.google.com/p/flyway/source/browse/flyway-core/src/main/java/com/googlecode/flyway/core/util/scanner/osgi/EquinoxCommonResourceUrlResolver.java?spec=svn48aaf2e984b7389a07b4a34234849dd35c4f2094&name=48aaf2e984b7&r=48aaf2e984b7389a07b4a34234849dd35c4f2094)使用以下方法将“捆绑”URL转换为普通文件系统URL，因此需要Equinox公共库：

```
org.eclipse.core.runtime.FileLocator.toFileURL 
```

据我所知，该解决方案仅适用于 Equinox/eclipse 环境，但不适用于 felix 环境。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:05:58.403

你是对的。目前仅支持 Equinox。欢迎为支持其他 OSGi 容器做出贡献。

# jpa - JPA：用户实体包含另一个用户实体

> ID：14153380
> 
> 赞同：0
> 
> 时间：2013-01-04T08:05:25.843
> 
> 标签：jpa

在我的域模型中，我有一个**用户**实体，其中包含另一个**用户**（复合模式）。当我想保留用户时，我收到一个错误，上面写着“数据对于列来说太长......”。发生这种情况是因为试图将包含的用户存储为 BLOB。我希望存储包含用户的 ID - 而不是将整个对象存储为 BLOB。

在这种情况下，我必须使用哪种注释？基数是 1 : 0..1 - 所以一个用户可以包含另一个用户。

这是代码...

```
@Entity
@Table(name="flex_app_user")
public class User implements Serializable {

private User client;

public User(){

}

@OneToOne
public User getClient() {
    return client;
}
} 
```

...问题是由数据模型的变化引起的。正确的注释是 OneToOne。一切正常。

亲切的问候， Jochen

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:13:05.933

注释必须是[`@OneToOne`](http://docs.oracle.com/javaee/6/api/javax/persistence/OneToOne.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:17:03.477

当您使用复合模式时，您可以在使用`(fetch=FetchType.LAZY)`的关系上使用吗？

# java - java中的转换

> ID：14153383
> 
> 赞同：4
> 
> 时间：2013-01-04T08:05:37.990
> 
> 标签：java

我的问题与java中的转换有关。我有一个整数 1615021049。当它除以 1（这也是一个浮点数）时，我得到的浮点数的答案是 1.61502106E9，当转换回整数时，我得到了 1615021056，这不是原始数字。请帮忙。如果我将变量 m 和 b 转换为双精度，同样可以正常工作。

```
int a=1615021023;
float m=1;
float b=a/m;
int d= (int) b; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T08:07:48.360

问题是`float`' 的尾数位太少，无法准确表示 1615021049。后者需要 31 位，而前者只提供 23 位。因此会损失精度。

这不是问题，`doubles`因为 a`double`有 52 位尾数，足以表示 1615021049。

参见[维基百科](http://en.wikipedia.org/wiki/IEEE_floating_point#Basic_formats)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T08:08:14.430

有无穷多个实数。浮点数只有 32 位。很明显，并不是每个实数都可以准确地表示为浮点数。浮点表示使小数字比大数字更准确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T08:14:06.650

`int`有 31 位（加号）来存储值，而`float`只有 24 位（加上指数和符号）

这意味着一些较大的值不能无误地表示。如果您使用具有 53 位值的 double，则不会有问题。

简而言之，避免使用浮点数，除非你有*充分*的理由使用它。

```
int i = 1615021023;
int a = (int) (double) i;
int b = (int) (float) i;
System.out.println("double: " + a + ", float: " + b + ", should be " + i); 
```

印刷

```
double: 1615021023, float: 1615021056, should be 1615021023 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T08:17:55.923

在 java 中，

1.  整数使用 32 位来表示其值。
2.  FLOAT 使用 23 位尾数，因此大于 2^23 的整数将截断最低有效位。例如 33554435（或 0x200003）将被截断为大约 33554432 +/- 4
3.  DOUBLE 使用 52 位尾数，因此能够表示 32 位整数而不会丢失数据。您还可以在维基百科上看到“[浮点”](http://en.wikipedia.org/wiki/Floating_point)

# c++ - 双缓冲？Win32 C++

> ID：14153387
> 
> 赞同：9
> 
> 时间：2013-01-04T08:05:45.430
> 
> 标签：c++, gdi, win32gui

我正在尝试实现双缓冲，但它似乎不起作用，即图形仍然闪烁。

每次鼠标移动时都会调用 WM_PAINT。(WM_MOUSEMOVE)

在下面粘贴 WM_PAINT：

```
case WM_PAINT:
        {
            hdc = BeginPaint(hWnd, &ps);
            // TODO: Add any drawing code here...
            RECT rect;
            GetClientRect(hWnd, &rect);
            int width=rect.right;
            int height=rect.bottom;

            HDC backbuffDC = CreateCompatibleDC(hdc);

            HBITMAP backbuffer = CreateCompatibleBitmap( hdc, width, height);

            int savedDC = SaveDC(backbuffDC);
            SelectObject( backbuffDC, backbuffer );
            HBRUSH hBrush = CreateSolidBrush(RGB(255,255,255));
            FillRect(backbuffDC,&rect,hBrush);
            DeleteObject(hBrush);

            if(fileImport)
            {
                importFile(backbuffDC);
            }

            if(renderWiredCube)
            {
                wireframeCube(backbuffDC);
            }

            if(renderColoredCube)
            {
                renderColorCube(backbuffDC);

            }

            BitBlt(hdc,0,0,width,height,backbuffDC,0,0,SRCCOPY);
            RestoreDC(backbuffDC,savedDC);

            DeleteObject(backbuffer);
            DeleteDC(backbuffDC);

            EndPaint(hWnd, &ps);
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T08:14:45.263

添加以下处理程序：

```
case WM_ERASEBKGND:
    return 1; 
```

它起作用的原因是因为此消息是在绘制之前发送的，以确保在窗口类的背景上完成绘制。闪烁在背景和上面画的东西之间来回切换。一旦背景停止绘制，它就会停止与在其上绘制的内容发生冲突，其中包括用纯色填充窗口，因此无论如何仍然会有背景。

# r - 加快手工制作的 Cox 模型拟合（与 `survival::coxph` 相比）

> ID：14153393
> 
> 赞同：3
> 
> 时间：2013-01-04T08:06:17.770
> 
> 标签：r, optimization

下面，我将 R 函数的结果与我自己的代码进行比较。该算法简单地包括最大化许多参数的函数（此处为 19）。我的代码定义了函数并`nlm`用于优化。幸运的是，两者都返回相同的结果。但是，R 函数的速度非常快。因此，我怀疑我可以比使用`nlm`（或 R 中的类似优化程序）做得更好。任何的想法？

* * *

这是一些可以用[Cox 模型拟合的](http://en.wikipedia.org/wiki/Proportional_hazards_models)[生存数据](http://yaap.it/paste/4b838b930ffa7662#bsmoXJTO478UhWlduRY3esq2YZBD4B12DaVvwqUTRlI=)。为此，需要最大化部分对数似然（维基百科链接中的第三个等式）。

在`R`中，这可以通过`coxph()`（`survival`包的一部分）来完成：

```
> library(survival)
> fmla <- as.formula(paste("Surv(time, event) ~ ", 
+                          paste(names(data)[-(1:3)], collapse=" +")))
> mod <- coxph(formula=fmla, data=data)
> round(mod$coef, 3)
    x1     x2     x3     x4     x5     x6     x7     x8     x9    x10    x11    x12    x13    x14    x15 
-0.246 -0.760  0.089 -0.033 -0.138 -0.051 -0.484 -0.537 -0.620 -0.446 -0.204 -0.112 -0.089 -0.451  0.043 
   x16    x17    x18    x19 
 0.106 -0.015 -0.245 -0.653 
```

这可以通过显式编写部分对数似然和使用一些数值优化程序来检查。这是一些完成这项工作的粗略代码。

**代码已根据我收到的评论进行了编辑**

```
> #------ minus partial log-lik ------
> Mpll <- function(beta, data) 
+   #!!!data must be ordered by increasing time!!! 
+   #--> data <- data[order(data$time), ]
+ {
+   #preparation
+   N <- nrow(data)  
+   linpred <- as.matrix(data[, -(1:3)]) %*% beta
+   
+   #pll
+   pll <- sum(sapply(X=which(data$event == 1), FUN=function(j) 
+     linpred[j] - log(sum(exp(linpred[j:N])))))
+   
+   #output
+   return(- pll)
+ }
> #-----------------------------------
> 
> data <- data[order(data$time), ]
> round(nlm(f=Mpll, p=rep(0, 19), data=data)$estimate, 3)
 [1] -0.246 -0.760  0.089 -0.033 -0.138 -0.051 -0.484 -0.537 -0.620 -0.446 -0.204 -0.112 -0.089 -0.451
[15]  0.043  0.106 -0.015 -0.245 -0.653 
```

好的，它可以工作......但它要慢得多！

有没有人知道内部做了什么`coxph()`才能让它如此之快？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T18:55:33.933

这是您的代码的矢量化版本。

```
Mpll2 <- function(beta, data) {
  X <- as.matrix(data[, -(1:3)])
  a <- X %*% beta
  b <- log(rev(cumsum(rev(exp(a)))))
  -sum((a - b)[data$event==1])
} 
```

这是运行时间的简单测试。

```
data <- data[order(data$time), ] # No reason to order every time

# Yours
system.time(round(nlm(f=Mpll, p=rep(0, 19), data=data)$estimate, 3))
#    user  system elapsed 
#    2.77    0.01    2.79 

# Vectorized
system.time(round(nlm(f=Mpll2, p=rep(0, 19), data=data)$estimate, 3))
#    user  system elapsed 
#    0.28    0.00    0.28 

# Optimized C code
fmla <- as.formula(paste("Surv(time, event) ~ ", 
                          paste(names(data)[-(1:3)], collapse=" +")))
system.time(round(coxph(formula=fmla, data=data)$coef,3)) 
#    user  system elapsed 
#    0.02    0.00    0.03 
```

因此，每种类型之间大约有一个数量级的差异。C 非常快，你永远不会接近 R 中的速度。但是 C 更难编写。

# google-chrome - 启用 Chrome 扩展程序进行屏幕共享需要哪些步骤？

> ID：14153397
> 
> 赞同：0
> 
> 时间：2013-01-04T08:06:32.547
> 
> 标签：google-chrome, google-chrome-extension, remote-desktop, remote-access, screensharing

谷歌提供远程桌面扩展，允许远程控制桌面。

但是，如果我们想要的只是允许从 Chrome 扩展程序共享屏幕，那么我们应该查看哪些 API？

理想的工作流程：

*   Bob 从 Chrome 扩展程序开始屏幕共享。

*   Alice 可以通过访问特定的 URL 看到 Bob 的屏幕。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:20:03.603

参考[`SCREENSHARING A BROWSER TAB IN HTML5`](http://www.html5rocks.com/en/tutorials/streaming/screenshare/#toc-method3)，您可以轻松完成此操作。

开始

1) 创建[浏览器操作](https://developer.chrome.com/extensions/browserAction.html)

2) 用于[`Tab's API`](https://developer.chrome.com/extensions/tabs.html#method-captureVisibleTab)截屏

3) 使用二进制`WebSocket`通过网络传输信息。

## 参考

*   [浏览器操作](https://developer.chrome.com/extensions/browserAction.html)
*   [选项卡 API](https://developer.chrome.com/extensions/tabs.html#method-captureVisibleTab)
*   [HTML5 文章](http://www.html5rocks.com/en/tutorials/streaming/screenshare/#toc-method3)。

# objective-c - Xcode - UIStoryboard 黑屏

> ID：14153399
> 
> 赞同：0
> 
> 时间：2013-01-04T08:06:54.227
> 
> 标签：objective-c, ios, uiviewcontroller, uistoryboard

我正在使用一个`UIStoryboard`. 我创建了我的应用程序空，然后我添加了一个故事板。故事板被设置为项目设置中的主故事板，也被设置为 Info.plist 中的“主故事板文件基础名称”。

我的应用程序委托只是返回`YES`而没有任何其他代码。

我的`main.m`包括这行代码：

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([ARGAppDelegate class])); 
```

我在控制台中收到此消息：

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

我的视图控制器在 UIStoryboard 中，作为初始视图控制器。

只是想知道我在这里做错了什么......

我的 AppDelegate 代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{        
    return YES;
} 
```

这就是我拥有的所有代码，如果您使用情节提要，则不需要创建窗口，对吗？

感谢您的帮助，不胜感激！

* * *

更新：

我实际上更改了我的 AppDelegate 代码，但仍然没有任何区别：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    UIViewController *initViewController = [storyboard instantiateViewControllerWithIdentifier:@"ARGViewControllerID"];

    NSLog(@"%@", initViewController); // Returns a valid ARGViewController object

    [self.window setRootViewController:initViewController];
    [self.window makeKeyAndVisible];
    [self.window makeKeyWindow];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:17:48.683

如果`-applicationDidFinishLaunching:withOptions:`未在代码中设置窗口或情节提要，系统查找的下一个位置是 info.plist 中的默认 XIB 或情节提要。项目信息中的“默认故事板”字段要么为空，要么指向不存在的 .storyboard 文件。单击树中的项目，然后单击“摘要”选项卡，并在字段中填写故事板文件的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:47:53.420

`Application windows are expected to have a root view controller at the end of application launch`

听起来你没有在故事板的开头嵌入导航控制器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:37:34.647

在浏览论坛和问题并使用代码后无法找到解决方案，我切换到 xibs。自从 4 小时前我进行过渡以来，我就对它感到满意。我希望我再也不用看到另一个充满错误且难以使用的故事板文件了！

# javascript - Internet Explorer 的后备 AJAX 文件上传

> ID：14153400
> 
> 赞同：1
> 
> 时间：2013-01-04T08:06:54.647
> 
> 标签：javascript, ajax, file-upload, google-closure, fallback

我已经使用 xHR2 和 File api 在 HTML5 中为内部项目实现了 AJAX 文件上传器。我们只需要支持 Firefox/Safari/Chrome。我使用以下链接作为参考

1.  [http://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)
2.  [http://www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)
3.  [https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

现在我需要支持 Internet Explorer 10 及以下版本。IE 10 支持 XHR2 但[缺少](http://caniuse.com/#feat=fileapi)文件 API 支持。有没有办法检测这些 API 不受支持？如果我可以检测到这些 API 不被支持，那么如何实现 IE 的 AJAX 文件上传？

我使用的是 Google Closure JS 库而不是 jQuery 或任何其他库。库的选择不能更改。请在响应中使用 jQuery 或其他一些效果。但是，任何使用 jQuery 的代码片段都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:14:12.567

检测 File API 是否存在的最简单方法可能是

`typeof File`

在支持 File API 的浏览器中，它应该返回一个对象或函数 - Internet Explorer 返回`undefined`

至于如何回退并使其适用于所有用户

我使用了这个工具[https://github.com/valums/ajax-upload](https://github.com/valums/ajax-upload)，它创建了一个 iframe 并将上传内容发布到 iframe 并模拟 AJAX 文件上传 - 它全是纯 JavaScript，不需要库，并且一直支持到 IE6

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T02:24:33.077

最近我一直在研究与谷歌闭包库一起使用的文件上传器。我发现[Fine-uploader](https://github.com/valums/file-uploader)库是一个好的开始。它不是用闭包库编写的，但它为我提供了基本准则：如果支持，则使用 xhr 上传文件，否则回退以形成帖子到隐藏的 iframe。

在我的代码中，我实现了两个类：一个使用 a`XMLHttpRequest`上传文件，另一个使用`goog.net.IframeIo`'s`sendFromForm`方法上传文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:23:13.570

查看`goog.net.iframeIo`Google Closure Library 中的类。这将从表单中获取文件输入元素并将其发布到 iFrame，从而提供相当于 AJAX 体验，即使它不在实际的 XHR 中也是如此。

以下是关于如何实现它的 Google 文档的链接：

[https://code.google.com/p/closure-library/source/browse/closure/goog/net/iframeio.js#48](https://code.google.com/p/closure-library/source/browse/closure/goog/net/iframeio.js#48)

# c# - 是否有任何可以使用的足球网络服务？

> ID：14153401
> 
> 赞同：2
> 
> 时间：2013-01-04T08:06:58.140
> 
> 标签：c#, wcf, asmx

我正在尝试找到一个 WebService，它可以提供对 Serie A（意大利联赛）当前足球统计数据的访问，也许还有一些 livescores。

有没有人发现任何可以用来收集这些数据的网络服务，或者我需要从网页上抓取它们来获取它们。

例如 livecores.com 在其网页上有实时比分...

我正在尝试找到可以使用的服务，以便可以将其用于应用程序。（我已经尝试过谷歌。所以不要告诉我谷歌它）

# c# - 在 IE 8 中打印二维码

> ID：14153404
> 
> 赞同：1
> 
> 时间：2013-01-04T08:07:11.697
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4, qr-code

我使用 jQuery 插件生成了一个二维码。二维码呈现在我网页上的**div中。**我试图打印网页，但二维码没有打印在纸上。

我的 jQuery 代码生成 QR 码：

```
 $(document).ready(function () {  
    $('#add1').click(function () {
        $("#table1").remove();
        var string2 = document.getElementById("textinput").value;

        jQuery('#qrcodeTable').qrcode({
            render: "table",
            text: string2
        });
    });
}); 
```

鉴于：

```
@using (Html.BeginForm())
{  
    @Html.TextBoxFor(m => m.encode, new { id = "textinput", style = display:none;" }
}     

<div id="qrcodeTable">         
</div> 
```

编辑 ：
![从网页打印](../Images/520985c5043169ea212e7a7922c185a7.png)
![打印预览图像](../Images/c57a897838dee6beb7d1170c39a5c29f.png)

二维码不会从网页中打印出来。有什么建议么。

# android - 如何用钛嵌套两个scrollableview android

> ID：14153405
> 
> 赞同：2
> 
> 时间：2013-01-04T08:07:12.890
> 
> 标签：android, scroll, titanium

我有点担心，因为我想要一个嵌套的`scrollableview`，但他的工作是他的湿冷。我可以从右到左滚动，当我在第二张照片上时，我在另一个滚动视图滚动上打电话给我，但不是，所以它一定是我做错了。aillor 以及第二个垂直滚动是如何完成的？

**滚动主体**

```
 Titanium.include('cover.js');
 var win = Titanium.UI.createWindow({
    backgroundColor:'#333',
    //orientationModes:Titanium.UI.LANDSCAPE_LEFT
});
//Titanium.UI.orientation = Titanium.UI.LANDSCAPE_LEFT;

var rotate = Ti.UI.create2DMatrix().rotate(90);
var counterRotate = rotate.rotate(-180);

//create despicture for scroll
var repImage = 'res-long-land-hdpi';
var image = Ti.UI.createImageView({
  image:'android/images/'+repImage+'/default.png'
});

//scroll principal
var scrollView = Titanium.UI.createScrollableView({
    views:[image,cover],//cover call two scroll
    maxZoomScale:1.0,
    currentPage:0,
    showPagingControl:false,
    cacheSize:5,
    zIndex:-100,
});

win.add(scrollView);
win.open(); 
```

**第二个卷轴将进入第一个**

```
cover = Titanium.UI.createView({
    left:0,
    top:0,
});

var repImage = 'res-long-land-hdpi';
var image1 = Ti.UI.createImageView({
  image:'android/images/'+repImage+'/p1.jpg'
});

var image2 = Ti.UI.createImageView({
  image:'android/images/'+repImage+'/p2.jpg'
});

// second scroll
var scrollView1 = Titanium.UI.createScrollableView({
    views:[image1,image2],
    maxZoomScale:1.0,
    currentPage:0,
    showPagingControl:false,
    cacheSize:5,
    zIndex:-100,
    layout:'vertical'
});

cover.add(scrollView1); 
```

谢谢你

# exe - 如何使用python检查损坏的exe文件？

> ID：14153406
> 
> 赞同：1
> 
> 时间：2013-01-04T08:07:12.773
> 
> 标签：exe, runner

有没有办法通过 python 或任何现有的 exe 运行器模块从许多 exe 中找到损坏的 exe？我想检查一个 exe 的退出状态，一个文件是完美执行还是以错误结束。

就像下面用于测试损坏 zip 的程序：

```
import os
import sys
import zipfile

if __name__ == "__main__":
    args = sys.argv[1:]

print "Testing zip file: %s" % args[0]

the_zip_file = zipfile.ZipFile(args[0])
ret = the_zip_file.testzip()

if ret is not None:
    print "First bad file in zip: %s" % ret
    sys.exit(1)
else:
    print "Zip file is good."
    sys.exit(0) 
```

# android - android从任何屏幕关闭应用程序

> ID：14153411
> 
> 赞同：0
> 
> 时间：2013-01-04T08:07:58.323
> 
> 标签：android, application-close

> **可能重复：**
> [关闭应用程序并在 Android 上启动主屏幕](https://stackoverflow.com/questions/2042222/close-application-and-launch-home-screen-on-android)

我开发了一个由 23 个屏幕或布局组成的应用程序。每个布局都与另一个布局链接。

该过程将像链或树一样进行。如果我处于应用程序的任何屏幕或流程的中间，我该如何完全关闭我的应用程序。

如果我有单屏意味着我可以使用`finish()`关闭应用程序的方法，在此如果我使用`finish()`方法意味着它将跨越许多屏幕以完全关闭我的应用程序..

帮我为这个问题编写代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:09:26.000

试试这种方式：

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:10:09.340

使用此代码将您的应用程序移至后台。

```
Intent homeIntent = new Intent(Intent.ACTION_MAIN);
        homeIntent.addCategory(Intent.CATEGORY_HOME);
        homeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(homeIntent); 
```

换句话说，这将启动主屏幕并使您的应用程序移至后台。

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

这将停止您的应用程序，而上述应用程序将使您的应用程序处于后台并从您离开应用程序的应用程序的位置恢复它尚未被系统杀死。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:14:24.657

您可以`android:noHistory="true"`在`AndroidManifest.xml`每个活动标签中使用。

```
<activity android:name=".Something" android:noHistory="True" /> 
```

现在，当您将通过意图调用下一个活动时。Intent 不会存储以前的活动。因此，每当您单击返回时，它都会关闭您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T08:21:32.143

打电话[`moveTaskToBack(true)`给你`Activity`](http://developer.android.com/intl/fr/reference/android/app/Activity.html#moveTaskToBack%28boolean%29)。这将隐藏您的应用程序，直到用户想要再次使用它。

但是最好不要单击一个按钮就退出整个应用程序。

# mschart - Mchart 网格线不是从零开始

> ID：14153418
> 
> 赞同：0
> 
> 时间：2013-01-04T08:08:36.793
> 
> 标签：mschart, mirror, gridlines

在 VS2010 VB 中，我使用的是 MSChart (.Net 4)，我有一个 FastLine 图表，X 轴的值为 -2000 到 2000，Y 轴的值为 -20 到 20。

X axix 中网格线的间隔为 250，我需要从原点“镜像”网格线（即 -250、250；-500、500；...），但是当我执行应用程序时，第一条网格线始终是 - 200、50 然后 -450、300...

我尝试`StartFromZero = True`在轴属性中使用但没有成功。有没有办法强制网格线从原点（零）对称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:25:17.167

谢谢您的意见。我通过设置 Axis 的 IntervalOffset 解决了这个问题。此偏移量表示图表左侧第一条网格线的偏移量（在 X axix 的情况下）。通过计算所需的位移 (myChart.ChartAreas(0).AxisX.IntervalOffset = myChart.ChartAreas(0).AxisX.Maximum Mod yourIntervalValue) 以使用间隔从最左边的值达到 0，我能够在图表的中间以匹配零线。我希望它可以帮助其他人。

# ruby-on-rails - 任何代码编辑后的 RoR 未定义方法“attr_accessible”

> ID：14153421
> 
> 赞同：4
> 
> 时间：2013-01-04T08:08:56.043
> 
> 标签：ruby-on-rails, activerecord, plugins, activesupport

我正在实现一个很棒的插件，我发现它可以根据用户行为向用户奖励积分/徽章/排名。它被称为 Merit，可以在这里找到：[https ://github.com/tute/merit](https://github.com/tute/merit)

我有两个模型：“发布”和“标签”。关联是：帖子有很多标签，标签属于一个帖子。

当用户创建“帖子”时，我会向他们奖励积分。每当调用帖子控制器的“创建”操作时，我都会将插件配置为奖励积分。

**问题：**

当我启动服务器时，我会通过我的流程来创建带有任何关联标签的新帖子。这完美地工作。在我以任何方式编辑我的代码（在控制器或模型中）之前，它将完美运行。编辑后，在尝试创建新帖子时，我会收到此错误：

```
undefined method `attr_accessible' for Merit::Action:Class 
```

只要我更改文件的基本内容（这包括简单地添加调试“puts”语句），我进行什么样的编辑似乎并不重要。此时，我根本无法再创建帖子，因为每次尝试创建帖子都会导致相同的错误。然后，一旦我重新启动 WEBrick，它将再次工作（直到我再次编辑代码）。

**这里发生了什么？** 为什么编辑我的代码的简单行为会导致 attr_accessible 在 Merit 插件中突然变得未定义，直到我重新启动服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:12:04.243

这似乎是一个 ruby​​ 类重新加载问题。

我认为您的插件不会与您更改的文件一起重新加载，因此 gem 的行为不会重新注入到新代码中。当您重新启动 Rails 服务器时，应用程序的代码和 gem 的代码是同步的，并且 gem 的行为可以注入到应用程序的代码中。

是否有意义？

# magento-1.7 - 如何更改 magento 的 cms 内容包装器

> ID：14153423
> 
> 赞同：4
> 
> 时间：2013-01-04T08:09:04.923
> 
> 标签：magento-1.7

我正在使用magento 1.7。我试图更改 cms 内容的包装，但我仍然无法了解如何更改 cms_page 的包装。

```
<block type="page/html_wrapper" name="cms.wrapper" translate="label">
    <label>CMS Content Wrapper</label>
    <action method="setElementClass"><value>std</value></action>
    <block type="cms/page" name="cms_page"/>
</block> 
```

和 html 输出是

```
<div class="std">
    CMS Page content
</div> 
```

但我想这样输出

```
<section class="std">
    CMS Page Content
</section> 
```

请给我任何解决方案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T08:27:48.697

您可以尝试以下代码将 div 更改为 section

```
<block type="page/html_wrapper" name="cms.wrapper" translate="label">
    <label>CMS Content Wrapper</label>
    <action method="setElementClass"><value>std</value></action>
    <action method="setAttribute"><param1>html_tag_name</param1><param2>section</param2></action>
    <block type="cms/page" name="cms_page"/>
</block> 
```

这会将 div 更改为 section 因为 html_wrapper 类从函数`getElementTagName`中获取标记名称`app\code\core\Mage\Core\Block\Abstract\Wrapper.php`

```
/**
 * Wrapper element tag name getter
 * @return string
 */
public function getElementTagName()
{
    $tagName = $this->_getData('html_tag_name');
    return $tagName ? $tagName : 'div';
} 
```

所以通过调用 setAttribute 我们改变/设置值`html_tag_name`

# postgresql - PostgreSQL - 在比较距离的纬度和经度上优化连接

> ID：14153426
> 
> 赞同：3
> 
> 时间：2013-01-04T08:09:39.137
> 
> 标签：postgresql, join, query-optimization, postgis

我有两张表，比如 A 和 B，其中包含两列的城市信息：纬度和经度。A 包含 100,000 条记录，B 包含 1,000,000 条记录。我的目标是找到距离 A 1 公里以内的 B 行（对于 A 中的每一行）。我该如何有效地做到这一点？我的目标是不到 30 分钟。

以下查询需要永远（我相信这是 100,000 * 1,000,000 = 1000 亿行比较的叉积的结果！）：

```
select *
from A
inner join B
on is_nearby(A.latitude, A.longitude, B.latitude, B.longitude) 
```

`is_nearby()`只是一个简单的函数，可以找到纬度和经度之间的差异。

我对A的一排做了测试，每排大约需要5秒。根据我的计算，查询完成执行需要几个星期，这是不可接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T23:24:49.963

是的，PostGIS 会让事情变得更快，因为它 (a) 知道如何将纬度和经度转换为公里（我将使用下面的[地理类型](http://postgis.refractions.net/docs/using_postgis_dbmanagement.html#PostGIS_Geography)），并且 (b) 支持[GiST 索引](http://postgis.refractions.net/docs/using_postgis_dbmanagement.html#gist_indexes)，这对于 GIS 来说是最佳的。

假设您的系统上有 PostGIS 版本 2，请升级您的数据库和表：

```
CREATE EXTENSION postgis;

-- Add a geog column to each of your tables, starting with table A
ALTER TABLE A ADD COLUMN geog geography(Point,4326);
UPDATE A SET geog = ST_MakePoint(longitude, latitude);
CREATE INDEX ON A USING GIST (geog);
--- ... repeat for B, C, etc. 
```

现在找到距离 A 1 公里以内的 B 行（对于 A 中的每一行）：

```
SELECT A.*, B.*, ST_Distance(A.geog, B.geog)/1000 AS dist_km
FROM A
JOIN B ON ST_DWithin(A.geog, B.geog, 1000); 
```

# twitter-bootstrap - 使用 Twitter Bootstrap 实现垂直滑动 div

> ID：14153428
> 
> 赞同：1
> 
> 时间：2013-01-04T08:09:59.460
> 
> 标签：twitter-bootstrap

我在 html 上有一个基本结构，例如：

```
<div class="container-fluid">

  <div class="row-fluid">

    <div class="span2">
      <!--Sidebar content-->
    </div>

    <div class="span10">
      <!--Body content-->
    </div>

  </div>

</div> 
```

我想添加一个切换按钮来隐藏/显示侧边栏（幻灯片是垂直的）。如果侧边栏被隐藏，我希望内容使用整个区域（可能是 span12）。如果显示侧边栏，所有内容都将还原。

我的方法是，我将根据侧边栏的状态切换正文内容区域的 span10 和 span12 类。

有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:59:22.590

Stack Overflow 将我的答案转换为评论，因此我将发布更完整的答案。

```
<div class="container">
  <div class="row-fluid">

    <div class="collapse-group">
      <div class="span2">
        <!--Sidebar content-->
      </div>
      <a class="btn" data-toggle="collapse" data-target=".span2">Toggle</a>
    </div>

    <div class="span10">
      <!--Body content-->
    </div>

  </div>

</div> 
```

span2 现在将默认折叠，如果您单击该按钮，它将垂直展开。

# web-services - 在 Dojo 中取消服务调用

> ID：14153435
> 
> 赞同：0
> 
> 时间：2013-01-04T08:10:50.207
> 
> 标签：web-services, dojo

我想知道是否可以使用 Dojo 取消对 Web 服务的调用。我的问题是，例如，用户在地图中有许多元素要选择，并且每次他单击其中一个元素时，都会执行对 Web 服务的调用以带来大量数据。此操作需要几秒钟的延迟。想象一下，用户几乎同时点击了五个元素：将有一个选定的元素（最后一次点击），但信息面板将定期刷新之前点击过的元素的信息，直到最后一个元素信息被加载。

我想要的是取消所有以前的电话（如果可能的话），只允许完成最后一个电话。我正在与 Dojo 合作。我看过文档，但没有看到任何有用的东西。我希望找到类似“ajax.abort()”方法的东西。

我还考虑创建一个类来管理调用并将每次调用同一个 url 添加到队列中，以便只让最后一次调用呈现数据，但通过这种方式，我仍然会等待完成每个服务调用然后丢弃结果。我认为正确的做法是取消旧电话。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:02:17.997

在一些论坛和页面搜索后，我找到了这个：[www.mike-griffith.com - Cancel dojo XHR in progress](http://www.mike-griffith.com/blog/2008/09/cancel-dojo-xhr-in-progress/)。这正是我正在寻找的（尽管在 web 示例中用于“GET”服务，“cancel()”方法也适用于“POST”调用）。

因此，我将服务调用管理器与此代码相结合，以取消具有相同 url 的调用。我还必须管理如何避免（如果我能够）取消呼叫时引发的错误，但这是其他任务，优先级要低得多。

# iphone - 应用程序因 main.m 中的 SIGABRT 错误而崩溃

> ID：14153437
> 
> 赞同：0
> 
> 时间：2013-01-04T08:11:05.073
> 
> 标签：iphone, objective-c, ios, xcode

我正在制作一个简单的单视图应用程序，它会在 main.m 中加载一个 SIGABRT 错误时立即崩溃。

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

我是 iOS 开发的新手，只是制作一个简单的应用程序来为智力竞赛游戏记分。我正在使用 Xcode 4.5.2 和 iOS 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:21:44.213

以下是如何设置异常断点：[Xcode 4 中的“Run > Stop on Objective-C exception”？](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)

您需要设置异常断点以中断所有异常，然后您将准确看到代码失败的位置。您看到它在 main 上中断的事情是因为 main 是您程序的程序入口和出口点，因此如果您在该调用中显示崩溃之前不处理异常。

# php - 显示列名并添加复选框 php mysql

> ID：14153439
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:11:27.837
> 
> 标签：php, mysql, select, information-schema

我的任务是列出数据类型为 tiny int 的列名。我使用了 SHOW COLUMNS 但我想使用结果根据显示列结果在我的表单中创建一个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:50:22.280

试试这个：

```
SELECT COLUMN_NAME 
FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'dbName' AND TABLE_NAME = 'tableName' AND 
        LOWER(DATA_TYPE) = 'tinyint' 
```

# android - 如何使用 NPOT 图像作为带有 libpng 和 OpenGL ES 1.1 的纹理？

> ID：14153440
> 
> 赞同：1
> 
> 时间：2013-01-04T08:11:34.270
> 
> 标签：android, opengl-es, textures, libpng, opengl-es-1.1

我正在尝试`GL_arb_texture_rectangle`使用 libpng 1.5 将 NPOT 大小的 PNG 图像用作 OpenGL ES 1.1 中的纹理（所以没有）。使用 SDL，我可以将 NPOT 图像粘贴到 NPOT 纹理上，但我不知道如何使用 libpng 做类似的事情。

当我使用原始纹理 (1280x720) 时，我得到的只是一个白色表面。当我在文件系统上将其大小调整为 1024x512 时，它显示正常。

出于某种原因，NPOT 纹理适用于 4.2 AVD 和`-gpu on`.

这是代码。差不多就是[这样](http://en.wikibooks.org/wiki/OpenGL_Programming/Intermediate/Textures#A_simple_libpng_example)，有一些更改是使用 libzip 从 APK 读取而不是`fopen`直接 ing。

```
void png_zip_read(png_structp png, png_bytep data, png_size_t size)
{
    zip_file* file = static_cast<zip_file*>(png_get_io_ptr(png));
    zip_fread(file, data, size);
}

GLuint load_png_texture(const std::string& path, unsigned int& width,
                        unsigned int& height)
{
    if (!apk_path.length())
        throw "APK Path not set";

    zip* apk = zip_open(apk_path.c_str(), 0, NULL);
    if (!apk)
        throw "Error loading APK";

    zip_file* file = zip_fopen(apk, path.c_str(), 0);
    if (file == 0)
        throw path + ": " + strerror(errno);

    png_byte header[8];
    zip_fread(file, header, 8);
    if (png_sig_cmp(header, 0, 8)) {
        zip_fclose(file);
        zip_close(apk);
        throw path + " is not a PNG";
    }

    png_structp png = png_create_read_struct(PNG_LIBPNG_VER_STRING,
                                             NULL, NULL, NULL);
    if (!png) {
        zip_fclose(file);
        zip_close(apk);
        throw "Failed to create png struct";
    }

    png_infop info = png_create_info_struct(png);
    if (!info) {
        png_destroy_read_struct(&png, (png_infopp) NULL, (png_infopp) NULL);
        zip_fclose(file);
        zip_close(apk);
        throw "Failed to create png info struct";
    }

    png_infop info_end = png_create_info_struct(png);
    if (!info_end) {
        png_destroy_read_struct(&png, &info, (png_infopp) NULL);
        zip_fclose(file);
        zip_close(apk);
        throw "Failed to create png info struct";
    }

    if (setjmp(png_jmpbuf(png))) {
        png_destroy_read_struct(&png, &info, &info_end);
        zip_fclose(file);
        zip_close(apk);
        throw "Error from libpng";
    }

    png_set_read_fn(png, file, png_zip_read);
    png_set_sig_bytes(png, 8);
    png_read_info(png, info);

    int bit_depth, color_type;
    unsigned int temp_width, temp_height;
    png_get_IHDR(png, info, &temp_width, &temp_height, &bit_depth,
                 &color_type, NULL, NULL, NULL);
    width = temp_width;
    height = temp_height;

    png_read_update_info(png, info);

    int row_bytes = png_get_rowbytes(png, info);
    png_byte* image_data = new png_byte[row_bytes * height];
    if (!image_data) {
        png_destroy_read_struct(&png, &info, &info_end);
        zip_fclose(file);
        zip_close(apk);
        throw "Could not allocate memory for PNG image data";
    }

    png_bytep* row_pointers = new png_bytep[height];
    if (!row_pointers) {
        png_destroy_read_struct(&png, &info, &info_end);
        delete[] image_data;
        zip_fclose(file);
        zip_close(apk);
        throw "Could not allocate memory for PNG row pointers";
    }

    for (int i = 0; i < height; i++)
        row_pointers[height - 1 - i] = image_data + i * row_bytes;

    png_read_image(png, row_pointers);

    GLuint texture;
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);
    GLenum format = GL_RGBA;
    glTexImage2D(GL_TEXTURE_2D, 0, format, width, height, 0,
                 format, GL_UNSIGNED_BYTE, image_data);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    png_destroy_read_struct(&png, &info, &info_end);
    delete[] image_data;
    delete[] row_pointers;
    zip_fclose(file);
    zip_close(apk);
    return texture;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T06:04:51.537

经过更多的试验和错误，我回到疯狂的谷歌搜索，终于找到[了一个代码示例](http://developer.blackberry.com/native/documentation/bb10/load_a_png_texture.html)，它完全符合我的要求。

秘诀基本上是像这样创建 OpenGL 纹理：

```
int texture_width = next_power_of_two(width);
int texture_height = next_power_of_two(height);

GLuint texture;
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

if (texture_width != width || texture_height != height) {
    glTexImage2D(GL_TEXTURE_2D, 0, format, texture_width,
                 texture_height, 0, format, GL_UNSIGNED_BYTE, NULL);
    glTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, width, height, format,
                    GL_UNSIGNED_BYTE, image_data);
} else
    glTexImage2D(GL_TEXTURE_2D, 0, format, texture_width,
                 texture_height, 0, format, GL_UNSIGNED_BYTE,
                 image_data); 
```

要以其原始大小渲染图像，必须按如下方式计算 x/y 纹理坐标（而不是仅使用`1`）：

```
float x_coordinate = (width - 0.5f) / texture_width;
float y_coordinate = (height - 0.5f) / texture_height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:41:28.963

ES 1.1 正式不支持没有扩展的 NPOT 纹理。它可能会意外地在某些实现上起作用，但这只是“运气”。

通常的方法是将您的 NPOT 图像打包在较大的 POT 纹理中，并相应地调整纹理坐标。您可以在运行时以编程方式执行此操作（“打包”），或者只是在工具链中执行此操作（很可能是您的艺术程序）。

# php - mysql查询不在我朋友列表中的朋友的锻炼朋友

> ID：14153445
> 
> 赞同：0
> 
> 时间：2013-01-04T08:12:09.973
> 
> 标签：php, mysql

我有一个朋友表来跟踪我的数据库中的关系 - 我已经将一个带有子查询的查询放在一起，从朋友的朋友那里获取个人资料信息

我的朋友表如下所示 - id 以两种方式出现。我是 id 为 1 的用户 - 我的朋友是 5 和 3

```
rel 1 | rel 2
--------------
1     |    5
5     |    1
3     |    5
5     |    3
1     |    3
3     |    1 
```

我的查询看起来像

```
SELECT user_id, first_name, last_name, email, town, county, profile_img_small 
FROM sign_up 
WHERE user_id IN (SELECT DISTINCT f.rel2 FROM friends f
WHERE f.rel1 IN (SELECT f2.rel2 FROM friends f2 WHERE f2.rel1 = '$my_id') AND f.rel2 !    = '$my_id') ORDER BY first_name ASC, last_name ASC 
```

这样做的问题是该脚本旨在建议您可能认识的人，但仍然包括我的朋友列表中的人。

我如何提取相同的查询，不包括我已经是朋友的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:19:20.257

试试这个：

```
SELECT *
FROM sign_up
WHERE user_id NOT IN
(
   SELECT rel1 FROM friends WHERE rel2 = '$my_id'
   UNION 
   SELECT rel2 FROM friends WHERE rel1 = '$my_id'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:20:05.407

我使用的查询如下 - 我基本上在最后添加了另一个子查询

```
SELECT user_id, first_name, last_name, email, town, county, profile_img_small 
FROM sign_up 
WHERE user_id IN (SELECT DISTINCT f.rel2 FROM friends f
WHERE f.rel1 IN (SELECT f2.rel2 FROM friends f2 WHERE f2.rel1 = '$my_id') AND f.rel2 != '$my_id') AND user_id NOT IN (SELECT rel2 FROM friends WHERE rel1 = '$my_id') ORDER BY first_name ASC, last_name ASC 
```

# javascript - 通过 Javascript 检测移动设备

> ID：14153452
> 
> 赞同：1
> 
> 时间：2013-01-04T08:13:05.730
> 
> 标签：javascript, android, jquery

与此问题相关：[Detect Android phone via Javascript / jQuery](https://stackoverflow.com/questions/6031412/detect-android-phone-via-javascript-jquery/14093313)

在新版本的 android sdk 中，本机浏览器不再返回代号“android”。 `navigator.userAgent`返回类似：

> mozilla/5.0 (X11; Linux x86_64) AppleWebkit7534.24 (KHTML, like Gecko) Chrome/11.0.696.34 Safari7534.24

任何建议为什么？这来自带有当前 Android 版本 4.1.1 的 HTC One S 的手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:31:12.033

是的...这可能是因为您的浏览器处于“桌面模式”。

您可能希望在小屏幕上显示页面的某些移动版本，因此您可以尝试：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<script type="text/javascript">  
  if ((screen.width < 480) || (screen.height < 480)) {    
    location.replace('/m/');
  }  
</script> 
```

您需要浏览器的视口元标记来报告实际的屏幕尺寸。

编辑：
据此，[您](http://code.google.com/p/android/issues/detail?id=12455&q=javascript%20width&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)可能需要等待一段时间让浏览器“赶上”，然后再检查屏幕尺寸，所以我想最好使用：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<script type="text/javascript">  
  setTimeout(function() {
               if ((screen.width < 480) || (screen.height < 480)) {    
                 location.replace('/m/');
               }  
             }, 200);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:28:24.830

永远不要使用浏览器嗅探！使用特征检测。有一个名为[modernizr](http://modernizr.com/)的 javascript 库，可以根据用户客户端的功能执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:23:21.203

看到[这个问题](https://stackoverflow.com/questions/11597940/android-phone-browser-detection)。您确定不是在桌面模式下查看吗？股票浏览器和许多其他浏览器具有两种不同的用户代理，具体取决于浏览模式。

# ios - appdelegate 如何使用 storyboard 推送 ViewController

> ID：14153453
> 
> 赞同：4
> 
> 时间：2013-01-04T08:13:11.053
> 
> 标签：ios, ios6, storyboard

在我的应用程序委托中，如果保存了用户详细信息，我会将用户推送到视图控制器

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions  
  // cached user
    PFUser *currentUser = [PFUser currentUser];
    if (currentUser)
    {
        NSLog(@"current user signing and looking for VC %@", currentUser);
        // A user was cached, so skip straight to the main view

        UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
        TaskSelectionViewController*viewController = [[TaskSelectionViewController alloc] initWithUser:currentUser];
        [navigationController pushViewController:viewController animated:YES];

                NSLog(@"VC found");
            } else {
                NSLog(@"VC not found");
    } 
```

任务选择视图控制器.m

```
 -(id)initWithUser:(PFUser *)currentUser
{
NSLog(@"current user %@", currentUser);

NSLog(@"task Selection initwithuser");
return self;
 } 
```

推送正在工作，但我得到的只是顶部的 NavigationController 栏和黑屏。

缺什么 ？？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-05T05:59:27.507

使用 instantiateViewControllerWithIdentifier:@"ID" 完成

```
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil];
TaskSelectionViewController *controller = (TaskSelectionViewController*)[mainStoryboard instantiateViewControllerWithIdentifier: @"task"];
[navigationController pushViewController:controller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:45:02.320

在`-(id)initWithUser:(PFUser *)currentUser`TaskSelectionViewController 中，您应该调用`[super init]`或类似的方法来正确初始化 ViewController。这至少为我解决了类似的问题。

查看 Apple 的示例以获取视图控制器初始化方法的参考实现。

# vb.net - VB.NET：当只点击里面的控件时，如何激活子窗体？

> ID：14153454
> 
> 赞同：0
> 
> 时间：2013-01-04T08:13:12.697
> 
> 标签：vb.net, visual-studio-2010, .net-4.0

*编辑：好的，所以这是我真正的问题，只有当表单是 MDIChild 时才会发生以下情况。感谢任何可以为我提供代码的人

我有一个带有标签、面板、按钮等的表单。我遇到的问题是，form2 是我的活动窗口/表单，我单击了 form1 内的控件，但 form1 不会自行激活。我想要发生的事情是让form1激活，即使它不是我点击的表单，只有它里面的控件（任何控件）..

我在想，如果我单击表单上的控件，则会在表单上触发一个事件。如果我只能知道某个事件，那会有所帮助 - 也许（因为如果它存在，我可以在该事件上添加 Me.activate）。当单击控件（例如标签）时，我尝试搜索一系列事件，但无济于事。我希望有人可以帮助我解决这个问题。

提前致谢。

*编辑

我会尽量让我的问题更容易理解..

> 仅单击控件（例如，标签或文本框）时，如何激活表单？当我在其中单击时，我的表单没有激活或聚焦，除了表单本身..

我可以在一个控件上做到这一点..

```
Private Sub Label1_Click - Handles Label1.Click
   Me.Activate()
End Sub 
```

但是如果我有 20 个控件（标签、按钮、文本框、组合框等）怎么办？看？=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:12:14.907

编辑：这个答案不适用于 MDI 应用程序。

我认为您真正想知道的是您的哪一个表单当前是前景窗口（如果有）。您需要了解的第一件事是表单实例存在于窗口中，但窗口的行为是在更高的地方控制的。类似于如何通过指向实例的变量来识别表单实例，可以通过所谓的窗口句柄来识别窗口。

知道了这一点，找出表单是否是“活动”表单的正确方法是：

1.  找出包含我们的实例的窗口的窗口`Form1`句柄`Form2`
2.  找出前台窗口的窗口句柄（可以是任何窗口）
3.  将步骤 2 中找到的值与步骤 1 中找到的所有值进行比较

如果前台窗口发生变化，您可能希望触发一个事件，但我将把实际实现留给您。可能有几种方法可以执行第 1 步和第 2 步，但我想不出任何解决方案。希望我让你回到正确的轨道上。

**编辑**

或者，您可以使用表单的`Containsfocus`属性。如果它的值为 True，您可以放心地假定您的窗体是前景窗口。直到我编写了自己的实现之后才发现这个属性，无论如何我都会向你展示：

**一个仅包含 Windows API 调用的模块**

```
Friend Module NativeMethods

    Friend Declare Function GetForegroundWindow Lib "user32.dll" () As IntPtr

End Module 
```

调用此方法将返回前景窗口的窗口句柄（如果有）。

**`Form`一个包含类扩展方法的模块**

```
Imports System.Runtime.CompilerServices

Public Module FormExtensions

    <Extension>
    Public Function IsForeground(f As Form) As Boolean
        Return (f.Handle = NativeMethods.GetForegroundWindow)
    End Function

End Module 
```

调用此方法返回指定的窗体*f*是否与前台窗口具有相同的窗口句柄。

**使用示例**

您可以使用`Timer`定期检查表单是否为前台窗口的 a。

```
Public Class Form1

    Private WithEvents timer As New Timer With {.Enabled = True}

    Private Sub timer_Tick(sender As Object, e As EventArgs) Handles timer.Tick
        If Me.IsForeground() Then
            Console.WriteLine("this instance of Form1 is the foreground window")
        End If
    End Sub

End Class 
```

就像我之前说的，你可以使用`Me.ContainsFocus`我的扩展方法来代替它，它会工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:22:49.280

在**非 MDI**表单中，当您单击其中的任何控件时，表单会**自动激活。**

# r - R 中的日期在 Windows 和 Linux 之间有所不同

> ID：14153457
> 
> 赞同：1
> 
> 时间：2013-01-04T08:13:21.117
> 
> 标签：r, time-series, xts

我在 R 名称中有一个数据框作为数据。

```
data <- as.xts(read.zoo("data1.csv",sep=",",tz="" ,header=T)) 
```

格式的数据索引`2004-01-04 09:44:00 IST`

我应用了将索引更改为日期的操作

```
index(data) <- as.Date(index(data)) 
```

输出应该是`2004-01-04`系统产生`2004-01-03`的。

这在 Windows 中可以正常工作，但在 Linux 上不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:31:19.300

Arun 是正确的，问题出在语言环境上。您的数据具有印度标准时间戳，并且您具有美国语言环境，至少晚 10.5 小时。因此，时间`09:44`实际上是您所在时区的前一天晚上很晚。

日期和时间非常复杂，R 使用底层操作系统功能进行计算，这就是为什么你在不同的机器上看到不同的结果。Linux 符合 POSIX 并理解像“IST”这样的时区，这允许它对前一天晚上进行更改。Windows 没有，这就是为什么它将日期指定为`01-04`. 要在 Windows 上获取正确的时区更新，您需要指定时区的全名“亚洲/加尔各答”。维基百科有一个[时区名称列表](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)。

* * *

编辑：实际上，R 附带一个文件，其中包含它接受的所有“大陆/城市”（奥尔森风格）名称。它存储在

```
file.path(R.home("share"), "zoneinfo", "zone.tab") 
```

帮助页面上的示例`?Sys.timezone`告诉您如何以编程方式阅读它。

* * *

我发现这个`lubridate`包让事情变得更容易看到正在发生的事情。

```
library(lubridate)
x <- ymd_hms("2004-01-04 09:44:00 IST", tz = "Asia/Kolkata")
x
# [1] "2004-01-04 09:44:00 IST"
with_tz(x, "America/New_York")
# [1] "2004-01-03 23:14:00 EST" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:31:57.673

```
Date <- c("2010-01-04 09:04:00", "2010-01-04 09:05:00")
Open <- c(5222.9, 5220.2)
Low <- c(5224.6, 5222.95)
High <- c(5220.1, 5218.6)
Close <- c(5220.35, 5222.95)
x <- data.frame(Date = Date, Open = Open, Low = Low, High = High, Close = Close)
as.Date(x$Date) 
```

输出：

```
[1] "2010-01-04" "2010-01-04" 
```

在我看来没问题。

`Edit:`

```
require(zoo)
data <- as.xts(read.zoo("data1.csv",sep=",",tz="" ,header=T))
> dput(data)

structure(c(5222.9, 5220.2, 5224.6, 5222.95, 5220.1, 5218.6, 
5220.35, 5222.95), .Dim = c(2L, 4L), .Dimnames = list(NULL, c("Open", 
"Low", "High", "Close")), index = structure(c(1262592240, 1262592300
), tzone = "", tclass = c("POSIXct", "POSIXt")), class = c("xts", 
"zoo"), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", 
"POSIXt"), .indexTZ = "", tzone = "")

> as.Date(index(data))

[1] "2010-01-04" "2010-01-04" 
```

在我的 Mac 上它工作正常。我怀疑您的系统语言环境设置错误。此外，您可能想在 R 中检查它。

这个命令`Sys.getlocale()`给你什么 in`Windows`和 in `Linux`inside `R`？

# android - 为什么不能为陀螺仪指定传感器延迟

> ID：14153459
> 
> 赞同：0
> 
> 时间：2013-01-04T08:13:37.683
> 
> 标签：android, gyroscope

[正如我们所知，我们可以通过此链接](http://java.llp2.dcc.ufmg.br/apiminer/docs/guide/topics/sensors/sensors_overview.html)将传感器延迟指定为高于 Android 3.0（API 级别 11）的绝对值（以微秒为单位）。

我试过用加速度计，它真的很管用。我设置时间延迟为2s，显示加速度的间隔为2s左右。

但是，对于陀螺仪，无论我设置多少时间延迟，陀螺仪都会以自己的时间延迟输出值。

有人知道原因吗？

# dynamics-crm-2011 - CRM 2011：电子邮件属性“发件人”，如何预定义？

> ID：14153461
> 
> 赞同：0
> 
> 时间：2013-01-04T08:13:38.120
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-4, microsoft-dynamics

我在哪里可以找到规则，通过在动态中创建新记录来描述应该预定义的字段（及其值）？我已经使用了映射表，它对某些实体和字段很有用，但是对于电子邮件中的“发件人”等字段没有规则。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:28:19.610

如果您问：“如何为查找字段设置默认值？”。

简短的回答是你不能。

如果您愿意使用 JavaScript 之类的东西来自定义表单，那么更长的答案是可以的。

# neo4j - 如何用密码返回节点属性的上限值？

> ID：14153462
> 
> 赞同：0
> 
> 时间：2013-01-04T08:14:01.700
> 
> 标签：neo4j, cypher, spring-data-neo4j

我有一个问题，我需要返回应该是大写的节点属性，我阅读了 neo4j 手册并没有找到这样做的方法，我注意到版本 1.9 具有上层功能，而我使用的是 1.7，对于我不想升级我的 neo4j 的其他原因，所以有什么解决方案，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:31:33.063

由于 Neo4J 1.7 没有`UPPER()`函数，您必须在显示结果之前在自己的代码中进行转换。

另一个（但丑陋的）解决方案是创建一个节点属性来保存字符串的大写版本。

# winapi - NTFS 流 H:流

> ID：14153467
> 
> 赞同：1
> 
> 时间：2013-01-04T08:14:26.670
> 
> 标签：winapi, ntfs

为什么我尝试使用 CreateFile() 打开名为“file:stream”的 NTFS 流 - 没关系。

但是当文件是“H”并且我在驱动器 H: 上安装了闪存卡读卡器时，CreateFile() 会尝试在闪存卡上打开名为“stream”的文件，因为传递给 CreateFile() 的参数是“H:stream”！

应该如何正确打开这些命名流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:29:29.880

在这种奇怪的情况下，您可以简单地`.\`在文件名前面添加前缀或使用完整的文件路径。例如，这按预期对我有用：

```
.\H:stream 
```

# ruby-on-rails - 设计+omniauth-google-oauth2调用错误

> ID：14153471
> 
> 赞同：1
> 
> 时间：2013-01-04T08:14:50.883
> 
> 标签：ruby-on-rails, devise, oauth-2.0, omniauth

您好我正在尝试在我的应用程序上集成设计和omniauth 登录。我正在尝试使用omniauth-google-oauth2，并按照本教程[https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview上的说明进行操作](https://github.com/plataformatec/devise/wiki/OmniAuth%3A-Overview)

我做了这一切，但我不断收到谷歌错误消息

```
Error: invalid_request
Missing required parameter: client_id
Learn more
Request Details
response_type=code
scope=https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile
redirect_uri=http://localhost:3000/users/auth/google_oauth2/callback
access_type=offline
approval_prompt=
state=50665ea3f96dc12e2189e93e1bc40592fc35ce5167d462e0
client_id= 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:05:09.123

@Baldrick 的回答帮助我解决了这个问题。

确保

```
config.omniauth :google_oauth2, "APP_ID", "APP_SECRET", { access_type: "offline", approval_prompt: "" } 
```

设置正确

# c# - 解析带有值和内部节点的xml节点

> ID：14153477
> 
> 赞同：1
> 
> 时间：2013-01-04T08:15:07.950
> 
> 标签：c#, deserialization

我们有以下 XML

```
<A>
   <B>0
      <C>4</C>
    </B>
</A> 
```

如您所见，`C`在节点 B 的值之后有一个节点。我们想用`Xml.Serialization`标签 ( `XMLElement`, `XMLRoot`...) 解析它，就像我们对其余消息所做的那样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:24:49.387

这样的节点内容称为“混合内容”。

我从不需要处理此类文件的 XmlSerialization。看起来[XmlRootAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmltextattribute%28v=vs.100%29.aspx)可用于将此类数据序列化为字符串列表：

```
[System.Xml.Serialization.XmlTextAttribute()]
public string[] Text {get;set;} 
```

# ruby - MacRuby（秒表教程）和 Xcode：如何在 Xcode 中使用您的应用程序

> ID：14153479
> 
> 赞同：0
> 
> 时间：2013-01-04T08:15:19.430
> 
> 标签：ruby, xcode, macruby

MacRuby 和 Xcode 的超级新手。我刚刚完成了秒表教程（[https://github.com/MacRuby/MacRuby/wiki/Creating-a-simple-application](https://github.com/MacRuby/MacRuby/wiki/Creating-a-simple-application)），一切顺利。能够成功部署它......或者构建成功。

我究竟如何与应用程序交互？我需要导出它还是我该怎么做？如果我单击开始/停止按钮，它仍处于编辑模式。

见附图：

![应用仍处于编辑模式，无法交互](../Images/363217d7e6b030d88f0c1f74f2295f86.png)

正如我所说，这是我第一次真正弄乱 Xcode，因此非常感谢任何输入。谢谢你。

# excel - 在 VBA 中存储/加载条件格式信息

> ID：14153487
> 
> 赞同：0
> 
> 时间：2013-01-04T08:16:49.570
> 
> 标签：excel, vba, conditional-formatting

有没有办法可以存储并稍后恢复条件格式信息？选择一个单元格后，我想 1/ 将相应列/行的条件格式存储在某些数组中 2/ 删除相应列/行的条件格式 3/ 将列/行的内部颜色更改为不错的值（这样我就看到了crosshair) 4/ 在选择另一个单元格时，我想恢复原始列/行的 condformatting 并对当前选定的单元格从 1/ 重复该过程。

我尝试了类似的东西

```
Public condFmt1 As FormatCondition
Set condFmt1 = Range("A1").FormatConditions.Item(1)
...
Set Range("A2").FormatConditions.Item(1) = condFmt1 
```

但是最后一行给了我一个运行时错误 438 - 对象确实支持这个属性或方法。我可能分配错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:55:45.867

在玩了一个小时之后，我找到了一种在 VBA 中使用 FormatCondition 值的方法。

此代码复制我的“A1”范围的条件格式，**如果**值为`TRUE`

```
Sub CopyFormatCondition()

    Dim fC As FormatCondition
    Set fC = Range("A1").FormatConditions.Item(1)

    Range("A2").FormatConditions.Add Type:=xlCellValue, Operator:=fC.Operator, Formula1:=fC.Formula1
    Range("A2").FormatConditions.Item(1).Font.Bold = fC.Font.Bold

End Sub 
```

初始化 FormatCondition 时必须设置一些属性，例如`Type`,`Operator`和`Formula1`，因此我必须将 FormatCondition 添加到范围的 FormatConditions 集合中。

其他属性（例如 `Font`和`Interior`）可以在 FormatCondition 的初始化之后设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:39:14.923

假设您使用的是 Excel 2007 或更高版本，您也可以使用非 VBA 解决方案来实现您的目标：

1.  使用工作表/工作簿中的空单元格作为触发单元格并将其设置为`TRUE`. 为方便起见，命名此单元格`DisableConditionalFormatting`或类似名称。
2.  选择工作表的活动区域 (Ctrl-A) 并插入新规则 -> 使用公式确定要格式化的单元格。作为一个公式集`=DisableConditionalFormatting`。此处无需更改格式。
3.  设置新规则后，确保选中`Stop if true`条件格式规则管理器中的复选框

不，您可以通过更改单元格来打开和关闭工作表的条件格式`DisableConditionalFormatting`。

# java - Java nio read() 返回 -1

> ID：14153488
> 
> 赞同：1
> 
> 时间：2013-01-04T08:16:49.993
> 
> 标签：java, nio, socketchannel

这不是我第一次尝试理解这个问题，但我希望这将是最后一个：

**一些背景：**

我有一个`Java SocketChannel NIO`在非阻塞模式下工作的服务器。

该服务器有多个客户端，它们从它发送和接收消息。

`"keepalive"`每个客户端每隔一段时间就通过消息保持与服务器的连接。服务器的主要思想是客户端将“一直”保持连接并以“推送”模式接收来自它的消息。

**现在我的问题：**

在 Java NIO`read()`函数中 - 当 read() 返回 -1 - 这意味着它的 EOS。

在我在[这里](https://stackoverflow.com/questions/14037721/java-nio-read-end-of-stream)提出的问题中，我意识到这意味着套接字已完成其当前流并且不需要关闭..

当在谷歌搜索更多关于这个时，我发现这确实意味着连接在另一边关闭..

1.  “流”这个词到底是什么意思？它是从客户端发送的当前消息吗？客户端连接是否有能力发送更多消息？

2.  如果客户从未告诉他关闭，为什么会`SocketChannel`在客户端关闭？

3.  `read()`返回 -1 和对等 I/O 错误重置连接有什么区别？

这就是我阅读的方式`SocketChannel`：

```
private JSONObject readIncomingData(SocketChannel socketChannel)
        throws JSONException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException, IOException {
    JSONObject returnObject = null;
    ByteBuffer buffer = ByteBuffer.allocate(1024);
    Charset charset = Charset.forName("UTF-8");
    String endOfMesesage = "\"}";
    String message = "";
    StringBuilder input = new StringBuilder();      
    boolean continueReading = true;
    while (continueReading && socketChannel.isOpen()) 
    {
        buffer.clear();         
        int bytesRead = socketChannel.read(buffer);             
        if (bytesRead == -1)
        {
            continueReading = false;                    
            continue;
        }
        buffer.flip();
        input.append(charset.decode(buffer));
        message = input.toString();
        if (message.contains(endOfMesesage))
            continueReading = false;
    }       
    if (input.length() > 0 && message.contains(endOfMesesage))
    {
        JSONObject messageJson = new JSONObject(input.toString());
        returnObject = new JSONObject(encrypter.decrypt(messageJson.getString("m")));
    }           
    return returnObject;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:31:04.443

**“流”这个词究竟是什么意思？它是从客户端发送的当前消息吗？客户端连接是否有能力发送更多消息？**

流表示在两个位置之间流动的数据，通常在客户端和服务器之间，但实际上它是任何类型的数据流动。例如，如果您从硬盘读取文件，则使用 FileInputStream 表示从磁盘上的文件流向程序的数据。这是一个非常笼统的概念。把它想象成一条河流，水就是数据。此外，它是一种非常酷的河流，可以让您控制水/数据的流动方式。

**如果客户端从未告诉他关闭，为什么 SocketChannel 会在客户端关闭？**

如果客户端和服务器之间的连接被重置或中断，就会发生这种情况。你的程序永远不应该假设连接只是存在并且永远不会中断。连接因各种原因而中断，可能是网络组件不稳定，有人拔出了最好留在原处的插头，或者无线网络出现故障。服务器也可能关闭连接，例如，如果服务器程序出现故障、出现错误或连接超时。永远记住，打开的连接是有限的资源，因此如果它们空闲太久，服务器可能会决定关闭它们。

**read() return -1 和对等 I/O 错误重置连接有什么区别？**

当 read() 返回 -1 时，这仅意味着流中当前没有更多数据。连接重置意味着，可能有更多数据，但连接不再存在，因此无法再读取此数据。再次采用河流类比：将数据想象为使用连接两个村庄的河床（连接）从上游村庄（又名 Serverville）向下游村庄（又名 Clientville）输送一定量的水。现在，Serverville 的某个人拉动大杠杆，水（数据）从 Serverville 流向 Clientville。在 Serverville 发送了它想要发送的所有水之后，它关闭了控制杆，河床将再次变空（实际上随着连接关闭而被破坏）。这就是 Clientville 获得 -1 的地方。现在想象一下，一些推土机打断了河床，一些水永远不会流到 Clientville。这就是“连接重置”的情况。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:24:09.023

> “流”这个词到底是什么意思？它是从客户端发送的当前消息吗？

它是字节流，而不是消息。您可以使用这些字节来形成一条消息，但流不知道您正在这样做，它也不以任何方式支持消息。

> 如果客户端从未告诉他关闭，为什么 SocketChannel 会在客户端关闭？

如果另一端关闭它，它只能用 -1 关闭。

> read() return -1 和对等 I/O 错误重置连接有什么区别？

您可以通过其他方式关闭或断开连接，例如从同一侧关闭连接，或者连接超时，例如拔出网络电缆。

顺便说一句：您编写代码的方式更适合阻止 NIO。例如，如果您收到多条完整消息，则第一条消息之后的任何内容都将被丢弃。如果您使用阻塞 IO 并保留您阅读的所有内容，您将不会收到损坏或丢失的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:54:21.033

> 1.  “流”这个词究竟是什么意思？它是从客户端发送的当前消息吗？

它基本上意味着连接的一侧，即全双工。TCP 是一种字节流协议，提供两个独立的字节流，每个方向一个。

> 1.  如果客户端从未告诉他关闭，为什么 SocketChannel 会在客户端关闭？

它不会。客户端确实关闭了连接。这就是`read()`返回 -1 的意思。

> read() return -1 和对等 I/O 错误重置连接有什么区别？

`read()`返回 -1 表示对等方正确关闭了连接。'Connection reset by peer' 表示某种协议错误，通常是您已将数据写入已被对等方关闭的连接。

重新输入您的代码，如果`read()`返回 -1，您必须关闭频道。没有其他明智的方法可以继续。

# security - 企业应用程序中的传输和消息级安全性

> ID：14153492
> 
> 赞同：0
> 
> 时间：2013-01-04T08:17:10.380
> 
> 标签：security, esb, transport-security

我打算设计将 Web 服务暴露在外部的企业应用程序。我要去 ESB，我读到我们也可以在 ESB 中设置安全性。

根据我的发现，我们需要考虑传输级安全性和消息级安全性。

所以我发现对于传输层，我们可以使用 2 路 SSL 或 1 路 SSL。

如果我要使用带有 2 路 ssl 的 ESB，我需要使用消息级安全性吗？ESB 可以处理消息级别的安全性吗？

我阅读以下内容：[在 WCF 中使用消息级别安全性时是否需要传输级别安全性？](https://stackoverflow.com/questions/4829521/is-transport-level-security-necessary-when-using-message-level-security-in-wcf)

[传输级与消息级安全](https://stackoverflow.com/questions/4270883/transport-level-vs-message-level-security)

但找不到解决方案

谢谢。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:52:24.960

Wso2 ESB 支持消息级别（soap）安全性。有关更多信息，请参阅[文档](http://docs.wso2.org/wiki/display/ESB451/Security+for+Web+Services)

# php - Mysql查询SUM字段字符串和分组依据

> ID：14153494
> 
> 赞同：0
> 
> 时间：2013-01-04T08:17:14.190
> 
> 标签：php, mysql

我有一个名字是**laporan**，当前查询是

> “从拉波兰选择 *”

然后如果我 print_r 我得到这样的结果数据：

> ```
> [0] => Array
>     (
>         [tanggal_laporan] => 2012-11-04
>         [total_kas] => Rp 21.000,-
>     )
> 
> [1] => Array
>     (
>         [tanggal_laporan] => 2012-11-04
>         [total_kas] => Rp 50.500,-
>     )
> 
> [2] => Array
>     (
>         [tanggal_laporan] => 2012-11-04
>         [total_kas] => Rp 56.000,-
>     )
> 
> [3] => Array
>     (
>         [tanggal_laporan] => 2012-11-05
>         [total_kas] => Rp 89.000,-
>     )
> 
> [4] => Array
>     (
>         [tanggal_laporan] => 2012-11-05
>         [total_kas] => Rp 73.000,-
>     ) 
> ```

我想求和该字段为 varchar/string 的字段**total_kas**，我的问题是有办法/可以对字段 varchar/string 求和。然后这个查询 group_by **tanggal_laporan**，所以我想得到如下数据：

> ```
> [0] => Array
>     (
>         [tanggal_laporan] => 2012-11-04
>         [total_kas] => 127500
>     )
> 
> [1] => Array
>     (
>         [tanggal_laporan] => 2012-11-05
>         [total_kas] => 162000
>     ) 
> ```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:22:09.680

这应该有效（假设`total_kas`始终具有“Rp NUMBER，-”形式）：

```
SELECT tanggal_laporan, SUM(CAST(
    SUBSTRING_INDEX(SUBSTRING_INDEX(REPLACE(total_kas, '.', ''), ' ', -1), ',', 1)
    AS UNSIGNED INTEGER)) AS num 
FROM laporan 
GROUP BY tanggal_laporan 
```

我做了一些改变来处理整数。这是一个[SQLFiddle](http://sqlfiddle.com/#!2/6d3d3/11)示例。删除`UNSIGNED`它不适合您的需求。

# jquery - 文本框未触发 asp.net 必填字段

> ID：14153497
> 
> 赞同：2
> 
> 时间：2013-01-04T08:17:32.377
> 
> 标签：jquery, asp.net, internet-explorer, validation

我`requiredfieldvalidator`对一些文本框使用 a ，每个文本框都有占位符属性，但是当我单击提交按钮时，验证器没有触发，这个问题在 IE 中，因为 IE 默认不支持占位符，所以我为此目的使用 Jquery，这是我的代码：
查询：

```
 <script type="text/javascript">
       $(document).ready(function () {
           // $("#txtAddress").removeAttr("style");
           var userAgent = navigator.userAgent.toString().toLowerCase();
           if (userAgent.indexOf('ie') != -1) {
               $('[placeholder]').focus(function () {
                   var input = $(this);
                   if (input.val() == input.attr('placeholder')) {
                       input.val('');
                       input.removeClass('placeholder');
                   }
               }).blur(function () {
                   var input = $(this);
                   if (input.val() == '' || input.val() == input.attr('placeholder')) {
                       input.addClass('placeholder');

                       input.val(input.attr('placeholder'));
                   }
               }).blur();
           }
       });
</script> 
```

ASP：

```
 <asp:Label ID="lblResult"  runat="server" Text=""></asp:Label>
         <p>
           <asp:TextBox ID="txtOrgName" runat="server" placeholder="ناوی دامەزراوە"></asp:TextBox> 
           <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ForeColor="red" CssClass="validator" ControlToValidate="txtOrgName" ErrorMessage="*"></asp:RequiredFieldValidator>
       </p>   
        <br/>
       <p>
           <asp:TextBox ID="txtPhone" runat="server" placeholder="تەلەفۆن"></asp:TextBox> 

           <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" CssClass="validator" ControlToValidate="txtPhone" ForeColor="red" ErrorMessage="*"></asp:RequiredFieldValidator>
       </p>
       <br/>
       <p>
           <asp:TextBox ID="txtMobile" runat="server" placeholder="مۆبایل"></asp:TextBox>

           <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ControlToValidate="txtMobile" CssClass="validator" ForeColor="red" ErrorMessage="*"></asp:RequiredFieldValidator>
       </p>
       <br/>
       <p>      
           <asp:TextBox ID="txtAddress" runat="server" TextMode="MultiLine" Height="120px" Width="200px" style="direction: ltr;" placeholder="ناونیشان">

           </asp:TextBox>
           <asp:RequiredFieldValidator ID="RequiredFieldValidator5" runat="server" ControlToValidate="txtAddress" CssClass="validator" ForeColor="red" ErrorMessage="*"></asp:RequiredFieldValidator>
       </p>
        <p>
            <asp:Button ID="Button1" runat="server" Text="تۆمارکردن" />
        </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:39:52.380

```
 $(document).ready(function () {
        if ($.browser.msie === true) {
            $('#formId').find('[placeholder]').focus(function () {
                var inputObjObj = $(this);
                if (inputObj.val() == inputObj.attr('placeholder')) {
                    inputObj.val('').removeClass('placeholder');
                }
            }).blur(function () {
                var inputObj = $(this);
                if (inputObj.val() == '' || inputObj.val() == inputObj.attr('placeholder')) {
                    inputObj.addClass('placeholder').val(inputObj.attr('placeholder'));
                }
            }).blur();

            $('#formId').find('#Button1').click(function () {
                $(this).parents('form').find('[placeholder]').each(function (i) {
                    var inputObj = $(this);
                    if (inputObj.val() == inputObj.attr('placeholder')) {
                        inputObj.val('').removeClass('placeholder');
                    }
                });

                if (Page_ClientValidate()) {
                    //Form is valid;
                } else {
                    //Form is not valid;

                    return false;
                }
            });
        }
    }); 
```

# php - 无法将希伯来语发布到 mysql

> ID：14153504
> 
> 赞同：1
> 
> 时间：2013-01-04T08:18:09.577
> 
> 标签：php, mysql, hebrew

> **可能重复：**
> [如何使 MySQL 正确处理 UTF-8](https://stackoverflow.com/questions/202205/how-to-make-mysql-handle-utf-8-properly)

我正在尝试在我的数据库中添加一个希伯来语从一个简单的表格我得到这样的字母

```
×©×œ×•× 
```

代替

“שלום”

[关联](http://pcksp5478.byethost7.com/index.php)

但是我不能

是什么问题，是否可以解决？感谢任何能提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:21:19.757

选择 utf-8 字符集。

`mysql_set_charset('utf8',$link);`

[http://php.net/manual/en/function.mysql-set-charset.php](http://php.net/manual/en/function.mysql-set-charset.php)

# c# - .Net Web 服务连接由对等方重置：套接字写入错误

> ID：14153507
> 
> 赞同：0
> 
> 时间：2013-01-04T08:18:20.207
> 
> 标签：c#, java, .net

我在尝试调用 .Net Web 服务时遇到**连接重置：套接字写入错误。**

**场景：** 我有一个使用 .Net Web 服务（从 C# 创建）并部署在 IIS Web 服务器上的 Web 服务客户端（使用 Eclipse 从 Java 创建）。客户端所做的是将文件的内容作为二进制读取并将其转换为字符串输入（我们称之为 binaryContentInput）。现在，这个 binaryContentInput 将在调用 .Net Web 服务时用作输入。

**结果：** 当文件为 3 Mb 及以下时，我的代码工作正常。但是当文件为 4Mb 及以上时，我的代码遇到了套接字写入错误。

**遇到错误时 Eclipse 的输出**： http://pastiebin.com/?page=p&id= [50e68c5986083](http://pastiebin.com/?page=p&id=50e68c5986083)

**在互联网上找到的编码/解码代码： http://pastiebin.com/?page=p&id=** [50e68ce6c31b3](http://pastiebin.com/?page=p&id=50e68ce6c31b3)

**一般目标：**将文件从一台服务器传输到另一台服务器（它们都在同一个防火墙内）

我已经尝试根据错误进行谷歌搜索，但我还没有找到任何可行的解决方案。有人可以帮忙吗？

谢谢。

# sql-server - 如何防止 SQL Server LocalDB 自动关闭？

> ID：14153509
> 
> 赞同：25
> 
> 时间：2013-01-04T08:18:28.733
> 
> 标签：sql-server, localdb

我正在使用 SQL Server 2012 Express LocalDB。如果实例上没有任何活动，它们似乎会在 10 分钟后自动停止。有没有一种干净的方法可以让实例永远运行？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-04T18:10:39.993

超时可通过 T-SQL 配置`'user instance timeout'`选项：

```
sp_configure 'show advanced options', 1;
RECONFIGURE;
GO
sp_configure 'user instance timeout', 5;
GO 
```

超时以**分钟**为单位，最大值为`65535`。我很确定您需要在设置后重新启动实例。并且不要尝试将其设置为`0`，它只会使实例在启动后立即关闭，这将很难将值设置回有用的值:-)。

来源：[这篇 BOL 文章](http://msdn.microsoft.com/en-us/library/ms143684.aspx)包含有关用户实例的其他有用信息，这些信息也适用于 LocalDB 实例。

**最后的评论**

如果您需要始终运行并在计算机启动时启动的东西，您可以考虑使用常规的、基于服务的 SQL Server Express 实例。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-17T20:21:26.737

以下是如何从命令行执行 Krzysztof Kozielczyk 的回答。

启动`localdb`实例。

```
C:\> sqllocaldb start v11.0
LocalDB instance "v11.0" started. 
```

获取服务器路径，即实例管道名称。

```
C:\> sqllocaldb info v11.0
Name:               v11.0
Version:            11.0.3000.0
Shared name:        IIS_DB
Owner:              DESKTOP-AAAT5QS\bigfo
Auto-create:        Yes
State:              Running
Last start time:    2/17/2016 12:06:43 PM
Instance pipe name: np:\\.\pipe\LOCALDB#SH9D87FB\tsql\query 
```

在该服务器上运行 SQL 命令。

```
C:\> sqlcmd -S np:\\.\pipe\LOCALDB#SH9D87FB\tsql\query

1> sp_configure 'show advanced options', 1;
2> GO

Configuration option 'show advanced options' changed from 1 to 1\. 
Run the RECONFIGURE statement to install.

1> RECONFIGURE;
2> GO

1> sp_configure 'user instance timeout', 5;
2> GO

Configuration option 'user instance timeout' changed from 5 to 5\. 
Run the RECONFIGURE statement to install.

1> RECONFIGURE;
2> GO

> exit 
```

# css - 背景限制

> ID：14153513
> 
> 赞同：0
> 
> 时间：2013-01-04T08:18:48.917
> 
> 标签：css

我缩小了网站的图形，使其适合 800 像素宽的屏幕，并且之前设置为 1000 像素。我完成了所有元素的大小调整，并将网站带到页面的中心，两侧有 100 像素的空间，但是背景仍在整个页面上重复。我想要页面两侧的空白。bg.png 的大小为 100*100 并且在整个页面上重复。 [http://imgur.com/zKyrf,ryv7y](http://imgur.com/zKyrf,ryv7y) 灰色背景需要在 800px 宽度。我用于背景的命令是：

```
 html {

    height:100%;
}
html, body, ul, form {
    margin:0;
    padding:0;
}
html {
    background-image:url(../images/bg.png);

     margin-left: auto;
         margin-right: auto;

}
body {
     background:url(../images/bgGeneral.png) repeat-x 0 0 ;width:800px;

     width:800px;
     margin: 0 auto;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:23:33.007

### 建议

1.  给`HTML`a `width`，没有用！

    ```
    html {
        width:800px;
        height:100%;
    } 
    ```

    给它，`body`而不是，保持`html`正常！你想做什么？

    ```
    html {
        height:100%;
    }
    body {
        width:800px;
        height:100%;
    } 
    ```

2.  这是什么意思？删除这些：

    ```
    html {
        background-image:url(../images/bg.png);

        margin-left: auto;
        margin-right: auto;

    }
    body {
        background:url(../images/bgGeneral.png) repeat-x 0 0 ;width:800px;
    } 
    ```

    边距不影响 HTML！而是这样：

    ```
    html {
        background-image:url(../images/bg.png);
    }
    body {
        background:url(../images/bgGeneral.png) repeat-x 0 0 ;
        width:800px;
        margin: 0 auto;
    } 
    ```

那应该可以解决所有问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:21:17.493

尝试 `background-repeat: repeat-y;`

它正在重复，因为您已将其设置为 repeat-x

# intellij-idea - IntelliJ - 有什么好的 Maven 插件吗？

> ID：14153514
> 
> 赞同：4
> 
> 时间：2013-01-04T08:19:01.913
> 
> 标签：intellij-idea

我正在尝试 IntelliJ 12，但有一件事确实令人失望....这是 maven 集成。

我缺少以下功能：

*   有效的 pom 视图
*   通过依赖层次结构搜索特定的 jar 槽
*   类路径应该直接从 maven pom 派生，而不是以某种疯狂的随机未知方式。我现在有这种情况，只是省略了一些依赖项，执行时可以看到它们`mvn dependency:analyze`
*   更改是 pom.xml 有时不会反映在项目中（类路径没有改变，或者仍然有旧的依赖项和新的依赖项），当我单击“重新导入”时也是如此

有谁知道其他一些maven插件？像`m2e`这样的东西真的很好;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T09:03:04.963

正如@tieTYT 所注意到的，有一个“依赖弹出窗口”（`Ctrl+Alt+U`在`Ctrl+F`那里工作）。

Idea 可以自动检测对 pom.xml 所做的更改并将其应用于项目。要启用此功能，请按`Ctrl+Shift+A`，输入“maven auto”，选择“导入”，勾选“自动导入 Maven 项目”；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T06:00:33.153

有关我的答案，请参阅[https://stackoverflow.com/a/19582120/417846](https://stackoverflow.com/a/19582120/417846)。它至少提供了一种*相对*简单的方法来获得有效的 pom。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-11T12:54:35.750

我刚从 Eclipse 搬来，我的想法是，单一技术有许多不同的插件，在这种情况下不是 - 案例已结束。

# c# - 分布式事务 SQL Server <-> MySql。例外：MySQL 连接器/网络当前不支持分布式事务

> ID：14153515
> 
> 赞同：0
> 
> 时间：2013-01-04T08:19:06.387
> 
> 标签：c#, mysql, sql-server-2008, entity-framework, mysql-connector

我必须将一些数据从 SQL Server 2008 DB 同步到 MySql DB。我正在使用 C# 和 EF 来管理数据。

流程是：从 SQL 服务器读取未同步的行，将条目（通过 EntitiesConverter 类）转换为 MySql 数据库实体，将行添加到 MySql，将 SQL 行标记为已同步（并在两个上下文中保存更改）。

代码：

```
public static int SyncAttivitaToHiPlan(int start, int? end)
    {

        var options = new TransactionOptions();
        options.IsolationLevel = IsolationLevel.Serializable;

        using (var scope = new TransactionScope(TransactionScopeOption.Required, options))
        {
            //MySql ObjectContext
            var hpContext = new hiplanEntities1();

            //SQL Server ObjectContext
            var otoContext = new OTOCOMMEntities1();

            var otoProvider = OtoCommEntitiesProvider.GetInstance();

            IEnumerable<Attivita> attivitaEntries;

            if (end == null)
                attivitaEntries = otoProvider.GetUnsyncedAttivita(start);
            else
                attivitaEntries = otoProvider.GetUnsyncedAttivita(start, (int)end);

            var tvavalavs = new ConcurrentQueue<tvavalav>();
            //ObjectContext is not thread-safe
            //attivitaEntries.AsParallel().AsOrdered().ForAll((a) => tvavalavs.Enqueue(EntitiesConverter.BuildTvavalavFromAttivita(a)));
            foreach (var a in attivitaEntries)
            {
                tvavalavs.Enqueue(EntitiesConverter.BuildTvavalavFromAttivita(a));
            }

            foreach (var t in tvavalavs)
            {
                hpContext.tvavalav.AddObject(t);
            }

          //  attivitaEntries.AsParallel().ForAll((a) => a.Synced = true);
            foreach (var a in attivitaEntries)
            {
                a.Synced = true;
            }
            hpContext.SaveChanges();
            otoContext.SaveChanges();

        }
        return 0; //TODO: return the number of synced rows.
    }

} 
```

当我尝试它时，我得到一个 MySql 连接器异常：“MySQL 连接器/网络当前不支持分布式事务。”

我该如何解决这个问题？有没有办法在单个事务中执行此操作（“虚拟”单打事务，因为我正在使用 2 个不同的数据库）而不会出现该异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:21:44.470

> 我该如何解决这个问题？

我的车坏了，怎么解决？

抱歉，连接器不符合规范，不支持分布式事务。要么找到一种没有它们的方法，要么修复连接器，或者使用支持它们的连接器。简直就是这样。

单独的交易很复杂 - DTC 是一个非常复杂的野兽。是的，2 笔交易有效。除非它们失败——即一台机器或网络出现故障，否则你有半开放的事务（一个提交，另一个回滚）。

你可以做一个合并机制 - 仅在完成后（在提交 mysql 之后）将源中的类标记为 symced 并编写目标部分，以便它“更新”或看到已经存在的行，但这会减慢速度。

然后你可以解决它。

# php - 不知道如何在 PHP 中创建 XML SOAP Post

> ID：14153516
> 
> 赞同：0
> 
> 时间：2013-01-04T08:19:06.193
> 
> 标签：php, xml, web-services, soap, wsdl

我搜索了示例等，但它不起作用。我不知道如何为我的 xml 消息创建一段“POST 代码”。我想我需要一个soapclient，但我不知道如何使用它。

WSDL 文件地址：[https ://secure.intelly.nl/webservices/intellymodule001.asmx?WSDL](https://secure.intelly.nl/webservices/intellymodule001.asmx?WSDL)

这是我创建的 xml 消息：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://www.w3.org/2003/05/soap-envelope" 
        xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
        xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" 
        xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
        xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" 
        xmlns:tns="http://extranet.intelly.nl/module001/" 
        xmlns:s="http://www.w3.org/2001/XMLSchema" 
    xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
    xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" 
    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" >
<SOAP-ENV:Body>
    <tns:GetDomains xmlns:tns="http://extranet.intelly.nl/module001/">
        <tns:credentials>
            <ExternalProgramFunction>***</ExternalProgramFunction>
            <ExternalProgramID>***</ExternalProgramID>
            <Domain>***</Domain>
            <Username>***</Username>
            <Password>***</Password>
        </tns:credentials>
        <tns:message>
        </tns:message>
        <tns:message>
        </tns:message>
        <tns:searchParameters>
            <OnlyActive>True</OnlyActive>
        </tns:searchParameters>
    </tns:GetDomains>
</SOAP-ENV:Body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:59:25.173

PHP 有一个本机[SoapClient](http://php.net/manual/en/soapclient.soapclient.php)，下面是使用您的输入结构的示例：

```
$client = new SoapClient('https://secure.intelly.nl/webservices/intellymodule001.asmx?WSDL');

$params = array(
    'credentials' => array(
        'ExternalProgramFunction' => 'xxx',
        'ExternalProgramID' => 'xxx',
        'Domain' => 'xxx',
        'UserName' => 'xxx',
        'Password' => 'xxx'
    ),
    'message' => array(),
    'searchParameters' => array(
        'OnlyActive' => true
    )
);

$response = $client->GetDomains($params);

print_r($response); 
```

# ruby-on-rails - 解析基于 Web 的 XML 文件时出现问题

> ID：14153519
> 
> 赞同：1
> 
> 时间：2013-01-04T08:19:25.393
> 
> 标签：ruby-on-rails, xml

我编写了一个小 Ruby 脚本，它可以解析远程 XML 文件并使用 Nokogiri 从中提取一些数据。现在我正在尝试编写一个更高级的版本作为 Rails 应用程序。

我的代码在控制器内。它类似于我在 Ruby 脚本中使用的代码，但是它不起作用。我相信这个错误是因为它试图在本地而不是在外部加载 XML。

这是 Rails 给我的错误：

```
No such file or directory - http://mal-api.com/anime/10?format=xml 
```

这是我的控制器中的代码示例：（如果需要，我可以提供整个东西，但它主要只是默认的 Rails 脚手架代码。）

```
def create
 require 'nokogiri'
 @anime = Anime.new(params[:anime])

 doc = Nokogiri::XML(open("http://mal-api.com/anime/#{@anime.mal_id}?format=xml"))

 #Title
 title = doc.css("anime english_title").inner_html
 #Snipped rails scaffold code
end 
```

`mal_id`通过表单传入。Nokogiri 已添加到我的 Gemfile 中。

有什么我遗漏的或者我做错了什么吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:31:07.707

默认情况下`open`，ruby 中的方法用于打开文件。如果你想直接打开一个 URL，你需要`require 'open-uri'`. 更多信息可以在文档中找到：[http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)

# sql - 更新语句不起作用

> ID：14153520
> 
> 赞同：2
> 
> 时间：2013-01-04T08:19:41.780
> 
> 标签：sql, sql-server, sql-server-2008, sql-update

对于下面提到的代码，任何人都可以提出更新语句在 SQL-SERVER-2008 中不起作用的原因吗

```
UPDATE [dbo].[CTRL_SECURITY]
SET BI_FIN_FLG = ISNULL(CAF.BI_FIN_FLG,'N'), 
           BI_HR_FLG = ISNULL(CAF.BI_HR_FLG,'N')
FROM dbo.CTRL_APP_FLG AS CAF
LEFT JOIN [dbo].[CTRL_SECURITY] AS CS
      ON CAF.TABLE_COLUMN_VALUE = CAST(CS.ACCOUNT_ID AS VARCHAR(180))
   WHERE ACCOUNT_ID IN(SELECT TABLE_COLUMN_VALUE FROM dbo.CTRL_APP_FLG WHERE TABLE_NAME='DIM_ACCOUNT') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:03:51.830

将 UPDATE [dbo].[CTRL_SECURITY] 更改为 UPDATE CS

# javascript - 如何最好地测试 JS 代码和与数据文件交互的效果

> ID：14153521
> 
> 赞同：0
> 
> 时间：2013-01-04T08:19:48.487
> 
> 标签：javascript, csv, testing, web

谁能告诉我测试 JavaScript 代码（特别是将其链接到数据文件，例如 csv 或 Json）而不是在服务器中（即来自桌面）的最佳方法是什么。我想在将 JS 部署到工作 Intranet 之前在我的机器上创建和测试 JS。在笔记本电脑上运行服务器方面没有太多经验，所以如果可能的话想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:27:20.070

在桌面上运行网络服务器确实是最好的解决方案，因为本地文件不允许 ajax 调用。
您可以查看 xampp，或者只是启动您的 IIS 来运行您自己的网络服务器。如果您没有使用 Web 服务器的经验，xampp 可能会更容易一些。

或者，IDE 可能会提供临时网络服务器。例如，Visual Studio Express 使用了一个内置的开发服务器，可以让您为您的文件提供服务，显然还需要一些使用此 IDE 的经验。

如果这一切都不起作用，您可以随时尝试像[http://jsfiddle.net/这样的沙盒服务](http://jsfiddle.net/)

可以在[Cloud9找到一个成熟且免费的在线 IDE，用于开发/测试/部署您的代码](https://c9.io/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:33:55.490

你可能会遇到这个[问题](http://code.google.com/p/chromium/issues/detail?id=40787)。基本上某些安全策略不允许您获取本地文件。[这个](https://stackoverflow.com/questions/5933834/using-ajax-to-access-web-from-local-file)问题有点关于如何处理同源策略的事情。“Same Origin Policy”+（浏览器名称）的谷歌搜索也可能有所帮助。

[本文](http://romkey.com/2011/04/23/getting-around-same-origin-policy-in-web-browsers/)提供了大多数主要浏览器的解决方法。

# c++ - 我的循环条件没有得到满足

> ID：14153522
> 
> 赞同：-4
> 
> 时间：2013-01-04T08:19:50.197
> 
> 标签：c++, string, std

出于某种原因，下面的这个 C++ 一直返回 false。任何帮助都会被接受！我会包含更多来源，但它在 LibPQ 中

```
std::string one = "stringa";
std::string two = "stringb";

std::string three = "stringa";
std::string four = "stringb";

if( one.compare( three ) == 0 && two.compare( four ) == 0 )  {

  return true;
} else {

  return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:25:57.327

问题是你的 if 后面没有 { 。尝试这个

```
std::string one = "stringa";
std::string two = "stringb";

std::string three = "stringa";
std::string four = "stringb";

if( one.compare( three ) == 0 && two.compare( four ) == 0 )
{
  return true;
} else {

  return false;
} 
```

顺便说一句，你的代码甚至符合吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:35:16.300

您可以尝试以下方法：

```
#include "iostream" 

using namespace std; 

std::string one = "amit"; 
std::string two = "kumar"; 
std::string three = "amit"; 
std::string four = "kumar"; 

bool strcomp() 
{ 
    if (one.compare(three) == 0 && two.compare(four) == 0) 
    { 
        return true; 
    } 

    return false; 
} 

int main() 
{ 
    if (strcomp()) 
    { 
       cout<<"Equal"<<endl; 
    } 
    else 
    { 
       cout<<"Defferent"<<endl; 
    } 

} 
```

输出：相等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:23:07.387

你有没有尝试过：

```
std::string one = "stringa";
std::string two = "stringb";

std::string three = "stringa";
std::string four = "stringb";

if( one == three && two == four ) {

  return true;
} else {

  return false;
} 
```

# wordpress - 更改结构日历小部件 WordPress

> ID：14153524
> 
> 赞同：0
> 
> 时间：2013-01-04T08:19:55.963
> 
> 标签：wordpress, calendar, widget

如果我想从下到上更改内置 WordPress 日历中月份链接的位置，我应该从哪里开始？

我是否在functions.php中编写了某种覆盖日历基本外观的函数？

像冠军一样在谷歌上搜索，但什么也没找到（那么我可能不是冠军）。

从头开始放置月份链接，如下图所示：![http://themes.trac.wordpress.org/raw-attachment/ticket/5813/widget-calendar.png](../Images/1d9206cc2382ec8b24a75bad1fc8572f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:49:19.443

你可以通过 css 做到这一点

```
#wp-calendar{
position:relative;
}
#wp-calendar tfoot td {
position:absolute; 
top:0px; 
} 
```

# javascript - javascript在没有jquery的情况下淡出文本onmouseover

> ID：14153526
> 
> 赞同：1
> 
> 时间：2013-01-04T08:20:10.367
> 
> 标签：javascript, text, fade, smooth

嗨，我想知道是否有人可以帮助我解决我的问题。我希望我的翻转文本从一个文本***慢慢***淡入另一个文本。访问我的网站，看看我在说什么~ [http://neutralmotive.com/](http://neutralmotive.com/)

如果您将鼠标悬停在“中性”上，它会*快速并立即*将文本交换为“媒体”。当您将鼠标悬停在“动机”上时也会发生同样的事情，它会*快速并立即*切换到“设计”。

当鼠标悬停在文本上时，我希望文本从一个文本***缓慢平滑地淡入到下一个文本。***我正在使用简单的 javascript 而不使用 ajax 或 jquery

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:25:51.690

如果您不急于支持每个浏览器，`animated`请在您的 span 中添加一个类并使用 css：

```
.hide{
    visibility: hidden;
    opacity: 0;
}
.show{
    visibility: visible;
    opacity: 1;
}
.animated{
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
} 
```

退税：

`.hide`和都`.show`显示，所以它们需要绝对定位

您也可以通过以编程方式切换类来使用 javascript 执行此操作。

以下是一些有用的资源：

[CSS过渡回调](https://stackoverflow.com/questions/2087510/callback-on-css-transition)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:50:48.403

使用以下代码慢慢淡出：

```
var opacity = 99; // Avoid starting at 100% due to Mozilla bug
var slowly = {
    fadein : function (id) {
        this.fadeLoop(id, opacity);
    },
    fadeLoop : function (id, opacity) {
        var object = document.getElementById(id);
        if (opacity >= 5) {
            slowly.setOpacity(object, opacity);
            opacity -= 4;
            window.setTimeout("slowly.fadeLoop('" + id + "', " + opacity + ")", 99);
        } else {
            object.style.display = "none";
        }
    },
    setOpacity : function (object, opacity) {
        object.style.filter = "alpha(style=0,opacity:" + opacity + ")"; // IE
        object.style.KHTMLOpacity = opacity / 100;              // Konqueror
        object.style.MozOpacity = opacity / 100;                    // Mozilla (old)
        object.style.opacity = opacity / 100;                   // Mozilla (new)
    }
} 
```

然后只需在所需事件中发送包含您所需文本的元素的 id。有关更多信息，您可以查看：[http ://www.dynamicdrive.com/forums/showthread.php?15192-JavaScript-Slowly-Fade-Using-Opacity](http://www.dynamicdrive.com/forums/showthread.php?15192-JavaScript-Slowly-Fade-Using-Opacity)

# c# - 将数据集转换为列表 并列出 C＃

> ID：14153543
> 
> 赞同：6
> 
> 时间：2013-01-04T08:21:44.480
> 
> 标签：c#, list, dataset

我的数据如下所示：

```
+=======+========+
| year  |sales   |
+=======+========+
| 2008  |100000  |
| 2009  |120040  |
| 2010  |239000  |
| 2011  |300900  |
| 2012  |200900  |
+=======+========+ 
```

我可以将数据集转换为双精度和字符串列表吗？数据集的第一列`list<string>`是，第二列是`list<double>`

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T08:24:48.297

我想知道为什么一年是一个字符串，但是......

```
List<string> years   = dataSet.Tables[0].AsEnumerable()
                            .Select(r => r.Field<string>(0))
                            .ToList();
List<double> doubles = dataSet.Tables[0].AsEnumerable()
                            .Select(r => r.Field<double>(1))
                            .ToList(); 
```

请注意，您需要添加`using System.Linq;`.

您可以将[`Field`扩展](http://msdn.microsoft.com/en-us/library/bb360891.aspx)方法与列的序号一起使用`DataRow`或通过它的名称：`r.Field<string>("year")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:25:50.513

试试这样；

```
List<string> years   = dataSet.Tables[0].AsEnumerable()
                            .Select(n => n.Field<string>(0))
                            .ToList(); 
```

并`(1)`为`sales`列。

不要记得添加`System.Data.DataSetExtensions`命名空间。另请参阅 MSDN [DataTableExtensions.AsEnumerable()](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)方法。

> 返回一个 IEnumerable 对象，其中泛型参数 T 是 DataRow。此对象可用于 LINQ 表达式或方法查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:36:05.610

1)

```
var myyear = ds.Tables[0].AsEnumerable()
                         .Select(r => new {
                                 column1 = r.Field<string>("year")
                                 });

List<string> year = myyear.ToList(); 
```

2)

```
var mysales = ds.Tables[0].AsEnumerable()
                          .Select(r => new {
                                  column2 = r.Field<double>("sales")
                                 });

List<double> sales = mysales.ToList(); 
```

# java - JTable：如何通过弹出输入对话框使用自定义编辑器更新单元格？

> ID：14153544
> 
> 赞同：1
> 
> 时间：2013-01-04T08:21:53.413
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我正在从使用[TableDialogEditDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html#TableDialogEditDemo)示例类的这个[oracle 教程中学习](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)

我为 JTable 编写了一个自定义单元格渲染器和编辑器。

我将它们注册到这个 Oracle [TableDialogEditDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDialogEditDemoProject/src/components/TableDialogEditDemo.java)类

```
 ...
        ...
        //Set up renderer and editor for the Favorite Color column.
        table.setDefaultRenderer(Color.class,
                                 new ColorRenderer(true));
        table.setDefaultEditor(Color.class,
                               new ColorEditor());

        TableColumn c = table.getColumnModel().getColumn(2);
        c.setCellRenderer(new CellStringRenderer()); //My custom Renderer
        c.setCellEditor(new CellStringEditor()); // My custom Editor

        //Add the scroll pane to this panel.
        add(scrollPane);
        ...
        ... 
```

（**更新的描述**）当我点击一个单元格时，会弹出一个输入对话框，这没关系，当我输入一个文本并单击“确定”时，JTable 中的单元格会更新，但文本没有正确显示/呈现，我必须单击任何其他单元格才能使单元格中的文本内容正确显示。

我的代码有什么问题？

我的渲染器

```
import java.awt.Component;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;

public class CellStringRenderer extends JLabel implements TableCellRenderer
{

    public CellStringRenderer()
    {
        this.setOpaque(true);
    }

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
       String stringValue = (String) value;
       this.setText(stringValue);
       return this;
    }

} 
```

我的编辑器（**更新**）

```
import java.awt.Component;
import javax.swing.*;
import javax.swing.table.TableCellEditor;

public class CellStringEditor extends AbstractCellEditor
        implements TableCellEditor
{

    String input;

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column)
    {
        if (isSelected)
        {
            JOptionPane dialog = new JOptionPane();
            input = dialog.showInputDialog(null, "new value");
            return dialog;   
        }
        return null;
    }

    @Override
    public Object getCellEditorValue()
    {
        return input;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-05T22:13:01.067

我是这个问题的作者，我解决了它。我将提供解决方案，以便其他人可以从中获得帮助。

我试图编写一个自定义渲染器和一个自定义编辑器来与 JTable 一起使用。渲染器只是使用 JLabel 来显示数据。它已经是 JTable 的标准组件。编辑器是单击我要编辑的单元格时出现的对话框。

这是解决方案：

将保持不变的类是来自 Oracle 的三个类 + 我的自定义渲染器类

1\. [TableDialogEditDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDialogEditDemoProject/src/components/TableDialogEditDemo.java)。

2.[颜色编辑器.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDialogEditDemoProject/src/components/ColorEditor.java)

3.ColorRenderer.java [_](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDialogEditDemoProject/src/components/ColorRenderer.java)

4.CellStringRenderer类上面提供的问题正文（我的课）

将要更新的类是自定义编辑器类（我将其名称从“CellStringEditor”更改为“DialogStringEditor”

```
import java.awt.Color;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.AbstractCellEditor;
import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.JTable;
import javax.swing.table.TableCellEditor;

public class DialogStringEditor extends AbstractCellEditor
        implements TableCellEditor,
        ActionListener
{

    String newInput;
    String oldValue;
    JButton button;
    static final String EDIT = "edit";

    public DialogStringEditor()
    {
        button = new JButton();
        button.setBackground(Color.WHITE);
        button.setActionCommand(EDIT);
        button.addActionListener(this);
        button.setBorderPainted(false);
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        if (EDIT.equals(e.getActionCommand()))
        {
            newInput = JOptionPane.showInputDialog("Edit", oldValue);
            if (newInput == null)
            {
                newInput = oldValue;
            }
            fireEditingStopped();
        }
    }

    @Override
    public Object getCellEditorValue()
    {
        return newInput;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table,
            Object value,
            boolean isSelected,
            int row,
            int column)
    {
        newInput = (String) value;
        oldValue = (String) value;
        return button;
    }
} 
```

这可以正常工作

您还可以对渲染器类“CellStringRenderer”进行一些更新，以控制单元格的选择和取消选择颜色的显示方式。

更新此方法：

```
 @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
        String stringValue = (String) value;
        this.setText(stringValue);

        if (isSelected)
        {
            this.setBackground(table.getSelectionBackground());
            this.setForeground(table.getSelectionForeground());
        } else
        {
            this.setBackground(table.getBackground());
            this.setForeground(table.getForeground());
        }

        return this;
    }
} 
```

问候。

# php - 循环中的许多更新查询

> ID：14153550
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:22:44.363
> 
> 标签：php, mysql

我有一个 php 脚本，我想在其中循环运行许多更新查询。查询量在 600 到 1000 之间。

当我运行脚本时出现错误：

mod_fcgid：45秒内读取数据超时

当我运行 300 个查询时，我没有收到任何消息。有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:26:30.600

尝试这个 ：

```
<?php
ini_set("max_execution_time","3600"); // 3600 是秒数，把你想要的放在那里。
?>

```

如果它不能通过代码工作，那么您也可以通过在根服务器上放置一个**“php.ini”文件来执行此操作。**

**这样做：**
创建一个 php.ini 文件并将其写入该文件并上传到您的服务器。

```
max_execution_time = 3600
```

如果它也不能通过**“php.ini”**工作，那么您可以通过将**.htaccess 文件**放在服务器的根目录上来做到这一点。

**做这个 ：**

```
php_value max_execution_time 360​​0
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:36:29.320

要解决此问题，您可以将其放入 .htaccess 文件中：

```
<IfModule mod_fcgid.c>
   FcgidIOTimeout  7200
</IfModule> 
```

或者您可以使用旧指令名称：

```
<IfModule mod_fcgid.c>
   IPCCommTimeout  7200
</IfModule> 
```

# php - 迁移到新的数据库结构后，我可以保留散列密码吗？

> ID：14153551
> 
> 赞同：1
> 
> 时间：2013-01-04T08:22:45.777
> 
> 标签：php, cakephp, hash, passwords, migration

我前段时间做了一个网站。带有 SQL 的原始 php。现在我正在用 CakePHP 做一个新版本，这意味着我想遵循很多约定，也就是说，我想尽可能地保持 cakePHP 的方式。

但：

有一个用户表，我试图在新版本上拆分成两个新的，添加字段并划分用户标识字段和使用统计字段，我仍在寻找最好的方法来简单地做到这一点，这不是主要的问题，但任何帮助将不胜感激。表名称不同以适应约定，并且字段已更改。我仍然需要对此进行一些研究。

旧站点使用 sha1() 对密码进行哈希处理，我想知道是否有机会在不让所有用户再次注册的情况下保留记录。

我发现了一些比蛮力更快的破解技巧。好吧，他们说他们更快，但我有大约 1000 个用户。此外，我认为破解我的用户密码以简化我的工作既不合法也不道德。所以破解似乎是不可能的。

我想只是照原样复制记录并为它们设置一个“重置密码”，这样他们就可以使用发送到他们注册时提供的电子邮件的代码再次登录。这不是一个非常糟糕的选择，但我只想在没有其他方法的情况下这样做。

那么，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:20:23.017

即使您会破解 SHA-1 哈希，您也无法确定您是否找到了真正的密码或只是一次冲突。所以你不能用不同的散列算法重新散列这些找到的密码。

无需重新设置密码，您只需等待用户下次登录即可。

1.  然后你可以先检查新算法。
2.  如果不匹配，请将其与旧的 SHA-1 哈希进行比较。
3.  如果旧的哈希值匹配，那么您可以计算并存储新的哈希，因为您知道真正的密码。

每个密码存储系统都必须选择切换到更好的哈希算法，您的问题不是一次性迁移问题。**像BCrypt**这样好的密码哈希算法有一个成本因素，有时您必须增加这个成本因素（因为更快的硬件），然后您需要与迁移所需的完全相同的过程。

我真的建议切换到像 BCrypt 这样的慢速密钥派生函数，而不是像 SHA-1 甚至 SHA-256 这样的快速哈希算法，因为它们太快了，而且很容易被暴力破解（[3 Giga SHA-1](http://hashcat.net/oclhashcat-lite/#performance) 2013 年的每秒[值）。](http://hashcat.net/oclhashcat-lite/#performance)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T13:37:31.953

如果需要，您可以保留现有密码。只需为 AuthComponent 创建一个[自定义 Authenticate 类](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-custom-authentication-objects)并覆盖相关方法以使用您想要的散列方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:24:41.767

是的，您可以重置密码或在新系统上应用与以前相同的哈希算法。

# asp.net - 如何在同一个 asp.net 页面上显示不同的配置文件

> ID：14153554
> 
> 赞同：1
> 
> 时间：2013-01-04T08:22:59.847
> 
> 标签：asp.net

我有一个名为 profile.aspx 的页面，您可以通过一个菜单访问它，当您单击它时，您会进入您自己的个人资料（如果您已登录），但随后我创建了一个包含另一个个人资料图像的超链接。当您单击它时，我想在同一页面 profile.aspx 上显示此配置文件。但我不知道该怎么做，因为如果我链接到 profile.aspx，我肯定会访问我自己的个人资料。

我在其他页面中看到，当您单击个人资料时，网址将类似于 facebook.com/member1 以将所有个人资料彼此分开。这是一个可能的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:40:10.673

当您使用唯一 ID 为您的个人资料页面获取数据时，您可以遵循以下可能的解决方案：

登录时，将您的唯一 ID 保存在会话变量中 -

```
Session["myID"]= "your id fetched from database"; 
```

当您单击另一个人的图像的超链接时，使用查询字符串概念将该用户的唯一 ID 附加到 url。

```
Response.Redirect("profile.aspx?ID="userID"); //the userID will be the user's uniqueID. 
```

当您从菜单中单击配置文件页面时，附加会话值：

```
Response.Redirect("profile.aspx?ID=Session["myID"].toString()); 
```

然后在页面加载中`profile.aspx`你可以这样做：

```
private void Page_Load(object sender, System.EventArgs e)
{
    string receivedID = Request.QueryString["ID"].toString();
    if(receivedID == Session["myID"].toString())
    {
      //this is yourself, so fetch your data from DB
    }
    else
    {
      //fetch the data of the receivedID passed in querystring(URL)
    }
} 
```

# ios - 使用苹果 LLVM 4.1 构建 iOS 应用程序时出错

> ID：14153564
> 
> 赞同：-2
> 
> 时间：2013-01-04T08:23:49.883
> 
> 标签：ios, compiler-errors

我收到以下错误：

![在此处输入图像描述](../Images/b973d0a59e228c5f21a1b9ab3c8dd893.png)

我不确定为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:25:57.030

看起来`__MWEKRS__`您的搜索路径中有一个旧的 MetroWerks CodeWarrior（这就是宏所表示的）包含目录。您是否从旧的 CodeWarrior 项目中导入了这个项目？还是您无意中添加了不合适的目录？查看正在生成的构建命令，特别`-I`是正在发出的指令。

# java - 包含外部项目的 NoClassDefFoundError - JBoss 7.1

> ID：14153566
> 
> 赞同：0
> 
> 时间：2013-01-04T08:24:04.343
> 
> 标签：java, eclipse, jboss, jboss7.x, noclassdeffounderror

我同时负责2个项目。第一个 (A) 是一个库，第二个 (B) 是一个在 JBoss AS 7.1 上工作的 Java EE 项目。

B 需要来自 A 的库。它们都是使用 Eclipse Juno 编写的。

我设法将 A 项目作为 jar 包含在 WEB-INF/lib 文件夹中。当我“重新发布”时，A.jar 会自动编译并包含在 WEB-INF/lib 文件夹中。

但是，当我想加载一个从 A 调用库的页面时，我在 A`NoClassDefFoundError`的类上有一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:35:12.227

NoClassDefFoundError 当类在编译时可用但在运行时找不到时发生。如果您确保 A.jar 已正确复制到 WEB-INF/lib，则其他怀疑可能是缺少的类不在该 jar 中。尝试查看 A.jar 内部，例如通过提取它并查看缺少的类是否在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:42:31.003

当 JVM 或 ClassLoader 实例尝试加载类的定义并且在运行时找不到正确的定义时，将引发 NOClassDefFoundError。

**因此，请检查您是否在库 A 中打包了该类的较旧（或错误）版本，与**您的 B 模块所需的不同（典型示例是可以找到该类，但它没有该方法应用程序调用者需要的定义）。

另一方面，请记住，默认情况下，JBoss 使用统一的类加载器和 Java Parent 委托，因此尽管一个库部署在同一个 JBoss 实例中的多个模块中，但 JBoss 只加载一个（在模块之间共享它），优先考虑到包含在父级中的那个。如果多个模块必须使用同一库的不同版本，这可能会导致意外行为。**因此，还要检查您的 JBoss 实例中是否部署了库 A 的多个版本。**

# javascript - 我可以在跨域 json 请求中设置标头吗？

> ID：14153569
> 
> 赞同：8
> 
> 时间：2013-01-04T08:24:19.577
> 
> 标签：javascript, json, http-headers, cross-domain, oauth-2.0

我在互联网上进行了一些研究，但我没有设法获得有关该主题的完整图片。任何人都可以帮助现在和永远解决这个答案吗？

这是我到目前为止发现的：

*   可以使用 jsonp 进行跨域调用。永远不允许在 jsonp 调用中更改标头
*   如果服务器允许，可以使用 json 进行跨域调用。

这就是我想要做的：

```
$.ajax({
    type: "GET",
    crossDomain: true,
    beforeSend: function (request) {
        request.setRequestHeader("Authorization", "Bearer " + ($("#accesstoken").val()));
    },
    contentType: "application/json; charset=utf-8",
    url: myJSonServer + encodeURI(operation),
    dataType: 'json',
    cache: false,
    success: callback,
    error: function (jqXhr, textStatus, errorThrown) { alert(textStatus + ": " + errorThrown); }
}); 
```

这是正在发生的事情：

*   当myJSonServer在同一个域时，完全没有问题
*   当 myJSonServer 在另一个域上时，发送请求，但没有 Bearer 标头

此 Bearer 标头是 oAuth2 标准的一部分。

我知道这可能不是最好的解决方案，在浏览器中设置 accessToken。我知道我可以在这种情况下使用代理。

我只是好奇是否可以或将可以在跨域 json 请求上设置标头？
谢谢

# - 问题解决了

我正在使用 MVC4 并在 web.config 中添加了 crossDomainScriptAccessEnabled="true"。我认为这已经足够了，但是apsillers的回答解决了我的问题。我现在已经在我的 web.config 中添加了这个：

```
 <system.webServer>
     <httpProtocol>
         <customHeaders>
        <add name="Access-Control-Allow-Origin" value="*" />
        <add name="Access-Control-Allow-Headers" value="Authorization" />
         </customHeaders>
      </httpProtocol>
   </system.webServer> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-05T17:45:51.360

使用 JSONP，无法设置自定义标头。

使用 CORS，服务器必须发送`Access-Control-Allow-Headers`标头以允许来自客户端的不常见的请求标头。从[HTML5 Rocks CORS 页面](http://www.html5rocks.com/en/tutorials/cors/)：

> `Access-Control-Allow-Headers`... - 支持的请求标头的逗号分隔列表。

因此，您的服务器必须发送 a`Access-Control-Allow-Headers: Authorization`以让浏览器知道可以将请求发送`Authorization`到服务器。如果没有此服务器标头，浏览器将仅随请求发送一些常见标头，而忽略其余标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:20:56.473

Since "jsonp" works by creating an script tag and using the attribute `src=` to load resource from another domain. So I don't think there is a way to modify request headers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T17:41:02.507

如果您使用 JSONP 进行跨域请求 - 那么答案是否定的，您不能在此类请求上设置 HTTP 标头。如果您使用 CORS 发出跨域请求 - 那么答案是肯定的，因为您使用普通 XHR 发出请求：[http](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) ://en.wikipedia.org/wiki/Cross-origin_resource_sharing 。

# audio - 使用 HTK 工具包进行歌手识别/说话人识别

> ID：14153570
> 
> 赞同：0
> 
> 时间：2013-01-04T08:24:21.363
> 
> 标签：audio, htk

我正在使用 HTK 工具包进行音乐检索

特别是，我想让歌手得到认可。

我想我想做的是接近说话人识别。

所以我研究了一些样本和红红 HTK 书。

但是还是找不到好的参考

歌手识别或说话人识别有什么好的参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-27T09:57:56.000

您还可以尝试 Microsoft Speaker Recognition API：[https](https://www.microsoft.com/cognitive-services/en-us/speaker-recognition-api#verification) ://www.microsoft.com/cognitive-services/en-us/speaker-recognition-api#verification 。

您可以使用 API 进行验证和识别。以下是他们的 C# 和 Python SDK：[https ://github.com/Microsoft/ProjectOxford-ClientSDK/tree/master/SpeakerRecognition](https://github.com/Microsoft/ProjectOxford-ClientSDK/tree/master/SpeakerRecognition)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:59:23.077

来自 HTK 网站： [http ://www.bas.uni-muenchen.de/Bas/SV/](http://www.bas.uni-muenchen.de/Bas/SV/)

它使用 HTK 进行说话人识别。

来自谷歌： [http ://code.google.com/p/sibo-htk/](http://code.google.com/p/sibo-htk/)

路易斯 ASR 实验室 www.asrlabs.com.br

# objective-c - UIImage 导致内存泄漏

> ID：14153578
> 
> 赞同：0
> 
> 时间：2013-01-04T08:24:52.617
> 
> 标签：objective-c, ios, memory-leaks

Instruments 告诉我，当我在应用程序中快速设置 a 的图像名称时，正在分配大量内存`UIImageview`。我有一个`UIImageView`在我的游戏中每帧都会改变它的图像名称。当使用僵尸检查仪器进行分析时，该应用程序似乎不断以惊人的速度获得实时字节。有没有办法可以解除分配`UIImageView`当前图像以阻止它这样做？我正在使用 ARC。

我分配`UIImageView`图像的代码如下：

`aPlanet.image = [UIImage imageNamed:tempPlanetName];`

其中 aPlanet 是`UIImageView`并且`tempPlanetName`是图像的名称。这被称为每一帧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:55:52.833

[UIImage ImageNamed:] 方法将图像加载到图像视图中，并将这个新创建的 uiimage 对象添加到自动释放池中。要摆脱这个问题，你应该使用 -

NSString *imgPath = [NSBundle mainbundle] pathForResource:@"imageName" ofType:@"png"]; aPlanet.image = [[UIImage alloc] ]initWithContentsOfFile:imgPath];

如果您使用的是 arc，那么您无需担心释放这个新分配的 uiimage 对象，该对象是使用 initWithContentsOfFile: 方法创建的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:38:05.103

当您使用`UIImage imageNamed:`它时，它将加载并缓存该图像文件。这旨在重用将在您的应用程序中多次使用的图标和其他图像资源。

除了每帧使用新图像更新图像视图似乎有些不寻常之外，您应该研究加载图像的替代方法，您不需要超过一次 - 或者即使您这样做，当您需要对其生命周期进行更多控制时.

例如看看`UIImage imageWithContentsOfFile:`（记录在这里：[Apple Developer Library Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithContentsOfFile%3a "苹果文档")）。它明确指出此方法不会对图像内容进行任何缓存。

我希望这对您有所帮助，但对于每一帧，我怀疑您的性能是否会通过这种方法足够好，但如果需要，这可能是另一个问题的主题。

# javascript - Google+ 环聊多人应用程序...？

> ID：14153583
> 
> 赞同：-3
> 
> 时间：2013-01-04T08:25:19.490
> 
> 标签：javascript, google-plus, hangout

我的问题是如何为谷歌视频群聊制作一个简单的多人游戏/多用户应用程序..？如果有人为谷歌环聊制作了这种类型的应用程序，请告诉我他是怎么做的:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T01:28:49.757

这是一个非常广泛的问题，可能会被关闭，但这里有一些提示。

[从文档](https://developers.google.com/+/hangouts/)开始，查看展示，然后加入[环聊开发者社区](https://plus.google.com/communities/104516377666905956948)。

开发此类游戏时您可能会严重依赖的 API 方法是[sharedState](https://developers.google.com/+/hangouts/shared-state)和[sendMessage](https://developers.google.com/+/hangouts/api/gapi.hangout.data#gapi.hangout.data.sendMessage)。

您可以从社区和展示中获取应用示例。

# guard - 没有为 binding.pry 提供 REPL 的护栏

> ID：14153585
> 
> 赞同：28
> 
> 时间：2013-01-04T08:25:27.627
> 
> 标签：guard, pry

我正在使用护栏来运行我的rails服务器，我的问题是当我添加绑定时我无法访问REPL。我刚刚得到

```
From: /home/martinr/code/app/controllers/tools_controller.rb @ line 2 ToolsController#index:

    2: def index
 => 3:   binding.pry
    4:   @end_date = Date.today.to_s
    5:   @start_date = Date.today.months_ago(3).to_s
    7: end

[1] pry(#<ToolsController>)> 
```

没有 REPL，我如何使用 pry 和护栏？

我的 Gemfile 文件看起来像这样

```
group :development, :test do
  gem 'pry-rails' # for better console debugging
  gem 'pry-debugger'
  gem 'rb-inotify'
  gem 'sqlite3'
end 
```

我的保护文件：

```
guard 'rails', :debugger => true do
  watch('Gemfile.lock')
  watch(%r{^(config|lib)/.*})
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-18T09:44:25.017

我已经用 Guard 和 Spork 设置了我的 rails 环境，我发现 binding-pry 对 guard 的行为很奇怪。如果我将 binding.pry 插入代码中，然后 guard 重新启动我的测试，则没有交互式调试。但是，如果我退出并再次开始警戒，它就会正常工作并正确地进入交互模式。

但是...如果我随后删除 binding.pry 行，guard 将按预期重新运行测试，但会在绑定行曾经所在的位置中断，即使它不再存在。

似乎每次插入或删除撬绑定时都必须重新启动防护。

令人恼火，但总比无法在测试中进行撬动要好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T16:15:05.910

我正在尝试类似的事情，也无法让它工作。这个问题似乎从 stdin 读取不会阻塞，所以 Pry 不会阻塞。从 STDIN 读取的任何内容都会立即返回。

```
rspec -X console.rb 
```

文件如下：

```
require 'spec_helper'

describe 'console' do
  it 'opens!' do
    Pry.config.input = STDIN
    Pry.config.output = STDOUT
    puts STDIN.closed?  # returns false
    binding.pry # returns right away, does not block
    gets # returns right way, does not block
  end
end 
```

# jbehave - 如何在 JBehave Story 中评论故事情节

> ID：14153586
> 
> 赞同：32
> 
> 时间：2013-01-04T08:25:45.510
> 
> 标签：jbehave

我有一个故事情节如下

```
Scenario: 

Given user is on Login page

When user types login details with xxx as user xxx as passwd and submits

Then dashboard is shown 
```

请告知，如何评论或不运行一行（例如：2行不应该在1直接3行之后进行测试）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-23T11:44:41.070

You want to temporarily disable a step in your scenario? Comment the line using the prefix `"!-- "`, such as

```
Given user is on Login page
!-- When user types login details with xxx as user xxx as passwd and submits
Then dashboard is shown 
```

**The space right after the !-- is mandatory.** Thanks @flaz14

See documentation on JBehave: [http://jbehave.org/reference/stable/grammar.html](http://jbehave.org/reference/stable/grammar.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-03T14:04:58.460

我知道这是一个老问题，但我找到了解决方案，并为社区分享：

'!--' 是可取消步骤的标志，表示需要禁用的步骤。

在我们的项目中，我们使用了一个故事解析器：

```
this.currentConf.useStoryParser(new TransformingStoryParser(this.currentConf.storyParser(), this.transformComment, this.transformCutter)); 
```

我们需要将文档放入用户故事中，因此我们在评论和可取消的步骤之间做出了区分：

`!-- Then ...`=> 可取消的步骤（原生方式）

`!--| This is a a comment...`=> 评论

使用转换器，在故事执行之前，评论会从故事中删除。

'|--' 也是如此，一个可取消的**例子**。我们引入了“|--|”或“切割器”来防止故事的其余部分被执行。

类（this.transformComment、this.transformCutter）：

```
    公共类 ParserTransformingComment 实现 StoryTransformer {

        公共 ParserTransformingComment() {
        }

        /**
         * 禁止评论员
         */
        private Rewriter vC = new Rewriter("(?ms)^((!--\\|[^\\r\\n]*)(?:\\r?\\n)?)") {
            @覆盖
            公共字符串替换（）{
                System.out.println("忽略：" + this.group(1));            
                返回 ””;
            }
        };

        @覆盖
        公共字符串转换（字符串 pStoryAsText）{
            返回 vC.rewrite(pStoryAsText);
        }

    }

    公共类 ParserTransformingCutter 实现 StoryTransformer {    
        公共 ParserTransformingCutter() {
        }

        /**
         * Gestion des '切割者'。
         */
        私有重写器 vS = new Rewriter("(?ms)^(\\|--\\|.*)") {
            @覆盖
            公共字符串替换（）{
                System.out.println(">>> Cette section va être ignorée : ");
                System.out.println(StringUtils.lineStart("> ",this.group(1)));
                System.out.println("-------------");            
                返回 ””;
            }
        };

        @覆盖
        公共字符串转换（字符串 pStoryAsText）{
            返回 vS.rewrite(pStoryAsText);
        }

    }

```

**编辑：** 从 Jbehave 4.3 开始，评论以更好的方式处理，即使没有 StoryTransformer ：

```
!--BlahBlah -- 完全被 Jbehave 忽略
!-- Then ... -- 忽略步骤（在报告中注册）
!-- Blah blah -- 评论（在报告中注册）

```

问候，大卫 C.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-31T12:58:01.630

如果您使用的是 Eclipse IDE，那么您可以使用快捷键`Ctrl`+`T`来评论单个/多个故事线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-13T05:39:05.700

`!--`当用户使用 xxx 作为用户 xxx 作为密码输入登录详细信息并提交时使用此选项。注意：对于注释“ `!--`”空间是强制性的，否则它将执行该步骤。

# ruby-on-rails - 在 before_save 过滤器上使用“发送”

> ID：14153607
> 
> 赞同：0
> 
> 时间：2013-01-04T08:27:01.067
> 
> 标签：ruby-on-rails, ruby, activerecord, before-save

我有一个`:strip_whitespaces`在这样的 Rails 模型上调用的 before_save 过滤器

```
 before_save :strip_whitespaces 
```

过滤器`strip_whitespaces`是一个私有方法，定义如下：

```
private 
  def strip_whitespaces
    self.name = name.split.join(" ") if attribute_present?("name")
    self.description = description.split.join(" ") if attribute_present?("description")
    self.aliases = aliases.split.join(" ") if attribute_present?("aliases")
  end 
```

如何使用 ruby​​ 的 send 方法使此方法干燥？一旦我必须向此过滤器添加更多字段，这也会有所帮助。

我有这样的想法，但它不起作用

```
 %W[name description aliases].each do |attr|
    self.send(attr) = self.send(attr).split.join(" ") if attribute_present?(attr)
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:39:55.677

我什至想把它分成*两个*私有方法：

```
def strip_whitespaces
  %w(name description aliases).each do |attribute|
    strip_whitespace_from attribute
  end
end

def strip_whitespace_from(attr)
  send("#{attr}=", send(attr).split.join(" ")) if attribute_present?(attr)
end 
```

请注意，您不需要做`self.send`- 这`self`是暗示的 - 而且您也不需要做，`send("#{attr}")`因为插值没有任何效果，您可以做`send(attr)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:44:44.050

这个答案很好地描述`send`了 ruby​​ 对象方法的 setter 语法 -[如何“以编程方式”\“迭代地”将每个类对象属性设置为一个值？](https://stackoverflow.com/questions/7477062/how-to-set-programmatically-iteratively-each-class-object-attribute-to-a-val)

通过使用以下代码解决了这种特殊情况下的问题

```
def strip_whitespaces
  [:name, :description, :aliases].each do |attr|
    self.send( "#{attr}=", self.send("#{attr}").split.join(" ") ) if attribute_present?(attr)
  end
end 
```

这里，代码首先获取属性的当前值`self.send("#{attr}")`，去掉空格，然后通过`"#{attr}="`setter将其设置为属性。`attribute_present?(attr)`是`ActiveRecord::Base`类上的一个方法，如果属性不存在，则返回 false。

# java - 如果我有一组唯一的 Long，如何获得一组唯一的整数？

> ID：14153608
> 
> 赞同：1
> 
> 时间：2013-01-04T08:27:07.880
> 
> 标签：java, casting, primitive

我有一套`Longs`（`Timestamps`实际上）。显然，它们不能在`Integers`不丢失数据的情况下被强制转换，因为`timestamp`不适合`Integer`范围。我需要`Integer`根据这些生成类型的主键`Longs`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:31:36.210

由于`Long`s 多于`Integer`s，因此没有安全的方法可以对所有`Long`s 集都有效。
但是，如果`Long`s 相距不太远，您可以将第一个时间戳用作 0，然后只需使用差异来`Integer`为每个后续时间戳获取唯一值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:32:41.130

方法有很多，但是你真的认为基于时间戳的主键是个好主意吗？拥有多个具有相同时间戳的条目并不难，因此它不会是一个非常好的密钥。

无论如何，由于您使用的是 java，我猜您的时间戳以毫秒为单位。由于将其截断为秒是完全坏主意（在同一秒内很容易与其他条目发生冲突）可能好主意是“转移”时间戳：从时间戳中选择最小日期并使时间戳为零，其他相对于它：在这种情况下，您可能会适合整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:33:22.813

假设创建日期时间戳的范围是有限的。假设日期在 2004 年 12 月 12 日之后。似乎是截断最高有效数字的合理方法，例如

```
long 00001357288262
int      1357288262 
```

# c# - 如何以编程方式在 Visual Studio 项目中生成新的 Visual Studio 项目？

> ID：14153614
> 
> 赞同：9
> 
> 时间：2013-01-04T08:27:25.653
> 
> 标签：c#, database-connection, code-generation, t4

我编写了一个项目，该项目采用您的数据库表 - 您选择并构建与表列相关的 C# 类。喜欢，过滤，查询等。

它完全有效，我可以生成 6 个具有完整功能的不同类 - 取决于我的需要 - 只需单击一下即可生成表格。T4真的很厉害！

但是，我想为这些类创建一个新项目。如您所知，创建这些文件并不是我的最终目标。

现在，我正在尝试以编程方式为这些类生成一个新的项目/解决方案。

我阅读了与此问题相关的不同问题，但这对我来说还不够。例如，[以编程方式创建 Visual Studio 项目](https://stackoverflow.com/questions/8790528/create-a-visual-studio-project-programmatically)与我的问题很接近，但它并不让我满意。我找不到如何选择新项目的类型。

我查看了以[编程方式生成 Visual Studio 解决方案](https://stackoverflow.com/questions/2736260/programmatically-generate-visual-studio-solution)，但找不到为生成的类提供新解决方案的方法。我还看了[Tree Surgeon](http://treesurgeon.codeplex.com/)。它没有让我满意。安装后，我看到它最多是为 Visual Studio 2008 设计的，它只是从用户那里获取项目名称。所以，Tree Surgeon 并不是解决这个问题的方法。

我需要的是，学习如何编写新项目的结构并以编程方式创建它。找到答案后，我计划有一个项目，当您在浏览器中编写新项目名称、数据库名称、表名称以及您需要的类类型时，T4 和C# 将为您和 ta-da 工作！您将拥有一个新项目，其中包含控制器、助手和新类。

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T19:22:45.640

GAT/GAX 是您最好的选择。我完全按照您在上一份工作中的要求做到了。Jelle Druyts 充其量解释了 GAX/GAT。我使用他的 6 个博客（下面有 2 个链接）在 VS 解决方案中生成项目和类。他的第 3 到 6 节课将是你最好的选择

[http://jelle.druyts.net/2006/06/29/GAS05TuningTheCProjects.aspx](http://jelle.druyts.net/2006/06/29/GAS05TuningTheCProjects.aspx)

[http://jelle.druyts.net/2006/07/03/GAS06GeneratingClasses.aspx](http://jelle.druyts.net/2006/07/03/GAS06GeneratingClasses.aspx)

请从他的博客中找到他的帖子 1-4。作为新成员，我不允许在这里发布所有链接

# c++ - 双缓冲和视口原点？

> ID：14153618
> 
> 赞同：1
> 
> 时间：2013-01-04T08:27:58.983
> 
> 标签：c++, gdi, win32gui

我想把原点放在中心，所以我做了：

```
SetViewportOrgEx(hdc,width/2,height/2,NULL); 
```

（如下面的代码所示）

现在，在实施双缓冲后，它似乎无法正常工作。任何想法为什么以及什么应该是这里的最佳实践？非常感谢

下面的代码：

```
case WM_PAINT:
        {
            hdc = BeginPaint(hWnd, &ps);
            // TODO: Add any drawing code here...
            RECT rect;
            GetClientRect(hWnd, &rect);
            int width=rect.right;
            int height=rect.bottom;

                    //Changing Origin position
            SetViewportOrgEx(hdc,width/2,height/2,NULL);

            HDC backbuffDC = CreateCompatibleDC(hdc);

            HBITMAP backbuffer = CreateCompatibleBitmap( hdc, width, height);

            int savedDC = SaveDC(backbuffDC);
            SelectObject( backbuffDC, backbuffer );
            HBRUSH hBrush = CreateSolidBrush(RGB(255,255,255));
            FillRect(backbuffDC,&rect,hBrush);
            DeleteObject(hBrush);

                    //Drawing on backbuffDC

            BitBlt(hdc,0,0,width,height,backbuffDC,0,0,SRCCOPY);
            RestoreDC(backbuffDC,savedDC);
            DeleteObject(backbuffer);
            DeleteDC(backbuffDC);
            EndPaint(hWnd, &ps);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:51:58.890

由于您更改了视口原点，因此您必须确保相应地更新坐标。在 的情况下`BitBlt`，您现在`(width/2, height/2)`作为左上角、`width`宽度和`height`高度传递。这会导致在设备上下文一半的区域出现 blit，这最终会导致目标设备上下文中的部分显示为这样，其余部分被剪裁。

要修复它，请更改坐标：

```
BitBlt(hdc,-width/2,-height/2,width,height,backbuffDC,0,0,SRCCOPY); 
```

其次，我自己不确定这个，但请确保将有效坐标传递给`FillRect`. 您传递的检索坐标与设备上下文及其视口无关，因此可能也必须转换这些坐标。

# c# - 验证当前运行的可执行文件

> ID：14153620
> 
> 赞同：4
> 
> 时间：2013-01-04T08:28:18.420
> 
> 标签：c#, .net, hash, cryptography

我正在寻找正确的方法来从该可执行文件中验证当前正在运行的可执行文件。我已经找到了一种为当前正在运行的文件计算（SHA256）哈希的方法。

问题是：我在哪里安全地存储这个哈希？如果我将它存储在配置文件中，恶意用户可以计算自己的哈希并替换它。如果我将它存储在可执行文件本身中，它可能会被十六进制编辑器覆盖。

我读到的一个建议是进行非对称加密（或者是去加密），但是我该怎么做呢？

要求是可执行代码在不同计算机上的哈希和加密/解密完全相同，否则我无法正确验证。这些计算机都将运行相同的操作系统，即 Windows XP（嵌入式）。

我已经签署了我所有的程序集，但我需要一些额外的安全性才能成功通过我们的安全目标。

对于那些知道的人，它涉及**FPT_TST.1.3**：TSF 应为授权用户提供验证存储的 TSF 可执行代码完整性的能力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:09:25.387

所有评论，尤其是 Marc 的评论，都是有效的。

我认为你最好的选择是查看验证码签名——这就是它们的目的。关键是 exe 或 dll 使用证书进行签名（将您的组织信息印入其中，就像 SSL 请求一样）并且修改后的版本不能（理论上加上所有正常的安全警告）用相同的证书重新签名证书。

根据要求（我这样说是因为这个“安全目标”有点模糊——验证代码完整性的能力可以很容易地成为如何在 Windows 资源管理器中检查文件的演练），这要么就足够了本身（Windows 具有从证书显示发布者信息的内置功能），或者您可以编写例程来验证身份验证码证书。

请参阅此 SO[验证可执行文件是否已签名（signtool used to sign that exe）](https://stackoverflow.com/questions/4345962/verify-whether-an-executable-is-signed-or-not-signtool-used-to-sign-that-exe)，最佳答案链接到一篇（诚然旧的）关于如何以编程方式检查身份验证证书的文章。

**更新**

按照 Marc 的建议进行 - 如果需要自编程检查，即使这样也不够。可执行文件可以被修改，删除检查，然后在没有证书的情况下部署。从而杀死它。

老实说 - 主机应用程序/环境确实应该有自己的检查（例如，需要有效的身份验证证书） - 如果不修改代码非常重要，那么它应该有自己的步骤。我想你可能真的是在疯狂追逐。

只需代表您进行任何检查将花费最少的精力，而不必过多担心它显然提供的实际安全性 - 因为我认为您是从一个不可能的点开始的。如果真的有人想要破解您编写的代码的任何真正原因，那么试图破解它的将不仅仅是一个小学生。因此，您可以使用的任何解决方案（评论等中提到的那些）都将很容易被颠覆。

**Rent-a-quote 最后一句话** *解释了我的“野鹅追逐”评论*

遵循最弱链接原则 - 可执行文件的完整性仅与运行该可执行文件的主机的安全要求一样有效。

因此，在打开 UAC 并打开所有安全功能的现代 Windows 机器上；例如，安装或运行未签名的代码非常困难。用户必须真的*想要*运行它。如果你把所有这些东西都降为零，那么它就相对简单了。在有根的 Android 手机上，很容易运行可以杀死手机的东西。这方面还有很多其他的例子。

因此，如果您的代码将被部署到的 XP Embedded 环境首先没有对其实际运行的内容进行运行时安全检查（例如，要求所有应用程序的身份验证码证书的策略），那么您将从继承的点开始比您实际应该提供的安全级别低。没有多少安全原语和例程可以恢复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:59:02.697

从 .NET 3.5 SP1 开始，运行时不检查强名称签名。当您的程序集是强命名时，我建议通过代码检查签名。将本机`mscoree.dll`与 p/Invoke 一起使用。

```
private static class NativeMethods
{
      [DllImport("mscoree.dll")]
      public static extern bool StrongNameSignatureVerificationEx([MarshalAs(UnmanagedType.LPWStr)] string wszFilePath, byte dwInFlags, ref byte pdwOutFlags);
} 
```

您可以使用 assemlby 加载事件并检查加载到您的（当前）应用程序域中的每个程序集：

```
AppDomain.CurrentDomain.AssemblyLoad += CurrentDomain_AssemblyLoad;

private static void CurrentDomain_AssemblyLoad(object sender, AssemblyLoadEventArgs args)
{
    Assembly loadedAssembly = args.LoadedAssembly;

    if (!VerifytrongNameSignature(loadedAssembly))
        // Do whatever you want when the signature is broken.
}

private static bool VerifytrongNameSignature(Assembly assembly)
{
     byte wasVerified = 0;

     return NativeMethods.StrongNameSignatureVerificationEx(assembly.Location, 1, ref wasVerified);
} 
```

当然，有足够经验的人可以从你的程序集中修补“检查代码”，或者干脆从你的程序集中去掉强名称。

# c# - ASP.NET：获取客户端机器上的文件路径（任何可能的解决方案/解决方法？）

> ID：14153627
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:29:05.377
> 
> 标签：c#, asp.net, file-upload

我在提取基本文件信息的 .aspx 页面上有一个文件上传控件。要求是我需要将所选文件的绝对路径从客户端机器保存到数据库。

我已经阅读了这个站点以及其他站点，出于安全原因，ASP.NET 本质上不允许从客户端计算机读取信息。

但我想知道是否有办法解决这个问题，使用 js 或其他方法来获取绝对路径，然后将其传递给 asp.net 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:36:16.650

你不能对这个限制做任何合理的事情。

用户机器上的任何完全受信任的代码都可以做到这一点。所以你的目标是说服用户安装一些可以为你提供信息的东西。

对于 Windows（都需要某种形式的安装）：

*   ActiveX 控件
*   本机EXE
*   本地安装的托管 EXE
*   本地安装的 HTA 仅适用于 IE

我相信几乎所有平台也有办法这样做......同样痛苦的安装要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:40:17.250

您无法获取客户端机器路径。出于安全目的，浏览器永远不会发布完整文件的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:16:52.193

您无法获取文件的完整路径。出于安全目的，浏览器永远不会发布完整文件的路径。

尝试在 java 脚本中使用以下代码。

```
lbltext.Text = FileUpload1.PostedFile.FileName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:20:56.663

Browser send file without full file path, so to retrieve file path you do it on client side via javascript function:

```
<script type="text/javascript">
function OnSubmitHandler(myForm)
{
   var fileUpload = document.getElementById('<% = FileUpload1.ClientID %>');

   myForm.action =  myForm.action + "?FilePath=" + fileUpload.value;

   return true;

}
</script>

<form id="Form1" method="post" runat="server" onsubmit="return OnSubmitHandler(this);">
...
<asp:FileUpload id="FileUpload1" ....  />

...
</form> 
```

If you don't want to send a file path via query string, you can create hidden form field, so file path will be sent via post.

# javascript - 选定文本编辑

> ID：14153630
> 
> 赞同：0
> 
> 时间：2013-01-04T08:29:22.050
> 
> 标签：javascript, jquery, html

我是一名 iPhone 应用程序开发人员。我正在更改所选文本的颜色。这对我来说很好。但是当重复的单词很少时，例如

> 大家好。你好世界。我是 iPhone 应用程序开发人员。你好世界。堆栈溢出。你好世界。

这里重复“你好”文本。当我选择最后一个“Hello”文本时，它会给我第一个“Hello”文本索引。我试过了`indexOf(),search()`，`anchorOffset()`但这不起作用。

以下是我的代码。

```
function heighlightText(data) {
    var selectedText = window.getSelection();

    var textd=$("#data").html(); // this will give me whole text.

    var normalText = $("#data").text();
    var startPosition = normalText.search(selectedText);                        // this will give selected text start position.
    var getPosition = selectedText.toString();
    var endPosition = parseInt(getPosition.length) + parseInt(startPosition);   // this will give selected text end position.

    var textToReplace = "<span id='" + startPosition + "' class='highlightedText' onclick=\"myOnclikFunction('"+selectedText+"')\"> "+selectedText+"</span>";

    var startPart = textd.substr(0,startPosition);
    var lastPart = textd.substr(endPosition,textd.length);
    var reT = startPart + textToReplace + lastPart;

    $("#data").html(reT);
} 
```

嗨HTML：

```
<style type = "text/css">
    #data {
        font-size : 20px;
        color : black;
    }

    .highlightedText {
        background-color : red;
    }
</style>

<body>
    <div id = "data" >Lots of text here...
    <div/>
</body> 
```

任何人都可以为此提出解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:53:41.567

如果您只是为文本着色，那么 Stefan 的回答是最可靠和最简单的方法：

```
document.execCommand("ForeColor", false, "#0000FF"); 
```

但是，看起来好像您正在添加一个类和一个单击处理程序，因此您需要更大的灵活性。

首先，没有办法在 DOM 的 HTML 表示中可靠地获得选择作为偏移量。您可以通过`anchorOffset`、和直接将选择作为节点内的偏移量`anchorNode`，或作为[DOM 范围](https://developer.mozilla.org/en-US/docs/DOM/range)。如果选择完全包含在单个文本节点中，则可以使用范围的方法：`focusOffset``focusNode``surroundContents()`

演示：http: [//jsfiddle.net/UvBTq/](http://jsfiddle.net/UvBTq/)

代码：

```
function highlightText(data) {
    var selection = window.getSelection();
    if (selection.rangeCount > 0) {
        var range = selection.getRangeAt(0);
        var selectedText = range.toString();

        var span = document.createElement("span");
        span.id = "span_" + range.startOffset + "_" + range.endOffset;
        span.className = "highlightedText";
        span.onclick = function() {
            myOnclikFunction(selectedText);
        };

        range.surroundContents(span);

        // Restore selection
        selection.removeAllRanges();
        selection.addRange(range);
    }
} 
```

但是，这是非常脆弱的，只有在选择完全包含在单个文本节点中时才能起作用。根据您要执行的操作，您可能需要更灵活的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:37:59.897

要获取选定的文本，您必须使用 getSelection javascript 方法。我不知道该方法是否适用于 iphone 浏览器，但这里有一个通用功能，它结合了所有浏览器的方法。

```
function getSelected() {
    var text = "";
    if (window.getSelection
    && window.getSelection().toString()
    && $(window.getSelection()).attr('type') != "Caret") {
        text = window.getSelection();
        return text;
    }
    else if (document.getSelection
    && document.getSelection().toString()
    && $(document.getSelection()).attr('type') != "Caret") {
        text = document.getSelection();
        return text;
    }
    else {
        var selection = document.selection && document.selection.createRange();

        if (!(typeof selection === "undefined")
        && selection.text
        && selection.text.toString()) {
            text = selection.text;
            return text;
        }
    }

    return false;
} 
```

在[这里找到](https://stackoverflow.com/questions/5643635/how-to-get-selected-html-text-with-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:39:56.993

`contenteditable="true"` `and document.execCommand('ForeColor', false, 'YOURCOLOR');`改为使用

例子：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>- jsFiddle demo</title>

    <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>
    <script type='text/javascript'>
        $(function () {
            $('#color').click(function () {
                document.execCommand('ForeColor', false, '0000FF');
            });
        });
    </script>
</head>
<body>
    <p contenteditable="true">Hello world</p>
    <button id="color">Change Color</button>
</body>
</html> 
```

提琴手：http: [//jsfiddle.net/WQKCw/1/](http://jsfiddle.net/WQKCw/1/)

# c# - 将自定义对象数据绑定到 aspx 文件中的控件而不是隐藏代码

> ID：14153633
> 
> 赞同：0
> 
> 时间：2013-01-04T08:29:32.850
> 
> 标签：c#, asp.net

我在完全绑定 aspx 文件中的通用列表时遇到问题。虽然它正确绑定到我的`<p>`和`<h>`标签，但不是我的 ImageButton。我在这里做错了什么。下面是我的代码

.aspx 文件

```
<%
int count = 1;
for (item = 0; item < mList.Count; AddItem())
{
   if (count == 3)
{ %>
<div class="one_third_last">
        <% count = 0;
            }
            else
            { %>
        <div class="one_third">
            <%}
            count++;%>
            <div class="modern_img_frame modern_four_col_large">
                <div class="preload_four_col_large">
                    <div class="attachment-fadeIn">
                        <asp:ImageButton ID="ImageButton" runat="server" ImageUrl="~/images2/premium-website-template-2.jpg"
                            ToolTip="CSS Template" AlternateText="CSS Template" Width="190" Height="111"
                            CommandName="<%# mList[item].PaymentCode %>" CommandArgument="<%# mList[item].PaymentDescription %>"
                            OnCommand="ImageButton_Command" />
                    </div>
                </div>
            </div>
            <!-- end modern_img_frame -->
            <h6>
                <%= mList[item].PaymentDescription%></h6>
            <p>
                <%= mList[item].PaymentDescription%></p>
        </div>
        <% 
}  %> 
```

代码背后

```
protected List<Payments_Default> mList;
protected int item;
public String PaymentCode { get; set; }
public String PaymentDescription { get; set; }
public int PaymentNumber { get; set; }

protected void Page_Load(object sender, EventArgs e)
{       

    mList = new Payments_Default().GetPaymentTypes();
    this.DataBind();
}

protected void AddItem()
{
    item++;
}

protected List<Payments_Default> GetPaymentTypes()
{
    List<Payments_Default> mList = new List<Payments_Default>();
    Payments_Default mObject = null;

    SqlCommand command = GenericSqlDataAccess.CreateCommandOnline("Text");
    command.CommandText = "SELECT bla bla bla";

    DataTable table = new DataTable();
    table = GenericSqlDataAccess.ExecuteReader(command);

    foreach (DataRow row in table.Rows)
    {
        mObject = new Payments_Default();
        mObject.PaymentCode = row["PayTypeCode"].ToString();
        mObject.PaymentDescription = row["PayTypeDesc"].ToString();
        mObject.PaymentNumber = table.Rows.Count;
        mList.Add(mObject);
    }

    return mList;
} 
```

# java - 如何在eclipse中的文本区域显示滚动条

> ID：14153636
> 
> 赞同：0
> 
> 时间：2013-01-04T08:29:48.300
> 
> 标签：java, eclipse, eclipse-plugin, jscrollpane, jtextarea

我正在学习 Java。我刚刚通过添加一些标签、一个文本视图和一个按钮创建了一个应用程序（喜欢 c# 中的桌面应用程序）。学习这个新东西很有趣，但我很快就遇到了一个问题，当你尝试将垂直滚动添加到我在 UI 上添加的文本视图时。

我还尝试向文本区域添加垂直滚动，但我的文本区域仍然没有显示滚动条。

当我将面板中的控件添加到 UI 时创建的部分代码如下：

```
thisLayout.setVerticalGroup(thisLayout.createSequentialGroup()
                .addContainerGap(17, 17)

                .addComponent(getJtxtArea(), GroupLayout.PREFERRED_SIZE, 158, GroupLayout.PREFERRED_SIZE) 
```

函数 getJtxtArea() 的代码如下：

```
private JTextArea getJtxtArea() {
        if(jtxtArea == null) {
            jtxtArea = new JTextArea();
            jtxtArea.setBackground(new java.awt.Color(255,255,255));
            jtxtArea.setFont(new java.awt.Font("Segoe UI",3,14));
            jtxtArea.setWrapStyleWord(true);
            jtxtArea.setLineWrap(true);
            JScrollPane scroll = new JScrollPane(jtxtArea);
            scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
            }
            return jtxtArea;
    } 
```

谁能告诉我为什么我没有在文本视图上看到滚动条。在此先感谢。

**注意：我使用 Eclipse Helios 作为 IDE，并在 Eclipse 中使用 Jigloo 插件作为 GUI。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:31:49.330

添加组件`scroll`而不是 jtxtArea。除此之外，您可能还想调整 JScrollPane 的大小。

# codeigniter - 子文件夹中的代码点火器

> ID：14153638
> 
> 赞同：0
> 
> 时间：2013-01-04T08:30:41.710
> 
> 标签：codeigniter, routing, subdirectory

我为我们的一个网站使用 codeigniter 制作了一个后台模块，并将其放入名为**backoffice**的文件夹中。该网站本身不使用任何框架，它只是几个静态网站，其中一些从数据库中读取一些数据。它没有任何 .htaccess 文件或任何路由。

当我尝试访问后台时它不起作用。错误日志说它正在尝试从子文件夹之外获取我的默认控制器：

```
File does not exist: /usr/local/apache/htdocs/home, referer: http://64.91.226.165/~captainj/backoffice/ 
```

我该怎么办，到目前为止你遇到过这种问题吗？谢谢

如您所见，由于尚未设置 DNS，我正在通过 IP 地址访问域

更新：

我刚刚发现只有当我尝试通过 IP 地址访问模块时才会发生这种情况。我已经将它复制到另一台服务器上并通过域名访问，它可以工作。但我仍然需要使用 IP 地址来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T21:45:36.400

尝试删除 url 坏部分并`htaccess`删除 index.php：

```
RewriteEngine On
RewriteBase /~captainj/backoffice/index.php/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# apache-zookeeper - Zookeeper - 如何在集群中获取节点崩溃事件？

> ID：14153640
> 
> 赞同：2
> 
> 时间：2013-01-04T08:30:51.017
> 
> 标签：apache-zookeeper

我使用 Zookeeper 作为集群的组通信框架。在我的集群中，每当一个节点崩溃时，我都想要一个相同的事件。这个怎么做 ？早些时候，我使用 JGroup 作为组通信框架，集群内的每个节点都用于连接到同一通道，并且每当特定节点崩溃时，Jgroup 都会生成一个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:52:15.307

您可以让每个节点在 zookeeper 中创建一个[临时](http://zookeeper.apache.org/doc/r3.4.5/zookeeperProgrammers.html#Ephemeral+Nodes)znode。当一个节点崩溃时，临时 znode 将消失。

现在要收到新节点加入和离开的通知，让所有临时 znode 成为同一个父 znode 的子节点，并在父 znode 的子节点上注册一个[监视](http://zookeeper.apache.org/doc/r3.4.5/zookeeperProgrammers.html#sc_zkDataMode_watches)。当添加和删除子 znode 时，此监视将触发，允许您查看节点何时加入或离开集群。

请记住每次触发时重新注册您的手表，并注意如果一个节点加入和离开的速度非常快，您可能会错过该事件。

# android - 如何将位图转换为字节数组

> ID：14153641
> 
> 赞同：0
> 
> 时间：2013-01-04T08:30:54.087
> 
> 标签：android, bitmap

我想将 URL 转换为位图图像。我也在尝试压缩并将此位图保存在 SD 卡上，但是当我运行代码时，Web 图像视图中没有显示图像。我有以下代码：

```
Logger.d(LOG_TAG, "Enter retrieveImageData()");
    URL url = new URL(imageUrl);
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setReadTimeout(CONNECTTION_TIMEOUT);
    // determine the image size and allocate a buffer
    int fileSize = connection.getContentLength();
    if (fileSize < 0) {
        Logger.d(LOG_TAG, "retrieveImageData()->file size less than 0");
        return null;
    }
    byte[] imageData = null;

    byte[] buffer = new byte[BUFFER_SIZE];

    // download the file
    // if(Global.show_logs) Log.d(LOG_TAG, "fetching image " + imageUrl +
    // " (" + fileSize + ")");
    BufferedInputStream istream = new BufferedInputStream(connection.getInputStream());

    if ((!(height == -1)) && (!(width == -1))) {
        Logger.d(LOG_TAG, "Enter retrieveImageData() :width="+width+" height"+height);
        File tmpFile = GlobalFunctions.getTmpFile();

        if (tmpFile == null)
            throw new IOException("DroidFu::ImageLoader: Could not create temp file!");

        BufferedOutputStream ostream = new BufferedOutputStream(new FileOutputStream(tmpFile));

        Logger.d(LOG_TAG, "before call of IOUtils.copy");
        IOUtils.copy(istream, ostream);
        Logger.d(LOG_TAG, "after call of IOUtils.copy");
        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(tmpFile.getAbsolutePath(), options);

        // Calculate inSampleSize
        Logger.d(LOG_TAG, "before call of calculateInSampleSize()");
        options.inSampleSize = calculateInSampleSize(options, width, height);
        Logger.d(LOG_TAG, "after call of calculateInSampleSize()");

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        Logger.d(LOG_TAG, "Absolute path of tmp file is: "+tmpFile.getAbsolutePath());
        Bitmap b=BitmapFactory.decodeFile(tmpFile.getAbsolutePath(), options);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        b.compress(Bitmap.CompressFormat.PNG, 100, stream);

        byte[] byteArray = stream.toByteArray();

        b.recycle();
        //imageData = stream.toByteArray();

        istream.close();
        ostream.close();
        stream.close();
        Logger.d(LOG_TAG, "Exit retrieveImageData() after resizing to imageview");
        return byteArray;
    } 
```

但是这段代码在这一行抛出异常（Throwable e）并且“e”为空。：

```
b.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T08:35:27.483

试试这个。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组转换为位图图像：-

```
Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T23:10:34.907

将位图转换为字节数组，您可以使用

```
 final int lnth=bitmap.getByteCount();

        ByteBuffer dst= ByteBuffer.allocate(lnth);
        bitmap.copyPixelsToBuffer( dst);
        byte[] barray=dst.array(); 
```

并从字节数组中获取位图使用

```
Bitmap bitmap = new BitmapFactory().decodeByteArray(byte_array, 0/* starting index*/, byte_array.length/*no of byte to read*/) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T05:46:46.093

这是更高级的[图像加载器库的链接](https://github.com/nostra13/Android-Universal-Image-Loader)

用法如下：

首先将此代码放在您的主要活动中。

```
DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder().showStubImage(R.drawable.ic_stub).showImageOnFail(R.drawable.ic_error).showImageForEmptyUri(R.drawable.ic_empty_url).cacheInMemory().cacheOnDisc().build();
    // Create global configuration and initialize ImageLoader with this
    // configuration
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext()).defaultDisplayImageOptions(defaultOptions).build();
    ImageLoader.getInstance().init(config); 
```

然后像这样在你的课堂上使用它：

```
private ImageLoader imageLoader; 
```

在你的 onCreate() 方法里面

`imageLoader = ImageLoader.getInstance()`;

然后像这样加载图像

```
imageLoader.displayImage(IMG_URL, imageView); 
```

# printing - 无法在网络打印机上使用 cmd 打印 .prn 文件

> ID：14153642
> 
> 赞同：1
> 
> 时间：2013-01-04T08:31:00.873
> 
> 标签：printing, copy, cmd, network-printers

我正在我的 c# 程序中尝试打印 prn 文件。为此，我首先尝试找到允许我在网络打印机上打印 prn 文件的命令的解决方案。所以这是我实际使用的命令：

```
print C:\test\test.prn > "\\10.0.2.152\Brother DCP-7065DN Printer" 
```

我还尝试了另一个命令：

```
copy /B C:\test\test.prn "\\10.0.2.152\Brother DCP-7065DN Printer" 
```

在这两种情况下，几秒钟后 cmd 显示消息：

```
Cannot find network path. 
```

但是当我使用 PDFCreator 作为打印机时，这两个命令都可以工作。所以当我写`\\developer3.idtt.local\PDFCreator`而不是`"\\10.0.2.152\Brother DCP-7065DN Printer"`文件时可以“打印”。

* * *

## 现在一些额外的信息：

*   **developer3.idtt.local**是我的完整计算机名称。
*   **10.0.2.152**是 Brother 打印机的 IP 地址，它通过 ping 命令回答。
*   **Brother DCP-7065DN 打印机**是目标打印机，它在首选项中被选中为共享打印机。
*   **打印机端口**：

![在此处输入图像描述](../Images/3cab3e5c4ca46788e088d81825f59668.png) ![在此处输入图像描述](../Images/773612961d4447208522e69f05253415.png)

## 问题：

如何解决这个问题？您知道为什么 cmd 找不到这台打印机吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:46:52.140

## 好的问题解决了！

如果我检查打印为共享打印机，您应该调用您的计算机名称而不是打印机 IP。在我的情况下，正确的命令是：

`copy C:\\test\\test.prn /B \\Developer3\TSC`

其中**Developer3**是我的计算机名称，**TSC**是`shareName`打印机。也**不要忘记**为这种类型的文件使用打印机（在我的示例中，我在热敏打印机上进行了测试），否则您可以获得清晰的页面。

# iphone - iPhone 文档文件夹如何从主机移动/复制到 iphone？。令人困惑

> ID：14153649
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:31:28.267
> 
> 标签：iphone, macos, xcode4, itunes

1）我在主机中有一个sqlite数据库.db，即：mac。说：sample.db

2) 我有一个 iPhone 应用程序，它在 Documents 文件夹中查看这个 sample.db。

3) 我有一个 10.6.3 的 itune 版本。Mac：狮子操作系统。

我只想将此 sample.db 复制到 iPhone 文档文件夹。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:37:25.557

要将文件共享到 iPhone 应用程序，您需要`UIFileSharingEnabled`在文件中启用密钥`info.plist`。

![文件共享](../Images/b1f3bfad8e32e6ef1532d390b88ec319.png)

将您的设备与 iTunes 同步时，选择您的应用程序。您将看到如下窗口：

![iTunes分享](../Images/6a862725d0c75d6db00ee462ab985063.png)

单击添加按钮并添加您的数据库文件并同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:35:57.460

您必须首先为您的应用启用 iTunes 文档共享。

为此，请`UIFileSharingEnabled`在`YES`您的`Info.plist`. 在启用此配置选项的情况下首次在 iOS 设备上运行您的应用程序后，您将在插入设备时在 iTunes 文件共享视图中看到该应用程序。

您现在可以将文件拖放到 iTunes 中的文件共享视图上，然后它会同步到 iOS 设备。

# php - 拒绝继承或使用 PHP 类

> ID：14153653
> 
> 赞同：1
> 
> 时间：2013-01-04T08:31:38.057
> 
> 标签：php, .htaccess, xampp

对于我的项目，我创建了一个名为 DBAccess 的文件夹，其中包含所有与数据库相关的 PHP 文件，这些文件具有 PHP 类、常量函数等。在文件夹的外部，我创建了一个名为 DBAccess.php 的 php 文件。以下是我的目录结构

```
Project1
  |_DBAccess
  |       |_functions.php
  |       |_class.php
  |       |_constants.php         
  |_DBAccess.php
  |_index.php
  |_aboutus.php  
    ....... 
```

现在我希望限制根目录中的任何页面使用 DBAccess 文件夹的内容，除了 DBAccess.php 文件。在 PHP 中是否可以使用 .htaccess 或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:49:12.073

你可以这样做：

调试访问/foo.php

```
<?php
$trace = debug_backtrace();

if (isset($trace[0])) {
  $dir =  basename(dirname($trace[0]['file']));
  $file = basename($trace[0]['file']);
  if ($file != 'DBAccess.php' && $dir != 'DBAccess') {
    throw new Exception("Nice try butthead");
  }
}

echo "Access Granted\n"; 
```

* * *

DBAccess.php

```
<?php
include_once("DBAccess/foo.php"); 
```

* * *

NoDBAccess.php

```
<?php
include_once("DBAccess/foo.php"); 
```

* * *

```
> php DBAccess.php 
Access Granted

> php NoDBAccess.php 

Fatal error: Uncaught exception 'Exception' with message 'Nice try butthead' in /Users/seanberry/so/DBAccess/foo.php:7
Stack trace:
#0 /Users/seanberry/so/NoDBAccess.php(3): include_once()
#1 {main} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:44:42.673

您可以创建一个处理此问题的函数，您所要做的就是在 _DBAccess.php 或您需要访问这些文件的任何其他文件中调用该函数。

试试这个功能：

```
function include_all_php($folder){
    foreach (glob("{$folder}/*.php") as $filename)
    {
        require $filename;
    }
} 
```

然后您只需使用文件夹名称调用该函数。

```
include_all_php("_DBAccess") 
```

如果您希望文件不包含这些文件，则不需要它们:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:44:22.250

是的你可以 ：

a) 通过在 DBAccess.php 中定义一个全局变量，例如

```
define('DB_LIB',true) 
```

并在文件夹中的所有其他文件中使用 DB_LIB 常量

（有点小技巧，但这确保了这些文件不会脱离上下文直接访问）

[b) 通过将类定义为 final](http://php.net/manual/en/language.oop5.final.php)来停止继承

**间接回答问题**

c) 停止重新发明轮子（如果您按照示例建议创建访问层）并使用已经存在的一个[PDO](http://php.net/manual/en/book.pdo.php)

d) 使用一些合适的 OO 设计模式，[例如](https://en.wikipedia.org/wiki/Design_Patterns)并检查[这一点](http://www.ibm.com/developerworks/library/os-php-designptrns/)。你的反应会是为什么？因为使用模式将解决许多继承和依赖问题，例如在访问层的情况下，子对象将不会被实例化，除非它不是用依赖对象创建的，例如在工厂情况下

f) 使用[public 、 private 和 protected 关键字](http://php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:48:58.237

*   `.htaccess`与 PHP 无关，它是 Apache Web 服务器的设置文件。Apache 无法阻止 PHP 代码读取磁盘上的文件。

*   您可以通过例如要求定义某些常量来防止*意外访问：*

    ```
    // DBAccess.php
    define('CAN_ACCESS_DB', true);

    // functions.php
    if( !defined('CAN_ACCESS_DB') ){
        die('You are not allowed to access this file');
    } 
    ```

    ...但是没有办法阻止故意访问。

你最好的机会可能是重新考虑你的设计。

# sql - 从两个不同的服务器数据库 INSERT INTO

> ID：14153657
> 
> 赞同：28
> 
> 时间：2013-01-04T08:32:11.697
> 
> 标签：sql, sql-server, openrowset

我正在尝试将表的数据复制`testdabse.invoice`到`basecampdev.invoice`表中。 `testdabse`是本地数据库，而`basecampdev`在服务器中。

我将数据复制到另一个表的查询不起作用，它说

```
Invalid object name 'basecampdev.dbo.invoice'. 
```

我一直在阅读此[文档](http://msdn.microsoft.com/en-us/library/ms190312.aspx)，但发现很难理解和理解。

这些是服务器提供的信息

```
Server type: Database Engine
Server name: server.database.windows.net (this is not the real name)
Authentication: SQL Server Authentication
Login: myusername
Password: mypassword 
```

如何连接到服务器以便能够运行此查询

```
INSERT INTO [basecampdev].[dbo].[invoice]
           ([InvoiceNumber]
           ,[TotalAmount]
           ,[IsActive]
           ,[CreatedBy]
           ,[UpdatedBy]
           ,[CreatedDate]
           ,[UpdatedDate]
           ,[Remarks])
SELECT [InvoiceNumber]
           ,[TotalAmount]
           ,[IsActive]
           ,[CreatedBy]
           ,[UpdatedBy]
           ,[CreatedDate]
           ,[UpdatedDate]
           ,[Remarks] FROM [testdabse].[dbo].[invoice] 
```

截屏

![在此处输入图像描述](../Images/2ab333454a4fae25db673a1d3409b9ef.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-04T08:43:48.630

It sounds like you might need to [create and query linked database servers in SQL Server](https://stackoverflow.com/a/189431/96505)

At the moment you've created a query that's going between different databases using a 3 part name `mydatabase.dbo.mytable` but you need to go up a level and use a 4 part name `myserver.mydatabase.dbo.mytable`, see [this post on four part naming](http://www.mssqltips.com/sqlservertip/1095/sql-server-four-part-naming/) for more info

**edit**
The four part naming for your existing query would be as shown below (which I suspect you may have already tried?), but this assumes you can "get to" the remote database with the four part name, you might need to edit your host file / register the server or otherwise identify where to find `database.windows.net`.

```
INSERT INTO [DATABASE.WINDOWS.NET].[basecampdev].[dbo].[invoice]
       ([InvoiceNumber]
       ,[TotalAmount]
       ,[IsActive]
       ,[CreatedBy]
       ,[UpdatedBy]
       ,[CreatedDate]
       ,[UpdatedDate]
       ,[Remarks])
SELECT [InvoiceNumber]
       ,[TotalAmount]
       ,[IsActive]
       ,[CreatedBy]
       ,[UpdatedBy]
       ,[CreatedDate]
       ,[UpdatedDate]
       ,[Remarks] FROM [BC1-PC].[testdabse].[dbo].[invoice] 
```

If you can't access the remote server then see if you can create a [linked database server](https://docs.microsoft.com/en-us/sql/relational-databases/linked-servers/linked-servers-database-engine?view=sql-server-2017):

```
EXEC sp_addlinkedserver [database.windows.net];
GO
USE tempdb;
GO
CREATE SYNONYM MyInvoice FOR 
    [database.windows.net].basecampdev.dbo.invoice;
GO 
```

Then you can just query against `MyEmployee` without needing the full four part name

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-08T22:44:20.637

西蒙给出的答案对我来说很好，但你必须按照正确的顺序来做：首先你必须在你想要插入数据的服务器中，你的 [DATABASE.WINDOWS.NET].[basecampdev]案子。

您可以尝试查看是否可以从 Invoice 表中选择一些数据，以确保您可以访问。

```
Select top 10 * from [DATABASE.WINDOWS.NET].[basecampdev].[dbo].[invoice] 
```

其次，执行 Simon 给出的查询以链接到不同的服务器。这次使用其他服务器：

```
EXEC sp_addlinkedserver [BC1-PC]; -- this will create a link tempdb that you can access from where you are
GO
USE tempdb;
GO
CREATE SYNONYM MyInvoice FOR 
    [BC1-PC].testdabse.dbo.invoice; -- Make a copy of the table and data that you can use
GO 
```

现在只需执行您的插入语句。

```
INSERT INTO [DATABASE.WINDOWS.NET].[basecampdev].[dbo].[invoice]
       ([InvoiceNumber]
       ,[TotalAmount]
       ,[IsActive]
       ,[CreatedBy]
       ,[UpdatedBy]
       ,[CreatedDate]
       ,[UpdatedDate]
       ,[Remarks])
SELECT [InvoiceNumber]
       ,[TotalAmount]
       ,[IsActive]
       ,[CreatedBy]
       ,[UpdatedBy]
       ,[CreatedDate]
       ,[UpdatedDate]
       ,[Remarks] FROM MyInvoice 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-03T13:05:55.073

如果源数据库不在链接服务器中，则不能直接将表从不同的数据库复制到目标服务器数据库中。但是一种可能的方法是，将所需表的脚本（带有数据的模式）临时生成到源服务器数据库中的一个表中，然后在目标服务器数据库中执行脚本以使用您的数据创建一个表。最后使用 INSERT INTO [DESTINATION_TABLE] select * from [TEMPORARY_SOURCE_TABLE]。将数据放入目标表后，删除临时表。

当我遇到同样的情况时，我找到了这个解决方案。希望这对你也有帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-04T05:53:09.970

```
USE [mydb1]

SELECT *
INTO mytable1
FROM OPENDATASOURCE (
        'SQLNCLI'
        ,'Data Source=XXX.XX.XX.XXX;Initial Catalog=mydb2;User ID=XXX;Password=XXXX'
        ).[mydb2].dbo.mytable2
    /*  steps - 
            1-  [mydb1] means our opend connection database 
            2-  mytable1 means create copy table in mydb1 database where we want insert record
            3-  XXX.XX.XX.XXX - another server name.
            4-  mydb2 another server database.
            5-  write User id and Password of another server credential
            6-  mytable2 is another server table where u fetch record from it. */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T08:37:28.463

您可以使用[CREATE SYNONYM](http://msdn.microsoft.com/en-us/library/ms177544%28v=sql.105%29.aspx)来远程对象。

# preprocessor - Corona 是否有预处理器语句，以便我可以为特定设备执行 Lua 代码？

> ID：14153658
> 
> 赞同：0
> 
> 时间：2013-01-04T08:32:13.933
> 
> 标签：preprocessor, coronasdk

我试图让 Corona SDK 为不同的设备（如 Fire、Nook 或 iOS）运行不同的代码。

是否有预处理器语句可以让我在运行时检测正在使用的设备并为每个设备执行不同的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:57:59.533

这是答案：

[http://www.coronalabs.com/blog/2012/12/11/device-detection-on-steroids/](http://www.coronalabs.com/blog/2012/12/11/device-detection-on-steroids/)

测试设备字符串。

```
 if (system.getInfo("model") == "iPad" or system.getInfo("model") == "iPhone" or   system.getInfo("model") == "iPod") then
      -- ios code here
    else
      if (system.getInfo("model") ~= "Kindle Fire") then
        -- amazon code here
      elseif (system.getInfo("model") ~= "Nook" ) then
        -- nook code here
      else
        -- google code here
      end
    end 
```

博客提供了一种创建自己的设备库函数的好方法，而不是`if`一直在代码中使用语句。

# json - 如何将数据绑定到 Xaml、Windows Phone？

> ID：14153659
> 
> 赞同：2
> 
> 时间：2013-01-04T08:32:24.197
> 
> 标签：json, windows-phone-7, xaml, data-binding

这是我的 C# 代码，现在它在控制台中显示数据。

```
class PlaceViewModel
    {

        public List<Vantaa.IntroPage.Place> Places;
    }       

public class Place
            {
                public string id { get; set; }
                public string title { get; set; }
                public string latitude { get; set; }
                public string longitude { get; set; }
                public string www { get; set; }
            }

        public class RootObject
        {
            public List<Place> Places { get; set; }
        }

    protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            WebClient webClient = new WebClient();
            webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
            webClient.DownloadStringAsync(new Uri("http://mobiilivantaa.lightscreenmedia.com/api/place"));
        }

        private void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            var rootObject = JsonConvert.DeserializeObject<RootObject>(e.Result);

            foreach (var book in rootObject.Places)
            {
                System.Diagnostics.Debug.WriteLine(book.id);
            }
            this.DataContext = new PlaceViewModel
                 {
                      Places = rootObject.Places
                 };
            } 
```

为了在 textblock 中显示数据，我应该如何处理 xaml 文件？

这是我当前的 xaml 代码。它肯定行不通。我真的不知道。

```
<ListBox ItemsSource="{Binding Places}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBlock Text="{Binding Path=id}" />
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T08:36:19.530

您的类代码看起来不错，所以现在只需将结果绑定到视图即可。您正在返回一个对象列表，因此您应该使用支持显示多个项目的控件。当然，您可以将书籍的所有 id 连接到一个字符串并在标签中显示。但这不是它的完成方式。您应该做的是向 XAML 添加一个 ListBox 控件并在其中创建一个 DataTemplate。通过这种方式，您可以设置项目的显示方式。

创建一个将成为 XAML 页面的 ViewModel 的类。此类将具有属性“Places”（类型：）`List<Place>`。在获取所有数据完成后的 OnNavigatedTo-event 中，填充 ViewModel 并将其绑定并绑定到 XAML 的 DataContext：

```
this.DataContext = new YourViewModel { Places = rootObject.Places }; 
```

这样您就可以从 XAML 中的 ViewModel 中获取所有对象：

```
<ListBox ItemsSource="{Binding Places}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <TextBlock Text="{Binding Path=id}" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

***编辑：***

这是一个工作示例：

**XAML：**

```
<Grid>
    <ListBox ItemsSource="{Binding Places}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Path=ID}" />
                    <TextBlock Text="{Binding Path=Title}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

**Place.cs：**

```
public class Place
{
    public string ID { get; set; }
    public string Title { get; set; }
    public string Latitude { get; set; }
    public string Longitude { get; set; }
    public string Web { get; set; }
} 
```

**MainViewModel.cs：**

```
public class MainViewModel
{
    public MainViewModel()
    {
        Places = new List<Place>();
    }

    public List<Place> Places { get; set; }
} 
```

**示例存储库（您应该有自己的）：**

```
public static List<Place> FetchData()
{
    var lst = new List<Place>();

    lst.Add(new Place { ID = "1", Title = "One", Latitude = "111", Longitude = "111", Web = "www......" });
    lst.Add(new Place { ID = "2", Title = "Two", Latitude = "222", Longitude = "222", Web = "www......" });
    lst.Add(new Place { ID = "3", Title = "Three", Latitude = "333", Longitude = "333", Web = "www......" });
    lst.Add(new Place { ID = "4", Title = "Four", Latitude = "444", Longitude = "444", Web = "www......" });

    return lst;
} 
```

**MainWindow.xaml.cs：**

```
public MainWindow()
{
    InitializeComponent();
    //This is where the magic happens
    //Fill the viewModel with the data
    var viewModel = new MainViewModel { Places = Repository.FetchData() };
    //Assign the viewModel with the data to the DataContext
    //The bindings will be automatically done in the XAML
    DataContext = viewModel;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T18:19:49.683

您的 PlaceViewModel 类应实现 INotifyProprtyChanged 接口，并且您要绑定的所有属性都应在设置器中通知它们的更改。

为了能够更新绑定文本块中的值，属性可以通知其更改。

示例：http: [//msdn.microsoft.com/en-us/library/ms229614.aspx](http://msdn.microsoft.com/en-us/library/ms229614.aspx)

# ruby - Ruby 中的命名参数不起作用？

> ID：14153660
> 
> 赞同：2
> 
> 时间：2013-01-04T08:32:29.797
> 
> 标签：ruby, ruby-1.9.3

我想知道为什么命名参数不能按我的预期工作。

```
 def my_method(var1, var2 = 1, var3 = 10)
   puts var1, var2, var3
 end

my_method(999, var3 = 123) 
```

输出

```
999
123
10 
```

而不是（至少，我猜应该是）：

```
999
1
123 
```

那么，我应该怎么做才能使用命名参数呢？

**PS**当我使用哈希时，它还不是我想要的：

```
def my_method(var1, vars = {var2: 1, var3: 10} )
   puts var1, vars[:var2], vars[:var3]
 end

my_method(999, var3: 123)

999

123

my_method(999, var2: 111, var3: 123)

999
111
123

my_method(999)
999
1
10 
```

所以我必须覆盖每个值`vars`或根本不覆盖它们。有没有更方便的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:38:12.360

在 ruby`my_method(999, var3 = 123)`​​ 中，分配`var3`值`123`并将其传递给`my_method`.

没有命名参数的概念，但是，您可以使用哈希作为参数，`my_method`例如：

```
def my_method(args = {})
   p "#{args[:a]}, #{args[:b]}, #{args[:c]}"
end 
```

然后你可以调用它：

```
my_method(b: 2, c: 3, a: 1) 
```

这将打印`1, 2, 3`，因为`b: 2, c: 3, a: 1`被 ruby​​ 推断为哈希。您也可以通过以下方式明确指示哈希：

```
my_method({b: 2, c: 3, a: 1}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:28:38.200

正如所指出的，Ruby 没有关键字参数（但它们将在 2.0 中出现）。为了实现您想要做的事情，`options`哈希是一个非常常见的 Ruby 习惯用法。

```
def my_method(var1, options = {})
  var2 = options.fetch(:var2, 1)
  var3 = options.fetch(:var3, 10)

  puts var1, var2, var3
end

my_method(999)
# => 999, 1, 10

my_method(999, var3: 123)
# => 999, 1, 123

my_method(999, var2: 111)
# => 999, 111, 10

my_method(999, var2: 111, var3: 123)
# => 999, 111, 123

my_method()
# => ArgumentError: wrong number of arguments (0 for 1) 
```

请注意，使用`options.fetch(:key, default)`而不是`options[:key] || default`经常更可取，因为它允许您显式指定虚假值（即`false`和`nil`）。

```
options = {x: nil, y: false}

x = options[:x] || 42      # sets x to 42
x = options.fetch(:x, 42)  # sets x to nil

y = options[:y] || 43      # sets y to 43
y = options.fetch(:y, 43)  # sets y to false

z = options[:z] || 44      # sets z to 44
z = options.fetch(:z, 44)  # sets z to 44 
```

您甚至可以传递一个`fetch`允许您推迟计算默认值的块：

```
options.fetch(:x) { some_expensive_calculation }
# some_expensive_calculation is only called if necessary 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:51:26.427

你可以用这个

```
 def my_method(options = {})
   puts options[:var1] || ''
   puts options[:var2] || ''
   puts options[:var3] || ''
  end 
```

调用使用

```
my_method(var1:999, var3: 123) 
```

或者

```
my_method(var1:999) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T13:56:11.790

你也可以玩这样的东西：

```
def method(data)
    defaults = {var2: 1, var3: 10}
    (@var1, @var2, @var3) = defaults.merge(data).values_at(:var1, :var2, :var3)
    p @var1, @var2, @var3
end

method(var1: 999, var3: 123) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T11:04:08.907

[Ruby 2.0.0](http://www.ruby-lang.org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/)发布，现在可以使用命名参数。

```
def my_method(var1, var2: 1, var3: 10)
   puts var1, var2, var3
end

my_method(999, var3: 123) 
```

结果：

```
999
1
123 
```

或者另一个例子：

```
def foo(str: "foo", num: 100)
  [str, num]
end

p foo(str: 'buz', num: 1) #=> ['buz', 1]
p foo(str: 'bar') # => ['bar', 100]
p foo(num: 2) # => ["foo", 2]
p foo # => ['foo', 100]
p foo(bar: 'buz') # => ArgumentError 
```

# java - Java HTTPS 连接转发

> ID：14153662
> 
> 赞同：1
> 
> 时间：2013-01-04T08:32:38.720
> 
> 标签：java, https, network-programming, socketexception

我正在编写一个简单的程序，`Java`它接收来自浏览器（如 Firefox）的连接请求，解析统计信息请求，然后将请求转发到原始目的地。然后程序从目的地读取响应，解析响应以获取统计信息，然后将响应转发给浏览器。

该操作的伪代码如下：

```
// Accept connection from browser and read request
1\. Socket browserConnection = serverSocket.accept();
2\. browserConnection.getInputStream().read(buffer);
3\. SocketInetAddress destInetAddress = parseHttpRequest(buffer);

// Connect to destination and forward request
4\. Socket destConnection = new Socket(destInetAddress);
5\. destConnection.getOutputStream().write(buffer);

// Read response from destination
6\. destConnection.getInputStream().read(buffer);
7\. parseHttpResponse(buffer);

// Forward response to browser
8\. browserConnection.getOutputStream().write(buffer); 
```

这适用于 HTTP 连接，但我正在`connection reset`使用 HTTPS 连接。

**注意：**我知道 HTTP 和 HTTPS 连接之间的区别，与 HTTP 不同，它不仅仅是一次性的`send`，然后是一些`receives`. 我的 HTTPS 代码`reads`尽可能多，也`writes`尽可能多。

[为什么我尝试连接的任何 HTTPS 服务器（例如https://www.google.com](https://www.google.com)、[https://www.comodo.com](https://www.comodo.com)等）都会重置连接？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:06:27.660

HTTPS 是安全的，以防止发生中间人攻击。您所说的，无论是否合法，都是中间人攻击的样子。使用 HTTPS，您不能只拦截发往另一个目的地的数据包并读取它们。但是，您可以让数据包指向您，向客户端提供您的安全证书，对数据包进行解码，对它们做任何您想做的事情，对它们重新编码，然后将它们传递到另一个目的地。不同之处在于，客户必须知道你的存在以及你是谁。否则，它将无法使用 HTTPS 与您通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T12:46:41.477

使用 HTTPS 代理，浏览器将发送`CONNECT`命令让代理建立与目标服务器的 TCP 连接（例如[https://www.google.com](https://www.google.com)）。代理建立连接后，它`OK`会向浏览器返回一条消息。然后浏览器将启动与目标服务器的 SSL 握手以启动加密数据传输。代理不得干扰数据。代理需要做的就是在浏览器和目标服务器之间中继字节流，仅此而已。

# sql-server - SQL Server：将数据类型 varchar 转换为数字时出错

> ID：14153665
> 
> 赞同：24
> 
> 时间：2013-01-04T08:32:50.763
> 
> 标签：sql-server, numeric, varchar

我有一张桌子：

```
Account_Code | Desc
503100       | account xxx
503103       | account xxx
503104       | account xxx
503102A      | account xxx
503110B      | account xxx 
```

`Account_Code`一个在哪里`varchar`。

当我在下面创建查询时：

```
Select 
  cast(account_code as numeric(20,0)) as account_code,
  descr 
from account 
where isnumeric(account_code) = 1 
```

它通过返回列中具有有效数值的所有记录来运行良好`account_code`。

但是当我尝试添加另一个选择时，嵌套到先前的 sql 中：

```
select account_code,descr 
from 
(
  Select cast(account_code as numeric(20, 0)) as account_code,descr 
  from account 
  where isnumeric(account_code) = 1
) a 
WHERE account_code between 503100 and 503105 
```

查询将返回错误

> 将数据类型 varchar 转换为数字时出错。

那里发生了什么？

如果有效，我已经转换为数字`account_code`，但查询似乎仍在尝试处理无效记录。

我需要 `BETWEEN`在查询中使用子句。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-04T08:47:13.067

**SQL Server 2012 and Later**

Just use `Try_Convert` instead:

> TRY_CONVERT takes the value passed to it and tries to convert it to the specified data_type. If the cast succeeds, TRY_CONVERT returns the value as the specified data_type; if an error occurs, null is returned. However if you request a conversion that is explicitly not permitted, then TRY_CONVERT fails with an error.

[Read more about Try_Convert](http://technet.microsoft.com/en-us/library/hh230993.aspx).

**SQL Server 2008 and Earlier**

The traditional way of handling this is by guarding every expression with a case statement so that no matter when it is evaluated, it will not create an error, even if it logically seems that the CASE statement should not be needed. Something like this:

```
SELECT
   Account_Code =
      Convert(
         bigint, -- only gives up to 18 digits, so use decimal(20, 0) if you must
         CASE
         WHEN X.Account_Code LIKE '%[^0-9]%' THEN NULL
         ELSE X.Account_Code
         END
      ),
   A.Descr
FROM dbo.Account A
WHERE
   Convert(
      bigint,
      CASE
      WHEN X.Account_Code LIKE '%[^0-9]%' THEN NULL
      ELSE X.Account_Code
      END
   ) BETWEEN 503100 AND 503205 
```

However, I like using strategies such as this with SQL Server 2005 and up:

```
SELECT
   Account_Code = Convert(bigint, X.Account_Code),
   A.Descr
FROM
   dbo.Account A
   OUTER APPLY (
      SELECT A.Account_Code WHERE A.Account_Code NOT LIKE '%[^0-9]%'
   ) X
WHERE
   Convert(bigint, X.Account_Code) BETWEEN 503100 AND 503205 
```

What this does is strategically switch the `Account_Code` values to `NULL` inside of the `X` table when they are not numeric. I initially used `CROSS APPLY` but as [Mikael Eriksson](https://stackoverflow.com/users/569436/mikael-eriksson) so aptly pointed out, this resulted in the same error because the query parser ran into the exact same problem of optimizing away my attempt to force the expression order (predicate pushdown defeated it). By switching to `OUTER APPLY` it changed the actual meaning of the operation so that `X.Account_Code` *could* contain `NULL` values within the outer query, thus requiring proper evaluation order.

You may be interested to read [Erland Sommarskog's Microsoft Connect request](http://connect.microsoft.com/SQLServer/feedback/details/537419/sql-server-should-not-raise-illogical-errors) about this evaluation order issue. He in fact calls it a bug.

There are additional issues here but I can't address them now.

P.S. I had a brainstorm today. An alternate to the "traditional way" that I suggested is a `SELECT` expression with an outer reference, which also works in SQL Server 2000\. (I've noticed that since learning `CROSS/OUTER APPLY` I've improved my query capability with older SQL Server versions, too--as I am getting more versatile with the "outer reference" capabilities of `SELECT`, `ON`, and `WHERE` clauses!)

```
SELECT
   Account_Code =
      Convert(
         bigint,
         (SELECT A.AccountCode WHERE A.Account_Code NOT LIKE '%[^0-9]%')
      ),
   A.Descr
FROM dbo.Account A
WHERE
   Convert(
      bigint,
      (SELECT A.AccountCode WHERE A.Account_Code NOT LIKE '%[^0-9]%')
   ) BETWEEN 503100 AND 503205 
```

It's a lot shorter than the `CASE` statement.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-04T08:37:12.187

不能保证 SQL Server在运行子句中的过滤器*之前*`CONVERT`不会尝试执行to 。`numeric(20,0)` *`WHERE`*

 *而且，即使它确实如此，`ISNUMERIC`也是不够的，因为它识别`£`并`1d4`作为数字，两者都不能转换为`numeric(20,0)`.(*)

将其拆分为两个单独的查询，第一个查询过滤结果并将它们放在临时表或表变量中，第二个查询执行转换。（子查询和 CTE 不足以阻止优化器在过滤器之前尝试转换）

对于您的过滤器，可能使用`account_code not like '%[^0-9]%'`而不是`ISNUMERIC`.

* * *

(*)`ISNUMERIC`回答了没有人（据我所知）想问的问题——“这个字符串可以转换为*任何*数字数据类型吗——我不在乎哪个？” - 显然，大多数人想问的是“这个字符串可以转换为 x 吗？” 其中`x`是*特定*的目标数据类型。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-08T13:02:38.723

如果您运行的是 SQL Server 2012 或更新版本，您还可以使用新的[TRY_PARSE()](https://docs.microsoft.com/en-us/sql/t-sql/functions/try-parse-transact-sql)函数：

> 返回表达式的结果，转换为请求的数据类型，如果在 SQL Server 中强制转换失败，则返回 null。仅将 TRY_PARSE 用于从字符串转换为日期/时间和数字类型。

或[TRY_CONVERT](https://docs.microsoft.com/en-us/sql/t-sql/functions/try-convert-transact-sql) / [TRY_CAST](https://docs.microsoft.com/en-us/sql/t-sql/functions/try-cast-transact-sql)：

> 如果转换成功，则返回一个转换为指定数据类型的值；否则，返回 null。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-12T04:36:42.670

我认为问题不在于子查询，而在于外部查询的 WHERE 子句。当你使用

```
WHERE account_code between 503100 and 503105 
```

SQL 服务器将尝试将 Account_code 字段中的每个值转换为整数，以在提供的条件下对其进行测试。显然，如果某些行中有非整数字符，它将无法这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-19T12:16:14.973

谢谢，试试这个

```
Select 
  STR(account_code) as account_code_Numeric,
  descr 
from account 
where  STR(account_code) = 1 
```

我很乐意帮助你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-22T02:32:57.457

如果在 where 子句中使用 varchar，则需要对 where 子句中使用的值使用撇号。所以我认为您的 where 子句值需要如下更正

```
WHERE account_code between '503100' and '503105' 
```*

# tridion - Tridion UI - siteedit - 添加现有内容不使用正确的组件模板

> ID：14153666
> 
> 赞同：4
> 
> 时间：2013-01-04T08:32:57.547
> 
> 标签：tridion, tridion-2011, experience-manager

我面临以下问题：在我的 Tridion UI/Experience Manager 设置中，我从具有特定组件模板的架构创建了一个内容类型。当我基于此内容类型创建新内容时，它会正确添加到页面：使用我指定的组件模板。

但是，当我将现有内容添加到页面时，Tridion 似乎选择了与我在内容类型中定义的组件模板不同的组件模板。

经过一些测试，我发现它采用了链接到我的组件架构的最旧的组件模板。

有没有办法配置添加现有组件时默认使用哪个组件模板？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:46:58.510

它始终采用所选区域内允许的第一个组件模板，并且可以与 Schema 一起使用。因此，如果要将其设置为特定模板，则需要确保只有一个选项可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:00:51.450

我认为区域将是控制添加组件的最佳选择，因为它们在该术语的通用组件表示意义上定义了“内容类型”。添加一个组件，该区域允许它使用定义的架构。

`"Content Types,"`如出版物中所定义，具有与区域（架构 + 组件模板）非常相似的概念，但还包括：

*   `Content Type Title`
*   `Content Type Description`
*   `Content Title`
*   `Prototype Component`
*   `Storage Location`

制作和使用这些`Content Types`为您提供了让作者基于某些原型快速添加内容的选项，但它们与区域中的组件+模板没有直接关系。

我喜欢您使组件模板选项更易于配置的想法。[考虑在 Ideas 网站上](http://ideas.sdltridion.com/)提交它。

同时，考虑在“主要内容”区域周围添加一个区域，以控制如何添加组件。

# ruby - 继承在 Ruby 中是如何工作的？

> ID：14153667
> 
> 赞同：0
> 
> 时间：2013-01-04T08:33:08.067
> 
> 标签：ruby, oop, inheritance, metaclass, eigenclass

根据 Dave Thomas 在[他关于 Ruby 对象模型的演讲中，Ruby](http://scotland-on-rails.s3.amazonaws.com/2A04_DaveThomas-SOR.mp4)中没有“类方法”。方法的接收者是“类对象”还是“实例对象”只有区别。

```
class Dave
  def InstaceMethod              ### will be stored in the current class (Dave)
    puts "Hi"
  end
  class << self                  ### Creates an eigenclass, if not created before
    def say_hello
      puts "Hello"
    end
  end
end 
```

默认情况下，`ancestors`方法不显示元类：

```
class Dave
  class << self
    def metaclass                ### A way to show the hidden eigenclass
      class << self; self; end
    end
  end
end

p Dave.ancestors
# => [Dave, Object, Kernel, BasicObject]
p Dave.metaclass.ancestors
# => [Class, Module, Object, Kernel, BasicObject] 
```

但是，我认为真正的应该是这样的：

```
# => [<eigenclass>, Class, Module, Object, Kernel, BasicObject]

p Dave.class.instance_method(false)
# => [:allocate, :new, :superclass]
p Dave.metaclass.instance_method(false)
# => [:say_hello, :metaclass] 
```

现在继承。

```
class B < Dave
end

p B.say_hello
# => "Hello"
p B.ancestors
# => [B, Dave, Object, Kernel, BasicObject]
p B.class.instance_methods(false)
# => [:allocate, :new, :superclass] 
```

以下将为 创建一个新的特征类`B`：

```
p B.metaclass.ancestors
# => [Class, Module, Object, Kernel, BasicObject]
p B.metaclass.instance_method(false)
# => [] 
```

1.  当特征类也包括在内时 和 会是什么样`B.ancestors`子？`B.metaclass.ancestors`该方法`say_hello`存储在一个特征类中，（我假设`B.class`继承自）但那在哪里？

2.  由于有两个祖先链（`B.ancestors`和`B.class.ancestors`或`B.metaclass.ancestors`），继承实际上是如何发生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:07:53.093

一个对象（以及作为对象的类，Class 的实例）有一个指向其类的类字段。创建一个单例类（eigenclass/metaclass）会创建一个匿名类并将这个指针更改为指向匿名类，其类指针将指向原始类。该`class`方法不显示匿名类，只显示原始类。对于 mixins 也是一样。一个类有一个超类字段。该方法`include`创建一个匿名代理，超类指针被更改为指向匿名代理类，并从那里指向超类。该方法`ancestors`不显示匿名类，而是显示包含模块的名称。该`superclass`方法不显示匿名代理类，只显示原始超类。

您可以阅读以下内容：[为什么 Ruby 中的符号不​​被视为一种变量？](https://stackoverflow.com/questions/13850971/why-are-symbols-in-ruby-not-thought-of-as-a-type-of-variable/13871724#13871724)

在对此答案的评论中，有一个关于单例类的有趣文章的链接，可以在 Devalot 博客上找到。

人们需要一些时间来吸收这些继承链。由于一张好图值得长篇大论，我推荐[The Pickaxe](https://pragprog.com/titles/ruby4/programming-ruby-1-9-2-0-4th-edition/)中的第 24 章元编程，其中有关于所有这些链的各种图片。

> 默认情况下，祖先方法不显示元类：
> 和 1\. 当特征类也包括在内时，B.ancestors ... 会是什么样子？

`ancestors`涉及超类链。eigenclass 不属于超类链。

> p Dave.metaclass.ancestors
> => [Class, Module, Object, Kernel, BasicObject]
> 但是，我认为真正的应该是这样的：
> => [ *"eigenclass"* , Class, Module, Object, Kernel, BasicObject]

正确的。

您可以简化您的 Dave 课程：

```
class Dave
    def self.say_hello    # another way to create an eigenclass, if not created before
      puts "Hello"
    end
    def self.metaclass    # A way to show the hidden eigenclass
        class << self
            self
        end
    end
end

Dave.say_hello           # => Hello
Dave.new.class.say_hello # => Hello
p Dave.metaclass.instance_methods(false) # => [:say_hello, :metaclass]
p Dave.singleton_methods                 # => [:say_hello, :metaclass] 
```

`def self.metaclass`自从 Ruby 1.9.2 引入`Object#singleton_class`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:39:06.313

Eigenclass 是一个偷偷摸摸的隐藏类。你已经通过开课成功地揭示了它。但它并不存在于普通阶级的祖先中。而且由于它是**隐藏**的，因此您无法通过将`ancestors`方法发送到特征类本身来看到它。继承树如下：

```
B ---S-->  Dave   ---S---> Object  ---S---> BasicObject
|            |               |                  |
E            E               E                  E
|            |               |                  |
#B --S--> #Dave   ---S---> #Object ---S---> #BasicObject --S---> Class,,Object,BasicObject 
```

`S`代表超类，而`E`代表本征类。

# java - java.sql 与 mysql.jdbc

> ID：14153669
> 
> 赞同：0
> 
> 时间：2013-01-04T08:33:20.957
> 
> 标签：java, mysql, jdbc

在开发连接到数据库的 Java 应用程序时，我们似乎有两种选择：

*   使用标准`java.sql`类
*   使用供应商特定的类（就像我们有`com.mysql.jdbc.Connection`并且我们也有`java.sql.Connection`）。

推荐使用哪一种？假设我目前正在使用 mysql。但是将来我可能会切换到oracle。使用供应商特定的实现是否有任何性能奖励？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:40:36.777

永远不要使用特定于供应商的代码，始终使用标准 api(JDBC)，以后它将易于维护并且易于跨数据库移植。供应商特定代码的性能优势可以忽略不计，您可以更好地优化查询、索引、缓存等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:40:39.250

在大多数情况下，您不会注意到性能差异。

java.sql 包代表了不同数据库之间最常见的分母，而特定于供应商的包还公开了一些数据库后端独有的功能。但是，当您想保持选项打开以稍后切换数据库后端时，无论如何您都应该避免这些，因为新数据库可能没有等效的功能，您需要以完全不同的方式解决问题，这可能在最后需要对整个应用程序进行一些大规模的重构。

**tl;dr：**如果您想保持打开选项以切换到 Oracle 或任何其他 SQL 数据库，请使用 java.sql。

**甚至更好：**使用像 Hibernate 这样的对象关系映射框架来为您进行数据库抽象。他们需要一段时间来适应，但之后您将能够以更少的工时实现数据库功能，并且切换数据库后端将是配置文件中的一行更改。

# android - Textview 没有出现在 3.1 中

> ID：14153672
> 
> 赞同：-5
> 
> 时间：2013-01-04T08:33:34.030
> 
> 标签：android, textview

我有一个简单的布局文件。基本上发生的事情`TextView`是没有出现空（没有设置其`Text`属性）。此问题仅在版本`3.0,3.1`和`3.2`操作系统中遇到。Empty`TextView`没有占用它的空间，或者换句话说，空的 textview 是不可见的。

设置以下属性后可以看到空文本视图。

1.  安卓：可聚焦=“假”
2.  安卓：focusableInTouchMode="假"
3.  安卓：可点击=“真”
4.  安卓：inputType="文本"

我该怎么做才能让它可见？请尽快回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:53:32.333

I suppose you need it to keep row height in layout. The simplest solution, I think, would be to set whitespace as a text for all TextViews in xml.

```
 android:text=" " 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:47:25.560

您是否尝试过**明确**设置可见性属性？：

```
android:visibility="visible" 
```

> 可见属性可以是：
> 
> *   “可见” = 显示
> *   “不可见” = 未显示，但仍在布局中占用空间
> *   "gone" = 不显示也不占用布局中的空间。

# java - 想要转换 ArrayList > 串起来

> ID：14153674
> 
> 赞同：0
> 
> 时间：2013-01-04T08:33:38.477
> 
> 标签：java, android, string, arraylist, universal-image-loader

我阅读了[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoaderExample/src/com/nostra13/example/universalimageloader/ImageGridActivity.java)，并制作了具有 gridview 的应用程序，并且这个 gridview 从 json 获取图像。但是我的应用程序加载速度很慢，所以我想使用通用图像加载器，但`getView`它在 ImageAdapeter 类中的通用图像加载器中运行它就像这样使用

`imageLoader.displayImage(imageUrls[position], imageView, options);`或公式 `imageLoader.displayImage(String, imageView, options);`

所以我没有一个字符串来完成这个公式。我只是可以创建`Object arr`来存储 Arraylist。

如何转换`ArrayList<HashMap<String, Object>>`为字符串或以任何方式更改我的代码？

请尽可能确认或建议或推荐我。易于阅读[我的代码](http://pastie.org/5620242)

下面是我的 ImageAdapter。它工作正常，但太慢了。

```
public class ImageAdapter extends BaseAdapter {
    private Context context;
    private ArrayList<HashMap<String, Object>> MyArr = new ArrayList<HashMap<String, Object>>();

    public ImageAdapter(Context c, ArrayList<HashMap<String, Object>> myArrList) {
        context = c;
        MyArr = myArrList;
    }

    public int getCount() {
        return MyArr.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder;
        viewHolder = new ViewHolder();

        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (convertView == null) {
            convertView = inflater.inflate(R.layout.grid_item, null);
        }
        viewHolder.categoryCard = (ImageView) convertView.findViewById(R.id.category_card);
        //==================== change area
        Object arr = new ArrayList<HashMap<String, Object>>(); // make objec arr to store arraylist
        arr = MyArr.get(position).get("categoryid");
        if (arr.equals("1")) {
            viewHolder.categoryCard.setImageResource(R.drawable.card_eat);
            viewHolder.imageView = (ImageView) convertView.findViewById(R.id.imageView1);
        } else {
            viewHolder.categoryCard.setImageResource(R.drawable.card_etc);
            viewHolder.imageView = (ImageView) convertView.findViewById(R.id.imageView1);
        }
        // =============================
        try {
            viewHolder.imageView.setImageBitmap((Bitmap) MyArr.get(position).get("ImageThumBitmap"));
        } catch (Exception e) {
            viewHolder.imageView.setImageResource(android.R.drawable.ic_menu_report_image);
        }

        return convertView;

    }

}

// Download JSON in Background
public class DownloadJSONFileAsync extends AsyncTask<String, Void, Void> {
    String token = getIntent().getExtras().getString("token1");

    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

    @Override
    protected Void doInBackground(String... params) {

        String url = "http://xxx.xxx.xxx/card/all/20/0/?token="+token;
        JSONArray data = null;
        try {

            JSONObject jsonObject = new JSONObject(getJSONUrl(url));

            MyArrList = new ArrayList<HashMap<String, Object>>();
            HashMap<String, Object> map;
            data = jsonObject.getJSONArray("data");
            for (int i = 0; i < data.length(); i++) {
                JSONObject c = data.getJSONObject(i);
                map = new HashMap<String, Object>();

                // Thumbnail Get ImageBitmap To Object
                map.put("cardimage", (String) c.getString("cardimage"));
                map.put("ImageThumBitmap",(Bitmap) loadBitmap(c.getString("cardimage")));
                map.put("categoryid", (String) c.getString("categoryid"));
                MyArrList.add(map);
            }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent(); // When Finish Show Content
        dismissDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
        removeDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

} 
```

这是来自[Universal Image Loader的 ImageAdapter](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoaderExample/src/com/nostra13/example/universalimageloader/ImageGridActivity.java)

```
public class ImageAdapter extends BaseAdapter {
    @Override
    public int getCount() {
        return imageUrls.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if (convertView == null) {
            imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
        } else {
            imageView = (ImageView) convertView;
        }
                     // I want to do like this
        imageLoader.displayImage(imageUrls[position], imageView, options);

        return imageView;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:04:38.913

如果你想保留`ArrayList<HashMap<String, Object>>`你必须以这种方式创建一个新的`String[]`：

```
String[] urls = new String[MyArrList.size()];
for(int i=0; i<MyArrList.size(); i++){
   urls[i] = MyArrList.get(i).get("cardimage");
} 
```

PS。我已经使用了您在代码中声明的变量名 MyArrList，顺便说一下，以大写字母开头的变量名不是一个好主意。

PS2。我认为如果您想使用通用图像加载器，您可能不再需要将每个位图存储在 HashMap

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:58:32.817

在您`DownloadJSONFileAsync Class`在[这里发布](http://pastie.org/5620242)的内容中，

1.  您尚未下载 JSON。因此，您的变量`JSONArray data`将始终为空。
2.  在`Line 33`不需要使用`new ArrayList`您需要访问存储在 ArrayList 中的情况下`DownloadJSONFileAsync Class`。在下面找到更新的代码。

    ```
    public class DownloadJSONFileAsync extends AsyncTask<String, Void, Void> {

    String token = getIntent().getExtras().getString("token1");
    JSONObject response = null;

    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }

    @Override
    protected Void doInBackground(String... params) {

        String url = "http://xxx.xxx.xxx/card/all/20/0/?token="+token;
        JSONArray response = //YOUR JSON ARRAY AFTER DOWNLOADING;
        return null;
    }

    protected void onPostExecute(Void unused) {
        ShowAllContent(JSONArray); // When Finish Show Content and send the Response JSONARRAY and display the content on the GridView
        dismissDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
        removeDialog(DIALOG_DOWNLOAD_JSON_PROGRESS);
    }} 
    ```

您的 ShowAllContent(JSONArray jsonVal) 代码

```
public void ShowAllContent(JSONArray jsonVal) {

    gridView1 = (ScrollableGridView) findViewById(R.id.grid_all);
    gridView1.setAdapter(new ImageAdapter(CardActivity.this, jsonVal));
    gridView1.setExpanded(true);
    gridView1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
        }
    });

    gridView1.setOnScrollListener(new PauseOnScrollListener(true, true));

} 
```

在您`getView() method of ImageAdapter`使用以下行。

```
public class ImageAdapter extends BaseAdapter {
    private JSONArray jsonArray = null;
    public ImageAdapter(Context c, JSONArray jsonArray) {
        context = c;
        this.jsonArray = jsonArray;
    }
    public int getCount() {
        return jsonArray.length();
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        //DO YOUR CODE HERE
       imageLoader.displayImage(jsonArray[position].get("ImageThumBitmap").toString(), imageView, options);
    }
} 
```

# android - 使用 SDK 将照片/图像上传到 Facebook

> ID：14153681
> 
> 赞同：0
> 
> 时间：2013-01-04T08:34:49.237
> 
> 标签：android, facebook, image, upload

在墙上的 Facebook 上发送照片/图像/位图的最新方法是什么？我发现的所有方法都已弃用。最好是从您单击按钮的那一刻起。

我知道有些人在方法中使用它，在哪里插入它？：

```
 Request request = Request.newUploadPhotoRequest(
            session, bitmap, callback);
    RequestAsyncTask task = new RequestAsyncTask(request);
    task.execute(); 
```

（对不起英语：P）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:42:58.770

You could use [RestFB](http://restfb.com/) for making requests to Facebook using Java. You can upload photos like this:

```
FacebookType publishMessageResponse = facebookClient.publish("me/photos", FacebookType.class,
    BinaryAttachment.with("photo.png", new FileInputStream(selectedImagePath)),
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:02:11.167

首先下载[此](https://github.com/facebook/facebook-android-sdk)Facebbok SDK 并将其作为库项目包含在您的项目中。

在您的活动中，您想在哪里分享图片 ::

```
private static Bitmap b;
private static Facebook mFacebook;
private static AsyncFacebookRunner mAsyncRunner;
String[] permissions = {"photo_upload" };
final static int AUTHORIZE_ACTIVITY_RESULT_CODE = 0; 
```

在 onCreate() 中初始化这个变量::

```
 if (Constant.FACEBOOK_APP_ID == null)
 {
        Util.showAlert(this, "Warning", "Facebook Applicaton ID must be "
                        + "specified before running this example: see FbAPIs.java");
        return;
 }

mHandler=new Handler();
mFacebook = new Facebook(Constant.FACEBOOK_APP_ID);
mAsyncRunner = new AsyncFacebookRunner(mFacebook);
SessionStore.restore(mFacebook, this);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    switch (requestCode) 
    {
        case AUTHORIZE_ACTIVITY_RESULT_CODE: 
        {
        mFacebook.authorizeCallback(requestCode, resultCode, data);
        break;
        }
    }
} 
```

onButtonClick 从您要分享图片的地方::

```
if (!mFacebook.isSessionValid()) 
{
    mFacebook.authorize(TabNoteActivity.this, permissions, AUTHORIZE_ACTIVITY_RESULT_CODE, new LoginDialogListener());
}
else
{
     Bundle params = new Bundle();
     ByteArrayOutputStream stream = new ByteArrayOutputStream();
     Utils.b.compress(Bitmap.CompressFormat.PNG, 100, stream);//Here I am convert the JPG image into bitmap using declaring method in the Utils class 
     byte[] byteArray = stream.toByteArray();
     params.putString (Facebook.TOKEN, mFacebook.getAccessToken());
     params.putString ("message"," Facebook App Testing");
     params.putByteArray("picture",byteArray);
     mAsyncRunner.request("me/photos", params,"POST", new PhotoUploadListener(),null);
}

    public class PhotoUploadListener extends BaseRequestListener
    {
        //@Override
        public void onComplete(final String response, final Object state) 
        {

           mHandler.post(new Runnable() 
           {
            // @Override
            public void run() 
            {
                Toast.makeText(Activity.this,"Image has been shared Successfully",Toast.LENGTH_LONG).show();
            }
          });
        }

        public void onFacebookError(FacebookError error) 
        {
            Toast.makeText(getApplicationContext(), "Facebook Error: " + error.getMessage(),Toast.LENGTH_LONG).show();
        }
} 
```

# java - 在 gae 上运行外部程序

> ID：14153690
> 
> 赞同：0
> 
> 时间：2013-01-04T08:35:31.567
> 
> 标签：java, google-app-engine

我有一个可以读取一个文件并写入另一个文件的 linux 程序。in.txt 是由 jsp 创建的。如何运行控制台应用程序以自动创建 out.txt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:38:38.183

您不能在 GAE 上运行外部应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:55:55.673

来自[http://en.wikipedia.org/wiki/Google_App_Engine](http://en.wikipedia.org/wiki/Google_App_Engine)

目前，支持的编程语言是 Python、Java（以及通过特殊版本的 Quercus 扩展而来的其他 JVM 语言，例如 Groovy、JRuby、Scala、Clojure、Jython 和 PHP）和 Go。

=> 如果您的应用程序是用其中一种语言编写的，则可能有机会

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T11:16:27.050

您将需要在允许您完全控制的环境中运行 shell 命令。AppEngine 不是 VPS，它是一个沙盒服务平台。Google Compute Engine 确实允许您完全控制，但微型 EC2 可能更符合您的预算。

# mysql - 在 MySQL 中存储几乎相同的 4 个字段的最佳方式

> ID：14153693
> 
> 赞同：0
> 
> 时间：2013-01-04T08:35:42.093
> 
> 标签：mysql, database, search, database-design, architecture

我需要存储这样的东西：

```
mac_1 string
mac_2 string
mac_3 string
mac_4 string 
```

能够通过 4 个 mac（或 1 个 mac）搜索记录。迭代每条记录和值会不会是最好的选择？MySQL MATCH AGAINST 将在服务器上产生沉重的负载。我不能使用全文搜索:(您能否建议一种简单而优雅的方式来存储此类数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:41:29.330

您应该将此字段拆分为其组成部分并将它们存储在从表中。这将有以下好处：

*   没有人为限制每行 4 个 mac。可以是0，也可以是10，但是可以在插入时限制
*   如果你正确索引从表，搜索会很快

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:42:19.407

为什么不将所有字段的串联存储为另一个字段：

```
mac_1 string
mac_2 string
mac_3 string
mac_4 string
mac_full string 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T15:00:02.950

对于有效的等价搜索，索引所有 4 个字段就足够了。

问题是您是否可以使用一个涵盖所有 4 个字段的复合索引，或 4 个单独的索引：

*   如果您（几乎）总是在其上搜索一个主要的“前沿”，那么只需使用该前沿创建一个复合索引。例如，如果您总是搜索`mac_1`是否搜索其他字段，只需在`{mac_1, ...}`. 由于您使用的是 AND 条件，因此该索引将使您能够在单个索引查找中找到该行。
*   如果您有许多领先优势的变体，只需在所有字段上创建单独的索引。这将需要多达 4 次索引查找，但应该仍然相当快。

请注意，[InnoDB 表是聚集的，并且聚集表的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)*二级*索引上的“查找”实际上可能需要 2 次查找（索引查找本身 + 主/聚集索引查找）。您可以通过[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)来避免这种情况，但可能会以增加存储空间和降低缓存效率为代价。

在构造查询时也要注意[不要太聪明](http://use-the-index-luke.com/sql/where-clause/obfuscation/smart-logic)，这样优化器才能真正利用这些索引。如果需要，不要回避动态 SQL。

* * *

另一种设计是让两个表通过外键连接，其中“子”表将包含`mac`值....

```
CREATE TABLE p (
    p_id INT PRIMARY KEY
    -- Other fields...
);

CREATE TABLE c (
    p_id INT REFERENCES p (p_id),
    mac varchar(50), -- Or whatever type is appropriate.
    PRIMARY KEY (p_id, mac)
); 
```

...然后查询连接到`mac`（例如）的值的 父行，`'aaa' AND 'bbb' AND 'ccc'`如下所示：

```
SELECT p.p_id -- Other fields...
FROM p JOIN c ON p.p_id = c.p_id
WHERE mac = 'aaa' OR mac = 'bbb' OR mac = 'ccc'
GROUP BY p.p_id -- Other fields...
HAVING COUNT(*) = 3; 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!2/79915/1)

顺便说一句，如果需要，这种设计将允许`mac`每个父行有 4 个以上的值。

不幸的是，MySQL 没有最复杂的查询优化器，因此请在提交此设计之前测试实际数据量。

# iphone - 无法访问 iOS 中其他类的 UIlabel

> ID：14153713
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:37:06.863
> 
> 标签：iphone, ios, ipad, class, uilabel

**我用firstclassViewController**和**secondclassViewController**创建了两个类名，在我的**secondclassViewController**`UIlabel`类中， 我想访问**firstclassViewController**并且我想将它的值更改`UILabel`为新值。

这是我的代码片段，

**firstclassViewController.h**

```
@property (strong, nonatomic) UILabel *navLabel; 
```

**第一类视图控制器.m**

```
navLabel = [[UILabel alloc] initWithFrame:CGRectMake(70,7,180,30)];
navLabel.text = @"Categories";
navLabel.font = [UIFont boldSystemFontOfSize:16.0f];
navLabel.textColor = [UIColor blackColor];
navLabel.backgroundColor = [UIColor clearColor];
navLabel.textAlignment = UITextAlignmentCenter;
[[self.navigationController navigationBar] addSubview:navLabel]; 
```

**secondclassViewController.m**

```
firstclassViewController.m *Obj=[[firstclassViewController.m alloc] initWithNibName:@"firstclassViewController.m" bundle:nil];
Obj.navLabel.text=@"New Value"; 
```

但我无法改变我对 UILabel 的价值..

***任何帮助都会得到帮助。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:44:11.673

在 secondclassViewController 和 firstclassViewController 之间进行通信的最佳方式是使用委托。

查看 Rob 在这篇文章 [Use of Delegates to Communicate between View Controllers中的回答](https://stackoverflow.com/questions/11632043/use-of-delegates-to-communicate-between-view-controllers)

一般的想法是......你的第一个控制器应该设置第二个代表指向第一个视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:44:05.810

实现此目的的一种方法是`UILabel`在 segue 中将对象从第一个视图控制器传递到第二个视图控制器。当您执行 a 时，`firstclassViewController *Obj = [[firstclassViewController alloc] initWithNibName:@"firstclassViewController" bundle:nil];`您正在创建一个新实例，因此您对标签所做的更改仅适用于视图控制器的此实例。

# google-apps-script - 如何在文本框上添加按键事件以捕获用户的“输入”输入

> ID：14153716
> 
> 赞同：0
> 
> 时间：2013-01-04T08:37:16.090
> 
> 标签：google-apps-script

我的条件是我有一个文本框和一个按钮，当用户在文本框中输入内容并按 Enter 键时，我想使用与该按钮相同的处理程序。我看到文本框中有一个名为 addKeyUpHandler 的函数，但该函数似乎只能像下面的示例一样工作。

```
 // Create handler to mark the input in textBoxB as valid
  var onInvalidInput1 = app.createClientHandler()
      .validateNumber(textBoxB)
      .forTargets(textBoxB).setStyleAttribute("color", "black");

  // Add all the handlers to be called when the user types in the text boxes
  textBoxA.addKeyUpHandler(onInvalidInput1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:51:55.720

我认为您不能使用 ClientHandlers 来做到这一点。您当然可以使用 ServerHandlers。给猫剥皮的方法不止一种，但这很管用，所以玩一下这样的东西。在这里，我使用了两种不同的 ServerHandler，一种用于 TextBox，一种用于 Button，并将它们通过管道传递给一个通用的 doAction 函数。您当然可以为它们都使用一个处理程序，但这会增加每个 keyUp 事件发送到服务器的开销，甚至在您知道它是一个有效数字之前。

```
// Script-as-app template.
function doGet() {
  var app = UiApp.createApplication();

  var textbox = app.createTextBox().setName('textbox');
  app.add(textbox);
  var button = app.createButton('Click Me');
  app.add(button);
  var label = app.createLabel('___').setId('lbl');
  app.add(label);

  // only fire ServerHandler for onKeyUp if it passees validation
  var textBoxHandler = app.createServerHandler('textBoxHandlerFunction').validateNumber(textbox);
  var buttonHandler = app.createServerHandler('buttonHandlerFunction');
  textBoxHandler.addCallbackElement(textbox);
  buttonHandler.addCallbackElement(textbox);

  textbox.addKeyUpHandler(textBoxHandler);
  button.addClickHandler(buttonHandler);

  return app;
}

function textBoxHandlerFunction(e) {
  var app = UiApp.getActiveApplication();
  if(e.parameter.keyCode == 13)
  {
    app = doAction(app, e);
  }
  return app;
}

function buttonHandlerFunction(e) {
  // missing validation that textbox is a number
  return doAction(UiApp.getActiveApplication(), e);
}

function doAction(app, e)
{
  // do your stuff
  app.getElementById('lbl').setText('fired...' + e.parameter.textbox);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:13:19.590

我终于使用了下面的代码。

```
function doGet() { 
  var tb_search = myapp.createTextBox().setName('tb_search').setId('tb_search').setWidth(LENGTH_MIDDLE)
  var btn_search = myapp.createButton('Go').setId('btn_search');  

  var h_search = myapp.createServerClickHandler('procSearch');
  h_search.addCallbackElement(tb_search);  
  btn_search.addClickHandler(h_search);      

  var h_tb_keyup = myapp.createServerHandler('procSearch') 
  tb_search.addKeyUpHandler(h_tb_keyup)
}

function procSearch(e) {
  var app = UiApp.getActiveApplication(); 
  // return if the key is not enter.     
  if((e.parameter.eventType=="keyup") && (e.parameter.keyCode != 13))
  {
    return app;
  }
} 
```

# asp.net - 当用户单击母版页中的菜单项时，如何防止整个页面闪烁

> ID：14153719
> 
> 赞同：1
> 
> 时间：2013-01-04T08:37:19.700
> 
> 标签：asp.net, updatepanel, postback, menuitem, flicker

当用户单击母版页中的菜单项时，是否可以避免页面闪烁？我尝试了不同的方法来避免这种情况，例如`<asp:UpdatePanel runat="server" ID="updateMenu"`在包含在

```
 <div class="main">
                <asp:ContentPlaceHolder ID="MainContent" runat="server" />
            </div>` but it doesn't work. 
```

我的代码是这样的

```
 <asp:Menu  ID="NavigationMenu" runat="server" Orientation="Horizontal"> 

            <Items>
                    <asp:MenuItem NavigateUrl="~/home.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/welcome.aspx" Text="Welcome"/>
                    <asp:MenuItem NavigateUrl="~/item.aspx" Text="Item"/>
            </Items>
        </asp:Menu> 
```

属性 NavigateUrl 是否像 Response.Redirect() 方法一样工作，因为 Response.Redirect 强制刷新页面。

如果我使用站点地图会解决我的问题吗？

请帮我。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:50:50.400

NavigateUrl 只不过是链接中的 href。如果您查看呈现的 HTML，您可能会看到带有指向 home.aspx 或 welcome.aspx 的 href 的“a”标签。

加载一个新的（网页）页面总是会导致某种闪烁，因为您告诉浏览器丢弃它现在拥有的页面并从服务器获取并呈现一个新页面。无论您是通过菜单、链接还是基于站点地图，这都不会改变。

您可以做的一件事是创建一个默认页面，其中包含您需要的所有默认元素，并为页面特定的内容添加一个占位符。接下来，您可以将占位符的内容替换为您正在加载的页面的特定内容。这将减少但不会消除闪烁，因为仍然需要从服务器获取（部分）网页并用新的 HTML 替换当前的 HTML。

另一种方法是在您的页面中加载所有内容并隐藏/显示您需要的项目。不过，这在导航方面采用了完全不同的方法，并且可能会破坏您的网站/Web 应用程序现在的结构。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:52:44.047

`MenuItem`控件呈现指向您在`NavigateUrl`. 因此，每次单击链接时，都会加载一个新页面。所以是的，它的工作原理类似于`Response.Redirect()`

如果您想避免这种“闪烁”，那么您应该考虑通过 Ajax 加载您的页面内容。我会避免使用 UpdatePanel，因为它总是将整个页面发布回它自己。

所以我建议搜索并查看通过 Ajax 加载页面内容，或者看看这个 SO Question 作为初学者

[pjax 是“流畅”导航的方式吗？](https://stackoverflow.com/questions/6148097/is-pjax-the-way-to-go-for-fluid-navigation)

# symfony - 包含具有 2 个主键的 ManyToOne 对象的实体

> ID：14153724
> 
> 赞同：0
> 
> 时间：2013-01-04T08:37:37.137
> 
> 标签：symfony, doctrine, doctrine-orm

我遇到了一个我不确定如何实施的问题。我正在尝试实现一个基于网络的录音机。目前我有这部分的 3 个实体。`Book` `Page`和`Recording`

每一页都映射到一本书，如下所示：

```
class Page
{
    /**
     * @ORM\Id
     * @ORM\ManyToOne(targetEntity="Book")
     * @ORM\JoinColumn(name="bookID", referencedColumnName="id")
     */
    protected $bookID;

    /**
     * @ORM\Id
     * @ORM\Column(name="pageNumber", type="integer")
     */
    protected $pageNumber; 
```

我坚持的是每个页面可以有多个录音，我不确定每个录音是否也需要映射到一本书，因为每个页面都已经映射到一本书。

```
class Recording
{
    /**
     * @ORM\Id
     * @ORM\Column(name="recordingID",type="integer")
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */

    protected $recordingID;

    /**
     * @ORM\ManyToOne(targetEntity="Page")
     * @ORM\JoinColumn(name="pageID", referencedColumnName="pageNumber")
     */
    protected $pageID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:46:27.630

You do not need to map the recordings to the corresponding book entity because it will inherit this relation from its mapping to the page entity. If you have a recording entity and you would want to retrieve its book entity, you would be able to do something along the lines of

```
$oRecording = $this->_em->find($recording_id);
$oBook = $oRecording->getPage()->getBook(); 
```

In the database you should get for the page table

id | page_number | book_id
----------------
1 | 3 |12
2 | 4 |15

And in the recording table

id | page_id
----------------
1 | 2
2 | 2

So recording 2 has page_id = 2 and therefore book_id 15\. In this way you do not duplicate data in your database.

# macos - 在 OS X 上安装 GCC 4.7.1

> ID：14153725
> 
> 赞同：9
> 
> 时间：2013-01-04T08:37:40.540
> 
> 标签：macos, shell, gcc, installation, gnu

我正在尝试`GCC`在我的 Mac 上安装 4.7.1，因为我想更新`LLVM GCC`XCode 中给出的 4.2。

我已经下载`GCC`了 4.7.1 并将`gcc-4.7.1`文件夹放在 中`~/Downloads`，然后我按照此处给出的说明进行操作：http: [//gcc.gnu.org/install/](http://gcc.gnu.org/install/)我写了

```
cd ~/Desktop
mkdir objdir
cd objdir
~/Downloads/gcc-4.7.1/configure --with-gmp=/usr/local/include --with-mpfr=/usr/local/include --with-mpc=/usr/local/include 
```

并且配置确实显示了问题。

然后我写了

```
make 
```

一切都很顺利，直到我收到这条消息

```
rm -f stage_current
Comparing stages 2 and 3
warning: gcc/cc1-checksum.o differs
warning: gcc/cc1obj-checksum.o differs
warning: gcc/cc1plus-checksum.o differs
  Bootstrap comparison failure!
gcc/intl.o differs
make[2]: *** [compare] Error 1
make[1]: *** [stage3-bubble] Error 2
make: *** [all] Error 2 
```

然后`make check`给我这个消息

```
/bin/sh: line 0: cd: ./fixincludes: No such file or directory
make[1]: *** [check-fixincludes] Error 1
make: *** [do-check] Error 2 
```

而`make install`这个消息

```
/bin/sh /Users/fpiro07/Downloads/gcc-4.7.1/mkinstalldirs /usr/local /usr/local
/bin/sh: line 0: cd: ./fixincludes: No such file or directory
make[1]: *** [install-fixincludes] Error 1
make: *** [install] Error 2 
```

如何解决这些问题并安装我的`GCC`4.7.1？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T09:25:58.817

安装[MacPorts](http://macports.org)并运行：

```
$ sudo port selfupdate
$ sudo port install gcc47 
```

它将负责正确配置和安装 gcc（撰写本文时为 4.7.2）和所有依赖项。

# objective-c - 转换 SQLite/FMDB NSArray 格式

> ID：14153727
> 
> 赞同：0
> 
> 时间：2013-01-04T08:37:44.630
> 
> 标签：objective-c, sqlite, nsstring, nsarray, fmdb

关于 SQLite 和 FMDB 的问题，我准备将 NSArray *insertParams 保存到 SQLite 中，insertParams 的格式如下：

> ( { 动作 = "\U8d5e\U540c\U4e86\U8be5\U56de\U7b54"; 内容 = "\U8c22zolo\U9080\Uff0c\U65b0\U5e74\U5feb\U4e50~\U81ea\U5df1\U548c\U5bb6\U4eba\U8eab\ U4f53\U5b89\U5eb7\U3002"; "post_id" = 114834; "post_type" = "a"; 分数 = 1; 标题 = "\U5927\U5bb6\U6765\U4e3a2013\U5e74\U7684\U65b0\U5e74\U8bb8\U613f \U5427\Uff1f\U4f60\U7684\U613f\U671b\U662f\U4ec0\U4e48\Uff1f"; user = { "avatar_url" = "/statics/images/thumb_d04a6fc94214e61a0f35f70b50387b18.jpg"; id = 昵称 = 7151; abc; }; }, { 动作 .................................... ……

数据完全保存，但是，当我从 SQLite 检索数据时，因为没有这样的 arrayForColumn 函数，所以我必须使用 stringForColumn 函数来获取数据，如下所示：

> NSString *content = [结果 stringForColumn:@"content"];
> 
> [结果数组添加对象：内容]；

但是 resultArray 的格式已更改为以下：

> ("{\n 动作 = \"\U8d5e\U540c\U4e86\U8be5\U56de\U7b54\";\n 内容 = \"\U8c22zolo\U9080\Uff0c\U65b0\U5e74\U5feb\U4e50~\U81ea\U5df1\ U548c\U5bb6\U4eba\U8eab\U4f53\U5b89\U5eb7\U3002\";\n \"post_id\" = 114834;\n \"post_type\" = \"a\";\n score = 1;\n
> 标题 = \"\U5927\U5bb6\U6765\U4e3a2013\U5e74\U7684\U65b0\U5e74\U8bb8\U613f\U5427\Uff1f\U4f60\U7684\U613f\U671b\U662f\U4ec0\U4e48\Uff1f\n用户\"; = {\n \"avatar_url\" = \"/statics/images/thumb_d04a6fc94214e61a0f35f70b50387b18.jpg\";\n
> id = 7151;\n 名字 = abc;\n 昵称 = abc;\n };\n}", "{\n 操作 ................................... ...

谁能告诉我如何将结果格式化为原始 NSArray *insertParams 的格式？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:51:08.470

你有点过度思考这个问题了。FMDB（以及相应的 SQL）在处理 NSData 实例方面非常出色，因此您可以简单地使用`NSKeyed(Un)Archiver`NSData 对象与数组相互转换。`-dataForColumn`检索它是在执行查询后调用的问题。

# sql-server-2008-r2 - 如何将 Microsoft.Jet.OLEDB.4.0 提供程序添加到用于链接服务器的 SQL 服务器

> ID：14153728
> 
> 赞同：1
> 
> 时间：2013-01-04T08:37:44.157
> 
> 标签：sql-server-2008-r2, oledb

[http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

我从此链接下载了 Microsoft.Jet.OLEDB.4.0。或者 Microsoft.ACE.OLEDB.12.0 也下载了。

但是我无法使用**exec sp_enum_oledb_providers**存储过程在 mu SQL Server 上看到 OLE 提供程序的列表。

我该怎么办？如何将提供程序添加到我的 SQL Server？

# file - 从 TSV 文件导入纯多维数组

> ID：14153729
> 
> 赞同：1
> 
> 时间：2013-01-04T08:37:48.107
> 
> 标签：file, powershell, multidimensional-array, tsv

如何从制表符分隔的文件中导入多维数组？

1.  该文件没有标题，它可能有一个空白或虚拟的第一行。
2.  应该创建一个简单的数组而**不是**HashTable。

TSV 文件：

> -- 空的/无关的第一行
> `"X" "0" "A"`
> `"Y" "1" "B"`

这样：`array[0][0] = "X"`&`array[1][2] = "B"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:12:23.243

```
$m=gc c:\temp\matrix.txt
$array=@()

$m | Foreach{
    $elements=$_.split("`t")
    $array+= ,@( $elements[0],$elements[1],$elements[2])
}
$array[0][0]
$array[1][2] 
```

**注意强制powershell将添加的行视为数组的逗号（第6行）**

要忽略第一行，您可以执行以下操作

```
$matrix=""
(1..($m.count-1)) | foreach{ $matrix+=$m[$_]} 
```

# asp.net - 将单选按钮值转换为布尔值

> ID：14153730
> 
> 赞同：2
> 
> 时间：2013-01-04T08:37:53.473
> 
> 标签：asp.net

我试图将单选按钮的值转换为“out”时的变量，然后将其作为真或假传递。

但它总是返回 false 我尝试了许多不同的方法，这就是我所在的位置。

```
if (rad_Security_Risk.SelectedItem.Value == "NO")
{
    if (bool.TryParse(rad_Security_Risk.SelectedValue, out risk))
    {
        risk = false;
        obj.Security_Risk = risk;
    }
}

if (rad_Security_Risk.SelectedItem.Value == "YES")
{
    if (bool.TryParse(rad_Security_Risk.SelectedValue, out risk))
    {
        risk = true;
        obj.Security_Risk = risk;
    }
} 
```

当我选择“是”时它总是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:49:14.587

您的代码没有任何意义 - 它执行大量冗余分配。此外，Boolean.TryParse 无法将“YES”和“NO”解析为`true`and `false`。它只是没有这样做，因为[文档中的示例](http://msdn.microsoft.com/en-us/library/system.boolean.parse.aspx)清楚地表明了这一点。它只会解析对应于[Boolean.TrueString](http://msdn.microsoft.com/en-us/library/system.boolean.truestring.aspx)或[Boolean.FalseString的字符串](http://msdn.microsoft.com/en-us/library/system.boolean.falsestring.aspx)

它可以大大简化如下：

```
if (rad_Security_Risk.SelectedItem.Value == "NO")
{
    obj.Security_Risk = false;
}
else if (rad_Security_Risk.SelectedItem.Value == "YES")
{
    obj.Security_Risk = true;
}
else 
{
    // Is there a possibility that the value can be something
    // other than YES or NO?
    throw new Exception ("Undefined behaviour!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T07:48:48.430

如果你只想有两个值，应该有'true'和'false'，就足够了。如果您有更多值或更多类型，则可以使用 byte 或 int ...的类型。您应该使用 if ... else ... 或 switch ... case ...

```
 <asp:RadioButtonList ID="rblList" runat="server">
        <asp:ListItem Text="True" Value="True" Selected="True"></asp:ListItem>
        <asp:ListItem Text="False" Value="False"></asp:ListItem>
 </asp:RadioButtonList>

 var a = Convert.ToBoolean(rblList.SelectedValue); 
```

或者

```
var a = Convert.ToInt16(rblList.SelectedValue);
var retValue = string.Empty;
switch (a)
{
    case 0:
        //"you want have"
        break;
    case 1:
        //"you want have"
        break;
    case 2:
        //"you want have"
        break;
    default:
        //"you want have"
        break;
} 
```

或者

```
 if (a == 0)
    {
        //"you want have"
    }
    else if (a == 1)
    {
        //"you want have"
    }
    else if (a == 2)
    {
        //"you want have"
    }
    else
    {
        //"you want have"
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:49:24.647

```
<asp:RadioButtonList ID="rblTest"  runat="server" RepeatDirection="Horizontal"  >
                <asp:ListItem Value="0">
                    No
                </asp:ListItem>
                <asp:ListItem Value="1">
                    Yes
                </asp:ListItem>
</asp:RadioButtonList> 
```

然后您可以使用您的代码 bool.TryParse 并使用 SelectedItem.Text 检查您的项目

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:58:42.743

您无法解析`"YES"`为`true`或解析`"NO"`为`false`Habib 指出您必须使用

`True,true`for boolean`true` `False,false`解析`false`时为布尔值

请改用此代码

```
 if (rad_Security_Risk.SelectedItem.Value == "NO")
        {
            if (bool.TryParse("False", out risk))
            {
                risk = false;
                obj.Security_Risk = risk;
            }
        }

        if (rad_Security_Risk.SelectedItem.Value == "YES")
        {
            if (bool.TryParse("True", out risk))
            {
                risk = true;
                obj.Security_Risk = risk;
            }
        } 
```

# php - 查询中的多个左连接

> ID：14153731
> 
> 赞同：0
> 
> 时间：2013-01-04T08:37:57.417
> 
> 标签：php, mysql, sql

所以，我在这里有这个查询：

```
$query1 = 'SELECT users.first_name,users.last_name,users.phone, matching.date, matching.points, matching.time, matching.epos_id,rbpos_epos.epos_id,rbpos_epos.location
FROM users LEFT JOIN matching WHERE users.user_id="'.$id_user.'"
AND users.user_id=matching.user_id
LEFT JOIN rbpos_epos WHERE rbpos_epos.epos_id=matching.epos_id'; 
```

这给了我一个错误，我在最后一行尝试做什么：

```
 LEFT JOIN rbpos_epos WHERE rbpos_epos.epos_id=matching.epos_id'; 
```

是获取该特定 epos_id 的位置。

这意味着，在匹配表中，我有一个 epos_id 列，在 rbpos_epos 列中我有一个 epos_id 字段，旁边有一个 location 字段。我需要获取每个 epos_id 的相应位置。

我究竟做错了什么？谢谢..

这个有效

```
$query1 = 'SELECT users.first_name,users.last_name,users.phone, matching.date, matching.points, matching.time,matching.location
FROM users ,matching WHERE users.user_id="'.$id_user.'"
AND users.user_id=matching.user_id'; 
```

我需要从 rbpos_epos 表中获取位置。rbpos_epos 和 match 这两个表都有一个 epos_id 字段

所以我需要的是根据我在匹配时拥有的 epos_id 在 rbpos_epos 中找到位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:39:18.677

试试这个 ：：

```
SELECT users.first_name,users.last_name,users.phone, matching.date, matching.points, matching.time, matching.epos_id,rbpos_epos.epos_id,rbpos_epos.location
FROM users 
INNER JOIN matching ON  users.user_id=matching.user_id
INNER JOIN rbpos_epos ON rbpos_epos.epos_id=matching.epos_id
WHERE users.user_id="'.$id_user.'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:00:36.733

使用`ON`而不是`WHERE`在你的`LEFT JOIN`：

```
$query1 = 'SELECT users.first_name,users.last_name,users.phone, matching.date, matching.points, matching.time, matching.epos_id,rbpos_epos.epos_id,rbpos_epos.location
FROM users LEFT JOIN matching ON users.user_id="'.$id_user.'"
AND users.user_id=matching.user_id
LEFT JOIN rbpos_epos ON rbpos_epos.epos_id=matching.epos_id'; 
```

并在s之后放置任何`WHERE`子句`LEFT JOIN`

# javascript - 使用 insert() 原型函数插入 div

> ID：14153736
> 
> 赞同：0
> 
> 时间：2013-01-04T08:38:21.037
> 
> 标签：javascript, prototypejs

我对原型的插入功能有疑问。我在 HTML 中有一个带有“主”ID 的 div。在我的脚本中，我使用原型在“主”div 中插入一个新的 div（“容器”）。但现在我想在“容器”div 中插入另一个 div，但我不能。代码是这样的：

```
 var container;
    var wordsDiv;

    function build(){
       container = new Element('div');
       wordsDiv = new Element('div');

       $('main').insert(container);
       container.insert(wordsDiv);
    } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:39:46.120

尝试这个：

```
var container;
var wordsDiv;

function build(){
   container = new Element('div');
   wordsDiv = new Element('div');

   $('main').insert(container);
   $(container).insert(wordsDiv);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:09:40.367

你的`insert()`s 有问题

```
var container;
var wordsDiv;

function build(){
   container = new Element('div');
   wordsDiv = new Element('div');

   container.insert(wordsDiv);
   $('main').insert(container);
} 
```

我之前遇到过您描述的问题，如果您在将元素插入 DOM 之前没有完全构建元素，除非您通过 id 或类引用它，否则您将无法对元素进行任何操作。

我不确定它发生在哪些浏览器上，但根据经验，我会尝试构建我的元素，并在插入 DOM 之前根据需要向元素添加观察者。

# ios - 存储临时核心数据上下文并保存

> ID：14153744
> 
> 赞同：0
> 
> 时间：2013-01-04T08:38:59.577
> 
> 标签：ios, core-data, nsmanagedobjectcontext

我正在开发一个项目，其中有许多视图控制器，每个控制器都基于核心数据和`UITableView`. 我在保存时遇到问题，当我们编辑表格时，我们应该存储当前信息和数据。接下来，如果用户点击“保存”按钮，所有内容都应该进入课堂（只有这样，我们才能`masterContext`在`appDelegate`masterContext 中动态保存！）。

我的问题如下。如果用户点击了保存按钮，我如何保存当前数据`masterContext`？我应该创建`temporaryContext`它而不是与它合并`masterContext`吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:22:08.503

根据您的问题，您不需要拥有多个上下文，然后与主上下文共享它们的更改。仅使用您在不同控制器之间共享的主上下文。通常这是可以的。

这里有两种方法是有效的。

*   传递接力棒的方法
*   创建一个可以检索上下文的单例类

第一种方法意味着您可以在控制器之间传递上下文作为一种“代码注入”。

```
controller1.masterContext = [self masterContext]; 
```

`masterContext`的`strong`属性在哪里`controller1`。

第二种方法意味着在您设置核心数据堆栈（通常是应用程序委托）的类中，您提供一个`readonly property`可以访问上下文的方法。您还可以提供一种`save`方法来保存上下文。我不太喜欢将所有设置代码放在应用程序委托中，因此，我通常为此创建一个单例类。[DCTCoreDataStack](https://github.com/danielctull/DCTCoreDataStack)就是一个例子。

@MarcusZarra 在[IOS](http://www.cimgf.com/2011/01/07/passing-around-a-nsmanagedobjectcontext-on-the-iphone/)上传递 NSMANAGEDOBJECTCONTEXT中还展示了一些传递上下文的技术。

如果有兴趣，您还可以在 Core Data 中使用新的 iOS 5 API，并设置一个在私有队列 ( `NSPrivateQueueConcurrencyType`) 中工作的主上下文和一个在主线程 ( `NSMainQueueConcurrencyType`) 上工作的子上下文。这称为父/子上下文。在主线程中完成的更改将传递给将更改保存在 CD 存储中的主线程。这里有一些注意事项。[核心数据发行说明](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html)。此外，请查看[Multi-Context CoreData](http://www.cocoanetics.com/2012/07/multi-context-coredata/)以获得完整的解释。

# sql - Sqlite 数据库优化

> ID：14153757
> 
> 赞同：2
> 
> 时间：2013-01-04T08:40:47.440
> 
> 标签：sql, sqlite, sql-optimization

我有包含三个表的 sqlite3 数据库：

```
CREATE TABLE document (
  id Int PRIMARY KEY NOT NULL,
  root_id Int,
  name Varchar(100),
  active Tinyint
);
CREATE INDEX IDX_documentId ON document (id);
CREATE INDEX IDX_documentName ON document (name);

CREATE TABLE dictionary (
  id Int PRIMARY KEY NOT NULL,
  word Varchar(100) NOT NULL
);
CREATE INDEX IDX_dictionaryId ON dictionary (id);
CREATE UNIQUE INDEX IDX_dictionaryWord ON dictionary (word ASC);

CREATE TABLE document_index (
  id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
  document_id Int NOT NULL,
  word_id Int NOT NULL,
  FOREIGN KEY(document_id) REFERENCES document(id),
  FOREIGN KEY(word_id) REFERENCES dictionary(id)
);
CREATE INDEX IDX_documentIndexId ON document_index (id);
CREATE INDEX IDX_documentIndexDocId ON document_index (document_id);
CREATE INDEX IDX_documentIndexWordId ON document_index (word_id); 
```

我有 sql 脚本来选择包含字典中单词的所有文档：

```
SELECT document.id, document.name
FROM document
     INNER JOIN document_index on document_index.document_id=document.id
     INNER JOIN dictionary on dictionary.id=document_index.word_id
WHERE dictionary.word LIKE @pQuery
   AND document.active = 1
   AND document.root_id in (@pRoot1, @pRoot2, @pRoot3, @pRoot4, @pRoot5, @pRoot6, @pRoot7) 
```

当字典包含 ~= 400,000 条记录、document ~= 1000 条记录和 document_index ~= 500,000 条记录时，查询在我的 iPad 2 上执行大约 30 秒。

如何优化查询或改变数据库结构（例如添加索引）以减少查询时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:02:51.913

[除了使用SQLite Full Text Search extension](http://www.sqlite.org/fts3.html)之外，我认为没有任何实用的方法可以使您的查询更快地工作。

FTS 允许使用快速版本的`MATCH`子句而不是固有的慢版本`LIKE`。

不幸的是，在 iOS 上默认不启用 FTS，但如果您构建自己的应用程序并[包含您自己的启用 FTS 的 SQLite 副本，](https://stackoverflow.com/a/5955489/1734130)显然您仍然可以这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:08:13.430

瓶颈很可能是零件`WHERE dictionary.word LIKE @pQuery`。

1.  你在 dictionary.word 上没有索引，所以 SQLite 需要扫描整个表
2.  您正在使用 LIKE 运算符，在大多数情况下它不能使用索引。

您的用例是否真的有必要使用 LIKE 查询，而不仅仅是检查字符串是否相等？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:11:56.117

尝试使用`dictionary.word = @pQuery`而不是`dictionary.word LIKE @pQuery`

运行“分析”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T19:01:26.300

我找到了解决方案。该解决方案将查询执行速度提高了 60！次。我在[这里](http://joshua.perina.com/africa/gambia/fajara/post/converting-to-sqlite-and-like-query-optimization)找到了它并且更详细 -[这里](http://web.utk.edu/~jplyon/sqlite/SQLite_optimization_FAQ.html)。很简单，我用 LIKE 表达式来比较 >= 和 <：

老的：

```
dictionary.word LIKE 'prezident%' 
```

新的：

```
dictionary.word >= 'prezident' AND dictionary.word < 'prezidentz' /* Added z to the second string*/ 
```

这个解决方案有一个限制，我可以通过字符串的一部分来查找，但在字符串的末尾只有一个，即'expr%'。

感谢大家的帮助！

# c# - 获取gridview列的值

> ID：14153766
> 
> 赞同：3
> 
> 时间：2013-01-04T08:41:25.650
> 
> 标签：c#, asp.net

我想将控件作为 Gridview 的 TemplateFeilds 中的列，它不应该被隐藏。每列末尾都有一个按钮。我的问题是我应该使用什么控件以及如何获取在 Gridview 中单击按钮的列的特定行的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T08:51:53.757

你想得到什么价值？

您可以处理按钮的单击事件并将`sender`to`Button`和 it's `NamingContainer`to 转换为`GridViewRow`。然后，您就拥有了在该行中查找所有其他控件所需的一切。

```
protected void Button1_Clicked(Object sender, EventArgs e)
{
    // get the button reference
    Button btn = (Button) sender;
    GridViewRow row = (GridViewRow) btn.NamingContainer;
    // assuming the primary key value is stored in a hiddenfield with ID="HiddenID"
    HiddenField hiddenID = (HiddenField) row.FindControl("HiddenID");
    int id = int.Parse(hiddenID.Value);
} 
```

aspx (GridView 的 TemplateField)

```
<asp:Button ID="Button1" runat="server" Text="Click Me" OnClick="Button1_Clicked"/>
<asp:HiddenField ID="HiddenID" runat="server" Value='<%# Eval("PrimaryKeyField") %>'/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T08:55:04.143

您应该在 中使用`HiddenField`as 列，`GridView`因为控件不可见，从而满足您的要求。后面的代码会在gridview的row命令里面

```
 public  void gdView_RowCommand(object sender, GridViewCommandEventArgs e)
        {

            if (e.CommandName == "sendvalue")
            {

                for (int i = 0; i < gdView.Rows.Count; i++)
                {
                    int getrow = Convert.ToInt32(e.CommandArgument);

                    HiddenField HiddenField1 = (HiddenField)gdView.Rows[getrow].FindControl("HiddenField1");
}
} 
```

> 其中 e.CommandName == "sendvalue" 是因为 Button 的属性命令名称设置为 "sendvalue"

设计中的 HiddenField 将是

```
 <asp:HiddenField ID="HiddenField1" runat="server"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T08:49:55.327

在模板中使用隐藏字段。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T08:51:39.147

`CommandArgument`您可以通过将要单击的按钮的属性设置为行数据绑定期间所需的值来更改方法。

# java - NullPointerException 与 Android SQLiteAssetHelper

> ID：14153768
> 
> 赞同：1
> 
> 时间：2013-01-04T08:41:31.190
> 
> 标签：java, android, sqlite

在开发 Android 应用程序时，我使用[Android SQLiteAssetHelper](https://github.com/jgilfelt/android-sqlite-asset-helper)。问题是，有时在访问数据库时，我会收到对象 `NullPointerException`中的对象错误`DBQuery`

```
public class DBQuery extends MyDatabase {
  private static MyDatabase dataBaseHelper;

  public DBQuery(Context context) {
        super(context);
        dataBaseHelper = new MyDatabase(context);
  }

  public static void closed() {
        dataBaseHelper.close();
  }

  public static int getFDay(int year) {
    Cursor cursor = database.rawQuery("SELECT offset FROM china_years WHERE year = ?",
        new String[] { Integer.toString(year) });

    cursor.moveToFirst();
    String yearS;
    try {
      yearS = cursor.getString(0);
    } catch (Exception e) {
      yearS = "0";
      e.printStackTrace();
    }
    cursor.close();

    return Integer.parseInt(yearS);
  }

  /* other queries... */    
} 
```

MyDatabase 类：

```
public class MyDatabase extends SQLiteAssetHelper {

   private static final String DATABASE_NAME = "db.sqlite";
   private static final int DATABASE_VERSION = 2;      
   public static SQLiteDatabase database;

   public MyDatabase(Context context) {
     super(context, DATABASE_NAME, null, DATABASE_VERSION);

     database = getReadableDatabase();
   }
} 
```

UDP：对不起，空对象是 DBQuery 类中的“数据库”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:10:37.307

像这样添加数据库名称并检查数据库是否已创建

```
 private static final String DATABASE_NAME = "Test"; 
```

`data/data/YOUR_APP_PACKAGE_NAME`地点

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T12:32:44.970

你必须先打开你的数据库。只有您可以对其执行操作。

# oauth - ZF2 oauth 包文档

> ID：14153771
> 
> 赞同：1
> 
> 时间：2013-01-04T08:41:52.853
> 
> 标签：oauth, zend-framework2

我刚刚发现这里有一个包可以在 zf2 上添加 oauth 支持（https://packages.zendframework.com/）。我目前正在开发一个 API，并希望使用 oauth 管理身份验证。但是，我找不到任何关于如何使用这个包的文档/示例或教程。有谁知道我在哪里可以找到更多信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:22:50.890

您是否阅读过[Zend Framework 对 OAuth 的介绍](http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html)？小节标题[入门](http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html#zend.oauth.introduction.getting-started)介绍了一些代码示例，同时展示了需要做的事情。

# linux - 如何告诉 bash 从自定义位置获取 gettext .mo 文件？

> ID：14153772
> 
> 赞同：3
> 
> 时间：2013-01-04T08:41:53.350
> 
> 标签：linux, bash, gettext, msgfmt

我正在为一个非常具体的项目创建一个 bash 脚本，并且字符串必须是可翻译的。

我已成功遵循以下教程： bash 脚本的 gettext 支持：http:
[//mywiki.wooledge.org/BashFAQ/098](http://mywiki.wooledge.org/BashFAQ/098)

但是，本教程的一部分要求运行 msgfmt 命令来为每种语言生成已编译的 .mo 文件。为了使它工作，我必须以 root 身份运行命令，并且 .mo 文件保存在 /usr/share/locale/(lang)/LC_MESSAGES 下。

我希望将 .mo 文件保存在相对于 bash 脚本的子目录中，这很容易。**但是，当脚本运行时，bash 必须知道必须在适当的自定义位置查找 .mo 文件的内容。**

如何做到这一点？

我想要做的是让整个项目，连同 .pot 和 .mo 文件，自包含并能够更新翻译而无需使用 sudo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:25:40.330

你玩过环境变量吗`TEXTDOMAINDIR`

您可能会在页面中找到`info`比在`man`页面中更多的信息：

```
info gettext 
```

或者

```
info gettext 'Variable Index' 
```

# c++ - Building OpenCV 2.49 with visual studio 2012

> ID：14153781
> 
> 赞同：0
> 
> 时间：2013-01-04T08:43:06.143
> 
> 标签：c++, opencv, build, visual-studio-2012, linker-errors

I try to build the OpenCV libraries with visual studio 2012 but I always get the following Error:

```
LINK : fatal error LNK1104: cannot open file "....\lib\Debug\opencv_core249d.lib". 
```

I downloaded the latest code from the git repository and used Cmake 2.8.10.2 to create the projects. I also disabled the cuda support due to the cuda 5.0 and visual 2012 incompatibility.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:31:29.387

由于 OpenCV 2.43 不适用于 Visual Studio 2012。所以我写了一个简单的教程。

> [http://answers.opencv.org/question/6495/visual-studio-2012-and-rtlfreeheap-error/#6603](http://answers.opencv.org/question/6495/visual-studio-2012-and-rtlfreeheap-error/#6603)

但是你的 OpenCV 版本是 2.49。我不确定这是否可行。你还是可以试试的。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T18:23:40.017

我遇到了同样的问题（在 Visual Studio 2008 中）。问题是我包含了一个 ; （分号）在我所有的附加依赖项（opencv_core249d.lib opencv_imgproc249d.lib 等....）之间。当我删除分号时，它起作用了。

# c - 普通数组声明和结构内声明的数组之间的内存和效率差异

> ID：14153784
> 
> 赞同：4
> 
> 时间：2013-01-04T08:43:36.293
> 
> 标签：c, declaration, performance

在 C 中声明数组时，它们可以正常声明如下：

```
int arr[10] 
```

或者它们也可以在如下结构中声明：

```
struct structArr{
   int sArr[10];
}s1; 
```

1.  `s1.sArr[]`使用代替时会不会有任何内存或空间权衡`arr[]`，如果是，为什么？
2.  任何一种形式都比另一种形式更有效、更快吗？

我个人认为这`arr[]`会更快，`s1.sArr[]`但我不知道我是否正确，而且我没有技术答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T08:49:57.970

我不希望有任何区别，不。

编译器“知道”该`sArr`字段与基地址的偏移量`s1`为 0，因此我猜想可以使用完全相同的指令序列来完成访问。

当然，将数组包装在一个结构中可以按值分配和传递/返回它，这可能是很好的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:48:52.813

您的问题的答案取决于编译器和优化。

使用至少经过`-O1`优化的最新 GCC 编译器，`arr[]`不会比`s1.sArr[]`. 实际上，如果由于某种原因（例如，它的其他字段）`s1`比原来更对齐`arr`，那么它可能会发生（由于缓存效应）`s1.sArr[]`可能会稍微好一些（例如，因为与缓存行大小更对齐）。但实际上从性能的角度来看，使用`arr[]`or `s1.sArr[]`（几乎大部分）是相同的。

出于可读性的原因，事情可能会有所不同。您可能希望将相关项目打包到一些`struct`. （并且您可能希望避免使用过多的变量名）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T08:59:45.223

添加到其他答案中，虽然潜在的性能和内存差异几乎在任何时候都可以忽略不计，但使用这个结构间接的东西可以让你确定数组的大小，即使是在传递给函数时（不会衰减到指针）。这可能非常有用。

考虑以下程序：

```
#include <stdio.h>

typedef struct {
    int arr[10];
} my_arr;

void foo1(my_arr arr) {
    printf("%d\n", sizeof(arr.arr));
}

void foo2(int arr[10]) {
    printf("%d\n", sizeof(arr));
}

int main() {
    my_arr a1;
    foo1(a1); /* prints 40 on my machine (10*sizeof(int)) */

    int a2[10];
    foo2(a2); /* prints 8 on my machine (sizeof(int*)) */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:46:45.563

我不认为差异（如果有的话）值得失眠。

如果您的示例是完整的，我会选择`int arr[10];`仅出于可读性原因。

# android - 意向服务启动期间的 java.lang.NullPointerException

> ID：14153786
> 
> 赞同：2
> 
> 时间：2013-01-04T08:43:51.467
> 
> 标签：android, exception, service, intentservice

我提供了一项服务来更新应用程序，它由广播接收器启动，该接收器从应用程序接收广播并启动系统。

java.lang.NullPointerException 发生。

```
java.lang.RuntimeException: Unable to instantiate service 
  com.ggservice.democracy.updateDemocracyService: java.lang.NullPointerException
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2237)
    at android.app.ActivityThread.access$1600(ActivityThread.java:123)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4424)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    at dalvik.system.NativeStart.main(Native Method)

Caused by: java.lang.NullPointerException
    at android.content.ContextWrapper.getSystemService(ContextWrapper.java:386)
    at android.accounts.AccountManager.get(AccountManager.java:288)
    at com.ggservice.democracy.updateDemocracyService.<init>(updateDemocracyService.java:33)
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1319)
    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2234) 
```

**服务是这样的：**

```
public class updateDemocracyService extends IntentService{
    public updateDemocracyService() {
        super("updateDemocracyService");
        // TODO Auto-generated constructor stub
    }
    private pollDataSource datasource;
     int mStartMode;       // indicates how to behave if the service is killed
        IBinder mBinder;      // interface for clients that bind
        boolean mAllowRebind; // indicates whether onRebind should be used
        // url to make request
        AccountManager am = AccountManager.get(this); // "this" references the current Context

        //cerco un account per identificare l'utente.
        Account[] accounts = am.getAccountsByType("com.google");
        String nomeaccount = md5(accounts[0].name);

        private static String url = "http://lnx.ggservice.com/democracy/domande.php?user=" ;
        private static String risposteUrl = "http://lnx.ggservice.com/democracy/domande.php?useranswer=" ;

        // JSON Node names
        private static final String TAG_DOMANDE = "domande";
        private static final String TAG_ID = "idWeb";
        private static final String TAG_CATEGORIA = "categoria";
        private static final String TAG_TESTODOMANDA = "testoDomanda";
        private static final String TAG_QUANTERISPOSTE = "quanteRisposte";
        private static final String TAG_TESTORISPOSTA = "testoRisposta";
        private static final String TAG_OK = "ok";

        // contacts JSONArray
        JSONArray domanda = null;
        JSONArray rispostescritte = null;

        @SuppressWarnings("deprecation")
        @Override
        protected void onHandleIntent(Intent intent) {
            datasource = new pollDataSource(this);
            datasource.open();

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url + nomeaccount);

            try {

                // Getting Array of Contacts
                domanda = json.getJSONArray(TAG_DOMANDE);

                // looping through All Contacts
                for(int i = 0; i < domanda.length(); i++){
                    JSONObject c = domanda.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String testoDomanda = c.getString(TAG_TESTODOMANDA);
                    String categoria = c.getString(TAG_CATEGORIA);
                    int quanteRisposte = c.getInt(TAG_QUANTERISPOSTE);

                    datasource.createCategoria(categoria);
                    //TEOTODO inserimento della categoria, se necessario
                    //TEOTODO inserimento della domanda

                    for(int ua = 0; ua < quanteRisposte; ua++){
                    //TEOTODO inserimento dei testi risposte.   

                    }

                    //NOTIFICATION
                   NotificationManager notifManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);  

                   Notification note = new Notification(R.drawable.ic_launcher, "Democracy", System.currentTimeMillis());  

                   PendingIntent intent1 = PendingIntent.getActivity(this, 0, new Intent(this, MainActivity.class), 0);  

                   note.setLatestEventInfo(this, "Nuovi sondaggi", "Ci sono nuovi sondaggi per te!!", intent1);  

                   int NOTIF_ID = 1;
                   notifManager.notify(NOTIF_ID, note);            
                   //NOTIFICATION    
                }
            } catch (JSONException e) {
              //  e.printStackTrace();
            }  

            //recupero tutte le risposte dal database, poi per ogni risposta:
            //JSONObject json1 = jParser.getJSONFromUrl(risposteUrl + nomeaccount); //+idweb+risposta

          //  try {

                // Getting Array of responses
               // rispostescritte = json.getJSONArray(TAG_OK);
          //      }   catch (JSONException e) {} 

             Intent i= new Intent(); 
             i.setAction("AWESOME_TRIGGER_WORD"); //the name which we will specify in our receiver 
             i.putExtra("counter",234); PendingIntent pi = PendingIntent.getBroadcast(getApplicationContext(),
             1111, i,PendingIntent.FLAG_CANCEL_CURRENT);
             //getting current time and add 5 seconds in it 
              Calendar cal = Calendar.getInstance(); 
              cal.add(Calendar.MINUTE, 10); 
              //registering our pending intent with alarmmanager 
              AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE); 
              am.set(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(), pi);       

        }

        public String md5(String s) {
            try {
                // Create MD5 Hash
                MessageDigest digest = java.security.MessageDigest.getInstance("MD5");
                digest.update(s.getBytes());
                byte messageDigest[] = digest.digest();

                // Create Hex String
                StringBuffer hexString = new StringBuffer();
                for (int i=0; i<messageDigest.length; i++)
                    hexString.append(Integer.toHexString(0xFF & messageDigest[i]));
                return hexString.toString();

            } catch (NoSuchAlgorithmException e) {
                e.printStackTrace();
            }
            return "";
        }

} 
```

为什么是 java.lang.NullPointerException ？ **这也是触发服务的调用：**

```
public class BootCompletedReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {          
        Intent serviceIntent = new Intent(context, updateDemocracyService.class);
        context.startService(serviceIntent);         
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:52:16.883

代替

```
AccountManager am = AccountManager.get(this); 
```

有了这个

```
AccountManager am = AccountManager.get(updateDemocracyService.this); 
```

最好在`onCreate()`服务的方法中初始化你的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:48:45.793

采用

```
 AccountManager am = AccountManager.get(getApplicationContext()); 
```

代替

```
 AccountManager am = AccountManager.get(this); 
```

`onHandleIntent`如果您将这条线移到Intent Service 中，那就太好了：

```
 @Override
  protected void onHandleIntent(Intent intent) {
     am = AccountManager.get(getApplicationContext()); 
     //your code here
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:59:15.937

看起来您正在方法之外调用以下行：

```
 //cerco un account per identificare l'utente.
        Account[] accounts = am.getAccountsByType("com.google");
        String nomeaccount = md5(accounts[0].name); 
```

您需要将其移至方法...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:51:24.577

在您的清单中，您使用`android:name=".updateDemocracyService"`.

> ```
> <service android:enabled="true" android:name=".updateDemocracyService" /> 
> ```

# json - Get Event dates from my Google+ Page

> ID：14153793
> 
> 赞同：0
> 
> 时间：2013-01-04T08:44:20.643
> 
> 标签：json, api, events, google-plus

**Hi everyone**

I have a Google+ page, and i would like to display all events created by this page on my website, but for for some reason i cannot find the date, time or place of this anywhere in the json output i get from the Google+ API.

The json output below display all the activity on my page (not much) and in there i have two event, but i cannot see the information needed anywhere.

> [https://www.googleapis.com/plus/v1/people/103518584309304034966/activities/public?maxResults=20&pageToken=Next&fields=items&key=](https://www.googleapis.com/plus/v1/people/103518584309304034966/activities/public?maxResults=20&pageToken=Next&fields=items&key=){Removed my API Key}

I generated the json output on this page, by filling out the form below with: 103518584309304034966, public, 20 next, blank:

> [https://developers.google.com/+/api/latest/activities/list](https://developers.google.com/+/api/latest/activities/list)

I hope someone know where i can get the date, time and place on a Google+ event, keep in mind that this is not a real user so i don't have a Google Calandar

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:22:15.673

您最接近的方法是按照您的建议[列出活动](https://developers.google.com/apis-explorer/#p/plus/v1/plus.activities.list?userId=103518584309304034966&collection=public&_h=1&)，然后在结果列表中搜索活动活动。

如您所述，活动活动不包括活动时间、地点和日期。但是，您可以在说明中添加一些指示日期/时间的内容，并可以从那里开始以编程方式提取日期。

将来可能会提供此信息，因此请[加入 Google+ 社区，以便 Google+ 开发人员](https://plus.google.com/communities/113527920160449995981)随时了解任何更新。

# c# - Add buttons in a datagridview field of winform

> ID：14153796
> 
> 赞同：1
> 
> 时间：2013-01-04T08:44:36.113
> 
> 标签：c#, vb.net, winforms, datagridview, devexpress

I am using Dexexpress xtragrid column and have displayed all rows of my database.

I wanted to add a new column to the datagridview and for that i did the following:

```
Dim AddOperationsColumn As New GridColumn()
AddOperationsColumn.Name = "colOperations"
AddOperationsColumn.FieldName = "Operations"
AddOperationsColumn.Caption = "Operations"
Grid_view_patients.Columns.Insert(1, AddOperationsColumn)
AddOperationsColumn.Visible = True
AddOperationsColumn.VisibleIndex = TotalColumns + 1 
```

**Now i want to add two buttons to it** `Edit` and `Delete`

Question: So how to add buttons to these fields.

I have already counted all the rows.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:43:13.710

**使用存储库项**

```
 RepositoryItemButtonEdit editButton;
    RepositoryItemButtonEdit deleteButton;

    private void InitRepositoryItems()
    {
        editButton = new RepositoryItemButtonEdit();
        deleteButton = new RepositoryItemButtonEdit();

        editButton.ButtonClick += editButton_ButtonClick;
        deleteButton.ButtonClick += deleteButton_ButtonClick;

        gridControl.RepositoryItems.Add(editButton);
        gridControl.RepositoryItems.Add(deleteButton);

    }

    void deleteButton_ButtonClick(object sender, DevExpress.XtraEditors.Controls.ButtonPressedEventArgs e)
    {
        // do some delete on button click
    }

    void editButton_ButtonClick(object sender, DevExpress.XtraEditors.Controls.ButtonPressedEventArgs e)
    {
       //do some edit on button click
    } 

    private void gridView1_CustomRowCellEdit(object sender, DevExpress.XtraGrid.Views.Grid.CustomRowCellEditEventArgs e)
    {
        if (e.Column.Name == "colOperations")
            e.RepositoryItem = editButton;
    } 
```

用于在相应的`gridView1_CustomRowCellEdit`列中分配 RepositoryItem（在我们的例子中是 colOperations 列）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:16:47.167

**解决方案 1**

使用[DataNavigator](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsDataNavigatortopic) 非常简单。只需将 Grid 属性 UseEmbebedNavigator 设置为 true，它就会显示在网格的底部。

为了为按下的按钮提供自己的功能，您需要处理[NavigatorBase.ButtonClick 事件](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsNavigatorBase_ButtonClicktopic)

例如：

```
private void gridControl_EmbeddedNavigator_ButtonClick(object sender, NavigatorButtonClickEventArgs e)
    {
        if (e.Button.ButtonType == NavigatorButtonType.Remove)
        {
            //getting the selected object
            myObject selectedItem = dbGridView.GetRow(dbGridView.FocusedRowHandle) as myObejct;
            if (selectedItem == null) return;

            //now do something with that object
            .......

            e.Handled = true;
        }
    } 
```

*请注意，上面的代码覆盖了 DataNavigator 的默认行为*

**解决方案 2**

另一种方法是就地编辑网格行。为此，您的数据源需要是 BindingList。您可以看到模板 DevExpress WinForms 项目。

# javascript - phtoswipe: take images list from an iframe

> ID：14153800
> 
> 赞同：0
> 
> 时间：2013-01-04T08:44:55.793
> 
> 标签：javascript, ajax, iframe, photoswipe

This is the basic sample code to use photoswipe:

```
<!DOCTYPE html>
<html>
<head>
<title>PhotoSwipe</title>
...
<script type="text/javascript">

  (function(window, PhotoSwipe){

    document.addEventListener('DOMContentLoaded', function(){
      var options = {},
      instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );  
    }, false);
  }(window, window.Code.PhotoSwipe));   
</script>
</head>
<body>
...
<div id="MainContent">
<div class="page-content">
    <h1>PhotoSwipe</h1>
</div>

<ul id="Gallery" class="gallery">
    <li><a href="images/full/001.jpg"><img src="images/thumb/001.jpg" alt="Image 001" /></a></li>
    ...
    <li><a href="images/full/018.jpg"><img src="images/thumb/018.jpg" alt="Image 018" /></a></li>
</ul>
</div>  
</body>
</html> 
```

You can download it from photoswipe website: [http://www.photoswipe.com/](http://www.photoswipe.com/) : It's the file 01-default.html from example folder.

What I want to do is to load the frame list into a invisible iframe (e.g. named "foo") instead than have it hardcoded in the page. The problem is that I can not access the image list. I tried:

```
PhotoSwipe.attach(window.frames['foo'].document.querySelectorAll('#Gallery a'), options); 
```

instead of

```
PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options ); 
```

after moving the ul in an external list.html file (source of the iframe) like this:

```
...
<div id="MainContent">
<div class="page-content">
    <h1>PhotoSwipe</h1>
</div>
    <iframe id="foo" src="list.html"></iframe>
... 
```

But it doesn't work. Why?

## The debugger shows the following exception: "Code.PhotoSwipe.createInstance: No images to passed."

EDIT: -from the comments-

1.  It's a cross-domain issue. Why do I get a cross domain issue if files are all on my webserver? how should I refer to them in order to avoid such problem?

2.  Could be [this approach](http://www.tomslabs.com/index.php/2012/06/iframes-and-javascript-cross-domain-security/) valid for my purpose? (and with a long life expectancy...)

# lucene - stem words and create index without stop words using Lucene 4.0

> ID：14153802
> 
> 赞同：0
> 
> 时间：2013-01-04T08:45:08.000
> 
> 标签：lucene, stemming, stop-words

I have the following problem:there are several text documents which I need to parse and create an index but without stop words and to stem the terms.I can do it manually but I heard from a colleague about Lucene which can do it automatically. I searched the web and found many examples which I tried but each and every example use a different version of lucene and different methods and none of the examples is complete. At the end of this process I need to calculate the tf/idf for each term in my collection.

update: I've created an index with one doc at the moment.the doc is without stop words and stemmed. how do I calculate tf/idf to this doc uisng lucenc? (I will add more docs after I'll figure out how to do the calculation)

Any help with lucene will be appreciated. Thanks.

```
import java.io.*;
    import java.util.HashSet;
    import org.apache.lucene.analysis.*;
    import org.apache.lucene.analysis.tokenattributes.*;
    import org.apache.lucene.analysis.standard.*;
    import org.apache.lucene.store.Directory;
    import org.apache.lucene.store.FSDirectory;
    import org.apache.lucene.util.*;
    import org.apache.lucene.analysis.snowball.*;
    import org.apache.lucene.document.Document;
    import org.apache.lucene.document.Field;
    import org.apache.lucene.index.IndexWriter;

public class Stemmer
{
    static HashSet<String> stopWordsList = null;

    public static String Stem(String text, String language) throws IOException
    {
        parse p = new parse();
        stopWordsList = p.readStopWordsFile();
        StringBuffer result = new StringBuffer();
        if (text!=null && text.trim().length()>0)
        {
            StringReader tReader = new StringReader(text);
            // Analyzer analyzer = new StopAnalyzer(Version.LUCENE_36,stopWordsList);
            @SuppressWarnings("deprecation")
            Analyzer analyzer = new SnowballAnalyzer(Version.LUCENE_35,"English",stopWordsList);
            // disk index storage
            Directory directory = FSDirectory.open(new File("d:/index")); 

            @SuppressWarnings("deprecation")
            IndexWriter writer = new IndexWriter(directory, analyzer, true, new IndexWriter.MaxFieldLength(25000));

            TokenStream tStream = analyzer.tokenStream("contents", tReader);
            @SuppressWarnings("deprecation")
            TermAttribute term = tStream.addAttribute(TermAttribute.class);

            try {
                while (tStream.incrementToken())
                    {
                        result.append(term.term());
                        result.append(" ");
                    }

                Document doc = new Document();
                String title = "DocID";
                // adding title field
                doc.add(new Field("title", title, Field.Store.YES, Field.Index.ANALYZED)); 
                String content = result.toString();
                // adding content field
                doc.add(new Field("content", content, Field.Store.YES, Field.Index.ANALYZED));
                // writing new document to the index
                writer.addDocument(doc);  
                writer.close();
                System.out.println("Reult is: " + result);  
            } 
            catch (IOException ioe)
                {
                    System.out.println("Error: "+ioe.getMessage());
                }
        }

        // If, for some reason, the stemming did not happen, return the original text
        if (result.length()==0)
            result.append(text);
        return result.toString().trim();

    } //end stem

    public static void main (String[] args) throws IOException
        {
            Stemmer.Stem("Michele Bachmann amenities pressed her allegations that the former head of her Iowa presidential bid was bribed by the campaign of rival Ron Paul to endorse him, even as one of her own aides denied the charge.", "English");
        }
}//end class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:50:20.400

要过滤掉停用词，请使用[StopAnalyzer](http://lucene.apache.org/core/4_0_0-ALPHA/core/index.html)。它将删除以下单词：

```
 "a", "an", "and", "are", "as", "at", "be", "but", "by",
  "for", "if", "in", "into", "is", "it",
  "no", "not", "of", "on", "or", "such",
  "that", "the", "their", "then", "there", "these",
  "they", "this", "to", "was", "will", "with" 
```

`addDocument(Iterable<? extends IndexableField> doc, Analyzer analyzer)`如果您使用方法以及在搜索过程中，可以提供分析器。有关更多选项和详细信息，请参阅 Javadoc。

对于词干，看看[这个 SO post](https://stackoverflow.com/questions/5391840/stemming-english-words-with-lucene)。

很难提供更多建议，因为您没有解释到底是什么失败了。

# sql - “无法绑定多部分标识符”错误

> ID：14153803
> 
> 赞同：0
> 
> 时间：2013-01-04T08:45:10.500
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL Server 2005。我收到此错误：

> *无法绑定多部分标识符“ms.MOP_desc”。*

我测试了两个选择查询中的每一个，它们单独运行良好，但是当我合并这些查询时出现错误。谁能告诉我这个查询出了什么问题？谢谢你。

```
SELECT SUM(Amount) AS TotalAmount, ms.MOP_desc
FROM 
(
    SELECT SUM(hd.delivery_value) AS Amount, ms.MOP_desc
    FROM TRANSACTION_HEADER AS th 
        INNER JOIN TRANSACTION_DETAIL AS td 
            ON th.transaction_number = td.transaction_number 
        LEFT JOIN hose_delivery hd 
            ON td.delivery_id = hd.delivery_id 
        LEFT JOIN product pr 
            ON pr.product_id = td.product_id
        INNER JOIN MOP_Setting AS ms 
            ON hd.MOP_ID = ms.MOP_ID  
    WHERE hd.delivery_value > 0 
        AND (th.USER_PERIOD_ID IN (13))
        AND (hd.MOP_ID  IN (1))
        AND hd.Cleared_By != '0'
    GROUP BY ms.MOP_desc

    UNION ALL

    SELECT  SUM(td.quantity * td.price_sold) AS Amount, ms.MOP_desc 
    FROM TRANSACTION_HEADER AS th 
        INNER JOIN TRANSACTION_DETAIL AS td 
            ON th.transaction_number = td.transaction_number 
        INNER JOIN MOP_Setting AS ms 
            ON th.MOP_ID = ms.MOP_ID  
    WHERE (th.USER_PERIOD_ID IN (13))
        AND (th.MOP_ID  IN (1))
    GROUP BY ms.MOP_desc
)t 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:54:16.100

因为`UNION`ed 查询的结果是您为其赋予别名的行集`t`-`ms`别名不再适用：

```
SELECT SUM(Amount) AS TotalAmount, t.MOP_desc
FROM 
(
...
)t 
```

如果这真的是`SUM`这里的第二步，那么您`GROUP BY`还需要一个外部子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T08:51:51.453

当您从子选择而不是表中进行选择时，子选择中的列名不会暴露给外部选择

采用

```
SELECT SUM(Amount) AS TotalAmount, mop
FROM 
(
  SELECT SUM(hd.delivery_value) AS Amount, ms.MOP_desc as mop
  FROM TRANSACTION_HEADER AS th 
      INNER JOIN TRANSACTION_DETAIL AS td 
... 
```

# delphi - 迭代 TObjectList

> ID：14153808
> 
> 赞同：1
> 
> 时间：2013-01-04T08:45:52.257
> 
> 标签：delphi, delphi-2010, loops, visitor-pattern, tobjectlist

我有 ObjectList 容器，我想添加一个内部迭代器（访问者模式）事实上我正在尝试确定我的列表中的重复项..

一个样本： http: [//pastebin.com/pjeWq2uN](http://pastebin.com/pjeWq2uN)

这段代码提供了我想要实现的洞察力..

```
TFindDuplicatesMethod = procedure(s1, s2: string) of object;

TPersonList = class(TObjectList)
public
  procedure Iterate(pMethode: TFindDuplicatesMethod)
end;

procedure TPersonList.Iterate(pMethode: TFindDuplicatesMethod)
var
  i: Integer;
begin
  for i := 0 to Count - 1 do
  pMethode(TMyClass(Items[i]).S1, {But i don't have the second parameter because
                               it comes from outside of PersonList Ex: OpenDialog.Files[i]})
end;

function FindDuplicate(S1, S2: string): Boolean;
begin
  Result := False;
  if S1 = S2 then
  Result := True;
end;

begin
  Files.Iterate(FindDuplicates(S1, S2));
end; 
```

我想知道 OOP 如何解决这样的问题。

提前致谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T15:26:18.017

好的，正如我们在评论中发现的，我们有 2 个任务：

1.  如何查找是否`TObjectList`已经包含一个项目（所以新项目是重复的）
2.  如何管理文件图标`TImageList`以减少内存使用并仅存储唯一图标。

正如我在评论中提到的，您应该在单独的线程中询问您的第二个问题，但我建议您添加新的文件图标取决于新的文件 mime 类型，而不是二进制图标数据。在这里你必须创建文件类型字典，确定文件类型等等。

中的重复项怎么办`TObjectList`？您可能知道，有`generic`- 的`TObjectList`实现`TObjectsList<T>`。在您的示例中，您可以定义`TPersonList`为`TObjectList<TPerson>`，因此`items`属性始终返回`TPerson`对象实例。

现在，带有列表的通用任务 - 列表排序。看看`Sort()`方法`TObjectList<T>/TList`。它有2个重载方法。其中一个是默认的，第二个是`Comparer`作为参数。实际上，第一种方法也使用了一个比较器——默认比较器。所以比较器是`IComparer<T>`接口的实现，它有唯一的方法 - `function Compare(l,r : T):integer`; 通常，在调用该方法之前，您会在运行时将此排序比较器定义为*匿名*`Sort()`方法。使用匿名方法，您总是知道如何比较两个`T`类型的对象，然后您可以确定它们中的哪一个比其他对象“更大”，并且应该是列表中的第一个。

所以你在列表中搜索重复项时遇到的情况相同。但现在您必须确定 2 个对象是否相等。

让我们假设您有`personList : TPersonList`包含`TPerson`实例。例如，每个人都有姓名、姓氏、出生日期和身份证。当然，默认比较器对如何比较 2 人一无所知。但是您可以提供新的比较器知道。例如，假设 2 个对象相等，如果它们的 ID 相等；

```
 TPerson = class(TObject)
      strict private
        FName : string;
        FSurname : string;
        FDateOfBirth : TDateTime;
        FId : string;   {passport number or something else}
      public
        constructor Create(aID : string; aDoB : TDateTime);

        property Name : string read FName write FName;
        property Surname : string read FSurname write FSurname;
        property DateOfBirth : TDateTime read FDateOfBirth;
        property ID : string read FId;
    end;

    TPersonList = class(TObjectList<TPerson>)
      public
        constructor Create();
    end; 
```

`TPerson`构造函数是通常的：

```
constructor TPerson.Create(aID: string; aDoB: TDateTime);
begin
    inherited Create();
    FID := aId;
    FDateOfBirth := aDoB;
end; 
```

现在我们必须编写`TPersonList`构造函数。如您所见，`TObejctList`构造函数几乎没有重载。其中之一有`Comparer`参数。它保存`aComparer`到`FComparer`现场。现在，看看`Contains`方法。它发现列表是否已经包含对象。它使用`IndexOf`方法。因此，如果返回的 index = 0 则列表包含我们的对象。

所以现在我们的任务是在`TPersonList`构造函数中定义新的比较器。我们应该定义比较方法，然后创建比较器对象并将其传递给列表构造器。

```
constructor TPersonList.Create();
var comparer : IComparer<TPerson>;
    comparison : TComparison<TPerson>;
begin
    comparison := function(const l,r : TPerson):integer
                  begin
                    if l.ID = r.id then exit(0)
                    else if l.ID > r.ID then exit(-1)
                    else exit(1);
                  end;

    comparer := TComparer<TPerson>.Construct(comparison);

    inherited Create(comparer);
end; 
```

为了测试我们的代码，让我们添加一些人到列表中。

```
procedure TForm2.FormCreate(Sender: TObject);
var persons : TPersonList;

    function AddPerson(id : string; date : TDateTime):boolean;
    var p : TPerson;
    begin
        p := TPerson.Create(id, date);

        result := not persons.Contains(p);

        if result then
            persons.Add(p)
        else begin
            ShowMessage('list already contains person with id = ' + id);
            p.Free();
        end;
    end;
begin
    persons := TPersonList.Create();
    try
        AddPerson('1', StrToDate('01.01.2000'));
        AddPerson('2', StrToDate('01.01.2000'));
        AddPerson('3', StrToDate('01.01.2000'));
        AddPerson('2', StrToDate('01.01.2000')); // we will get message here.
    finally
        persons.Free();
    end;
end; 
```

因此，这是确定`TList`（或其后代）是否包含对象的常用方法。

# android - 日期选择器和日历中的日期格式更改

> ID：14153811
> 
> 赞同：2
> 
> 时间：2013-01-04T08:46:21.593
> 
> 标签：android, android-layout, android-intent, android-emulator

如何将`2/3/2013`格式更改为`02/03/2013 (dd/mm/yyyy)`？

```
 Calendar c1 = Calendar.getInstance();
    year = c1.get(Calendar.YEAR);
    month = c1.get(Calendar.MONTH);
    day = c1.get(Calendar.DAY_OF_MONTH);
//  formatter = new SimpleDateFormat("dd/MM/yyyy");

     public void onDateSet(DatePicker view, int selectedYear,
            int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;
            // set selected date into textview.
            searchText.setText(new StringBuilder().append(month + 1).append("/").append(day).append("/").append(year).append(" "));
            Log.i("DatePickerDialog","DatePickerDialog");
            dpResult = (DatePicker) findViewById(R.id.dpResult);
            // set selected date into datepicker also.
            dpResult.init(year, month, day, null);
            user.setSearchEntityType("ByDate");
        }       
    }; 
```

**电流输出：**

```
1/2/2013 
d/m/y 
```

**寻找：**

```
01/02/2013
dd/mm/yyyy 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T09:00:23.557

```
@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {

    int month = monthOfYear + 1;
    String formattedMonth = "" + month;
    String formattedDayOfMonth = "" + dayOfMonth;

    if(month < 10){

        formattedMonth = "0" + month;
    }
    if(dayOfMonth < 10){

        formattedDayOfMonth = "0" + dayOfMonth;
    }
    searchText.setText(formattedDayOfMonth + "/" + formattedMonth + "/" + year);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T08:53:04.213

使用[`DateFormat`](http://developer.android.com/reference/java/text/DateFormat.html)类。做这样的事情：

```
Calendar cal = Calendar.instance();
cal.set(year, month, day);
CharSequence output = DateFormat.format("MM/dd/yyyy", cal); 
```

有关更多示例，请参见[此处](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-06T10:10:24.433

使用此代码获取 dd/mm/yy 等格式。

```
int month = monthOfYear + 1;
String formattedMonth = "" + month;
String formattedDayOfMonth = "" + dayOfMonth;
String formattedYear=String.valueOf(year);

if(month < 10){

   formattedMonth = "0" + month;
}
if(dayOfMonth < 10){

   formattedDayOfMonth = "0" + dayOfMonth;
}

formattedYear=formattedYear.substring(formattedYear.length()-2);
String date=formattedDayOfMonth + "/" + formattedMonth + "/" + formattedYear;
mEDDate.setText(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T08:49:25.507

很简单，添加条件如下：

```
 if (month<10)
   month='0'+month;
 if (day<10)
   day='0'+day; 
```

# javascript - 在 jquery-function 中添加 ID 或类似的类？

> ID：14153815
> 
> 赞同：0
> 
> 时间：2013-01-04T08:47:01.837
> 
> 标签：javascript

我在同一页面上有 20 个按钮，可以使用 onClick 打开不同的图像。按钮使用相同的样式并且是 div 类。每个按钮由 2 个绝对定位按钮组成，单击时通过显示无/块来改变位置。为此，我使用 jQuery。

问题是我只希望 jQuery 函数在单击的按钮上工作，而不是同时在其他 19 个按钮上工作。名称或ID或其他解决方案可以解决这个问题吗？

这是代码：

```
$(function(){
  $('.zoom_In').click(function(){
    $(".zoom_Out").css({"display":"block"});
  });
});

$(function(){
  $('.zoom_Out').click(function(){
    $(".zoom_Out").css({"display":"none"});
  });
}); 
```

```
.links {
    float: left;
    width: 88%;
    height: auto;
    margin: 1%;
    padding: 4%;
    border: 2px solid #900;
    background: #FFF;
    cursor: pointer; 
    text-align: left;

    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
    color: #999;
}
#zoomBtn_wrap  {
    position: relative;
    float: right;
    width: 28%;
    height: auto;
    margin: 0 20% 0 0;
    padding: 0;
}
.zoom_In {
    position: absolute;
    top: 0;
    left: 0;
    width: 70%;
    height: auto;
    margin: 0;
    padding: 0;
    background-color: #CCC;
    cursor: pointer;

    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
    color: #000;
    line-height: 100%;
}
.zoom_In:hover  {
    border: 2px solid #999;
    background: #FFF;
    color: #000;
}
.zoom_Out {
    position: absolute;
    top: 0;
    left: 0;
    width: 70%;
    height: auto;
    margin: 0;
    padding: 0;
    background-color: #CCC;
    cursor: pointer;

    display: none;

    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
    color: #000;
    line-height: 100%;
}
.zoom_Out:hover  {
    border: 2px solid #999;
    background: #FFF;
    color: #000;
} 
```

```
<div class="links"> 
      <div id="zoomBtn_wrap">
          <input name="" type="button" id="" class="zoom_In" onClick="" title="" value="Show" />

           <input name="" type="button" id="" class="zoom_Out" onClick="" title="" value="Hide" />                
      </div> <!--End of zoomBtn_wrap-->
</div>

<div class="links">                
      <div id="zoomBtn_wrap">
                <input name="" type="button" id="" class="zoom_In" onClick="" title="" value="Show" />

                 <input name="" type="button" id="" class="zoom_Out" onClick="" title="" value="Hide" />                
      </div> <!--End of zoomBtn_wrap-->
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:50:12.220

使用`this`关键字：

```
$(function(){
  $('.zoom_Out').click(function(){
    $(this).css({"display":"none"});
  });
}); 
```

我认为这是您想要实现的目标。

附言

您还可以使用 jQuery 的内置显示/隐藏方法来帮助自己（编写更短的代码）。像这样：

```
$(function(){
  $('.zoom_Out').click(function(){
    $(this).hide();
  });
}); 
```

希望能帮助到你。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:51:11.960

试试这个：

```
$(function(){
  $('.zoom_In').click(function(){
    $(this).next().css({"display":"block"}); // Show the button next to the clicked button.
  });
  $('.zoom_Out').click(function(){
    $(this).css({"display":"none"}); // Hide the clicked button.
  });
}); 
```

**[工作样本](http://jsfiddle.net/nrPp6/1/)**

此外，无需将两个侦听器分配包装在单独的`$(function(){});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T08:52:19.030

您可以将 javascript 函数内联添加到您的 html 中，或者`this`以如下方式使用运算符：

```
$(function(){
  $('.zoom_In').click(function(){
    $(this).css({"display":"block"});
  });
});

$(function(){
  $('.zoom_Out').click(function(){
    $(this).css({"display":"none"});
  });
}); 
```

# python - Matplotlib axis labels: how to find out where they will be located?

> ID：14153816
> 
> 赞同：7
> 
> 时间：2013-01-04T08:47:01.830
> 
> 标签：python, matplotlib

I have written a routine to draw vertical cross sections from atmospheric model output. An example is shown below. What I would like to do, is to show two vertical axes: on the left I display presure values on a log scale, and on the right I show altitudes in km. I thought it would be nice to show the altitudes at the locations of the model levels - this is why they are irregularly spaced. All works nicely, except that the labels on the right overlap near the bottom. I found out that I can hide specific labels using `ax2.get_yticklabels()[index].set_visible(False)`. My problem is: how do I determine which labels (indices) I want to hide? I believe it should be possible to find out where the tick labels are positioned (in axis or figure coordinates). Then I could use a threshold distance as in

```
yp = -1  
for t in ax2.get_yticklabels():  
    y = t.get_position().y0   # this doesn't yield any useful bbox! 
    if y-yp < threshold:  
        t.set_visible(False)  
    else:  
        yp = y 
```

Unfortunately, I haven't found a way to get the label coordinates. Any hints?

Here is the example figure: ![Vertical cross section plot](../Images/115487e58ddde9186766d838d5f9a020.png)

And here is the complete code that does the plotting (data is a 2-D array, x are latitudes, and y are pressure values):

```
def plotZM(data, x, y, plotOpt=None):
    """Create a zonal mean contour plot of one variable
    plotOpt is a dictionary with plotting options:
    'scale_factor': multiply values with this factor before plotting
    'units': a units label for the colorbar
    'levels': use list of values as contour intervals
    'title': a title for the plot
    """
    if plotOpt is None: plotOpt = {}
    # create figure and axes
    fig = plt.figure()
    ax1 = fig.add_subplot(111)
    # scale data if requested
    scale_factor = plotOpt.get('scale_factor', 1.0)
    pdata = data * scale_factor
    # determine contour levels to be used; default: linear spacing, 20 levels
    clevs = plotOpt.get('levels', np.linspace(data.min(), data.max(), 20))
    # map contour values to colors
    norm=matplotlib.colors.BoundaryNorm(clevs, ncolors=256, clip=False)
    # draw the (filled) contours
    contour = ax1.contourf(x, y, pdata, levels=clevs, norm=norm) 
    # add a title
    title = plotOpt.get('title', 'Vertical cross section')
    ax1.set_title(title)   # optional keyword: fontsize="small"
    # add colorbar
    # Note: use of the ticks keyword forces colorbar to draw all labels
    fmt = matplotlib.ticker.FormatStrFormatter("%g")
    cbar = fig.colorbar(contour, ax=ax1, orientation='horizontal', shrink=0.8,
                        ticks=clevs, format=fmt)
    cbar.set_label(plotOpt.get('units', ''))
    for t in cbar.ax.get_xticklabels():
        t.set_fontsize("x-small")
    # change font size of x labels
    xlabels = ax1.get_xticklabels()
    for t in xlabels:
        t.set_fontsize("x-small")
    # set up y axes: log pressure labels on the left y axis, altitude labels
    # according to model levels on the right y axis
    ax1.set_ylabel("Pressure [hPa]")
    ax1.set_yscale('log')
    ax1.set_ylim(y.max(), y.min())
    subs = [1,2,5]
    print "y_max/y_min = ", y.max()/y.min()
    if y.max()/y.min() < 30.:
        subs = [1,2,3,4,5,6,7,8,9]
    loc = matplotlib.ticker.LogLocator(base=10., subs=subs)
    ax1.yaxis.set_major_locator(loc)
    fmt = matplotlib.ticker.FormatStrFormatter("%g")
    ax1.yaxis.set_major_formatter(fmt)
    ylabels = ax1.get_yticklabels()
    for t in ylabels:
        t.set_fontsize("x-small")
    # calculate altitudes from pressure values (use fixed scale height)
    z0 = 8.400    # scale height for pressure_to_altitude conversion [km]
    altitude = z0 * np.log(1015.23/y)
    # add second y axis for altitude scale
    ax2 = ax1.twinx()
    ax2.set_ylabel("Altitude [km]")
    ax2.set_ylim(altitude.min(), altitude.max())
    ax2.set_yticks(altitude)
    fmt = matplotlib.ticker.FormatStrFormatter("%6.1f")
    ax2.yaxis.set_major_formatter(fmt)
    # tweak altitude labels
    ylabels = ax2.get_yticklabels()
    for i,t in enumerate(ylabels):
        t.set_fontsize("x-small")
    # show plot
    plt.show() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:06:48.980

这是 plotZM 例程的更新版本，它将模型水平绘制到右侧的单独面板中，并为高度轴使用线性等距标记。添加了另一个选项以屏蔽低于表面压力的区域。

此代码是“缩放安全的”（即当您放大或平移绘图时，高度和压力标签会发生很好的变化，并且模型级别会不断变化）。它还包含相当多的轴和标签调整，因此可能对其他人有用，作为您可以使用 matplotlib 做什么的更复杂的示例。示例图如下所示。

```
def plotZM(data, x, y, plotOpt=None, modelLevels=None, surfacePressure=None):
    """Create a zonal mean contour plot of one variable
    plotOpt is a dictionary with plotting options:
      'scale_factor': multiply values with this factor before plotting
      'units': a units label for the colorbar
      'levels': use list of values as contour intervals
      'title': a title for the plot
    modelLevels: a list of pressure values indicating the model vertical resolution. If present,
        a small side panel will be drawn with lines for each model level
    surfacePressure: a list (dimension len(x)) of surface pressure values. If present, these will
        be used to mask out regions below the surface
    """
    # explanation of axes:
    #   ax1: primary coordinate system latitude vs. pressure (left ticks on y axis)
    #   ax2: twinned axes for altitude coordinates on right y axis
    #   axm: small side panel with shared y axis from ax2 for display of model levels
    # right y ticks and y label will be drawn on axr if modelLevels are given, else on ax2
    #   axr: pointer to "right axis", either ax2 or axm

    if plotOpt is None: plotOpt = {}
    labelFontSize = "small"
    # create figure and axes
    fig = plt.figure()
    ax1 = fig.add_subplot(111)
    # scale data if requested
    scale_factor = plotOpt.get('scale_factor', 1.0)
    pdata = data * scale_factor
    # determine contour levels to be used; default: linear spacing, 20 levels
    clevs = plotOpt.get('levels', np.linspace(data.min(), data.max(), 20))
    # map contour values to colors
    norm=matplotlib.colors.BoundaryNorm(clevs, ncolors=256, clip=False)
    # draw the (filled) contours
    contour = ax1.contourf(x, y, pdata, levels=clevs, norm=norm) 
    # mask out surface pressure if given
    if not surfacePressure is None: 
        ax1.fill_between(x, surfacePressure, surfacePressure.max(), color="white")    
    # add a title
    title = plotOpt.get('title', 'Vertical cross section')
    ax1.set_title(title)
    # add colorbar
    # Note: use of the ticks keyword forces colorbar to draw all labels
    fmt = matplotlib.ticker.FormatStrFormatter("%g")
    cbar = fig.colorbar(contour, ax=ax1, orientation='horizontal', shrink=0.8,
                        ticks=clevs, format=fmt)
    cbar.set_label(plotOpt.get('units', ''))
    for t in cbar.ax.get_xticklabels():
        t.set_fontsize(labelFontSize)
    # set up y axes: log pressure labels on the left y axis, altitude labels
    # according to model levels on the right y axis
    ax1.set_ylabel("Pressure [hPa]")
    ax1.set_yscale('log')
    ax1.set_ylim(10.*np.ceil(y.max()/10.), y.min()) # avoid truncation of 1000 hPa
    subs = [1,2,5]
    if y.max()/y.min() < 30.:
        subs = [1,2,3,4,5,6,7,8,9]
    y1loc = matplotlib.ticker.LogLocator(base=10., subs=subs)
    ax1.yaxis.set_major_locator(y1loc)
    fmt = matplotlib.ticker.FormatStrFormatter("%g")
    ax1.yaxis.set_major_formatter(fmt)
    for t in ax1.get_yticklabels():
        t.set_fontsize(labelFontSize)
    # calculate altitudes from pressure values (use fixed scale height)
    z0 = 8.400    # scale height for pressure_to_altitude conversion [km]
    altitude = z0 * np.log(1015.23/y)
    # add second y axis for altitude scale 
    ax2 = ax1.twinx()
    # change values and font size of x labels
    ax1.set_xlabel('Latitude [degrees]')
    xloc = matplotlib.ticker.FixedLocator(np.arange(-90.,91.,30.))
    ax1.xaxis.set_major_locator(xloc)
    for t in ax1.get_xticklabels():
        t.set_fontsize(labelFontSize)
    # draw horizontal lines to the right to indicate model levels
    if not modelLevels is None:
        pos = ax1.get_position()
        axm = fig.add_axes([pos.x1,pos.y0,0.02,pos.height], sharey=ax2)
        axm.set_xlim(0., 1.)
        axm.xaxis.set_visible(False)
        modelLev = axm.hlines(altitude, 0., 1., color='0.5')
        axr = axm     # specify y axis for right tick marks and labels
        # turn off tick labels of ax2
        for t in ax2.get_yticklabels():
            t.set_visible(False)
        label_xcoor = 3.7
    else:
        axr = ax2
        label_xcoor = 1.05
    axr.set_ylabel("Altitude [km]")
    axr.yaxis.set_label_coords(label_xcoor, 0.5)
    axr.set_ylim(altitude.min(), altitude.max())
    yrloc = matplotlib.ticker.MaxNLocator(steps=[1,2,5,10])
    axr.yaxis.set_major_locator(yrloc)
    axr.yaxis.tick_right()
    for t in axr.yaxis.get_majorticklines():
        t.set_visible(False)
    for t in axr.get_yticklabels():
        t.set_fontsize(labelFontSize)
    # show plot
    plt.show() 
```

![带有修改代码的垂直横截面图](../Images/72744ac9264c59907e1a145c9193c955.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:22:19.840

I'd rather not do such things. This might make problems, e.g., when resizing the plot window or when changing dpi of output images. And it will definitely look awkward.

You should either

1.  set less ticks on ax2 (and, in my oppinion, they should be on a linear scale for altitude
2.  Use a predefined (or even custom) Locator from matplotlib. I like AutoLocator and MaxNLocator, just try which one gives you the nicest results.

If you need help with this, just ask.

# java - 连接到远程站点需要身份验证

> ID：14153819
> 
> 赞同：0
> 
> 时间：2013-01-04T08:47:23.103
> 
> 标签：java, authentication, httpurlconnection

我想连接一个网站并用 Java 下载一些数据，但是它需要身份验证。我在网上搜索，发现我应该发送`user:pass`到该站点。我正在这样做但是我无法登录你能给我一个提示吗！哪里不对？

```
URL url = new URL("https://www.quora.com/");
URLConnection conn = url.openConnection();

conn.setRequestProperty(
    "User-Agent",
    "Mozilla/5.0 (X11; U; Linux x86_64; en-GB; rv:1.8.1.6) Gecko/20070723  Iceweasel/2.0.0.6 (Debian-2.0.0.6-0etch1)"
);

String userpass = "email@xyz.com" + ":" + "password";
String basicAuth = "Basic " + javax.xml.bind.DatatypeConverter.printBase64Binary(userpass.getBytes());

conn.setRequestProperty ("Authorization", basicAuth);

BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:30:03.110

刚刚访问了[https://www.quora.com/](https://www.quora.com/)，它看起来不像是基本身份验证。您需要提交一个 HTTP 类型为 POST 的表单，变量名称为“email”和“password”（您可以查看站点的源代码并找出预期的参数）。

看起来像 AJAX 机制用于执行与站点的身份验证。您将需要找出提交此请求的页面（异步或其他方式）。

毕竟，网站的安全连接 (https) 可能不允许您执行所需的操作（取决于服务器的 SSL 配置）

# php - 在 processwire 中使用 php 引导选项卡

> ID：14153824
> 
> 赞同：0
> 
> 时间：2013-01-04T08:47:44.193
> 
> 标签：php

嗨，我是 php 新手，我坚持这一点......我使用带有 processwire 的 boostrap 框架

```
 <ul class="nav nav-tabs" id="myTab">

        <?php foreach ($page->children as $item){
            echo "<li> <a href='{$item->name}'> {$item->title} </a></li>";
        }?>
    </ul>
    <div class="tab-content">
        <?php foreach ($page->children as $item){
            echo "<div class='tab-pane' id='{$item->name}'>{$item->body}</div>";
            }?>
    </div> 
```

此代码仅显示选项卡标题而不显示正文，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:38:50.847

我为你创建了一个 JSfiddle。[http://jsfiddle.net/jirilmongeorge/Ue8nG/](http://jsfiddle.net/jirilmongeorge/Ue8nG/)

这演示了您的问题的解决方案（html + js + css）。

*html:*

```
<ul class="nav nav-tabs" id="myTab">
    <li> <a href='itemname1' class='active'> item1title</a></li>
    <li> <a href='itemname2'> item2title</a></li>
    <li> <a href='itemname3'> item3title</a></li>
</ul>
<div class="tab-content">
    <div class='tab-pane hidden' id='itemname1'> hello itemname1  <br/> body</div>
    <div class='tab-pane hidden' id='itemname2'>heyy itemname2 <br/> body</div>
    <div class='tab-pane hidden' id='itemname3'>now itemname3  <br/> body</div>
</div> 
```

*Javascript：*

$(文档).ready(函数(){

```
$('#myTab li a').click(function(){
    var tabContentDivId = $(this).attr('href');

    //highlight cilcked 'a' tag
    $('#myTab li a').each(function(){
        $(this).removeClass('active');
    });
    $(this).addClass('active');

    //hide all content divs
    $('div.tab-pane').each(function(){
        $(this).addClass('hidden');
    });

    //display content for current tab
    $('#' + tabContentDivId).removeClass('hidden');

    return false;
});

//Select first li as default
$('#myTab li a:first').click(); 
```

});

*CSS：*

```
.hidden {
    display:none;   
}
.nav {
}
.nav-tabs {
    list-style-type: circle;
}
.nav-tabs li a{
    cursor:pointer;
    text-decoration:none;
    margin:20px;    
}
. tab-content {
  float:left
}
.tab-content .tab-pane {
    border: 1px solid #0000ff;
    margin:20px;
   padding:10px;
}
a.active
 {
    color:green;
    font-weight:bold;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T12:39:27.007

对于 bootsrap 3.0，你需要做..

```
 <ul id="myTab" class="nav nav-tabs">
   //your loop to retrieve tab names start
    <li class="active"> //active is aplicable to only one tab you want to show selected
   <a href="//tab path if required" data-toggle=" //tab name where
    to switch"> //tab name</a>
    </li>

    // loop for tab name close here
    </ul>

   // body contents of all tabs start here
   <div id="myTabContent" class="tab-content">    
    //your loop to retrieve tab body start

    <div class="tab-pane fade in active" id="//tab name ">

    //tab body 

    </div>
   // loop to tab body close here

 </div> 
```

或者试试这个[jsfiddle](http://jsfiddle.net/sanknow/W3XFJ/)

将活动类添加到第一个结果..

只需声明计数器

```
 // your loop start here
 <?php $i=1; ?>
 <ul id="myTab" class="nav nav-tabs">
   //your loop to retrieve tab names start
    <li class="<?php if($i==1){echo 'active';} ?>">
   <a href="//tab path if required" data-toggle=" //tab name where
    to switch"> //tab name</a>
    </li>
     <?php $i++; ?>
    // loop for tab name close here
    //PHP CLOSE ?>
    </ul> 
```

# plsql - 如何在选择语句的“NOT IN”子句中使用逗号分隔的字符串列表作为 pl/sql 存储的函数参数

> ID：14153827
> 
> 赞同：0
> 
> 时间：2013-01-04T08:48:17.573
> 
> 标签：plsql

我有一个逗号分隔的字符串列表（来自用户输入），我想将此列表用作嵌套 sql 块中的 pl/sql 存储函数中的参数，使用“not in where 子句”。

我找不到一种优雅的方式让它工作......

这就是我的想法：

```
CREATE TABLE example ( somevalue VARCHAR(36) NOT NULL);
--
INSERT INTO example VALUES ('value1');
INSERT INTO example VALUES ('value2');
INSERT INTO example VALUES ('value3');
--
SELECT * FROM example;
--
CREATE OR REPLACE
  FUNCTION resultmaker(
      ignoreList IN VARCHAR2)
    RETURN VARCHAR2
  IS
    result VARCHAR2(4000);
  BEGIN
    result  := 'Here is my calculated result, using ignorelist=' || ignoreList || ':'     || CHR(10);
    FOR rec IN
    (SELECT DISTINCT somevalue
    FROM example
    WHERE somevalue NOT IN resultmaker.ignoreList -- here's my issue, the NOT IN     clause using the parameter value
    )
    LOOP
      result := result || 'not in ignorelist: ' || rec.somevalue || CHR(10);
    END LOOP;
    result := result || '.' || CHR(10);
    --
    RETURN result;
  END resultmaker;
  /
--
-- simulate function call with user input 'value2, value3'
SELECT resultmaker('value2, value3') FROM dual; -- doesn't work  
--
DROP TABLE example;
DROP FUNCTION resultmaker; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-14T15:39:59.150

只需传递参数 like`'"value2","value3"'`并让您的语句将双引号替换为单引号 like `REPLACE(@Param1,'"','''')`。

调用函数： `SELECT * FROM Function1('"value2","value3"')`

内部功能： `NOT IN REPLACE(@Param1,'"','''')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:10:38.857

这是我对上面的原始问题使用动态 sql 的解决方案：

```
CREATE TABLE example ( somevalue VARCHAR(36) NOT NULL);
--
INSERT INTO example VALUES ('value1');
INSERT INTO example VALUES ('value2');
INSERT INTO example VALUES ('value3');
--
SELECT * FROM example;
--
CREATE OR REPLACE
  FUNCTION resultmaker(
      ignoreList IN VARCHAR2)
    RETURN VARCHAR2
  IS
    result VARCHAR2(4000);
    example_cursor sys_refcursor;
    rec example.somevalue%type;
  BEGIN
    result := 'Here is my calculated result, using ignorelist=' || ignoreList || ':' || CHR(10);
    OPEN example_cursor FOR ( 'SELECT DISTINCT somevalue FROM example WHERE somevalue NOT IN (' || ignoreList || ')' );
    FETCH example_cursor INTO rec;
    WHILE example_cursor%found
    LOOP
      result := result || 'not in ignorelist: ' || rec || CHR(10);
      FETCH example_cursor INTO rec;
    END LOOP;
    CLOSE example_cursor;
    result := result || '.' || CHR(10);
    --
    RETURN result;
  END resultmaker; 
/
--
-- simulate function call with user input 'value2', 'value3'
SELECT resultmaker('''value2'', ''value3''') FROM dual;
--
DROP TABLE example;
DROP FUNCTION resultmaker; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:29:59.693

经典且可能正确的解决方案是使用 PL/SQL 表将其作为参数传递...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T13:23:08.963

在每种情况下，您都应该解析该输入。由于 PL/SQL 中没有内置的字符串标记器（至少我找不到它）您可能想查看这些选项，

[http://blog.tanelpoder.com/2007/06/20/my-version-of-sql-string-to-table-tokenizer/](http://blog.tanelpoder.com/2007/06/20/my-version-of-sql-string-to-table-tokenizer/)

[PL/SQL 是否有与 Java 等效的 StringTokenizer？](https://stackoverflow.com/questions/1520733/does-pl-sql-have-an-equivalent-stringtokenizer-to-javas)

解析字符串后，您可以创建一个新字符串，如：

```
not_in_statement varchar2(1000);
CURSOR c1 IS select token from tokenized_strings_table;
BEGIN
    not_in_statement := '('
    FOR rec IN c1 LOOP
        not_in_statement := not_in_statement || '''||rec.token||'''||','
    END LOOP
    not_in_statement := not_in_statement||')'
END

SELECT DISTINCT somevalue
FROM example
WHERE somevalue NOT IN not_in_statement 
```

您可能需要将其设为动态 SQL，我没有时间尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-05T05:18:48.583

asktom.oracle.com 上有一些很好的解决方案，用于获取一串值并为它们动态创建 IN 子句：

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:210612357425](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:210612357425)

# android - 设备 ID 与开发设备 ID？

> ID：14153829
> 
> 赞同：1
> 
> 时间：2013-01-04T08:48:29.537
> 
> 标签：android

设备 ID 和开发设备 ID 有什么区别？请注意，设备 ID 不同于 Android ID 和电话设备 ID。另外，如何以编程方式获取设备 ID 和开发设备 ID 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:45:40.280

**设备 ID**是指序列号——由 adb 创建的字符串，用于通过其控制台端口号唯一标识模拟器/设备实例。序列号的格式是-。这是一个示例序列号：emulator-5554

**Android 开发设备 ID**是您的应用可以链接到手机的另一种方式。大多数应用程序都与您的帐户相关联，但有些应用程序，尤其是那些您无法通过市场支付的应用程序，使用了设备 ID，因此您无法购买应用程序然后将其安装在多个设备上。

以前只是隐藏，说不定决赛出来后，又会被隐藏。

欲了解更多信息 - [http://androidforums.com/motorola-droid-bionic/584694-ics-development-device-id.html](http://androidforums.com/motorola-droid-bionic/584694-ics-development-device-id.html)

**Settings.Secure#ANDROID_ID**将 Android ID 作为唯一的 64 位十六进制字符串返回。

```
import android.provider.Settings.Secure;

private String android_id = Secure.getString(getContext().getContentResolver(),
                                                        Secure.ANDROID_ID); 
```

# c# - 通过 C# 导入 Python 库？

> ID：14153830
> 
> 赞同：1
> 
> 时间：2013-01-04T08:48:29.717
> 
> 标签：c#, python, variables, encoding, python-module

所以我是 Python 新手，我在 Visual Studio 中使用 IronPython。

所以在我的 C# 项目中，我调用 Python 脚本来执行一些任务。现在我在一家更大的公司工作，所以很多文件路径等都是不同的。而且我想知道是否可以将 Python 文件传递​​给路径，然后从该路径导入模块（例如 urlib）。

因此，在使用 IronPython 的 C# 中，可以使用以下命令执行 Python 脚本

```
var ipy = Python.CreateRuntime();
dynamic PYthon_Script = ipy.UseFile("test.py"); 
```

在我的 Python SCript 中，我得到了以下代码：

```
import sys
path = "C:\Program Files (x86)\IronPython 2.7\Lib"
sys.path.append(path)
import urllib
import httplib
... 
```

所以我想知道是否可以为变量路径传递一个参数，所以 sys.path.append(path) 将随着给定的参数而改变并且库被正确导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:00:52.297

您只想将参数传递给脚本？当然，这很容易。

做到这一点的主要方法是使用`sys.argv`：

```
import sys
path = sys.argv[1]
sys.path.append(path)
import urllib
import httplib 
```

然后不要这样做：

```
py.exe myscript.py 
```

你来做这件事：

```
py.exe myscript.py "C:\Program Files (x86)\IronPython 2.7\Lib" 
```

如果您直接从 .NET 启动程序中运行它，您也可以动态插入变量：

```
PYthon_Script.SetVariable("path", "C:\Program Files (x86)\IronPython 2.7\Lib") 
```

然后，您可以在脚本中使用该变量。

或者您甚至可以`sys.path`从启动器中修改自身。有关详细信息，请参阅`Runtime`文档。

如果要添加多个路径，只需更改以下两行：

```
paths = sys.argv[1:]
sys.path.extend(paths) 
```

如果你想要一些东西在你的环境中存在，所以你不必每次都传递它，这就是环境变量的用途。

实际上有一个名为的标准环境变量`IRONPYTHONPATH`应该可以工作而无需您做任何事情。我自己从未使用过它，但如果它有效，您根本不需要在代码中做任何明确的事情。只需将它设置在您的`cmd.exe`外壳、控制面板、您`myscript.py`要从中启动的 C# 程序中，无论是什么合适的。[这个答案](https://stackoverflow.com/questions/3701646/how-to-add-to-the-pythonpath-in-windows-7)有前两个的例子。（他们设置的是`PYTHONPATH`，它会影响 CPython，而不是`IRONPYTHONPATH`，它会影响 IronPython，但应该很明显要改变什么。）

如果这不起作用，您可以手动执行相同的操作：

```
import os
import sys
path = os.environ['MY_IRONPYTHON_EXTRA_PATH']
sys.path.append(path)
import urllib
import httplib 
```

现在，您可以设置该`MY_IRONPYTHON_EXTRA_PATH`环境变量而不是`IRONPYTHON_PATH`.

在这里，因为你只是一个字符串而不是一个列表，如果你想指定多个路径，你需要添加一个分隔符。Windows 上的标准路径分隔符是分号。所以：

```
paths = os.environ['MY_IRONPYTHON_EXTRA_PATH'].split(';')
sys.path.extend(paths) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:38:44.560

我在 [TestMethod] 项目中找到了一种方法，无需控制台 I/O，仅使用 C# 命令。

C#代码如下：

```
IDictionary<string, object> options = new Dictionary<string, object>();
options["Arguments"] = new [] {"C:\Program Files (x86)\IronPython 2.7\Lib", "bar"};

var ipy = Python.CreateRuntime(options);
dynamic Python_File = ipy.UseFile("test.py");

Python_File.MethodCall("test"); 
```

所以基本上我提交带有我想在我的python文件中定义的库路径的字典。

因此 PYthon 脚本如下所示：

```
#!/usr/bin/python

import sys
path = sys.argv[0]  #1 argument given is a string for the path
sys.path.append(path)
import httplib
import urllib
import string

def MethodCall(OutputString):
    print Outputstring 
```

因此，现在从 C# 中的方法调用变得更加容易，并且传递的参数保持不变。此外，使用此代码，您可以获得 Python 文件的自定义库文件夹，如果您在具有许多不同 PC 的网络中工作，这非常好

# ios - 了解 iOS 应用程序是否已从 Flash 转换

> ID：14153834
> 
> 赞同：0
> 
> 时间：2013-01-04T08:48:54.007
> 
> 标签：ios, air, adobe

有没有办法确定 iOS 应用程序（ipa 文件）是否已由 Adob​​e Air Packaging 从 Flash (swf) 转换？

如果我检查它的二进制文件等有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:38:53.860

如果您解压缩使用 AIR 创建的 IPA 并查看其 Info.plist，您将看到一个名为 CTNamespaceURI 的键，其字符串值为[http://ns.adobe.com/air/application/3.2](http://ns.adobe.com/air/application/3.2)（或 /3.3，/ 3.4...)

# c - 获取最大消息和最大消息大小的内核消息队列大小的默认值

> ID：14153835
> 
> 赞同：1
> 
> 时间：2013-01-04T08:48:56.293
> 
> 标签：c, message-queue

```
gcc 4.7.2 c89 
```

你好，

我正在使用 posix 消息队列：mq_create、mq_send、mq_receive 等。

我试图找出内核支持的默认消息大小（attr.msgsize）和最大消息（attr.maxmsg）。

目前我已经这样做了自己设置默认值：

```
#define MQ_MAXMSGS_DEFAULT 10
#define MQ_MSGSIZE_DEFAULT 8192 
```

当我在命令行上从用户那里获得输入时，如果用户输入的值超出这些默认值，我将使用它们来设置默认值：

```
long msg_size = atol(optarg);
attr->mq_msgsize = 
    (msg_size > MQ_MSGSIZE_DEFAULT ? MQ_MSGSIZE_DEFAULT : msg_size); 
```

但是，这不是很便携，因为我已经硬编码了默认值，而在不同的平台上可能会有所不同。

是否有可用于获取默认值的系统调用？

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:03:34.927

您可以通过从 proc 文件系统 /proc/sys/fs/mqueue/msgsize_max 读取来获取该值

# mysql - DATEDIFF() 或 BETWEEN 用于 SQL 查询中的日期范围

> ID：14153837
> 
> 赞同：5
> 
> 时间：2013-01-04T08:48:58.023
> 
> 标签：mysql, sql, sql-server, datediff

我最近被告知`BETWEEN`在 SQL 中使用该方法有些不可靠，因此我应该使用`DATEDIFF()`. 但是，另一位程序员告诉我情况并非如此，`BETWEEN`只要日期格式正确，该方法在所有情况下都可以出色地工作。

请有人可以通过说明哪种方法更好以及为什么来解决这场辩论？

目前我的日期范围 SQL 如下所示：

```
DATEDIFF(d,'01-Jan-1970',SIH.[Something_Date]) >= 0 AND DATEDIFF(d,'01-Jan-2013',SIH.[Something_Date]) <= 0 
```

但是，如果我能确定它是可靠的，我宁愿这样写：

```
SIH.[Something_Date] BETWEEN '01-Jan-1970' AND '01-Jan-2013' 
```

**在这种特殊情况下，我使用的是 MsSQL，但是，我已经标记了 MySQL，因为我想知道这是否也适用于此**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T08:59:26.723

您的两个查询不等价。该`datediff`版本将包括所有值，`01-Jan-2013`而与时间无关，而介于版本之间的版本将仅包括`01-Jan-2013`time 所在的行`00:00:00`。

如果您检查范围并且不对列进行任何计算，则您的查询将能够使用索引`Something_Date`并同时包含来自`01-Jan-2013`任何时间部分的所有值。

```
where
  SIH.[Something_Date] >= '19700101' and
  SIH.[Something_Date] < '20130102' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-28T05:31:30.783

避免 BETWEEN 的原因是，如果您的日期值可以包含时间组件，则无法正确使用它。如果包括时间，则与上限的比较必须使用严格小于比较，排除 BETWEEN。

另一方面，如果您知道日期值从不包含时间组件，或者您有删除时间组件的便捷方法，那么我更喜欢使用 BETWEEN，因为它看起来更具可读性。

在 Oracle SQL 中，我可以使用 TRUNC 函数来删除时间组件（它也可以截断为 'MONTH' 或 'YEAR'）。

所以我可以写：

```
where TRUNC(date_col) between '01-JAN-2021' and '31-DEC-2021' 
```

并确保测试不会错过 31 日也有时间成分的日期。

我的印象是`TRUNC`（和`ROUND`）的这种用法可能是 Oracle 独有的。我不知道 mySQL 或 T-SQL 中是否有等价物。（我似乎记得必须使用`datediff`技巧来完成 TRUNC 所做的事情。

如果没有`TRUNC`（或等效），您必须使用：

```
where '01-JAN-2021' <= date_col and date_col < '01-JAN-2022' 
```

请注意，与上限的比较必须严格小于。

这更短，可读性更强，可能更有效，并且可以保证工作。

但我还是更喜欢使用`TRUNC`and`BETWEEN`因为逻辑更清晰。（在我做对之前，我以两种不同的方式搞砸了第二个例子）。

我怀疑效率是否存在很大差异，即使在大多数情况下，这也可能不是问题。我认为可读性比效率更重要（大多数时候）。

但当然，正确性胜过一切。因此，如果您没有方便的方法来删除时间分量或必须包含时间分量，那么您就无法`BETWEEN`准确地测试`datetime`值。

# java - 无法将时间写入数据库，只能写入日期。时间被忽略

> ID：14153843
> 
> 赞同：1
> 
> 时间：2013-01-04T08:49:19.457
> 
> 标签：java, oracle, jdbc

我正在尝试插入日期和时间，但只有日期通过。当我检查数据库时，时间总是 00:00

```
public void suspendPart(String partId, String startDate,
    String reasonCode, String endDate) throws DAOException {
    System.out.println("original date: "+startDate); //output: original date: 04/01/2013 08:42
    SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy HH:mm");
    Map<String, Object> params = new HashMap<String, Object>();
    params.put("p_id", Integer.parseInt(partId));
    Date dateTest = DAOUtils.parseDate(startDate, format);
    System.out.println("date after format " +dateTest); // output: date after format Fri Jan 04 08:42:00 GMT 2013
    params.put("p_start_date", dateTest);
    parts_package_add_part.execute(params);
} 
```

我设法使它工作一次，但我不知道如何。当我检查数据库并看到有适当时间的一行时，我已经弄乱了代码，所以它丢失了。

谁能看到我做错了什么？

编辑：sp声明

```
parts_package_add_part = SpringStoredProcedure
                .getStoredProcedureCompiled(getJdbcTemplate(), false,
                        "parts_package.add_part",
                        new SqlParameter("part_id", OracleTypes.NUMBER),
                        new SqlParameter("p_start_date", OracleTypes.DATE)); 
```

编辑：我无法更改数据库。至少不容易。我需要让 PLSQL 开发人员来做这件事，这需要几天时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:59:51.057

我最近遇到了一个类似的问题。我的解决方案是在数据库表中使用 TIMESTAMP 作为 oracle 数据类型，在 java 中使用 java.sql.Timestamp 类。这个搭配不错...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:00:19.080

使用时间戳可能会有所帮助。用于将日期存储在数据库中的数据类型是什么？可能是日期类型。如果您将其转换为 Timestame/DateTime 它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:15:44.643

嗨，尝试在您的数据库表中使用时间戳数据类型，并从您的 java 代码中使用 java.sql.Timestamp，它将为您存储数据和时间谢谢

# java - Java List 包含方法

> ID：14153848
> 
> 赞同：-6
> 
> 时间：2013-01-04T08:49:25.247
> 
> 标签：java, algorithm, list, arraylist

我正在搜索 java ArrayList 源代码，以查看将列表转换为数组时会发生什么。我遇到了我使用过的方法 contains 并且知道，我对该方法的第一反应是， contains 方法使用哪种算法。

```
 public boolean contains(Object o) {
   return indexOf(o) >= 0;
 } 

 public int indexOf(Object o) {
  if (o == null) {
     for (int i = 0; i < size; i++)
        if (elementData[i]==null)
          return i;
  } else {
     for (int i = 0; i < size; i++)
       if (o.equals(elementData[i]))
          return i;
    }
    return -1;
  } 
```

上面从源代码中提取的代码显示 ArrayLists 正在使用顺序搜索。我看到很多人自己都使用 contains 方法。我认为这是一个很好的例子，人们需要了解算法和 Java 集合。当您坐在一个包含大量项目的列表中并且每次使用应用程序时都调用 contains 方法时，它可能会成为一个问题。

我能想到的改进之一是使用二分搜索。仅当项目已排序时。因此，您需要在从数据库添加/查询项目时订购项目，或者在启动应用程序时不使用 db 订单。

是为特定场景使用不同的集合更好，还是使用其中一个 util 类搜索 ArrayList？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T08:54:54.257

不同的容器提供不同的性能保证和不同的时空权衡。

因此，我的建议是：

1.  学习数据结构；
2.  研究您正在使用的容器库。

这将帮助您就使用哪个容器以及如何最好地使用它做出明智的选择。

# magento - 在 magento 中将类别显示为顶部导航菜单

> ID：14153854
> 
> 赞同：2
> 
> 时间：2013-01-04T08:49:59.023
> 
> 标签：magento

嗨，我是magento的新手。我创建了一个名为“计算机”的根类别，并添加了两个子类别，即鼠标和 HDD。我想在标题部分将根类别显示为 - 计算机，然后将鼠标悬停在子类别鼠标上，HDD 将显示等等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T08:54:31.737

您需要将顶级类别直接放在根类别下方，以便显示它们。

下面的屏幕截图显示了一个根类别（在前端不可见），下面直接列出了 4 个顶级类别。正是这些将/可以在主导航中可见。

![在此处输入图像描述](../Images/ed390e3936fe7adce9c7b214c496917a.png)

此外，确保该类别处于活动状态并且“包括在导航菜单中”设置为“是”。这可以在类别设置中“常规信息”选项卡的底部找到。

最后，确保您使用的根类别已分配给正确的商店：`System > Manage Stores`

# perl - 在文件中查找特定字符串并计算使用 perl 重复的次数

> ID：14153856
> 
> 赞同：0
> 
> 时间：2013-01-04T08:50:03.970
> 
> 标签：perl

我有一个长文件说 10000 行。

那是同一组重复的数据，就像 10 行一样，接下来的 10 行将是相同的。

我想在该文件中查找说“ObjectName”字符串并计算它，该文件中出现了多少次。

任何人都可以发布详细的代码。我是 Perl 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T04:11:39.953

这是另一个选项，它也解决了您关于在整个目录中搜索的评论：

```
#!/usr/bin/env perl

use warnings;
use strict;

my $dir   = '.';
my $count = 0;
my $find  = 'ObjectName';

for my $file (<$dir/*.txt>) {
    open my $fh, '<', $file or die $!;

    while (<$fh>) {
        $count += /\Q$find\E/g;
    }

    close $fh;
}

print $count; 
```

`glob`表示的将`<$dir/*.txt>`非递归地获取目录中所有文本文件的名称`$dir`。如果您想要所有文件，请将其更改为 `<$dir/*>`. 每个文件都是`open`逐行编辑和读取的。正则表达式`/\Q$find\E/g`全局匹配`$find`每一行的内容。该`\Q ... \E`符号会转义您要查找的字符串中的任何元字符，否则这些字符可能会干扰匹配。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T08:57:30.407

使用 Perl：

```
perl -ne '$x+=s/objname//g;END{print $x,"\n";}' file 
```

**更新**：由于 OP 想要使用处理程序的解决方案：

```
#!/usr/bin/perl

use warnings;
use strict;    

open my $fh , '<' , 'f.txt' or die 'Cannot open file';

my $x=0;
while (<$fh>){
        chomp;
        $x+=s/objname//g;
}

close $fh;

print "$x"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T08:53:03.740

这可能是一个单行`bash`

```
grep "ObjectName " <filename> | wc -l 
```

# iphone - 加速度计更新间隔不准确

> ID：14153860
> 
> 赞同：0
> 
> 时间：2013-01-04T08:50:38.680
> 
> 标签：iphone, ios, accelerometer, core-motion

我正在使用 CoreMotion API，我想每 10 毫秒（100 赫兹）保存一次加速度计的值。到目前为止我获得的更新间隔并不准确。这是我得到的更新间隔示例（以秒为单位）：

```
0.010414999997
0.0105919999769
0.0117060000193
0.0198359999922
0.00989700001082
0.0100809999858
0.0100519999978
0.0106810000143
0.010420000006
0.0107459999854
0.0105899999908
0.0105130000156
0.0104829999909
0.0107439999992
0.010391000018
0.0105859999894
0.0102320000005
0.010134000011
0.0101929999946
0.010666999995
0.00996399999713
0.0123709999898
0.0181950000115
0.0107940000016
0.00988500000676
0.0101469999936
0.0103529999906 
```

如您所见，有些值高于 10 毫秒。
更多信息：
- Xcode 3.2.6 / iOS4.3 / armv7
- 在 iPhone4 iOS5.1 和 iPodTouch4 iOS4.3.3 上测试
- 源代码：

```
-(void) viewDidLoad {
    started = NO;
    motionManager = [[CMMotionManager alloc] init];
    if ([motionManager isAccelerometerAvailable]) {
        motionManager.accelerometerUpdateInterval = 0.01; //100Hz
        motionQueue = [[NSOperationQueue alloc] init];
        [motionQueue setMaxConcurrentOperationCount:1]; // Serial operation queue
     } else {
         NSLog(@"Accelerometer is not available!\n");
     }
     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     NSMutableString *documentsDirectory = [[NSMutableString alloc] initWithString:[paths objectAtIndex:0]];
     path = [[NSMutableString alloc] init];
     [path setString:[NSString stringWithFormat:@"%@/timestamp.cap", documentsDirectory]];
    NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager removeItemAtPath:path error:NULL];
    [fileManager createFileAtPath:path contents:nil attributes:nil];
}

- (IBAction) startStopButton:(id) sender {
    if(!started) {
        started = YES;
        [sender setTitle:@"Stop" forState:UIControlStateNormal];
        CMAccelerometerHandler dataHandler = ^(CMAccelerometerData *accelerometerData, NSError *error) {
            NSString *content = [NSString stringWithFormat:@"%f\n", accelerometerData.timestamp];
            NSFileHandle *fh = [NSFileHandle fileHandleForWritingAtPath:path];
            [fh seekToEndOfFile];
            [fh writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
            [fh closeFile];
        };        
        [motionManager startAccelerometerUpdatesToQueue:motionQueue withHandler:dataHandler];
    } else {
        started = NO;
        [motionManager stopAccelerometerUpdates];
        [motionQueue waitUntilAllOperationsAreFinished];
        [sender setTitle:@"Start" forState:UIControlStateNormal];
    }
} 
```

预先感谢您的回答。

# javascript - 理解 Ember 中控制器和路由的关系

> ID：14153863
> 
> 赞同：7
> 
> 时间：2013-01-04T08:50:49.203
> 
> 标签：javascript, ember.js

我在理解 Ember 应用程序中控制器和路由之间的概念关系时遇到了一些麻烦。

我已经开始了一个非常简单的尖峰测试来评估 Ember，我越深入，我越是看到我的路线充满了我应该通过的应该是控制器的责任，例如动作，连接模型，并最终分派到视图以呈现模板。

控制器都是空的，似乎只是一些自动映射要求的占位符。

我是否在这里遗漏了一个基本的东西 - 从 Rails 的角度来看，并将“rails 方式”应用（可能是错误的）Ember 我希望我的路由定义由 URL 表示的状态，这将映射到控制器“动作”。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T13:34:55.413

模型类处理对象及其状态，而控制器处理应用程序本身的状态。

一个非常简单的用例可能是表单有两种状态：readonlyMode 和 modifyMode。这显然不属于定义实际对象的模型。它只是您的应用程序的一种状态。

如果控制器说状态是 readonlyMode，视图会将所有输入字段呈现为禁用。modifyMode 则相反。

但我同意决定把它放在哪里并不总是那么容易。最后，MVC 是关于概念的。不得不将其放入某种规则中，我会说：

*   代表持久数据的所有内容（存储在某种存储/数据库中）通常是模型的一部分。
*   所有有助于使您的应用程序有状态的东西 => 控制器。

# freebase - 是否有 Freebase 类型的分层表示？

> ID：14153865
> 
> 赞同：5
> 
> 时间：2013-01-04T08:50:51.810
> 
> 标签：freebase, mql

例如，如果某个主题（例如：德克萨斯州）的类型是 /location/citytown，我还看到有一个类型“/location/location”附加到同一主题。另外，这里的主题是城市或城镇的名称，它也默认是一个大致的位置，对吧？那么，如果一个主题具有 /location/citytown 类型，那么它是否会默认将 /location/location 也作为与同一主题关联的类型？

总而言之，Freebase 是否具有类型的分层表示，以某种方式让我们理解如果某物是 /location/citytown，那么它也是 /location/location，其他情况下也是如此？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:28:56.997

没有这样的分层表示，但是类型有一个`/freebase/type_hints/included_types`属性，它指定了当类型被断言时*Freebase Web 客户端*将自动包含的类型。[您可以在 Web 客户端](http://dev.freebase.com/location/citytown)中查看这些列表或使用[MQL 查询](http://tinyurl.com/a8n8hc5)获取它们。

这里要注意的重要一点是，这些只是提示：没有强制执行 a`/location/citytown`必须是 a的事实`/location/location`，并且只有 Web 客户端会自动添加包含的类型 - 如果您通过任何其他方式创建主题，您将必须自己添加包含的类型。

# iphone - 我的应用因为 Passkit 框架而被拒绝

> ID：14153866
> 
> 赞同：2
> 
> 时间：2013-01-04T08:50:51.893
> 
> 标签：iphone, app-store, appstore-approval, passbook

所以昨天我收到了一封来自 Apple 的电子邮件，指出：“您的应用程序将 Passbook Pass 用于不相关的功能，这不是 Passbook Pass 的批准。请修改您的应用程序以删除 Passbook Pass 或修改 Pass 以符合Passbook Pass 的批准用途。”

但我没有在任何地方使用过 Pass，显然我已经与确实使用的广告网络集成。请建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:53:23.237

我会亲自联系广告网络，询问他们之前是否遇到过这个问题，以及其他开发者如何在应用商店发布的应用中使用他们的广告网络。或更改广告网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:44:07.707

我提出了拒绝上诉，我的应用获得了批准。谢谢大家的帮助！！

# oracle - Oracle11g 中的自动分区

> ID：14153868
> 
> 赞同：2
> 
> 时间：2013-01-04T08:51:00.110
> 
> 标签：oracle, oracle11g, database-partitioning

我有一张包含大量数据的表格。我需要每天自动进行分区。我需要分区的名称是 sysdate 的日期。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:14:23.123

当前 (11gR2) 无法为间隔分区表中的自动生成分区指定名称。请参阅有关[间隔分区的常见问题 [ID 1479115.1]](https://support.oracle.com/epmos/faces/DocumentDisplay?id=1479115.1)（需要 Oracle 支持帐户）：

> **自动创建的间隔分区的名称是什么？**
> 
> [...] 目前无法为分区名称指定掩码或模板，但系统生成的名称可以重命名 [...]

您还受限于必须为`DATE`or类型的分区键列`NUMBER`，以及其他一些内容（请参阅该注释）。

您可以按照[创建分区](http://docs.oracle.com/cd/E18283_01/server.112/e16541/part_admin001.htm#BAJHFFBE)文档中的示例获取语法：

```
create table foo (date_created date, ...)
  partition by range(date_created)
  interval(numtodsinterval(1, 'DAY'))
  (partition one values less than (to_date('01012013', 'DDMMYYYY'))); 
```

使用上述方法，每当您插入具有今年或以后日期值的行时，都会创建一个新分区。**不会**为 2013 年之前的日期创建新分区。

要解决分区名称问题（如果有必要），您可以根据`HIGH_VALUE`in重命名分区`USER_TAB_PARTITIONS`，尽管这听起来不太好。
另一种选择是根本不重命名它们并在要查询特定分区时使用此语法：

```
select *
from foo
partition for (<the day you're interested in>); 
```

例如，参见：[Oracle 间隔分区技巧](http://www.dba-oracle.com/t_interval_partitioning.htm)。

# regex - Coldfusion 替换 "&" 但不是 htmlspecialchars

> ID：14153871
> 
> 赞同：5
> 
> 时间：2013-01-04T08:51:04.310
> 
> 标签：regex, coldfusion, replace, htmlspecialchars

我需要用`&amp;`这样的字符串替换所有 & ：

```
Übung 1: Ü & Ä 
```

或在 html

```
&Uuml;bung 1: &Uuml; & &Auml; 
```

就像您在字符串中看到 htmlspecialchars 一样（但未`&`显示为`&amp;`），因此我需要将它们从替换中排除。我对正则表达式不太熟悉。我只需要一个执行以下操作的表达式：

搜索`&`它要么跟随`（空格），要么不跟随一些字符，不包括以 . 结尾的空格`;`。然后将其替换为`&amp;`.`

 `我试过这样的事情：

```
<cfset data = ReReplace(data, "&[ ]|[^(?*^( ));]", "&amp;", "ALL") /> 
```

但这会用 $amp;... ^^' 替换每个字符

对不起，我真的不明白正则表达式的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T13:27:33.377

### 现有尝试的问题

您尝试的模式`&[ ]|[^(?*^( ));]`失败的原因主要是因为您有一个`|`但没有边界容器 - 这意味着您正在替换`&[ ]`OR `[^(?*^( ));]`- 后者将匹配大多数事物 - 您还误解了字符类的工作方式。

在`[`.. `]`（一个字符类）里面有一些简单的规则：

*   如果它以 a*开头*`^`，则为否定，否则`^`为字面量。
*   如果有连字符，则将其视为一个范围（例如 az 或 1-5 ）
*   如果有反斜杠，它要么标记一个速记类（例如`\w`），要么转义后面的字符（在 char 类中，这仅对 是必需的`[` `]` `^` `-` `\`）。
*   您只匹配一个字符（受任何限定符）；类内没有排序/序列，并且相同字符的重复被忽略。

此外，您不需要在字符类中放置空格 - 文字空格可以正常工作（除非您处于需要显式启用的自由间距注释模式）。

希望这可以帮助您了解出了什么问题？

至于实际解决您的问题...

### 解决方案

要匹配不以 HTML 实体开头的 & 符号，您可以使用：

```
&(?![a-z][a-z0-9]+;|#(?:\d+|x[\dA-F]+);) 
```

也就是说，一个＆符号，后跟一个负前瞻：

*   一个字母，然后是字母或数字，分号 - 即命名实体引用

*   一个哈希，然后是一个数字，或者一个 x 后跟一个十六进制数字，最后是一个分号 - 即一个数字实体引用。

要在 CFML 中使用它，替换`&`为`&amp;`：

```
<cfset data = rereplaceNoCase( data , '&(?![a-z][a-z0-9]+;|##(?:\d+|x[\dA-F]+);)' , '&amp;' , 'all' ) /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T09:18:33.897

我认为简单地替换*所有*出现的`&`with会更容易`&amp;`，然后再次替换错误替换的那些：

```
<cfset data = ReReplace(ReReplace(data, "&", "&amp;", "ALL"), "&amp;([^;&]*;)", "&\1", "ALL") /> 
```

我没有在 ColdFusion 中测试过这个（因为我不知道怎么做），但它应该可以工作，因为在 JavaScript 中，正则表达式本身可以工作：

```
var s = "I we&nt out on 1 se&123;p 2012 and& it was be&tter & than 15 jan 2012"
console.log(s.replace(/&/g, '&amp;').replace(/&amp;([^;&]*;)/g, '&$1'));
//"I we&amp;nt out on 1 se&123;p 2012 and&amp; it was be&amp;tter &amp; than 15 jan 2012" 
```

所以我认为正则表达式也会在 CF 中发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:40:09.473

您拥有的另一个选择是根本不使用 REGEX。对于您列出的示例字符串，您只需替换 html 与号（“&”），而不会影响 html 实体。这可以通过使用 REPLACE 来完成。

请记住，在使用实体时，& 字符周围不会有空格，而要将 & 字符转换为 HTML 实体，通常会有前导和尾随空格。REPLACE 将查找“&”的每个大小写并更新，而不影响任何“Ü”字符串（例如，没有前导和尾随空格）。

```
<cfset html = "&Uuml;bung 1: &Uuml; & &Auml;">
<cfset parsedHtml = REPLACE(html," & ", " &amp; ","All")> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-15T17:24:09.213

对于性能和免费问题，只需像这样使用十进制代码点......

```
<cfset html = Replace(html, Chr(38), "&amp;", "all")> 
````

# c# - 专为异步应用程序设计的锁

> ID：14153873
> 
> 赞同：1
> 
> 时间：2013-01-04T08:51:10.067
> 
> 标签：c#, asynchronous, callback

我有一个可以更改内部状态的类。

这些状态变化从来都不是简单的，并且通常由跨多个线程发生的几个异步操作组成，例如打开连接和发送一些数据

通过使用锁和布尔值来指示状态当前是否正在更改，我可以确保在任何给定时间只有一个操作可以访问状态

```
lock (thisLock) {

    while (stateChanging)
        Monitor.Wait(thisLock);

    stateChanging= true;

    //now free to go away and do other things while maintaining exclusive access to the inner state

} 
```

这工作正常，但这意味着在等待获得独占访问状态的线程中发生了不必要的阻塞

所以我设想的是一个基于回调的锁，其中状态改变操作会做这样的事情 -

```
sharedLock.ObtainLock(delegate() {

     //we now have exclusive access to the state
     //do some work

     socket = new Socket();
     socket.BeginConnect(hostname, connectcallback);

});

void connectcallback(IAsyncResult result) {

    socket.EndConnect(result);

    isConnected = true;

    sharedLock.ReleaseLock();

} 
```

这样的概念普遍吗？它有名字吗？我是在错误地处理事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T02:20:50.273

我最终创建了一个异步信号量，它工作得非常好，没有任何感觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:10:58.933

通常你会为此目的使用 Mutex 或 Semaphores。例如，如果一个信号量只有一个标记，而一个操作已获取该标记，则在第一个操作完成并且标记已放回信号量之前，不能执行其他操作。

在您的第二个代码示例中，您刚刚调用了获取锁和释放锁，但是 sharedLock 不知道哪个操作调用了获取/释放。这就是为什么获得锁通常会返回一个令牌，该令牌可以在操作完成时被释放或释放。

```
IDisposable myLock;

myLock = sharedLock.ObtainLock(delegate() {
     socket = new Socket();
     socket.BeginConnect(hostname, connectcallback);
});

void connectcallback(IAsyncResult result) {
    socket.EndConnect(result);
    isConnected = true;
    myLock.Dispose();
} 
```

实现 sharedLock 的类管理这些令牌，并根据每个令牌的状态知道它是否忙。实际上只不过是一个参考计数器。

作为另一种选择，您可以使用 ManualResetEvent 或 AutoResetEvents 作为您在获取锁上返回的令牌。操作完成后，只需调用 event.Set()

# objective-c - AVCaptureSession 预设照片和 AVCaptureVideoPreviewLayer 大小

> ID：14153878
> 
> 赞同：5
> 
> 时间：2013-01-04T08:51:31.393
> 
> 标签：objective-c, ios, camera

我初始化一个`AVCaptureSession`并像这样预设它：

```
AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];
if (YES==[newCaptureSession canSetSessionPreset:AVCaptureSessionPresetPhoto]) {
    newCaptureSession.sessionPreset = AVCaptureSessionPresetPhoto;
} else {
    // Error management
} 
```

然后我设置一个`AVCaptureVideoPreviewLayer`：

```
self.preview = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height/*426*/)];
CALayer *previewLayer = preview.layer;
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.session];
captureVideoPreviewLayer.frame = previewLayer.frame;
[previewLayer addSublayer:captureVideoPreviewLayer];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspect; 
```

**我的问题是：**
如何获得在屏幕上`CGSize`显示所有`captureVideoPreviewLayer`图层所需的确切信息？更准确地说，我需要高度`AVLayerVideoGravityResizeAspect`来`AVCaptureVideoPreviewLayer`适应`preview.size`？
**我尝试获得合适的 AVCaptureVideoPreviewLayer 大小。**

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T20:27:57.343

经过对 AVCaptureSessionPresetPhoto 的一些研究，AVCaptureVideoPreviewLayer 尊重 iPhone 相机的 3/4 比例。因此，通过简单的微积分很容易获得正确的身高。
例如，如果宽度为**320**，则适当的高度为：
320*4/3= **426.6**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-09T17:21:32.153

Weischel 的代码对我不起作用。这个想法奏效了，但代码没有。这是确实有效的代码：

```
 // Get your AVCaptureSession somehow. I'm getting mine out of self.videoCamera, which is a GPUImageVideoCamera
    // Get the appropriate AVCaptureVideoDataOutput out of the capture session. I only have one session, so it's easy.

    AVCaptureVideoDataOutput *output = [[[self.videoCamera captureSession] outputs] lastObject];
    NSDictionary* outputSettings = [output videoSettings];

    // AVVideoWidthKey and AVVideoHeightKey did not work. I had to use these literal keys.
    long width  = [[outputSettings objectForKey:@"Width"]  longValue]; 
    long height = [[outputSettings objectForKey:@"Height"] longValue];

    // video camera output dimensions are always for landscape mode. Transpose if your camera is in portrait mode.
    if (UIInterfaceOrientationIsPortrait([self.videoCamera outputImageOrientation])) {
        long buf = width;
        width = height;
        height = buf;
    }

    CGSize outputSize = CGSizeMake(width, height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:34:12.023

如果我理解正确，您会尝试获取当前视频会话的宽度和高度。
你可以从你的 .outputSettings 字典中获取它们`AVCaptureOutput`。（使用`AVVideoWidthKey`& `AVVideoHeightKey`）。

例如

```
NSDictionary* outputSettings = [movieFileOutput outputSettingsForConnection:videoConnection];
CGSize videoSize = NSMakeSize([[outputSettings objectForKey:AVVideoWidthKey] doubleValue], [[outputSettings objectForKey:AVVideoHeightKey] doubleValue]); 
```

**更新：**
另一个想法是从预览会话的图像缓冲区中获取帧大小。
实现 AVCaptureVideoDataOutputSampleBufferDelegate 方法`captureOutput:didOutputSampleBuffer:fromConnection:` （不要忘记设置 AVCaptureOutput 的委托）

```
- (void)captureOutput:(AVCaptureFileOutput*)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection*)connection
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    if(imageBuffer != NULL)
    {
        CGSize imageSize = CVImageBufferGetDisplaySize(imageBuffer);
        NSLog(@"%@", NSStringFromSize(imageSize));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-23T22:03:24.840

感谢 gsempe 的回答。从几个小时开始我就遇到了同样的问题:)我用这段代码解决了这个问题，以横向模式将其置于屏幕中心：

```
CGRect layerRect = [[[self view] layer] bounds];
[PreviewLayer setBounds:CGRectMake(0, 0, 426.6, 320)];
[PreviewLayer setPosition:CGPointMake(CGRectGetMidY(layerRect), CGRectGetMidX(layerRect))]; 
```

请注意，我必须反转 CGRectGetMidY() 和 CGRectGetMidX() 函数才能在我的屏幕上放置一个居中的图层。

谢谢，

朱利安

# java - 我可以在 Maven 插件中使用已编译的类吗？

> ID：14153879
> 
> 赞同：0
> 
> 时间：2013-01-04T08:51:36.407
> 
> 标签：java, maven, compilation, classloader, maven-plugin

我正在编写一个 Maven 插件，它必须使用项目的编译类，但它们是在编译后包含到类路径中还是我必须加载它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:59:45.610

根据当前阶段，有不同的“活动”类路径......例如，在测试中，编译的类位于类路径中。[您可以使用此代码](http://maven.apache.org/plugins-archives/maven-antrun-plugin-1.5/examples/classpaths.html)打印它们。

# c# - 如何在 VS 2010 Web 应用程序中使用股票登录控件？

> ID：14153888
> 
> 赞同：0
> 
> 时间：2013-01-04T08:52:05.603
> 
> 标签：c#, asp.net, web-applications

我想知道，如果有人在 Visual Studio 2010 中创建了一个新的 Web 应用程序，它会带有一个登录页面以及一个用于新用户注册的页面。是否有关于如何将这些用于“现实生活”示例的在线教程？

PS。可能是视频教程，也可能是 YouTube？

**编辑**：这是我的意思的几个截图：

![在此处输入图像描述](../Images/6837bb7e52a182de17380a331089f09d.png) ![在此处输入图像描述](../Images/b9234bd0b582b25c9238cd5b997bc2b0.png) ![在此处输入图像描述](../Images/38d39e6b916b6ff1162a9cb42a2d1afb.png) ![在此处输入图像描述](../Images/680bbc003276a796cdf25bf4c5ebe804.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:15:16.883

该控件是[ASP.NET 登录控件](http://msdn.microsoft.com/en-us/library/ms178329%28v=vs.100%29.aspx)。网上有一些视频教程，例如[这个](http://www.youtube.com/watch?v=lQ24S08jC9U)。

**更新：**[这里](http://msdn.microsoft.com/en-us/library/ff184050%28v=vs.100%29.aspx)有一个关于使用用户登录创建 ASP.NET 站点的演练，这可能更符合您的要求。

# jasper-reports - IE8中jasper报告对齐问题的文本文件

> ID：14153892
> 
> 赞同：0
> 
> 时间：2013-01-04T08:52:22.123
> 
> 标签：jasper-reports

我正在使用*iReport*创建*JR*报告，我想知道是否有办法为*IE8*设置文本对齐方式。我已经设置`textAlignment="Left"`了，但它不适用于*IE8*。现在在*IE8*中它显示在文本字段总大小的中心。

我的文本字段位于是否有任何其他属性*页脚*带。*IE*是否存在任何不同的属性？是否存在任何其他属性，以便我的文本字段根据文本框中的总文本自动调整大小？

以下是我的代码：

```
 <textField isBlankWhenNull="true">
   <reportElement  x="0" y="0" width="413" height="30">
    <property name="net.sf.jasperreports.export.pdf.tag.td" value="full"/>
    </reportElement>
    <box leftPadding="10"/>
    <textElement textAlignment="Left" verticalAlignment="Middle">
        <font size="12"/>
    </textElement>
    <textFieldExpression><![CDATA["Created By: "+ $P{CREATED_BY}]]></textFieldExpression>
 </textField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:20:29.627

我通过一些 jquery 技巧解决了 ii。这不是一个确切的解决方案，但它适用于我改变 jsp 页面上的碧玉报告呈现。它的结构是这样的

```
<td>
 <p>
<span> Created By:
</span>
</p>
</td> 
```

使用 jquery 我找到了“创建者”文本的特定跨度。然后是跨度的父母，即

并应用文本左对齐属性。

```
<script type="text/javascript">
$(function(){
    $('span').each(function() {
           //alert($(this).html());
           if($(this).html().indexOf("Created By") == 0)
            {
            $(this).parent().css("text-align","left");
        }
        });
});
</script> 
```

# java - 查看 Scoped Bean preRenderView 方法被多次调用

> ID：14153895
> 
> 赞同：2
> 
> 时间：2013-01-04T08:52:30.807
> 
> 标签：java, jsf-2, primefaces

我的**Mojarra 2.1.6** web 应用程序有问题，我正在使用`@ViewScoped`托管 bean 开发它，每个 bean 都附加到一个 xhtml 页面。此页面正在接收一些*视图参数*，并在以这种方式初始化 bean 之后：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:p="http://primefaces.org/ui"
template="/templates/general_template.xhtml">

<ui:define name="metadata">
    <f:metadata>
        <f:viewParam id="user" name="user"
            value="#{navegableUserData._ParamUser}" />

        <f:viewParam id="NavIndex" name="NavIndex"
            value="#{navegableUserData._QueueIndex}" />
        <f:event type="preRenderView"
            listener="#{navegableUserData.initialize}" />
    </f:metadata>
    <h:message for="user" />
</ui:define>

<ui:define name="general_content">
    <p:outputPanel autoUpdate="false" id="Datos_Loged" name="Datos_Loged"
        layout="block">
        <h:form id="SystemUserForm">
            <ui:include
                src="/system/manage_user/content/edit_user/system_user_data/system_user.xhtml">
                <ui:param name="manager" value="#{navegableUserData}" />
            </ui:include>
        </h:form>
    </p:outputPanel>
</ui:define> 
```

如您所见，我的页面嵌套在一个通用模板中，如下所示：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

<h:head>
    <meta http-equiv="Pragma" CONTENT="no-cache"></meta>
    <meta http-equiv="cache-control" content="no-cache"></meta>
    <meta http-equiv="Expires" CONTENT="-1"></meta>
    <meta http-equiv="Content-Type"
        content="text/html; charset=ISO-8859-15" />
    <h:outputStylesheet library="css" name="prime_styles.css" />
    <h:outputScript library="js" name="prime_translations.js" />
</h:head>

<h:body>
    <ui:insert name="metadata" />
    <o:importConstants
        type="com.company.system.view.beans.NavigationResults" />

<!-- More stuff --> 
```

当我发出诸如 Primefaces 表过滤之类的*ajax请求时，问题就来了。*虽然我的支持 bean 没有被再次创建，但**`<f:event type="preRenderView" listener="#{navegableUserData.initialize}" />`**正在被再次调用。

我正在基于视图参数进行数据加载，并且仅在第一次呈现页面时才需要执行该方法。我一直非常小心地使用`<c:xxx>`标签并认为这不是问题，因为我只在一般模板中使用它们，并且我的视图 bean 属性没有附加到它们。我的所有页面也有这个问题，所以我认为这不是特定支持 bean 的问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T11:03:48.817

如果这仅在 ajax 请求期间发生，请尝试以下操作：

```
public void initialize() {
    if (!FacesContext.getCurrentInstance().isPostback()) {
        // -----------
        // -----------
    }
} 
```

与 BalusC 建议的相关：

*   [f:metadata 和 f:viewParam 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T08:57:38.350

为了完整起见，除了@jonhy 提到的方法之外，如果使用 JSF 2.2，还有一个更简洁的选择：使用`f:viewAction`而不是`f:event`.

```
<f:viewAction action="#{navegableUserData.initialize}" /> 
```

有了它，就没有必要用 包装你的服务器代码`if (!FacesContext.getCurrentInstance().isPostback())`，因为基本上方法本身不会被调用，因为默认情况下，这些操作不会在回发时执行。

您也可以将它们设置为，这与使用原始的行为相同`f:event`：

```
<f:viewAction action="#{navegableUserData.initialize}" onPostback="true" /> 
```

**也可以看看：**

*   [JavaServer Faces 2.2 的新特性：viewAction 组件](http://www.oracle.com/technetwork/articles/java/jsf22-1377252.html)

# c# - 在 WebService 中找不到 Windows Azure 管理证书

> ID：14153896
> 
> 赞同：0
> 
> 时间：2013-01-04T08:52:38.183
> 
> 标签：c#, .net, azure, configuration, certificate

我想使用 Windows Azure 管理 API 以编程方式扩展我的 web 服务。首先，我尝试获得我的管理证书。

我使用 makecert.exe 创建了一个新的自签名证书。它[在这里](http://msdn.microsoft.com/en-us/library/windowsazure/gg432987.aspx)描述。

```
makecert -sky exchange -r -n "CN=<CertificateName>" -pe -a sha1 -len 2048 -ss My "<CertificateName>.cer" 
```

然后我将我的证书上传到我的天蓝色订阅（[这种方式](http://msdn.microsoft.com/en-us/library/windowsazure/gg551726.aspx)）。我真的在新的和以前的管理门户中看到了我上传的证书。

现在我将以下[代码](http://msdn.microsoft.com/en-us/library/ee460782.aspx)添加到我的网络服务中

```
private X509Certificate2 GetX509Certificate2()
    {

        // The thumbprint value of the management certificate.
        // You must replace the string with the thumbprint of a 
        // management certificate associated with your subscription.
        string certThumbprint = "mythumprint...";

        // Create a reference to the My certificate store.
        X509Store certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);

        // Try to open the store.
        try
        {
            certStore.Open(OpenFlags.ReadOnly);
        }
        catch (Exception e)
        {
            if (e is CryptographicException)
            {
                Console.WriteLine("Error: The store is unreadable.");
                debugTable.persist("Error: The store is unreadable.");
            }
            else if (e is SecurityException)
            {
                Console.WriteLine("Error: You don't have the required permission.");
                debugTable.persist("Error: You don't have the required permission.");
            }
            else if (e is ArgumentException)
            {
                Console.WriteLine("Error: Invalid values in the store.");
                debugTable.persist("Error: Invalid values in the store.");
            }
            else
            {
                debugTable.persist("Something got wrong with certificate");
                return null;
            }
        }

        // Find the certificate that matches the thumbprint.
        X509Certificate2Collection certCollection = certStore.Certificates.Find(X509FindType.FindByThumbprint, certThumbprint, false);
        certStore.Close();

        // Check to see if our certificate was added to the collection. If no, throw an error, if yes, create a certificate using it.
        if (0 == certCollection.Count)
        {
            Console.WriteLine("Error: No certificate found containing thumbprint " + certThumbprint);
            debugTable.persist("Error: No certificate found containing thumbprint " + certThumbprint);
            return null;
        }

        debugTable.persist("found cert");
        // Create an X509Certificate2 object using our matching certificate.
        X509Certificate2 certificate = certCollection[0];
        return certificate;
    } 
```

debugtable.persists() 方法将调试消息写入表存储。最后我只在我的表中找到这些条目：

```
"Error: No certificate found containing thumbprint " + certThumbprint 
```

那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:32:21.337

因此，您在门户中上传了您的证书。这意味着证书可用于对服务管理 API 进行身份验证。

现在，如果您想从托管在 Web/Worker 角色中的 WCF 服务/Web 服务中使用此证书，您还需要在云服务中上传该证书：

![在此处输入图像描述](../Images/12cedbbb10372ef47900d885c9cfe1be.png)

然后，您需要打开 Web/Worker 角色的设置，并通过指定位置、商店名称和指纹在此处添加新证书：

![在此处输入图像描述](../Images/9aaa3b5d677815c0aa0dfcd6c614343c.png)

如果您重新部署应用程序，则证书将可用并且您的 WCF 服务将能够使用它（如果该服务有足够的权限来访问它）。

# .net - 如何在 SQL 中使用相同的算法加密数据

> ID：14153898
> 
> 赞同：-1
> 
> 时间：2013-01-04T08:52:42.710
> 
> 标签：.net, sql, encryption, sql-server-2008-r2

> **可能重复：**
> [SQL Server 2005 T-SQL 中的 Base64 编码](https://stackoverflow.com/questions/5082345/base64-encoding-in-sql-server-2005-t-sql)

我有一个 .net 程序可以像这样加密数据。

```
public static string EncryptStringAES(string plainMessage)
{
    string strmsg = string.Empty;
    try
    {
        byte[] encode = new byte[plainMessage.Length];
        encode = Encoding.UTF8.GetBytes(plainMessage);
        strmsg = Convert.ToBase64String(encode);
    }
    catch (Exception ex)
    {
    }
    return strmsg;
} 
```

我喜欢在 SQL Server 中实现相同的加密。这是否可以在 SQL Server 中获得相同的加密。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:07:45.343

你必须采取许多步骤来做你想做的事。首先，如果您可以找到使用与您在 C# 代码中使用的相同加密算法的东西，那么您应该只使用现有的库（确保它是一个安全的实现）。以下答案将带您到达您想去的地方，但是请确保将盐值更改为您可以使用的随机盐，和/或查看如何在不使用 Rfc2898DeriveBytes 类的情况下传递 IV 和密钥。

首先，您需要一个将进行加密的类，该类既可用于您拥有 .net 代码的项目，也可用于您为在 SQL Server 上获取它而创建的项目。

```
internal class AES
{
    static readonly byte[] u8_Salt = new byte[] { 0x26, 0x19, 0x81, 0x4E, 0xA0, 0x6D, 0x95, 0x34, 0x26, 0x75, 0x64, 0x05, 0xF6 };

    public static string EncryptString(string plainText, string password)
    {
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, u8_Salt);
        using (RijndaelManaged i_Alg = new RijndaelManaged { Key = pdb.GetBytes(32), IV = pdb.GetBytes(16) })
        {
            using (var memoryStream = new MemoryStream())
            using (var cryptoStream = new CryptoStream(memoryStream, i_Alg.CreateEncryptor(), CryptoStreamMode.Write))
            {
                byte[] data = Encoding.UTF8.GetBytes(plainText);
                cryptoStream.Write(data, 0, data.Length);
                cryptoStream.FlushFinalBlock();

                return Convert.ToBase64String(memoryStream.GetBuffer(), 0, (int)memoryStream.Length);
            }
        }
    }

    public static string Decrypt(string cipherText, string password)
    {
        Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(password, u8_Salt);

        using (RijndaelManaged i_Alg = new RijndaelManaged { Padding = PaddingMode.Zeros, Key = pdb.GetBytes(32), IV = pdb.GetBytes(16) })
        {
            using (var memoryStream = new MemoryStream())
            {
                using (var cryptoStream = new CryptoStream(memoryStream, i_Alg.CreateDecryptor(), CryptoStreamMode.Write))
                {
                    byte[] data = Convert.FromBase64String(cipherText);
                    cryptoStream.Write(data, 0, data.Length);
                    cryptoStream.Flush();

                    return Encoding.UTF8.GetString(memoryStream.ToArray());
                }
            }
        }
    }
} 
```

接下来，您需要为 SQL Server 创建一个 CLR 类。这是一个相当简单的过程，只需创建一个新项目并将该类添加到您的项目中。创建项目后，添加一个将包装加密类的新类。

```
public class AESManagedProc
{
    [Microsoft.SqlServer.Server.SqlFunction]
    public static string Encrypt(string plainText, string password)
    {
        return AES.EncryptString(plainText, password);
    }

    [Microsoft.SqlServer.Server.SqlFunction]
    public static string Decrypt(string cipherText, string password)
    {
        return AES.Decrypt(cipherText, password);
    }
} 
```

你的项目现在应该是这样的 ![项目文件清单](../Images/0ea8ba3fa9b3e6b1e9305a9a15cbab1c.png)

下一步是将它放到 SQL Server 上。您需要首先确保在 SQL SErver 上启用了 clr，因此要启用它，请使用主数据库并执行以下操作：

```
 sp_configure 'clr enabled', 1;
 GO
 RECONFIGURE;
 GO 
```

接下来创建程序集

```
 CREATE ASSEMBLY AESEncryption FROM 'C:\PATH_TO_YOUR_DLL\SqlExtensions.dll' WITH PERMISSION_SET = SAFE; 
```

最后创建两个包装函数，一个用于加密，一个用于解密：

```
CREATE FUNCTION EncryptString
(
    @plainText nvarchar(max), @password nvarchar(max)
)
RETURNS nvarchar(max)
AS 
    EXTERNAL NAME AESEncryption.[SqlExtensions.AESManagedProc].Encrypt

GO

CREATE FUNCTION DecryptString
(
    @cipherText nvarchar(max), @password nvarchar(max)
)
RETURNS nvarchar(max)
AS 
    EXTERNAL NAME AESEncryption.[SqlExtensions.AESManagedProc].Decrypt
GO 
```

现在要在 SQL Server 上加密，您只需调用加密/解密函数。

```
SELECT dbo.EncryptString('test','test');
SELECT dbo.DecryptString(dbo.EncryptString('test','test'), 'test'); 
```

**免责声明**确保您没有在我给您的代码中使用 u8_salt 值，该值在互联网上的示例中随处可见。其次，确保您的密码存储在安全的地方。**非常明智**地选择您的密码，它将用于生成您的密钥，因此重要的是它是一个安全的选择。

# ios - AnnotationView on a map that not geo map

> ID：14153900
> 
> 赞同：1
> 
> 时间：2013-01-04T08:52:48.870
> 
> 标签：ios, maps, mkannotationview

如何将 annotationView 放在不是路线图的地图上，但它是这样的： ![在此处输入图像描述](../Images/cd00936ddbfed80ec23c1274085962e8.png)

无法提供纬度和经度。我放什么坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:35:24.707

I think it is an image view and if it is image view you have to take gesture recognizer's help and get the point value(pixel) of the tapped point and set annotation their.

# r - 为什么 R 使用部分匹配？

> ID：14153904
> 
> 赞同：22
> 
> 时间：2013-01-04T08:53:17.760
> 
> 标签：r, semantics

我知道对于列表，在使用基本运算符`$`和`[[`. 例如：

```
ll <- list(yy=1)
ll$y
[1] 1 
```

但我仍然是 R 新手，这对我来说是新的，函数参数的部分匹配：

```
h <- function(xx=2)xx
h(x=2)
[1] 2 
```

我想了解这是如何工作的。其背后的机制是什么？这有副作用吗？我想了解有人如何测试是否给出了 xx 参数？

在安德烈评论后编辑：

R 在内部使用[`pmatch`](http://www.inside-r.org/r-doc/base/pmatch)算法来匹配参数，这里是一个如何工作的例子：

```
 pmatch("me",   c("mean", "median", "mode")) # error multiple partial matches
[1] NA
> pmatch("mo",   c("mean", "median", "mode")) # mo match mode match here
[1] 3 
```

但是为什么 R 有这样的特性呢？`partial unique`匹配背后的基本思想是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-04T10:23:26.540

存在部分匹配以节省您键入长参数名称的时间。它的危险在于函数可能会在稍后与您的部分匹配发生冲突时获得额外的参数。这意味着它只适合交互式使用——如果您编写的代码会长期存在（例如放入一个包中），那么您应该始终编写完整的参数名称。另一个问题是，通过缩写参数名称，可以降低代码的可读性。

两种常见的良好用途是：

1.  `len`而不是`length.out`使用[`seq`](https://www.rdocumentation.org/packages/base/topics/seq)(or `seq.int`) 函数。

2.  `all``all.names`而不是[`ls`](https://www.rdocumentation.org/packages/base/topics/ls)函数。

相比：

```
seq.int(0, 1, len = 11) 
seq.int(0, 1, length.out = 11)

ls(all = TRUE)
ls(all.names = TRUE) 
```

在这两种情况下，使用缩短的参数名称的代码几乎一样容易阅读，并且函数足够旧且足够稳定，不太可能添加另一个名称冲突的参数。

节省输入的更好解决方案是使用变量和参数名称的自动完成，而不是使用缩写名称。R GUI 和 RStudio 使用`TAB`键支持这一点，而 Architect 使用`CTRL`+支持这一点`Space`。

# matlab - mex 文件错误 const input prhs 在调用 mex 后更改

> ID：14153906
> 
> 赞同：1
> 
> 时间：2013-01-04T08:53:32.357
> 
> 标签：matlab, mex

我正在研究一个采用视频帧的 Matlab 代码，将它们放在一个单元格数组中，例如

```
frames{fr} = read(videoObj, fr); 
```

对于示例视频，我检查了帧单元格，它包含 84 帧（视频有 84 帧），并且所有单元格都充满了图像。

我有一个 mex 文件，作为标准，它是这样的

```
void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[]) 
```

正如我已经阅读了 mex 文件创建的属性，他们说输入`prhs`是`const mxArray`这样，无论在 mex 代码中发生什么，输入都不会改变。我将 matlab 的框架单元格数组作为 mex 文件的输入，就像`prhs[0]`框架单元格一样，我做了一些处理（我发誓我不会改变我所接受的内容`prhs[0]`）。但是，当我调试 Matlab 代码时，我看到在调用 mex 文件（并将帧作为输入给 mex 文件）之后，我的帧单元格的最后一个单元格似乎被删除了。当我查看第 84 个单元格时，它是`[]`，有时它是一个随机数，例如 8 或 4。我不明白当我调用 mex 文件时，我的框架单元格的最后一列如何或为什么消失。

您可能认为我的 Matlab 代码可能有错误，但是当我调试时，我在处理 mex 之前查看了帧，它有 84 个单元格，最后一个单元格是预期的图像，但是在我调用 mex 之后，帧仍然是 84 个单元格，但最后一个单元格是`[]`：空的。

如果有人可以帮助我，我将不胜感激，为什么会发生这样的事情？不`const mxArray`意味着'输入不会在墨西哥改变'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:48:16.187

1.  `const mxArray* prhs[]`覆盖了指向**唯一**`mxArray[]`的指针。事实证明，可以（尽管**风险很高**）更改`mexFunction`.

2.  另一点值得注意的是，虽然 matlab 中的数组和单元格是从 索引的`1..n`，但 in `C/C++`（尤其是在`mex`文件中）元素的索引是从**0** ,..., **n-1**。因此，在调试器中您看到它`cell[84]`是空的（或其中有一个随机值）的事实是因为您正在访问**超出单元格数组的末尾**！

# php - 发送没有 cc 和 bcc 字段的邮件时出错

> ID：14153913
> 
> 赞同：-5
> 
> 时间：2013-01-04T08:54:20.260
> 
> 标签：php, sql-server

我能够发送和接收邮件到，抄送，密件抄送字段。但是，当我尝试仅在填写“收件人”字段的情况下发送邮件时，什么也没有发生。

我正在使用下面的代码：

```
<?php
            $to= $_POST["too"];
            $cc= $_POST["ccc"];
            $bcc=$_POST["bc"];
            $strSubject = $_POST["subj"];
            $strMessage = $_POST["message"];
            $strHeader = "";
            $strHeader .= "Cc: ".$cc."\r\n";
            $strHeader .= "Bcc: ".$bcc."\r\n";
            $strHeader .= "from: xyz <xyx@mydomain.com>";
            $strHeader .= $strMessage."\n\n";
            $strHeader .= $strContent."\n\n";
    }

    $flgSend = @mail($to,$strSubject,null,$strHeader);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:42:14.493

修改代码以仅在提供相应值时附加`Cc:`or行。`Bcc:`

# php - 哪种方法“更好”（就优化和复杂性而言）

> ID：14153917
> 
> 赞同：0
> 
> 时间：2013-01-04T08:54:41.167
> 
> 标签：php

假设有一些对象，派生自这些类实例

```
class A
{
...
 private b //list of object of class B
}

class B
{
...
 private c //list of object of class C
}

class C
{
...
 private id
} 
```

现在，在我的代码的某个地方，我遇到了这种情况

```
function findId(array $idList)
{
 [...]
} 
```

`$idList`如果一个元素包含在这个对象“级联”中，我必须在哪里找到（对于每个元素）

# 第一个解决方案

```
//object initialization
foreach($a->getB() as $b)
{
 foreach($b->getC() as $c)
 {
  foreach($idList as $id)
  {
   if($id == $c->getId())
   {
    //do something an break the cycle
   }
  }
 }
} 
```

# 第二种解决方案

```
//object initialization

$idSet = array();
foreach($a->getB() as $b)
{
 foreach($b->getC() as $c)
 {
  $idSet[] = $c->getId();
 }
}
$idSet = array_unique($idSet);

foreach($idList as $id)
{
 if(array_search($id,$idSet) !== false)
 {
  [...]
 }
} 
```

哪个更好？有一些替代方法可以达到我的目标吗？

# 重要的

没有更好的数据表示。这是因为这些对象是一些数据库对象（doctrine2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:07:24.850

你实际上可以结合这两种方法......

```
foreach($a->getB() as $b)
{
 foreach($b->getC() as $c)
 {
    if (in_array($id, $idList)) {
     ... 
```

如果你绝对不能以一种你不会有内部循环的方式进行优化，请将 $idList 的值设置为键，将值设置为`true`, 并使用`isset()`而不是`in_array()`，因为它是最快的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:57:09.877

我会说两者都很糟糕，在最坏的情况下，它们会给出 O(n^3)，因为每个循环都是三个。为了避免所有这些循环，是否可以更好地表示数据？

如果答案是否定的，我会采用第一种方法以避免创建新集合。

# node.js - Node.js - webrtc 对等点？

> ID：14153918
> 
> 赞同：3
> 
> 时间：2013-01-04T08:54:41.537
> 
> 标签：node.js, webrtc

既然node使用了javascript，它可以充当webrtc peer吗？

然后我可以将其编码为 VP8 流并广播给所有其他对等方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:28:08.327

WebRTC 是一个浏览器 API，而不是 Javascript 的一部分，所以它需要作为一个 Node 模块来实现。

不过有一些项目可以构建它。看一下这个：

[http://blog.appfog.com/new-horizo​​ns-in-node-js-app-js-and-webrtc/](http://blog.appfog.com/new-horizons-in-node-js-app-js-and-webrtc/)

# javascript - Javascript DOM style.backgroundColor 无法正常工作

> ID：14153928
> 
> 赞同：5
> 
> 时间：2013-01-04T08:55:25.590
> 
> 标签：javascript, html, dom, javascript-events, onclick

我的问题如下：

我有一段 javascript 代码，它使用生成一个“新”文档`document.write`，首先我编写了网页的整个标题。在那个头上，我有一些 CSS 代码，如下所示：

```
<style type='text/css'> 
.black {background-color: black;} 
.white {background-color: #ffffff;} 
td {width:50px; height:50px;} 
</style> 
```

并且 javascript 在正文部分绘制了一个表格。编写代码基本上是两个`for`绘制棋盘的循环。但这甚至不重要。每个`td`元素都有一个类`black`或`white`通过它正确着色。每个`td`都有一个`onclick='changeBg(this)'`属性。

这就是问题出现的地方。我无法访问被点击元素的背景颜色。函数如下所示：

```
function changeBg(element)
{
    alert(element.style.backgroundColor);
    element.style.backgroundColor = "red";
} 
```

起初我提醒当前元素的颜色。它总是提醒空白通知。在我将颜色更改为红色并再次单击元素后，它会发出警报`red`。's 在浏览器中是彩色的`td`，如果我用 firebug 检查它们，则有`background-color: black | white`；

我错过了什么以及如何解决这个问题？我已经意识到，如果我`td`在使用创建它们时设置颜色`style="color: black | white"`；它有效，但我不知道他们属于哪个班级。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T08:59:26.280

您可以使用- [Docs获取](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)*当前应用的样式*`window.getComputedStyle`

```
function changeBg(element) {
    alert(window.getComputedStyle(element).backgroundColor);
    element.style.backgroundColor = "red";
} 
```

# html - 如何在移动设备上显示 FBML 选项卡

> ID：14153930
> 
> 赞同：0
> 
> 时间：2013-01-04T08:55:32.020
> 
> 标签：html, facebook, mobile, fbml

我知道如何制作这些标签：Facebook 上的[https://www.facebook.com/youseedanmark/app_129835087123805 。](https://www.facebook.com/youseedanmark/app_129835087123805)但它不会在移动设备上显示它们。我该如何解决。如果这是转发，请耐心等待，但我真的找不到这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:20:39.907

> 但它不会在移动设备上显示它们。我该如何解决。

一点也不。因为页面选项卡应用程序在 Facebook 的移动版本中不可用 - 设计使然。

# android - 监听 GSM 流量

> ID：14153932
> 
> 赞同：1
> 
> 时间：2013-01-04T08:55:38.617
> 
> 标签：android, gsm, imei, gnuradio

是否可以使用安卓手机来收集同一单元内手机的 IMEI 或唯一电话 ID？可能已经有一些黑客可以使用 osmocom ......我正在寻找的是一种易于工作的解决方案来扫描交通（通过计算汽车司机的电话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:50:08.157

理论上是，但实际上不是。在正常的 GSM 网络中，您会期望移动身份 IMEIsv 数据字段被编码在称为身份响应的消息中。此消息在称为 sdcch/8 的加密通道中发送。您需要在该通道中解密（并找到）此确切消息，以检测给定上行链路事务的 imei。为了能够捕获上行链路数据交易，您需要有一个正在监听上行链路频率的无线电接收器，而您的安卓手机不这样做。

您正在寻找一种易于使用的“扫描流量的解决方案”。我建议你做的是尝试找到一个电话，它会给你关于 CCCH 频道的信息，这是未加密的，并且可以包含带有 tmsi 或 imsi 信息的寻呼请求。tmsi 更加匿名，它为您提供了某种统计数据以供计数。

（今天）执行此操作的“最简单”方法是使用诺基亚 3310 和 dct3 gsmtap 项目。使用 tshark 中的选项过滤 pcap 文件。

可能有更准确的计算汽车的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T07:12:36.880

理论上是的，但这里的问题是你需要知道你的安卓手机的无线电接口是如何工作的，并有一个驱动程序才能做到这一点。据我所知，GNU Radio 没有这样的驱动程序。另一个问题是您手机上的 CPU 不够强大，无法处理执行此类任务所需的数据处理量，也许有一天您会拥有具有大量 RAM 和强大 DSP 支持的四核 CPU，但我不要以为我们现在就在那里。

# c# - 从 ResXRersourcewriter 生成的资源文件创建 Designer.cs 文件

> ID：14153933
> 
> 赞同：28
> 
> 时间：2013-01-04T08:55:53.013
> 
> 标签：c#, visual-studio, resx

我有一个生成`.resx`资源文件的程序。这些资源文件用于其他项目，与生成资源文件的项目不在同一个解决方案中。

我现在想知道，是否可以`designer.cs`从资源文件生成一个文件，以便您可以直接访问资源而无需使用 resxresourcereader。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-04T09:00:40.930

打开 resx 文件，它的工具栏上有一个`Access Modifier`菜单。将此设置为`Public`。这将生成一个`*.Designer.cs`文件。

![在此处输入图像描述](../Images/69403b12a8a9c38345851e0cdb26363c.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-10T14:17:32.957

右键单击`Resources.resx`并选择“运行自定义工具”。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-04T09:30:59.233

如果将文件添加到 Visual Studio 项目中，则必须将文件的`Custom Tool`属性设置为. 然后VS会自动创建需要的设计器文件。`.resx``ResXFileCodeGenerator`

在一个项目中，我制作了一个 T4 脚本，它扫描项目中的文件夹以查找所有图像，然后单击即可创建相应的资源文件。

这是 T4 脚本中需要的部分：

```
var rootPath = Path.GetDirectoryName(this.Host.TemplateFile);

var imagesPath = Path.Combine(rootPath, "Images");
var resourcesPath = Path.Combine(rootPath, "Resources");

var pictures = Directory.GetFiles(imagesPath, "*.png", SearchOption.AllDirectories);

EnvDTE.DTE dte = (EnvDTE.DTE)((IServiceProvider)this.Host)
                   .GetService(typeof(EnvDTE.DTE));

EnvDTE.Projects projects = dte.Solution.Projects;
EnvDTE.Project iconProject = projects.Cast<EnvDTE.Project>().Where(p => p.Name == "Icons").Single();
EnvDTE.ProjectItem resourcesFolder = iconProject.ProjectItems.Cast<EnvDTE.ProjectItem>().Where(item => item.Name == "Resources").Single();

// Delete all existing resource files to avoid any conflicts.
foreach (var item in resourcesFolder.ProjectItems.Cast<EnvDTE.ProjectItem>())
{
    item.Delete();
}

// Create the needed .resx file fore each picture.
foreach (var picture in pictures)
{
    var resourceFilename =  Path.GetFileNameWithoutExtension(picture) + ".resx";
    var resourceFilePath = Path.Combine(resourcesPath, resourceFilename);

    using (var writer = new ResXResourceWriter(resourceFilePath))
    {
        foreach (var picture in picturesByBitmapCollection)
        {
            writer.AddResource(picture.PictureName, new ResXFileRef(picture, typeof(Bitmap).AssemblyQualifiedName));
        }
    }
}

// Add the .resx file to the project and set the CustomTool property.
foreach (var resourceFile in Directory.GetFiles(resourcesPath, "*.resx"))
{
    var createdItem = resourcesFolder.Collection.AddFromFile(resourceFile);
    var allProperties = createdItem.Properties.Cast<EnvDTE.Property>().ToList();
    createdItem.Properties.Item("CustomTool").Value = "ResXFileCodeGenerator";
} 
```

我已经将上面的代码展平了一点，因为在我的实际解决方案中，我为每张图片使用了一个自定义类而不是简单的文件名，以在不同的子文件夹中也支持相同的文件名（通过使用命名空间的文件夹结构的一部分一代）。但是对于第一次拍摄，上述内容应该对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-30T15:25:10.423

您也可以在代码中执行此操作：（取自此处：[msdn](https://msdn.microsoft.com/query/dev14.query?appId=Dev14IDEF1&l=EN-US&k=k(System.Resources.Tools.StronglyTypedResourceBuilder);k(SolutionItemsProject);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5.2);k(DevLang-csharp)&rd=true)）

```
 StreamWriter sw = new StreamWriter(@".\DemoResources.cs");
  string[] errors = null;
  CSharpCodeProvider provider = new CSharpCodeProvider();
  CodeCompileUnit code = StronglyTypedResourceBuilder.Create("Demo.resx", "DemoResources", 
                                                             "DemoApp", provider, 
                                                             false, out errors);    
  if (errors.Length > 0)
     foreach (var error in errors)
        Console.WriteLine(error); 

  provider.GenerateCodeFromCompileUnit(code, sw, new CodeGeneratorOptions());                                         
  sw.Close(); 
```

你需要参考system.design.dll

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-05T19:09:46.997

这也对我有用：双击并打开 resx 文件，添加一个虚拟资源，单击保存。.designer.cs 文件生成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-04T14:27:47.977

如果您删除它或将其添加到 .gitignore 因为您认为您不需要它。这就是您重新生成文件的方式。

转到访问修饰符并将其从（公共/内部）更改为“无代码生成”

现在把它放回公共/内部。VS 将为您重新生成设计器文件。

# java - 带有选择框的 Struts2 jQuery 自动完成器

> ID：14153943
> 
> 赞同：3
> 
> 时间：2013-01-04T08:56:27.997
> 
> 标签：java, json, jsp, struts2, struts2-jquery

我`autocompleter`为我的 Struts 2 应用程序使用了 Struts2 jQuery。

这是我的代码：

**JSP：**

```
 <s:form id="frm_demo" theme="simple" action="ManagersAutoCompleter1">
        <s:url var="remoteurl" action="test" />
    <sj:autocompleter href="%{remoteurl}" id="echo3" name="echo"
        list="itemList" listKey="id" listValue="name" emptyOption="true"
        headerKey="-1" headerValue="Please Select a Language" selectBox="true" />

        <s:submit value="submit" />
    </s:form> 
```

**`Struts.xml`：**

```
<action name="test" class="test.TestAction" method="populate">
  <result type="json">
  </result>
</action> 
```

**动作类：**

```
 public String populate() throws Exception {

        itemList = new ArrayList<ListValue>();
        itemList.add(new ListValue("Php", "Php"));
        itemList.add(new ListValue("Java", "Java"));
        itemList.add(new ListValue("Mysl", "Mysl"));
        return SUCCESS;
    } //getter setter for itemList 
```

**列表类：**

```
public class ListValue {
    private String id;
    private String name;

    public ListValue(String id, String name) {
        this.id = id;
        this.name = name;
    } //getter setter methods 
```

但是这个 Struts2 jQuery`autocompleter`不起作用。它不填充任何值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:43:12.250

这是错误的：

```
<sj:autocompleter href="%{remoteurl}" id="lst" name="lst"
    list="itemList" listValue="name" listKey="id" selectBox="true" /> 
```

您正在为自动完成器提供地图，而不是您自己构建的自定义对象。

[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)没有任何`name`nor`id`字段，而是具有s`key`和`value`s 字段。

首先改变它，看看它是否有效：

```
<sj:autocompleter href="%{remoteurl}" id="lst" name="lst"
    list="itemList" listValue="value" listKey="key" selectBox="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:16:09.913

您输入了未引用的错误属性。

> ```
> <s:url id="remoteurl" action="test" /> 
> ```

应该

```
 <s:url var="remoteurl" action="test" /> 
```

使用列表项 bean 类

```
public class ListValue {
  private String id;
  private String name;
...
}

public String populate() throws Exception {
  itemList.add(new ListValue("Php", "Php"));
  itemList.add(new ListValue("Java","Java") );
  itemList.add(new ListValue("Mysl", "Mysl") );
  return SUCCESS;
} 
```

假设已经添加了构造函数和修改器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T19:44:42.847

**做这个**

```
<s:url id="remoteurl" action="test"/>
<sj:select 
     id="customersjsonlstid" 
     name="echo"
     label="Handle a List"
     href="%{remoteurl}" 
     list="itemList"
     listValue="name" 
     listKey="id" 
     autocomplete="true"  
     loadMinimumCount="2" 
     id="echo3"/> 
```

**而不是这个**：

```
<sj:autocompleter href="%{remoteurl}" id="echo3" name="echo"
list="itemList" listKey="id" listValue="name" emptyOption="true"
headerKey="-1" headerValue="Please Select a Language" selectBox="true" /> 
```

并确保您从您的操作类返回列表。要检查这一点，请使用您的 IDE 调试器或 System.out.print 等进行。

```
ex...

    -------------
    ------------
    itemList.add(new ListValue("Mysl", "Mysl") );
    System.out.println("Size of my list="+itemList.size());
    return SUCCESS;
} 
```

你也应该在你的动作类中定义 getter & setter

```
private List itemList; 
    public List getItemList() {
    return itemList;
} 

public void setItemList(List itemList) {
    this.itemList = itemList;
} 
```

# module - 在 Erlang 中打开一个模块

> ID：14153944
> 
> 赞同：1
> 
> 时间：2013-01-04T08:56:39.287
> 
> 标签：module, erlang

有没有办法在 Erlang 中打开一个模块，然后在不使用模块名称前缀的情况下调用它的函数？就像打开 ML 结构一样！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:40:38.017

您可以使用

```
-import(my_module, [foo/1,bar/2]). 
```

要从另一个模块 ( )导入单个函数（在我的示例中`foo/1`和） ，请参阅[模块文档](http://www.erlang.org/doc/reference_manual/modules.html)。无法从模块中导入*所有*函数，它们必须明确列出。`bar/2``my_module`

 *另请参阅[在 Erlang 中如何从模块中导入所有函数？](https://stackoverflow.com/questions/2503768/in-erlang-how-can-i-import-all-functions-from-a-module)解释为什么你不应该导入函数！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T17:03:29.643

不，你不能！@johlo 和 @stemm 给出的方法只是变通方法，允许您不显式地编写模块名称，仅此而已。该`-import(...)`声明用词不当，并没有达到您的预期。

鉴于 Erlang 对代码的动态处理，它实际上也毫无意义。无法保证在运行时您拥有与编译时相同的“其他”模块，或者根本不存在。所有代码处理，编译/加载/清除/重新加载/等。, 是在模块的基础上完成的，没有模块间的依赖关系或优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:50:51.350

您可以使用定义代替导入：

```
-define(SIN(X), math:sin(X)).

my_func(X) -> ?SIN(X). 
```*

# c# - 如何获取绑定到使用抽象父类参数声明的 BindingList 的 DataGridView？

> ID：14153945
> 
> 赞同：1
> 
> 时间：2013-01-04T08:56:41.033
> 
> 标签：c#, datagridview, casting, bindinglist, inheritance

我正在使用 .NET 3.5

1.  我有一个继承自抽象类 Person 的类成员

    ```
    public class Member : Person
    {
        public int Number { get; set; }
        public string LastName { get; set; }
        public string OtherNames { get; set; }
    } 
    ```

2.  我已经声明了一个 BindingList 如下：

    ```
    BindingList<Person> p_List = new BindingList<Person>(); 
    ```

3.  我有一个 DataGridView，其列如下：

    ```
    col1.DataPropertyName = "Number";
    col2.DataPropertyName = "LastName";
    col3.DataPropertyName = "OtherNames"; 
    ```

4.  我从 Member 对象列表中填充 2 中的绑定列表。然后我将 BindingList 绑定到 datagridview，如下所示：

    ```
    this.dgListView.DataSource = p_List; 
    ```

datagridview 有 3 列和与成员数量一样多的行。但是，单元格没有任何数据。我认为原因是因为 Member 中的 3 个属性对父级（Person）不可用。当我创建一个“Member-Typed”BindingList m_List，然后通过循环遍历“Person-Typed”p_List 来填充它时，datagridview 的填充没有问题。（见下面的代码）。

```
 BindingList<Member> m_List = new BindingList<Member>();
        foreach (Person p in p_Plist)
        {
            Member m = (Member)p;
            m_List.Add(m);
        }
        this.dgListView.DataSource = m_List; 
```

但是，由于多种原因，我想避免这种情况。关键原因是 p_List 是一个类中的一个属性，我用它来访问 Person 类型的不同对象。这些对象中的每一个都与不同的窗口窗体相关联。因此，我想使用 p_List 以相关形式显示对象，只要对象类继承自 Person 类。我也不想维护 2 个副本（m_List 和 p_List），因为如果我对其中一个进行排序、添加、删除或过滤，我将被迫对另一个进行排序。有没有办法让 datagridview 检测到属性，`BindingList<Person>`从而能够像绑定到一样填充它`BindingList<Member>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:17:35.723

首先，这些属性应该在`Person`类中定义。如果你想在`Member`类中覆盖它们，你必须使类中的属性为`Person`虚拟，然后在覆盖它们时使用 override 修饰符`Member`。

```
 public class Person {
            public virtual int Number { get; set; }
            public virtual string LastName { get; set; }
            public virtual string OtherNames { get; set; }
        }

        public class Member : Person {
            public override int Number { get; set; }
            public override string LastName { get; set; }
            public override string OtherNames { get; set; }
        } 
```

`Person`如果您的所有派生实体共享属性`Number`，则不需要多态性，`LastName`并且`OtherNames`......您可以设置它们的值......只是说。

# iphone - 从 iPhone 中的前置摄像头录制视频

> ID：14153948
> 
> 赞同：0
> 
> 时间：2013-01-04T08:57:13.343
> 
> 标签：iphone, ios, ios6, uiimagepickercontroller

> **可能重复：**
> [访问前置摄像头。iPhone/iPod 4](https://stackoverflow.com/questions/4729739/accessing-the-front-facing-camera-iphone-ipod-4)

如何在 iPhone 中从设备的前置摄像头录制视频。

要使用前置摄像头，我们使用这个：

```
picker.cameraDevice = UIImagePickerControllerCameraDeviceFront; 
```

但是如何从中创建视频呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:21:12.753

您可以在 iphone 中从前置摄像头录制视频，例如：-

```
-(IBAction)cameraLibraryButtonClick:(id)sender{
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {              
        UIImagePickerController *videoRecorder = [[UIImagePickerController alloc]init];  
        videoRecorder.delegate = self;
        NSArray *sourceTypes = [UIImagePickerController availableMediaTypesForSourceType:videoRecorder.sourceType];
        NSLog(@"Available types for source as camera = %@", sourceTypes);
        if (![sourceTypes containsObject:(NSString*)kUTTypeMovie] ) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil 
                                                            message:@"Device Not Supported for video Recording."                                                                       delegate:self 
                                                  cancelButtonTitle:@"Yes" 
                                                  otherButtonTitles:@"No",nil];
            [alert show];
            [alert release];
            return;
        }
        videoRecorder.cameraDevice=UIImagePickerControllerCameraDeviceFront;
        videoRecorder.sourceType = UIImagePickerControllerSourceTypeCamera;
        videoRecorder.mediaTypes = [NSArray arrayWithObject:(NSString*)kUTTypeMovie];           
        videoRecorder.videoQuality = UIImagePickerControllerQualityTypeLow;
        videoRecorder.videoMaximumDuration = 120;

        self.imagePicker = videoRecorder;                 
        [videoRecorder release];
        [self presentModalViewController:self.imagePicker animated:YES];
        newMedia = YES;
    }
    else {
        [self displaysorceError];
    }

} 
```

# drupal - Drupal 7 测试登录抛出异常 Undefined property: MyTest::$public_files_directory

> ID：14153951
> 
> 赞同：0
> 
> 时间：2013-01-04T08:57:37.333
> 
> 标签：drupal, drupal-7, drupal-modules

我想在我的drupal 7 模块中做一些测试。所以我遵循了drupal的SimpleTest Api并实施了一些测试

例如，我正在测试登录过程。

```
 public function  testLogin() {
    $user = $this->drupalCreateUser(array());
    $this->drupalLogin($user);
   } 
```

当我尝试登录时，我总是遇到这个异常：

```
Undefined property: MyModuleTest::$public_files_directory drupal_web_test_case.php  1692 DrupalWebTestCase->curlInitialize() 
```

之后异常登录失败。

详细信息是这样的：

```
User created with name zPUkpgzN and pass 6NXRDGWy5k Pass
GET http://www.example.com/user returned 200 (1 byte). Pass
Valid HTML found on "http://www.example.com/user" Pass
Failed to set field name to zPUkpgzN Pass
Failed to set field pass to 6NXRDGWy5k Fail
Found the Log in button Fail
Found the requested form fields at user Fail
User zPUkpgzN successfully logged in.   Fail 
```

我发现这篇文章[http://drupal.org/node/1789942](http://drupal.org/node/1789942)，我遵循了一些建议，但我唯一成功的是：

```
User created with name zPUkpgzN and pass 6NXRDGWy5k Pass
GET http://www.example.com/user returned 200 (1 byte). Pass
Valid HTML found on "http://www.example.com/user" Pass
Failed to set field name to zPUkpgzN Pass
Failed to set field pass to 6NXRDGWy5k Pass
Found the Log in button Fail
Found the requested form fields at user Pass
User zPUkpgzN successfully logged in.   Fail 
```

有什么建议么？

谢谢。

桑登姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T21:38:33.907

如果你不调用 parent::setUp()，$public_files_directory 不会被定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:57:37.333

我在一分钟前修好了。异常仍然存在，但测试已成功。

```
I followed this approach:

  public function  testLogin() {
    $user = $this->drupalCreateUser(array());
    $user->roles[] = 'authenticated user'; //Defining user role
    user_save( $user ); //Save user in testing database

    $this->drupalLogin($user);//success!!!!
  } 
```

# python - 如何在 Outlook 已发送邮件文件夹中查看使用 Python 的 smtplib 发送的电子邮件？

> ID：14153954
> 
> 赞同：4
> 
> 时间：2013-01-04T08:57:55.073
> 
> 标签：python, outlook, smtplib

我正在使用托管交换 Microsoft Office 365 电子邮件，并且我有一个 Python 脚本，可以使用 smtplib 发送电子邮件。它工作得很好。但是有一个问题，我怎样才能让电子邮件显示在我的 Outlook 已发送邮件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:14:50.770

您可以将该电子邮件的副本发送给自己，并带有一些标头标记电子邮件是您自己发送的，然后获取另一个脚本（可能使用 IMAP 库）将电子邮件移动到 Outlook Sent 文件夹

# vb.net - 在 VB.NET 中，我想在再次单击按钮之前创建一个时间延迟

> ID：14153955
> 
> 赞同：3
> 
> 时间：2013-01-04T08:58:12.733
> 
> 标签：vb.net, button, upload, timedelay

我想知道是否有一种方法可以在用户可以在同一个按钮上进行的两次单击之间设置定时延迟。

它是一个图像主机应用程序，但是现在用户可以通过快速单击来淹没我的服务器。那么有没有办法在用户单击和再次单击之间设置 10 秒的时间延迟。如果他们确实尝试在那个时间点击它会有一个 MsgBox 警告他们在时间到之前他们不能点击？

请注意，我不想使用线程，因为我不想挂起我的程序，原因很简单，当时它将上传图像，并且用户在上传时还想在应用程序上做其他事情.

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:12:47.573

根据您提到的 MsgBox 和 Threading，我假设客户端是 Windows 应用程序。您可以禁用该按钮 10 秒钟。这是一些 .NET 4.0 代码：

```
Imports System.Threading

Public Class MainForm

    Private Sub MyButton_Click() Handles MyButton.Click
        Me.DisableButtonAsync(10)
        Me.PerformWork()
    End Sub

    Private Sub PerformWork()
        ' Upload image or whatever.
    End Sub

    Private Sub DisableButtonAsync(ByVal seconds As Int32)
        Me.MyButton.Enabled = False

        Dim uiScheduler = TaskScheduler.FromCurrentSynchronizationContext()

        Task.Factory _
            .StartNew(Sub() Thread.Sleep(seconds * 1000)) _
            .ContinueWith(Sub(t) Me.MyButton.Enabled = True, uiScheduler)
    End Sub

End Class 
```

...或者更漂亮的 .NET 4.5 等价物：

```
Imports System.Threading

Public Class MainForm

    Private Sub MyButton_Click() Handles MyButton.Click
        Me.DisableButtonAsync(10)
        Me.PerformWork()
    End Sub

    Private Sub PerformWork()
        ' Upload image or whatever.
    End Sub

    Private Async Sub DisableButtonAsync(ByVal seconds As Int32)
        Me.MyButton.Enabled = False

        Await Task.Delay(seconds * 1000)

        Me.MyButton.Enabled = True
    End Sub

End Class 
```

# php - 我可以在 where 子句中使用 select 字段中的 somename 作为 somename 吗？

> ID：14153958
> 
> 赞同：0
> 
> 时间：2013-01-04T08:58:24.373
> 
> 标签：php, mysql, codeigniter

我正在尝试获取 totalQuantity 小于 alterQuantity 的产品。

```
$this->db
->select("products.id as productid, products.code as code, products.name, products.unit, products.price, sum(warehouses_products.quantity) as totalQuantity, products.alert_quantity as alertQuantity")
->from('products')
->where('alertQuantity >=', 'totalQuantity')
->join('warehouses_products', 'products.id=warehouses_products.product_id, 'left')
->group_by("products.id"); 
```

如果我在 where 子句中使用 products.alert_quantity 警告数量，我在“where 子句”中收到未知列“alertQuantity”的错误我**在“where 子句”中得到****未知列“totalQuantity”，** 我不知道如何更改，因为这是数量之和。你能帮我解决这个问题吗？

**我的问题：** 我选择 alert_quantity 作为 alertQuantity 和 sum(quantity) 作为 totalQuantity

**我可以在 where 子句中使用 alterQuantity 和 totalQuantity 吗？**

**表结构**

产品

id、代码、名称、单位、价格、alert_quantity

仓库_产品

id、product_id、warehouse_id、数量

* * *

**发现** 我不能使用 totalQuantity 有没有其他想法可以将 products.alert_quantity 与 sum(warehouses.products.quantity) 进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:00:49.797

尝试这个：：

```
select 
products.id as productid, 
products.code as code, 
products.name, products.unit, 
products.price, 
sum(products.alert_quantity) as totalQuantity, 
products.alert_quantity as alertQuantity
from products

LEFT join warehouses_products on products.id=warehouses_products.product_id
where products.alert_quantity>= totalQuantity
group_by products.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:05:18.880

尝试使用 select 的第二个参数，例如更改

```
$this->db
->select("products.id as productid, products.code as code, 
products.name, products.unit, products.price, 
sum(warehouses_products.quantity) as totalQuantity, 
products.alert_quantity as alertQuantity") 
```

至

```
$this->db
->select("products.id as productid, products.code as code, 
products.name, products.unit, products.price, 
sum(warehouses_products.quantity) as totalQuantity, 
products.alert_quantity as alertQuantity", FALSE) 
```

并关闭连接部分的引号

**编辑**，尝试重新排序您的语句，例如：

```
$this->db
->select("products.id as productid, products.code as code, products.name, products.unit, products.price, sum(warehouses_products.quantity) as totalQuantity, products.alert_quantity as alertQuantity", FALSE)
->from('products')
->join('warehouses_products', 'products.id=warehouses_products.product_id', 'left')
->where('alertQuantity >=', 'totalQuantity')
->group_by("products.id"); 
```

# iphone - 使用从 XML 按日期解析的值对 UITableView 进行索引和排序

> ID：14153963
> 
> 赞同：0
> 
> 时间：2013-01-04T08:58:43.203
> 
> 标签：iphone, ios, uitableview, sorting, nsdictionary

我正在`XML`从一个 URL 解析一个文件，从中`XML`我解析事件的标题、它们的日期和事件的位置等等。这些元素缓存在一个名为的数组中，该数组`stories`充当我的表格视图的数据源。我的目标是显示和索引`UITableView`部分基于我的事件按月发生的日期（一月的事件在一个部分中，二月的事件在另一个部分中，月份名称作为我的部分的标题）。最快发生的事件会在我的视野中，更远的事件应该在我的列表的底部，我不必担心已经发生的事件。到目前为止，我已经能够在我的 UITableView 中将我的事件名称和它们的日期显示为未排序或索引的字幕，按照它们被解析的顺序保留。当我记录`stories`数组时，我在控制台中查看：

```
2013-01-04 00:17:22.332 NumberTwo[72213:c07] the stories array is as follows: (
    {
    additionalDesc = "";
    allday = "Yes.";
    endtime = "11:55 PM";
    isodate = "2013-05-23";
    location = "";
    starttime = "12:00 AM";
    title = "CST Exam Makeups";
},
    {
    additionalDesc = "";
    allday = "No.";
    endtime = "12:00 PM";
    isodate = "2013-06-01";
    location = "";
    starttime = "8:00 AM";
    title = "SAT & Subject Tests";
},) 
```

数组中有两个元素的示例，我知道我将`stories`根据事件发生的月份将数组分解为更小的数组，但我不知道该方法会是什么样子。这是我在`viewDidLoad`.

```
- (void)viewDidLoad {
[super viewDidLoad];

self.sections = [NSMutableDictionary dictionary];
for (UIEvent *event in stories)
{

    NSDate *dateRepresentingThisDay = tempDate;

    // If we don't yet have an array to hold the events for this day, create one
    NSMutableArray *eventsOnThisDay = [self.sections objectForKey:dateRepresentingThisDay];
    if (eventsOnThisDay == nil) {
        eventsOnThisDay = [NSMutableArray array];

    }

    // Add the event to the list for this day
    [eventsOnThisDay addObject:event];
}

// Create a sorted list of days
NSArray *unsortedDays = [self.sections allKeys];
self.sortedDays = [unsortedDays sortedArrayUsingSelector:@selector(compare:)]; 
```

}

我知道这条线`for (UIEvent *event in stories)`一定是不正确的，但我确定应该用什么代替它。是我从另一种方法中`tempDate`收到的格式化日期，旨在引用我的数组中的一个元素。如果可以的话，请指出我实现目标的正确方向，我将不胜感激。谢谢你。`NSDateFormatter``event``stories`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:26:04.093

您是否可以为上述数据创建一个类并使用 NSDate 属性来表示您的活动开始日期/时间？如果是这样，您可以使用 NSPredicate 根据您的开始日期属性对数组进行排序。[您可以在此链接](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html#//apple_ref/doc/uid/TP40001794-250409)上找到有关 NSPredicate 的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:28:55.157

为此，您必须使用以下步骤： 1\. 在表视图的节数方法中写入数组计数。2.您还必须通过比较堆栈溢出时可用的日期来修改您的数组，并根据您的要求排列在数组中。3\. 通过给出 title.text = [your array object at index[index path of section]] 来设置标题 4\. 现在你可以在其中给出你喜欢的行。

这只是您需要遵循的步骤。您明白我的意思了吗？

# magento - php round() 引导错误

> ID：14153966
> 
> 赞同：0
> 
> 时间：2013-01-04T08:58:56.653
> 
> 标签：magento

我的网站是由magento系统构建的，用于购物。现在我添加了一个关于不错的外国价格的功能。例如：如果价格为 $35.4 ，则更改为 $34.99；如果价格为 $35.5 ，则更改为 $35.99；

代码为：round(35.4) + 0.99；

现在有个问题，我的产品有几个选项链接“类型”、“颜色”。并且不同的选项显示不同的价格，就像 magento 中的默认可配置产品一样。在产品页面中：价格为$1000 显示$999.99，红色+$100 显示+$99.99，输入大号+50 显示+49.99。这里总价是1149.97。但在购物聊天中，价格为（1000 + 100 +50）+0.99 = 1149.99。所以我不知道如何处理它。

有人帮助我.....等待你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T01:02:20.133

因为magento最终价格是onFly计算的，你应该覆盖

```
app/code/core/Mage/CatalogRule/Helper/Data.php 
```

并将方法更改为 like as 。（你需要添加到 adminhtml 选项或硬编码它）

```
public function calcPriceRule($actionOperator, $ruleAmount, $price)
{
    $priceRule = 0;
    switch ($actionOperator) {
        case 'to_fixed':
            $priceRule = min($ruleAmount, $price);
            break;
        case 'to_percent':
            $priceRule = $price * $ruleAmount / 100;
            break;
        case 'by_fixed':
            $priceRule = max(0, $price - $ruleAmount);
            break;
        case 'by_percent':
            $priceRule = $price * (1 - $ruleAmount / 100);
            break;
        case 'my_custom_prices':
             //your price rules 
            break;
    }
    return $priceRule;
} 
```

# svn - SVN 更新不再起作用

> ID：14153970
> 
> 赞同：3
> 
> 时间：2013-01-04T08:59:11.347
> 
> 标签：svn, svn-update

我的一位同事在更新他的消息来源时遇到了问题。我们更新了文件夹，看起来它正在更新到最新版本。（“更新到修订 xxxx”）然后，我们检查日志（“显示日志”）中的一些文件 - 以及文件夹本身！ - 我们注意到更新过程没有正常工作。几个文件在两周前更新到不同的版本，等等。版本早于 17/12 的文件都是最新的，具有较新版本的文件仅更新到 17/12 的版本。在资源管理器中，文件带有绿色的“复选”，表示文件是最新的。

*   我们尝试了清理——但没有奏效。
*   删除文件并进行更新会使文件恢复到正确的修订版本。
*   看起来单独更新每个文件确实有效。
*   将某些文件添加到忽略列表后，问题可能开始出现。
*   可能是在将系统日期设置为过去的某个地方后开始出现问题（系统日期现在正确）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:04:17.803

根据我对 SVN 的经验，对您来说最快的解决方案是执行干净更新，但前提是您没有任何待提交的更改要提交。您可能由于意外或类似的事情损坏了存储库，而 SVN 不知道如何处理本地存储库中的某些文件。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T22:01:50.860

在命令提示符下尝试以下操作：

```
svn cleanup 
```

这对我有用。

# oracle - ORA-02070: 数据库在此上下文中不支持

> ID：14153972
> 
> 赞同：4
> 
> 时间：2013-01-04T08:59:19.153
> 
> 标签：oracle, dblink

我有一个像这样的查询

```
INSERT INTO sid_rem@dev_db
(sid)
select sid from v$session 
```

现在，当我执行这个查询时，我得到 `ORA-02070: database does not support in this context`

仅当我将 v$session 中的数据插入某个远程数据库时，才会发生此错误。它适用于任何其他表。

任何人都知道为什么会出现这个问题以及任何解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:38:56.253

使用`gv$session`而不是`v$session`：

```
INSERT INTO sid_rem@dev_db(sid)
select sid from gv$session; 
```

gv$ 视图是全局视图，也就是说，它们不限于一个节点（实例），而是可以看到整个数据库（RAC）。v$ 视图是 gv$ 的子视图。

在互联网上搜索我发现这与分布式事务有关。

[ora-code.com 上的主题](http://ora-02070.ora-code.com/msg/72556.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T14:24:16.913

迟到的答案，但可能仍然有用。我发现当尝试从系统视图中包含 LONG 类型列的数据库链接中选择系统视图时会发生此错误。如果可以改写查询以避免 LONG 列，则这些连接将正常工作。

例子：

```
SELECT dc_prod.*
  FROM dba_constraints@prod_link dc_prod
  INNER JOIN dba_constraints dc_dev
    ON (dc_dev.CONSTRAINT_NAME = dc_prod.CONSTRAINT_NAME) 
```

由于访问 LONG 列，将失败并返回 ORA-02070 `SEARCH_CONDITION`，但是

```
SELECT dc_prod.*
  FROM (SELECT OWNER,
               CONSTRAINT_NAME,
               CONSTRAINT_TYPE,
               TABLE_NAME,
               -- SEARCH_CONDITION,
               R_OWNER,
               R_CONSTRAINT_NAME,
               DELETE_RULE,
               STATUS,
               DEFERRABLE,
               DEFERRED,
               VALIDATED,
               GENERATED,
               BAD,
               RELY,
               LAST_CHANGE,
               INDEX_OWNER,
               INDEX_NAME,
               INVALID,
               VIEW_RELATED
          FROM dba_constraints@prod_link) dc_prod
  INNER JOIN (SELECT OWNER,
                     CONSTRAINT_NAME,
                     CONSTRAINT_TYPE,
                     TABLE_NAME,
                     -- SEARCH_CONDITION,
                     R_OWNER,
                     R_CONSTRAINT_NAME,
                     DELETE_RULE,
                     STATUS,
                     DEFERRABLE,
                     DEFERRED,
                     VALIDATED,
                     GENERATED,
                     BAD,
                     RELY,
                     LAST_CHANGE,
                     INDEX_OWNER,
                     INDEX_NAME,
                     INVALID,
                     VIEW_RELATED
          FROM dba_constraints) dc_dev
    ON (dc_dev.CONSTRAINT_NAME = dc_prod.CONSTRAINT_NAME) 
```

`SEARCH_CONDITION`工作正常，因为未访问 DBA_CONSTRAINTS 中的 LONG 列。

分享和享受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:30:23.713

我不知道为什么会这样，它可能在某个地方的文档中，但我的 Oracle-Docs-Fu 今天似乎已经抛弃了我。

一种可能的解决方法是使用[全局临时表](http://docs.oracle.com/cd/E11882_01/server.112/e25494/tables003.htm#ADMIN11633)

```
SQL> create table tmp_ben ( sid number );

Table created.

SQL> connect schema/pw@db2
Connected.
SQL> create table tmp_ben ( sid number );

Table created.

SQL> insert into tmp_ben@db1 select sid from v$session;
insert into tmp_ben@db1 select sid from v$session
                                               *
ERROR at line 1:
ORA-02070: database  does not support  in this context

SQL> create global temporary table tmp_ben_test ( sid number );

Table created.

SQL> insert into tmp_ben_test select sid from v$session;

73 rows created.

SQL> insert into tmp_ben@db1 select * from tmp_ben_test;

73 rows created. 
```

# objective-c - 如何使 XCode 4.5 Organizer Documentation 帮助类似于早期版本

> ID：14153978
> 
> 赞同：1
> 
> 时间：2013-01-04T08:59:26.800
> 
> 标签：objective-c, ios, xcode4, xcode4.2, xcode4.5

这是我对较新版本的 XCode（即 4.5+）的最大拒绝之一，如下所示：在早期版本中..当您`option click`使用系统定义的功能时..您会得到一个气泡，为您提供一个链接，直接将您带到组织者中的功能定义：

![在此处输入图像描述](../Images/014b34c40d4f9a4eebe58660a330b676.png)

![在此处输入图像描述](../Images/910fb6e87d10ded179d694cf23731ec1.png)

**但是在 XCode 4.5 及更高版本上……发生了变化：**不再提供函数的确切链接……相反，您只能单击*整个类的引用！*

知道如何改变吗？我遇到的另一个问题是我无法弄清楚如何在 xcode 4.5 上进行离线文档查看（它在早期版本中运行良好……是的，我确实在本地下载了所有文档并遵循了所有 SOF 链接……但没有运气！）..

![在此处输入图像描述](../Images/93ab0b728d05dfe4fefc0df963d75769.png) ![在此处输入图像描述](../Images/b45b0eeb4eca91415ac303cc69d24ead.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:15:28.770

确保通过 XCode->Preferences 在本地下载所有文档。一旦它是本地的，通过弹出窗口访问特定功能应该没有问题 - 它显示“类参考”，但它会自动打开类参考中的相关文档。

# bash - 我的 Enigma2 盒子上的录音清理脚本

> ID：14153979
> 
> 赞同：1
> 
> 时间：2013-01-04T08:59:34.887
> 
> 标签：bash, ksh

我创建了一个脚本来自动清理由 CRON 运行的 ET9000 Sat-Receiver 上的录音。

我已经在运行一个脚本来清理我录音中文件的旧 X-Days ......但我认识到

```
find /media/hdd/Serien/my_fav_series/ -mtime +5 
```

效率不够高，一个记录生成的四到六个文件中的一些具有不同的年龄......而且我想确保我总是会留下一些记录，即使这些记录超过 X 天！

所以这就是我到目前为止所得到的：

```
#!/bin/bash

DIR=$1
TS=$2
REC=$((TS * 6))
RECS=$((TS + 1))
FILES=$(ls /media/hdd/Serien/$DIR/|egrep '\.ts$'|wc -l)
DATE=$(date +"%Y-%m-%d %H:%M")

if [ $FILES -gt $TS ];
then

ls -ct /media/hdd/Serien/$DIR/|egrep '\.ts$'|tail -n+$TS > /tmp/del.lst

cd /media/hdd/Serien/$DIR

#cat /tmp/del.lst|xargs -0 rm
while IFS= read -r file
do
rm -- "$file"
done < /tmp/del.lst

cd -
rm /tmp/del.lst

echo "$DATE - $DIR - Saved the $RECS newest records & deleted older records in folder" >> /media/hdd/backup/cleanup.log
else
echo "$DATE - $DIR - Less then $TS records in folder" >> /media/hdd/backup/cleanup.log
fi 
```

它按预期工作，并删除了最旧的 *.TS 文件，同时保持通过参数给出的数量......

但它还没有我想要的智能！我仍然需要的是删除所有剩余的添加。剩下的我的意思是另一个不占用空间的记录部分：

```
20121221 1628 - ProSieben HD - How I Met Your Mother.ts
20121221 1628 - ProSieben HD - How I Met Your Mother.ts.ap
20121221 1628 - ProSieben HD - How I Met Your Mother.ts.cuts
20121221 1628 - ProSieben HD - How I Met Your Mother.ts.sc 
```

在这将被清理之后，我将在目录中留下 *.AP、*.CUTS、*.SC 和 *.META。而且我不知道如何编写一个函数来删除所有没有对应 *.TS 与 em 的文件...

编辑：

```
ls -ct /media/hdd/Serien/How_I_met_your_mother/

20130102 1600 - ProSieben HD - How I Met Your Mother.ts.meta
20130102 1600 - ProSieben HD - How I Met Your Mother.ts
20130102 1600 - ProSieben HD - How I Met Your Mother.ts.ap
20130102 1600 - ProSieben HD - How I Met Your Mother.ts.cuts
20130102 1600 - ProSieben HD - How I Met Your Mother.ts.sc
20130102 1600 - ProSieben HD - How I Met Your Mother.eit

20130102 1141 - ProSieben HD - How I Met Your Mother.ts.ap
20130102 1141 - ProSieben HD - How I Met Your Mother.ts.cuts
20130102 1141 - ProSieben HD - How I Met Your Mother.ts.sc
20130102 1141 - ProSieben HD - How I Met Your Mother.eit
20130102 1114 - ProSieben HD - How I Met Your Mother.eit 
```

“ls -ct”输出的前六行显示了一个完整的尚未清理的记录。第二组仅显示 5 个文件是已删除记录的剩余部分。

我需要的是一个函数，它可以识别第一个日期和时间模式并对组中的那些进行排序，然后检查该组是否包含 *.TS 文件，如果它不删除该组的其余部分。

我希望你能帮忙。

格雷茨·米尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:54:25.837

根据您的编辑，我有另一个想法。

1.  使用您在那里的格式将所有文件名转储到文本文件（文件 A）中，例如。

    20130102 1600 - ProSieben HD - 我如何遇见你的母亲
    .ts.meta 20130102 1600 - ProSieben HD - 我如何遇见你的母亲.ts
    20130102 1600 - ProSieben HD - 我如何遇见你的母亲.ts.ap
    20130102 1600 - ProSieben HD - 如何我遇见了
    你
    的妈妈

    20130102 1141 - ProSieben HD - 我 如何
    遇见
    你的母亲
    - 我如何遇见你的母亲.eit
    20130102 1114 - ProSieben HD - 我如何遇见你的母亲.eit

2.  grep 仅以 .ts 结尾的所有文件名并写入另一个文本文件（文件 B），例如。

    20130102 1600 - ProSieben HD - 我如何遇见你的 Mother.ts

3.  文件 B 仅包含良好的记录标识符。使用此标识符，从文件 A 中删除所有具有该名称的文件，不管结尾是什么。（也许使用 grep -v ）例如。

    20130102 1600 - ProSieben HD - 我如何遇见你的母亲
    .ts.meta 20130102 1600 - ProSieben HD - 我如何遇见你的母亲.ts
    20130102 1600 - ProSieben HD - 我如何遇见你的母亲.ts.ap
    20130102 1600 - ProSieben HD - 如何我遇见了
    你
    的妈妈

4.  删除与好标识符相关的所有文件名后，您在文件 A 中留下了“垃圾”文件名

5.  删除文件A中剩下的所有文件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T09:24:57.927

如果剩下的就像你提到的那样，你需要改变

```
egrep '\.ts$' 
```

到

```
egrep '\.ts.*$' 
```

看：

```
sharuzzaman.raslan@NL-4168 ~/test1
$ ls -1
a.ts
a.ts.ap
a.ts.cuts
a.ts.sc

sharuzzaman.raslan@NL-4168 ~/test1
$ ls -1| egrep '\.ts$'
a.ts

sharuzzaman.raslan@NL-4168 ~/test1
$ ls -1| egrep '\.ts.*$'
a.ts
a.ts.ap
a.ts.cuts
a.ts.sc 
```

# c# - IEnumerable 需要在使用 Enumerable.Distinct 之前进行排序？

> ID：14153985
> 
> 赞同：2
> 
> 时间：2013-01-04T09:00:07.723
> 
> 标签：c#

即使未排序，该`Enumerable.Distinct`方法是否会从实现的集合中删除所有重复项？`IEnumerable`

我来自 C++ 背景，想知道`Distinct`其行为是否类似于必须对序列进行排序的C++[独特算法。](http://www.cplusplus.com/reference/algorithm/unique/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:00:52.253

> Enumerable.Distinct 方法是否会从实现 IEnumerable 的集合中删除所有重复项，即使它没有排序？

是的。

请注意，您需要为自定义类型实现`IEqualityComparer<T>`接口`Equals`及其`GetHashCode`方法。

# python - 我应该如何在 python 中解析这个 xml 字符串？

> ID：14153988
> 
> 赞同：8
> 
> 时间：2013-01-04T09:00:08.267
> 
> 标签：python, xml, elementtree

我的 XML 字符串是 -

```
xmlData = """<SMSResponse xmlns="http://example.com" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
             <Cancelled>false</Cancelled>
             <MessageID>00000000-0000-0000-0000-000000000000</MessageID>  
             <Queued>false</Queued>
             <SMSError>NoError</SMSError>
             <SMSIncomingMessages i:nil="true"/>
             <Sent>false</Sent>
             <SentDateTime>0001-01-01T00:00:00</SentDateTime>
             </SMSResponse>""" 
```

我正在尝试解析并获取标签的值 - Cancelled、MessageId、SMSError 等。我正在使用 python 的[Elementtree](http://docs.python.org/2/library/xml.etree.elementtree.html#module-xml.etree.ElementTree)库。到目前为止，我已经尝试过类似的事情 -

```
root = ET.fromstring(xmlData)
print root.find('Sent')  // gives None
for child in root:
    print chil.find('MessageId') // also gives None 
```

虽然，我可以打印标签 -

```
for child in root:
    print child.tag
    //child.tag for the tag Cancelled is - {http://example.com}Cancelled 
```

以及它们各自的值 -

```
for child in root:
    print child.text 
```

我如何得到类似的东西 -

```
print child.Queued // will print false 
```

就像在 PHP 中一样，我们可以使用 root 访问它们 -

```
$xml = simplexml_load_string($data);
$status = $xml->SMSError; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T09:14:13.277

您的文档上有一个命名空间，您需要在搜索时包含命名空间：

```
root = ET.fromstring(xmlData)
print root.find('{http://example.com}Sent',)
print root.find('{http://example.com}MessageID') 
```

输出：

```
<Element '{http://example.com}Sent' at 0x1043e0690>
<Element '{http://example.com}MessageID' at 0x1043e0350> 
```

`find()`and方法也采用`findall()`命名空间映射；您可以搜索任意前缀，前缀将在该地图中查找，以节省输入：

```
nsmap = {'n': 'http://example.com'}
print root.find('n:Sent', namespaces=nsmap)
print root.find('n:MessageID', namespaces=nsmap) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T09:22:38.363

如果您使用 Python 标准 XML 库，则可以使用如下内容：

```
root = ET.fromstring(xmlData)
namespace = 'http://example.com'

def query(tree, nodename):
    return tree.find('{{{ex}}}{nodename}'.format(ex=namespace, nodename=nodename))

queued = query(root, 'Queued')
print queued.text 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:05:53.670

您可以创建一个字典并直接从中获取值...

```
tree = ET.fromstring(xmlData)

root = {}

for child in tree:
    root[child.tag.split("}")[1]] = child.text

print root["Queued"] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T09:35:52.197

与`lxml.etree`：

```
In [8]: import lxml.etree as et

In [9]: doc=et.fromstring(xmlData)

In [10]: ns={'n':'http://example.com'}

In [11]: doc.xpath('n:Queued/text()',namespaces=ns)
Out[11]: ['false'] 
```

与`elementtree`您一起可以：

```
import xml.etree.ElementTree as ET    
root=ET.fromstring(xmlData)    
ns={'n':'http://example.com'}
root.find('n:Queued',namespaces=ns).text
Out[13]: 'false' 
```

# c# - 使用 sqlcommand.executescalar 的声明

> ID：14153989
> 
> 赞同：1
> 
> 时间：2013-01-04T09:00:10.783
> 
> 标签：c#, asp.net, parameters, using

我正在使用`using`声明来验证客户编号。

```
using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
{
    connection.Open();

    using (SqlCommand cmdCheck = new SqlCommand("SELECT COUNT(CUSTOMER_NO) FROM WEBSITE_CUSTOMERS WHERE UPPER(CUSTOMER_NO) = '" + strCustomer.Trim().ToUpper() + "';", connection))
    {
        int nExists = (int)cmdCheck.ExecuteScalar();
        if (nExists > 0) 
            return true;
        else
            return false;
    }
} 
```

这是以前在stackoverflow上建议我检查预先存在的记录的代码......它工作得很好，但我想知道是否有一种方法可以使用参数作为客户编号，因为这个变量是通过表单输入的，我想保护它不被注射。`cmdCheck`当它在这样的语句中时，我将在哪里创建参数`using`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:08:24.357

初始化命令后添加参数。一个方便的方法是[`AddWithValue`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)：

```
const string sql = @"SELECT 
                        COUNT(CUSTOMER_NO) 
                     FROM 
                        WEBSITE_CUSTOMERS 
                     WHERE 
                        UPPER(CUSTOMER_NO) = @CUSTOMER_NO;";

using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
{
    using (SqlCommand cmdCheck = new SqlCommand(sql, connection))
    {
        cmdCheck.Parameters.AddWithValue("@CUSTOMER_NO", strCustomer.Trim().ToUpper());
        connection.Open();
        int nExists = (int)cmdCheck.ExecuteScalar();
        return nExists > 0;
    }
} 
```

# android - 从我的活动将数据库对象传递给远程服务（在不同的进程上）

> ID：14153990
> 
> 赞同：2
> 
> 时间：2013-01-04T09:00:13.527
> 
> 标签：android, database, service, locked

我有远程服务正在运行并收集写入我的数据库的流量。在我的应用程序中，我还使用该数据库来读取和写入数据。有时我得到“数据库锁定”异常。我正在为我的数据库对象使用单例模式，但即便如此，该错误也会出现。我猜是因为，由于我的服务在不同的进程中，我也需要在服务中创建数据库实例，所以有两个 db 对象。我的问题是，可以使用 binder 通过 AIDL 传递数据库对象吗？欢迎任何不同的方法或良好的做法。

# image-processing - MATLAB：显示适合图像的 RGB 值

> ID：14153996
> 
> 赞同：0
> 
> 时间：2013-01-04T09:00:39.263
> 
> 标签：image-processing, astro

我想读取宽场天空的 .fits 图像并显示星星中包含的 RGB 值。你能建议一种方法吗？我已使用 fitread 读取图像，但无法显示特定位置（星形）的 RGB 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T17:24:39.337

为此，您需要一个合适的 rgb 拟合文件。我所知道的唯一 .fits 查看器 ds9 不支持保存 rgb 拟合文件，而是作为三个单独的 (r,g,b) 拟合图像。您可以在各个帧上使用 wcstools ( [http://tdc-www.harvard.edu/wcstools/](http://tdc-www.harvard.edu/wcstools/) ) 或 scisoft ( [http://www.eso.org/sci/software/scisoft/ ) 中的“getpix”。](http://www.eso.org/sci/software/scisoft/)请注意，“getpix”返回给定图像 (x,y) 位置的像素值。ds9 不提供图像的物理位置，而是提供 wcs 坐标，因此您可能必须在调用 getpix 之前转换为图像坐标。