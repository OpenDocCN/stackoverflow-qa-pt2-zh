# StackOverflow 问答 14770000-14770999

# asp.net-mvc - 允许使用 kendoDropDownList 进行空白选择

> ID：14770000
> 
> 赞同：0
> 
> 时间：2013-02-08T10:01:15.283
> 
> 标签：asp.net-mvc, kendo-ui

我想为 KendoUi 下拉列表添加一个空白选择项。我遵循与以下链接中提到的相同。

[http://www.kendoui.c​​om/forums/ui/dropdownlist/how-to-allow-blank-selection-with-kendodropdownlist.aspx](http://www.kendoui.com/forums/ui/dropdownlist/how-to-allow-blank-selection-with-kendodropdownlist.aspx)

但是，如果我在 document.ready 事件中调用以下内容，

```
$("#ddl").data("kendoDropDownList").one("open", function() {
            $(this.ul[0].firstChild).html(" ");
}); 
```

我得到错误“一个”为空或未定义的错误。我已经添加了所需的参考文件。这可能是什么原因造成的？有没有其他方法可以添加空白选择选项？

我在我的 mvc 视图中定义了如下组合框。

```
<span class="list">
   @(Html.Kendo().DropDownList()
   .Name("facility").Events(events => events.Change("facilityChange"))
   .OptionLabel(" ")
   .DataSource(source => source.Read(read => read.Action("_GetFacilitiesForComboBox", "SuccessionInfo")))
   .DataTextField("FacilityName")
   .DataValueField("FacilityId")
   .Value(Model.NextJobFacilityId.ToString())
   .HtmlAttributes(new { style = "width:300px" })
    )
 </span> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:33:40.693

通过添加css实现

```
.k-popup .k-list .k-item {
    min-height: 1.8em;
} 
```

参考 - [http://www.kendoui.c ​​om/forums/ui/dropdownlist/empty-selectitems-do-no-display-correctly.aspx](http://www.kendoui.com/forums/ui/dropdownlist/empty-selectitems-do-no-display-correctly.aspx)

# ios - Appdelegate 错误

> ID：14770006
> 
> 赞同：0
> 
> 时间：2013-02-08T10:01:38.497
> 
> 标签：ios, objective-c, appdelegate

我收到运行时错误作为类应用程序委托的重复接口定义。那么这段代码有什么问题。

```
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:30:13.003

我刚刚遇到了这个问题。

我所做的是拖放具有`#import AppDelegate`来自另一个项目的文件，该项目也包含确切命名的 AppDelegate.h/.m 类。当我将文件放到我的项目中时，我从该项目中引用它们而不是复制它们。

通过这样做，这些文件与要导入的 AppDelegate 发生冲突，并且我收到一个编译错误，提示“类 AppDelegate 的接口定义重复。

我通过删除引用并按预期复制文件解决了这个问题。这可能不是您的问题，因为您遇到了运行时错误，但只是提醒一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:20:36.733

在头文件状态的开头：

```
#if !defined APPDELEGATE_H
#define APPDELEGATE_H 
```

并在结束状态：

```
#endif 
```

此错误最可能的根本原因是您在某些类头文件和 .m 文件中包含了 AppDelegate.h。在编译 .m 文件时，会包含相应的 .h 文件（可能还包含其他一些 .h 文件）。在任何这些 .h 文件中都包含 AppDelegate.h。另外，您将其包含在 .m 文件中。从编译器的角度来看，这将导致接口的重复定义。上面的解决方案并不是真正的解决方案。严格来说，这是一种解决方法。但它是相当标准的，苹果在他们的所有模板中都使用它。这只是一种解决方法，因为它不能解决问题，而是处理它。

正确的解决方案是：如果可以避免，在 .h 文件中不要包含其他 .h 文件。在适当的地方使用`@class`声明。当 .h 文件已包含在任何其他包含的 .h 文件中时，切勿在 .m 文件中重复包含任何 .h 文件。您可能会认为“这是一个痛苦的......”。你是对的 :) 因此我建议使用通用`#if !defined XY_H / #define XY_H / #endif`模式，尽管我相信这只是一种解决方法。

```
#if !defined APPDELEGATE_H
#define APPDELEGATE_H
#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end
#endif 
```

# linq - 链接OrderBy方法在Union方法后不生效

> ID：14770013
> 
> 赞同：0
> 
> 时间：2013-02-08T10:02:04.343
> 
> 标签：linq, linq-to-sql

我正在使用 LINQ 的 Union 方法来组合两个或多个集合。之后，我尝试通过在集合共有的字段上调用 ​​OrderBy 来对组合集合应用排序。这是我应用排序的方式：

```
combinedCollection.OrderBy(row => row["common_field"]); 
```

combineCollection 定义为：

```
Enumerable<DataRow> combinedCollection; 
```

我需要将排序应用于整个组合集合。出于某种原因，这并没有发生。相反，我看到在组合集合中的每个“集合”块中分别对其他字段应用了排序

和想法为什么？

# 第一次编辑

```
foreach (....)
{
    if (combinedCollection != null)
    {
        combinedCollection = combinedCollection.Union(aCollection);
    }
    else
    {
        combinedCollection = aCollection;
    }

} 
```

# 第二次编辑

```
 _Cmd.CommandText = "SELECT     Person.Contact.FirstName, Person.Contact.LastName, Person.Address.City, DATEDIFF(YY, HumanResources.Employee.BirthDate, GETDATE()) AS Age"
    + " FROM         HumanResources.EmployeeAddress INNER JOIN"
    + " HumanResources.Employee ON HumanResources.EmployeeAddress.EmployeeID = HumanResources.Employee.EmployeeID INNER JOIN"
    + " Person.Address ON HumanResources.EmployeeAddress.AddressID = Person.Address.AddressID INNER JOIN"
    + " Person.Contact ON HumanResources.Employee.ContactID = Person.Contact.ContactID AND HumanResources.Employee.ContactID = Person.Contact.ContactID AND "
    + " HumanResources.Employee.ContactID = Person.Contact.ContactID AND HumanResources.Employee.ContactID = Person.Contact.ContactID";

    DataTable employeeTable = new DataTable();
    _Adpt.Fill(employeeTable);
    DataRow[] allRows = null;

    allRows = employeeTable.Select("");

    IEnumerable<DataRow> filteredEmployeeRows;

    filteredEmployeeRows = from row in allRows select row;

    // Declare a variable to hold the city-filtered rows and set it to null for now
    IEnumerable<DataRow> cityFilteredEmployeeRows = null;

    //Copy filtered rows into a data table
    DataTable filteredEmployeeTable = filteredEmployeeRows.CopyToDataTable<DataRow>();

    foreach (DataRowView city in CityListBox.SelectedItems)
    {
        // create an exact copy of the data table
        DataTable filteredEmployeeCopyTable = filteredEmployeeTable.Copy();

        // Enumerate it
        IEnumerable<DataRow> filteredEmployeeRowsInSingleCity = filteredEmployeeCopyTable.AsEnumerable();

        // Apply the city filter
        filteredEmployeeRowsInSingleCity = _ApplyCityFilter(filteredEmployeeRowsInSingleCity, city["City"].ToString());

        if (cityFilteredEmployeeRows != null)
        {
            // Combine the filtered rows for this city with the overall collection of rows
            cityFilteredEmployeeRows = cityFilteredEmployeeRows.Union(filteredEmployeeRowsInSingleCity);
        }
        else
        {
            cityFilteredEmployeeRows = filteredEmployeeRowsInSingleCity;
        }

    }

    //apply ordering
    cityFilteredEmployeeRows.OrderBy(row => row["Age"]);
    //cityFilteredEmployeeRows.OrderByDescending(row => row["Age"]);

    EmployeeGridView.DataSource = cityFilteredEmployeeRows.CopyToDataTable<DataRow>(); 
```

…………

```
private IEnumerable<DataRow> _ApplyCityFilter(IEnumerable<DataRow> filteredEmployeeRows, string city)
{
    IEnumerable<DataRow> temp = filteredEmployeeRows;

    filteredEmployeeRows = from row in temp
                           where row["City"].ToString() == city
                           select row;
    return filteredEmployeeRows;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:04:27.330

我认为您对 LINQ 惰性评估有疑问，我将不得不进行调查以找出导致问题的部分。

使用`foreach(var item...)`in 惰性函数已经咬了我（因为稍后执行时它们都引用了最后一个迭代项），但在你的情况下，这看起来不是问题。

要检查它是真正的问题，您可以在每个 LINQ 函数之后使用 a`DataRow[]`代替`IEnumerable<DataRow>`and 调用。`.ToArray()`

编辑：我不确定我的代码是否正确，但你不能只使用：

```
 var cities = CityListBox.SelectedItems.Cast<DataRowView>()
      .Select(city => city["City"].ToString())
      .ToArray();

  var rows = allRows
      .Where(r => cities.Contains((string)r["City"]))
      .OrderBy(r => (int?)r["Age"])
      .ToArray(); // if you want to evaluate directly, not mandatory 
```

# python - 滚动到 ScrolledWindow/TextView 的末尾

> ID：14770018
> 
> 赞同：12
> 
> 时间：2013-02-08T10:02:10.370
> 
> 标签：python, gtk

在一个带有 Python 的 GTK3 程序上，我实现了一个日志。这是一个在 ScrolledWindow 中带有 TextBuffer 的 TextView。通过例程，我在此日志中添加了一个新行。之后它应该滚动到最后一行。

```
def append_log(self, line):
    self.textbuffer.insert(self.textbuffer.get_end_iter(), "\n"+line, -1)
    # scrolling down 
```

它应该看起来像这样：[http ://www.physik.tu-dresden.de/~s9472632/log_manual.png](http://www.physik.tu-dresden.de/~s9472632/log_manual.png)

但它不起作用。我试过下面的代码。

```
# nothing happens
adj = self.scrolledwindow.get_vadjustment()
adj.set_value(adj.get_upper()-adj.get_page_size())    # same without subtraction (only upper or page_size)
self.scrolledwindow.set_vadjustment(adj)              # with and without this line 
```

.

```
# nothing happens
self.textview.scroll_to_iter(self.textbuffer.get_end_iter(), 0.0, False, 0.5, 0.5) 
```

.

```
# works a bit but scroll bars cover the text (see picture below)
self.textview.scroll_to_mark(self.textbuffer.get_insert(), 0.0, False, 0.5, 0.5) 
```

图片：[http ://www.physik.tu-dresden.de/~s9472632/log_scroll.png](http://www.physik.tu-dresden.de/~s9472632/log_scroll.png)

scroll_to* 的最后四个参数（within_margin、use_align、xalign、yalign）似乎对结果没有影响。

如何让它发挥作用？

再见马库斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T13:40:45.083

所以我想我知道问题所在。我认为您连接了错误的信号，因此`TextView`尚未请求新尺寸。下面的代码使用了的`size-allocate`信号，`TextView`它就像一个魅力。

```
#!/usr/bin/env python

from gi.repository import Gtk, GObject

class W(Gtk.Window):

    def __init__(self):

        super(W, self).__init__()
        self.connect("destroy", Gtk.main_quit)
        self.set_default_size(200, 400)

        self._msg_i = 0
        self._sw = Gtk.ScrolledWindow()
        self.add(self._sw)

        self._tw = Gtk.TextView()
        self._tb = self._tw.get_buffer()

        self._sw.add_with_viewport(self._tw)
        #The signal should at least be connected after the scrolled window
        #is created, since the callback works on it.
        self._tw.connect("size-allocate", self._autoscroll)

        GObject.timeout_add(400, self.sim_log)  # Invokes spamming
        self.show_all()

    def sim_log(self, *args):
        """A simple spamming function to emulate some sort of logging"""
        self._msg_i += 1
        i = self._tb.get_end_iter()
        self._tb.insert(i, "\n* Message {0} recieved!".format(self._msg_i), -1)
        return True

    def _autoscroll(self, *args):
        """The actual scrolling method"""
        adj = self._sw.get_vadjustment()
        adj.set_value(adj.get_upper() - adj.get_page_size())

if __name__ == "__main__":

    w = W()
    Gtk.main() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-14T15:26:35.783

我刚刚有了这个并使 scroll_to_mark 线工作。我相信您的问题是将“use_align”设置为 False。该行应为：

```
self.textview.scroll_to_mark(self.textbuffer.get_insert(), 0.0, True, 0.5, 0.5) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-01T18:19:43.773

对于 gtkmm 3.0/C++11：

```
void append(std::string s) {
  textbuffer->insert(textbuffer->end(), s.c_str());

  // Wait for Gui to Redraw with added line to buffer
  while (gtk_events_pending())
    gtk_main_iteration_do(false);

  // Scoll to end of Buffer
  auto it = textbuffer->get_iter_at_line(textbuffer->get_line_count());
  TextView1.scroll_to(it);
} 
```

# php - php中的分页并保留结果

> ID：14770020
> 
> 赞同：-3
> 
> 时间：2013-02-08T10:02:14.553
> 
> 标签：php, mysql, pagination

试图在我的 php 代码中实现分页脚本（采用我在网上找到的示例代码）页面返回 mysql 查询的结果。默认是一个空的“关键字”，它返回数据库中的所有数据。在返回所有数据时分页工作成功，但是当我通过关键字搜索过滤结果时，单击“下一页”会在未过滤的结果中返回下一页（即搜索的关键字在刷新中丢失）

这是相关代码（希望它有意义）：

> 块引用
> 
> ```
>  $txt1='<A HREF="/memimomedia/music/128kb/';
>     $txt2='" ><IMG src="/Save.png" width="24" height="24" align="middle" border="0"></A>';
> 
>     $txt9a='<a href="';
>     $txt9b='" target="_blank">';
>     $txt9c='</a>';
> 
>     $txt10a='<audio src="./128kb/';        
>     $txt10d='" controls></audio>';
> 
> if(empty($_POST['searchkeywords']) && empty($_GET['searchkeywords']))     { $result = mysql_query("SELECT * 
> ```
> 
> FROM ppl_tracks WHERE Mixed !='0' ORDER BY Track"); } if(!empty($_GET['searchkeywords'])) { $Searchword=$_GET['searchkeywords']; }
> 
> ```
> if(!empty($_POST['searchkeywords']))  { $Searchword=$_POST['searchkeywords']; } 
> ```
> 
> $Totalresults = mysql_query("SELECT Track FROM (ppl_tracks LEFT JOIN TrackStyle ON ppl_tracks.RECNO = TrackStyle.TrackID LEFT JOIN StyleTable ON TrackStyle.StyleID = StyleTable.ID) LEFT JOIN TrackMood ON ppl_tracks.RECNO = TrackMood.TrackID LEFT JOIN MoodTable ON TrackMood .MoodID = MoodTable.ID WHERE (MoodChoices LIKE '%$Searchword%' OR Description LIKE '%$Searchword%' OR StyleChoices LIKE '%$Searchword%' OR Tempo LIKE '%$Searchword%' OR Track LIKE '%$Searchword %' ) AND Mixed =true GROUP BY Track ORDER BY Track" );
> 
> //这会检查是否有页码。如果没有，它会将其设置为第 1 页 if(isset($_GET['pagenum'])) { $pagenum = $_GET['pagenum']; } 其他 { $pagenum = 1; }
> 
> //这里我们统计结果数 $hits = mysql_num_rows($Totalresults);
> 
> //这是每页显示的结果数 $page_hits = 15;
> 
> //这告诉我们最后一页的页码 $last = ceil($hits/$page_hits);
> 
> //这确保页码不小于一，或大于我们的最大页数 if ($pagenum < 1) { $pagenum = 1; } elseif ($pagenum > $last) { $pagenum = $last; }
> 
> //这将设置在我们的查询中显示的范围 $max = 'limit ' .($pagenum - 1) * $page_hits .',' .$page_hits;
> 
> $result = mysql_query("SELECT * FROM (ppl_tracks LEFT JOIN TrackStyle ON ppl_tracks.RECNO = TrackStyle.TrackID LEFT JOIN StyleTable ON TrackStyle.StyleID = StyleTable.ID) LEFT JOIN TrackMood ON ppl_tracks.RECNO = TrackMood.TrackID LEFT JOIN MoodTable ON TrackMood .MoodID = MoodTable.ID WHERE (MoodChoices LIKE '%$Searchword%' OR Description LIKE '%$Searchword%' OR StyleChoices LIKE '%$Searchword%' OR Tempo LIKE '%$Searchword%' OR Track LIKE '%$Searchword %' ) AND Mixed =true GROUP BY Track ORDER BY Track $max" );
> 
> echo "曲目 - 艺术家描述下载";
> 
> $color="1";
> 
> while($row = mysql_fetch_array($result)) { $SelectedStyles = array(); $Track=$row['Track']; $SelectedStylesQuery = mysql_query(" SELECT StyleChoices FROM ppl_tracks LEFT JOIN TrackStyle ON ppl_tracks.RECNO = TrackStyle.TrackID LEFT JOIN StyleTable ON TrackStyle.StyleID = StyleTable.ID WHERE ppl_tracks.Track='$Track'"); while($row1 = mysql_fetch_array($SelectedStylesQuery)) { $SelectedStyles[] = $row1[StyleChoices]; } $SelectedMoods = 数组（）；$SelectedMoodsQuery = mysql_query("从 ppl_tracks 中选择 MoodChoices 左加入 TrackMood ON ppl_tracks.RECNO = TrackMood.TrackID 左加入 MoodTable ON TrackMood.MoodID = MoodTable.ID WHERE ppl_tracks.Track='$Track'"); 而($row2 = mysql_fetch_array($SelectedMoodsQuery)) { $SelectedMoods[] = $row2[MoodChoices]; } 排序（$SelectedMoods）；排序（$选定样式）；$stringS= implode(", ", $SelectedStyles); $stringM= implode(", ", $SelectedMoods);
> 
> if($color==1) { 回声 ""; 回声“”。$row['Track'] 。“——”。ucwords($row['Artist']) 。""; 回声“”。$字符串M 。"
> ".$stringS.""; 回声“”。$txt1.$row['FileName'].$txt2 。""; 回声“”。$txt10a.$row['FileName'].$txt10d.""; 回声“”；$color="2"; }
> 
> 否则 { 回声 ""; 回声“”。$row['Track'] 。“——”。ucwords($row['Artist']) 。""; 回声“”。$字符串M 。"
> ".$stringS.""; 回声“”。$txt1.$row['FileName'].$txt2 。""; 回声“”。$txt10a.$row['FileName'].$txt10d.""; 回声“”；$color="1";}
> 
> } 回声“”；
> 
> // 这会向用户显示他们在哪个页面，以及总页面数
> 
> echo " --page $pagenum of $last--
> 
> "; // 首先我们检查我们是否在第一页。如果是，那么我们不需要指向上一页或第一页的链接，所以我们什么也不做。如果不是，那么我们生成到第一页的链接页，然后到上一页。
> 
> if ($pagenum == 1)
> 
> {
> 
> }
> 
> 别的
> 
> { 回声“ <<-第一”; 回声“-”；$previous = $pagenum-1; 回声“<-上一个”；}
> 
> $计数器=1；while ( $counter <= $last ) { if ($counter==$pagenum) { echo " - "; 回声“$计数器”；回声“-”；}
> 
> ```
>  else
> 
>     {
>   echo " - ";
>   echo " <a href='{$_SERVER['PHP_SELF']}?pagenum=$counter'>$counter</a> ";
>   echo " - ";
>     } $counter = $counter + 1; } 
> ```
> 
> //这和上面一样，只检查我们是否在最后一页，然后生成Next和Last链接
> 
> if ($pagenum == $last)
> 
> {
> 
> }
> 
> 否则 { $next = $pagenum+1; 回声“下一个->”；回声“-”；回声“最后->>”；} mysql_close($con); ?>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:07:40.310

每次进入新页面时都会重新加载页面，因此您需要再次将搜索词传递到页面中。最简单的方法是将分页链接更新为以下内容：

```
echo " <a href='{$_SERVER['PHP_SELF']}?searchkeywords=" . $_REQUEST["searchkeywords"] . "&pagenum=$counter'>$counter</a> "; 
```

$_REQUEST 将处理 $_POST 和 $_GET 变量，但您可能希望以自己的方式执行此操作。简单地说，您只需将搜索关键字传递回您的网址

# ios - NSURLCache 在 iOS 6.1 下崩溃

> ID：14770022
> 
> 赞同：4
> 
> 时间：2013-02-08T10:02:27.307
> 
> 标签：ios, ios6, nsurlcache

使用 iOS 6.1，我的应用程序在尝试发出多个 HTTP 请求时会在启动后直接崩溃，但它在任何小于 6.1 的操作系统上都可以正常工作。

我 在从 Queue 调用`EXC_BAD_ACCESS`的函数中遇到崩溃：每次启动我的应用程序时，除了第一次。`strlen``com.apple.CFURLCACHE_work_queue`

![NSURLCache 崩溃](../Images/5dcb7380f1087222f254670944acb297.png)

我可以通过在应用程序启动后直接清除 NSURLCache 来解决问题：

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

还有其他人经历过这些崩溃吗？导致这些崩溃的应用程序代码中是否存在某些问题？或者这应该是提交给苹果的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:35:02.293

自 iOS 6.1 以来，使用新安装的应用程序遇到了类似的崩溃。不同之处在于点击表格视图中的文本单元格时会发生崩溃。此时没有发出任何 Web 请求。

这是BT：

```
thread #4: tid = 0x2903, 0x3ae7ad74 libsystem_c.dylib`strlen + 28, stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
frame #0: 0x3ae7ad74 libsystem_c.dylib`strlen + 28
frame #1: 0x3ac6be24 libsqlite3.dylib`___lldb_unnamed_function282$$libsqlite3.dylib + 1232
frame #2: 0x3ac74a5e libsqlite3.dylib`sqlite3_file_control + 174
frame #3: 0x328493fe CFNetwork`__CFURLCache::RecreateEmptyPersistentStoreOnDiskAndOpen_NoLock() + 30
frame #4: 0x32849000 CFNetwork`__CFURLCache::RecreateEmptyPersistentStoreOnDiskAndOpen() + 44
frame #5: 0x327f9488 CFNetwork`__CFURLCache::OpenDatabase() + 192
frame #6: 0x32846a72 CFNetwork`__CFURLCache::ProcessCacheTasks0(bool) + 358
frame #7: 0x32846900 CFNetwork`__CFURLCache::ProcessCacheTasks(bool) + 36
frame #8: 0x3284681e CFNetwork`__CFURLCache::_CFURLCacheTimerCallback0() + 358
frame #9: 0x328466ac CFNetwork`__CFURLCache::_CFURLCacheTimerCallback(void*) + 32
frame #10: 0x328490fc CFNetwork`__SignalWorkerTaskToPerformWork_block_invoke_0 + 12
frame #11: 0x3ae4611e libdispatch.dylib`_dispatch_call_block_and_release + 10
frame #12: 0x3ae49ece libdispatch.dylib`_dispatch_queue_drain$VARIANT$mp + 142
frame #13: 0x3ae49dc0 libdispatch.dylib`_dispatch_queue_invoke$VARIANT$mp + 40
frame #14: 0x3ae4a91c libdispatch.dylib`_dispatch_root_queue_drain + 184
frame #15: 0x3ae4aac0 libdispatch.dylib`_dispatch_worker_thread2 + 84
frame #16: 0x3ae7aa10 libsystem_c.dylib`_pthread_wqthread + 360
frame #17: 0x3ae7a8a4 libsystem_c.dylib`start_wqthread + 8 
```

将此作为 TSI 报告给 Apple，经过审查，他们要求我将此记录为错误，仍然需要这样做。

有趣的是，您找到的解决方案也帮助了我，在启动时清除缓存解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T11:05:25.253

这只是答案的一半，但我在运行单元测试时遇到了一个非常相似的问题。奇怪的是，这似乎只是今天才开始发生。

我的问题的全部细节在[这个 Apple 开发论坛线程](https://devforums.apple.com/message/797625#797625)中进行了概述。

我们的问题之间的共同联系似乎是调用`RecreateEmptyPersistentStoreOnDiskAndOpen_NoLock()`. 如果我对 CFURLCache 的理解是正确的，并且基于回溯，它在内部使用 sqlite3 数据库作为缓存。我假设这个函数调用在磁盘上创建了空的 sqlite3 数据库。

通过删除模拟器的 Library/Caches 目录`~/Library/Application Support/iPhone Simulator/6.1/Library/Caches`（

删除整个模拟器主目录并通过在模拟器中启动我的应用程序来重新创建它也可以修复并重新创建问题。

我猜这是一个操作系统错误；奇怪的是为什么对我来说，它才刚刚开始发生。

# php - 无法通过php发送邮件

> ID：14770025
> 
> 赞同：0
> 
> 时间：2013-02-08T10:02:38.403
> 
> 标签：php, smtp, sendmail

我正在尝试使用 php 发送邮件。我正在使用 WampServer。所以我尝试了以下代码

```
ini_set("SMTP","smtp.gmail.com" );
ini_set("smtp_port","465");
ini_set('sendmail_from', 'person1@gmail.com');          
$to = "person2@gmail.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "person1@gmail.com";
$headers = "From:" . $from;
$retval = mail($to,$subject,$message,$headers);
   if( $retval == true )  
   {
      echo "Message sent successfully...";
   }
   else
   {
      echo "Message could not be sent...";
   } 
```

但连接需要更多时间，并说无法与 localhost 连接。请帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:23:48.307

试试这个配置：

[http://blog.techwheels.net/send-email-from-localhost-wamp-server-using-sendmail/](http://blog.techwheels.net/send-email-from-localhost-wamp-server-using-sendmail/)

这可能会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T10:06:48.340

不知何故，对我来说，它不是“smtp.gmail.com”，而是与“ssl：smtp.gmail.com”一起使用这一行：

```
ini_set("SMTP","smtp.gmail.com" ); 
```

应该

```
ini_set("SMTP","ssl:smtp.gmail.com" ); 
```

另外，请参阅对类似问题的回复：[Send email using the GMail SMTP server from a PHP page](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-08T10:25:49.310

你正试图从你的本地主机（你的电脑）发送邮件我猜它没有设置发送邮件。将脚本移动到生产服务器，它将工作

# matlab - 将结果作为向量返回

> ID：14770027
> 
> 赞同：-2
> 
> 时间：2013-02-08T10:02:42.557
> 
> 标签：matlab, vector

如果我创建一个 for 循环并返回某个向量中的所有值，`matlab`如下所示：

```
function elements(v)
for i=1:length(v)
    c(i) = v(i)
end 
```

当我运行以下命令时，我得到如下所示的结果：

```
>> A = [1 2 3 4]

A =

     1     2     3     4

>> elements(A)

c =

     1

c =

     1     2

c =

     1     2     3

c =

     1     2     3     4 
```

我怎样才能将结果返回为：`c = [1 2 3 4]`仅？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:07:30.487

```
function elements(v)
for i=1:length(v)
    c(i) = v(i);
end

disp(c) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:11:32.960

更紧凑的解决方案

```
function c = elements(v)
for i=1:length(v)
    c(i) = v(i);
end 
```

请注意，它看起来与其他解决方案没有太大区别，但我认为这是您想要做的事情，假设您想做一些复杂/依赖于 c 的事情。

如果您只想要所有元素，只需使用`v(:)'`，`v`或者`v'`像提到的@fpe 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:11:50.627

我不知道这是否是你真正的意思，但我会这样：

```
function c = so_test(v)
 c = v(:)';
end 
```

# php - 保护 Smarty -> 任何获取所有分配变量的方法？

> ID：14770030
> 
> 赞同：1
> 
> 时间：2013-02-08T10:02:52.063
> 
> 标签：php, security, smarty

我创建了一个额外的层，用户可以在某种 HTML 模板模块中使用自己的 Smarty 代码，但我需要确保它已保存。

到目前为止，我已经禁用`{php}`-tags 并且只能`{$smarty.now}`访问。我想知道是否有一种方法，因为模板中存在 Smarty，可以将所有分配的变量都分配给模板？如果是这样，如何请求所有已分配变量的列表，以便我可以对此进行检查并将其排除在解析之外（意味着：一旦用户提交，就忽略 tpl-source）。

非常感谢我忽略的“保护”/限制 Smarty 访问的任何帮助或贡献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:31:27.653

首先，采取过于强大的方式并限制它以保护它是一种错误的方法。众所周知，Java 在他们的浏览器插件上多年来一直失败。相反，如果您想拥有真正安全的解决方案，我建议您编写自己的微型模板引擎，该引擎只有您需要提供给用户的功能。在那种情况下，坏人就没有办法剥削了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T10:51:25.503

如果我理解正确，您正在寻找的是`$smarty->getTemplateVars();`这将为您提供一个包含已分配模板变量的名称/值的数组。

引用[API 文档](http://www.smarty.net/docs/en/api.get.template.vars.tpl)：

> ## 姓名
> 
> getTemplateVars() — 返回分配的变量值
> 
> ## 描述
> 
> `array getTemplateVars(string varname);`
> 
> 如果没有给定参数，则返回所有已分配变量的数组。
> 
> **例 14.31。获取模板变量**
> 
> ```
> <?php
> // get assigned template var 'foo'
> $myVar = $smarty->getTemplateVars('foo');
> 
> // get all assigned template vars
> $all_tpl_vars = $smarty->getTemplateVars();
> 
> // take a look at them
> print_r($all_tpl_vars);
> ?> 
> ```

# c# - 将具有字符串数组成员的类传递给 Web 服务

> ID：14770031
> 
> 赞同：0
> 
> 时间：2013-02-08T10:03:02.450
> 
> 标签：c#, arrays, string, web-services

我在 Web 服务中有以下类：

```
[Serializable]
public class WebServiceParam
{
    public string[] param;
} 
```

在客户端应用程序中：

```
string[] reportFields = new string[] { "invoiceNo", "sale", "item", "size", "missingQty", "Country", "auto" };
param.ReportFields = reportFields;
serviceInstance.CreateReport(param); 
```

但是，字符串数组成员为“null”

这是我的网络服务类：

```
[WebService(Description = "Service related to producing various report formats", Namespace = "http://www.apacsale.com/ReportingService")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class ReportingService : System.Web.Services.WebService
{
    ReportingServiceImpl m_reporting;
    [WebMethod]
    public string CreateReport(ReportingParameters param)
    {
        if (param != null)
        {
            m_reporting = new ReportingServiceImpl(param);
            m_reporting.Create();
            return m_reporting.ReturnReport();
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:16:15.703

您需要使用 [DataContract] 属性标记类，并且数组应该是属性而不是字段。这就是您的 WebServiceParam 的外观：

```
[DataContract]
public class WebServiceParam
{
    [DataMember]
    public string[] Param {get; set;}
} 
```

服务接口是这样的：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    void CreateReport(WebServiceParam parameters);
} 
```

现在您可以使用：

```
WebServiceParam wsParam = new WebServiceParam();
wsParam.Param = new string[] { "invoiceNo", "sale", "item", "size", "missingQty", "Country", "auto" };
serviceInstance.CreateReport(wsParam); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:07:52.787

我觉得与`param`变量有关的混乱；

```
WebServiceParam temp = new WebServiceParam();
string[] reportFields = new string[] { "invoiceNo", "sale", "item", "size", "missingQty", "Country", "auto" };
temp.param = reportFields;
serviceInstance.CreateReport(temp); 
```

# java - 用正则表达式测试字符串？

> ID：14770039
> 
> 赞同：1
> 
> 时间：2013-02-08T10:03:24.947
> 
> 标签：java, android, regex

目前我正在测试一个字符串以在交换机上进行提示。

```
if (!parseCommand.contains("switch#") 
```

但我刚刚意识到，用户可以将名称从 switch 更改为带有数字或字母的名称。但是，它总是以 # 结尾。我应该怎么做才能以更一般的方式对此进行测试？用于`String.matches`测试 a# 并回顾 a-zA-Z0-9？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:07:31.820

```
if (!parseCommand.matches ("\\w+#.*")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:08:56.720

正如你所说，只使用 String.matches 函数 - 可能是这样

```
parseCommand.matches("\\w+#$") 
```

这确保它总是以'#'结尾

# ajax - Yii Bootstrap 表单 AJAX 验证和高亮显示

> ID：14770047
> 
> 赞同：1
> 
> 时间：2013-02-08T10:03:51.930
> 
> 标签：ajax, forms, validation, yii, highlight

我想分享我的代码片段以验证 yii bootstrap ajax 表单并突出显示错误和有效字段。表单应该禁用了验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:03:51.930

我想分享我的代码片段以验证 yii bootstrap ajax 表单并突出显示错误和有效字段。表单应该禁用了验证。

形式：

```
 $form = $this -> beginWidget('bootstrap.widgets.TbActiveForm', array(
        'id' => 'user-time-form',
        'type' => 'horizontal',
)); 
```

提交按钮：

```
$this -> widget('bootstrap.widgets.TbButton', array(
            'buttonType' => 'ajaxSubmit',
            'icon' => 'ok',
            'url' => Yii::app() -> createUrl('hr/userTime/create'),
            'label' => 'Submit',
            'ajaxOptions' => array('success' => 'function(data){
                    var obj = $.parseJSON(data);
                    if(obj.status=="success"){
                        $("#newUserTime").modal("hide");
                        setTimeout(function(){location.reload(true);},400);
                    } else {
                        $("#userTime-form-error-div").show();
                        $("#userTime-form-error-div").html("");
                        var $inputs = $("#user-time-form :input");
                        $inputs.each(function() {
                            $(this).removeClass("error");
                            $(this).closest(\'div[class^="control-group"]\').addClass("success validating");
                        });
                        for (var p in obj) {
                            if(document.getElementById(p)) {
                                $("#"+p).closest(\'div[class^="control-group"]\').removeClass("success");
                                $("#"+p).closest(\'div[class^="control-group"]\').addClass("error");
                            }
                            $("#userTime-form-error-div").append(obj[p]  + "<br/>");
                        }
                    }
                }'),
    )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T02:30:41.590

将此参数添加到您的 TbActiveForm

```
'enableAjaxValidation'=>true, 
```

# ios - 下拉以更新 IOS/Android 的 Flash 中的功能

> ID：14770050
> 
> 赞同：1
> 
> 时间：2013-02-08T10:03:58.800
> 
> 标签：ios, actionscript-3, air, flash-builder

我想在我的 IOS 应用程序中实现向下滚动以刷新 facebook IOS 应用程序等功能。但不知道如何在闪存中实现它。如果有人有任何想法，请与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:47:14.080

我认为一种可能的解决方案是，如果您使用的是列表项，并且当您将列表向下拉时，您会注意到组件的高度（滚动区域）增加了（唯一的时间，高度会增加）。您可以尝试获取初始高度并在组件高度更改时添加事件侦听器，向服务器发送新数据请求。我有一段时间没有使用 as3 了，但试试这样的东西。

```
1\. Store initial list height
2\. add an event listener on initialise() of the view; For the event listener you can even use swipe down(event.offsetY) method and look for height change.
3\. on change of height (i.e increased), send new request to server 
```

如果您尝试，请发布代码，我们可以一起解决。

# android - android中已注册的设备驱动程序列表

> ID：14770051
> 
> 赞同：0
> 
> 时间：2013-02-08T10:04:04.320
> 
> 标签：android, list, keyboard, terminal, driver

我的 mini6410 板上有一个 android 系统。
**我可以查看已注册的设备驱动程序列表吗？**

注意：android 在开发工具中有一个终端模拟器，但这个模拟器没有虚拟键盘。
设备无法识别外部 USB 键盘。但我可以使用 USB 电缆连接到我的 mini6410 板。
使用终端，我们可以使用以下命令获取已注册驱动程序的列表：**ls /dev**
但不幸的是，没有键盘我无法做到这一点:(

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:40:51.310

已解决：
要查看 /dev 文件夹的内容，我使用了在主 android 菜单上找到的**ES 文件资源管理器。**
只需运行它并单击左上角的 sd 卡图标。（如果您看不到 sd 卡图标，请单击右上角的小窗口图标）。
单击 sd 卡图标后，它会变为主页图标。现在我们在设备之家。指向名为 dev 的文件夹，在这里我们可以找到所有已注册的驱动程序。有些在文件夹中，有些则直接在该路径中（/ dev）

# gnuplot - 如何使用 gnuplot 在时间序列中绘制直方图

> ID：14770053
> 
> 赞同：0
> 
> 时间：2013-02-08T10:04:05.923
> 
> 标签：gnuplot

我是 gnuplot 的新手，如果能帮助我了解如何绘制时间序列直方图，我将不胜感激

我的数据如下所示：

```
#Date    Time     WKB
20130206 11:45:57 4544
20130206 11:45:57 5113 
20130206 11:45:57 5117 
20130206 11:45:57 5123 
20130206 11:45:57 5129 
20130206 11:45:57 5151 
................... 
```

我有大约 2 天的数据。

我需要的是绘制以下图表：

1.  直方图中 x 分钟（例如 5 分钟）的 WKB 平均值
2.  直方图中 x 分钟（例如 5 分钟）的 WKB 累积总和

这是我当前的脚本：

```
set xdata time
set xtics 36000
set timefmt "%Y%m%d %H:%M:%S"
set format x "%Y-%m-%dT%H:%M:%S"
plot using 1:3 title smooth cumulative 
```

我确信我错过了很多东西。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:06:26.263

不幸的是，gnuplot 不太适合处理诸如此类的数据处理任务。您可能*会*想出一个解决方案，但它会非常混乱且超级难以使用。幸运的是，gnuplot 可以从其他程序的管道中读取——所以最简单的解决方案是编写一个简单的脚本来处理输入数据并将其写入标准输出。我会选择python：

```
import time
from datetime import datetime
from collections import defaultdict
import sys

def datetime_2_epoch(dt):
    return int(time.mktime(dt.timetuple()))

def epoch_2_datetime(epoch):
    return datetime.fromtimestamp(epoch)

data = defaultdict(list)
with open(sys.argv[1]) as fin:
    for line in fin: #Parse file 1 line at a time
        timestr,datastr = line.rsplit(None,1)
        try:
            dt = datetime.strptime(timestr,"%Y%m%d %H:%M:%S")
            val = float(datastr)
        except ValueError: #couldn't read this line.  must be a comment or something.
            continue

        bin = datetime_2_epoch(dt)//300 #300 = 60*5 -- 5 minute bin size
        data[bin].append(val)

for bin,lst in sorted(data.items()):
    cum_sum = sum(lst)
    avg = cum_sum/len(lst)
    print epoch_2_datetime(bin*300),avg,cum_sum 
```

这会将您的数据文件（在您的示例数据上运行）格式化为：

```
2013-02-06 11:45:00 5029.5 30177.0
2013-02-06 11:55:00 5029.5 30177.0 
```

可以用 gnuplot 中的框绘制：

```
set xdata time
set timefmt '%Y-%m-%d %H:%M:%S'
set yrange [0:*]
plot '<python test.py test.dat' u 1:3 w boxes title "5 minute average" 
```

或者

```
plot '<python test.py test.dat' u 1:4 w boxes title "5 minute sum" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-12T11:42:18.077

*即使使用 gnuplot 4.6.0（在 OP 提出问题时），也可以“轻松”处理仅*使用 gnuplot 的时间序列直方图。检查以下示例。它生成一个包含随机数据的文件（现在是正常分布的时间），并将其放入 5 分钟的 bin 中。检查`help smooth unique`和`help smooth frequency`。

**代码：（**使用 gnuplot 4.6.0 和 5.4.1 测试）

```
### time data histograms
reset

FILE = "myData.dat"

# create some random test data
set print FILE
    now = time(0)
    do for [i=1:1000] {
        print sprintf("%s %d", strftime("%Y%m%d %H:%M:%S",now+invnorm(rand(0))*3600), int(rand(0)*2000)+3000)
    }
set print

set xdata time
set timefmt "%Y%m%d %H:%M:%S"
set format x "%d.%m.\n%H:%M"

myBinWidth = 300   # 300 sec = 5 min
Bin(col) = floor(timecolumn(col)/myBinWidth)*myBinWidth

set boxwidth myBinWidth absolute
set xtics out
set style fill transparent solid 0.3

set multiplot layout 2,1
    set ytics 500
    plot FILE u (Bin(1)):3 smooth unique w boxes lc rgb "red" ti "Average in 5 min bins"

    set ytics 50000
    plot FILE u (Bin(1)):3 smooth freq w boxes lc rgb "blue" ti "Sum in 5 min bins"
unset multiplot
### end of code 
```

**结果：**

[![在此处输入图像描述](../Images/262cc8e79801b1acc39271944fa8ac45.png)](https://i.stack.imgur.com/6SVTW.png)

# python - 列出所有边的所有面

> ID：14770057
> 
> 赞同：2
> 
> 时间：2013-02-08T10:04:24.587
> 
> 标签：python, cython

一个非常简单的问题：如何在 Python（或 Cython）中有效地计算以下数量。

给定 3D 多边形列表（多边形

有以下形式的多边形列表：

```
vertex = np.array([[0, 0, 0], [0, 0, 1], [0, 1, 0],[1, 0, 0],[0.5, 0.5, 0.5]], order = 'F').T
polygons = np.array([3, 0, 1, 2, 4, 1, 2, 3 ,4]) 
```

即多边形是一维数组，它包含形式为[N，i1，i2，i3，i4，...]的条目，N是多边形中的顶点数，然后是顶点数组中顶点的id号（在上面的例子中，一个三角形有 3 个顶点 [0,1,2] 和一个多边形有 4 个顶点 [1,2,3,4]

我需要计算信息：所有边的列表以及每条边的信息，哪些面包含该边。

我需要快速完成：顶点的数量可能很大。

**更新**
多边形是封闭的，即多边形`[4, 0, 1, 5, 7]`意味着有4个顶点和边是`0-1, 1-5, 5-7, 7-0` 实际上面是多边形的同义词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:27:53.807

不知道这是不是最快的选择，很可能不是，但它有效。我认为最慢的部分是`edges.index((v, polygon[i + 1]))`我们必须找到这个边缘是否已经在列表中。顶点数组并不是真正需要的，因为边是一对顶点索引。我使用 face_index 作为多边形索引的参考，因为您没有写出什么是面。

```
vertex = [[0,0,0], [0,0,1], [0,1,0],[1,0,0],[0.5,0.5,0.5]]
polygons = [3,0,1,2,4,1,2,3,4]
_polygons = polygons
edges = []
faces = []
face_index = 0

while _polygons:
    polygon = _polygons[1:_polygons[0] + 1]
    polygon.append(polygon[0])
    _polygons = _polygons[_polygons[0] + 1:]

    for i, v in enumerate(polygon[0:-1]):
        if not (v, polygon[i + 1]) in edges:
            edges.append((v, polygon[i + 1]))
            faces.append([face_index, ])
        else:
            faces[edges.index((v, polygon[i + 1]))].append(face_index)
    face_index += 1

edges = map(lambda edge, face: (edge, face), edges, faces)

print edges

<<< [((0, 1), [0]), ((1, 2), [0, 1]), ((2, 0), [0]), ((2, 3), [1]), ((3, 4), [1]), ((4, 1), [1])] 
```

您可以通过手动删除线并将多边形的第一个顶点附加到多边形中的顶点列表来使其更快`polygon.append(polygon[0])`，这应该不是问题。我的意思是`polygons = [3,0,1,2,4,1,2,3,4]`变成`polygons = [3,0,1,2,0,4,1,2,3,4,1]`.

PS 尝试使用[PEP8](http://www.python.org/dev/peps/pep-0008/)。这是一种代码类型。它说您应该在可迭代的每个逗号之后放置一个空格，以便更容易阅读。

# c++ - C ++中的函数指针问题

> ID：14770060
> 
> 赞同：5
> 
> 时间：2013-02-08T10:04:42.180
> 
> 标签：c++, function-pointers

我打算使用函数指针在一个类中实现不同的函数。但是，我在尝试实现一个这样的功能时遇到了一些麻烦。

代码在这里：

```
std::vector<int> * (*create_vector)()
{
    std::vector<int> * vec_p = new std::vector<int>;
    return vec_p;
} 
```

错误如下：

```
3: [Error] expected primary-expression before '*' token
3: [Error] 'vec_p' was not declared in this scope
3: [Error] expected '}' before ';' token 
4: [Error] expected unqualified-id before 'return' 
5: [Error] expected declaration before '}' token 
```

我对函数指针有什么误解，还是另一个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T10:08:13.817

`std::vector<int> * (*create_vector)()`声明一个指向函数的指针。一个指针。不是函数。您不能继续使用指针并假装它是一个函数并定义它的主体。您需要分别声明两者：

```
std::vector<int> * create_vector()
{
    std::vector<int> * vec_p = new std::vector<int>;
    return vec_p;
}

std::vector<int> * (*pcreate_vector)() = create_vector; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T10:09:09.530

你不能同时声明一个函数和一个函数指针。

只需定义您的功能：

```
std::vector<int>* create_vector()
{
    std::vector<int>* vec_p = new std::vector<int>;
    return vec_p;
} 
```

然后，最好是制作一个 typedef（为了代码可读性）：

```
typedef std::vector<int>* (*create_vector_func)(); 
```

现在你可以使用它了：

```
create_vector_func myFunc = &create_vector; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T10:08:51.670

实现了函数，函数指针可以指向函数。函数指针本身没有实现。

改成：

```
std::vector<int>* create_vector()
{
    std::vector<int> * vec_p = new std::vector<int>;
    return vec_p;
} 
```

然后你可以声明一个指向的函数指针`create_vector()`。管理函数指针可以使用 a 来简化`typedef`：

```
typedef std::vector<int>* (*func_t)();    // C++03
typedef decltype(&create_vector) func_t; // C++11

func_t f = create_vector;
auto f = create_vector; // C++11 option also. 
```

尽可能避免动态分配，因为它引入了额外的复杂性，使代码更容易出错。在 C++11 中，引入了移动语义，因此在这种情况下按值返回的成本显着降低，因为`vector`命名`vec_p`将被*移动*（因为它即将到期），而不是从中复制。如果您必须动态分配使用[智能指针](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)的形式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T10:08:52.487

这不是您定义函数指针的方式。首先使用您拥有的主体定义函数，然后将其分配给函数指针。

# javascript - Kinetic js如何在一个阶段缩放图层？

> ID：14770063
> 
> 赞同：0
> 
> 时间：2013-02-08T10:04:46.973
> 
> 标签：javascript, kineticjs

![在此处输入图像描述](../Images/e0f63bb0c6499522f2e2e278d9f3df92.png)

我想在我的应用程序中添加缩放功能。我使用 Kinetic js 并在某处找到了此功能的解决方案，但由于某种原因我无法应用这些解决方案。我试图调整解决方案但不成功。我有很多 Kinetic.Layer ，其中一些会在缩放时缩放。我的挑战是：缩放将发生在鼠标位置。我找到的解决方案给了我：缩放后的​​ layer.setPosition() 。正如我之前提到的，我不能使用“layer.setPosition”，我将使用 stage.setPosition() 来执行此操作，但我无法 100% 准确地计算位置的新 x 和 y。谁能建议我任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:56:06.440

Check out this: [http://jsfiddle.net/TFU7Z/1/](http://jsfiddle.net/TFU7Z/1/) Maybe is what you are looking for, I did not quite understand the question.

```
 var zoom = function(e) {
          var zoomAmount = 1;
          layer.setScale(layer.getScale().x+zoomAmount)
          layer.draw();
        }

        document.addEventListener("click", zoom, false) 
```

Just click anywhere to zoom. You can attach the "click" event listener to whatever part of the stage / document you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:27:41.027

缩放时您真正想做的是设置比例。

您可以为任何层、节点或整个舞台设置比例。做就是了：

```
 layer1.setScale(2,2); // this doubles the layer size from the original 
```

这不会影响任何其他图层，因此您的叠加层将保持不变。

此外，您还应该这样做：

```
 layer1.setPosition(x,y); // this will move the layer to the fixed point you want. 
```

你可以一起做：

```
 function zoom(){
       var position = stage.getUserPosition();
       layer1.setScale(2,2);
       layer1.setPosition(position.x - layer2.getX(), position.y - layer2.getY()); //move the layer by an offset based on the second layer. This isn't exactly correct so it's something you have to experiment with.
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T05:52:44.393

这些答案似乎不适用于 KineticJS 5.1.0。这些主要不适用于 scale 函数的签名更改：

```
 stage.setScale(newscale); --> stage.setScale({x:newscale,y:newscale}); 
```

但是，以下解决方案似乎适用于 KineticJS 5.1.0：

JSFiddle：http: [//jsfiddle.net/rpaul/ckwu7u86/3/](http://jsfiddle.net/rpaul/ckwu7u86/3/)

# ruby - 使用 Typhoreus 和 SeoMoz API 时出错

> ID：14770066
> 
> 赞同：0
> 
> 时间：2013-02-08T10:04:58.533
> 
> 标签：ruby, ruby-on-rails-3, typhoeus

我正在使用 Typhoreus gem 使用 SEOMoz API。要使用 API 进行身份验证（签名身份验证），我使用以下代码：

```
 url = "http://lsapi.seomoz.com/linkscape/url-metrics/"+website.url.strip+"?Cols=103079231520"

 response = Typhoeus::Request.get(url, :username => "member-xxxxxxx", :password => "abcxyzwhatever")

To which I get the error: Ethon::Errors::InvalidOption: The option: username is invalid.
Please try userpwd instead of username. 
```

如果我将用户名更改为 userpwd，它也会要求将密码更改为 userpwd。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T19:48:16.437

api改变了一点，应该可以工作：

```
Typhoeus::Request.get(url, :userpwd => "member-xxxxxxx:abcxyzwhatever") 
```

# php - 如何仅在 PHP 方法参数中声明字符串？

> ID：14770068
> 
> 赞同：1
> 
> 时间：2013-02-08T10:05:01.600
> 
> 标签：php, string, type-hinting

我正在尝试使用这种方法：

```
public function setMessage(string $message){
    $this->message = $message;
} 
```

然后我得到这个错误：

> 可捕获的致命错误：传递给 notifier::setMessage() 的参数 1 必须是字符串的实例，给定的字符串

显然 PHP 被解释`string`为类名。是否有类似的解决方案来做出这种声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:07:11.650

类型提示只能用于对象，数组除外。

从[手册](http://php.net/manual/en/language.oop5.typehinting.php)：

> 类型提示不能用于标量类型，例如 int 或 string。特征也是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:06:31.960

PHP 是一种松散类型的语言，它并不真正关心类型并且无论如何都会猜测。您只能在函数声明中将变量限制为类，因此删除`string`一切都会好起来的。:)

如果您真的想确定它是一个字符串，请使用[gettype()](http://php.net/manual/en/function.gettype.php)或[将](http://php.net/manual/en/language.types.type-juggling.php)变量转换为字符串。

注意（来自 PHP.net 上的 type-juggline）：

> 除了将变量转换为字符串之外，还可以将变量括在双引号中。

```
$foo = 10;            // $foo is an integer
$str = "$foo";        // $str is a string
$fst = (string) $foo; // $fst is also a string 
```

# iis-7 - IIS 7 中的匿名身份验证

> ID：14770077
> 
> 赞同：1
> 
> 时间：2013-02-08T10:05:36.333
> 
> 标签：iis-7

当我在 IIS 7 中禁用匿名身份验证时，它不允许我通过传递 URL 从客户端浏览器以及 Web 应用程序下载公共内容。但是我想禁止最终用户从客户端浏览器下载公共内容，但他们可以通过传递 URL 通过 Web 应用程序下载公共内容。即 [https://xxx.com/data/MyDownload.doc](https://xxx.com/data/MyDownload.doc)。

有没有人对此有任何想法？

# matlab - 在matlab中创建一个多维数组

> ID：14770081
> 
> 赞同：1
> 
> 时间：2013-02-08T10:05:52.770
> 
> 标签：matlab

我正在 matlab 中创建一个多维数组，它具有三个参数、数字、宽度和高度

```
A = randn(number,width,height) 
```

我的问题是数字是动态变量，当它在文本文件中找到对象时会增加。我应该如何使数字变量动态化，

我试过这个，但没有奏效

```
A = randn(:,width,height) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:14:30.817

```
i = 0;
when (object in text file)
i = i+1;
A(i,:,:) = data;
end 
```

数据大小 -`width x height`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:44:42.217

首先计算数字，然后相应地分配矩阵。

```
i = 0;
when (object in text file)
i = i+1;
end

A = randn(i,width,height); 
```

# javascript - 文本框的 JavaScript/jQuery 验证

> ID：14770082
> 
> 赞同：-4
> 
> 时间：2013-02-08T10:05:55.123
> 
> 标签：javascript, jquery

我有一个这样的texbox：

```
<input type="text" size="30" name="form[id]" id="form_id"> 
```

我需要一个 JavaScript 函数来验证：

1.  不允许有空格。
2.  只允许使用数字、字母、破折号 (-) 和下划线 (_)，不允许使用其他特殊字符。
3.  不应为空

当用户的输入违反验证时提交。应显示一条警报消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:17:15.843

使用 jQuery 我会做这样的事情：

```
$('#formId').submit(function(e) {
    var validator = new RegExp(/^[\w_-]{1,}$/), //Min 1 char or more
        text = $('input[name="form[id]"]').val();
    if(validator.test(text))
        $(this).submit();
    else {
        alert('Code not valid');
        return false;
    }
}); 
```

[正则表达式备忘单](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)

注意：jsfiddle 在 atm 下，代码尚未经过测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:14:50.360

这是javascript

```
<script type="text/javascript">

function NoSpecialChars(){
    var element=document.getElementById('form_id');
    var specialchars= "!@#$%^&*()+=[]\\\';,./{}|\":<>?";
    if(element.value.length==0){
        alert('Enter some text');
        return false;
    }
    for (var i = 0; i < element.value.length; i++) {
        if (specialchars.indexOf(document.formname.fieldname.value.charAt(i)) != -1) {
            alert ("Those are not allowed.");
            return false;
        }
    }
    return true;
}
</script> 
```

您需要订阅文本框的 onclientclick 事件。

```
<input type="text" size="30" name="form[id]" id="form_id" onclientclick="return NoSpecialChars();"> 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:19:14.410

使用 JQuery 验证引擎验证表单。这是[JQuery 验证的链接](http://docs.jquery.com/Plugins/Validation)

# java - 查找长度在 x 和 y 之间的最长重复子串

> ID：14770085
> 
> 赞同：4
> 
> 时间：2013-02-08T10:06:03.350
> 
> 标签：java, string, algorithm

给定一个字符串：“blablafblafbla”和2个限制：x = 3，y = 5我想找到长度在x和y之间的最长重复子字符串。如果有很多，第一个在我的例子中是“ blaf" 几个问题： 1\. 使用正则表达式更容易吗？2.我知道如何找到最长的子串，但是我必须在哪里设置它在 x 和 y 之间的条件？

```
public static String longestDuplicate(String text)
{
    String longest = "";
    for (int i = 0; i < text.length() - 2 * longest.length() * 2; i++)
    {
        OUTER: for (int j = longest.length() + 1; j * 2 < text.length() - i; j++)
        {
            String find = text.substring(i, i + j);
            for (int k = i + j; k <= text.length() - j; k++)
            {
                if (text.substring(k, k + j).equals(find))
                {
                    longest = find;
                    continue OUTER;
                }
            }
            break;
        }
    }
    return longest;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:13:49.607

您提供的代码是解决您遇到的问题的一种极其低效的方法。我将使用[Rabin-Karp](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)或其他一些滚动哈希算法来实现该解决方案，这将使您能够解决复杂性问题`O((y-x) * L)`。

您不能在这里使用正则表达式——它们旨在解决完全不同的任务。

至于您关于如何使用**您的解决方案**`x`来查找长度在and之间的最长子字符串的问题`y`，只需修改循环`j`以仅考虑区间内的值`[x, y]`。这是您如何做到这一点的方法。

```
for (int j = Math.max(longest.length() + 1, x) ; j * 2 < text.length() - i && j < y; j++) 
```

编辑：要找到最长的子字符串，请反转 for 循环：

```
for (int j = Math.min((text.length() - i -1)/2, y) ; j > longest.length() && j >=x; j--) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:28:56.480

```
public static int commonPrefix (String string, int x, int y)
{
    int l = string.length ();
    int n = 0;
    int oy = y;
    while (x < oy && y < l && string.charAt (x) == string.charAt (y))
    {
        n++; x++; y++;
    }
    return n;
}

public static String longestRepeatingSubstring (
    String string, int minLength, int maxLength)
{
    String found = null; 

    int l = string.length ();
    int fl = minLength; 
    for (int x = 0; x < l - fl * 2; x++)
        for (int y = x + 1; y < l - fl; y++)
        {
            int n = commonPrefix(string, x, y);

            if (n >= maxLength)
                return string.substring(x, x + maxLength);

            if (n > fl)
            {
                found = string.substring (x, x + n);
                fl = n;
            }
        }

    return found;
}

public static void main(String[] args) {
    System.out.println (longestRepeatingSubstring ("blablafblafblafblaf", 3, 5));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T17:10:10.883

这是一个使用正则表达式的笨拙实现：

```
//import java.util.regex.*;

public static String longestRepeatingSubstring (String string, int min, int max)
{
  for (int i=max; i>=min; i--){
    for (int j=0; j<string.length()-i+1; j++){

      String substr = string.substring(j,j+i);
      Pattern pattern = Pattern.compile(substr);
      Matcher matcher = pattern.matcher(string);

      int count = 0;
      while (matcher.find()) count++;

      if (count > 1) return substr;
    }
  }

  return null;
}

public static void main(String[] args) {
  System.out.println (longestRepeatingSubstring ("blablafblafbla", 3, 5));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T19:36:02.313

```
 public static int getCount(String string , String subString){

    int count = 0;
    int fromIndex = 0;
    do{
    if(string.indexOf(subString, fromIndex) != -1){
        count++;
        fromIndex = string.indexOf(subString, fromIndex);
    }
    }while(fromIndex == string.length()-1);
    return count;
}
public static String longestRepeatingSubstring (int min,int max , String string){
    Vector substrs = new Vector();
    Vector substrs_length = new Vector();
    for (int i=min; i<=max; i++){
        for (int j=0; j<string.length()-i+1; j++){
            String substr=string.substring(j, i+j);
            System.out.println(substr);
            if (substrs.indexOf(substr) == -1){
                int count =getCount(string, substr);
                if (count != 0) {
                    substrs.addElement(substr);
                    substrs_length.addElement(count);
                }
            }
        }
    }
    int maxLength = 0;
    int index = -1;
    for(int i = 0 ;  i < substrs_length.size() ; i++){
        int length = (int) substrs_length.elementAt(i);
        if(length > maxLength){
            maxLength = length;
            index = i;
        }
    }
    return (String) substrs.elementAt(index);
}
public static void main(String [] arg){
    System.out.print(longestRepeatingSubstring(3, 5, "blablafblafbla"));
} 
```

# gwt - GWT - 如何以像素为单位精确设置 TextArea 的渲染宽度？

> ID：14770087
> 
> 赞同：0
> 
> 时间：2013-02-08T10:06:05.443
> 
> 标签：gwt, textbox, width, pixels

我需要为`TextArea`我的 GUI 的特殊目的渲染一个精确的像素宽度。

当我将其宽度设置为“250px”时，它显示为 256px。

有没有办法覆盖这种行为，所以我可以将它准确地渲染为 250px？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:45:13.757

使用 时`setWidth()`，您实际上是在设置元素的*内容*宽度。

要获得*偏移*宽度，请使用[`UIObject#getOffsetWidth()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/UIObject.html#getOffsetWidth%28%29). 这将返回包括填充和边框（但不包括边距）的宽度。

### W3C 参考资料

*   [计算宽度和边距](http://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins)
*   [盒子模型](http://www.w3.org/TR/CSS2/box.html)

# sql - 在特定 SQL 查询中返回 1 或 0

> ID：14770092
> 
> 赞同：4
> 
> 时间：2013-02-08T10:06:26.980
> 
> 标签：sql, oracle, oracle-sqldeveloper

我在表 MYTABLE（ID、NUM、NAMES）中有三列。有一列名称。我需要检查 NAMES 列以查看名字是 JACK 还是 BRUCE，并且相应的 NUM 列 = 0。如果找到匹配项，则返回 1 否则返回 0。

```
ID NUM NAMES    
1  1   'TOM'
2  1   'MIKE'
3  0   'JACK'
4  1   'MICKY'
5  0   'BRUCE' 
```

我想出了以下查询：

```
select *
  case NAMES in ('JACK', 'BRUCE') and NUM=0 then 1 else 0 end as MYNAMES
from MYTABLE; 
```

不幸的是，这不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:10:40.173

这有效（[SQLFiddle 演示](http://www.sqlfiddle.com/#!4/69ea0/1)）：

```
SELECT id, num,
    CASE WHEN names IN ('JACK', 'BRUCE') AND num=0
    THEN 1 ELSE 0 END AS mynames
FROM mytable 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:09:04.267

```
select  case
        when exists
        (
        select  *
        from    YourTable
        where   name in ('JACK', 'BRUCE')
                and NUM = 0
        )
        then 1
        else 0
        end
from    dual 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!4/bc6d2/1/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:12:50.613

```
select case when NAMES in ('JACK','BRUCE') AND NUM = 0
            then 1
            else 0
       end
from your_table 
```

# python - 查看函数没有返回响应

> ID：14770098
> 
> 赞同：12
> 
> 时间：2013-02-08T10:06:50.883
> 
> 标签：python, sql, flask

我想向 mysql 发送一个查询并获取一个数组。但是无论我怎么做，我都无法让它发挥作用。这是我的代码：

```
@app.route('/auth',methods=['GET','POST'])
def auth(): 
    username = request.form['username']
    password = request.form['password']

    cur = db.cursor() 
    cur.execute("SELECT * FROM tbl_user WHERE username = '%s' " % username)

    results = cur.fetchall()

    for row in results:
        print row[0] 
```

它总是说，`view function did not return a response`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T10:14:39.317

Flask 抛出这个异常是因为你的`auth`视图没有返回任何东西。`auth`从您的视图返回响应：

```
return 'Some response' 
```

要返回 MySQL 结果，或许可以将这些行连接成一个字符串：

```
cur.execute("SELECT * FROM tbl_user WHERE username = '%s' " % username)
return '\n'.join([', '.join(r) for r in cur]) 
```

或者定义一个模板并[返回渲染的模板](http://flask.pocoo.org/docs/quickstart/#rendering-templates)。

请注意，您确实不想对`username`参数使用字符串插值，*尤其是*在 Web 应用程序中。请改用 SQL 参数：

```
cur.execute("SELECT * FROM tbl_user WHERE username = %s", (username,)) 
```

现在数据库客户端将为您做报价并防止 SQL 注入攻击。如果使用字符串插值，[就会发生这种情况](http://xkcd.com/327/)。

（如果这是一个不错的数据库（例如不是 MySQL），数据库可以采用现在通用的 SQL 语句并为其创建一个查询计划，然后在您多次执行该查询时一次又一次地重用该计划；使用字符串插值你' d 防止这种情况发生。）

# php - MySQL 说：文档 #2002 - 服务器没有响应 + windows 8 + wampserver

> ID：14770099
> 
> 赞同：0
> 
> 时间：2013-02-08T10:06:56.127
> 
> 标签：php, windows-8, phpmyadmin, wamp

我有 wampserver 2.2、PHP 5.3.9、Mysql 5.0.8 和 windows 8 作为操作系统。我最近安装了 wampsever 并且 localhost 可以正常工作，但是当我尝试通过 wamp 系统托盘图标打开 phpadmin 时，它显示以下错误：

> ```
> Error
> 
> MySQL said: Documentation 
>  #2002 - The server is not responding (or the local MySQL server's socket is not correctly configured) 
> ```

我从最近几天在谷歌搜索解决这个问题，但没有得到任何解决方案。以下是我的 config.inc.php 文件

```
<?php

/* Servers configuration */
$i = 0;

/* Server: localhost [1] */
$i++;
$cfg['Servers'][$i]['verbose'] = 'localhost';
$cfg['Servers'][$i]['host'] = '127.0.0.1';
$cfg['Servers'][$i]['port'] = '3306';
$cfg['Servers'][$i]['socket'] = '/tmp/mysql.sock';
$cfg['Servers'][$i]['connect_type'] = 'socket';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'config';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'root';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['AllowNoPassword'] = true;

/* End of servers configuration */

$cfg['DefaultLang'] = 'en-utf-8';
$cfg['ServerDefault'] = 1;
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

/* rajk - for blobstreaming */
$cfg['Servers'][$i]['bs_garbage_threshold'] = 50;
$cfg['Servers'][$i]['bs_repository_threshold'] = '32M';
$cfg['Servers'][$i]['bs_temp_blob_timeout'] = 600;
$cfg['Servers'][$i]['bs_temp_log_threshold'] = '32M';

?> 
```

为此需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:15:53.597

您是第一次运行安装脚本吗？为了允许访问本地服务器（特别是在 win 8 中）并确保您始终以管理员身份运行它。

如果您有权访问 phpmyadmin，则可以从设置选项卡中的更多设置选项中执行上述步骤。

如果您在设置时遇到问题，请告诉我，我会告诉您更多详细信息。

## 这可能不是您问题的最佳答案，但我正在尽我所能提供帮助。

好的，执行以下步骤，我假设您可以访问 phpmyadmin，如果没有，请转到 wamp 目录 -> 别名 -> 打开 phpmyadmin.conf

更改以下代码：

```
Order Deny,Allow
Deny from all
Allow from 127.0.0.1 
```

至

```
Order Allow,Deny
Allow from all 
```

然后保存它。

然后，转到 wamp 托盘图标 -> 右键单击​​ -> 将服务器联机

这应该允许您同时访问 localhost 和 phpmyadmin

*   您可以使用设置脚本，而不是手动编辑 config.inc.php。首先，您必须在 phpMyAdmin 目录中手动创建一个文件夹配置（您可以在 wamp/apps/phpmyadmin/ 上找到它）。这是一项安全措施，应在完成 setupscript 后删除。
*   然后在您的网络浏览器上打开 localhost/phpmyadmin
*   转到设置选项卡
*   在更多设置中，您会找到指向 SetupScript 的链接，应该在

    本地主机/phpmyadmin/setup/index.php

*   在服务器下，点击新服务器

*   键入您的主机名，该主机名应该是 localhost，因为您在本地计算机上运行
*   在 Authentication Settings 中正确的用户和密码来访问 phpmyadmin
*   您可以根据需要使用许多其他设置
*   点击保存按钮
*   请注意，除非从屏幕的配置区域明确选择保存，否则更改不会保存到磁盘。通常脚本会将新的 config.inc.php 保存到 config/ 目录，但如果网络服务器没有适当的权限，您可能会看到错误“无法加载或保存配置”。确保 config/ 目录存在并具有适当的权限 - 或使用下载链接将配置文件保存在本地并上传（通过 FTP 或其他类似方式）到适当的位置。
*   保存文件后，必须将其从 config/ 目录移出到 phpmyadmin 主目录，并且必须重置权限，再次作为安全措施。
*   现在该文件可以使用了。如果您喜欢设置一些高级选项，您可以选择使用您喜欢的编辑器查看或编辑文件
*   如果您使用 auth_type "config"，建议您保护 phpMyAdmin 安装目录，因为使用 config 不需要用户输入密码来访问 phpMyAdmin 安装。建议使用替代身份验证方法，例如在 .htaccess 文件中使用 HTTP–AUTH 或切换到使用 auth_type cookie 或 http。
*   在浏览器中打开主 phpMyAdmin 目录。phpMyAdmin 现在应该显示一个欢迎屏幕和您的数据库，或者如果使用 HTTP 或 cookie 身份验证模式，则会显示一个登录对话框。
*   您应该拒绝访问您的网络服务器配置中的 ./libraries 和 ./setup/lib 子文件夹。对于 Apache，您可以使用该文件夹中提供的 .htaccess 文件，对于其他网络服务器，您应该自己配置它。此类配置可防止可能碰巧在该代码中发现的路径暴露和跨端脚本漏洞。
*   保护公共 phpMyAdmin 安装免受机器人访问通常是一个好主意，因为它们通常不能在那里做任何好事。您可以使用网络服务器根目录中的 robots.txt 文件执行此操作，或通过网络服务器配置限制访问。

希望对您有所帮助，如果您需要更多信息，请不要犹豫：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-04T08:16:01.157

**这同样适用于基于 Linux Debian 的系统。**

当您单独安装 mysql 时，可能会发生此错误。只需通过以下命令将其删除[如果您不需要它]，然后您就可以通过 phpmyadmin 使用 mysql。这对我有用：

```
sudo apt-get remove --purge mysql-server mysql-client mysql-common
sudo apt-get autoremove
sudo apt-get autoclean 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T06:41:06.793

您可以按照以下方法解决问题。

`Step1:`转到`my.ini`文件并将 mysql socket = "MySQL" 的设置更改为 "/tmp/mysql.sock"。

`Step2:`然后在`php ini`文件中执行相同的操作并重新启动 Web 服务器，无论是 WAMP 还是 XAMP！

如果您正在使用，`XAMP`那么您可以再尝试一件事：

要修复 #2002 问题，请在 XAMPP 目录中使用 path: 打开 config.inc.php `\xampp\phpMyAdmin`并添加以下代码：

```
$cfg['Servers'][$i]['socket'] = '/var/run/mysql/mysql.sock';
or
$cfg['Servers'][$i]['connect_type'] = 'tcp'; 
```

希望通过上述步骤，您将得到解决方案。如果与解决问题相关，请将答案标记为已解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-30T15:05:57.383

我遇到了同样的问题并做了以下解决：

*   将 SETUP 文件放入笔式驱动器中
*   用图标从您的计算机上完全卸载 WAMP 服务器
*   然后重新启动系统，然后安装安装文件作为备份在pendrive中
*   然后点击next next next....启动
*   然后你的 WAMP 就可以使用了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-01T13:33:54.923

“错误 MySQL 说：

# 2002 - 服务器没有响应（或本地 MySQL 服务器的套接字配置不正确）”

今天发生在我身上，结果只是 MySQL 没有启动，即使它被配置为自动启动。搜索服务，在列表中找到 MySQL，然后单击启动服务。（不要问我为什么会突然出现这个故障）。

# libcurl - libssl 读取错误 131 导致应用程序崩溃

> ID：14770100
> 
> 赞同：0
> 
> 时间：2013-02-08T10:06:56.330
> 
> 标签：libcurl, libssl

我开发了一个将文件上传到 Dropbox 的应用程序。我正在使用 Libcurl (libcurl-7.21.7) 和 Openssl (0.9.8e) api 将文件上传到 Dropbox。我注意到有时我的应用程序由于服务器无响应而崩溃。我在控制台上遇到的错误是

SSL读取：错误：00000000：lib（0）：func（0）：reason（0），errno 131关闭连接＃0

我已经在我的 POST 请求中实现了 CURL_TIMEOUT，但我仍然面临这个崩溃。如果超时时间很短，我会不断收到上传错误，如果时间太长，我会收到应用程序崩溃并出现上述错误。有没有办法解决请求中出现的问题以避免崩溃？

在调试中进一步发现崩溃实际上发生在 ssl 库中，因为应用程序崩溃了。

请问可以对此有所了解吗？

我使用的代码是：

```
CURL *curl;
curl = curl_easy_init();
    curl_global_init(CURL_GLOBAL_ALL);  
    curl_easy_setopt(curl, CURLOPT_CAINFO, NULL);           
    curl_easy_setopt(curl, CURLOPT_CAPATH, NULL);
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 2);
    curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 0);
    curl_easy_setopt(curl, CURLOPT_URL,NOTIFICATIONURL);
    curl_easy_setopt(curl, CURLOPT_POST, 1L);
    curl_easy_setopt(curl, CURLOPT_FORBID_REUSE,1);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS,data());
    curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, datalength);
    curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);
    long int maxconnectiontime = 600;
    curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT,maxconnectiontime);
    long int maxtime = 1200;
    curl_easy_setopt(curl, CURLOPT_TIMEOUT,maxtime);

    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);
    res = curl_easy_perform(curl);

    if(res)  
    {
            log("\n nCURL ERROR curl_easy_perform return %s [%d]",curl_easy_strerror(res),res);
    }  

    curl_slist_free_all(headers);
    curl_global_cleanup();
    curl_easy_cleanup(curl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T10:53:04.380

该问题可以通过在客户端代码中添加信号“SIGPIPE”和SIGALRM“并忽略”来解决。

# c# - 在 windows phone7 中解析复杂的 xml

> ID：14770105
> 
> 赞同：0
> 
> 时间：2013-02-08T10:07:12.650
> 
> 标签：c#, windows-phone-7, xml-parsing, linq-to-xml

任何人都可以帮助我使用 Linq 解析以下 XML 吗？我曾尝试使用 Linq，但我可以单独解析每个节点。但我需要将所有节点累积在一个字典中。

```
<?xml version="1.0" encoding="utf-8" ?>
<purchaseOrder xmlns="http://tempuri.org/po.xsd" orderDate="1999-10-20">
 <shipTo country="US">
<name>Alice Smith</name>
<street>123 Maple Street</street>
<city>Mill Valley</city>
<state>CA</state>
<zip>90952</zip>
</shipTo>
 <billTo country="US">
   <name>Robert Smith</name>
   <street>8 Oak Avenue</street>
  <city>Old Town</city>
   <state>PA</state>
  <zip>95819</zip>
  </billTo>
 <comment>Hurry, my lawn is going wild!</comment>
 <items>
<item partNum="872-AA">
  <productName>Lawnmower</productName>
  <quantity>1</quantity>
  <USPrice>148.95</USPrice>
  <comment>Confirm this is electric</comment>
</item>
<item partNum="926-AA">
  <productName>Baby Monitor</productName>
  <quantity>1</quantity>
  <USPrice>39.98</USPrice>
  <shipDate>1999-05-21</shipDate>
</item>
</items>
</purchaseOrder> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T07:21:02.700

**尝试这个**

```
XElement doc = XElement.Parse(@"<?xml version=""1.0"" encoding=""utf-8"" ?>
                                <purchaseOrder xmlns=""http://tempuri.org/po.xsd"" orderDate=""1999-10-20"">
                                    <shipTo country=""US"">
                                    <name>Alice Smith</name>
                                    <street>123 Maple Street</street>
                                    <city>Mill Valley</city>
                                    <state>CA</state>
                                    <zip>90952</zip>
                                    </shipTo>
                                        <billTo country=""US"">
                                        <name>Robert Smith</name>
                                        <street>8 Oak Avenue</street>
                                        <city>Old Town</city>
                                        <state>PA</state>
                                        <zip>95819</zip>
                                        </billTo>
                                        <comment>Hurry, my lawn is going wild!</comment>
                                        <items>
                                    <item partNum=""872-AA"">
                                        <productName>Lawnmower</productName>
                                        <quantity>1</quantity>
                                        <USPrice>148.95</USPrice>
                                        <comment>Confirm this is electric</comment>
                                    </item>
                                    <item partNum=""926-AA"">
                                        <productName>Baby Monitor</productName>
                                        <quantity>1</quantity>
                                        <USPrice>39.98</USPrice>
                                        <shipDate>1999-05-21</shipDate>
                                    </item>
                                    </items>
                                </purchaseOrder>");

IEnumerable<XElement> elements = doc.Descendants();//if you like to use elements instead of nodes
foreach (XElement element in elements) {
    Console.WriteLine(String.Format("Name: {0} || Value: {1}",element.Name.LocalName,element.Value));
};
IEnumerable<XNode> nodes = doc.DescendantNodes();//if you like to use nodes instead of elements
foreach (XNode node in nodes)
{
    Console.WriteLine(String.Format("Type: {0} || Value: {1}", node.NodeType.ToString(), node.ToString()));
};
Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:27:39.650

您可以创建模型，然后通过`DataContractSerializer`或反序列化它`XmlSerializer`

# c# - 如何显示开始时间和停止时间

> ID：14770117
> 
> 赞同：0
> 
> 时间：2013-02-08T10:07:36.907
> 
> 标签：c#

我对 C# 编程非常陌生，我在一个类中有开始按钮，在另一个类中有带有 TextBox 的 Transfer Start 和 Transfer Stop 标签。两者都在设计中的不同选项卡中。我可以在同一个选项卡和类中显示开始和停止时间，但我无法在另一个类中显示。我附上了如下简单设计。！[示例][1]

当我单击项目选项卡中的“开始”按钮时，它必须在带有标签“传输开始”的文本框中显示开始时间。与停止按钮也相同。我想显示开始和停止时间。在项目选项卡中，我还有一些其他功能要添加，但我没有在这里显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:16:04.053

您可以使用委托将值传递给第二个选项卡/类，以避免交叉线程问题等......类似于：

```
MyClass.NotifyParentUI += new EventHandler<MyArgs>(UpdateMyLabel);

 public void UpdateMyLabel(object sender, MyArgs ea)
    {
        this.Invoke(new MethodInvoker(
            delegate()
            {
                myLabel.Text = ea.Message;
            }));
    }

public class MyArgs : EventArgs
{
    public string Message { get; set; }
} 
```

然后在要从使用中传递数据的类中：

```
public MyClass
{
     public static event EventHandler<MyArgs> NotifyParentUI;

     protected virtual void OnMyEvent(MyArgs ea)
     {
         if (NotifyParentUI != null)
         {
             NotifyParentUI(this, ea);
         }
     }
} 
```

使用：

```
 OnMyEvent(new MyArgs() { Message = "Transfer start/stop values go here" }); 
```

传递价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:09:34.727

您可以使用各种方法[在表单之间传递数据 在表单之间传递数据](http://msdn.microsoft.com/en-us/library/ms171925.aspx)

1.  通过构造函数
2.  通过全局属性
3.  通过事件

如果两个选项卡的表单相同，则可以使用控件本身。那有什么问题？

```
public Class form2 {
public form2(string somevalues)
{
 //use this values. in form2 
}
}

public class form1 {
form2 objfrm = new form2("your value");
} 
```

# windows-mobile - 缺少程序集 Microsoft.WindowsMo bile.Utility.dll

> ID：14770121
> 
> 赞同：1
> 
> 时间：2013-02-08T10:08:07.967
> 
> 标签：windows-mobile, compact-framework

找不到 Microsoft.WindowsMo​​bile.Utilities.dll

在分析自定义应用程序期间，反编译器出现并要求提供上述 dll。

我环顾四周，搜索了我的电脑，然后是互联网，没有人知道从哪里获取文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:08:07.967

该文件是 Microsoft ROM 映像的一部分，可以从真实设备下载。该文件名为 \windows\Microsoft.WindowsMo​​bile.dll：

Microsoft.WindowsMo​​bile.dll：Microsoft.WindowsMo​​bile，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T01:29:17.610

我有同样的问题。

我在以下位置找到了这些 dll：

```
 C:\Program Files\Windows Mobile 5.0 SDK R2\Managed Libraries 
```

如果您还没有 Windows Mobile SDK，最好下载它。

# asp.net-mvc - 如何添加和使用剃须刀编辑器模板

> ID：14770126
> 
> 赞同：7
> 
> 时间：2013-02-08T10:08:20.437
> 
> 标签：asp.net-mvc, razor, mvc-editor-templates

我试图找到有关如何将剃刀编辑器模板合并到项目中的文档或示例。另一个线程上的以下答案可能会解决我遇到的问题，但我不知道如何将其合并到我的项目中。毫无疑问，这很容易。

这是我不知道如何合并的解决方案： [输入类型日期的客户端验证不起作用](https://stackoverflow.com/questions/8516940/client-side-validation-of-input-type-date-does-not-work)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T23:06:39.467

[这](http://dineshkumara.blogspot.com/2011/06/mvc-3-razor-editor-template.html)是有关添加的简短信息`EditorTemplate`。简而言之 - 您必须在*Views/Shared中创建目录**EditorTemplates* ，并且您应该创建一个与要为其创建编辑器的模型同名的视图。

 *请记住，当使用此模型的对象作为参数`EditorTemplate`进行调用时，将使用模型。`Html.EditorFor`当然，您应该使用它们来提供编辑可能性 - 如果您想创建只应显示数据的内容，请使用相同的方式创建`DisplayTemplate`（创建*DisplayTemplates*目录）。使用此模型的对象作为参数`DisplayTemplate`在调用时呈现。`Html.DisplayFor`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-19T13:07:12.210

Html.Editor(For) 和 Html.Display(For) 使用的默认模板有一些有用的背景，以及如何使用项目的 Views/Shared/EditorTemplates 和 View/Shared/DisplayTemplates 目录中的视图覆盖[它们](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)。

我[在 GitHub 上有一个项目](https://github.com/danmalcolm/mvc-razor-display-and-editor-templates)，其中包含所有默认显示和编辑器模板的 Razor 替换。查看演示 Web 应用程序 - 它应该可以帮助您了解事物如何组合在一起。然后，将模板复制到您的项目中并修改您需要的部分。*

# git - 像 GitHub 垃圾这样的 Web 界面是否会收集悬空的远程 git 提交，如果没有，是否可以获取它们？

> ID：14770127
> 
> 赞同：4
> 
> 时间：2013-02-08T10:08:21.407
> 
> 标签：git, github

关于 Git 悬空提交在 GitHub 和 BitBucket 等系统上的问题：

这些系统是否会进行垃圾收集，以便最终删除悬空提交？（我知道它们对其他 repos 用户不利，我只是在探索假设）

有没有办法获取/克隆远程仓库以便包含这些提交（即获取它包含的所有提交的完整副本）？我已经尝试过了，但我没有得到分离的提交，我想我错过了一个开关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:28:23.930

那些不会是“分离的 HEAD”：**[分离的 HEAD](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)**是当您检查不是分支的 ref 时。

您想查看来自 GitHub 远程存储库的**[reflog](http://git-scm.com/docs/git-reflog)**，但据我所知，这些是不可访问的。并且 reflogs 不会被克隆。
另请参阅“ [git 我可以查看远程的 reflog 吗？](https://stackoverflow.com/questions/10098095/git-can-i-view-the-reflog-of-a-remote) ”

# css - 使用自动边距使 div 垂直和水平居中

> ID：14770143
> 
> 赞同：1
> 
> 时间：2013-02-08T10:09:24.187
> 
> 标签：css, internet-explorer-7

我正在尝试使用自动边距在窗口中心显示一个块。

我的代码是

```
<div class="centre-element"> This box is coming at the center of the window. </div> 
```

CSS

```
.centre-element{
    width: 200px;
    height: 100px;
    position:absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
    margin:auto;
} 
```

这适用于我测试的所有浏览器，除了 IE7。有什么帮助吗？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:14:11.730

你不能`div`使用 垂直居中`margin: auto`，但你可以试试这个：

```
.centre-element {
  top: 50%;
  margin-top: -50px; /* height/2 */
} 
```

**编辑：**

这是一个例子：http: [//jsfiddle.net/ZD432/](http://jsfiddle.net/ZD432/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:13:36.180

```
.centre-element{
   width: 200px;
   height: 100px;
   margin: auto;
   padding: auto;    
} 
```

# c - Eclipse Juno - GCC 编译器 pthread

> ID：14770147
> 
> 赞同：1
> 
> 时间：2013-02-08T10:09:33.907
> 
> 标签：c, eclipse, pthreads

所以我目前正在我的大学参加一个实践课程，没有一个人能弄清楚如何在 Eclipse 中添加 pthread 库。这是我第一次使用 Eclipse。

我正在使用 Fedora，当我转到 Properties->C/C++ Build->Settings 时，我得到的只是一个用于配置的下拉列表，没有其他任何东西 - 没有用于添加它的工具的选项卡。

谁能帮我？谢谢！

![该死](../Images/aa2b67b8159e4c1f46529193a0c6a7e2.png)

![设置](../Images/c49e1c2562096452b8e5a5b6188d49b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:14:27.657

确保您在 Project -> Settings -> C/C++ Build 中选择了“自动生成 Makefile”选项！否则 Eclipse 假定您提供自己的 makefile 并且不显示“工具设置”选项卡。

然后你需要去 Project -> Properties -> C/C++ Build 做[**这个**](http://blog.asteriosk.gr/2009/02/15/adding-pthread-to-eclipse-for-using-posix-threads/)。

![在此处输入图像描述](../Images/4c284b5d80edf6aa89dda59403bf6f29.png)

# android - 授予超级用户权限后，它会给出 adb:not found

> ID：14770148
> 
> 赞同：0
> 
> 时间：2013-02-08T10:09:33.273
> 
> 标签：android

输入 su 然后我使用 ADB Push 命令，它说 ADB not found，所以我不能使用 Push 命令.. 如何在 # 模式下使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:13:03.540

如果您处于超级用户模式，则不需要 adb 前言，su 始终使用 adb

# jquery - 如何隐藏特定滑块的滑块句柄？

> ID：14770162
> 
> 赞同：1
> 
> 时间：2013-02-08T10:10:26.293
> 
> 标签：jquery, jquery-ui, jquery-mobile

我想知道是否有隐藏 id 或特定于类的滑块句柄的方法？

```
<label for="my-slider-id">Test</label>
<input type="range" class="my-slider-class" id="my-slider-id" value="0" min="0" max="100"/> 
```

例如，我知道这段代码隐藏了所有滑块的句柄。

```
$('.ui-slider-handle').hide(); 
```

这些代码完全没有任何作用：

```
$('ui-slider-handle.my-slider-class').hide();

$('ui-slider-handle#my-slider-id').hide(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:57:46.780

您只需要通过 jQuery 来完成，如下所示：

```
$('#my-slider-id').next().find('.ui-slider-handle').hide(); 
```

这是一个 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/T2zde/](http://jsfiddle.net/Gajotres/T2zde/)

# ios - iOS5、iOS6 Unicode（俄文、日文、中文、韩文）上的全文搜索

> ID：14770165
> 
> 赞同：7
> 
> 时间：2013-02-08T10:10:33.133
> 
> 标签：ios, sqlite, core-data, unicode, full-text-search

我需要在包含标题（例如歌曲）的 2.000.000 个数据库行中进行搜索。我需要一个能够快速提供结果、适用于 iOS 平台并支持 unicode 字符集的解决方案。我正在*考虑*使用 sqlite 的 FTS 来解决我的问题。我愿意接受任何其他解决方案。

## 这是我目前所知道的：

**假设 1：**在 iOS >= 5 中默认启用 FTS - 这很好，我的最低要求是 5

**假设 2：**我假设，如果不自行编译 sqlite，则 unicode 折叠 (Ä => a) 不起作用

**假设 3：**我知道 FTS 不支持子字符串搜索，例如`MATCH "*searchterm*"`

**假设 4：**我读到默认的搬运工词干分析器对于 unicode 字符集（俄语、日语、中文……）非常糟糕

我目前的方法是使用`LIKE "%searchterm%"`语句，因为它们最适合上述语言。不幸的是，它们有时往往很慢。

## 问题

**问题 1：**带有 FTS 的 sqlite 是正确的方法吗？还是应该在 cLucene / CoreData 等中进行调查？还有哪些其他选择？在 iOS 平台上搜索不同语言的标题的最佳方法是什么？

**问题 2：**我需要更换分词器吗？我可以在 iOS 平台上将 tokenizer 作为扩展加载吗？[这](https://github.com/littlesavage/sqlite3-unicodesn/blob/master/fts3_unicodesn.c)可能是解决方案吗？

**问题 3：**在 iOS 5 / 6 上是否启用了 ICU 扩展的 sqlite fts？

**问题 4：** Apple 的内部搜索是如何工作的，例如在音乐播放器中？核心数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:39:46.873

您可能想检查一下：[带核心数据的全文搜索](http://www.mlsite.net/blog/?page_id=1194)

# mongodb - 如何查找具有相同字段的mongo文档

> ID：14770170
> 
> 赞同：42
> 
> 时间：2013-02-08T10:11:00.187
> 
> 标签：mongodb

我有一个 mongo 集合，我需要在这个集合中查找文档，其中字段名称和地址是相等的。

我搜索了很多，我只能在比较 2 个字段和MongoDB 时找到[MongoDb 查询条件](https://stackoverflow.com/questions/4442453/mongodb-query-condition-on-comparing-2-fields)[：Unique and sparse Compound index with sparse values](https://stackoverflow.com/questions/11386674/mongodb-unique-and-sparse-compound-indexes-with-sparse-values)，但在这些问题中，他们正在寻找字段 a = 字段 b 的文档，但我需要找到 document1.a == document2.a

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-04-08T12:16:15.050

您可以使用[聚合框架](http://docs.mongodb.org/manual/core/aggregation/)和[`$group`](http://docs.mongodb.org/manual/reference/aggregation/group/).

示例数据设置：

```
// Batch insert some test data
db.mycollection.insert([
    {a:1, b:2, c:3},
    {a:1, b:2, c:4},
    {a:0, b:2, c:3},
    {a:3, b:2, c:4}
]) 
```

聚合查询：

```
db.mycollection.aggregate(
    { $group: { 
        // Group by fields to match on (a,b)
        _id: { a: "$a", b: "$b" },

        // Count number of matching docs for the group
        count: { $sum:  1 },

        // Save the _id for matching docs
        docs: { $push: "$_id" }
    }},

    // Limit results to duplicates (more than 1 match) 
    { $match: {
        count: { $gt : 1 }
    }}
) 
```

示例输出：

```
{
    "result" : [
        {
            "_id" : {
                "a" : 1,
                "b" : 2
            },
            "count" : 2,
            "docs" : [
                ObjectId("5162b2e7d650a687b2154232"),
                ObjectId("5162b2e7d650a687b2154233")
            ]
        }
    ],
    "ok" : 1
} 
```

# c# - 如何测试数据库连接问题？

> ID：14770171
> 
> 赞同：0
> 
> 时间：2013-02-08T10:11:03.780
> 
> 标签：c#

在我们的应用程序中，我们最近注意到有一些代码会创建不必要的数据库连接调用，例如数据集中的每个数据行都在进行数据库连接调用以检查某些数据。

我们如何通过代码扫描或数据库查询监控来监控这类问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:13:09.800

如果您使用的是 MS SQL，则可以使用**“SQL Profiler” 。**无论如何，代码遍历必须让您对此有所了解。

在数据库连接方法中放置一些调试打印，以便您可以跟踪建立的连接及其来源。

# scripting - 如何使用期望脚本返回 scp 命令的输出？

> ID：14770172
> 
> 赞同：0
> 
> 时间：2013-02-08T10:11:06.603
> 
> 标签：scripting, tcl, expect

我正在尝试编写一个期望脚本，它将自动执行 scp 命令并返回 scp 命令的状态。由于我是 ecpect 脚本的新手，因此我找不到任何可以做到这一点的方法。我需要的是使用expect脚本自动化SCP命令，如果scp成功则以代码0退出，否则返回错误，如连接超时或传输文件时链接断开等。

请帮助我。

以下是我的脚本片段：

```
# connect via scp
spawn scp -o ConnectTimeout=30 /home/user/file.tar.gz root@192.168.1.146:/home/user

    #######################
    expect {
          -re ".*es.*o.*" {
                  exp_send "yes\r"
                          exp_continue
                            }
            -re ".*sword.*" {
                    exp_send "abc\r"
                          }
    }
    interact 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:14:41.583

你在听从`wait`命令。从期望手册页复制：

```
 wait [args]
         delays until a spawned process (or the current process if none is
         named) terminates.

         wait normally returns a list of four integers.  The first integer
         is the pid of the process that was waited upon.  The second inte-
         ger is the corresponding spawn id.  The third integer is -1 if an
         operating system error occurred, or 0 otherwise.   If  the  third
         integer  was  0, the fourth integer is the status returned by the
         spawned process.  If the third integer was -1, the fourth integer
         is  the  value  of errno set by the operating system.  The global
         variable errorCode is also set.

         Additional elements may appear at the end  of  the  return  value
         from  wait.   An  optional  fifth  element  identifies a class of
         information.  Currently, the only possible value for this element
         is  CHILDKILLED in which case the next two values are the C-style
         signal name and a short textual description.

         The -i flag declares the process to  wait  corresponding  to  the
         named  spawn_id  (NOT the process id).  Inside a SIGCHLD handler,
         it is possible to wait for any spawned process by using the spawn
         id -1.

         The  -nowait  flag causes the wait to return immediately with the
         indication of a successful wait.  When the process exits (later),
         it  will automatically disappear without the need for an explicit
         wait.

         The wait command may also be used wait for a forked process using
         the  arguments  "-i  -1".  Unlike its use with spawned processes,
         this command can be executed at any time.  There  is  no  control
         over  which  process is reaped.  However, the return value can be
         checked for the process id. 
```

这不包括生成的子进程（在您的情况下为 scp ）或其包含的任何子进程生成的任何输出；默认情况下，它通过`expect`和定向到您使用的虚拟终端`interact`。超时和文件结束事件可能通过to /的`timeout`and`eof`子句更好地处理。`expect``interact`

# magento - Magento 中 xml 文件的替代方案

> ID：14770179
> 
> 赞同：1
> 
> 时间：2013-02-08T10:11:46.593
> 
> 标签：magento

magento中的xml文件有什么替代品吗？为什么？

据我所知，我们必须使用 xml 文件来激活和运行我们的模块，但我仍然想知道它是否可能。

-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:47:39.903

据我所知，没有任何选择——至少不是开箱即用的。

是否可能...好吧，我不建议这样做，但是由于您可以随意使用源代码，因此您始终可以重写正在读取 XML 文件的代码（例如 Mage_Core_Model_Config::loadModules）以从其他地方读取配置；）

# java - 为什么我暂停的应用程序仍在创建实例？

> ID：14770183
> 
> 赞同：0
> 
> 时间：2013-02-08T10:11:52.013
> 
> 标签：java, performance, debugging, instance

我有一个内存问题的应用程序，所以我开始使用分析器，比如 VisualVM。

如果我在调试中启动我的应用程序并到达断点（暂停应用程序），我仍然会看到许多正在创建的几个类的实例（主要是`int`, `char`, `Object`, `TreeMap$Entry`, ...）。

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:17:59.403

断点可能只暂停了命中它的线程，而其他线程则愉快地继续执行其预期的工作。要了解它们的作用，它们的名称可能会透露一些信息，但没有什么比线程转储更好的了（你可以让 VisualVM 为你做）。

此外，您通常可以为单个断点决定是只挂起一个线程，还是挂起所有线程。当然，具体如何执行此操作是特定于 IDE 的（但通常在“断点属性”或类似的地方）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:19:32.700

大多数java应用程序都有很少的线程。至少两个：Main Application Thread 和 GC(garbage collector) 线程。

当您调试应用程序并在断点处停止时，您总是（主要是排除 Web 和多交易应用程序）只停止一个线程。同样在调试模式下可以添加一些额外的线程。

# r - 在R中编码多项选择答案

> ID：14770186
> 
> 赞同：3
> 
> 时间：2013-02-08T10:12:12.577
> 
> 标签：r

我有一个如下所示的 CSV 数据集：

```
Age;Functions;...
12;1,2,5;...
45;1,4,5,8;...
23;3;... 
```

第一列是参与者的年龄，第二列是问题 1 的多项选择答案的逗号分隔列表。在此示例中，第一个参与者选中第 1、2 和第 5 个复选框，第 3 个参与者仅选中第 3 个复选框.

现在，我想评估问题 1 的答案。第一步是绘制每个可能答案的答案数量。我尝试了以下方法：

```
dataset$Functions <- strsplit(as.character(dataset$Functions), ",", fixed=T)
dataset$Functions <- lapply(dataset$Functions, factor, levels = 0:8, labels=c(
"no answer",
"checkbox 1",
"checkbox 2",
"checkbox 3",
"checkbox 4",
"checkbox 5",
"checkbox 6",
"checkbox 7",
"checkbox 8",
)) 
```

另外我尝试使用 mChoice：

```
library("Hmisc")
dataset$Functions <- lapply(dataset$Functions, mChoice, label="Functions") 
```

但是现在，我不知道如何处理数据框中的列表。你有想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:40:35.977

就我个人而言，我更喜欢首先将多项选择变量转换为一系列二分变量，每个变量对应一个可能的选择。例如，如果您有以下数据框：

```
d <- data.frame(age=c(25,35,45,55,65),var=c("1,2,3","1,2","3","2","1"))

  age   var
1  25 1,2,3
2  35   1,2
3  45     3
4  55     2
5  65     1 
```

您可以使用以下代码：

```
lev <- levels(factor(d$var))
lev <- unique(unlist(strsplit(lev, ",")))
mnames <- gsub(" ", "_", paste("var", lev, sep = "."))
result <- matrix(data = "0", nrow = length(d$var), ncol = length(lev))
char.var <- as.character(d$var)
for (i in 1:length(lev)) {
  result[grep(lev[i], char.var, fixed = TRUE), i] <- "1"
}
result <- data.frame(result, stringsAsFactors = TRUE)
colnames(result) <- mnames
d <- cbind(d,result) 
```

这将为您提供三个新变量：

```
 age   var var.1 var.2 var.3
1  25 1,2,3     1     1     1
2  35   1,2     1     1     0
3  45     3     0     0     1
4  55     2     0     1     0
5  65     1     1     0     0 
```

从这里，您可以将这些新变量中的每一个用于统计或交叉制表。如果要生成不同选择频率的全局表，可以这样做：

```
vars <- c("var.1","var.2","var.3")
as.table(sapply(d[,vars], function(v) {
  sel <- as.numeric(v==1)
  sum(sel)
})) 
```

这会给你：

```
var.1 var.2 var.3 
    3     3     2 
```

# cron - 通过 cpanel 在 unix 服务器中设置 cron 作业

> ID：14770187
> 
> 赞同：0
> 
> 时间：2013-02-08T10:12:13.343
> 
> 标签：cron, cpanel, cron-task

我实际上是在尝试在我的 Unix 服务器中测试正在运行的 cron 作业（通过 Cpanel 11）

我一直在尝试执行 WGET。

我的命令如下所示：

```
30 11 * * * wget http://www.mydomain.com/myscript.php 
```

服务器每 5 分钟尝试运行一次作业。但是后来，我在电子邮件中收到一条错误消息

```
/bin/sh: 30: command not found 
```

我也试过这个

```
30 11 * * * /usr/lib/wget http://www.mydomain.com/myscript.php 
```

没用。我一直收到同样的错误。我使用 Siteground 虚拟主机提供商。

有任何想法吗？

# php - yii 多模型多表格多记录

> ID：14770195
> 
> 赞同：0
> 
> 时间：2013-02-08T10:12:41.503
> 
> 标签：php, linux, forms, yii

我有一个包含多个模型的表格。1 个模型将显示 1 条记录，其他模型将以表格格式显示多条记录。当我提交保存时，我只得到每个模型的最后一条记录。如何获取模型的所有记录？

这是我如何在表单上呈现表格格式模型的示例

```
 // lines tab
    $lineListContent = "<div id='form_line_list'>
        <table>
        <tr>
        <th>JOBNO</th>
        <th>NAME</th>
        <th>SEQ</th>
        <th>DATEIN</th>
        <th>DATEDONE</th>
        <th>STATUS</th>
        <th>PCENthONE</th>
        <th>EARNED</th>
        <th>VALUE</th>
        <th>COMMENTS</th>
        <th>SENTBACK</th>
        <th>DATEDUE</th>
        <th>ORIGTAPES</th>
        </tr>
        ";
    $lineListContentRows = null;
    foreach ($jobs as $i=>$item){
        $lineListContentRows = $lineListContentRows . $this->renderPartial('/jobs/_form', array('model'=>$item,'form'=>$form),TRUE);
    }
    $lineListContent = $lineListContent . $lineListContentRows . "
                </table></div>"; 
```

for 循环获取其模型的输入字段

_形式

```
<?php
/* @var $this JobsController */
/* @var $model Jobs */
/* @var $form CActiveForm */
?>

<div class="form">

    <tr>
        <td><?php echo $form->textField($model,'JOBNO'); ?></td>
        <td><?php echo $form->textField($model,'NAME'); ?></td>
        <td><?php echo $form->textField($model,'SEQ'); ?></td>
        <td><?php echo $form->textField($model,'DATEIN'); ?></td>
        <td><?php echo $form->textField($model,'DATEDONE'); ?></td>
        <td><?php echo $form->textField($model,'STATUS'); ?></td>
        <td><?php echo $form->textField($model,'PCENTDONE'); ?></td>
        <td><?php echo $form->textField($model,'EARNED'); ?></td>
        <td><?php echo $form->textField($model,'VALUE'); ?></td>
        <td><?php echo $form->textField($model,'COMMENTS'); ?></td>
        <td><?php echo $form->textField($model,'SENTBACK'); ?></td>
        <td><?php echo $form->textField($model,'DATEDUE'); ?></td>
        <td><?php echo $form->textField($model,'ORIGTAPES'); ?></td>
    </tr>

</div><!-- form --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:50:26.003

如果要保存表格数据，则必须在属性前面加上括号中的数字。所以

```
 foreach ($jobs as $i=>$item){
        $lineListContentRows = $lineListContentRows . $this->renderPartial('/jobs/_form', array('model'=>$item,'form'=>$form,'i'=>$i),TRUE);
    } 
```

并在您`_form.php`将 each`textField`的第二个参数更改为

```
<td><?php echo $form->textField($model,"[$i]JOBNO"); ?></td>// remember use double quotes 
```

如果您进行上述更改，您`$_POST['modelName']`将包含数据作为数组。遍历 a`forloop`并保存每个项目。有关更多信息，请查看[官方文档。](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

# java - 如何获取在java中的方法中声明的变量名称

> ID：14770200
> 
> 赞同：1
> 
> 时间：2013-02-08T10:12:54.043
> 
> 标签：java, reflection

java - 如何获取在java类的方法中声明的变量名称？

例如：

```
public class A {
  String x;
  public void xyz(){
     int i;
     String z = null;
     //some code here
  }
  Method[] methods = A.class.getDeclaredMethods();
  for (Method q = methods){

      //some code here to get the variables declared inside method (i.e q)

  }
} 
```

我怎样才能做到这一点？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:45:43.173

没有简单的方法可以做到这一点。

如果这些是字段，您可以使用反射来获取它们的名称。但是，局部变量和参数名称不会加载到 JVM 中。因此，您需要求助于阅读“A.class”文件并提取该方法的调试信息。坏消息是，如果类没有使用调试信息编译，那么即使这样也行不通。

周围有用于读取“.class”文件的库，用于各种目的，但我无法给出具体建议。

* * *

但 64,000 美元的问题是“但是为什么……？”。列出 Java 方法的局部变量名称有什么意义？不能只看源码吗？你不能用“javap”转储“.class”文件或用一些第3方反编译器反编译它吗？

* * *

> 我认为对于大型程序，如果我们能够了解变量、它们的类型和方法名称以及它们的参数列表等，那么理解和分析它将会很有用......

我认为您只需要一个像样的IDE ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:55:44.847

套用另一个答案，*使用反射没有简单的方法来做到这一点*。

有办法做到这一点。您需要一个完整的 Java 源代码解析器和名称/类型解析器（“符号表”）。

Java 编译器提供了内部 API 来获取该信息。Eclipse JDT 提供了类似的东西。我们的 DMS Software Reengineering Toolkit 提供了一个完整的解析器，可以轻松访问这些信息，并为构建利用这些额外信息的分析器和/或代码生成器提供大量额外帮助。（您可以在我的站点上的示例 Java 源代码浏览器中看到 DMS 提取的此信息，请参阅 bio）。

# android - 下划线表示要猜测的文本，然后用 EditText 中的输入文本替换下划线

> ID：14770201
> 
> 赞同：0
> 
> 时间：2013-02-08T10:12:58.377
> 
> 标签：android, android-edittext

我有一个文本，例如“这是一个问题”，必须通过一些线索来猜测。在应用程序中，用户将在 EditText 中看到“_ _ _ _ _ _ _ _ _ _ _ _ _ *”，我需要的是，当用户在该 EditText 中输入内容时，每个“* ”都会自动替换，并按顺序从左到右。所以它会像“T hisisaqu _ _ _ _ _ _”

由于我在这个世界上很新，我不确定我是否必须向 EditText 添加一个监听器，它可以用任何需要的东西或其他东西替换用户输入。

任何回应将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:21:45.193

每当键入一个键时使用此方法：

```
 public static int getIndex(String input) {
    return input.replaceAll("_", "").length();
}

public static String prepareOutput(String actual, String input) {
    input = input.replaceAll("_", "");
    int diff = actual.length() - input.length();
    if (diff < 0) {
        return input;
    }
    for (int i = 0; i < diff; i++) {
        input += "_";
    }
    return input;
} 
```

像这样：

```
 final EditText ed = (EditText) findViewById(R.id.editText1);
    ed.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
            String input = s.toString();
            String output = prepareOutput("This is a question", input);
            if (output.compareTo(input) != 0) {
                ed.setText(output);
                ed.setSelection(getIndex(output));
            }
        }
    }); 
```

# xsl-fo - xsl-fo 空表体（验证异常）

> ID：14770202
> 
> 赞同：2
> 
> 时间：2013-02-08T10:13:02.983
> 
> 标签：xsl-fo

我正在使用以下转换从 XML 创建表

```
<fo:table table-layout="fixed" width="100%">
    <fo:table-header>
        <fo:table-row text-align="right" font-weight="bold">
            <fo:table-cell column-number="2" text-align="center">
                <fo:block>ColA</fo:block>
            </fo:table-cell>
            <fo:table-cell column-number="3" text-align="center">
                <fo:block>Name</fo:block>
            </fo:table-cell>
            <fo:table-cell column-number="4">
                <fo:block color="red">ColB</fo:block>
            </fo:table-cell>
            <fo:table-cell column-number="5" text-align="center"
                color="red">
                <fo:block width="1cm">%</fo:block>
            </fo:table-cell>
        </fo:table-row>
    </fo:table-header>
    <fo:table-body>
        <xsl:apply-templates select="list/v" />
    </fo:table-body>
</fo:table> 
```

简而言之，我为每个“list/v”创建一行
我的问题是，是否没有相应的数据，我得到以下异常

```
org.apache.fop.fo.ValidationException: "fo:table-body" is missing child elements. Required content model: marker* (table-row+|table-cell+) (No context info available) 
```

因此我的问题是：**当没有数据可用时，如何创建没有正文的有效表？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-10T15:43:55.037

也许这对你有用，这消除了向后兼容性的一些严格验证：

```
fopFactory.setStrictValidation(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T10:37:24.760

以下工作最终：

```
<fo:table table-layout="fixed" width="100%">
    <fo:table-header> (unchanged) </fo:table-header>
    <fo:table-body>
        <xsl:if test="list/v">
            <xsl:apply-templates select="list/v" />
        </xsl:if>
        <xsl:if test="not(list/v)">
            <fo:table-cell><fo:block /></fo:table-cell>
        </xsl:if>
    </fo:table-body>
</fo:table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-31T21:59:24.947

在将应用程序从 fop 0.20.25 升级到 2.1 时，我遇到了类似的情况。大量现有生成的 HTML 模板具有空元素，并且 list/v 在这种情况下不起作用。（它确实让我在正确的方向搜索） Count(child) 确实处理了这种情况：

```
<xsl:template match="tbody">
    <xsl:if test="count(tr)!=0">
        <xsl:apply-templates select="tr" mode="tableRow" />
    </xsl:if>
    <xsl:if test="count(tr)=0">
        <fo:table-cell><fo:block /></fo:table-cell>
    </xsl:if>
</xsl:template> 
```

# matlab - Plot 函数中的参数

> ID：14770211
> 
> 赞同：0
> 
> 时间：2013-02-08T10:13:17.580
> 
> 标签：matlab

以下 Matlab 脚本（取自 MATLAB 对 fft 的帮助）运行良好

```
Fs = 1000;                    % Sampling frequency
T = 1/Fs;                     % Sample time
L = 1000;                     % Length of signal
t = (0:L-1)*T;                % Time vector
% Sum of a 50 Hz sinusoid and a 120 Hz sinusoid
x = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t); 
y = x + 2*randn(size(t));     % Sinusoids plus noise
plot(Fs*t(1:50),y(1:50))
title('Signal Corrupted with Zero-Mean Random Noise')
xlabel('time (milliseconds)') 
```

![在此处输入图像描述](../Images/f34c02fade539c08b165e7e2005d033e.png)

但我无法理解为什么我们在 plot() 中需要 Fs*t。为什么我要减少它的尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:22:14.077

您的向量 t 是根据样本定义的，即 t(10) 是作为第 10 个样本的值。

如果要绘制信号与时间的关系图，则必须将采样实例乘以采样时间，即`time = FS*t`.

如果您不进行缩放，您最终会绘制信号与采样实例的关系。然而，标签“时间（毫秒）”是不正确的。

# c# - 自动命名对象并在选择时显示其属性

> ID：14770214
> 
> 赞同：-2
> 
> 时间：2013-02-08T10:13:21.353
> 
> 标签：c#, object

我有一个愚蠢的问题。我已经进行了研究，但由于我是 C# 的初学者，所以我完全不明白给出的解释。我有一个类叫做事物。用户现在可以通过单击按钮在此类中创建新对象。他可以为之前的对象提供一些属性，例如描述或名称。然后必须自动创建这个新对象。我想要一个列出所有对象名称的列表，当用户单击其中一个时，标签应该显示除名称之外的对象的其他属性，例如描述。我该如何命名用户创建的这些对象？当用户只需单击列表时，如何使标签显示属性。

该程序确实没有用，但我想创建它以了解面向对象的工作原理。

我希望你能理解我的问题。

提前感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:16:59.943

这是我的假设，

您有一个名为“SomeClass”的类，当您单击“新建”按钮时，应创建新对象并将其添加到列表中。

您可以`List<SomeClass> list = new List<SomeClass>()`将其用作主列表，并且您可以只使用单个对象，如下所示，

点击新对象

```
SomeClass cls = new SomeClass();
cls.Description ="desc";
list.Add(cls) 
```

希望这是你所期待的。

# ms-access - vb 脚本访问受密码保护的连接

> ID：14770217
> 
> 赞同：0
> 
> 时间：2013-02-08T10:13:44.647
> 
> 标签：ms-access, vbscript, passwords, odbc

我有简单的脚本：

```
Option Explicit
dim oaccess
set oaccess = createobject("access.application")
oaccess.opencurrentdatabase "C:\test.mdb"
oaccess.docmd.runmacro "MacroOne"
oaccess.closecurrentdatabase
oaccess.quit
set oaccess=nothing 
```

但在这种情况下，宏将运行连接到密码保护表的查询。因此，当尝试执行宏时，我有一条消息：

Oracle ODBC Driver Connect 服务名称、用户名、密码

现在有人知道如何在我的 vb 脚本中实现它吗？所以它会自动把这些细节和运行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:25:29.707

这是因为您在 Access 数据库中为 Oracle 中的链接表使用了 DSN。您应该切换到无 DSN 的 ODBC 连接。此功能没有 GUI 支持，需要一些后门。请阅读[本文](http://www.accessmvp.com/djsteele/DSNLessLinks.html)并自行决定是否要走这条路。如果您决定去，请查看[此](http://www.connectionstrings.com/oracle#oracle-in-oraclient11g_home1)网站以获取有关如何创建与 Oracle 的无 DSN 连接的示例。

# python - 如何使 matplotlib/pylab 中的 X 轴不自动对值进行排序？

> ID：14770218
> 
> 赞同：13
> 
> 时间：2013-02-08T10:13:43.943
> 
> 标签：python, numpy, matplotlib, axis

每当我绘图时，X 轴都会自动排序（例如，如果我输入值 3、2、4，它会自动将 X 轴从小到大排序。

我该怎么做才能使轴保持我输入值的顺序，即 3、2、4

```
 import pylab as pl
   data = genfromtxt('myfile.dat')
   pl.axis('auto')
   pl.plot(data[:,1], data[:,0]) 
```

我找到了一个函数 set_autoscalex_on(FALSE) 但我不确定如何使用它或者它是否是我想要的。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:41:23.460

您可以提供一个虚拟的 x 范围，然后覆盖 xtick 标签。我同意上面的评论，质疑它是否是最好的解决方案，但如果没有任何背景，这很难判断。

如果你真的想，这可能是一个选择：

```
fig, ax = plt.subplots(1,2, figsize=(10,4))

x = [2,4,3,6,1,7]
y = [1,2,3,4,5,6]

ax[0].plot(x, y)

ax[1].plot(np.arange(len(x)), y)
ax[1].set_xticklabels(x) 
```

![在此处输入图像描述](../Images/9430a548f2d162de20afac5f202d099f.png)

编辑：如果您使用日期，为什么不在轴上绘制实际日期（如果您确实想要轴上的 29 30 1 2 等，则可能按月份格式化？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:41:32.457

也许你想设置`xticks`：

```
import pylab as pl
data = genfromtxt('myfile.dat')
pl.axis('auto')
xs = pl.arange(data.shape[0])
pl.plot(xs, data[:,0])
pl.xticks(xs, data[:,1]) 
```

工作样本：

另一种选择是使用日期时间。如果您使用日期，则可以将其用作 plot 命令的输入。

工作样本：

```
import random
import pylab as plt
import datetime
from matplotlib.dates import  DateFormatter, DayLocator

fig, ax = plt.subplots(2,1, figsize=(6,8))

# Sample 1: use xticks
days = [29,30,31,1,2,3,4,5]
values = [random.random() for x in days]

xs = range(len(days))

plt.axes(ax[0])
plt.plot(xs, values)
plt.xticks(xs, days)

# Sample 2: Work with dates
date_strings = ["2013-01-30",
                "2013-01-31",
                "2013-02-01",
                "2013-02-02",
                "2013-02-03"]

dates = [datetime.datetime.strptime(x, "%Y-%m-%d") for x in date_strings]
values = [random.random() for x in dates]

plt.axes(ax[1])
plt.plot(dates,values)
ax[1].xaxis.set_major_formatter(DateFormatter("%b %d"))
ax[1].xaxis.set_major_locator(DayLocator())
plt.show() 
```

![样本](../Images/4a5416e4e0a9e2be6f319c69746c389f.png)

# sqlite - 从表中删除记录后，最大行数会随着行ID不断增加而减少

> ID：14770219
> 
> 赞同：2
> 
> 时间：2013-02-08T10:13:46.870
> 
> 标签：sqlite

这可能是一个初学者的问题，但是在测试我的 sqlite 数据库时，我发现当我删除一行时，当我插入新行时行 ID 会不断增加，并且不会重用例如已删除行的行 ID。那么，如果行 id 用完它的最大值，而表中的行数较少，会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:38:07.303

这是[记录在案](http://www.sqlite.org/autoinc.html)的：

> 如果该表之前保存了具有最大可能 ROWID 的行，则不允许新的 INSERT，并且任何插入新行的尝试都将失败并出现 SQLITE_FULL 错误。

如果省略`AUTOINCREMENT`关键字，ID 仍将自动递增，但如果您删除最后一行或值溢出，则可以重用：

> 如果最大的 ROWID 等于最大可能的整数 (9223372036854775807)，则数据库引擎开始随机挑选正候选 ROWID，直到找到以前未使用的 ROWID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T10:51:49.173

当您将行号添加为自动增量时，您必须检查最大值。如果数据行达到该限制，则必须使用更大的数据类型。但通常整数不会交叉，因为数据库设计人员必须关注[规范化](http://en.wikipedia.org/wiki/Database_normalization)。

如果数据行给这么大。你真的被查询困住了。这将花费大量时间。`SQLite`主要用于低端设备。他们没有能力处理大数据。

# javascript - 由于运算符优先级而令人惊讶的值分配？

> ID：14770221
> 
> 赞同：1
> 
> 时间：2013-02-08T10:13:54.793
> 
> 标签：javascript, jquery

基于完全错误逻辑的原始问题：O

```
$(function() {
  var x=0,y=1;
  $("#div_id").find("input:text").each(function (i, input)  {
    $(this).val(""+(i % 2 == 0)?x++:y++);
  });
}); 
```

如果我从值中删除“”+，我会得到这个错误的结果

![在此处输入图像描述](../Images/18c5314794dcf5748a8795ab03a2e1f0.png)

而不是我想要的，这是：

![在此处输入图像描述](../Images/90f36d15b3e3063569d46f188c083c6b.png)

如果我使用道具也一样：

```
 $(this).prop("value",""+(i % 2 == 0)?x++:y++); 
```

如果我在 ++ 前缀

我在看什么？这是显而易见的事情吗？

* * *

*更新*：我完全错过了这里的船。

这是我要编写的代码，它可以在没有“”的情况下工作

```
$(function() {
  var x=0,y=1;
  var inputs = $("#div_id").find("input:text");
  var y = Math.ceil(inputs.size()/2);
  inputs.each(function (i, input)  {
    $(this).prop("value",(i % 2 == 0)?++x:++y);
  });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T10:17:57.250

```
"" + (i % 2 == 0) ? x++ : y++ 
```

被解释为（参见[优先规则](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)）

```
("" + (i % 2 == 0)) ? x++ : y++ 
```

and`("" + (i % 2 == 0))`总是真实的，因为`"true"`和`"false"`都是非空字符串。因此，在您的示例中，您一直在使用`x++`，而忽略了`y++`分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:17:47.773

[**+ 运算符的结合**](http://www.scriptingmaster.com/javascript/operator-precedence.asp)性似乎 是从左到右的表达式。如果您删除`""+`仅`(i % 2 == 0)`使条件成为条件运算符的一部分，它将被评估为真或假。但是，如果您包含它，它将不会被评估为布尔值而不是字符串，并且始终为真。

使用字符串，您将永远是真实的

```
alert("" + false ? "true" : "false"); 
```

**[现场演示](http://jsbin.com/ahunif/2/edit)**

# php - 分配给逗号数组的自定义键逗号数组

> ID：14770222
> 
> 赞同：0
> 
> 时间：2013-02-08T10:13:59.830
> 
> 标签：php, arrays, foreach

我有以下数组：

```
$doc_id = (3,5,4,6)
$requirement2 = (2,0,0,1) 
```

我正在尝试使用以下代码`$doc_id`的关键元素：`$requirement2`

```
<?php

include "../includes/auth.php";
include "../includes/header.php";

$jat_id = intval($_GET['id']);
$div_id = intval($_GET['div_id']);

    $order = "SELECT * FROM document_assoc WHERE jat_id = '$jat_id'";
    $result = mysql_query($order);
    $row = mysql_fetch_array($result);

    $doc_id3 = $row['doc_id'];
    $doc_id = explode(",", $doc_id3);

    $requirement = $row['requirement'];
    $requirement2 = explode(",", $requirement);

    foreach ($doc_id as $doc_id4) {
    $requirement3 = array($doc_id4=>$requirement3);

    foreach ($requirement2 as $requirement3) {
    $requirement3 = array($doc_id4=>$requirement3);

    print_r ($requirement3);

    }}
include "../includes/footer.php";

?> 
```

但是我在 print_r() 上收到以下信息：

```
Array ( [3] => 2 ) Array ( [3] => 0 ) Array ( [3] => 0 ) Array ( [3] => 1 ) Array ( [5] => 2 ) Array ( [5] => 0 ) Array ( [5] => 0 ) Array ( [5] => 1 ) Array ( [4] => 2 ) Array ( [4] => 0 ) Array ( [4] => 0 ) Array ( [4] => 1 ) Array ( [6] => 2 ) Array ( [6] => 0 ) Array ( [6] => 0 ) Array ( [6] => 1 ) 
```

这是我迄今为止最接近的。但显然还是错了。

根据我的阅读，我需要它看起来像这样：

```
Array ( [3] => 2 [5] => 0 [4] => 0 [6] => 1 ) 
```

这样以后我可以通过`$requirement3[$doc_id]`. （调用它时 $doc_id 将是一个不同的变量源，而不是在这个数组键中设置它）。

如果有人可以帮助解释我在这两条语句中做错了什么，`foreach`我将不胜感激更好的理解。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:20:04.237

```
$requirement3 = array_combine($doc_id,$requirement2); 
```

[http://www.php.net/manual/en/function.array-combine.php](http://www.php.net/manual/en/function.array-combine.php)

演示：[http ://codepad.org/bDhBw2aZ](http://codepad.org/bDhBw2aZ)

# jquery - jQuery UI 日期选择器没有按预期工作

> ID：14770225
> 
> 赞同：0
> 
> 时间：2013-02-08T10:14:19.610
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我正在尝试集成 Jquery UI datepicker。它显示正确，我可以从中选择日期。但是每当我尝试提交在文本字段中插入日期的表单时；它显示验证错误，并显示消息“ModifiedDate 字段是必需的”。

帮我解决问题

这是我的**视图**代码`Create.cshtml`：

```
@model EFDBcontextPracticeWithMVC.Models.Customer

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Customer</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.NameStyle)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NameStyle)
            @Html.ValidationMessageFor(model => model.NameStyle)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.FirstName)
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.MiddleName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.MiddleName)
            @Html.ValidationMessageFor(model => model.MiddleName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastName)
            @Html.ValidationMessageFor(model => model.LastName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Suffix)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Suffix)
            @Html.ValidationMessageFor(model => model.Suffix)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.CompanyName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CompanyName)
            @Html.ValidationMessageFor(model => model.CompanyName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.SalesPerson)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.SalesPerson)
            @Html.ValidationMessageFor(model => model.SalesPerson)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.EmailAddress)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.EmailAddress)
            @Html.ValidationMessageFor(model => model.EmailAddress)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Phone)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Phone)
            @Html.ValidationMessageFor(model => model.Phone)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.PasswordHash)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.PasswordHash)
            @Html.ValidationMessageFor(model => model.PasswordHash)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.PasswordSalt)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.PasswordSalt)
            @Html.ValidationMessageFor(model => model.PasswordSalt)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.rowguid)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.rowguid)
            @Html.ValidationMessageFor(model => model.rowguid)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ModifiedDate)
        </div>
        <div class="editor-field" >
            @Html.EditorFor(model => model.ModifiedDate)
            @Html.ValidationMessageFor(model => model.ModifiedDate)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

这是我的**部分视图**代码`DateTime.cshtml`：

```
@model System.DateTime?
@Html.TextBox(" ", (Model.HasValue ? Model.Value.ToShortDateString() : string.Empty), new { @class = "pickDate" })

<script type="text/javascript">
    $(document).ready(function () {

        $('.pickDate').datepicker();
    });
</script> 
```

这是我的`Customer.cs` **模型**：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace EFDBcontextPracticeWithMVC.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Customer
    {
        public Customer()
        {
            this.CustomerAddresses = new HashSet<CustomerAddress>();
            this.SalesOrderHeaders = new HashSet<SalesOrderHeader>();
        }

        public int CustomerID { get; set; }
        public bool NameStyle { get; set; }
        public string Title { get; set; }
        public string FirstName { get; set; }
        public string MiddleName { get; set; }
        public string LastName { get; set; }
        public string Suffix { get; set; }
        public string CompanyName { get; set; }
        public string SalesPerson { get; set; }
        public string EmailAddress { get; set; }
        public string Phone { get; set; }
        public string PasswordHash { get; set; }
        public string PasswordSalt { get; set; }
        public System.Guid rowguid { get; set; }
        public System.DateTime ModifiedDate { get; set; }

        public virtual ICollection<CustomerAddress> CustomerAddresses { get; set; }
        public virtual ICollection<SalesOrderHeader> SalesOrderHeaders { get; set; }
    }
} 
```

这是呈现的 HTML 的源代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Edit</title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/themes/base/jquery.ui.all.css" rel="Stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-1.9.0.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.ui.core.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.jquery.ui.widget.js" type="text/javascript"></script>
    <script src="/Scripts/jquery.ui.datepicker.js" type="text/javascript"></script>

</head>
<body>
    <div class="page">
        <header>
            <div id="title">
                <h1>My MVC Application</h1>
            </div>
            <div id="logindisplay">
                    [ <a href="/Account/LogOn">Log On</a> ]

            </div>
            <nav>
                <ul id="menu">
                    <li><a href="/">Home</a></li>
                    <li><a href="/Home/About">About</a></li>
                </ul>
            </nav>
        </header>
        <section id="main">

<h2>Edit</h2>

<script src="/Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

<form action="/default1/Edit/4" method="post"><div class="validation-summary-errors"><ul><li style="display:none"></li>
</ul></div>    <fieldset>
        <legend>Customer</legend>

        <input data-val="true" data-val-number="The field CustomerID must be a number." data-val-required="The CustomerID field is required." id="CustomerID" name="CustomerID" type="hidden" value="4" />

        <div class="editor-label">
            <label for="NameStyle">NameStyle</label>
        </div>
        <div class="editor-field">
            <input class="check-box" data-val="true" data-val-required="The NameStyle field is required." id="NameStyle" name="NameStyle" type="checkbox" value="true" /><input name="NameStyle" type="hidden" value="false" />
            <span class="field-validation-valid" data-valmsg-for="NameStyle" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Title">Title</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="Title" name="Title" type="text" value="Ms.sdvsf" />
            <span class="field-validation-valid" data-valmsg-for="Title" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="FirstName">FirstName</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="FirstName" name="FirstName" type="text" value="Janet" />
            <span class="field-validation-valid" data-valmsg-for="FirstName" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="MiddleName">MiddleName</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="MiddleName" name="MiddleName" type="text" value="M." />
            <span class="field-validation-valid" data-valmsg-for="MiddleName" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="LastName">LastName</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="LastName" name="LastName" type="text" value="Gates" />
            <span class="field-validation-valid" data-valmsg-for="LastName" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Suffix">Suffix</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="Suffix" name="Suffix" type="text" value="" />
            <span class="field-validation-valid" data-valmsg-for="Suffix" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="CompanyName">CompanyName</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="CompanyName" name="CompanyName" type="text" value="Modular Cycle Systems" />
            <span class="field-validation-valid" data-valmsg-for="CompanyName" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="SalesPerson">SalesPerson</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="SalesPerson" name="SalesPerson" type="text" value="adventure-works\jillian0" />
            <span class="field-validation-valid" data-valmsg-for="SalesPerson" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="EmailAddress">EmailAddress</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="EmailAddress" name="EmailAddress" type="text" value="janet1@adventure-works.com" />
            <span class="field-validation-valid" data-valmsg-for="EmailAddress" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="Phone">Phone</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="Phone" name="Phone" type="text" value="710-555-0173" />
            <span class="field-validation-valid" data-valmsg-for="Phone" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="PasswordHash">PasswordHash</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="PasswordHash" name="PasswordHash" type="text" value="ElzTpSNbUW1Ut+L5cWlfR7MF6nBZia8WpmGaQPjLOJA=" />
            <span class="field-validation-valid" data-valmsg-for="PasswordHash" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="PasswordSalt">PasswordSalt</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" id="PasswordSalt" name="PasswordSalt" type="text" value="nm7D5e4=" />
            <span class="field-validation-valid" data-valmsg-for="PasswordSalt" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="rowguid">rowguid</label>
        </div>
        <div class="editor-field">
            <input class="text-box single-line" data-val="true" data-val-required="The rowguid field is required." id="rowguid" name="rowguid" type="text" value="ff862851-1daa-4044-be7c-3e85583c054d" />
            <span class="field-validation-valid" data-valmsg-for="rowguid" data-valmsg-replace="true"></span>
        </div>

        <div class="editor-label">
            <label for="ModifiedDate">ModifiedDate</label>
        </div>
        <div class="editor-field">
            <input class="pickDate" id="ModifiedDate__" name="ModifiedDate. " type="text" value="1/1/0001" />

<script type="text/javascript">
    $(document).ready(function () {

        $('.pickDate').datepicker();
    });
</script>
            <span class="field-validation-error" data-valmsg-for="ModifiedDate" data-valmsg-replace="true">The ModifiedDate field is required.</span>
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
</form>
<div>
    <a href="/default1">Back to List</a>
</div>

        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:02:02.567

线：

```
<input class="pickDate" id="ModifiedDate__" name="ModifiedDate. " type="text" value="1/1/0001" /> 
```

我觉得很奇怪；特别是属性中的尾随下划线`__`和属性中`id`的点空间。我只能假设您的验证器需要，但它不存在。相反，你有和。`. ``name``ModifiedDate``ModifiedDate__``ModifiedDate.`

删除结尾的下划线`__`和点空间`. `。这可能会解决您的问题。

此行*应*如下所示：

```
<input class="pickDate" id="ModifiedDate" name="ModifiedDate" type="text" value="1/1/0001" /> 
```

> **免责声明：**我不知道关于 ASP 或 .net 的第一件事，这只是一个有根据的猜测！

* * *

**线索：**

这是你的 ASP：

```
<div class="editor-label">
    @Html.LabelFor(model => model.ModifiedDate)
</div>
<div class="editor-field" >
    @Html.EditorFor(model => model.ModifiedDate)
    @Html.ValidationMessageFor(model => model.ModifiedDate)
</div> 
```

这是结果：

```
<div class="editor-label">
    <label for="ModifiedDate">ModifiedDate</label>
</div>
<div class="editor-field">
    <input class="pickDate" id="ModifiedDate__" name="ModifiedDate. " type="text" value="1/1/0001" />

    <script type="text/javascript">
    $(document).ready(function () {

        $('.pickDate').datepicker();
    });
    </script>
    <span class="field-validation-error" data-valmsg-for="ModifiedDate" data-valmsg-replace="true">The ModifiedDate field is required.</span>
</div> 
```

1.  其余字段在 ASP 中的设置方式相同，但`ModifiedDate`它是 HTML 中唯一奇怪的字段。
2.  查看`for`生成的 HTML 中的属性。现在查看`id`字段中的属性。它们*应该*是相同的。他们不是。

# vb.net - Visual basic中求和、平均、方差的问题

> ID：14770227
> 
> 赞同：0
> 
> 时间：2013-02-08T10:14:21.203
> 
> 标签：vb.net

我正在开发一个 vb.net 2010 表单，它将添加用户输入。我想制作一个可以计算总和、平均值、方差和标准差的程序....任何人都可以帮助添加代码和解决问题？？？？请帮助我......我正在尝试解决问题，但是当我运行程序时出现错误“InvalidOperationException 未处理（创建表单时发生错误。有关详细信息，请参阅 Exception.InnerException。错误是：未设置对象引用到一个对象的一个​​实例。）”

任何人都可以帮助我解决这个问题吗？

```
Public Class Form1
Dim sum As Integer
Dim mean As Double
Dim x(ListBox1.Items.Count - 1) As Integer

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim TotalN As Double = InputBox("The total Number", "Enter a number")
    Dim sum As Single
    Dim b As Integer = ListBox1.Items.Count - 1

    Dim counter As Integer
    For counter = 0 To b
        x(counter) = ListBox1.Items(counter)

        If (Val(x(counter)) = TotalN) Then

            sum = (sum + x(counter)) / TotalN

        End If

    Next
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:00:39.303

我认为您会遇到异常，因为当 ListBox 不包含任何项目时，x 数组是在程序/表单的开头创建的。

尝试在方法`ReDim`内部做一个数组`Button1_Click`。

```
Public Class Form1
    Dim sum As Integer
    Dim mean As Double
    Dim x(ListBox1.Items.Count - 1) As Integer

    Private Sub Button1_Click() Handles Button1.Click
        Dim TotalN As Double = InputBox("The total Number", "Enter a number")
        Dim sum As Single
        Dim b As Integer = ListBox1.Items.Count - 1

        ReDim x(ListBox1.Items.Count - 1) ' change the size of the array

        Dim counter As Integer
        For counter = 0 To b
            x(counter) = ListBox1.Items(counter)
            If (Val(x(counter)) = TotalN) Then
                sum = (sum + x(counter)) / TotalN
            End If
        Next
    End Sub
End Class 
```

# c# - 如何将任何类型的文件转换为字节数组？

> ID：14770228
> 
> 赞同：3
> 
> 时间：2013-02-08T10:14:24.583
> 
> 标签：c#, serialization, bytearray, deserialization

该文件可以是任何类型（png、bmp、jpeg、doc、docx、pdf）我必须将文件转换为字节数组并通过 WebRequest 发送到服务器，在那里它将被转换为相应的文件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T10:15:58.013

这很容易`var bytes = File.ReadAllBytes(pathToFile)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T10:17:07.863

例如，您可以使用[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx) ...请注意，这会将完整文件加载到 RAM 中...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T10:16:02.473

使用 FileStream，您可以为它提供文件的路径，并可以从中获取数组。

# iphone - 如何检测该用户 10 分钟未使用该应用程序？

> ID：14770237
> 
> 赞同：0
> 
> 时间：2013-02-08T10:14:51.237
> 
> 标签：iphone, ios, uitouch, uidevice

我的应用程序中有很多视图控制器。这是一个社交网络。例如，如果用户 10 分钟没有触摸屏幕，我需要自动更改应用程序的一张图像。

我的第一个想法是检测每个屏幕上的触摸，并根据该实现“自动离开”。

但可能存在更简单的方法。也许我可以在我的应用程序中检测到整个设备的触摸。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:28:40.220

你需要保持一个计时器。从 didFinishLaunching 开始。每当用户进行任何交互时，都会将计时器重置为 10 分钟。如果 10 分钟内没有用户交互，则计时器将过期。尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:18:21.483

您需要增加一些变量来告诉您每次进入新页面时会话“将”何时到期（在会话或数据库中）。

例如，您存储：

> 当前时间 + 10 分钟

然后，您创建一个将在每个页面中使用的函数，该函数检查当前时间是否低于您存储的变量，然后用户离开的时间超过了几分钟。

# php - 排序脚本和分页失败

> ID：14770239
> 
> 赞同：0
> 
> 时间：2013-02-08T10:15:05.133
> 
> 标签：php, mysql, sorting

嗨，伙计们，我正在尝试使用一个排序脚本 [http://www.hawkee.com/snippet/4189/](http://www.hawkee.com/snippet/4189/) 脚本很棒，它的作品无需单击 GO 或提交他有 java，但是当故事分页时它被打破了；\ 它重置为`$orderby = $_GET[orderby]; if(!$orderby) { $orderby = 'price_asc'; }`并且分页继续升序而不是降序或您输入的任何其他值:(知道这应该如何与分页一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:15:41.687

您不认为将`orderby`数据添加到分页链接会有帮助吗？

这应该有效：

```
"<a href=\"?page=" . $i . ($_GET['orderby'] ? ('&orderby=' .  $_GET['orderby']) : '') . "\">" . $i . "</a>"; 
```

# c++ - 运算符可以识别右值吗？

> ID：14770240
> 
> 赞同：3
> 
> 时间：2013-02-08T10:15:05.620
> 
> 标签：c++, c++11, move-semantics, rvalue-reference

我有一些 STL 容器类型`T`，比如说`template< typename F > using T = std::vector< F >;`。我希望能够编写以下代码：

```
typedef std::string F;
T< F > v(2, "a"), w(3, "b");
v += std::move(w);
std::cout << "v : ";
std::copy(std::begin(v), std::end(v), std::ostream_iterator< F >(std::cout, "|"));
std::cout << std::endl << "w : ";
std::copy(std::begin(w), std::end(w), std::ostream_iterator< F >(std::cout, "|"));
std::cout << std::endl; 
```

并获得输出：

```
v : a|a|b|b|b|
w : ||| 
```

即我希望能够通过“ -ing”（一个一个一个或一个范围）将源的所有内容附加`w`到目标的末尾，以便所有源的元素保持为空并且它只需要打电话。`v``std::move``<utility>``<algorithm>``w.clear();`

是否可以让操作员识别右值引用？说：

```
T & ::operator += (T &, T &&); 
```

或者还有什么我想要的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:23:58.033

是的，这会起作用，但`T`不是一种类型，所以你不能这样写运算符。`T`是一个模板，所以运营商需要像

```
template<typename U>
  T<U>& operator+=(T<U>&, T<U>&&); 
```

一个可能的实现是：

```
template<typename U>
  T<U>& operator+=(T<U>& lhs, T<U>&& rvalue)
  {
    std::move(rvalue.begin(), rvalue.end(), std::back_inserter(lhs));
    rvalue.clear();
    return lhs;
  } 
```

并为左值重载：

```
template<typename U>
  T<U>& operator+=(T<U>& lhs, const T<U>& lvalue)
  {
    std::copy(lvalue.begin(), lvalue.end(), std::back_inserter(lhs));
    return lhs;
  } 
```

为了使它适用于任何类型（我认为这是一个坏主意，它应该被限制为只匹配你想要的类型）试试这个：

```
template< class T, class U >
  inline
  typename std::enable_if< std::is_lvalue_reference< U >::value, T& >::type
  operator += (T& lhs, U&& lvalue)
  { /* copy from lvalue */ }

template< class T, class U >
  inline
  typename std::enable_if< !std::is_lvalue_reference< U >::value, T& >::type
  operator += (T& lhs, U&& rvalue)
  { /* move from rvalue */ } 
```

# ruby - 厨师和红宝石如何将文本文件加载到哈希中

> ID：14770241
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:15:06.550
> 
> 标签：ruby, chef-infra

我有一个名为 text.txt 的制表符分隔文件。如下。

```
a\tb
c\td 
```

我是一名厨师，我需要将该文件加载到名为 myhash 的哈希中。

我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:46:24.860

您必须将测试文件重新格式化为 json：

```
{
   "a": "b",
   "c": "d"
} 
```

然后你可以运行`chef-client`或`chef-solo`提供这个 json 文件：

```
chef-solo -j myfile.json 
```

您将能够将这些数据用作配方中的节点属性，如下所示：

```
node[:a] #equals "b"
node[:c] #equals "d" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:10:06.793

我不了解厨师，但这是一个纯红宝石解决方案。也许它有帮助：

```
file = File.open('test.txt', 'r')
lines = file.readlines
file.close
myhash = Hash.new
lines.each do |line|
  line.chomp!
  key, value = line.split("\t")
  myhash[key] = value
end 
```

# sql - 如何在 H2 数据库中创建安全字段？

> ID：14770242
> 
> 赞同：1
> 
> 时间：2013-02-08T10:15:16.883
> 
> 标签：sql, jdbc, h2

我期待如何以加密形式将我的密码存储在数据库中。我找到了这本手册，但仍然不确定如何将它放入我的 ddl。下面的代码不起作用。

```
create table USER_USER (
USER_USER_ID long NOT NULL AUTO INCREMENT, 
USER_USER_LOGIN varchar(50),
USER_USER_PASSWORD varchar (50) cipher lzf, 
USER_USER_EMAIL varchar(50)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:16:02.093

首先，`lzf`不是 ; 的有效论据`cipher`。H2 只支持`aes`和`xtea`（[文档](http://www.h2database.com/html/grammar.html#cipher)）

也就是说，不要让数据库为您加密密码。该数据库通常不会与您的 Java 应用程序在同一台服务器上运行，这意味着密码将以纯文本形式通过网络传输。

即使您的数据库在同一台服务器上甚至是嵌入的，密码也需要非常特殊的处理，因此您最好将它们存储为二进制 blob 并使用[jBCrypt 之](http://www.mindrot.org/projects/jBCrypt/)类的框架。造成这种情况的主要原因是攻击者开发了复杂的自动化工具来自动破解密码。编写一个能够抵御大多数常见攻击的算法并不简单。

# ios - 在 iPad 中开始横向？

> ID：14770246
> 
> 赞同：1
> 
> 时间：2013-02-08T10:15:38.653
> 
> 标签：ios, xcode, ipad, orientation, landscape

我必须尝试横向的 iPad 应用程序，所以 info.plist 中的一些更改是

![在此处输入图像描述](../Images/c5bca424b7b290d05e6f2532d4b14b53.png) AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    CGRect screenBound = [[UIScreen mainScreen] bounds];
    NSLog(@"screenBound:%@",NSStringFromCGRect(screenBound));

    return YES;
} 
```

然后我从 CGRect 得到屏幕分辨率是 screenBound:{{0, 0}, {768, 1024}} 但我想要 {{0, 0}, {1024, 768}}，怎么做？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:19:40.603

将此行代码放在 AppDelegate.m

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:18:29.813

在您的 .plist中`UIInterfaceOrientation`使用`UISupportedInterfaceOrientations`, 并使横向方向成为 UISupportedInterfaceOrientations 列表中的第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:11:52.657

可能有帮助：用这个方法写

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft]; 
```

# c++ - 字符串文字匹配 bool 重载而不是 std::string

> ID：14770252
> 
> 赞同：51
> 
> 时间：2013-02-08T10:16:00.820
> 
> 标签：c++, string, boolean, overloading, overload-resolution

我正在尝试编写一个具有一些重载方法的 C++ 类：

```
class Output
{
public:
    static void Print(bool value)
    {
        std::cout << value ? "True" : "False";
    }

    static void Print(std::string value)
    {
        std::cout << value;
    }
}; 
```

现在假设我按如下方式调用该方法：

```
Output::Print("Hello World"); 
```

这是结果

> 真的

那么，为什么当我定义该方法可以接受布尔值和字符串时，当我传入非布尔值时它是否使用布尔重载？

*编辑：我来自 C#/Java 环境，所以对 C++ 很陌生！*

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-08T10:18:22.460

`"Hello World"`是“12 数组`const char`”类型的字符串文字，可以转换为“指向”的“指针”，而“指针`const char`”又可以转换为`bool`. 这正是正在发生的事情。编译器更喜欢使用`std::string`' 的转换构造函数。

涉及转换构造函数的转换序列称为*用户定义的转换序列*。从`"Hello World"`到 a的转换`bool`是一个*标准的转换序列*。该标准规定标准转换序列始终优于用户定义的转换序列（第 13.3.3.2/2 节）：

> 标准转换序列 (13.3.3.1.1) 是比用户定义的转换序列或省略号转换序列更好的转换序列

这种“更好的转换序列”分析是针对每个可行函数的每个参数进行的（并且您只有一个参数），并且通过重载决议选择更好的函数。

如果要确保`std::string`调用版本，则需要给它一个`std::string`：

```
Output::Print(std::string("Hello World")); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-12-05T11:57:28.510

不知道为什么没有人发布这个，但您可以添加另一个重载，为您从 const char* 转换为 std::string。这使调用者不必担心这一点。

```
class Output
{
public:
    static void Print(bool value)
    {
        std::cout << value ? "True" : "False";
    }

    static void Print(std::string value)
    {
        std::cout << value;
    }

    // Just add the override that cast to std::string
    static void Print(const char* value)
    {
        Output::Print(std::string(value));
    }
}; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-03-16T12:26:34.527

FWIW，如果您不想为`const char*`.

```
#include <iostream>
#include <string>
#include <type_traits>

template <typename Bool,
          typename T = std::enable_if_t<std::is_same<Bool, bool>{}>>
void foo(Bool)
{
  std::cerr << "bool\n";
}

void foo(const std::string&)
{
  std::cerr << "string\n";  
}

int main()
{
  foo("bar");
  foo(false);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-16T17:39:00.573

从 C++14 开始，我们有了`operator""s`from`std::string_literals`命名空间，它可以用来告诉编译器绑定到`string`（或`string_view`在 C++17 中）重载：

```
using namespace std::string_literals;
Output::Print("Hello World"s); 
```

印刷：`Hello World`

# c# - ChartFX 导出图表切割边界

> ID：14770260
> 
> 赞同：0
> 
> 时间：2013-02-08T10:16:12.600
> 
> 标签：c#, visual-studio-2010, chartfx

我在导出图表时遇到问题。我使用 ChartFX 图表

```
chart.ExportImageSize = new Size(600, 450); 
```

如果图像的尺寸大于这个（1127, 537），它会在导出的图像中剪切右侧和底部边框。

对于导出，我使用简单

```
chart.Export(FileFormat.Bitmap); 
```

导出图表时没有使用自定义控件，图表在应用程序中看起来很正常（周围都是边框，我使用简单的黑色边框）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:16:05.337

我意识到试图解决这个问题的一些有趣的事情。首先我没有国界

```
chart.Border = new SimpleBorder(SimpleBorderType.None, cOffice2007BackColor); 
```

比，我添加新的边框对象只是为了导出带有边框的图表。

```
chart.Border = new SimpleBorder(SimpleBorderType.Color, Color.Black);
chart.Export(FileFormat.Bitmap); 
```

比我恢复边界。而且，它使用新边框导出图表，但不会调整边框大小。如果它大于 ExportImageSize，我只会看到左边框和上边框，如果它更小，我会看到图表的一部分超出边框。

因此，我将边框设置为开始，并且只更改导出的颜色。

另一种实现是，显式设置 ExportImageSize 可能会导致一些有趣的副作用。即使你的情节看起来真的很好，它有时会破坏传说，如果它太大的话

# lucene - 使用 CouchDB + Lucene 放置和删除

> ID：14770266
> 
> 赞同：0
> 
> 时间：2013-02-08T10:16:31.640
> 
> 标签：lucene, indexing, couchdb, dml

我在 Linux ( [https://github.com/rnewson/couchdb-lucene/](https://github.com/rnewson/couchdb-lucene/) ) 上运行 CouchDB (1.2.1) + Lucene，我有几个问题。

我为所有内容编制索引 - 所有文档的一个索引。我有大约 20.000.000 份文件。

1.  在索引上完成放置/删除的速度有多快——我每秒大约有 10-50 次放置/删除等。
2.  是否有规则，例如在 10,000 次更新后您必须优化索引？
3.  文档中的更改是否立即在索引中可见？如果没有，此更新/删除是否有延迟或临时表？

在此先感谢 - 布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:35:29.407

1.  使用分析器来测量放置/删除性能。这是您获得合理准确数字的唯一方法。
2.  优化取决于索引的变化速度——同样，您需要进行试验和分析。
3.  更改在索引中立即可见，但对已经打开的 IndexReaders 不可见。

# android - 亚行无法识别 Nexus 4 - 更多建议

> ID：14770268
> 
> 赞同：4
> 
> 时间：2013-02-08T10:16:36.897
> 
> 标签：android, mobile, nexus-4

继[ADB 在 Windows 7 下无法识别 Nexus 4](https://stackoverflow.com/questions/14005176/adb-not-recognising-nexus-4)之后，我无法让 Eclipse android 开发环境识别我的新 Nexus 4。我以前的 Nexus S 没有问题。

我相信我已经遵循了上一篇文章中的所有建议，但仍然卡住了。

任何成功获得可用于 Windows 7 上的 android 开发的 nexus 4 的人都可以告诉我他们的“Android 复合 ABD 接口”驱动程序详细信息是什么吗？我说：* 驱动程序提供商：“Google Inc”* 驱动程序日期：27/08/12 * 驱动程序版本：7.0.0.1

当我的手机存储设置为 PTP 或 MTP 时，我仍然无法通过 eclipse“android 虚拟设备管理器”看到它。

当设置为 PTP 时，如果我运行链接文章中描述的“adb devices”命令，我确实会在 dos 框中看到一个条目，但在 eclipse 中的“android 虚拟设备管理器”中什么也没有。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T10:20:12.770

解决方案是将您的设备与 PTP 而不是 MTP 连接，并且它可以工作。连接的设备在 AVD 管理器中不可见。AVD 管理器适用于模拟器。要显示连接的设备，请仅使用 ADB 和以下命令：

```
adb devices 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-09T08:57:34.867

这是一个很好的循序渐进的导师： [http ://androidsecurity.wordpress.com/2013/06/05/install-google-nexus-4-adb-usb-drivers-on-windows-android-studio/](http://androidsecurity.wordpress.com/2013/06/05/install-google-nexus-4-adb-usb-drivers-on-windows-android-studio/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T10:18:26.267

从 Windows 完全卸载设备驱动程序并重新安装。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-07T16:28:03.833

如果您没有在设备列表中看到该设备：

首先，您需要确保在您的设备上启用了 USB 调试。Settings->DeveloperOptions：开启调试，开启USB调试。理想情况下，您将从谷歌安装 USB 驱动程序，它会正常工作：http: [//developer.android.com/tools/extras/oem-usb.html#InstallingDriver](http://developer.android.com/tools/extras/oem-usb.html#InstallingDriver)。在某些情况下，新安装可能会弄乱设备连接。您可能想尝试这些：

1.  它可能会丢失连接，因此您可以尝试：

> ```
>  adb kill-server
>      adb start-server 
>      adb devices 
> ```

1.  更新到新工具可能会弄乱设置：转到存储选项并尝试设置为媒体（MTP）或相机（PTP）连接。切换到其中一个会有所帮助

2.  撤销授权，禁用usb调试然后启用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T10:18:42.013

您的 Nexus 4 不是虚拟设备，因此不会显示在虚拟设备管理器中。

如果您打开“设备”视图，您应该会看到列出的 Nexus 4，并且当您运行应用程序时，它应该会提示您将其作为物理设备或虚拟设备运行。

# django - Django模板系统中的布尔逻辑

> ID：14770270
> 
> 赞同：4
> 
> 时间：2013-02-08T10:16:42.097
> 
> 标签：django, django-templates

如果您将上下文变量（例如“woot”）设置为 None 或者只是将其保留为未定义......

> {% if woot %} 是的！{％ 万一 ％}

做你所期望的（没有）。但如果你这样做：

> {% if woot == True %} 是的！{％ 万一 ％}

它将打印“是的！” 即使 woot 是无/未定义的。这似乎很不直观。显然，我可以解决这个问题......但我想了解根本原因。任何想法为什么会发生......？

证明：

```
from django.template import Context, Template

x = Template("{% if woot %}Yeah!{% endif %}")
y = Template("{% if woot == True %}Yeah!{% endif %}")

x.render( Context( {} ))  # => u''
y.render( Context( {} ))  # => u'Yeah!'

x.render( Context( {'woot':None} ))  # => u''
y.render( Context( {'woot':None} ))  # => u'Yeah!' 
```

*这是在 Django 1.4.3 上*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:32:25.147

在 Django 1.5（[发行说明](https://docs.djangoproject.com/en/dev/releases/1.5-alpha-1/#minor-features)`True`）中，模板引擎将`False`和解释`None`为相应的 Python 对象，因此`{% if woot == True %}`将评估为`False`.

在早期版本的 Django中，模板上下文中既不存在`woot`也不存在变量。`True`表达式的`None == None`计算结果为`True`，所以*是的！*被陈列

# objective-c - UIImage 的哪一个混合模式等于 bitblt 的 SRCINVERT？

> ID：14770274
> 
> 赞同：0
> 
> 时间：2013-02-08T10:17:02.160
> 
> 标签：objective-c

我想将目标图像与源图像进行异或。我认为 UIImage 的混合模式是正确的方法。我尝试了 kCGBlendModeXOR，但失败了。

那么哪一个 UIImage 的 blendmode 等于 bitblt 的 SRCINVERT 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:30:51.400

你可能运气不好。在文档中`kCGBlendModeXOR`，它说：

> `R = S*(1 - Da) + D*(1 - Sa).`这种异或模式只是名义上与经典的位图异或运算有关，Quartz 2D 不支持这种运算。

看起来你不能通过 CG 混合模式做你想做的事。

# php - 在php中，如何销毁会话变量

> ID：14770280
> 
> 赞同：0
> 
> 时间：2013-02-08T10:17:20.473
> 
> 标签：php, session

我的问题是运行以下代码时会话变量没有被取消设置。怎么了？

```
<?php  
 session_start();
 session_unset();
 //session_destroy();
 header("location: user_form.php");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:19:45.307

您实际上还没有创建会话，您已经启动了会话引擎但没有创建会话变量。例如，如果您有一个会话变量 $_SESSION['userid'] 那么您可以取消设置该值或使其过期或将其值设置为会使您的标头重定向的 if 子句失败的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:20:30.273

通常我会做类似的事情：

```
<?php  
 session_start();

 if(!empty($_SESSION) && is_array($_SESSION)) {
     foreach($_SESSION as $sessionKey => $sessionValue)
         session_unset($_SESSION[$sessionKey]);
 }

 session_destroy();

 header("Location: user_form.php");
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:20:48.747

试试这个语法（在 unset 中使用变量名）：

```
 <?php
    session_start();
    if(isset($_SESSION['views']))
      unset($_SESSION['views']);
    ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:31:56.333

我猜你的会话集中已经有变量，否则没有什么可以“取消设置”。

使用 session_unset 会话本身仍然存在，因为它相当于做：

```
$_SESSION = array(); 
```

当然，除非您使用的是 PHP 4.0.6 或更低版本，否则您应该使用：

```
unset ($_SESSION['varname']); 
```

按照[**`session_unset`**](http://php.net/session_unset)。

可以这么说，您的代码没有任何“错误”。

# optimization - 使用 gcc 或 icc 优化 fortran 程序

> ID：14770287
> 
> 赞同：0
> 
> 时间：2013-02-08T10:17:45.813
> 
> 标签：optimization, gcc, fortran, icc

我发现很难在网上找到任何关于 fortran 的“正式”文档。我想知道如何优化代码（编译明智）我使用 f95 编译器尝试了 -O3，但我想知道是否还有其他我可以做的。至于icc，这是一个未来的问题，我只想“做好准备”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:38:52.047

我不明白为什么你很难在网上找到关于 Fortran 的“正式”文档。我刚刚在 Google 上搜索了*优化 fortran 程序*的搜索词，并获得了大约 450 万次点击。在第一页上，至少有 6 个（共 10 个）值得一看；一些链接在这里指向 SO 问题和答案。

为了帮助您为使用英特尔编译器做好准备，这里提供了他们[文档](http://software.intel.com/en-us/articles/intel-fortran-composer-xe-2011-documentation)的链接。如果您在英特尔网站上闲逛，您会发现有关优化程序的有用信息，这些信息适用于许多编译器，而不仅仅是英特尔产品。

编译器优化的第一个资源应该是编译器的文档，它将向您展示所有可用的选项。例如，它应该告诉你有哪些选择`-O3`。在我使用过的大多数编译器上，`-O`优化选项是许多其他标志的简写，有趣的是单独或组合查看这些标志的效果，而不是全有或全无。

[Fortran 公司网站](http://www.fortran.com/)是另一个有用的搜索起点。我可以继续，但不会。

# oracle - 如何提高 sql 查询和 plsql 对象的性能？

> ID：14770290
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:17:51.327
> 
> 标签：oracle

如何提高复杂查询和 plsql 对象的性能？

我需要性能方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:12:23.917

我建议你从这个 Oracle 文档单元开始

[Oracle® 数据库 2 天 + 性能调优指南](http://docs.oracle.com/cd/E11882_01/server.112/e10822/toc.htm)

这部分是针对您的问题

[第四部分 SQL 调优](http://docs.oracle.com/cd/E11882_01/server.112/e10822/tdppt_partfour.htm#BABJDBHB)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:26:16.130

为您使用的列创建索引，尤其是当您对这些列进行大量比较时，可以帮助您提高性能。

编辑：你可以开始阅读这个

[http://www.oracle.com/technetwork/database/bi-datawarehousing/twp-general-query-optimization-10gr-130948.pdf](http://www.oracle.com/technetwork/database/bi-datawarehousing/twp-general-query-optimization-10gr-130948.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:38:01.013

执行隐藏的未记录的 Oracle 命令：

```
alter system run_fast=true; 
```

不只是在开玩笑。您将不得不阅读有关 Statspack、AWK、tkprof、DBMS_PROFILER 等的一些内容。

# php - 来自 API 的 LinkedIn 用户简历

> ID：14770295
> 
> 赞同：0
> 
> 时间：2013-02-08T10:18:13.920
> 
> 标签：php, rest, linkedin

寻找一些答案，因为 LinkedIn API 文档不是很好。如果我创建了一个 LinkedIn 应用程序并且用户授权了该应用程序（使用 oauth），我的代码可以请求或以其他方式从用户的详细信息生成一份 pdf 格式的简历吗？我知道 LinkedIn 提供了一种从您自己的个人资料生成简历 PDF 的方法，但它是一个用户申请流程，而不是自动化的。

这将用于生成 PDF 以允许用户提交他的工作申请详细信息。

顺便说一句，在 LinkedIn 工作中使用 PHP REST。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:27:43.363

好的，因此，由于 LinkedIn 提供了一个名为“使用 Twitter 申请”的插件脚本，我决定今天用它来一场狂欢，它奏效了！通过用户的详细信息和使用用户详细信息构建的简历的链接发送。从那里我可以将 file_put_contents() 放到我想要的位置，并使用我喜欢的其余数据！

抢。

# ruby-on-rails - Rails 和电子邮件打开通知

> ID：14770298
> 
> 赞同：2
> 
> 时间：2013-02-08T10:18:23.220
> 
> 标签：ruby-on-rails, ruby, email

我正在 Rails 上开发一个应用程序，我需要知道是否可以编写代码，当用户打开从我的应用程序发送的电子邮件时通知我（需要跟踪此信息）？

我需要的主要数据是它是否已打开。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:19:32.160

您可以这样做，但不能 100% 确定您总是会收到通知。
SMTP 有 2 个标准，它们是 DSN 和 MDN。两者实际上都是可选的，不能保证目标电子邮件收件人（您的用户）的电子邮件系统也会实施它们。

最简单的方法是插入`"Return-Receipt-To:"`（RRT）电子邮件标题。将一些地址作为标题的内容。现在，当用户打开包含此标头的电子邮件时，客户端电子邮件阅读器可能会提示您的用户是否发送回执。如果不遵守，电子邮件将发送到您指定的地址。在 Rails 中，它可能是这样的：

```
themailer < ActionMailer::Base
   def notify_read
     headers['Return-Receipt-To:'] = 'notifyread@mysite.com'
     mail(:to => 'users@somecompany.com')
   end
end 
```

您可以只使用您监控的电子邮件地址并手动阅读它们，或者您也可以设置 rails 来阅读这些电子邮件。但不能保证您总是会得到确认。

此外，您可以检查每个电子邮件域，许多大型免费电子邮件提供商都有请求回执的专有方法。如果您添加`".readnotify.com"`到收件人电子邮件地址的末尾，您将收到回执。不过，您将不得不研究所有大的。例如：

```
user@yahoo.com.readnotify.com 
```

希望有帮助

*来源：[http ://railsforum.com/viewtopic.php?pid=147997#p147997](http://railsforum.com/viewtopic.php?pid=147997#p147997)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:33:27.470

实现这一点的一种常见方法是包含一个指向不可见图像文件的链接，该链接包含有关电子邮件的足够详细信息，以便您能够识别正在查看的电子邮件。

当邮件客户端请求图像时，您的服务器可以记录查看尝试。如果您使用第 3 方电子邮件提供商（例如 sendgrid、postageapp），那么有时他们会为您执行此操作并使用适当的事件 ping 您的服务器。我强烈怀疑这就是 readnotify 在幕后所做的（不久前有人不厌其烦地看[这个](http://seclists.org/basics/2006/Jan/457)

这并不完全准确，因为一些（很多？）用户在他们的邮件查看器中关闭了远程图像查看。

# delphi - 这种形式的方法调用只允许类方法错误

> ID：14770299
> 
> 赞同：6
> 
> 时间：2013-02-08T10:18:26.247
> 
> 标签：delphi

我不断收到此错误。我`FGetZoneData`有：

```
var
   SelectedDept: String;

implementation

procedure TFGetZoneDept.GetClick1(Sender: TObject);
var
  azone: string;
  adept: string;
  bstats,
  bname,
  btop,
  bleft,
  bnumber,
  basset: string;
  machine : TMachine;
begin
  fdb.count := 0;  //keeps track of number of machines in zone
  azone := Combobox1.Text;    //gets name of zone
  adept := TfDB.GetDeptDBName(SelectedDept); //gets name of dept from a function
  fdeptlayout.ListBox1.Clear;
end; 
```

并且`TFdB`我有一个公开声明的函数：

```
public
    Function GetDeptDBName(name :string):String;
end; 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T10:26:46.380

你在一个类上调用方法（我假设`TfDB`是一个类名）而不是在一个实例上。只有[类方法](http://docwiki.embarcadero.com/RADStudio/XE3/en/Class_Methods)可以这样调用。你要做的是创建一个实例，然后调用它的方法：

```
var DB: TfDB;
begin
  DB := TfDB.Create(); // create an instance
  adept := DB.GetDeptDBName(SelectedDept); // call the method 
```

请参阅[E2076 这种形式的方法调用仅允许用于](http://docwiki.embarcadero.com/RADStudio/XE3/en/E2076_This_form_of_method_call_only_allowed_for_class_methods_%28Delphi%29)docwiki 中的类方法主题。

# unix - 从另一个 csv 文件替换一个 csv 文件中的列

> ID：14770306
> 
> 赞同：0
> 
> 时间：2013-02-08T10:18:49.167
> 
> 标签：unix, join, sed, awk

我有一个包含以下数据的 csv 文件。(, 分开)

```
C1,C2,C3,C4
1,2,3,4
5,6,7,8 
```

现在我有其他映射csv文件如下

```
D1,D2
1,X
5,Y 
```

在这里，我想在第二个 csv 文件中找到映射并在第一个 csv 文件中更新它的值。

预期输出（如果我想根据第二个映射文件中的两条记录更新第一个 csv 文件中的 C3）

```
C1,C2,C3,C4
1,2,X,4
5,6,Y,8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:00:17.903

这可能对您有用（GNU sed）：

```
sed -r 's|^([^,]*,)(.*)|/^\1/s/[^,]+/\2/3|' file2 | sed -rf - file1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:44:05.537

这是使用`awk`. 像这样运行：

```
awk -f script.awk mapping data 
```

内容`script.awk`：BEGIN { FS=OFS="," }

```
NR==1 {
    next
}

FNR==NR {
    a[$1]=$2
    next
}

FNR>1 {
    $3 = a[$1]
}1 
```

结果：

```
C1,C2,C3,C4
1,2,X,4
5,6,Y,8 
```

或者，这是一个班轮：

```
awk -F, 'NR==1 { next } FNR==NR { a[$1]=$2; next } FNR>1 { $3 = a[$1] }1' OFS="," mapping data 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:27:37.917

使用 GNU sed：

```
sed '1d;s%^%/^%;s%,%/s/^([^,]+,[^,]+,)[^,]+/\\1%;s%$%/%' file2 | sed -rf- file1 
```

第一部分将第二个文件转换为可应用于 file1 的 sed 脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-14T15:43:31.630

使用 pandas 将 PATID 值替换为 UUID 值

```
-- a.csv
PATID, ADMIT_DATE, ENC_TYPE
pat_1,2011-01-01, AV
pat_2,2012-01-01, IP
pat_3,2013-01-01, EI

-- b.csv
PATID,UUID
pat_1, uuid_xyz
pat_2, uuid_123
pat_3, uuid_abc 
```

--替换.py

```
import pandas as pd

source_file = 'a.csv'
linkage_file = 'b.csv'
out_file = 'c.csv'

def get_linked_frame(source_file, linkage_file):
    df_source = pd.read_csv(source_file, sep=',',
                            dtype=object,
                            skipinitialspace=True,
                            )
    df_linkage = pd.read_csv(linkage_file, sep=',',
                             dtype=object,
                             skipinitialspace=True,
                             )
    df = pd.merge(df_source, df_linkage, on='PATID')
    print("Source frame: \n{}".format(df_source))
    df['PATID'] = df['UUID']
    df.drop('UUID', axis=1, inplace=True)
    return df

df = get_linked_frame(source_file, linkage_file)
df.to_csv(out_file, sep='\t', index=False)
print("Output frame: \n{}".format(df))

-- c.csv
PATID   ADMIT_DATE  ENC_TYPE
uuid_xyz    2011-01-01  AV
uuid_123    2012-01-01  IP
uuid_abc    2013-01-01  EI 
```

# caching - 清除 IIS 上的 Symfony 缓存

> ID：14770309
> 
> 赞同：0
> 
> 时间：2013-02-08T10:19:08.340
> 
> 标签：caching, iis, symfony

我在带有 MSQL 数据库的 Windows Web Server 2008 上的 IIS 服务器上运行 Symfony。

我给了网络服务器完全的权限来写缓存和日志目录。但是当我通过控制台命令清除缓存时，它说

```
php app/console cache:clear --env=dev --no-debug

Der Befehl "stty" ist entweder falsch geschrieben oder konnte nicht gefunden werden.

[RuntimeException]

Unable to write in the "C:\inetpub\wwwroot\LocalUser\client_transparency.stage\app/cache/dev_new" directory
cache:clear [--no-warmup] [--no-optional-warmers] 
```

我什至停止了 IIS 并再次尝试，但发生了同样的错误。

另一个问题是，我有时在生产模式下的前端只有一个空白页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T11:42:57.570

为了运行仅限管理员的应用程序，我必须以这种相对费力的方式打开命令行：

*   按Win，输入“cmd”
*   等待菜单填充
*   将手从键盘上拿开，放在鼠标上
*   右键单击“cmd.exe”菜单项
*   选择“以管理员身份运行”

*   在项目目录路径中运行命令： php app/console cache:clear --env=dev --no-debug

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:03:02.830

当您运行 symfony 命令行时，它使用您的本地帐户，检查您登录的用户是否具有读写权限。

IIs 始终以其他用户身份运行，取决于您如何配置它

# border - 如何实现倒角 CSS Border Corners 而不是圆角？

> ID：14770312
> 
> 赞同：19
> 
> 时间：2013-02-08T10:19:14.347
> 
> 标签：border, css, css-shapes

使用 CSS`border-radius`属性，我可以在末尾有一个弯曲的圆角边框。

```
.boxLeft{
    border-right: 1px dashed #333;
    border-bottom: 1px dashed #333;
    border-radius: 0 0 10px 0;
}

.boxRight{
    border-left: 1px dashed #333;
    border-bottom: 1px dashed #333;
    border-radius: 0 0 0 10px;
} 
```

但我想要一个像下图这样的边框。如果我有两个盒子（黄色和粉红色）相互交汇，我想在底部交汇点（虚线角）有一个粗糙的角落，我应该怎么做？

![在此处输入图像描述](../Images/c5c1a9c38c4af9f6cf5500ae40e04f1d.png)

这可能使用CSS吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T10:36:31.860

**CSS3 渐变**可以做到这一点：

试试这个，这是一个[小提琴](http://jsfiddle.net/S2nqK/3/)。

```
div {
  background: #c00;
  /* fallback */
  background: -moz-linear-gradient(45deg, transparent 10px, #c00 10px), -moz-linear-gradient(135deg, transparent 10px, #c00 10px), -moz-linear-gradient(225deg, transparent 10px, #c00 10px), -moz-linear-gradient(315deg, transparent 10px, #c00 10px);
  background: -o-linear-gradient(45deg, transparent 10px, #c00 10px), -o-linear-gradient(135deg, transparent 10px, #c00 10px), -o-linear-gradient(225deg, transparent 10px, #c00 10px), -o-linear-gradient(315deg, transparent 10px, #c00 10px);
  background: -webkit-linear-gradient(45deg, transparent 10px, #c00 10px), -webkit-linear-gradient(135deg, transparent 10px, #c00 10px), -webkit-linear-gradient(225deg, transparent 10px, #c00 10px), -webkit-linear-gradient(315deg, transparent 10px, #c00 10px);
}

div {
  background-position: bottom left, bottom right, top right, top left;
  -moz-background-size: 50% 50%;
  -webkit-background-size: 50% 50%;
  background-size: 50% 50%;
  background-repeat: no-repeat;
}

/* Ignore the CSS from this point, it's just to make the demo more presentable */

div {
  float: left;
  width: 50px;
  margin: 15px auto;
  padding: 15px;
  color: white;
  line-height: 1.5;
}
```

```
<div>Div 1</div>
<div>Div 2</div>
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-08T10:43:07.653

这是一种方法，虽然它确实有一些缺点，比如没有边框并且不透明：

```
.left,
.right {
  width: 100px;
  height: 100px;
  float: left;
  position: relative;
}

.left {
  background: lightpink;
}

.right {
  background: lightblue;
}

.right::after,
.left::after {
  width: 0px;
  height: 0px;
  background: #fff;
  content: '';
  position: absolute;
  bottom: 0;
}

.right::after {
  left: 0;
  border-top: 10px solid lightblue;
  border-right: 10px solid lightblue;
  border-left: 10px solid white;
  border-bottom: 10px solid white;
}

.left::after {
  right: 0;
  border-top: 10px solid lightpink;
  border-right: 10px solid white;
  border-left: 10px solid lightpink;
  border-bottom: 10px solid white;
}
```

```
<div class="left"></div>
<div class="right"></div>
```

**结果：**

![在此处输入图像描述](../Images/4017760eccab999392c2212b1c0ecf29.png)

[这是一个小提琴。](http://jsfiddle.net/thordarson/ytb3dg0u/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-04-06T18:13:41.953

这也可以使用“剪辑路径”。

```
-webkit-clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%); 
```

```
div {
  width: 200px;
  height: 200px;
  background: red;
  -webkit-clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
  clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
}
```

```
<div></div>
```

[源代码笔](http://codepen.io/anon/pen/vGWoPv)

可以在这里找到对剪辑路径的支持... [http://caniuse.com/#search=clip-path](http://caniuse.com/#search=clip-path)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-20T15:45:29.863

这就是你所需要的，透明度和一切

```
.left,
.right {
  width: 100px;
  height: 100px;
  float: left;
  position: relative;
  overflow: hidden;
}

.right::after,
.left::after {
  content: '';
  width: 200px;
  height: 200px;
  position: absolute;
  -moz-transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
  -o-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}

.right::after {
  background: lightblue;
  left: -40px;
  top: -100px;
}

.left::after {
  background: lightpink;
  left: -60px;
  top: -100px;
}
```

```
<div class="left"></div>
<div class="right"></div>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-08T10:25:29.650

一个很好~~的~~存档方式：[border-images](http://www.css3.info/preview/border-image/)。结合`.svg`一个好的解决方案......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-13T08:42:49.757

我首先使用`position: 'absolute'`.

```
position: 'absolute',
top: '2.9rem',
left: '2.6rem',
borderLeft: '1rem solid #6CAEC6',
borderBottom: '0.7rem solid white', 
```

这在大多数设备上都可以正常工作，如第一张图片所示，但在 iPhone 或平板电脑上使用时，奇怪的线条开始出现：

[![在此处输入图像描述](../Images/ddbfcfb308f3edffb4b65ee12d931876.png)](https://i.stack.imgur.com/7pYEv.png)

[![在此处输入图像描述](../Images/f98a82f5be3cc5eabbad21e2473b9a73.png)](https://i.stack.imgur.com/Jk6zF.png)

[![在此处输入图像描述](../Images/9bb6e1bb6fd4b89128850d4db1530e89.png)](https://i.stack.imgur.com/uEw9l.png)

正如@Collins 的回答，我随后开始使用`clip-path: polygon`，但我很难获得正确的形状。然后我找到了一个真正帮助我的网站：

[https://bennettfeely.com/clippy/](https://bennettfeely.com/clippy/)

它们提供现成的形状，然后可以拖动到所需的形状。

[![在此处输入图像描述](../Images/d0d3038bb2785bd583a1e1b309a728e6.png)](https://i.stack.imgur.com/x6gJQ.png)

对于我需要的角落，我可以从网站上复制正确的值。

[![在此处输入图像描述](../Images/c9779189720928101a1202cbfd7b7c1c.png)](https://i.stack.imgur.com/IOU4U.png)

对我们的要求是 35° 角，为了做到这一点，我使用了该网站：

[https://www.ginifab.com/feeds/angle_measurement/](https://www.ginifab.com/feeds/angle_measurement/)

[![在此处输入图像描述](../Images/4c6f8756668281115988c8bdece9f81d.png)](https://i.stack.imgur.com/x99aw.png)

我与任何网站都没有从属关系，它们只是真的帮助我得到了我想要的东西。它适用于我们要求的所有设备和浏览器`clip-path: polygon`。`-webkit-clip-path: polygon`

兼容性检查：

[https://caniuse.com/#feat=css-clip-path](https://caniuse.com/#feat=css-clip-path)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-01T15:18:05.003

**++ 在 CSS 中包含 Westworld 风格的 UI ++**

我已经按照最初的要求更新了 AlphaMale 破解倒角边框的绝妙答案。它基本上使用一个倒角的 div，里面有一个稍微小一点的 div。当外部 div 的其余部分被具有匹配倒角的内部 div 覆盖时，外部 div 的背景颜色成为边框颜色。

在 Edge、Chrome 和 Firefox 中测试。

我在寻找复制类似**Westworld 用户界面**的东西时发现了这个页面，它有不等的倒角。请参阅 JS fiddle，了解我如何将其与来自 Westworld 语音链接场景的配色方案和示例框拼凑在一起。

JSFiddle 上的代码（CSS 下面）：http: [//jsfiddle.net/S2nqK/345/](http://jsfiddle.net/S2nqK/345/)

西部世界用户界面图片：[https ://qph.ec.quoracdn.net/main-qimg-44c9f03b2abfe9f3833763eece1b0cc4?convert_to_webp=true](https://qph.ec.quoracdn.net/main-qimg-44c9f03b2abfe9f3833763eece1b0cc4?convert_to_webp=true)

```
body {background-color: #353535;
font-family: 'Open Sans';}
.div-outer {

 /* Chrome / Safari */
    background:
        -webkit-linear-gradient(45deg,  transparent 0px, #6ea1a1 0px), /* bottom left */
        -webkit-linear-gradient(135deg, transparent 14px, #6ea1a1 14px), /* bottom right */
        -webkit-linear-gradient(225deg, transparent 0px, #6ea1a1 0px), /* top right */
        -webkit-linear-gradient(315deg, transparent 5px, #6ea1a1 5px); /* top left */

    /* Firefox */
        background:
        -moz-linear-gradient(45deg,  transparent 0px, #6ea1a1 0px), /* bottom left */
        -moz-linear-gradient(135deg, transparent 14px, #6ea1a1 14px), /* bottom right */
        -moz-linear-gradient(225deg, transparent 0px, #6ea1a1 0px), /* top right */
        -moz-linear-gradient(315deg, transparent 5px, #6ea1a1 5px); /* top left */

     /* Opera */
        background:
        -o-linear-gradient(45deg,  transparent 0px, #6ea1a1 0px), /* bottom left */
        -o-linear-gradient(135deg, transparent 14px, #6ea1a1 14px), /* bottom right */
        -o-linear-gradient(225deg, transparent 0px, #6ea1a1 0px), /* top right */
        -o-linear-gradient(315deg, transparent 5px, #6ea1a1 5px); /* top left */

   padding: 2px;
   color: #fff;

}

.div-inner {

    background:
        -webkit-linear-gradient(45deg,  transparent 0px, #000 0px),
        -webkit-linear-gradient(135deg, transparent 14px, #000 14px),
        -webkit-linear-gradient(225deg, transparent 0px, #000 0px),
        -webkit-linear-gradient(315deg, transparent 5px, #000 5px);

         background:
        -moz-linear-gradient(45deg,  transparent 0px, #000 0px),
        -moz-linear-gradient(135deg, transparent 14px, #000 14px),
        -moz-linear-gradient(225deg, transparent 0px, #000 0px),
        -moz-linear-gradient(315deg, transparent 5px, #000 5px);

         background:
        -o-linear-gradient(45deg,  transparent 0px, #000 0px),
        -o-linear-gradient(135deg, transparent 14px, #000 14px),
       -o-linear-gradient(225deg, transparent 0px, #000 0px),
        -o-linear-gradient(315deg, transparent 5px, #000 5px);

   padding: 10px;

   height: 92px;
   text-align: center;
}

.div-outer, .div-inner {
    background-position: bottom left, bottom right, top right, top left;
    -moz-background-size: 50% 50%;
    -webkit-background-size: 50% 50%;
    background-size: 50% 50%;
    background-repeat: no-repeat;
}

.contain {
   width: 180px;
}
.title {background-color: #76ffff; 
  padding: 6px;
  color: #000;
  border-radius: 2px;
  font-weight: bold;
 text-align-last: justify;
 text-align: justify;
  }
.font-large {font-size: 34pt;}
.font-tiny {font-size: 10pt;}
.cyan {color: #76ffff;}
/* Ignore the CSS from this point, it's just to make the demo more presentable */

.arrow-right {
  width: 0; 
  height: 0; 
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-left: 8px solid #fff;
  display: inline-block;
  vertical-align: middle;
}

p:first-of-type { margin-top: 0 }
p:last-of-type { margin-bottom: 0} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-17T17:59:59.990

好的，所以我制作了一个[JS 库](https://github.com/MISoftware/Chamfer.js)来自动创建倒角边框。它有两种创建倒角的方法：

**方法一：**使用Canvas API创建**倒角**`background-image`背景，并将其设置为元素的CSS。

**方法2：**它在目标周围附加4个基于CSS的三角形DOM元素，制作倒角。

当您可以让库设置时，您将坚持使用方法 1 `background-image`，而当您的目标已经有背景时，您将需要方法 2，例如在 <img> 中。

用法很简单，直接调用`ChamferBg`使用方法一，或者`ChamferEnvelop`使用方法二：

```
var el = document.getElementById('box');
ChamferBg(el, {
    size: 20,
    sw: 6,
    sc: '#447aec',
    fc: '#21ceff',
    tl: false,
    br: false,
    resize_observe: true
}); 
```

选项及其默认值是：

```
{
    size: 5,    // chamfer size
    sw: 1,      // stroke width
    sc: 'black',    // stroke color,
    fc: undefined,  // fill color
    fp: undefined,  // URL of an image to use as fill pattern

    tl: true,   // chamfer top-left corner?
    tr: true,   // chamfer top-right corner?
    bl: true,   // chamfer bottom-left corner?
    br: true,   // chamfer bottom-right corner?

    resize_observe: false
    // turn on resize_observe observer?
    // this will observer whenever the element
    // resizes and will refresh the background
} 
```

`resize_observe`如果使用**方法 1** ，则需要设置为 true，并且元素可能会在运行时更改其大小，因为这样每次调整大小时都需要重新创建倒角背景。

# jquery - jQuery ajax 登录重定向

> ID：14770318
> 
> 赞同：0
> 
> 时间：2013-02-08T10:19:27.193
> 
> 标签：jquery, spring-mvc, login, response

我有一个简单的弹出登录，它将状态返回到 div（如果传递不正确）或重定向到主页。

这是处理请求的代码：

```
$.ajax({
     type: "POST",
     url: "login.html",
     cache: false,
     data: formData
     success: function(data){
        var $response=$(data);
        $('#response').text($response.find('#response').text());
        if($('#response').text().length<=0)
        {
            window.location="main.html";
        }
     }
 }); 
```

我正在使用 spring MVC 来处理请求。Login.html 返回字符串（传递不正确）。但是当我从 Spring 获得重定向时，什么也没有发生。所以我临时添加了重定向的客户端代码。

这种方法正确吗？因为我在两种方式上都取得了成功（密码错误或正确）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:25:14.213

查看当您从 Spring 重定向时，您的页面将如何被重定向..因为您正在执行 ajax 提交..当您从 Spring 重定向并返回主页时，您可以在 ajax 调用的变量数据中看到主页 html。规则很简单..当你做ajax..浏览器正常提交不会干扰..在理想情况下，当有正常提交服务器将发送HTTP代码为302并且你的页面将被重定向到新位置（意味着新页面打开）。

你可以试试这个方法：

```
$.ajax({
     type: "POST",
     url: "login.html",
     cache: false,
     data: formData
     success: function(data){
       document.open();
       document.write(data);//home page from server after authentication..dont forget to add redirect logic at spring
       document.close();
     }
 }); 
```

我希望您没有使用 Spring-security 进行身份验证..因此您可能需要编写很多自己的过滤器方法。另外，不要尝试使用来自身份验证的正常提交方法，而不是 ajax。因为在 ajax 中，您可能需要使用您自己的会话 id 设置浏览器 cookie，这在正常身份验证过程中会很容易处理..谢谢

# opengl - 关于 OpenGL 矩阵乘法

> ID：14770321
> 
> 赞同：0
> 
> 时间：2013-02-08T10:19:35.763
> 
> 标签：opengl, matrix, glsl, projection, vertex

[http://www.cs.uaf.edu/2007/spring/cs481/lecture/01_23_matrices.html](http://www.cs.uaf.edu/2007/spring/cs481/lecture/01_23_matrices.html)

我刚刚读完这篇文章，但我有两个关于乘法的问题。

gl_Position = gl_ProjectionMatrix*gl_ModelViewMatrix*gl_Vertex

这是我将它们全部相乘时的最终屏幕坐标（x，y）。如果我只乘 gl_ModelViewMatrix*gl_Vertex 或 gl_ProjectionMatrix*gl_Vertex 怎么办？gl_Vertex 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:40:05.683

gl_Vertex 是世界空间中的顶点坐标。顶点和眼睛可以在世界空间中任意放置和定向。

与 ModelViewMatrix 相乘后，您会在“眼睛空间”中得到一个顶点坐标，这是一个眼睛位于 0,0,0 的坐标系。乘以投影矩阵（并进行同质坐标系划分）为您提供屏幕空间中的坐标。这些还不是像素坐标，而是一些标准化的坐标系，0,0,0 在屏幕/窗口的中心。视口变换是最后一个。它将图像映射到窗口（像素？）坐标。

解释如下：

[http://www.srk.fer.hr/~unreal/theredbook/](http://www.srk.fer.hr/~unreal/theredbook/) 第 3 章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:24:51.753

> 如果我只乘 gl_ModelViewMatrix*gl_Vertex 或 gl_ProjectionMatrix*gl_Vertex 怎么办？

那么投影矩阵（第一种情况）或模型视图矩阵（第二种情况）将不会生效。如果它们是恒等矩阵，您将看不到效果。如果不是，那么您的视角或位置可能是错误的。

> gl_Vertex 是什么意思？

`gl_Vertex`是传递给管道输入的顶点坐标。

# java - 如何在 XSL 函数'document()' (xalan-j) 中禁用 DTD 验证

> ID：14770322
> 
> 赞同：2
> 
> 时间：2013-02-08T10:19:35.960
> 
> 标签：java, xslt, dtd, xalan

XSL：

```
<?xml version='1.0' encoding='utf-8' ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:htm="http://www.w3.org/1999/xhtml" version="1.0">
<xsl:template match="/">
        <xsl:variable name="source" select="document('test.html')"/>
</xsl:template>
</xsl:stylesheet> 
```

测试.html：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
</head>
<body>
Bla-Bla-bla
</body>
</html> 
```

当 test.html 包含 DOCTYPE 声明时，XSL 转换大约需要 2 分钟。当我删除 test.html 中的 DOCTYPE 声明时，XSL 转换大约需要 100 毫秒。xalan-j 中是否有办法通过 XSL document() 函数禁用 DTD 验证以进行 XML 的内部加载。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:38:35.347

您不需要禁用验证。您需要安装本地缓存代理或目录以及您最常使用的 DTD 的本地副本。

这个过程需要很长时间，因为[W3C 非常缓慢地提供 DTD 文件](http://www.w3.org/Help/Webmaster.html#slowdtd)，以此来阻止过多的 DTD 流量。

使用本地目录，或使用本地缓存代理。

# php - OCI-Lob::size() 使用什么单位？

> ID：14770330
> 
> 赞同：1
> 
> 时间：2013-02-08T10:19:53.340
> 
> 标签：php, oracle

浏览 Oracle OCI8 函数的 PHP 文档，我在[这里](http://www.php.net/manual/en/oci-lob.size.php)找到了 OCI-Lob::size 。它的描述说：“获取大对象的大小”。返回值的描述是“返回大对象值的长度或失败时返回 FALSE。空对象的长度为零”。

这对我来说可能非常有用，但不清楚使用了哪些单位。人物？字节？千字节？更大的块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:34:46.043

这在 OCI 本身中有点棘手。对于 BLOB，很明显 - 字节。请注意 Oracle LOB 从第一个字节开始。（不是从零开始）。对于 CLOB，它返回字符。

但无论 lob 类型如何，OciLobRead/OciLobWrite 返回写入的字节数。引入了新函数 - OciLobRead2/OciLobWrite2 它们返回两个位置（以字节为单位，以字符为单位）。

# sql-server - 在 T-SQL 代码中添加月份名称排序

> ID：14770332
> 
> 赞同：0
> 
> 时间：2013-02-08T10:20:00.833
> 
> 标签：sql-server, tsql

你能帮我硬编码到 CalendarMonth 排序下面的 T-SQL SELECT 语句中，这样当有人查询它出来的数据时，它是一月、二月而不是四月、八月。我已经为 FinancialMonth 行做了这个，但在 CalendarMonth 上遇到了困难。

```
BEGIN 

INSERT INTO Time3(Date,CalendarYear,CalendarMonth,FinancialYear,FinancialMonth)

SELECT 
@StartDate Date,YEAR(@StartDate) AS CalendarYear,
DATENAME(MONTH,@StartDate) AS CalendarMonth, 
YEAR(Dateadd(MONTH,-3,@StartDate)) AS FinancialYear,
'Period ' + RIGHT('0' + CAST(MONTH(Dateadd(MONTH, -3,@StartDate)) AS VARCHAR(2)),2) AS FinancialMonth
SET @StartDate = DATEADD(dd,1,@StartDate)

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:53:53.647

尝试这个：

```
ORDER BY MONTH(@StartDate) 
```

MONTH 是返回一个整数的函数，该整数表示指定日期的月份。 [http://msdn.microsoft.com/ru-ru/library/ms187813.aspx](http://msdn.microsoft.com/ru-ru/library/ms187813.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:32:46.100

只需在查询中添加一个额外的列，如下所示，只需将 @Month 替换为您的变量：

```
CASE @Month
  WHEN 'January' THEN 1
  WHEN 'February' THEN 2
  WHEN 'March' THEN 3
  WHEN 'April' THEN 4
  WHEN 'May' THEN 5
  WHEN 'June' THEN 6
  WHEN 'July' THEN 7
  WHEN 'August' THEN 8
  WHEN 'September' THEN 9
  WHEN 'October' THEN 10
  WHEN 'November' THEN 11
  WHEN 'December' THEN 12
END as MonthOrder 
```

然后在您的 ORDER BY 子句中，按此列排序

# android - 视频无法在 android webview 中播放

> ID：14770333
> 
> 赞同：3
> 
> 时间：2013-02-08T10:20:01.583
> 
> 标签：android, android-webview

我正在将资产文件夹中的 html 页面加载到 android webview，html 页面有视频。但是视频没有播放，我在这里分享代码。

```
 <!doctype html>
   <head>
   <title></title>
   <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
   <script type="text/javascript" charset="utf-8" src="video.js"></script> 
   <script>
    function en(){
video1.play();
   }
   </script>
   </head>
   <body>
   <div id="t2" width ="1024" height="768" style="background-     image:url(images/L6_P007.jpg); background-repeat:no-repeat;">
    <video id="video1" width="1024" height="768" poster="images/L6_P007.jpg" controls  autoplay onended="en();" >
    <source src="videos/L6_P007.mp4" type="video/mp4">
    <source src="videos/L6_P007.ogv" type="video/ogg">
    <source src="videos/L6_P007.webm" type="video/webm">

    </video>
    </div>
    </body>
    </html> 
```

这是我的java代码

```
 WebView webview = (WebView) findViewById(R.id.webView1);
webview.getSettings().setJavaScriptEnabled(true);
webview.setWebViewClient(new WebViewClient());
webview.getSettings().setPluginState(WebSettings.PluginState.ON_DEMAND);
    webview.loadUrl("file:///android_asset/videosamp/videosamp.html"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:29:23.437

这个问题在 SO 上讨论过很多次。在此处查看类似问题的答案，[在此处](https://stackoverflow.com/q/9716526/1271432) 获取[适用于 Android 的 VideoPlayer 插件。](https://github.com/phonegap/phonegap-plugins/tree/master/Android/VideoPlayer)

视频播放器允许您显示来自 PhoneGap 应用程序的视频。

此命令触发 Intent 让您的设备视频播放器显示视频。

将插件添加到您的项目 使用此插件需要 Android PhoneGap。

要安装插件，请将 www/video 移动到项目的 www 文件夹，并在 html 文件中 phonegap.js 之后包含对它的引用。

在您的项目中创建一个名为“src/com/phonegap/plugins/video”的目录并将 VideoPlayer.java 移动到其中。

在您的`res/xml/plugins.xml`文件中添加以下行：

```
<plugin name="VideoPlayer" value="com.phonegap.plugins.video.VideoPlayer"/> 
```

使用插件插件创建对象window.plugins.videoPlayer。要使用，请调用 play() 方法：

/** * 显示播放视频的意图。* * @param url 要播放的 url */ play(url) 示例使用：

```
window.plugins.videoPlayer.play("http://path.to.my/video.mp4");
window.plugins.videoPlayer.play("file:///path/to/my/video.mp4");
window.plugins.videoPlayer.play("file:///android_asset/www/path/to/my/video.mp4");
window.plugins.videoPlayer.play("https://www.youtube.com/watch?v=en_sVVjWFKk"); 
```

**注意：**播放资产文件夹中的视频时，首先使用 MODE_WORLD_READABLE 将视频复制到内部存储。

# php - 通过 php mailer 发送文件会损坏

> ID：14770340
> 
> 赞同：-2
> 
> 时间：2013-02-08T10:20:20.400
> 
> 标签：php, phpmailer, email-attachments

我使用[这个 php 邮件程序](http://sourceforge.net/projects/phpmailer/files/phpmailer%20for%20php4/0.90/) 一切正常，但是当我附加文件时，目标电子邮件中收到损坏的文件。例如，当我发送 pdf 文件时，接收方无法打开它。

这是我使用 phpmailer 的代码：

```
$target_path = "upload_files/";

$target_path = $target_path . basename( $_FILES['attach']['name']); 

if(move_uploaded_file($_FILES['attach']['tmp_name'], $target_path)) {

} else{

}

//eupload file end

require_once 'phpmailer/phpmailer.inc.php';
$mail             = new PHPMailer(); 
$body = $message;
$body = eregi_replace("[\]",'',$body);

$mail->AddReplyTo($email, $fname." ".$lname);

$mail->FromName = $fname." ".$lname;
$mail->From = $email;    

$mail->AddAddress("email address", "some one");

$mail->Subject    = "something";

$mail->body = $body;

$mail->AddAttachment($target_path); // attachment

if(!$mail->Send()) {

} else {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:32:48.273

必须是您的 Header 包含文件错误
，因为这是附件中的基本错误

```
$headers .= "\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed; boundary=\"_1_$boundary\""; 
```

:P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:08:12.967

你的 PHPMailer 有严重错误[试试](https://nodeload.github.com/Synchro/PHPMailer/zip/master)

# javascript - JQuery 内部不起作用

> ID：14770342
> 
> 赞同：-3
> 
> 时间：2013-02-08T10:20:26.283
> 
> 标签：javascript, jquery, ajax, dom, internal

这是我的 JavaScript 代码

```
$(this).find('a:internal:not(.no-ajaxy)').on('click',function(evt) {
        evt.preventDefault();
        History.pushState(null, $(this).text(), $(this).attr('href'));
    }); 
```

这是我试图不应用ajax的链接

```
 <a href="#loginModal" class="btn btn-success no-ajaxy" data-toggle="modal">Login &rsaquo;&rsaquo;</a> 
```

这里的问题是我的脚本给了我这个错误

```
Uncaught Error: Syntax error, unrecognized expression: unsupported pseudo: internal 
```

我目前正在使用 jQuery v1.8.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:51:33.050

从您的评论中，听起来您只需要使用以下内容：

```
$(this).find('a:not(.no-ajaxy)').on('click', function() {
     // your code...
}); 
```

`:internal`不是 jQuery 中默认可用的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:22:58.900

我认为您必须创建自定义选择器（[http://dpatrickcaldwell.blogspot.ch/2010/03/custom-jquery-selector-for-external-and.html](http://dpatrickcaldwell.blogspot.ch/2010/03/custom-jquery-selector-for-external-and.html)的副本）：

```
jQuery.extend(  
  jQuery.expr[ ":" ],  
  {  
    /* 
      /:\/\// is simply looking for a protocol definition. 
      technically it would be better to check the domain 
      name of the link, but i always use relative links 
      for internal links. 
    */  

    external: function(obj, index, meta, stack)  
    {  
      return /:\/\//.test($(obj).attr("href"));  
    },  

    internal: function(obj, index, meta, stack)  
    {  
      return !/:\/\//.test($(obj).attr("href"));  
    }  
  }  
); 
```

# java - 将 String 转换为适当的 DataType

> ID：14770345
> 
> 赞同：5
> 
> 时间：2013-02-08T10:20:35.433
> 
> 标签：java, string, date

我有一个`String`可能有很多不同的`formats`. 我需要能够识别值的实际类型，`runtime`然后将值转换为该类型。

例如。如果我有 a`String` `Fri Feb 08 07:30:00 GMT 2013`这实际上是 a`Date`并且 a`String`应该被转换成 a`date object`并返回。

我目前对这个问题的解决方案是“尝试”将其转换为数据类型，如果转换成功则一切正常，如果转换失败则继续进行下一次转换尝试。这可行，但丑陋且不可维护，我确信那里已经存在更好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:49:41.643

您可以为每种数据类型使用单独的正则表达式，如下所示：

```
private final static Pattern DATE_PATTERN = 
    Pattern.compile (
        "(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat) " + 
        "(?:Jan|Feb|Mar|Apr|May|June?|July?|Aug|Sept?|Oct|Nov|Dec) " + 
        "\\d\\d \\d\\d:\\d\\d:\\d\\d \\S+ \\d\\d\\d\\d");

private final static Pattern DOUBLE_PATTERN = 
    Pattern.compile (
        "[\\+\\-]?\\d+\\.\\d+(?:[eE][\\+\\-]?\\d+)?");

private final static Pattern INTEGER_PATTERN = 
    Pattern.compile (
        "[\\+\\-]?\\d+");

public static Object stringToObject (String string)
{
    if (DATE_PATTERN.matcher (string).matches ())
        return stringToDate (string);
    else if (DOUBLE_PATTERN.matcher (string).matches ())
        return Double.valueOf (string);
    else if (INTEGER_PATTERN.matcher (string).matches ())
        return Integer.valueOf (string);
    else return string;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:39:32.387

```
public static void main(String[] args) {

    String s = "Fri Feb 08 07:30:00 GMT 2013";
    SimpleDateFormat FT = new SimpleDateFormat("EEE MMM dd hh:mm:ss z yyyy");
    Date d;
    try {
        d = FT.parse(s);
        System.out.println(d);
    } catch (ParseException ex) {
        Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:31:51.873

尝试正则表达式：您可以为您拥有的每种数据类型编写一个模式，然后将该模式与每个实际字符串匹配，您可以为每个匹配项关联一个转换。这是一个简单的示例（在伪 Java 中）：

```
String name = "Mike"; // This is an English name
String nameRegEx ="[A-Z][a-z]+"; //this patterns matches an english name
Matcher nameMatcher = new Matcher(regEx);
if (match.matches(name)){// I use the matches() method to verify the format of the string
    Name nameObject = Converter.getNameObjectFromString(name);//I make the conversion
} 
```

查看 java 文档以获取有关匹配器和正则表达式的更多详细信息：http: [//docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:53:43.013

如果传递给您的字符串超出您的控制范围，您的方法很好。还有一个建议：您应该应用所有可能的转换并检查不明确的字符串。如果多次转换成功，则字符串不明确，您应该进行一些错误处理，可能会引发异常。

# asp.net-mvc - 当数据已经存在时，控制器中视图模型的用途

> ID：14770346
> 
> 赞同：0
> 
> 时间：2013-02-08T10:20:35.723
> 
> 标签：asp.net-mvc, episerver

当所有相关数据都已经通过控制器签名中的参数可用时，使用视图模型有什么意义？我见过很多类似的例子：

```
public ActionResult Index(BasicPage currentPage)
    {
        var model = new BasicViewModel { Heading = currentPage.Heading, Body = currentPage.MainBody, MyBlock = currentPage.MyBlock };
        return View(model);
    } 
```

为什么不直接将本示例中的“当前页面”发送到视图？这样做有没有被认为是不好的做法？

以上是 asp.net-mvc 的一般问题。我也会在这里添加一个关于 Episerver 的问题，如果我幸运的话，也有人可以回答这个问题。

在查看使用 MVC 完成的 Alloy 站点时，我还看到了与上面类似的行为，在所有控制器中都创建了视图模型，为什么不直接将发送到控制器的页面发送到视图？创建视图模型似乎是不必要的步骤？很可能我在这里遗漏了一些重要的点=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:35:11.160

我同意您的代码示例不是一个好主意。但是拥有一个视图模型是一个很好的模式。您可能不需要立即使用它，但拥有可用的视图模型并准备就绪是即将添加的一个不错的选择。我会从他的 MVC 模板中使用 Joel 的概念：[http ://world.episerver.com/Download/Items/EPiServer-CMS/EPiServer-7---CMS/EPiServer-7-MVC-Templates/](http://world.episerver.com/Download/Items/EPiServer-CMS/EPiServer-7---CMS/EPiServer-7-MVC-Templates/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:07:52.887

视图模型背后的想法是它们针对演示进行了优化。如果您使用域对象，您最终不得不将逻辑放入视图本身以控制事物的显示方式。将逻辑放入视图是糟糕的设计，因此视图模型为您提供了一些灵活性，以便您在更合适的位置管理此逻辑。

此外，您可以使您的视图模型更简单，只包括特定视图所需的字段。

# jquery - Woothemes Flexslider - 一个独特的 flexslider 位于另一个 flexslider 中 - 是否可行？

> ID：14770351
> 
> 赞同：2
> 
> 时间：2013-02-08T10:20:55.807
> 
> 标签：jquery, flexslider, woothemes

我正在使用 Woothemes 的最新 flexslider，我正在尝试在另一个内部初始化一个 flexslider。像这样：

```
function initFrontpageSliders() {

    $('#flexsliderFrontpage01').flexslider({
        animation: "slide",
        animationLoop: false,
        pauseOnHover: true,

        start: function(slider) {

            //Fires when the slider loads the first slide
            $('#flexsliderFrontpage02').flexslider({
                animation: "fade",
                directionNav: false,
                animationLoop: false,
                pauseOnHover: true  
            });

        }   
    });
} 
```

但是当我调用脚本时，会在 flexsliderFrontpage01 下方生成 flexsliderFrontpage02 ul 而不是在幻灯片（列表元素）内 - 像这样：

```
<div id="flexsliderFrontpage01" class="flexslider">
    <div class="flex-viewport">

      <ul class="slides">
        <li>
          <div class="row">
             <div id="flexsliderFrontpage02" class="flexslider"> SLIDES SHOULD BE HERE </div>
          </div>
        </li>
        <li>
          <div class="row">slide 2</div>
        </li>  
      </ul>  

      <ul class="slides">
        <li><div class="row">fade 1</div></li>
        <li><div class="row">fade 2</div></li>
        <li><div class="row">fade 3</div></li>  
      </ul> 
   </div>

   <ol class="flex-control-nav flex-control-paging">
     <li>1</li>
     <li>2</li>
     <li>3</li>
     <li>4</li>
     <li>5</li>
   </ol>

   <ul class="flex-direction-nav"> </ul>
</div> 
```

你们有谁知道 flexslider.js 是否有一个简单的修复方法，或者我做错了什么？:-)

我的 HTML 看起来像这样：

```
<div class="flexslider" id="flexsliderFrontpage01">
<ul class="slides">
    <li>
        <div class="row">
            <div class="flexslider" id="flexsliderFrontpage02">
                <ul class="slides">
                    <li><div class="row">fade div 1</div></li>          
                    <li><div class="row">fade div 2</div></li>
                    <li><div class="row">fade div 3</div></li>      
                </ul>
            </div>
        </div>
    </li>

    <li>
        <div class="row">   
            <h1>This is slide 2</h1>
        </div>
    </li>

</ul>           
</div> 
```

我在[这里](https://github.com/woothemes/FlexSlider/issues/36)使用这个例子解决了这个问题：

```
Flexslider.js update
slider.container = $(slider.containerSelector, slider).first(); //added .first()
selector: ".slides:first > li", //added :first 
```

也许这可以帮助别人:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-15T03:28:52.153

我只是将默认选择器从更改`".slides > li"`为`".slides:first > li"`：

```
$(selector).flexslider({
  selector: '.slides:first > li',
  ...
}); 
```

它就像一个魅力，我们甚至不需要更改核心 js 文件。感谢您[的问题](https://github.com/woothemes/FlexSlider/issues/36)讨论。

# android - Android - 如何使用默认 Theme.Light 显示操作栏

> ID：14770353
> 
> 赞同：2
> 
> 时间：2013-02-08T10:21:11.060
> 
> 标签：android, styles, themes

我想在我的一项活动中使用默认的 Android Theme.Light。但是，当在我的应用程序清单文件中为所选活动应用此特定主题时：

```
android:theme="@android:style/Theme.Light"> 
```

它隐藏了活动操作栏。

使用这种特殊的 Light 方案，需要在 java 或 xml 代码中做什么来保留操作栏？

作为替代方案，我使用了以下默认方案：

```
android:theme="@android:style/Theme.DeviceDefault.Light"> 
```

该方案确实正确显示了活动操作栏，但是它的某些对象未显示为首选。特别是，我的偏好是按照 Theme.Light 显示按钮和微调器，但保留 Theme.DeviceDefault.Light 提供的其他样式格式

我将不胜感激有关如何实现上述方案格式首选项的一些提示。（我正在使用 SDK = 16）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:35:15.703

为什么不使用“android:style/Theme.Holo.Light”？是一样的，但有动作栏，它是在较新的 api 中添加的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:37:24.260

我认为你应该使用 Holo.Ligt 主题。旧的 android Theme.Light 甚至不知道操作栏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T09:14:21.140

我有同样的问题，我喜欢 Theme.light 的控件，我是这样解决的：

1）在项目的样式中定义“Theme.Light.ActionBar”：

```
 <style name="Theme.Light.ActionBar" parent="@android:style/Theme.Light">
    <item name="android:windowNoTitle">false</item>
    <item name="android:windowActionBar">true</item>
</style> 
```

2）在清单中使用它：

```
<activity
            android:name="com.your.Activity"
           android:theme="@style/Theme.Light.ActionBar" > 
```

我希望这可能会有所帮助

# r - 序列比对

> ID：14770356
> 
> 赞同：0
> 
> 时间：2013-02-08T10:21:20.903
> 
> 标签：r, biopython, bioperl

我想对 uniprot 和 pdb 序列进行成对对齐。我有一个包含这样的 uniprot 和 pdb ID 的输入文件。

```
pdb id  uniprot id

1dbh    Q07889
1e43    P00692
1f1s    Q53591 
```

首先，我需要读取输入文件中的每一行 2) 从 pdb.fasta 和 uniprot.fasta 文件中检索 pdb 和 uniprot 序列 3) 进行对齐并计算序列同一性。

通常，我使用以下程序进行成对对齐和 seq.identity 计算。

```
library("seqinr")
seq1 <- "MDEKRRAQHNEVERRRRDKINNWIVQLSKIIPDSSMESTKSGQSKGGILSKASDYIQELRQSNHR"
seq2<- "MKGQQKTAETEEGTVQIQEGAVATGEDPTSVAIASIQSAATFPDPNVKYVFRTENGGQVM"
library(Biostrings)
globalAlign<- pairwiseAlignment(seq1, seq2)
pid(globalAlign, type = "PID3") 
```

我需要像这样打印输出

```
pdbid   uniprotid  seq.identity
1dbh    Q07889      99
1e43    P00692      80
1f1s    Q53591      56 
```

如何更改上述代码？您的帮助将不胜感激！

'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:14:15.217

希望此代码是您要查找的代码：

```
class test():

    def get_seq(self, pdb,fasta_file): # Get sequences
        from Bio.PDB.PDBParser import PDBParser
        from Bio import SeqIO
        aa = {'ARG':'R','HIS':'H','LYS':'K','ASP':'D','GLU':'E','SER':'S','THR':'T','ASN':'N','GLN':'Q','CYS':'C','SEC':'U','GLY':'G','PRO':'P','ALA':'A','ILE':'I','LEU':'L','MET':'M','PHE':'F','TRP':'W','TYR':'Y','VAL':'V'}
        p=PDBParser(PERMISSIVE=1)
        structure_id="%s" % pdb[:-4]
        structure=p.get_structure(structure_id, pdb)
        residues = structure.get_residues()
        seq_pdb = ''
        for res in residues:
            res = res.get_resname() 
            if res in aa:
                seq_pdb = seq_pdb+aa[res]           

        handle = open(fasta_file, "rU")
        for record in SeqIO.parse(handle, "fasta") :
            seq_fasta = record.seq
        handle.close()
        self.seq_aln(seq_pdb,seq_fasta)

    def seq_aln(self,seq1,seq2): # Align the sequences
        from Bio import pairwise2
        from Bio.SubsMat import MatrixInfo as matlist

        matrix = matlist.blosum62
        gap_open = -10
        gap_extend = -0.5

        alns = pairwise2.align.globalds(seq1, seq2, matrix, gap_open, gap_extend)
        top_aln = alns[0]
        aln_seq1, aln_seq2, score, begin, end = top_aln
        with open('aln.fasta', 'w') as outfile:
            outfile.write('> PDB_seq\n'+str(aln_seq1)+'\n> Uniprot_seq\n'+str(aln_seq2))
        print aln_seq1+'\n'+aln_seq2
        self.seq_id('aln.fasta')

    def seq_id(self,aln_fasta): # Get sequence ID
        import string
        from Bio import AlignIO

        input_handle = open("aln.fasta", "rU")
        alignment = AlignIO.read(input_handle, "fasta")
        j=0 # counts positions in first sequence
        i=0 # counts identity hits
        for record in alignment:
            #print record
            for amino_acid in record.seq:
                if amino_acid == '-':
                    pass
                else:
                    if amino_acid == alignment[0].seq[j]:
                        i += 1
                j += 1
            j = 0
            seq = str(record.seq)
            gap_strip = seq.replace('-', '')

            percent = 100*i/len(gap_strip)
            print record.id+' '+str(percent)
            i=0

a = test()
a.get_seq('1DBH.pdb','Q07889.fasta') 
```

这输出：

```
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------EQTYYDLVKAF-AEIRQYIRELNLIIKVFREPFVSNSKLFSANDVENIFSRIVDIHELSVKLLGHIEDTVE-TDEGSPHPLVGSCFEDLAEELAFDPYESYARDILRPGFHDRFLSQLSKPGAALYLQSIGEGFKEAVQYVLPRLLLAPVYHCLHYFELLKQLEEKSEDQEDKECLKQAITALLNVQSG-EKICSKSLAKRRLSESA-------------AIKK-NEIQKNIDGWEGKDIGQCCNEFI-EGTLTRVGAKHERHIFLFDGL-ICCKSNHGQPRLPGASNAEYRLKEKFF-RKVQINDKDDTNEYKHAFEIILKDENSVIFSAKSAEEKNNW-AALISLQYRSTL---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
MQAQQLPYEFFSEENAPKWRGLLVPALKKVQGQVHPTLESNDDALQYVEELILQLLNMLCQAQPRSASDVEERVQKSFPHPIDKWAIADAQSAIEKRKRRNPLSLPVEKIHPLLKEVLGYKIDHQVSVYIVAVLEYISADILKLVGNYVRNIRHYEITKQDIKVAMCADKVLMDMFHQDVEDINILSLTDEEPSTSGEQTYYDLVKAFMAEIRQYIRELNLIIKVFREPFVSNSKLFSANDVENIFSRIVDIHELSVKLLGHIEDTVEMTDEGSPHPLVGSCFEDLAEELAFDPYESYARDILRPGFHDRFLSQLSKPGAALYLQSIGEGFKEAVQYVLPRLLLAPVYHCLHYFELLKQLEEKSEDQEDKECLKQAITALLNVQSGMEKICSKSLAKRRLSESACRFYSQQMKGKQLAIKKMNEIQKNIDGWEGKDIGQCCNEFIMEGTLTRVGAKHERHIFLFDGLMICCKSNHGQPRLPGASNAEYRLKEKFFMRKVQINDKDDTNEYKHAFEIILKDENSVIFSAKSAEEKNNWMAALISLQYRSTLERMLDVTMLQEEKEEQMRLPSADVYRFAEPDSEENIIFEENMQPKAGIPIIKAGTVIKLIERLTYHMYADPNFVRTFLTTYRSFCKPQELLSLIIERFEIPEPEPTEADRIAIENGDQPLSAELKRFRKEYIQPVQLRVLNVCRHWVEHHFYDFERDAYLLQRMEEFIGTVRGKAMKKWVESITKIIQRKKIARDNGPGHNITFQSSPPTVEWHISRPGHIETFDLLTLHPIEIARQLTLLESDLYRAVQPSELVGSVWTKEDKEINSPNLLKMIRHTTNLTLWFEKCIVETENLEERVAVVSRIIEILQVFQELNNFNGVLEVVSAMNSSPVYRLDHTFEQIPSRQKKILEEAHELSEDHYKKYLAKLRSINPPCVPFFGIYLTNILKTEEGNPEVLKRHGKELINFSKRRKVAEITGEIQQYQNQPYCLRVESDIKRFFENLNPMGNSMEKEFTDYLFNKSLEIEPRNPKPLPRFPKKYSYPLKSPGVRPSNPRPGTMRHPTPLQQEPRKISYSRIPESETESTASAPNSPRTPLTPPPASGASSTTDVCSVFDSDHSSPFHSSNDTVFIQVTLPHGPRSASVSSISLTKGTDEVPVPPPVPPRRRPESAPAESSPSKIMSKHLDSPPAIPPRQPTSKAYSPRYSISDRTSISDPPESPPLLPPREPVRTPDVFSSSPLHLQPPPLGKKSDHGNAFFPNSPSPFTPPPPQTPSPHGTRRHLPSPPLTQEVDLHSIAGPPVPPRQSTSQHIPKLPPKTYKREHTHPSMHRDGPPLLENAHSS
PDB_seq 100 # pdb to itself would obviously have 100% identity
Uniprot_seq 24 # pdb sequence has 24% identity to the uniprot sequence 
```

为此，您需要将我的输入文件放入`a.get_seq()`一个带有文本文件输入的 for 循环中。

**编辑：**

用这个替换 seq_id 函数：

```
def seq_id(self,aln_fasta):
    import string
    from Bio import AlignIO
    from Bio import SeqIO

    record_iterator = SeqIO.parse(aln_fasta, "fasta")
    first_record = record_iterator.next()
    print '%s has a length of %d' % (first_record.id, len(str(first_record.seq).replace('-','')))
    second_record = record_iterator.next()
    print '%s has a length of %d' % (second_record.id, len(str(second_record.seq).replace('-','')))

    lengths = [len(str(first_record.seq).replace('-','')), len(str(second_record.seq).replace('-',''))]
    if lengths.index(min(lengths)) == 0: # If both sequences have the same length the PDB sequence will be taken as the shortest
        print 'PDB sequence has the shortest length'
    else:
        print 'Uniport sequence has the shortes length'

    idenities = 0   
    for i,v in enumerate(first_record.seq):
        if v == '-':
            pass
            #print i,v, second_record.seq[i]
        if v == second_record.seq[i]:
            idenities +=1
            #print i,v, second_record.seq[i], idenities

    print 'Sequence Idenity = %.2f percent' % (100.0*(idenities/min(lengths))) 
```

将参数传递给类使用：

```
with open('input_file.txt', 'r') as infile:
    next(infile)
    next(infile) # Going by your input file
    for line in infile:
        line = line.split()
        a.get_seq(segs[0]+'.pdb',segs[1]+'.fasta') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:58:29.197

可能是这样的；一个可重复的示例（例如，在线发布短文件）将有助于...

```
library(Biostrings)
pdb = readAAStringSet("pdb.fasta")
uniprot = readAAStringSet("uniprot.fasta") 
```

将所有序列输入到两个对象中。`pairwiseAlignment`接受向量作为第一个（查询）参数，因此如果您想将所有 pdb 与所有 uniprot 对齐，请预先分配一个结果矩阵

```
pids = matrix(numeric(), length(uniprot), length(pdb),
              dimnames=list(names(uniprot), names(pdb))) 
```

然后进行计算

```
for (i in seq_along(uniprot)) {
    globalAlignment = pairwiseAlignment(pdb, uniprot[i])
    pids[i,] = pid(globalAlignment)
} 
```

# javascript - 推迟回调直到 setTimeout 完成

> ID：14770358
> 
> 赞同：0
> 
> 时间：2013-02-08T10:21:29.540
> 
> 标签：javascript, jquery, callback

我到处寻找解决方案，但到目前为止还没有找到任何东西*（我可能使用了错误的关键字！如果这是重复的，请指出，我将删除）*。

你们中的一位才华横溢的天才能否向我解释为什么以下内容不能像人们希望的那样工作？我的意思是在回调完成`complete`之前调用回调，我不太明白为什么。`setTimeout``success`

```
$.ajax({
    url: options.url,
    data: options.data,
    success: function(){
        setTimeout(function(){
            console.log('firing');
        },2000);
    },
    dataType: options.dataType,
    complete: function(){
        console.log('ended');   
    }
}); 
```

是因为回调`setTimeout`内部启动了一个新线程吗？`success`

这是否可以在不将回调函数传递给回调的情况下实现`success`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:23:11.007

发生这种情况是因为`setTimeout()`不会阻止代码的执行。

因此，`complete`回调会在您没有调用`setTimeout()`.

您将不得不将您的`console.log('ended');`呼叫置于超时（也）或在超时内调用您的完整处理程序。:)

# regex - 将 REST 内容转换为逗号分隔的字符串

> ID：14770361
> 
> 赞同：0
> 
> 时间：2013-02-08T10:21:45.493
> 
> 标签：regex, c#-4.0, rest

我在 REST API 中有一些内容，我想将其转换为简单的逗号分隔字符串 - 它看起来像这样：

```
{
  "2299": 2299,
  "2224": 2224,
  "2135": 2135,
  "2196": 2196,
  "2200": 2200
} 
```

这就是我这样做的方式：

```
foreach (var product in titles)
{
    TextBox1.Text = product["children"].ToString() + "<br/>";
} 
```

这是我希望我的输出看起来像： `2299,2224,2135,2196,2200`

我已经尝试了一些不同的正则表达式，但没有进一步的运气 - 顺便说一下，我正在使用 c# ......

任何想法...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:11:18.817

解决了...！

通过在谷歌上研究几个小时，我找到了解决方案：

```
string c = product["children"].ToString();

foreach (Match m in Regex.Matches(c, "(?<=\")[\\w]+(?!=\")"))
{
    string children = m.Value + ",";
} 
```

这个脚本为我完成了这项工作...... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:07:00.937

使用 JSON.NET，你可以简单地做

```
var dict = JToken.Parse(textFromYourQuestion).ToObject<Dictionary<string, int>>().Values;
var stringYouWant = string.Join(",", dict.Values); 
```

# java - 如何创建一个带有参数和结尾的“/”的servlet？

> ID：14770362
> 
> 赞同：0
> 
> 时间：2013-02-08T10:21:46.023
> 
> 标签：java, servlets

我的 servlet 需要接收 2 个参数才能响应。

我最喜欢的解决方案（但在我的上下文中不起作用）：

```
http://domain.com/?param1=something&param2=anything 
```

因为：我有另一个应用程序要求 url 以“/”结尾。但我无法创建一个 servlet，它最后接受像“ [http://domain.com/?param1=something¶m2=anything/”<<-/](http://domain.com/?param1=something&param2=anything/)这样的 URL 。

我的第二个解决方案是： [http](http://domain.com/param1/param2/) ://domain.com/param1/param2/ 我可以用“/”分割请求的 url，我会有我的 2 个参数。不过没那么好看。。

有没有更好的方法来传递 2 个参数并有一个以“/”结尾的 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:39:19.853

我认为这是不可能的。正如在 HTTP RFC "http:" "//" host [ ":" port ] [ abs_path [ "?" 查询]]在第一个“？”之后 有查询部分。因此，在您的示例中 [http://domain.com/?param1=something¶m2=anything/](http://domain.com/?param1=something&param2=anything/) 这意味着 param2 值是任何/（最后带有斜杠）

当然，您可以将您的 servlet 绑定到 /* url-pattern 并使用 ServletRequest.getParameter() 处理 servlet 中的参数。但不要忘记您的 param2 将以 / 结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:53:46.640

根据[RFC 3986 第 3.3 节](https://www.rfc-editor.org/rfc/rfc3986#section-3.3)，可以为每个路径段分配一组参数，如下所示：

```
http://domain.com/path;param1=value1;param2=value2/subpath/subsubpath/ 
```

因此，您可以在没有查询部分的情况下使用参数。

但缺点是：

*   您想要实现的可能不是该功能的预期用例。
*   除了查询参数，没有 API 支持段参数。所以你必须自己解析参数。

# google-app-engine - 常驻实例似乎不起作用

> ID：14770363
> 
> 赞同：6
> 
> 时间：2013-02-08T10:21:48.137
> 
> 标签：google-app-engine

在我之前的问题[之后](https://stackoverflow.com/questions/14585558/frontend-instances-warmups-although-idle-instance-is-defined)：

这是我启用计费的 appengine 控制台的屏幕截图：

![在此处输入图像描述](../Images/1087a2f3c8db3e7d7ef52707babf8a80.png)

如您所见，我有一个常驻实例，但所有请求都没有路由到它，而是加载了一个动态实例并获取所有流量。要么我没有正确理解 Resident 实例的概念，要么这很荒谬。

谁能帮我理解这里发生了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T10:49:13.193

据我所知，常驻实例是在没有其他实例（fe 动态）可用的时候（忙，没有人启动）。它们是完全利用和可用的新（动态）实例之间的缓冲区。如果每个动态实例都处于其极限（或没有可用实例），则应用引擎需要一些时间来启动新实例。在这段时间内，常驻实例正在接收新请求，这样您的服务就不会为用户忙碌（和/或减少服务响应时间）。低使用率的常驻实例将花费您与高使用率的常驻实例一样多的费用。

# c# - 以编程方式创建 AMO 后出现未指定的错误

> ID：14770365
> 
> 赞同：0
> 
> 时间：2013-02-08T10:21:50.073
> 
> 标签：c#, sql-server-2008, ssas, bids

我已经以编程方式为 Oracle 创建了基本 AM 对象（AMO），并且进展顺利，

要验证创建的组件，我正在使用 BIDS，当我从操作菜单中单击“探索数据”命令时，它会提示错误，

![在 BIDS 中探索数据操作](../Images/4e349ee57e2217eb76c3945a5888fdb3.png)

错误是

![错误](../Images/961c3af9893ac4b34dede990b8480273.png)

## 标题： OraOLEDB

未指定的错误：E_FAIL(0x80004005)

* * *

纽扣：

＆重试

## 取消

我的代码如下

```
private string oraconString = @"Provider=OraOLEDB.Oracle;Data Source=( DESCRIPTION = ( ADDRESS_LIST = ( ADDRESS = ( PROTOCOL = TCP )( HOST = cmbtrndb02 )( PORT = 1521 ) ) )( CONNECT_DATA = ( SERVER = DEDICATED )( SERVICE_NAME = hector ) ) ); User Id= trnint16; Password = trnint16;";

static DataSourceView CreateDataSourceView(Database db, string strDataSourceName)
    { 
        //Create the Datasource View

        DataSourceView dsv = db.DataSourceViews.FindByName(strDataSourceName);

        if (dsv != null)
            dsv.Drop();

        dsv = db.DataSourceViews.Add(strDataSourceName);
        dsv.DataSourceID = strDataSourceName;
        dsv.Schema = new DataSet();
        dsv.Schema.Locale = CultureInfo.CurrentCulture;

        //Open a connection to the DataSource 

        // Testing the oledb connection is working with ODP parameters 

        OleDbConnection connection = new OleDbConnection(dsv.DataSource.ConnectionString);
        connection.Open();

        #region Create tables
        //Add table FACTITSLA

        AddTable(dsv, connection, "FACTITSLA");

        dsv.Update();
        #endregion

        return dsv;

    } 
```

这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:23:35.510

错误

> 80004005

是权限，沿线某处。不确定在您的场景中的位置。

# string - Perl Text::CSV_XS 从字符串中读取

> ID：14770367
> 
> 赞同：2
> 
> 时间：2013-02-08T10:21:50.650
> 
> 标签：string, perl, file, text, csv

如何使用 Text::CSV_XS 模块从 CSV 字符串中读取其输入。然后只有我能找到记录的信息是从文件中读取的。

最快的方法是使用 perl split 函数拆分 CSV 字符串并从那里读取每一行，还是有一些带有 Text::CSV_XS 的内置方法可以直接从 CSV 字符串中读取？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:51:34.530

的`getline`方法`Text::CSV_XS`将从文件句柄中读取，因此您可以将标量字符串作为流打开并传递该文件句柄。

这个程序演示

```
use strict;
use warnings;

use Text::CSV_XS;

my $string = <<'END';
a,b,c,d
e,f,g,h
i,j,k,l
m,n,o,p
END

my $csv = Text::CSV_XS->new;
open my $fh, '<', \$string;

while (my $row = $csv->getline($fh)) {
  print join('-', @$row), "\n";
} 
```

**输出**

```
a-b-c-d
e-f-g-h
i-j-k-l
m-n-o-p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:08:31.020

使用[解析](https://metacpan.org/module/Text%3a%3aCSV_XS#parse)方法；

```
#!/usr/bin/env perl
#
use strict;
use warnings;
use Data::Dumper;

use Text::CSV_XS;

my $csv = Text::CSV_XS->new();
if ( $csv->parse('Column1,Column2,Column2') ) {
    my @columns = $csv->fields;
    print Dumper( \@columns );
}
else {
    # Failed to parse the CSV data
} 
```

# jquery - 偏移此滚动到元素功能

> ID：14770369
> 
> 赞同：0
> 
> 时间：2013-02-08T10:21:51.813
> 
> 标签：jquery

有没有办法可以抵消这个滚动到功能，使其在滚动到的元素上方停止 80 像素？

我有一个固定的标题，高度为 80 像素，当我滚动到一个元素时，标题会掩盖一些内容。

```
 function filterPath(string) {
    return string
      .replace(/^\//,'')
      .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
      .replace(/\/$/,'');
    }
    var locationPath = filterPath(location.pathname);
    var scrollElem = scrollableElement('html', 'body');

    $('a[href*=#]').each(function() {
      var thisPath = filterPath(this.pathname) || locationPath;
      if (  locationPath == thisPath
      && (location.hostname == this.hostname || !this.hostname)
      && this.hash.replace(/#/,'') ) {
        var $target = $(this.hash), target = this.hash;
        if (target) {
          var targetOffset = $target.offset().top;
          $(this).click(function(event) {
            event.preventDefault();
            $(scrollElem).animate({scrollTop: targetOffset}, 700, function() {
              location.hash = target;
            });
          });
        }
      }
    });

    // use the first element that is "scrollable"
    function scrollableElement(els) {
      for (var i = 0, argLength = arguments.length; i <argLength; i++) {
        var el = arguments[i],
            $scrollElement = $(el);
        if ($scrollElement.scrollTop()> 0) {
          return el;
        } else {
          $scrollElement.scrollTop(1);
          var isScrollable = $scrollElement.scrollTop()> 0;
          $scrollElement.scrollTop(0);
          if (isScrollable) {
            return el;
          }
        }
      }
      return [];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:24:18.640

你应该改变：

`var targetOffset = $target.offset().top;`

至

`var targetOffset = $target.offset().top - 80;`

或者更好

`var targetOffset = $target.offset().top - $('#your-header-id').outerHeight();`

如果您更改标题的高度，那应该可以解决问题并且更加健壮。

**编辑：**

为了解决您的问题，您应该将每个部分的 id 更改为`section-about`/ `section-services`/ 等。然后您将不得不进行一些字符串替换：

```
var targetId = $target.attr('id').replace('#','#section-');

var targetOffset = $(targetId).offset().top - 80; 
```

`$target`目前将是 url 中的哈希，所以`#about`. 上面的代码将替换`#`为`#section-`。然后，您将能够像往常一样继续前进`offset()`。`$('#section-about')`

# jquery - Jquery css比较背景颜色值

> ID：14770370
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:21:59.707
> 
> 标签：jquery

我有一个`img`. 单击时，它会检查其父对象的背景颜色，如果背景颜色为白色，则将背景颜色切换为灰色，如果为灰色，则将背景颜色切换为白色。这里 k 的值为 rgb(255,255,255) （白色），但是 if 循环将被执行，但 else 部分被执行......意味着如果不工作......在我的代码中，当我执行它时会发生什么......它仅当部分时才执行，当我更改某些内容时，它只执行其他部分......即使条件不满足......就像它应该在白色时变为灰色，在灰色时变为白色......但它没有。 ...我想问一下我使用的条件...是否正确...

```
function havetotha(it) {
    var k = $(it).parent().css('background-color');
    $('#message').html(k);
    if (k == 'white') {
        $(it).parent().css('backgroundcolor','grey');
    }
    else {
        $(it).parent().css('backgroundcolor','white');
    }
} 
```

我想到了 ...

如果在条件下我正在比较 ($(it).parent().css('background-color')=="rgb(255,255,255)").... 其中 rgb(255,255,255) 是字符串但 $(it) .parent().css('background-color') 它不是字符串，所以....我使用了一个技巧，我制作了两个 div，一个带有灰色背景，另一个带有白色....并将背景与我的元素进行了比较....它的工作原理只是需要很长时间才能进入我的脑海..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:40:58.077

请务必指定问题...将背景颜色更改为背景颜色。您可以按如下方式优化代码：

```
function havetotha(it) {
   var k = $(it).parent()
   $('#message').html(k);
   if (k.css('background-colour') == "white") {
      k.css('background-color','grey');
   }
   else if (k.css('background-colour') == "grey")({
      k.css('background-color','white');
   }
} 
```

该行的目的是什么：

> $('#message').html(k);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:25:22.490

k 应该在要返回的函数之前声明或将结果返回给全局变量，如下所示：

```
function havetotha(it) { return $(it).parent().css('background-color');}
k = havetotha(it);
//rest of the code 
```

# python - 如何从 MSI 文件中获取 [二进制数据] 值

> ID：14770371
> 
> 赞同：0
> 
> 时间：2013-02-08T10:22:03.680
> 
> 标签：python, windows-installer, binary-data

我正在使用 python **msilib**库读取 MSI 文件。我的目标是从二进制表中提取 [二进制数据] 并转储到文件中。（使用 ORCA 工具，我们可以通过双击 [Binary Data] 单元格提取二进制数据并写入文件）

我找不到任何 msilib 方法来获取二进制数据。它有使用 Record.GetString(field) 获取字符串数据的方法。但正如预期的那样，这不适用于 [Binary Data] 并给出错误。

这是代码片段

```
import msilib
# msi file path which is to be read
msiFilePath = "C:/msi/test.msi"
dbObj = msilib.OpenDatabase(msiFilePath, msilib.MSIDBOPEN_READONLY)
sqlQuery = "select * from Binary"
view = dbObj.OpenView(sqlQuery)
view.Execute(None)
cur_record = viewObj.Fetch()
# In Binary table; Column no 1 have string data and Column # 2 have [Binary Data]
cur_record.GetString(2) 
```

并在执行时：-

```
Traceback (most recent call last):
File "<pyshell#17>", line 1, in <module>
cur_record.GetString(2)
_msi.MSIError: unknown error 70c 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T11:32:27.133

[msilib](http://docs.python.org/2/library/msilib.html)功能[不全](http://bugs.python.org/issue12026)。具体来说，它不能读取二进制数据。

Pygame 托管了一个更全功能和可扩展的（因为它是用 Python 和 ctypes 编写的），[msidb](http://hg.pygame.org/pygame/src/2edb32f16576/msidb.py?at=msi)。pygame 文档中似乎没有涵盖它，但源代码非常简单。

您需要的 MSI API 是其类使用的`MsiRecordReadStream`pygame.msidb 包装。`get_field_stream``Cursor`

# cakephp - CakePHP：分页不适用于搜索结果

> ID：14770375
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:22:31.717
> 
> 标签：cakephp, cakephp-2.2

我有一个方法，它执行搜索并将结果发送到它的视图。搜索结果仅在分页结果的第一页上可用。随后的分页页面没有数据，并且有关于无效索引/变量的警告/错误：

**控制器**

```
public function show_list ()
{
    $i_state_id = $this->data['Contact']['state_id'];
    $str_city   = $this->data['Contact']['city'];
    $this->Contact->recursive = -1;
    $this->paginate = array (
        'conditions' => array ('Contact.state_id' => $i_state_id, 'Contact.city'=> $str_city),
        'fields' => array('Contact.id', 'Contact.name', 'Contact.mobile1', 'Contact.city'),
        'order' => array ('Contact.id' => 'desc'),
        'limit' => 2,
        'recursive' => -1
        );

    $contacts = $this->paginate('Contact');
        $this->set ('contacts', $contacts);
    $this->set('state_id', $i_state_id);
    $this->set('city', $str_city);
} 
```

**查看 (show_list.ctp)**

```
<div class="contacts index">
  <h2><?php echo __('Select the list of contacts, that you wish to move.'); ?></h2>
   <?php echo $this->Form->create('Contact',array('action'=>'add_contacts_to_user'));?>
    <table cellpadding="0" cellspacing="0">
    <tr>
            <th><?php echo $this->Paginator->sort('id'); ?></th>
            <th><?php echo $this->Form->checkbox('all', array('label'=>"Select All", "onclick" =>"toggleChecked(this.checked)" )); ?></th>
            <th><?php echo $this->Paginator->sort('name'); ?></th>
            <th><?php echo $this->Paginator->sort('Contact Info'); ?></th>
            <th><?php echo $this->Paginator->sort('city'); ?></th>

    </tr>
    <?php
    foreach ($contacts as $contact): ?>
    <tr> 
        <td><?php echo h($contact['Contact']['id']); ?>&nbsp;</td>
        <td><?php echo $this->Form->checkbox('Contact.id.'.$contact['Contact']['id'], array('class' => 'checkbox', 'value'=> $contact['Contact']['id'],'hiddenField' => false)); ?></td>
        <td><?php echo h($contact['Contact']['name']); ?>&nbsp;</td>
                <td><?php echo h($contact['Contact']['mobile1']); ?>&nbsp;</td>
        <td><?php echo h($contact['Contact']['city']); ?>&nbsp;</td>

        </td>
    </tr>
<?php endforeach; ?>
    </table>
    <?php 

        echo $this->Form->end("Move to Address Book");

    ?>

    <p>
    <?php
    echo $this->Paginator->counter(array(
    'format' => __('Page {:page} of {:pages}, showing {:current} records out of {:count} total, starting on record {:start}, ending on {:end}')
    ));
    ?>  </p>

    <div class="paging">
    <?php
        echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
        echo $this->Paginator->numbers(array('separator' => ''));
        echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
    ?>
    </div>
</div> 
```

如何让第二个和后续页面显示搜索页面的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:08:26.247

您应该使用 GET 方法传递您的搜索参数。

例如：

```
localhost/controller/action?state_id=0

    or

localhost/controller/action/state_id:10 
```

然后您的分页将根据搜索参数工作。

# sql - 使用 JDBC 驱动程序使用远程连接更改 SQL 命令终止符的正确语法是什么？

> ID：14770376
> 
> 赞同：1
> 
> 时间：2013-02-08T10:22:42.473
> 
> 标签：sql, jdbc, db2

我使用 JDBC（com.ibm.db2.jcc.DB2Driver v. 1.4.2）连接到 DB2 数据库。

如果我必须创建一个类似的过程：

```
CREATE PROCEDURE "Schema".makeUniqueCode(IN keyName VARCHAR(30),IN fieldName VARCHAR(30), IN tableName VARCHAR(30))
LANGUAGE SQL
BEGIN
DECLARE COD VARCHAR(30);
DECLARE LASTCOD VARCHAR(30);
DECLARE at_end INT DEFAULT 0;
...
END% 
```

我需要将 SQL 命令终止符从`;`更改为新字符...我选择`%`.

如果我将 create procedure 命令放在 file.sql 中并使用 DB2 CLI（db2 提示符），那么更改 SQL 命令终止符非常简单。

我的问题是我必须通过 JDBC 驱动程序使用远程连接来执行创建过程命令。

使用 JDBC 驱动程序使用远程连接更改 SQL 命令终止符的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:42:03.120

命令终止符是连接到数据库的程序的一项功能，而不是数据库本身。数据库完全不知道 SQL 文件的存在，例如，该文件具有由分隔符分隔的多个命令。SQL 编辑器或客户端是处理这些的地方。

现在*你*正在编写一个连接到数据库的程序，所以如果你想运行多个命令，你必须自己管理。JDBC 和其他数据库驱动程序为您提供了执行单个命令的接口。您只需为要运行的每个命令使用该接口。

如果您确实希望能够通过一次来自 JDBC 的调用一次执行一堆命令，请将它们放在存储过程中或使用类似`BEGIN ATOMIC...END`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-12T07:09:15.573

我认为这个问题还没有真正得到回答，因为莱昂纳多试图做的是完全有效的：通过 JDBC 为 CREATE PROCEDURE 提交单个 DDL 语句，但是在过程中包含一个带有多个语句的例程主体。

您可以查看官方 DB2 示例如何提交。它适用于触发器的 DDL，但这也适用于例程的 DDL：

[源代码示例“TbTrig.java”](https://www.ibm.com/support/knowledgecenter/SSEPGG_11.1.0/com.ibm.db2.luw.apdv.sample.doc/doc/java_jdbc/s-TbTrig-java.html)

# php - Zend Framework 2 自动化 php 程序

> ID：14770378
> 
> 赞同：-4
> 
> 时间：2013-02-08T10:22:48.553
> 
> 标签：php, mysql, automation, zend-framework2

在 Zend Framework 2 中执行自动化 php 程序的最佳方式是什么？

我想安排一个任务在数据库（mysql）中运行，但它不与任何 HTTP 调用交互，即只有服务器端执行。

我希望程序是在我的框架模块中定义的，这可能吗？

如果它不能在我的模块中定义，我怎么能在外面做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:10:48.193

我不确定你是否需要在 PHP 中做任何工作，但如果你不需要，你可以使用 MySQL 的[Event Scheduler](http://dev.mysql.com/doc/refman/5.1/en/events.html)。这将允许您在数据库中运行计划的作业。[在此处](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)阅读有关创建此类事件的语法的更多信息。这是一个例子：

```
CREATE EVENT some_event
ON SCHEDULE AT 12:34:00 EVERY DAY
DO
UPDATE my_schema.my_table SET my_column = my_column + 1; 
```

我没有测试它，所以希望它有效。

或者，您可以在服务器上创建一个 cronjob。大多数共享托管服务提供商也允许您这样做。如果您不使用共享主机，您可以让 cronjob 运行如下：

```
mysql -u username -p password -e "UPDATE my_schema.my_table SET my_column = my_column + 1"; 
```

同样，未经测试，但它应该为您指明正确的方向。

另一种选择是与 cronjob 一起使用`cURL`，以便在运行 cronjob 时请求一个 URL。

`curl http://yourdomain.com/yourtask`

然后在 Zend Framework 中，您可以有一个`yourtask`路由，或者只在 URL 中使用模块、控制器和操作。然后，您将从 PHP 和 Zend Framework 发送数据库查询。

您也可以在其他地方拥有一个由 cURL 调用的独立 PHP 脚本。或者更好的是，直接通过 PHP。然后它不必对世界可用。

如您所见，您有很多选择。选择适合您情况的那个。我们没有足够的细节来做出这个选择。

# c - 重新定义标准名称是未定义的行为吗？

> ID：14770384
> 
> 赞同：12
> 
> 时间：2013-02-08T10:23:05.233
> 
> 标签：c, language-lawyer

很容易推断这样的代码是如何工作的：

```
#include <string.h>

#define strcmp my_strcmp

int my_strcmp(const char *, const char *)

...
strcmp(str1, str2);
... 
```

但这个问题是这在技术上是否正确。

从 C11：

7.1.3.1（关于保留名称）：

> ...
> 
> *   如果包含任何关联的头文件，则以下任何子条款（包括未来的库方向）中的每个宏名称都保留用于指定使用；除非另有明确说明（见 7.1.4）。
> *   以下任何子条款（包括未来的库方向）和 errno 中的所有具有外部链接的标识符始终保留用作具有外部链接的标识符。^(184) )
> *   如果包含任何关联的标头，则保留在以下任何子条款（包括未来的库方向）中列出的具有文件范围的每个标识符用作宏名称和具有相同名称空间中的文件范围的标识符。
> 
> ^(184)具有外部链接的保留标识符列表包括 math_errhandling、setjmp、va_copy 和 va_end。

所以这意味着这`strcmp`是一个保留字，因为`string.h`被包含在内。

7.1.3.2：

> ...如果程序在保留标识符的上下文中声明或定义标识符（7.1.4 允许的除外），或将保留标识符定义为宏名称，则行为未定义。

现在这似乎说重新定义`strcmp`是未定义的行为，除非它在 ​​7.1.4 中以某种方式被允许。

7.1.4可能相关的内容有：

7.1.4.1：

> ...在头文件中声明的任何函数都可以另外实现为头文件中定义的类似函数的宏，因此如果在包含头文件时显式声明库函数，则可以使用下面显示的技术之一来确保声明不受此类宏的影响。函数的任何宏定义都可以通过将函数的名称括在括号中来在本地抑制，因为该名称后面没有表示宏函数名称扩展的左括号。出于同样的语法原因，即使库函数也被定义为宏，也允许获取库函数的地址。^(185) ) 使用#undef 删除任何宏定义也将确保引用实际函数。...
> 
> ^(185)这意味着实现应为每个库函数提供一个实际函数，即使它还为该函数提供了一个宏。

7.1.4.2：

> 如果可以在不引用头文件中定义的任何类型的情况下声明库函数，则也允许声明函数并在不包括其关联头文件的情况下使用它。

其余条款无关紧要。我看不到 7.1.3.2 所指的“7.1.4 所允许的”，除了库函数*在与函数相同的头文件中的定义，即标准头文件*，作为宏。

总之，上面的代码在技术上是未定义的行为吗？如果`string.h`不包括怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T11:37:22.857

它是 UB 的至少一个原因是它`string.h`可以引入宏。出于内部实现的原因，这些宏可能是在假设`strcmp`是“真正的”strcmp 函数的情况下编写的。如果你定义`strcmp`为别的东西然后使用那些宏，`strcmp`会`my_strcmp`在宏中展开，产生意想不到的后果。

该标准并没有试图准确地确定哪些代码可以使用，哪些代码`...`不能使用，而是尽早停止您的恶作剧。

另请注意，除了标准完全禁止它之外，您`#define strcmp my_strcmp`可能是宏重新定义，因为`string.h`允许这样做`#define strcmp __strcmp`或其他任何事情。因此，在某些符合要求的实现中，您的代码格式不正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T16:45:33.533

声明或定义保留标识符的程序不严格符合 (C 2011 4 5) 但可能符合 (C 2011 4 7)。

[引发这个问题](https://stackoverflow.com/a/14728064/298225)的争论不在于声明或定义保留标识符是否是 C 未定义的行为，而是该行为是否可以通过其他方式定义，例如特定 C 实现的文档，以及程序作者可以做到。

有些人将“未定义的行为”视为“您可能不会这样做”。这是对“未定义行为”的错误解释。未定义的行为不是标准要求您避免的；这是 C 标准无法帮助您解决的问题。

C 标准明确声明它对未定义的行为**没有要求。**特别是，这意味着没有要求你不能这样做，也没有要求另一个规范不能定义行为。几乎每个实际程序都使用 C 标准未定义的行为，当它进行操作系统文档定义的系统调用或库文档定义的库调用或依赖于其设计的特定 C 实现定义的数据类型格式时为了。

在 C 中，“未定义的行为”只是 C 标准设置的规则的结束。这是一个开放的领域，您可以使用其他方式导航，而不是阻碍您前进的墙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:24:21.683

是的，这是未定义的行为。它很可能会起作用，但你不能确定。

我相信这样做的原因是允许编译器具有`str`函数如何工作的内置知识。当然，`strcmp`可能已经是一个宏`memcmp(s1, s2, strlen(s1))`或类似的东西[我不是说它就是这样，只是可能是这样。

我不相信“不包括 string.h”实际上有帮助。

我建议您在源代码中进行搜索和`strcmp`替换。如果您希望“返回”，`my_strcmp`您总是可以反过来使用。`#define my_strcmp(s1, s2) strcmp(s1, s2)`

# iphone - 如何以编程方式使声音更响亮？

> ID：14770394
> 
> 赞同：0
> 
> 时间：2013-02-08T10:23:36.537
> 
> 标签：iphone, ios

在我的 iphone 应用程序中，我正在使用 Voice Over。是否有可能以编程方式使 Voice Over 声音更大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:25:42.520

```
MPMusicPlayerController *musicPlayer = [MPMusicPlayerController applicationMusicPlayer];
musicPlayer.volume = 1; 
```

您可以在此处阅读有关 MPMusicPlayerController 的信息：[链接](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html)

# .htaccess - API重写的Mod Rewrite Rule

> ID：14770395
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:23:37.803
> 
> 标签：.htaccess, mod-rewrite, laravel

我正在努力制定正确的重写规则，将请求写入 api/1.1/method 到 api/1_0/method

我使用的框架不允许在文件夹名称中使用 .'s 的嵌套控制器，因为它使用它作为分隔符。

我一直在玩弄一个解决方案，这就是我到目前为止的地方：

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
</IfModule>
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^(api)/([^.]+)\.([^/]+)/(.*)$ /$1/$2_$3/$4 [L,NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:32:58.650

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteRule ^(api)/([^.]+)\.([^/]+)/(.*)$ /$1/$2_$3/$4 [L,NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

# .net - 多线程故障

> ID：14770399
> 
> 赞同：0
> 
> 时间：2013-02-08T10:23:46.320
> 
> 标签：.net, vb.net, multithreading

我有一个程序，它使用一个名为的标签`Valve`和一个名为的文本框`Variable`

要点是，如果`Variable = 0`则标签颜色为灰色，如果`Variable = 1`则标签使用在灰色和红色之间闪烁的线程。

除了非常快速地在两个值之间更改（输入 0 然后删除它然后输入 1 等等）之外，这几乎可以完美地工作，然后线程速度会增加（就像它是多线程一样）。

奇怪的是，如果在值 0 和 1 之间缓慢交换（每 2 秒 +），那么它不会增加闪烁速度（这是程序需要做的）

这是来自以下问题的扩展代码：[vb.net multi threading](https://stackoverflow.com/questions/14754360/vb-net-multi-threading?rq=1)

注意：这只是我在 VisiWin.NET 上的项目的 VB.NET 转换。在此示例中，TextBox`Variable`将是从 PLC 读取的实际变量，标签`Valve`将是三角形，表示来自过程流程图模拟的过程螺线管。每个螺线管将由不同的变量控制。

```
Imports Microsoft.VisualBasic
Imports System
Imports System.Collections
Imports System.Collections.Generic
Imports System.Drawing
Imports System.Windows.Forms
Imports System.Threading
Imports System.Diagnostics

Public Class Form1

Private _flash As Boolean = False

Private Sub Variable1_TextChanged(sender As System.Object, e As System.EventArgs) Handles Variable.TextChanged

    If Variable.Text = "1" And Not _flash Then
        _flash = True
        Dim FlashThread As New Thread(New ThreadStart(AddressOf FlashLabel))
        FlashThread.Start()
    End If

    If Variable.Text = "0" Then
        _flash = False
        Valve.ForeColor = Color.Gray
    End If

End Sub

Private Sub FlashLabel()

    Dim _Color As Color = Color.Gray
    While _flash

        If Valve.ForeColor = _Color Then
            Valve.ForeColor = Color.Red
        Else
            Valve.ForeColor = Color.Gray
        End If
        System.Threading.Thread.Sleep(2000)

    End While

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:37:15.763

这里发生的是您的第一个闪烁线程仍在运行，它只是处于第二个睡眠阶段。您的值更改为 0，它不会跳出循环，因为它处于睡眠状态，然后变量再次变回 1，线程唤醒并继续，此时您已经生成了另一个执行完全相同的事情的线程，所以看起来好像线程走得更快。

我建议将其更改为计时器，因为您可以在变量为 0 时停止计时器，然后在为 1 时重新启动它：

```
Imports Microsoft.VisualBasic
Imports System
Imports System.Collections
Imports System.Collections.Generic
Imports System.Drawing
Imports System.Windows.Forms
Imports System.Threading
Imports System.Diagnostics

Public Class Form1

Private _timer As New System.Windows.Forms.Timer()

Private Sub Variable1_TextChanged(sender As System.Object, e As System.EventArgs) Handles Variable.TextChanged

    If Variable.Text = "1" And Not _flash Then
        _flash = True
        _timer.Interval = 2000
        _timer.Enabled = True
        _timer.Start()
    End If

    If Variable.Text = "0" Then
        _flash = False
        _timer.Stop()
        _timer.Enabled = False
        Valve.ForeColor = Color.Gray
    End If

End Sub

Private Sub FlashLabel() Handles _timer.Tick

    Dim _Color As Color = Color.Gray

    If Valve.ForeColor = _Color Then
        Valve.ForeColor = Color.Red
    Else
        Valve.ForeColor = Color.Gray
    End If

End Sub

End Class 
```

计时器文档：http: [//msdn.microsoft.com/en-gb/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-gb/library/system.windows.forms.timer.aspx)

或者，您可以将线程存储在一个字段中，并在您的变量设置为 0 时终止它：

```
Imports Microsoft.VisualBasic
Imports System
Imports System.Collections
Imports System.Collections.Generic
Imports System.Drawing
Imports System.Windows.Forms
Imports System.Threading
Imports System.Diagnostics

Public Class Form1

Private _flash As Boolean = False
Private _flashThread as Thread

Private Sub Variable1_TextChanged(sender As System.Object, e As System.EventArgs) Handles Variable.TextChanged

    If Variable.Text = "1" And Not _flash Then
        _flash = True
        _flashThread As New Thread(New ThreadStart(AddressOf FlashLabel))
        _flashThread.Start()
    End If

    If Variable.Text = "0" Then
        _flash = False
        _flashThread.Abort()
        Valve.ForeColor = Color.Gray
    End If

End Sub

Private Sub FlashLabel()

    Dim _Color As Color = Color.Gray
    While _flash

        If Valve.ForeColor = _Color Then
            Valve.ForeColor = Color.Red
        Else
            Valve.ForeColor = Color.Gray
        End If
        System.Threading.Thread.Sleep(2000)

    End While

End Sub

End Class 
```

有关中止线程的说明，请参阅[http://msdn.microsoft.com/en-GB/library/ty8d3wta.aspx](http://msdn.microsoft.com/en-GB/library/ty8d3wta.aspx)，尽管我认为这对您并不适用，如果它在执行期间没有中止线程睡眠时间，它应该在循环的下一次迭代之前中止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:33:26.937

问题如下：

1.  你输入 1, `_flash`is `False`: 线程启动，改变颜色，休眠 2 秒
2.  你输入 1 后快速输入 0，`_flash`就是`True`:`_flash`会被设置为`False`。
3.  你输入0后快速输入1，又`_flash`是`False`：开始一个新线程。

现在，如果第 2 步和第 3 步在第一个线程休眠时发生，则您有两个正在运行的线程。在第一个线程完成睡眠后，它会看到它`_flash`并`True`继续运行。

# android - Android - AlertDialog 样式

> ID：14770400
> 
> 赞同：8
> 
> 时间：2013-02-08T10:23:47.457
> 
> 标签：android, android-alertdialog, customdialog

我在应用程序中有一个警报对话框，如下所示。

![在此处输入图像描述](../Images/6bd5df80880efbba12a5076d7fd94cf2.png)

我希望标题和分隔标题的行 - 消息正文为橙色。我怎样才能做到这一点？我尝试的是使用自定义样式，如下所示。但这没有用。

```
<style name="AboutDialog" parent="@android:style/Theme.Dialog">
  <item name="android:textColor">#E5492A</item>
</style> 
```

我的警报对话框代码：

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder( new ContextThemeWrapper(MainActivity.context, R.style.AboutDialog));
alertDialog.setTitle("Sample");
        alertDialog.setMessage(R.string.rate_dialog_text);
        alertDialog.setPositiveButton(R.string.rate_now_text,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        MainActivity.context.startActivity(new Intent(
                                Intent.ACTION_VIEW, Uri
                                        .parse("market://details?id="
                                                + MainActivity.APP_PNAME)));
                        if (editor != null) {
                            editor.putBoolean("dontshowagain", true);
                            editor.commit();
                        }
                        dialog.dismiss();

                    }
                });

        alertDialog.setNeutralButton(R.string.remind_later_text,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                    }
                });

        alertDialog.setNegativeButton(R.string.no_thanks_text,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        if (editor != null) {
                            editor.putBoolean("dontshowagain", true);
                            editor.commit();
                        }
                        dialog.dismiss();
                    }
                });

        return alertDialog.create();

    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-08T10:41:37.403

代替：

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(
    new ContextThemeWrapper(MainActivity.context, R.style.AboutDialog)); 
```

试试这个：

```
AlertDialog.Builder alertDialog = new AlertDialog.Builder(this, R.style.AboutDialog); 
```

注意：这仅适用于 API 11 (Android 3.0) 及更高版本。

如果您需要支持 Android < 3.0，您可能必须创建一个自定义对话框（而不是使用`AlertDialog`

**编辑添加了非常低俗的基于反射的黑客**

如果您真的被卡住并且不想实现自定义对话框，请尝试以下操作。

在您构建对话框之后并且在您想要返回它之前，而不是这样：

```
return alertDialog.create(); 
```

做这个：

```
AlertDialog ad = alertDialog.create(); // Create the dialog
// Add listener so we can modify the dialog before it is shown
ad.setOnShowListener(new DialogInterface.OnShowListener() {
    @Override
    public void onShow(DialogInterface dialogInterface) {
        // Set the text color on the dialog title and separator
        setTextColor(dialogInterface, 0xFFE5492A);
    }
});
return ad; 
```

现在添加这个非常讨厌的基于反射的方法：

```
public void setTextColor(DialogInterface alert, int color) {
    try {
        Class c = alert.getClass();
        Field mAlert = c.getDeclaredField("mAlert");
        mAlert.setAccessible(true);
        Object alertController = mAlert.get(alert);
        c = alertController.getClass();
        Field mTitleView = c.getDeclaredField("mTitleView");
        mTitleView.setAccessible(true);
        Object dialogTitle = mTitleView.get(alertController);
        TextView dialogTitleView = (TextView)dialogTitle;
        // Set text color on the title
        dialogTitleView.setTextColor(color);
        // To find the horizontal divider, first
        //  get container around the Title
        ViewGroup parent = (ViewGroup)dialogTitleView.getParent();
        // Then get the container around that container
        parent = (ViewGroup)parent.getParent();
        for (int i = 0; i < parent.getChildCount(); i++) {
            View v = parent.getChildAt(i);
            if (v instanceof ImageView) {
                // We got an ImageView, that should be the separator
                ImageView im = (ImageView)v;
                // Set a color filter on the image
                im.setColorFilter(color);
            }
        }
    } catch (Exception e) {
        // Ignore any exceptions, either it works or it doesn't
    }
} 
```

我在 Android 2.2 和 Android 4.0 上对此进行了测试，并且可以正常工作。它可能不完全符合您的要求，因此您需要尝试一下。我不能保证它可以在所有设备或未来版本的 Android 上运行，因为它在很大程度上取决于`AlertDialog`类的实现方式（如果他们在未来改变它，这可能不再适用）。

给关心的人一些注意事项：

1.  我使用的原因是因为在它们被充气之前，`setOnShowListener()`您实际上无法访问使用的内部`View`对象。`AlertDialog`当您创建 时，它们不会立即膨胀`AlertDialog`，它会在一段时间后发生。使用监听器，我们可以在布局膨胀之后但在`Dialog`显示之前获得控制。

2.  我正在使用反射来访问`AlertDialog`实现中的内部成员变量。一旦我可以访问`TextView`包含标题的内容，我必须四处寻找用于将标题与消息分开的水平线。为此，我得到`Layout`围绕标题的 （这`Layout`包含警报图标和标题文本）。然后我得到`Layout`围绕它的那个（这`Layout`包含了图标、标题文本和分隔符）。然后我查看周围布局的所有子元素，并为其中的所有`ImageView`对象设置颜色。分隔符被实现为`ImageView`使用可绘制对象，因此无法仅更改颜色。注意：使用的替代方法`setColorFilter()`将在这里用适当颜色的可绘制对象替换 ImageView 中的可绘制对象。

感谢您的挑战，弄清楚这一点很有趣:-D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-16T12:11:28.900

顺便说一句，它的答案很晚，也许它对某人有用。创建自定义警报对话框并具有与默认警报对话框相同的简洁按钮。按照下面的简单方法

```
final AlertDialog.Builder demoDialog = new AlertDialog.Builder(this);
        final LayoutInflater inflator = this.getLayoutInflater();
        final View view = inflator.inflate(R.layout.passcode_req_dialog_template, null);

        demoDialog.setView(view)

            .setPositiveButton(R.string.ok_button_text, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            })

            .setNegativeButton(R.string.cancel_button_text, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                }
            });

        final AlertDialog dialog = passwordDialog.create();
        dialog.show();
        dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                //Get the work done here when pressing positive button
                dialog.dismiss(); 
            }
        });

        dialog.getButton(AlertDialog.BUTTON_NEGATIVE).setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                //Get the work done here when pressing negative button
                dialog.dismiss();   
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:44:17.183

尝试创建一个`custom layout`for 对话框并将其提供`layout`给您的警报对话框，方法是使用

```
dialog.setContentView(R.layout.customDialogLayout); 
```

您可以查看自定义对话框的此[示例](http://www.mkyong.com/android/android-custom-dialog-example/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-06T03:09:26.427

你可以使用这个项目[AlertDialogPro](https://github.com/fengdai/AlertDialogPro)。将此项目包含到您的项目中并定义您的主题，如下所示：

```
<style name="YourAppTheme.AlertDialogProTheme" parent="AlertDialogProTheme.Holo.Light">
    <!-- Custom the title -->
    <item name="android:windowTitleStyle">@style/YourDialogWindowTitle</item>
    <!-- Change the title line to orange -->
    <item name="adpTitleDividerBackground">#E5492A</item>
</style>

<style name="YourDialogWindowTitle" parent="DialogWindowTitle.Holo.Light">
    <item name="android:textColor">#E5492A</item>
</style> 
```

并使用属性“alertDialogProTheme”将此主题指定为您的应用程序主题：

```
<style name="AppTheme" parent="AppBaseTheme">
  ...
  <item name="alertDialogProTheme">@style/YourAppTheme.AlertDialogProTheme</item>
</style> 
```

使用 AlertDialogPro.Builder 构建对话框：

```
AlertDialogPro.Builder builder = new AlertDialogPro.Builder(getContext());
builder.setTitle(R.string.app_name).
    setMessage("Message").
    setPositiveButton("Rate Now", null).
    setNeutralButton("Remind me later", null).
    setNegativeButton("No,thanks", null).
    show(); 
```

![截屏](../Images/c3110f4228c98d673c82ba083e772ed6.png)

# c - Lua，实现 C API 可访问的线程本地存储

> ID：14770407
> 
> 赞同：1
> 
> 时间：2013-02-08T10:24:15.367
> 
> 标签：c, multithreading, lua

我的问题是：如何使用 Lua 堆栈（lua_State）实现线程本地存储之类的东西？一些将存储在 lua 状态中的值，可由 lua 脚本和 C API 访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T01:37:05.707

有几种方法可以做到这一点。我写了一篇关于它的论文；[这是Lua Programming Gems](http://www.lua.org/gems/)的第 1 章

最简单的方法可能是在注册表中创建一个表，其键是 lua_States，值是您的线程本地数据。在键中使表变弱，以便在收集线程时释放线程本地数据。

如果您的线程本地数据只需要并从您的 C 库访问，您可以改为在库函数的共享上值中保留一个类似的表。使用[luaL_setfuncs](http://www.lua.org/manual/5.2/manual.html#luaL_setfuncs)将函数注册到共享上值表。使用这种技术的优点是线程本地数据对您的 C 库是私有的。

# java - 未找到 Netbeans 平台应用程序自定义安装程序“NBI_Engine”

> ID：14770409
> 
> 赞同：0
> 
> 时间：2013-02-08T10:24:19.197
> 
> 标签：java, netbeans, netbeans-platform

我正在自定义 NPA 安装程序以复制一些外部文件。我正在关注本教程（[http://netbeans.dzone.com/nb-customize-installer-to-copy-files](http://netbeans.dzone.com/nb-customize-installer-to-copy-files)），在打开线束文件夹中的 helloworld 项目时遇到了一些参考问题。

问题：项目类路径包含对名为“NBI_Engine”的项目的引用，但未找到该项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:13:26.643

您必须在 C:\Program Files (x86)\NetBeans 7.2.1\harness\modules\ext 文件夹中导入库 nbi-engine.jar。

# android - Android从服务调用外部类

> ID：14770411
> 
> 赞同：1
> 
> 时间：2013-02-08T10:24:25.280
> 
> 标签：android

我正在尝试从服务中调用局外人类，但遇到“空指针异常”之类的错误。这是简单的代码。

**这里是局外人课。**

```
public class SyncTask {
    private Context context;

    public SyncTask(Context context, String agrs) {
        this.context = context;
    }       

    protected String ProcessSycn(String agrs) {     
        return agrs + " -  call successful.";
    }    
} 
```

**这里是服务类。**

```
public class SyncService extends Service{   
    public SyncTask syncme;
    public String i;

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        // TODO Auto-generated method stub
        super.onStart(intent, startId);                
        i = syncme.ProcessSycn(3 + "");                                 
        this.stopSelf();
    }    

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:30:04.653

您永远不会初始化变量`syncme`。你需要类似的东西：

```
syncme = new SyncTask(this, "arguments"); 
```

# mysql - 使用 PFK 的 MySQL 视图

> ID：14770418
> 
> 赞同：0
> 
> 时间：2013-02-08T10:24:51.800
> 
> 标签：mysql, view

我有这个表：

```
Create table table1 (
 id Int UNSIGNED NOT NULL,
 name VARCHAR(255) NOT NULL, 
 Primary Key(id),
 Unique Key `name` (`name`)) 
ENGINE = InnoDB;

Create table table2 (
 id1 Int UNSIGNED NOT NULL,
 id2 Int UNSIGNED NOT NULL,
 Primary Key (id1,id2)) 
ENGINE = InnoDB;

Alter table table2 add Foreign Key (id1) references table1 (id) 
on delete  restrict on update  restrict;
Alter table table2 add Foreign Key (id2) references table1 (id) 
on delete  restrict on update  restrict; 
```

我想问一下，是否有可能创建一种类型`view`，其中包含`table1`中提到的两个用户（来自）的名称`table2`？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:30:12.097

试试这个：

```
CREATE OR REPLACE VIEW ViewName
AS
SELECT
    T1.Name Name1, T2.Name Name2
FROM Table2 T
    JOIN Table1 T1
        ON T.Id1 = T1.Id
    JOIN Table1 T2
        ON T.Id2 = T2.Id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:27:38.823

这会将所有名称放在视图中，其 id 都存在于 Table2 中的两列中。

```
CREATE VIEW MyView AS SELECT DISTINCT Name FROM Table1 
WHERE Id IN (SELECT DISTINCT Id1 FROM Table2 
UNION SELECT DISTINCT Id2 FROM Table2) 
```

# sql-server-2008 - 使用数据编写数据库脚本

> ID：14770423
> 
> 赞同：0
> 
> 时间：2013-02-08T10:25:17.437
> 
> 标签：sql-server-2008

当我生成数据库脚本时，只有表和存储过程是脚本化的。但我也想要数据。我使用的是 SQL Server 2008。是否有任何规定可以在单个文件中使用数据编写脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:28:57.977

在“选择脚本选项向导”中将脚本数据选项设置为 true

你也可以参考

[http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-另一张桌子/](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:28:01.617

[APEXSQL](http://www.apexsql.com)有一个工具可以让你用数据编写整个数据库的脚本......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:30:24.567

如果不是太多努力，你总是可以自己写。您甚至可以使用 excel 等自动执行其中的一些操作。为此，请尝试：

```
SELECT 'INSERT INTO sometable (field1, field2, field3)
 VALUES (''' + field1 + ''', ''' + field2 + ''', ''' + field3 + ''');'
 AS insrow FROM sometable 
```

# iphone - 如何逐渐减慢旋转动画

> ID：14770426
> 
> 赞同：0
> 
> 时间：2013-02-08T10:25:28.540
> 
> 标签：iphone, ios, objective-c, image-rotation

我正在开发一个轮盘赌应用程序。如果我点击中心按钮轮应该旋转几秒钟，然后它的速度应该逐渐减慢。如果有人知道，请以正确的方式指导我。

我可以以`imageView`某种均匀的速度旋转，但我面临着逐渐减慢车轮速度的困难。

**轮换代码**

> ```
> CALayer *layer = container.layer;
> CAKeyframeAnimation *animation;
> animation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];
> animation.duration = 1.5f;
> animation.cumulative = YES;
> animation.repeatCount = 1;
> animation.values = [NSArray arrayWithObjects:       // i.e., Rotation values for the 3 keyframes, in RADIANS
>                     [NSNumber numberWithFloat:0.0 * M_PI],
>                     [NSNumber numberWithFloat:0.75 * M_PI],
>                     [NSNumber numberWithFloat:1.5 * M_PI], nil];
> animation.keyTimes = [NSArray arrayWithObjects:     // Relative timing values for the 3 keyframes
>                       [NSNumber numberWithFloat:0],
>                       [NSNumber numberWithFloat:.5],
>                       [NSNumber numberWithFloat:1.0], nil];
> animation.timingFunctions = [NSArray arrayWithObjects:
>                              [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn], // from keyframe 1 to keyframe 2
>                              [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut], nil];  // from keyframe 2 to keyframe 3
> animation.removedOnCompletion = NO;
> animation.fillMode = kCAFillModeForwards;
> [layer addAnimation:animation forKey:nil]; 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:29:09.530

查看 CAKeyframeAnimation 的文档，您可以使用 timingFunctions 属性来添加缓动等

[https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAKeyframeAnimation_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAKeyframeAnimation_class/Introduction/Introduction.html)

# javascript - 响应式动态html

> ID：14770431
> 
> 赞同：0
> 
> 时间：2013-02-08T10:25:36.887
> 
> 标签：javascript, html, css, image, responsive-design

如果媒体宽度低于 726px ，我如何制作一个 html 元素来更改？

例如，我有一个图像，如果媒体宽度低于 726 像素，我想用另一个图像进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:27:56.757

设置css直到生效`726px`

```
@media screen and (max-width: 726px) {
   background-image: url(image-med.png);
}

@media screen and (min-width: 727px) {
   background-image: url(image-big.png)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:41:57.847

我建议将您的低分辨率样式捆绑在一个单独的 css 文件中，您可以通过在 html head 部分中包含以下链接来激活该文件：

```
 <link rel="stylesheet" media="only screen and (max-width:726px)" href="your-low-res-styles.css" title="norrowscreen" /> 
```

关于您的问题：“有没有办法更改 html...”：在您的代码中包含 matchMedia 侦听器：

```
if (window.matchMedia !== undefined) {
    var mq = window.matchMedia("(max-width: 726px)");
    mq.addListener(onWidthChange);
    onWidthChange(mq);
}
function onWidthChange(mq) {
    if (mq.matches) {
        $("#img0").attr("src", url1);
    } else {
        $("#img0").attr("src", url2);
    );
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:39:54.977

```
@media only screen and (max-width: 726px){
#div{  background-image: url(image-1.png)}
}
@media only screen and (min-width: 727px){
#div{  background-image: url(image-2.png)}
} 
```

# android - RatingBar：如何计算没有。从 RatingBar 中选择的明星

> ID：14770434
> 
> 赞同：0
> 
> 时间：2013-02-08T10:25:40.317
> 
> 标签：android

我是 android 新手，我在我的应用程序中使用 RatingBar，现在我想根据 RatingBar 中的星星选择来计算评分数。我用过：num_of_rating = rating.getRating(); 在我的应用程序中，但我无法计算它。如果有人知道答案，请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:30:28.800

xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout   
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView android:id="@+id/ratingText" android:layout_width="wrap_content" android:layout_height="wrap_content" />
    <RatingBar android:id="@+id/rating" 
        android:isIndicator="false"
        android:stepSize="1.0" 
        android:numStars="5" 
        android:rating="0.0" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content">
    </RatingBar>

</LinearLayout> 
```

活动

```
ratingText=(TextView)findViewById(R.id.ratingText);
        rating=(RatingBar)findViewById(R.id.rating);
        rating.setOnRatingBarChangeListener(this);

    }

    // implement abstract method onRatingChanged
    public void onRatingChanged(RatingBar ratingBar,float rating, boolean fromUser){
        ratingText.setText(""+this.rating.getRating()); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:26:48.793

```
ratingBar = (RatingBar) findViewById(R.id.ratingBar);
btnSubmit = (Button) findViewById(R.id.btnSubmit);

//if click on me, then display the current rating value.
btnSubmit.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {

        Toast.makeText(MyAndroidAppActivity.this,
            String.valueOf(ratingBar.getRating()),
                Toast.LENGTH_SHORT).show();

    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:31:50.863

使用以下代码

浮动 num_of_rating = 0.0f;

RatingBar ratingbar_rb = (RatingBar)findViewById(R.id.ratingbar_rd);

ratingbar_rb.setOnRatingBarChangeListener(new OnRatingBarChangeListener() {

```
 @Override
        public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromTouch) {
             num_of_rating = rating;
        }}); 
```

# javascript - 如何对从复选框中检索到的数组的字符串值求和？

> ID：14770439
> 
> 赞同：0
> 
> 时间：2013-02-08T10:26:00.050
> 
> 标签：javascript, html, string, jsp, checkbox

我有某些 JSP 代码，其中我可以选择多个复选框，然后我应该添加所选元素的值。

但是，由于要检索的元素是字符串格式，所以`NumberFormatException`当我尝试这样做时会得到一个 -

```
String chooseRight[] = request.getParameterValues("id");

if(chooseRight != null && chooseRight.length != 0){
    int sum =0;
         out.println("The sum is: ");
    for (int i = 0; i < chooseRight.length; i++) {
        sum += Integer.parseInt(chooseRight[i]);
        out.println(sum);
    }
} 
```

我怎么可能显示`int`或`float`价值`out.print(sum);`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:30:05.567

嗨，您可以使用 typeof of 来验证 javascript 中的类型，例如

```
typeof "123"; // return string
typeof 123;// return number
typeof new Object(); // return object 
```

希望这些信息对您有所帮助

查看有关类型检查的更多信息：[http ://www.avlabz.com/2013/01/geekyjs-javascript-strict-type-checking-plugin/](http://www.avlabz.com/2013/01/geekyjs-javascript-strict-type-checking-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:30:58.237

我不认为这`out.println(sum);`是问题所在。`sum`被声明为 int 并将保持这种状态。错误必须发生在 中`Integer.parseInt()`，而这又必须是由`chooseRight`包含无法解析为整数的字符串引起的。

请参阅[Integer.parseInt() 的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)，其中指出：

> 抛出： NumberFormatException - 如果字符串不包含可解析的整数。

# php - jQuery 滚动锚链接不会在内部工作

> ID：14770440
> 
> 赞同：0
> 
> 时间：2013-02-08T10:26:03.953
> 
> 标签：php, jquery, hyperlink, anchor

让我们设置以下示例：我有两个具有相同菜单的页面。这个菜单包含在 php include 的两个页面中。第一页是主要的。如果有人单击某个菜单链接，它将重定向到第二页上的特定锚点。最近我有一个 jQuery 函数可以工作，它包括页面滚动到锚点。基本上我让它与类一起工作。因此，假设链接是`<a href="page2.php#anchor2">Anchor 2</a>`并且在我的第二页中`<section class="anchor2">`。用于此的 Javascript 是：

```
$(window).bind("load", function() {
   var urlHash = window.location.href.split("#")[1];
    $('html,body').animate({scrollTop:$('.'+urlHash).offset().top}, 500);        
}); 
```

这一切都很好，除了当我已经在第二页并且我单击菜单在锚点之间切换时，它只是不起作用。基本上，如果用户在第一页并且想要导航到第二页的某个锚点，这一切都很好，但是如果他已经在第二页并且想要在内部导航到其他锚点，那么链接就不会做任何事物。

我已经建立了一个临时页面，这样你们就可以看到我在说什么[http://www.josemelo.net/temp/](http://www.josemelo.net/temp/)。无论如何，这里是文件和代码：

**索引.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<?php include 'menu.php'; ?>
<p>Hello! This is the first page.</p>
</body>
</html> 
```

**菜单.php**

```
<a href="page2.php#anchor1">Anchor 1</a>
<a href="page2.php#anchor2">Anchor 2</a>
<a href="page2.php#anchor3">Anchor 3</a>
<a href="page2.php#anchor4">Anchor 4</a> 
```

**page2.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">         
    $(window).bind("load", function() {
       var urlHash = window.location.href.split("#")[1];
        $('html,body').animate({scrollTop:$('.'+urlHash).offset().top}, 500);        
    });     
</script>
</head>
<body>
<?php include 'menu.php'; ?>
<section class="anchor1">Anchor 1</section>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<section class="anchor2">Anchor 2</section>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<section class="anchor3">Anchor 3</section>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

<section class="anchor4">Anchor 4</section>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?</p>
    <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</body>
</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:30:50.603

[**演示**](http://jsfiddle.net/r5x79/3/)

你错过了一些重要的东西：`.on('hashchange'`

```
$(function(){
    $(window).on('hashchange', function(){
        var urlHash = window.location.href.split("#")[1];
        if ($('.'+urlHash).length){
           $('html,body').stop().animate({scrollTop:$('.'+urlHash).offset().top}, 500);        
        } 
    }).trigger('hashchange'); // and trigger it on load

    $('a').on('click', function(){
        if (this.href.split("#")[1]==window.location.href.split("#")[1]) $(window).trigger('hashchange');
    });
}); 
```

# java - 使用 jQuery 和 java 的拓扑绘图工具

> ID：14770441
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:26:06.020
> 
> 标签：java, javascript, jquery, diagram, topology

我需要一个 jquery 工具或库或脚本来帮助我根据从 snmp 和 telnet 调用获得的拓扑详细信息生成动态网络拓扑图。

我将获得有关所有节点的数据和 b/w 节点的连接详细信息。我需要绘制一个需要一个 jquery 工具来帮助我创建它。

希望我说的很清楚。

我在谷歌上搜索了很多，但我没有找到适合我的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:53:44.903

试试这个插件演示链接给出了[http://jsplumb.org/jquery/dynamicAnchorsDemo.html](http://jsplumb.org/jquery/dynamicAnchorsDemo.html)

# .htaccess - 使用 .htaccess 在 URL 中隐藏文件夹

> ID：14770442
> 
> 赞同：0
> 
> 时间：2013-02-08T10:26:10.233
> 
> 标签：.htaccess, directory

我需要从 url 隐藏一个文件夹。

一个例子：

如果我进入`www.mysite.com/Jango` 我需要你阅读目录：`www.mysite.com/users/Jango` 但不想看到`/users`

我只想在地址栏中看到这个： `www.mysite.com/Jango`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:34:07.730

这应该这样`.htaccess`做`/`：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^users/
RewriteRule ^(.*)$ users/$1 [L] 
```

这会将任何不以开头的请求都视为已开始`users/`。

**更新：**
如果您希望规则仅适用于`/Jango`--> `/users/Jango`，这将是一个合适的`.htaccess`：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^users/Jango
RewriteRule ^Jango/(.*)$ users/Jango/$1 [L] 
```

（`[L]`-flag 停止重写此规则，防止可能的循环反应等）

# wif - Windows Identity Foundation 4.5 中 ClaimsAuthorizationManager 的参考示例

> ID：14770446
> 
> 赞同：2
> 
> 时间：2013-02-08T10:26:29.583
> 
> 标签：wif, claims-based-identity, adfs2.0, azman

对不起，这个问题很长，试图表达我的所有观点！

我一直在花费大量时间研究如何将我们现有的身份和访问管理方案更新为更现代的平台，以解决我们特别是从 ISO27001 角度来看的许多业务和合规性要求。

我有两个主要目标要实现：1）能够报告用户可以执行哪些业务操作/任务？2) 能够实时或通过历史报告监控用户正在做什么/已经做什么？

我们目前混合使用自定义身份验证和授权（两者都使用 SQL 后端）和用于身份验证的 AD 域服务和用于授权的 AD 组成员/角色需求。

我建议我们在所有软件中使用 AD 域服务进行身份验证，但从基于声明的角度来看，将 ADFS 2.0 作为我们的 STS 服务器。然后，我们可以开始在我们的应用程序中利用声明，对于那些使用角色需求的人，它们仍将继续工作。

我对以上所有内容都很满意，但是我们希望使用更精细的权利管理/授权方案，因此我想使用 ClaimsAuthorizationManager 作为决策和执行点。

问题是 WIF 没有实现具体的版本，开发人员完全可以自己选择，没有指导。我找不到任何接近适合商业的东西的例子。

因此，我正在寻找有关如何构建以与 AzMan 或 NetSqlAzMan 类似的方式工作的企业级授权方案的任何建议。我建议每个应用程序都可以使用一个通用的简单 ClaimsAuthorizationManager 类。此类调用共享的 WCF 服务，该服务反过来使用 SQL 后端来存储业务操作/任务以及用户对这些服务的权利。用户对象将从 AD 同步，以便 AD 提供身份验证、声明，而我的自定义系统提供授权规则。这项集中和单一的服务有助于实现我的第一个目标。

该系统将记录每个请求，这将有助于实现我的第二个初始目标。

非常感谢任何建议、示例或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:20:37.483

你是对的——因为 AuthZ 是特定于应用程序的——微软没有提供任何具体的实现。

您似乎已经有了非常具体的想法，这应该如何工作。为什么不构建这样一个示例并将其开源——这样您就可以收集反馈并在此基础上改进它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:57:01.737

一些想法。

角色是一种易于理解的模式，例如[通用数据模型](http://www.univdata.com/AboutUs/UniversalDataModelsLLCOverview/tabid/246/Default.aspx)。

ADFS 可以将组作为角色传递 - [ADFS：将组作为声明发送](http://nzpcmad.blogspot.co.nz/2012/06/adfs-sending-groups-as-claims.html)。然后，您可以使用 IsInRole 或位置标记。这对你来说可能太简单了？

ADFS 可以记录成功或失败审计 - “联合服务属性” - 事件。

# visual-studio-2010 - VSTO 文档级定制

> ID：14770447
> 
> 赞同：3
> 
> 时间：2013-02-08T10:26:35.400
> 
> 标签：visual-studio-2010, c#-4.0, vsto, ms-office

我开发了文档级 Word 2010 自定义。当提示从我的系统或任何其他受信任的位置打开文档时，它打开得很好。但是当我尝试从网站中的链接打开相同的文档时，我收到以下错误：

```
Microsoft.VisualStudio.Tools.Applications.Runtime.CannotCreateCustomizationDomainException:
This document contains custom code that cannot be loaded because the location is
not in your trusted locations list: TestDocument.docx. If you trust this document
you can save and open it from a location on your computer. 
```

我已经使用有效的 .pfx 和证书签署了清单。

我已经阅读了一些类似的线程，但发现如果将文档保存到文件系统，自定义将会运行。您不能将 Temp 文件夹设置为受信任的位置。证书不会这样做，它必须保存到文件系统中的受信任位置。

使用宏进行自定义时没有问题。是否可以在 VSTO 自定义中进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:30:22.730

尝试在 Internet 选项下将网站的 URL 添加到 IE 中的本地 Intranet/受信任的站点。

# html - 带有 bg 图像的 Div 页面，如何不滚动页面

> ID：14770457
> 
> 赞同：0
> 
> 时间：2013-02-08T10:26:59.820
> 
> 标签：html, css

我创建了一个 2268 像素宽的标题图像，中间有一个普通标题，然后是页面外的背景（支持更大的显示器，如 mac）。

我已经设置`overflow-x: hidden`了父元素，但是我仍然可以滚动到它。所以基本上我试图有一个不发送页面不稳定的背景图像。

HTML：

```
<div id="page" class="hfeed">
<div id="headerBg">
    </div><!-- End #headerBg -->
    <header id="branding" role="banner">
            <nav id="access" role="navigation">
                <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
                <?php /* Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
                <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
                <?php /* Our navigation menu. If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assigned to the primary location is the one used. If one isn't assigned, the menu with the lowest ID is used. */ ?>
                <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
            </nav><!-- #access -->
    </header><!-- #branding --> 
```

CSS

```
#headerBg{
    position: relative;
    background-image: url('img/headerBg.gif');
    margin-left: -633px;
    height: 362px;
    width: 2268px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:52:02.930

您需要做的是给它一个自动边距以使其在页面上居中。这样你就不需要margin-left，这会导致它滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:06:03.250

您只需在 CSS 声明中添加以下内容：

```
#page {
    overflow-x:hidden;
} 
```

它禁用了由过大图像引起的滚动条的渲染。见[http://jsfiddle.net/uXFT4/](http://jsfiddle.net/uXFT4/)

请注意，`overflow-x`您`overflow-y`希望它工作的所有浏览器都可能不支持它。`overflow`尽可能使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:26:28.413

通过不设置宽度和边距，您无法达到需要设置父母溢出的程度。将背景居中放置，而不是元素本身*（带有负边距）*，您可以将其省略，浏览器自己完成。没有滚动条。

```
#headerBg {
    background-image: url('img/headerBg.gif');
    background-position: top center;
    height: 362px;
} 
```

# php - 通过 PHP 使用单个查询更新多个 MySQL 字段

> ID：14770465
> 
> 赞同：0
> 
> 时间：2013-02-08T10:27:24.797
> 
> 标签：php, mysql

我正在尝试使用 PHP 更新 MySQL 数据库中的多个字段。这些变量是使用 Ajax 从 HTML 表单传递的。由于某种原因，查询似乎失败了，我不知道为什么。

我检查了变量是否正确传递并且一切正常，所以我认为SQL查询有问题。我试过用细牙梳检查它，但我一生都无法弄清楚出了什么问题！我知道我可能遗漏了一些明显的东西，但有人可以帮我吗？

谢谢！

这是PHP代码：

```
<?php

//Connect to database
include_once('../../dbconnect.php');

//Retrieve Variables from AJAX call
$name = $_POST['name'];
$size = $_POST['changesize'];
$delivery = $_POST['changedelivery'];
$venue = $_POST['changevenue'];
$level = $_POST['changelevel'];
$modules = $_REQUEST['changemodules'];
$insertmodules = json_decode(stripslashes($modules), true);

//Update database using variables
mysql_query ("UPDATE users SET level=$level, size=$size, delivery=$delivery, venue=$venue, mod1=$insertmodules[0], mod2=$insertmodules[1], mod3=$insertmodules[2], mod4=$insertmodules[3], mod5=$insertmodules[4], mod6=$insertmodules[5], mod7=$insertmodules[6], mod8=$insertmodules[7], mod9=$insertmodules[8], mod10=$insertmodules[9] WHERE name=$name") 
 or die (mysql_error);

//Return Data
echo "Course updated for $name";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:30:24.347

`mysql_error()`是一个函数，不是常数。添加大括号，看看发生了什么。

很可能您没有正确格式化您的值。

例如，对于字符串，您必须同时

*   用引号括起来
*   在里面逃避这些引号

而你什么都不做。

对于数字，您必须明确地将它们转换为正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:30:38.167

例如，如果 $_POST['changelevel'] 包含字符串，则应使用引号。您应该对所有变量执行此规则。

```
UPDATE users
SET level='$level', size='$size', delivery='$delivery', venue='$venue', mod1=$insertmodules[0], mod2=$insertmodules[1], mod3=$insertmodules[2], mod4=$insertmodules[3], mod5=$insertmodules[4], mod6=$insertmodules[5], mod7=$insertmodules[6], mod8=$insertmodules[7], mod9=$insertmodules[8], mod10=$insertmodules[9] 
WHERE name=$name") 
```

只有整数值才允许使用不带引号的。

# sbcl - 包内 sbcl

> ID：14770467
> 
> 赞同：0
> 
> 时间：2013-02-08T10:27:26.157
> 
> 标签：sbcl

在 REPL 我做： * (defpackage :foo (:use common-lisp)) * (in-package :foo)

```
#<PACKAGE "FOO">

* *package*

#<PACKAGE "FOO"> 
```

如果我写文件：

尝试包.lisp：

```
(defpackage :foo (:use common-lisp))
(in-package :foo) 
```

然后我加载这个文件：

```
* (load "try-package")
T 
* *package*
#<PACKAGE "COMMON-LISP-USER"> 
```

为什么我总是在 COMMON-LISP-USER 中，然后我应该在 FOO 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:30:40.540

[`LOAD`](http://www.lispworks.com/reference/HyperSpec/Body/f_load.htm) *在加载文件之前*绑定*`*PACKAGE*`（也绑定）到它保存的值，如下所示：`*READTABLE*`*

 *```
(let ((*package* *package*)
      (*readtable* *readtable*))
  ... ;; really load a file
) 
```*

# opengl - 滚动（TscrollBar）嵌入在 TPanel 中的 OpenGL 控件

> ID：14770478
> 
> 赞同：0
> 
> 时间：2013-02-08T10:27:53.890
> 
> 标签：opengl, c++builder

我在 C++ builder (XE) 中开发了一个应用程序。我必须在面板中显示一个 openGL 组件（例如，可调整大小的 GLControl）。我在这个面板中使用 ScrollBar 来显示 OpenGL 组件的所有组合。所以我需要计算 TScrollBar 的正确页面大小和滚动面板时相机的平移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:41:47.147

最后，我得到了我的问题的解决方案。计算我的滚动条页面大小的公式是：

PageSize = ScrollBar->Max * (Height_Panel / Height_Draw);

并且要小心相机在 OpenGL 中的位置。

# jquery - Infinitescroll 插件未与同位素结合触发

> ID：14770485
> 
> 赞同：0
> 
> 时间：2013-02-08T10:28:12.653
> 
> 标签：jquery, scroll, jquery-isotope, infinite-scroll

我正在尝试让[infinitescroll](https://github.com/paulirish/infinite-scroll)与[isotope](https://github.com/desandro/isotope)一起工作。我已经浏览了文档和页面资源，但找不到问题。我确实看到了最初在页面上的第一个项目，但是在滚动到页面的最底部时，什么也没有发生。

我的 HTML 包含指向下一页的链接（分页的博客页面）：

```
<nav id='page-nav'>
  <a href='/blog/full-blog?page=2'></a>
</nav> 
```

JavaScript：

```
 $("#container").isotope({
    itemSelector: '.item',
    isAnimated: true
  });

  $("#container").infinitescroll({
    navSelector: '#page-nav',    // selector for the paged navigation 
    nextSelector: '#page-nav a',  // selector for the NEXT link (to page 2)
    itemSelector: '.item',     // selector for all items you'll retrieve
    debug: true,
    },
    function( newElements ) {
      console.log(newElements);
      $("#container").isotope( 'appended', $( newElements ) ); 
    }
  ); 
```

查看我的页面时，控制台说：

```
["determinePath", Array[2]]
 jquery.infinitescroll.min.js:1
["Binding", "bind"] jquery.infinitescroll.min.js:1
["math:", 497, 451] jquery.infinitescroll.min.js:1
["math:", 0, 451] jquery.infinitescroll.min.js:1
["heading into ajax", "/blog/full-blog?page=2"] jquery.infinitescroll.min.js:1
Using HTML via .load() method jquery.infinitescroll.min.js:1
XHR finished loading: "http://localhost:4567/blog/full-blog?page=2". jquery.js:8240
["Error", "end"] jquery.infinitescroll.min.js:1
["Binding", "unbind"] 
```

谁能解释一下最后两行是什么意思？明明有错误，但是end是什么意思呢？没有更多的页面可以加载了吗？在我的示例中，我有 3 个页面需要加载更多项目。解除绑定，是滚动事件解除绑定吗？找不到有关错误日志的任何文档/信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T20:45:06.567

'heading into ajax' 这一行意味着一个 ajax 请求在到达底部时被触发。

'XHR Finished Loading' 表示 ajax 请求成功。

最后第二行中的“错误”表示 ajax 请求没有返回数据。确保您请求的页面不返回空结果。要检查，请在浏览器中打开“/blog/full-blog?page=2”。

# wso2 - 如何在同一台机器上同时运行 WSO2-CEP 或 WSO2-BAM 和 WSO2-BPS？

> ID：14770487
> 
> 赞同：3
> 
> 时间：2013-02-08T10:28:19.743
> 
> 标签：wso2, wso2esb, wso2carbon, complex-event-processing, wso2bam

我正在研究 SOA 中的事件处理和业务活动监控。我想在 WSO2-BPS 运行时运行 WSO2-CEP 和/或 WSO2-BAM。但问题是，当我运行 WSO2-BPS 来运行我的业务流程时，我无法运行 WSO2-CEP 和/或 WSO2-BAM，也无法访问它们的管理控制台。请帮我。谢谢！

* * *

非常感谢您的快速回复，Maninda。实际上，我不想监控规则引擎。我想做的是监控一个BPEL流程（服务组合层）和底层服务基础设施（如tomcat、web服务本身、BPEL引擎等），我们可以称之为服务基础设施层，并分析KPI （使用 BAM）和流程指标（使用 CEP），找到 KPI 和指标之间的相关性，并尝试主动或被动地调整业务流程（在本例中为 BPEL），根据管理业务规则（使用规则 Esngine）。
您是否有任何样本涵盖所有或至少大部分？还是有其他想法？提前感谢您的时间和关注。

* * *

我想监视一个 BPEL 流程并在运行的 BPEL 流程上执行一些 BAM、规则处理和 CEP，并在需要时对其进行调整。是否有涵盖 BPEL、BAM、CEP 和规则引擎的案例研究或示例？我应该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:05:24.900

那是因为所有服务器都使用相同的端口号来处理类似的事情。您可以简单地将其他服务器的端口号偏移在不同的偏移量中，以设置不同的端口号。它将通过端口偏移量增加服务器中使用的所有端口号。

例如：

在 WSO2BAM 中不要更改端口偏移（默认端口偏移为 0），在 WSO2BPS 中将端口偏移设置为 1，在 WSO2CEP 中将端口偏移设置为 2。

为了更改端口偏移，请转到 [wso2-server-home-location]/repository/conf/carbon.xml 文件并`<Offset>0</Offset>`根据需要进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T06:30:45.590

对于 BAM，JMX 代理将有助于这些场景。[在本文档](http://docs.wso2.org/wiki/display/BAM220/Setting+Up+JMX+Agent+for+BAM)中了解如何使用它。这是一个非常新的功能，我以前没有尝试过。如果可以在这些产品中成功安装 JMX 代理，希望这将帮助您将监视的事件泵送到其他 WSO2 产品中的 BAM。我相信没有其他示例可用，因为这是一个非常新的功能。

# webdriver - 将字符串存储在一个类中，并在另一个类中调用相同的值

> ID：14770489
> 
> 赞同：1
> 
> 时间：2013-02-08T10:28:22.940
> 
> 标签：webdriver, selenium-webdriver

我有一个类，我在其中获取文本字段的值，代码如下

> driver.findElement(By.xpath(OR.getProperty("voyage_in"))).sendKeys("1001");
> String voyagein_id=driver.findElement(By.xpath(OR.getProperty("voyage_in"))).getAttribute("value"); System.out.println(voyagein_id);

我已将 String voyagein_id 声明为全局
我有另一个类，我称之为它，代码是：

> import Int_Script.Int_appointment --(这是第二类)
> System.out.println(Int_barge_appointment.voyagein_id);

我将 2 类都作为套件文件运行，并且 voyagein_id 始终显示为空。
我需要在 voyage_id 中获取第一类的值，当第二类运行时，必须输入文本字段的 voyagein_id 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:04:35.620

请验证您的 OR.properties 文件一次，并将其复制到代码所在的正确位置。我认为您没有正确更新属性文件。前天我也遇到了同样的问题。我已经更新了复制 jar 文件的属性文件，然后它就可以工作了。在此之前，我也得到了 Null 值。

您是在运行任何 Jar 文件还是直接从 Eclipse 运行？

# iphone - 用于计算距离和速度的 iPhone 应用程序

> ID：14770495
> 
> 赞同：1
> 
> 时间：2013-02-08T10:28:32.940
> 
> 标签：iphone, accelerometer, distance, cllocationmanager, cllocation

我正在创建一个基于导航的 iPhone 应用程序。我想计算用户移动的距离和速度。现在我正在使用`CLLocationManager`这个。但它没有那么准确。我正在用 api 计算距离`distanceFromLocation:`。然后除以时间来计算速度。的`CLLocation`属性`speed`不准确。是否可以使用加速度计找到距离和速度。
请让我知道在我的情况下必须使用哪种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:17:11.977

幸运的是，情况比你说的要好得多，我已经完成了你在我的应用程序中完成的所有任务：

只要超过 5-7 公里/小时，至少 1 公里/小时，在更高的速度上，0.1 公里/小时，速度是准确的

如果您在车辆静止时过滤掉，距离是准确的。准确度 = 1%（100 m in 12km）使用最大定位准确度（BestForMavigation 或 Best）以获得最佳结果。

陀螺和加速器是相对测量，它们不适合更远的距离，但可以在低速或静止的情况下支持GPS。

对于车辆运动，这一切都是准确的，而不是复杂的。
对于步行，它变得更加困难，您必须编写过滤器来过滤掉一些位置，然后再使用它们来测量距离。

# oop - 如何使用 Spring Roo 创建一个扩展需要类型参数的类的类？

> ID：14770504
> 
> 赞同：1
> 
> 时间：2013-02-08T10:29:05.497
> 
> 标签：oop, generics, spring-roo, type-parameter

例如，org.springframework.data.jpa.domain.AbstractPersistable 需要公钥的类型。我试过这样的事情：

```
roo> entity jpa --class ~.model.Foo --extends org.springframework.data.jpa.domain.AbstractPersistable<Long> 
```

但他们只是给出错误，例如：

```
java.lang.IllegalArgumentException: Failed to convert 'org.springframework.data.jpa.domain.AbstractPersistable<Long>' to type JavaType for option 'extends' Illegal name 'org.springframework.data.jpa.domain.AbstractPersistable<Long>' (illegal character) 
```

我可以通过创建一个新类 Bar 来规避这个问题（需要提供类型参数）。

```
class Bar extends org.springframework.data.jpa.domain.AbstractPersistable<Long> {} 
```

并让 Foo 扩展 Bar。

```
roo> entity jpa --class ~.model.Foo --extends ~.model.Bar 
```

但是我会失去类型参数的所有好处。

上述问题是否存在可行的解决方案？如果是这样，那会是什么？

顺便说一句：在理想的世界中，我希望我的域类扩展以下 AbstractAuditableEntity。

```
public abstract class AbstractAuditableEntity<U, PK extends java.io.Serializable> 
    extends org.springframework.data.jpa.domain.AbstractPersistable<PK> 
    implements org.springframework.data.domain.Auditable<U, PK> {
// some private fields, setters and getters...
} 
```

# php - Symfony2 和 Doctrine：如何为同一个 id 获取两个不同的对象？

> ID：14770507
> 
> 赞同：6
> 
> 时间：2013-02-08T10:29:20.130
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

我有这种情况：

*   对象 A 对其他对象 B、C、D 有一些引用
*   对象 B 对其他对象 A、F、G 有一些引用
*   对象 C 对其他对象 A 有一些引用，...

等等。

在我的代码中，出于 tmp 的原因，我需要制作一个对象（比如 A）的“副本”（不，我不能使用不同的结构，我需要一个对象的副本）。

如果我使用`clone`，显然，我会克隆我的对象，但与他相关的对象不会被克隆。
我完全知道我可以重写魔术方法`__clone()`，以便分配给 - 从 A 对象的角度来看 - B、C、D 作为对象本身的克隆，但是我有很多对象（其中许多对象包含在`ArrayCollection`Doctrine 中目的），我宁愿避免覆盖每个对象的克隆函数。

或者，我认为我可以通过这种方式从教义中重新获取一个对象来制作一个新对象：

```
$aCopy = $this->entity_manager
                       ->getRepository('MyBundle:A')
                       ->find($a->getId()); 
```

`$a`的一个实例在哪里`class A`

完成此操作后——*这当然是“错误的”，因为我怀疑教义会将该对象标记为“已获取”并返回其指针（*）*——我只需使用`spl_object_hash()`函数打印我的两个对象的 ID，当然还有，它们引用相同的对象 ID，因此指向相同的对象。

### PS：

我不能使用教义`detach()`功能，因为我需要在此操作后使原始对象可用

# 问题

我该如何解决这种情况？如您所见，我尝试了两种不同的方法，但没有一种让我满意。

## 笔记

我也标记了 php，因为如果有人可以向我指出不同的解决方案，基于 php-pure，我也会考虑它

(*)

> 在这种情况下，从实体管理器访问文章两次，但在两者之间进行了修改。Doctrine 2 意识到了这一点，并且只会让您访问 ID 为 1234 的文章的一个实例，无论您多久从 EntityManager 检索它，甚至无论您使用哪种查询方法（查找、存储库查找器或DQL)。这称为“身份映射”模式，这意味着 Doctrine 保留每个 PHP 请求检索到的每个实体和 id 的映射，并不断返回相同的实例。

这证实了我之前所说的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:14:48.120

答案没有我预期的那么复杂。

似乎足够的调用`$this->entity_manager->clear();`将清除此实体映射并强制它从数据库重新加载到一个全新的对象中！

```
$this->entity_manager->clear();
$aCopy = $this->entity_manager
                       ->getRepository('MyBundle:A')
                       ->find($a->getId());
            $this->logger->debug('Original Obj: '.spl_object_hash($a));
            $this->logger->debug('Copied Obj:      '.spl_object_hash($aCopy)); 
```

这将打印

> [2013-02-08 12:07:20] app.DEBUG：原始 Obj：000000006523 **645c** 000000004b1160d1 [] [] [2013-02-08 12:07:20] app.DEBUG：复制的 Obj：000000006500046e3 **00001** ] []

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:17:05.163

据我所知，这不是开箱即用的受支持的 D2 行为，所以我想说您需要自己实现克隆操作。

话虽如此，我也不是 100% 确定如果你序列化然后反序列化 D2 实体会发生什么，这可能会做你想要的（尽管以一种相当不愉快的方式）。此外，您*可以*在最初获取实体之后，分离您立即收到的内容并在对“实时”副本的任何引用传播到原始实例化点之外之前再次重新获取结果（如果查询使用结果缓存这不应该带来太多的惩罚）。但是，大概这不会是一个大问题，因为您只是暂时使用副本。

WRT 清除实体管理器，它将分离*所有*托管实体，这很可能会产生不良的副作用。

HTH。

# perl - 如何运行 perl xt 测试？

> ID：14770511
> 
> 赞同：6
> 
> 时间：2013-02-08T10:29:31.330
> 
> 标签：perl, xt, perl-prove

最近，Perl 世界出现了新的伟大事物。很长一段时间，在库包中都有`t`包含测试的文件夹。现在多了一个`xt`包含作者测试的文件夹。在库安装过程中不需要这些`xt`测试，但它可以帮助库自动确保代码很棒。

`prove`Perl 附带了一个运行测试的脚本。如果您 `prove`不带参数运行，则将执行文件夹“t”中的所有测试。如果你想同时运行`t`并`xt`测试你应该写：

```
prove xt t 
```

可以将`.proverc`参数 ( `xt t`) 添加到配置文件文件中。然后，当您`prove`不带参数运行时，它们将从文件中获取，并执行两个文件夹中的测试。

但问题来了。如果您`xt t`的文件中有`.proverc`文件，则不能只将文件名作为参数传递给`prove`. 如果您说 `prove t/00-load.t`它将执行两个文件夹中的所有测试，因为它从配置文件中获取参数。你需要写`prove --norc t/00-load.t`。但这似乎很难看。

你如何运行你的`xt`测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T13:58:27.413

默认情况下不应运行作者测试 - 您不希望 CPAN 安装失败，因为您的某些 POD 语法错误。理想情况下，它们应该在特别要求时在发布时运行。

有关涉及 Module::Build 的方法，请参阅[http://elliotlovesperl.com/2009/11/24/explicitly-running-author-tests/](http://elliotlovesperl.com/2009/11/24/explicitly-running-author-tests/)。

我有时使用[Dist::Zilla](http://search.cpan.org/perldoc?Dist%3a%3aZilla)，它默认处理作者测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T11:54:23.630

我加

```
package MY;
sub depend {
  "
xtest :: test
    \$(MAKE) test TEST_FILES=xt/*.t
"
} 
```

到`Makefile.PL`. 这将运行法线测试，然后是`xt`测试。

# sql-server-2008 - 需要使用 openrowset 的单行结果

> ID：14770512
> 
> 赞同：0
> 
> 时间：2013-02-08T10:29:40.777
> 
> 标签：sql-server-2008, stored-procedures, openxml, openrowset

我有一个带有图像标签的 xml，其中有 12 个 URL 标签。

我已经编写了这个查询来从 xml 中获取结果。

**酒店.xml 文件：**

```
<images>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
  <url></url>
 </images> 
```

**这是我的代码：**

```
CREATE  TABLE #WorkingTable ( Data XML )
INSERT  INTO #WorkingTable
        SELECT  *
        FROM    OPENROWSET(BULK 'd:\hotels.xml', SINGLE_BLOB) AS data

DECLARE @XML AS XML ,
    @hDoc AS INT

SELECT  @XML = Data
FROM    #WorkingTable

EXEC sp_xml_preparedocument @hDoc OUTPUT, @XML

declare @tmp varchar(MAX)
SET @tmp = ''

SELECT  pref.value('(hotel_ref/text())[1]','varchar(400)')AS hotel_ref,  
sref.value('(text())[1]', 'varchar(400)')+ ';' 
FROM        #WorkingTable CROSS APPLY
  Data.nodes('//hotels/hotel') AS hotel(pref)
  CROSS APPLY
  pref.nodes('images/url') AS images(sref) 

EXEC sp_xml_removedocument @hDoc

DROP TABLE #WorkingTable 
```

我的问题是它返回 12 rows 。我需要用逗号分隔 URL 值。怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:39:34.280

您不需要临时表，也不需要调用`sp_xml*`.

像这样加载您的 XML。

```
declare @XML xml
set @XML = 
  (
  select *
  from openrowset(bulk 'd:\hotels.xml', single_blob) as data  
  ) 
```

您提供的 XML 与您正在使用的查询不匹配。
这是在您的问题中使用 XML 构建逗号分隔字符串的内容。

```
select
  (
  select ', '+T.N.value('text()[1]', 'varchar(400)')
  from @XML.nodes('images/url') as T(N)
  for xml path(''), type
  ).value('substring(text()[1], 3)', 'varchar(max)') 
```

# mysql - 内存泄漏 vc++ 和 mysql (my_thr_init.c)

> ID：14770513
> 
> 赞同：0
> 
> 时间：2013-02-08T10:29:42.750
> 
> 标签：mysql, visual-c++, memory-leaks

我的 VC++ 程序（使用 MS VS2008 构建）中存在内存泄漏。这是一个连接到 MySql DB 服务器（mysql ver 5.5.25a-log）的小型测试应用程序。该应用程序正在使用 mysql c 连接器版本。6.0.2。（与 'mysqlclient.lib' 链接），它的工作原理只是找到但有 124 字节的内存泄漏。可视泄漏检测器的调用堆栈将其跟踪到“my_thr_init.c”文件。我的代码：

```
MYSQL realData;
MYSQL *myData=NULL;

//this is done in InitInstance
    myData = mysql_init(&realData);
    if ( mysql_real_connect( myData, ip_addr, user, pwd, NULL,0,NULL,0))
    {
        AfxMessageBox(_T("Connected!"));
    }
    else {
        AfxMessageBox(mysql_error(myData));
    }

//and this is done in ExitInctance
    if(myData!=NULL)  {
        TRACE("ExitInstance  - closing myData\n");
        mysql_close( myData );
        mysql_library_end();
        myData=NULL;
    } 
```

当应用程序关闭时，这是来自输出窗口：

```
 ...
ExitInstance  - closing myData
    Detected memory leaks!
    Dumping objects ->
    {2720} normal block at 0x05AAB830, 124 bytes long.
     Data: <        0;+     > 02 00 00 00 00 00 00 00 30 3B 2B 01 FF FF FF FF 
    Object dump complete.
    The thread 'Win32 Thread' (0x98c) has exited with code 0 (0x0).
    The thread 'Win32 Thread' (0x828) has exited with code 0 (0x0).
    The thread 'Win32 Thread' (0x424) has exited with code 0 (0x0).
    The thread 'Win32 Thread' (0xb6c) has exited with code 0 (0x0).
    The thread 'Win32 Thread' (0xdcc) has exited with code 0 (0x0).
    WARNING: Visual Leak Detector detected memory leaks!
    ---------- Block 2711 at 0x05AAB830: 124 bytes ----------
      Call Stack:
        g:\bs\connector-c-vs2008-32bit\src\mysql-connector-c-6.0.2\mysys\my_thr_init.c (330): HCCAdmin.exe!my_thread_init + 0x9 bytes
        f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\thrdcore.cpp (109): HCCAdmin.exe!_AfxThreadEntry + 0xF bytes
        f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c (348): HCCAdmin.exe!_callthreadstartex + 0xF bytes
        f:\dd\vctools\crt_bld\self_x86\crt\src\threadex.c (331): HCCAdmin.exe!_threadstartex
        0x74AD33AA (File and line number not available): kernel32.dll!BaseThreadInitThunk + 0x12 bytes
        0x77139EF2 (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0x63 bytes
        0x77139EC5 (File and line number not available): ntdll.dll!RtlInitializeExceptionChain + 0x36 bytes
      Data:
        02 00 00 00    00 00 00 00    30 3B 2B 01    FF FF FF FF     ........ 0;+.....
        00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
        00 00 00 00    DC 01 00 00    E4 01 00 00    F0 01 00 00     ........ ........
        F8 3A 2B 01    FF FF FF FF    00 00 00 00    00 00 00 00     .:+..... ........
        00 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
        34 0C 00 00    01 00 00 00    00 00 00 00    00 00 00 00     4....... ........
        01 00 00 00    00 00 00 00    00 00 00 00    00 00 00 00     ........ ........
        00 00 00 00    3C F7 4A 06    00 00 00 00                    ....<.J. ........

    Visual Leak Detector detected 1 memory leak (10178 bytes).
    Largest number used: 219192 bytes.
    Total allocations: 2113741 bytes.
    Visual Leak Detector is now exiting. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:39:47.340

这是故意的，请参阅[MySQL C Api 参考页面](http://dev.mysql.com/doc/refman/5.1/en/c-api-function-overview.html)：

> 调用 mysql_library_init() 和 mysql_library_end() 的目的是提供 MySQL 库的正确初始化和最终确定。对于与客户端库链接的应用程序，它们提供了改进的内存管理。如果你不调用 mysql_library_end()，一块内存仍然被分配。（这不会增加应用程序使用的内存量，但一些内存泄漏检测器会抱怨它。）对于与嵌入式服务器链接的应用程序，这些调用启动和停止服务器。

应该正确释放使用的`mysql_library_end`内存，而最初显示为“泄漏”。bugs.mysql.com 上也有[很多](http://bugs.mysql.com/bug.php?id=11014) 关于此的[错误提交。](http://bugs.mysql.com/bug.php?id=7619)

# authentication - 我发布后 Azure ACS 身份验证不起作用

> ID：14770515
> 
> 赞同：0
> 
> 时间：2013-02-08T10:29:51.173
> 
> 标签：authentication, azure, cloud, acs

我为我们的应用程序配置了谷歌登录。但是我再次需要你的帮助，我可以让它在本地工作，但在我部署它之后就不行了。

为了给你更多的细节，我要部署的是：

我在依赖方应用程序中配置了一个新实例，其中包含指向

> [http://blabla.cloudapp.net/](http://blabla.cloudapp.net/)

其他一切我保持不变。

然后我转到我的应用程序中的 webconfig 并更改领域代码：

```
<audienceUris>
    <add value="http://127.0.0.1:81/" />
    <add value="http://blabla.cloudapp.net/" />
  </audienceUris>
  <federatedAuthentication>
    <wsFederation passiveRedirectEnabled="true" issuer="https://blabla.accesscontrol.windows.net/v2/wsfederation" realm=" http://blabla.cloudapp.net/" requireHttps="false" />
    <cookieHandler requireSsl="false" />
  </federatedAuthentication> 
```

我将所有引用设置为本地副本并运行发布。如果我现在转到我的云站点，我会注意到实际上没有发生任何身份验证。好像只是略过

我尝试登录虚拟机并查看是否发生任何事情，但我什么也没看到。如果我转到位于 VM 上的 web.config，我只会在里面看到这段代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <machineKey decryption="AES" decryptionKey="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF" validation="SHA1" validationKey="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF" />
    </system.web>
</configuration> 
```

（钥匙当然不是原件）

我还有其他选择吗？我真的不明白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:37:37.700

首先，`realm`在 ACS 的 Relying Party 端进行配置。如果您`realm`在 web.config 中设置，这与`realm`在 ACS 中配置的依赖方应用程序中的设置不同，您的设置将无法正常工作！

其次，您的 web.config 中有一个额外的空间，正好在`realm`属性处，它是：

> 领域=" [http://blabla.cloudapp.net/](http://blabla.cloudapp.net/) "

但应该是

> 领域="http://blabla.cloudapp.net/"

请注意您之前的额外空白`http://...`

确保`realm`在 web.config 和 Relying Party 应用程序中具有相同的值！

一个建议 - 提供准确的 ACS 错误，这样我们就有更好的机会帮助您！

# opencv - 半全局块匹配

> ID：14770516
> 
> 赞同：2
> 
> 时间：2013-02-08T10:29:53.297
> 
> 标签：opencv, matching, stereo-3d

我正在研究opencv的半全局块匹配。事实上，我不明白为什么我们需要浏览所有方向来计算成本聚合？有没有人试图限制这条路径（扫描线）的长度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T18:40:41.313

The cost aggregation involves searching in multiple directions to enforce a global smoothness constraint on your solution. Without these constraints the disparity for each pixel is computed without consideration of the estimated disparity of its neighbors and the result will typically contain a lot of 'noise' as the matching process will return many false positives.

By assuming that the observed surfaces are quite smooth you can penalize disparity shifts by setting an additional cost of assigning a depth to a pixel if it doesn't agree with its neighbors. Loosely, this means that when you try to estimate a depth and have several possible matches, you will probably choose the match which agrees closely with the depth estimates of the neighboring pixels. Searching in more directions increases the number of neighbors you consider in your cost calculation and will generally increase the

OpenCV doesn't provide a method of reducing the length of this search path but if you want the algorithm to run more quickly you can either disable some of the directions, only searching 5 paths instead of 8 (this is performed by setting the argument fullDP to false) or by reducing the disparity search range.

# c# - 如何从 jpg 图像加载纹理并将其显示为背景？

> ID：14770527
> 
> 赞同：0
> 
> 时间：2013-02-08T10:30:21.803
> 
> 标签：c#, opengl, tao-framework

我正在制作一个简单的 3d 程序，现在我需要插入一个 2D 图像作为背景。我需要在大学使用 tao 框架。这是代码的一部分。如何将图像加载到`int`数组中？

```
Gl.glEnable(Gl.GL_TEXTURE_2D);

int texture;        // storage for texture for one picture
texture = ????? ;
Gl.glGenTextures(1, texture); ??????

                                // Create The Texture

  // Typical Texture Generation Using Data From The Bitmap
Gl.glBindTexture(Gl.GL_TEXTURE_2D, texture);
Gl.glTexParameteri(Gl.GL_TEXTURE_2D, Gl.GL_TEXTURE_MIN_FILTER, Gl.GL_LINEAR);       // Linear Filtering
Gl.glTexParameteri(Gl.GL_TEXTURE_2D, Gl.GL_TEXTURE_MAG_FILTER, Gl.GL_LINEAR); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:56:58.840

纹理本身不是一个 int 数组。`int texture`只是纹理的一个不确定标识符 - 通常第一个创建的纹理的 id = 0，第二个 id = 1 等（它取决于驱动程序 - id 在您的系统上可能完全不同）

要指定二维纹理图像，您必须使用`Gl.glTexImage2D(...)`

```
Gl.glBindTexture(Gl.GL_TEXTURE_2D, texture);

// some random data
Random r = new Random(); 
byte[] image = new byte[512 * 512 * 3]; 
for (int i = 0; i < 512 * 512; i++) 
{ 
       image[i * 3 + 0] = (byte)r.Next(0, 255); 
       image[i * 3 + 1] = (byte)r.Next(0, 255); 
       image[i * 3 + 2] = (byte)r.Next(0, 255); 
} 

Gl.glTexImage2D(Gl.GL_TEXTURE_2D, 0, Gl.GL_RGB, 512, 512, 0, 
                Gl.GL_BGR_EXT, Gl.GL_UNSIGNED_BYTE, image); 
```

除了使用随机数据，您还可以将图像转换为字节数组，如此[处所述](https://stackoverflow.com/questions/7350679/convert-a-bitmap-into-a-byte-array-in-c)

# c - 从目录中读取多个文件？

> ID：14770548
> 
> 赞同：6
> 
> 时间：2013-02-08T10:30:57.937
> 
> 标签：c

我很难从与 exe 不同的文件夹中的目录打开文件。我设法读取了一个文件。但是如何使用程序读取目录中存在的多个文件。

用于单个文件处理的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    FILE *fp, *tp, *tl;
    char str_buff[1024] = { FALSE };
    char str[125];
    char strlengths[MAX_NO_OF_STRINGS]= { FALSE };
    //int Result;
    //int string_startflag = FALSE;
    int string_cntr = FALSE,i = 0, n = 0;

    fp = fopen("D:/folder/language/stringEnglish.h", "r");
    tp = fopen("New Text Document.txt", "w"); // open the file to Write
    tl = fopen("New Length Document.txt", "w"); // open the file to Write lengths

    while (NULL != fgets(str_buff, sizeof(str_buff), fp))
    {
        sscanf(str_buff, "%*[^\"]%*c%[^\"]%*c%*[^\n]%*c", str);

        //printf("%s\n", str);

        if (string_cntr > 6)
        {
            if (string_cntr<= MAX_NO_OF_STRINGS)
            {
                fprintf(tp, "%s\n", str);
                strlengths[i] = strlen(str);
                i++;
            }
        }
        string_cntr++;
    }

    for(n=0;n<(MAX_NO_OF_STRINGS-6);n++)
    {
        fprintf(tl,"%d\n",strlengths[n]);
    }

    fclose(fp);
    fclose(tp);
    fclose(tl);

    return 0;
} 
```

所以我能够处理文件来解析文件中的变量并获取字符串的长度。问题是如何打开多个文件我在文件夹语言中的文件名如下：

```
stringItalian.h,stringLatvian.h,stringSlovakian.h,stringSlovenian.h,stringSpanish.h,stringSwedish.h,stringTurkish.h,stringUkrainian.h 
```

如何循环打开这些名称的文件？

还有什么方法可以`D:/folder/language`以一般方式给出文件夹的路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:36:32.260

您可以将路径作为命令行参数传递到您的程序中，`argv[1]`如果它是第一个参数，则从中读取其值，然后遍历您要读取的不同文件：

```
int main(int argc, char* argv[])
{
    ...
    const char* files[] = {"stringItalian.h", "stringLatvian.h",
                           "stringSlovakian.h", "stringSlovenian.h",
                           "stringSpanish.h", "stringSwedish.h",
                           "stringTurkish.h", "stringUkrainian.h"};
    int i;
    char fullpath[256];

    for (i=0; i<sizeof(files)/sizeof(files[0]); i++) {
        strcpy(fullpath, argv[1]);
        strcat(fullpath, files[i]);
        fp = fopen(fullpath, "r"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:37:59.750

我建议首先将文件的实际解析放入一个单独的函数中，这样您就可以只使用文件名调用该函数。

最简单的方法是创建一个包含文件名的表，然后循环遍历该表，将文件名提供给您刚刚创建的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:41:08.253

您可以通过将功能放入函数中来重写程序，例如 processFile(char *fileName)，然后使用完整路径文件名调用该函数，例如

```
processFile("D:/folder/language/stringEnglish.h");
processFile("D:/folder/language/stringItalian.h"); 
```

您还可以将要处理的文件名放入文件中并重写程序以遍历该文件中的行并使用它找到的文件名调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:47:56.537

正如 simonc 所说，您可以通过提供 .h 的路径`argv`，但问题是这仍然需要您在编译时知道 .h 的名称。

I assume that you want to loop over **all .h's in a directory**. There are libraries that let you do this cross-platform (search for these keywords), or you can do it dep on your OS:

*   Linux: -> [dirent](http://pubs.opengroup.org/onlinepubs/007908799/xsh/dirent.h.html)

*   Windows: FindFirstFile FindNextFile -> [msdn](http://www.msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)

    (or, a little hackish but maybe a lot easier for you: first use system() to dir/ls *.h into a .txt file, then read that)

# c# - Windows Azure 角色实例的启动时间比预期的要长

> ID：14770551
> 
> 赞同：1
> 
> 时间：2013-02-08T10:31:15.157
> 
> 标签：c#, asp.net, azure

在调试模式和不调试的情况下启动我的项目时，我收到一条消息，通知我角色实例的启动时间比预期的要长。

我已经看到许多线程发布它是角色中的代码问题，但代码在我的同事机器上运行良好。

以下是来自模拟器 UI 的诊断信息：

```
[Diagnostics] Information: Diagnostic process exited with code: 0
[Diagnostics] Information: C:\Users\ashleyrobinson\AppData\Local\dftmp\Resources\731ee61a-70ac-4811-8c9b-279ef76ae10a\directory\DiagnosticStore\Monitor
[Diagnostics] Information: C:\DUOSAzure\src\Projects\CloudUniformOrderingSystem\csx\Debug\roles\CloudService\diagnostics\x64\monitor\MonAgentHost.exe -LocalPath "C:\Users\ashleyrobinson\AppData\Local\dftmp\Resources\731ee61a-70ac-4811-8c9b-279ef76ae10a\directory\DiagnosticStore\Monitor" -StaticConfigFile "C:\Users\ashleyrobinson\AppData\Local\dftmp\Resources\731ee61a-70ac-4811-8c9b-279ef76ae10a\directory\DiagnosticStore\Monitor\Configuration\mastaticconfig.xml" -ConfigFile "C:\Users\ashleyrobinson\AppData\Local\dftmp\Resources\731ee61a-70ac-4811-8c9b-279ef76ae10a\directory\DiagnosticStore\Monitor\Configuration\maconfig.xml" -ShutDownEvent WADDM-ShutDown 66692520bb0a4ef8b40be2a6b222be3f -InitializedEvent WADM-StartUp-66692520bb0a4ef8b40be2a6b222be3f -parent 9640 -events
[MonAgentHost] Output: Agent will exit when WADDM-ShutDown-66692520bb0a4ef8b40be2a6b222be3f is signaled.
[MonAgentHost] Output: Will signal WADM-StartUp-66692520bb0a4ef8b40be2a6b222be3f after the agent is initialized.
[MonAgentHost] Output: Registered as an event consumer.
[MonAgentHost] Output: Agent will exit when parent process 9640 exits.
[MonAgentHost] Output: Monitoring Agent Started
[Diagnostics]: Starting configuration channel polling
[MonAgentHost] Error: MA EVENT: 2013-02-08T10:21:45.552Z
[MonAgentHost] Error:     2
[MonAgentHost] Error:     12384
[MonAgentHost] Error:     12524
[MonAgentHost] Error:     NetTransport
[MonAgentHost] Error:     0
[MonAgentHost] Error:     ec0e0567-0246-43a7-b302-95ab15b
[MonAgentHost] Error:     netutils.cpp
[MonAgentHost] Error:     OpenHttpSession
[MonAgentHost] Error:     749
[MonAgentHost] Error:     0
[MonAgentHost] Error:     2f87
[MonAgentHost] Error:     
[MonAgentHost] Error:     WinHttpGetProxyForUrl(http://127.0.0.1) failed ERROR_INTERNET_UNABLE_TO_DOWNLOAD_SCRIPT (12167)
[Diagnostics]: Checking for configuration updates 08/02/2013 10:22:16. 
```

我正在使用 1.8 SDK。

任何人都可以破译导致问题的原因。

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:48:43.333

我不知道是什么导致了问题，但事实证明是机器。这是一个巨大的麻烦，但几天后，我将自己安装在一台新机器上，一切正常。显然有些东西阻止了我的角色启动，但我猜我在某个地方错过了一个重要的软件。

# iphone - 在 iOS 设备上同时使用前置和后置（主要和次要）摄像头

> ID：14770552
> 
> 赞同：4
> 
> 时间：2013-02-08T10:31:16.477
> 
> 标签：iphone, ios, ipad, ios4, iphone-privateapi

我想知道 iOS 设备上是否有任何功能/应用程序允许您使用前后摄像头同时捕获视频，例如分屏显示输出。然后允许合并两个视频。

是否可以通过用户设计的应用程序或通过越狱设备上的 cydia 调整来实现此功能？这个问题只是出于好奇，任何相关信息都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:12:19.990

好吧，视频录制是使用`AVCaptureSession`. 因此，您应该尝试创建其中两个，每个具有不同的输入目标。

* * *

编辑：根据[这个问题/答案](https://stackoverflow.com/questions/5427561/how-can-i-get-autofocus-to-work-in-a-second-avcapturesession-without-recreating/6079123#6079123)，不可能创建多个`AVCaptureSession`s.

# php - 在一个sql查询中连接三个表

> ID：14770554
> 
> 赞同：0
> 
> 时间：2013-02-08T10:31:21.523
> 
> 标签：php, mysql, join

我有一个包含两个表的查询，我需要再加入一个表，以便获得与订单对应的产品型号。

到目前为止我所拥有的是

```
$sql = "SELECT 
  o.order_id, 
  o.name, 
  o.value, 
  GROUP_CONCAT(o.order_id,  o.name, o.value SEPARATOR ',') AS Options 
FROM `order_option` AS o 
LEFT JOIN `order` AS oo on o.order_id = oo.order_id
where oo.order_status_id = 2 
group by o.order_id";

mysql_query("SET NAMES 'utf8'");
$result = mysql_query($sql); 
while($row = mysql_fetch_assoc($result))
 {
$options=$row['Options'];
print "$options";

    PRINT "<br>-------------------<br>";
} 
```

现在，我有第三个表，其中包含每个订单的产品型号。该表称为“order_product”，它有两个字段“order_id”和“model”（每个订单一条记录）。

我现在所拥有的结果是

ID，选项1：价值，选项2：价值

我想要完成的是

ID，型号，选项1：值，选项2：值

模型应该来自第三个表“order_product”的位置

任何建议都受到高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:35:49.743

像这样试试

```
SELECT table1.* from table1
JOIN table2 as lnk1 on table1.id = table2.tab1_id AND
JOIN table3 as lnk2 on table2.id = table3.tab2_id -->here you can use table1 as to join also 
```

但请记住，加入 bec 的层次结构可能与以前的表相关，但可能尚未加入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:36:01.217

```
$sql = "SELECT 
  o.order_id, 
  o.name, 
  o.value, 
  GROUP_CONCAT(o.order_id,  o.name, o.value SEPARATOR ',') AS Options,
  op.model 
FROM `order_option` AS o 
INNER JOIN `order` AS oo on o.order_id = oo.order_id
INNER JOIN `order_product` AS op on oo.order_id = op.order_id
where oo.order_status_id = 2 
group by o.order_id"; 
```

像那样 ？

只需对您的订单 ID 号进行额外连接，因为它链接到所有表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:38:05.547

这应该服务于目的：

```
SELECT 
o.order_id, 
order_product.model,
o.name, 
o.value, 
GROUP_CONCAT(o.order_id,  o.name, o.value SEPARATOR ',') AS Options 
FROM `order_option` AS o 
LEFT JOIN `order` AS oo on o.order_id = oo.order_id
LEFT JOIN order_product ON o.order_id = order_product.order_id
where oo.order_status_id = 2 
group by o.order_id 
```

# java - Java 创建 Unixtime 和 MySQL 重新转换？

> ID：14770562
> 
> 赞同：0
> 
> 时间：2013-02-08T10:31:58.823
> 
> 标签：java, mysql

我有一个小型 java 应用程序，可将日期导入 mysql 数据库我使用此代码转换时间：

```
Calendar cal = Calendar.getInstance();
cal.set(2012, 2, 30, 0, 0); // for 2012-03-30 00:00
unixtime = cal.getTimeInMillis();
unixtime = unixtime / 1000;
System.out.println(unixtime); // => 1333062005 
```

如果我运行：

```
SELECT FROM_UNIXTIME(1333062005) AS T1; 
```

我得到：

> 2012-03-30 01:00:05

我认为 5 秒是一些舍入差异，因为毫秒到秒。但是为什么它是 01:00 而不是 00:00 呢？

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:44:17.603

Mysql 的时区与 Java 不同。请将您的时区设置为：

```
SET time_zone = 'America/New_York'; 
```

# php - Wordpress Orderby rand 不工作

> ID：14770566
> 
> 赞同：0
> 
> 时间：2013-02-08T10:32:23.813
> 
> 标签：php, wordpress

```
remove_all_filters('posts_orderby');
$args = array(
    'post_type' => 'attachment',
    'numberposts' => 6,
    'orderby' => 'rand',
    'exclude' => get_post_thumbnail_id(),
    'post_parent' => $post->ID
); 
```

有人可以向我解释为什么该`'orderby' => 'rand'`部分不工作吗？

谢谢！

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:19:13.263

找到了。我需要添加`'order' => 'post_date',`到`$args`. 感谢@BenM 的帮助！

# iphone - 想要创建一个在我的应用程序范围内的日历

> ID：14770574
> 
> 赞同：0
> 
> 时间：2013-02-08T10:32:42.453
> 
> 标签：iphone, ios, calendar

我想在我的应用程序中使用日历模板。它不应与本机（设备）日历连接。我将从我的服务器获取/放置事件。它不应访问本机日历的事件。我只想创建一个在我的应用程序范围内的日历？我怎样才能做到这一点？有没有可用的工具？我试过 Tapku 和 Kal 。但它正在访问本机日历。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:00:44.583

这对于 iOS 提供的 API 是不可能的；您将不得不推出自己的实施。

[https://github.com/devinross/tapkulibrary](https://github.com/devinross/tapkulibrary) - TapkuLibrary 包含月视图和日视图的工具，类似于 iOS 原生日历。您必须向它提供来自您的服务器的数据。

# c# - 每层的 MVVM 角色

> ID：14770581
> 
> 赞同：5
> 
> 时间：2013-02-08T10:33:15.980
> 
> 标签：c#, wpf, vb.net, mvvm, structure

首先很惭愧自己经过这么长时间的奋斗，还是没能掌握MVVM模式的精髓，不禁要问。

我搜索并搜索了有关 MVVM 的信息，但对我来说（似乎）清楚的层只是 View 和 ViewModel 层。

所以这是我到现在为止通过一些小例子所掌握的内容，仅供参考，我正在使用 MySQL 查询来获取我的数据：

**模型**

我不清楚在这里做什么。我有这个 Employee.cs 类：

```
class Employee
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Gender { get; set; }
} 
```

我的问题：我应该在 EmployeeModel 类中进行查询以从 MySQL 数据库中获取数据吗？我读到这个[答案](https://stackoverflow.com/a/5454674/1414520)，数据访问层与 MVVM 的模型不同，而且我可以使用存储库从我的数据访问层请求员工列表。

根据那个答案，它应该是这样的：

*   Employee.cs [对象属性定义]，
*   EmployeeDataAccess.cs [负责从 MySQL 获取员工数据]
*   EmployeeRepository.cs [由 EmployeeModel 调用以从 DA 获取员工数据]
*   EmployeeModel.cs [我处理诸如验证等业务逻辑并在与 Employee.cs 几乎相同的属性上使用 INotifyPropertyChanged]
*   EmployeeViewModel.cs [EmployeeView 的数据上下文]
*   EmployeeView.cs [XAML]

所有这些都是为了一页员工列表，我做错了吗？

很抱歉这个问题很长，如果我说错了什么，我会很乐意解决它。

我现在真的一无所知，所以非常感谢任何新的观点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T10:44:40.280

好，我们来看看：

*   EmployeeDataAccess.cs 和 EmployeeRepository.cs*可能*（但不一定，请看下面）可以组合成一个类，比如获取数据并返回模型类的“EmployeeRepository”。
*   您的“EmployeeModel”实际上是一个视图模型，因此我们可以删除“EmployeeViewModel”类并将“EmployeeModel”重命名为“EmployeeViewModel”。
*   现在这一点取决于您自己的偏好，但您可以选择通用存储库而不是每个类的存储库；在这种情况下，您将拥有一个`Repository`具有所有数据模型的通用 CRUD 方法的类。

然后你最终得到：

*   每个数据模型类都有自己的视图模型和视图（每个实体 3 个类）
*   有一个存储库，可以在视图模型中调用然后映射结果，或者您可以引入另一个将在视图模型中使用的薄层，它将调用存储库并为您执行映射（模型 <==> 视图模型）一气呵成。

没那么糟糕，是吗？:)

不要过度思考，也不要过度设计您的解决方案。在一个简单的应用程序中拥有三百个不同的间接层是毫无意义的 IMO。如果应用程序增长并且有理由需要单独的层，您可以随时开发它们。

[编辑] 当然，我假设“模型”类同时是一个实体类；任何类型的 ORM，甚至是轻量级的 ORM（Dapper 都会想到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:46:45.993

好吧，您基本上已经涵盖了。通常我会将 N 层模型与 MVVM 一起使用，因此在您的情况下它将是：

*   人物概览 (xaml)
*   PersonOverviewViewModel（人物概览的视图模型）
*   BcPerson（必要时 BLL 包含业务逻辑）
*   PersonRepository（DAL 与数据库通信）

还有一个 DOMAIN 层女巫将包含 person 类。在那里，您将在所有属性上使用 NotifyPropertyChanged。

我同意这是很多文件，但它们有目的。当您想要更改层时（例如从 MySQL 迁移到 MSSQL），它们用于更好的可维护性、良好的关注点分离和灵活性。

例如，通过使用 OR 映射器，还可以生成大量管道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:12:46.270

文件

*   存储库[获取数据]
*   员工[包含姓名等数据]
*   EmployeeVM [包含您的“员工”模型]
*   EmployeeListVM[继承自 ListVM]
*   ListVM[列表的基础 ViewModle]
*   EmployeeListV[你的观点]

样本：

*   按下了一些按钮
*   `EmployeeListVM`构造函数被调用
*   问`Repository`得到`getAllEmployee()`一个`List<EmployeeVM>`
*   现在它把它交给 ListVM 属性“ItemList”

    现在您只需要显示您的视图和 bin`EmployeeListV.Datacontext`和`EmployeeListVM`

# c++ - C++ 转换图 > 进入地图 >

> ID：14770582
> 
> 赞同：2
> 
> 时间：2013-02-08T10:33:19.537
> 
> 标签：c++, map, vector, set, move

我必须像这样转换 std::map ：

```
std::map<int, std::set<int> > t_contents; 
```

在这样的地图中：

```
std::map<int, std::vector<int> > seq; 
```

我正在以这种方式进行转换：

```
std::map<int, std::set<int> >::const_iterator it;
for(it = t_contents.begin(); it != t_contents.end(); ++it)
{    
    std::move((*it).second.begin(), (*it).second.end(), 
        std::back_inserter(seq[(*it).first])
    );   
} 
```

考虑到地图包含多达 100 万个元素，每个集合也可以包含多达 10000 个元素。这是我在空间浪费和时间方面找到的最佳解决方案；有没有更好的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:41:09.400

如果您使用提示插入，性能会更好（每次插入的摊销常数）：

```
std::map<int, std::set<int> >::const_iterator it;
for (it = t_contents.begin(); it != t_contents.end(); ++it) {
    std::vector<int> &vec = seq.insert(seq.end(),
        std::make_pair(it->first, std::vector<int>()))->second;
    vec.reserve(it->second.size());
    vec.assign(it->second.begin(), it->second.end());
} 
```

用于`reserve`防止重新分配，并`vector::assign`与迭代器参数一起使用；它比`back_inserter`.

另一种方法是将向量直接放置到地图中，仍然使用提示：

```
std::map<int, std::set<int> >::const_iterator it;
for (it = t_contents.begin(); it != t_contents.end(); ++it) {
    seq.emplace_hint(seq.end(), it->first,
        std::vector<int>(it->second.begin(), it->second.end());
} 
```

请注意，不需要`move`设置元素；因为它们是原始的，所以移动与复制相同。

这可能更快或更慢，例如取决于是否`insert`检查迭代器参数之间的距离（在任何情况下它都是 O(n) 的集合大小）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T11:07:21.057

另一种选择是：

```
std::transform(t_contents.begin(), t_contents.end(), std::inserter(seq.begin()),
  [](const std::pair<const int, std::set<int>>& s) {
    std::vector<int> v;
    v.reserve(s.second.size());
    v.assign(s.second.begin(), s.second.end());
    return std::make_pair(s.first, std::move(v));
  }
); 
```

移动`int`s 是没有意义的，并且`std::set`迭代器无论如何都是 const 的，所以你不能移出集合。

就像 ecatmur 的回答一样，这得益于插入提示，因为`insert_iterator`每次`insert`对与最后一个相邻。

# powershell - 如何在 PowerShell 中获取没有扩展名的文件路径？

> ID：14770587
> 
> 赞同：13
> 
> 时间：2013-02-08T10:33:36.470
> 
> 标签：powershell

我的 powershell 2.0 脚本中的变量中有一个绝对路径。我想去掉扩展名，但保留完整的路径和文件名。最简单的方法是什么？

所以如果我有`C:\Temp\MyFolder\mytextfile.fake.ext.txt`一个名为的变量，比如说`$file`

我想回来

`C:\Temp\MyFolder\mytextfile.fake.ext`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-08T10:37:23.457

if 是一个`[string]`类型：

```
 $file.Substring(0, $file.LastIndexOf('.')) 
```

if 是一个`[system.io.fileinfo]`类型：

```
join-path $File.DirectoryName  $file.BaseName 
```

或者你可以投射它：

```
join-path ([system.io.fileinfo]$File).DirectoryName  ([system.io.fileinfo]$file).BaseName 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-12-22T16:45:56.953

这是我喜欢的最佳方式和其他示例：

```
`$FileNamePath
(Get-Item $FileNamePath ).Extension
(Get-Item $FileNamePath ).Basename
(Get-Item $FileNamePath ).Name
(Get-Item $FileNamePath ).DirectoryName
(Get-Item $FileNamePath ).FullName` 
```

 `* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-08T10:40:12.300

```
# the path
$file = 'C:\Temp\MyFolder\mytextfile.fake.ext.txt'

# using regular expression
$file -replace '\.[^.\\/]+$'

# or using System.IO.Path (too verbose but useful to know)
Join-Path ([System.IO.Path]::GetDirectoryName($file)) ([System.IO.Path]::GetFileNameWithoutExtension($file)) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-25T20:02:22.413

您应该使用简单的 .NET 框架方法，而不是将路径部分拼凑在一起或进行替换。

```
PS> [System.IO.Path]::GetFileNameWithoutExtension($file) 
```

[https://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension%28v=vs.110%29.aspx](https://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension%28v=vs.110%29.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-01T15:06:32.640

不管`$file`是`string`或`FileInfo`对象：

```
(Get-Item $file).BaseName 
````

# php - 从 rss 提要获取图片网址？

> ID：14770592
> 
> 赞同：0
> 
> 时间：2013-02-08T10:33:50.523
> 
> 标签：php, regex, rss

我需要从此 rss 提要中获取图片网址。我正在使用 dom 文档获取数据

```
<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
  <channel>
    <title><![CDATA[Accessories]]></title>
    <link>http://abcde.com/accessories</link>
    <description><![CDATA[Accessories]]></description>
    <pubDate>Fri, 08 Feb 2013 10:16:45 +0000</pubDate>
    <generator>Zend_Feed</generator>
    <docs>http://blogs.law.harvard.edu/tech/rss</docs>
    <item>
      <title><![CDATA[Jabra HALO 2 JBRA2113 Wireless Headset]]></title>
      <link>http://abcde.com/accessories/jabra-halo-2-jbra2113-wireless-headset</link>
      <description><![CDATA[<table><tr><td><a href="http://abcde.com/accessories/jabra-halo-2-jbra2113-wireless-headset"><img src="http://abcde.com/media/catalog/product/cache/1/thumbnail/75x75/9df78eab33525d08d6e5fb8d27136e95/h/a/halo2_frontview_1440x810.jpg" border="0" align="left" height="75" width="75"></a></td><td  style="text-decoration:none;">

    <div class="price-box">
                                                            <span class="regular-price" id="product-price-1041"><span class="price">Rs. 6,499.00</span></span>

        </div>

</td></tr></table>]]></description>
      <pubDate>Fri, 08 Feb 2013 10:16:45 +0000</pubDate>
    </item>

  </channel>
</rss> 
```

预期输出：

[http://abcde.com/media/catalog/product/cache/1/thumbnail/75x75/9df78eab33525d08d6e5fb8d27136e95/h/a/halo2_frontview_1440x810.jpg](http://abcde.com/media/catalog/product/cache/1/thumbnail/75x75/9df78eab33525d08d6e5fb8d27136e95/h/a/halo2_frontview_1440x810.jpg)

现在我得到这样的细节......

```
$doc = new DOMDocument();
$doc->load('http://feeds.gawker.com/lifehacker/full');
$arrFeeds = array();
foreach ($doc->getElementsByTagName('item') as $node) {

$a = $node->getElementsByTagName('title')->item(0)->nodeValue;
$a = $node->getElementsByTagName('image')->item(0)->nodeValue;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:36:17.510

也许你只想得到 img src-s：

```
"#<img[^>]+src=[\"|']([^\"]*)[\"|']#" 
```

所以这个例子是

```
preg_replace_callback("#<img[^>]+src=[\"|']([^\"]*)[\"|']#",function($matches){print_r($matches[1]);return $matches[0];},' '.$STR.' '); 
```

# vim - 在 VIM 中显示每个函数的行号

> ID：14770596
> 
> 赞同：0
> 
> 时间：2013-02-08T10:34:05.377
> 
> 标签：vim, vi

例如，考虑我有一个具有两个功能的简单程序。因此，如果我确实设置了 nu 命令，它将给出输出为

```
1 #include <stdio.h>
2
3 int main ()
4 {
5      printf ("main");
6      return 0;
7 }
8 int func_a()
9 {
10     printf("func_a");
11     return 0;
12 }
13 int func_b()
14 {
15     printf("func_b");
16     return 0;
17 } 
```

VI中是否有任何命令使我得到以下显示，即显示总行数+每个函数的行数。

```
 1 #include <stdio.h>
  2
  3  int main ()
  4 1 {
  5 2     printf("main");
  6 3     return 0;
  7 4 }
  8  int func_a()
  9 1 {
 10 2     printf("func_a");
 11 3     return 0;
 12 4 }
 13  int func_b()
 14 1 {
 15 2     printf("func_b");
 16 3     return 0;
 17 4 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:53:07.373

你应该考虑折叠。

```
:help folds 
```

您的示例使用折叠将如下所示：

![vim 折叠示例](../Images/428f1a378ae051435accd539b4da9951.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:07:59.630

不，没有。但是你可能会误用*符号列*来得到这样的东西。Dr. Chip 的[RltvNmbr 插件](http://www.drchip.org/astronaut/vim/index.html#RLTVNMBR)重新实现了`'relativenumber'`带有符号的功能。您也许可以利用他的一些实施，但这仍然是一项主要的实施工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:48:25.143

我认为没有本地方法可以做到这一点。

如果它适合您的用例，您可以尝试`:set rnu`（或以长形式）。`:set relativenumber`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:48:36.107

不，这是不可能的。另外，如果可能的话，我怀疑它会计算大括号。

这样的功能有什么意义？

# android - Google Map v2 getWidth（以像素为单位）

> ID：14770597
> 
> 赞同：2
> 
> 时间：2013-02-08T10:34:07.140
> 
> 标签：android, google-maps, width

我只是将我的应用程序升级到 Google Maps v2，我想获得 MapFragment 或 GoogleMap 的测量宽度。这就是我想要做的。

int mapWidth = ((View)sMapFrag_v2.getMap()).getMeasuredWidth();

如何使用新的 API 做这样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T10:35:38.917

哇，那里立即偶然发现了我的答案！

```
int mapWidth =  sMapFrag_v2.getView().getMeasuredWidth() 
```

# android - onResume 后相机表面视图上的表面视图不可见

> ID：14770600
> 
> 赞同：1
> 
> 时间：2013-02-08T10:34:17.343
> 
> 标签：android, camera, surfaceview, onresume

在我的相机应用程序中，我有两个表面视图，一个用于预览相机，一个用于绘制名为 tFrame 的形状（其类型为扩展表面视图的目标框架）。一开始它可以正常工作，但是在应用程序不可见时 onResume 之后，tFrame 表面视图不可见，我只查看预览相机的视图。

这是我的代码

```
public class CameraActivity extends Activity {

private Camera mCamera;
private CameraPreview  mPreview;
public Target_Frame tFrame;
private ColorView cViewActual;
private ColorView bestMatchCView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Log.d("Function", "onCreate iniciado");
    setContentView(R.layout.camera_layout);

    tFrame=new Target_Frame(this);
    cViewActual=(ColorView)findViewById(R.id.colorViewActual);
    bestMatchCView=(ColorView)findViewById(R.id.colorViewBestMatch);

    mCamera=getCameraInstance();
    mPreview=new CameraPreview(this, mCamera,cViewActual,bestMatchCView,tFrame,colorNametextView);

    FrameLayout preview=(FrameLayout)findViewById(R.id.camera_preview);

    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
    params.gravity=Gravity.CENTER;

    tFrame.setLayoutParams(params);
    preview.addView(tFrame);//the first to put is the one on the bottom of the view
    preview.addView(mPreview);

}

/** Check if this device has a camera only if not specified in the manifest */
public boolean checkCameraHardware(Context context) {
    Log.d("Function", "checkCameraHardware iniciado");
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
        // this device has a camera
        return true;
    } else {
        // no camera on this device
        return false;
    }
}

/** A safe way to get an instance of the Camera object. */
public static Camera getCameraInstance(){
    Log.d("Function", "getCameraInstance iniciado");
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
}

/**Check if the device has flash*/
public boolean checkFlash(Context context){
    Log.d("Function", "checkFlash iniciado");
    if(context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)){
        //the device has flash
        return true;
    }else{
        //no flash
        return false;
    }

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Log.d("Function", "onDestroy CameraActivity iniciado");
    releaseCamera();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    Log.d("Function", "onPause CameraActivity iniciado");
    releaseCamera();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    Log.d("Function", "onResume CameraActivity iniciado");
    //Test if i have to put all this code like in onCreate
    if(mCamera!=null){
        return;
    }
    mCamera=getCameraInstance();

    //if(mPreview!=null){
    //  return;
    //}

    mPreview=new CameraPreview(this, mCamera,cViewActual,bestMatchCView,tFrame,colorNametextView);
    FrameLayout preview=(FrameLayout)findViewById(R.id.camera_preview);
    preview.addView(mPreview);

}

private void releaseCamera(){
    Log.d("Function", "releaseCamera iniciado");
    if (mCamera != null){
        mCamera.setPreviewCallback(null);
        mCamera.release();        // release the camera for other applications
        mCamera = null;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:26:55.057

最后我删除了第二个表面视图，因为我在 android 文档中读到表面视图不能与另一个表面视图一起使用

# unity3d - 如何使播放器的转动仅发生在unity3d的边缘或所需位置？

> ID：14770601
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:34:17.880
> 
> 标签：unity3d, rotation

我正在尝试制作一个玩家跑来收集硬币的游戏。我在这里面临的问题是玩家左右转。我希望玩家只在特定的地方而不是任何地方转弯。我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:38:58.063

如果我理解正确，您希望玩家只向前移动，直到他们到达特定点，之后他们可以选择转弯。

您可以通过脚本限制玩家的移动来实现这一点（例如，让他们只沿着 Z 轴移动）并且只允许他们在到达特定点时转动。

您可以通过在该点上放置一个对撞机（并将其设置为 Trigger）来检测玩家是否到达该点，然后在脚本中进行处理。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T22:43:27.370

你想做Temple Run这样的事情吗？

让角色跑起来。角色的控制器应该禁用“右转/左转”。在每个路径交叉点（角色应该转向一侧）上，添加一个对撞机（一个立方体）。当角色碰撞它时，您会激活右/左移动检测器。在对撞机退出时，您可以将其停用。

如果您不希望出现错误/故障，例如： 2 点击左侧，转两次，然后您只需在玩家转一次时停用标志。

如果你想要一个平滑的摄像机转动，你可以使用 Camera Scripts，并且为播放器使用 iTween（只补间 y 轴旋转 +90 -90）

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:39:35.270

如果你有地图，你可以在场景中放置空的游戏对象。攻击他们的碰撞探测器，确保他们创造大墙。如果玩家走过，则相应地切换他转弯的可能性。

虽然这是一项相当多的工作，但您可以对每一面隐形墙攻击相同的脚本。

# solr - Solr 能否保留其结果中提供给它的 HTML 文档的格式？

> ID：14770605
> 
> 赞同：0
> 
> 时间：2013-02-08T10:34:40.007
> 
> 标签：solr, solrj, apache-tika, solr-cell

如何在 Solr 给出的结果中维护 HTML 文档的原始格式？

我正在尝试在我的公司网站中提供搜索功能，该网站拥有数百万个文档并且所有文档都没有类似的格式，因此很难单独格式化每个文档。

我在 apache 站点上使用[Solr 4.1 nightly builds ，它内置了对 solr-cell 和 tika 的支持。](https://wiki.apache.org/solr/NightlyBuilds)即我不需要单独配置它们。

solr-cell 或 tika 会在任何地方保留这些格式吗？

如果它不保留格式，那么我需要使用solr 的*resourcename*字段从物理文件位置获取每个文档，并应用高亮和其他 solr 现成的功能，但是这个过程太乏味了。

编辑：如果我必须使用 Jayendra 在答案中建议的“HTMLStripCharFilterFactory”，我可以使用什么作为请求处理程序？在这种情况下我还可以提取元数据标签吗？

任何人都可以指导我这件事！

感谢你的支持。！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:56:13.317

带有 Tika 的 Solr Cell 不保持文档的原始格式。
您只能从通过 Tika 提供给 Solr 的文档中提取文本。

否则，您必须将 html 文档作为普通 Solr 字段提供并应用[HTMLStripCharFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.HTMLStripCharFilterFactory)过滤器来维护两个副本。

当stored=true 时，Solr 将使用HTML 字段维护原始文档。
但是，对于 Search (indexed=true)，搜索只会发生在 Content 上而不是 html 元素上。

# c - strdup（）不工作

> ID：14770609
> 
> 赞同：0
> 
> 时间：2013-02-08T10:34:59.987
> 
> 标签：c, string, strdup

可能这是非常基本的，每个人都会对我大喊大叫，但我已经尝试修复了几个小时，无法再忍受了。我有这个结构

```
struct node
{
Key_Type element;
tree_ptr left, right;
}; 
```

我正在尝试使用 strdup 将一个词放入元素中：

```
newNode->element = strdup(word); 
```

我知道它可能不起作用，因为我试图分配一个指向普通变量的指针，但我不知道如何解决这个问题。

```
Table insert(Key_Type word,Table root)
{ 
struct node *newNode = malloc(sizeof(struct node));
struct node *left = malloc(sizeof(struct node));
struct node *right = malloc(sizeof(struct node));
newNode = root->head;
//fprintf (stderr, "Hi\n");
while(newNode->element != NULL)
{
    //printf("%s",word);
    if(strcmp(word,newNode->element) == 0)
    {
        fprintf (stderr, "Hi\n");
        return root;
    }
    while(strcmp(word,newNode->element) == -1)
    {
        //fprintf (stderr, "Hi\n");
        newNode = newNode->left;
        //fprintf (stderr, "Hi\n");
    }//if
    //fprintf (stderr, "Hi\n");
    while(strcmp(word,newNode->element) == 1)
    {
            //fprintf (stderr, "Hi\n");
            newNode = newNode->right;
            //fprintf (stderr, "Hi\n");
    }//else if
}
//createNode(word);
newNode->element = strdup(word);
newNode->left = left;
newNode->right = right;
//fprintf (stderr, "Hi\n");
//printf("%s",root->head->element);
   return root;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:51:33.617

扩展@unwind 的答案，`strdup()`不是标准的 C 函数，仅在 POSIX 投诉系统上可用。您的系统中可能没有`strdup`实现。

这是一个可能的实现`strdup()`

```
char *strdup(const char *c)
{
    char *dup = malloc(strlen(c) + 1);

    if (dup != NULL)
       strcpy(dup, c);

    return dup;
} 
```

# jqgrid - 隐藏/显示任何列时，组标题不可见

> ID：14770610
> 
> 赞同：1
> 
> 时间：2013-02-08T10:35:01.790
> 
> 标签：jqgrid

我正在实现显示隐藏列功能并一次对标题进行分组。加载时能够很好地看到所有标题。如果我隐藏任何列，所有组标题都消失了。当我显示该列时，它没有返回。请帮助解决这个问题。

```
jQuery("#navgrid").jqGrid('setGroupHeaders', {
            useColSpanStyle: false, 
            groupHeaders:[
                {startColumnName: 'srno', numberOfColumns: 16, titleText: "Annexure"}
            ]
        });
        jQuery("#navgrid").jqGrid('setGroupHeaders', {
            useColSpanStyle: false, 
            groupHeaders:[
                {startColumnName: 'srno', numberOfColumns: 10, titleText: "Annexure"}
            ]
        });

grid.jqGrid("setGridWidth",1280,true);
$("#hc2").prop('value', 'Show 405 to 409 columns');
for(var i=5;i<=9;i++)
{grid.jqGrid('hideCol',grid.getGridParam("colModel")[i].name);} 
```

# matlab - 一个集合中的元素不是另一个集合的元素（相对补集）

> ID：14770613
> 
> 赞同：1
> 
> 时间：2013-02-08T10:35:19.307
> 
> 标签：matlab, matrix, complement

在`matlab`，我怎样才能实现以下？

假设我有一些 set`A`和另一个 set `B`，它们都有一些元素。我怎样才能编写一个只返回**不在**`B`的值的函数（B 中 A 的相对补码？**`A``B\A`**

 **谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:36:48.057

利用[`setdiff`](http://www.mathworks.com/help/matlab/ref/setdiff.html)

```
dif = setdiff( A, B ) 
```**

# amcharts - 如何在条形图amcharts中添加图例？

> ID：14770614
> 
> 赞同：3
> 
> 时间：2013-02-08T10:35:19.667
> 
> 标签：amcharts

我在我的应用程序中使用条形图（amcharts），我需要包含该条形图的图例。所以，我为条形脚本添加了以下脚本，

```
legend = new AmCharts.AmLegend();
legend.position = "bottom";
legend.align = "center";
legend.markerType = "square";
legend.valueText = "";
chartx.addLegend(legend); 
```

但是，条形图应该显示图例？如何在我的条形图应用程序中添加图例。

谁能尽快给我这个问题的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T06:24:14.043

试试上面的示例 我已经编辑了 amchart 提供的示例

```
 <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>amCharts examples</title>
        <link rel="stylesheet" href="style.css" type="text/css">
        <script src="../amcharts/amcharts.js" type="text/javascript"></script>
        <script type="text/javascript">
            var chart;

            var chartData = [{
                year: 2005,
                income: 23.5
            }, {
                year: 2006,
                income: 26.2
            }, {
                year: 2007,
                income: 30.1
            }, {
                year: 2008,
                income: 29.5
            }, {
                year: 2009,
                income: 24.6
            }];

            AmCharts.ready(function () {
                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();
                chart.dataProvider = chartData;
                chart.categoryField = "year";
                // this single line makes the chart a bar chart,
                // try to set it to false - your bars will turn to columns
                chart.rotate = true;
                // the following two lines makes chart 3D
                chart.depth3D = 20;
                chart.angle = 30;

                // AXES
                // Category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.gridPosition = "start";
                categoryAxis.axisColor = "#DADADA";
                categoryAxis.fillAlpha = 1;
                categoryAxis.gridAlpha = 0;
                categoryAxis.fillColor = "#FAFAFA";

                // value
                var valueAxis = new AmCharts.ValueAxis();
                valueAxis.axisColor = "#DADADA";
                valueAxis.title = "Income in millions, USD";
                valueAxis.gridAlpha = 0.1;
                chart.addValueAxis(valueAxis);

                // GRAPH
                var graph = new AmCharts.AmGraph();
                graph.title = "Income";
                graph.valueField = "income";
                graph.type = "column";
                graph.balloonText = "Income in [[category]]:[[value]]";
                graph.lineAlpha = 0;
                graph.fillColors = "#bf1c25";
                graph.fillAlphas = 1;
                graph.lineThickness = 2;
                graph.bullet = "round";
                chart.addGraph(graph);

                                // LEGEND
                               var legend = new AmCharts.AmLegend();
                                legend = new AmCharts.AmLegend();
                                legend.position = "bottom";
                                legend.align = "center";
                                legend.markerType = "square";
                                legend.valueText = "aa";
                chart.addLegend(legend);

                // WRITE
                chart.write("chartdiv");
            });
        </script>
    </head>

    <body>
        <div id="chartdiv" style="width: 500px; height: 600px;"></div>
    </body>

</html> 
```

# jquery - 将数组值传递给 jQuery 选择器方法？

> ID：14770617
> 
> 赞同：1
> 
> 时间：2013-02-08T10:35:34.470
> 
> 标签：jquery, jquery-selectors

目前在我的 JS 中，我静态定义了我想将我的 datepicker 脚本与哪个输入 ID 关联。

像这样：

```
$('datepicker1').glDatePicker(); 
```

然而，为了使这种动态化，我将其重构为一个 for 循环，以便对于需要日期选择器的多个字段，我可以在该循环中调用它们。

```
dateArray[y] =  "datePicker" + i;
//out of loop scope

for (i = 0; i < dateArray.length; i++)
    {
        $(dateArray[i]).glDatePicker();

    } 
```

它似乎不起作用，我通过将值打印到日志来检查数组中是否有值。

这是 jQuery 的限制吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:36:39.027

您需要将其设置为 id`"#"`

```
 $("#" + dateArray[i]).glDatePicker(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:37:47.503

> 我想将我的 datepicker 脚本与哪个输入 ID 关联。

我想你错过了 id 选择器

```
$('#'+ dateArray[i]).glDatePicker();
---^---here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T10:41:07.573

最好`glDatePicker()`通过将所有 id 连接成一个字符串来对 进行一次 jQuery 调用

```
var allIds = '';
for (i = 0; i < dateArray.length; i++) {
  allIds += '#' + dateArray[i] + ',';
}
$(allIds).glDatePicker(); 
```

* * *

或者更好的是，为所有这些字段添加一个类，然后简单地调用

```
$(".datepicker").glDatePicker(); 
```

* * *

还有另一个单调用解决方案（假设您的所有 id 都以“datePicker”开头）：

```
$('[id^="datePicker"]').glDatePicker(); // selects all elements that have id starting with datePicker 
```

# asp.net - 更改 td 元素的边框？

> ID：14770618
> 
> 赞同：0
> 
> 时间：2013-02-08T10:35:35.080
> 
> 标签：asp.net, css, asp-classic

我可以像文本框一样更改 td 元素的边框吗？
由于某些问题，我无法在此处使用文本框。

## 编辑 1

我需要多选下拉菜单。
所以我使用了一个`textbox`（对于相同的外观和感觉`dropdownlist`），点击时我显示了一个`listbox`.
但在这种情况下`selectedindexchanged`，for`listbox`没有被调用。
但是，如果我`label`在 td 元素中使用而不是`textbox` `list_selectedindexchanged`被调用。

## 编辑 2

单击文本框后，我正在显示一个列表框。但是，如果我选择一个列表项，则不会调用 listboxselectedindexchanged。我已将列表框的 autopostback 属性设置为 true。因此我不能在这里使用文本框。如果使用文本框调用 listboxselectedindexchanged 事件，那么我对文本框没有任何问题。

# android - 处理大量制造商

> ID：14770626
> 
> 赞同：0
> 
> 时间：2013-02-08T10:35:57.747
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在构建一个使用 Google Maps Android API v2 并且可以在某些位置显示大量标记的应用程序。您是否知道在跟踪用户位置以带来新标记并允许他平移地图的应用程序中处理许多标记的任何良好做法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:48:13.743

看看这个：[https ://stackoverflow.com/a/14732286/1103584](https://stackoverflow.com/a/14732286/1103584)

或[使用 Google Maps Android API V2 隐藏和显示屏幕标记](http://discgolfsoftware.wordpress.com/2012/12/06/hiding-and-showing-on-screen-markers-with-google-maps-android-api-v2/)

# javascript - Firefox OS 模拟器中的 JavaScript 问题（CSP 警告）

> ID：14770628
> 
> 赞同：0
> 
> 时间：2013-02-08T10:36:02.130
> 
> 标签：javascript, jquery, twitter, content-security-policy, firefox-os

我目前正在 Firefox OS 上测试[区域推文教程应用程序（您可以通过](https://developer.mozilla.org/en-US/docs/Apps/Tutorials/General)[创建区域推文应用程序](https://developer.mozilla.org/en-US/docs/Apps/Tutorials/General/Creating_the_Area_Tweet_app)链接找到完整的源代码），我遇到了以下问题：应用程序调用了 Twitter API，但是未收到响应，但出现以下**警告/错误**：

```
[JavaScript Warning: "CSP WARN:  
Directive script-src app://myapp1002.gaiamobile.org violated by 
http://search.twitter.com/search.json?callback=twitterCallback&q=test&_=1360318777176"] 
```

这里有什么问题？这是没有收到对 API 请求的响应的提示，还是有其他原因？我在 Firefox 和 Chrome 浏览器（在 Windows 上）上测试了该应用程序，它运行良好。

我还可以补充一点，我测试了[Firefox OS 样板应用程序](https://hacks.mozilla.org/2013/01/introducing-the-firefox-os-boilerplate-app/)，这个应用程序似乎工作得很好。我看到这两个 Web 应用程序之间的唯一区别是 Area Tweet 使用[jQuery](http://jquery.com/)，而样板文件则没有。我对 Area Tweet 的原始源代码所做的一项修改是从*localhost*加载 jQuery 库（以符合 Mozilla 打包策略），但这似乎不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:07:22.700

添加到您`manifest.webapp`的权限请求`network-http`（这将允许您的应用禁用`same origin policy`）并使用对 twitter 的常规 json 请求（不带`callback`参数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T04:19:18.693

自从您尝试制作打包应用程序以来，您在 html 文件中是否有任何内联脚本？打包的应用程序不允许内联脚本。

[https://developer.mozilla.org/en-US/docs/Apps/Packaged_apps](https://developer.mozilla.org/en-US/docs/Apps/Packaged_apps)

# c# - XML序列化Roslyn SyntaxTree？

> ID：14770633
> 
> 赞同：5
> 
> 时间：2013-02-08T10:36:29.423
> 
> 标签：c#, xml-serialization, code-generation, roslyn

我正在寻找将 C# 转换为 XML 并再次反序列化回 C# 的选项。任何人都知道任何现有的解决方案吗？我假设 Roslyn SyntaxTree 不是 Xml 可序列化的。我还假设为语法树制作 xml-serializer 将是一项艰巨的任务。但也许不是？

为什么我需要这个？我想通过 xsl 从 xml 模型生成代码到 syntaxtree-xml，然后到 c#（或者可能是 vb）。

我不想直接从 XSL 生成 C#（可以做到，但我觉得不理想）。我需要 XSL，因为我还将从 XML 模型生成 XAML 和 HTML，并且我还希望能够在需要的后面生成任何代码等。

我知道 T4 模板，但现在出于各种原因我正在寻找其他选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:51:12.757

Roslyn 是一个开放编译器。我假设您可以直接插入自己的代码来遍历 AST 并将其转储为 XML 格式。鉴于它*是*开放的，大概您可以实现自己的扩展来*读取*您转储的 XML，并构建一个 Roslyn AST（我认为它可以被漂亮地打印出来）。这似乎是很多工作。

有关固定解决方案，请参阅[XML 中的 C# AST](https://stackoverflow.com/questions/2770664/representing-c3-code-as-an-abstract-syntax-tree-in-xml/2831395#2831395)。该解决方案也需要类似的 read-XML-to-make-AST。

您可能不想将 XML 用于树；此类文件通常很大。请参阅[面向对象编程语言的 AST（抽象语法树）是什么样的？](https://stackoverflow.com/questions/6376662/how-a-ast-for-an-object-oriented-programming-language-would-look-like/6378997#6378997).

最好在解析和构建 AST 的工具的上下文中操作，直接在这些 AST 上进行操作，然后漂亮地打印结果。我们的 DMS 系统具有对许多语言的解析（如前两个示例所示）和漂亮打印，包括已经内置的 C#，以及许多有用的 API，用于从它构造的 AST 检查/修改/生成代码。（XSL 对于分析 AST 的用处远没有您想象的那么有用；它不理解赋予程序意义的“上下文”[例如，周围的范围和声明]）。

# mysql - MySQL 的 WebSecurity.CreateAccount 失败

> ID：14770637
> 
> 赞同：1
> 
> 时间：2013-02-08T10:36:45.797
> 
> 标签：mysql, security, webmatrix

我正在使用 WebMatrix 并在尝试在 MySQL 数据库中创建用户时停留在第一位。

错误消息在行中：

```
var token = WebSecurity.CreateAccount(email, password, requireEmailConfirmation); 
```

错误信息：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '[UserId] FROM [UserProfile] WHERE (UPPER([Email]) = 'TE3ST@TEST.DE')' 附近使用的正确语法

我完全可以理解服务器正在尝试对 MySQL 服务器使用 SQL 格式的查询。如何重新编译或告诉`WebSecurity.CreateAccount`使用 MySQL 格式的查询？

任何想法？

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:42:42.503

WebSecurity 帮助器是 SimpleMembership Provider 的包装器，它不支持 MySQL（至少目前）。它仅支持 SQL Server 和 SQL Compact 4.0。如果您需要 MySQL 支持，您可以编写自己的成员资格提供程序，该提供程序继承[ExtendedMembershipProvider 。](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/WebMatrix.WebData/ExtendedMembershipProvider.cs)

# python - AttributeError：“int”对象没有属性“get”

> ID：14770639
> 
> 赞同：1
> 
> 时间：2013-02-08T10:36:58.303
> 
> 标签：python

这是代码：

```
def StartGame():
    root = Tk()
    root.title("Maths Quiz - Trigonometry and Pythagoras' Theorem | Start The Game")
    root.geometry("640x480")
    root.configure(background = "gray92")
    TotScore = 0
    Count = 0
    while Count < 10:
        AnswerReply = None
        WorkingArea = Text(root, width = 70, height = 10, wrap = WORD).place(x = 38, y = 100)
        n = GetRandomNumber
        Question,RealAnswer = QuestionLibrary(Opposite,Adjacent,Hypotenuse,Angle,n)
        AskQuestion = Label(root, text = Question).place(x = 38, y = 300)
        PauseButton = ttk.Button(root, text = "Pause").place(x = 380, y = 10)
        HelpButton = ttk.Button(root, text = "Help", command = helpbutton_click).place(x = 460, y = 10)
        QuitButton = ttk.Button(root, text = "Quit", command = root.destroy).place(x = 540, y = 10)
        AnswerEntry = Entry(root)
        AnswerEntry.place(x = 252, y = 375)
        SubmitButton = ttk.Button(root, text = "Submit", command = submit_answer).place(x = 276, y = 400)
        Count += 1
    root.mainloop() 
```

这是与提交按钮一起使用的功能：

```
def submit_answer():
    Answer = AnswerEntry.get()
    print(Answer)
    TotScore,AnswerReply = IsAnswerCorrect(Answer,RealAnswer)
    ScoreLabel = ttk.Label(root, text = TotScore).place(x = 10, y = 10)
    AnswerReplyLabel = ttk.Label(root, text = AnswerReply).place(x = 295, y = 440) 
```

这是我单击 SubmitButton 时遇到的错误

```
Traceback (most recent call last):
  File "C:\Python32\lib\tkinter\__init__.py", line 1399, in __call__
    return self.func(*args)
  File "C:\Users\ANNIE\Documents\School\Computing\Project\Python\GUI Maths Quiz.py", line 178, in submit_answer
    Answer = AnswerEntry.get()
AttributeError: 'int' object has no attribute 'get' 
```

我正在尝试制作一个问答游戏，在其中我使用 AnswerEntry 输入框从用户那里获得输入，但是它告诉我该对象没有属性 get，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:46:53.877

如果您希望该`AnswerEntry = Entry(root)`行影响在函数外部定义的全局名称，则需要在函数内部将其声明为全局名称`StartGame()`：

```
global AnswerEntry
AnswerEntry = Entry(root) 
```

对函数中的变量赋值使该变量名仅对函数局部。看来您为`AnswerEntry`其他地方的全局分配了一个整数值，所以`submit_answer()`当您调用`AnswerEntry.get()`.

不过，您确实应该避免使用全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:38:48.597

`AnswerEntry`是一个整数而不是一个对象，所以你不能在他身上调用那个方法。

也许您缺少对象实例？

# hibernate - Grails - 严重的 IllegalStateException - 类 [] 上的方法在 Grails 应用程序之外使用

> ID：14770649
> 
> 赞同：0
> 
> 时间：2013-02-08T10:37:30.547
> 
> 标签：hibernate, exception, tomcat, grails

我在 prod 环境中遇到严重的 IllegalStateException 错误（底部的堆栈跟踪）。在本地，在 dev 上一切正常，我在本地从未遇到过这段代码的任何问题。

Prod 和 Dev 配置具有相同的 Tomcat 5。在 dev 上我有 PostgreSQL 9.2 和 prod 8.4。Pod 环境是某些主机上的 VPS。

导致它的代码是一个简单的类实例创建者（GameStateTransition 类）——它负责初始化和保存超过 370 000 个实例。导致错误的行是 save(flush:true) 或 hibernateSesion.flush() - 我尝试了这两个选项。

错误发生的不确定性 - 有时在创建 160 000 个实例之后，有时在 220 000 之后，有时在 300 000 之后......

我认为这可能是内存问题，VPS 服务器杀死了最消耗内存的进程，但是将 JAVA_OPTS Xmx 更改为 256m，远低于服务器的 500m 限制，但没有帮助。在本地运行应用程序并将开发数据库更改为生产 Postgres 8.4 工作正常（该过程完成且没有错误）所以它一定是产品服务器上的应用程序有问题。

任何人都有任何线索，它可能是关于什么的？

stacktrace 说的是关于 mongoDB、测试和模拟注释的内容，但我没有使用其中的任何一个。这是一个创建实例并将其保存到数据库的简单代码。

```
2013-02-08 00:07:50 org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-12200"]
2013-02-08 00:07:50 org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
2013-02-08 00:07:50 org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
2013-02-08 00:07:50 org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
2013-02-08 00:07:51 org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
2013-02-08 00:07:52 org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
2013-02-08 00:07:52 org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated
2013-02-08 00:07:52,979 [http-bio-12200-exec-6] ERROR errors.GrailsExceptionResolver  - IllegalStateException occurred when processing request: [GET] /gameState/initializeTransitionMatrix
Method on class [pl.edu.caspar.analyzer.GameStateTransition] was used outside of a Grails application. If running in the context of a test using the mocking API or bootstrap Grails correctly.. Stacktrace follows:
 java.lang.IllegalStateException: Method on class [pl.edu.caspar.analyzer.GameStateTransition] was used outside of a Grails application. If running in the context of a test using the mocking API or bootstrap Grails correctly.
    at org.grails.datastore.mapping.engine.event.AbstractPersistenceEventListener.onApplicationEvent(AbstractPersistenceEventListener.java:46)
    at pl.edu.caspar.analyzer.GameStateController$_initializeTransitionMatrix_closure3_closure8.doCall(GameStateController.groovy:59)
    at pl.edu.caspar.analyzer.GameStateController$_initializeTransitionMatrix_closure3.doCall(GameStateController.groovy:53)
    at pl.edu.caspar.analyzer.GameStateController.initializeTransitionMatrix(GameStateController.groovy:52)
    at grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilter.java:195)
    at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:63)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:51:57.620

鉴于

```
2013-02-08 00:07:50 org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
2013-02-08 00:07:50 org.apache.catalina.core.StandardWrapper unload
INFO: Waiting for 1 instance(s) to be deallocated 
```

这看起来像 Tomcat 进程由于某种原因试图关闭，当您尝试在正在关闭的应用程序中执行控制器操作时会发生异常。

你这么说

> 我认为这可能是内存问题，并且 VPS 服务器杀死了最消耗内存的进程，但是将 JAVA_OPTS Xmx 更改为 256m，这远低于服务器的 500m 限制，并没有帮助

Java 内存不仅仅是堆大小`-Xmx`（`-XX:MaxPermSize=...`限制。

# android - 增强 Android 语音词典

> ID：14770652
> 
> 赞同：1
> 
> 时间：2013-02-08T10:37:39.667
> 
> 标签：android

语音识别似乎有一个静态字典；这与适应我们使用的单词的文本字典形成对比。当在电话上听写一个不常见的名字（例如，`Aibin`变得）时，这会导致问题，这会产生无法挽救的结果。`I've been`

我们能否以编程方式更改语音词典以调整联系人姓名？跨 Android 版本的功能是什么？

# python - 在 Django 中提供静态内容会导致 CSS 文件出现 404

> ID：14770653
> 
> 赞同：2
> 
> 时间：2013-02-08T10:37:40.887
> 
> 标签：python, django, static-files

所以我仔细阅读了这个页面[https://docs.djangoproject.com/en/1.2/howto/static-files/](https://docs.djangoproject.com/en/1.2/howto/static-files/)。我做了以下事情：

**在 urls.py**

```
from django.conf.urls import patterns, include, url
from views import *

urlpatterns = patterns('',
                       ('^SearchFoos$', searchForFoos),
                       ('^Foo/(\d+)$', showFoo),
                       (r'^static/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': '/home/david/workspace/fooapp/fooapp/static'}),
) 
```

我有一个名为`site.css`location的文件`/home/david/workspace/fooapp/fooapp/static/css`。

**在模板中**

我的模板包含以下链接：

```
<link href="/static/css/site.css" rel="stylesheet" type="text/css" /> 
```

然而，当我使用 runserver 加载页面时，Firefox 为我的 CSS 文件提供了 404。它试图从 location 获取文件`http://localhost:8000/static/css/site.css`，这是我所期望的。

我一直盯着这个，盯着它看，看不到问题所在。任何人都可以帮忙（我对python和django完全陌生）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:52:08.553

查看关于在开发中提供静态文件的[django 1.4 文档](https://docs.djangoproject.com/en/1.4/howto/static-files/#serving-static-files-in-development)。如果您不使用内置的 django 服务器，则需要将其添加到您的 urls.py 文件中。确保正确配置了您的 STATIC_DIRS 和 STATIC_URL 设置。

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

# ... the rest of your URLconf goes here ...

urlpatterns += staticfiles_urlpatterns() 
```

如文档中所述，您需要确保`DEBUG = True`在 settings.py 中。

如果您使用的是内置的 django 服务器，您只需将静态文件放在应用程序顶层名为 static 的目录中[即可](https://docs.djangoproject.com/en/1.4/howto/static-files/#basic-usage)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:49:08.827

尝试：

```
(r'static/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': '/home/david/workspace/fooapp/fooapp/static'}), 
```

# ajax - 在 mvc3 中为 Ajax 帖子添加值

> ID：14770654
> 
> 赞同：0
> 
> 时间：2013-02-08T10:37:41.037
> 
> 标签：ajax, asp.net-mvc-3, jquery

我需要将隐藏字段中的值添加到我的 Ajax 帖子中。

恐怕我对 Ajax 了解不多，所以我将尝试解释我需要什么：

在我的视图页面中，我有以下内容：

```
 <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div class="OneBySevenBin2">
    <div class="OneBySevenBin2middle">
        <div class="divTitleArea">
            <p>
            </p>
        </div>
        <ul>
            <% if (Model.ProductNotFound)
               { %>
            <!-- List the retailers as we have none in stock -->
            <%= Html.WidgetProductNotFoundList(Model) %>
            <% }
               else
               { %>
            <% using (Html.BeginForm())
               {%>
            <%= Html.AntiForgeryToken() %>
            <%= Html.WidgetProductFoundListThreeStageBin2(Model)%>
            <div class="stepFour" data-bind="stopBinding: true">
                <% if (string.IsNullOrEmpty(ViewBag.Confirmation))
                   {
                       Ajax.BeginForm("OneBySevenBin2",  new AjaxOptions()
                                                      {

                                                          HttpMethod = "POST"
                                                      });
                       { %>
                <div id="uandp">
                    <p>
                        <input type="text" name="username" class="txtUsername" id="email" value="Username" />
                        <%= Html.ValidationMessage("Email", "Please enter a valid Email") %>
                    </p>
                    <p>
                        <input type="password" name="password" class="txtPassword" value="Password" />
                    </p>
                    <input type="hidden" id="hiddenVal" class="hiddenVal" name="hiddenVal" value="1" />
                </div>
                <div id="rightaddtocart">
                    <div id="divaddtocartbtn">
                        <input type="image" class="buynow" id="imgaddtocart" alt="Add to Cart" src="http://static.e-talemedia.net/content/images/addtobasketbutton.png" />
                    </div>
                </div>
                <% } %>
                <% }
                   else
                   { %>
                <p>
                    <%-- <%= ViewBag.Confirmation %>--%>
                    <img class="divAdded" src="http://static.e-talemedia.net/content/images/Basketmessage.png"
                        alt="Added to Basket" />
                </p>
                <% } %>
            </div>
            <% } %>
            <%-- This is the quantity--%>
            <div class="qty">
                <button id="delete" class="minusQty">
                </button>
                <div id="theCount" class="theCount">
                </div>
                <button id="addMe" class="addQty">
                </button>
            </div>
            <% } %>
        </ul>        
    </div>
</div>
<%= Html.WidgetImpressionCode(Model) %>
<%= Html.WidgetTrackingCode(Model) %> 
```

以下：

```
 <%= Html.WidgetImpressionCode(Model) %> 
```

转到省略脚本的小部件助手，如下所示：

```
 <input id="e-taleWidgetImpressionId" name="e-taleWidgetImpressionId" type="hidden" value="" />
<script type="text/javascript">
    //<![CDATA[
$(document).ready(function () {
    var manufacturerWidgetId = "260";
    var productId = "6572";
    var countryId = "230";
    var theUrl = "http://localhost:1579/Widgets/Impression/260/6572/230/9r22r45r80";
    $.getJSON(theUrl + "?callback=?", {}, callback);

    function callback(data) {
            var widgetImpressionId = data.Id;
            $("input[name='e-taleWidgetImpressionId']").val(widgetImpressionId);

            }
        });
        //]]>
    </script> 
```

我需要在 ajax 帖子中包含隐藏字段的值

```
<input id="e-taleWidgetImpressionId" name="e-taleWidgetImpressionId" type="hidden" value="" /> 
```

这样我就可以在控制器中使用它：

```
 [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult OneBySevenBin2(String modelNo, string widgetImpressionId, string page, FormCollection form)
        {
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:45:20.973

你的ajax`post`代码在哪里？`getJSON`以任何方式使用`GET`请求，您可以添加隐藏字段数据，例如

```
$.ajax({
 url:'',
 type:'',
 data:{hdnField:$("#e-taleWidgetImpressionId").val()},
 ...
}); 
```

在服务器端它可以被接收为

```
 [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult OneBySevenBin2(String modelNo, string widgetImpressionId, string page, FormCollection form,string hdnField)
        {
         ...
         } 
```

# php - 如何使用 PHP 在谷歌地图上显示标记

> ID：14770655
> 
> 赞同：0
> 
> 时间：2013-02-08T10:37:44.377
> 
> 标签：php, codeigniter, google-maps

我需要使用 PHP codeigniter 显示数据库中的标记我不会得到地图

```
function initialize() {
    var myLatLng = new google.maps.LatLng(18.5236, 73.8478);
    var mapOptions = {
        zoom: 14,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    // Add 5 markers to the map at random locations.
    var southWest = new google.maps.LatLng(18.5236,73.8478);
    var northEast = new google.maps.LatLng(19.5236,75.8478);

    var bounds = new google.maps.LatLngBounds(southWest,northEast);
    map.fitBounds(bounds);
    var lngSpan = northEast.lng() - southWest.lng();
    var latSpan = northEast.lat() - southWest.lat();

//If I comment below line it show blank map

    beaches =  [ <?php foreach($records as $row) echo "[".$row->property_title.', '.$row->property_latitude.', '.$row->property_longitude.'],'?>]"

    for (var i = 0; i < beaches.length; i++) {
          var beach = beaches[i];
          var myLatLng = new google.maps.LatLng(beach[1], beach[2]);
          var marker = new google.maps.Marker({
              position: myLatLng,
              map: map,
              title: beach[0]            
          });           
      }                                           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:56:25.020

如果`$row->property_title`是字符串，则需要在引号之间：

```
echo "['".$row->property_title."', ".$row->property_latitude.', '.$row->property_longitude.'],'?>]" 
```

或者，您可以使用`json_encode`输出您的数组：

```
<?php
$beaches = array();
foreach ($records as $row) {$beaches[] = array($row->property_title, $row->property_latitude, $row->property_longitude);}
echo 'beaches = ' . json_encode($beaches) . ';';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:55:26.657

```
 $beaches = "['".$row->property_title."', '".$row->property_latitude."', '".$row->property_longitude."']";

var beaches=[<?php echo $beaches;?>]; 
```

# javascript - 我如何在javascript（不是jquery？）中使用stopPropagation

> ID：14770664
> 
> 赞同：0
> 
> 时间：2013-02-08T10:38:15.443
> 
> 标签：javascript, html

有人可以解释如何将 javascript 中的停止传播集成到我的代码中吗？我原以为网上会有很多清晰的例子，但是我看到的例子并没有帮助我理解。

我一直看到这个代码片段作为解释：

```
function doSomething(e)
{
if (!e) var e = window.event;
e.cancelBubble = true;
if (e.stopPropagation) e.stopPropagation();
} 
```

但我猜我的 javascript 素养是 0，因为我很难确定哪个是字面的，哪个是占位符变量，因为我应该以不同的方式输入。

比如，假设我有一个列表项及其父元素的 onclick。并且 onclick 它调用了一个 ajax 函数，但我需要防止它冒泡。

那么上面的功能应该是独立的吗？还是应该代表我添加到我已经存在的函数中的代码？

什么是 e，为什么我将它作为参数传递给我的函数？

我不明白`if(!e)`会带来什么。什么是 e，什么时候 e 不为真的条件被满足？

这是我的代码：

阿贾克斯查询：

```
function serverconnect(divID, $clickvalue, datalocation)
{
var1=$clickvalue;
if(xmlhttp)
{
    var obj = document.getElementById(divID);
    xmlhttp.open("GET", datalocation);

    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState == 4 &&
        xmlhttp.status == 200)
        {
        obj.innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.send(null); 
}
alert(var1);

serverconnectPP('productpane6', 'clickit', 'ProductPane.php')
} 
```

html:

```
<li onclick="serverconnect(var1, var2, var3)">Test
     <ul>
     <li onclick="serverconnect(var1, var2, var3)">Test</li>
     </ul>
</li> 
```

html 不太重要，但关键是如果我点击内部 li，两个 onclicks 都会触发。

我知道 jquery 很棒，但请给我一个 javascript 解释。

# sql - 将表与数组合并

> ID：14770666
> 
> 赞同：1
> 
> 时间：2013-02-08T10:38:19.603
> 
> 标签：sql, sql-server, sql-merge

我有一个表格和一个数组，我喜欢合并它们。

结构（t=目标，s=源）：

```
ID          gID
----------- -----------
13          1
14          1
15          1
16          1
17          2
18          2
19          2 
```

当 t.ID=s.ID 和 t.gID=s.gID 那么什么都不会发生。当 s.ID < 0 然后插入。当 s.ID 不存在时删除。

我无法在合并查询中构建它：

```
merge tableT as t
using @array as s
on (t.ID = s.ID) and (t.gID=s.gID)
when not matched and s.ID < 0 then
insert into
when not matched by source then delete; 
```

当每一行的@array 中的gID=1 时，查询将删除所有gID=2 的。但只有 gID=1 应该受到影响。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:57:01.113

似乎您应该将目标限制为与`gID`源中相同的行，如下所示：

```
**with tgt as (
  select *
  from tableT
  where gID in (select gID from @array)
)**
merge **tgt** as t
using @array as s
on (t.ID = s.ID) and (t.gID=s.gID)
when not matched and s.ID < 0 then
insert into
when not matched by source then delete; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:41:20.940

```
when not matched by source then delete;
    ^^^^^^^^^^^^^ 
```

如果您只想删除匹配项，请删除`not`.

# inno-setup - 低音音频库开/关按钮

> ID：14770667
> 
> 赞同：2
> 
> 时间：2013-02-08T10:38:22.473
> 
> 标签：inno-setup

在此示例中如何创建开/关音乐按钮：

[在 Inno Setup 安装期间播放声音](https://stackoverflow.com/questions/12359859/playing-sound-during-an-inno-setup-install)

我想使用 image.png。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T13:42:10.450

以下脚本创建了一个按钮，您可以通过该按钮根据流的当前状态播放或暂停流：

```
[Setup]
AppName=Bass Audio Project
AppVersion=1.0
DefaultDirName={pf}\Bass Audio Project

[Files]
Source: "Bass.dll"; Flags: dontcopy
Source: "AudioFile.mp3"; Flags: dontcopy

[CustomMessages]
SoundCtrlButtonCaptionSoundOn=Music on
SoundCtrlButtonCaptionSoundOff=Music off

[Code]
const  
  BASS_SAMPLE_LOOP = 4;
  BASS_ACTIVE_STOPPED = 0;
  BASS_ACTIVE_PLAYING = 1;
  BASS_ACTIVE_STALLED = 2;
  BASS_ACTIVE_PAUSED  = 3;
  BASS_UNICODE = $80000000;
  BASS_CONFIG_GVOL_STREAM = 5;
const
  #ifndef UNICODE
    EncodingFlag = 0;
  #else
    EncodingFlag = BASS_UNICODE;
  #endif
type
  HSTREAM = DWORD;

function BASS_Init(device: LongInt; freq, flags: DWORD; 
  win: HWND; clsid: Cardinal): BOOL;
  external 'BASS_Init@files:bass.dll stdcall';
function BASS_StreamCreateFile(mem: BOOL; f: string; offset1: DWORD; 
  offset2: DWORD; length1: DWORD; length2: DWORD; flags: DWORD): HSTREAM;
  external 'BASS_StreamCreateFile@files:bass.dll stdcall';
function BASS_Start: BOOL;
  external 'BASS_Start@files:bass.dll stdcall';
function BASS_Pause: BOOL;
  external 'BASS_Pause@files:bass.dll stdcall';
function BASS_ChannelPlay(handle: DWORD; restart: BOOL): BOOL; 
  external 'BASS_ChannelPlay@files:bass.dll stdcall';
function BASS_SetConfig(option: DWORD; value: DWORD ): BOOL;
  external 'BASS_SetConfig@files:bass.dll stdcall';
function BASS_ChannelIsActive(handle: DWORD): DWORD;
  external 'BASS_ChannelIsActive@files:bass.dll stdcall';
function BASS_Free: BOOL;
  external 'BASS_Free@files:bass.dll stdcall';

var
  SoundStream: HSTREAM;
  SoundCtrlButton: TNewButton;

procedure SoundCtrlButtonClick(Sender: TObject);
begin
  case BASS_ChannelIsActive(SoundStream) of
    BASS_ACTIVE_PLAYING: 
    begin
      if BASS_Pause then
        SoundCtrlButton.Caption := 
          ExpandConstant('{cm:SoundCtrlButtonCaptionSoundOn}');
    end;
    BASS_ACTIVE_PAUSED: 
    begin
      if BASS_Start then
        SoundCtrlButton.Caption :=
          ExpandConstant('{cm:SoundCtrlButtonCaptionSoundOff}');
    end;
  end;
end;

procedure InitializeWizard;
begin
  ExtractTemporaryFile('AudioFile.mp3');
  if BASS_Init(-1, 44100, 0, 0, 0) then
  begin
    SoundStream := BASS_StreamCreateFile(False, 
      ExpandConstant('{tmp}\AudioFile.mp3'), 0, 0, 0, 0, 
      EncodingFlag or BASS_SAMPLE_LOOP);
    BASS_SetConfig(BASS_CONFIG_GVOL_STREAM, 2500);
    BASS_ChannelPlay(SoundStream, False);

    SoundCtrlButton := TNewButton.Create(WizardForm);
    SoundCtrlButton.Parent := WizardForm;
    SoundCtrlButton.Left := 8;
    SoundCtrlButton.Top := WizardForm.ClientHeight - 
      SoundCtrlButton.Height - 8;
    SoundCtrlButton.Width := 155;
    SoundCtrlButton.Caption :=
      ExpandConstant('{cm:SoundCtrlButtonCaptionSoundOff}');
    SoundCtrlButton.OnClick := @SoundCtrlButtonClick;
  end;
end;

procedure DeinitializeSetup;
begin
  BASS_Free;
end; 
```

# cuda - CUDA 在同一个参数上多次调用内核函数

> ID：14770669
> 
> 赞同：0
> 
> 时间：2013-02-08T10:38:29.360
> 
> 标签：cuda

我尝试搜索一个类似的问题，但找不到一个，尽管有几个标题相似。

我在主机上有这样的代码：

```
handle_error(cudaMalloc((void**)&ret_dev, FLOAT_SIZE*no_kstrings*M));
for(int div=0;div<no_kstrings/threads;div++){
   kernel<<<grid_dim,block_dim>>>(ret_dev, v_freq_vectors, &no_kstrings[threads]);
   handle_error(cudaMemcpy(&exp_freq[threads], ret_dev, FLOAT_SIZE*threads*M, 
        cudaMemcpyDeviceToHost));
} 
```

基本上我必须将循环中的代码作为最大编号的倍数运行。每个块的线程数。而内核函数只是做一些事情并将数据放入`ret_dev`. 所以我想知道，我是否需要`cudaMemcpy()`在每次迭代之后做，或者我也可以在循环之外做？像这样的东西：

```
handle_error(cudaMalloc((void**)&ret_dev, FLOAT_SIZE*no_kstrings*M));
for(int div=0;div<no_kstrings/threads;div++){
   kernel<<<grid_dim,block_dim>>>(ret_dev, v_freq_vectors, &no_kstrings[threads]);
}
handle_error(cudaMemcpy(exp_freq, ret_dev, FLOAT_SIZE*no_kstrings*M, 
     cudaMemcpyDeviceToHost)); 
```

我想我想问的是，在同一个参数上多次调用内核函数是否会以某种方式破坏这些参数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:24:23.323

当您多次（或多个内核）启动内核而不指定流时，它们会在标准流 0 上排队并连续执行。memcpy 调用也是如此。这些内核和 memcpy 调用的顺序将被保留。此外，内核参数始终按值传递，并且稍后更改值不会破坏已调度的调用，即使它尚未启动。

在您的情况下，您是否可以将 memcpy 移出循环取决于您的内核所做的事情。如果所有内核都在自己的数据块上工作，那么在启动所有内核后复制回结果应该没问题。在这种情况下，您可能需要检查您的算法是否需要全局同步，因为如果不需要，您可以通过在内核中移动 for 循环来获得很多速度。

如果您的内核处理所有数据并且您需要在特定时间保存它，您仍然可以考虑在 gpu 上分配一个额外的结果数组并将其复制到内核中。这也应该比在循环中执行 memcpy 快得多。

# mysql - MySQL order by before group by

> ID：14770671
> 
> 赞同：281
> 
> 时间：2013-02-08T10:38:39.273
> 
> 标签：mysql, group-by, sql-order-by

在这里可以找到很多类似的问题，但我认为没有人能充分回答这个问题。

如果可以的话，我将从当前最流行的[问题](https://stackoverflow.com/questions/5140785/mysql-order-before-group-by)继续，并使用他们的示例。

本例中的任务是获取数据库中每个作者的最新帖子。

示例查询会产生不可用的结果，因为它并不总是返回的最新帖子。

```
SELECT wp_posts.* FROM wp_posts
    WHERE wp_posts.post_status='publish'
    AND wp_posts.post_type='post'
    GROUP BY wp_posts.post_author           
    ORDER BY wp_posts.post_date DESC 
```

当前接受的答案是

```
SELECT
    wp_posts.*
FROM wp_posts
WHERE
    wp_posts.post_status='publish'
    AND wp_posts.post_type='post'
GROUP BY wp_posts.post_author
HAVING wp_posts.post_date = MAX(wp_posts.post_date) <- ONLY THE LAST POST FOR EACH AUTHOR
ORDER BY wp_posts.post_date DESC 
```

不幸的是，这个答案是简单明了的错误，并且在许多情况下产生的结果不如原始查询稳定。

我最好的解决方案是使用表单的子查询

```
SELECT wp_posts.* FROM 
(
    SELECT * 
    FROM wp_posts
    ORDER BY wp_posts.post_date DESC
) AS wp_posts
WHERE wp_posts.post_status='publish'
AND wp_posts.post_type='post'
GROUP BY wp_posts.post_author 
```

那么我的问题是一个简单的问题： **无论如何在分组之前对行进行排序而不诉诸子查询？**

**编辑**：这个问题是另一个问题的延续，我的具体情况略有不同。您可以（并且应该）假设还有一个 wp_posts.id 是该特定帖子的唯一标识符。

* * *

## 回答 #1

> 赞同：421
> 
> 时间：2013-02-08T10:53:42.320

在子查询中使用 an`ORDER BY`并不是解决此问题的最佳方法。

获得作者的最佳解决方案`max(post_date)`是使用子查询返回最大日期，然后在日期和最大日期将其加入到您的表中`post_author`。

解决方案应该是：

```
SELECT p1.* 
FROM wp_posts p1
INNER JOIN
(
    SELECT max(post_date) MaxPostDate, post_author
    FROM wp_posts
    WHERE post_status='publish'
       AND post_type='post'
    GROUP BY post_author
) p2
  ON p1.post_author = p2.post_author
  AND p1.post_date = p2.MaxPostDate
WHERE p1.post_status='publish'
  AND p1.post_type='post'
order by p1.post_date desc 
```

如果您有以下示例数据：

```
CREATE TABLE wp_posts
    (`id` int, `title` varchar(6), `post_date` datetime, `post_author` varchar(3))
;

INSERT INTO wp_posts
    (`id`, `title`, `post_date`, `post_author`)
VALUES
    (1, 'Title1', '2013-01-01 00:00:00', 'Jim'),
    (2, 'Title2', '2013-02-01 00:00:00', 'Jim')
; 
```

子查询将返回最大日期和作者：

```
MaxPostDate | Author
2/1/2013    | Jim 
```

然后，由于您将其加入表中，因此您将在这两个值上返回该帖子的完整详细信息。

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/b0645/2)。

扩展我关于使用子查询准确返回此数据的评论。

MySQL 不会强制您访问列表`GROUP BY`中包含的每一列`SELECT`。因此，如果您只`GROUP BY`返回一列但总共返回 10 列，则不能保证返回属于该列的其他列值`post_author`。如果该列不在`GROUP BY`MySQL 中，则选择应返回的值。

使用带有聚合函数的子查询将保证每次都返回正确的作者和帖子。

附带说明一下，虽然 MySQL 允许您`ORDER BY`在子查询中使用 a 并允许您将 a`GROUP BY`应用于列表中的并非每一列，但`SELECT`在包括 SQL Server 在内的其他数据库中不允许此行为。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-08T11:14:48.587

您的解决方案使用了[GROUP BY 子句的扩展，](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)该子句允许按某些字段进行分组（在这种情况下，只是`post_author`）：

```
GROUP BY wp_posts.post_author 
```

并选择非聚合列：

```
SELECT wp_posts.* 
```

未在 group by 子句中列出，或未在聚合函数中使用（MIN、MAX、COUNT 等）。

**正确使用 GROUP BY 子句的扩展**

当非聚合列的所有值对于每一行都相等时，这很有用。

例如，假设您有一张桌子`GardensFlowers`（`name`在花园里，`flower`在花园里）：

```
INSERT INTO GardensFlowers VALUES
('Central Park',       'Magnolia'),
('Hyde Park',          'Tulip'),
('Gardens By The Bay', 'Peony'),
('Gardens By The Bay', 'Cherry Blossom'); 
```

你想提取花园里所有的花，花园里长着多朵花。然后你必须使用一个子查询，例如你可以使用这个：

```
SELECT GardensFlowers.*
FROM   GardensFlowers
WHERE  name IN (SELECT   name
                FROM     GardensFlowers
                GROUP BY name
                HAVING   COUNT(DISTINCT flower)>1); 
```

如果您需要提取花园中唯一花朵的所有花朵，您可以将 HAVING 条件更改为`HAVING COUNT(DISTINCT flower)=1`，但 MySql 也允许您使用它：

```
SELECT   GardensFlowers.*
FROM     GardensFlowers
GROUP BY name
HAVING   COUNT(DISTINCT flower)=1; 
```

没有子查询，不是标准的 SQL，但更简单。

**对 GROUP BY 子句的扩展使用不正确**

但是，如果您选择每行不相等的非聚合列会发生什么？MySql 为该列选择的值是什么？

看起来 MySql 总是选择它遇到的第一个值**。**

为了确保它遇到的第一个值正是您想要的值，您需要将 a`GROUP BY`应用于有序查询，因此需要使用子查询。你不能这样做。

假设 MySql 总是选择它遇到的第一行，您正确地对 GROUP BY 之前的行进行排序。但不幸的是，如果你仔细阅读文档，你会发现这个假设是不正确的。

When selecting non-aggregated columns that are not always the same, **MySql is free to choose any value, so the resulting value that it actually shows is indeterminate** .

我看到这个获取非聚合列的第一个值的技巧被使用了很多，它通常/几乎总是有效，我有时也会使用它（风险自负）。但由于它没有记录，你不能依赖这种行为。

此链接（感谢 ypercube！）[GROUP BY 技巧已被优化掉](https://kb.askmonty.org/en/group-by-trick-has-been-optimized-away/)显示了相同查询在 MySql 和 MariaDB 之间返回不同结果的情况，这可能是因为优化引擎不同。

所以，如果这个技巧有效，那只是运气问题。

另一个问题的[公认答案对](https://stackoverflow.com/a/5140943/632951) 我来说似乎是错误的：

```
HAVING wp_posts.post_date = MAX(wp_posts.post_date) 
```

`wp_posts.post_date`是一个非聚合列，它的值将是官方未确定的，但它很可能是第一个`post_date`遇到的。但由于 GROUP BY 技巧应用于无序表，因此不确定哪个是第一个`post_date`遇到的。

它可能会返回作为单个作者的唯一帖子的帖子，但即使这并不总是确定的。

**一个可能的解决方案**

我认为这可能是一个可能的解决方案：

```
SELECT wp_posts.*
FROM   wp_posts
WHERE  id IN (
  SELECT max(id)
  FROM wp_posts
  WHERE (post_author, post_date) = (
    SELECT   post_author, max(post_date)
    FROM     wp_posts
    WHERE    wp_posts.post_status='publish'
             AND wp_posts.post_type='post'
    GROUP BY post_author
  ) AND wp_posts.post_status='publish'
    AND wp_posts.post_type='post'
  GROUP BY post_author
) 
```

在内部查询中，我将返回每位作者的最长发布日期。然后我考虑到同一个作者理论上可以同时有两个帖子的事实，所以我只得到最大的 ID。然后我返回所有具有这些最大 ID 的行。使用连接而不是 IN 子句可以使其更快。

（如果您确定它`ID`只会增加，并且 if`ID1 > ID2`也意味着`post_date1 > post_date2`，那么查询可以变得更加简单，但我不确定是否是这种情况）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-12T15:54:52.283

**你将要阅读的内容相当老套，所以不要在家里尝试这个！**

在 SQL 中，您的问题的答案通常是**NO**，但由于（ *@bluefeet*`GROUP BY`提到的）的宽松模式，MySQL 中的答案是**YES**。

 ***假设，您在 (post_status, post_type, post_author, post_date) 上有一个 BTREE 索引。索引在引擎盖下的样子如何？

(post_status='publish', post_type='post', post_author='user A', post_date='2012-12-01') (post_status='publish', post_type='post', post_author='user A', post_date='2012-12-31') (post_status='publish', post_type='post', post_author='user B', post_date='2012-10-01') (post_status='publish', post_type=' post', post_author='用户 B', post_date='2012-12-01')

也就是说，数据按所有这些字段升序排序。

`GROUP BY`默认情况下，它会按分组字段对数据进行排序（在`post_author`我们的例子中；post_status，post_type 是`WHERE`子句需要的），如果有匹配的索引，它会按升序获取每个第一条记录的数据。也就是说，查询将获取以下内容（每个用户的第一篇文章）：

(post_status='publish', post_type='post', post_author='user A', post_date='2012-12-01') (post_status='publish', post_type='post', post_author='user B', post_date='2012-10-01')

但是`GROUP BY`在 MySQL 中允许你显式地指定顺序。当你`post_user`按降序请求时，它会以相反的顺序遍历我们的索引，仍然为每个组取第一个记录，实际上是最后一个。

那是

```
...
WHERE wp_posts.post_status='publish' AND wp_posts.post_type='post'
GROUP BY wp_posts.post_author DESC 
```

会给我们

(post_status='publish', post_type='post', post_author='user B', post_date='2012-12-01') (post_status='publish', post_type='post', post_author='user A', post_date='2012-12-31')

现在，当您按 post_date 对分组结果进行排序时，您将获得所需的数据。

```
SELECT wp_posts.*
FROM wp_posts
WHERE wp_posts.post_status='publish' AND wp_posts.post_type='post'
GROUP BY wp_posts.post_author DESC
ORDER BY wp_posts.post_date DESC; 
```

**注意**：

对于这个特定的查询，我不建议这样做。在这种情况下，我会使用*@bluefeet*建议的稍微修改的版本。但这种技术可能非常有用。在这里看看我的答案：[检索每组中的最后一条记录](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group/8757062#8757062)

**陷阱**：该方法的缺点是

*   查询的结果依赖于索引，这与 SQL 的精神背道而驰（索引应该只加快查询速度）；
*   索引不知道它对查询的影响（您或其他人将来可能会发现索引太耗费资源并以某种方式更改它，从而破坏查询结果，而不仅仅是它的性能）
*   如果您不了解查询的工作原理，您很可能会在一个月内忘记解释，并且查询会使您和您的同事感到困惑。

优点是在困难情况下的性能。在这种情况下，查询的性能应该与@bluefeet 的查询相同，因为排序涉及的数据量很大（所有数据都加载到临时表中然后排序；顺便说一句，他的查询`(post_status, post_type, post_author, post_date)`也需要索引） .

**我会建议**：

正如我所说，这些查询使 MySQL 浪费时间对临时表中潜在的大量数据进行排序。如果您需要分页（即涉及 LIMIT），大部分数据甚至会被丢弃。我要做的是最小化排序数据的数量：即排序并限制子查询中的最小数据，然后连接回整个表。

```
SELECT * 
FROM wp_posts
INNER JOIN
(
  SELECT max(post_date) post_date, post_author
  FROM wp_posts
  WHERE post_status='publish' AND post_type='post'
  GROUP BY post_author
  ORDER BY post_date DESC
  -- LIMIT GOES HERE
) p2 USING (post_author, post_date)
WHERE post_status='publish' AND post_type='post'; 
```

使用上述方法的相同查询：

```
SELECT *
FROM (
  SELECT post_id
  FROM wp_posts
  WHERE post_status='publish' AND post_type='post'
  GROUP BY post_author DESC
  ORDER BY post_date DESC
  -- LIMIT GOES HERE
) as ids
JOIN wp_posts USING (post_id); 
```

[所有这些查询及其在SQLFiddle](http://sqlfiddle.com/#!2/7843a/3)上的执行计划。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-08T11:04:59.460

试试这个。**只需从每个作者那里获取最新发布日期的列表**。就是这样

```
SELECT wp_posts.* FROM wp_posts WHERE wp_posts.post_status='publish'
AND wp_posts.post_type='post' AND wp_posts.post_date IN(SELECT MAX(wp_posts.post_date) FROM wp_posts GROUP BY wp_posts.post_author) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-17T03:13:38.560

只需使用 max 函数和 group 函数

```
 select max(taskhistory.id) as id from taskhistory
            group by taskhistory.taskid
            order by taskhistory.datum desc 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-08T10:50:53.367

不。在分组之前对记录进行排序是没有意义的，因为分组会改变结果集。子查询方式是首选方式。如果这太慢了，你将不得不改变你的表格设计，例如将每个作者的最后一篇文章的 id 存储在一个单独的表中，或者引入一个布尔列来指示每个作者他的哪篇文章是最后一篇一。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T11:28:00.347

回顾一下，标准解决方案使用不相关的子查询，如下所示：

```
SELECT x.*
  FROM my_table x
  JOIN (SELECT grouping_criteria,MAX(ranking_criterion) max_n FROM my_table GROUP BY grouping_criteria) y
    ON y.grouping_criteria = x.grouping_criteria
   AND y.max_n = x.ranking_criterion; 
```

如果你使用的是旧版本的 MySQL，或者相当小的数据集，那么你可以使用以下方法：

```
SELECT x.*
  FROM my_table x
  LEFT
  JOIN my_table y
    ON y.joining_criteria = x.joining_criteria
   AND y.ranking_criteria < x.ranking_criteria
 WHERE y.some_non_null_column IS NULL; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-29T13:27:18.800

不确定这是否已经被建议，但您现在可以使用[SQL 窗口函数](https://dev.mysql.com/doc/refman/8.0/en/window-functions-usage.html)：

```
SELECT * FROM (
      SELECT wp_posts.*, ROW_NUMBER() OVER (PARTITION BY wp_posts.post_author ORDER BY post_date DESC) rank
      FROM wp_posts
      WHERE wp_posts.post_status = 'publish'
      AND wp_posts.post_type = 'post'
  ) AS T
WHERE rank = 1 
```

所有行都“排名”，然后您只需要选择每个第一行。

我承认我对性能一无所知，但据我所知，这应该是可以接受的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-19T17:38:34.607

以防万一。我做了很多次这样的事情：

```
select * from 
  (select max(some_quantity) over (partition by id1, id2) as max_quantity, t.*
  from table_name t) tt 
where tt.max_quantity=tt.some_quantity; 
```

这是具有字段条件最大值的分组`some_quantity`。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-10T17:02:17.857

这是我使用用户定义变量的解决方案，即使没有 GROUP BY，也可以获得一致的结果。目标是获取整行，而不仅仅是一行中一个单元格的最大值。请参见下面的示例：

```
SET @product_id := 0;

SELECT
    products.order_code,
    purchases.`date`,
    purchases.price
FROM products
LEFT JOIN (       
    SELECT
        purchases.`date`,
        purchases.price,
        IF(@product_id = purchases.product_id, 0, 1) AS is_last,
        @product_id := purchases.product_id AS product_id
    FROM purchases
    ORDER BY purchases.product_id ASC, purchases.id DESC
) purchases ON products.id = purchases.product_id
WHERE purchases.is_last = 1
ORDER BY products.order_code ASC; 
```

我不确定性能，但在 50000 行购买表上是 0.1 秒。请让我知道我是否可以进行任何性能改进。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-11-05T01:42:08.960

** 与大型数据集一起使用时，子查询可能会对性能产生不良影响 **

**原始查询**

```
SELECT wp_posts.*
FROM   wp_posts
WHERE  wp_posts.post_status = 'publish'
       AND wp_posts.post_type = 'post'
GROUP  BY wp_posts.post_author
ORDER  BY wp_posts.post_date DESC; 
```

**修改后的查询**

```
SELECT p.post_status,
       p.post_type,
       Max(p.post_date),
       p.post_author
FROM   wp_posts P
WHERE  p.post_status = "publish"
       AND p.post_type = "post"
GROUP  BY p.post_author
ORDER  BY p.post_date; 
```

因为我`max`在`select clause`==>中使用`max(p.post_date)`它可以避免子选择查询并在 group by 之后按 max 列排序。

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2013-02-08T10:49:33.027

首先，不要在select中使用*，影响它们的性能并阻碍group by和order by的使用。试试这个查询：

```
SELECT wp_posts.post_author, wp_posts.post_date as pdate FROM wp_posts
WHERE wp_posts.post_status='publish'
AND wp_posts.post_type='post'
GROUP BY wp_posts.post_author           
ORDER BY pdate DESC 
```

当您未在 ORDER BY 中指定表时，仅指定别名时，它们将对选择的结果进行排序。***

# java - java @Asynchronous 方法：不运行异步

> ID：14770672
> 
> 赞同：3
> 
> 时间：2013-02-08T10:38:41.290
> 
> 标签：java, jakarta-ee

我尝试让异步进程运行。基于这个例子：[http ://tomee.apache.org/examples-trunk/async-methods/README.html](http://tomee.apache.org/examples-trunk/async-methods/README.html)

但是只有当代码完全完成时，该方法`addWorkflow(Workflow workflow)`才会返回。`run(Workflow workflow)`

然后当它返回并被`result.get();`调用时，我会得到异常：

> 原因：java.lang.IllegalStateException：对象不代表实际的未来

任何建议我错过了什么？

```
@Singleton
public class WorkflowProcessor {

@EJB
private  WorkflowManager workflowManager;

private final static Logger log = Logger.getLogger(WorkflowProcessor.class.getName());

public void runWorkflows(Collection<Workflow> workflows) throws Exception{  
    final long start = System.nanoTime();
    final long numberOfWorkflows = workflows.size();
    Collection<Future<Workflow>> asyncWorkflows = new ArrayList<>();

    for(Workflow workflow : workflows){
        Future<Workflow> w = addWorkflow(workflow);
        asyncWorkflows.add(w);
    }    
    log.log(Level.INFO, "workflow jobs added {0}", new Object[]{numberOfWorkflows});
    for(Future<Workflow> result : asyncWorkflows){
       result.get();
    }

    final long total = TimeUnit.NANOSECONDS.toSeconds(System.nanoTime() - start);
    log.log(Level.INFO, "WorkflowProcessor->runWorkflows {0} workflows completed in:{1}", new Object[]{numberOfWorkflows, total});

}

@Asynchronous
@Lock(LockType.READ)
@AccessTimeout(-1)
private Future<Workflow> addWorkflow(Workflow workflow){

    run(workflow);

    return new AsyncResult<Workflow>(workflow);                
}

private void run(Workflow workflow){
    this.workflowManager.runWorkflow(workflow);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-10T07:52:56.880

因此，通常的方法是在调用者方法的另一个 bean 中使用 @Asynchronous 方法。

```
@Stateless
public class ComputationProcessor {

 @Asynchronous
 public Future<Data> performComputation {
   return new AsyncResult<Data>(null);
 }
}

@Stateless
public class ComputationService {

 @Inject
 private ComputationProcessor mProcessor;

 public void ...() {
   Future<Data> result = mProcessor.performComputation();
   ...
 }
} 
```

正如您所发现的，如果 @Asynchronous 方法与调用者在同一个 bean 中，它将不起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T19:35:25.153

问题是 Java 不能修饰隐式 this 指针。

换句话说，@Asynchronous 注释不会被处理，而你正在做一个普通的方法调用。

您可以使用对自身的引用来注入您的 so 单例（称之为“self”），然后调用 self.addWorkflow。

您可能还想考虑在无状态 bean 中运行异步代码。您正在为 addWorkflow 使用读锁，但 runWorkflow 仍然有写锁。我认为你现在有一个死锁：你一直持有锁直到工作完成，但在写锁被释放之前无法完成任何工作。

# c++ - Xcode - .cpp 文件的头文件问题

> ID：14770673
> 
> 赞同：0
> 
> 时间：2013-02-08T10:38:46.343
> 
> 标签：c++, xcode, macos

我已经将我的项目从 windows 导入到 mac 并正在使用 xcode 编译项目。

我已经设法修复了移植过程中的大多数错误和错误，但是有一个错误/错误我无法确定为什么它不能正常工作。这可能是由于我对 xcode 缺乏了解，但想知道是否有人能够帮助我解决这个问题。

问题是这样的；我的项目中有两个子文件夹，一个称为包含，另一个称为源。当然 include 包含所有头文件，而 source 包含所有 cpp 文件等。

例子：

```
Root/
    Include/
            Header.h
    Source/
           test.cpp 
```

现在在 xcode 项目的构建设置中，我在 Header Serach Paths 中添加了 $(SRCROOT)/Include/。因此，我假设 xcode 将在 Include 文件夹中包含任何头文件。

所以在 test.cpp 类中我添加了`#include "Header.h"`. 当我单击构建时，我收到一条错误消息“找不到'Header.h'文件”。

我不完全确定我做错了什么，例如我当然可以这样做 -`#include "../Include/Header.h"`但这将是我项目中所有 cpp 文件的痛苦（很多）。

我只是想知道是否有其他人遇到过这个问题？

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:28:21.783

通常，您需要将标题添加到`User Header Search Paths`，如果您在 XCode 中搜索帮助将为您提供传递目录所需的格式。

# java - 将不同的 Grizzly HttpHandler 绑定到不同的 NetworkListener

> ID：14770674
> 
> 赞同：0
> 
> 时间：2013-02-08T10:38:47.010
> 
> 标签：java, grizzly

Grizzly[文档](http://grizzly.java.net/nonav/docs/docbkx2.2/html/hsf-building-simple.html)指出

> 添加到 ServerConfiguration 的所有 HttpHandler 将在所有侦听器之间共享

是否有另一种方法可以将不同的处理程序绑定到不同的端口？还是我必须乘以实例化`HttpServer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:50:31.233

您可以将其绑定到一个`PortRange`即多个端口

`NetworkListener(String name, String host, PortRange portRange)` [记录在案](http://grizzly.java.net/nonav/docs/2.0/apidocs/org/glassfish/grizzly/http/server/NetworkListener.html)

或者

```
HttpServer httpServer = new HttpServer();

NetworkListener networkListener1 = new NetworkListener("sample-listener1", "localhost", 8888);
NetworkListener networkListener2 = new NetworkListener("sample-listener2", "localhost", 8889);
httpServer.addListener(networkListener1);
httpServer.addListener(networkListener2); 
```

这样您就可以为不同的端口添加多个处理程序

或（尚未尝试但很可能有效）

```
HttpServer server = HttpServer.createSimpleServer();
 server.getServerConfiguration().addHttpHandler(handler1);
 server.getServerConfiguration().addHttpHandler(handler2);
server.start() 
```

# c# - C# 工具栏图像集合编辑器

> ID：14770680
> 
> 赞同：4
> 
> 时间：2013-02-08T10:39:09.683
> 
> 标签：c#, winforms, image, collections, toolbar

我有一个带有工具栏和图像集合的应用程序。问题是我没有原始图像，我需要使用一些相同的按钮创建另一个工具栏。有没有办法将工具栏中的图像集合保存到文件中？

我尝试从资源文件中提取图像，但我不知道图像存储在哪个文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T13:09:49.883

虽然我没有找到我的问题的答案，但我设法通过读取工具栏图像列表并根据给定的图像键将每个图像保存到文件中来获取图像。

```
for (int x = 0; x < this.imageListToolbar3small.Images.Count; ++x)
        {
            Image temp = this.imageListToolbar.Images[x];
            temp.Save(this.imageListToolbar.Images.Keys[x] + ".png");
        } 
```

这来自对这个问题的回答：[How to Export Images from an Image List in VS2005?](https://stackoverflow.com/questions/1729417/how-to-export-images-from-an-image-list-in-vs2005)

我只是在 InitializeComponent 调用之后添加了代码，并在调试模式下保存了所有图像。我不需要运行完整的应用程序。

如果有人确实有更好的想法或小型应用程序来仅使用资源文件从工具栏中检索图像，那将不胜感激。我不会将其标记为答案，因为它更像是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T20:28:19.917

我需要从控件的私有 ImageList 成员中恢复图像。我使用了以下代码（抱歉，它是 VB，但易于重构）

```
 Dim cntrl = New TheClassWithThePrivateImageList
    Dim pi As Reflection.PropertyInfo, iml As System.Windows.Forms.ImageList, propName = "ThePropertyName"
    pi = cntrl.GetType.GetProperty(propName, Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance)
    iml = CType(pi.GetValue(cntrl), System.Windows.Forms.ImageList)
    For Each key In iml.Images.Keys
        Dim image As Drawing.Image = iml.Images.Item(key)
        image.Save($"{propName}_{key}")
    Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-13T14:45:28.507

我使用这种方法：

```
foreach (ToolBarButton b in toolBar.Buttons)
{
  //can be negative, for separators, because separators don't have images
  if (b.ImageIndex >= 0)
  {
    Image i = toolBar.ImageList.Images[b.ImageIndex];
    i.Save(b.ImageIndex + ".png");
  }
} 
```

# mysql - Symfony2 + Doctrine + MySQL 设计数据库修订历史

> ID：14770682
> 
> 赞同：0
> 
> 时间：2013-02-08T10:39:11.490
> 
> 标签：mysql, database, database-design, symfony, doctrine

我正在尝试创建一个自定义 CMS，可以在其中创建页面，并且用户可以更新页面标题、内容、元标题、元关键字和元描述。每个页面可以有多个文档和图像，但我也想记录每个页面的修订历史。此外，每个页面可以有一个父级和多个子级。但是，我不确定最好的方法，以及是否应该将相关实体（如图像、文档等）链接到页表或修订表？！

我刚在想：

```
**page table**

id 
parent_id
position

**revision table**

id page_id 
title 
content 
meta_header 
meta_description 
meta_keywords 
date_created 
date_modified

**page_images table**

id 
page_id or page_revision_id ?? 
image_id 
date_created 
date_modified

**images table**

id image_name 
image_path

**page_documents table**

page_id or page_revision_id ?? 
document_id 
date_created 
date_modified

**documents table**

id 
document_name 
document_path 
```

但是，我不确定图像和文档是否应该与页表或 page_revision 表相关？另外，页面的位置和不会被页面版本修改的parent_id之类的东西，应该在页面或page_version表中吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:48:24.917

你试过了`Loggable Doctrine Behaviour`吗？

[http://gediminasm.org/article/loggable-behavioral-extension-for-doctrine2](http://gediminasm.org/article/loggable-behavioral-extension-for-doctrine2)

# ios - ALAsset“真实”文件名

> ID：14770684
> 
> 赞同：0
> 
> 时间：2013-02-08T10:39:14.860
> 
> 标签：ios, xcode, alassetslibrary, alasset

我已将 MP4 从 iTunes 转移到我的 iPad。如果我打开视频应用程序，我可以看到它已列出 - 下面有缩略图和文件名 (my_file.mp4)。然而，资产的实际文件名在 iOS 中更改为某个唯一值 - 例如 IMG_001.MOV。我想获取视频应用程序 (my_file.mp4) 中列出的原始文件名。我在哪里可以找到这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-20T04:53:25.340

**这是获取AssetsFile真实姓名的代码**

```
ALAssetsGroupEnumerationResultsBlock assetsEnumerationBlock = ^(ALAsset *result, NSUInteger index, BOOL *stop) {

        if (result) {
            [self.arrAssetsMedia addObject:result];
        }

        ALAssetRepresentation *rep = [result defaultRepresentation];

        if (rep.filename!=nil) {
            NSLog(@"File name is::%@",rep.filename);
            [arrMediaFileName addObject:rep.filename];
        }
    }; 
```

注意：ALAssetRepresentation 有一个属性**- (NSString *)filename**借助这个我们可以得到文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:42:10.623

您无法从设备中获取原始名称的 MP4 文件。

将 PhotoGallery 项目（照片/视频）从您的设备检索到您的应用程序的唯一方法是通过**ALAssetLibrary**。

这些项目将具有诸如**assets-library://asset/asset.MP4?id=1000000001&ext=MP4 之类的名称**

**因此，您可以使用ALAsset Library**跟踪 URL 并获取 MP4 。

# javascript - 为什么能够在javascript中嵌入jstl？

> ID：14770686
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:39:19.997
> 
> 标签：javascript, html, jstl

Javascript 引擎如何解释下面的代码？

我以为只有嵌入在 html 中的 JSTL 标签被解释了？

```
<script type="text/javascript">
    <c:choose>
        <c:when test="${fn:contains(val, 'test')}">
            alert('test);
            </c:when>
    </c:choose>
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:45:51.217

JavaScript 引擎不会解释 JSTL，因为它看不到它。JSTL 在响应发送到浏览器之前在服务器端处理。JSTL/Java 方面只关心 JSTL/Java 代码 - 其他所有内容基本上都按原样在响应中传递。因此，无论您是否包含脚本元素或 JavaScript 或其他 html 元素，都将成为响应的一部分。

在您的浏览器中，如果您选择“查看页面源代码”，您将看到浏览器收到的代码——您会注意到它不包含任何 JSTL。

在您的具体示例中，响应将 - 根据 JSTL 测试的结果 - 要么包含带有该行的脚本元素，`alert('test')`要么仅包含一个空的脚本元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:49:10.000

您需要运行一个 Java Servlet / JSP 服务器（即 Tomcat），它使用嵌入的 JSTL 标记来处理您的 JSP 文件。浏览器不再看到 JSTL 标记。

# android - android应用程序中的asp.net Web服务

> ID：14770692
> 
> 赞同：0
> 
> 时间：2013-02-08T10:39:46.453
> 
> 标签：android, asp.net, web-services, soap, android-ksoap2

我是android的新手。任何人都可以帮助我在 android 应用程序中运行我的 asp.net Web 服务。我尝试使用 SOAP OBJECT 但应用程序强制关闭。Web 服务是一个简单的接受`my name`和返回的服务`HELLO + "my name"`。帮我写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:52:18.670

您可以使用这个[**库**](https://code.google.com/p/ksoap2-android/wiki/HowToUse?tm=2)来完全满足您的需要

这是[**教程**](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)告诉如何使用这个库来调用 web 服务

**注意**：源代码也可用

不要忘记在清单文件上授予互联网权限

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

**参考**：见[**Dummy Class**](https://stackoverflow.com/a/14568880/1450401)调用 SOAP 方法

# iphone - 目标 C：获取正确的浮点值（合理）

> ID：14770697
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:39:58.527
> 
> 标签：iphone, ios, objective-c, ios6, nsdecimalnumber

我在这方面做了很多工作，但找不到解决方案。连标题都无法解释清楚。

我有三个值重量，数量和总计

我做了以下

```
float wq = [[weightarray objectAtIndex:selectedint]floatValue];
float q = [quantity floatValue];
float total = wq * q; 
```

例如，如果

```
[weightarray objectAtIndex:selectedint] = @"3.14";
quantity = 4; 
```

那么结果是

```
wq = 3.140000  q= 4.000000 total = 12.560000 
```

但是我需要

```
wq = 3.14 total = 12.56 
```

该怎么办？我搜索了很多，有人建议使用NSDecimal，

```
NSDecimalNumberHandler *roundingBehavior = [NSDecimalNumberHandler decimalNumberHandlerWithRoundingMode:NSRoundPlain scale:2 raiseOnExactness:FALSE raiseOnOverflow:TRUE raiseOnUnderflow:TRUE raiseOnDivideByZero:TRUE]; 
```

但是这里的 scale 不是 2，wq 值可能有 3 或 4 个数字。

如果总 = 2.30000100 意味着我需要总 = 2.300001 如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:06:56.490

我不完全确定您的要求是什么，但似乎您希望这些值仅显示 2 dp 在这种情况下，您可以使用如下字符串格式：

```
 NSString *output = [NSString stringWithFormat:@"float = %.2f", 3.14]; 
```

.2 指定浮动应调整为 2 dp

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:34:31.860

可能有更直接的方法来实现它（我不知道）但这里有一个建议......

1.  像你已经做的那样转换为字符串。
2.  用于`[myString hasSuffix:@"0"]`查看它是否以零结尾。
3.  用于`[myString substringToindex:[myString length]-1]`创建没有最后一个零的新字符串。
4.  重复。

我知道这并不优雅，但除非有人有更好的解决方案，否则这至少可以满足您的需求。

更新：从头开始-我刚刚发现`[myString stringByTrimmingCharactersInSet:set]`。当然这一定是你需要的......？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:34:20.557

终于找到解决方案了，感谢 Martin

```
float total = 12.56000;
NSString *s = [NSString stringWithFormat:@"%f", total];
NSLog(@"%@",s);
BOOL success;
success =NO;
while(!success)
{
    if ([s hasSuffix:@"0"])
    {
       s = [s substringWithRange:NSMakeRange(0,[s length]-1)];
    }
    else if ([s hasSuffix:@"."])
    {
        s = [s substringWithRange:NSMakeRange(0,[s length]-1)];
        success = YES;
    }
    else
        success = YES;
}
NSLog(@"%@",s); 
```

如果总计 = 12.560000 它返回总计 = 12.56

如果总计 = 12.000000 它返回总计 = 12

如果总计 = 10.000000 它返回总计 = 10

如果总计 = 12.3000100 它返回总计 = 12.30001

# google-apps-script - 如何找到当前脚本文件所在文件夹的路径？

> ID：14770700
> 
> 赞同：5
> 
> 时间：2013-02-08T10:40:03.347
> 
> 标签：google-apps-script

如何找到当前文件夹的路径？我只想能够获取文件夹的路径，这样我就可以在不将路径输入脚本的情况下操作文件夹中的文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-18T16:22:55.243

对于电子表格，我发现这是可行的：

```
thisFileId = SpreadsheetApp.getActive().getId();
var thisFile = DriveApp.getFileById(thisFileId);
var parentFolder = thisFile.getParents()[0].getName(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T18:05:02.910

将这样的函数添加到您的脚本中

```
function getThisScriptInDrive() {
  return DriveApp.find("some unique string that wont be anywhere else")[0];
} 
```

这将搜索 Drive 并找到该脚本本身，因为它包含该字符串 - 就在函数调用中！- 无需在其他任何地方声明。只要您使用足够晦涩的字符串-我建议您在键盘上混合几百个字符-它在驱动器中将是唯一的，因此可以正常工作。

一旦你有了这个脚本的文件，你就可以调用 getParents() 等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T23:34:04.173

感谢[Corey](https://stackoverflow.com/users/1491380/corey-g)的回答和[Thomas](https://stackoverflow.com/users/1390235/thomas-van-latum)的回答，这是一个“全功能”版本，它显示了记录器中的文件夹树以及每个父母的 id ......只是为了好玩 ;-)

```
function getScriptFolderTree() {
  var thisScript = getThisScriptInDrive();
  var names = []
  var Ids = []
  var folder = thisScript.getParents()[0];
  while (folder.getName() != "Root"){
      names.unshift(folder.getName());
      Ids.unshift(folder.getId());
    var parents = folder.getParents();
       var folder = parents[0];
  }
Logger.log('Root/'+names.join().replace(/,/g,'/'))  
Ids.unshift(DriveApp.getRootFolder().getId())
Logger.log(Ids)  
}

function getThisScriptInDrive() {
  return DriveApp.getFileById("poiuytrezazertyujhgfdsdcvcxyydryfhchfh");
} 
```

![在此处输入图像描述](../Images/4c83ae1b7541002ab6b300b94642123a.png)

*（ID 被故意截断）*

**请注意**，此脚本运行良好，但如果修改了“随机字符串”，它会奇怪地停止工作......我想驱动器中的搜索引擎不喜欢这个更改，但我没有认真的解释（欢迎评论）但经过几分钟后它又可以工作了;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T15:33:36.530

你可以这样做：

```
function myFunction() {
  var thisScript = getThisScriptInDrive();
  var folder = thisScript.getParents()[0];
  while (folder.getName() != "Root"){
    var parents = folder.getParents();
    for (var i in parents){
      var folder = parents[i];
      Logger.log(folder.getName());
    }
  }
}

function getThisScriptInDrive() {
  return DocsList.find("`<jj!?=(<DW+.W/m7SBF:sgu/@B(&Cs3:{ajA~ys@KmN4&]ujhpZ~z[Tv?+dk}MpK,8pY=w&dny8N'74:.9H:~uCgY=7pRt4[Tn5")[0];
} 
```

这仅在文件夹只有 1 个父文件夹时才有效，因为它只需要 1 个路径。

编辑：感谢[Corey G](https://stackoverflow.com/users/1491380/corey-g)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-15T19:35:47.807

我调整了 Serge 的代码来编写一个通用函数

```
function getThisFilePath() {
  //let thisFile = DriveApp.getFileById(DocumentApp.getActiveDocument().getId());  // for a Doc
  let thisFile = DriveApp.getFileById(SpreadsheetApp.getActiveSpreadsheet().getId()); // for a Sheet
  let path = {name: '', folder: []};
  let folder = thisFile.getParents().hasNext() ? thisFile.getParents().next() : undefined;
  while (folder) {
    path.folder.unshift({name: folder.getName(), id: folder.getId()});
    folder = folder.getParents().hasNext() ? folder.getParents().next() : undefined; 
  }
  path.folder.forEach(folder => path.name += '/' + folder.name);
  Logger.log(path.name);
  return path;
} 
```

**记录输出**

上午 11:02:57 信息/我的驱动器/技术/开发/2022

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-27T22:16:24.923

我能够获得包含正在运行的脚本的文件夹：

```
//
// PrintScriptFolder -- print the name of the folder in which the running script resides.
//
function PrintScriptFolder()
{
  var scriptId = ScriptApp.getScriptId();
  console.info('scriptId = ' + scriptId);

  var file = DriveApp.getFileById(scriptId);
  var folders = file.getParents();
  if (folders.hasNext())
  {
    var folder = folders.next();
    var name = folder.getName();
    console.info('script folder name = ' + name);    
  }  
} 
```

诀窍是使用 ScriptApp 来获取正在运行的脚本的 ID。从那里开始非常简单：使用 DriveApp 获取文件 ID，使用 getParents() 获取（一个）父文件夹的列表，使用 next() 获取它，并使用 getName() 获取其名称。

# ruby-on-rails - 如何获取给定内容类型的默认扩展名？

> ID：14770707
> 
> 赞同：15
> 
> 时间：2013-02-08T10:40:23.790
> 
> 标签：ruby-on-rails, ruby

`content_type = "application/pdf"`给定也可以包含任何其他 mime 类型的变量。

如何获取内容类型的默认扩展名？

我目前有两种解决方案，看起来非常“复杂”。

**破解字符串**

```
content_type.split("/")[1] 
```

**使用 MIME::Types**

```
 require 'mime/types'
  MIME::Types[content_type].first.extensions.first 
```

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-03-07T00:32:36.850

您需要做的就是使用 ruby​​ 的`Hash.invert`方法。

[这个答案](https://stackoverflow.com/a/16804560/1396264)显示了如何做到这一点：

> [`Rack::Mime`](http://rack.rubyforge.org/doc/Rack/Mime.html)有这个能力（并且 Rack 是 Rails 的依赖项）：
> 
> ```
> require 'rack/mime'
> Rack::Mime::MIME_TYPES.invert['image/jpeg']  #=> ".jpg" 
> ```
> 
> 如果您要经常进行查找，您可能希望记住反向哈希，因为这不是一项廉价的操作。

从您的标签来看，您似乎仍然在使用导轨。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T10:46:37.700

mime 类型的第二个解决方案是您应该选择的解决方案。有几个原因：

*   第二种解决方案专为您的用例而设计
*   `Hack the string`可能不一致或返回意外结果（想想`application/postscript`有扩展名`eps`！）
*   请考虑，我们可能不能说，每种 mime 类型都有它的默认扩展名。例如：谁定义了 jpg（或 jpeg 或 JPG..）图像的默认扩展名？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-09T13:55:30.490

## 哑剧魔术

除了上面的答案，我个人喜欢使用[`MimeMagic`](https://github.com/minad/mimemagic).

```
require 'mimemagic'
MimeMagic.new('image/jpeg').extensions.first #=> 'jpg'
# Note that this does not include the dot (.) in the extension. 
```

## TL;博士;

MimeMagic 的其他可能有用的功能

```
MimeMagic.new('image/jpeg').image? #=> true
MimeMagic.by_magic('<?xml version="1.0" ?><test></test>').type #=> 'application/xml'
MimeMagic.by_extension('.html').type #=> 'text/html' 
```

我最近从`Rack::Mime`到 ，`MimeMagic`因为我还尝试从文件内容中检测 Mime 类型是什么。为了确保这是反向兼容的，我需要使用 MM 进行所有方向的转换：

*   内容 > 哑剧类型
*   Mime 类型 > 扩展名
*   扩展 > Mime 类型

### 不同的结果

我切换的主要原因是翻译`application/xml`为扩展时的差异：

```
MimeMagic.new('application/xml').extensions #=> ["xml", "xbl", "xsd", "rng"]
Rack::Mime::MIME_TYPES.invert['application/xml'] #=> ".xsl" 
```

突然间，我看到一些`xml`文件以`.xsl`扩展名保存。

# c++ - 在 32 位 linux 内核上使用 c++ 在堆上分配超过 2GB

> ID：14770710
> 
> 赞同：5
> 
> 时间：2013-02-08T10:40:32.487
> 
> 标签：c++, linux, x86, heap-memory, 32bit-64bit

这似乎是一个非常普遍的问题，但我仍然没有找到明确的答案。

我可以访问运行 linux 的服务器，该服务器具有 16 GB 的 RAM 和 16 核（64 位）CPU（/proc/cpuinfo 给出“Intel(R) Xeon(R) CPU E5520 @ 2.27GHz”）。但是，内核是 32 位的（uname -m 给出 i686）。当然，我没有root访问权限，所以我无法更改。

我正在运行我编写的 C++ 程序，它执行一些需要大量内存的计算，所以我需要一个大堆 - 但是每当我尝试分配超过 2GB 的空间时，我都会得到一个 badalloc，尽管 ulimit 返回“无限”。为简单起见，假设我的程序是这样的：

```
#include <iostream>
#include <vector>

int main() {
    int i = 0;
    std::vector<std::vector<int> > vv;
    for (;;) {
        ++i;
        vv.resize(vv.size() + 1);
        std::vector<int>* v = &(vv.at(vv.size() - 1));
        v->resize(1024 * 1024 * 128);
        std::cout << i * 512 << " MB.\n";
    }
    return 0;
} 
```

使用 g++（无标志）编译后，输出为：

```
512 MB.
1024 MB.
1536 MB.
2048 MB.
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc
Aborted 
```

据我了解，这是 32 位系统的限制，显然是因为 32 位指针只能容纳 2^32 个不同的地址（我是否正确假设如果我在同一台服务器上编译相同的程序，但该服务器运行64位内核，比程序可以分配超过2GB？）

这不是分配的内存是否连续的问题，如果我在示例程序中切片更薄，也会出现同样的问题，而在我的实际程序中，没有大块内存，只有很多小块。

所以我的问题是：有什么我能做的吗？我无法更改操作系统，但我当然可以修改我的源代码，使用不同的编译器选项等......但我确实需要超过 2GB 的内存，而且没有明显的方法来进一步优化算法程序使用。

如果答案是明确的“不”，那么知道这一点仍然很好。

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:56:37.517

如果您*一次需要所有*内存，不，如果不更改为 64 位内核，真的没有办法做到这一点（是的，这将允许您在单个进程中分配更多内存）

也就是说，如果您不需要一次全部使用内存，而只是快速访问，则您始终可以将部分内存存储卸载到另一个进程。

例如，这可以通过将数据存储在另一个进程中来工作，并让您的进程在需要时将共享内存从该进程临时映射到自己的内存空间中。它仍将存储在内存中，但在切换内存范围时会有一些开销。开销是否可以接受取决于您的内存访问模式。

这不是一个非常直接的方法，但是如果不更改内核来为您提供 64 位地址空间，听起来您有点束手无策。

编辑：您可以通过重新配置内核将限制提高到 2GB 以上，但这仅意味着您将在那里达到硬限制。此外，这将需要 root 访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:58:25.187

答案是明确的“不”。如果您无法更改操作系统，则无法提高限制。该限制适用于整个进程，显然没有单个分配可以超过每个进程的限制。

根据用于编译内核的选项，限制可能高于 2GB，但肯定会小于 4GB。但我猜重新编译内核也算作“改变操作系统”。

看到[这个讨论](https://serverfault.com/questions/330994/maximum-memory-allocation-for-32bit-linux-kernel "关于ServerFault的讨论")

是的，在 64 位操作系统上，这个限制会消失。

# iphone - 通过 iPhone 应用程序在 iCloud 中存储不同类型的文件

> ID：14770712
> 
> 赞同：0
> 
> 时间：2013-02-08T10:40:41.167
> 
> 标签：iphone, ios, xcode, ipad

基本上，我们可以在运行 IOS 应用程序时将文档格式的文件存储在 iCloud 中……但是我们可以在 iCloud 中存储一些其他的东西，例如图像、sqlite 文件……通过应用程序吗？

提前致谢...

# javascript - 使用 JavaScript 从 HTML 创建 PDF 文档

> ID：14770719
> 
> 赞同：13
> 
> 时间：2013-02-08T10:40:57.720
> 
> 标签：javascript, pdf

我想在 JavaScript 中从 HTML 创建一个 PDF 文档。我尝试使用该库`jsPDF`，但它不支持所有 HTML 格式。我可以使用其他任何库来创建 PDF 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-25T11:15:07.590

我刚刚编写了一个名为 jsPDF（给你下面的链接）的库，它只使用 Javascript 生成 PDF。它还很年轻，我很快就会添加功能和错误修复。在不支持数据 URI 的浏览器中也有一些解决方法的想法。它是在自由的 MIT 许可下获得许可的。

在我开始写它之前我遇到了这个问题，并认为我会回来让你知道:)

[http://code.google.com/p/jspdf/](http://code.google.com/p/jspdf/)

[http://hayageek.com/generate-pdf-with-javascript/](http://hayageek.com/generate-pdf-with-javascript/) //尝试这个链接一步一步的过程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T20:24:30.190

考虑安装[gitbook-](https://github.com/GitbookIO/gitbook-pdf) pdf`gitbook-pdf`使用`PhantomJS`并`rasterize.js`从`PDF``HTML`

你需要[NodeJS](http://nodejs.org)和 NPM

安装运行命令后：

`gitbook-pdf --format A4 generate index.html index.pdf`

> *A4*是默认纸张格式。还有其他选项！一探究竟
> 
> *index.html*是您的主要 HTML 文件
> 
> *index.pdf*是您的最终产品

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T23:23:18.073

您可以根据需要创建 html 页面，然后从 javascript 调用浏览器的打印功能，最终将网页导出为 pdf 或可打印形式

# javascript - Javascript 堆栈值显示

> ID：14770720
> 
> 赞同：0
> 
> 时间：2013-02-08T10:41:06.387
> 
> 标签：javascript

我在函数中有以下代码

```
document.getElementById('textFromUser').innerHTML = value;
document.getElementById("displayForward").value=stackforward+"\n"
valCurrent = value; 
```

“ `displayForward`”是一个文本区域。显示在该文本区域中的数组项目需要用一个分隔符分隔（创建一个列而不是用逗号创建的行）。

该页面有一个用户输入框，用户可以在其中输入值（字母或数字）。然后这些值被推送到堆栈并作为输出显示在该文本区域中。现在的问题是它们像这样显示在一行中：v、w、x、y、z ....即我的代码仍然以逗号分隔的一行显示项目。

我需要做的是让它们以不带逗号的列格式显示：
v
w
x
y
z

绕着这个圈子转，有人可以帮我解决上述问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:42:18.213

我可以看到你在那里也有一个拼写错误，我已经更正了。
试试下面的：

```
document.getElementById('textFromUser').innerHTML = value;
document.getElementById("displayForward").value=stackforward.join("\n")
valCurrent = value; 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:46:24.447

如果`stackforward`是`string`那么试试

```
document.getElementById('textFromUser').innerHTML = value;
document.getElementById("displayForward").value+=stackforward+"\n";
valCurrent = value; 
```

如果`stackforward`是`array`然后尝试

```
document.getElementById('textFromUser').innerHTML = value;
document.getElementById("displayForward").value=stackforward.join("\n");
valCurrent = value; 
```

# android - Cordova - 在 Blackberry 10 alpha 模拟器上运行跨平台 android 应用程序时出现问题

> ID：14770731
> 
> 赞同：5
> 
> 时间：2013-02-08T10:41:45.450
> 
> 标签：android, cordova, blackberry-10, blackberry-simulator

我在黑莓 10 Alpha 模拟器中运行跨平台 android 应用程序时遇到问题。该应用程序在 iphone、android 设备上运行时运行良好。但是当我在黑莓 10 中运行它时，它不会加载模板文件，因此是一个空白屏幕。

该项目基于主干框架，因此是模板文件。目前这些文件在我的硬盘中是本地的。我正在使用 ajax 调用加载模板。下面列出了生成的 logcat 输出：

```
02-08 05:30:51.861: D/CordovaLog(233525377):
     {"readyState":4,"responseText":"","status":404,"statusText":"error"} 
```

我已将以下内容添加到 config.xml：

```
<access origin="*"></access>
<access origin="http://127.0.0.1*"/> 
```

为了让应用程序在黑莓 10 上运行，我还缺少什么其他东西吗？我在 nook HD 上遇到了同样的问题，通过添加以下内容可以避免`onCreate`：

```
super.appView.getSettings().setAllowUniversalAccessFromFileURLs(true); 
```

但由于黑莓使用的是 Android 2.3.3，我无法添加相同的设置。

如果我遗漏了黑莓 10 的任何特定配置相关内容，请告诉我。

# xml - 确定 XSLT 中“使用”的所有 xpath 引用/xml 元素

> ID：14770732
> 
> 赞同：1
> 
> 时间：2013-02-08T10:41:50.053
> 
> 标签：xml, xslt, xpath, xslt-2.0

**问题：**

我们有一个庞大的 XML 文档。该文档在最终被用于 XSLT2 转换之前被传递了一点，该转换为在 PDF 渲染引擎中使用做准备。问题是当我们到达 PDF 渲染引擎时实际需要的 XML 百分比与其原始大小相比是很小的。我们仍然需要其他流程的完整 XML，但就流向渲染引擎的“流程”而言，我们希望尽快将 XML 剥离到其基本要素，以便传递的数据量是更小。

我们不能在此过程的早期进行最终的 XSLT2 转换，因为在此之前发生了更多的 XML 操作。

因此，我们想做的是创建一个新样式表，它简单地“保留”原始 XML 文档的结构，但只保留我们实际感兴趣的 XML 元素以用于报告目的。我们很高兴编写必要的 XSLT 文档，但由于最终的 XSLT2 文档是一个复杂的野兽，我们希望 stackoverflow 社区中的某个人能够轻松地执行以下操作：

**理想的解决方案：**

一种从现有 XSLT2 样式表中提取所有引用的 XML 元素（即它们的 xPath）列表的方法。我们希望这不仅包括在 selects/value-ofs/etc. 中，而且包括在 fors/conditions/etc 中的引用 XML 元素。

我意识到这可能没有一个简单的答案，但万一有人以前做过这个，或者可以给我一个起点，我将非常感谢任何帮助。

*提前致谢！*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:31:35.397

祝你好运。我不知道任何现成的解决方案。

我可以想到两种方法来解决这个问题；两者都将非常有趣并且（在一般情况下）需要大量工作，在这种情况下，只有当精简 XML 的优势对您来说非常值得时，或者如果您的特定情况证明要容易得多比一般情况。

1.  您可以检测 XSLT 样式表，以便每次任何模板访问节点时，它都会记录该节点的身份（例如，以简单 XPointer 样式的从根的数字路径的形式，或者可能以完全限定的通用标识符（从文档元素开始到被访问的元素的元素名称序列）。然后，第二个样式表可以读取访问的节点列表并制作输入副本，将每个节点标记为已访问是否使用过。为足够的输入执行此操作，您将（可能）看到可用于精简 XML 的模式。为足够的输入执行此操作，您可以检查给定的精简过程是否会（a）错过有些东西它可能会掉，或者（b）掉一些它不应该掉的东西。

2.  您可以尝试从样式表抽象地工作，从根元素的模板开始，并注意哪些可能的元素类将匹配哪些模板。如果您有一个好的输入词汇表模式并且可以假设该模式的有效性作为前提，这可能有助于您在这里推理。

这两个都非常具有挑战性——第二个看起来很像类型理论家试图做的那种事情，以使人们能够提前预测来自给定 XSLT 转换的输出对于特定输出是否有效，给定有效的输入。不幸的是，迄今为止对这项工作的简短总结似乎是“天哪，这很难！” 另一方面，您的任务比他们的任务简单一点：您只想知道，您能否通过查看转换提前知道 XML 文档中的特定分支永远不会影响转换的输出？而且您不必为一般情况解决它，您只需为一个特定的转换解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T10:41:45.707

您希望有一个 XSLT 样式表，它以与以前完全相同的结构将任何可用的内容复制到新文档中，只跳过那些被认为是多余的标签。

下面的样式表正是这样做的。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>

    <xsl:template match="/">
       <html><textarea rows="20" cols="120">
       <xsl:apply-templates />
       </textarea></html>
    </xsl:template>

    <xsl:template match="*|@*">
       <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
       </xsl:copy>
    </xsl:template>

   <xsl:template match="removeElmt1|removeElmt2|@removeAttr1|@removeAttr2">
   <!-- do nothing :) -->
   </xsl:template>

</xsl:stylesheet> 
```

说明：永远不要忘记 XSLT 不是一种编程语言，而是一种转换引擎的规范。

第一个模板指定开始该过程，第二个模板指定匹配所有内容，然后复制所有内容，第三个模板中指定的元素和属性除外。

> 注意：如果在文档中重用元素或属性，则在第三个模板的“匹配”规范中需要更具体的 Xpath 语句，以便仅删除指定的那些。

第一个模板包含两个冗余规范，以便在浏览器中读取结果。对于确切的副本，您需要删除`<html>`和`<textarea>`规范元素，并将输出方法设置为 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T08:55:35.917

一个较晚的补充：这里描述的内容听起来很像“文档投影”，这是一种可用于许多 XQuery 处理器（包括 Saxon）的技术。XQuery 比 XSLT 更适合静态分析（因为它缺乏非常动态的模板发送机制）。

文档投影将文档和查询作为输入，并生成一个文档作为输出，该文档仅包含原始文档中回答原始查询所需的那些部分。好处是文档投影过程是流式的——原始文档不需要在内存中构建；相反，投影过程充当来自 XML 解析器的事件的过滤器。

原始理论在此处描述：Amelie Marian, Jerome Simeon, 2003, Projecting XML Documents, Columbia University Academic Commons, [http://hdl.handle.net/10022/AC:P:29177](http://hdl.handle.net/10022/AC:P:29177)。

# c# - 从 Stream 读取文件

> ID：14770733
> 
> 赞同：3
> 
> 时间：2013-02-08T10:41:53.143
> 
> 标签：c#, web-services, stream, filestream

我将两个文件发布到我的自定义 Web 服务。现在我需要将此流读入单独的文件。

我发送了一个 XML 和一个文本文件，并在 Web 服务中读取如下：

```
StreamReader stream = new StreamReader(HttpContext.Current.Request.InputStream);
string xmls = stream.ReadToEnd(); 
```

我将流作为字符串获取如下（我还添加了边界）：

```
"\r\n------------------------------8cfd42d26566ff0\r\nContent-Disposition: form-data; name=\"uplTheFile\"; filename=\"E:\\AJ\\Demo\\EktronSite2\\XMLFiles\\XMLFile.xml\"\r\n Content-Type: application/octet-stream\r\n\r\n﻿&lt;?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<note xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://tempuri.org/XMLFile.xsd\">\r\n  <ID>101</ID>\r\n</note>\r\n------------------------------8cfd42d26566ff0\r\nContent-Disposition: form-data; name=\"uplTheFile\"; filename=\"C:\\TEMP\\log.txt\"\r\n Content-Type: application/octet-stream\r\n\r\nABCDEFGHIJKLMNOPQRSTUVWXYZ\r\n------------------------------8cfd42d26566ff0\r\n" 
```

我需要将相同的内容读入不同的文件。例如，我需要将 XML 读取为 XmlDocument 类型并将文本读取为 .docx。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T11:01:46.403

你试试这个：

```
Stream xmlStream = System.Web.HttpContext.Current.Request.Files[0].InputStream;
Stream txtStream = System.Web.HttpContext.Current.Request.Files[1].InputStream; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:02:45.427

我建议使用以下功能：

```
System.IO.File.WriteAllText(string path, string contents) 
```

它基本上会将您的字符串转储到文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-18T21:11:38.823

您可以使用以下代码：

```
var memoryStream = new MemoryStream();
await HttpContext.Request.Body.CopyToAsync(memoryStream); 
```

# python - 如何使用子图更改图形大小？

> ID：14770735
> 
> 赞同：498
> 
> 时间：2013-02-08T10:41:57.387
> 
> 标签：python, matplotlib

我在 Matplotlib 网站上遇到了[这个例子。](http://matplotlib.org/examples/pylab_examples/subplots_demo.html)我想知道是否可以增加图形大小。

我试过了

```
f.figsize(15,15) 
```

但它什么也没做。

* * *

## 回答 #1

> 赞同：918
> 
> 时间：2013-02-08T10:48:03.277

如果您已经拥有图形对象，请使用：

```
f.set_figheight(15)
f.set_figwidth(15) 
```

但是，如果您使用 .subplots() 命令（如您展示的示例中）创建一个新图形，您也可以使用：

```
f, axs = plt.subplots(2,2,figsize=(15,15)) 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2018-03-04T21:01:47.233

或者，`figure()`使用参数创建一个对象`figsize`，然后使用它`add_subplot`来添加您的子图。例如

```
import matplotlib.pyplot as plt
import numpy as np

f = plt.figure(figsize=(10,3))
ax = f.add_subplot(121)
ax2 = f.add_subplot(122)
x = np.linspace(0,4,1000)
ax.plot(x, np.sin(x))
ax2.plot(x, np.cos(x), 'r:') 
```

[![简单示例](../Images/fb483590b693defc0481bf20e8075f66.png)](https://i.stack.imgur.com/esDlK.png)

这种方法的好处是语法更接近调用 of`subplot()`而不是`subplots()`. 例如 subplots 似乎不支持使用 a`GridSpec`来控制 subplots 的间距，但两者都`subplot()`可以`add_subplot()`。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2021-03-11T06:56:51.017

除了前面的答案之外，这里还有一个选项可以通过以下方式单独设置图形的大小和图形内的子图的大小`gridspec_kw`：

```
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

#generate random data
x,y=range(100), range(10)
z=np.random.random((len(x),len(y)))
Y=[z[i].sum() for i in range(len(x))]
z=pd.DataFrame(z).unstack().reset_index()

#Plot data
fig, axs = plt.subplots(2,1,figsize=(16,9), gridspec_kw={'height_ratios': [1, 2]})
axs[0].plot(Y)
axs[1].scatter(z['level_1'], z['level_0'],c=z[0]) 
```

结果是这个数字： [![在此处输入图像描述](../Images/17e27c5985f2a6040f39d8741b3ceb47.png)](https://i.stack.imgur.com/GHOWE.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2021-10-07T06:56:19.297

您可以使用`plt.figure(figsize = (16,8))`更改单个图和最多两个子图的图形大小。（figsize 中的参数可以修改图形大小）

要更改更多子图的图形大小，您可以`plt.subplots(2,2,figsize=(10,10))`在创建子图时使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-04T14:17:11.167

对于有时有用的绘图：用于`subplots`从（二维）绘制直方图的多个子图的示例代码。`for loop``matplotlib``multivariate numpy array`

```
plt.figure(figsize=(16, 8)) 
for i in range(1, 7):
    plt.subplot(2, 3, i)
    plt.title('Histogram of {}'.format(str(i)))
    plt.hist(x[:,i-1], bins=60) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-26T16:03:12.603

```
 from matplotlib import pyplot as plt
   lis=[img,gaussian_img,gaussian_img_8bit]
   f,axs=plt.subplots(3,1,figsize=(25,25)) #ROW,COLUMN
   axs[0].imshow(lis[0])
   axs[1].imshow(lis[1])
   axs[2].imshow(lis[2]) 
```

# google-app-engine - 开发一个仅将 KML 文件内容指定为字符串的 KML 层？

> ID：14770737
> 
> 赞同：0
> 
> 时间：2013-02-08T10:42:03.893
> 
> 标签：google-app-engine, google-maps, google-maps-api-3

我们可以按如下方式开发 KML 层：

```
var crosshairLayer = new google.maps.KmlLayer('KML File PATH');
crosshairLayer.setMap(map); 
```

为此，我们必须在 Internet 上的某处上传一个 kml 文件，然后我们必须在新的 google.maps.KmlLayer('KML File PATH') 构造函数中传递 kml 文件 URL。

我们可以开发仅指定 KML 内容的 KML 层吗？我不想在某处上传 KML 文件，然后使用它的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:00:36.763

[geoxml3 解析器](http://code.google.com/p/geoxml3/)有一个 parseKmlString 方法，该方法接受一个包含有效 KML 的字符串并对其进行解析以生成本机 Google Maps API v3 对象（因此您失去了使用 KmlLayer 获得的基于图块的渲染的好处，这是否足够有效取决于如何你的 KML 很复杂）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:27:41.413

api 不直接支持这一点。您需要使用第 3 方 kml 解析器。请参阅[如何读取 KML 文件](https://stackoverflow.com/questions/11028584/how-to-read-kml-file/11034938)

# python - 'parted mklabel' 通过 Python 子进程引发错误

> ID：14770738
> 
> 赞同：0
> 
> 时间：2013-02-08T10:42:08.357
> 
> 标签：python, subprocess, disk, hard-drive

我想使用 subprocess.Popen 通过 python 脚本格式化硬盘。在 shell 中键入以下命令可以正常工作。请注意这个命令！

```
parted /dev/sdh mklabel gpt

Warning: The existing disk label on /dev/sda will be destroyed and all data on this disk will be lost. Do you want to continue?
Yes/No? 
```

我同意输入 Yes 并且磁盘已格式化。

在 Python 子进程中滚动它，Popen 以状态码 1 退出。我什至无法将“是”写入标准输入管道。

代码如下：

```
#test1
from subprocess import Popen, PIPE, STDOUT

p = Popen('parted /dev/sdh mklabel gpt', shell=True, stdin=PIPE, stdout=PIPE, stderr=STDOUT)
print p.wait() 
```

1

或者，

```
# test2
p = Popen('parted /dev/sdh mklabel gpt', shell=True, stdin=PIPE, stdout=PIPE, stderr=STDOUT)

p.stdin.write('Yes\n') 
```

IOError：[Errno 32] 管道损坏

我不确定 Popen 是否不将此警告视为错误，如果是这种情况，我该如何改变他的行为？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:24:27.613

通过将 -s 选项添加到命令中，如下所示（忽略输出），parted 成功退出。

```
Popen('parted -s /dev/sdh mklabel gpt', shell=True) 
```

# android - 片段中的标签

> ID：14770742
> 
> 赞同：1
> 
> 时间：2013-02-08T10:42:21.460
> 
> 标签：android, android-fragments, android-tabhost

我的 android 应用程序有两个片段 1\. 左一个（即菜单列表） 2\. 右一个（即左侧菜单一项的详细信息）

我面临的问题是在每个详细信息屏幕上添加标签（右侧）我使用“片段内的标签”或“如何在片段中添加标签主机”等标签进行了很多搜索。

请帮帮我。我被困在里面了！:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:44:47.700

使用最新的支持库，您可以在 Fragment 中使用 ViewPager。ViewPager 在类似选项卡的视图中显示片段（例如在 Play 商店中）。ViewPager 中的“标签”也是片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:48:54.270

我面临同样的问题，这个解决方案对我有用：

MainActivity - 此活动包含操作栏选项卡（不是 tabhost）

片段 1 (tab1)

Fragment2 (tab2) - 此 Fragment 在左侧有 1 个 LinearLayout 以显示权重 = 1 的菜单，在右侧有其他 LinearLayout 以显示详细信息。在右侧的linearLayout中，我设置了一个Radiogroup来显示这个radiogroup，就像标签一样（像这样：[https](https://github.com/makeramen/android-segmentedradiobutton) ://github.com/makeramen/android-segmentedradiobutton ，但带有标签资产）然后我将更改线性布局以模拟细节片段中的标签.

我希望你能明白

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T12:31:06.083

试试这个。

```
public class TabBar extends FragmentActivity implements
            TabHost.OnTabChangeListener {

        public static Context mContext;
        private TabHost mTabHost;
        private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabBar.TabInfo>();
        private TabInfo mLastTab = null;

        private class TabInfo {
            private String tag;
            private Class<?> clss;
            private Bundle args;
            private Fragment fragment;

            TabInfo(String tag, Class<?> clazz, Bundle args) {
                this.tag = tag;
                this.clss = clazz;
                this.args = args;
            }

        }

        class TabFactory implements TabContentFactory {

            private final Context mContext;

            public TabFactory(Context context) {
                mContext = context;
            }

            /**
             * (non-Javadoc)
             * 
             * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
             */
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }

        }

        /**
         * (non-Javadoc)
         * 
         * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
         */
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.tabs_layout);

            initialiseTabHost(savedInstanceState);
            if (savedInstanceState != null) {
                mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); 
            }
        }

        protected void onSaveInstanceState(Bundle outState) {
            outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                                    // selected
            super.onSaveInstanceState(outState);
        }

        private void initialiseTabHost(Bundle args) {
            mTabHost = (TabHost) findViewById(android.R.id.tabhost);
            mTabHost.setup();
            // mTabHost.getTabWidget().setStripEnabled(false);

            TabInfo tabInfo = null;
            TabBar.addTab(this, this.mTabHost,this.mTabHost.newTabSpec("Tab1"), (tabInfo = new TabInfo("Tab1", MyMapFragment.class, args)), "Favourite",
                    R.drawable.frd_tab_select_custom);
            this.mapTabInfo.put(tabInfo.tag, tabInfo);
            TabBar.addTab(this, this.mTabHost,this.mTabHost.newTabSpec("Tab2"), (tabInfo = new TabInfo(
                            "Tab2", PrflTab.class, args)), "Favourite",
                    R.drawable.me_tab_select_custom);
            this.mapTabInfo.put(tabInfo.tag, tabInfo);
            TabBar.addTab(this, this.mTabHost,
                    this.mTabHost.newTabSpec("Tab3"), (tabInfo = new TabInfo("Tab3", RequestFragment.class, args)), "Favourite",
                    R.drawable.request_tab_select_custom);
            this.mapTabInfo.put(tabInfo.tag, tabInfo);

            // Default to first tab

                this.onTabChanged("Tab1");

            mTabHost.setOnTabChangedListener(this);
        }

        /**
         * @param activity
         * @param tabHost
         * @param tabSpec
         * @param clss
         * @param args
         */
        private static View prepareTabView(Context context, String text,
                int drawable) {
            View view = LayoutInflater.from(context).inflate(
                    R.layout.tab_indicator, null);
            ((ImageView) view.findViewById(R.id.icon)).setImageResource(drawable);
            return view;

        }

        private static void addTab(TabBar activity, TabHost tabHost,
                TabHost.TabSpec tabSpec, TabInfo tabInfo, String title, int drawable) {
            // Attach a Tab view factory to the spec
            tabSpec.setContent(activity.new TabFactory(activity));
            String tag = tabSpec.getTag();
            View view = prepareTabView(tabHost.getContext(), title, drawable);
            tabSpec.setIndicator(view);

            tabInfo.fragment = activity.getSupportFragmentManager().findFragmentByTag(tag);
            if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
                FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();
                ft.detach(tabInfo.fragment);
                ft.commit();
                activity.getSupportFragmentManager().executePendingTransactions();
            }

            tabHost.addTab(tabSpec);
            boolean flag = activity.getIntent().getBooleanExtra("notifi_falg", false);
            if (flag) {
                tabHost.setCurrentTab(2);
            }
        }

        public void onTabChanged(String tag) {
            TabInfo newTab = this.mapTabInfo.get(tag);
            if (mLastTab != newTab) {
                FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
                if (mLastTab != null) {
                    if (mLastTab.fragment != null) {
                        ft.detach(mLastTab.fragment);
                    }
                }
                if (newTab != null) {
                    if (newTab.fragment == null) {
                        newTab.fragment = Fragment.instantiate(this,newTab.clss.getName(), newTab.args);
                        ft.add(R.id.tab_1, newTab.fragment, newTab.tag);
                    } else {
                        ft.attach(newTab.fragment);
                    }
                }

                mLastTab = newTab;
                ft.commit();
                this.getSupportFragmentManager().executePendingTransactions();
            }
        }

        @Override
        public void onStop() {
            super.onStop();
        }
    } 
```

# c# - 在列表框中来自数据库的值之后添加特定文本

> ID：14770748
> 
> 赞同：0
> 
> 时间：2013-02-08T10:42:35.807
> 
> 标签：c#, nhibernate

我有一个包含列表框和文本框的窗体。列表框包含一些值。即友好信、苛刻信、测试1等。

这些值通过绑定属性来自数据库。我在表 fIsTemplate 中有一个列。如果 fIsTemplate 为真，则相关行的列字母名称是默认字母。

我正在使用 nhibernate 创建标准来检索数据。

前任。友好的信和苛刻的信是默认模板。所以我必须在列表框中的两个字母名称之后添加“（默认）”文本，当我选择其中任何一个时，只有字母名称应该出现在文本框中。当我编辑字母名称时，只有编辑的字母名称保存到数据库中带有（默认）文本。

# c# - 内部带有静态实例的类

> ID：14770751
> 
> 赞同：0
> 
> 时间：2013-02-08T10:43:06.257
> 
> 标签：c#, visual-studio, design-patterns

```
public class MyClass
{
    // private fields

    //////////////////////////////////////////////////////////////////////////
    public MyClass(string param1, string param2)
    {
        // do some stuff
    }

    private static object syncRoot = new Object();
    private static volatile MyClass instance = null;

    public static MyClass  Log
    {
        get
        {
            if (instance == null)
            {
                lock (syncRoot)
                {
                    if (instance == null)
                        instance = new MyClass();
                }
            }

            return instance;
        }
    }

    private MyClass()
    {
        // do some stuff
    }

    public void myFunction(string txt, uint flags)
    {
         // do some stuff
    }
} 
```

这是我的课，我以这种方式使用它

```
 MyClass.Log.myFunction("some string", flags); 
```

但是当我在其他类函数中使用这个类时，经常会发现 MyClass 为 null 或 MyClass.Log 为 null。

我做错了什么？

除了这里的问题是我得到的错误：

```
 System.NullReferenceException: Object reference not set to an instance of an object.
   at MyNamespace.MyClass..ctor()
   at MyNamespace.MyClass.get_Log() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:51:40.850

您显示的代码看起来不错。
`MyClass`不能`null`因为它是一门课。`Log`也不应该`null`，你的单例实现看起来不错。

我的猜测是，问题在于您使用的是`MyClass`. 我猜想以`myFunction`某种方式使用仅在采用两个参数的构造函数中初始化的东西。

Actually, according to your stack trace the problem is inside the parameterless constructor. I guess you are trying to log something in there, like this : `instance.Log(...);`. That won't work, because at that point `instance` is still `null`. You should simply use `Log(...)` instead.

# .net - Json ISO 日期未反序列化为 DateTime 对象

> ID：14770755
> 
> 赞同：2
> 
> 时间：2013-02-08T10:43:31.277
> 
> 标签：.net, json, macos, mono

我正在创建一个可在 .net/mono 上运行并使用 Newtonsoft.Json 序列化信息的多平台应用程序。

在我尝试在具有完全相同版本的 Newtonsoft.Json.dll 的机器之间发送信息之前，一切都运行良好。

事实证明，日期以这样的 ISO 格式正确序列化：**"2013-02-08T12:11:39Z"**，但是当我尝试在 Mac OS 上反序列化它们时，我得到一个字符串而不是 DateTime 对象！

我使用序列化器设置做了一些实验：

```
private static readonly JsonSerializerSettings jsonSettings = new JsonSerializerSettings {
    DateTimeZoneHandling = DateTimeZoneHandling.Utc,
    DateFormatHandling = DateFormatHandling.IsoDateFormat,
    DateParseHandling = DateParseHandling.DateTime,
    Converters = new JsonConverter [] { new Newtonsoft.Json.Converters.IsoDateTimeConverter { DateTimeFormat = "yyyy-MM-ddTHH:mm:ssZ" } }
};

JsonConvert.DeserializeObject<object> ("\"2013-02-08T10:11:51Z\"", jsonSettings); 
```

但结果是直到完全相同的字符串**"2013-02-08T10:11:51Z"**。我做了更多的实验，结果发现使用完全相同的设置我无法像这样序列化和反序列化日期：

```
JsonConvert.DeserializeObject<object>(JsonConvert.SerializeObject(DateTime.Now, jsonSettings), jsonSettings); 
```

我仍然得到一个代表 ISO 日期的字符串。之后我也尝试了这个：

```
JsonConvert.DeserializeObject<object>(JsonConvert.SerializeObject(DateTime.Now)); 
```

现在我得到了正确的 DateTime 对象。但运行以下代码显示日期序列化的方式并不完全是 ISO 格式：

```
JsonConvert.SerializeObject(DateTime.Now); 
```

返回类似**"\"2013-02-08T12:22:25.974177+02:00\""**的东西，它不是标准的，无法用于通信。

最奇怪的部分是我有一个客户使用没有此类问题的 Mac。我开始认为这在某种程度上与操作系统有关，但是我指定的确切格式不能解决这个问题吗？

# opencv - opencv SimpleBlobDetector filterByInertia是什么意思？

> ID：14770756
> 
> 赞同：10
> 
> 时间：2013-02-08T10:43:36.447
> 
> 标签：opencv

我不明白 filterByInertia 是什么意思......我也不明白文档的小描述：

通过最小惯量与最大惯量之比。提取的 blob 将在`minInertiaRatio`（包括）和`maxInertiaRatio`（不包括）之间具有此比率。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-02-25T06:11:19.850

![斑点特征](../Images/61a54a745144b02edff421d9b543ea71.png). 上图几乎解释了不同过滤器参数的作用。当 SimpleBlobDetector 看到圆形斑点时最开心，不同的过滤器会过滤掉与圆形偏差的不同孩子。

**惯性测量斑点的短轴和长轴的比率。**

该图还显示了圆度和惯性之间的差异。我从[LearnOpenCV.com的](http://www.learnopencv.com)[Blob 检测教程](http://www.learnopencv.com/blob-detection-using-opencv-python-c/)中复制了这个图

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-08T16:55:47.713

我也一直在想这个问题；OpenCV 文档在 blob 检测方面不是很有帮助。

根据[其他斑点分析仪](http://www1.adept.com/main/KE/Data/ACE/AdeptSight_User/BlobAnalyzer_Results.html#Intrinsic_Inertia_Results)的描述，斑点的惯性是“斑点对围绕其主轴旋转的惯性阻力”。这取决于斑点的质量（我猜在这种情况下是区域）如何分布在整个斑点的形状中。

涉及到很多数学问题——其中大部分我不记得该怎么做——但是[这个页面底部关于二进制图像属性的](http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/OWENS/LECT2/node3.html)结果总结得很好（斑点检测是通过转换输入图像到一系列二进制图像）：

> 这个比率![I_min/I_max](../Images/90411c34becb9f7d6ae224ecc35d3a5d.png)让我们对物体的圆润程度有了一些了解。对于一条线，该比率为 0，对于圆形，该比率为 1。

所以基本上，通过指定`minInertiaRatio`，`maxInertiaRatio`您可以根据它们的拉长程度过滤斑点。惯性比为 0 将产生细长的斑点（更接近线），而惯性比为 1 将产生区域更集中于中心（更接近圆形）的斑点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-24T16:03:51.230

这是物理解释：

如果你在一张卡片上剪下一团，你可以找到它的重心，然后在上面连接一个轴，穿过这个点（轴*平行*于卡片），然后旋转它，测量它的力矩的惯性。根据形状的不同，您可能会根据放置轴的方式获得不同的值。对于椭圆，当轴沿长（长）轴连接时，您将获得最低值，而当轴沿短轴放置时，您将获得最大值（这样更多的卡片远离轴）。当然，对于一个圆来说，惯性总是相同的。

如果有不同的值，在某个方向总是会有一个“最大”惯性，而轴与“最大”相距 90 度的位置总是有一个“最小”惯性。惯性比只是这些惯性之间的比率，最小/最大。

对于不是椭圆的形状，该度量告诉您整体形状是大致拉长的，还是在各个方向上大致相同；不特别关心不均匀的边界或切口和凹陷（圆度和凸度）。

在数学上，它做了这样的事情：

1.  将 blob 中的点集视为 (x,y) 样本的总体
2.  求这些的均值，以及协方差矩阵 x 与 y
3.  求协方差矩阵的两个特征值（由于该矩阵的性质，它们与其奇异值相同）
4.  惯性比是这两个值之间的比率，最小/最大。

# objective-c - 如何在应用程序中插入'actionsheet ..Facebook 和 Twitter 功能

> ID：14770758
> 
> 赞同：0
> 
> 时间：2013-02-08T10:43:50.140
> 
> 标签：objective-c, xcode, frameworks, uibutton, uiactionsheet

如何在操作表中插入两个具有两个功能 facebook 和 Twitter (social.framework) 的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:41:06.157

克里斯蒂安，对于您的其他问题，请参阅我的其他答案。Ray Wenderlich 的网站对此有很好的教程。他们还有一本很棒的 iOS 6 by tutorials 书籍，向您展示了如何做到这一切。它确实让您了解新的 social.framework 的基础知识。他们教您如何在操作表中获取 Facebook 和 Twitter，以及如何将您自己的操作放入操作表中。即使你只是跟着网上的tut，你也会获得很多信息。试试看！

[http://www.raywenderlich.com](http://www.raywenderlich.com)

转到教程选项卡并滚动查看大量有用信息。希望这可以帮助。

# iphone - 本地通知行为

> ID：14770759
> 
> 赞同：0
> 
> 时间：2013-02-08T10:43:55.867
> 
> 标签：iphone, ios

当我的应用程序未激活（在后台）时，我会收到本地通知。单击此通知应用程序后，该应用程序变为活动状态。自动收到本地通知后是否可以激活应用程序，而无需单击它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:49:53.503

不，这是不可能的。
来自[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

> 如果有通知警报并且**用户点击或单击操作按钮（或移动操作滑块）**，应用程序将启动并调用方法以传入本地通知对象或远程通知有效负载。

需要用户执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:46:40.997

**不**，

如果用户没有执行某些操作，您将无法从后台自动启动任何应用程序。

因此，对于本地通知，即使触发本地通知，也无法从后台恢复应用程序。用户必须单击通知才能打开应用程序。

希望这些信息对你有帮助..

# java - Java - 文件比较；在下一个并发行中搜索字符串（忽略空格）

> ID：14770763
> 
> 赞同：1
> 
> 时间：2013-02-08T10:44:08.977
> 
> 标签：java, full-text-search, compare, string-comparison, stringtokenizer

我正在尝试用 Java 进行文件比较。如何在下一个出现的行中搜索字符串（忽略空格）

例如：

> ```
>  **File1**                **File2**
>      <name>abc</name>  |   <name>abc</name>              Equal
>         <age>21</age>  |                                 Not Equal
> <company>zyz</company> |   <age>21</age>                 Not Equal
>                        |   <company>zyz</company>        Not Equal 
> ```

目前按照我的逻辑，我有一个带有 CSV 的字符串

> ```
> <name>abc</name>, <age>21</age>, <company>zyz</company>, ####Start of target File####,
> <name>abc</name>,              , <age>21</age>, <company>zyz</company> 
> ```

**问题：** 在 CSV 的第二行中，年龄值是空白的。当我的程序检查 File1 中的第二行和 File2 中的第二行时，它们不相等，因此它也为相应的行提供 false。

**需要实现的目标**：我必须忽略空格并检查下一个出现的值，如果两者相等，则将 file1 的第二行向下移动。

输出必须如下所示

> ```
>  **File1**                **File2**
>      <name>abc</name>  |   <name>abc</name>
>                        |
>         <age>21</age>  |   <age>21</age>
> <company>zyz</company> |   <company>zyz</company> 
> ```

这是我迄今为止尝试过的

```
public List<String> FileCompare(String source, String target) {
try {
    //String source="D:/reference.xml";
    //String target="D:/comparison.xml";
    //Diff d=new Diff(myControlXML, myTestXML);
    FileReader fr = new FileReader(source); 
    FileReader fr1 = new FileReader(target);

    BufferedReader br = new BufferedReader(fr);
    BufferedReader br2 = new BufferedReader(fr1);

    String s1,s2;

    String st= new String();
    String st2= new String();

    while((s1 = br.readLine()) != null) { 
            myList.add(s1);
            st=st.concat(s1);   
            //System.out.println(s1);
    } 

    Collections.addAll(myList, "#########Start of target#########");

    while((s2 = br2.readLine())!=null){

        st2=st2.concat(s2);

        myList1.add(s2);
    }
    myList.addAll(myList1);
    System.out.println(myList);
    //System.out.println(myList1);
}
catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
return myList;
} 
```

这是主要代码

```
 Compare c=new Compare();
//FileCompare returns CSV string
List<String> s=c.FileCompare("D:/reference.xml", "D:/comparison.xml"); 

String pdf=s.toString();
String[] tokens=pdf.split(",");
for(String token:tokens)
    System.out.println(token); 
```

我如何通过忽略空格来做到这一点？请帮忙

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:53:04.913

我猜您正在将文件拆分为逗号分隔值。因此，您有两个逗号分隔值数组，每个数组对应于特定文件。比较两个数组中的第一个值。如果它们相等，则增加两个数组的计数器。如果遇到任何条目的空白空间，则单独增加该计数器。如果在两个数组中都遇到空条目，则增加两者。

我希望你得到了算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:39:59.060

如果字符串不为空，则两个循环都会连接一个字符串，而不检查它是否实际上充满了空格。尝试以下操作以防止附加空行：

```
s1 = br.readLine();
while(s1 != null) { 
    if(s1.trim().length() > 0) {
        myList.add(s1);
        st=st.concat(s1);   
        //System.out.println(s1);
    }
    s1 = br.readLine();
} 
```

for`s2`和他的循环也是如此。

# java - InputStreamReader 的 readln 不起作用

> ID：14770764
> 
> 赞同：0
> 
> 时间：2013-02-08T10:44:09.633
> 
> 标签：java, netbeans, vpn, telnet

我必须使用 java 与服务器发送和接收一些流。协议是 telnet，如果我在 windows 中使用 cmd 和这个命令：`"telnet 10.0.1.5 9100"`并且在`"^AI202"`我得到响应之后。

代码java：

```
import java.io.*;

import java.net.*;

public static void main(String[] args) throws SocketException, IOException {

    Socket s = new Socket();

    PrintWriter s_out = null;

    BufferedReader s_in = null;

    String remoteip = "10.0.1.5";

    int remoteport = 9100;

    s.connect(new InetSocketAddress(remoteip , remoteport));

    s_out = new PrintWriter( s.getOutputStream(), true);

    s_in = new BufferedReader(new InputStreamReader(s.getInputStream()));

    String message = "^AI202";

    try{

    System.out.println(s_in.readLine());

    }

    catch(Error e){

    System.out.println(e);

    }

    s_out.close();

    s_in.close();

    s.close();

} 
```

问题是一样的：`s_in`调用方法`readLine()`和程序循环无限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:40:23.557

问题是`telnet`协议不会用换行符终止命令。

将您的阅读块更改为

```
 try {
    char [] cbuf = new char[7];
    System.out.println(s_in.read(cbuf, 0, cbuf.length));
  } catch(Error e){
    System.out.println(e);
  } 
```

你会得到一些输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:53:08.710

我认为 System.out.println(s_in.readLine()); 将尝试一遍又一遍地阅读它，每次都失败并导致无限循环。

尝试

```
 String line ="";

 while ((line = s_in.readLine()) != null) { 

      // Do what you want to do with line.          

} 
```

[Java Socket BufferReader.readline 获取 null](https://stackoverflow.com/questions/9845410/java-socket-bufferreader-readline-get-null)

# c# - 当两个值都是键时使用什么集合

> ID：14770769
> 
> 赞同：1
> 
> 时间：2013-02-08T10:44:27.923
> 
> 标签：c#, optimization, collections

我正在寻找适合以下情况的集合：

每个露营都是独一无二的 每个孩子都是独一无二的，但不一定要在露营中。在代码中，我将其构建为：

```
Dictionary<Camping, List<Child>> list = new Dictionary<Camping, List<Child>>() 
```

然后对于每个在露营的孩子

```
private void AddChildToCamping(Camping camping, Child child)
    {
        if (!list .ContainsKey(camping))
        {
            list .Add(camping, new List<string>());
        }
        list[camping].Add(child);
    } 
```

但是稍后我们需要快速查看孩子是否在露营中，如果是，孩子在露营中。使用上面的代码，这意味着循环遍历露营的完整列表和孩子列表。

```
bool foundInCamping = false;
foreach (Camping key in list.Keys)
{
    List<Child> children;
    bool ok = list.TryGetValue(key, out children);
    if (ok)
    {
        if (children.Contains(targetChild))
        {
            foundInCamping = true;
            break;
        }
    }
} 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:46:51.560

`Child`唯一的解决方案是从to有第二个字典映射`Camping`：`Dictionary<Child, Camping>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:51:38.967

为此，我使用了以下扩展方法：

```
 public static KeyType[] ReverseLookup<KeyType, ValueType>(this Dictionary<KeyType, ValueType> subject, object lookupValue)
       // where KeyType : class
        where ValueType : class
    {
        var channels =
            from KeyValuePair<KeyType, ValueType> dcPair in subject
            where dcPair.Value == lookupValue
            select dcPair.Key;

        return channels.ToArray();
    } 
```

请注意，虽然每个键只能出现一次，但没有什么可以阻止一个值具有多个键，因此您会得到 ketype[] 。

用法： Keytype[] myKeys[] = myDictionary.ReverseLookup(myValue);

如果您想要一对一的映射字典，我认为您将不得不编写自己的版本...

# javascript - 无法让 signalR 与 requireJS 一起工作

> ID：14770772
> 
> 赞同：0
> 
> 时间：2013-02-08T10:44:41.227
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, requirejs, signalr

我很难让信号器与 requirejs 一起工作。这是我的代码，但出现以下错误：

`_Uncaught Error: SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/hubs'></script>._`

代码：

```
<script src="~/Scripts/jquery.signalR-1.0.0-rc2.js"></script>
<script src="~/signalr/hubs"></script>
<script type="text/javascript">

// requirejs configuration setup
requirejs.config({
        baseUrl: '@string.Format("{0}://{1}{2}Scripts/modules", Request.Url.Scheme, Request.Url.Authority, Url.Content("~"))', // this might need to change as it depends on the number of / in the url...?
        paths: {
                'jquery': '../jquery-1.9.0',
                'bootstrap': '../bootstrap',
                'knockout': '../knockout-2.2.1',
                'noext': '../noext',
                'sigr': '../jquery.signalR-1.0.0-rc2'
        },
        shim: {
                "sigr": {
                        deps: ['jquery']
                },
                "noext!signalr/hubs": {
                        deps: ['sigr']
                }
        }
}); 
```

有没有人对我为什么或如何让它发挥作用有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:54:07.140

我能够使用requirejs ..我按照[http://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)上的教程了解如何插入jquery并添加信号参考以使其工作

```
require(["jquery", "jquery.alpha", "jquery.beta","jquery.signalr-1.0.0-rc2","/signalr/hubs"], 
    function($) {
    }
); 
```

我认为您必须修改配置才能执行以下任一选项1：

```
paths: {
    'jquery': '../jquery-1.9.0',
    'bootstrap': '../bootstrap',
    'knockout': '../knockout-2.2.1',
    'noext': '../noext',
    'sigr': '../jquery.signalR-1.0.0-rc2'
    'hubs': '/signalr/hubs'
}, 
```

选项2：

```
shim: {
    "sigr": {
        deps: ['jquery']
    },
    "noext!**/**signalr/hubs": {
        deps: ['sigr']
    }
} 
```

# asp.net-mvc - Azure：从 App_Data 读取文件

> ID：14770775
> 
> 赞同：1
> 
> 时间：2013-02-08T10:44:49.943
> 
> 标签：asp.net-mvc, azure

我有一个不是用于 SSL 的证书文件，而是用于其他目的。它位于 App_Data 文件夹中。当我的网站部署在 Azure 中时，是否可以读取此文件？

我试过这个，但不工作：

```
Server.MapPath("~/App_Data/cert.pfx); 
```

# css - twitter-bootstrap 中的标签@-ms-viewport 是什么？

> ID：14770777
> 
> 赞同：5
> 
> 时间：2013-02-08T10:44:53.000
> 
> 标签：css, twitter-bootstrap

在我的 Twitter Bootstrap (Responsive) 文件 2.2.2 版中，有一个标签

```
@-ms-viewport { 
    width: device-width 
} 
```

我见过`@media`和其他`@`的。但是没有`@-ms-viewport`. 它与Microsoft或IE有关吗？为什么它是第一个样式声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T10:46:51.763

你可以在这里读更多关于它的内容：

[@-ms-viewport 规则 (Internet Explorer)](http://msdn.microsoft.com/en-us/library/ie/hh869615%28v=vs.85%29.aspx)

> 指定描述视口的属性。

# xna - 在 MonoGame 中为目标视口大小/设备缩放精灵（不是纹理）

> ID：14770779
> 
> 赞同：0
> 
> 时间：2013-02-08T10:45:04.590
> 
> 标签：xna, scaling, monogame

当您必须在游戏上下文中显示一系列视觉组件（精灵）时，每个组件都需要相对于目标设备视口的高度和宽度（不一定是纵横比）的字面高度和宽度：

*   是否有一个缩放类来帮助根据当前设备视口大小以动态方式提出缩放比例？
*   我需要推出自己的缩放比例算法吗？
*   我应该注意的任何跨平台问题？

*这不是关于基于目标设备加载资产​​的问题，也不是关于如何执行精灵缩放的问题（在此处描述：http: [//msdn.microsoft.com/en-us/library /bb194913.aspx](http://msdn.microsoft.com/en-us/library/bb194913.aspx)），而是如何根据视口大小确定精灵比例的问题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:58:07.513

您始终可以创建自己的缩放实现。

例如，默认目标视口尺寸为：

```
const int defaultWidth = 1280, defaultHeight = 720; 
```

您当前的屏幕尺寸是`800×600`，这给了您一个（让我们使用 a`Vector2`而不是两个浮点数）：

```
int currentWidth  = GraphicsDevice.Viewport.Width,
    currentHeight = GraphicsDevice.Viewport.Height;

Vector2 scale = new Vector2(currentWidth  / defaultWidth,
                            currentHeight / defaultHeight); 
```

这给了你一个`{0.625; 0.83333}`. 您现在可以在一个方便的`SpriteBatch.Draw()` [重载](http://msdn.microsoft.com/en-US/library/bb196420%28v=xnagamestudio%29.aspx)中使用它，该重载需要一个`Vector2`缩放变量：

```
public void Draw (
     Texture2D texture,
     Vector2 position,
     Nullable<Rectangle> sourceRectangle,
     Color color,
     float rotation,
     Vector2 origin,
     Vector2 scale,
     SpriteEffects effects,
     float layerDepth
) 
```

或者，您可以将所有内容绘制到 a`RenderTarget2D`并将生成的图像从那里复制到主屏幕上的拉伸纹理，但这仍然需要上述`SpriteBatch.Draw()`重载，尽管如果您有很多绘图调用，它可能会节省您的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T14:14:32.247

生成规模的另一个选择是利用：

```
var scaleMatrix = Matrix.CreateScale(
           (float)GraphicsDevice.Viewport.Width / View.Width,
           (float)GraphicsDevice.Viewport.Width / View.Width, 1f); 
```

[http://msdn.microsoft.com/en-gb/library/bb195692.aspx](http://msdn.microsoft.com/en-gb/library/bb195692.aspx)。

但这并不能满足我的需求，因为我必须滚动自己的变换来将触摸输入位置映射到“变换后的”精灵（通过知道自己的位置和大小来响应用户触摸输入）。

最后，我使用了**基于百分比的方法。**

我基本上得到了视口的高度和宽度......

```
GraphicsDevice.Viewport.Width  
GraphicsDevice.Viewport.Height 
```

...然后根据我自己使用百分比与屏幕的相对大小计算我的​​精灵的高度和宽度（注意：“如前所述，它们采用文字高度和宽度”）。

```
//I want the buttons height and width to be 20% of the viewport 
var x, y = GraphicsDevice.Viewport.Width * 0.2f; //20% of screen width
var btnsize = new Vector(x,y);
var button = new GameButton(btnsize); 
```

然后，一旦我有了按钮的大小，我就可以根据按钮的大小和可用的视口大小来计算屏幕上的位置以呈现按钮，而不是在基于百分比的相对位置上工作。

# android - 在 android 中的 grouplayput 上带有编辑文本的可扩展列表

> ID：14770783
> 
> 赞同：1
> 
> 时间：2013-02-08T10:45:19.310
> 
> 标签：android, android-edittext, expandablelistview

我创建了一个可扩展的 ListView，我在其中创建了一个自定义组布局。

在组布局上，我在右侧创建了一个 EditText。每当我将文本放在 EditText 上并单击可展开列表时，列表不会展开/折叠。

当我对 EditText 执行可聚焦错误时，列表将展开/折叠。

如何解决这个问题呢？请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:57:10.917

编辑文本本身就是一个焦点组件。如果我们在列表视图中放置可展开列表，则列表单击和折叠展开属性将不起作用。*使用 EditText、Button、ImageButton 等时也会出现同样的问题，*

所以你需要使用：

1.在可扩展列表中使用以下属性：

```
 android:descendantFocusability="blocksDescendants" 
```

或 2\. 在 EditText 中使用以下属性

```
android:focusable="false" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:40:04.647

今天，我解决了可扩展列表和N级可扩展列表视图的上述问题。我附上了代码。首先，我在您的活动/适配器上设置了可聚焦的错误编辑文本，不要在 EditText 的 xml 上。

```
EditText.setFocusable(false); 
```

其次，我使用了触摸监听器，因为在这里我将编辑文本设置为可聚焦。这样我就可以轻松地在编辑框上键入文本。

```
EditText.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                EditText.setFocusableInTouchMode(true);
                return false;
            }
        }); 
```

之后，我使用了 KeyListener，因为在这里我根据位置/组位置获取数据并在哈希映射上设置值。所以每当我点击 2 级或 N 级可扩展列表视图时，数据都不会改变。那就是在可扩展列表视图中非常重要。在完成按键后，我将隐藏键盘。并将编辑文本设置为可聚焦 false，以便我可以自由展开/折叠。

```
EditText.setOnKeyListener(new OnKeyListener() {
            String editValue;
            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                if (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)
                {
                    editValue=groupHolder.numberEdit.getText().toString().trim();
                    EditText.setFocusable(false);
                    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY,0);
                }
                setEditValueHashMap.put(groupPosition, editValue);
                return false;
            }
        }); 
```

# iphone - 搜索 UITableview

> ID：14770790
> 
> 赞同：0
> 
> 时间：2013-02-08T10:45:46.763
> 
> 标签：iphone, ios, objective-c, uitableview, uisearchbar

我正在尝试在 UITableview 中进行搜索。我已经以正确的方式实现了 UISearchDisplayDelegate、UISearchBarDelegate 方法。这就是我的 cellForRowAtIndexPath 的样子。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if ( cell == nil ) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView){
        Contact *contact = [self.filteredListContent objectAtIndex:indexPath.row];

        NSString *text = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
        NSLog(@"CellForRowAtIndexPath contact text is %@",text);
        cell.textLabel.text = text;

        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];

    }else{
    NSString *alphabet = [firstIndex objectAtIndex:[indexPath section]];

    //---get all states beginning with the letter---
    NSPredicate *predicate =
    [NSPredicate predicateWithFormat:@"SELF.name beginswith[c] %@",alphabet];
    NSArray *contacts = [listContent filteredArrayUsingPredicate:predicate];
    Contact *contact = [contacts objectAtIndex:indexPath.row];

    NSString *text = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
    cell.textLabel.text = text;

       [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    }

    return cell;

} 
```

这是我的 filterContentForSearchText 方法

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    [self.filteredListContent removeAllObjects]; // First clear the filtered array.

    for (Contact *contact in listContent)
    {
        NSString *searchString = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
        NSRange range = [searchString rangeOfString:searchText options:NSCaseInsensitiveSearch];
        if (range.location != NSNotFound) {
            [self.filteredListContent addObject:contact];
            [self.searchDisplayController.searchResultsTableView reloadData];
        }
    }
} 
```

奇怪的是。在我的 cellForRowAtIndexPath 中，它返回了正确的数据。但是 tableview 本身一直给我 NO RESULTS 标签。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:28:03.193

首先[在 UITabelView 文档之上添加 UISearchBar](http://www.iphonedeveloperdiary.com/2010/07/adding-a-uisearchbar-to-top-part-tableview/)

然后取两个`NSMutableArray`并将**一个数组添加到另一个数组**中`ViewDidLoad`，例如，

```
self.listOfTemArray = [[NSMutableArray alloc] init]; // array no - 1
self.ItemOfMainArray = [[NSMutableArray alloc] initWithObjects:@"YorArrayList", nil]; // array no - 2 

[self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray]; // add 2array to 1 array 
```

**并编写以下 UISearchBar 的委托方法**

```
- (void)searchBar:(UISearchBar *)theSearchBar textDidChange:(NSString *)searchText
{
        NSString *name = @"";
        NSString *firstLetter = @"";

    if (self.listOfTemArray.count > 0)
         [self.listOfTemArray removeAllObjects];

        if ([searchText length] > 0)
        {
                for (int i = 0; i < [self.ItemOfMainArray count] ; i = i+1)
                {
                        name = [self.ItemOfMainArray objectAtIndex:i];

                        if (name.length >= searchText.length)
                        {
                                firstLetter = [name substringWithRange:NSMakeRange(0, [searchText length])];
                                //NSLog(@"%@",firstLetter);

                                if( [firstLetter caseInsensitiveCompare:searchText] == NSOrderedSame )
                                {
                                    // strings are equal except for possibly case
                                    [self.listOfTemArray addObject: [self.ItemOfMainArray objectAtIndex:i]];
                                    NSLog(@"=========> %@",self.listOfTemArray);
                                }
                         }
                 }
         }
         else
         {
             [self.listOfTemArray addObjectsFromArray:self.ItemOfMainArray ];
         }

        [self.tblView reloadData];
} 
```

并写在`cellForRowAtIndexPath`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Foobar"];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Foobar"];

        cell.selectionStyle = UITableViewCellSelectionStyleBlue;
        cell.textLabel.textColor = [UIColor blackColor];
    }

        cell.textLabel.text = [self.listOfTemArray objectAtIndex: indexPath.row];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:00:34.920

按照本教程[如何添加搜索栏uitableview](http://www.appcoda.com/how-to-add-search-bar-uitableview/) ..

只需查看方法**cellForRowAtIndexPath:当用户从****UISearchBar**搜索记录时如何设置搜索数组...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"RecipeCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        cell.textLabel.text = [searchResults objectAtIndex:indexPath.row];
    } else {
        cell.textLabel.text = [recipes objectAtIndex:indexPath.row];
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:52:03.090

1.  使用数组显示表中的数据(showDataArray)
2.  使用数组存储所有输入值（dataArray）
3.  始终使用 showDataArray 填充您的表格
4.  在搜索字段中，当字符范围更改时，调用一个方法来使用 dataArray 中的谓词过滤数据
5.  将值保存到 showDataArray
6.  调用表 reloadData

# jdbc - 无法在简单的 java 类中加载 OracleDriver 类

> ID：14770791
> 
> 赞同：0
> 
> 时间：2013-02-08T10:45:46.603
> 
> 标签：jdbc, java

// DbConnector.java

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.SQLException;

public class DbConnector {

    public static void main(String[] argv) {

        System.out.println("-------- Oracle JDBC Connection Testing ------");

        try {

            Class.forName("oracle.jdbc.driver.OracleDriver");

        } catch (ClassNotFoundException e) {

            System.out.println("Where is your Oracle JDBC Driver?");
            e.printStackTrace();
            return;

        }

        System.out.println("Oracle JDBC Driver Registered!");

        Connection connection = null;

        try {

            connection = DriverManager.getConnection(
                    "jdbc:oracle:thin:@172.17.119.108:1526:GESSDEV", "username",
                    "password");

        } catch (SQLException e) {

            System.out.println("Connection Failed! Check output console");
            e.printStackTrace();
            return;

        }

        if (connection != null) {
            System.out.println("You made it, take control your database now!");
        } else {
            System.out.println("Failed to make connection!");
        }
    }

} 
```

我有一个名为 odbc14.jar 的 jdbc jar

javac -classpath odbc14.jar；数据库连接器.java

编译成功

java -classpath odbc14.jar; 数据库连接器

OUTPUT :: -------- Oracle JDBC 连接测试 ------ 您的 Oracle JDBC 驱动程序在哪里？

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:164)
        at DbConnector.main(DbConnector.java:13) 
```

请帮我解决这个问题

上面的问题我已经解决了。现在我得到了新的例外

-------- Oracle JDBC 连接测试 ------ Oracle JDBC 驱动注册！连接失败！检查输出控制台

```
java.sql.SQLException: Io exception: The Network Adapter could not establish the connection
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
        at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)
        at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
        at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:420)
        at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
        at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
        at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
        at java.sql.DriverManager.getConnection(DriverManager.java:525) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T10:49:18.513

使用的`JDBC`驱动程序`ojdbc14.jar`是`oracle.jdbc.OracleDriver`.

请参阅：[加载 JDBC 驱动程序类 - ojdbc14.jar](http://www.herongyang.com/JDBC/Oracle-JDBC-Driver-Load-Class.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:51:10.827

将您的`ojdbc14.jar`in`<jdk_home>\jre\lib\ext`和 ADD 放入`CLASSPATH`变量中，然后您不必在编译或运行时指定类路径
如果您使用的`oracle.jdbc.driver.OracleDriver`是 java6，那么可以，但它已被弃用。所以最好使用`oracle.jdbc.OracleDriver`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-30T15:20:30.793

只需将 odbc14.jar 这个 JAR 放在所需的 JRE 路径中，例如“C:\Program Files\Java\jdk1.7.0_65\jre\lib\ext”。

这应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T10:53:19.903

你应该

```
 try {

            Class.forName("oracle.jdbc.OracleDriver");

        } 
```

并放置`odbc14.jar`类路径（如果尚未完成）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-23T20:54:01.130

只有您需要放入作为您的类路径的appsclassloader。我不确定，为什么我们需要放入 jre/lib/ext

# javascript - 在 .js.erb 中处理 I18n

> ID：14770792
> 
> 赞同：2
> 
> 时间：2013-02-08T10:45:48.650
> 
> 标签：javascript, ruby-on-rails, internationalization, ruby-on-rails-3.2

我正在尝试根据触发某些 JS 代码的语言来制作 IF 语句。

temp.js.erb

```
<% if I18n.locale.to_s == 'es' %>
    someJScode;
<% elsif I18n.locale.to_s == 'en' %>
    someJScode;
<% elsif I18n.locale.to_s == 'eu' %>
    someJScode;
<% elsif I18n.locale.to_s == 'fr' %>
    someJScode;
<% end %> 
```

显然它有效。但是，当我更改应用程序的语言时，此代码的行为不会改变。它仍然会触发先前语言环境的代码。

不管我改变多少次语言。它只会触发我打开第一个窗口的语言环境的代码。

这是为什么？我究竟做错了什么？

- - - - - - - - - - 更新 - - - - - -

正如@tigrish 所建议的，我安装了 i18n-js gem。

我将此haml添加到我的application.html.haml

```
:javascript
      I18n.defaultLocale = " I18n.default_locale ";
      I18n.locale = " I18n.locale "; 
```

并试图在 JS 中获取 gem 文档中提供的代码的语言环境。

```
var fo = I18n.currentLocale();
alert(fo); 
```

但是，它不起作用。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:20:33.403

我认为@marcgg 在缓存方面可能是正确的。

您可以考虑使用[https://github.com/fnando/i18n-js](https://github.com/fnando/i18n-js) - 即使您本身不包含任何翻译，您的`I18n.locale == 'foo'`调用也将全部在 JS 中并在每次函数运行时进行解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-18T21:35:32.353

I had a similar problem and @tigrish solution helped me to solve it.

@SergioNekora, please try those steps:

1.  Install [i18n-js](https://github.com/fnando/i18n-js) (by adding `gem 'i18n-js'` to your Gemfile).
2.  Add to application.html.erb file (for haml file you should use some other syntax):

    ```
    <script type="text/javascript">
        I18n.locale = "<%= I18n.locale %>";
    </script>` 
    ```

3.  Add to temp.js.erb/temp.js file `//= require i18n`

4.  Now, you can use I18n.locale variable inside temp.js.erb/temp.js file (without using ruby). For example:

    ```
    if (I18n.locale) == 'es' {
         someJScode;
    } else if (I18n.locale == 'en') {
         someJScode;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:50:32.767

我会说，因为它是 javascript 代码，它可能会被缓存。尝试清除缓存并检查语言是否更改。如果是这样，请停用此文件的缓存或使其依赖于语言环境。

# python - 是否有自动为遗留代码生成测试用例的开源工具？

> ID：14770797
> 
> 赞同：2
> 
> 时间：2013-02-08T10:46:07.483
> 
> 标签：python, unit-testing, fortran, legacy-code

我最近偶然发现了这篇（旧的）文章：

[http://imranontech.com/2007/01/04/unit-testing-the-final-frontier-legacy-code/](http://imranontech.com/2007/01/04/unit-testing-the-final-frontier-legacy-code/)

据称作者编写了一个 perl 脚本来自动生成测试用例。他的策略是这样的（引用）：

1.  读入我给它的头文件。
2.  提取函数原型。
3.  给我它找到的函数列表，让我选择我想要为其创建单元测试的函数。
4.  然后它创建了一个 dbx（Solaris 调试器）脚本，每次调用所选函数时都会断点，保存传递给它的变量，然后继续执行，直到函数返回，此时它将保存返回值。

5.  在 dbx 脚本下运行可执行文件，然后我开始正常使用该应用程序，并且只是运行了许多我认为会通过有问题的代码的用例，尤其是我认为它会遇到边缘情况的情况我要为其创建单元测试的功能。

6.  然后 perl 脚本获取所有示例运行，删除重复项，然后自动生成包含每个示例的单元测试的 C 文件（即传入输入数据并验证返回值与示例运行中的相同）编译/链接/运行单元测试并丢弃失败的测试（即摆脱导致函数行为不确定的输入）

我有很多 Python 和 Fortran 语言的各种遗留代码。这篇文章来自 2007 年。在当前的单元测试框架中是否实现了类似的东西？

我将如何编写这样的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:50:44.227

很像C。另外，我认为（Solaris 调试器）依赖于操作系统？我想说你应该看看“记录/捕获和回放”工具，尽管不知何故我认为“生成”部分从未真正起飞。

[Python 的测试工具分类法](http://wiki.python.org/moin/PythonTestingToolsTaxonomy#Web_Testing_Tools)将是一个很好的起点。我会说你要么使用 Selenium 或[Dogtail](https://wiki.ubuntu.com/Testing/Automation/DogtailTutorial)通过应用程序记录你的方式。该链接将您直接带到该部分，Web 测试工具，但也检查其他：模糊测试是一种类似于[Golden Master](http://craftedsw.blogspot.com/2012/11/testing-legacy-code-with-golden-master.html)的技术，有时可能有助于遗留应用程序，并且是一种“记录/回放”技术。Feathers 将此类测试称为“表征”测试，因为它们表征了遗留系统的行为。

您引用的文章非常好：

> 查看您自己的源代码存储库并查看哪些函数/类应用了最多的错误修复检查，80% 的错误修复往往针对大约 20% 的代码。这背后有合理的逻辑——通常 20% 的代码写得很糟糕，有几十个或几百个“特殊情况”黑客。

这是我真正开始的地方。你有没有识别出这些部分？分类中的简单 Git/SVB 日志使用脚本和覆盖工具部分会派上用场。

不幸的是，我不能帮助你——我的 Python 经验有限，而且 Fortran 不存在。

# c++ - 文件差异的 C++ 单元测试

> ID：14770801
> 
> 赞同：5
> 
> 时间：2013-02-08T10:46:18.670
> 
> 标签：c++, unit-testing

是否有任何库允许您在 C++ 单元测试中区分文件？理想情况下，这将适用于 Boost 单元测试。

我正在考虑以下功能：

```
CHECK_FILES_EQUAL('output.txt', 'reference.txt'); 
```

如果文件相等（可能显示失败所在的行），则测试将失败。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:44:14.103

我假设您想要更智能的东西，而不是只检查文件是否逐字节相等。我会使用[google-diff-match-patch](http://code.google.com/p/google-diff-match-patch/)，这是一个功能强大的库，它可以（以及其他功能）计算两个文件之间的差异。可以使用 C++ 实现以及其他语言。不过，您需要自己处理文件 IO。

# mysql - 如何减少mysql查询中的扫描总数？

> ID：14770816
> 
> 赞同：1
> 
> 时间：2013-02-08T10:47:10.250
> 
> 标签：mysql

我想从以下查询中显示一些有限的记录，但是我应该如何减少使用连接在查询中执行的 scan 的总数并加快执行速度？

询问：：

```
select ml.*,m.title as medianame,mt.name as media_type,d.device_name as devicename,
SUBTIME(ml.end_time,ml.start_time) as playback_duration,d.client_id
from device_media_log ml left join media m on m.media_id = ml.media_id left join device d on d.device_id = ml.device_id
left join media_type mt on m.media_type_id = mt.media_type_id
order by ml.play_date desc,ml.start_time desc,ml.end_time desc; 
```

所有表都包含必需的索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:50:06.373

我建议的最好的事情是尽可能使用 where 子句。

选择 ml.*,m.title 作为 medianame，mt.name 作为 media_type，d.device_name 作为 devicename，SUBTIME(ml.end_time,ml.start_time) 作为playback_duration，d.client_id from device_media_log ml left join media m on m.media_id = ml.media_id 在 d.device_id 上左连接设备 d = ml.device_id 在 m.media_type_id 上左连接 media_type mt = mt.media_type_id WHERE SOMETHING=SOMETHING AND SOMETHING=SOMETHING order by ml.play_date desc,ml.start_time desc,ml。结束时间描述；

# java - 使用 Web 服务连接器从 Java 访问 Salesforce

> ID：14770818
> 
> 赞同：0
> 
> 时间：2013-02-08T10:47:12.643
> 
> 标签：java, web-services, soap, salesforce

我正在尝试从 java 类（在我的本地计算机上）连接到 Salesforce。我使用了 WSC-22.jar（webservice 连接器）并使用了与 eclipse 中的库相同的内容。我还将企业 wsdl 解析为 jar 并在 eclipse 中上传了库。我正在运行下面的 java 类，这是错误的。

```
package wsc;

import com.sforce.soap.enterprise.Connector;
import com.sforce.soap.enterprise.DeleteResult;
import com.sforce.soap.enterprise.EnterpriseConnection;
import com.sforce.soap.enterprise.Error;
import com.sforce.soap.enterprise.QueryResult;
import com.sforce.soap.enterprise.SaveResult;
import com.sforce.soap.enterprise.sobject.Account;
import com.sforce.soap.enterprise.sobject.Contact;
import com.sforce.ws.ConnectionException;
import com.sforce.ws.ConnectorConfig;

public class main {

static final String USERNAME = "username";
static final String PASSWORD = "password + sec token";
static EnterpriseConnection connection;

public static void main(String[] args) {

ConnectorConfig config = new ConnectorConfig();
config.setUsername(USERNAME);
config.setPassword(PASSWORD);
//config.setTraceMessage(true);

try {

  connection = com.sforce.soap.enterprise.Connector.newConnection(config);

  // display some current settings
  System.out.println("Auth EndPoint: "+config.getAuthEndpoint());
  System.out.println("Service EndPoint: "+config.getServiceEndpoint());
  System.out.println("Username: "+config.getUsername());
  System.out.println("SessionId: "+config.getSessionId());

  // run the different examples
  queryContacts();
  createAccounts();
  updateAccounts();
  deleteAccounts();

} catch (ConnectionException e1) {
    System.out.println("hello world");
    e1.printStackTrace();
}  

}
//somemore code---- 
```

错误消息：com.sforce.ws.ConnectionException：发送请求失败

```
https://login.salesforce.com/services/Soap/c/26.0
    at com.sforce.ws.transport.SoapConnection.send(SoapConnection.java:120)
    at com.sforce.soap.enterprise.EnterpriseConnection.login(EnterpriseConnection.java:1)
    at com.sforce.soap.enterprise.EnterpriseConnection.<init>(EnterpriseConnection.java:1)
    at com.sforce.soap.enterprise.Connector.newConnection(Connector.java:1)
    at wsc.main.main(main.java:32)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)hello world

    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:570)
at com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:141)
at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:411)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:525)
at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:272)
at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:329)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:172)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:966)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1031)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
at com.sforce.ws.transport.JdkHttpTransport.connectRaw(JdkHttpTransport.java:133)
at com.sforce.ws.transport.JdkHttpTransport.connectLocal(JdkHttpTransport.java:97)
at com.sforce.ws.transport.JdkHttpTransport.connectLocal(JdkHttpTransport.java:92)
at com.sforce.ws.transport.JdkHttpTransport.connect(JdkHttpTransport.java:88)
at com.sforce.ws.transport.SoapConnection.send(SoapConnection.java:94) 
```

我无法弄清楚如何解决这个问题。由于错误消息显示“无法连接到[http://login.salesforce.com./](http://login.salesforce.com./) ...”，我是否应该在 Eclipse 中启用某些设置？

问候山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:54:35.953

你在代理后面吗？

如果是这样，请在 eclipse 中启用代理设置`preferences `general` → `network``

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-09T03:08:00.637

...

```
 String proxyHost = getUserInput("Enter proxy host:");
  String proxyPort = getUserInput("Enter proxy port:");

  try { 
```

...

```
 if(proxyHost!=null && !proxyHost.trim().equals("")){
      config.setProxy(proxyHost, Integer.valueOf(proxyPort));
     } 
```

...

# jquery - jQuery可拖动 - 捕捉到浏览器？

> ID：14770819
> 
> 赞同：0
> 
> 时间：2013-02-08T10:47:13.807
> 
> 标签：jquery, jquery-ui-draggable

我正在使用以下代码在我的网站上拖动一个 div：

```
 js13('#wrapper').live('mouseover', function () {
        js13(this).draggable();
    }); 
```

但我想以某种方式将它捕捉到浏览器，这样就不可能将它拖到浏览器窗口范围之外。

这有可能吗？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:49:21.930

`**[LIVE DEMO](http://jsbin.com/iyesuz/1/edit)**`

我不明白你为什么在`'mouseover'`函数中使用 draggable 以及不推荐使用的`live`方法。无论如何：
**为此目的使用`containment`属性：**

例如：如果`#wrapper`的父母是`body`，您可以简单地使用：

```
$( "#wrapper" ).draggable({ containment: 'parent' }); 
```

或者像：

```
$( "#wrapper" ).draggable({ containment: $('SomeparentElement') }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:54:10.690

您可以使用包含属性（请参阅[draggable-api](http://api.jqueryui.com/draggable/#option-containment)）

在您的情况下，您可以尝试：

```
js13('#wrapper').live('mouseover', function () {
    js13(this).draggable( "option", "containment", $(window));
}); 
```

不确定这是否是一个有效的解决方案，未经测试。

# google-app-engine - 在 Appengine 上生成简短、随机且唯一的字符串

> ID：14770821
> 
> 赞同：1
> 
> 时间：2013-02-08T10:47:27.137
> 
> 标签：google-app-engine, random

我想生成具有以下属性的字符串 id：

1.  简短，最多 5-6 个 apha + 数字
2.  随机的
3.  独特的，渴望的，但不像第一个那么重要

目前我正在考虑：

1.  [使用https://developers.google.com/appengine/docs/python/datastore/functions#allocate_ids](https://developers.google.com/appengine/docs/python/datastore/functions#allocate_ids)分配唯一 ID
2.  用一些密钥对其进行哈希处理，md5(id + secret)
3.  取前 5 个符号

有没有更好的办法？我也想过使用 datacenter_id + instance_id + request_id ，但我不知道它是否会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:05:00.760

为什么不直接使用 random.choise 生成一个随机字符串？

```
for _ in xrange(5):
  yield random.choice(digits + alpha) 
```

这有 36^5 个键的空间

# sql - 按天分组时间戳，而不是按时间分组

> ID：14770829
> 
> 赞同：70
> 
> 时间：2013-02-08T10:48:18.437
> 
> 标签：sql, postgresql

我有一个表来存储我运行的 Web 服务的用户访问/查看日志。它以时间戳的形式跟踪时间，尽管我发现当我进行汇总报告时，我只关心这一天，而不是时间。

我目前正在运行以下查询：

```
SELECT
    user_logs.timestamp
FROM
    user_logs
WHERE
    user_logs.timestamp >= %(timestamp_1)s
    AND user_logs.timestamp <= %(timestamp_2)s
ORDER BY
    user_logs.timestamp 
```

通常还有其他 where 条件，但它们与问题无关。我正在使用 Postgres，但我假设使用的任何功能都可以在其他语言中使用。

我将结果提取到一个 Python 脚本中，该脚本计算每个日期的查看次数，但如果数据库可以对我进行分组和计数，这对我来说更有意义。

我如何剥离它以便它按天分组并忽略时间？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-08T11:01:19.253

```
SELECT date_trunc('day', user_logs.timestamp) "day", count(*) views
FROM user_logs
WHERE user_logs.timestamp >= %(timestamp_1)s
    AND user_logs.timestamp <= %(timestamp_2)s
group by 1
ORDER BY 1 
```

# c# - 排除要添加到列表的项目

> ID：14770830
> 
> 赞同：0
> 
> 时间：2013-02-08T10:48:24.580
> 
> 标签：c#, generic-list, oledbdatareader

我从数据库中查询两个表并将唯一值添加到通用列表中。

如果有一个我不想添加到列表中的值，我该如何防止该项目被添加？

```
using (myOledbConn = new OleDbConnection(connAccessLrProduct))
        {
            List<string> lst = new List<string>();
            myOledbConn.Open();
            OleDbCommand cmd = myOledbConn.CreateCommand();
            cmd.CommandText = @"SELECT tblProducts.CODE, tblSubject.SUBJECT, tblProducts.GenSubject
                               FROM tblSubject INNER JOIN tblProducts ON tblSubject.ID = tblProducts.SubjectID
                               WHERE [SUBJECT] = 'Arts' or [SUBJECT] = 'Aged Care';";

            OleDbDataReader dbReader = cmd.ExecuteReader();
            while (dbReader.Read())
            {
                string generalSublject;
                string subject = (string)dbReader["SUBJECT"];
                if (lst.Where(t => t == subject).Count() == 0)
                    lst.Add(subject);
                if (dbReader["GenSubject"] != DBNull.Value)
                {
                    generalSublject = (string)dbReader["GenSubject"];
                    if(generalSublject.Equals("No related topics"))
                    {
                        //how do I exclude this item from being added to the list?
                    }
                    if (lst.Where(t => t == generalSublject).Count() == 0)
                        lst.Add(generalSublject); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:50:56.810

我建议您使用 a`ISet<T>`而不是 a `List<T>`，这使元素对您来说是独一无二的。然后，您可以决定是否通过`if`.

```
var mySet = new SortedSet<string>();

while(dbReader.Read())
{
  if(dbReader["GenSubject"] != DBNull.Value)
  {
    var generalSubject = (string)dbReader["GenSubject"];
    if(!generalSublject.Equals("No related topics"))
    {
      mySet.Add(generalSubject); // returns false if already in Set
    }
    else
    {
      // do nothing
    }
} 
```

这对您有帮助并回答您的问题吗？我希望我做对了，并帮助你编写了一个只关注问题的简化版本的代码。但它有一些含义：

*   一个`ISet`典型的实现是`SortedSet`（基于树的）和`HashSet`（基于散列的）——不保证元素的特定*顺序*，但它确实保证它们是*唯一的*。
*   您可以`Contains`使用`ISet`（或多或少）对数而不是线性的努力（可能会显着加快您的程序，具体取决于元素的数量）。
*   如果合适，您也可以使用 SQL`DISTINCT`来使元素独一无二。但是，这需要您重构查询。

# oop - SSRS 报告 - 功能重用

> ID：14770833
> 
> 赞同：-3
> 
> 时间：2013-02-08T10:48:30.523
> 
> 标签：oop, reporting-services, xsd, business-intelligence

每个月都会有一堆新报告交付给客户。我真的开始生气了，我正在考虑购买开发人员的长鞭。第一个问题是：我是 SSRS 的新手，BIDS。我有 OOP 范式经验。第二个问题是：有一些功能，在每个报告中总是相同的。就像计算 YTD，当前期间的 YTD（你是对的，这是错误的，我们在 OLAP 中没有这个，但是在项目的当前状态下，赢得大奖比做这个改变更现实），导出报告等。而且每秒报告有这个错误。

因此，以我的乐观观点，可能有一些方法可以在 OOP 中解决它，比如方法。就像做一些报告将继承所有报告或类似的东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:50:14.143

使用[共享数据集](http://msdn.microsoft.com/en-us/library/ee636147.aspx)或在您的数据库中创建[视图以作为报告的基础。](http://msdn.microsoft.com/en-us/library/ms187956%28v=sql.105%29.aspx)

# iphone - 我可以在 xcode 4.5 上将我的 iOS 部署目标更改为 5.0 吗？

> ID：14770834
> 
> 赞同：14
> 
> 时间：2013-02-08T10:48:34.583
> 
> 标签：iphone, ios, ipad, ios5, xcode4.5

`base SDKs`我使用as 6.0 和`deployment target`as 6.0开发了 iPhone 应用程序

现在我想将我的更改`deployment target`为 5.0 而不是 6.0

有可能改变吗？

我在 xcode 4.5 中使用了自动布局功能

和

**我有一个疑问：**我听说如果我使用 iOS 5 的部署目标和`Default-568h@2x.png`iPhone 5 的启动图像开发应用程序，苹果将拒绝我的应用程序..（**原因：启动图像无效 - 您的应用程序包含一个大小为仅支持使用 iOS 6.0 SDK 或更高版本构建的应用程序的修饰符**）但为了支持 iPhone 5，我必须提供图像`Default-568h@2x.png`图像。如何解决这个问题呢 ？

***感谢您阅读问题。***

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T12:01:13.170

您无需更改基础 SDK 即可更改部署目标。只需在您的目标选项下将其更改为 5.0：

![在此处输入图像描述](../Images/ad9b31c478daad3d0e4977c03bb7d38d.png)

请注意，自动布局和其他一些功能仅在 SDK 6.0 上可用。

**为 XCode 7+ 编辑**

该选项卡现在称为*General*，并且*Deployment 目标*位于*Deployment info*下：

[![代码 7](../Images/7a93a699f4e85291585e545e68ebb316.png)](https://i.stack.imgur.com/wbjYu.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T19:46:01.440

您可能还会注意到，您无法通过 Adis 方式看到较旧的部署目标。所以要修复它`build settings>deployment`，然后`iOS deployment target`在那里找到并更改它。

![图片上面描述的](../Images/e1689717f152412ff8a0d88bcf88d710.png)

# vim - vim 定界伴侣

> ID：14770836
> 
> 赞同：7
> 
> 时间：2013-02-08T10:48:37.983
> 
> 标签：vim

使用 DelimitMate，它会自动生成右括号。当我在括号内完成输入后，我按什么键可以快速转到右括号的右侧？（现在我必须手动按 ESC 然后按 'a'）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T11:13:07.103

这些自动关闭插件的想法（就像 Eclipse 等 IDE 中的原始功能实现）是您只需**键入**关闭字符即可查看它。插件应该检测到这种情况，而不是插入字符会跳过现有的自动插入的字符。

如果这对您不起作用，可以提供多种插件替代方案。[Vim Tips Wiki](http://vim.wikia.com/wiki/Automatically_append_closing_characters#Plugins)有一个列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-01T00:34:58.370

使用[delimitMate](https://github.com/Raimondi/delimitMate/blob/master/doc/delimitMate.txt#L379-L407)，`Shift-tab`将跳出当前分隔符并`Control-G g`让您摆脱嵌套分隔符。无需重新映射任何东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T08:58:53.840

你可以试试自动配对的飞行模式

例如：

```
( hello| world )

press ) at |

( hello world )| 
```

如果跳转不正确，用`<M-b>`做后插。

例如：

```
(hello| world()

press ) at |

(hello world()|

press <M-b>

(hello)| world() 
```

仓库：[https ://github.com/jiangmiao/auto-pairs](https://github.com/jiangmiao/auto-pairs)

插件：[http ://www.vim.org/scripts/script.php?script_id=3599](http://www.vim.org/scripts/script.php?script_id=3599)

添加

```
let g:AutoPairsFlyMode=1 
```

到 .vimrc 打开飞行模式

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-08T11:44:18.350

你可以做一个自定义地图。我猜你想在`insert`模式下转到右括号的右边。只需添加到您的`.vimrc`此映射中：

```
:inoremap <F8> <ESC>f)a 
```

这样，当你在`insert mode`括号内写完的时候，`F8`会将你的光标移到右括号的右边。如果您愿意，您可以更改映射键，使用另一个键而不是`F8`.

正如肯特在评论中所说，一个更通用的解决方案是：

```
:inoremap <F8> <ESC>%%a 
```

这将适用于`[`和`{`括号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T13:54:25.063

我有点同意 Atropo 的观点：如果您想坚持使用 DelimitMate，那么对您的工作流程的最小干扰可能是制作自定义 imap 以到达自动插入字符的另一侧。

就我个人而言，我更喜欢控制自动插入字符的位置/时间，以及如何在自动插入的字符中导航；[UltiSnips](https://launchpad.net/ultisnips)或[SnipMate](https://github.com/garbas/vim-snipmate)为我做到了这一点。也许他们更多的是你正在寻找的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T10:54:30.767

如果您在新行上键入内容，请尝试`A`在行尾附加文本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T11:18:30.080

我已经安装了自动关闭。我目前正在做的是（“我”是光标）

```
- (xxxxI)
- ( xxxxI )
- ( xxxxIxx )
- text (xxxxI) other text
- text ( xxxxI ) other text
- text ( xxxxIxx ) other text 
```

我只是做了一个映射，`<esc>%%a`然后在上述情况下，光标将移动到`(...)I..whatever`

它不适用于报价。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-15T19:33:04.533

派对有点晚了，但请注意，无需任何自定义映射即可轻松完成。在插入模式下，您可以按`<C-O>`（默认映射）进入“一次性”正常模式，您可以在其中输入单个正常模式命令。

因此，要回答您的问题，您可以做的是`<C-O>a`.

# c# - C#：如何从另一台局域网计算机和windows身份验证连接到sql server 2008 express？

> ID：14770839
> 
> 赞同：2
> 
> 时间：2013-02-08T10:48:47.797
> 
> 标签：c#, sql-server

我在 Windows XP Professional 中安装了 SQL Server。如果我在本地计算机上运行应用程序，我可以访问数据库，但如果我在同一局域网中的另一台计算机上运行应用程序，则会收到底层提供程序错误。

我启动了 SQL Server 浏览器，启用了 TCP/IP 协议，并尝试在我的 windows XP 中创建一个新用户，其名称和密码与另一台计算机的用户（使用 Windows 7）相同，并创建一个新用户登录。

在我的连接字符串中如下：

```
<add name="myConnection" connectionString="metadata=res://*/Model.myModel.csdl|res://*/Model.myModel.ssdl|res://*/Model.myModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=192.168.1.5\SQLEXPRESS;initial catalog=myDataBase;integrated security=true;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient"/> 
```

我已经安装了IIS 6.1，但是不知道怎么配置，也不知道这样能不能解决。

我想使用 Windows 身份验证。如果我在 Windows xp 中安装了 sql server 2008 express，是否有可能？

编辑 01：

我尝试禁用防火墙，但问题没有解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:06:09.600

打开防火墙以接收到端口 1433 的传入 TCP 连接

IIS与sql server无关，不需要的话可以卸载。

是的，您可以在 xp 上安装 sql express 2008，因为您做到了！

> Sql express 2008 支持的操作系统：
> 
> Windows Server 2003 Service Pack 2、Windows Server 2008、Windows Vista、Windows Vista Service Pack 1、Windows XP Service Pack 2、Windows XP Service Pack 3

# django - pymongo + 新遗物

> ID：14770845
> 
> 赞同：2
> 
> 时间：2013-02-08T10:49:04.430
> 
> 标签：django, pymongo, newrelic

我们有一个由 new relic 监控的 django 应用程序服务器。我们在我们的应用程序中使用了 Mysql 和 MongoDb 进行数据存储。在 rpm.newrelic 我们有 Mysql 的交易细节。我们也想得到 mongoDb 的交易细节。

我们正在使用 pymongo 模块与 mongo 进行交互。我在这里读到他们在他们最新的 python 代理中包含了对 pymongo 的支持。但我找不到相同的文档。谁能指点我一些文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T05:08:51.023

有一次我们有同样的问题，所以我们建立了这个：[https ://github.com/Livefyre/pymongo-newrelic](https://github.com/Livefyre/pymongo-newrelic)

这有一些粗糙的边缘，但您会看到查询（大致映射到 SQL 术语），以及花费在细粒度细节上的时间。

虽然较新的 New Relic 代理直接支持 pymongo：[https ://docs.newrelic.com/docs/python/instrumented-python-packages#nosql-database-clients](https://docs.newrelic.com/docs/python/instrumented-python-packages#nosql-database-clients)

他们确实包括这个警告（在撰写本文时）：

请注意，MongoDB 和 Redis 调用目前仅记录为事务细分指标。也就是说，不会生成汇总指标，因此它们仍将作为 Python 时间显示在概览仪表板上，而不是作为单独的段，甚至作为数据库调用。此外，此时没有捕获 MongoDB 查询的具体详细信息，因此不会在与这些查询对应的 UI 中的数据库页面上显示任何信息。

# asp.net - 从 Telerik 开放访问 ORM 查询继承类时出错

> ID：14770849
> 
> 赞同：1
> 
> 时间：2013-02-08T10:49:14.413
> 
> 标签：asp.net, c#-4.0, telerik, telerik-open-access

我在我的 ASP.net C# Web 应用程序中使用最新版本的**Telerik Open Access ORM 。**在我的**EntitiesModel1.rlinq**中，我从数据库映射了一个名为“ **Customer** ”的表。然后我创建了一个名为“ **SubCustomer ”的域类，并在其中添加了一个名为“** **SubName** : **String** ”的新属性字段。然后从域类中删除默认属性。然后我为**Customer-SubCustomer**类应用了**继承。**所以继承箭头现在从 **SubCustomer**指向**Customer**实体。

 ******然后，我将**垂直**继承的东西应用到**SubCustomer**类，并使用“ **Default** * *mapping* *”将“ **SubName** ”字段映射到 Customer 类中的“ **CustomerName** **”**字段。从数据库模型更新和验证所有过程已成功完成，没有任何错误或警告。

 *****在我的 Web 应用程序中部署此上下文并进行如下查询时：

```
 using (EntitiesModel1 context = new EntitiesModel1())
        {             
            List<SubCustomer> lstCustomer = (from entity in context.SubCustomer
                                        select entity).ToList();
        } 
```

我收到一个错误：

***错误执行查询：Telerik.OpenAccess.RT.sql.SQLException：无效的对象名称'SubCustomer。在 Telerik.OpenAccess.RT.Adonet2Generic.Impl.PreparedStatementImp.executeQuery() 在 OpenAccessRuntime.Relational.conn.PooledPreparedStatement.executeQuery() 在 OpenAccessRuntime.Relational.fetch.FetchResultImp.Execute() SQL: SELECT a.[CustomerID] AS COL1 , b.[voa_class] AS COL2, a.[SubName] AS COL3, b.***

我也尝试查询“ **Customer** ”实体，但遇到相同的错误。请帮忙。

问候，普拉文。***********

# c++ - 无法将参数 1 从 int 转换为 &int

> ID：14770851
> 
> 赞同：0
> 
> 时间：2013-02-08T10:49:21.627
> 
> 标签：c++

让我们想象一下我有功能：

```
int switcherINT(char &c){
    switch (c){
    case '1': return 1; break;
    case '2': return 2; break;  
    case '3': return 3; break;
    case '4': return 4; break;
    case '5': return 5; break;
    case '6': return 6; break;
    case '7': return 7; break;
    case '8': return 8; break;
    case '9': return 9; break;
    case '0': return 0; break;
    default: return err;
    }
}
char switcherCHAR(int &c){
    switch (c){
    case 1: return '1'; break;
    case 2: return '2'; break;  
    case 3: return '3'; break;
    case 4: return '4'; break;
    case 5: return '5'; break;
    case 6: return '6'; break;
    case 7: return '7'; break;
    case 8: return '8'; break;
    case 9: return '9'; break;
    case 0: return '0'; break;
    default: return errCH;
    }
} 
```

我正在尝试计算嵌套表达式：

```
c.str[i] = switcherCHAR(switcherINT(pthis->str[pthis->size-i-1])-switcherINT(pb->str[pb->size-i-1])-loc); 
```

在哪里

```
longMath *pthis(this),*pb(&b);
longMath c;
class longMath{
protected:
    char* str;
    int size;

protected:
........ 
```

编译器说：“无法将参数 1 从 int 转换为 &int” 我能解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:52:15.060

您作为参数`switcherCHAR`给出的表达式为您提供了一个临时的`int`. 您不能将临时作为参考传递 - 除非您进行参考`const`。只需更改`switcherCHAR`为 take a `const int&`（当你在它的时候， make `switcherINT`take a `const char&`）。但是，这是非常简单的类型，您最好只按值获取它们。因此，将它们更改为仅取`int`和`char`。

尽管如此，你的功能很奇怪。只需执行.就可以很容易地在数字`x`和对应数字之间转换 保证数字字符是连续的。因此，如果您取 的值并添加，比如说，，您将获得字符的值。`char``'0' + x``'0'``5``'5'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:50:06.333

使用这样的函数会更好：

```
int switcherINT(const char &c) {
    return (c >= '0' && c <= '9') ? c - '0' : err;
}

char switcherCHAR(const int &c) {
    return (c >= 0 && c <= 9) ? '0' + c : errCH;
} 
```

# python - 进口中的奇怪行为

> ID：14770862
> 
> 赞同：2
> 
> 时间：2013-02-08T10:49:51.673
> 
> 标签：python, package, python-import

我在导入模块时遇到问题。如果我使用，

```
 import fruit as f
 print f.apple.juice.CALORIES_INT 
```

这行得通。和

```
 import fruit.apple.juice as j
 print j.CALORIES_INT 
```

不工作。它抛出`AttributeError: 'module' object has no attribute 'apple'`。关于如何调试它的任何建议？

我的目录结构如下：

```
fruit  
--- __init__.py  
--- apple  
---------__init__.py  
--------- juice.py  
---------------CALORIES_INT is a variable declared here  
--- orange  
--------- __init__.py  
--------- shake.py  
---------------trying to access CALORIES_INT here by importing it. 
```

苹果是一个包。我可以导入其他包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:53:59.110

您需要添加`from . import apple`到您的包的`__init__.py`文件中。`fruit`或者，您可以`from fruit import apple`在同一位置使用。

嵌套包不会自动作为父包的属性提供，这仅在显式导入嵌套包后才有效。

如果你先到`import fruit.apple`，然后`import fruit; fruit.apple`工作。或者您在文件中显式导入`apple`嵌套包`fruit/__init__.py`以确保`import fruit; fruit.apple`始终适用于您的`fruit`包的用户。

这同样适用于包中的`juice`模块`apple`；`apple`您需要通过将其导入包中来使其可用`__init__.py`；添加一个`from . import juice`，或使用绝对导入，如`from fruit.apple import juice`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:54:03.773

尝试：

```
 from fruit.apple import juice as j 
```

# sql - 在与 Oracle 的一行中选择 n:n 关系（创建视图）

> ID：14770863
> 
> 赞同：1
> 
> 时间：2013-02-08T10:49:52.867
> 
> 标签：sql, oracle10g

我在 Oracle 中创建一个执行一些连接的视图时遇到了一些麻烦。主要问题：获取在结果行中表示的 n:n 关系？甲骨文 10.x

**表：HAS_APPLICATIONS**

```
USER_ID  APPLICATION_ID
-------  --------------
1        1
1        2
4        2
4        1
2        1
2        3 
```

**表：应用**

```
ID             APPLICATION
---------      -----------
1              Windows
2              OSx
3              FreeDos 
```

**表：用户**

```
USER_ID        NAME
-------        ---------
1              Bob
4              Johny
2              Elvis 
```

我需要一个视图（选择），例如：

```
USER_ID NAME   APPLICATIONS
1       Bob    Windows, OSx
2       Elvis  Windows, FreeDos
4       Johny  OSx, Freedos 
```

我的“不工作”查询：

```
SELECT
  u.NAME,
    (SELECT
       APPLICATION_ID
    FROM
        HAS_APPLICATIONS        
    LEFT JOIN APPLICATIONS ON HAS_APPLICATIONS.USER_ID = APPLICATIONS.ID
    WHERE
        HAS_APPLICATIONS.USER_ID = u.ID) ???????????
FROM
   USERS u 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:28:58.550

请尝试以下查询。不知道10G能不能用，11G能用。

```
SELECT
  u.NAME,    
  (SELECT
     (RTRIM(XMLAGG(xmlelement(X, APPLICATIONS.APPLICATION||',')order by APPLICATIONS.APPLICATION).extract('//text()'),','))  
    FROM
        HAS_APPLICATIONS        
    LEFT JOIN APPLICATIONS ON HAS_APPLICATIONS.USER_ID = APPLICATIONS.ID
    WHERE
        HAS_APPLICATIONS.USER_ID = u.ID)          
FROM
   USERS u 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:31:48.523

看看这篇[文章](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)。在 Oracle 11gR2 中这很容易，在以前的版本中它有点复杂但可以完成。

# java - org.xml.sax.SAXParseException：prolog 中不允许内容问题

> ID：14770865
> 
> 赞同：1
> 
> 时间：2013-02-08T10:49:57.767
> 
> 标签：java, xml

我正在尝试使用 jasperreports，当我尝试运行正在开发的应用程序时出现下一个错误：

```
 org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; Content is not allowed in prolog.
    at es.uniway.principal.EnviarInfoPedido.infoPedido_Mayorista(EnviarInfoPedido.java:452)
    at es.uniway.principal.ObtenerProcesos.ejecutar(ObtenerProcesos.java:78)

    at es.uniway.principal.SincronizadorCloud.main(SincronizadorCloud.java:14) 
```

对于我正在写的代码：

```
 xtw = xof.createXMLStreamWriter(new FileWriter(nombre_report+".xml"));

            //
           // xmlwriter.WriteStartDocument();

            xtw.writeStartDocument();

            // nodo 1
            xtw.writeStartElement("request");
            xtw.writeAttribute("operationName", "runReport");
            xtw.writeAttribute("locale", "es");
            // nodo 2
            xtw.writeStartElement("argument");
            xtw.writeAttribute("name","RUN_OUTPUT_FORMAT");
            xtw.writeCharacters(formato.trim().toUpperCase());
            xtw.writeEndElement();  // nodo 2
            // nodo 2
            xtw.writeStartElement("argument");
            xtw.writeAttribute("name","USE_DIME_ATTACHMENTS");
            xtw.writeCharacters("1");
            xtw.writeEndElement();  // nodo 2
            // nodo 3
            xtw.writeStartElement("resourceDescriptor");
            xtw.writeAttribute("name","");
            xtw.writeAttribute("wsType","");
            xtw.writeAttribute("uriString", CARPETA_REPORT + nombre_report.trim());
            xtw.writeAttribute("isNew", "false");

            //// nodo 4
            //xmlwriter.WriteStartElement("label", null);
            //xmlwriter.WriteEndElement(); // nodo 4  

            if (nombre_report == "LINEAS_DETALLE_COSTE" && id_albaran_coste.trim() != " ")
            {
                // para las lÃƒÆ’Ã‚Â­neas detalle coste teneos 2 parÃƒÆ’Ã‚Â¡metros:
                //   - NALNARANC --> albaran para calcular el descuento de coste
                //   - NALBARANV --> albaran para calcular el descuento de venta
                // parametro 1
                xtw.writeStartElement("parameter");
                xtw.writeAttribute("name", "NALBARANC");
                xtw.writeAttribute("class", "java.lang.Integer");
                xtw.writeCharacters(id_albaran_coste);
                xtw.writeEndElement(); // parametro 1

                // parametro 2
                xtw.writeStartElement("parameter");
                xtw.writeAttribute("name", "NALBARANV");
                xtw.writeAttribute("class", "java.lang.Integer");
                xtw.writeCharacters(id_albaran);
                xtw.writeEndElement(); // parametro 1
            }
            else
            {
                // parametro 1
                xtw.writeStartElement("parameter");
                xtw.writeAttribute("name", "NALBARAN");
                xtw.writeAttribute("class", "java.lang.Integer");
                xtw.writeCharacters(id_albaran);
                xtw.writeEndElement(); // parametro 1
            }

            xtw.writeEndDocument();
            xtw.flush();
            xtw.close(); 
```

怎么了？。谢谢。xml是这样的，我不知道出了什么问题：

```
<?xml version="1.0" ?> <request operationName="runReport" locale="es"> <argument name="RUN_OUTPUT_FORMAT"> CSV </argument> <argument name="USE_DIME_ATTACHMENTS"> 1</argument><resourceDescriptor name="" wsType="" uriString="/ICLDI/CABECERA_PEDIDO_CONTRATO" isNew="false"><parameter name="NALBARAN" class="java.lang.Integer">6658</parameter></resourceDescriptor></request> 
```

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:58:23.207

去掉这里的空格：

```
<?xml version="1.0" ?> <request 
```

它应该如下所示：

```
<?xml version="1.0" ?><request 
```

其他问题可能是您在 XML 文件的开头有一些不可见的额外字符，例如 Byte-Order-Mark（也称为 BOM）它表明 UTF-16 文件是高端或低端。

# asp.net-mvc - 对 Kendo Grid 进行排序会更改其列宽

> ID：14770867
> 
> 赞同：1
> 
> 时间：2013-02-08T10:49:58.840
> 
> 标签：asp.net-mvc, sorting, kendo-ui, kendo-grid, gridview-sorting

我有一个这样的剑道网格：

```
 <%: Html.Kendo()
           ...
            .Pageable()                 
            .Columns(c => {
                c.Bound(x => x.ProductId).Width(80);
                c.Bound(x => x.ProductCode).Width(40);
                c.Bound(x => x.ProductName).Width(80);
                c.Bound(x => x.Created).Format("{0:yyyy-MM-dd}").Width(70);
                c.Bound(x => x.CreatedBy).Width(80);
            })
            .Sortable()
            .Selectable()               
            ... 
```

当您单击列标题时，会出现一个向上或向下箭头以指示排序。到目前为止一切顺利，但是排序箭头使列扩大了它的宽度，这很烦人。我想避免列改变它们的宽度，你是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T19:42:26.703

将 css 规则添加到网格表中：`table-layout:fixed`应该可以解决您的问题。

# javascript - 使用 Javascript 或 JQuery 插入响应式 CSS 规则

> ID：14770869
> 
> 赞同：3
> 
> 时间：2013-02-08T10:50:10.090
> 
> 标签：javascript, jquery, css, responsive-design, media-queries

假设我想动态添加与媒体条件相关的 CSS 规则。例如，如下所示：

```
@media only screen and (min-device-width : 500px){
    .someClass: {
        color: blue;
    }
} 
```

一个合乎逻辑的步骤是使用 JavaScript 检查媒体查询的有效性并在测试通过时插入规则。如下所示：

```
if(matchMedia(only screen and (min-device-width : 500px))){
    $('.someClass').css('color', 'blue');
} 
```

缺点是规则不会响应。如果我改变屏幕尺寸，蓝色不会相应改变。我可以为屏幕尺寸变化添加一个监听器，但我认为这有点矫枉过正。

我的问题是：有没有办法通过 Javascript 或 JQuery添加*响应规则？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:54:08.287

你想听听[enquire.js](http://wicky.nillia.ms/enquire.js/)：

```
enquire.register("screen and (max-width:1000px)", {

    match : function() {},      // REQUIRED
                                // Triggered when the media query transitions 
                                // *from an unmatched state to a matched state*

    unmatch : function() {},    // OPTIONAL
                                // If supplied, triggered when the media query transitions 
                                // *from a matched state to an unmatched state*.

    setup : function() {},      // OPTIONAL
                                // If supplied, a one-time setup function 
                                // triggered when the handler is first registered.                           

    deferSetup : true,          // OPTIONAL, defaults to false
                                // If set to true, defers execution the setup function until
                                // the media query is first matched. Setup is still triggered just once.

    destroy : function() {}     //OPTIONAL
                                // If supplied, triggered when a hander is unregistered (covered later). 
                                // Enables you to provide lifecycle to responsive widgets. 
                                // Put cleanup logic here.

}).listen(); // More on this next 
```

[来自文档]

编辑：如果您想通过 js 添加纯 CSS 规则 [不依赖于侦听器]，我认为这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T07:50:43.660

您可以使用 responsive.js 库呈现动态 css。它可以帮助您动态地定义将在客户端呈现为本机 css 的响应规则。它使用流畅的界面编程风格，并且在不支持媒体查询的情况下也可以工作（动态呈现当前有效规则）。

例如，您可以将 width 属性定义为：

```
r$.breakpoints(320,767,1280);
r$.set('width','px').values(100,300,1500).linearInt().applyTo('.class'); 
```

更多信息、下载和示例，请访问：

[http://www.responsivejs.com](http://www.responsivejs.com)

# node.js - expressjs：如何仅将 bodyParser 用于特定资源？

> ID：14770879
> 
> 赞同：0
> 
> 时间：2013-02-08T10:50:51.113
> 
> 标签：node.js, express

我正在使用 expressjs，我只想将 body Parser 用于特定资源，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:22:35.600

@Matt 答案很好，您可以通过编写来优化其语法：

```
app.get('/foo', express.bodyParser, function (req, res, next) {
    // parsed request
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:55:19.813

`app.use()` [允许您指定“挂载路径”](http://expressjs.com/api.html#app.use)，以及要挂载的中间件，因此您应该能够侥幸逃脱；

```
app.use('/foo', express.bodyParser); 
```

作为`express.bodyParser` [返回一个](http://www.senchalabs.org/connect/bodyParser.html)签名为的函数`req, res, next`（与所有中间件一样），这似乎类似于将其作为处理程序添加到资源中；

```
app.get('/foo', express.bodyParser);
app.get('/foo', function (req, res, next) {
    // req has been parsed.
}); 
```

# asp.net - 网格视图中数据的垂直对齐

> ID：14770881
> 
> 赞同：0
> 
> 时间：2013-02-08T10:50:54.220
> 
> 标签：asp.net, vb.net, gridview

我希望我的数据在网格视图中垂直显示而不是水平显示，因为大约有 65 个字段并且它的大小不适合打印。

实际视图是这样的：

![在此处输入图像描述](../Images/6770eddc200f40195252bb8355879f3a.png)

但我想要的形式是：

![在此处输入图像描述](../Images/b489bbbe0a3bc200f094054363524e4a.png)

有谁能够帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:53:57.967

您可以将网格放在某个 div 中，并使用 css 将该 div 的旋转设置为 90 度。

```
.vertial-orientation
{
    -webkit-transform: rotate(90deg);   
    -moz-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    transform: rotate(90deg);
}

<div class="vertial-orientation">

    <!-- put your grid here -->

</div> 
```

请注意，浏览器需要 transform 的支持才能应用 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:57:50.743

您可以使用此属性

```
GridView1.RowStyle.VerticalAlign 
```

例子：

```
GridView1.RowStyle.VerticalAlign=VerticalAlign.Top 
```

也试试，

```
<ItemStyle VerticalAlign="Top"></ItemStyle> 
```

# android - 需要帮助使用 Robotium 进行 android 应用程序测试

> ID：14770882
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:50:54.267
> 
> 标签：android, junit, robotium

我是使用 Robotium 进行 android 应用程序测试的新手。你能指导我如何开始吗？你也可以请给我一些书籍，视频或链接。

我在谷歌上找到[了使用 Robotium 进行测试的入门](http://code.google.com/p/robotium/wiki/Getting_Started)

我从那里下载了**记事本**项目并运行到 Eclipse，但我无法理解诸如**testAddNote()**、**testEditNote()**、**testRemoveNote() 之**类的方法是如何调用的。

**NotePadTest.class**

```
 public class NotePadTest extends ActivityInstrumentationTestCase2<NotesList>{

private Solo solo;

public NotePadTest() {
    super(NotesList.class);

}

@Override
public void setUp() throws Exception {
    //setUp() is run before a test case is started. 
    //This is where the solo object is created.
    solo = new Solo(getInstrumentation(), getActivity());
}

@Override
public void tearDown() throws Exception {
    //tearDown() is run after a test case has finished. 
    //finishOpenedActivities() will finish all the activities that have been opened during the test execution.
    solo.finishOpenedActivities();
}

public void testAddNote() throws Exception {

    solo.clickOnMenuItem("Add note");
    //Assert that NoteEditor activity is opened
    solo.assertCurrentActivity("Expected NoteEditor activity", "NoteEditor"); 
    //In text field 0, add Note 1
    solo.enterText(0, "Note 1");
    solo.goBack(); 
    //Clicks on menu item
    solo.clickOnMenuItem("Add note");
    //In text field 0, add Note 2
    solo.enterText(0, "Note 2");
    //Go back to first activity named "NotesList"
    solo.goBackToActivity("NotesList"); 
    //Takes a screenshot and saves it in "/sdcard/Robotium-Screenshots/".
    solo.takeScreenshot();
    boolean expected = true;
    boolean actual = solo.searchText("Note 1") && solo.searchText("Note 2");
    //Assert that Note 1 & Note 2 are found
    assertEquals("Note 1 and/or Note 2 are not found", expected, actual); 

}

public void testEditNote() throws Exception {
    // Click on the second list line
    solo.clickInList(2); 
    // Change orientation of activity
    solo.setActivityOrientation(Solo.LANDSCAPE);
    // Change title
    solo.clickOnMenuItem("Edit title");
    //In first text field (0), add test
    solo.enterText(0, " test");  
    solo.goBack();
    boolean expected = true;
    // (Regexp) case insensitive
    boolean actual = solo.waitForText("(?i).*?note 1 test"); 
    //Assert that Note 1 test is found
    assertEquals("Note 1 test is not found", expected, actual); 

}

public void testRemoveNote() throws Exception {
    //(Regexp) case insensitive/text that contains "test"
    solo.clickOnText("(?i).*?test.*");
    //Delete Note 1 test
    solo.clickOnMenuItem("Delete");
    //Note 1 test & Note 2 should not be found
    boolean expected = false;   
    boolean actual = solo.searchText("Note 1 test");
    //Assert that Note 1 test is not found
    assertEquals("Note 1 Test is found", expected, actual);  
    solo.clickLongOnText("Note 2");
    //Clicks on Delete in the context menu
    solo.clickOnText("Delete");  
    actual = solo.searchText("Note 2");
    //Assert that Note 2 is not found
    assertEquals("Note 2 is found", expected, actual);  
}
} 
```

还有一件事我也不知道关于 web 应用程序的 selenium。

- 谢谢，

拉胡尔帕特尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:57:48.653

[在此处找到](http://code.google.com/p/robotium/wiki/Getting_Started)的 Robotium 入门页面中，他们指出：

> ...您可以在模拟器或设备上运行这些测试用例。右键单击测试项目并选择 Run As --> Run As Android JUnit Test。

它将运行 NotePadTest 类中的所有测试方法。请记住，您需要在您的模拟器/设备上运行应用程序的实例，但运行测试类应该将其重新部署到您的目标。

我不使用 eclipse，但在 IntelliJ 中，它们还允许您为各个测试方法创建运行配置，以独立于类中的其他测试运行它们。我想如果它是你感兴趣的东西，那么在 eclipse 中也有一个等价物。

至于 selenium，[你可以在这里找到他们的网站和文档。](http://seleniumhq.org/)他们还有[一个用于在 Android 浏览器中测试页面的驱动程序。](http://code.google.com/p/selenium/wiki/AndroidDriver)StackOverflow 并不是解决诸如“你能教我如何使用它”之类的一般性问题的地方，但如果你尝试它并有关于让它工作或执行一些操作的具体问题，我相信社区会很高兴回答他们！

# c++ - 使用 boost 的多维固定大小数组

> ID：14770884
> 
> 赞同：1
> 
> 时间：2013-02-08T10:51:00.850
> 
> 标签：c++, boost, multidimensional-array

我想`typedef`使用 boost 库创建一个多维数组。矩阵是矩形的，每个维度的维度和长度应该固定在`typedef`. 在向量的情况下，这正是`boost::array`模板类解决​​的问题：

```
typedef boost::array<int, 3> vec3_t; 
```

对于多维数组，我可以重复这种构造

```
typedef boost::array<boost::array<int, 2> ,3> mat2x3_t 
```

它还允许我很好地初始化我的矩阵（尽管我不确定这种行为是否得到保证......）：

```
Mat2x3_t m = { 11, 12, 13,
               21, 22, 23}; 
```

但是，从性能的角度来看，我不确定这是否可行。我对内存管理的理解非常有限，但我在计算机内存中的想象是，最里面的数组（`boost::array<int, 2>`在上面的例子中）保证分配一个连续的内存块，而对于“更高级别”我不确定的数组。

我还查看了`boost::multi_array`课程，据我了解，整个矩阵将占用一个连续的内存块，非常适合我感兴趣的“矩形”矩阵。它进一步提供了一些简洁的成员函数（其中对我的实现来说并不重要，但仍然是一个很好的补充）。然而，这个类的交易破坏者似乎是我不能`typedef`每个维度的长度，而只能是维度的数量。

*所以我的问题是：*当我必须多次迭代（~10^7 次）时，多个数组的构造是否会导致性能问题？在我的示例中，我使用了 2x3 int 矩阵，但我的用例将是具有复数的高维 64x4x2 矩阵。而且，实现是否保证了花括号的初始化？如果数组有问题，有没有办法typedef一个固定大小的multi_array？还是我缺少其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T03:33:31.940

`boost::array<T, N>`（就像它的现代表亲一样，`std::array<T, N>`）被[定义为](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/array.html)只有一个数据成员：

```
// public data members
T elems[N]; 
```

这是一个连续的Ts序列。如果每个 T 依次是一个数组，则整个事物是连续的（从技术上讲，由于 之前或之后的填充可能存在间隙`elems`，但在这种情况下不允许前导填充，并且尾随填充是不现实的。

大括号初始化和大括号省略是有保证的，尽管一些编译器喜欢在他们认为你没有足够的大括号时发出警告。

# symfony - 如何使用 Symfony 2.1.x 安装 mmoreramerino/GearmanBundle？

> ID：14770886
> 
> 赞同：0
> 
> 时间：2013-02-08T10:51:02.487
> 
> 标签：symfony, gearman

我对 Symfony 2 很陌生，对 Gearman 也很陌生。我正在寻找将 Symfony 2 与 Gearman 集成的捆绑包。

[根据包装师的说法， mmoreramerino 的捆绑包](http://mmoreramerino.github.com/GearmanBundle/)似乎是最受欢迎的捆绑包。不幸的是，有些东西似乎坏了，自动加载器没有找到捆绑包。

```
Fatal error: Class 'Mmoreramerino\GearmanBundle\MmoreramerinoGearmanBundle' not found in ... 
```

当我从这个分支中修复的问题中得到解决时，我尝试切换到“开发开发”，但它对我也不起作用。

问题：如何使用 Symfony 2.1.x 安装这个包？问题 2：是否有任何可行且记录在案的替代方案？

**编辑**以防其他人遇到这个问题：这是我启动和运行的方法！

1.  安装 gearman、libgearman、PHP 的 PECL 扩展（使用最新版本！）
2.  检查 gearman 是否出现在 phpinfo() 中（cli 和 webserver 版本）
3.  使用“gearmand --verbose INFO”在终端 1 中启动 gearmand（您将看到工作人员和客户端连接到 gearman - 或不连接；-)）
4.  从 gearman php 扩展示例目录中的终端 2 reverse_worker.php 开始
5.  从 gearman php 扩展示例目录中的终端 3 reverse_client.php 开始
6.  如果这有效，您就可以使用 Symfony：使用“dev-development”安装 mmoreramerino/GearmanBundle
7.  将包中的 dev.base.yml 复制到 app/config/gearman/dev.yml
8.  现在将 TestWorker.php 添加到您的包中，如文档中所述
9.  使用控制台脚本“php app/console gearman:job:execute MmoreramerinoGearmanBundleWorkerstestWorker~test”启用 testWorker
10.  现在您可以将作业发送到 Symfony 控制器（或 Symfony 中的其他地方）中的监听 testWorker。尽管我使用的是默认主机/端口，但我必须指定服务器。

    `$gearman = $this->get('gearman');`
    `$gearman->setServer('127.0.0.1',4730);`
    `$gearman->doNormalJob('MmoreramerinoGearmanBundleWorkerstestWorker~test');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:55:55.363

要安装捆绑包，您需要将以下行添加到`composer.json`

```
"Mmoreramerino/GearmanBundle": "dev-development" 
```

并运行作曲家更新；

然后注册进去`app/AppKernel.php`（好像你已经这样做了）

```
new Mmoreramerino\GearmanBundle\MmoreramerinoGearmanBundle(), 
```

# javascript - 以编程方式停止-webkit-overflow-scrolling

> ID：14770891
> 
> 赞同：1
> 
> 时间：2013-02-08T10:51:24.577
> 
> 标签：javascript, ios, css, cordova, scroll

`-webkit-overflow-scrolling`我有一个 phonegap 应用程序，它在 div中使用 iOS 本机滚动。我希望能够在用户单击按钮时手动停止正在进行的滚动（滚动回页面顶部）。这是可行的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-05T14:25:51.363

[这在使用fastclick.js](https://github.com/ftlabs/fastclick)时实际上是很有可能的。该库消除了移动设备上 300 毫秒的点击延迟，并在惯性/动量滚动期间启用了事件捕获。

在包含 fastclick 并将其附加到 body 元素后，我停止滚动并转到顶部的代码如下所示：

```
scrollElement.style.overflow = 'hidden';
scrollElement.scrollTop = 0;
setTimeout(function() {
  scrollElement.style.overflow = '';
}, 10); 
```

诀窍是设置`overflow: hidden`，它会停止惯性/动量滚动。[请参阅我的小提琴，了解在惯性/动量期间停止滚动](http://jsfiddle.net/6EYxz/)的完整实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:54:11.777

不幸的是，目前这是不可能的。该`scroll`事件仅在滚动结束时触发。只要动力不断移动内容，就不会触发*任何*事件。您可以在图 6-1 Apple 的“ *Safari Web 内容指南”中*[的平移手势](http://developer.apple.com/library/IOs/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)中看到这一点。

 *我还创建了一个[小提琴来演示](http://jsfiddle.net/F9kMR/)这种行为。该`scrollTop`值是*在*iOS 完成动画后设置的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T20:54:39.550

您可以使用“touchstart”而不是“click”来捕获触摸事件，因为有时在动量滚动完成之前单击事件似乎不会被触发。试试这个 jQuery 解决方案：

```
$('#yourTrigger').on('touchstart', function () {
    var $div = $('.yourScrollableDiv');
    if ($div.scrollTop() === 0) {
        return false; //if no scroll needed, do nothing.
    }
    $div.addClass('scrolling'); //apply the overflow:hidden style with a class
    $div.animate({
        scrollTop: 0
    }, 600, function () {
        $div.removeClass('scrolling'); //scrolling has finished, remove overflow:hidden
    });
} 
```

其中“滚动”类仅具有 CSS 属性溢出：隐藏，正如@Patrick-Rudolph 所说，它将停止正在进行的任何动量滚动。

```
.scrolling {
    overflow: hidden;
} 
```

注意：最好使用回调函数来告知滚动动画何时结束，而不是设置计时器函数。*

# iphone - 以编程方式再次允许位置服务

> ID：14770892
> 
> 赞同：1
> 
> 时间：2013-02-08T10:51:24.690
> 
> 标签：iphone, safari, location

当我点击“不允许”加载我的网页时，我在 Safari (iphone) 上禁用了定位服务。我怎样才能再次允许它用于同一个网页（以编程方式）

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:52:57.360

你不能，你必须进入设置应用程序并在那里启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:57:17.837

您不能以编程方式更改用户首选项。如果没有提示用户允许位置服务在您的应用程序中使用此功能，您可以简单地检查位置服务是否已打开并且您的应用程序可以访问服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:00:30.113

（如果你想在 Appstore 上使用你的应用程序）以编程方式，你不能调用那个询问你位置服务权限的对话框。

手动转到**Settings** -> **General**，滚动到底部并转到**Reset** -> **Reset Location & Privacy**。

# mysql - 连接到 MySQL。VB 快车 2008

> ID：14770893
> 
> 赞同：0
> 
> 时间：2013-02-08T10:51:30.290
> 
> 标签：mysql, vb.net, sql-server-2008

我在 VB Express 2008 中为一家小公司创建了一个程序来存储和操作数据。目前，我们使用 SQL Express 2008 在我们的工作服务器上存储我们的数据。这运行顺利，没有已知问题。

我们有几位很少在办公室工作的员工，他们现在需要访问数据库来创建报告和查看会议信息等。现在是时候将数据库迁移到 MySQL 了！

当我使用 VB Express 2008 时，我没有可用的 MySql 参考，我阅读了几篇关于这个主题的文章和论坛帖子，告诉我下载 SQL Connector .Net 5.2.7 以使我能够浏览和添加 MySQL.Data 参考。我已经尝试了几个版本，但都没有成功，**如果您对如何找到 MySQL 参考有任何建议，将不胜感激。**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:57:23.240

你怎么了？你不能添加参考？您不是很清楚.. 只需下载[http://dev.mysql.com/downloads/installer/](http://dev.mysql.com/downloads/installer/) 然后您就可以将 Mysql.Data 的引用添加到您的项目中。

PS：在这里你可以找到手册（[http://dev.mysql.com/doc/](http://dev.mysql.com/doc/)）

# java - Netbeans 7.2.1 构建问题

> ID：14770897
> 
> 赞同：0
> 
> 时间：2013-02-08T10:51:37.690
> 
> 标签：java, netbeans, classpath

我有以下问题：我制作了一个 Java 应用程序，它在 Netbeans 的运行时中运行良好，但在构建后无法运行。这些库已正确包含，这是尝试从命令行运行它后发生的情况：

```
Exception in thread "Thread-4" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at com.xuggle.ferry.JNIMemoryManager.<init>(JNIMemoryManager.java:861)
    at com.xuggle.ferry.JNIMemoryManager.<clinit>(JNIMemoryManager.java:860)

    at com.xuggle.mediatool.MediaWriter.<clinit>(MediaWriter.java:119)
    at com.xuggle.mediatool.ToolFactory.makeWriter(ToolFactory.java:149)
    at app.RepaintImpl$1.run(RepaintImpl.java:63)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 6 more 
```

NB 中的所有内容都设置为 JDK 7，我相信我的环境变量也很好：

```
CLASSPATH=C:\Program Files\Java\jre7\lib\*;C:\Program Files\Java\jre7\bin\*;
JAVA_HOME=C:\Program Files\Java\jdk1.7.0_09
PATH=C:\Program Files\Java\jdk1.7.0_09\bin;... 
```

这是构建日志，令我困扰的是 Netbeans 在 .jar 文件中创建空目录的事实：

```
ant -f "C:\\Users\\Wojtek\\Documents\\NetBeansProjects\\VNC Streamer" clean jar
init:
deps-clean:
Updating property file: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\built-clean.properties
Deleting directory C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build
clean:
init:
deps-jar:
Created dir: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build
Updating property file: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\built-jar.properties
Created dir: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\classes
Created dir: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\empty
Created dir: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\generated-sources\ap-source-output
Compiling 87 source files to C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\classes
Note: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\src\app\RepaintImpl.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
Copying 1 file to C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\classes
Copied 25 empty directories to 24 empty directories under C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build\classes
compile:
Created dir: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\dist
Copying 1 file to C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\build
Copy libraries to C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\dist\lib.
Building jar: C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\dist\VNC_Streamer.jar
To run this application from the command line without Ant, try:
java -jar "C:\Users\Wojtek\Documents\NetBeansProjects\VNC Streamer\dist\VNC_Streamer.jar"
jar:
BUILD SUCCESSFUL (total time: 7 seconds) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:29:06.897

在构建目录中驻留生成的 jar 和目录 lib。

所以类路径应该包含`./lib`. 这可以在 META-INF/MANIFEST.MF 的主 jar 中设置为 Class-Path，因此您不需要从命令行添加它。用 7zip 查看罐子。

当前运行必须从具有主 jar 和 lib 子目录的（构建）目录发生。

顺便说一句，环境类路径不需要包含 JRE 的 bin。

# php - 肥皂：信封 SOAP-ENV：信封 PHP

> ID：14770898
> 
> 赞同：11
> 
> 时间：2013-02-08T10:51:37.610
> 
> 标签：php, xml, soap, soap-client

我正在尝试使用 PHP 的内置肥皂函数登录 API。我得到了这样的结果。

```
[LoginResult]=> false,
[ErrorMsg] => Login failed with the reason : The security object is invalid 
```

这是 API 提供者所要求的。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <Login xmlns="http://tempuri.org/Example/Service1">
          <objSecurity>
              <WebProviderLoginId>test</WebProviderLoginId>
              <WebProviderPassword>test</WebProviderPassword>
              <IsAgent>false</IsAgent>
          </objSecurity>
          <OutPut />
          <ErrorMsg />
    </Login>
</soap:Body>
</soap:Envelope> 
```

&，这是我能够使用函数产生的。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tempuri.org/Example/Service1">
<SOAP-ENV:Body>
    <ns1:Login>
        <objSecurity>
             <WebProviderLoginId>test</WebProviderLoginId>
             <WebProviderPassword>test</WebProviderPassword>
             <IsAgent>false</IsAgent>
        </objSecurity>
        <OutPut/>
        <ErrorMsg/>
    </ns1:Login>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这是我用来发送请求的代码。

```
<?php
class objSecurity {
function objSecurity($s, $i, $f)   {
    $this->WebProviderLoginId = $s;
    $this->WebProviderPassword = $i;
    $this->IsAgent = $f;
}
}

class nextObject {
function nextObject($objSecurity)   {
    $this->objSecurity=$pobjSecurity;
    $this->OutPut=NULL;
    $this->ErrorMsg=NULL;
}
}

$url    = 'http://example.com/sampleapi/test.asmx?WSDL';
$client = new SoapClient($url, array("soap_version" => SOAP_1_1,"trace" => 1));
$struct = new objSecurity('test', 'test', false);
$data   = new nextObject($struct);
$soapstruct2 = new SoapVar($data, SOAP_ENC_OBJECT);
print_r(
   $client->__soapCall(
       "Login",
       array(new SoapParam($soapstruct2, "inputStruct"))
   )
);

echo $client->__getLastRequest();

?> 
```

这些是我发现的差异。

在我的请求`xmlns:xsi`中丢失了。

要求以 开头`<soap:Envelope`，但我的请求以 开头`<SOAP-ENV:Envelope`。

`xmlns:ns1`我的请求中有一个额外的内容。

& 函数名称标签以`ns1:`.

请帮助我将我的请求转换为所需的格式。

我对 SOAP 了解不多，我使用的是 PHP 5.3.13 版和 CakePHP 2.3.0。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T13:44:11.967

这是解决方案。`:)`

```
<?php
$url    = 'http://example.com/sampleapi/test.asmx?WSDL';
$client = new SoapClient($url, array("soap_version" => SOAP_1_1,"trace" => 1));

$user_param = array (
  'WebProviderLoginId' => "test",
  'WebProviderPassword' => "test",
  'IsAgent' => false
);

$service_param = array (
  'objSecurity' => $user_param,
  "OutPut" => NULL,
  "ErrorMsg" => NULL
);

print_r(
   $client->__soapCall(
       "Login",
       array($service_param)
   )
);

echo $client->__getLastRequest();

?> 
```

&请求是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tempuri.org/Example/Service1">
<SOAP-ENV:Body>
   <ns1:Login>
       <ns1:objSecurity>
           <ns1:WebProviderLoginId>test</ns1:WebProviderLoginId>
           <ns1:WebProviderPassword>test</ns1:WebProviderPassword>
           <ns1:IsAgent>false</ns1:IsAgent>
       </ns1:objSecurity>
   </ns1:Login>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

感谢这个链接。 [PHP SOAP 请求不正确](https://stackoverflow.com/questions/10297099/php-soap-request-not-right?rq=1)

# c# - 从 C# 中的文件计算统计信息的最佳方法

> ID：14770901
> 
> 赞同：0
> 
> 时间：2013-02-08T10:51:47.817
> 
> 标签：c#

我在远程位置有大约 300k 图像文件。我下载（必须）并将这些文件的详细信息写入文本文件（带有一些附加信息）。由于我获得的信息的性质，我必须在每个文件到达时对其进行处理（我还将每个文件信息写入文件行）以获取某种形式的统计信息，例如，我有一个带有属性的对象列表大小和计数，看看我有多少特定尺寸的图像。

我还考虑过在不保留任何统计信息的情况下将所有内容读取和写入文件，我可以再次打开文件以添加统计信息。但我想不出一种方法来处理 250k 行多属性文件以获取统计信息。

我知道列表（是的，我有 2 个）并且每个项目的恒定循环都在干扰应用程序，但还有其他方法吗？现在已经 2 小时了，应用程序仍在 26k 上。对于每个图像项，我会做这样的事情来保持计数，我检查图像是否具有之前确实出现的特定大小，我将其添加到该列表项中。

```
public void AddSizeTokens(Token token)
{
  int index = tokenList.FindIndex(item => item.size== token.size);
  if (index >= 0)
    tokenList[index].count+=1;
  else
    tokenList.Add(token);
} 
```

我写入的文件中的一行是什么样的

```
Hits    Size     Downloads     Local Loc                   Virtual ID
204     88.3        4212        .../someImage.jpg       f-dd-edb2-4a64-b42 
```

我正在下载如下文件；

```
try
{
   using (WebClient client = new WebClient())
   {
     if (File.Exists(filePath + "/" + fileName + "." + ext))
     {
        return "File Exists: " + filePath + "/" + fileName + "." + ext;
     }
     client.DownloadFile(virtualPath, filePath + "/" + fileName + "." + ext);
     return "Downloaded: " + filePath + "/" + fileName + "." + ext;
   }
 }
 catch (Exception e)  {
      return"Problem Downloading " + fileName + ": " + e.Message;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:58:56.050

好吧，我想也许编码是问题所在。有些问题确实如此。根据 Daniel Hilgarth 的指示，改用字典有很大帮助，但只有前 30 分钟。然后每分钟都在恶化。

问题显然是我提供信息的那些看起来很无辜的 UI 元素。他们吃掉了太多的cpu，最终杀死了应用程序。最小化 UI 信息源有帮助（每分钟 1.5k 到最慢的 1.3k）。难以置信的！希望它可以帮助其他有类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:00:54.653

您应该将您的`tokenList`from更改`List<Token>`为`Dictionary<long, Token>`.
关键是大小。

您的代码如下所示：

```
Dictionary<long, Token> tokens = new Dictionary<long, Token>();

public void AddSizeTokens(Token token)
{
    Token existingToken;
    if(!tokens.TryGetValue(token.size, out existingToken))
        tokens.Add(token.size, token);
    else
        existingToken.count += 1;
} 
```

这会将其从 O(n) 操作更改为 O(1) 操作。

要考虑的另一点是Destrictor 的评论。您的互联网连接速度很可能是这里的瓶颈。

# django - 在 sqlite 中使用 django prefetch_related

> ID：14770903
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:51:55.887
> 
> 标签：django, sqlite, django-orm

我有一个与其他模型相关的模型。

```
class Foo(...)
 ...

class Bar(...)
 foo = models.ForeignKey(Foo, related_name('bars')) 
```

我需要为许多 Foo 加载所有相关的 Bar，所以我使用 prefetch_related。

```
Foo.objects.filter(...).prefetch_related('bars') 
```

在 debug_toolbar 中，我看到附加查询为所有 foo 采用 Bars，但也有一些查询为每个 Foo 采用 Bars。

在 sqlite 中 prefetch_related 不起作用吗？还是我做错了什么？

我遍历模板中的所有 Foos，但我认为这无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:30:52.363

好的，问题出在我的代码中。我在执行另一个查询的管理器中使用了 latest() 方法。

# javascript - 简单的xml属性值在html文件中获取使用xslt

> ID：14770908
> 
> 赞同：0
> 
> 时间：2013-02-08T10:52:05.590
> 
> 标签：javascript, jquery, xml, xslt, xpath

XML 文件如下所示：-

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="final.xsl"?>  
  <root>
    <child1 entity_id = "1" value= "Asia">
        <child2 entity_id = "2" value = "india">
            <child3 entity_id = "3" value = "Gujarat">
                <child5 entity_id = "5" value ="Rajkot"></child5>
            </child3>
            <child4 entity_id = "4" value = "Rajshthan">
                <child6 entity_id = "6" value = "Ajmer"></child6>
            </child4>
        </child2>
    </child1>
    </root> 
```

这是我的 XSLT 代码：-

```
<xsl:for-each select="//child2">
    <xsl:value-of select="@value" />    
</xsl:for-each> 
```

这是我的输出：-

```
 india 
```

我想要 html 文件中的这个输出，它怎么可能请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:52:18.170

此 XSLT 将显示与参数值匹配的项的子项`region`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="UTF-8"/>
  <xsl:key name="kChild" match="*[@value]" use="../@value"/>

  <xsl:param name="region" select="'india'" />

  <xsl:template match="/">
    <xsl:apply-templates select="key('kChild', $region)" />
  </xsl:template>

  <xsl:template match="*">
    <xsl:value-of select="@value"/>
    <xsl:text>&#xA;</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

例如，如果使用默认值“india”，输出将是：

```
Gujarat
Rajshthan 
```

如果使用值“亚洲”，输出将是：

```
india 
```

为了将参数传递到 XSLT，我认为您需要在网页中使用 JavaScript 来应用 XSLT，而不是自动应用它。

这是一个包含一些代码的页面，展示了如何在 JavaScript 中应用 XSLT，以及如何将参数传递给它：

[http://www.articlejobber.com/tutorial/javascript_xslt_parameters_20060303_2.html](http://www.articlejobber.com/tutorial/javascript_xslt_parameters_20060303_2.html)

# c# - 自定义 API 控制器方法

> ID：14770909
> 
> 赞同：0
> 
> 时间：2013-02-08T10:52:07.860
> 
> 标签：c#, asp.net-mvc

我正在尝试创建自定义 API 控制器方法。我想通过使用 /api/optionalgroup/getbypricelist/{id} 来调用它，但不能让它工作。

这是我的 WebApiConfig

```
public static void Register(HttpConfiguration config)
{
    config.Routes.MapHttpRoute(
        name: "ApiByAction",
        routeTemplate: "api/{controller}/{action}",
        defaults: new { action = "Get", id = RouteParameter.Optional }
    );

    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );

    var json = config.Formatters.JsonFormatter;
    json.SerializerSettings.PreserveReferencesHandling =
        Newtonsoft.Json.PreserveReferencesHandling.Objects;

    config.Formatters.Remove(config.Formatters.XmlFormatter);
} 
```

}

这是我的 ApiController

```
 public class OptionalGroupController : ApiController
    {
        // GET api/optionalgroup
        public IEnumerable<string> GetByPricelist(int id)
        {
            return new string[] { "value1", "value2" };
        }

        // GET api/optionalgroup/5
        public string Get(int id)
        {
            return "value";
        }

        // POST api/optionalgroup
        public void Post([FromBody]string value)
        {
        }

        // PUT api/optionalgroup/5
        public void Put(int id, [FromBody]string value)
        {
        }

        // DELETE api/optionalgroup/5
        public void Delete(int id)
        {
        }
    }
} 
```

但是当我尝试使用 uri /api/optionalgroup/getbypricelist/5 调用它时，它不起作用，但是如果我用默认的 Get() 替换 GetByPricelist 方法，它可以与 uri /api/optionalgroup 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:54:14.380

我找到了解决方案。刚刚将 ApiConfig 行替换 `routeTemplate: "api/{controller}/{action}"`为 `routeTemplate: "api/{controller}/{action}/{id}"`

# python - 将元组转换为字典

> ID：14770917
> 
> 赞同：0
> 
> 时间：2013-02-08T10:52:31.277
> 
> 标签：python, dictionary, tuples

对于下面的元组列表：

```
[('a',1),('b', 2)] 
```

我想将其转换为：

```
[{'a' : 1}, {'b', 2}] 
```

这是一个字典列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:54:02.770

```
lst = [{k: v} for k, v in lst] 
```

你的元组列表在哪里`lst`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:54:49.800

```
[{t[0] : t[1]} for t in [('a',1),('b', 2)]] 
```

# image - Matlab - 转换图像并将其保存到磁盘

> ID：14770920
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:52:40.660
> 
> 标签：image, matlab, save

我已使用以下命令将图像转换为灰度：`rgb2gray`.

例如：

```
I = imread('xyz.jpg');
I2 = rgb2gray(I); 
```

如何将新的（转换后的图像）保存到磁盘？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T10:58:00.760

```
imwrite(I2,filename,fmt) 
```

参考： http: [//www.mathworks.co.uk/help/matlab/ref/imwrite.html](http://www.mathworks.co.uk/help/matlab/ref/imwrite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T07:53:49.610

注意：该命令必须像这样执行：

```
imwrite(I2,'xyz.jpg','jpg'); 
```

xyz.jpg 是您需要的格式的文件名。

jpg是图像的格式。

请记住，图像会保存在您当前的 MATLAB 目录中...

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-08T10:58:28.370

一种方法可能是：

显示（`enter code here`I2）；

然后，对于出现的图形，选择`File --> Save`或`File --> Save As...`

# android - 如何隐藏 android 最近列表中的最后一个活动视图？使用更衣室屏幕实现

> ID：14770921
> 
> 赞同：4
> 
> 时间：2013-02-08T10:52:45.293
> 
> 标签：android, android-layout, android-intent, android-activity

我正在使用[锁屏](https://stackoverflow.com/questions/4075180/application-idle-time/4075857#4075857)的实现，当它空闲 X 秒时，它会锁定（显示在顶部）当前活动。*但是，在单击“主页”*和“*最近*”按钮后，储物柜活动的视图不会显示在预览图像中。

![在此处输入图像描述](../Images/ebf80d48cae3116a043e6a71af08d011.png)

如何强制使我的应用程序视图空白或在最近列表中显示我的储物柜视图？我可以将我的活动设置为可见，但还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-02-06T08:38:49.947

尝试 FLAG_SECURE：

```
public class FlagSecureTestActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_SECURE,
                         WindowManager.LayoutParams.FLAG_SECURE);

    setContentView(R.layout.main);
  }
} 
```

按下“最近”按钮时，它将自动显示灰色背景。

一个可能的副作用是您无法截取您以这种方式定义的活动的屏幕截图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:59:37.133

尝试属性，`android:noHistory="true"`用于清单文件中的活动标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T10:55:04.213

当应用程序进入后台时，recents 应用程序会获得类似于“屏幕截图”的内容，因此在进入后台之前，您可以使用黑色 LinearLayout 填充您的活动，并 onResume 检查此 LinearLayout 是否正在显示和隐藏。也许有更好的解决方案，但这可能有效。

# node.js - node.js 中用于 websocket 通信的 DNode 实现

> ID：14770925
> 
> 赞同：0
> 
> 时间：2013-02-08T10:52:57.977
> 
> 标签：node.js, websocket, socket.io, dnode, sockjs

我不明白**DNode**使用**websocket**通信的方式。有人说它使用**socket.io**其他人说**sockjs**。哪一个？或者可以选择吗？

我正在尝试使用 DNode，但我还需要访问**连接**以进行（半）广播以响应 RPC 调用。我该怎么做呢？

在某个地方是否有关于 dnode 的更广泛的手册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T03:59:10.530

你的问题有点含糊。我不确定 DNode 是使用 socket.io 还是 sockjs，甚至不确定它是否使用基于其依赖项列表的其中之一，但这在您对其进行编程时并不重要。

至于使用与 DNode 的连接，这非常简单。这是一个例子：

```
var server = dnode({
    pushMessageNotification: function(message, cb) {
        contact = getClientFromId(message.receiver);
        contact.socket.emit('messageNotification', {
            message: message.message,
            sender: message.sender,
            time: message.time
        });
        cb('success');
    }
}); 
```

如您所见，pushMessageNotification 是我与 DNode-PHP 绑定的一个方法，消息通过 PHP 以 JSON 编码。之后，您所需要的只是一种根据其 id 找到客户端套接字的方法。

# html - 垂直顶部对齐文本

> ID：14770931
> 
> 赞同：0
> 
> 时间：2013-02-08T10:53:19.607
> 
> 标签：html, css

这是我迄今为止尝试过的**[DEMO 。](http://jsfiddle.net/s38Uv/20/)**

我需要的是将文本推送到 div 的确切顶部，以便它与图像顶部对齐方式匹配。

我希望图像和文本都像一行一样对齐，现在您可以看到文本顶部的小空间与顶部不完全对齐。

**HTML**

```
<div class="wrap"> 
    <div class="image"><img src="" /></div>
    <div class="content">Lorem ipsum</div>
</div> 
```

**CSS**

```
.wrap{background:grey}
.image{display:table-cell; vertical-align:top}
.content{display:table-cell; vertical-align:top; font-size:24px} 
```

[http://jsfiddle.net/s38Uv/20/](http://jsfiddle.net/s38Uv/20/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:00:30.183

您**不需要**垂直对齐`display:table-cell`到顶部 - 这是默认行为。

您有差距的原因是 line-height 与文本周围的虚拟框不完全相同。区别取决于字体本身。如果您正在为 explorer 7 及更高版本工作，您可以将文本设置为`display:inline-block`，然后`margin-top: -0.Xem`其中 X 是任意数字。当然，您也可以使用像素设置 margin-top。

# javascript - 大型嵌套 JSON 数据并在更改时更新 DOM

> ID：14770934
> 
> 赞同：0
> 
> 时间：2013-02-08T10:53:37.287
> 
> 标签：javascript, knockout.js

我正在处理大量的json，数据是这样的：

```
{
    "name": "John Smith",
    "age": 32,
    "employed": true,
    "address": {
        "street": "701 First Ave.",
        "city": "Sunnyvale, CA 95125",
        "country": "United States"
    },
    "children": [
        {
            "name": "Richard",
            "age": 7,
            "field": {
                "field": "value"
            }
        }
    ]
} 
```

每当我更改任何内容时，我都会得到一个新的响应，这与以前的数据有些相似，但是可能已经添加了新属性，可能已经删除了一些东西等等。

我的测试代码是这样的（不要介意这里有无数的坏习惯）：

```
<div data-viewmodel="whatevz">
    <span data-bind="text: stuff['nested-thingy']"></span>
</div>
<script>
    function vm() {
        var self = this;
        this.stuff = ko.observable();

        require(["shop/app"], function (shop) {
            setTimeout(function () {
                self.stuff(shop.stuff);
            }, 1200);
        });
    }

    ko.applyBindings(new vm(), $("[data-viewmodel]")[0]);
</script> 
```

我希望东西['nested-thingy'] 在更新东西时更新。如果没有各种映射并使一切都可观察，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:50:49.817

您只需要更新您的出价：

```
<div data-viewmodel="whatevz">
    <span data-bind="text: stuff()['nested-thingy']"></span>
</div> 
```

您必须使用 () 访问 observable 的值。这将返回您的对象，然后您可以访问它。绑定的内容仍然依赖于可观察的东西，因此它应该在更新东西时更新。

至少我的小提琴是这样工作的：http: [//jsfiddle.net/delixfe/guM4X/](http://jsfiddle.net/delixfe/guM4X/)

```
<div data-bind="if: stuff()">
    <span data-bind="text: stuff()['nested-thingy']"></span>
</div>
<button data-bind="click: add1">1</button>
<button data-bind="click: add2">2</button> 
```

注意`data-bind="if: stuff()`. 如果您的内容在绑定时或更晚时为空，则这是必要的......

```
function Vm() {
    var self = this;
    self.stuff = ko.observable();

    self.add1 = function () {
        self.stuff({'nested-thingy': "1"});
    };

    self.add2 = function () {
        self.stuff({'nested-thingy': "2"});
    };        

}

ko.applyBindings(new Vm()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:50:30.943

您不能使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)为您处理映射的任何原因？您可以对不想成为可观察的属性使用复制选项：

```
var mapping = {
    'copy': ["propertyToCopy"]
}
var viewModel = ko.mapping.fromJS(data, mapping); 
```

# silverlight - Silverlight 客户端 Node.js 服务器 - 访问被拒绝错误

> ID：14770938
> 
> 赞同：0
> 
> 时间：2013-02-08T10:53:43.470
> 
> 标签：silverlight, node.js, sockets

我有一个简单的 nodejs Tcp 服务器，它注册每个客户端并将每条消息从客户端广播到所有其他客户端。

问题是与silverlight 插座连接。当我尝试连接到在 4530 端口中运行 nodejs Tcp 服务器的公共 IP 时，我收到一条错误消息“拒绝访问”。

节点代码：

```
net = require('net');         
var clients = [];
net.createServer(function (socket) {        
  socket.name = socket.remoteAddress + ":" + socket.remotePort 
  clients.push(socket);      
  socket.on('data', function (data) {
    broadcast(data, socket);
  });        
  socket.on('end', function () {
    clients.splice(clients.indexOf(socket), 1);

  });
  function broadcast(message, sender) {
    clients.forEach(function (client) {

      if (client === sender) return;
      client.write(message);
    });
  }     
}).listen(4530); 
```

银光代码：

```
void Connect(string IP_Address)
{
    client_socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
    SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs()
    {
          RemoteEndPoint = new IPEndPoint(IPAddress.Parse(IP_Address), 4530)
    };
    socketEventArg.Completed += OnConncetCompleted;
    client_socket.ConnectAsync(socketEventArg);
}

void OnConncetCompleted(object sender, SocketAsyncEventArgs e)
        {
            if (e.SocketError == SocketError.Success)
            {
                this.Dispatcher.BeginInvoke(new ShowMessagedelegate(ShowMessageBox), "Connceted Successfully!");
                this.Dispatcher.BeginInvoke(new Enabledelegate(EnableControl), true);

            }
            else
            {
                this.Dispatcher.BeginInvoke(new ShowMessagedelegate(ShowMessageBox), e.SocketError.ToString());
                this.Dispatcher.BeginInvoke(new Enabledelegate(EnableControl), false);
            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:25:08.650

也许，您在 nodejs Tcp 服务器的根目录下没有 clientaccesspolicy.xml 文件。阅读更多： http: [//msdn.microsoft.com/ru-ru/library/cc645032 (v=vs.95).aspx](http://msdn.microsoft.com/ru-ru/library/cc645032(v=vs.95).aspx)

示例策略文件：

```
<?xml version="1.0" encoding ="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from>
        <domain uri="file:///" />
      </allow-from>
      <grant-to>
        <socket-resource port="4530" protocol="tcp" />
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

# git - 如何将您在开源中的更改提交到 Github

> ID：14770939
> 
> 赞同：-1
> 
> 时间：2013-02-08T10:53:43.313
> 
> 标签：git, github, version-control, open-source, git-branch

我正在为开源做出贡献，并希望提交我的更改。我知道这些步骤

1) fork 开源存储库

2）将更改推送到该存储库中的新分支

3）单击该开源存储库中的“拉取请求”按钮，您的分支名称在右侧。

但我不知道如何执行第二步。实际上我得到了一个虚拟机设置并将它安装在我的虚拟机上。

我所做的只是在他们的存储库上按 fork，它在我的 github 帐户中创建了一个 repo，然后我只需在 github 站点上键入 create branch 就创建了一个分支。

现在我不知道如何将我的更改发送到我在新分支中的帐户上的这个新分叉的 repo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:06:24.723

您需要在您的计算机上设置 git，将您的分叉存储库克隆到您的计算机，进行更改，然后提交并推送回 GitHub。GitHub 有一些很好的应用程序可以让您更轻松地完成此操作。在此处查看分步指南：

[https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

# c# - LINQ 和 AutoMapper

> ID：14770941
> 
> 赞同：15
> 
> 时间：2013-02-08T10:53:45.113
> 
> 标签：c#, linq, entity-framework, automapper

我想知道我是否可以做些什么来让它按预期工作。这在我的代码中运行良好：

```
 var roles = _securityContext.Set<Role>();
        var roleList = new List<RoleDto>();
        foreach (var role in roles)
        {
            roleList.Add(Mapper.Map<Role, RoleDto>(role)); 
        }

        return roleList; 
```

但将其更改为：

```
 var roles = _securityContext.Set<Role>();

        return roles.Select(role => Mapper.Map<Role, RoleDto>(role)).ToList(); 
```

导致我以前从未见过的错误：

“LINQ to Entities 无法识别方法 'Security.Dto.RoleDto MapRole,RoleDto' 方法，并且此方法无法转换为存储表达式”

我不确定我是否可以对这个“问题”做任何事情......可以说，无论如何，可行的方法更具可读性......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-08T10:56:03.177

您正在操作`IQueryable`，它试图将您提供的方法转换为 SQL。显然，这不会发生，因为您正在传递与 AutoMapper 相关的魔法。有一个简单的解决方案，您必须在映射之前强制执行：

```
return roles.ToList().Select(role => Mapper.Map<Role, RoleDto>(role)).ToList(); 
```

[编辑] 正如丹尼尔在评论中建议的那样，您始终可以通过调用从`IQueryable`到并仍然推迟执行：`IEnumerable``AsEnumerable()`

```
return roles.AsEnumerable().Select(role => Mapper.Map<Role, RoleDto>(role)).ToList(); 
```

# java - Itext pdf合并：pdf（文本被截断）页面外的文档溢出并且不显示

> ID：14770942
> 
> 赞同：0
> 
> 时间：2013-02-08T10:53:48.163
> 
> 标签：java, pdf-generation, itext

我正在尝试将 2 个 pdf 合并为一个。合并工作正常，但内容从 pdf 页面溢出。A如附件所示。原始文件pdf如下。

![合并前的原始文档](../Images/1b3a72816043cd79c988465e6d56d74e.png)

合并文档后是这样的 ![在此处输入图像描述](../Images/a761d848ec8132e9a134d388d36d3daa.png)

Java代码如下：

```
BaseFont bf = BaseFont.createFont(BaseFont.TIMES_BOLD, BaseFont.CP1252, BaseFont.EMBEDDED);
        //BaseFont bf= BaseFont.createFont();
        PdfContentByte cb = writer.getDirectContent(); // Holds the PDF
        // data
        PdfImportedPage page;
        int currentPageNumber = 0;
        int pageOfCurrentReaderPDF = 0;
        Iterator<PdfReader> iteratorPDFReader = readers.iterator();

        // Loop through the PDF files and add to the output.
        while (iteratorPDFReader.hasNext()) {
            PdfReader pdfReader = iteratorPDFReader.next();

            // Create a new page in the target for each source page.
            while (pageOfCurrentReaderPDF < pdfReader.getNumberOfPages()) {
                document.newPage();
                pageOfCurrentReaderPDF++;
                currentPageNumber++;
                page = writer.getImportedPage(pdfReader,
                        pageOfCurrentReaderPDF);
                cb.addTemplate(page, 0, 0);

                // Code for pagination.
                if (paginate) {
                    cb.beginText();
                    cb.setFontAndSize(bf, 9);
                    cb.showTextAligned(PdfContentByte.ALIGN_CENTER, ""
                            + currentPageNumber + " of " + totalPages, 520,
                            5, 0);
                    cb.endText();
                }
            }
            pageOfCurrentReaderPDF = 0;
        } 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:34:44.000

请下载[我的书第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)并查看表 6.1。您在合并两个文档时犯了错误，使用`PdfWriter`而不是使用`PdfCopy`文档。查看清单 6.22 了解如何在使用`PdfCopy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:49:30.340

我使用“PdfCopyFields”片段如下：

```
public static boolean concatPDFFiles(List<String> listOfFiles,
        String outputfilepath) throws FileNotFoundException, DocumentException {
    PdfCopyFields copy = null;
    try {
        copy = new PdfCopyFields(new FileOutputStream(outputfilepath));
    } catch (DocumentException ex) {
        Logger.getLogger(MergerGoogleDocsToPDF.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        for (String fileName : listOfFiles) {
            PdfReader reader1 = new PdfReader(fileName);
            copy.addDocument(reader1);
        }
    } catch (IOException ex) {
        Logger.getLogger(MergerGoogleDocsToPDF.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        copy.close();
    }
    if (new File(outputfilepath).exists()) {
        double bytes = new File(outputfilepath).length();
        //double kilobytes = (bytes / 1024);
        if (bytes != 0) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

# javascript - 在客户端获取文件大小（以字节为单位）

> ID：14770944
> 
> 赞同：0
> 
> 时间：2013-02-08T10:53:55.043
> 
> 标签：javascript, plugins, file-upload, browser

我做了多个文件上传项目，（服务器语言是PHP）

特别是，在上传之前，我需要在客户端获取文件大小（以字节为单位）。

今天最好的跨浏览器解决方案/插件是什么？

我发现`SWFUpload`，可能存在更好的解决方案？或使用这个`SWFUpload`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:56:37.667

在 HTML5 中，文件拖放事件会创建一个`File`具有`.size`属性的对象。

查找对象`ev.dataTransfer`列表`File`。

# php - 显示数据库中的类别显示空结果

> ID：14770945
> 
> 赞同：0
> 
> 时间：2013-02-08T10:53:55.057
> 
> 标签：php, mysql

我得到了 3 个表，产品、类别和 prod_cat 产品的 id 和类别的 id 与 prod_cat id_cat 和 id_prod 相关。

我想展示某个类别的产品来展示它，所以我写了这段代码：

```
$cat=$_POST['cat'];
$sql = mysql_query("SELECT products.id, products.product_name, products_cat.prod_id FROM products
INNER JOIN products_cat ON products.id=products_cat.prod_id ORDER BY products.id");
$catCount = mysql_num_rows($sql); // count the output amount
    while($row = mysql_fetch_array($sql)){ 
             $id = $row["id"];
             $product_name = $row["product_name"];
             $price = $row["price"];
             $date_added = strftime("%b %d, %Y", strtotime($row["date_added"]));
             $prod_list .= "category ID: $id - <strong>$product_name</strong> <br />"; 
```

但是当我在页面上显示 prod_list 变量时它是空的，我做错了什么？？？

顺便说一句，我想这样显示：www.mydomain.com/show.php?cat=x

# wordpress - 在本地服务器上链接外部 Wordpress 页面

> ID：14770955
> 
> 赞同：1
> 
> 时间：2013-02-08T10:54:16.187
> 
> 标签：wordpress, linker, prestashop, permalinks, webshop

我已将我的网站更新为 Wordpress 网站。但是现在我的 prestashop 有问题，我仍然需要在服务器/网络主机上运行。在我的旧页面上，我在旧站点文件夹中安装了名为“shop”的 prestashop - 所以链接将是 mysite.com/shop = 工作正常。

我有很好的永久链接在我的网站上工作，将所有方向外的 WP 网站作为“无结果 WP 页面”-我在这里存货。我不知道在哪里放置我的 prestashop 文件夹或如何从 Wordpress 链接到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:04:56.217

您是否在 Wordpress 中设置了永久链接，以便您的 .htaccess 如下所示？

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

该行`RewriteCond %{REQUEST_FILENAME} !-d`告诉服务器不要对安装根目录中的目录进行重写，因此您的商店目录中的任何内容都不应通过`index.php`.

# .net - .Net - 打开 excel 工作簿并打开以前的版本，缓存

> ID：14770957
> 
> 赞同：0
> 
> 时间：2013-02-08T10:54:26.673
> 
> 标签：.net, vb.net, excel

如果我打开我的 web 应用程序文件夹中的一个 excel 工作簿，当我阅读单元格时，它会为我提供我正在处理的以前的 excel 电子表格中的值。这可能是一些缓存问题吗？

```
 Dim xlApp As Excel.Application = Nothing
    Dim xlWorkBook As Excel.Workbook = Nothing
    Dim xlWorkSheet As Excel.Worksheet = Nothing
    Dim misValue As Object = System.Reflection.Missing.Value
    Dim strCell2 As String = ""
    xlApp = New Excel.ApplicationClass
    xlWorkBook = xlApp.Workbooks.Open("book1.xlsx")
    xlWorkSheet = xlWorkBook.Worksheets("sheet1")
    Dim strOutput As String = ""
    Dim cell As Excel.Range
    Dim i As Integer = 1
    For Each cell In xlWorkSheet.Range("B:B")
        strCell2 = xlWorkSheet.Cells(i, 2).value
        If strCell2 <> Nothing Then
            strCell2 = xlWorkSheet.Cells(i, 2).value ' value here is of a different workbook
            i = i + 1
        Else
            Exit For
        End If
    Next 
```

我可以在我的“解决方案资源管理器”中看到 Excel 电子表格，当我点击它时，它会打开正确的工作簿。困惑的.com。

任何想法，我需要在打开它之前清除内存或缓存吗？

# javascript - Highstock xAxis 日期时间

> ID：14770970
> 
> 赞同：1
> 
> 时间：2013-02-08T10:55:07.670
> 
> 标签：javascript, highcharts, highstock

我使用 Highstock 显示一个图表，显示列中的访问者数量，我需要缩放来显示每天、每月和每年的访问者数量

在我的图表中，我可以显示每天的访问者数量，但我也想显示每月和每年的访问者数量。但是当我查看我的图表（每月）时，我没有一个 12 列的图表，我有一个 365 列的图表（每天一个）。

我为 xAxis 使用 datetime 类型，但它不起作用......

> > x 范围选择器：{
> > 
> > > ```
> > >  inputDateFormat:'%d.%m.%Y',
> > >        inputEditDateFormat:'%d.%m.%Y',
> > >        buttonTheme: {
> > >            width: 80
> > >        }, 
> > > ```
> > 
> > ```
> >  buttons: [{
> >                type: 'day',
> >                count: 7,
> >                text: 'day'
> >            }, {
> >                type: 'month',
> >                count: 12,
> >                text: 'month'
> >            }, {
> >                type: 'year',
> >                count: 1,
> >                text: 'years'
> >            }],
> >        selected: 0
> >    }, 
> > ```
> > 
> > 轴：{
> > 
> > > ```
> > >  minTickInterval: 24 * 3600 * 1000,
> > >        type: 'datetime',
> > >        title: {
> > >            text: 'Time'
> > >        },
> > >        dateTimeLabelFormats: {
> > >            day: '%d.%m<br/>%Y'
> > >       }
> > >    } 
> > > ```

我怎样才能有一个“每列增加访问者”的图表？

以下是我现在得到的。第一张图没问题，但第二张图不行。我会 12 列而不是 365。

每天： ![每天：](../Images/3126318040fac64e169c9e553c165a3d.png) 每年： ![在此处输入图像描述](../Images/043a85a798baee49e2c91d12b7bf06d5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:36:26.360

Range selector buttons affecting to the time span which should be displayed on a chart. If you want to display specific unit on a chart, you need to use forced dataGrouping, see:

*   [http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.units](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.units)

*   [http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.forced](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.forced)

Example could be found here: [http://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume)

# asp.net-mvc - Pdf Reader 文档未正确上传到 Windows azure blob 存储

> ID：14770971
> 
> 赞同：1
> 
> 时间：2013-02-08T10:55:14.173
> 
> 标签：asp.net-mvc

当我尝试将 pdf 文档上传到 azure 存储时，它会使用特定的 URL 上传到 blob 存储。问题是当我尝试使用该 URL 在浏览器中打开 pdf 文档时，它没有打开。

我检查了源 pdf 文档，上传的 blob 大小分别为 2.8 Mb 和 0 Kb。将该 blob 保存到我的系统后，当我尝试使用 Adob​​e Reader 打开它时，它会显示错误：

> 'Adobe Reader 无法打开 doc.pdf 文件类型不受支持或文件损坏'。

看法：

```
<% using (Html.BeginForm("GetPdf", "Home", FormMethod.Post, new { enctype = multipart/form-data" })){ %>

    <input type="file" id="Document" name="Document" /><br />
    <input type="submit" value="Upload" /><br /><%} %> 
```

控制器：

```
// When I upload the pdf document by default am getting below:
// properties[ContentLength(size of document), ContentType(application/pdf),
// FileName(name of the document), InputStream(System.web.HttpInputStream)]

Public Action Result GetPdf(HttpPostedFileBase Document)
{
    var inputstream = Document.InputStream;
    var filename = Document.FileName;
    var doctype=Document.ContentType;              

CloudStorageAccount storageAccount = CloudStorageAccount.Parse(CloudConfigurationManager.GetSetting

("StorageConnectionString"));
      CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();
                CloudBlobContainer container = blobClient.GetContainerReference("documentscontainer");               
                container.CreateIfNotExists();              
                var permissions = container.GetPermissions();
                permissions.PublicAccess = BlobContainerPublicAccessType.Blob;
                container.SetPermissions(permissions);              
                string uniqueBlobName = string.Format("rewhizzdocuments/{0}",filename);
                CloudBlockBlob blob = container.GetBlockBlobReference(uniqueBlobName);
                blob.Properties.ContentType = doctype;    
                blob.UploadFromStream(inputstream);
} 
```

当我应用相同的代码（用于 pdf 文档的代码）上传图像时，它们会被上传到 blob 存储中，我可以使用 blob URL 获取图像。

任何有关如何解决此问题的想法将不胜感激。

# python - Django 代码更改未反映在生产服务器上

> ID：14770972
> 
> 赞同：10
> 
> 时间：2013-02-08T10:55:15.943
> 
> 标签：python, django, apache, caching, memcached

我更改了一个 .py 文件并将更改反映在本地开发人员上。删除 .pyc 后 Django 的服务器。生产服务器甚至没有这个特定文件的 .pyc。尝试触摸 apache wsgi 并在产品上重新启动 apache。服务器，但没有运气。即使删除此 .py 文件，应用程序也可以正常工作。安装了 memcached，但我不太清楚它是如何缓存的，还有 .git 和 5 个服务器托管 - 一个主服务器，4 个负载均衡器。

问候 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T12:37:02.620

是否 100% 确定您正在查看正在进行更改的正确服务器？我知道这听起来很愚蠢，但是，你为什么不停止 Apache，那么你还能运行页面吗？如果可以，那么您肯定没有正确的服务器。

如果没有，接下来尝试重新加载 Apache（这与重新启动不同）。

```
sudo service apache2 reload 
```

如果这仍然不起作用，请发布您的 Apache 设置，如果必须在错误的文件夹中查找您推送的文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T10:56:00.937

您必须重新启动服务器（WSGI、UWSGI 或您在生产环境中使用的任何东西）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T11:21:33.707

如果你使用 uwsgi 作为网关，在 uwsgi 设置中设置 touch-reload 参数，你只需要

```
$ touch <your-touch-reload-file> 
```

在控制台中反映更改

如果您将 apache 与 mod_python 或 mod_wsgi 一起使用，则必须重新启动 apache 才能应用更改

# ios - 如何从同样以编程方式创建的 uibutton 以编程方式显示弹出框（不使用界面生成器）

> ID：14770980
> 
> 赞同：15
> 
> 时间：2013-02-08T10:55:30.110
> 
> 标签：ios, uibutton, uipopover

我有一个在视图控制器中以编程方式创建的按钮。按下按钮后，我希望它使用一种方法以编程方式创建弹出框。

在我的视图 controller.m 的 ViewDidLoad 中创建的按钮

```
 UIView *moreFundInfoView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 540, 620)];
[self.view addSubview:moreFundInfoView];
[moreFundInfoView setBackgroundColor:[UIColor RMBColor:@"b"]];

btnContact = [UIButton buttonWithType:(UIButtonTypeRoundedRect)];

[btnContact setFrame:CGRectMake(390, 575, contactButton.width, contactButton.height)];
 btnContact.hidden = NO;
[btnContact setTitle:@"Contact" forState:(UIControlStateNormal)];
[moreFundInfoView addSubview:btnContact];

[btnContact addTarget:self action:@selector(showContactDetails:) forControlEvents:UIControlEventTouchUpInside]; 
```

然后我就有了按下按钮时使用的方法。

```
-(void) showContactDetails: (id) sender
{
UIViewController *popoverContent = [[UIViewController alloc]init];

UIView *popoverView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 200, 300)];

[popoverView setBackgroundColor:[UIColor RMBColor:@"b"]];

popoverContent.view = popoverView;

popoverContent.contentSizeForViewInPopover = CGSizeMake(200, 300);

UIPopoverController *contactPopover =[[UIPopoverController alloc] initWithContentViewController:popoverContent];

[contactPopover presentPopoverFromRect:btnContact.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES ];

[contactPopover setDelegate:self]; 
```

}

我在这里想念什么？因为它运行良好，但是一旦我单击按钮，应用程序就会崩溃。我认为这是一个代表问题，但我不确定。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-28T06:47:42.477

我认为这段代码会对你有所帮助。您肯定缺少委托方法

```
ViewController *viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:navigationController];
popover.delegate = self;
popover.popoverContentSize = CGSizeMake(644, 425); //your custom size.
[popover presentPopoverFromRect:button.frame inView:self.view permittedArrowDirections: UIPopoverArrowDirectionLeft | UIPopoverArrowDirectionUp animated:YES]; 
```

只要确保你没有忘记 UIPopover 委托方法，否则应用程序肯定会崩溃。这是强制性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-30T16:55:56.567

```
 UIViewController *controller = [[UIViewController alloc] init];
 [view removeFromSuperview]; //view is a view which is displayed in a popover
 controller.view = view;
 UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:controller];
 popover.delegate = self;
[popover presentPopoverFromRect:button.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T11:34:31.973

是的，将“保留”的属性更改为“强”可以让您保持选择器视图对象。我认为您的代码的问题是，当方法完成时， UIPopoverController 对象会自动释放。制作强大的属性让你强烈地指向一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-12T05:26:58.767

我所要做的就是将 .h 文件中的属性从“保留”更改为“强”，它可以工作，阻止应用程序崩溃。

# c++ - 以各种方式修改类的字段。使用装饰器？

> ID：14770983
> 
> 赞同：0
> 
> 时间：2013-02-08T10:55:41.690
> 
> 标签：c++, design-patterns

我有这样的结构：

```
struct CalibrationInputs {
  float eta;
  float rawcl_Es0;
  float rawcl_Es1;
  float rawcl_Es2;
  float rawcl_Es3;
}; 
```

这是一个大函数的输入

```
float calibrate(CalibrationInput inputs) 
```

我想`calibrate`使用偏差输入来应用函数，所以我需要一种方法来修改`CalibrationInputs`. 这是一项简单的任务，但我想以一种好的方式完成它。我现在正在做的是：

```
class BiasBase
{
public:
    BiasBase(float amount, std::string type) : m_amount(amount), m_type(type) { };
    virtual void bias(CalibrationInputs & calibration_inputs) = 0;
    std::string get_name() const { return m_type + "_" + get_amount_string(); };
    float get_amount() const { return m_amount; };
protected:
    float m_amount;
    std::string m_type;
};

class BiasE2 : public BiasFixed
{
  BiasE2(float amount) : BiasFixed(amount, "E2") { };
  void bias(CalibrationInputs & calibration_inputs) {
    calibration_inputs.rawcl_Es2 *= (1 + m_amount);
  }
};

class BiasE1 ...
class VeryComplexBias ...
class RandomBiasE2 ... 
```

我将它们用作：

```
CalibrationInput input;
CalibrationInput input_bias_e1 = input;
...
BiasE1 bias_e1(0.01);
bias_e1.apply_bias(input_bias_e1);
float result = calibrate(input);
float result_bias_e1 = calibrate(input_bias_e1);
... 
```

问题是：如果我想组合这些`Bias`类，同时应用两个或多个偏差怎么办？我不想让这个简单的问题过于复杂，但也许我可以使用装饰器。问题是每个装饰器类都需要继承自`CalibrationInputs`，所以我每次都在复制字段，不是吗？

这个问题有什么好的设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:59:01.523

星期五我想了一会儿这个问题，但我找不到一个真正好的解决方案，它可以以各种方式工作。我建议使用活页夹 (std::mem_fn, boost.Bind boost.Phoenix) 将您的成员转换为函数对象。完成此步骤后，您可以创建：

*   多态函数对象（std::function, boost.Function）以统一的方式传递这些“成员”
*   在模板中使用这些函数对象来组合它们并创建更复杂的函数对象。

如果您需要额外的偏差类型运行时配置，您可以考虑使用 boost.Spirit 实现一种解释器。我希望这有帮助。

# php - 删除 php 数组中不需要的行

> ID：14770985
> 
> 赞同：0
> 
> 时间：2013-02-08T10:55:46.950
> 
> 标签：php, json

我正在使用 PHP 显示来自数据库的数据。我正在使用 JSON。但在结果期间，我得到了不需要的数组。这是示例：

```
while($row = mysql_fetch_array($result))
{
    echo "<pre>"; print_r($row); echo "</pre>";
    //$output[]=$row;
} 
```

输出：

```
Array
(
    [0] => Ravi Ad
    [title] => Ravi Ad
) 
```

在这里我看到，一个额外的列显示名称 [0]。我讨厌它，并且在解析时出现问题。任何一次都可以删除它吗？我正在尝试这个结果：-

```
Array
(
    [title] => Ravi Ad
) 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:57:20.733

尝试`mysql_fetch_assoc`

```
while($row = mysql_fetch_assoc($result))
    {

    echo "<pre>"; print_r($row); echo "</pre>";
    //$output[]=$row;
    } 
```

注意：mysql_* 在新版本的 php 中已弃用，使用 mysqli 或 PDO

参考： http: [//php.net/manual/en/function.mysql-fetch-array.php](http://php.net/manual/en/function.mysql-fetch-array.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:58:44.130

使用 `mysql_fetch_assoc($result)`而不是`mysql_fetch_array($result)`

此扩展自[PHP 5.5.0 起已弃用，](http://php.net/manual/en/function.mysql-fetch-assoc.php)并将在未来删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

# css - 自定义搜索栏和响应式网格

> ID：14770986
> 
> 赞同：1
> 
> 时间：2013-02-08T10:55:52.337
> 
> 标签：css, responsive-design, zurb-foundation

我最近发现了很酷的文章[http://www.tripwiremagazine.com/2012/01/how-to-create-a-seach-bar-in-photoshop.html](http://www.tripwiremagazine.com/2012/01/how-to-create-a-seach-bar-in-photoshop.html)。不知道如何处理响应式网格中的背景图像。如何使用 Zurb Foundation 网格制作这样的搜索栏？是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:18:05.050

设计中的搜索栏可以完全使用 CSS 设置样式，然后您根本不必使用背景图像。以下是一些使这项工作有效的代码要点：

HTML：

```
<div class="input-container">
     <input type="text" />
     <button>Search</button>
</div> 
```

文字输入：

```
input[type="text"] {
    box-shadow: inset 0 1px 3px rgba(0,0,0,.3);
    border-radius: 5px;
    background-color: #fff;
} 
```

按钮：

```
button {
    margin-left: -10%;
    background-image: -webkit-linear-gradient(top, #117a03 0%,#287c15 100%);
    border-radius: 0 5px 5px 0;
    height: 32px;
    padding: 0 5px;
    border: 1px solid #bbb;
    box-shadow: inset 0 1px 2px rgba(0,0,0,.3), 0 1px #fff;
    color: #074F03;
    text-shadow: 0px 1px #ccc;
    font-weight: bold;
} 
```

您需要为 CSS3 属性添加供应商前缀，但这是一个非常基本的起点，应该会为您提供所需的一切。这是它的工作原理：http: [//jsfiddle.net/J6Dvz/](http://jsfiddle.net/J6Dvz/)

# asp.net - 表单身份验证、共享 cookie 问题

> ID：14770989
> 
> 赞同：1
> 
> 时间：2013-02-08T10:56:00.007
> 
> 标签：asp.net, cookies, forms-authentication, subdomain

我注意到共享身份验证 cookie 设置的一些奇怪行为，这是我的场景。

我有两个应用程序，其域类似于以下内容：

login.mydomain.com system.mydomain.com

我将用户重定向到 login.mydomain.com 并像这样在 mydomain.com 上删除 cookie。

**system.mydomain.com：**

```
void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        if (Context.User == null || !Request.IsAuthenticated)
        {
            HttpContext.Current.Response.Redirect("http://login.mydomain.com");
        }
    } 
```

**login.mydomain.com**

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {
        pnlLoginNotice.Visible = true;
        if (Membership.ValidateUser(txtUsername.Text, txtPassword.Text))
        {
            HttpCookie cookie = FormsAuthentication.GetAuthCookie(txtUsername.Text, chkRememberMe.Checked);
            cookie.Domain = "mydomain.com";

            Response.Cookies.Set(cookie);
        }
    } 
```

**网络配置：**

```
<authentication mode="Forms" >
  <forms timeout="2880" name=".COMMONAUTH"  />      
</authentication> 
```

现在我看到的行为是我有时会在 system.mydomain.com 下找到 .COMMONAUTH cookie，而在 mydomain.com 下有相同的 cookie。我注意到它在网站上一段时间不活动后出现。

asp.net 是否有可能自己删除 cookie 以保持表单身份验证有效？

**更新** 我尝试了以下方法

**1：**

system.mydomain.com Web.config

```
<authentication mode="Forms" >
  <forms timeout="1" name=".COMMONAUTH" />      
</authentication> 
```

login.mydomain.com Web.config

```
<authentication mode="Forms" >
  <forms timeout="2"  name=".COMMONAUTH"/>
</authentication> 
```

一分钟后刷新 system.mydomain.com 中的页面时，我在 system.mydomain.com 下获得 .COMMONAUTH cookie

**2：**

system.mydomain.com Web.config

```
<authentication mode="Forms" >
  <forms timeout="2" name=".COMMONAUTH"  />      
</authentication> 
```

login.mydomain.com Web.config

```
<authentication mode="Forms" >
  <forms timeout="1"  name=".COMMONAUTH"/>
</authentication> 
```

一分钟后刷新 system.mydomain.com 中的页面时，我退出了。

**3：**

system.mydomain.com Web.config

```
<authentication mode="Forms" >
  <forms timeout="1" name=".COMMONAUTH" domain="mydomain.com" />      
</authentication> 
```

login.mydomain.com Web.config

```
<authentication mode="Forms" >
  <forms timeout="2"  name=".COMMONAUTH" domain="mydomain.com"/>
</authentication> 
```

一分钟后刷新 system.mydomain.com 中的页面时，一切都保持不变，我仍然通过身份验证。不确定将第三个应用程序引入此设置时会发生什么

**结论**

我认为我的问题来自未在 web.config 中设置域，因此 system.mydomain.com 正在尝试刷新 cookie 但正在使用自己的域，因为我没有告诉它应该在哪里做。

我的问题是这些应用程序将具有不同的域绑定，并且它们将为多个客户端托管一次。我无法设置 FormsAuthentication.CookieDomain 因为它是只读的。

我应该选择选项 2，并让我的 cookie 发行者从其他应用程序中获得较低的超时时间吗？这会有什么影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T11:43:27.790

我最终这样做了，我暂时不会将此标记为答案，以防万一有人指出它的任何问题。

在 Global.asax

```
void Application_AuthenticateRequest(object sender, EventArgs e)
    {
        if (Context.User == null || !Request.IsAuthenticated)
        {
            HttpContext.Current.Response.Redirect(GetLoginUrl());
        }
        else if (Context.User.Identity is FormsIdentity)
        {
            HttpCookie cookie = Context.Request.Cookies[FormsAuthentication.FormsCookieName];

            if (cookie != null)
            {
                FormsAuthenticationTicket currentTicket = FormsAuthentication.Decrypt(cookie.Value);

                if (currentTicket == null && currentTicket.Expired)
                {
                    return;
                }
                FormsAuthenticationTicket newTicket = currentTicket;
                if (FormsAuthentication.SlidingExpiration)
                {
                    FormsIdentity id = (FormsIdentity)Context.User.Identity;
                    newTicket = FormsAuthentication.RenewTicketIfOld(id.Ticket);
                }

                if (currentTicket != newTicket)
                {
                    cookie.Value = FormsAuthentication.Encrypt(newTicket);
                    cookie.Expires = newTicket.Expiration;
                    cookie.Domain = WebGlobal.GetCurrentContextDomain();

                    Response.Cookies.Set(cookie);
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T12:44:21.840

使用您提供的信息，您还可以选择动态修改 Application_Start 中的配置，以便为域属性设置正确的值（如果尚未设置）：

看 ：

[http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Configuration.ConfigurationManager%29;k%28TargetFrameworkMoniker-.NETFramework](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Configuration.ConfigurationManager%29;k%28TargetFrameworkMoniker-.NETFramework)

希望这会有所帮助

* * *

我想可以在表单元素的超时属性描述中找到一个提示：

[http://msdn.microsoft.com/en-us/library/1d3t3c61%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/1d3t3c61%28v=vs.80%29.aspx)

> 为防止性能受损，并为已打开 cookie 警告的用户避免多个浏览器警告，cookie 会在指定时间过半时更新。这可能会导致精度损失。默认值为“30”（30 分钟）。

在 system.mydomain.com 上是否也设置为 2880 分钟？还是默认的 30 分钟值？如果是这样，您应该会在 15 分钟后看到 cookie 发生变化。

* * *

如果您`web.config`这样设置，问题是否仍然存在？

```
<authentication mode="Forms" >
  <forms timeout="2880" name=".COMMONAUTH" domain=".mydomain.com" />      
</authentication> 
```

# mobile - 将 OpenLayers 应用程序移植到移动设备

> ID：14770992
> 
> 赞同：0
> 
> 时间：2013-02-08T10:56:01.977
> 
> 标签：mobile, openlayers

在进行持续时间/成本估算后，我将开始使用 OpenLayers 开发桌面应用程序。我以前从未有过这方面的经验，但得到了一些有经验的同事的支持。

现在我们必须估计在移动设备上查看相同的应用程序所花费的时间和精力。我知道 的存在`openlayers.mobile.js`，但我公司以前没有人使用过它。

*我知道它比普通*的 OpenLayers 库有一些优势，比如缩放缩放等等。但是，它有任何被阻止的功能吗？我的意思是，如果我编写代码在桌面应用程序的图层上绘制一条线，更改图层的符号，在折线周围添加缓冲区等等。它仍然可以与移动库一起使用吗？

桌面版有没有手机版的功能？

在估计我可以在移动版本中提供什么之前，我需要知道，要做到这一点有多难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:52:55.403

查看带有移动标签的示例：

*   [http://dev.openlayers.org/examples/](http://dev.openlayers.org/examples/)

下[一个 OpenLayer 版本](http://openlayers.org/en/v3.0.0/examples/)可能会有更好的移动支持，因为这是许多用户感兴趣的东西。

# drupal - 将站点移动到新主机后清除 URL 损坏

> ID：14770996
> 
> 赞同：0
> 
> 时间：2013-02-08T10:56:16.807
> 
> 标签：drupal, drupal-6

我已将现有的 drupal 6 站点复制到新主机。我认为这是一项简单的任务。只需更改 mysql 登录凭据并运行。但显然不是。Fist 页面已启动并正在运行，但所有指向现有页面的链接都不起作用。

我在这里想念什么？我错过的另一个配置。

Drupal 6 安装是一个 NodeStream 分发。

网站链接： [http ://u0002002.fsdata.se](http://u0002002.fsdata.se)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:08:30.713

您很可能忘记设置 mod_rewrite ，所以漂亮的 url 不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:34:21.460

移动主机时发生的一个非常常见（甚至更容易修复）的问题是您忘记包含 .htaccess 文件，这也可能[导致干净的 URL 出现问题](http://www.drupaldude.com/content/clean-urls-need-htaccess-file)。

**修复：将 Drupal 附带的 .htaccess 文件的新副本上传到您的 Web 根目录。**

> 我发现有时我会错过这个文件。这是因为我通过将所有文件和文件夹拖到我的服务器上来安装 Drupal，但由于 .htaccess 文件以句点开头，OS X 将其隐藏。这意味着 .htaccess 文件从未被移过。- 来源[DrupalDude.com](http://www.drupaldude.com/content/clean-urls-need-htaccess-file)

直接从 Drupal.org，[清理 URL 不起作用？检查您的 .htaccess 文件](http://drupal.org/node/256410)

> 检查 .htaccess 文件是否实际上传。它应该在您上传 Drupal 的目录中（例如：/public_html/drupal/）
> 
> 如果 .htaccess 文件丢失，您需要上传它。如果您不小心删除了这个文件，只需重新下载 Drupal，然后复制新的 .htaccess 文件。
> 
> 确保该文件仅称为 .htaccess 而不是 htaccess.txt 或其他任何名称。.period .at .the .beginning 是必需的。此名称通常意味着该文件将在基于 Unix 的系统上的文件夹列表中不可见，因此您可能不会总是看到它。如果使用 FTP 客户端，您可能必须将其配置为“显示隐藏文件”。如果在命令行上列出，您必须 ls -la 才能看到它。这在某种程度上取决于您的操作系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T15:40:52.143

几乎可以肯定 mod_rewrite 没有打开你可以访问这样的页面

[http://u0002002.fsdata.se/?q=yrke-karriar](http://u0002002.fsdata.se/?q=yrke-karriar)

快速解决：

1.  关闭干净的网址（不知道 Drupal 6 中的确切网址）
2.  刷新所有缓存

这将解决，直到您可以打开 mod_rewrite 或工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T11:02:46.510

这里有两个教程可以帮助你：

1.  [如何将 Drupal 站点从一台主机移动到另一台主机](http://support.hostgator.com/articles/hosting-guide/publish-your-site/how-to-move-a-drupal-site-from-one-host-to-another)
2.  [如何在不发疯的情况下将 Drupal 站点移动到新主机](http://www.juliakm.com/how-move-drupal-site-new-host-without-going-crazy)

# javascript - JavaScript 中正则表达式的奇怪行为

> ID：14770997
> 
> 赞同：1
> 
> 时间：2013-02-08T10:56:21.980
> 
> 标签：javascript, regex

我编写了一个简单的 JavaScript 函数来将文件名拆分为多个部分：给定一个类型为“image01.png”的文件名，它将其拆分为“image”、“01”、“png”。

为此，我使用以下正则表达式：

```
var reg = /(\D+)(\d+).(\S+)$/; 
```

这行得通。

但是，我也希望能够将这样的内容：day12Image01.png 拆分为“day12Image”、“01”、“png”。一般来说，我希望有任意数量的附加数字与正文相关联，只要它们不在扩展之前。

我试过：

```
var reg = /(.+)(\d+).(\S+)$/; 
```

或替代方案：

```
var reg = /(\S+)(\d+).(\S+)$/; 
```

令人困惑的是（对我来说），如果我将这些正则表达式应用于“image01.png”，我会得到以下分解：“image0”、“1”、“png”。

为什么在这些情况下将“0”分配给正文而不是数字索引？

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T11:01:05.700

尝试使用非贪心正则表达式 /(\S+?)(\d+).(\S+)$/。据我所知，这应该适用于 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T10:59:23.457

这是一个可以正常工作的可能的正则表达式：

```
/^(.+?)(\d+)\.(\S+)$/ 
```

请注意，您应该转义一个点`.`字符，否则正则表达式会将其视为[“任何字符”](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#special-dot)（所谓的***“特殊点”***）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T11:01:46.837

默认情况下，捕获组是贪婪的，他们会尽可能多地捕获，并且由于`+`意味着一个或多个，它可以只匹配最后一个数字并将第一个留给`.`or `\S`。使他们不贪婪`?`：

```
var reg = /(.+?)(\d+).(\S+)$/; 
```

或者

```
var reg = /(\S+?)(\d+).(\S+)$/; 
```