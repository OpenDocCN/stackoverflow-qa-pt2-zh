# StackOverflow 问答 13730000-13730999

# c++ - 简单 SQL 代码上的分段错误（核心转储）

> ID：13730000
> 
> 赞同：0
> 
> 时间：2012-12-05T18:31:05.883
> 
> 标签：c++, mysql, ubuntu

我在一些简单的 C++ 代码上收到“分段错误（核心转储）”错误。当我使用变量结果时，错误会发生。在这种情况下，什么会导致这个问题？我知道有些东西超出了范围，但结果怎么可能呢？数据库中只有 2 个项目。

```
#include <iostream>
#include <boost/variant.hpp>
#include <mysql/mysql.h>
#include <mysql_connection.h>

using namespace std;

const char *server = "localhost";
const char *user = "XXXX";
const char *password = "XXXX";
const char *database = "XXXX";

int main()
{
    MYSQL *conn;
    MYSQL_RES *result;
    MYSQL_ROW row;

    int num_fields = 0;

    conn = mysql_init(NULL);
    mysql_real_connect(conn, server,user, password, database, 0, NULL, 0);

    mysql_query(conn, "SELECT * FROM `users` WHERE `id` = '5'");
    result = mysql_store_result(conn);

    num_fields = mysql_num_fields(result);

    while ((row = mysql_fetch_row(result)))
    {
       cout << "Spam ";
    }

    mysql_free_result(result);
    mysql_close(conn);
} 
```

错误：

```
Segmentation fault (core dumped)

Process returned 139 (0x8B)   execution time : 0.255 s
Press ENTER to continue. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T11:10:19.437

解决方案是创建一个符号链接，以便 mysql 可以找到 mysql.sock：

```
sudo ln -s /var/run/mysqld/mysqld.sock /tmp/mysql.sock 
```

# android - How to set android TabHost default view to be the second(or third) tab instead of the first tab to be the default view?

> ID：13730005
> 
> 赞同：0
> 
> 时间：2012-12-05T18:31:17.913
> 
> 标签：android, tabs, fragment

How to change the default TabHost view to show the FrameLayout corresponding to the second or third tab to be the default view, as opposed to always being the first tab's corresponding Framelayout to be the default view? I want to do this as I do not change the ordering of the tab but only wanting to show default to be other than the first tab?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T19:18:38.080

默认情况下在你的代码中使用这一行它设置为“0”。- tabHost.setCurrentTab( **1** );

# java - 创建一个随机向定义的端点移动的 Java Point 数组

> ID：13730007
> 
> 赞同：4
> 
> 时间：2012-12-05T18:31:21.727
> 
> 标签：java, arrays, random, point

我向自己发出了一种挑战，并认为我可以站起来寻求帮助以解决这个问题。我想使用 java Graphics 绘制看起来像闪电击中给定点的东西。

现在我只有这个，它向随机方向发射廉价的“闪电”，我不在乎它最终会在哪里结束。

```
lightning[0] = new Point(370,130); //This is a given start point.

// Start in a random direction, each line segment has a length of 25
double theta = rand.nextDouble()*2*Math.PI;
int X = (int)(25*Math.cos(theta));
int Y = (int)(25*Math.sin(theta));

//Populate the array with more points
for (int i = 1 ; i < lightning.length ; i++)
{
  lightning[i] = new Point(X + lightning[i-1].x, Y + lightning[i-1].y);

  boolean plusminus = rand.nextBoolean();
  if (plusminus) theta = theta + rand.nextDouble()*(Math.PI/2);
  else theta = theta - rand.nextDouble()*(Math.PI/2);

  X = (int)(25*Math.cos(theta));
  Y = (int)(25*Math.sin(theta));
}

// Draw lines connecting each point
canvas.setColor(Color.WHITE);
for (int i = 1 ; i < lightning.length ; i++)
{
  int Xbegin = lightning[i-1].x;
  int Xend = lightning[i].x;
  int Ybegin = lightning[i-1].y;
  int Yend = lightning[i].y;

  canvas.drawLine(Xbegin, Ybegin, Xend, Yend);

  //if (Xend != Xbegin) theta = Math.atan((Yend - Ybegin)/(Xend - Xbegin));

  // Restrict the angle to 90 degrees in either direction
  boolean plusminus = rand.nextBoolean();
  if (plusminus) theta = theta + rand.nextDouble()*(Math.PI/2);
  else theta = theta - rand.nextDouble()*(Math.PI/2);

  // 50/50 chance of creating a half-length off-shoot branch on the end
  if (rand.nextBoolean())
  {
    int Xoff = (int)(Xend+(12*Math.cos(theta)));
    int Yoff = (int)(Yend+(12*Math.sin(theta)));

    canvas.drawLine(Xend, Yend, Xoff, Yoff);
  }
} 
```

我试图想出一些类似的方法来创建这种效果，但是预先定义了数组中的最后一个点，这样闪电就可以“击中”一个特定的点。换句话说，我想以一种随机的方式填充 Point 数组，但仍会收敛到一个最终点。

有人愿意称重吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:58:02.960

我认为这是相当简单、准确和优雅的方法。它使用分而治之的策略。仅从 2 个值开始：

*   起点
*   终点

计算中点。将该中点偏移一些值`variance`（可以相对于长度计算）。理想情况下，偏移量应该垂直于连接起点和终点的矢量，但是只要你的螺栓大部分垂直移动，就像真正的闪电一样，你可以通过使偏移量水平来降低成本。对 (start, offset_mid) 和 (offset_mid, end) 重复上述过程，但这次使用较小的数字`variance`. 这是一种递归方法，可以在达到阈值方差或阈值线段长度时终止。随着递归展开，您可以绘制所有连接器段。这个想法是最大的方差发生在螺栓的中心（当开始到结束的距离最长时），并且随着每次递归调用，点之间的距离会缩小，方差也会缩小。这样，闪电的全局方差将远大于任何局部方差（就像真正的闪电一样）。

这是使用该算法从相同的预定点生成的 3 个不同螺栓的图像。这些点恰好是 (250,100) 和 (500,800)。如果您想要沿任何方向移动的螺栓（不仅仅是“大部分垂直”），那么您需要向点移动代码添加更多复杂性，根据螺栓的移动角度移动 X 和 Y。

![闪电](../Images/f7b82444ac4e85b07e764f0432d738d4.png)

这里有一些用于这种方法的 Java 代码。我使用了一个，`ArrayList`因为分而治之的方法并不提前知道最终会有多少元素。

```
// play with these values to fine-tune the appearance of your bolt
private static final double VAR_FACTOR = 0.40;
private static final double VAR_DECREASE = 0.55;
private static final int MIN_LENGTH = 50;

public static ArrayList<Point> buildBolt(Point start, Point end) {
    ArrayList<Point> bolt = new ArrayList<Point>();
    double dx = start.getX() - end.getX();
    double dy = start.getY() - end.getY();
    double length = Math.sqrt(dx*dx + dy*dy);
    double variance = length * VAR_FACTOR;
    bolt.add(start);
    buildBolt(start, end, bolt, variance);
    return bolt;
}

private static void buildBolt(Point start, Point end,
                              List<Point> bolt, double variance) {
    double dx = start.getX() - end.getX();
    double dy = start.getY() - end.getY();
    double length = Math.sqrt(dx*dx + dy*dy);
    if (length > MIN_LENGTH) {        
        int varX = (int) ((Math.random() * variance * 2) - variance);
        int midX = (start.x + end.x)/2 + varX;
        int midY = (start.y + end.y)/2;
        Point mid = new Point(midX, midY);
        buildBolt(start, mid, bolt, variance * VAR_DECREASE);
        buildBolt(mid, end, bolt, variance * VAR_DECREASE);
    } else {
        bolt.add(end);
    }
    return;      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:52:02.740

没有任何图形经验，我有这样的建议：很难选择一个特定的点，然后尝试以“随机”的方式到达它。相反，我建议创建一条从起点到终点的直线，然后随机弯曲其中的一部分。您可以进行多次通过，将越来越小的段弯曲到一定的极限以获得所需的外观。同样，我在没有任何图形 API 知识的情况下这么说。

# c++ - 从 for 循环到另一个循环的变量

> ID：13730008
> 
> 赞同：1
> 
> 时间：2012-12-05T18:31:21.327
> 
> 标签：c++, variables, for-loop, while-loop

我的 uni 项目有这个 c++ 代码...

```
for (int a=0; a<definedgroups; a++)
{
    cout << "Enter Lower number for group " << a << ": "; 
    cin >> User_Groups [a] [0] ;

} 
```

现在我想声明另一个显示数字的循环

我可以使用第一个变量中的 A 并说...

```
while (a>0)
{
displays code, have written yet
} 
```

还是仅在第一个 for 循环中识别出“a”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:35:09.253

是的，变量的范围`a`仅限于`for`循环体。如果您想重用该变量/稍后使用它，您可以在`for`循环之前声明它：

```
int a=0;
for (; a<definedgroups; a++)
{
  cout << "Enter Lower number for group " << a << ": "; 
  cin >> User_Groups [a] [0] ;
}
while(a > 0)
{
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:36:40.410

是在第一个循环的`a`范围内声明的，所以是的，它只在那里可用。要重用它，您可以在外部声明它：

```
int a;
for (a=0; a<definedgroups; a++)
{
    cout << "Enter Lower number for group " << a << ": "; 
    cin >> User_Groups [a] [0] ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:37:23.873

该变量只能在嵌套循环中使用。

如果你想要 2 个不同的循环使用相同的 var，你应该在它们之前声明它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:37:25.290

“a”仅在第一个 for 循环的范围内。

做你想做的事：

```
int a;
for(a = 0 ; ...)
{
  ...
}

while(a > 0) ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T18:38:35.457

变量`a`范围仅与`for loop`.

如果要在 中访问`a`，则`while loop`需要将其分配给两个循环之外的全局变量。

假设您要访问 的每个不同值`a`，那么您需要将其存储在一个数组中，这实际上没有任何意义，因为您可以创建 的递增顺序`ints`。

但是，如果那是您想要做的，那么这就是我要做的，因为 piokuc 已经回答了。

```
int [] global_a;
for (int a=0; a<definedgroups; a++)
{
  cout << "Enter Lower number for group " << a << ": "; 
  cin >> User_Groups [a] [0] ;
  gloabl_a[a] = a;
}

for (int i=0; i<global_a.size; i++){
   while(a > 0)
   {
   ...
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T18:45:01.663

当`for`循环结束时，除非你提前爆发，否则`a`==`definedgroups`为真。

所以使用“相同的变量”没有什么意义。您可以创建一个新变量并将其启动为等于`definedgroups`，并且每个编译器在被告知进行优化时都会将一个变量用于另一个变量。

事实上，重用变量会将不必要的状态从代码的一部分转移到另一部分，您应该避免这种情况。使用一个新变量，它不会花费你任何东西（除非你离开并把指针指向你的循环索引或类似的东西）

您的实际问题很可能比您演示的玩具更复杂。您可能想要发布一个自包含、简单、完整的代码示例来演示您想要做什么。

# openerp - How to create a many2one field in OpenERP 7

> ID：13730011
> 
> 赞同：1
> 
> 时间：2012-12-05T18:31:30.587
> 
> 标签：openerp

There are no docs for OpenERP 7 for this: I am trying to create a field with many2one relation from the webclient. I did the following:

1st step created a model and assigned some fields to it 2nd I created a field and mapped the model from the field and when I append that field in view I have been getting this error

```
 Client Traceback (most recent call last):
  File "/opt/openerp/web/addons/web/http.py", line 195, in dispatch
    response["result"] = method(self, **self.params)
  File "/opt/openerp/web/addons/web/controllers/main.py", line 1085, in call_kw
    return self._call_kw(req, model, method, args, kwargs)
  File "/opt/openerp/web/addons/web/controllers/main.py", line 1077, in _call_kw
    return getattr(req.session.model(model), method)(*args, **kwargs)
  File "/opt/openerp/web/addons/web/session.py", line 40, in proxy
    result = self.proxy.execute_kw(self.session._db, self.session._uid, self.session._password, self.model, method, args, kw)
  File "/opt/openerp/web/addons/web/session.py", line 28, in proxy_method
    result = self.session.send(self.service_name, method, *args)
  File "/opt/openerp/web/addons/web/session.py", line 101, in send
    raise xmlrpclib.Fault(openerp.tools.exception_to_unicode(e), formatted_info)

Server Traceback (most recent call last):
  File "/opt/openerp/web/addons/web/session.py", line 87, in send
    return openerp.netsvc.dispatch_rpc(service_name, method, args)
  File "/opt/openerp/server/openerp/netsvc.py", line 361, in dispatch_rpc
    result = ExportService.getService(service_name).dispatch(method, params)
  File "/opt/openerp/server/openerp/service/web_services.py", line 601, in dispatch
    res = fn(db, uid, *params)
  File "/opt/openerp/server/openerp/osv/osv.py", line 167, in execute_kw
    return self.execute(db, uid, obj, method, *args, **kw or {})
  File "/opt/openerp/server/openerp/osv/osv.py", line 121, in wrapper
    return f(self, dbname, *args, **kwargs)
  File "/opt/openerp/server/openerp/osv/osv.py", line 176, in execute
    res = self.execute_cr(cr, uid, obj, method, *args, **kw)
  File "/opt/openerp/server/openerp/osv/osv.py", line 164, in execute_cr
    return getattr(object, method)(cr, uid, *args, **kw)
  File "/opt/openerp/server/openerp/osv/orm.py", line 2389, in name_search
    return self._name_search(cr, user, name, args, operator, context, limit)
  File "/opt/openerp/server/openerp/osv/orm.py", line 2420, in _name_search
    ids = self._search(cr, user, args, limit=limit, context=context, access_rights_uid=access_rights_uid)
  File "/opt/openerp/server/openerp/osv/orm.py", line 4773, in _search
    query = self._where_calc(cr, user, args, context=context)
  File "/opt/openerp/server/openerp/osv/orm.py", line 4622, in _where_calc
    e = expression.expression(cr, user, domain, self, context)
  File "/opt/openerp/server/openerp/osv/expression.py", line 371, in __init__
    self.parse(cr, uid, distribute_not(normalize(exp)), table, context)
  File "/opt/openerp/server/openerp/osv/expression.py", line 468, in parse
    raise ValueError("Invalid field %r in domain expression %r" % (left, exp))
ValueError: Invalid field 'x_totalexp' in domain expression ['&', '&', ('x_totalexp', '=', 0), ['id', 'not in', []], ('name', 'ilike', 's')] 
```

Is this a bug or i am doing it wrong

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:24:35.567

它现在工作。我也遇到了同样的问题，但是在“bzr pull”之后，问题就解决了。

只需更新您的 7.0 插件、网络和服务器。

# java - Android ksoap web service issue getting pullParserExcepstion

> ID：13730020
> 
> 赞同：2
> 
> 时间：2012-12-05T18:31:58.237
> 
> 标签：java, android, soap, wsdl, ksoap

I am consuming a .net web service using ksoap2 but getting the following Exception:

> org.xmlpull.v1.XmlPullParserException: unexpected type (position:END_DOCUMENT null@1:1 in java.io.InputStreamReader@412caa08)`

My request dump is the same as I needed but I'm not getting response dump and it has come as null. I am trying, but getting the same error.Please some one help me. My code is given below-

```
public class Login extends Activity {

private final String NAMESPACE = "http://xyz.public/imageupload/1.0/";
private final String URL = "http://public.service.xyz.com/ImageUpload.svc";
private final String SOAP_ACTION = "http://xyz.public/imageupload/1.0/Services/Authentication";
private final String METHOD_NAME = "Authentication";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    if (android.os.Build.VERSION.SDK_INT > 9) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }

    SoapSerializationEnvelope envelope = null;
    SoapObject request = null;
    HttpTransportSE httpTransportSE = null;
    try {
        request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("userId", "admin");
        request.addProperty("password", "password");

        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
        envelope.dotNet = true;
        envelope.encodingStyle = SoapSerializationEnvelope.ENC;

        /**
         * below code for custom header
         */
        Element actionElement = new Element().createElement(null,
                "d:Action");
        actionElement.setAttribute("", "s:mustUnderstand", "1");
        actionElement.addChild(Node.TEXT, SOAP_ACTION);

        Element toElement = new Element().createElement(null, "d:To");
        toElement.setAttribute("", "s:mustUnderstand", "1");
        toElement.addChild(Node.TEXT, URL);

        Element[] header = { actionElement,toElement };
        envelope.headerOut = header;
        envelope.env = "http://schemas.xmlsoap.org/soap/envelope/";
        /**
         * Custom header part end
         */
        envelope.setOutputSoapObject(request);

        httpTransportSE = new HttpTransportSE(URL); 
        httpTransportSE.debug = true;
        httpTransportSE.call(SOAP_ACTION, envelope);
        SoapObject result = (SoapObject) envelope.getResponse();
        // To get the data.
        String textResult = result.toString();
        Log.i("textResult", textResult);

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
        Log.e("Exception:", e.toString());

    }

    finally {
        Log.i(getClass().getSimpleName(), "requestDump : "+ httpTransportSE.requestDump);
        Log.i(getClass().getSimpleName(), "responseDump : "+ httpTransportSE.responseDump);
    }

  }
} 
```

# php - Selecting a row based on multiple column values?

> ID：13730022
> 
> 赞同：0
> 
> 时间：2012-12-05T18:32:07.353
> 
> 标签：php, sql, linden-scripting-language

I'm working on a little system for SecondLife which involves a bit of heavy use of databases & I've run into a problem I can't for the life of me solve.

I'm trying to run a query that selects an entire row based on two different column values. I'm using the $_GET[''] call to identify which details I need, and then I need to pull all the data from the entire row and echo it onto a blank page.

Now, I got it to work at first, but it was pulling ALL the rows created by a UUID and echoing them, when I only needed a specific. Then I tried to get it to work with a second identifier (which is a column called 'field' for the purpose of testing), and that's pretty much where I lost it.

I just need to select one row that has two exact values, and I need it to be draconian so it only selects a row that has both and not just one of the two.

Any ideas?

Script enclosed (don't mind the mess or the commented out code which I kept for reference; I am going to clean the script once I get it working!)

```
 <?php

// Get key from the parameter.
$avatar_key = $_GET['key'];

// Quest params.
$questname = $_GET['questname'];
$questid = $_GET['id'];

// Connect to the database. $con holds connection info.

$con = mysql_connect("localhost","user","pass");

// Error checking.
if(!$con)
{
    die('Could not connect: '.mysql_error());
}

// Select the DB we want.
mysql_select_db("yyyyy_slcom",$con);

// Build the query.
$query = "SELECT * FROM sldb_data WHERE sldb_data.uuid = '$avatar_key' AND sldb_data.field = '$questname'";
/*$query = "select * from (
                            select uuid, field, value, progress, ROW_NUMBER() OVER (PARTITION BY uuid ORDER BY progress DESC)
            ";*/

// Run the query, store the result in variable $result.
$result = mysql_query($query);

if(!result)
{
die('Error: ' . mysql_error());
}

// Check how many rows we got back with our query.
$rows_returned = mysql_num_rows($result);

echo $row['field'];

// If we get anything back,
if($rows_returned > 0)
{

    //echo $row['field'] . ' was found.' . $questname;
    /*if(!$row['field'])
    {
        echo 'You are not on this quest yet.';
    }
    elseif(($row['field']) && ($row['value'] == "notstarted"))
    {
        echo 'This quest hasn\'t started yet.';
    }
    elseif(($row['field']) && ($row['value'] == "started"))
    {
        echo 'You are on quest: "' .$row['field']. '"';
    }*/

    /* $fields = mysql_list_fields("tenaar_slcom","sldb_data");
    $columns = mysql_num_fields($fields);
    for ($i = 0; $i < $columns; $i++) {$field_array[] = mysql_field_name($fields, $i);}

    if(in_array($quest, $field_array))
    {
        echo 'Your quest is ' . $row['field'];
    }
    elseif(!in_array($questname, $field_array))
    {
        echo 'You are not on this quest yet.';
    }
    elseif((in_array($questname, $field_array)) && ($row['value'] == "notstarted"))
    {
        echo 'You have not started quest "' .$row['field']. '" yet.';
    } */    

    // cycle through and print what we got.
    //while($row = mysql_fetch_array($result))
    //{

        //echo 'Quest name: ' . $row['field'] . ' | Progress: ' .$row['value'] . '<br />';

    //}
}
/*else
{
echo 'You are not on this quest yet.';
}*/

// Close the connection.
mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:39:40.203

在获取行数和打印字段之间，您似乎缺少一步。您需要将查询结果实际存储在 $row 数组中。

```
$rows_returned = mysql_num_rows($result);
$row = mysql_fetch_array($result);
echo $row['field']; 
```

# c - c语言打开隐藏文件

> ID：13730023
> 
> 赞同：1
> 
> 时间：2012-12-05T18:32:07.913
> 
> 标签：c, linux, fopen

我正在使用ubuntu linux，我只是一个初学者是c语言我创建了一个程序，当在文件夹内启动时创建一个锁定文件，但文件和文件夹都带有[DOT]，如.folder和.file和linux隐藏这样文件和文件夹，我有另一个程序检查文件是否存在

```
FILE* lockfile = fopen("/.folder/.lock", "r");
if (!lockfile) {
    printf("Cannot find lock file");
} else {
    printf("lock file found");
} 
```

该文件夹位于根目录中，我只想读取该文件，所以我给了“r”作为访问权限? 如何通过c读取linux中的隐藏文件和文件夹？

编辑：添加图像以使事情更清晰

[![文件夹](../Images/7937f868d0f736f5bf3d69bd056f6537.png)](https://i.stack.imgur.com/6wqkc.png)

`.folder`它拥有当前用户所有权限的目录

[![文件](../Images/06df6223b66abe6da0e6b533eccb2759.png)](https://i.stack.imgur.com/ogRO5.png) 该`.lock`文件还具有当前用户的读取权限，所以我认为权限没有问题或者我仍然错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:37:56.583

```
i just wanna read the file so i gave "r" as the access 
```

这就是问题所在。如果您对某个文件夹*只有*读取 ( `r`) 访问权限，则只能列出 ( `ls`) 其内容，而不能读取或写入该文件夹内的任何文件。这就是`fopen`失败的原因。

`x`如果您想读取其中的文件，您还应该授予该目录的 execute( ) 权限。因此该目录将同时具有读取和执行权限（`r`和`x`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:37:17.250

*nix 中没有“隐藏”文件之类的东西。前导点是一种约定，后面是禁止显示它们的工具，但它们与系统中任何其他相同类型的文件系统对象没有区别。

# jquery - highchart 库的正文点击问题

> ID：13730027
> 
> 赞同：5
> 
> 时间：2012-12-05T18:32:22.953
> 
> 标签：jquery, highcharts

我创建了一个弹出窗口，当我点击正文时它会隐藏。但在 hightchart 中，身体点击不起作用。

Hightchart 库： [http ://code.highcharts.com/highcharts.js](http://code.highcharts.com/highcharts.js)

我的 jQuery 代码是：

```
$(function () {
    var chart;
    $(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        },
        tooltip: {
            formatter: function() {
                    return '<b>'+ this.series.name +'</b><br/>'+
                    this.x +': '+ this.y +'°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
        }, {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }, {
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
        }]
    });
    });

    $("body").click(function(){
      $(".popupBox").hide();  
    });
    $(".popup").click(function(e){
    e.stopPropagation();
     $(".popupBox").toggle();      
    });
});​ 
```

[演示](http://jsfiddle.net/Divya_Moyal/3jLtE/1/)

提前感谢您的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T20:40:33.957

您不能调用“容器”div 的单击事件，因为“容器”div 的所有子元素都阻止了单击事件在 DOM 树中冒泡。

所以你必须调用 mousedown 事件而不是单击。

```
$(function() {
    var chart;
    $(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25
        },
        title: {
            text: 'Monthly Average Temperature',
            x: -20 //center
        },
        subtitle: {
            text: 'Source: WorldClimate.com',
            x: -20
        },
        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },
        yAxis: {
            title: {
                text: 'Temperature (°C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'}]
        },
        tooltip: {
            formatter: function() {
                return '<b>' + this.series.name + '</b><br/>' + this.x + ': ' + this.y + '°C';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Tokyo',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]},
        {
            name: 'New York',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]},
        {
            name: 'Berlin',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]},
        {
            name: 'London',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]}]
    });
    });
    $("html").click(function() {
       $(".popupBox").hide();
    });
    $(".popup").click(function(e) {
       e.stopPropagation();
       $(".popupBox").toggle();
    });
    $("#container").mousedown(function(e) {
       $(".popupBox").hide();
    });
});​ 
```

[演示](http://jsfiddle.net/yoku2010/8R7Kx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:32:41.083

您可以[`mousedown`](http://api.jquery.com/mousedown/)在图表容器的情况下处理此问题

```
$("#container").mousedown(function(){
      $(".popupBox").hide();      
}); 
```

这将在任何鼠标按钮上触发，您可以使用`which`传递给处理程序的 eventObject 的属性根据需要检查按钮和句柄

```
$("#container").mousedown(function(e){
      if(e.which==1){ // Only on left click
         $(".popupBox").hide();      
      }
}); 
```

**[处理图表容器点击事件 | Highchart 和 Highstock](http://jsfiddle.net/jugal/qXSf5)**
**[更新演示](http://jsfiddle.net/jugal/qXSf5/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:40:18.340

它与脚本引用无关。它关于图表点击事件。我在图表中添加了点击事件，它可以工作。

```
 chart: {
            renderTo: 'container',
            type: 'line',
            marginRight: 130,
            marginBottom: 25,

            renderTo: 'container',
            events: {
                click: function(event) {
                    $(".popupBox").hide();
                }

            },
        }, 
```

[http://jsfiddle.net/3jLtE/18/](http://jsfiddle.net/3jLtE/18/)

# actionscript-3 - spark SWFLoader 将加载的文件存储在哪里？

> ID：13730033
> 
> 赞同：1
> 
> 时间：2012-12-05T18:32:39.237
> 
> 标签：actionscript-3, apache-flex, air, flex4.6

我正在构建两个 AIR 应用程序——桌面和移动。

使用 spark SWFLoader 加载**远程**SWF 文件时，桌面应用程序在第二次加载时似乎会缓存文件（进度瞬间跳转到 100%）。相反，移动应用程序将经历相同的加载时间，即使该文件之前已加载。

所以，我的问题是：

1.  加载的文件存储在桌面应用程序的什么位置？
2.  如果有缓存，我们可以为移动应用做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:50:12.763

您所要做的就是将主应用程序文件中的 sessionCachingEnabled 属性设置为 true。这是一个简洁的功能，允许您支持（毫不费力）这样的场景：用户导航到应用程序的第 n 个屏幕，他在该屏幕上有一些数据并且应用程序被关闭（也许用户去了一个新的应用程序或决定关闭应用程序）；当他再次打开应用程序时，他将看到与上一次会话相同的屏幕。

```
 <s:MobileApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
          xmlns:s="library://ns.adobe.com/flex/spark"
         firstView="views.ASimpleMobileAppHome"
         sessionCachingEnabled="true"
          splashScreenImage="@Embed(source='loading.png')">
          ...
     </s:MobileApplication> 
```

# javascript - 每次访问显示一次 Div

> ID：13730042
> 
> 赞同：3
> 
> 时间：2012-12-05T18:33:15.087
> 
> 标签：javascript, jquery, cookies

在我的网站上，我有一个只显示在主页上的滑块。我的主页看起来像这样：

```
<body>
  <div class="wrapper">
     <div class="header"></div>
     <div class="slider"></div>
   <div class="maincontent"></div>
 </div>
</body> 
```

我的页面是相同的布局，除了我只希望 Slider div 显示在第一页上。所以当用户第一次到达网站时，他们可以看到滑块，但如果他们转到不同的页面，滑块就消失了。

我想知道是否有办法做到这一点，jquery？饼干？如果有人有任何建议，请告诉我我将如何做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:56:07.323

是的，有办法做到这一点。事实上，有多种方式。您既可以使用 Javascript 也可以使用 PHP 等服务器端脚本语言来实现。我建议使用服务器端脚本语言，因为如果页面不使用，那么添加元素是没有意义的，而它确实会占用少量带宽。无论如何，使用这两种方法的示例如下：

使用 PHP：

```
<body>
<div class="wrapper">
<div class="header"></div>
<?php

if (!isset($_COOKIE['visisted'])) {
    setcookie('visited', true, time() + 3600 * 24); // Save a cookie for 1 day
    echo '<div class="slider"></div>';
}

?>
<div class="maincontent"></div>
</div>
</body> 
```

并使用 Javascript：

```
<head>
<style type="text/css">
div#slider {
    /* Hide the div */
    display: none;
}
</style>
</head>

<body>
<div class="wrapper">
<div class="header"></div>
<div class="slider"></div>
<div class="maincontent"></div>
</div>

<script type="text/javascript">
var cookie = document.cookie;
if (cookie.indexOf('visited=', 0) == -1) {
    var expiration = new Date();
    expiration.setDate(expiration.getDate()+1);
    document.cookie = 'visited=1;expires=' + expiration + ';path=/';

    var element = document.getElementById('slider');
    element.style.display = 'block';
}
</script>
</body> 
```

顺便说一句，我认为这不是您的整个 HTML 页面？因为显然你应该添加一个文档类型、标签等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:37:42.170

当然，您可以使用：

1.  可以从js访问的cookies
2.  HTML5 WebStorage，这也是一个很棒的地方，但只适用于新的浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:38:09.410

如果您没有绑定到浏览器，我建议您使用 HTML5 LocalStorage 变量。

[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

但是，如果您应该独立于浏览器（支持 IE6 等），我会使用 cookie 或访问 IP 的数据库。

# java - 为什么从 java 进程中调用的 NSS PK12UTIL 会报告错误的数据库？

> ID：13730049
> 
> 赞同：0
> 
> 时间：2012-12-05T18:33:35.713
> 
> 标签：java, nss

我执行以下操作：

```
File tmpDir = com.google.common.io.Files.createTempDir();
tmpDir.deleteOnExit();

// determine command based upon OS
String prefix = "pk12util";
String command = String.format(
            "-i %s -d sql:%s -W '' -K ''", 
            cert.getAbsolutePath(), tmpDir.getAbsolutePath());

// run the command
CommandRunner.run(prefix, command); 
```

CommandRunner 是 java ProcessBuilder 的包装器。它处理创建进程、返回命令输出和退出状态。

这是从 java 进程运行的命令和相应的输出。

> pk12util -i a-typical-tls-cert.p12 -d sql:/tmpdirpath -W '' -K ''
> 
> pk12util：功能失败：安全库：数据库错误。

当我复制并粘贴从 java 进程运行的命令时，它成功完成。我验证了对 certdir 的权限。我什至尝试在 tmpDir 上运行 -N ，但没有产生任何分辨率。有人有什么建议吗？我试图通过 pk12util 的源代码挖掘错误，但找不到任何相关内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:21:47.057

我不确定是否有其他人会这样做，但我通过将我的 CommandRunner 从使用 ProcessBuilder 修改为使用 Runtime.getRuntime().exec(command) 解决了这个问题。我不明白为什么流程构建器与运行时#exec 相比失败了。

# c++ - 函数中定义的类

> ID：13730052
> 
> 赞同：0
> 
> 时间：2012-12-05T18:33:46.913
> 
> 标签：c++, stl

> **可能重复：**
> [将本地类与 STL 算法一起使用](https://stackoverflow.com/questions/742607/using-local-classes-with-stl-algorithms)

我正在尝试将本地定义的函数对象传递给 STL 函数，但它不起作用。世界上哪里宣称这不应该是可能的？这看起来对我很有吸引力！

这是失败的代码：

```
int main() {
  std::vector<int> v;
  struct gen { int operator()(){return 4;} };
  std::cout<<gen()()<<std::endl; // works
  std::generate_n(std::back_inserter(v),4,gen()); // fails
} 
```

顺便说一句，以下确实有效，不是因为 gen_s 是一个结构，而是因为 gen_s::gen 是一个静态函数。这不是很酷，因为无状态生成器有什么用？

```
std:vector<int> v;
struct gen_s { static int gen() { return 4; };
std::generate_n(std::back_inserter(v),5,gen_s::gen); 
```

那么，本地定义的函数对象呢？

# actionscript-3 - Flash CS6中的隐藏代码

> ID：13730053
> 
> 赞同：1
> 
> 时间：2012-12-05T18:33:46.740
> 
> 标签：actionscript-3, flash

我之前从教程中下载了一些代码，我需要查看它，以便我可以看到哪里出错了，但我正在努力解决它。理论上，它应该有相当多的代码，至少 100 行左右，但是当我打开它时，我得到：

```
import TBG07a; 
var mygame:TBG07a = new TBG07a(this); 
```

我不确定为什么。我检查了 Actionscript (3.0) 属性，没有隐藏任何东西，我检查了我能想到的所有内容，但它是 1 帧、1 个场景、1 层……我想不出其余代码会出现在哪里。它当然是一个 .fla 文件，当我运行它时它完全可以工作。

我很可能在这里错过了一些愚蠢的东西，但我不确定，有人可以帮忙吗？

塔。约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:36:25.790

约翰，检查 *.fla 文件所在的目录，该文件夹中是否有任何 .as 文件？如果没有找到文件，则检查 fla 的 Library 面板，是否有任何影片剪辑填充了“AS Linkage”属性（如果是，请尝试编辑这些影片剪辑）。您也可以查看“文件”->“ActionScript 设置”->“源路径”列表（默认情况下它只包含一个“.”文件夹）。

# javascript - IE9 和旧版本之间的 JavaScript 行为差异

> ID：13730055
> 
> 赞同：1
> 
> 时间：2012-12-05T18:33:57.257
> 
> 标签：javascript, html, internet-explorer, internet-explorer-8, internet-explorer-9

已编辑：此问题出现在所有现代浏览器中。在 Firefox、Chrome 和 IE9 中进行测试的行为都相同。因此，如下所示的我的 JavaScript 仅适用于较旧的 IE 版本。

我有一个自制的 webhelp 系统，它在首次启动时会显示一个帮助页面。

每个帮助页面都有一个标题 div，其中包含一个在框架集上下文中显示自身的链接（我知道，我知道）。

这是生成链接的 JavaScript：

```
<script type="text/JavaScript">
    $.noConflict();
        var frameurl="frameset.html?";
        var filename=location.href.substring(location.href.lastIndexOf('/') + 1,location.href.length);
        var truncate=location.href.substring(0, location.href.length-filename.length - 1);
        var subfolder=truncate.substring(truncate.lastIndexOf('/')+1,truncate.length)+"/";
        var newurl=frameurl+filename;
        document.write('<a href="' + newurl + '"><span class="bannerlink">Contents and Search</span></a>');
        </script> 
```

本质上，它基于当前查看的页面构造一个 URL。所以生成的 URL 看起来像这样：

```
frameset.html?About_account_demographics_xaa_insight.html 
```

然后 frameset.html 包含以下脚本来解释该字符串并显示正确的页面：

```
<script type="text/javascript">
function load() {
var test=(location.href.lastIndexOf('?'));
if (test>0)  {
    var page=location.href.substring(location.href.lastIndexOf('?') + 1,location.href.length);}
else {
var page="about_help.html"; 
     }
document.getElementById("contentwin").src=page; }
</script> 
```

这在 IE 版本（包括 IE8）中按预期工作。当然，我可以通过启用兼容模式让它在 IE9 中工作。

在 IE9 中，`contentwin`框架是空白的。在所有其他浏览器中，内容会根据需要显示。

编辑：这是框架集代码：

```
 <frameset onload="load()" rows="52px,*" border=0 frameborder=0>
<frame border=0 frameborder=0 src="fis_hdr.html" name="header" scrolling="no"/>
  <frameset border=0 frameborder=0 cols="210px,*">
    <frameset border=0 frameborder=0 rows="50px,*">  
<frame border=0 frameborder=0 scrolling="no" name="searchwin" src="sub/searchbox.html"/>
 <frame marginwidth="5px" border=0 frameborder=0 name="indexwin" src="tocnav.html"/>

</frameset>
<frame border=0 frameborder=0 name="contentwin" src=""/>
 </frameset>
 </frameset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T22:13:23.373

解决方案是您引用了一个 id 并且没有具有该值的 id 。

```
document.getElementById("contentwin").src=page; }  <-- you are referencing an id
<frame border=0 frameborder=0 name="contentwin" src=""/>  <-- There is no id here! 
```

在框架中添加一个 id！

```
<frame border=0 frameborder=0 name="contentwin" id="contentwin" src=""/> 
```

# perl - 在 Perl 脚本中使用 AWK？

> ID：13730056
> 
> 赞同：0
> 
> 时间：2012-12-05T18:34:08.993
> 
> 标签：perl, awk

这就是我想要做的：

```
$variable = `grep -i "Text: Added to directory" '$FOO/result.txt' | awk '{print $6}' | tr -d "'"`
print $variable; 
```

输出：

```
Text: Added to directory /path/to/directory/
Use of uninitialized value $6 in concatenation (.) or string 
```

我怎样才能只获取“/path/to/directory”而不是“文本：添加到目录/path/to/directory/”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:54:54.037

当然 Perl 可以做 grep、awk 和 tr 可以做的事情。

```
open my $fh, "<", "$FOO/result.txt" or die "can't open file: $!\n";
while (<$fh>) {
    next unless /pattern/i;
    (my $six = (split)[5]) =~ tr/'//d;
    print $six, "\n";
}
close $fh; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:10:45.690

您可能需要调整引号转义，但这应该这样做：

```
awk IGNORECASE=1 '/yourpattern/{ gsub(/\'/, \'\'); print $6 }' $FOO/result.txt 
```

AWK 用途广泛。

# backbone.js - 骨干入门

> ID：13730057
> 
> 赞同：0
> 
> 时间：2012-12-05T18:34:10.160
> 
> 标签：backbone.js

这个问题可能是业余的，但仍然可以用手。刚从包装中取出骨干并启动了 hello world 示例，但似乎无法启动并运行。有人可以告诉我为什么我没有看到结果吗？

```
(function($){

var ListView = Backbone.View.extend({
    el: $(body), //attaches this.el to an existing element

    initialize: function(){
        _.bindAll(this, 'render'); //fixes loss of context for this within elements
        this.render(); //not all views are self-rendering. This is one.
    },

    render: function(){
        $(this.el).html("<ul><li>Hello World!</li></ul>");
    }
});
var listVew = new ListView();

})(jQuery); 
```

html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title> Hello Backbone </title>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
<script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

<script src="backbone.js" type="text/javascript"></script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:39:45.350

*   我在 jsfiddle 中尝试了您的代码并收到此错误：`Uncaught ReferenceError: body is not defined`
    *   使用字符串`'body'`作为视图的`el`选择器

这有效：http: [//jsfiddle.net/PeGW6/](http://jsfiddle.net/PeGW6/)

另请注意，您使用的是非常非常旧的骨干版本。升级到最新版本。

# sprite - http请求和文件大小

> ID：13730058
> 
> 赞同：0
> 
> 时间：2012-12-05T18:34:15.120
> 
> 标签：sprite, css-sprites

大家好，我正在寻找有关精灵的所有信息以及它们如何加速您的页面。

所以我使用 spriteMe 创建了一个 130kb 的整体 sprite 图像，它由 14 个图像组成，总大小约为 65kb

那么有一个 http 请求和一个 130kb 的文件大小或 14 个请求总共 65kb 更好吗？

还有一张详细的图片，尽管它导致它的大小增加了大约 60kb，这曾经是一个单独的 jpg 图像，只有 30kb。将它分开并承受额外的请求会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:09:39.453

这可以取决于。通过将项目组合到一个请求中可以改进 14 个请求，因为限制 http 请求是您想要到达的地方，因为这将使您的页面作为一个请求更具响应性，尽管较大的请求比 14 个较小的请求阻塞更少。

我说这取决于，因为有时将精灵拆分成相关项目组是有意义的，而不是为所有东西都拥有一个大精灵，这将取决于项目的复杂性，如果您正在处理一组简单的图像，一个精灵效果很好。

# asp.net - 为什么javascript函数在内容页面onload中不起作用？

> ID：13730060
> 
> 赞同：0
> 
> 时间：2012-12-05T18:34:37.697
> 
> 标签：asp.net, asp.net-3.5

我正在使用 ASP.NET 3.5。

我有一个内容页面，我想在这个页面的加载事件上调用一个 javascript 函数。

我尝试添加：

onload="GetLocalDate();"

在内容页面占位符标记中，但它不起作用。但是当我从任何按钮的 OnClientClick 事件中调用这个函数时，它就可以工作了。

如何使它在内容页面的加载事件上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:42:04.210

您是否尝试过从 document.ready 调用？

```
$(document).ready(function () {
    GetLocalDate();
} 
```

把里面的脚本标签放在你的页面上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:42:32.023

内容页“占位符”标签是服务器端唯一的控件。除了安排其内容等之外，它不会在客户端上生成任何代码。因此，JavaScript 加载句柄永远不会呈现。

检查您的浏览器/客户端源以验证这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T15:20:32.487

```
$(document).ready(function () {
    GetLocalDate();
} 
```

应该管用。由于它不适合您，我假设您的页面中没有对 jQuery 库的引用。

如果您出于某种原因不想在项目中包含 jQuery 库，则可以从内容页面中的服务器端代码注入它：

ClientScriptManager cs = Page.ClientScript; cs.RegisterStartupScript(...) <-- 在此处添加必要的详细信息（类型、脚本名称、文本和布尔值，以确定您是否需要它包含自己的标签）

您还应该检查以确保它在使用之前尚未注册（IsStartupScriptRegistered）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T02:05:23.003

```
<script type="text/javascript">
function pageLoad(){
    GetLocalDate();
}
</script> 
```

# javascript - 通过减少节点数量来简化 SVG 路径字符串

> ID：13730062
> 
> 赞同：6
> 
> 时间：2012-12-05T18:34:59.633
> 
> 标签：javascript, svg, raphael

我正在生成一个表示折线图的大型 SVG 路径字符串。

在图表下方，我有一个用于选择时间范围切片的滑块。滑块后面是整个折线图的迷你预览。

我目前正在缩小生成预览的路径，但是这样做我最终每个像素有数十个节点，因此需要更多细节。当然，这给浏览器提供了比它必须做的更多的渲染工作。

有很多关于压缩 svg 字符串（gzipping 等）的信息，但很少有关于通过减少节点来实际简化路径的算法。

我正在使用 Raphaeljs 并正在寻找基于 javascript 的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T06:32:04.787

[Simplify.js](http://mourner.github.com/simplify-js/)可能是您所关心的。

鉴于您的折线图仅由直线段组成（根据定义应该如此），您可以像这样使用它：

```
 var tolerance = 3
  var pathSegArray = []
  for (var i=0; i<path.pathSegList.numberOfItems; i++) {
    pathSegArray.push(path.pathSegList.getItem(i))
  }
  var newPathArray = simplify(pathSegArray,tolerance)
  var newD = "M";
  for (i=0; i<newPathArray.length; i++) {
    newD += newPathArray[i].x + " " + newPathArray[i].y + " "
  }
  path.setAttribute("d",newD) 
```

# c++ - 我可以在 Xcode 中编辑我的 C++ 项目（通过跳转到定义/自动完成）而不构建项目吗？

> ID：13730067
> 
> 赞同：1
> 
> 时间：2012-12-05T18:35:14.360
> 
> 标签：c++, xcode, ide

我正在做一个 C++ 项目。我的公司有一个仅在 Linux 上运行的内部构建系统。我无法在我的 Mac 上构建项目。我会尝试用 Xcode 编辑我的 C++ 代码。我希望至少有“跳转到定义”和“自动完成”。我在 Xcode 中创建了一个空项目并将我的文件导入其中。当我尝试跳转到定义时，它显示“未找到符号”。是否可以让 Xcode 解析我的代码而不构建项目？

# android - 打算将文本分享给电子邮件客户端（仅限电子邮件客户端）

> ID：13730082
> 
> 赞同：1
> 
> 时间：2012-12-05T18:36:27.513
> 
> 标签：android

```
String value = text.getText().toString();

        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.putExtra(Intent.EXTRA_EMAIL, new String[]{"test@test.test"});
        intent.putExtra(Intent.EXTRA_SUBJECT, "subject");
        intent.putExtra(Intent.EXTRA_TEXT, value);

        startActivity(Intent.createChooser(intent, "Send Email")); 
```

此代码运行，但它显示应用程序列表，如记事本（和其他记事本应用程序）、whatsapp（和几个聊天应用程序）。

我需要一个只有电子邮件客户端的列表。我进行了长时间的搜索，但代码始终相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:40:10.733

尝试以下内容类型的代码：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("plain/text");
intent.putExtra(Intent.EXTRA_EMAIL, new String[] { "some@email.address" });
intent.putExtra(Intent.EXTRA_SUBJECT, "subject");
intent.putExtra(Intent.EXTRA_TEXT, "mail body");
startActivity(Intent.createChooser(intent, "")); 
```

Edit1：查看[此帖子](https://stackoverflow.com/questions/6264698/how-can-i-send-an-email-from-android-application-directly-without-showing-the-de)以直接发送电子邮件而无需打开电子邮件客户端。

# javascript - Jquery如果选中了radio，则找到一个子元素并更改css

> ID：13730084
> 
> 赞同：0
> 
> 时间：2012-12-05T18:36:37.603
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试编写这个假蒙面单选按钮，当用户单击或点击 a li 时，它会找到并检查子复选框并将我拥有的图标的 css 从 opacity-0 更改为 opacity-1，基本上显示图标，一切正常，当单击 li 时，这会触发每个 li 上的复选框，但是当用户选择任何其他选项时，图标应该回到 opacity-0，一直试图找到解决方案，但没有运气。希望有人可以提供帮助。我有一个[http://jsfiddle.net/creativestudio/7kSb9/1/](http://jsfiddle.net/creativestudio/7kSb9/1/)

这是我想要工作的 JS：

```
 function selectingLocation(){
            $('.location-list li').bind("click tap",function() {

                $(this).find(':radio').attr('checked','checked');

        //        $(':radio').on("change",function(){

                    if ($(':radio').is(':checked')) {
                        $(this).find('label').children().css({"color":"red"});
                    }
                    else {
                        $(this).find('label').children().css({"color":"white"});
                    }                                                            
          //     });

            });
        } selectingLocation(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:50:46.227

```
if ($(':radio').is(':checked')) 
```

那条线将永远是正确的。您没有检查子单选按钮，只要检查了任何单选按钮。

尝试这个：

```
function selectingLocation(){
    $('.location-list li').bind("click tap",function() {

        $(this).find(':radio').attr('checked','checked');
        $(".location-list li").find("label").children().css({"opacity":"0"});
        $(this).find("label").children().css({"opacity":"1"});

    });
} selectingLocation(); 
```

小提琴：http: [//jsfiddle.net/JDewzy/7kSb9/8/](http://jsfiddle.net/JDewzy/7kSb9/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:53:12.883

我清理了你的代码：

```
function selectingLocation(){
$('.location-list li').bind("click tap",function() {
  $('.location-list li label').children().css({"opacity":"0"});
  $(this).find(':radio').attr('checked','checked').end().find('label').children().css({"opacity":"1"});
});
} selectingLocation(); 
```

我同意 Cymen 的观点，你应该使用他的方法并从那里开始。但是为了回答你的问题，给你。

这是在jsfiddle：http: [//jsfiddle.net/7kSb9/12/](http://jsfiddle.net/7kSb9/12/)

# javascript - GWT 网络工作者 unflattenKeylistIntoAnswers 未定义

> ID：13730085
> 
> 赞同：2
> 
> 时间：2012-12-05T18:36:39.303
> 
> 标签：javascript, gwt, web-worker

如果我为多个代理构建它们，我在 GWT 中运行我的网络工作者时遇到问题。我收到未定义 unflattenKeylistIntoAnswers 函数的错误。实际上，该函数是为主 JS 定义的，但为 Web worker JS 定义的。此外，未定义其他一些函数，例如 computePropValue。

我错过了什么吗？也许是某种旗帜？

这是我的 gwt xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Could not determine the version of your GWT SDK; using the module DTD from GWT 1.6.4\. You may want to change this. -->
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.6.4//EN" "http://google-web-toolkit.googlecode.com/svn/tags/1.6.4/distro-source/core/src/gwt-module.dtd">
<module rename-to="BucketsSnapperWorker">

    <inherits name="path.to.Core" />

    <source path="" />

    <!-- Use the WebWorker linker for a Dedicated worker-->
    <add-linker name="dedicatedworker" />

    <entry-point class="path.to.EntryPoint"/>

    <set-property name="user.agent" value="safari,gecko1_8"/>
</module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:32:59.430

从 GWT 2.5 开始，您需要强制 GWT 编译器只为工人生成一个排列。将此添加到您的 gwt xml 文件中（替换您的 user.agent 属性）：

```
<set-property name="user.agent" value="safari"/>
<set-configuration-property name="user.agent.runtimeWarning" value="false" /> 
```

在我的情况下，工作人员还使用“safari” user.agent 选项在 Firefox 中运行。

# java - 在hibernate中声明数据成员为主键

> ID：13730087
> 
> 赞同：0
> 
> 时间：2012-12-05T18:36:55.593
> 
> 标签：java, hibernate, struts2, struts

我有 2 个实体类用户和地址

```
@Entity
class User
{
    int id;
    String name;
}

@Entity
class Vehicle
{
    @OneToOne
    User user;
    String vehName; 
} 
```

我想将 Vehicle 类中的“用户”数据成员声明为主键..谁能告诉我解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:18:58.380

如[文档中所述](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e5617)：

> 最后，您可以要求 Hibernate 从另一个关联实体复制标识符。在 Hibernate 行话中，它被称为外部生成器，但 JPA 映射读起来更好，受到鼓励。

```
@Entity
class MedicalHistory implements Serializable {
  @Id @OneToOne
  @JoinColumn(name = "person_id")
  Person patient;
}

@Entity
public class Person implements Serializable {
  @Id @GeneratedValue Integer id;
} 
```

> 或者，

```
@Entity
class MedicalHistory implements Serializable {
  @Id Integer id;

  @MapsId @OneToOne
  @JoinColumn(name = "patient_id")
  Person patient;
}

@Entity
class Person {
  @Id @GeneratedValue Integer id;
} 
```

# android - Flex 移动列表

> ID：13730088
> 
> 赞同：1
> 
> 时间：2012-12-05T18:37:04.573
> 
> 标签：android, asp.net, flash-builder, flex-mobile

有没有办法使用像 ASP.NET 中继器这样的 Flex Mobile List 控件？例如，ASP.NET 中的转发器允许您在 itemtemplate 中拥有许多可以绑定到数据源的控件。更容易理解它的方法是使用 Facebook 移动应用程序。我想知道它是如何创建的，因为我似乎无法使用网格或列表来以这种方式运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:20:55.703

虽然我从未使用过 ASP.NET 中继器，但我相信您指的是 ItemRenderer。根据提供给它的数据，列表中的每个项目都会以不同的方式显示。您可以在 ActionScript 或 MXML 中编写自己的 ItemRenderer。如果列表中有大量和/或复杂的数据，我建议使用 ActionScript。一开始它们可能有点棘手，但你会掌握它的。从小处着手。尝试简单地扩展 LabelItemRenderer 并根据数据对象设置文本值，然后从那里扩展它。一定要看看[这里](http://help.adobe.com/en_US/flex/using/WS4bebcd66a74275c3-fc6548e124e49b51c4-8000.html)和[这里](http://help.adobe.com/en_US/flex/using/WS684a1733bf2efe8a3a0afb75129d7657f1c-7fff.html)的一些很棒的文档。

# javascript - 确定是否作为点击事件的结果接收到焦点

> ID：13730089
> 
> 赞同：0
> 
> 时间：2012-12-05T18:37:07.083
> 
> 标签：javascript, jquery, javascript-events

我有一个`<input>`元素可以通过代码设置焦点，也可以通过鼠标单击设置焦点。

如果用户单击输入，则`click`事件处理程序将触发 - 一切都很好。如果元素通过其他方式（例如通过代码）接收焦点，那么我想手动触发`click`事件，以便处理程序也将触发。

我可以这样做：

```
$elem = $('input');
$elem
    .on('focus', function() { $(this).trigger('click') })
    .on('click', function() { alert('Clicked!') }); 
```

但是，这将导致`click`处理程序被触发两次；一次用于`click`事件，一次用于`focus`事件。

`click`只有当点击事件的结果*没有*收到焦点时，有没有办法选择性地触发处理程序？

* * *

**更新**

这是我的问题的一个非常简化的版本，所以我不能做一些事情，比如将两个处理程序绑定到`focus`事件等。我正在尝试合并两个第三方代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:56:42.050

该[`.trigger()`](http://api.jquery.com/trigger/)函数[`isTrigger`](https://github.com/jquery/jquery/blob/ab409d14bc6db42b4af3ba753be1b55fe8f897d8/src/event.js#L255)在事件对象中添加一个属性，以标识该事件是由其使用触发的。虽然没有记录该属性仍然存在于 jQuery 1.8.3 中，但它似乎只在内部使用。

无论如何，您可以使用该`extraParameters`参数向事件对象添加自定义属性。例如，

```
$(this).trigger('click', {
    isTrigger: true
}); 
```

`isTrigger`即使它在未来的版本中消失，它也会保持兼容性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:28:51.107

在做了更多研究之后，似乎无法*保证*哪个事件会首先触发：`click`或`focus`. （似乎没有规定事件顺序的标准。）

这意味着当`focus`事件触发时，无法确定`click`事件是否会在不久之后被浏览器触发。

我设法通过`setTimeout()`在事件触发后约 100 毫秒运行测试`focus`以检查`click`事件是否已触发来解决该问题。我正在使用的第三方代码（绑定到`click`事件）向 . 添加了一个额外的类`<input>`，因此我能够检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T14:56:38.657

您可以点击在`mousedown`事件之前触发的`focus`事件。当您单击可聚焦对象时，事件的顺序如下... `mousedown`, `focus`, `mouseup`, `click`。

您可以在事件中设置一个标志，`mousedown`然后在事件中检查它`focus`以查看焦点是否来自鼠标单击。显然确保清除`focus`事件处理程序中的标志。每个应用程序都是不同的，但利用`mousedown`事件可以让您找出解决方案。

这是一个展示事件顺序的 JSFiddle... [http://jsfiddle.net/ek7v7/](http://jsfiddle.net/ek7v7/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T18:42:03.477

```
$elem = $('input');
$elem
    .on('focus', function() { alert("Focused!") }) 
```

可以通过使用选项卡、单击它或使用 .focus() 聚焦输入来触发焦点

on('click', ...) 有什么原因吗？

# android - 评分按钮：可以知道用户是否在 google play 中为您的应用投票？

> ID：13730091
> 
> 赞同：1
> 
> 时间：2012-12-05T18:37:14.103
> 
> 标签：android, google-play

Wellcome 伙计们，我发布了一个应用程序，我想添加一个按钮，将用户直接重定向到我的应用程序的 googleplay 投票屏幕。我不想为我的应用打开 googleplay，我想打开投票屏幕。怎么可能做到这一点？

我这样测试：[http ://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater](http://www.androidsnippets.com/prompt-engaged-users-to-rate-your-app-in-the-android-market-appirater)

它不像我想要的那样工作，那样只会打开您应用程序的 googleplay 网站，但不能直接投票屏幕，但至少它将用户重定向到 googleplay，我找不到更好的方法来实现它。

好的，现在，我知道如何将用户重定向到 google play 但是.....**我怎么知道用户是否已被投票或不是我的应用程序？**

而且，**是否有一种方法可以将用户直接重定向到我的应用程序的 google play 投票公式？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:42:36.017

你不知道他们有没有。你可以假设他们在你重定向他们之后做了。此外，没有直接重定向到投票页面的选项。

# knockout.js - knockoutjs - $evalasync (angularjs) 等效

> ID：13730093
> 
> 赞同：0
> 
> 时间：2012-12-05T18:37:21.407
> 
> 标签：knockout.js, angularjs, kogrid

尝试在自定义绑定处理程序中执行一次函数以根据其内容调整某些 div 的大小。我可以在 angularjs 中轻松地做到这一点，但我试图找到一些表现得像`$evalAsync`淘汰赛的东西。

[http://docs.angularjs.org/api/ng.$ro​​otScope.Scope](http://docs.angularjs.org/api/ng.%24rootScope.Scope)

有这样的功能我可以挂钩吗？

它适用于 koGrid 2.0 自动宽度。现在它只适用于单页应用程序，因为我正在连接到 document.ready :(

[https://github.com/ericmbarnard/KoGrid](https://github.com/ericmbarnard/KoGrid)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T11:36:59.170

也许可以使用 afterRender 回调？

[http://knockoutjs.com/documentation/template-binding.html#note_4_using_afterrender_afteradd_and_beforeremove](http://knockoutjs.com/documentation/template-binding.html#note_4_using_afterrender_afteradd_and_beforeremove)

# html - 无论如何要将事件附加到数据列表？

> ID：13730097
> 
> 赞同：0
> 
> 时间：2012-12-05T18:37:35.337
> 
> 标签：html, input, html-datalist

每当用户从自动完成列表中选择时，我都会尝试捕获一个事件。我尝试将 onClick 事件放在选项标签中，但它永远不会触发。

这是代码：

```
<input id="facility_tb" class="fac_tb" type="text" title="Facility" 
placeholder="Facility" list="fac" 
onChange="alert('Change has happened')" > 
    <datalist id='fac'><option value='Andrew' >
    <option value='Ashley'>
    <option value='Apple'>
    </option>
    </datalist> 
```

# javascript - 为什么这个 javascript 节点遍历不起作用？

> ID：13730099
> 
> 赞同：1
> 
> 时间：2012-12-05T18:37:40.150
> 
> 标签：javascript, dom

我主要是 C#、Java、PHP 开发人员；封装的关联数据库。看似无关紧要，但却是我感觉自己又回到 15 岁的声明的有效前兆；盯着这个......令人失望的简单javascript，这似乎对我没有任何帮助。

我的目的是遍历当前文档中的节点，评估它们的属性，并在特定节点上执行操作。我的代码如下（再次......如此简单，我觉得自己像个傻瓜），但输出相当不一致。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function TraverseDocument()
{
    var Root = document.documentElement;

    for( Element in Root.childNodes )
    {
        document.writeln(Element);
    }
}
</script>
</head>

<body onLoad="javascript: TraverseDocument();">
<div id="test" testAttr="testData">
</div>
</body>
</html> 
```

现在; 考虑到这只是我在此（教程、示例等）中的第五次通过，并且我在此代码上尝试了一些排列：

```
// document.writeln(Element.nodeType);
// document.writeln(Element.nodeName);
// document.writeln(Element.nodeValue); 
```

所有这些都不足；显示“未定义”。当前代码（如我的第一个代码块所示）输出以下内容：

```
0 1 2 length item 
```

谁能指出我在这里出错的地方？菜鸟问题；但是我仍然无法将手指放在上面。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:40:58.347

很简单，您编写的 for 循环迭代对象的属性，而不是数组中的项目，您可能想要的实际上是：

```
function TraverseDocument()
{
    var Root = document.documentElement;

    for(var i = 0; i < Root.childNodes.length; i++ )
    {
        document.writeln(Root.childNodes[i]);
    }
} 
```

# python - Writelines 写入没有换行符的行，只是填充文件

> ID：13730107
> 
> 赞同：99
> 
> 时间：2012-12-05T18:38:09.487
> 
> 标签：python

我有一个将列表写入文件的程序。该列表是一个以管道分隔的行的列表，这些行应该像这样写入文件：

```
123|GSV|Weather_Mean|hello|joe|43.45
122|GEV|temp_Mean|hello|joe|23.45
124|GSI|Weather_Mean|hello|Mike|47.45 
```

但是它把它们写成这样啊啊啊：

```
123|GSV|Weather_Mean|hello|joe|43.45122|GEV|temp_Mean|hello|joe|23.45124|GSI|Weather_Mean|hello|Mike|47.45 
```

该程序将所有行写成一行，没有任何换行符。这让我很受伤，我必须弄清楚如何扭转这一点，但无论如何，我的程序哪里错了？我认为写行应该在文件中写下行，而不是将所有内容都写到一行..

```
fr = open(sys.argv[1], 'r') # source file
fw = open(sys.argv[2]+"/masked_"+sys.argv[1], 'w') # Target Directory Location

for line in fr:
    line = line.strip()
    if line == "":
        continue
    columns = line.strip().split('|')
    if columns[0].find("@") > 1:
        looking_for = columns[0] # this is what we need to search
    else:
        looking_for = "Dummy@dummy.com"
    if looking_for in d:
        # by default, iterating over a dictionary will return keys
            new_line = d[looking_for]+'|'+'|'.join(columns[1:])
            line_list.append(new_line)
    else:
        new_idx = str(len(d)+1)
        d[looking_for] = new_idx
        kv = open(sys.argv[3], 'a')
        kv.write(looking_for+" "+new_idx+'\n')
        kv.close()
        new_line = d[looking_for]+'|'+'|'.join(columns[1:])
        line_list.append(new_line)
fw.writelines(line_list) 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-05T18:52:01.497

对于 Python 新手来说，这实际上是一个很常见的问题——尤其是因为在标准库和流行的第三方库中，一些读取函数会去除换行符，但几乎没有写入函数（除了`log`-related 的东西）会添加它们。

因此，有很多 Python 代码可以执行以下操作：

```
fw.write('\n'.join(line_list) + '\n') 
```

或者

```
fw.write(line + '\n' for line in line_list) 
```

任何一个都是正确的，当然你甚至可以编写自己的 writelinesWithNewlines 函数来包装它......</p>

但只有在无法避免的情况下才应该这样做。

如果您可以首先创建/保留换行符，那就更好了——正如 Greg Hewgill 的建议：

```
line_list.append(new_line + "\n") 
```

如果您可以在比原始文本行更高的级别上工作，那就更好了，例如，通过使用标准库中的[csv](http://docs.python.org/library/csv.html)模块，正如 esuaro 所建议的那样。

例如，在定义 之后`fw`，您可以这样做：

```
cw = csv.writer(fw, delimiter='|') 
```

然后，而不是这个：

```
new_line = d[looking_for]+'|'+'|'.join(columns[1:])
line_list.append(new_line) 
```

你来做这件事：

```
row_list.append(d[looking_for] + columns[1:]) 
```

最后，而不是这样：

```
fw.writelines(line_list) 
```

你来做这件事：

```
cw.writerows(row_list) 
```

最后，您的设计是“打开一个文件，然后建立一个要添加到文件中的行列表，然后一次将它们全部写入”。如果您要从顶部打开文件，为什么不逐行编写呢？无论您是使用简单的 writes 还是 a `csv.writer`，它都会让您的生活更简单，并且您的代码更易于阅读。（有时可能出于简单、高效或正确性的原因一次性编写一个文件——但是一旦你`open`从`write`. - 一次。）

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-12-05T18:44:58.233

状态的[文档`writelines()`](http://docs.python.org/2/library/stdtypes.html#file.writelines)：

> `writelines()`不添加行分隔符

因此，您需要自己添加它们。例如：

```
 line_list.append(new_line + "\n") 
```

每当您将新项目附加到`line_list`.

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2018-05-07T22:39:28.433

正如其他人所指出的，`writelines`是用词不当（荒谬的是，它没有在每行的末尾添加换行符）。

为此，请将其显式添加到每一行：

```
with open(dst_filename, 'w') as f:
    f.writelines(s + '\n' for s in lines) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-13T14:52:33.133

`writelines()`不添加行分隔符。您可以通过在每个字符串的末尾`map()`添加一个新的`\n`（换行符）来更改字符串列表。

```
items = ['abc', '123', '!@#']
items = map(lambda x: x + '\n', items)
w.writelines(items) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-04-12T15:37:14.960

学分`Brent Faust`。

* * *

Python >= 3.6 带格式字符串：

```
with open(dst_filename, 'w') as f:
    f.writelines(f'{s}\n' for s in lines) 
```

`lines`可以是一个`set`。

如果您是老派（像我一样），您可以`f.write('\n')`在第二行下方添加。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-13T05:21:22.320

正如其他人所提到的，与方法名称所暗示的相反，`writelines`不添加行分隔符。这是生成器的教科书案例。这是一个人为的例子：

```
def item_generator(things):
    for item in things:
        yield item
        yield '\n'

def write_things_to_file(things):
    with open('path_to_file.txt', 'wb') as f:
        f.writelines(item_generator(things)) 
```

好处：显式添加换行符，而无需修改输入或输出值或进行任何混乱的字符串连接。而且，至关重要的是，它不会在内存中创建任何新的数据结构。IO（写入文件）是那种事情实际上很重要的时候。希望这对某人有帮助！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-23T20:13:52.253

正如我们在这里已经确立的那样，`writelines`不会为您附加换行符。但是，每个人似乎都缺少的是，当它被用作直接“对应物”时，它不必如此，`readlines()`并且最初的阅读坚持换行！

当您打开一个文件以**二进制模式**（通过`'rb'`）读取时，然后用于`readlines()`将文件内容提取到内存中，按行拆分，换行符仍然附加到行尾！因此，如果您随后将它们写回，您可能不想`writelines`附加任何内容！

因此，如果您执行以下操作：

```
with open('test.txt','rb') as f: lines=f.readlines()
with open('test.txt','wb') as f: f.writelines(lines) 
```

您最终应该得到与开始时相同的文件内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-24T20:17:10.917

由于我们只想分隔行，而`writelines`python中的函数不支持在行之间添加分隔符，所以我写了下面最适合这个问题的简单代码：

```
sep = "\n" # defining the separator
new_lines = sep.join(lines) # lines as an iterator containing line strings 
```

最后：

```
with open("file_name", 'w') as file:
    file.writelines(new_lines) 
```

你就完成了。

# c# - Unity 单例管理器类

> ID：13730112
> 
> 赞同：36
> 
> 时间：2012-12-05T18:38:37.520
> 
> 标签：c#, design-patterns, unity3d, singleton

在 Unity 中，有什么好的方法可以创建一个可以作为全局类访问的单例游戏管理器，该类具有静态变量，这些静态变量将向每个提取这些值的类吐出相同的常量值？在 Unity 中实现它的方法是什么？我必须将它附加到游戏对象吗？它可以只是在文件夹中而不在视觉上出现在场景中吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-05T19:55:55.410

像往常一样：这取决于。我使用两种类型的单例，附加到的组件`GameObject`和不派生自的独立类`MonoBehaviour`。IMO 的总体问题是实例如何绑定到场景、游戏对象的生命周期……而且不要忘记，有时拥有一个组件更方便，尤其是引用其他`MonoBehaviour`对象更容易、更安全。

1.  有些类只需要提供一些值，例如在调用时需要从持久层加载设置的配置类。我将这些类设计为简单的单例。
2.  另一方面，一些对象需要知道场景何时开始，即被`Start`调用或必须在`Update`或其他方法中执行动作。然后我将它们实现为组件并将它们附加到一个在加载新场景后幸存下来的游戏对象。

我设计了包含两个部分的基于组件的单例（类型 2）：一个持久化的`GameObject`称为`Main`，它包含所有组件和一个扁平的单例（类型 1）`MainComponentManager`，用于管理它。一些演示代码：

```
public class MainComponentManger {
    private static MainComponentManger instance;
    public static void CreateInstance () {
        if (instance == null) {
            instance = new MainComponentManger ();
            GameObject go = GameObject.Find ("Main");
            if (go == null) {
                go = new GameObject ("Main");
                instance.main = go;
                // important: make game object persistent:
                Object.DontDestroyOnLoad (go);
            }
            // trigger instantiation of other singletons
            Component c = MenuManager.SharedInstance;
            // ...
        }
    }

    GameObject main;

    public static MainComponentManger SharedInstance {
        get {
            if (instance == null) {
                CreateInstance ();
            }
            return instance;
        }
    }

    public static T AddMainComponent <T> () where T : UnityEngine.Component {
        T t = SharedInstance.main.GetComponent<T> ();
        if (t != null) {
            return t;
        }
        return SharedInstance.main.AddComponent <T> ();
    } 
```

现在其他想要注册为`Main`组件的单例看起来像：

```
public class AudioManager : MonoBehaviour {
    private static AudioManager instance = null;
    public static AudioManager SharedInstance {
        get {
            if (instance == null) {
                instance = MainComponentManger.AddMainComponent<AudioManager> ();
            }
            return instance;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-20T14:57:53.157

刚接触 Unity 的工程师通常不会注意到这一点

# 您不能在 ECS 系统中拥有“单例”。

这是没有意义的。

您在 Unity 中拥有的只是游戏对象，位于 XYZ 位置。它们可以附加组件。

这就像试图在.... Photoshop 或 Microsoft Word 中拥有“单例”或“继承”。

**Photoshop**文件 - XY 位置的像素
**文本编辑器**文件 - X 位置的字母
**Unity**文件 - XYZ 位置的游戏对象

它“就是这么简单”。

因此，在游戏中，您将拥有只有“一个”事物的“一般”行为。（所以显然只有“一个音效引擎”、“一个屏幕”、“一个评分系统”等。）一个普通的程序员会认为这些是“单例”，但 Unity 与单例无关，与单身人士没有联系。

因此，如果您有“坦克”或“一棵树”当然很正常，您可能有几十个这样的东西。但是“音效引擎”或“网络系统”是“通用的，唯一的”系统。

因此，很简单，在 Unity 中，“音效引擎”或“网络系统”非常简单地位于游戏对象上，而您（显然）只拥有其中一个。

那些“一般的，只有其中一个”的项目只是放在预加载场景中。

无论如何，在每个 Unity 项目中，您绝对必须有一个预加载场景。

（简单的操作方法：[https](https://stackoverflow.com/a/35891919/294884) ://stackoverflow.com/a/35891919/294884 ）

未来 Unity 将包含一个“内置预加载场景”——当那一天到来时，这将永远不会再被讨论！

（注意 -*您用于为 Unity 编译组件的一些语言*当然具有 OO 概念；但 Unity 本身与 OO 没有任何关系。Unity 就像 Photoshop。每个“游戏对象”都位于某个 3D 位置。）

（注意——在 Unity 的早期，你会看到编写代码的尝试，比如 c#，它动态创建游戏对象，尝试保持游戏对象的唯一性，并将自身作为组件“附加”到游戏对象. 除了完全奇怪/毫无意义之外，仅 FWIW 理论上不可能确保唯一性（实际上甚至在单个帧内都没有）。同样，它没有实际意义，因为在 Unity 中，一般行为只是在预加载场景中进行。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-12T10:13:54.387

如果此类仅用于访问全局变量，那么您实际上不需要单例模式，或者使用 GameObject。

只需创建一个具有公共静态成员的类。

```
public class Globals
{
    public static int mStatic1 = 0;
    public static float mStatic2 = 0.0f;
    // ....etc
} 
```

如果您只需要对变量的全局访问，其他解决方案都很好，但过度杀伤力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-05T13:16:28.090

我写了一个单例类，可以很容易地创建单例对象。它是一个 MonoBehaviour 脚本，所以你可以使用协程。它基于这篇[Unity Wiki 文章](http://wiki.unity3d.com/index.php/Singleton)，稍后我将添加从 Prefab 创建它的选项。

所以你不需要编写单例代码。只需下载[此 Singleton.cs Base Class](https://github.com/bivisss/unity-reusable-singleton/blob/master/Singleton.cs)，将其添加到您的项目中，然后创建您的单例扩展它：

```
public class MySingleton : Singleton<MySingleton> {
  protected MySingleton () {} // Protect the constructor!

  public string globalVar;

  void Awake () {
      Debug.Log("Awoke Singleton Instance: " + gameObject.GetInstanceID());
  }
} 
```

现在你的 MySingleton 类是一个单例，你可以通过 Instance 调用它：

```
MySingleton.Instance.globalVar = "A";
Debug.Log ("globalVar: " + MySingleton.Instance.globalVar); 
```

这是一个完整的教程： http: [//www.bivis.com.br/2016/05/04/unity-reusable-singleton-tutorial/](http://www.bivis.com.br/2016/05/04/unity-reusable-singleton-tutorial/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-08T02:09:57.870

这是我创建的设置。

首先创建这个脚本：

MonoBehaviourUtility.cs

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using System.IO;

static public class MonoBehaviourUtility 
{

    static public T GetManager<T>( ref T manager ) where T : MonoBehaviour
    {
        if (manager == null)
        {
            manager = (T)GameObject.FindObjectOfType( typeof( T ) );
            if (manager == null)
            {
                GameObject gameObject = new GameObject( typeof( T ).ToString() );
                manager = (T)gameObject.AddComponent( typeof( T ) );
            }
        }
        return manager;
    }

} 
```

然后在任何你想成为单身人士的班级中这样做：

```
public class ExampleManager : MonoBehaviour 
{   
    static public ExampleManager sharedManager 
    {
        get 
        {
            return MonoBehaviourUtility.GetManager<ExampleManager>( ref _sharedManager );
        }
    }   
    static private ExampleManager _sharedManager;       
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-27T12:30:41.023

一种方法是制作一个场景来初始化你的游戏管理器，如下所示：

```
public class GameManager : MonoBehaviour {
    static GameManager instance;

    //other codes

    void Awake() {
        DontDestroyOnLoad(transform.gameObject);
        instance = this;
    }

    //other codes
} 
```

就是这样，这就是你需要做的。然后在初始化游戏管理器后立即加载下一个场景并且永远不会再回到这个场景。

看看这个教程： [https ://youtu.be/64uOVmQ5R1k?list=WL](https://youtu.be/64uOVmQ5R1k?list=WL)

**编辑：** 更改`GameManager static instance;`为`static GameManager instance;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-15T12:53:01.300

而不是为每个类创建一个单例。我建议您为单例创建一个通用类。我习惯遵循这种方法，这让我的生活变得非常轻松。

有关更多详细信息，请访问[此处](http://wiki.unity3d.com/index.php/Singleton)

或者

统一创建 Unity C# 类并使用以下代码

```
/// <summary>
/// Inherit from this base class to create a singleton.
/// e.g. public class MyClassName : Singleton<MyClassName> {}
/// </summary>
public class Singleton<T> : MonoBehaviour where T : MonoBehaviour
{
    // Check to see if we're about to be destroyed.
    private static bool m_ShuttingDown = false;
    private static object m_Lock = new object();
    private static T m_Instance;

    /// <summary>
    /// Access singleton instance through this propriety.
    /// </summary>
    public static T Instance
    {
        get
        {
            if (m_ShuttingDown)
            {
                Debug.LogWarning("[Singleton] Instance '" + typeof(T) +
                    "' already destroyed. Returning null.");
                return null;
            }

            lock (m_Lock)
            {
                if (m_Instance == null)
                {
                    // Search for existing instance.
                    m_Instance = (T)FindObjectOfType(typeof(T));

                    // Create new instance if one doesn't already exist.
                    if (m_Instance == null)
                    {
                        // Need to create a new GameObject to attach the singleton to.
                        var singletonObject = new GameObject();
                        m_Instance = singletonObject.AddComponent<T>();
                        singletonObject.name = typeof(T).ToString() + " (Singleton)";

                        // Make instance persistent.
                        DontDestroyOnLoad(singletonObject);
                    }
                }

                return m_Instance;
         }
      }
  }

  private void OnApplicationQuit()
  {
     m_ShuttingDown = true;
  }

  private void OnDestroy()
  {
    m_ShuttingDown = true;
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-05T18:43:26.603

这是取自 Unity 教程的简单代码。为了更好地理解打开[链接](https://unity3d.com/learn/tutorials/projects/2d-roguelike-tutorial/writing-game-manager)

```
using System.Collections.Generic;       //Allows us to use Lists. 

public class GameManager : MonoBehaviour
{

    public static GameManager instance = null;              //Static instance of GameManager which allows it to be accessed by any other script.
    private BoardManager boardScript;                       //Store a reference to our BoardManager which will set up the level.
    private int level = 3;                                  //Current level number, expressed in game as "Day 1".

    //Awake is always called before any Start functions
    void Awake()
    {
        //Check if instance already exists
        if (instance == null)

            //if not, set instance to this
            instance = this;

        //If instance already exists and it's not this:
        else if (instance != this)

            //Then destroy this. This enforces our singleton pattern, meaning there can only ever be one instance of a GameManager.
            Destroy(gameObject);    

        //Sets this to not be destroyed when reloading scene
        DontDestroyOnLoad(gameObject);

        //Get a component reference to the attached BoardManager script
        boardScript = GetComponent<BoardManager>();

        //Call the InitGame function to initialize the first level 
        InitGame();
    }

    //Initializes the game for each level.
    void InitGame()
    {
        //Call the SetupScene function of the BoardManager script, pass it current level number.
        boardScript.SetupScene(level);

    }

    //Update is called every frame.
    void Update()
    {

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-28T12:34:14.613

```
 using UnityEngine;

 public class Singleton<T> : MonoBehaviour where T : Singleton<T>
 {   

   public static T instance { get; private set; }

    protected virtual void Awake() {

    if (instance == null)
    {
        instance = (T)this;
        DontDestroyOnLoad(gameObject);
        OnInit();
    }
    else if (instance != this)
    {
        Destroy(gameObject);
    }
  }

  protected virtual void OnInit()
  {

  }

} 
```

游戏管理：

```
class GameManager : Singleton<GameManager> {

} 
```

# android - Android - 编辑框的背景

> ID：13730116
> 
> 赞同：0
> 
> 时间：2012-12-05T18:38:47.003
> 
> 标签：android, editbox

可以在所有 Android 操作系统的编辑框上制作相同的背景吗？我希望 OS 2.2 设备中编辑框的背景与 OS 4.0 设备中的背景相同。我想要一个像 OS 4.0 这样有底线的背景。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:46:54.580

实际上 android 在更高版本 3.0 中为我们提供了默认的编辑框背景，我们无法在 2.2 中创建与 4.0 相同的背景。但是我们可以为它们使用图像，我们可以创建一个自定义的 android 编辑框，看起来像 4.0 底部箭头。

# asp.net - 如何在 Umbraco 4 中使用自定义字体

> ID：13730118
> 
> 赞同：0
> 
> 时间：2012-12-05T18:38:47.980
> 
> 标签：asp.net, css, fonts, umbraco

我有一堆自定义字体，我把它们放进去

```
/root/css/fonts/ 
```

我什至试着放在这里

```
Umbraco/config/fonts 
```

无论哪种方式都行不通......它没有拿起我的字体......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:53:03.200

只要使用它们的 CSS 指向（并且可以访问）它们，您就可以将字体放在任何您想要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:50:30.530

您应该将 MINE TYPE 添加到您的 IIS 中，这将有所帮助

# hadoop - 蜂巢断管错误

> ID：13730119
> 
> 赞同：2
> 
> 时间：2012-12-05T18:38:49.127
> 
> 标签：hadoop, hive

我一直在从事一个包含 hive 查询的项目。

> INSERT INTO OVERWRITE .... TRANSFORM (....) USING 'python script.py' FROM .... LEFT OUTER JOIN 。. . 左外连接。. . 左外连接

一开始一切正常，直到我们加载了大量的虚拟数据。我们只是在某些字段上写入相同的记录，但有细微的变化。之后我们再次运行它，我们得到一个 Broken pipe 错误，没有太多信息。没有关于错误的日志，只有 IOException: Broken pipe 错误。. . .

为了简化脚本并隔离错误，我们将脚本修改为

```
for line in sys.stdin.readlines():
    print line 
```

以避免该级别的任何错误。我们仍然有同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:53:12.640

这个问题似乎可以通过在不同查询中拆分如此多的连接并使用中间表来解决。然后，您只需添加一个带有最后一个连接的最终查询，该连接总结了所有先前的结果。据我了解，这意味着脚本级别没有错误，但配置单元处理的数据太多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:58:26.820

另一种解决方法是删除转换并生成一个新查询，将数据插入另一个表中，只是运行转换。我不是 100% 确定为什么，脚本是正确的。我认为问题可能是由于连接太多而流式传输的数据量非常大。

# sql-server - 如何使复合键仅限制日期而不匹配时间？

> ID：13730122
> 
> 赞同：1
> 
> 时间：2012-12-05T18:39:00.573
> 
> 标签：sql-server, sql-server-2005

我正在使用 SQL Server 2005。

我有一个由这些列组成的复合键：

用户 ID ..... int

ADate ..... 日期时间

如果我为用户输入两个具有不同时间的相似日期，则表示允许该记录。但我希望它因为类似的日期而受到限制。

插入相同日期部分时如何限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:48:46.237

考虑你的桌子

```
create table tbl (
    userid int,
    adate datetime
) 
```

您可以添加一个 COMPUTED 列

```
alter table tbl add adateonly as datediff(d,0,adate); 
```

这样您就可以在其上创建一个 UNIQUE 约束：

```
alter table tbl add constraint uq_tbl_date unique(userid, adateonly); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:49:57.220

如果我理解您的问题，您想使用索引或其他方法创建复合限制？

1）使用索引，您是否可以添加另一列 varchar(8)，仅包含日期，例如：yyyymmdd，然后使用触发器或在插入之前，您可以生成日期字符串。

2）在表上创建一个触发器并验证这两个键，可能是一个插入和更新触发器。

希望这会有所帮助，何塞克鲁兹

# iphone - ios中的信用卡支付

> ID：13730135
> 
> 赞同：1
> 
> 时间：2012-12-05T18:39:53.510
> 
> 标签：iphone, ios, ios5, ios4, ios6

除了paypal之外，ios有没有什么信用卡扫描和支付方式。如果是这样，请指定 sdk 或 sdk 的链接。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:46:37.853

Card IO（由 paypal 购买）是最早这样做的人之一。（我用过，非常简单/易于集成）

Jumio 的 Netwsipe sdk 是另一种选择

# ios - iOS 应用版本升级不丢失数据？

> ID：13730144
> 
> 赞同：1
> 
> 时间：2012-12-05T18:40:21.553
> 
> 标签：ios

是否可以部署新的 iOS 应用程序版本而不会丢失在先前版本的文档目录下创建的文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:44:33.443

这是正常行为。您无需为在应用升级期间保留的数据执行任何操作。

# java - Android 4.2 for Multi-User 环境中的静态变量会发生什么变化

> ID：13730148
> 
> 赞同：1
> 
> 时间：2012-12-05T18:40:43.603
> 
> 标签：java, android, static-variables

谷歌表示多用户将如何工作的方式是：“设备上的每个用户都有他或她自己的一组帐户、应用程序、系统设置、文件和任何其他与用户相关的数据。”

我认为/相信这是通过使用不同的 UID 来完成的。

如果这是真的，对于应用程序来说，这意味着它必须首先终止现有应用程序并将其作为不同的 UID 运行。这意味着将重新加载类并为新用户再次创建静态变量。

以上是真的，那么静态变量应该没有了。

有人可以确认吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:43:29.137

`static`变量与定义它们的类加载器+类相关联。因此，很确定它们将消失（或）无法访问第二个用户登录。

我不确定 UID（或）用于识别唯一用户的方法。

# zero - 在 COQ 中使用归纳法证明一个定理

> ID：13730150
> 
> 赞同：1
> 
> 时间：2012-12-05T18:40:48.720
> 
> 标签：zero, proof, coq, contain

我在学校学习 Coq，我有一个家庭作业要做。我有一个引理需要证明：如果一个列表在其元素中包含零，则其元素的乘积为 0。我开始编写代码，但我陷入了不知道如何继续下去的地步。我不知道 Coq 的所有命令，我做了很多研究，但我无法找到通往证明结尾的路。这是我的代码：需要导入列表 ZArith。

```
Open Scope Z_scope.

Fixpoint contains_zero (l : list Z) :=
  match l with
    nil => false
  | a::tl => if Zeq_bool a 0 then true else contains_zero tl
  end.

Fixpoint product (l : list Z) :=
  match l with
    nil => 1
  | a::tl => a * product tl
  end.

Lemma Zmult_integral_r :
  forall n m, m <> 0 -> m * n = 0 -> n = 0.
Proof.
intros n m m0; rewrite Zmult_comm; apply Zmult_integral_l.
assumption.
Qed.

Lemma product_contains_zero :
  forall l, contains_zero l = true -> product l = 0.
intros l H. 
```

所以，我认为创建一个函数来检查列表是否包含零，以及另一个来计算其元素的乘积是一个好主意。我还（幸运的是）在网上找到了一个引理，证明如果我有 2 个数字，并且我知道其中一个不是 0，并且它们的乘积是 0，那么另一个数字必然是 0（我认为这可能会有所帮助） . 我想过用归纳法做一个证明，但没有成功。有任何想法吗？我知道这不是让别人做我的工作的地方，我不是在问那个，我只是需要一个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:07:25.653

1 /您不需要您提到的定理，“如果我有2个数字，并且我知道其中一个不是0，并且它们的乘积是0，那么另一个数字一定是0”。您不需要它，因为您想证明乘积为 0，您不处于想要使用乘积为零的事实的情况。

所以定理 Zmult_integral_r 对这个问题的引理没有用处。如果您必须证明 forall l, product l = 0 -> contains_zero l = true，这将很有用。

在这里，对于您的问题，您考虑的两个函数是递归的，因此通常的提示是通过归纳进行证明，然后使用策略 simpl 使函数看起来更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:51:41.260

将两个数字的乘积表示为一个数字，而您将支持该引理。

# c++ - 将对象转换为整数的 C++ 类

> ID：13730153
> 
> 赞同：5
> 
> 时间：2012-12-05T18:40:59.470
> 
> 标签：c++, integer

我正在从一本书（Schaums Programming with c++）中自学C++，我遇到了一些我想尝试但没有涵盖的东西（据我所知）。

我有一个包含`hrs`: `mins`:的类`secs`。是否可以编写一个类型转换，以整数形式返回对象？

如果不是，那可能就是我找不到任何东西的原因。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T18:45:21.100

当然，您只需要编写一个强制转换运算符。假设您要将时间转换为秒：

```
class MyTime
{
    ...

public:
    operator int() const
    {
        return hours_ * 3600 + minutes_ * 60 + seconds_;
    }
} 
```

在 C++11 中，您还可以将关键字添加`explicit`到您的运算符，以便您的强制转换明确需要 a`static_cast<int>`才能编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:44:16.327

假设这是一个分辨率为秒的持续时间，那么是的 - 类似的东西`hours * 3600 + minutes * 60 + seconds`应该给你一个持续时间的整数秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:43:59.743

您可以编写一个函数来将您的类转换为所需的整数值。类型转换方法可以重载。见这里： http: [//www.learncpp.com/cpp-tutorial/910-overloading-typecasts/](http://www.learncpp.com/cpp-tutorial/910-overloading-typecasts/)

# google-apps-script - 谷歌电子表格自定义功能：如何获得持续更新的值？

> ID：13730163
> 
> 赞同：2
> 
> 时间：2012-12-05T18:41:40.697
> 
> 标签：google-apps-script, google-sheets, custom-function

我在与我的谷歌文档电子表格关联的脚本中编写了一个自定义谷歌应用脚​​本函数。该函数调用第三方服务来获取数据。我可以把函数放在一个单元格中：

```
=myfunction("something") 
```

它从服务返回正确的值。但是，我怎样才能保持这个值更新，以便它显示来自服务的最新数据？

**更新**

例如：

```
=temperature("90120") 
```

用于获取给定邮政编码中的当前温度。此外，我的工作表可能有几十个或几百个，所以我更喜欢高性能和可维护的东西。它并不真正需要是连续的，每分钟轮询一次或更频繁地轮询可以工作。我想知道脚本是否有某种方法可以设置计时器以运行以更新一系列单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:12:12.383

不知道为什么你需要几十个或几百个。1\. 电子表格是否被其他进程使用？2\. 电子表格是否由实际用户直观地查看？

如果 #1，您可以通过内容服务将电子表格替换为自定义 API，以返回所有温度的 JSON 结果。

如果 #2，您可能会因为如此频繁地触发如此多的功能而达到限制或性能问题。如果没有人查看结果，为什么要触发函数。或者，您可以使用自定义菜单选项使其按需进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-12T08:22:31.813

我有一个类似的问题。

这就是我在 atm 上做的方式，但它不是最好的解决方案。我正在寻找一个更好的。

如果工作表价格和 D 列中的任何值发生变化。这意味着如果整列中的任何单元格值发生变化，它会更新自定义函数值。

```
//Search Price sheet with the given name. Return price. dummy param updates google ss once the "Prices" sheet values changed.
function searchPrice(price,dummy)
{
  var SPREADSHEET_NAME = "Prices";
  var SEARCH_COL_IDX = 2;
  var RETURN_COL_IDX = 3;
  var values = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(SPREADSHEET_NAME).getDataRange().getValues();
  for (var i = 0; i < values.length; i++)
  {
    var row = values[i];
    if (row[SEARCH_COL_IDX] == price)
    {
      return row[RETURN_COL_IDX];
    }
  }
} 
```

这就是你所说的 =searchPrice(B8,Prices!D:D)

只需给您的自定义函数一个虚拟参数。它在自定义函数中不做任何事情。

# java - 我的 java 程序的意外输出

> ID：13730174
> 
> 赞同：-1
> 
> 时间：2012-12-05T18:42:12.790
> 
> 标签：java, arraylist

我的代码：

```
Object tempDifference;
Object testUser;
testUser = users.get(0);
it8 = difference_time.iterator();
it9 = users.iterator();
Object tempUser;
tempDifference = difference_time.get(0);

while (it9.hasNext()) {
  tempUser = it9.next();
  System.out.println(testUser+" "+tempUser);
  if (testUser.equals(tempUser)) {
    times.add(tempDifference);
    testUser = tempUser;
  } else {
    times.add(value);
    testUser = tempUser;
  }
  tempDifference = it8.next();
} 
```

*   输入是：`1 2 2`

*   输出是：`1 1`

*   我要输出`1 2`

为什么`1 1`开始时输出不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:59:09.283

大多数迭代器在第一个元素之前开始，因此第一次调用 next() 会将它们移动到第一个元素，而不是第二个元素。

因此，如果 users = {1, 2}，并且稍微简化一下：

```
//set test = 1, the first entry in the list
test = users.get(0); 
//get a new iterator, starting before the first element
it9 = users.iterator(); 
// move to first element (the next one), so temp == 1
temp = it9.next(); 
// print values "1 1"
System.out.println(test+" "+temp); 
```

# facebook - Facebook Graph / FQL - 有没有办法恢复或提升我的旧帖子？

> ID：13730177
> 
> 赞同：0
> 
> 时间：2012-12-05T18:42:29.667
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我面前有一个很奇怪的要求。我能够从 facebook Graph 中提取数据并毫无疑问地围绕它做一些事情。但是，在我拥有的提要/帖子中（我从我/提要/中提取），我可以看到一些提要已经存在一年或更长时间。有什么方法可以让我提出或提升任何旧帖子？

非常感谢，

雷诺琼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:24:38.533

不，您**不能**编辑帖子的日期，或者通过 API 将其“撞”到时间轴的顶部

# c# - 上传定宽文件并验证定宽格式是否在c#中格式正确

> ID：13730183
> 
> 赞同：0
> 
> 时间：2012-12-05T18:42:46.377
> 
> 标签：c#, asp.net

如何动态验证固定宽度的文件？

如果用户以这种方式通过它，我可以毫无问题地阅读它

```
123-45-6789 Nick Sanders 200 300
987-65-4321 Jon  Smith   400 550 
```

如果他们以下面的方式给出它，我该如何验证和阅读它？

```
123-45-6789 Nick Sanders     200 300
987-65-4321 Jon  Smith     400 550
987-65-4321 Jon  Smith   400 550 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:48:28.063

使用正则表达式类来验证它

```
 Regex reg = new Regex("\d{3}\-\d{2}\-\d{4}\s+[a-zA-Z]+\s+\d+\s+\d+"); 
```

检查语法，因为我直接输入

# jquery - 如何简化 jQuery 代码

> ID：13730185
> 
> 赞同：2
> 
> 时间：2012-12-05T18:42:59.063
> 
> 标签：jquery, navigation, sliding

这是我使用 jQuery 的开始。我做了一个简单的内容滑动导航，它非常适合我，但我不知道如何简化我的代码：

```
$(document).ready(function(){
    // Sliding content navigation
    var active = ".active"
    $('a.europa').click(function () {
        $(active).hide("slide", { direction: "left" }, 500);
        $('#europa-view').delay(500).show("slide", { direction: "left" }, 500);
        $('#italia-view, #emilia-view').removeClass('active');
        $('#europa-view').addClass('active');        
    });

    $('a.italia').click(function () {
        $(active).hide("slide", { direction: "left" }, 500);
        $('#italia-view').delay(500).show("slide", { direction: "left" }, 500);
        $('#europa-view, #emilia-view').removeClass('active');
        $('#italia-view').addClass('active');
    });

    $('a.emilia').click(function () {
        $(active).hide("slide", { direction: "left" }, 500);
        $('#emilia-view').delay(500).show("slide", { direction: "left" }, 500);
        $('#europa-view, #italia-view').removeClass('active');
        $('#emilia-view').addClass('active');
    });
}); 
```

[演示](http://jsfiddle.net/92HXT/267/) ​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:48:21.247

尝试这个：

Javascript：

```
// Sliding content navigation
var active = ".active"
$('a.sharedClass').click(function() {
    var name = $(this).attr('name');
    $(active).hide("slide", { direction: "left" }, 500).removeClass('active');

    $('#' + name).delay(500).show("slide", { direction: "left" }, 500)
                 .addClass('active');
});​ 
```

​ 列表的新 HTML：

```
<div id="view-navigator">
    <ul id="view-list">
        <li class="europa"><a href="#" class="europa sharedClass" name="europa-view">europa</a></li>
        <li class="italia"><a href="#" class="italia sharedClass" name="italia-view">italia</a></li>
        <li class="emilia"><a href="#" class="emilia sharedClass" name="emilia-view">emilia-romagna</a></li>
    </ul>
</div> 
```

演示：http: [//jsfiddle.net/maniator/Tbrvv/](http://jsfiddle.net/maniator/Tbrvv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:48:45.630

尝试修改您的代码以使用类。见下文，

**演示：http:** [//jsfiddle.net/92HXT/272/](http://jsfiddle.net/92HXT/272/)

```
$(document).ready(function() {
    // Sliding content navigation
    var active = ".active"
    $('a.showcontent').click(function() {
        $(active).hide("slide", { direction: "left" }, 500);
        $('.news-list').removeClass('active');
        $('#' + this.name).delay(500).show("slide", { direction: "left" }, 500)
                          .addClass('active');
    });

}); 
```

通过如下一些标记更改，

```
 <ul id="view-list">
        <li class="europa"><a href="#" class="europa showcontent" name="europa-view">europa</a></li>
        <li class="italia"><a href="#" class="italia showcontent" name="italia-view">italia</a></li>
        <li class="emilia"><a href="#" class="emilia showcontent" name="emilia-view">emilia-romagna</a></li>
    </ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:52:31.097

创建一个函数，该函数将获取需要显示的元素的 id，单击时您只需使用所需的 id 运行该函数：

```
$(document).ready(function(){
  var active = ".active";

  var clickEvent = function (itemToShow){
    $(active).hide("slide", { direction: "left" }, 500);
    $('#italia-view, #emilia-view, #europa-view').removeClass('active');
    $(itemToShow).delay(500).show("slide", { direction: "left" }, 500);
    $(itemToShow).addClass(itemToShow);
  }

  $('a.italia').click(clickEvent("#italia-view"));
  $('a.europa').click(clickEvent("#europa-view"));
  $('a.emilia').click(clickEvent("#emilia-view"));
} 
```

# c - 在 c 中使用 scanf 读取双精度值

> ID：13730188
> 
> 赞同：59
> 
> 时间：2012-12-05T18:43:14.840
> 
> 标签：c, scanf, conversion-specifier

我尝试在 C 中使用 scanf() 读取 2 个值，但系统写入内存的值不等于我输入的值。这是代码：

```
double a,b;
printf("--------\n"); //seperate lines
scanf("%ld",&a);
printf("--------\n"); 
scanf("%ld",&b);
printf("%d %d",a,b); 
```

如果我输入 1 和 2，CMD 返回正确，但 b = -858993460 这是我已经尝试过的：使用 float 或 int 而不是 double，使用 scanf_s，使用 scanf("%d or %f for %i or %li或 %lf 或 %e 或 %g ），使用 fflush(stdin) 清除键盘缓冲区，首先读取 b ，尝试所有可能的组合。我发现在 32 位操作系统上 double 的长度存在问题，这样你就不得不使用 scanf("%lf", &f) 来读取双精度。无论我做什么，第二个值总是错误的。

我在 Windows 7 32 位操作系统上使用 MS VS express 2012 for Desktop。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-12-05T18:45:32.523

使用`%lf`格式说明符读取双精度：

```
double a;
scanf("%lf",&a); 
```

维基百科对可用的格式说明符有[很好的参考。](http://en.wikipedia.org/wiki/Scanf_format_string)

您还需要使用`%lf`格式说明符来打印结果：

```
printf("%lf %lf",a,b); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T18:46:00.463

据我所知`%d`，十进制是没有小数点的数字。如果要加载双精度值，请使用`%lf`转换（长浮点数）。对于 printf，您的值出于同样的原因是错误的，`%d`仅用于整数（如果您知道自己在做什么，可能还有字符）数字。

例子：

```
double a,b;
printf("--------\n"); //seperate lines
scanf("%lf",&a);
printf("--------\n"); 
scanf("%lf",&b);
printf("%lf %lf",a,b); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T18:45:48.387

您使用了错误的格式顺序`double`，您应该使用`%lf`而不是`%ld`：

```
double a;
scanf("%lf",&a); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-11T16:50:56.780

格式说明符`printf`应该`%f`用于`doubl`数据类型，因为数据类型`float`最终会转换为`double`内部的数据类型`printf`。

没有打印`float`数据的规定。请在此处找到讨论： [在 printf 中为 double 更正格式说明符](https://stackoverflow.com/questions/4264127/correct-format-specifier-for-double-in-printf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-15T08:25:55.283

扫描第二个值时使用这行代码： `scanf(" %lf", &b);` 也将所有 %ld 替换为 %lf。

这是与输入流缓冲区有关的问题。您也可以使用 fflush(stdin); 在第一次扫描以清除输入缓冲区之后，第二次 scanf 将按预期工作。另一种方法是放置一个 getch(); 或 getchar(); 在第一个 scanf 行之后起作用。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-11-23T10:05:37.830

使用`%lf`将帮助您解决这个问题。

采用 ：

```
scanf("%lf",&doub) 
```

# tomcat - Tomcat JDBC 与 DataSource 领域

> ID：13730192
> 
> 赞同：4
> 
> 时间：2012-12-05T18:43:34.177
> 
> 标签：tomcat, digest-authentication, jdbcrealm

对于`testapp`web.xml 中包含以下内容的 webapp（除其他外）

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>My JSP</web-resource-name>
        <url-pattern>*.secured</url-pattern>
        <url-pattern>/login</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>

    <auth-constraint>
        <role-name>mobileusers</role-name>
    </auth-constraint>
    <!--
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
    -->
</security-constraint>

<login-config>
    <auth-method>DIGEST</auth-method>
    <realm-name>Identity</realm-name>
</login-config>

<security-role>
    <description>
        No Description
    </description>
    <role-name>mobileusers</role-name>
</security-role> 
```

考虑以下两个 Tomcat Realm 配置：

**配置 1 - JDBC 领域：**

在`.../webapps/testapp/META-INF/context.xml`

```
<Realm  className="org.apache.catalina.realm.JDBCRealm" 
        driverName="com.mysql.jdbc.Driver"
        connectionName="mysqluser"
        connectionPassword="redacted"
        connectionURL="jdbc:mysql://192.168.1.5/testdb?autoReconnectForPools=true&amp;characterEncoding=UTF-8"
        digest="MD5"
        userTable="Users" 
        userNameCol="name" 
        userCredCol="password"
        userRoleTable="Users" 
        roleNameCol="roleName"
/> 
```

**配置 2 - 数据源领域：**

在`.../webapps/testapp/META-INF/context.xml`：

```
<Realm  className="org.apache.catalina.realm.DataSourceRealm" 
        digest="MD5"
        userTable="Users" 
        userNameCol="name" 
        userCredCol="password"
        userRoleTable="Users" 
        roleNameCol="roleName"
        dataSourceName="jdbc/testDB"
/> 
```

并在`.../conf/context.xml`：

```
<Resource 
    name="jdbc/testDB" 
    auth="Container" 
    type="javax.sql.DataSource" 
    removeAbandoned="true" 
    removeAbandonedTimeout="15" 
    maxActive="5" 
    maxIdle="5" 
    maxWait="7000" 
    username="mysqluser"
    password="redacted"
    driverClassName="com.mysql.jdbc.Driver"
    url="jdbc:mysql://192.168.1.5/testdb?autoReconnectForPools=true&amp;characterEncoding=UTF-8"
    factory="com.mycompany.util.configuration.customfactory"
    validationQuery="SELECT '1';"
    testOnBorrow="true"/> 
```

由于我不清楚的原因，配置 1 对我们有用，但配置 2 不适用。请注意，我们使用配置 2 中的 Context.xml 资源在我们的代码中到处连接到 MySQL，它工作得很好。然而，当一个 tomcat Realm 尝试使用它时，身份验证总是失败，即使它似乎在做与配置 1 相同的事情。

任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T01:16:46.367

假设您有 DataSource 在其他地方工作（例如，在 Servlets 中），您所要做的就是添加`localDataSource="true"`到 Realm 声明中，这样 Realm 是：

```
<Realm  className="org.apache.catalina.realm.DataSourceRealm"
    localDataSource="true"
    digest="MD5"
    userTable="Users" 
    userNameCol="name" 
    userCredCol="password"
    userRoleTable="Users" 
    roleNameCol="roleName"
    dataSourceName="jdbc/testDB"
/> 
```

至少，这对我有用。

完美地说，100% 清楚，尽管有这个参数的名称，但如果你不想，你不需要将 DataSource 放在 Webapp 的 context.xml 中；服务器的上下文 XML 可以正常工作。

# vb.net - 如何在 Visual Studio.NET (VB.NET) 中嵌入 Flash Player

> ID：13730195
> 
> 赞同：1
> 
> 时间：2012-12-05T18:43:48.357
> 
> 标签：vb.net, flash

如何在 Visual Studio.NET (VB.NET) 中使用 Adob​​e Flash Player 我有一个 SWF 文件将由 Micromedia Flash Player 创建，当我想在 Visual Studio Web 窗体中使用这个 SWF 文件时，我看不到组件在网站中使用我的 SWF 文件的工具箱 如何在 VB.NET 中使用我的 SWF 文件？哪个工具？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:19:15.563

如果您正在创建一个 WinForms 应用程序，并且您希望它在一个表单上，那么您最好的选择可能是使用一个 WebBrowser 控件并基本上创建您想要在其中显示为 HTML 的网页。

# css - 在css3中计时动画

> ID：13730206
> 
> 赞同：0
> 
> 时间：2012-12-05T18:44:18.237
> 
> 标签：css, animation, hover

我有以下代码：html：

```
<html>
<head>
  <link rel="stylesheet" type="text/css" href="StyleSheet.css">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <title>What</title>
    <style type="text/css">
    </style>

</head>
<body dir="rtl">
    <div id="page">
        <div id="bothcontainer">
            <div id="littlebox1" class="littlebox1sentence">put your mouse here</div>
            <div id="littlebox1" class="triangle">
                <div class="triangleborder"></div>
            </div>
        </div>
        <div id="box1">
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.
            Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.
        </div>
    </div>

</body>
</html> 
```

和 CSS3：

```
#page {
    width: 900px;
    padding: 0px;
    margin: 0 auto;
    direction: rtl;
    position: relative;
}

#box1 {
    position: relative;
    width: 500px;
    border: 1px solid black;
    box-shadow: -3px 8px 34px #808080;
    border-radius: 20px;
    box-shadow: -8px 5px 5px #888888;
    right: 300px;
    top: 250px;
    text-align: justify;
    -webkit-transition: all 1s;
    font-size: large;
    color: Black;
    padding: 10px;
    background: #D0D0D0;
    opacity: 0;
}

@-webkit-keyframes myFirst {
    0% {
        right: 300px;
        top: 160px;
        background: #D0D0D0;
        opacity: 0;
    }

    100% {
        background: #909090;
        right: 300px;
        top: 200px;
        opacity: 1;
    }
}

#littlebox1 {
    top: 200px;
    position: absolute;
    display: inline-block;
}

.littlebox1sentence {
    font-size: large;
    padding-bottom: 15px;
    padding-top: 15px;
    padding-left: 25px;
    padding-right: 10px;
    background: #D0D0D0;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
    -webkit-transition: background .25s ease-in-out;
    border-bottom: 2px solid red;
    border-right: 2px solid red;
    border-top: 2px solid red;
    -webkit-transition-property:color, background; 
-webkit-transition-duration: .25s, .25s; 
-webkit-transition-timing-function: linear, ease-in;

}

#bothcontainer:hover ~ #box1 {
    -webkit-transition: all 0s;
    background: #909090;
    right: 300px;
    top: 200px;
    -webkit-animation: myFirst .75s;
    -webkit-animation-fill-mode: initial;
    opacity: 1;
}

#bothcontainer:hover .littlebox1sentence {
    background: #909090;
    color:#D0D0D0
}

#bothcontainer:hover .triangle {
    border-right: 20px solid #909090;
}

.triangle {
    position: relative;
    width: 0;
    height: 0;
    border-right: 20px solid #D0D0D0;
    border-top: 26px solid transparent;
    border-bottom: 25px solid transparent;
    right: 186px;
    -webkit-transition: border-right .25s ease-in-out;
    margin-top: 2px;

}

.triangleborder {
    position: absolute;
    width: 0;
    height: 0;
    border-right: 22px solid red;
    border-top: 28.5px solid transparent;
    border-bottom: 27.5px solid transparent;
    right: -20px;
    -webkit-transition: border-right .25s ease-in-out;
    top: -28px;
    z-index: -15656567650;

} 
```

**现场示例：http://jsfiddle.net/VhGBv/**

如您所见，当我将鼠标放在灰色框上时，背景和字体颜色*不会同时发生变化*。我的问题是：如何对动画进行计时，以便当我将鼠标放在灰色句子上时，箭头和灰色框会*同时*（一起）改变颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:51:30.113

固定在这里：http: [//jsfiddle.net/VhGBv/1/](http://jsfiddle.net/VhGBv/1/)

我改变了这一行：

```
.littlebox1sentence {
    ...
    -webkit-transition-timing-function: linear, ease-in-out;
} 
```

# ajax - Bootstrap 崩溃不适用于通过 ajax 加载的内容

> ID：13730207
> 
> 赞同：6
> 
> 时间：2012-12-05T18:44:19.187
> 
> 标签：ajax, twitter-bootstrap, collapse

我是新手。我面临一个我无法弄清楚原因的问题。如果我动态加载内容，`collapse`则无法正常工作。它没有像[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)`in`那样在悬停时添加类，但如果从 dom 复制相同并添加为静态元素，则该方法正在工作。我正在使用加载内容和初始化事件的函数。知道为什么内容不会在悬停时扩展。`html``ajax``complete``ajax`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T14:17:08.960

`$(".collapse").collapse();`动态加载内容后调用。

# perl - Perl 语法错误 - ““} else”附近的第 15 行语法错误”

> ID：13730208
> 
> 赞同：2
> 
> 时间：2012-12-05T18:44:22.697
> 
> 标签：perl

我在 Perl 中有一个**非常**烦人的问题。这是我的代码：

```
if $password eq "a_secret";
{
    foreach $var (sort(keys(%ENV))) {
        $val = $ENV{$var};
        $val =~ s|\n|\\n|g;
        $val =~ s|"|\\"|g; 
        print '${var}=\"${val}\"\n'
    };
}
else
{
print "<html><head><title>Unauthorized</title></head><h1>Unauthorized</h1><body>You do not have permission to access \printenv\printenv.pl on this server.</body></html>";
} 
```

当我执行此代码时，我收到以下错误消息：

```
syntax error line 10 near "else" 
```

有任何想法吗？请注意，一些代码已被删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T18:48:59.520

要评论的东西太多了。错误在第一行：你在条件周围缺少括号，`;`最后是多余的。

下一步：`\n`在单引号字符串中写入`'...'`不会满足您的要求。

然后，不是真的错了，但也不是很好的风格：`print "..." } ;`应该有 the`;`和 the `}`reversed。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T20:34:02.897

```
if ($password eq "a_secret")
{
    foreach $var (sort(keys(%ENV))) {
        $val = $ENV{$var};
        $val =~ s|\n|\\n|g;
        $val =~ s|"|\\"|g; 
        print '${var}=\"${val}\"\n';
    }
}
else
{
print "<html><head><title>Unauthorized</title></head><h1>Unauthorized</h1><body>You do not have permission to access \printenv\printenv.pl on this server.</body></html>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:45:55.957

第一个`if`测试子句必须用`(`and括起来`)`。此外，您不能`;`在`if`第 1 行的 - 条件之后。

# java - 在 android 项目中包含非 android 项目（lib 或 classpath）

> ID：13730212
> 
> 赞同：0
> 
> 时间：2012-12-05T18:44:37.343
> 
> 标签：java, android, ant, classpath

我正在尝试在 Eclipse 中将非 android 项目导入到我的 android-project 中。我已经尝试了一切，但没有任何效果。

我已将项目添加到我的类路径中-> noclassdeffounderror 我从我的非android项目中创建了一个.jar 并将其移至“libs”-> 相同的错误我尝试“导入外部 jar”-> 相同错误

我已经搜索了整个互联网以完成此操作，但我不知道，为什么我仍然在运行时收到此异常。

希望任何人有一个好主意:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:06:17.143

进入项目的`Properties`，选择`Java Build Path`，选择选项卡，然后选中您包含`Order and Export`的文件旁边的框。`JAR`

# .net - WinPhone7 OData 应用程序在带有 System.Data.Services.Client 的 WinPhone8 上崩溃

> ID：13730217
> 
> 赞同：0
> 
> 时间：2012-12-05T18:45:00.073
> 
> 标签：.net, windows-phone-7, odata, windows-phone-8

我有一个在 Windows Phone 8 设备上崩溃的 Windows Phone 7 应用程序。这发生在相同的 XAP 上（通过在市场上下载应用程序和从本地计算机部署来断言）。初步调查显示 System.Data.Services.Client.DataServiceCollection 在 WP8 上的常见操作（例如 Select）上抛出 NotSupportedExceptions，但在 WP7 上没有。

该应用程序面向 Windows Phone 7.1 OS 目标。

据我所知，WP7 应用程序不能选择退出 WP8 市场，这意味着当我们使用 WP8 版本的应用程序时，此类兼容性问题无法轻易解决。

有没有人在 Windows Phone 上看到过 OData 提供程序的这种行为？如果是这样，我缺少任何解决方案、解决方法或明显的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:26:40.897

您是否安装[了适用于 Windows Phone 应用程序的 OData 客户端工具](http://www.microsoft.com/en-us/download/details.aspx?id=35461)？如果不行，可以安装客户端后试试吗？

# java - 录制 URL 返回的音频

> ID：13730219
> 
> 赞同：1
> 
> 时间：2012-12-05T18:45:09.337
> 
> 标签：java, url, audio, javasound

我有一个返回音频的 URL（以及少量文本）。如何使用 Java 录制此音频？

我尝试使用 URL 和 BufferedReader 类，但 BufferedReader 只返回文本。

```
URL audioURL = new URL("http://goo.gl/O8bi6"); 
```

这是 BBC 尼泊尔广播服务 uri。我想记录下来供个人使用。`jason-sperske`正如使用`ByteArrayOutputStream`,所指出的那样，我已经尝试过`FileOutputStream`。仍然没有运气。

如何区分音频内容和二进制数据中的文本？

提前致谢。

# asp.net - 使用 asp.net、vb.script 将图像上传到网页并使用 access 作为我的数据库

> ID：13730220
> 
> 赞同：-3
> 
> 时间：2012-12-05T18:45:10.193
> 
> 标签：asp.net, vbscript

有什么帮助吗？我的代码如下；

```
Imports System.IO
Imports System.Data
Imports System.Data.SqlClient 
Imports System.Data.OleDb

Partial Class Gallery
    Inherits System.Web.UI.Page

    Dim dbInsert As New OleDb.OleDbCommand
    Dim dbConnect As New OleDb.OleDbConnection
    Dim Line As String = Environment.NewLine
    Dim Message As String
    Dim dt As New DataTable()

    Protected Sub BtnUpload_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles BtnUpload.Click

        Dim connection As New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " & _
       Server.MapPath("App_Data\Web.accdb"))

        If FileUpload1.PostedFile IsNot Nothing Then
            Dim FileName As String = Path.GetFileName(FileUpload1.PostedFile.FileName)
            Dim Picture As String = TxtPicturename.Text

            'Save files to disk
            FileUpload1.SaveAs(Server.MapPath("GalleryPics/" & FileName))

            Dim strQuery As String = "insert into Picture (FileName, FilePath)" _
             & " values(@FileName, @FilePath)"

            Dim cmd As New SqlCommand(strQuery)
            cmd.Parameters.AddWithValue("@FileName", FileName)
            cmd.Parameters.AddWithValue("@FilePath", "Gallery/" & FileName)
            cmd.CommandType = CommandType.Text

            Dim sql As String = "INSERT INTO Picture (PictureID, Picturename, CategoryNo) VALUES ('" & TxtPicturename.Text & "','" & FileUpload1.FileName & "');"
            dbInsert.CommandText = sql
            dbInsert.CommandType = CommandType.Text
            dbInsert.Connection = connection
            dbInsert.ExecuteNonQuery()
            MsgBox("Pictue successfully uploaded for " + Line + TxtPicturename.Text)

        End If

    End Sub
    Function checkFiletype(ByVal filename As String) As Boolean
        Dim ext As String = Path.GetExtension(filename)
        Select Case ext.ToLower()
            Case ".gif"
                Return True
            Case ".prg"
                Return True
            Case ".jpg"
                Return True
            Case "jpeg"
                Return True
            Case Else
                Return False
        End Select
    End Function

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:29:36.847

在尝试运行查询之前，您还没有打开与数据库的连接。

`dbConnect.Open()`在尝试使用您的查询之前放置。

IE

```
 dbConnect.Open() ''<------ HERE
            Dim cmd As New SqlCommand(strQuery)
            cmd.Parameters.AddWithValue("@FileName", FileName)
            cmd.Parameters.AddWithValue("@FilePath", "Gallery/" & FileName)
            cmd.CommandType = CommandType.Text 
```

完成后不要忘记关闭它... IE

```
 dbInsert.ExecuteNonQuery()
            dbConnect.Close() '' <--------- HERE 
```

**更新**

有关插入的一个很好的示例，请参阅本教程。 [http://idealprogrammer.com/net-languages/code-samples/vbnet-aspnet-sql-command-insert-statement-source-code/](http://idealprogrammer.com/net-languages/code-samples/vbnet-aspnet-sql-command-insert-statement-source-code/)

# jquery - 从 jQuery ajax 调用传递到 Ruby 控制器的数据对象的名称是什么？

> ID：13730223
> 
> 赞同：0
> 
> 时间：2012-12-05T18:45:13.007
> 
> 标签：jquery, ruby, ajax, ruby-on-rails-3

这是 .ajax 调用。该变量`questions`是一个 JSON 对象：

目的`{question_1: "3", question_2: "6", question_3: "9", question_4: "15", question_5: "12"}`

```
 $.ajax({
      type: "POST",
      url: "/save",
      data: questions,
      dataType: 'json',
      contentType: 'application/json',
      success: function (data) {
        alert('success');
      }
      }); 
```

我的红宝石控制器。

```
def save
 # How do I access the data object?
end 
```

我只是做一个 params[:data] 或 params[:questions] 吗？

谢谢，虽然我发现了与此类似的其他问题，但没有人提到实际参数名称的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:47:37.610

这就是你让问题变得可变的任何东西。如果您包含了根对象

```
{"question": { ... }} 
```

它可以在`params[:question]`

否则，属性将`params`与 Rails 添加的任何内容和 URL 属性一起包含在哈希的根中。

顺便说一句，我希望一个名为的变量中的数据`questions`看起来像这样：

```
{ "questions": [{ ... }, { ... }]} 
```

# android - 在android中创建布局

> ID：13730226
> 
> 赞同：0
> 
> 时间：2012-12-05T18:45:29.230
> 
> 标签：android, xml, android-layout

我试图设置这种布局：水平显示 3 张图像，下一行显示在这些图像下方的数字。

这是想要的布局： ![在此处输入图像描述](../Images/4acdcd3cd656c77bc986d276cc5a0ccd.png) 这是我当前的 xml 布局，可以很好地显示图像，但是图像下方的数字不正确，我该怎么做？（您可以将其复制到新项目并观看布局）布局： http: [//pastebin.com/aYb8eeQn](http://pastebin.com/aYb8eeQn)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T19:05:57.300

干得好。

我使用了一个水平 LinearLayout `android:weightSum="3"`，每个孩子都使用`android:layout_weight="1"`. 另请注意，childred 的宽度为`android:layout_width="0dip"`.

第二张图片比其他两张大得多。

![在此处输入图像描述](../Images/e4a6d29c766544d36070df7f381be9e9.png)

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="100dip"
        android:background="#333"
        android:orientation="horizontal"
        android:weightSum="3" >

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:background="#fff"
            android:gravity="center"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:scaleType="centerInside"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="1" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:background="#fff"
            android:gravity="center"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:scaleType="centerInside"
                android:src="@drawable/wonders_of_zen" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="2" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:background="#fff"
            android:gravity="center"
            android:orientation="vertical" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:scaleType="centerInside"
                android:src="@drawable/ic_launcher" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="3" />
        </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:59:41.750

只需`LinearLayout`在水平`LinearLayout`. 像这样的东西（不完整，只是一个大纲）：

```
<LinearLayout
    android:orientation="horizontal">
    <LinearLayout
        android:layout_width="0"
        android:layout_weight="1"
        android:orientation="vertical">
        <ImageView /> <!-- first image -->
        <TextView /> <!-- 1 -->
    </LinearLayout>
    <!-- Repeat the above LinearLayout as many times as you like -->
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:51:34.247

你必须花时间使用一个巨大的RelativeLayout。我将向您展示两张图片，只需继续扩展模式即可。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >

   <ImageButton
        android:id="@+id/img1"
        android:onClick="myClickHandler"
        android:layout_marginLeft="5dp"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/emptystar" />
   <ImageButton
        android:id="@+id/img2"
        android:onClick="myClickHandler"
        android:layout_marginLeft="5dp"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/emptystar" 
        android:layout_toLeftOf="@+id/img1"
        android:alignParentRight="True"/>
   <TextView
        android:textStyle="bold"
        android:text="1"
        android:layout_toLeftOf="@id/img1"
        android:textSize="48sp"
        android:layout_marginLeft="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/img1"
        android:layout_alignRight="@+id/img1"
        android:layout_alignLeft="@+id/img1"
        android:layout_alignParentBottom="true"/>
   <TextView
        android:textStyle="bold"
        android:text="2"
        android:textSize="48sp"
        android:layout_marginLeft="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_below="@+id/img2"
        android:layout_alignRight="@+id/img2"
        android:layout_alignLeft="@+id/img2"
        android:layout_alignParentBottom="true"/>
</RelativeLayout 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:07:07.247

别着急，试试如下

首先根据您的需要创建内部布局，

```
<LinearLayout android:layout_width="wc" ...height="wc" orientation="vertical">
//Here place your image view
<ImageButton ..width="48dp" ..height="48dp" />

//Then place your text view
<TextView ..width="match_parent" ..height="wc" ..gravity="center" />
</LinearLayout> 
```

在相对布局中复制此布局并提供适当的位置。否则将重复的布局放置在另一个线性布局（默认方向）中，如下所示

```
<LinearLayout ....>
         <LinearLayout ...... orientation="vertical">
             <ImageButton ...... />
             <TextView ......... />
         </LinearLayout>

         <LinearLayout ...... orientation="vertical">
             <ImageButton ...... />
             <TextView ......... />
         </LinearLayout>

         <LinearLayout ...... orientation="vertical">
             <ImageButton ...... />
             <TextView ......... />
         </LinearLayout>

</LinearLayout> 
```

# css - 响应式设计首先会加载什么？

> ID：13730230
> 
> 赞同：0
> 
> 时间：2012-12-05T18:45:43.430
> 
> 标签：css, mobile, responsive-design, media-queries

我刚刚读完 yiibu 关于诺基亚响应式网站开发的幻灯片，其中一个更大的要点似乎是首先关注移动设备，然后是台式机和其他更大更快的平台。( [http://www.slideshare.net/yiibu/pragmatic-responsive-design](http://www.slideshare.net/yiibu/pragmatic-responsive-design) ) 不仅仅是在规划阶段，而是从字面上开发您的响应式设计，因为最初的样式，没有应用媒体查询，将是设计适用于您最小的平台，具有最低的功能。（旧手机，取决于你的听众）这与我最初想做的事情（以及我所看到的，其他人通常也会做的事情）相反。

基本原理是，这种方法将阻止带宽较低的移动设备上的人们下载额外的脚本和大图像，方法是最初只下载最小设备所需的脚本和图像，然后根据大小和预测加载更多、更多设备的功能，最终将最大的负担放在最大的设备（笔记本电脑和台式计算机）上。--- 这与我一直在做的相反，它是为桌面设计，然后添加媒体查询以优化移动设备。

* * *

我的问题是，我是否需要先为移动设备设计，然后添加媒体查询以针对具有更多功能的大型设备进行优化，以防止下载不会在移动设备上使用的大图像的负担？

.....或者我可以在调用专注于更大浏览器/设备的样式表之前使用单独的样式表并调用移动样式表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:52:34.580

你先打电话给谁的顺序不重要。媒体查询本身就是一堆*if-else*基于您放置在其中的标准（设备、方向、宽度等）。因此，首先或最后添加它们并不意味着手机会考虑桌面浏览器的样式表（示例）。

但是，您应该做的是在所有设备都可读的基本样式表上拥有跨所有设备一致的基本内容（例如排版、字体大小、元素的背景颜色、文本颜色）。

这使得文件的实际读取更小，因为将根据屏幕的实际大小为边距、填充和宽度制作特定的样式表。

最后但并非最不重要的一点是，至于您是否应该首先为移动设备设计体验，这取决于您，您的工作方式以及其他方式。我知道我没有。我首先为桌面设计，然后一路向下。我更喜欢这个。

# django - Django：在页面中缓存除用户身份验证之外的所有内容

> ID：13730232
> 
> 赞同：4
> 
> 时间：2012-12-05T18:45:46.767
> 
> 标签：django, caching

我正在试验各种 Django 1.3 缓存方法以用于我们的登录页面。此页面包含多个数据库查询以及用户身份验证的结果。到目前为止，性能最好的解决方案是使用[@cache_page 装饰器](https://docs.djangoproject.com/en/1.3/topics/cache/#the-per-view-cache)来缓存整个视图函数响应。问题是用户身份验证也会被缓存。

我可以在缓存中为每个用户创建一个键，但这似乎很浪费；一遍又一遍地缓存相同的登录页面，唯一的区别是用户的身份验证。除了身份验证之外，我还使用了[模板片段缓存](https://docs.djangoproject.com/en/1.3/topics/cache/#template-fragment-caching)和[低级缓存](https://docs.djangoproject.com/en/1.3/topics/cache/#the-low-level-cache-api)，但性能远不及@cache_page 装饰器方法。

有没有办法在没有大量基于用户的冗余缓存的情况下获得 @cache_page 的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:43:42.030

查看这篇博文：http: [//www.holovaty.com/writing/django-two-phased-rendering/](http://www.holovaty.com/writing/django-two-phased-rendering/)

基本上，该技术是将用户特定的段包装在模板标记中，以防止模板引擎呈现它们，然后缓存，然后重新呈现缓存的输出以填写用户详细信息。

Django 1.5 包含一个名为的标签[`verbatim`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#verbatim)，可以用来代替`raw`帖子中的自定义标签；不过，您仍然需要自定义`CachedTemplateMiddleware`或等效项。

# php - codeigniter 数据库类 JOIN USING

> ID：13730236
> 
> 赞同：0
> 
> 时间：2012-12-05T18:45:55.047
> 
> 标签：php, mysql, codeigniter

我该如何使用 `left JOIN Table2 using(table.id)`？

我的代码示例

```
$this->db->select('visits.*,patients.name,workers.dr_name,time(visits.time)');
$this->db->from('visits');
//The next join = LEFT JOIN workers ON visits.worker_id=workers.worker_id
$this->db->join('workers','visits.worker_id=workers.worker_id','left');//WORKING
//The next join = JOIN `patients` ON patient_id --> i want it JOIN patients USING(patient_id)
$this->db->join('patients','patient_id','USING');//NOT WORKING 
```

我搜索了每一个，但找不到解决方案，所以我打开并尝试在 db_active_rec.php 中编辑 JOIN 函数

/system/database/DB_active_rec.php

并找到了加入功能

```
public function join($table, $cond, $type = '')
    {
        if ($type != '')
        {
            $type = strtoupper(trim($type));

            if ( ! in_array($type, array('LEFT', 'RIGHT', 'OUTER', 'INNER', 'LEFT OUTER', 'RIGHT OUTER')))
            {
                $type = '';
            }
            else
            {
                $type .= ' ';
            }
        }

        // Extract any aliases that might exist.  We use this information
        // in the _protect_identifiers to know whether to add a table prefix
        $this->_track_aliases($table);

        // Strip apart the condition and protect the identifiers
        if (preg_match('/([\w\.]+)([\W\s]+)(.+)/', $cond, $match))
        {
            $match[1] = $this->_protect_identifiers($match[1]);
            $match[3] = $this->_protect_identifiers($match[3]);

            $cond = $match[1].$match[2].$match[3];
        }

        // Assemble the JOIN statement
            $join = $type.'JOIN '.$this->_protect_identifiers($table, TRUE, NULL, FALSE).' ON '.$cond;  

        $this->ar_join[] = $join;
        if ($this->ar_caching === TRUE)
        {
            $this->ar_cache_join[] = $join;
            $this->ar_cache_exists[] = 'join';
        }

        return $this;
    } 
```

尝试编辑“//组装JOIN语句”下的部分并放置ifcondition来检测USING然后相应地调整查询但失败..**史诗失败**

有人可以帮忙吗？我怎样才能编辑这个函数，以便它在加入查询中使用 USING ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:49:57.347

从[手册](http://ellislab.com/codeigniter/user-guide/database/active_record.html)：

```
$this->db->join(); 
```

允许您编写查询的 JOIN 部分：

```
$this->db->select('*');
$this->db->from('blogs');
$this->db->join('comments', 'comments.id = blogs.id');

$query = $this->db->get();

// Produces: 
// SELECT * FROM blogs
// JOIN comments ON comments.id = blogs.id 
```

如果您需要在一个查询中进行多个联接，则可以进行多个函数调用。

如果您需要特定类型的 JOIN，您可以通过函数的第三个参数指定它。选项有：左、右、外、内、左外和右外。

```
$this->db->join('comments', 'comments.id = blogs.id', 'left');

// Produces: LEFT JOIN comments ON comments.id = blogs.id 
```

# android - 可绘制图像给出“找不到资源..”但它在文件夹中

> ID：13730240
> 
> 赞同：1
> 
> 时间：2012-12-05T18:45:58.913
> 
> 标签：android, image, button, resources, drawable

我在slider_button.xml 中有以下XML：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" 
          android:state_pressed="false" 
          android:drawable="@android:drawable/button9patch" />
    ...
</selector> 
```

`android:drawable="@android:drawable/button9patch"`得到错误：

> 错误：找不到与给定名称匹配的资源（在“drawable”处，值为“@android:drawable/button9patch”）。

但是我认为我将文件放在正确的位置（我什至将它放在所有可绘制的文件夹中以确保）：

![在此处输入图像描述](../Images/a4e486d560468530895441c132ef653b.png)

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T18:48:11.430

像这样改变

```
 android:drawable="@drawable/button9patch" 
```

# windows-8 - 如何调试在客户机器上崩溃的 Windows 应用商店应用程序？

> ID：13730250
> 
> 赞同：3
> 
> 时间：2012-12-05T18:46:40.950
> 
> 标签：windows-8, windows-runtime, windbg, windows-store-apps, windows-store

我收到了一位客户的支持电子邮件，说他的应用程序在启动时崩溃了，他收到的只是一条消息，例如：

> *（应用名称）*遇到问题 您可以向 Microsoft 发送有关问题所在的信息，以帮助改进此应用。
> 
> 将发送到 Microsoft C:\Users\User_Name\AppData\Local\Temp\WER####.tmp.appcompat.txt C:\Users\User_Name\AppData\Local\Temp\WER#### 的文件。 tmp.hdmp

我想——微软不会用我愚蠢的应用程序真正帮助他们。他们应该将转储文件发送给我进行调试，但是怎么做呢？我从崩溃的应用程序中获得的示例转储文件为 90MB，压缩后仍为 30MB。如何调试应用程序？有没有一种简单的方法可以从客户那里获取这些转储文件？这些也会在您从崩溃的应用程序窗口切换到桌面后立即被删除，除非您让它在快照视图中运行（崩溃）并按 WinKey+D。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:46:40.950

似乎 Windows 开发人员仪表板有一个选项可以为最常见的崩溃获取迷你转储文件，这可以帮助找到问题（假设您的客户遇到了最常见的崩溃问题之一，或者实际上很少有问题导致您的应用崩溃，所有这些都在那里）。你只需要去：

仪表板/应用程序/报告/质量/最常见的崩溃

在那里，您可以从那里下载包含迷你转储的 cab 文件。您可以通过将 cab 重命名为 zip 或使用提取 cab 档案的工具来提取文件。然后只需在 WinDbg 中打开转储文件并开始调试！

# asp.net-mvc - 仅需要使用 ValidationMessageFor，其他所有内容使用 ValidationSummary

> ID：13730252
> 
> 赞同：0
> 
> 时间：2012-12-05T18:46:44.477
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4

使用 ASP.Net MVC 4，是否可以使用 ValidationMessage() 仅显示必填字段的“*”并使用 ValidationSummary() 显示所有验证消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:08:45.233

您可以使用[ValidationMessage 重载](http://msdn.microsoft.com/en-us/library/dd504927%28v=vs.108%29.aspx)：

```
@Html.ValidationMessage("propName", "*") 
```

要显示字段错误，请使用重载的[构造函数](http://msdn.microsoft.com/en-us/library/ee839469%28v=vs.108%29.aspx)：

```
@Html.ValidationSummary(false) 
```

# javascript - JQuery mobile v1.2 javascript事件在弹出窗口中不起作用

> ID：13730262
> 
> 赞同：2
> 
> 时间：2012-12-05T18:47:17.473
> 
> 标签：javascript, html, jquery-mobile

我正在使用 JQuery Mobile 1.2 和 php 开发 Web 应用程序。在个人资料页面上，我有一个弹出窗口要求用户确认注销。我想要做的是用单击事件拦截该按钮，以通过 ajax 请求处理注销。

我的所有项目页面中都包含一个 custom.js 文件。该应用程序在帐户页面中加载。我知道它正在加载并在 ajax 导航中工作。当我在 custom.js 中包含此代码时：

```
$("#perfil").live('pageshow',function(event){
    alert('This page was just enhanced by jQuery Mobile!'); 
}); 
```

当显示个人资料页面时，我会收到警报。问题是点击功能。

当我包括这个时：

```
$("#perfil").live('pageshow',function(event){
    alert('This page was just enhanced by jQuery Mobile!'); 

    $('#logoutButton').click(function(){
        $('#output').html('Logging Out...');
        $.get("api/logout",function(data){
            if(data.success) {
                window.location = "index"
            }
            else{
                $('#output').html('Logout failed. Try again');
            }
            }, "json");
    });

}); 
```

行为很奇怪。当我从主页导航到个人资料页面时，我收到了警报。但是按钮没有反应。但是，当我刷新（或最初从配置文件页面加载应用程序）时，按钮行为正确并运行 javascript 注销功能。

这是html按钮的代码：

```
<a id="logoutButton" data-role="button" data-icon="check" 
      data-inline="true" data-theme="e">Si, finalizar.</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:09:09.253

您的*个人资料页面*上的 custom.js没有实际加载（更多内容见下文），因此当您绑定 click 事件时，您的按钮在 DOM 中不存在，您可以通过使用事件委托来解决此问题例子

```
$(document).on('click', '#logoutButton', function(){
        $('#output').html('Logging Out...');
        $.get("api/logout",function(data){
            if(data.success) {
                window.location = "index"
            }
            else{
                $('#output').html('Logout failed. Try again');
            }
            }, "json");
    }); 
```

现在您的 custom.js 没有被加载的原因是，默认情况下，当您在 jQuery Mobile 中加载页面时，[默认行为](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)是仅`data-role="page"`通过 ajax 加载 div 并将其附加到当前页面的 DOM。要实现的重要部分是只有*div 页面*被加载，而**不是**该页面上的任何其他资源。

如果您想要加载单独页面上的自定义脚本，您需要将其包含在 div`data-role="page"`包装器中。您还可以通过使用`data-ajax="false"`链接上的属性（或者`rel="external"`如果它是不同的域）来告诉 JQM 完全加载没有 ajax 的页面。

顺便说一句，您应该考虑使用[.on](http://api.jquery.com/on/)而不是`.live`jQuery 1.7`.live`已[贬值](http://api.jquery.com/live/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:35:45.600

在 JQM 中，这一切都取决于您的数据如何初始化以及页面的结构。

加载主页时，所有脚本都会初始化一次，并为“Ajax”（如响应和感觉）而缓存。

如果您的主页和个人资料页面采用多页格式，则您的单击按钮不会成为问题，因为脚本已初始化一次。

或者，如果您在单个页面中，则从主页面到个人资料页面的 rel="external" 将起作用。外部链接将强制 JQM 发出新的 HTTP 请求；但是，您会做松散的页面过渡效果。

我相信更好的架构是创建单个 JQM 页面并使用注销按钮注销作为绑定功能。

*如何绑定你的点击功能：

```
$('#foo').bind('click', function() {
  alert('User clicked on "foo."');
}); 
```

[来源](http://jquerymobile.com/demos/1.0a1/experiments/api-viewer/docs/bind/index.html)

# c# - 在 C# 中同时朗读和显示消息框

> ID：13730263
> 
> 赞同：0
> 
> 时间：2012-12-05T18:47:22.980
> 
> 标签：c#, speech-recognition

我正在尝试构建一个显示消息框的应用程序，该消息框在说出音素的确切时刻显示音素。问题是这些消息框在演讲结束后等待显示音素。我怎样才能同时做这两件事？

```
void sre_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{  
    speech = new SpeechSynthesizer();      
    speech.SetOutputToDefaultAudioDevice();
    speech.SpeakAsync(e.Result.Text);
    speech.PhonemeReached += speech_PhonemeReached;
}
void speech_PhonemeReached(object sender, PhonemeReachedEventArgs e)
{
    if (new[] {"a͡i","o"}.Contains(e.Phoneme))
       MessageBox.Show(e.Phoneme);
} 
```

我还在学习 c#，我不太确定如何使用线程，但这是我与语音识别器相关的代码部分：

```
Thread q = new Thread( ()=> sre.SpeechRecognized += (s, args) =>
    {
         foreach (RecognizedPhrase phrase in args.Result.Alternates)
         {
            if (phrase.Confidence > 0.9f)
                sre_SpeechRecognized(s, args);
         }
    });
q.Start(); 
```

希望任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:54:53.230

在它自己的线程中运行语音识别器，并使用 Invoke 在主线程上显示消息框。

```
void speech_PhonemeReached(object sender, PhonemeReachedEventArgs e)
{
    if (new[] {"a͡i","o"}.Contains(e.Phoneme))
       this.Invoke(new Action(() => { MessageBox.Show(this, e.Phoneme); }));
} 
```

# actionscript-3 - youtube api 播放器的 Adob e air 3+ 安全沙盒违规

> ID：13730269
> 
> 赞同：1
> 
> 时间：2012-12-05T18:47:45.270
> 
> 标签：actionscript-3, air, adobe, youtube-api

我正在尝试将 chromeless youtube api 播放器带入 adobe air 应用程序，但它不断抛出安全沙箱违规错误，这足以破坏程序（听众暂停和补间休息）。有没有办法允许 adobe air 应用程序的域？我一直在四处寻找，并找到了常规 swfs 的解决方案，但找不到任何空气。据说空气允许一切，但我仍然经常出错。

任何人都知道在使用 youtube api 时如何防止 adobe air 中的安全沙箱违规行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T12:33:41.350

使用以下代码捕获错误...把它放在开始

```
try {Security.allowDomain("*");}catch (e) { }; 
```

# c# - ASP.NET MVC 和实体框架 - 列表作为属性

> ID：13730271
> 
> 赞同：1
> 
> 时间：2012-12-05T18:47:50.550
> 
> 标签：c#, entity-framework

使用实体框架，我应该如何从对象列表中加载对象？例子。

```
public class Phone
{
    public int Id { get; set; }
    public string Type { get; set; }
    public Corporation Corp { get; set; }
}

public class Corporation 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Phone> Phones { get; set; }
}

// And now, when I get a Corporation class from entity framework,
//I can't access the Phones. I get an error: The value canot be null.
_db.Corporations.First().Name; // Works
_db.Corporations.First().Phones.First().Type; // Fails 
```

我应该如何加载列表属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:50:55.627

将相关实体标记为虚拟以默认启用延迟加载。

```
class Corporation
{
   public int Id {get;set;}
   public virtual List<Phone> Phones {get;set;}
}
class Phone
{
   public int Id {get;set;}
   public virtual Corporation Corp {get;set;}
} 
```

# asp.net - 将 sqlserver 数据转换为数据透视表

> ID：13730272
> 
> 赞同：-2
> 
> 时间：2012-12-05T18:47:59.650
> 
> 标签：asp.net, gridview, sql-server-2008-r2, pivot, unpivot

```
ID ---- ACCOUNT ---- SECTOR ---- AMOUNT_CURRENCY1 ------ AMOUNT_CURRENCY2
1  --- account1 ---- sector1 --- 100              ------ 200
2  --- account1 ---- sector2 --- 150              ------ 250
3  --- account2 ---- sector1 --- 250              ------ 300
4  --- account2 ---- sector2 --- 90               ------ 180 
```

我需要这样的数据

```
 sector1 ------------ sector2
         | amount1 | amount2 |  amount1 | amount2
Account1 | 100     | 200
Account2 | 250     | 250 
```

我需要将结果放在 asp.net gridview 中进行编辑

我正在使用以下脚本： 1- 获取列：

```
DECLARE @ColumnHeaders VARCHAR(MAX)
SELECT @ColumnHeaders =
  COALESCE(

  @ColumnHeaders + ',[!sector:' + cast(sector_ID as nvarchar)+ ':' + sector_name + ']',
    '[!sector:' + cast(sector_ID as nvarchar)+ ':' + sector_name+ ']'
  )
FROM vw_Transaction
group by sector_ID, sector_name 
```

2-枢轴：

```
DECLARE @TableSQL NVARCHAR(MAX)
SET @TableSQL = N'
  SELECT *
  FROM (SELECT trans_id, account_name, sector_id, sector_name,
  amount_currency1, amount_currency2, ''!sector:'' + cast(sector_ID as nvarchar)+ '':'' + sector_name as col
FROM         dbo.vw_Transaction 
WHERE 
trans_id=' + CAST(@trans_id as varchar) +'
  ) AS PivotData
  PIVOT (
    MAX(amount_currency1)
    FOR col IN (
      ' + @ColumnHeaders + '
    )
  ) AS PivotTable' 
EXECUTE(@TableSQL) 
```

问题，我有 2 个字段需要旋转，amount_currency1 和amount_currency2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:39:16.737

由于您尝试`PIVOT`使用两个值，因此您必须首先`UNPIVOT`使用`AMOUNT_CURRENCY1`and`AMOUNT_CURRENCY2`列：

您需要在查询中添加类似这样的内容：

```
select account, value, sector+ '_'+col as col
from
(
select sector,
  account,
  AMOUNT_CURRENCY1,
  AMOUNT_CURRENCY2
from vw_Transaction
) src
unpivot
(
value
for col in (AMOUNT_CURRENCY1, AMOUNT_CURRENCY2)
) unpiv 
```

然后您的最终查询将与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT DISTINCT ',' 
                      + quotename(t.sec+'_'+c.name)
                    from
                    (
                      select sector sec
                      from vw_Transaction
                    ) t
                    cross apply sys.columns as C
                   where C.object_id = object_id('vw_Transaction') and
                         C.name not in ('id', 'account', 'sector')
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT account,' + @cols + ' from 
             (
               select account, value,
                  sector+ ''_''+col as col
              from
              (
                select sector,
                  account,
                  AMOUNT_CURRENCY1,
                  AMOUNT_CURRENCY2
                from vw_Transaction
              ) src
              unpivot
              (
                value
                for col in (AMOUNT_CURRENCY1, AMOUNT_CURRENCY2)
              ) unpiv
            ) x
            pivot
            (
              max(value)
              for col in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6ff20/25)

结果：

```
|  ACCOUNT | SECTOR1_AMOUNT_CURRENCY1 | SECTOR1_AMOUNT_CURRENCY2 | SECTOR2_AMOUNT_CURRENCY1 | SECTOR2_AMOUNT_CURRENCY2 |
------------------------------------------------------------------------------------------------------------------------
| account1 |                      100 |                      200 |                      150 |                      250 |
| account2 |                      250 |                      300 |                       90 |                      180 | 
```

# jaxb - JAXB：编组时空对象内容会出错

> ID：13730281
> 
> 赞同：2
> 
> 时间：2012-12-05T18:48:26.410
> 
> 标签：jaxb

使用 com.sun.xml.bind jaxb-impl 2.2.6。

我有父母和孩子的对象，我想在马歇尔之后得到的是：

```
<parent/> or <parent></parent> 
```

但我得到的是一个错误，如： 引起：

```
com.sun.xml.internal.bind.api.AccessorException: Object must have some value in its @XmlValue field: com.test.data.Child@.... 
```

这是代码：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {"content"})
@XmlRootElement(name = "child")
public class Child {
    @XmlValue
    protected String content;
    public String getContent() {
        return content;
    }
}
... 
```

然后

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {"child"})
@XmlRootElement(name = "parent")
public class Parent {
    protected Child child;
    public Child getChild() {
        return child;
    }
} 
```

我所做的是（那是因为我希望以后能够“也许”填充孩子的内容）：

```
if(parent.getChild == null)
    parent.setChild(new Child()); 
```

然后，当我尝试编组时，我得到了上面看到的错误。

如果我尝试：

```
if(parent.getChild == null) {
    Child child = new Child();
    child.setContent("");
    parent.setChild(child);
} 
```

然后我得到了预期：

```
<parent><child></child></parent> 
```

而且我可以通过从不在其父对象中设置子对象来获得我想要的东西（所以没有 parent.setChild(...)），但如上所述，它可以节省我提前设置它的时间。

基本上我试图做与帖子完全相反的事情： [JAXB：空字符串不会产生空元素](https://stackoverflow.com/questions/3186621/jaxb-empty-string-does-not-produce-empty-element)

有什么我做错了，或者我没有正确设置吗？

谢谢，

约安

编辑：除了以下任何一种方法之外，还有其他方法吗：
- 稍后将其设置回 null： parent.setChild(null);
- 从一开始就不要将其设置为对象

# c++ - 非整数常量声明 - dev-c++ - 错误：“类型”未在此范围内声明

> ID：13730283
> 
> 赞同：0
> 
> 时间：2012-12-05T18:48:29.700
> 
> 标签：c++, constants, declaration, dev-c++

我在一个类中有一个非整数常量声明。

我不断收到以下信息：

> ComponentClass.h:14：错误：ComponentClass.h:14 的模板声明`const typename ComponentClass<T> ::position NULLPOSITION`
> ：错误：在此范围内未声明位置
> ComponentClass.h:14：错误：预期`;`在数字常量之前

请在下面找到我的代码。

组件类.h

```
#ifndef _ComponentClass_H
#define _ComponentClass_H

template< class T>
class ComponentClass
{
public:

       typedef ComponentClass* position;
       ComponentClass();
};

template<class T>
const typename ComponentClass<T>::position NULLPOSITION=(position)0;

template<class T>
ComponentClass<T>::ComponentClass(){}
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:55:04.510

您似乎正在尝试定义一种“模板变量”，但 C++ 中不存在这样的功能。

`position`您也未能限定您在同一行代码中编写的第二名。

这两个因素是你错误的原因。

* * *

成为类模板实例*的*静态成员*可能*有意义：*`NULLPOSITION`*

 *```
template< class T>
class ComponentClass
{
public:

       typedef ComponentClass* position;
       static const position NULLPOSITION;

       ComponentClass();
}; 
```

但是现在，据我所知，您必须为每个`T`要使用的对象定义它，这很糟糕：

```
template<>
const ComponentClass<int>::position ComponentClass<int>::NULLPOSITION =
    static_cast<ComponentClass<int>::position>(0);

template<>
const ComponentClass<double>::position ComponentClass<double>::NULLPOSITION =
    static_cast<ComponentClass<double>::position>(0); 
```

Instead perhaps make `position` be a bit more clever than a mere pointer type — let it be a proper user-defined type with a default constructor that initialises the object to a "null" state. Function objects work in this way, for example; `std::function<void()>()` is a valid, but *singular* function object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:52:54.303

您看到此错误的原因`position`是不在表达式的范围内`(position)0`。您可以完全省略演员表（即`0`）。如果你想包含它，你需要`typename ComponentClass<T>::position`像在定义中那样使用`NULLPOSITION`.

您似乎正在定义一个静态成员变量，而无需先在类中声明它，如下所示：

```
static const position NULLPOSITION; 
```

然后你可以像现在一样在类之外定义它。然而，为了避免冗余定义，典型的解决方案如下：

```
// ComponentBase.h
class ComponentBase {
public:
    typedef ComponentBase* position;
    static const position NULLPOSITION;
};

// ComponentClass.h
template<class T>
class ComponentClass : public ComponentBase { ... };

// ComponentBase.cpp
const ComponentBase::position ComponentBase::NULLPOSITION = 0; 
```

也就是说，不要让`NULLPOSITION`的每个实例化都成为成员`ComponentClass`，而是让所有`ComponentClass`实例化共享一个定义。*

# ruby - 在 Ruby 中合并嵌套哈希

> ID：13730287
> 
> 赞同：1
> 
> 时间：2012-12-05T18:48:40.687
> 
> 标签：ruby, hash, merge

> **可能重复：**
> [在 ruby​​ 中合并深度哈希](https://stackoverflow.com/questions/11944330/merging-deep-hash-in-ruby)

所以我有一个具有以下结构的哈希（分解到 YAML 以供查看），我想通过第一个键合并/合并/扁平化。

```
- 1001: 
    Twitter: 
      values: 
        "2012-11-29": 24.0
- 1001: 
    Linkedin: 
      values: 
        "2012-11-29": 25.0
- 1001: 
    Facebook: 
      values: 
        "2012-11-29": 6.0

- 2002: 
    Twitter: 
      values: 
        "2012-11-29": 26.0
- 2002: 
    Pinterest: 
      values: 
        "2012-11-29": 1.0 
```

我想尽可能容易地将其归结为以下形式：

```
- 1001
   Twitter:
     values:
       #some values here
   Facebook:
     values:
       #some values
- 2002
   Pinterest:
     values:
   Facebook:
     values: 
```

我已经尝试过以我知道的各种方式压缩、合并、散列哈希，但我能得到的最好的结果是一个新的哈希，它丢弃了它找到的第一个二级值以外的所有值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:07:18.477

这是一个快速的解决方法。

初始哈希：

```
 [
    [0] {
        1001 => {
            "Twitter" => {
                "values" => {
                    "2012-11-29" => 24.0
                }
            }
        }
    },
    [1] {
        1001 => {
            "Linkedin" => {
                "values" => {
                    "2012-11-29" => 25.0
                }
            }
        }
    },
    [2] {
        1001 => {
            "Facebook" => {
                "values" => {
                    "2012-11-29" => 6.0
                }
            }
        }
    },
    [3] {
        2002 => {
            "Twitter" => {
                "values" => {
                    "2012-11-29" => 26.0
                }
            }
        }
    },
    [4] {
        2002 => {
            "Pinterest" => {
                "values" => {
                    "2012-11-29" => 1.0
                }
            }
        }
    }
] 
```

用于`inject`合并它：

```
hash = hash.inject({}) {|f,c| k,v = c.first; (f[k] ||= []) << v; f } 
```

获得这个：

```
{
    1001 => [
        [0] {
            "Twitter" => {
                "values" => {
                    "2012-11-29" => 24.0
                }
            }
        },
        [1] {
            "Linkedin" => {
                "values" => {
                    "2012-11-29" => 25.0
                }
            }
        },
        [2] {
            "Facebook" => {
                "values" => {
                    "2012-11-29" => 6.0
                }
            }
        }
    ],
    2002 => [
        [0] {
            "Twitter" => {
                "values" => {
                    "2012-11-29" => 26.0
                }
            }
        },
        [1] {
            "Pinterest" => {
                "values" => {
                    "2012-11-29" => 1.0
                }
            }
        }
    ]
} 
```

### [工作演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=merging-nested-hashes-in-ruby.rb&run=true)

# jquery - 当表单由提交按钮以外的其他东西提交时，如何触发事件？

> ID：13730293
> 
> 赞同：1
> 
> 时间：2012-12-05T18:48:47.893
> 
> 标签：jquery

考虑以下代码：

**HTML**

```
<a href='#' id='the-button'>Submit</a> 
```

**JavaScript**

```
$("#the-button").click(function(e) {
  e.preventDefault();
  $("#the-form").submit();
});

$("#the-form").submit(function(e) {
  //stuff here
}); 
```

单击“#the-button”并提交表单时，不会触发“提交”事件处理程序。有没有办法将事件处理程序附加到表单，以便即使它没有通过提交按钮提交，它也会触发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:49:54.660

更改`$("#the-form").submit();`为`$("#the-form").trigger('submit');`

编辑：但是，就像@wirey 所说，您发布的代码应该可以工作，除非有其他代码干扰。

# javascript - 如何将 jQuery zclip 与元素一起使用（无 id）

> ID：13730297
> 
> 赞同：1
> 
> 时间：2012-12-05T18:49:02.670
> 
> 标签：javascript, jquery, zclip

我`textarea`在页面上有一个字段列表。我需要能够单击其中任何一个并将单击的内容复制到剪贴板中。由于有很多，我更喜欢将它们称为`textarea`元素而不是给出 ID。

我确实找到了以下有效的代码，但我注意到它不是很敏感。[官方](http://www.steamdev.com/zclip/)的zClip 页面建议在页面加载时加载 zclip，但我不知道如何这样做并且仍然适用于任何给定的`textarea`元素。

```
$(document).ready(function() {
  return $("textarea").click(function() {
    return $("textarea").zclip({
      path: "/assets/ZeroClipboard.swf",
      copy: $(this).text(),
      afterCopy: function() {
        return $(this).select();
      }
    });
  });
}); 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:17:36.893

我认为你的代码应该只是阅读

```
$(document).ready(function() {
    $("textarea").zclip({
        path: "/assets/ZeroClipboard.swf",
        copy: function () {
            return $(this).val();
        },
        afterCopy: function() {
           $(this).select();
        }
    });
}); 
```

*   为什么每次单击文本区域时都要调用 zclip？
*   不需要额外的返回，唯一可能会做的事情就是点击，除了点击文本区域没有默认操作
*   config 选项应该使用一个函数，`copy`以便它可以返回 textarea 的当前值，而不是初始值

页面上的示例显示应用于`zclip`另一个元素，当您单击该元素时它将复制，而不是文本区域，您必须深入研究它。

# asp.net - 带有单击条目的 Asp.net 日历/网格

> ID：13730303
> 
> 赞同：1
> 
> 时间：2012-12-05T18:49:27.947
> 
> 标签：asp.net, input, calendar, scheduler

我正在寻找一个允许单击条目的 asp.net 日历/调度程序控件。

我检查了 Telerik 和其他几个，但它们似乎需要双击，然后提示，然后输入然后保存。

该控件应该像一个网格一样，我们可以在其中输入数据、天之间的制表符等。这使得填充该月的数据变得非常容易

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:16:55.243

这是一个艰难的决定。我见过的大多数日历包都需要双击才能从计划视图开始输入。这样，界面可以区分选择日期或时间窗口和尝试创建或编辑条目。

在 Telerik RadScheduler 控件中，您可以覆盖 OnClientTimeClick 事件以立即调用 Scheduler.showInsertFormAt。这可以为您提供您正在寻找的单击效果：

```
<telerik:RadScheduler ID="RadScheduler1" runat="server" 
    DayStartTime="05:00:00" DayEndTime="18:00:00" 
    DataKeyField="Id" DataSubjectField="Subject" DataStartField="StartDateTime" DataEndField="EndDateTime"
    OnClientTimeSlotClick="onTimeSlotClick"></telerik:RadScheduler>
 <script type="text/javascript">

    function onTimeSlotClick(sender, eventArgs) {
       var scheduler = $find('<%= RadScheduler1.ClientID %>');
       scheduler.showInsertFormAt(eventArgs.get_targetSlot());
    }

  </script> 
```

# perl - Perl 中 Unix Shell 的“-x”选项

> ID：13730315
> 
> 赞同：4
> 
> 时间：2012-12-05T18:50:01.420
> 
> 标签：perl

运行 Unix shell 脚本时，您可以指定`-x`选项让 shell 在所有插值完成后打印正在执行的实际命令。例如，如果我们运行这个脚本（script.sh）：

```
#!/usr/bin/sh

var='hello, world'
echo $var 
```

和：

```
sh -x script.sh 
```

我们得到

```
+ var='hello, world'
+ echo hello, world
hello, world 
```

如何为 perl 脚本获得相同的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T18:57:02.927

安装我的[`Devel::DumpTrace`](http://search.cpan.org/perldoc?Devel%3a%3aDumpTrace)模块并运行

```
perl -d:DumpTrace my_script.pl 
```

# jquery - 每个循环变量变成背景图片，隐藏关键？

> ID：13730322
> 
> 赞同：1
> 
> 时间：2012-12-05T18:50:50.463
> 
> 标签：jquery, loops, variables, background-image, each

这个问题的答案可能真的很简单，所以请放轻松，我在过去一个月才开始使用 jQuery。

将一个`each`循环放在一起以通过滑块中的图像，将它们href'ing到键。代码看起来像这样：

```
var images = [{key:'1', img:'photo1.jpg'},{key:'2', img:'photo2.jpg'},
    {key:'3', img:'photo3.jpg'},{key:'4', img:'photo4.jpg'}]; 

var buttons = $("<~ul id='index_buttons' />");
$.each(images, function(imgIndex, imgData) {
    $(buttons).append($("<~li><~a href='" + imgData.img + "'>" + imgData.key + "<~/a><~/li>")); 
```

问题是我想在它生成的滑块顶部放置一个菜单。这可以通过将所有图像更改为 styled 来完成`"background-image:"`。所以我尝试了：

```
$(buttons).append($("<~li><~a style=\"background-image:" +  imgData.img 
  + "\"href='"  + imgData.key + "'>""<~/a><~/li>")); 
```

收效甚微。

除此之外，按钮还依赖于键来建立链接。我为图像替换的密钥，但是如何在不破坏链接的情况下隐藏/删除密钥？

谢谢 ：）

# php - phpbb论坛在iframe内滚动的解决方案？

> ID：13730326
> 
> 赞同：0
> 
> 时间：2012-12-05T18:51:10.343
> 
> 标签：php, jquery, html, iframe, phpbb

我在网站上工作：http: [//www.mastersofbackgammon.net/site/](http://www.mastersofbackgammon.net/site/)

如果您单击论坛部分，您将看到论坛显示在 iframe 中。

宽度很好，现在看起来不错，但是，当有更多线程或帖子超过 iframe 的高度时，使其可滚动的唯一方法是在 iframe 上启用滚动或使用鼠标中键。问题是 iframe 滚动在视觉上没有吸引力。

我也尝试在 phpbb 论坛本身上合并 tinyscrollbar 插件，但没有成功。phpbb 论坛是一个复杂的系统，tinyscrollbar 插件无法确定内容的最终尺寸。

在这种情况下，你们可以提供什么解决方案吗？也许我可以使用其他东西而不是 iframe 来实现更好的滚动设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:02:42.800

您可以做一些滚动条样式，但我建议您为论坛设置样式以“适应”网站的外观和感觉，而不是试图将其压缩到 iframe 中。

# sql - 混合两个 sql 查询

> ID：13730332
> 
> 赞同：1
> 
> 时间：2012-12-05T18:51:37.623
> 
> 标签：sql

我想混合 2 个 sql 查询，一个用于获取特定年份的总金额，另一个用于了解特定年份特定月份的金额

```
SELECT SUM(money) As Anual FROM Deposito WHERE Year(FechaDeposito)=2011

SELECT SUM(money) As monthly FROM Deposito WHERE Year(FechaDeposito)= 2011 AND Month(FechaDeposito)=10 
```

如何以最有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:54:11.623

简单地结合你的两个查询会给

```
SELECT SUM(money) As Anual,
       SUM(CASE WHEN Month(FechaDeposito)=10 THEN money else 0 end) as monthly
  FROM Deposito
 WHERE Year(FechaDeposito)=2011 
```

然而，它会表现得很糟糕。理想情况下，您希望在 上建立索引`FechaDeposito`，并构建要测试的日期范围，而不是在列上运行函数，例如

```
SELECT SUM(money) As Anual,
       SUM(CASE WHEN Month(FechaDeposito)=10 THEN money else 0 end) as monthly
  FROM Deposito
 WHERE FechaDeposito >= '2011-01-01' and FechaDeposito < '2012-01-01' 
```

# ckeditor - 如何禁用所见即所得编辑器 v1.1.1 上下文菜单

> ID：13730335
> 
> 赞同：2
> 
> 时间：2012-12-05T18:51:53.060
> 
> 标签：ckeditor

如何禁用所见即所得编辑器 v1.1.1 上下文菜单我已经尝试过但不起作用

```
CKEDITOR.editorConfig = function( config )
{
config.removePlugins = 'contextmenu';
//also try this below code
config.removePlugins = 'contextmenu,liststyle,tabletools';
}; 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:17:26.757

使用模块覆盖设置

```
function MODULENAME_wysiwyg_editor_settings_alter(&$settings, $context) {
  if ($context['profile']->editor == 'ckeditor') {
    $settings['removePlugins'] = 'scayt,menubutton,contextmenu';
   }
} 
```

不要忘记将 MODULENAME 替换为您自己的模块名称。

# javascript - Javascript 对象实例和文档准备就绪

> ID：13730340
> 
> 赞同：0
> 
> 时间：2012-12-05T18:52:29.503
> 
> 标签：javascript, oop, dom

这段代码给了我一个错误：

```
$(function(){
    var instance = new object();
    literal.call();
});
var literal ={
    call : function(){
        instance.foo();
    }
}
function object(){
    this.selector = $('div');
    this.foo = function(){ this.selector.remove(); }
} 
```

我想让它运行，我想让文字对象从 $(function(){}) 中出来。我不想在以后更改选择器。

所以我放弃了这个解决方案

```
$(function(){
    instance.selector = $('div');
    literal.call();
});
var instance = new object();
var literal ={
    call : function(){
        instance.foo();
    }
}
function object(){
    this.selector = $('div');
    this.foo = function(){ this.selector.remove(); }
} 
```

我也丢弃了这个

```
$(function(){
var instance = new object();
var literal ={
    call : function(){
        instance.foo();
    }
}
literal.call();
});
function object(){
    this.selector = $('div');
    this.foo = function(){ this.selector.remove(); }
} 
```

这样做的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:39:45.630

您的问题是该`istance`变量是就绪处理程序的本地变量。由于您不想将代码移到那里（无论出于何种原因），您需要将变量设为全局：

```
var istance;
$(function(){
    istance = new object();
    literal.call();
});
var literal = {
    call: function() {
        istance.foo();
    }
}
function object(){
    this.selector = $('div');
    this.foo = function(){ this.selector.remove(); }
} 
```

# javascript - 为什么 InfoBubble.js 作者用括号符号重新分配原型方法？

> ID：13730344
> 
> 赞同：0
> 
> 时间：2012-12-05T18:52:49.447
> 
> 标签：javascript, google-maps, infobubble

从 Google Maps Utility Library 查看[InfoBubble 的来源，](http://code.google.com/p/google-maps-utility-library-v3/source/browse/trunk/infobubble/src/infobubble.js)我发现作者使用点符号创建原型方法，但是在方法定义的末尾，他用括号符号重新分配了相同的 proto 属性。

这应该澄清：

```
/**
 * Set the style of the shadow
 *
 * @param {number} shadowStyle The style of the shadow.
 */
InfoBubble.prototype.setShadowStyle = function(shadowStyle) {
  this.set('shadowStyle', shadowStyle);
};
InfoBubble.prototype['setShadowStyle'] = InfoBubble.prototype.setShadowStyle; 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T04:31:14.463

我想我已经解决了。

这种明显的废话似乎与 Google Closure 编译有关。

```
/**
 * Set the style of the shadow
 *
 * @param {number} shadowStyle The style of the shadow.
 */
InfoBubble.prototype.setShadowStyle = function(shadowStyle) {
  this.set('shadowStyle', shadowStyle);
};
InfoBubble.prototype['setShadowStyle'] = InfoBubble.prototype.setShadowStyle; 
```

编译为：

```
k.prototype.ma=function(a){this.set("shadowStyle",a)};
k.prototype.setShadowStyle=k.prototype.ma; 
```

如您所见，点符号`.setShadowStyle`被缩小为`.ma`，通过使用缩小形式允许内部调用尽可能简洁。

但是由于这是一个 Public 方法，因此有必要提供一种通过其原始名称调用该方法的方法。这是通过让编译器仅最小化点符号而不是关联符号来实现的。

因此，每个人都很开心；内部缩小和外部可访问性。

我无法解释的是为什么编译器不能简单地自行解决它需要保留原始名称以供公共使用。据我所知，它可以通过检测`@private`方法的前导块中标签的缺失来做到这一点。

也许 ：

*   Closure 编译器还没有那么聪明（还），或者
*   在编写 InfoBubble 时，Closure 编译器*并不那么聪明，或者*
*   我错过了一些东西。

谁知道哪个？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T18:54:55.440

除非某个浏览器中存在错误，否则我认为没有理由。

# xcode - Interface Builder 文件中的 XCode 未知类 *****

> ID：13730347
> 
> 赞同：7
> 
> 时间：2012-12-05T18:52:57.447
> 
> 标签：xcode

在一个应用程序中，突然它在 Interface Builder 文件中给了我错误 XCode Unknown class *****。我回顾了所有内容，故事板，课程等。

我尝试重命名该类，但这是同样的问题，即使我创建了一个新类并将代码复制进去。我认为 XCode 是从一种缓存中获取的，因为即使我删除的属性也像标签栏项目中的图标当我运行它时，它仍然存在于应用程序中。

可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T21:36:17.663

此外，如果使用静态库，请不要忘记将 -ObjC 标志添加到项目构建设置选项卡中的其他链接器标志。

如果您没有这样做，当尝试从 IB 中的静态库加载视图控制器时，将出现“Unknown class ... in Interface Builder file”。

我遇到错误的另一种情况将显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-04T08:15:30.380

当我创建一个同名的项目时，我遇到了一个问题，该项目已经存在于我的项目目录中（尽管它在前一段时间被删除了）。Xcode 不明白这是一个新项目，并使用旧项目的构建目录作为新项目的构建目录。我不知道如何从头开始完全重建项目，我只是删除了一个构建目录。就我而言，我删除了 /Users/username/Library/Developer/Xcode/DerivedData/ProjectName-suffix。您可以通过选择 ProjectName->Products->ProjectName.app 在左侧项目导航器的 Xcode 中找到它，右侧的文件检查器将显示文件的完整路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T19:07:28.953

抱歉，在尝试了几篇文章后，我找到了一个解决方案，删除 /...Library/Application\ Support/iPhone\ Simulator/ 中的模拟器文件夹并删除该类并重新添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-25T12:17:49.983

您还需要将其他链接器标志添加到您的目标中，仅添加到项目构建设置似乎不起作用。

# php - PHP - 通过 http 代理的 https 流

> ID：13730351
> 
> 赞同：1
> 
> 时间：2012-12-05T18:53:04.000
> 
> 标签：php, curl, https, proxy, stream

我正在尝试通过 HTTPS 获取流的内容，但我必须通过 HTTP 代理。我不想使用 cURL，而是使用带有**上下文**参数的**fopen 。**

 **问题是，我不能让它通过 HTTPS 工作（虽然 HTTP 工作正常）。

这**不起作用**：

```
$stream = stream_context_create(Array("http" => Array("method"  => "GET",
                                                      "timeout" => 20,
                                                      "proxy"   => "tcp://my-proxy:3128",
                                                      'request_fulluri' => True 
                                )));
echo file_get_contents('https://my-stream', false, $context); 
```

这**确实**有效（cURL）：

```
$url = 'https://my-stream';
$proxy = 'my-proxy:3128';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
$curl_scraped_page = curl_exec($ch);
curl_close($ch);

echo $curl_scraped_page; 
```

有人知道第一段代码有什么问题吗？如果它适用于 cURL，则必须有一种方法使其适用于上下文。我试图将上下文选项更改为一堆没有运气的不同值。

任何帮助将不胜感激 ！

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-14T14:11:22.747

您没有指定确切的错误消息，请尝试添加`ignore_errors => true`. 但是，如果您是`400 Bad Request`从 Apache 获得的，那么您可能遇到的问题是服务器名称指示和主机标头不匹配。还有一个与此相关的 PHP 错误：[https ://bugs.php.net/bug.php?id=63519](https://bugs.php.net/bug.php?id=63519)

尝试以下修复，直到解决此错误：

```
$stream = stream_context_create(array(
    'http' => array(
        'timeout' => 20,
        'proxy' => 'tcp://my-proxy:3128',
        'request_fulluri' => true 
    ),
    'ssl' => array(
        'SNI_enabled' => false // Disable SNI for https over http proxies
    )
));
echo file_get_contents('https://my-stream', false, $context); 
```**

# model-binding - Nancy 中的多个自定义模型绑定器

> ID：13730352
> 
> 赞同：6
> 
> 时间：2012-12-05T18:53:05.960
> 
> 标签：model-binding, nancy

您可以在 Nancy 中拥有多个自定义模型绑定器吗？我需要绑定来自不符合我们当前“mvc 风格”自定义模型绑定器的数据表 jQuery 插件的服务器端处理请求。特别是关于列表，数据表将它们显示为 mylist_0、mylist_1 等，而不是 mylist [0]、mylist [1]。

那么我可以添加另一个模型绑定器来处理这些不同的列表样式吗？如果我这样做了，南希怎么知道要使用哪个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T07:59:02.157

您可以将自定义 ModelBinder 添加到您的项目中来处理您正在谈论的类的绑定。

```
using System;
using System.IO;
using Nancy;

namespace WebApplication3
{
    public class CustomModelBinder : Nancy.ModelBinding.IModelBinder
    {
        public object Bind(NancyContext context, Type modelType, object instance = null, params string[] blackList)
        {
            using (var sr = new StreamReader(context.Request.Body))
            {
                var json = sr.ReadToEnd();
                // you now you have the raw json from the request body
                // you can simply deserialize it below or do some custom deserialization
                if (!json.Contains("mylist_"))
                {
                    var myAwesomeListObject = new Nancy.Json.JavaScriptSerializer().Deserialize<MyAwesomeListObject>(json);
                    return myAwesomeListObject;
                }
                else
                {
                    return DoSomeFunkyStuffAndReturnMyAwesomeListObject(json);
                }
            }
        }

        public MyAwesomeListObject DoSomeFunkyStuffAndReturnMyAwesomeListObject(string json)
        {
            // your implementation here or something
        }

        public bool CanBind(Type modelType)
        {
            return modelType == typeof(MyAwesomeListObject);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T15:22:05.657

如果`CustomModelBinder`未检测到（发生在我身上），您可以尝试在以下位置覆盖它`CustomBootstrapper`：

```
protected override IEnumerable<Type> ModelBinders
    {
        get
        {
            return new[] { typeof(Binding.CustomModelBinder) };
        }
    } 
```

# ruby-on-rails - 我如何拥有带有参数和 url_for 的 URL？

> ID：13730355
> 
> 赞同：0
> 
> 时间：2012-12-05T18:53:20.040
> 
> 标签：ruby-on-rails, ruby

我只是想为我的网站设置 excel 下载选项。我想做的就是：

```
<%= link_to 'Export', export_to_excel_path(:param => @item.id), url_for(:format => 'xls') %> 
```

我想给我的用户一个导出到 excel 的链接，带有额外的参数。我收到以下错误：

```
undefined method `stringify_keys' for "/controller/show.xls":String 
```

我需要使用 url_for 因为在 export_to_excel 中，我有一个

```
respond_to 
```

为了响应 .xls MIME 类型的文件。我正在使用 to_xls gem，一切正常，除了我无法弄清楚这个链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:12:57.010

所有功劳归于 jdoe：

```
 <%= link_to 'Export', export_to_excel_path(:param => @item.id, :format => 'xls') %> 
```

# android - 使用 OpenMAX IL 将硬件渲染到 Android Surface

> ID：13730356
> 
> 赞同：2
> 
> 时间：2012-12-05T18:53:21.200
> 
> 标签：android, android-ndk, android-mediaplayer, android-library, openmax

我想使用此处描述的 OMX HW 渲染器： [http ://www.slideshare.net/RaghavanVenkateswaran/iomx-in-android](http://www.slideshare.net/RaghavanVenkateswaran/iomx-in-android)

**操作系统：**安卓 2.3.4

**使用的系统库：** libmedia、libbinder、libstagefright、libutils

**我设备上的 OMX 组件：**

组件名称：OMX.ITTIAM.AAC.decode，组件角色：audio_decoder.aac

组件名称：OMX.ITTIAM.AAC.encode，组件角色：audio_encoder.aac

组件名称：OMX.TI.720P.Decoder，组件角色：video_decoder.mpeg4

组件名称：OMX.TI.720P.Decoder，组件角色：video_decoder.avc

组件名称：OMX.TI.720P.Encoder，组件角色：video_encoder.mpeg4

组件名称：OMX.TI.720P.Encoder，组件角色：video_encoder.avc

组件名称：OMX.TI.AAC.decode，组件角色：audio_decoder.aac

组件名称：OMX.TI.AAC.encode，组件角色：audio_encoder.aac

组件名称：OMX.TI.AMR.decode，组件角色：audio_decoder.amrnb

组件名称：OMX.TI.AMR.encode，组件角色：audio_encoder.amrnb

组件名称：OMX.TI.Camera，组件角色：camera.yuv

组件名称：OMX.TI.JPEG.decoder，组件角色：image_decoder.jpeg

组件名称：OMX.TI.JPEG.encoder，组件角色：image_encoder.jpeg

组件名称：OMX.TI.MP3.decode，组件角色：audio_decoder.mp3

组件名称：OMX.TI.VPP，组件角色：iv_renderer.yuv.overlay

组件名称：OMX.TI.Video.Decoder，组件角色：video_decoder.h263

组件名称：OMX.TI.Video.Decoder，组件角色：video_decoder.avc

组件名称：OMX.TI.Video.Decoder，组件角色：video_decoder.mpeg2

组件名称：OMX.TI.Video.Decoder，组件角色：video_decoder.mpeg4

组件名称：OMX.TI.Video.Decoder，组件角色：video_decoder.wmv

组件名称：OMX.TI.Video.encoder，组件角色：video_encoder.mpeg4

组件名称：OMX.TI.Video.encoder，组件角色：video_encoder.h263

组件名称：OMX.TI.Video.encoder，组件角色：video_encoder.avc

组件名称：OMX.TI.WBAMR.decode，组件角色：audio_decoder.amrwb

组件名称：OMX.TI.WBAMR.encode，组件角色：audio_encoder.amrwb

组件名称：OMX.TI.WMA.decode，组件角色：audio_decoder.wma

**我已经完成了这些步骤：**

1，通过 JNI 传递 Android Surface 对象（与本机 MediaPlayer 完全相同）：

**JNI（C++）：**

```
static void com_mautilus_media_MMediaPlayer_setVideoSurface(JNIEnv *env, jobject thiz)
{
    __android_log_print(ANDROID_LOG_INFO, TAG, "setVideoSurface");

    MMediaPlayer *mp = getMediaPlayer(env, thiz);

    if (mp == NULL )
    {
        jniThrowException(env, "java/lang/IllegalStateException", NULL);
        return;
    }

    setVideoSurface(mp, env, thiz);

}
static void setVideoSurface(MMediaPlayer *mp, JNIEnv *env, jobject thiz)
{
    __android_log_print(ANDROID_LOG_INFO, TAG, "setVideoSurface");

    jobject surface = env->GetObjectField(thiz, fields.surface);

    if (surface != NULL && mp != NULL)
    {
        const android::sp<android::Surface> native_surface = get_surface(env, surface);
        mp->setVideoSurface(native_surface);

    }
} 
```

MMediaPlayer 中的 Surface 变量声明为：

```
android::sp<android::Surface> surface; 
```

**爪哇：**

```
private Surface mSurface; // accessed by native methods
private SurfaceHolder mSurfaceHolder;

public void setDisplay(SurfaceHolder sh)
{
    mSurfaceHolder = sh;

    if (sh != null)
    {
        mSurface = sh.getSurface();
    }
    else
    {
        mSurface = null;
    }

    setVideoSurface(); // Native function call
} 
```

**2、初始化IOMX节点：**

注意：硬编码值仅用于简单和测试目的

```
android::sp<android::IServiceManager> serviceManager = android::defaultServiceManager();
android::sp<android::IBinder> binder = serviceManager>getService(android::String16("media.player"));
android::sp<android::IMediaPlayerService> mediaPlayerService = android::interface_cast<android::IMediaPlayerService>(binder);
android::sp<android::IOMX> iomx = mediaPlayerService->getOMX();

android::IOMX::node_id node;

// observer is instance of class derived from android::BnOMXObserver class
iomx->allocateNode("OMX.TI.VPP", observer, &mRendererNode->node);

OMX_PARAM_PORTDEFINITIONTYPE portDefn;
portDefn.nPortIndex = 1;

iomx->getParameter(node, OMX_IndexParamPortDefinition, &portDefn, sizeof(portDefn));

//portDefn.nBufferCountActual = mInBufCnt; // set some suitable value here or don’t update to
//use default value

portDefn.format.video.nFrameWidth = 256; // width of the video to be played
portDefn.format.video.nFrameHeight = 144; // height of video to be played
portDefn.format.video.nStride = 256;
portDefn.format.video.nSliceHeight = 144;
iomx->setParameter(node, OMX_IndexParamPortDefinition, &portDefn, sizeof(portDefn));

portDefn.nPortIndex = 2;
iomx->getParameter(node, OMX_IndexParamPortDefinition, &portDefn, sizeof(portDefn));
//portDefn.nBufferCountActual = iOutBufCnt; // set suitable value or leave to default.
portDefn.nBufferSize = (256 * 144 * 3) / 2;
portDefn.format.video.nFrameWidth = 256;
portDefn.format.video.nFrameHeight = 144;
portDefn.format.video.nStride = 256;
portDefn.format.video.nSliceHeight = 144;
iomx->setParameter(node, OMX_IndexParamPortDefinition, &portDefn, sizeof(portDefn)); 
```

**3、尝试创建OMX Renderer：**

```
android::sp<android::IOMXRenderer> mOMXRenderer;

mOMXRenderer = omxContext->iomx->createRenderer(surface, "OMX.TI.VPP", OMX_COLOR_FormatYUV420Planar, 256, 144, displayWidth, displayHeight, 0); 
```

它总是返回 NULL。

有人知道这有什么问题吗？我在初始化错误的组件吗？还是必须遵循一些特殊的调用顺序？或者是其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:11:10.047

使用 IOMX.h 中定义的 createRendererFromJavaSurface

# validation - 如何在 ZF2 中找到相关行集

> ID：13730358
> 
> 赞同：0
> 
> 时间：2012-12-05T18:53:30.777
> 
> 标签：validation, zend-framework2

我有两个表（只是一个例子）：`Cars`和`Colors`.

一个`Car`有一个`Color`，所以如果存在一辆红色的汽车，我不能删除红色。简单的。

使用 ZF1，我可以在删除颜色之前通过使用`findDependentRowset()`方法轻松验证这种依赖关系。

但是我怎么能在 ZF2 中做到这一点呢？

如果我只是让删除方法失败而不是抓住异常并打印一条消息，这是一种不好的做法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:15:48.677

`findDependantRowset()`ZF2中不再直接实现。ZF2 倒退了一步，提供了完整的 ORM，而是简单地提供了更容易查询管理的功能。

这正是你的方法。`Query for CAR`然后，您要么执行两个查询，要么`Query Colords for CarColor`执行一个查询，同时查询这两个查询。后一个是更快的方法，第一个几乎是什么`findDependantRowset()`。

如果您想要更多“神奇”功能，最好建议您查看许多优秀的 ORM 之一。例如，Doctrine 2 已经有一个非常简洁的 ZF2 实现，并且就 ZF2 而言似乎是一个社区标准。您可能想查看[https://github.com/doctrine/DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)

# c++ - 通过Qt读取xml

> ID：13730361
> 
> 赞同：0
> 
> 时间：2012-12-05T18:53:32.480
> 
> 标签：c++, xml, qt

我是 Qt 和 XML 的新手。请帮我解决这个问题。我会很感激你的。这是我的 XML 文件格式

```
< SiteSpecific>

< SitesList>LocA;LocB;LocC< /SitesList>

< LocA>

      < MaterialList>Material_A;Material_B</MaterialList>

      <Material Name="Material_A">

      <TemperatureList>-65;70;300;400;1000</TemperatureList>

    <Density Value="0.286"/>

    <PoissonRatio Value="0.27"/>

        <Property tempid="01" temp="-65">
            <Modulus Value="32.77E+6"/>
            <Alpha Value="8.15E-6"/>
            <YieldStrength Value="33.90E+3"/>
        </Property>

        <Property tempid="02" temp="70">
            <Modulus Value="29.00E+6"/>
            <Alpha Value="8.55E-6"/>
            <YieldStrength Value="30.00E+3"/>
=       </Property>

        <Property tempid="03" temp="300">
            <Modulus Value="27.50E+6"/>
            <Alpha Value="9.26E-6"/>
            <YieldStrength Value="22.40E+3"/>
        </Property>

    </Material>
</LocA>
< LocB>

      < MaterialList>Material_C;Material_D</MaterialList>

      <Material Name="Material_C">

      <TemperatureList>-65;70;300;400;1000</TemperatureList>

    <Density Value="0.286"/>

    <PoissonRatio Value="0.27"/>

        <Property tempid="01" temp="-65">
            <Modulus Value="32.77E+6"/>
            <Alpha Value="8.15E-6"/>
            <YieldStrength Value="33.90E+3"/>
        </Property>

    <Material Name="Material_D">

      <TemperatureList>-65;70;300;400;1000</TemperatureList>

    <Density Value="0.286"/>

    <PoissonRatio Value="0.27"/>

        <Property tempid="01" temp="-65">
            <Modulus Value="32.77E+6"/>
            <Alpha Value="8.15E-6"/>
            <YieldStrength Value="33.90E+3"/>
        </Property>

    </Material>
</LocB> 
```

从上面的文件格式中，我必须提取 Materialist（例如 Material_A 、 Material_B 、 Material_C 、 Material_D） 、 Temperaturelist （例如 -65,70,300,400,1000 ）以及基于 LocA 和 LocB 的 tempid 的所有属性（模量、阿尔法和屈服强度）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:07:44.473

[QDomDocument](http://doc.qt.digia.com/qt/qdomdocument.html#details)和[QXmlStreamReader](http://doc.qt.digia.com/qt/qxmlstreamreader.html)是“Qt 方式”读取 XML 文档的两种主要方式。阅读文档以获取示例和说明。

就个人而言，我更喜欢 QXmlStreamReader，但它确实有一个学习曲线。

编辑：这里有一些示例代码，未编译，给你一个大致的想法：

```
//create some struct to store your data
struct material_t
{
    QString name;
    QList<MatProp> properties;  //a list of your temp-modulus-Alpha-Yield entries
}

QList<material_t> readLocation(QXmlStreamReader& xml)
{
    QStringList matnames;
    QList<material_t> matlist;
    while(xml.readNextStartElement())
    {
        if(xml.name() == "MaterialList")
            matnames = xml.readElementText().split(";");
        else if(matnames.contains(xml.name().toString()))
            matlist.append(readMaterial(xml));          //write your own reader that returns a material_t
        else
            xml.skipCurrentElement();                   //you must skip every unwanted element
    }
    return matlist;
}

void readStuff(QXmlStreamReader& xml, QList<material_t>& mats)
{
    while(xml.readNextStartElement())
    {
        QStringList sitelist;
        if(xml.name() == "SitesList")   //key in on the XML node name
        {
            sitelist = xml.readElementText().split(";");
        } else if(sitelist.contains(xml.name().toString()))
        {
            mats.append(readLocation(xml));
        } else                          //you have to skip every unwanted element
            xml.skipCurrentElement();
    }
}

int main()
{
    QList<material_t> materialist;
    QFile file("your path here");
    if(file.open(QIODevice::Text | QIODevice::ReadOnly))        //the QIODevice must be open
    {
        QXmlStreamReader xml(&file);
        readStuff(xml, materiallist);
    }
    //do stuff with materiallist
} 
```

# javascript - 删除第二个班级并添加新班级

> ID：13730362
> 
> 赞同：1
> 
> 时间：2012-12-05T18:53:33.527
> 
> 标签：javascript, jquery

如何删除类`Second`并添加新类`Third`？

我尝试，但这不起作用：

```
<div class="First Second"></div>

$('div').removeClass().split(" ")[1].addClass('Third'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:55:12.887

```
$('div').removeClass('Second').addClass('Third'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T18:55:57.143

[在这种情况下，jQuery 文档是你的朋友](http://api.jquery.com/removeClass/)。`removeClass()`接受一个参数 - 类名。所以改成

```
$('div').removeClass('Second').addClass('Third') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:55:20.003

尝试这个

```
$('div').removeClass('Second').addClass('Third'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:58:12.030

如果您想让它动态化，请尝试：

```
var divList = document.getElementsByTagName( 'div' );
var i;
for ( i = 0; i < divList.length; i++ ) {
  var thisDiv = divList[i];
  var classList = thisDiv.className.split(/\s+/);
  $( thisDiv ).removeClass( classList[1] ).addClass( 'Third' );
}​ 
```

# c# - 为什么我们使用字段和属性而不仅仅是一个变量？

> ID：13730363
> 
> 赞同：2
> 
> 时间：2012-12-05T18:53:34.110
> 
> 标签：c#, properties, field

> **可能重复：**
> [C# 中的字段和属性有什么区别？](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c)
> [C# .NET 3.5+ 中属性和字段的区别](https://stackoverflow.com/questions/653536/difference-between-property-and-field-in-c-sharp-net-3-5)

我已经看到，在 c# 中，以下模式很常见：

```
 private string m_name = string.Empty;

public string Name
{
    get
    {
        return m_name;
    }
    set
    {
        m_name = value;
    }
} 
```

当我们可以使用一个简单的变量时，为什么我们要使用一个字段和一个属性来保存一个值？为什么我应该使用字段和属性而不是简单的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:56:04.863

只是为了封装原则。为了阻止具体的实现，另外，您有机会（在这种情况下）在`get/set`.

如果你不需要额外的代码，你可以只使用

```
public string Name{get;set;} 
```

或根据需要使用文件。但是使用属性是微软提供的**指导方针。**

所以基本上所有的，都遵循它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:56:32.397

造成这种情况的原因有很多，但马上想到2个：

首先，一个属性可以很容易地绑定到一个控件或读取所有属性（而不是字段）的其他基于反射的控件。

其次，您可能希望在 getter 或 setter 中执行某些操作（例如触发[NotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:57:17.440

属性提供了通过属性读取和写入来保护类中的字段的机会。在其他语言中，这通常是通过实现专门的 getter 和 setter 方法的程序来完成的。C# 属性启用这种类型的保护，同时还允许您访问该属性，就像它是一个字段一样。

属性相对于字段的另一个好处是您可以随着时间的推移更改它们的内部实现。对于公共字段，基础数据类型必须始终相同，因为调用代码取决于该字段是否相同。但是，使用属性，您可以更改实现。

# php - 如何在不刷新页面的情况下显示错误？

> ID：13730365
> 
> 赞同：2
> 
> 时间：2012-12-05T18:53:35.937
> 
> 标签：php, javascript, html, sql

我正在创建一个注册表单。用户输入用户名和密码，然后按提交，使用 POST 提交表单。HTML：

```
<link href="Styles/RegisterStyles.css" rel="stylesheet" type="text/css" />
<form id="frmRegister" method="post" action="register.php">
  <h1>Register</h1>
    <table width="100%">
      <tr>
        <td width="16%"><label class="alignRight"> Username: </label></td>
        <td width="84%"><input name="txtUsername" type="text" maxlength="40" /></td>
      </tr>

      <tr>
        <td width="16%"><label class="alignRight"> Password: </label></td>
        <td width="84%"><input name="txtPassword" type="text" maxlength="40" /></td>
      </tr>

      <tr>
        <td width="16%">&nbsp;</td>
        <td width="84%"><input name="Submit" class="submitButton" type="submit" /></td>        
      </tr>

    </table>
</form>
</html> 
```

PHP：

```
$username = $_POST["txtUsername"];
$password = $_POST["txtPassword"];
//Code to connect to database

function doesUsernameExist($username)
{
    //return true if username exists or false otherwise
} 
```

现在，在 PHP 中，我运行一个查询来检查用户名是否存在于数据库中。如果用户名已经存在，如何在不导航到另一个页面并导致“用户名”和“密码”字段重置为空白的情况下通知用户？

一些注册表单有一个非常简洁的 Javascript，可以在您每次按下键盘上的键时检查用户名是否存在。关于如何实施的任何想法？从我能收集到的信息中，使用 JavaScript 连接到数据库是困难的（也是不好的做法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:00:42.710

我使用 jQuery 来做这样的事情。

在html中

```
<input type="text" name="username" onBlur="checkUsername(this)"> 
```

在javascript中是这样的

```
function checkUsername(v){
    $.post("phppage.php",{
        valToBeChecked:v
    },function(d){
        if($.trim(d)==true){
            // php page returned true
        }else{
            // php page returned false
        }
    });
} 
```

请注意这只是一个例子，我想我的语法是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:01:19.537

这将在没有 jQuery 的情况下对输入的模糊进行 AJAX 检查。

编辑：我想澄清一下，我不建议使用这种方法，并且更喜欢将 jQuery（或其他类似的 JS 框架）用于 AJAX。但是，我知道并不是每个人都可以指定他们使用的技术，所以这里就是您的要求的答案！:)

```
<input id="txtUsername" name="txtUsername" />
<script type="text/javascript">
    window.onload = function() {
        document.getElementById('txtUsername').onblur = function(e) {
            // Get the username entered
            var el = e.target;
            var username = el.value;

            // Create an XHR
            var xhr = null;
            if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
            } else {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }

            // AJAX call to the server
            request.open('GET', '/check_username.php?username=' + username, false);
            xhr.onload = function(e) {
                var json = eval(xhr.responseText);
                if (json.exists) {
                   window.alert('That username exists already.');
                }
            }
            xhr.send();
        }
    }
</script> 
```

**user_exists.php**

```
$username = isset($_GET['username']) ? $_GET['username'] : '';
$username = mysqli_real_escape_string($username);

$sql = "SELECT COUNT(*) > 0 AS user_found
        FROM users
        WHERE username = '{$username}'";

$result = mysqli_query($sql);

$exists = false;
if ($row = mysqli_fetch_assoc($result)) {
    $exists = $row['user_found'] ? true : false;
}

echo json_encode(array('exists' => $exists)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T18:58:03.350

我对此的解决方案是使用 AJAX。

在提交表单时，对一个页面进行 AJAX 调用，该页面将评估已输入到表单中的数据，并返回有关它是否已被验证的信息。

从该 AJAX 调用中获取一些信息后，确定是否再次提交表单，但这次提交到将数据吸收到数据库中的页面。

这是一种解决方案；作为一个 AJAX 新手，我想说可能有更好的，但它可能对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:57:43.767

一个很好的选择是使用 jQuery/AJAX。 [查看这些示例](https://stackoverflow.com/questions/13499559/make-div-text-change-on-click-based-on-php-data-using-ajax/13501242#13501242)并在您的服务器上试用它们。在此示例中，在 FILE1.php 中，请注意它传递了一个空白值。您不想传递空白值，这是您将用户名和密码传递给 FILE2.php 的地方。在您的情况下，该行将如下所示：

```
data: 'username='+username+'&password='+password, 
```

在 FILE2.php 示例中，您将检索这些值，如下所示：

```
$uname = $_POST['username'];
$pword = $_POST['password']; 
```

然后进行 MySQL 查找并返回值：

```
echo 1; 
```

这将传递`1`给 FILE1.php 中的成功函数，并将其存储在名为“data”的变量中。因此，`alert(data);`成功函数中的行将提醒第一。

[这是另一个值得](https://stackoverflow.com/questions/13502638/submit-form-and-pass-values-with-ajax/13502872#13502872)回顾的好例子。

方法是创建表单，然后使用 jQuery 检测按钮按下并通过 AJAX 将数据提交到辅助 PHP 文件。上面的例子展示了如何做到这一点。

辅助 PHP 文件返回一个响应（无论您选择发送什么），该响应出现在您的 AJAX 调用的 Success: 部分。

jQuery/AJAX 是 javascript，因此您有两个选择：您可以将其放在`<script type="text/javascript"></script>`PHP 主文档的标签中，或者您可以`<?php include "my_javascript_stuff.js"; ?>`放在 PHP 文档的底部。

# python - 使用没有表单的视图创建 django 对象

> ID：13730371
> 
> 赞同：2
> 
> 时间：2012-12-05T18:54:05.873
> 
> 标签：python, django, django-models, django-views

我想知道如何根据用户要访问的 URL 在数据库中创建对象。

例如，他们将转到 /schedule/addbid/1/，这将在表中创建一个对象，其中包含投标的所有者、他们投标的时间表以及投标是否已完成。到目前为止，这就是我为我的模型提供的投标。

```
class Bids(models.Model):
   id = models.AutoField("ID", primary_key=True, editable=False,)
   owner = models.ForeignKey(User)
   biddedschedule = models.ForeignKey(Schedule)
   complete = models.BooleanField("Completed?", default=False) 
```

biddedschedule 将基于 URL 中的数字，因为在这种情况下 1 将是调度表中的第一个调度

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:07:01.260

您应该`id`使用以下方法获取参数`urls.py`：

```
#urls.py
from appname.views import some_view

urlpatterns = patterns('',
    url(r'^schedule/addbid/(?P<id>\d+)$', some_view),
    ...
) 
```

查看有关[在 urlconf 中捕获参数的文档](https://docs.djangoproject.com/en/dev/topics/http/urls/)。

然后，您应该使用传入的 URL、当前登录的用户 ( ) 和数据库中的`views.py`构造一个`Bids`Object 。例如：`id``request.user``biddschedule`

```
#views.py
def some_view(request, id):
    if request.user.is_authenticated():
        # get the biddschedule from your DB
        # ...
        bids = models.Bids(id=id, owner=request.user, biddedschedule=biddedschedule)
        bids.save()
        return HttpResponse("OK")
    return Http404() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:56:04.567

通过 urlconf 获取号码。通过 获取当前用户`request.user`。通过调用其构造函数创建模型实例，并通过其`save()`方法将其保存到数据库中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-04-24T10:40:14.750

```
`#view.py under a post or get method`

    new_bird, created = Bids.objects.get_or_create(
         owner = user_obj,
          biddedschedule = biddedschedule_obj,                
          complete = bool
          )
    new_bird.save() 
```

# sql - 计数后的 SQL 总和

> ID：13730381
> 
> 赞同：0
> 
> 时间：2012-12-05T18:54:43.497
> 
> 标签：sql, sqlplus

```
Create Table DBONE AS (
Select distinct count(X) as Count, Y, Z
FROM Schema.Table
Where (Schema.Table.X like '%Retire%' or Schema.Table.X like '%Obsolete%')
Group by (X, Y, Z) 
)
ORDER BY X, Y, Z asc; 
```

如何将总和添加到 count(X) 语句的末尾作为计算计数总和的另一列，或者在行的底部？

我试过了

```
Union All
Select 'SUM' X (table)
From Table 
```

但这是不正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:03:46.870

您的查询没有真正意义。计数总是会返回“1”，因为您是按 X 分组的。此外，使用 group by 时不需要 distinct。

您可能想要：

```
Select Y, Z, count(*) as count,
       sum(count(*)) over () as TotalCount
FROM Schema.Table
Where (Schema.Table.X like '%Retire%' or Schema.Table.X like '%Obsolete%')
Group by Y, Z 
```

# c# - 对字节数组进行排序

> ID：13730388
> 
> 赞同：0
> 
> 时间：2012-12-05T18:55:09.873
> 
> 标签：c#, arrays, sorting, bytearray

我的程序以字节数组的形式将数据从一个应用程序发送到另一个应用程序。我想提取部分数据以存储在不同的变量中。例如字节数组中的第一个 [7] 保存符号数据，下一部分是一个我不知道长度的数字，因为它会随着它发送的每个 msg 而变化。在我发送数据之前，我在我想要的每个数据部分之间用逗号将其分开。我的问题是设置一个将在逗号处停止的循环，以便我可以将数据添加到另一个变量中。如果这是有道理的，请任何想法都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:10:05.770

数据作为字节数组处理起来很复杂，因为它实际上是编码文本。只需对其进行解码（使用您用来将其转换为字节数组的编码）并将其拆分：

```
string[] parts = Encoding.UTF8.GetString(data).Split(','); 
```

现在您可以获取每个部分并解析它们：

```
int symbol = Int32.Parse(parts[0]);
int count = Int32.Parse(parts[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:06:46.330

你需要知道你有什么编码，因为逗号在不同的编码方案中并不总是相同的字节值。另外，如果您想要效率，您可以尝试将字节数组解析为字节数组，但这更容易。此外，您可以在两端创建一个具有您需要的属性并且是 [Serializable] 的类。

如果出于某种原因您不想这样做，那么您可以像这样轻松地解析字节数组：

```
UTF8Encoding encoding = new UTF8Encoding();
string s = encoding.GetString(byteArray);
string[] values = s.Split(new char[] {','});

//then do something with the values 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:01:10.603

我建议定义一个表示您需要发送的数据的对象模型，然后使用一些序列化框架将其转换为字节数组/从字节数组转换。

参见例如[http://msdn.microsoft.com/en-us/library/ms973893.aspx](http://msdn.microsoft.com/en-us/library/ms973893.aspx)

您可能感兴趣的另一个主题是 .Net 中的数据合同。

# macos - OSX，关闭启动守护程序并且网络不可用

> ID：13730390
> 
> 赞同：0
> 
> 时间：2012-12-05T18:55:16.077
> 
> 标签：macos, launchd

我们已经启动了应该永远运行并在系统启动后立即启动的守护程序，因此在它的 plist 中我们说：

`<key>KeepAlive</key> <true/>`

在系统关闭之前一切正常。代理需要通过 HTTP 通知远程服务器系统正在关闭。系统将 SIGTERM 发送给代理就好了，代理能够处理它。但是，当它收到 SIGTERM 时，DNS（或者可能是整个网络子系统）已经关闭，并且它无法将状态发送到服务器，因为它无法解析其名称。所有网络功能都失败了，所以我怀疑网络已经关闭。在 Linux 上，这由具有 NN=99 和 MM=00 的 SNN/KMM 符号链接解决。然而，在 OSX 上明确表示 launchd 守护进程没有任何优先级。那么我们如何让 OSX 在关闭 DNS/网络之前将 SIGTERM 发送到我们的守护进程？

我已经快速查看了为系统关闭事件注册侦听器的能力，因为程序可以注册自己以侦听电源模式更改（即睡眠），但是一些消息来源告诉这也是不可能的 -[接收电源通知（尤其是关机）在 Mac OSX 上](https://stackoverflow.com/questions/1321219/receiving-power-notifications-especially-shutdown-on-mac-osx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:22:53.620

我怀疑会有一个分布式通知通知应用程序，所以我写了一个小 Obj-C 应用程序......

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[])
{
    @autoreleasepool
    {
        [[NSDistributedNotificationCenter defaultCenter]
         addObserverForName: nil
         object: nil
         queue: [NSOperationQueue mainQueue]
         usingBlock: ^(NSNotification *notification) {
            NSLog(@"Got a notification %@", notification);
        }];

        [[NSRunLoop mainRunLoop] run];
    }
} 
```

我收到了这些通知

```
05/12/2012 19:17:12.044 Untitled 2[62058]: Got a notification __CFNotification 0x7ffd98e04900 {name = com.apple.logoutInitiated; object = 501}
05/12/2012 19:17:22.376 Untitled 2[62058]: Got a notification __CFNotification 0x7ffd98c0c580 {name = com.apple.shutdownInitiated; object = 501}
05/12/2012 19:17:22.388 Untitled 2[62058]: Got a notification __CFNotification 0x7ffd98c0b8f0 {name = com.apple.logoutContinued; object = 501} 
```

*   `com.apple.logoutInitiated`对应于“关闭”对话框的打开，并且
*   `com.apple.shutdownInitiated`按下按钮时收到。

现在，当然你不会知道关闭是否真的会发生，一个应用程序可以取消关闭。不过，您可能也会收到通知。

# java - 在 Zxing 中启用 PDF417 解码

> ID：13730396
> 
> 赞同：2
> 
> 时间：2012-12-05T18:55:41.287
> 
> 标签：java, ant, computer-vision, zxing, pdf417

我正在尝试在[ZXing](http://code.google.com/p/zxing/)（斑马线）中启用[PDF417](http://en.wikipedia.org/wiki/PDF417)条码读取。我从[github repo](https://github.com/zxing/zxing)中提取并根据[wiki](http://code.google.com/p/zxing/wiki/GettingStarted)构建了库。ant build 输出[似乎表明](https://gist.github.com/4218363)正在构建 PDF417 子模块。[我尝试使用这些图像](http://imgur.com/a/P799B)根据 wiki 测试所有内容，但出现“未找到条形码”错误。

```
kscottz@kscottz-laptop:~/barcode/zxing$  java -cp javase/javase.jar:core/core.jar com.google.zxing.client.j2se.CommandLineRunner Sample_PDF417.png 
file:/home/kscottz/barcode/zxing/Sample_PDF417.png: No barcode found
kscottz@kscottz-laptop:~/barcode/zxing$  java -cp javase/javase.jar:core/core.jar com.google.zxing.client.j2se.CommandLineRunner bc.png 
file:/home/kscottz/barcode/zxing/bc.png: No barcode found
kscottz@kscottz-laptop:~/barcode/zxing$  java -cp javase/javase.jar:core/core.jar com.google.zxing.client.j2se.CommandLineRunner sanitycheck.jpg 
file:/home/kscottz/barcode/zxing/sanitycheck.jpg (format: QR_CODE, type: TEXT):
Raw result:
<-- SNIP --> 
```

是什么赋予了？我是否缺少启用 PDF417 的标志？在哪里可以设置这些类型的配置选项？我经常是 Python/C/C++ 开发人员，所以我可能会遗漏一些非常基本的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:38:48.233

试试看`--try_harder`，否则是适合移动设备的模式，而不是使用更多的CPU来更多地扫描图像。`--pure_barcode`可能也会起作用，因为这些是合成图像。

一般来说。这些似乎没有解码。我无法访问第一个图像，甚至在在线解码器中也找不到第二个图像（您始终可以将其用作检查）：http: [//zxing.elasticbeanstalk.com/w/decode.jspx](http://zxing.elasticbeanstalk.com/w/decode.jspx)

我不知道为什么，因为我认为它是有效的。您可以通过调试器运行以查看究竟出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:27:29.367

所以我在测试条码上运行了 ZXing 测试脚本，它们确实通过了，所以我假设它已启用。似乎当 zxing 说 alpha 时，它们的真正意思是 alpha。=(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T12:23:50.493

基本上要使用 ZXING 库仅检测 PDF417 条码，您需要传入提示，要求 ZXING 仅查找 PDF417 类型。

试试下面，

```
 hints.put(DecodeHintType.POSSIBLE_FORMATS, EnumSet.of(BarcodeFormat.PDF_417)); 
```

查看以下示例，

```
LuminanceSource source = new BufferedImageLuminanceSource(bufferedImage);
        BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));

        Map<DecodeHintType, Object> hints = new EnumMap<>(DecodeHintType.class);

        hints.put(DecodeHintType.POSSIBLE_FORMATS, EnumSet.of(BarcodeFormat.PDF_417));
        //hints.put(DecodeHintType.POSSIBLE_FORMATS, EnumSet.allOf(BarcodeFormat.class));
        hints.put(DecodeHintType.CHARACTER_SET, "utf-8");
        hints.put(DecodeHintType.TRY_HARDER, true);
        Result result = new MultiFormatReader().decode(bitmap, hints); 
```

# python - 使用 webapp2 重定向到带有日语字符参数的页面

> ID：13730398
> 
> 赞同：1
> 
> 时间：2012-12-05T18:55:46.467
> 
> 标签：python, redirect, unicode, webapp2

在我的 web 应用程序中，我想从 POST 重定向到 GET 到另一个 URL，并将 GET 的参数设置为日语字符。

这有效：

```
self.redirect("SomePage?param=%s" % "value") 
```

这会在重定向中引发编码错误：

```
self.redirect("SomePage?param=%s" % u"が") 
```

有没有办法为重定向页面重定向和设置日语字符参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T00:33:56.977

查询字符串应同时编码为 'utf-8' 和[percent-encoded](http://docs.python.org/2/library/urllib.html#urllib.urlencode)：

```
>>> import urllib
>>> 'SomePage?%s' % urllib.urlencode({'param': u'が'.encode('utf-8')})
'SomePage?param=%E3%81%8C' 
```

# php - 将数组作为参数传递到 Oracle 存储过程

> ID：13730399
> 
> 赞同：0
> 
> 时间：2012-12-05T18:55:53.500
> 
> 标签：php, oracle, stored-procedures

我有点吃醋了。我有一个接受参数并返回查​​询结果的存储过程。该查询正在使用 IN 语句。

SP的结构如下：

```
CREATE OR REPLACE 
PROCEDURE EXAMPLE_SP
(
   arg VARCHAR2,
   argRS1 OUT cursors.rs
)
AS 
 l_test VARCHAR2(255) := arg;

BEGIN

  OPEN argRS1 FOR
    SELECT * FROM TABLE1
    WHERE LOCATION IN (l_test);

END EXAMPLE_SP; 
```

IN 语句中的值的数量可以是可变的。IN 的选项来自 UI 端的选定表单复选框。

我正在使用 PHP 来检索选定的复选框值。我已经尝试将这些值内爆成逗号分隔的字符串。

我的逻辑是查询将如下所示：

```
l_test = 'val1,  val2, val3';
SELECT * FROM TABLE1
WHERE LOCATION IN (val1, val2, val3); 
```

但这没有用。我不确定如何进行。提前感谢任何建设性的意见或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:11:12.517

我认为您选择的位置是 VARCHAR，因此您需要转换列表，如下所示

```
l_test = '''val1''||','|| ''val2''||','||''val3'''; 
```

这样您的最终查询看起来像

```
SELECT * FROM TABLE1
WHERE LOCATION IN ('val1', 'val2', 'val3'); 
```

你也可以这样做

```
CREATE OR REPLACE 
PROCEDURE EXAMPLE_SP
(
  arg VARCHAR2,
  argRS1 OUT cursors.rs
)
AS 
 l_test VARCHAR2(255) := arg;

 BEGIN
  l_test:=''''||replace(l_test,',',''',''')||'''';
  OPEN argRS1 FOR
    SELECT * FROM TABLE1
     WHERE LOCATION IN (l_test);

 END EXAMPLE_SP; 
```

**注意**：我没有测试过这个，但我认为这样你会达到你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:15:25.007

您可以使用 Oracle 文档中的 Oracle 示例：http: [//docs.oracle.com/cd/B28359_01/win.111/b28378/basfeat.htm#sthref207](http://docs.oracle.com/cd/B28359_01/win.111/b28378/basfeat.htm#sthref207)

看这里 - 返回一个表： [SQL 过程可以返回一个表吗？](https://stackoverflow.com/questions/13673502/can-an-sql-procedure-return-a-table/13746643#13746643)

这是另一个例子：

```
PACKAGE emp_actions IS
  TYPE EnameTabTyp IS TABLE OF emp.ename%TYPE INDEX BY BINARY_INTEGER;
  TYPE SalTabTyp IS TABLE OF emp.sal%TYPE INDEX BY BINARY_INTEGER;
  ...
  PROCEDURE hire_batch (ename_tab IN EnameTabTyp, sal_tab IN SalTabTyp, ...);
  PROCEDURE log_names (ename_tab IN EnameTabTyp);
END emp_actions; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:43:48.537

我会在不使用字符串操作的情况下做到这一点。从理论上讲，目前 SQL 注入的风险可能很小，因为您使用的是复选框，最好在一开始就实施良好的做法，因此如果有任何变化，您不会将自己置于危险之中。

第二个好处是您仍然可以使用列上的任何索引，如果您使用`like '%...`.

为此，您可以利用表函数和外部对象来填充您的“in”列表。

例如，我将从 USER_OBJECTS 返回 OBJECT_NAME。

如果我创建两个表：

```
create table tmp_test ( a number );
create table tmp_test2 ( a number ); 
```

和一个对象来保存表格列表，或者在您的案例位置中。

```
create type t_test_object is table of varchar2(30); 
```

接下来，这是您的过程的等价物。它是一个返回 SYS_REFCURSOR 的函数。它接受 T_TEST_OBJECT 作为参数，这意味着在传递给函数之前首先需要填充它。

```
create or replace function select_many (
       Ptest_object in t_test_object
       ) return sys_refcursor is

   l_curs sys_refcursor;

begin

   open l_curs for
    select object_name
      from user_objects
     where object_name in ( select *
                              from table(Ptest_object)
                                   );

   return l_curs;

end; 
```

最后，这是一个如何使用此设置的示例。请注意 T_TEST_OBJECT 的实例如何填充多个值。然后这个对象被传递给函数以返回您的光标。最后，要显示值，我会遍历光标。显然，您可能希望使用光标并以不同的方式填充 TYPE。

```
SQL> declare
  2
  3     l_nested_table t_test_object := new t_test_object();
  4     l_cursor sys_refcursor;
  5     -- Used for display demonstration only.
  6     l_object_name user_objects.object_name%type;
  7
  8  begin
  9
 10     l_nested_table.extend;
 11     l_nested_table(l_nested_table.last) := 'TMP_TEST';
 12     l_nested_table.extend;
 13     l_nested_table(l_nested_table.last) := 'TMP_TEST2';
 14
 15     l_cursor := select_many(l_nested_table);
 16     
 17     loop -- Display example, not really relevant
 18        fetch l_cursor into l_object_name;
 19        exit when l_cursor%notfound;
 20        dbms_output.put_line(l_object_name);
 21     end loop;
 22
 23  end;
 24  /
TMP_TEST
TMP_TEST2

PL/SQL procedure successfully completed. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:04:23.863

您可以将此逗号分隔的输入参数添加为 varchar() 并使用以下 where 语句：

```
where (','||l_test||',' like '%,'||LOCATION||',%') 
```

例如，如果`l_test='2,3,4,5'`我们`LOCATION=3`得到：

```
where (',2,3,4,5,' like '%,3,%') 
```

如果 LOCATION 值在此列表中，则为 TRUE。

# python - 用于列显示的 Python 分组

> ID：13730403
> 
> 赞同：2
> 
> 时间：2012-12-05T18:55:58.483
> 
> 标签：python, iteration

我有一组数据

```
data = (1,2,3,4,5,6,7,8,9,10) 
```

通常在 python 中，我会将它们分组以跨行显示`n`：

```
cols = 4
grouped = izip_longest(*(iter(data),)*cols) 
```

这给了我一个很好的行显示：

```
grouped = ( (1,2,3,4), (5,6,7,8), (9,10,None,None) ) 
```

在模板网站上，它看起来像

```
1  2  3  4
5  6  7  8
9  10 
```

现在我正试图将我的头包裹在不同的显示器上 - 沿着列和`n`跨行

```
1  4  7  10
2  5  8  
3  6  9 
```

因为这是用于网络模板，所以我需要生成一组这样的数据：

```
grouped = ( (1,4,7,10), (2,5,8,None), (3,6,9,None) ) 
```

老实说，我完全不知道如何最好地解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:58:05.070

您只需要一个电话[`zip()`](http://docs.python.org/2/library/functions.html#zip)：

```
In [10]: rows = 3

In [11]: zip(*itertools.izip_longest(*(iter(data),)*rows))
Out[11]: [(1, 4, 7, 10), (2, 5, 8, None), (3, 6, 9, None)] 
```

基本上，它使用与您完全相同的算法，然后[转置](http://en.wikipedia.org/wiki/Transpose)结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:01:19.890

您需要调整长度，然后重新压缩它：

```
>>> zip(*izip_longest(*[iter(data)]*3))
[(1, 4, 7, 10), (2, 5, 8, None), (3, 6, 9, None)] 
```

# python - 遍历非二叉树

> ID：13730404
> 
> 赞同：4
> 
> 时间：2012-12-05T18:56:00.357
> 
> 标签：python

我为节点制作了自定义类

```
class NodeTree(object):
    def __init__(self, name = None, children = None):
        self.name = name
        self.children = children 
```

并定义了一个创建树的函数（一个包含其子节点的节点）

```
def create_tree(d):
    x = NodeTree()
    for a in d.keys():
        if type(d[a]) == str:
            x.name = d[a]
        if type(d[a]) == list:
            if d[a] != []:
                for b in d[a]:
                    x.add_child(create_tree(b))
    return x 
```

输入是一个 dict，其中一个参数用于节点名称和一个列表，其子节点与父节点的形式相同。该函数工作正常，我已经制作了证明它的方法，但我找不到正确遍历它并获得树的高度的方法。我不知道“高度”是否是正确的术语，因为我知道它可能是矛盾的，我需要将节点计为度量单位，如下所示：

```
 parent
                                         |
                                         |
                                     ---------
                                     |       |
                                    child   child 
```

这棵树的高度是 2，我已经尝试了一切，从类中的计数器到标签，一切似乎都退化了，我从来没有得到正确的高度。我应该如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:17:04.917

要为您的树创建一个确定节点高度的递归`height`方法（即，从该节点到叶子的路径中的最大节点数）：

```
def height(self):
    if not self.children:  # base case
        return 1
    else:                  # recursive case
        return 1 + max(child.height() for child in self.children) 
```

其他树遍历也可以递归完成。例如，下面是一个生成器方法，它以“预先顺序”（即每个父节点在其子节点和死节点之前）生成树节点的名称：

```
def preorder(self):
    yield self.name
    for child in self.children:
        yield from child.preorder() # Python 3.3 only! 
```

该`yield from`循环中的语法在 Python 3.3 中是新的。您可以通过以下方式在早期版本中获得相同的结果：

```
 for descendent in child.preorder():
            yield descendent 
```

# jquery - 如何显示正在使用的媒体查询

> ID：13730405
> 
> 赞同：0
> 
> 时间：2012-12-05T18:55:59.567
> 
> 标签：jquery, asp.net-mvc, jquery-mobile, razor, media-queries

是否可以以某种方式显示在使用 Razor 视图引擎、JQuery 和 JQuery-Mobile 的 ASP.NET MVC 4 移动网站中使用的媒体查询？如果是，那怎么办？我知道我可以在桌面上使用 Chrome 来通过调整窗口大小并检查受影响的元素来查看正在使用哪个，但我希望能够在页面上显示它，这样我可以确定哪个正在使用在手机上使用。似乎在单个手机的纵向中使用了不同的媒体查询....我的意思是它看起来是一种方式，然后我再次从纵向变为横向再到纵向，然后纵向视图看起来像是在使用与以前不同的媒体查询。

解决方案：

我把它放在我的布局页面的底部（由于某种原因，它适用于 iphone，但不适用于 2.1 等较旧的 android）：

```
@if (true)
    {
        //Change this to false for production

        <text>
        <div id="version" data-role="footer" data-position="fixed"></div>
        <script type="text/javascript">
            function setFooterText(){
                $('#version').text('Media Selector: ' + $('#version').css('content'));
            }
            $(window).bind('resize', function (event) {
                setFooterText();
            }).bind('orientationchange', function (event) {
                setFooterText();
            });
            $(function () {
                setFooterText();
            });
        </script>
        </text>
    } 
```

然后在css中：

```
@media all and (max-width: 320px) {
    #version { content:"320px"; }
}
@media all and (max-width: 240px) {
    #version { content:"240px";}
}
etc... 
```

编辑：

Android 2.1 的浏览器不支持自定义 CSS 属性。我认为这主要是 HTML 5 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:24:02.367

您可以做的是为每个选择器创建一个虚拟类和元素，然后您可以使用 JavaScript 检查并检查其值。

例如：

```
<div id="version"></div>

#version {
    content:"300wide";
    display:none;
}

alert($('#version').css('content')) 
```

# ruby - espresso 中的资产破坏了我的应用程序

> ID：13730406
> 
> 赞同：0
> 
> 时间：2012-12-05T18:56:01.323
> 
> 标签：ruby

这是我的简单应用程序：

```
class Blog < E
  map '/'

  # actions goes here
end

app = EApp.new do

  # assets_url '/', true

  mount Blog
end

app.run server: :Thin, Port: 6040 
```

在我取消注释之前效果很好`assets_url '/', true`。

如果我这样做，我的所有路由都返回 404，并且只有指向 assets 文件夹中文件的路由有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:31:26.667

除了资产 URL，一切看起来都正确。

您正在将您的应用程序和资产服务器安装在同一个 URL 上 -`/`

资产服务器具有优先权，因此您的应用程序路由将不起作用。

只需将您的资产挂载到相应的URL `/assets`、、、、`/static``/etc`

```
app = EApp.new do

  assets_url '/assets', true

  mount Blog
end 
```

更新：从 0.4.6 版开始，资产服务器移至[Espresso Lungo](https://github.com/espresso/espresso-lungo)

所以安装`el`gem - `$ gem in el`- 或将其添加到`Gemfile`-`gem "el"`

# delphi - 使用 RegEx 从 Delphi 搜索 MS Word 文档中的单词并导入到 Delphi 应用程序

> ID：13730408
> 
> 赞同：0
> 
> 时间：2012-12-05T18:56:03.830
> 
> 标签：delphi, ms-word

我正在使用我们的实验室报告系统，并希望自动化一些任务。我们使用的系统不直观，使用word文档输入数据。有几个带有标题的段落（受保护的标题）。

我想复制一个段落中的一个短语并使用 Delphi 应用程序将其粘贴到另一个段落中

```
GetActiveOleObject('Word.Application'); 
```

我该如何使用正则表达式。好消息是我要复制的可搜索短语是大写的，而其他所有内容都是句子大小写。例子：

第 3 段标题：---> 收件人备注 <---- 这在文档中不可编辑（受保护）

1.  标本在此工作站的 FORMALIN 容器中收到

2.  在该工作站收到的样本是新鲜的，没有固定剂

我的结果必须是这样的：

第 4 段标题 ---> 接收方法 <----- 再次受保护

1.  福尔马林容器 <----- 这是我想从第一场比赛中粘贴的地方

2.  没有固定剂的新鲜<-----这里是第二场比赛……等等

所以我的感觉是有一个德尔福代码来搜索段落标题“接收者注释”和“接收方法”之间的大写字母，并在下一段中列出它们。

我使用delphi xe3，我知道如何将正则表达式与其他文件一起使用，但不使用delphi。任何输入、代码片段、示例等将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:52:28.757

好的，我终于让它工作了，如果有人需要，我会发布代码。我必须将文档复制到我的 delphi Memo 并使用正则表达式在那里工作，然后将其粘贴回我想要的位置。尽管该过程可能看起来很麻烦，但它执行得非常快。无论如何，我使用的 Word 文档通常只有一两页。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  DXRANGE, DXWORD: OleVariant;
  n : Integer;
  regexpr: TRegEx;
  Match: TMatch;
begin
  try
    DXWORD := GetActiveOleObject('Word.Application');

    DXRANGE := DXWORD.Documents.Item(1)
      .Range(DXWORD.Documents.Item(1).Range.Start, DXWORD.Documents.Item(1)
      .Range.End);
    DXRANGE.Copy;
    Memo1.Clear;
    Memo1.PasteFromClipBoard;
    regexpr := TRegEx.Create('\b[A-Z][A-Z][A-Z]+(?:\s+[A-Z]+)*\b');
    Match := regexpr.Match(Memo1.Text);
    n := 1;
    Memo2.Clear;
    while Match.Success do
    begin
      Memo2.Lines.Add(IntToStr(n) + Match.Value);
      Memo2.Lines.Add('');
      Match := Match.NextMatch;
      n := n + 1;
    end;
    Memo2.SelectAll;
    Memo2.CopyToClipboard;
    DXWORD.Selection.PasteSpecial(wdPasteRTF)
  except
    on E: exception do
    begin
      ShowMessage(E.Message);
    end;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T18:36:19.313

作为使用 Word（或任何办公应用程序）和 ActiveX Delphi 组件时的一般规则，是使用令人惊叹的宏记录器来查看它是如何做到的。

例如。

*   打开你的word文档
*   从工具菜单中选择[录制宏]
*   做你的搜索
*   将其复制到剪贴板
*   替换你的代码
*   做任何你需要做的事情。
*   停止宏

现在打开宏 VBA 管理器并查看 VBA 为您所做的操作生成的代码。这将使您对调用 delphi 代码所需的函数有一个很好的了解。

# java - 在 response.sendRedirect 中隐藏来自 url 的查询字符串参数

> ID：13730410
> 
> 赞同：0
> 
> 时间：2012-12-05T18:56:03.477
> 
> 标签：java, servlets, servlet-filters

我有一个 java servlet，它重定向到不同服务器上的 web 应用程序。

我想知道是否有办法隐藏查询字符串参数，以便客户端在地址栏中看不到它们。

```
response.sendRedirect("http://www.mywebapp.com/login.html?parameter1=value1&parameter2=value2"); 
```

有没有办法强制 sendRedirect POST 到页面并隐藏查询字符串？

编辑：用例。

*   用户访问[http://www.mywebapp.com](http://www.mywebapp.com)
*   它们会自动重定向到我的 servlet 过滤器
*   servlet 使用 SAML 将 SSO 处理到身份提供程序
*   一旦它收到 SAML 响应，我将现在经过身份验证的用户重定向回 mywebapp.com
*   我想将一些参数传递回 webapp。SAML 响应中的参数。但我不希望用户在 URL 中看到它们

显然， sendRedirect() 不是我想要的。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:59:05.313

No, you can't use POST in this scenario. When calling `sendRedirect()` this is what you send back to the client:

```
HTTP/1.1 302 Found
Location: http://www.mywebapp.com/login.html?parameter1=value1&parameter2=value2 
```

Browser interprets this and points user to that location.

Something tells me (maybe `login.html` name and two parameters) that you want to automatically login user on some web site). Don't go this way, sending username/password (both using GET parameters and inside POST) is really insecure.

Without knowing much about your use case it's probably the best solution to call `http://www.mywebapp.com/login.html` from your servlet, parse the response and return it to the user (so he will never really see `mywebapp` in his browser.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:59:27.093

You could connect to the other server from your servlet (`HttpConnection`) and copy the returned data. The user will only see your server.

An alternative is returning an HTML page that does send a POST form automatically after loading. The user will need to allow JS.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:59:49.830

您可以从服务器端转发请求，然后最后重定向到其他页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-25T21:09:36.867

我找到了一种从 Java 或 Android 项目中隐藏任何字符串的方法，它具有内部类的概念，使用 proguard 来隐藏它们[一个类是我的服务器端处理](https://i.stack.imgur.com/aEi9s.png)

# jquery - 来自 jquery ajax 的列表未正确显示

> ID：13730413
> 
> 赞同：0
> 
> 时间：2012-12-05T18:56:22.733
> 
> 标签：jquery, ajax

我有一个 ajax 调用，它根据返回的内容创建一个列表：

```
$.ajax({
    type: "POST",
    url: "Home/FillTags",
    data: "{ 'mydataishere' }",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
     $('.placetags').html('');
     $('.placetags').append("<div class=\"tags\">");
        var i = 0;           
        $.each(msg, function () {
            $('.placetags').append("<li><a href='javascript:void(0)' onclick=\"fnKeyWordSearch({'type' : '2' , 'tag' : '" + msg[i].TagID + "'});\"> " + msg[i].Tag + "</a></li>");
            i++;
        });
     $('.placetags').append("</div>");
    }
}); 
```

ajax 正在返回正确的列表，这是我希望看到的呈现 HTML：

```
<div class="placetags">
  <div class="tags">
    <li>...</li>
    <li>...</li>
    <li>...</li>
  </div>
</div> 
```

但是......这就是我得到的......

```
<div class="placetags">
  <div class="tags"></div>
    <li>...</li>
    <li>...</li>
    <li>...</li>    
</div> 
```

我不明白为什么div 在's 被放入`.tags`之前被关闭。`<li>`我的 css 是写`<li>`在里面的`.tags` ，我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:05:17.360

只是不正​​确的嵌套，试试这个：

```
$('.placetags').append("<div class=\"tags\">");
    var i = 0;           
    $.each(msg, function () {
        $('.tags').append("<li><a href='javascript:void(0)' onclick=\"fnKeyWordSearch({'type' : '2' , 'tag' : '" + msg[i].TagID + "'});\"> " + msg[i].Tag + "</a></li>");
        i++;
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:02:21.867

您需要将它附加到您刚刚创建的 div 中。而不是容器 div

```
$('.placetags').append("<div class=\"tags\" />"); // <-- make sure you close or it breaks in IE
        var i = 0;           
        $.each(msg, function () {
            $('.placetags div.tags').append("<li><a href='javascript:void(0)' onclick=\"fnKeyWordSearch({'type' : '2' , 'tag' : '" + msg[i].TagID + "'});\"> " + msg[i].Tag + "</a></li>");
            i++;
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T18:59:13.963

This is because each(!) call to .append() will add a complete HTML element, including its content and its closing tag!

If you want to avoid this, you'd have to create the full HTML to be appended first, and only use .append() when the HTML is complete.

# php - 以纵横比显示图像

> ID：13730415
> 
> 赞同：0
> 
> 时间：2012-12-05T18:56:25.563
> 
> 标签：php

嗨，有人可以帮助我，我们有一个网站，我们可以加载全尺寸图像并根据横向或纵向动态调整大小为 150x200 像素或 200x150 像素。我们将调整大小的图像用于显示在表格中的索引页面，然后在站点中使用完整大小的图像。我的问题是，当我们在索引中调用图像时，我们有一个 100x100px 的图像区域，但这会将图像扭曲为 100x100px 而不是 100x75px 或 75x100px 这是我们使用的一段代码

```
 $dynamicList .= '<table width="100%" border="0" cellspacing="0" cellpadding="6">
        <tr>
          <td width="20%" valign="top"><a href="product.php?id=' . $id . '"><img style="border:#666 1px solid;" src="inventory_images/resized_' . $id . '.jpg"  width="100" height="100" alt="' . $product_name . '" border="1" /></a></td>
          <td width="80%" valign="top">' . $product_name . '<br />
            £' . $price . '<br />
           <a href="product.php?id=' . $id . '">View Product Details</a></td>
        </tr>
      </table>';
    }
} else {
    $dynamicList = "We have no products listed in our store yet"; 
```

我尝试删除高度 100x width100 但这会导致图像呈现为 200x150px

我的问题是，如何将 200x150px 的图像渲染到 100x100px 的空间并保持主页是 rushleighs.co.uk 的纵横比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:00:38.467

您只需删除属性和 css 中的高度声明。这将保持纵横比。但是，如果要将图像包含在 100 x 100 中，则需要为图像创建一个容器并将其溢出设置为隐藏：

```
<div class="image_small">
    <img src="inventory_images/resized_<?php echo $id; ?>.jpg">
</div> 
```

和CSS：

```
.image_small{
    width:100px;
    height:100px;
    overflow:hidden;
}

.image_small img{
    width:100px;
    border:#666 1px solid;
} 
```

请注意，我写出的 html 好像它没有在 PHP 中回显，因为我的专业意见是您应该尽可能避免在 php 中回显 html。但是，对于那个 td 元素，您的 ACTUAL html 可能是这样的：

```
<td width="20%" valign="top"><div class="image_small"><a href="product.php?id=' . $id . '"><img src="inventory_images/resized_' . $id . '.jpg" alt="' . $product_name . '" border="1" /></a></div></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:34:06.137

您可以使用 ccs 样式的 max-width 和 max-height

```
<style>
    .img   {max-height:100px;max-width:100px;}
</style> 
```

我在[www.thomsonstravels.co.uk上的画廊中使用此功能](http://www.thomsonstravels.co.uk)

```
<?php
//I set the $_SESSION[wHeight] and $_SESSION[wWidth] when the site is first loaded
//and reset it when the browser is resized to the Screen Size and height.
function resize_values($image)
    {
        $maxWidth = $_SESSION[wWidth]; 
        $maxHeight = $_SESSION[wHeight];
        $img_size=getimagesize($image);
        $origWidth=$img_size[0];// Current image width
        $origHeight=$img_size[1];// Current image height

        // Check if the current width is larger than the maxWidth
        if($origWidth > $maxWidth)
            {
                $ratio = $maxWidth / $origWidth;   // get ratio for scaling
                $newWidth=$maxWidth; // Set new width
                $newHeight=round($origHeight * $ratio);  // Scale height by ratio
            }
        else 
            {
                //else set the new height and width to the original
                $newWidth=$origWidth;
                $newHeight=$origHeight; 
             }
        // Check if current height is larger than maxHeight
        if($newHeight > $maxHeight)
            {
                $ratio = $maxHeight / $newHeight; // get ratio for scaling
                $newHeight=$maxHeight;   // Set new height
                $newWidth=round($newWidth * $ratio);  // Scale width by ratio
            }
        $retval = "$newWidth|$newHeight";
        return $retval;
    }
//and to use this:
    $file="../images/my_image.jpg";
    $d=explode("|",resize_values($file)); //Call the function file name & path
    $resizeWidth = $d[0]; //retrieve width from the array
    $resizeHeight = $d[1];//retrieve the Height from the array
    echo"
    <img 
        src=\"$file\"
        style=\"
            width:$resizeWidth"."px;
            height:$resizeHeight"."px\"
    >";
?> 
```

# javascript - 将 onclick 添加到 CSS 类

> ID：13730417
> 
> 赞同：0
> 
> 时间：2012-12-05T18:56:28.370
> 
> 标签：javascript, jquery, css

对我来说，采用这种 CSS Flip onhover 并使其应用 CSS 过渡/类 onclick 的最佳方式是什么。

[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

如果有人可以在 jsfiddle 中为我构建一个工作示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:59:43.653

CSS does not have a CLICK event. You can use JavaScript to add a class on click, and have that CSS class perform the animation.

```
.flip {
  transform: rotateY(180deg);
  box-shadow: -5px 5px 5px #aaa;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:59:52.890

您可以创建首先进行翻转的 css 类。然后使用 javascript 将其分配给 click 事件中的元素。

CSS：

```
.flippingClass{
    ... flip ...
} 
```

Javascript：

```
$("#flipper").click(function () {
     $(this).addClass("flippingClass");
}); 
```

# java - 两个接口指定具有相同签名的方法，但指定具有不同的行为？

> ID：13730419
> 
> 赞同：6
> 
> 时间：2012-12-05T18:56:32.157
> 
> 标签：java

我有一些类`public class myClass implements A, B`，其中 A 和 B 都包含一个方法 `public int doSomething();`，但`A.doSomething`由接口指定做一些不同于`B.doSomething`.

我已经阅读[了在 Java 类中实现了具有相同方法签名的两个接口](https://stackoverflow.com/questions/9863835/two-interfaces-with-same-method-signature-implemented-in-java-class)，但这并不能真正解决我的问题，因为这些方法被覆盖以执行相同的操作，但正如我上面所说，我的问题是关于它们何时在做不同事情的接口。

例如，假设`A.doSomething()`应该返回`0`，而`B.doSomething()`应该抛出异常，并且违反任何一个都会导致应该将它们作为参数的方法出现问题。

有没有办法在java中做到这一点？如果是这样，实际上将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:59:29.523

根据[JLS](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#228059) （这与您想要的情况类似，可能不准确）

```
interface Fish { int getNumberOfScales(); }
interface StringBass { double getNumberOfScales(); }
class Bass implements Fish, StringBass {
    // This declaration cannot be correct, no matter what type is used.
    public ??? getNumberOfScales() { return 91; }
} 
```

不可能声明一个签名和返回类型与接口 Fish 和接口**StringBass**`getNumberOfScales`中声明的方法兼容的命名方法，因为**一个类不能有多个具有相同签名**和不同原始返回类型的方法（第 8.4 节） .

除非您通过添加代理（或）方法签名来更改您的设计，否则不可能做到您所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:33:46.257

您也许可以使用`Proxy`实例来执行此操作。有关（特别是答案的第二部分）的信息，请参阅[此问题。](https://stackoverflow.com/q/13368309/646634)`Proxy`

您编写的`InvocationHandler`将检查哪个接口正在用于调用该方法并委托给您的对象内的适当方法。您的实现如下所示：

```
public class MyClass {
    // Note that we aren't implementing the interfaces anymore

    public int doSomethingForA() {
        return 0;
    }

    public int doSomethingForB() {
        throw new IllegalArgumentException();
    }
} 
```

然后你的 InvocationHandler：

```
public class MyClassInvocationHandler implements InvocationHandler {

    private MyClass target;

    public MyClassInvocationHandler(MyClass target) {
        this.target = target;
    }

    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        try {
            if (method.getDeclaringClass().equals(InterfaceA.class))
                return MyClass.getMethod("doSomethingForA").invoke(target, args);
            else if (method.getDeclaringClass().equals(InterfaceB.class))
                return MyClass.getMethod("doSomethingForB").invoke(target, args);
            else
                throw new UnsupportedOperationException("Unsupported interface: " + method.getDeclaringClass());
        } catch (NoSuchMethodException ex) {
            throw new UnsupportedOperationException("Method not found", ex);
        } catch (IllegalAccessException ex) {
            throw new UnsupportedOperationException("Method was not public", ex);
        } catch (InvocationTargetException ex) {
            // May throw a NullPointerException if there is no target exception
            throw ex.getTargetException();
        }
    }
} 
```

然后要创建代理，您将传入两个接口：

```
Proxy.newProxyInstance(null, new Class<?>[] { InterfaceA.class, InterfaceB.class }, new MyClassInvocationHandler(mc)); 
```

我*认为*这会奏效。当您使用一个或另一个接口调用它时：

```
MyClass mc = new MyClass();
Object proxy = Proxy.newProxyInstance(null, new Class<?>[] { InterfaceA.class, InterfaceB.class }, new MyClassInvocationHandler(mc));
InterfaceA a = (InterfaceA) proxy;
a.doSomething();
InterfaceB b = (InterfaceB) proxy;
b.doSomething(); 
```

然后它*应该*传入`Method`具有不同声明类的对象。我不确定这是否是它的工作原理，因此需要对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:46:49.287

只有重载方法才有可能（不同的返回类型）

```
public interface IA {
int doSomething();
}

public interface IB {
void doSomething(String value) throws Exception;
}

public class B  implements IB, IA{
    @Override
    public void doSomething(String value) throws Exception {
        throw new Exception(value);
    }

    @Override
    public int doSomething() {
        return 0;
    }
} 
```

# ios - AVAssetWriterInputPixelBufferAdaptor appendPixelBuffer: EXC_BAD_ACCESS

> ID：13730422
> 
> 赞同：1
> 
> 时间：2012-12-05T18:56:44.430
> 
> 标签：ios, opengl-es-2.0, avfoundation, avassetwriter

在过去的几天里，我遇到了一个让我发疯的问题。这是关于 AVAssetWriterInputPixelBufferAdaptor appendPixelBuffer 方法的。无论我做什么，它总是在这条线上导致 EXC_BAD_ACCESS。我知道有几个帖子在谈论它，但没有一个可以帮助我。

这是我的情况：我正在使用 OpenGLES 渲染到纹理中，并且我想从这些纹理中创建视频。这是我的代码：

创建 FBO，附加纹理和像素缓冲区来填充渲染：

```
 glGenFramebuffers(1, &_secondFrameBuffer);
glGenRenderbuffers(1, &_depthRenderBuffer);

CVPixelBufferPoolCreatePixelBuffer(NULL, [_videoWriter.pixelBufferInput pixelBufferPool], &_fboTexturePixelBuffer);
CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault,
                                             _textureCache,
                                             _fboTexturePixelBuffer,
                                             NULL,
                                             GL_TEXTURE_2D,
                                             GL_RGBA,
                                             (int)size.width,
                                             (int)size.height,
                                             GL_BGRA,
                                             GL_UNSIGNED_BYTE,
                                             0,
                                             &_fboTexture);

glBindTexture(CVOpenGLESTextureGetTarget(_fboTexture), CVOpenGLESTextureGetName(_fboTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glBindRenderbuffer(GL_RENDERBUFFER, _depthRenderBuffer);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, size.width, size.height);

glBindFramebuffer(GL_FRAMEBUFFER, _secondFrameBuffer);

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(_fboTexture), 0);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, _depthRenderBuffer);

glBindFramebuffer(GL_FRAMEBUFFER, _secondFrameBuffer); 
```

AVAssetWriter 创建：

```
 _dataQueue = dispatch_queue_create("data_queue", NULL);
    _assetWriter = [[AVAssetWriter alloc] initWithURL:outputURL fileType:AVFileTypeQuickTimeMovie error:nil];

    int width = [UIScreen mainScreen].applicationFrame.size.width * [UIScreen mainScreen].scale;
    int height = [UIScreen mainScreen].applicationFrame.size.height * [UIScreen mainScreen].scale;

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:width], AVVideoWidthKey,
                                   [NSNumber numberWithInt:height], AVVideoHeightKey,
                                   nil];

    _assetWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings];
    _assetWriterInput.expectsMediaDataInRealTime = YES;

    NSDictionary *bufferAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                      [NSNumber numberWithInt:kCVPixelFormatType_32BGRA], kCVPixelBufferPixelFormatTypeKey,
                                      [NSNumber numberWithBool:YES], kCVPixelBufferOpenGLESCompatibilityKey,
                                      nil];

    _assetWriterInputPixelBufferAdaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:_assetWriterInput sourcePixelBufferAttributes:bufferAttributes];

    [_assetWriter addInput:_assetWriterInput];

    _presentationTime = kCMTimeZero;
    [_assetWriter startWriting];
    [_assetWriter startSessionAtSourceTime:_presentationTime]; 
```

然后，我只是尝试附加像素缓冲区...

```
- (void)appendPixelBuffer:(CVPixelBufferRef)pixelBuffer
{
dispatch_async(_dataQueue, ^{

    if (pixelBuffer != NULL) {
        [_assetWriterInputPixelBufferAdaptor appendPixelBuffer:pixelBuffer    withPresentationTime:_presentationTime];
        CMTime frameTime = CMTimeMake(1, 30);
        _presentationTime = CMTimeAdd(_presentationTime, frameTime);

    } else {
        NSLog(@"NULL PixelBuffer !");
    }
});
} 
```

崩溃 -> EXC_BAD_ACCESS

任何人都可以帮助我吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T09:02:45.857

我在方法中看到了您的问题`- (void)appendPixelBuffer:(CVPixelBufferRef)pixelBuffer`。如果您使用 ARC，请确保您的 pixelBuffer 未在异步队列上释放，以确保请尝试此代码。

```
- (void)appendPixelBuffer:(CVPixelBufferRef)pixelBuffer
{
   CVPixelBufferRetain(pixelBuffer);
   dispatch_async(_dataQueue, ^{
      if (pixelBuffer != NULL) {
        [_assetWriterInputPixelBufferAdaptor appendPixelBuffer:pixelBuffer    withPresentationTime:_presentationTime];
        CMTime frameTime = CMTimeMake(1, 30);
        _presentationTime = CMTimeAdd(_presentationTime, frameTime);
        CVPixelBufferRelease(pixelBuffer);
      } else {
        NSLog(@"NULL PixelBuffer !");
      }
   });
} 
```

# .net - 当用户悬停项目时更改silverlight AutoCompleteBox的颜色

> ID：13730428
> 
> 赞同：1
> 
> 时间：2012-12-05T18:57:15.223
> 
> 标签：.net, silverlight, silverlight-4.0, expression-blend, blend

作为标题，当用户悬停在展开的列表框中选择项目时，会有一种背景颜色突出显示文本。如何更改该背景颜色？我通过编辑模板尝试了几件事，但我很难得到它......

```
<Style x:Key="AutoCompleteBoxStyle1" TargetType="sdk:AutoCompleteBox">
    <Setter Property="IsTabStop" Value="False"/>
    <Setter Property="Padding" Value="2"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="BorderBrush" Value="{StaticResource MainBrush}" />
    <Setter Property="Background" Value="{StaticResource MarkerBrush}" />
    <Setter Property="Foreground" Value="{StaticResource BasicBrush}"/>
    <Setter Property="MinWidth" Value="45"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="sdk:AutoCompleteBox">
                <Grid Opacity="{TemplateBinding Opacity}">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="PopupStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.1" To="PopupOpened"/>
                                <VisualTransition GeneratedDuration="0:0:0.2" To="PopupClosed"/>
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="PopupOpened">
                                <Storyboard>
                                    <DoubleAnimation To="1.0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PopupBorder"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="PopupClosed">
                                <Storyboard>
                                    <DoubleAnimation To="0.0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PopupBorder"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="ValidationStates">
                            <VisualState x:Name="Valid"/>
                            <VisualState x:Name="InvalidUnfocused">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="ValidationErrorElement">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="InvalidFocused">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Visibility" Storyboard.TargetName="ValidationErrorElement">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsOpen" Storyboard.TargetName="validationTooltip">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <System:Boolean>True</System:Boolean>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <TextBox x:Name="Text" IsTabStop="True" Margin="0" Style="{StaticResource TextBoxStyle}"/>
                    <Border x:Name="ValidationErrorElement" BorderBrush="#FFDB000C" BorderThickness="1" CornerRadius="1" Visibility="Collapsed">
                        <ToolTipService.ToolTip>
                            <ToolTip x:Name="validationTooltip" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}" Placement="Right" PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}" Template="{StaticResource CommonValidationToolTipTemplate}">
                                <ToolTip.Triggers>
                                    <EventTrigger RoutedEvent="Canvas.Loaded">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="IsHitTestVisible" Storyboard.TargetName="validationTooltip">
                                                    <DiscreteObjectKeyFrame KeyTime="0">
                                                        <DiscreteObjectKeyFrame.Value>
                                                            <System:Boolean>true</System:Boolean>
                                                        </DiscreteObjectKeyFrame.Value>
                                                    </DiscreteObjectKeyFrame>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </ToolTip.Triggers>
                            </ToolTip>
                        </ToolTipService.ToolTip>
                        <Grid Background="Transparent" HorizontalAlignment="Right" Height="12" Margin="1,-4,-4,0" VerticalAlignment="Top" Width="12">
                            <Path Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" Fill="#FFDC000C" Margin="1,3,0,0"/>
                            <Path Data="M 0,0 L2,0 L 8,6 L8,8" Fill="#ffffff" Margin="1,3,0,0"/>
                        </Grid>
                    </Border>
                    <Popup x:Name="Popup">
                        <Grid Opacity="{TemplateBinding Opacity}">

                            <Border x:Name="PopupBorder" BorderThickness="0" Background="{TemplateBinding Background}" HorizontalAlignment="Stretch" Opacity="0">
                                <Border.RenderTransform>
                                    <TranslateTransform X="1" Y="1"/>
                                </Border.RenderTransform>
                                <Border BorderBrush="{StaticResource StrongBrush}"  BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="0" HorizontalAlignment="Stretch" Opacity="1.0" Padding="0">
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#FFDDDDDD" Offset="0"/>
                                            <GradientStop Color="#AADDDDDD" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.RenderTransform>
                                        <TransformGroup>
                                            <TranslateTransform X="-1" Y="-1"/>
                                        </TransformGroup>
                                    </Border.RenderTransform>
                                    <ListBox x:Name="Selector" BorderThickness="0" Background="Transparent" Foreground="{StaticResource StrongBrush}" ItemTemplate="{TemplateBinding ItemTemplate}"  ItemContainerStyle="{TemplateBinding ItemContainerStyle}"   ScrollViewer.HorizontalScrollBarVisibility="Auto"  ScrollViewer.VerticalScrollBarVisibility="Auto"/>

                                </Border>
                            </Border>
                        </Grid>
                    </Popup>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:26:17.503

你应该试试这个

```
<Style TargetType="input:AutoCompleteBox">
<Setter Property="IsTabStop" Value="False" />
<Setter Property="Padding" Value="2" />
<Setter Property="BorderThickness" Value="1" />
<Setter Property="BorderBrush">
    <Setter.Value>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFA3AEB9" Offset="0" />
            <GradientStop Color="#FF8399A9" Offset="0.375" />
            <GradientStop Color="#FF718597" Offset="0.375" />
            <GradientStop Color="#FF617584" Offset="1" />
        </LinearGradientBrush>
    </Setter.Value>
</Setter>
<Setter Property="Background" Value="#FFFFFFFF" />
<Setter Property="Foreground" Value="#FF000000" />
<Setter Property="MinWidth" Value="45" />
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="input:AutoCompleteBox">
            <Grid Opacity="{TemplateBinding Opacity}">
                <TextBox Padding="{TemplateBinding Padding}" Background="{TemplateBinding Background}" IsTabStop="True" x:Name="Text" Style="{TemplateBinding TextBoxStyle}" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" Foreground="{TemplateBinding Foreground}" Margin="0" />
                <Border x:Name="ValidationErrorElement" Visibility="Collapsed" BorderBrush="#FFDB000C" BorderThickness="1" CornerRadius="1">
                    <ToolTipService.ToolTip>
                        <ToolTip x:Name="validationTooltip" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}" Template="{StaticResource CommonValidationToolTipTemplate}" Placement="Right" PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                            <ToolTip.Triggers>
                                <EventTrigger RoutedEvent="Canvas.Loaded">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsHitTestVisible">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <system:Boolean>true</system:Boolean>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </ToolTip.Triggers>
                        </ToolTip>
                    </ToolTipService.ToolTip>
                    <Grid Height="12" HorizontalAlignment="Right" Margin="1,-4,-4,0" VerticalAlignment="Top" Width="12" Background="Transparent">
                        <Path Fill="#FFDC000C" Margin="1,3,0,0" Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z" />
                        <Path Fill="#ffffff" Margin="1,3,0,0" Data="M 0,0 L2,0 L 8,6 L8,8" />
                    </Grid>
                </Border>
                <Popup x:Name="Popup">
                    <Grid Opacity="{TemplateBinding Opacity}">
                    <Border x:Name="PopupBorder" HorizontalAlignment="Stretch" Opacity="0" BorderThickness="0">
                        <Border.RenderTransform>
                            <TranslateTransform X="1" Y="1" />
                        </Border.RenderTransform>
                        <Border.Background>
                            <SolidColorBrush Color="#11000000" />
                        </Border.Background>
                            <Border HorizontalAlignment="Stretch" Opacity="1.0" Padding="0" BorderThickness="{TemplateBinding BorderThickness}" BorderBrush="{TemplateBinding BorderBrush}" CornerRadius="0">
                                    <Border.RenderTransform>
                                        <TransformGroup>
                                            <TranslateTransform X="-1" Y="-1" />
                                        </TransformGroup>
                                    </Border.RenderTransform>
                                    <Border.Background>
                                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                            <GradientStop Color="#FFDDDDDD" Offset="0" />
                                            <GradientStop Color="#AADDDDDD" Offset="1" />
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <ListBox x:Name="Selector" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" ItemContainerStyle="{TemplateBinding ItemContainerStyle}" Background="{TemplateBinding Background}" Foreground="{TemplateBinding Foreground}" BorderThickness="0" ItemTemplate="{TemplateBinding ItemTemplate}" />
                            </Border>
                        </Border>
                    </Grid>
                </Popup>
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="PopupStates">
                        <VisualStateGroup.Transitions>
                            <VisualTransition GeneratedDuration="0:0:0.1" To="PopupOpened" />
                            <VisualTransition GeneratedDuration="0:0:0.2" To="PopupClosed" />
                        </VisualStateGroup.Transitions>
                        <VisualState x:Name="PopupOpened">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="PopupBorder" Storyboard.TargetProperty="Opacity" To="1.0" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="PopupClosed">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="PopupBorder" Storyboard.TargetProperty="Opacity" To="0.0" />
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="ValidationStates">
                        <VisualState x:Name="Valid" />
                        <VisualState x:Name="InvalidUnfocused">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="InvalidFocused">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ValidationErrorElement" Storyboard.TargetProperty="Visibility">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="validationTooltip" Storyboard.TargetProperty="IsOpen">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <system:Boolean>True</system:Boolean>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
            </Grid>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

# javascript - jQuery向非兄弟DIV ID添加/删除类？

> ID：13730432
> 
> 赞同：0
> 
> 时间：2012-12-05T18:57:26.317
> 
> 标签：javascript, css

我对 Javascript 比较陌生，并且遇到以下脚本的问题：

```
// Keep Focus On Site Menu //
function menuFocus() {
    $('#menu').addClass('hover');
}

function menuBlur() {
    $('#menu').removeClass('hover');
}

$(document).ready(function() {
    $('#submenu-mgmt').hover(menuFocus,menuBlur);
});

$(document).ready(function() {
    $('#submenu-label').hover(menuFocus,menuBlur);
}); 
```

本质上，当用户使用两个单独的 DIV ID 将鼠标悬停在辅助菜单系统上时，我试图在非同级 DIV ID 上保持“悬停”效果。我将其设计为包含 3 个 DIV ID，“#Menu”是标题菜单区域。'#Submenu-Mgmt' 和 '#Submenu-Label' 在到达时都是隐藏的，但可以通过单击显示/隐藏 DIV 的链接打开。

这是针对当前活动的页面的——虽然这个问题不会影响网站的成败，但当用户的鼠标悬停在子菜单上时，菜单区域会失去焦点，这将是一个不错的选择。

有问题的页面：http: [//www.parkthevan.com/index.php](http://www.parkthevan.com/index.php)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:05:16.737

将额外的子菜单 ID 添加到添加类功能应该可以做到。如果您的悬停类具有隐藏/显示类以外的其他显示质量，您也可以使用 .css。我会把它们都包括在这里给你。:) （注意 // 是 javascript 中的注释）您还希望对删除执行相同的操作 - 您只需要准备一次文档。

```
 function menuFocus() {
       $('#menu, #submenu-mgmt, #submenu-label').addClass('hover');
       // or
       //$('#submenu-mgmt, #submenu-label').css('display', 'block');
    }

    function menuBlur() {
       $('#menu, #submenu-mgmt, #submenu-label').removeClass('hover');
       // or
       //$('#submenu-mgmt, #submenu-label').css('display', 'none');
    }

    $(document).ready(function() {
       $('#submenu-mgmt').hover(menuFocus,menuBlur);
       $('#submenu-label').hover(menuFocus,menuBlur);
    }); 
```

# visual-studio-2008 - 使用 Crystal Reports 制作 Visual Studio 2008 项目的边距问题。

> ID：13730437
> 
> 赞同：2
> 
> 时间：2012-12-05T18:57:39.993
> 
> 标签：visual-studio-2008, printing, crystal-reports

我在 Crystal Reports 中制作了一些非常简单的标签，效果很好。现在，当我制作了一个非常简单的 Visual Studio 2008 程序来启动这些水晶报告时，边距略有下降。它增加了约 0.5 厘米的底部和右侧边距，并在左侧和顶部添加了一些非常小的边距，通常不会有什么大不了的，但它是一个 1 英寸的标签，所以空间是一个热门商品。

所以现在我把这些标签全部压扁在一起，右边和底部有空白。Visual Studio 中是否有设置或我缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:01:34.110

您的报告、页面设置配置是否链接到特定打印机？

我过去发现，防止这些问题的最简单方法是“解除关联”。

# time - java.util.calendar -> Calendar.add() 与夏令时

> ID：13730438
> 
> 赞同：3
> 
> 时间：2012-12-05T18:57:41.307
> 
> 标签：time, calendar, save, dst

我的服务器设置为“美国/圣保罗”时区，今年 10 月 21 日开始夏令时。

为什么如果我这样做

```
public static void main(String[] args){

    Calendar d1 = new GregorianCalendar(2012, 9, 19, 0, 0, 0);

    Calendar d2 = new GregorianCalendar(2012, 9, 22, 0, 0, 0);

    while(d1.compareTo(d2) <= 0){
        System.out.println("\nBEFORE: " + d1.getTime());
        d1.add(Calendar.DAY_OF_MONTH, 1);
        System.out.println("AFTER: " + d1.getTime());
    }

} 
```

我有这个输出

之前：2012 年 10 月 19 日星期五 00:00:00 BRT

之后：2012 年 10 月 20 日星期六 00:00:00 BRT

之前：2012 年 10 月 20 日星期六 00:00:00 BRT

之后：2012 年 10 月 21 日星期日 01:00:00 BRST

之前：2012 年 10 月 21 日星期日 01:00:00 BRST

之后：2012 年 10 月 22 日星期一 01:00:00 BRST

当我这样做时**d1.add(Calendar.DAY_OF_MONTH, 1)**应该增加一天而不是小时，对吧？我怎样才能避免这种情况，并保持原来的时间，我不想使用 GMT-3，我现在需要 DST。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T19:00:58.473

由于 Sao_paulo 在过渡日 21 日没有午夜，因此 21 日将从凌晨 1 点开始。对于 22 日，您添加一天，然后保持凌晨 1 点，依此类推。为了使它正确，您应该从 19 日开始添加天数，而不是按前一天计算。

# haskell - Haskell 中 Data.Set 的 mapM

> ID：13730439
> 
> 赞同：1
> 
> 时间：2012-12-05T18:57:42.647
> 
> 标签：haskell

所以我有一些我想在其中使用的 Haskell 代码`Data.Set`。基本上是因为我没有过多地研究替代方案，并且需要一个结构来存储 Ord 的元素而不会重复。

我现在遇到了一种情况，我想为 Data.Set 使用类似 mapM 的东西，这样我就可以对集合的各个元素执行单子操作。我已经在[Hayoo](http://holumbus.fh-wedel.de/hayoo/hayoo.html)上搜索过类似的类型，`(a -> m b) -> Set a -> m (Set b)`但没有找到任何有用的东西。

我还调查了`Data.Traversable`一下，发现它有 []、Maybe 和 (Map k) 的实例，但没有 Set。

所以我的问题是：

1.  为什么Data.Set中没有Set的mapM？
2.  是否已经有一个包可以提供我错过的 mapM 之类的东西？
3.  想要在 Sets 上映射 M 是否气馁？（为什么以及有什么替代方案？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T19:13:49.083

主要问题是`Traversable`需要`Functor`和 集合不能是函子，因为它们需要`Ord`约束，而函子必须不受约束。

但是，集合是可折叠的，因此如果您不需要收集结果，可以使用`mapM_`from `Data.Foldable`。

如果您确实需要结果，您可以通过列表，例如

```
fromList <$> mapM f (toList s) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T21:00:00.647

您可能对[镜头](http://hackage.haskell.org/package/lens-3.6)包感兴趣。它为遍历（以及许多其他事物）提供了更通用的抽象。虽然它没有解决高效`mapM`for `Set`s 的问题，但它允许表达对受限数据类型的遍历：

```
import Control.Lens.Traversal
import Data.Traversable (traverse)
import Data.Set (Set)
import qualified Data.Set as Set

-- forall f. Applicative f => (a -> f b) -> Set a -> f (Set b)
setTraversal :: (Ord b) => Traversal (Set a) (Set b) a b
setTraversal f = (fmap Set.fromList) . traverse f . Set.toList

main = do
    print $ mapMOf setTraversal (\x -> [x+1, x-1]) $ Set.fromList [0, 10, 20] 
```

请注意，文档`Set.toList`说它需要进行列表融合。运气好的话（取决于所讨论的应用程序），中间列表可能会被融合掉。

# iphone - 如何制作流畅的 iOS 界面？

> ID：13730443
> 
> 赞同：1
> 
> 时间：2012-12-05T18:57:45.343
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiview

我已经学习了 5 个月，并制作了自己的应用程序，对我来说最难的是自定义 UIView，以及带有所有很酷的动画和东西的漂亮而漂亮的自定义 iOS 用户界面。

我更像是“功能专家”，但我真的很想为我的用户提供很棒的体验，所以你能给我推荐一些关于这个魔法的资源吗？

这里有一些很酷的例子，对我来说在代码中很难做到：

- 用手指滑动单元格并显示下方菜单。好的，我知道 center 属性，但是如何在单元格下方放置东西？

- 动态更改`frame`属性。我只是不能将一些按钮放在一起，仅此而已。

- 制作任何类型的自定义 UI 控件。这对我来说就像一个梦想。如果我需要一些东西，我唯一的选择是通过 GitHub 获取现成的控件。

像这样的小东西，因此我更喜欢 Interface Builder 来处理与 UIViews 相关的任何事情。

那么，您可以向我推荐任何资源、书籍、手册和文档吗？

我已经阅读了 UIView 官方文档并浏览了一些示例。我读过一本关于 Core Graphics 和 UIView 动画（不是 Core Animation）的书，并浏览了所有示例，但这对我来说仍然很难，所以还有其他好书或类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:59:38.730

Well creating good user interfaces is not about putting in particular controls, it's about making the interface very usable for what the user wants to accomplish, and there is no magic formula for this.

There are some concepts you could keep in mind. A good user interface should at least:

1.  Make it clear what the user should do next.
2.  Allow the user to accomplish this with a minimum of interaction.
3.  Get out of the user's way when not needed.

If you look at the above, you may notice that too much focus on particular controls can actually lead to poor interfaces as some things are used for the flash factor and can become obnoxious.

With that said, there are some usability metrics that you could use as a rough guide, and that should help someone with a more functional mindset. You can google those, but here's a page with some that should get you started: [http://www.measuringusability.com/blog/essential-metrics.php](http://www.measuringusability.com/blog/essential-metrics.php)

A while ago, I read a book called "The Humane Interface" which I thought had some good ideas on UIs. It's an older book, but I think much of what it had to say still rings true to this day.

Finally, go online and check out some web sites. Heaven knows the web is the perfect medium for how NOT TO design a user interface. Even big companies display shocking incompetence when designing what should be the most straight-forward of sites. See what the bad sites are and why you dislike them. See what the good sites are and why you like them. Sure these are web sites, but they still require interactivity and are therefore relevant.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:12:42.773

一些答案：

> - 用手指滑动单元格并显示下方菜单。好的，我知道 center 属性，但是如何在单元格下方放置东西？

使用方法`sendToBack()`将视图定位在所有其他子视图下。

> 动态更改框架属性。我只是不能将一些按钮放在一起，仅此而已。

用于`setCenter()`移动视图。

> 像这样的小东西，因此我更喜欢 Interface Builder 来处理与 UIViews 相关的任何事情。

对于自定义控件/视图，您必须更喜欢编程视图。只需查看您在 gitHub 中提到的此类自定义视图和控件的源代码，您就会获得更多的想法和方法。

# c - 如何检查缓冲区是否可写？

> ID：13730445
> 
> 赞同：0
> 
> 时间：2012-12-05T18:57:54.567
> 
> 标签：c, buffer, system-calls

我正在编写一个覆盖一些系统调用的共享库。其中包括`read(int fd, void *buf, size_t count)`系统调用。这个库当然是在用户空间中。

所以，在我的库中，我正在捕捉`read()`来自应用程序的调用（用于`LD_PRELOAD`预加载我的库），做很多事情，并在某些时候将数据写入应用程序缓冲区（`void *buf`）。

**有没有办法让我检查整个应用程序缓冲区是否可写？**

大多数时候这不是问题，但我遇到过编写得很糟糕的应用程序，以至于他们会在调用中发布只读缓冲区，当我使用他们的缓冲区`read()`执行 a 时，导致我的代码出现段错误`memcpy()`目的地，这是有道理的，当然。

注意 1：我目前正在查看内核在实际`sys_read()`中是如何处理这种情况的，`fs/read_write.c`但这并不是那么容易理解。

注意 2：该解决方案应尽可能少地增加开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:28:00.163

尝试这个：

```
int fd = open("/dev/zero", O_RDONLY);
ssize_t ret = read(fd, dest, amt_to_write);
int err = errno;
close(fd);
if (ret<0 && err==EFAULT) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T22:01:32.977

这是@R 的一个调整。响应以减轻性能影响。

没有必要一直打开和关闭 /dev/zero。只需打开一次并保持打开状态。然后，每次尝试读取时，只需读取一个字节即可确定缓冲区是否可写。

```
#include <sys/types.h>
#include <sys/fcntl.h>
#include <unistd.h>   

int                
check_writable(char *buf)
{                         
    static int fd;
    int r;

    if (fd == 0) {
            fd = open("/dev/zero", O_RDONLY);
    }

    r = read(fd, buf, 1);

    if (r != 1) {
            return(0);
    }

    return(1);
}             

int
main()
{  
    char *s, wr[8], *rd = "read-only buf";
    int j, r;

    for (j = 0; j < 2; j++) {
        if (j == 0) {
            s = rd;
        }
        else {
            s = wr;
        }

        r = check_writable(s);
        if (r == 0) {
            printf("read-only buffer\n");
        }
        else {
            printf("writable buffer\n");
        }
    }
} 
```

# php - 我的 jQuery .ajax 脚本没有将 html 放在 div 中

> ID：13730454
> 
> 赞同：0
> 
> 时间：2012-12-05T18:58:39.870
> 
> 标签：php, jquery, mysql

我遇到了问题，当我单击“.page”按钮时，news.php 脚本的内容没有出现在“#newsdiv”中。Firebug 没有说有一些错误，当我在浏览器中运行 news.php 时，它很容易给我来自 MySQL 的数据，所以这是 js 错误，我找不到出错的地方，有人可以帮助我吗？

刚刚写了一些代码：

```
$(document).ready( function() {
        $('a.page').click(function() {
            var value = $(this).text();
            var result = null; 
            var scriptURL = "/ajax.executable.files/news.php?page=" + value; //url for ajax
            $.ajax({
                url: scriptURL,
                type: 'get',
                dataType: 'html',
                async: true,
                success: function(data) {
                        $('#newsdiv').html(data);   
                } 
            });
        });
}); 
```

PHP：

```
<?php
    mysql_connect('xxx', 'xxx', 'xxx');
    mysql_select_db('xxx');
    mysql_query('SET NAMES \'utf8\'');
    mysql_query("SET NAMES utf8");
    mysql_query("SET CHARACTER SET utf8");
    mysql_query("SET collation_connection = utf8_polish_ci");

    if(isset($_GET['page'])){
        $page = mysql_real_escape_string($_GET['page']);
    }
    else{
        $page = 1;
    }

    $page = $page - 1;
    $ile = 2;

    $od = $page * $ile;

    $sql = "SELECT * FROM xxx LIMIT $od, $ile";
    $sql = mysql_query($sql) or die(mysql_error());

    while($row = mysql_fetch_array($sql)){
        ?>
        <div class="newsholder">
                <div class="newsheader">
                    <h1><?php echo $row['title']; ?></h1>
                    <h2><?php echo $row['subtitle']; ?></h2>
                </div>
                <div class="newscontent">
                    <div class="<?php $result = $id % 2; if($result != 0){ echo("rightsideimg"); } else{ echo("leftsideimg"); } ?>">
                        <img src="<?php echo $row['image']; ?>" />
                    </div>
                    <div class="<?php $result = $id % 2; if($result != 0){ echo("leftsidesontent"); } else{ echo("rightsidecontent"); } ?>">
                        <?php echo $row['content']; ?>
                    </div>
                    <div class="clearfix"></div>
                </div>

                <div class="newsfooter">
                    <div class="newsgooterright">
                        <div class="button">
                            Czytaj wiecej
                        </div>
                    </div>
                    <div class="newsgooterleft">
                        <small>napisal <b><?php echo $row['author']; ?></b> dnia 26-11</small>
                    </div>
                </div>
            </div>
        <?php
    }

?> 
```

和用于制作按钮的 php

```
<?php
                    $offset = ceil($count / $ile);
                    for($i = 1; $i <= $offset; $i++){
                        echo("<a class=\"page\" href=\"javascript:void(0);\"><div class=\"page\">" . $i . "</div></a>");
                    }
                ?> 
```

所有文件的放置如下：

root/index.php 包含要单击的元素

带有 php 脚本的 root/ajax.executable.files/news.php

root/jscripts/news.js 和 js 用于使用 news.php

脚本正在使用的所有文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:04:15.373

您必须`return false;`在点击事件内部，否则点击会向上传播层次结构，如果有任何 HREF 值（或者即使为空），它将最终重新加载页面。

所以，在`$.ajax({...});`做一个`return false;`和事情之后应该没问题。

编辑：

将上面的脚本更改为以下内容并查看：

```
$(document).ready( function() {
    $('a.page').click(function() {
        var value = $(this).text();
        var scriptURL = "/ajax.executable.files/news.php?page=" + encodeURIComponent(value); //url for ajax
        $.ajax({
            url: scriptURL,
            type: 'get',
            dataType: 'html',
            async: true,
            success: function(data) {
                    $('#newsdiv').html(data);   
            } 
        });
        return false;
    });
}); 
```

另一个编辑：

由于标签`<div>`内部有一个，实际上将返回一个值而不是 1。因此，也删除该标签并使最后一个代码部分如下所示：`a``value = $(this).text()``<div>1</div>``<div>`

```
for($i = 1; $i <= $offset; $i++) {
    echo("<a href=\"\" class=\"page\" onclick=\"return false;\">".$i."</a>");
} 
```

那应该确保 ajax url 是`..../news.php?page=$i`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:06:55.623

进行以下更改 -

```
$('a.page').click(function(event) { // pass event to the function
    event.preventDefault(); // prevent the default action of the click
    var value = $(this).text(); 
```

单击该链接会将您带到一个新页面，这就是为什么您的控制台中没有结果以及 div 没有填充的原因。

# xml - 为什么我会收到有关 XML 声明的错误消息？

> ID：13730460
> 
> 赞同：3
> 
> 时间：2012-12-05T18:58:56.297
> 
> 标签：xml, google-chrome

`This page contains the following errors: error on line 1 at column 6: XML declaration allowed only at the start of the document`

当 XML 数据是这样时，这就是 Google Chrome 向我展示的内容：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <tbl Src="JD-API">
    <cols>
      <col ID="0"Nam="ID" Typ="3" Wid="50" />
      <col ID="1"Nam="Text" Typ="1" Wid="50" />
    </cols>
    <rows>
    </rows>
  </tbl> 
```

为什么它告诉我这个，这是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:00:29.730

删除声明前的前导空格`<?xml`。

# java - complexType with Simple XML framework?

> ID：13730462
> 
> 赞同：2
> 
> 时间：2012-12-05T18:59:00.507
> 
> 标签：java, xml, jaxb, xsd, simple-framework

how do i translate a complexType in an .xsd file to a SimpleXML annotated class structure. here's an example that's been translated to JAXB using xjc.exe. not sure what the equivalent annotation would be for the Simple framework.

schema:

```
<xsd:element name="PaymentTxnID">
    <xsd:complexType>
        <xsd:simpleContent>
            <xsd:extension base="IDTYPE">
                <xsd:attribute name="useMacro" type="MACROTYPE"/>
            </xsd:extension>
        </xsd:simpleContent>
    </xsd:complexType>
</xsd:element> 
```

JAXB generated:

```
public static class PaymentTxnID {
    @XmlValue
    protected String value;
    @XmlAttribute(name = "useMacro")
    protected String useMacro;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    public String getUseMacro() {
        return useMacro;
    }

    public void setUseMacro(String value) {
        this.useMacro = value;
    }
} 
```

how can i represent complexTypes with Simple?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:39:48.210

看来`@Text`注释就是答案。[在此处](http://simple.sourceforge.net/download/stream/doc/javadoc/)查看 javadoc 。该示例可在[Blaise Doughan 的](http://blog.bdoughan.com/2010/10/how-does-jaxb-compare-to-simple.html)“将对象映射到简单内容”部分下的博客条目中找到。

简单的框架翻译：

```
public static class PaymentTxnID {
    @Text
    protected String value;
    @Attribute(name = "useMacro")
    protected String useMacro;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    public String getUseMacro() {
        return useMacro;
    }

    public void setUseMacro(String value) {
        this.useMacro = value;
    }
} 
```

# android - 用于制作墙贴的 Facebook UI？

> ID：13730463
> 
> 赞同：0
> 
> 时间：2012-12-05T18:59:04.307
> 
> 标签：android, facebook-android-sdk

注意：我使用的是 3.0.2.b 版的 Facebook Android SDK。我不想使用任何已弃用的类/方法。

是否有一种标准化的方式来提示用户在墙上的帖子中输入文本 - 例如在分享照片时？

FBDialog 已弃用。[我在Android SDK Reference](https://developers.facebook.com/docs/reference/android/3.0)中没有看到任何其他明显的具有这种 UI 的内容。即使是[发布墙贴的教程也](https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)假设您已经拥有要发布的字符串。

奇怪的是，他们提供了完整的登录对话框，但会让开发人员为喜欢、分享、墙贴等创建 UI。

再说一次，我的问题是——我是否需要创建自己的 UI 来提示用户输入他们想要发布到墙上的消息，或者 SDK 中有什么东西可以标准化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:50:23.387

您应该制作一个 DialogListener 并在访问 facebook.dialog() 方法时正确使用它。

有关更多帮助，请参阅本文：[http ://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

```
public void postToWall() {
// post on user's wall.
facebook.dialog(this, "feed", new DialogListener() {

    @Override
    public void onFacebookError(FacebookError e) {
    }

    @Override
    public void onError(DialogError e) {
    }

    @Override
    public void onComplete(Bundle values) {
    }

    @Override
    public void onCancel() {
    }
});
} 
```

![http://www.androidhive.info/wp-content/uploads/2012/05/android_facebook_posting_to_wall.png](../Images/13f48adb7c9f871e81e694bc77f8bebe.png)

或者，您可以创建自己的函数，在其中创建一个带有 TextView 的对话框，用户在其中插入自己的消息，然后将此消息传递给 Bundle 内的 Facebook 对象，并带有参数！<- 如果您不想使用已弃用的侦听器，这是一种解决方法！

# c# - See if an integer in an array is divisible by another and print c#

> ID：13730466
> 
> 赞同：-1
> 
> 时间：2012-12-05T18:59:13.243
> 
> 标签：c#, arrays, 2d, division

I need to create a method that takes a 2d array as an argument to find out what numbers are divisible by 4 or 7\. The array of integers are 1- 100 in a 2d array in c#.

this is what i got

```
public void DivisbleBy4And7(int[,] pNumberMatrix)
{
    for (int i = 0; i < 10; i++)
    {
        for (int j = 0; j < 10; j++)
        {
            if (pNumberMatrix[i, j] % 4 || pNumberMatrix[i,j] % 7)
            {
                Console.WriteLine(pNumberMatrix[i,j];
            }
            else
            {
                Console.WriteLine("");
            }
        }
    }      
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:04:21.883

你已经很接近了。

```
 for (int i = 0; i < 10; i++)
    {
        for (int j = 0; j < 10; j++)
        { 
```

这仅适用于 10x10 阵列，请考虑

```
 for (int i = 0; i < pNumberMatrix.GetLength(0); i++)
    {
        for (int j = 0; j < pNumberMatrix.GetLength(1); j++)
        { 
```

C# 不会从`int`to转换`bool`，而且除法性要求`%`产生`0`. 所以

```
 // if (pNumberMatrix[i, j] % 4 || pNumberMatrix[i,j] % 7) 
           if ((pNumberMatrix[i, j] % 4) == 0 || (pNumberMatrix[i,j] % 7) == 0)
            { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:01:48.340

可能你必须写：

```
public void DivisbleBy4And7(int[,] pNumberMatrix)
{
    for (int i = 0; i < 10; i++)
    {
        for (int j = 0; j < 10; j++)
        {
            if (pNumberMatrix[i, j] % 4 == 0 || pNumberMatrix[i,j] % 7 == 0)
            {
                Console.WriteLine(pNumberMatrix[i,j];
            }
            else
            {
                Console.WriteLine("");
            }
        }
    }      
}`` 
```

# python - 从 ND 到 1D 阵列

> ID：13730468
> 
> 赞同：176
> 
> 时间：2012-12-05T18:59:13.363
> 
> 标签：python, numpy

假设我有一个数组`a`：

```
a = np.array([[1,2,3], [4,5,6]])

array([[1, 2, 3],
       [4, 5, 6]]) 
```

我想将其转换为一维数组（即列向量）：

```
b = np.reshape(a, (1,np.product(a.shape))) 
```

但这会返回

```
array([[1, 2, 3, 4, 5, 6]]) 
```

这与以下内容不同：

```
array([1, 2, 3, 4, 5, 6]) 
```

我可以将该数组的第一个元素手动转换为一维数组：

```
b = np.reshape(a, (1,np.product(a.shape)))[0] 
```

但这需要我知道原始数组有多少维（并在使用更高维时连接[0]）

是否有从任意 ndarray 获取列/行向量的与维度无关的方法？

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2012-12-05T19:01:14.270

使用[np.ravel](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html#numpy-ravel)（用于 1D 视图）或[np.ndarray.flatten](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html)（用于 1D 副本）或[np.ndarray.flat](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flat.html#numpy-ndarray-flat)（用于 1D 迭代器）：

```
In [12]: a = np.array([[1,2,3], [4,5,6]])

In [13]: b = a.ravel()

In [14]: b
Out[14]: array([1, 2, 3, 4, 5, 6]) 
```

请注意，尽可能`ravel()`返回 a `view`of `a`。所以修改`b`也会修改`a`. 当 1D 元素在内存中连续时返回 a，但`ravel()`如果是使用非单位步长（例如）对另一个数组进行切片，则返回 a。`view``copy``a``a = x[::2]`

如果您想要副本而不是视图，请使用

```
In [15]: c = a.flatten() 
```

如果您只想要一个迭代器，请使用`np.ndarray.flat`：

```
In [20]: d = a.flat

In [21]: d
Out[21]: <numpy.flatiter object at 0x8ec2068>

In [22]: list(d)
Out[22]: [1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-12-05T19:01:45.827

```
In [14]: b = np.reshape(a, (np.product(a.shape),))

In [15]: b
Out[15]: array([1, 2, 3, 4, 5, 6]) 
```

或者，简单地说：

```
In [16]: a.flatten()
Out[16]: array([1, 2, 3, 4, 5, 6]) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-02-06T07:42:52.627

我想看看答案中提到的函数的基准测试结果，包括[unutbu 的](https://stackoverflow.com/a/13730506/5300303).

还想指出，[numpy doc](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)建议使用`arr.reshape(-1)`以防万一视图更可取。（即使`ravel`在以下结果中速度更快）

* * *

> **TL;DR** :[`np.ravel`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)是性能最高的（数量很少）。

## 基准

职能：

*   [`np.ravel`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html): 如果可能，返回视图
*   [`np.reshape(-1)`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.reshape.html): 如果可能，返回视图
*   [`np.flatten`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html): 返回副本
*   [`np.flat`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flat.html): 返回[`numpy.flatiter`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.flatiter.html)。如同[`iterable`](https://docs.python.org/3/glossary.html#term-iterable)

numpy 版本：'1.18.0'

### `ndarray`不同大小的执行时间

```
+-------------+----------+-----------+-----------+-------------+
|  function   |   10x10  |  100x100  | 1000x1000 | 10000x10000 |
+-------------+----------+-----------+-----------+-------------+
| ravel       | 0.002073 |  0.002123 |  0.002153 |    0.002077 |
| reshape(-1) | 0.002612 |  0.002635 |  0.002674 |    0.002701 |
| flatten     | 0.000810 |  0.007467 |  0.587538 |  107.321913 |
| flat        | 0.000337 |  0.000255 |  0.000227 |    0.000216 |
+-------------+----------+-----------+-----------+-------------+ 
```

### 结论

> `ravel`and`reshape(-1)`的执行时间是一致的并且独立于 ndarray 的大小。但是，`ravel`速度稍快，但`reshape`在重塑尺寸方面提供了灵活性。（也许这就是为什么[numpy doc](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ravel.html)建议改用它的原因。或者在某些情况下`reshape`返回视图而`ravel`不是）。
> 如果您正在处理大尺寸的 ndarray，使用`flatten`可能会导致性能问题。建议不要使用。除非您需要数据副本来做其他事情。

### 使用代码

```
import timeit
setup = '''
import numpy as np
nd = np.random.randint(10, size=(10, 10))
'''

timeit.timeit('nd = np.reshape(nd, -1)', setup=setup, number=1000)
timeit.timeit('nd = np.ravel(nd)', setup=setup, number=1000)
timeit.timeit('nd = nd.flatten()', setup=setup, number=1000)
timeit.timeit('nd.flat', setup=setup, number=1000) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-02-11T17:53:41.330

### 对于具有不同大小的数组列表，请使用以下内容：

```
import numpy as np

# ND array list with different size
a = [[1],[2,3,4,5],[6,7,8]]

# stack them
b = np.hstack(a)

print(b) 
```

### 输出：

`[1 2 3 4 5 6 7 8]`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-16T19:17:04.343

最简单的方法之一是使用`flatten()`，例如这个例子：

```
 import numpy as np

 batch_y =train_output.iloc[sample, :]
 batch_y = np.array(batch_y).flatten() 
```

我的数组是这样的：

```
 0
0   6
1   6
2   5
3   4
4   3
.
.
. 
```

使用后`flatten()`：

```
array([6, 6, 5, ..., 5, 3, 6]) 
```

这也是此类错误的解决方案：

```
Cannot feed value of shape (100, 1) for Tensor 'input/Y:0', which has shape '(?,)' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-23T16:52:53.143

虽然这没有使用 np 数组格式，（懒得修改我的代码）这应该做你想要的......如果你真的想要一个列向量，你会想要转置向量结果。这完全取决于您打算如何使用它。

```
def getVector(data_array,col):
    vector = []
    imax = len(data_array)
    for i in range(imax):
        vector.append(data_array[i][col])
    return ( vector )
a = ([1,2,3], [4,5,6])
b = getVector(a,1)
print(b)

Out>[2,5] 
```

所以如果你需要转置，你可以这样做：

```
def transposeArray(data_array):
    # need to test if this is a 1D array 
    # can't do a len(data_array[0]) if it's 1D
    two_d = True
    if isinstance(data_array[0], list):
        dimx = len(data_array[0])
    else:
        dimx = 1
        two_d = False
    dimy = len(data_array)
    # init output transposed array
    data_array_t = [[0 for row in range(dimx)] for col in range(dimy)]
    # fill output transposed array
    for i in range(dimx):
        for j in range(dimy):
            if two_d:
                data_array_t[j][i] = data_array[i][j]
            else:
                data_array_t[j][i] = data_array[j]
    return data_array_t 
```

# fips - FIPS 140-2 Level 1 Certification

> ID：13730469
> 
> 赞同：0
> 
> 时间：2012-12-05T18:59:20.383
> 
> 标签：fips

I have a custom Android device. I need to protect the data-at-rest with FIPS certified (140-2 Level 1) cryptographic module. I have several questions

1.  If such cryptographic module exist in open source?
2.  While saving data in sql-lite my custom application will use the certified cryptographic module. What happens if user download some application which does not use the certified cryptographic module to store data.
3.  Is there a ballpark $ and time estimates for getting a cryptographic module certified? Can I start the certification process directly with any of these labs (http://csrc.nist.gov/groups/STM/testing_labs/index.html) or do I need to through some 3rd party?

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:48:47.043

1.  OpenSSL 已通过 FIPS 认证。但是，如果您在设备上通过 FIPS 认证，您可以使用任何您想要的加密库。在认证过程中，您将对加密库的算法进行算法测试，这将为您的设备认证库。即使您使用 OpenSSL，您也可能必须修改库以使其符合 FIPS。

2.  那么这是用户的错，而不是你的错。如果用户仅使用 FIPS 认证的组件，您将在公共安全策略中公布您的设备符合 FIPS。

3.  40,000 美元以上。您不需要第 3 方，但如果您以前从未这样做过，这会很有帮助，他们还会为您回答此类问题。为第三方再增加 40,000 美元以上。预计至少需要 6 个月，这是*在*对模块进行算法和功能测试之后。

# c++ - 如何在删除元素时防止重新散列 std::unordered_map？

> ID：13730470
> 
> 赞同：23
> 
> 时间：2012-12-05T18:59:20.293
> 
> 标签：c++, map, iterator, hashtable, unordered-map

我有一个 std::unordered_map ，我将从迭代中删除元素。

```
auto itr = myMap.begin();
while (itr != myMap.end()) {
    if (/* removal condition */) {
        itr = myMap.erase(itr);
    } else {
        ++itr;
    }
} 
```

我想阻止地图执行任何昂贵的操作，直到我完成删除所有需要删除的元素。我有正当的担忧吗？我是否误解了内部存储的工作原理？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-11-30T16:03:59.120

在 期间禁止无序容器重新散列`erase`：

[unord.req]/p14：

> 成员应仅使迭代器和对已擦除元素的`erase`引用无效，并保留未擦除元素的相对顺序。

[unord.req]/p9：

> 重新散列使迭代器无效，更改元素之间的顺序，并且...

你的代码是好的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T19:24:22.867

据我所知，`std::unordered_map`允许重新散列`erase(itr)`：

> C++11 表 103 -- 无序关联容器要求
> 
> `a.erase(q)`
> 
> 擦除 指向的元素`q`。返回值是紧跟`q` 在擦除之前的迭代器。
> 
> 平均情况 `O(1)`，**最坏情况 `O(a.size())`**

因此，您似乎确实有一个合理的担忧。至于解决它，我可以建议几种途径：

1.  确保这是一个实际问题而不是假设问题。分析应用程序，查看 C++ 库的源代码等。
2.  如果这是一个实际问题，请考虑使用不同的容器或不同的算法。
3.  考虑通过与每个元素关联的布尔标志简单地标记要删除的元素，并不时清除已删除的元素，从而摊销成本。
4.  正如@amit 在评论中所建议的那样，考虑尝试使用负载因子。即使仍然允许容器花费`O(a.size())`时间来擦除元素，不同的负载因子可能会对应用程序的实际性能产生影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T19:35:46.943

我不确定它会起作用，我在文档中没有找到它的确认 - 但如果 unordered_map 根据经典哈希表数据结构重新散列，您可以**[将 max_load_factor 设置](http://www.cplusplus.com/reference/unordered_map/unordered_map/max_load_factor/)**为非常高的值并将其重置回完成后正常（这将触发重新哈希）（或者如果您可以预测将删除多少元素，则为预测值）。

就经典哈希表而言，它应该可以工作，因为减小表时的 rehash 发生在大小较低时`1/max_load_factor`。

（不确定在 C++ 中是否如此，但我认为值得一试，因为它真的很容易实现）。

# c# - My program runs without code

> ID：13730480
> 
> 赞同：-4
> 
> 时间：2012-12-05T18:59:46.697
> 
> 标签：c#, visual-studio-2008, xna

I'am having a very weird problem with my program after I have been working on my XNA game, I don't know where my program get it's code from, because when I out comment all my code in visual studio 2008 c#, nothing should work, but the game still starts normally, without having any problems. I don't know how I can solve this problem, and I hope that one of you guys know why my program still is running fine after I out commented all my code to check. If I remove all my code the program also still runs, I hope one of you guys can tell me where Visual Studio 2008 is getting it's code from, or a solution for this problem.

Please tell me when you are having trouble understanding my problem.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:04:00.427

奇怪的是您的代码中有错误并且它没有编译。VS 可能正在运行您的程序的最后一次成功构建。

# sql - 将单列中的多行选择为单行

> ID：13730484
> 
> 赞同：2
> 
> 时间：2012-12-05T18:59:57.023
> 
> 标签：sql, sql-server

我想编写一个 SQL Server 查询，该查询将从以下示例表中检索数据：

```
Table: Person
ID      Name
--      ----
1       Bill
2       Bob
3       Jim

Table: Skill
ID      SkillName
--      -----
1       Carpentry
2       Telepathy
3       Navigation
4       Opera
5       Karate

Table: SkillLink
ID      PersonID        SkillID
--      --------        -------
1       1               2
2       3               1
3       1               5 
```

如您所见，SkillLink 表的目的是将各种（可能有多种或没有）技能与个人相匹配。我想用我的查询实现的结果是：

```
Name    Skills
----    ------
Bill    Telepathy,Karate
Bob     
Jim     Carpentry 
```

因此，对于每个人，我想要一个逗号连接的列表，其中包含指向他的所有 SkillNames。这可能是多个技能或根本没有。

这显然不是我正在使用的实际数据，但结构是相同的。

也请随时为这个问题建议一个更好的标题作为评论，因为简洁地表达它是我的问题的一部分。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T19:47:50.230

您将`FOR XML PATH`为此使用：

```
select p.name,
  Stuff((SELECT ', ' + s.skillName 
         FROM skilllink l
         left join skill s
           on l.skillid = s.id 
         where p.id = l.personid
         FOR XML PATH('')),1,1,'') Skills
from person p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/2e1f4/9)

结果：

```
| NAME |            SKILLS |
----------------------------
| Bill | Telepathy, Karate |
|  Bob |            (null) |
|  Jim |         Carpentry | 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T19:35:31.167

您正在寻找的是类似于 SQL Server 的 FOR XML PATH('') 的东西，它将结果组合为行集

```
Select Person.Name, 
  (
     Select SkillName + ',' 
     From SkillLink 
     inner join skill on skill.id = skilllink.skillid
     Where SkillLink.PersonID = Person.ID FOR XML PATH('')
  )
as Skills
FROM Person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:34:11.173

您正在寻找的是类似于 SQL Server 的 FOR XML PATH 的东西，它将结果组合为一个行集

# php - Codeigniter 和来自 ajax 请求的数据

> ID：13730487
> 
> 赞同：0
> 
> 时间：2012-12-05T19:00:09.027
> 
> 标签：php, ajax, codeigniter, jquery

我已经玩了一段时间了，但无法让它工作。我正在使用 CodeIgniter 并单击按钮`$('.galName').click(initUpdate);`我正在调用函数：

```
function initUpdate()
{
    var id = $(this).attr('id').split('_')[1];
    //grab id from link update_xxxx

    //get gallery information
    $.ajax(
    {
        type: 'POST',
        url: 'ajax/update',
        data: id,
        dataType: 'json',
        success: function(json)
        {
            alert(json);
        }
    });
} 
```

我可以在设置 var 后提醒 id，这是正确的。这是 CodeIgniter 控制器中调用的函数。

```
public function update()
        {
            $id = $this->input->post('id');

            echo json_encode($id);
        } 
```

如果我设置`$id="something"`并且`alert(json)`它工作正常并提醒我设置的任何内容。但是，我的问题是`$id = $this->input->post('id');`它没有从 ajax 请求中提取我的数据。这一定是 CodeIgniter 中的错误做法，否则我无法找到解决方案。任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:04:04.427

您没有设置键/值对的键部分，请尝试

```
function initUpdate()
{
    var id = $(this).attr('id').split('_')[1];
    //grab id from link update_xxxx

    //get gallery information
    $.ajax(
    {
        type: 'POST',
        url: 'ajax/update',
        data: {"id": id},// set the "id" key
        dataType: 'json',
        success: function(json)
        {
            alert(json);
        }
    });
} 
```

# ruby - 如何阅读 Ruby 文档中的方括号

> ID：13730490
> 
> 赞同：1
> 
> 时间：2012-12-05T19:00:25.127
> 
> 标签：ruby, notation

我如何阅读这个参数列表？这是参数列表中的两个值还是只有一个？括号内的逗号是什么意思？

```
 fetch( key [,default] ) -> obj 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:04:43.267

我在该文档站点上没有看到解释用于参数列表的符号的任何地方。但是，方括号在编程文档中经常用于表示“可选”。所以这意味着`fetch`可以只用一个或两个参数调用该方法。如果你通过两个，显然你需要一个逗号。所以这两个调用是有效的：

```
a.fetch(k)
a.fetch(k, 5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:03:48.530

一些上下文在这里会有所帮助，但我相信它是在说：

“将密钥传递给 fetch 方法。如果您传递第二个参数，它将被使用，但如果您只传递密钥，则有一个默认值”

# c++ - 如何使用 decltype 实现不太通用的 std::is_constructible

> ID：13730492
> 
> 赞同：4
> 
> 时间：2012-12-05T19:00:30.863
> 
> 标签：c++

假设这是可能的，但我不太确定。基本上我正在寻找的是一种在编译时在使用默认构造函数或通过引用获取一个参数的构造函数之间切换的方法。

IE

```
T* create<T>()
{
    return new T(1); // if possible
}

T* create<T>()
{
    return new T(); // fallback to here
} 
```

我正在使用 VS2010 编译器，它不支持`std::is_constructible`，但我可以使用`decltype`.

我深入研究了 VS2012 type_traits 标头并查看了`std::is_constructible`实现，我有点转过身来。我不明白人们如何以这种方式编写代码。标头是我见过的最复杂的代码。无论如何，我看到它正在使用 decltype 并且让我思考，希望有经验的人可以为我提供答案。

**经过@ipc的回答后，我确定了以下代码**

```
// std::declval is not supported by VS2010
template <typename T> typename std::add_rvalue_reference<T>::type declval();

template <class T, class R0>
decltype(new T(declval<R0>()))
createInstance_(R0& r0, int = 0)
{
    return new T(r0);
}

template <class T, class R0>
T*
createInstance_(R0&, ...)
{
    return new T();
} 
```

上面的代码可以工作，但它确实混淆了 IntelliSense 引擎，无论如何我认为你可以通过简单地使用默认参数来省略额外的函数。我已经用 VS 2010 测试了这段代码，它可以正常编译并按预期运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:35:59.123

我没有 VS2010 来检查它是否在那里编译，但以下内容与您的示例相匹配。

```
template <typename T> // if std::declval is not supported by VS10
typename std::add_rvalue_reference<T>::type declval();

template <typename T>
decltype(new T(declval<std::string>()))
create_(std::string param, int) { return new T(param); }
template <typename T>
T * create_(std::string, ...) { return new T(); }

template <typename T>
T * create(std::string param) { return create_<T>(param, 0); }

int main()
{
  std::cout << *create<int>("a") << '\n';
  std::cout << *create<std::string>("b") << '\n';
} 
```

输出：

```
0
b 
```

# ruby-on-rails - 在控制器中访问模型方法

> ID：13730493
> 
> 赞同：0
> 
> 时间：2012-12-05T19:00:34.730
> 
> 标签：ruby-on-rails

我的 MVC 逻辑可能是错误的，但我想做的是从视图中获取用户输入并将该信息传递给数据库。但在此之前，我想通过分析一些正则表达式（然后将类型以及内容传递给数据库）来确定提交的数据类型。

但由于某种原因，我收到一个错误（未定义的方法“get_type”），我从模型中调用的方法不存在。我认为这种方法应该在模型中是错误的吗？

**控制器：**

```
 def create
    @post = Post.new(
      content: params[:post][:content]
      type: get_type(params[:post][:content])
    )
    @post.save
  end 
```

**模型：**

```
 def get_type
    if self.content =~ /(\.jpg|\.png|\.bmp|\.gif)$/
      return 'image'
    end
  end 
```

巨大的免责声明：我几天前才开始使用 ruby​​（和 rails 相关的）:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:02:09.613

您只需要调用模型：

```
 def create
    @post = Post.new(
      content: params[:post][:content]
      type: Post.get_type(params[:post][:content])
    )
    @post.save
  end 
```

并添加'self'关键字：

```
 def self.get_type(content)
    if content =~ /(\.jpg|\.png|\.bmp|\.gif)$/
      return 'image'
    end
  end 
```

但我认为**你应该在`before_create`声明**中设置类型：

```
class Post < ActiveRecord::Base
  #...
  before_create :set_type
  #...

  def set_type
    if self.content =~ /(\.jpg|\.png|\.bmp|\.gif)$/
      self.type = 'image'
    end
  end
end 
```

# .net - 如何调试 Windows Store 应用程序中的内存泄漏？

> ID：13730496
> 
> 赞同：8
> 
> 时间：2012-12-05T19:00:39.730
> 
> 标签：.net, windows-8, profiling, windows-runtime, windows-store

所以我有一个 .NET Windows Store 应用程序正在泄漏内存。我能做些什么呢？我用于 jetBrains 或 Red-Gate/ANTS 桌面应用程序的分析器工具不支持 Metro 应用程序（或者现在支持吗？）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T19:00:39.730

对于最简单的方法 - 跳到底部阅读有关使用 Visual Studio 2013 执行此操作的说明。

* * *

现在可能会有一些新工具——也许是更新后的 Visual Studio 中的一些东西，我很想找到这些工具，但我之前尝试过**WinDbg**并取得了一些成功。这是我关于如何做到这一点的旧笔记：

```
1\. Create dump file from process manager
2\. Run WinDbg (X64)
3\. File/Open Crash Dump… (Crtl+D)
4\. Run following:

lm
.load C:\windows\Microsoft.NET\Framework64\v4.0.30319\sos.dll
.sympath SRV*c:\localsymbols*http://msdl.microsoft.com/download/symbols
.symfix
.reload
!dumpheap -stat 
```

请注意，如果您的进程是 x86，特别是如果您在 x64 版本的 Windows 上运行 - 您将需要使用 x86 版本的调试器（WinDbg 提供两个版本）来保存转储。SOS 是 WinDbg 的托管内存调试扩展，不支持调试 x86 位进程的 x64 位转储。然后，您还需要分别更新 sos 路径，如下所示：

```
.load C:\windows\Microsoft.NET\Framework\v4.0.30319\sos.dll 
```

可能并非所有这些命令都是必需的，但这对我有用。

现在您可以找到似乎存在于太多实例中的对象的类型

```
!DumpHeap -type TypeName 
```

其中 type name 只是类型的名称 - 不需要完全限定的命名空间。

现在你可以检查是什么让这个对象在内存中：

```
!GCRoot Object_Address 
```

* * *

实时调试对我不起作用，因为当您附加调试器时应用程序似乎暂停了。我想我在某个地方看到了一个让应用程序留在内存中的选项，但我忘记了在哪里，但是对于内存分析 - 查看静态转储文件可能就足够了。

* * *

[您可以从此处](http://msdn.microsoft.com/en-US/windows/hardware/gg463009/)下载 WinDbg 作为 Windows SDK 的一部分或作为“Windows 调试工具”的独立下载。

要创建转储文件 - 转到任务管理器，右键单击进程并选择“创建转储文件”。

* * *

更多链接：

[http://blogs.microsoft.co.il/blogs/sasha/archive/2012/10/15/diagnosing-memory-leaks-in-managed-windows-store-apps.aspx](http://blogs.microsoft.co.il/blogs/sasha/archive/2012/10/15/diagnosing-memory-leaks-in-managed-windows-store-apps.aspx)

[http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-内存泄漏.aspx](http://blogs.msdn.com/b/delay/archive/2009/03/11/where-s-your-leak-at-using-windbg-sos-and-gcroot-to-diagnose-a-net-memory-leak.aspx)

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f3a3faa3-f1b3-4348-944c-43f11c339423](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/f3a3faa3-f1b3-4348-944c-43f11c339423)

[http://msdn.microsoft.com/en-us/library/bb190764.aspx](http://msdn.microsoft.com/en-us/library/bb190764.aspx)

[http://blogs.msdn.com/b/dougste/archive/2009/02/18/failed-to-load-data-access-dll-0x80004005-or-what-is-mscordacwks-dll.aspx](http://blogs.msdn.com/b/dougste/archive/2009/02/18/failed-to-load-data-access-dll-0x80004005-or-what-is-mscordacwks-dll.aspx)

* * *

*编辑

根据Stephen Toub[使用 Visual Studio 2012 进行的 .NET Memory Allocation Profiling -](http://blogs.msdn.com/b/dotnet/archive/2013/04/04/net-memory-allocation-profiling-with-visual-studio-2012.aspx) [**PerfView**](http://www.microsoft.com/en-us/download/details.aspx?id=28567)工具支持分析 .NET Windows Store 应用程序中的泄漏。[在此处查看](http://blogs.msdn.com/b/dotnet/archive/2012/10/09/improving-your-app-s-performance-with-perfview.aspx)Vance Morrison 的文章和视频演练。

* * *

*编辑 2

Visual Studio 2013 Preview 添加了一个新选项来分析转储文件中的托管内存堆。要做到这一点 - 只需在 Visual Studio 调试器中暂停您的应用程序，通过 Debug/Save Dump As 保存您当前的转储，然后恢复执行并使用您的应用程序，直到您怀疑发生泄漏并执行另一个转储。然后转到文件/打开/文件并打开第二个转储文件。在“操作”面板中转储摘要的右侧，您将看到“调试托管内存”操作。选择它，然后在“选择基线”中选择您的第一个转储文件。您将看到托管堆上的对象列表，按类型分组，具有计数差异。请注意，您通常会首先查看具有低、非零计数差异的对象以跟踪单个泄漏源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:25:53.687

Telerik JustTrace 支持 Windows 应用商店应用程序：[http ://www.telerik.com/products/memory-performance-profiler/justtrace-features.aspx](http://www.telerik.com/products/memory-performance-profiler/justtrace-features.aspx)

# c++ - f_close 出错（我的最终项目写入 SD 卡）

> ID：13730499
> 
> 赞同：1
> 
> 时间：2012-12-05T19:00:45.297
> 
> 标签：c++, c, eclipse, netburner

我是一名大学生，正在学习机器人技术的“入门”课程。今年年初，我们被告知要购买 Netburner 5270 板。这一年来，我们学习了一些基本代码，但现在我们的期末项目快到期了，但我遇到了一个错误。我的代码非常基本。我希望它首先检查按钮是否被按下，是否检查 dipswitch1 是否为高电平，如果是则打开 led1，打开伺服（开门），然后创建 - 写入字符串 - 并将文本文件关闭到我的SD卡。一切正常……70% 的时间。

这是应该为我的 SD 卡做所有我需要的功能

```
 void Enter_Door(char * FileName) {
    iprintf("\r\nCreating file: %s\r\n", FileName);
int i = 0;
F_FILE* fp;
do {
    fp = f_open( FileName, "a+" ); // Creating and Opening File
    i++;
    if (fp == 0) { /// Does NOT open
        OSTimeDly(TICKS_PER_SECOND / 2);
    }
} while (fp == 0 && i < 5);
if (fp == 0) {
    iprintf("\r\n Error in Opening:%s\r\n", FileName);
} else {

    const unsigned int write_buffer_size = 100;
    char write_buf[write_buffer_size];
    sniprintf(write_buf, write_buffer_size, "Person Entered at %ld seconds\r\n", Secs);
    int n = f_write( write_buf, 1, strlen( write_buf ), fp );
    iprintf("Wrote %d bytes: %s", n, write_buf);

    iprintf("Closing file %s\r\n\r\n", FileName);

    int rv = f_close( fp ); // Close a previously opened file of type F_FILE
    do {
            i++;
            if (rv != 0) { /// Does NOT open
                OSTimeDly(TICKS_PER_SECOND / 2);
            }
        } while (rv != 0 && i > 10);
    if (rv != 0) {
        f_close_PrintError(FileName);

        DisplayEffsErrorCode(rv);

    } 
```

** 我最近添加的两个 do while 循环是为了尝试重做调用，我不确定我是否写了那个写（这又是我的第一个编码课）

我的错误发生在 f_close 函数中。我将连续按下按钮 10 次，一切都会正常工作，但第 11 次我会得到错误，但第 12 次会再次工作？我的典型错误是： ***任务期间 f_close("Enter.txt") 出错（主要）；F_ERR_NOTOPEN

或者

***任务期间 f_close("Enter.txt") 出错（主要）；F_ERR_WRITE

或者

***任务期间 f_close("Enter.txt") 出错（主要）；F_ERR_NOTFORMATED

现在就像我说的那样，我并没有很多错误，但是当我这样做时，它就是这三个错误之一。我真的不知道发生了什么，甚至不知道如何尝试修复它。此代码正在 NBeclipse 上编写。如果有人有任何建议或提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:35:14.577

在以下代码中，您没有正确使用 f_close：

```
 int rv = f_close( fp ); // Close a previously opened file of type F_FILE
    do {
            i++;
            if (rv != 0) { /// Does NOT open
                OSTimeDly(TICKS_PER_SECOND / 2);
            }
        } while (rv != 0 && i > 10); 
```

尝试将 f_close 添加到循环中：

```
 int rv;
    i = 0;
    do {
            rv = f_close( fp ); // Close a previously opened file of type F_FILE
            if (rv != 0)  /// Does NOT open
                OSTimeDly(TICKS_PER_SECOND / 2);
            i++;
        } while (rv != 0 && i > 10); 
```

我不知道这是否会专门解决您的问题，但是查看您正在调用 f_close 并在循环之前将“rv”设置为该函数返回值的代码。一旦进入循环，您将递增“i”，然后检查“rv”的值。这重复了 10 次，然后退出循环。您需要在循环内调用 f_close 以便在每次迭代时设置“rv”。否则你只是在使用一个空循环。

此外，'i' 需要重新初始化为 0 才能再次使用它。如果不全面查看您的代码，我可以看到，如果在代码顶部打开文件时出错，那么“i”可能已经设置为 5。除非您打算开始值为 5 并通过 f_close 循环再运行 5 次，这是不好的做法。

# ms-access - 如何从 SQL/Access 中的字符串中仅检索字母数字？

> ID：13730500
> 
> 赞同：2
> 
> 时间：2012-12-05T19:00:51.863
> 
> 标签：ms-access

我有一列必须从数字和空格中清除，如下所示：

```
 XX = 
TERR
6 ST
3 ST
4 ST
 AVE
2 PL
2 PL
2 PL
2 PL
4 CT
2 PL
4 ST
3 ST
3 ST 
```

我的意思是，我需要与 Val() 相反的函数，但找不到它。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:08:59.830

确实没有此功能，但只要您的所有文本都采用**NUMBER TEXT**或**TEXT**格式（而不是**NUMBER TEXT NUMBER**），您就可以使用以下内容：

```
TRIM(Replace(Column, VAL(Column), '')) AS Result 
```

基本上，用`VAL`在文本中查找数字，然后用空格替换它，并修剪其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:22:57.550

您需要一个简单的函数，如 inverse of`Val()`来丢弃所有非字母字符。我不知道这样的事情。但是，基于正则表达式的解决方案很容易。下面的函数丢弃所有不是字母的字符。这是应用于您的一些示例输入的函数。

```
? OnlyAlpha("TERR")
TERR
? OnlyAlpha("6 ST")
ST
? OnlyAlpha(" AVE")
AVE 
```

您需要在 Access 应用程序会话中使用此功能。在从 Access 外部运行的查询中使用时，它将不可用……例如从经典的 ASP、VBScript、Dot.Net 等。

```
Public Function OnlyAlpha(ByVal strSource As String) As String
    Dim re As Object
    Set re = CreateObject("VBScript.RegExp")

    re.Global = True
    re.IgnoreCase = True
    re.pattern = "[^a-z]"
    OnlyAlpha = re.Replace(strSource, vbNullString)
    Set re = Nothing
End Function 
```

一条评论让我想到了性能，所以我提供了这个版本，我认为它的性能应该会更快。

```
Public Function OnlyAlpha(ByVal strSource As String) As String
    ' early binding requires reference to Microsoft
    ' VBScript Regular Expressions:
    'Static re As RegExp
    ' with late binding, no reference needed:
    Static re As Object

    If re Is Nothing Then
        'Set re = New RegExp ' early binding
        Set re = CreateObject("VBScript.RegExp") ' late binding
        re.Global = True
        re.IgnoreCase = True
        re.pattern = "[^a-z]"
    End If

    OnlyAlpha = re.Replace(strSource, vbNullString)
End Function 
```

您可以轻松地将该代码从后期绑定切换到早期绑定。早期绑定在开发过程中很有用，因为它允许 Intellisense 帮助您。在某些情况下，早期绑定可以明显更快。但是，在这种情况下，`RegExp`对象会被创建一次，然后重新用于以后对函数的调用。在对象创建期间早期绑定的任何速度优势都应该是无关紧要的。

# php - 使用 php 导入大型 mysql 数据库

> ID：13730502
> 
> 赞同：0
> 
> 时间：2012-12-05T19:01:03.530
> 
> 标签：php, mysql

我有一个大约 300mb 的 mysql 数据库，但不幸的是我无法使用 phpmyadmin 将此文件导入我的网络主机，而且我没有 shell 访问权限。

我尝试了以下替代方案

> MySQLDumper
> 
> 大转储

但可以将其插入数据库。

数据库已上传到 .sql 格式的文件夹。是否可以创建一个 php 脚本来读取 .sql 文件并执行查询？

使用 mysqldump 转储了 sql 文件。

下面是格式。（请不要说我删除了一些行，因为有这么多）

```
DROP TABLE IF EXISTS `prime_lands`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `hotels` (
  `hotel_id` int(11) DEFAULT NULL,
  `chain_id` int(11) DEFAULT NULL,
  `chain_name` varchar(100) DEFAULT NULL,
  `brand_id` int(11) DEFAULT NULL,
  `brand_name` varchar(100) DEFAULT NULL,
  `hotel_name` varchar(100) DEFAULT NULL,
  `hotel_formerly_name` varchar(100) DEFAULT NULL,
  `hotel_translated_name` varchar(100) DEFAULT NULL
...........
)

-- Dumping data for table `prime_lands`
--

LOCK TABLES `prime_lands` WRITE;
/*!40000 ALTER TABLE `prime_lands` DISABLE KEYS */;

INSERT INTO `prime_lands` VALUES (1,421,'Samed Resorts Group',921,'Samed Resorts Group','Sai Kaew Beach Resort','','Sai Kaew Beach Resort',.......................)

.................................... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:08:40.960

应该管用：

```
$run=   exec ('mysql -u username -p password database_name < filename.sql ', $out);
var_dump($run);
var_dump($out); 
```

可能更适合调试：

```
$out = shell_exec('mysql -u username -p password database_name < filename.sql');
var_dump($out); 
```

作为一个临时的，您可以要求您的主机为您运行命令，大多数“好”主机会帮助您解决这个问题。

# mysql - Rails 中的复杂 MySQL 查询

> ID：13730503
> 
> 赞同：1
> 
> 时间：2012-12-05T19:01:07.327
> 
> 标签：mysql, ruby-on-rails, activerecord

我们有关于 NCAA 运动员的信息以及这些运动员上高中的地方。我们想根据参加上述高中的 NCAA 运动员人数对高中进行排名。

我们有`players`, `teams`, `team_histories`, `accounts`, 和`player_to_team_histories`。an`account`代表一所学校（名称、位置、类型（大学、高中）），a`team`代表一个特定的球队`account`（男足、女排），a`team_history`代表某个特定`team`的一年（2012 年男足），a`player`代表运动员的传记信息（他们在哪里长大，他们上过哪所高中，他们的名字），a`player_to_team_history`代表 a`player`上的 a `team_history`（年份、尺寸、体重、位置的统计数据）。

我制定了以下 MySQL 查询来提取特定大学每所高中的运动员人数排名。我将分解下面的查询，从最里面的语句开始：

```
SELECT WrappedQuery.rank FROM
(SELECT 
    @rownum := @rownum+1 AS rank, q.Name, q.id
FROM    
    (SELECT @rownum := 0) counter, 
    (SELECT 
        Accounts.id, Accounts.Name, COUNT(Accounts.Name) AS count
    FROM
        player_to_team_histories
    INNER JOIN team_histories ON team_histories.id = player_to_team_histories.team_history_id
    INNER JOIN teams ON teams.id = team_histories.team_id
    INNER JOIN accounts ON accounts.id = teams.account_id
    WHERE
        accounts.AccountTypeId = 1 AND player_id IN (SELECT 
            player_id
        FROM
            player_to_team_histories
        WHERE
            player_to_team_histories.not_valid IS NULL AND team_history_id = (SELECT 
                team_history_id
            FROM
                player_to_team_histories
            INNER JOIN team_histories ON team_histories.id = player_to_team_histories.team_history_id
            WHERE
                player_to_team_histories.id = 574651))
    GROUP BY Accounts.Name
    ORDER BY count DESC) q) WrappedQuery
WHERE WrappedQuery.id = 7661 
```

**团队历史 ID**

```
SELECT 
    team_history_id
FROM
    player_to_team_histories
        INNER JOIN
    team_histories ON team_histories.id = player_to_team_histories.team_history_id
WHERE
    player_to_team_histories.id = 574651 
```

`team_history_id`这会为我们感兴趣的大学球队提取，这使我们可以获取我们选择的球员的队友（由 player_to_team_history.id = 574651 标识），因为所有队友都将具有相同的 team_history_id。

**队友**

```
SELECT 
    player_id
FROM
    player_to_team_histories
WHERE
    player_to_team_histories.not_valid IS NULL AND team_history_id = (SELECT 
        team_history_id
    FROM
        player_to_team_histories
            INNER JOIN
        team_histories ON team_histories.id = player_to_team_histories.team_history_id
    WHERE
        player_to_team_histories.id = 574651) 
```

我们使用该 team_history_id 来获取所选玩家的所有队友。然后我们使用玩家找到他们的高中。

**高中队**

```
SELECT 
    Accounts.id, Accounts.Name, COUNT(Accounts.Name) AS count
FROM
    player_to_team_histories
        INNER JOIN
    team_histories ON team_histories.id = player_to_team_histories.team_history_id
        INNER JOIN
    teams ON teams.id = team_histories.team_id
        INNER JOIN
    accounts ON accounts.id = teams.account_id
WHERE
    accounts.AccountTypeId = 1 AND player_id IN (SELECT 
        player_id
    FROM
        player_to_team_histories
    WHERE
        player_to_team_histories.not_valid IS NULL AND team_history_id = (SELECT 
            team_history_id
        FROM
            player_to_team_histories
                INNER JOIN
            team_histories ON team_histories.id = player_to_team_histories.team_history_id
        WHERE
            player_to_team_histories.id = 574651))
GROUP BY Accounts.Name
ORDER BY count DESC 
```

通过获取我们感兴趣的所有球员的`player_to_team_history`相关高中（高中的大学名单上的球员最多。`accounts.AccountTypeId = 1``accounts.id`

**排行**

```
SELECT WrappedQuery.rank FROM
(SELECT 
    @rownum := @rownum+1 AS rank, q.Name, q.id
FROM    
    (SELECT @rownum := 0) counter, 
    (SELECT 
        Accounts.id, Accounts.Name, COUNT(Accounts.Name) AS count
    FROM
        player_to_team_histories
    INNER JOIN team_histories ON team_histories.id = player_to_team_histories.team_history_id
    INNER JOIN teams ON teams.id = team_histories.team_id
    INNER JOIN accounts ON accounts.id = teams.account_id
    WHERE
        accounts.AccountTypeId = 1 AND player_id IN (SELECT 
            player_id
        FROM
            player_to_team_histories
        WHERE
            player_to_team_histories.not_valid IS NULL AND team_history_id = (SELECT 
                team_history_id
            FROM
                player_to_team_histories
            INNER JOIN team_histories ON team_histories.id = player_to_team_histories.team_history_id
            WHERE
                player_to_team_histories.id = 574651))
    GROUP BY Accounts.Name
    ORDER BY count DESC) q) WrappedQuery
WHERE WrappedQuery.id = 7661 
```

最后，我们对排名的每一行进行编号并抓取我们感兴趣的行。在这种情况下，我们对 AccountId 为 7661 的高中感兴趣。这是所选玩家就读的高中，这将告诉我们，在所有为当前大学名单贡献球员的高中中，我们选择的球员高中排名。

**如何在 Rails 中执行此操作**

这就是我迷路的地方。我将如何进行这些嵌套的连接/子查询和结果排名？

我完全理解这可能是解决这个问题的糟糕方法。将其分解为多个查询并在 Rails 中将所有内容拼接在一起会更好吗？

没有做 a `select_by_sql`，有什么地方我可以使用 Rails 让这更容易吗？

**版本**

```
Rails 3.2.1
Ruby 1.9.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:09:02.440

这可以使用 AREL 完成，但需要大量挖掘。但是我过去用来使子查询更容易的是使用[squeel](https://github.com/ernie/squeel)

“Squeel 让您可以使用更少的字符串和更多的 Ruby 来编写 ActiveRecord 查询，因为它使 ActiveRecord 下的 ARel 很棒更易于访问。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T11:28:15.220

虽然这并不能完全回答您的问题，但我建议您尝试这样做来解决您的问题。

获取现有的 SQL 查询并使用 SQL 模板 gem。

您可以尝试 基于[Yesql的](https://github.com/krisajenkins/yesql)[Yayql](https://github.com/gnarmis/yayql)之类的东西，但任何文本或 SQL 模板引擎都可以。

# python - 不使用幕后线程的 Python ssh 库？

> ID：13730507
> 
> 赞同：0
> 
> 时间：2012-12-05T19:01:14.430
> 
> 标签：python, multithreading, ssh, multiprocessing, futex

我们在混合线程和分叉时遇到问题，这与这篇博客文章中描述的基本相同：[http ://rachelbythebay.com/w/2011/06/07/forked/](http://rachelbythebay.com/w/2011/06/07/forked/)

（混合线程和分叉导致一些子进程挂在 FUTEX 调用上）

她的分析基本上是他们的 SSH 库正在创建各种线程，她得出的结论是他们不需要**使用 ssh**

我们需要 ssh，有人知道不产生线程的 python ssh 库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:21:52.167

SSH 是一个非常复杂的协议，它支持端口转发、X 转发、tty 等各种功能，因此不太可能有“简单”的实现。

至于多线程，有 twisted.conch，它的缺点是必须运行一个反应器，尽管它可能更容易集成。

`multiprocessing`另一种解决方案是使用 python 的包在工作人员中执行 SSH 工作。这些工作人员不需要分叉，而是会采取工作单元，做必要的 ssh 工作并报告结果。

# facebook - “检查 URL 时发生内部错误” - 是由于西里尔语域吗？

> ID：13730508
> 
> 赞同：1
> 
> 时间：2012-12-05T19:01:18.010
> 
> 标签：facebook, scraper

> **可能重复：**
> [在西里尔文中共享 url 时出错](https://stackoverflow.com/questions/13704841/error-sharing-url-in-cyrillic)

Facebook 调试器 sais：我们的 URL [http://конкурсконцепций.рф](http://%D0%BA%D0%BE%D0%BD%D0%BA%D1%83%D1%80%D1%81%D0%BA%D0%BE%D0%BD%D1%86%D0%B5%D0%BF%D1%86%D0%B8%D0%B9.%D1%80%D1%84)（它位于西里尔域区域'рф'，其规范 url 形式为[http://xn--e1agdbaatcfdnhn0a4cc.xn --p1ai/](http://xn--e1agdbaatcfdnhn0a4cc.xn--p1ai/)。

我想知道问题出在哪里？在西里尔域名或网站内容中还是其他？

PS [链接到调试器](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2F%D0%BA%D0%BE%D0%BD%D0%BA%D1%83%D1%80%D1%81%D0%BA%D0%BE%D0%BD%D1%86%D0%B5%D0%BF%D1%86%D0%B8%D0%B9.%D1%80%D1%84%2Fideas%2F)

# amazon-web-services - 当我们将只读副本提升到单独的 RDS 实例时会发生什么？

> ID：13730515
> 
> 赞同：9
> 
> 时间：2012-12-05T19:01:33.593
> 
> 标签：amazon-web-services, amazon-rds

我尝试将只读副本提升到单独的 RDS 实例。在此期间完成了将近 10 分钟。据我所知，它应该只是中断复制过程，同步时间滞后。但是我看到在 EC2 RDS 的情况下数据库实例也会重新启动。有人可以清楚地向我解释整个过程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-06T19:06:22.810

根据[http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ReadRepl.html](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ReadRepl.html)重启是该过程的一部分：

以下步骤显示了将只读副本提升到单可用区数据库实例的一般过程。

1.  停止将任何事务写入只读副本源数据库实例，然后等待对只读副本进行所有更新。数据库更新在源数据库实例上发生之后发生在只读副本上，并且这种复制“滞后”可能会有很大差异。使用 Replica Lag 指标确定何时对只读副本进行了所有更新。

2.  为了能够对只读副本进行更改，您必须在只读副本的数据库参数组中将 read_only 参数设置为 0。

3.  在只读副本上执行所有需要的 DDL 操作，例如创建索引。对只读副本执行的操作不会影响源数据库实例的性能。

4.  使用 RDS 控制台上的提升只读副本选项、CLI 命令 rds-promote-read-replica 或 PromoteReadReplica API 操作来提升只读副本。

注意 升级过程需要几分钟才能完成。当您提升只读副本时，复制将停止并重新启动只读副本。重启完成后，只读副本可用作单可用区数据库实例。

# c# - 优化 Linq Where，使用 key

> ID：13730516
> 
> 赞同：2
> 
> 时间：2012-12-05T19:01:36.173
> 
> 标签：c#, linq, c#-4.0, linq-to-objects

基础知识：

`IDictionary<TKey, TValue>`延伸`IEnumerable<T>`

```
public interface IDictionary<TKey, TValue>: .., 
    IEnumerable<KeyValuePair<TKey, TValue>>
{
  ... 
} 
```

**该类`Enumerable`提供了扩展方法，这些方法提供了`where`LINQ 中子句的实现**

```
 public static class Enumerable
 {
   ...

   public static IEnumerable<T> Where(this IEnumerable<T>, 
       bool Func<T> predicate) 
   {
       ...
   } 
 } 
```

使用 LINQ 时，编译器将查询语法转换为`Enumerable.Where`方法调用。

当`IEnumerable<T>`迭代从此方法返回的值时，将对集合的*每个项目进行谓词评估。*

对应的项目产生于结果。

所以像这样的请求：

```
var l_res = from n in List where n.key == 1 select n; 
```

将遍历`List`.

如果`List`implements `IDictionary<TKey, TValue>`，并且该`where`子句位于用作字典中键的属性上，我如何利用该键来避免遍历每条记录并执行查找？

我已经知道我可以测试它是否`IEnumerable<T>`也是一个`IDictionary<TKey, TValue>`实现，并选择哪个是最好的使用请求：

```
if(list is IDictionary<int, T>)
{
   var l_res = ((IDictionary<int, T>) list)[1]; 
}
else
{
   var l_res = from n in List where n.key == 1 select n ;
} 
```

但我想知道我是否遗漏了 LINQ 中存在的处理此类键控集合的内容。

注意：LINQ-to0SQL 提供程序使用`IQueryable<T>`和表达式树做同样的事情，但我的问题是关于 LINQ-to-Objects。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:11:16.690

不，你没有错过任何东西。[LINQ](http://msdn.microsoft.com/en-us/library/vstudio/bb397926.aspx)知道的唯一键控集合是[`Lookup<TKey, TElement>`class](http://msdn.microsoft.com/en-us/library/bb460184.aspx)，即便如此，它也没有做任何特别的事情，它只是归结为`Lookup<TKey, TElement>`implements `IEnumerable<IGrouping<TKey, TElement>>`; 所以实际上，您正在迭代[`IGrouping<TKey, TElement>`接口](http://msdn.microsoft.com/en-us/library/bb344977.aspx)实现。

[`IEnumerable<T>`也就是说，LINQ 对接口之外的接口](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)没有任何特殊知识；恰好[`IDictionary<TKey, TValue>`接口](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)扩展了`IEnumerable<KeyValuePair<TKey, TValue>>`，这就是为什么您可以首先对其执行操作的原因。

但是，对于具有特定查找机制的任何类型，您需要嗅探类型（在 LINQ 中经常这样做），然后在可能的情况下调用特定于类型的操作。如果类型嗅探失败，您可以求助于与`IEnumerable<T>`.

就像你在这里做的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:25:39.580

您可以`Where`在字典上实现自定义以分析传入的表达式，如果它看起来像键控访问，请使用特殊的字典工具。

在我看来，这只是一个理论上的选择。不应该这样做。相反，应该调整过滤机制，以便它以正确的方式使用字典。

另请注意，一旦您将不透明的代码传递`Func<T, bool>`给其他代码，这段代码就无法查看您传入的委托内部。它无法注意到存在键控访问。所以这就是为什么 LINQ to Objects*不能*做到这一点。

# mysql - 编写此 mysql 选择查询的更好方法

> ID：13730517
> 
> 赞同：0
> 
> 时间：2012-12-05T19:01:36.453
> 
> 标签：mysql

我有一个很长的查询正在占用资源并且需要重写它。它的明显问题是在 where 子句中使用了“not in”。我最初的想法是重写它，取消所有自连接并在子查询上执行“不存在”。关于这样做的任何想法，或者比那个更有效的想法？

这是查询：

```
SELECT a.referenceid,
       a.memberid AS d1,
       b.memberid AS d2,
       c.memberid AS d3,
       d.memberid AS d4,
       e.memberid AS d5,
       f.memberid AS d6
FROM   jos_comprofiler_members AS a FORCE INDEX (aprm)
       LEFT JOIN jos_comprofiler_members AS b FORCE INDEX (aprm)
              ON a.memberid = b.referenceid
                 AND b.accepted = 1
                 AND b.pending = 0
       LEFT JOIN jos_comprofiler_members AS c FORCE INDEX (aprm)
              ON b.memberid = c.referenceid
                 AND c.accepted = 1
                 AND c.pending = 0
       LEFT JOIN jos_comprofiler_members AS d FORCE INDEX (pamr)
              ON c.memberid = d.referenceid
                 AND d.accepted = 1
                 AND d.pending = 0
       LEFT JOIN jos_comprofiler_members AS e FORCE INDEX (pamr)
              ON d.memberid = e.referenceid
                 AND e.accepted = 1
                 AND e.pending = 0
       LEFT JOIN jos_comprofiler_members AS f FORCE INDEX (pamr)
              ON e.memberid = f.referenceid
                 AND f.accepted = 1
                 AND f.pending = 0
WHERE  a.referenceid = 1593
       AND a.accepted = 1
       AND a.pending = 0
       AND f.memberid = 1593
       AND b.memberid NOT IN ( 1593, a.memberid )
       AND c.memberid NOT IN ( 1593, a.memberid, b.memberid )
       AND d.memberid NOT IN ( 1593, a.memberid, b.memberid, c.memberid )
       AND e.memberid NOT IN (
           1593, a.memberid, b.memberid, c.memberid, d.memberid )
       AND f.memberid NOT IN ( 1593, a.memberid, b.memberid, c.memberid,
                               d.memberid, e.memberid )
LIMIT  0, 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:23:57.110

您的查询正在寻找 1593 距离 6 内的所有成员。反问：这与六度分离有关吗？

通常，在 SQL 中查找此类列表需要递归查询或一些非 SELECT 构造（循环、游标）。`not in`当列表由变量成员组成时，我不确定 MySQL 如何处理. 但是，我怀疑它正在为每个循环连接做某种嵌套循环连接。

建议：将`not in`语句移到`on`子句中。例如：

```
 LEFT JOIN jos_comprofiler_members AS c FORCE INDEX (aprm)
          ON b.memberid = c.referenceid
             AND c.accepted = 1
             AND c.pending = 0
             AND (c.memberId <> b.MemberId an c.MemberId <> a.MemberId and c.MemberId <> 1593) 
```

这可以改善事情。或者让他们变得更糟。但这是一个想法。

# php - 有效的数组测试和循环

> ID：13730519
> 
> 赞同：0
> 
> 时间：2012-12-05T19:01:43.560
> 
> 标签：php, performance

我有很多数组要测试，在执行以下操作方面是否有更好的方法：

```
if(is_array($data) && count($data) > 0) {

           foreach($data as $d) {

           }  
  } 
```

这段代码可以更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:04:49.357

对我来说看起来不错，但我宁愿使用`empty`然后做一个`count()`：

```
if(is_array($data) && !empty($data)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:04:50.683

如果你真的不确定是否`$data`真的包含一个数组？如果您进行了正确的编程`$data`，则不应该一次神奇地成为一个数组，而另一次又是另一个。

此外，您不仅可以遍历数组，还可以遍历实现`Iterator`.

在我自己做了一些测试之后，我知道`is_array`这是最快的检查方法（至少在我的电脑上`PHP 5.4.6-1ubuntu1.1 (cli)`）。我知道的唯一其他检查方法是：`(array) $data === $data`这比`is_array`

# asp.net-mvc-3 - 根据 ASP.NET MVC 3 中的选定 ID 为集合中的每个对象设置 SelectList 中的选定属性

> ID：13730521
> 
> 赞同：0
> 
> 时间：2012-12-05T19:01:45.820
> 
> 标签：asp.net-mvc-3, entity-framework, drop-down-menu, selectlistitem

跟进问题： [从分隔字符串填充列表属性](https://stackoverflow.com/questions/13713119/populate-a-list-property-from-delimited-string/13713238#13713238)

我遇到的问题是我的编辑视图中的下拉框没有根据 BugAssignment 模型中的 AssignedUserID 属性保留/选择正确的项目。

楷模：

```
public class BugAssignment
{
    public int BugAssignmentID { get; set; }
    public int BugNumber { get; set; }
    public int? AssignedUserID { get; set; }
    public virtual User AssignedUser { get; set; }
    public virtual Status Status { get; set; }
    public IEnumerable<SelectListItem> Users { get; set; }
}

public class BugAssignmentList
{
    public BugAssignmentList()
    {
        BugAssignments = new List<BugAssignment>();
    }
    public int BugAssignmentListID { get; set; }
    public string Name { get; set; }
    public List<BugAssignment> BugAssignments { get; set; }
} 
```

编辑/详细信息视图模型

```
public class BugAssignmentListDetailsViewModel
{
    public int BugAssignmentListID { get; set; }
    public string Name { get; set;}
    public List<BugAssignment> BugAssignments { get; set; }
} 
```

我的控制器中有以下两种方法：

```
 public ActionResult Edit(int id)
    {
        var balData = db.BugAssignmentLists.Include(bn => bn.BugAssignments).ToList();
        //this is a reference to the bug assignment list object whose ID was passed in
        BugAssignmentList bugAssignmentList = balData.Where(b => b.BugAssignmentListID == id).FirstOrDefault();
        //loop through the bug assignment list and for each bug assignment
        foreach (BugAssignment b in bugAssignmentList.BugAssignments)
        {
            //create the select list for each BugAssignment object
            b.Users = users.Select(u => new SelectListItem
            {
                Value = u.UserID.ToString(),
                Text = u.FullName,
                Selected = u.UserID == b.AssignedUserID //<<THIS IS WHERE IT IS MESSING UP
            });

        }
        BugAssignmentListDetailsViewModel detailsVM = new BugAssignmentListDetailsViewModel
        {
            BugAssignmentListID = id
        };
        if (bugAssignmentList != null)
        {
            detailsVM.BugAssignments = bugAssignmentList.BugAssignments;
            detailsVM.Name = bugAssignmentList.Name;
        }
        return View(detailsVM);
    }

    // POST
    [HttpPost]
    public ActionResult Edit(BugAssignmentListDetailsViewModel viewModel)
    {
        var balData = db.BugAssignmentLists.Include(bn => bn.BugAssignments).ToList();
        var users = db.Users.ToList();
        BugAssignmentList bugAssignmentList = balData.Where(b => b.BugAssignmentListID == viewModel.BugAssignmentListID).FirstOrDefault();
        bugAssignmentList.Name = viewModel.Name;
        bugAssignmentList.BugAssignments = viewModel.BugAssignments;

        if (ModelState.IsValid)
        {
            UpdateModel(bugAssignmentList, "BugAssignmentList");
            db.Entry(bugAssignmentList).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(bugAssignmentList);
    } 
```

看法：

```
<table>    
<thead>
    <th>
        Bug Number
    </th>
    <th>
        Assigned User
    </th>
</thead>
    @for(int i=0; i<Model.BugAssignments.Count(); i++)
    {
        <tr>
            <td style="text-align: center;">
                @Html.EditorFor(modelItem => Model.BugAssignments[i].BugNumber)
            </td>
            <td>
                @Html.DropDownListFor(modelItem => Model.BugAssignments[i].AssignedUserID, Model.BugAssignments[i].Users, "-- Select User --")
                @Html.HiddenFor(modelItem => Model.BugAssignments[i].BugAssignmentID)
            </td>
        </tr>
    }
</table> 
```

POST 工作正常。查看数据库，BugAssignmentList 中的 BugAssignments 集合中的每个 BugAssignment 都使用我的 Edit 视图的下拉框中的正确 AssignedUserID 进行更新，因此它不是 POST 方法。

问题出在 Edit(int id) 中。发生的事情很奇怪。我在 foreach 循环之前放置了一个断点，并查看了 bugList.BugAssignments 的内部。所有 AssignedUserID 都是正确的，但在循环完成后，我再次检查列表，BugAssignment.Users 中的所有 SelectListItems 都选择了相同的用户。

以下代码有什么问题会导致这种情况？

```
 foreach (BugAssignment b in bugAssignmentList.BugAssignments)
    {
        //create the select list for each BugAssignment object
        b.Users = users.Select(u => new SelectListItem
        {
            Value = u.UserID.ToString(),
            Text = u.FullName,
            Selected = u.UserID == b.AssignedUserID //<<THIS IS WHERE IT IS MESSING UP
        });

    } 
```

另外，作为旁注：我希望界面看起来像这样（这就是为什么我需要 SelectList 在 BugAssignment 模型上，除非有更简单的方法。我不想编写 BugAssignment 控制器/视图我希望有人能够快速为用户分配错误编号，如下所示： ![在此处输入图像描述](../Images/81927af613599364be2582b88ea07de7.png)

这是另一个屏幕截图，可以更好地显示正在发生的事情：

![在此处输入图像描述](../Images/6129085974e1f11cad664ab120b2cffd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:09:46.627

我猜这是闭包的问题。由于您在 lambda 中生成 SelectListItem，因此它仅获取第一个 b.AssignedUserID 的副本并在任何地方使用它。关于这方面的一些阅读材料： [C# 在 foreach 中重用变量是否有原因？](https://stackoverflow.com/questions/8898925/is-there-a-reason-for-cs-reuse-of-the-variable-in-a-foreach)

我认为这种修改可能会解决问题：

```
foreach (BugAssignment b in bugAssignmentList.BugAssignments)
    {
        var bugAssignedUser = b.AssignedUserID;
        //create the select list for each BugAssignment object
        b.Users = users.Select(u => new SelectListItem
        {
            Value = u.UserID.ToString(),
            Text = u.FullName,
            Selected = u.UserID == bugAssignedUser  //<<THIS IS WHERE IT IS MESSING UP
        });

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:10:18.750

我相信这是一个关闭问题。尝试创建一个本地副本`b.assignedUserID`：

```
foreach (BugAssignment b in bugAssignmentList.BugAssignments)
{
    var assignedUserID = b.AssignedUserID;

    //create the select list for each BugAssignment object
    b.Users = users.Select(u => new SelectListItem
    {
        Value = u.UserID.ToString(),
        Text = u.FullName,
        Selected = (u.UserID == assignedUserID),
    });

} 
```

# jquery-mobile - 如何在 ASP.NET MVC 4 Razor 移动网站中仅将单个视图锁定为纵向

> ID：13730530
> 
> 赞同：3
> 
> 时间：2012-12-05T19:02:13.927
> 
> 标签：jquery-mobile, razor, asp.net-mvc-4, screen-orientation

是否有可能，如果可以，我如何锁定特定视图以仅在使用 JQuery 和 JQueryMobile 的 ASP.NET MVC 4 Razor 移动网站中使用纵向或横向？例如，所有视图都可以具有纵向或横向视图，但我希望一个视图只能在纵向模式下查看，这样任何方向更改都不会影响视图。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:24:18.427

看了一些帖子后，我发现只有可能的解决方案，但 iOS 应用程序不可能。

我认为您想要类似[jQuery Mobile 锁定方向后的解决方案](https://stackoverflow.com/a/7010010/1853864)

# ssis - 查找转换 SSIS 中的错误输出和“不匹配输出”有什么区别

> ID：13730531
> 
> 赞同：1
> 
> 时间：2012-12-05T19:02:17.570
> 
> 标签：ssis

我想在 SSIS 中使用查找转换并将其连接到两个平面文件目标。我知道转换有两个绿色输出，但不能使用红色错误输出而不是“无匹配输出”和“重定向行”？有什么不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T17:48:00.497

使用 SSIS 中的查找转换，您可以控制如何处理“不匹配”情况。双击您的查找转换，然后在“常规”选项卡上，您可以通过选择以下选项之一来选择如何处理不匹配的行：

*   忽略失败：继续处理，就好像什么都没发生一样
*   失败组件：引发异常并停止处理数据流任务
*   将行重定向到错误输出：不是跟随绿色输出，而是将行移动到红色输出以单独处理。
*   将行重定向到不匹配输出：将行切换到辅助输出，允许您以不同于处理匹配数据的方式处理不匹配数据。

如果您右键单击查找并选择“显示高级编辑器”，您可以看到更多细节。跳转到“输入和输出属性”窗格，您可以看到“查找不匹配输出”和“查找错误输出”流之间的区别。

![查找转换高级编辑器](../Images/63f3c6eda83fc4fbf797c8766e7ca682.png)

“查找错误输出”是一个标准且不可编辑的输出流，可捕获错误并将错误详细信息添加到现有列集合中，允许您处理错误、记录错误、跟踪导致错误的行等。

“查找不匹配输出”允许您定义自己的列以传递到不同的输出流和/或对无法匹配的行进行一些不同的处理。一个很好的例子是使用“查找转换”来查看在处理时是否需要向数据库中的查找表添加新行。不匹配的行可以重定向到“无匹配输出”，分组以删除重复项，然后插入数据库，而其余行继续前进。

归根结底，这取决于您要做什么。如果您想处理错误（即截断，与处理不匹配行的方式不同，那么您可以使用“查找不匹配输出”来执行此操作。

就个人而言，我宁愿使用匹配/不匹配输出来处理已知条件，并保存“错误输出”以进行实际的意外异常处理。

# mysql - 从具有多行数据的两个表中选择不同的记录

> ID：13730538
> 
> 赞同：1
> 
> 时间：2012-12-05T19:02:37.233
> 
> 标签：mysql

我有两张桌子

```
Topic
----------------------
id  title
----------------------
1   Loops
2   Control Structure
3   Basics

Chapters
------------------------------------------------------
id  book_id topic_id chapter_number
------------------------------------------------------
1   1       1       1
2   1       2       2
3   1       3       3
4   2       1       5
5   2       3       2
6   3       3       1 
```

在搜索主题时，我想显示包含这些主题章节的 book_ids。具有主题 1 和 2 的 Book_id：**1**
具有主题 3 的 Book_Id：**1,2,3**
具有主题 1 和 3 的 BookId：**1**

这是我的查询：

```
SELECT DISTINCT chapter.book_id FROM chapter Inner Join topic ON topic.id = chapter.topic_id WHERE topic.id IN  ( '1,3'); 
```

但它返回 Book_ids of : 1 和 3 而它应该只返回 1。看来我的查询返回联合，而它应该返回一个交集。

有人可以帮我修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:34:57.353

这是[SQLFiddle 演示](http://sqlfiddle.com/#!2/f3835/18)。只需将此查询替换`'1,3'`为您需要的任何章节集：

```
select book_id from Chapters
where FIND_IN_SET(topic_id,'1,3')
group by book_id 
having 
count(*) =
(length('1,3')-length(replace('1,3',',',''))+1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:00:57.830

在“IN”中，您应该输入逗号分隔值。通过您的查询，您希望看到包含“1、3”字符串值而不是 1 或 2 或 3 个 int 值的子集。正确的查询如下

```
SELECT DISTINCT chapter.book_id 
FROM chapter 
Inner Join topic ON topic.id = chapter.topic_id 
WHERE topic.id IN  (1,3); 
```

或者如果你只想要 ID

```
SELECT DISTINCT book_id 
FROM Chapters 
WHERE topic_id IN (1,3); 
```

# xml - 什么是用于查找此内容的多分支 xpath 查询？

> ID：13730539
> 
> 赞同：-1
> 
> 时间：2012-12-05T19:02:39.240
> 
> 标签：xml, xpath, domxpath

这是我当前的 xpath 查询：

```
//node:Expr_Assign[subNode:var/node:Expr_Variable/subNode:Name/scalar:string='my_chinese_surname' and subNode:expr/node:Scalar_String/subNode:value/scalar:string='Qiu'] 
```

我试图在这个 xml 中找到它：

```
<?xml version="1.0" encoding="UTF-8"?>
<AST xmlns:node="http://nikic.github.com/PHPParser/XML/node" xmlns:subNode="http://nikic.github.com/PHPParser/XML/subNode" xmlns:attribute="http://nikic.github.com/PHPParser/XML/attribute" xmlns:scalar="http://nikic.github.com/PHPParser/XML/scalar">
 <scalar:array>
  <node:Expr_Assign>
   <attribute:startLine>
    <scalar:int>2</scalar:int>
   </attribute:startLine>
   <attribute:endLine>
    <scalar:int>2</scalar:int>
   </attribute:endLine>
   <subNode:var>
    <node:Expr_Variable>
     <attribute:startLine>
      <scalar:int>2</scalar:int>
     </attribute:startLine>
     <attribute:endLine>
      <scalar:int>2</scalar:int>
     </attribute:endLine>
     <subNode:name>
      <scalar:string>my_chinese_surname</scalar:string>
     </subNode:name>
    </node:Expr_Variable>
   </subNode:var>
   <subNode:expr>
    <node:Scalar_String>
     <attribute:startLine>
      <scalar:int>2</scalar:int>
     </attribute:startLine>
     <attribute:endLine>
      <scalar:int>2</scalar:int>
     </attribute:endLine>
     <subNode:value>
      <scalar:string>Qiu</scalar:string>
     </subNode:value>
    </node:Scalar_String>
   </subNode:expr>
  </node:Expr_Assign>
 </scalar:array>
</AST> 
```

它目前不工作。事实上我什至不能选择标量：数组。

查询有什么问题？

我认为这是名称空间。但是我无法注册它们，网址已经死了？[http://nikic.github.com/PHPParser/XML/node](http://nikic.github.com/PHPParser/XML/node)这不会导致任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:06:35.470

应该：

```
//node:Expr_Assign[subNode:var/node:Expr_Variable/subNode:name/scalar:string='my_chinese_surname' and subNode:expr/node:Scalar_String/subNode:value/scalar:string='Qiu'] 
```

注意`subNode:name`与`subNode:Name`

但是我是否可以建议像这样的表达式可能更具可读性，尽管根据 XML 的其余部分看起来它是否会完全按照您想要的方式工作

```
//node:Expr_Assign[.//scalar:string='my_chinese_surname'][ .//scalar:string='Qiu'] 
```

另请注意，命名空间 URI 不是 URL，它们不需要可解析才能使用。URL 格式通常用于命名空间 URI，因为一个人通常拥有该域，因此可以合理地确定其他人不会通过在该域中使用命名空间 URI 来创建命名空间冲突。命名空间 URI 可以很容易地成为 urn、uuid 或电子邮件地址。

# flash - FDT 为核心 Flash/AIR 类添加了不必要的导入。

> ID：13730542
> 
> 赞同：1
> 
> 时间：2012-12-05T19:02:42.820
> 
> 标签：flash, air, fdt

在 AIR 项目中工作时，FDT 会在不需要时导入 flash.filesystem.File 和该包中的其他其他类。即使在 FDT 中显示错误，它仍然可以编译和运行。这些不必要的导入的问题在于，FDT 将其显示为错误，如果不是，并且在与其他开发人员和其他 IDES（FlashBuilder 或 Intellij）一起工作时，这些 IDE 会删除这些文件系统导入。因此，每次我们提交 SVN 时，它都会不断地反复。

我做了一个非常快速的检查，情况如下：flash.filesystem、flash.data、flash.concurrent、flash.desktop、flash.filters 和 flash.html。

有没有办法纠正 FDT 中的这种行为？我没有看到，并在[http://bugs.powerflasher.com](http://bugs.powerflasher.com)上提交了一个错误，但我不确定它的活跃程度如何。

# vhdl - 为什么我的 VHDL 代码有锁存器？

> ID：13730543
> 
> 赞同：1
> 
> 时间：2012-12-05T19:02:56.250
> 
> 标签：vhdl, xilinx

*** 我在 Xilinx 14.3 中编写 VHDL 并针对 Nexys 2 板。***

根据我的阅读，闩锁来自不完整的 if/case 语句，或者没有在所有可能的路径中设置输出。

我已经多次查看我的代码，但仍然有两个锁存器。

```
WARNING:Xst:737 - Found 8-bit latch for signal <DR>. Latches may be generated from incomplete case or if statements. We do not recommend the use of latches in FPGA/CPLD designs, as they may lead to timing problems.
WARNING:Xst:737 - Found 8-bit latch for signal <P>. Latches may be generated from incomplete case or if statements. We do not recommend the use of latches in FPGA/CPLD designs, as they may lead to timing problems. 
```

现在，我收到了一些其他错误，因为一些信号没有被使用并且一大块被注释掉等等......但我的代码还没有到那里，现在这不是问题。

那么，为什么当每条路径都设置每个输出时，我仍然会在这段代码中获得锁存器？

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
--use IEEE.NUMERIC_STD.ALL;

-- Uncomment the following library declaration if instantiating
-- any Xilinx primitives in this code.
--library UNISIM;
--use UNISIM.VComponents.all;

entity project2vhd is
    Port ( CE_s : in  STD_LOGIC;
           A0 : in  STD_LOGIC;
           RD_s : in  STD_LOGIC;
           WR_s : in  STD_LOGIC;
           RESET : in  STD_LOGIC;
           ACK_s : inout  STD_LOGIC;
              Y1, Y2, Y3 : inout STD_LOGIC;

--           Din : in  STD_LOGIC_VECTOR (7 downto 0);       
--            Dout : out  STD_LOGIC_VECTOR (7 downto 0);
              D : inout STD_LOGIC_VECTOR (7 downto 0);

              EN_s : out STD_LOGIC;

           P : inout  STD_LOGIC_VECTOR (7 downto 0));

end project2vhd;

architecture Behavioral of project2vhd is

signal CR : STD_LOGIC_VECTOR (1 downto 0);
signal SR : STD_LOGIC_VECTOR (2 downto 0);
signal DR : STD_LOGIC_VECTOR (7 downto 0);

begin

process (WR_s, ACK_s, RESET, A0, RD_s)

begin

if (RESET = '1') then --if reset is high
    Y1 <= '0';
    Y2 <= '0';
    Y3 <= '0';
    D <= "ZZZZZZZZ";
    EN_s <= '0'; --check EN_s's value at reset
    P <= P;
    DR<= DR;

else
    D <= D;
    DR <= DR;
    P <= P;

--  if (CR(0) = '1') then --Mode 1      
--      
--      Y1 <= ((Y1 and (not Y2) and Y3) or 
--              (WR_s and ACK_s and (not Y2) and Y3));
--      Y2 <= '0';
--      Y3 <= (((not Y1) and (not Y2) and Y3) or 
--              (WR_s and ACK_s and (not Y2) and Y3) or 
--              ((not Y1) and (not Y2) and (not WR_s) and ACK_s) or 
--              ((not WR_s) and (not Y2) and Y3));
--      SR(2) <=(((not ACK_s) and (not Y2) and (not Y3)) or --obf
--              (WR_s and (not ACK_s) and (Y1) and (not Y2)) or 
--              (WR_s and (not ACK_s) and (not Y2) and Y3) or 
--              (WR_s and (not Y1) and (not Y2)));
--      SR(0) <= (((not Y2) and (not Y3)) or  --INTR_enable
--                  (WR_s and (not Y1) and (not Y2)) or 
--                  ((not WR_s) and (not ACK_s) and (not Y1) and (not Y2) and Y3));
--                          
--                          
--      if (CE_s = '1') then
--          D <= "ZZZZZZZZ";
--      
--      else
--          if (WR_s = '0' and A0 = '0') then --Write Data (MODE 1)
--              EN_s <= '0'; -- enable buffer   
--              
--              DR <= D;
--              P <= D;
--              
--          elsif (WR_s = '0' and A0 = '1') then --control Reg Mode (MODE 1 and 0)
--              EN_s <= '0'; -- enable buffer
--              
--              CR(0) <= D(0);
--              CR(1) <= D(1);
----                SR(0)
----                SR(1)
----                SR(2)
--              
--              
--          elsif (RD_s = '0' and A0 = '1') then -- Read Status (MODE 1)
--              EN_s <= '1'; -- disable buffer
--              
--              D <= DR;    
----                D <= "10101010"
--
--          else
--              EN_s <= '0'; -- enable buffer   
--              D <= "ZZZZZZZZ";
--
--          end if;
--      end if;
--  else --Mode 0

        SR <= "111";

        if (CE_s = '0' and WR_s = '0' and A0 = '1') then
            EN_s <= '0'; -- enable buffer   
            DR <= D;
            CR(1) <= D(1);
            CR(0) <= D(0);
            P <= P;

        elsif (CE_s = '0' and WR_s = '0' and A0 = '0') then
            EN_s <= '1'; -- disable buffer
            P <= DR; 
            DR <= DR;

        else 
            EN_s <= '0'; -- enable buffer   
            D <= "ZZZZZZZZ";
            DR <= DR;
            P <= P;

        end if;
--  end if;

end if;

end process;

end Behavioral; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:02:56.523

您是否删除了 的两个副本`DR <= DR;`？摆脱一开始的默认值和“其他”值。

并且不要只删除“else”，将其替换为`DR <= (others => '0');`或类似的，并且闩锁应该消失。有 2 种方法可以创建锁存器：`DR <= DR;`以及通过过程使 DR 未分配的路径。因此，仅删除或评论它不会完成这项工作。

如果您不想要锁存器，但确实希望 DR 在某些情况下保持其先前的值，则需要一个时钟进程，在这种情况下，您可以将 DR 保存在寄存器中。

在这种情况下，您通常只需在敏感度列表中设置时钟和复位，以及读取访问所需的任何信号（如果读取保持异步）。但全时钟设计是更好的做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:42:12.980

因为在各种条件下，DR 和 P 信号都分配给它们自己（即：DR <= DR;）所以它们不会改变，或者换句话说，保持它们的最后一个值。那是一个闩锁。

# unicode - 是否有“未找到字形”字符？

> ID：13730544
> 
> 赞同：30
> 
> 时间：2012-12-05T19:03:04.703
> 
> 标签：unicode, fonts, special-characters, glyph

假设我们有一个文本，其中包含一个无法显示的 Unicode 字符，因为我们的字体没有对应的字形。通常，会显示一个占位符，例如一个矩形块（见屏幕截图）。

是否有可靠地产生此字形的“未找到字形”字符？我想`"If the following text contains <insert character here> then you need another font..."`在 UI 中写一些类似的东西。

顺便说一句，我不是在谈论 �（[替换字符](http://en.wikipedia.org/wiki/U+FFFD)）。当无法从数据流中正确解码 Unicode 字符时，会显示该字符。它不一定会产生相同的字形：

![在此处输入图像描述](../Images/43a0306db8227cdae5bba95de5abe668.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-10-01T23:20:45.310

来自 Unicode 规范：

*   [http://unicode.org/charts/PDF/U25A0.pdf](http://unicode.org/charts/PDF/U25A0.pdf)

`U+25A1`□ 白色方块

*   *可用于表示缺失的象形文字*

*   → `U+20DE`$⃞ 组合封闭正方形

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-05T20:26:41.330

不，没有“未找到字形”字符。不同的程序使用不同的图形表示。一个空的窄矩形是一种常见的渲染，但不是唯一的。它也可以是一个带有问号的矩形，也可以是一个带有十六进制字符代码的矩形。

因此，最好将字符的小图像与字符本身一起显示，以便读者可以比较它们。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T19:06:43.740

glyph-not-found 字符由字体引擎和字体指定；它没有固定的字符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-20T19:51:42.707

Unicode 使用以下术语：

*   替换字形
*   缺少字形
*   可解释但不可渲染的角色

*Unicode 标准 (10.0)*没有定义它们的外观，但它在第 5.3 章 [ PDF []](http://www.unicode.org/versions/Unicode10.0.0/ch05.pdf#G7730)中建议实现显示

> [...] 独特的字形，给出了它们类型的一些一般指示 [...]

将它们与“未分配的代码点”区分开来。他们举了一些例子：

> [![](../Images/4fce1a0bf243dfe55f323c94985c1f34.png)](https://i.stack.imgur.com/6xlbx.png)

Unicode[词汇表条目说](http://unicode.org/glossary/#replacement_glyph)：

> 它通常显示为一个开放的或黑色的矩形。

* * *

**tl; dr：**没有标准化的外观/字形，这取决于实施。为了帮助用户，实现可以显示指示无法显示的字符类型的字形。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-05T22:49:40.523

使用像 U+10FFFF（在 Unicode 空间的最末端）这样的非字符，它 99.99% 肯定不会在任何健全字体的 cmap 表中找到。至少没有已知的 Windows 系统字体将该非字符映射到字形，也极不可能有任何 Linux/Mac 系统字体。甚至包罗万象的 Last Resort 字体（[http://www.unicode.org/policies/lastresortfont_eula.html](http://www.unicode.org/policies/lastresortfont_eula.html)) 似乎没有映射它。因此，虽然在 Unicode 中没有定义将映射到 .notdef 字形的官方“未找到字形”字符，但实际上上述非字符保证显示该字形，无论该特定字体中的字形设计是什么。.notdef 字形（OpenType 中的字形 id 0）可能是一个简单的空心矩形（标准）、带有 x 的框、带有问号的框、偶尔空白（这是不好的做法），有时还有一些奇怪的东西，例如螺旋（在 Palatino Linotype 中） .

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-15T08:02:56.133

另外，（据我所知）日语使用GETA MARK 〓 U+3013

[CJK 符号和标点符号](http://www.unicode.org/charts/PDF/U3000.pdf)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-21T15:48:38.437

未找到字形的 3 个可能字符。

检查 Microsoft 规范，主题**Shape of .notdef glyph**， [https ://docs.microsoft.com/en-us/typography/opentype/otspec170/recom#shape-of-notdef-glyph](https://docs.microsoft.com/en-us/typography/opentype/otspec170/recom#shape-of-notdef-glyph)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-20T15:34:36.723

有一个 notdef 字符表示未找到该字形。但它没有字符码。您可以使用控制字符的 charcodes 插入 notdef 字符（如“”，U + 0002）

# algorithm - 如何证明 n 个节点之间的最大连接数是 n*(n-1)/2

> ID：13730546
> 
> 赞同：18
> 
> 时间：2012-12-05T19:03:11.570
> 
> 标签：algorithm, graph, graph-algorithm, discrete-mathematics

给定 n 个节点，如果每个节点都连接到每个其他节点（除了它自己），则连接数将为 n*(n-1)/2

如何证明这一点？

这不是一个家庭作业问题。我已经远离 CS 教科书很久了，忘记了如何证明这一点的理论。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-05T19:05:54.973

你有 n 个节点，每个节点都有 n -1 个连接（每个节点都连接到除自身之外的每个节点），所以我们得到`n*(n-1)`. 然而，因为连接 (x,y) 和 (y,x) 是相同的（对于所有连接），我们最终得到`n*(n-1)/2`.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-05T19:48:27.523

还有一个解决方案，组合：这个问题相当于图中可能的节点对的数量，即：

![在此处输入图像描述](../Images/e57c6a7aebb861fe30ef7fd954725b8b.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-05T19:09:00.030

对不起，命名不好，我是物理学家，而不是 CS/Math 人。

每个单个节点（其中有`n`）都必须连接到其他每个节点。还有`(n-1)`“其他所有人”。

所以每个 n 节点都有`n-1`来自它们的连接。`n(n-1)`

但由于每个连接都是“双向的” `(a to b = b to a)`，你最终会得到一个因素`1/2`

所以`n*(n-1)/2`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T19:11:33.890

归纳证明。基本情况 - 对于 2 个节点，有 1 个连接和`2 * 1 / 2 == 1`. 现在假设对于`N`节点我们有`N * (N-1) / 2`连接。添加一个节点必须建立`N`额外的连接，并且：

```
N * (N-1) / 2 + N =
(N^2 - N + 2N) / 2 =
(N^2 + N) / 2 =
(N + 1) * N / 2 
```

最后一行正好被`N * (N - 1) / 2`替换`N`为`N+1`，所以证明很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T19:06:56.957

每个顶点的[度数](http://en.wikipedia.org/wiki/Degree_%28graph_theory%29)是`n-1`（因为它有`n-1`邻居）。
**[握手引理](http://en.wikipedia.org/wiki/Degree_%28graph_theory%29#Handshaking_lemma)**，说：`Sigma(deg(v)) (for each node) = 2|E|`。因此：

```
Sigma(deg(v)) (for each node) = 2|E|
Sigma(n-1) (for each node) = 2|E|
(n-1)*n = 2|E|
|E| = (n-1)*n /2 
```

**量子点**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-24T03:37:41.037

对于 1 个节点：n 个连接

对于 2 个节点：n-1 个连接（已连接第一个节点）

对于 3 个节点：n-2 个连接.. 对于 n 个节点：n-(n-1) 个连接

因此总连接数 = n + n-1 + n-2 + ........1

```
 = n(n-1)/2 (sum of first n-1 natural numbers) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-22T02:00:15.603

另一个可能的等式，但不如上面的建议那么干净 ((n/2) - 0.5) * n

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-01T13:15:21.943

确定来自 N 个网络节点的最大链接数的最合适的答案是......

一个链接需要 2 个节点的可能组合/连接的总数；所以：

`(N!) / [(N-2)!)(2!)] = N(N-1)(N-2)! / (N-2)!(2!);`

所以`N(N-1) / 2`

因为`N>1`需要 2 个节点才能拥有一个链接。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-13T15:06:02.397

迟到而不是证明，但是您可以将节点“可视化”为坐标，将关系“可视化”为矩阵中的单元格，我不知道如何在这里绘制一些东西。

每个节点一列，每个节点一行，交叉处的单元格是关系。

您有 x *x 个可能的单元格。但是您需要删除左上-右下对角单元格（节点可以链接到自身）。因此，您删除了 x 个单元格，并且只有 (x* x-x) = x*(x-1) 个剩余单元格。然后，单元格 (x,y) 与单元格 (y,x) 的链接相同，因此您可以删除剩余的一半单元格：x*(x-1)/2

# php - 会话变量中的php动态数组

> ID：13730549
> 
> 赞同：1
> 
> 时间：2012-12-05T19:03:22.520
> 
> 标签：php, arrays, session, variables

我对脚本的以下部分有点困惑......

变量 $username 和 $password 来自 POST 表单并且没问题。

```
session_start();

$errors = array();

if (empty($username) === true || empty($password) === true) {
    $errors[] = 'You need to enter a username and password!';
    $_SESSION['Errors'] = $errors;
} else if (user_exists($username) === false) {
    $errors[] = 'We can\'t find the username! Have you registered?';
    $_SESSION['Errors'] = $errors;
} else if (user_active($username) === false) {
    $errors[] = 'You haven\'t activated your account!';
    $_SESSION['Errors'] = $errors;
} 
```

当我尝试在会话中存储任何 $errors[ ] 变量时，我在会话变量中找到的唯一值就是“数组”...

但是当我写变量 $errors（没有 []）然后它工作......

在这种情况下，如何将一个或多个动态堆叠的数组变量添加到 $_SESSION['Errors']？

这可能很简单，但我在互联网上找不到任何解决方案。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:04:55.533

尝试使用`print_r`or`var_dump`因为它是一个数组。使用`echo`只会产生`Array`

```
print_r($_SESSION['Errors']); //this
var_dump($_SESSION['Errors']); //or this 
```

# plot - 如何使用 SAS 9.3 从 nlin 创建绘图？

> ID：13730551
> 
> 赞同：1
> 
> 时间：2012-12-05T19:03:22.440
> 
> 标签：plot, sas, regression

我有一些数据想在 SAS 中使用非线性模型进行建模。

如何生成显示回归线的输出图？

谢谢

```
data ch13;
input Y X1 X2;
    Y_log = log10(Y);
    X1_log = log10(X1);
    X2_log = log10(X2);
datalines;
12  1   1
32  10  1
103 100 1
20  1   10
61  10  10
198 100 10
38  1   100
133 10  100
406 100 100
8   1   1
38  10  1
98  100 1
14  1   10
56  10  10
205 100 10
43  1   100
128 10  100
398 100 100
;
proc nlin data = ch13;
    parms   gamma0 = 9.59114
            gamma1 = 0.51485
            gamma2 = 0.29845;
    model Y = gamma0*(X1**gamma1)*(X2**gamma2);
run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:03:29.200

试试这个（从[这里的 SAS/STAT 文档中](http://support.sas.com/documentation/cdl/en/statug/63962/HTML/default/viewer.htm#statug_nlin_sect039.htm)偷来的）：

```
ods graphics on;
proc nlin data = ch13 plots(stats=all)=(diagnostics);
    parms   gamma0 = 9.59114
            gamma1 = 0.51485
            gamma2 = 0.29845;
    model Y = gamma0*(X1**gamma1)*(X2**gamma2);
run;
ods graphics off; 
```

我自己不使用 NLIN，但 SAS 文档有很多这样的例子。

# c# - 在 monotouch 中使用 webview 视频播放器控件

> ID：13730552
> 
> 赞同：1
> 
> 时间：2012-12-05T19:03:24.343
> 
> 标签：c#, iphone, ios, mono, xamarin.ios

我正在将视频加载到我的 monotouch iphone 项目中的 web 视图中。

我的问题是 iphone 将原生 iphone 视频播放控件放在视频上。

未显示 webview 视频的控件。

有没有办法可以在本机浏览器中禁用视频播放，以便我可以在我的 webview 中使用播放器的自定义控件？

谢谢

# java - System.in 和自定义 InputStreamReader 之间的行为差 异

> ID：13730553
> 
> 赞同：2
> 
> 时间：2012-12-05T19:03:28.373
> 
> 标签：java, polymorphism, inputstream, bufferedreader

我编写了一个 Java CLI 程序，它从标准输入读取行并为每一行输出一个可能的完成。我正在尝试给它一个 gui，所以我正在尝试构建一个替代品`System.in`，以允许用户使用 gui 或 cli。

到目前为止，我得到了这个替换，`add`当在 JTextArea 中输入文本时调用它的方法：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.InterruptedIOException;
import java.util.LinkedList;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.TimeUnit;

public class GuiIn extends InputStream {

    protected LinkedBlockingQueue<Byte> buf;
    protected boolean closed;

    public GuiIn() {
        closed = false;
        buf = new LinkedBlockingQueue<Byte>();
    }

    @Override
    public void close() {
        closed = true;
    }

    /**
     * add strings to read in the InputStream. Arguments are ignored if the
     * stream is closed.
     * 
     * @param s
     *            a string. Ignored if null
     */
    public void add(String s) {
        if (closed || s == null) {
            return;
        }
        byte[] bs = s.getBytes();
        LinkedList<Byte> lbs = new LinkedList<Byte>();
        for (byte b : bs) {
            lbs.add(b);
        }
        buf.addAll(lbs);
    }

    @Override
    public int available() {
        return buf.size();
    }

    @Override
    public synchronized int read() throws InterruptedIOException {
        if (closed && buf.isEmpty()) {
            return -1;
        }
        Byte b = 0;

        while (true) {
            try {

                if ((b = buf.poll(100, TimeUnit.MILLISECONDS)) == null) {
                    if (closed && buf.isEmpty())
                        return -1;
                } else
                    break;

            } catch (InterruptedException e) { 
                throw new InterruptedIOException("interrupted: "
                        + e.getMessage());
            }
        }
        return b;
    }
} 
```

然而，当我尝试它`new BufferedReader(new InputStreamReader(in));`并尝试`readLine()`它时，它似乎会阻塞，直到它有足够的字符（很多），尽管我的听众总是在输入的文本后面附加一个换行符。

另一方面，如果`in`设置为`System.in`，则每行一输入就会被读取。

所以，我的问题分为两部分：

1.  这种差异从何而来？
2.  如何解决？

请注意，从`GuiIn`每个字节的裸字节读取可以正常工作，并且我已经尝试过减小`BufferedReader`缓冲区大小等技巧。

我也事先在网上搜索过：这不是关于创建模拟对象；并且[ByteArrayInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ByteArrayInputStream.html)也不是一个选项：它不支持追加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:35:05.963

您的问题的一个来源可能是`InputStreamReader`可能坚持进一步阅读，以便可以确定它使用的`byte`->`char`解码器（并且对它不透明）有足够的字节来产生完整的`char`同时`System.in`可能对默认编码有足够的了解提供足够的字节。

在开始使用 Java 进行交互式控制台之前，您应该熟悉[`Console`](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html#readLine%28%29)类和Java端口的[readline 。](http://java-readline.sourceforge.net/)

然后，我不会在不指定编码的情况下创建`InputStreamReader`s，而是在更高级别进行抽象：

```
interface CommandLineSource {
  String readLine() throws IOException;
} 
```

然后您可以创建一个由`FileDescriptor.STDIN`.

# c - 这里分叉了多少进程

> ID：13730554
> 
> 赞同：-2
> 
> 时间：2012-12-05T19:03:42.347
> 
> 标签：c, process, fork

我知道这可能是一个愚蠢的问题，但任何人都可以帮助我理解以下代码片段的行为

```
//label 0
int main(){
  fork();//label 1
  fork();//label 2
  fork();//label 3
  return 0;
} 
```

据我了解，流程树是这样的

```
 [0]
          /    |    \
        [1]   [2]   [3]
       /  \    |
      [2] [3] [3]
       |
      [3] 
```

我对吗？如果是这样，我很困惑为什么第二个叉子没有产生与标签 1 叉子相对应的进程，而第三个叉子没有进一步产生任何进程。我的意思是子进程是父进程的精确副本（至少在代码中），因此它必须完整地执行其父进程的代码。谁能帮我解决这个困惑...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:10:50.410

是的，孩子是其父母的副本。它也继承了执行状态，包括父代码在*哪里*执行。当父节点从第一个 fork() 中返回子节点的 PID (>0) 时，它的第一个子节点返回 0，然后继续到第二个和第三个 fork。孩子不会回到 main() 的顶部，它只是从创建它的 fork 之后继续。

**编辑**回复评论。有关所有返回值的含义，请参见[fork(2) 手册页。](http://linux.die.net/man/2/fork)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T19:06:17.610

在第一次分叉之后，您有两个进程。两者都击中了第二个分叉，总共创建了四个进程。

所有四个都命中了第三个分叉，因此您有八个进程。然后他们都退出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T19:17:58.883

很简单，总共有8个进程并行。

```
p ----------------
|                 |          // first fork() 
1c-------         p -------   
|        |        |        |      // second fork()
2c---    1c---    3c---    p----  
|   |    |    |   |    |   |    |    // third fork()
4c  2c   1c   5c  6c  3c   7c   p 
```

您可以计算`8`总共 8 个进程的叶节点。

解释：父`p`称为`fork()`2 进程`1c`第一个子进程和父进程。`p`现在第二个`fork()`进程用于两个进程。所以过程`1c`, `2c`, `3c`, `p`. `fork()`依此类推，第三次调用后您将获得 8 个进程。在 fork 之后，新进程在它被 fork 的代码之后执行。所以fork下面的所有代码都适用于父进程和子进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:19:05.563

进程树如下所示。我对进程使用了​​以下命名约定。为创建它的相应分叉标签添加父进程名称的前缀。

```
 [0]
          /      |      \
        [01]    [02]    [03]
       /  \       |
    [012] [013] [023]
     /
   [0123] 
```

就像@Mat 所说，创建了 8 个进程。

# jquery - “错误加载选项卡:(”尝试将超过 3 个 html 字符串附加到 DOM 时

> ID：13730556
> 
> 赞同：0
> 
> 时间：2012-12-05T19:03:47.500
> 
> 标签：jquery, getjson

*尽管有错误，但我的问题与标签无关*

我正在使用 jQuery 来获取一个非常大的 JSON 文件（几乎 0.5 mb）并将一堆 html 插入到 DOM 中。这仍然有效：

```
$(function() {
  $.getJSON('results.json', function(data){
    var result = $('<ul>');
    var resultEl = $('#results');
    for(var i = 0; i < 2; i++) {
      result.append(unescape(data[i].html));
    }
    result.appendTo(resultEl);
  });
}); 
```

我可以很好地插入两个 html 部分，但是当我尝试插入三个项目时，这会被添加到 DOM 中：

```
<section id="loading-tab" class="tab-content clearfix hidden">
  <h2 class="visuallyhidden">Loading</h2>
  <p>Loading...</p>
</section>
<section id="error-tab" class="tab-content clearfix hidden">
  <h2 class="visuallyhidden">Error</h2>
  <p>Error loading tab :(</p>
</section> 
```

[这](http://lab.askmike.org/stuff/wtf.html)是一个链接，我尝试插入 2 个项目（它仍然有效），[这](http://lab.askmike.org/stuff/wtf2.html)是一个链接，我尝试循环到 3 并且一切都中断了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:18:20.577

第三个 JSON 元素有一个`script`标签，它运行以下内容（`document.write`为了便于阅读，将字符串分开）

```
<script>
document.write('
    <section id="loading-tab" class="tab-content clearfix hidden">
        <h2 class="visuallyhidden">Loading</h2>
        <p>Loading...<\/p>
    <\/section>
    <section id="error-tab" class="tab-content clearfix hidden">
        <h2 class="visuallyhidden">Error<\/h2>
        <p>Error loading tab :(<\/p>
    <\/section>');
</script> 
```

这是写入`Error loading tab :(`页面。清理数据，您应该一切顺利。

# jquery - 在 IE7 和 IE8 中使用 jQuery 将位置从绝对设置为固定

> ID：13730558
> 
> 赞同：1
> 
> 时间：2012-12-05T19:03:52.320
> 
> 标签：jquery, css, internet-explorer-8, internet-explorer-7, position

```
var uf = $('.utilsFloat');
var topValue = $('.article .header').offset().top;
uf.css({
    top : topValue,
    marginLeft : -137,
    position: 'absolute'
});

$(document).scroll(function() {

    var fixedShareTools = $(document).scrollTop() >= topValue;

    if (fixedShareTools) {
        uf.css(
            {
                top : 10 + "px",
                "position" : "fixed"
            }
        );
    }
    else {
        uf.css(
            {
                "position" : "absolute",
                top : topValue + "px"
            }
        )
    }}); 
```

上面的代码试图在您滚动到页面上的标题时将项目的位置属性设置为“固定”。它适用于除 IE8 和 7 之外的所有应用。IE7/8 中的 jQuery .css() 方法是否存在问题？

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:03:05.377

我找到了一个解决方案。我最终改用了类，这很有效。

```
if ($('body').hasClass('content-article')) {
//Pulling the top position value of the article header so the share tools align with it always
var uf = $('.utilsFloat');
var topValue = $('.article .header').offset().top;
uf.css({top : topValue });

$(window).scroll(function() {

    var fixedShareTools = $(window).scrollTop() >= topValue;

    if (fixedShareTools) {
        uf.removeClass('absolute');
        uf.addClass('fixed');
    }
    else {
        uf.removeClass('fixed');
        uf.addClass('absolute');
        uf.css(top, topValue + "px");
    }});} 
```

# .net - 如何跳过为仅用作桥梁的父实体创建表？

> ID：13730569
> 
> 赞同：1
> 
> 时间：2012-12-05T19:04:48.010
> 
> 标签：.net, entity-framework, localization

我有一个域模型，其中许多实体都有需要本地化的内容。例如，我们可能有一个 Product 实体，其中名称和描述需要多语言支持。许多其他实体也是如此。

现在这是我要实现的设计：

```
class LocalizedContent {
     public Guid Id {get; set; }
     public virtual ICollection<LocalizedContentEntry> Values {get; set;} 
}

class LocalizedContentEntry {
     public int Id {get; set; }
     public Guid ContentId {get; set; }
     public string Locale {get; set; }
     public string Value {get; set; } 
}

class Product {
     public int Id {get; set; }
     public LocalizedContent Name {get; set; }
     public LocalizedContent Description {get; set; } 
}

class OtherEntity {
     public int Id {get; set; }
     public LocalizedContent SomeColumn {get; set; }
} 
```

我不喜欢的一件事是 LocalizedContent 的表将只有一列 (Id)。它的目的实际上是充当 LocalizedContentEntity 和其他表之间的桥梁。从 Db 的角度来看，我真正需要的是 LocalizedContentEntity 表。有没有办法在不创建一个列表的情况下映射这些实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:28:30.877

尝试制作`LocalizedContent`：`ComplexType`

```
[ComplexType]
public class LocalizedContent {
   public Guid Id { get; set; }
   public virtual ICollection<LocalizedContentEntry> Values { get; set;} 
} 
```

这应该会产生以下表格（基于 SQL CE）：

```
CREATE TABLE "LocalizedContentEntries" (
   "Id" int not null identity,
   "ContentId" uniqueidentifier not null,
   "Locale" nvarchar(4000) null,
   "Value" nvarchar(4000) null,
   PRIMARY KEY ("Id")
);
CREATE TABLE "Products" (
   "Id" int not null identity,
   "Name_Id" uniqueidentifier not null,
   "Description_Id" uniqueidentifier not null,
   PRIMARY KEY ("Id")
);
CREATE TABLE "OtherEntities" (
   "Id" int not null identity,
   "SomeColumn_Id" uniqueidentifier not null,
   PRIMARY KEY ("Id")
); 
```

[http://blogs.msdn.com/b/adonet/archive/2009/05/28/poco-in-the-entity-framework-part-2-complex-types-deferred-loading-and-explicit-loading。 aspx](http://blogs.msdn.com/b/adonet/archive/2009/05/28/poco-in-the-entity-framework-part-2-complex-types-deferred-loading-and-explicit-loading.aspx)

# hibernate - Postgres - 如何将 sum(bigint) 类型转换为 bigint？

> ID：13730571
> 
> 赞同：4
> 
> 时间：2012-12-05T19:04:53.987
> 
> 标签：hibernate, postgresql, biginteger, bigdecimal, bigint

我有一个 Postgres 8.2 表，其中列定义为`bigint`数据类型。

当我这样做时`sum(column)`，返回类型是`numeric`. 我想强制类型转换总和，`bigint`因为我确定结果不会超过`bigint`. 我能够使用这样的子查询来实现这一点：

`select T.big_col_total::bigint from (select sum(big_col) as big_col_total from big_table) T;`

有没有办法在不使用子查询的情况下做到这一点，即，我`sum`可以以某种方式直接进行类型转换吗？我尝试了几种方法，都导致语法错误。

（背景：我正在从 Hibernate 运行此查询，因此将查询的返回数据类型限制为 BigInteger 对我来说很重要。bigint + bigint = numeric（Java 端的 BigDecimal）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:17:44.043

只需使用：

```
select sum(big_col)::bigint as total 
from big_table 
```

您应该尽快升级到受支持的版本（例如 9.x）。

# php - PHP_CodeSniffer - 显示失败的嗅探

> ID：13730588
> 
> 赞同：14
> 
> 时间：2012-12-05T19:05:57.220
> 
> 标签：php, configuration, codesniffer

PHP_CodeSniffer 中是否有设置来显示失败的嗅探？我正在将输出与我们的编码标准进行比较，并且逐个使用很难破译哪个测试失败，看看我们可能想要忽略哪个。

如果有一种简单的方法来显示故障嗅探，那么我可以更轻松快捷地完成配置。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T21:29:19.363

您可以使用 -s 命令行参数来显示错误消息的来源。

```
$ phpcs temp.php -s       

FILE: /Users/gsherwood/Sites/Projects/PHP_CodeSniffer/temp.php
--------------------------------------------------------------------------------
FOUND 4 ERROR(S) AFFECTING 2 LINE(S)
--------------------------------------------------------------------------------
 2 | ERROR | Missing file doc comment (PEAR.Commenting.FileComment.Missing)
 2 | ERROR | Missing class doc comment (PEAR.Commenting.ClassComment.Missing)
 2 | ERROR | Opening brace of a class must be on the line after the definition
   |       | (PEAR.Classes.ClassDeclaration.OpenBraceNewLine)
 3 | ERROR | Missing function doc comment
   |       | (PEAR.Commenting.FunctionComment.Missing)
--------------------------------------------------------------------------------

Time: 0 seconds, Memory: 4.50Mb 
```

您还可以使用源报告显示所有失败的嗅探列表。

```
$ phpcs temp.php --report=source

PHP CODE SNIFFER VIOLATION SOURCE SUMMARY
--------------------------------------------------------------------------------
STANDARD  CATEGORY            SNIFF                                        COUNT
--------------------------------------------------------------------------------
PEAR      Commenting          File comment missing                         1
PEAR      Commenting          Class comment missing                        1
PEAR      Classes             Class declaration open brace new line        1
PEAR      Commenting          Function comment missing                     1
--------------------------------------------------------------------------------
A TOTAL OF 4 SNIFF VIOLATION(S) WERE FOUND IN 4 SOURCE(S)
--------------------------------------------------------------------------------

Time: 0 seconds, Memory: 4.75Mb

$ phpcs temp.php --report=source -s

PHP CODE SNIFFER VIOLATION SOURCE SUMMARY
--------------------------------------------------------------------------------
SOURCE                                                                     COUNT
--------------------------------------------------------------------------------
PEAR.Commenting.FileComment.Missing                                        1
PEAR.Commenting.ClassComment.Missing                                       1
PEAR.Classes.ClassDeclaration.OpenBraceNewLine                             1
PEAR.Commenting.FunctionComment.Missing                                    1
--------------------------------------------------------------------------------
A TOTAL OF 4 SNIFF VIOLATION(S) WERE FOUND IN 4 SOURCE(S)
--------------------------------------------------------------------------------

Time: 0 seconds, Memory: 4.75Mb 
```

# c - fseek 在二进制文件中不成功

> ID：13730589
> 
> 赞同：0
> 
> 时间：2012-12-05T19:06:05.193
> 
> 标签：c, file, io, fwrite, fseek

**编辑**发现我的问题。我没有意识到 fseek 的 origin 参数的唯一允许值是 SEEK_SET SEEK_CUR 和 SEEK_END，所以我将调用更改为 fseek(diskPointer, startOfData, SEEK_SET);

我有一个打开的文件以二进制模式读写，所以我在文件上使用 fseek、fread 和 fwrite。在整个代码中调用 fwrite 之前，我使用 fseek 将文件指针设置到正确的位置，但似乎 fseek 失败并返回非零值。fseek 失败可能有哪些原因？

这是我的函数，它应该将“值”写入文件。该值正在写入，但在文件的开头而不是我希望 fseek 让我到达的位置。'startOfData' 是一个常数，表示我正在尝试写入的扇区。

```
int writeToData(int position, char *value){
if(!fseek(diskPointer, 0, startOfData)){
    if (fwrite(value, sizeof(value), 1, diskPointer) != 1) {
    return 0;
    }
    return 1;
    }
return 0;
} 
```

这是main（上面的writeToData函数被下面的createroot函数调用）：

```
#define startOfData 405504
int main(int argc, char *argv[]){
char *filepath;
int clearDisk;
if (argc != 3) {
    printf("Usage: ./a.out [filepath of virtual disk] [0 to clear disk before use, any other number otherwise]\n");
}
else {
    filepath = argv[1];
    clearDisk = atoi(argv[2]);
}

//The virtual disk is opened for reading and writing
diskPointer = fopen(filepath, "r+b");

if (diskPointer != NULL) 
{
    if (clearDisk == 0) {
        initializeDisk();
        createRoot();
    }

}
else
{
    printf("Error preparing virtual disk; terminating program.\n");
    return(1);
} 
```

我的初始化磁盘功能：

```
//5MB disk
void initializeDisk(){
int i;
char *buffer = "0";
for (i = 0; i < 5000000; i++) {
    fwrite(buffer, 1, 1, diskPointer);
}
rewind(diskPointer);
} 
```

# c# - 网格视图 - 捕获滚动位置

> ID：13730592
> 
> 赞同：0
> 
> 时间：2012-12-05T19:06:14.770
> 
> 标签：c#, .net, xaml, winrt-xaml, windows-store-apps

我的要求是当我滚动浏览网格视图时，网格会随着网格视图一起移动。我使用 WinRT XAML Toolkit 来获取 Gridview 后代[http://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/) - VisualTreeHelperExtensions。

这是我必须在 GridView 中获取滚动条的代码。

```
 var scrollViewer = itemGridView.GetFirstDescendantOfType<ScrollViewer>();
    var scrollbars = scrollViewer.GetDescendantsOfType<ScrollBar>().ToList();
    var horizontalBar = scrollbars.FirstOrDefault(x => x.Orientation == Orientation.Horizontal);
    horizontalBar.Scroll += horizontalBar_Scroll 
```

我的问题是 - scrollViewer 始终为空。设置断点我看到，GridView 内的 ScrollViewers 的计数为 0。

如何获取对 gridview 内滚动条的引用？或者是否有另一种方法可以在滚动 gridview 时移动网格元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:53:44.663

我找到了这种行为的原因。我在 Page 构造函数中执行了这个查询。当 itemGridView 完全加载时，我现在拥有它。

```
 itemGridView.Loaded += itemGridView_Loaded; 
```

引用 MSDN：

> 已加载：
> 在构建 FrameworkElement 并将其添加到对象树并准备好进行交互时发生。（继承自 FrameworkElement）

谢谢

# c# - Socket 接收数据未完成

> ID：13730597
> 
> 赞同：0
> 
> 时间：2012-12-05T19:06:22.823
> 
> 标签：c#, sockets

我编写了简单的套接字，将特定请求发送到互联网服务器并接收响应，但是当发送的请求和套接字进入接收模式时，返回值的结果不完整，例如只有 25000 字节的 1075 字节接收时出现问题。

```
Socket skt = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
skt.Connect(hdr.Host, 80);

byte[] req_as_bytes = Encoding.UTF8.GetBytes(RequestParam);
SentLength = skt.Send(req_as_bytes);
skt.Send(Data, SocketFlags.None);

ReturnLength = skt.Receive(Data);

skt.Shutdown(SocketShutdown.Both);
skt.Close(); 
```

但是当我在 skt.recive() 数据像这段代码一样从服务器接收数据之前进入睡眠状态时

```
Socket skt = new Socket(AddressFamily.InterNetwork, SocketType.Stream,             ProtocolType.Tcp);
skt.Connect(hdr.Host, 80);
byte[] req_as_bytes = Encoding.UTF8.GetBytes(RequestParam);
SentLength = skt.Send(req_as_bytes);
skt.Send(Data, SocketFlags.None);

System.Threading.Thread.Sleep(4000);

ReturnLength = skt.Receive(Data);

skt.Shutdown(SocketShutdown.Both);
skt.Close(); 
```

解决这个问题的最佳解决方案是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:08:59.593

socket.Receive 返回读取的数据数。见[http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx)

您应该检查`ReturnLength`并循环，直到收到预期的数据。

TCP 是一种面向流的协议。您将按照发送的顺序接收数据，但不保证发送和接收的数据块是相等的。

# list - FQL，例如“订阅者列表/朋友订阅者”

> ID：13730599
> 
> 赞同：1
> 
> 时间：2012-12-05T19:06:23.663
> 
> 标签：list, facebook-fql, subscriber

[我在http://www.facebook.com/me?sk=subscribers&filter=1](http://www.facebook.com/me?sk=subscribers&filter=1)上找不到如何选择朋友订阅者

```
select subscriber_id from subscription where subscribed_id = me() 
```

仅返回公共订阅者，并且该`connection`表未返回所有老朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:33:58.047

您可以使用`/me/subscribers`端点获取有关谁订阅了当前用户的数据（返回人员数组和总数）。

> “连接表并没有返回所有的老朋友。”

没有办法获得曾经是朋友但不再是朋友的人的名单，也没有订阅。那将是一个隐私问题。

# bash - 将命令的空格分隔的标准输出转换为bash中的变量

> ID：13730600
> 
> 赞同：1
> 
> 时间：2012-12-05T19:06:31.013
> 
> 标签：bash

例如，如果`inner.bash`只是简单地`echo a b c`调用`outer.bash`，`inner.bash`如何将结果`inner.bash`捕获到用户的变量中`outer.bash`？这很简单，但我实际上不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:13:42.343

内部.bash：

```
#! /bin/sh
echo "a b c" 
```

外部.bash：

```
#! /bin/sh
x=`sh ./inner.bash`
echo "result of inner is "$x 
```

所以基本的事情是反引号`bla`给你返回bla的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:13:14.340

```
#!/bin/bash

read -a text < <(inner.bash)
echo "$text[1]" 
```

# css - 禁用 chrome 用户代理样式表 * SVG 的选择器？

> ID：13730613
> 
> 赞同：0
> 
> 时间：2012-12-05T19:07:18.047
> 
> 标签：css, google-chrome, svg, profiling

我最近注意到 Chrome 将以下 CSS 规则应用于所有 SVG 元素（无论它们如何嵌入 [object、embed、iframe 或 inline]）：

```
* {
  -webkit-transform-origin-x: 0px;
  -webkit-transform-origin-y: 0px;
  -webkit-transform-origin-z: initial;
} 
```

运行 CSS 选择器分析器，* 选择器是迄今为止最大的性能损失。对于页面中的几个非常复杂的 SVG，这似乎会导致滚动等感觉迟缓。

我的问题是：我怎样才能解决这个问题？有什么办法可以**删除**这条规则（不是覆盖，因为在这种情况下会导致选择器性能*变差*）？

也许这是 Chrome 团队的疏忽，或者它的存在是因为我不明白的原因（任何人都可以解释它*为什么*在那里，如果我想让它消失是错误的）。

也许我也在错误地阅读分析器。这是一个屏幕截图（删除了不相关的选择器）。

![* Chrome CSS 分析器中的选择器](../Images/71498d4da0868b603f1b3263eda11a68.png)

我知道我在这里问了很多问题，但是是否有一个原因（除了它还没有实现）为什么“源”列没有被填充？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:38:48.717

该`Source`列未填充，因为配置文件中列出的特定规则没有源文件。这是由于驻留在用户代理样式表中的规则，它有点“硬编码”到 Chrome 代码中，并且不对应于实际资源。

现在，尝试切换到绝对时间（`%`配置文件视图下方状态栏中的按钮）并查看实际花费的时间（以毫秒为单位）。我敢打赌，除非您将 HTML5 规范视为单个页面，否则您会感到惊讶。

据我所知，`-webkit-transform-origin`使用这种方式对整个页面强制执行硬件加速合成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:51:18.757

您可以仅通过使用命名空间将规则限制为 HTML，至少在 XHTML 中（不确定“普通”HTML）：

```
@namespace html 'http://www.w3.org/1999/xhtml'
html|* {
  -webkit-transform-origin-x: 0px;
  -webkit-transform-origin-y: 0px;
  -webkit-transform-origin-z: initial;
} 
```

（比较[Tinkerbin](http://tinkerbin.com/vmWNUPjS)上的另一个示例）。

对于“普通”HTML，使用`not()`带有 SVG 命名空间的选择器应该可以工作：

```
@namespace svg 'http://www.w3.org/2000/svg';
*:not(svg|*) {
  -webkit-transform-origin-x: 0px;
  -webkit-transform-origin-y: 0px;
  -webkit-transform-origin-z: initial;
} 
```

不过，我不确定这是否会提高性能。

# android - 可以确定Android应用程序的安装方法吗？

> ID：13730619
> 
> 赞同：0
> 
> 时间：2012-12-05T19:07:25.373
> 
> 标签：android, installation, google-play, amazon-appstore

是否可以确定您的 Android 应用程序的安装方法？谷歌播放、亚马逊、手动安装、捆绑等，如果是的话怎么办？这与[检测是否从 Android 市场下载了应用程序](https://stackoverflow.com/questions/986627/detect-if-app-was-downloaded-from-android-market)类似，但在这种情况下，签名将是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T02:59:53.973

只需在发布到每个商店的 APK 中烘焙一个值，指示它用于哪个商店（或其他分发方式）。这个相同的值可用于配置该商店所需的所有更改。

# c - 如何使窗口显示在一行中的单元格渲染器下方

> ID：13730626
> 
> 赞同：1
> 
> 时间：2012-12-05T19:07:55.893
> 
> 标签：c, gtk, gtk2, gtktreeview

`GtkEntry`我有一个程序可以在（[此处为](http://pastebin.com/06vJ9Dqa)[sscce](http://sscce.org)代码）下打开一个窗口。当程序运行时，这是它的窗口：

![点击前的程序窗口](../Images/d73f49fe35994923e07655a6144f192d.png)

当我单击“打开”按钮时，将*在条目正下方*打开一个未装饰的窗口，并且*其左侧与条目的左侧对齐*：

![子窗口打开](../Images/5755626a54590d9bc791435ca32ebe5f.png)

这是按钮的以下回调方法的结果，该方法接收条目作为回调参数：

```
bool on_button_clicked(GtkWidget *button, gpointer data) {
    GtkWidget *entry = data,
            *subwindow = gtk_window_new(GTK_WINDOW_TOPLEVEL),
            *sublabel = gtk_label_new("This is a rather long message\n"
                    "with many lines whose mere purpose is\n"
                    "to test some stuff. It will appear in \n"
                    "the RIGHT PLACE.");
    gtk_container_add(GTK_CONTAINER(subwindow), sublabel);
    gtk_window_set_decorated(GTK_WINDOW(subwindow), FALSE);
    gtk_window_set_modal(GTK_WINDOW(subwindow), TRUE);

    GtkWidget *window = gtk_widget_get_toplevel(entry);
    gtk_window_set_transient_for(
            GTK_WINDOW(subwindow), GTK_WINDOW(window));

    gint dx, dy;
    gtk_window_get_position(GTK_WINDOW(window), &dx, &dy);

    GtkAllocation allocation;
    gtk_widget_get_allocation(entry, &allocation);

    gtk_window_move(
            GTK_WINDOW(subwindow), 
            allocation.x+dx, allocation.y+allocation.height*2+dy);

    gtk_widget_show_all(subwindow);
    return false;
} 
```

当开始从表格视图编辑单元格时，我想做类似的事情，特别是如果单元格在第二列中。未装饰的窗口应出现在编辑单元格的正下方，与其左侧对齐。所以我创建了一个`"editing-started"`事件回调，假设`editable`回调的参数是一个小部件：

```
static bool on_cell_renderer_text_editing_started(
        GtkCellRenderer *renderer, GtkCellEditable *editable, 
        gchar *path, gpointer data) {
    GtkWidget *subwindow = gtk_window_new(GTK_WINDOW_TOPLEVEL),
            *sublabel = gtk_label_new("This is a rather long message\n"
                    "with many lines whose mere purpose is\n"
                    "to test some stuff. It will appear in\n"
                    "the WRONG PLACE!");
    gtk_container_add(GTK_CONTAINER(subwindow), sublabel);
    gtk_window_set_decorated(GTK_WINDOW(subwindow), FALSE);
    gtk_window_set_modal(GTK_WINDOW(subwindow), TRUE);

    GdkWindow *window = gtk_widget_get_window(GTK_WIDGET(editable));
    gtk_window_set_transient_for(
            GTK_WINDOW(subwindow), GTK_WINDOW(window));

    gint dx, dy;
    gtk_window_get_position(GTK_WINDOW(window), &dx, &dy);

    GtkAllocation allocation;
    gtk_widget_get_allocation(GTK_WIDGET(editable), &allocation);

    gtk_window_move(
            GTK_WINDOW(subwindow),
           allocation.x+dx, allocation.y+allocation.height*2+dy);
    gtk_widget_show_all(subwindow);
    return false;
} 
```

结果不是我所期望的。未装饰的窗口出现在各个地方，通常在屏幕的左上方：

![新窗口出现在窗口的左上角](../Images/9d7b8cea64aeff109e33a6f81bdc3855.png)

另外，我得到了这个（很有启发性但死胡同）警告：

> （teste-subwindow-under-entry:32300）：Gtk-CRITICAL **：IA__gtk_window_get_position：断言“GTK_IS_WINDOW（窗口）”失败

我尝试了一些其他方法（例如，使用 获取第一个窗口的尺寸`gdk_window_get_geometry()`）但没有奏效（我并不感到惊讶，因为它们只是盲目尝试）。

那么，如何在特定的单元格渲染器下打开未装饰的窗口呢？

# python - 我们可以将连接到不同数据库的两个 Django/python 应用程序组合成一个集成应用程序吗

> ID：13730628
> 
> 赞同：2
> 
> 时间：2012-12-05T19:08:05.040
> 
> 标签：python, django

我有两个独立的 django 应用程序连接到不同的数据库。我想制作一个父应用程序，将请求路由到两个子应用程序之一。

有可能吗？我怎样才能做到这一点？父应用程序不必连接到任何数据库，它应该只是将请求路由到子应用程序。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T20:34:52.350

这个有可能。在 Django 中，将应用程序视为可以拼凑和组合的库。因此，假设您有以下内容：

1.  应用 A 连接到 db A
2.  应用 B 连接到 db B

你可以只创建一个 django 项目。将这两个应用程序放入您的安装应用程序 INSTALLED_APPS。查看django 文档中的[多个数据库部分。](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)它将解释如何配置您的应用程序，以便它们自动路由到正确的数据库。最后，您实际上并不需要创建第三个父应用程序。然后编辑您项目的 urls.py 并为每个应用程序定义一个路由。您还可以从应用 B 调用应用 A，并根据需要将请求从一个重定向到另一个。

**示例 urls.py**

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()
urlpatterns = patterns('',
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

上面的示例将两个单独的应用程序路由到两个不同的 url。这两个应用程序[django.contrib.admindocs](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/admindocs/#module-django.contrib.admindocs)和[django.contrib.admin](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/)都随 Django 一起提供。该示例取自[Django 教程的第二部分](https://docs.djangoproject.com/en/1.5/intro/tutorial02/#activate-the-admin-site)。

# css - 如何通过媒体查询将平板电脑与旧笔记本电脑或台式机区分开来？

> ID：13730629
> 
> 赞同：0
> 
> 时间：2012-12-05T19:08:07.050
> 
> 标签：css, mobile, responsive-design, media-queries, tablet

显然有很多常见的断点与媒体查询屏幕尺寸来检测/开发用于移动设备和平板电脑，以及使用像素比媒体查询检测视网膜显示器的方法，但我该如何区分旧的ipad 或其他没有 Retina 显示屏的平板电脑和具有大致相同分辨率的笔记本电脑或更小的台式机屏幕？

我正在使用的界面需要根据用户是鼠标还是触摸屏进行更改，并且水平方向的较旧 ipad 之类的东西很容易与较旧的笔记本电脑或台式机显示器混淆。

那么区分移动平板电脑和具有相似分辨率的旧笔记本电脑或台式机的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:47:44.007

您能否使用modernizr 库（http://modernizr.com/）来检测它是否是触摸设备并从那里工作？

Modernizr 允许您根据是否触摸输入具有不同的 CSS：

```
html.touch a {
   Padding:10px;
}

html.no-touch a {
   Padding:4px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:57:33.357

[WURFL](http://wurfl.sourceforge.net/)或[DeviceAtlas](https://deviceatlas.com/)

如果您严格针对 iOS 平板电脑，那么在两个方向上都有针对它们的特定媒体查询。

只是出于好奇，什么类型的 UI 需要不同的鼠标或触摸屏视图？我能想到的唯一原因是游戏解决方案？

# java - 无法在 method() 中运行 Sqlite；

> ID：13730636
> 
> 赞同：0
> 
> 时间：2012-12-05T19:08:26.270
> 
> 标签：java, android, windows, oop

我遇到了这个未知的问题，我只是无法解决问题是，当我从 android 中的 sqlite 检索值时，它的工作正常我在两个类中做了同样的事情，它都很好地完成了我想要它做的事情，但是当我在一个方法它不起作用它给了我一个空指针异常它在除方法之外的所有地方都起作用当我在我的方法中传递参数时它给出错误并且我的应用程序关闭。

我的数据库在这里工作

```
public class Activity5 extends Activity {
public  static String  tableler; 
final Context cont = this;
static String a1,a2,a3,a4,a5,a6,a7,a8;
static String out,out2,out3,out4,out5,out6,out7,out8;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity5);
    final EditText edt = (EditText)findViewById(R.id.replayedit);
    Button btnsave = (Button) findViewById(R.id.btnSaveChange);
   Button btncancel = (Button) findViewById(R.id.btnCancel);
   SQLiteDatabase db = openOrCreateDatabase("ComDB", MODE_PRIVATE, null);

  Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = "+Activity3.replays, null);
  c.moveToFirst();
  out = c.getString(c.getColumnIndex("REPLAYS"));

   db.close();

   c.close();
   if(Activity3.replays.contains("1"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("2"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("3"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("4"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("5"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("6"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("7"))
   {

       edt.setText("great"+out);
   }if(Activity3.replays.contains("8"))
   {

       edt.setText("great"+out);
   }

  // this.vieww();
  // this.edit();

   btnsave.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
    String updates = edt.getText().toString();
    updater(Activity3.replays, updates);
        Toast.makeText(cont, "Your Implementation   complete",Toast.LENGTH_LONG ).show();
    }
});

btncancel.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
});   

}

    public void updater(String sid,String vals)
{

    String tableNb = "REPLAYS";
    String tablela = "Rtm";
    String ID = "ID";
    SQLiteDatabase db = openOrCreateDatabase("ComDB", MODE_PRIVATE, null);  
    ContentValues cv = new ContentValues();
    cv.put(tableNb, vals);

    db.update(tablela, cv, ID+"="+sid, null);
//  Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHE", selectionArgs)

    db.close();

}

    } 
```

它在这里给出错误并关闭我的应用程序

```
public class SendGlass extends Activity{

      static String replay;

       public void sms (String phone,String Sms )
{

    SmsManager  smsManager = SmsManager.getDefault();

    String phoneNo = phone;
    String sms = Sms;
    String api = "You Entered one";
    String api2 = "You Entered two";
    String api3 = "Nothing great";
    String rep = sms.replace(phoneNo+" :", "");

    SQLiteDatabase db = openOrCreateDatabase("ComDB", MODE_PRIVATE, null);
    Cursor c = db.rawQuery("SELECT REPLAYS FROM Rtm WHERE ID = 1", null);

    while(c.moveToNext())

    {
        replay = c.getString(c.getColumnIndex("REPLAYS"));

        if(rep.equals("1"))
        {

    //  String replay = c.getString(c.getColumnIndex("REPLAYS"));
            smsManager.sendTextMessage(phoneNo, null, replay, null, null);

        }if(rep.equals("2"))
        {

        //  String replay = c.getString(c.getColumnIndex("REPLAYS"));
            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }if(rep.equals("3"))
        {

            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }if(rep.equals("4"))
        {

            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }if(rep.equals("5"))
        {

            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }if(rep.equals("6"))
        {

            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }if(rep.equals("7"))
        {

            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }if(rep.equals("8"))
        {

            smsManager.sendTextMessage(phoneNo, null, replay, null, null);
        }
    }

} 
```

我的 BroadCast 类从中获取 sendGlass 的参数

```
public class BroadCastRecivers extends BroadcastReceiver{

static String from;
static String body;

@Override
public void onReceive(Context cont, Intent intent) {
    // TODO Auto-generated method 

//  SmsManager  smsManager = SmsManager.getDefault();

        // TODO Auto-generated method s
          //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
             from =   str +=  "SMS from " + msgs[i].getOriginatingAddress();              
                str += " :";
           body =  str += msgs[i].getMessageBody().toString();
                str += "\n";

            }
            //---display the new SMS message---
            Toast.makeText(cont, str, Toast.LENGTH_LONG).show();
           // ret = str;
            //   int tos =  Integer.valueOf(body);
             //  obj.Decision(from, tos);
          // sms(from, body);     
        //    String phoneNo = phone;
        //  String sms = Sms;

        //  SmsManager  smsManager = SmsManager.getDefault();
        //  smsManager.sendTextMessage(phoneNo, null, sms, null, null);   

    /**      Activity5 obj = new Activity5();
          String rep = body.replace("from"+" :", "");

          if(rep.equals("1"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("2"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("3"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("4"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("5"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("6"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("7"))
          {
              Activity3.replays = rep;
              obj.select(from, rep);
          }if(rep.equals("8"))
          {

             Activity3.replays = rep;
             obj.select(from, rep);
          }else
          {
              rep = "Sorry man";
                 obj.select(from, rep);

          }

          **/

                from = "somehing";
                body = "exception";
                SendGlass obj = new SendGlass();
              obj.sms(from, body); 
```

} }

我的日志猫。

```
 12-05 23:37:38.507: D/AndroidRuntime(267): Shutting down VM
  12-05 23:37:38.507: W/dalvikvm(267): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
  12-05 23:37:38.597: E/AndroidRuntime(267): FATAL EXCEPTION: main
  12-05 23:37:38.597: E/AndroidRuntime(267): java.lang.RuntimeException: Unable to start receiver automator.mator.BroadCastRecivers: java.lang.NullPointerException
  12-05 23:37:38.597: E/AndroidRuntime(267):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
  12-05 23:37:38.597: E/AndroidRuntime(267):    at android.app.ActivityThread.access$3200(ActivityThread.java:125)
  12-05 23:37:38.597: E/AndroidRuntime(267):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
  12-05 23:37:38.597: E/AndroidRuntime(267):    at android.os.Handler.dispatchMessage(Handler.java:99)
  12-05 23:37:38.597: E/AndroidRuntime(267):    at android.os.Looper.loop(Looper.java:123)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at android.app.ActivityThread.main(ActivityThread.java:4627)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at java.lang.reflect.Method.invokeNative(Native Method)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at java.lang.reflect.Method.invoke(Method.java:521)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at dalvik.system.NativeStart.main(Native Method)
   12-05 23:37:38.597: E/AndroidRuntime(267): Caused by: java.lang.NullPointerException
   12-05 23:37:38.597: E/AndroidRuntime(267):   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at automator.mator.SendGlass.<init>(SendGlass.java:12)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at automator.mator.BroadCastRecivers.onReceive(BroadCastRecivers.java:100)
   12-05 23:37:38.597: E/AndroidRuntime(267):   at  android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
   12-05 23:37:38.597: E/AndroidRuntime(267):   ... 10 more
   12-05 23:37:43.027: I/Process(267): Sending signal. PID: 267 SIG: 9 
```

如果我使用硬编码字符串，我的方法有效，它只会在从数据库获取值时出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:16:26.350

您还没有使用 SendGlass 中的任何 Activity 方法...

*   您*必须*通过调用启动 Activity`startActivity(Intent)`
*   您*必须*等到`onCreate()`被调用才能使用 Activity 的上下文
*   你不能打电话`sms()`给`new SendGlass().sms(phone, sms)`

否则，您会在 ContextWrapper 类中看到这些 NullPointerExceptions 被抛出。

例如，`SendGlass`应该看起来更像这样：

```
public class SendGlass extends Activity{
    static String replay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        if(intent != null) {
            sms(intent.getStringExtra("phone", ""), intent.getStringExtra("sms", ""));
        }
    }
    ... 
```

* * *

**另外**
，我看到您添加了 BroadcastReceiver 代码。就像我猜想你正在尝试通过以下方式启动你的活动：

```
SendGlass obj = new SendGlass();
obj.sms(from, body); 
```

正如我所说，您**必须**使用 Intents 和`startActivity()`：

```
Intent intent = new Intent(cont, SendGlass.class);
intent.putExtra("phone", from);
intent.putExtra("sms", body);
cont.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:26:36.723

您对 openOrCreateDatabase() 的调用看起来搞砸了。我没有看到使用这些类型的方法的任何签名。我在 javadoc 中看到的是这三个签名：

*   openOrCreateDatabase(String path, SQLiteDatabase.CursorFactory factory, DatabaseErrorHandler errorHandler)
*   openOrCreateDatabase（字符串路径，SQLiteDatabase.CursorFactory 工厂）
*   openOrCreateDatabase（文件文件，SQLiteDatabase.CursorFactory 工厂）

这些都不符合您的用法，这似乎是 openOrCreateDatabase(path path, int mode, Object)

我还注意到您尝试使用数据库变量“db”而没有先检查它是否包含某些内容。这不是好的编程习惯。我从不认为打开的文件或数据库有效。一个永远不知道。

此外，您试图在光标“c”上调用 c.moveToNext() 而不首先验证 c 是否存在并包含一行。这*绝对*不是好的编程习惯。*始终*测试 c != null，并测试 c.moveToFirst == true。这确保了数据库调用有效（即，它没有返回 null）并且您得到了返回行（c.MoveToFirst 有效）。

# java - java spring context:property-placeholder 手动加载

> ID：13730638
> 
> 赞同：3
> 
> 时间：2012-12-05T19:08:40.223
> 
> 标签：java, spring, properties, loading

Spring java-quartz 调度应用

**我想加载 .property 文件动态传递的抛出程序参数而不是 context:property-placeholder 在 spring 上下文中，我怎样才能完成这个任务，任何帮助表示赞赏......**

我正在从主 java 文件手动加载和刷新 spring 上下文，如以下代码所示。

```
SpringUtil_1.loadSpringConfig();
rootContext = new ClassPathXmlApplicationContext();
rootContext.setConfigLocation("abc-configuration.xml");
rootContext.refresh(); 
```

在弹簧配置中，我有如下的上下文属性占位符，我想从代码中获取。

```
<context:property-placeholder location="classpath:lnRuntime.properties"/> 
```

我在spring上下文中使用占位符，使用spring EL的java文件如下

```
<bean id="dataSource" 
class="org.springframework.jdbc.datasource.SingleConnectionDataSource">
        <property name="driverClassName" value="net.sourceforge.jtds.jdbcx.JtdsDataSource"/>
        <property name="url" value="${dataSource.url}"/>
    </bean> 
```

在java中我访问如下

```
private @Value("${dz.host}") String dzHost; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:23:48.263

找到答案

```
@Bean
public static PropertySourcesPlaceholderConfigurer properties(){
  PropertySourcesPlaceholderConfigurer pspc =
   new PropertySourcesPlaceholderConfigurer();
  Resource[] resources = new ClassPathResource[ ]
   { new ClassPathResource( "foo.properties" ) };
  pspc.setLocations( resources );
  //pspc.setIgnoreUnresolvablePlaceholders( true );
  return pspc;
} 
```

资源[http://www.baeldung.com/2012/02/06/properties-with-spring/#byhandnew](http://www.baeldung.com/2012/02/06/properties-with-spring/#byhandnew)

# javascript - 检查 HTML 表单中是否有输入字段

> ID：13730654
> 
> 赞同：-1
> 
> 时间：2012-12-05T19:09:43.210
> 
> 标签：javascript, html

如何检查我的 HTML 表单中是否有输入字段。我尝试这样的代码：

```
if(document.getElementById('fieldID') != 'null') {
    alert('Some alert');
} 
```

但这不起作用。我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:12:16.573

Null 不应该有引号，因为它不是字符串，而是绝对值。用这个：

```
if(document.getElementById('fieldID') != null){
         alert('Some alert');
} 
```

# facebook - 恢复已删除的帖子 - Facebook Graph / FQL

> ID：13730658
> 
> 赞同：0
> 
> 时间：2012-12-05T19:10:03.130
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我有另一个 facebook Graph 相关问题。是否可以从 Facebook Graph API 获取已删除的帖子，所有从我/feed 中删除的帖子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:11:54.557

不会。API 从 Facebook 获取信息，就像是您一样。

# java - Transferhandler 中的 getTransferData() 在 jtree 中多次删除多个对象时无法按预期工作

> ID：13730660
> 
> 赞同：1
> 
> 时间：2012-12-05T19:10:12.533
> 
> 标签：java, swing, drag-and-drop, jtree

我正在尝试将多行（不连续）从 jtable 拖动到 jtree。我正在使用定制的可转移对象和定制的转移处理程序。

`getTransferData(DataFlavor df)`但是，我在 import data 方法中丢失了我的对象，因为它在 class中的 java 方法中丢失了`DropTargetContext.java`。

代码如下：

```
public class cObjectList extends ArrayList<cObject> implements Transferable, Serializable {    

public static DataFlavor OBJECT_LIST_FLAVOR = new DataFlavor(cObjectList.class, "Object List");
    private DataFlavor flavors[] = { OBJECT_LIST_FLAVOR };

    @Override
    public DataFlavor[] getTransferDataFlavors() {        return flavors;    }//end method  getTransferDataFlavors

@Override
    public boolean isDataFlavorSupported(DataFlavor flavor) {
        return flavor.getRepresentationClass() == cObjectList .class;    }//end method isDataFlavorSupported

@Override
    public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {
        if (isDataFlavorSupported(flavor)) {  return this; } else { 
throw new UnsupportedFlavorException(flavor);        }//end else
    }//end method getTransferData    
}//end class  cObjectList 
```

cObject 类是可序列化的。自定义的传输处理程序被声明为面板中的内部类，其中包含树和表。*/

```
class ObjectTreeTransferHandler extends TransferHandler{
/*the createTransferable method successfully creates the transfer object */
@Override
    public boolean importData(TransferSupport support) {
        if (!canImport(support)) {
            return false;
        }
        if (support.isDataFlavorSupported(cObjectList.OBJECT_LIST_FLAVOR)) {            
            cObjectList obList = null;
            try {
                Transferable t = support.getTransferable();               
                obList = (cObjectList) t.getTransferData(cObjectList.OBJECT_LIST_FLAVOR);
            } catch (UnsupportedFlavorException ufe) {
                System.out.println("UnsupportedFlavor: " + ufe.getMessage());
                return false;
            } catch (java.io.IOException ioe) {
                new myException(ioe);
                return false;
            }

            if (obList != null && support.getComponent() instanceof myJTree) {
//do work 
            }//end if
}//end inner class ObjectTreeTransferHandler 
```

可转移对象`t`正确包含数组列表中的对象，但是当我调用 时`t.getTransferData`，数组列表会返回`null`对象。例如，如果从表中选择了三行，这会调用`getTransferData` 方法，在`cObjectList`该方法中正确地返回数组列表中的这些对象，但是当它到达`getTransferDat`DropTargetContext.java 中的 a 时，`null`即使列表/对象本身仍然显示，数组列表中的值也会返回`size =3`。

为树选择的放置模式是：

> treeObjectStructure.setTransferHandler(new ObjectTreeTransferHandler()); treeObjectStructure.setDropMode(DropMode.ON_OR_INSERT);

谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-22T20:48:43.750

我赞成上面的答案。我遇到了同样的问题，我只是使用莱尔所说的解决了这个问题：

```
class TransferablePanel implements Transferable {
   protected static  DataFlavor PANELFLAVOR = new DataFlavor(Object.class, "A 
   JPanel Object");//instead JPanel.class I used Object.class ****
   protected static DataFlavor[] supportedFlavors = { PANELFLAVOR };
   JPanel panel;
      public TransferablePanel(JPanel panel) {
         this.panel = panel;
      }

     @Override
     public DataFlavor[] getTransferDataFlavors() {
         return supportedFlavors;
     }

     @Override
     public boolean isDataFlavorSupported(DataFlavor flavor) {
         if (flavor.equals(PANELFLAVOR))
              return true;
         return false;
      } 

     @Override
     public Object getTransferData(DataFlavor flavor) throws 
     UnsupportedFlavorException {

if (flavor.equals(PANELFLAVOR)){
    return panel;
}
else
  throw new UnsupportedFlavorException(flavor);
  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T07:36:00.377

I had a similar problem, and it turned out that the first argument to the DataFlavor constructor has to be Object.class. If it's myclass.class, then I too get null returned from getTransferData, and it throws an IOException. I have no idea why this occurs. It took me several hours to determine this.

# ruby-on-rails - 在生产中编辑 Rails 应用程序

> ID：13730661
> 
> 赞同：0
> 
> 时间：2012-12-05T19:10:15.533
> 
> 标签：ruby-on-rails, macos, edit, osx-mountain-lion, production-environment

我希望你能提供帮助.. 我继承了我负责编辑的 Rails 中的一个小站点。我对 PHP 有很好的了解，但我完全是 Rails 的新手。

我需要对文件进行非常简单的编辑，我已经完成了，但是保存时它没有显示在网站上。该文件位于配置目录中。我已经重新启动了提供服务的机器（Mac OS 10.8），我在网上搜索了许多答案，包括禁用缓存、将 config.cache_classes 更改为 false 和 config.consider_all_requests_local 为 true，但似乎没有任何效果。该站点使用独角兽作为服务器。

我错过了什么？我意识到这可能是使用 Rails 的一种糟糕的方式，我已经向自己保证我会学习它，但现在我只需要知道如何进行实时更改，因为我已经习惯了使用 html、php 等进行 FTP 更改。

谢谢你的期待！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:17:57.863

如果您重新启动了提供服务的机器并且更改仍未显示，那么您正在编辑错误的文件。也许它真的是从这台机器上的另一个文件夹提供的？还是来自另一台机器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:13:44.740

如果您有 ssh 访问权限，可能只需要从应用程序根目录运行 touch tmp/restart.txt

PROJECTDIR/tmp/restart.txt

您可以通过任何文本编辑器在您的 FTP 服务器上打开 tmp/restart.txt，然后按 Ctrl+S（保存），这样文件将被触摸并重新启动服务器

或者如果您有 ssh 访问权限，请运行

touch tmp/restart.txt 从你的 Rails 应用程序根目录

* * *

- -编辑 - -

抱歉没有看到你说你重启机器的部分。更有可能是资产管道的问题。

尝试删除公共/资产

然后运行

bundle exec rake assets:precompile

我认为有一个命令可以清除并重新编译，但我不记得了

此外，如果这些答案没有帮助，了解您实际编辑的内容以及如何编辑可能会有所帮助。是css吗？标记？控制器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T20:34:56.110

使用 Capistrano 软件部署 Rails 应用程序很常见。如果您找到文件`app/Capfile`，`app/config/deploy.rb`然后您的应用程序正在使用它。Capistrano 的典型工作流程是

*   `git clone`从源代码控制存储库（例如，从 GitHub使用）获取应用程序的本地副本
*   在本地编辑文件（并进行测试，但您可能不在那里）
*   提交并推送到源代码控制
*   run`cap deploy`做所有可能需要的事情，例如重新编译资产

capistrano 所做的（在最基本的用法中）是：

*   在中创建一个子目录`your-app-name/releases/<date-filename>/`
*   从源代码控制存储库中获取最新代码到该目录（例如`git pull`）
*   将符号链接替换为`your-app-name/current`一个到新目录
*   重新启动服务器（如果使用 Phusion Passenger，`touch your-app-name/current/tmp/restart.txt`就可以了，否则，您可能需要重新启动 Web 服务器

如另一个答案所述，需要重新编译对“资产”（CSS、JS、图像）的更改。我认为`bundle exec rake assets:precompile`从`<your-app-name>`子目录运行就足够了，但是如果事情搞砸了，`bundle exec rake assets:clean`请先运行。

在某些情况下，capistrano 和源代码控制设置为要求部署使用执行部署的用户的本地凭据——这是由命令支持`ssh-agent`的。`ssh-add`如果您的源代码控制系统不允许直接从服务器访问，您将需要这些（如果这是设置方式， 您将`ssh_options[:forward_agent] = true`在您的文件中看到一行）。`app/config/deploy.rb`

当然，根据您的环境，可能还有许多其他依赖项需要管理。如果你甚至有一个远程高级环境，你应该找出如何正确部署的工作，可能使用 capistrano。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T02:42:02.270

这就是我最后必须做的，我意识到这不是你使用 Rails 的方式..

我备份了应用程序目录，重新映像了我用来测试它的开发机器。[根据http://rubyonrails.org/download](http://rubyonrails.org/download)执行了 Ruby on Rails 的全新安装。我创建了一个新的同名空应用程序，然后将我正在使用的应用程序的内容复制到新的应用程序框架中，选择不覆盖任何现有文件。然后我安装了Passenger并作为一个独立的运行它。这让我的应用程序再次启动并运行，现在当我对 config/initializers 中的文件进行任何更改时，它们会在我重新启动乘客时反映出来。所以我可以走了。

现在我需要学习如何真正做到这一点.. 谢谢大家。

# java - 使用带有 RUN@cloud 的密钥库

> ID：13730666
> 
> 赞同：0
> 
> 时间：2012-12-05T19:10:21.190
> 
> 标签：java, encryption, cloudbees

我们在应用程序中引用存储在应用程序服务器文件系统上的密钥库。有什么方法可以将其上传到 CloudBees 并在部署期间引用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:01:38.000

您不能上传与部署单元分开的文件（大多数情况下是战争存档），因此通常的做法是将密钥库放在 META-INF 中的战争内部。其他选项是让您创建一个处理此密钥库的[clickstack插件。](https://wiki.cloudbees.com/bin/view/RUN/ClickStack)

# angularjs - 使用 AngularJS 进行初始验证

> ID：13730667
> 
> 赞同：4
> 
> 时间：2012-12-05T19:10:30.847
> 
> 标签：angularjs

我在控制器立即加载的表单/模型上遇到 AngularJS 验证问题。表单以部分不正确的验证状态加载，返回正确验证状态的唯一方法是进入实际的无效状态。另一种解决方法是为表单设置模型，延迟 1 毫秒。我创建了一个 jsFiddle，在这里描述了这个功能：http: [//jsfiddle.net/Yauxm/4/](http://jsfiddle.net/YAuxm/4/)

只是为了更清楚起见，在使用有效值初始化的标记为 required 的属性上，表单和输入都正确标记为有效，但是包装 div 标记为无效。在该值实际上无效（即为空）之前，修改该值无效。一旦该字段正确失效，那么所有后续更改都将得到正确验证，直到路由更改，在这种情况下，行为将回到我在此处描述的内容。

这是 jsFiddle 上发布的示例的缩写版本：

```
<div ng-app="Test">    
    <script type="text/ng-template" id="Templ">        
        <ul style="width:20%; float:left;">
            <li ng-repeat="item in Items">
                <a href="#/edit/{{item.Id}}">Edit {{item.Name}}</a>
            </li>
        </ul>    

        <form name="editor" ng-show="CurrentItem">           
            <!-- this evaluates to true on initial load even when the value is valid -->                
            <div ng-class="{error: editor.ItemName.$invalid}"> 
                <input type="text" name="ItemName" ng-model="CurrentItem.Name" required />               
        </form>        
    </script>   

    <div ng-view></div>                    
</div>​

<script type='text/javascript'>

var items = [{Id: 0, Name: 'Item 1', SomeNumber: 100},
             {Id: 1, Name: 'Item 2', SomeNumber: 200},
             {Id: 2, Name: 'Item 3', SomeNumber: 300}];

angular.module('Test', []).
    config(function($routeProvider) { $routeProvider.
        when('/edit/:itemIndex', { controller: TestCtrl, templateUrl: 'Templ' }).
        otherwise({ redirectTo: '/edit/0' });
    });

function TestCtrl($scope, $location, $routeParams) {
    $scope.Items = items;    
    $scope.CurrentItem = $scope.Items[$routeParams.itemIndex];                       
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:28:10.923

您的示例适用于 AngularJS 1.0.2 [JSFiddle here](http://jsfiddle.net/jaimem/NhTY5/)，但不适用于 1.0.3。我们能够得到 的值`editor.ItemName.$invalid`，但显然该`ngClass` 指令可能被破坏了。在 github 上检查这个问题：

*   [https://github.com/angular/angular.js/issues/1637](https://github.com/angular/angular.js/issues/1637)

快速解决方法是添加一个 CSS 规则来`.control-group`设置表单无效时的样式。例如：

```
form.ng-invalid-required .control-group{background-color: red; color:#fff} 
```

[JSFiddle Angular 1.0.3](http://jsfiddle.net/jaimem/NhTY5/1/)

# css - 有趣的错误：CSS 可以在 Localhost 上运行，但不能运行

> ID：13730668
> 
> 赞同：0
> 
> 时间：2012-12-05T19:10:29.037
> 
> 标签：css

我有一个荒谬的错误，跨度：悬停伪类在我的本地主机上工作，但当我在我的实时主机上上传样式表时不起作用。[这是](http://www.whooshtranscription.com/sheldon-amy-marriage-and-a-gravy-boat/)实时页面，这是[样式表](http://pastebin.com/j561DJs7)。烦人的CSS是：

```
#transcript {
padding: 10px;
background: #FFF;
font-size: small;
border: 1px solid #9BA6C2;
height: 270px;
overflow: auto;
color: #333; 
```

}

```
#transcript.enabled span:hover {
background: #FF3;
cursor: pointer;
box-shadow: 0px 2px 2px rgba(0,0,0,.33);
-webkit-box-shadow: 0px 2px 2px rgba(0,0,0,.33);
-moz-box-shadow: 0px 2px 2px rgba(0,0,0,.33);
filter: progid:DXImageTransform.Microsoft.dropShadow(color=#CCC, offX=0, offY=1, positive=true); 
```

}

我已经在最新的 Mozilla 和 Chrome 上对此进行了测试，但它们都不起作用。我不知道为什么它可以在 localhost 上运行，但不能在 live 上运行。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:51:21.927

我检查了现场直播。

id="transcript" 不存在。

# perl - 使用 perl 发送的 Zip 文件 Email::Sender 已损坏

> ID：13730670
> 
> 赞同：6
> 
> 时间：2012-12-05T19:10:39.483
> 
> 标签：perl, smtp, zip, email-attachments

我正在尝试运行一个脚本，该脚本需要一个文本文件，使用 Archive::Zip 对其进行压缩，然后使用 Email::Sender 通过 smtp 将 zip 文件作为附件发送，以创建 mime 消息。

我可以在 perl 中发送 txt 文件而不会损坏。我可以手动发送 perl 压缩的文件而不会损坏。我无法通过 perl 发送手动压缩文件。

我怀疑我的问题在于读取压缩文件或创建 MIME 消息。这是相关代码，本质上是来自 Email::MIME 概要的代码，其中 $fileToSend 是压缩文件的路径。

有任何想法吗？

```
use strict;
use warnings;
use Email::MIME;
use Email::Sender::Transport::SMTP;
use Email::Sender::Simple qw(sendmail);
use Archive::Zip qw( :ERROR_CODES :CONSTANTS);
use IO::All;

my $message = 
      Email::MIME->create(
      header_str => [
    From    => $sender,
    To      => $recipient,
    Subject => $subject,
  ],
          attributes => {
              filename     => $filename,
              content_type => 'application/zip',
              disposition  => 'attachment',
              name         => $filename,
          },
          body => io($fileToSend)->binary->all,
          #body => io($fileToSend)->all,
      ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:45:44.190

终于找到问题了。添加这一行就可以了。

```
$message->encoding_set( 'base64' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-23T02:00:46.420

```
my $transport = Email::Sender::Transport::SMTP->new({
                   host => $smtpserver,
                   port => $smtpport,
                   sasl_username => $smtpuser,
                   sasl_password => $smtppassword,
                   ssl => 'starttls'});

Email::Stuffer->from('a@a.com')
          ->to('b@b.com')
          ->text_body('hello')
          ->attach_file ('zipfile')
          ->transport($transport)
          ->send(); 
```

# c# - 用存储在变量中的泛型声明一个列表

> ID：13730672
> 
> 赞同：1
> 
> 时间：2012-12-05T19:10:44.770
> 
> 标签：c#, generics, quartz.net

我想通过一个 switch 语句来确定使用什么类型来制作包含泛型的东西。

下面是一个愚蠢但说明性的代码，显示了我正在尝试做的事情：

```
Type tempType;
switch(number)
{
   case 0:
      tempType = typeof(int);
      break;
   case 1:
      tempType = typeof(bool);
      break;
   case 2:
      tempType = typeof(long);
      break;
}

List<tempType> theList = new List<tempType>(); 
```

当我尝试这个时，它给出了错误：

> 找不到类型或命名空间名称“tempType”（您是否缺少 using 指令或程序集引用？）

我对原因的假设是因为它正在寻找在那里全局可用的类型，而不是在这个方法的本地成员变量中寻找。我怎么能做这样的事情？

编辑：为了提供更多上下文，我正在尝试使用 Quartz.NET，并且我正在尝试用它创建不同的作业，因此本示例中的每种类型都是不同的作业类，每个都有其特定的执行命令。不同的情况是我想访问那个特定的工作类别。然后我将通过以下方式创建工作：

```
tempJob = JobBuilder.Create<tempType>()
            .WithIdentity("SomeJob " + i)
            .UsingJobData()
            .Build(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:20:22.750

您可以尝试下一步：

```
 Type tempType = typeof(int);
        switch (number)
        {
            case 0:
                tempType = typeof(int);
                break;
            case 1:
                tempType = typeof(bool);
                break;
            case 2:
                tempType = typeof(long);
                break;
        }

        Type customListType = typeof(List<>).MakeGenericType(tempType);
        IList objectList = (IList)Activator.CreateInstance(customListType); 
```

但 IList 不是通用接口，所以你会有`object`s 在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:16:55.133

要使用泛型，编译器必须在编译时知道类型；您无法在运行时确定类型并创建泛型。如果直到运行时才知道类型，通常只使用 List。

您可以使用反射在运行时创建特定类型的实例化，但实例化到特定类型主要对编译器进行类型推断有用；如果编译器不知道，那么您的程序没有太多理由在运行时关心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:14:51.380

您可以使用反射创建一个直到运行时才知道的实例`List`，`Type`但是因为它需要在这个庄园中创建，所以您不能将它用作强类型列表（同样，因为在编译时不知道类型) 您将被迫将其视为非通用`IList`,`dynamic`或`object`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:16:48.847

您会注意到这也不起作用：

```
Type tempType = typeof(int);
List<tempType> theList = new List<tempType>(); 
```

基本上，泛型的类型需要在编译时知道；你不能在运行时创建它。这有各种各样的原因，因为如果编译器不知道泛型是什么类型，它就无法执行有关泛型的各种规则。

只需使用非通用`List`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T19:19:08.737

当您运行程序时，您的 tempType 将被解析，但您试图在运行前创建一个未知类型的 List<>。你不能那样做。

您需要在运行时解析该 tempType 并在运行时创建您的 List 。使用反射工具来实现这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T14:56:23.563

听起来你想做类似的事情

```
Type tempType ;
var number = 0;
switch(number)
{
    case 0:
        tempType = typeof(Quartz.Job.DirectoryScanJob);
        break;

    ... 

    default :
        tempType = typeof(Quartz.Job.NoOpJob);
        break;
}

int i = 0;
var tempJob = JobBuilder.Create()
        .OfType(tempType)
        .WithIdentity("SomeJob " + i)             
        .Build(); 
```

# c# - Designer.Cs 文件未注册对命名空间的更新

> ID：13730679
> 
> 赞同：2
> 
> 时间：2012-12-05T19:11:15.417
> 
> 标签：c#, web-config, visual-studio-2012

我在使用 Visual Studios Premium 2012 时遇到问题。

最近，我更改了一个按钮控件的命名空间，它继承自`Linkbutton`. 代码如下所示：

```
//namespace MyOldNameSpace
namespace MyNewNameSpace
{
    public class myButton : LinkButton
    {
        //some stuff here
    }
} 
```

我更新了对此代码的所有引用以匹配此更改。**然而...**

Designer.cs 文件拒绝使用新更新的命名空间生成按钮。例如，我的 Designer.cs 文件中的函数如下所示：

```
protected global::MyOldNameSpace.myButton myButton1 
```

为了让所有东西都能编译和工作，我必须进入代码并更新 Designer.cs 文件中的命名空间。我没有功能问题。另外，我更改了 web.config 以匹配新更改。

我尝试了以下方法：

*   关闭和重新开放视觉工作室
*   进入 ~/../appdata/ 并删除一些文件 [在博客上找到了这个解决方案]

但这些都没有奏效。

提前致谢

编辑我所做的一些更改：

在 web.config 中

```
<add tagPrefix="abc" namespace="MyNewNameSpace" assembly="MyNewNameSpace" 
```

在 .aspx 页面中

```
<abc:myButton runat="server" onclick=...etc...> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:40:10.170

你的行动是：

1.  您更改类定义中的命名空间
2.  您使用新的命名空间更新 web.config

你期望的是：

1.  Visual Studio 将使用新的命名空间更新 aspx.designer.cs 文件

它是如何工作的：

**对designer.cs 的更新由.aspx 文件中的更改触发。**

有~~2~~ **3**种可能的方案来解决该问题：

1.  您必须***从 .aspx 页面剪切控制标记 => 保存 .aspx 页面 => 将控制标记粘贴回 .aspx 页面内 => 保存 .aspx 页面***

2.  或者您**通过替换命名空间手动修改该行**：

    ```
    protected global::MyOldNameSpace.myButton mButton;//old line
    protected global::MyNewNameSpace.myButton mButton;//new line 
    ```

    **[编辑]**

3.  或者您**将 .aspx 从 Source 切换到 Design => Save => Rebuild => Switch to Source**

我想说第三个选项是首选的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T13:11:53.880

我在常规类程序集 VS 2013 中遇到了类似的问题。我右键单击项目节点，然后选择“属性”。我选择了“应用程序”部分，然后将“默认命名空间”更改为我的新值。重新编译。问题解决了。IMO 我们不应该这样做。我们应该能够对源代码进行更改，并期望在不更改配置数据的情况下进行更改。

# php - 如果设置了变量，则 ECHO

> ID：13730681
> 
> 赞同：1
> 
> 时间：2012-12-05T19:11:20.857
> 
> 标签：php

我知道有

```
if (isset($string))
{
    echo $string;
} 
```

但是有没有办法通过声明来做到这一点？我发现一件事看起来可能是它，但我错了。它是

```
var_dump(isset($string)); 
```

因此，我正在寻找可以设置所有 if 变量的东西，然后在一个语句中全部回显该变量..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:14:01.133

也许是这样的：

```
echo (isset($string)) ? $string : null; 
```

这就是所谓的[三元](http://php.net/manual/en/language.operators.comparison.php)运算符。

不确定我是否完全理解这个问题。

# jquery - 用jquery排序后用jquery更新输入值

> ID：13730684
> 
> 赞同：1
> 
> 时间：2012-12-05T19:11:29.947
> 
> 标签：jquery, jquery-ui-sortable

我在让一些 JS 代码工作时遇到问题。我们正在做的是通过拖放对信息表进行排序，然后更新显示移动项目和所有其他项目的排序顺序号的输入字段。

我正在做的一个例子在这里：[http ://artmarketnetwork.com/sort_example.html](http://artmarketnetwork.com/sort_example.html)

显然坏了，我使用的是可排序的jquery，下面的代码是我使用的，可排序的作品，更新其他输入语句的函数的执行不起作用。

```
$(document).ready(function(){
    $("#AttachmentWeight").live("change keyup", function() {
        $("#UserDashboardWeightForm").submit();
    });     

    $(".tablesorter tbody").sortable({ 
        opacity: 0.6, 
        cursor: 'move', 
        update: function() {
            $('table#summary tbody tr:odd').removeClass('alt-row');
            $('table#summary tbody tr:even').addClass('alt-row');
            var order = $(this).sortable("serialize"); 
            $.post("/attachments/sortable/", order);
                            updateInputs();
        }                                 
    });

});

function updateInputs() {
    $("#AttachmentWeight").each(function() {
        var aid = $(this).attr('rel');
        alert(aid);
        var weight = $(this).load("/attachments/getWeight/" + aid);
        alert(weight);
        $(this).val(weight);
    });
} 
```

`

上面对 load("/attachments/...") 的调用正在获取项目的重量。它是一个只返回一个数字的部分，所以我们知道它的权重。

有没有其他人在这方面取得过任何成功？我有一种感觉，我错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:24:06.353

我查看了您网站上的标记。**你不应该在 DOM 中有重复的 id**。将 id 替换为类。

```
<input name="data[Attachment][0][weight]" type="text" value="1" rel="3334" style="width:30px;" class="AttachmentWeight">

function updateInputs() {
    var attachments = $(".AttachmentWeight").each(
         var $this = $(this),
             id = $this.attr("rel"),
             setWeight = function(value){
                $this.val(value);
             };
         $.get("/attachments/getWeight/" + id).done(setWeight);
    );

} 
```

笔记：

永远不要重复ID！

`.load`从服务器加载数据并将返回的 html 注入匹配的 DOM 元素。简单的 $.get 将加载数据而不将其注入 DOM。

# php - 缩短 URL - PHP get

> ID：13730688
> 
> 赞同：0
> 
> 时间：2012-12-05T19:11:42.223
> 
> 标签：php, url, get

如果 URL 如下所示，我如何从 PHP 访问变量 GET 变量： [http ://example.com/somehash](http://example.com/somehash)

当有这样的事情时，我显然知道该怎么做： [http ://example.com/f.php?h=somehash](http://example.com/f.php?h=somehash)

在这里，我只需要 $_GET["h"]，但我不知道如何处理第一种情况...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:16:39.760

答案是你不能。至少在没有一些额外的 Web 服务器配置的情况下并非如此。通常，为了在 PHP 中实现这样的“干净 URL”，在 Web 服务器中执行 URL 重写（`mod_rewrite`例如在 Apache 上）。这样做是静默重定向请求

```
http://example.com/somehash 
```

由脚本处理

```
http://example.com/f.php?h=somehash 
```

这允许 PHP`$_GET`像往常一样填充，同时仍然在浏览器中显示一个干净的 URL。

您可以在 StackOverflow 或 Google 中搜索任意数量的关于如何为干净的 URL 进行 URL 重写的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:18:21.547

如果服务器有重写规则将 URL 更改为漂亮的，它仍然可以正常访问。($_GET) 这是因为脚本以相同的方式解释 URL，但是 mod-rewrite 规则会更改显示的 URL 以使其更漂亮/更容易链接回来。

查看我的答案：[需要一些关于 example.php/example](https://stackoverflow.com/questions/13715238/need-some-answer-about-example-php-example/13715252#13715252)的答案以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:18:53.247

这里有多个部分在起作用：当用户请求[http://example.com/some-page](http://example.com/some-page)`example.com`时，他们连接的 Web 服务器会接收到请求域和路径的 HTTP 请求`some-page`。

您的 Web 服务器会选择该域，将域与正确的虚拟主机匹配，然后将请求传递给该域。因为`some-page`域的文档根目录中可能没有指定文件，所以 Web 服务器将发回一条`404 Not Found`错误消息。

您想告诉您的 Web 服务器将所有与已知文件或目录不匹配的请求重定向到默认脚本，例如`index.php`. 如果您使用的是 Apache，则可以使用 HTTP 重写规则来完成此操作。当 Apache 发送请求时，它通常不会被修改。您将能够使用`$_SERER['REQUEST_URI']`拾取您想要的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:20:53.277

尽管您可能希望使用重写规则来正确执行所有操作，但您仍然可以使用基本的 PHP 来查找 URI 段，假设您已经有了重写规则以允许首先解析指定的 URL...

```
function uriSegments()
{
    return explode("/", $_SERVER['REQUEST_URI']);
}

$segments = uriSegments();

echo $segments[1]; 
```

那应该让你“somehash”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T19:21:08.987

在 PHP 中，您可以查阅该`$_SERVER['REQUEST_URI"]`值，并在需要时应用一些文本转换（子字符串、正则表达式），但在您的情况下，直接使用该值应该可以工作。

# design-patterns - 通过构造函数或在类方法级别注入依赖项？

> ID：13730691
> 
> 赞同：4
> 
> 时间：2012-12-05T19:11:50.177
> 
> 标签：design-patterns, dependency-injection

需要一个设计建议。请看下面的课程。类只有一种方法 类具有以 userName 和 passWord 作为参数的构造函数。问题是 - 如果我从构造函数中删除用户名和密码 - 并将（用户名，密码）发送到 AuthoriseUser 方法有什么区别

这一切都是在注入依赖的背景下发生的

```
 public class UserNameAuthorisationService : IUserNameAuthorisationService
{
    private readonly string _userName;
    private readonly string _password;
    private readonly IUserNameAuthorisationRepository _usernameAuthRepository;

    public UserNameAuthorisationService(string UserName, string Password, IUserNameAuthorisationRepository UsernameAuthRepository)
    {
        _userName = UserName;
        _password = Password;
        _usernameAuthRepository = UsernameAuthRepository;
    }

    public IUser AuthoriseUser()
    {
        throw new NotImplementedException();
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:19:21.190

定义参数构造函数的主要思想是使用*起始*参数启动类。如果您以后不想更改用户/密码，那么使用参数构造函数的好习惯。

另一方面，如果您要更改用户/密码 - 使用`set`方法和无参数构造函数。

顺便说一句，创建一个未完全初始化的类称为*两步构造*是一种反模式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:55:04.770

好的，总的来说，我尝试遵循这种模式：如果有机会，我将使用**构造函数注入**来处理外部依赖项

1.  我将尽可能使用**构造函数注入**
2.  如果不可能合并**构造函数注入**并且我有一个很好的**默认**值，我将使用**属性注入**
*****   **方法注入**在特定情况下具有一定的优势，因为每个方法调用的依赖关系可能会有所不同（查看此处了解更多详细信息：http : [//manning.com/seemann/DIi.NET_sample_ch04.pdf](http://manning.com/seemann/DIi.NET_sample_ch04.pdf)）****

 ****在您的情况下，我会执行以下操作：

1.  将存储库注入留在构造函数中
2.  将用户名和密码移至方法上下文，因为它们很可能不会由 DI 容器提供，但它们是特定于上下文的。我不会将这些参数视为依赖项，而是将其视为值对象。

Having the constructor injection in place is the best possible approach with the DI in general. One of the biggest advantages is that you can easily see if your class violates SOLID principles and you see how many dependencies you have in a single place

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T19:39:02.867

在构造函数中传递初始参数对非可变对象有好处，就好像您不提供 setter 方法一样，“不可能”（如果不考虑任何反射技巧）来更改它们。

如果您计划不允许通过 API 更改此值，这是实现此要求的唯一方法。否则，您可以实现设置器。即使实现了 setter，你也可能认为这个对象没有用户名和密码就不能存在（存在毫无意义），在这种情况下，我会同时保留 setter 和构造函数的初始化。

正如我所见，如果没有密码/用户名/存储库，这个对象就没有任何意义，所以我会将它们的初始化保留在构造函数中。

如果应该充当一个组件，我会将用户名和密码参数移动到`AuthoriseUser`方法中，并且具有例如一个唯一的应用程序实例（您的 DI 容器应该管理它）。`UserNameAuthorisationService`在这种情况下，我将通过 DI 将该对象注入到客户端对象中。

关键是要让你的对象始终保持一致的状态，而不是使用 init() 或 populate() 方法。因此，正如@Maxim 指出的那样，始终完全初始化您的对象并使它们始终处于可用状态，以某种方式，如果`AuthoriseUser()`在没有应该预先填充的强制参数的情况下调用，您不必抛出异常。****

# c# - 单个全局变量 asp.net

> ID：13730693
> 
> 赞同：1
> 
> 时间：2012-12-05T19:12:09.247
> 
> 标签：c#, asp.net, sql, global-variables

我想知道如何设置一个全局变量，以便 ASP.net 网站的所有网页中的命令可以轻松访问该变量。

这将通过一个类来完成，我将如何调用它？

一个例子是持有一个唯一的用户 ID，但能够将该 ID 用于所有网页上的 SQL 查询。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:14:01.287

显而易见的地方是`Session`.

所以例如

```
Session["MyId"] = 99; // to set it 
```

和

```
myId = Session["MyId"]; // to get it 
```

有时会话会失败..所以另一个地方是 Cookies - 假设它不是敏感数据..

```
 // Setting a cookie
 HttpCookie myCookie = new HttpCookie("MyID");
 DateTime now = DateTime.Now;

 // Set the cookie value.
 myCookie.Value = now.ToString();
 // Set the cookie expiration date.
 myCookie.Expires = now.AddMinutes(1);

 // Add the cookie.
 Response.Cookies.Add(myCookie); 
```

您可以通过以下方式读取 cookie：

```
 HttpCookie myCookie = Request.Cookies["MyId"];
 myId = myCookie.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:30:39.240

这真的取决于具体的场景。您有多种选择，可以为您提供不同的行为。

通常对于成为命令参数的 ID，在生成链接以在页面之间传递它们时，您会将这些作为查询字符串参数包含在内。即，如果您有一个用于编辑用户的管理页面，您可能会生成一个带有 URL 的链接列表，例如：

```
/Users/Edit.aspx?userID=123
/Users/Edit.aspx?userID=789 
```

对于当前用户的 ID，应该由您的身份验证机制提供。例如（根据您的身份验证方式，您的方案可能会有所不同）： [ASP.NET 成员身份：当前用户 ID 存储在哪里？](https://stackoverflow.com/questions/8860224/asp-net-membership-where-is-current-user-id-stored)

从那里，任何其他用户级别信息都可以通过外键在与用户 ID 相关的表中。

Session[] 适合当前用户的临时存储。它应该被视为临时的原因是如果应用程序池被回收，它将过期或丢失。在这种情况下，通常没问题，因为无论如何用户都必须重新登录并重新开始。只是不要存储任何真正重要的东西。

您可以使用静态类+静态属性来存储系统范围的信息。

我会避免饼干作为最后的手段。我的任何应用程序中涉及的唯一 cookie 是身份验证框架自动创建的 cookie，我从未直接接触过它们。对于用户或第三方对 cookie 的恶意操作，您必须考虑很多情况。

# actionscript-3 - AIR Starling viewPort StageText 空白

> ID：13730695
> 
> 赞同：1
> 
> 时间：2012-12-05T19:12:24.850
> 
> 标签：actionscript-3, starling-framework

我有：

```
private var txtField:StageText = new StageText();
txtField.stage = Starling.current.NativeStage;
txtField.viewPort = new Rectangle(200, 150, 400, 35); 
```

工作，但是当它被添加到舞台时，你什么都看不到。我需要应用背景颜色还是...

谢谢。

# macos - 将 NSDocument 的 changeCount 链接到 NSTextView

> ID：13730700
> 
> 赞同：0
> 
> 时间：2012-12-05T19:12:45.513
> 
> 标签：macos, cocoa, nstextview, nsdocument, nsundomanager

有没有办法以某种方式将`NSDocument`'s链接到用于文档`changeCount`的唯一文件？`NSTextView`

或者我必须实现所有必要的`NSTextViewDelegate`方法并`changeCount`自己更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:30:52.360

创建基于文档的应用程序。在文档的窗口中放置一个 NSTextView 的实例。构建并运行应用程序。

在文本视图中输入一些内容。您会看到窗口的标题栏反映了文档的编辑状态。尝试撤消和重做；即使这样也行。（您仍然需要实现代码来保存文本视图的内容，但这超出了您的问题范围。）

如果您因此而担心更改计数，请回答您的问题：您无需执行任何操作。

# css - 如何在 twitter bootstrap 的缩略图元素中获得一个 div 以正确调整大小？

> ID：13730701
> 
> 赞同：2
> 
> 时间：2012-12-05T19:12:43.517
> 
> 标签：css, html, twitter-bootstrap

我正在使用 twitter bootstrap，我想在我的缩略图图像上做一个淡入淡出动画，所以我创建了两个具有不同 z 索引的单独类，然后我将它们放入缩略图标签中。然后我使用一些简单的 jquery 让顶层在 mouseenter 上淡出并在 mouseleave 上淡入。一切看起来都很棒，但现在我遇到了这样一个事实，即当我调整窗口大小时，图像的流动不流畅。

缩略图开始重叠并笨拙地重新调整大小。这是代码示例：

```
<div class="container">
<div class="row">

<ul class="thumbnails">
  <li class="span3">
  <div class="thumbnail top">
    <img class="hover_image" src="assets/img/hoversquare.png"/>
  </div>
  <div class="thumbnail bottom">
    <img src="assets/img/hoversquare1.png"/>
  </div>
  </li>

... (there are four of these <li> elements 
```

我使用的课程是：

```
.bottom {
    position: absolute;

    z-index:1;
}

.top {
  position: absolute;
  z-index:2;
 } 
```

此外，包括 hte twitter 引导 css 文件，即：[https ://github.com/twitter/bootstrap/blob/master/docs/assets/css/bootstrap-responsive.css](https://github.com/twitter/bootstrap/blob/master/docs/assets/css/bootstrap-responsive.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T18:17:59.847

基本上，所有重新调整大小都是通过媒体查询完成的...我会尝试调整 css 以满足您的需求...创建 your-responsive.css 并根据您想要解决的所有媒体尺寸定义您的样式该文件...它将覆盖引导响应的CSS，因此您可以实现所需的任何更改...

# c++ - 获得一个 size_type 保证可以通过不同类型的向量进行索引

> ID：13730704
> 
> 赞同：0
> 
> 时间：2012-12-05T19:13:00.623
> 
> 标签：c++

假设我有两种类型，`Class1`并且`Class2`. 然后我创建两个向量：

```
vector<Class1> vec1;
vector<Class2> vec2;
//create vec1 and vec2, such that both have the same number of elements
for (vector<Class1>::size_type i=0; i!=vec1.size(); ++i) {
  c1 = vec1[i];
  c2 = vec2[i]; //BAD?
  //do something
} 
```

你可能得到了图片。在这种情况下，依靠`size_type`for与 for`vector<Class2>`相同不是很糟糕`vector<Class1>`吗？

在这些情况下，如果您有两个包含不同类型对象的大小相同的向量，但它们的相关性足以保证循环遍历它们，那么如何解决这个问题？

我知道我不太可能达到足够高的整数来遇到问题，但是，我仍然想编写好的、健壮的 C++ 代码。也许我应该同时查看两个`size_type`s 并取它们中的最小值？这是要走的路吗？对我来说，这听起来像是一种奇怪的做法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:36:06.840

我不确定这是否由标准保证，但`vector::size_type`无论您选择什么模板参数，我都希望所有类型都是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:53:11.803

`std::allocator`定义`size_type`为，因此`size_t`您可以假设您可以保证没有自定义分配器为其 s 定义不同`size_type`的`size_t` ***类型***`size_type`。

但是，您冒着有人稍后回来并添加可能与此假设不兼容的自定义分配器的风险。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T19:29:49.007

我认为，至少在理论上，你想要的是这样的：

```
std::common_type<std::vector<classA>::size_type, 
                 std::vector<classB>::size_type>::type i;

for (i=0; i!=vec1.size(); i++)
    // ... 
```

不过，我怀疑您是否会在大多数代码中定期看到这一点（也很可能是编写它的圣诞晚会的祝酒词）。

# c++ - 是否会在堆上分配内存以支持将临时对象嵌套绑定到 const 引用？

> ID：13730706
> 
> 赞同：3
> 
> 时间：2012-12-05T19:13:13.263
> 
> 标签：c++

`const`考虑以下代码，它以“嵌套”方式将临时对象绑定到引用：

```
#include <iostream>

std::string foo()
{
    return "abc";
}

std::string goo()
{
    const std::string & a = foo();
    return a;
}

int main()
{
    // Is a temporary allocated on the heap to support this, even for a moment?
    const std::string & b = goo();
} 
```

我一直试图了解编译器必须在内存存储方面做什么才能支持这种“嵌套”结构。

我怀疑对于对 的调用`foo()`，内存分配很简单：`std::string`当函数`foo()`退出时，将在堆栈上分配 a 的存储空间。

但是，编译器必须做些什么来支持对 引用的对象的存储`b`？函数的堆栈`goo`必须展开并“替换为”所`b`引用的堆栈上的对象，但是为了展开堆栈`goo`，编译器是否需要暂时在堆上创建对象的副本（在复制之前）它回到不同位置的堆栈）？

或者编译器是否有可能在没有在堆上分配任何存储的情况下完成这个构造的要求，即使是片刻？

或者，编译器甚至可以为 引用的对象和 引用的对象使用相同*的*存储位置，而无需在堆栈或堆上进行任何额外的分配？`b``a`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T19:18:08.520

我认为您没有考虑中间步骤，即您没有绑定`b`到`a`，而是绑定到`a`. 这不是由于任何花哨的记忆恶作剧！

`goo`按值返回，因此，根据所有常用机制，该值在内部*完整表达式*的范围内可用。`main`它要么在`main`的堆栈框架中，要么在其他地方，或者（在这种人为的情况下）可能完全优化。

这里唯一的魔力是它*一直保持*在`main`' 范围内，直到`b`超出范围，因为`b`它是一个 ref-to- `const`（而不是几乎立即被销毁）。

那么，堆会以任何方式进入它吗？好吧，如果你有一个堆，没有。如果您的意思是免费商店，那么，仍然没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T19:15:58.100

从理论上讲，由于`goo`（并且`foo`就此而言）按值返回，`a`因此将返回引用的变量的副本（并放置在堆栈上）。所述副本的生命周期将延长`b`, 直到`b`' 范围结束。

我认为您缺少的要点是您**按值**返回。这意味着在`foo`或`goo`返回之后，它们里面的任何东西都没有区别——你留下了一个绑定到`const`引用的临时字符串。

在实践中，一切都很有可能被优化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T19:30:21.923

以下是 C++ 标准允许编译器重建代码的示例。我正在使用完整的 NRVO。请注意放置的使用`new`，这是一个比较晦涩的 C++ 功能。您传递`new`一个指针，它在那里而不是在免费存储中构造结果。

```
#include <iostream>

void __foo(void* __construct_std_string_at)
{
  new(__construct_std_string_at)std::string("abc");
}

void __goo(void* __construct_std_string_at)
{
  __foo(__construct_std_string_at);
}

int main()
{
  unsigned char __buff[sizeof(std::string)];
  // Is a temporary allocated on the heap to support this, even for a moment?
  __goo(&__buff[0]);
  const std::string & b = *reinterpret_cast<std::string*>(&__buff[0]);
  // ... more code here using b I assume
  // end of scope destructor:
  reinterpret_cast<std::string*>(&__buff[0])->~std::string();
} 
```

如果我们阻止了 NRVO `goo`，它看起来会像

```
#include <iostream>

void __foo(void* __construct_std_string_at)
{
  new(__construct_std_string_at)std::string("abc");
}

void __goo(void* __construct_std_string_at)
{
  unsigned char __buff[sizeof(std::string)];
  __foo(&__buff[0]);
  std::string & a = *reinterpret_cast<std::string*>(&__buff[0]);
  new(__construct_std_string_at)std::string(a);
  // end of scope destructor:
  reinterpret_cast<std::string*>(&__buff[0])->~std::string();
}

int main()
{
  unsigned char __buff[sizeof(std::string)];
  // Is a temporary allocated on the heap to support this, even for a moment?
  __goo(&__buff[0]);
  const std::string & b = *reinterpret_cast<std::string*>(&__buff[0]);
  // ... more code here using b I assume
  // end of scope destructor:
  reinterpret_cast<std::string*>(&__buff[0])->~std::string();
} 
```

基本上，编译器知道引用的生命周期。因此它可以创建“匿名变量”来存储变量的实际实例，然后创建对它的引用。

我还注意到，当你调用一个函数时，你实际上（隐式地）传递了一个指向返回值所在的缓冲区的指针。因此，被调用函数在调用者的范围内“就地”构造对象。

使用NRVO，被调用函数范围内的命名变量*实际上是*在调用函数“返回值所在的地方”构造的，这使得返回变得容易。没有它，您必须在本地完成所有操作，然后在 return 语句中将您的返回值复制到通过相当于放置 new 的隐式指针指向您的返回值。

不需要在堆上做任何事情（又名免费存储），因为生命周期都很容易证明和堆栈排序。

原始的`foo`和`goo`具有预期签名的必须仍然存在，因为它们具有外部链接，直到发现没有人使用它们时可能被丢弃。

所有以 开头的变量和函数`__`仅用于说明。编译器/执行环境不再需要命名变量，就像您需要为红细胞命名一样。（理论上，因为`__`是保留的，所以在编译之前进行这种翻译传递的编译器可能是合法的，如果您实际使用了这些变量名并且它未能编译，那将是您的错，而不是编译器的错，而是......那将是一个非常老套的编译器。;))

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T19:19:32.437

不，不会对生命周期延长进行任何动态分配。常见的实现等价于下面的代码转换：

```
std::string goo()
{
    std::string __compiler_generated_tmp = foo();
    const std::string & a = __compiler_generated_tmp;
    return a;
} 
```

不需要动态分配，因为只要引用还活着，生命周期就会被延长，并且按照在当前范围结束时发生的 C++ 生命周期规则。通过在作用域中放置一个未命名的（`__compiler_generated_tmp`在上面的代码中）变量，通常的生命周期规则将适用并执行您期望的操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T19:41:09.843

在`std::string goo()`中，一个 std::string 按值返回。

当编译器看到您在 main() 中调用此函数时，它会注意到返回值是 std::string，并在 main 堆栈上为 std::string 分配空间。

当 goo() 返回时， goo() 中的引用`a`不再有效，但 std::string`a`引用被复制到 main() 中堆栈上保留的空间中

[在这种情况下，可以进行多种优化，您可以在此处](http://msdn.microsoft.com/en-us/library/ms364057%28VS.80%29.aspx)了解一个编译器可以做什么

# php - 多维数组到字符串？

> ID：13730708
> 
> 赞同：1
> 
> 时间：2012-12-05T19:13:21.567
> 
> 标签：php, facebook-fql

我将如何从 facebook 好友列表查询转换此数组，

```
Array ( 
    [data] => Array ( 
        [0] => Array ( 
            [uid2] => 10000476689*** 
        ) 
        [1] => Array (         
            [uid2] => 10000477429*** 
        ) 
    )
) 
```

成逗号分隔的字符串，例如：`10000476689***,10000476689***,1000047668***`，所以我可以将它插入到我的数据库中。那我必须先转换成关联数组`implode(',' , $variable)`吗？

我试过这个

```
function val_sort($array,$key){
    foreach($array as $k=> $v){
        $b[] =strtolower($v[$key]);
    }   

    //print_r($b);
    asort($b);
    echo '</br>';
    //print_r($b);

    foreach ($b as $k=>$v){
        $c[]=$array[$k];
    }

    return $c;  
}

 $sorted =val_sort($fql_query_obj, 'uid2'); //$fql_query_obj; is from facebook//
 print_r ($sorted); 
```

得到这个，

```
Array ( [0] => ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:18:29.423

假设您的主数组已加载到变量中，请尝试此操作`$array`：

```
$valuesArray = array();
foreach ($array['data'] as $inner$array) {
    $valuesArray[] = current($innerArray);
}

$sqlStringValues = implode(',', $valuesArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:18:34.447

假设这`$array`是您的数据数组。

```
$array = array_map(function($data) { return $data['uid2']; }, $array);
$string = implode(',', $array); 
```

# javascript - 是否可以在没有回调函数的情况下从 setTimeout 返回值？

> ID：13730709
> 
> 赞同：2
> 
> 时间：2012-12-05T19:13:27.400
> 
> 标签：javascript

长话短说，没有回调函数可以做这样的事情吗？

```
function foo(){
  return 'foo';
}
function bar(){
  x = setTimeout(foo, 2000);
  alert(x);
} 
```

无需修改 foo() 函数。添加一个中介功能会很好，但我认为这不会完成任何事情。

长话短说：我希望通过 window.open 模拟 window.showModalDialog ，而不必在任何使用该死的东西的地方进行重要的代码重写。我发现的唯一建议是使用 while 循环或 ping 服务器来模拟 sleep()。这两种解决方案都没有让我觉得理想，我想知道是否还有其他方法可以做这样的事情减去回调函数方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T19:15:04.850

简短的回答：*不*。

我会更详细地回答，但是由于您要求“简短”的回答并排除了另一个“回调”，因此只剩下要说的了。

`setTimeout`将*始终*返回一个标识符以*清除*超时，并且您从传入的函数*返回*`setTimeout`的任何内容都将被忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T19:16:12.343

不，那是不可能的。然而，你可以返回[代表未来值的](http://en.wikipedia.org/wiki/Futures_and_promises)东西，然后让你添加回调：一个[Promise](http://wiki.commonjs.org/wiki/Promises)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:16:30.780

重构你的设计。您很可能通过超时来实现您正在寻找的东西，但不是这样。不要违背约定，使用回调

```
function foo(){
 alert('foo');
}
function bar(){
 setTimeout(foo, 2000);
} 
```

就将超时保存在变量中而言，它用于清除超时。

```
timeoutID = setTimeout();
window.clearTimeout(timeoutID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T23:32:15.920

setTimout 已经返回了一些东西，但它不是评估表达式的值。它返回一个 timout 对象，让您在需要时中止并稍后执行其他操作。setTimeout 只是告诉一个函数在将来执行。

如果您想获得可能适用于您的情况的功能，您可以使用以下内容：

```
var answer = null;
setTimeout(function() {
    /*do something to 'answer'*/
    answer = 14;
}, 1000); 
```

注意：这意味着您几乎无法控制何时设置“答案”。这就是为什么最好总是使用回调，因为你告诉你的代码“将来，当你有一个值时，在它上面执行这个函数”。

# c# - 从 C# 自定义配置文件中检索信息

> ID：13730710
> 
> 赞同：2
> 
> 时间：2012-12-05T19:13:27.063
> 
> 标签：c#, config, configurationsection

嗨，我有一个配置文件

```
<environments selectedEnvironment="10" selectedSite="UK">
<environment env="10">
<secure>
  <site name="UK"  url="https://www.google.co.uk/"/>
  <site name="US"  url="https://www.google.com/"/>
</secure>
<content>
  <site name="UK" isoCode="UK" url="http://www.yahoo.co.uk"/>
  <site name="US" isoCode="UK" url="http://www.yahoo.com"/>
</content>
<office url="http://google-office.com"/>
</environment>
<environment env="24">
<secure>
  <site name="UK" url="https://yahoo.co.uk"/>
  <site name="US" url="https://yahoo.com"/>
</secure>
<content>
  <site name="UK" url="https://google.co.uk"/>
  <site name="US" url="https://google.com"/>
</content>
<office url="http://yahoo-docs.com"/> 
</environment>
</environments> 
```

我想根据 selectedEnvironment 和 selectedSite 的值选择安全、内容和办公室中的 url

我目前的代码是：

部分：

```
 public class EnvironmentsConfigurationSection : ConfigurationSection
{
    [ConfigurationProperty("selectedEnvironment", IsRequired = true)]
    public string SelectedEnvironment
    {
        get { return this["selectedEnvironment"].ToString(); }
        set { this["selectedEnvironment"] = value; }
    }
    [ConfigurationProperty("name", IsRequired = true)]
    public string EnvironmentName
    {
        get { return this["name"].ToString(); }
        set { this["name"] = value; }
    }
    [ConfigurationProperty("selectedSite", IsRequired = true)]
    public string SelectedSite
    {
        get { return this["selectedSite"].ToString(); }
        set { this["selectedSite"] = value; }
    }
    [ConfigurationProperty("environment", IsDefaultCollection = true, Options = ConfigurationPropertyOptions.IsRequired)]
    [ConfigurationCollection(typeof(EnvironmentConfigurationElement), AddItemName = "selectedEnv")]
    public EnvironmentConfigurationElement EnvironmentConfig
    {
        get { return this["environment"] as EnvironmentConfigurationElement; }
    }
} 
```

元素集合：

```
 public class EnvironmentConfigurationCollection : ConfigurationElementCollection
{
    public new EnvironmentConfigurationElement this[string key]
    {
        get { return this.BaseGet(key) as EnvironmentConfigurationElement; }
    }
    public EnvironmentConfigurationElement this[int index]
    {
        get { return base.BaseGet(index) as EnvironmentConfigurationElement; }
        set
        {
            // Remove any existing element
            if (base.BaseGet(index) != null)
            {
                base.BaseRemoveAt(index);
            }
            this.BaseAdd(index, value);
        }
    }
    protected override ConfigurationElement CreateNewElement()
    {
        return new EnvironmentConfigurationElement();
    }
    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((EnvironmentConfigurationElement)element).Environment;
    }
} 
```

元素：

```
 public class EnvironmentConfigurationElement:ConfigurationElement
 {
    [ConfigurationProperty("env", IsRequired = true, IsKey = true)]
    public string Environment
    {
        get { return this["env"].ToString(); }
        set { this["env"] = value; }
    }

    [ConfigurationProperty("secure", IsRequired = true)]
    [ConfigurationCollection(typeof(CheckoutConfigurationCollection), AddItemName         ="site")]
    public CheckoutConfigurationCollection Secure
    {
        get { return this["secure"] as SecureConfigurationCollection; }
    }
    [ConfigurationProperty("content", IsRequired = true)]
    [ConfigurationCollection(typeof(ContentConfigurationCollection), AddItemName = "site")]
    public CheckoutConfigurationCollection Content
    {
        get { return this["content"] as CheckoutConfigurationCollection; }
    }
    [ConfigurationProperty("office", IsRequired = true)]
    [ConfigurationCollection(typeof(officeBaseUrlConfigurationElement), AddItemName = "url")]
    public BackOfficeBaseUrlConfigurationElement Office
    {
        get { return this["office"] as officeBaseUrlConfigurationElement; }
    }
} 
```

当我使用运行代码时

```
EnvironmentConfiguration = (EnvironmentsConfigurationSection)ConfigurationManager.GetSection("testExecutionSettings/environments"); 
```

我收到一个错误，即未找到属性“env”，即使它作为元素的一部分存在。

谁能告诉我在这种情况下该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:36:56.633

如果您愿意尝试 Linq2Xml 和 XPath

```
string selectedEnvironment="10";
string selectedSite= "UK";

var xpath = string.Format("//environments[@selectedEnvironment='{0}' and @selectedSite='{1}']//*[@url]",
                            selectedEnvironment,
                            selectedSite);

var xDoc = XDocument.Parse(xml); //XDocument.Load(filename)

var urls = xDoc.XPathSelectElements(xpath)
               .Select(e => e.Attribute("url").Value)
               .ToList(); 
```

# python - PyGTK：ScrolledWindow 中的奇数表大小调整行为

> ID：13730715
> 
> 赞同：0
> 
> 时间：2012-12-05T19:13:43.547
> 
> 标签：python, gtk

我注意到 gtk.Table 的一些奇怪行为。尝试运行此代码：

```
import gtk

class Scrollbar:
    def __init__(self):
        window = gtk.Window()
        window.set_default_size(200, 200)

        button1 = gtk.Button("Button 1")
        button2 = gtk.Button("Button 2")

        table = gtk.Table(20, 20)
        for i in xrange(20):
            for j in range(20):
                table.attach(gtk.Label("%d, %d" % (i, j)), i, i+1, j, j+1, 
                    gtk.FILL | gtk.SHRINK, gtk.FILL | gtk.SHRINK)

        viewport = gtk.Viewport()
        viewport.add(table)

        vadjust = viewport.get_vadjustment()
        hadjust = viewport.get_hadjustment()        

        vscroll = gtk.VScrollbar(vadjust)
        hscroll = gtk.HScrollbar(hadjust)

        superTable = gtk.Table(2, 2, False)
        superTable.attach(viewport, 0, 1, 0, 1, gtk.FILL | gtk.EXPAND, gtk.FILL | gtk.EXPAND)
        superTable.attach(vscroll, 1, 2, 0, 1, gtk.FILL | gtk.SHRINK, gtk.FILL | gtk.SHRINK)
        superTable.attach(hscroll, 0, 1, 1, 2, gtk.FILL | gtk.SHRINK, gtk.FILL | gtk.SHRINK)

        window.add(superTable)

        window.connect("destroy", lambda w: gtk.main_quit())
        window.show_all()

Scrollbar()
gtk.main() 
```

当我尝试这个时，窗口的最小尺寸变得足够大以容纳整个表格而不滚动，这对于大型表格来说变得不切实际。如果我使用 ScrolledWindow 这不会发生。为什么？（这个问题与具有更复杂滚动行为的应用程序有关，我不能只使用 ScrolledWindow）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:19:22.040

您可以添加 viewport.set_size_request(x, y)，如果表格大于视口大小，则激活滚动。

# ruby - 如何在 Ruby 中遍历内存中的 zip 文件

> ID：13730720
> 
> 赞同：13
> 
> 时间：2012-12-05T19:13:58.483
> 
> 标签：ruby, zip, in-memory, rack-test

我正在编写一个单元测试，其中一个正在返回一个 zip 文件，我想检查这个 zip 文件的内容，从中获取一些值，并将这些值传递给下一个测试。

我正在使用 Rack Test，所以我知道我的 zip 文件的内容在`last_response.body`. 我查看了[RubyZip](http://rubyzip.sourceforge.net/)的文档，但似乎它总是需要一个文件。由于我正在运行单元测试，因此如果可能的话，我更喜欢在内存中完成所有操作，以免使用测试 zip 文件污染任何文件夹。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-09T16:44:59.963

马特的回答完全正确。在这里它更新为新的 API：

```
Zip::InputStream.open(StringIO.new(input)) do |io|
  while entry = io.get_next_entry
    if entry.name == 'doc.kml'
      parse_kml(io.read)
    else
      raise "unknown entry in kmz file: #{entry.name}"
    end
  end
end 
```

并且不再需要对 StringIO 进行monkeypatch。进步！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-05T21:23:31.027

> 请参阅[@bronson 的答案](https://stackoverflow.com/a/20475895/214790)以获取使用较新的 RubyZip API 的此答案的更新版本。

您链接到的 Rubyzip 文档看起来有点旧。最新[版本 (0.9.9) 可以处理`IO`objects](https://github.com/aussiegeek/rubyzip/blob/0.9.9/lib/zip/zip_input_stream.rb#L77)，因此您可以使用 StringIO（稍作调整）。

即使 api 将接受一个`IO`，它似乎仍然假设它是一个文件并尝试调用它，所以首先要添加一个方法的`path`猴子补丁（它实际上不需要做任何事情）：`StringIO``path`

```
require 'stringio'
class StringIO
  def path
  end
end 
```

然后您可以执行以下操作：

```
require 'zip/zip'
Zip::ZipInputStream.open_buffer(StringIO.new(last_response.body)) do |io|
  while (entry = io.get_next_entry)
    # deal with your zip contents here, e.g.
    puts "Contents of #{entry.name}: '#{io.read}'"
  end
end 
```

一切都将在内存中完成。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-31T17:43:51.830

```
Zip::File.open_buffer(content) do |zip|
  zip.each do |entry|
    decompressed_data += entry.get_input_stream.read
  end
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-09T05:00:04.350

使用[RubyZip](https://rubygems.org/gems/rubyzip/versions/1.2.1)版本`1.2.1`（或者可能还有一些以前的版本），我们只需要使用类`open_buffer`的方法`Zip::File`。

来自 RubyZip 文档：

> 与#open 类似，但从字符串或打开的 IO 流中读取 zip 存档内容，并将数据输出到缓冲区。（这可用于从下载的 zip 存档中提取数据，而无需先将其保存到磁盘。）

例子：

```
Zip::File.open_buffer(last_response.body) do |zip|
  zip.each do |entry|
    puts entry.name
    # Do whatever you want with the content files.
  end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T19:49:36.270

您可以使用`Tempfile`将 zip 文件转储到临时文件中。Tempfile 创建一个特定于操作系统的临时文件，在您的程序完成后将由操作系统清理。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-19T17:04:49.303

受马特回答的启发，我为那些必须使用 0.9.x ruby​​zip gem 的人提供了一个稍微修改的解决方案。我的不需要新的类定义。

```
sio = StringIO.new(response.body)
sio.define_singleton_method(:path) {} #needed to create fake method path TO satisfy the ancient rubyzip 0.9.8 gem
Zip::ZipInputStream::open_buffer(sio) { |io|
    while (entry = io.get_next_entry)
        puts "Contents of #{entry.name}"
     end
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-02T23:23:04.557

这对我有用。就我而言，我只有一个文件，因此我使用了固定路径，但您可以使用它`entry.name`来构建路径。

```
input = HTTParty.get(link).body
Zip::File.open_buffer(input) do |zip_file|
    zip_file.each do |entry|
      entry.extract(path)
    end
end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-27T00:27:05.640

由于 ruby​​zip 的更改，仅对此进行了更新：

```
Zip::InputStream.open(StringIO.new(zip_file)) do |io|
  while (entry = io.get_next_entry)
    # deal with your zip contents here, e.g.
    puts "Contents of #{entry.name}: '#{io.read}'"
  end
end 
```

# android - Android 货币转换

> ID：13730726
> 
> 赞同：0
> 
> 时间：2012-12-05T19:14:19.613
> 
> 标签：android, post, get, currency

可能是一个愚蠢的问题，但我希望将货币转换为例如所有美元。我发现这是一个网络服务：[http ://www.webservicex.net/CurrencyConvertor.asmx?op=ConversionRate](http://www.webservicex.net/CurrencyConvertor.asmx?op=ConversionRate)

我可以在android中使用它吗？如何使用？我应该请求转换率并获得新货币的金额或汇率，所以我可以使用它。

```
HTTP GET

The following is a sample HTTP GET request and response. The placeholders shown need to be replaced with actual values.

GET /CurrencyConvertor.asmx/ConversionRate?FromCurrency=string&ToCurrency=string HTTP/1.1
Host: www.webservicex.net
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<double xmlns="http://www.webserviceX.NET/">double</double>

HTTP POST

The following is a sample HTTP POST request and response. The placeholders shown need to be replaced with actual values.

POST /CurrencyConvertor.asmx/ConversionRate HTTP/1.1
Host: www.webservicex.net
Content-Type: application/x-www-form-urlencoded
Content-Length: length

FromCurrency=string&ToCurrency=string
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<double xmlns="http://www.webserviceX.NET/">double</double

> Blockquote 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:29:07.033

这应该相当容易。首先，您需要从 Web 请求文件，这可以使用常规 InputStreamReader 来完成，如下[例](https://stackoverflow.com/questions/4980741/problem-fetching-xml-file-in-java)所示：

```
URL url = new URL("http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=USD&ToCurrency=GBP");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(url.openStream()));
doc.getDocumentElement().normalize();
NodeList doubleList = doc.getElementsByTagName("double");
string ratio = doubleList.item(0).getNodeValue();
double dRatio = Double.ParseDouble(ratio); 
```

从这里你可以得到两种货币之间的比率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T20:17:52.853

谢谢托马斯！我最终通过雅虎管理！有以下课程：

```
public class CurrencyConverter {

    static Context myContext = null;
    public double result;
    public String s;
    static AppicLifeService ALS;

    public CurrencyConverter (Context context) {
        myContext = context;
        ALS=new AppicLifeService(myContext);

         }

    public double ConvertCurrency (double amount, String from, String to){
        result=0;
        if (from==to){result=amount;} 
     else
     {
        try {

        s = getJson("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20(%22"+from+to+"%22)&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=");                      

        JSONObject jObj;
        jObj = new JSONObject(s);
        String exResult = jObj.getJSONObject("query").getJSONObject("results").getJSONObject("rate").getString("Rate");

        double exchangerate=Double.parseDouble(exResult);

        result=amount*exchangerate;

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ALS.Toast(myContext.getString(R.string.conversionerror), false);
        }
        catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ALS.Toast(myContext.getString(R.string.conversionerror), false);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            ALS.Toast(myContext.getString(R.string.conversionerror), false);
        }                                                    
    }
    return result;  

}                               

public String getJson(String url)throws ClientProtocolException, IOException {

StringBuilder build = new StringBuilder();
HttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url);
HttpResponse response = client.execute(httpGet);
HttpEntity entity = response.getEntity();
InputStream content = entity.getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(content));
String con;
while ((con = reader.readLine()) != null) {
    build.append(con);
}
return build.toString();
}
} 
```

# haskell - 如何访问hmatrix中的元素？

> ID：13730730
> 
> 赞同：3
> 
> 时间：2012-12-05T19:14:43.263
> 
> 标签：haskell, matrix

我开始`hmatrix`在 Haskell 中进行矩阵操作。我发现创建矩阵非常容易：

```
ghci> let m = (10><10) [1..]
ghci> m
(10><10)
 [  1.0,  2.0,  3.0,  4.0,  5.0,  6.0,  7.0,  8.0,  9.0,  10.0
 , 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0,  20.0
 , 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0,  30.0
 , 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0,  40.0
 , 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0,  50.0
 , 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0,  60.0
 , 61.0, 62.0, 63.0, 64.0, 65.0, 66.0, 67.0, 68.0, 69.0,  70.0
 , 71.0, 72.0, 73.0, 74.0, 75.0, 76.0, 77.0, 78.0, 79.0,  80.0
 , 81.0, 82.0, 83.0, 84.0, 85.0, 86.0, 87.0, 88.0, 89.0,  90.0
 , 91.0, 92.0, 93.0, 94.0, 95.0, 96.0, 97.0, 98.0, 99.0, 100.0 ] 
```

这很容易，即使是矩阵乘法：

```
ghci> m <> m
(10><10)
 [  3355.0,  3410.0,  3465.0,  3520.0,  3575.0,  3630.0,  3685.0,  3740.0,  3795.0,  3850.0
 ,  7955.0,  8110.0,  8265.0,  8420.0,  8575.0,  8730.0,  8885.0,  9040.0,  9195.0,  9350.0
 , 12555.0, 12810.0, 13065.0, 13320.0, 13575.0, 13830.0, 14085.0, 14340.0, 14595.0, 14850.0
 , 17155.0, 17510.0, 17865.0, 18220.0, 18575.0, 18930.0, 19285.0, 19640.0, 19995.0, 20350.0
 , 21755.0, 22210.0, 22665.0, 23120.0, 23575.0, 24030.0, 24485.0, 24940.0, 25395.0, 25850.0
 , 26355.0, 26910.0, 27465.0, 28020.0, 28575.0, 29130.0, 29685.0, 30240.0, 30795.0, 31350.0
 , 30955.0, 31610.0, 32265.0, 32920.0, 33575.0, 34230.0, 34885.0, 35540.0, 36195.0, 36850.0
 , 35555.0, 36310.0, 37065.0, 37820.0, 38575.0, 39330.0, 40085.0, 40840.0, 41595.0, 42350.0
 , 40155.0, 41010.0, 41865.0, 42720.0, 43575.0, 44430.0, 45285.0, 46140.0, 46995.0, 47850.0
 , 44755.0, 45710.0, 46665.0, 47620.0, 48575.0, 49530.0, 50485.0, 51440.0, 52395.0, 53350.0 ] 
```

但是我如何访问一个元素？例如，我想阅读`m[10][10]`，但我真的不知道该怎么做。

```
ghci> m[10][10]
<interactive>:30:1:
The function `m' is applied to two arguments,
but its type `Matrix Double' has none
In the expression: m [10] [10]
In an equation for `it': it = m [10] [10] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T19:18:58.540

您可能应该使用[`@@>`](http://hackage.haskell.org/packages/archive/hmatrix/0.14.1.0/doc/html/Data-Packed-Matrix.html#v%3a-64--64--62-)“读取矩阵位置”：

```
λ > let m = (10><10) [1..]
λ > m @@> (0, 3)
4.0
λ > m @@> (3, 0)
31.0
λ > m @@> (9, 9)
100.0
λ > m @@> (10, 10)
*** Exception: matrix indexing out of range 
```

请注意，索引是从零开始的。

您还应该阅读[API 文档](http://hackage.haskell.org/packages/archive/hmatrix/0.14.1.0/doc/html/Data-Packed-Matrix.html)。

# delphi - 如何修复基于使用不同单元的接口的模拟对象引起的“未声明的标识符”

> ID：13730734
> 
> 赞同：1
> 
> 时间：2012-12-05T19:14:52.533
> 
> 标签：delphi, unit-testing, mocking, undeclared-identifier

我正在模拟一个对象支持接口 IClient 以用于单元测试。

接口本身在另一个单元 ClientIF 中定义。

该接口引用了在另一个单元 ldetail 中定义的 TDetail。

如果我模拟 TDetail，我会在任何使用 TDetail 的函数上得到一个未识别的错误。

```
[DCC Error] MockClient.pas(16): E2003 Undeclared identifier: 'GetDetailValue'
[DCC Error] MockClient.pas(16): E2003 Undeclared identifier: 'GetDetail'
[DCC Error] MockClient.pas(16): E2003 Undeclared identifier: 'GetActiveDetail'
[DCC Fatal Error] EmailPdfPropertiesGeneratorTests.pas(25): F2063 Could not compile used unit 'MockClient.pas' 
```

我需要能够模拟接口和支持的细节对象来测试我正在处理的单元/接口。否则，这一切都与后端数据有关，这将是一场测试噩梦。

相关 MockClient.pas 单元代码

```
uses ClientIF, MockDetail;

TMockClient = class(TInterfacedObject, IClient)
  FDetail: TDetail;
  function GetDetailValue: TDetail;
  function GetDetail: TDetail;
  function GetActiveDetail: TDetail;
  function GetDetailName: String;
end; 
```

相关ClientIF.pas接口代码

```
uses Classes, TaxConst, OSIConst, ldetail, clNotesIF, MissingDataDefIF,
      ClientDataChangeEventIF;

    type
      IClient = interface
        ['{CFED9A10-1601-11D4-ACF6-005004889419}']
        function GetDetailValue: TDetail;
        function GetDetail: TDetail;
        function GetActiveDetail: TDetail;
        function GetDetailName: String;
      end; 
```

相关MockDetail.pas代码

```
uses Classes;

type

  TCodeValuesRec = class
    private
      fAmount: double;
      fDesc: String;
      fStateID: integer;
      fCityID: String;
      fSuffixCount: integer;
    public
      property Amount: double read fAmount write fAmount;
      property Desc: String read fDesc write fDesc;
      property StateID: integer read fStateID write fStateID;
      property CityID: String read fCityID write fCityID;
      property SuffixCount: integer read fSuffixCount write fSuffixCount;
  end;

  TDetail = class
  private
    FSeries: Integer;
    FProp: Integer;
    FPropCount: Integer;
    FCodeValuesRec: TCodeValuesRec;
  public
    property Series: Integer read FSeries write FSeries;
    property Prop: Integer read FProp write FProp;
    property PropCount: Integer read FPropCount write FPropCount;
    function GetCodeValuesRecord(WhichRecord: Integer):TCodeValuesRec;
    constructor Create;
    destructor Destroy; override;
  end; 
```

如果我在 MockClient uses 子句中将 MockDetail 替换为 ldetail ，它会编译，但是，当然，细节是我必须模拟的事情之一，因为它是来自被测代码的调用之一。

我们正在尝试对遗留代码进行测试，这是一个过程。有这个问题的代码实际上是新代码，但第一次需要旧对象进行测试。

这个问题的目标是测试新代码，因此创建一个旧接口的模拟（其中包含一个旧类），以便 MyClient.GetDetail 将返回填充了我可以在对象中使用的信息的模拟 TDetail正在测试中。如果不重构就无法伪造旧代码，那么该过程将不得不等待。

如果我可以让假的 Client 和 Detail 完成他们的假工作并编译到测试框架 (DUnit) 中，那么我的测试就可以针对真实的（新）代码运行，这就足够了，并且现在可以进行所有这些工作。

我们目前正在使用 Delphi 2010（今年已升级），并且最终将使用 XE，但我还不能使用 Mock 框架，因为它似乎只能与 XE2 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:58:08.503

您必须针对接口进行编码和/或使 TDetail 成为“真实”和模拟 Detail 类的（抽象）祖先。否则，您将继续造成涟漪效应。

您需要找到一种方法来为创建 TDetail 实例的任何内容提供一种“注入”要使用的实际类的方法。想想依赖注入，但请记住，依赖注入是一个概念，而不是一个框架。

为了让你的代码减少对特定类的依赖，同时保留使用类特定构造函数的能力（而不是大多数成熟的依赖注入实现所需的标准无参数构造函数），元类可以来拯救。它们允许您使用自己特定的构造函数来实例化一个类。

```
type
  TDetail = class(TInterfacedObject)
  end;

  TDetailClass = class of TDetail; // Meta class declaration

  function SomeFunction(const aDetailClass: TDetailClass): TDetail;
  begin
    Result := aDetailClass.Create({whatever parameters the TDetail constructor needs});
  end; 
```

使用元类和 TInterfacedObject 后代的一个警告： TInterfacedObject 有一个普通的构造函数，并且为了通过元类进行实例化以正常工作，您确实需要虚拟构造函数来确保调用正确的构造函数。就是将代码从后代中的构造函数覆盖移动到 AfterConstruction 覆盖。

笔记：

Rob 是绝对正确的，如果您需要在后代构造函数中进行特定于类的工作，则只需要虚拟构造函数。我的“建议”较少基于此示例中 TDetail 的具体细节，而更多基于使用虚拟构造函数“替换” TInterfacedObject 的优点，如果您通过依赖注入和模拟（或存根）来实现更多的控制反转。

笔记：

*在上游不做任何*更改的情况下让假货正常工作将是一项艰巨的任务。但是，您可能会采用使用 Delphi 范围顺序的方法：将您的测试存根（或模拟）命名为与您的测试类完全相同，并确保模拟单元在创建 TDetail 实例的单元的范围内比创建 TDetail 实例的单元的范围更近。包含实际定义的单元：

```
uses 
  Client, Detail, MockClient, MockDetail; 
```

将确保`TDetail.Create`从 MockDetail 单元而不是 Detail 单元实例化 TDetail。

# facebook - 在页面照片上传的新闻提要中显示自定义 Facebook 应用程序图标

> ID：13730737
> 
> 赞同：0
> 
> 时间：2012-12-05T19:15:12.093
> 
> 标签：facebook, facebook-graph-api

当我们创建基于文本的常规 Facebook 状态更新（通过 Graph API）时，应用名称和图标都会在主页粉丝查看时显示在新闻提要中。

但是，当我们将照片上传到该主页的相册时，应用程序图标将不会显示（使用默认的 Facebook 相册图标）。应用名称确实显示正确。

这是 Facebook 如何在新闻提要中显示照片上传的限制，还是必须进行额外的应用程序配置才能允许它？我目前对发布自定义 Open Graph 操作不感兴趣。

我们的客户找到了一个通过 Instagram 将照片上传到 facebook 的示例，其中显示了自定义应用程序图标。他们发布的是开放图操作而不是照片上传吗？

请参见下面的示例：

![Facebook 应用程序图标新闻提要示例](../Images/32f657623024ceedc32ef97f40c48279.png)

![Instagram 上传显示图标](../Images/7a945a65c7000cf793766f006b1c8019.png)

编辑：要关注的 Facebook 错误：http: [//developers.facebook.com/bugs/447623711966656 ?browse=search_50bfaaaf247045772567103](http://developers.facebook.com/bugs/447623711966656?browse=search_50bfaaaf247045772567103)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:24:46.550

我很确定这是故意的，而且所有照片都使用照片图标

{edit} Instagram 正在使用[带有附加照片的 Open Graph 操作](https://developers.facebook.com/docs/technical-guides/opengraph/user-generated-photos/)，而不是常规的照片 API

# ruby-on-rails - 如何组合默认值、空值和item的值

> ID：13730744
> 
> 赞同：0
> 
> 时间：2012-12-05T19:16:01.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, haml, default-value

我的模型中有一个争论年。此参数默认为 0，如果该参数不是插入数据库 0 的形式（不使用 nil）。必要时会呈现 text_field 并包含在部件中。

```
.div-form-item
    = f.label :year, t('advert.form.year')
    = f.text_field :year, :value 
```

如果渲染，如何设置 :value => "" 或 :value => nil？

在当前情况下，我在新表单中看到 0（当我想创建新项目时），但我想看到空字段。问题是这个表单也是用来编辑item的，需要设置item的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:50:00.700

如果值为 0，则类似这样的内容将显示一个空白字段，但如果用户没有添加年份，它也会提交该空白值。所以你需要在表单提交时处理它。

```
f.text_field(:year, :value => f.object.year.eql?(0) ? '' : f.object.year) 
```

# java - 键绑定中的修饰符（SHIFT +（随机键））

> ID：13730750
> 
> 赞同：2
> 
> 时间：2012-12-05T19:16:25.647
> 
> 标签：java, swing, key-bindings, modifiers, modifier-key

如何更改输入/操作映射，以便当我将操作绑定到特定键时，它还会将操作绑定到*某些修饰符*+ 特定键？

IE`SHIFT_DOWN_MASK + specific key`

所以我所有的键绑定都可以在没有修饰符的情况下工作。我正在将声音文件分配给键盘上的某个字母，当我按下该键时，声音文件就会播放。我也有代码来循环声音文件，切换它是否循环，并检查它是否循环。我想要它，以便除了将`play()`操作绑定到键之外，还将操作绑定`toggleLoop()`到操作`SHIFT_DOWN_MASK + specific key`。

我在哪里绑定动作：

```
 @SuppressWarnings("serial")
    public void bindKey(JPanel base)
    {
        base.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(key),"play"+key);
        base.getActionMap().put("play"+key, new AbstractAction(){
            public void actionPerformed(ActionEvent e) 
            {
                System.out.println(key + " Pressed");
                play();

            }
        });

        //assigning action just the key pressed

        base.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke((char)(key-32), InputEvent.SHIFT_DOWN_MASK),"loop"+(char)(key-32));
        base.getActionMap().put("loop"+(char)(key-32), new AbstractAction(){
            public void actionPerformed(ActionEvent e) 
            {
                System.out.println(key + " toggled loop");
                toggleLoop();
                //fix toggle

            }
        });

        //^ where I try to assign action to modifier

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:33:58.633

> 修复：更改为 (char)(key-32) 以便将其分配给小写字符，因为当我使用 shift 修饰符时它设置的是 'W' 而不是 'w'。

# java - 按频率和长度对重复进行排序

> ID：13730752
> 
> 赞同：1
> 
> 时间：2012-12-05T19:16:33.563
> 
> 标签：java, regex, pattern-matching

我正在考虑获取字符串中所有唯一重复并按长度和重复频率（数字）对它们进行排序的最佳方法

我从这段代码开始

```
 public static void main(String[] args)
{
  String s = "AAAABBBBAAAANNNNAAAABBBBNNNBBBBAAAA";
  Matcher m = Pattern.compile("(\\S{2,})(?=.*?\\1)").matcher(s);
  while (m.find())
  {
    for (int i = 1; i <= m.groupCount(); i++)
    {
      System.out.println(m.group(i));
    }
  }
} 
```

并希望对有这样的输出有一些建议：

AAAA 4 1,9,17,33 等

其中 4=重复次数，1,9,17,33 个位置

我感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:29:29.873

首先，你的模式不会给你你想要的。您应该将您的正则表达式更改为： -

```
"(\\S)\\1+" 
```

获得单个字符的重复。

现在要获取重复的位置和次数，您可以维护一个`Map<String, List<Integer>>`, 来存储每个重复的位置。

此外，您不需要`for`在`while`. while 循环足以遍历所有模式。

这是您修改后的代码：-

```
Map<String, List<Integer>> map = new HashMap<String, List<Integer>>();

String s = "AAAABBBBAAAANNNNAAAABBBBNNNBBBBAAAA";
Matcher m = Pattern.compile("(\\S)\\1+").matcher(s);

while (m.find())
{
    String str = m.group();
    int loc = m.start();

    // Check whether the pattern is present in the map.
    // If yes, get the list, and add the location to it.
    // If not, create a new list. Add the location to it. 
    // And add new entry in map.

    if (map.containsKey(str)) {
        map.get(str).add(loc);

    } else {
        List<Integer> locList = new ArrayList<Integer>();
        locList.add(loc);
        map.put(str, locList);
    }

}
System.out.println(map); 
```

**输出 ： -**

```
{AAAA=[0, 8, 16, 31], BBBB=[4, 20, 27], NNNN=[12], NNN=[24]} 
```

# jquery - 查找相关类 jQuery

> ID：13730761
> 
> 赞同：0
> 
> 时间：2012-12-05T19:17:03.167
> 
> 标签：jquery, variables, target

我有四个链接，在 primary-nav 内部，需要激活相应的 slideDown 元素。这些链接具有单独的父类`.patient > a`、`.doctor > a`、`.primary > a`和`.locations > a`。

当有人点击时，`.patient > a`我需要 ul.patient 成为目标的 ul。

我正在尝试，但这是我迄今为止所拥有的：

```
var $patientDrop = $('ul.patient');

$patientDrop.hide();
$('.patient > a').click(function() {
  if ($patientDrop.is(':visible')) {
      $patientDrop.slideUp(function() {
        $('.patient > a').removeClass('active');
      });
  }
  else {
    $patientDrop.slideUp(function() {
        $('.patient > a').removeClass('active');
    });
    $patientDrop.slideDown();
    $('.patient > a').addClass('active');
  }
});
$('body').click(function(event) {
if (!$(event.target).is('a')) {
  $patientDrop.slideUp(function() {
        $('.patient > a').removeClass('active');
  });
}
}); 
```

现在，我使用变量只是为了学习，也许它们就是这里需要的。但我真正的问题是如何以最有效的方式解决这个问题。我不想不得不用不同的变量重复所有这些代码四次，只是为了让它与每四个链接及其对应的 UL 一起工作。

他们有什么办法可以说：`primary-nav a, get class of clicked a, find ul with this class`然后运行脚本的其余部分？

jsFiddle：http: [//jsfiddle.net/DRZZr/](http://jsfiddle.net/DRZZr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:31:39.467

假设锚点不在`ul.patient`您要扩展的范围内，我会使用`rel`属性或类似的东西来了解您的目标是什么。jquery ui 在其数据目标中做了很多。有关示例，请参见我更新的 jsfiddle：

编辑： http: [//jsfiddle.net/DRZZr/7/](http://jsfiddle.net/DRZZr/7/)更新的 JSFiddle 脚本给出了新的请求/要求。

我还添加了一些 ID 以使定位更容易。我将 id 用于“静态”元素——也就是说，它们具有真正的意义，并且不仅仅用于常见的样式。

变化的实质是这样的：

```
 $(document).ready(function () {
  $('#primary-nav li').click(function()
                                 {
                                     var $elem = $('#sliderareas > ul.' + $(this).attr('rel'));
                                     var $this = $(this);

                                     if($elem.is(':visible'))
                                     {
                                         $elem.slideUp(function() {
                                              $this.find('a').removeClass('active');
                                          });
                                     }
                                     else
                                     {
                                         $elem.slideUp(function() {
                                            $this.find('a').removeClass('active');
                                          });

                                        $elem.slideDown();
                                        $this.find('a').addClass('active');
                                     }

                                 });
}); 
```

隐藏所有#sliderareas uls，然后显示与`rel`被点击的li 的类相似的那个。您也可以将 rel 放在 li 内的锚点上，或者如果您愿意，也可以使用锚点的 href='#hash'，然后单击`a`使用`href`attr 找到 id 设置为 的#sliderareas ul `$(this).attr('href')`。如果您需要该示例，我可以进行另一个 jsfiddle 编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:33:27.387

试试这个：

```
$("a").click(function() {
    var myClass = $(this).parent('li').attr("class");
    var $patientDrop = $('ul.' + myClass);
    alert(myClass);
    // Your code...
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:23:46.127

如果需要访问父ul，那么可以使用jquery的parent方法。

```
$('.doctor  a').parent('ul') 
```

将针对父 ul。

# asp.net - 插入动态数据时需要深入了解 TPT EF4

> ID：13730763
> 
> 赞同：0
> 
> 时间：2012-12-05T19:17:05.743
> 
> 标签：asp.net, sql-server, entity-framework-4, dynamic-data, table-per-type

首先是我遇到的错误：

> EntitySet 'Z10Entities.Accounts' 中的所有对象都必须具有唯一的主键。但是，“DAL.Model.CreditCardAccount”类型的实例和“DAL.Model.Debt”类型的实例都具有相同的主键值“EntitySet=Accounts;Id=3”。

这是我的架构： ![使用每个类型继承表的架构](../Images/7f8a3b4601ba98ddbf4535477df568c9.png)

从我的设计角度来看，该帐户既可以是信用卡类型，也可以被视为债务。我做错了什么还是遇到了 EF 框架（4.3.1 版本）的限制

编辑：为了让我的问题更加清晰，我基本上是想了解框架为什么给我错误，或者动态数据外键 FieldTemplate 是否工作不正常。

编辑 2：这个问题似乎影响了我的应用程序的其他部分。好像我有一个TPT问题：

> EntitySet 'Z10Entities.Person' 中的所有对象都必须具有唯一的主键。但是，“DAL.Model.Employer”类型的实例和“DAL.Model.PortalUser”类型的实例都具有相同的主键值，“EntitySet=Person;Id=1b64b850-34f9-e111-bdc8-000c29005764” .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:17:44.543

好吧，TPT 似乎适用于某些事情而不适用于其他事情。由于我的业务设计，我需要让不同的账户作为债务负责（账户被注销，信用卡关闭等等。）。

由于 PK 到 PK 模式，TPT 无法处理此问题。它必须是指向基表的 FK 到 PK。这种微妙的变化促进了所需的功能，同时也简化了我的 LinqToEF 查询。

这是重构的版本： ![现在一切都是正确的:)](../Images/ec912cce8b21dc21f1adbdc6e48f031f.png)

# c - 如何按字母顺序将结果存储在不同的文件中

> ID：13730764
> 
> 赞同：1
> 
> 时间：2012-12-05T19:17:10.437
> 
> 标签：c, file, store

我是 C 的新手。我有一串单词，例如一篇新闻论文我想将文章中的单词按字母顺序存储在不同的文件中，例如“我所看到的一切都是灵感，但我没有想被淹没”。

现在在上面的示例中，我想将所有以开头的单词`'a'`存储在一个文件中`a.txt`。以同样的方式，以 to 开头的单词`'b'`被存储在`b.txt`

我正在使用下面的语法，但这不起作用

```
{
    if(strcmp(wordcheck, worddict)==0)
        fprintf(out_file1 ,"%c", wordcheck); //storing the value in a.txt            
} 
```

我还有一个问题，如果我获取一个包含单词列表的文本文件，并且我希望将此列表与许多列表（已经提供给程序）进行比较，这意味着输入列表中的任何单词是否与单词匹配在任何来源列表中，我希望仅当在 list1.txt 中找到该单词时将该单词存储在文件 a.txt 中）。同样，如果在 list2.txt 中找到该单词，我希望将其存储在 b.txt 中。除此之外，我想在输出文件 a.txt 中显示文件 list1.txt 的路径。喜欢唱 ./dataset/dictionary/verb

我使用了下面的语法

```
while(dictcount >= 0)//reads dictionary word into array//
{   
    dictcount = 0; //searches through all of the listed data files
    fscanf(fp1,"%s", worddict);
    fscanf(fp2,"%s", worddict);
    fscanf(fp3,"%s", worddict);
    if(strcmp(wordcheck, worddict)==0)//compare strings//if the word in found in list misc.txt
    {
        fprintf(out_file1 ,"%c", wordcheck); //storing the value in output_misc.txt
        if (getcwd(cwd, sizeof(cwd)) != NULL) {
            //fprintf(out_file3, "%c\n", cwd); //stores the path of the folder containing the list in which the matched 'word' is found  
            return 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:41:48.303

`strcmp()`将比较整个字符串，而不仅仅是您感兴趣的部分。所以`'abcdef'`不会等于`'a'`，但是如果您使用`strncmp()`并告诉它仅比较 1 个字节，它将执行您希望它执行的操作。

但是，您只比较 1 个字节，为什么不这样做：

```
...
store_words(out_file, words, n_words, 'a');
...
void store_words(FILE *out_file, char *words, int n_words. char starter) {
    int i;
    for(i=0; i < n_words; i++) {
        if(words[i][0] == starter) { // check if the first character is 'a' */
            fprintf(out_file ,words[i]); //if so storing the value in a.txt            
        }
    }
} 
```

然后遍历字母表中的所有字符？请注意，C 认为 'a' 和 'A' 是不同的，但这可以用 a 来解决`tolower()`。

# php - 使用 PHP 从每个 TR 中获取第二个 TD 的值

> ID：13730765
> 
> 赞同：1
> 
> 时间：2012-12-05T19:17:11.383
> 
> 标签：php, html, dom, html-table

我有一张这张表，我需要在表格行中获取第二个 TD 的值。我可以用 PHP 做到这一点，如何做到这一点？

这是我的桌子：

```
<table class = "jshop cart">
  <tr class = "jshop_prod_cart odd">
    <td class = "jshop_img_description_center">
      <a href = "/shopping/index.php/product/view/210/3690">
        <img src = "http://localhost/shopping/components/com_jshopping/files/img_products/noimage.gif" alt = "test" class = "jshop_img" />
      </a>
    </td>
    <td style="text-align:left">
        FIRST VALUE I NEED                      
            </td>    
    <td>
        1 ден.            </td>
    <td>
      <input type = "text" name = "quantity[0]" value = "1" class = "inputbox" style = "width: 25px" />
    </td>
    <td>
        1 ден.            </td>
    <td>
      <a href = "/shopping/index.php/cart/delete?number_id=0" onclick="return confirm('Навистина сакате да го отстраните?')"><img src = "http://localhost/shopping/components/com_jshopping/images/remove.png" alt = "Отстрани" title = "Отстрани" /></a>
    </td>
  </tr>

  <tr class = "jshop_prod_cart even">
    <td class = "jshop_img_description_center">
      <a href = "/shopping/index.php/product/view/169/2876">
        <img src = "http://localhost/shopping/components/com_jshopping/files/img_products/thumb_3e28bb073e2ac2ca90345955ead6fc58.JPG" alt = "" class = "jshop_img" />
      </a>
    </td>
    <td style="text-align:left">
                 SECOND VALUE I NEED       

            </td>    
    <td>
        140 ден.            </td>
    <td>
      <input type = "text" name = "quantity[1]" value = "1" class = "inputbox" style = "width: 25px" />
    </td>
    <td>
        140 ден.            </td>
    <td>
      <a href = "/shopping/index.php/cart/delete?number_id=1" onclick="return confirm('Навистина сакате да го отстраните?')"><img src = "http://localhost/shopping/components/com_jshopping/images/remove.png" alt = "Отстрани" title = "Отстрани" /></a>
    </td>
  </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:20:05.437

您可以使用 DOM 解析器，例如[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)，如下所示：

```
$ret = $html->find('td', 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:34:07.563

只是一个想法，你可以使用jquery。为元素分配一个id，你可以有一个隐藏的输入。

在 html 中，是这样的：

```
<input type="hidden" id="test" value="<?=row['value']?>"> 
```

在 jquery 中，您可以获取元素值，如下所示：

```
<script>
   $(document).ready(function(){
     $('#button').click(function() {
       $('#sub_cont').fadeIn('fast');
       $("#content #sub_cont").load("postpage.php?id="+ $("#test").val());
     });
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:21:32.713

PHP 不会用于这种情况，因为它是一种服务器端语言。PHP 在服务器而不是客户端上运行。除非您愿意通过 Javascript 将整个页面的数据发送到 PHP，否则我认为没有理由使用 PHP 来选择这些值。我认为您应该使用 jQuery 来提取这些值。jQuery 有很多方法可以做这样的事情。做一个基本的谷歌搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:22:20.703

如果您在 PHP 处理期间有该表，则可以在其上使用 XPath。像这样的东西：（考虑这个伪代码，没有测试就输入了）

```
$xpath = new DOMXPath($doc);
$values= $xpath->query("/table/tr/td[2]");

foreach ($values as $value)
{
    echo $value->nodeValue;
} 
```

# jquery - 构建一个跨浏览器兼容的 jquery 移动事件日历（不是日期选择器）？谁做过？

> ID：13730769
> 
> 赞同：1
> 
> 时间：2012-12-05T19:17:44.873
> 
> 标签：jquery, jquery-mobile, calendar

那里有几个很好的事件日历，但问题是兼容性。是否有文件证明与所有浏览器、ios、android 等兼容？

到目前为止，我没有发现对 jquery mobile 的任何事件日历的引用。谁知道一个兼容并且可以集成到jquery mobile中的？

EDIT2：它应该看起来像 [http://www.vissit.com/projects/eventCalendar/](http://www.vissit.com/projects/eventCalendar/) ![在此处输入图像描述](../Images/310dbe3141b1885a7e826001a0d07e7f.png)

编辑：我真正能想到的是：

[http://dhtmlx.com/docs/products/dhtmlxScheduler/sample_mobile.shtml](http://dhtmlx.com/docs/products/dhtmlxScheduler/sample_mobile.shtml)

但这似乎远不能在多个平台上兼容，任何人都建议如何获得自定义事件日历？

也许 jquery mobile 的一些基本代码和列表视图可以生成类似的结果。

EDIT3：似乎有这个 [http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/](http://jquerymobile.com/demos/1.0a4.1/experiments/ui-datepicker/)但没有好的像样的文档我们的最新 JQM 的更新文件可以在 jquery 移动存储库中找到或在线的 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T17:12:15.683

对于带有事件管理选项的日历，它适用于 iOS、Android、BlackBerry、Windows Phone 8 和 Windows 8（与 jQuery 和 jQuery Mobile 一起使用），请查看[Mobiscroll Calendar](http://mobiscroll.com/component/calendar)。

# arrays - 从 1:M 开始的 N 项的智能线性索引有序元组

> ID：13730772
> 
> 赞同：1
> 
> 时间：2012-12-05T19:17:55.580
> 
> 标签：arrays, matlab, indexing, combinatorics

我正在寻找使用线性索引索引 M 选择 N 元组。前段时间我写了 M 选择 2 作为一些配对索引函数的代码：

```
 function K=pairidx( i, j)
      if(i>j)
        swap(i,j);
      K=j-(i+1) +   (i)*(2*M-1)-i*(i-1)/2;
   end 
```

我现在需要的是将此推广到 M 选择 N。理想情况下，我将有一个可逆函数，我可以将索引 K 转换为某个元组（K_1，K_2，...，K_N）。到目前为止，我一直在做一种蛮力方法，对于 N=3，我编写了以下函数，但我希望这不是最好的方法。

```
function lookup=tripletable()
d=nchoosek(M,N);
idx=1;
lookup=zeros(d,3);
for i=1:M
     for j=i+1:M
         for k=j+1:M
             lookup(idx,:)=[i,j,k];
             idx=idx+1;
         end
     end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:53:09.247

正如 Jerad 评论的那样，您可以使用`nchoosek(v,k)`生成整个组合列表，然后让 Matlab 将您的（排序的）组合与任何行匹配。但是，这将需要生成整个列表，如果 M 和 N 变大，这可能会非常大。

您可以使用以下代码按索引获取组合。它计算可能组合的数量并检查您给出的索引是否在该范围内。然后它迭代地继续确定所有元素

```
function combination=getCombinationByIndex(v,K,N)
M=size(v,2);
k=K;
l=0;
combination=zeros(1,N);
for i=1:N
    %determine combination(i)
    while(true)
        l=l+1;
        C=nchoosek(M-l,N-i);         
        if(k>C)
            k=k-C;
        else
            combination(i) = v(l);
            break;
        end
    end
end 
```

反向操作类似：只需对您的组合进行排序并检查元素，检查您当前的组合是否在该范围内。

编辑：主题启动器提供的反向操作并扩展为允许任意元素集：

```
function k=getIndexByCombination(v,combo) 
M=length(v);
v=sort(v);
combo=sort(combo); 
N=length(combo); 
l=0; 
%k is the index 
k=1; 
for i=1:N
    while(true)
        l=l+1;    
        if(combo(i)==v(l))
            break;
        else
            C=nchoosek(M-l,N-i);
            k=k+C;
        end
    end
end 
```

# sql-server - 自由文本搜索包含关键字

> ID：13730776
> 
> 赞同：0
> 
> 时间：2012-12-05T19:17:58.707
> 
> 标签：sql-server, tsql

任何人都可以解释为什么下面返回记录..

```
Select * From CategoriesSKus where AttList Like '%|9|%' 
```

但下面的查询不返回记录

```
Select * From CategoriesSKus where Contains(AttList, '"|9|"') 
```

似乎每当我只搜索一个数字（例如 1 或 3 或 8）时，包含都不起作用，但是如果我尝试 19 或 22 则可以。

为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:33:21.403

尝试：

```
select * from sys.fulltext_system_stopwords 
```

查看全文搜索忽略的停用词。

文档可在[此处](http://msdn.microsoft.com/en-us/library/ms142551%28v=sql.105%29.aspx)和[此处](http://msdn.microsoft.com/en-us/library/ms142583%28v=sql.105%29.aspx)找到。

# networking - 网络分析

> ID：13730777
> 
> 赞同：0
> 
> 时间：2012-12-05T19:18:07.177
> 
> 标签：networking, graph, social-networking, data-mining, information-retrieval

我有网络问题。对于一份文件，我正在提取一些信息。我正在为他们绘制漂亮的图表。但在一个文件中信息流。我试图用图表来描述它，就像一个人阅读文本的方式，然后是最重要的实体，然后是下一个重要的实体。

为了理解和掌握这个问题，我必须研究哪些类型的东西，或者网络理论或图论的哪个方面处理它。

如果有人可以请参考。注册，SK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:04:18.610

首先，我不是语言或语言研究方面的专家。我想我理解你想要做什么，但我不知道最好的方法是什么。

如果我猜对了，你想为你的话确定一些中心性度​​量（这将解释社交网络参考），找到那些与他人联系最密切的人，是吗？

如果你尝试这样做，问题是你肯定会发现最中心的词是最有趣的词（the, if, then, 一些多余的形容词......），如果你不事先应用标记化和词形还原过程。因此，您只能将所用动词的名词和词干分开，然后只有您可以尝试您的方法。

您必须记住的另一个问题是，单词的存在和稀有性都很重要（例如，参见 tf-idf weight measure）。

最后，我在 google 上进行了以下搜索：

《*n gram 图语言中心性词*》

并发现这篇论文似乎对您的要求很有趣（我可能会自己看一下！）：

[LexRank：基于图的词汇中心性作为文本摘要中的显着性](http://arxiv.org/abs/1109.2128)

# visual-studio - App.config 文件的 TFS 构建问题（错误 3719）

> ID：13730779
> 
> 赞同：2
> 
> 时间：2012-12-05T19:18:08.367
> 
> 标签：visual-studio, tfs, msbuild, visual-studio-2012, azure-devops

我目前正在将我的项目代码转移到使用新的[Team Foundation Service](http://tfs.visualstudio.com)。我正在尝试设置门控构建以在我签入新代码时运行（并在解决方案中运行单元测试），但每次在 TFS 中构建时我都会遇到相同的错误。

这是我不断收到的错误： ![我的 MSBuild 错误](../Images/ff81b0911a702d033055511b58f67e39.png)

这是处理此问题的诊断日志的一部分：![错误日志](../Images/87303c76880685a2de07f0203bf248ce.png)

我已经对该 App.config 文件进行了三次检查：它在源代码管理中。此外，失败的项目正在其他位置构建，没有任何问题。

当我在 Visual Studio 2012 中构建时，它工作正常。当我从命令行使用 MSBuild 构建它时，它工作正常。我什至在我的本地计算机上安装了 Team Foundation Server 2012，以便我可以使用 Team Foundation Service 用于 MSBuild 的确切命令行参数。那工作得很好。

如果您需要更多信息，我将很乐意提供。提前感谢您的所有帮助。

编辑：[这是 MSDN TFService 论坛上此问题的链接](http://social.msdn.microsoft.com/Forums/en-US/TFService/thread/cd452113-1645-4215-a5e0-45ee69fbdf3f)，其中还有完整的诊断日志。

编辑（12/12）：在做伊利亚的建议时（在他下面的回答中），我从日志中得到这个：

![更大的日志错误](../Images/0838f52b5107fdc1042cb7fb5ecf82ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:13:12.510

好的，我终于得到了这个工作。嘘！

根据上面链接中的 MSDN 讨论，DataLayerExtensions 项目的 app.config 文件以某种方式损坏。从源代码管理中删除它，然后重新制作配置文件就可以了。重要的是要注意，12/12 编辑的图片中的错误不是指向 DataLayer 项目！它实际上是构建依赖项（GlobalItems 和 DataLayer）之后尝试构建 DataLayerExtensions 项目的第一行！选项卡中有一点细微差别。

随后，还发生了其他 app.config 错误——所有这些都是因为实际上不在源代码管理中，或者与 DataLayerExtensions 配置文件具有相同的损坏。

最后要提到的一点是，显然，对于 TFService，如果您使用任何 3rd-party 工具，您将在构建服务中遇到错误，即使它在您的本地计算机上构建良好。为了解决这个问题，我必须创建一个新文件夹，将那些第 3 方程序集复制到其中，让所有相关项目将它们的引用切换到该文件夹​​中的 .dll 文件，然后继续检查它。一旦那个完成，构建成功完成。

MSDN 链接上仍然存在一个悬而未决的问题，即为什么 Excel API 也像第 3 方工具一样被拒绝，但这超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:26:46.240

尝试将这样的内容添加到失败的 csproj 并在云中运行，可能会泄露 app.config 丢失的原因。可能是其他一些自定义事件删除/重命名导致 msbuild 失败？

```
<Target Name="AfterBuild">
  <Warning Text="### DEBUG ###" />
  <ItemGroup>
    <All Include="**\*.*" />
    <Compile>
      <Exists Condition="!Exists('%(Identity)')">FALSE</Exists>
    </Compile>
    <AppConfigWithTargetPath>
      <Exists Condition="!Exists('%(Identity)')">FALSE</Exists>
    </AppConfigWithTargetPath>
  </ItemGroup>
  <Warning Text="### All: %(All.Identity)" />
  <Warning Text="### Compile: %(Compile.Exist) # %(Compile.Identity)" />
  <Warning Text="### App: %(AppConfigWithTargetPath.Exist) # %(AppConfigWithTargetPath.Identity) # %(AppConfigWithTargetPath.FullPath)" />
</Target> 
```

# git - git 跳过提交

> ID：13730783
> 
> 赞同：0
> 
> 时间：2012-12-05T19:18:20.970
> 
> 标签：git

好的，所以我在 git 中有一个看起来像这样的分支

```
A-B-C-D-E 
```

和一个看起来像这样的分支

```
A-B-F-G 
```

我想做一个这样的分支

```
A-B-D-E-F-G 
```

我认为可能涉及标记，但我对 git 相当陌生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T19:19:35.723

您可能想要创建一个新分支，从 commit 开始`B`，然后将您感兴趣的特定提交挑选到新分支上。

```
git checkout my-branch <B-commit-id>

git cherry-pick <D-commit-id>
git cherry-pick <E-commit-id>
git cherry-pick <F-commit-id>
git cherry-pick <G-commit-id> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:21:30.430

您可能希望在另一个分支上进行变基，并在提交 B 上进行交互式变基。

branchE 指向 Commit E。 branchG 指向 Commit G

```
git checkout branchG
git rebase branchE
git rebase -i <B-commit-id> 
```

删除 C-Commit-Id 的完整行。保存并关闭编辑器。完成的。

请阅读编辑器中的帮助信息。它解释了交互式变基的可能性。

# c - C将int数组指针作为参数传递给函数

> ID：13730786
> 
> 赞同：31
> 
> 时间：2012-12-05T19:18:30.607
> 
> 标签：c, arrays, function, pointers, parameters

我想将 B int 数组指针传递给 func 函数并能够从那里更改它，然后查看 main 函数中的更改

```
#include <stdio.h>

int func(int *B[10]){

}

int main(void){

    int *B[10];

    func(&B);

    return 0;
} 
```

上面的代码给了我一些错误：

```
In function 'main':|
warning: passing argument 1 of 'func' from incompatible pointer type [enabled by default]|
note: expected 'int **' but argument is of type 'int * (*)[10]'| 
```

**编辑：新代码：**

```
#include <stdio.h>

int func(int *B){
    *B[0] = 5;
}

int main(void){

    int B[10] = {NULL};
    printf("b[0] = %d\n\n", B[0]);
    func(B);
    printf("b[0] = %d\n\n", B[0]);

    return 0;
} 
```

现在我得到这些错误：

```
||In function 'func':|
|4|error: invalid type argument of unary '*' (have 'int')|
||In function 'main':|
|9|warning: initialization makes integer from pointer without a cast [enabled by default]|
|9|warning: (near initialization for 'B[0]') [enabled by default]|
||=== Build finished: 1 errors, 2 warnings ===| 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-05T19:33:44.637

在您的新代码中，

```
int func(int *B){
    *B[0] = 5;
} 
```

`B`是指向 的指针`int`，因此`B[0]`是`int`，并且您不能取消引用`int`. 只需删除`*`,

```
int func(int *B){
    B[0] = 5;
} 
```

它有效。

在初始化

```
int B[10] = {NULL}; 
```

`int`您正在用`void*`( )初始化一个`NULL`。`void*`由于从to有一个有效的转换，它是有效的`int`，但它不是很干净，因为转换是实现定义的，并且通常表明程序员有一个错误，因此编译器会发出警告。

```
int B[10] = {0}; 
```

是 0 初始化`int[10]`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T19:22:26.190

也许你正试图这样做？

```
#include <stdio.h>

int func(int * B){

    /* B + OFFSET = 5 () You are pointing to the same region as B[OFFSET] */
    *(B + 2) = 5;
}

int main(void) {

    int B[10];

    func(B);

    /* Let's say you edited only 2 and you want to show it. */
    printf("b[0] = %d\n\n", B[2]);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-13T15:28:39.970

如果你真的想传递一个数组指针，那就是

```
#include <stdio.h>

void func(int (*B)[10]){   // ptr to array of 10 ints.
        (*B)[0] = 5;   // note, *B[0] means *(B[0])
         //B[0][0] = 5;  // same, but could be misleading here; see below.
}

int main(void){

        int B[10] = {0};   // not NULL, which is for pointers.
        printf("b[0] = %d\n\n", B[0]);
        func(&B);            // &B is ptr to arry of 10 ints.
        printf("b[0] = %d\n\n", B[0]);

        return 0;
} 
```

但正如其他答案中提到的那样，这样做并不常见。通常只有当你想传递一个二维数组时才会传递一个指向数组的指针，它突然看起来更清晰了，如下所示。二维数组实际上是作为指向其第一行的指针传递的。

```
void func( int B[5][10] )  // this func is actually the same as the one above! 
{
         B[0][0] = 5;
}

int main(void){
    int Ar2D[5][10];
    func(Ar2D);   // same as func( &Ar2D[0] )
} 
```

func 的参数可以声明为`int B[5][10]`, `int B[][10]`, `int (*B)[10]`, 都等价于参数类型。

附录：你可以从一个函数返回一个指向数组的指针，但是声明函数的语法很尴尬，类型的 [10] 部分必须在参数列表之后：

```
int MyArr[5][10];
int MyRow[10];

int (*select_myarr_row( int i ))[10] { // yes, really
   return (i>=0 && i<5)? &MyArr[i] : &MyRow;
} 
```

这通常如下进行，以避免眼睛疲劳：

```
typedef int (*pa10int)[10];

pa10int select_myarr_row( int i ) {
   return (i>=0 && i<5)? &MyArr[i] : &MyRow;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T19:33:13.703

在新的代码分配中应该是，

```
B[0] = 5 
```

在 func(B) 中，您只是传递指向数组 B 的指针的地址。您可以在 func() 中将其更改为 B[i] 或 *(B + i)。其中 i 是数组的索引。

在第一个代码中，声明说，

```
int *B[10] 
```

表示 B 是一个由 10 个元素组成的数组，其中每个元素都是一个指向 int 的指针。也就是说，B[i] 是一个 int 指针，*B[i] 是它指向第 i 个已保存文本行的第一个整数的整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T06:18:25.807

```
main()
{
    int *arr[5];
    int i=31, j=5, k=19, l=71, m;

    arr[0]=&i;
    arr[1]=&j;
    arr[2]=&k;
    arr[3]=&l;
    arr[4]=&m;

    for(m=0; m<=4; m++)
    {
        printf("%d",*(arr[m]));
    }
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-08T17:45:48.187

使用 Greggo 的非常出色的示例，我将其作为冒泡排序工作，将数组作为指针传递并进行简单的 -1 操作。

```
#include<stdio.h>

void sub_one(int (*arr)[7])
{
     int i; 
     for(i=0;i<7;i++)
    {
        (*arr)[i] -= 1 ; // subtract 1 from each point
        printf("%i\n", (*arr)[i]);

    }

}   

int main()
{
    int a[]= { 180, 185, 190, 175, 200, 180, 181};
    int pos, j, i;
    int n=7;
    int temp;
    for (pos =0; pos < 7; pos ++){
        printf("\nPosition=%i Value=%i", pos, a[pos]);
    }
    for(i=1;i<=n-1;i++){
        temp=a[i];
        j=i-1;
        while((temp<a[j])&&(j>=0)) // while selected # less than a[j] and not j isn't 0
        {
            a[j+1]=a[j];    //moves element forward
            j=j-1;
        }
         a[j+1]=temp;    //insert element in proper place
    }

    printf("\nSorted list is as follows:\n");
    for(i=0;i<n;i++)
    {
        printf("%d\n",a[i]);
    }
    printf("\nmedian = %d\n", a[3]);
    sub_one(&a);

    return 0;
} 
```

我需要阅读如何封装指针，因为这让我很失望。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-23T19:18:19.700

func 的参数是接受双指针变量。希望这可以帮助...

```
#include <stdio.h>

int func(int **B){

}

int main(void){

    int *B[10];

    func(B);

    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-01T16:18:27.517

使用`*(B)`代替`*B[0]`。这里， `*(B+i)`蕴涵`B[i]`和`*(B)`蕴涵`B[0`]，即
`*(B+0)=*(B)=B[0]`。

```
#include <stdio.h>

int func(int *B){
    *B = 5;     
    // if you want to modify ith index element in the array just do *(B+i)=<value>
}

int main(void){

    int B[10] = {};
    printf("b[0] = %d\n\n", B[0]);
    func(B);
    printf("b[0] = %d\n\n", B[0]);
    return 0;
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-12-14T13:06:01.070

在函数声明中，您必须键入

```
VOID FUN(INT *a[]);
/*HERE YOU CAN TAKE ANY FUNCTION RETURN TYPE HERE I CAN TAKE VOID AS THE FUNCTION RETURN  TYPE FOR THE FUNCTION FUN*/
//IN THE FUNCTION HEADER WE CAN WRITE AS FOLLOWS
void fun(int *a[])
//in the function body we can use as
a[i]=var 
```

# core-data - 核心数据：制作数据库的逐个对象副本

> ID：13730789
> 
> 赞同：0
> 
> 时间：2012-12-05T19:18:38.687
> 
> 标签：core-data, nsmanagedobjectcontext, nspersistentstore

我想制作我的 Core Data 数据库的备份副本，而不使用文件管理器来制作 sqlite 文件的副本，或者使用 Persistent Store Coordinator 的 migratePersistentStore 方法（原因太长，无法在此处解释）。我想要做的是用与原始文件相同的 MOMD 打开一个新的持久存储，创建一个新的托管对象上下文，然后遍历我的数据库中的所有对象并将它们插入到新的上下文中。

这适用于简单实体，但问题是我的模型有大约 20 个实体，其中许多实体具有一对多和多对多的关系。稍微复杂一点的解决方案是将每个对象插入到新的 MOC 中，然后将所有新的托管对象保存在内存中，并使用它们在后续传递中绑定对象之间的所有关系。但这似乎是一个非常混乱的解决方案。

是否有一种干净、优雅的方式来实现这一点，它可能适用于任何类型的数据模型，而不仅仅是我自己的模型的定制解决方案，而且不必同时将每个对象都保存在内存中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:25:48.950

复制持久性存储远远超过最简单的方法——我建议重新审视你反对它的理由或解释它们是什么。

将对象从一个上下文复制到另一个上下文（从一个磁盘持久存储到另一个）并不一定同时将它们全部保存在内存中。Core Data 可以把它们变成故障。

# python - 哪个用户应该拥有我的 Python 脚本和应用程序目录？

> ID：13730790
> 
> 赞同：1
> 
> 时间：2012-12-05T19:18:39.820
> 
> 标签：python, linux, web-applications, chown

我一直在使用`chown www-data:www-data -R /path/to/my/django-app/`并且只是让我的virtualenv的目录/文件归其所有`root`（因为`sudo pip install foo`默认情况下暗示了这一点）。不过这感觉不太对劲。这是非常典型的，还是应该`www-data`只拥有可以上传文件的目录？如果我允许`root`拥有一切，我的服务器甚至无法写入`.pyc`文件，或者会吗？我显然对 Unix 权限很陌生。处理此问题的安全，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:22:52.640

正确的方法是在安装时编译为字节码，这样就不需要动态创建 .pyc 文件。其余的是基本的东西，比如“永远不要使用 0777/0666”。

# html - 音频标签在 IE9 中不起作用

> ID：13730796
> 
> 赞同：0
> 
> 时间：2012-12-05T19:19:00.047
> 
> 标签：html, audio-streaming, html5-audio

我一辈子都无法让音频标签在 IE9 中工作。这是我的代码，我到底做错了什么？我确保我的标签都井井有条，并且我设置了一个例外来强制 IE9 使用 HTML5。在此先感谢您的帮助。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>CD Cover Animation</title>

    <script type="text/javascript" src="js/animCD.js?rev=new"></script>    
    <link rel="stylesheet" href="style.css" type="text/css" />

    <!-- Show Audio when button is clicked -->

    <script type="text/javascript">
        function showAudio()
        {
            document.getElementById('audioInterview').style.visibility='visible';
        }
    </script>

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    </head>
    <body>

    <video autoplay="autoplay" id="videoBackground" width="1280" height="720" preload="auto" ontimeupdate="animCD_onprogress();">
        <source id="colorVid_mp4" type="video/mp4" src="img/luther-2.mp4">
        <source id="colorVid_ogg" type="video/ogg" src="img/luther-2.ogg">
    </video>

        <audio id="audioInterview" preload='auto' controls style="visibility:hidden"
            <source src="audio/interview.mp3" type="audio/mp3">
        Your browser does not support the audio element.
        </audio>

    <!-- <div class="buttonSkip" onclick="alert('Clicked Skip');"></div> -->

    <p><a class="ex2" href="http://www.lrltv.org/muslims-nuclear.html">[ skip intro]</a></p>

    <div id="buttonPlacement" class="buttonPlacement">
        <div onclick="showAudio();" class="btnDonate"></div>
        <div onclick="alert('Clicked Buy');" class="btnBuy"></div>
    </div>
            <!-- Add more buttons here -->

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:36:44.860

正如评论所说，您需要关闭音频标签。但他们并不意味着，`</audio>`而是`>`在行尾。它应该如下所示：

```
<audio id="audioInterview" preload="auto" controls="controls" style="visibility:hidden">
        <source src="audio/interview.mp3" type="audio/mp3">
        Your browser does not support the audio element.
</audio> 
```

我也使用控件=“控件”。

如果您不需要显示音频控件，您也可以在纯 JavaScript 中执行此操作。

```
var audioInterview = new Audio('audio/interview.mp3');
audioInterview.play(); 
```

然后删除 HTML 音频标签。

# internet-explorer - IE 删除 URL 中的标签

> ID：13730797
> 
> 赞同：1
> 
> 时间：2012-12-05T19:19:04.540
> 
> 标签：internet-explorer, url, hashtag

我在 javascript 变量中定义了 url，每个 url 的格式为[http://www.something.com/state-name#alabama](http://www.something.com/state-name#alabama)

但在 IE 7、8、9 中，它只打开没有该标签的站点，它只是忽略它。

你知道为什么会这样吗？有没有办法解决它？

谢谢。

# git - 查找具有最小差异的提交

> ID：13730804
> 
> 赞同：9
> 
> 时间：2012-12-05T19:19:31.783
> 
> 标签：git

我收到了一堆来自我使用的同一个 git repo 的文件，但它们是针对较旧的提交开发的。如何找出他们使用了哪个提交？像最少的差异线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:50:19.550

> 如何找出他们使用了哪个提交？像最少的差异线。

好吧，您完全可以这样做：找到与您的目标目录差异最小的提交。只需对存储库中的所有提交运行一个循环，并为每个提交计算一个与目标目录的差异，并记住差异最小的那个。

假设您有您的存储库，`./repo`并且有问题的文件在`./target`.

```
#!/bin/sh

cd repo
HEAD=$(git rev-parse HEAD)
git log --pretty='%H' | while read rev; do
    git checkout -q $rev
    lines=$(diff -ruN -x .git . ../target | wc -l)

    if ! [[ "$minlines" ]] || [[ $lines -lt $minlines ]]; then
        minlines=$lines
        commit=$rev
        echo "$lines $rev"
    fi

    [[ $lines -eq 0 ]] && break
done | tail -1

git checkout $HEAD 
```

对于历史悠久的存储库来说，这将需要一段时间，但它确实有效。它将打印出 diff 的大小，然后是具有最小 diff 的提交的提交 ID。

如果您在此脚本运行时中断它，您需要检查一个合适的分支头（例如，`git checkout master`）。

# php - 从 mysql 表中填充表单字段时遇到问题

> ID：13730807
> 
> 赞同：0
> 
> 时间：2012-12-05T19:19:40.493
> 
> 标签：php, mysql

请帮忙！

我是一个完整的 php/sql 新手，我感觉很漂亮（好吧，真的）愚蠢。

我真的需要帮助预先填充我为我们的办公室工作人员建立的表格的文本字段，以便联系现场的工人，（并且表格效果很好）；我已经搜索了一百万个线程，但就是无法弄清楚......

用户登录后，只有一些表单字段需要预先填充，但我不知道如何做到这一点......我创建了一个带有名为“用户”的表的 mysql 数据库，我知道如何打开数据库（并关闭它），但无法弄清楚如何从给定行中提取数据，并正确填充我需要的字段。这就是我所在的位置：

```
mysql_connect("localhost", "XXXXX", "XXXXX") or die("Error connecting to MySQL: ".mysql_error());
mysql_select_db("vendor_sqldb") or die("Error selecting database: ".mysql_error());
$sql = mysql_query("SELECT * FROM USERS") or die("Error connecting to table: ".mysql_error());
$rowdetail=mysql_fetch_array($sql);
date_default_timezone_set('America/Los_Angeles');
//1\. Add your email address here.
//You can add more than one receipient-
$formproc->AddRecipient('foreman@mysite.com'); //<<--- supervisor email address here

$formproc->SetConditionalField('select field emplyee');
$formproc->AddConditionalReceipent(employee1,'email@email.com');
$formproc->AddConditionalReceipent('employee2','email@email.com');
$formproc->AddConditionalReceipent('employee3','email@email.com');
$formproc->AddConditionalReceipent('employee4','email@email.com');
$formproc->AddConditionalReceipent('employee5','email@email.com');
$formproc->AddConditionalReceipent('employee6','email@email.com');
$formproc->AddConditionalReceipent('employee7','email@email.com');
$formproc->AddFileUploadField('newupload','',1024);//<<------- New file upload
if(isset($_POST['submitted']))
{
if($formproc->ProcessForm())
{
$formproc->RedirectToURL("thank-you.php");
} 
```

这是我需要帮助来预填充字段的区域：

```
<p align="center">
<label for='email' ></label>
<label for='name' >Office Staff Employee Name* </label>

<input type='text' name='name' id='name' readonly='readonly' 'value='<?php echo $formproc->SafeDisplay('name') ?>' maxlength="50" value="<?php echo $session->name?>&quot;    name=&quot;name&quot; /&gt;" />
</p>
<p align="center">
<label for='email2' >Your Email Address*</label>
<input type='text' name='email2' id='email2' value='<?php echo $row_Recordset1['email']; ?><?php echo $formproc->SafeDisplay('email') ?>' maxlength="50" /> 
```

我不确定如何预先填充办公室工作人员姓名、电子邮件等的值？我以为这是一个简单的 echo 命令，但如果是，我想我的语法不对？我确定我错过了一行代码，它也会指定包含数据的行和列，但不知道如何写这个！？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:57:41.120

您的 sql 为每个用户选择一行。

```
$sql = mysql_query("SELECT * FROM USERS") or die("Error connecting to table: ".mysql_error()); 
```

您需要指定您尝试从数据库表中获取的用户。如果用户名存储在名为“USERNAME”的列中，我将为您提供一个 SQL 查询示例：

```
$sql = mysql_query("SELECT * FROM USERS WHERE USERNAME='name'") or die("Error connecting to table: ".mysql_error()); 
```

然后，您可以提取用户特定数据并将其插入到需要的位置。

# grails - 是否有任何解决方案可以让父母中的子元素的 g:pagination 和 g:sortableColumn 显示视图工作？

> ID：13730808
> 
> 赞同：0
> 
> 时间：2012-12-05T19:19:43.047
> 
> 标签：grails, gsp

是否有任何简单的解决方案可以让父显示视图中的子元素的g:pagination~~和 g:sortableColumn正常工作？~~

文档中很好地解释了如何为列表中的当前域执行分页~~和可排序列~~，并且它可以工作，但我无法让它在所描述的情况下工作。

**编辑：我更新了示例**

现在唯一不起作用的是分页。当我单击下一页链接时，列表消失并且 ${childrenistSize} 打印 0。

**简单的例子：**

**父域**

```
class Parent {

    String name

    static hasMany = [children: Children]

    static constraints = {
    }
} 
```

**子域**

```
class Children {

    String first
    int number

    static belongsTo = [parent: Parent]

    static constraints = {
    }
} 
```

**父列表视图**

```
<g:each in="${parentList}" var="parent">
    <tr>
        <td>${parent.name}</td>
        <td><g:link controller="parent" action="show" id="${parent.id}">Show</g:link></td>
    </tr>
</g:each> 
```

**父显示视图**

```
<table>
    <thead>
        <tr>
            <g:sortableColumn property="first" title="First"/>
            <g:sortableColumn property="number" title="Number"/>
        <tr>
    </thead>
    <tbody>
        <g:each in="${childrenList}" var="child">
            <tr>
                <td>${child.first}</td>
                <td>${child.number}</td>
            </tr>
        </g:each>
    </tbody>
</table>
<g:paginate total="${childrenListSize}"/> 
```

**父控制器**

```
class ParentController {

    def index() { }

    def list() {
        [parentList: Parent.list()]

    }

    def show() {
        params.max=3
        def parentInstance = Parent.get(params.id)
        def childrens = Children.createCriteria().list(params) {
          eq('parent', parentInstance)
        }
        [parentInstance : parentInstance , childrenList: childrens, childrenListSize: childrens.totalCount]
     }

} 
```

**一些 BootStrap 测试元素**

```
 Parent parent1 = new Parent(name: "TestParent1")
    Parent parent2 = new Parent(name: "TestParent2")

    Children child1 = new Children(first: "Bob", number: "1")
    Children child2 = new Children(first: "John", number: "2")
    Children child3 = new Children(first: "Igor", number: "3")
    Children child4 = new Children(first: "Lucy", number: "4")
    Children child5 = new Children(first: "Lisa", number: "5")

    Children child6 = new Children(first: "Bob", number: "12")
    Children child7 = new Children(first: "John", number: "24")
    Children child8 = new Children(first: "Igor", number: "33")
    Children child9 = new Children(first: "Lucy", number: "42")

    parent1.addToChildren(child1).addToChildren(child2).addToChildren(child3).addToChildren(child4).addToChildren(child5)
    parent2.addToChildren(child6).addToChildren(child7).addToChildren(child8).addToChildren(child9)

    parent1.save()
    child1.save()
    child2.save()
    child3.save()
    child4.save()
    child5.save()
    parent2.save()
    child6.save()
    child7.save()
    child8.save()
    child9.save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:50:27.753

问题是您没有`children.name`在 Children 域类中命名的列。您需要做的是在控制器中确定您必须按名称列排序。

我可以看到您在 Parent 的操作中显示了一个子列表`show`，并且在此操作中父级不可排序，因此将进行简单的更改：

```
def show() {
  def parentInstance = Parent.get(params.id)
  def childrens = Children.createCriteria().list(params) {
    eq('parent', parentInstance)
  }
  [parentInstance : parentInstance , childrenList: childrens, childrenListSize: childrens.totalCount]
}

<p>Parent: ${parentInstance.name}</p>
<table>
    <thead>
        <tr>
            <g:sortableColumn property="name" title="Name"/>
        <tr>
    </thead>
    <tbody>
        <g:each in="${childrenList}" var="child">
            <tr>
                <td>${child.name}</td>
            </tr>
        </g:each>
    </tbody>
</table>
<g:paginate max="1" total="${childrenListSize}"/> 
```

请注意，我更改了它，`property name`因为它只是名称而不是 children.name。另外，我将参数传递给标准以进行排序。

我没有测试过这个，所以在任何地方都可能是一个错字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:26:03.173

好的，我已经回答了我的问题：

~~.createCryteria 只解决了列排序问题，所以需要在父控制器的 show 动作中添加这行代码：~~

 ~~```
def totalChildrenListSize = Children.findAllByParents(parentInstance, [params]) 
```~~ 

~~要获取该特定父级拥有的所有子级的列表，因此您可以通过调用 .size() ([...., totalChildrenListSize: totalChildrenListSize.size()] 方法来获取大小。~~

按照 Sergio 的建议，在 childrens 上调用 totalCount，然后为该显示操作设置 param.max，并添加 id 参数更改分页标签：

```
<g:paginate id="${parentInstance.id}" total="${totalChildrenListSize}"/> 
```

# php - 如何在同一会话期间停用 ob_start('gz_handler')？

> ID：13730810
> 
> 赞同：0
> 
> 时间：2012-12-05T19:19:46.650
> 
> 标签：php, ob-start

在我正在使用的 php 项目中

ob_start('gz_handler');

在每一页的开头。

但是在下载 zip 文件时，我遇到了一些浏览器的问题。所以我需要在那里停用它。

那么 ob_start('gz_handler') 的反义词是什么？我该怎么做才能不压缩输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:21:31.520

例如，如果您使用 apache，最好的方法是在您的 .htaccess 文件中为应该压缩的文件类型执行此操作。

例如，您可以将其放入您的 htaccess 文件中：

```
<FilesMatch "\.(php|html|js|css?)$">
    php_flag zlib.output_compression On
</FilesMatch> 
```

# django - 使用jingo过滤器中的jinja2宏

> ID：13730812
> 
> 赞同：0
> 
> 时间：2012-12-05T19:20:00.193
> 
> 标签：django, macros, jinja2

我正在通过 jingo 使用 jinja2 开发 Django 应用程序。我定义了一个宏`templates/macros.html`，我需要从定义的过滤器中调用它，`helpers.py`因为我必须传递它的参数中涉及某种 python 逻辑。有什么办法吗？

我想要实现的是这样的：

在`templates/macros.html`：

```
{% macro render_link(obj) -}
    <a href="{{ obj.get_absolute_url() }}">{{ obj }}</a>
-%} 
```

在`helpers.py`：

```
@register.filter
def as_link(obj_or_list):
    if hasattr(obj_or_list, '__iter__'):
        for obj in obj_or_list:
            # call `render_link(obj)` here and concat results somehow
    else:
        # call `render_link(obj_or_list)` here 
```

每当我需要它时，在我的模板中：

```
{{ an_object|as_link }} 
```

我需要在这里使用过滤器，因为我需要在将参数传递给宏之前对参数进行一些处理。我知道我可以在宏本身中编写逻辑，但是我需要在 jinja2 环境中添加一些方法（例如`hasattr`在示例中），当涉及的逻辑太复杂时，这是不可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:21:41.883

经过一番调查，我得出了一个解决方案。宏是在模板中定义的，所以首先我需要加载它。阅读源代码我发现了如何从模板实例中获取宏函数，所以这是正确的方法：

```
@register.filter()
def as_link(obj_or_list):
    from jingo import env

    template = env.get_template('macros.html')
    render_link = template.module.render_link

    if hasattr(obj_or_list, '__iter__'):
        return ''.join((render_link(obj) for obj in obj_or_list))
    return render_link(obj_or_list) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:52:21.917

我不知道这是否有效，但也许宏已注册为全局函数。可以从模板以相同的方式调用宏和全局 Python 函数。

如果您的宏已注册，您可以：

```
env.globals['render_link'](obj) 
```

如果这现在可行，您始终可以将宏代码作为 Python 代码包含在您的过滤器中。在您的过滤器中，您拥有所有 Python 功能。

# c - 指针加法检查

> ID：13730823
> 
> 赞同：1
> 
> 时间：2012-12-05T19:21:00.280
> 
> 标签：c, pointers

我有几个关于指针的问题。

我有以下结构

```
struct buffer {
    char *ptr;
    char data[DATA_SIZE];
}; 
```

我有以下代码

```
printk("ptrs and what not:  buf=%p, b-ptr=%p,   b-data=%p,    INIT_LOC=%lu\n", buf, buf->ptr, buf->data, INIT_LOC);

if (buf)
    buf->ptr = buf->data + INIT_LOC;

printk("ptrs and what not:  buf=%p, b-ptr=%p,   b-data=%p,    INIT_LOC=%lu\n", buf, buf->ptr, buf->data, INIT_LOC); 
```

输出如下：

```
ptrs and what not:  buf=ffff880091ae2000, b-ptr=          (null),   b-data=ffff880091ae2008,    INIT_LOC=10
ptrs and what not:  buf=ffff880091ae2000, b-ptr=ffff880091ae2012,   b-data=ffff880091ae2008,    INIT_LOC=10 
```

问题

1) 添加数字时，假设 2 到具有地址的 ptr 假设 10001 是值 10003，或 10001 + 2 * sizeof(X)，其中 x 是 ptr 的类型。

2) 如果 ptr=10001 是内存中的字符数组，则该数组中的第一个字符在位置 10001，第二个字符是在位置 10002 还是 10009？或者会是什么？

3) 转到上面显示的打印输出 buf->data 的地址为 2008，我不确定如何将 10 添加到它使其指向 2012。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:25:08.663

1.  `10001 + 2 * sizeof(X)`
2.  `10002`
3.  它是十六进制的，0x2012-0x2008 等于十进制的 10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:26:12.047

> 1) 添加数字时，假设 2 到具有地址的 ptr 假设 10001 是值 10003，或 10001 + 2 * sizeof(X)，其中 x 是 ptr 的类型。

加法和减法将指针 X*元素*前后移动。这可以防止您使用指向多字节对象中间的未对齐指针。*（除非您在指针类型之间进行无效转换）。*

> 2) 如果 ptr=10001 是内存中的字符数组，则该数组中的第一个字符在位置 10001，第二个字符是在位置 10002 还是 10009？或者会是什么？

10002，因为`sizeof(char)`是 1。

> 3) 转到上面显示的打印输出 buf->data 的地址为 2008，我不确定如何将 10 添加到它使其指向 2012

注意十六进制表示法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:25:28.200

1) 两者都是错误的。X 是指针的类型。

2) 除非您的架构可以处理小于 char 的内容，否则它应该是 10002。

3) 0x2008 + 10 = 0x2012

# iphone - UITableView 子菜单

> ID：13730826
> 
> 赞同：2
> 
> 时间：2012-12-05T19:21:13.203
> 
> 标签：iphone, ios, uitableview, user-interface

我希望在我的 iOS 应用程序中创建一个带有可折叠子菜单的菜单。它应该看起来像这样：

```
Main menu item 1
    Submenu item 1
    Submenu item 2
    Submenu item 3
Main menu item 2
    Submenu item 1
    Submenu item 2 
```

我不希望 Apple 采用向下钻取方法，`UINavigationController`因为子菜单很少 (1-3) 并且标题很短。我还希望能够在点击相应的主菜单项时折叠或展开子菜单。

我不知道我该如何哄着`UITableView`这样做，所以我想我必须自己控制，除非有人有更好的主意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:26:54.283

[这是来自 Apple 的示例代码，请在此处](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)查看并创建您需要的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:24:02.243

您可以使用分段表视图，其中部分标题实际上是您的主菜单项。该部分中的单元格将对应于您的子菜单项。使用节标题上的点击手势来扩展和收缩。

# fancybox-2 - Fancybox data-fancybox-type="iframe" 和 Strict XHTML Doctype

> ID：13730827
> 
> 赞同：0
> 
> 时间：2012-12-05T19:21:15.030
> 
> 标签：fancybox-2

有没有办法使用`data-fancybox-type="iframe"`严格的 xhmtl 来验证？除了我得到的那个错误之外，我一切正常。

有没有办法编写它以使其适用于我当前的文档类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:50:32.190

由于该`data-*`属性仅在 HTML5 中有效，您可能更喜欢使用 fancybox 特殊*类*来设置内容`type`，所以不要这样：

```
<a class="fancybox" data-fancybox-type="iframe" href="page.html">open</a> 
```

... 尝试 ：

```
<a class="fancybox fancybox.iframe" href="page.html">open</a> 
```

...然后您的文档将使用您当前的 DOCTYPE 进行验证，并且效果完全相同。

# php - 通过 post 方法发送数据时保存数据

> ID：13730837
> 
> 赞同：0
> 
> 时间：2012-12-05T19:21:57.770
> 
> 标签：php, ajax

我有一个表格，例如：

```
<form method="post" action="some external URL">
    <input type="hidden" id="id" name="session_id" />
    <input type="hidden" id="val1" name="val1"  />
    <input type="hidden" id="val2" name="val2" />
    <input type="submit" value="Send" />
</form> 
```

我需要先将这些数据保存到 mySQL 中，然后再将其发送到“一些外部 url”——假设我的“保存到数据库”脚本位于“脚本/保存”URL 上。在通过此表格发送数据之前，如何将我的数据传输到那里？

**编辑**

太好了，当“脚本/保存”给出积极响应时，我的表单只会发送到“某个外部 url”。你也能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:24:40.847

数据库访问是在服务器上处理的，这就是您的表单要传输到的地方。因此，为了做到这一点，将您的表单重新路由到服务器上的不同脚本；该脚本将写入数据库，然后调用“一些外部 URL”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:26:23.853

在表单的 onsubmit 事件期间，您需要使用 ajax 将数据发送到您的 url。以下代码可能对您有用。

```
$("form").submit(function(){        
    $(this).ajaxSubmit({url: 'script/save', type: 'post'});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:28:19.657

不要将表单发布到外部 URL，而是将其发布到内部脚本：

```
<?php
// Process your $_POST here and get all the stuff you need to process your SQL statements.

// Then, POST to the external URL:

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "your external URL");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);

curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:33:51.313

嘿，只需使用 ajax 调用 onsubmit 然后在 ajax 调用完成后提交表单

```
<html>
<head>
<script type="text/javascript">
    function doSomething()
    {
        xmlHttp = new XMLHttpRequest();
        xmlHttp.open('GET', 'yourscript.php, true);
        xmlHttp.onreadystatechange = function(){
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200){
                var response = xmlHttp.responseText;
                // response is what you return from the script
                if(response == 1){
                    alert('works');
                    form[0].submit;
                }else{
                    alert('fails');
                }
            }else{
                alert('fails');
            }
        }
        xmlHttp.send(null);
    }
</script>
</head>
<body>
    <form action="external-url" method="post" onsubmit="doSomething();">
        <input type="text" name="blah" id="blah">
        <input type="submit" value="save">
    </form>
</body>
</html> 
```

# nuget - 具有多个 nuget 包问题的类库

> ID：13730838
> 
> 赞同：0
> 
> 时间：2012-12-05T19:22:13.480
> 
> 标签：nuget, nuget-package

我有一个包含许多项目的类库，每个项目都相互引用，用 C# 编写。这是我与其他项目共享的公共库。我最近更改了通过 nuget 共享库的机制。因此，对于库中的每个项目，我都有一个构建后事件来创建一个 nuget 包，例如。

```
"$(SolutionDir)\NuGet.exe" pack "$(ProjectPath)" -o "$(SolutionDir)\Packages" 
```

这很好用。它将包推送到文件结构中的共享文件夹，使用项目从那里安装它。所有项目包都推送到此文件夹。

我遇到了一个问题。假设我的库创建了包 X 和 Y。X 在类库中引用了 Y。在消费应用程序中，我需要使用X，当我安装它时，它不会从Y安装ddl。我还需要安装包Y。创建包X时如何设置它，它还包括必要的dll从包 Y 中，无需显式安装它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:58:11.543

在包 X 的 nuspec 文件中，您可以将包 Y 指定为依赖项

<dependencies>
<dependency id="Y" version="1.0" />
</dependencies>

更多关于依赖的选项可以在这里找到[http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Dependencies](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Dependencies)

要指定文件，您可以使用
<files>
<file src="bin\Debug*.dll" target="lib" />
<file src="bin\Debug*.pdb" target="lib" />

</files >
更多细节在这里[http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Files_to_Include_in_the_Package](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Files_to_Include_in_the_Package)

# java - Jframe 中的 JPanel 未显示

> ID：13730840
> 
> 赞同：1
> 
> 时间：2012-12-05T19:22:20.193
> 
> 标签：java, swing, layout, jframe, jpanel

我正在为计算器制作一个简单的布局，实际上我是 Java 新手并学习基础知识。我的问题是，当我运行此代码时，仅打开一个 JFrame，并且未显示其按钮的其他面板。PLz帮助，我哪里出错了。

```
 import java.awt.*;
    import javax.swing.*;

    public class Layouts extends JFrame{
        public Layouts(){
            super("Calculator");
            setLookAndFeel();
            setSize(350,350);

            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            BorderLayout border = new BorderLayout();
            setLayout(border);

            GridLayout numbers = new GridLayout(2,2);
            row2.setLayout(numbers);
            row2.add(one);
            row2.add(two);
            row2.add(three);
            row2.add(four);

            GridLayout operators = new GridLayout(2,2);
            row3.setLayout(operators);
            row3.add(plus);
            row3.add(subtract);
            row3.add(multiply);
            row3.add(equals);
            setVisible(true);
        }

        private void setLookAndFeel()
        {
            try
            {
            IManager.setLookAndFeel("com.sun.java.lang.plaf.nimbus.NimbusLookAndFeel");
            }
            catch(Exception exc)
            {
            }
        }

        //row 1
        JPanel row1 = new JPanel();
        JTextField text = new JTextField(20);

        //row 2
        JPanel row2 = new JPanel();
        JButton one = new JButton("1");
        JButton two = new JButton("2");
        JButton three = new JButton("3");
        JButton four = new JButton("4");

        //row3
        JPanel row3 = new JPanel();
        JButton plus = new JButton("+");
        JButton subtract = new JButton("-");
        JButton multiply = new JButton("*");
        JButton equals = new JButton("=");

        public static void main(String[] args)
        {
        Layouts l1 = new Layouts();
        }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:28:21.227

```
BorderLayout border = new BorderLayout();
setLayout(border); 
```

但你没有添加任何东西`border`！添加`numbers`和`operators`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:28:28.353

请记住添加所有组件（即 row2、row3 等）

例子：

```
add(row2,BorderLayout.CENTER)
add(row3,BorderLayout.SOUTH) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:31:46.463

您需要将`JPanel`s 和`JButton`s 添加到`JFrame`. 在`JFrame`这种情况下是你的`Layouts`班级。所以做类似的事情：

```
row1.add(text);
this.add(row1); 

row2.add(one);
row2.add(two);
row2.add(three);
row2.add(four);
this.add(row2); 

... 
```

检查本教程是一个非常有用的[JButton、JPanel 和 JFrame 示例](http://www.hcroboting.com/index.php?option=com_content&view=article&id=3&Itemid=11)

# android - Phonegap Android 应用程序 - 应用程序从停止状态转换为活动/运行时的事件

> ID：13730844
> 
> 赞同：0
> 
> 时间：2012-12-05T19:22:54.677
> 
> 标签：android, cordova

当 Android Phonegap 应用程序转换为活动/运行已处于停止状态时，有没有办法通过 javascript 跟踪（事件？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:38:20.027

当您将应用程序置于后台和退出时，会触发暂停和恢复事件。当然，如果您的应用程序在后台死机，当您回到 Cordova 时，您将触发 resume 和 deviceready。

文档在这里谈论所有 Cordova 事件：http: [//docs.phonegap.com/en/2.2.0/cordova_events_events.md.html](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html)

# internet-explorer - chrome 和 IE 不加载谷歌字体

> ID：13730846
> 
> 赞同：0
> 
> 时间：2012-12-05T19:22:59.443
> 
> 标签：internet-explorer, google-chrome, fonts

我在我的网站上使用谷歌字体（Open Sans）。在我的本地 wamp 服务器上的所有浏览器中进行了测试，结果非常好。

当我将页面上线时，我注意到 FF 可以正常加载字体，但 Chrome (v23) 和 IE8-9 没有，它们只是显示 Arial。我在 chrome 中查看了 Web 开发人员工具的 Sources 面板，甚至根本没有列出字体。

我可以采取哪些步骤来尝试调试它，或者有人知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:42:39.123

问题是该站点使用 https，而我试图使用 http url 加载字体。不知道为什么 FF 加载它，但 IE 给了我安全内容警告消息。

# javascript - javascript异步未运行

> ID：13730847
> 
> 赞同：-1
> 
> 时间：2012-12-05T19:23:05.953
> 
> 标签：javascript, jquery, ajax, json, asynchronous

记录会发出警报，而记录用户则不会。

我无法弄清楚这里发生了什么......没有网络错误。data/users.json 和 data/rides.json 都可以很好地到达客户端。

```
$.ajax({
  url: "data/users.json",
  dataType: 'json',
  async: false,
  success: function(data){
    users = data.users
    alert('Logging Uers');
}});

$.ajax({
  url: "data/rides.json",
  dataType: 'json',
  async: false,
  success: function(data){
        alert('Logging rides');
    rides = data.rides
}}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:33:08.630

也许`users = data.users`它抛出了一个异常（由一个可能的 undefined 引起`data`）。您是否尝试评论该行？

此外，您应该实现一个错误回调：

```
$.ajax({
    url: "data/users.json",
    dataType: 'json',
    async: false,
    success: function(data){
        //users = data.users;
        alert('Logging Users');
    },
    error: function() {
        alert("ERROR");
        console.log(arguments);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:38:54.537

有人使 json 文件无效。我修复了语法错误，它现在可以工作了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-05T19:26:18.283

由于赋值后缺少半色，您可能会在这两个函数中遇到语法错误。但是，在您的游乐设施功能中，分配是在警报之后，允许触发警报。在用户中，它不是。因此没有警报。

# regex - 如何使用 htaccess 解决 domain.com/domain.com/URI 的加载问题？

> ID：13730859
> 
> 赞同：1
> 
> 时间：2012-12-05T19:24:09.600
> 
> 标签：regex, apache, .htaccess, codeigniter, mod-rewrite

我在处理 Codeigniter 时遇到问题

domain.com/domain.com/URI

不会产生 404 错误。基本上它只是加载 domain.com/URI 而不改变 url。所以，我手上有一个潜在的重复内容问题。

我不想尝试破解核心，而是想将 htaccess 更改为重定向

```
domain.com/http://domain.com/URI 
```

简单地

domain.com/URI

我尝试过使用谷歌搜索解决方案，但似乎都没有触发重写条件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:32:50.693

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+http://[^/]+(/[^\s]*) [NC]
RewriteRule ^ %1 [R,L] 
```

# javascript - 为什么我不能在 TypeScript 类中声明局部变量和函数？

> ID：13730861
> 
> 赞同：3
> 
> 时间：2012-12-05T19:24:16.423
> 
> 标签：javascript, typescript

在 TypeScript 中，如果没有编译器将函数添加到原型中，我似乎无法在类中声明函数。例如：

```
class MyTypeScriptClass {
    // method, is added to prototype
    foo1(): void {
        alert('invoked foo1');
    }

    // private method also added to prototype
    private foo2(): void {
        alert('invoked foo2');
    }

    //// can I have a local function, without making it a private method?
    //function foo3() {
    //    alert('invoked foo3');
    //}
} 
```

以上编译为：

```
var MyTypeScriptClass = (function () {
    function MyTypeScriptClass() { }
    MyTypeScriptClass.prototype.foo1 = function () {
        alert('invoked foo1');
    };
    MyTypeScriptClass.prototype.foo2 = function () {
        alert('invoked foo2');
    };
    return MyTypeScriptClass;
})(); 
```

我正在寻找的是可以编译为以下 JavaScript 的打字稿：

```
var fvm = new FlasherViewModel2();
    var MyTypeScriptClass = (function () {
        function MyTypeScriptClass() { }
        MyTypeScriptClass.prototype.foo1 = function () {
            alert('invoked foo1');
        };
        MyTypeScriptClass.prototype.foo2 = function () {
            alert('invoked foo2');
        };
        function foo3() {
            alert('invoked foo3');
        }
        return MyTypeScriptClass;
    })(); 
```

**可以做到吗？**

（作为旁注，我知道 foo3 不能从外部代码调用。我实际上会从类中的另一个方法调用 foo3，例如，将函数传递给 jQuery fadeOut。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T21:05:22.077

正如 apsillers 所说，`private static`这可能是您想要的。虽然当前版本不支持它，但您将能够`private static`在未来的某个时候在 TypeScript 中拥有一个成员（设计团队根据与此类似的反馈改变了这个想法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T22:09:43.020

我刚刚发现了另一种在 typescript 类中使用私有方法的方法，尽管这种模式可能闻起来有点滑稽。据我所知，只有将类包装在`module`. 例如：

```
module MyApp {
    // not accessible externally, `this` must be passed in if needed
    function foo3(that: MyTypeScriptClass): void {
        that.foo1();
        alert('invoked foo3');
    }

    // not accessible externally
    function foo4(): void {
        alert('invoked foo4');
    }

    export class MyTypeScriptClass {
        // normal method, is added to prototype
        foo1(): void {
            alert('invoked foo1');
        }

        // private method also added to prototype, is accessible externally
        private foo2(): void {
            alert('invoked foo2');
            foo3(this);
            foo4();
        }
    }
} 
```

上面编译成：

```
var MyApp;
(function (MyApp) {
    function foo3(that) {
        that.foo1();
        alert('invoked foo3');
    }
    function foo4() {
        alert('invoked foo4');
    }
    var MyTypeScriptClass = (function () {
        function MyTypeScriptClass() { }
        MyTypeScriptClass.prototype.foo1 = function () {
            alert('invoked foo1');
        };
        MyTypeScriptClass.prototype.foo2 = function () {
            alert('invoked foo2');
            foo3(this);
            foo4();
        };
        return MyTypeScriptClass;
    })();
    MyApp.MyTypeScriptClass = MyTypeScriptClass;    
})(MyApp || (MyApp = {})); 
```

有了上述内容，外部 javascript 可以`foo2()`在 的实例上调用`MyTypeScriptClass`，但在运行时既不能从外部访问，`foo3()`也不能从外部访问。`foo4()`最大的警告是，如果您的私有方法需要访问实例的成员，您必须`this`作为函数参数传入。本质上，这些是私有静态方法。

```
var instance = new MyApp.MyTypeScriptClass();

// public, accessible externally
instance.foo1();

// will not compile in a .ts file, but works at runtime from manual js file
instance.foo2();

// runtime exception, foo3 is not defined
foo3(instance);
MyApp.foo3(instance);

// runtime exception, foo4 is not defined
foo4();
MyApp.foo4(); 
```

这种方法也适用于标量变量，但变量本质上也是静态的——不同的类实例不能有不同的值。为此，据我所知，您仍然需要在类中声明它们。标记它们`private`将使 typescript 编译器不允许外部调用它们，但其他 javascript 代码仍然可以从外部访问它们。

# c++ - 为什么地址运算符获得的指针不是左值？

> ID：13730866
> 
> 赞同：-2
> 
> 时间：2012-12-05T19:24:27.797
> 
> 标签：c++, c

我很想知道为什么`&a = &b`C++ 中不允许这样的赋值。

我理解这样做的风险，但至少对我来说，这不是完全禁止它的充分理由。我之所以这么想是因为我正在寻找一种无需复制即可交换大对象的智能方法，而类似的方法似乎是个好主意：

```
void ptr_swap( ptrdiff_t &a, ptrdiff_t &b )
{
    a = a ^ b;
    b = a ^ b;
    a = a ^ b;
}

int main()
{
    double a = 157648.13;
    double b = 96871.84;

    printf("%.4f %.4f\n", a, b);

    ptr_swap( reinterpret_cast<ptrdiff_t>(&a), reinterpret_cast<ptrdiff_t>(&b) );

    printf("%.4f %.4f\n", a, b);
} 
```

..但显然，编译器不这么认为。:(

**编辑：**我明白为什么这不起作用。也许我的问题会这样更清楚：我不知道一个变量在程序中有多少属性，但至少有一个名称、一个值、一个地址，也许还有一些关于它生命周期的指示。对我来说，交换本质上是重命名存储在内存中的两个现有值，而且它会产生副本是无稽之谈。

有了我放弃的这个“可怕”的代码示例，我想做的是对编译器说：“从现在开始，b 被命名为 a，反之亦然”。为什么这样的事情是不可能的？动机是已经有可能以某种方式“指导编译器”，例如通过 TMP，那么为什么不这样做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T19:40:06.000

在我看来，您想更改对象的地址，对吗？那是不可能的。每个对象在其整个生命周期中都有一个固定的地址。你永远不能给一个对象一个不同的地址。对象的地址隐含在生成的机器代码中，它本身并不存储在任何地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T19:28:18.500

`&`是一个以值作为结果的运算符。你会如何给某个值赋值？例子：

```
int i, n;
i + n = 50; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T19:32:22.217

从问题的顶部开始：

`Why are pointers obtained by the address-of operator not lvalues?`

根据c99标准，

```
ISO : c99 6.5.3.2 Address and indirection operators 
```

语义

`3
The unary & operator yields the address of its operand. If the operand has type ‘‘type’’, the result has type ‘‘pointer to type’’. If the operand is the result of a unary * operator, neither that operator nor the & operator is evaluated and the result is as if both were omitted, except that the constraints on the operators still apply and the **result is not an lvalue**.`

临时性是对象的属性。当您创建对象的引用时，它只是临时的，您不能为其他变量重新定义相同的引用。

现在，在您的情况下，您所做的`passing by address`不是`passing by reference`. 因为只需要传递变量，所以在调用环境中`pass by reference`不需要。`&`

只需这样做：

```
 swap(a,b); // calling

void swap(int &a, int &b)
{
 // definition 
 // here a and b are reference.
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T19:32:26.833

已经有很多其他的方法可以做到这一点，为什么还要再有一种不如其他的呢？您可以使用智能指针完美地做到这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T21:42:06.110

对象是内存中的一个位置。
变量名是对象的引用（在程序中引用对象的一种方式）。但并非所有变量都有名称。

但是你可以通过将别名传递给你的变量来实现你想要的：

```
void print(double& ref1, double& ref2)
{
    printf("%.4f %.4f\n", ref1, ref2);
}
int main()
{
    double a = 157648.13;
    double b = 96871.84;

    print(a, b);    
    print(b, a); // Pass them the function the other way around.
                 // You have effectively swapped the values (as far as the function is concerned).
} 
```

在我的选择中，您正在尝试解决一个不存在的问题。

# c++ - 指针不能在 C++ 函数中维护

> ID：13730868
> 
> 赞同：0
> 
> 时间：2012-12-05T19:24:38.763
> 
> 标签：c++

```
void concat(char *str, char *ch, int num)
{
    *str= *ch; ++str;
    while (num>0) {
        *str = '0' + num % 10;
        num /= 10;
        ++str;
    }
}

concat(runner, 'a', 10);

concat(runner, 'b', 20); 
```

我只想将一个像'a'这样的字符连接到10，预期的结果将是a10，第一行工作正常。但我只是想在第一行（concat a10）之后，跑步者应该指向字符串的末尾，所以当我运行第二行时，它应该是 a10b20，但实际结果是 b20 覆盖了 a10。我认为这应该是指针问题，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:29:31.910

我正在完全改变我的答案。把它放在函数的开头：

```
void concat(char * str, const char * ch, int num) {
    while (*str) {
         ++str;
    } 
```

然后保持其余相同。这确实是 concat 应该的样子。只需确保 runner[0] == 0 在第一次调用它之前！并将以下代码添加到函数末尾的最后一个大括号之前：

```
 *str = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:35:41.013

使用&应该可以或者实际上在c中，你可以使用**，两种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T19:29:17.523

好吧，代码可以满足您的要求。

为此，您需要找到第一个字符串的结尾，然后添加到它：

```
void concat(char *str, char *ch, int num)
{
    str += strlen(str); /* make sure we start adding at the end of str */
    *str= *ch; ++str;
    while (num>0) {
        *str = '0' + num % 10;
        num /= 10;
        ++str;
    }
} 
```

但是现在你必须确保 str[0] 在开头是 0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T20:03:27.263

问题是您的函数不知道传入的字符串的结尾。要解决此问题，您需要将您初始化`char *`为 all`0`或`\0`. 另一个问题是您将数字错误地转换为字符。最后，这个函数没有什么安全的，因为字符串的大小没有传入，所以你只需要确保你事先分配了足够的空间。

```
void concat(char *str, const char *ch, int num)
{
    //This is function not safe since you do not
    //know how much space str has allocated
    str += strlen(str);
    *str = *ch; ++str;

    if(num < 0)
    {
        *str = '-';//Add the -
        ++str;
        num *= -1; //Make the number positive
    }

    //Determine the number of digits first
    //because you need to add characters backwards
    int digits = 0, tmpnum = num;
    while (tmpnum) {
        tmpnum /= 10;
        ++digits;
    }

    while(digits--)
    {
        str[digits] = '0' + num % 10;
        num /= 10;
    }
} 
```

用法：

```
char *runner = new char[20]();
//or
//char *runner = (char*)calloc(20, 1);    

concat(runner, "a", 10);
concat(runner, "b", 20);
concat(runner, "c", -30);

delete [] runner;
//or if you used calloc
//free(runner); 
```

我这样做是假设这是一项家庭作业，有更简单/更安全的方法可以完成此任务，尤其是使用`C++`您的问题被标记的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T19:55:07.983

因为每次调用 concat 时，str 的索引都是从 0 开始的，所以才会覆盖 str 的内容。在添加任何内容之前，只需跳过 str 中的所有填充位置。

# regex - 找到正确的正则表达式

> ID：13730872
> 
> 赞同：0
> 
> 时间：2012-12-05T19:24:50.780
> 
> 标签：regex

我正在使用多种语言开发网络项目：标签内的每个 HTML 文本都必须包含在`<?php echo _("..."); ?>`so 中：

`<div>My text</div>`转变为`<div><?php echo _("My text"); ?></div>`

事实是我想跟踪大量出现的这些文本，以便将其转换为由`'php echo'`? 包裹的文本。是否存在正则表达式来跟踪这些事件？

# json - 谁知道Google Cloud Storage JSON API 授权周转时间？

> ID：13730874
> 
> 赞同：2
> 
> 时间：2012-12-05T19:25:08.420
> 
> 标签：json, google-api, google-cloud-storage

有没有人知道谷歌需要多长时间才能批准访问用于云存储的 JSON API？自从我填写申请表已经两天了，我什至还没有看到一封确认我的申请的电子邮件。

我的要求是每天 500 次 API 命中——我目前正在为产品原型进行探索性代码开发。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:04:47.260

通常在几天内；我通常在响应时批处理请求。

但是，如果您提供了错误的电子邮件地址或错误的描述（例如，“asdfjklm”），那么周转时间将是无限的，因为我不能也不会（分别）回复。

# php - 图像字符串中的数组值

> ID：13730875
> 
> 赞同：-2
> 
> 时间：2012-12-05T19:25:09.863
> 
> 标签：php

```
<?php
header ('Content-Type: image/png');
$img = imagecreatefrompng('http://i.imgur.com/uBaMn.png');
$color = imagecolorallocate($img, 0xFF, 0xFF, 0xFF);
imagestring($img, 1, 20, 21, $f['5'], $color);
imagepng($img);
imagedestroy($img);
?>
<?php 
$url = "http://2006scape.com/services/hiscores/index_lite.ws?player1=boardwalk";
    $f = explode(",", file_get_contents($url));
    print_r($f);
?> 
```

注意：$f['5']

我试图回显数组 5，但它不起作用，因为它需要在双引号或单引号中，但如果我这样做，它会准确地回显：“$f['5']”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:36:08.827

只需更改代码的位置

```
$url = "http://2006scape.com/services/hiscores/index_lite.ws?player1=boardwalk";
$f = explode(",", file_get_contents($url));

header ('Content-Type: image/png');
$img = imagecreatefrompng('http://i.imgur.com/uBaMn.png');
$color = imagecolorallocate($img, 0xFF, 0xFF, 0xFF);
imagestring($img, 5, 220, 6, "F5 : " . $f['5'], $color);
imagepng($img);
imagedestroy($img); 
```

输出

![在此处输入图像描述](../Images/1721010575eea4f53a300b36f9e2413f.png)

# sql-server - SQL Server 脚本语法错误和“必须声明标量值”

> ID：13730887
> 
> 赞同：2
> 
> 时间：2012-12-05T19:26:11.413
> 
> 标签：sql-server, tsql

我正在尝试用 T-SQL 编写一个脚本来解决我们系统上的一个关键问题。不幸的是，我以前从未这样做过，所以我进入了未知领域。

我实际上正在编写一个 PHP 脚本来生成这个 SQL。如果用户存在，则创建它。但在这两种情况下，都将用户添加到组中。

```
DECLARE @userId AS int

/* --------------- 123l123123fvsdf - Name --------------- */
    BEGIN
        IF EXISTS(SELECT id FROM [CMT_UAT].[dbo].[user] WHERE username = '123l123123fvsdf')
                INSERT INTO [CMT_UAT].[dbo].[user](username, password, email, firstname, lastname, created) VALUES('123l123123fvsdf', 'PASSWORD', 'aa00043@user.com', 'firstName', 'lastName', GETDATE())
                GO
                SET @userId = @@IDENTITY
        ELSE
                SET @userId = SELECT id FROM [CMT_UAT].[dbo].[user] WHERE username = 'AA00043'
    END
    INSERT INTO [CMT_UAT].[dbo].[user_group](user_id, group_id) VALUES(@userId, '7') 
```

我收到这些错误：

> *消息 102，级别 15，状态 1，第 7 行
> ')' 附近的语法不正确。
> Msg 137, Level 15, State 1, Line 1
> 必须声明标量变量“@userId”。
> 消息 156，级别 15，状态 1，第 3 行
> 关键字“SELECT”附近的语法不正确。
> 消息 156，级别 15，状态 1，第 5 行
> 关键字“插入”附近的语法不正确。
> Msg 137, Level 15, State 2, Line 5
> 必须声明标量变量“@userId”。*

我已经对标量值进行了一些谷歌搜索，当我的查询返回多行时可能会发生这种情况，我已经验证它没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:33:48.960

从你的脚本中去掉“GO”。“GO”是一个提供者指令，它告诉连接管理器结束执行批处理并开始一个新的批处理。因此，它正在重置您的执行上下文，清除您的`@userid`变量声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T19:32:10.600

你需要修复你的 if 语句。尝试：

```
DECLARE @userId AS int

IF EXISTS(SELECT id FROM [CMT_UAT].[dbo].[user] WHERE username = '123l123123fvsdf')
BEGIN
    INSERT INTO [CMT_UAT].[dbo].[user](username, password, email, firstname, lastname, created) VALUES('123l123123fvsdf', 'PASSWORD', 'aa00043@user.com', 'firstName', 'lastName', GETDATE())
    SET @userId = @@IDENTITY
END
ELSE
   SET @userId = SELECT id FROM [CMT_UAT].[dbo].[user] WHERE username = 'AA00043'

INSERT INTO [CMT_UAT].[dbo].[user_group](user_id, group_id) VALUES(@userId, '7') 
```

你的 if 块的第一部分有 multipl 语句，但你忘了把它放在`BEGIN`它`END`周围

并且还像 RBarryYoung 指出的那样，您需要`GO`退出

# ruby-on-rails - POST 上的 RoR“无路由匹配”

> ID：13730894
> 
> 赞同：0
> 
> 时间：2012-12-05T19:26:38.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery

**是）我有的：**

*路线：*

```
resources :tests do
  resources :resultsets, :only => [:create, :destroy]
  resources :testresults, :only => [:edit, :update] do
    resources :testnotes, :only => [:create, :update, :destroy]
  end
end 
```

*提交的表格：（无附加变量）*

```
<%= form_for [@session, @testresult, @testnote], :remote => true do |f| %>
  <%= f.text_field :line %>
<% end %> 
```

`@session`是一个测试
`@testresult`是一个测试结果
`@testnote = Testnote.new`

*控制器动作：*

```
def create
  @testresult = Testresult.find(params[:testresult_id])
  @testnote = Testnote.find_or_create_by_line(params[:testnote][:line])
  @connection = Testnoteconnection.find_or_initialize_by_testnote_id_and_testresult_id(@testnote.id, @testresult.id)

  respond_to do |format|
    if @connection.new_record? and @connection.save
      format.js
    else
      format.js { render :partial => 'error' }
    end
  end
end

def update
  @testresult = Testresult.find(params[:testresult_id])
  @testnote = Testnote.find(params[:id])
  @connection = Testnoteconnection.find_or_initialize_by_testnote_id_and_testresult_id(@testnote.id, @testresult.id)

  respond_to do |format|
    if @connection.new_record? and @connection.save
      format.js
    else
      format.js { render :partial => 'error' }
    end
  end
end 
```

**什么是错误：**

除了响应之外，一切都运行良好。数据库工作正常，并且正在按应有的方式创建条目。但是浏览器向我抛出以下错误：

```
No route matches {:action=>"update", :controller=>"testnotes", :test_id=>nil, :testresult_id=>#<Testresult id: 13, resultset_id: 4, testobjecttype_id: 114, testtype_id: 1, result: nil, randomed_order: 0, created_at: "2012-11-28 16:22:49", updated_at: "2012-11-28 16:22:49">, :id=>#<Testnote id: 10, line: "asdf", created_at: "2012-12-05 16:06:17", updated_at: "2012-12-05 16:06:17">} 
```

**我的想法：**

短：我完全不知道！
显然路由很好，否则服务器甚至不会到达控制器操作并执行那些数据库条目。但是创建第二个路由请求的原因是什么？为什么没有正确呈现响应？

**编辑：** 表单正确提交并正确路由到`create`操作，该操作也被正确调用。一切正常，直到`format.js`. 问题可能出在视图中吗？

**Edit2：（查看和部分）**

*创建.js*

```
$('#notes_drop').closest('tr').before('<%= j render :partial => "testnotes/testnote", :locals => {:note => @testnote} %>'); 
```

*测试笔记/测试笔记部分*

```
<tr id='comment_<%= dom_id(note) %>'>
  <td>
    <%= note.line %>
  </td>
  <td>
    <%= link_to 'delete', test_testresult_testnote_path(@session, @testresult, note), :method => :delete, :remote => true %>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:01:28.413

更新：您的视图包括该行 `test_testresult_testnote_path(@session, @testresult, note)`

由于`@session`是 nil，Rails 路由器无法弄清楚如何生成`test_testresult_testnote_path`.

下面的原始答案。

我的猜测是您的 format.js 视图代码包含试图找到特定路线的代码。也许您的 js 视图代码正在尝试呈现部分表单？

无论如何，如果你看

```
No route matches {:action=>"update", :controller=>"testnotes", :test_id=>nil, :testresult_id=>#<Testresult id: 13, resultset_id: 4, testobjecttype_id: 114, testtype_id: 1, result: nil, randomed_order: 0, created_at: "2012-11-28 16:22:49", updated_at: "2012-11-28 16:22:49">, :id=>#<Testnote id: 10, line: "asdf", created_at: "2012-12-05 16:06:17", updated_at: "2012-12-05 16:06:17">} 
```

您会注意到`:test_id =>nil`，这意味着您没有传递 Test 实例进行路由。由于您`:testnotes`被定义为嵌套在 下的嵌套资源`:testresults`，因此`:tests`您必须传递 TestResult 和 Test 的非 nil 实例才能正确生成路由。

您是否在 before_filter 中实例化 @session 变量？如果没有，请尝试在更新操作中实例化 @session，看看是否能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:48:31.787

这是一个高度投机的答案，因为我在这里没有环境设置来测试（双关语）。

我敢打赌，与关键字的类/命名空间冲突`Test`。我知道这有点痛苦，但你有没有试过把它`Testo`改成什么？你可能会在这个过程中学到一些东西，你的配置看起来不错，我之前也有过这种类冲突，所以这就是我的推荐来源

# python - 远程服务器：运行 Python 2.7 脚本并使 *.csv 文件公开可用

> ID：13730896
> 
> 赞同：1
> 
> 时间：2012-12-05T19:26:45.570
> 
> 标签：python, remote-server

我有一个生成 *.csv 文件的 Python 2.7 脚本。我想在远程服务器上运行这个 Python 脚本并使 *.csv 文件公开可供阅读。

这可以在 Heroku 上完成吗？我已经阅读了本教程，但它似乎是为那些想要创建一个完整网站的人准备的。

如果 Heroku 不是我的解决方案，还有哪些替代方案？我尝试了 Google App Engine，但它需要 Python 2.5，并且不适用于 2.7。

更多详细信息：我有一个 Python 2.7 脚本，可以分析在美国证券交易所、纽约证券交易所和纳斯达克交易所交易的所有股票，并将输出写入 *.csv 文件，该文件可以使用电子表格应用程序读取。我希望脚本每晚在远程服务器上自动运行，并且我希望它生成的 *.csv 文件可以公开使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:41:54.960

**虚拟主机**

好的，所以你应该能够非常简单地实现你所需要的。有许多支持 python 的虚拟主机。你的要求很简单。只需将您的 python 脚本上传到 Web 服务器。然后您可以安排一个 cron 作业在每天的特定时间调用您的脚本。您的脚本将按计划运行，并应将 csv 文件保存在 Web 服务器文档根目录中。请记住，您不需要脚本在 Web 服务器中运行，只需在同一台服务器上即可。一旦您将静态 csv 文件放置在网络服务器的文档根目录中，网络服务器就会为您提供静态 csv 文件。

**带保管箱的桌面**

另一个可能更简单的选择是使用任何桌面并安排您的 python 脚本每晚在其上运行，您可以在 Windows、Linux、Mac 中执行此操作。还安装[dropbox](https://www.dropbox.com/)，它为您提供 2GB 的免费在线存储空间。然后，您的脚本只需将 csv 文件保存到 Dropbox/Public 目录即可。当他们这样做时，他们将自动同步到保管箱服务器，并且可以像互联网上的任何其他网页一样通过您的公共 URL 访问。您可以免费获得 2GB，这对于一大堆 CSV 文件来说应该足够了。

# android - 数据库数据在 android 2.2 上工作正常，但在 2.3 更高版本上不能工作

> ID：13730902
> 
> 赞同：1
> 
> 时间：2012-12-05T19:27:10.050
> 
> 标签：android, database, cursor, custom-adapter

我是新来的，也是android的新手……所以我开始为android开发我的第一个应用程序……从自定义适配器中加载数据……当尝试从我的数据库中检索数据时，rawquery我使用的适用于 android 2.2。高于 2.2 的游标不检索任何内容。如果我更改查询的原始查询...它仅适用于 4.0 并且对于光标以下的版本是空的。我注意到问题出在光标上。有谁知道为什么会这样？

来自主类的方法

```
protected void selecionardados() {

// EditText to string
String busca = campo_busca.getText().toString();
//Open database class
Dados_banco consulta = new Dados_banco(this.getActivity());
consulta.open();
//Create a list
List<Dados_banco.ItemLista> itens = consulta.consultaMusica(busca);
CustomAdapter adapter = new CustomAdapter(this.getActivity(),itens);
listagem.setAdapter(adapter); 
```

数据库方法

```
public List<ItemLista> consultaMusica(String NovaPesquisa){
String r = NovaPesquisa;
List<ItemLista> itens = new ArrayList<Dados_banco.ItemLista>();
Cursor resul = bancodados.query(Tabela_musica, new String[] {"_id", "Musica","Cantor","letra_musica","cat_oracao","cat_missa"}, null, null, null, null, null, null);
for (resul.moveToFirst();!resul.isAfterLast();resul.moveToNext()) {
    Idlista = Integer.parseInt(resul.getString(resul.getColumnIndex("_id")));
    BdMusica = resul.getString(resul.getColumnIndex("Musica"));
    BdCantor = resul.getString(resul.getColumnIndex("Cantor"));
    BdLetra = resul.getString(resul.getColumnIndex("letra_musica"));
    BdOracao = resul.getString(resul.getColumnIndex("cat_oracao"));
    BdMissa = resul.getString(resul.getColumnIndex("cat_missa"));

    itens.add(new ItemLista(){{

        id = Idlista;
        musica = BdMusica;
        cantor = BdCantor;
        letra = BdLetra;
        oracao = BdOracao;
        missa = BdMissa;
    });

}   resul.close();
    return itens; 
```

自定义适配器类

```
public class CustomAdapter extends BaseAdapter{

LayoutInflater inflater;
List<Dados_banco.ItemLista> itens;

public CustomAdapter(Activity a, List<Dados_banco.ItemLista> itens) {
    super();    
this.itens = itens;
    this.inflater = (LayoutInflater)a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
// TODO Auto-generated method stub
return itens.size();
}

public Object getItem(int position) {
// TODO Auto-generated method stub
return null;
}

public long getItemId(int position) {
// TODO Auto-generated method stub
return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {

Dados_banco.ItemLista item = itens.get(position);
View vi = convertView;

if(convertView==null){
    vi = inflater.inflate(R.layout.linha_listview, null);
    TextView id = (TextView)vi.findViewById(R.linhaLista.id);
    TextView musica = (TextView)vi.findViewById(R.linhaLista.musica);
    TextView artista = (TextView)vi.findViewById(R.linhaLista.cantor);
    ImageView oracao = (ImageView)vi.findViewById(R.linhaLista.cat_oracao);
    ImageView missa = (ImageView)vi.findViewById(R.linhaLista.cat_missa);

    id.setText(String.valueOf(item.id));
    musica.setText(item.musica);
    artista.setText(item.cantor);
    String imgOra = item.oracao;
    String imgMissa = item.missa;

    if (imgOra.equals(null)) {
        oracao.setImageResource(R.drawable.blank);
    }else if(imgOra.equals("louvor")) {
        oracao.setImageResource(R.drawable.louvor);
        }else if(imgOra.equals("adoracao")) {
        oracao.setImageResource(R.drawable.adoracao);
    }

    if (imgMissa.equals(null)) {
            missa.setImageResource(R.drawable.blank);
    }else if(imgOra.equals("louvor")) {
        missa.setImageResource(R.drawable.louvor);
    }else if(imgOra.equals("adoracao")) {
        missa.setImageResource(R.drawable.adoracao);
    }

    }return vi;
}
} 
```

# android - Android Canvas 上的 libgdx 粒子系统

> ID：13730908
> 
> 赞同：0
> 
> 时间：2012-12-05T19:27:54.367
> 
> 标签：android, drawing, libgdx, particle-system

是否可以使用 libGDX 粒子效果库在 Android 上绘图`Canvas`？我不想重写我所有的应用程序来使用 libGDX `ApplicationListener`。我想使用 libGDX[粒子编辑器](http://code.google.com/p/libgdx/wiki/ParticleEditor)将粒子效果添加到我的应用程序中，但我的应用程序中的所有绘图都在画布`onDraw`方法中。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:33:39.433

不，不容易。libGDX 粒子编辑器发出适合加载到 libGDX [ParticleEffect](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/ParticleEffect.html)类的文件格式。它使用许多 libGDX 绘图原语来实际绘制效果。libGDX 中的大多数绘图实际上是 OpenGL 的薄包装，通常很容易映射到 OpenGL。我不认为 Canvas（我假设是 Android Canvas？）会很容易。

也就是说，libGDX 都是开源的，所以你可以读取和解析粒子文件。您可以看到[ParticleEffect](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/ParticleEffect.java)和[ParticleEmitter](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/ParticleEmitter.java)是如何实际实现粒子效果的。

# java - Why is app shutting down and catch-clause doesn´t catch error?

> ID：13730910
> 
> 赞同：0
> 
> 时间：2012-12-05T19:28:01.297
> 
> 标签：java, android

I have two fields that i want to calculate. The program works fine if i put in numbers in both fields, but if i have one empty and presses my "buttonSubtract" (calc-button) it just shuts down with "application closed...". Why doesn´t the catch-clause catch the exception?

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    buttonSubtract = (Button) findViewById(R.id.buttonsubtract);
    editTextNumber1 = (EditText) findViewById(R.id.textnumber1);
    editTextNumber2 = (EditText) findViewById(R.id.textnumber2);
    textSum = (TextView) findViewById(R.id.textViewSum);

    try
    buttonSubtract.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                if (editTextNumber1.getText().toString() == ""
                        || editTextNumber2.getText().toString() == "")
                {
                    textSum.setText("Put numbers in both fields");

                } else
                {
                    int sum = Integer.parseInt(editTextNumber1.getText()
                            .toString())
                            - Integer.parseInt(editTextNumber2.getText()
                                    .toString());
                    textSum.setText("sum: " + sum);
                }
            }
        });
    } catch (NumberFormatException e)
    {
        textSum.setText("Put numbers in both fields");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:34:13.950

You can't catch exceptions that are thrown in an inner class from the outside. Move the `try` / `catch` block to the place where the `NumberFormatException` happens.

```
 buttonSubtract.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            String number1 = editTextNumber1.getText().toString().trim();
            String number2 = editTextNumber2.getText().toString().trim();
            if (!number1.isEmpty() && !number2.isEmpty()) {
                try {
                    int sum = Integer.parseInt(number1)
                            + Integer.parseInt(number2);
                    textSum.setText("sum: " + sum);
                    return;

                } catch (NumberFormatException e) {
                    // nothing to do
                }
            }
            textSum.setText("Put numbers in both fields");
        }
    }); 
```

The reason is simple: the code executed inside `onClick` is not called by you. It is called by the system once a click happens. Exceptions are only propagated to the caller.

It's simpler to see if you re-arrange the code a bit. Your code was equivalent to

```
OnClickListener someListener = getListener(); // this creates your implementation.
try {
    buttonSubtract.setOnClickListener(someListener);
} catch (NumberFormatException e) {
    // do stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:30:22.717

Firstly, Always Compare String with .equals() method, `==` operator will check if two reference variables point/refer to the same Object:

```
if (editTextNumber1.getText().toString() == "" || editTextNumber2.getText().toString() == "") 
```

should be if(editTextNumber1.getText().toString().equals("")||editTextNumber2.getText().toString().equals(""))

Or even better you can use [**String.isEmpty()**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#isEmpty%28%29) to check if the string is empty.

Now, Regarding the actual problem:

Move your try/catch around the code which throw NumberFormatException for your catch to catch the exception.

```
 try {    
       int sum = Integer.parseInt(editTextNumber1.getText().toString())
                            - Integer.parseInt(editTextNumber2.getText().toString());
       textSum.setText("sum: " + sum);
   }
   catch(numberFormatException ex) {
       //do the stuff
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T19:30:34.053

You only have a catch block for a NumberFormatException. Many other exceptions could be thrown before the block, or inside it. For instance, if any of the findViewById() methods you call at the beginning returns a null, any call to methods of that variable would throw a NullPointerException.

Check the logCat to see what exception is being thrown.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T19:42:13.560

Exceptions thrown in your OnClickListener implementation will bot be caught by your try..catch statement because you are just creating it and setting as a listener, but not executing. It will be executed in other thread later, remove that and put your try..catch statement inside the onclick method.

Also you forgot a "{" after try, and you can't compare Strings with `==`, it will compare if the variables has the same objects instead if they are equals. Use the `equals(Object o)` method instead, and to check if it's empty it's better to trim the string and use the `isEmpty()` method `"sample".trim().isEmpty()`

```
buttonSubtract.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            try
            {
                if (editTextNumber1.getText().toString().trim().isEmpty()
                        || editTextNumber2.getText().toString().trim().isEmpty())
                {
                    textSum.setText("Put numbers in both fields");

                } else
                {
                    int sum = Integer.parseInt(editTextNumber1.getText()
                            .toString())
                            - Integer.parseInt(editTextNumber2.getText()
                                    .toString());
                    textSum.setText("sum: " + sum);
                }

            } catch (NumberFormatException e)
            {
                textSum.setText("Put numbers in both fields");
            }
        }
    }); 
```

# javascript - Javascript：检测网站以进行媒体查询？

> ID：13730911
> 
> 赞同：4
> 
> 时间：2012-12-05T19:28:02.490
> 
> 标签：javascript, css

是否可以在不使用 Modernizr 和类似库的情况下使用 javascript 检测媒体查询？我只需要查看是否存在媒体查询以及可能的宽度。

**编辑：** 我的问题。我正在制作一个 chrome 扩展，它需要能够查看当前站点是否正在使用媒体查询，而无需重新调整视口的大小。

简而言之，我只想检查一个站点是否仅使用 javascript 来使用媒体查询。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:41:16.323

您可以尝试检查集合中的`CSSMediaRule`对象`document.styleSheets`。例如，Modernizr 网站使用媒体查询，我们知道这一点，所以我们可以通过检查他们的样式表对象来检查：

```
document.styleSheets[0].cssRules; // CSSRuleList 
```

在此列表中，我们只需查找任何`CSSMediaRule`; 我们碰巧在他们的网站上找到了 3 个。

# python - 如何使用 scipy 执行具有亚像素精度的图像互相关

> ID：13730913
> 
> 赞同：5
> 
> 时间：2012-12-05T19:28:07.377
> 
> 标签：python, image-processing, scipy, cross-correlation

下图显示了两个相同半径的圆，用抗锯齿渲染，只是左边的圆水平移动了半个像素（注意圆的水平中心在左边一个像素的中间，在右边的像素边界处）。

如果我执行互相关，我可以在相关数组上取最大值的位置，然后计算移位。但由于像素位置总是整数，我的问题是：

“如何使用 Numpy/Scipy 中的互相关获得两个图像之间的子像素（浮点）偏移？”

在我的脚本中，我使用了`scipy.signal.correlate2d`or `scipy.ndimage.filters.correlate`，它们似乎产生了相同的结果。

这里的圆圈只是示例，但我的特定领域特征往往具有亚像素移位，而目前仅获得整数移位给出的结果不太好......

任何帮助都感激不尽！

![在此处输入图像描述](../Images/c71e1bc90933939fc51fccfeec7b7154.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T23:08:54.553

离散互相关（由那些实现）只能具有单个像素精度。我能看到的唯一解决方案是将二维数组插入到更精细的网格（上采样）。

[这是](https://dsp.stackexchange.com/questions/2321/is-up-sampling-prior-to-cross-correlation-useless)关于 DSP 关于互相关之前上采样的一些讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-28T11:17:35.310

我遇到了一个非常相似的问题，也有移位的圆圈，偶然发现了一个很棒的 Python 包，由 Adam Ginsburg 称为“图像注册”。它为您提供亚像素 2D 图像偏移，并且速度相当快。我相信这是一个流行的 MATLAB 模块的 Python 实现，它只对 x 相关峰值附近的图像进行上采样。

看看：[https ://github.com/keflavich/image_registration](https://github.com/keflavich/image_registration)

我一直在使用“chi2_shifts.py”，效果很好。

# delphi - 当并非所有程序员都可以访问完整源代码时，如何避免 Delphi 致命错误 F2051

> ID：13730914
> 
> 赞同：0
> 
> 时间：2012-12-05T19:28:13.143
> 
> 标签：delphi

在我们的团队中，新程序员无法访问我们应用程序的所有源代码。只要他们必须访问仅依赖于类的程序表单，他们就可以访问源代码，一切都很好。当他们必须使用只有 .dcu 的单元中的其他类时，当 dcu 中的类更改其接口时，他们会收到 F2051 错误。

有没有一种干净的方法来获得两者？

*   对新程序员隐藏部分源代码的可能性
*   避免“隐藏”单元中的类更改时出现 F2051 错误

我搜索了一种将 Delphi 代码编译为中间表示的方法，即隐藏源代码但允许编译的方法，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T19:32:22.343

你必须在接口更改后编译代码，并将新的 .dcu 分发给每个需要无源使用它的程序员，然后他们需要重新构建他们的应用程序。绝对没有其他方法可以做到这一点；如果接口发生变化，编译器需要它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T21:22:22.393

对于那些“隐藏”的单元，将*.dcu与**.pas*一起放在源代码管理中，并确保它们已更新并同步。
“授权”开发人员将获取新的*.pas*，而下属只会看到和获取*.dcu*。

如果你真的想走这条拥有二等程序员的路线，你必须做随之而来的管理工作。

话虽如此，我个人更经常在追逐错误并试图了解正在发生的事情时不进入 VCL 源代码。
而且我真的不喜欢没有它（比如一些低级别的 Delphi SKU）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T03:12:05.923

如果您真的想创建一个稳定的二进制单元，可以与您不信任的人共享以阅读您的源代码，为什么不将“秘密”位放入 DLL，然后从其余部分加载该 DLL编码。

它被称为“应用程序二进制接口”，既可以使用从 DLL 导出的普通旧 Pascal 程序本地完成，也可以使用 COM 接口和 COM 类型库完成。

Delphi 拥有 DLL 和 BPL 技术，可以帮助您创建不是源代码但具有稳定 ABI 的东西，这将帮助您避免任何听起来像您现在手头的疯狂小混乱。

# sql - 如果我删除所有表然后重新创建它们，Linq to SQL 会中断吗？

> ID：13730921
> 
> 赞同：0
> 
> 时间：2012-12-05T19:28:38.043
> 
> 标签：sql, linq, linq-to-sql

现在我的表中有一堆随机数据。

我注意到我确实需要在我的表中到处添加一两列，所以我对此非常好奇......如果我要删除所有表然后重新创建它们，Linq to SQL注意？

此外，如果我删除所有表，然后使用一些具有一两列额外列的表重新创建它们，Linq to SQL 会选择这些新列，还是需要重新生成我的 Linq to SQL 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:30:59.783

只要您使用相同的定义、架构、权限等重新创建它们，Linq to SQL 可能不会注意到，但最好在之后重新生成以确保。

如果添加新列，则需要重新生成或手动添加这些列。（更容易重新生成。）

# java - Java：向现有类添加字段和方法？

> ID：13730924
> 
> 赞同：38
> 
> 时间：2012-12-05T19:28:46.077
> 
> 标签：java, methods, field, add

在 Java 中，是否有一种向现有类添加一些字段和方法的方法？我想要的是我有一个类导入到我的代码中，我需要添加一些从现有字段派生的字段及其返回方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T19:31:46.727

您可以创建一个类来扩展您希望添加功能的类：

```
public class sub extends Original{
 ...
} 
```

要访问超类中的任何私有变量，如果没有 getter 方法，您可以将它们从“私有”更改为“受保护”并能够正常引用它们。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T19:33:19.830

您可以在 Java 中扩展类。例如：

```
public class A {

  private String name;

  public A(String name){
    this.name = name;
  }

  public String getName(){
    return this.name;
  }

  public void setName(String name) {
    this.name = name;
  }

}

public class B extends A {
  private String title;

  public B(String name, String title){
    super(name); //calls the constructor in the parent class to initialize the name
    this.title= title;
  }      

  public String getTitle(){
    return this.title;
  }

  public void setTitle(String title) {
    this.title= title;
  }
} 
```

现在的实例`B`可以访问公共字段`A`：

```
B b = new B("Test");
String name = b.getName();
String title = b.getTitle(); 
```

有关更详细的教程，请查看[继承（Java 教程 > 学习 Java 语言 > 接口和继承）](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)。

**编辑：**如果类`A`有一个构造函数，如：

```
public A (String name, String name2){
  this.name = name;
  this.name2 = name2;
} 
```

然后在课堂上`B`你有：

```
public B(String name, String name2, String title){
  super(name, name2); //calls the constructor in the A 
  this.title= title;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-13T19:37:37.663

这些示例仅在您扩展的类不是最终类时才真正适用。例如，您不能使用此方法扩展 java.lang.String。然而，还有其他方法，例如使用 CGLIB、ASM 或 AOP 使用字节码注入。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-05-14T22:10:49.010

假设这个问题是询问 C# 扩展方法或 JavaScript 原型的等价物，那么从技术上讲，这可能是 Groovy 经常做的一件事。Groovy 编译 Java 并且可以扩展任何 Java 类，甚至是最终类。Groovy 有 metaClass 来添加属性和方法（原型），例如：

```
// Define new extension method
String.metaClass.goForIt = { return "hello ${delegate}" }

// Call it on a String
"Paul".goForIt() // returns "hello Paul"

// Create new property
String.metaClass.num = 123

// Use it - clever even on constants
"Paul".num // returns 123
"Paul".num = 999 // sets to 999
"fred".num // returns 123 
```

我可以解释如何以与 Groovy 相同的方式进行操作，但对于发帖者来说，这可能太过分了。如果他们愿意，我可以研究和解释。

# scala - Scala：要求函数参数是某个类的成员？

> ID：13730926
> 
> 赞同：0
> 
> 时间：2012-12-05T19:29:04.813
> 
> 标签：scala, methods

我想做类似的事情

```
class A {
  def f1: Unit = ...
  def f2: Unit = ...
}
def foo(f: => Unit) {
  (new A).f // ???
} 
```

其中 f 应该是 A 类的成员函数。我相信标准解决方案是

```
def foo(f: A => Unit) {
  f(new A)
} 
```

并以这种方式使用它

```
foo(_.f1)
foo(_.f2) 
```

但现在我可以传入一个具有此签名的任意函数，这可能不是我们想要的。有没有办法确保我传入的函数是某个类的成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:12:23.850

好吧，如果你不介意一些扭曲，你可以使用函数毕竟是一个类的事实......

```
// abstract class MyIntToString extends (Int => String) // declare here if you want 
                                                       // to use from different classes

// EDIT: f1 and f2 are now val instead of def as per comment below
// by @Régis Jean-Gilles
class A {
    abstract class MyIntToString private[A]() extends (Int => String) 
           // if MyIntToString is declared here
           // with a constructor private to the enclosing class
           // you can ensure it's used only within A (credit goes to @AlexeyRomanov 
           // for his comment below)
    val f1 = new MyIntToString {
        def apply(i: Int) = i.toString + " f1"
    }
    val f2= new MyIntToString {
        def apply(i: Int) = i.toString + " f2"
    }
 }

def foo(f: A#MyIntToString) = f(42) // f: MyIntToString if MyIntToString not nested in A
val a = A 
```

现在你可以这样做：

```
scala> foo((new A).f1)
res1: String = 42 f1

scala> foo((new A).f2)
res2: String = 42 f2 
```

但 foo 不接受`Int => String`签名

```
scala> val itos = (i:Int) => i.toString
itos: Int => String = <function1>

scala> foo(itos)
<console>:11: error: type mismatch;
 found   : Int => String
 required: MyIntToString
              foo(itos)
                  ^ 
```

# arrays - 来自数组 as3 的子字符串 **错误 #1009：无法访问空对象引用的属性或方法

> ID：13730941
> 
> 赞同：0
> 
> 时间：2012-12-05T19:29:49.123
> 
> 标签：arrays, actionscript-3, flash, substring

我正在尝试创建一个匹配游戏，其中数组中的一个对象与数组中`hitBoxes`的一个对象匹配`hitBoxes2`。我试图将实例名称转换为字符串，然后使用 substring 方法匹配实例名称中的最后一个数字，如果匹配则他们获胜。现在我收到错误

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 MethodInfo-499()

我想知道是否有人可以帮助我。谢谢！

```
 var left:String;
            var correct:MovieClip = new Correct;
            var isClicked:Boolean = false;
            var leftClicked:int = 0;

            p3.nextPage.buttonMode = true;
            p3.nextPage.addEventListener(MouseEvent.CLICK, nextPage);

            function nextPage(MouseEvent):void{
                removeChild(p3);
            }

            var hitBoxes:Array = [p3.a1, p3.a2, p3.a3, p3.a4, p3.a5, p3.a6, p3.a7, p3.a8];
            var hitBoxes2:Array = [p3.b1, p3.b2, p3.b3, p3.b4, p3.b5, p3.b6, p3.b7, p3.b8];

            for (var h:int = 0; h < hitBoxes.length; h++){
                hitBoxes[h].buttonMode = true;
                hitBoxes[h].addEventListener(MouseEvent.CLICK, matchingLeft);
            }

            for (var h2:int = 0; h2 < hitBoxes2.length; h2++){
                hitBoxes2[h2].buttonMode = true;
                hitBoxes2[h2].addEventListener(MouseEvent.CLICK, matchingRight);
            }

            function matchingLeft(e:MouseEvent):void{
                var left = String(e.currentTarget.name);
                isClicked = true;
                trace(left);
            }

            function matchingRight(e:MouseEvent):void{
                var right:String = String(e.currentTarget.name);
                trace(right);
                if(isClicked == true && left.substring(3,3) == right.substring(3,3)){
                    trace("matched");
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:48:56.010

根据您的代码变量“left”在matchingRight方法中为null，因为matchingLeft使用其名称为“left”的局部变量，而顶级“left”仍然具有其默认值。

也错误地使用了 String.substring 方法：

```
var name:String="p3.a1";
trace(name.substring(3, 3)); // this will always output empty string ""
trace(name.substring(4, 5)); // this will output "1" string 
```

总之，我建议在计算“匹配”条件时使用数组索引（整数）而不是字符串，子字符串操作和字符串比较是 CPU 密集型的。

# python - 如何在 Tornado 中返回没有默认模板的 HTTP 错误代码？

> ID：13730945
> 
> 赞同：34
> 
> 时间：2012-12-05T19:30:03.620
> 
> 标签：python, tornado

我目前正在使用以下内容来引发 HTTP 错误请求：

```
raise tornado.web.HTTPError(400) 
```

它返回一个 html 输出：

```
<html><title>400: Bad Request</title><body>400: Bad Request</body></html> 
```

是否可以只返回带有自定义正文的 HTTP 响应代码？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-06T00:29:25.247

您可以模拟[`RequestHandler.send_error`](http://tornado.readthedocs.org/en/stable/web.html#tornado.web.RequestHandler.send_error)方法：

```
class MyHandler(tornado.web.RequestHandler):
    def get(self):
        self.clear()
        self.set_status(400)
        self.finish("<html><body>My custom body</body></html>") 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-06T08:01:08.023

Tornado 调用[`RequestHandler.write_error`](http://tornado.readthedocs.org/en/stable/web.html#tornado.web.RequestHandler.write_error)输出错误，因此[VisioN 方法的替代方案将按照 Tornado](https://stackoverflow.com/a/13735021/2038264)[文档](http://tornado.readthedocs.org/en/stable/guide/structure.html#error-handling)的建议覆盖它。这种方法的优点是它可以让你`HTTPError`像以前一样加注。

的来源`RequestHandler.write_error`是[here](http://tornado.readthedocs.org/en/stable/_modules/tornado/web.html#RequestHandler.write_error)。下面您可以看到一个简单修改 write_error 的示例，如果您在 kwargs 中提供原因，它将更改设置状态代码并更改输出。

```
def write_error(self, status_code, **kwargs):
    if self.settings.get("serve_traceback") and "exc_info" in kwargs:
        # in debug mode, try to send a traceback
        self.set_header('Content-Type', 'text/plain')
        for line in traceback.format_exception(*kwargs["exc_info"]):
            self.write(line)
        self.finish()
    else:
        self.set_status(status_code)
        if kwargs['reason']:
            self.finish(kwargs['reason'])
        else: 
            self.finish("<html><title>%(code)d: %(message)s</title>"
                "<body>%(code)d: %(message)s</body></html>" % {
                    "code": status_code,
                    "message": self._reason,
                }) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-07T14:22:26.110

最好使用标准接口并在`HTTPError`.

```
raise tornado.web.HTTPError(status_code=code, log_message=custom_msg) 
```

然后，您可以解析您的错误`RequestHandler`并检查消息：

```
class CustomHandler(tornado.web.RequestHandler):
    def write_error(self, status_code, **kwargs):
        err_cls, err, traceback = kwargs['exc_info']
        if err.log_message and err.log_message.startswith(custom_msg):
            self.write("<html><body><h1>Here be dragons</h1></body></html>") 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-18T11:53:22.890

```
def write_error(self, status_code, **kwargs):
    #Function to display custom error page defined in the handler.
    #Over written from base handler.
    data = {}
    data['code'] = status_code
    data['message'] = httplib.responses[status_code]
    # your other conditions here to create data dict
    self.write(TEMPLATES.load('error.html').generate(data=data)) 
```

当**self.send_error()**调用被发起**时 write_error()**函数被请求处理程序调用。因此，您可以在此处创建自定义错误数据字典并将其呈现到您的自定义错误页面。

http.responses[status_code] 根据状态代码返回错误代码文本，如“找不到页面”。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-01-30T12:01:07.603

您也可以在处理程序中覆盖**get_error_html**方法。例如：

```
import tornado.web
class CustomHandler(tornado.web.RequestHandler):
    def get_error_html(self, status_code, **kwargs);
        self.write("<html><body><h1>404!</h1></body></html>")
...
def get(self):
... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-04T11:28:51.503

[这个交流](https://groups.google.com/forum/#!topic/python-tornado/XTpKcw_G--g)澄清了这里建议的一些方法，并打折`reason`关键字（我正在考虑尝试）。

**问：（**由mrtn）

“我想用`raise tornado.web.HTTPError(400, reason='invalid request')`一个自定义原因来传递错误响应，我希望通过重写`write_error (self, status_code, **kwargs)`方法来做到这一点。

“不过好像只能进入`self._reason`里面`write_error`，不是我想要的，我也试过`kwargs['reason']`了，不存在。”

**答：（**由 Tornado 首席开发人员 @bendarnell 提供）

“暴露错误的异常`write_error`可用作关键字参数中的`exc_info`三元组。您可以使用以下内容访问原因字段：

```
if "exc_info" in kwargs:
    e = kwargs["exc_info"][1]
    if isinstance(e, tornado.web.HTTPError):
        reason = e.reason 
```

“但请注意，该`reason`字段基本上已被弃用（它不存在于 HTTP/2 中），因此它可能不是执行您在此处尝试执行的任何操作的最佳方式（`HTTPError`的`log_message`字段稍微好一点，但仍然不理想). 只需引发您自己的异常，而不是使用`HTTPError`；当它看到正确的异常类型时，您的`write_error`覆盖可以使用。`self.set_status(400)`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-18T06:47:23.733

对于 json 错误响应，我使用以下模板：

*请求处理程序：*

```
import json
from tornado.web import RequestHandler
from src.lib.errors import HTTPBadRequest

class JsonHandler(RequestHandler):

    def prepare(self):
        content_type = ''
        if "Content-Type" in self.request.headers:
            content_type = self.request.headers['Content-Type']

        if content_type == 'application/json':
            try:
                self.request.body = json.loads(self.request.body.decode('utf-8'))
            except ValueError:
                raise HTTPBadRequest

    def write_error(self, *args, **kwargs):
        err_cls, err, traceback = kwargs['exc_info']
        self.set_status(err.status_code)
        if err.description:
            self.write_json(err.description)
        self.finish()

    def set_default_headers(self):
        self.set_header('Content-Type', 'application/json')

    def write_json(self, response):
        self.write(json.dumps(response)) 
```

*错误处理程序：*

```
from typing import Any
from tornado import httputil

class BaseHTTPError(Exception):
    def __init__(
        self, status_code: int = 500, description=None, *args: Any, **kwargs: Any
    ) -> None:
        if description is None:
            description = {}
        self.status_code = status_code
        self.description = description
        self.args = args
        self.kwargs = kwargs

    def __str__(self) -> str:
        message = "HTTP %d: %s" % (
            self.status_code,
            httputil.responses.get(self.status_code, "Unknown"),
        )
        return message

class HTTPBadRequest(BaseHTTPError):
    def __init__(self, *args, **kwargs):
        super().__init__(status_code=400, description={"error": "Bad Request"}, *args, **kwargs) 
```

# javascript - JQUery 基于动态子类查找和匹配父类

> ID：13730949
> 
> 赞同：0
> 
> 时间：2012-12-05T19:30:23.180
> 
> 标签：javascript, jquery, jquery-ui

好的，用一个标题来解释有点困难，但基本上我有一个动态类添加到一个基于父元素的动态类的子元素中。添加了这样的：

```
$('ul').each(function(key){
    if ($(this).hasClass('sortable')){
        $(this).addClass('parent' + key);
        $(this).children().addClass('parent' + key);
    };
}); 
```

之后的结构非常简单：

```
<ul class="parent0">
    <li class="parent0">
        <ul class="parent1">
            <li class="parent1"></li>
        </ul>
    </li>
</ul> 
```

现在 UI 让用户将这些 li 移到父级之外并放置在其他位置。稍后，我想检查元素，然后将其与相应的（原始）父元素匹配。它不能是 $(this) 父级，因为它将被移出父级，但类仍然存在。

所以检查正在寻找 .parent(n) ，然后用 .parent(n) 找到 ul 最终这段代码将存在于里面：

```
$('sortable li').appendTo($('THIS-IS-THE-DYNAMIC-CLASS')); 
```

所以我假设 find 会在此之前，但我不知道如何写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:36:26.313

我会使用除类之外的其他属性，因此它可以是完全唯一的。使用`$(this).data`或`$(this).attr`。而且我建议将 ID 分配给可以完全唯一的父级（或不同的属性）。在我看来，这会让事情变得更干净。

例如...

假设：

```
$(this).attr('parentClass', '.parent' + key); 
```

然后

```
$('.sortable li').each(function() { $(this).appendTo($(this).attr('parentClass')); }); 
```

# c# - 如何在 C++ Qt 中发出一个将发布查询和文件上传到服务器的 http 发布请求

> ID：13730955
> 
> 赞同：0
> 
> 时间：2012-12-05T19:30:54.400
> 
> 标签：c#, c++, qt, restsharp, blackberry-cascades

我有在 C#、Windows Phone 7、Silverlight 中执行此操作的示例代码，并且我正在尝试找到如何在 C++ Qt 中执行等效操作（我正在使用 Blackberry 10 Beta 3 SDK）。我可以使用`QNetworkAccessManager`吗？或者有更好的办法吗？如果可以的话，我将不胜感激有关如何执行此操作的一些帮助以及一些示例代码。这是示例 C# 代码：

```
var request = new RestRequest(url, Method.POST);

request.AddParamater("example", "example");
request.AddParamater("example2", "example2");

request.AddFile("file", fileData, filename, "image/pjpeg");

RestSharp.RestClient restClient = new RestClient();
restClient.ExecuteAsync(request, (response) =>
{
   if (response.StatusCode == HttpStatusCode.OK)
   {
       //upload successful
   }
   else
   {
       //error occured durring upload
   }
}); 
```

* * *

这是我尝试过的东西：

```
// postVars is a QByteArray that contains a query string of the arguments 
// being passed in then I pass it in to my prepareFileUploadRequest file, 
// which appends the data for   uploading a file.

void Utils::prepareFileUploadRequest(QMap<QString, QString> *d,
        QNetworkRequest &request, QByteArray &postVars, QString path,
        QString scriptName, QString filename,
        QString stockNum)
    {

        request.setUrl(QUrl(Utils::ApiUrl));

        postVars.append("Content-type: multipart/form-data, ");
            postVars.append("boundary='---';\r\n\r\n");
        postVars.append("---\r\n");
        postVars.append("Content-Disposition: form-data; name='file' );
            postVars.append("filename='examplePic.jpg'\r\n");
        postVars.append("Content-Type: image/jpg\r\n");
        postVars.append("Content-Transfer-Encoding: binary\r\n\r\n");

        QFile file(path);
        if (!file.open(QIODevice::ReadOnly)) {
            return;
        }

        postVars.append(file.readAll() + "\r\n");
        postVars.append('---');

        request.
                setRawHeader(QString("Content-Type").toAscii(),                   
                QString("multipart/form-data; boundary='---'").toAscii());

            request.
                setRawHeader(QString("Content-Length").toAscii(),            
                QString::number(postVars.length()).toAscii());

            QNetworkAccessManager *nam = new QNetworkAccessManager(this);
            connect(nam, SIGNAL(finished(QNetworkReply *)), 
                    this, SLOT(handleUpload(QNetworkReply *)));
            nam->post(request, postVars);
 } 
```

我在上面调用那个函数，然后我得到一个 xml 回复——它说我没有权限——而且它没有上传任何文件——所以这可能是使用的 php webservice 的问题，但它很难让我知道我是否采取了正确的方法，或者我是否做错了什么。}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:42:37.530

```
QString body = "" ;

const QUrl url("http://someurl.to/make/the/post" );
 QHttpMultiPart *multiPart = new QHttpMultiPart(QHttpMultiPart::FormDataType);
 QHttpPart textPartData;
 body = "" ;
 QTextStream(&body) << " this is your text to post with the file";
 textPartData.setHeader(QNetworkRequest::ContentTypeHeader, "application/json; charset=utf-8");
 textPartData.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant("form-data; name=\"data\""));
 textPartData.setBody(body.toAscii());

     for(int i=0; i< number_of_files_to_send ; i++){
             QHttpPart imagePart;
             QString header_body = "";
             QTextStream(&header_body) << "form-data; name=\"" << name_of_the_file << "\"; filename=\"" << name_of_the_file << ".jpg\"" ;
             imagePart.setHeader(QNetworkRequest::ContentDispositionHeader, QVariant(header_body));
             imagePart.setHeader(QNetworkRequest::ContentTypeHeader, QVariant("image/jpeg"));

             //prepare file for upload
             QString filepath;
             QTextStream(&filepath) << FunkyPigeonBlackberry::getInstance()->dataModelProductDetails()->custom_image(i).value("cut_image").toString();

             // pack the new file
             QFile *file = new QFile(filepath);
             file->open(QIODevice::ReadOnly);
             imagePart.setBodyDevice(file);
             file->setParent(multiPart); // we cannot delete the file now, so delete it with the multiPart
             multiPart->append(imagePart);
     }

 multiPart->append(textPartData);
 multiPart->append(textPartProductDetails);
 multiPart->append(textPartDataDelivery);

 QNetworkRequest request(url);

 QNetworkReply* reply = m_networkAccessManager->post(request, multiPart);
 connect(reply, SIGNAL(finished()), this, SLOT(onNetworkResponse())); 
```

# maven-2 - Maven2_Builder 与 Maven 项目生成器

> ID：13730957
> 
> 赞同：4
> 
> 时间：2012-12-05T19:31:01.427
> 
> 标签：maven-2, m2e

我继承了一个依赖[Maven 2](http://www.javaworld.com/javaworld/jw-12-2005/jw-1205-maven.html)来构建它的项目。通过项目的`Properties`> `Builders`我可以看到它有**两个**构建器，按以下顺序：

1.  Maven2_Builder
2.  Maven 项目生成器

我认为应该只有一个 Maven 构建器......

1.  为什么是两个？
2.  两者有什么关系？
3.  使用该`m2e`插件，我可以在任何给定时间通过项目的上下文菜单`Run As`>清理项目`6 Maven Clean`。这是否意味着 Eclipse 的`Project`>`Clean...`不再相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T14:23:56.470

看起来您正在将 Eclipse 与 M2E 一起使用。这些天工作得很好。

在一个人跑之前

```
mvn eclipse:eclipse 
```

这将生成典型的 Eclipse 配置文件。

这些天来，只需使用 Eclipse **Import as Maven Project**并创建所有必要的文件。

# java - 如何在我的 onClick 函数中正确设置 findViewById

> ID：13730959
> 
> 赞同：0
> 
> 时间：2012-12-05T19:31:05.960
> 
> 标签：java, android, android-layout

我的“findViewById”有问题，它发生在线路之间。

```
 new AlertDialog.Builder(DetailShareHoldingActivity.this).setTitle("Köp " + Portfolio.getPortfolio().getShareHolding(positionList).getName() +  " Aktier").setView(addView).setPositiveButton("Köp", new DialogInterface.OnClickListener() { 
```

和线

```
public void onClick(DialogInterface dialog, int whichButton) { 
```

如果我将线放在其他任何可以正常工作的地方，问题是我必须将线放在我拥有的地方，所以我不知道为什么它会抱怨？这是我的 OnclickListener

```
buyButton = (Button)findViewById(R.id.buyButton);
    buyButton.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
        EditText tempEditText;    
        final View addView = getLayoutInflater().inflate(R.layout.shop_exsisting_share, null);
        new AlertDialog.Builder(DetailShareHoldingActivity.this).setTitle("Köp " + Portfolio.getPortfolio().getShareHolding(positionList).getName() +  " Aktier").setView(addView).setPositiveButton("Köp", new DialogInterface.OnClickListener() {
            tempEditText = (EditText)findViewById(R.id.nrOfSharesInPortfolioEdit);//Complains on findViewById "Return type for the method is missing" and I have to have the code exactly here so that it is visible when the dialog is created and not when the button is pressed.
            tempEditText= (EditText) findViewById(R.id.nrOfSharesInPortfolioEdit);
            tempEditText.setText(Portfolio.getPortfolio().getShareHolding(positionList).getNrOfSharesInPortfolio());
            System.out.println(Portfolio.getPortfolio().getShareHolding(positionList).getNrOfSharesInPortfolio());
            tempEditText= (EditText) findViewById(R.id.currentCourseEdit);
            tempEditText.setText(Double.toString(Portfolio.getPortfolio().getShareHolding(positionList).getCurrentRate()));

            public void onClick(DialogInterface dialog, int whichButton) {
                System.out.println("Button pressed köp ");
            }
        }).setNegativeButton("Avbryt", null).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:35:38.860

是的，你当然有问题。您正在尝试在类定义中定义已经声明的变量......这是不允许的。

您的评论说：“*我必须将代码准确地放在此处，以便在创建对话框时可见，而不是在按下按钮时可见。* ”。这没有任何意义；你需要有你的代码在一个实际的方法。

将您的定义移到类定义之外并改为方法。

```
tempEditText = (EditText) addView.findViewById(R.id.nrOfSharesInPortfolioEdit);
tempEditText = (EditText) addView.findViewById(R.id.nrOfSharesInPortfolioEdit);
tempEditText.setText(Portfolio.getPortfolio().getShareHolding(positionList).getNrOfSharesInPortfolio());
System.out.println(Portfolio.getPortfolio().getShareHolding(positionList).getNrOfSharesInPortfolio());
tempEditText = (EditText) addView.findViewById(R.id.currentCourseEdit);
tempEditText.setText(Double.toString(Portfolio.getPortfolio().getShareHolding(positionList).getCurrentRate()));

new AlertDialog.Builder(DetailShareHoldingActivity.this)
    .setTitle("Köp " + Portfolio.getPortfolio().getShareHolding(positionList).getName() +  " Aktier")
    .setView(addView)
    .setPositiveButton("Köp", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            System.out.println("Button pressed köp ");
        }
    })
    .setNegativeButton("Avbryt", null)
    .show(); 
```

# apache - Java中mahout FP增长算法的generateTopKFrequentPatterns方法理解

> ID：13730965
> 
> 赞同：1
> 
> 时间：2012-12-05T19:31:28.047
> 
> 标签：apache, mahout

我是 Apache Mahout 的新手。我想了解为 Java 中的并行频繁模式挖掘（来自 Apache Mahout）提供的方法 generateTopKFrequentPatterns()。

该算法的命令行版本提供了两种运行模式，sequential 和 mapreduce。java方法总是在mapreduce上运行吗？还是因为我们使用了 mapreduce 库提供的 outputcollector？

如何使用 API 以分布式方式在多个 hadoop 集群上运行该算法？

方法定义如下：

```
 generateTopKFrequentPatterns(Iterator<Pair<List<A>,Long>> transactionStream,
                                           Collection<Pair<A,Long>> frequencyList,
                                           long minSupport,
                                           int k,
                                           Collection<A> returnableFeatures,
                                           org.apache.hadoop.mapred.OutputCollector<A,List<Pair<List<A>,Long>>> output,
                                           StatusUpdater updater)
                                    throws IOException 
```

对此的任何帮助将不胜感激。

问候， psun

# php - php变量插入数据库

> ID：13730966
> 
> 赞同：4
> 
> 时间：2012-12-05T19:31:34.130
> 
> 标签：php, mysql

我试图将一些 php 变量插入到 Mysql 数据库中，但没有成功。连接工作没问题，变量都有值，所以我必须是我的插入语句。我一直在浏览网页并尝试了很多替代方法，但都没有运气。这是代码：

```
<?php

$connection = mysql_connect('localhost', 'username', 'password') or die (mysql_error());
mysql_select_db('table', $connection) or die (mysql_error());

$message = $_POST["Body"];

$data = explode("*", $message);

$id = '';
$phone = $_POST["From"];
$location = $data[0];
$speed = $data[1];
$direction = $data[2];
$comment = $data[3];

$query = mysql_query("INSERT INTO user_data (id, phone, location, speed, direction, comment) VALUES ('$id', '$phone', '$location', '$speed', '$direction', '$comment')"); 
```

我已经测试以确保变量包含数据，并且我还测试了所有连接，除此之外一切正常！任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:55:05.593

尝试将变量名包含在 {} 中，即

```
'{$speed}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:56:23.437

如果 id 是一个自动编号字段，则不应在插入中传递 '' - 只需删除该字段并让您的数据库处理它。如果它不是自动编号，则 '' 可能不是有效的键值。

此外，如果您的任何字段是数字而非文本，则它们不应有单引号。我的猜测是速度应该是一个数字，并且不应该在您的查询中使用引号。

但是，请查看对您问题的评论——这是错误的代码，评论解释了原因。

# c - While(1) 首先工作四次，该函数被调用，然后变为无限。（C）

> ID：13730967
> 
> 赞同：0
> 
> 时间：2012-12-05T19:31:35.930
> 
> 标签：c, loops, while-loop, infinite

我有一个 tic tac toe board ，我正在为好玩而工作，但我遇到了一个问题。基本上我随机生成两个 x,y 坐标，然后通过 while 循环运行它们。如果坐标位置没有被标记，那么它会标记点。否则它将继续运行并生成一对新坐标。这似乎在调用该函数的前四次有效，但随后对该函数的任何使用都会导致它失控。希望有人能指出我正确的方向，并告诉我某处的逻辑是否不正确。建设性的批评很棒。

在此先感谢，这是 X 的移动功能的代码（O 的代码几乎相同）：

```
void Xmove(struct config *cp) {
    int ran1, ran2;
    srand((unsigned) time(NULL));
    ran1 = rand() % 3;
    ran2 = rand() % 3;

    if(cp->grid[1][1] == ' ') {
        cp->grid[1][1] = 'X';
        printGrid(cp);
        return;
    }

    while(ran1 == 1 && ran2 == 1) {
        ran1 = (rand() % 3);
        ran2 = (rand() % 3);
    }

    int looper = 1;

    while (looper) {
        if(cp->grid[ran1][ran2] != 'O' && cp->grid[ran1][ran2] != 'X') {
            cp->grid[ran1][ran2] = 'X';
            printGrid(cp);
            looper = 0;
        }

        ran1 = (rand() % 3);
        ran2 = (rand() % 3);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:13:47.977

回到关于你的无限循环和你的代码的原始问题，你不能仅仅假设找到一个空槽并填充它就使循环中断。如果没有可用的插槽，您甚至不应该*进入*循环。事实上，如果没有要填充的开放图块，您甚至根本不应该调用任何一个 Move() 函数，老实说，它应该作为配置结构的递减计数器来维护。

但除此之外，可以通过多种方式检测剩余的开放瓷砖。下面介绍的一个不需要对配置表等进行其他修改。您可以通过构建一个可行的图块列表并从中选择一个随机条目来轻松完成*此*操作*。*以下内容将替换您最初检查中心插槽是否打开后的*所有内容。*

 **```
// build a table of open tiles
int ar[9] = {0};
int n=0,i=0,j=0;
for (i=0;i<3;++i)
  for (j=0;j<3;++j)
    if (cp->grid[i][j] != 'O' && cp->grid[i][j] != 'X')
      ar[n++] = i*3+j;

// now you have the list of available tiles 
//  in `ar[0..n-1]`. choose ONE via `rand()`
if (n > 0)
{
    n = ar[rand()%n];
    cp->grid[n/3][n%3] = 'X'; // or 'O'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:02:12.020

我会完全消除随机循环，而不是每次我需要移动时，我都会生成数字 0-9 的随机排列，并用它来走棋盘，寻找放置 X 或 O 的位置如所须。像这样的东西：

```
 int randperm[9], i = 0;     

    /* fill the array randperm with the numbers 0 through 8 in 
     * order
     */
    for(i = 0; i != 9; i++)
        randperm[i] = i;

    /* Now mix the numbers up, so that the array ends up in
     * some "random" order: that is, generate a permutation
     * of the digits 0-8.
     */
    for(i = 8; i > 0; i--) 
    {
        int j = rand() % (i+1);
        int temp = randperm[j];
        randperm[j] = randperm[i];
        randperm[i] = temp;
    }

    /* Now try to find a spot. We will use our randperm array to
     * determine which cell to look at. Remember that the array
     * contains the numbers 0-8 in some random order.
     */
    for(i = 0; i != 9; i++)
    {       
        /* We split a number from 0-8 into two numbers (x and y), 
         * each from 0 to 2:
         *
         * 0 -> 0 0, 1 -> 1 0, 2 -> 2 0,
         * 3 -> 0 1, 4 -> 1 1, 5 -> 2 1,
         * 6 -> 0 2, 7 -> 1 2, 8 -> 2 2
         *
         * notice that (y * 3) + x = randperm[i]
         */
        int x = randperm[i] % 3;
        int y = randperm[i] / 3;

        /* check if the spot at grid[x][y] is available, if it is
         * take it and return. 
         */
    }

    /* If we get here there's no spot to put an X or an O... board is full */ 
```**

# java - 我应该使用什么过滤器通过使用 apache-MINA 发送 ArrayList

> ID：13730969
> 
> 赞同：0
> 
> 时间：2012-12-05T19:31:42.307
> 
> 标签：java, sockets, network-programming, nio, apache-mina

我有带有 apache-mina 框架的服务器和客户端应用程序。我需要从服务器向客户端发送一个大型数组列表（包含 10000 个自定义对象）。我首先想到使用 GSON 字符串来传递数组列表，但我认为，创建那种巨大的字符串并发送它不是正确的方法。

在我的客户端应用程序中，我编写了一个连接方法：

```
public void connect() throws InterruptedException 
{

    Thread t = new Thread(new Runnable() 
    {
        @Override
        public void run() 
        {

            connector = new NioSocketConnector();
            connector.getSessionConfig().setReadBufferSize(1024);
            TextLineCodecFactory t = new TextLineCodecFactory(Charset.forName("UTF-8"));
            t.setEncoderMaxLineLength(100000);
            t.setDecoderMaxLineLength(100000);
            connector.getFilterChain().addLast("logger", new LoggingFilter());
            connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(t));

            connector.setHandler(handler);
            ConnectFuture future = connector.connect(new InetSocketAddress("localhost", PORT));
            future.awaitUninterruptibly();

            if (!future.isConnected()) 
            {
                return;
            }

            IoSession session = future.getSession();
            session.getConfig().setUseReadOperation(true);
            session.getCloseFuture().awaitUninterruptibly();

            connector.dispose();
        }
    });
    t.start();
    Thread.sleep(1000);
} 
```

我应该使用什么过滤器来发送对象或容器而不将它们转换为字符串？是关于 BufferedWriteFilter 还是 WriteRequestFilter ？如果是这样，我该如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:56:07.973

我找到了答案。

通过在客户端和服务器端使用 ObjectSerializationCodecFactory，我可以传递自定义对象和集合。

```
 ObjectSerializationCodecFactory oscf = new ObjectSerializationCodecFactory();
  oscf.setDecoderMaxObjectSize(1048576);
  connector.getFilterChain().addLast("codec", new ProtocolCodecFilter(oscf) 
```

# amazon-s3 - facebook/twitter 用户图像上传到 S3 上的图像无效

> ID：13730976
> 
> 赞同：0
> 
> 时间：2012-12-05T19:32:11.270
> 
> 标签：amazon-s3, ruby-on-rails-3.2, carrierwave, image-uploading, fog

我正在尝试将刚刚在我的应用程序中注册的用户在 facebook 或 twitter 上的现有图像上传到 amazon s3，但是一些验证不允许我保存用户对象，抛出：`Image is invalid.`我认为那是我的 extension_white_list但我删除了它，它一直在说`Image is invalid.`

*   这不是错误，我认为这只是来自carrierwave 验证的消息，即使图像url 字符串是正确的。

头像上传者

```
# encoding: utf-8

class AvatarUploader < CarrierWave::Uploader::Base

  include CarrierWaveDirect::Uploader

  include CarrierWave::RMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  include CarrierWave::MimeTypes
  process :set_content_type

  def store_dir
    "avatar/#{model.id}"
  end

  version :thumb do
    process resize_to_fill: [50, 50]
  end

  # def extension_white_list
  #   %w(jpg jpeg gif png bmp)
  # end
end 
```

创建用户：

```
...
    new_user = User.create( :name => auth['info']['name'], 
                     :email => User.email_from_auth(auth) )
    auth_image_url = Authentication.larger_image(auth) # a string of user image url from social network authentication data. ie: http://a0.twimg.com/profile_images/1255111511/skyline.jpg
    unless auth_image_url.blank?
      new_user.remote_image_url = auth_image_url
      new_user.save
    end
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:58:14.897

固定的！该错误与carrierwave无关，只是在上传图像时该对象在数据库中不存在，首先我保存新用户然后：

```
after_create :upload_image_from_auth

def upload_image_from_auth
  auth = self.authentications.first
  unless auth.nil?
    self.remote_image_url = auth.larger_image
    self.save
  end   
end 
```

# jquery - jQuery限制特殊字符和限制字段数

> ID：13730977
> 
> 赞同：0
> 
> 时间：2012-12-05T19:32:14.810
> 
> 标签：jquery

我正在尝试使用 jQuery 来限制所有输入字段的特殊字符（除了 email ），并且还限制了 ID 允许的字符数。

例如，ID为“middleinitial”的输入字段只允许一个字符，并且该字符必须是字母数字，其中ID为“firstname”的字段最多允许50个字符，并且必须是字母和字段ID“ zip" 必须是数字，并且只允许 5 个字符。

我找到了不再支持的 jQuery Alphanumeric 插件和 Trey Hunner 在 stackoverflow 上的替换（我知道其他帖子），但我没有找到足够的文档来实现，因为我是 jQuery 的新手。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:18:03.110

我决定在 HTML 中硬编码“maxlength”并使用 Trey Hunner 对字母数字 jQuery 插件的更新。我不得不寻找一些文档，所以我添加了一个 jsfiddle 来帮助遇到同样问题的人：

[http://jsfiddle.net/QX76h/3/](http://jsfiddle.net/QX76h/3/)

[http://treyhunner.com/2010/10/replacement-for-jquery-alphanumeric-plugin/](http://treyhunner.com/2010/10/replacement-for-jquery-alphanumeric-plugin/)

```
(function ($) {
    jQuery.fn.alphanumeric = function(r) {
        alphanumericHelper(this, r, true, true);
    };
    jQuery.fn.numeric = function(r) {
        alphanumericHelper(this, r, false, true);
    };
    jQuery.fn.alpha = function(r) {
        alphanumericHelper(this, r, true, false);
    };
    var alphanumericHelper = function(obj, restraints, alpha, numeric) {
        var regex = "";
        if (numeric)
            regex += "0-9";
        if (alpha) {
            if (restraints == undefined || !restraints.allcaps)
                regex += "a-z";
            if (restraints == undefined || !restraints.nocaps)
                regex += "A-Z";
        }
        if (restraints != undefined && restraints.allow != undefined)
            regex += RegExp.escape(restraints.allow);

        $(obj).regexRestrict(RegExp("[^"+regex+"]", "g"))
    };
})(jQuery);

/*
 * Function created by Colin Snover in response to an article by Simon Willison
 * on Regular Expression escaping in JavaScript:
 * http://simonwillison.net/2006/Jan/20/escape/
 */
RegExp.escape = function(text) {
    return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
};

/*
 * Every time the form field is changed, sanitize its contents with the given
 * function to only allow input of a certain form.
 */
(function ($) {
    var inputEvents = "input";
    if (!("oninput" in document || "oninput" in $("<input>")[0])) {
        inputEvents += " keypress keyup";
    }

    jQuery.fn.restrict = function(sanitizationFunc) {
        $(this).bind(inputEvents, function(e) {
            var val = $(this).val();
            var sanitizedVal = sanitizationFunc(val);
            if (val != sanitizedVal) {
                $(this).val(sanitizedVal);
            }
        });
    };

    /*
     * Every time the form field is changed, modify its contents by eliminating
     * matches for the given regular expression within the field.
     */
    jQuery.fn.regexRestrict = function(regex){
        var sanitize = function(text) {
            return text.replace(regex, '');
        };
        $(this).restrict(sanitize);
    }
})(jQuery); 
```

# html - 在标题 ( 中强制换行 ( )

> ID：13730982
> 
> 赞同：49
> 
> 时间：2012-12-05T19:32:29.957
> 
> 标签：html, header, markdown, line-breaks

我正在尝试`<h1>`在 Markdown 中创建一个两行代码，类似于：

```
<h1>Title<br/>byline</h1> 
```

Markdown 文档说：

> 当您确实想`<br />`使用 Markdown 插入中断标记时，请以两个或更多空格结束一行，然后键入 return。

不幸的是，这似乎只适用于段落——如果我尝试使用`<h1>`（点·表示空格）：

```
#·Title··
byline 
```

尾随空格被忽略，我得到：

```
<h1>Title</h1>

<p>byline</p> 
```

谁能告诉我一个解决方法？

PS 我在命令行中使用 vanilla Markdown 1.0.1。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-05T19:37:20.347

原来答案只是“使用`<br/>`”。

```
# Title <br/> byline 
```

生产

```
<h1>Title <br/> byline</h1> 
```

****捂脸****

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2017-08-15T06:46:57.560

你也可以`double space`在行尾做。例如，该文本出现在同一行，即使我已将其写在下一行。
这出现在新行上。

问题是后面有2个空格`next line..`。（将这两个点视为空格）

希望这可以帮助。这似乎也比`</BR>`.

参考： http: [//markdown-guide.readthedocs.io/en/latest/basics.html](http://markdown-guide.readthedocs.io/en/latest/basics.html)

# ios - -[UIApplication setStatusBarHidden:withAnimation] 不会为 @"statusBarHidden" 键触发 KVO 通知

> ID：13730984
> 
> 赞同：6
> 
> 时间：2012-12-05T19:32:33.183
> 
> 标签：ios, uikit

我的根视图控制器中有代码，它观察 的`@"statusBarHidden"`属性`-[UIApplication sharedApplication]`并调整其视图的大小作为响应。

当我这样做时，会触发一个 KVO 通知：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES] 
```

但是当我这样做时，不会触发 KVO 通知：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide] 
```

当状态栏重新出现时，我需要调整视图的大小，但我使用的是调用后一种方法的第三方 API。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T08:21:05.350

## 背景

至于**为什么**您会在通知触发中看到这种差异，这可能与 KVO 的工作方式有关。你观察一个*属性*的值。在这种情况下，`statusBarHidden`。但是，为了获得通知，该属性必须通过为其存在的设置器进行更改。

通知不会神奇地发生，因此需要将其有效地编码为 setter 的副作用。（这通常在对属性进行编码时自动为您完成）但是，具有该属性的类也可以选择直接修改*ivar*。在这种情况下，`UIApplication`有/有一个内部结构`_applicationFlags`，其中包含

```
 unsigned int statusBarHidden:1; 
```

因此，完全有可能`setStatusBarHidden:withAnimation:`只是直接修改底层数据成员，这绕过了回调观察者所需的设置器。

## 解决方案？

就您的解决方法而言，您没有提及此应用程序是否适用于应用程序商店（可能是出于个人/爱好目的，可能是企业应用程序，也可能是越狱应用程序）。

*您可能*会选择的一件事是使用[方法调配](http://darkdust.net/writings/objective-c/method-swizzling)`setStatusBarHidden:withAnimation:`来用您自己的方法替换默认实现。您自己的实现可以简单地调用`setStatusBarHidden:`，然后重新启用 KVO。或者，如果您想保留动画，您可以使用 GCD 安排在完成动画`setStatusBarHidden:`所需的时间之后运行。`setStatusBarHidden:withAnimation:`这样，您仍然可以获得动画，并且还可以通过调用来触发 KVO `setStatusBarHidden:`。

我不清楚 App Store 应用程序中是否总是拒绝方法调配。我认为是（至少，在 iOS 框架中混合方法时），但[据此，它要么是允许的，要么可以通过](https://stackoverflow.com/q/7720947/119114).

下一个问题是，*“如果方法调配真的是 Apple 希望你避免的事情，尽管它[在公共 API](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)中，有没有办法解决这个问题？”*

除非[我链接到的 Stack Overflow 问题](https://stackoverflow.com/q/7720947/119114)中的人在撒谎，否则它看起来确实通过了审查（至少有时是这样）。所以，也许它没有以自动化的方式进行测试。也许它有时会被人类测试人员*视觉*识别，他们认为标准功能的工作方式不同，他们推断一定是方法混搭的结果。在这种情况下，您实际上并不想使用它来更改状态栏 UI 行为，只是为了锁定通知，因此不应该打扰他们。

或者，他们可能正在搜索已知 iOS API 的选择器（与 swizzling 一起使用）。如果是这种情况，从字符串构建的选择器很容易被混淆，[以避免检测](https://stackoverflow.com/a/2842873/119114)。

无论如何，只是一些选择......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T19:22:06.387

我找到了一个解决方案：

*   子类 UIApplication 让我们说 MyUIApplication
*   覆盖`setStatusBarHidden:withAnimation`调用 super 并在调用时发送 NSNotification
*   将 main.m 中的行更改为`return UIApplicationMain(argc, argv, @"MyUIApplication", NSStringFromClass([MyAppDelegate class]));`

当您设置状态栏隐藏状态时，您将收到您发送的自定义通知

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T18:10:49.367

根据 Or Arbel 的回答，我编写了这个类，它会发送通知以方便您使用。

[https://gist.github.com/hfossli/6767765](https://gist.github.com/hfossli/6767765)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T19:57:53.607

您可能会`frame`改为观察应用程序的主窗口（或其子视图之一？），或覆盖某些视图的`layoutSubviews`方法。

# c# - 从 .NET 中的数据库中提取 varbinary 会导致 IndexOutOfRangeException

> ID：13730988
> 
> 赞同：2
> 
> 时间：2012-12-05T19:32:40.630
> 
> 标签：c#, .net, sql-server, vb.net, tsql

我有以下情况，我正在尝试恢复数据库（SQL Server）中被意外删除的一些表（连同备份）。我重新创建了一个表，其中一列是`varbinary(MAX)`（它可能是别的东西）。当我尝试使用下面的代码行在 .NET 中提取数据时，我`IndexOutOfRangeException`在循环中得到了一条：

```
Dim resultReader As SqlDataReader = myComm.ExecuteReader
    Dim previewBytes As Byte() = Nothing
    While resultReader.Read()
        previewBytes = DirectCast(resultReader.Item("preview"), Byte())
    End While 
```

谁能告诉我如何解决这个问题？

编辑：为了清楚起见，下面是 C# 中的代码：

```
SqlDataReader resultReader = myComm.ExecuteReader;
    byte[] previewBytes = null;
    while (resultReader.Read()) {
        previewBytes = (byte[])resultReader.Item("preview");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:53:41.227

好吧，这不会在 C# 中编译，但此方法适用于我拥有的其他应用程序（在 C# 中也有示例）：

```
byte[] previewBytes = (byte[])resultReader["preview"]; 
```

# html - 如何加入/连接路径的末端？（HTML 画布）

> ID：13730991
> 
> 赞同：2
> 
> 时间：2012-12-05T19:32:54.170
> 
> 标签：html, html5-canvas

我有一个包含两个弧的路径，第一个弧被创建，当第二个弧被创建时，它们会自动连接/连接，因为它们包含在同一路径中，但它们只在一端连接，在另一端有没什么，我怎么告诉它在另一端也加入？

可以在这里找到工作示例（虽然它实际上包含 4 个弧，但每个路径有 2 个）：http: [//jsfiddle.net/QjLT2/](http://jsfiddle.net/QjLT2/)

![在此处输入图像描述](../Images/13a7c36fca359ae44f563277be67542d.png)

```
var ctx = document.getElementById("display").getContext('2d');

ctx.beginPath();
ctx.arc(100, 100, 20, Math.PI/2, 0.0, true);
ctx.arc(100, 100, 50, 0.2, Math.PI/2, false);
//ctx.lineTo(100, 100+17);

ctx.strokeStyle = 'blue';
ctx.lineWidth = 5;
ctx.stroke();
ctx.closePath();

ctx.beginPath();
ctx.arc(200, 200, 20, Math.PI/1.5, 0.0, true);
ctx.arc(200, 200, 50, 0.0, Math.PI/1.5, false);
//ctx.lineTo(200, 200+17);

ctx.strokeStyle = 'blue';
ctx.lineWidth = 5;
ctx.stroke();
ctx.closePath();
​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:57:04.817

见这里：http: [//jsfiddle.net/QjLT2/6/](http://jsfiddle.net/QjLT2/6/)

1）您不需要设置`strokeStyle`或`lineWidth`多次设置，除非您实际上正在更改值。这样做实际上会降低性能，因为上下文具有它跟踪的“状态”概念。

2）如果您想要完成的路径被描边，您需要在调用`closePath`之前调用。`stroke`

```
var ctx = document.getElementById("display").getContext('2d');

ctx.strokeStyle = 'blue';
ctx.lineWidth = 5;

ctx.beginPath();
ctx.arc(100, 100, 20, Math.PI/2, 0.0, true);
ctx.arc(100, 100, 50, 0.0, Math.PI/2, false);
ctx.closePath();

ctx.stroke();

ctx.beginPath();
ctx.arc(200, 200, 20, Math.PI/1.5, 0.0, true);
ctx.arc(200, 200, 50, 0.0, Math.PI/1.5, false);
ctx.closePath();

ctx.stroke();​ 
```

# php - 防止在 PHP 中滥用文件上传

> ID：13730992
> 
> 赞同：1
> 
> 时间：2012-12-05T19:32:55.913
> 
> 标签：php, web-applications, file-upload

> **可能重复：**
> [PHP 图像上传安全检查表](https://stackoverflow.com/questions/4166762/php-image-upload-security-check-list)

我正在我的网站上设置文件上传表单，用户可以在其中上传图片。为了安全起见，我在重命名文件和存储之前检查图像大小和 mime 类型。

我担心的是如何防止用户不断上传不同的文件并滥用我的服务器。有没有办法防止这种情况？我正在考虑跟踪用户的 IP（通过 $_SERVER["REMOTE_ADDR"] 和 $_SERVER["HTTP_X_FORWARDED_FOR"]），每次上传都有一个时间戳，并将上传限制为每小时 X。任何反馈或建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:35:47.717

确实，有人在上面指出 $_FILES[x]['type'] 可以很容易地任意更改。确保**您**从不重命名任何内容`.php`或任何其他已解析/执行的文件，例如`.shtml`... 避免这种情况的一种方法是，当您将图像回传给用户时，*始终*使用单个 php 脚本将其返回并使用类似`readfile()`这样的内容*永远不会*被解释。此外，如果您只接受图像，则可以使用简单的方法`getimagesize()`来*帮助*验证它是真实图像。但再一次，请注意，确保用户上传的内容*永远不会*被执行，特别是通过上传，然后通过他们的网络浏览器访问上传的文件。我只是在说明一点，我可以想象有人可能会花费足够的时间来制作一个有效的 JPEG 文件，虽然它会解析通过，但`getimagesize()`如果执行*为* `.php`. 这是一个很长的镜头，但你必须为任何事情做好准备。:)

关于其他类型的滥用，您可以使用简单的过滤器，例如每个 IP 每小时/天仅获取 X 字节或总上传量（或两者兼而有之）。如果他们*超过*了这个限制，那么使用一个非常可靠的验证码系统，比如 reCAPTCHA。这样一来，您就*不会*错过合法的请求，并且滥用应该是最低限度的，而不是强制每张图片上传都经过验证码。

此外，请记住不要**优先**于 X-FORWARDED-FOR。我实际上见过这样的代码：

```
if(isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { 
  $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
} else { 
  $ip = $_SERVER['REMOTE_ADDR'];
} 
```

**这是极其错误**的。X-FORWARDED-FOR*可以*由转发代理服务器发送，如果它愿意的话。它也可以由任何东西发送，以欺骗傻瓜认为他们的 IP 实际上不是。

只要您将 REMOTE_ADDR 与 HTTP_X_FORWARED_FOR 结合使用（并且从不信任 HTTP_X_FORWARDED_FOR，仅将其用作辅助参考），.. 实际 IP 欺骗的可能性几乎为零。

# html - 相同样式的输入和选择元素上的不同填充左

> ID：13730999
> 
> 赞同：0
> 
> 时间：2012-12-05T19:33:16.183
> 
> 标签：html, css, padding

我想知道，为什么 HTML select 标记的 padding-left 比 input 标记大，尽管两者都应用了相同的样式？

这可以在 Firefox 17、Chrome 23、IE 8 和 IE 9 中重现。只有 Opera 显示两个元素具有相同的 padding-left。

使用重置样式表时也会出现同样的问题。输入和选择的边距和内边距为 0，没有边框，使用 box-sizing:border-box。

这是火狐的截图：

![这是火狐的截图](../Images/04db7c74c9c0d9fd9e96eb063b8252d8.png) .

还有一个代码示例（没有表单操作等）：

```
<!doctype html>
<html>
<head>
    <title>input and select - padding-left</title>
    <style>
    * {
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box; 
    }

    input, select {
        width: 150px;
        padding: 0;
        margin: 0;
        border: none;
        height: 30px;
        font-size: 16px;
    }

    body {
        background-color: #007;
        font-size: 36px;
    }

    div {
        margin-left: auto;
        margin-right: auto;
        width: 140px;
    }
    </style>
</head>
<body>
    <form>
        <div>
            <input value="Hello input" /><br/>
            <select size="1">
                <option>Hello select</option>
            </select>
        </div>
    </form>
</body> 
```

因为 Opera 会根据需要显示所有内容，所以如果我为 padding-left 分配不同的值，它会在 Opera 中看起来不对齐。因此，我希望有另一种解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T19:52:22.410

我还没有检查这个，但你可以尝试使`line-height`in`input`和`select`高度相同（所以 30px）。