# StackOverflow 问答 13601000-13601999

# android - 如何删除对孩子父母的看法？安卓

> ID：13601005
> 
> 赞同：7
> 
> 时间：2012-11-28T08:42:38.500
> 
> 标签：android, android-alertdialog

所以我有一个按钮，当它被点击时会显示一个警告对话框。我在活动的 onCreate 方法中为警报对话框创建视图。代码就在这里：

```
 LayoutInflater factory = LayoutInflater.from(this);
    view = factory.inflate(R.layout.grade_result, null); 
```

当我第一次按下按钮时，对话框以我想要的方式显示，但是当我第二次按下它时，它会抛出这个异常。

11-28 00:35:58.066：E/AndroidRuntime(30348)：原因：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

我在按下按钮时显示 AlertDialog 的方法的代码就在这里：

```
public void details(View v){
    final AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setView(view);
    alert.setMessage("Details About Your Grades")
    .setCancelable(false)
    .setPositiveButton("Continue", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id){
            dialog.cancel();

        }
    });
    alert.show(); 
```

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-18T13:50:46.707

膨胀应该在 AlertDialog 的 Builder 中设置的视图对我有用：

```
Button mButton = (Button) findViewById(R.id.my_button);
mButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // inflating view out of the onClick() method does not work
            LayoutInflater mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            final ViewGroup viewGroup= (ViewGroup) mInflater.inflate(R.layout.my_view, null);

            Dialog alertDialog = new AlertDialog.Builder(getActivity())
                    .setTitle(R.string.my_title)
                    .setView(viewGroup)
                    .setPositiveButton(R.string.ok, new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            dialog.dismiss();
                        }
                    }).create();
            alertDialog.show();
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T13:18:21.077

我在警报对话框中遇到了类似的问题。第一次我夸大了一个视图，第二次我想显示一条消息。如果您显示一次警报对话框，那么您会膨胀视图并缓存该对话框。如果您第二次显示它，则会收到错误 IllegalStateException:"call removeView() on child's parent first"

我通过删除在第一次单击时膨胀并在第二次单击时显示消息的视图来解决此问题。- 每次在膨胀或创建消息之前删除视图或消息。

```
alertDialogBuilder.setView(null).setMessage(null);
alertDialogBuilder.setView(yourView).setMessage(yourMessage); 
```

我修改了你的代码，它对我来说很好。

```
LayoutInflater factory = LayoutInflater.from(this);
mView = factory.inflate(R.layout.grade_result, null);

public void details(View v){
    final AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setView(null).setMessage(null);
    alert.setView(mView);
    alert.setMessage("Details About Your Grades")
    .setCancelable(false)
    .setPositiveButton("Continue", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id){
            dialog.cancel();

        }
    });
    alert.show(); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T11:50:54.077

用这个 ：

```
final AlertDialog.Builder alert = new AlertDialog.Builder(ProductsListAfterFilter.this);
alert.setTitle("Добавить продукт в корзину?");
alert.setMessage("Введите количество: ");

// Set an EditText view to get user input
final EditText input = new EditText(ProductsListAfterFilter.this);
alert.setView(input);

alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
public void onClick(DialogInterface dialog, int whichButton) {
        int value = 0 ;
    try {
            value = Integer.valueOf(input.getText().toString());
    }
    catch (Exception err){
            Toast.makeText(getApplicationContext(), "Введите число", 100).show();
    }
    //insertValue(value,st1,st2,st3,st4);
    Toast.makeText(getApplicationContext(), "value = "+value, 100).show();
    dialog.dismiss();
    dialog.cancel();
    }
});

alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
    // Canceled.
        dialog.cancel();
        dialog.dismiss();

    }
});

final AlertDialog alertd = alert.create();
alertd.show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T09:20:40.717

它表示您的“视图”已连接到父级。它发生在您调用 .setView(view) 时。如果我是对的 - alertDialog 类为您的视图提供父级。这是安卓的基础。ViewGroup 可能有很多子视图。我有类似的问题。所以，你可以试试这个 insinde onClick：

```
ViewGroup vGroup = view.getParent();
vGroup.removeView(view);
// And right after that - close dialog
dialog.dismiss(); 
```

对我有帮助，希望对你有帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T08:45:23.020

使用 alert.create(); 然后 alertd.dismiss(); 销毁对话框

```
 final AlertDialog.Builder alert = new AlertDialog.Builder(this);
        final AlertDialog alertd = alert.create();

        alert.setTitle("Title");
        alert.setMessage("Messaage");

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
              dialog.cancel();
              alertd.dismiss();
          }
        }); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-28T08:50:17.407

使用此代码

```
final AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setView(view);
alert.setMessage("Details About Your Grades")
.setCancelable(false)
.setPositiveButton("Continue", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int id) 
    {
        dialog.dismiss();
    }
});
AlertDialog alertdialog = alert.create();
alertdialog .show() 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-04-07T08:46:07.367

您可以在对话框中设置视图之前将 View 设置为 null。
像这样：

```
alert.setView(null);
alert.setView(view); 
```

在再次设置之前，它总是将视图设置为空。

# c# - 我需要在 EF 4.1 中切换到未生成的主键

> ID：13601007
> 
> 赞同：1
> 
> 时间：2012-11-28T08:42:47.543
> 
> 标签：c#, wcf, entity-framework

我正在尝试使用 Entity Framework 4.1 和 WCF 在 Internet 上同步两个数据库。我的目标数据库用于网站并生成自己的密钥。当我同步时，我想覆盖所有数据并保留源数据库中的密钥。

我已经发现了“DatabaseGeneratedOption.None”注释，但这似乎不起作用。我尝试使用流利的 API 方式添加它运行时，但这也不起作用。同步时，我使用单独的 DbContext 和现有数据库。

'DatabaseGeneratedOption.None' 仅在您重新初始化数据库时才有效吗？或者，当使用不同的上下文时，您可以在运行时从身份播种切换到无播种并返回吗？

有人可以清除这个吗？

谢谢！

# magento - 如何使用脚本在 magento 中创建商店或商店视图

> ID：13601009
> 
> 赞同：1
> 
> 时间：2012-11-28T08:42:55.093
> 
> 标签：magento

我想在`Magento`. 任何人都可以建议我如何在不使用的情况下做到这一点`Magento admin Gui`吗？表示使用脚本创建商店。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:52:43.793

尝试将 Magento API 与[SOAP](http://www.magentocommerce.com/api/soap/introduction.html)或[API REST](http://www.magentocommerce.com/api/rest/introduction.html)一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:54:26.737

你应该看起来更好，首先在谷歌搜索“magento create store programmatically”时点击：

如何在magento中以编程方式[在magento中创建站点、存储和查看](https://stackoverflow.com/questions/8309076/how-to-create-a-site-store-and-view-)

有你的答案。

# dos - 如何在dos中获取给定命令的输出的第一行

> ID：13601015
> 
> 赞同：6
> 
> 时间：2012-11-28T08:43:12.113
> 
> 标签：dos

我需要获取命令行输出的第一行而不是所有行，例如，如果我给

```
 C:\Temp> dir 
```

我只需要显示非常第一行，例如，

```
 11/15/2012  06:58 PM    <DIR>          . 
```

我怎样才能得到这个？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-28T09:08:37.987

获取给定命令第一行输出的一种方法是在 FOR 循环中执行该命令，然后在第一行之后跳出循环。

```
@ECHO OFF

SET COMMAND=dir
FOR /F "delims=" %%A IN ('%COMMAND%') DO (
    SET TEMPVAR=%%A
    GOTO :Print 
)

:Print
ECHO %TEMPVAR% 
```

# node.js - 如何使用 RequireJS 运行 jasmine-node 测试

> ID：13601016
> 
> 赞同：6
> 
> 时间：2012-11-28T08:43:12.597
> 
> 标签：node.js, requirejs, jasmine-node

如何使用 jasmine-node 和 RequireJS 正确运行 jasmine 测试？

我已经尝试过这样的事情，但不起作用（CoffeeScript）：

```
requirejs = require 'requirejs'
requirejs.config { baseUrl: __dirname + '/../' }

requirejs ['MyClasses', 'FooClass'], (MyClasses, FooClass) ->

  describe "someProp", ->
    it "should be true", ->
      expect(MyClasses.FooClass.someProp).toEqual true 
```

**0 秒内完成 0 次测试、0 次断言、0 次失败**

我的目标是使用 RequireJS、CoffeeScript 编写模块化类，并且类必须可以使用 jasmine-node（CI 服务器）进行测试。

请问我该怎么做？谢谢！

编辑：

我使用命令执行测试（在带有测试的目录中）：

```
jasmine-node ./ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:04:53.627

Jonathan Tran 是对的，这对我来说是文件名中的规范。

我有这个：

```
"scripts": {
   "install": "cake install",
   "test": "node_modules/jasmine-node/bin/jasmine-node --verbose --coffee --runWithRequireJs --captureExceptions spec"
}, 
```

在我的 package.json 中，我从项目内部安装了 jasmine-node`npm install jasmine-node`

最小的测试文件称为`RingBuffer.spec.coffee`

```
require ["disrasher"], (mod) ->

  describe "A test", ->
    it "should fail", ->
      expect(1).toEqual 0 
```

它目前实际上不起作用，因为我认为我没有正确地将项目与 require 联系起来。当它发生时，我会在这里发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T06:49:09.543

如果有人遇到这个问题，那么自从提出这个问题以来已经发生了很大变化。首先要检查的仍然是您将文件命名为`thing.spec.coffee`.

但是，如果您正在运行测试并且仍然看到输出“0 个测试”，则需要使用您的 requirejs 配置创建一个 JavaScript 文件。这*必须*是 JavaScript，而不是 CoffeeScript。

```
// requirejs-setup.js
requirejs = require('requirejs');
requirejs.config({ baseUrl: __dirname + '/../' }); 
```

然后告诉 jasmine 使用这个设置文件：

```
jasmine-node --coffee --requireJsSetup requirejs-setup.js ./ 
```

一件好事是您不需要在每个规范文件中包含 requirejs 配置。

我已经在节点 v12.16、jasmine-node v3.0.0 和 requirejs v2.3.6 上对此进行了测试。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-10T12:51:32.927

jasmine-node 和 require.js 似乎完全不兼容。也就是说，可以使用一些额外的代码在 node 中的 require.js 模块上运行 jasmine 测试。看看[https://github.com/geddski/amd-testing](https://github.com/geddski/amd-testing)看看如何。

# php - 用户成功登录时PHP更改发布目标

> ID：13601030
> 
> 赞同：0
> 
> 时间：2012-11-28T08:44:22.240
> 
> 标签：php, redirect, post, iframe, target

这是我的表单，它使用 login.php 来检查用户是否已注册等。

```
<form action="login.php" method="post" target="SHOW">
        <ul id="login">
            <li>    
                Username:<br />
                <input type="text" name="username"> 
            </li>
            <li>
                Password:<br />
                <input type="password" name="password">
            </li>
            <li>
                Submit:
                <br />
                <input type="submit" name="log in"> 
            </li>
            <li>
            <a href="../../register.php">Register</a></li>
        </ul>
      </form>
<iframe id="iframe" name="SHOW" scrolling="no"></iframe> 
```

我的困境源于我用来显示错误消息的 iframe 标签。如果用户已注册，我想将他重定向回 index.php，正如您在 PHP 末尾看到的那样 ---> header('Location: index.php');

问题是 iframe 不允许重定向。所以，我想将目标从 ---> target="SHOW" 更改为 target="_top" 或类似的东西。因此，用户在成功登录后会被重定向，而无需使用任何 JavaScript。

我未能完成此任务--> $href->removeAttribute('target'); $href->setAttribute("target", "_top");

这是login.php。

```
<?php 

include 'core/init.php';

if(empty($_POST) === false){
$username = $_POST['username'];
$password = $_POST['password']; 

if(empty($username) || empty($password) === true){
    $errors[] = 'You need to enter a username and password';        
    } else if (user_exists($username) === false){
        $errors[] = 'We can\'t find that username. Have you registered?';
        } else if (user_active($username) === false){
            $errors[] = 'You haven\'t activated your account!';
            } else {
                $login = login($username, $password);
                if($login === false){
                    $errors[] = 'That username/password combination is incorrect';
                    } else {
                        $_SESSION['user_id'] = $login;
                        $href->removeAttribute('target');
                        $href->setAttribute("target", "_top"); 
                        header('Location: index.php');
                        exit();
                        }
                }

                print_r($errors);
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:00:26.187

由于您正在向 iframe 发布，因此响应所采取的任何操作仅对 iframe 本身的上下文有效，这意味着执行常规 HTTP 重定向只会更改 iframe 的内容。

如果您想保留 iframe（我不建议这样做，而是将错误处理和登录都保留在显示表单的同一控制器/文件中），您可以在 iframe 响应中使用 javascript 进行重定向：

```
<script type="text/javascript">
    parent.location.href = 'http://www.bbc.co.uk/';
</script> 
```

不漂亮，但它有效。

# ios - Foodspotting 中的界面设计

> ID：13601033
> 
> 赞同：2
> 
> 时间：2012-11-28T08:44:37.407
> 
> 标签：ios, uitableview, uiscrollview

在应用程序 Foodspotting 上，您有一个包含两个元素的滚动视图：

1）图像。

2）它下面的一些信息。

像这样：

![在此处输入图像描述](../Images/43adec488c2bc1421b3903c0496d1215.png)

当您开始向下滚动时，行为不是自然的 a `UITableView`，或者至少我不理解它。下面的视图开始向上并与`UIImageView`上面重叠：

![在此处输入图像描述](../Images/83bd357685f8a73edae42c89a39a3eb3.png)

最后：

![在此处输入图像描述](../Images/a1b33d36b0ebb7ace61049fc6e6481a6.png)

**我试过的：**

1）使用前四个没有内容和不可见的单元格，最后一个`UIImageView`作为子视图`UITableView`

2) 与上面相同，但使用`UIImageView`根视图的 as subView 和`UITableView`.

3)在 UIScrollView 中混合 a和`UITableView`a 。`UIScrollView``UIImageView`

所以我的问题是，这是如何实现的？

* * *

**编辑 1.0**

如果有人想尝试，您可以在[此处](https://www.dropbox.com/sh/ytgbbyf1frfymws/b_P3ESfh9q)查看项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:13:26.163

看起来图像视图是表格的背景视图（因此它不会滚动），一个大的透明视图作为表格标题（可能带有第一个按钮，或者可能是透明单元格），然后是不透明单元格剩下的内容。

那个意大利调味饭太湿了。0星，更像米汤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:16:56.350

在我看来，底部`UIViewController`有一个`UIImageView`。

然后`UITableView`在其之上（分组表视图）具有透明背景。

然后将标题高度设置为几乎整个视图的高度。在标题底部附近有一个按钮（或任何其他按钮）。

您可以访问`scrollView:didScroll`以调整 UIImageView 在背景中的位置（看起来图像的中心点始终位于标题可见部分的一半。

```
bgImageView.center = CGPointMake(0, (bgImageView.frame.size.height - scrollView.offset.y) * 0.5); 
```

或类似的东西。

显然，图像视图不会比顶部移动得更远，所以你必须以某种方式抓住它。

# graphics - CGAL中的重新网格化方法

> ID：13601040
> 
> 赞同：0
> 
> 时间：2012-11-28T08:44:51.757
> 
> 标签：graphics, cgal

我有一个低质量的网格，我想重新网格化它但保持拓扑结构（只调整顶点位置，保持顶点大小，面不变）。在 CGAL 中是否有现有的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:28:48.887

CGAL中有一个[remesher](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Surface_mesher/Chapter_main.html)。但是，它将根据您要求的标准重新创建具有自己的顶点和面数的曲面。您可以通过编译 Surface_mesher 演示或使用预编译的 windows 演示（您需要[this](http://www.cgal.org/demo/4.1/surface_mesher.zip)和[this](http://www.cgal.org/demo/4.1/CGAL-demoDLLs.zip)）来尝试一下。

# java - 防止 JList 自动调整大小

> ID：13601047
> 
> 赞同：6
> 
> 时间：2012-11-28T08:45:11.480
> 
> 标签：java, swing, user-interface, jlist, preferredsize

我在 JScrollPane 中有一个 JList，它放在 JPanel (BorderLayout.CENTER) 中，并将其放在另一个 JPanel 的 BorderLayout.EAST 中（这个 JPanel 的 CENTER 包含另一个 JPanel），整个 JPanel 放在 JTabbedPane 内。最初，它看起来像这样： ![初始 JList GUI](../Images/7576a8629b76452ff7ea8a493eaa491e.png)

现在我将一些书添加到列表中：

![JList 里面有一些书](../Images/1f2a015f03ce11c822ea85eb56b72a6a.png)

如果我转到另一个选项卡并返回，则会发生这种情况：

![调整大小的 JList](../Images/b8831f4bbc1555cab9c5040fe04ef90f.png)

我不明白的是，包含 JList 的 JPanel 设置了最小和最大大小：

```
JPanel listPanel = new JPanel();
listPanel.setLayout(new BorderLayout());
listPanel.add(new JScrollPane(bookList), BorderLayout.CENTER);
listPanel.setMinimumSize(listPanel.getPreferredSize());
listPanel.setMaximumSize(listPanel.getPreferredSize());
checkOutPanel.add(listPanel, BorderLayout.EAST); 
```

如何防止 JList 自动调整大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:22:52.567

根据您尝试存档的内容，您可以使用[`JList#setPrototypeCellValue`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setPrototypeCellValue%28E%29)或[`JList#setFixedCellWidth`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setFixedCellWidth%28int%29). 这些将反馈到将影响滚动窗格的 PeferredScrollableViewportSize 方法

# ajax - 如何在分页中组织默认顺序？

> ID：13601050
> 
> 赞同：0
> 
> 时间：2012-11-28T08:45:15.717
> 
> 标签：ajax, ruby-on-rails-3, activerecord, will-paginate

我使用 will_paginate 和 ajax 排序并看到 railscasts.com。 [http://railscasts.com/episodes/240-search-sort-paginate-with-ajax](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)

我的分页收藏

```
@cars = Car.joins(:engine).includes(:engine).select('cars.*, engines.*').order(sort_column + " " + sort_direction).paginate(:page => params[:page], :per_page => 5) 
```

但是当我转到索引页面时，我跳出了错误。

```
ActiveRecord::StatementInvalid in Items#index 
```

SQLite3::SQLException：不明确的列名：名称：SELECT "cars"."id" AS t0_r0, "cars"."name" AS t0_r1, "cars"."model_id" AS t0_r2, "cars"."city_id" AS t0_r3, "cars"."created_at" AS t0_r4, "cars"."updated_at" AS t0_r5, "cars"."engine_id" AS t0_r6, "engines"."id" AS t1_r0, "engines"."name" AS t1_r1, "engines"."created_at" AS t1_r2, "engines"."updated_at" AS t1_r3 FROM "cars" INNER JOIN "engines" ON "engines"."id" = "cars"."engine_id" **ORDER BY name** asc限制 5 偏移量 0

但是当我转到已经排序的页面时，它对我有用。

我认为 SQL 中的默认顺序错误。

如何设置“cars.name”而不是“name”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:52:04.730

我找到了方法并设置了默认排序

```
private

 def sort_column
    Car.column_names.include?(params[:sort]) ? params[:sort] : "cars.name"
  end 
```

# actionscript-3 - Flash 事件执行顺序

> ID：13601068
> 
> 赞同：4
> 
> 时间：2012-11-28T08:46:02.520
> 
> 标签：actionscript-3, flash, events

查看下一个代码，告诉我您希望打印什么。然后运行它并检查实际发生的情况。

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class TestFlashEvents extends Sprite
    {
        private static const DUMMY_EVENT:String = "DummyEvent";
        private var dummyObjects:Vector.<DummyObject> = new Vector.<DummyObject>(100);
        public function TestFlashEvents()
        {
            for(var i:int = 0; i < dummyObjects.length; i++){
                dummyObjects[i] = new DummyObject(this);
                addEventListener(DUMMY_EVENT, dummyObjects[i].listener);
            }
            removeEventListener(DUMMY_EVENT, dummyObjects[41].listener);
            dispatchEvent(new Event(DUMMY_EVENT));
        }

        private var counter:int = 0;
        public function onGettingEvent(dummyObject:DummyObject):void{
            if(counter == 25){
                for(var i:int = 0; i < 50; i++){
                    removeEventListener(DUMMY_EVENT, dummyObjects[i].listener);
                    trace("Removing", dummyObjects[i].id);
                }
            }
            trace("Handeling event", counter, dummyObject.id);
            counter++;
        }
    }
}
import flash.events.Event;

class DummyObject
{
    private static var dummyObjectsCounter:int = 0;

    public var id:String;
    private var tester:TestFlashEvents;

    public function DummyObject(tester:TestFlashEvents)
    {
        this.tester = tester;
        id = "DummyObject " + dummyObjectsCounter;
        dummyObjectsCounter++;
    }

    public function listener(event:Event):void{
        tester.onGettingEvent(this);
    }
} 
```

该`removeEventListener`功能实际上不起作用。告诉我你怎么看。我还在[adobe](https://bugbase.adobe.com/index.cfm?event=bug&id=3372945)中打开了一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:35:34.980

此代码意味着 Adob​​e 在实际调用事件侦听器之前缓存事件侦听器列表。在一个对象上为一个特定事件设置两个侦听器是一种不寻常的行为，但如果发生这种情况，Adobe 假定应该在实际修改此列表之前调用所有侦听器。我实际上期待所有 99 位听众都被叫到。因此，这种行为甚至可以是设计使然，因为在处理单个事件时重新渲染事件侦听器列表会给 Flash 带来过重的负载，从而导致延迟过多。没有人想要滞后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:18:59.630

这可以通过优先处理事件侦听器来轻松解决。这不是 Flash 错误，它就像 Vesper 所说的缓存事件侦听器以防止延迟。

这是您的代码的更新版本，请在`addEventListener`调用中标记优先级。

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class TestFlashEvents extends Sprite
    {
        private var _this = this;
        private static const DUMMY_EVENT:String = "DummyEvent";
        private var dummyObjects:Vector.<DummyObject> = new Vector.<DummyObject>(100);
        public function TestFlashEvents()
        {
            for(var i:int = 0; i < dummyObjects.length; i++)
            {
                dummyObjects[i] = new DummyObject(this);
                addEventListener(DUMMY_EVENT, dummyObjects[i].listener, false, dummyObjects.length - i);
            }
            removeEventListener(DUMMY_EVENT, dummyObjects[41].listener);
            dispatchEvent(new Event(DUMMY_EVENT));
        }

        private var counter:int = 0;
        public function onGettingEvent(dummyObject:DummyObject):void
        {
            if (counter == 25)
            {
                for (var i:int = 0; i < 50; i++)
                {
                    removeEventListener(DUMMY_EVENT, dummyObjects[i].listener);
                    trace("Removing", dummyObjects[i].id);
                }
            }
            trace("Handeling event", counter, dummyObject.id);
            counter++;
        }
    }
}

import flash.events.Event;

class DummyObject
{
    private static var dummyObjectsCounter:int = 0;

    public var id:String;
    private var tester:TestFlashEvents;

    public function DummyObject(tester:TestFlashEvents)
    {
        this.tester = tester;
        id = "DummyObject " + dummyObjectsCounter;
        dummyObjectsCounter++;
    }

    public function listener(event:Event):void{
        tester.onGettingEvent(this);
    }
} 
```

# regex - 友好的 URL，带斜杠的参数

> ID：13601070
> 
> 赞同：0
> 
> 时间：2012-11-28T08:46:06.587
> 
> 标签：regex, .htaccess, friendly-url, url-encoding

我的 htaccess 文件中有以下规则：

```
RewriteRule ^product/(.*)/(.*)/([0-9]+)$   product_page.php?prod=$1&code=$3&lang=$2 [QSA] 
```

当我的产品名称中有 / 斜线 / 时 -

[http://www.mySite/product/namePart1/namePart2/_lang2/722](http://www.mySite/product/namePart1/namePart2/_lang2/722) 作品

但

[http://www.mySite/product/namePart1%2FnamePart2/_lang2/722](http://www.mySite/product/namePart1%2FnamePart2/_lang2/722) 不起作用

任何提示为什么？我认为将 / 转换为 %2F [使用 rawurlencode] 可以解决问题。但它会产生问题！

谢谢，

阿塔拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:54:47.613

我建议您创建某种产品名称的 slug。据我所知，它是 apache 中的一个设置，允许您在 url 中使用编码的斜杠。

这可能会对您有所帮助：
[http ://www.jampmark.com/web-scripting/5-solutions-to-url-encoded-slashes-problem-in-apache.html](http://www.jampmark.com/web-scripting/5-solutions-to-url-encoded-slashes-problem-in-apache.html)

你也可以轻松地创建一个 slug 做这样的事情

```
function slug($phrase, $maxLength = 255) {
    $result = strtolower($phrase);
    $result = preg_replace("/[^a-z0-9\s-]/", "", $result);
    $result = trim(preg_replace("/[\s-]+/", " ", $result));
    $result = trim(substr($result, 0, $maxLength));
    $result = preg_replace("/\s/", "-", $result);

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:09:19.217

我会采取简单而务实的方式，在您致电`%2F`后将其替换回斜线，如下所示：`rawurlencode()`

```
$nameencoded = rawurlencode($product_name);
$nameencoded = str_replace('%2F', '/', $nameencoded); 
```

# mysql - 通过消除表中的重复项来显示序列号（rownum）以及mysql中的数据？

> ID：13601071
> 
> 赞同：2
> 
> 时间：2012-11-28T08:46:07.777
> 
> 标签：mysql, sql, select, rownum

我有一个表，其中一列中包含重复数据。我想显示唯一数据以及 rownum 或序列号。我的表有字段 table1(tno,tname)，其中 tname 有重复值，我想显示唯一的“tname”数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:49:19.323

试试这个：

```
SET @auto:=0;
SELECT @auto:=@auto+1 rownum, tname 
FROM table1 GROUP BY tname 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:48:55.580

试试这个 ：

```
Select tname, tno
from table1
group by tname having count(*)=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:53:57.643

感谢您的所有贡献...我得到了答案。如果您得到比这更好的答案，请分享..

```
select @rownum:=@rownum+1 sno, a.tname FROM (SELECT DISTINCT tname from Table1) a, (SELECT @rownum:=0) r  limit 60 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T12:30:38.817

使用 UUID()

从 table1 中选择 UUID() 作为 uniqueID

# ios - 选定行复选标记颜色更改

> ID：13601076
> 
> 赞同：0
> 
> 时间：2012-11-28T08:46:26.453
> 
> 标签：ios, xcode, uitableview

我们有一个表格视图，选中的单元格用蓝色复选标记标记。问题是，最初当表格加载时，选定的单元格将有蓝色的复选标记，这就是我们需要的，如下图所示 ![在此处输入图像描述](../Images/b4e74a0a57fe9014cd12b002ab62a0f0.png)

现在当我们选择另一行时，选中的行复选标记变为白色，可能导致此问题的原因是什么？ ![在此处输入图像描述](../Images/b11b120928cb7596770ef79f1fb457aa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:54:56.307

```
[cell setSelectionStyle:UITableViewCellSelectionStyleNone]; 
```

如果在 Bellow `UITableView`Delegate Method 之前添加这个`return Cell;`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
} 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:02:13.427

当您选择另一行时，您可以使用表格的 -(void) deselectRowAtIndexPath 方法以编程方式取消选择前一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T11:16:07.100

只需根据需要设置 tableview 的色调颜色即可。

# actionscript-3 - 如何强制 NetStream 创建关键帧？

> ID：13601078
> 
> 赞同：2
> 
> 时间：2012-11-28T08:46:34.377
> 
> 标签：actionscript-3, flash, video-streaming, flv

我创建了一个工作正常的视频流录制应用程序，除了录制的 FLV 有点损坏。:) 如果我在 VLC 播放器中打开 FLV，一切都是绿色的，但在发生更改时会变得“干净”。尤其是在视频的开头是分手。（我用的是 Red5 1.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:58:13.160

对于预先录制的流，关键帧已经编码到文件中并且无法更改。如果您提供直播流，则需要在对直播流进行编码的应用程序（例如 Flash Media Live Encoder）中设置关键帧。

# c++ - 无法通过 WebSocket 发送二进制数据

> ID：13601082
> 
> 赞同：3
> 
> 时间：2012-11-28T08:46:49.603
> 
> 标签：c++, websocket, server-push

我正在开发一个查看器应用程序，其中服务器捕获图像，执行一些图像处理操作，这需要在 HTML5 画布上显示在客户端。我编写的服务器是 VC++ 并使用[http://www.codeproject.com/Articles/371188/A-Cplusplus-Websocket-server-for-realtime-interact](http://www.codeproject.com/Articles/371188/A-Cplusplus-Websocket-server-for-realtime-interact)。

到目前为止，我已经实现了所需的功能。现在我需要做的就是优化。Reference 是一个用于发送字符串的聊天应用程序，因此我将数据编码为 7 位格式。这导致开销。我需要二进制数据传输能力。所以我修改了编码和框架（现在操作码是 130，二进制消息而不是 129。）我可以说服务器部分没问题。我观察了传出帧，它遵循协议。我在客户端面临问题。

每当客户端收到传入消息时，如果所有字节都在限制范围内（0 到 127），它会调用 onMessage() 并且我可以成功解码传入消息。然而，即使是一个大于 127 的字符的引入也会导致客户端调用 onClose()。连接关闭，我无法找到原因。请帮帮我。

PS：我使用的是 chrome 22.0 和 Firefox 17.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:33:22.863

您如何观察传出帧以及您观察到的标头字节是什么？听起来您实际上可能没有成功设置二进制操作码，这会在浏览器中触发 UTF-8 验证失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:38:29.277

看起来您的问题与您如何组装框架有关？由于您有一个已建立的连接，当 onmessage 事件即将触发时终止，我认为它与帧相关？

如果您研究网络 -> WebSocket -> Google Chrome 的连接框架怎么办？它说什么？

它可能超出了您的范围？但我是 XSockets.NET (C#) 框架的开发人员之一，我们在那里提供二进制支持，如果您有兴趣，有一个我最近刚刚发布的示例，它可以在[https://github.com/MagnusThor/XSockets.Binary.Controller.Example上找到](https://github.com/MagnusThor/XSockets.Binary.Controller.Example)

# jquery - 选择哪个控件以在共享点编码中显示弹出窗口

> ID：13601083
> 
> 赞同：1
> 
> 时间：2012-11-28T08:46:50.380
> 
> 标签：jquery, asp.net, sharepoint, popup

当我们单击搜索按钮时，我有一个要求，例如显示弹出窗口（可能类似于人员选择器窗口）。该弹出窗口应该包含一个文本框，当我们输入文本并单击搜索时，结果应该出现在数据库表中的同一个弹出窗口中。我想在 asp.net 弹出窗口中做`window.open`。但后来知道这些都不是首选方式。我要不要用 jquery 来显示结果。它会更复杂吗？我不是在问整个解决方案。我在问什么是最好的方法。使用 Asp.net 还是 Jquery？如果在 jquery 中，你能给我任何关于如何实现的提示。我正在为sharepoint项目开发这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:05:37.523

您可以使用 SharePoint 的 ModalDialog 框架来管理此类事情。 [http://msdn.microsoft.com/en-us/library/ff410058(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ff410058(v=office.14).aspx)

*   创建包含搜索按钮和结果的页面（应用程序页面、Web 部件页面等）。
*   添加调用 ModalDialog 函数的链接或按钮以在模式窗口中打开此页面。
*   它还支持将值返回到原始页面。

这是一个例子：

```
function OpenInModal() {
    var options = {
        url: "{The URL to your page},
        title: "Search",
        allowMaximize: true,
        showClose: true,
        width: 625,
        height: 525,
        dialogReturnValueCallback: silentCallback
    };

    SP.UI.ModalDialog.showModalDialog(options);
}

function silentCallback(dialogResult, returnValue) {

}

function refreshCallback(dialogResult, returnValue) {
    SP.UI.Notify.addNotification('Operation Successful!');
    SP.UI.ModalDialog.RefreshPage(SP.UI.DialogResult.OK);
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:10:48.650

您是否尝试过使用**JqueryUI 对话框**。

[对话](http://jqueryui.com/dialog/)

`input`在要弹出的 div 中添加所需的框。

```
<div id="dialog" title="Basic dialog">
//textbox with search button box
</div> 
```

您可以修改 div 并在 jquery 的帮助下更改显示弹出窗口。

# ruby-on-rails - Rails：如何使用通过范围定义的路由来测试控制器？

> ID：13601089
> 
> 赞同：3
> 
> 时间：2012-11-28T08:47:15.700
> 
> 标签：ruby-on-rails, routes, functional-testing

给定路线：

```
 scope :path => 'shipping_reports', :controller => 'ShippingReports', :as => 'shipping_reports' do
    get 'index'
  end 
```

以及以下测试：

```
class ShippingReportsControllerTest < ActionController::TestCase
 test "routing" do
    assert_routing '/shipping_reports/index', { :controller => "ShippingReports", :action => "index" }
  end

  test 'index' do
    get :index
    assert_response :success
 end
end 
```

第一次测试通过，第二次失败：

```
ActionController::RoutingError: No route matches {:controller=>"shipping_reports"} 
```

有人知道我怎样才能通过该测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:55:30.363

我设法完成这项工作的唯一方法是将我的路线更改为：

```
controller 'shipping_reports', :path => '/shipping_reports', :as => 'shipping_reports' 
```

它读起来更好并且测试通过但我仍然想知道如何测试问题路线......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-22T19:23:47.267

有一个非常相似的问题。

给定路线：

```
 scope ":client" do
    resources :categories, as: :client_categories
  end 
```

我必须执行以下操作：

```
test '#update' do
  put :update, { params: { id: cat.id, client: client } } # => error
  put :update, { params: { id: cat.id, } }, { client: client } # => OK
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-06T13:50:58.377

有类似的问题。我所做的是对测试路线上的 rails 预定义路径。

请参阅下面的测试修改

```
class ShippingReportsControllerTest < ActionController::TestCase
 test "routing" do
    assert_routing index_path, { :controller => "ShippingReports", :action => "index" }
  end

  test 'index' do
    get index_path #the actual path to the index controller
    assert_response :success
 end
end 
```

N:B 您可以在 localhost 的路由列表中获取路径名`http://localhost:3000/rails/info/routes`

# android - 从 Android 使用 JSON 格式的 WCF 服务

> ID：13601091
> 
> 赞同：2
> 
> 时间：2012-11-28T08:47:22.100
> 
> 标签：android, json

我一直在构建一个使用 wcf 服务的 android 应用程序（使用 basicHttpbinding 基于soap）。所以为了做到这一点，我使用了 ksoap 库。现在重要的是我们必须在服务器上切换 wcf 返回 JSON 它需要保持基于肥皂，而不是休息。我有必要更改绑定吗？另外我在这个论坛的其他帖子中注意到使用 WSbinding 与 android 不兼容，这是真的吗？提前谢谢你。

# login - 儿童异常错误的解决方案是什么？

> ID：13601097
> 
> 赞同：0
> 
> 时间：2012-11-28T08:47:40.257
> 
> 标签：login, asp-classic

当我从页面移动到另一个页面时，“子异常错误”怎么办？我读了这个主题：http: [//support.microsoft.com/kb/320439](http://support.microsoft.com/kb/320439)

我尝试使用：HttpContext.Current.RewritePath、FormsAuthentication.RedirectFromLoginPage 和 response.redirect，但我的问题没有得到任何结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:55:17.407

你可以使用`Response.Redirect()`方法来解决这个问题。

# iphone - 在 AsyncSocket 类中调用 connecttohost

> ID：13601099
> 
> 赞同：5
> 
> 时间：2012-11-28T08:47:51.833
> 
> 标签：iphone, ipad

我在 iPad 上测试了这段代码：

```
// execute the function when press button
- (IBAction)connect:(id)sender {
    //[super viewDidLoad];

    AsyncSocket *socket1=[[AsyncSocket alloc] initWithDelegate:self];
    BOOL pass = [socket1 connectToHost:@"www.126.com" onPort:80 error:nil];   // but when I break the wifi，connecttohost still return yes
    if(pass)
    {
        [connectbtn setTitle:@"connected" forState:UIControlStateNormal];
    }

    [socket1 readDataWithTimeout:3 tag:1];
    [socket1 writeData:[@"GET / HTTP/1.1\n\n" dataUsingEncoding:NSUTF8StringEncoding] withTimeout:3 tag:1];

} 
```

请参阅上面代码中的注释。

当我断开 Wifi`connecttohost`时返回`yes`。我不知道问题出在哪里。任何人都可以帮助我并给我一些指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:28:43.273

出于某种原因，connectToHost 在这种情况下将始终返回 true。您需要依赖委托方法。

```
- (void)onSocket:(AsyncSocket *)sock didConnectToHost:(NSString *)host port:(UInt16)port {
    NSLog(@"Connected To %@:%i.", host, port);
}

- (void)onSocket:(AsyncSocket *)sock willDisconnectWithError:(NSError *)err {
    NSLog(@"Disconnecting. Error: %@", [err localizedDescription]);
}

- (void)onSocketDidDisconnect:(AsyncSocket *)sock {
    NSLog(@"Disconnected.");

    [socket setDelegate:nil];
    [socket release];
    socket = nil;
}

- (BOOL)onSocketWillConnect:(AsyncSocket *)sock {
    NSLog(@"onSocketWillConnect:");
    return YES;
} 
```

# ios - 在 webView 中解析 Json 数据

> ID：13601100
> 
> 赞同：0
> 
> 时间：2012-11-28T08:47:56.647
> 
> 标签：ios, iphone, json, xcode, webview

我想在 webview 中打开我的 json 数据库中的数据。

这是我的代码，但它不起作用有人可以帮助我吗？

```
NSString* jsonString = @"http://heurigenapp.cache.gugler.at/json.php";
NSData* jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSDictionary* jsonDict = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:NULL];
NSString* link = [jsonDict objectForKey:@"Link"];
NSURLRequest* linkUrl = [NSURL URLWithString:link];
[webView loadRequest:linkUrl]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:52:16.710

获取对象中的链接，`NSURL`然后使用该`NSURL`对象设置请求，如下所示..

```
NSURLRequest *urlRequest;
NSURL *urlforWebView;
urlforWebView=[NSURL URLWithString:[jsonDict objectForKey:@"Link"]];
urlRequest=[NSURLRequest requestWithURL:urlforWebView];
[webView loadRequest:urlRequest]; 
```

# c# - 为什么我使用 UpdateSourceTrigger=PropertyChanged ,TwoWay 还不够？

> ID：13601101
> 
> 赞同：11
> 
> 时间：2012-11-28T08:48:01.600
> 
> 标签：c#, .net, wpf, xaml, propertychanged

你好; 有源文本框和目标文本框 txttarget 绑定到 txtsource。在txtsource中写东西时，txttarget发生了变化。一切都很好。但是在 txttarget 上写，我没有看到 txttarget 有任何变化？有双向模式。双向模式还不够？我可以在不使用“UpdateSourceTrigger=PropertyChanged”的情况下编写吗？

```
 <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="155,62,0,0" Name="txtSource" VerticalAlignment="Top" Width="120" />
        <TextBox Height="23" HorizontalAlignment="Left"
                 Text="{Binding ElementName=txtSource,Path=Text,Mode=TwoWay}" 
                 Margin="155,113,0,0" Name="txtTarget" VerticalAlignment="Top" Width="120" />
    </Grid> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-28T08:59:40.570

`txtTarget.Text`每当绑定源 ( `txtSource.Text`) 更改时更新。

绑定模式`TwoWay`意味着更改`txtTarget.Text`将反映到绑定源。什么时候？这取决于`Binding.UpdataSourceTrigger`财产。

如果您希望目标绑定在更改时更新源绑定，则必须使用 `Binding.UpdataSourceTrigger = OnPropertyChanged`，否则您将在 txtTarget 失去焦点时更新绑定源（默认行为）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-28T08:58:01.680

a的默认值`UpdateSourceTrigger`是`TextBox`（`LostFocus`请参阅[Binding.UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)）。如果您没有指定`PropertyChanged`为 UpdateSourceTrigger，那么您输入的内容`txtTarget`将不会被写入，`txtSource`直到`txtTarget`失去焦点（即您将其关闭）。

# jquery - 如何使用jquery更改链接中的变量值

> ID：13601108
> 
> 赞同：3
> 
> 时间：2012-11-28T08:48:21.380
> 
> 标签：jquery

我想更改页面上所有链接中的变量值。如果链接看起来像这样：

```
<a href="http://www.mypage.com?type=iPhone&userId=1">The 1 link</a>
<a href="http://www.mypage2.com?type=iPhone&userId=1">The 2 link</a> 
```

`type=iPhone`我想改成`type=Android`。但我不知道如何找到，`type=iPhone`所以我可以更换它？

这样做的最佳方法是什么？谢谢。

好的，这是我的真实代码。

我想要做的是检查用户代理并更改 appType=iPhone 如果它是一个 android。

```
 var ua = navigator.userAgent;
    if (ua.indexOf("Android") >= 0) {
        var androidversion = parseFloat(ua.slice(ua.indexOf("Android") + 8));
        if (androidversion < 4.0) {
           alert("You have an old Android");

        }
        var apptype='appType=Android';
        alert(apptype);

        $("a[href*='appType=iPhone']").attr("href", function () {
        return this.href.replace("appType=iPhone", "appType=Android");
        });
    }
    else
    {   
        var apptype='appType=iPhone';
        alert(apptype); 

    } 
```

有了这个，它根本不会改变 appType=iPhone，我不知道我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T08:51:30.590

您可以使用[属性 ends-with 选择器](http://api.jquery.com/attribute-ends-with-selector/)来查找`href`以“iPhone”结尾的链接，然后使用该[`.attr()`](http://api.jquery.com/attr/)方法更改值：

```
$("a[href$='iPhone']").attr("href", function () {
    return this.href.replace("iPhone", "Android");
}); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/6jD6d/)。

**更新**

现在您已经更新了问题并且 URL 不再以您要查找的字符串结尾，您可以改用[属性 contains 选择器](http://api.jquery.com/attribute-contains-selector/)：

```
$("a[href*='iPhone']").attr("href", function () {
    return this.href.replace("iPhone", "Android");
}); 
```

这是另一个[工作示例](http://jsfiddle.net/jamesallardice/6jD6d/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:51:49.067

这可以按照您想象的方式完成，但要认真地质疑这是否是实现目标的最佳方式。

使用 jQuery，您可以使用[attribute-contains-selector](http://api.jquery.com/attribute-contains-selector/)查找元素：

```
$('a[href*="type=iPhone"]'); 
```

说“`*=`属性包含”

然后你可以只替换href：

```
$('a[href*="type=iPhone"]').attr("href",function(){
     $(this).attr('href').replace('type=iPhone','type=Android');
}); 
```

但是，您应该考虑可能有更好的方法来执行此操作。例如，如果您`type=iPhone`从 中删除该属性`href`，而是决定`type=*`在用户​​单击链接时附加哪个属性，那么您不需要做所有关于查找和替换的麻烦事。

例如，从这个 HTML 开始：

```
<a href="http://www.mypage.com?userId=1">The 1 link</a>
<a href="http://www.mypage2.com?userId=1">The 2 link</a> 
```

然后假设一个包含`type`活动的变量：

```
var osType = 'iPhone'; // change to 'Android' if need be or dynamically - whatever! 
```

使用这个 jQuery：

```
$(document).on('click','a',function(e){
    e.preventDefault();
    var href = $(this).attr('href');
    window.location.href = href + '&type=' + osType;
}); 
```

这种技术的活生生的例子：http: [//jsfiddle.net/K7UNg/1/](http://jsfiddle.net/K7UNg/1/)

# python - 有没有办法将networkx图插入mysql？

> ID：13601111
> 
> 赞同：1
> 
> 时间：2012-11-28T08:48:28.293
> 
> 标签：python, mysql, database, networkx

我有一个从文件中读取的 networkx 图。我想创建一个 mysql 表，其中包含所有节点及其相应的属性（作为列）。我知道我可以创建一个表

```
 db_connection = MySQLdb.connect(host='127.0.0.1', user='myname', passwd='mypass') 

 # Variable that exacutes Database calls with MySQL

 cursor = db_connection.cursor()

 # Create databse with MYSQL query - databasename

 cursor.execute('CREATE DATABASE inb104')

 # Select which database to use with MYSQL query - databasename

 cursor.execute('USE inb104')

 # Create database with MYSQL query - tablename & fields 

 cursor.execute('''CREATE TABLE popularity (
                   PersonNumber INT,
                   Value VARCHAR(70),
                   Category VARCHAR(25),
                   PRIMARY KEY (PersonNumber, Value, Category)
                   )
               ''') 
```

但我更喜欢一种将节点作为参数并构建表而无需创建字符串命令（例如“create table”和“insert”）的方法。networkx中有这样的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:14:05.290

首先尝试阅读这篇[文章](http://www.artfulsoftware.com/mysqlbook/sampler/mysqled1ch20.html) 通常您可以将图形保存在一个表中。

# c# - 在asp.net c#中动态创建控件

> ID：13601118
> 
> 赞同：0
> 
> 时间：2012-11-28T08:49:00.400
> 
> 标签：c#, asp.net, controls, panel, dynamic-data

我有 10 个`asp:Panel`，其中包含一个字段集，`asp:labels`用于`asp:textboxes`检索公司的联系方式数据。我想添加和删除面板（联系方式字段集），我已经按照以下方法解决了我的问题。

一开始我有这 10 个面板，只有 1 个面板是可见的，其余 9 个是不可见的。当用户希望添加新联系人时，以下面板变为`Visible = true`。删除此特定面板（联系人详细信息字段集）遵循相同的方法，我将特定`panel.Visible = false`及其所有字段清除。

由于公司能够检索最多 10 个联系人（他们的详细信息 - 转换为 10 个面板），当用户希望在删除后添加一个新面板时出现我的问题。

例如，用户为三个联系人添加`Panel 1`- `Panel 2`- 。`Panel 3`然后他删除`Panel 1`，然后他希望添加另一个面板。然后我的程序找到有多少面板可用`(visible= false)`，以便创建下一个面板（因为 max Panels = 10），但是基于上述场景，我的程序`Panel 1`在页面加载的相同位置再次创建（上面的智慧`Panel 2`），但是如果`Panel 4`以下可用将创建它，`Panel 3`这会导致用户混淆。新面板创建在最后一个面板的上方或下方，具体取决于其余可用面板（如果后续面板的数量小于或大于最后一个面板）。

我该如何解决我的问题，还是我采用了完全错误的方法？我尝试使用 JavaScript 添加新控件，但发现很难识别每个控制器的 ID，以便将数据存储到我的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:52:28.707

您可以在后面的代码中创建面板和其他控件，而不是在 ASPX 页面中创建面板，然后您可以从代码中将它们添加到页面上。*（这样您可以根据需要添加 10 个以上的面板）*

在代码后面。

```
Panel panel1 = new Panel();
panel1.Controls.Add(yourLabel); // add your dynamically created controls
this.Page.Controls.Add(panel1); // add the panel to your page 
```

或者您可以使用面板和其他控件创建用户控件，从代码中加载控件并将它们添加到页面上。对于用户控制，您可以查看以下资源。

[ASP.NET 用户控件 - MSDN](http://msdn.microsoft.com/en-us/library/y6wb1a0e%28v=vs.100%29.aspx)
[ASP .NET 中的用户控件 - CodeProject](http://www.codeproject.com/Articles/1739/User-controls-in-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:05:11.450

您应该考虑使用该`Repeater`控件：

```
<asp:Repeater ID="rpt" runat="server">
    <ItemTemplate>
        <asp:Panel ID="pnl" runat="server">
            <%-- Code for databinding in here --%>
        </asp:Panel>
    </ItemTemplate>
</asp:Repeater> 
```

然后您可以使用代码隐藏中的列表来表示中继器中的数据。删除和添加新行将导致向此列表添加条目。然后你可以使用 DataBinding 来展示你的数据：

```
public void BindData(object source)
{
    rpt.DataSource = source;
    rpt.DataBind();
} 
```

在事件处理添加和删除使用此代码，刷新转发器控件：

```
list.Add(...);

BindData(list); 
```

# extjs - 使用“iframe”下载图像/文本文件

> ID：13601124
> 
> 赞同：1
> 
> 时间：2012-11-28T08:49:15.703
> 
> 标签：extjs, extjs4, download

我正在使用 Extjs - 4.1.0，我想提示下载窗口。我使用了“iframe”。该窗口仅在发布的文件是 zip/mp3 时显示，但当发布的文件是文本/图像文件时，窗口不会出现。是否需要设置一些属性来启用文本/图像/不同文件的下载窗口？

请在下面找到我的代码。

```
 var record = item.findParentByType('itemcontextmenu').record;
        Ext.Ajax.request({
            url : ORT.Configuration.DOWNLOAD_GRAPHICS_URI+"&graphics="+record.get('id'),
            success: function (response, opt) {

                result = Ext.decode(response.responseText);
                try {Ext.destroy(Ext.get('graphicsDownloadIframe'));}catch(e) {}
                Ext.core.DomHelper.append(document.body, {
                    tag: 'iframe',
                    id:'graphicsDownloadIframe',
                    css: 'display:none;visibility:hidden;height:0px;',
                    src: result.fileName,
                    frameBorder: 0,
                    width: 0,
                    height: 0
                });
            }   
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:13:03.573

这完全是关于 mimetype 以及您的浏览器如何使用它。所以我猜你的问题就是那个。这可能会导致浏览器处理接收到的文件不同。

**编辑**

以下是我仍在使用的辅助类

```
Ext.ux.util.HiddenForm = function(url,fields){
    if (!Ext.isArray(fields))
        return;
    var body = Ext.getBody(),
        frame = body.createChild({
            tag:'iframe',
            cls:'x-hidden',
            id:'hiddenform-iframe',
            name:'iframe'
        }),
        form = body.createChild({
            tag:'form',
            cls:'x-hidden',
            id:'hiddenform-form',
            action: url,
            target:'iframe'
        });

    Ext.each(fields, function(el,i){
        if (!Ext.isArray(el))
            return false;
        form.createChild({
            tag:'input',
            type:'text',
            cls:'x-hidden',
            id: 'hiddenform-' + el[0],
            name: el[0],
            value: el[1]
        });
    });

    form.dom.submit();

    return frame;
} 
```

用法

```
Ext.ux.util.HiddenForm('http://localhost/file/fetch',[['PropName','PropValue'],['Prop2Name','Prop2Value']]) 
```

服务器接受这些参数并建立一种“FileStreamResult”，在客户端触发下载。如果您使用的是 .Net 或 Java 之类的语言，那么已经有可以使用的实现，如果您使用的是 PHP，您可能会发现**[这](http://w-shadow.com/blog/2007/08/12/how-to-force-file-download-with-php/)**很有帮助。无论如何，看看你的后端......

# html - 两次访问同一页面时缓存：后退按钮仅显示第二次查看的数据

> ID：13601125
> 
> 赞同：2
> 
> 时间：2012-11-28T08:49:17.187
> 
> 标签：html, caching, http-headers

我正在创建一个网页，但在页面上的后退按钮的工作方式上遇到了一些问题。我猜我需要设置一些标题，但不知道哪些或如何。这就是我所看到的：

(1) 转到显示论坛主题的主页。

(2) 单击链接转到显示主题的页面。在此页面上，向下滚动并添加评论。

(3) 评论是通过表单保存的（编辑：我已经尝试过 POST 和 GET 表单）。现在通过重定向重新加载相同的线程页面。评论显示。

在 Chrome 中：此时按下后退按钮仍会显示已添加评论。看起来好像后退按钮不起作用。但是，页面像 (2) 一样向下滚动。再次单击后退按钮会显示主页。所以，后退按钮确实让我返回，但如果同一个页面出现两次，它会两次显示新数据。

在 IE9 中：按返回按钮显示“网页已过期”。再次单击它会将我带到主页。

如何更改此行为，以便后退按钮真正显示上一页？

（我这样做的原因是我从主页跟踪我有多少页面，这样我就可以生成一个“返回主页”链接。（2）上面有 history.go(-1) 和（ 3) 上面有 history.go(-2). 如果用户从 (3) 按下浏览器后退按钮，这将不起作用，因为它现在距离主页 1，但显示 (3) 的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:52:43.210

在步骤 (3) 中，您可能有一个返回线程页面的新 HTML 的 POST。相反，POST 应该重定向到线程页面的 GET。

请参阅[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# java - 安卓截图——部分黑谷歌地图

> ID：13601128
> 
> 赞同：1
> 
> 时间：2012-11-28T08:49:57.640
> 
> 标签：java, android, google-maps, bitmap, screenshot

有时有效，有时无效。我在 Facebook 上分享这张照片，有时还可以：

![图片正常 - 没有黑度](../Images/96643f2bc7389f6a172bb15d1d1621b8.png)

有时它是部分黑色的（只有谷歌地图！）：

![图片不行——部分黑谷歌地图](../Images/d1bb4bcadc7fcca32c15cdf5f0ab5e34.png)

我有一个单独的线程在做这个截图：

```
new Thread() {
    @Override
    public void run() {                     
        // Get root view
        View view = mapView.getRootView();
        view.setDrawingCacheEnabled(true);

        // Create the bitmap to use to draw the screenshot
        final Bitmap bitmap = Bitmap.createBitmap(
                getWindowManager().getDefaultDisplay().getWidth(), getWindowManager().getDefaultDisplay().getHeight(), Bitmap.Config.ARGB_4444);
        final Canvas canvas = new Canvas(bitmap);

        // Get current theme to know which background to use
        final Theme theme = activity.getTheme();
        final TypedArray ta = theme
            .obtainStyledAttributes(new int[] { android.R.attr.windowBackground });
        final int res = ta.getResourceId(0, 0);
        final Drawable background = activity.getResources().getDrawable(res);

        // Draw background
        background.draw(canvas);

        // Draw views
        view.draw(canvas);

        ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        bitmap.compress(Bitmap.CompressFormat.PNG, 90, baos); //bm is the bitmap object   
        byte[] b = baos.toByteArray();  

        Bundle params = new Bundle();
        params.putByteArray("source", b);
        params.putString("message", "genie in a bottle");
        try {
            //String resp =
                    facebook.request("me/photos", params, "POST");
        } catch (FileNotFoundException e) {
            throw new RuntimeException(e);
        } catch (MalformedURLException e) {
            throw new RuntimeException(e);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

}.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:10:12.947

您可以使用以下`Bitmap`方法直接从屏幕创建对象：

```
bitmap = Bitmap.createBitmap(view.getDrawingCache()); 
```

问候。

# python - 评估对象的内容

> ID：13601131
> 
> 赞同：-1
> 
> 时间：2012-11-28T08:50:09.897
> 
> 标签：python, tkinter, eval

我正在尝试使用 Python3 创建一个电子表格应用程序，并且很难将其设置为能够执行跨单元格功能，例如：

```
a0+2 
```

其中 a0 是一个包含字符串的 tkinter 文本框。我制作了一个字典，将每个地址（a0、a1、a2 等）映射到单元格对象，但不确定是否让程序解析字符串以查找地址字符串，或者是否有一些非常巧妙的`eval()`技巧。我尝试过使用`eval()`，但我不断收到错误消息

`TypeError: globals must be a real dict; try eval(expr, {}, mapping)`

无论我把字典放在哪里，或者即使我尝试使用全局演员表。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:11:12.143

也许考虑使用类似[SymPy](http://sympy.org)而不是`eval()`. 只要您可以链接符号（如此`a0`处），它就应该允许使用在单元格中进行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:09:31.850

不要使用 eval 来评估公式。它使人们能够将几乎任何 python 代码放入电子表格中，这意味着您拥有的每个电子表格都能够对您的计算机系统造成无法估量的损害。这是一个非常非常糟糕的主意。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-28T09:25:58.000

我不明白您尝试使用 eval 的目的是什么。简单的例子是如果我们有三个单元格，例如：

```
a0=3; a1=2; a3=a0+a1 
```

只需将 a0 和 a1 相加，我不介意没有 eval() 你不会得到什么

# ruby-on-rails-3 - Rails 3：为控制器中的操作定义两条具有不同参数的路径

> ID：13601132
> 
> 赞同：2
> 
> 时间：2012-11-28T08:50:11.487
> 
> 标签：ruby-on-rails-3

我有一个名为 users 和 index action 的控制器。默认情况下，我有路径

```
get '/users' => 'users#index', :as => 'users' 
```

现在我想再创建一个传递不同参数的路径

```
get '/users/:city' => 'users#index', :as => 'list_users' 
```

但这给出了错误，`No route matches {:controller=>"users"}`.

我跑了 rake 路线，发现我定义的路径在那里，但它不起作用。

应该做些什么来完成这项工作。

# c# - 在 asp 中突出显示（粗体）行：Repeater with timer

> ID：13601138
> 
> 赞同：2
> 
> 时间：2012-11-28T08:50:22.393
> 
> 标签：c#, asp.net, timer, repeater, highlight

我有一个用中继器显示的活动列表。我已经使用定时器来显示这些，所以定时器不是问题。这是我必须放入`Timer_tick`方法中的代码。

“highlight-Timer”应该一次突出显示项目/行，然后我想显示一些与突出显示的行相关的信息。

如果使用另一个控件更容易，那没问题。我不必成为中继器。我只是因为样式的可能性而使用它（它不只显示在一行中，而是有几个换行符等）

按照要求：

（中继器）

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <div id="divActivity" runat="server">
            <span style="font-size:30px;">
                <%# DataBinder.Eval(Container.DataItem, "act_headline") %>
            </span>
            <br />
            <img alt="mapIcon" src="../img/mapIcon.gif" height="15px" width="15px" style="position:absolute;" />
            <span style="font-size:12px; font-style:italic; margin-left:23px;">    
                <%# DataBinder.Eval(Container.DataItem, "act_place") %>
            </span>
            <img alt="watchIcon" src="../img/watchIcon.png" height="15px" width="15px" style="position:absolute;" /> 
            <span style="font-size:12px; font-style:italic; margin-left:23px;">
                <%# DataBinder.Eval(Container.DataItem, "act_start") %> - <%# DataBinder.Eval(Container.DataItem, "act_end") %>
            </span>
            <br />
            <div style="word-wrap: break-word; width:1000px; margin-top:20px; padding:0;">
                <%# DataBinder.Eval(Container.DataItem, "act_text") %>
            </div>
            <br />
                <img alt="infoIcon" src="../img/infoIcon.png" height="15px" width="15px" style="position:absolute;" />
            <span style="font-size:12px; margin-left:23px;"><a target="_blank" href="http://<%# DataBinder.Eval(Container.DataItem, "act_info") %>"><%# DataBinder.Eval(Container.DataItem, "act_info") %></a>
            </span>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

我在 Timer_tick 事件中没有任何内容，因为我尝试了几件事并在失败后将其删除。希望够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:00:35.523

`Repeater.Items`我会通过循环遍历集合，在滴答事件处理程序中使用类似的东西来为突出显示的项目设置一个特殊的 CSS 类。

像这样的东西（未经测试）：

```
int currentHighlight = -1;
int nextHighlight = -1;
for (int i = 0; i < Repeater1.Items.Count; i++)
{
    HtmlControl htmlDiv = (HtmlControl)Repeater1.Controls[i].Controls[1];

    if (htmlDiv.Attributes["class"] != null)
    {
        if (htmlDiv.Attributes["class"].Contains("highlighted")) // this is the currently highlighted item
        {
            // record currently highlighted item index
            currentHighlight = i;

            // remove highlight
            htmlDiv.Attributes["class"].Replace("highlighted", "");
            htmlDiv.Attributes["class"].Trim();
        }
    }
}

if ((currentHighlight == -1) || (currentHighlight == Repeater1.Items.Count))
{
    // handle first Item highlighting
    nextHighlight = 1;
}
else
{
    // handle standard case
    nextHighlight = currentHighlight + 1;
}

// highlight next item
((HtmlControl)Repeater1.Controls[nextHighlight].Controls[1]).Attributes["class"] += " highlighted"; 
```

然后，您可以使用`highlighted`CSS 类来处理样式（您提到的粗体字体）以及 JavaScript 或 jQuery 中的一些特殊行为。

`RepeaterItem`顺便说一句，一旦您获得当前突出显示的对象，您就可以对对象执行任何其他操作。

# oracle - oracle中数字（m，n）的数字大于m时如何插入数据库

> ID：13601143
> 
> 赞同：0
> 
> 时间：2012-11-28T08:50:34.817
> 
> 标签：oracle, oracle11g

在我无权更改的数据库中。一列有 number(13,4) ，如何插入长度大于 13 的 999999999999999999 ？它正在抛出异常。是否可以转换为 1.23e3 格式并且数据库是否保存此格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:53:28.313

不，由于您自己提到的规则和限制，这是不可能的。该列具有该格式，您无法更改它，因此无法使其适合。时期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:53:38.317

不，不能插入大于列的指定精度和小数位数的数字。

您必须更改数据库。

如果您没有更改表格的权限，那么只需询问有权限的人；你有一个有效的“业务”需要这样做。

我强烈建议不要想出某种方法来“破解”这个限制。存在诸如此类的约束以强制执行数据质量。尽管在这种情况下可能会被误用，但将两种不同格式的数据放在同一列中会使从数据库中检索数据变得更加困难。因此，为什么您应该始终将数字存储为数字等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:54:06.740

不，很遗憾没有。没有办法实现这一点。

# javascript - 如何从上传表单中动态删除文件？

> ID：13601149
> 
> 赞同：1
> 
> 时间：2012-11-28T08:51:06.837
> 
> 标签：javascript, jquery, forms, file-upload, input

我想创建多重上传文件组件，可以使用javascript动态删除添加的文件（当用户单击文件预览上的关闭按钮时）。

我尝试使用`<input type="file" name="files[]" multiple/>` 但是我后来发现不可能动态更改文件输入值:(

那么我应该怎么做才能解决这个问题呢？如何在用户添加文件后从表单中删除文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:52:43.047

第一：看看[这篇](http://www.onlinesolutionsdevelopment.com/blog/web-development/php/create-multiple-file-uploader-using-php-html-and-jquery/)文章。以下是如何进行多个文件上传（很简单，文件是一个一个选择）

第二：我不认为你可以`<input type="file" multiple />`用 JS 编辑文件列表。根据[这个](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement) `.files`属性是只读的（所以你可以得到一个文件列表，但要注意更多）。但同时，看看[这个](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)。在那里你可以找到如何使用 ajax 上传文件。一旦你能做到这一点，你可以显示一个选定文件的列表，并允许用户删除其中的一些。并仅上传仍在选定文件列表中的文件。

# java - 在 Spring 应用程序中使用 @RequestHeader 时处理异常

> ID：13601150
> 
> 赞同：1
> 
> 时间：2012-11-28T08:51:08.827
> 
> 标签：java, spring, web-services, exception-handling

这是我使用 Spring Framework 的 Java 代码：

```
@RequestMapping(method = RequestMethod.POST)
public @ResponseBody String SampleFunction(@RequestHeader("Authorization") String details)
{
    System.out.println("Authorization details recieved");

} 
```

我正在尝试访问`Authorization`标题。我想`Authorization`通过将丢失的标头重定向到 400 Bad Request 页面来处理丢失的标头。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T13:45:41.510

默认情况下，标题是必需的。所以如果它丢失了，你会得到一个异常。但是，请参见下面的代码。现在，如果它丢失，详细信息字符串将为空。

```
@RequestHeader(required = false, value = "Authorization") String details 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:53:48.610

如果默认情况下缺少标头值，则响应为 400 Bad Request。您只需要配置重定向。

# c# - 列表字典

> ID：13601151
> 
> 赞同：5
> 
> 时间：2012-11-28T08:51:12.820
> 
> 标签：c#

我正在尝试构建一个列表字典，但我正在读取一个字符串，需要将列表命名为字符串并将它们作为键添加到字典中。

IE 读入“你好”

使用读入的内容创建列表

```
List<string> (insert read string here ) = new List<string>(); 
```

然后将该列表名称添加为字典的键。

```
Dictionary.Add(readstring, thatlist); 
```

* * *

我能找到的只是一个硬代码实现。

```
Turing.Add("S", S); 
```

我的目标：创建一个通用图灵机，所以我从一个文本文件中读取输入，下一步看起来像这样，(q0 a) -> q1 X R。

然后使用我读入的所有步骤在虚拟磁带“tape = XXYYZZBB”上以最终状态结束

我有为此编写的伪代码，但我无法让字典工作。

编辑：添加更多信息以减少混乱。我给出了文本文件前 2 行的开始和结束状态。然后我给出了过渡。

q0 //开始状态 q5 //结束状态 q0 a q1 XR //转换

我去掉了前两行输入给我 0 和 5 然后创建了一个 for 循环来创建每个状态的列表。

```
for (int i = 0; i <= endState; i++)
{
List<string> i = new List<string>();
} 
```

然后，我想将每个列表名称作为键添加到我正在创建的列表字典中。

```
Dictionary.Add(listname, thatlist); 
```

我需要帮助来实现上述代码，因为它给出了错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T08:57:53.603

您是否将列表创建为

```
List<string> insertReadStringHere = new List<string>(); 
```

或者

```
List<string> foo = new List<string>(); 
```

甚至

```
List<string> shellBeComingRoundTheMountain = new List<string>(); 
```

重要的是一旦你完成了

```
MyDictionary.Add(theInputString, shellBeComingRoundTheMountain); 
```

然后，您可以通过以下方式访问该特定列表

```
MyDictionary[theInputString] 
```

初始列表被“称为”`insertReadStringHere`或`foo`或`shellBeComingRoundTheMountain`。

您甚至不需要将列表保存在这样的命名变量中。例如，

```
Console.WriteLine("Input a string to create a list:");
var createListName = Console.ReadLine();
// As long as they haven't used the string before...
MyDictionary.Add(createListName, new List<string>());

Console.WriteLine("Input a string to retrieve a list:");
var retrieveListName = Console.ReadLine();
// As long as they input the same string...
List<string> retrievedList = MyDictionary[retrieveListName]; 
```

编辑：如果您想要一定数量的列表，请使用字典从*int*到字符串，而不是字符串到字符串：

```
int maxNumberOfLists = 5; // or whatever you read from your text file.
Dictionary<int, List<string>> myLists =
            new Dictionary<int, List<string>> (maxNumberOfLists);
for (int i = 1; i <= maxNumberOfLists; i++)
    myLists[i] = new List<string>(); 
```

然后您可以访问您的列表，例如

```
var firstList = myLists[1]; 
```

通常我会推荐一个数组，但这会给你从 1 到 5 而不是从 0 到 4 的列表，这似乎就是你想要的。

# iphone - 块中的 STFail

> ID：13601154
> 
> 赞同：0
> 
> 时间：2012-11-28T08:51:22.400
> 
> 标签：iphone, ios, objective-c-blocks, ocunit, sentestingkit

使用 SenTestingKit 运行测试时，它们不会在块内正确失败，例如

```
operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                            success:^(NSURLRequest *req, NSHTTPURLResponse *response, id jsonObject){
                                                                STFail(@"This does not fail");
                                                            }
                                                            failure:^(NSURLRequest *req, NSHTTPURLResponse *response, NSError *error, id jsonObject){
                                                                STFail(@"Neither does this");
                                                            }];
[operation start];
STFail(@"But this fails fine"); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:31:03.843

问题是你有一个异步调用。这意味着它会立即返回并且您的最后一个 STFail 被击中。

有解决办法。[如何对异步 API 进行单元测试？](https://stackoverflow.com/questions/2162213/how-to-unit-test-asynchronous-apis)

# c# - 确定矩形是否在圆内的最佳算法

> ID：13601155
> 
> 赞同：4
> 
> 时间：2012-11-28T08:51:23.680
> 
> 标签：c#, algorithm

我必须根据与同心圆的交点绘制具有不同填充颜色的矩形。显示的图片将使您对场景有更好的了解， ![在此处输入图像描述](../Images/49a9c406f2b2b74b3ff6a2e60716ccdd.png) （仅代表目的）

目前我正在通过应用毕达哥拉斯定理检查每个点的状态

伪代码：

> SquareOf Point 距中心的距离 (sqrOfDistance) = square(point X - Circle center X) + square(point Y- Circle center Y)

将这些值与半径平方 (sqrOfInnerR) 进行比较

```
if  sqrOfDistance == sqrOfInnerR
    Inline
else if sqrOfDistance > sqrOfInnerR
    Out
else 
    In 
```

*即使当前的逻辑有效；它需要对每个点执行这些检查（4 或 8 次），最后一起确定状态。**在我的真实世界应用程序中，将出现大约 3,000,000 个矩形。***

```
private RectState CheckTheRectangleState(Rect rect, double radius, bool firstCall = true)
        {
            double SquareOfRadius = Square(radius);
            var _x = rect.X - ControlCenter.X;
            var _y = rect.Y - ControlCenter.Y;

            var squareOfDistanceToTopLeftPoint = Square(_x) + Square(_y);
            var squareOfDistanceToTopRight = Square(_x + rect.Width) + Square(_y);
            var squareOfDistanceToBottonLeft = Square(_x) + Square(_y + rect.Height);
            var squareOfDistanceToBottonRight = Square(_x + rect.Width) + Square(_y + rect.Height);

            var topLeftStatus = squareOfDistanceToTopLeftPoint == SquareOfRadius ? PointStatus.Inline : (squareOfDistanceToTopLeftPoint > SquareOfRadius ? PointStatus.Out : PointStatus.In);
            var topRightStatus = squareOfDistanceToTopRight == SquareOfRadius ? PointStatus.Inline : (squareOfDistanceToTopRight > SquareOfRadius ? PointStatus.Out : PointStatus.In);
            var bottonLeftStatus = squareOfDistanceToBottonLeft == SquareOfRadius ? PointStatus.Inline : (squareOfDistanceToBottonLeft > SquareOfRadius ? PointStatus.Out : PointStatus.In);
            var bottonRightStatus = squareOfDistanceToBottonRight == SquareOfRadius ? PointStatus.Inline : (squareOfDistanceToBottonRight > SquareOfRadius ? PointStatus.Out : PointStatus.In);

            if ((topLeftStatus == PointStatus.In || topLeftStatus == PointStatus.Inline) &&
                (topRightStatus == PointStatus.In || topRightStatus == PointStatus.Inline) &&
                (bottonLeftStatus == PointStatus.In || bottonLeftStatus == PointStatus.Inline) &&
                (bottonRightStatus == PointStatus.In || bottonRightStatus == PointStatus.Inline))
            {
                return firstCall ? RectState.In : RectState.Partial;
            }
            else
            {
                if (firstCall)
                    CheckTheRectangleState(rect, outCircleRadius, false);
            }
            return RectState.Out;
        }
    } 
```

其中 Square() 是获取平方的自定义函数。 `Square(x){ return x*x;}` PointStatus 和 RectState 是用来确定点的状态的枚举。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:58:07.920

如果您正在处理很多矩形，并且大多数矩形大部分时间都在圆圈之外，那么以**提前退出方式****优化**检查的一种方法是首先想象一个**包围圆圈的正方形**，从 (- r,-r) 到 (r,r)，其中 r 是圆的半径，圆的中心是 (0,0)，并检查矩形是否在这个正方形内。这应该**要快得多，并且****只有在**成功的情况下才需要检查与**圆的碰撞。**

 ******编辑：@hvd 为提前退出正面检查添加了一个绝妙的**主意**。如果矩形在**内部正方形内**，它肯定在圆内。

根据矩形与圆形的大小，您还可以**更深一层并****在内部正方形和圆形之间**制作矩形。但是你需要检查查询到的矩形的点是否都在任何一个矩形（+内正方形）中，并且不需要都在同一个矩形中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:08:13.590

因此，在大多数情况下，我们可以确定正方形是圆形，然后我们的任务就会变得更容易。它会这样看

```
float distance = Distance(LargeCircle.center, square.center);
if (distance > LargeCircle.radius){
    //two cases here, we can be outside of circle, or intersect it
} else {
    //two cases again. We can be inside a circle, or intersect it
} 
```

希望它会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T10:13:21.210

只需评论[@Karthik T](https://stackoverflow.com/users/1520364/karthik-t)的建议即可。用矩形表示圆形，您可以使用以下方法检查它：

*   忽略顶部边界高于圆顶部边界的矩形
*   忽略底部边界低于圆形底部边界的矩形
*   在圆的左边界之前忽略左边界的矩形
*   在圆的右边界之后忽略右边界的矩形
*   休息是里面的

因此，您只有 4 张支票而不是 8 张支票。

之后，您可以在象限中分割圆并将矩形分类为案例：

*   如果右下角位于左上象限 - 仅检查左上角（按距离）
*   如果左下角位于右上象限 - 仅检查右上角
*   如果右上角在左下象限 - 仅检查左下角
*   如果左上角在右下象限 - 仅检查右下角
*   如果右下角和左下角在正方形的上半部分 - 仅检查左上角和右上角
*   ...
*   休息（每个角落都在自己的象限中）按距离检查所有角落。

*更新：*实际上最好先对矩形进行分类，然后在正方形之外过滤掉，然后按案例过滤掉。

*代码示例：*

```
struct Vec {
    public double X, Y;
    public Vec Offset(Vec d) { return new Vec { X = X + d.X, Y = Y + d.Y }; }
    public Vec Negate() { return new Vec { X = -X, Y = -Y }; }
    public Vec OrthX() { return new Vec { X = X }; }
    public Vec OrthY() { return new Vec { Y = Y }; }
}
struct Rect { public Vec TopLeft, Size; }

Vec NextVec(Random rng)
{ return new Vec { X = rng.Next(), Y = rng.Next() }; }

Rect NextRect(Random rng)
{
    var topLeft = NextVec(rng);
    return new Rect { TopLeft = NextVec(rng), Size = NextVec(rng) };
}

Vec Center;
double R, SqR;

private static double Square(double X) { return X*X; }
private bool Contains(Vec point)
{ return (Square(point.X - Center.X) + Square(point.Y - Center.Y)) < SqR; }

private bool Contains(Rect rect)
{
    var a = rect.TopLeft;
    var c = rect.TopLeft.Offset(rect.Size);
    if (c.Y < Center.Y) // in upper half
    {
        if (c.X < Center.X) // in upper-left quadrant
        {
            return Contains(a);
        }
        else if (a.X > Center.X) // in upper-right quadrant
        {
            return Contains(rect.TopLeft.Offset(rect.Size.OrthX()));
        }
        else // spans over upper half
        {
            return Contains(a) &&
                Contains(rect.TopLeft.Offset(rect.Size.OrthX()));
        }
    }
    else if (a.Y > Center.Y) // in lower half
    {
        if (c.X < Center.X) // in lower-left quadrant
        {
            return Contains(rect.TopLeft.Offset(rect.Size.OrthY()));
        }
        else if (a.X > Center.X) // in lower-right quadrant
        {
            return Contains(c);
        }
        else // spans over lower half
        {
            return Contains(c) &&
                Contains(rect.TopLeft.Offset(rect.Size.OrthY()));
        }
    }
    else // rect spans over upper and lower halfs
    {
        if (c.X < Center.X) // spans over left half
        {
            return Contains(a) &&
                Contains(rect.TopLeft.Offset(rect.Size.OrthY()));
        }
        else if (a.X > Center.X) // spans over right half
        {
            return Contains(rect.TopLeft.Offset(rect.Size.OrthX())) &&
                Contains(c);
        }
        else // rect spans over all quadrants
        {
            return Contains(a) &&
                Contains(c) &&
                Contains(rect.TopLeft.Offset(rect.Size.OrthX())) &&
                Contains(rect.TopLeft.Offset(rect.Size.OrthY()));
        }
    }

} 
```

**顺便说一句：考虑在四**[叉树](http://en.wikipedia.org/wiki/Quadtree)中组织矩形

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T09:07:17.213

如果你检查4个角（x，y）是否更接近球心然后半径的长度会快得多？例子

```
sqrt((Xcorner - Xcenter)^2 + (Ycorner - Ycenter)^2) <= R 
```

如果有任何不符合条件，则打破正方形每个角的计算。******

# c# - Windows Phone应用程序栏上的单选按钮？

> ID：13601159
> 
> 赞同：1
> 
> 时间：2012-11-28T08:51:41.310
> 
> 标签：c#, silverlight, windows-phone-8, application-bar

嘿伙计们，我有这个页面：

![在此处输入图像描述](../Images/4fc271442249247cfb63051a33cb2fee.png)

PS：这是临时数据，所以看起来不太好；P

现在，如果我单击该过滤器按钮，我希望在应用程序栏中显示一个弹出窗口或单选按钮，这可能吗？或者我应该尝试另一种方法吗？

当您选择一个单选按钮时，我将对所做的选择进行页面过滤，所以我不能离开页面去做出选择。任何帮助/链接/教程将不胜感激:)

提前致谢，

在 windows phone 8/silverlight/c# 上工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:31:04.420

应用栏中不能有单选按钮。

我**会将**其实现为一个单独的页面，并在您导航回此页面时更新您的过滤器。页面实例和视图模型将仍在内存中，因此应该检测 OnNavigatedTo 中的后退导航并在此时应用您的过滤器。在此页面和您的过滤器页面之间共享 ViewModel 将是传达过滤器值的最佳方式，但这不是唯一的方式。

# groovy - 为什么可以在没有任何参数的情况下调用具有单个参数的构造函数？

> ID：13601162
> 
> 赞同：5
> 
> 时间：2012-11-28T08:51:43.337
> 
> 标签：groovy

```
class Foo {
  public Foo(String s) {}
}
print new Foo() 
```

为什么这段代码有效？

如果我使用原始类型的参数声明构造函数，则脚本将失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T10:47:43.307

Groovy 将尽最大努力去做您要求它做的事情。当您调用时`new Foo()`，它会与调用匹配，`new Foo( null )`因为有一个可以获取`null`值的构造函数。

如果您让构造函数采用原始类型，那么 this 不能是`null`，因此 Groovy 会抛出一个`Could not find matching constructor for: Foo()`异常，如您所见。

它对方法也是如此，所以：

```
class Test {
  String name

  Test( String s ) {
    this.name = s ?: 'tim'
  }

  void a( String prefix ) {
    prefix = prefix ?: 'Hello'
    println "$prefix $name"
  }
}

new Test().a() 
```

打印`Hello tim`（因为构造函数和方法都使用空参数调用）

其中：

```
new Test( 'Max' ).a( 'Hola' ) 
```

印刷`Hola Max`

## 澄清

我[在 Groovy User mailing list 上询问](http://groovy.329449.n5.nabble.com/Calling-constructor-Object-with-no-params-td5712008.html)，得到以下回复：

> 这对任何方法调用（不仅是构造函数）都是有效的，而且我（以及其他人）真的不喜欢这个“特性”（因为它很容易出错）所以它可能会在 Groovy 3 中消失。另外，它不受静态编译的支持:)

所以在那里，它可以工作（现在），但不要依赖它:-)

# mask - 在 ExtJS 3 中为面板加载掩码

> ID：13601168
> 
> 赞同：1
> 
> 时间：2012-11-28T08:52:04.477
> 
> 标签：mask, extjs3, masking

我想为特定项目/面板添加加载掩码。我对此做了一些研究。在 ExtJS 4 中，所有组件都有一个功能，即`setLoading()`. ExtJS 3 有什么等价物吗？

我想做这样的 smt：http: [//jsfiddle.net/molecule/pKq8X/](http://jsfiddle.net/molecule/pKq8X/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-02T17:32:30.883

这对您来说可能为时已晚，但在尝试了 Rock123 的建议后，我能够使用此代码获得加载掩码。

```
myPanel.getEl().mask("Please wait...","x-mask-loading"); 
```

并揭开它的面纱

```
myPanel.getEl().unmask(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T10:52:35.600

```
var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait..."});
myMask.show(); 
```

参考：[http](http://extjs.cachefly.net/ext-3.4.0/docs/) : //extjs.cachefly.net/ext-3.4.0/docs/LoadMask

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T18:41:57.147

如果您的表单面板名称是面板，那么您的代码如下所示

```
panel.getForm().load({url:'dummyurl', waitMsg:'Loading'}); 
```

请参阅以下内容以获取更多说明...

[http://dev.sencha.com/deploy/ext-3.4.0/examples/form/xml-form.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/form/xml-form.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-10T18:12:29.600

除了
通过 ID 查找现有组件之外，我还可以正常工作

Ext.getCmp(' **hr-graph-east** ').getEl().mask("请稍​​等...","x-mask-loading");

Ext.getCmp(' **hr-graph-east** ').getEl().unmask();

```
 {xtype: 'hr_htmlpanel',
              id: 'hr-graph-east',
              height: 330,
              width: 500,
              etc.. 
```

# javascript - 在悬停时创建弹跳效果

> ID：13601169
> 
> 赞同：0
> 
> 时间：2012-11-28T08:52:10.143
> 
> 标签：javascript, html, css

我必须开发一个类似的网站，例如[http://www.unlocknrepair.com/](http://www.unlocknrepair.com/) 在这个网站上，当您将鼠标悬停在解锁或手机维修按钮上时，会出现一个下拉菜单。有没有办法让这个下拉列表以有弹性的方式出现......就像我希望它在稳定之前反弹一点。在 jQuery 中是可能的，但只能使用 css 和 javascript 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:03:29.957

是的，可以使用本机 javascript。[看看这个文件](http://javascript.info/tutorial/animation#easeout)
注意，我链接到“easeOut”部分，因为我认为这代表了一个球的弹跳比他们的“弹跳”好一点。
[这是一个很好的例子，在同一页面的下方。](http://javascript.info/tutorial/animation#highlighter_469157)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:38:30.527

如果实验性 css3 是一个选项，即使没有使用带有`@keyframes`规则的 css 动画的 javascript，您也可以做到这一点。

```
#parent {
    position:relative;
     height: 40px;
}

#onhover {
    display: none;
    position: absolute;
    top: 0;

}

#parent:hover #onhover {
    display: block;
    top: 30px;
    animation:mymove 0.8s linear;
    -moz-animation:mymove 0.8s linear; /* Firefox */
    -webkit-animation:mymove 0.8s linear; /* Safari and Chrome */
    -o-animation:mymove 0.8s linear; /* Opera */
    -ms-animation:mymove 0.8s linear; /* IE */
}

@keyframes mymove
{
0%   {top:0px;}
10%  {top:3px;}
40%  {top:40px;}
60%  {top:25px;}
80%  {top:35px;}
100% {top:30px;}
}

@-moz-keyframes mymove /* Firefox */
{
0%   {top:0px;}
10%  {top:3px;}
40%  {top:40px;}
60%  {top:25px;}
80%  {top:35px;}
100% {top:30px;}
}

@-webkit-keyframes mymove /* Safari and Chrome */
{
0%   {top:0px;}
10%  {top:3px;}
40%  {top:40px;}
60%  {top:25px;}
80%  {top:35px;}
100% {top:30px;}
}

@-o-keyframes mymove /* Opera */
{
0%   {top:0px;}
10%  {top:3px;}
40%  {top:40px;}
60%  {top:25px;}
80%  {top:35px;}
100% {top:30px;}
}

@-ms-keyframes mymove /* IE */
{
0%   {top:0px;}
10%  {top:3px;}
40%  {top:40px;}
60%  {top:25px;}
80%  {top:35px;}
100% {top:30px;}
}
```

```
<div id="parent">hover me<div id="onhover">hovering</div></div>
```

另一个“反弹”动画：

```
$(function() {

$(document.body).delegate( "img", "mouseenter", function() {
    var $this = $(this).addClass("right");
    setTimeout(function() {
        $this.removeClass("right");
    }, 2000);
});

});
```

```
body { font-size: .7em; font-family: Arial, Helvetica, "Liberation Sans", sans-serif; padding: 0 !important; }
img {
    -moz-transition: -moz-transform 1s ease-in;
    -webkit-transition: -webkit-transform 1s ease-in;
    -o-transition: -o-transform 1s ease-in;
    -ms-transition: -ms-transform 1s ease-in;
}
#anim.right {
    -moz-animation-name: bounce;
    -moz-animation-duration: 1s;
    -moz-animation-iteration-count: 1;
    -moz-transform: translate(400px);
    -moz-transition: none;

    -webkit-animation-name: bounce;
    -webkit-animation-duration: 1s;
    -webkit-animation-iteration-count: 1;
    -webkit-transform: translate(400px);
    -webkit-transition: none;
}

@-moz-keyframes bounce {
  from {
    -moz-transform: translate(0px);
    -moz-animation-timing-function: ease-in;
  }
  60% {
    -moz-transform: translate(400px);
    -moz-animation-timing-function: ease-out;
  }
  73% {
    -moz-transform: translate(360px);
    -moz-animation-timing-function: ease-in;
  }
  86% {
    -moz-transform: translate(400px);
    -moz-animation-timing-function: ease-out;
  }
  93% {
    -moz-transform: translate(380px);
    -moz-animation-timing-function: ease-in;
  }
  to {
    -moz-transform: translate(400px);
    -moz-animation-timing-function: ease-out;
  }
}

@-webkit-keyframes bounce {
  from {
    -webkit-transform: translate(0px);
    -webkit-animation-timing-function: ease-in;
  }
  60% {
    -webkit-transform: translate(400px);
    -webkit-animation-timing-function: ease-out;
  }
  73% {
    -webkit-transform: translate(360px);
    -webkit-animation-timing-function: ease-in;
  }
  86% {
    -webkit-transform: translate(400px);
    -webkit-animation-timing-function: ease-out;
  }
  93% {
    -webkit-transform: translate(380px);
    -webkit-animation-timing-function: ease-in;
  }
  to {
    -webkit-transform: translate(400px);
    -webkit-animation-timing-function: ease-out;
  }
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<img id="anim" src="http://hacks.mozilla.org/wp-content/uploads/2011/04/75px-Aurora210.png" width="75" height="75" />
```

有关更多详细信息和浏览器兼容性，请参阅[Mozilla 开发人员网络](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)。

# objective-c - 只需单击一下即可在 Twitter 上发布 - 就像 Instagram 一样

> ID：13601170
> 
> 赞同：0
> 
> 时间：2012-11-28T08:52:10.487
> 
> 标签：objective-c, ios, twitter, share

我正在尝试像在 Instagram 中那样实现 Twitter 共享。
这意味着我希望用户批准内置的 Twitter 凭据（在 iPhone 设置中定义），然后，每次用户单击“共享”按钮时，它都会在 Twitter 上发布一条推文，而无需用户填写文本或查看附加对话框，如`TWTweetComposeViewController`.

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:14:53.207

您可以使用 来实现此目的`TWRequest`，请阅读本文中的问答。

[在 IOS5 中使用 TWrequest 将带有文本的图像发送到 Twitter](https://stackoverflow.com/questions/8034764/use-twrequest-to-send-an-image-with-a-text-to-twitter-in-ios5)

但在 iOS 6 中，这可能已被弃用，因此请查看用于此目的的相邻类。

# ssrs-2008 - 如何将参数传递给SSRS中的过程？

> ID：13601173
> 
> 赞同：0
> 
> 时间：2012-11-28T08:52:15.627
> 
> 标签：ssrs-2008

我有一张这样的桌子：

```
create table emp(empid, empname, sal)

insert emp values(101, 'srewt', 1500) 
```

该表包含 10000 行。

我也有这样的存储过程：

```
create procedure p1 (@eid int)
as
begin
   select * from emp where empid = @eid)
end 
```

在 SSRS 我执行这个过程

```
exec p1 (' ') 
```

但我必须向报告提供用户交互以传递`empid`值（除了参数）

如何将参数传递给报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:11:45.057

`exec p1 (@EmpID)`在您的数据集中仅作为查询传递，然后将在报表中自动创建一个名为 EmpID 的参数。在这里，当用户运行它要求输入 EmpID 的报告时，只需提供 ID 并运行报告...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:06:26.200

您可以在报表设计器中定义参数。打开报告数据选项卡（应该与解决方案资源管理器位于同一位置。如果不存在，您可以通过打开报告，单击查看-报告数据来显示报告数据停靠）。

当您双击报表数据集时，您可以配置报表参数。如果你选择了一个带参数的存储过程作为数据源，设计者应该自动检测过程的参数，并为你填写参数选项卡中的值。但请务必检查数据类型，因为检测到的数据类型通常不是您真正需要的数据类型。

# c# - 在测试中模仿标准输入

> ID：13601175
> 
> 赞同：1
> 
> 时间：2012-11-28T08:52:31.497
> 
> 标签：c#, unit-testing, input

我有一个可以像这样使用的应用程序：

```
type file.txt|app.exe -i 
```

即我的应用程序将从file.txt 中读取数据。

现在我想编写一些测试来确保应用程序可以很好地处理 file.txt 中的一些特殊数据。

如何组织这个？

我的应用读取输入，例如

```
input = Console.In.ReadToEnd(); 
```

在没有读取数据的简单测试中，我只是使用 App 类，例如：

```
using(App app = new App())
{
  result = app.Run(args)
}
if (result != 0)
Assert.Fail("Failed"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:58:49.073

您可以将控制台输入替换为您自己的对象，例如`StringReader`，并提供您想要的任何输入：

```
var oldIn = Console.In;
try
{
    Console.SetIn(new StringReader("some input"));

    using (App app = new App())
    {
        // input = Console.In.ReadToEnd(); happens here
        result = app.Run(args);
    }

    if (result != 0)
    {
        Assert.Fail("Failed");
    }
}
finally
{
    Console.SetIn(oldIn);
} 
```

# java - Bouncy Castle lib 生成“java.lang.IllegalArgumentException：无法编码公钥”

> ID：13601181
> 
> 赞同：1
> 
> 时间：2012-11-28T08:52:45.503
> 
> 标签：java, cryptography, bouncycastle

我正在尝试使用**bcprov-jdk15-136.jar**或**bcprov-jdk16-140.jar的充气城堡库**

**我有以下 RSA 私钥：**

generateRSAKeyPair - RSA 私钥，iccKeypair 在 KEK 下加密B058474721CBD75820F5F56C1AC91B593FF8C28C866E7764BFC59C6070781524ACB91501FAB84250F04FAF9776712B82558C2B8985EA0CFD718577360A362BFBBC761DFC94EE8582250EB31A04B147DAC28FF425511923832199D2D4BE2E296EF1A1A249BCB68012508DBDE6CF0C7AB6313EFBBE2A0E527AD5C481A37E00473859C578269D972A243756991AD40E231C6051C50BBF71559D2FA77AC6A2D7CC2D101DEB5FBC0B4EAB1E16093A9AF181338F68E56611166725A8EFE2284EC0FB8F7919B8556B30E4BCEBE8150873DC5E0F9467686E38F4742746412EB4402FFC471AC0A55C9486ED2A613ADED759607675A548029C9C70875452A2724EC7D9E1D96D928BCE1FCF1681C39759CDE165CD9B484B222D2D33C3CA53BD461F11033F503F618FB4B9003C946D5B785594950E2C4A8D6EB299E19FF1147183A59A7FAFA2F3AD676917DAF0E14C735BB526266D8732F608B282891D0887C58C65857D52B00EE5E24B3C58426E9F6858DC7E6807F6B2CE4353A4088DBE8761F20AB0017541D0E0A58637342744870B18BB1D3606EAC351D049EE064E0C5CED63983B52E1D4D2A484CC82D962CD06FA611AD06075F04F642FFDB2FC0EFF89294313E519402DDF8B98DF821689A2E00CB5839DACE3D96D69E1FC3CF3D79FD84C72904D24D392

**并具有以下 RSA 公钥：**

generateRSAKeyPair - RSA Public Key, iccKeypair cyphered under KEK BDBC2FC40FBA580EFB9A9AC346C10FCE6F4C72BD6D79D2039807ABAB644D9F49F5EC06152B78A9C4D7468D6A82F3FEBFF0ABC7EE166C9FBC2A10DB1FE1AA4C66D6B94C871BEC97CE818EE03DDBFB55F5CC9E050E7BB7202EEBD6471172491F2EA22B83D62A747EE6677DBB7CFDA2ED6B0C3EE10D550760E20654A0421133778B

**每当我尝试运行以下代码时：**

```
X500Principal subject = new X500Principal("CN=Test V3 Certificate");
PKCS10CertificationRequest kpGen = new PKCS10CertificationRequest("SHA1withRSA", subject, publicKey, null, privateKey); 
```

我不断得到

```
java.lang.IllegalArgumentException: can't encode public key
    at org.bouncycastle.jce.PKCS10CertificationRequest.<init>(Unknown Source)
    at org.bouncycastle.jce.PKCS10CertificationRequest.<init>(Unknown Source)
    at com.gemalto.nrs.test.KmsTest.generatePCK10(KmsTest.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906) 
```

**当我尝试调试代码时，有时我会得到**

```
java.lang.ClassCastException: org.bouncycastle.asn1.DERApplicationSpecific cannot be cast to org.bouncycastle.asn1.ASN1Sequence
at org.bouncycastle.jce.PKCS10CertificationRequest.<init>(Unknown Source)
at org.bouncycastle.jce.PKCS10CertificationRequest.<init>(Unknown Source)
at com.gemalto.nrs.test.KmsTest.generatePCK10(KmsTest.java:148)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:47:05.030

生成的公钥和私钥只是 DER 而不是 ASN1

所以我必须在使用它们之前为它们每个人获取 ASN1，这是这个问题的根本原因。

以下调用解决了这个问题：

```
 PublicKey publicKey = RSAtoX509Key.getPublicKey(PUBLIC_KEY.getBytes(), RSA_EXPONENT, "BC");
    PrivateKey privateKey = RSAtoX509Key.getPrivateKey(PRIVATE_KEY.getBytes(), RSA_EXPONENT, "BC");

    public static PublicKey getPublicKey(byte[] modulus, byte[] exponent, String provider) {
        PublicKey publicKey = null;
        try {
            RSAPublicKeySpec pubKeySpec = new RSAPublicKeySpec(new BigInteger(1, modulus), new BigInteger(1, exponent));
            KeyFactory keyFactory = null;
            if(provider != null && !provider.isEmpty()) {
                keyFactory = KeyFactory.getInstance("RSA", provider);
            } else {
                keyFactory = KeyFactory.getInstance("RSA");
            }

            publicKey = keyFactory.generatePublic(pubKeySpec);
        } catch(Exception ex) {
            logger.error(ex.getMessage());
            return null;
        }

        return publicKey;
    } 
```

当然，密钥是使用 KEK 密钥加密的，但这是另一个问题，与上述异常无关。

# android - SDK 3.0 reauthorizeForPublish() 失去读取权限？

> ID：13601182
> 
> 赞同：1
> 
> 时间：2012-11-28T08:52:48.890
> 
> 标签：android, facebook-android-sdk

在 Android 上使用 beta 3.0 SDK，我打开一个 Facebook 会话，`session.openForRead()`带有基本权限（电子邮件）的简单调用。

只要我想在用户的墙上发布消息，我就会重新授权会话，并`session.reauthorizeForPublish()`在对象中包含新的发布权限 (publish_actions) `ReauthorizeRequest`。

一旦最后一个请求成功，调用`session.getPermissions()`只返回最后一个请求的权限（publish_actions），但会丢失所有以前的读取权限（电子邮件）。

ReauthorizeRequest 的参数权限的文档清楚地说明了“请求的附加权限”，所以我目前不太确定为什么会话在请求后会丢失所有其他权限？

非常感谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:10:28.630

亚历克斯，很抱歉你遇到了这个问题。这是 SDK 中的一个错误，我们正在努力在最终版本之前修复。同时，您可以尝试几种解决方法。

1.  虽然 Session 对象的权限概念与 Facebook 服务不同步，但与 Session 关联的访问令牌仍然具有这些权限，并且仍可用于进行需要已授予的任何权限的 Graph API 调用（除非当然，用户随后撤销了其中任何一个）。因此，如果您的应用程序逻辑允许您忽略`Session.getPermissions()`调用的结果（例如，如果您的 UI 流程暗示用户在到达流程中的某个步骤之前必须已经授予了某个权限，那么您可以假设它存在） ，您可以继续进行需要这些权限的 Graph API 调用，而不管`getPermissions`说什么——关于哪些权限与令牌相关联的真实情况存在于服务中，而不是 Session 对象中。

2.  如果您的应用程序逻辑需要检查是否已授予某个权限，不幸的是现在您可能需要单独跟踪权限，可能通过声明一个`ArrayList<String>`您将新权限附加到的位置，可能在您的`Session.StatusCallback`任何时候会话打开，并在会话关闭时清除它。（您也可以在每次状态转换到`OPENED_TOKEN_UPDATED`并存储结果时调用“我/权限”。）这应该被认为只是一种临时解决方法，直到真正的修复可用。希望这可以帮助。

# javascript - ASP.Net MVC3 中的谷歌地图

> ID：13601190
> 
> 赞同：0
> 
> 时间：2012-11-28T08:54:00.420
> 
> 标签：javascript, asp.net-mvc-3, google-maps, google-maps-api-3

我想在我的 ASP.NET MVC3 应用程序中实现谷歌地图。我已经有谷歌地图代码，我想为任何特定的城市或国家添加获取方向，这意味着我想在视图（HTML）中添加一个文本框，输入“德里”并单击获取方向按钮，然后地图将显示印度德里地图。

我在 View(Razor) 中的谷歌地图代码如下：-

```
@{
    ViewBag.Title = "Google Map";
}
@section Scripts { 
    <script type="text/javascript"src="http://maps.google.com/maps/api/js?sensor=false"></script> 
} 
@section Styles { 
    html { height: 100% } 
    body { height: 100%; margin: 0px; padding: 0px } 
    #map_canvas { height: 80% } 
} 

<h2>Google Maps</h2>
<div id="map_canvas" style="width:400px; height:300px"></div>
<script type="text/javascript">
    function initialize() 
    {
        var latlng = new google.maps.LatLng(40.716948, -74.003563);
        var options = { zoom: 14, center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), options);
    }
    $(function () {
        initialize();
    }); 

</script> 
```

所以帮助在我的应用程序上添加 GetDirection

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:38:39.617

如果您想根据位置名称在地图上定位某个地点，则需要地理编码服务 - [https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

阅读地理编码的文档，您将能够实现您正在寻找的东西。

# iphone - 在 iOS PhoneGap 中使用条形码扫描仪时出错

> ID：13601194
> 
> 赞同：0
> 
> 时间：2012-11-28T08:54:05.587
> 
> 标签：iphone, cordova

我正在开发条码扫描应用程序。我已经从 GitHub 下载了示例代码。当我运行该项目时，我得到一个错误。请帮我解决它。

```
ERROR: Plugin 'NetworkStatus' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-11-28 14:12:36.198 BarCodeScannerCDV[942:40b] FAILED pluginJSON = {"className":"NetworkStatus","methodName":"getConnectionInfo","arguments":["NetworkStatus0"]} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:22:28.400

我建议您使用更新的 phonegap 框架（Cordova 2.2.0），因为这是[Cordova 1.6.0 中的一个错误。](http://mail-archives.apache.org/mod_mbox/incubator-callback-dev/201204.mbox/%3CCAK-b5ZxBdp=rpUXfKGvGBAG56RVhGTqWmUc6WBS19qN0eLOVCw@mail.gmail.com%3E)

请参阅 Shazron Abdullah 在[Google Phonegap 组](https://groups.google.com/forum/?fromgroups=#!topic/phonegap/bl2t_J0c4RI)中的以下评论：

```
There is a new Cordova.plist because of the unified JS changes. Check
out the "Cordova Upgrade Guide" in your .dmg (Guides subfolder), or:
"Upgrading Cordova 1.5.0 projects to 1.6.0" step 8 of
https://github.com/apache/incubator-cordova-ios/blob/master/guides/Cordova%20Plugin%20Upgrade%20Guide.md#upgrading-older-cordova-plugins-to-16x 
```

iOS-Phonegap的[BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/BarcodeScanner)插件是稳定的，请将您的 phonegap 框架更新到 2.2.0。

在 Phonegap 1.6.0 及以下版本中，网络连接类名称为，`Network Status`但对于 Phonegap 1.6.1 及以上版本，网络连接类名称为`CDVConnection`.

# php - 在 PHP 中沙箱 Mongo->execute(MongoCode) 以防止任何数据库交互

> ID：13601200
> 
> 赞同：1
> 
> 时间：2012-11-28T08:54:29.653
> 
> 标签：php, mongodb, serverside-javascript

作为我正在编写的软件的一个功能，我允许自己创建用 JS 编写的计算器，以使用所述数据作为参考来计算应用于特定数据集的费用。由于我使用的是 Mongo，我可以安全地在服务器端运行它，浏览器可以调用一个 php 页面并获得响应。该函数将从管理控制面板写入并保存到数据库中。我当然不会在该函数内部进行任何数据库交互，但是执行 mongocode 是在数据库中完成的，所以 mongocode 本质上可以做到`db.foo`

只是为了保护自己和其他可能最终会写计算器的人，我已经决定`db = null;`被`$context`传给`new MongoCode()`

它看起来有点像这样：

```
$sample = [
    'estimatedvalue' => 200,
    'estimatedcost' => 400,
    'contractor'    => false,
    'db'    => null,
];
$fees = [
    '_id'   => new MongoId(),
    'name'  => 'Friendly name!',
    'code'  => new MongoCode('function(){return (contractor ? estimatedCost : estimatedValue)*0.01; /* If a contractor is doing the work, base fee on cost. */}', $sample),
];

$a = $this->siteDB->execute($fees['code']);

if(isset($a['errno'])){
    echo $a['errmsg'];
}else{
    var_dump($a['retval']);
} 
```

幸运的是，这行得通，如果我要将其注入所有上下文中，就不会有`db.`可运行的命令。我不想创建一个可能发生 NoSQL 注入的点！

这可以防止的一个例子是：

```
 'code' => new MongoCode('function(){db.foo.remove();}', $sample),
 // Since db is now null, the above won't work 
```

我的担忧：此 MongoCode 执行环境中是否存在任何其他变量，这些变量可能对留在用户可编辑函数中造成潜在危害？我找不到任何关于通过 mongocode 函数可以访问其他内容的文档。如果`db`是的话，那我就准备好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:21:10.573

这是不安全的，我认为您不能拥有用户可编辑的 JS 函数。例如，这不需要变量并关闭您的服务器：

```
> db.eval("(new Mongo('localhost:27017')).getDB('admin').shutdownServer()") 
```

他们可以插入数据、删除数据库、连接到系统中的其他服务器，并且通常会造成严重破坏。

如果您试图在 JavaScript 中允许用户可编辑的计算函数，请使用单独的 JS 引擎，从 MongoDB 中提取值，然后将值 + 用户定义的函数传递给完全独立的 JS 引擎。

# javascript - Primefaces p:inplace 组件：如何在 JavaScript 中读取状态？

> ID：13601203
> 
> 赞同：0
> 
> 时间：2012-11-28T08:54:37.010
> 
> 标签：javascript, primefaces, edit-in-place

如何在**Javascript中访问****PrimeFaces p:inplace**组件的状态？

 **我需要检查组件是否处于*内联*状态，以便`toggle()`在需要时调用函数... AFAIK`toggle()`只能**更改**状态而不能将状态设置为所需值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:19:06.653

假设你有这样的东西L

```
<p:inplace id="basic" widgetVar="myWidget">  
    <p:inputText value="Edit Me" />  
</p:inplace> 
```

您可以检查是否在jQuery的帮助下*打开了就地，就像这样*`widgetVar`

```
jQuery(myWidget.content).is(":visible") 
```

或者您可以使用`:visible`选择器和 inplace 的 id 检查它：

附加`_display`到您的就地元素 id 以检查编辑器**是否尚未打开**

附加`_content`到您的就地元素 id 以检查编辑器**是否已打开**

```
jQuery("#basic_display").is(":visible")

jQuery("#basic_content").is(":visible") 
```

您可以在展示[Primefaces Inplace的浏览器控制台中查看它](http://www.primefaces.org/showcase/ui/inplace.jsf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:27:53.497

我通过检查*ui-inplace-display*和*ui-inplace-content*元素的 CSS**显示**值来实现它：

 **```
 $('.ui-inplace-display').filter(function(){
                return $(this).css('display') == 'inline';
            }).toggle();
            $('.ui-inplace-content').filter(function(){
                return $(this).css('display') == 'none';
            }).toggle(); 
```

然而，对我来说，它更像是一种解决方案，所以我期待一些更优雅的东西，比如 JavaScript 对象的专用属性中的状态，或者至少是专用的 CSS 类。****

# javascript - jqMath 方程线换行

> ID：13601205
> 
> 赞同：1
> 
> 时间：2012-11-28T08:54:44.793
> 
> 标签：javascript, jquery, jqmath

我已经开始在我的网站上将 jqMath 用于方程，并且当它们的外部 div 具有固定宽度时，我需要能够包装这些方程。

```
<div id='math'>$$ x={-b±√{b^2-4ac}}/{2a} \text'A little bit of text that goes along with this.' $$</div> 
```

CSS：

```
#math {
    width: 100px;
} 
```

目前 jqMath 只会将文本和方程式继续排成一长行，我需要确保“数学”div 有一定的宽度，并且不会在其中滚动。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:05:35.470

如果你想换行，那么你可以尝试这样..

```
<div id="math">
    $$x={-b±√{b^2-4ac}}/{2a}$$ 
    <br />
    $$\text' A little bit of text that goes along with this.'$$
</div> 
```

或者干脆这样做

```
<div id="math">
    $$x={-b±√{b^2-4ac}}/{2a}$$ 
    <br />
    A little bit of text that goes along with this.
</div> 
```

# java - java.lang.Object VS java.util.Objects，有什么区别？

> ID：13601209
> 
> 赞同：12
> 
> 时间：2012-11-28T08:54:53.663
> 
> 标签：java, java-7

众所周知，`Object`是Java中的根类。我发现一个名为的类`Objects`看起来与`Object`.

这门课`Objects`让我困惑了一段时间。谁能告诉我我们应该在何时何地使用该`Objects`课程？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-28T08:58:15.920

[`Objects`](http://docs.oracle.com/javase/7/docs/api/java/util/Objects.html)只包含一组与`Object`实例结合使用的实用方法。请注意，它不能被实例化（它`final`没有`public`构造函数）并且只包含`static`方法。

将实用程序方法放在复数名称类中的命名模式在 JDK 中很常见：

*   [`Collections`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)
*   [`Arrays`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)（虽然严格来说没有对应的`Array`类）
*   ...

其他库也使用此方案，例如[Guava](https://code.google.com/p/guava-libraries/)：

*   [`Maps`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Maps.html)
*   [`Strings`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Strings.html)
*   ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T10:57:14.067

类的一种典型用法`Objects`：

```
public void foo(SomeClass bar) {
    Objects.requireNonNull(bar, "custom msg"); // // Ensure an object is not null.
} 
```

`bar`为空时输出：

```
Exception in thread "main" java.lang.NullPointerException: custom msg
    at java.util.Objects.requireNonNull(Unknown Source)
    at com.example.ObjectsUsage.main(ObjectsUsage.java:24) 
```

另一个从字段构造 hashCode 的方法：

```
@Override public int hashCode() {
return Objects.hash(this.foo, this.bar, this.duh);
} 
```

最有用的一个：

```
if (Objects.equals(sun, moon)) {
    log("I swear I am in earth");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-08T08:05:56.210

**是的， Object 和 Objects**类有很多区别

> **项目等级**

类对象是类层次结构的根。每个类都有 Object 作为超类，这个类从**JDK1.0开始可用**

**类声明**：`public class Object`

**包装**：`java.lang.Object`

**方法**：它只有实例方法，如 clone()、equals(Object obj)、hashCode()、notify()、notifyAll()、toString()、wait() 等。

> **对象类**

Objects 类是最终类，它仅包含用于操作对象的静态实用方法，使用 Objects 类方法，可以巧妙地处理 NullPointerException，因为这些是用于计算对象哈希码的 null 安全方法，返回对象的字符串，并比较两个对象。这个类从**JDK1.7开始可用**

**类声明**：`public final class Objects extends Object`

**包装**：`java.util.Objects`

**方法**：它只有静态方法，如equals（Object a，Object b），hash（Object ... values），isNull（Object obj），nonNull（Object obj），toString（Object o），hashCode（Object o）等.

**注意**：如果你有 JDK1.7 那么你只能使用**Objects**类

# c++ - 文件重定向到程序

> ID：13601212
> 
> 赞同：1
> 
> 时间：2012-11-28T08:55:10.217
> 
> 标签：c++, file-io, io-redirection

我在将文件重定向到我的程序时遇到问题。我有一个名为 test 的 Makefile，我想将一个文本文件重定向到它作为输入。例如，我想做：

测试<文件.txt

作为我的可执行文件的输入。但是，当我尝试读取 file.txt 的内容时，我不断收到分段错误。这是我的尝试：

```
int main(int argc, char* argv[])
{
  FILE *a;
  int count;
  a = fopen(argv[1], "r");
  for(n = 0; ; n++)
  {
    count = fgetc(a); // <- here is where my program segfaults
    if(feof(a))
      break;
  }
  return 0;
} 
```

可能有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:00:51.173

这是因为重定向是由 shell 处理的，而不是作为参数传递的。使用重定向时，该文件用于`stdin`.

您应该始终检查函数的结果，在这种情况下，您尝试`fopen`使用`NULL`文件名调用，这样它将返回`NULL`导致您的分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:02:15.883

shell 不会将“<”和“file.txt”作为参数传递给程序，因此您`argv[1]`返回的是随机垃圾。

而不是从 读取`a`，您应该从 读取`stdin`，它是自动可用并打开的。

```
int main(int argc, char* argv[])
{
  int count;
  for(n = 0; ; n++)
  {
    count = fgetc(stdin); 
    if(feof(stdin))
      break;
  }
  return 0;
} 
```

# jquery-ui - 从事件接收时可排序的 jQuery-UI 中删除项目

> ID：13601218
> 
> 赞同：0
> 
> 时间：2012-11-28T08:55:28.307
> 
> 标签：jquery-ui, jquery-ui-sortable

我想从接收事件的 jQuery-UI 可排序列表中删除一个项目。我正在尝试这样的事情：

```
receive: function(event, ui){
    num_of_items = num_of_items+1;                          

    if(num_of_items >= 3)
    {
        ui.item.remove();
        num_of_items = num_of_items -1;
    }
} 
```

这会导致错误：

> 未捕获的类型错误：无法读取未定义的属性“选项”

item.remove() 似乎在任何其他事件上都可以正常工作，例如 beforeStop、stop 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:25:30.850

在接收回调中删除项目不是一个好主意，因为它可以用于其他回调。但是你可以让它不再可排序。这是我的建议：

*   使用参数项初始化您的可排序[项](http://docs.jquery.com/UI/Sortable#option-items)
*   在您的接收回调中，删除您用于参数项的类，使其不再可排序
*   此时对可排序元素调用[刷新](http://docs.jquery.com/UI/Sortable#method-refresh)应该是一个好主意（也许没有必要）。向该元素添加一个类，以便使用选择器轻松找到它并将其隐藏（也使用 jQuery）
*   然后删除一个项目可以很容易安全地推迟，并在你的 stop 或 beforeStop 回调中被调用到清理中

希望它会适合你！

# plugins - Jenkins 插件在构建步骤后运行多个源代码管理

> ID：13601224
> 
> 赞同：0
> 
> 时间：2012-11-28T08:55:45.957
> 
> 标签：plugins, jenkins

我正在使用 jenkins 进行自动化构建。我的问题是我想从 svn 下载源代码并运行构建步骤，在再次运行构建步骤之后，我想从 svn 获取最新的源代码。是否有任何插件可以满足我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:22:33.437

考虑使用共享工作区设置两个作业（A 和 B）（作业 > 配置 > 高级项目选项；单击按钮*高级...*）。检查自定义工作区并定义位置）。一旦作业 A 完成，它会触发作业 B 和作业 B，然后执行 svn 更新以及您需要的任何其他操作。为了避免 A 和 B 并行执行，请勾选*上游项目正在构建*时的块构建和*下游项目正在构建时*的块构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:01:56.457

也许不是插件，但您始终可以在构建步骤中运行手动 SVN 命令

*   将新的构建步骤添加到“执行 shell”（如果在 Linux 上）或“执行 Windows 批处理命令”（如果在 Windows 上）。
*   在内部，根据您的操作系统编写 SVN 命令，例如：
*   `svn up checkout_folder`，请注意路径将相对于 Jenkins 的工作区

# html - 边框颜色不适用于 IE 8 中的 Select HTML 元素

> ID：13601229
> 
> 赞同：1
> 
> 时间：2012-11-28T08:56:08.357
> 
> 标签：html, css, internet-explorer-8

我有一个下拉菜单

```
<select name="cmb" class="txtRed" id="cmb1">
  options
</select> 
```

在 style.css 我有类 txtRed 作为

```
.txtRed {
border-bottom : red 2px solid;
border-top : red 2px solid;
border-left : red 2px solid;
border-right : red 2px solid;
} 
```

它适用于**Mozilla Firefox**和**Google Chrome**。它只有 IE 8 有问题。什么是解决方案？我可以使用任何其他附加属性或技巧吗？

输出应如下图所示

![在此处输入图像描述](../Images/50bedb896fdf4cf56fb795b7931e1d84.png)

我尝试了以下虚拟代码，它也不适用于 IE8，我检查了兼容性模式，它仅适用于 IE 8

```
<html>
    <head>
        <style type="text/css">
            .txtRed {
                border-bottom : red 2px solid;
                border-top : red 2px solid;
                border-left : red 2px solid;
                border-right : red 2px solid;
            }
        </style>
    </head>
    <body>

        <select name="cmb" class="txtRed" id="cmb1" style="border-bottom:red 2px solid;">
            <option> Option 1 </option>
            <option> Option 2 </option>
        </select>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:05:15.263

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

将此添加到您的代码中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:08:48.583

我创建了一个小提琴来证明它也适用于 IE 8。看到这个——

```
<select name="cmb" class="txtRed" id="cmb1">

</select>​ 
```

css-

```
.txtRed {
border-bottom : red 2px solid;
border-top : red 2px solid;
border-left : red 2px solid;
border-right : red 2px solid;
}​ 
```

[**演示**](http://jsfiddle.net/KVVUx/)- 在 IE8 中看到这个，它运行良好。

**问题** -我怀疑您的浏览器是否以兼容模式呈现，因此呈现为 IE7 会导致问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T08:59:26.737

使用 a`<div>`将`<select>`标签括起来。`.txtRed`改为申请`div`。

```
<div class="txtRed">
<select name="cmb" id="cmb1">
  // options go here
</select>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:55:06.840

对我来说，问题是浏览器的文档模式（IE9 设置为 IE7 标准）

# python - 为 Python 工作的 OpenSceneGraph 绑定？

> ID：13601233
> 
> 赞同：3
> 
> 时间：2012-11-28T08:56:12.010
> 
> 标签：python, 3d, pygame, collada, openscenegraph

为了好玩，我正在用 Python 构建一个渲染引擎。我需要加载 3D 场景。任何标准的现代格式，如 DAE、3DS 或 MAX 都可以使用：我可以轻松地在标准格式之间转换我的文件。

OpenSceneGraph 似乎是最全面且维护良好的解决方案。能够毫不费力地在 Python 中使用它是理想的选择。是否有适用于 OSG 的 Python 绑定，它们易于安装、可在 Mac OS X（我使用的是 10.8）上运行并且与最新版本的 OSG 兼容？

我四处搜寻，发现了 osgswig (http://code.google.com/p/osgswig/) 和 PyOSG (http://sourceforge.net/projects/pyosg/)，但它们似乎没有得到积极维护. 我没有看到任何与这些软件包相关的近期活动，而且似乎人们在 OSX 上运行 osgswig 时遇到了麻烦。理想情况下，我想找到一些“正常工作”的东西，而没有主要的编译麻烦。我只想安装一个包并能够导入一个可以让我加载 COLLADA 或 3DS 文件的模块。

我还遇到了 pycollada（https://github.com/pycollada/pycollada）。它似乎很活跃，但还处于早期阶段。理想情况下，我想要一个相当全面的包，它支持高光贴图、法线贴图和其他相当高级的功能。动画也会很好。

总之，我需要在 Python 中加载 3D 场景。OSG 的绑定可能是理想的，因为 OSG 是如此全面。但我需要一些适用于 OSX 的东西。我也更喜欢可以相当容易安装的东西。这样的事情存在吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T11:24:55.530

看看 Open Asset Import Library（简称：Assimp）。它是一个可移植的开源库，以统一的方式导入各种知名的 3D 模型格式。[http://www.assimp.org/](http://www.assimp.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:31:51.960

你应该在 panda3D (http://www.panda3d.org/) 上掠夺，它是一个具有大量 python 绑定的游戏引擎。它具有您想要的功能：http: [//www.panda3d.org/manual/index.php/Features](http://www.panda3d.org/manual/index.php/Features)

我用了几年，它是一个可靠的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T14:18:44.527

出于类似目的，我制作了自己的 osgswig 项目克隆镜像的分支。我在 Windows 和 Mac 上使用 OpenSceneGraph 3.2.1 版；很可能我最终也会为 linux 完善它。我已经根据我的 osgswig 版本向客户交付了一种产品，并且我正在考虑制作其他产品。在这里找到我的叉子：

[https://github.com/cmbruns/osgswig](https://github.com/cmbruns/osgswig)

如果其他人表现出足够的兴趣，我可能会被哄骗为我的 osgswig 模块版本创建二进制安装程序，以使安装更容易。

如果您只想要 OSG 3.2.1 的最简单的 OpenSceneGraph 绑定，您可以在此处停止阅读此答案。请继续阅读以了解我对未来的更多想法。

虽然我正在维护一个 osgswig 的分支（如上所述），但我有点讨厌 SWIG，我更喜欢使用基于 Boost.Python 的绑定，而不是 SWIG。对于大型、复杂的 C++ API，比如 OpenSceneGraph，Boost.Python 可以比 SWIG 优雅得多，无论是对于 API 使用者还是对于绑定维护者（我和我）。[我在https://code.google.com/p/osgboostpython/](https://code.google.com/p/osgboostpython/)找到了一个使用 Boost.Python 来包装 OSG 的项目，但是开发人员非常喜欢手工包装界面的每个部分，因此只完成了一小部分大型 OpenSceneGraph API。

[以那个基于 Boost.Python 的项目为灵感，我在https://github.com/JaneliaSciComp/osgpyplusplus](https://github.com/JaneliaSciComp/osgpyplusplus)创建了另一个 OpenSceneGraph Python 绑定项目。最终，我想使用这个 osgpyplusplus 项目来满足我所有的 python osg 需求。我将不胜感激帮助做好准备。目前，与 osgswig 相比，osgpyplusplus 存在以下弱点：

1.  osgpyplusplus 尚未在任何工作产品中使用
2.  构建环境很难设置，需要 Boost.Python 和 Pyplusplus
3.  最近没怎么关注osgpyplusplus，继续忽略它可能会生锈。
4.  尽管 osgpyplusplus 可能封装了大部分 OpenSceneGraph API，但可能有一些重要的缺失部分在有人尝试使用它开发重要项目之前无法识别。
5.  在这一点上为 osgpyplusplus 创建一个二进制模块安装程序对我来说需要做很多工作，所以请不要让我这样做。

# android - 将限制和偏移量传递给请求 - 适用于 Android 3.0 的 Facebook SDK

> ID：13601234
> 
> 赞同：1
> 
> 时间：2012-11-28T08:56:15.417
> 
> 标签：android, facebook

我可以使用修改 POST 参数

```
session.setParams(session.getParams(...).putString(...)) 
```

现在我想通过偏移量和限制。没有像 setGETParams(...) 和 getGETParams(...) 这样的函数。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:46:51.300

假设您设置了 Request all ，您可以添加额外的参数，如下所示：

```
// Get the current request parameters
Bundle myRequestParams = myRequest.getParameters();

// Add the additional parameters
myRequestParams.putString("limit", "100");
myRequestParams.putString("offset", "20");

// Update the request parameters
myRequest.setParameters(myRequestParams); 
```

# c# - WCF 服务应用程序：操作必须有一个类型为 Stream 的参数

> ID：13601238
> 
> 赞同：3
> 
> 时间：2012-11-28T08:56:36.393
> 
> 标签：c#, visual-studio-2010, wcf, web-services, rest

> **可能重复：**
> [带流的 WCF Rest Webservice](https://stackoverflow.com/questions/6366489/wcf-rest-webservice-with-stream)

我正在使用 C# 开发 WCF .NET Framework 4.0。

我用这个 Visual Studio 模板创建了这个 WCF：

![在此处输入图像描述](../Images/f92037acc6ccb1cee5c757b8b2b925c1.png)

我需要发送带有两个或三个参数的图像。这就是`OperationContract`我所拥有的（我要的是最后一个）：

```
[ServiceContract]
public interface IRestServiceImpl
{
    [OperationContract]
    [WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "orders/")]
    OrderContract[] allOrders();

    [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "filteredOrders/")]
    OrderContract[] GetOrders(IdsMessage msg);

    [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "completeFilteredOrders/")]
    OrderContract[] LoadCompleteFilteredOrders(IdsMessage msg);

    [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "saveEReports/")]
    Boolean SaveEReports(EReportContract[] eReports);

    [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "saveEReport/")]
    long SaveEReport(EReportContract eReport);

    [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Bare,
        UriTemplate = "UploadPhoto/{eReportId}/{imageType}")]
    Boolean UploadPhoto(string eReportId, string imageType, Stream fileContents);
} 
```

这是`Web.config`：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="EReportService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
        <endpoint address="" binding="webHttpBinding" contract="EReportService.IRestServiceImpl" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>
    <bindings>
      <webHttpBinding>
        <binding maxReceivedMessageSize="2097152" maxBufferSize="2097152" transferMode="Streamed"/>
      </webHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <connectionStrings>

  </connectionStrings>
</configuration> 
```

当我运行服务时，出现以下异常：

> 操作必须有一个类型为 Stream 的参数

如果我这样做：

```
[OperationContract]
[WebInvoke(Method = "POST",
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare,
    UriTemplate = "UploadPhoto")]
Boolean UploadPhoto(Stream fileContents); 
```

它工作得很好，但我需要用图像发送更多数据。

此服务针对**Android**平板电脑应用程序公开。以下代码显示了我现在如何将图像发送到服务器：

```
public static Boolean sendImage(String url, String filePath)
{
    try
    {
        MultiValueMap<String, Object> formData;

        Resource resource = new FileSystemResource(filePath);

        // populate the data to post
        formData = new LinkedMultiValueMap<String, Object>();
        formData.add(OrderSpringController.FILE, resource);

        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setAccept(Collections.singletonList(new MediaType("application","json")));

        // Sending multipart/form-data
        requestHeaders.setContentType(MediaType.MULTIPART_FORM_DATA);

        // Populate the MultiValueMap being serialized and headers in an HttpEntity object to use for the request
        HttpEntity<MultiValueMap<String, Object>> requestEntity = 
                new HttpEntity<MultiValueMap<String, Object>>(formData, requestHeaders);

        GsonHttpMessageConverter messageConverter = new GsonHttpMessageConverter();
        List<HttpMessageConverter<?>> messageConverters = new ArrayList<HttpMessageConverter<?>>();
        messageConverters.add(messageConverter);

        // Create a new RestTemplate instance
        RestTemplate restTemplate = new RestTemplate(true);
        restTemplate.getMessageConverters().add(messageConverter);

        // Make the network request, posting the message, expecting a String in response from the server
        ResponseEntity<Boolean> response = restTemplate.exchange(url, HttpMethod.POST, requestEntity,
                Boolean.class);

        // Return the response body to display to the user
        return response.getBody();
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    }
    return null;
} 
```

浏览到元数据端点 ( [http://localhost:2351/RestServiceImpl.svc](http://localhost:2351/RestServiceImpl.svc) ) 时发生错误。

**如何发送图像和参数？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:41:54.943

如果您切换到（BasicHttp 或 WSHttp）绑定，那么您可以通过组合单个数据类型来实现您的目标，包括通过属性和 Stream 对象本身的所有自定义参数。然后，您将使用*消息传递样式*而不是 RPC 对话。请注意 WCF DTO 装饰器的 [MessageContract] 系列。

```
[ServiceContract]
public interface ITransferService
{
    [OperationContract]
    RemoteFileInfo DownloadFile(DownloadRequest request);

    [OperationContract]
    void UploadFile(RemoteFileInfo request); 
}
[MessageContract]
public class DownloadRequest
{
    [MessageBodyMember]
    public string FileName;
}

[MessageContract]
public class RemoteFileInfo : IDisposable
{
    [MessageHeader(MustUnderstand = true)]
    public string FileName;

[MessageHeader(MustUnderstand = true)]
public long Length;

[MessageBodyMember]
public System.IO.Stream FileByteStream;

public void Dispose()
{ 
    if (FileByteStream != null)
    {
        FileByteStream.Close();
        FileByteStream = null;
    }
} 
```

}

这有必要的代码[http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

但我强烈建议[WCF：使用带有消息合同的流式传输](https://stackoverflow.com/questions/1339857/wcf-using-streaming-with-message-contracts)和[http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/25/wcf-streaming-inside-data-contracts.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/25/wcf-streaming-inside-data-contracts.aspx)

[这](http://msdn.microsoft.com/en-us/library/ms730255.aspx)也是必须的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:00:29.103

我创建了新类型并将其密封

它包含 3 个值（stream、reportid、reporttype）

下面是代码

```
namespace WcfService5
{

    [ServiceContract]
    public interface IService1
    {    
        [OperationContract]
        Boolean UploadPhoto(data fileContents);
    }

    [Serializable]
    public struct data 
    {
        System.IO.Stream mystream;
        string ereport;
        string reporttype;
    }
} 
```

这是服务代码

```
public class Service1 : IService1
{
    public bool UploadPhoto( data value)
    {
        return false;
    }     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T09:06:03.977

尝试重新排序您的参数，以便 Stream 是最后一个。

也看看[这里](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)

# ios - 使用 CGPathCreateCopyByTransforming 和 CGPathCreateCopy 导致的挤压内存泄漏

> ID：13601239
> 
> 赞同：2
> 
> 时间：2012-11-28T08:56:37.220
> 
> 标签：ios, memory-leaks

我正在使用 ARC 和 while 循环来调整几个 CGPathRef，直到它们符合我所拥有的一些约束，并且一旦满足 while 循环的条件，我就需要访问路径。

有人可以解释我的代码是如何泄漏的吗？

CGCreateCopy... 函数的文档说它们会创建一个新副本，您负责发布该副本。所以我相信我的代码路径（while 循环的结尾）确实释放了 Instruments 正在捕获并将泄漏对象归因于的路径引用。

仪器调用在下面的代码中表示，注释就在仪器突出显示的位置下方。

这个例程被赋予一个 GCSize 大小，它是一个矩形的大小和一个 int 值，它是一个最终将在此处创建的形状中显示的数值（形状的尺寸在某种程度上取决于这个字符串表示的大小价值）

我应该注意，代码确实会完全按照我的意愿生成所需的路径——我不是要求任何人调试这个块！但是它泄漏了，我不明白为什么。

```
float lineThickness = size.width;
float perimeterStrokeWidth = lineThickness * 2;
CGSize shadowOffset = CGSizeMake( perimeterStrokeWidth / 1.5, perimeterStrokeWidth * 1.25 );
float shadowBlur = perimeterStrokeWidth * 2.0;

NSString *edgeSymbol = @"°";
CGPathRef rightEdgePath = NULL;
CGPathRef leftEdgePath = NULL;
CGPathRef valueStringPath = NULL;
CGAffineTransform adjust, flip;
float pointsize, deltaX, deltaY, inset, pointSizeThatFits;
CGRect valueRect, edgeRect, leftEdgeRect, rectForValue;

CGSize trialSize = size;
pointsize = size.height;
CGPoint tdc; // top dead center
CGPoint bdc; // bottom dead center

NSLog(@"\n\n");
BOOL done = false;
int attempts = 0;
int attemptsRemaining = 11; // ensure no infinite looping

while ( ! done ) {
    done = YES; // presumptive close!  tests below will reset if they fail
    --attemptsRemaining;

    trialSize = CGSizeMake(trialSize.width, trialSize.height - attempts);
    ++attempts;

    lineThickness = trialSize.height / 60;
    perimeterStrokeWidth = lineThickness * 2;
    shadowOffset = CGSizeMake( perimeterStrokeWidth / 1.5, perimeterStrokeWidth * 1.0 );
    shadowBlur = perimeterStrokeWidth * 2.0;

    pointsize = [UIFont sizeFont:[UIFont fontWithName:@"Alameda"
                                                 size:pointsize]
                       toFitText:edgeSymbol
                      withinRect:CGRectMake(0,
                                            0,
                                            trialSize.width,
                                            trialSize.height)];
    // sizeFont:toFitText:withinRect: is a custom addition to UIFont that
    // recursively tries smaller and smaller pointsize values until the
    // text fits within the rectangle provided.

    CGPathRef tmpRightEdgePath = [edgeSymbol newPathWithFont:[UIFont fontWithName:@"Alameda" size:trialSize.height * 1.1]];
    // newPathWithFont: is a custom addition to NSString that returns a 
    // CGPathRef representing the glyphs that make up the string, rendered in
    // the font (and size) specified

    flip = CGAffineTransformMakeScale(-1.0, 1.0);

    CGPathRef tmpLeftEdgePath = CGPathCreateCopyByTransformingPath(tmpRightEdgePath, &flip);

    edgeRect = CGPathGetBoundingBox(tmpRightEdgePath);

    // Center the symbol vertically in the size we were given (maybe up a little because of the shadow below?)

    deltaY = ( (size.height / 2) - (edgeRect.size.height / 2) - edgeRect.origin.y);

    // Slide it over to the right edge, inset slightly for the shadow
    inset = shadowOffset.width + shadowBlur;
    deltaX = ( trialSize.width - edgeRect.origin.x - edgeRect.size.width - inset);

    adjust = CGAffineTransformMakeTranslation(deltaX, deltaY);
    CGPathRef tmpRightEdgePath1 = CGPathCreateCopyByTransformingPath(tmpRightEdgePath, &adjust);
    CGPathRelease(tmpRightEdgePath);
    tmpRightEdgePath = NULL;
    edgeRect = CGPathGetBoundingBox(tmpRightEdgePath1);

    leftEdgeRect = CGPathGetBoundingBox(tmpLeftEdgePath);
    deltaX = inset - leftEdgeRect.origin.x;
    adjust = CGAffineTransformMakeTranslation(deltaX, deltaY);
    CGPathRef tmpLeftEdgePath1 = CGPathCreateCopyByTransformingPath(tmpLeftEdgePath, &adjust);
    CGPathRelease(tmpLeftEdgePath);
    tmpLeftEdgePath = NULL;

    leftEdgeRect = CGPathGetBoundingBox(tmpLeftEdgePath1);

    rectForValue = CGRectMake(leftEdgeRect.origin.x + leftEdgeRect.size.width,
                                     leftEdgeRect.origin.y,
                                     edgeRect.origin.x - leftEdgeRect.origin.x - leftEdgeRect.size.width,
                                     leftEdgeRect.size.height);

    NSString *valueString = [NSString stringWithFormat:@"%i", value];
    pointSizeThatFits = [UIFont sizeFont:[UIFont fontWithName:@"Futura" size:trialSize.height]
                               toFitText:valueString
                              withinRect:rectForValue];
    valueStringPath = [valueString newPathWithFont:[UIFont fontWithName:@"Futura" size:pointSizeThatFits]];

    valueRect = CGPathGetBoundingBox(valueStringPath);
    deltaY = ( (size.height / 2) - (valueRect.size.height / 2) - valueRect.origin.y);
    deltaX = ( (trialSize.width / 2)  - (valueRect.size.width / 2)  - valueRect.origin.x);
    adjust = CGAffineTransformMakeTranslation(deltaX, deltaY);
    CGPathRef tmpValueStringPath1 = CGPathCreateCopyByTransformingPath(valueStringPath, &adjust);
    CGPathRelease(valueStringPath);
    valueStringPath = NULL;

    valueRect = CGPathGetBoundingBox(tmpValueStringPath1);

    CGPathRef tmpRightEdgePath2;
    CGPathRef tmpLeftEdgePath2;

    if ((valueRect.origin.x + valueRect.size.width) < edgeRect.origin.x) {
        float gapToClose = edgeRect.origin.x - (valueRect.origin.x + valueRect.size.width);
        adjust = CGAffineTransformMakeTranslation(- gapToClose, 0);
        {
            tmpRightEdgePath2 = CGPathCreateCopyByTransformingPath(tmpRightEdgePath1, &adjust);
            // ^^^^ Instruments reports 5.9% of leaks here
            CGPathRelease(tmpRightEdgePath1);
            tmpRightEdgePath1 = NULL;
        }

        adjust = CGAffineTransformMakeTranslation(gapToClose, 0);
        {
            tmpLeftEdgePath2 = CGPathCreateCopyByTransformingPath(tmpLeftEdgePath1, &adjust);
            // ^^^^ Instruments reports 23.5% of leaks here
            CGPathRelease(tmpLeftEdgePath1);
            tmpLeftEdgePath1 = NULL;
        }

        leftEdgeRect = CGPathGetBoundingBox(tmpLeftEdgePath2);
    } else {
        {
            tmpRightEdgePath2 = CGPathCreateCopy(tmpRightEdgePath1);
            CGPathRelease(tmpRightEdgePath1);
            tmpRightEdgePath1 = NULL;
        }
        {
            tmpLeftEdgePath2  = CGPathCreateCopy(tmpLeftEdgePath1);
            CGPathRelease(tmpLeftEdgePath1);
            tmpLeftEdgePath1 = NULL;
        }
        leftEdgeRect = CGPathGetBoundingBox(tmpLeftEdgePath2);
    }

    tdc.x = CGRectGetMidX(rectForValue);
    bdc.x = tdc.x;

    tdc.y = leftEdgeRect.origin.y - (tdc.x - leftEdgeRect.origin.x) * 0.08; // SWAG on the 10% of width

    if ((tdc.y - lineThickness/2.0) < 0) {
        done = NO;
    }

    bdc.y = leftEdgeRect.origin.y + leftEdgeRect.size.height + (leftEdgeRect.origin.y - tdc.y);

    float shadowness = shadowOffset.height;
    if ((bdc.y + shadowness) > size.height) {
        done = NO;
    }

    if (attemptsRemaining <= 0) {
        done = YES;
    }

    // And finally, assign them out if DONE!

    if (done) {
        leftEdgePath = CGPathCreateCopy(tmpLeftEdgePath2);
        // ^^^^ Instruments reports 35.3% of leaks here
        rightEdgePath = CGPathCreateCopy(tmpRightEdgePath2);
        // ^^^^ Instruments reports 35.3% of leaks here
        valueStringPath = CGPathCreateCopy(tmpValueStringPath1);
    }
    CGPathRelease(tmpLeftEdgePath2);
    tmpLeftEdgePath2 = NULL;
    CGPathRelease(tmpRightEdgePath2);
    tmpRightEdgePath2 = NULL;
    CGPathRelease(tmpValueStringPath1);
    tmpValueStringPath1 = NULL;
}
// what follows is the application of those paths within CGContext drawing calls. 
```

我从关于仪器和泄漏的其他有用答案中了解到，标记的行通常是创建即将泄漏的对象的位置。考虑到这一点，我向下看我可能会在哪里分配新路径而不首先释放先前的路径，但没有任何（我可以看到 - 但我承认我有点睡眼惺忪看着这个）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:26:10.010

为了其他发现自己被内存泄漏问题困扰的人的利益，我将在这里提供我的问题的答案，因为侦查过程可能会对您有所帮助。

在代码清单的中间，您可以看到我在哪里通知编译器我将很快使用两个 CGPathRef，最初在 if/then/else 的范围内，所以我需要在该块之外分配它们（？）所以它们是本地的我的日常生活。

```
CGPathRef tmpRightEdgePath2;
CGPathRef tmpLeftEdgePath2; 
```

通过将它们更改为：

```
CGPathRef tmpRightEdgePath2 = NULL;
CGPathRef tmpLeftEdgePath2 = NULL; 
```

这清除了在 if/then/else 语句期间报告的两个泄漏。

所以现在我剩下的两个泄漏报告在 if (done) {} 块内。

在 Instruments 中，查看 Leaks 工具， Cycles & Roots -> Leak Cycles -> foo History 我看到 10 个内存事件以 RefCt 为 1 结束，因此很明显是泄漏：

```
#  Category           Event Type    RefCt  ResponsibleLibrary  Responsible Caller
0  NSMutableRLEArray  Malloc        1      Foundation          -[NSConcreteAttributedString initWithString:attributes:]
1  NSMutableRLEArray  Release       0      Foundation          -[NSConcreteAttributedString dealloc]
2  NSMutableRLEArray  Free          0      Foundation          -[NSRLEArray dealloc]
3  CGPath             Malloc        1      CoreGraphics        CGTypeCreateInstance
4  CGPath             CFRelease     0      my app              my routine
5  CGPath             Free          0      my app              my routine
6  CGPath             Malloc        1      CoreGraphics        CGTypeCreateInstance
7  CGPath             CFRelease     0      my app              my routine
8  CGPath             Free          0      my app              my routine
9  CGPath             Malloc        1      CoreGraphics        CGTypeCreateInstance 
```

所以在我认为我完成了对路径的操作之后的某个时刻，必须发生另一个 CGCreateCopy... 样式调用，因为在我释放所有内容*之后调用了 Malloc。*因此，通过使用搜索/查找，我通过绘图代码继续前进，并找到了最后一个 CGPathCreateCopyByTransforming：

```
CGAffineTransform slightUp = CGAffineTransformMakeTranslation(0, - lineThickness * 2 );
leftEdgePath = CGPathCreateMutableCopyByTransformingPath(leftEdgePath, &slightUp);
rightEdgePath = CGPathCreateMutableCopyByTransformingPath(rightEdgePath, &slightUp); 
```

由于保留计数在该副本期间增加了一个，因此可以保证泄漏。所以我将它们改造成：

```
CGAffineTransform slightUp = CGAffineTransformMakeTranslation(0, - lineThickness * 2 );
CGMutablePathRef finalLeftEdgePath = CGPathCreateMutableCopyByTransformingPath(leftEdgePath, &slightUp);
CGPathRelease(leftEdgePath);
CGMutablePathRef finalRightEdgePath = CGPathCreateMutableCopyByTransformingPath(rightEdgePath, &slightUp);
CGPathRelease(rightEdgePath); 
```

然后我更改了我的 CGContextAddPath() 以匹配新的“最终”路径，以及最终发布调用以发布“最终”版本，我没有泄漏！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:18:23.380

我建议您检查所有“Create”或“CreateCopy”是否有相应的发布声明。例如：，看不到发布声明，

```
valueStringPath = CGPathCreateCopy(tmpValueStringPath1);
leftEdgePath = CGPathCreateCopy(tmpLeftEdgePath2);
rightEdgePath = CGPathCreateCopy(tmpRightEdgePath2); 
```

# regex - 获取url参数的正则表达式

> ID：13601243
> 
> 赞同：0
> 
> 时间：2012-11-28T08:56:49.967
> 
> 标签：regex

我试图做一个正则表达式来得到这样的东西：

字符串可以是

```
/dira/dirb/dirc/dirn?e=0?e=0?e=3?e=0?e 
```

或者

```
/dira/dirb/dirc/dire/dirw/dirw/diw?e=?e=?e=3?e=?e 
```

（子目录的数量是可变的）

我需要捕获`/dira/dirb/dirc/dirn?e=0`第一个 e 是否具有价值或`/dira/dirb/dirc/dirn?e=`第一个 e 是否具有价值：

我有这个：

```
(.+)(\?e=\d?) 
```

我尝试使用[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)但我什么也没找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:01:29.627

使用这个正则表达式：`(/dir?.)+(\?e=\d*)+\?e`

或者，如果`diw`第二个示例末尾的 不仅仅是您帖子中的错误，那么您的正则表达式应该是`(/dir.)+(\?e=\d*)+\?e`.

# asp.net - Woobox 如何自动创建 Facebook 应用程序？

> ID：13601245
> 
> 赞同：0
> 
> 时间：2012-11-28T08:56:53.007
> 
> 标签：asp.net, facebook-graph-api

据说您无法使用当前的 facebook API 自动创建应用程序。

[通过 API 创建和配置 Facebook 应用](http://facebook.stackoverflow.com/questions/7726219/create-and-configure-facebook-apps-via-api)

[如何通过 JS SDK 或 Open Graph API 以编程方式创建 Facebook 应用程序？（创建应用程序）](http://facebook.stackoverflow.com/questions/4719260)

然而 woobox.com 做到了。我在他们的门户中创建了一些摄影比赛。它没有要求额外的许可。没有出现任何对话框。我刚得到这些链接：

[http://www.facebook.com/pages/-/105892812908965?sk=app_422118604517529&app_data=dlt-1](http://www.facebook.com/pages/-/105892812908965?sk=app_422118604517529&app_data=dlt-1) http://www.facebook.com/pages/-/105892812908965?sk=app_451684954848385&app_data=dlt-1

他们是如何创建这些应用程序的？

> app_422118604517529 app_451684954848385

我希望

> www.facebook.com/pages/-/105892812908965?sk=app_SAME_APP_ID&app_data=WOOBOX_ID_1 www.facebook.com/pages/-/105892812908965?sk=app_SAME_APP_ID&app_data=WOOBOX_ID_2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:12:29.067

您认为无法动态创建 Facebook 应用程序/用户/组和页面是正确的。woo box 是许多其他页面选项卡应用程序正在做的事情。他们为不同的模板创建了许多应用程序，然后根据您的输入对其进行自定义。他们不会动态创建应用程序。这些动态应用程序从 app_data 字段中获取所需的数据。还有一点需要注意的是

> 一个应用程序不能在一个页面上安装两次

这就是为什么许多提供页面选项卡应用程序的服务提供商维护一个应用程序池来满足其用户需求的原因。

# android - 每当服务更改数据库时如何重新运行加载程序

> ID：13601248
> 
> 赞同：0
> 
> 时间：2012-11-28T08:57:06.587
> 
> 标签：android, android-fragments

每当从服务更新数据库中的数据时，如何重新运行加载程序以更新适配器数据？

**数据拉取服务：**

```
public class DataPullService extends Service {

    private Timer nstimer=new Timer();

    @Override
    public IBinder onBind(Intent intent) {

        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        NetworkConnection network=new NetworkConnection(this.getApplicationContext());
        boolean online = network.isOnline();
        if(online){
            try {
                nstimer.scheduleAtFixedRate(new TimerTask() {
                    public void run() {
                        DBHelper dbHelper=new DBHelper(getApplicationContext());
                        SQLiteDatabase mydb = dbHelper.getWritableDatabase();

                        ContentValues values=new ContentValues();
                        values.put(DBConstants.COMPANY, "Innodea");

                        mydb.insert(DBConstants.FAVORITE_TABLE, null, values);

                    }
                }, 0, 60000);
            } catch (Exception e) {
          }
        }
        return startId;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        nstimer.cancel();
    }
} 
```

**我的列表片段：**

```
public class MyListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

    private SimpleCursorAdapter mAdapter;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        setEmptyText("List loading...");
        setHasOptionsMenu(true);

        mAdapter = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_list_item_2, null, new String[]{DBConstants.SNO,DBConstants.COMPANY}, new int[]{android.R.id.text1,android.R.id.text2});

        setListAdapter(mAdapter);

        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        DBHelper dbHelper=new DBHelper(getActivity());
        return new LiveMyLoader(getActivity(),dbHelper);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor c) {
        mAdapter.swapCursor(c);
        setListAdapter(mAdapter);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        mAdapter.swapCursor(null);
    }

} 
```

上面的代码在创建片段时加载数据。那么当DB中的数据发生变化时如何更新这个列表片段（由DataPullService更新）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:32:52.650

我在 MyListFragment 中添加了一个 BroadcastReceiver，并在 onReceive 方法中重新启动了 Loader。

**在 MyListFragment-onActivityCreated 中：**

```
mycontext=this;
getActivity().registerReceiver(FragmentReceiver1, new IntentFilter("fragmentupdater")); 
```

**在 MyListFragment 中**

```
private final BroadcastReceiver FragmentReceiver1 = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            getLoaderManager().restartLoader(0, null, mycontext);
            Log.i("timer", "Broadcast received");
        }}; 
```

**在 MyListFragment-onDestroyView 中：**

```
@Override
    public void onDestroyView() {
        super.onDestroyView();
        getActivity().unregisterReceiver(FragmentReceiver1);

} 
```

**在 DataPullService 中：**

```
Intent intent=new Intent("fragmentupdater");
sendBroadcast(intent); 
```

现在每当服务更新数据库中的数据时，广播接收器就会收到并重新启动加载程序。

注意：在 Android 清单文件中注册接收器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:01:17.170

当你想刷新数据时，调用`getLoaderManager().restartLoader()`你的加载器。`restartLoader`将触发`onCreateLoader`再次调用。在这种情况下，它将加载新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:06:10.477

1 在类中创建静态列表。2 加载数据列表。3 每次更改数据库时重新加载列表（观察者模式） 4 每次重新加载列表时调用 notifyDatasetChanged() （在观察者的 update() 中）注意：使用无限数组适配器

# php - 更新 tumblr api 调用以使用其 api 的新版本

> ID：13601252
> 
> 赞同：1
> 
> 时间：2012-11-28T08:57:29.257
> 
> 标签：php, api, tumblr

我的网站曾经使用以下代码自动将所有用户生成的艺术品提交到 tumblr 博客。Tumblr 现在已将其 api 更改为 v2。任何有关更新如下代码块以使用新版本的 api 的帮助都将受到极大的欢迎。谢谢。

```
//submit to tumblr blog
// Authorization info
$tumblr_email    = 'XXXXXXXXXX@drawaplanet.com';
$tumblr_password = 'XXXXXXXXXXX';

$post_type  = 'photo';
$caption = $userCaption;
$post_title = '';
$post_body  = '';
$source = 'http://www.drawaplanet.com/drawaplanet/gallery/' . $filename;
$click_through_url = 'http://www.drawaplanet.com/planet.php?s=' . $source; 

// Prepare POST request
$request_data = http_build_query(
array(
    'email'     => $tumblr_email,
    'password'  => $tumblr_password,
    'type'      => $post_type,
    'caption'   => $caption,
    'title'     => $post_title,
    'body'      => $post_body,
    'source'    => $source,
    'click-through-url' => $click_through_url,
    'generator' => 'DRAWAPLANET'
)
);

// Send the POST request (with cURL)
$c = curl_init('http://www.tumblr.com/api/write');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, $request_data);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($c);
$status = curl_getinfo($c, CURLINFO_HTTP_CODE);
curl_close($c); 
```

# java - 如何用 Netty 搭建一个 FTP 服务器？

> ID：13601253
> 
> 赞同：4
> 
> 时间：2012-11-28T08:57:37.467
> 
> 标签：java, ftp, netty

我已经用 netty 构建了一个服务器应用程序，现在它也需要充当 ftp 服务器。基本上我只需要支持身份验证/登录和通过 ftp 上传文件。

不幸的是，似乎没有纯 java 的 ftp 实现，所以我可以简单地编写自己的解码器/编码器/处理程序集。Apache MINA 提供了一个完整的 ftp 服务器，但是我怎么能用 netty 简单易用呢？

我已经为 web 服务支持集成了码头，但我也找不到码头的 ftp 支持。

得到一些提示会很棒。我想我检查了所有关于“java ftp”的谷歌点击，但它们似乎只是提供了 ftp 客户端的东西。

最好的问候，马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:16:48.270

如果你感兴趣的是 Netty，我找到了一个基于它的开源 FTP 服务器： [https ://github.com/waarp/WaarpFtp](https://github.com/waarp/WaarpFtp)

也许您可以重用项目的某些部分？我想这个源文件可能是你最感兴趣的： [https ://github.com/waarp/WaarpFtp/blob/master/src/main/java/org/waarp/ftp/core/control/NetworkHandler.java](https://github.com/waarp/WaarpFtp/blob/master/src/main/java/org/waarp/ftp/core/control/NetworkHandler.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T19:31:34.997

我编写了 netty 处理程序，用于通过 FTP - [netty-ftp-receiver](https://github.com/alexkasko/netty-ftp-receiver)接收文件。它小而简单，可以用作起点。

# kendo-ui - Kendo UI/Mobile - 获取 JSONP 并附加到列表视图

> ID：13601254
> 
> 赞同：1
> 
> 时间：2012-11-28T08:57:38.477
> 
> 标签：kendo-ui

我刚开始使用 Kendo mobile（到目前为止印象深刻 - 来自 JQM）。我正在尝试将邮政编码传递给返回一些 json（该区域附近的房屋）的 url，然后使用 Datasource 将其附加到列表视图中。但是，它在我刚刚得到的控制台中失败了：

```
Error [object Object] 
```

这是我的代码：**更新**

```
var app = new kendo.mobile.Application(document.body, 
{
    transition:'slide'
});

function onBodyLoad() {
    //document.addEventListener("deviceready", onDeviceReady, false);
    // Use the following for testing in the browser
    getProperties(onResult);
}

function getProperties(callback) {

    var template = kendo.template($("#propertiesListViewTemplate").html());

    var dataSource = new kendo.data.DataSource({
        transport: {
            read: {

                url: 'http://www.someurl.me/getproperties.php?postcode=hx59ay',
                dataType: "jsonp"
            }
        },

        schema: {
            data: "listing" //??? Not sure what this should be???
        },

        error: function(e) {
            console.log("Error " + e);
        },
        change: function() {
            $("#propertyResultListView").html(kendo.render(template, this.view()));
            console.log(this.view());
        }
    });
    dataSource.read();
    $("#propertyResultListView").kendoMobileListView({dataSource:dataSource,template: $("#propertiesListViewTemplate").html()});

}

function onResult(resultData) {
    console.log("Results " + listing);
    $("#propertyResultListView").kendoMobileListView({dataSource: kendo.data.DataSource.create({data:resultData}),
        template: $("#propertiesListViewTemplate").html()});
} 
```

我确信这取决于数据源的模式部分，但我不知道它应该是什么（文档并没有真正帮助）。

返回的 JSON 是：

```
{"country":"England","result_count":510,"longitude":-1.826866,"area_name":"Caldercroft, Elland HX5","listing":[{"image_caption":"Main Image","status":"for_sale","num_floors":"0","listing_status":"sale","num_bedrooms":"2","agent_name":"Daniel & Hirst","latitude":53.688934,"agent_address":"110 Commercial Street","num_recepts":"0","property_type":"Detached","country":"England","longitude":-1.843375,"first_published_date":"2012-10-11 19:05:42","displayable_address":"Elland HX5","street_name":"EXLEY LANE","num_bathrooms":"0","thumbnail_url":"http://images.zoopla.co.uk/f7f6791d95dadef11b340be2949bd8957079168f_80_60.jpg","description":"Comments","post_town":"Elland","details_url":"http://www.zoopla.co.uk/for-sale/details/26491359","agent_logo":"http://static.zoopla.co.uk/zoopla_static_agent_logo_(120721).png","price_change":[{"date":"2012-10-11 16:45:02","price":"37500"}],"short_description":"We are pleased to offer ...","agent_phone":"01484 954009","outcode":"HX5","image_url":"http://images.zoopla.co.uk/f7f6791d95dadef11b340be2949bd8957079168f_354_255.jpg","last_published_date":"2012-11-21 17:31:46","county":"West Yorkshire","price":"37500","listing_id":"26491359"} 
```

有人能指出我正确的方向吗？整个数据源架构让我感到困惑。如果它有助于描述我在 JQM 中尝试做的事情，我会做类似的事情

```
 $.getJSON(serviceURL + 'getproperties.php?postcode=' + postcode + '&minimum_beds=' + minimumBeds + '&minimum_price=' + minimumPrice + '&maximum_price=' + maximumPrice , function(data) {

    $('#propertyList li').remove();

    // Loop through json data and append to table
    listings = data.listing;
    $.each(listings, function(index, property) {

        console.log(property.image_url);
        console.log(property.price);

        $('#propertyList').append('<li><a href="propertydetails.html?id=' + property.listing_id + '">' +
                '<img src="' + property.thumbnail_url + '"/>' +
                '<h6>' + property.property_type + '</h6>' +
                '<p>' + property.displayable_address + '</p>' +
                '<p><strong>&pound;' + property.price + '</strong></p>');

        $('#propertyList').listview('refresh');
    });

}); 
```

模板

```
<!-- Template for Property results, need to change below fields -->
<script type="text/x-kendo-template" id="propertiesListViewTemplate">
    <h4>${property_type}</h4>
    <p>${street_name}</p>
</script> 
```

*** 更新 - 为 Pechka 答案更新代码 ****

我现在已经根据您提到的链接更改了我的服务以返回 jsonp（带有回调）。我现在可以在开发人员工具网络选项卡中看到 jsonp -

jQuery17106739131917711347_1354193012656({"country":"England","re​​sult_count":179,"longitude":-1.83261282209016,"area_name":"Elland","listing":[{"image_caption":"","re​​ntal_prices":{ "per_week":75,"accurate":"per_month","per_month":"325"},"status":"to_rent","num_floors":"0","listing_status":"rent","num_bedrooms" :"1","agent_name":"Boococks","纬度":53.68668 ...

不过，我的模板中没有填充任何内容，因此没有创建列表视图（我意识到这可能是由于我对剑道的陌生）。你能看到我哪里出错了吗，与 JQM 相比，这似乎非常棘手......再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:56:39.223

我建议您将服务配置为返回[jsonp](http://en.wikipedia.org/wiki/JSONP) (jsonwithpadding)。

[您可以在此](http://demos.kendoui.com/mobile/listview/pull-with-endless.html)演示中看到绑定到 jsonp 的数据源。使用浏览器开发工具的网络选项卡，查看格式的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:21:54.833

好的，我只是想简化这件事，看看错误发生在哪里。
因此，您使用 parameterMap 和 Model 定义 DataSource：

```
var dataModel = new kendo.data.Model.define({
    id: 'listing_id' //specifies a unique key, every other key is mapped automatically
});
var dataSource = new kendo.data.DataSource({
    transport: {
        parameterMap:function (_data, _operation) {
            if (_operation == 'read') {
                return {
                    postcode: 'bd11db' //sending parameters via parameterMap
                };

            }
        },
        read: {
            url: 'http://www.someurl.me/getproperties.php',
            dataType: "jsonp"
        }
    },

    schema: {
        //data: "ResultSet.Result" //data specifies which "node" to use for the actually returned data, since you want the complete object you dont need to specify this
        model: dataModel //using the specified model
    },

    error: function(e) {
        console.log("Error " + e);
    },
    change: function() {
        $("#propertyResultListView").html(kendo.render(template, this.view()));
        console.log(this.view());
    }
});
dataSource.read(); 
```

抱歉，乍一看，我并没有真正看透所有这些回调，但是这个数据源至少应该返回（或记录）您从服务器获得的 JSON

可能无法完全解决您的问题，但可能是对正确方向的提示；）随意评论不清楚或（希望不是）错误的事情

祝你好运 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T22:46:54.200

尝试这个：

将您的 jsonp 回复包装在类似“results”的 var 中，使其看起来像这样：

```
jQuery1820051476528169587255_1366217103715({"results":[{"id":"3","entry_stamp":"November 30, -0001 12:00 am","comments":null}]}) 
```

指定包装变量：

```
schema: {
        data: "results" //the portion of your jsonp that you want
    } 
```

调用模板：

```
$("#propertyResultListView").kendoMobileListView({
   dataSource:dataSource,
   template: $("#propertiesListViewTemplate").html()}); 
```

您不需要调用 dataSource.read(); 因为对模板的调用会自动执行此操作。在下面尝试这个作为一个完整的代码视图（我删除了一些可能导致问题的其他项目 - 一旦你让这个简单的版本工作，你将需要替换它们：

```
 var dataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: 'http://www.someurl.me/getproperties.php?postcode=hx59ay',
                    dataType: "jsonp"
                }
            },
            schema: {
                data: "results" //your reply data
            }

        });

        $("#propertyResultListView").kendoMobileListView({
            dataSource:dataSource,
            template: $("#propertiesListViewTemplate").html()

        }); 
```

# ruby - 将 PDF 转换为 .txt 给了我一个空的 .txt 文件

> ID：13601255
> 
> 赞同：0
> 
> 时间：2012-11-28T08:57:44.233
> 
> 标签：ruby, pdf, text

嗨，我正在尝试用 Ruby 阅读 pdf，首先我想将其转换为 txt。`path`是 PDF 的路径，关键是我得到了一个空的 .txt 文件，正如有人告诉我的那样，这是一个 pdftotext 问题，但我不知道如何解决它。

```
 spec = path.sub(/\.pdf$/, '')
  `pdftotext #{spec}.pdf`
  file = File.new("#{spec}.txt", "w+")
  text = []
  file.readlines.each do |l|
  if l.length > 0
    text << l
    Rails.logger.info l
  end
 end
 file.close 
```

我的代码有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:57:13.303

不可能从***每个***PDF 中提取文本。一些 PDF 文件使用*字体编码*，使得无法使用简单的工具提取文本，例如`pdftotext`（一些 PDF 文件甚至完全不受使用我已知的***任何***工具直接提取文本的影响——在这些情况下，您必须应用 OCR首先有机会提取文本...）。

因此，如果您一直使用同一个“奇怪”的 PDF 文件测试您的代码，您很可能会对您的代码感到沮丧，而实际上问题出在 PDF 上。

首先确保命令行用法`pdftotxt`适用于给定的 PDF，然后使用该 PDF 测试（并进一步开发）您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T11:31:13.693

问题是您正在以写入（“w”）模式打开文件，这会截断文件。[您可以在http://ruby-doc.org/core-1.9.3/IO.html](http://ruby-doc.org/core-1.9.3/IO.html)查看文件模式表及其含义。

尝试这样的事情，它使用 pdftotext 选项将文本发送到 stdout 以避免创建临时文件并使用块来获得更多惯用的 ruby​​。

```
text = `pdftotext #{path} -`
text.split.select { |line|
  line.length > 0
}.each { |line|
  Rails.logger.info(line)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:02:28.433

您需要以写入权限打开 txt 文件。

```
file = File.new("#{spec}.txt", "w") 
```

您可以咨询[如何在 Ruby 中创建文件](https://stackoverflow.com/questions/7911669/create-file-in-ruby)

* * *

**更新**：您的代码不完整，看起来有问题。

1.  不能说是什么`path`
2.  看起来您正在尝试读取您打算写入的文本文件`file.readlines.each`
3.  拼写检查`length`你有它`l.lenght`

您可能想要粘贴实际代码。

* * *

检查这个要点[https://gist.github.com/4160587](https://gist.github.com/4160587)

如前所述，您的代码无法正常工作，因为您正在读取和写入同一个文件。

**例子**

`file_write.rb`进行文件写入操作的Ruby 代码

```
pdf_file = File.open("in.txt") 
output_file = File.open("out.txt", "w") # file to which you want to write
#iterate over input file and write the content to output file
pdf_file.readlines.each do |l|
    output_file.puts(l)
end
output_file.close
pdf_file.close 
```

示例 txt 文件`in.txt`

```
Some text in file
Another line of text

1\. Line 1
2\. Not really line 2 
```

运行后`file_write.rb`，您应该会看到名为 out.txt 的新文件，其内容与`in.txt`您可以根据需要更改输入文件的内容相同。在您的情况下，您将使用 pdf 阅读器来获取内容并将其写入文本文件。基本上第一行代码会改变。

# jquery - 在jQuery中使用类名获取元素ID

> ID：13601257
> 
> 赞同：0
> 
> 时间：2012-11-28T08:57:52.757
> 
> 标签：jquery, html-table

在这里，我有 jQuery 动态生成的 HTML 标记说..

```
<tr id="CustomerScreen" class="rows"></tr>
<tr id="TraderScreen" class="rows"></tr>
<tr id="DistributorScreen" class="rows"></tr> 
```

我将所有动态创建的表行类名设置为行，然后我想使用类名循环它并使用每个获取特定行的 id。但我无法得到，这就是我尝试过的..

```
$('.rows').each(function () {
            var ar = this.id; 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:00:37.763

您的代码是正确的（假设 a `});`），**前提**是您运行它时元素存在。在循环中，`ar`将接收`"CustomerScreen"`，然后`"TraderScreen"`，然后`"DistributorScreen"`。

请注意上面的附带条件。例如，这将按`id`顺序显示这三个值：

```
<table>
<tbody>
<tr id="CustomerScreen" class="rows"></tr>
<tr id="TraderScreen" class="rows"></tr>
<tr id="DistributorScreen" class="rows"></tr>
</tbody>
</table>
<script>
$('.rows').each(function () {
    var ar = this.id;
    console.log(ar);
});
</script> 
```

[实例](http://jsbin.com/iquriq/1)| [来源](http://jsbin.com/iquriq/1/edit)

...因为脚本位于文档中的元素之后。

相反，这不会显示任何内容：

```
<script>
$('.rows').each(function () {
    var ar = this.id;
    console.log(ar);
});
</script>
<table>
<tbody>
<tr id="CustomerScreen" class="rows"></tr>
<tr id="TraderScreen" class="rows"></tr>
<tr id="DistributorScreen" class="rows"></tr>
</tbody>
</table> 
```

[实例](http://jsbin.com/iquriq/2)| [来源](http://jsbin.com/iquriq/2/edit)

...因为脚本位于元素*之上*，并且它们在运行时还不存在。

这就是为什么最好将脚本放在文档的最后，就在结束`</body>`标记之前的原因之一。或者，如果您*必须*将脚本放在元素之上，您可以使用 jQuery[`ready`事件](http://api.jquery.com/ready)：

```
<script>
$(function() {
    $('.rows').each(function () {
        var ar = this.id;
        console.log(ar);
    });
});
</script>
<table>
<tbody>
<tr id="CustomerScreen" class="rows"></tr>
<tr id="TraderScreen" class="rows"></tr>
<tr id="DistributorScreen" class="rows"></tr>
</tbody>
</table> 
```

[实例](http://jsbin.com/iquriq/3)| [来源](http://jsbin.com/iquriq/3/edit)

jQuery 将在 DOM 加载后运行该函数。但这确实适用于库代码；对于您自己的页面代码，只需将脚本放在末尾即可。

# asp.net - 每次打开网站时，Visual Studio 2010 都会创建新项目

> ID：13601263
> 
> 赞同：0
> 
> 时间：2012-11-28T08:58:20.353
> 
> 标签：asp.net, visual-studio-2010, visual-studio, web

我正在为一个拥有许多 ASP.NET 网站（而不是 ASP.NET Web 应用程序）的客户工作。每次我在 VS2010 中打开其中一个网站时，我都必须告诉 Visual Studio 使用 IIS Express，而对于较旧的网站，我必须告诉 VS2010 我不想将其转换为 .NET 4。我可以在标题中看到栏，一旦加载了网站，每次都会创建一个新的解决方案文件，因为它显示“[网站名称]（NN）”，并且每次加载网站时，NN都会增加1。如果我很方便可以直接打开解决方案文件，或者在某处更改设置，告诉 VS2010 使用该站点的现有解决方案文件。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:59:44.787

以下是实现这一目标所需的步骤：

1.  通过单击文件 -> 新建 -> 项目 -> 其他项目类型 -> Visual Studio 解决方案添加一个空解决方案
2.  在您的解决方案资源管理器中，除了空解决方案的一个条目外，什么都不显示，右键单击该解决方案条目，单击添加 - > 现有网站，然后在文件系统中找到现有网站并确认。

完毕。

# android - 更新从 Google Play 应用程序抽屉中隐藏的应用程序

> ID：13601266
> 
> 赞同：0
> 
> 时间：2012-11-28T08:58:35.563
> 
> 标签：android, google-play

所以我有一个问题，在我的 App Manifest 中，我删除了这个：

```
<intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

因为我的应用程序是隐藏的，现在，当我发布新版本时，我注意到 Google Play 不要求更新，只有一个“卸载”按钮，这是因为我删除了意图过滤器？，版本代码和名称都可以，

谢谢 。

# php - 使用 Geany 进行 XDebug？

> ID：13601267
> 
> 赞同：5
> 
> 时间：2012-11-28T08:58:38.087
> 
> 标签：php, xdebug, geany

是否可以使用 Geany 配置 PHP XDebug？

XDebug 位于：http: [//xdebug.org/](http://xdebug.org/) 和 Geany 位于：[http ://www.geany.org/](http://www.geany.org/)

如果可能，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:05:21.980

不是现在。

不过，它已经在[Geany 插件愿望清单](http://www.geany.org/Support/PluginWishlist)中出现了一段时间，所以它总有一天会发生。

相反，您可以使用[此处](http://xdebug.org/docs/remote)列出的 Eclipse 和其他一些 xdebug 插件。

# java - Android：imageview 可见性和删除 imageviews 之间的空间

> ID：13601270
> 
> 赞同：2
> 
> 时间：2012-11-28T08:58:46.667
> 
> 标签：java, android, android-imageview

嗨，我面临以下情况的问题

1）我有一个带有所有屏幕图标的通用标题..在一个屏幕中我有一个列表视图..当我点击列表时它会触发一个意图，它是一个登录屏幕，当我输入密码时图标应该出现在标题上...我所做的是最初我使图标在布局中不可见，下面是我的`login`代码..

```
ImageView imgView = (ImageView)findViewById(R.id.image1); 

           btnLogin.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    String password = etPassword.getText().toString();
 if(password.equals("1234")){
                        lblResult.setText("password successful.");
                        imgView.setVisibility(View.VISIBLE);

                    } else {
                        lblResult.setText("wrong password");}

                    finish();} 
```

但它不工作..我错了..

2）我在标题上有4个图像..我在中间图标上设置了可见性..当图标不可见时，我希望其余图标并排..但现在我在图标之间有一个空白空间我怎么能删除那个空间。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:23:46.510

```
now i am getting a blank space between the icons how can i remove that space. 
```

[View.GONE](http://developer.android.com/reference/android/view/View.html#GONE)这个视图是不可见的，它不占用任何空间用于布局。

[View.INVISIBLE](http://developer.android.com/reference/android/view/View.html#INVISIBLE)这个视图是不可见的，但它仍然占用空间用于布局。

# amazon-web-services - Boto AWS Glacier - 检索存档

> ID：13601271
> 
> 赞同：5
> 
> 时间：2012-11-28T08:58:47.373
> 
> 标签：amazon-web-services, boto, amazon-glacier

我实际上是在使用 python boto 将数据存储在我的冰川保险库中并启动检索 jov 和库存作业。

这工作得很好。

但是我没有找到任何关于从冰川下载档案的方法的例子？

我启动了检索 jov 和库存作业，并在 4 小时后获得了请求 ID 等，但是如何使用 boto 获取我的存档？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T03:12:36.347

要检索您的库存，您可以执行以下操作：

```
import boto.glacier

c = boto.glacier.connect_to_region('us-east-1')
vault = c.get_vault('myvault')
job = vault.get_job('<your job id>')
response = job.get_output()
print response.read() 
```

这有点令人困惑，因为对 get_output() 的调用返回了一个类似 dict 的对象，但该对象有一个 read 方法，您可以使用它来检索与响应关联的数据。

# android - Sqlite 查询 Android

> ID：13601277
> 
> 赞同：2
> 
> 时间：2012-11-28T08:58:59.293
> 
> 标签：android, sqlite

```
public String getCourse_info (String courseID) {

        String[] columns = new String[] {KEY_COURSE_ID, KEY_COURSE_TITLE, KEY_COURSE_CNUMBER, KEY_COURSE_SUBJECT, KEY_COURSE_DAYS,
                KEY_COURSE_START_TIME, KEY_COURSE_END_TIME, KEY_COURSE_PROFESSOR, KEY_COURSE_BUILDING, KEY_COURSE_ROOM_NUMBER };

        Cursor c = ourDataBase.query(DATABASE_TABLE_COURSES, columns, KEY_COURSE_ID + "=?", new String[]{courseID}, null, null, null);
        String result = "";

        int iCid = c.getColumnIndex(KEY_COURSE_ID);
        int iCtitle = c.getColumnIndex(KEY_COURSE_TITLE);
        int iCcnumber = c.getColumnIndex(KEY_COURSE_CNUMBER);
        int iCsubject = c.getColumnIndex(KEY_COURSE_SUBJECT);
        int iCdays = c.getColumnIndex(KEY_COURSE_DAYS);
        int iCstart_time = c.getColumnIndex(KEY_COURSE_START_TIME);
        int iCend_time = c.getColumnIndex(KEY_COURSE_END_TIME);
        int iCprofessor = c.getColumnIndex(KEY_COURSE_PROFESSOR);
        int iCbuilding = c.getColumnIndex(KEY_COURSE_BUILDING);
        int iCroom_number= c.getColumnIndex(KEY_COURSE_ROOM_NUMBER);

        for(c.moveToFirst(); !c.isAfterLast();c.moveToNext()){
            result = result + c.getString(iCid)+ " " +c.getString(iCtitle)+ " "+c.getString(iCcnumber)+" "+ c.getString(iCsubject) + " "+
                    c.getString(iCdays)+ " "+ c.getString(iCstart_time)+ " "+ c.getString(iCend_time) +" " + 
                    c.getString(iCprofessor) + " "+ c.getString(iCbuilding) + " " + c.getString(iCroom_number)+ "\n" ;
        }
        Log.d("hello", result+"test2");
        return result;
    } 
```

好的，我正在尝试在数据库中的一张表上运行此代码。问题是如果我通过数据库中的第一个 course_id，它就可以完美运行。但是当我尝试在之后放置 2nd 或任何 course_id 时，字符串不会显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:05:50.337

也许是因为你使用的条件

> ```
> for(c.moveToFirst(); !c.isAfterLast();c.moveToNext()) 
> ```

失败了。

表示光标在检索到第一条记录后到达记录的末尾。

使用这些语句并检查它是否在检索第一条记录后不会到达表的末尾。

```
if  (c.moveToFirst()) {

            Log.d("Entering","moveToFirst");
              do {
                        int iCid = c.getColumnIndex(KEY_COURSE_ID);
    int iCtitle = c.getColumnIndex(KEY_COURSE_TITLE);
    int iCcnumber = c.getColumnIndex(KEY_COURSE_CNUMBER);
    int iCsubject = c.getColumnIndex(KEY_COURSE_SUBJECT);
    int iCdays = c.getColumnIndex(KEY_COURSE_DAYS);
    int iCstart_time = c.getColumnIndex(KEY_COURSE_START_TIME);
    int iCend_time = c.getColumnIndex(KEY_COURSE_END_TIME);
    int iCprofessor = c.getColumnIndex(KEY_COURSE_PROFESSOR);
    int iCbuilding = c.getColumnIndex(KEY_COURSE_BUILDING);
    int iCroom_number= c.getColumnIndex(KEY_COURSE_ROOM_NUMBER);

result = result + c.getString(iCid)+ " " +c.getString(iCtitle)+ " "+c.getString(iCcnumber)+" "+    c.getString(iCsubject) + " "+
                c.getString(iCdays)+ " "+ c.getString(iCstart_time)+ " "+ c.getString(iCend_time) +" " + 
                c.getString(iCprofessor) + " "+ c.getString(iCbuilding) + " " + c.getString(iCroom_number)+ "\n" ;
    }

      }

       while (c.moveToNext());
        } 
        c.close();    
 } 
```

如果它进入最后一条记录，那么它将产生`ArrayIndexOutOfBoundsException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:52:43.410

请参阅尝试使用此代码的 sqlite 查询，

```
Cursor query = db.query(table, columns, selection, selectionArgs, groupBy,
                having, orderBy);
if (query.getCount() > 0) {
        for (int i = 0; i < query.getCount(); i++) {
            int KEY_COURSE_ANY = query.getString(query.getColumnIndex(KEY_COURSE_ANY));
        }
    } 
```

# data-structures - Lint 警告：指针成员没有被析构函数直接释放或归零

> ID：13601279
> 
> 赞同：1
> 
> 时间：2012-11-28T08:59:08.527
> 
> 标签：data-structures, compiler-warnings, lint

我有一个在双向链表 (DLL) 上工作的操作 DeleteCurrentNode(...)。此操作的目的是删除指向我的 DLL 光标/索引的节点。（我在列表上有一个光标/索引指向最近使用的节点）

我已经为调用 DeleteCurrentNode(...) 直到列表为空的析构函数编写了代码。在编译期间，会引发以下 lint 警告。警告：指针成员没有被析构函数直接释放或归零。

如何解决这个警告？

谢谢你的帮助 ！！

# java - 默认选择节点

> ID：13601280
> 
> 赞同：0
> 
> 时间：2012-11-28T08:59:09.117
> 
> 标签：java, swing, jtree

我知道在 Google 上可以找到很多类似的问题，但我似乎无法以某种方式使其工作：

我有一个 JTree（称为项目），这棵树有不同的节点（文件夹或表）。我可以将文件夹和表添加到 JTree 并在重新加载模型后显示。现在我想做的是，一旦我向树中添加了一个新的文件夹或表，就应该选择并展开这个，但我无法让它工作。

我将尝试只选择代码的重要部分：

```
public void openProject() {

    final JFileChooser select = new JFileChooser();
    FileNameExtensionFilter filter = new FileNameExtensionFilter(
            "Project Files (.prj)", "prj");
    select.addChoosableFileFilter(filter);

    int returnVal = select.showOpenDialog(null);
    String path = select.getSelectedFile().getPath();
    String extention = path.substring(path.length() - 4);

    if (returnVal == JFileChooser.APPROVE_OPTION
            && extention.equalsIgnoreCase(".prj")) {

        try {
            XMLDecoder d = new XMLDecoder(new BufferedInputStream(
                    new FileInputStream(path)));
            setModel((TreeModel) d.readObject());
            d.close();
            // restore status
            List<TreeNode[]> expanded = (List<TreeNode[]>) d.readObject();
            for (int i = expanded.size() - 1; i > -1; i--) {
                TreeNode[] ar = expanded.get(i);
                expandPath(new TreePath(ar));
            }
            projectPath = path;
        } catch (FileNotFoundException ex) {
        }
        setRootVisible(true);
        reloadTree();
        root = (DefaultMutableTreeNode) getModel().getRoot();
    }
} 
```

这部分将打开一个现有项目（新项目的类似功能），定义根，设置模型并重新加载树。

如果我现在尝试：

```
public void addTable(){
    Table table = new Table();
    table.setUserObject("Table1");
    try{
        DefaultMutableTreeNode last = (DefaultMutableTreeNode) getLastSelectedPathComponent();
        last.add(table);        
    }catch(Exception e){
        root.add(table);
    }
    TreePath path = new TreePath(table.getPath());
    setSelectionPath(path);
    expandPath(path);
    reloadTree();
}

public void addFolder(){
    Folder folder = new Folder();
    folder.setUserObject("Folder1");
    try{
        DefaultMutableTreeNode last = (DefaultMutableTreeNode) getLastSelectedPathComponent();
        last.add(folder);

    }catch(Exception e){
        root.add(folder);
    }
    TreePath path = new TreePath(folder.getPath());
    setSelectionPath(path);
    expandPath(path);
    reloadTree();
} 
```

它将添加节点，但不会扩展路径或选择新创建的节点。如果我手动选择节点，我可以将它用作带有 getLastSelectedPathComponent 的父节点。

我在哪里弄错了这个概念？我想我确实有一个非常简单的错误，但我在这里挣扎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:15:14.940

我想您可能希望看到之前在此处发布的类似问题：

[Java：如何以编程方式选择和扩展 JTree 中的多个节点？](https://stackoverflow.com/questions/10242896/java-how-to-programmatically-select-and-expand-multiple-nodes-in-a-jtree)

看到这个并告诉我它是否有帮助:)

# c# - 如何获取 TransferUtilityUploadRequest 的 AmazonId2

> ID：13601288
> 
> 赞同：1
> 
> 时间：2012-11-28T09:00:00.577
> 
> 标签：c#, amazon-s3

我正在使用[适用于 .NET 1.5.9.0 的 AWS 开发工具包](http://nuget.org/packages/AWSSDK)并进行了更改

```
var putObjectRequest = new PutObjectRequest
{
    BucketName = bucketName,
    Key = key,
    FilePath = filePath,
    CannedACL = S3CannedACL.PublicRead
};
try
{
    using (var pubtObjectResponse = client.PutObject(putObjectRequest))
    {
        Logger.Application.DebugFormat("uploaded {0} to {1} on bucket {2}, got id {3}", filePath, remotePath, bucketName, pubtObjectResponse.AmazonId2);
    }
}
catch (Exception ex)
{
    Logger.Application.Fatal(string.Format("could not upload {0} to {1} on bucket {2}", filePath, remotePath, bucketName), ex);
} 
```

由于

> System.Net.WebException：请求被中止：请求被取消。--->
> System.IO.IOException：在写入所有字节之前无法关闭流。
> 在 System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean aborting)
> --- 内部异常堆栈跟踪结束 ---
> 在 System.Net.ConnectStream.CloseInternal(Boolean internalCall, Boolean aborting)
> 在 System.Net.ConnectStream.System .Net.ICloseEx.CloseEx(CloseExState closeState)
> at System.Net.ConnectStream.Dispose(Boolean disposing)
> at System.IO.Stream.Close()
> at Amazon.S3.AmazonS3Client.getRequestStreamCallback[T](IAsyncResult result)
> at Amazon。 S3.AmazonS3Client.endOperation[T](IAsyncResult 结果)
> 在 Amazon.S3.AmazonS3Client.EndPutObject(IAsyncResult asyncResult)

通过[建议](https://forums.aws.amazon.com/thread.jspa?messageID=285161)_

```
var transferUtilityUploadRequest = new TransferUtilityUploadRequest()
    .WithBucketName(bucketName)
    .WithKey(key)
    .WithFilePath(filePath)
    .WithCannedACL(S3CannedACL.PublicRead);
try
{
    transferUtility.Upload(transferUtilityUploadRequest);

    // how do I get success-state in here?
    // how do I get AmazonId2 in here?
}
catch (Exception ex)
{
    Logger.Application.Fatal(string.Format("could not upload {0} to {1} on bucket {2}", filePath, remotePath, bucketName), ex);
} 
```

很明显我要做什么，但我如何访问所需的信息？谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:47:06.877

使用 TransferUtility 时，您将无法访问 AmazonId2，因为该实用程序会丢弃所有响应。

TransferUtility.Upload 是一个阻塞操作，所以在请求完成之前不会返回。但是，您可以通过订阅请求中的事件来监控您的上传，如下所示：

```
uploadRequest.UploadProgressEvent += (source, progress) =>
{
    Console.WriteLine("{0}% - {1} / {2}",
        progress.PercentDone,
        progress.TransferredBytes,
        progress.TotalBytes);
}; 
```

# webstorm - Live Edit 在我的 WebStorm 5.0 中不起作用

> ID：13601289
> 
> 赞同：2
> 
> 时间：2012-11-28T09:00:01.570
> 
> 标签：webstorm

Live Edit 在我的 WebStorm 5.0 中不起作用，我已经为 webstorm 安装了 jb.crx。

我已经尝试了这些步骤。

1.  菜单“查看”-> 选择“实时编辑”
2.  菜单“查看”-> 选择“在浏览器中打开”

当我更改我的 html 文件时，但在 chrome 浏览器中没有任何反应。

你能帮我吗，提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:40:36.177

确保浏览器的路径正确（看起来很讽刺，但我的 chrome 安装在 \program 文件中，所以这是一个问题）

确保扩展已安装在 chrome 中 - webstorm 有一个 wiki 用于此。要记住的一件特别的事情是允许扩展访问本地文件

最后，它只在重新启动浏览器和 webstorm 后才对我有用

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T17:31:48.460

您还应该配置调试配置，如[http://blog.jetbrains.com/phpstorm/2013/09/live-edit-in-phpstorm/中所述](http://blog.jetbrains.com/phpstorm/2013/09/live-edit-in-phpstorm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:18:44.690

确保从 Chrome 商店安装 JetBrains IDE Chrome 扩展： [https ://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji/reviews](https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji/reviews)

# android - Android菜单实现

> ID：13601290
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:00:07.590
> 
> 标签：android, android-menu

我是 Android 开发的新手，我有一个愚蠢的问题。
android应用程序中的所有漂亮菜单都是不同的图片，当有人对它们进行操作（单击、按住等）时，它们会在另一张图片上发生变化？
像这样的东西：

```
ImageView img = (ImageView) findViewById(R.id.myImageId);
img.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
       // changing picture here.
    }
}); 
```

主要问题是您为它们使用哪个容器，只是图像？在哪里我可以找到一些关于为 android 创建菜单的教程，看起来很漂亮。

例如[这个菜单](http://ognarevgames.com/wp-content/uploads/2012/01/CutnRoll_ognarevgames_menuMain_05.png)

我也很高兴看到你如何实现你的菜单（最佳实践）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:03:53.437

看看这个创建菜单的例子[How to Create Android Menus](http://www.androidhive.info/2011/09/how-to-create-android-menus/)

来自android developer [Menu](http://developer.android.com/guide/topics/ui/menus.html)它描述了andorid中可用的菜单类型。

像这样的海关菜单

[示例一](http://p-xr.com/android-tutorial-game-menu-with-a-custom-font/)

[示例二](http://www.droidnova.com/creating-game-menus-in-android,518.html)

# performance - 保留历史记录和当前概览

> ID：13601291
> 
> 赞同：1
> 
> 时间：2012-11-28T09:00:11.433
> 
> 标签：performance, postgresql, database-design, indexing

我正在使用一小部分网络爬虫来获取各种设备的当前 GPS 位置。我也想保留历史记录。在不存储数据两次的情况下执行此操作的最佳方法是什么？现在我有两张桌子，看起来像这样：

```
 Column  |            Type             |   Modifiers   | Storage  | Description
---------+-----------------------------+---------------+----------+-------------
 vehicle | character varying(20)       |               | extended |
 course  | real                        |               | plain    |
 speed   | real                        |               | plain    |
 fix     | smallint                    |               | plain    |
 lat     | real                        |               | plain    |
 lon     | real                        |               | plain    |
 time    | timestamp without time zone | default now() | plain    | 
```

一个被命名`gps`，另一个被命名`gps_log`。更新这两个的函数做了两件事：首先它执行一个`INSERT`on `gps_log`，然后它执行一个`UPDATE OR INSERT`（用户定义的函数） on `gps`。但是，这导致在我看来，除了轻松`SELECT`访问当前数据之外，出于其他目的进行双重存储是毫无意义的。

有没有一种简单的方法只使用`gps_log`一个函数并且只为每个函数选择最新的条目`vehicle`？请记住，`gps_log`当前有 1397150 行增加，大约每 15 分钟增加 150 行，因此性能可能是一个问题。

通过 Perl DBI 使用 PostgreSQL 8.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:07:54.743

如果`SELECT`性能是最重要的，那么您当前的冗余存储解决方案可能不是一个坏主意。

如果您摆脱了冗余表，则可以使用[多列索引](http://www.postgresql.org/docs/current/interactive/indexes-multicolumn.html)`SELECT`来提高性能，例如：

```
CREATE INDEX gps_log_vehicle_time ON gps_log (vehicle, time DESC); 
```

假设这`vehicle`是您的主键。
会使这个相应的查询非常快：

```
SELECT *
FROM   gps_log
WHERE  vehicle = 'foo'
ORDER  BY time DESC
LIMIT  1; 
```

对于`SELECT`多行或所有行的最后一个条目，请[使用此相关技术](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)。

但是，总存储大小可能会*增长*，因为如果每辆车有很多行，则索引将大于冗余表（+ 索引）。

将串行列添加为代理主键而不是`vehicle`. 特别是如果您有指向它的外键。

另外：不要`time`用作列名。它是 PostgreSQL 中的类型名称和每个 SQL 标准中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)。`timestamp`命名列也是一种误导`time`。

# php - 在 as3 中接收一个 php 变量的多个值？

> ID：13601293
> 
> 赞同：0
> 
> 时间：2012-11-28T09:00:21.053
> 
> 标签：php, actionscript-3, flash

我需要从 as3 中的 php 接收具有多个值的变量，

变量是

```
$errors = "1, 4, 5" 
```

但它改变了价值观。我需要获取这些值，然后“读取”它们，并根据我应该突出显示相应字段的值，例如错误给我 1

```
er_1.gotoAndStop(2);
er_1.visible = true; 
```

如果我收到 1 个值但我不知道如何检查多个值，使用简单的 if{} 会很容易，请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:26:40.967

您可以将单个值作为字符串接收，然后将字符串拆分为一个数组。

```
var receivedValue:String = ev.target.data;
arrayOfErrors:Array = receivedValue.split(",");

trace(arrayOfErrors[0]);
//traces 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:26:43.917

如果您的值由逗号（或任何常见字符串）分隔，您可以沿该逗号拆分字符串以获得字符串数组。

例子：

```
var fromPhp:String = "1, 4, 5";

// Note that it is splitting across the string ", " since 
// you have comma and a space that separates each number
var errors:Array = fromPhp.split(", ");

trace(errors.length) // prints 3, as you had 3 values
trace(errors[0]); // prints 1
trace(errors[1]); // prints 4
trace(errors[2]); // prints 5 
```

请注意，error 中的所有值仍然是字符串，因此您可能需要将它们解析回整数。

# c++ - SFML 中缺少 sf::Vector2 类模板

> ID：13601294
> 
> 赞同：0
> 
> 时间：2012-11-28T09:00:24.470
> 
> 标签：c++, macos, g++, sfml

我一直在浏览[http://www.sfml-dev.org/tutorials/1.6/上的教程，并且在](http://www.sfml-dev.org/tutorials/1.6/)[使用视图教程](http://www.sfml-dev.org/tutorials/1.6/graphics-views.php)中遇到了问题。

这是我正在处理的代码部分：

```
#include <SFML/Window.hpp>
#include <SFML/Graphics.hpp>

int main(){

    // Create instance of Window
    sf::Window App(sf::VideoMode(800, 600, 32), "SFML Window");

    sf::Vector2 Center(1000, 1000);
    sf::Vector2 HalfSize(400, 300);
    sf::View View1(Center, HalfSize);

    // So on... 
```

我正在使用 Mac OSX 10.8，并且正在使用 g++ 进行编译。我收到错误消息：

```
error: missing template arguments before ‘Center’ 
```

我该如何纠正这个错误？

**编辑：我不知何故读错了教程。被认为是 Vector2f。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:19:22.190

您的问题与错误所说的完全一样，您缺少`Vector2`模板的类型，并通过`View`类的构造函数来判断，

```
View (const sf::Vector2f &Center, const sf::Vector2f &HalfSize) 
```

你想要一个`Vector2<float>`. 这些类型已经`typedef`在`Vector2.hpp`

```
// Define the most common types
typedef Vector2<int>          Vector2i;
typedef Vector2<unsigned int> Vector2u;
typedef Vector2<float>        Vector2f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:02:05.750

指定向量的类型，例如`sf::Vector2<int>`

# wpf - 选项卡在 DataGrid 中创建新行并聚焦新行

> ID：13601295
> 
> 赞同：2
> 
> 时间：2012-11-28T09:00:25.100
> 
> 标签：wpf, datagrid

我的数据网格有一些问题。我的项目正在将一个 Delphi 项目转换为 .Net。产品所有者希望数据网格具有相同的行为。

当定位在最后一个单元格上并按下 tab 或 enter 时，应该会发生以下情况：

1.  添加了一个新行
2.  新行中的第一个单元格被选中

对数据网格的其他要求是：

*   一旦获得焦点，焦点应保留在数据网格内（ALT + 组合键是再次离开数据网格的方式）。
*   数据网格是数据绑定的
*   数据网格用于 MVVM
*   我们使用 .net4.0 完整配置文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T21:40:14.520

[This article](http://peplowdown.wordpress.com/2012/07/19/wpf-datagrid-moves-input-focus-and-selection-to-the-wrong-cell-when-pressing-tab/) had the best solution I could find.

I preferred to use an attached property rather than a behavior, since this enabled me to set it easily in the default style for `DataGrid`. Here's the code:

```
namespace SampleDataGridApp
{
    using System.Windows;
    using System.Windows.Controls;
    using System.Windows.Input;

    /// <summary>
    /// An attached behavior that modifies the tab behavior for a <see cref="DataGrid"/>.
    /// </summary>
    public static class DataGridBehavior
    {
        /// <summary>
        /// Identifies the <c>NewLineOnTab</c> attached property.
        /// </summary>
        public static readonly DependencyProperty NewLineOnTabProperty = DependencyProperty.RegisterAttached(
            "NewLineOnTab",
            typeof(bool),
            typeof(DataGridBehavior),
            new PropertyMetadata(default(bool), OnNewLineOnTabChanged));

        /// <summary>
        /// Sets the value of the <c>NewLineOnTab</c> attached property.
        /// </summary>
        /// <param name="element">The <see cref="DataGrid"/>.</param>
        /// <param name="value">A value indicating whether to apply the behavior.</param>
        public static void SetNewLineOnTab(DataGrid element, bool value)
        {
            element.SetValue(NewLineOnTabProperty, value);
        }

        /// <summary>
        /// Gets the value of the <c>NewLineOnTab</c> attached property.
        /// </summary>
        /// <param name="element">The <see cref="DataGrid"/>.</param>
        /// <returns>A value indicating whether to apply the behavior.</returns>
        public static bool GetNewLineOnTab(DataGrid element)
        {
            return (bool)element.GetValue(NewLineOnTabProperty);
        }

        /// <summary>
        /// Called when the value of the <c>NewLineOnTab</c> property changes.
        /// </summary>
        /// <param name="sender">The event sender.</param>
        /// <param name="e">The event arguments.</param>
        private static void OnNewLineOnTabChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
        {
            DataGrid d = sender as DataGrid;

            if (d == null)
            {
                return;
            }

            bool newValue = (bool)e.NewValue;
            bool oldValue = (bool)e.OldValue;

            if (oldValue == newValue)
            {
                return;
            }

            if (oldValue)
            {
                d.PreviewKeyDown -= AssociatedObjectKeyDown;
            }
            else
            {
                d.PreviewKeyDown += AssociatedObjectKeyDown;
                KeyboardNavigation.SetTabNavigation(d, KeyboardNavigationMode.Contained);
            }
        }

        /// <summary>
        /// Handles the <see cref="UIElement.KeyDown"/> event for a <see cref="DataGridCell"/>.
        /// </summary>
        /// <param name="sender">The event sender.</param>
        /// <param name="e">The event arguments.</param>
        private static void AssociatedObjectKeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key != Key.Tab)
            {
                return;
            }

            DataGrid dg = e.Source as DataGrid;

            if (dg == null)
            {
                return;
            }

            if (dg.CurrentColumn.DisplayIndex == dg.Columns.Count - 1)
            {
                var icg = dg.ItemContainerGenerator;

                if (dg.SelectedIndex == icg.Items.Count - 2)
                {
                    dg.CommitEdit(DataGridEditingUnit.Row, false);
                }
            }
        }
    }
} 
```

My default style looks like this:

```
<Style TargetType="DataGrid">
    <Setter Property="GridLinesVisibility" Value="None" />
    <Setter Property="KeyboardNavigation.TabNavigation" Value="Contained" />
    <Setter Property="sampleDataGridApp:DataGridBehavior.NewLineOnTab" Value="True" />
    <Setter Property="IsSynchronizedWithCurrentItem" Value="True" />
</Style> 
```

If the last column's DataGridCell has it's IsTabStop set to false like in [this example](https://stackoverflow.com/a/7575843/2382032) the above will not work.

Here is a buggy workaround:

```
private static void AssociatedObjectKeyDown(object sender, KeyEventArgs e)
{               
    if (e.Key != Key.Tab)
    {
        return;
    }

    DataGrid dg = e.Source as DataGrid;

    if (dg == null)
    {
        return;
    }

    int offSet = 1;
    var columnsReversed = dg.Columns.Reverse();
    foreach (var dataGridColumn in columnsReversed)
    {
        // Bug: This makes the grand assumption that a readonly column's "DataGridCell" has IsTabStop == false;
        if (dataGridColumn.IsReadOnly)
        {
            offSet++;
        }
        else
        {
            break;
        }
    }

    if (dg.CurrentColumn.DisplayIndex == (dg.Columns.Count - offSet))
    {
        var icg = dg.ItemContainerGenerator;

        if (dg.SelectedIndex == icg.Items.Count - 2)
        {
            dg.CommitEdit(DataGridEditingUnit.Row, false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T21:03:27.117

好的，我已经为这个问题奋斗了好几个小时了。我已经尝试了几乎所有提出的解决方案，这就是我发现的适合我的解决方案......

```
 private void grid_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Tab)
        {
            if (grid.SelectedIndex == grid.Items.Count - 2 && grid.CurrentColumn.DisplayIndex == grid.Columns.Count - 1)
            {
                grid.CommitEdit(DataGridEditingUnit.Row, false);
                e.Handled = true;
            }
        }
    }

    private void DataGrid_RowEditEnding(object sender, DataGridRowEditEndingEventArgs e)
    {
        if (grid.SelectedIndex == grid.Items.Count - 2)
        {
            grid.SelectedIndex = grid.Items.Count - 1;
            grid.CurrentCell = new DataGridCellInfo(grid.Items[grid.Items.Count - 1], grid.Columns[0]);
        }
    } 
```

这段代码的作用是，当您 Tab 到最后一行的最后一个单元格并按 Tab 键时，它会将焦点移动到新行的第一个单元格。这是您所期望的，但这不是默认行为。默认行为是将焦点移到下一个控件而不提交当前行编辑。这显然是 DataGrid 中的一个错误，我相信这就是为什么所有提出的解决方案都有一丝杂音。我承认我的解决方案闻起来不太好，但如果您同意这是错误，我更喜欢这种荒谬的默认行为。

即使网格已排序，此解决方案也有效。新输入的行将排序到正确的位置，但焦点将放在新行的第一列。

唯一未解决的问题是，当从顶部向下跳到新行之前的最后一个单元格时，必须输入两次制表符才能将焦点移动到新行。我研究了这个怪癖，最后放弃了。

# turing-machines - 设计图灵机

> ID：13601297
> 
> 赞同：1
> 
> 时间：2012-11-28T09:00:28.173
> 
> 标签：turing-machines

我需要帮助设计一台可以计算以下内容的图灵机`f(x) = x mod 3`。我只需要帮助开始，因为我不熟悉如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:32:01.723

评论摘录：

输入和输入是一元字符串`1`。空间是`0`。输出应该重写输入。

输入是 {x, 3}，每个参数或 {x} 之间有一个空格。

输出为 {x mod 3}。

算法：

*   转到输入的末尾。
*   删除第二个参数。
*   当参数中至少有三个符号时，删除它们。

状态机：

*   开始：如果输入为0，则向右移动并转到“删除右侧”，否则向右移动。
*   向右删除：如果输入为0，则向左移动并转到“查找arg”。否则写 0 并向右移动。
*   查找 arg：如果输入为 0，则向左移动。如果输入是“磁带开始”，则结束。否则向左移动并进入状态“found 1”。
*   找到 1：如果输入是“磁带开始”，则结束。否则向左移动并进入“找到 2”状态
*   找到 2：如果输入是“磁带开头”，则结束。否则进入“删除权”状态。

# html - 如何使用 CSS 将图像与后面的文本居中？

> ID：13601298
> 
> 赞同：2
> 
> 时间：2012-11-28T09:00:28.363
> 
> 标签：html, css

我有以下 HTML：

```
<p style="line-height: 20px; margin-bottom: 10px;"> </p>
<div class="icon sprite-book-open" style="margin-right: 5px"></div>
Topic: No Topic Title
<p></p> 
```

我的CSS是这样的：

```
.icon {
    background-color: transparent;
    background-image: url(/Images/fugue/sprite.png);
    background-repeat: no-repeat;
    display: inline-block;
    height: 16px;
    line-height: 16px;
    width: 16px;
}
.sprite-book-open{ background-position: 0 -288px;  } 
```

有什么方法可以让我在**没有**段落的情况下做到这一点，因此图片图标与文本对齐。现在这个图标看起来太高了几个像素。我想我需要一些方法来把它放在这条线上，但我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:22:27.217

我不确定我是否理解您要做什么，但是如果您想在段落前面放置一个图标，最好的方法是使用填充左侧和背景。

```
<style>
.paragraph-with-icon {
    background:url(http://www.pangoo.it/img/pangoo.gif) no-repeat;
    padding:0 0 0 120px;
    line-height: 53px;
}
</style>

<p class="paragraph-with-icon">
Topic: No Topic Title
</p> 
```

我在示例中使用了 100x53 像素的图标（120 像素是 100 像素 + 20 的间距）。

你可以在这里试试：http: [//jsfiddle.net/apFvw/1/](http://jsfiddle.net/apFvw/1/)

如果您希望它与图像顶部对齐，请更改：

```
line-height: 53px; 
```

和

```
height: 53px; 
```

或者

```
min-height: 53px; 
```

（并且有不支持最小高度的浏览器的解决方案）

您可以在同一段落上使用边距来调整间距，而无需添加 div 和额外的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:05:57.590

`bottom`图标的垂直对齐方式如何：

```
vertical-align:bottom; 
```

如果您想摆脱所有不必要的标记，请考虑：

HTML：

```
<div class="title sprite-book-open" style="margin-right: 5px">
Topic: No Topic Title
</div> 
```

CSS：

```
.title{
    line-height: 16px;
}
.title:before {
    background-color: transparent;
    content: " ";
    background-image: url(/Images/fugue/sprite.png);
    background-repeat: no-repeat;
    display: inline-block;
    height: 16px;
    width: 16px;
    vertical-align:bottom;
}
.sprite-book-open:before{ 
    background-position: 0 -288px;  
} 
```

这是一个演示：http: [//jsfiddle.net/V4EM6/8/](http://jsfiddle.net/V4EM6/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:06:56.470

你可以这样做。

```
<div class="container">
    <div class="icon sprite-book-open" style="margin-right: 5px"></div>
    <div class="text">Topic: No Topic Title</div>
</div> 
```

css

```
.text{float:left;margin-top:5px;}
.icon{float:left;margin-top:5px} 
```

您现在可以调整 margin-top 以使它们对齐。您可以使用 margin-left 在图标和文本之间创建空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:09:00.493

```
<style>
    .icon {
        line-height: 1.6em;
        padding: 0 0 0 40px;
        background: url('http://cdn1.iconfinder.com/data/icons/fatcow/32x32_0120/book_open.png') no-repeat 5px 50%
    }

</style>
<div class="icon sprite-book-open">
    <p>
        Topic: No Topic Title
    </p>
</div> 
```

* * *

```
<style>
    .icon {
    display:inline-block;
    height:32px;
    width:32px;
    background: url('http://cdn1.iconfinder.com/data/icons/fatcow/32x32_0120/book_open.png') no-repeat center center }
    span {

    }
    p, span, .icon {vertical-align:middle}

</style>

<p>
    <div class="icon sprite-book-open"></div>
    <span>Topic: No Topic Title</span>
</p> 
```

# php - php 检索 curl_setopt POSTFIELDS 字符串

> ID：13601306
> 
> 赞同：2
> 
> 时间：2012-11-28T09:00:54.950
> 
> 标签：php, curl, libcurl

有什么方法可以检索我在 curl_multi_exec($mh, $running) 命令之后发布到网站的 curl_setopt POSTFIELDS 字符串？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:22:36.790

您必须将该数据与各个资源一起保存：

```
$handles = array();
foreach ($urls as $url) {
    $ch = curl_init($url);
    $data = 'whatever';
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    $handles[$url] = array(
        'ch' => $ch,
        'data' => $data,
    );
} 
```

这将 cURL 句柄和数据保持在一个单一的结构中，您以后可以使用它来检查。

```
foreach($handles as $url => $data) {
    // $url is the page you requested for this particular handle
    // $data['data'] contains the data that goes with it
    $body = curl_multi_getcontent($data['ch']);
    curl_multi_remove_handle($mh, $data['ch']);
    curl_close($data['ch']);
} 
```

# java - 在android中将所选产品添加到购物车

> ID：13601310
> 
> 赞同：1
> 
> 时间：2012-11-28T09:01:15.607
> 
> 标签：java, android, xml-parsing, android-listview, shopping-cart

我已经使用 xml 解析开发了一个 android 列表视图应用程序。这是为我的第一页完成的。

在我必须从列表中单击任何产品之后，意味着我会在下一个活动中显示详细的产品描述。它也完成了。

在这里我必须实现一个部分。

详细的订单页面有一个按钮添加到购物车。在这里我必须单击此按钮表示所选产品已添加到我的购物车中。我该如何实现。请帮助我。

这是我的第一个活动（使用 xml 解析的列表视图）：

```
public class CustomizedListView extends Activity {
// All static variables
static final String URL = "http://192.168.1.168/tbc/watches.xml";
// XML node keys
static final String KEY_SONG = "Product"; // parent node
static final String KEY_ID = "productid";
static final String KEY_TITLE = "Name";
static final String KEY_ARTIST = "ProductURL";
static final String KEY_DURATION = "Price";
static final String KEY_THUMB_URL = "Image";

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);

    // looping through all song nodes &lt;song&gt;
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key =&gt; value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            String title = ((TextView) view.findViewById(R.id.title)).getText().toString();
            String duration = ((TextView) view.findViewById(R.id.duration)).getText().toString();
            String artist = ((TextView) view.findViewById(R.id.artist)).getText().toString();
            String thumb_image = ((ImageView) view.findViewById(R.id.list_image)).getImageMatrix().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(KEY_TITLE, title);
            in.putExtra(KEY_DURATION, duration);
            in.putExtra(KEY_ARTIST, artist);
            in.putExtra(KEY_THUMB_URL, thumb_image);

            startActivity(in);

        }
    });
   }
  } 
```

这是详细的描述活动：

```
 public class SingleMenuItemActivity  extends Activity {
Button cart;
// XML node keys
static final String KEY_TITLE = "Name";
static final String KEY_DURATION = "Price";
static final String KEY_ARTIST = "ProductURL";
static final String KEY_THUMB_URL = "Image";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    int productIndex = getIntent().getExtras().getInt(CustomizedListView.URL);

    //final CustomizedListView selectedProduct = songsList.getInt(productIndex);
    cart = (Button)findViewById(R.id.cart);
    cart.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            //cart.add(selectedProduct);
            finish();
                }
        });

    // getting intent data
    Intent in = getIntent();

    // Get XML values from previous intent
    String title = in.getStringExtra(KEY_TITLE);
    String duration = in.getStringExtra(KEY_DURATION);
    String artist = in.getStringExtra(KEY_ARTIST);
    final String thumb_image = in.getStringExtra(KEY_THUMB_URL);
   // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.cost_label);
    TextView lblDesc = (TextView) findViewById(R.id.description_label);
    ImageView imgv = (ImageView) findViewById(R.id.image_label);
    ImageLoader imageLoader = new ImageLoader(getApplicationContext());
    lblName.setText(title);
    lblCost.setText(duration);
    lblDesc.setText(artist);

    imageLoader.DisplayImage(thumb_image, imgv);
   }

 } 
```

我必须在第二个活动中添加“添加到购物车”按钮。我必须在此处为选定的产品项目添加什么条件是添加到购物车。请给我一些有用的编码明智的解决方案。请帮助我。

# java - 用 C++ 编写的语法和语义代码完成框架

> ID：13601312
> 
> 赞同：2
> 
> 时间：2012-11-28T09:01:18.107
> 
> 标签：java, c++, parsing, intellisense, code-completion

这个问题比我上一个问题更精确：[General code completion frameworkwritten in C/C++](https://stackoverflow.com/questions/13595747/general-code-completion-framework-written-in-c-c/13595826#13595826)。我没有详细说明它以获得我真正需要的答案。

我想将“Intellisense”代码完成添加到我的 IDE。我希望有一个 C/C++/C++11 库，它可以用作语法和语义代码完成工具，并且是通用的，而不是特定于单一语言的（我想为 Java、C++ 和未来编写完成C#、Python 和 Javascript）。如果这个解决方案不是以一种语言为中心，那就太好了——它应该是通用的并且可以跨语言扩展。

（我发现了一个叫做[CEDET](http://cedet.sourceforge.net/intellisense.shtml)的东西，根据它的网站，这是我想要的东西，但它是用 Lisp 编写的，而不是 C++。）

你能帮我找到好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:52:08.287

Netbeans、Eclipse 和 IntelliJ 的源代码是开源的，这些支持跨平台“intelisense”代码完成。恕我直言 IntelliJ 是最好的。我怀疑 C++ 不是描述这种能力的最优雅的语言。

# c# - 在gridview中使用分页为过滤器实现正确逻辑的方法

> ID：13601318
> 
> 赞同：2
> 
> 时间：2012-11-28T09:01:42.630
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我在 ASP.NET 网站中遇到逻辑问题 - (gridview - filter - paging)

过滤器组件-------gridview组件-------分页组件-------

问题：完整的结果列表在首次加载时显示“1 of 25 pages”。如果我按某些条件选择过滤器 - 它显示结果“1 of 5 pages”。如果我使用分页（转到 5（最后）页）- 过滤器崩溃并显示 25 页中的 5 页。

如何在 gridview 中使用 PAGING 为 FILTER 实现正确的逻辑？

带着敬意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:22:07.527

问题是，寻呼机以页面作为参数生成 HTTP GET 链接，因此您的表单值都丢失了。

您可以像[本文](http://www.mikesdotnetting.com/Article/180/Displaying-Search-Results-In-A-WebGrid)建议的那样通过拦截点击链接并提交表单来解决它。

或者，您只需将搜索表单的方法更改为`GET`. 寻呼机只是将`page`参数附加到当前 url，因此在这种情况下，您的过滤器参数将被发送回操作。本文详细介绍了[这种](http://www.mikepope.com/blog/DisplayBlog.aspx?permalink=2377)方法。

# php - 使用 PDO 对象运行多个 PHP 进程的最佳实践？

> ID：13601319
> 
> 赞同：0
> 
> 时间：2012-11-28T09:01:43.000
> 
> 标签：php, mysql, linux, pdo

我在一台装有 MySQL 的 Linux 机器上同时运行 100 个 PHP 脚本。我正在使用 PDO，将 ATTR_PERSISTENT 参数设置为 false。进程通常执行一些 SQL 命令并休眠 30 秒。

使用 top 查看进程列表，我看到很多 mysqld 进程，每个进程都占用大量内存空间。

我知道这个问题可以通过重新设计、使用队列和\或共享连接来解决，但我正在寻找一个临时解决方案，直到我准备好更好的设置。

处理此类设置的最佳补救措施是什么？我应该在进程休眠时销毁并重新创建每个 PDO 对象吗？我是否缺少 PDO 或 MySQL 中的一些基本配置选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:07:41.327

在 PDO 和睡眠方面，如果您不打算重新使用连接，请尽早将其终止。原因是，当它处于休眠状态时（实际上是无用的），MySQL 上的工作线程仍然存在。

如果您**不**打算浪费睡眠进程，我建议您使用持久连接并在 PHP 进程之间共享它。然而，这打开了一个新的蠕虫罐：死锁。

关闭连接的最佳方法是销毁 PDO 对象 - 即`$yourPDOOBject = null`.

# .net - 与 List(of AType(of T)) 的协方差，其中 T 是一个接口

> ID：13601320
> 
> 赞同：2
> 
> 时间：2012-11-28T09:01:44.200
> 
> 标签：.net, vb.net, covariance

一直在阅读并检查其他问题，但不理解/似乎无法在其他任何地方找到我的答案。

假设以下

```
Public Interface IAudit
Public Class FamilyAudit implements IAudit
Public Class MemberAudit implements IAudit
Public Class AuditPair(Of T As IAudit)

Dim myList as new List(of AuditPair(of IAudit))
Dim famAuditPair as new AuditPair(of FamilyAudit)
Dim memAuditPair as new AuditPair(of MemberAudit)

' This fails
myList.Add(famAuditPair)
myList.Add(memAuditPair) 
```

我收到编译器错误，即 auditPairs 无法隐式转换为 AuditPair（IAudit 的）。这看起来像 co/contra 方差。
MSDN 文档说，从 4.0 开始，列表应该支持方差。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:17:40.207

新的`in`/`out`方差特性特别适用于两种情况：

*   接口
*   代表

它不适*用于*具体类型列表`List<T>`。此外，“列表”本质上是不变的，因为“添加”和“枚举”在任一方向上都是相互不兼容的。但是，*作为序列*的列表是协变的。考虑：

```
var list = new List<FamilyAudit>();
IEnumerable<IAudit> seq = list; // <=== covariance; the list is
                                // IEnumerable<FamilyAudit>, which
                                // can be compatible with
                                // IEnumerable<IAudit> 
```

请注意，这仅适用于 .NET 4.0 及更高版本；在早期版本中，它会拒绝编译，说：

> 无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.IEnumerable”。存在显式转换（您是否缺少演员表？）

那是因为在4.0之前，接口是`IEnumerable<T>`，而不是必要的`IEnumerable<out T>`。

# php - 在 Magento 中添加新商品之前清除购物车中的现有商品

> ID：13601321
> 
> 赞同：1
> 
> 时间：2012-11-28T09:01:48.490
> 
> 标签：php, magento

我正在 magento 的 checkout/controllers/cartController.php 中创建一个新的购物车 addAction()。我的需要是，每当将产品添加到购物车时，除当前添加的产品外，应清除购物车中的所有现有产品。那是，

如果诺基亚 3220 被添加到一个空的购物车，它应该被放置为一个项目。

之后如果添加了诺基亚N72，诺基亚3220（即前一项）应该从购物车中清除，诺基亚N72应该被放置等等。

我覆盖了 CartController.php 并将代码添加到 CartController.php 中 addAction() 的开头，

$checkout_my_cart = Mage::getSingleton('checkout/cart'); $current_items = $checkout_my_cart->getItems(); foreach ($current_items as $item) { $itemId = $item->getItemId(); $checkout_my_cart->removeItem($itemId)->save(); }

但是当我添加一个新项目来替换现有项目时，它会清除整个购物车！我认为它不应该这样做，因为我在 Addaction() 的开头添加了代码。我尝试将上述代码定义为函数并使用 addAction() 调用它。但故事似乎是一样的。

任何帮助将不胜感激。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:14:50.147

您应该考虑使用观察者而不是覆盖控制器。如果您查看其中的`addItem`方法，`Mage_Sales_Model_Quote`您会发现该事件`sales_quote_add_item`。

您可以观察它，获取`quote_item`（事件的参数）并删除除此之外的项目（手动输入，因此请仔细检查错误）：

```
public function observeAddItem($observer) 
{
  $item = $observer->getEvent()->getQuoteItem();
  $cart = Mage::getSingleton('checkout/cart');
  foreach ($cart->getQuote()->getItemsCollection() as $_item) {
    if($_item->getId() != $item->getId()) {
      $_item->isDeleted(true);
    }
  }
} 
```

覆盖类（尤其是控制器）应该是你最后的手段。

有关如何观察事件的更多信息可以在 magento wiki 上找到：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T06:39:40.570

您好，请检查以下代码：

```
$session= Mage::getSingleton('checkout/session');
$quote = $session->getQuote();
$cart = Mage::getModel('checkout/cart');
$cartItems = $cart->getItems(); 
foreach ($cartItems as $item){
    $quote->removeItem($item->getId())->save();
} 
```

# android - 如何在 Android cocos2d 中添加 UISLIDER

> ID：13601323
> 
> 赞同：0
> 
> 时间：2012-11-28T09:01:52.670
> 
> 标签：android, android-emulator, cocos2d-android

你好，

我在这里做一个应用程序我在 Android 中使用 cocos2d 做小游戏。我需要显示 uislide 但我不知道如何显示。我试过了，但我不知道，我在代码下面做应用程序，就像我动态地采取了表面视图一样，请任何人建议我如何显示滑块以及如何将图像视图、文本视图转换为 xml 文件。

你好世界层：

```
public class HelloWorldLayer extends CCColorLayer {
    static HelloWorldLayer layer;
    CGSize winSize;
    CCSprite home,target;
    protected HelloWorldLayer(ccColor4B color) {
        super(color);
        // TODO Auto-generated constructor stub
        winSize = CCDirector.sharedDirector().displaySize();
        this.setIsTouchEnabled(true);
        home= CCSprite.sprite("banana.png");
        home.setPosition(winSize.width/2,winSize.height/2);
        this.addChild(home);
    }

    public static CCScene scene() {
        // TODO Auto-generated method stub
        //Creates scene  
        CCScene scene = CCScene.node();

        layer = new HelloWorldLayer(ccColor4B.ccc4(225, 225,225, 225));

        //adds layer to scene
        scene.addChild(layer);

        return scene;
    }

    @Override
    public boolean ccTouchesEnded(MotionEvent event) {
        CGPoint location = CCDirector.sharedDirector().convertToGL(CGPoint.ccp(event.getX(), event.getY()));

        if (CGRect.containsPoint(home.getBoundingBox(), location)) { 

            CCDirector.sharedDirector().replaceScene(CCFadeTransition.transition(0.5f,GamestartLayer.scene()));
            removeAllChildren(true);  
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:05:43.707

您可以在 cocos2d 游戏活动中动态添加 UI 视图

```
EditText txv=new EditText(context);
txv.setText("ABC");
CCDirector.sharedDirector().getActivity().addContentView(txv,layoutParams); 
```

您可以使用相同的方式来使用 android 的其他 UIview。

# c++ - 通过 Box2d 中的 NSNotificationCenter 发送 C++ 类对象。错误：没有从“MyContact”到“id”的可行转换

> ID：13601326
> 
> 赞同：1
> 
> 时间：2012-11-28T09:01:56.150
> 
> 标签：c++, objective-c, listener, contact, nsnotificationcenter

我尝试在**box2d** * *cocos2d * 中实现***Contact Listener**。我想 在**PostSolve函数中集成****NSNotificationCenter**，但是当我尝试指向**对象时：** parametr 我得到了错误：

 *******```
No viable conversion from 'MyContact' to 'id' 
```

如何通过 NSNotificationCenter 发送 MyContact 对象？

MyContactListener 类

```
 //
    //  MyContactListener.m
    //  Box2DPong
    //
    //  Created by Ray Wenderlich on 2/18/10.
    //  Copyright 2010 Ray Wenderlich. All rights reserved.
    //

    #import "MyContactListener.h"
    #import "ConfigMacro.h"

    MyContactListener::MyContactListener() : _contacts(),_contactsObjects(){}

    MyContactListener::~MyContactListener() {}

    void MyContactListener::BeginContact(b2Contact* contact) {

        b2Body *bodyA = contact->GetFixtureA()->GetBody();
        b2Body *bodyB = contact->GetFixtureB()->GetBody();

        if(bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL)
        {
            MyContact myContact = { contact->GetFixtureA(), contact->GetFixtureB() };
            _contacts.push_back(myContact);
        }
    }

    void MyContactListener::EndContact(b2Contact* contact) {

        MyContact myContact = { contact->GetFixtureA(), contact->GetFixtureB() };
        std::vector<MyContact>::iterator pos;
        pos = std::find(_contacts.begin(), _contacts.end(), myContact);
        if (pos != _contacts.end()) {
            _contacts.erase(pos);
        }
    }
   void MyContactListener::PreSolve(b2Contact* contact, const b2Manifold* oldManifold) {}

    void MyContactListener::PostSolve(b2Contact* contact, const b2ContactImpulse* impulse) {

        b2Body *bodyA = contact->GetFixtureA()->GetBody();
        b2Body *bodyB = contact->GetFixtureB()->GetBody();

        if(bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL)
        {
        int32 count = contact->GetManifold()->pointCount;
        float32 maxImpulse = 0.0f;
        b2Vec2 collision;

        for (int32 i = 0; i < count; ++i) {
            maxImpulse = b2Max(maxImpulse, impulse->normalImpulses[i]);
            if (i == 0) {
                b2WorldManifold worldManifold;
                contact->GetWorldManifold(&worldManifold);
                collision = worldManifold.points[0];
            }
        }
        MyContact myContact = { contact->GetFixtureA(), contact->GetFixtureB(), maxImpulse, collision };

        [[NSNotificationCenter defaultCenter] postNotificationName:kReceivedImpulse object:myContact userInfo:nil];

        }    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:02:35.440

参数应该是一个指向 Objective-C 对象的`object:`指针——你试图传递一个看起来像结构的东西。*******

# android - 在特定时间间隔关闭android应用程序的有效方法

> ID：13601329
> 
> 赞同：0
> 
> 时间：2012-11-28T09:02:03.343
> 
> 标签：android, android-intent

我想根据用户的选择在特定的时间间隔内关闭我的应用程序。

所以我所做的是显示一个时间间隔列表，并根据选择的列表项将其传递给处理程序、可运行和延迟后方法。任何人都可以知道在特定时间从应用程序退出的不同且有效的方式吗？

这是我的代码

```
setContentView(R.layout.audio_player);
    mp = new MediaPlayer();
      lv1=(ListView)findViewById(R.id.listView1);
    Button b = (Button)findViewById(R.id.stop);
    tv =(TextView)findViewById(R.id.tv);
     lv1.setAdapter(new ArrayAdapter<String>(this,R.layout.testxml, lv_arr));
        lv1.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {
        //  final TextView mTextView = (TextView)view;
          switch (position) {
            case 0:
                j=2;
                Toast t = Toast.makeText(Play.this, "2 min selected",Toast.LENGTH_SHORT);
                 t.show();
              break;
            case 1:
                j=5;
                Toast t1 = Toast.makeText(Play.this, "5 min selected ",Toast.LENGTH_SHORT);
                 t1.show();    break;

            case 2:
                j=10;
                Toast t2 = Toast.makeText(Play.this, "10 min selected",Toast.LENGTH_SHORT);
                 t2.show();    break;

            case 3:
                j=15;
                Toast t3 = Toast.makeText(Play.this, "15 min selected",Toast.LENGTH_SHORT);
                 t3.show();    
        break;
            default:
              // Nothing do!
          }

      }
    });
    try {
        mp.setDataSource("http://94.55.45.123/bbc");
        mp.prepare();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
            mp.start();
 b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            handler=new Handler();
            final Runnable r = new Runnable()
            {
                public void run() 
                {

                        myFinish();
                }
            };

            handler.postDelayed(r, (60*1000)+j);
             i++;
        }
        private void myFinish() {
            // TODO Auto-generated method stub
            Toast t1 = Toast.makeText(Play.this, "Music stop",Toast.LENGTH_SHORT);
         t1.show();
        mp.stop();
         finish();
         Intent intent = new Intent(Intent.ACTION_MAIN); 
         intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
         intent.addCategory(Intent.CATEGORY_HOME); 
         startActivity(intent);
        }

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:57:47.333

通常，使用您拥有的方法进行短暂的延迟`postDelayed()`就足够了。

我不确定是否有规则，但通常延迟超过 5 分钟我会使用`AlarmManager`.

# c# - C# winform 中的等效 WindowsFormsHost

> ID：13601331
> 
> 赞同：0
> 
> 时间：2012-11-28T09:02:06.523
> 
> 标签：c#, wpf, winforms, windowsformshost

C# winform 中的等效 WindowsFormsHost 是什么？我用 C# winform 编写了程序。在我的用户控件（而不是表单）中，我放置了报告。当用户单击 btnReporting 时，会显示 rptfile。这是我在 wpf 中的代码。我在 C# winform 中不等效 WindowsFormsHost？

```
 CrystalReportViewer rptViewer = new CrystalReportViewer();
            rptViewer.DisplayStatusBar = false;

            WindowsFormsHost host = new WindowsFormsHost();
            rptViewer.ReportSource = rep;
            host.Child = rptViewer;
            ReportRpt PageRpt = new ReportRpt();

            PageRpt.GrdReport.Children.Add(host);
            NavigationService navService = NavigationService.GetNavigationService(this);
            navService.Navigate(PageRpt); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:06:36.767

为了在 Winform 上显示水晶报表，您可以从窗体上的工具箱中添加水晶查看器，并针对它设置水晶报表。

请参阅：[使用 WinForms 和 C# 显示 Crystal Reports](http://aspalliance.com/1297_Displaying_Crystal_Reports_using_WinForms_and_C.all)

但如果您想在 Winform 中托管 WPF 控件，则可以使用[ElementHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)

> 可用于承载 Windows Presentation Foundation (WPF) 元素的 Windows 窗体控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:04:39.243

您不需要 Winforms 中的 Windows 窗体主机 - 这只是为了在 WPF 中向后兼容，只需添加对水晶报告的引用并将控件放在您的窗体上

# iphone - 识别字符/手写字符

> ID：13601337
> 
> 赞同：3
> 
> 时间：2012-11-28T09:02:20.363
> 
> 标签：iphone, objective-c, ios, xcode, handwriting

我一直在寻找适合用于识别手写数据的字符/手写识别 API 或 Web 服务。基本上来自`UIView`子类型上的绘制对象。对于这个查询，我已经探索过`tesseract`（这似乎需要适当的输入最好键入文本）以提供匹配的输出。理想情况下，我希望拥有像[visionobjects](http://webdemo.visionobjects.com/write.html?locale=default)这样的服务。其中大多数是付费 API，包括上面粘贴的 API。

是否有任何 API /webservices 与[visionobjects等场景相匹配](http://webdemo.visionobjects.com/write.html?locale=default)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-22T15:21:49.817

如果您正在寻找一个免费的 API，它可以在 Objective-c 中识别 iOS 手写，我使用了这个已完成的项目：

[https://github.com/eelretep/HandwritingTextField](https://github.com/eelretep/HandwritingTextField)

基本上只需下载项目。点击笔迹视图，在灰色方块中书写，它应该可以识别您的笔迹。不好的一面是它需要互联网连接。如果您有任何不需要互联网连接的东西，请分享。

# sax - 如何在java中的sax xml解析中获取标签名称

> ID：13601338
> 
> 赞同：1
> 
> 时间：2012-11-28T09:02:19.800
> 
> 标签：sax

我可以得到 John、B 和 12。`childNodeLst.item(k).getTextContent()`但是我将如何获得姓名、等级和年龄？在这个 xml

`<students> <student> <name>John</name> <grade>B</grade> <age>12</age> </student> </students>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T15:30:01.373

看起来你问的是 DOM，而不是 SAX。使用 DOM，您可以执行以下操作：

```
private String getChildNodeContent(Element parentNode, String tagName) {
    NodeList children = parentNode.getElementsByTagName(tagName);
    return children.length == 0 ? null : children.item(0).getTextContent();
}
...
Element student = (Element) childNodeList.item(k);
String name = getChildNodeContent(student, "name");
String grade = getChildNodeContent(student, "grade");
String age = getChildNodeContent(student, "age"); 
```

在 SAX 中，您必须通过查找您关心的开始/结束标签来观察 startElement() 和 endElement()，并捕获 characters() 事件以捕获文本。

```
private StringBuilder buffer = new StringBuilder();

public void startElement(String uri, String lname, String qname, Attributes atts) {
    buffer.setLength(0);
}

public void endElement(String uri, String lname, String qname) {
    String tag = context.pop();
    String contents = buffer.toString();
    // Do something interesting with 'contents' for the given tag.
    buffer.setLength(0);
}

public void characters(char[] ch, int start, int len) {
    buffer.append(ch, start, len);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T06:02:11.900

public void characters(char[] ch, int start, int length) throws SAXException {
if(preTag!=null){
String content = new String(ch,start,length);
if("name".equals(preTag)){
student.setName(content);
}else if("age".equals(preTag)){
student.setAge(Float.parseFloat(content));
}
}
}

# php - 如何使用jQuery制作发布数据的按钮

> ID：13601341
> 
> 赞同：2
> 
> 时间：2012-11-28T09:02:29.243
> 
> 标签：php, jquery, button, submit, send

使用 Google 和这个站点，我制作了一个简单的表单来使用 jQuery 发送数据。

**我的 HTML 代码：**

```
<a href="javascript:AddPoke('{news-id}', 'poke')">ADD</a>
<div class="area"></div> 
```

**和 jQuery：**

```
function AddPoke(id, action){
 var response = $('#dle-poke').val()
  $.post(dle_root + 'engine/ajax/poke.php', {id: id, text: response, action: action},
   function(data){
    if (data == 'ok') {DLEalert(dle_p_send_ok, dle_info);}
    else {DLEalert(data, dle_info);}
});

$('.area').append("<div id='dlepopup'><textarea name='dle-poke' id='dle-poke'></textarea></div>");
$("#dlepopup").slideDown(700);
}; 
```

问题是我不知道如何制作发送或提交按钮来发布这些数据！我对 jQuery 非常缺乏经验，如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:18:28.180

HTML 代码：

```
<input type="text" name="first_name" id="first_name" />
<input type="text" name="last_name" id="last_name" />
<a href="javascript:void(0);" onclick="javascript:submit_value();" >Add </a> 
```

Javascript代码：

```
<script>
    function submit_value()
    {
       alert($('#first_name').val());
       alert($('#last_name').val());
    }
</script> 
```

当您在文本字段中输入任何文本时，然后单击添加链接以在此处显示警报消息，显示您在文本文件中写入的文本。

注意：请在 head 标签中包含最新的 jQuery 文件。

# matlab - 绘制输出向量的matlab函数句柄

> ID：13601342
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:02:30.207
> 
> 标签：matlab, plot

所以我有一个我写的matlab函数，它接受一个数字并返回一个数字数组（转置）。我需要绘制这个函数。我试图使用 fplot 但它给了我错误：

```
Error in fplot (line 105)
x = xmin+minstep; y(2,:) = feval(fun,x,args{4:end}); 
```

我是否使用了错误的绘图功能？

该函数解决了运动方程问题。我有这个 diff eq：

```
Mx'' + Cx'+ Kx = 0 
```

其中 M、C 和 K 是 4x4 矩阵，我的函数求解一般解并输出 4 个值的向量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:30:29.043

我通过更改函数以接受 t 值数组来解决我的问题，然后我使用 plot 函数而不是 fplot

# string - MIPS 程序集中的字符串合并排序

> ID：13601343
> 
> 赞同：3
> 
> 时间：2012-11-28T09:02:31.593
> 
> 标签：string, sorting, assembly, mips, mergesort

我想编写一个代码来使用 Mergesort 算法对包含 64 个字符串和 10 个字符的数组进行排序。因为我是汇编语言的新手，所以我很难实现函数调用，当然互联网上的所有教程都是针对 Intelx86 程序集的，谁能帮我？

# c# - 将 HtmlEncoded 文本格式化为 ASP

> ID：13601351
> 
> 赞同：0
> 
> 时间：2012-11-28T09:03:37.790
> 
> 标签：c#, asp.net, .net, html

我从数据库中获取字符串，然后将其进行 HtmlEncoded。如何进行换行符和制表符的格式化？

我认为我不能使用 CSS，因为它只有一个字符串（除非使用 CSS 替换子字符串）

我尝试过的一种方法是将文本放入数据库中，`<br>`然后 `&emsp;`使用 HttpUtility.HtmlDecode 对其进行格式化，但我不确定它是否正确。

欢迎任何建议和反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:29:27.690

如果您从数据库中获取 html 编码字符串，那么您只需使用 htmldecode 进行解码，它将放置制表符和换行符。在此之前检查编码的字符串是否为 html 编码或已使用任何其他编码。

# grails - 删除 grails 中的响应标头

> ID：13601358
> 
> 赞同：0
> 
> 时间：2012-11-28T09:03:54.143
> 
> 标签：grails, servlets

如何从 grails 中的响应中删除标头。我有一个过滤器过滤请求，如果响应包含我想删除的特定标头，这可能吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:03:15.563

看起来这样做的唯一方法是让您的 servlet 过滤器使用[HttpServletResponseWrapper](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html)的实现来包装响应，该实现过滤掉您要删除的标头。因此，您并没有实际删除标头，而是在生成响应时，只有响应包装器返回的标头将包含在 HTTP 响应中。

这个我没试过，如果有用请告诉我！

# sql - 转换为varchar时如何格式化数值？

> ID：13601365
> 
> 赞同：1
> 
> 时间：2012-11-28T09:04:30.577
> 
> 标签：sql, sql-server-2008

我有类似这样的查询：

```
DECLARE @value decimal(8,0) = 1

SELECT (CAST @value AS varchar(8)) 
```

如何使用前导零（`00000001, 00000023, 00000623`等）格式化输出？我怎样才能做到这一点？

这是.Net 或Java 中的简单任务，但我必须在视图内完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:07:08.313

试试这个

```
SELECT RIGHT('00000000' + CAST (@value AS varchar(8)),8) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:09:16.280

这应该有效：

```
DECLARE @value decimal(8,0) = 1

SELECT RIGHT('0000000' + CAST(@value AS varchar(8)), 8) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:09:32.887

试试这个：

```
declare @value varchar(8)='623';
Select ltrim(right(replicate(0,8) + CAST (@value AS varchar(8)),8)) 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!3/d41d8/6756)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T09:09:38.080

您可以使用[**`REPLICATE`**](http://msdn.microsoft.com/en-us/library/ms174383.aspx)and[**`RIGHT`**](http://msdn.microsoft.com/en-us/library/ms177532.aspx)来执行此操作，如下所示：

```
SELECT RIGHT(REPLICATE('0', 8) + CAST(@valueAS VARCHAR(8)), 8) 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/87238/how-to-format-numeric-value-when-casting-to-varchar)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T09:10:39.470

试试这个：

```
DECLARE @value decimal(8,0) = 1
SELECT REPLICATE('0',8-len(@value))+CAST(@value AS varchar(8)) 
```

# entity-framework - EntityFrameWork 和 TableValued 参数

> ID：13601366
> 
> 赞同：11
> 
> 时间：2012-11-28T09:04:34.570
> 
> 标签：entity-framework, stored-procedures, bulkinsert, table-valued-parameters

我正在尝试从使用**表值**参数的**EntityFramework调用存储过程。**

 **但是当我尝试进行函数导入时，我不断收到一条警告消息，说 -

> 函数“InsertPerson”在参数索引 0 处有一个参数“InsertPerson_TVP”，该参数具有目标 .NET Framework 版本当前不支持的数据类型“表类型”。该功能被排除在外。

我在这里进行了初步搜索，发现很少有帖子说在 EntityFrameWork 中可能有一些变通方法，[很少有人](https://stackoverflow.com/questions/2837350/table-valued-parameter-in-stored-procedure-and-the-entity-framework-4-0)说当前版本不支持它。

有谁知道解决此问题的更好方法或解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T08:52:20.290

我最终这样做了，请注意我们正在研究 EF `DataContext`（不是`ObjectContext`）

**使用输出参数执行存储过程**

```
 using (DataContext context = new DataContext())
        {                  
          ////Create table value parameter
          DataTable dt = new DataTable();
          dt.Columns.Add("Displayname");
          dt.Columns.Add("FirstName");
          dt.Columns.Add("LastName");
          dt.Columns.Add("TimeStamp");

          DataRow dr = dt.NewRow();
          dr["Displayname"] = "DisplayName";
          dr["FirstName"] = "FirstName";
          dr["LastName"] ="LastName";
          dr["TimeStamp"] = "TimeStamp";             
          dt.Rows.Add(dr);

          ////Use DbType.Structured for TVP
          var userdetails = new SqlParameter("UserDetails", SqlDbType.Structured);
          userdetails.Value = dt;
          userdetails.TypeName = "UserType";

          ////Parameter for SP output
          var result = new SqlParameter("ResultList", SqlDbType.NVarChar, 4000);
          result.Direction = ParameterDirection.Output;

          context.Database.ExecuteSqlCommand("EXEC UserImport @UserDetails, @ResultList OUTPUT", userdetails, result);

          return result == null ? string.Empty : result.Value.ToString();
        } 
```

我的**表值参数**（UDT 表）脚本如下所示：

```
CREATE TYPE [dbo].[UserType] AS TABLE (
    [DisplayName]      NVARCHAR (256)   NULL,
    [FirstName]        NVARCHAR (256)   NULL,
    [LastName]         NVARCHAR (256)   NULL,
    [TimeStamp]        DATETIME         NULL
   ) 
```

我的**商店程序**开始像

```
CREATE PROCEDURE UserImport 
-- Add the parameters for the stored procedure here
@UserDetails UserType Readonly,
@ResultList NVARCHAR(MAX) output  
AS 
```

对于没有参数的存储过程，`output`我们不需要添加/传递给 SP 的任何输出参数。

希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-31T18:47:20.857

或许我们也可以考虑[SqlQuery](http://msdn.microsoft.com/en-us/library/gg696545%28v=vs.103%29.aspx)方法：

```
[Invoke]
public SomeResultType GetResult(List<int> someIdList)
{
    var idTbl = new DataTable();
    idTbl.Columns.Add("Some_ID");

    someIdList.ForEach(id => idTbl.Rows.Add(id));

    var idParam = new SqlParamter("SomeParamName", SqlDbType.Structured);
    idParam.TypeName = "SomeTBVType";
    idParam.Value = idTbl;

    // Return type will be IEnumerable<T>
    var result = DbContext.Database.SqlQuery<SomeResultType>("EXEC SomeSPName, @SomeParamName", idParam);

    // We can enumerate the result...

    var enu = result.GetEnumerator();
    if (!enu.MoveNext()) return null;
    return enu.Current;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-15T09:05:38.960

```
 var detailTbl = new DataTable();
        detailTbl.Columns.Add("DetailID");
        detailTbl.Columns.Add("Qty");
        txnDetails.ForEach(detail => detailTbl.Rows.Add(detail.DetailID, detail.Qty));

        var userIdParam = new System.Data.SqlClient.SqlParameter("@UserID", SqlDbType.Int);
        userIdParam.Value = 1;

        var detailParam = new System.Data.SqlClient.SqlParameter("@Details", SqlDbType.Structured);
        detailParam.TypeName = "DetailUpdate";
        detailParam.Value = detailTbl;

        var txnTypeParam = new System.Data.SqlClient.SqlParameter("@TransactionType", SqlDbType.VarChar);
        txnTypeParam.Value = txnType;

        var result = await db.Database.ExecuteSqlCommandAsync("MySP @UserID, @Details, @TransactionType", userIdParam, detailParam, txnTypeParam);
        if(result >= 0)
            return StatusCode(HttpStatusCode.OK);
        else
            return StatusCode(HttpStatusCode.InternalServerError); 
```**

# sql-server - 如何提高子查询的性能或 tsql 中子查询的替代方案

> ID：13601368
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:04:38.063
> 
> 标签：sql-server, tsql, sql-server-2000, query-optimization, subquery

我正在使用以下查询在我的一个 java swing 应用程序中显示记录。此查询执行速度非常慢。有什么方法可以通过提高性能来获得结果

有什么办法可以在更小的时间间隔内完成任务。

```
select d.orderid,d.ordername,d.design,isnull(e.OrderQty,0) OrderQty
from 
(
select a.orderid,ordername,design
from filerorn a,ordersNew.dbo.orders b where a.orderid=b.orderid and sub_stage = 'G'
And a.id =@Id
)d
LEFT JOIN
(
select a.OrderId,a.Design,( case when b.ItemId is null 
then a.Qty else 1 end) -isnull(c.Qty,0) OrderQty from 
OrdersNew..ordersDesign a
left join
OrdersNew..OrdersBGTPDesign b
on a.OrderId=b.OrderId and  a.Design
COLLATE DATABASE_DEFAULT
=b.Design COLLATE DATABASE_DEFAULT and a.Sno=b.SNo
left join 
( select a.OrderId,Design,Qty from ExcludeDesign a
left join
dbo.ExcludeDesign_d b
on a.ID=b.ID

)c
on a.OrderId=c.OrderId and a.Design
COLLATE DATABASE_DEFAULT
=c.Design COLLATE DATABASE_DEFAULT and a.Sno=c.Sno

)e
ON d.OrderId=e.OrderId and d.Design COLLATE DATABASE_DEFAULT
=e.Design  COLLATE DATABASE_DEFAULT
and d.sno=e.Sno
and d.ItemId=e.ItemId 
order by d.ordername,d.design,d.sno,d.Itemid 
select d.orderid,d.ordername,d.design,isnull(e.OrderQty,0) OrderQty
from 
(
select a.orderid,ordername,design
from filerorn a,ordersNew.dbo.orders b where a.orderid=b.orderid and sub_stage = 'G'
And a.id =@Id
)d
LEFT JOIN
(
select a.OrderId,a.Design,( case when b.ItemId is null 
then a.Qty else 1 end) -isnull(c.Qty,0) OrderQty from 
OrdersNew..ordersDesign a
left join
OrdersNew..OrdersBGTPDesign b
on a.OrderId=b.OrderId and  a.Design
COLLATE DATABASE_DEFAULT
=b.Design COLLATE DATABASE_DEFAULT and a.Sno=b.SNo
left join 
( select a.OrderId,Design,Qty from ExcludeDesign a
left join
dbo.ExcludeDesign_d b
on a.ID=b.ID

)c
on a.OrderId=c.OrderId and a.Design
COLLATE DATABASE_DEFAULT
=c.Design COLLATE DATABASE_DEFAULT and a.Sno=c.Sno

)e
ON d.OrderId=e.OrderId and d.Design COLLATE DATABASE_DEFAULT
=e.Design  COLLATE DATABASE_DEFAULT
and d.sno=e.Sno
and d.ItemId=e.ItemId 
order by d.ordername,d.design,d.sno,d.Itemid 
```

orderdesign 和 orders 有数百万条记录

```
Edit 
```

**15 %**

```
select a.orderid,ordername,design
from filerorn a,ordersNew.dbo.orders b where a.orderid=b.orderid and sub_stage = 'G'
And a.id =@Id 
```

**46%**

```
select a.OrderId,a.Design,( case when b.ItemId is null 
then a.Qty else 1 end) -isnull(c.Qty,0) OrderQty from 
OrdersNew..ordersDesign a
left join
OrdersNew..OrdersBGTPDesign b
on a.OrderId=b.OrderId and  a.Design 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:15:25.383

如何创建一个视图并弹出一些索引以使其更快地进行搜索。或者，如果您不喜欢查看视图，请在您的表上创建索引以加快搜索速度。

# android - 当 USB 设备连接到 ANDROID 设备时，什么方法可以有效地弹出 USB 设备的文件

> ID：13601369
> 
> 赞同：1
> 
> 时间：2012-11-28T09:04:44.267
> 
> 标签：android, usb, explorer

当 USB 设备连接到 ANDROID 设备时，什么方法可以有效地获得一个包含 USB 设备文件的弹出窗口，这意味着待定意图或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:07:48.150

查看android 3.1 及更高版本中可用的[USB 主机 API 。](http://developer.android.com/guide/topics/connectivity/usb/host.html)

# xaml - 地铁中的数据网格视图

> ID：13601370
> 
> 赞同：1
> 
> 时间：2012-11-28T09:04:45.723
> 
> 标签：xaml, gridview, windows-8, microsoft-metro

我想在metro中创建一个datagridview，喜欢在winform中，带有datagridview的标题，我可以选择任何行进行编辑或删除，如何设计？我知道 Grid 可以显示数据，但它不能让我选择任何方式，我也查看了 gridview，但仍然没有找到如何实现它。我有一个对象列表，我想将列表绑定到gridview，我也可以编辑或删除它的任何行，可以吗？还是有其他更好的设计？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T09:23:06.680

Metro App 不支持 Datagridview。相反，您应该尝试使用 GridView 来显示您的数据。

GridView 的文档：[GridView](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.gridview.aspx)

一些样品：[样品](http://code.msdn.microsoft.com/windowsapps/ListViewSimple-d5fc27dd)

# css - 这个 CSS 选择器是做什么的

> ID：13601371
> 
> 赞同：0
> 
> 时间：2012-11-28T09:04:55.967
> 
> 标签：css, twitter-bootstrap, css-selectors

我正在引导程序上开发一些项目，在那里我遇到了一个类的一些问题。

```
.nav-pills > .active > a > [class^="icon-"],
.nav-pills > .active > a > [class*=" icon-"], 
```

你能给我一些链接，在那里我可以找到关于这个类的一些信息^/*。它让我的代码变得混乱，你知道用这些符号和类键盘搜索是多么困难）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:09:37.553

这称为 CSS 属性选择器。你可以在这里阅读所有关于它们的信息：[https ://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors](https://developer.mozilla.org/en-US/docs/CSS/Attribute_selectors)

在您的情况下`[class^="icon-"]`，匹配其类属性以`icon-`任何开头的元素。并`[class*=" icon-"]`匹配属性中`icon-`任何位置的元素`class`（注意开头的空格）。

# jquery - JQuery 追加到 div

> ID：13601373
> 
> 赞同：-2
> 
> 时间：2012-11-28T09:04:59.280
> 
> 标签：jquery, append

```
<body>
<div id="scrollup">
<div class="link">
<br><a href="http://www.google.com/">Google1</a>
<br><a href="http://www.yahoo.com/">Yahoo</a>
</div>
<div class="link">
<br><a href="http://www.Microsoft.com/">Microsoft</a>
<br><a href="http://www.Apple.com/">Apple</a>
</div>
<div class="link">
<br><a href="http://www.cisco.com/">Cisco</a>
<br><a href="http://www.Dell.com/">Dell</a>
</div>
</div>
</body> 
```

我想使用 JQuery Append 将 Hrefs 列表添加到类中，我有存储在数组中的超链接列表，我想将它们附加到组中，代码显示了我希望如何定义 hrefs

请注意，我不知道数组中有多少个超链接，并且（class =“link”）的数量取决于通过添加的超链接的数量（例如，每个类中有 4 个 href）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:15:46.313

这个怎么样

```
<!doctype html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>Demo</title>
            <script src="jquery-1.8.3.min.js"></script>

            <script>
                var links = ['http://stackoverflow.com/questions/13601373/jquery-append-to-div',
                        'http://jsfiddle.net/VCjLX/',
                        'https://www.google.at/'];

                $(function () {
                    //get all containers where we append the links
                    var containers = $('.link');
                    //iterate over all links
                    $(links).each(function () {
                        var link = $('<a>', {
                            href: this,
                            text: this
                        });
                        //append the link to the containers (it gets appened to all elements!)
                        containers.append(link);
                        //append the line break (again to all elements)
                        containers.append('<br />');
                    });
                });

            </script>
        </head>
        <body>
            <div class="link"></div>
            <br />
            <div class="link"></div>
        </body>
    </html> 
```

小提琴演示：http: [//jsfiddle.net/R2kTC/](http://jsfiddle.net/R2kTC/)

# java - Mac 上的 TestNG 异常：在类路径中找不到类...！

> ID：13601378
> 
> 赞同：6
> 
> 时间：2012-11-28T09:05:15.530
> 
> 标签：java, testng

当我尝试运行测试套件时，在 Mac 上遇到此异常，我们在这里使用 maven 项目，今天早上 eclipse 被挂起，我强制退出，然后重新启动，后来无法运行测试。我完成了刷新、清理、重新安装 testNG，使用新的 eclipse 实例重新配置了 eclipse 并导入了 maven 项目，但随后也遇到了同样的异常。相同的 maven 项目将在另一台 Mac 上运行，请建议这里缺少的任何方法.

还提到了以下链接中的解决方案： [SO链接1](https://stackoverflow.com/questions/9908809/cannot-find-class-in-classpath-issue-with-testng) [SO链接2](https://stackoverflow.com/questions/7600898/testng-error-cannot-find-class-in-classpath)

错误控制台：

```
org.testng.TestNGException: 
Cannot find class in classpath: com.adobe.store.polarBear.polarBearSuite.tests.ReaderAIHTest
    at org.testng.xml.XmlClass.loadClass(XmlClass.java:81)
    at org.testng.xml.XmlClass.init(XmlClass.java:73)
    at org.testng.xml.XmlClass.<init>(XmlClass.java:59)
    at org.testng.xml.TestNGContentHandler.startElement(TestNGContentHandler.java:539)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startElement(AbstractSAXParser.java:501)
    at com.sun.org.apache.xerces.internal.parsers.AbstractXMLDocumentParser.emptyElement(AbstractXMLDocumentParser.java:179)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(XMLDTDValidator.java:788)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1343)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
    at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:17)
    at org.testng.xml.SuiteXmlParser.parse(SuiteXmlParser.java:1)
    at org.testng.xml.Parser.parse(Parser.java:172)
    at org.testng.TestNG.initializeSuitesAndJarFile(TestNG.java:311)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:88)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-27T08:38:24.147

转到项目 --> 清理

这个对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T06:09:32.353

几个建议： 1\. 转到您的目标文件夹并检查 ReaderAIHTest 的 .class 是否可用？2\. 转到 Run As -> Maven Build -> Enter goal as clean test-compile（我假设您的案例位于 src/test/java 中。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T09:48:12.560

我遇到了同样的问题。当我在 Eclipse 中刷新我的项目时，从 repo 同步代码后。包名从 src.test.java.com 开始显示......

所以整个问题是模块目录中的 .classpath 文件 执行 'mvn eclipse:eclipse' 它将重新生成模块的 '.classpath' 文件。然后在eclipse中刷新你的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-03T14:11:03.087

对于 IntelliJ Idea，在重新构建项目后使用命令：mvn idea:idea

Build 成功后，“Cannot find class in classpath”异常得到解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:17:27.040

您是否在 eclipse 中使用“运行配置”功能？如果是这样，请确保您为尝试运行的测试使用了正确的 testng.xml。有时您使用了错误的一个或一个在 Eclipse 的“运行配置”菜单中自动创建的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-07T21:20:05.183

如果你的包名是**TEST_Package**并且类名是**DEMO_TEST**那么xml中的代码应该是

```
classes
class name="TEST_Package.DEMO_TEST"
classes 
```

你会试试这个......它会工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-18T21:29:10.070

对我来说，它配置了错误的“项目编译器输出”。转到文件>项目结构>项目编译输出>单击“...”>选择一个文件夹

# regex - 在 Visual Studio 2010 中使用正则表达式查找和替换来小写

> ID：13601381
> 
> 赞同：2
> 
> 时间：2012-11-28T09:05:26.380
> 
> 标签：regex, visual-studio-2010, visual-studio

我正在使用 Visual Studio 2010 中的查找和替换功能来更改字段的编码样式。

所有实例都类似于

```
m_MyField 
```

应该

```
_myField 
```

但我只能设法得到

```
_MyField 
```

使用

```
Find what:      m_{[a-zA-Z]}
Replace with:   _\1 
```

如何使第一个字母小写？我尝试了以下方法，但它不起作用：

```
Find what:      m_{[a-zA-Z]}
Replace with:   _\L\1 
```

我在[http://vim.wikia.com/wiki/Changing_case_with_regular_expressions](http://vim.wikia.com/wiki/Changing_case_with_regular_expressions)中发现了这一点，但我认为它只适用于 vim。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:09:07.927

我会使用这种方法：

```
Find what:      m_A{[a-zA-Z]}
Replace with:   _a\1 
```

对 B..Z 重复一遍

不优雅，但应该快速完成。

# html - 拉伸背景超出父母宽度html css

> ID：13601383
> 
> 赞同：0
> 
> 时间：2012-11-28T09:05:42.723
> 
> 标签：html, css, background

我想拉伸背景颜色（或图像），使其看起来像底部的示例

[这个jsfiddle](http://jsfiddle.net/TWUtj/1/)

相同的代码，但在这里：Example1：

```
<div class="fixed_width">
  <div class="header">Header</div>
  <div class="menu">
      Here be some menu
  </div>
  <div class="content">
      Here be some content<br/>
      ANd even more
  </div>
</div> 
```

示例 2

```
<div class="fixed_width">
  <div class="header">Another<br/>Header</div>
  <div class="menu2">
      Here be some menu
  </div>
  <div class="content">
      Here be some content<br/>
      ANd even more
  </div> 
```

CSS：

```
body {background: lightgray}
.fixed_width {width: 500px; border: solid thin black; 
  margin: 20px auto; background: white;}
.menu {background: blue; color: white; padding: 20px; 
  margin-bottom: 10px;}
.content {background: white; border: solid thin gray; 
  margin: 5px;}

.menu2 {width: 500px; background: blue; color: white; 
  margin-bottom: 10px;padding: 20px 2000px 20px 2000px; 
  margin-left: -2000px;} 
```

底部示例是我想出的，但问题是浏览器想要滚动到右侧的 2000 像素。

页面的结构类似于 jsfiddle 中的代码，正如您所看到的，不知道菜单顶部的确切位置 - 在它上方会有一个可以具有可变高度的标题（所以我不能使用一个不错的预生成的整页背景图片）。

我无法禁用滚动，因为在较小的屏幕上 ppl 将无法滚动。请帮我解决这个问题（如果可能的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:11:24.120

将您的菜单放在一个包装元素中，给后者一个 100% 的宽度（假设它是最顶部的元素），并将菜单居中：

HTML：

```
 <body>
     <div id="menu_wrapper">
        <ul id="menu">
         <li>Item</li>
         <li>Item</li>
         <li>Item</li>
         <li>Item</li>
        </ul>
      </div>
  </body> 
```

CSS：

```
 #menu_wrapper {
  width:100%;
  background:blue;
  }
  #menu 
  width:1000px;
  margin:0 auto;
  } 
```

# c - ICC opt-report“下标太复杂”

> ID：13601385
> 
> 赞同：1
> 
> 时间：2012-11-28T09:05:49.563
> 
> 标签：c, optimization, vectorization, simd, icc

当我在 ICC 中使用 -opt-report 或 -vec-report 选项编译给定文件时，我会收到以下消息：

```
foo.c(226:7-226:7):VEC:function_foo:  loop was not vectorized: subscript too complex
foo.c(226): (col. 7) warning #13379: loop was not vectorized with "simd"
vectorization support: call to function absorbing_apply cannot be vectorized
loop was not vectorized: not inner loop
loop was not vectorized: unsupported loop structure
loop was not vectorized: subscript too complex 
```

我知道这些信息的含义。我担心的是， `foo.c:226`根本没有任何循环。其实还有什么是调用另一个函数。该函数确实包含一些循环，这些循环通过一个卷运行，并且确实按照 icc 报告的方式正确矢量化。但是，对该函数的所有调用都会给出与我粘贴的消息相同的消息。

icc 是否会因为它在根本没有循环的地方显示矢量化消息而陷入混乱？还是我误会了什么？

编辑：我已经半复制了这个问题。这一次，编译器告诉它向量化了一行代码，其中调用了另一个函数（在原始情况下只是另一种方式，它说它不能）。这是代码：

```
 1 
 2 
 3 void foo(float *a, float *b, float *c, int n1, int n2, int n3, int ini3, int end3 ) {
 4    int i, j, k;
 5 
 6    for( i = ini3; i < end3; i++ ) {
 7       for( j = 0; j < n2; j++ ) {
 8        #pragma simd
 9        #pragma ivdep
10        for( k = 0; k < 4; k ++ ) {
11          int index = k + j*n1 + i*n1*n2;
12          a[index] = b[index] + 2* c[index];
13        }
14      }
15    }
16 
17    for( i = ini3; i < end3; i++ ) {
18       for( j = 0; j < n2; j++ ) {
19        #pragma simd
20        #pragma ivdep
21        for( k = n1-4; k < n1; k ++ ) {
22          int index = k + j*n1 + i*n1*n2;
23          a[index] = b[index] + 2* c[index];
24        }
25      }
26    }
27 
28   return;
29 }
30 int main(void){
31    int n1, n2, n3;
32    int ini3 = 20;
33    int end3 = 30;
34    n1 = n2 = n3 = 200;
35 
36    float *a = malloc( n1 * n2 * n3 * sizeof(float ));
37    float *b = malloc( n1 * n2 * n3 * sizeof(float ));
38    float *c = malloc( n1 * n2 * n3 * sizeof(float ));
39 
40    foo( a,b,c, n1, n2, n3, ini3, end3 );
41 
42    ini3 += 50;
43    end3 += 50;
44 
45    foo( a,b,c, n1, n2, n3, ini3, end3 );
46 
47    free(a); free(b); free(c);
48 
49   return 0;
50 }
51 
```

以及 ICC 将第 40 行和第 45 行向量化的优化报告：

```
foo.c(40:4-40:4):VEC:main:  LOOP WAS VECTORIZED
loop was not vectorized: not inner loop
loop was not vectorized: not inner loop
LOOP WAS VECTORIZED
loop was not vectorized: not inner loop
loop was not vectorized: not inner loop
foo.c(45:4-45:4):VEC:main:  LOOP WAS VECTORIZED
loop was not vectorized: not inner loop
loop was not vectorized: not inner loop 
```

这是正常的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:42:52.767

在您发布的示例中，函数调用`foo()`被内联。*内联后*，其中的循环`foo()`被矢量化。

 *结果是所有代码都“折叠”到第 40 行和第 45 行。当矢量化器接触到代码时，它并不知道它最初来自不同的函数。

在您说它未矢量化的原始示例中，同样的情况适用。函数调用是内联的，但它包含不可向量化的循环。

* * *

也许，ICC 可以通过函数调用保存线路信息。但是，每次内联函数时，您都会得到一个重复的矢量化报告。此外，它们都将指向同一条线。这可能会更加令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T15:42:57.467

一个简单的编码提示 - 不要使用如下结构：

```
for( i = ini3; i < end3; i++ ) {
   for( j = 0; j < n2; j++ ) {
   #pragma simd
   #pragma ivdep
   for( k = 0; k < 4; k ++ ) {
     int index = k + j*n1 + i*n1*n2;
     a[index] = b[index] + 2* c[index];
   }
   }
} 
```

这对您来说可能很明显，在最内层循环的每次迭代中`index`都会增加一个步骤`1`，但是编译器矢量化器可能很难弄清楚这一点。更好的使用：

```
for( i = ini3; i < end3; i++ ) {
   for( j = 0; j < n2; j++ ) {
      int base = (j + i*n2)*n1;
      for( k = base; k < base+4; k++ ) {
         a[k] = b[k] + 2* c[k];
      }
   }
} 
```

现在很明显发生了什么，即使是最愚蠢的矢量化器也应该能够弄清楚（并且代码看起来更清晰）。与其使用`#pragma ivdep`，不如向编译器保证`a`，`b`并使用 C99限定符`c`指向不重叠的内存区域：`restrict`

```
void foo(float *restrict a, float *restrict b, float *restrict c,
         int n1, int n2, int n3, int ini3, int end3) { 
```*

# c# - 如何在 Silverlight 中的框架内添加多个控件

> ID：13601387
> 
> 赞同：1
> 
> 时间：2012-11-28T09:05:54.040
> 
> 标签：c#, silverlight, silverlight-5.0

我是银光新手。我必须在导航框架中添加多个控件。当我这样做时，我得到了错误。

```
<Navigation:Frame Name="ContentFrame" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0,55,12,12" BorderThickness="1" BorderBrush="Black" Grid.Column="1" Grid.ColumnSpan="3" Grid.RowSpan="5">
            <TextBlock Grid.Column="1" Height="23" HorizontalAlignment="Left" Margin="9,129,0,0" Name="textBlock2" Text="UserName:" VerticalAlignment="Top" />
            <TextBlock Grid.Column="1" Height="23" HorizontalAlignment="Left" Margin="12,22,0,0" Name="textBlock3" Text="Password:" VerticalAlignment="Top" Grid.Row="1" />
        </Navigation:Frame> 
```

错误是**不能多次设置“内容”属性**。我错在哪里。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:08:30.433

`Frame`是 a`ContentControl`这意味着它只能有一个孩子。您需要添加一个能够容纳多个子级的子控件。尝试`Grid`例如：

```
<Navigation:Frame >
   <Grid>
        <TextBlock Grid.Column="1" Height="23" HorizontalAlignment="Left" Margin="9,129,0,0" Name="textBlock2" Text="UserName:" VerticalAlignment="Top" />
        <TextBlock Grid.Column="1" Height="23" HorizontalAlignment="Left" Margin="12,22,0,0" Name="textBlock3" Text="Password:" VerticalAlignment="Top" Grid.Row="1" />
   </Grid>
</Navigation:Frame> 
```

# c# - Request.UserHostName 实际返回的是什么，是否可以将其转换为我可以获得主机条目的内容？

> ID：13601393
> 
> 赞同：8
> 
> 时间：2012-11-28T09:06:23.443
> 
> 标签：c#, .net, asp.net-mvc

我想我可能处于答案是这样的情况，`this is not possible`但万一不是这里……

我编写了一个`ASP .NET MVC 3`应用程序，我正在使用[Request.UserHostName](http://msdn.microsoft.com/en-us/library/system.web.httprequestbase.userhostname.aspx)属性，然后将返回的值传递给[Dns.GetHostEntry](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.80%29.aspx)以找出当前连接的客户端的所有可能 IP 和主机名，例如：

```
var clientAddress = Request.UserHostName;
var entry = Dns.GetHostEntry(clientAddress); 
```

一般来说，这很好，除了我从[Dns.GetHostEntry](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.80%29.aspx)调用 中得到“找不到主机” [SocketException的情况。](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketexception.aspx)

真正奇怪的是，从[Request.UserHostName](http://msdn.microsoft.com/en-us/library/system.web.httprequestbase.userhostname.aspx)属性返回的地址不是公共地址或任何私有地址。为了证明这一点，我在有问题的客户端机器上运行了这段代码......

```
var host = Dns.GetHostEntry(Dns.GetHostName());

foreach (var a in host.Aliases)
{
    Console.WriteLine("alias '{0}'", a);
}

foreach (var a in host.AddressList)
{
    Console.WriteLine("ip address '{0}'", a);
}

// ...from http://stackoverflow.com/a/2353177/1039947...
String direction = "";
WebRequest request = WebRequest.Create("http://checkip.dyndns.org/");
using (WebResponse response = request.GetResponse())
{
    using (var stream = new StreamReader(response.GetResponseStream()))
    {
        direction = stream.ReadToEnd();
    }
}

int first = direction.IndexOf("Address: ") + 9;
int last = direction.LastIndexOf("</body>");
direction = direction.Substring(first, last - first);

Console.WriteLine("Public IP: '{0}'", direction); 
```

它打印三个 IP 地址（::1、一个私有和一个公共），但它们都不是从[Request.UserHostName](http://msdn.microsoft.com/en-us/library/system.web.httprequestbase.userhostname.aspx)返回的地址。

如果我将从上述测试应用程序打印的任何地址传递到[Dns.GetHostEntry](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.80%29.aspx)方法中，我会得到一个合理的值。

那么，有什么方法可以从这个既不是公共也不是任何私人的奇怪 IP 地址中获取到一个我可以毫无例外地获取它的主机条目的地址（这个地址是什么）？

顺便说一句，据我所知，在 HTTP 消息中没有 X_FORWARD_FOR 标头或其他任何我可以识别客户端的东西？

## 问题的背景

因此有人指出（感谢 Damien），如果我解释了为什么要问这个问题，也许有人可以提供一种替代方法，所以这里有一些背景......

我有一个要求，应该允许应用程序的管理员在配置中指定允许查看页面的单个机器 - IP 地址或机器名称 - 我可能可以删除机器名称要求，但即使他们指定配置中的 IP 地址仍然与从 UserHostName 属性返回的 IP 地址不匹配，因为他们将使用在 ping 机器名称时返回的 IP 地址。

因此，我的想法是，如果我获取 HTTP 标头中发送的任何内容并将其传递给 GetHostEntry，然后从中获取所有可能的结果（所有 IP 和主机名），看看它们中的任何一个是否与我配置的值匹配可以说“允许”，否则“不允许”（我也将删除第一个点之前的主机名部分，以涵盖这种可能性）。这种方案已经被我所遇到的这种情况吹得水泄不通了，我的 IP 地址根本不是我所期望的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T15:10:20.920

客户端的主机名通常是未知的，因为它不是在 HTTP 级别传输的。服务器无法知道它。用 Fiddler 看一下 HTTP 请求，自己看看服务器可用的信息并不多（当然客户端可以伪造所有请求内容）。

使用该`UserHostAddress`属性获取 IP 地址。这是您可以可靠地找到的最多信息。一旦你有了它，你可以尝试将 IP 反转为主机名，但这并不总是可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-15T20:20:20.480

我对你的问题有更具体的回答。[通过在此处](http://referencesource.microsoft.com/#System.Web/HttpRequest.cs,e531758bc0e6cfa9)检查 HttpRequest.UserHostName 的源代码，我发现它映射到名为 REMOTE_HOST 的 IIS 服务器变量，[此处](https://support.microsoft.com/en-us/kb/245574)描述了该变量。该属性将返回客户端的 IP 地址，除非您已按照所述方式配置 IIS，在这种情况下，IIS 将执行反向 DNS 查找以尝试返回与 IP 关联的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-23T10:31:15.233

请务必阅读[Dns.GetHostEntry](https://docs.microsoft.com/en-us/dotnet/api/system.net.dns.gethostentry)的备注部分，了解它可能（部分）失败的**许多情况：**

> 评论
> 
> GetHostEntry 方法向 DNS 服务器查询与主机名或 IP 地址关联的 IP 地址。
> 
> 如果将空字符串作为 hostNameOrAddress 参数传递，则此方法返回本地主机的 IPv4 和 IPv6 地址。
> 
> 如果找不到主机名，则返回值为 11001 的 SocketException 异常（Windows 套接字错误 WSAHOST_NOT_FOUND）。如果 DNS 服务器没有响应，则可以返回此异常。如果名称不是正式的主机名或别名，或者在被查询的数据库中找不到它，也会返回此异常。
> 
> 如果 hostNameOrAddress 参数包含 Any 或 IPv6Any，也会返回 ArgumentException 异常。
> 
> GetHostEntry 方法假定如果在 hostNameOrAddress 参数中传递 IP 文字字符串，则应用程序希望返回带有所有属性集的 IPHostEntry 实例。这些属性包括地址列表、别名和主机名。因此，当传递 IP 字符串文字时，GetHostEntry 方法的实现表现出以下行为：
> 
> 1.  该方法尝试解析地址。如果 hostNameOrAddress 参数包含合法的 IP 字符串文字，则第一阶段成功。
> 2.  尝试使用 IP 字符串文字的 IP 地址进行反向查找以获取主机名。此结果设置为 HostName 属性。
> 3.  来自此反向查找的主机名再次用于获取与该名称关联的所有可能 IP 地址并设置为 AddressList 属性。
> 
> 对于 IPv4 字符串文字，上述所有三个步骤都可能成功。但是对于实际上属于不同主机的 IPv4 地址，可能会返回陈旧的 DNS 记录。这可能会导致第 3 步失败并引发异常（IPv4 地址有 DNS PTR 记录，但 IPv4 地址没有 DNS A 记录）。
> 
> 对于 IPv6，上面的第 2 步可能会失败，因为大多数 IPv6 部署不会为 IPv6 地址注册反向 (PTR) 记录。因此，此方法可能会将字符串 IPv6 文字作为 HostName 属性中的完全限定域 (FQDN) 主机名返回。
> 
> GetHostAddresses 方法在 IP 文字方面具有不同的行为。如果上面的第 1 步成功（它成功解析为 IP 地址），则该地址会立即作为结果返回。没有尝试反向查找。
> 
> 如果本地计算机没有安装 IPv6，则从 GetHostEntry 方法的结果中过滤 IPv6 地址。因此，如果只有 IPv6 结果可用于 hostNameOrAddress.parameter，则可以取回一个空的 IPHostEntry 实例。
> 
> 返回的 IPHostEntry 实例的 Aliases 属性不会由此方法填充，并且始终为空。

# android - 如何将列表视图中的图像和文本传递给另一个活动

> ID：13601395
> 
> 赞同：-2
> 
> 时间：2012-11-28T09:06:25.220
> 
> 标签：android, android-intent, android-widget

> **可能重复：**
> [如何在活动之间传递drawable](https://stackoverflow.com/questions/8407336/how-to-pass-drawable-between-activities)

我想将此列表视图中的图像和文本传递给另一个活动。有人可以向我解释如何将图像和文本传递给另一个同时显示图像和文本的活动

在代码中有两个活动 home 活动和 list_display 在这个 list_display 类中创建了带有图像和文本的自定义列表视图，我得到了带有图像和文本的列表视图现在我想将图像和文本传递给第三个显示图像和文本的活动

家庭活动

```
 public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId()==R.id.iv_animals)
    {
        Intent intent=new Intent(Home_Activity.this,List_Display.class);
        intent.putExtra("type", "animal");
        startActivity(intent);
    }else if(v.getId()==R.id.iv_wild)
    {
        Intent intent=new Intent(Home_Activity.this,List_Display.class);
        intent.putExtra("type", "wild");
        startActivity(intent);
    }

package com.myown.kidszoo;

 import java.util.ArrayList;
 import java.util.HashMap;
 import java.util.List;

 import android.app.Activity;
 import android.content.Context;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.AdapterView;
 import android.widget.AdapterView.OnItemClickListener;
 import android.widget.BaseAdapter;
 import android.widget.GridView;
 import android.widget.ImageView;
 import android.widget.ListView;
 import android.widget.SimpleAdapter;
 import android.widget.TextView;

  public class List_Display extends Activity implements OnItemClickListener {
Object animalArray[][]={{"animal",R.drawable.a_american_alligator,"ALIGATOR"},"animal",R.drawable.bear,"BEAR"},
                        {"animal",R.drawable.camel,"CAMEL"},{"animal",R.drawable.dog,"DOG"},
                        {"wild",R.drawable.elephant,"ELEPHANT"},{"wild",R.drawable.fox,"FOX"},
                        {"wild",R.drawable.giraffe,"GIRAFFE"},{"wild",R.drawable.hippopotamus,"HIPPOPOTAMUS"},

String i;
int lstIndex;
int pos;
public Context mContext;
@Override
public void onCreate(Bundle instance) {
    super.onCreate(instance);
    setContentView(R.layout.list_sample);
    i=getIntent().getExtras().getString("type");
    List<HashMap<String,Object>> nameList=new ArrayList<HashMap<String,Object>>();
    HashMap<String,Object> hm=new HashMap<String, Object>();
    if(i.equals("animal"))
    {
    for(int i=0;i<animalArray.length;i++) {
            hm.put("name", animalArray[i][1]);
            hm.put("image", animalArray[i][2]);
            nameList.add(hm);
    }}
    if(i.equals("wild"))
    {
    for(int i=0;i<animalArray.length;i++) {
            hm.put("name", animalArray[i][1]);
            hm.put("image", animalArray[i][2]);
            nameList.add(hm);
    }}

    ListView lv1=(ListView)findViewById(R.id.ListView1);
    String from[]={"image","name"};
    int to[]={R.id.iv_home_singlelist,R.id.tv_name_single};
    SimpleAdapter adapter=new SimpleAdapter(getApplicationContext(), nameList, R.layout.single_list, from, to);
    lv1.setAdapter(adapter);
    lv1.setOnItemClickListener(this);

}
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    // TODO Auto-generated method stub
    Intent intent=new Intent(List_Display.this,Fullimage_Display.class);
    //
    // what data i need to give here to go to next activity
    startActivity(intent);

};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:11:24.367

将位图的缓冲区放入putExtra中，如下：

> Bitmap.getPixels(int[] mybuffer,...)
> 
> Intent.putExtra("MyBuffer",mybuffer)

要从其他活动中获取它，只需执行以下操作：

> int[] mynewbuffer = Intent.getIntArrayExtra("MyBuffer")
> 
> 位图 myBitmap = Bitmap.createBitmap(mybuffer,...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:16:51.767

如果您需要在两个活动之间传递图像意味着，首先您必须将图像转换为位图，然后使用此代码传递位图，

```
 Intent intent = new Intent(Current.this, Next.class);
 intent.putExtra("bmp", bitmap); // for image
 intent.putExtra("text", text); //for text 
 startActivity(intent); 
```

在活动二中使用这个，

```
 Bitmap bitmap = getIntent().getParcelableExtra("bmp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:20:15.717

你不能通过意图的额外传递大图像。但是在您的代码中，似乎所有图像都是可绘制资源。因此，您可以只传递只是“int”数字的资源 id，然后在下一个活动中从资源中重新加载图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:23:53.863

实际上，您可以将图像转换为位图，但我认为它没有优化并且可能需要很多时间。您应该尽可能将图像的引用放在您的 Extra 中（例如它的资源 ID）。

# highcharts - 添加点时Highchart更新类别

> ID：13601402
> 
> 赞同：1
> 
> 时间：2012-11-28T09:06:48.127
> 
> 标签：highcharts

## 背景

我试图使用 highchart 显示与小时动态相关的平均**流量**。就是说我想让它像[这样](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/dynamic-update/)反复显示流量，下次到23:00的时候我想让它回到0:00。

我通过设置 24 个类别 ['0:00', '1:00'...,'23:00'] 来做到这一点，并在 ajax 更新数据时添加点，比如每 1 秒。

```
var chart = new Highcharts.Chart({
  ...//some options
  xAxis: {
            categories:['0:00','1:00','2:00',...,'23:00']
         },
  load: function() {setInterval(updateData,1000)}
  series: [] //empty series here, adding dynamically by ajax
 }) 
```

updateData 被定义为一个函数

```
function updateData(){
  var data = $.ajax(...)// get the data
  var series = chart.series[0];
  if(series.data.length < 24){ //when data.length is < 24 add directly
    chart.series[0].addPoint(data,true,false);
  }else{
    chart.series[0].addPoint(data,true,true);//set the 3rd option to true to remove the first data point, actually here this data is equal to the first one since this is a circle, when it comes to 24:00 it is actually 0:00, and I should update the xAxis.
    //code updating the axis categories to [1:00, 2:00...23:00,0:00]
    xAxis.setCategories(categories);
  }
} 
```

x轴原来是[ **2:00** , 3:00, ...23:00, 0:00, **24** ]，也就是说我这次添加的点不对应类别[24 ]:0:00，其实对应的是不存在的categories[25]，所以默认设置为24。 ![在此处输入图像描述](../Images/d51284073f438537d2730bb6311a9c91.png)

## 解决方案（快速而肮脏）

不要环转移类别，而是将一个新的圈推到它上面，例如：

```
categories.push("time");//time is 0:00-23:00
xAxis.setCategories(categories); 
```

但这会使类别越来越大……这很糟糕。我怎样才能解决这个问题。

## 另一个解决方案（也有一些问题）

通过使用 datetime 作为 x 轴的类型，还有另一个问题。我的数据格式如下

```
time              count
8:00               23
9:00               56
...                ... 
```

我可以构造像 [time, count] 这样的点，问题是我只有时间。即使我通过手动添加日期来构建数据

```
time = (new Date("2012-11-17 "+time)).getTime() 
```

似乎可行。但是当它经过 24 小时后，样条曲线又回到了图表的左侧，因为这里的 x 轴值等于第一个值。![在此处输入图像描述](../Images/6cf59391762282457758e6bb53ede825.png) BTW：如何让x轴只显示时间，上图左侧显示日期，自动显示时间间隔如何让它全部显示？感谢您的关注！！！

我听从了@Ruchit Rami 的建议并修改了我的代码：

```
/*update part*/
var time = series.points.length > 0 ? series.points[series.points.length-1].category+3600 : 0;
//from 1970-1-1 0:00 And **add 1 hour everytime**
if (series.data.length < 24) {
series.addPoint([time, sum],true,false);
} else {
series.addPoint([time, sum],true,true);
}
/*chart part*/
xAxis: {
    type: 'datetime',
    dateTimeLabelFormat: {
      second: '%H:%M',
      minute: '%H:%M',
      hour: '%H:%M',
      day: '%H:%M',
      week: '%H:%M',
      month: '%H:%M',
      year: '%H:%M'
   }
   tickInterval: 3600
} 
```

## 结果

![尽管我指定了日期标签格式，但它似乎不受影响](../Images/5f520b4f10c8cd0d23143760fdc3e615.png) 尽管我指定了日期标签格式，但似乎没有受到影响 ![在此处输入图像描述](../Images/ce60e9d11fa292b70c336a29c151bc93.png) 而且时间不正确。为什么？谢谢！ ![在此处输入图像描述](../Images/3e7624d13d8493b1704c2bac0054b85e.png) 仍然没有正确显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:50:22.800

要仅在 X 轴上显示时间，您可以使用`dateTimeLabelFormats`xaxis 的属性，并且可以`tickInterval`用于在 xaxis 上设置刻度间隔。

```
 //Sets tickInterval to 24 * 3600 * 1000 if display is by day
                        tickInterval : 24 * 3600 * 1000,
                dateTimeLabelFormats : {
                hour : '%H:%M',
                    day : "%H:%M"        
                } 
```

现在，对于从第一个点重绘图表的问题，您需要增加 xaxis 点的日期。我无法提出任何优雅的解决方案，但您可以在动态添加新点的同时检查时间“0:00”，并且在添加该点之前，与系列中的最后一点相比，将其日期部分增加一个。
您可以通过 找到该系列的最后一点`series.points[series.points.length-1]`。
希望我没有错过任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:43:23.577

现在，这可能不是您想要的，但我正在对您想要展示的内容做出一些假设：

*   一“天”的小时数据 0000-2300
*   不关心只显示时间的日期
*   数据在给定时间跨“天”波动

我在[这里](http://jsfiddle.net/wergeld/cNWTK/)创建了一个遍历 4“天”数据的图表示例。为此，我首先创建了一个空数据系列来绘制图表，然后在加载图表时，我每 1.5 秒遍历一组数据集。然后它循环回到开头。我让它用“一天”更新一个 DIV。如果我错过了您需要的某些条件，请告诉我。

这是循环代码：

```
var data1 = [5, 8, 2, 5, 7, 4, 1, 2, 30, 20, 50, 30, 150, 130, 70, 50, 20, 47, 32, 18, 20, 15, 16, 8];
var data2 = [9, 15, 3, 4, 1, 1, 0, 0, 60, 75, 112, 190, 267, 365, 258, 164, 168, 190, 47, 16, 20, 18, 5, 8];
var data3 = [15, 18, 12, 5, 7, 4, 1, 2, 130, 20, 150, 130, 150, 130, 70, 50, 20, 47, 32, 18, 20, 15, 16, 8];
var data4 = [19, 15, 13, 4, 11, 11, 0, 0, 60, 175, 112, 190, 267, 365, 258, 164, 168, 190, 47, 16, 20, 18, 15, 18];

var dataSet = [data1, data2, data3, data4];
var dataIter = 0;

$(function() {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            events: {
            load: function() {
                var series = this.series[0];
                setInterval(function() {
                    if (dataIter >= dataSet.length) dataIter = 0;
                    series.setData(dataSet[dataIter], true);
                    $("#dayLabel").text("Day - " +dataIter.toString());
                    dataIter += 1;
                }, 1500);
            }
        }
        },
        xAxis: {
            categories: ['0000', '0100', '0200', '0300', '0400', '0500', '0600', '0700', '0800', '0900', '1000', '1100', '1200', '1300', '1400', '1500', '1600', '1700', '1800', '1900', '2000', '2100', '2200', '2300'],
            labels: {
                rotation: 90
            }
        },
        yAxis: {
            min: 0,
            max: 500
        },
        series: [{
            data: []}]
    });

}); 
```

# ios - 如何在 ios 应用程序中创建两个 tcp 连接

> ID：13601403
> 
> 赞同：1
> 
> 时间：2012-11-28T09:06:51.023
> 
> 标签：ios, tcp, nsstream

我正在开发一个需要与具有不同地址的两台服务器建立 tcp 连接的 ios 应用程序。NSStream 能做到吗，怎么做？我应该把一个通信放在一个单独的线程上吗？

# nosql - Cassandra 复合类型

> ID：13601406
> 
> 赞同：6
> 
> 时间：2012-11-28T09:07:04.533
> 
> 标签：nosql, cassandra, hector

我在 Hector 和 Cassandra 的教程中看到了`DynamicCompositeType`.

任何人都可以详细说明之间的区别

```
 create column family Composite with comparator ='DynamicCompositeType
       (t=>TimeUUIDType,s=>UTF8Type)'
       and default_validation_class=UTF8Type and key_validation_class=UTF8Type; 
```

和

```
create column family Composite
    with comparator = 'CompositeType(TimeUUIDType,UTF8Type)' 
    and key_validation_class = 'UTF8Type' 
    and default_validation_class = 'UTF8Type' 
```

我没有在 Cassandra 文档中找到它

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:43:17.183

它可能有助于理解 Cassandra 如何存储数据以及组合实际上是什么：

*   所有数据，无论您使用哪个验证器/比较器，都存储为字节。当您指定验证器时，您只是要求 Cassandra 确保这些字节按照您的需要进行编码。相比之下，比较器只是根据特定于您给它的编码的自然顺序对列进行排序。

*   因此，组合只是具有特定编码的字节数组。这种编码非常简单：对于每个组件，它存储一个两个字节的长度，然后是字节编码的组件，然后是一个终止位，用于确定它是包含还是排除。由于任何东西都可以存储在字节数组中，因此您可以拥有不同的组件类型——但您必须知道它们是什么并自己解码/编码它们。

*   为了实现动态复合，Hector 将额外的类型数据写入字节数组，以便在读取字节时知道如何解码字节。静态组合无法做到这一点，因为没有类型信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:51:32.160

对于静态复合 CF，每列都将具有相同的类型，而对于动态 CCF，每列可以具有不同的数据类型。

如果您确定 CF 中的数据类型最好坚持静态定义，否则使用动态 CF。

# php - 我可以从本地主机运行我的 Facebook 应用吗

> ID：13601408
> 
> 赞同：0
> 
> 时间：2012-11-28T09:07:07.893
> 
> 标签：php, facebook-graph-api

问题：我可以从本地主机运行我的 Facebook 应用程序吗？

描述：我想在我的网站页面上获取 Facebook 墙贴。为了测试，我创建了一个 facebook 应用程序并将站点 URL 设置为“http:localhost:8088/fb/”并将应用程序域设置为“localhost”。现在我想获取用户 ID，以便我可以访问 facebook 墙上的帖子。但是得到的只是用户 ID 等于零。我已经检查了很多次。但一切似乎都是正确的。所以我想知道我们可以使用本地主机作为网站网址吗？我可以通过从本地主机运行我的代码来获取用户 ID。下面是我的代码。

```
<?php 
include_once "facebook.php";

$facebook = new Facebook(array(
               'appId' => '<app id>',
                'secret' => '<app secret>',
                'cookie' => true,
            ));

$uid = $facebook->getUser();
echo $uid;
$me = null;
if ($uid) {
  try {

   $me = $facebook->api('/me');
    $feed = $facebook->api('/me/feed/');
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}

$params = array(
  'scope' => 'read_stream',
  'redirect_uri' => 'http://localhost:8088/fb/feeds.php'
);
if ($uid) {

    $logoutUrl = $facebook->getLogoutUrl();
} 
else {
    $loginUrl = $facebook->getLoginUrl($params);
}

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
  </head>
  <body>
    <?php if($uid)

    {
    ?>
    <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php
  }
else
{
?>
<a href="<?php echo $loginUrl; ?>">Login</a>
<?php
}   
     ?>

    <?php if ($me): ?>
    <?php
    echo "<pre>";
    print_r($feed);
    echo "</pre>";
    ?>
    <?php endif ?>
 </body>
</html> 
```

请告诉我这里有什么问题。有没有我需要执行的设置。我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:38:15.763

在 localhost 上测试 Facebook api 的更好方法是首先为您的 Web 应用程序创建一个虚拟主机，例如 yourapp.local，然后在您的 Facebook 应用程序信息中相应地设置 URL。您可以为本地和远程站点创建单独的 Facebook 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:23:10.950

是的，您可以从 localhost 环境运行您的应用程序。除了不需要在应用程序域中添加 localhost 并且您的站点 url 应该是之外，您所做的一切都是正确的

> http:// 本地主机:8088 /fb/

而不是“http:localhost:8088/fb/”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:52:48.947

如果您的应用程序中有 facebook 聚合（对象+操作），我敢肯定您不能这样做。因为他们需要通过facebook直接访问

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:29:47.307

在大多数情况下你可以。只是 iframe 的 Facebook 应用程序不需要连接到您的主机 - 只有您/您的浏览器才需要。

需要注意的两件事：

1.  确保您的本地主机上有 SSL (https://)。如果没有，请在您的测试 Facebook 帐户设置中禁用 SSL。

2.  Facebook 需要访问您的主机的一种情况包括共享在您的应用程序中托管的 URL 或图像。测试本地应用程序时使用外部占位符。

# javascript - 堆排序算法，把最小的元素放在最后

> ID：13601409
> 
> 赞同：1
> 
> 时间：2012-11-28T09:07:10.623
> 
> 标签：javascript, algorithm, heapsort

出于培训目的，我在 javascript 中实现了一组排序算法。我的实现已经成功地对整数和单字符字符串数组进行排序，除了堆排序。

我的实现对数组进行了正确的排序，除了在返回排序后的数组时将最小的数字放在末尾。

我不是 CS 学生/研究生，也没有很多编程背景。我正在通过读取/尝试/失败方法进行学习，但我无法使其正常工作。

我会将代码及其结果放在本段下方。最后，我想补充一点，我将[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Heapsort)中的伪代码作为我实现的参考。

```
function heapSort(intl)
{
    var l   = intl.length,
        end = l - 1,
        swap;
    intl = _heapify(intl,l);

    while(end>0)
    {
        swap      = intl[0];
        intl[0]   = intl[end];
        intl[end] = swap;
        --end;
        intl = _siftDown(intl, 0, end);
    }

    return intl;
}

function _heapify(intl, l)
{
    var start = (l - 2) / 2;
    while(start >= 0)
    {
        intl = _siftDown(intl, start, l-1);
        --start;
    }
    return intl;
}

function _siftDown(intl, start, end)
{
    var root = start,
        child, swap, swapr;
    while(root*2+1 <= end)
    {
        child = root * 2 + 1;
        swap = root;
        if(intl[swap] < intl[child])
            swap = child;
        if(child+1 <= end && intl[swap]<intl[child+1])
            swap = child + 1;
        if(swap!=root)
        {
            swap       = intl[root];
            intl[root] = intl[swap];
            intl[swap] = swap;
            root       = swap;
        }else
        {
            return intl;
        }
    }
    return intl;
}

x =
[24,5,896,624,437,5,6,4,37,45,654];
y =
["a","b","r","s","t","e","q","u","q"];

console.log(heapSort(x),"\n",heapSort(y)); 
```

通过nodejs运行代码：

```
$ node sort.js
[ 5, 5, 6, 24, 37, 45, 437, 624, 654, 896, 4 ]
[ 'b', 'e', 'q', 'q', 'r', 's', 't', 'u', 'a' ] 
```

我试图通过更改代码来找到错误所在，但我找不到它。谁能告诉问题出在哪里？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:34:44.417

我看到了 2 个错误：

1.  在`_heapify`函数中，如果不是奇数，则`start`变量不是整数：`l`

    ```
    var start = Math.floor( ( l - 2 ) / 2 ); 
    ```

2.  在`_siftDown`函数中，您使用`swap`而不是`swapr`有效交换数组的 2 个元素：

    ```
    swapr      = intl[root];  // <-- Here swapr instead of swap
    intl[root] = intl[swap];
    intl[swap] = swapr;       // <-- Here swapr instead of the 1st occurrence of swap
    root       = swapr;       // <-- Here swapr instead of swap 
    ```

# c# - 使用 Roslyn 处理 C# 脚本时的编译错误

> ID：13601412
> 
> 赞同：4
> 
> 时间：2012-11-28T09:07:28.877
> 
> 标签：c#, roslyn

我正在使用 Roslyn 将 C# 脚本引擎嵌入到我的应用程序中，到目前为止，我可以毫无问题地执行代码。例如，我可以执行以下代码：

```
using System;
var str = "Hello Roslyn";
Console.WriteLine(str); 
```

在上面的代码片段中构建我的语法树时，我遇到了编译问题。编译器抱怨直接嵌入到主命名空间中的语句，这在编写普通的 C# 程序时是有意义的，但在我的情况下却不是，因为我正在使用脚本方式。

**问题：** 有没有办法从 C# 脚本中构建无错误的语法树？

**编辑** 这是我用来构建语法树的代码。

```
SyntaxTree tree = SyntaxTree.ParseText(context.SourceCode);
Compilation compilation = Compilation.Create("CSharp", syntaxTrees: new[] {tree}, references: references); 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T16:56:54.900

您需要指定您正在解析脚本代码而不是常规代码：

```
SyntaxTree tree = SyntaxTree.ParseText(source, options: new ParseOptions(kind: SourceCodeKind.Script)); 
```

# bash - 检测 PC 正在运行 UPS 电源并关闭计算机

> ID：13601419
> 
> 赞同：0
> 
> 时间：2012-11-28T09:08:03.787
> 
> 标签：bash, hardware

我在晚上下载大量数据，我的电脑正在通过 UPS 运行。有什么方法可以检测到电源故障并命令我的电脑自动关闭？因为我在晚上工作，没有人关掉电脑，如果有人能提供帮助，那将是非常有帮助的。是否可以？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-16T13:54:49.967

**重要提示：**下面提供的脚本将导致系统在网络关闭时关闭，因此使用它们需要您自担风险！

如果您有一个网络主机（例如您的路由器）响应 ICMP 回显请求并且不是由 UPS 供电（或者至少网络设备不是由 UPS 供电），那么做您想做的事情的方式并不那么优雅，将是每隔几秒钟 ping 该主机，如果它关闭，则关闭 PC：

```
#!/bin/bash
while :
do
  ping -c 1 -w 5 192.168.0.1 &> /dev/null
  if [  $? -gt 0  ]; then
    shutdown -hP now
    break
  fi
  sleep 10s
done 
```

您必须将 192.168.0.1 更改为要 ping 的网络主机的 IP 地址。

您还必须使脚本可执行`chmod +x <script_name>`并对其进行调用`/etc/rc.local`（不要忘记附加 a`&`以使其在后台运行），这将在启动时以 root 身份运行脚本。

为了完整起见，如果 PC 运行的是 Windows XP，则可以使用以下批处理文件：

```
:loop
ping -n 1 -w 5000 192.168.0.1
if not %ERRORLEVEL% == 0 (
    shutdown -s
    goto end
)
sleep 10
goto loop
:end 
```

请注意，Windows 批处理文件需要`sleep`可以作为 Windows Server 2003 资源工具包工具包的一部分安装的命令（[可从 Microsoft 网站免费下载](http://www.microsoft.com/en-us/download/details.aspx?id=17657)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:40:14.457

如果它是 APC 并且具有数据端口，则可以使用 PowerChute。它是一个基于 java 的 GUI（如果这是您的服务器，这可能是一个问题），它完全按照您的要求执行。

# regex - 带有嵌套数组的正则表达式拆分数组（字符串）

> ID：13601420
> 
> 赞同：1
> 
> 时间：2012-11-28T09:08:04.003
> 
> 标签：regex, arrays, split, comma

我只是试图找到类似的东西来自己解决问题，但我只找到了一些“部分”，我不知道如何组合它们。所以我希望任何人都可以帮助我解决这个问题。问题：

我有一个字符串，其中包含一个带有一个（或多个）嵌套数组的数组。

> [1,'ab c',[1,'ab c',"AB C"],"AB C"]

或者可能

> [1,['ab c'],'a',[1,"AB C"],"AB C"]

ETC...

我想在结果中得到的是由逗号分隔的顶部数组，但嵌套数组包括逗号，但没有括号。

例如。对于第一个字符串：

> [0] -> 1
> 
> [1]->'abc'
> 
> [2] -> 1,'ab c',"AB C"
> 
> [3]->“AB C”

我当前为我提供拆分顶部数组的正则表达式是：

> /\[[\w\d\s\,\'\"]+]|[\w\d\s\"\']+/g

但是现在我不知道如何更改我的正则表达式来“剪切”内括号......我已经尝试了不同的方法，使用前瞻/后置、单词边界、组等，但没有任何成功。那么这甚至可能吗？如果是，如何？

也许我选择了错误的方法，但我需要说我是正则表达式的新手。因此，如果前者不完全正确，请原谅我。

非常感谢您的帮助！

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:10:02.920

尝试

```
String[] parts = string.substring(1,string.length()-1).split(",");
for (int n = 0; n < parts.length; n++) {
    if (parts.charAt(0) == '[') parts[n] = parts[n].substring(1,parts[n].length()-1);
} 
```

从字面上看你所说的

> 顶部数组用逗号分隔，但嵌套数组没有括号。

有时，编程就是这么简单:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:43:32.873

这个拆分正则表达式非常丑陋，但可以满足您的要求。据我所知，使用 RegexBuddy，它只能在 .NET 中工作。

```
(?<=^\[(?:(?>\[[^\]\[]+(?:\]|(?=\])))|(?>[^\[\]]+))*|^)[,\[\]]+ 
```

尽管我喜欢使用正则表达式，但在这种情况下，我想我会使用如下的小函数（用 C# 编写）：

```
string[] DeserializeArray(string serializedArray) {
    const char OPEN_GROUP = '[', CLOSE_GROUP = ']', DELIMITER = ',';
    List<string> deserializedArray = new List<string>();
    StringBuilder accumulator = new StringBuilder();
    int nestDepth = 0;
    int baseDepth = serializedArray[0] == OPEN_GROUP ? 1 : 0;
    for(int i=0; i<serializedArray.Length; ++i){
        if(serializedArray[i] == OPEN_GROUP) ++nestDepth;
        else if(serializedArray[i] == CLOSE_GROUP) --nestDepth;
        else if(serializedArray[i] == DELIMITER && nestDepth <= baseDepth) {
            deserializedArray.Add(accumulator.ToString());
            accumulator.Clear();
        }
        else {
            accumulator.Append(serializedArray[i]);
        }
    }
    deserializedArray.Add(accumulator.ToString());
    return deserializedArray.ToArray();
} 
```

# button - 预期行尾等，但找到标识符

> ID：13601422
> 
> 赞同：4
> 
> 时间：2012-11-28T09:08:08.810
> 
> 标签：button, twitter, identifier

我正在尝试制作一个基本的applescript，它会告诉打开的应用程序在收到新推文时按下上传。该脚本给了我标题中的错误，并在我编译它时突出显示了“按钮”这个词。谁能告诉我我哪里出错了？

重复

```
tell application "safari"
    set URL of tab 1 of window 1 to "https://twitter.com/i/connect"
    delay 5
    if text of tab 1 of window 1 contains "1 new interaction"
        tell application "Arduino" to activate 
        click button "Upload" of window 1
        delay 1
    end if
end tell 
```

结束重复

# c++ - 带有自定义编码器 C++ 的 Gstreamer RT(S)P 服务器

> ID：13601424
> 
> 赞同：0
> 
> 时间：2012-11-28T09:08:17.550
> 
> 标签：c++, gstreamer, rtsp, rtp

我正在寻找使用 c++ 中的 gstreamer api（在 linux 平台上）创建一个实时传输/流协议（RT（S）P）服务器，并可以发送由自定义编码器/解码器编码的数据。到目前为止，我有一个使用以下教程工作的简单服务器： [http ://www.ip-sense.com/linuxsense/how-to-develop-a-rtsp-server-in-linux-using-gstreamer/](http://www.ip-sense.com/linuxsense/how-to-develop-a-rtsp-server-in-linux-using-gstreamer/)

接下来的步骤是找到一种方法来处理原始图像，然后使用我的自定义编码器。

谁能指出我类似的教程/示例，也许可以解释 RTSP 和 RTP 中的哪一个（或两者？）最适合用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:15:31.783

要使用自定义编码器/解码器，您需要编写自己的 gstreamer 插件。如果您查看教程代码中的第 83 到 85 行，它正在定义一个 gstreamer 管道。

gst_rtsp_media_factory_set_launch (factory, "( " "videotestsrc !video/x-raw-yuv,width=320,height=240,framerate=10/1 !" "x264enc !queue !rtph264pay name=pay0 pt=96 !audiotestsrc !audio/ x-raw-int,rate=8000 !alawenc !rtppcmapay name=pay1 pt=97 "")");

这里的管道使用 x264enc 和 H.264 编码器。编写 gstreamer 插件后，您可以更改上述管道以使用您的编码器。

# css - 清除浮动有一个奇怪的结果

> ID：13601425
> 
> 赞同：2
> 
> 时间：2012-11-28T09:08:17.843
> 
> 标签：css, css-float

```
<!Doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>test</title>
    </head>
    <body>
        <div style="float: left; width: 200px; height: 150px;
background-color: red;"></div>
        <div style="background-color: gray;">
            <div style="clear: left;"></div>
        </div>
    </body>
</html> 
```

![在此处输入图像描述](../Images/fb182f9db31b730b9df6a5ee2ea31672.png)

我的问题：为什么红色块的高度和灰色块的高度相等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:31:49.917

这基本上[就是 clearfix 的工作原理](https://stackoverflow.com/questions/8554043/what-actually-is-clearfix)。

红色块向左浮动，而灰色块根本不浮动。您有一个清除 div 作为灰色 div 的子级；由于那个孩子正试图清除左浮动的红色块，它需要从红色块的最底部开始定位。因为需要向下移动，所以将灰色块的高度拉低，使两个块的高度相等。

# ios - Xcode 上的捆绑标识符

> ID：13601427
> 
> 赞同：3
> 
> 时间：2012-11-28T09:08:28.673
> 
> 标签：ios, xcode, bundle, identifier

我正在尝试更新我的应用程序，但遇到了 Bundle Identifier 的问题。旧版本是用早期的 xCode 开发的，而新版本是在最新的 Xcode 版本 4.5.2 上开发的。更高版本不允许我使用以数字开头的相同 ID

“5StarRingTones”，它会自动转换为连字符“-StarRingTones”，并且不允许我修改它，见附件截图。

哪个应用程序加载器将拒绝接受更新并给出错误：“捆绑标识符：com.matrixteam.-StarRingTones 与之前的捆绑标识符不同：com.matrixteam.5StarRingTones”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:04:19.497

您应该可以通过 Info.plist 更改它。

# java - 是否可以从 java 代码绑定和访问 c 结构成员？

> ID：13601431
> 
> 赞同：1
> 
> 时间：2012-11-28T09:08:42.267
> 
> 标签：java, android, c

我们需要从 java android 代码中集成一些 C 文件函数。每个 c 函数都接受一些原始二进制数据（字节流）作为输入参数，处理并返回指向 c 文件中定义的 c 结构（联合结构）的指针。是否可以创建一些 java 结构并将其绑定到 c 结构？目前，返回数据（返回的 c 结构）的提取是在 java 代码中逐字节提取的，而不是直接访问结构成员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:11:21.143

我不确定具体细节，但我认为[Java Native Interface](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)是你最好的选择。

# visual-studio-2008 - 连接没有 ActiveSync 的 WinCE 设备

> ID：13601433
> 
> 赞同：2
> 
> 时间：2012-11-28T09:08:50.170
> 
> 标签：visual-studio-2008, compact-framework, windows-ce

我尝试在没有 ActiveSync 的情况下连接 WinCE 设备，如下所示：

[http://msdn.microsoft.com/en-us/library/ms228708%28VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms228708%28VS.90%29.aspx)

已从 Microsoft Visual Studio 2008 版本 9.0.30729.4462 QFE Microsoft .NET Framework 版本 3.5 SP1 成功连接

1）是否有可能断开设备并连接另一个设备？

2) 是否可以在没有 ActiveSync 的情况下与其他实用程序连接（例如来自 C:\Program Files\CE Remote Tools\5.01\bin）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:09:59.950

这篇文章谈论的连接是 CoreCon。您可以以编程方式访问它，因此您可以确定可用的平台、连接、断开连接等。VSD 团队在博客中介绍了它[，这里是 5 部分系列中的第一篇，其余部分位于](http://blogs.msdn.com/b/vsdteam/archive/2007/11/20/corecon-api-part-1.aspx)[此列表](http://blogs.msdn.com/b/vsdteam/)的顶部。

# java - 如何在 apache 中使用 HttpClient 从 Java Swing 登录页面调用 Servlet？

> ID：13601435
> 
> 赞同：1
> 
> 时间：2012-11-28T09:08:52.560
> 
> 标签：java, apache, swing, http, servlets

我的 Swing 登录页面包含用户名和密码以及一个提交按钮。

我需要将用户名和密码传递给 LoginAction servlet，我需要通过 servlet 在控制台中获取用户名和密码...

我的 Swing 代码是，

```
package com.tps.SwingChat.login;

import javax.swing.*;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import java.awt.*;
import java.awt.event.*;
import java.io.IOException;

class Login extends JFrame implements ActionListener
{
    private static final long serialVersionUID = 1L;
    JButton SUBMIT;
    JPanel panel;
    JLabel label1,label2;
    final JTextField  text1,text2;
    Login()
    {
        label1 = new JLabel();
        label1.setText("Username:");
        text1 = new JTextField(15);

        label2 = new JLabel();
        label2.setText("Password:");
        text2 = new JPasswordField(15);

        SUBMIT=new JButton("SUBMIT");

        panel=new JPanel(new GridLayout(3,1));
        panel.add(label1);
        panel.add(text1);
        panel.add(label2);
        panel.add(text2);
        panel.add(SUBMIT);
        add(panel,BorderLayout.CENTER);
        SUBMIT.addActionListener(this);
        setTitle("LOGIN FORM");
    }
    public void actionPerformed(ActionEvent ae)
    {
        String uname=text1.getText();
        String pwd=text2.getText();

        HttpClient client = new DefaultHttpClient();
        HttpPost post = new HttpPost("http://localhost:8089/SwingChat/LoginAction?uname="+uname+"&pwd="+pwd);

        try {
            HttpResponse rsp = client.execute(post);
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}
class LoginDemo
{
    public static void main(String arg[])
    {
        try
        {
            Login frame=new Login();
            frame.setSize(300,100);
            frame.setVisible(true);
        }
        catch(Exception e)
        {JOptionPane.showMessageDialog(null, e.getMessage());}
    }
} 
```

我的 Servlet 是，

```
public class LoginAction extends HttpServlet {
    private static final long serialVersionUID = 1L;

    String uname = null;
    String pwd = null;

    public LoginAction() {
    super();
    }

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        uname = request.getParameter("uname");
        pwd = request.getParameter("pwd");

        System.out.println("UserName : "+uname);
        System.out.println("Password : "+pwd);
    }

} 
```

请任何帮助我找到解决方案。

如果我提交摇摆页面什么都没有发生。我需要在控制台中输入用户名和密码。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:31:46.403

更新了您的代码以将数据传递给 servlet 并从服务器读取响应数据。

```
public void actionPerformed(ActionEvent ae) {
    String uname = text1.getText();
    String pwd = text2.getText();

    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(
            "http://localhost:8089/SwingChat/LoginAction?uname=" + uname
                    + "&pwd=" + pwd);
    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("uname", uname));
        nameValuePairs.add(new BasicNameValuePair("pwd", pwd));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // executing the POST request
        HttpResponse rsp = client.execute(post);

        // reading response data
        HttpEntity entity = rsp.getEntity();
        InputStream inputStream = entity.getContent();
        String response = convertStreamToString(inputStream);
        System.out.println("Response from server : " + response);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

请检查

# javascript - 镜像功能做相反的事情

> ID：13601438
> 
> 赞同：0
> 
> 时间：2012-11-28T09:09:08.437
> 
> 标签：javascript, jquery, audio

我有这个事件可以通过淡出它来改变我的音乐

```
 $(bgMusic).on('timeupdate', function () {
    var vol = 1,
        interval = 250;
    if (bgMusic.volume == 1) {
        var intervalID = setInterval(function () {
            if (vol > 0) {
                vol -= 0.05;
                bgMusic.volume = vol.toFixed(2);
            } else {
                clearInterval(intervalID);
            }
        }, interval);
    }
}); 
```

我现在想要同样的东西来打开音乐。

我尝试过像这样创建相反的东西：

```
 $(bgMusic).off('timeupdate', function () {
    var vol = 0,
        interval = 250;
    if (bgMusic.volume == 0) {
        var intervalID = setInterval(function () {
            if (vol < 0) {
                vol += 0.05;
                bgMusic.volume = vol.toFixed(2);
            } else {
                clearInterval(intervalID);
            }
        }, interval);
    }
}); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:14:57.467

如果你改变：

`if (vol < 0) {`

至：

`if (vol < 1) {`

...我认为音量应该逐渐增加，直到达到最大值 1，从而为您提供您要求的“淡入”效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:23:40.993

不确定您的代码，但我认为您不想在第二个示例中使用 off 函数。

[jQuery关闭：](http://api.jquery.com/off/)

> 描述：删除事件处理程序。

因此，请尝试使用 on to 您的第二个代码，因为您想注册该事件，而不是删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:12:18.710

因为你的 vol 是 0 ，它不会进入 if 条件.. `if (vol < 0) {...` 它应该是

```
 if (vol < 1) {
            vol += 0.05;
            bgMusic.volume = vol.toFixed(2);
        } else {
            clearInterval(intervalID);
        } 
```

# c# - 访问使用 INCLUDETEXT 字段包含的文档中的 CustomXMLPart

> ID：13601440
> 
> 赞同：1
> 
> 时间：2012-11-28T09:09:11.280
> 
> 标签：c#, vsto, ms-office, openxml, openxml-sdk

我有一个 docx Word 文档，其中包含绑定到 CustomXMLPart 中数据的内容控件。

然后使用 INCLUDETEXT 将此文档（或其中的书签）包含在另一个 Word 文档中。

当第一个文档包含在第二个文档中时，有什么方法可以从原始文档中获取 CustomXMLPart（我已经在 Word 中运行了一个 VSTO Word 插件来查看文档）？

我想要做的是将它与第二个文档中已经存在的 CustomXMLPart 合并，以便内容控件仍然绑定到 XMLPart 中的数据。

或者，是否有另一种方法可以在不使用 INCLUDETEXT 字段的情况下执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:44:14.753

我认为使用 VSTO 和 IncludeText 字段可能无法做到这一点，并使用 altChunks 作为替代方案进行了调查。

在打开文件之前，我已经使用 Open XML SDK 2 对文件进行了一些处理，因此在此处将文档合并在一起所需的额外工作。

尽管使用 altChunk 方法将整个第二个文档嵌入到第一个文档中，包括它自己的 CustomXmlParts，但是当打开文档并将第二个文档与第一个合并时，Word 会丢弃 CustomXmlParts。

我最终得到了类似于以下的代码。它用 altChunk 数据替换定义的内容控件，并将特定的 CustomXmlPart 合并在一起。

```
 private static void CreateAltChunksInWordDocument(WordprocessingDocument doc, string externalDocumentPath)
    {
        foreach (var control in doc.ContentControls().ToList()) //Have to do .ToList() on this as when we update the Doc in the loop it stops enumerating otherwise
        {
            SdtProperties props = control.Elements<SdtProperties>().FirstOrDefault();
            if (props == null)
                continue;

            SdtAlias alias = props.Elements<SdtAlias>().FirstOrDefault();
            if (alias == null || !alias.Val.HasValue || alias.Val.Value != "External Template")
                continue;

            using (WordprocessingDocument externaldoc = WordprocessingDocument.Open(externalDocumentPath, false))
            {
                //Replace the Content Control with an AltChunk section, and stream in the external file
                string altChunkId = "AltChunkId" + Guid.NewGuid().ToString().Replace("{", "").Replace("}", "").Replace("-", "");

                AlternativeFormatImportPart chunk = doc.MainDocumentPart.AddAlternativeFormatImportPart(AlternativeFormatImportPartType.WordprocessingML, altChunkId);
                chunk.FeedData(File.OpenRead(externalDocumentPath));

                AltChunk altChunk = new AltChunk();
                altChunk.Id = altChunkId;

                OpenXmlElement parent = control.Parent;
                parent.InsertAfter(altChunk, control);
                control.Remove();

                XDocument xDocMain;
                CustomXmlPart partMain = MyCommon.GetMyXmlPart(doc.MainDocumentPart, out xDocMain);

                XDocument xDocExternal;
                CustomXmlPart partExternal = MyCommon.GetMyXmlPart(externaldoc.MainDocumentPart, out xDocExternal);

                if (xDocMain != null && partMain != null && xDocExternal != null && partExternal != null)
                {
                    MyCommon.MergeXmlPartFields(xDocMain, xDocExternal);

                    //Save the updated part
                    using (Stream outputStream = partMain.GetStream())
                    {
                        using (StreamWriter ts = new StreamWriter(outputStream))
                        {
                            ts.Write(xDocMain.ToString());
                        }
                    }
                }
            }
        }
    } 
```

# perl - perl 文件大小计算不起作用

> ID：13601443
> 
> 赞同：2
> 
> 时间：2012-11-28T09:09:14.947
> 
> 标签：perl, permissions, filesize

我正在尝试编写一个简单的 perl 脚本，它将遍历目录中的常规文件并计算所有文件放在一起的总大小。但是，我无法获得文件的实际大小，我不知道为什么。这是代码的相关部分。我输入了打印语句进行调试：

```
$totalsize = 0;
while ($_ = readdir (DH)) {
   print "current file is: $_\t";
   $cursize = -s $_;           
   print "size is: $cursize\n";
   $totalsize += $cursize;
} 
```

这是我得到的输出：

```
current file is: test.pl    size is: 
current file is: prob12.pl  size is: 
current file is: prob13.pl  size is: 
current file is: prob14.pl  size is: 
current file is: prob15.pl  size is: 
```

所以文件大小保持空白。我尝试使用`$cursize = $_`，但唯一的效果是检索当前目录和父目录的文件大小，每个文件大小为 4096 字节；它仍然没有得到任何常规文件的实际文件大小。

我在网上看了几本关于 perl 的书，似乎 perl 无法获取文件大小，因为脚本无法读取文件。我通过放入一个 if 语句来测试这个：

```
print "Cannot read file $_\n" if (! -r _); 
```

果然对于每个文件，我都收到错误消息，指出无法读取该文件。我不明白为什么会这样。包含相关文件的目录是我的主目录的子目录，我正在以我自己的身份从我的主目录中的另一个子目录运行脚本。我已读取所有相关文件的权限。我尝试将文件的模式更改为 755（从之前的 711），但我仍然得到`Cannot read file`每个文件的输出。

我不明白发生了什么事。要么我对运行 perl 脚本时权限的工作方式感到困惑，要么对正确使用`-s _`. 我很感激你的指导。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:20:45.763

如果这不仅仅是你的错字`-s _`而不是正确的，`-s $_`那么请记住，它`readdir`返回的文件名相对于你打开的目录`opendir`。正确的方法是

```
my $base_dir = '/path/to/somewhere';
opendir DH, $base_dir or die;
while ($_ = readdir DH) {
  print "size of $_: " . (-s "$base_dir/$_") . "\n";
}
closedir DH; 
```

您还可以查看核心模块[IO::Dir](http://search.cpan.org/~gbarr/IO-1.25/lib/IO/Dir.pm)，它提供了`tie`一种以更简单的方式访问文件名和属性的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:15:29.160

你有一个错字：

```
$cursize = -s _; 
```

应该：

```
$cursize = -s $_; 
```

# php - php将数据发布到django服务器-以multipl reqs发送largdata或更好的方式来逃避postdata大小限制和更好的方式来接受部分数据

> ID：13601445
> 
> 赞同：0
> 
> 时间：2012-11-28T09:09:15.117
> 
> 标签：php, django

我必须将大型帖子数据从我的 php 服务器发送到我的 django 服务器。由于服务器限制了 postdata 大小（我认为是 2MB），我们只能通过修改一些设置来修改它。但是，我不想那样做。所以，我正在考虑在多个请求中发送数据。比如我要发送 10MB 的数据，那么我会做 10/2 = 5 个请求发送完整的数据。

```
 Sample data : json_data = {'a':'aaa','b':'bbb' .... many like this} 
```

我可以简单地先获取大小，然后获取总请求数（10/2=5），将数据分成 5 部分，然后循环 5 并发送数据。但是，我怎样才能从 django 服务器接收？有什么好办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:23:25.247

你可以尝试在[php服务器](http://www.php.net/manual/en/zlib.examples.php)上压缩数据，然后在[django服务器](http://docs.python.org/2/library/zlib.html)上用python解压。

例如做这样的事情：

```
<?php
$string = 'Some information to compress';
$gz = gzopen('somefile.gz','w9');
gzwrite($gz, $string);
gzclose($gz);
?> 
```

和

```
str_object1 = open('compressed_file', 'rb').read()
str_object2 = zlib.decompress(str_object1)
f.write(str_object2)
f.close() 
```

# php - 检查单选按钮是否被按下

> ID：13601447
> 
> 赞同：2
> 
> 时间：2012-11-28T09:09:19.143
> 
> 标签：php, javascript, checkbox

我有一个表单，它有一个 foreach 循环，在循环内我有一个输入类型单选，所以每次它都有一个新值，如下面的代码：

```
<?php
            $aircrafts = AircraftPermit::getaircraft();
            foreach($aircrafts as $aircraft)
                {
                    $pacas = AircraftPermit::getrouteaircraft($aircraft->name ,$pilotid);
                    if($pacas)
                        {
            ?>
                            <tr>
                                <td>
                                    <input type="radio" id="ac" value="" disabled="disabled"><?php echo $aircraft->name ;?><br />
                                </td>
                                <td align="center">
                                    <input name="submit" title="Give permission to selected aircraft" type="submit" value="Give Permit" disabled="disabled">
                                </td>
                                <td align="center">
                                    <font color="green">Granted</font>
                                </td>
                            </tr>
            <?php
                        }
                    else
                        {
            ?>
                            <tr>
                                <td>
                                    <input type="radio" id="ac" value="<?php echo $aircraft->name ;?>"><?php echo $aircraft->name ;?><br />
                                </td>
                                <td align="center">
                                    <input name="id" type="hidden" value="<?php echo $pilotid ;?>">
                                    <input name="submit" title="Give permission to selected aircraft" type="submit" value="Give Permit">
                                </td>
                                <td align="center">
                                    <font color="red">Restricted</font>
                                </td>
                            </tr>
            <?php
                        }
                }
            ?> 
```

现在最后我有一个脚本来检查单选按钮是否被选中，如下所示：

```
<script type="text/javascript">
function radio_is_on() {
    var elementId = document.getElementById('ac');
    if (elementId.checked==false)
    {
        alert('Please select the aircraft first!');
        return false;
    }
    if (elementId.value)
    {
        return true;
    }
}
</script> 
```

当单选按钮没有被按下时，消息会弹出，但是当它被按下时，它不返回任何值，并且表单发送空值。请告诉我哪里错了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:20:17.800

所有单选按钮都有相同的 id - 这是不正确的。并且始终只考虑一个按钮。你可以给它们编号，例如。ac1、ac2 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:20:54.813

您不能有多个 id 标签，这可能是它不起作用的原因。尝试将其更改为类。参见下面的 jquery 示例。

HTML：

```
<input type="radio" class="ac" value="<?php echo $aircraft->name ;?>"><?php echo $aircraft->name ;?><br /> 
```

JAVASCRIPT：

```
function radio_is_on() {
  if ($('.ac:checked').val()) {
    return true;
  }
  else {
    alert('Please select the aircraft first!');
    return false;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:21:21.660

据我所知，单选按钮在具有选中属性时被“推送”，而在没有它时不会被推送。

```
...
    if (elementId.hasOwnProperty('checked'))
...

```

代替

```
...
    if (elementId.checked==false)
...

```

# php - 在 Javascript 的帮助下使用 PHP 为文本框设置值

> ID：13601453
> 
> 赞同：1
> 
> 时间：2012-11-28T09:09:38.323
> 
> 标签：php, javascript, html

我打算做的是一个对话框会提示，用户将输入他的用户名，当单击确定时，javascript函数mySearch中的php代码将在mysql中获取他的详细信息并将其显示在文本框中。帮助。T_T 不行。

```
 <script>
        function mySearch()
        {    var name = prompt("Search","Enter username");

            if (name!=null && name!="")
            {
                    var sentval = document.getElementById("sentval");
                    sentval.value = name;

                    <?php
                        $myLink = mysql_connect('localhost','root', '1234') or die(mysql_error());
                        $selectDB = mysql_select_db('proj2db', $myLink) or die(mysql_error());
                        $sql = "SELECT * FROM userTBL WHERE uName ='".$_POST['sentval']."'";
                        $exec = mysql_query($sql, $myLink);
                        $row = mysql_fetch_array($exec);

                        $uname = $row['uName'];
                        $pwd = $row['pwd'];
                        $code = $row['sAns'];
                        $link = $row['path'];
                    ?>              
            }
        }
    </script>
</head>
<body>
    <form method="post" action="" name="myform" id="myform">
        <input type="hidden" id="sentval"/>
        <center>
            <table>
                <tr>    
                    <td><font face="Tahoma" size = "2" color="#0B3861">Username:&nbsp&nbsp</font></td>
                    <td>
                        <input type = "text" id = "uname" name = "uname" size="35" value="<?php echo $uname ?>"/>
                        <button type="button" style="height: 25px; width: 60px" onclick="mySearch()">Search</button>
                    </td>
                </tr>
                <tr>    
                    <td><font face="Tahoma" size = "2" color="#0B3861">Password:&nbsp&nbsp</font></td>
                    <td><input type = "password" id = "pwd" name = "pwd" size="35" value="<?php echo $pwd ?>"/></td>
                </tr>
                <tr>
                    <td><font face="Tahoma" size = "2" color="#0B3861">Re-type Password:&nbsp&nbsp</font></td>
                    <td><input type = "password" id = "repwd" name = "repwd" size="35" value="<?php echo $pwd ?>"/></td>
                </tr>
                <tr>
                    <td><font face="Tahoma" size = "2" color="#0B3861">Code:&nbsp&nbsp</font></td>
                    <td><input type = "text" id = "code" name = "code" size="35" value="<?php echo $code ?>"/></td>
                </tr>
                <tr>
                    <td><font face="Tahoma" size = "2" color="#0B3861">Link:&nbsp&nbsp</font></td>
                    <td><input type = "text" id = "link" name = "link" size="35" value="<?php echo $link ?>"/></td>
                </tr>
                <tr>                        
                    <td colspan=2 align="right">
                        <font face="Tahoma" size = "2" color="#0B3861">(e.g. http://www.google.com or index.php)</font>
                    </td>
                </tr>
                <tr>                        
                    <td colspan=2 align="right">
                        <input type="submit" name="submit" value="Save" style="height: 25px; width: 60px"/>
                        <button type="button" style="height: 25px; width: 60px" onclick="location.href='adminMain.php'">Cancel</button>
                    </td>
                </tr>               
            </table>
        </center>
    </form>
</body>
<?php
    if (!empty($_POST['uname']) && !empty($_POST['pwd']) && !empty($_POST['repwd']) && !empty($_POST['code']) && !empty($_POST['link']))
    {
        if ($_POST['pwd'] == $_POST['repwd'])
        {
            $myLink = mysql_connect('localhost','root', '1234') or die(mysql_error());
            $selectDB = mysql_select_db('proj2db', $myLink) or die(mysql_error());

            $sql = "UPDATE `proj2db`.`usertbl` SET pwd='".$_POST['pwd']."', sAns='".$_POST['code']."', path='".$_POST['link']."' WHERE uName='".$_POST['uname']."';";
            $exec = mysql_query($sql, $myLink);
        }
        else
            echo "<font face='Tahoma' size = '2' color='red'><center>Error: Password mismatched <br> Press cancel to return to home page </center></font>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:25:59.840

您似乎对 PHP 和 JavaScript 的存在感到困惑。Javascript 是*严格*的客户端（除了 node.JS），而 PHP 是*严格*的服务器端。你不能以你已经完成的方式内联组合它们 - 或者至少不是你期望它的工作方式。现在，无论用户何时访问该页面，PHP 代码都会运行。

这是适合您的解决方案（它依赖于 jQuery，因此您需要它的副本）。我还将您切换到 PDO 以使您的生活更轻松一些，并向您展示如何从`mysql_query`.

保持您的`<body>`代码几乎相同。唯一的区别是`mySearch()`功能，如下：

```
<script type='text/javascript'>
function mySearch() {
   var uname = prompt("Search","Enter username");
   if (uname !== undefined && uname.length > 0) {
       $.ajax({
         url: "ajax.form.php",
         type: "POST",
         dataType: "json",
         data: { sentval: uname },
         success: function(d) {
            if (d.length > 0) {
               $("#uname").val(d[0].uName);
               $("#pwd").val(d[0].pwd);
               $("#code").val(d[0].sAns);
               $("#link").val(d[0].path);
            }
            else {
               alert("Not found");
            }
         }
       });
   }
}
</script> 
```

为此，您还需要另一个 PHP 脚本。我命名它`ajax.form.php`。内容：

```
<?php
try {
   $DB = new PDO("mysql:host=localhost;dbname=proj2db","root","1234");
} catch (Exception $e) {
   die("Could not connect: ".$e->getMessage());
}
$DB->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

if (!empty($_POST['sentval'])) {
   $q = $DB->prepare("SELECT * FROM userTBL WHERE uName = :username");
   $q->bindValue(":username",$_POST['sentval']);
   $q->execute();
   if (($r = $q->fetch()) !== false) {
      echo json_encode(array($r));
   }
   else {
      echo "[]";
   }
} ?> 
```

就是这样！它应该可以工作，尽管我是即时编写的并且尚未对其进行测试。其背后的想法：

1.  JavaScript 通过 sentval 调用其他 PHP 脚本`$.ajax()`
2.  PHP 运行
3.  PHP 将一组行（在这种情况下，只有一个，但脚本通过更改`fetch()`和`fetch_all()`删除`Array()`in json_encode）到 JavaScript也能正常工作
4.  JavaScript 解析和更新客户端的表单。

# graphics - AVL 树 - 手动绘图和打印

> ID：13601458
> 
> 赞同：0
> 
> 时间：2012-11-28T09:09:54.440
> 
> 标签：graphics, binary-tree, avl-tree

是否有任何程序/应用程序可以绘制和保存 avl 树形图？最好是pdf格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:25:55.970

你看到 [AVL树小程序了吗](http://www.site.uottawa.ca/~stan/csi2514/applets/avl/BT.html)

这是一棵准备好的树。您可以根据需要插入任意数量，然后打印页面或另存为 PDF。

最良好的问候。

# c++ - PCL 库和并发

> ID：13601461
> 
> 赞同：0
> 
> 时间：2012-11-28T09:10:00.850
> 
> 标签：c++, windows-7, point-cloud-library

我已经开始使用 Windows 7 下的 PCL 库在一个项目中工作。我的问题是 PCL 是否为并发工作提供了任何结构或算法。例如，同时从数据集中创建一个新的点云；类似*pcl::io::loadPCDFileKCores*的东西。我在 API 文档和 Google 中搜索过，但一无所获。

非常感谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:37:41.770

PCL 1.7 确实提供了一些工具，用于在使用 GPU 或 CPU 的系统上开发多个处理内核。

[PCL 通过OpenMP](http://openmp.org/) API在系统上使用多个 CPU 内核。[您可以通过在 PCL 文档中搜索](http://docs.pointclouds.org/trunk/search.php?query=openMP)“OpenMP”关键字来检查多个启用核心的类（天真，但有效的方法！）。在撰写本文时，报告的启用 OpenMP 的类是：

*   pcl::RangeImage
*   pcl::tracking::ParticleFilterOMPTracker
*   pcl::FPFHEstimationOMP
*   pcl::NormalEstimationOMP
*   pcl::纳尔夫
*   pcl::tracking::KLDAdaptiveParticleFilterOMPTracker
*   pcl::SHOTColorEstimationOMP
*   pcl::SHOTEstimationOMP
*   pcl::NormalEstimationOMP< PointInT, Eigen::MatrixXf >

如果您在 PCL 文档中搜索[GPU](http://docs.pointclouds.org/trunk/search.php?query=gpu)或 CUDA 关键字，则会报告类似但更长的支持 GPU 的类列表。

# coldfusion - 在 ColdFusion 模板中捕获 requesttimeout

> ID：13601465
> 
> 赞同：2
> 
> 时间：2012-11-28T09:10:08.057
> 
> 标签：coldfusion

我有一个 ColdFusion 模板，它将通过 ajax 调用。该模板的超时时间为几秒，例如：

```
<cfsetting showdebugoutput="true" requesttimeout="2" /> 
```

但是如果发生超时，我不会收到任何错误消息。有没有办法通过 Ajax 捕捉超时并正确响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:08:03.673

> 我没有收到任何错误消息

你有什么要回来的吗？您的响应仍应包含 ColdFusion 生成的文本。您是否使用过 Chrome、fire bug 或任何带有网络工具的浏览器，这些工具可以让您查看响应以查看您是否只是找回了您无法使用的东西？您是否使用了任何可能抑制客户端失败的成功/失败回调函数？如果以下建议没有帮助，我会发布您的 JS 并重新标记您的问题。

话虽这么说：在请求超时到期后，任何时候你做任何事情，你都会想要延长你的超时时间。onError 和 try/catch 在超时后只有几个 MS 对错误做出反应，因此发送消息或记录错误也会失败。如果您尝试发送电子邮件或写入文件，那么您的 CF 错误消息会说您的 cfmail 或 cffile 操作已超时（技术上），但这不是导致初始错误的原因。

如果您知道超时时间，您可以简单地将 requestTimeout 重置为更大的值。

```
<cfsetting requesttimeout="2">
<cftry>
    <!--- some stuff that takes more than 2 seconds --->
    <cfcatch type = "any">
        <cfsetting requesttimeout="5">
        <!--- logging / error handling for timeout --->
        <!--- NOTE!! This does not add 5 seconds, it adds 3\.  --->
        <!--- The value of requestTimeout is the total time of the timeout. --->
    </cfcatch>
</cftry> 
```

或者，如果您不知道当前的超时值，您可以添加时间。

```
<cftry>
    <!--- some stuff that takes more than your timeout --->
    <cfcatch type = "any">
        <!--- You must first create your object to hold the requestMonitor. --->
        <cfset monitor = createObject("java", "coldfusion.runtime.RequestMonitor") />
        <!--- Then you need to reset your request timeout --->
        <!--- add 5 seconds to the timeout --->
        <cfsetting requesttimeout=monitor.getRequestTimeout()+5>
        <!--- logging / error handling for timeout --->
    </cfcatch>
</cftry> 
```

您也不必在 try/catch 块中执行此操作，如果您在 application.cfc 中定义了一个，则可以将其包含在 onError 事件处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:42:35.783

如果 ColdFusion 模板位于具有 Application.cfc 文件的文件夹中，则您可以使用 onError 函数执行某些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:43:14.350

您应该将由 AJAX 调用的整个 ColdFusion 模板包装在一个`cftry`块中。这样，如果发生任何 ColdFusion 异常，您可以处理它并将您想要的任何消息返回给客户端。

```
<cftry>
    <!--- all of your ColdFusion template code here --->
    <cfcatch type="Any">
    <!--- return whatever you want here --->
        <div>An error has occurred.</div>
        <!--- remember that you have the cfcatch structure available to you --->
        <!--- which contains the specifics of the error that was thrown     --->
    </cfcatch>
</cftry> 
```

在进行 AJAX 调用的客户端，您可以处理任何可能发生的与 http 连接相关的错误（连接失败、超时等）。您的 AJAX 调用将有一个错误方法或类似的方法。我强烈建议为此使用 jQuery。 [jQuery AJAX API](http://api.jquery.com/jQuery.ajax/)

您没有在帖子中提供任何具体信息。如果您遇到问题，实际分享您遇到问题的代码总是有帮助的。然后 StackOverflow 上的人可以提供更多帮助。

# php - 将多维数组键排序为数字

> ID：13601469
> 
> 赞同：1
> 
> 时间：2012-11-28T09:10:26.450
> 
> 标签：php, codeigniter, multidimensional-array, sorting

我在对多维数组进行排序时遇到问题。

`print_r($myarray);`给出以下输出：

```
Array
(
    [0] => Array
        (
            [ID] => 10
            [Code] => 12-111
            [Name] => putup1
        )

    [1] => Array
        (
            [ID] => 11
            [Code] => 12-21
            [Name] => putup2
        )
    [2] => Array
        (
            [ID] => 12
            [Code] => 12-1
            [Name] => putup2
        ) 
  ) 
```

我从这个链接中获取了一个参考：[Sort MultiDimensional Array](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2) and sorted using column `Code`。它给了我这样的输出：

```
Array
    (
      [0] => Array
                 (
                  [ID] => 10
                  [Code] => 12-1
                  [Name] => putup1
                 )
      [1] => Array
                 (
                   [ID] => 12
                   [Code] => 12-111
                   [Name] => putup2
                 ) 
      [2] => Array
                 (
                   [ID] => 11
                   [Code] => 12-21
                   [Name] => putup2
                 )
     ) 
```

我期待像这样的输出：

```
Array
        (
          [0] => Array
                     (
                      [ID] => 10
                      [Code] => 12-1
                      [Name] => putup1
                     )

          [2] => Array
                     (
                       [ID] => 11
                       [Code] => 12-21
                       [Name] => putup2
                     )
         [1] => Array
                     (
                       [ID] => 12
                       [Code] => 12-111
                       [Name] => putup2
                     ) 
         ) 
```

是否可以？请建议我...谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:17:10.800

您目前正在对代码进行排序，但作为文本而不是数字进行排序。要根据需要对其进行排序，您必须编写一个比较函数来指示一个代码是否大于另一个代码：

```
function sortByCode($a, $b) {
    $aParts = explode('-', $a['Code']);
    $bParts = explode('-', $b['Code']);
    for ($i = 0; $i < count($aParts); $i++) {
        if ($aParts[$i] < $bParts[$i]) {
            return -1;
        } else if ($aParts[$i] > $bParts[$i]) {
            return 1;
        }
    }
    return 0;
}

usort($myArray, 'sortByCode'); 
```

# php - URL / 路由器中的 ZF2 UTF8 字符

> ID：13601477
> 
> 赞同：1
> 
> 时间：2012-11-28T09:10:56.723
> 
> 标签：php, zend-framework2

在 Zend Framework 2 中，我尝试使用其中包含 UTF8 字符的路由，但没有任何运气。使用 UTF8 字符时，我总是收到错误“请求的 URL 无法通过路由匹配。”

我的路线如下所示：

```
'contact-us' => array(
    'type' => 'literal',
    'options' => array(
        'route' => '/kundtjänst/',
        'defaults' => array(
            'controller' => 'contact-us',
            'action' => 'index',
        ),
    ),
), 
```

而且我确信这是给我带来问题的“ä”字符，因为当我将其取出（并更改 URL）时，它可以工作。如何在 ZF2 的路线中使用这些字符（瑞典语、挪威语和爱沙尼亚语）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:00:26.950

您应该使用 urlencoded 字符：

```
'route' => '/kundtj%C3%A4nst/', 
```

# eclipse - 我是否需要 JDK 才能与 Eclipse Helios 和 Tomcat 7.0.33 一起使用？

> ID：13601478
> 
> 赞同：0
> 
> 时间：2012-11-28T09:11:04.950
> 
> 标签：eclipse, tomcat, web-applications, java

我想开发动态网络应用程序。

为此，我使用 Eclipse Helios 和 Tomcat 7.0.33。我在我的机器上安装了 JRE，并且在 JAVA_HOME 路径中提供了 JRE 的位置。

但是当我运行任何 servlet 时，我得到了错误：

> “HTTP 状态 404”——“请求的资源不可用”

我是否需要 JDK 来代替 JRE（这意味着我必须设置 JDK 的路径来代替 JRE）？或者是否还有其他原因导致此错误发生？

寻求帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:15:33.733

如果您的 servlet 已经编译，那么 JRE 将达到目的，

但是它们被编译然后你将使用 JDK 和其他库（如 servlet-api.jar 等）来编译你的 servlet。

简而言之，JDK 用于您想要使用 Java 开发某些东西的开发。

当您已经编译了类并且只想运行它时，将使用 JRE。

你可能想参考这个：

[JDK和JRE有什么区别？](https://stackoverflow.com/questions/1906445/what-is-the-difference-between-jdk-and-jre)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:15:46.697

理论上，用 Eclipse 的增量编译器编译就足够了。使用 JRE 运行应用程序服务器也应该没问题。我想你的错误在其他地方。无论如何，我强烈建议安装 JDK 来开发 Java 应用程序。它带有一些方便的工具，并且许多 3rd 方工具（例如 Maven）也需要真正的 JDK 编译器，并且不能与 Eclipse 的内置编译器一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T20:48:53.370

我有同样的问题。JDK 不是问题。在你编译你的 servlet 之后，你必须重新启动你的 tomcat 服务器，这样它才能在你尝试通过 web 浏览器访问它之前加载你的类文件。之后不再出现 404 错误，servlet 运行良好。

# jquery - 自动完成后触发 Onchange 事件

> ID：13601483
> 
> 赞同：13
> 
> 时间：2012-11-28T09:11:09.143
> 
> 标签：jquery, html, autocomplete, onchange

我正在尝试一次执行 Autocomplete 和 onchange 事件。

意思是：我想在自动完成文本框中触发 onchange 事件。当我从键盘在文本框中写入内容并在文本框外部单击时，onchange 事件会触发，但是当我从自动建议名称中选择某些内容时，onchange 事件不会触发。

**我的 HTML 代码**

```
<div style="width: 34%">
   Person Name:<input id="txt0" type="text" onchange="SaveData('txt0')" class="userSearch" placeholder="Helped Person" />
</div> 
```

**JavaScript 代码**

```
function AutoComplete() {
//Autocomplete added to the textbox.
$('.userSearch').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "CTC.aspx/GetMemberName",
            data: "{ 'prefixText': '" + request.term + "' }",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                response(data.d)
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Error occured while autocomplete');
            }
        });
    },
    minLength: 1
});
}

function SaveData(textBoxId) {
     alert(textBoxId);
} 
```

我想在从自动完成中选择后触发 onchange 事件。

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:17:21.230

您可以使用自动完成小部件上的更改事件来实现此目的。 [http://api.jqueryui.com/autocomplete/#event-change](http://api.jqueryui.com/autocomplete/#event-change)

例如：

```
function AutoComplete() {
  //Autocomplete added to the textbox.
  $('.userSearch').autocomplete({
      source: function (request, response) {
         // your ajax code
      },
      minLength: 1,
      change: function (event, ui) { SaveData(); }
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-06T07:23:27.783

```
$('#1').autocomplete({
    select: function(event, ui) {
        "use strict";
        alert('select event called');
       },
    source: ["ActionScript", "AppleScript", "Asp", "BASIC", "C", "C++", "Clojure", "COBOL", "ColdFusion", "Erlang", "Fortran", "Groovy", "Haskell", "Java", "JavaScript", "Lisp", "Perl", "PHP", "Python", "Ruby", "Scala", "Scheme"],

    minLength: 1,
    change: function(event, ui) {
        if (ui.item) {
            alert("ui.item.value: " + ui.item.value);
        } else {
            alert("ui.item.value is null");
        }
        console.log("this.value: " + this.value);
    }
}); 
```

这将可以执行自动完成的选择和更改事件。

你也可以检查小提琴[http://jsfiddle.net/74wLyd8v/](http://jsfiddle.net/74wLyd8v/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:15:56.423

```
$('.userSearch').trigger('change'); 
```

这将触发“更改”事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T21:21:02.910

KDRVN 是正确的。

```
$( ".selector" ).autocomplete({
  select: function( event, ui ) {}
}); 
```

如在

```
$( "#models" ).autocomplete({source: models,  select: function( event, ui ) {alert('flippy');} }); 
```

这些都不是：

```
 $('#models').on('select', function() { alert('waawoo'); });
    $('#models').on('change', function() { alert('feefaa'); });
 onchange="updateModels(this)" 
```

# php - 您无权执行此脚本

> ID：13601487
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:11:24.227
> 
> 标签：php, ubuntu, command-line-interface, crontab

我需要通过 CLI 执行 php 脚本的帮助。不确定这是 Linux 还是 PHP 问题。

当我在 Ubuntu 中执行 /usr/bin/php /var/www/backup.php 时，我得到：

> 您无权执行此脚本

backup.php 中的代码是：

```
<?php

// Set default paths
define ("DOCUMENT_ROOT","/var/www");
define ("DATABASE_PATH","/var/lib/mysql/livedb");
define ("BACKUP_PATH","/var/sitebackups");

$filename_suffix = "_" . date("Ymd_his") .".tar.gz";

if ($_GET['key']!="xxx") {
        die ("You are not permitted to execute this script");
}

//change working directory to backup directory
if (!chdir(BACKUP_PATH)) {
        die ("Failed to change to working directory.");
}

// Tar the web files
$cmd = "tar -cvzf " . BACKUP_PATH. "/webfiles" . $filename_suffix . " " .DOCUMENT_ROOT ;
echo $cmd . "<br/>";
//echo shell_exec($cmd);

// Create link to web files backup

// Tar the mysql DB
$cmd = "tar -cvzf " . BACKUP_PATH. "/dbfiles" . $filename_suffix . " " .DATABASE_PATH ;
echo $cmd . "<br/>";
//echo shell_exec($cmd);

// Move to backup folder

// Create link to DB backups

// Email backup confirmation

?> 
```

我什至尝试通过 crontab 添加这是一个计划任务，但我仍然在日志中收到相同的错误。

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:31:47.213

我根本看不出有什么问题。代码工作正常。

该变量`$_GET['key']`未在 CLI 中设置，并且始终与“xxx”不同，因此代码通过打印出您的字符串来停止。

如果文件和文件夹的权限设置正确，则删除 if 子句，代码将完成其余工作。

# symfony - Symfony 自定义数据库身份验证

> ID：13601488
> 
> 赞同：0
> 
> 时间：2012-11-28T09:11:25.023
> 
> 标签：symfony

我正在尝试从我自己的自定义数据库中对用户进行身份验证，我一直按照说明书中的说明进行操作，但我有点[卡住](http://symfony.com/doc/2.0/cookbook/security/entity_provider.html)了，因为我似乎无法弄清楚如何更改它以跟随我自己的表自己的领域。

我当前的数据库结构如下：

```
Table User:
   first_name (string)
   last_name (string)
   id (int) Key
   user_type (int)
   username  (string)
   password (md5(string))
   email (string) 
```

我真的不明白我将如何实现它，以便它可以使用用户名或电子邮件进行身份验证。

# http - 如何使用 Apache Tomcat Valve 组件创建健壮的访问日志？

> ID：13601489
> 
> 赞同：4
> 
> 时间：2012-11-28T09:11:33.453
> 
> 标签：http, tomcat, http-headers

我们正在使用 Apache Tomcat 7 并尝试设置 Valve 组件来存储我们的访问日志，以便在[SnowPlow](https://github.com/snowplow/snowplow)中进行处理。

我们遇到的问题是如何使这些日志变得健壮。举个例子 - 我们可以用标签分隔字段并提取用户代理字符串，如下所示：

```
pattern="%{yyyy-MM-dd}t&#9;%{hh:mm:ss}t&#9;%{User-Agent}i&#9;" 
```

问题是 Valve 组件没有（据我所知） escape `%{User-Agent}i`，所以用户代理中的杂散选项卡会破坏数据（行看起来包含四个字段，而不是三个）。

至于解决方案，除非有办法逃避我错过的用户代理，否则我可以看到几个解决方案：

1.  使用不太可能出现在用户代理字符串中的非常模糊的字段分隔符（或字段分隔符的组合）。我们尝试了 Ctrl-A (HTML `&#1;`?) 但这似乎不起作用
2.  编写一个`AccessLogValve`支持转义或清理选项卡的自定义 - 可能类似于这篇文章[Sanitizing Tomcat access log entries](https://stackoverflow.com/questions/5812238/sanitizing-tomcat-access-log-entries)

有点困惑，我在网上找不到关于这个的任何其他信息 - 没有人解析他们的 Tomcat 访问日志吗？

你有什么建议吗？我们有点卡住了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:56:16.837

[RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-14.43)将用户代理字符串定义为

```
User-Agent     = "User-Agent" ":" 1*( product | comment ) 
```

那么产品定义为

```
product         = token ["/" product-version]
product-version = token 
```

在此之后，令牌被定义为

```
token          = 1*<any CHAR except CTLs or separators> 
```

和分隔符/ CTLs

```
separators     = "(" | ")" | "<" | ">" | "@"
                      | "," | ";" | ":" | "\" | <">
                      | "/" | "[" | "]" | "?" | "="
                      | "{" | "}" | SP | HT
CTL            = <any US-ASCII control character
                    (octets 0 - 31) and DEL (127)> 
```

我们不需要忘记`comment`，它被定义为

```
comment    = "(" *( ctext | quoted-pair | comment ) ")" 
ctext      = <any TEXT excluding "(" and ")">
quoted-pair    = "\" CHAR
CHAR           = <any US-ASCII character (octets 0 - 127)> 
```

所以如果我理解正确的话，你应该可以使用 any `separator`or`CTL`只要你能区分`comment`，它被包裹在`(`and中`)`。如果`(`出现在评论中，它应该用`\`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T21:09:05.350

最后，我编写了一个[自定义的 Tomcat AccessLogValve](https://github.com/snowplow/tomcat-cf-access-log-valve)，它：

*   引入了一种新模式“I”来转义传入的标头
*   引入了一种新模式“C”来获取存储在响应中的 cookie
*   重新实现模式'i'以确保将“”（空字符串）替换为“-”
*   重新实现模式“q”以删除“？” 并确保将“”（空字符串）替换为“-”
*   覆盖了 'v' 模式，以写入此 AccessLogValve 的版本，而不是本地服务器名称

它似乎非常强大 - 我没有任何未转义值的进一步问题。

# c - C 指针、结构和 fwrite

> ID：13601491
> 
> 赞同：2
> 
> 时间：2012-11-28T09:11:36.903
> 
> 标签：c, pointers, struct, fwrite, fread

我目前正在尝试将一个简单的链表写入和读取到文件中，但它似乎并没有真正起作用，我不确定它是否可能。

```
typedef struct flug
{
    int            flugnummer;
    char            flugziel[50];
    enum TAG        flugtag;
    int            flugzeit_stunde;
    int            flugzeit_minute;
    int            gateway;
    char            status[10];
    struct flug    *next;
}FLUG;

typedef FLUG *ELEM_ZGR; 
```

我担心问题可能是我不仅在写字符，而且在写 int .. 尤其是枚举。

```
int fluege_sichern() {
ELEM_ZGR curr;

FILE *fp;
char* tag;

curr = first;

if (fopen_s(&fp, datei,"a+b") != 0) {
    printf("\nDatei %s nicht zum Anhaengen zu oeffnen",datei);
    PAUSE;
    exit(1);
}

for(curr = first; curr != NULL; curr = curr->next) {
    fwrite(curr, sizeof(FLUG), 1, fp);
}

    fclose(fp);
    return 1;
} 
```

这应该是将元素作为二进制文件写入文件的功能。我在这个函数中没有得到任何错误。

```
void fluege_laden() {
ELEM_ZGR curr;
FILE *fp;
int i = 0;

if (fopen_s(&fp, datei,"rb") != 0) {
    printf("\nDatei %s nicht zum Lesen zu oeffnen",datei);
    PAUSE;
    exit(1);
}

while(1) {
     fread(&curr, sizeof(FLUG), 1, fp);
     printf("\n%d", curr->flugnummer);
     //fluege_sortieren(curr);
}
} 
```

当我尝试打印 curr->flugnummer 时出现错误。

好的，所以我稍微改变了这两个功能，但它似乎仍然不起作用。对不起，我好像没听懂……

[EDIT2] 另一个不起作用的版本：

```
void fluege_laden() {
    ELEM_ZGR curr;  // <<<- allocate an actual struct here rather than just a pointer
    FILE *fp;

    int i = 0;
    curr = first;

    if (fopen_s(&fp, datei,"rb") != 0) {
        printf("\nDatei %s nicht zum Lesen zu oeffnen",datei);
        PAUSE;
        exit(1);
    }

    while(1) {
        fread(curr, sizeof(FLUG), 1, fp);
        printf("\n%d", curr->flugnummer);   // <<<
        printf("\n%s", curr->flugziel);
        //fluege_sortieren(curr);
        PAUSE;
    }

}

int fluege_sichern() {
ELEM_ZGR curr;
FILE *fp;

curr = first;

if (fopen_s(&fp, datei,"a+b") != 0) {
    printf("\nDatei %s nicht zum Anhaengen zu oeffnen",datei);
    PAUSE;
    exit(1);
}

for(curr = first; curr != NULL; curr = curr->next) {
    fwrite(curr, sizeof(FLUG), 1, fp);
}

    fclose(fp);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:16:58.710

`curr`是一个未初始化的指针 (a )，因此在被调用`FLUG*`时不指向有效内存。`fread()`写入无效内存是未定义的行为（程序可能出现段错误或执行不正确，或者在最坏的情况下正确执行）。创建堆栈分配对象（类型`FLUG`）或动态分配内存`curr`。

就个人而言，当指针为`typedef`d 时，我发现它非常令人困惑，因为在使用时变量是指针并不明显：

```
ELEM_ZGR curr; 
```

以下是明确的：

```
FLUG* curr; /* Or just 'FLUG curr;' for this case. */ 
```

检查结果[`fread()`](http://en.cppreference.com/w/c/io/fread)以确保程序未在过时数据上运行：

```
FLUG curr;
while (1 == fread((&curr, sizeof(FLUG), 1, fp))
{
    printf("\n%d", curr.flugnummer);
} 
```

* * *

*（针对问题编辑）*

简而言之，改变：

```
fwrite(curr, sizeof(FLUG*), 1, fp);
fread(&curr, sizeof(FLUG*), 1, fp); 
```

至：

```
fwrite(curr, sizeof(FLUG), 1, fp);
fread(curr, sizeof(FLUG), 1, fp); 
```

在这两种情况下，`curr`is a`FLUG*`并且指向用于存储 a 的有效内存，`FLUG`因此您需要读取`sizeof(FLUG)`，而不是`sizeof(FLUG*)`. 任何类型的指针的典型大小是 4 或 8 个字节。在我的 x86 机器上，它是 4 个字节，a 的大小`FLUG`是 88 个字节。两者的`size`参数`fwrite()`并`fread()`指示要读取和写入的字节数：

```
fwrite(curr, sizeof(FLUG), 1, fp); /* write 88 bytes to fp from address curr. */
fread(curr, sizeof(FLUG), 1, fp); /* read 88 bytes from fp and write to the
                                     address beginning at curr. */ 
```

`&curr`传递to的地址`fread()`意味着`FLUG**`正在传递的 a`fread()`是不正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:16:35.917

在读取例程`ELEM_ZGR curr;`中只是一个未初始化的指针。你需要做这样的事情：

```
void fluege_laden() {
    FLUG curr;  // <<<- allocate an actual struct here rather than just a pointer
    FILE *fp;
    int i = 0;

    if (fopen_s(&fp, datei,"rb") != 0) {
        printf("\nDatei %s nicht zum Lesen zu oeffnen",datei);
        PAUSE;
        exit(1);
    }

    while(1) {
        fread(&curr, sizeof(FLUG), 1, fp); // <<<
        printf("\n%d", curr.flugnummer);   // <<<
        //fluege_sortieren(curr);
    }
} 
```

此外，在写入例程中，您需要编写整个结构，例如

```
int fluege_sichern() {
    ELEM_ZGR curr;
    FILE *fp;
    char* tag;

    curr = first;

    if (fopen_s(&fp, datei,"a+b") != 0) {
        printf("\nDatei %s nicht zum Anhaengen zu oeffnen",datei);
        PAUSE;
        exit(1);
    }

    for(curr = first; curr != NULL; curr = curr->next) {
        fwrite(curr, sizeof(FLUG), 1, fp); // <<<- curr is already a pointer - do not dereference here !
    }

    fclose(fp);
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:17:42.970

哇！想想你在读什么记忆。您`fread`要求将数据转储到某个随机位置（因为 curr 未初始化，因此指向您的进程中可能不存在的内存）。您需要分配一些 FLUG 并读入它们。

另一个问题是你不应该写指向文件的指针。数据仅在您的流程中有意义。当你读回 FLUG 时，至少，你应该将 cur->next 设置为一些有意义的东西（比如下一个 FLUG！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:18:07.740

您正在编写指向文件的指针，称为*浅拷贝*。指针不可转移，需要编写代码进行*深拷贝*。要么，要么使用 JSON 或 YAML 之类的东西。

# symfony - 在symfony2.0中创建一个textarea字段

> ID：13601493
> 
> 赞同：-4
> 
> 时间：2012-11-28T09:11:38.273
> 
> 标签：symfony

如何在 symfony2.0 中创建 textarea 字段？请提供一个示例。我是 symfony 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:34:18.580

```
$builder->add('lyrics','textarea') 
```

只需添加一个新参数'textarea'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T08:45:47.457

@DonCallisto

你必须在哪里制作表单构建器类，

```
 class ArtistType extends AbstractType {
 /**
 * builds the form for a category
 * @param FormBuilder $builder
 * @param array $options 
 */
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('artistname')
        ->add('email')
        ->add('paypalemail')
        ->add('lyrics','textarea')
}
/**
 * returns a unique name of the form
 * @return string 
 */
public function getName()
{        return 'artist_';    } 
```

}

# vba - 向图表添加垂直和/或水平线的编程方式？

> ID：13601494
> 
> 赞同：0
> 
> 时间：2012-11-28T09:11:38.600
> 
> 标签：vba, excel, charts, line

我写这篇文章是为了展示如何以编程方式在同一个工作表上创建 2 个图表。

[http://blog.oppoin.com/cookbooks/buttons-forms-and-charts/lesson-25a-2-datasets-of-10-data-points-each-draw-2-graphs-in-2-charts/](http://blog.oppoin.com/cookbooks/buttons-forms-and-charts/lesson-25a-2-datasets-of-10-data-points-each-draw-2-graphs-in-2-charts/)

我收到一个学生的请求，要求我展示如何以编程方式在图表中添加垂直线或水平线。

我四处搜索，但只能找到 John Peltier 描述的手动方式。

想知道是否有一种编程方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:28:50.200

您可以操作单个`Series`对象及其属性，因此您可以给它一个特定的图表类型，从而使您能够垂直添加一条线（柱形图）或水平（所有 X 值相同的值，粗线图类型。或 2 个堆叠列系列，底部隐藏）。

因此，您所做的就是`Series`向您的对象添加一个对象，`Chart`并为其赋予值和图表类型，使其显示为一条线（水平或垂直）。

它可能非常复杂，但也非常简单，这取决于您手头的当前图表以及您希望它有多花哨。

PS：我在您的博客中看到您没有声明您的 Subs 为 Public 或 Private，这可能是一件好事……

# regex - 使用python打印特定单词之后的所有单词

> ID：13601496
> 
> 赞同：0
> 
> 时间：2012-11-28T09:11:38.867
> 
> 标签：regex, python-2.7, python-2.6

假设我有一个包含以下数据的文件：

```
<td class="w"><a href="show.cgi?id=120012" title="[Title] &#64;Blue: Session_TIMEOUT after 60033 ms">[Title] &#64;Blue: Session_TIMEOUT after 60033 ms</a></td>'
<td class="w"><a href="show.cgi?id=120012" title="[Title] &#64;Blue: Session_TIMEOUT after 60500 ms">[Title] &#64;Blue: Session_TIMEOUT after 60033 ms</a></td>' 
```

在上面的字符串中，我如何在 HTML 标记下的两行中检索 title="[Title] @Blue: Session_TIMEOUT after 60033 ms" 之后的字符串，并在下一行写入检索的字符串。

我想要这样的输出：

```
<td class="w"><a href="show.cgi?id=120012" title="[Title] &#64;Blue: Session_TIMEOUT after 60033 ms">[Title] &#64;Blue: Session_TIMEOUT after 60033 ms</a></td>'
&#64;Blue: Session_TIMEOUT after 60033 ms
<td class="w"><a href="show.cgi?id=120012" title="[Title] &#64;Blue: Session_TIMEOUT after 60500 ms">[Title] &#64;Blue: Session_TIMEOUT after 60033 ms</a></td>'
&#64;Blue: Session_TIMEOUT after 60500 ms 
```

请帮我做同样的事情....在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:28:02.883

使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)库，您可以很容易地做到这一点：

```
from BeautifulSoup import BeautifulSoup
myHTML = '<td class="w"><a href="show.cgi?id=120012" title="[Title] &#64;Blue: Session_TIMEOUT after 60033 ms">[Title] &#64;BlueScreen: RCU_PCPU_TIMEOUT after 60033 ms</a></td>'
html_doc = BeautifulSoup( myHTML )
print html_doc.td.a.string 
```

*Beautiful Soup*可以使用`pip`or安装`easy_install`，或者`apt-get`如果您使用的是基于 debian 的操作系统，则可以根据需要安装：

```
pip install BeautifulSoup
easy_install BeautifulSoup
apt-get install python-beautifulsoup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:38:39.467

一个简单的方法：

```
line = line[(line.index('[Title]')+len('[Title]')):]
line = line[(line.index('[Title]')+len('[Title]')):]
text = line[:line.index('</a></td>')]
print line + '\n' + text 
```

虽然，解决此问题的更好方法是使用 CodeChordsman 提到的正则表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:20:10.300

您可以使用正则表达式。如果你能看出你的兴趣串总是锚定在比如说`title="`和结尾之间，`ms`那么你可以这样做：

import re # 正则表达式模块 g = re.compile('title="(.*?ms)').search(line) # 搜索你的字符串

然后您的字符串将通过`g.group(1)`. 您可能会发现阅读 python 文档中的正则表达式很有用，它是每种语言的非常重要的编程工具，尤其是在脚本中。

您可能还想`regex`为您的问题添加标签。

# php - 将 PHP 数组清理为一个

> ID：13601498
> 
> 赞同：6
> 
> 时间：2012-11-28T09:11:44.607
> 
> 标签：php, arrays

```
array(1) {
  [0] => string(18) "AnotherTestSnippet"
}
array(1) {
  [0] => string(17) "Test Code Snippet"
}
array(1) {
  [0] => string(18) "AnotherTestSnippet"
}
array(1) {
  [0] => string(17) "Test Code Snippet"
} 
```

如何使用 PHP 将上述数组转换成这种格式？

```
array("AnotherTestSnippet","Test Code Snippet") 
```

那就是清理和删除重复项。我试过 array_unique 和 in_array 但它不起作用。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:18:06.743

让我们将您的数组称为 $array1 到 $array4。这是解决方案：

```
$cleanArray = array_unique(array_merge($array1, $array2, $array3, $array4)); 
```

编辑：

现在我知道您是从一个单一的多维数组开始的，这不是正确的答案。正确答案是 Dainis Abols 给出的 for 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:14:36.243

只需执行一个循环并仅保存您唯一的 enries：

```
<?php
$array = array (
    array( "AnotherTestSnippet" ),
    array( "Test Code Snippet" ),
    array( "AnotherTestSnippet" ),
    array( "Test Code Snippet" )
);

$new_array = array();

foreach ( $array as $value )
{
    if( !in_array( $value[0], $new_array) ) $new_array[] = $value[0];
} 
```

输出：

```
Array
(
    [0] => AnotherTestSnippet
    [1] => Test Code Snippet
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:20:15.280

阅读您的评论 var_dump 输出是错误的。您没有四个单独的数组，而是一个包含这些数组的多维数组。

您可以使用这样的闭包使用[array_walk_recursive](http://www.php.net/array_walk_recursive)遍历数组：

```
$input = array(
    array('AnotherTestSnippet'),
    array('Test Code Snippet'),
    array('AnotherTestSnippet'),
    array('Test Code Snippet')
);

$result = array();
array_walk_recursive($input, function($a) use (&$result) {
    $result[] = $a;
});

$result = array_unique($result);
var_dump($result); 
```

这呼应：

```
array (size=2)
  0 => string 'AnotherTestSnippet' (length=18)
  1 => string 'Test Code Snippet' (length=17) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:20:59.973

```
<?php
$a = array("AnotherTestSnippet"); 
$b = array("Test Code Snippet"); 
$c = array("AnotherTestSnippet"); 
$d = array("Test Code Snippet");

$e = array_unique( array_merge( $a, $b, $c, $d ) ); 
var_dump( $e ); 
```

给出：

```
array(2) {
  [0]=>
  string(18) "AnotherTestSnippet"
  [1]=>
  string(17) "Test Code Snippet"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T09:21:29.053

### 使用[`array_unique`](http://php.net/manual/en/function.array-unique.php)with的组合[`array_merge`](http://php.net/manual/en/function.array-merge.php)。

```
$cleanArray = array_merge($array1, $array2, ... )
$cleanArray = array_unique($cleanArray); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T09:24:20.080

使用以下命令在值和键中获取已清理的数组：

```
$cleanedarray = array_values(array_unique(array_merge($array1, $array2, $array3, $array4))); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T10:47:01.937

请试试这个

```
<?php
 $a[]=array ( 0 => 'AnotherTestSnippet', );
 $a[]=array ( 0 => 'Test Code Snippet', );
 $a[]=array ( 0 => 'AnotherTestSnippet', );
 $a[]=array ( 0 => 'Test Code Snippet', );

foreach($a as $key=>$value)
{
    foreach($value as $key1=>$value1)
    {
        $new_array[]=$value1 ;

    }

}
echo "<pre>";
print_r($new_array);
echo "</pre>"; 
```

# javascript - 如何创建将运行我的脚本的扩展

> ID：13601501
> 
> 赞同：0
> 
> 时间：2012-11-28T09:11:48.377
> 
> 标签：javascript, google-chrome, google-chrome-extension

如何创建一个 Chrome 扩展程序，它将向工具栏添加一个图标，当点击图标时，它将运行我的脚本：

```
function rewrite() {
janbm_showpass:var a = document.getElementsByTagName('input'); for (var i = 0; i < a.length; i++) { if (a[i].hasAttribute('type') && a[i].type === 'password') a[i].type = 'text'; } void 0
} 
```

它将星星变成文字。但问题是当点击图标时你是如何运行的。我不想创建任何弹出窗口和 html。

这是我的 manifest.json。好吗？

```
{
"name": "Show password",
"version": "1.0",
"manifest_version": 2,
"description": "The extension",
"browser_action": {

    "default_icon": "icon.png",

 }, 

"background": {

    "scripts": ["show_pass.js"]
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:31:26.193

你可以使用这个骨架，你的代码有一个额外的尾随逗号

***清单.json***

```
{
"name": "Show password",
"version": "1.0",
"manifest_version": 2,
"description": "The extension",
"browser_action": {

    "default_icon": "icon.png"

 }, 

"background": {

    "scripts": ["show_pass.js"]
}
} 
```

* **show_pass.js***

```
function rewrite() {
//Your stuff here
/*janbm_showpass:var a = document.getElementsByTagName('input'); 
for (var i = 0; i < a.length; i++) { 
    if (a[i].hasAttribute('type') && a[i].type === 'password') 
    a[i].type = 'text'; 
} void 0*/
}

chrome.browserAction.onClicked.addListener(function(tab) {
    console.log("Clicked....");
    rewrite();
}); 
```

# java - Netty：如果 Channel 是“keep-alive”连接，我应该关闭它吗？

> ID：13601504
> 
> 赞同：7
> 
> 时间：2012-11-28T09:11:56.667
> 
> 标签：java, netty, keep-alive

我正在用 Netty 编写一个 HTTP 服务器。我在创建服务器引导程序时设置了 keep-alive 选项。 `bootstrap.setOption("child.keepAlive", true);` 每次编写 HTTP 响应时，我都会设置 keep-alive 标头并在写入响应后关闭通道。

```
rep.setHeader("Connection", "keep-alive");
channel.write(rep).addListener(ChannelFutureListener.CLOSE); 
```

我不确定我是否应该关闭频道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T11:27:40.673

假设您正在编写一个 HTTP 1.1 服务器，您应该默认在发送响应后保持连接打开。如果由于某种原因您决定关闭它，您应该包括

```
Connection: close 
```

在回应中。

注意

```
bootstrap.setOption("child.keepAlive", true); 
```

打开socket上的keepalive选项，与HTTP无关；相反，它是一种看门狗机制，用于在没有“真实”流量的情况下检测断开的连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T09:48:23.577

请注意，您还需要指定内容的长度：

```
 response.headers().set(CONTENT_LENGTH, response.content().readableBytes()); 
```

以便接收者可以找出消息在哪里结束。否则，接收将继续等待消息。

而且，要清楚，你不应该写“.addListener(ChannelFutureListener.CLOSE);” 如果您希望您的连接保持打开状态。

# api - 带有位置的 Twitter 主题标签搜索

> ID：13601514
> 
> 赞同：1
> 
> 时间：2012-11-28T09:12:29.100
> 
> 标签：api, twitter, location

我正在使用此 url 执行主题标签搜索： [http ://search.twitter.com/search.json?q=bluebird&rpp=5&include_entities=true&with_twitter_user_id=true&result_type=mixed](http://search.twitter.com/search.json?q=bluebird&rpp=5&include_entities=true&with_twitter_user_id=true&result_type=mixed)

但我也需要位置。我可以使用 id 专门针对用户执行另一个搜索，但 twitter 每小时只允许 150 个请求，所以我希望它完成 1 或 2 个请求。

在搜索主题标签时，您会建议我通过什么方式获取位置？

# azure - Azure 队列 - 我可以验证一条消息将只被读取一次吗？

> ID：13601515
> 
> 赞同：12
> 
> 时间：2012-11-28T09:12:31.420
> 
> 标签：azure, azure-storage, azure-storage-queues

我正在使用 Azure 队列，并且有几个不同的进程从队列中读取。
我的系统是以一种假设每条消息只读一次的方式构建的。
这篇[Microsoft 文章](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)声称 Azure 队列具有**至少一次**传递保证，这可能意味着两个进程可以从队列中读取**相同的**消息。
这个[StackOverflow 线程](https://stackoverflow.com/questions/9127191/azure-worker-read-a-message-from-the-azure-queue-in-a-mutex-way)声称，如果我使用*GetMessage*，那么消息对于所有其他进程变得不可见，因为不可见超时。

假设我使用*GetMessage()并且在**DeleteMessage*之前从未超过消息不可见时间，我可以假设我只会收到每条消息一次吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T02:02:48.327

我认为队列消息中有一个名为 的属性`DequeueCount`，即该消息已出列的次数。它由队列服务维护。我认为您可以使用此属性来确定您的消息是否已被阅读过。

[https://docs.microsoft.com/en-us/dotnet/api/azure.storage.queues.models.queuemessage.dequeuecount?view=azure-dotnet](https://docs.microsoft.com/en-us/dotnet/api/azure.storage.queues.models.queuemessage.dequeuecount?view=azure-dotnet)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-28T09:28:55.253

不可以。可能会发生以下情况：

*   获取消息（）
*   在数据库中添加一些记录...
*   生成一些文件...
*   *DeleteMessage()* -> 意外失败（进程崩溃、实例重启、网络连接问题……）

在这种情况下，您的逻辑在没有调用 DeleteMessage 的情况下被执行。这意味着，一旦隐身超时到期，消息将出现在队列中并再次被处理。您需要确保您的进程是[幂等](http://en.wikipedia.org/wiki/Idempotence)的：

> 幂等性是数学和计算机科学中某些运算的属性，它们可以多次应用而不会改变超出初始应用的结果。

另一种解决方案是将服务总线队列与**ReceiveAndDelete**模式一起使用（请参阅*如何从队列接收消息下的*[此](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-queues/)页面）。如果您收到该消息，它将被标记为已使用并且不再出现。这样您就可以确保它是**At-Most-Once交付的（请参阅**[此处](http://msdn.microsoft.com/en-us/library/windowsazure/hh767287.aspx)与 Storage Queues 的比较）。但是话又说回来，如果您在处理消息时发生了某些事情（即：服务器崩溃，...），您可能会丢失有价值的信息。

 *****更新：**

这将模拟存储队列中的 At-Most-Once。消息可以通过 GetMessage 多次到达，但只会由您的业务逻辑处理一次（存在您的某些业务逻辑永远不会执行的风险）。

*   获取消息（）
*   删除消息（）
*   AddRecordsToDatabase()
*   生成文件（）***

# c++ - 仅使用移动语义复制对象

> ID：13601516
> 
> 赞同：1
> 
> 时间：2012-11-28T09:12:46.833
> 
> 标签：c++, c++11, rvalue-reference

首先，让我带大家进入我的思想高速公路（简单地说，*我只是在想象这些事情*）

假设，我正在使用一个使用移动语义（右值引用）的第三方库类。这是它的定义：

```
class VeryHeavyObject {
    VeryHeavyObject(const VeryHeavyObject& obj); // copy constructor
    VeryHeavyObject& operator= (const VeryHeavyObject& obj); // copy operator

public:
    VeryHeavyObject(); // constructor

    VeryHeavyObject(VeryHeavyObject&& obj); // move constructor
    VeryHeavyObject& operator= (VeryHeavyObject&& obj); // move operator

    // ....
}; 
```

显然，作者真的很关心复制的成本`VeryHeavyObject`并决定强制移动所有内容（更明显的是，他不知道如何设计具有移动语义的类）。但是，在我的代码中，我需要有**一份**.`VeryHeavyObject`

好吧，核心问题是： ***如何仅使用移动构造函数和移动运算符来复制对象？***

PS：我试过了，但我无法真正联系到图书馆的作者（我认为他正在度假）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:29:15.893

**你不能。**

但是，只要您对它的内部（getter 等）有足够的访问权限，那么您就可以自己构建一个*克隆*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:24:15.393

一个定义良好的接口，我们将假设是这种情况，某些方法可能不可用，因为作者出于性能原因不鼓励某些用途。一个著名的例子是`std::list`，它不包括`[]`运算符，因为与其他容器相比，它具有`O(n)`复杂性`O(1)`，例如`std::vector`.

在这种情况下，图书馆的作者不鼓励使用副本，因为正如您在问题中所说的那样，它的成本非常高。但这并不意味着它是不可能的。如果您确实需要这样做，您可以编写自己的`Clone()`函数，该函数根据需要从原始数据中获取数据，`VeryHeavyObject`使用这些数据构造一个新函数并使用`std::move`. 由于我们没有接口，`VeryHeavyObject`我们无法尝试这样做，但我相信你可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T10:06:03.770

这可能是不可能的。

该类已将副本*声明*为私有，但我们看不到这些函数是否已*定义*。您似乎认为该类有一个复制操作，它对您隐藏起来以阻止您做一些缓慢的事情，但情况可能并非如此。有些对象根本无法复制。例如，考虑流。

您不会期望 C++11 中有私有声明但未定义的函数，但没有任何法律禁止它。无论如何，即使有一个实现的私有复制功能，它也可能是私有的（也许它只能在某些受控情况下使用：类内部知道如何安全地使用它而你不知道）。因此，如果没有公共副本，那么就此类的 API 而言，它不能被复制。

也许这个类有足够的公共访问器，你可以查询它以获得你需要的状态，并构造一个与之匹配的新对象。如果是这样，那么您可以合理地向该课程的作者抱怨它*应该*是可公开复制的。如果不是，那么它可能具有无法复制的状态。

任何提供对某事物（流、驱动程序、锁）的*唯一*访问权的东西都有不可复制的理由，因为原件和副本不能同时提供对同一事物的唯一访问权。不可否认`dup`，这意味着即使文件描述符在物理上也不提供对某些东西的唯一访问，更不用说包装它们的流了。但是流的状态涉及尚未写入的缓冲数据，这意味着复制它们会引入该类旨在保护您免受影响的复杂性。所以从逻辑上讲，您通常使用流，就好像它是访问某些东西的唯一方法。

[如果实现了复制赋值运算符，那么即使它是私有的](http://bloglitb.blogspot.co.uk/2010/07/access-to-private-members-thats-easy.html)，您也可以破解一种调用它的方法。但是，这不适用于复制构造函数，您不能将指针指向构造函数。作为一个残酷的黑客，你*可以* `#define private public`在包含它的标题之前：它是未定义的行为，但它可能适用于你正在使用的实现。分叉第三方来源会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T09:31:08.393

通常，不修改类是不可能的，因为可能存在您无法访问的私有数据。如果浅拷贝就足够了，这可能是可能的，因为那样你[应该能够使用`memccpy`](https://stackoverflow.com/questions/3021333/can-i-use-memcpy-in-c-to-copy-classes-that-have-no-pointers-or-virtual-functio). （注意，如果类没有任何虚拟成员或指针，浅拷贝和深拷贝是一样的）。

# java - 如何实现新版本的Web服务

> ID：13601517
> 
> 赞同：1
> 
> 时间：2012-11-28T09:12:53.843
> 
> 标签：java, web-services

我为版本控制 Web 服务阅读了这个问题：

[更新或版本控制网络服务的策略](https://stackoverflow.com/questions/931109/strategies-for-updating-or-versioning-web-services)

现在我想问如何实现新版本。

现在在网址上：`myUrls/../v1`接受网络服务。现在我想创建新版本： `myUrls/../v2`. 我想保留旧的网络服务，只是在新版本中添加一些新的网络服务。我该怎么做？我需要创建新的端点，或者我可以使用我当前的并且只是改变了一些东西。

谢谢帮助

更新：

我正在使用 spring-ws 和 SOAP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:34:45.057

这取决于变化的性质。如果您只是在 REST 调用中添加额外的方法，那么理论上，您可以添加到当前服务中，所有其他方法仍然可以使用。

如果您使用的是合同优先部署，例如 SOAP，那么您将需要版本，因为 WSDL 需要更新。

这真的取决于 - 您是否希望您的服务在当前版本上向后兼容消费者？如果您乐于在每次进行更改时强迫您的消费者重构他们的代码，那么是的，只需每次更新相同的 URL 端点，但如果我正在使用您的服务，这会让我有些恼火。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:50:56.040

这取决于您如何部署 Web 服务。

就个人而言，如果更改是向后兼容的（正如@david99world 指出的那样），那么您只需将新操作添加到现有服务中。

如果更改不兼容（即现有操作的接口已更改），那么我会将新服务打包为新的 EAR/WAR。这样您就可以同时运行这两个服务，因此并非所有服务使用者都需要同时更改/测试/部署他们的代码。通过拥有两个单独的版本，您可以拥有两个服务都可以工作的过渡期（尽管这取决于例如底层数据库更改是否会阻止`v1`与`v2`.

此外，如果更改不成功，很容易在`v2`不影响的情况下取消部署 WAR/EAR，`v1`并且通过保持 WAR/EAR 分开，您不需要`v1`仅仅因为引入`v2`.

由于使用单独的 WAR/EAR，URL 策略很可能必须是`myURLv1/../v1`并且`myURLv2/../v2`......

希望这是有道理的。

# cross-browser - jQuery UI 对话框打开导致 IE9 中的显示兼容性问题

> ID：13601518
> 
> 赞同：0
> 
> 时间：2012-11-28T09:12:59.830
> 
> 标签：cross-browser, internet-explorer-9, jquery-ui-dialog

页面加载时需要打开一个 jquery-ui 对话框。相关代码在两个文件中。

```
**FileA**
$(function()
{
   //some initialization code here

    $("#date-range-dialog").dialog({
        modal: true, 
        autoOpen: false, 
        buttons: 
        {
            "Ok": function() 
            {
               //some code here
            }
        }
    });
});

**FileB**
$(function()
{
   //some code

   $('#date-range-dialog').dialog('open');
}); 
```

这适用于 Chrome 和 Firefox。但是对于 IE9，打开的对话框事件/语句会导致浏览器将显示切换到兼容性视图。

对话框的标记是：

```
<div id="date-range-dialog" title="Date Range">
    <div class="form-horizontal">
        <div class="control-group">
            <label class="control-label">From</label>
            <div class="controls">
                <input type="text" id="dt-from" class="input-small" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">To</label>
            <div class="controls">
                <input type="text" id="dt-to" class="input-small" />
            </div>
        </div>
    </div>
</div> 
```

该应用程序使用 Twitter Bootstrap 2.0.4、jQuery 1.8.3、jQuery UI 1.9.2。目前没有手动 CSS。

一个奇怪的观察是，如果打开对话框的语句被注释掉，它在 IE9 中也可以工作。如果有调用此语句的按钮，则一切正常：

```
$(".date-range").click(function()
{
    $("#date-range-dialog").dialog("open");
}); 
```

因此，只有在尝试直接在其中打开对话框时才会出现问题`$(function(){});`

我也尝试在`$(window).load()`事件中放置对话框打开语句。它在 IE9 中仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T09:19:31.050

您是否尝试将文件 B 中的 jQuery 放入`$(document).ready({});`子句中？我猜想，也许 IE 在文件 A 中完成初始化之前正在运行文件 B 中的代码。这可以解释为什么它在你的 click 函数中起作用，但在你的文件 B 函数中不起作用。

# vb6 - Visual Basic 等价于 QBasic 的 Draw 语句

> ID：13601523
> 
> 赞同：0
> 
> 时间：2012-11-28T09:13:22.830
> 
> 标签：vb6, drawing, qbasic, quickbasic, gw-basic

是否有与 GW-BASIC 和 QBasic 的 DRAW 语句等效或实现的 Visual Basic（甚至 .NET 或 C++）？

我有一个非常古老的程序，它以 DRAW 语句的格式将图形输出为字符串，并希望在我正在用 Visual Basic 开发的 Windows 应用程序中呈现它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:58:43.550

您可以查看[VBTutor - 第 18 课：图形](http://www.vbtutor.net/vb6/lesson18.html)

特别是，您可能需要使用 Line 方法：

```
Line (0, 0)-(1000, 2000), VbRed 
' Draws a red line from 0,0 to 1000,2000 
```

或 Circle 方法：

```
Circle (400, 400), 500, VbRed 
' draws red circle centered at (400, 400) with a radius of 500 twips 
```

# sql - 如何克隆所有特定记录并修改其中一列

> ID：13601527
> 
> 赞同：0
> 
> 时间：2012-11-28T09:13:27.897
> 
> 标签：sql

我正在使用数据库开发多语言系统，正在尝试克隆具有特定 language_id 'EN' 的所有记录，并克隆到同一张表中，但具有相同 key_value 和键文本的不同 language_id

表语言

```
id---language_id---key_value---key_text
1        EN        _WELCOME    Welcome              
2        CH        _WELCOME      ...            
3        EN        _LOG_IN     Log In               
4        CH        _LOG_IN       ... 
```

做了一些工作，但它不起作用，不确定这是做这项工作的正确方法。

```
INSERT INTO language (language_id,key_value,key_text)
(SELECT 'FR','key_value','key_text' FROM language  WHERE language_id='EN' )

//Unknown column 'language_id' in 'where clause' 
```

我从一些旧的网络教程中得到了这个样本，但他们正在不同的桌子上工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:18:14.837

如果要插入所有`'EN'`数据`'FR'`，请尝试；**T-Sql**

```
INSERT INTO language (language_id,key_value,key_text)
SELECT 'FR' as language_id, key_value, key_text 
FROM language  WHERE language_id='EN' 
```

# c# - 导出到excel时进度条问题

> ID：13601529
> 
> 赞同：1
> 
> 时间：2012-11-28T09:13:41.983
> 
> 标签：c#, asp.net, progress-bar

我在使用它生成excel报告时遇到了进度条的问题......

我真正想要实现的是：-我试图在单击按钮时生成一个 excel 报告，并且由于报告生成需要很多时间，我想要一个进度条，直到生成 excel

**问题**： - 单击按钮时会显示进度条，但**在向用户提示 excel 下载后它不会隐藏/禁用**。进度条还在...

我正在使用更新面板中的回发触发按钮来生成 excel。并使用 Response.Write() 方法生成 excel 报告。

我正在使用 pagerequestmanager 注册回发开始和完成处理程序。请帮助我，我被困在这个...

```
<asp:ScriptManager ID="ScriptManager1" runat="server"/>
<script type="text/javascript">
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    //Raised before processing of an asynchronous postback starts and the postback request is sent to the server.
    prm.add_beginRequest(BeginRequestHandler);
    // Raised after an asynchronous postback is finished and control has been returned to the browser.
    prm.add_endRequest(EndRequestHandler);
    function BeginRequestHandler(sender, args) {
        //Shows the modal popup - the update progress
        var popup = $find('<%= modalPopup.ClientID %>');
        if (popup != null) {
            popup.show();
        }
    }
    function EndRequestHandler(sender, args) {
        //Hide the modal popup - the update progress
        var popup = $find('<%= modalPopup.ClientID %>');
        if (popup != null) {
            popup.hide();
        }
    }
    function ShowProgress() {
        var myExtender = $find('<%= modalPopup.ClientID %>');

        myExtender.show();
        return true;
    }
</script>
<div>
<asp:UpdateProgress ID="updateProg" runat="server">
<ProgressTemplate>
<asp:Image ID="imgProg" ImageUrl="ajax-loader.gif" runat="server" />
</ProgressTemplate>
</asp:UpdateProgress>
<ajaxToolkit:ModalPopupExtender ID="modalPopup" runat="server" TargetControlID="updateProg" PopupControlID="updateProg" BackgroundCssClass="modalPopup" />
<asp:UpdatePanel ID="pnlData" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:Button ID="btnSubmit" runat="server" Text="Excel" onclick="btnSubmit_Click" OnClientClick="return ShowProgress(); return false;"/>
</ContentTemplate>
<Triggers>
            <asp:PostBackTrigger ControlID="btnSubmit" />
        </Triggers>
</asp:UpdatePanel>
</div> 
```

在按钮中单击我正在使用愚蠢的代码：-

```
try
            {
                Thread.Sleep(7000);
                Response.Clear();
                String Attachment = "attachment; filename=" + "MonitoringReport.xls";
                Response.ClearContent();
                Response.AddHeader("content-disposition", Attachment);
                Response.ContentType = "application/vnd.ms-excel";
                Response.Write("<table border=1 style='font-size:12px;'>");
                Response.Write("<th>" + "Col1" + "</th>");
                Response.Write("<th>" + "Col2" + "</th>");
                Response.Write("<th>" + "Col3" + "</th>");
                Response.Write("<th>" + "Col4" + "</th>");
                Response.Write("</table>");
                Response.End();
            }
            catch (ThreadAbortException ex)
            {
            } 
```

# iphone - 如何在应用程序的活动状态下将远程推送通知显示为横幅样式？

> ID：13601533
> 
> 赞同：6
> 
> 时间：2012-11-28T09:13:55.947
> 
> 标签：iphone, objective-c, ios, xcode, push-notification

我正在制作一个使用苹果推送通知的应用程序。当我的应用程序处于后台状态时，我能够以横幅的形式接收通知，但是当我的应用程序处于活动状态时，我能够显示您已通过此代码收到通知的警报：-

```
(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {    
    UIApplicationState state = [application applicationState];
    if (state == UIApplicationStateActive) {

        NSString *cancelTitle = @"Close";
        NSString *showTitle = @"Show";
        NSString *message = [[userInfo valueForKey:@"aps"] valueForKey:@"alert"];
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Some title"
                                                            message:message 
                                                           delegate:self 
                                                  cancelButtonTitle:cancelTitle 
                                                  otherButtonTitles:showTitle, nil];
        [alertView show];

    } else {
        //Do stuff that you would do if the application was not active
    }
} 
```

但我想将通知显示为横幅。我会为此做些什么？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:20:17.480

您不能，如果您的应用程序处于活动状态（在前台运行），则推送通知会直接发送到您的应用程序。通知中心不会处理通知。

您将不得不自己实施某种横幅。

# css-transitions - 使用 -webkit-transform translate3d 的硬件加速 css3 动画在三星 Galaxy Tab 10.1 上不起作用

> ID：13601537
> 
> 赞同：5
> 
> 时间：2012-11-28T09:14:13.497
> 
> 标签：css-transitions, samsung-mobile, android-browser, webkit-transform

使用硬件加速 CSS3 标签的动画（参见下面的代码）在三星 Galaxy SIII 上的 Google Chrome PC 浏览器和 Android 浏览器中运行良好。但是，在三星 Galaxy Tab 10.1 上的 Android 浏览器上也不起作用。如何在三星 Galaxy Tab 设备上实现硬件加速滑入/滑出动画？

```
<!DOCTYPE html>
<html>
<head>
<style>
#div1
{
    border: 1px solid black;
    background-color: red;
    position: fixed;
    left: 0px;
}

#div1.active
{
    -webkit-transform-origin: 0% 0%;
    -webkit-transition-timing-function: cubic-bezier(0.1, 0.25, 0.1, 1.0);
    -webkit-transition-duration:2s; 
    -webkit-transform: translate3d(-100px,0px,0px);
}

#div1.inactive
{
    -webkit-transform-origin: 0% 0%;
    -webkit-transition-timing-function: cubic-bezier(0.1, 0.25, 0.1, 1.0);
    -webkit-transition-duration:2s; 
    -webkit-transform: translate3d(0px,0px,0px);
}

#button1
{
    position: fixed;
    left: 200px;
}
</style>

<script>
var flag = 1;
function myFunction()
{
    if (++flag % 2 === 0) {
        //alert("active");
        document.getElementById("div1").setAttribute("class", "");
        document.getElementById("div1").setAttribute("class", "active");
    } else {
        //alert("inactive");
        document.getElementById("div1").setAttribute("class", "");
        document.getElementById("div1").setAttribute("class", "inactive");
    }
}
</script>
</head>

<body>
<div id="div1">HELLO</div>
<button id="button1" onclick="myFunction()">Click me</button>
</body>
</html> 
```

亲切的问候，Vinaya

# c - Valgrind 错误：由于带有 C 的 strstr() 导致“大小为 1 的无效读取”

> ID：13601548
> 
> 赞同：2
> 
> 时间：2012-11-28T09:15:13.770
> 
> 标签：c, valgrind, strstr, null-terminated

Valgrind 输出：

```
GET /cs3157/tng/index.html
==760== Invalid read of size 1
==760==    at 0x4C2E7D4: strstr (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==760==    by 0x400E67: HandleTCPClient (http-server.c:101)
==760==    by 0x400D42: main (http-server.c:75)
==760==  Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

相关代码：

```
FILE *input = fdopen(clntSocket, "r");      //socket wrapped with FILE * 
if (input == NULL)
{
    perror("fdopen failed");
    fclose(input);
    return;
}
char request_buffer[100];
char out_buf[BUF_SIZE];
int len, res;

while( fgets(request_buffer, sizeof(request_buffer),input) != NULL)
{
    request_buffer[sizeof(request_buffer)-1] = '\0';   //null terminates buffer
    char *request = request_buffer;
    char *token_separators = "\t \r\n"; // tab, space, new line
    char *method = strtok(request, token_separators);
    char *requestURI = strtok(NULL, token_separators);
    char *httpVersion = strtok(NULL, token_separators);

    if( strstr(method,"GET") != NULL )
    {
            if( requestURI[strlen(requestURI)] == '/' ) 
                    requestURI = strcat(requestURI,"index.html");
            printf("%s %s\n", method, requestURI);

    } 
    memset(request_buffer,'\0',sizeof(request_buffer) );
}

fclose(input);      //close the socket by closing the FILE * wrapper 
```

我读到这个错误通常是由于未能为空终止字符串引起的。我认为我在 fgets() 之后的第一行可以防止这成为问题。我猜我忽略了一些东西。我很感激任何帮助。

编辑：程序以分段错误结束崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:17:49.617

听起来（来自 Valgrind 的报告）好像`method`是`NULL`. 您应该使用调试器单步执行此代码，以验证标记化是否按预期工作。

此外，您应该声明所有这些指针，`const char *`因为它们不打算被写入。这当然是次要的一点，但我尽量鼓励`const`尽可能使用。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:27:48.717

```
Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

这里出了点问题：程序似乎取消了对 NULL 的引用。我想知道它最终是否会出现段错误-您应该检查 的返回值`strtok()`，因为如果找不到更多令牌，它会返回 NULL 。

# svn - svn copy : 将整个目录复制到另一个目录

> ID：13601554
> 
> 赞同：0
> 
> 时间：2012-11-28T09:15:30.440
> 
> 标签：svn, svn-copy

我需要将整个目录复制到另一个 URL。

```
 svn copy http://10.0.3.2:8080/svn/New/trunk/Test http://10.0.3.2:8080/svn/New/trunk/Test7 
```

它工作正常（即第一次成功`/Test`复制整个目录）。`/Test7`

如果我修改目录中的一些文件`/Test`并再次复制`/Test`到`/Test7`目录，它将复制`/Test`目录下的`/Test7`目录，如`/Test7/Test`. 如果我再次尝试将目录复制`/Test`到`/Test7`目录，则会显示错误：

> svn: E160020: 路径“测试”已经存在

但是我想`/Test7`在第二次复制时只将修改后的文件提交到目录中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:02:50.570

您需要先删除旧目录，然后再复制。

并且 - 阅读文档，它真的很有帮助。`svn help`也很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T11:33:17.247

> 我怎样才能做到这一点 ？

## [阅读文档！！！](http://svnbook.red-bean.com/en/1.7/index.html)

如果您在 WC 中修改与 Test 相关的文件并希望将更改镜像到 Test7 - 您必须使用

*   正确的工作流程
*   正确的命令

你可以：

*   将 WC 切换到 Test7 路径并提交
*   将 WC 切换到 Test7，更新，将 Test 合并到 WC，提交

# .net - 对声明为朋友的类进行单元测试（内部）

> ID：13601557
> 
> 赞同：7
> 
> 时间：2012-11-28T09:15:42.340
> 
> 标签：.net, visual-studio-2010, unit-testing, friend

在我的一些测试帮助程序代码中，我有一个`IDbSet(Of T)`名为的实现`FakeDbSet(Of T)`，它在没有实际数据库的情况下模拟了许多 EF 行为。我声明了这个类`Friend`，因为我想强制所有代码像`IDbSet(Of T)`. 在内部（即在我的`Testing`程序集中），我访问了许多我希望能够测试的类的公共成员。

问题是，我将单元测试保存在单独的程序集中，`Test.Unit`这意味着*它们无法访问*我的内部实现！我知道我可以通过反思来解决这个问题，但这很快就会变得麻烦和混乱。有没有更好的方法来设置我的项目以避免这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T09:19:44.343

将此添加到您的 AssemblyInfo.cs 文件中：

```
[assembly:InternalsVisibleTo("YourOtherAssembly")] 
```

这将使您的内部程序集对`YourOtherAssembly`. 但是，您应该真正考虑是否需要它`internal`。在编写测试时，请尝试专注于您的`public`部分。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

# sharepoint - 如何更新 sharepoint 2010 功能的属性

> ID：13601558
> 
> 赞同：2
> 
> 时间：2012-11-28T09:15:41.627
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我在更新 sharepoint 2010 功能的属性时遇到问题

这是我的代码：

```
using (SPSite site = new SPSite("http://vm-pc:2000"))
        {
            foreach (SPFeatureDefinition def in SPFarm.Local.FeatureDefinitions)
            {

                if (def.Scope == SPFeatureScope.WebApplication)
                {
                    if (def.GetTitle(System.Threading.Thread.CurrentThread.CurrentCulture) == "Configure Site Settings")
                    {
                        ((SPFeatureProperty)def.Properties[0]).Value = "5";
                        def.Properties.Update();
                        def.Update();

                    }
                }
            }
        } 
```

问题与`def.Properties.Update();`

它抛出一个异常：

> 不支持更新特征定义的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:28:22.427

为什么不使用属性包？

```
SPSite site = new SPSite("URL"); 
SPWeb web = site.RootWeb; 
web.Properties.Add("Key", "Value"); 
web.Properties.Update(); 
```

并获得价值：

```
web.AllProperties["Key"] 
```

# ruby-on-rails - 如何阻止乘客处理 Shibboleth.sso URL

> ID：13601564
> 
> 赞同：0
> 
> 时间：2012-11-28T09:16:07.913
> 
> 标签：ruby-on-rails, apache, passenger, shibboleth

我有 Apache + Passenger 设置，其中 Rails 应用程序位于域根目录中。该应用程序将受**Shibboleth**保护，但要求

```
/Shibboleth.sso/Metadata 
```

**从 Rails**返回`404`错误。

 **如果我从 DocumentRoot 中删除 Rails 应用程序（重命名文件夹），那么 Shibboleth 会正确地为我提供元数​​据，但一旦我恢复 Rails 应用程序就会再次停止。

如何阻止乘客处理该 URL？我应该`alias`去某个地方吗？在哪里？

**编辑：**我也试过这个，但没有效果：

```
<Location /Shibboleth.sso>
  SetHandler shib
</Location> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T11:50:53.747

更好的方法是在 Apache 中禁用 /Shibboleth.sso 的乘客

它应该是这样的：

```
 <Location /Shibboleth.sso>
            PassengerEnabled off
            Satisfy Any
    </Location> 
```**

# ruby-on-rails - OmniAuth、AWS S3 和omniauth-stocktwits 出现奇怪错误

> ID：13601565
> 
> 赞同：0
> 
> 时间：2012-11-28T09:16:11.190
> 
> 标签：ruby-on-rails, amazon-s3, amazon-web-services, omniauth, stocktwits

我有一个使用omniauth 进行用户身份验证的rails 应用程序。推特和谷歌。我又添加了一个提供商 StockTwits，带有 gem omniauth-stocktwits。现在我的应用程序由于错误而无法启动：

```
/home/vladimir/.rvm/gems/ruby-1.8.7-p371@ea/gems/aws-s3-0.6.2/lib/aws/s3/extensions.rb:206:in `const_missing': uninitialized constant OmniAuth::Strategies::Stocktwits (NameError) 
```

我不明白是什么问题......为什么aws s3会引发omniauth错误？我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:57:57.753

常数应该是`StockTwits`，不是`Stocktwits`。您是否在任何地方都没有大写T？

否则你能否给我更多关于你如何要求和初始化omniauth-stocktwits的信息，以及你的错误中堆栈跟踪的其余部分是什么样的，所以我可以尝试重现它？

`const_missing`此外，谷歌通过 AWS-S3 gem显示了许多不相关的错误，因此这可能与 AWS 完全无关。

# ruby-on-rails - 部署 Rails 应用程序期间 Heroku 中的弃用警告

> ID：13601568
> 
> 赞同：1
> 
> 时间：2012-11-28T09:16:31.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, ruby-on-rails-3.2

> **可能重复：**
> [在 Heroku 中运行任务的 Rails 2.3 样式插件和弃用警告](https://stackoverflow.com/questions/9027403/rails-2-3-style-plugins-and-deprecation-warnings-running-task-in-heroku)

```
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support
 for these plugins will be removed in Rails 4.0\. Move them out and bundle them i
n your Gemfile, or fold them in to your app as lib/myplugin/* and config/initial
izers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonr
ails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required
)> at /app/Rakefile:7) 
```

显示3次，有时显示2次是什么意思？有什么特殊含义吗？ **如何为 db:migrate 解决这个问题**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:32:21.637

Heroku 在 slug 编译期间“注入”了一些插件。

```
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets 
```

请参阅[Rails 2.3 风格的插件和弃用警告在 Heroku 中运行任务](https://stackoverflow.com/questions/9027403/rails-2-3-style-plugins-and-deprecation-warnings-running-task-in-heroku)

# php - Joomla Menuitem SEF 网址

> ID：13601570
> 
> 赞同：1
> 
> 时间：2012-11-28T09:16:44.273
> 
> 标签：php, url, joomla, joomla-sef-urls

我正在 Joomla 中构建一个模块。我正在使用模块参数（Menuitem）。它将菜单 ID 返回到模块中的 default.php 文件。

然后我使用以下代码构建一个 URL：

```
$itemID = $params->get( 'url' ); // Menuitem id
$application = JFactory::getApplication();
$menu = $application->getMenu();
$item = $menu->getItem( $itemID );
$link = new JURI($item->link);
$link->setVar( 'ItemId', $itemid );
$articleLink = $link; 
```

它可以正常工作，但链接不是 SEF url：

这是：

```
index.php/component/content/article?id=25 
```

代替：

```
index.php/call-back-request 
```

我如何将 url 转换为 SEF url？任何帮助都会得到满足

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:22:49.680

您可以使用 JRoute 创建 sef url。这可能会帮助你——

```
$link=JRoute::_($link); 
```

有关更多详细信息，请阅读 - [http://docs.joomla.org/Search_Engine_Friendly_URLs](http://docs.joomla.org/Search_Engine_Friendly_URLs)

更新：

```
//article sef
$catslug = $row->catid.':'.$row->category_alias;
$slug = $row->id.':'.$row->alias;
$link = JRoute::_(ContentHelperRoute::getArticleRoute($slug, $catslug)); 
```

# coronasdk - Coronos 的画布和对象

> ID：13601582
> 
> 赞同：0
> 
> 时间：2012-11-28T09:17:15.193
> 
> 标签：coronasdk

在 Corona 中，我正在尝试编写类似游戏的拼图游戏，但这些片段是视频的一部分，那么有没有办法运行视频序列并在显示对象中表示该视频的剪辑片段？

任何样品都会很棒....

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:15:42.217

如果通过剪辑，您的意思是创建一个播放视频片段而不是整个视频的显示对象，那么可以 - 如果您的意思是从视频中剪下一个形状，即拼图的大小/形状，那么不会。
如果是较小的，请查看 native.newVideo() API。

# jquery - 永远不会调用加载完成

> ID：13601583
> 
> 赞同：3
> 
> 时间：2012-11-28T09:17:19.193
> 
> 标签：jquery

我有这段 javascript，它加载了一个 html 文件，其中包含逻辑工作的 div。它是一个弹出窗口，应该包含在多个页面中。

我在其他地方成功地使用了完全相同的方法。

问题是从不调用完整的方法，当我记录浏览器与服务器的交互时，没有调用。

这在 IE9 和 FF16 中是一样的。

你有什么暗示可以让我走得更远吗？

蒂亚:)

```
function defineEditDocumentWindow(divTag) {
assert($(divTag));
assert(UrlExists('/Documents/EditDocument.htm'));
$(divTag).load('/Documents/EditDocument.htm', null, function (response, status, xhr) {
    alert('hey, we were called');
    if (status == "error") {
        debugger;
    } else {
        debugger;
        var width = 1500;
        var height = 800;

        var initWidgets = function (tab) {
            switch (tab) {
                case 0:
                    break;
                case 1:
                    initializePreview();
                    break;
            }
        };
        $('#jqxTabDocumentEditPreview').jqxTabs({ height: 700, width: 1480, theme: 'classic', initTabContent: initWidgets });
        $('#jqxEditDocumentWindow').jqxWindow({ height: height, maxHeight: height, width: width, maxWidth: width, theme: 'classic', autoOpen: true, isModal: true, animationType: 'none' });

        $('#jqxTabDocumentEditPreview').jqxTabs({ keyboardNavigation: false });
        $('#jqxTabDocumentEditPreview').bind('selected', function (event) {
            initializePreview(event);
        });
    }
});
} 
```

HTML：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Test.aspx.cs" Inherits="T24Portal.Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <script type="text/javascript" src="ScriptsExternal/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="Scripts/WaitSignUtil.js"></script>

    <link rel="stylesheet" href="jqwidgets/styles/jqx.base.css" type="text/css" />
    <link rel="stylesheet" href="jqwidgets/styles/jqx.classic.css" type="text/css" />
    <link rel="stylesheet" href="jqwidgets/styles/jqx.classic.css" type="text/css" />
    <script type="text/javascript" src="/Documents/EditDocument.Main.js"></script>
    <script type="text/javascript" src="ScriptsExternal/ba-debug.js"></script>
    <script type="text/javascript" src="ScriptsExternal/json2.js"></script>
    <script type="text/javascript" src="ScriptsExternal/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="jqwidgets/jqx-all.js"></script>
    <script type="text/javascript" src="ScriptsExternal/showdown.js"></script>
    <script type="text/javascript" src="/Scripts/AvalonUtil.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            defineEditDocumentWindow("EditDocumentWindowPlaceHolder");
        });
    </script>
    <style type="text/css">

    </style>

</head>
<body>
   <div id="EditDocumentWindowPlaceHolder">
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:40:12.757

要完成此 Q/A ... 未正确使用正确的选择器。

函数调用：

```
defineEditDocumentWindow("EditDocumentWindowPlaceHolder"); 
```

应该：

```
defineEditDocumentWindow("#EditDocumentWindowPlaceHolder"); 
```

*错过了前导哈希标记。*

# video - 使用 libav 在内存流中写入视频

> ID：13601587
> 
> 赞同：2
> 
> 时间：2012-11-28T09:17:36.120
> 
> 标签：video, ffmpeg, libav

我正在使用 libav 从网络成功捕获视频数据包。目前，我有一个 AVFormatContext 对象，我可以在其中写入标头、数据包等......关键是我想在需要时将这个上下文中的所有内容转储到文件中。我应该怎么办 ？

在此先感谢， 迪达克佩雷斯

# c++ - 局部范围的外部习语

> ID：13601588
> 
> 赞同：1
> 
> 时间：2012-11-28T09:17:38.507
> 
> 标签：c++, c, scope, extern

我正在编写一个带有很多旋钮的科学程序。我一直在`extern`为额外的配置添加作用域变量，而不是不断地添加和删除命令行选项。这些变量仅在一个本地范围内使用，并在专用源文件中一起定义`args.cpp`。该文件不包含标题，因此只需一秒钟即可重新编译它并重新链接可执行文件以更改任何选项。

```
// big_slow_compiling_source.cpp:

{
    extern double fudge_rate;
    quantity += correction * fudge_rate;
}

// args.cpp:

/* Configuration for big_slow_compiling_source.cpp: */
double fudge_rate = 3.2; 
```

这个成语有名字吗？我一直称他们为“本地外部人员”，但必须有更好的术语。

任何已知的陷阱？

# android - Android Cocos2dx 崩溃

> ID：13601589
> 
> 赞同：1
> 
> 时间：2012-11-28T09:17:38.920
> 
> 标签：android, cocos2d-x

我在 cocos2dx 中为 ios 设备制作了游戏。现在我想将它移植到 android 但是，适用于 ios 的代码在 android 上崩溃了。eclipse 显示了 3 种类型的 logCat 输出，如下所示。

///////////////////////////////////////// ///////////////////////////////////////// ///

```
1) 11-27 10:41:05.168: W/SharedBufferStack(4417): waitForCondition(LockCondition) timed out (identity=302, status=0). CPU may be pegged. trying again. 
```

///////////////////////////////////////// ///////////////////////////////////////// ///

```
2) 11-27 10:41:36.448: D/lights(248): set_light_backlight: brightness=255
11-27 10:41:41.518: I/InputDispatcher(248): Application is not responding: Window{2b452080 org.cocos2dx.Saburbia_android/org.cocos2dx.Saburbia_android.Saburbia_android paused=false}. 5000.4ms since event, 5000.4ms since wait started
11-27 10:41:41.518: I/WindowManager(248): Input event dispatching timed out sending to org.cocos2dx.Saburbia_android/org.cocos2dx.Saburbia_android.Saburbia_android
11-27 10:41:41.528: I/Process(248): Sending signal. PID: 4417 SIG: 3
11-27 10:41:41.528: I/dalvikvm(4417): threadid=4: reacting to signal 3
11-27 10:41:41.728: I/Process(248): Sending signal. PID: 248 SIG: 3
11-27 10:41:41.728: I/dalvikvm(248): threadid=4: reacting to signal 3
11-27 10:41:41.748: I/dalvikvm(248): Wrote stack traces to '/data/anr/traces.txt'
11-27 10:41:41.748: I/Process(248): Sending signal. PID: 355 SIG: 3
11-27 10:41:41.748: I/dalvikvm(355): threadid=4: reacting to signal 3
11-27 10:41:41.758: I/dalvikvm(355): Wrote stack traces to '/data/anr/traces.txt'
11-27 10:41:41.758: I/Process(248): Sending signal. PID: 320 SIG: 3
11-27 10:41:41.758: I/dalvikvm(320): threadid=4: reacting to signal 3
11-27 10:41:41.758: I/dalvikvm(320): Wrote stack traces to '/data/anr/traces.txt'
11-27 10:41:41.968: D/dalvikvm(248): GC_EXPLICIT freed 952K, 49% free 6943K/13447K, external 3286K/4888K, paused 78ms
11-27 10:41:42.518: E/ActivityManager(248): ANR in org.cocos2dx.Saburbia_android (org.cocos2dx.Saburbia_android/.Saburbia_android)
11-27 10:41:42.518: E/ActivityManager(248): Reason: keyDispatchingTimedOut
11-27 10:41:42.518: E/ActivityManager(248): Load: 7.93 / 7.92 / 7.79
11-27 10:41:42.518: E/ActivityManager(248): CPU usage from 27270ms to 0ms ago:
11-27 10:41:42.518: E/ActivityManager(248): 99% 4417/org.cocos2dx.Saburbia_android: 99% user + 0% kernel / faults: 2 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 3877/com.google.android.apps.maps: 0% user + 0% kernel / faults: 418 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 3957/com.svox.pico: 0% user + 0% kernel / faults: 678 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 248/system_server: 0% user + 0% kernel / faults: 8 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 1679/com.sonyericsson.customization: 0% user + 0% kernel / faults: 283 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 3647/com.sonyericsson.devicemonitor: 0% user + 0% kernel / faults: 179 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 121/rild: 0% user + 0% kernel / faults: 1 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 320/com.android.systemui: 0% user + 0% kernel / faults: 3 minor
11-27 10:41:42.518: E/ActivityManager(248): 0% 3731/com.sonyericsson.android.datamonitor: 0% user + 0% kernel / faults: 25 minor
11-27 10:41:42.518: E/ActivityManager(248): 100% TOTAL: 100% user + 0% kernel
11-27 10:41:42.518: E/ActivityManager(248): CPU usage from 461ms to 976ms later:
11-27 10:41:42.518: E/ActivityManager(248): 98% 4417/org.cocos2dx.Saburbia_android: 98% user + 0% kernel
11-27 10:41:42.518: E/ActivityManager(248): 96% 4418/HeapWorker: 96% user + 0% kernel
11-27 10:41:42.518: E/ActivityManager(248): 3.8% 248/system_server: 1.9% user + 1.9% kernel
11-27 10:41:42.518: E/ActivityManager(248): 1.9% 291/InputDispatcher: 0% user + 1.9% kernel
11-27 10:41:42.518: E/ActivityManager(248): 1.9% 442/er$SensorThread: 1.9% user + 0% kernel
11-27 10:41:42.518: E/ActivityManager(248): 100% TOTAL: 98% user + 1.9% kernel
11-27 10:41:42.518: I/InputDispatcher(248): Dropping event because the pointer is not down. 
```

///////////////////////////////////////// //////////////////////////////////////

3）第三个原因是未知的，因为它在 logCat 中显示了很多内存地址。

///////////////////////////////////////// //////////////////////////////////////

我使用 libcurl 进行网络调用，使用 pThread 进行线程处理。该游戏还具有使用 Facebook API for mobile (Hackbook) 完成的 Facebook 集成。

facebook 登录后，本机代码使用 libcurl 连接到服务器并使用 pThread 进行大约 30 次 http 调用，因此不应暂停渲染线程以从服务器获取响应。仍在进行此加载时，logcat 会显示这 3 个日志中的任何一个，并从头开始重新加载。游戏中也存在使用 pThreads 执行的 http 请求，但在游戏中它也显示这 3 个日志中的任何一个并随机崩溃。

相同的代码适用于 ios 构建。我无法找到为什么它不能在 Android 上正常运行。请建议是否必须遵循 android 移植的任何规则。

我使用的版本如下。Android NDK：r8b Cocos2dx：2.0.3 Eclipse：3.6.2 Android 版本：2.2 系统：Ubuntu 10.0.4 设备：SonyEricsson NeoV (android2.3.4)，Samsung Galaxy SII (android4.0.3)。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:50:35.280

尝试在 iPhone 中查找内存问题，因为自动释放代码可能无法正常工作。还可以使用 NDK 堆栈了解更多详细错误。更新：另一种远程跟踪 ndk 堆栈的方法使用[https://www.crittercism.com](https://www.crittercism.com) 谢谢。

# ios - 如何使用 ssziparchive 解压缩包含多个文件夹的 zip 文件？

> ID：13601609
> 
> 赞同：2
> 
> 时间：2012-11-28T09:18:47.743
> 
> 标签：ios, unzip, ssziparchive

我正在尝试使用我在以下位置找到的 ssziparchive lib 解压缩文件夹：[https](https://github.com/soffes/ssziparchive) ://github.com/soffes/ssziparchive 。我使用的代码：

```
 NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *zipFilePath = [documentsDirectory stringByAppendingPathComponent:@"ZippSecretExcel.zip"];
     NSString *unzipFilePath = [documentsDirectory stringByAppendingPathComponent:@"UnZipSecretExcel"];
    BOOL
    status = [SSZipArchive unzipFileAtPath:zipFilePath toDestination:unzipFilePath];
    if(status)
    {
        NSLog(@"File successfully uncompressed");
    }
    else{
          NSLog(@"File failed to compressed"); 
    } 
```

我检查了项目文档目录中存在ZippSecretExcel，但上面的代码解压失败。程序编译，没有错误或崩溃。我的 zip 文件夹包含三个文件夹，它们本身包含文件和文件夹。我是否必须执行任何其他步骤来解压缩文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:35:51.780

请问这段代码'status = [SSZipArchive unzipFileAtPath:zipFilePath toDestination:unzipFilePath];' 首先为目标路径创建一个目录？..

如果没有，请在解压缩之前使用以下代码创建文件夹

```
BOOL isDire = YES;
NSFileManager *fileManager = [NSFileManager defaultManager];            
if(![fileManager fileExistsAtPath:unzipFilePath isDirectory:&isDire]){

[fileManager createDirectoryAtPath:unzipFilePath withIntermediateDirectories:YES attributes:nil error:NULL];

} 
```

# vim - vim: taglist 无法生成标签

> ID：13601612
> 
> 赞同：2
> 
> 时间：2012-11-28T09:19:04.760
> 
> 标签：vim, ctags, vim-plugin, taglist

尝试`:TlistToggle`在 .py 文件上运行 taglist ( ) 时出现错误：

```
Taglist: Failed to generate tags for /Users/...py
ctags: illegal option -- -^@usage: ctags [-BFatuwvx] [-f tagsfile] file ...^@ 
```

我已经下载了最新的 taglist 和 ctags 插件，并`:let Tlist_Ctags_Cmd = '"/usr/local/bin/ctags"'`在 vim 中运行（我在 OS X 上，在终端中运行 vim）。

有什么想法为什么我会收到上述错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:28:30.793

Taglist 只支持“exuberant ctags tool”，不支持“GNU ctags or the Unix ctags”，见[FAQ](http://vim-taglist.sourceforge.net/faq.html)。

我使用[标签栏](http://majutsushi.github.com/tagbar/)代替它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T11:04:04.920

您需要“exuberant ctags tool”，您可以按照以下步骤构建您自己的并安装。

1.  [从http://ctags.sourceforge.net](http://ctags.sourceforge.net)下载 crags
2.  将 ctags 提取到文件夹（前 e-ctags ）
3.  转到该文件夹​​（ cd e-crags ）
4.  。/配置
5.  。/制作

获得二进制文件后，您可以将其移动到 bin 文件夹，如下所示：

sudo mv ctags /usr/bin/ctags-exuberant

并使用 ctags-exuberant 代替 ctags。

# java - 命令模式和迭代器模式有什么区别？

> ID：13601614
> 
> 赞同：2
> 
> 时间：2012-11-28T09:19:07.460
> 
> 标签：java, design-patterns

我对命令模式和迭代器模式之间的区别感到困惑。对我来说，两者看起来都一样。任何人都可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:25:56.520

它们是根本不同的。

您确定您甚至看过每个示例的实现吗？并使用调试器逐步浏览示例以了解它们的作用？

*   命令是表示动作的对象。它可以由程序的一部分创建，然后由任何其他部分执行。

*   迭代器是一种对集合的所有元素执行相同操作的方法。

# plsql - 使用数组填充 APEX 表单上的文本字段

> ID：13601620
> 
> 赞同：0
> 
> 时间：2012-11-28T09:19:26.403
> 
> 标签：plsql, oracle-apex, plsqldeveloper

我正在使用条形码扫描仪扫描条形码（由订单^位置组成 - 我使用 ^ 作为分隔符），然后我需要将这两个值分开并将两个值放入两个文本字段中。这个想法是将条形码扫描到第三个文本字段中，然后在按下保存后使用一个过程将其分开 - 然后将它们保存到单独的表格列中。我有以下分隔文本的内容，但我现在正试图将数组中保存的值放入 APEX 表单上的文本字段中。

我有下面的代码，它在 SQL 开发人员中使用以下几行但是当我更改它们以尝试将值放入文本字​​段时它失败了。我想知道我的语法是否正确或不正确？

```
 dbms_output.put_line(v_array(1)); -- This works in SQL Developer

 :P1_ORDER := dbms_output.put_line(v_array(1)); -- Fails in SQL Developer & APEX 
```

当我尝试在 SQL 开发人员中运行以下内容时，我得到以下信息。请有人帮我将数组中的值传递给我的 APEX 表单上的文本字段。谢谢。

ORA-06550：第 17 行，第 13 列：PLS-00222：此范围内不存在名为“PUT_LINE”的函数 ORA-06550：第 17 行，第 5 列：PL/SQL：语句被忽略

```
 declare

  v_array apex_application_global.vc_arr2;
  P1_ORDER number;
  P1_LOCATION number;

 begin

  -- Convert delimited string to array
  v_array := apex_util.string_to_table(:P1_JOB_NUMBER,'^');

  --dbms_output.put_line(v_array(1));
  --dbms_output.put_line(v_array(2));

  :P1_ORDER := dbms_output.put_line(v_array(1));
  :P1_LOCATION := dbms_output.put_line(v_array(2));

 end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:38:52.743

请参阅 put_line 不是函数，它是 dbms_output 包中的一个过程。

您不能将 dbms_output.put_line 分配给任何变量。

试试这个

```
declare

 v_array apex_application_global.vc_arr2;
 P1_ORDER number;
 P1_LOCATION number;

begin

 -- Convert delimited string to array
 v_array := apex_util.string_to_table(:P1_JOB_NUMBER,'^');

 --dbms_output.put_line(v_array(1));
 --dbms_output.put_line(v_array(2));

 P1_ORDER := v_array(1);
 P1_LOCATION := v_array(2);

end; 
```

# umbraco - 顶部和子菜单中的当前链接

> ID：13601621
> 
> 赞同：1
> 
> 时间：2012-11-28T09:19:30.257
> 
> 标签：umbraco

我正在尝试在 Umbraco 安装中的顶部和子菜单项上设置“当前”类。

顶部菜单就像：

```
Home Products About Contact 
```

现在，当我单击假设产品时，我将类名设置为“当前”。同时它会加载一个像这样的子菜单：

```
Jeans
Sweeters
T-shirts
- Red
- Green
- Blue 
```

当我点击让我们说 Sweeters 时，我不想让产品链接和 sweeters 链接拥有当前类。我怎样才能做到这一点？

顶部菜单代码

```
@{
    <ul class="topnavigation">
    @foreach (var c in Model.AncestorOrSelf(2).Children.Where("umbracoNaviHide!=true"))
    {
        <li class="@(Model.Id == c.Id ? "current" : "")"><a href="@c.Url">@c.Name</a></li>
    }
    </ul>
} 
```

子菜单代码

```
@{
<ul>
    @foreach (var page in @Model.AncestorOrSelf(3).Children)
    {
        string style = string.Empty;
        if (Model.Id == page.Id) { style = "class=current"; }
        <li @style><a href="@page.Url" @Html.Raw(style)>@page.Name</a></li>
            if (page.Childen != null && page.Children.Count() > 0 && Model.AncestorsOrSelf().Where("Id == @0", page.Id).Count() > 0)
            {                
                <ul>
                    @foreach (dynamic secondPage in page.Children.Where("!umbracoNaviHide"))
                    {    
                        string style1 = string.Empty;
                        if (Model.Id == secondPage.Id) { style1 = "class=current"; }                
                        <li @style1>
                            - <a href="@secondPage.Url">@secondPage.Name</a>
                        </li>
                    }
                </ul>
            }
    }
</ul>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:08:46.797

一个页面有一个`Path`属性，它包含一个以逗号分隔的`ID`s 列表，表示该页面的祖先。

您可以使用类似的东西检查产品页面是否`ID`存在于当前页面的属性中。`Path``@Model.Path.Contains(c.Id.ToString())`

# c++ - QStyledItemDelegate 和 QStandardItem 防止更改文本，仅启用选择和复制

> ID：13601622
> 
> 赞同：1
> 
> 时间：2012-11-28T09:19:33.610
> 
> 标签：c++, qtableview, qstandarditemmodel, qstyleditemdelegate

我有一个简单的 QStandardItem 和 QTableView 和 QStyledItemDelegate。他们有代表，我想禁止用户更改表中列的内容，只允许选择和复制。我猜它与`QStyledItemDelegate::createEditor`.

当我将其设置为返回 0 时，它只会禁用所有内容。

```
QWidget *InfoTableItemDelegate::createEditor(QWidget *parent,
                                    const QStyleOptionViewItem &option,
                                    const QModelIndex &index) const
{
    // return QStyledItemDelegate::createEditor(parent, option, index);
    return 0;
} 
```

我的问题是，我如何定义它，所以我只能选择和复制，并禁用编辑它的选项，如删除或更改文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:55:34.460

如果您的数据可以显示为简单文本，那么您可以在[只读模式下](http://doc.qt.digia.com/qt/qlineedit.html#readOnly-prop)返回 QLineEdit 。如果您有图像或其他类型的数据，则可能是带有一些 html 的可选 QLabel（要使 QLabel 可选，您必须在[标签的交互标志](http://doc.qt.digia.com/qt/qlabel.html#textInteractionFlags-prop)`Qt::TextSelectableByMouse`中包含or ）。`Qt::TextSelectableByKeyboard`

# php - mysql查询速度-选择每3行的最大值

> ID：13601623
> 
> 赞同：4
> 
> 时间：2012-11-28T09:19:37.210
> 
> 标签：php, mysql, performance

我有一张包含价格信息的表格。我需要选择每三行的最大值。例子：

```
Table `daily_high`
 ____ _______
| ID | HIGH  |
| 1  | 24.65 |
| 2  | 24.93 |
| 3  | 26.02 |
| 4  | 25.33 |
| 5  | 25.16 |
| 6  | 25.91 |
| 7  | 26.05 |
| 8  | 28.13 |
| 9  | 27.07 |
|____|_______|

Desired output to new table (ID will be auto-increment so don't assume an association exists between this ID 1 and the daily_high ID 1:
 ____ ___________
| ID | 3MaxHIGH  |
|____|___________|
| 1  | 26.02     |
| 2  | 25.91     |
| 3  | 28.13     |
|____|___________| 
```

我想比较 ID 1,2 和 3 以确定它们之间的高值。然后，一旦我比较了 1-3，我想移动到 4 到 6，然后是 7 到 9，等等，直到我对表中包含的所有值（目前大约 400,000 个值）完成了此操作。我已经编写了使用的代码

`SELECT max(HIGH) FROM daily_high as dh1 JOIN (SELECT max(HIGH) FROM daily_high WHERE id >= dh1 AND id < (dh1.id + 3))`

这可行，但速度非常慢。我尝试使用 SELECT 语句，在该语句中确定要拉出以进行显示的列值，这意味着查询的 SELECT 和 FROM 部分之间。

我尝试使用 JOIN 将所有 3 行加入到同一张表中进行比较，但它也非常慢。慢是指在 10 秒内收集 20 行的信息。这意味着该查询在 9.65879893303 秒内分析了 60 行（20 组，每组 3 行）（我没有编造这个，我使用 microtime() 来计算它。

有人对比我更快的代码有任何建议吗？

请记住，我的实际表格与我在上面发布的表格不同，但概念是相同的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:37:08.010

如果你连续识别它，你可以做到这一点

```
SELECT floor(id/3) as range, max(HIGH) FROM daily_high GROUP BY range; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:37:12.823

为什么不使用[`DIV`](http://dev.mysql.com/doc/refman/5.0/en/arithmetic-functions.html#operator_div)运算符对聚合进行分组：

```
SELECT (id-1) DIV 3 + 1 AS ID, MAX(high) AS 3MaxHIGH 
FROM daily_high 
GROUP BY (id-1) DIV 3 
```

此查询给出相同的结果。

```
ID  3MaxHIGH
1   26.02
2   25.91
3   28.13 
```

我无法运行您的查询，我相信这个更快。

**UPD**：要确保您的范围具有有效组，请使用以下查询：

```
select id, high, (id-1) div 3 + 1 from daily_high 
```

结果：

```
id  high    (id-1) div 3 + 1
1   24.65   1
2   24.93   1
3   26.02   1
4   25.33   2
5   25.16   2
6   25.91   2
7   26.05   3
8   28.13   3
9   27.07   3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:43:09.117

用一个例子来回答更全面。下面的代码将做我认为你想要的。

```
SELECT FLOOR((row - 1) / 3), MAX(Sub1.high)
FROM (SELECT @row := @row + 1 as row, daily_high.*
FROM daily_high, (SELECT @row := 0) r) Sub1
GROUP BY FLOOR((row - 1) / 3) 
ORDER BY Sub1.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:45:47.070

下面的查询在测试表上对我有用。也许不是最好的，但其他解决方案在我的测试表上失败了。

这确实要求 ID 是连续的。还要确保将索引设置为“高”以提高速度。

```
SELECT FLOOR(T1.Id/3)+1 AS Id, ROUND(GREATEST(T1.High, T2.High, T3.High),2) AS High FROM `daily_high` T1, `daily_high` T2, `daily_high` T3
WHERE T2.Id=T1.Id+1 
AND T3.Id=T2.Id+1
AND MOD(T1.Id, 3)=1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T09:49:17.640

```
logic: if(id is divisible by 3, id/3-1, id/3)

select if(mod(id,3) = 0,floor(id/3)-1,floor(id/3)) as group_by_col , max(HIGH)
FROM daily_high GROUP BY group_by_col; 
```

# android - 触摸把手时保持滑动抽屉打开

> ID：13601627
> 
> 赞同：0
> 
> 时间：2012-11-28T09:19:56.227
> 
> 标签：android, android-layout

当滑动抽屉打开并且我触摸顶部时，如何防止滑动抽屉关闭？滑动抽屉与喜欢爬到顶部的视频播放器位于同一页面。我需要采取什么步骤。在滑动抽屉手柄中，我有一个要单击的按钮，但在我触摸按钮时它会关闭（它位于滑块手柄内的线性布局内）。欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:35:52.343

您可以在使用后[在此处](http://www.coderzheaven.com/2011/12/01/slidingdrawer-in-android-a-simple-example/)打开和关闭滑动抽屉

```
 slidingDrawer.setOnDrawerOpenListener(new OnDrawerOpenListener() {
                @Override
                public void onDrawerOpened() {
                    slideButton.setBackgroundResource(R.drawable.closearrow);
                }
            });

            slidingDrawer.setOnDrawerCloseListener(new OnDrawerCloseListener() {
                @Override
                public void onDrawerClosed() {
                    slideButton.setBackgroundResource(R.drawable.openarrow);
                }
            }); 
```

# c++ - “写”打开文件比“读”打开文件花费的时间多 10-50 倍

> ID：13601628
> 
> 赞同：0
> 
> 时间：2012-11-28T09:19:56.717
> 
> 标签：c++, file-io

我制作了一些 cpp 应用程序，用于统计 Android 设备中外部 sd 卡上的 i/o 操作。

我注意到，如果我出于读取目的打开文件需要几十微秒 - 例如 138 微秒，而出于写入目的则需要 5265 微秒，**这是 38 倍大**。

这是为什么？

**编辑**：在“O_WRONLY”的情况下 - 该文件以前不存在。

我的具体代码如下：

```
int fd = open(file_name, O_RDONLY); 
```

和

```
int fd = open(tmp_name,O_CREAT|O_TRUNC|O_WRONLY); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:21:39.197

如果文件存在，则在第二种情况下，它必须被截断。这需要额外的工作，并且可以很好地解释差异。

如果文件不存在，第一次调用会失败，第二次调用会创建文件。创建文件需要工作，而且比简单地发现它不存在要慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:22:46.983

截断意味着可能会修改 SD 卡的内容。如果截断的文件非常大，这可能需要一些时间。

无论如何，文件创建都涉及对 SD 卡的写入，因此它肯定比读取要慢。影响写入速度的另一个因素是 SD 卡的使用年限。如果有很多写入，即使是很小的写入，搜索新的未使用块可能会消耗相当长的时间。

# java - 递归查找路径

> ID：13601630
> 
> 赞同：1
> 
> 时间：2012-11-28T09:20:02.113
> 
> 标签：java, recursion

我试图在地图上的两点之间找到一条路径。

当它从循环中跳出并返回权重时，它会转到 else 语句并再次调用 find。为什么代码会这样做？

```
public int find() throws LinkException {
    Node currentNode = map.getNode(origin);
    int weight = 0;
    return find(currentNode, null, weight);
}

private int find(Node currentNode, Node pastNode, int weight) throws LinkException {
    for (Node futureNode : currentNode.getLinks()) {
        if (currentNode == futureNode || futureNode == pastNode) {
            continue;
        }
        weight += currentNode.getLink(futureNode).getWeight();
        pastNode = currentNode;
        currentNode = futureNode;
        if (currentNode.getName().equals(destination)) { // Here we reach the destination
            break;
        } else {
            find(currentNode, pastNode, weight);
        }
     }
     return weight;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:25:45.470

这就是递归的工作原理。您有多个嵌套调用`find()`同时发生。当最里面的调用完成时，下一个最里面的调用恢复其操作并继续其`for`循环的下一个操作。

顺便说一句，您忽略了对`find()`. 那看起来不对。

# sql - 在 SQL Server 中检查约束

> ID：13601639
> 
> 赞同：1
> 
> 时间：2012-11-28T09:20:22.777
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有三个表 a、b 和 c，需要添加如下约束来检查数据完整性

以下是错误的，但我需要帮助来执行以下条件。

```
ALTER TABLE [a]
ADD CONSTRAINT  UOMGROUPIG CHECK UNITOFMEASURID IN (SELECT UnitOfMeasureId FROM b  WHERE UOMGroupId=1 )

ALTER TABLE [c]
ADD CONSTRAINT  UOMGROUPIG CHECK UNITOFMEASURID IN (SELECT UnitOfMeasureId FROM b  WHERE UOMGroupId=2 ) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:28:34.070

像这样的标量值函数适用于您的示例，您可以轻松修改它并创建第二个约束：

```
CREATE FUNCTION your_schema_name.udf_Check1(
    @UNITOFMEASURID INT
)
RETURNS BIT
AS 
BEGIN

    DECLARE @returnValue BIT = 0

    SELECT  @returnValue = CASE WHEN COUNT(UnitOfMeasureId) > 0 THEN 1 ELSE 0 END
    FROM    your_schema_name.b 
    WHERE   UOMGroupId=1
    AND     @UNITOFMEASURID = UnitOfMeasureId

    RETURN @returnValue

END
GO

ALTER TABLE [a] 
ADD CONSTRAINT UOMGROUPIG 
CHECK (your_schema_name.udf_Check1(UNITOFMEASURID) = 1)
GO 
```

这是示例：**[SQL Fiddle](http://sqlfiddle.com/#!3/5f23e/3/0)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:28:40.543

您不能在 Check 约束内编写查询。相反，您可以调用用户定义的函数。

`@UOMGroupId`通过将值与 UNITOFMEASURID 一起传递，您可以在两个约束中使用相同的函数。

```
CREATE FUNCTION CheckFnctn(@UNITOFMEASURID int, @UOMGroupId int)
RETURNS int
AS 
BEGIN
    if exists(SELECT UnitOfMeasureId FROM b  WHERE UOMGroupId=@UOMGroupId 
    and UnitOfMeasureId = @UNITOFMEASURID)
    BEGIN
        RETURN 1;
    END

     RETURN 0; --missed this line
END;

ALTER TABLE [a]
ADD CONSTRAINT  UOMGROUPIG CHECK (dbo.CheckFnctn(UNITOFMEASURID, 1)=1);
ALTER TABLE [c]
ADD CONSTRAINT  UOMGROUPIG CHECK (dbo.CheckFnctn(UNITOFMEASURID, 2)=1); 
```

# java - 可选属性的类层次设计

> ID：13601641
> 
> 赞同：0
> 
> 时间：2012-11-28T09:20:26.353
> 
> 标签：java, inheritance

目前我的应用程序具有以下类层次结构：

*   “A 类”是父类
*   “B 类”是“A 类”的子类
*   “C 类”是“A 类”的子类

目前，“A 类”有一个名为“属性 D”的属性，该属性对于“B 类”是必需的，但在“C 类”中是可选的。

我可以知道表示此数据结构的最佳方式吗？这样，与其让其他人引用 ClassA.getAttributeD 而不检查它是否为 NULL，不如强制他们使用 Class B 和 Class C 来引用该字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:23:51.647

`Class B`在with中添加一个构造函数`Attribute D`。`Class C`这个属性只有一个设置器。

```
abstract class A {
   Object attributeD;

   void setAttributeD(Object attributeD) { this.attributeD = attributeD; }
   Object getAttributeD() { return attributeD; }
}

class B extends A {
   B(Object attributeD) { this.attributeD = attributeD; }
}

class C extends A {
} 
```

不要过度使用继承。通常它会使事情变得更复杂。您可以在您的问题中看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:38:57.947

看看这个：

```
Class A {
    private int d = 1;

    protected int getD() {
        return d;
    }
}

Class B extends A {
    public void doStuff() {
        B b = new B();
        System.out.println(b.getD());  
    }
}

Class C extends A {
    public void doStuff() {
        C c = new C();
        System.out.println(c.getD());  
    }
} 
```

您的主要问题是避免用户访问`attribute D`. 您可以通过设置`attribute D`为私有来做到这一点，然后声明受保护的方法来访问该属性。这样，子类将能够访问该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:41:09.200

使 A 中的字段受保护，或将其保密并使其访问者受到保护。

因此，A 类的用户不能访问该字段，但 B 类和 C 类可以使用它，并且可以为它公开访问器。

# visio - 以 visio 形状显示数据

> ID：13601642
> 
> 赞同：0
> 
> 时间：2012-11-28T09:20:35.670
> 
> 标签：visio

我正在阅读一本好书： [使用 Visio 2007 可视化信息，](https://rads.stackoverflow.com/amzn/click/com/007148261X)其中我发现了以下枢轴形状：

![数据透视表数据形状](../Images/d5043e05e446fccbac698e4c1599a4ba.png)

我的问题是：如何创建一个可以从某种类型的数据库表的数据行加载数据的形状：

![绘图中形状的数据](../Images/7751e2be863e6d4a2f7ad8654a32b6ea.png)

组织结构图向导可以在形状中插入多个数据字段，但不是本书介绍的很酷的方式......

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:44:48.557

好的

这比我想象的要容易...

使用**数据图形**时，我可以根据数据库字段或更高级的公式添加文本。

1.  显示行数据非常容易且可调整。
2.  将信息定位在形状中是具有挑战性的：房地产受到自然的限制，并且预定义的位置（例如顶部中间、左右......）会使设计选项成为一个问题。

对于 Visio 新手来说，数据图形同样令人惊叹，然而 - 太死板了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T06:09:08.113

我的响应可能为时已晚，但无论如何：我遇到了类似的问题，即显示的数据过多，最终选择在图表页面上显示“形状数据”窗口以及数据图形中的核心选择. 这允许更清晰可见的显示选项。

此外，如果您将图表作为 vdw 文件发布到 SharePoint，则可以以相同的方式显示形状数据。（这让我的客户特别高兴！）

# iphone - UIMenuController 隐藏键盘

> ID：13601643
> 
> 赞同：6
> 
> 时间：2012-11-28T09:20:36.620
> 
> 标签：iphone, uimenucontroller, iphone-softkeyboard

我目前有一个用于聊天的应用程序。我使用 UItextField 作为输入框，使用气泡显示消息，例如系统 SMS。我想在消息气泡（标签）上启用复制粘贴。问题是，当我想显示 UIMenuController 时，我需要从中复制的标签需要成为第一响应者。如果当前显示键盘，当标签成为第一响应者时，文本字段将失去焦点，因此键盘将自动隐藏。这会导致 UI 滚动并且感觉不好。无论如何，即使我需要显示菜单，我也可以保持键盘显示？

![在此处输入图像描述](../Images/acaaad4698afd0c7d0d59716ffe442fe.png)

![在此处输入图像描述](../Images/48f7d05a8e851ab1802335d0b97fbb2e.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-24T21:48:09.097

对于那些仍然在这里寻找答案的人是代码（主要思想属于 neon1，请参阅链接问题）。

这个想法如下：如果响应者不知道如何处理给定的动作，它会将其传播给链中的下一个响应者。到目前为止，我们有两个第一响应者候选人：

1.  细胞
2.  文本域

他们每个人都有独立的响应者链（实际上，不，他们确实有共同的祖先，所以他们的链有共同点，但我们不能使用它）：

```
UITextField <- UIView <- ... <- UIWindow <- UIApplication
UITableViewCell <- UIView <- ... <- UIWindow <- UIApplication 
```

因此，我们希望有以下响应链：

```
UITextField <- UITableViewCell <- ..... <- UIWindow <- UIApplication 
```

我们需要继承 UITextField （代码取自[这里](https://stackoverflow.com/questions/8380373/showing-uimenucontroller-loses-keyboard)）：

**CustomResponderTextView.h**

```
@interface CustomResponderTextView : UITextView
@property (nonatomic, weak) UIResponder *overrideNextResponder;
@end 
```

**CustomResponderTextView.m**

```
@implementation CustomResponderTextView

@synthesize overrideNextResponder;

- (UIResponder *)nextResponder {
    if (overrideNextResponder != nil)
        return overrideNextResponder;
    else
        return [super nextResponder];
}

@end 
```

这段代码非常简单：如果我们没有设置任何自定义的下一个响应者，它会返回真正的响应者，否则返回我们的自定义响应者。

现在我们可以在我们的代码中设置新的响应者（我的示例添加了自定义操作）：

**CustomCell.m**

```
@implementation CustomCell
- (BOOL) canBecomeFirstResponder {
    return YES;
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    return (action == @selector(copyMessage:) || action == @selector(deleteMessage:));
}
@end

- (void) copyMessage:(id)sender {
   // copy logic here
}

- (void) deleteMessage:(id)sender {
   // delete logic here
} 
```

**控制器**

```
- (void) viewDidLoad {
    ...
    UIMenuItem *copyItem = [[UIMenuItem alloc] initWithTitle:@"Custom copy" action:@selector(copyMessage:)];
    UIMenuItem *deleteItem = [[UIMenuItem alloc] initWithTitle:@"Custom delete" action:@selector(deleteMessage:)];
    UIMenuController *menu = [UIMenuController sharedMenuController];
    [menu setMenuItems:@[copyItem, deleteItem]];
    ...
}

- (void) longCellTap {
    // cell is UITableViewCell, that has received tap
    if ([self.textField isFirstResponder]) {
        self.messageTextView.overrideNextResponder = cell;
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuDidHide:) name:UIMenuControllerDidHideMenuNotification object:nil];
    } else {
        [cell becomeFirstResponder];
    }
}

- (void)menuDidHide:(NSNotification*)notification {
    self.messageTextView.overrideNextResponder = nil;
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIMenuControllerDidHideMenuNotification object:nil];
} 
```

最后一步是让第一响应者（在我们的案例中为文本字段）向下一个响应者（在我们的案例中为单元格）传播`copyMessage:`和`deleteMessage:`操作。正如我们所知，iOs 发送`canPerformAction:withSender:`知道，如果给定的响应者可以处理该动作。

我们需要修改`CustomResponderTextView.m`并添加以下函数：

**CustomResponderTextView.m**

```
...
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if (overrideNextResponder != nil)
        return NO;
    else
        return [super canPerformAction:action withSender:sender];
}
... 
```

如果我们设置了自定义的下一个响应者，我们会将所有操作发送给它（您可以修改这部分，如果您需要对 textField 进行一些操作），否则我们会询问我们的超类型是否可以处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T12:41:28.313

您可以尝试子类化您的 uitextfield 并覆盖第一响应者。如果 uitextfield 是第一响应者并覆盖下一个响应者，请签入您的长按手势处理程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-04T11:59:49.307

[![在此处输入图像描述](../Images/5f2565ee3e9ad30fae0e399bcefaf22b.png)](https://i.stack.imgur.com/4LQYA.png)

刚刚通过 Nikita Take 的解决方案在 Swift 中完成。

我有一个聊天屏幕，其中有一个用于文本输入的文本字段和一个用于消息（它们的显示）的标签。当您点击消息标签时，应出现 MENU（复制/粘贴/...），但如果键盘已经打开，则必须保持打开状态。

我对输入文本字段进行了子类化：

```
import UIKit

class TxtInputField: UITextField {

weak var overrideNextResponder: UIResponder?

override func nextResponder() -> UIResponder? {
  if overrideNextResponder != nil {
    return overrideNextResponder
  } else {
    return super.nextResponder()
  }
}

override func canPerformAction(action: Selector, withSender sender: AnyObject?) -> Bool {
  if overrideNextResponder != nil {
    return false
  } else {
    return super.canPerformAction(action, withSender: sender)
  }
 }
} 
```

然后在我的自定义消息标签（UILabel 的子类，但在您的情况下它可以是视图控制器）中，它具有启动 UIMenuController 的逻辑，我在之后添加

```
if recognizer.state == UIGestureRecognizerState.Began { ... 
```

以下块

```
if let activeTxtField = getMessageThreadInputSMSField() {
  if activeTxtField.isFirstResponder() {
    activeTxtField.overrideNextResponder = self
  } else {
    self.becomeFirstResponder()
  }
} else {
  self.becomeFirstResponder()
} 
```

当用户在 UIMenuController 之外点击时

```
func willHideEditMenu() {
    if let activeTxtField = getMessageThreadInputSMSField() {
      activeTxtField.overrideNextResponder = nil
   }
    NSNotificationCenter.defaultCenter().removeObserver(self, name: UIMenuControllerWillHideMenuNotification, object: nil)
  } 
```

您必须获得对 activeTxtField 对象的引用。我这样做是迭代导航堆栈，获取包含所需文本字段的视图控制器，然后使用它。

以防万一您需要它，这里也是该部分的片段。

```
var activeTxtField = CutomTxtInputField()
  for vc in navigationController?.viewControllers {
    if vc is CustomMessageThreadVC {
     let msgVC = vc as! CustomMessageThreadVC         
     activeTxtField = msgVC.textBubble
   }
} 
```

# jquery - 如何在 jQuery 中使用正则表达式验证多个 IP 地址以及 IPv6？

> ID：13601646
> 
> 赞同：0
> 
> 时间：2012-11-28T09:20:51.067
> 
> 标签：jquery, regex, asp.net-mvc

在我的项目中，我能够像这样验证 IP 地址：

```
function (value, element) {
  var octet = '(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])';
  var ip = '(?:' + octet + '\\.){3}' + octet;
  var ipRE = new RegExp('^' + ip + '$');
  return (ipRE.test(value));
} 
```

目前，它接受单个 IPv4 版本地址。我也想接受多种 IPv4/IPv6 版本格式。

例子：

```
'0:0:0:0:0:ffff:192.1.56.10,172.30.60.1,fe80:41b2:41b2:935c:b113:da1a' 
```

我正在使用 jQuery.validator API 来执行验证。

请提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:35:06.770

用逗号分割输入会更简单，然后解析每个部分：找出地址是 IPv4 还是 IPv6，然后使用正确的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:24:18.450

我发现这个正则表达式有时对 IP 地址验证很有用

(?2[0-4]\d|25[0-5]|[01]?\d\d?).(?2[0-4]\d|25[0-5]|[01] ?\d\d?).(?2[0-4]\d|25[0-5]|[01]?\d\d?).(?2[0-4]\d|25[ 0-5]|[01]?\d\d?)

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:34:26.850

**编辑**：在同一功能中适用于 v4 和 v6。缺点：依赖PHP5。

```
<?php
function checkIP($IPaddr) {
     $packetNot = inet_pton($IPaddr);
     if ($packetNot === FALSE) return false;
     if (inet_ntop($packetNot) === FALSE) return false;
     return true;
} ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T06:49:27.553

以下代码用于在 jquery 中同时接受 IPv6 和 IPv4 版本。

```
 function checkipv6(str) {
            var perlipv6regex = "^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$";
            var aeronipv6regex = "^\s*((?=.*::.*)(::)?([0-9A-F]{1,4}(:(?=[0-9A-F])|(?!\2)(?!\5)(::)|\z)){0,7}|((?=.*::.*)(::)?([0-9A-F]{1,4}(:(?=[0-9A-F])|(?!\7)(?!\10)(::))){0,5}|([0-9A-F]{1,4}:){6})((25[0-5]|(2[0-4]|1[0-9]|[1-9]?)[0-9])(\.(?=.)|\z)){4}|([0-9A-F]{1,4}:){7}[0-9A-F]{1,4})\s*$";

            var regex = "/" + perlipv6regex + "/";
            return (/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/.test(str));
}

function (value, element) 
{

            var returnvalue;
            alert("IPcheck " + value);
            var result = value.split(",");

            for (i = 0; i < result.length; i++) {

                var octet = '(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])';

                if (result[i].split(":").length == 1) {
                    var ip = '(?:' + octet + '\\.){3}' + octet;
                    var ipRE = new RegExp('^' + ip + '$');
                    returnvalue = ipRE.test(result[i]);

                }
                else {
                    returnvalue = checkipv6(result[i]);
                }
                // var octet= '([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])'
                //var octet = '(?2[0-4]\d|25[0-5]|[01]?\d\d?).(?2[0-4]\d|25[0-5]|[01]?\d\d?).(?2[0-4]\d|25[0-5]|[01]?\d\d?).(?2[0-4]\d|25[0-5]|[01]?\d\d?)'
                //                var ip = '(?:' + octet + '\\.){3}' + octet;
                //                var ipRE = new RegExp('^' + ip + '$');
                if (returnvalue == false) {
                    return returnvalue;
                }
            }
            return returnvalue;
        },
        "<br/>Please enter a Valid IP Address"
    ); 
```

# java - httpPost 无法使用 asynctask - 给出无效索引，大小为 0 异常

> ID：13601647
> 
> 赞同：0
> 
> 时间：2012-11-28T09:20:52.907
> 
> 标签：java, android, exception, http-post

为了避免在 UI 线程中执行与 http 相关的事情，我在 asynctask 中迁移了我的代码，在此之前，**它在 3.0 之前的版本上运行良好**——但是，在将代码复制粘贴到 asynctask 之后，它开始给出`invalid index, size is 0 exception`. 每当我需要使用我正在应用调用的方法时——

`new dataRetrievalViaAsyncTask().execute(url, null, null);`--

下面怎么了？

```
class dataRetrievalViaAsyncTask extends AsyncTask<String, Void, Void>
{

    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(String... f_url)
    {
        Log.i("tag", "inside doInBackground");
        String url2 = f_url[0];
        Log.i("tag", url2);

        HttpClient httpclient = new DefaultHttpClient();
        Log.i("tag",    "done : HttpClient httpclient = new DefaultHttpClient();");

        HttpPost httppost = new HttpPost(url2);
        Log.i("tag", "done : HttpPost httppost = new HttpPost(url);");

        try
        {

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            Log.i("tag", "done : httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));");

            HttpResponse response = httpclient.execute(httppost);
            Log.i("tag", "done : HttpResponse response = httpclient.execute(httppost);");

            HttpEntity entity = response.getEntity();
            Log.i("tag", "done : HttpEntity entity = response.getEntity();");

            is = entity.getContent();
            Log.i("tag", "after : is = entity.getContent();");

        } catch (Exception e)
        {
            Log.e("log_tag", "Error in http connection", e);   
        }
        // convert response to string
        return null;

    }
    protected void onPostExecute()
    {
        try
        {
            Log.i("tag","before : BufferedReader reader = new BufferedReader(new Inp");
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            String line = "0";
            while ((line = reader.readLine()) != null)
            {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e)
        {
                Log.e("log_tag", "Error in http connection", e);   
        }

        try
        {
            Log.i("tag", "before : jsons ");
            jArray = new JSONArray(result);
            JSONObject json_data = null;

            Log.i("tag", Integer.toString(jArray.length()));

            for (int i = 0; i < jArray.length(); i++)
            {
                json_data = jArray.getJSONObject(i);

                uid = json_data.getInt("uid");
                item1= json_data.getString("item1");
                item2 = json_data.getString("item2");
                item3 = json_data.getString("item3");
                item4 = json_data.getString("item4");
                item5 = json_data.getString("item5");
                item6 = json_data.getString("item6");
                favorited = json_data.getString("favorited");

                currentList.add(new itemClass(uid, item1 item2)); //there is a constructor for this in the itemClass

                itemClass toSendToOffline = new itemsClass(uid, item1, item2, item3, item4, item5, item6, favorited);
                myDBHelper.insertFromOnlineToDBtoSendToOffline();

            }

        } catch (JSONException e1)
        {
            Toast.makeText(getBaseContext(), "Not Found", Toast.LENGTH_LONG).show();
        } catch (ParseException e1)
        {
            e1.printStackTrace();
        }
        super.onPostExecute(null);
    }
} 
```

（主要是代码停在 -

```
HttpResponse response = httpclient.execute(httppost); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:02:09.447

```
 class dataRetrievalViaAsyncTask extends AsyncTask<Void, Void, String>
{
    String URL = "";

    public dataRetrievalViaAsyncTask( String url )
        {
            URL = url;
        }

    @Override
    protected void onPreExecute()
        {
        }

    @Override
    protected String doInBackground(Void... f_url)
        {
            String result="";
            try
                {
                    result=fetchdataFromServer(URL);
                }
            catch (JSONException e)
                {
                    e.printStackTrace();
                }
            return result;
        }

    protected void onPostExecute(String result)
        {
            // See your results as string //result
        }

    public JSONObject getJsonObjectToRequestToServer(String plid) throws JSONException
        {
            JSONObject parms = new JSONObject();
            parms.put("user_id", "");
            parms.put("app_key", "xyz");
            parms.put("secret", "abc");
            parms.put("token", "");
            parms.put("playurl", "1");
            parms.put("mode", "playlistdetail");
            parms.put("playlist_id", plid);
            return parms;
        }

    public String fetchdataFromServer(String url) throws JSONException
        {
            String stringresponce = null;
            try
                {
                    HttpClient httpClient = new DefaultHttpClient();
                    HttpPost httpPost = new HttpPost(URL);

                    JSONObject parms = getJsonObjectToRequestToServer("1");

                    StringEntity se;

                    se = new StringEntity(parms.toString());
                    httpPost.setEntity(se);

                    httpPost.setHeader("Content-type", "application/json");

                    @SuppressWarnings("rawtypes")
                    ResponseHandler responseHandler = new BasicResponseHandler();
                    stringresponce = httpClient.execute(httpPost, responseHandler);
                }
            catch (UnsupportedEncodingException e)
                {
                    e.printStackTrace();
                }
            catch (ClientProtocolException e)
                {
                    e.printStackTrace();
                }
            catch (IOException e)
                {
                    e.printStackTrace();
                }
            return stringresponce;
        }
    } 
```

将此代码放入您的代码中并传递您需要的参数这是我向服务器请求并将json响应作为字符串从***结果***变量传递参数到您的url的方式，因为我通过制作json对象传递然后将它们转换为字符串

然后像这样执行…………

```
dataRetrievalViaAsyncTask asyncTask=new dataRetrievalViaAsyncTask(Yoururl);
asyncTask.execute(); 
```

希望这对您有帮助，如果您有任何问题，请在此处发布，谢谢......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:33:38.950

我看不到在任何地方初始化的 nameValuePairs 变量，这实际上是造成问题的原因。

# iphone - 使用图形 api 在 facebook 中标记几个朋友

> ID：13601656
> 
> 赞同：1
> 
> 时间：2012-11-28T09:21:23.527
> 
> 标签：iphone

`[delegate.facebook requestWithGraphPath:[NSString stringWithFormat:@"%@/tags?tags=[{\"tag_uid\":\"%@\"},{\"tag_uid\":\"%@\"}]&access_token=%@", photoID, @"100004392816950", @"100001982573649", delegate.facebook.accessToken] andParams:params andHttpMethod:@"POST" andDelegate:self];`

我使用此代码标记几个朋友，但它不起作用。

当我运行程序时，出现以下错误：

```
ErrorInnerErrorKey=Error 
Domain=NSURLErrorDomain 
Code=-1000 "bad URL" 
UserInfo=0x14cabf10 
```

# .net - WS 联合身份验证模块如何验证令牌

> ID：13601657
> 
> 赞同：0
> 
> 时间：2012-11-28T09:21:26.887
> 
> 标签：.net, wif, adfs

我正在尝试了解 WIF 和 AD FS。我找到了很多有用的信息，但找不到任何关于 WS FAM 如何验证从 STS 收到的令牌的详细信息。

我找到了解释该过程的[序列图](http://msdn.microsoft.com/en-us/library/Ff359114.1a314389-f570-418a-a34e-31ce00e0bdc6%28l=en-us%29.png)，但在第 6 步中，只有一个注释表明令牌验证由 FAM 处理。我也在这方面找到[了一些资源](http://msdn.microsoft.com/en-us/library/ee517293.aspx)，但它似乎不太相关。

我想知道的是，WIF 是离线验证令牌（基于与发行人建立信任时创建的一些规则等）还是在线验证令牌（通过询问发行人本身）。我还应该关心吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:35:51.970

我认为你不应该关心:-)，但我们很好奇，不是吗？了解事物的实际运作方式是有价值的。

验证发生在与 STS（例如 ADFS）没有联系的应用程序上，这是因为一般来说，令牌是数字签名的（并且可以选择加密），并且 WIF 具有检查其完整性的所有信息和手段。

可以在 Vittorio 的书中找到 WIF 内部的重要来源：http: [//www.amazon.com/Programming-Windows%C2%AE-Identity-Foundation-Dev/dp/0735627185](https://rads.stackoverflow.com/amzn/click/com/0735627185)

有很多关于所有模块如何交互和工作的信息。

# javascript - 如果不存在，则声明此类函数

> ID：13601659
> 
> 赞同：9
> 
> 时间：2012-11-28T09:21:32.823
> 
> 标签：javascript

> **可能重复：**
> [如果函数不存在写入函数 - javascript](https://stackoverflow.com/questions/8839112/if-function-does-not-exist-write-function-javascript)

我遇到了调用某个函数 X 的情况。在一些回发之后，这个函数不再被声明，但仍然被代码调用，显然我得到 js 错误说`X is not defined`。（如果您愿意，可以将其称为错误）但我无法控制不调用它或更改调用功能。

我想做的是一个故障保险，如果它不存在，它将声明这样的功能。所以逻辑是：

如果未声明函数，则声明一个。

这在javascript中是否可能，即在全局范围内动态声明/注册一个函数？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T09:27:59.733

```
if (typeof window.functionX === 'undefined') {
    window.functionX = function() {
      // fallback code here
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T09:25:19.277

是的

```
if(!myFunc) {
  myFunc = function() {}
} 
```

# dart - Dart httpServer 404 未找到页面

> ID：13601662
> 
> 赞同：3
> 
> 时间：2012-11-28T09:21:47.370
> 
> 标签：dart

Dart 中如何使用 HTTP 服务器完成 404 重定向？

伪代码：

server.addRequestHandler(notFound, redirectTo(...));

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:39:10.260

如果要进行[URL 重定向](http://en.wikipedia.org/wiki/URL_redirection)，可以使用：

*   `Refresh`标题：

```
server.addRequestHandler(notFound, (HttpRequest request, HttpResponse response) {
  response.statusCode = HttpStatus.NOT_FOUND;
  response.headers.set("Refresh", "0; url=http://www.example.com/");
  response.outputStream.close();
}); 
```

*   如果您想在重定向之前显示一些文本，则进行[元刷新：](http://en.wikipedia.org/wiki/HTTP_refresh)

```
server.addRequestHandler(notFound, (HttpRequest request, HttpResponse response) {
  response.statusCode = HttpStatus.NOT_FOUND;
  response.headers.set(HttpHeaders.CONTENT_TYPE, 'text/html');
  response.outputStream.writeString(
      '<!DOCTYPE html>'
      '<meta http-equiv="Refresh" content="5; url=\'http://example.com/\'">'
      'Page requested cannot be found. You will be redirected in few seconds...'
  );
  response.outputStream.close();
}); 
```

# javascript - 在特定时间间隔后调用 javascript 函数

> ID：13601664
> 
> 赞同：0
> 
> 时间：2012-11-28T09:21:48.987
> 
> 标签：javascript, asp.net, ajax

我正在为 JavaScript 编写代码。在其中我正在尝试使用 AJAX 检查远程 asp.net 页面（aspx）连接。但我还想检查这个调用将只持续 2 分钟和 10 秒时间的条件间隔。不是那样，而是像我在想的那个逻辑， If flag=true if seconds < 120 setInterval("GetFeed()", 2000);

任何人都可以请帮助我。

这是我的连接检查代码，

```
 var learnerUniqueID1;
        var flag='true';

        function fnCheckConnectivity(coursId) 
        {
            //here will the remote page url
            var url = 'http://<%=System.Web.HttpContext.Current.Request.UrlReferrer.Host+System.Web.HttpContext.Current.Request.ApplicationPath%>/TestConn.aspx'; 
            //alert(url);
            if (window.XMLHttpRequest) {
                learnerUniqueID1 = new XMLHttpRequest();
            }
            else if (window.ActiveXObject) {
                learnerUniqueID1 = new ActiveXObject("Microsoft.XMLHTTP");
            }
            else
            {
                alert("Your browser does not support XMLHTTP!");
            }
            learnerUniqueID1.open("POST", url, true);
            learnerUniqueID1.onreadystatechange = callbackZone;
            learnerUniqueID1.send(null);
        }

        function callbackZone() 
        {
            if (learnerUniqueID1.readyState == 4) 
            {
                if (learnerUniqueID1.status == 200) 
                {
                    //update the HTML DOM based on whether or not message is valid
                    parseMessageZone();
                }
                else
                {   
                    flag='false';                       
                    alert('We have detected a break in your web connection, \n please login again to continue with your session');
                }
            }
        }

        function parseMessageZone() 
        {
            var result = learnerUniqueID1.responseText;
        }        

        function makePayment(obj)
        {
            try
            {
                var Id = obj.attributes["rel"].value
                //alert(Id);
                var res=confirm('Want to Continue.');
                if(res == true)
                {
                    startRequest(Id);
                    //return true;
                }
                else
                {
                    return false;
                }
            }
            catch(Error)
            {

            }
        }

        function startRequest(Id)
        {
            var milliseconds = 10000;
            currentDate = new Date();
            // start request
            pollRequest(milliseconds, false, currentDate, 120000,Id);
        }

        function pollRequest(milliseconds, finshed, date, timeout,Id)
        {
            if((new Date()).getTime() > date.getTime()+timeout)
            {
                // 2-minute timeout passed
                return;
            }
            if(!finished){
                  setTimeout(function(){
                     if(//check backend to see if finished)     //which method will go here
                     {   
                        fnCheckConnectivity(coursId);
                         pollRequest(milliseconds, true, date, timeout,Id);
                     }
                     else{
                         pollRequest(milliseconds, false, date, timeout,Id)
                     }
                  }, milliseconds);
                  return;
            }
            // when code reaches here, request has finished

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:39:43.517

我不确定我是否理解正确，但是如果您尝试每十秒轮询一次请求的状态，为什么不尝试这样的事情呢？

```
function startRequest(){
    var milliseconds = 10000;
    currentDate = new Date();
    timeout = 120000;
    // start request
    pollRequest(milliseconds, false, currentDate, timeout);
}

function pollRequest(milliseconds, finshed, date, timeout){

    if((new Date()).getTime() > date.getTime()+timeout){
        // 2-minute timeout passed
        return;
    }

    if(!finished){
          setTimeout(function(){
             if(//check backend to see if finished){
                 pollRequest(milliseconds, true, date, timeout);
             }
             else{
                 pollRequest(milliseconds, false, date, timeout)
             }
          }, milliseconds);
          return;
    }

    // when code reaches here, request has finished
} 
```

请注意，这是一个递归函数，浏览器有递归限制。此外，关于 2 分钟超时，您可以将超时设置为 ajax 预过滤器或添加在每次递归时添加的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T10:09:36.007

如果我正确理解想要每 10 秒执行 2 分钟的任务。

```
var interval = setInterval(function(){
// do stuff
},10000); // execute every 10 seconds

setTimeout(function(){
    clearInterval(interval);
},120000); // Remove interval after 2 minutes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:28:33.937

您不希望脚本在服务器/客户端上连续运行。您应该查找 chronjob for linux 或 scheduler for windows。

我没有给你一个合适的解决方案，只是一个替代方案。但是，对于您似乎想要做的事情，这似乎是正确的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:31:55.207

而不是您所描述的推送请求，其中客户端用户等待一定时间然后发出请求，您应该使用拉取请求。

为此，您可以对服务器进行 AJAX 调用，然后服务器可以等待（并可能在等待时执行其他操作），然后在数据准备好时将某些内容返回给用户。

# c# - 如何读取对象变量的字节（现在它在 RAM 中）并通过它在 C# 中的字节重新创建对象？

> ID：13601666
> 
> 赞同：0
> 
> 时间：2012-11-28T09:21:58.120
> 
> 标签：c#, memory-access

我想在 C# okey 中访问对象的字节，例如：

在 WCF 中序列化一个类，序列化程序读取类对象的所有字节，最后是 SOAP 消息！

像这样的事情你知道一种读取对象字节并通过其字节重新创建对象的方法

```
//x_obj created and we allocate an address & size of RAM (memory) to it Now its byts structure is in the RAM

X_calss x_obj = new X_class(); 

//and now we want to read the x_obj bytes in RAM
unsafe byte[] READ(X_class x_obj){
 xobj_pointer = &x_obj;//pointer to address of obj in RAM
 byte[] xobj_bytes = read_from(xobj_pointer,sizeof(x_obj));//Some Way To Read Byte of x_obj
 return xobj_bytes;
}
// and now we want to recreate class by it bytes stream
unsafe X_class Creative(byte[] xobj_bytes){
 x_pointer = Memory_allocate(sizeof(X_class));//reserve an address of RAM
 write_to(x_pointer,xobj_bytes);//write bytes to RAM 
 X_class x_obj = (X_class)*(x_pointer);//recreate the class by content of pointer
 return x_obj;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T09:28:20.513

> 例如，我想在 C# okey 中访问对象的字节

你绝对没有。*刚开始的*两个原因：

*   服务器和客户端上的对象布局很可能不同，特别是如果一个使用 64 位 CLR 而另一个使用 32 位 CLR
*   对象包含特定于进程的数据，例如同步块，您无法合理地传播这些数据
*   “源”机器上的任何引用都可能在“目标”机器上无效

考虑这个简单类中涉及的字节：

```
class Foo
{
    string name;
} 
```

这里数据的“字节”只包含一个引用。出于这个问题的目的，让我们假设一个引用实际上是一个简单的指针。当您将该地址复制到另一个进程时，指向内存地址 0x12345678 的指针*不太可能引用具有相同内容的字符串。*

这种事情正是我们有序列化程序的原因：获取内存本身的副本根本不够好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:39:56.953

C# 在内存操作方面并不等同于 C。

1.用Serializable属性标记对象的类。

2.序列化为字节：

```
 public byte[] ObjectToByteArray(Object obj)
{
    BinaryFormatter bf = new BinaryFormatter();
    MemoryStream ms = new MemoryStream();
    bf.Serialize(ms, obj);
    return ms.ToArray();
} 
```

3.反序列化为对象：

```
 public object BytesToObject(byte[] bytes)
{
        MemoryStream ms = new MemoryStream(bytes);
        BinaryFormatter bf= new BinaryFormatter();
        ms.Position = 0;
        return bf.Deserialize(ms);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T10:33:16.347

虽然同意 Jon Skeet 和 ValtasarIII，但如果您的数据类型是*结构*（具有已知布局）、仅包含*值类型*并且您允许`unsafe`代码，则可以（以一种可怕的方式）访问变量的原始字节.

接下来的内容当然不是您想要用来跨越机器边界的技术（也不应该真正使用它）。

给定一个名为`TestStruct`defined的结构，如下所示

```
[StructLayout(LayoutKind.Sequential)]
public struct TestStruct
{
    public int A;
    public int B;
} 
```

可以像这样获得其内容的原始字节

```
private static unsafe byte[] GetBytes(TestStruct item)
{
    //Figure out how big TestStruct is
    var size = Marshal.SizeOf(item);
    //Make an array large enough to hold all the bytes required
    var array = new byte[size];
    //Get a pointer to the struct
    var itemPtr = &item;
    //Change the type of the pointer from TestStruct* to byte*
    var itemBytes = (byte*) itemPtr;

    //Iterate from the first byte in the data to the last, copying the values into our
    //    temporary storage
    for (var i = 0; i < size; ++i)
    {
        array[i] = itemBytes[i];
    }

    //Return the bytes that were found in the instance of TestStruct
    return array;
} 
```

我们可以像这样建造一个新的

```
private static unsafe TestStruct Reconstitute(IList<byte> data)
{
    //Figure out how big TestStruct is
    var size = Marshal.SizeOf(typeof(TestStruct));

    //If the data we've been presented with is either too large or too small to contain
    //    the data for exactly one TestStruct instance, throw an exception
    if (data.Count != size)
    {
        throw new InvalidOperationException("Amount of data available is not the exact amount of data required to reconstitute the item");
    }

    //Make our temporary instance
    var item = new TestStruct();
    //Get a pointer to our temporary instance
    var itemPtr = &item;
    //Change the type of the pointer to byte*
    var itemBytes = (byte*) itemPtr;

    //Iterate from the first byte in the data to the last, copying the values into our
    //    temporary instance
    for (var i = 0; i < size; ++i)
    {
        itemBytes[i] = data[i];
    }

    //Return our reconstituted structure
    return item;
} 
```

用法：

```
static void Main()
{
    var test = new TestStruct
    {
        A = 1,
        B = 3
    };

    var bytes = GetBytes(test);
    var duplicate = Reconstitute(bytes);

    Console.WriteLine("Original");
    PrintObject(test, 1);

    Console.WriteLine();
    Console.WriteLine("Reconstituted");
    PrintObject(duplicate, 1);

    Console.ReadLine();
} 
```

并且，为了完整起见，代码`PrintObject`

```
static void PrintObject(object instance, int initialIndentLevel)
{
    PrintObject(instance, initialIndentLevel, 4, ' ', new List<object>());
}

static void PrintObject(object instance, int level, int indentCount, char paddingChar, ICollection<object> printedObjects)
{
    if (printedObjects.Contains(instance))
    {
        return;
    }

    var tabs = "".PadLeft(level * indentCount, paddingChar);
    var instanceType = instance.GetType();
    printedObjects.Add(instance);

    foreach (var member in instanceType.GetMembers())
    {
        object value;
        try
        {
            switch (member.MemberType)
            {
                case MemberTypes.Property:
                    var property = (PropertyInfo) member;
                    value = property.GetValue(instance, null);
                    break;
                case MemberTypes.Field:
                    var field = (FieldInfo) member;
                    value = field.GetValue(instance);
                    break;
                default:
                    continue;
            }
        }
        catch
        {
            continue;
        }

        if (value == null || value.GetType().IsValueType || value.GetType().ToString() != value.ToString())
        {
            Console.WriteLine("{2}{0}: {1}", member.Name, (value ?? "(null)"), tabs);

        }
        else
        {
            var vals = value as IEnumerable;

            if (vals != null)
            {
                var index = 0;
                var indented = "".PadLeft((level + 1) * indentCount, paddingChar);
                Console.WriteLine("{2}{0}: {1}", member.Name, value, tabs);

                foreach (var val in vals)
                {
                    Console.WriteLine("{1}[{0}]:", index++, indented);
                    PrintObject(val, level + 2, indentCount, paddingChar, printedObjects);
                }

                if (index == 0)
                {
                    Console.WriteLine("{0}(No elements)", indented);
                }
            }
            else
            {
                PrintObject(value, level + 1, indentCount, paddingChar, printedObjects);
            }
        }
    }
} 
```

# ruby-on-rails - Rspec 生成的规范失败

> ID：13601672
> 
> 赞同：0
> 
> 时间：2012-11-28T09:22:16.827
> 
> 标签：ruby-on-rails, rspec, rspec-rails

我已将以下内容添加到我的 application.rb 文件中

```
config.generators do |g|
    g.test_framework :rspec,

        :fixtures => true,
        :view_specs => false,
        :helper_specs => false,
        :routing_specs => false,
        :controller_specs => true,
        :request_specs => true

    g.fixture_replacement :factory_girl, :dir => "spec/factories"
end 
```

然后我生成了一个控制器

```
$rails g controller home index 
```

这在 spec/controllers/home_controller_spec.rb 中生成了如下所示的规范

```
describe HomeController do

  describe "GET 'index'" do
    it "returns http success" do
      get 'index'
      response.should be_success
    end
  end

end 
```

这是 rSpec 生成的默认代码。我访问时可以看到页面

```
http://localhost:3000/home/index 
```

在我的浏览器中

然后当我跑

```
$bundle exec rspec 
```

我收到这个错误

```
/Applications/MAMP/htdocs/2012/myapp/spec/controllers/home_controller_spec.rb:3:in `<top (required)>': uninitialized constant HomeController (NameError)
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
from /Users/bobwood/.rvm/gems/ruby-1.9.3-p194@myapp/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

这个错误是什么意思，我该如何解决？

编辑： routes.rb 有一行

```
get "home/index" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:40:48.887

此错误意味着您运行的规范文件不知道您的`HomeController`类 - 它不包括在内。

我认为您选择了一种更困难的方式来在 Rails 中使用 RSpec。最简单的方法是使用[rspec-rails](https://github.com/rspec/rspec-rails)。我查看了我的控制器规格，他们做的第一件事是包含`rspec_helper.rb`来自 rspec-rails 的。我猜这个文件是用来加载你测试所需的所有 Rails 类的。

要安装 rspec-rails，您只需将其添加到 Gemfile 并运行：

`rails generate rspec:install`

# asp.net-mvc-3 - MVC4 CheckboxFor HtmlAttributes 问题

> ID：13601675
> 
> 赞同：0
> 
> 时间：2012-11-28T09:22:22.287
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4, html

我有一个这样的复选框，其中包含定义的值和文本。

```
@Html.CheckBoxFor(model => model.UserGroup.administration, new[] { new SelectListItem { Text = "True", Value = "1" }, new SelectListItem { Text = "False", Value = "0" } }) 
```

我想添加另一个 html 属性，即“id=1”，但如果我尝试在 new[] {...} 中这样做，它会给我一个错误，我收到以下错误： -typed array”有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:36:43.883

如果你想手动设置控件 ID，`MyClass`你可以这样做：

```
@Html.CheckBoxFor(model => model.UserGroup.administration, new { id = "MyClass" }) 
```

`model.UserGroup.administration`如果您是布尔值，则应自动映射其他属性...

# linux - 在 linux 上以编程方式查看 microsoft office 文件

> ID：13601690
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:23:10.863
> 
> 标签：linux, printing, ms-office

我想编写一个桌面程序来在 linux 机器上打印 microsoft office 文件（doc、docx、xls 和 xlxs）。但我不知道如何在不损坏输出的情况下打印它们。

有没有办法将文件打印或转换为其他格式，与 microsoft office 上的视图相同 %100？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:48:28.847

libreoffice API 可能是一个很好的起点，尤其是示例： [http ://api.libreoffice.org/](http://api.libreoffice.org/)

我自己没有使用过 API，但很长一段时间以来一直使用 open/libre-office 作为 word 的替代品。

但是，你说“100%”和在办公室一样吗？我不会对此有信心。根据文档的不同，它可能没问题，但有些东西似乎转换得不好。如果您在 linux 上工作，那么您安装的字体可能不会与制作文档的任何 windows/mac 机器相同。

如果您正在处理的文档都是相同/相似的布局/模板，并且您可以先测试一些，那应该没问题。但是，如果您正在处理任何类型的 word 文档，如果没有一点人工输入，有些文档可能无法完全转换。取决于你能容忍多少差异。如果您想要跨平台完全一致的打印，我想这就是 pdf 的用途。

# python - django 交易

> ID：13601693
> 
> 赞同：1
> 
> 时间：2012-11-28T09:23:22.427
> 
> 标签：python, django

我有一个代码，像这样

```
def many_objects_saving(list_of_objects):
    for some_object in list_of_objects:
        # do smth with an object
        some_object.save() 
```

据我所知，django 每次在代码中到达 save() 时都会访问数据库。所以这里有两个问题：

1.  如果我将在另一个函数中使用这个函数并用`transaction.commit_on_success`或`transaction.commit_manually`装饰器包装它，django 会在一个事务中完成所有保存并更少地访问数据库（在一个函数内）吗？

例子：

```
def resave_objects(model, condition):
    list_of_objects = model.objects.filter(**condition)
    many_objects_save(list_of_objects)

@transaction.commit_on_success
def many_objects_save(list_of_objects):
    for some_object in list_of_objects:
        # do smth with an object
        some_object.save() 
```

2\. 如果是这样，对于大型查询集会更好吗？谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:05:32.707

所有保存都将包装到单个事务中，但不在单个查询中。使用事务不会更改您执行的数字查询。

事务不是为了性能，而是为了数据完整性。如果您将视图包装在事务中并在某个时刻失败（可能中间的某些数据是错误的，您无法从错误中恢复），则可能会中止事务，并且事务中之前的查询都没有将对数据库产生任何影响。这样，您可以确保您没有来自失败请求的半生不熟的数据。

如果您的问题是大量保存的性能，您可以使用批量删除/创建方法。这是[我的一个项目中的一个例子](https://github.com/supelec-rezo/yoppi/blob/master/yoppi/indexer/app.py#L232)。这个想法是您在一个查询中删除所有对象，然后在一个查询中重新创建它们的所有新值。它不会在所有情况下都有效，但它可能会奏效。

# java - 动作监听器不起作用

> ID：13601696
> 
> 赞同：1
> 
> 时间：2012-11-28T09:23:29.443
> 
> 标签：java, swing, user-interface, jpanel, actionlistener

我正在尝试为一个非常基本的统计计算器程序创建一个自定义面板。我有从 1 到 9 的按钮来输入数字，以及一个实现 `ActionListener`处理它们的内部类。数字应该显示在`JLabel`被叫上`display`。该程序编译正确，但是，侦听器似乎不起作用，当我单击这些按钮时没有任何反应。这是代码：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingConstants;
import javax.swing.border.BevelBorder;
import javax.swing.border.EtchedBorder;
import javax.swing.border.TitledBorder;

@SuppressWarnings("serial") public class StatCalcPanelBeta extends JPanel{

    private class InputHandler implements ActionListener{
        @Override public void actionPerformed(ActionEvent evt){
            String str = evt.toString();
            switch(str){
            case "1":
                inputString.append("1");
                inputField.setText(inputString.toString());
                break;
            case "2":
                inputString.append("2");
                inputField.setText(inputString.toString());
                break;
            case "3":
                inputString.append("3");
                inputField.setText(inputString.toString());
                break;
            case "4":
                inputString.append("4");
                inputField.setText(inputString.toString());
                break;
            case "5":
                inputString.append("5");
                inputField.setText(inputString.toString());
                break;
            case "6":
                inputString.append("6");
                inputField.setText(inputString.toString());
                break;
            case "7":
                inputString.append("7");
                inputField.setText(inputString.toString());
                break;
            case "8":
                inputString.append("8");
                inputField.setText(inputString.toString());
                break;
            case "9":
                inputString.append("9");
                inputField.setText(inputString.toString());
                break;
            }
        }
    }

    private final StatCalc calculator;
    private JLabel display;
    private JPanel displayPanel;
    private JTextField inputField;
    private final StringBuffer inputString;
    private JButton enter;
    private JButton button_1;
    private JButton button_2;
    private JButton button_3;
    private JButton button_4;
    private JButton button_5;
    private JButton button_6;
    private JButton button_7;
    private JButton button_8;
    private JButton button_9;
    private JPanel inputPanel;
    private InputHandler ioListener;
    private JButton count;
    private JButton sum;
    private JButton mean;
    private JButton max;
    private JButton min;
    private JButton standardDeviation;
    private JPanel functionPanel;

    public StatCalcPanelBeta(){
        calculator = new StatCalc();
        inputString = new StringBuffer();
        initialize();
    }

    private void initialize(){
        setLayout(null);

        displayPanel = new JPanel();
        displayPanel.setBorder(new TitledBorder(new BevelBorder(BevelBorder.LOWERED, null, null,
                null, null), "Display", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        displayPanel.setBounds(10, 11, 190, 53);
        add(displayPanel);
        displayPanel.setLayout(null);

        display = new JLabel("Display");
        display.setBounds(0, 11, 180, 37);
        displayPanel.add(display);
        display.setHorizontalAlignment(SwingConstants.CENTER);

        inputPanel = new JPanel();
        inputPanel.setBorder(new TitledBorder(new EtchedBorder(EtchedBorder.LOWERED, null, null),
                "Input", TitledBorder.LEADING, TitledBorder.TOP, null, null));
        inputPanel.setBounds(0, 72, 211, 145);
        this.add(inputPanel);
        inputPanel.setLayout(null);

        ioListener = new InputHandler();

        inputField = new JTextField(inputString.toString());
        inputField.setEditable(false);
        inputField.setBounds(9, 16, 86, 20);
        inputPanel.add(inputField);
        inputField.setColumns(10);

        enter = new JButton("Enter");
        enter.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                try{
                    calculator.enter(Double.parseDouble(inputString.toString()));
                } catch(NumberFormatException e){
                    e.printStackTrace();
                }
                display.setText("");
            }
        });
        enter.setToolTipText("Enters the number displayed on the input field");
        enter.setBounds(110, 16, 89, 23);
        inputPanel.add(enter);

        button_1 = new JButton("1");
        button_1.setBounds(6, 47, 65, 23);
        button_1.addActionListener(ioListener);
        inputPanel.add(button_1);

        button_2 = new JButton("2");
        button_2.setBounds(73, 47, 65, 23);
        button_2.addActionListener(ioListener);
        inputPanel.add(button_2);

        button_3 = new JButton("3");
        button_3.setBounds(140, 47, 65, 23);
        button_3.addActionListener(ioListener);
        inputPanel.add(button_3);

        button_4 = new JButton("4");
        button_4.setBounds(6, 81, 65, 23);
        button_4.addActionListener(ioListener);
        inputPanel.add(button_4);

        button_5 = new JButton("5");
        button_5.setBounds(73, 81, 65, 23);
        button_5.addActionListener(ioListener);
        inputPanel.add(button_5);

        button_6 = new JButton("6");
        button_6.setBounds(140, 81, 65, 23);
        button_6.addActionListener(ioListener);
        inputPanel.add(button_6);

        button_7 = new JButton("7");
        button_7.setBounds(6, 115, 65, 23);
        button_7.addActionListener(ioListener);
        inputPanel.add(button_7);

        button_8 = new JButton("8");
        button_8.setBounds(73, 115, 65, 23);
        button_8.addActionListener(ioListener);
        inputPanel.add(button_8);

        button_9 = new JButton("9");
        button_9.setBounds(140, 115, 65, 23);
        button_9.addActionListener(ioListener);
        inputPanel.add(button_9);

        functionPanel = new JPanel();
        functionPanel.setBorder(new TitledBorder(
                new EtchedBorder(EtchedBorder.LOWERED, null, null), "Functions",
                TitledBorder.LEADING, TitledBorder.TOP, null, null));
        functionPanel.setBounds(0, 228, 211, 113);
        this.add(functionPanel);
        functionPanel.setLayout(null);

        count = new JButton("Count");
        count.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                display.setText(Integer.toString(calculator.getCount()));
            }
        });
        count.setBounds(6, 16, 65, 23);
        functionPanel.add(count);

        sum = new JButton("Sum");
        sum.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                display.setText(Double.toString(calculator.getSum()));
            }
        });
        sum.setBounds(73, 16, 65, 23);
        functionPanel.add(sum);

        mean = new JButton("Mean");
        mean.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                display.setText(Double.toString(calculator.getMean()));
            }
        });
        mean.setBounds(140, 16, 65, 23);
        functionPanel.add(mean);

        max = new JButton("Maximum");
        max.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                display.setText(Double.toString(calculator.getMax()));
            }
        });
        max.setBounds(10, 49, 89, 23);
        functionPanel.add(max);

        min = new JButton("Minimum");
        min.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                display.setText(Double.toString(calculator.getMin()));
            }
        });
        min.setBounds(111, 49, 89, 23);
        functionPanel.add(min);

        standardDeviation = new JButton("Standard Deviation");
        standardDeviation.addActionListener(new ActionListener(){
            @Override public void actionPerformed(ActionEvent arg0){
                display.setText(Double.toString(calculator.getStandardDeviation()));
            }
        });
        standardDeviation.setBounds(33, 83, 147, 23);
        functionPanel.add(standardDeviation);
    }
} 
```

与此相关的所有其他类都正常工作，其他按钮的侦听器也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:27:27.297

```
String str = evt.toString(); 
```

这将永远不会返回“1”（或任何其他数字）。如果要检索按钮，请使用`evt.getSource()`并将其转换为`JButton`. 然后，`JButton`您可以从中检索正确的信息。

另一种选择是使用操作命令。见`JButton#setActionCommand`和`ActionEvent#getActionCommand`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:28:39.020

打印出 evt.toString()

我怀疑它只是“1”，“2”等等......

# jquery - Jquery - 自动计算输入字段

> ID：13601697
> 
> 赞同：3
> 
> 时间：2012-11-28T09:23:31.697
> 
> 标签：jquery, html

我正在尝试使下面的代码正常工作，非常感谢您的帮助。基本上它是计算三个输入字段的总和，然后与其他两个字段相乘。最终结果应显示在输入字段 pcamount 中。

这是 jsFiddle 中的示例：http: [//jsfiddle.net/D98PW/](http://jsfiddle.net/D98PW/)

Bellow是jquery脚本和html

在此先感谢您的帮助！

```
 $(document).ready(function() {
   $('input[name=deposit], input[name=minpremium], input[name=adjpremium],input[name=procombaserate], input[name=profcomper], input[name=pcamount]').change(function(e)  {
        var total_mnozi = 0;
        var total=0;
        var $row = $(this).parent();
        var dep = $row.find('input[name=deposit]').val();
        var minpre = $row.find('input[name=minpremium]').val();
        var adjpre = $row.find('input[name=adjpremium]').val();
        var procombase = $row.find('input[name=procombaserate]').val();
        var profcomper = $row.find('input[name=profcomper]').val();
       // var pcamount= $row.find('input[name=pcamount]').val();
       // total_mnozi= procombase * profcomper;
         $('dep, minpre, adjpre').each(function() {
       total += parseFloat($(this));
          total_mnozi = total * procombase * profcomper;
          $row.find('input[name=pcamount]').val( total_mnozi);

  });   
    });
   }); 
```

和 html

```
<table >
    <tr>  
        <td><label>MIN Premium</label></td>
         <td class="toadd"><input type="text" class="input1" name="minpremium" id="minpremium" value=""></td>   
       </tr>
        <tr>
          <td><label>Deposit</label></td>                              
         <td ><input type="text" name="deposit" id="deposit" class="input1" size="20" value=""></td>
          <td></td><td></td>  
       </tr>
       <tr>
       <td><label>Adjustment Premium</label></td>                              
       <td ><input type="text" name="adjpremium" id="adjpremium" class="input1" size="20" value=""></td>
        <td><label>Return Premium</label></td>
         <td><input type="text" class="input1" name="returnpremium" id="returnpremium"></td>
         </tr>
        <tr>   
        <td><label>Tax Allocation</label></td>
        <td><input type="text" class="input1" name="taxalloc" id="taxalloc"></td>
        <td><label>Premium Base Rate</label></td>
        <td><input type="text" class="input1" name="pramiumbase" id="pramiumbase"></td>
       </tr>
       <tr>
        <td><label>Adjustable Rate</label></td>
        <td><input type="text" class="input1" name="adjrate" id="adjrate" class="input1" size="20" value=""></td>
        <td><label>PC Base Rate</label></td>
         <td><input type="text" class="input1" name="procombaserate" id="procombaserate" class="input1" size="20" value=""></td> </tr>
        <tr>
           <td><label>Profit Commission %</label></td>
             <td><input type="text" class="input1" name="profcomper" id="profcomper" value=""></td>
              <td><label>PC Amount</label></td>
         <td><input type="text" class="input1" name="pcamount" id="pcamount" class="input1" size="20" >
                    </td>                   
       </table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T10:04:09.107

由于您在所有输入字段上都使用 ID，因此您可以使用它而不是 NAME 属性。它更短更透明。

您可以将`change`调用绑定到所有输入元素，或者如果您希望限制它们，您可以使用`$('input#ID1, input#ID2,...')`其中 ID1,ID2... 是您希望将其设置为的元素的 ID。

```
$(document).ready(function() {
   $('input').change(function(e)  {
        var total_mnozi = 0;
        var dep = parseFloat($('#deposit').val());
        var minpre = parseFloat($('#minpremium').val());
        var adjpre = parseFloat($('#adjpremium').val());
        var procombase = parseFloat($('#procombaserate').val());
        var profcomper = parseFloat($('#profcomper').val());

        total_mnozi = (dep+minpre+adjpre) * procombase * profcomper;
        $('#pcamount').val( total_mnozi);
    });
   }); 
```

# magento - 在多个 CMS 上使用 Solr

> ID：13601699
> 
> 赞同：0
> 
> 时间：2012-11-28T09:23:35.803
> 
> 标签：magento, solr, ezpublish

我在两台不同的服务器和一台 Solr 服务器上有一个 eZ Publish 和一个 Magento 站点。Solr 服务器现在用作 eZ Publish 的搜索引擎，但我也想在 Magento 上使用相同的 Solr 服务器。

eZ Publish 附带一个包含 schema.xml 的扩展名 (eZFind)，我无需任何配置（除了定义 Solr 服务器、用户、密码等）就可以直接使用它。

Magento 附带了 schema.xml 和 solrconfig.xml，根据文档需要将它们复制到 Solr-server。

我有点害怕这样做，因为我不想破坏 eZ Publish 上的搜索。

有没有人有这方面的经验或对 Solr 设置有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T08:52:36.423

您需要使用 Solr 的多核特性（请参阅[此处](http://wiki.apache.org/solr/CoreAdmin)），这样您将只有一个 Solr 实例，服务于 2 个内核（至少）。这意味着什么 ？每个核心将由至少 2 个文件 (`schema.xml`和`solrconfig.xml`) 定义，这些文件将位于 Solr 安装中的专用文件夹中。然后必须在一个名为的文件中注册核心`solr.xml`，在您的情况下，该文件可能如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="true" sharedLib="lib">
    <cores adminPath="/admin/cores">
         <core name="ezpublish" instanceDir="ezpublish" />
         <core name="magento" instanceDir="magento" />
    </cores>
</solr> 
```

如果您当前的 solr 安装仍在eZ Find 扩展*中*，那么您应该查看[此页面](http://doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Find/eZ-Find-2.7/Advanced-Configuration/Using-multi-core-features)，该页面告诉您如何将捆绑的 Solr 安装移动到 eZ Publish 之外。然后，使用 Magenta 配置文件添加一个新内核。

根据您使用的 Solr 版本，我建议您自己安装 Solr（不要为 eZ Find 安装一个）并在其上应用 eZ Publish 配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:52:06.257

您可以使用 solr 的多核功能，该功能允许您托管多个索引，每个索引都有自己的架构，并且每个索引都可以通过自己的 url (`http://localhost:8983/solr/ezpublish/`和`http://localhost:8983/solr/magento`) 访问。

eZPublish 有一个关于如何做到这一点的教程：http: [//doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Find/eZ-Find-2.7/Advanced-Configuration/Using-multi-core-features](http://doc.ez.no/Extensions/eZ-Publish-extensions/eZ-Find/eZ-Find-2.7/Advanced-Configuration/Using-multi-core-features)

您剩下要做的就是复制您的magento配置

# objective-c - 仅获取 NSString 的第一个单词

> ID：13601705
> 
> 赞同：10
> 
> 时间：2012-11-28T09:23:51.677
> 
> 标签：objective-c

我有这个`NSString`，它给了我用户语言。

```
NSString * language= @"English (America) " ; 
```

我只需要从中得到第一个词-即语言。我知道如何查找空间，但找不到仅获取第一个单词的简单方法。

谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-28T09:26:01.277

```
NSString *firstWord = [[language componentsSeparatedByString:@" "] objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T09:30:49.567

```
NSUInteger location = [language rangeOfString:@" ("].location;
NSString *result = location == NSNotFound ? language : [language substringToIndex:location]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:28:23.367

这是我的答案：

```
 NSString * language= @"English (America) " ;

  NSArray *comps = [language componentsSeparatedByString:@" "];

  NSString * eng = [comps objectAtIndex:0]; 
```

# function - 无论是否调用 Powershell 函数都会执行

> ID：13601717
> 
> 赞同：1
> 
> 时间：2012-11-28T09:24:32.167
> 
> 标签：function, powershell

我无法理解 Powershell 如何处理函数。在以下脚本中，所有函数都被调用，即使我从未真正调用过主函数。powershell没有调用链的概念吗？

```
param([string]$directory)

[string]$global:sqlscript;
$global:types = @{
"double" = "DOUBLE PRECISION"; 
"int" = "INTEGER"; 
"QString" = "INTEGER";
"Ignored" = "1";
"Normal" = "2";
"Critical" = "3" }

function resultToSql($element)
{
  $global:sqlscript += ('"')
  $global:sqlscript += ($element.name + '" ')
  $global:sqlscript += ($global:types.Get_Item($element.type))
  $global:sqlscript += (',' + [Environment]::Newline)
  $global:sqlscript += ('"' + $element.name + "_metric_group" + " " + $global:types.Get_Item($element.metric_group.type))   
  $global:sqlscript += (',' + [Environment]::Newline)
}

function xmlToSql($source)
{
  Write-Host "Parsing...";
  $global:sqlscript += "CREATE TABLE IF NOT EXISTS " + '"' + $source.spec.task.ToLower() + '"'+ [Environment]::NewLine
  $global:sqlscript += '"' + "id" + '"' + " SERIAL NOT NULL" + [Environment]::NewLine

  foreach ($node in $source.spec.measure) {
      resultToSql $node
  }

  foreach ($m in $source.spec.error) {
    resultToSql $m
  }

  $global:sqlscript += '"' + "weighted_sum" + '" ' + $global:types.Get_Item("double") + [Environment]::Newline;
}

function main
{
  if ($directory -eq $null) { exit }
  else
  {
    $xmlfiles = Get-ChildItem -Path $directory -include *Spec.xml
    foreach ($xmlfile in $xmlfiles)
    {
        Write-Host "Filename:" $xmlfile;
        [xml]$spec = Get-Content $file;
        xmlToSql $spec; 
        Write-Host $script;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:32:48.597

PowerShell 无法神奇地检测到脚本的更改，关闭 ISE 并重新打开它，然后再次运行您的脚本。如果失败，请将脚本的内容粘贴到 ISE 中并单击执行按钮，我只是这样做了，而 main 没有运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:54:08.530

与 C/C++/C# 程序不同，“你”需要调用该`Main`函数 - 在该脚本的底部。当您首先运行脚本时，它所做的就是创建您定义的函数。它不运行任何一个。您必须通过在脚本中调用它们来做到这一点，并且其中一个调用必须在脚本级别（在任何函数之外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T17:04:08.407

删除 main 函数容器，使其类似于以下代码：

```
 if ($directory -eq $null) { exit }
  else
  {
    $xmlfiles = Get-ChildItem -Path $directory -include *Spec.xml
    foreach ($xmlfile in $xmlfiles)
    {
        Write-Host "Filename:" $xmlfile;
        [xml]$spec = Get-Content $file;
        xmlToSql $spec; 
        Write-Host $script;
    }
  } 
```

Powershell 不像 C#/C++ 那样从 Main 执行。它执行首先在函数之外接收到的语句。在上面的这种情况下，它将首先执行 if 语句，因为它出现在函数框之外。

# java - 在java中遇到连字符时拆分句子

> ID：13601718
> 
> 赞同：1
> 
> 时间：2012-11-28T09:24:40.823
> 
> 标签：java, regex, string, split

我的程序中有以下代码。当遇到连字符时，它会拆分一行并将每个单词存储在字符串数组“tokens”中。但我希望连字符在句子中遇到时也存储在字符串数组“令牌”中。

```
String[] tokens = line.split("-"); 
```

上面的代码拆分了句子，但也完全忽略了结果数组中的连字符。我该怎么做才能将连字符也存储在结果数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:30:06.313

**编辑 ： -**

似乎您想在两者上进行拆分`whitespaces`，`hyphen`但仅保留`hyphen`其中`array`（因为，我从您的这一行推断-*将每个单词存储在 String Array 中*），您可以使用：-

```
String[] tokens = "abc this is-a hyphen def".split("((?<=-)|(?=-))|\\s+");
System.out.println(Arrays.toString(tokens)); 
```

输出： -

```
[abc, this, is, -, a, hyphen, def] 
```

* * *

对于`spaces`连字符前后的处理，您可以先使用`replaceAll`方法修剪这些空格，然后进行拆分：-

```
"abc this is - a hyphen def".replaceAll("[ ]*-[ ]*", "-")
                            .split("((?<=-)|(?=-))|\\s+"); 
```

* * *

**上一个答案：-**

你可以使用这个： -

```
String[] tokens = "abc-efg".split("((?<=-)|(?=-))");
System.out.println(Arrays.toString(tokens)); 
```

**输出 ： -**

```
[abc, -, efg] 
```

`empty`它在 .之前和之后的一个字符上分裂`hyphen (-)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:33:19.270

我建议将正则表达式与 Java 模式和匹配器结合使用。例子：

```
String line = "a-b-c-d-e-f-";
Pattern p = Pattern.compile("[^-]+|-");
Matcher m = p.matcher(line);
while (m.find())
{
  String match = m.group();
  System.out.println("match:" + match);
} 
```

要测试您的正则表达式，您可以使用这样的在线正则表达式测试[器](http://www.regexplanet.com/advanced/java/index.html)

# jquery - 具有不同放置动作的多个可拖动对象

> ID：13601722
> 
> 赞同：0
> 
> 时间：2012-11-28T09:25:17.000
> 
> 标签：jquery, draggable, droppable

是否可以有多个可拖动和一个可放置，但具有不同的可放置功能？请看一下我的代码和我的示例。我正在尝试实现这一点，当您删除第二个 div 时，它会显示“您删除了另一个”。我计划制作更多可拖动的 div，但对于示例，我只使用了两个可拖动的和一个可放置的。

[**提琴手**](http://jsfiddle.net/yMDB3/)

**JS**

```
$("#draggable_one").draggable({

    revert: true
});

$("#draggable_two").draggable({

   revert: true
});

$("#theonlydroppable").droppable({
    drop: function(event, ui) {
  $(this).html("you dropped one");

    }
}); 
```

**HTML**

```
 <div id="draggable_one">
          draggable one
         </div>
         <div id="draggable_two">
            draggable two
         </div>

         <div id="theonlydroppable">
            Drop it like it's hot
         </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:28:55.667

只需添加一个条件来检查哪个可拖动对象被丢弃，然后采取适当的措施：

```
$("#theonlydroppable").droppable({
    drop: function(event, ui) {
        if (ui.draggable.is('#draggable_one')) {
            $(this).html("you dropped one");
        } else {
            $(this).html("you dropped the other one");
        }
    }
}); 
```

这是一个演示：http: [//jsfiddle.net/yMDB3/1/](http://jsfiddle.net/yMDB3/1/)

# c++ - 矩阵元素（使用类）未显示c ++

> ID：13601724
> 
> 赞同：0
> 
> 时间：2012-11-28T09:25:20.057
> 
> 标签：c++

我正在制作一类矩阵并试图通过创建一个新的二维矩阵来显示。当我编译并运行这段代码时，程序就退出了，屏幕上什么也没有出现。我无法理解这个问题。任何帮助将不胜感激。谢谢

```
#include <iostream>
using namespace std;

//making a class of matrix
class Matrix{
private:
    int **array;
    int row,col;
public:
    void initialize(int r,int c);  //function to initialize the array
    //dynamically
    Matrix(int r,int c);           //this function initializes a matrix of r
    //rows and c columns
    ~Matrix();                    //delete the matrix by this
    void display_matrix();         //display matrix
    int get_rows();                //get rows of matrix
    int get_columns();             //get columns of matrix
};

//function to initialize the matrix
void Matrix::initialize(int r,int c)
{
    r=row;
    c=col;

    array=new int*[r];         //creating a 1D array dynamically
    for (int i=0;i<r;i++)
    {
        array[i]=new int[c];      //making the array 2D by adding columns to it
    }

    for (int i=0;i<r;i++)
    {
        for (int j=0;j<c;j++)
        {
            array[i][j]=0;        //setting all elements of array to null
        }
    }
}

//initializing NULL matrix
Matrix::Matrix()
{
    initialize(0,0);
}

//setting row aand columns in matrix
Matrix::Matrix(int r,int c)
{
    initialize(r,c);   //function used to initialize the array
}

//deleting matrix
Matrix::~Matrix()
{
    for (int i=0;i<row;i++)
    {
        delete[]array[i];
    }
    delete[]array;
}

int Matrix::get_rows()
{
    return row;        //return no. of rows
}

int Matrix::get_columns()
{
    return col;      //return columns
}

//display function
void Matrix::display_matrix()
{
    int c=get_columns();
    int r=get_rows();
    for (int i=0;i<r;i++)
    {
        for (int j=0;j<c;j++)
        {
            cout<<array[i][j]<<" ";      //double loop to display all the elements of
            //array
        }
        cout<<endl;
    }
}

int main()
{
    Matrix *array2D=new Matrix(11,10);   //making a new 2D matrix
    array2D->display_matrix();   //displaying it
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:28:28.763

难道不应该

```
void Matrix::initialize(int r,int c)
 {
 r=row;   //Shouldn't it be row = r;
 c=col;   //Shouldn't it be col = c;
...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T09:30:32.733

您的错误在`initialize`：

```
void Matrix::initialize(int r,int c)
{
    r=row;
    c=col;

    ... 
```

您正在将函数变量 'r' 和 'c' 设置为类变量 'row' 和 'col' 具有的任何值。我很确定你打算做相反的事情。

您还确定这是您编译的*实际代码吗？*你的班级缺少一个声明`Matrix()`

# c++ - 我应该通过单独的进程编写自己的故障转储还是依赖 WER？

> ID：13601729
> 
> 赞同：3
> 
> 时间：2012-11-28T09:25:52.617
> 
> 标签：c++, windows, visual-c++, crash-dumps, windows-error-reporting

目前我的信息是（让我们将上下文保留在 Windows-7 中，因为 WER 在 Win-XP 上不能那样工作）我有两种方法可以为我的应用程序获取完整的内存崩溃转储：

## 我可以设置 WER 来生成我的应用程序的本地完整内存转储

信息在这里：http: [//msdn.microsoft.com/en-us/library/bb787181%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb787181%28v=vs.85%29.aspx)

*   添加（也适用于 32 位应用程序。不要*使用*SysWow64 节点）`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps`密钥（可能是应用程序特定的子密钥`...LocalDumps\MyApplication.exe`）
*   设置`DumpType`为 2。
*   根据需要调整其他设置

注意：由于我们的应用程序是自定义部署的，因此设置此注册表值不是问题。

这似乎通过一个简单的演示应用程序为我提供了非常可靠的故障转储。

## 或者，我可以自己编写转储 - 正确使用看门狗进程和所有

我曾经`MiniDumpWriteDump`编写转储文件，并通过看门狗进程（如此处、[此处所述）来执行](https://stackoverflow.com/a/13591900/321013)[此](https://stackoverflow.com/a/10672472/321013)操作，以最大程度地降低失败的风险。

# 问题

那么，哪种方法更好呢？鉴于这一点，当我自己做这件事时，我谨慎地将我在崩溃处理程序中所做的事情保持在绝对最低限度，我想知道 WER 方法是否同样可靠，或者 WER 方法是否在处理过程中做了更多可能的事情失败。有什么想法/经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:36:07.383

作为自己做的替代方案，您可以查看[Google Breakpad](http://code.google.com/p/google-breakpad/)，它是一个用于生成和处理故障转储的库和工具集。

# xslt - XSLT：避免在某些节点中缩进

> ID：13601731
> 
> 赞同：2
> 
> 时间：2012-11-28T09:25:53.100
> 
> 标签：xslt, xslt-1.0, indentation

我有一些用标签替换换行符的 XSLT，`<Break/>`只要没有多个连续的换行符，它就可以正常工作。我认为这`indent="yes"`是造成问题的原因。可以为某些节点禁用它吗？

基本上具有混合内容（文本和元素）的节点不能包含任何换行符。

输入xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Account xmlns="http://example.com/account">
    <Owner>
        <ID>012345789</ID>
        <Name>Peter Johnson</Name>
    </Owner>
    <Notes>
        <NoteID>012345789</NoteID>
        <Text>This is the description:
Line 1
Line 2
Line 3

Line 4, after double linebreak
Line 5</Text>
    </Notes>
</Account> 
```

XSL：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://example.com/account" version="1.0">

<xsl:output method="xml" version="1.0" encoding="ISO-8859-1" indent="yes"/>

<xsl:template name="replace_sab">
    <!-- with string s, replace substring a by string b -->
    <!-- s, a and b are parameters determined upon calling  -->
    <xsl:param name="s" />
    <xsl:param name="a" />
    <xsl:param name="b" />
    <xsl:choose>
        <xsl:when test="contains($s,$a)">
            <xsl:value-of select="substring-before($s,$a)" />
            <xsl:copy-of select="$b" />
            <xsl:call-template name="replace_sab">
                <xsl:with-param name="s" select="substring-after($s,$a)" />
                <xsl:with-param name="a" select="$a" />
                <xsl:with-param name="b" select="$b" />
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$s" />
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

<xsl:template match="text()[not(normalize-space())]"/>

  <xsl:template match="text()[boolean(normalize-space())]">
    <xsl:call-template name="replace_sab">
        <xsl:with-param name="s" select="." />
        <xsl:with-param name="a" select="'&#xA;'" />
        <xsl:with-param name="b"><Break/></xsl:with-param>
    </xsl:call-template>
  </xsl:template>
</xsl:stylesheet> 
```

我得到的输出：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Account xmlns="http://example.com/account">
    <Owner>
        <ID>012345789</ID>
        <Name>Peter Johnson</Name>
    </Owner>
    <Notes>
        <NoteID>012345789</NoteID>
        <Text>This is the description:<Break/>Line 1<Break/>Line 2<Break/>Line 3<Break/>
            <Break/>Line 4, after double linebreak<Break/>Line 5</Text>
    </Notes>
</Account> 
```

我想要的输出：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Account xmlns="http://example.com/account">
    <Owner>
        <ID>012345789</ID>
        <Name>Peter Johnson</Name>
    </Owner>
    <Notes>
        <NoteID>012345789</NoteID>
        <Text>This is the description:<Break/>Line 1<Break/>Line 2<Break/>Line 3<Break/><Break/>Line 4, after double linebreak<Break/>Line 5</Text>
    </Notes>
</Account> 
```

我在 Tibco BusinessWorks 流程中使用“TIBCO XSLT 1.0”XSLT 引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:05:49.357

没有标准的方法可以做到这一点。

如果您使用的是 Saxon，您可以使用 saxon:suppress-indentation 输出参数，它成为 XSLT 3.0 中的标准选项。

即使您坚持使用 Tibco XSLT 引擎，也许您可​​以找到一种将 Saxon 序列化程序插入到您的处理管道中的方法。

# java - 如何将文件大小存储在 db2 中

> ID：13601734
> 
> 赞同：0
> 
> 时间：2012-11-28T09:25:57.673
> 
> 标签：java, db2, sqldatatypes, springsource

我正在使用 DB2，当我选择任何 .doc 文件时，从 UI 部分，相关信息必须存储在表中，如文件名、文件大小、文件扩展名（doc、docx、ods 等）。在创建表时，我提到了 FileSize 的数据类型为 double 并且当文件大小太大时，它存储为**(1.918208E7)**有什么解决方案可以解决这个问题吗？在 pojo 类中，我尝试将文件大小指定为 Double 和 float，两者都将文件大小存储为**1.918208E7**。在 pojo 类中或者在查看 bean 中的文件大小时，我需要更改什么吗？还是它的sql数据类型？我存储的文件大小以字节为单位请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:06:53.097

FileSize 对我来说似乎是整数 - 所以你应该使用代表 64 位整数的 BIGINT 数据类型（并且 64 位应该足以存储几个 Internet 的字节大小）

# javascript - 如何将毫秒转换为可读的日期分钟：秒格式？

> ID：13601737
> 
> 赞同：5
> 
> 时间：2012-11-28T09:26:08.707
> 
> 标签：javascript

在 JavaScript 中，我有一个以毫秒为单位的变量时间。

我想知道是否有任何内置函数可以**有效**地将这个值转换为`Minutes:Seconds`格式。

如果不能，请您指出一个实用功能。

例子：

从

```
462000 milliseconds 
```

到

```
7:42 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T09:30:33.927

只需创建一个`Date`对象并将毫秒作为参数传递。

```
var date = new Date(milliseconds);
var h = date.getHours();
var m = date.getMinutes();
var s = date.getSeconds();
alert(((h * 60) + m) + ":" + s); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T10:51:34.330

感谢大家的支持，最后我想出了这个解决方案。我希望它可以帮助别人。

采用：

```
var videoDuration = convertMillisecondsToDigitalClock(18050200).clock; // CONVERT DATE TO DIGITAL FORMAT 
```

* * *

```
// CONVERT MILLISECONDS TO DIGITAL CLOCK FORMAT
function convertMillisecondsToDigitalClock(ms) {
    hours = Math.floor(ms / 3600000), // 1 Hour = 36000 Milliseconds
    minutes = Math.floor((ms % 3600000) / 60000), // 1 Minutes = 60000 Milliseconds
    seconds = Math.floor(((ms % 360000) % 60000) / 1000) // 1 Second = 1000 Milliseconds
        return {
        hours : hours,
        minutes : minutes,
        seconds : seconds,
        clock : hours + ":" + minutes + ":" + seconds
    };
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-11T06:53:34.577

如果您已经在项目中使用[Moment.js](http://momentjs.com/)，则可以使用[moment.duration](http://momentjs.com/docs/#/durations/creating/)函数

你可以像这样使用它

```
var mm = moment.duration(37250000);
console.log(mm.hours() + ':' + mm.minutes() + ':' + mm.seconds()); 
```

输出： 10:20: *50*

请参阅[jsbin](http://jsbin.com/poboxicake/edit?html,js,console,output)示例

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T09:43:31.037

自己进行转换很容易：

```
var t = 462000
parseInt(t / 1000 / 60) + ":" + (t / 1000 % 60) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-30T00:22:23.750

您可能喜欢**pretty-ms** npm 包：[https](https://www.npmjs.com/package/pretty-ms)
://www.npmjs.com/package/pretty-ms 如果您正在搜索。无头的漂亮格式（**时间以毫秒增长所需的单位为单位**），可个性化并涵盖不同的情况。它涵盖的内容小而高效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-28T09:35:12.137

```
function msToMS(ms) {
    var M = Math.floor(ms / 60000);
    ms -= M * 60000;
    var S = ms / 1000;
    return M + ":" + S;
} 
```

# javascript - 带有负数和正数的Javascript方程

> ID：13601740
> 
> 赞同：1
> 
> 时间：2012-11-28T09:26:32.273
> 
> 标签：javascript, equation

我有四个文本输入字段，用户输入相关值后，我必须进行 JavaScript 计算以添加所有字段

我用：

```
 var total = Number(value1) + Number(value2) + Number(value3) + Number(value4); 
```

然后我显示总数：

```
document.getElementById("value5").innerHTML = total; 
```

如果其中一个值为负数，则将其添加为正数。我如何得到方程式将其视为负数（因此它被减去）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:36:01.640

我不知道问题出在哪里，但效果很好

```
 <script type="text/javascript">
 function fnc(){
 val1=Number(document.getElementById("t1").value);
  val2=Number(document.getElementById("t2").value);

 var total = val1+val2;
 document.getElementById("t3").value=total;
 }
 </script>
 input1: <input type="text" id="t1" />
  input2: <input type="text" id="t2" />
  <br />
<input type="text" id="t3" />
<input type="button" id="btn" onclick="fnc()" value="click me" /> 
```

# c# - c# 类工厂新手

> ID：13601744
> 
> 赞同：2
> 
> 时间：2012-11-28T09:26:50.233
> 
> 标签：c#, class, factory

这可能是我正在寻找的错误标题，但我*认为*它归结为一个类工厂。

我有三个班级：

```
 class Horse : Animal
   class Cow :   Animal 
```

我想要创建的是 Animal 中的一个方法，它是伪编码的，会像这样工作：

```
 List<Horse or Cow> (Animal horseOrCow)
   {
      if (horseOrCow is of type Horse)
         return a list of 10 Horse objects; 
      else
         return a list of 10 Cow objects;
   } 
```

当然是简化，但是一旦我掌握了如何做到这一点，我应该能够弄清楚其余的。

（编辑：错字已修复）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:28:55.113

您可以使用[**类型的泛型方法**](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

```
List<T> YourMethod<T>(T horseOrCow) where  T : Mamal
{
   // your code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:31:05.297

您可以使用[`is`-operator](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.110%29.aspx)和`Enumerable.OfType`+ `Enumerable.Take`：

```
public List<Animal> getMammals(Mammal horseOrCow)
{
    if (horseOrCow is Horse)
        return allAnimals.OfType<Horse>().Take(10).Cast<Animal>().ToList();
    else if (horseOrCow is Cow)
        return allAnimals.OfType<Cow>().Take(10).Cast<Animal>().ToList();
    else
        throw new ArgumentException("Invalid Mammal", "horseOrCow");
} 
```

假设有一个`List<Animal> allAnimals`地方。

**编辑**：也`Mammal`必须是一个`Animal`并且因为它们应该继承自它。`Horse``Cow``Mammals`

```
class Horse : Mammal{ }
class Cow : Mammal { }
class Animal { }
class Mammal : Animal { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:29:47.447

这应该适合你：

```
abstract class Animal
abstract class Mammal : Animal  
class Horse : Mammal 
class Cow :   Mammal 

List<T> (T mammal) where  T : Mammal  //mammal is cow or horse
{
   if (horseOrCow is Horse)
      return new List<Horse>(); //add the horses to your list 
   else
      return new List<Cow>(); //add the cows to your list
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:39:49.667

```
public class Animal
{
    public List<Mammal> GetMammalList(Mammal mammal)
    {
        List<Mammal> list = new List<Mammal>();
        if (mammal.GetType() == typeof(Horse))
            for (int x = 0; x < 10; x++)
                list.Add(new Horse());
        else if (mammal.GetType() == typeof(Cow))
            for (int x = 0; x < 10; x++)
                list.Add(new Cow());
        else
            throw new ArgumentOutOfRangeException();

        return list;
    }
}

public class Mammal : Animal { }

public class Horse : Mammal { }

public class Cow : Mammal { } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T09:39:39.807

我不建议使用`is`. 而是用于`dynamic`确定对象的运行时类型。

```
public void List<T> GetMammals<T>(T mammal) where  T : Mammal
{
   GetMammalsSpecialization(mammal as dynamic);
}

private void List<Horse> GetMammalsSpecialization(Horse horse)
{
    // Specialized code to return list of horses
}

private void List<Cow> GetMammalsSpecialization(Cow cow)
{
    // Specialized code to return list of cows
} 
```

这是[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)问题的更好解决方案。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-28T09:36:21.737

```
public class Animal
{ 
   public enum AnimalType
   {
     CowType,
     HorseType
   }

   ....
   public Animal Create(AnimalType type)
   {
     Animal result = null;
      switch (type)
      {
       case HorseType: result = new Horse();
       case CowType : ....   
      }
     return result;
   }
} 
```

# android - 如何将android中的电话转移到另一个电话号码

> ID：13601750
> 
> 赞同：1
> 
> 时间：2012-11-28T09:27:13.147
> 
> 标签：android

我想编写一个能够将呼叫转移到另一个号码的应用程序，我知道它可以自己在手机上完成，但我只想将特定号码定向到另一个号码。有什么办法吗？

# c# - ACL：如何选中或取消选中选项

> ID：13601753
> 
> 赞同：0
> 
> 时间：2012-11-28T09:27:22.587
> 
> 标签：c#, .net, permissions, acl, file-permissions

我在 ACL 中为我的文件夹添加了组，但我无法检查/取消它的选项。

```
String account = @"HYPROSTROY\Все сотрудники";
FileSystemRights rights = FileSystemRights.FullControl;
// I have tried and it too:
// FileSystemRights rights = FileSystemRights.Read | FileSystemRights.Write | FileSystemRights.Modify;
AccessControlType controlType = AccessControlType.Allow;
DirectorySecurity security = local_commonDir.Parent.GetAccessControl(AccessControlSections.Access);
FileSystemAccessRule rule = new FileSystemAccessRule(account, rights, controlType);

security.AddAccessRule(rule);
// local_commonDir - экземпляр DirectoryInfo
local_commonDir.Parent.SetAccessControl(security); 
```

添加了组，但未选中所有选项：

![在此处输入图像描述](../Images/c362cb6fcf8dbb5fd5557503b6620e21.png)

UPD ===我尝试了其他方法：

```
// String account = Path.Combine(Environment.MachineName, "Пользователи");
String account = @"HYPROSTROY\Все сотрудники";
FileSystemRights rights = FileSystemRights.FullControl;                 
AccessControlType controlType = AccessControlType.Allow;                    
DirectorySecurity security = local_commonDir.Parent.GetAccessControl(AccessControlSections.All);
FileSystemAccessRule rule = new FileSystemAccessRule(account, rights, controlType);
//security.AddAccessRule(rule);
Boolean result;
security.ModifyAccessRule(AccessControlModification.Add, rule, out result);
local_commonDir.Parent.SetAccessControl(security); 
```

但选项未选中:(

我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:48:28.887

这对我有用：

```
dir = "C:\test";
DirectorySecurity security = Directory.GetAccessControl(dir);
FileSystemAccessRule rule = new FileSystemAccessRule("Account", FileSystemRights.FullControl, AccessControlType.Allow);
security.AddAccessRule(rule);

Directory.SetAccessControl(dir,security); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:24:17.027

我找到了解决方案：

```
WindowsIdentity id = WindowsIdentity.GetCurrent();
var sid = new SecurityIdentifier(WellKnownSidType.AccountDomainUsersSid, id.User.AccountDomainSid);
var security = dir.GetAccessControl();
var rule = new FileSystemAccessRule(sid,
    FileSystemRights.FullControl,
    InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
    PropagationFlags.None,
    AccessControlType.Allow);
security.AddAccessRule(rule);
dir.SetAccessControl(security); 
```

# c# - Google API -> 创建一个新日历 -> 解析错误

> ID：13601767
> 
> 赞同：1
> 
> 时间：2012-11-28T09:28:18.350
> 
> 标签：c#, google-api, google-calendar-api

我正在尝试按照[文档](https://developers.google.com/google-apps/calendar/v3/reference/calendars/insert)通过 Google API 创建日历。我试图避免使用客户端库，并通过自定义 webrequests 与 API 进行所有通信，到目前为止效果很好，但在这个特定的库中，我正在努力解决*“解析错误”*。

请不要参考使用客户端库 ( *service.calendars().insert(...)* ) 的解决方案。

这是我的代码的简化版本（仍然无法正常工作）：

```
var url = string.Format
(
    "https://www.googleapis.com/calendar/v3/calendars?key={0}",
    application.Key
);

var httpWebRequest = HttpWebRequest.Create(url) as HttpWebRequest;
httpWebRequest.Headers["Authorization"] = 
    string.Format("Bearer {0}", user.AccessToken.Token);                    
httpWebRequest.Method = "POST";
httpWebRequest.ContentType = "application/json";
httpWebRequest.CookieContainer = new CookieContainer();

// Obviously the real code will serialize an object in our system.
// I'm using a dummy request for now,
// just to make sure that the problem is not the serialization.
var requestText =
      "{" + Environment.NewLine
    + "\"summary\": \"test123\"" + Environment.NewLine
    + "}" + Environment.NewLine
    ;

using (var stream = httpWebRequest.GetRequestStream())
using (var streamWriter = new System.IO.StreamWriter(stream))
{
    streamWriter.Write(System.Text.Encoding.UTF8.GetBytes(requestText));
}

// GetSafeResponse() is just an extension that catches the WebException (if any)
// and returns the WebException.Response instead of crashing the program.
var httpWebResponse = httpWebRequest.GetSafeResponse(); 
```

正如你所看到的，我现在已经放弃了发送序列化对象，我只是想用一个非常简单的虚拟请求让它工作：

```
{
"summary": "test123"
} 
```

然而，回应仍然只是：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "parseError",
    "message": "Parse Error"
   }
  ],
  "code": 400,
  "message": "Parse Error"
 }
} 
```

accessToken 有效且未过期，应用程序密钥正确。

我做错了什么或错过了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:55:26.630

我不确定这是否能解决您的问题，但有几点需要注意。在这种情况下，不要使用 Environment.NewLine，如果您的代码在 Windows、Mac 或 Linux 上运行，您的网络流量不应改变。[Http 1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec2.html)需要 CRLF

您将帖子的正文编码为 UTF-8 是的，您没有告诉服务器您正在使用哪种编码。您所有的字符都是低位 ASCII，所以这无关紧要，但为了完整起见，您的内容类型应该是

```
 httpWebRequest.ContentType = "application/json ; charset=UTF-8"; 
```

除此之外，我看不到您的代码有问题，附加一个透明的回显代理（Charles 或 fiddler）可能会很好，这样您就可以通过网络看到您的请求是什么样的。从他们发送的日历[示例中](https://developers.google.com/google-apps/calendar/v3/reference/calendars/insert)

## 要求

```
POST https://www.googleapis.com/calendar/v3/calendars?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZR3F6ByTg1eKVkjegKyWIukodK8KGSzY-ea1miGKpc
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "summary": "Test Calendar"
} 
```

## 回复

```
200 OK

- Show headers -

{

 "kind": "calendar#calendar",
 "etag": "\"NybCyMgjkLQM6Il-p8A5652MtaE/ldoGyKD2MdBs__AsDbQ2rHLfMpk\"",
 "id": "google.com_gqua79l34qk8v30bot94celnq8@group.calendar.google.com",
 "summary": "Test Calendar"
} 
```

希望有所帮助，意识到它可能不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:38:50.153

我想通了，让它工作了！

虽然 David 的建议本身并不能解决问题，但他告诉我使用数据包嗅探器（我最终使用了 Wireshark，但这并不是重点），从而使我走上了正确的道路。

事实证明，我的简化代码中有两个错误。一个如此明显，让我脸红，一个更狡猾。

首先，

```
using (var streamWriter = new StreamWriter(stream))
{
    streamWriter.Write(Encoding.UTF8.GetBytes(requestText));
} 
```

当然应该是

```
using (var streamWriter = new StreamWriter(stream, Encoding.UTF8))
{
    streamWriter.Write(requestText);
} 
```

由于 streamWriter.Write 对参数执行 ToString()，而 Byte[].ToString() 只返回“System.Byte[]”。尴尬！

其次，默认的 UTF8 编码添加了字节顺序标记\357\273\277，这也导致内容在google 上无效。我在stackoverflow上找到了如何解决这个问题[。](https://stackoverflow.com/questions/1656717/c-sharp-httpwebrequest-posting-failing)

因此，对于任何为此苦苦挣扎的人，这是最终的解决方案。

```
var url = string.Format
(
    "https://www.googleapis.com/calendar/v3/calendars?key={0}",
    application.Key
);

var httpWebRequest = HttpWebRequest.Create(url) as HttpWebRequest;
httpWebRequest.Headers["Authorization"] = 
    string.Format("Bearer {0}", user.AccessToken.Token);                    
httpWebRequest.Method = "POST";
// added the character set to the content-type as per David's suggestion
httpWebRequest.ContentType = "application/json; charset=UTF-8";
httpWebRequest.CookieContainer = new CookieContainer();

// replaced Environment.Newline by CRLF as per David's suggestion
var requestText = string.Join
(
    "\r\n",
    "{",
    " \"summary\": \"Test Calendar 123\"",
    "}"
);

using (var stream = httpWebRequest.GetRequestStream())
// replaced Encoding.UTF8 by new UTF8Encoding(false) to avoid the byte order mark
using (var streamWriter = new StreamWriter(stream, new UTF8Encoding(false)))
{
    streamWriter.Write(requestText);
} 
```

希望这对某人有帮助！

# javascript - LinkedIn JavaScript API - 访问被拒绝的人

> ID：13601768
> 
> 赞同：1
> 
> 时间：2012-11-28T09:28:18.903
> 
> 标签：javascript, linkedin

我正在尝试使用此网页[JSAPI 教程：人物搜索](http://developer.linkedinlabs.com/tutorials/jsapi_search/)中的 LinkedIn JavaScript API，但是当我尝试它时，我收到的 json 响应是这样的：

```
{
  "errorCode": 0,
  "message": "Access to people search denied.",
  "requestId": "JEDHDU95PC",
  "status": 403,
  "timestamp": 1354094114382
} 
```

这是我的代码，与他们的代码相同，只是我将 api 密钥更改为与我的 localhost 环境关联的密钥。

```
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
    api_key: my_key
    authorize: true
</script>

<script type="text/javascript">
    function loadData() {
        IN.API.PeopleSearch()
         .fields("firstName", "lastName", "distance", "publicProfileUrl", "pictureUrl")
         .params({ "keywords": "python", "count": 10, "sort": "distance" })
         .result(function (result) {
             profHTML = "<h4>People search results for keyword 'python':</h4>";
             for (var index in result.people.values) {
                 profile = result.people.values[index]
                 if (profile.pictureUrl) {
                     profHTML += "<p><a href=\"" + profile.publicProfileUrl + "\">";
                     profHTML += "<img class=img_border height=30 align=\"left\" src=\"" + profile.pictureUrl + "\"></a>";
                     profHTML += "<p>" + profile.firstName + " " + profile.lastName + " (" + profile.distance + ")</p>";
                 }
             }
             $("#search").html(profHTML);
         });
    }
</script>

<div id="search">
    </div>
    <script type="IN/Login" data-onAuth="loadData"></script> 
```

奇怪的是[JSAPI 教程：使用 JSAPI 验证用户](http://developer.linkedinlabs.com/tutorials/jsapi_authentication/)有效。我可以验证我的密钥并返回数据，但它不适用于搜索，我不明白为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-14T10:19:36.180

我遇到了类似的问题。您需要申请“经过审核的 API 访问请求”。转到[https://help.linkedin.com/app/api-dvr](https://help.linkedin.com/app/api-dvr)并填写此表格以获取授权人员搜索 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:40:07.070

我有一个类似的问题。尝试在第一个脚本块中添加：范围：r_network。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T14:46:24.797

不要指望 LinkedIn 会响应您审查的 API 访问权限，除非您正在做一些重要且值得 LinkedIn 感兴趣的事情，而不是直接与他们竞争。通常，如果您是 2013 年 9 月之后开始的不幸的人之一，那么您所有的新 API 密钥将永远无法与经过审查的 API 一起使用。

# ruby-on-rails - Lambda / 应该改变 RSpec Rails 中的不对称性

> ID：13601772
> 
> 赞同：1
> 
> 时间：2012-11-28T09:28:26.517
> 
> 标签：ruby-on-rails, rspec

为什么

```
 lambda {
            parse
            }.should change(Object.all, :length).by_at_least(1) 
```

不工作，而

```
 obj_count_before=Object.all.length
        parse
        Object.all.length.should >= obj_count_before +1 
```

做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:09:47.677

你可以试试这个（[expect-change](https://www.relishapp.com/rspec/rspec-expectations/v/2-0/docs/matchers/expect-change)）

```
expect { parse }.to change{Object.count}.by_at_least(1) 
```

# objective-c - 压缩 Plist 文件

> ID：13601774
> 
> 赞同：1
> 
> 时间：2012-11-28T09:28:29.817
> 
> 标签：objective-c, ios, xcode, compression, plist

Apple 将始终将我们项目构建文件 (.ipa/.app) 中的 plist 文件压缩为二进制 plist 格式。它仍然包含一些可读格式的字符串。

在这里，我想遵循一些其他的压缩机制，它将把我的 plist 文件压缩到 011100 中，比如这种格式。

我的问题是是否可以在 xcode 项目中执行此操作，如果可以，如何执行此操作以及我应该遵循哪种方法来压缩我的 plist 文件..？？

提前致谢....

# android - Webview 不显示某些字符

> ID：13601778
> 
> 赞同：0
> 
> 时间：2012-11-28T09:28:37.500
> 
> 标签：android, webview

我有一个 utf-8 html 页面（在 HTML 中有正确的字符集），文本中有转录。转录中的某些字符显示为空方块。我尝试使用 loadDataWithBaseUrl 和一个简单的 loadData 进行加载。它似乎适用于 4.1，但不适用于 3.0。可能是字体问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:40:42.787

你是这样加载内容的吗？

```
String contents = res.getString(R.string.content_details);
WebView wv1 = (WebView)findViewById(R.id.webView1);
wv1.loadDataWithBaseURL("file:///android_asset/", contents, "text/html", "utf-8", null); 
```

这对我有用。

# replace - BaseX XQuery 替换

> ID：13601782
> 
> 赞同：1
> 
> 时间：2012-11-28T09:28:43.710
> 
> 标签：replace, xquery, basex, xquery-update

我有以下问题。我想通过使用 baseX 作为数据库来替换我的 xquery 文件中元素的值。xquery代码如下：

```
 let $db := doc('update.xml')

replace value of node $db//elem with 'haha'

return <result> {$db//elem/text()} </result> 
```

xml 文档包含以下元素：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<root xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<check>
    <ok>
        <elem>test</elem>
        <help></help>
    </ok>
</check>
</root> 
```

每次我想执行这个 xquery 时都会抛出这样的错误：

```
Expecting 'where', 'order' or 'return' expression 
```

那么我应该做什么或改变，只是将元素中的文本“test”替换为“haha”？如果我只使用这行代码它可以工作，但我必须读出 URL-Parameter 所以我需要更多的代码行，除了“replace ....”行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:04:44.670

`let`启动一个可能不直接包含更新语句的 flwor 表达式。您必须`return`在这两者之间加上一个：

```
let $db := doc('update.xml')
return
  replace value of node $db//elem with 'haha' 
```

您还可以进行任意计算，但请确保查询不会返回任何输出。

无法[同时使用更新语句并返回结果](http://docs.basex.org/wiki/XQuery_Update#Returning_Results)。

# javascript - 如何从Firefox插件调用用户javascript

> ID：13601790
> 
> 赞同：0
> 
> 时间：2012-11-28T09:29:09.903
> 
> 标签：javascript, firefox-addon, greasemonkey, xpcom

我对为 Firefox 编写插件非常陌生。我正在编写一个插件来拦截插件内部的 URL 协议（我在这里得到它：http: [//www.nexgenmedia.net/docs/protocol/](http://www.nexgenmedia.net/docs/protocol/)），然后调用一些用户加载的 Jscript 函数来传递数据。

我的问题是，当插件运行时，如何从 firefox 插件中调用用户脚本或greasemonkey 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:08:24.833

从扩展运行任意代码通常是一个非常糟糕的主意。扩展代码以特权模式执行，可以访问`XPCOM`（以及整个系统）。如果你真的想执行外部 JS，`Components.utils.Sandbox`我想最好的方法是。其他选项是`nsISubscriptLoader`或`Components.utils.import`。此外，afaik 此类扩展不会通过[Mozilla Addons](http://addons.mozilla.org)的安全检查，因此不会被接受。

# ruby-on-rails-3 - 配置更新后如何重置 Rails 中的压缩资产

> ID：13601798
> 
> 赞同：0
> 
> 时间：2012-11-28T09:29:33.803
> 
> 标签：ruby-on-rails-3, caching, asset-pipeline

我对 Rails 资产有疑问。我第一次在产品上运行它

```
config.assets.compress = true. 
```

现在我想获得未压缩的资产以获得更好的调试选项，但是在配置更新和服务器重启后仍然有单个文件用于 css 和 js。

还要手动删除缓存，但对此无效：

```
rm -rf tmp/cache/assets/{*,.*} 
```

我错过了哪一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:26:33.923

有一个清理资产的 rake 任务，我认为这会删除`public/assets`目录

```
rake assets:clean 
```

# c# - TLS 连接：覆盖证书验证

> ID：13601799
> 
> 赞同：0
> 
> 时间：2012-11-28T09:29:38.190
> 
> 标签：c#, ssl-certificate, bouncycastle, ssl, windows-phone-8

尽管尝试了所有安全措施，但我希望我的客户接受像我们服务器中的那样的自签名 X.509 证书。我正在使用 WP8 SKD 以及用于 Windows Phone 的 Bouncy Castle 的 C# 绑定，称为 bouncywp7.1，因此它的大多数类/方法都可用。

在 Android 中完成此操作的方式是创建我自己的证书信任管理器并使其对所有证书都返回 true。

```
public static void allowAllSSL() 
{
    HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
        @Override
        public boolean verify(final String hostname, final SSLSession session) {
            return true;
        }
    });
    SSLContext context = null;
    try {
        context = SSLContext.getInstance("TLS");
        context.init(null, sTrustManagers, new SecureRandom());
    } catch (final NoSuchAlgorithmException catchException) {
        LoggerFactory.consoleLogger().printStackTrace(catchException);
    } catch (final KeyManagementException catchException) {
        LoggerFactory.consoleLogger().printStackTrace(catchException);
    }
    mFakeFactory = context.getSocketFactory();
    HttpsURLConnection.setDefaultSSLSocketFactory(mFakeFactory);
} 
```

在 Windows Phone 8 上做同样的事情最不痛苦的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T02:26:54.947

AFAIK 你不能在 WP8 上欺骗 SSL。您要么使用 SSL，要么不使用。您不能覆盖证书验证（或者至少我从未听说过它）。

如果您使用 SSL 并且想要使用自定义证书，那么用户应该是安装它的人。例如，通过电子邮件向用户发送 cer 文件，让用户通过设置屏幕加入您的组织，甚至从您的应用程序中使用 Luncher.LaunchFileAsync() 获取 CER 文件。

例如，如果您在项目中包含 FiddlerRoot.cer（使用 Build Action = Content），您可以要求用户使用以下代码片段安装它：

```
 private async void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        Launcher.LaunchFileAsync(await Package.Current.InstalledLocation.GetFileAsync("FiddlerRoot.cer"));
    } 
```

运行此代码片段会向用户显示以下对话：

![安装认证确认对话框](../Images/add462b3b27e1e3d5beabaee050f592b.png)

# c# - 使用 twilio 来自 asp.net 的异步 SMS

> ID：13601800
> 
> 赞同：3
> 
> 时间：2012-11-28T09:29:45.263
> 
> 标签：c#, asp.net, asynchronous, twilio

我有一个 asp.net Web 应用程序，可以通知业务客户有关可用约会的信息。场景如下。

1.  页面按钮单击事件处理程序将新约会保存到数据库
2.  注册客户的偏好与创建的新约会相匹配
3.  偏好匹配的客户会通过 Twilio 向其发送带有预约详细信息的 SMS 消息。

我的问题是我需要将第 2 步和第 3 步与页面的执行分开。因此，一旦创建了约会，以下步骤将异步传递给辅助类，该类在后台线程上处理匹配和 SMS 消息，同时页面控件返回并将用户重定向到另一个页面。后台类方法不返回任何值（public void）。

很抱歉没有早点发布代码。

创建约会.aspx.cs

```
 private void SaveAppointment()
{
    using (var db = new EntitiesModel())
    {
       //code to create a new appointment

     //Sending SMS messages to multiple clients

        SMSHelper myhelper = new SMSHelper();
        myhelper.SendApptSMS(newappt);

        //control returned to the page redirect to dashboard
        Response.Redirect("~/authuser/default.aspx");
    }
} 
```

短信助手.cs

```
public async void SendApptSMS(Appointment newappointment)
{
    using (var db = new EntitiesModel())
    {
        //retrieve multiple clients that match preferences
    foreach (var item in clients)
   {
      //for each client send SMS message using Twilio's REST API
    }
        //Thread.Sleep(10000);

    }
} 
```

我希望页面在调用异步方法后继续处理，然后在后台线程上执行。这不会发生。在 SMSHelper 完成发送所有消息之前，不会到达 response.redirect。

希望这可以解决问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-14T15:51:51.113

为什么不拥有一个单独的服务或后台任务，在后台每分钟（左右）运行一次并运行 SendApptSMS() 方法？

# asp.net - 将可下载的可执行文件添加到网站

> ID：13601808
> 
> 赞同：0
> 
> 时间：2012-11-28T09:29:53.510
> 
> 标签：asp.net, build, download, installation

我有一个网站项目和一个通过 web 服务与同一数据库通信的 Outlook 插件。我想将 Outlook 插件作为“可下载文件”添加到网站界面。

如何*在构建时*实现 Outlook 插件安装程序最终位于网站的“下载”文件夹中？

那可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:49:01.310

我不确定这真的是一个好主意，因为可能不是*每次*构建它时都可以上传它（损坏的构建？未经测试的错误？），但无论如何，这个想法可能是这样的：

*   找到一种方法在计算机中挂载作为磁盘 Z 的 FTP 站点并将其保留在那里
*   你可能想先压缩它，所以找到并安装命令行 zip.exe
*   找到一种每隔几分钟就开始自动作业的方法（如批处理文件）

作业（可能是批处理文件）应该这样做：

*   检查 C:\build\folder\executable.exe 的文件创建日期，并将其与 Z:\download\folder\executable.zip 的文件创建日期进行比较
*   仅当较新时，将 C:\build\folder\executable.exe 压缩到 C:\build\folder\executable.zip 并将 C:\build\folder\executable.zip 复制到 Z:\download\folder\executable.zip

您可以选择使用哪种语言编写脚本，Windows 批处理可以执行（XCOPY 命令只能复制较新的文件），我知道 PHP，并且可能会将其与调用“php my_php_task.php”的批处理文件一起使用，但您可以启动您喜欢的任何语言翻译。

**更新**

对于压缩，您可以下载： http: [//www.info-zip.org/Zip.html](http://www.info-zip.org/Zip.html)

对于仅复制较新的文件，您可以将 XCOPY 与选项 /D（仅限较新）和 /Y（确认覆盖）一起使用。此处的其他选项：http: [//www.computerhope.com/xcopyhlp.htm](http://www.computerhope.com/xcopyhlp.htm)

所以批处理文件可能看起来与这两行类似：

```
zip -f C:\build\folder\executable.zip C:\build\folder\executable.exe
xcopy /D /Y C:\build\folder\executable.zip Z:\download\folder\executable.zip 
```

每 30 秒调用一次，工作就完成了。zip 中的 -f 选项和 xcopy 中的 /D 选项确保脚本除了检查创建日期之外什么都不做（如果您最近没有重建文件）。

# android - 将 Android 片段移动到不同的容器无法更改片段的容器 ID

> ID：13601811
> 
> 赞同：8
> 
> 时间：2012-11-28T09:30:09.413
> 
> 标签：android, android-fragments, viewgroup, fragmenttransaction

这是我希望我的应用程序在平板电脑上执行的操作。片段 (0) 有一些菜单可以显示片段 (1)...(n)，如下所示：

```
-----------------
|   |   |   |   |
|   |   |   |   |
|(0)| X | X | X |
|   |   |   |   |
|   |   |   |   |
-----------------
 becomes
-----------------
|   |   |   |   |
|   |   |   |   |
|(0)|(1)| X | X |
|   |   |   |   |
|   |   |   |   |
-----------------
 and then
-----------------
|   |   |   |   |
|   |   |   |   |
|(0)|(2)|(1)| X |
|   |   |   |   |
|   |   |   |   |
-----------------
 etc... 
```

Fragment0 从不移动，其他的都向右移动。离开右侧边缘的碎片将被销毁。

因此，我使用水平 LinearLayout 设置了我的 XML 布局，并包含 4 个具有正确 ID 的 FrameLayout（fragment0...fragment3）

我可以实例化并显示fragment0，然后显示fragment1，但之后我无法将其向右移动，我得到：

```
ERROR/AndroidRuntime(343): FATAL EXCEPTION: main
java.lang.IllegalStateException: Can't change container ID of fragment ... 
```

我发现的唯一相关问题是[这个](https://stackoverflow.com/questions/9906254/illegalstateexception-cant-change-container-id-of-fragment)和[那个](https://stackoverflow.com/questions/9092048/swap-two-fragment-simultaneously/9962906)，尝试了所有不同的解决方案，但没有运气。

尝试，`FragmentTransaction.remove()`然后`.add()`尝试`.replace()`，以不同的顺序尝试它们并在中途提交（甚至尝试按照某人的建议提交两次），尝试调用`addToBackStack()`......仍然没有运气。

问题是是否可以像这样使用 FragmentTransaction 移动片段。如果是的话，我做错了什么（还有奖金，是否可以制作动画？）。如果不是，那么实现这一点的正确方法是什么？

请注意，我不想每次都重新实例化片段（每个片段都会在网络上进行一些可能需要一些时间的查询）。可以将所有数据提取回活动以重新创建一个，但如果可能的话，我宁愿不这样做......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-04T09:33:00.483

是的，可以使用`remove()`函数更改片段的容器。

这里的问题是`commit()`。这是一个异步调用，并将其安排在主线程上。`FragmentManager`因此，在将其添加到另一个容器之前立即强制执行此操作。

为此，我们将不得不使用**`executePendingTransactions()`**函数。调用此方法后，尝试将片段添加到新容器中。

文档：[executePendingTransactions()](http://developer.android.com/reference/android/app/FragmentManager.html#executePendingTransactions%28%29)

代码示例：

```
FragmentManager fManager = getSupportFragmentManager();
FragGroups fragGroups = (FragGroups) fManager.findFragmentByTag("groups");
if (fragGroups != null) {
     fManager.beginTransaction().remove(fragGroups).commit();
     fManager.executePendingTransactions();
} else {
     fragGroups = new FragGroups();
}
if (mTwoPane) {
    fManager.beginTransaction().replace(R.id.fragment_container_groups, fragGroups, "groups").commit();
} else {
    fManager.beginTransaction().replace(R.id.fragment_container, fragGroups, "groups").commit();
} 
```

享受。欢迎反馈

**编辑**

我想在这里补充一点。由于我有同样的问题，遇到了这个线程并应用了建议的更改。问题仍然存在。然后我查看了该线程的最后一条评论，解决了我的问题：`addToBackStack()`在提交事务时删除方法，或者如果您有意使用它，请在将片段添加到另一个容器之前从后台堆栈中删除片段。希望对以后的读者有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T15:51:36.730

我不知道这是否正是您想要的，但我就您的问题做了一个小样本。基本上，您将使用布局文件进行正确的移位，每个移位片段都有一个包装容器。代码示例对于答案来说有点大，因此我将其发布到[您可以在此处找到的要点中](https://gist.github.com/4162098)。在该示例中，按每个 的`ListFragment`项目（片段 1 -> 片段 2 -> 片段 3）以查看行为。

# iphone - 如何在 iOS 中的 UIScrollView 中显示多个图像

> ID：13601812
> 
> 赞同：6
> 
> 时间：2012-11-28T09:30:20.967
> 
> 标签：iphone, imageview, scrollview

我正在制作一个 iPhone 应用程序，我需要在其中显示 UIScrollView 中的一些图像，左右将有两个按钮，用户可以单击按钮，它将显示下一个或上一个图像。底部还有一个按钮，当用户单击该按钮时，它将显示我们在滚动视图中选择的图像。我想知道我们如何在该滚动视图中显示多个图像以及在选择底部按钮时，如何找到滚动视图中存在的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-26T16:05:20.547

来自 danielbeard.wordpress.com 的示例

如果您的图像名称不仅仅是数字：

```
 UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    [scrollView setPagingEnabled:YES];
    [scrollView setAlwaysBounceVertical:NO];

    NSArray *imagesArray = [NSArray arrayWithObjects:@"img1.png", @"img2.png", @"img3.png", nil];

    for (int i = 0; i < [imagesArray count]; i++)
    {
        CGFloat xOrigin = i * scrollView.frame.size.width;

        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, scrollView.frame.size.width, scrollView.frame.size.height)];
        [imageView setImage:[UIImage imageNamed:[imagesArray objectAtIndex:i]]];
        [imageView setContentMode:UIViewContentModeScaleAspectFit];

        [scrollView addSubview:imageView];
    }

    [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width * [imagesArray count], scrollView.frame.size.height)]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T09:39:15.283

看看这个例子： [http ://danielbeard.wordpress.com/2012/09/17/adding-a-uiscrollview-to-a-uiview-ios/](http://danielbeard.wordpress.com/2012/09/17/adding-a-uiscrollview-to-a-uiview-ios/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:35:36.507

**Apple.developer** [**PhotoScroller**](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)演示了使用嵌入式 UIScrollViews 和 CATiledLayer 来创建丰富的用户体验，用于显示和分页可以单独平移和缩放的照片。

CATiledLayer 用于提高高分辨率图像或大型照片集的分页、平移和缩放性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T09:43:30.437

您只需首先在运行时和图像上创建一个新视图并为所有视图分配标签，如 1000 或 100 并增加标签值，然后将此视图添加到滚动视图和两个用于左右移动的按钮，并进行它们的输出操作并添加所有在这样的可变数组中滚动视图子视图

```
 indexStart=100;
 UIView *AddView=[[UIView alloc]initWithFrame:CGRectMake(55, 0, 100, 100)];

                AddView.tag=indexStart;
                btnTap.tag=indexStart;

                UIImageView *imgview=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];

                [AddView addSubview:imgview];

                imgview.image=image;
                imgview.tag=1000;
               [ScrollView addSubview:AddView];
                [imgArray addObject:AddView]; 
```

您使用循环来执行此操作，并在左右按钮上使用此代码，在此代码中，editImgeView 是左右按钮之间的图像视图，您可以在其中显示图像，您只需简单的 indexstart ++ 或 - 如果用户选择右或左按钮

```
for (int index = 0; index < [imgAddArrayAfter count]; index ++ ) {
         NSLog(@"index %d",index);
        UIView *vc=[imgArray objectAtIndex:index];
        NSLog(@"view tag %d",vc.tag);
        if(vc.tag == indexStart)
        {

            UIImageView *modalView=(UIImageView *)  [vc viewWithTag:1000];
            editImgeView.image=modalView.image;
        }
    } 
```

我希望你明白 ;-）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-03T09:22:47.700

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    scrollView.contentSize = CGSizeMake(320, 465);

    [scrollView setScrollEnabled:YES];
    [scrollView setPagingEnabled:YES];
    [scrollView setAlwaysBounceVertical:NO];
    [self.view addSubview:scrollView];

    NSMutableArray *arrImage = [NSMutableArray arrayWithObjects:@"food1.jpeg", @"food2.jpeg", @"food3.jpeg",@"food4.jpeg", @"food5.jpeg", @"food6.jpeg",@"food7.jpeg", @"food8.jpeg", @"foo9.jpeg",@"food10.jpeg", @"food11.jpeg", @"food12.jpeg",@"food13.jpeg", @"food14.jpeg", @"food15.jpeg", @"food16.jpeg", nil];

    for (int i = 0; i < [arrImage count]; i++)
    {
        CGFloat xOrigin = i * scrollView.frame.size.width;

        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, scrollView.frame.size.width, scrollView.frame.size.height)];
        [imageView setImage:[UIImage imageNamed:[arrImage objectAtIndex:i]]];
        [imageView setContentMode:UIViewContentModeScaleAspectFit];

        [scrollView addSubview:imageView];
    }

    [scrollView setContentSize:CGSizeMake(scrollView.frame.size.width * [arrImage count], scrollView.frame.size.height)];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-24T21:24:41.043

我知道这个线程很旧，但我认为在滚动视图中加载大量图像的问题仍然存在。如果您想在滚动视图中加载图像，您将面临内存使用问题。图像很可能会占用您设备的大部分内存。唯一的做法是创建类似于 uitableview 的可重用滚动视图 - 具有准备显示的视图池（带有图像）的滚动视图。这可能非常复杂。

我创建了开源项目以支持滚动视图中可重用的加载图像。这很容易实现。您需要调用几个委托和数据源方法，仅此而已。为了便于理解，还有 obj-c 和 swift 的示例项目。请随时贡献。我希望它会有用。

这是一个来源：[https ://github.com/sumofighter666/ReusableScrollView](https://github.com/sumofighter666/ReusableScrollView)

# html - 如何在 Jquery 中选择和切换所选元素的子 div 的隐藏

> ID：13601815
> 
> 赞同：0
> 
> 时间：2012-11-28T09:30:30.200
> 
> 标签：html, show-hide, children, jquery

我对 Jquery 很陌生，当我尝试在我的程序中选择子 div 时遇到问题。关键是要有一个触发 jquery 函数的按钮。此功能旨在从按钮所在的位置获取所有子 div 并将它们隐藏。这是我的jQuery代码：

```
$(".button").click(function () {
    $(this).children('div').fadeToggle("fast", function () {
    });
}); 
```

我的html很简单。一个 div 中的 div 和第二个 div 中的 div 是另外两个 div。

```
<div class="clients>
    <input type="button" class="button" id="button" value="Hide Sites" autopostback="false"/>
    <div class="websites>
        <div class="urls"></div>
        <div class="data"></div>
    </div>
</div> 
```

这虽然行不​​通。我试过使用 jquery.next 和兄弟姐妹，但也无法让它们工作。Jquery.closest 向上看，找到了容器 div（客户端），但这也不是我需要的。大伙帮忙？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:32:55.043

你已经破坏了 html，`closing quote missing`here`class="clients`和 here `class="websites` ，你必须使用**[next()](http://api.jquery.com/next/)**而不是**[children()](http://api.jquery.com/children/)**

**[现场演示](http://jsfiddle.net/9Te2Z/1/)**

```
<div class="clients">
    <input type="button" class="button" id="button" value="Hide Sites" autopostback="false"/>
    <div class="websites">
        <div class="urls">1</div>
        <div class="data">2</div>
    </div>
</div>​

$(".button").click(function () {
    $(this).next('div').fadeToggle("fast", function () {
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:34:26.177

试试这个格式

```
$('.clients').on('click', $('.button'), function(){

});

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T15:51:16.140

通过使用 jquery.siblings 解决了它：

```
$(".button").click(function () {
    $(this).siblings('div').fadeToggle("fast", function () {
    });
}); 
```

我以前尝试过兄弟姐妹，但我想我有一个错误，因为现在它可以工作了。谢谢你们！

# wpf - 圆形区域中的旋转文本

> ID：13601817
> 
> 赞同：2
> 
> 时间：2012-11-28T09:30:33.300
> 
> 标签：wpf, text, rotation

我们如何将旋转的文本放置在圆形区域中。请在我想要实现的目标下方找到示例图像。

![在此处输入图像描述](../Images/c1dc3c156ac0de6f9ae77cd081eec937.png)

提前致谢。

伊尔凡

# regex - 需要正则表达式帮助以提取 sql 子查询

> ID：13601821
> 
> 赞同：1
> 
> 时间：2012-11-28T09:30:45.047
> 
> 标签：regex

我是 regx 的新手...我想使用正则表达式从给定查询中获取子查询。

例如我有如下查询

```
Select * from (
   select * from Table_A where ID = 90 
   UNION 
   select * from Table_B where ID = 90
)  as SUBQUERY left join TABL_ABC abc ON (abc.id = SUBQUERY.id) 
```

现在我希望我的正则表达式只匹配以下行：

```
select * from Table_A where ID = 90 
   UNION 
   select * from Table_B where ID = 90 
```

请帮助我，提前谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:35:53.013

如果它是一个没有额外大括号的简单子查询，你可以使用这个正则表达式

```
/\(\s*(select[^)]+)\)/i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:36:16.633

```
<?php
$sql = 'Select * from ( select * from Table_A where ID = 90 UNION select * from Table_B where ID = 90 ) as SUBQUERY left join TABL_ABC abc ON (abc.id = SUBQUERY.id)';

if( preg_match('/\(\s*(select.+)\) as /iU', $sql, $matched ) ){
    $subquery = trim( $matched[1] );
    var_dump( $subquery );   
} 
```

# pinterest - Pinterest“此页面上的任何图像”pin-it 按钮是否应该显示 pin 数？

> ID：13601827
> 
> 赞同：2
> 
> 时间：2012-11-28T09:30:59.293
> 
> 标签：pinterest

将任何图像固定在页面上的代码如下：

```
<a data-pin-config="above" data-pin-do="buttonBookmark" href="//pinterest.com/pin/create/button/"><img src="//assets.pinterest.com/images/PinExt.png" /></a><script src="//assets.pinterest.com/js/pinit.js"></script> 
```

来源：http : [//business.pinterest.com/widget-builder/#do_pin_it_button](http://business.pinterest.com/widget-builder/#do_pin_it_button)

的选项`data-pin-config`可用，这意味着应该显示引脚数。经过测试，即使我已经准确地复制并粘贴了代码，我也无法看到引脚数。该图钉工作正常，页面/图像正确固定到板上。

如果 Pinterest 依赖于 pin 的图像 URL，那么我可以理解为什么 pin 数不会显示，因为该页面上的任何图像都可能是 pin 的图像。

基本上，我想知道“页面上的任何图像”针选项是否应该显示针数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:28:00.333

“页面上的任何图像”按钮不用于显示引脚数，因此小部件构建器不应显示“页面上的任何图像”版本的 data-pin-config。我的错，对不起，改正！

# xcode - 应用程序在 ios6 上崩溃，但在 ios5 中工作正常

> ID：13601832
> 
> 赞同：0
> 
> 时间：2012-11-28T09:31:14.397
> 
> 标签：xcode, ios5, crash, ios6, sip

我有一个使用 SIP 协议进行音频/视频通话的应用程序。当我尝试使用 ios5 设备拨打电话或在 ios 5 设备上使用它时它工作正常，但是当我尝试在 ios 6 上拨打或使用它时它崩溃了。它崩溃了仅当我尝试使用 ios6 设备与 ios5 设备进行视频通话时才开启。崩溃消息

```
Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [2.74665e-34 nan]' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:36:26.863

检查此答案[链接](https://stackoverflow.com/questions/10023321/ios-calayerinvalidgeometry) 可能您正在计算某个帧的值，它是 NaN（不是数字）。对于 SIP 呼叫，最好的是 iDoubs，一个非常简单的 API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:10:39.437

没有更多代码很难知道出了什么问题，但这是我的两分钱：如果您的代码中有一个视图（类似于*UIWebView*），并且您正在使用普通的*init*方法对其进行初始化，请尝试将其更改为**initWithFrame**到马上给它一个框架。问题可能是您试图在分配帧之前使用该元素，从而导致 CALayerInvalidGeometry 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T07:18:15.117

在分析了我的崩溃报告和我的代码之后

```
*** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [nan 96]' 
```

我发现了这个错误。我正在使用一个从另一个类覆盖的方法，但不知何故它在 iOS 6 中不起作用，这就是为什么它返回一些零值，因为这个零值它返回 nan 值并且它崩溃了。

# javascript - 继承语言环境无法正常工作

> ID：13601833
> 
> 赞同：1
> 
> 时间：2012-11-28T09:31:20.943
> 
> 标签：javascript, mootools, locale, mootools-more

我正在使用 MooTools 1.4.1（完整更多）并遇到继承问题

```
Locale.define('de-CH').inherit('de-DE', 'Date'); 
```

当我使用此语言环境（de-CH）并按如下方式访问它时

```
var myLocale = Locale.getCurrent() 
```

myLocale.sets.Date 没有定义，唯一定义的是 myLocale.sets.FormValidator，但这只是因为它是显式设置而不是继承的。

例如，在验证日期时，这显然会导致错误。

所以，在我看来，我做错了什么或者 Locale 的继承机制有一个错误。

有人有经验吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:27:31.010

您不应该直接使用`sets`语言环境的属性。该`sets`属性将仅包含在该语言环境中定义的集合。继承集仅在继承的语言环境中定义（您可以通过查看实际看到`myLocale.inherits.sets`，但也不应该直接使用）。

相反， using`myLocale.get('Date')`将返回您需要的集合。

Using`Locale.get('Date')`也能正常工作，并且总是返回当前活动区域设置的集合（通过 设置`Locale.use('de-CH')`）。

您还可以使用诸如`.get('Date.months')`获取特定属性的调用。

更多信息可以在[MooTools 的语言环境文档](http://mootools.net/docs/more/Locale/Locale)中找到。

# java - 在 bin 索引计算中摆脱循环

> ID：13601834
> 
> 赞同：2
> 
> 时间：2012-11-28T09:31:21.893
> 
> 标签：java, algorithm

这是[.`HashMap`](http://en.literateprograms.org/Hash_table_%28Java%29#Adding_a_new_element)

它提供了用于获取 bin 索引的代码：

```
private int getIndex(K key)
{
    int hash = key.hashCode() % nodes.length;
    if (hash < 0)
        hash += nodes.length;
    return hash;
} 
```

> 为了确保散列值不大于表的大小，用户提供的散列函数的结果以表的长度为模。我们需要索引为非负数，**但如果左操作数（哈希值）为负数，则取模运算符 (%) 将返回负数，因此我们必须对其进行测试并使其为非负数**。

如果`hash`结果是非常大的负值，`hash += nodes.length`则循环中的加法可能需要大量处理。

我认为应该有`O(1)`它的算法（与`hash`价值无关）。

如果是这样，如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:33:36.723

**它不能是一个很大的负数。**

的结果`anything % nodes.length`总是小于`nodes.length`绝对值，所以你需要一个`if`，而不是一个循环。这正是代码的作用：

```
if (hash < 0) /* `if', not `while' */
    hash += nodes.length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:49:09.003

这不是[HashMap](http://www.docjar.com/html/api/java/util/HashMap.java.html)在现实中使用的方法。

```
272       /**
273        * Returns index for hash code h.
274        */
275       static int indexFor(int h, int length) {
276           return h & (length-1);
277       } 
```

这是有效的，因为`length`总是 2 的幂，这与*无符号的相同* `% length`

> 如果 hash 结果是非常大的负值，则循环中添加的 hash += nodes.length 可能需要大量处理。

此时的哈希值必须介于两者之间`-length+1`，`length-1`因此它不能是一个非常大的负值，并且如果这样做，代码将无法工作。无论如何，无论价值有多大，成本总是一样的。

# java - 运行 Web 应用程序时出现错误“HTTP 状态 404”-“请求的资源不可用”？

> ID：13601837
> 
> 赞同：0
> 
> 时间：2012-11-28T09:31:36.110
> 
> 标签：java, eclipse, tomcat, web-applications

我正在使用 eclipse helios 和 tomcat 7.0.33 来开发 Web 应用程序。我正在使用带有 ecrise helios 的“com.sysdeo.eclipse.tomcat_3.3.0”插件，并使用首选项向 eclipse 添加了服务器（tomcat）。

我也成功地启动和停止了 tomcat 服务器。我在服务器上使用预安装的 jre 作为 Java。

但我无法成功运行网络应用程序。我还从互联网下载了 zip 示例并在 eclipse 中导入，但无法成功运行它。

是否有任何好的链接解释如何使用 Eclipse Helios 和 Tomcat 7.0.33 开发动态 Web 应用程序并成功运行它们？？？

或者还有什么其他可能是这个错误的原因？？？？

寻求帮助！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T11:54:52.373

嗯，你把项目添加到 Tomcat 实例了吗？在服务器视图下，如果展开（+）列出的 Tomcat 服务器是下面显示的项目吗？如果没有，请右键单击服务器并使用添加/删除对话框。

如果您已经完成了所有这些，并且该项目确实已添加到 Tomcat，那么当您尝试运行其中一个 JSP 时是否会出现任何错误？例如，如果您选择了欢迎页面，右键单击并选择 Run As --> Run on Server，您是否看到任何错误？

编辑：我很抱歉，我看到你说你看到了 404 异常。也许尝试使用添加/删除对话框删除并重新添加项目。我知道我有时会看到它变得不稳定，这可能会重置任何配置错误。

以下是更多细节 - 希望他们有所帮助：

所以，这是我的 IDE 中的空 Tomcat 服务器（正在运行）。 ![这是我在 Eclipse 中的空 tomcat](../Images/0ff8341ac9d08b4d25232f4a6cde80ff.png)

要添加我的项目，我右键单击以查看显示的上下文菜单，然后选择添加和删除。 ![在 Eclipse IDE 中向 Tomcat 添加和删除项目](../Images/a2b43c61095e80372f5d2f88f1d84d94.png)

当我选择添加和删除时，我看到这个对话框显示了可以添加的项目。我选择要添加的项目，点击添加按钮，然后完成。 ![添加和删​​除空](../Images/9bb1e90aa0911218f4a3505528b2612d.png)

完成后，我看到我的项目已添加到我的 tomcat 实例中。 ![在此处输入图像描述](../Images/d06049e471c3cd5099eca35ab763a33a.png)

同样，Tomcat 可能需要重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T05:44:54.937

oki .. 现在我从头开始添加服务器。我已经删除了所有以前的东西和插件。

再次从

服务器选项卡-> 右键单击​​服务器选项卡（在底部）-> 新建

-> 服务器，然后选择“Tomcat v7.0 服务器”。

在新的服务器环境中，我正在使用以下详细信息

```
 Name :- Apache Tomcat v7.0 (3)

Tomcat Installation Directory :-C:\Documents and Settings\499451\My Documents\Tomcat_7\apache-tomcat-7.0.33,,,   JRE :- jre6(installed JRE) 
```

然后我点击完成按钮。

然后在“定义新服务器”对话框中，我正在使用详细信息

服务器的主机名：- localhost

服务器名称：- 本地主机上的 Tomcat v7.0 服务器

服务器运行环境：- Apache Tomcat v7.0

然后我单击完成按钮，添加的 tomcat 服务器现在显示在服务器选项卡下的窗口中。

但是当我输入 URL 时：“http://localhost:8080/”

## 然后我收到以下错误：

HTTP 状态 404 -/

类型：- 状态报告

信息 ：-/

## 描述：-请求的资源不可用。

这个错误的原因可能是什么？

寻求帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T09:04:53.767

这是一个老问题，但也许我可以帮助到这里的人。

如果您无法启动并运行您的 tomcat，您应该在 eclipse 的服务器选项卡中双击创建的服务器。将在 Eclipse 中打开一个新选项卡。在那里，在服务器位置下，选择中间选项“使用 Tomcat 安装”。然后点击[https://localhost:8080/](https://localhost:8080/)。它应该工作

请注意，如果您已经添加了 war 文件，则应在尝试上述建议之前将其删除。

希望能帮助到你。

# ruby - Ruby - 删除部分文本

> ID：13601843
> 
> 赞同：1
> 
> 时间：2012-11-28T09:31:49.070
> 
> 标签：ruby, regex, string

我有类似这样的文字：

```
<p>some text ...</p><p>The post <a href="http://url_address/">text...</a> appeared first on <a href="http://url_address">some another text</a>.</p> 
```

我需要从中删除所有内容`<p>The post`，因此结果将是：

```
<p>some text ...</p> 
```

我正在尝试这样做：

```
text.sub!(/^<p>The post/, '') 
```

但它只返回一个空字符串......如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:36:54.820

您的正则表达式不正确。它匹配`<p>The post`字符串开头的所有内容。你想要相反的：从它的位置匹配到字符串的末尾。看一下这个。

```
s = '<p>some text ...</p><p>The post <a href="http://url_address/">text...</a> appeared first on <a href="http://url_address">some another text</a>.</p>'

s.sub(/<p>The\spost.*$/, '') # => "<p>some text ...</p>" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T09:35:52.220

'^' 匹配整个字符串的开头。尝试做

```
text.sub!(/<p>The post/, '') 
```

**编辑**只是更仔细地阅读它......

```
text.sub!(/<p>The post.*$/, '') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:36:16.773

您已指定`^`，它与字符串的开头匹配。你应该做

```
text.sub!(/<p>The post.*$/, '') 
```

[在http://rubular.com/r/c91EbHN0Af](http://rubular.com/r/c91EbHN0Af)玩这个

# vb6 - 如何在visual basic 6中通过元素的id获取元素的src属性

> ID：13601849
> 
> 赞同：0
> 
> 时间：2012-11-28T09:32:05.063
> 
> 标签：vb6, webbrowser-control

我有一个包含以下 HTML 内容的页面：

```
<img src="image.png" id="image"> 
```

在我的 VB6 代码中，我有一个加载该页面的 WebBrowser 控件，现在我想获取`src`图像的属性，我尝试了这个：

```
Dim image
image = WebBrowser1.Document.getElementById("image")

dim image_src as String
image_src = image.src 
```

但我得到了错误`Invalid qualifier`。我在函数调用`image`后调试了变量，我得到： .`getElementById``[object]`

那么，如何获取`src`图像的属性呢？

编辑：

最终起作用的是：

```
image = WebBrowser1.Document.getElementById("image").src 
```

但对我来说，这没有任何意义，如果上面的代码有效（只是测试过），我第一次尝试的代码怎么没有？我会很感激有人可以对此提供解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:36:57.180

“您经常需要访问 HtmlElement 未直接公开的基础元素上的属性、属性和**方法，例如 IMG 元素上的 SRC 属性**或 FORM 上的 Submit 方法。GetAttribute 和 SetAttribute 方法使您能够检索并更改特定元素上的任何属性或属性，而 InvokeMember 提供对未在托管文档对象模型 (DOM) 中公开的任何方法的访问。如果您的应用程序具有非托管代码权限，您还可以使用 DomElement 属性访问未公开的属性和方法。” - [http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.aspx)

认为这表明根本问题是什么。老实说，不确定分配返回值如何更改 htmlElement 对象访问器。似乎这就是正在发生的事情。多年来实际上没有编写任何 VB6 代码，也许其他人实际上可以解释为什么会这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T15:50:34.607

```
Dim image 
```

那是错误的
image = WebBrowser1.Document.getElementById("image")

正确设置 image = WebBrowser1.Document.getElementById("image")

```
dim image_src as String
image_src = image.src 
```

# javascript - 未捕获的 SyntaxError：意外的令牌 <

> ID：13601850
> 
> 赞同：0
> 
> 时间：2012-11-28T09:32:08.263
> 
> 标签：javascript, jquery, cross-domain

我尝试通过 JavaScript访问[ORCID API 。](http://support.orcid.org/knowledgebase/articles/116874-orcid-api-guide)我使用 JSONP 进行跨域调用，但收到此错误：

> 未捕获的 SyntaxError：意外的令牌 <

贝娄是我使用的代码：

```
<html >
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function()
    {
$.ajax({
        type: 'GET',
        url:'http://pub.orcid.org/0000-0002-5426-4031/orcid-bio',
        dataType: 'jsonp'
        }).done(function(res){alert("sucess")}).
          fail(function(res){alert("failed"); console.log(res)}).
          always(function(res){alert("complete")});
    });
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:36:27.320

根据[此页面](http://support.orcid.org/knowledgebase/articles/132271-retreiving-data-with-the-public-api)，只有在您通过适当的标头明确请求时，服务才会返回 JSON `Accept`。

```
Accept: application/orcid+json 
```

这将告诉服务器生成 JSON 输出，它*不会*自动启用 JSONP，这似乎不受 ORCID 支持。

在他们的支持网站上有[一个添加 JSONP 的请求](http://support.orcid.org/forums/175591-orcid-ideas-forum/suggestions/3312127-add-jsonp-to-supported-datatypes)。

# stack-overflow - java.util.Properties.getProperty 的堆栈溢出

> ID：13601851
> 
> 赞同：2
> 
> 时间：2012-11-28T09:32:18.530
> 
> 标签：stack-overflow

运行我的应用程序时，40000 个事务在 java.util.Properties.getProperty 处出现堆栈溢出异常。

请在堆栈错误下方找到..

```
 java.lang.StackOverflowError
    at java.util.Hashtable.get(Hashtable.java:334)
    at java.util.Properties.getProperty(Properties.java:932)
    at java.util.Properties.getProperty(Properties.java:934)
    ... 80,0000 times 
    at java.util.Properties.getProperty(Properties.java:934)
    at java.lang.System.getProperty(System.java:653)
    at sun.security.action.GetPropertyAction.run(GetPropertyAction.java:67)
    at sun.security.action.GetPropertyAction.run(GetPropertyAction.java:32)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.io.PrintWriter.<init>(PrintWriter.java:78)
    at java.io.PrintWriter.<init>(PrintWriter.java:62)
    at java.util.logging.SimpleFormatter.format(SimpleFormatter.java:71)
    at org.apache.juli.FileHandler.publish(FileHandler.java:133)
    at java.util.logging.Logger.log(Logger.java:481)
    at java.util.logging.Logger.doLog(Logger.java:503)
    at java.util.logging.Logger.logp(Logger.java:703)
    at org.apache.commons.logging.impl.Jdk14Logger.log(Jdk14Logger.java:101)
    at org.apache.commons.logging.impl.Jdk14Logger.error(Jdk14Logger.java:149)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:253)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:662) 
```

我无法跟踪引发堆栈错误的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:40:20.120

简单的答案是您的测试用例内存不足。一个可能的解决方案是增加 JVM 的内存。我相信 JVM 的默认内存设置是 256M 或 512M。这对于您的测试执行应该足够了。短期解决方案是使用 -Xmx1700m（假设您有 1.7 gig 的内存可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:53:57.707

并不是说显而易见的，但也许您应该检查是否在执行这些事务*的循环内创建变量（40.000 次重复一次:-)），而不是重用相同的变量。*此外，*检查循环内的约束*可能会产生不必要的负载。*字符串连接*也会产生巨大的负载。所以，如果你有这样的事情：

```
for (i=0; i < getNumberOfTransactions(); i++){      // constraint checking inside the loop 

    int currentValue = myTransaction.getSomeData();  // creating new variable in every 
} 
```

你应该写这样的东西：

```
int numberOfTransactions = getNumberOfTransactions();
int currentValue = 0;

for(i=0; i < numberOfTransactions; i++){

    currentValue = myTransaction.getSomeData();
} 
```

虽然这个例子只使用了 2 个整数变量，但是当在循环中创建多个变量时（尤其是字符串连接），这会消耗大量内存。如果您有一些字符串连接，请改用*StringBuilder*类。

# solr - dismax 和 EdisMax 有什么区别？

> ID：13601853
> 
> 赞同：25
> 
> 时间：2012-11-28T09:32:22.887
> 
> 标签：solr, edismax, dismax

我想知道 DisMax 和 EDisMax 有什么区别..？有什么有用的参考资料可以了解。另外，我想知道哪些查询 DisMax 未能产生 EDisMax 能够产生结果的结果..？

EDisMax 有一些查询参数，如 boost 参数、ps 参数、pf2 参数；但是除了这个查询参数，***EDisMax 比 DisMax 好多少***；如何***在这两者之间处理查询。是***什么***因素使 EDisMax 比 DisMax 做得更好***。

一些查询未能在 DisMax 中给出结果，但 EDisMax 给出了这些查询的结果。

我用谷歌搜索了 DisMax 和 EDisMax 之间的区别。我发现，EDisMax中用到的参数只是DisMax和EDisMax的区别；但我期待一些技术上的东西可以在演示中向其他人解释。

***[http://ip:8983/solr/C73/select/?defType=edismax&q=ipod](http://ip:8983/solr/C73/select/?defType=edismax&q=ipod) OR video&fl=filename, score&hl=true&hl.fl=content contentenstem filename&hl.zetaContentField=content***

**对于上述查询，EDisMax 产生大约 238 个结果；但 DisMax 产生 0 结果。那么这两个解析器处理这个查询有什么区别;是什么让EDisMax产生结果。这就是我想知道的......**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T12:20:30.717

由于 Dismax 有很多限制，所以添加了 EDismax 查询解析器。

查看[SOLR-1553](https://issues.apache.org/jira/browse/SOLR-1553)

首先（如在文档中）： -

扩展的 dismax 解析器基于原始的 Solr dismax 解析器。

*   在没有语法错误的情况下支持完整的 lucene 查询语法
*   支持“and”/“or”在lucene语法模式下表示“AND”/“OR”
*   当出现语法错误时，会改进特殊字符的智能部分转义以防止它们发生……在这种模式下，仍然支持字段查询、+/- 和短语查询。
*   通过单词二元组改进邻近度提升......这可以防止需要文档中 100% 的单词才能获得任何提升，以及将所有单词放在单个字段中的问题。
*   高级停用词处理...查询的强制部分不需要停用词，但在邻近提升部分仍然使用（如果已编入索引）。如果查询包含所有停用词（例如 to be 或 not to be），那么所有停用词都是必需的。
*   支持 "boost" 参数.. 像 dismax bf 参数，但乘以函数查询而不是添加它
*   支持纯负嵌套查询...所以像 +foo (-foo) 这样的查询将匹配所有文档

但是，正如您会使用许多相关的 JIRA 来提高查询解析能力并支持更多功能一样。

通读 JIRA 真的很有见地:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T09:45:31.557

一般来说，EDisMax 是 DisMax 的扩展版本。您可以在以下链接中找到两个解析器的良好描述和差异。

1.  [DisMax 查询解析器](https://cwiki.apache.org/confluence/display/solr/The+DisMax+Query+Parser)
2.  [扩展的 DisMax 查询解析器](https://cwiki.apache.org/confluence/display/solr/The+Extended+DisMax+Query+Parser)

# ios - ios Cordova: 类似 tableview 的 html

> ID：13601855
> 
> 赞同：2
> 
> 时间：2012-11-28T09:32:34.503
> 
> 标签：ios, jquery-mobile, cordova, web-applications

我目前专注于使用`Apache Cordova`和的 iOS Web 应用程序`JQuery Mobile`。我想实现一个类似 tableview 的样式页面（它在 中调用`listview`）`JQuery Mobile`。我在 html 中实现了一个初始列表视图，我想：当我单击不同的行时，html 将向 iOS 发送消息，然后我使用本机代码创建一个请求。之后，我将成功的结果返回给 js，js 将更新列表视图，看起来就像您单击 tableview 中的一行并推入一个新页面。

这里的问题是：

1.  如何添加点击事件？
2.  在点击事件中，我怎么知道点击了哪一行？
3.  当我使用 JQuery Mobile 更新列表视图时，如何实现类似 tableview 的推送动画？

我对 Web 应用程序很陌生，实现动态创建包含请求结果的列表需要几个小时。我完全不知道如何走得更远。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:05:15.423

一和二。[这是](http://jsfiddle.net/Gajotres/fmJhF/)您的第一个和第二个问题的示例：

这是一个代码示例：

```
$('ul.listview-example[data-role="listview"] li').bind('click',function(event, ui){
    alert($(this).attr('id'))
}); 
```

第一个代码行将在每个 listview li 元素上绑定一个单击事件。$(this) 是一个选定的 li 元素。

如果你使用从不版本的 jQuery us .on( 而不是 .bind(，在旧版本中你也可以使用 .live( 。

**编辑 ：**

三、我认为这应该涵盖您的第三个问题：http: [//jsfiddle.net/Gajotres/YShLE/](http://jsfiddle.net/Gajotres/YShLE/)

# php - yii 如何注册 onbeforesave 事件模型？

> ID：13601857
> 
> 赞同：0
> 
> 时间：2012-11-28T09:32:37.957
> 
> 标签：php, yii

现在，我已经创建了10+一个模型，你需要在保存之前过滤内容，我如何注册一个Public的模型onbeforesave事件

```
protected function beforeSave()
    {
        if($this->hasEventHandler('onBeforeSave'))
        {
            $event=new CModelEvent($this);
            $this->onBeforeSave($event);
            return $event->isValid;
        }
        else
            return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:58:27.923

```
public function beforeSave() {
     if (!empty($this->attribute))
         // apply logic to validate content  
     return true;
 } 
```

提供要对其应用检查的内容的属性名称。对于一个 beforeSave() 到[这里的所有模型检查](http://www.yiiframework.com/wiki/10/how-to-automate-timestamps-in-activerecord-models/) ，[还有](http://www.yiiframework.com/forum/index.php/topic/32744-where-to-add-code-that-will-execure-for-all-models/)

# java - 带有 SafeHtml 的锚点

> ID：13601858
> 
> 赞同：2
> 
> 时间：2012-11-28T09:32:39.610
> 
> 标签：java, gwt, xss

您将如何将 SafeHtml 与链接结合使用？

场景：我们的用户可以输入可能包含链接的无格式文本，例如`I like&love http://www.stackoverflow.com`. 我们希望在 GWT 中安全地呈现此文本，但使链接可点击，例如`I like&amp;love <a="http://www.stackoverflow.com">stackoverflow.com</a>`. 除了在 GWT 前端渲染文本外，我们还希望通过电子邮件发送它，链接也应该是可点击的。

到目前为止，我们考虑了以下选项：

1.  将完整的文本作为 HTML 存储在后端，让前端假定它已正确编码 ( `I like&amp;love <a="http://www.stackoverflow.com">stackoverflow.com</a>`) -> 引入 XSS 漏洞
2.  在后端存储纯文本但链接为 HTML ( ) 并在前端`I like&love <a="http://www.stackoverflow.com">stackoverflow.com</a>`使用[HtmlSanitizer](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/safehtml/shared/HtmlSanitizer.html)
3.  在后端为链接 ( ) 存储纯文本和特殊编码，`I like&love [stackoverflow.com|http://www.stackoverflow.com]`并在前端使用自定义 SafeHtml 生成器

对我们来说，第三个选项看起来最干净，但它似乎需要最自定义的代码，因为我们无法利用 GWT 的 SafeHtml 基础架构。

有人可以分享如何最好地解决问题吗？到目前为止我们还没有考虑过其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:12:07.200

为什么不完全按照用户输入的方式存储文本，并在将其转换为输出时执行任何特殊处理（例如，用于发送电子邮件、创建 PDF 等）。这是最自然的方法，您不必撤消任何特殊处理，例如当您让用户编辑字符串时。

作为一般规则，我总是只为*直接*传输/存储/输出目标执行编码/转义/转换。偏离这条规则的原因很少，其中之一可能是性能，例如在数据库中缓存转换后的值。（在这些情况下，我认为最好为 DB 字段指定一个特定的名称，例如“text_htmltransformed”——这可以避免“过度转义”，这与不转义一样有害。）

注意：转义/编码不能替代输入验证。

# codeigniter - 将所有 Codeigniter 翻译都放在一个翻译文件中是否错误

> ID：13601860
> 
> 赞同：2
> 
> 时间：2012-11-28T09:32:43.897
> 
> 标签：codeigniter

寻找一些建议...

我正在使用 Codeigniter 创建一个多语言网站。CI 允许我创建多个语言文件，例如每个控制器一个，并在我需要时加载语言文件。

对我来说，只使用一种语言文件并自动加载它听起来更容易，但似乎并不鼓励这种方法。谁能告诉我使用一种语言文件（每种语言）是否可以，或者我应该为每个控制器使用一个语言文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:03:11.530

这取决于文件的大小，如果单个文件的大小太大，那么每次加载文件时都会加载该文件的所有数据，并且脚本将占用更多内存，如果是大语言文件的话总是使用多个文件并在需要时加载它，如果您的语言文件很小，最好使用单个文件，这样您就不需要管理它并且易于使用。

# javafx-2 - 是否可以将类导入 FXML块 (JavaFX-2)

> ID：13601861
> 
> 赞同：0
> 
> 时间：2012-11-28T09:32:45.253
> 
> 标签：javafx-2, fxml

我正在尝试 JavaFX-2，据说其中一项功能是我们可以在 FXML 文件中使用 Javascript 创建事件处理函数。困扰我的一件事是我无法立即访问 System 类。它需要被完全引用，例如“java.lang.System”。当我们需要控制台上的简单输出时，这变得很丑陋，我的意思是，“System.out.println”丑到可以打印一些东西。而且，即使我的 FXML 具有所有 <?import java.lang.*?> 语句，显然它不会影响 <fx:script> 标记的内部。

示例代码：（注意`<?language javascript?>`指令）

```
<?xml version="1.0" encoding="UTF-8"?>

<?language javascript?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.collections.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>
<?import javafx.scene.text.*?>

<AnchorPane fx:id="rootPane">
  <fx:script>
    function buttonAction(event){
      java.lang.System.out.println("finally we get to print something.");
      // System.out.println("This wouldn't work even if it wasn't a comment line, anyway");
    }
  </fx:script>
  <children>
    <Button id="close" mnemonicParsing="false" onAction="buttonAction(event)" text="">
      <graphic>
        <ImageView pickOnBounds="true">
          <image>
            <Image url="@../resources/close.png" preserveRatio="true" smooth="true" />
          </image>
        </ImageView>
      </graphic>
    </Button>
  </children>
</AnchorPane> 
```

所以我的问题是：有没有办法将类导入 <fx:script>？我记得我在 Actionscript3.0 中这样做真的很容易：`import flash.events.MouseEvent`...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T12:45:56.530

使用 javascript 内置`importPackage`或`importClass`函数。

```
 <fx:script>
    importPackage(java.lang);
    function buttonAction(event){
        System.out.println("finally we get to print something.");
    }
</fx:script> 
```

有关更多详细信息，请参阅：[http ://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html#jsimport](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html#jsimport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-09T11:31:21.387

这有点令人困惑，但来自 Sergey 的链接为后台发生的事情提供了很好的上下文（即将 java 扩展到脚本世界）。

尽管 Sergey 的解决方案有效，但它在可能是 javascript 的内联脚本中混合了 java 类方法（根据页面语言声明）。没有浏览器，所以没有“console.log()”，所以最好避免潜在的 java/js 混淆，只使用 print()：

```
<fx:script>
    function reactToClick(event) {
        print("I was clicked");
    }
</fx:script> 
```

下一个问题是 print() 方法从何而来……它不是 java 也不是 js。我认为答案在于用于支持 java/js 集成的 Nashorn javascript 引擎。Print() 是一个内置函数：[Nashorn shell 命令。](https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/nashorn/shell.html)

# windows-8 - windows8中用户的个人数据存储在哪里

> ID：13601862
> 
> 赞同：0
> 
> 时间：2012-11-28T09:32:48.163
> 
> 标签：windows-8

我想在windows8下开发一个个人理财软件，用户可以通过facebook或者twitter账号登录，我在哪里可以存储用户数据？我应该有一个服务器或其他安全的地方可以存储个人财务数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:37:53.190

我建议您使用 Azure 云服务，添加到 Windows 商店应用程序[http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started/)看起来非常简单。

此外，数据安全性比您最初想象的要困难得多，我会考虑确保数据在存储的任何地方都经过加密，因为这非常敏感。

# jquery - 基于类的jQuery多列选择器

> ID：13601865
> 
> 赞同：0
> 
> 时间：2012-11-28T09:33:09.427
> 
> 标签：jquery, html-table

我有一个包含多行和 tds 的表。在表中，我想选择两个不同行的 td，它们具有类 invalid-case-sensitive-value、invalid-sentence-scope-value

`find()`是否可以在单个语句中使用或任何其他功能来实现这些功能。

就像是：

```
var errorRows = $("topic-table").find("td.invalid-case-sensitive-value", "td.invalid-sentence-scope-value"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:34:46.083

只需使用多个选择器：[链接](http://api.jquery.com/multiple-selector/)

文件：

> 描述：选择所有指定选择器的组合结果。
> 
> 您可以指定任意数量的选择器组合成一个结果。这种多表达式组合器是选择不同元素的有效方法。返回的 jQuery 对象中的 DOM 元素的顺序可能不相同，因为它们将按文档顺序排列。此组合器的替代方法是 .add() 方法。

样本：

```
<!DOCTYPE html>
<html>
<head>
  <style>

  div,span,p {
    width: 126px;
    height: 60px;
    float:left;
    padding: 3px;
    margin: 2px;
    background-color: #EEEEEE;
    font-size:14px;
  }
  </style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div>div</div>

  <p class="myClass">p class="myClass"</p>
  <p class="notMyClass">p class="notMyClass"</p>
  <span>span</span>
<script>$("div,span,p.myClass").css("border","3px solid red");</script>

</body>
</html> 
```

# android - 我需要控制数据库版本以进行更新吗？

> ID：13601871
> 
> 赞同：0
> 
> 时间：2012-11-28T09:33:20.293
> 
> 标签：android, database, version, upgrade

我即将发布一个 Android 应用程序，我有点担心数据库版本控制。

问题是我只在执行期间使用数据库，每次启动应用程序时我都会删除所有内容，因为它们不需要是持久的。代码是这样的：

```
public synchronized void createDatabase() {
    if (database == null) {
        database =  this.openOrCreateDatabase(DATABASENAME, MODE_PRIVATE, null);
    }

    database.execSQL("DROP TABLE IF EXISTS " + Xxxxxxxx.TABLE_NAME);
    database.execSQL("DROP TABLE IF EXISTS " + Yyyyyyyy.TABLE_NAME);
    database.execSQL("DROP TABLE IF EXISTS " + Oooooooo.TABLE_NAME);
    database.execSQL("DROP TABLE IF EXISTS " + Ppppppppp.TABLE_NAME);
    database.execSQL("DROP TABLE IF EXISTS " + Mmmmmmmmm.TABLE_NAME);
    database.execSQL("DROP TABLE IF EXISTS " + Aaaaaaaaa.TABLE_NAME);

    database.execSQL(Xxxxxxxx.CREATE_PROVIDERS_TABLE);
    database.execSQL(Yyyyyyyy.CREATE_CONTENTS_TABLE);
    database.execSQL(Oooooooo.CREATE_EVENTS_TABLE);
    database.execSQL(Ppppppppp.CREATE_EVENTS_ANSWERS_TABLE);
    database.execSQL(Mmmmmmmmm.CREATE_CATEGORY_TABLE);
    database.execSQL(Aaaaaaaaa.CREATE_SUBCATEGORY_TABLE);
} 
```

我的问题是，考虑到我在启动应用程序时如何删除所有内容，是否需要控制不同的版本？如果将来我添加一个新列怎么办？它会正常工作吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:35:11.490

我认为您根本不需要担心数据库版本控制。

如果您在将来的版本中实际更改了数据库架构，则无关紧要，因为所有表都将在下次启动时被删除/重新创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:46:59.080

***考虑到我在启动应用程序时如何删除所有内容，是否需要控制不同的版本？如果将来我添加一个新列怎么办？它会正常工作吗？***

您正在删除所有表并重新创建它们，因此您不需要控制数据库的版本，如果升级现有数据库并修改表，则必须更改数据库的版本。希望这会有所帮助

# delphi - FireMonkey over VNC 和远程桌面的问题

> ID：13601876
> 
> 赞同：6
> 
> 时间：2012-11-28T09:33:40.700
> 
> 标签：delphi, virtual-machine, effects, firemonkey, vnc

**设置**：在 Windows 64 位和 Windows 32 位上用 Delphi FireMonkey (object pascal) 应用程序编写的可执行本机应用程序。可执行文件通过 VNC 从虚拟机运行，通常是从 Ubuntu Linux 机器到运行可执行文件的虚拟 Windows 7 配置。

**问题**：问题是在显示带有效果（TMonochromeEvent、TShadowEffect）的图像（TImage）时，图像未在 VNC 连接中显示。更改效果有时会渲染图像，有时会闪烁一秒钟然后消失。

自定义样式的 TListItem 也会发生同样的情况。在本地运行时，它们在 Windows 7、32 位和 64 位的 Windows 8 上显示良好，并且按预期工作。

将不胜感激的想法和评论！：-） 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:08:04.913

它可能与 VNC 中的某些设置（轮询全屏？）或您正在使用的 VNC 版本（也许尝试 UltraVNC 或 TightVNC）有关。您是否将 VNC 作为服务运行？我相信他们有某种显示驱动程序钩子，你在利用这个吗？您可以改用远程桌面服务或 LogMeIn 吗？

# c# - 具有运行时语言切换和客户翻译编辑的多语言 C# 表单应用程序

> ID：13601878
> 
> 赞同：2
> 
> 时间：2012-11-28T09:33:45.387
> 
> 标签：c#, .net, winforms, localization, runtime

我正在寻找一种方法来实现包含表单、用户控件、默认 Winform 控件和 DevExpress 控件的 WinForm 应用程序的本地化。

此应用程序有两个重要要求

*   在运行时更改语言的可能性
*   客户更改翻译的可能性
*   添加新语言和新翻译的可能性

使用 resource.resx 不是满足此要求的正确解决方案，因为资源是嵌入的并且无法编辑。

也许已经有一个库、文章或类似的东西可以解决这个“问题”？否则，处理这些要求的最佳方法是什么-

Is 正在考虑一个数据库解决方案，但在性能方面我有点害怕。我在想类似的事情

*   实现 BaseForm 和 BaseUserControl
*   实现加载方法迭代 this.controls 并获取所有控件的标题/文本（也适用于嵌套控件） q：如何确保它是 label.text 而不是 textbox.text
*   查询数据库以获取翻译后的字幕
*   如果查询的标题不在数据库中，则创建一个带有标题的新行以供以后翻译

到目前为止，它还没有经过深思熟虑；）

# objective-c - iOS 初始化任何变量会使应用程序崩溃

> ID：13601879
> 
> 赞同：1
> 
> 时间：2012-11-28T09:33:51.853
> 
> 标签：objective-c, ios

当我尝试初始化任何变量时，我的应用程序崩溃

```
NSString *str = @"Some String"; 
```

它崩溃并显示错误消息 - “EXC_BAD_ACCESS”
此 stmt 在函数内部。程序中的其他任何地方初始化都在工作，但是当我调用这个函数时，我的应用程序崩溃并给出错误消息
这是我的函数

```
+ (NSString *) recvToFile:(NSString *)_fileName {

@try {
    int _sz = [self recvNumber:4];
    uint8_t t[_sz];
    NSMutableData *data = nil;//[[NSMutableData alloc] init];
    NSMutableData *fileData = [[NSMutableData alloc] init];
    NSString *str = @"Some String";
        long _pos = 0;
        NSString *_fullPath = _fileName;
        while (_sz > _pos) {
            long _c = [m_sin read:t maxLength:_sz];
            _pos += _c;
            data = [NSData dataWithBytes:t length:_c];
            if([Misc checkTempFileExists:_fileName]==nil)
                [[NSFileManager defaultManager] createFileAtPath:_fullPath contents:nil attributes:nil];
            [fileData appendData:data];
        }
    [fileData writeToFile:_fullPath atomically:YES];
    NSDictionary *attr = [[NSFileManager defaultManager] attributesOfItemAtPath:_fullPath error:nil];

    long long length = [[attr valueForKey:@"NSFileSize"] intValue];
    if (length >= _sz)
        return (_fullPath);
}
@catch (NSException * e) {
}
return (nil);
} 
```

其他地方的初始化都在工作，但不适用于此功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:11:13.237

在您的代码中，您使用的是类方法，并且在该方法中您正在初始化非静态字符串，我认为这是问题所在。您可以用 static NSString=@"Some String"; 来检查它吗？在.m文件中的导入文件之后。同样的方式你也可以创建完整路径字符串。然后你可以像fullpath = _fileName;@aswinikumar ..对不起我的英语

# asp.net - 与集合和列表绑定

> ID：13601880
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:33:57.253
> 
> 标签：asp.net

谁能给我一个如何将数据与集合和列表绑定的示例。我知道如何将数据与数据绑定控件绑定。但是，与集合和列表绑定听起来有点困难。

谢谢。

问候，

纳伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:54:52.640

您可以使用 Collection.Add 或 Collection.AddRange ，其中 Collection 可以是任何集合，如 ArrayList 在您的情况下将您的数据添加到集合中。这里不涉及绑定。绑定在数据和控件之间完成。集合用于收集数据，不涉及绑定。

# c++ - c++构建错误

> ID：13601882
> 
> 赞同：0
> 
> 时间：2012-11-28T09:34:00.313
> 
> 标签：c++

我正在尝试将 wwise 集成到一个测试项目中。我在 Windows 7 上有一个使用 ms Visual Studio 2010 的项目，这是我尝试向项目添加必要的 cpp 后得到的错误。我在家里的机器上用相同的设置没有出现这个构建错误，这是什么意思？

```
------ Build started: Project: wwise test, Configuration: Debug Win32 ------
  AkFilePackageLUT.cpp
c:\program files (x86)\audiokinetic\wwise v2012.2.1 build 4427\sdk\samples\soundengine\common\akfilepackagelut.h(204): error C2065: 'NULL' : undeclared identifier
      c:\program files (x86)\audiokinetic\wwise v2012.2.1 build 4427\sdk\samples\soundengine\common\akfilepackagelut.cpp(117) : see reference to function template instantiation 'const CAkFilePackageLUT::AkFileEntry<T_FILEID> *CAkFilePackageLUT::LookupFile<AkFileID>(T_FILEID,const CAkFilePackageLUT::FileLUT<T_FILEID> *,bool)' being compiled
      with
      [
          T_FILEID=AkFileID
      ]
c:\program files (x86)\audiokinetic\wwise v2012.2.1 build 4427\sdk\samples\soundengine\common\akfilepackagelut.h(204): error C2065: 'NULL' : undeclared identifier
      c:\program files (x86)\audiokinetic\wwise v2012.2.1 build 4427\sdk\samples\soundengine\common\akfilepackagelut.cpp(140) : see reference to function template instantiation 'const CAkFilePackageLUT::AkFileEntry<T_FILEID> *CAkFilePackageLUT::LookupFile<AkUInt64>(T_FILEID,const CAkFilePackageLUT::FileLUT<T_FILEID> *,bool)' being compiled
      with
      [
          T_FILEID=AkUInt64
      ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:22:41.990

此错误消息说明以下内容：

里面有`<path...>\akfilepackagelut.h`一个函数模板的定义。实际上，它是一个类的模板化方法。在该定义中，在第 204 行，`NULL`使用了名称。`NULL`在 C 标准库的标头`<cstddef>`中定义，通常您可以通过包含许多 C/C++ 标头之一来包含该定义，因为它们中的大多数以某种方式包含`<cstddef>`. 但是，`akfilepackagelut.h`似乎只包含您正在使用的 VS2012 安装中*不*包含该定义的标头，因此编译器不知道 NULL 的含义。

其余的错误消息只是模板错误乱码，告诉你我们正在谈论的那个函数模板已经在某个地方实例化了两次`AkFilePackageLUT.cpp`，告诉你确切的位置和模板参数等等。

你能做什么？好吧，如果你不能像你说的那样修改源代码（为什么？你*有源*代码），你什么也做不了，只能为项目提交一个错误。如果可以修改最好`#include <cstddef>`在`akfilepackagelut.h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:40:18.683

对我来说，乍一看好像您没有指定模板参数。

其他可能的原因：

*   您正在使用 C 运行时的调试版本进行编译，在 for 循环中声明标准 C++ 库迭代器变量，然后尝试在 for 循环范围之外使用该迭代器变量。使用 C 运行时的调试版本编译标准 C++ 库代码意味着 /Zc:forScope。有关更多信息，请参阅调试迭代器支持。

*   您可能正在调用构建环境当前不支持的 SDK 头文件中的函数。

*   省略必要的包含文件，尤其是在您定义 VC_EXTRALEAN、WIN32_LEAN_AND_MEAN 或 WIN32_EXTRA_LEAN 时。这些符号从 windows.h 和 afxv_w32.h 中排除了一些头文件以加快编译速度。（在 windows.h 和 afxv_w32.h 中查看排除内容的最新描述。）

*   标识符名称拼写错误。

*   标识符使用了错误的大写和小写字母。

*   字符串常量后缺少右引号。

*   命名空间范围不正确。例如，要解析 ANSI C++ 标准库函数和运算符，您必须使用 using 指令指定 std 命名空间。以下示例无法编译，因为 using 指令被注释掉并且 cout 定义在 std 命名空间中

# android - 如何在android中使用Intent将对象的ArrayList从一个活动传递到另一个活动？

> ID：13601883
> 
> 赞同：50
> 
> 时间：2012-11-28T09:34:00.390
> 
> 标签：android, android-intent, parcelable

我的`onClick()`方法中有以下代码

```
 List<Question> mQuestionsList = QuestionBank.getQuestions(); 
```

现在我在这行之后的意图如下：

```
 Intent resultIntent = new Intent(this, ResultActivity.class);
  resultIntent.putParcelableArrayListExtra("QuestionsExtra", (ArrayList<? extends Parcelable>) mQuestionsList);
  startActivity(resultIntent); 
```

我不知道如何将意图中的这个问题列表从一项活动传递到另一项活动我的问题类

```
public class Question {
    private int[] operands;
    private int[] choices;
    private int userAnswerIndex;

    public Question(int[] operands, int[] choices) {
        this.operands = operands;
        this.choices = choices;
        this.userAnswerIndex = -1;
    }

    public int[] getChoices() {
        return choices;
    }

    public void setChoices(int[] choices) {
        this.choices = choices;
    }

    public int[] getOperands() {
        return operands;
    }

    public void setOperands(int[] operands) {
        this.operands = operands;
    }

    public int getUserAnswerIndex() {
        return userAnswerIndex;
    }

    public void setUserAnswerIndex(int userAnswerIndex) {
        this.userAnswerIndex = userAnswerIndex;
    }

    public int getAnswer() {
        int answer = 0;
        for (int operand : operands) {
            answer += operand;
        }
        return answer;
    }

    public boolean isCorrect() {
        return getAnswer() == choices[this.userAnswerIndex];
    }

    public boolean hasAnswered() {
        return userAnswerIndex != -1;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();

        // Question
        builder.append("Question: ");
        for(int operand : operands) {
            builder.append(String.format("%d ", operand));
        }
        builder.append(System.getProperty("line.separator"));

        // Choices
        int answer = getAnswer();
        for (int choice : choices) {
            if (choice == answer) {
                builder.append(String.format("%d (A) ", choice));
            } else {
                builder.append(String.format("%d ", choice));
            }
        }
        return builder.toString();
       }

      } 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2014-07-08T11:28:04.463

活动之间：为我工作

```
ArrayList<Object> object = new ArrayList<Object>();
Intent intent = new Intent(Current.class, Transfer.class);
Bundle args = new Bundle();
args.putSerializable("ARRAYLIST",(Serializable)object);
intent.putExtra("BUNDLE",args);
startActivity(intent); 
```

在 Transfer.class

```
Intent intent = getIntent();
Bundle args = intent.getBundleExtra("BUNDLE");
ArrayList<Object> object = (ArrayList<Object>) args.getSerializable("ARRAYLIST"); 
```

希望这对某人有帮助。

**使用 Parcelable 在 Activity 之间传递数据**

这通常在您创建 DataModel 时有效

例如，假设我们有一个 json 类型

```
{
    "bird": [{
        "id": 1,
        "name": "Chicken"
    }, {
        "id": 2,
        "name": "Eagle"
    }]
} 
```

这里的鸟是一个列表，它包含两个元素，所以

我们将使用[jsonschema2pojo创建模型](http://www.jsonschema2pojo.org/)

现在我们有了模型类 Name BirdModel 和 Bird BirdModel 由 Bird 列表组成，Bird 包含 name 和 id

转到鸟类并添加接口“ **implements Parcelable** ”

通过 Alt+Enter 在 android studio 中添加实现方法

注意：会出现一个对话框，说 Add implements method press Enter

通过按 Alt + Enter 添加 Parcelable 实现

注意：会出现一个对话框，说 Add Parcelable implementation 并再次 Enter

现在将其传递给意图。

```
List<Bird> birds = birdModel.getBird();
Intent intent = new Intent(Current.this, Transfer.class);
Bundle bundle = new Bundle();
bundle.putParcelableArrayList("Birds", birds);
intent.putExtras(bundle);
startActivity(intent); 
```

并在传输活动 onCreate

```
List<Bird> challenge = this.getIntent().getExtras().getParcelableArrayList("Birds"); 
```

谢谢

如果有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2015-05-15T17:59:21.853

脚步：

1.  将您的对象类实现为可**序列化**

    ```
    public class Question implements Serializable` 
    ```

2.  把它放在你的**源活动中**

    ```
    ArrayList<Question> mQuestionList = new ArrayList<Question>;
    mQuestionsList = QuestionBank.getQuestions();  
    mQuestionList.add(new Question(ops1, choices1));

    Intent intent = new Intent(SourceActivity.this, TargetActivity.class);
    intent.putExtra("QuestionListExtra", mQuestionList); 
    ```

3.  把它放在你的**目标活动中**

    ```
     ArrayList<Question> questions = new ArrayList<Question>();
     questions = (ArrayList<Questions>) getIntent().getSerializableExtra("QuestionListExtra"); 
    ```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-11-29T00:13:10.210

它运作良好，

```
public class Question implements Serializable {
    private int[] operands;
    private int[] choices;
    private int userAnswerIndex;

   public Question(int[] operands, int[] choices) {
       this.operands = operands;
       this.choices = choices;
       this.userAnswerIndex = -1;
   }

   public int[] getChoices() {
       return choices;
   }

   public void setChoices(int[] choices) {
       this.choices = choices;
   }

   public int[] getOperands() {
       return operands;
   }

   public void setOperands(int[] operands) {
       this.operands = operands;
   }

   public int getUserAnswerIndex() {
       return userAnswerIndex;
   }

   public void setUserAnswerIndex(int userAnswerIndex) {
       this.userAnswerIndex = userAnswerIndex;
   }

   public int getAnswer() {
       int answer = 0;
       for (int operand : operands) {
           answer += operand;
       }
       return answer;
   }

   public boolean isCorrect() {
       return getAnswer() == choices[this.userAnswerIndex];
   }

   public boolean hasAnswered() {
       return userAnswerIndex != -1;
   }

   @Override
   public String toString() {
       StringBuilder builder = new StringBuilder();

       // Question
       builder.append("Question: ");
       for(int operand : operands) {
           builder.append(String.format("%d ", operand));
       }
       builder.append(System.getProperty("line.separator"));

       // Choices
       int answer = getAnswer();
       for (int choice : choices) {
           if (choice == answer) {
               builder.append(String.format("%d (A) ", choice));
           } else {
               builder.append(String.format("%d ", choice));
           }
       }
       return builder.toString();
     }
  } 
```

在你的源活动中，使用这个：

```
 List<Question> mQuestionList = new ArrayList<Question>;
  mQuestionsList = QuestionBank.getQuestions();
  mQuestionList.add(new Question(ops1, choices1));

  Intent intent = new Intent(SourceActivity.this, TargetActivity.class);
  intent.putExtra("QuestionListExtra", ArrayList<Question>mQuestionList); 
```

在您的目标活动中，使用这个：

```
 List<Question> questions = new ArrayList<Question>();
  questions = (ArrayList<Question>)getIntent().getSerializableExtra("QuestionListExtra"); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-02-06T13:05:48.550

你的 bean 或 pojo 类应该`implements parcelable interface`。

例如：

```
public class BeanClass implements Parcelable{
    String name;
    int age;
    String sex;

    public BeanClass(String name, int age, String sex) {
        this.name = name;
        this.age = age;
        this.sex = sex;
    } 
     public static final Creator<BeanClass> CREATOR = new Creator<BeanClass>() {
        @Override
        public BeanClass createFromParcel(Parcel in) {
            return new BeanClass(in);
        }

        @Override
        public BeanClass[] newArray(int size) {
            return new BeanClass[size];
        }
    };
    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
        dest.writeInt(age);
        dest.writeString(sex);
    }
} 
```

考虑一个您希望将类型从发送到`arraylist`的场景。 使用以下代码`beanclass``Activity1``Activity2`

活动1：

```
ArrayList<BeanClass> list=new ArrayList<BeanClass>();

private ArrayList<BeanClass> getList() {
    for(int i=0;i<5;i++) {

        list.add(new BeanClass("xyz", 25, "M"));
    }
    return list;
}
private void gotoNextActivity() {
    Intent intent=new Intent(this,Activity2.class);
    /* Bundle args = new Bundle();
    args.putSerializable("ARRAYLIST",(Serializable)list);
    intent.putExtra("BUNDLE",args);*/

    Bundle bundle = new Bundle();
    bundle.putParcelableArrayList("StudentDetails", list);
    intent.putExtras(bundle);
    startActivity(intent);
} 
```

活动2：

```
ArrayList<BeanClass> listFromActivity1=new ArrayList<>();

listFromActivity1=this.getIntent().getExtras().getParcelableArrayList("StudentDetails");

if (listFromActivity1 != null) {

    Log.d("listis",""+listFromActivity1.toString());
} 
```

我觉得这个基本理解概念。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-28T09:35:27.090

通过 Parcelable 传递您的对象。这是一个[很好的教程](https://code.tutsplus.com/tutorials/how-to-pass-data-between-activities-with-android-parcelable--cms-29559/)，可以帮助您入门。
第一个问题应该像这样实现 Parcelable 并添加这些行：

```
public class Question implements Parcelable{
    public Question(Parcel in) {
        // put your data using = in.readString();
  this.operands = in.readString();;
    this.choices = in.readString();;
    this.userAnswerIndex = in.readString();;

    }

    public Question() {
    }

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(operands);
        dest.writeString(choices);
        dest.writeString(userAnswerIndex);
    }

    public static final Parcelable.Creator<Question> CREATOR = new Parcelable.Creator<Question>() {

        @Override
        public Question[] newArray(int size) {
            return new Question[size];
        }

        @Override
        public Question createFromParcel(Parcel source) {
            return new Question(source);
        }
    };

} 
```

然后像这样传递您的数据：

```
Question question = new Question();
// put your data
  Intent resultIntent = new Intent(this, ResultActivity.class);
  resultIntent.putExtra("QuestionsExtra", question);
  startActivity(resultIntent); 
```

并像这样获取您的数据：

```
Question question = new Question();
Bundle extras = getIntent().getExtras();
if(extras != null){
    question = extras.getParcelable("QuestionsExtra");
} 
```

这会做！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-08-20T05:02:01.320

使用意图传递 ArrayList 的最简单方法

1.  在依赖块 build.gradle 中添加这一行。

    ```
    implementation 'com.google.code.gson:gson:2.2.4' 
    ```

2.  传递数组列表

    ```
    ArrayList<String> listPrivate = new ArrayList<>();

    Intent intent = new Intent(MainActivity.this, ListActivity.class);
    intent.putExtra("private_list", new Gson().toJson(listPrivate));
    startActivity(intent); 
    ```

3.  在另一个活动中检索列表

    ```
    ArrayList<String> listPrivate = new ArrayList<>();

    Type type = new TypeToken<List<String>>() {
    }.getType();
    listPrivate = new Gson().fromJson(getIntent().getStringExtra("private_list"), type); 
    ```

您也可以在类型中使用对象而不是字符串

为我工作..

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-09-05T02:17:57.910

就那么简单 ！！为我工作

从活动

```
 Intent intent = new Intent(Viewhirings.this, Informaall.class);
        intent.putStringArrayListExtra("list",nselectedfromadapter);

        startActivity(intent); 
```

活动

```
Bundle bundle = getIntent().getExtras();
    nselectedfromadapter= bundle.getStringArrayList("list"); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-11-28T09:42:03.273

在这种情况下，我会做两件事之一

1.  为我的对象实现一个序列化/反序列化系统并将它们作为字符串传递（通常以 JSON 格式，但您可以以任何您喜欢的方式序列化它们）

2.  实现一个存在于活动之外的容器，以便我的所有活动都可以读取和写入该容器。您可以将此容器设为静态或使用某种依赖注入来检索每个活动中的相同实例。

Parcelable 工作得很好，但我总是发现它是一个难看的模式，如果你在模型之外编写自己的序列化代码，它并没有真正增加任何不存在的价值。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-11-28T09:47:27.510

如果您的类**Question**仅包含*原语*、*Serializeble*或*String*字段，您可以实现他[Serializable](http://developer.android.com/reference/java/io/Serializable.html)。ArrayList 是实现**Serializable**，这就是为什么你可以把它像[Bundle.putSerializable(key, value)](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)一样，然后发送到另一个**Activity**。恕我直言，Parcelable - 这是很长的路要走。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-01-17T01:51:24.603

除了 Serializable 之外，您还必须实现 Parcelable 接口，并且必须将 writeToParcel 方法添加到您的 Questions 类中，并在 Constructor 中使用 Parcel 参数。否则应用程序将崩溃。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-01-31T08:11:09.503

你的数组列表：

```
ArrayList<String> yourArray = new ArrayList<>(); 
```

从您想要意图的位置编写此代码：

```
Intent newIntent = new Intent(this, NextActivity.class);
newIntent.putExtra("name",yourArray);
startActivity(newIntent); 
```

在下一个活动中：

```
ArrayList<String> myArray = new ArrayList<>(); 
```

在 onCreate 中写下这段代码：

```
myArray =(ArrayList<String>)getIntent().getSerializableExtra("name"); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-10-16T10:26:16.303

在 kotlin 中设置数据

```
val offerIds = ArrayList<Offer>()
offerIds.add(Offer(1))
retrunIntent.putExtra(C.OFFER_IDS, offerIds) 
```

获取数据

```
 val offerIds = data.getSerializableExtra(C.OFFER_IDS) as ArrayList<Offer>? 
```

现在访问数组列表

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-04-25T07:17:36.793

> ***实现***Parcelable并将 arraylist 发送为***putParcelableArrayListExtra***并从下一个活动***getParcelableArrayListExtra中获取它***

例子：

**在你的自定义类上实现 parcelable** -(Alt +enter) 实现它的方法

```
public class Model implements Parcelable {

private String Id;

public Model() {

}

protected Model(Parcel in) {
    Id= in.readString();       
}

public static final Creator<Model> CREATOR = new Creator<Model>() {
    @Override
    public ModelcreateFromParcel(Parcel in) {
        return new Model(in);
    }

    @Override
    public Model[] newArray(int size) {
        return new Model[size];
    }
};

public String getId() {
    return Id;
}

public void setId(String Id) {
    this.Id = Id;
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(Id);
}
} 
```

**从活动 1 传递类对象**

```
 Intent intent = new Intent(Activity1.this, Activity2.class);
            intent.putParcelableArrayListExtra("model", modelArrayList);
            startActivity(intent); 
```

**从 Activity2 获得额外收益**

```
if (getIntent().hasExtra("model")) {
        Intent intent = getIntent();
        cartArrayList = intent.getParcelableArrayListExtra("model");

    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-11-28T09:39:13.393

如果您的`Question`实施，您的意图创建似乎是正确的`Parcelable`。

在下一个活动中，您可以检索您的问题列表，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(getIntent() != null && getIntent().hasExtra("QuestionsExtra")) {
        List<Question> mQuestionsList = getIntent().getParcelableArrayListExtra("QuestionsExtra");
    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-11-28T10:13:17.560

您可以通过使用带有意图的 bundle 将数组列表从一个活动传递到另一个活动。使用下面的代码这是传递arraylist的最短和最合适的方式

bundle.putStringArrayList("关键字",arraylist);

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-07-31T09:21:58.400

我发现大多数答案都有效，但带有警告。所以我有一个棘手的方法可以在没有任何警告的情况下实现这一目标。

```
ArrayList<Question> questionList = new ArrayList<>();
...
Intent intent = new Intent(CurrentActivity.this, ToOpenActivity.class);
for (int i = 0; i < questionList.size(); i++) {
    Question question = questionList.get(i);
    intent.putExtra("question" + i, question);
}
startActivity(intent); 
```

现在在第二个活动中

```
ArrayList<Question> questionList = new ArrayList<>();

Intent intent = getIntent();
int i = 0;
while (intent.hasExtra("question" + i)){
    Question model = (Question) intent.getSerializableExtra("question" + i);
    questionList.add(model);
    i++;
} 
```

**注意：** 在您的 Question 类中实现 Serializable。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-06-07T13:06:43.653

您可以使用 parcelable 进行比 Serializable 更有效的对象传递。

请参考我分享的链接，其中包含完整的可打包样本。 [点击下载 ParcelableSample.zip](https://github.com/penzebra123/MVP-Demo/blob/master/ParcelableSample.zip)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-08-29T10:35:31.050

您可以使用这样的捆绑包传递 Arraylist/Pojo，

```
Intent intent = new Intent(MainActivity.this, SecondActivity.class);
Bundle args = new Bundle();
                        args.putSerializable("imageSliders",(Serializable)allStoriesPojo.getImageSliderPojos());
                        intent.putExtra("BUNDLE",args);
 startActivity(intent); 
```

像这样在 SecondActivity 中获取这些值

```
 Intent intent = getIntent();
        Bundle args = intent.getBundleExtra("BUNDLE");
  String filter = bundle.getString("imageSliders"); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-11-26T13:59:29.977

你可以试试这个。我想它会对你有所帮助。

不要忘记将值初始化到 ArrayList

```
ArrayList<String> imageList = new ArrayList<>(); 
```

使用 intent.putStringArrayListExtra() 发送数据....

```
 Intent intent = new Intent(this, NextActivity.class);
                intent.putStringArrayListExtra("IMAGE_LIST", imageList);
                startActivity(intent); 
```

使用 intent.getStringArrayListExtra() 接收数据...

```
ArrayList<String> imageList = new ArrayList<>();
Intent intent = getIntent();
        imageList = intent.getStringArrayListExtra("IMAGE_LIST"); 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2015-02-02T15:06:52.040

我有完全相同的问题，虽然仍然在纠结，但`Parcelable`我发现**静态变量**对于这项任务来说并不是一个坏主意。

您可以简单地创建一个

```
public static ArrayList<Parliament> myObjects = .. 
```

并通过其他地方使用它`MyRefActivity.myObjects`

我不确定公共静态变量在具有活动的应用程序的上下文中意味着什么。如果您对此方法或此方法的性能方面也有疑问，请参阅：

*   [在活动之间共享数据的最佳方式是什么？](https://stackoverflow.com/questions/4878159/android-whats-the-best-way-to-share-data-between-activities)
*   [在 Android 中使用静态变量](https://stackoverflow.com/questions/2475978/using-static-variables-in-android)

干杯。

# html - Dojo 切换组合按钮

> ID：13601885
> 
> 赞同：2
> 
> 时间：2012-11-28T09:34:08.987
> 
> 标签：html, css, dojo

我必须更改基于 JS Dojo api 构建的 Web 应用程序中切换按钮的功能。目前它是 dijit.form.ToggleButton，但它应该具有带有复选框的下拉菜单的附加选项。dijit.form.ComboButton 看起来是一个可行的选项，但问题是它的行为类似于常规按钮，而不是切换按钮。解决这个问题的最佳选择是什么？

我想到的一个选择是手动更改组合按钮的样式，使其看起来像是被选中的，但我不确定该怎么做。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T21:06:40.070

也许将 dijit/TooltipDialog 与 ToggleButton onChange 事件一起使用？

# jquery - jQuery移动固定页脚不隐藏

> ID：13601888
> 
> 赞同：0
> 
> 时间：2012-11-28T09:34:18.237
> 
> 标签：jquery, jquery-mobile

检查这个[jsfiddle](http://jsfiddle.net/QyeMv/)

设置了页脚，`data-position="fixed"`但点击屏幕不会隐藏页脚元素，如[jquery mobile 固定工具栏示例中所示](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)。有谁知道为什么？

页脚正在上课`.ui-fixed-hidden`，但什么也没发生，我猜有些 js 行没有启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:43:39.990

由于页面内容不足，页脚未隐藏。它只会在遮挡内容时隐藏，以便您可以看到内容。

如果您向页面添加足够的内容以滚动到末尾，则页脚将在点击时隐藏。

# php - Facebook 应用发送推送通知

> ID：13601891
> 
> 赞同：0
> 
> 时间：2012-11-28T09:34:23.783
> 
> 标签：php, facebook

我有一个存储用户 fbid 的应用程序。客户要求每天向这些用户发送推送通知。有人可以概述我为此使用 Facebook API 所需的步骤吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:43:32.687

# android - 为 Android TTS 实现强插

> ID：13601894
> 
> 赞同：4
> 
> 时间：2012-11-28T09:34:31.040
> 
> 标签：android, multithreading, voice-recognition, text-to-speech, ispeech

我很难弄清楚如何解决这个问题，我不确定我是否没有正确设置线程，或者是否有可能正确解决问题。

这是一个 Android 应用程序，可在特定时间将某些字符串作为 TTS（使用原生 Android TTS）读取。在此 TTS 阅读过程中，用户应该能够使用诸如“停止”或“暂停”之类的指令进行干预。这种识别是通过使用 iSpeech API 完成的。

我们当前的解决方案是让 TTS 作为线程运行，以输出正确的字符串。一旦用户按下按钮开始语音识别（使用 Intent），应用程序就会进行语音识别并完美处理，但 TTS 不再输出任何内容。Logcat 显示以下错误：

11-28 02:18:57.072：W/TextToSpeech(16383)：说话失败：未绑定到 TTS 引擎

我曾考虑让语音识别成为暂停 TTS 的自己的线程，但问题是控制 TTS 的计时器将与它应该的不同步。

任何建议或帮助将不胜感激。

关于线程和意图的相关代码如下：

线

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Prevent device from sleeping mid build.
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    setContentView(R.layout.activity_build_order);
    mPlayer = MediaPlayer.create(BuildOrderActivity.this, R.raw.bing);
    params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID,"stringId");
    tts = new TextToSpeech(BuildOrderActivity.this, new TextToSpeech.OnInitListener() {
        @SuppressWarnings("deprecation")
        public void onInit(int status) {
            if(status != TextToSpeech.ERROR)
            {
                tts.setLanguage(Locale.US);
                tts.setOnUtteranceCompletedListener(new OnUtteranceCompletedListener() {

                    public void onUtteranceCompleted(String utteranceId) {
                        mPlayer.start();
                    }

                });
            }
        }
    });

    buttonStart = (Button) findViewById(R.id.buttonStartBuild);

    buttonStart.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            startBuild = new StartBuildRunnable();
            Thread t = new Thread(startBuild);
            t.start();
        }
    });

...//code continues oncreate setup for the view}
public class StartBuildRunnable implements Runnable {

    public void run() {
        double delay;
        buildActions = parseBuildXMLAction();
        buildTimes = parseBuildXMLTime();
        say("Build has started");
        delayForNextAction((getSeconds(buildTimes.get(0)) * 1000));
        say(buildActions.get(0));
        for (int i = 1; i < buildActions.size(); i++)
        {
            delay = calcDelayUntilNextAction(buildTimes.get(i - 1), buildTimes.get(i));
            delayForNextAction((long) (delay * 1000));
            say(buildActions.get(i));
            //listViewBuildItems.setSelection(i);
        }
        say("Build has completed");
    }
} 
```

意图

```
/**
 * Fire an intent to start the speech recognition activity.
 * @throws InvalidApiKeyException 
 */
private void startRecognition() {
    setupFreeFormDictation();
    try {
        recognizer.startRecord(new SpeechRecognizerEvent() {
            @Override
            public void onRecordingComplete() {
                updateInfoMessage("Recording completed.");
            }

            @Override
            public void onRecognitionComplete(SpeechResult result) {
                Log.v(TAG, "Recognition complete");
                //TODO: Once something is recognized, tie it to an action and continue recognizing.
                //      currently recognizes something in the grammar and then stops listening until
                //      the next button press.
                if (result != null) {
                    Log.d(TAG, "Text Result:" + result.getText());
                    Log.d(TAG, "Text Conf:" + result.getConfidence());

                    updateInfoMessage("Result: " + result.getText() + "\n\nconfidence: " + result.getConfidence());                     
                } else
                    Log.d(TAG, "Result is null...");
            }

            @Override
            public void onRecordingCancelled() {
                updateInfoMessage("Recording cancelled.");
            }

            @Override
            public void onError(Exception exception) {
                updateInfoMessage("ERROR: " + exception.getMessage());
                exception.printStackTrace();
            }
        });
    } catch (BusyException e) {
        e.printStackTrace();
    } catch (NoNetworkException e) {
        e.printStackTrace();
    }
} 
```

# jquery - 如果包含 javascript，则 JQuery Ajax 调用失败

> ID：13601899
> 
> 赞同：0
> 
> 时间：2012-11-28T09:34:44.033
> 
> 标签：jquery

页面使用：jquery-1.8.0.min.js 和 jquery-ui-1.8.23.custom.min.js

```
$( '#d-select' ).click(function() {
    $.ajax({
        type: 'POST',
        url: 'ajax.php',
        async: true,
        dataType: 'html',
        data: {
            a: 'get_popup',
            sb: 1
          },
                                                    success: function(txt){
            if (txt) {
                $( '#dialog' ).html(txt);
                $( '#dialog' ).dialog( 'open' );
            }else{
                alert('Problem generating popup');
            }
        }
    });
  }); 
```

txt 返回带有以下 javascript 的 HTML 表：

```
<table><tr....................lots of data here</tr></table>
    <script language='JavaScript'>
                    <!--
                    function toggle(source) {
                      checkboxes = document.getElementsByName('changeD[]');
                      for each(var checkbox in checkboxes)
                        checkbox.checked = source.checked;
                    }
                    //-->
                </script> 
```

它适用于除 IE 以外的所有浏览器

我知道它与以下内容有关：http: [//bugs.jquery.com/ticket/9221](http://bugs.jquery.com/ticket/9221)

但不知道要更改什么来修复它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:43:04.537

试试这个

```
<script type="text/javascript">
function toggle(source) {
   checkboxes = document.getElementsByName('changeD[]');
   for(i=0; i<checkboxes.length; i++) {
      var checkbox=checkboxes[i];
      checkbox.checked = source.checked;
   }
}
</script> 
```

# objective-c - NSInvocation setArgument 问题

> ID：13601902
> 
> 赞同：2
> 
> 时间：2012-11-28T09:34:50.877
> 
> 标签：objective-c, pointers, nsinvocation

我需要使用 NSInvocation 动态调用方法。这是我尝试过的：

```
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[[messageRecord.senderController class] instanceMethodSignatureForSelector:messageRecord.receiverAction]];

[invocation setSelector:messageRecord.receiverAction];
[invocation setTarget: messageRecord.senderController];
[invocation setArgument: &(message.data) atIndex:2];
[invocation invoke]; 
```

需要提一下，`messageRecord.senderController`是调用哪个方法的对象，`messageRecord.receiverAction`是赋予这段代码的选择器。此外，`message.data`是一个类型为 (NSArray *) 的对象并已正确初始化。

这段代码给出了以下编译时错误

```
Address of property expression requested 
```

当我如下更改调用过程时，它按预期工作：

```
NSArray *dataArray = message.data;

[invocation setSelector:messageRecord.receiverAction];
[invocation setTarget: messageRecord.senderController];
[invocation setArgument: &dataArray atIndex:2];
[invocation invoke]; 
```

两者之间的唯一区别是：我创建了一个本地 NSArray 指针并将 message.data 分配给它。后来，给出了新创建的指针的地址而不是`message.data`它本身。

为什么它起作用了？有什么区别呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:57:31.970

正如 Shimanski Ahem 提到的，财产不是有地址的东西。属性只是一对 getter 和 setter 方法。而已。getter 和 setter 方法可以由您提供，也可以由编译器根据某个实例变量*合成。*如果它们是你提供的，它们也可以基于一些实例变量，但是你需要做一些额外的逻辑；或者他们可以基于其他事物完全动态地生成价值。因此，与该属性相对应的某处可能没有一些“实例变量”。

如果 getter 和 setter 是合成的，并且您知道它们所基于的实例​​变量（您可以从 synthesize 声明中获得；如果 synthesize 没有明确指定，则它与属性名称相同；或者是`_data`（使用如果在最新版本的编译器中省略并隐式指定了综合，则在前面加下划线。这就是 Shimanski Artem 所显示的。

然而，退一步问一下，为什么你首先需要一个指向值的指针？什么目的？如果您使用指向原始值的指针或指向该值的副本的指针，会有所不同吗？了解该`setArgument:`方法的工作原理以及它为什么需要指针将帮助您回答其中的许多问题。`setArgument:`允许您使用您选择的值设置调用中的参数之一，因此它真正关心*value*。那么为什么不直接让你传递值呢？那么，它会是什么类型的呢？不同的类型在 C 中有不同的大小，所以这是不可能的。因此，它要求您提供一个指向该值的指针（适用于任何类型），然后从那里复制它。所以它只关心*价值*指向，而不是特定地址。这就是为什么（正如您所观察到的），当您想要使用`setArgument:`不可寻址的东西（如属性，或更复杂的表达式，或`this`在 Objective-C++ 中等）时，您可以简单地将其分配给一个临时变量，然后拿那个地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:02:35.777

您不能获取财产的地址。这是语言细节。你可以试试这个表格：

```
[invocation setArgument: &(message->data) atIndex:2]; 
```

# xml - Cakephp：以 json 格式获取 YouTube 播放列表并发送数据以查看

> ID：13601903
> 
> 赞同：0
> 
> 时间：2012-11-28T09:34:52.763
> 
> 标签：xml, json, cakephp, youtube

我想从我的 youtube 播放列表中调用数据。据我所知，返回的是json。将数据调用到控制器中的最佳方法是什么？

我试过

```
$url = 'http://gdata.youtube.com/feeds/api/playlists/myid?&v=2&alt=json&callback=?';
$result = Set::reverse(json_decode(file_get_contents($url))); 
```

但它返回给我这个错误：未能打开流：HTTP 请求失败！HTTP/1.0 400 错误请求

如果我用 jquery 试试

```
$.getJSON('http://gdata.youtube.com/feeds/api/playlists/myid?&v=2&alt=json&callback=?',function(data) { 
```

我得到数据结果并使用它。

以“蛋糕”方式检索 json 数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:34:52.763

只是通过发布我找到了解决方案：

```
$url = 'http://gdata.youtube.com/feeds/api/playlists/myid?&v=2';
    $result = Set::reverse(Xml::build($url));
    debug($result); 
```

不需要 json :-) 只需调用 xml 反馈并将其推送到数组中并做你想做的事:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T11:24:16.423

你使用的是什么版本的 cakephp？

这适用于 2.x，应该可以工作

```
App::uses('HttpSocket', 'Network/Http');
$this->Http = new HttpSocket();
$_result = $this->Http->get('http://gdata.youtube.com/feeds/api/playlists/myid?&v=2');
pr(Set::reverse(json_decode($_result))); 
```

# smarty - 如何以 smarty 格式 10000 到 10 000

> ID：13601908
> 
> 赞同：4
> 
> 时间：2012-11-28T09:34:59.207
> 
> 标签：smarty

首先，我很抱歉英语不好。

我需要将整数从 10000 修改为 10 000，或将 999888777 修改为 999 888 777 - 在数千之间插入空格。

有什么办法可以在smarty中做到这一点？我发现只有 smarty spacify 修饰符，但这会在每个字符之间插入一个字符串。

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T10:18:06.790

只使用 PHP`number_format`

```
{$number|number_format:0:'.':' '} 
```

# orbeon - 我们能否以编程方式更改 XForms/Orbeon 中的绑定属性？

> ID：13601914
> 
> 赞同：1
> 
> 时间：2012-11-28T09:35:12.700
> 
> 标签：orbeon, xforms

我在 XForms 文档中有一个绑定，如下所示：

```
<xforms:bind id="fr-form-binds" nodeset="instance('fr-form-instance')">
<xforms:bind id="section-1-bind" nodeset="section-1">
    <xforms:bind id="age-bind" name="age" nodeset="age" />
    <xforms:bind id="first-name-bind" nodeset="first-name"
        name="first-name"
        constraint="instance('fr-form-resources')//resource/section-1/first-name/alert/@show = false()" />
</xforms:bind> 
```

我们是否可以通过其 id 以编程方式访问（通过 XPath 或其他方式）绑定并更改 age-bind 中的约束属性，以便不需要像 first-name-bind 中那样编写约束并以编程方式更新 fr-form-资源？

# android - 如何在没有 EasyTracker 的情况下停止 Android 版 Google 移动分析 v2 中的会话

> ID：13601916
> 
> 赞同：11
> 
> 时间：2012-11-28T09:35:25.133
> 
> 标签：android, analytics

我已经阅读了 GoogleAnalytics v2 网站上的文档（我基本上已经阅读了[https://developers.google.com/analytics/devguides/](https://developers.google.com/analytics/devguides/)中的所有页面），但找不到足够准确的答案来回答我的问题。它要么丢失，要么与版本 1 文档混合。

我知道使用 EasyTracker，您可以设置 timeout_session 参数。但我不想使用 EasyTracker，我想在我的代码中的某个位置显式停止会话。（不设置超时）

当我打开我的应用程序时，我开始一个会话：

```
mTracker.setStartSession(true); 
```

想知道是否打电话

```
mTracker.setStartSession(false); 
```

明确地停止它。

任何帮助或指向更好的教程/文档将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T23:31:05.140

**概述**

因此，我花了一些时间查看[测量协议](https://developers.google.com/analytics/devguides/collection/protocol/v1/)以及查看 LogCat 中的调试日志。当您手机上的 GA 发送大量点击时，每个点击似乎在日志中都有一个相应的 HTTP 请求，开头为：

```
GET /collect?... 
```

后面是一组定义点击类型的[参数](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters)（例如事件、社交、电子商务）和有关应用程序的一些基本信息（例如应用程序 ID、跟踪 ID、时间戳）。

这是我学到的：

`setStartSession(false)`不*结束*会话。

* * *

**我是如何发现它的**

正如我之前所说，每次点击都代表某种类型的动作。但是，会话开始或会话结束不被视为命中。它们只是添加到*最近命中*的附加数据，告诉 GA 在新会话中对未来命中进行分组。

因此，如果您`sendEvent(...)`然后`setStartSession(true)`，然后`dispatch()`，您将在日志中看到一个命中，该命中描述了该事件*以及*`&sc=start`描述新会话开始的附加参数。

然后我尝试使用上述方法`setStartSession(false)`，但没有注意到附加`&sc`参数。应该如此，如此[处](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#session)`&sc=end`所述。

* * *

**潜在的黑客**

跟踪器有一个`send(...)`方法，它似乎允许您通过指定必要的参数来发送自定义命中。经过一些试验和错误，以下成功创建了一个事件*并*附加了如上所述的会话结束参数。

```
Map<String, String> data;
data = EasyTracker.getTracker().constructEvent("Test", "Test", "Test", 0L);
data.put("sessionControl", "end");
EasyTracker.getTracker().send("event", data); 
```

所以理论上，每次你想结束一个会话，你可以一个虚拟事件（如上），添加`sessionControl`参数，然后调度。从日志来看，它似乎工作得很好，但我还没有在我的 GA 仪表板上验证这一点。

并确保通过在文件中设置`ga_sessionTimeout`为来禁用自动会话控制。`-1``analytics.xml`

我还在这里上传[了我的项目](https://github.com/gautamjain/GA-session-test)，如果您想尝试查看日志并比较点击量。确保更新您的 GA 跟踪 ID。希望这可以帮助！

![](../Images/2a4cb6e8fede8e84210569e95f984ce4.png)

* * *

**我的日志**

开始会话 + 测试事件，调度

```
GET /collect?ul=en-us&ev=0&ht=1362779137510&sr=720x1184&a=0&sc=start&aid=com.example.com.example.sessiontest&ea=Test&cid=ae57a272-89b2-46ab-8c82-7acdb49c3669&ec=Test&av=1.0&v=1&t=event&el=Test&an=com.example.sessiontest&tid=UA-XXXXXXXX-X&_u=.sMC&_v=ma1b4&cd=com.example.com.example.sessiontest.MainActivity&qt=2788&z=48 HTTP/1.1 
```

结束会话 + 测试事件，调度

```
GET /collect?ul=en-us&ev=0&ht=1362779233499&sr=720x1184&a=0&aid=com.example.com.example.sessiontest&ea=Test&cid=ae57a272-89b2-46ab-8c82-7acdb49c3669&ec=Test&av=1.0&v=1&t=event&el=Test&an=com.example.sessiontest&tid=UA-XXXXXXXX-X&_u=.ssMMC&_v=ma1b4&cd=com.example.com.example.sessiontest.MainActivity&qt=3726&z=50 HTTP/1.1 
```

结束会话黑客 + 测试事件，调度

```
GET /collect?ul=en-us&ev=0&ht=1362779194381&sr=720x1184&a=0&sc=end&aid=com.example.com.example.sessiontest&ea=Test&cid=ae57a272-89b2-46ab-8c82-7acdb49c3669&ec=Test&av=1.0&v=1&t=event&el=Test&an=com.example.sessiontest&tid=UA-XXXXXXXX-X&_u=.ssyL&_v=ma1b4&cd=com.example.com.example.sessiontest.MainActivity&qt=3581&z=49 HTTP/1.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T13:46:23.370

在 GA v3 中，要手动启动或结束会话，请使用跟踪器的会话控制参数，如下所示：

开始一个新的会话。该跟踪器的下一个命中将是新会话中的第一个。

```
[tracker set:kGAISessionControl value:@"start"]; 
```

结束会话。此跟踪器的下一次命中将是当前会话中的最后一次。

```
[tracker set:kGAISessionControl value:@"end"]; 
```

此信息可从以下链接获得： [https ://developers.google.com/analytics/devguides/collection/ios/v3/sessions](https://developers.google.com/analytics/devguides/collection/ios/v3/sessions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T18:03:08.897

在 GoogleAnalytics v2 中，他们拥有启动/停止会话的新方法。

我以前没有看过你的代码`mTracker.setStartSession(true)`和`mTracker.setStartSession(false)`使用过。

现在，如果您不想使用 EasyTracker 方法，您可以通过以下方式开始新会话：
`mTracker.startNewSession("UA-xxxxxxx-x", 20, this);`

第一个输入是
`(String uniqueGoogleAnalyticsKey, int autoDispatchTimer, Context this)`

要停止它： `tracker.stopSession();`

# jquery - html5 jquery 音乐播放器的音量控制

> ID：13601934
> 
> 赞同：0
> 
> 时间：2012-11-28T09:35:57.930
> 
> 标签：jquery, html, volume, audio-player

我正在为我的网站使用音乐播放器 html5 jquery 音乐播放器。但我发现没有选项可以控制音乐播放器的音量。谁能帮我为 html5 jquery 音乐播放器添加一个外部音量控制.

在这里您可以找到 html5 jquery 音乐播放器的演示

[http://www.codebasehero.com/files/music-player-1.0.1/demo/](http://www.codebasehero.com/files/music-player-1.0.1/demo/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:15:43.130

使用 jQuery，您可以在脚本标签中创建一个函数，如下所示...

```
var audio = document.getElementById("player");
$('.volume-up').click(function() {
    audio.volume+=0.1;
    return false;
});
$('.volume-down').click(function() {
    audio.volume-=0.1;
    return false;
}); 
```

`<a>`现在您可以使用上述类创建两个锚标记，如下所示...

```
<a class="volume-up" href="#">Turn it up!</a>
<a class="volume-down" href="#">Turn it down!</a> 
```

# asp.net - 使 TextBox 字段覆盖父 div，应该是跨浏览器

> ID：13601938
> 
> 赞同：0
> 
> 时间：2012-11-28T09:36:08.760
> 
> 标签：asp.net, html, css, cross-browser

在下面的代码中，TextBox 字段应该适合 Width 和 Height `div#chat-message`（间隙为`2px`），这在 Chrome 中可以看作是完美的，但在 IE8 或 Mozilla 中却不是。在 Mozilla 中，TextBox 字段也可以调整大小，这是我不希望发生的。

**HTML**

```
<!-- Nested in Div's -->
 <div id="chat-message-outline">
    <div id="chat-message">
        <asp:TextBox ID="txtmsg" BackColor="Transparent" runat="server"
                  Wrap="true" BorderStyle="None" TextMode="MultiLine" />
    </div>
 </div> 
```

**CSS**

```
#chat-message-outline
{
  height: 20%;
  width: 100%;
  background-color: #D1D1D1;
  position: relative;
}

#chat-message, #txtmsg
{
  padding: 0;
  top: 2px;
  bottom: 2px;
  right: 2px;
  left: 2px;
  background-color: white;
  position: absolute;
  resize: none; /* CSS3 property */
} 
```

请协助我制作此代码跨浏览器..

编辑：我不能使用百分比，因为我需要`2px`TextBox 字段和父 div 之间的间隙。

PS：我[`question`](https://stackoverflow.com/q/13506949/1577396)之前问过这个我得到的答案不是跨浏览器（稍后实现）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:45:51.297

一个解决方案如何使用`position:absolute`：[http ://snook.ca/archives/html_and_css/absolute-position-textarea 在另一个元素中适合 textarea](http://snook.ca/archives/html_and_css/absolute-position-textarea)

小提琴： http: [//jsfiddle.net/bQQYA/](http://jsfiddle.net/bQQYA/) 编辑：2px 间距的小提琴：http: [//jsfiddle.net/3EPSL/](http://jsfiddle.net/3EPSL/)

另外，我发现了类似的问题：[100% TextArea in FireFox using absolute position](https://stackoverflow.com/questions/11756087/100-textarea-in-firefox-using-absolute-position)

# android - 如何从 android 上的 facebook sdk (3 beta) 中获取实际异常？

> ID：13601939
> 
> 赞同：0
> 
> 时间：2012-11-28T09:36:11.440
> 
> 标签：android, facebook, facebook-android-sdk

我目前遇到以下问题：我正在开发一个通过 Facebook API（API 3.x beta）共享内容的 android 应用程序。但是，在我成功登录后，即使我的权限配置正确，我也无法从配置文件中获取任何信息，也无法将信息发布到配置文件。我的 logcat 中不断出现以下异常：

```
 D/com.facebook.RequestAsyncTask(25792): onPostExecute: exception encountered during request: 
```

但是，我没有得到实际的例外。因此，我的问题是：我如何才能报告实际的异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:54:46.573

叹息..我发现了问题：在 com.facebook.ReqeustAsyncTask 中，将第 152 行更改为：

```
 Log.d(TAG, "onPostExecute: exception encountered during request: ".concat(exception.getMessage())); 
```

然后你会得到报告的实际异常......或者你也可以将 %s 添加到 String.format 调用中，正如 Ming Li 指出的那样。

# c++ - C++ 如何通过套接字 (TCP) 进行二进制序列化

> ID：13601945
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:36:24.293
> 
> 标签：c++, c, sockets

对不起，我的英语不好。

上下文 ：

我有 6 个变量

1.  无符号的字符
2.  字符
3.  无符号短
4.  整数
5.  整数
6.  整数

我序列化这些数据以准备发送到套接字。

问题，我怎样才能存储我的序列化数据并发送它？

我的第一个解决方案是使用一个结构来发送我的数据，但是这个解决方案需要强制转换并且强制转换操作非常慢。

您有比将我的变量存储在结构中更好的解决方案吗？

```
#include <sstream>
#include <string.h>

typedef int SOCKET;
typedef struct sockaddr_in SOCKADDR_IN;
typedef struct sockaddr SOCKADDR;

#define PORT 4241
template<typename T>
inline std::ostream& raw_write(std::ostream &os, const T &t)
{
  return os.write( reinterpret_cast<const char*>(&t), sizeof t);
}

int main()
{
  char protocole;
  char id_module;
  unsigned short id_message;
  int id_client;
  int size_msg;
  unsigned long timestamp;

  SOCKET csock;
  SOCKADDR_IN csin;

  protocole = 1;
  id_module = 2;
  id_message = 256;
  id_client = 8569;
  size_msg = 145;
  timestamp = 1353793384;
  csock = socket(AF_INET, SOCK_STREAM, 0);
  csin.sin_addr.s_addr = inet_addr("127.0.0.1");
  csin.sin_family = AF_INET;
  csin.sin_port = htons(PORT);
  connect(csock, (SOCKADDR*)&csin, sizeof(csin));
  raw_write(ss, protocole);
  raw_write(ss, id_module);
  raw_write(ss, id_message);
  raw_write(ss, id_client);
  send(csock, ss.str().c_str(), strlen(ss.str().c_str()), 0);
  close(csock); 
```

}

不起作用，因为字符串包含 '\0' 并发送剪切它。

我说，在许多数据发送上，cast 很慢。在接收时，我需要再次投射以恢复我的数据。

此操作比仅读取字节更慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:49:43.677

I f you dont want to do it from scratch, you could use [Google Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview). Its a strong library letting you define a protocol, which is nothing else but a class, that can (de)serialize itself to(from) a stream, file, buffer or string.

I use it myself, its nice to serialze it to a string which is easy to send via socket.

EDIT: Reply to comment:

Okay then notice that its not `send (...)` truncating your stream. Its c_str() which ends on a `'\0'`. Maybe you should try to avoid streams and use a container which offers access to its raw data like std::string or std::vector with `const void * data()`. You could pass this and `size()` to `send(...)`.

# javascript - 保留侧边栏但删除滚动 JavaScript？

> ID：13601946
> 
> 赞同：0
> 
> 时间：2012-11-28T09:36:25.263
> 
> 标签：javascript, jquery, html, css

我正在尝试复制 facebook 以灯箱类型格式显示图片的方式。我唯一无法复制的是他们实现让侧边栏没有实际滚动条的方式......

我想任何人看到这个的最好方法是去 facebook 拉一张图片，这样灯箱效果就会起作用。注意侧边栏。任何人有任何建议或方法来实现这一目标？有没有办法针对滚动条上的特定节点？

谢谢。jQuery 是这个项目的首选库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:53:38.850

老实说，这主要是CSS。

看看这个小提琴：http: [//jsfiddle.net/ktd29/11/](http://jsfiddle.net/ktd29/11/)

我模仿 Facebook 的做法创造了世界上最糟糕的灯箱。红色方块代表图片，黑色方块代表半透明覆盖。

您会注意到主体是可滚动的，直到您单击链接时滚动条被禁用。

半透明覆盖是绝对定位`div`的，宽度和高度为 100%：

```
div {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: rgba(0,0,0,0.7);
    overflow-y: scroll;
    display: none;
} 
```

关于这个 div 最后要注意的`overflow-y`是，设置为`scroll`this 意味着滚动条始终存在，无论它是否实际可滚动。

文档的高度设置为非常大，因此当您不查看灯箱时，页面是可滚动的。这是调用灯箱的代码：

```
jQuery(document).ready(function($) {
    $('a').click(function(){
        $('div').addClass('shown');
        $('html').addClass('noScroll');
    });
}); 
```

这是你所期望的。我正在应用一个显示的类，在这个例子中它只是字面意思，`display: block;`但请注意`noScroll`应用于 HTML 的类。这适用`overflow-y: hidden;`于删除原始滚动条的 html。这将停止有两个滚动条（一个用于 html，一个用于覆盖 div）。

如果您需要我澄清任何事情，请告诉我。

​</p>

# sql-server-2005 - SQL Server 2005 中的自动和计划导入 mdb

> ID：13601947
> 
> 赞同：2
> 
> 时间：2012-11-28T09:36:25.430
> 
> 标签：sql-server-2005, ms-access, ssis

我有一个 .bat 文件，它通过 ftp 下载一个已知文件夹中的文件 xyz.mdb。

此访问数据库的表名称可能每个月都不同。

我需要通过计划的作业来启动 bat 文件，然后在特定数据库中的 SQL Server 中导入 xyz.mdb（我可以删除并重新创建它）。

有什么建议么？我对ssis不太好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:09:58.683

代替您的 BAT 文件，使用 WinSCP 或类似文件进行 FTP 下载。您可以使用执行流程任务来调用它，并根据成功或失败来控制您的流程。成功后，添加一个 For Each Loop 容器并将其指向“已知文件夹”，将每个文件名分配给一个变量。然后在循环中，您可以添加从每个 Access DB 读取的数据流任务。

第一个棘手的部分是连接定义。您需要使用表达式来生成连接字符串。从您手动生成的文件开始，然后在表达式中重建它，用您的变量替换文件名。

第二个棘手的部分是连接堆栈。Access 数据库引擎 2010 为您提供 64 位的 OLE DB，但奇怪的是，它一次只能以一种方式工作，64 位或 32 位。这会引起很多混乱，因为即使在 64 位机器上，BIDS 也始终是 32 位的。

我已经开始使用 ODBC 驱动程序。微软已经声明 OLE DB 将在未来被弃用，而 ODBC 是要走的路（以适应云）。任何现代 Windows 操作系统都会附带 32 位的 Access ODBC 驱动程序，您可以安装 64 位的 Access Database Engine 2010 并获得 64 位 ODBC 驱动程序。

# c# - 删除字典键中的重复项

> ID：13601957
> 
> 赞同：1
> 
> 时间：2012-11-28T09:37:01.630
> 
> 标签：c#

我有以下字典：

```
Dictionary<string, string> test = new Dictionary<string, string>();
test.Add("1|1", "blue");
test.Add("1|2", "Nice");
test.Add("1|3", "Jaish");
test.Add("2|2", "Muna");
test.Add("3|1", "haha");
test.Add("3|2", "green");
test.Add("4|1", "red");
Dictionary<string, string> test2 = new Dictionary<string, string>();
foreach (KeyValuePair<string, string> entry in test)
{
    if (!test2.ContainsValue(entry.Key))
        test2.Add(entry.Key, entry.Key);
} 
```

我想删除以下重复值：

```
test.Add("1|2", "Nice");
test.Add("1|3", "Jaish");
test.Add("3|2", "green") 
```

因此，删除重复项后，`Dictionary`的键数应为 4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:40:43.257

假设通过管道拆分字符串的第一部分定义重复项：

```
var uniques = test.GroupBy(kv => kv.Key.Split('|')[0])
                  .Select(g => g.First())
                  .ToDictionary(kv => kv.Key, kv => kv.Value); 
```

这总是选择每个组的第一个键值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:44:00.473

实现`IEqualityComparer<string>`不允许您插入重复项

```
var test = new Dictionary<string, string>(new MyStringEqualityComparer()); 
```

...

```
public class MyStringEqualityComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return x.Split('|')[0] == y.Split('|')[0];
    }

    public int GetHashCode(string obj)
    {
        return obj.Split('|')[0].GetHashCode();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:49:26.383

我假设`|`您输入键中的符号应解释为“或”。如果是这种情况，您可以先拆分键，为每个键部分生成新的键值对：

```
var test2 = test.SelectMany(kvp =>
    kvp.Key.Split('|').Select(k =>
        new KeyValuePair<string, string>(k, kvp.Value))); 
```

...然后只为每个新键取第一个值：

```
var test3 = test2.GroupBy(kvp => kvp.Key)
                 .Select(g => g.First())
                 .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T10:19:19.793

If the | means OR then you can produce a new *unique* dictionary like this.

```
var oredDict = new Dictionary<int, string>();
foreach (var kv in test.ToArray())
{
    var keys = kv.Key.Split('|').Select(int.Parse);
    oredDict[keys.First() | keys.Last()] = kv.Value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T09:42:50.333

假设您的示例是人为设计的，并且您不想使用那些以管道分隔的键...

最简单的方法是不使用 Dictionary.Add(..)，而只是设置值

```
test["1"] = "blue";
test["1"] = "NICE";
test["1"] = "Jaish";

Debug.Assert(test.Count == 1); 
```

但是，您必须确定这是否是您想要的逻辑，它只是每次都覆盖

# eclipse-rcp - 如何在 RCP 应用程序中添加记录器？

> ID：13601962
> 
> 赞同：3
> 
> 时间：2012-11-28T09:37:06.763
> 
> 标签：eclipse-rcp, rcp

我写了一个 RCP 应用程序。为此，我想使用 log4j 添加日志记录。

任何人都可以提出任何解决方案吗？

我已经尝试过[这个](http://www.ibm.com/developerworks/library/os-eclog/)，但我无法使用它。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:17:49.527

考虑使用 Eclipse 日志记录。它在 Eclipse Wiki 中有描述：[http ://wiki.eclipse.org/E4/EAS/Logging_and_Tracing](http://wiki.eclipse.org/E4/EAS/Logging_and_Tracing)

这样，您的优势是来自 RCP 平台的日志记录和您自己的日志记录共享相同的日志文件。这使得关联日志文件中的事件变得更加容易。

如果您已经在使用 E4，则很容易注入日志服务（即您的插件不需要激活器类）。上面的 wiki 参考也描述了如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:52:37.917

[log4j](http://logging.apache.org/log4j/1.2/) jar 文件已打包为 OSGi 包。只需将其拖放到目标平台的插件文件夹中（如果您将其用作目标，则将其拖放到 Eclipse 插件文件夹中），然后将其作为依赖项添加到您的项目 plugin.xml 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:51:04.700

我建议您使用 `org.osgi.service.log.LogService`记录所有消息并将`LogListener`日志添加到您拥有的任何其他自定义日志记录（log4j、slf4j...等）。这样，您就不会丢失 RCP 框架所做的任何日志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T06:39:42.083

jar 在您的类路径中，然后您可以使用此代码创建记录器

```
private Log logger = LogFactory.getLog(getClass()); 
```

您可以使用以下 log4j.properties 条目更改日志文件位置

> log4j.appender.file.File=${workspace_loc}/.metadata/MyLogFile.log

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-03T12:22:35.147

1.  在您的项目中添加 log4j.jar。
2.  在 MANIFEST.MF 中添加引用。 `Require-Bundle: org.apache.log4j;bundle-version="1.2.15"`
3.  在 build.properties 中添加引用。

    bin.includes = plugin.xml,\
    META-INF/,\
    .,\
    lib/log4j-1.2.17.jar

4.  在 .java 文件中使用记录器。

    PropertyConfigurator.configure(log4jConfPath);
    LOGGER.debug("正在启动应用程序..");

我发现本教程很有帮助。请检查 -[在 RCP 中添加 log4j](http://javacodingtutorial.blogspot.de/2016/02/add-log4j-to-rcp-application.html)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-05-06T01:46:26.053

这段代码非常适合我。

```
import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.apache.log4j.Logger;
import org.apache.log4j.PatternLayout;
import org.apache.log4j.PropertyConfigurator;
import org.apache.log4j.RollingFileAppender;
import org.eclipse.core.runtime.FileLocator;
import org.eclipse.core.runtime.ILog;
import org.eclipse.core.runtime.Platform;
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.ui.plugin.AbstractUIPlugin;
import org.osgi.framework.Bundle;
import org.osgi.framework.BundleContext;

import com.example.addresbook.util.PluginLogListener;

/**
 * The activator class controls the plug-in life cycle.
 * @author Iakov Senatov
 */
public class Activator extends AbstractUIPlugin {
	private static final String LOG4J_PROPERTIES = "META-INF/log4j.properties";
	private static final String LOG4J_FILE_PATTTERN = "%d{ISO8601} [%t] %-5p %c %x - %m%n";
	private static final Logger LOG = Logger.getLogger(Activator.class );
	public static final String PLUGIN_ID = "com.example.addresbook";
	final private List<PluginLogListener> pluginLogHooks = new ArrayList<PluginLogListener>();
	private static Activator plugin;

	/**
	 * The constructor
	 */
	public Activator() {
	}

	/*
	 * (non-Javadoc)
	 *
	 * @see
	 * org.eclipse.ui.plugin.AbstractUIPlugin#start(org.osgi.framework.BundleContext
	 * )
	 */
	@Override
	public void start(BundleContext context ) throws Exception {
		initLog4j(context );
		LOG.debug("start()" );
		super.start(context );
		plugin = this;
	}

	/**
	 * Inits the log4j.
	 *
	 * @throws IOException
	 */
	private void initLog4j(BundleContext context ) throws IOException {
		final String log4jfile = LOG4J_PROPERTIES;
		final URL confURL = getBundle().getEntry(log4jfile );
		//Define file appender with layout and output log file name
		final PatternLayout layout = new PatternLayout(LOG4J_FILE_PATTTERN );
		final String logPath = getClass().getProtectionDomain().getCodeSource().getLocation().getPath() + "logs"
						+ File.separator + "addtBook.log";
		final RollingFileAppender fileAppender = new RollingFileAppender(layout, logPath );
		PropertyConfigurator.configure(FileLocator.toFileURL(confURL ).getFile() );
		LOG.debug("Logging using log4j and configuration " + FileLocator.toFileURL(confURL ).getFile() );
		Logger.getRootLogger().addAppender(fileAppender );
		hookPluginLoggers(context );
		LOG.info("contextInitialized()" );
		LOG.info("Log4j initialized with " + confURL );
	}

	// Hook all loaded bundles into the log4j framework
	private void hookPluginLoggers(final BundleContext context ) {
		for(final Bundle bundle : context.getBundles() ) {
			final ILog pluginLogger = Platform.getLog(bundle );
			pluginLogHooks.add(new PluginLogListener(pluginLogger, Logger.getLogger(bundle.getSymbolicName() ) ) );
			LOG.info("Added logging hook for bundle: " + bundle.getSymbolicName() );
		}
	}

	/*
	 * (non-Javadoc)
	 *
	 * @see
	 * org.eclipse.ui.plugin.AbstractUIPlugin#stop(org.osgi.framework.BundleContext
	 * )
	 */
	@Override
	public void stop(BundleContext context ) throws Exception {
		LOG.debug("stop()" );
		plugin = null;
		super.stop(context );
	}

	/**
	 * Returns the shared instance
	 *
	 * @return the shared instance
	 */
	public static Activator getDefault() {
		LOG.debug("getDefault()" );
		return plugin;
	}

	/**
	 * Returns an image descriptor for the image file at the given plug-in
	 * relative path
	 *
	 * @param path the path
	 * @return the image descriptor
	 */
	public static ImageDescriptor getImageDescriptor(String path ) {
		LOG.debug("getImageDescriptor()" );
		return imageDescriptorFromPlugin(PLUGIN_ID, path );
	}
}
```

# c++ - 我在哪里可以找到适用于 Windows 的 libsmi 64 位？

> ID：13601963
> 
> 赞同：3
> 
> 时间：2012-11-28T09:37:08.897
> 
> 标签：c++, shared-libraries, snmp, wireshark

作为将旧的 C++ 32 位项目移植到 64 位项目的一部分，我发现很难找到用于 64 位 Windows 开发的[libsmi二进制文件。](http://www.ibr.cs.tu-bs.de/projects/libsmi/download.html?lang=de)现在我不愿意自己将该项目移植到 64 位，编译不是问题。我确实看到 32 位项目中有一些 64 位 int 的定义。

1.  64位类型是64位Windows支持的意思吗？

2.  在研究这个问题时，Wireshark 社区似乎[之前](http://ask.wireshark.org/questions/878/cant-enable-snmp-decodes-in-64-bit-windows)遇到过这个问题。该社区的任何人都可以分享一些信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:57:44.213

不确定这是否有帮助，但我在wireshark SVN中找到了这个，（通过[Win64上的wireshark Wiki页面](http://wiki.wireshark.org/Development/Win64)）[http://anonsvn.wireshark.org/viewvc?view=revision&root=Wireshark-win64-libs&revision=317](http://anonsvn.wireshark.org/viewvc?view=revision&root=Wireshark-win64-libs&revision=317)

[ZIP 文件](http://anonsvn.wireshark.org/viewvc/trunk/packages/libsmi-svn-40773-win64ws.zip?view=co&revision=317&root=Wireshark-win64-libs&pathrev=317)似乎包含二进制文件。我没有测试过这些。

# mysql - 连接子查询上的 mysql sum() 返回意外的总数

> ID：13601965
> 
> 赞同：0
> 
> 时间：2012-11-28T09:37:12.287
> 
> 标签：mysql, join, subquery, sum

这个[SQL 小提琴](http://sqlfiddle.com/#!2/1e095/9)说明了我遇到的问题。

作为背景：我有 Jobs、Elements、Role-hours 和 Rates。一个 Job 可以由几个 Elements 组成。一个元素（通常）由一个或多个角色小时（即一个角色和多个小时）组成。每个角色都有一个小时费率，该费率根据日期和作业的客户而有所不同。

在上面的查询中，我试图获得一份工作的财务明细：一份工作的所有元素的列表，以及它们的总成本。事实上，目前，它也在按角色分解这些元素，但这并不是最终查询所必需的。

您可以看到“角色成本”列正确地将小时费率乘以预算小时数以达到该角色的小计。但是，当我尝试对这些字段求和时（在“元素小计”列中），我得到......好吧，这不是我期望的数字。

我怀疑问题出在我的获取最新费率的子查询上，我在[此处将其设置为单独的 SQL Fiddle](http://sqlfiddle.com/#!2/397d5/1)以供参考。它为一个角色返回了不止一个可能的速率：当它重新加入主查询时，它因此 SUMming 太多行。

因此扭曲我的甜瓜的问题是：我需要匹配给定客户的“最佳”费率。也就是说，如果有一个匹配公司 ID*和*客户 ID 的费率，我想要那个。但如果没有，我只想要与公司 ID 匹配的那个。如果没有其中之一，我只想要该角色的“基本”费率。因此，我的联接中的所有“OR __ IS NULL”。

我不知道该怎么做是将它与“只返回一条记录”结合起来，我需要使 SUM() 部分工作。

为长篇道歉。如果你能走到这一步，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:09:04.720

一种方法将涉及[相关子查询](http://dev.mysql.com/doc/en/correlated-subqueries.html)：

```
SELECT   e.id AS element_id,
         h.role,
         SUM(h.hours_budgeted) AS total_hours_budgeted,
         r.hourly_rate,
         e.pm_amount,
         e.revenue AS fixed_revenue,
         e.revenue_extra,
         SUM(h.hours_budgeted) * r.hourly_rate AS element_subtotal
FROM     job                    j
    JOIN job_element            e ON e.job     = j.id
    JOIN job_element_role_hours h ON h.element = e.id
    JOIN rate                   r ON r.id      = (
           SELECT   id
           FROM     rate
           WHERE    rate.role = h.role
                AND IFNULL(rate.client_company = j.client_company, TRUE)
                AND IFNULL(rate.client_group   = j.client_group  , TRUE)
                AND IFNULL(rate.client_contact = j.client_contact, TRUE)
           ORDER BY rate.client_company DESC,
                    rate.client_group   DESC,
                    rate.client_contact DESC,
                    rate.date_from      DESC
           LIMIT    1
         )
WHERE    j.id = 1
GROUP BY e.id, h.role 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/1e095/25/0)上查看。

但是，相关子查询效率低下并且可能很慢。正如手册所说：

> 将查询重写为连接可能会提高性能。

为此，必须获得[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT   e.id AS element_id,
         h.role,
         SUM(h.hours_budgeted) AS total_hours_budgeted,
         r.hourly_rate,
         e.pm_amount,
         e.revenue AS fixed_revenue,
         e.revenue_extra,
         SUM(h.hours_budgeted) * r.hourly_rate AS element_subtotal
FROM     job                    j
    JOIN job_element            e ON e.job     = j.id
    JOIN job_element_role_hours h ON h.element = e.id
    JOIN rate                   r ON r.role    = h.role
           AND IFNULL(r.client_company = j.client_company, TRUE)
           AND IFNULL(r.client_group   = j.client_group  , TRUE)
           AND IFNULL(r.client_contact = j.client_contact, TRUE)
    JOIN (
      SELECT   j.client_company, j.client_group, j.client_contact, r.role,
               MAX(
                 IF(r.client_company <=> j.client_company, 1<<34, 0)
               | IF(r.client_group   <=> j.client_group  , 1<<33, 0)
               | IF(r.client_contact <=> j.client_contact, 1<<32, 0)
               | UNIX_TIMESTAMP(r.date_from)
               ) AS relevance
      FROM     rate r JOIN job j ON
                     IFNULL(r.client_company = j.client_company, TRUE)
                 AND IFNULL(r.client_group   = j.client_group  , TRUE)
                 AND IFNULL(r.client_contact = j.client_contact, TRUE)
      GROUP BY j.client_company, j.client_group, j.client_contact, r.role
    ) t     ON t.role = r.role
           AND t.client_company = j.client_company
           AND t.client_group   = j.client_group
           AND t.client_contact = j.client_contact
           AND t.relevance  = IF(r.client_company <=> j.client_company, 1<<34, 0)
                            | IF(r.client_group   <=> j.client_group  , 1<<33, 0)
                            | IF(r.client_contact <=> j.client_contact, 1<<32, 0)
                            | UNIX_TIMESTAMP(r.date_from)
WHERE    j.id = 1
GROUP BY e.id, h.role 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/1e095/26/0)上查看。

在这里，我通过计算相关性分数找到了与您的尝试类似的分组最大值。然而，我通过一些位旋转，其中 2 ^(34)表示是否存在匹配`client_company`，2 ^(33)和`client_group`2 ^(32)表示速率，`client_contact`32 个最低位表示速率`date_from`- 然后取最大相关分数将产生分数最好的匹配，并再次加入`rate`表使人们能够获得`hourly_rate`所需的。

甚至可以进一步改进这一点，以避免计算相关性分数，方法是嵌套以按顺序在每列上找到分组最大值；但是，除非您遇到无法以任何其他方式解决的性能问题，否则可能不值得走这条路。[您可以在我对另一个问题的回答](https://stackoverflow.com/a/12106937)中看到该技术。

# javascript - 如何避免在 Backbone 中使用空 div 包装模板？

> ID：13601966
> 
> 赞同：16
> 
> 时间：2012-11-28T09:37:12.313
> 
> 标签：javascript, jquery, backbone.js

当我创建视图主干时，如果未设置 el，则会创建空的 div 容器。`(this.$el.html(this.template(this.model.toJSON())))`插入该 div 的模板。如何避免这个包装？我需要没有任何包装的干净模板，这样我就可以将它插入到我想要的任何地方？`jobView.$e.children()`用很多元素调用是不合理的。

```
<script id="contactTemplate" type="text/html">
                <div class="job">
                    <h1><%= title %>/<%= type %></h1>
                    <div><%= description %></div>
                </div>     
</script>     

var JobView = Backbone.View.extend({
        template:_.template($("#contactTemplate").html()),

        initialize:function () {
            this.render();
        },
        render:function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }
});

var jobView = new JobView({
   model:jobModel
});          

console.log(jobView.el); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T12:32:13.057

我认为这个问题的真正答案还没有提供，只需`div`从模板中删除并将`className`属性添加到`JobView`! 这将产生您需要的标记：

模板：

```
<script id="contactTemplate" type="text/html">
     <h1><%= title %>/<%= type %></h1>
     <div><%= description %></div>
</script> 
```

风景：

```
var JobView = Backbone.View.extend({
            className: 'job', // this class will be added to the wrapping div when you render the view

            template:_.template($("#contactTemplate").html()),

            initialize:function () {
                this.render();
            },
            render:function () {
                this.$el.html(this.template(this.model.toJSON()));
                return this;
            }
    }); 
```

当您打电话时，`render`您最终会得到所需的标记：

```
<div class="job">
  <h1><%= title %>/<%= type %></h1>
  <div><%= description %></div>
</div> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-31T15:23:27.487

我认为最好的解决方案是：

```
render: function(){
    var html = this.template(this.model.toJSON()));
    var newElement = $(html)
    this.$el.replaceWith(newElement);
    this.setElement(newElement);
    return this;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-05T21:06:39.133

抱歉，回复晚了，这可能已经解决了。我发现最好尝试尽可能轻松地制作模板和视图。我将 Handlebars 用于我的模板。

无论使用何种模板，您的每个模板都需要有一个与之关联的 HTML 元素，因此在您的视图中选择您想要的任何元素并从模板中删除该元素，而不是试图违背常规。然后，您可以在视图中设置属性以反映已删除模板元素的属性。

```
var yourview = Backbone.View.extend({
{
     tagName    : *whatever element ( i.e. section, div etc ),
     attributes : {
           id    : 'your element id'
           class : 'your element class'
           etc
     },
}) 
```

然后在您的模板中删除该元素，此元素将在不包装模板的情况下很好地创建，而不必更改您的渲染方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-28T09:45:12.953

您可以将视图渲染到您喜欢的任何容器中，您可以自己指定 $el 属性，也可以[`setElement()`](http://backbonejs.org/#View-setElement)在调用渲染之前使用该方法：

```
var jobView = new JobView({
  model:jobModel
});          

jobView.setElement($('#your_selector_here'));

console.log(jobView.el); 
```

如果您查看文档，[`View.el`](http://backbonejs.org/#View-el)您会发现您还`el`可以在编写视图时或通过在构造函数中传递参数来指定属性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T09:44:45.540

我对 Backbone 也有同样的问题。在我看来，这是一个设计缺陷。这是一篇 Reddit 帖子，描述了一些可能的解决方案：[http ://www.reddit.com/r/javascript/comments/11pkth/how_do_you_render_your_backbonejs_views/](http://www.reddit.com/r/javascript/comments/11pkth/how_do_you_render_your_backbonejs_views/)

以下是 Jeremy Ashkenas 对这个问题的看法：

> | 如果我想将 HTML 完全封装在我的模板中，而不创建任何额外的 div，| 我必须替换 this.el。至少据我所知。有没有更好的方法来做到这一点？
> 
> 放弃你这样做的愿望，你会有更轻松的时间；）Backbone 总是为你提供视图元素（“el”）的很大一部分是你的事件在任何时候都是有效的 - - 无论视图是否在 DOM 中，数据是否已准备好，或者模板是否可用。这是一种更无状态的方式来声明鼠标和键盘事件，更少依赖渲染所需的顺序。如果您真的想替换视图的元素，请使用 setElement。但不推荐，也没有必要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-20T09:31:23.950

无论好坏，在 Backbone 中，您应该使用视图提供的，并使用该视图的 、和属性将其`el`调整为您喜欢的。`tagName``className``id``attributes`

这种方法的明显问题是你混合和匹配 JS 和 HTML 就像没有明天一样。在我看来，最好把东西很好地分开；的特征`el`应与模板一起指定。

2014 年，我编写了一个旨在解决该问题的插入式组件：[Backbone.Declarative.Views](https://github.com/hashchange/backbone.declarative.views "Backbone.Declarative.Views")。它可能是我所有开源东西中最被低估的，但它做得很好。

**如何？**

[将Backbone.Declarative.Views 包含](https://github.com/hashchange/backbone.declarative.views#dependencies-and-setup "依赖和设置 |  Backbone.Declarative.Views")到您的项目中。然后，将这些`el`定义属性放入模板的数据属性中。

```
<script id="my-template"
        type="text/x-template"

        data-tag-name="p"
        data-id="myContainer"
        data-class-name="someClass orOther">

    <!-- template content here -->

</script> 
```

现在，如果您的视图有一个`template: "#my-template"`属性，它`el`被设置为

```
<p id="myContainer" class="someClass orOther"></p> 
```

就是这样，真的。有关完整的详细信息，请查看[文档](https://github.com/hashchange/backbone.declarative.views#core-functionality "核心功能 |  Backbone.Declarative.Views")。

**为什么是数据属性？**

使用数据属性解决了将与 HTML 相关的内容保留在 HTML 文件和模板中以及在 Javascript 之外的基本问题。同时，这种方法与 Backbone 中通常的处理方式[完全兼容。](https://github.com/hashchange/backbone.declarative.views#why-data-attributes "为什么是数据属性？ |  Backbone.Declarative.Views")

也就是说，所有现有的 Backbone 模板都可以继续正常工作，就像`tagName`散布在 Javascript 中的所有定义[仍然照常应用一样](https://github.com/hashchange/backbone.declarative.views#does-it-clash-with-traditional-ways-of-defining-tagname-or-classname "是否与")。避免了与其他 Backbone 扩展和插件的冲突，并且无需更改遗留代码。这使得 Backbone.Declarative.Views 可以安全地包含在几乎任何项目中。

# directory - 在 Fortran 中打印目录列表

> ID：13601967
> 
> 赞同：5
> 
> 时间：2012-11-28T09:37:14.443
> 
> 标签：directory, fortran, directory-listing

如何使用 Fortran 打印给定目录中所有文件的列表，仅限于特定文件类型...例如，我只想从目录中获取“.txt”文件的列表。

目录中的文件：

*   文件1.txt
*   另一个.dat
*   测试.mp3
*   文件2.txt
*   文件 3.txt

就像是

> WHILE (not_last_file AND filetype = '.txt' )
> 
> {
> 
> ```
> print FILENAME 
> ```
> 
> }

我将衷心感谢您的帮助，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:47:20.393

简而言之，你不能。Fortran 中没有用于此类操作的内在库可以帮助您。你如何解决这个问题还取决于你正在运行的 Fortran 版本（F77、F90、F95 等），你没有说明。

“在使用最新 Fortran 编译器的 POSIX 系统上，您可以使用 ISO_C_BINDING 创建 POSIX opendir() 和 readdir() 函数（或 readdir_r()，如果您需要线程安全）的接口，这允许您迭代目录条目。 "

请参阅这篇文章[在 Fortran 中列出目录的内容，](https://stackoverflow.com/questions/8892741/listing-the-contents-of-a-directory)或者您​​也可以从有用[的 gfortran 文档中](http://gcc.gnu.org/wiki/GFortranStandards#POSIX)查看此概述。有很多关于执行这个操作的信息可以通过一个简单的谷歌获得。

我希望这有帮助。

# javascript - 在 Javascript 中设置 parseFloat 值的最大值

> ID：13601968
> 
> 赞同：0
> 
> 时间：2012-11-28T09:37:23.623
> 
> 标签：javascript

我正在使用以下命令从 div 中解析一个数字（由 php 通过从数据库中获取它来创建）

```
var price = parseFloat($('#priceofproduct').text().replace(',', '.')); 
```

现在，例如，大多数情况下它的结果是 5,99 欧元。但有时它也会产生 5,9900000009 欧元，因为这是它以某种方式插入数据库的方式。如何设置限制以仅显示最多 4 位数字（例如 €39,99）？

# python - Django 单元测试卡在 E

> ID：13601971
> 
> 赞同：2
> 
> 时间：2012-11-28T09:37:39.600
> 
> 标签：python, django, django-unittest

我在 Django 单元测试框架中遇到了一个奇怪的错误。它以前有效，但出乎意料的是，测试不再有效。

该框架提出：

```
python manage.py test
Creating test database for alias 'default'...
................................................................
................................................................
................................................................
................................................................
......................s.........................................
E 
```

这`E`是最后一件事，在那里，然后一切都冻结了。

当我只是尝试测试单个应用程序时，它是相同的（没有运行测试）。如果我在崩溃后直接运行测试，我会得到：

```
python manage.py test someapp
Creating test database for alias 'default'...
Got an error creating the test database: database "test_pybackend" already exists

Type 'yes' if you would like to try deleting the test database 'test_pybackend', 
or 'no' to cancel: yes
Destroying old test database 'default'...
E 
```

明显的问题是，测试数据库永远不会被破坏。

我可能是什么原因 - 什么可能是解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T09:45:29.740

`E`意味着您的一项测试在运行时会导致错误。看起来该错误足以阻止整个测试框架的运行，从而导致测试数据库没有被删除。

`E`当您单独测试项目中的*每个*应用程序或仅针对某个应用程序时，您会得到吗？

您需要确定哪个测试包含错误。您可以像这样运行单个测试用例类：

```
python manage.py test someapp.TestCaseClassName 
```

以及像这样的个别测试方法：

```
python manage.py test someapp.TestCaseClassName.test_method 
```

（见[https://docs.djangoproject.com/en/dev/topics/testing/#running-tests](https://docs.djangoproject.com/en/dev/topics/testing/#running-tests)）

# hibernate - 如何使用 HQL 检索具有条件和“字符串”数字的记录

> ID：13601974
> 
> 赞同：1
> 
> 时间：2012-11-28T09:37:46.480
> 
> 标签：hibernate, hql

我正在尝试在我的 java web 应用程序 bean 中编写一个 HQL 查询。在数据库表中，有一列包含数字数据但不作为数字，作为字符串（varchar2）。这是我项目设计的一部分。用户将在 GUI 上输入一个数值，并通过 HQL 查询，bean 将检索数据。一个例子 ：

35（数据库值）<= 40（用户输入值）

这些值是字符串。不是号码。如何构建我的 HQL 查询字符串？我不认为，使用“LIKE”子句将是解决方案，还是这样做？我希望我的问题很清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T12:09:10.240

*请注意，当您的列（转换为数字）超过 numeric(19,2) 时，我的解决方案会崩溃*

```
where (case when isNumeric(YOUR_COLUMN) = 1 then cast(YOUR_COLUMN as big_integer) else 99999 end) < USER_INPUT_VALUE 
```

也许您需要调整 else 分支 - 当 YOUR_COLUMN 不是数字时，我选择*99999*作为默认值，因此它永远不会被视为有效值

# sendmail - sendmail 是否需要域名才能运行？

> ID：13601975
> 
> 赞同：0
> 
> 时间：2012-11-28T09:37:47.977
> 
> 标签：sendmail, php

我有一个运行 WordPress 的 VPS，并尝试安装 sendmail 以启用 WordPress 使用的 php mail() 功能。没有收到 WordPress 电子邮件，所以我创建了一个包含邮件功能的测试 php 文件来向我发送测试电子邮件。运行此 php 文件时，在加载之前挂起大约 30 秒，没有错误消息。我检查了我的邮件日志，发现其中不少：

```
Nov 27 22:21:01 sergeserver sm-msp-queue[5866]: unable to qualify my own domain name (sergeserver) -- using short name
Nov 27 22:37:19 sergeserver sendmail[5903]: My unqualified host name (sergeserver) unknown; sleeping for retry 
```

这可能是邮件功能不起作用的原因吗？如标题中所述，我的服务器还没有域名。今天晚上我将把我的域指向服务器，但同时一直在使用 VPS 的 IP 进行开发。

我已确保我的 php.ini 包含 sendmail 路径行

更新：我已经用 postfix 替换了 sendmail，因为我在这里更容易设置。我已将主机名 sergedenimes.com 放在我的主机和主机名文件中。邮件功能仍然无法正常工作。以下是一些最新的日志：

```
Nov 28 21:20:01 sergedenimes postfix/qmgr[2878]: 1834F2C1EE: from=<smmsp@sergedenimes.com>, size=689, nrcpt=1 (queue active)
Nov 28 21:20:02 sergedenimes postfix/local[3171]: 1834F2C1EE: to=<root@sergedenimes.com>, orig_to=<root>, relay=local, delay=1.1, delays=0.03/0.02/0/1, dsn=2.0.0, status=sent (delivered to command: procmail -a "$EXTENSION")
Nov 28 21:20:02 sergedenimes postfix/qmgr[2878]: 1834F2C1EE: removed
Nov 28 21:23:06 sergedenimes postfix[3216]: error: to submit mail, use the Postfix sendmail command
Nov 28 21:23:06 sergedenimes postfix[3216]: fatal: the postfix command is reserved for the superuser 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:41:08.560

服务器的 FQDN 需要完全限定（因此名称：*Fully Qualified* Domain Name）。即使它是彻头彻尾的错误，出于测试目的，将其设置为暂时在 sendmail 中和 sendmail 的 PHP 默认域中可解析的内容。

而且，如果您的服务器没有 IP 地址，那么您将遇到比 sendmail 错误更大的问题 - 让服务器认为它在 Internet 上而不在它上面！:-)

# iphone - 将图像保存在 IPHONE 中特定相册的图库中

> ID：13601976
> 
> 赞同：0
> 
> 时间：2012-11-28T09:37:48.233
> 
> 标签：iphone, ios, xcode, object

我想将图像保存在特定文件夹中的图库中。当我单击保存时，我正在使用此代码保存图像

```
- (IBAction)saveImageToGallery:(id)sender {
NSLog(@"SaveImageToGallery");
/*
 -----------------------------------------------------------------------
 THis will hide button and take screen shot then will show buttons again
 -----------------------------------------------------------------------
 */

[AddImagesToCanvasView setHidden:YES];
[ShareOnCanvas setHidden:YES];
[CanvasButtonForRatio setHidden:YES];

for(UIButton *b in self.view.subviews) {
    if([b isKindOfClass:[UIButton class]]) {
        b.hidden = YES;
    }
}

UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

for(UIButton *b in self.view.subviews) {
    if([b isKindOfClass:[UIButton class]]) {
        b.hidden = NO;
    }
}
UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil); 
```

}

我希望当我点击保存而不是打开照片时，我可以创建新相册或点击现有相册并将该图像保存在该相册中。我将如何做到这一点。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T09:54:48.117

您可以使用愚蠢的代码将图像保存到特定的相册。

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library saveImage:image toAlbum:@"Midhun" withCompletionBlock:^(NSError *error) {
        if (error!=nil)
        {
            NSLog(@"Noooo error: %@", [error description]);
        }
    }]; 
```

这里的图像是你的`UIImage`。

确保包含 AssetsLibrary 框架和`#import <AssetsLibrary/AssetsLibrary.h>`

请参考本[**教程**](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:44:30.130

将此行与路径一起使用

```
[UIImagePNGRepresentation(image) writeToFile:path atomically:YES]; 
```

如果文件类型为 JPEG，请使用以下代码

```
[UIImageJPEGRepresentation(image) writeToFile:path atomically:YES]; 
```

# mysql - 如何在数量列中将 mysql 中的数量更改 10%-20%。

> ID：13601977
> 
> 赞同：-1
> 
> 时间：2012-11-28T09:37:50.413
> 
> 标签：mysql

我有一个名为数量的列，包含 1000 行数据。我希望 mysql 随机更改所有数量，将数量增加 10%-20%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T09:41:46.517

您可以使用此更新语句

```
update mytable
set quantity = quantity * (1.1 + rand() * 0.1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:41:55.550

尝试 ：

```
UPDATE your_table
SET quantity = quantity*(1.1+RAND()*.1) 
```

# android - 在 Hashmap 中存储多个 EditText 值

> ID：13601979
> 
> 赞同：0
> 
> 时间：2012-11-28T09:37:56.187
> 
> 标签：android, listview, hashmap, android-edittext

我是安卓新手。我有一个列表视图，每行有 3 个 Edittext。现在我用不同的三个 hashmap 存储它，但我想将它存储在一个中。那么如何将这 3 个 EditText 值存储在一个 LinkedHashMap 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T11:35:09.173

请参阅下面的代码，将所有 edittext 值存储到 hashmap 中。

```
LinkedHashMap lHashMap = new LinkedHashMap();
hash.put("key1", editText1.getText().toString());
hash.put("key2", editText2.getText().toString());
hash.put("key3", editText3.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:44:28.257

这就是你需要的。

```
LinkedHashMap<Integer, String> myHashMap = new LinkedHashMap<Integer, String>();

ListView lv = new ListView(this);
EditText et1 = new EditText(this);
EditText et2 = new EditText(this);
EditText et3 = new EditText(this);

et1.setText("EditText1");
et2.setText("EditText2");
et3.setText("EditText3");

lv.addView(et1);
lv.addView(et2);
lv.addView(et3);

for (int i = 0; i < lv.getChildCount(); i++) {
    EditText child = (EditText) lv.getChildAt(i);
    myHashMap.put(i, child.getText().toString());
} 
```

随意询问是否有任何不清楚的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T09:45:21.840

您可以查看下面的示例并在编辑文本 textchanged 时在适配器 getview() 中使用 hash.put。

LinkedHashMap lHashMap = new LinkedHashMap();

hash.put("key1", youredittexvalue);

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# python - Scikits 学习定义 max-iter

> ID：13601980
> 
> 赞同：1
> 
> 时间：2012-11-28T09:37:58.320
> 
> 标签：python, svm, scikit-learn

我在文档中看到，类构造函数 中有一个`max_iter`选项[http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC](http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC)`sklearn.svm.SVC`

但是每当我尝试使用它时，我都会收到这样的错误消息

```
svc = svm.SVC(kernel=kernel_option[kernel_gene], degree=degree_value, gamma=gamma_value, max_iter = 1000)
TypeError: __init__() got an unexpected keyword argument 'max_iter' 
```

这是我的代码：

```
svc = svm.SVC(kernel=kernel_option[kernel_gene], degree=degree_value, gamma=gamma_value, max_iter = 1000) 
```

由于 kernel_option，degree 和 gamma 值都可以。这里有什么问题？我有某种语法错误还是什么？

**编辑：** @Ogrissel 发现了问题。我使用 0.12.1，而文档是 1.3 由于 1.2.1 是最新的稳定版，有没有解决方案（定义 max_iter）`sklearn.svm.SVC`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:03:36.000

这是与 git 存储库上主分支的当前状态相匹配的文档的开发版本。您可能正在运行已发布的 scikit-learn 版本。请使用[与您的 scikit-learn 版本匹配的文档，](http://scikit-learn.org/stable/support.html#documentation-resources)或者[从源代码库构建 scikit-learn](http://scikit-learn.org/dev/developers/index.html#git-repo)。

# c# - GridView 数据到数据库并进行验证

> ID：13601983
> 
> 赞同：0
> 
> 时间：2012-11-28T09:38:05.343
> 
> 标签：c#, asp.net, validation

我是 asp.net 开发者的初学者，网格视图包含

```
ProductID, ProductName, Price, Qty, Total 
```

默认设置在五列

如果选择产品名称则价格自动显示，但数量将输入用户。如果不输入数量则显示消息，如果任何一列完成填写保存数据库？

productName 是下拉列表，我的代码中需要服务器端代码

受保护的无效btnSave_Click（对象发送者，EventArgs e）{

```
 SqlDataAdapter sda;
    SqlCommand cmd;
    DateTime savedate = DateTime.ParseExact(txtBillDate.Text.Trim() + " " + DateTime.Now.ToString("hh:mm:ss tt"), "dd/MM/yyyy hh:mm:ss tt", null);

    TextBox txtProductID, txtPrice, txtQty, txtTotal;
    DropDownList ddlProductName;
    DataTable mdt = new DataTable();
    Label lblGrandTotal;

   if (DataCheck())
    {
        if (txtMobileNumber.Text != "")
        {
            con.Open();
            cmd = new SqlCommand("insert into Billing(BillNumber,BillDate,CustomerName,CustomerMobile) values('" + txtBillNumber.Text + "','" + savedate + "','" + ddlCustomerName.SelectedItem.Text + "','" + txtMobileNumber.Text + "')", con);

            for (int i = 0;i< GridView1.Rows.Count ; i++)
            {

                txtProductID = (TextBox)(GridView1.Rows[i].FindControl("txtProductID"));
                ddlProductName = (DropDownList)(GridView1.Rows[i].FindControl("ddlProductName"));
                txtPrice = (TextBox)(GridView1.Rows[i].FindControl("txtPrice"));
                txtQty = (TextBox)(GridView1.Rows[i].FindControl("txtQty"));
                txtTotal = (TextBox)(GridView1.Rows[i].FindControl("txtTotal"));
                lblGrandTotal = (Label)(GridView1.Rows[i].FindControl("lblGrandTotal"));

                    sda = new SqlDataAdapter("insert into BillingChild(ProductID,ProductName,Price,Qty,Total,BillNumber,BillDate,CustomerName,MobileNumber,BillChildNumber) values('" + txtProductID.Text + "','" + ddlProductName.SelectedItem + "','" + Convert.ToDecimal(txtPrice.Text) + "','" + Convert.ToDecimal(txtQty.Text) + "','" + Convert.ToDecimal(txtTotal.Text) + "','" + txtBillNumber.Text + "','" + savedate + "','" + ddlCustomerName.SelectedItem + "','" + txtMobileNumber.Text + "','" + txtBillChildNumber.Text + "')", con);
                    sda.Fill(mdt);
                    cmd.ExecuteNonQuery();

            }

            con.Close();
        }
    }
   else
   {
       Response.Write("<Script>alert('plz enter Qty')</script>");
   }

 }

public bool DataCheck()
{
    //TextBox txtProductID = null, txtPrice = null, txtQty = null, txtTotal = null;
    //DropDownList ddlProductName = null;
    //Label lblGrandTotal = null;
    TextBox txtProductID, txtPrice, txtQty, txtTotal;
    DropDownList ddlProductName;
    Label lblGrandTotal;
    if (GridView1.Rows.Count != 0)
    {
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {

            txtProductID = (TextBox)(GridView1.Rows[i].FindControl("txtProductID"));
            ddlProductName = (DropDownList)(GridView1.Rows[i].FindControl("ddlProductName"));
            txtPrice = (TextBox)(GridView1.Rows[i].FindControl("txtPrice"));
            txtQty = (TextBox)(GridView1.Rows[i].FindControl("txtQty"));
            txtTotal = (TextBox)(GridView1.Rows[i].FindControl("txtTotal"));
            lblGrandTotal = (Label)(GridView1.Rows[i].FindControl("lblGrandTotal"));

            if (txtQty.Text != "")
            {
                continue;

            }

            else
            {
                return false;
            }
        }
    }

    return true;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:48:27.753

如果您在所有五列中都使用默认设置，那么您将无法使用 requiredfieldvalidator。尝试正则表达式验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:41:11.277

您可以将 asp.net 必填字段验证器添加到 gridview 中的每个文本框。

```
<asp:TextBox id="txtQty" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator id="reqQty" ControlToValidate="txtQty" ErrorMessage="*"></asp:RequiredFieldValidator> 
```

**细化**

T-SQL

```
create table products
( 
    id int identity(1,1),
    name varchar(500),
    price decimal(18,2)
)

insert into products values ('Soap', 15.0)
insert into products values ('Provitas', 25.0)
insert into products values ('Paper', 10.0)
insert into products values ('Foam Bath', 150.0) 
```

ASPX

```
 <asp:GridView ID="gvTest" runat="server" DataSourceID="SqlTest" AutoGenerateColumns="false">
        <Columns>
            <asp:BoundField HeaderText="ID" DataField="ID" />
            <asp:BoundField HeaderText="Name" DataField="Name" />
            <asp:BoundField HeaderText="Price" DataField="Price" />
            <asp:TemplateField HeaderText="Qty">
                <ItemTemplate>
                    <asp:TextBox ID="txtQty" runat="server"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="reqQty" runat="server" ControlToValidate="txtQty" ErrorMessage="*"></asp:RequiredFieldValidator>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlTest" runat="server" ConnectionString="Data Source=.\SQLEXPRESS;Initial Catalog=play;Persist Security Info=True;User ID=user;Password=userpassword" SelectCommand="SELECT id, name, price FROM Products"></asp:SqlDataSource>
    <asp:Button ID="cmdTest" runat="server" Text="Submit" /> 
```

C#按钮单击处理程序以获取用户输入的数量

```
protected void cmdTest_Click(object sender, EventArgs e)
{
    for (int i = 0; i < gvTest.Rows.Count; i++)
    {
        int qty = Convert.ToInt32(((TextBox)gvTest.Rows[i].FindControl("txtQty")).Text);
        // code here
    }
} 
```

验证结果

![在此处输入图像描述](../Images/8c0bd98ec9a2cd29e76af17b3b50b291.png)

# hibernate - Hibernate：如何写一个结合和析取组合的标准？

> ID：13601988
> 
> 赞同：3
> 
> 时间：2012-11-28T09:38:30.753
> 
> 标签：hibernate, hibernate-criteria

我有一个过滤器对象列表：FilterVO

公共类FilterVO {

```
public paramName;
public String criteria;
public String value;
public String relation; 
```

}

过滤器对象的大小和内容由最终用户通过 UI 选择：

我必须根据这个过滤器对象查询数据库：

例如：

```
 filterVO1 = ["param1",">","value1",AND]
 filterVO2 = ["param2","<","value2",OR]
 filterVO3 = ["param3","like","%value3",AND]
 filterVO4 = ["param4","=","value5",OR]
 filterVO5 = ["param5",">","value6"] 
```

您能否建议如何使用“AND”、“OR”的组合动态构建上述过滤器的 Criteria 对象。

我写了以下代码：

```
 if (relation.equalsIgnoreCase("OR")) 
    {
        disJunction.add(getRestriction(criteria, paramName, value));
            maincriteria.add(disJunction);
} else  if (relation.equalsIgnoreCase("AND")) 
    {
    conJunction.add(getRestriction(criteria, paramName, value));
            maincriteria.add(conJunction);
} 
```

此代码不适用于 AND ， OR 组合。它总是取 AND 条件。请给出 AND,OR 组合的示例代码。

# java - 在 SWT 中禁用组件选择

> ID：13601992
> 
> 赞同：2
> 
> 时间：2012-11-28T09:38:45.830
> 
> 标签：java, user-interface, swt, components, mouselistener

我要做的是用鼠标在四个标签上绘制，这些标签通过paintListner与盒子布局组合在一起，添加到每个标签上。此外，每个标签都有一个 MouseMoveListener，它将每个鼠标点添加到一个 ArrayList。这是一个标签 l 的代码：

```
l.addMouseMoveListener(new MouseMoveListener() {
    public void mouseMove(MouseEvent e) {
        compLocation.setLocation(l.getLocation().x, l.getLocation().y);
        pointsToDraw1.get(n).add(new Point(e.x, e.y));
        l.redraw();
     }

});

l.addPaintListener(new PaintListener(){
    @Override
    public void paintControl(PaintEvent e) {
     Device device = Display.getCurrent ();
     Color red = new Color (device, 255, 0, 0);
     e.gc.setBackground(red);
     for(Point p : pointsToDraw1.get(n)){
        e.gc.fillRectangle(p.x, p.y, 4, 4);
     }

    }

}); 
```

当我用鼠标移动标签时，一切正常（参见示例图像的顶部）。一旦我按下鼠标左键并在绘图时保持按下状态，我只在开始按下按钮的标签上绘图（参见示例图像的底部）。这是因为我通过单击它会自动选择标签。是否有可能以某种方式禁用此自动选择并仅检查是否按下了鼠标左键？我只想在按下鼠标左键时绘制。

图片：

![在此处输入图像描述](../Images/fc9b75eb89aaf38759dc8992275f1f66.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:33:10.647

这是工作样本。它应该做你正在寻找的

```
 final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setSize(400, 400);
    final Point p = new Point(0, 0);
    shell.addMouseMoveListener(new MouseMoveListener() {

      @Override
      public void mouseMove(MouseEvent e) {

         p.x = e.x;
         p.y = e.y;

         shell.redraw(p.x,p.y,2,2,true);

         for(Control c: shell.getChildren())
         {
           if(c.getBounds().contains(p))
           {
             Point t = e.display.map(shell, c, p);
             p.x = t.x;
             p.y = t.y;
             c.redraw(p.x,p.y,2,2,true);
           }
         }

      }
    });
    PaintListener painter = new PaintListener() {

      @Override
      public void paintControl(PaintEvent e) {

        e.gc.setBackground(e.display.getSystemColor(SWT.COLOR_BLUE));
        e.gc.fillRectangle(p.x, p.y, 2, 2);

      }
    };
    shell.addPaintListener(painter);
    final Label l = new Label(shell, SWT.NONE);
    l.setBounds(10, 10, 60, 40);
    l.setBackground(display.getSystemColor(SWT.COLOR_CYAN));
    l.setText("Label1");
    l.addPaintListener(painter);
    l.addMouseMoveListener(new MouseMoveListener() {

      @Override
      public void mouseMove(MouseEvent e) {

        p.x = e.x;
        p.y = e.y;

        Point t = e.display.map(l, shell, p);

        Rectangle bounds = l.getBounds();
        if(bounds.contains(t))
        {
          l.redraw(p.x,p.y,2,2,true);
        }
        else
        {
          p.x = t.x;
          p.y = t.y;
          shell.redraw(p.x,p.y,2,2,true);
        }
      }
    });

    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose(); 
```

# java - 核心 J2EE 模式和实践仍然值得阅读？

> ID：13601996
> 
> 赞同：6
> 
> 时间：2012-11-28T09:38:54.283
> 
> 标签：java, jakarta-ee

我使用 Java 已经有一段时间了（大约 12-18 个月），想知道 Core J2EE 书是否仍然相关，我是否应该阅读它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T09:44:35.570

我认为 Adam Bien 写的书更好：Real World Java EE Patterns: Rethinking Best Practices。[http://press.adam-bien.com/](http://press.adam-bien.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T09:50:40.813

如果您指的是 Fildor 链接到的书，那么它最后一次更新是在 2003 年，介于 Java EE 1.3 和 1.4 之间。那是很久以前的事; 当前版本的 Java EE 与此有*很大*不同。依赖注入框架已经发生了革命，Web 框架和 REST 库的格局已经成熟到您很少编写自己的控制器 servlet 的地步。

如果您对使用 EE 5 或 EE 6 感兴趣，那么恐怕这本书已经过时了。另一方面，如果您正在处理使用 EE 1.4 的遗留项目，那么它实际上可能很有用！

这本书的网站上有一张方便的图表，其中包含了它所涵盖的模式（链接断开）：

[http://www.corej2eepatterns.com/](http://www.corej2eepatterns.com/)

该列表具有非常老式的感觉。数据传输对象，服务定位器，嗯...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:45:20.253

为了完成之前的响应列表，我认为对于 Java EE 6，Antonio Goncalves 关于 Java EE 6 和 GlassFish 的书可能是一本不错的读物。

例如，请参见此处：http: [//www.amazon.fr/Beginning-Java-EE-GlassFish-Second/dp/143022889X/](http://www.amazon.fr/Beginning-Java-EE-GlassFish-Second/dp/143022889X/) 有关信息，Antonio Goncalves 是编写 Java EE 规范的专家组的成员。