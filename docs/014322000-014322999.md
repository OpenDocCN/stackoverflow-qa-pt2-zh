# StackOverflow 问答 14322000-14322999

# mysql - Sqlite3 vs Postgres vs Mysql - Rails

> ID：14322003
> 
> 赞同：12
> 
> 时间：2013-01-14T16:00:45.200
> 
> 标签：mysql, ruby-on-rails, database, postgresql, sqlite

我想这已经被提过很多次了，但我又提了一次！！！无论如何...在 Ruby on Rails 中，Sqlite3 已经设置好，不需要额外的挑选和切片，但是...在这里和其他地方进行了大量阅读之后，有人说它不可扩展，而另一些人则说它实际上可以很好地做到这一点。有人说 MySQL 更适合大型项目，而另一些人则认为，只需使用 PostgreSQL。我很想听听你对此的看法。在两种情况下。一种情况是您正在为新闻发布网站（如 CNN 新闻）创建一个小网站，另一种情况是您正在创建一个类似于 Twitter 的网站？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T16:26:50.987

很大程度上取决于您的应用程序。

一般来说，对 SQLite 数据库的任何*写入*操作都很慢。即使是简单的 :update_attribute 或 :create 也可能需要 0.5 秒。*但是如果你的应用程序写的*不多（SQLite 的杀手锏：每次请求都写入数据库！），SQlite 是大多数网络应用程序的可靠选择。事实证明，它可以处理中小型流量。此外，它在开发过程中是一个非常好的选择，因为它需要零配置。它在内存模式下的测试套件中也表现得非常好（除非您有数千次迁移，因为它每次都从头开始重建）。此外，如果性能不再足够，从 SQLite 切换到 MySQL 几乎是无缝的。

MySQL 目前是一个坚如磐石的选择。未来会告诉你甲骨文下的 MySQL 会发生什么。

据我所知，PostgreSQL 是最快的，但我还没有在生产中使用*它*。也许其他人可以说得更多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T16:14:23.453

我会投票给 Postgres，它一直在变得更好，尤其是在性能方面，如果这是一个问题的话。以 CNN 和 Twitter 为例，从尽可能稳固的基础开始。以后你会很高兴的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T16:09:41.203

对于网站，SQLite3 足以满足任何更高的中产阶级流量场景。因此，除非您开始受到每小时数百万个请求的打击，否则无需担心 SQLite3 的性能或可伸缩性。

也就是说，SQLite3 并不支持专用 SQL 服务器所支持的所有典型功能。访问控制仅限于您可以使用数据库文件为机器上的 UNIX 帐户设置的任何文件权限，没有守护进程可言，内置函数集相当小。此外，没有任何类型的存储过程，尽管您可以使用视图和触发器来模拟那些。

如果您担心其中任何一点，您应该使用 PostgreSQL。MySQL 已（间接）被甲骨文收购，考虑到他们在收购 MySQL 之前也有自己的数据库，我不会把它放在他们身边，只是把它放在某个地方。过去，我在维护 PostgreSQL 方面也有过更顺畅的体验，而且 - 有趣的是 - 它总是感觉更敏捷、更可靠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:29:06.097

**免责声明：** 我的观点完全是偏见，因为我从 mysql 首次问世就开始使用它。

您的问题带来了关于如何设置开发环境的另一个论点。许多人会争辩说，您应该在开发中使用与测试/生产中相同的 dbms。这完全取决于您首先在做什么。在大多数情况下，Sqlite 在开发中可以正常工作。

与 Postgres 相比，我个人参与了更多使用 MySql 和 MsSql 的网站。

我参与了一个项目，该项目根据客户号码清除了国家不来电名单。我们将这些数据存储在本地。一些区号很容易拥有超过 500 万条记录。该应用程序最初是使用 MsSql 在 .Net 中编写的。这是“不那么快”。我将其更改为使用 PHP 和 MySql（在我发现 Ruby 之前很伤心）。它将在（大约）3 秒内插入/消化 500 万行。这比通过 MsSql 处理要快得多。我们还将通话记录数据存储在表格中，这些表格将在不到一天的时间内增长到 2000 万条记录。MySql 像冠军一样处理了我们扔给它的所有东西。当我们设置复制时，处理自然会受到影响，但它太小了，我们忽略了它。

这真的取决于您的项目以及适合项目需求的解决方案。

# iphone - cocos2d png透明度问题

> ID：14322008
> 
> 赞同：0
> 
> 时间：2013-01-14T16:01:23.007
> 
> 标签：iphone, cocos2d-iphone

之前有人问过这个问题，但解决方案对我不起作用。

我的简单球的 png 如下所示：

![在此处输入图像描述](../Images/9879c060c7dad4337aac6c1111c86514.png)

我在没有白色背景和透明背景的情况下保存了它。

为什么白色会出现在角落里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:06:24.933

检查您如何初始化 EAGLView。要支持 alpha 透明度，您应该使用 pixelFormat ，例如`kEAGLColorFormatRGBA8`. 您的代码可能如下所示：

```
EAGLView* glView = [EAGLView viewWithFrame:[window bounds]
                               pixelFormat:kEAGLColorFormatRGBA8
                               depthFormat:GL_DEPTH_COMPONENT16_OES
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0]; 
```

您可以尝试使用此 png 文件而不是您自己的文件来检查它是否可能是与 png 相关的问题：

![在此处输入图像描述](../Images/b95984ad468cf525e33974bfbcfdd5cd.png)

# c++ - 当进程通过 msgrcv 读取 IPC 消息时会发生什么？

> ID：14322009
> 
> 赞同：5
> 
> 时间：2013-01-14T16:01:24.393
> 
> 标签：c++, c, linux

当进程读取 IPC 消息时会发生什么`msgrcv`？

为什么我不能`mtype`多次阅读相同的消息？

正在使用的结构的代码：

```
struct msgbuff{
    long mtype;
    char mtext[150];   
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:12:38.347

一条消息只能阅读一次。这是 msgrcv 手册页描述其功能的方式：

> msgrcv() 系统调用从 msqid 指定的队列中删除一条消息，并将其放在 msgp 指向的缓冲区中。

没有办法偷看队列。如果需要，可以使用 msgrcv() 从队列中弹出一个项目，然后使用 msgsnd() 再次添加它。存在失败的风险（队列已满、内存不足等），因此它不是万无一失的。

# python - 将 python 的包与数组一起使用

> ID：14322010
> 
> 赞同：0
> 
> 时间：2013-01-14T16:01:25.900
> 
> 标签：python, arrays, pack

我正在尝试使用 struct 模块中的 pack 函数将数据编码为网络协议所需的格式。我遇到了一个问题，因为我没有看到任何方法来编码除 8 位字符之外的任何数组。

例如，要编码“TEST”，我可以使用格式说明符“4s”。但是如何对 32 位整数或其他非字符串类型的数组或列表进行编码？

这是一个具体的例子。假设我有一个`doEncode`接受 32 位值数组的函数。该协议需要一个 32 位长度的字段，然后是数组本身。这是我到目前为止所能想到的。

```
from array import *
from struct import *

def doEncode(arr):
    bin=pack('>i'+len(arr)*'I',len(arr), ???)

arr=array('I',[1,2,3])
doEncode(arr) 
```

我能想到的最好的方法是根据数组的长度动态地为包字符串生成格式。是否有某种方法可以指定我有一个数组，所以我不需要这样做，就像有一个字符串（例如会是`pack('>i'+len(arr)+'s'`）？

即使使用上述方法，我也不确定如何以类似的动态方式实际传递数组中的元素，即我不能只说`, arr[0], arr[1], ...`，因为我提前不知道长度是多少.

我想我可以将数组中的每个整数打包成一个循环，然后将所有结果连接在一起，但这似乎是一个 hack。有没有更好的方法来做到这一点？array 和 struct 模块似乎都在做自己的事情，但在这种情况下，我想要做的是两者的结合，两者都不想做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:05:05.783

```
data = pack('>i', len(arr)) + arr.tostring() 
```

# akamai - akamai 重定向到源服务器 302 重定向

> ID：14322013
> 
> 赞同：1
> 
> 时间：2013-01-14T16:01:36.427
> 
> 标签：akamai

我有一个`test1.jsp`有代码的 jsp ( )`response.sendRedirect("xxx/jsp/test2.jsp");`

当我使用 akamai url 访问它时，它正在重定向到源服务器。

```
http://akamai.domain/xxx/jsp/test1.jsp 
```

重定向到

```
http://origin.domain/xxx/jsp/test2.jsp 
```

有人可以建议必须做些什么来解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:49:22.167

将 Akamai CDN URL 添加到路径中：

```
String akamai_url = "http://akamai.domain/xxx/jsp/test2.jsp";

response.sendRedirect(akamai_url); 
```

# android - 完成 onCreate 中的活动时，如何在 onCreate 之前调用我的片段的 onCreateView？

> ID：14322014
> 
> 赞同：4
> 
> 时间：2013-01-14T16:01:41.980
> 
> 标签：android, android-fragments, nullpointerexception, android-fragmentactivity, ondestroy

这很奇怪。我有一个简单的应用程序，一旦登录，它就会在活动中显示一个片段。该应用程序还有一个不活动“超时”，在此之后它完成活动并显示登录屏幕 - 如果应用程序在超时发生时处于后台，那么当活动中发生下一个`onCreate`或`onStart`事件时它就完成了。

但是，有时当返回登录的活动时，我会在我的片段的 onActivityCreated 方法中得到一个 NPE。片段非常简单，只需调用字符串上的方法。字符串本身是通过调用 getArguments() 来检索的。我已经验证，每当创建 Fragment 时，总是会设置参数。

因此，在片段中似乎以某种方式`onActivityCreated`实际上调用`onCreate`了它，我知道这应该是不可能的。以下是堆栈跟踪的一部分：

```
01-14 15:34:37.176: E/AndroidRuntime(3272):     at com.example.app.fragment.MyFragment.onActivityCreated(MyFragment.java:203)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentManagerImpl.dispatchReallyStop(FragmentManager.java:1888)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentActivity.onReallyStop(FragmentActivity.java:787)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentActivity.doReallyStop(FragmentActivity.java:764)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:322)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at com.actionbarsherlock.app.SherlockFragmentActivity.onDestroy(SherlockFragmentActivity.java:261)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at com.example.app.MyActivity.onDestroy(MyActivity.java:195)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.app.Activity.performDestroy(Activity.java:5273)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1110)
01-14 15:34:37.176: E/AndroidRuntime(3272):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3562) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:07:26.480

经过更多调试后，我发现异常发生是因为调用了`getActivity()`before `onActivityCreated()`——此外，调用了一个方法，`getActivity()`并且该方法依赖于已创建的活动。/笨蛋

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:09:33.783

也许您正在以这样一种方式存储字符串，当片段进入后台时它不会被保存？没有代码，这是我能提供的唯一猜测。

解决问题的一种方法是简单地在您的`onActivityCreated`方法中进行空检查。取决于你想如何处理它。

# oop - Go 的接口编程模型与 OOP 相比如何？

> ID：14322015
> 
> 赞同：1
> 
> 时间：2013-01-14T16:01:41.973
> 
> 标签：oop, go

我已经阅读了大部分 Go 教程，但我仍然不清楚 Go 的接口编程模型与 OOP 相比如何？

有人可以解释我如何开始“用 Go 思考”吗？

我很困惑如何定义接口，然后基于接口创建对象？

Go 是否在编译期间为您隐式创建具体实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:34:36.190

OOP 通常试图解决的问题之一是多态性或两个不同类具有行为相同的实例的能力。通常在 OOP 中，这是通过使用继承来完成的。基类定义了其他类扩展的最小接口。Base 类的所有子类都可以用作 Base 类。

Go 不是通过继承而是使用接口来做同样的事情。接口是行为的“描述”。通过实现接口中描述的每个方法，由 Go 中的各个类型来满足此描述。如果一个类型确实实现了接口中描述的所有方法，那么它会自动满足接口并且可以由编译器自动*转换*为该接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:46:11.563

Go 的接口系统类似于[结构类型](http://en.wikipedia.org/wiki/Structural_type_system)。考虑一段python代码：

```
def foo(bar):
   bar.baz(5) 
```

在这个片段中，我们不知道具体类型`bar`是什么，但我们可以说它必须有一个`baz`接受单个`int`参数的方法。请注意，当我们编写类时，`bar`我们不必声明我们正在实现这个“接口”（有一个`baz`接受整数的方法）。我们只需编写一个`baz`在使用单个调用时可以正常工作的方法，`int`我们可以将一个实例传递给该`foo`方法。

Go 以类似的方式工作，但*在编译时*会检查所有内容。在 Python 中，如果我们将`foo`一个没有方法的类的实例传递给我们的方法，`baz`我们会得到一个运行时异常。在 Go 中，我们将定义一个接口，其`baz`方法和状态的类型`foo`为该接口的实例。现在，*任何*`baz`在单个上具有方法`int`的类型都可以满足所需的类型`foo`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:45:58.783

传统（Java）OO 是关于类层次结构的。你用类、一些抽象、一些最终和接口来建模你的问题。然后你提供实现。

Go 让您可以反过来：从具体类型开始并实现您的逻辑。如果出现或需要有用的抽象：将其打包到接口中并重构代码以使用此接口类型。

# c# - 将附加参数传递给 JavascriptSerializer

> ID：14322020
> 
> 赞同：1
> 
> 时间：2013-01-14T16:01:49.690
> 
> 标签：c#, json

我正在使用这样`JavascriptSerializer`的自定义`JavascriptConverter`：

```
public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
{
   SomeObjectModel TheObject = obj as SomeObjectModel;
   Dictionary<string, object> OutputJson = new Dictionary<string, object>();

   OutputJson.Add("SomeKey", SomeObjectModel.SomeProperty);

   return OutputJson;
} 
```

现在我希望能够`SomeKey`在运行时动态更改，所以我想创建一个键字典，将此字典传递给序列化程序，然后执行以下操作：

```
OutputJson.Add(TheJsonDictionary.SomeKey, SomeObjectModel.SomeProperty); 
```

但是，当我像这样向函数调用添加参数时：

```
public override IDictionary<string, object> Serialize(Dictionary<string, string> TheJsonDictionary, object obj, JavaScriptSerializer serializer) 
```

我在编译时收到一条错误消息。现在我知道为什么会出现这个错误（抽象方法是用 2 个参数定义的，我传递了 3 个参数），我想知道如何解决这个问题，以便我可以传入字典来对键进行编码。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T07:12:53.027

我想唯一的解决方法是子类化`JavaScriptSerializer`并重新实现该`Serialize`方法以接受任意`TheJsonDictionary`字典：

```
class CustomJavaScriptSerializer : JavaScriptSerializer
{
    public Dictionary<string, string> TheJsonDictionary { get; private set; }

    public string Serialize(object obj, Dictionary<string, string> TheJsonDictionary = null)
    {
        this.TheJsonDictionary = TheJsonDictionary;
        return base.Serialize(obj);
    }
} 
```

现在在您的自定义转换器中，您可以将序列化程序对象转换回`CustomJavaScriptSerializer`并获取自定义键字典：

```
public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
{
    var TheJsonDictionary = (serializer as CustomJavaScriptSerializer).TheJsonDictionary;

    // rest of method
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:41:22.067

据我了解，这就是您所需要的：

```
class Program
{
    static void Main(string[] args)
    {
        var dict = new Dictionary<string, string>();
        //dict.Add("SomeKey", "SomeProperty1");
        dict.Add("SomeKey", "SomeProperty2");
        var myConverter = new MyConverter();
        var serialized = myConverter.Serialize(dict, new SomeObjectModel() { SomeProperty1 = 1, SomeProperty2 = 2 }, new MySerializer());
    }

    class MySerializer : JavaScriptSerializer
    { }

    class MyConverter : JavaScriptConverter
    {
        Dictionary<string, string> _theJsonDictionary;

        public IDictionary<string, object> Serialize(Dictionary<string, string> TheJsonDictionary, object obj, JavaScriptSerializer serializer)
        {
            _theJsonDictionary = TheJsonDictionary;
            return Serialize(obj, serializer);
        }
        public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
        {
            SomeObjectModel TheObject = obj as SomeObjectModel;
            Dictionary<string, object> OutputJson = new Dictionary<string, object>();
            foreach (var item in _theJsonDictionary.Keys)
            {
                OutputJson.Add(item, TheObject.GetType().GetProperty(_theJsonDictionary[item]).GetValue(TheObject));
            }
            return OutputJson;
        }

        public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
        {
            return new object();
        }

        public override IEnumerable<Type> SupportedTypes
        {
            get { return new[] { typeof(object) }.AsEnumerable(); }
        }
    }

    class SomeObjectModel
    {
        public int SomeProperty1 { get; set; }
        public int SomeProperty2 { get; set; }
    }
} 
```

# c# - ServiceContext.SaveChangesWithRetries 与 SaveChangesOptions.Batch 异常

> ID：14322021
> 
> 赞同：1
> 
> 时间：2013-01-14T16:01:50.220
> 
> 标签：c#, .net, azure, azure-table-storage

我正在尝试使用批处理选项将实体保存在 azure 存储表中

这是代码：

```
foreach (TableEntity entity in entitiesList)
{
     ServiceContext.AddObject(entity.getTableName(), entity);
}

ServiceContext.SaveChangesWithRetries(SaveChangesOptions.Batch); 
```

我收到了这个异常：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>InvalidInput</code>
  <message xml:lang="en-US">99:One of the request inputs is not valid.
RequestId:b54a78fe-30ae-427e-86e9-6107d6e3fe5a
Time:2013-01-14T15:50:17.0134794Z</message>
</error> 
```

但是当我尝试在单独的查询中添加每个实体时，它可以工作

但我不明白的是，当我使用“Azure 存储资源管理器”检查 azure sotage 帐户上的表时，我发现了我正在尝试加载的数据！

谁能解释为什么我在 azure 表上找到了数据，尽管我有一个异常，以及如何修复它，以便将批处理选项与 ServiceContext.SaveChangesWithRetries 方法一起使用

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:14:07.603

Batch 选项仅支持添加最多 100 个只有一个 PartitionKey 的实体。请确保您保存的实体不超过 100 个并且都包含一个密钥。

请在此处找到有关批量实体事务的更多信息：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:46:31.070

> 99：其中一个请求输入无效。

上述消息中的 99 表示您的批次中的第 100 个实体存在错误（索引从 0 开始）。您可以检查的几件事：

1.  确保实体数据正确。
2.  由于您正在执行“添加”操作，因此请确保该实体不存在。除了“添加”操作，您还可以尝试**[插入或替换实体](http://msdn.microsoft.com/en-us/library/windowsazure/hh452242.aspx)**或**[插入或合并实体](http://msdn.microsoft.com/en-us/library/windowsazure/hh452241.aspx)**操作。

看看下面的代码：

```
public class CustomerEntity : TableServiceEntity
{
    public CustomerEntity()
    {
        PartitionKey = "Customer";
        RowKey = Guid.NewGuid().ToString();
    }

    public string FirstName
    {
        get;
        set;
    }

    public string LastName
    {
        get;
        set;
    }

    public DateTime? LastOrderDate
    {
        get;
        set;
    }
}

    static void InsertEntityBatchOperation()
    {
        var storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
        var cloudTableClient = storageAccount.CreateCloudTableClient();

        var customer = new CustomerEntity()
        {
            FirstName = "John",
            LastName = "Smith",
            LastOrderDate = DateTime.UtcNow.Date.AddDays(-10)
        };
        var serviceContext = cloudTableClient.GetDataServiceContext();
        serviceContext.AddObject(tableName, customer);
        customer = new CustomerEntity()
        {
            FirstName = "Jane",
            LastName = "Smith",
            LastOrderDate = DateTime.UtcNow.Date.AddDays(-5)
        };
        serviceContext.AttachTo(tableName, customer, null);
        serviceContext.UpdateObject(customer);
        customer = new CustomerEntity()
        {
            FirstName = "John",
            LastName = "Doe",
            LastOrderDate = DateTime.UtcNow.Date.AddDays(-7)
        };
        serviceContext.AttachTo(tableName, customer, null);
        serviceContext.UpdateObject(customer);
        customer = new CustomerEntity()
        {
            FirstName = "Jane",
            LastName = "Doe",
            LastOrderDate = DateTime.UtcNow.Date.AddDays(-3)
        };
        serviceContext.AttachTo(tableName, customer, null);
        serviceContext.UpdateObject(customer);
        //Following will perform Insert Or Merge Entity Operation
        serviceContext.SaveChangesWithRetries(SaveChangesOptions.Batch);
        //Following will perform Insert Or Replace Entity Operation
        serviceContext.SaveChangesWithRetries(SaveChangesOptions.Batch | SaveChangesOptions.ReplaceOnUpdate);
    } 
```

# .net - 在 Monotouch 中，是否可以将通用列表保存到 NSUserDefaults？

> ID：14322026
> 
> 赞同：3
> 
> 时间：2013-01-14T16:02:14.663
> 
> 标签：.net, ios, generics, xamarin.ios, nsuserdefaults

`List<Hashtable>`我的MonoTouch 应用程序中 有一个，我需要将它保存到我的设置中。`NSUserDefaults`但是，只接受从 继承的东西`NSObject`。

有没有一种简单的方法可以将我的列表包装在`NSObject`我可以存储在我的设置中，或者是一种快速的通用方法来编码和解码`Hashtable`一个 JSON 字符串（或类似的）？

还是有一个 MonoTouch 替代方案来保留一小部分`Hashtable`s？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:30:02.570

为什么不将数据保存到 SQLite 表中？

您可以使用字段创建安静的简单表：

*   id - auto inc int - 主键；
*   列表名称 - 字符串 - 识别确切的列表；
*   列表数据 - byte[] - 列表的数据。

对于 List -> byte[]（反之亦然）转换尝试使用这样的代码：

```
public static class Bytes
{
    /// <summary>
    /// Function to get byte array from a object
    /// </summary>
    /// <param name="_Object">object to get byte array</param>
    /// <returns>Byte Array</returns>
    public static byte[] ObjectToByteArray (object obj)
    {
        try {
            var _MemoryStream = new MemoryStream ();
            var _BinaryFormatter = new BinaryFormatter ();
            _BinaryFormatter.Serialize (_MemoryStream, obj);
            return _MemoryStream.ToArray ();
        } catch (Exception _Exception) {
            Console.WriteLine ("Exception caught in process: {0}", _Exception.ToString ());
        }

        return null;
    }

    public static T ByteArrayToObject<T> (byte[] arrBytes)
    {
        var memStream = new MemoryStream ();
        var binForm = new BinaryFormatter ();

        memStream.Write (arrBytes, 0, arrBytes.Length);
        memStream.Seek (0, SeekOrigin.Begin);

        var result = default(T);
        try {
            result = (T)binForm.Deserialize (memStream);

        } catch (Exception ex) {
            Console.WriteLine ("Deserialize error {0}", ex);
        }

        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T22:08:54.047

就像@Maxim 所说，有几种方法可用。如果您想用来`NSUserDefaults`存储您的数据，那么您可以将其序列化（使用 MonoTouch 提供给您的 .NET 功能），以：

*   **二进制格式**。然后使用`Stream`(or `byte[]`) 创建一个`NSData`您可以使用`NSUserDefaults`;存储的实例。或者

*   **放入一个字符串**并将其存储为a `NSString`（`string`也可以使用重载，但它会进行`NSString`转换）；

# java - 验证 Application Base 64 编码的公钥

> ID：14322029
> 
> 赞同：0
> 
> 时间：2013-01-14T16:02:21.740
> 
> 标签：java, android

我将构建一个 SDK，开发人员将在其中输入他的应用程序 base64 编码的公钥。所以需要验证他的公钥。因为我的安全性很差。谁能告诉我如何验证此密钥的正确性。我经历了[这个](https://stackoverflow.com/questions/11691462/verifying-a-signature-with-a-public-key)。但无法理解，我认为这只是为了验证签名数据而不是签名密钥。请让我知道我是否可以这样做？如果是，那怎么办？

# pdf - 实用地将 PDF 图像转换为 8 位

> ID：14322033
> 
> 赞同：3
> 
> 时间：2013-01-14T16:02:44.167
> 
> 标签：pdf

我有一组正常 RGB 颜色的 PDF。他们将受益于转换为 8 位以减小文件大小。是否有任何 API 或工具可以让我在保留 PDF 中的非光栅元素的同时做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:11:52.540

这是一个有趣的。带有 PDF Rasterizer 和 dotPdf 的 Atalasoft dotImage 可以做到这一点（免责声明：我为 Atalasoft 工作并编写了大多数 PDF 工具）。我首先会找到候选页面：

```
List<int> GetCandidatePages(Stream pdf, string password)
{
    List<int> retVal = new List<int>();
    using (PageCollection pages = new PageCollection(pdf, password)) {
        for (int i=0; i < pages.Count; i++) {
            if (pages[i].SingleImageOnly())
                retVal.Add(i);
        }
    }
    pdf.Seek(0, SeekOrigin.Begin); // restore file pointer
    return retVal;
} 
```

接下来，我将仅对这些页面进行光栅化，将它们转换为 8 位图像，但为了保持效率，我将使用一个很好地管理内存的 ImageSource：

```
public class SelectPageImageSource : RandomAccessImageSource {
    private List<int> _pages;
    private Stream _stm;

    public SelectPageImageSource(Stream stm, List<int> pages)
    {
        _stm = stm;
        _pages = pages;
    }

    protected override ImageSourceNode LowLevelAcquire(int index)
    {
        PdfDecoder decoder = new PdfDecoder();
        _stm.Seek(0, SeekOrigin.Begin);
        AtalaImage image = PdfDecoder.Read(_stm, _pages[index], null);
        // change to 8 bit
        if (image.PixelFormat != PixelFormat.Pixel8bppIndexed) {
            AtalaImage changed = image.GetChangedPixelFormat(PixelFormat.Pixel8bppIndexed);
            image.Dispose();
            image = changed;
        }
        return new FileReloader(image, new PngEncoder());
    }
    protected override int LowLevelTotalImages() { return _pages.Count; }

} 
```

接下来，您需要从中创建一个新的 PDF：

```
public void Make8BitImagePdf(Stream pdf, Stream outPdf, List<int> pages)
{
    PdfEncoder encoder = new PdfEncoder();
    SelectPageImageSource source = new SelectPageImageSource(pdf, pages);
    encoder.Save(outPdf, source, null);
} 
```

接下来，您需要将原始页面替换为新页面：

```
public void ReplaceOriginalPages(Stream pdf, Stream image8Bit, Stream outPdf, List<int> pages)
{
    PdfDocument docOrig = new PdfDocument(pdf);
    PdfDocument doc8Bit = new PdfDocument(image8Bit);
    for (int i=0; i < pages.Count; i++) {
        docOrig.Pages[pages[i]] = doc8Bit[i];
    }
    docOrig.Save(outPdf); // this is your final
} 
```

这或多或少会做你想做的事。不太理想的一点是图像页面已被光栅化，这可能不是您想要的。好消息是，仅仅通过光栅化，生成输出很容易，但它可能不是原始图像的分辨率。这可以完成，但需要从`SingleImageOnly`页面，然后更改其像素格式。问题在于 SingleImageOnly 并不意味着图像适合整个页面，也不意味着图像放置在任何特定位置。除了 PixelFormat 更改（实际上是在更改之前）之外，您还希望将用于将图像放置在页面上的矩阵应用于图像本身，并使用具有适当的边距和原始页面大小的 PdfEncoder将图像放在应有的位置。这一切都是干脆的，但它是大量的代码。

还有另一种方法也可以使用我们的 PDF 生成 API。它涉及打开文档并将文档的图像资源换成 8 位的。这也是可行的，但并非完全微不足道。你会做这样的事情：

```
public void ReplaceImageResources(Stream pdf, Stream outPdf, List<int> pages)
{
    PdfGeneratedDocument doc = new PdfGeneratedDocument(pdf);
    doc.Resources.Images.Compressors.Insert(0, new AtalaImageCompressor());

    foreach (int page in pages) {
        // GetSinglePageImage uses PageCollection, as above, to
        // pull a single image from the page (no need to use the matrix)
        // then converts it to 8 bpp indexed and returns it or null if it
        // is already 8 bpp indexed (or 4bpp or 1bpp).
        using (AtalaImage image = GetSinglePageImage(pdf, page)) {
            if (image == null) continue;
            foreach (string resName in doc.Pages[page].ImportedImages) {
                doc.Resources.Images.Remove(resName);
                doc.Resources.Images.Add(resName, image);
                break;
            }
        }
    }
    doc.Save(outPdf);
} 
```

正如我所说，这很棘手 - PDF 生成套件是为从整块布料制作新 PDF 或向现有 PDF 添加新页面（将来，我们希望添加完整编辑）而设计的。但是 PDF 将其所有图像作为文档中的**资源**进行管理，我们有能力完全替换这些资源。因此，为了让生活更轻松，我们将 ImageCompressor 添加到处理 AtalaImage 对象的 Image 资源集合中，并删除现有的图像资源并用新的图像资源替换它们。

现在我将做一些你可能不会看到任何供应商在谈论他们自己的产品时会做的事情——我将在多个层面上批评它。首先，它不是超级便宜。对不起。当您查看价格时，您可能会感到震惊，但价格包括来自真正首屈一指的员工的技术支持。

您可以使用 iTextPdf Sharp 或 Bit Miracle 的 Docotic PDF 库或 Tall Components PDF 库来做很多这样的事情。后两者也要花钱。事实证明，Bit Miracle 的工程师非常乐于助人，您很可能会在这里看到他们（嗨！）。也许他们也可以帮助你。iTextPdfSharp 存在问题，因为您确实需要了解 PDF 规范才能做正确的事情，否则您可能会输出垃圾 PDF - 我已经用我自己的库与 iTextPdfSharp 并排完成了这个实验，发现了一些*需要*深入了解 PDF 规范才能解决的常见任务的痛点。我试图在我的高级工具中做出决定，这样您就不需要了解 PDF 规范，也不需要担心创建错误的 PDF。

我不特别喜欢我们的代码库中有几个明显不同的工具可以做类似的事情。由于历史原因，PageCollection 是我们 PDF 光栅化器的一部分。PdfDocument 严格用于操作页面，并试图轻量级和吝啬内存。PdfGeneratedDocument 用于操作/创建页面内容。PdfDecoder 用于从现有 PDF 生成光栅图像。PdfEncoder 用于从图像生成纯图像 PDF。拥有所有这些明显重叠的利基工具可能会令人生畏，但它们之间存在逻辑关系以及它们之间的关系。

# node.js - Socket.io Clusterhub 无法正常工作

> ID：14322034
> 
> 赞同：1
> 
> 时间：2013-01-14T16:02:44.660
> 
> 标签：node.js, socket.io

[这是使用https://github.com/fent/socket.io-clusterhub](https://github.com/fent/socket.io-clusterhub)为每个集群进程执行的：

```
var store = new (require('socket.io-clusterhub'));
var io = require('socket.io').listen(config.ports.socket);
io.configure(function(){
    io.set('store',store);
});
console.log('Socket service listening on port '+config.ports.socket);
io.sockets.on('connection',function(socket){
    if(typeof fn === 'function'){fn(socket);}
}); 
```

但看起来所有 4 个线程都在尝试使用不同的套接字 id 注册同一个用户：

```
debug: client authorized
info: handshake authorized XEGx6zAP7rSWGQcaxmUB
debug: client authorized
info: handshake authorized r0Vcr7Z-r_9MnylyxmUC
debug: client authorized
info: handshake authorized 7RWUgoCuZPIu0IyQxmUj
debug: client authorized
info: handshake authorized mq0zKCgeDkisr-rbxmUk 
```

然后它完全断开连接：

```
debug: setting request GET /socket.io/1/websocket/XEGx6zAP7rSWGQcaxmUB
debug: set heartbeat interval for client XEGx6zAP7rSWGQcaxmUB
debug: websocket writing 7:::1+0
warn: client not handshaken client should reconnect
info: transport end (error)
debug: set close timeout for client XEGx6zAP7rSWGQcaxmUB
debug: cleared close timeout for client XEGx6zAP7rSWGQcaxmUB
debug: cleared heartbeat interval for client XEGx6zAP7rSWGQcaxmUB
debug: discarding transport
debug: setting request GET /socket.io/1/websocket/r0Vcr7Z-r_9MnylyxmUC
debug: set heartbeat interval for client r0Vcr7Z-r_9MnylyxmUC
debug: setting request GET /socket.io/1/websocket/7RWUgoCuZPIu0IyQxmUj
debug: set heartbeat interval for client 7RWUgoCuZPIu0IyQxmUj
debug: websocket writing 7:::1+0
warn: client not handshaken client should reconnect
info: transport end (error)
debug: set close timeout for client 7RWUgoCuZPIu0IyQxmUj
debug: cleared close timeout for client 7RWUgoCuZPIu0IyQxmUj
debug: cleared heartbeat interval for client 7RWUgoCuZPIu0IyQxmUj
debug: discarding transport 
```

它根本无法运行回调例程，即使它继续像`r0Vcr7Z-r_9MnylyxmUC` 仍然处于活动状态一样：

```
debug: cleared heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: set heartbeat interval for client r0Vcr7Z-r_9MnylyxmUC
debug: emitting heartbeat for client r0Vcr7Z-r_9MnylyxmUC
debug: websocket writing 2::
debug: set heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: got heartbeat packet
debug: cleared heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: set heartbeat interval for client r0Vcr7Z-r_9MnylyxmUC
debug: emitting heartbeat for client r0Vcr7Z-r_9MnylyxmUC
debug: websocket writing 2::
debug: set heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: got heartbeat packet
debug: cleared heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: set heartbeat interval for client r0Vcr7Z-r_9MnylyxmUC
debug: emitting heartbeat for client r0Vcr7Z-r_9MnylyxmUC
debug: websocket writing 2::
debug: set heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: got heartbeat packet
debug: cleared heartbeat timeout for client r0Vcr7Z-r_9MnylyxmUC
debug: set heartbeat interval for client r0Vcr7Z-r_9MnylyxmUC
debug: emitting heartbeat for client r0Vcr7Z-r_9MnylyxmUC 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:14:43.713

由于 socket.io 通常使用长轮询与服务器通信，因此每个新请求都可以由集群中的任何节点处理。因此，每个节点都需要具有客户端的服务器状态才能响应请求。主要问题是在初始握手期间，socket.io 需要在创建有效会话之前发出少量请求，并且它们可以分布在集群中，这增加了代码的复杂性。Clusterhub 使用跨进程消息同步所有内容的方法在我看来并不高效。我建议查看粘性会话方法，保证每个客户端始终使用相同的节点。您可以在 nodejs 服务器前配置负载均衡器，或尝试类似[https://github.com/indutny/sticky-session](https://github.com/indutny/sticky-session)

# algorithm - 检测字符串之间的匹配模式

> ID：14322044
> 
> 赞同：2
> 
> 时间：2013-01-14T16:03:31.577
> 
> 标签：algorithm, spell-checking, levenshtein-distance

我正在申请学习拼写某些单词。目前我的任务是检测用户输入和正确单词之间的匹配字母（突出显示错误所在的用户）。例如：

![在此处输入图像描述](../Images/e9c48731492097eb5b3667695cd6d7ee.png)

我怎样才能做到这一点？有某种已知的算法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:09:02.087

**对于您遇到的问题 -拼写校正器**，已经进行了大量研究。搜索引擎最常使用它来纠正用户查询。

但是，您尝试解决的问题的子集可以通过使用[**Levenshtein distance**](http://en.wikipedia.org/wiki/Levenshtein_distance)来解决。您需要修改原始实现以找出编辑并将它们标记为红色。

**Peter Norvig的**[这篇](http://norvig.com/spell-correct.html)特别文章显然很突出。本文还包含在许多编程语言中快速实现的链接。它在数学和概念以及代码之间取得了适当的平衡。

# c# - 在 Azure 上的 ASP.NET 中缓存 WCF ChannelFactory 或客户端代理？

> ID：14322061
> 
> 赞同：1
> 
> 时间：2013-01-14T16:04:15.457
> 
> 标签：c#, asp.net, wcf, session, azure

正如问题所说。目前，我们正在为每个会话的服务缓存 WCF 客户端代理（准确地说是 ChannelFactory）。这工作正常。但是现在我们已经转移到 Azure，并且有多个实例（会话）。我现在让 AppFabric 会话状态正常工作。所以会话是由 Azure 提供的，但现在问题在于通道工厂的缓存。因为工厂不是 [Serializable]，因此它似乎无法存储在 Session[] 中。有什么选择？每次调用 WCF 服务方法时是否应该重新创建通道？

[ 1.以前的工作状态；2.新尝试的解决方案；3\. 后备选项]

1.  WCF 客户端 -> ASP.NET -> 会话缓存工厂 -> 通道 -> WCF 服务
2.  WCF 客户端 -> ASP.NET -> 无法存储工厂！-> 频道 -> Azure 角色 WCF 服务
3.  WCF 客户端 -> ASP.NET -> 每次调用新通道 -> Azure 角色 WCF 服务

**更新**：我们已经确定，不能缓存（共享）ChannelFactory。所以问题仍然存在，我如何共享凭据 (UserNameCredentials)，因此现在没有共享，并且必须以某种方式分布在拆分实例中。显而易见的选择是将加密的凭据存储在缓存中？这是个好主意吗？还有其他方法吗？

这继续作为一个新问题：[如何共享 WCF 客户端凭据...](https://stackoverflow.com/questions/14324089/how-to-share-wcf-client-credentials-in-asp-net-amongst-role-instances-in-azure)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:32:16.400

如果要缓存 ChannelFactory，则需要为每个 azure 角色实例的每个会话创建一个。您是正确的，不应在会话之间共享 CacheFactories，因为它们可能支持不同的用户。

正如您所说的那样， CacheFactory 不可序列化，因此您无法将其放入分布式缓存中。

缓存它的一半原因是为了避免 CacheFactory 的设置时间（可能是几十毫秒）。由于 CacheFactory 的大小相当大，因此将其序列化进出缓存可能比这更长。

# ruby-on-rails - 使用设计的 API 身份验证（Ruby on Rails）

> ID：14322062
> 
> 赞同：9
> 
> 时间：2013-01-14T16:04:16.673
> 
> 标签：ruby-on-rails, api, authentication, devise

我正在尝试使用设计配置：token_authenticable 在我的项目中通过 json 添加身份验证。

我有从这篇文章中获取的工作 sessions_controller#create 代码 - [http://blog.codebykat.com/2012/07/23/remote-api-authentication-with-rails-3-using-activeresource-and-devise /](http://blog.codebykat.com/2012/07/23/remote-api-authentication-with-rails-3-using-activeresource-and-devise/)

```
def create
    build_resource
    resource = User.find_for_database_authentication(:email => params[:email])
    return invalid_login_attempt unless resource

    if resource.valid_password?(params[:password])
        resource.ensure_authentication_token!  #make sure the user has a token generated
        render :json => { :authentication_token => resource.authentication_token, :user_id => resource.id }, :status => :created
        return
    end
end

def invalid_login_attempt
    warden.custom_failure!
    render :json => { :errors => ["Invalid email or password."] },  :success => false, :status => :unauthorized
end 
```

问题是本机设计 session_controller#create 看起来像这样

```
 def create
    self.resource = warden.authenticate!(auth_options)
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)
    respond_with resource, :location => after_sign_in_path_for(resource)
  end 
```

而且我不知道如何结合这两种创建方法在网站上和通过 json 进行身份验证？

**更新**

工作代码

```
def create
    respond_to do |format|

      format.json do
        build_resource
        resource = User.find_for_database_authentication(:email => params[:email])
        return invalid_login_attempt unless resource

        if resource.valid_password?(params[:password])
          resource.ensure_authentication_token!  #make sure the user has a token generated
          render json: { authentication_token: resource.authentication_token, user_id: resource.id }, status: :created
          return
        end
      end

      format.html do
        self.resource = warden.authenticate!(auth_options)
        set_flash_message(:notice, :signed_in) if is_navigational_format?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_in_path_for(resource)
      end

    end
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T17:45:37.080

你希望你的`SessionsController#create`方法看起来像这样：

```
class Users::SessionsController < Devise::SessionsController
  def create
    resource = warden.authenticate!(scope: resource_name, recall: "#{controller_path}#new")
    set_flash_message(:notice, :signed_in) if is_navigational_format?
    sign_in(resource_name, resource)

    respond_to do |format|
      format.html do
        respond_with resource, location: redirect_location(resource_name, resource)
      end
      format.json do
        render json: { response: 'ok', auth_token: current_user.authentication_token }.to_json, status: :ok
      end
    end
  end
end 
```

...并确保您已将设计配置为使用您的客户端将传递的令牌身份验证密钥。

# c# - 为任何屏幕尺寸调整窗体大小

> ID：14322068
> 
> 赞同：2
> 
> 时间：2013-01-14T16:04:37.260
> 
> 标签：c#, winforms, .net-4.5

我刚刚设计了一个 Windows 窗体应用程序，但是当它在我朋友较小的笔记本电脑上运行时；表单看起来太大了，或者我应该说必须从左到右或从上到下滚动才能访问各种文本框、按钮等。我正在查看[这个 SO 答案](https://stackoverflow.com/questions/5074917/how-to-fit-windows-form-to-any-screen-resolution)，它显示了以下代码：

```
this.WindowState = FormWindowState.Maximized; 
```

我认为这段代码驻留在特定的表单构造函数中？这段代码能解决我所有的问题吗？除非我开始弄乱自己的屏幕分辨率，否则我目前没有较小的笔记本电脑可供测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:07:00.833

该问题的已接受答案中发布的代码当然需要放入表单构造函数中（InitializeComponents），并且具有最大化的表单当然可以消除很多关于调整大小的问题。无论如何，财产：

```
Screen.PrimaryScreen.WorkingArea 
```

对于相对于当前屏幕大小的窗体大小和定位非常有用。例如：

```
this.Width = Screen.PrimaryScreen.WorkingArea.Width / 2;
this.Height = Screen.PrimaryScreen.WorkingArea.Height / 2;
this.Top = (Screen.PrimaryScreen.WorkingArea.Top + Screen.PrimaryScreen.WorkingArea.Height) / 4;
this.Left = (Screen.PrimaryScreen.WorkingArea.Left + Screen.PrimaryScreen.WorkingArea.Width) / 4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:07:47.567

在将 设置`WindowState`为最大化之前，您需要您的表单完全可调整大小。

尽可能在 VS 设计器中缩小您的表单，为其每个组件设置 Dock、Anchor 和最小/最大尺寸，尝试在设计器中调整它的大小。重复直到它调整好大小。

`Panel`如果上述迭代还不够，您可能需要在 s 中将控件组合在一起以控制它们如何调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T09:51:03.123

我个人`TableLayoutPanel`通过定义行和列，并设置它们的高度和宽度来使用和设计我的表单，根据我希望我的表单的形状，有些带有`AutoSize`一些 with`Percent`和一些带有size 类型。`Absolute`然后我将控件（文本框、标签、组合框）放在 tablelayoutpanel 的单元格内，并将它们设置`dock`为`Fill`. 而已。

我不确定这是否是这份工作的正确方法，但两年来我一直在做这件事，没有失败。希望它对你也有帮助。

# php - 是否有模仿 User-Agent 字符串的 iPhone 模拟器，以便我可以使用 php-mobile-detect？

> ID：14322071
> 
> 赞同：1
> 
> 时间：2013-01-14T16:04:49.613
> 
> 标签：php, iphone, ios, mobile

是否有可以完全模拟 iPhone 的网站或应用程序？所有我尝试过的……</p>

*   [http://www.testiphone.com/](http://www.testiphone.com/)
*   [http://ipadpeek.com/](http://ipadpeek.com/)
*   [http://iphonetester.com/](http://iphonetester.com/)

`media`…在 CSS查询方面复制 iPhone 上网页的外观，但[php-mobile-detect](http://code.google.com/p/php-mobile-detect/)仍然像我通过桌面访问页面一样执行。这使我无法为移动设备加载单独的脚本。

正如[这个答案](https://stackoverflow.com/questions/13634178/iphone-emulator)中所建议的，我已经下载了 Xcode。但我不明白如何使用它通过模拟 iPhone 加载网页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:06:50.197

不，那里没有。有些人会争辩说有些模拟器使用了 iOS 内核，但他们错了。iOS 仿真只能通过设备本身或 Apple 平台上的 xCode 完成。

“使用 iOS 模拟器，您可以模拟用户在设备上执行的**大部分**操作。” [http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T07:10:53.600

我们已经使用[Google chrome 的 Mobile emulation](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation)尝试了我们的应用程序。它也模拟用户代理。

我们正在使用 SAP 的 OpenUI5 UI 应用程序，Google Chrome 的开发工具模拟了非常接近 iPhone 的体验。比在线提供的 iPhone 模拟器应用程序要好得多。

# primefaces - 在 primefaces 向导的最后一个选项卡上隐藏后退按钮

> ID：14322077
> 
> 赞同：7
> 
> 时间：2013-01-14T16:05:09.490
> 
> 标签：primefaces

我想在向导的最后一个选项卡上隐藏 BACK 按钮。我正在使用素面。解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T18:39:42.963

您可以使用 jQuery 在客户端执行此操作：

假设您在展示中使用向导： http: [//www.primefaces.org/showcase/ui/wizard.jsf](http://www.primefaces.org/showcase/ui/wizard.jsf)：

```
<p:wizard widgetVar="wiz"  
        flowListener="#{userWizard.onFlowProcess}"
        onNext="hideBackOnLastTab()"> 
```

javascript:

```
function hideBackOnLastTab() {
    if($("ul.ui-wizard-step-titles>li").last()
             .is("ul.ui-wizard-step-titles>li.ui-state-highlight")) {
            $("div.ui-wizard-navbar>button.ui-wizard-nav-back").css("display", "none");
    }

} 
```

您还可以注意到，向导中的下一个按钮在最后一个面板中以相同的方式隐藏（由 PF 客户端）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-26T16:38:29.933

我遇到同样的问题很久了，终于解决了。也许我的解决方案可以在未来对其他人有所帮助：

网页：

```
<p:wizard id="dataLoadSetWizard" widgetVar="wiz" onnext="hideBackOnLastTab()" ... 
```

Javascript：

```
function hideBackOnLastTab() {
            if(PF('wiz').getStepIndex(PF('wiz').currentStep) > 0) {
                PF('wiz').backNav.css("visibility", "hidden")
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T14:16:24.807

我想分享我使用 PrimeFaces 6.2 的解决方案。视图端没有自定义 JavaScript。

```
<p:importConstants
  type="com.example.WizardController"
  var="WizardController"
></p:importConstants>

<p:wizard
  flowListener="#{wizardController.onFlow}"
  widgetVar="wizard"
>
  <p:tab id="#{WizardController.STEP_LAST}">
  </p:tab>
</p:wizard> 
```

在流监听器中，我只是隐藏导航按钮并在最后一步禁用导航栏。隐藏导航栏是必要的。否则 PrimeFaces 内部 JavaScript 向导会再次将它们淡入。

```
@ViewScoped
@Named
public class WizardController {

  public static final String STEP_LAST = "last";

  public String onFlow(FlowEvent flowEvent) {
    if (flowEvent.getNewStep().equals(STEP_LAST)) {
      PrimeFaces.current().executeScript("PF('wizard').backNav.hide(); PF('wizard').nextNav.hide(); PF('wizard').cfg.showNavBar = false;");
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-03T09:40:39.007

从托管 bean 你可以试试这个：

```
 @ManagedBean(name = "testWizardBean")
  @ViewScoped
  public class TestWizardBean implements Serializable {

         private RequestContext requestContext;

         @PostConstruct
         public void init() {
              requestContext = RequestContext.getCurrentInstance();
              if (testWizardDto.getDirection().isEmpty()) {
                    requestContext.execute("PF('signwzd').nextNav.hide();");
         }
  } 
```

}

# python - 在 Django 中管理静态文件的默认方式

> ID：14322078
> 
> 赞同：0
> 
> 时间：2013-01-14T16:05:14.860
> 
> 标签：python, django, web-applications, django-staticfiles

我试图摆脱`404`Django 本地服务器。我的页面包括：

```
<script type="text/javascript" src="{{ STATIC_URL }}js/myjscript.js"></script> 
```

实际文件位于`C:/Users/PyCharmProjects/MyProject/MyApp/static/js/myjscript.js` Django 文档中[说](https://docs.djangoproject.com/en/dev/howto/static-files/#basic-usage)：

> 将您的静态文件放在静态文件可以找到它们的地方。
> 
> *默认情况下，这意味着*在您的 INSTALLED_APPS 中的应用程序的静态/子目录中。

我相信我的设置符合默认设置，但我仍然得到`404`，为什么会这样？请帮忙！

## 更新

简单地使用[模板标签](https://docs.djangoproject.com/en/1.4/howto/static-files/#with-a-template-tag)方法解决了这个问题：

```
{% load static %}
<script type="text/javascript" src="{% static 'js/myjscript.js' %}"></script> 
```

在他们说关于配置的[文档](https://docs.djangoproject.com/en/1.4/howto/static-files/#with-a-template-tag)`STATICFILES_STORAGE`中，但我什至没有碰它，`200`现在就获取这些文件。

这个 Django 的地方 - 静态文件 - 对我来说似乎非常黑暗和不清楚。对于如此简单的任务，我无法理解这么多复杂解决方案的目的。

如果有人会为这一切指出好的不晦涩的手册，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:13:12.737

尝试

```
<script type="text/javascript" src="{{ STATIC_URL }}js/myjscript.js"> 
```

[这个页面](https://docs.djangoproject.com/en/dev/howto/static-files/)是我从中获取信息的地方。

如果该站点已关闭，他们会举一个例子：

```
 <img src="{{ STATIC_URL }}images/hi.jpg" alt="Hi!" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:12:16.010

也许不言而喻，请确保将`STATIC_URL`其设置为您的`settings.py`. 我不知道在 Windows 部署中默认设置为什么。

# javascript - 动画图形的累积缩放

> ID：14322079
> 
> 赞同：0
> 
> 时间：2013-01-14T16:05:24.923
> 
> 标签：javascript, animation, graphics, scale, paperjs

我正在尝试编写一个小型 javascript 库来帮助使用 paper.js 对形状进行动画转换，但不幸的是，这种图形/数学并不是我的主要优势！

我已经能够通过每帧进行小的转换来实现简单的转换，例如平移和旋转，但我无法计算出累积缩放形状的数学。

例如，我的翻译动画代码的粗略伪代码版本：

```
function rotateAnimation(shape, degrees, timeSecs) {
    var anglePerSecond = degrees / timeSecs,
        duration = timeSecs;
    shape.onFrame = function(e) {
        var timePassedSinceLastFrame = e.delta, // in seconds
            rotateAmount = anglePerSecond * timePassedSinceLastFrame;
         shape.rotate(rotateAmount);
         duration -= timePassedSinceLastFrame;
    }
} 
```

我不知道如何使这种方法适用于缩放，因为我不知道如何计算每帧的缩放量。如果有人对此有任何建议，将不胜感激！如果您想查看实际代码，而不是我上面的混蛋伪代码，它在 github 上：[https ://github.com/jordanwallwork/paper.animate/blob/master/paper.animate.js](https://github.com/jordanwallwork/paper.animate/blob/master/paper.animate.js)

编辑：剪毛也有同样的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:34:28.750

最后，我对此的解决方案不是以增量步骤计算比例/剪切，而是执行转换以计算所需的结果，然后使用我已经编写的翻译代码分别简单地为每个点设置动画

# node.js - 如何正确处理 IcedCoffeeScript 的错误？

> ID：14322083
> 
> 赞同：8
> 
> 时间：2013-01-14T16:05:47.317
> 
> 标签：node.js, error-handling, coffeescript, iced-coffeescript

node.js 中的常见做法是将错误消息作为回调函数的第一个参数返回。在纯 JS（Promise、Step、seq 等）中有许多解决方案可以解决这个问题，但它们似乎都不能与 ICS 集成。在不损失可读性的情况下处理错误的正确解决方案是什么？

例如：

```
# makes code hard to read and encourage duplication
await socket.get 'image id', defer err, id
if err # ...
await Image.findById id, defer err, image
if err # ...
await check_permissions user, image, defer err, permitted
if err # ...

# will only handle the last error
await  
  socket.get 'image id', defer err, id
  Image.findById id, defer err, image
  check_permissions user, image, defer err, permitted

if err  # ...

# ugly, makes code more rigid
# no way to prevent execution of commands if the first one failed
await  
  socket.get 'image id', defer err1, id
  Image.findById id, defer err2, image
  check_permissions user, image, defer err3, permitted

if err1 || err2 || err3  # ... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T20:25:39.860

我通过样式和编码约定解决了这个问题。它确实一直出现。让我们把你的片段放在下面，充实一点，这样我们就有了一个可行的功能。

```
my_fn = (cb) ->
  await socket.get 'image id', defer err, id
  if err then return cb err, null
  await Image.findById id, defer err, image
  if err then return cb err, null
  await check_permissions user, image, defer err, permitted
  if err then return cb err, null
  cb err, image 
```

你是对的，这很丑陋，因为你在很多地方都短路了代码，你需要记住每次返回时都调用 cb 。

您提供的其他片段会产生不正确的结果，因为它们会在需要序列化的地方引入并行性。

我个人的 ICS 编码约定是：（1）从一个函数中只返回一次（哪个控制权落在最后）；(2) 尝试在同一缩进级别处理所有错误。用我喜欢的风格重写你所拥有的：

```
my_fn = (cb) ->
  await socket.get 'image id', defer err, id 
  await Image.findById id, defer err, image                   unless err?
  await check_permissions user, image, defer err, permitted   unless err?
  cb err, image 
```

在socket.get调用出错的情况下，需要检查两次错误，显然两次都会失败。我不认为这是世界末日，因为它使代码更干净。

或者，您可以这样做：

```
my_fn = (autocb) ->
  await socket.get 'image id', defer err, id
  if err then return [ err, null ]
  await Image.findById id, defer err, image
  if err then return [ err, null ]
  await check_permissions user, image, defer err, permitted
  return [ err, image ] 
```

如果您使用 autocb，这不是我最喜欢的 ICS 功能，那么每当您返回/短路函数时，编译器都会为您调用 autocb。从经验来看，我发现这种结构更容易出错。例如，假设您需要在函数开始时获取锁，现在您需要释放它 n 次。其他人可能不同意。

另一个注释，在下面的评论中指出。 `autocb`就像`return`它只接受一个值一样工作。如果你想像这个例子一样返回多个值，你需要返回一个数组或字典。 `defer`做解构任务来帮助你：

```
await my_fn defer [err, image] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-20T16:34:16.230

正如在IcedCoffeeScript 存储库的[第 35](https://github.com/maxtaco/coffee-script/issues/35)期中所讨论的，还有另一种基于 iced 样式*连接器*的技术，这些技术将回调/延迟作为输入，并返回另一个回调/延迟。

想象一下，您的项目有一个标准的回调参数顺序：第一个参数始终是错误，成功时为 null。此外，进一步假设您希望在出现错误的第一个迹象时留下一个函数。

第一步是制作一个连接器，我称之为“ErrorShortCircuiter”或“ESC”：

```
{make_esc} = require 'iced-error' 
```

这是这样实现的：

```
make_esc = (gcb, desc) -> (lcb) ->
    (err, args...) ->
        if not err? then lcb args...
        else if not gcb.__esc
            gcb.__esc = true
            log.error "In #{desc}: #{err}"
            gcb err 
```

要查看它在做什么，请考虑如何使用它的示例：

```
my_fn = (gcb) ->
    esc = make_esc gcb, "my_fn"
    await socket.get 'image id', esc defer id
    await Image.findById id, esc defer image
    await check_permissions user, image, esc defer permitted
    gcb null, image 
```

这个版本的`my_fn`first 生成了一个 ErrorShortCircuiter（或），它的工作是双重的：（1）使用错误对象`esc`触发；`gcb`(2) 记录有关错误发生的位置和错误内容的消息。显然，您应该根据您的设置改变确切的行为。然后，所有后续对带有回调的库函数的调用都会`defer`像往常一样被赋予生成的回调，然后通过`esc`连接器运行，这将改变回调的行为。新行为是`gcb`在出错时调用全局函数，并让当前`await`块在成功时完成。此外，在成功的情况下，不需要处理 null 错误对象，因此只填充后续插槽（如`id`、`image`和`permitted`）。

这种技术非常强大且可定制。关键思想是，产生的回调`defer`是真正的延续，可以改变整个程序的后续控制流。他们可以在库中执行此操作，因此您可以获得许多不同类型的应用程序所需的错误行为，这些应用程序调用具有不同约定的库。

# vba - 从备用（非主）Outlook (2013) 帐户从 Excel (2013) 发送电子邮件。(VBA)

> ID：14322088
> 
> 赞同：0
> 
> 时间：2013-01-14T16:06:10.850
> 
> 标签：vba, excel, outlook

我已经设法让 Excel 从备用帐户而不是我的主要帐户在 Outlook 中创建电子邮件。

麻烦的是，他们只是坐在第二个帐户的发件箱里，什么都不做。请注意，我可以手动从该帐户发送文件。

```
Dim MyOlApp As Object
Dim MyItem As Outlook.MailItem
Dim AttachName As String
Dim SendTo As String
Dim CCTo As String
Dim E, F, G As Integer
Dim Sys_Date As String
'Sys_Date = Format(Now(), "DD-MMM-YYYY")

F = Application.WorksheetFunction.CountA(Sheets("Sheet2").Range("A:A"))
'G = F

For E = 2 To F

Sheets("Sheet2").Select
AttachName = Cells(E, 2).Value
SendTo = Cells(E, 5).Value
CCTo = Cells(E, 6).Value

Set MyOlApp = CreateObject("Outlook.Application")
Set MyItem = MyOlApp.CreateItemFromTemplate("C:\localDocuments\2 - Reporting\1 - Guides + Sample Data etc\Email.oft")
MyItem.Display

On Error Resume Next
With MyItem
    Set .SendUsingAccount = MyOlApp.Session.Accounts.Item(2)
    .To = SendTo
    .CC = CCTo
    .BCC = ""
    .Subject = "Action required: " & AttachName
    'You can add other files also like this
    .Attachments.Add ("C:\localDocuments\2 - Reporting\Reports\" & AttachName & ".xlsx")
    .Display
    .Send
End With
On Error GoTo 0

Set MyItem = Nothing
Set MyOlApp = Nothing

Next E 
```

更新：

虽然我无法找到问题的实际原因。我设法找到了一个非常简单的解决方法。

我创建了一个新的 Outlook 配置文件，其中只有我们需要发送的备用帐户，它工作得很好。这非常有效，因为一旦运行了 3 小时报告，该代码每周只使用一次。

我可以看到它不适用于以这种方式定期（全天）发送电子邮件的人。

对于参考，您可以通过 WIN 8 搜索/邮件（按设置过滤）访问配置文件，选择邮件，然后查看配置文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:15:41.543

一个非常简单的修复。

我创建了一个新的 Outlook 配置文件，其中只有我们需要发送的备用帐户，它工作得很好。

我承认，对于以这种方式定期（全天）发送电子邮件的人来说，这不是一个好的解决方案。

# ios - 我应该将 iOS 下载保存在哪个目录中？

> ID：14322092
> 
> 赞同：1
> 
> 时间：2013-01-14T16:06:17.893
> 
> 标签：ios, objective-c, offline

我正在编写一个需要下载网页等的iOS应用程序。我应该使用什么目录在手机上存储下载的文件？它们不应该被频繁删除，因为离线访问是应用程序的卖点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:10:00.647

从离开[文档](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)开始，看起来您应该将它们保存到`<Application_Home>/Library/Caches`. 请注意，*可以*删除它以释放磁盘空间，但否则会保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:10:56.020

可能在`bundle/Documents` [链接](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW12)中。

无论如何，您可能应该检查它们何时到期。

# objective-c - 如何对多个 url 使用异步 NSURLConnection

> ID：14322094
> 
> 赞同：0
> 
> 时间：2013-01-14T16:06:22.833
> 
> 标签：objective-c, ipad, ios5, nsurlconnection, nsinvocationoperation

首先，我认为 iPad 只有一个 NIC（或任何硬件）来处理连接。因此请求按顺序排队和服务，并且不能同时运行 2 个连接。这个猜测是真的吗？

我有`UITabBar`控制器，每个选项卡的视图控制器下载并解析不同的 JSON 提要 URL。我创建了一个单例类，它从单个 URL 下载提要，然后解析它并在工作完成时调用其中一个视图控制器的委托函数。为了不挂起主线程，我决定使用异步连接。

`URLConnection4Target * _conn = [[URLConnection4Target alloc] initWithRequest:request delegate:self startImmediately:NO];`

因此，所有选项卡都可以从同一个窗口访问（不是一个接一个地导航），并且它们对不同的提要使用不同的 URL。

**我的问题**是如何在单例类中设计连接以按顺序（或如果可能的话同时）为多个视图控制器提供服务。

我尝试使用`NSInvocationOperation`是因为我不确定如果用户单击一个选项卡并访问该`NSURLConnection`对象而其他视图控制器已经可以访问该对象会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:30:44.877

首先，网络连接的数量与 NIC（网络接口卡）或以太网端口的数量无关。其次，您提到您正在为您的 URLConnection 使用单例模式？在没有看到你的单身人士的情况下，我假设这就是你似乎一次只能打开一个连接的原因。您可以根据需要为选项卡创建任意数量的 URLConnection，不要将它们限制为单例。想想 URLConnection/request，N x requests/tab，你应该没问题。

So when a tab is visible/active, create the URLRequest for the content, let it work asynchronously in the bg but make sure any UI updates are posted back to the main thread. 最后，当请求完成时，解除分配并忘记它。

# linq - 实体框架 - 添加新对象

> ID：14322097
> 
> 赞同：0
> 
> 时间：2013-01-14T16:06:28.640
> 
> 标签：linq, frameworks, entity, savechanges

我有一个名为“问题”的实体类型，当我创建它的新实例并将其添加到实体集“问题”中（使用 AddObject()），而不是在上下文中调用 SaveChanges() 方法时，一切正常。但是当我添加它，但还没有调用 SaveChanges() 并尝试对“问题”执行一些 linq 时，查询结果不包含最近添加的“问题”对象，在调用 SaveChanges() 之前，它似乎对 linq 不可见。这是正确的行为还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:14:05.233

我相信这是正确的行为，尤其是当您指的是实体框架时。

这应该能够在调用保存更改之前获取您添加的对象，即一旦您添加了它们：

```
ObjectStateManager.GetObjectStateEntries 
```

[msdn 参考](http://msdn.microsoft.com/en-us/library/bb738497.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:22:32.133

为简单起见，我决定不使用 LINQ，而是使用 Count() 方法来查看在 AddObject() 之后我有多少问题对象

```
(_context.Questions.ToArray()).Count() 
```

得到 8 个

```
// defaultQuestion object initialization here ...
_context.Questions.AddObject(defaultQuestion);
(_context.Questions.ToArray()).Count() 
```

又得到了 8

# jquery - for循环中的jQuery setInterval

> ID：14322099
> 
> 赞同：0
> 
> 时间：2013-01-14T16:06:29.860
> 
> 标签：jquery

我正在尝试在 jQuery 中创建一个应用程序（我是新手），其中圆圈每秒随机出现在画布中。我在 for 循环中生成它们，但不知道如何在经过一段时间后使它们出现。我尝试使用 setInterval() 和 delay() 但它不起作用（我认为我的语法写得不好）。对不起，如果这个问题太基本了。

这是我的代码：

```
var canvas, ctx;
var circles = [];
var selectedCircle;
var hoveredCircle;

function Circle(x, y, radius){
    this.x = x;
    this.y = y;
    this.radius = radius;
}

function clear() { // clear canvas function
    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
}

function drawCircle(ctx, x, y, radius) { // draw circle function
    ctx.fillStyle = 'rgba(255, 35, 55, 1.0)';
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, Math.PI*2, true);
    ctx.closePath();
    ctx.fill();
}

$(function(){
    canvas = document.getElementById('scene');
    ctx = canvas.getContext('2d');

    var circleRadius = 15;
    var width = canvas.width;
    var height = canvas.height;

    var circlesCount = 60; // we will draw 60 circles randomly
    for (var i=0; i<circlesCount; i++) {
        var x = Math.random()*width;
        var y = Math.random()*height;    
        circles.push(new Circle(x,y,circleRadius));
        drawCircle(ctx, circles[i].x, circles[i].y, circleRadius);
    }
}); 
```

谢谢你的帮助！

编辑：这里有几个不起作用的例子：

```
delay(1000) // after drawing function
drawCircle(ctx, circles[i].x, circles[i].y, circleRadius).delay(1000);
setInterval(drawCircle(ctx, circles[i].x, circles[i].y, circleRadius) {
}, 2000);
drawCircle(ctx, circles[i].x, circles[i].y, circleRadius).delay(1000).setInterval(1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:19:14.377

您需要重组代码（不能使用`for`循环），以便可以从`setInterval()`回调函数中绘制每个圆圈，如下所示：

```
$(function(){
    canvas = document.getElementById('scene');
    ctx = canvas.getContext('2d');

    var circlesCount = 60; // we will draw 60 circles randomly
    var circleRadius = 15;
    var width = canvas.width;
    var height = canvas.height;

    function makeCircle() {
        var x = Math.random()*width;
        var y = Math.random()*height;    
        var c = new Circle(x,y,circleRadius);
        circles.push(c);
        drawCircle(ctx, c.x, c.y, circleRadius);
        if (circles.length >= circlesCount) {
            clearInterval(interval);
        }
    }

    var interval = setInterval(makeCircle, 1000);
    makeCircle();
}); 
```

延迟时间的量作为 的第二个参数`setInterval()`。我在这里设置了 1000 毫秒（1 秒），但你可以使用任何你想要的值。如果您希望延迟时间是随机的，那么您将使用重复调用来`setTimeout()`代替，`setInterval()`并且您将为每个`setInterval()`调用生成随机时间量。

可以像这样生成两个值之间的随机整数：

```
function randomBetween(low, high) {
    return (Math.floor(Math.random() * (high - low)) + low);
} 
```

因此，如果您希望圆圈在 100 毫秒到 1000 毫秒之间的随机时间出现，那么您的代码将如下所示：

```
$(function(){
    canvas = document.getElementById('scene');
    ctx = canvas.getContext('2d');

    var circlesCount = 60; // we will draw 60 circles randomly
    var circleRadius = 15;
    var width = canvas.width;
    var height = canvas.height;

    function makeCircle() {
        var x = Math.random()*width;
        var y = Math.random()*height;    
        var c = new Circle(x,y,circleRadius);
        circles.push(c);
        drawCircle(ctx, c.x, c.y, circleRadius);
        if (circles.length < circlesCount) {
            setTimeout(makeCircle, randomBetween(100, 1000));
        }
    }

    makeCircle();
}); 
```

注意：在这两个代码块中，我通过查看 circles.length 重组了您跟踪圈数的方式，因为它是您创建的圈数的自然、预先存在的计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:13:29.827

尝试以下解决方案。阅读评论了解更多详情

```
$(function(){
    canvas = document.getElementById('scene');
    ctx = canvas.getContext('2d');

    var circleRadius = 15;
    var width = canvas.width;
    var height = canvas.height;
    var timer, index = 0;

    var circlesCount = 60; // we will draw 60 circles randomly
    for (var i=0; i<circlesCount; i++) {
        var x = Math.random()*width;
        var y = Math.random()*height;    
        circles.push(new Circle(x,y,circleRadius));
    }

    // draw one circle per second
    timer = setInterval(function(){
        // exit loop when there's no more circles to draw
        if(index >= circles.length) {
             // also clear the timer
             clearInterval(timer);
             return;
        }

        drawCircle(ctx, circles[index ].x, circles[index ].y, (hoveredCircle == index) ? 25 : 15);
        // go to next circle
        index += 1;
    }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:13:48.427

假设圆圈正确添加到画布，您需要将超时放在 for 循环中。For 循环将尽可能地立即执行所有内容，因此随机间隔它们可能是您的答案：

```
setTimeout(function(){
    //-- code that adds circles here --//
}, ( Math.floor(Math.random()*11) * 1000 ) ); 
```

`( Math.floor(Math.random()*11) * 1000 )`在 0 到 10 之间生成一个随机数，将其乘以 1000，然后将循环延迟该时间。

试一试。

# php - Symfony2 是否将所有翻译加载到内存中？

> ID：14322101
> 
> 赞同：2
> 
> 时间：2013-01-14T16:06:34.563
> 
> 标签：php, symfony, internationalization

Symfony2 将翻译存储在缓存中（`app/cache/{dev|prod}/translations/catalogue.fr.php`例如）使用任何提供程序。

缓存中的这个文件只定义了一个数组，其中键是英语，值是其他语言。

这是否意味着随着翻译字符串数量的增加，这个数组会随着时间无限增长？如果我翻译了 10.000 个字符串，这是否意味着每个请求都会将这 10.000 个数组加载到内存中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T23:47:28.283

是的，这就是 PHP 的工作方式。Symfony 将简单地在“缓存”数组中查找段键，这当然必须加载到内存中。

更详细地说，[这里](https://github.com/symfony/Translation/blob/master/Loader/ArrayLoader.php)是 ArrayLoader 类，它负责从数组中加载翻译段。

# android - Android NDK 找不到 stlport

> ID：14322103
> 
> 赞同：3
> 
> 时间：2013-01-14T16:06:49.607
> 
> 标签：android, android-ndk

我正在尝试使用 android NDK rev8b 编译本机库（从 WebRTC 派生）。我收到以下错误：

```
android_ndk/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld: cannot find -lstlport_static 
```

所以它找不到stl库。

我已经安装了`libmagic-dev`。

发行版的版本（由 返回`/proc/version`）是：

```
Linux version 2.6.32-40-generic (buildd@yellow) (gcc version 4.4.3 (Ubuntu 4.4.3-4ubuntu5) ) #87-Ubuntu SMP Tue Mar 6 00:56:56 UTC 2012 
```

**编辑** 我对修订版 8d 有同样的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:45:51.953

好的，我忘记指定：

LOCAL_LDLIBS := -L/ndk-path/sources/cxx-stl/stlport/libs/armeabi

在 Android.mk 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:47:23.483

见[http://docs.huihoo.com/android/ndk/r5/CPLUSPLUS-SUPPORT.html](http://docs.huihoo.com/android/ndk/r5/CPLUSPLUS-SUPPORT.html)

您必须在 Application.mk 中进行设置，例如：

```
APP_STL := stlport_static 
```

或者`stlport_shared`

# sql - 在 SQL Server 2008 R2 中使用 CASE 更改日期

> ID：14322110
> 
> 赞同：0
> 
> 时间：2013-01-14T16:07:05.943
> 
> 标签：sql, date, sql-server-2008-r2, case

我需要从 2 个没有共同点的表中编译数据。

为此，我创建了一个视图来提取我需要的位，它是交叉连接的，因此我需要通过过滤日期来去除不必要的行。

但是，我发现日期有问题。

基本上，一些用户必须在他们的系统上设置美国格式，这就是日期进入数据库的方式（`m/d/yyyy`）。

绝大多数日期（正确）采用英国格式 ( `dd/mm/yyyy`)

显然，我需要所有日期都采用相同的格式，但 CONVERT 和 CAST 似乎不起作用。

因此，我想出了使用 CASE 来确定字符串长度和内容的想法。

基本上，我查找长度为 10（例如 15/01/2012）并假设它是正确的（英国）日期，除非字符 4 和 5 大于 12。

如果是 9 个字符长，那么我需要查找第一个 '/' 的位置，它告诉我是 d/mm 还是 dd/m（年份总是 4 个字符）。

最后，如果它是 8 个字符长，我认为它必须是一个不正确的（美国）日期并颠倒数字，输入零作为填充符。

但是，当我尝试运行脚本时，它给了我：

```
Msg 102, Level 15, State 1, Line 12
Incorrect syntax near '='.
Msg 156, Level 15, State 1, Line 16
Incorrect syntax near the keyword 'THEN'.
Msg 4145, Level 15, State 1, Line 22
An expression of non-boolean type specified in a context where a condition is expected, near 'ELSE'.
Msg 102, Level 15, State 1, Line 24
Incorrect syntax near '@Day'.
Msg 4145, Level 15, State 1, Line 29
An expression of non-boolean type specified in a context where a condition is expected, near 'END'.
Msg 156, Level 15, State 1, Line 39
Incorrect syntax near the keyword 'IF'.
Msg 102, Level 15, State 1, Line 40
Incorrect syntax near ','.
Msg 102, Level 15, State 1, Line 41
Incorrect syntax near ','.
Msg 102, Level 15, State 1, Line 46
Incorrect syntax near ','.
Msg 156, Level 15, State 1, Line 50
Incorrect syntax near the keyword 'THEN'.
Msg 102, Level 15, State 1, Line 51
Incorrect syntax near ','.
Msg 102, Level 15, State 1, Line 52
Incorrect syntax near ','. 
```

失败的脚本部分如下，我希望有人对我需要做什么提出建议（或者实际上是一种更好的方法来整理日期）。

我想要实现的是直接从源表（mbrProject）填充新表（或视图）中的 [START_DATE] 字段，其中 ID 匹配（我已经通过选择 distinct 填充了新表中的 ID来自 mbrProject），但也尝试动态应用日期格式更改：

```
declare @length int,
    @Day nchar(3),
    @Month nchar(3),
    @Year nchar(5)

Update ProjectDates
SET [Start_Date] = 
(CASE
    WHEN len(mbrProject.[Start_Date]) = 8 THEN
        @Day = '0' & SUBSTRING(mbrProject.[START_DATE],3,2), @Month = '0' & SUBSTRING(mbrProject.[START_DATE],1,2), @Year = right(mbrProject.[START_DATE],5)
        @Day + @Month + @Year

    WHEN len(mbrProject.[Start_Date]) = 9 THEN
        IF charindex('/',mbrProject.[start_date]) = 2 THEN
        @Day = SUBSTRING(mbrProject.[START_DATE],3,3), @Month = '0' & SUBSTRING(mbrProject.[START_DATE],1,2), @Year = right(mbrProject.[START_DATE],5)
        ELSE @Day = '0' & SUBSTRING(mbrProject.[START_DATE],4,2), @Month = SUBSTRING(mbrProject.[START_DATE],1,3), @Year = right(mbrProject.[START_DATE],5)
        END IF
        @Day + @Month + @Year

    ELSE
        IF SUBSTRING(mbrProject.[START_DATE],4,2) > 12
            @Day = SUBSTRING(mbrProject.[START_DATE],4,3), @Month = SUBSTRING(mbrProject.[START_DATE],1,3), @Year = right(mbrProject.[START_DATE],5)
            ELSE @Day = SUBSTRING(mbrProject.[START_DATE],1,3), @Month = SUBSTRING(mbrProject.[START_DATE],4,3), @Year = right(mbrProject.[START_DATE],5)
        END IF
        @Day + @Month + @Year

    END)

Where ProjectDates.[START_DATE] = mbrProject.[START_DATE] 
```

==================================================== ======================

** 编辑 **

好的，非常感谢 Kaf。我使用通用脚本创建了一个新的 uodate 脚本，但它又给了我一个问题。

我将从显示新脚本开始：

```
Update ProjectDates
SET [Start_Date] =

(
select right([Start_Date],4) +  
    case 
        when len([Start_Date])=10 then 
            substring([Start_Date],4,2) + left([Start_Date],2)

        else    right('0' + left([Start_Date],firstIndex-1),2) + 
                right('0' + substring([Start_Date],firstIndex+1,secondIndex - firstIndex-1),2) 
                end

from 
    (
    select mp.[Start_Date], charindex('/',mp.[Start_Date],1) firstIndex,
          charindex('/',mp.[Start_Date],charindex('/',mp.[Start_Date],1)+1) secondIndex

    from mbrProject mp
    join ProjectDates pd
    on mp.ID = pd.Project_ID
    )A

where ProjectDates.Project_ID = mbrProject.ID
) 
```

发生的情况是，如果我只运行 SELECT 语句，例如：

```
select right([Start_Date],4) 
```

向下

```
on mp.ID = pd.Project_ID
)A 
```

这行得通。

不幸的是，虽然完整的脚本解析正确，但它返回以下错误：

```
Msg 4104, Level 16, State 1, Line 25
The multi-part identifier "mbrProject.ID" could not be bound. 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:09:13.000

试试这个通用解决方案，将不同长度的不同格式转换为 ISO 日期格式 ( `yyyymmdd`)。（假设仅当日期为 dd/mm/yyyy 时您有 10 个字符）一旦将字符串日期转换为 ISO 格式，将其转换为日期/日期时间类型以进行比较。

[SQL小提琴在这里](http://sqlfiddle.com/#!3/df77d/2)

```
--create a table for the demo.
create table T(mydate varchar(50))
insert into T (mydate, details)
values ('m/d/yyyy'),('mm/d/yyyy'),('m/dd/yyyy'),('dd/mm/yyyy')

select mydate,
       right(mydate,4) +  case when len(mydate)=10 then 
                               substring(mydate,4,2) + left(mydate,2)
              else right('0' + left(mydate,firstIndex-1),2) + 
       right('0' + substring(mydate,firstIndex+1,secondIndex - firstIndex-1),2) 
                        end ISO_format
from (
select mydate, charindex('/',mydate,1) firstIndex,
              charindex('/',mydate,charindex('/',mydate,1)+1) secondIndex
from T ) A

--Results
MYDATE      ISO_FORMAT
m/d/yyyy    yyyy0m0d
mm/d/yyyy   yyyymm0d
m/dd/yyyy   yyyy0mdd
dd/mm/yyyy  yyyymmdd 
```

# iphone - 将 NSMutableArray 保存到 NSUserDefaults - 添加对象的问题

> ID：14322112
> 
> 赞同：0
> 
> 时间：2013-01-14T16:07:08.270
> 
> 标签：iphone, ios, nsuserdefaults

我正在尝试使用 NSUserDefaults 保存数组。我已经让它在我的应用程序的其他部分工作，我似乎无法弄清楚为什么它现在不起作用。似乎它正在向 userDefaults-array 添加（null），但是当我 NSLog 我试图添加的内容时（[mainDelegate.globalValdaFragor objectAtIndex:i]）我可以看到我想要输入的值。

问题似乎是我无法向“felPaFragor”数组添加任何内容，因为当我尝试 NSLog 它时，我得到（null），而当我用另一个“随机”数组尝试它时它起作用了。

```
RPAppDelegate *mainDelegate = (RPAppDelegate *)[[UIApplication sharedApplication]delegate];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSMutableArray *felPaFragor = [[NSMutableArray alloc] init];
felPaFragor = [[defaults valueForKey:@"felFragorArray"] mutableCopy];

[felPaFragor addObject:[mainDelegate.globalValdaFragor objectAtIndex:i]];

[defaults setObject:felPaFragor forKey:@"felFragorArray"]; 
```

任何帮助将不胜感激。

编辑：我想我想通了。似乎我试图制作一个空数组的 mutableCopy ，而这反过来又使我的“felPaFragor”-array 出现故障。添加它使其工作。

```
felPaFragor = [[NSMutableArray alloc] init];
if ([[defaults valueForKey:@"felFragorArray"] objectAtIndex:0] != NULL) {
    felPaFragor = [[defaults valueForKey:@"felFragorArray"] mutableCopy];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:27:14.597

如果执行此操作后：

```
NSMutableArray *felPaFragor = [[NSMutableArray alloc] init];
felPaFragor = [[defaults valueForKey:@"felFragorArray"] mutableCopy]; 
```

你的`felPaFragor`是`nil`，那么很有可能`[defaults valueForKey:@"felFragorArray"]`是回来了`nil`。

因此，您的密钥有问题，或者可能与该密钥关联的对象尚未存储`NSUserDefaults`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:36:07.067

第一：你在使用ARC吗？

如果没有，你这里有内存泄漏：

```
NSMutableArray *felPaFragor = [[NSMutableArray alloc] init];
felPaFragor = [[defaults valueForKey:@"felFragorArray"] mutableCopy]; 
```

第一个喜欢创建和保留一个从未发布过的 NSMutableArray（也从未使用过：你根本不需要那条线，ARC 或不是 ARC）

只需使用：

```
NSMutableArray *felPaFragor = [[defaults valueForKey:@"felFragorArray"] mutableCopy]; 
```

话虽如此，塞尔吉奥的答案可能是正确的......你的 valueForKey:@"felFragorArray" 在此时调用它时可能从未设置过

# css - Firefox：键入未在按钮中垂直居中

> ID：14322113
> 
> 赞同：0
> 
> 时间：2013-01-14T16:07:09.837
> 
> 标签：css, firefox, typography

[查看http://hyperiontx.cbstage.com/](http://hyperiontx.cbstage.com/)右上角的搜索按钮

它在这个小提琴中正确居中：http: [//jsfiddle.net/VFMGR/](http://jsfiddle.net/VFMGR/)

Firefox 似乎忽略了我`line-height: 0`在网站上的声明。似乎也是因为我的字体类型 - Times New Roman 正确居中。为什么要这样做，解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:25:28.727

试试`padding:0 6px;`。按钮就像它们一样工作`box-sizing:border-box`，如果您为其设置了高度，则无需设置顶部/底部填充。

# vb.net - 在VB中显示带有deviceid的label1

> ID：14322117
> 
> 赞同：1
> 
> 时间：2013-01-14T16:07:26.000
> 
> 标签：vb.net

我想要完成的是`deviceId`在我将其插入计算机时显示。

基本上我想`label1`更改为deviceId。

我想通过 VB 来完成这项工作，但我找不到任何可以学习的示例，请您指出正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:15:33.720

在这里你可以找到 MSDN 文档来收集你想要的信息：http: [//msdn.microsoft.com/en-us/library/ms172516 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms172516(v=vs.90).aspx)

获得信息后，您只需将其贴在标签上即可。

# android - 加载数据时android webview闪烁一次

> ID：14322122
> 
> 赞同：5
> 
> 时间：2013-01-14T16:07:40.570
> 
> 标签：android, webview

我在 web 视图中预加载了文本。当来自互联网的数据到来时，我用新数据重新加载 webview。

问题是在加载数据转换期间屏幕闪烁一次。

有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T20:30:42.830

尝试禁用活动上的硬件加速器：

```
android:hardwareAccelerated="false" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T05:16:46.023

在您的活动中

```
 LinearLayout.LayoutParams dfparams = new LinearLayout.LayoutParams(0,0, 0);
    wedview.setLayoutParams(dfparams);
    wedview.loadDataWithBaseURL(URL_SERVER, content, "text/html", "utf-8", null);

    wedview.setWebViewClient(new WebViewClient() {
        public void onPageFinished(WebView view, String url) {
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT, 0);
            wedview.setLayoutParams(params);

        }
    }); 
```

在您的 layout.xml 中

```
 <LinearLayout
        android:id="@+id/llSearch"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@null"
        android:orientation="vertical" >
    <WebView
            android:id="@+id/wvContent"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:scrollbars="none" />
 </LinearLayout> 
```

# jquery - 如何确定在 MVC 中导致表单回发的 jQuery 事件

> ID：14322127
> 
> 赞同：1
> 
> 时间：2013-01-14T16:08:06.473
> 
> 标签：jquery, razor, asp.net-mvc-4

我有一个表格，我在其中使用自动完成功能选择员工，并根据选择执行一些复杂的任务。因此，我在文本框的更改事件上发回表单。

这是我的开始表格

```
@using (Html.BeginForm("EmployeeEdit","Employee", FormMethod.Post, new { id = "EmployeeEditView" })) 
```

这是我想在更改事件中回发表单的文本框。

```
@Html.TextBoxFor(m => Model.CurveToBeProxied, new { id = "txtSearchEmployee" }) 
```

这是更改事件的代码

```
$('#txtSearchEmployee').change(function () {
    alert("Hi");
    $('#EmployeeEditView').submit();
}); 
```

这是控制器动作。它适用于从 btnSelectEmployee 和 btnUnSelectEmployee 按钮单击回发，但不适用于文本框更改事件。我不知道如何识别更改事件。

```
public ActionResult EmployeeEdit(EmployeeEditViewModel model, string btnSelectEmployee, string btnUnSelectEmployee, string txtSearchEmployee)
{
    //if(! string.IsNullOrEmpty(btnSelectEmployee))
    //{
    //    SelectScenario(model);
    //}
    //else if (!string.IsNullOrEmpty(btnUnSelectEmployee))
    //{
    //    UnSelectScenario(model);
    //}
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:15:21.000

当输入框失去**焦点**时会触发 change 事件。尝试按 Tab。

或者...尝试使用[keyup](http://api.jquery.com/keyup/v)事件：

```
$('#txtSearchEmployee').keyup(function () { 
    var newValue = $('#txtSearchEmployee').val();       
    if(newValue === oldValue) // as RobertKoritnik suggested, check whether the value has changed in order to account for non-character keys such as arrow
       return false;

    oldValue = newValue;

    alert("Hi");
    $('#EmployeeEditView').submit();
}); 
```

**更新**：如何确定触发 HTTP 请求的 HTML 元素？

一种方法是添加一个隐藏字段，该字段将指定导致表单提交的元素。

例如，将其添加到您的模型中，然后创建如下字段：

```
@Html.HiddenFor(m => Model.ElementId, ) 
```

然后在提交表单之前设置它的值：

```
$('#txtSearchEmployee').change(function () {
    alert("Hi");
    $('#ElementId').val('txtSearchEmployee'); //set field that is causing the form submit
    $('#EmployeeEditView').submit();
}); 
```

您应该能够从控制器上的模型中检索此值。

# php - 我如何验证这种数字

> ID：14322128
> 
> 赞同：-5
> 
> 时间：2013-01-14T16:08:14.400
> 
> 标签：php

我正在寻找可以验证 10 位长电话号码的功能或逻辑。我想确保这个数字正好是 10 位数字，没有字母，没有连字符等。并且还需要检查数字的第一位以 0 开头。

```
Eg: 0714556260 
```

**更新**

```
$test = 0714556260;

if (preg_match("|^[0-9]{10}$|", $test)) {
      echo 'valid';
} else {
    echo 'not valid';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:11:21.310

```
if (preg_match('/^0\d{9}$/', 0714556260) ) {
    // OK
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:12:51.863

```
$str = "0714556260";
if (preg_match("|^[0-9]{10}$|", $str))
    echo "ok"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:10:02.357

您可以使用此正则表达式在 preg_match 函数中验证您的电话号码：

```
/^0\d{9}$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:11:24.500

请阅读[文档](http://php.net/manual/en/function.preg-match.php)

```
$test = 0714556260;

if (intval($test) && preg_match($test,"/^0[0-9]{9}$/")) {
      //do stuff
} 
```

# android - 在轮廓openCV中查找直线

> ID：14322132
> 
> 赞同：6
> 
> 时间：2013-01-14T16:08:20.287
> 
> 标签：android, opencv, contour

我正在使用 android openCV，我想检测图像中的三角形、矩形和圆形。所以我这样做如下： Canny => findContours => approxPolyDP 并得到这个图像： [![图片由 ImageShack.us 托管](../Images/088a9d99c8b6980651bbcb3211580619.png)](https://i.stack.imgur.com/83sFF.png)

但是， approxPolyDP 的结果包含这么多顶点，所以我无法确定它是哪个形状。为了消除顶点，我想检测每个轮廓中的线并找到它们的交点。我怎样才能为单个轮廓做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:56:46.207

对于圆圈检测，请使用[HoughCircles](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=cvhoughcircles#houghcircles)。

那么在这里你只是在寻找简化的多边形（三角形和正方形）。您是否尝试过在 approxPolyDP 中调整 epsilon？

这是来自 openCV [squares.cpp 示例代码](https://github.com/Itseez/opencv/blob/master/samples/cpp/squares.cpp)的示例片段- 查看如何相对于轮廓大小设置近似精度（epsilon，approxPolyDP 的第三个参数）。

C++代码，但是openCV接口应该是一样的，所以我敢肯定它很容易适应你的环境。

```
 // test each contour
  for( size_t i = 0; i < contours.size(); i++ )
      {
          // approximate contour with accuracy proportional
          // to the contour perimeter
      approxPolyDP(Mat(contours[i]), approx, 
                        arcLength(Mat(contours[i]), true)*0.02, true);

          // square contours should have 4 vertices after approximation
          // relatively large area (to filter out noisy contours)
          // and be convex.
          // Note: absolute value of an area is used because
          // area may be positive or negative - in accordance with the
          // contour orientation
      if( approx.size() == 4 &&
         fabs(contourArea(Mat(approx))) > 1000 &&
         isContourConvex(Mat(approx)) )
          {
          double maxCosine = 0;

          for( int j = 2; j < 5; j++ )
              {
                  // find the maximum cosine of the angle between joint edges
              double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
              maxCosine = MAX(maxCosine, cosine);
              }

              // if cosines of all angles are small
              // (all angles are ~90 degree) then write quandrange
              // vertices to resultant sequence

          if( maxCosine < 0.3 )
              squares.push_back(approx);
          }
      } 
```

# c# - 检查是否选择了 ComboBox 值

> ID：14322134
> 
> 赞同：5
> 
> 时间：2013-01-14T16:08:20.803
> 
> 标签：c#, winforms, forms, combobox

我正在编写一个包含一些按钮和一个组合框的表单。默认情况下禁用“确定”按钮，我希望仅在选择实际值（不是组合框的名称）后启用它。

我知道如何访问选定的值，以及如何检查是否选择了一个值——但这两个只能在表单关闭后完成（使用“x”或使用“ok”按钮——已禁用） .

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T16:20:50.540

或许是这样的：

```
 private void comboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox.SelectedIndex > -1)
        {
            buttonOK.Enabled = true;
        }
    } 
```

默认情况下，组合框的选定索引为 -1（组合框的名称，在选择另一个索引后无法重新选择），因此如果您检查它不是 -1，那么您就知道已选择了一个值。

然而，另一种选择，也是我使用的一种选择是，如果我总是希望选择一个值，则使用该`DropDownStyle`属性并将其设置为`DropDownList`. 这样，默认选择索引 0，用户只能从列表中选择项目，而不能选择其他项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:17:31.390

您可以使用组合框选择索引更改事件

将此添加到您的 InitializeComboBox 类

```
this.ComboBox1.SelectedIndexChanged += 
            new System.EventHandler(ComboBox1_SelectedIndexChanged); 
```

然后在选定的索引更改事件中，您可以检查是否选择了组合框

```
private void ComboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
   ComboBox cbx= (ComboBox) sender;
   Button1.Enabled = !string.IsNullOrEmpty(cbx.SelectedItem.ToString());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:30:18.303

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedIndex == -1)
            button1.Enabled = false;
        else
            button1.Enabled = true;

        //or
        //button1.Enabled = comboBox1.SelectedIndex == -1;
    } 
```

# android - 有没有办法直接从 android 应用程序访问 MSSQL 数据库？

> ID：14322135
> 
> 赞同：1
> 
> 时间：2013-01-14T16:08:27.183
> 
> 标签：android, sql

我最近正在做一个需要与 MSSQL 数据库交换数据的 android 应用程序。我现在正在做的是使用 PHP 页面来“连接”我的应用程序和数据库。只是想知道有没有办法让 android 应用程序直接向数据库发送查询？如果有办法这样做，我在哪里可以找到一些例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:14:03.690

不，你做得对。您必须创建您的 android 应用程序将用于与数据库交互的 Web 服务或 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T12:00:53.673

是的，可以使用“net.sourceforge.jtds.jdbc.Driver”。

只是一个简单的例子：

```
Log.i("Android"," MySQL Connect Example.");
Connection conn = null;
try {
String driver = "net.sourceforge.jtds.jdbc.Driver";
Class.forName(driver).newInstance();
//test = com.microsoft.sqlserver.jdbc.SQLServerDriver.class;
String connString = "jdbc:jtds:sqlserver://10.2.0.0/DatabaseName;encrypt=fasle;user=xxxxxxxxxx;password=xxxxxxxx;instance=SQLEXPRESS;";
String username = "your username";
String password = "your password";
conn = DriverManager.getConnection(connString,username,password);
Log.w("Connection","open");
Statement stmt = conn.createStatement();
ResultSet reset = stmt.executeQuery("select * from dbo.Account");

while(reset.next()){
Log.w("Data:",reset.getString(3));
Log.w("Data",reset.getString(2));
}
conn.close();

} catch (Exception e)
{
Log.w("Error connection","" + e.getMessage());
}
DatabaseName 
} 
```

# asp.net - ASP.NET 页面需要什么元 http-equiv？

> ID：14322140
> 
> 赞同：0
> 
> 时间：2013-01-14T16:09:10.647
> 
> 标签：asp.net

ASP.NET 页面需要什么 Meta http-equiv？

这就是我的 HTML 页面：

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

敬茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:13:32.893

HTML 是 HTML，不管是什么（如果有的话）服务器端程序生成它。

`<meta charset="utf-8">`虽然已经足够了（尽管任何一个都应该由真正的 HTTP 内容类型响应头来支持）。

（这假设您使用的是 UTF-8（您应该是），这不是由您选择的编程语言/框架/等决定的）。

# iphone - 目标 C：从方法更改 UIlabel 的文本

> ID：14322141
> 
> 赞同：3
> 
> 时间：2013-01-14T16:09:18.670
> 
> 标签：iphone, objective-c

我是 Objective C 的新手，我想我不明白你是如何处理对象的。我创建了一个 UILabel，我可以设置文本和其他所有内容。但我想用不同的方法更新它……意思是我想改变文本，但我没有那个方法中的对象！

这就是我设置 UILabel 的方式

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UILabel *scoreLabel = [ [UILabel alloc ] initWithFrame:CGRectMake((self.view.bounds.size.width / 2), 0.0, 150.0, 43.0) ];
    scoreLabel.textAlignment =  UITextAlignmentCenter;
    scoreLabel.textColor = [UIColor whiteColor];
    scoreLabel.backgroundColor = [UIColor redColor];
    scoreLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(36.0)];
    [self.view addSubview:scoreLabel];
    scoreLabel.text = [NSString stringWithFormat: @"%d", 0];
} 
```

那就是我想更改 UILabel 文本的地方

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.crossView.alpha = 0.5;
    ...change scoreLabel.test 
} 
```

这两种方法都在 ViewController 中！

也许我可以将 UILabel 绑定到自己？但如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T16:14:20.607

您需要在 .h 中为您的 UILabel 创建一个属性，以便您可以根据您的 ViewController 修改它

在你的 .h 之前添加这个`@end`

```
@property (strong, nonatomic) UILabel *scoreLabel; 
```

比在您的 viewDidLoad 中执行此操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    _scoreLabel = [ [UILabel alloc ] initWithFrame:CGRectMake((self.view.bounds.size.width / 2), 0.0, 150.0, 43.0) ];
    _scoreLabel.textAlignment =  UITextAlignmentCenter;
    _scoreLabel.textColor = [UIColor whiteColor];
    _scoreLabel.backgroundColor = [UIColor redColor];
    _scoreLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:(36.0)];
    [self.view addSubview:_scoreLabel];
    _scoreLabel.text = [NSString stringWithFormat: @"%d", 0];
} 
```

稍后在您的视图控制器中：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.crossView.alpha = 0.5;
    _scoreLabel.text = @"CHANGED TEXT";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:42:37.590

作为定义类属性的附加选项，您可以`tag`为您的`UILabel`实例设置属性，稍后当您想要更新标签的内容时，使用获取此标签

```
UILabel *label = (UILabel *)[self.view viewWithTag:someTag]; 
```

此方法在当前视图及其所有子视图中搜索指定视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:13:25.933

在标题中：

```
@property(nonatomic, retain) UILabel *scoreLabel; 
```

并在 .m 中（在任何方法之外，通常就在该`@implementation [ClassName];`行之后）：

```
@synthesize scoreLabel; 
```

然后，当您实例化它时，只需执行以下操作：

```
self.scoreLabel = [[UILabel alloc ] initWithFrame:CGRectMake((self.view.bounds.size.width / 2), 0.0, 150.0, 43.0)]; 
```

您将能够`self.scoreLabel`在 .m 中的任何位置引用它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T16:16:49.693

在你的界面写这个

```
interface YourViewController{
    ....
    UILabel *scoreLabel
}
.....

@end 
```

在您的实现中，您可以通过这种方式轻松访问您的变量

```
@Implementation YourViewController
....
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    self.crossView.alpha = 0.5;
    scoreLabel.text = @"Your Text"
}
....
@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T13:31:30.063

要在 UILabel 中设置文本/字符串，请使用：

```
self.yourLabel.text=@"Your String"; 
```

# f# - MailboxProcessor 数据序列化？

> ID：14322142
> 
> 赞同：1
> 
> 时间：2013-01-14T16:09:24.517
> 
> 标签：f#, recovery, mailboxprocessor

与 NServiceBus、MSMQ 等基于消息的体系结构相比……有没有办法“恢复备份”F# 邮箱处理器的状态？

还是扩展 MailboxProcessor 以启用数据序列化的最佳实践？

例如，在某种硬件故障的情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:47:41.937

> 有没有办法“恢复备份”F# 邮箱处理器的状态？

不是内置的，但当然，您可以保存并重新加载。

# ruby-on-rails-3 - 使用 Capybara 选择 Factory Girl 创建的多个对象

> ID：14322144
> 
> 赞同：1
> 
> 时间：2013-01-14T16:09:40.360
> 
> 标签：ruby-on-rails-3, capybara, factory-bot

我正在使用 Raild 3.2.11、Capybara 2.0.2 和 Factory Girl 4.1.0。

我正在尝试使用 Capybara 在表单中选择多个用户。但是，看起来我的用户没有被创建。视图工作正常，如果我使用 Rails Server，我可以选择多个用户。不知何故，它登录了最后一个创建的实例，Joe_4。

我的测试收到此错误：

```
Capybara::ElementNotFound:
   Unable to find option "Joe_1" 
```

**工厂.rb**

```
FactoryGirl.define do

  sequence :nickname do |n|
     "Joe_#{n}"
  end

  sequence :email do |e|
     "joe_#{e}@kebas.com"
  end

  factory :player, :aliases =>
       [:first_pair_1st_player, :first_pair_2nd_player,
       :second_pair_1st_player, :second_pair_2nd_player] do
     nickname              
     email                 
     password              "password"
     password_confirmation "password"
  end
end 
```

**特征/match_test_spec.rb**

```
require 'spec_helper'

describe "Entered matched results" do

before :each do
  4.times do 
   FactoryGirl.create(:player)
  end
end

context "should fail when," do 

  it "the score are the same" do
    visit root_path
    valid_player_login
    click_link "New Match"
    select('Joe_1', :from => 'doubles_match_first_pair_1st_player_id')
    select('Joe_2', :from => 'doubles_match_first_pair_2nd_player_id')
    select('Joe_3', :from => 'doubles_match_second_pair_1st_player_id')
    select('Joe_4', :from => 'doubles_match_second_pair_1st_player_id')
    fill_in "doubles_match_first_pair_score",   :with => "14"
    fill_in "doubles_match_second_pair_score",  :with => "14"
    click_link_or_button "Game Over"
    page.should have_content("Match can't end with the same score")
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:08:26.210

我遇到了同样的问题，解决方案是我运行了 spork。当我停止它时 - 一切正常。在这里阅读更多：

[为什么不对 Rspec + Selenium 使用共享的 ActiveRecord 连接？](https://stackoverflow.com/questions/8774227/why-not-use-shared-activerecord-connections-for-rspec-selenium)

# php - 淡季时间计算

> ID：14322147
> 
> 赞同：1
> 
> 时间：2013-01-14T16:09:46.180
> 
> 标签：php, mysql

我不知道“淡季”或“死亡”是否是我问题中的正确定义。无论如何，这里是解释：

在我`$period['from']`的`$period['to']`数组中，我需要计算 2013 年的“死亡或淡季”时期。

示例输入周期：

```
From            To
2013-04-01      2013-06-01
2013-07-15      2013-07-20
2013-09-01      2013-10-31 
```

死区将是（输出）：

```
From            To
2013-01-01      2013-03-31
2013-06-02      2013-07-14
2013-07-21      2013-08-31
2013-11-10      2013-12-31 
```

我完全坚持这一点。任何帮助，将不胜感激，

卡尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:22:40.467

尝试这个：

```
function dateDiff(array $dates, $startAt = null, $endAt = null) {
    if ($startAt === null) {
        $startAt = date("Y-01-01");
        $start = strtotime($startAt) - 86400;
    } else {
        $start = strtotime($startAt);
    }        

    if ($endAt === null) {
      $endAt = date("Y-12-31");
    }

    $result = array();

    foreach ($dates as $row) {
        $to = strtotime($row['from']);      
        $result[] = array('from' => date('Y-m-d', $start + 86400), 'to' => date('Y-m-d', $to - 86400));
        $start = strtotime($row['to']);;
    }
    $result[] = array('from' => date('Y-m-d', $start + 86400), 'to' => date('Y-m-d', strtotime($endAt)));

    return $result;
}

$dates = array(
    array('from' => '2013-04-01', 'to' => '2013-06-01'),
    array('from' => '2013-07-15', 'to' => '2013-07-20'),
    array('from' => '2013-09-01', 'to' => '2013-10-31'),
);

print_r(dateDiff($dates)); 
```

这将产生：

```
Array ( 
    [0] => Array ( [from] => 2013-01-01 [to] => 2013-03-31 ) 
    [1] => Array ( [from] => 2013-06-02 [to] => 2013-07-14 ) 
    [2] => Array ( [from] => 2013-07-21 [to] => 2013-08-31 ) 
    [3] => Array ( [from] => 2013-11-01 [to] => 2013-12-31 ) 
) 
```

# backpropagation - 具有快捷连接的神经网络中的反向传播算法

> ID：14322150
> 
> 赞同：1
> 
> 时间：2013-01-14T16:09:54.113
> 
> 标签：backpropagation, perceptron, neural-network

我目前正在 F# 中实现一个多层感知器，我将实现标准的反向传播算法，但我想知道如何修改该算法以处理快捷连接。对于快捷连接，我指的是跳过层的连接，例如，将输入层直接连接到输出层的连接。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:21:24.630

如果您的 nn 中没有快捷方式，并且它是标准前馈，则意味着每个输入都经过每一层，路径长度相同。你可以一步一步，一层一层地，然后倒过来调整权重。为什么我要说这个，虽然你可能知道？

这是因为使用快捷方式的 NN 方法几乎相同......几乎。你会一层一层地走，然后再回来。但最大的不同是一个神经元存在于两层中。

更复杂的是，在两层平行的一个神经元上的操作顺序肯定存在一些差异。前馈和反向传播。

所以答案并不准确，您需要开发算法处理层上的计算顺序。我能想象的最简单的解决方案就是照常进行。一层又一层（在这个算法中，一个神经元将通过一个循环到达更多次）。

# java - 如何解决这个舍入要求？

> ID：14322151
> 
> 赞同：0
> 
> 时间：2013-01-14T16:09:57.730
> 
> 标签：java, rounding, bigdecimal

我对金额有以下要求：

```
1.2448 -> 1.25
3.349  -> 3.35
0.474  -> 0.47 
```

我已经尝试了[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)的所有可能模式。[setScale](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29) (2, [RoundingMode](http://docs.oracle.com/javase/6/docs/api/java/math/RoundingMode.html) .) 方法，没有任何成功。结果如下：

```
UP:        1.25,  3.35,  0.48
HALF_UP:   1.24,  3.35,  0.47
CEILING:   1.25,  3.35,  0.48
FLOOR:     1.24,  3.34,  0.47
DOWN:      1.24,  3.34,  0.47
HALF_DOWN: 1.24,  3.35,  0.47
HALF_EVEN: 1.24,  3.35,  0.47 
```

我也尝试过使用 BigDecimal.round()，结果也不好。

我怎样才能以所需的方式四舍五入？

**编辑：**

为什么我实际上需要以这种看似奇怪的方式进行舍入？

在我们正在开发的新软件中，我们需要重现舍入行为或遗留软件（这是企业希望进行舍入的方式）

**解决方案：**

我绝对希望在我的所有计算中都使用 BigDecimals。

所以，最后我想出了这个简单的函数来进行“渐进式”舍入：

```
public static BigDecimal roundAmount(BigDecimal amount) {
    for (int i = amount.scale(); i >= 2; i--) {
        amount = amount.setScale(i, RoundingMode.HALF_UP);
    }
    return amount;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T16:12:38.493

使用`HALF_UP`但首先舍入到小数点后三位，然后再次舍入到 2。问题是您所需的舍入显示不一致的逻辑，因为 1.2448 小于 1.245，因此通常会向下舍入。但是先四舍五入到 3 位将得到 1.245，然后四舍五入到 1.25。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:27:11.060

您正在尝试做的是逐步四舍五入每个数字。1.2448 -> 1.245 -> 1.25。

这意味着需要四舍五入的最小数字是 .nn4444444444444445，这接近于在缩放后添加 1/2 - 4/9，即 1/18。

每当我看到有人建议这是不正确的，但很容易计算。

```
for (double d : new double[]{1.2448, 3.349, 0.474}) {
    double rounded = Math.round(d * 1e2 + 1.0 / 18) / 1e2;
    System.out.printf("%s should be %.2f rounded half up and is %s%n", d, d, rounded);
} 
```

印刷

```
1.2448 should be 1.24 rounded half up and is 1.25
3.349 should be 3.35 rounded half up and is 3.35
0.474 should be 0.47 rounded half up and is 0.47 
```

正如您所看到的，需要添加 1/18 是一个奇数，但是当您逐步将每个数字向上取整时，这就是您有效地做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:31:44.167

从[这里](https://stackoverflow.com/a/153753/1225328)到[那里](https://stackoverflow.com/a/3334247/1225328)：

```
public static double iterativeRound(double d, int scale) {
    int currentScale = new BigDecimal(String.valueOf(d)).scale();
    while (currentScale >= scale) {
        double i = Math.pow(10, currentScale--);
        d = Math.round(d * i) / i;
    }
    return d;
} 
```

例如：

```
System.out.println(iterativeRound(1.2448, 2));
System.out.println(iterativeRound(3.349, 2));
System.out.println(iterativeRound(0.474, 2)); 
```

印刷：

```
1.25
3.35
0.47 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:20:24.227

```
public static void main(String[] args) {
    double a = 0.474;

    NumberFormat df = DecimalFormat.getInstance();
    df.setMinimumFractionDigits(2);
    df.setMaximumFractionDigits(3);
    df.setRoundingMode(RoundingMode.HALF_UP);

    double b = Double.valueOf(df.format(a));
    NumberFormat dff = DecimalFormat.getInstance();
    dff.setMaximumFractionDigits(2);
    dff.setRoundingMode(RoundingMode.HALF_UP);

    System.out.println(dff.format(b));

} 
```

试试这个。

# xml - 计算元素下方的节点数

> ID：14322154
> 
> 赞同：0
> 
> 时间：2013-01-14T16:10:03.143
> 
> 标签：xml, linq

如何计算每个 xml 元素的 xml 后代数量，即：

```
<Person >
    <Name >Paxton</Name>
    <City >Munich</City>
    <Age >29</Age>
 </Person>
 <Person >
    <Name >Mike</Name>
    <City >Orlando</City>
     <Age >33</Age> 
```

我的意思是第一个 Person 本身下面有 7 个节点，Name 有 5 个节点等。我尝试使用

> ```
>  element.Descendants().Count() 
> ```

但不幸的是，这只会返回孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:19:17.740

相信你需要`element.Elements().Count()`。如果 element 是 Person 节点，它将返回 person 的元素数。即`3`用于您的示例 xml（姓名、年龄、城市）。[XElement.Elements()](http://msdn.microsoft.com/en-us/library/bb342765.aspx)将仅返回元素的直接后代。[XElement.Descendants()](http://msdn.microsoft.com/en-us/library/bb360635.aspx)将返回任何级别的所有子级。

# c# - 在多个线程上打开多个文件

> ID：14322158
> 
> 赞同：-2
> 
> 时间：2013-01-14T16:10:36.880
> 
> 标签：c#, multithreading, file

我必须处理大约 170.000 个文件，并且想使用多个线程。文件的名称按照年份-编号格式顺序排列，并在文件夹中按年份排序。（但它们可以都在同一个文件夹中）。不同的年份有不同的文件数。文件很小，每个只有几个 (10<size<20) KB。

它们的处理顺序无关紧要，因为处理任务的输出将存储在 SQL 数据库中。最好的方法是什么？不打开同一个文件两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:18:50.820

一种可能的解决方案是使用生产者/消费者设计模式。

您的生产者将获得文件列表并提供一些`ProducerConsumer`队列。您的消费者将处理从队列中取出的文件（或文件路径）并处理它（插入到您的数据库中）。使用这种方法，每个文件只会被处理一次。

[C# producer/consumer](https://stackoverflow.com/q/1656404/1916110) SO question中描述了`ProducerConsumer`队列问题。

**编辑**

但是，任务可能会变得复杂，例如

*   如果现有文件之一发生更改会发生什么情况。您是否必须使用新文件内容更新数据库？如果是这样，您将必须有一种“*标记*”机制，表示文件已更改（文件上次更新日期在某些情况下可能有效）
*   如果在此过程中添加新文件会发生什么情况。等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:19:38.650

我会说每年1个线程。每个“年份线程”读取以该年份编号开头的文件，并按顺序读取它们。至于去数据库，我建议你要么

*   如果全部转到单个表，请删除索引以便不会发生索引锁定，然后创建索引
*   如果您无法删除索引，至少使用行锁定，并在超时前等待事务（两个或多个线程可能同时插入）

另一种解决方案是让线程生成对文件的插入语句，然后执行该文件以进行插入，或者您可以使用批量插入工具。但这取决于表结构和您的 DBMS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:22:12.180

这是一个小例子：

```
public static class FilesProcessor
{
    private static List<FileProcessor> m_FileProcessors;

    public static void Start()
    {
        m_FileProcessors = new List<FileProcessor>();

        for (Int32 year = 2005; year < DateTime.Now.Year; ++year)
            InstanciateFileProcessor(year);

        while (!FinishedLoading())
            Application.DoEvents();
    }

    public static void Stop()
    {
        foreach (FileProcessor processor in m_FileProcessors)
            processor.Stop()

        m_FileProcessors.Clear();
        m_FileProcessors = null;
    }

    private static Boolean FinishedLoading()
    {
        foreach (FileProcessor processor in m_FileProcessors)
        {
            if (processor.IsAlive() && !processor.FinishedLoading())
                return false;
        }

        return true;
    }

    private static void InstanciateFileProcessor(Int32 year)
    {
        FileProcessor processor = new FileProcessor(year);
        processor.Start();

        m_FileProcessors.Add(processor);
    }
} 
```

然后是 FileProcessor 类：

```
public sealed class FileProcessor
{
    private Int32 m_Year;

    public Boolean IsAlive()
    {
        return ((m_Thread != null) && m_Thread.IsAlive);
    }

    public Boolean FinishedLoading()
    {
        return ((m_Thread == null) || m_Thread.Join(10));
    }

    public FileProcessor(Int32 year)
    {
        m_Year = year;

        m_Thread = new Thread(Load);
        m_Thread.Name = "Background File Processor";
    }

    public void Start()
    {
        if (m_Thread != null)
            m_Thread.Start();
    }

    public void Stop()
    {
        if ((m_Thread != null) && m_Thread.IsAlive)
            m_Thread.Abort();
    }

    private void Load()
    {
        // Browse the Year folder...
        // Get and read all fines one by one...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:36:00.157

我可以在这里看到两种可能的方法。

首先，将您的问题一分为二。1 - 确定要处理的内容，2 - 进行处理。第 1 部分可能必须自己运行，因此您最终会得到一个 100% 准确的需要处理内容的列表。然后，您可以在拆分列表和引入多个线程方面实现花哨（或不太花哨）的逻辑。

其次，做一些类似于@CarlosGrappa 建议的事情。所以基本上你用自己的“预编程”过滤器创建每个线程。正如卡洛斯建议的那样，这可能是一年。或者，您可以创建 24 个线程，每个文件时间戳一个小时。或 60 个线程，每个线程查看一个小时后的特定分钟。它基本上可以是任何可以为您提供明确标准的东西（a）尽可能均匀地分配负载，以及（b）保证数据文件只处理一次。

显然，这些方法中的第二种会运行得更快，但是您必须对如何拆分文件进行一些额外的思考。使用第一种方法，一旦你得到了完整的列表，你基本上可以一次在你的处理器上处理 100、1000 或 10000 个等文件，而不会过于聪明地知道你是如何做到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T16:47:29.587

使用 .Net 的并行类有什么问题？

只需将一个集合传递给并行的 foreach 循环。.Net 为您完成所有分配。您还可以传入自定义分区器，以便使用块分区。块分区导致线程不断请求更多任务。如果你不使用块分区，所有的工作都将被预先分配，当一些任务比其他任务花费更长的时间时会导致一些性能下降（这可能导致一些线程空闲而一个线程仍有工作要做）。

[http://msdn.microsoft.com/en-us/library/dd460720.aspx](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

# ios - 具有抽屉效果的 UITableView 单元格

> ID：14322161
> 
> 赞同：0
> 
> 时间：2013-01-14T16:10:40.967
> 
> 标签：ios, objective-c, uitableview

我正在寻找一种方法来实现具有抽屉效果的 UITableView 单元格，以便显示人员姓名以及每个人的详细信息。实际上，我希望当我单击一个单元格时，它会在下面打开另一个更大的单元格，其中包含父单元格的详细信息。

我怎样才能做到这一点 ？我必须在表格视图中添加另一个单元格并重新加载表格视图？如何获得打开细节单元格的效果？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-14T19:55:27.553

看看这个例子[——https://github.com/erica/iOS-6-Cookbook/tree/master/C10/07%20-%20Action%20Rows](https://github.com/erica/iOS-6-Cookbook/tree/master/C10/07%20-%20Action%20Rows)

这是来自 Erica 的 iOS 6 Cookbook 的源代码。

# vba - sub 中的“下一个 t”值不具备功能

> ID：14322162
> 
> 赞同：2
> 
> 时间：2013-01-14T16:10:47.347
> 
> 标签：vba

我是 VBA 新手，正在尝试编写一个简单的宏。我在下面粘贴了我的代码。基本上，我在单元格 B5 到 B15 中有 11 个随机数。如果这个数字小于 0.65，我希望它在旁边的列中打印 TRUE。如果它大于 0.65，我希望它在旁边的列中打印 FALSE。我想我基本上已经把代码写下来了，但是 Sub PrintandRead 中的“Next t”，t 的值将是 5 到 15（这是正确的）但是它会上升到 markov 函数，其中 t 然后返回 t=0 . 为什么它没有将“Next t”值带入函数？

```
Option Explicit

Function markov(pwd As Double, pww As Double) As Boolean
    Static wetYesterday As Boolean
    pwd = 0.4
    pww = 0.65
    Dim c As Double
    Dim t As Double
    If wetYesterday Then c = t - pww Else c = t - pwd
    If c <= 0 Then
        wetYesterday = True: markov = True
    Else
    wetYesterday = False: markov = False
    End If
End Function

Sub ReadAndPrint()
    Dim t As Double
    Dim p As Double
    Dim z(11) As Double
    Application.ScreenUpdating = False
    Worksheets("Sheet1").Activate
    p = 2
    For t = 5 To 15
        z(t - 4) = Cells(t, p)
    Next t
    p = p + 1
    For t = 5 To 15
    Cells(t, p) = markov(0.4, 0.65)
    'z(t - 4)
    Next t

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:20:43.223

虽然您在函数中调用`t`了一个变量`markov`，但这是与 main`ReadAndPrint`方法中的变量不同的变量。这称为作用域——当您在每个方法中声明每个变量时，它的作用域就是该方法。您可以在其他地方再次使用相同的名称，但它是一个完全不同的变量（并且可能具有不同的类型等）。

您可以做的最好的事情是通过更改声明作为参数传递`t`给方法：`markov`

```
Function markov(pwd As Double, pww As Double,t as Double) As Boolean 
```

并用

```
Cells(t, p) = markov(0.4, 0.65, z(t - 4)) 
```

您还应该`Dim t As Double`从`markov`函数中删除 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:03:19.047

你有两个选择：

*   超级简单的是：

在 C 列中执行以下操作：`=IF(B5 > 0.65, "TRUE", "FALSE")`

*   这是一个更简单的 VBA 版本来做同样的事情。

代码：

```
Option Explicit

Sub checkGreatness()
Dim inputRng As Range
Dim arrInput As Variant
Dim i As Integer

    '--get user input
    Set inputRng = Application.InputBox("Please enter Column Range", "Enter the Range", , , , , , 8)
    If inputRng Is Nothing Then
        Exit Sub
    End If
    '--populate array with that range
    arrInput = WorksheetFunction.Transpose(inputRng.Value)

    For i = LBound(arrInput) To UBound(arrInput)
        If IsEmpty(arrInput(i)) Then
            arrInput(i) = "NoValue"
        ElseIf Round(arrInput(i), 2) < 0.65 Then
            arrInput(i) = "True"
        Else
            arrInput(i) = "False"
        End If
    Next i

    '--output to next column
    inputRng.Offset(0, 1).Resize(UBound(arrInput), 1) = Application.Transpose(arrInput)

End Sub 
```

输出：

![在此处输入图像描述](../Images/24ffbf845daecf88a78f22383d5df362.png)

# ravendb - RavenDB 2.0 升级导致 403 Forbidden

> ID：14322163
> 
> 赞同：1
> 
> 时间：2013-01-14T16:10:48.027
> 
> 标签：ravendb

我们正在运行 RavenDB Build 2139 并决定升级到 build 2230（版本 2）以利用所有错误修复、增强功能和新功能。

升级后，当通过我们的网站调用 RavenDB 时，我们突然收到 403 Forbidden 错误消息（*该网站使用 LSCTallahassee\RavenDB AD 组中的 AppPool 身份运行*）。

我们正在运行 RavenDB 一个窗口服务，并在配置文件中指定了以下两项：

```
<add key="Raven/Authorization/Windows/RequiredGroups" value="LSCTallahassee\RavenDB"/>
<add key="Raven/AnonymousAccess" value="None"/> 
```

它的行为就像它没有将我们的 IIS 应用程序池标识识别为`LSCTallahassee\RavenDB`组的一部分，但它在升级之前就这样做了。

有没有人遇到过这个问题？

交叉张贴在这里：[https ://groups.google.com/d/msg/ravendb/BIvaaLUsfUA/wFpI1gQUBmEJ](https://groups.google.com/d/msg/ravendb/BIvaaLUsfUA/wFpI1gQUBmEJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:27:53.910

我想我发现了可能发生的事情......

首先， 2.0 版**不再支持**此设置

```
<add key="Raven/Authorization/Windows/RequiredGroups" value="LSCTallahassee\RavenDB"/> 
```

2.0 版建议您直接在`<system>`数据库中指定这样的设置，如下所示： [http ://ravendb.net/docs/server/authentication](http://ravendb.net/docs/server/authentication)

但是，在撰写本文时，似乎在遵循文档时存在错误。在设置区域中，您可以指定**Windows 身份验证用户或组**。使用**Windows 身份验证用户**设置有效，而**Windows 身份验证组**设置不起作用。我在这里记录了复制步骤：[https ://groups.google.com/d/msg/ravendb/BIvaaLUsfUA/kCdy4toDoZAJ](https://groups.google.com/d/msg/ravendb/BIvaaLUsfUA/kCdy4toDoZAJ)

为了解决这个问题，我们改为`Windows Authentication > Users`直接指定而不是`Windows Authentication > Groups`在安全设置中指定。

Oren 在帮助我们诊断此问题时指出的其他值得在这里分享的内容。任何*本地管理员*或*域管理员*都可以作为“安全功能”访问数据库，以防您将自己锁定在外。[https://groups.google.com/d/msg/ravendb/BIvaaLUsfUA/yKH9sFxNrFAJ](https://groups.google.com/d/msg/ravendb/BIvaaLUsfUA/yKH9sFxNrFAJ)

# jsp - 如何在我的 JSP 中嵌入小程序？

> ID：14322167
> 
> 赞同：0
> 
> 时间：2013-01-14T16:11:07.393
> 
> 标签：jsp, applet

好的，所以我有以下结构：

网页 > 管理员 > test.jsp

在这个 JSP 中，我有以下代码：

```
 <jsp:plugin type="applet" code="appletexample/AppletExample.class"width="400" height="400"> 
<jsp:fallback> <p>Unable to load applet</p>
</jsp:fallback>
</jsp:plugin> 
```

我的小程序位于 Source Packages > appletexample > AppletExample.java

问题是当我运行 jsp 页面并且未显示小程序时，我得到了一个 classnotfound 异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:05:37.580

通常，applet 将被创建为一个单独的 Java 项目，并以 JAR 文件的形式导出到 webapp 项目的公共 Web 内容中。您只需要在属性中引用物理 JAR 存档并在`codebase`属性中引用完全限定名称`code`。下面的示例假定`yourapplet.jar`与当前 JSP 文件位于同一文件夹中。

结构：

```
WebContent
 |-- META-INF
 |    `-- MANIFEST.MF
 |-- WEB-INF
 |    `-- web.xml
 |-- page.jsp
 `-- yourapplet.jar 
```

JSP：

```
 <jsp:plugin type="applet" codebase="yourapplet.jar" code="appletexample.AppletExample" width="400" height="400"> 
```

但是，当不将小程序捆绑为 JAR 文件并摆弄松散`.class`文件时，您需要在公共 Web 内容文件夹中准备一个与所需包结构匹配的文件夹结构，并将编译好的类文件放入其中。假设只有一个类文件（即主小程序类中没有内部/嵌套类！），那么您需要如何构造和引用它：

结构：

```
WebContent
 |-- META-INF
 |    `-- MANIFEST.MF
 |-- WEB-INF
 |    `-- web.xml
 |-- appletexample
 |    `-- AppletExample.class
 `-- page.jsp 
```

JSP：

```
 <jsp:plugin type="applet" codebase="." code="appletexample.AppletExample" width="400" height="400"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-27T09:06:27.777

 **– 使用 jsp:include 在请求时包含页面 • **<%@ include file="..." %>**

– 使用 <%@ include ... %>（包含指令）在页面翻译时包含文件 •</p>

用法——理解为什么 jsp:include 通常比 include 指令更好

• 小程序——使用 jsp:plugin 包含 Java 插件的小程序（很少见！）**

# tridion - 在提交部署阶段发布页面失败

> ID：14322168
> 
> 赞同：2
> 
> 时间：2013-01-14T16:11:07.790
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

页面发布失败，出现以下错误

> 阶段：部署提交阶段失败，
> 
> 事务提交失败：tcm:0-288346-66560，无法提交事务，事务提交失败：tcm:0-288346-66560，
> 
> 事务提交失败：tcm:0-288346-66560，无法提交事务，事务提交失败：tcm:0-288346-66560，事务提交失败：tcm:0-288346-66560，
> 
> 事务提交失败：tcm:0-288346-66560，无法提交事务，事务提交失败：tcm:0-288346-66560，
> 
> 事务提交失败：tcm:0-288346-66560，无法提交事务，事务提交失败：tcm:0-288346-66560，事务提交失败：tcm:0-288346-66560

这些页面直到昨天才成功发布。我们没有更改内容交付服务器上的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:30:05.220

*我认为从内容*交付系统发生变化的起点开始工作很重要，即使此时您不知道发生了什么或为什么。这意味着您应该回到基础并检查所有可能导致发布事务无法成功部署的事情。

我的第一个猜测是这是一个权限问题。您的内容交付服务器上的安全性如何管理？什么帐户正在运行部署过程？（您使用的是服务还是 Web 应用程序？）该帐户的文件系统权限是否设置正确，并且该帐户本身是否仍然有效。（寻找可能因外部影响而改变的东西 - 也许帐户已设置为过期 - 是的，我知道你不会故意这样做......）

# .net - 像 .Net 在 Bash 中那样格式化 SHA-1 哈希

> ID：14322170
> 
> 赞同：0
> 
> 时间：2013-01-14T16:11:08.433
> 
> 标签：.net, bash, hash, formatting, sha1

有人可以解释一下 hash.ComputeHash 函数在 C# .Net 中是如何工作的。

我正在尝试在 mac 服务器上的 bash 中模拟 .net hasing 程序的行为，但得到不同的结果！

.Net 代码：

```
 Byte[] z = System.Text.Encoding.UTF8.GetBytes("1B-F5");
 string myhash1 = BitConverter.ToString(hash.ComputeHash(z)); 
 string myhash2 = BitConverter.ToString(hash.ComputeHash(hash.ComputeHash(z))); 
```

返回值：

```
myhash1 = "EF-83-00-69-6F-22-7C-1C-9C-84-C3-66-06-06-A5-12-A0-C7-91-B5"
myhash2 = "D3-5C-95-AD-2D-9E-5A-49-D0-D8-2B-4F-A5-F9-9A-6F-02-EA-8C-83" 
```

问题是我无法在我的 bash 脚本中获得 Second has value（已被双重哈希）。

重击：

```
echo -n "1B-F5" | openssl sha1 
```

但是给出正确的第一个哈希值（减去“-”字符）

```
echo -n "1B-F5" | openssl sha1 | openssl sha1 
```

给出完全不同的哈希。我怀疑这是因为 C# 代码正在散列一个字节数组而不是一个字符串。

无论如何我可以在bash中获得相同的输出吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:17:52.943

尝试将第二个哈希步骤转换为字符串，然后对其进行哈希处理。看看你得到了什么。请记住，在此您还散列 - 八位字节分隔符。

```
byte[] z = System.Text.Encoding.UTF8.GetBytes("1B-F5");
string myhash1 = BitConverter.ToString(hash.ComputeHash(z)); 

z = System.Text.Encoding.UTF8.GetBytes(myhash1);
string myhash2 = BitConverter.ToString(hash.ComputeHash(z)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:18:39.763

如果您将结果与[在线 SHA1 工具](http://www.tools4noobs.com/online_php_functions/sha1/)的结果进行比较， 您会发现您正确地散列了字符串“1B-F5”。我怀疑您正在尝试散列一个两字节数组。

另一种可能性是您可能需要将第一个散列的字节数组转换为字符串并散列该字符串

# jquery - 使用 bing 地图 7.0 版将英国邮政编码转换为纬度和经度的 Bing 地图方法？

> ID：14322171
> 
> 赞同：1
> 
> 时间：2013-01-14T16:11:14.523
> 
> 标签：jquery, bing-maps

是否有任何方法可以使用 Bing 地图 7.0 版将英国邮政编码转换为纬度和经度？我有一个包含邮政编码但无法找到纬度和经度的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:23:46.937

使用 Bing Maps AJAX V7，您可以使用搜索模块根据邮政编码执行地理编码操作。

请参阅 MSDN 的 SearchManager - 地理编码方法：http: [//msdn.microsoft.com/en-us/library/hh868062.aspx](http://msdn.microsoft.com/en-us/library/hh868062.aspx)

这里有一个活生生的例子： http: [//www.bingmapsportal.com/isdk/ajaxv7#SearchModule2](http://www.bingmapsportal.com/isdk/ajaxv7#SearchModule2)

您可以直接通过 URI 使用 REST 服务，例如： [http ://dev.virtualearth.net/REST/v1/Locations/UK/postalCode?includeNeighborhood=includeNeighborhood&maxResults=maxResults&culture=en-GB&key=BingMapsKey](http://dev.virtualearth.net/REST/v1/Locations/UK/postalCode?includeNeighborhood=includeNeighborhood&maxResults=maxResults&culture=en-GB&key=BingMapsKey)

# c# - LINQ：已添加具有相同键的项目

> ID：14322173
> 
> 赞同：3
> 
> 时间：2013-01-14T16:11:21.813
> 
> 标签：c#, linq

使用 LINQ 将数据记录加载到对象中时出现以下错误。在我添加两个额外字段`dataLevelId`和`dataLevel`. 我必须做一些我不应该做的事情，因为现在它不起作用了。谁能发现我做错了什么？

```
{System.ArgumentException: An item with the same key has already been added.
   at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)... 
```

这是我的代码：

```
var groups = reader.Cast<IDataRecord>()
    .GroupBy(dr => new { ID = (int)dr["productId"] })
    .GroupBy(g => g.Key.ID);

products = (
    from productGroup in groups
    let productRow = productGroup.First().First()
    select new Product()
    {
        ID = Convert.ToString((int)productRow["productId"]),
        Name = !DBNull.Value.Equals(productRow["name"]) ? (string)productRow["name"] : "",
        OutputFormats =
        (
            from formatRow in productGroup.First()
            select new OutputFormat()
            {
                ID = !DBNull.Value.Equals(formatRow["outputFormatId"]) ? Convert.ToString(formatRow["outputFormatId"]) : "",
                Name = !DBNull.Value.Equals(formatRow["outputFormat"]) ? (string)formatRow["outputFormat"] : "",
                DataLevelID = !DBNull.Value.Equals(formatRow["dataLevelId"]) ? Convert.ToString(formatRow["dataLevelId"]) : "",
                DataLevel = !DBNull.Value.Equals(formatRow["dataLevel"]) ? (string)formatRow["dataLevel"] : ""
            }
        ).ToSerializableDictionary(p => p.ID)
    }
).ToSerializableDictionary(p => p.ID); 
```

这是在我的数据记录中返回的数据。 ![在此处输入图像描述](../Images/151b720e468956e4af95ade6b1fac9ff.png)

是的，OutputFormat 和 Product 类只有字符串属性（包括 Id）。

## 更新：

我想要的是填补我的`SerializableDictionary<string, Product> products`. 它应该有 3 个产品，每个产品都应该有相应的输出格式。

```
public class Product
{
    public string ID { get; set; }
    public string Name { get; set; }
    public SerializableDictionary<string, OutputFormat> OutputFormats { get; set; }
}

public class OutputFormat
{
    public string ID { get; set; }
    public string Name { get; set; }
    public string DataLevelID { get; set; }
    public string DataLevel { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:20:55.257

您正在使用字典，并且尝试添加具有相同键的项目。

就像下面这样。

```
Dictionary.add("key1","item1")
Dictionary.add("key2","item2")
Dictionary.add("key1","item3") << not allowed. 
```

检查您的代码并避免这种情况。

# api - API URL 结构

> ID：14322174
> 
> 赞同：7
> 
> 时间：2013-01-14T16:11:24.033
> 
> 标签：api, rest

我正在创建一个由 API 提供支持的抽奖应用程序。层次结构相当简单。

1.  客户
2.  用户
3.  抽奖
4.  提交内容

客户可以拥有本质上是任何抽奖活动的管理员的用户。客户还可以进行多次抽奖。一个抽奖可以有多个提交。好吧，不复杂。

我感到困惑的是对 URL 结构的正确方法是什么。我已经阅读了互联网上的文档和最佳实践博客，但我仍然感到困惑。以下是我们目前的路线：

***客户***

**POST** /clients
**GET** /clients
**GET** /clients/:client_id
**PUT** /clients:client_id

***用户***

**POST** /users
**GET** /users
**GET** /users/:user_id
**PUT** /users/:user_id
**DELETE** /users/:user_id

***抽奖***

**POST** /sweepstakes
**GET** /sweepstakes
**GET** /sweepstakes/:sweepstakes_id
**PUT** /sweepstakes/:sweepstakes_id
**DELETE** /sweepstakes/:sweepstakes_id

***提交***

**POST** /submissions
**GET** /submissions
**GET** /submissions/:submission_id
**PUT** /submissions/:submission_id
**DELETE** /submissions/:submission_id

如您所见，我对每个资源都遵循了一个简单的 2 个 URL——我认为这是最佳实践。**然后，您可以通过任何 GET 请求的查询参数（例如/submissions?sweepstakes_id={sweepstakes_id}**、**/sweepstakes?client_id={client_id}**等）深入了解关联。

这对我来说当然是有道理的，但是我和我的同事争论不休，因为他正在使用 Backbone 来构建主要的前端应用程序。Backbone 声明他们立即支持 RESTful API 使用，但我的同事告诉我，Backbone 更喜欢表示该层次结构的 URL 结构。我当然认为这会导致 URL 结构混乱、冗长且整体令人困惑。理想情况下，我的同事希望看到以下 URL 结构：

**GET** /clients
**GET** /clients/users
**GET** /clients/sweepstakes
**GET** /clients/sweepstakes/submissions

注意：上面的路由也会有额外的路由通过 URL 中的额外资源 id 来补充单个资源（例如**/clients/users/:user_id**、**/clients/sweepstakes/:sweepstakes_id/submissions**等）。

我知道这是一个有点敏感的话题，但我很想听听对此的一些反馈。我投票给每个资源一个 2 个 URL，如果需要进行任何关联，可以通过使用 GET 或 POST 参数来完成。但我可能完全错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T13:08:12.100

你说得对，这是一个有争议的话题。话虽如此，我发现[Apigee](http://apigee.com)的帮派在尝试充实api 标准/定义时非常有帮助。他们并没有说一种方法是正确的，他们更倾向于根据他们的行业经验提出有根据的建议。

他们提供了一些很棒的资源和一些内容，可以帮助你达到一个可以与你角落里的其他人一起捍卫你的观点的位置。

看看这个[网络研讨会](http://www.youtube.com/watch?v=R8SIxZVaai4&feature=BFa&list=PL3E6A77048ED2E29F&lf=plcp)......它是相当基本的东西，但对于 api 设计的复习来说总是很棒的。

注意：我与 Apigee 没有任何关系，我只是认为他们已经做了一些伟大的工作，试图为 api 设计定义一个标准。

〜祝你好运，我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:54:10.927

[我在REST 的官方定义中](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)找不到任何建议优先使用分层 URI 的内容，但我可能遗漏了一些东西。我对 Backbone 一无所知，但如果它需要这种结构，我想你必须这样做，但似乎没有任何理由让它在此之外更好。然而，通常最好是每个资源都有一个唯一的 URI，而分层的 URI 似乎有多个。我知道你不能代表你的同事说话，但他有没有提供任何切实的理由说明他的方案会有更好的功能？

# c# - 使用 PrintDocument 打印 HTML

> ID：14322176
> 
> 赞同：1
> 
> 时间：2013-01-14T16:11:27.050
> 
> 标签：c#, html, printing

> **可能重复：**
> [C# 打印（RichTextBox）](https://stackoverflow.com/questions/7399842/c-sharp-printing-richtextbox)

我正在用 C# 开发一个从我们的服务器接收订单的应用程序，它工作正常，但我不知道如何打印 HTML，就像在 Web 浏览器中查看的一样。通常人们会使用网络浏览器控件并打印它，但我需要能够以 A4 和 A5 纸张格式打印。我已经搜索了很长时间的解决方案，但我似乎无法找到它。

我目前正在使用打印 rtf 格式文本的代码，它可以工作，但它不会像在浏览器中查看的那样打印 HTML，这是至关重要的。

**编辑：**我目前正在使用[此页面上显示的](http://blogs.artinsoft.net/Mrojas/archive/2009/07/10/Printing-RichTextBox-contents-in-C.aspx)代码，并进行了一些更改，允许我通过更改 PaperSize 设置以 A5 格式打印。我尝试过的任何其他事情都未能达到我想要的效果。

**编辑 2：** 需要打印的[HTML 示例。](http://goo.gl/uoRKs)不要介意凌乱的代码，这纯粹是为了展示它应该是什么样子。

所以，总结一下；

*   我需要能够像在 webbrowser 中查看的那样打印 HTML
*   我需要能够以 A4 和 A5 格式打印

先感谢您！

# ios - 有没有办法检测辅助功能缩放功能是否打开？

> ID：14322178
> 
> 赞同：9
> 
> 时间：2013-01-14T16:11:38.167
> 
> 标签：ios, accessibility

UIKit 包含 UIAccessibility 函数，用于确定是否打开了 Voice Over、Closed Captioning、Guided Access 和 Invert Colors。但是，我还没有找到一种方法来确定用户是否打开了缩放功能（设置>常规>辅助功能>缩放）。有谁知道获取此信息的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-11-24T15:34:25.120

目前，无法检测缩放辅助功能选项是否打开。此信息可能会泄露用户设备的一些数据，这些数据可能对他们很敏感，因此 Apple 不会提供这些数据。您可以围绕 Zoom 选项实现功能，例如在必要时将 Zoom 焦点移动到特定控件，如果 Zoom 未激活，则这将不起作用，因此您不必担心 Zoom 是否激活。Accessibility API 提供了许多其他功能，您可以[在此处查看](https://developer.apple.com/documentation/objectivec/nsobject/uiaccessibility)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-11-28T08:17:40.680

请尝试`UIAccessibility.ZoomType`一下`Enum`

[![UIAccessibility.ZoomType Apple ISO Swift 参考。](../Images/2924765caa622ed7172af1e3e12a1ee8.png)](https://i.stack.imgur.com/xjXEd.png)

您*可能需要*结合使用它`[UIAccessibilityContainer][1]`或`static func zoomFocusChanged(zoomType: UIAccessibility.ZoomType, toFrame: CGRect, in: UIView)`

我怎么知道这一点，似乎 this 上的代码转储在`UIkit`for中显示了以下定义`UIAccessibility.ZoomType`。

```
typealias UIAccessibilityZoomType = UIAccessibility.ZoomType
extension UIAccessibility {
  @available(iOS 5.0, *)
  enum ZoomType : Int {
    init?(rawValue: Int)
    var rawValue: Int { get }
    typealias RawValue = Int
    case insertionPoint
    @available(swift, obsoleted: 3, renamed: "insertionPoint")
    static var InsertionPoint: UIAccessibility.ZoomType { get }
  } 
```

* * *

万一你很好奇，一些奖金希望能帮助你如何做到这一点..但这不在你的问题范围内..

> `swift-ide-test -print-module -module-to-print=UIKit.UIApplication`……

# jenkins - Jenkins 插件：以编程方式创建新工作

> ID：14322179
> 
> 赞同：8
> 
> 时间：2013-01-14T16:11:43.010
> 
> 标签：jenkins, hudson, jenkins-plugins

如何在插件中创建新的 Jenkins 作业？

我有一个 Jenkins 插件，它监听消息队列，当消息到达时，触发一个新事件以创建一个新作业（或开始运行）。

我正在寻找类似的东西：

```
Job myJob = new Job(...); 
```

我知道我可以使用 REST API 或 CLI，但因为我在插件中，所以我会使用 java 内部解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-03T21:23:38.533

使用[Job DSL 插件](https://wiki.jenkins-ci.org/display/JENKINS/Job+DSL+Plugin)。

从插件页面：

> Jenkins 是一个出色的构建管理系统，人们喜欢使用它的 UI 来配置作业。不幸的是，随着工作数量的增加，维护它们变得乏味，并且使用 UI 的范式分崩离析。此外，这种情况下的常见模式是复制作业以创建新作业，这些“孩子”习惯于偏离原来的“模板”，因此很难保持这些作业之间的一致性。

> Jenkins job-dsl-plugin 试图通过与生成的作业同步的模板以编程形式以绝对最小值定义作业来解决此问题。目标是让您的项目能够定义他们想要与其项目相关的所有工作，声明他们对工作的意图，将常见的东西留给之前定义或隐藏在 DSL 后面的模板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T19:41:27.910

您只需执行以下操作即可创建新的 hudson/jenkins 工作：

```
FreeStyleProject proj = Hudson.getInstance().createProject(FreeStyleProject.class, NAMEOFJOB); 
```

如果您希望能够处理更新（并且您已经拥有`config.xml`）：

```
import hudson.model.AbstractItem
import javax.xml.transform.stream.StreamSource
import jenkins.model.Jenkins

final jenkins = Jenkins.getInstance()

final itemName = 'name-of-job-to-be-created-or-updated'
final configXml = new FileInputStream('/path/to/config.xml')
final item = jenkins.getItemByFullName(itemName, AbstractItem.class)

if (item != null) {
  item.updateByXml(new StreamSource(configXml))
} else {
  jenkins.createProjectFromXML(itemName, configXml)
} 
```

在执行此操作之前，请确保您拥有核心 .jar 文件。

# shell - 通过 shell 命令从 access_log 文件中获取每天的总点击次数

> ID：14322184
> 
> 赞同：0
> 
> 时间：2013-01-14T16:11:59.057
> 
> 标签：shell, unix

我有一个这种格式的 access_log 文件：

```
65.175.123.152 - - [08/May/2007:02:17:40 +0200] "GET /favicon.ico HTTP/1.1" 404 217 "-" "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.11) Gecko/20070312 Firefox/1.5.0.11" 
```

现在我想使用 unix shell 命令获取每天的总点击量。

我认为这与使用 grep 有关，我是 unix 新手，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:24:27.797

对于特定的一天，您可以执行以下操作：

```
grep 08/May/2007 /var/log/httpd/access_log | wc -l 
```

即，查找具有给定日期的所有访问日志条目，然后计算找到的行数。

如果您希望在日志中为所有日期生成每天的点击报告：

```
awk '
  {
    when=substr($4, 2, 11);
    totals[when]++
  } 
  END {
    for (i in totals) 
      print i, totals[i]
  }' /var/log/httpd/access_log | sort 
```

结果如下：

```
01/Jan/2013 9
02/Jan/2013 33
03/Jan/2013 262
04/Jan/2013 35
05/Jan/2013 19
06/Jan/2013 9
07/Jan/2013 24
08/Jan/2013 68
09/Jan/2013 16
10/Jan/2013 16 
```

# django-forms - Django 表单 __init__() 为关键字参数获取多个值

> ID：14322185
> 
> 赞同：29
> 
> 时间：2013-01-14T16:12:04.730
> 
> 标签：django-forms

您好，我正在尝试使用修改后的`__init__`表单方法，但遇到以下错误：

```
TypeError
__init__() got multiple values for keyword argument 'vUserProfile' 
```

我需要传递`UserProfile`给我的表单，才能到达`dbname`现场，我认为这是一个解决方案（我的表单代码）：

```
class ClienteForm(ModelForm):
class Meta:
    model = Cliente

def __init__(self, vUserProfile, *args, **kwargs):
    super(ClienteForm, self).__init__(*args, **kwargs)
    self.fields["idcidade"].queryset = Cidade.objects.using(vUserProfile.dbname).all() 
```

`ClienteForm()`在没有 POST 的情况下调用构造函数是成功的，并向我显示正确的形式。但是当提交表单并使用 POST 调用构造函数时，我得到了前面描述的错误。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-14T16:15:07.880

您已更改表单`__init__`方法的签名，因此这`vUserProfile`是第一个参数。但在这儿：

```
formPessoa = ClienteForm(request.POST, instance=cliente, vUserProfile=profile) 
```

您作为第一个参数传递`request.POST`- 除了这将被解释为`vUserProfile`. 然后你也尝试`vUserProfile`作为关键字 arg 传递。

确实，您应该避免更改方法签名，而只需从以下位置获取新数据`kwargs`：

```
def __init__(self, *args, **kwargs):
    vUserProfile = kwargs.pop('vUserProfile', None) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-07-26T00:23:42.507

为了帮助谷歌到这里的其他人：错误来自**init**从位置参数和默认参数中提取参数。丹尼尔罗斯曼的问题对于所问的问题是准确的。

这可以是：

1.  您按位置然后按关键字放置参数：

    ```
    class C():
      def __init__(self, arg): ...

    x = C(1, arg=2)   # you passed arg twice! 
    ```

2.  你忘了把`self`作为第一个论点：

    ```
    class C():
       def __init__(arg):  ...

    x = C(arg=1)   # but a position argument (for self) is automatically 
                   # added by __new__()! 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-15T23:53:21.450

我认为ModelForm就是这种情况，但需要检查。对我来说，解决方案是：

```
def __init__(self, *args, **kwargs):
    self.vUserProfile = kwargs.get('vUserProfile', None)
    del kwargs['vUserProfile']
    super(ClienteForm, self).__init__(*args, **kwargs)
    self.fields["idcidade"].queryset = Cidade.objects.using(self.vUserProfile.dbname).all() 
```

# windows - 来自 Windows 命令行的变量的回显长度

> ID：14322192
> 
> 赞同：2
> 
> 时间：2013-01-14T16:12:40.777
> 
> 标签：windows, cmd, environment-variables, windows-console

所以我正在寻找一个快速命令来评估 windows 命令行上环境变量的长度。

从概念上讲，效果如下：

```
echo %PATH%.length 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:25:49.427

```
@echo off
setlocal enabledelayedexpansion
call :COUNT "%path%"
echo Your variable is %length% characters long
pause >nul

:COUNT
set temp=%1
set length=0
:loop
if defined temp (
    set temp=!temp:~1!
    set /a length+=1
    goto :loop
) 
```

用法：`call :COUNT %yourvar%`长度将存储在`%length%`.

# tridion - “提交部署”期间发布失败：无法执行 SQL 查询

> ID：14322198
> 
> 赞同：1
> 
> 时间：2013-01-14T16:13:03.587
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

在过去的几个小时里，我一直在思考这个问题，但我似乎无法提出解决方案。我正在尝试使用 SQL 数据库设置 Tridion Install SP1 HR1。

据我所知，http 传输协议*应该可以*工作，因为更改与此协议相关的任何内容仍然会出现相同的错误。

一旦页面（也很简单）点击“提交部署”，由于以下错误，发布失败：

```
2013-01-14 16:49:22,351 ERROR DeployPipelineExecutor - Original stacktrace for transaction: tcm:0-16-66560
com.tridion.deployer.ProcessingException: Unable to prepare transaction: tcm:0-16-66560, org.hibernate.exception.SQLGrammarException: could not execute query, org.hibernate.exception.SQLGrammarException: could not execute query
    at com.tridion.deployer.phases.PreCommitPhase.handleFailure(PreCommitPhase.java:120) ~[cd_deployer.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.execute(PreCommitPhase.java:101) ~[cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na]
    at com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
    at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_38]
    at java.lang.Thread.run(Unknown Source) [na:1.6.0_38]
```

我的 storage_conf.xml 看起来像这样

```
<Storages><Storage Type="persistence" Id="sqlserver" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
            <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
            <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
                <Property Name="serverName" Value="T2011-DEV" />
                <Property Name="portNumber" Value="1433" />
                <Property Name="databaseName" Value="Tridion_cm" />
                <Property Name="user" Value="secret" />
                <Property Name="password" Value="secret" />
            </DataSource>
        </Storage>

        <!--            
            Configuration example for using filesystem as data storage. 
        -->
        <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="iisFile">
            <Root Path="C:\inetpub\wwwroot\staging.dev" />
        </Storage>
    </Storages>    </Global>
<!-- If no item type mappings are defined within ItemTypes or if storages on a lower level do not exist then the storage defined by defaultStorageId attribute will be used.
     If storage defined by defaultStorageId does not exist then exception will be thrown. -->
<ItemTypes defaultStorageId="sqlserver" cached="false">
    <Item typeMapping="Page" cached="false" storageId="iisFile"/>
    <Item typeMapping="Binary" storageId="iisFile" cached="false"/>
</ItemTypes> 
```

我之前在安装 Java 时遇到过一些有趣的问题，但后来解决了。我什至从另一台具有正确 HTTP 传输连接的机器上安装了 .jar 文件，并在我拥有的机器上安装了这些文件，但这也不起作用。我还包含了 - 假设正确的 SQLDB4 -jar 文件。我不知道是什么原因造成的。数据库连接似乎存在得很好，因为将登录更改为虚假会返回“无法连接”或类似错误。

任何帮助都会很棒。

## 编辑

在 Sea_gull 说要启用 root 日志记录之后，出现了很多错误。这是一个相当多的列表，但这里是最重要的部分：

```
 `013-01-14 19:28:01,578 DEBUG FSEntityManager - Starting transaction tcm:0-17-66560.
2013-01-14 19:28:01,579 INFO  PreCommitPhase - Executing workers for transaction: tcm:0-17-66560 with 4 Workers
2013-01-14 19:28:01,579 DEBUG PreCommitPhase - Executing worker com.tridion.storage.deploy.workers.DynamicLinkInfoTrackingWorker@76612ef6 this is worker 1 of: 4
2013-01-14 19:28:01,580 DEBUG StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 12 / DynamicLinkInfo / null
2013-01-14 19:28:01,580 DEBUG DefaultListableBeanFactory - Returning cached instance of singleton bean 'sqlserverEntityManagerFactory'
2013-01-14 19:28:01,580 DEBUG SessionImpl - opened session at timestamp: 13581880815
2013-01-14 19:28:01,580 DEBUG JDBCTransaction - begin
2013-01-14 19:28:01,581 DEBUG ConnectionManager - opening JDBC connection
2013-01-14 19:28:01,581 DEBUG JDBCTransaction - current autocommit status: true
2013-01-14 19:28:01,581 DEBUG JDBCTransaction - disabling autocommit
2013-01-14 19:28:01,582 DEBUG DefaultListableBeanFactory - Creating instance of bean 'JPADynamicLinkDAO'
2013-01-14 19:28:01,583 DEBUG DefaultListableBeanFactory - Finished creating instance of bean 'JPADynamicLinkDAO'
2013-01-14 19:28:01,583 DEBUG JPADAOFactory - Loaded DAO with type: JPADynamicLinkDAO inside transaction: tcm:0-17-66560
2013-01-14 19:28:01,583 DEBUG StorageManagerFactory - Wrapping DAO's, currently 0 wrappers installed
2013-01-14 19:28:01,583 DEBUG JPADynamicLinkDAO - Storing dynamic links from TCMURI tcm:12-88-64
2013-01-14 19:28:01,583 DEBUG JPADynamicLinkDAO - Removing dynamic links with source TCMURI tcm:12-88-64
2013-01-14 19:28:01,584 DEBUG AbstractBatcher - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
2013-01-14 19:28:01,584 DEBUG SQL - delete from DYNAMIC_LINKS where SRC_PUB_ID=? and SRC_ITEM_ID=? and SRC_ITEM_TYPE=?
2013-01-14 19:28:01,585 DEBUG AbstractBatcher - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
2013-01-14 19:28:01,587 DEBUG JDBCExceptionReporter - could not execute update query [delete from DYNAMIC_LINKS where SRC_PUB_ID=? and SRC_ITEM_ID=? and SRC_ITEM_TYPE=?]
com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'DYNAMIC_LINKS'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeUpdate(SQLServerPreparedStatement.java:314) ~[sqljdbc4.jar:na]
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:102) ~[commons-dbcp.jar:1.2.2]
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:102) ~[commons-dbcp.jar:1.2.2]
    at org.hibernate.hql.ast.exec.BasicExecutor.execute(BasicExecutor.java:101) ~[hibernate-core.jar:3.3.2.GA]
    at org.hibernate.hql.ast.QueryTranslatorImpl.executeUpdate(QueryTranslatorImpl.java:421) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.engine.query.HQLQueryPlan.performExecuteUpdate(HQLQueryPlan.java:283) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.impl.SessionImpl.executeUpdate(SessionImpl.java:1169) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.impl.QueryImpl.executeUpdate(QueryImpl.java:117) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.ejb.QueryImpl.executeUpdate(QueryImpl.java:51) [hibernate-entitymanager.jar:3.4.0.GA]
    at com.tridion.storage.persistence.JPABaseDAO.executeQueryUpdate(JPABaseDAO.java:304) [cd_datalayer.jar:na]
    at com.tridion.storage.persistence.JPADynamicLinkDAO.remove(JPADynamicLinkDAO.java:104) [cd_datalayer.jar:na]
    at com.tridion.storage.persistence.JPADynamicLinkDAO.store(JPADynamicLinkDAO.java:43) [cd_datalayer.jar:na]
    at com.tridion.storage.deploy.workers.DynamicLinkInfoTrackingWorker.doDeploy(DynamicLinkInfoTrackingWorker.java:52) [cd_datalayer.jar:na]
    at com.tridion.deployer.model.transaction.TransactionLogItemWorker.doWork(TransactionLogItemWorker.java:27) [cd_model.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.runPrepare(PreCommitPhase.java:143) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.execute(PreCommitPhase.java:91) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na]
    at com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
    at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_38]
    at java.lang.Thread.run(Unknown Source) [na:1.6.0_38]
2013-01-14 19:28:01,588 WARN  JDBCExceptionReporter - SQL Error: 208, SQLState: S0002
2013-01-14 19:28:01,588 ERROR JDBCExceptionReporter - Invalid object name 'DYNAMIC_LINKS'.
2013-01-14 19:28:01,588 DEBUG AbstractEntityManagerImpl - mark transaction for rollback
2013-01-14 19:28:01,588 DEBUG DynamicLinkInfoTrackingWorker - Error looking up the dynamic link dao
2013-01-14 19:28:01,588 DEBUG PreCommitPhase - Executing worker: com.tridion.storage.deploy.workers.DynamicLinkInfoTrackingWorker@76612ef6 took: 9
2013-01-14 19:28:01,588 DEBUG PreCommitPhase - Executing worker com.tridion.storage.deploy.workers.ReferenceEntryWorker@66525531 this is worker 2 of: 4
2013-01-14 19:28:01,589 DEBUG StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 12 / Reference / null
2013-01-14 19:28:01,589 DEBUG DefaultListableBeanFactory - Creating instance of bean 'JPAReferenceEntryDAO'
2013-01-14 19:28:01,589 DEBUG DefaultListableBeanFactory - Finished creating instance of bean 'JPAReferenceEntryDAO'
2013-01-14 19:28:01,589 DEBUG JPADAOFactory - Loaded DAO with type: JPAReferenceEntryDAO inside transaction: tcm:0-17-66560
2013-01-14 19:28:01,589 DEBUG StorageManagerFactory - Wrapping DAO's, currently 0 wrappers installed
2013-01-14 19:28:01,590 DEBUG AbstractBatcher - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
2013-01-14 19:28:01,590 DEBUG SQL - select referencee0_.REFERENCING_URI as REFERENC1_20_, referencee0_.REFERENCED_URI as REFERENCED2_20_, referencee0_.PUBLICATION_ID as PUBLICAT3_20_ from REFERENCE_ENTRIES referencee0_ where referencee0_.PUBLICATION_ID=? and referencee0_.REFERENCING_URI=?
2013-01-14 19:28:01,592 DEBUG AbstractBatcher - about to close PreparedStatement (open PreparedStatements: 1, globally: 1)
2013-01-14 19:28:01,594 DEBUG JDBCExceptionReporter - could not execute query [select referencee0_.REFERENCING_URI as REFERENC1_20_, referencee0_.REFERENCED_URI as REFERENCED2_20_, referencee0_.PUBLICATION_ID as PUBLICAT3_20_ from REFERENCE_ENTRIES referencee0_ where referencee0_.PUBLICATION_ID=? and referencee0_.REFERENCING_URI=?]
com.microsoft.sqlserver.jdbc.SQLServerException: Invalid object name 'REFERENCE_ENTRIES'.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:216) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1515) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.doExecutePreparedStatement(SQLServerPreparedStatement.java:404) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement$PrepStmtExecCmd.doExecute(SQLServerPreparedStatement.java:350) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:5696) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1715) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:180) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:155) ~[sqljdbc4.jar:na]
    at com.microsoft.sqlserver.jdbc.SQLServerPreparedStatement.executeQuery(SQLServerPreparedStatement.java:285) ~[sqljdbc4.jar:na]
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:93) ~[commons-dbcp.jar:1.2.2]
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:93) ~[commons-dbcp.jar:1.2.2]
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208) ~[hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1812) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.Loader.doQuery(Loader.java:697) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.Loader.doList(Loader.java:2232) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2129) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.Loader.list(Loader.java:2124) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:401) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1149) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102) [hibernate-core.jar:3.3.2.GA]
    at org.hibernate.ejb.QueryImpl.getResultList(QueryImpl.java:67) [hibernate-entitymanager.jar:3.4.0.GA]
    at com.tridion.storage.persistence.JPABaseDAO.executeQueryListResult(JPABaseDAO.java:266) [cd_datalayer.jar:na]
    at com.tridion.storage.persistence.JPABaseDAO.executeQueryListResult(JPABaseDAO.java:234) [cd_datalayer.jar:na]
    at com.tridion.storage.persistence.JPABaseDAO.executeQueryListResult(JPABaseDAO.java:217) [cd_datalayer.jar:na]
    at com.tridion.storage.persistence.JPAReferenceEntryDAO.findByReferencingURI(JPAReferenceEntryDAO.java:80) [cd_datalayer.jar:na]
    at com.tridion.storage.services.ReferenceCounter.replaceReferences(ReferenceCounter.java:160) [cd_datalayer.jar:na]
    at com.tridion.storage.deploy.workers.ReferenceEntryWorker.doDeploy(ReferenceEntryWorker.java:61) [cd_datalayer.jar:na]
    at com.tridion.deployer.model.transaction.TransactionLogItemWorker.doWork(TransactionLogItemWorker.java:27) [cd_model.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.runPrepare(PreCommitPhase.java:143) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.execute(PreCommitPhase.java:91) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na]
    at com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
    at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_38]
    at java.lang.Thread.run(Unknown Source) [na:1.6.0_38]
2013-01-14 19:28:01,594 WARN  JDBCExceptionReporter - SQL Error: 208, SQLState: S0002
2013-01-14 19:28:01,594 ERROR JDBCExceptionReporter - Invalid object name 'REFERENCE_ENTRIES'.
2013-01-14 19:28:01,594 DEBUG AbstractEntityManagerImpl - mark transaction for rollback
2013-01-14 19:28:01,595 WARN  PreCommitPhase - Failed to Prepare: tcm:0-17-66560 error: org.hibernate.exception.SQLGrammarException: could not execute query
2013-01-14 19:28:01,595 INFO  StorageManagerFactory - Rolling back storage transaction: tcm:0-17-66560
2013-01-14 19:28:01,595 DEBUG FSEntityManager - Nothing to roll back for transaction tcm:0-17-66560.
2013-01-14 19:28:01,595 DEBUG FSEntityManager - Cleaning up transaction tcm:0-17-66560.
2013-01-14 19:28:01,595 DEBUG JDBCTransaction - rollback
2013-01-14 19:28:01,596 DEBUG JDBCTransaction - re-enabling autocommit
2013-01-14 19:28:01,596 DEBUG JDBCTransaction - rolled back JDBC Connection
2013-01-14 19:28:01,596 DEBUG ConnectionManager - aggressively releasing JDBC connection
2013-01-14 19:28:01,596 DEBUG ConnectionManager - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]
2013-01-14 19:28:01,597 WARN  DeployPipelineExecutor - Phase: Deployment Prepare Commit Phase failure message: Unable to prepare transaction: tcm:0-17-66560, org.hibernate.exception.SQLGrammarException: could not execute query, org.hibernate.exception.SQLGrammarException: could not execute query for transaction: tcm:0-17-66560
2013-01-14 19:28:01,597 DEBUG DeployPipelineExecutor - Failure in Phase: Deployment Prepare Commit Phase attempt: 11 for transaction: tcm:0-17-66560
2013-01-14 19:28:01,597 ERROR DeployPipelineExecutor - Final attempt in Phase: Deployment Prepare Commit Phase failed for transaction: tcm:0-17-66560
2013-01-14 19:28:01,598 ERROR DeployPipelineExecutor - Original stacktrace for transaction: tcm:0-17-66560
com.tridion.deployer.ProcessingException: Unable to prepare transaction: tcm:0-17-66560, org.hibernate.exception.SQLGrammarException: could not execute query, org.hibernate.exception.SQLGrammarException: could not execute query
    at com.tridion.deployer.phases.PreCommitPhase.handleFailure(PreCommitPhase.java:120) ~[cd_deployer.jar:na]
    at com.tridion.deployer.phases.PreCommitPhase.execute(PreCommitPhase.java:101) ~[cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.runMainExecutePhase(DeployPipelineExecutor.java:186) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.doExecute(DeployPipelineExecutor.java:97) [cd_deployer.jar:na]
    at com.tridion.deployer.phases.DeployPipelineExecutor.execute(DeployPipelineExecutor.java:61) [cd_deployer.jar:na]
    at com.tridion.deployer.TransactionManager.handleDeployPackage(TransactionManager.java:80) [cd_deployer.jar:na]
    at com.tridion.deployer.queue.QueueLocationHandler$1.run(QueueLocationHandler.java:176) [cd_deployer.jar:na]
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.FutureTask.run(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [na:1.6.0_38]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.6.0_38]
    at java.lang.Thread.run(Unknown Source) [na:1.6.0_38]
2013-01-14 19:28:01,598 INFO  TransactionPersistence - Removing deployment transaction information: tcm:0-17-66560
2013-01-14 19:28:01,601 ERROR DeployPipelineExecutor - Unable to start processing deployment package with transactionId: tcm:0-17-66560
2013-01-14 19:28:01,606 DEBUG DeployPipelineExecutor - Checking if transaction is completed: tcm:0-17-66560 is true
2013-01-14 19:28:01,606 INFO  DeployPipelineExecutor - Transaction is completed: tcm:0-17-66560
2013-01-14 19:28:01,616 INFO  DeployPipelineExecutor - Finished executing deployment pipeline for: tcm:0-17-66560 in 30231 ms.
2013-01-14 19:28:01,616 INFO  TransactionManager - Cleaning up Deployment package for transaction: tcm:0-17-66560 and type: CONTENT
2013-01-14 19:28:01,621 INFO  TransactionManager - Finished handling of Deployment package: tcm:0-17-66560 with type: CONTENT
2013-01-14 19:28:01,622 DEBUG QueueLocationHandler - Removing exclusive lock on Deployment package: tcm:0-17-66560 with type: CONTENT.
2013-01-14 19:28:02,664 DEBUG HttpUploadReceiver - transactionId parameter contained an invalid TCM URI string: meta.xml, processing as normal file request
2013-01-14 19:28:02,665 INFO  HttpUploadReceiver - File found at C:\tridion\incoming\meta.xml for meta.xml
2013-01-14 19:28:02,699 DEBUG HttpUploadReceiver - transactionId parameter contained an invalid TCM URI string: tcm_0-17-66560.state.xml, processing as normal file request
2013-01-14 19:28:02,700 INFO  HttpUploadReceiver - File found at C:\tridion\incoming\tcm_0-17-66560.state.xml for tcm_0-17-66560.state.xml
2013-01-14 19:28:02,700 INFO  HttpUploadReceiver - Removed file at C:\tridion\incoming\tcm_0-17-66560.state.xml`
```

`这里有这么多的兴趣点，我什至不知道哪里出错了......`

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:22:52.420

就像已经提到的 Ram G 一样，这是所用数据库的问题，它似乎遗漏了 Content Delivery 使用的表。您可能使用的是 CM 数据库而不是 CD 数据库。请确保您的数据库已正确创建并重试您的测试。希望这可以帮助。`

# linux - Shell如何对变量进行快照？

> ID：14322202
> 
> 赞同：0
> 
> 时间：2013-01-14T16:13:17.547
> 
> 标签：linux, bash, variables

这是我的代码：

```
# Generate Datetime
FILENAME="date +%Y%m%d%H%M%S"

# Dump Database
dumpdb FILENAME

# Upload to S3
python uploaddb.py FILENAME 
```

我担心的是我想继续引用“FILENAME”变量，除非该变量每秒都会改变它的值。如何将 FILENAME 的值设置为当前日期时间，然后将其保持在相同的值以提醒脚本，以便 FILENAME 始终引用相同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:16:34.413

1.  要`date`在变量值中获取命令的输出，请编写：

    `FILENAME="$(date +%Y%m%d%H%M%S)"`

2.  引用应该是`$FILENAME`，而不仅仅是`FILENAME`。
3.  变量值在赋值时被冻结：`FILENAME="$(date +%Y%m%d%H%M%S)"`。每次引用时都不会重新评估它`$FILENAME`。

# twitter-bootstrap - 制作我自己的引导 btn 类

> ID：14322208
> 
> 赞同：1
> 
> 时间：2013-01-14T16:13:42.530
> 
> 标签：twitter-bootstrap, less

我想`less`用来制作自己的按钮类，而不必`btn btn-large btn-red`向所有元素添加等。

这是如何做到的？我尝试过的各种方法只是让 less 文件根本无法解析。

就像是：

```
.my-button {
    .btn;
    .btn-large;
} 
```

我尝试和自定义并组合到新类的各种样式似乎都有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T21:28:26.750

这是一个旧线程，但今天有更好的方法可以做到这一点，所以我想将它记录下来供其他人使用。

LESS 1.5 引入了引用导入，所以今天你可以引用整个引导源并使用你想要的任何东西，而不需要引导本身的任何输出。

```
@import (reference) 'less/bootstrap.less';

.my-button {
    .btn;
    .btn-lg;
} 
```

只会输出“.my-button”，因此您仍然可以从 CDN 引用 bootstrap 并让您的 CSS 仅包含您的自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:22:45.977

我通过添加仔细检查了您的代码

```
.my-button {
.btn;
.btn-large;
} 
```

到我的buttons.less文件，用less编译，然后上传新的CSS文件。然后我添加了一个测试链接

```
<a class="my-button" href="#">test button</a> 
```

一切看起来都很好。我知道直接编辑默认的 bootstrap less 文件不一定是个好主意，但它有助于快速排除一些问题。

您如何在更少的时间内自定义设置？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T21:28:52.090

您按照应有的方式定义自定义按钮类。因此，这里有一些提示可能出现错误：

*   引导类在自定义类之后编译。因此，请检查您的较少导入层次结构。
*   引导类定义不是您的 less universum 的一部分，即它们不会导入到您作为参数传递给 less 编译器的主 less 文件中。

对于第二步，下面是如何设置的简短摘要。

styles.less（这是你的主文件）。

```
// bootstrap base imports (v2.2.2)
@import "plugins/bootstrap/reset.less";
@import "plugins/bootstrap/variables.less"; // Modify this for custom colors, font-sizes, etc
@import "plugins/bootstrap/mixins.less";
// [...]

@import "layouts.less"; 
```

请注意，[...] 代表所有其他引导程序导入（请参阅[https://github.com/twitter/bootstrap/blob/master/less/bootstrap.less](https://github.com/twitter/bootstrap/blob/master/less/bootstrap.less)上的主要引导程序更少文件）。

并且您`layouts.less`定义了您已经编写的自定义按钮类：

```
.my-button {
    .btn;
    .btn-large;
} 
```

在您的 less 编译器中，您最终会执行

```
lessc styles.less > styles.css 
```

另请注意，您将需要文件夹中实际较少的 bootstrap 文件`plugins/bootstrap/`。

希望这可以帮助。

# php - 正则表达式，如何获取标签之间的所有内容？

> ID：14322209
> 
> 赞同：-3
> 
> 时间：2013-01-14T16:13:45.320
> 
> 标签：php, regex

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php)
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

你怎么能得到标签之间的所有东西：`<td class="detail"></td>`？我使用 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:17:32.873

你为什么不使用[DOMXpath](http://php.net/manual/en/class.domxpath.php)？

```
 $xpath = new DOMXPath(yourHtml);
    $nodeList = $xpath->query( "//td[@class='detail']" );
    foreach($nodeList as $node)
    {
      echo $node->nodeValue;
    } 
```

用正则表达式解析 HTML 不是一个好的选择

# vb.net - 如何从 HTML 表格中提取数据？

> ID：14322216
> 
> 赞同：3
> 
> 时间：2013-01-14T16:14:06.247
> 
> 标签：vb.net, html-agility-pack

我最近下载了 HtmlAgilityPack，但我没有找到任何关于如何使用它的真正说明。我试图根据一些不同的讨论板帖子和其他来源拼凑一些代码。这是我到目前为止所拥有的：

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Dim document As New HtmlAgilityPack.HtmlDocument
    document.LoadHtml("www.reuters.com/finance/stocks/overview?symbol=GOOG")

    Dim tabletag = document.DocumentNode.SelectSingleNode("//table[@class='data']/tr[1]/td[2]")
End Sub 
```

如您所见，我正在使用来自`www.reuters.com/finance/stocks/overview?symbol=GOOG`.

我正在尝试从此页面中提取 Beta 值。该值当前为 1.04。

当我在即时窗口上方运行代码时，会显示此重复 100 次：

```
1.04
&#36;243,156.41
328.59
--
--
Trading Report for (GOOG). A detailed report, including free correlated market analysis, and updates.
ValuEngine Detailed Valuation Report for GOOG
GOOGLE INC CL A (GOOG)  12-months forecast
GOOGLE INC CL A (GOOG)  2-weeks forecast
Google Inc: Business description, financial summary, 3yr and interim financials, key statistics/ratios and historical ratio analysis. 
```

我只希望返回第一个数字 (1.04)。我究竟做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:50:07.807

您需要使用 cookie 和代理。以下对我很有用。让我知道你的想法：

```
Imports System.Net
Imports System.Web

Public Class Form1

    Public cookies As New CookieContainer

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

        Dim wreq As HttpWebRequest = WebRequest.Create("http://www.reuters.com/finance/stocks/overview?symbol=GOOG")

        wreq.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.5) Gecko/20091102 Firefox/3.5.5"

        wreq.Method = "get"

        Dim prox As IWebProxy = wreq.Proxy

        prox.Credentials = CredentialCache.DefaultCredentials

        Dim document As New HtmlAgilityPack.HtmlDocument
        Dim web As New HtmlAgilityPack.HtmlWeb

        web.UseCookies = True
        web.PreRequest = New HtmlAgilityPack.HtmlWeb.PreRequestHandler(AddressOf onPreReq)

        wreq.CookieContainer = cookies

        Dim res As HttpWebResponse = wreq.GetResponse()

        document.Load(res.GetResponseStream, True)

        'just for testing:
        '   Dim tabletag = document.DocumentNode.SelectNodes("//table")
        '  MsgBox(tabletag.Nodes.Count.ToString)

        'returns your field
        Dim tabletag2 = document.DocumentNode.SelectSingleNode("//td[@class='data']")
        MsgBox(tabletag2.InnerText)

    End Sub

    Private Function onPreReq(req As HttpWebRequest)

        req.CookieContainer = cookies
        Return True

    End Function
End Class 
```

# scala - scala play框架发布文件

> ID：14322217
> 
> 赞同：0
> 
> 时间：2013-01-14T16:14:12.350
> 
> 标签：scala, file-upload, playframework, playframework-2.0

我可以通过什么方式在播放框架中模拟文件上传？换句话说，我可以使用这样的 curl 命令将文件上传到服务器： curl -k -v -H "X-Agile-Authorization: token" -F uploadFile=c:\1.txt -F directory=/testpost -F basename= 1.txt https://api/post/file

在播放框架中没有 curl 或浏览器的情况下我怎么能做同样的事情。目的是将文件从一台服务器上传到另一台服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T09:38:57.603

[在 google-groups 上发帖](https://groups.google.com/d/msg/play-framework/MPtQlX-cWMQ/rdabLhGwytcJ)：

> 使用 org.apache.http.entity.mime.MultipartEntity，您可以轻松地操作多部分数据。然后像你一样将它写入字节数组缓冲区。
> 
> 例如：将照片上传到我的 Facebook 墙：

```
val entity = new MultipartEntity()
comment.map(msg => entity.addPart("message", new StringBody(msg, Charset.forName("UTF-8"))))
entity.addPart("source", new FileBody(photoFile))
val photoPostUrl = "https://graph.facebook.com/me/photos?access_token="+facebookAccessToken
val outputstream = new ByteArrayOutputStream
entity.writeTo(outputstream)
val header = (entity.getContentType.getName, entity.getContentType.getValue)
WS.url(photoPostUrl).withHeaders(header).post(outputstream.toByteArray()).await(5000).get.json 
```

依赖：`"org.apache.httpcomponents" % "httpclient" % "4.3.1"`和`"org.apache.httpcomponents" % "httpmime" % "4.3.1"`。

如果性能是一个问题，您可以对 WS 的底层客户端做同样的事情`WS.client`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T20:30:39.027

目前，无法通过 WS API 发布 multipart/form-data。

您可以轻松发送 File `WS.url(myUrl).post(myFile)`，但不能发送表单...解决方法应该是使用另一个库，例如**Apache Http Client**。

在 Play 邮件列表中查看此主题：[[2.0] multipart/form-data in WS POST](https://groups.google.com/forum/#!msg/play-framework/MPtQlX-cWMQ/y_EVZpbUhRMJ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T21:21:58.423

以下示例允许您发布`multipart/form-data`. 这是一个仅适用于`String`值的简单版本，但可以轻松修改它以使用其他类型的数据。

```
type NameValuePair = (String, String)
case class MultipartFormData(elements: Seq[NameValuePair], boundary: String)(
  implicit codec: Codec) {

  private val HTTP_SEPARATOR = "\r\n"
  private val actualBoundary = "--" + boundary
  private val endBoundary = actualBoundary + "--" + HTTP_SEPARATOR

  private val contentType = "multipart/form-data; boundary=" + boundary
  private val content = elements.map(toPart).mkString + endBoundary

  val body = Body(content)

  case class Body(content: String)

  object Body {
    implicit val contentTypeOf:ContentTypeOf[Body] =
      ContentTypeOf(Some(contentType))
    implicit val writes: Writeable[Body] =
      Writeable(body => codec.encode(body.content))
  }

  private def toPart(nameValuePair: NameValuePair) = {
    val (name, value) = nameValuePair
    actualBoundary + HTTP_SEPARATOR +
      "Content-Disposition: form-data; name=\"" + name + "\"" + HTTP_SEPARATOR +
      HTTP_SEPARATOR +
      value + HTTP_SEPARATOR
  }
} 
```

用法是这样的：

```
val data = MultipartFormData(formFields, "asdfghjkl123")

WS.url(myUrl).post(data.body) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T20:25:02.467

查看[Windows Azure Storage](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx)或[Amazon S3](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectPUT.html) REST API，然后使用类似的方法，您可以使用[Play 的 WebServices API](http://www.playframework.org/documentation/2.0.4/ScalaWS)发送文件。

您只需要构造 POST 或 PUT 请求并发送它。可能您需要自己关心两个应用程序之间的身份验证和/或授权（API Windows 和 Amazon 都使用[HMAC](https://stackoverflow.com/a/14095520/1066240)来完成此任务）

# css - div 高度基于另一个 div 高度

> ID：14322218
> 
> 赞同：0
> 
> 时间：2013-01-14T16:03:36.013
> 
> 标签：css

我有 3 列主题，我希望所有列的高度相同。左右列的高度是固定的，应该与动态高度列中间相同。

布局代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en-US">
    <head>
    <meta charset="UTF-8">
        <title></title>
        <link rel="stylesheet" href="style.css" type="text/css">
    </head>
    <body>
        <div id="container">
            <div id="sidebar-left">Sidebar left</div>   
            <div id="sidebar-middle">BIG SIDEBAR MIDDLE</div>  
            <div id="sidebar-right">Sidebar right</div> 
        </div>
    </body>
</html> 
```

'

CSS 代码：

```
html,
body {
    height:100%;
    background:#FFEE33;   
}
#container {         
    min-height:100%;
    background:#FFAA00; 
}           
#sidebar-left,
#sidebar-right{   
    float:left;
    width:33%;
    min-height:100%; 
    background:#FF0000;
}  
#sidebar-middle {  
    float:left;
    width:33%;
    height:2000px;
    background:#444;
} 
```

这可能只在CSS中制作吗？感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:19:18.837

尝试在您的列之后添加一个clearfix。这应该强制容器根据其内容调整大小。当您浮动元素时，它们会丢失它们的高度值 - 通过在浮动元素列表之后添加一个 clear ，它们会重新获得此属性。

简单的 -

添加到 CSS

```
.clearfix{
  clear: both;
  position: relative;
} 
```

和 html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en-US">
    <head>
    <meta charset="UTF-8">
        <title></title>
        <link rel="stylesheet" href="style.css" type="text/css">
    </head>
    <body>
        <div id="container">
            <div id="sidebar-left">Sidebar left</div>   
            <div id="sidebar-middle">BIG SIDEBAR MIDDLE</div>  
            <div id="sidebar-right">Sidebar right</div> 
            <div class="clearfix"></div>
        </div>
    </body>
</html> 
```

这应该让你指出正确的方向。

# javascript - 使用 JQuery removeClass() 删除除一个以外的所有类

> ID：14322225
> 
> 赞同：7
> 
> 时间：2013-01-14T16:14:33.107
> 
> 标签：javascript, jquery, jquery-selectors, removeclass

好的，我有一个有趣的（嗯，对我来说很有趣，无论如何:)）。

我有一种情况，我有一个具有静态类值的 div，但它也可以分配一个动态的“辅助类”。当用户进行选择时，需要删除任何现有的二级类并添加新类。

忽略使用 id 值（项目标准使用类......无法更改），是否有一种优雅的方法可以在添加新类之前简单地忽略第一个类并删除那里的任何其他类？

示例起始 HTML：

```
<div class="staticClass dynaClass1" /> 
```

示例 JS：

```
function updateClass(newSecondaryClass) {
    $(".staticClass") . . . **** remove any class besides "staticClass" ****
    $(".staticClass").addClass(newSecondaryClass);
} 
```

如果使用 调用该函数`updateClass("dynaClass2");`，则生成的 HTML 应为：

```
<div class="staticClass dynaClass2" /> 
```

我可以想到这样做的方法，包括`removeClass();`在添加新类或 using 时删除所有类 using 并重新添加“staticClass” `attr("class", "staticClass " + newSecondaryClass);`，但我想知道是否没有办法处理它而不必触摸静态类呢？

最后，我想这是一个学术问题，比什么都重要。. . 似乎这应该是可行的，但我不知道该怎么做。:D

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T16:17:14.783

您可以删除所有课程并添加您要离开的课程：

```
$(".staticClass").removeClass().addClass('staticClass'); 
```

不带参数调用`removeClass()`会删除所有类。

如果您不想这样做，那么您可以简单地修改类属性：

```
$(".staticClass").attr('class', 'staticClass'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T16:22:39.310

您可以传递一个函数来删除类，它会返回除静态类之外的所有类：

```
$('.staticClass').removeClass(function(index, klass) { 
  return klass.replace(/(^|\s)+staticClass\s+/, ''); 
}) 
```

这将返回对象上的所有类，没有静态类，因此删除除了静态类之外的所有类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-27T19:50:43.550

# 将函数传递给`.removeClass()`

## 本页上 Beat Richartz 答案的修订版。

*注意：我试图将此作为编辑发布，但被拒绝了。这个概念是相同的，只是改进了 RegEx。*

**改进的 RegEx 提供与多个类的词边界匹配**

```
// Remove all classes except those specified
$('span').removeClass(function () { 
    return $(this).attr('class').replace(/\b(?:hello|world)\b\s*/g, ''); 
}); 
```

*前：*

```
<span class="hello foo">hello</span> <span class="world bar">world</span>` 
```

*后：*

```
<span class="hello">hello</span> <span class="world">world</span>` 
```

*试试看：http:* [//jsfiddle.net/gfullam/52eeK/3/](http://jsfiddle.net/gfullam/52eeK/3/)

*试试它作为一个 jQuery 插件：http:* [//jsfiddle.net/gfullam/52eeK/5/](http://jsfiddle.net/gfullam/52eeK/5/)

FWIW：当您不想将现有类替换为 中的其他类时，此方法是必需的`.attr('class', '<final list of classes>')`，而只是想删除那些与类列表不匹配的类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T16:20:01.410

您可以使用该`.attr()`功能设置它所需的类。所以：

```
$('.staticClass').attr('class','<any classes required'); 
```

这将替换原来存在的所有类，并添加新的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T16:28:17.523

你所有的类都是通过调用 Javascript DOM 来操作的`element.className`，所以基本上 jQuery`addClass`只是替换了那个字符串。您可以在[Github 源代码](https://github.com/jquery/jquery/blob/master/src/attributes.js#L64)中看到这一点。

这一切都意味着，如果你打电话

```
$('.staticClass').addClass('someClass'); 
```

无论如何都会被`element.className`替换，但包含新类。（这意味着你`staticClass`真的被感动了:)

你打电话时

```
$('.staticClass').removeClass().addClass('staticClass'); 
```

您将替换该字符串两次，这样做没有问题。

# mysql - 基于组合表中相关记录的查询选择记录的效率

> ID：14322229
> 
> 赞同：0
> 
> 时间：2013-01-14T16:14:58.623
> 
> 标签：mysql, sql, database, database-design

# 设置

我正在创建一个事件列表，用户可以在其中通过多个过滤器缩小结果范围。我没有为每个过滤器创建一个表（即 event_category、event_price），而是使用以下数据库结构（以便以后轻松/灵活地添加更多过滤器）：

**事件**

```
event_id    title    description   [etc...]
------------------------------------------- 
```

**过滤器**

```
filter_id    name        slug
-----------------------------
1            Category    category
2            Price       price 
```

**过滤器项目**

```
filter_item_id    filter_id   name          slug
------------------------------------------------
1                 1           Music         music
2                 1           Restaurant    restaurant
3                 2           High          high
4                 2           Low           low 
```

**event_filter_item**

```
event_id    filter_item_id
--------------------------
1           1
1           4
2           1
2           3 
```

# 目标

我想查询数据库并应用用户指定的过滤器。例如，如果用户在“音乐”（类别）中搜索定价为“低”（价格）的事件，则只会显示一个事件（event_id = 1）。

URL 类似于：

```
www.site.com/events?category=music&price=low 
```

所以我需要使用从 URL 收到的过滤器“slugs”查询数据库。

这是我为使其工作而编写的查询：

```
SELECT ev.* FROM event ev  
WHERE  
EXISTS (SELECT * FROM event_filter_item efi 
    JOIN filter_item fi on fi.filter_item_id = efi.filter_item_id
    JOIN filter f on f.filter_id = fi.filter_id 
    WHERE efi.event_id = ev.event_id AND f.slug = 'category' AND fi.slug ='music')
AND EXISTS (SELECT * FROM event_filter_item efi 
    JOIN filter_item fi on fi.filter_item_id = efi.filter_item_id
    JOIN filter f on f.filter_id = fi.filter_id 
    WHERE efi.event_id = ev.event_id AND f.slug = 'price' AND fi.slug = 'low') 
```

此查询当前是硬编码的，但将根据 URL 中存在的过滤器和 slug 在 PHP 中动态生成。

# 还有一个大问题……

这是解决这个问题的合理方法吗？有没有人看到多个 EXISTS() 带有子查询以及执行多个连接的子查询的问题？这个查询非常快，数据库中只有几条记录，但是当有数千或数万条记录时呢？

非常感谢任何指导！

最好的，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:45:04.567

虽然 EXISTS 只是 JOIN 的一种形式，但 MySQL 查询优化器对于优化执行它是出了名的[“愚蠢” 。](http://solutionfactor.net/blog/2011/11/06/mysql-inner-join-vs-exists-may-yield-better-performance/)在您的情况下，它可能会对外部表进行全表扫描，然后为每一行执行相关的子查询，这势必会严重扩展。出于这个原因，人们经常将 EXISTS 重写为显式 JOIN。或者，只需使用更智能的 DBMS。

除此之外，考虑使用复合 PK `filter_item`，其中 FK 处于领先地位 - [InnoDB 表是集群的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)，您希望将属于同一过滤器的项目分组在物理上靠近在一起。

顺便说一句，数万并不是“大”行数——要真正测试可伸缩性，使用数千万或更多。

# jquery - JQuery将每个与Live结合起来

> ID：14322234
> 
> 赞同：0
> 
> 时间：2013-01-14T16:15:10.170
> 
> 标签：jquery

我有几个用 Ajax 调用更新的 div（它是 MVC，但完成后的 HTML 看起来像这样）：

```
<div class="progresswrapper running" id = "ProgressWrapper1"></div>
<div class="progresswrapper running" id = "ProgressWrapper2"></div> 
```

然后是javascript：

```
<script type="text/javascript">
    $(function () {

 var timerid = window.setInterval(function () {
            $('.progresswrapper.running').each(function () {
                 UpdateDivWithDataFromServer();
                 if(I'm done with this div) {
                    $(this).removeClass("running");
                 }
            });
        }, 500); 
```

有可能以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:28:42.470

```
var timerid = window.setInterval(function () {
$('.progresswrapper.running').each(function () {
    UpdateDivWithDataFromServer();
});
}, 500);

$(document).on("ajaxComplete",function(){
    $('.progresswrapper.running').each(function () {
         if(I'm done with this div) {
             $(this).removeClass("running");
         }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:22:15.453

您的`if()`语句需要在 AJAX 成功回调内，或在[`.ajaxStop()`](http://api.jquery.com/ajaxStop/)处理程序内。

```
var timerid = window.setInterval(function () {
        $('.progresswrapper.running').each(function () {
             UpdateDivWithDataFromServer();
        });
    }, 500);
$('.progresswrapper').ajaxStop(function() {
      $(this).removeClass("running");
}); 
```

# android - 使 TileOverlays 透明

> ID：14322236
> 
> 赞同：8
> 
> 时间：2013-01-14T16:15:25.997
> 
> 标签：android, google-maps, google-maps-android-api-2

我目前正在开发一个使用自定义 TileSource 在 Google 地图上显示数据的应用程序。我以 *.png 图像的形式获取这些数据，并且我正在使用 URLTileProvider。

一切都运行良好，但我现在正试图使 TileLayer 透明，或者至少部分透明。目标是，该图层是可见的，但底层的谷歌地图仍然闪耀。不知何故，我被困住了，因为我不知道如何实现这一目标。

*   我没有找到完全实现自定义 TileProvider 的方法，似乎只能扩展 URLTileProvider
*   服务器端图像操作是不可能的，因为数据是给定的
*   没有选项可以使 TileOverlay 透明？（阿尔法，不透明度，透明度）

如果有人能提示我正确的方向，或者告诉我适用于 Android 的 Google Maps API V2 是否真的不支持此功能，我会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:02:20.887

目前无法在 android maps sdk v2 中为 TileOverlay 指定透明度。不幸的是`setTransparency(float)`，方法仅适用于`GroundOverlay`.. 唯一的方法是实现您自己的 TileProvider 并更改 png 'on-the-fly' 以更改 alpha 通道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:38:22.777

你能让平铺图像本身透明吗？URLTileProvider 可以指向任何图像，因此如果图像具有 alpha，它应该可以工作。

您可以直接实现 TileProvider，但在这种情况下您必须负责加载自己的图像数据。如果您想在客户端上动态生成图块，这似乎更可取。

# android - 重新启动应用后，Google Map API v2 不会更新地图

> ID：14322240
> 
> 赞同：4
> 
> 时间：2013-01-14T16:15:49.263
> 
> 标签：android, google-maps-api-2

我使用 Google Maps Api V2 在 android 中编写了一个应用程序。该应用程序基本上在后面运行一个服务，并将位置报告给使用 SupportMapFragment 添加 Google 地图的 Activity。

当我启动该应用程序时，一切似乎都运行良好并且地图已更新。问题是当我按下返回按钮或屏幕关闭并返回应用程序时 Google Maps 停止工作。Location 仍然被报告，我在 Map 对象上调用 moveCamera 方法。

```
public class GpsTracker extends android.support.v4.app.FragmentActivity {

public static final int GPS_LOCATION_UPDATE = 0;
public static final int NETWORK_LOCATION_UPDATE = 1;
public static final int LOCATION_NETWORK_UNAVAILABLE = 2;
public static final int LOCATION_GPS_UNAVAILABLE = 3;

private static String gpsTrackerTag = "GpsTracker:MainActivity";

private GoogleMap mMap;
private PolylineOptions mpolyOptions = new PolylineOptions();
GpsTrackerMyService myservice = null;
ServiceConnection sc = null;
static MyHandlerCallback myCallback = null;

//private Boolean mServiceRunning = false; // Initial State When service is yet not started.
private Boolean mServiceBinded = false;

public static Callback CallBackHandler()
{
    return myCallback;
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gps_tracker);

    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);

    if (savedInstanceState == null)     {
        // First incarnation of this activity.
        mapFragment.setRetainInstance(true);
    } else {
        // Reincarnated activity. The obtained map is the same map instance in the previous
        // activity life cycle. There is no need to reinitialize it.
        mMap = mapFragment.getMap();
    }

    InitializeActivity();
    setUpMapIfNeeded();
}

@Override
protected void onPause()
{
    super.onPause();
    if(mServiceBinded)
    {
        unbindService(sc);
        mServiceBinded = false;
        Log.d(gpsTrackerTag, "onPause(): Unbinded from the Serivce");
    }
    else
        Log.d(gpsTrackerTag, "onPause():  Service Already in not Bind State");
}

@Override
protected void onResume()
{
    super.onResume();
    if(GpsTrackerMyService.isInstanceCreated() == true)
    {
        bindService(new Intent(this, GpsTrackerMyService.class), sc, 0);
        mServiceBinded = true;
        Log.d(gpsTrackerTag, "onResume(): Binded to the Service");
    }
    else
        Log.d(gpsTrackerTag, "onResume(): Service Not Running");

    setUpMapIfNeeded();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_gps_tracker, menu);
    return true;
}

private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
   // mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
}

private void InitializeActivity() {

    if(myCallback == null)
        myCallback = new MyHandlerCallback();

    if(sc == null){
        sc = new ServiceConnection() {

            @Override
            public void onServiceDisconnected(ComponentName name) {
                mServiceBinded = false;
                CharSequence text = "Service DisConnected";
                Toast t = Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG);
                t.show();

                Log.d(gpsTrackerTag, "Service Disconnected ");
            }

            @Override
            public void onServiceConnected(ComponentName name, IBinder service) {
                myservice = ((MyBinder) service).getService();
                mServiceBinded = true;
                Log.d(gpsTrackerTag, "Service Connected ");
            }

        };
    }   
}

public void startButton_Click(View view)
{
    if(GpsTrackerMyService.isInstanceCreated() == false)
    {
        Intent serviceIntent = startService();
        bindService(serviceIntent);
        Log.d(gpsTrackerTag, "startButton_Click(): Service Started and Called for bind");
    }
    else
        Log.d(gpsTrackerTag, "startButton_Click(): Service Already Running");

}

private void bindService(Intent serviceIntent) {
    bindService(serviceIntent, sc, 0 );
}

private Intent startService() {
    Intent serviceIntent = new Intent(this, GpsTrackerMyService.class);
    startService(serviceIntent);
    return serviceIntent;
}

public void stopButton_Click(View view)
{
    stopService();
}

private void stopService() {

    if(GpsTrackerMyService.isInstanceCreated() == true)
    {
        Log.d(gpsTrackerTag, "stopService(): Service Running Calling Stop on the Service");
        myservice.stopSelf();
    }
    else
        Log.d(gpsTrackerTag, "stopService(): Service Already Stopped");
}

public class MyHandlerCallback implements Callback
{

    @Override
    public boolean handleMessage(Message arg0) {

        Location l;
        CharSequence text;
        Toast t;
        LatLng mLatLng;
        int pos = 1;

        switch(arg0.what)
        {
        case GpsTracker.LOCATION_NETWORK_UNAVAILABLE:
            text = "Network Location Unavailable";
            t = Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG);
            t.show();
            return true;

        case GpsTracker.NETWORK_LOCATION_UPDATE:
            l = ((Location)arg0.obj);
            mLatLng = new LatLng(l.getLatitude(), l.getLongitude());
            mpolyOptions.add(mLatLng).width(2).color(Color.BLACK).geodesic(true);
            mMap.addPolyline(mpolyOptions);
            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(mLatLng, 12));

            mMap.addMarker(new MarkerOptions()
               .position(mLatLng)
               .title("Pos " + pos));

            //text =  ((Location)arg0.obj).toString();
            t = Toast.makeText(getApplicationContext(), "Network Location Update", Toast.LENGTH_LONG);
            t.show();
            return true;

        case GpsTracker.GPS_LOCATION_UPDATE:
            l = ((Location)arg0.obj);
            mLatLng = new LatLng(l.getLatitude(), l.getLongitude());
            //mpolyOptions.add(mLatLng).width(2).color(Color.BLACK).geodesic(true);
            //mMap.addPolyline(mpolyOptions);
            boolean check = mMap.isMyLocationEnabled();
            mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(mLatLng, 12));
                    //text =    ((Location)arg0.obj).toString();
            t = Toast.makeText(getApplicationContext(), "GPS Location Update", Toast.LENGTH_LONG);
            t.show();
            return true;

        case GpsTracker.LOCATION_GPS_UNAVAILABLE:
            text = "Gps Location Unavailable";
            t = Toast.makeText(getApplicationContext(), text, Toast.LENGTH_LONG);
            t.show();
            return true;

            default:
                return false;
        }
    }
} 
```

在 MyCallBackHandler 情况下 GPS_LOCATION_UPDATE 地图不会移动相机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:31:19.870

我认为您的问题与非静态内部类有关`CallBack`。当您的活动被重新创建时，您在 中保留对它的静态引用`myCallBack`，它本身具有您的旧的隐式引用`Activity`。这不仅是内存泄漏，而且当您调用`CallBack`它时，它正在查看旧活动的变量。有关内存泄漏和非静态内部类的更多信息，请参阅[这篇文章。](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)

如果您`Callback`在启动新活动时创建新活动，它应该可以解决问题。所以，在你的`InitializeActivity`, 改变

```
 if(myCallback == null)
        myCallback = new MyHandlerCallback(); 
```

到

```
myCallback = new MyHandlerCallback(); 
```

# regex - 使用正则表达式删除冗余信息

> ID：14322241
> 
> 赞同：0
> 
> 时间：2013-01-14T16:15:54.680
> 
> 标签：regex, deduplication

我想为以下任务使用正则表达式 (.NET)。

一个文本文件包含以下几行：

```
=650  \1$aPets$xFiction.  
=650  \1$aApartment houses$xFiction.  
=650  \0$aPets$xFiction.  
=650  \0$aApartment houses$xFiction. 
```

正则表达式应识别除第 8 个字符（0 与 1）之外的行相同的情况，然后删除第 8 个字符为 1 的行。

输出将是：

```
=650  \0$aPets$xFiction.  
=650  \0$aApartment houses$xFiction. 
```

（文本文件的其余部分保持不变）

如果其他工具或技术更可取，我很乐意了解这些。

谢谢你。

# excel - 带有用户输入变量的excel countif

> ID：14322242
> 
> 赞同：0
> 
> 时间：2013-01-14T16:15:55.387
> 
> 标签：excel, vba, countif

VBA 新手，所以请温柔点.....

我有一个检查重复项并在列中插入计数的脚本，这工作正常，但是工作表通常不同，所以我需要询问用户要检查重复项的列以及插入计数的列。我已经修改了脚本，但我只在目标列中输入了零。我看不出出了什么问题。任何帮助都会很棒。提前致谢。

```
Sub LookForDuplicates()

Dim LastRow As Long

Dim column1 As String
'display an input box asking for column
column1 = InputBox( _
"Please enter column to ckeck")
'if no file name chosen, say so and stop
If Len(column1) = 0 Then
MsgBox "No column entered"

Exit Sub
End If

Dim column2 As String
'display an input box asking for column
column2 = InputBox( _
"Please enter column to insert results")
'if no file name chosen, say so and stop
If Len(column2) = 0 Then
MsgBox "No column entered"

Exit Sub
End If

'------------------------------------------------------- 
```

'这是我的脚本的原始版本，带有设置的列，效果很好......但是我需要用户指定要检查的列以及将输入结果的列。

```
 'LastRow = Range("B" & Rows.Count).End(xlUp).Row
  '   With Range("E1")
  '  .FormulaR1C1 = "=COUNTIF(C2,RC[-3])"
  '  .AutoFill Destination:=Range("E1:E" & LastRow)
  '   Range("E1").Select
  '  ActiveCell.FormulaR1C1 = "Duplicates"
'-----------------------------------------------------   
LastRow = Range(column1 & Rows.Count).End(xlUp).Row
 With Range(column2 & "1")
.FormulaR1C1 = "=COUNTIF(C2,RC[-3])"
.AutoFill Destination:=Range(column2 & "1" & ":" & column2 & LastRow)
 Range(column2 & "1").Select
ActiveCell.FormulaR1C1 = "Duplicates"

  End With
End Sub 
```

我无法使用用户输入变量来解决这个问题，如果我遗漏了一些东西，我深表歉意，但我找不到任何资源......

公式： =COUNTIF($B:$B,B2) 有效，除非在宏中。

我需要将此行添加到宏中，替换为来自用户输入的变量，例如： =COUNTIF($column1:$column1,column12) 但我不断收到语法错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:38:08.847

如果您期望`String`输入框中的 /Text 值，那么您应该指定它，

```
Dim column1 As String
'display an input box asking for column
column1 = InputBox("Please enter column to ckeck", "Range to Check", , , , 2) 
```

与其在这里处理字符串，不如只使用`Range`用户可以简单地单击整个范围或您要检查的列中的一个单元格的对象。

使用范围获取输入框数据：您的主要问题似乎是设置范围以检查公式中的列。

```
Option Explicit

Sub LookForDuplicates()
    Dim LastRow As Long, StartRow as Long
    Dim column1 As Range, column2 As Range

    Set column1 = Application.InputBox("Please enter _ 
            column to ckeck", "Range to Check", , , , , , 8)
    If column1 Is Nothing Then
        MsgBox "No column entered"
        Exit Sub
    End If

    Set column2 = Application.InputBox("Please _ 
                  enter column to insert results", _
                              "Range to Output Results", , , , , , 8)
    If column2 Is Nothing Then
        MsgBox "No column entered"
        Exit Sub
    End If

    LastRow = Cells(Rows.Count, column1.Column).End(xlUp).Row '--updated here
    StartRow = column2.Row '-- here a new code added, assuming that you will have at least one row for column titles 
     With column2
        .FormulaR1C1 = "=COUNTIF(R" & column1.Row _ 
                & "C[-1]:R" & LastRow + 2 & "C[-1],RC[-1])"
        .AutoFill Destination:=column2.Resize(LastRow - StartRow, 1)
    End With
    column2.Offset(-1, 0).FormulaR1C1 = "Duplicates"
End Sub 
```

输出：

![在此处输入图像描述](../Images/3cb09cf312e465c1ec3049c40fd36777.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:52:48.803

如果其他人可能会发现这很有用，则解决方案：

问题是即使第 1 列作为列引用 H 输入，例如 COUNTIF 函数需要将此作为数字引用，因此在 column1 值上添加了一个额外变量到数值并修改了公式以适应。现在所有工作：

```
Dim LastRow As Long

Dim column1 As String
'display an input box asking for column
column1 = InputBox( _
"Please enter column to ckeck")
'if no file name chosen, say so and stop
ColumnNumber = Columns(column1).Column

If Len(column1) = 0 Then
MsgBox "No column entered"

Exit Sub
End If

Dim column2 As String
'display an input box asking for column
column2 = InputBox( _
"Please enter column to insert results")
'if no file name chosen, say so and stop
If Len(column2) = 0 Then
MsgBox "No column entered"

Exit Sub
End If

LastRow = Range(column1 & Rows.Count).End(xlUp).Row
     With Range(column2 & "1")
    .FormulaR1C1 = "=COUNTIF(C" & ColumnNumber & ",C" & ColumnNumber & ")"
    .AutoFill Destination:=Range(column2 & "1" & ":" & column2 & LastRow)
     Range(column2 & "1").Select
    ActiveCell.FormulaR1C1 = "Duplicates"

  End With
End Sub 
```

# java - 条纹格式类型格式模式编号无法正常工作

> ID：14322244
> 
> 赞同：0
> 
> 时间：2013-01-14T16:16:00.570
> 
> 标签：java, jsp-tags, stripes, tld

我有一个带有`<stripes:form>`标签等的 Stripes JSP。我有如下一行：

```
<span class='amount'>
    <fmt:formatNumber value="${MyJavaClass.amount}" type="number"/>
</span> 
```

我知道这与相应的 Stripes Action Bean 结合使用效果很好。

现在我想以不同的方式格式化“金额”变量，即确保至少使用 2 位小数。例如：

> 199.1 变成 199.10 362.44 仍然是 362.44

根据 Stripes 文档，我认为添加 a`formatPattern="decimal"`就足够了。 **请注意，我想保留“数字”格式类型，我不想将其更改为货币类型。** 实际上我遇到了如下错误：

```
org.apache.jasper.JasperException: /MyJSPPath/MyJSP.jsp(19,6) Attribute formatPattern invalid for tag formatNumber according to TLD 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:15:37.803

我修复了它正确设置`pattern`参数。

```
<fmt:formatNumber value="${MyJavaClass.amount}" type="number" pattern="#.00"/> 
```

这还不够：

```
<fmt:formatNumber value="${MyJavaClass.amount}" type="number" maxFractionDigits="2"/> 
```

仅与一位数字相关的问题仍然存在（即“199.3”仍然是“199.3”，而不是“199.30”）

# c# - 在没有 SQL Server Profiler 的情况下查找使用 C# 传递的 SQL 参数

> ID：14322249
> 
> 赞同：0
> 
> 时间：2013-01-14T16:16:24.173
> 
> 标签：c#, asp.net, sql-server, stored-procedures

我正在将 Telerik 网格与`SqlDataSource`存储过程类型绑定。我还在`SqlDataSource`.

现在我想知道传递给服务器上存储过程的最终值是什么。我没有使用 SQL Server 探查器的权限。

```
<asp:SqlDataSource ID="sqlSource" runat="server" SelectCommand="dbo.sp_abc" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:Parameter Name="pUserID" Type="Int32" DefaultValue="0" />
        <asp:Parameter Name="pMasterUserID" Type="Int32" DefaultValue="0" />
        <asp:Parameter Name="pDBID" Type="Int32" DefaultValue="0" />
        <asp:ControlParameter Name="pIncludeHistoric" Type="Boolean" DefaultValue="False" 
            ControlID="chkCurrentOnly" PropertyName="Checked" />        
    </SelectParameters>
</asp:SqlDataSource> 
```

有什么最好的方法可以在应用程序服务器端找到发送到数据库的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:23:44.067

您应该手动将数据绑定到网格，而不是使用 SQLDataSource。这将允许您“查看”发送到网格的参数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:24:57.067

我认为这可能的唯一方法是在本地 mssql 服务器或您有权限的任何其他 mssql 服务器上运行您的应用程序。这将允许您进行配置文件。

您可以使用 mssms 复制数据库，而无需使用 具有 root 权限，`the SQL Management Object method`如果您的数据库非常大，这可能需要一些时间。

查看此链接以获取有关如何跨服务器复制数据库的更多信息。

[http://msdn.microsoft.com/en-us/library/ms188664.aspx#Copy_Move](http://msdn.microsoft.com/en-us/library/ms188664.aspx#Copy_Move)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:11:03.313

查看[MiniProfiler](http://miniprofiler.com/)

它将向您展示某些方法执行所需的时间、运行了哪些 SQL 代码以及传递的参数/值。我只将它与 MVC 一起使用，但这也适用于 WebForms。

# php - “无法访问受保护的属性”错误

> ID：14322251
> 
> 赞同：0
> 
> 时间：2013-01-14T16:16:30.160
> 
> 标签：php, class, composition

我有两个涉及组合而不是继承的类。A 类和 B 类。A 类的属性之一是 B 类对象的数组。A 类有一个公共方法`A::getName()`。B 类也有一个同名的公共方法。A类的方法如下：

```
public function getName()
{
    return $this->_name;
} 
```

我的问题是当我在 B 类中并尝试访问 A 类的这个公共方法时，我得到“无法访问受保护的属性”错误。`$_name`是每个类中的私有属性。例如，A 类是表单的名称，B 类是字段的名称。

这是生成错误的代码（B 类的构造函数）：

```
public function __construct($name)
{
    $this->foo = A::getName() .'-'. $name;
} 
```

为什么不允许我访问 A 类的公共方法 getName()？有什么办法可以解决或解决这个问题？

* * *

使固定：

我意识到我正在静态调用 A 类的方法，尽管我需要单独处理每个对象，因为每个对象都有一个唯一的名称。为了解决我的问题，我为 B 类提供了一个公共集合函数作为唯一名称，并在 A 类中调用它：

```
class A
{
    ...

    $this->list[$B_name] = new B($B_name);

    $this->list[$B_name]->setID($this->_name, $B_name);

}

class B
{
    ...

    public function setID($name, $subName)
    {
        $this->foo = $name .'-'. $subName;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:40:43.940

这是因为您试图静态调用它，并且在该方法中您正在访问实例变量。

它可以像这样工作：

```
class A {
   private static $_name = "A";
   public static function getName() {
        return self::$_name;
   }
}

class B {
   public function __construct($name) {
        $this->foo = A::getName() .'-'. $name;
   }
} 
```

或者这样（恕我直言，你的情况）

```
class A {
   private $_name;

   public function __construct($name) {
        $this->_name = $name;
   }

   public function getName() {
       return $this->_name;
   }
}

class B {
   public function __construct($name, A $parent) {
        $this->foo = $parent->getName() .'-'. $name;
   }
} 
```

# google-maps-api-3 - 在 Google Maps JavaScript API 中合并街景控件（街景小人）和缩放控件

> ID：14322253
> 
> 赞同：1
> 
> 时间：2013-01-14T16:16:44.453
> 
> 标签：google-maps-api-3

有没有办法配置 Google Maps JavaScript API (v3)，使得街景（街景小人）和缩放控件可以触摸，就像 maps.google.com 一样？我相信我已经尝试了所有的配置选项，但无法触摸它们。

# ios - 从 NSManagedObject 子类集创建 MKPolyline 时的核心数据性能问题

> ID：14322254
> 
> 赞同：0
> 
> 时间：2013-01-14T16:16:45.213
> 
> 标签：ios, core-data, core-location, mapkit

我正在构建一个使用 Core Location 框架跟踪用户运动的健身应用程序。我正在使用 Core Data 框架保存数据。目前我有两个实体；锻炼和位置。Workout 由这些 Location 对象组成，它们的主要属性是纬度和经度。

当我尝试从这些 Location 对象创建 MKPolyLine 时，需要在设备上花费大量时间。

```
- (void)createRouteLineAndAddOverLay
{
    CLLocationCoordinate2D coordinateArray[[self.workout.route count]];

    for (int i = 0; i < [self.workout.route count]; i++) {
        CLLocationCoordinate2D coordinate;
        coordinate.latitude = [[[self.workout.route objectAtIndex:i] latitude] doubleValue];
        coordinate.longitude = [[[self.workout.route objectAtIndex:i] longitude] doubleValue];
        coordinateArray[i] = coordinate;
    }

    self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:[self.workout.route count]];
    [self.mapView addOverlay:self.routeLine];
    [self setVisibleMapRect];
} 
```

使用标量可以提高性能吗？或者我应该在保存它们时尝试用某种算法过滤掉其中一些位置点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:30:09.873

以下是一些优化建议：

首先，您`count+1`调用了`count`(>2000)。将计数存储在变量中。

其次，在您的循环中，您反复从锻炼对象中检索数据。`route`在开始循环之前尝试存储数组。

此外，如果是从to`route`的一对多关系，它应该导致一个，而不是一个数组。我怀疑您正在使用，这也可能影响您的表现。使用简单的整数属性跟踪订单可能会更好。`Workout``Location``NSSet``NSOrderdSet`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:44:33.173

这里的技巧是在数据库端进行排序。

```
- (void)createRouteLineAndAddOverLay
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Location"];
    NSSortDescriptor *fromStartToEnd = [NSSortDescriptor sortDescriptorWithKey:@"distance" ascending:YES];
    request.sortDescriptors = [NSArray arrayWithObject:fromStartToEnd];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"workout = %@", self.workout];
    request.predicate = predicate;
    NSArray *locations = [self.workout.managedObjectContext executeFetchRequest:request error:NULL];

    int routeSize = [locations count];

    CLLocationCoordinate2D coordinateArray[routeSize];

    for (int i = 0; i < routeSize; i++) {
        CLLocationCoordinate2D coordinate;
        coordinate.latitude = [[[locations objectAtIndex:i] latitude] doubleValue];
        coordinate.longitude = [[[locations objectAtIndex:i] longitude] doubleValue];
        coordinateArray[i] = coordinate;
    }

    self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:routeSize];
    [self.mapView addOverlay:self.routeLine];
    [self setVisibleMapRect];
} 
```

当锻炼有 1321 个位置时，这种方法只用了 0.275954 秒

# python - 如何到达一个类的实例名称？

> ID：14322259
> 
> 赞同：0
> 
> 时间：2013-01-14T16:17:00.107
> 
> 标签：python, instances

我是一个退出的新 python 程序员，只是出于好奇，我想知道如何在我的类的方法中找到在 main 主体中创建的实例名称。我想知道类是否有内置方法，或者我应该自己管理它。顺便说一句，我不想​​使用列表或字典。示例代码如下：

```
class Vec2D(object):
   def __init__(self,X, Y):
     self.x=X
     self.y=Y
     print "X coordinate is ",self.x # I want to add it here 
     print "Y coordinate is ",self.y # and here

if __name__ == '__main__':
    mypoint1 = Vec2D(0,1)
    mypoint2 = Vec2D(1,2) 
```

它可以被视为一个报告问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:17:40.133

你不能。一个值无法知道哪个变量引用了它。

原因很简单；您可以让多个变量引用相同的值：

```
mypoint3 = mypoint1 
```

现在实例有什么名字？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:39:15.923

正如@MartijnPieters 所说，这些无法获取实例的变量名。翻译后不保留名称。

但是，如果您确实有特殊需要，我认为至少有两种方法适合您。

假设您有一个`MyInstance`class实例`MyClass`，那么

1.  `str(MyInstance)`会给你一个`string`like ，它在运行时`<__main__.MyClass instance at 0x1044b6f80>`唯一指示。`MyInstance`您可能希望将其用作实例的名称。

2.  在类的构造中显式定义一个“名称”，例如：

    ```
    class MyClass:
        def __init__(self, name):
            self.name = name 
    ```

    . 之后，您始终可以通过以下方式获取名称：

    ```
    MyInstance = MyClass("Instance1")
    print MyInstance.name 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:15:58.553

好吧，对于初学者来说，您无法打印名称，`__init__()`因为该对象仍在构造中并且尚未分配一个。即使是这样，也没有内置的方法可以在 Python 中找出它是什么。

但是，可以在模块的全局命名空间中构建后搜索对象，这允许您执行以下操作：

```
class Vec2D(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __str__(self):
        my_name = '<unknown>'
        namespace = globals().copy()
        for name,obj in namespace.items():
            if obj is self:
                my_name = name
                break
        return "\n".join(["{!r}:",
                          "  X coordinate is {}",
                          "  Y coordinate is {}"]).format(my_name, self.x, self.y)

if __name__ == '__main__':
    mypoint1 = Vec2D(0,1)
    mypoint2 = Vec2D(1,2)

    print mypoint1
    print mypoint2 
```

输出：

```
'mypoint1':
  X coordinate is 0
  Y coordinate is 1
'mypoint2':
  X coordinate is 1
  Y coordinate is 2 
```

然而，这并不是万无一失的，因为如果同一个对象有两个名称，`for`搜索循环将在找到其中一个时立即停止。它可以被修改以找到它们，我想......

# android - 使用 Spannable 的 TextView 中的换行符

> ID：14322260
> 
> 赞同：2
> 
> 时间：2013-01-14T16:17:04.513
> 
> 标签：android, html, textview, spanned

我有以下问题。我有一个`String`我想在`TextView`. 因为`String`可以是 HTML 格式，所以我使用的`Spanned`是这样的：

```
TextView tv  = (TextView)findViewById(R.id.Description);
Spanned myDescription = Html.fromHtml(myDescriptionOriginal, null, null);
tv.setText(myDescription, TextView.BufferType.SPANNABLE); 
```

我现在遇到的“问题”是，当 myDescriptionOriginal 不是 HTML 格式时，`fromHtml(...)`会删除所有换行符（可能还有制表符之类的东西）。

是否有解决这个问题的通用解决方案（可能作为`Spanned/Spannable/Html`类的一部分，我不太熟悉）或者这是我必须自己编写的东西（例如，我可以检查 myDescriptionOriginal 是否包含 HTML 标签，如果它不'不是我不使用`fromHtml`）

# java - Android 4.1.1 中的 ActionBarSherlock

> ID：14322262
> 
> 赞同：2
> 
> 时间：2013-01-14T16:17:05.107
> 
> 标签：java, android, actionbarsherlock

我正在使用最新版本的 ActionBarSherlock 4.2。

我在 2.3.5、3.2 和 4.0 等不同版本的 Android 设备中使用它。在所有这些版本中，ActionBar 都出现在 Activity 的顶部。

今天，我将我的应用程序安装在 Android 版本 4.1.1 的新设备上。ActionBar 不再位于顶部。它显示为选项菜单，子菜单显示为上下文菜单。你知道我怎样才能让 actionBar 像旧版本一样位于顶部吗？

# visual-studio - 更改 Visual Studio“当前区域设置”值

> ID：14322274
> 
> 赞同：20
> 
> 时间：2013-01-14T16:17:52.143
> 
> 标签：visual-studio, visual-studio-2008, reporting-services

我正在 Visual Studio 中设计一些 SSRS 报告，并且每个日期时间字段都显示为 MM/dd/yyy 而不是我偏好的 dd/MM/yyyy

我的 Windows 区域设置是英语（爱尔兰），但如果我查看任何 datetmie 占位符属性窗口，它会显示“当前区域设置：英语（美国）”。我不知道它是从哪里获取的（很确定它也不是数据集中定义的 SQL 登录名）或如何更改它。有任何想法吗？

（我可以强制将每个日期时间字段的输出更改为我喜欢的格式，希望不必每次都这样做，而只需将环境设置为正确的区域设置）

*更新：忘了添加，我可以在 RDL 中看到一个设置为“en-US”的语言标签，每当我尝试将其更改为其他任何内容并保存时，它都会自动更改回“en-US”*

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-14T23:48:53.527

每个报告都有自己的区域设置。

单击报表设计图面中没有对象的部分，然后查看报表的“属性”窗口。下面`Localization`有一个名为的设置`Language`，默认为`English (United States)`or `en-US`。您可以将其设置为您自己的区域设置，但我喜欢将其设置为`=User!Language`使其显示在用户的区域设置首选项中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-21T15:18:33.303

除了 Chris 的正确答案 - 在 VS 2012 的 BIDS 中，右键单击设计表面并没有显示本地化屏幕。点击 f7 编辑报告的底层代码，您可以在其中找到适当的节点并将其更改为您的本地设置：

```
 ....</ReportSections>
      <Language>en-GB</Language>
      ...
  </Report> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T11:32:34.777

正确的解决方案是来自 Chris 的解决方案，但是当您编写更新时，您可以尝试以这种方式修改占位符的表达式公式：

`=Format(Fields!FieldName.Value, "dd/MM/yyyy")`

# c# - 拆分字符串后如何打印分隔符

> ID：14322278
> 
> 赞同：0
> 
> 时间：2013-01-14T16:18:06.173
> 
> 标签：c#, javascript

> **可能重复：**
> [如何按字符串拆分字符串并使用 .NET 包含分隔符？](https://stackoverflow.com/questions/2484919/how-do-i-split-a-string-by-strings-and-include-the-delimiters-using-net)

我有以下代码：

```
string Test="abc * (xyz+ pqr) - 10/100";

char[] delimiters = new char[] { '+', '-', '*', '/', '(', ')' };
string[] parts = Test.Split(delimiters, StringSplitOptions.RemoveEmptyEntries);
for (int i = 0; i < parts.Length; i++)
{
    Response.Write(parts[i]);
} 
```

我得到的输出为：

```
abc xyz pqr 10100 
```

但我想要：

```
abc
*
(
xyz
+
pqr 
```

...等等。

（在 c# 或 javascript 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:25:16.957

在 JavaScript 中，您可以使用正则表达式的捕获组：

```
var test = "abc * (xyz+ pqr) - 10/100";

var regex = /\s*([()*/+-])\s*/;
var parts = test.split(regex);
for (var i = 0; i < parts.length; i++)
    document.writeln(parts[i]); 
```

然而，这在较旧的 Internet Explorer 中不起作用，您需要在那里手动完成或使用[这个 shim](http://blog.stevenlevithan.com/archives/cross-browser-split)。更好的跨浏览器解决方案：只需匹配变量名和数字，然后使用`match`：

```
var regex = /[()*/+-]|[a-z]+|\d+/g;
var parts = text.match(regex); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T16:27:44.257

```
//Change this line
char[] delimiters = new char[] { '+', '-', '*', '/', '(', ')' };

//Change it to
char[] delimiters = new char[] { ' ' }; 
```

;

# android - 如何检查 FileInputStream 是否“已满”

> ID：14322280
> 
> 赞同：0
> 
> 时间：2013-01-14T16:18:24.937
> 
> 标签：android

我正在尝试按照此示例在用户移动设备上编写文件

[存储选项 [数据存储]](http://developer.android.com/guide/topics/data/data-storage.html)

我想在用户第一次运行我的应用程序时创建该文件。

在用户第一次运行我的应用程序后，我想先读取文件，然后在其中写一些东西（如果我需要的话）。

按照上面我正在使用的示例`FileInputStream stream= openFileInput(FILENAME)`，

有没有办法通过检查 fileInputStream 本身来知道我放入 FileInputStream 的文件是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:11:51.777

感谢大家的帮助。@Durairaj P 建议做我想做的最好的方法。

我使用了首选项。

但我仍然想知道它是否适合我想做的事情。我想跟踪用户在玩我的游戏时获得的积分；当用户重新打开我的应用程序时，我必须显示他们安装我的应用程序后获得的所有积分。我只是想知道 Preferences 是否适合并适用于此，或者我是否应该使用其他东西。

无论如何我发布我的代码，它可能会帮助某人

```
public class managePreferences{
Context context;    

    managePreferences(Context context){
        this.context = context;
    }

    public String readPreference(String fieldName, String defaultValue){    
        SharedPreferences prefs = context.getSharedPreferences("MY_PREFERENCES", Context.MODE_PRIVATE);
        String value = prefs.getString(fieldName, defaultValue);
        return value ;
    }

    public void writePreference(String fieldName, String value){
        SharedPreferences prefs = context.getSharedPreferences("MY_PREFERENCES", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = prefs.edit();
        editor.putString(fieldName, value);
        editor.commit();

    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T17:00:35.080

我会用

```
context.fileList(); 
```

并测试我的文件是否在某个地方。（最快的方法是制作一个列表并使用`contains()`）：

```
Arrays.asList(context.fileList()).contains(FILENAME); 
```

# java - 如何从依赖于其他jar文件的ant运行jar

> ID：14322281
> 
> 赞同：3
> 
> 时间：2013-01-14T16:18:26.530
> 
> 标签：java, mysql, eclipse, ant

我对如何创建 ant 文件非常陌生。其他类似的问题对我没有多大帮助，所以这就是我所拥有的。

我有这个蚂蚁文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project name="UMS-PKS 33 Deploy Scripts for Snapshot" default="main"  basedir="..">

        <property name="src.dir"     value="setup/CopyScriptsToDatabase"/>
        <property name="ant.dir"     value="ant/src"/>
        <property name="build.dir"   value="tmp/buildMySql"/>
        <property name="classes.dir" value="${build.dir}/classes"/>
        <property name="jar.dir"     value="${build.dir}/jar"/>
        <property name="main-class"  value="CopyScriptsToDatabase.test"/>
        <property file="ant/properties/compile.properties" />
        <property file="ant/properties/profile.properties" />
        <property file="ant/properties/${deploy.properties}" />

        <path id="lib.classpath">
            <fileset dir="${ant.dir}">
                <include name="mysql-connector-java-commercial-5.1.21-bin.jar" />
            </fileset>
        </path>

        <target name="clean">

        </target>

        <target name="compile">
            <mkdir dir="${classes.dir}"/>
            <javac srcdir="${src.dir}" destdir="${classes.dir}"/>
        </target>

        <target name="jar" depends="compile">
            <mkdir dir="${jar.dir}"/>
            <jar destfile="${jar.dir}/CopyScriptsToDatabase.jar" basedir="${classes.dir}">
                <manifest>
                    <attribute name="Main-Class" value="${main-class}" />
                </manifest>
            </jar>
        </target>

        <target name="run" depends="jar">
            <java jar="${jar.dir}/CopyScriptsToDatabase.jar" fork="true" classpath="lib.classpath">
                <arg value="${dwh.serverName}"/>
            </java>
        </target>

        <target name="clean-build" depends="clean,jar"/>
        <target name="main" depends="clean,run"/>
    </project> 
```

尝试从 ant 运行 jar 文件时出现以下错误：

```
 Buildfile: D:\Projects\UMS-PKS\ant\33_DeployScritps.xml
    clean:
    compile:
        [javac] D:\Projects\UMS-PKS\ant\33_DeployScritps.xml:26: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
        [javac] Compiling 1 source file to D:\Projects\UMS-PKS\tmp\buildMySql\classes
    jar:
          [jar] Building jar: D:\Projects\UMS-PKS\tmp\buildMySql\jar\CopyScriptsToDatabase.jar
    run:
         [java] java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
         [java]     at java.net.URLClassLoader$1.run(Unknown Source)
         [java]     at java.security.AccessController.doPrivileged(Native Method)
         [java]     at java.net.URLClassLoader.findClass(Unknown Source)
         [java]     at java.lang.ClassLoader.loadClass(Unknown Source)
         [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
         [java]     at java.lang.ClassLoader.loadClass(Unknown Source)
         [java]     at java.lang.Class.forName0(Native Method)
         [java]     at java.lang.Class.forName(Unknown Source)
         [java]     at CopyScriptsToDatabase.test.main(Unknown Source)
         [java] localhost
         [java] MySQL Connect Example.
    main:
    BUILD SUCCESSFUL
    Total time: 1 second 
```

我需要添加什么才能使其正常工作？

谢谢，萨斯加布里埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:44:03.060

1.  根据您的 ant 文件所在的目录，您在目录 ../ant/src 中有 mysql-connector-java-commercial-5.1.21-bin.jar 文件吗？
2.  如果您在 ../ant/src/ 中有文件，请使用 zip 工具打开它并确保 Driver.class 在 com/mysql/jdbc/ 中。而且我认为最好将其命名为 lib 放置第 3 方 lib 文件的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-23T14:40:23.477

我最近遇到了同样的问题。经过一番调查，我找到了解决方案。我会为下一个正在寻找此解决方案的人写下来。

替换此部分：

```
<target name="run" depends="jar">
    <java jar="${jar.dir}/CopyScriptsToDatabase.jar" fork="true classpath="lib.classpath">
        <arg value="${dwh.serverName}"/>
    </java>
</target> 
```

对此：

```
<path id="classref1" location="${jar.dir}/CopyScriptsToDatabase.jar"/>
<path id="classref2" location="path/to/jars/mysql-connector-java-commercial-5.1.21-bin.jar"/>
<target name="run" depends="jar">
    <java fork="true classname="lib.classpath">
        <classpath>
            <path refid="classref1"/>
            <path refid="classref2"/>
        </classpath>
        <arg value="${dwh.serverName}"/>
    </java>
</target> 
```

这就像运行：

`java -cp "mysql-connector-java-commercial-5.1.21-bin.jar:CopyScriptsToDatabase.jar" {lib.classpath} {arg_serverName}`

# php - 如何以点表示而不是整数表示 (ip2long) 存储 IP 地址？

> ID：14322282
> 
> 赞同：-3
> 
> 时间：2013-01-14T16:18:27.883
> 
> 标签：php, javascript, ajax

此功能旨在存储在线管理人员。它使用 . 将 IP 地址存储在数据库中`ip2long`。例如，`2130706433`。我刚学PHP，不知道怎么传字符串之类的

这是我的代码。

```
<?php

require "connect.php";
require "functions.php";

// We don't want web bots scewing our stats:
if(is_bot()) die();

$stringIp = $_SERVER['REMOTE_ADDR'];
$intIp = ip2long($stringIp);

// Checking wheter the visitor is already marked as being online:
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$intIp);

if(!mysql_num_rows($inDB))
{
    // This user is not in the database, so we must fetch
    // the geoip data and insert it into the online table:

    if($_COOKIE['geoData'])
    {
        // A "geoData" cookie has been previously set by the script, so we will use it

        list($city,$countryName,$countryAbbrev) = explode('|',mysql_real_escape_string(strip_tags($_COOKIE['geoData'])));
    }
    else
    {

        $xml = file_get_contents('http://api.hostip.info/?ip='.$stringIp);

        $city = get_tag('gml:name',$xml);
        $city = $city[1];

        $countryName = get_tag('countryName',$xml);
        $countryName = $countryName[0];

        $countryAbbrev = get_tag('countryAbbrev',$xml);
        $countryAbbrev = $countryAbbrev[0];

        setcookie('geoData',$city.'|'.$countryName.'|'.$countryAbbrev, time()+60*60*24*30,'/');
    }

    $countryName = str_replace('(Unknown Country?)','UNKNOWN',$countryName);

    // In case the Hostip API fails:

    if (!$countryName)
    {
        $countryName='UNKNOWN';
        $countryAbbrev='XX';
        $city='(Unknown City?)';
    }

    mysql_query("   INSERT INTO tz_who_is_online (ip,city,country,countrycode)
                    VALUES(".$intIp.",'".$city."','".$countryName."','".$countryAbbrev."')");
}
else
{
    // If the visitor is already online, just update the dt value of the row:
    mysql_query("UPDATE tz_who_is_online SET dt=NOW() WHERE ip=".$intIp);
}

// Removing entries not updated in the last 10 minutes:
mysql_query("DELETE FROM tz_who_is_online WHERE dt<SUBTIME(NOW(),'0 0:10:0')");

// Counting all the online visitors:
list($totalOnline) = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM tz_who_is_online"));

// Outputting the number as plain text:
echo $totalOnline;

?> 
```

这是我的功能代码

```
 <?php

function get_tag($tag,$xml)
{
    preg_match_all('/<'.$tag.'>(.*)<\/'.$tag.'>$/imU',$xml,$match);
    return $match[1];
}

function is_bot()
{
    /* This function will check whether the visitor is a search engine robot */

    $botlist = array("Teoma", "alexa", "froogle", "Gigabot", "inktomi",
    "looksmart", "URL_Spider_SQL", "Firefly", "NationalDirectory",
    "Ask Jeeves", "TECNOSEEK", "InfoSeek", "WebFindBot", "girafabot",
    "crawler", "www.galaxy.com", "Googlebot", "Scooter", "Slurp",
    "msnbot", "appie", "FAST", "WebBug", "Spade", "ZyBorg", "rabaz",
    "Baiduspider", "Feedfetcher-Google", "TechnoratiSnoop", "Rankivabot",
    "Mediapartners-Google", "Sogou web spider", "WebAlta Crawler","TweetmemeBot",
    "Butterfly","Twitturls","Me.dium","Twiceler");

    foreach($botlist as $bot)
    {
        if(strpos($_SERVER['HTTP_USER_AGENT'],$bot)!==false)
        return true;    // Is a bot
    }

    return false;   // Not a bot
}
?> 
```

有人可以帮我理解如何使用这个小脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:24:49.573

我不确定你要做什么，你能再解释一下这个问题吗？

从我收集的信息来看，您不想将 IP 存储为数字，而是存储为字符串（IPv4 或 IPv6 格式）。出于以下几个原因，实际上最好以这种格式存储它：

*   使用更少的存储空间
*   允许轻松查找以匹配其他 IP 数据库，例如根据 IP 查找原产国
*   允许创建更有效的索引，整数上的索引总是比字符串上的索引快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:26:58.247

```
$stringIp = $_SERVER['REMOTE_ADDR'];  // real IP address
$intIp = ip2long($stringIp);  //IP address converted to long int 
```

只需将 $stringIp 而不是 $intIp 插入数据库，您必须确保您的检查正在寻找正确的检查。下面的行需要更改：

```
$inDB = mysql_query("SELECT 1 FROM tz_who_is_online WHERE ip=".$stringIp); 
```

还有插入查询：

```
mysql_query("   INSERT INTO tz_who_is_online (ip,city,country,countrycode)
                  VALUES(".$stringIp.",'".$city."','".$countryName."','".$countryAbbrev."')");

mysql_query("UPDATE tz_who_is_online SET dt=NOW() WHERE ip=".$stringIp); 
```

请记住，您的数据库可能需要从当前的列类型更改为 varchar 才能正常工作。否则你会得到插入/更新错误。

# jquery - 如何修复动态生成的div内图像的高度和宽度

> ID：14322284
> 
> 赞同：0
> 
> 时间：2013-01-14T16:18:30.087
> 
> 标签：jquery, asp.net, css

```
<div id="ARDiv" style="bottom: 10px; float: left; position: fixed; height:200px ; width:161px;">
 </div> 
```

在此 Div 图像中使用 jquery 一个接一个地显示

我想要做的是修复图像的高度和宽度，使其不会大于

```
 height:200px ; width:161px; 
```

**编辑：** 这就是我的推广者的工作方式-

`$("#ARDiv").adrotator({ intervalTime: 3000, xmlFileName: 'Adrotator.xml' });`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:22:20.370

你可以像这样用css做到这一点

```
#ARDiv img {
 height:200px ;
 width:161px;
} 
```

或在插入图像后使用 jquery 添加此`.height(200).width(161);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:23:22.387

您可以在 css 中修复大小：

```
#ARDiv img{
    height: 200px;
    width: 161px;
} 
```

^ 这表示出现在`#ARDiv`div 内的任何图像都将固定为这些尺寸

或在 jQuery 中：`$('#ARDiv').find('img').height('200px').width('161px');`

# java - spring 3.2.0 classnotfoundexception

> ID：14322289
> 
> 赞同：0
> 
> 时间：2013-01-14T16:18:41.313
> 
> 标签：java, spring, spring-mvc

我收到以下错误：

```
java.lang.ClassNotFoundException: org.springframework-web.servlet.DispatcherServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1062)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1010)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4935)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5262)
    at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5257)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我的 WEB-INF/lib 目录中有这些 .jar

```
spring-beans-3.2.0.RELEASE.jar
spring-context-3.2.0.RELEASE.jar
spring-core-3.2.0.RELEASE.jar
spring-expression-3.2.0.RELEASE.jar
spring-webmvc-3.2.0.RELEASE.jar
spring-web-3.2.0.RELEASE.jar 
```

我还需要什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:21:58.810

它应该`org.springframework.web.servlet.DispatcherServlet`没有包名称中的破折号。只是你的一个错字`web.xml`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:39:18.980

可能导致异常的因素：

1.  jar 未添加到`WEB-INF/lib`目录中
2.  DispatcherServlet 引用未正确配置`web.xml`

可以上传web.xml，项目结构，验证上面的信息吗？

# android - 通过后台活动传递数据

> ID：14322292
> 
> 赞同：1
> 
> 时间：2013-01-14T16:19:01.110
> 
> 标签：android, sqlite, android-intent

我正在为游戏开发数据库。

我想从一个活动中获取分数并在数据库活动中调用它，它将通过使用意图在数据库中更新，当意图被触发时游戏会暂停。

我也尝试过使用应用程序类（欢迎提出建议）。

有没有办法通过在后台触发意图来在活动之间传递数据，这样它就不会中断游戏玩法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:26:23.880

你的数据库不应该在一个活动中。Activity 代表应用程序中的一个屏幕（或一个用例），不应像数据库类那样代表实现细节。

作为替代方案，您可以将数据库代码放在可以从同一应用程序中的任何位置访问的 Singleton 类中。您还可以在应用程序的 onCreate 方法中创建数据库并将其存储在其中的静态字段中，或者只是创建一个单独的类来公开静态方法以访问数据库。

如果您对使用 Intents 感到不知所措，则需要使用数据库服务而不是 Activity。这样，当您将数据发送到服务时，当前 Activity 将保持在顶部。但与简单的静态类/单例方法相比，这会使事情复杂化很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:28:21.877

你似乎有一个很大的混淆：不应该有`database activity`. 您应该创建一个数据库助手类，并使其成为应用程序类中的成员变量。

```
// inside application class
private static MyDatabaseHelper mMyDB;

public MyDatabaseHelper static getDatabase() {
    if (mMyDB == null) {
        // mInstance should be the application instance, means make the
        // application class a singleton
        mMyDB = new MyDatabaseHelper(mInstance);
        // the constructor should open/create the database
    }
    return mMyDB;
} 
```

有了这个，您可以在任何地方使用您的数据库。

有了它，您可以轻松地从任何地方更新每个值。因此，无需触发传递值的意图。而是直接更新您的数据库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T16:21:10.363

有多种方法可以做到这一点。您可以使用处理程序、服务，然后使用 setresult 来回调父活动的 onactivity 结果。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-14T16:24:27.220

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
Bundle b = new Bundle();

b.putInt("key", 1);

intent.putExtras(b);

startActivity(intent); 
```

# xml - 如何序列化以下xml

> ID：14322293
> 
> 赞同：1
> 
> 时间：2013-01-14T16:19:12.770
> 
> 标签：xml, vb.net, xml-serialization

我知道如何序列化 xml。但是下面这个例子我还没有做过。而且我也不知道该怎么做。

```
 <Products>
   <row **id="10"**>
     <ProductName>Cola</ProductName>
     <Amount>3</Amount>
   </row>
   <row **id="20"**>
     <ProductName>Fanta</ProductName>
     <Amount>6</Amount>
   </row>
 </Products> 
```

所以我想用xml序列化，大部分的xml都做完了，但是剩下的这小部分。

我无法将 id 放在行后面。我敢打赌我需要使用 xmlattribute 但我真的不知道如何实现。

有人可以帮我解决如何通过 xml 序列化来获取“Row”元素中的 id。

（我确实找到了另一种方法，但由于这个 XML 非常大，而且大部分我都完成了，所以我很想继续。而且也不想解决任何小问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:48:54.403

你只需要在你的类中创建一个 ID 成员，然后用`XmlAttribute`属性标记它，例如：

```
Public Class MyRow

    <XmlAttribute()> _
    Public Property id() As Integer
        Get
            Return _id
        End Get
        Set(ByVal value As Integer)
            _id = value
        End Set
    End Property
    Private _id As Integer

    Public Property ProductName() As String
        Get
            Return _productName
        End Get
        Set(ByVal value As String)
            _productName = value
        End Set
    End Property
    Private _productName As String

    Public Property Amount() As Integer
        Get
            Return _amount
        End Get
        Set(ByVal value As Integer)
            _amount = value
        End Set
    End Property
    Private _amount As Integer
End Class 
```

# c++ - 带有自定义比较器的 C++ std::find

> ID：14322299
> 
> 赞同：33
> 
> 时间：2013-01-14T16:19:19.943
> 
> 标签：c++, stl

这基本上是我想要做的：

```
bool special_compare(const string& s1, const string& s2)
{
    // match with wild card
}

std::vector<string> strings;

strings.push_back("Hello");
strings.push_back("World");

// I want this to find "Hello"
find(strings.begin(), strings.end(), "hell*", special_compare);

// And I want this to find "World"
find(strings.begin(), strings.end(), "**rld", special_compare); 
```

但`std::find`不幸的是，它不是那样工作的。所以只使用 STL，我怎么能做这样的事情呢？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-14T16:37:11.110

根据您的评论，您可能正在寻找这个：

```
struct special_compare : public std::unary_function<std::string, bool>
{
  explicit special_compare(const std::string &baseline) : baseline(baseline) {}
  bool operator() (const std::string &arg)
  { return somehow_compare(arg, baseline); }
  std::string baseline;
}

std::find_if(strings.begin(), strings.end(), special_compare("hell*")); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T16:24:10.253

您需要使用的功能是 this : [`std::find_if`](http://en.cppreference.com/w/cpp/algorithm/find)，因为`std::find`不带比较功能。

但随后`std::find_if`不具有*价值*。你试图传递*价值*并*比较*两者，这让我很困惑。无论如何，请查看[文档](http://en.cppreference.com/w/cpp/algorithm/find)。查看用法的区别：

```
auto it1 = std::find(strings.begin(), strings.end(), "hell*");
auto it2 = std::find_if(strings.begin(), strings.end(), special_compare); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-14T16:36:16.197

除非您使用的是 C++11 编译器，否则您将需要`std::find_if()`，这很难使用。因为那时，您不需要硬编码要在某些比较器函数中搜索的值或实现仿函数对象，但可以在 lambda 表达式中执行此操作：

```
vector<string> strings;

strings.push_back("Hello");
strings.push_back("World");

find_if(strings.begin(), strings.end(), [](const string& s) {
    return matches_wildcard(s, "hell*");
}); 
```

然后你在某处写一个matches_wildcard()。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-14T17:07:27.440

由于还没有人提[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)，我就推荐这个

```
#include <functional>

bool special_compare(const std::string& s, const std::string& pattern)
{
    // match with wild card
}

std::vector<std::string> strings;
auto i = find_if(strings.begin(), strings.end(), std::bind(special_compare, std::placeholders::_1, "hell*")); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-14T16:36:04.667

使用 C++11 lambda：

```
auto found = find_if(strings.begin(), strings.end(), [] (const std::string& s) { 
    return /* you can use "hell*" here! */;
}); 
```

如果您不能使用 C++11 lambda，您可以自己制作一个函数对象。制作类型和重载运算符 ()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-10T15:59:47.260

我想有一个具有自定义查找逻辑的自定义类的示例，但没有找到任何这样的答案。所以我写了这个答案，它使用自定义比较器函数（C++11）来查找对象。

```
class Student {

private:  
  long long m_id;
  // private fields

public:
  long long getId() { return m_id; };

}; 
```

现在假设，我想找到与给定 id 匹配的`student`对象。`m_id`我可以`std::find_if`这样写：

```
// studentList is a vector array

long long x_id = 3; // local variable
auto itr = std::find_if(studentList.begin(), studentList.end(),
                    [x_id](Student& std_val) 
                    { return std_val.getId() == x_id; }
                    );

if(itr == studentList.end())
  printf("nothing found"); 
```

# tridion - 无法加载文件或程序集“Tridion.Web.UI.Editors.SiteEdit”

> ID：14322300
> 
> 赞同：1
> 
> 时间：2013-01-14T16:19:21.400
> 
> 标签：tridion

我已经为 SP1 安装了服务器修补程序汇总，现在出现 .NET 错误：

```
Could not load file or assembly 'Tridion.Web.UI.Editors.SiteEdit' 
```

尝试访问内容管理器时。有谁知道与修补程序汇总相关的此错误的根本原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:42:52.177

已解决，WebUI 与 Tridion 核心安装位于不同的位置！

# c# - 将参数从 JavaScript 传递到控制器

> ID：14322301
> 
> 赞同：0
> 
> 时间：2013-01-14T16:19:22.853
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-routing

我正在尝试将字符串值传递给创建项目对话框，但不确定如何执行此操作。

这是我认为的代码：

**JavaScript：**

```
function newRoute() {
    $.ajax({
        url: '@Url.Action("Create")',
        success: function (data) {
            if (data == "success") //successfully created the new route
                window.location.href = '@Url.RouteUrl(ViewContext.RouteData.Values)'
            else
                $.facybox(data); // there are validation errors, show the dialog w/ the errors
        }
    });
} 
```

**看法：**

```
<td>@route</td>
<td>
    <a href="javascript:newRoute();" class="button">Add</a>
</td> 
```

**控制器**：

```
public ActionResult Create(string routeName = "")
    {
        PopulateRouteInfoViewBag();

        var newRoute = new RouteInformation();

        newRoute.Name = routeName;

        return View(newRoute);
    } 
```

我正在尝试获取@route 中的值并将其传递给 Create 控制器，以便弹出带有传入字符串值的对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:34:20.857

使用 ActionLink html 辅助方法并像这样传递路由变量。

```
@{
   string route="somevaluehere";
 }
@Html.ActionLink("Add","Create","YourControllerName",
                          new { routeName=route},new {@id="addLnk"}) 
```

现在处理点击事件

```
$(function(){

   $("#addLnk").click(function(e){
     e.preventDefault();  //prevent normal link click behaviour
     var _this=$(this); 

      //do your ajax call now
      $.ajax({
        url: _this.attr("href"),
        success: function (data) {
            if (data == "success") //successfully created the new route
                window.location.href = 'someValidUrlHere'
            else
                $.facybox(data); 
         }
       });

   });     

}); 
```

此外，您可以考虑构建新页面的路径（操作方法）并将其作为 JSON 结果的一部分返回，并让客户端从 JSON 中读取它。

您可以将其视为消息正文的一部分，而不是将路由变量值附加到查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:34:55.650

有两种选择。1、使用`Url.Action("controllerName", "actionName", new {routeName = "your route name here"})`or 2、使用传入$.ajax的对象的data属性。

对于 2，您的 javascript 看起来像

```
function newRoute() {
    $.ajax({
        url: '@Url.Action("Create")',
        data: {
            route: "your data here"
        }
        success: function (data) {
            if (data == "success") //successfully created the new route
                window.location.href = '@Url.RouteUrl(ViewContext.RouteData.Values)'
            else
                $.facybox(data); // there are validation errors, show the dialog w/ the errors
        }
    });
} 
```

# c# - 如何在 Web 窗体的一个 GridView 中显示来自两个 SQL 表的数据？

> ID：14322302
> 
> 赞同：0
> 
> 时间：2013-01-14T16:19:26.957
> 
> 标签：c#, asp.net, .net, webforms, sql-server-express

在我的 SQL Server Express 中，我有`Recipients`,`MailingLists`和`RecipientMailingList`( `Recipient`'s ID 和`MailingList`'s ID) 表。每个收件人都被分配到几个邮件列表。我想在`GridView`. 我想通过将表从服务器资源管理器拖放到`.aspx`源代码来实现这一点。但是，我得到的是一个`GridView`没有任何信息的信息，`MailingLists`就像其他表格中的信息一样。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="RecipientID" DataSourceID="SqlDataSource1" EmptyDataText="There are no data records to display.">
        <Columns>
            <asp:BoundField DataField="RecipientID" HeaderText="Recipient ID" ReadOnly="True" SortExpression="RecipientID" />
            <asp:BoundField DataField="FirstName" HeaderText="First Name" SortExpression="FirstName" />
            <asp:BoundField DataField="LastName" HeaderText="Last Name" SortExpression="LastName" />
            <asp:BoundField DataField="City" HeaderText="City" SortExpression="City" />
            <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
            <asp:BoundField DataField="Phone" HeaderText="Phone" SortExpression="Phone" />
            <asp:BoundField DataField="MailingLists" HeaderText="Mailing Lists" SortExpression="MailingLists" />
        </Columns>
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:NewsletterConnectionString1 %>" DeleteCommand="DELETE FROM [Recipients] WHERE [RecipientID] = @RecipientID" InsertCommand="INSERT INTO [Recipients] ([FirstName], [LastName], [City], [Email], [Phone]) VALUES (@FirstName, @LastName, @City, @Email, @Phone)" ProviderName="<%$ ConnectionStrings:NewsletterConnectionString1.ProviderName %>" SelectCommand="SELECT [RecipientID], [FirstName], [LastName], [City], [Email], [Phone] FROM [Recipients]" UpdateCommand="UPDATE [Recipients] SET [FirstName] = @FirstName, [LastName] = @LastName, [City] = @City, [Email] = @Email, [Phone] = @Phone WHERE [RecipientID] = @RecipientID">
        <DeleteParameters>
            <asp:Parameter Name="RecipientID" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="FirstName" Type="String" />
            <asp:Parameter Name="LastName" Type="String" />
            <asp:Parameter Name="City" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
            <asp:Parameter Name="Phone" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="FirstName" Type="String" />
            <asp:Parameter Name="LastName" Type="String" />
            <asp:Parameter Name="City" Type="String" />
            <asp:Parameter Name="Email" Type="String" />
            <asp:Parameter Name="Phone" Type="String" />
            <asp:Parameter Name="RecipientID" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

如何创建一个`GridView`（或可能的 ListView），其中包含这三个表中的所有信息（收件人的详细信息和邮件列表的名称）？

更新：我有这样一个查询用作数据源：

```
SELECT Recipients.RecipientID, Recipients.FirstName, Recipients.LastName, 
Recipients.City, Recipients.Email, Recipients.Phone, MailingLists.Name
FROM Recipients
INNER JOIN RecipientMailingList
ON Recipients.RecipientID = RecipientMailingList.Recipient_RecipientID
INNER JOIN MailingLists ON RecipientMailingList.MailingList_MailingListID = MailingLists.MailingListID 
```

但是，我得到的是具有多个邮件列表的同一用户的不同行。我期望的结果是每个用户都有一行，一列是逗号分隔的`MailingLists`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:01:59.923

您可以使用模板字段并调用您的函数。

```
 <ItemTemplate>
             <%#GetName(Convert.ToInt32(Eval("RecipientsID"))) %>
         </ItemTemplate>
         </asp:TemplateField> 
```

现在您必须在您的 cs 文件中编写一个函数来获取 int 值并返回字符串。

# c++ - 在 C++ 中使用向量

> ID：14322310
> 
> 赞同：18
> 
> 时间：2013-01-14T16:19:55.340
> 
> 标签：c++, vector

我在使用以下代码时遇到问题，似乎无法弄清楚出了什么问题

```
#include <iostream>
#include <cmath>
#include <vector>

using namespace std;

double distance(int a, int b)
{
    return fabs(a-b);
}

int main()
{
    vector<int> age;
    age.push_back(10);
    age.push_back(15);

    cout<<distance(age[0],age[1]);
    return 0;
} 
```

错误在于函数距离的调用。

```
/usr/include/c++/4.6/bits/stl_iterator_base_types.h: In instantiation of ‘std::iterator_traits<int>’:
test.cpp:18:30:   instantiated from here
/usr/include/c++/4.6/bits/stl_iterator_base_types.h:166:53: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.6/bits/stl_iterator_base_types.h:167:53: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.6/bits/stl_iterator_base_types.h:168:53: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.6/bits/stl_iterator_base_types.h:169:53: error: ‘int’ is not a class, struct, or union type
/usr/include/c++/4.6/bits/stl_iterator_base_types.h:170:53: error: ‘int’ is not a class, struct, or union type 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-14T16:22:57.160

您正在尝试覆盖 std::distance 函数，尝试删除 " `using namespace std`" 并限定`cout`和`endl`使用`std::`

```
#include <iostream>
#include <cmath>
#include <vector>

double distance(int a, int b)
{
    return fabs(a-b);
}

int main()
{
    std::vector<int> age;
    age.push_back(10);
    age.push_back(15);

    std::cout<< distance(age[0],age[1]);
    return 0;
} 
```

`std::distance`用于统计指定范围内容器中的元素个数。[你可以在这里](http://en.cppreference.com/w/cpp/iterator/distance)找到更多关于它的信息。

或者，如果要引入`std::`命名空间，可以重命名距离函数：

```
#include <iostream>
#include <cmath>
#include <vector>

using namespace std;

double mydistance(int a, int b)
{
    return fabs(a-b);
}

int main()
{
    vector<int> age;
    age.push_back(10);
    age.push_back(15);

    cout<<mydistance(age[0],age[1]);
    return 0;
} 
```

这将使您的代码工作，但不建议在定义之前有“使用命名空间”声明。编写代码时，应避免使用第二种选择，此处仅作为代码示例的替代方法显示。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T16:23:49.977

怎么样

```
cout<< ::distance(age[0],age[1]); 
```

（其他答案已经建议删除该`using`指令）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T16:21:49.067

`using namespace std`当您创建自己的函数时不要使用调用`distance`，因为您的调用`distance`是在寻找`std::distance`而不是您的`distance`函数。

你也可以这样做：

```
namespace foo
{
  double distance(int a, int b)
  {
    return fabs(a-b);
  }
}

int main()
{
   foo::distance(x,y); //now you're calling your own distance function.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:39:26.637

或者，您可以使用

```
 using foo::distance; // OR:
 using namespace foo;

 (distance)(x,y); // the (parens) prevent ADL 
```

# haskell - 这是对 unsafeCoerce 的安全使用吗？

> ID：14322311
> 
> 赞同：13
> 
> 时间：2013-01-14T16:19:59.390
> 
> 标签：haskell, types, dynamic-typing

我有一种情况，我目前正在使用极其可怕的功能 unsafeCoerce。幸运的是，这不是什么重要的事情，但我想知道这是否是对这个函数的安全使用，或者是否会有另一种方法来解决其他人知道的这个特定问题。

我拥有的代码如下所示：

```
data Token b = Token !Integer

identical :: Token a -> Token b -> Bool
identical (Token a) (Token b) = a == b

data F a = forall b. F (Token b) (a -> b)

retrieve :: Token b -> F a -> Maybe (a -> b)
retrieve t (F t' f) = if identical t t' then Just (unsafeCoerce f) else Nothing 
```

需要注意的另外两件事是，这些标记在一个 monad 中使用，我使用它来确保为它们提供的整数是唯一的（即我不会两次制作相同的标记）。我还使用了一个 forall 量化的影子类型变量，与 ST monad 一样，以确保（假设仅使用我在模块中公开的方法）没有办法返回令牌（或者实际上什至是F) 来自 monad，而不是类型错误。我也没有公开令牌构造函数。

我认为，据我所见，这应该是 unsafeCoerce 的安全用法，正如我可以说（我希望）非常自信地说，我强制的值实际上正是我强制它的类型，但我可能错了。我也尝试过使用 Data.Typeable，它工作得很好，但目前我正在尝试这样做以避免 Typeable 约束，特别是因为 gcast 似乎在许多方面做了类似的事情，而且我仍然需要令牌来区分同类型的不同F。

非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T16:46:01.480

您已经实现了一种受限形式的动态类型，大致遵循[Data.Dynamic](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/Data-Dynamic.html#Dynamic)的风格——即，将（不透明的）值与其类型的证据配对。在运行时，您可以根据随数据提供的证据进行不安全的强制转换。

```
fromDyn (Dynamic t v) def
  | typeOf def == t = unsafeCoerce v
  | otherwise       = def 
```

这是具有悠久历史的规范方法，可以追溯到：

> Mart´ın Abadi、Luca Cardelli、Benjamin Pierce 和 Gordon Plotkin。静态类型语言中的动态类型。ACM Transactions on Programming Languages and Systems，13(2):237–268，1991 年 4 月。

该方法的安全性依赖于运行时类型令牌的不可伪造性。在您的情况下，任何人都可以构建等同于两种类型的令牌 - 您需要保证从类型到令牌的 1-1 映射，并确保恶意用户无法构建不正确的令牌。在 GHC 案例中，我们信任 Typeable 实例（和模块抽象）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T16:44:42.257

它本身并不安全：

```
oops :: F Bool
oops = F (Token 12) not

bad :: Token Int
bad = Token 12

*Token> maybe 3 ($ True) $ retrieve bad oops
1077477808 
```

`F a`是一种存在量化的类型，你不知道`b`它是什么类型。由于`identical`不关心 的类型参数`Token`，它无法检查提供`b`的 from`retrieve`的第一个参数是否与`F a`.

无论您的保护

> 需要注意的另外两件事是，这些标记在一个 monad 中使用，我使用它来确保为它们提供的整数是唯一的（即我不会两次制作相同的标记）。我还使用了一个 forall 量化的影子类型变量，与 ST monad 一样，以确保（假设仅使用我在模块中公开的方法）没有办法返回令牌（或者实际上什至是F) 来自 monad，而不是类型错误。我也没有公开令牌构造函数。

足够强大以使其在实践中安全，我不看就无法判断。如果确实没有`Token`s 可以在计算之外创建，并且 s 的`Integer`值`Token`唯一地表征了类型参数，那将是安全的。

# javascript - Backbone.js - 根据包含多个关键字的数组过滤集合

> ID：14322315
> 
> 赞同：3
> 
> 时间：2013-01-14T16:20:09.990
> 
> 标签：javascript, backbone.js, underscore.js

我`Backbone.js/Underscore.js`用来呈现一个`HTML`表格，当您在文本框中键入时过滤该表格。在这种情况下，它是一个基本的电话簿。
该表的内容来自一个由 JSON 文件填充的集合。JSON文件的基本示例如下：

```
[{
    "Name":"Sales and Services",
    "Department":"Small Business",
    "Extension":"45446",
},
{
    "Name":"Technical Support",
    "Department":"Small Business",
    "Extension":"18800",
},
{
    "Name":"Research and Development",
    "Department":"Mid Market",
    "Extension":"75752",
}] 
```

我将文本框的值转换为小写，然后将它的值与 Collection 一起传递给这个函数，然后我将返回的值分配给一个新的 Collection 并使用它来重新呈现页面。

```
filterTable = function(collection, filterValue) {
    var filteredCollection;
    if (filterValue === "") {
        return collection.toJSON();
    }
    return filteredCollection = collection.filter(function(data) {
        return _.some(_.values(data.toJSON()), function(value) {
            value = (!isNaN(value) ? value.toString() : value.toLowerCase());
            return value.indexOf(filterValue) >= 0;
        });
    });
}; 
```

问题是函数是字面的。要从我的示例中找到“销售和服务”部门，我必须准确输入，或者可能只是“销售”或“服务”。我无法输入“sal serv”，但仍然找到它，这是我想要做的。

我已经编写了一些 javascript，这些 javascript 在将文本划分为单词数组时似乎非常可靠（现在已更新为使用中的代码）。

```
toWords = function(text) {
    text = text.toLowerCase();
    text = text.replace(/[^A-Za-z_0-9@.]/g, ' ');
    text = text.replace(/[\s]+/g, ' ').replace(/\s\s*$/, '');
    text = text.split(new RegExp("\\s+"));
    var newsplit = [];
    for (var index in text) {
        if (text[index]) {
            newsplit.push(text[index]);
        };
    };
    text = newsplit;
    return text;
}; 
```

我想遍历“拆分”数组中的每个单词并检查每个单词是否存在于其中一个键/值中。只要所有单词都存在，它就会通过真值迭代器并被添加到集合中并呈现在表中。

因此，在我的示例中，如果我键入“sal serv”，它会发现这两个字符串都存在于第一项的名称中，并且会被返回。
但是，如果我键入“sales business”，则不会返回，因为尽管这两个值都出现在该项目中，但名称部分中不存在相同的两个单词。

我只是不确定如何在 Backbone/Underscore 中编写它，或者即使这是最好的方法。我查看了文档，不确定哪个功能最简单。

我希望这是有道理的。我有点陌生`Javascript`，我意识到我已经深入研究了，但学习是有趣的部分；-)
如果需要，我可以提供更多代码或 JSFiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:51:35.450

使用下划线`any`并使`all`这相对容易。这是它的要点：

```
 var toWords = function(text) {
    //Do any fancy cleanup and split to words
    //I'm just doing a simple split by spaces.
    return text.toLowerCase().split(/\s+/);
  };

  var partialMatch = function(original, fragment) {   
    //get the words of each input string
    var origWords = toWords(original + ""), //force to string
        fragWords = toWords(fragment);

    //if all words in the fragment match any of the original words, 
    //returns true, otherwise false
    return _.all(fragWords, function(frag) {
      return _.any(origWords, function(orig) {
        return orig && orig.indexOf(frag) >= 0;
      });
    });
  };

  //here's your original filterTable function slightly simplified
  var filterTable = function(collection, filterValue) {
      if (filterValue === "") {
          return collection.toJSON();
      }
      return collection.filter(function(data) {
          return _.some(_.values(data.toJSON()), function(value) {
              return partialMatch(value, filterValue);
          });
      });
  }; 
```

**注意：**这种方法的计算效率非常低，因为它首先需要遍历集合中的所有项目，然后是每个项目的所有字段，然后是该项目值中的所有单词。此外，循环内部声明了一些嵌套函数，因此内存占用不是最佳的。如果您有一小部分数据，那应该没问题，但如果需要，可以进行许多优化。如果我有时间，我可能会稍后回来并稍微编辑一下。

/代码示例未测试

# java - Java 2D 数组 - 输入值

> ID：14322321
> 
> 赞同：0
> 
> 时间：2013-01-14T16:20:42.310
> 
> 标签：java, arrays, matrix, multidimensional-array

我为 TSP 实现了 2 种算法，它使用一个包含路线、它们的成本等的类。目前它使用随机值这很好，尽管我现在需要比较算法以便让这个公平我需要做出输入相同（这在使用随机输入时显然不太可能发生！）我遇到的问题是我不知道如何将其从随机值更改为将预先确定的值插入到二维数组中，不仅如此，我也不知道如何计算这些价值的成本。

* * *

随机生成节点值：

```
Random rand = new Random();
            for (int i=0; i<nodes; i++) {
                for (int j=i; j<nodes; j++) {
                    if (i == j)
                        Matrix[i][j] = 0;
                    else {
                        Matrix[i][j] = rand.nextInt(max_distance);
                        Matrix[j][i] = Matrix[i][j];
                    }
                }
            } 
```

我假设上面声明了一个说 [4][4] 的矩阵，然后是 int 矩阵 [][] =*插入值*？

我对这门课的其他部分没有帮助，但我认为我需要确保这部分是正确的，然后再问！

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:27:00.037

你可以像这样初始化二维数组：

```
 double matrix[][] = { { v1, v2, ..., vn }, { x1, x2, ..., xn }, ..., { y1, y2, ..., yn } }; 
```

其中每个内部 {} 表示外部（第一个）索引，每个内部元素表示最内部（第二个）intex。

示例：要访问元素 x1，请执行以下操作：

```
 matrix[1][0]; 
```

这是您要求的答案，但我仍然认为对两种算法使用相同的随机值集会更好，Jon Taylor 展示了一个很好的方法。设置种子的代码如下所示：

```
 int seed = INTEGER_VALUE;
    Random rand = new Random(seed); 
```

这样，您将永远获得相同的值集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:24:31.957

您可以为每个随机数生成器设置一个种子，从而保证对于您测试的每个实现，都会创建相同的伪随机数序列。

这将节省手动输入大量值的工作量。

**编辑以显示种子方法：**

```
Random r = new Random(56); 
```

每次使用 56 的种子创建 r 时，它都会产生完全相同的随机数序列。如果没有种子，我相信种子默认为系统时间（给人一种真正随机数的错觉）。

# svn - 如何确定几组源代码的沿袭？

> ID：14322324
> 
> 赞同：2
> 
> 时间：2013-01-14T16:20:44.363
> 
> 标签：svn, diff, legacy

我有数百组源代码，我知道文件是从一个项目复制到另一个项目的。大多数项目在事实发生很久之后就被检查到颠覆（修订历史将毫无用处）。是否有任何自动化工具可以让我弄清楚哪些项目是最古老的，以及源代码的家族树是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:41:39.393

如果代码包含日期信息 [例如。某些以前的配置管理工具的签入日期等] 或版本信息，您显然应该将其用作起点。

完成此操作后，您要做的就是将源代码集相互比较，并根据编辑的最小距离形成一个沿袭树。也就是说，对于某些定义，如果 (A,B) 的增量计数小于系统中所有其他 x 和 y 的 (A,x) 和 (y,B) 的增量计数，则 A 可能是从 B 派生的delta 在行更改、行移动、文件重命名、文件移动等方面的差异。此外，如果从 A 到 B 的更改是从 A 到 C 的更改的子集，则 B 可能是中介。

这将您的问题减少到跨系统对检测“增量计数”和/或比较增量集以进行包含。为此，您可能需要一个克隆检测器，它会告诉您代码的哪些部分是*相同*的；补语是不同的。

我不知道有没有人把它打包成一个简洁的形式以便于使用。您可能最接近的是结构克隆检测器，请参阅[http://www.comp.nus.edu.sg/~stan/PAPERS/CMCA%20Summary.pdf](http://www.comp.nus.edu.sg/~stan/PAPERS/CMCA%20Summary.pdf) 我不认为这会产生细粒度匹配，所以增量计数可能有点粗糙。

如果您想要更精细的克隆检测，并且代码主要使用一种计算机语言，您可以考虑我们的 CloneDR 和/或 SmartDifferencers，它们在从语言精确解析器中提取的抽象语法树级别比较代码。

# c# - MVC4 WebAPI 过滤器：任何方式来存根 Filter.Order？

> ID：14322325
> 
> 赞同：3
> 
> 时间：2013-01-14T16:20:48.280
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, custom-attributes, action-filter

我在 WebAPI 控制器中添加了两个过滤器：

```
[FooFilter]
[BarFilter]
public IQueryable<SomeEntity> GetSomething()
{
    ... 
```

不幸的是，它们是按随机顺序执行的。

对于 MVC 堆栈，[有`Order`](http://msdn.microsoft.com/en-us/library/system.web.mvc.filter.order%28v=vs.98%29.aspx)一个可以做的[属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.filter.order%28v=vs.98%29.aspx)

```
[FooFilter(Order = 1)]
[BarFilter(Order = 2)]
public IQueryable<SomeEntity> GetSomething()
{
    ... 
```

StrathWeb 上有[一篇](http://www.strathweb.com/2012/06/control-the-execution-order-of-your-filters-in-asp-net-web-api/)关于添加对 WebAPI 的`Order`支持的文章，这似乎已经过时并且不会为我编译。

SO的C#向导对如何实现/存根`Order`WebAPI的属性有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:17:10.083

文章中的解决方案工作正常并且可以编译。

只需确保使用正确的命名空间，因为某些类在命名空间`System.Web.Mvc`和`System.Web.Http`命名空间下具有相同的名称。

这些是您应该引用的完全限定名称：

```
System.Web.Http.Filters.IFilter
System.Web.Http.Filters.ActionFilterAttribute
System.Web.Http.Filters.FilterScope
System.Web.Http.Filters.FilterInfo
System.Web.Http.Filters.IFilterProvider 
```

另外，请记住，一旦实施，您的过滤器需要开始继承`BaseActionFilterAttribute`而不是原始的`ActionFilterAttribute`（这是您获得`Position`属性的唯一方式）。

# jekyll - 站点根目录：Github Pages vs. `jekyll --server`

> ID：14322329
> 
> 赞同：24
> 
> 时间：2013-01-14T16:20:56.633
> 
> 标签：jekyll, github-pages

当我运行`jekyll --server`我的站点时，它位于`http://localhost:4000/`，但当我部署到 GitHub 项目页面时，它位于`http://username.github.com/projectname/`。

这意味着在引用样式表和其他资源时，我不能使用绝对 URL。`index.html`当 eg和使用相同的布局时，相对 URL 会中断`2012/01/01/happy-new-year.html`。将样式表和其他资源添加到 GitHub 项目页面存储库的公认/好的方法是什么？

*交叉发布到[GitHub 问题](https://github.com/mojombo/jekyll/issues/760)。*

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-16T21:21:39.953

出现此问题是因为根目录始终是用户和项目页面中的用户 url (user.github.com)。我找到了一个解决方案：将文件中的`url`变量配置`_config.yml`到github项目页面：

```
safe: true
...
url: "http://user.github.io/project-name" 
```

然后，在布局中，使用绝对引用，使用`site.url`变量来做到这一点：

```
<link rel="stylesheet" href="{{ site.url }}/css/styles.css"> 
```

并使用以下命令运行服务器：

```
$jekyll --server --url=http://localhost:4000 
```

命令行选项以本地模式覆盖配置文件中的设置。通过这些设置，我得到了指向正确位置的所有链接，它们都托管在 github 和本地模式中。

* * *

**更新：Jekyll 1.0**由于 Jekyll 达到 1.0，上述选项`server`及其`url`各自的命令行选项`--server`已`--url`被弃用。新版本说明：

在`_config.yml`文件中，添加变量`baseurl`（不带斜杠）：

```
baseurl: "http://user.github.io/project-name" 
```

在布局或页面中，使用绝对引用，使用`site.baseurl`变量：

```
<link rel="stylesheet" href="{{ site.baseurl }}/css/styles.css"> 
```

然后，运行本地服务器（baseurl 选项故意为空）：

```
$ jekyll serve --watch --baseurl= 
```

[有关文档](http://jekyllrb.com/docs/upgrading/)更改的更多详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-12T17:05:09.783

由于`--url`命令行已被弃用，因此还有另一种解决方案。

假设您的 URL 路径`repo`在 you 中`http://name.github.io/repo`。现在在所有链接中都使用绝对 URL，例如

```
<link rel="stylesheet" href="/repo/css/syntax.css"> 
```

或链接

```
<a href="/repo/license/">License</a> 
```

`--baseurl`您现在需要的只是在本地运行时添加到命令行。

```
jekyll --server --baseurl /repo/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-29T20:19:01.947

`baseurl: '/project-name'`简而言之，回答您的问题：添加`_config.yml`

对于 CSS/JS 链接：`{{ site.baseurl }}/css/styles.css`

对于所有其他链接：`{{ site.baseurl }}{{ post.url }}`

Jeykll GH-Pages 的官方答案在这里：http: [//jekyllrb.com/docs/github-pages/](http://jekyllrb.com/docs/github-pages/)

### 摘抄：

## 项目页面 URL 结构

`gh-pages`有时在将分支推送到 GitHub 之前预览一下 Jekyll 站点会很不错。然而，GitHub 用于项目页面的类似子目录的 URL 结构使 URL 的正确解析复杂化。这是一种利用 GitHub 项目页面 URL 结构 ( `username.github.io/project-name/`) 的方法，同时保持在本地预览 Jekyll 站点的能力。

1.  在`_config.ym`l 中，将`baseurl`选项设置为`/project-name`- 注意前导斜杠和没有尾随斜杠。前任：`baseurl: '/my-proj'`

2.  当引用 JS 或 CSS 文件时，这样做：`{{ site.baseurl}}/path/to/css.css`– 注意紧跟在变量后面的斜线（就在“路径”之前）。

3.  当做永久链接或内部链接时，这样做：`{{ site.baseurl }}{{ post.url }}`- 注意两个变量之间没有斜线。

4.  最后，如果您想在使用 提交/部署之前预览您的站点`jekyll serve`，请务必将一个空字符串传递给该`--baseurl`选项，以便您可以`localhost:4000`正常查看所有内容（没有`/project-name`开头）：例如：`jekyll serve --baseurl ''`

这样，您可以从 localhost 上的站点根目录在本地预览您的站点，但是当 GitHub 从 gh-pages 分支生成您的页面时，所有 URL 都将以正确开头`/project-name`并正确解析。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-02T20:35:26.757

在最新版本的 jekyll (1.1.2) 中，我发现最好从原始版本创建一个单独的配置文件。唯一的区别？url（或 baseurl 变量）。

默认的 _config.yml 有：

```
url: myurl.com 
```

新配置（我们称之为 _preview_config.yml）：

```
url: localhost:4000 
```

这将根据您使用的配置重新分配所有绝对链接。现在使用预览配置运行服务器：

```
jekyll serve -w --config _preview_config.yml 
```

完整的解释在我的[博客上](http://www.jaredwolff.com/blog/jekyll-local-preview/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T03:05:28.753

我使用 jekyll-bootstrap 并在端口 4000 上本地部署，但我的 github 页面 url 是 user.github.com ...我认为这取决于您最初创建 repo 的方式。最初我使用了 github 提供的自动页面构建器，它以非常类似于向导的方式创建了 repo。

我只是按照以下步骤操作：

[http://jekyllbootstrap.com/](http://jekyllbootstrap.com/)

希望有帮助

# php - php连接到sql服务器

> ID：14322330
> 
> 赞同：-2
> 
> 时间：2013-01-14T16:20:57.090
> 
> 标签：php, sql-server

我正在尝试连接到我没有创建的 MS Studio 中创建的数据库。db 的创建者让我创建一个网站，我使用 PHP/HTML 完成了该网站。现在我需要将两者连接起来并将他的数据显示到页面上。

我希望在这里有一些手把手，我很新（显然），我独自在这个项目上工作，因为创建者只使用 VB。

我要做的第一件事是建立与数据库的连接，但我没有运气，我只是收到一个 500 错误，据我所知，这是一个语法错误。

[我已经在http://webcheatsheet.com/php/connect_mssql_database.php](http://webcheatsheet.com/php/connect_mssql_database.php)使用创建者发送的信息尝试了此代码，但我觉得我错过了一些东西。

提前致谢！

我正在使用此代码。

```
<?php
$myServer = "localhost";
$myUser = "your_name";
$myPass = "your_password";
$myDB = "examples"; 

//connection to the database
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
or die("Couldn't connect to SQL Server on $myServer"); 

//select a database to work with
$selected = mssql_select_db($myDB, $dbhandle)
or die("Couldn't open database $myDB"); 

//declare the SQL statement that will query the database
$query = "SELECT id, name, year ";
$query .= "FROM cars ";
$query .= "WHERE name='BMW'"; 

//execute the SQL query and return records
$result = mssql_query($query);

$numRows = mssql_num_rows($result); 
echo "<h1>" . $numRows . " Row" . ($numRows == 1 ? "" : "s") . " Returned </h1>"; 

//display the results 
while($row = mssql_fetch_array($result))
{
echo "<li>" . $row["id"] . $row["name"] . $row["year"] . "</li>";
}
//close the connection
mssql_close($dbhandle);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:11:18.257

除了数据库名称错误之外，服务器似乎缺少驱动程序（由数据库管理员解决）。

现在开始构建 html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:26:13.077

```
 mssql_get_last_message() 

Try this to get the error message to see why you cant connect to the db server.
something like
if(!$connect) // This is your db handler
{
die('I cannot connect because:'.$mssql_get_last_message());
} 
```

# magento - Magento：在集合上设置 LIMIT

> ID：14322333
> 
> 赞同：38
> 
> 时间：2013-01-14T16:21:17.110
> 
> 标签：magento, collections

我试图找出的问题是我们如何为集合设置限制，我在 Google 上找到的答案仅适用于具有 setPage($pageNum, $pageSize) 的目录。这对任何其他系列都不起作用。
请参阅下面的答案。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-14T17:01:47.883

做这件事有很多种方法：

```
$collection = Mage::getModel('...')
            ->getCollection()
            ->setPageSize(20)
            ->setCurPage(1); 
```

将获得前 20 条记录。

这是另一种可能更具可读性的方式：

```
$collection = Mage::getModel('...')->getCollection();
$collection->getSelect()->limit(20); 
```

这将调用 Zend Db 限制。您可以将偏移量设置为第二个参数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-14T16:21:17.110

方法是查看`code/core/Mage/Catalog/Model/Resource/Category/Flat/Collection.php`Magento 1.7.2 中第 380 行的代码`setPage($pageNum, $pageSize)`

```
 $collection = Mage::getModel('model')
     ->getCollection()
     ->setCurPage(2) // 2nd page
     ->setPageSize(10); // 10 elements per pages 
```

我希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-26T07:38:02.087

订单收集限制：

```
$orderCollection = Mage::getResourceModel('sales/order_collection'); 
$orderCollection->getSelect()->limit(10);

foreach ($orderCollection->getItems() as $order) :
   $orderModel = Mage::getModel('sales/order');
   $order =   $orderModel->load($order['entity_id']);
   echo $order->getId().'<br>'; 
endforeach; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-20T06:35:41.687

你也可以实现这个：- **setPage(1, n);** 其中，n = 任意数。

```
$products = Mage::getResourceModel('catalog/product_collection')
                ->addAttributeToSelect('*')
                ->addAttributeToSelect(array('name', 'price', 'small_image'))
                ->addFieldToFilter('visibility', Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH) //visible only catalog & searchable product
                ->addAttributeToFilter('status', 1) // enabled
                ->setStoreId($storeId)
                ->setOrder('created_at', 'desc')
                ->setPage(1, 6); 
```

# jquery - 1.7.2 中的 jQuery 事件委托

> ID：14322342
> 
> 赞同：0
> 
> 时间：2013-01-14T16:22:12.623
> 
> 标签：jquery, event-delegation, jquery-on

有没有办法使用 jQuery 委托事件，该事件将对应于页面上与选择器匹配的所有元素，而不是委托 from `$(document)`？

由于这可能措辞不佳，因此问题如下：

过去`jQuery.live`，所有与选择器匹配的元素都有委托事件。这被`jQuery.delegate`哪个将特定上下文选择器中的事件委托给其子级所取代，而后者又被 取代`jQuery.on`，后者实际上做同样的事情，但在幕后有不同的位（我想）。

我想要做的是安全地为`div.foo`我页面上的每个页面添加一个事件处理程序，无论它可能存在于何处或何时存在。根据文档和实证研究，以下内容只会绑定到`.foo`脚本运行时存在的元素。由于`.foo`稍后可能会在页面上放置元素的代码，因此这并不完全有效。

```
jQuery('.foo').on('click', handler); 
```

由于`live`已弃用（可能已删除？），我试图不使用它，但我能想出的唯一解决方案是

```
jQuery(document).on('click', '.foo', handler); 
```

但这不是`live`最初在幕后所做的吗？更重要的是，有什么重要的理由*不*这样做吗？

我们专门使用版本 1.7.2，但通用 jQuery 答案也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:28:34.277

您是正确的，对文档的绑定（如下所示）正是这样`live()`做的：

```
jQuery(document).on('click', '.foo', handler); 
```

这不好的原因是它的性能不是很好。每次您在任何地方单击时，都会`document`检查它是否在委托元素上。

更好的方法是使用一个元素来代替与`document`动态附加的元素最近的父元素，但该元素在页面加载时可用。即使这是一个顶级容器，与将所有内容附加到`document`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:28:47.447

事件从它们的源冒泡到它们被委派的任何东西，所以你应该在最低公共父级的任何级别使用 jquery().on。如果那是文件，那就这样吧。

否则，如果您的`.foo`项目总是在一个`.foocontainer`（或某物）内创建，那么您可以在选择器中使用它，即使其中有多个 - 您最终只是附加。

我认为委派回文档的问题在于它可能需要事件冒泡很多次，在此过程中会产生额外的开销，因此最好将事件委派到尽可能靠近源的位置。

# java - 如何使用 Java 中的 stringreader 获取字符串中的下一个字符？

> ID：14322345
> 
> 赞同：1
> 
> 时间：2013-01-14T16:22:20.247
> 
> 标签：java, string, char, stringreader

考虑这段代码：

```
public static void main (String[] args) {

    String name = "(My name is Bob)(I like computers)"

    StringReader s = new StringReader(name);

    try {
        // This is the for loop that I don't know 
        for () {
            String result = "";  
            // Here the char has to be appended to the String result.
        }
        System.out.println("The string is: " + result);

    } catch (Exception e) {
        e.toString();
    }
} 
```

我正在寻找的是一个 for 循环，它首先查看当前位置的字符，然后如果该字符不是“）”，则将其附加到字符串中。但是，字符“)”也应该附加到字符串中。在此示例中，输出应为：

字符串结果是：（我的名字是 Bob）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:28:45.363

下面是一个可行的解决方案。

```
import java.io.StringReader;

public class Re {
public static void main (String[] args) {
String name = "(My name is Bob)(I like computers)";

StringReader s = new StringReader(name);

try {
    // This is the for loop that I don't know
    String result = "";
    int c = s.read();
    for (;c!= ')';) {
        result = result + (char)c;
        // Here the char has to be appended to the String result.
        c = s.read();
    }
    result = result + ')';
    System.out.println("The string is: " + result);

} catch (Exception e) {
    e.toString();
}

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:33:52.350

根据您的评论，我相信您不需要解析整个字符串，因此我建议您使用以下答案

```
 String name = "(My name is Bob(I like computers";
    int firstCloseBracket = name.indexOf(")");
    String result=null;
    if(-1!=firstCloseBracket){
        result = name.substring(0,firstCloseBracket+1);
    }

    System.out.println(result); 
```

希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:14:42.547

```
public static void main(String[] args) {
    String name = "(My name is Bob)(I like computers)";
    String result = "";
    for (int i = 0; i < name.length(); i++) {
        result = result + name.charAt(i);
        if (name.charAt(i) == ')') {
            System.out.println(result);
            result = "";
        }
    }

} 
```

试试这个。这是你想做的吗？如您在上面的评论中所写，这将打印“）”之前的子字符串。

# sql - SQL 查询，加入返回列表

> ID：14322351
> 
> 赞同：3
> 
> 时间：2013-01-14T16:22:32.977
> 
> 标签：sql, join

我有三张桌子：

*   **tblEmployee**

    employeeId int PK

    名称 varchar(50)

*   **技能**

    技能ID int PK

    姓名

*   **tblEmployeeSkill**

    员工技能智力PK

    employeeId int FK

    SkillId int FK

我想运行一个查询，该查询将返回所有技能以及特定用户是否拥有这些技能。IE：

SQL| 不

C# | 是的

红宝石 | 不

其中用户 ID = 1

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:29:14.523

针对技能列表的一个简单的 LEFT JOIN 就足够了。如果员工没有与该技能匹配的条目，则该条目的主键将为 NULL：

```
SELECT tblSkill.name, 
       CASE 
         WHEN tblEmployeeSkill.employeeSkill IS NULL THEN 'no' 
         ELSE 'yes' 
       END as hasSkill
FROM tblSkill
LEFT JOIN tblEmployeeSkill 
  ON tblSkill.skillId = tblEmployeeSkill.skillId 
  AND tblEmployeeSkill.employeeId = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:27:26.727

据我了解，您希望将**所有技能分发给所有用户**。这就是为什么下面的查询有一个产生笛卡尔积的子查询的原因。产品的结果然后与表连接`tblEmployee`，`tblSkill`以便能够获得它们各自的名称。

最后一部分是`LEFT JOIN`检查用户的某种技能是否存在于桌面上`tblEmployeeSkill`。当结果为`NULL`时，仅表示用户还没有该技能。

```
SELECT  y.name EmployeeName,
        z.name SkillName,
        CASE WHEN xx.skillID IS NULL
            THEN 'NO'
            ELSE 'YES'
        END status
FROM
    (
        SELECT  a.employeeID, b.skillID
        FROM    tblEmployee a 
                CROSS JOIN tblSkill b
    ) x
    INNER JOIN  tblEmployee y
        ON x.employeeID = y.employeeID
    INNER JOIN tblSkill z
        ON x.skillID = z.skillID
    LEFT JOIN tblEmployeeSkill xx
        ON  x.employeeID = xx.employeeID AND
            x.skillID = xx.skillID
-- WHERE   x.employeeId = 1   -- uncomment this if you
                              -- want to select only one user 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5376c/8)

# ruby-on-rails-3 - Capybara、OmniAuth 和 Rolify：在登录时赋予用户角色

> ID：14322352
> 
> 赞同：0
> 
> 时间：2013-01-14T16:22:34.787
> 
> 标签：ruby-on-rails-3, rspec, capybara, bdd

我正在尝试使用 Capybara 为我的应用程序编写一些集成测试。要让应用程序显示正确的输出，登录用户必须具有特定角色。这就是我卡住的地方。

现在，登录模拟看起来像这样。在`spec_helper.rb`我有：

```
# Trying to configure Capybara to play nice with Omniauth
Capybara.default_host = 'http://example.org'

# Enable omniauth testing mode
OmniAuth.config.test_mode = true

OmniAuth.config.mock_auth[:google] = OmniAuth::AuthHash.new({
                                                                :provider => 'google',
                                                                :uid => '1337',
                                                                :info => {
                                                                    'name' => 'JonnieHallman',
                                                                    'email' => 'jon@test.com'
                                                                }
                                                            }) 
```

然后，在测试本身中，让用户登录我只是这样做：

```
 before do
    visit root_path
    click_link "Log In"
  end 
```

现在，`save_and_open_page`显示用户确实已登录，但正在查看不正确的输出，因为他们没有角色。

我怎样才能给这个模拟用户一个角色？我应该什么时候这样做？（显然，在他们登录之前——但我认为现在的结构方式是，用户在登录之前不存在于数据库中。对吧？）

任何提示都将受到欢迎。

# iphone - 这是从详细视图返回视图控制器的最有效方式吗？

> ID：14322353
> 
> 赞同：0
> 
> 时间：2013-01-14T16:22:38.593
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller

这是从详细视图返回视图控制器的最有效方式吗？

```
 // back button method
-(IBAction)BtnBack_Clicked:(id)sender{

    [self.navigationController popViewControllerAnimated:YES];

} 
```

目前需要 2 或 3 秒才能返回列表视图（带有行列表的表视图），我正试图弄清楚为什么会这样。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:25:18.437

是的。

当旧的视图控制器再次显示时，`viewWillAppear`被调用，我猜你正在用这个方法加载/重新加载你的表视图。开始在那里寻找如何加快速度。

它也可能在您要离开的视图控制器中`viewWillDisappear`，但由于您在另一个中提到了表格视图，我猜这就是问题所在。

如果您需要的不仅仅是一般术语的帮助，您需要发布一些视图控制器代码。

# ruby-on-rails - Rails AssetNotPrecompiledError 即使资产正在预编译

> ID：14322356
> 
> 赞同：3
> 
> 时间：2013-01-14T16:22:41.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline

我是 Ruby 和 Rails 的新手，我已经考虑了好几天了，还没有找到解决方案。我的项目在我的开发环境中运行良好，但在我的 alpha 或生产环境中却不行。

我的 app/assets/stylesheets 文件夹中有以下样式表：

```
app
--> assets
  --> stylesheets
    --> modules
      --> _header.css.scss
      --> _footer.css.scss
    --> home.css.scss
    --> user.css.scss
    --> help.css.scss 
```

当我尝试使用我的 alpha 环境（即通过运行`rails s --environment=alpha`）时，我收到此错误：

```
Sprockets::Helpers::RailsHelper::AssetPaths::AssetNotPrecompiledError in Home#index
Showing /app/views/home/index.haml where line #1 raised:
home.css isn't precompiled 
```

我通过使用将该样式表添加到我的视图中`stylesheet_link_tag('home')`。

我的`alpha.rb`文件有这个：

```
config.assets.compile = false
config.assets.precompile += %w( help.css home.css users.css )
config.assets.compress = true
config.assets.debug = false 
```

我正在运行预编译任务（即`rake assets:precompile RAILS_ENV=alpha`）。该任务似乎工作正常。这是输出：

```
rake assets:precompile RAILS_ENV=alpha --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/ruby-1.9.3-p286/bin/rake assets:precompile:all RAILS_ENV=alpha RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Invoke rails_admin:disable_initializer (first_time)
** Execute rails_admin:disable_initializer
[RailsAdmin] RailsAdmin initialization disabled by default. Pass SKIP_RAILS_ADMIN_INITIALIZER=false if you need it.
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary 
```

我的文件确实最终在 中`/public/assets/`，并且`/public/assets/manifest.yml`正在创建并且我的文件在其中列出：

```
application.css: application.css
help.css: help.css
home.css: home.css
users.css: users.css 
```

如果我尝试访问服务器（通过转到`http://localhost:3000`），我会收到前面提到的`AssetNotPrecompiledError`错误`home.css`；但是，`http://localhost:3000/assets/home.css`确实返回样式表。

AFAIK 这个错误正在生成，因为 Rails 不知道它`home.css`的位置；但是，它列在 上`manifest.yml`，我认为它应该在那里寻找它。

如果您需要更多信息，我很乐意提供。这让我发疯！

- 编辑 -

根据 Qumara SixOneTour 的要求，这是我的 application.css.scss：

```
@import 'modules/header';
@import 'modules/footer';

body {
    background: $bgColor asset-url('bgFull.jpg', image) repeat-x center top;
}

div.main {
    padding: 35px 30px;
    background: $whitweColor;
    margin-top: -3px;
    padding-bottom: 30px;
    @include border-bottom-left-radius(5px);
    @include border-bottom-right-radius(5px);

    h1 {
        font-size: 2em;
    }

    h2 {
        font-size: 1.5em;
    }
}

@media only screen and (max-width: 767px) {
  body {
        background: $bgColor asset-url('bg.png', image) repeat-x;
    }
} 
```

基本上，我不使用清单，而是在每个视图中加载单独的 css 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:45:17.520

我建议您坚持有关清单文件的默认设置。它们是资产管道的管理点。在您的情况下，有几件事要做：

*   将任何`css`定义移动`application.css`到一个单独的 css 文件中`app/assets/stylesheets`

*   以“清单”样式包含您的部分 - 这是一个奇怪的部分，您可以告诉行已注释，但它们没有。像这样 ：

    ```
    *= require_self  
    *= require jquery 
    *= require jquery_ujs
    *= require_tree . 
    ```

*   如果您正在`assets/stylesheets`使用新目录进行扩展，就像您尝试做的那样，最好这样提及`application.rb`：

    ```
    config.assets.paths << Rails.root.join("app", "assets", "styleshhets", "modules") 
    ```

最后一个建议：删除你`public/assets`的开发环境。它使事情变得无用复杂。只是依靠`app/assets`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T17:39:24.343

在您的`alpha.rb`设置`config.assets.compile`中`true`预编译资产

# django - 如何以我自己的 django 模型形式使用 django-iban？

> ID：14322365
> 
> 赞同：1
> 
> 时间：2013-01-14T16:23:26.080
> 
> 标签：django

如何将 IbanAccountField 导入我的模型？

[https://github.com/benkonrath/django-iban](https://github.com/benkonrath/django-iban)

模型.py

```
class Money(models.Model):
    number = models.IbanAccountField(max_length=50) 
```

表格.py

```
class MoneyForm(ModelForm):
    class Meta:
        model = Money 
```

我的错误：**AttributeError：“模块”对象没有属性“IbanAccountField”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:46:11.743

`from django_iban.fields import IbanAccountField`

```
class Money(models.Model):
    number = IbanAccountField(max_length=50) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T21:26:13.183

在 django_iban >= 0.2.0 中命名的字段已更改，因此您现在必须执行以下操作：

```
from django_iban.fields import IBANField

class Customer(models.Model):
    iban = IBANField() 
```

注意：您不需要指定`max_length=50`，因为 IBAN 最多只有 34 个字符，并且该字段已经处理了这一点。有关更多信息，请参见维基百科页面：

[https://en.wikipedia.org/wiki/International_Bank_Account_Number](https://en.wikipedia.org/wiki/International_Bank_Account_Number)

# php - 在不终止 PHP 会话的情况下创建 .htaccess 重写

> ID：14322366
> 
> 赞同：0
> 
> 时间：2013-01-14T16:23:26.520
> 
> 标签：php, .htaccess, url, session, rewrite

我的网站有这样的结构：

```
index.php
contact/
    index.php
news/
    index.php
admin/
    index.php
    [...]
vip/
    index.php
    [...] 
```

我的问题是我不需要任何包含我的文件夹名称（联系人、新闻、vip、管理员）的重定向。

我想做一个解决方案，让一个人输入您的用户名，如 www.site.com/your_user_name，然后 .htaccess 重定向到 function.php 文件以检查它是否是一个有效的用户名，以便在我的网站中显示额外的内容。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:32:27.190

尽管尚不完全清楚您的问题是什么，但您应该意识到您的重写条件仅适用于它之后的重写规则，因此您的文件读取为：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^vip/$ vip/index.php [QSA]

RewriteRule ^admin/$ admin/index.php [QSA]

RewriteRule ^([^-]+)/$ /initial/function.php?stat=$1&%{QUERY_STRING} [QSA] 
```

您可能希望将条件放在每个重写规则之前：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^vip/$ vip/index.php [QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^admin/$ admin/index.php [QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^-]+)/$ /initial/function.php?stat=$1 [QSA] 
```

**编辑：**根据您的评论，您似乎只需要：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^\w+$ /function.php?user_name=$1 [QSA]    // if a username can only contain a-z, 0-9 and _ 
```

# css-float - 表格内的样式 div

> ID：14322367
> 
> 赞同：1
> 
> 时间：2013-01-14T16:23:27.640
> 
> 标签：css-float

我有以下内容：

```
<html>
<head>
<style type="text/css">
.campo {
  text-align : right;
  float : left;
}
</style>
</head>
<body>
  <table border="1">
    <tr style="text-decoration:line-through;">
      <td>
        <div class="campo">campo1</div>
      </td>
      <td>
        <div class="campo">campo2</div>
      </td>
    </tr>
  </table>
</body>
</html> 
```

我无法将样式应用于 tr。如果我删除浮动属性，没问题。因为？ [http://jsfiddle.net/ZxQjE/](http://jsfiddle.net/ZxQjE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:46:15.387

根据[https://bugzilla.mozilla.org/show_bug.cgi?id=403526](https://bugzilla.mozilla.org/show_bug.cgi?id=403526)，以下适用于**text-decoration**：

> 但是，它不会进一步传播到浮动和绝对定位的后代，也不会传播到 'inline-table' 和 'inline-block' 后代的内容。

显然这是设计使然。

# ruby-on-rails-3 - Rails ActiveRecord...如何加入

> ID：14322370
> 
> 赞同：1
> 
> 时间：2013-01-14T16:23:35.180
> 
> 标签：ruby-on-rails-3, activerecord, join

对不起我的初学者问题，但我正在尝试学习 RoR。在 Rails 3.2 中，我声明：

```
class Project < ActiveRecord::Base
   attr_accessible :name, :description
   has_many :subprojects
end

class SubProject < ActiveRecord::Base
   attr_accessible :id_name, :description, :num_alloc, :project_id
   belongs_to :projects
end 
```

如何在视图中显示具有属性 id_name、num_alloc（来自 SubProject）和 name（来自 Project）的表

我怎样才能加入？在控制器中，如果我做：

```
@results=  SubProject.joins('LEFT OUTER JOIN.......) 
```

这个，只返回 SubProject 属性对吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:35:45.133

有一种东西叫做急切加载。当您使用连接进行查询并创建对象时，会预先填充这些关联。例如：

```
@results = SubProject.joins(:project) 
```

在您的视图或任何其他地方，如果您在子项目中调用项目对象，您将可以直接访问其内容，而无需进行其他查询。

```
@results.each do |r|
  puts r.project.name # The project is prepopulated from the db
end 
```

如果您不关心性能，您可以只检查子项目并为每个子项目查询里面的项目。

```
@results = SubProject.all

@results.each do |r|
  puts r.project.name # This will make other query
end 
```

# ios - Restkit：重试失败的请求

> ID：14322371
> 
> 赞同：1
> 
> 时间：2013-01-14T16:23:36.153
> 
> 标签：ios, web-services, delegates, restkit

使用 Restkit，我想重试失败的请求。我正在尝试从委托方法执行此操作，如下所示：

```
-(void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error{
    NSLog(error.domain);
    NSLog([NSString stringWithFormat:@"%d",error.code]);
    NSLog(error.localizedDescription);
    NSLog(error.localizedFailureReason);
    [request cancel];
    [request reset];
    [request send];
} 
```

但是，我收到以下错误：

```
2013-01-14 11:19:29.423 Mobile_ACPL[7893:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Attempting to add the same request multiple times' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:40:02.333

该错误消息意味着`request`您正在尝试（重新）发送仍在某些内部队列中。可能，给系统更多的时间来处理`cancel`，并`reset`可以使事情正常进行。

试试这个：

```
-(void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error{

  [request cancel];
  [request reset];

  dispatch_async(dispatch_get_current_queue(), ^() {
      [request send];
  }
} 
```

希望能帮助到你。如果这不起作用，那么可能会延迟一点（重新）发送可能会有所帮助。这相当于做（延迟 1.0 秒）：

```
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC * 1.0),
               dispatch_get_current_queue(),  ^() {
      [request send];
  }); 
```

或者`copy`完全提出请求并发送。

# r - systemfit 中的不等式约束

> ID：14322372
> 
> 赞同：2
> 
> 时间：2013-01-14T16:23:38.113
> 
> 标签：r

我正在尝试使用 估计联立方程组`systemfit`，但似乎无法将不等式指定为约束。我已经使用`airquality`数据集重新创建了问题，将不等式添加到`restrict.matrix`参数时会出现问题。有什么解决方法可以让这个例子工作吗？

```
require(systemfit)

lagAQ <- rbind(NA, airquality[1:nrow(airquality)-1,])
colnames(lagAQ) <- paste("lag", colnames(lagAQ), sep = "")
data <- data.frame(airquality, lagAQ)

eqOzone <- Ozone ~ lagOzone + lagWind + lagTemp
eqWind  <- Wind ~ lagOzone + lagWind + lagTemp
eqTemp  <- Temp ~ lagOzone + lagWind + lagTemp

airSystem <- list(ozone = eqOzone, wind = eqWind, temp = eqTemp)

constr <- c("ozone_(Intercept) = 0",
            "wind_(Intercept) = 0",
            "temp_(Intercept) = 0",

            "ozone_lagOzone > 0",
            "ozone_lagWind > 0",
            "ozone_lagTemp > 0",

            "ozone_lagOzone + wind_lagOzone + temp_lagOzone = 1",
            "ozone_lagWind + wind_lagWind + temp_lagWind = 1",
            "ozone_lagTemp + wind_lagTemp + temp_lagTemp = 1"
            )

airModel <- systemfit(airSystem, restrict.matrix = constr, data = data) 
```

# google-bigquery - BigQuery 在小表上为 COUNT(*) 提供“响应太大”

> ID：14322373
> 
> 赞同：1
> 
> 时间：2013-01-14T16:23:41.993
> 
> 标签：google-bigquery

我有一个包含以下 7 个每日汇总表的数据集，每个汇总表都很小：

```
summary_broad_20130104_hourly         199 k rows    8395 KB
summary_broad_20130105_hourly         198 k rows    8347 KB
summary_broad_20130106_hourly         197 k rows    8319 KB
summary_broad_20130107_hourly         194 k rows    8190 KB
summary_broad_20130108_hourly         197 k rows    8338 KB
summary_broad_20130109_hourly         201 k rows    8490 KB
summary_broad_20130110_hourly         202 k rows    8534 KB 
```

`select count(*)`在对所有这些表（04-10）进行简单操作时，我得到“响应太大” ：

```
$ bq query "select count(*) from summary_broad_20130104_hourly,summary_broad_20130105_hourly,summary_broad_20130106_hourly,summary_broad_20130107_hourly,summary_broad_20130108_hourly,summary_broad_20130109_hourly,summary_broad_20130110_hourly"
BigQuery error in query operation: Error processing job '987928363675:job_bb504ce6ea31416db3f8762d3c244d93': Response too large to return. 
```

但是，如果我将查询限制为表 04-06，我会得到成功的响应：

```
$ bq query "select count(*) from summary_broad_20130104_hourly,summary_broad_20130105_hourly,summary_broad_20130106_hourly"
+--------+
|  f0_   |
+--------+
| 594721 |
+--------+ 
```

但是，如果我扩展到表 04-07，那么我可以再次重现该错误：

```
$ bq query "select count(*) from summary_broad_20130104_hourly,summary_broad_20130105_hourly,summary_broad_20130106_hourly,summary_broad_20130107_hourly"
BigQuery error in query operation: Error processing job '987928363675:job_22ea222b4b0549a98bb9e90f1a2ac539': Response too large to return. 
```

这是一个错误，还是我做错了什么？查询的数据很小（在 04-07 案例中约为 40MB），我希望它`select count(*)`是一个节点本地聚合，中间数据量可以忽略不计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:55:38.107

This is, in fact, a bug. We're investigating it, can repro it locally, and hope to have a fix soon.

# java - 线程错误（jdom.jar（打开的文件太多））

> ID：14322374
> 
> 赞同：1
> 
> 时间：2013-01-14T16:23:43.417
> 
> 标签：java, multithreading, exception, struts2

我正在做一个线程来在数据库中创建一些插入，而 Ajax 方法每 0.5 秒向线程发送一次请求以检查进程。过了一会儿，我在 catalina 输出中得到了下一个异常，并且线程死了。

任何人都可以解释我做错了什么？

我正在使用带有 struts 2.0 的 tomcat 7。

```
java.lang.reflect.InvocationTargetException
at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.googlecode.jsonplugin.JSONWriter.bean(JSONWriter.java:274)
at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:161)
at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:115)
at com.googlecode.jsonplugin.JSONWriter.array(JSONWriter.java:509)
at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:143)
at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:115)
at com.googlecode.jsonplugin.JSONWriter.add(JSONWriter.java:383)
at com.googlecode.jsonplugin.JSONWriter.bean(JSONWriter.java:275)
at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:161)
at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:115)
at com.googlecode.jsonplugin.JSONWriter.add(JSONWriter.java:383)
at com.googlecode.jsonplugin.JSONWriter.bean(JSONWriter.java:275)
at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:161)
at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:115)
at com.googlecode.jsonplugin.JSONWriter.map(JSONWriter.java:430)
at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:140)
at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:115)
at com.googlecode.jsonplugin.JSONWriter.add(JSONWriter.java:383)
at com.googlecode.jsonplugin.JSONWriter.bean(JSONWriter.java:275)
at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:161)
at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:115)
at com.googlecode.jsonplugin.JSONWriter.write(JSONWriter.java:82)
at com.googlecode.jsonplugin.JSONUtil.serialize(JSONUtil.java:98)
at com.googlecode.jsonplugin.JSONResult.execute(JSONResult.java:179)
at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:362)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:266)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:93)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:104)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at com.humanlike.web.interceptors.LoginInterceptor.intercept(LoginInterceptor.java:57)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:468)
at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:636)

Caused by: java.io.FileNotFoundException: /usr/local/tomcat_demo/apache-tomcat-7.0.22/webapps/demo2/WEB-INF/lib/jdom.jar (Too many open files)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:137)
at java.io.FileInputStream.<init>(FileInputStream.java:96)
at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:87)
at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:178)
at java.net.URLConnection.getContent(URLConnection.java:705)
at java.net.URL.getContent(URL.java:1043)
... 92 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:35:06.390

您正在使用 Struts 2 并通过 Ajax 从客户端发送请求。检查您是否真的需要为每个请求创建单独的线程。

Struts 2 为每个新请求创建一个新的动作对象。所以我认为你不需要创建线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:28:36.207

在 linux 中任何进程可以打开多少个文件是有限制的。linux 中的文件在某种程度上比 windows 中的要宽（除了普通文件，还有套接字、管道......）。在您的代码中的某处，您打开了太多文件，或者可能是套接字。因此，请尝试找出资源泄漏的位置。

# android - Android 蓝牙聊天示例 - 同步 onPause()

> ID：14322380
> 
> 赞同：3
> 
> 时间：2013-01-14T16:23:56.843
> 
> 标签：android, multithreading, bluetooth, synchronization

刚刚进入Android开发。有相当多的 Java 经验，包括线程。我一直在检查 BluetoothChat 示例，我很困惑地看到 onPause() 和 onResume() 方法是同步的。由于这两个都只在 UI 线程上执行，我不明白为什么需要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:19:52.497

[关于进程和线程](http://developer.android.com/guide/components/processes-and-threads.html)的 android 开发人员文档很好地解释了应用程序生命周期的工作原理以及线程适合的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:35:49.707

仅仅因为 onPause() 只在主线程上运行并不意味着其他线程不能同时运行。这只是确保线程安全，以防另一个线程正在运行并想要访问 onPause() 将使用/修改的变量。

在我看来，唯一可以阻止的是，如果有人试图在活动完全初始化之前完成活动（即完成调用 onResume()）。我的猜测是，它会阻止您或任何其他线程在活动进入运行状态之前完成活动。

另请参阅此[问题](https://stackoverflow.com/questions/8755677/bluetoothchat-synchronized-onresume-activity-lifecycle-method-why)。

# hadoop - MapReduce 作业输出排序顺序

> ID：14322381
> 
> 赞同：10
> 
> 时间：2013-01-14T16:24:04.193
> 
> 标签：hadoop, mapreduce

我可以在我的 mapreduce 作业中看到 reducer 部分的输出是按键排序的。

因此，如果我将 reducer 的数量设置为 10，则输出目录将包含 10 个文件，并且每个输出文件都有一个排序数据。

我把它放在这里的原因是，即使所有文件都对数据进行了排序，但这些文件本身没有排序.. 例如：在某些情况下，part-000* 文件从 0 开始并以 zzzz 结束，假设我是使用 Text 作为键。

我假设即使在文件中也应该对文件进行排序，即文件 1 应该有 a 并且最后一个文件部分--00009 应该有带有 zzzz 或 atleaset > a 的条目

假设我有所有字母均匀分布的键。

有人可以解释一下为什么会出现这种行为

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T16:56:32.330

您可以使用以下方法实现全局排序的文件（这就是您基本上想要的）：

1.  在 mapreduce 中只使用一个 reducer（坏主意！这在一台机器上投入了太多工作）
2.  编写自定义分区程序。Partioner 是在 mapreduce 中划分键空间的类。默认的partioner（[Hashpartioner](http://hadoop.apache.org/docs/r0.23.0/api/org/apache/hadoop/mapreduce/lib/partition/HashPartitioner.html)）将key空间平均划分为reducer的个数。查看[此](http://www.ashishpaliwal.com/blog/2012/05/hadoop-recipe-implementing-custom-partitioner/)示例以编写自定义分区器。

3.  使用 Hadoop Pig/Hive 进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-03T15:25:31.080

**总排序**

来自特定 Key 的所有键值对都将到达特定的 reducer。这将通过 Mapper 级别的分区器发生。Mapper 级别的组合器将充当半减速器并将特定键的值发送到减速器。**HashPartitioner**是决定 reducer 数量的最佳分区器。

reducer 输出将是一个文件，所有输出都根据键排序。

**二次排序**

用于定义映射输出键的排序方式。它在映射器级别工作。在这种情况下，我们将能够控制值与键的顺序。也就是说，可以对两个或多个字段值进行排序。

看看[总订单排序](https://chasebradford.wordpress.com/2010/12/12/reusable-total-order-sorting-in-hadoop/)和[二级排序](http://blog.zaloni.com/secondary-sorting-in-hadoop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T05:09:57.687

```
Q :all the files have sorted data but these files itself are not sorted.. 
```

Ans :默认使用**自定义 Hashpartitioner**对中间输出（来自映射器）进行分区。

前任：

```
If the intermediate values are 3,4,5,6,7,8,9,10,11
Then the data will be partitioned into (lets say) Reducer: 
R1{7,4,10}
R2{5,11,8}
R3{9,6,3} 
```

所以现在平面文件将有

```
Part-00000 {4,,7,11}
Part-00001 {5,8,11}
Part-00002 {3,6,9} 
```

如果您正在寻找按值排序：[这](http://www.michael-noll.com/blog/2011/04/09/benchmarking-and-stress-testing-an-hadoop-cluster-with-terasort-testdfsio-nnbench-mrbench/)是答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-21T21:47:37.067

Hive order by 使用单个reducer，因此您可以使用distribute by/ sort by，然后从排序表中您可以从表中插入覆盖本地 - 将数据写入文件

# java - 使用 SpringMVC 表单：选择将逗号分隔的值绑定到多个下拉列表

> ID：14322390
> 
> 赞同：1
> 
> 时间：2013-01-14T16:24:33.443
> 
> 标签：java, jsp, spring-mvc, jstl

我正在设计一个 jsp 页面，用户可以在其中从下拉列表中选择值，例如：

第 1 行：选择“下拉菜单”

第2行：选择“下拉菜单”

第3行：选择“dropdown1”“dropdown2”

在哪里：

下拉值是 {1,2,3,4,5,6,7}

用户可以从上面的行中选择值并保存表单。下次用户查看页面并从数据库中检索保存的值时，我想在下拉列表中显示它们。为此，我使用 Spring MVC 表单：选择自动绑定

```
<form:select id="${id}" path="Mappings[${index}].userSetting">
            <c:forEach var="item" items="${dropdownValues}">
                <form:option value="${item.value}"><spring:eval expression="item" /></form:option>
            </c:forEach>
</form:select> 
```

该代码适用于 Row1 和 Row2，它们只有 1 个下拉列表可以绑定。但在第 3 行的情况下， Mappings[${index}].userSetting 返回诸如“2,3”之类的值（而不是单个值），这些值来自 dropdownValues 列表，但以逗号分隔。在这种情况下，出于明显的原因，Spring MVC form:select 无法从下拉列表中选择值，因为在任一下拉列表中都找不到“2,3”。我要做的是拆分值，以便从“2,3”中选择值“2”和“3”，使得 Row3 看起来像：

之前：选择“dropdown1”“dropdown2”之后：选择“2”“3”

有没有人对如何做到这一点有建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:01:57.693

你有没有想过 [fn:split()](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/split.fn.html)函数。

这是您可以做什么的示例：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<c:set var="row3Value" value="${fn:split(model.getMappings()[${index}].userSetting, ',')}" />

<form:select id="${id}" path="Mappings[${index}].userSetting">
    <c:forEach var="item" items="${dropdownValues}">
        <c:choose>
            <c:when test="${row3Value[0] eq ${item.value}}">
                <form:option selected="true" value="${item.value}"><spring:eval expression="item" /></form:option>
            </c:when>

            <c:otherwise>
                <form:option value="${item.value}"><spring:eval expression="item" /></form:option>
            </c:otherwise
        </c:choose> 
    </c:forEach>
</form:select> 
```

# c# - MSBuild 复制动态生成的文件作为项目依赖项的一部分

> ID：14322391
> 
> 赞同：22
> 
> 时间：2013-01-14T16:24:37.547
> 
> 标签：c#, msbuild, build-process

我有一个自定义 msbuild 任务，它正在生成一些输出文件到 ProjectA 的输出目录 ($(TargetDir))。当前代码是这样的：

```
<MyCustomTask ...>
   <Output TaskParameter="OutputFiles" ItemName="FileWrites"/>
</MyCustomTask> 
```

A ProjectB 正在引用*ProjectA*，但问题是在构建 ProjectB 时，MyCustomTask 生成的文件不会复制到 ProjectB 的输出目录中。

我们如何获取动态生成的附加文件以作为 MSBuild 项目依赖项的一部分进行复制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T13:45:28.867

我终于设法自动执行来自*项目 B*的副本，而无需修改它。IIya 离解决方案不远，但事实是我无法静态生成，因为使用 MyCustomTask从*项目 A生成的文件列表是动态的。*在深入挖掘之后`Microsoft.Common.targets`，我发现 ProjectB 将通过调用 target来获取*Project A*`GetCopyToOutputDirectoryItems`的输出列表。此目标依赖于其`AssignTargetPaths`本身依赖于目标列表属性`AssignTargetPathsDependsOn`。

因此，为了动态生成内容并通过标准项目依赖项自动复制此内容，我们需要在两个不同的地方挂钩*项目 A ：*

*   `AssignTargetPathsDependsOn`因为它是由*项目 B*通过 GetCopyToOutputDirectoryItems在*项目 A*上间接调用的。并且它在被调用时被*项目 A*`PrepareResource`间接调用。在这里，我们只是输出将生成（由*Project A*）或由*Project B*使用的文件列表。AssignTargetPathsDependsOn 将调用一个自定义任务`MyCustomTaskList`，该任务只负责输出文件列表（但不生成它们），这个文件列表将创建动态“内容” `CopyOutputDirectory`。
*   为了`BuildDependsOn`实际生成*Project A*中的内容。这将调用`MyCustomTask`生成内容。

所有这些都是在 ProjectA 中这样设置的：

```
<!-- In Project A -->

<!-- Task to generate the files -->
<UsingTask TaskName="MyCustomTask" AssemblyFile="$(PathToMyCustomTaskAssembly)"/>

<!-- Task to output the list of generated of files - It doesn't generate the file -->
<UsingTask TaskName="MyCustomTaskList" AssemblyFile="$(PathToMyCustomTaskAssembly)"/>

<!-- 1st PART : When Project A is built, It will generate effectively the files -->
<PropertyGroup>
  <BuildDependsOn>
    MyCustomTaskTarget;
    $(BuildDependsOn);
  </BuildDependsOn>
</PropertyGroup>

<Target Name="MyCustomTaskTarget">
  <!-- Call MyCustomTask generate the files files that will be generated by MyCustomTask -->
  <MyCustomTask
      ProjectDirectory="$(ProjectDir)"
      IntermediateDirectory="$(IntermediateOutputPath)"
      Files="@(MyCustomFiles)"
      RootNamespace="$(RootNamespace)"
      >
  </MyCustomTask>
</Target>

<!-- 2nd PART : When Project B is built, It will call GetCopyToOutputDirectoryItems on ProjectA so we need to generate this list when it is called  -->
<!-- For this we need to override AssignTargetPathsDependsOn in order to generate the list of files -->
<!-- as GetCopyToOutputDirectoryItems  ultimately depends on AssignTargetPathsDependsOn -->
<!-- Content need to be generated before AssignTargets, because AssignTargets will prepare all files to be copied later by GetCopyToOutputDirectoryItems -->
<!-- This part is also called from ProjectA when target 'PrepareResources' is called -->
<PropertyGroup>
  <AssignTargetPathsDependsOn>
    $(AssignTargetPathsDependsOn);
    MyCustomTaskListTarget;
  </AssignTargetPathsDependsOn>
</PropertyGroup>

<Target Name="MyCustomTaskListTarget">

  <!-- Call MyCustomTaskList generating the list of files that will be generated by MyCustomTask -->
  <MyCustomTaskList
      ProjectDirectory="$(ProjectDir)"
      IntermediateDirectory="$(IntermediateOutputPath)"
      Files="@(MyCustomFiles)"
      RootNamespace="$(RootNamespace)"
      >
      <Output TaskParameter="ContentFiles" ItemName="MyCustomContent"/>
  </MyCustomTaskList>

  <ItemGroup>
    <!--Generate the lsit of content generated by MyCustomTask -->
    <Content Include="@(MyCustomContent)" KeepMetadata="Link;CopyToOutputDirectory"/>
  </ItemGroup>
</Target> 
```

此方法适用于使用 Common.Targets 的任何类型的 C# 项目（因此它适用于纯桌面、WinRT XAML 应用程序或 Windows Phone 8 项目）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T00:45:22.517

像这样的东西似乎有效，要么将其手动包含到 ProjectA 的 .csproj 中（请记住，VS 有一个坏习惯，即偶尔将通配符解析为绝对路径并覆盖 .csproj）或由自定义任务本身动态注入。此外，VS 在打开时缓存项目组，因此如果文件在那里但被删除，它可能不会复制文件或构建失败。在这种情况下，需要重新加载项目或重新启动 VS 才能重新评估项目组。MSBuild、TFS 等应该始终有效。

```
<ItemGroup>
  <Content Include="$(TargetDir)\*.txt">
    <Link>%(Filename)%(Extension)</Link>
    <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
  </Content>
</ItemGroup> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:30:10.497

如果您已经使用 MSBuild 自己进行了此构建，您是否可以添加一个[复制任务](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)来将文件推送到自己周围？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-21T11:00:40.120

对于它的价值，如果我将 a`<None Link="..." />`放在目标中，我可以处理输出而不显示在我的基于 SDK 的项目中。此外，引用此项目的其他项目将此作为输出的一部分。

例如

```
 <ItemGroup>
        <WebPackBuildOutput Include="..\..\WebPackOutput\dist\**\*" />
    </ItemGroup>

    <Target Name="WebPackOutputContentTarget" BeforeTargets="BeforeBuild">
        <Message Text="Output dynamic content: @(WebPackBuildOutput)" Importance="high"/>
        <ItemGroup>
            <!-- Manually constructing Link metadata, works in classic projects as well -->
            <None Include="@(WebPackBuildOutput)" Link="dist\%(RecursiveDir)%(Filename)%(Extension)" CopyToOutputDirectory="PreserveNewest" />
        </ItemGroup>        
    </Target> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T07:10:58.560

据我了解，您想通过在 ProjectB.msbuild 中仅编写此行来添加额外的步骤：

```
<Import Project="ProjectA.msbuild" /> 
```

要实现它，您可以在 ProjectA 中编写类似的内容：

```
<PropertyGroup>
  <BuildDependsOn>$(BuildDependsOn);MyCustomTask</BuildDependsOn>
</PropertyGroup> 
```

这会将您的任务添加到构建任务的依赖项列表中。

有关详细信息，请参阅此问题： [StyleCop MS Build 魔术？谁在调用 StyleCop 目标？](https://stackoverflow.com/questions/2343340/stylecop-ms-build-magic-who-is-calling-the-stylecop-target)

# java - 是否有任何功能或设置可以在 intellij-idea 的父目录中显示编译错误

> ID：14322393
> 
> 赞同：0
> 
> 时间：2013-01-14T16:24:43.060
> 
> 标签：java, maven, intellij-idea

我有一个多模块 Maven 项目，如下所示：

```
project A
|-project B
  |-project C 
```

如果模块 C 中存在编译错误，并且我折叠模块 B，则看不到错误。是否有任何功能或设置可以在父目录中显示编译错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:05:33.070

如果我错了，请纠正我，但在你的情况下，我认为即使在运行编译之前，Idea 也会在折叠的项目 B 中显示一点红色波浪。当 Idea 构建它 AST（抽象语法树）时，您应该立即看到错误，并且它应该在所有父项目中保持可见。在我的版本中（我正在运行 12 Ultimate，但我相信自从第一次引入多模块以来该功能就已经存在）如果我所有项目都崩溃了，我会看到主叶子上的波浪线。然后我打开叶子，它会在有错误的子模块上显示波浪线。（这假设您使用模块分组功能，该功能允许您将组构建和折叠到另一个组中。如果您不使用分组，那么您的错误模块将在项目模块列表的根目录中可见。）

# regex - 用“#”替换任意数量的空格（>1 个空格的 Awk）

> ID：14322395
> 
> 赞同：1
> 
> 时间：2013-01-14T16:24:43.677
> 
> 标签：regex, awk, find, replace, ls

我试图：

*   获取文件/目录列表，并将过去 30 分钟内修改的所有文件的所有空格 >1 (NOT \t) 替换为“#”。

示例输出：`find / -mmin -30 -ls`

```
310116371    0 -r--r--r--   1 root     root            0 Jan 14 0814 /proc/4732/wchan
310116373    0 -r--r--r--   1 root     root            0 Jan 14 0814 /proc/4732/schedstat
310116374    0 -r--r--r--   1 root     root            0 Jan 14 0814 /proc/4732/cpuset
310116383    0 -r--r--r--   1 root     root            0 Jan 14 0814 /proc/4732/oom_score
310116384    0 -rw-r--r--   1 root     root            0 Jan 14 0814 /proc/4732/oom_adj
310116382    0 -rw-r--r--   1 root     root            0 Jan 14 0814 /proc/4732/loginuid
310116416    0 -r--------   1 root     root            0 Jan 14 0814 /proc/4732/limits
310116418    0 -r--r--r--   1 root     root            0 Jan 14 0814 /proc/4732/io 
```

我想要的是：

```
310116371#0#-r--r--r--#1#root#root#0#Jan 14 0814#/proc/4732/wchan 
```

* * *

具体来说，我想使用 {awk, sed, tr} 来替换空间量大于 1 的空格。唯一的问题是，目录列表的时间戳 arg 后面有一个空格......

今天有没有一种计算方法可以做到这一点？

*   正在解析的日志文件包含约 26k 个条目
*   将输出粘贴到 .XLS 文件中

* * *

我试过的：

```
find / -mmin -5 -ls |  awk '{gsub(/s+/,"#",$0); print;}'
find / -mmin -5 -ls |  awk '{gsub(/[' ']+/,"#")}1'
find / -mmin -5 -ls |  awk '{gsub(/["  "]+/,"#")}1'
find / -mmin -5 -ls | sed "s/^ *//;s/ *$//;s/ \{1,\}/#/g"
find / -mmin -5 -ls |  awk -D '{gsub([ +],"#",$0); print;}' 
find / -mmin -5 -ls |  awk '{gsub(/\t/,"#",$0); print;}' 
```

* * *

问题： -`find / -mmin -5 -ls`默认情况下，输出不是 {tab, comma} 分隔的

* * *

关于我哪里出错的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:27:13.763

这对我有用`awk 'gsub(/\s+/,"#")'`：

```
$ awk 'gsub(/\s+/,"#")' file
310116371#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/wchan
310116373#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/schedstat
310116374#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/cpuset
310116383#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/oom_score
310116384#0#-rw-r--r--#1#root#root#0#Jan#14#0814#/proc/4732/oom_adj
310116382#0#-rw-r--r--#1#root#root#0#Jan#14#0814#/proc/4732/loginuid
310116416#0#-r--------#1#root#root#0#Jan#14#0814#/proc/4732/limits
310116418#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/io 
```

或`awk 'gsub(/\s{2,}/,"#")'`为：

> 具体来说，我想使用 {awk, sed, tr} 来替换空间量大于 1 的空间（所以，我可以保留时间戳 arg）

```
$ awk 'gsub(/\s{2,}/,"#")' file
310116371#0 -r--r--r--#1 root#root#0 Jan 14 0814 /proc/4732/wchan
310116373#0 -r--r--r--#1 root#root#0 Jan 14 0814 /proc/4732/schedstat
310116374#0 -r--r--r--#1 root#root#0 Jan 14 0814 /proc/4732/cpuset
310116383#0 -r--r--r--#1 root#root#0 Jan 14 0814 /proc/4732/oom_score
310116384#0 -rw-r--r--#1 root#root#0 Jan 14 0814 /proc/4732/oom_adj
310116382#0 -rw-r--r--#1 root#root#0 Jan 14 0814 /proc/4732/loginuid
310116416#0 -r--------#1 root#root#0 Jan 14 0814 /proc/4732/limits
310116418#0 -r--r--r--#1 root#root#0 Jan 14 0814 /proc/4732/io

# Single spacing
$ awk 'gsub(/\s{2,}/," ")' file
310116371 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/wchan
310116373 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/schedstat
310116374 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/cpuset
310116383 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/oom_score
310116384 0 -rw-r--r-- 1 root root 0 Jan 14 0814 /proc/4732/oom_adj
310116382 0 -rw-r--r-- 1 root root 0 Jan 14 0814 /proc/4732/loginuid
310116416 0 -r-------- 1 root root 0 Jan 14 0814 /proc/4732/limits
310116418 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/io 
```

**编辑：**

如何设置`OFS`变量：

```
# Hash seperated
$ awk 'BEGIN{OFS="#"}{print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11}' file
310116371#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/wchan
310116373#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/schedstat
310116374#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/cpuset
310116383#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/oom_score
310116384#0#-rw-r--r--#1#root#root#0#Jan#14#0814#/proc/4732/oom_adj
310116382#0#-rw-r--r--#1#root#root#0#Jan#14#0814#/proc/4732/loginuid
310116416#0#-r--------#1#root#root#0#Jan#14#0814#/proc/4732/limits
310116418#0#-r--r--r--#1#root#root#0#Jan#14#0814#/proc/4732/io

# Hash sperated accounting for the spaces in the date
$ awk 'BEGIN{OFS="#"}{print $1,$2,$3,$4,$5,$6,$7,$8" "$9" "$10,$11}' file
310116371#0#-r--r--r--#1#root#root#0#Jan 14 0814#/proc/4732/wchan
310116373#0#-r--r--r--#1#root#root#0#Jan 14 0814#/proc/4732/schedstat
310116374#0#-r--r--r--#1#root#root#0#Jan 14 0814#/proc/4732/cpuset
310116383#0#-r--r--r--#1#root#root#0#Jan 14 0814#/proc/4732/oom_score
310116384#0#-rw-r--r--#1#root#root#0#Jan 14 0814#/proc/4732/oom_adj
310116382#0#-rw-r--r--#1#root#root#0#Jan 14 0814#/proc/4732/loginuid
310116416#0#-r--------#1#root#root#0#Jan 14 0814#/proc/4732/limits
310116418#0#-r--r--r--#1#root#root#0#Jan 14 0814#/proc/4732/io

# Single space sperated 
$ awk 'BEGIN{OFS=" "}{print $1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11}' file
310116371 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/wchan
310116373 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/schedstat
310116374 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/cpuset
310116383 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/oom_score
310116384 0 -rw-r--r-- 1 root root 0 Jan 14 0814 /proc/4732/oom_adj
310116382 0 -rw-r--r-- 1 root root 0 Jan 14 0814 /proc/4732/loginuid
310116416 0 -r-------- 1 root root 0 Jan 14 0814 /proc/4732/limits
310116418 0 -r--r--r-- 1 root root 0 Jan 14 0814 /proc/4732/io 
```

# java - 将 SQL/plPGsql 测试移植到 Java/JDBC：测试异常

> ID：14322398
> 
> 赞同：0
> 
> 时间：2013-01-14T16:24:53.957
> 
> 标签：java, postgresql, testing, jdbc

我正在将数据库模式测试从 sql/plpgsql 移植到 Java/JDBC。但这是一个我不知道如何测试的测试用例。我可以猜到，这个测试尝试向表中插入一些行，并期望抛出 SPECIAL_EXCEPTION。如果抛出，则测试通过，如果抛出其他异常或没有异常，则测试失败。那么问题来了：从 java.sql.Connection/Statement/ResultSet 的角度来看，如何精确测试呢？

```
begin;
do language plpgsql $$
declare
begin
    begin
        INSERT INTO table (
            name,
            blah...
        ) VALUES (
            'Test Player ',
            blah...
        );
    exception
        when sqlstate 'SPECIAL_EXCEPTION' then
            return;
        when others then
            raise info 'exception SPECIAL_EXCEPTION failed, invalid sqlstate';
            raise;
    end;
    raise exception 'exception SPECIAL_EXCEPTION failed, no error thrown';
end;
$$;
commit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:06:46.107

如果我说对了，那么您想要的是：

```
 try {
      statement.executeUpdate();
   } catch(SQLException e) {
      if (!se.getSQLState().equals("SPECIAL_EXCEPTION") ) {
            fail();
      }
   } 
```

# java - 找到不兼容的类型 java.lang.string 但预期为 int

> ID：14322401
> 
> 赞同：-1
> 
> 时间：2013-01-14T16:25:03.307
> 
> 标签：java, string, types, bluej

我有一个奇怪的问题。我在家里创建了一些代码，它编译得很好，没有错误。现在我尝试在学校编译相同的代码，并且我得到了字符串 d 的不兼容类型错误：S 我顺便使用了蓝色 J。

代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.event.*;
import java.awt.image.*;
import java.awt.geom.*;
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
/** 
* @author (Andrew Napier, Sikander Singh) 
* @version (December 18th, 2012)
*/
public class MonthlyData extends JFrame
{
private JLabel title, stitle, l1,l2,l3,l4,l5,l6,l7,l8,l9,l10,l11,l12,l13,l14;
private JLabel Usage,Estimated,solu1,solu2,total2;
private JLabel l15,l16,l17,l18,l19,l20,l21,l22,l23,l24,l25,l26,l27,l28,l29;
private JPanel panel1, panel2, panel3, panel4, panel5, panel6, panel7;
String[] deviceStrings = { "Device", "Blackberry", "Other", "Internetstick"};
String[] date = { "Day", "Week", "Month"};
public double email2 = 0;
public double email1;
public double web2 = 0;
public double IM2 = 0;
public double video2 = 0;
public double song2 = 0;
public double app2 = 0;
static final int email50 = 50;
static final int email100 = 100;
static final int email150 = 150;
static final int email200 = 200;
static final int email250 = 250;
static final int email300 = 300;
public JSlider Email = new JSlider(0,300,0);
public JSlider Web = new JSlider(0,500,0);
public JSlider IM = new JSlider(0,500,0);
public JSlider Video = new JSlider(0,300,0);
public JSlider Song = new JSlider(0,200,0);
public  JSlider App_G = new JSlider(0,100,0);
public String currentdate;

public double emailvalue, webvalue,IMvalue, videovalue, songvalue, appvalue;    
public double webmb, immb, videomb, songmb,appmb,emailmb;

public MonthlyData ()
{
    super ("MonthlyData");
    setSize (1000,1100);

    ////////////////////////////////////////////////////// panel1
    panel1 = new JPanel ();                                              
    panel1.setLayout (new GridLayout(1,1));
    panel1.setVisible(true);
    panel1.setBackground (Color.black);
    title = new JLabel ("            WANNA KNOW HOW MUCH DATA YOU NEED?",JLabel.LEFT);
    title.setForeground(Color.white);
    title.setFont (new Font("Times New Roman",Font.BOLD,25));
    l1 = new JLabel ("");
    l2 = new JLabel ("");
    /////////////////////////////////////////////// panel2   
    panel2 = new JPanel ();                                             
    panel2.setLayout (new GridLayout(1,1));
    panel2.setVisible(true);
    panel2.setBackground (Color.gray);
    stitle = new JLabel ("PICK A PHONE OR INTERNET STICK AND THEN DRAG .",JLabel.LEFT);
    stitle.setForeground(Color.black);
    stitle.setFont (new Font("Times New Roman",Font.BOLD,14));
    //////////////////////////////////////////////// panel3
    panel3 = new JPanel ();                                              
    panel3.setLayout (new FlowLayout());
    panel3.setVisible(true);
    panel3.setBackground (Color.white);
    l3 = new JLabel ("Select Your Device:",JLabel.RIGHT);
    l3.setForeground(Color.red);

    l4 = new JLabel ("Tell us how much of what's listed here you think you'll use:");
    ///////////////////////////////////////////////// panel4

    panel4 = new JPanel ();                                               
    panel4.setLayout (new GridLayout(6,7));
    panel4.setVisible(true);
    panel4.setBackground (Color.white);
    l5 = new JLabel ("Email");
    l6 = new JLabel ("WebPage");
    l7 = new JLabel ("Instant Message");
    l8 = new JLabel ("Streaming Video");
    l9 = new JLabel ("Song");
    l10 = new JLabel ("Application or Game");

    l11 = new JLabel (""+" Emails");

    l12 = new JLabel (" MB");
    l15 = new JLabel (" MB");
    l18 = new JLabel (" MB");
    l21 = new JLabel (" MB");
    l24 = new JLabel (" MB");
    l27 = new JLabel (" MB");

    final JComboBox devicelist = new JComboBox (deviceStrings);
    devicelist.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                **String d = (String) devicelist.getSelectedItem();**

                switch (d) {//check for a match
                    case "Blackberry":
                    emailmb = 0.002;
                    webmb = 0.07;
                    immb = 0.005;
                    videomb = 1;
                    songmb = 4;
                    appmb = 0.44;
                    l12.setText(emailmb + " MB");
                    l15.setText(webmb + " MB");
                    l18.setText(immb + " MB");
                    l21.setText(videomb + " MB");
                    l24.setText(songmb + " MB");
                    l27.setText(appmb + " MB");
                    break;
                    case "Other":
                    emailmb = 0.02;
                    webmb = 0.17;
                    immb = 0.03;
                    videomb = 1;
                    songmb = 4;
                    appmb = 4;
                    l12.setText(emailmb + " MB");
                    l15.setText(webmb + " MB");
                    l18.setText(immb + " MB");
                    l21.setText(videomb + " MB");
                    l24.setText(songmb + " MB");
                    l27.setText(appmb + " MB");
                    break;
                    case "Internetstick":
                    emailmb = 0.04;
                    webmb = 0.2;
                    immb = 0.002;
                    videomb = 4;
                    songmb = 5;
                    appmb = 30;
                    l12.setText(emailmb + " MB");
                    l15.setText(webmb + " MB");
                    l18.setText(immb + " MB");
                    l21.setText(videomb + " MB");
                    l24.setText(songmb + " MB");
                    l27.setText(appmb + " MB");
                    break;

                }

            }
        });
    devicelist.setSelectedItem(devicelist[0]);

    final JComboBox date1 = new JComboBox (date);
    date1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String s = (String) date1.getSelectedItem();//get the selected item

                switch (s) {//check for a match
                    case "Day":
                    emailvalue = 30;

                    break;
                    case "Week":
                    emailvalue = 4;

                    break;
                    case "Month":
                    emailvalue = 1;

                    break;

                }

            }
        });
    date1.setSelectedItem(date[0]);

    final JComboBox date2 = new JComboBox (date); 
    date2.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String s2 = (String) date2.getSelectedItem();//get the selected item

                switch (s2) {//check for a match
                    case "Day":
                    webvalue = 30;

                    break;
                    case "Week":
                    webvalue = 4;

                    break;
                    case "Month":
                    webvalue = 1;

                    break;

                }

            }
        });
    date2.setSelectedItem(date[0]);

    final JComboBox date3 = new JComboBox (date);

    date3.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String s3 = (String) date3.getSelectedItem();//get the selected item

                switch (s3) {//check for a match
                    case "Day":
                    IMvalue = 30;

                    break;
                    case "Week":
                    IMvalue = 4;

                    break;
                    case "Month":
                    IMvalue = 1;

                    break;

                }

            }
        });
    date3.setSelectedItem(date[0]);

    final JComboBox date4 = new JComboBox (date);
    date4.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String s4 = (String) date4.getSelectedItem();//get the selected item

                switch (s4) {//check for a match
                    case "Day":
                    videovalue = 30;

                    break;
                    case "Week":
                    videovalue = 4;

                    break;
                    case "Month":
                    videovalue = 1;

                    break;

                }

            }
        });
    date4.setSelectedItem(date[0]);

    final JComboBox date5 = new JComboBox (date);
    date5.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String s5 = (String) date5.getSelectedItem();//get the selected item

                switch (s5) {//check for a match
                    case "Day":
                    songvalue = 30;

                    break;
                    case "Week":
                    songvalue = 4;

                    break;
                    case "Month":
                    songvalue = 1;

                    break;

                }

            }
        });
    date5.setSelectedItem(date[0]);

    final JComboBox date6 = new JComboBox (date);
    date6.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {

                String s6 = (String) date6.getSelectedItem();//get the selected item

                switch (s6) {//check for a match
                    case "Day":
                    appvalue = 30;

                    break;
                    case "Week":
                    appvalue = 4;

                    break;
                    case "Month":
                    appvalue = 1;

                    break;

                }

            }
        });
    date6.setSelectedItem(date[0]);

    l13 = new JLabel (""+email2+" MB");
    double web1 = 0;
    l14 = new JLabel (""+web1+" WebPages");

    l16 = new JLabel (""+web2+" MB");
    double IM1 = 0;
    l17 = new JLabel (""+IM1+" IMs");

    l19 = new JLabel (""+IM2+" MB");
    double video1 = 0;
    l20 = new JLabel (""+video1+" Minutes");

    l22 = new JLabel (""+video2+" MB");
    double song1 = 0;
    l23 = new JLabel (""+song1+" MP3's");

    l25 = new JLabel (""+song2+" MB");
    double app1 = 0;
    l26 = new JLabel (""+app1+" App/Games");

    l28 = new JLabel (""+app2+" MB");
    //////////////////////////////////////////////// panel5
    panel5 = new JPanel ();                                            
    panel5.setLayout (new GridLayout(1,1));
    panel5.setVisible(true);
    panel5.setBackground (Color.white);
    solu1 = new JLabel ("WE THINK YOUR MONTHLY DATA USAGE WILL BE:");
    solu1.setForeground (Color.red);
    solu1.setFont (new Font("Times New Roman",Font.BOLD,20));
    double total = 0;
    total2 = new JLabel ((email2 + web2 + IM2 + video2 + song2 + app2) + "MB");
    total2.setForeground (Color.red);
    total2.setFont (new Font("Times New Roman",Font.BOLD,20));
    /////////////////////////////////////////// panel6
    panel6 = new JPanel ();
    panel6.setLayout (new GridLayout (1,1));
    panel6.setVisible (true);
    panel6.setBackground (Color.white);
    Usage = new JLabel ("Usage per unit");
    Usage.setForeground (Color.red);
    Estimated = new JLabel ("     Estimated total");
    Estimated.setForeground (Color.red);
    ////////////////////////////////////////////// panel7
    panel7 = new JPanel ();
    panel7.setLayout (new GridLayout (1,1));
    panel7.setVisible (true);
    panel7.setBackground (Color.white);
    solu2 = new JLabel ("Data usage varies by device and other factors and the");
    solu2.setForeground (Color.black);
    /////////////////////////////////////////////////// Implements
    Container container = getContentPane ();
    container.setLayout (null);      //changed
    container.setBackground (Color.white);

    container.add (panel1).setBounds (0,0,1000,120);        //panel1
    panel1.add (title).setSize(500,500);

    container.add (panel2).setBounds (0,100,1000,120);      //panel2
    panel2.add (stitle);

    container.add (panel3).setBounds (0,220,1000,100);      //panel3
    panel3.add (l3);
    panel3.add (devicelist);
    panel3.add (l4);

    container.add (panel4).setBounds (0,340,1000,150);      //panel4
    Email.addChangeListener(new SliderHandler());
    Web.addChangeListener(new SliderHandler());
    IM.addChangeListener(new SliderHandler());
    Video.addChangeListener(new SliderHandler());
    Song.addChangeListener(new SliderHandler());
    App_G.addChangeListener(new SliderHandler());

    panel4.add (l5);
    panel4.add (Email);
    panel4.add (l11);
    panel4.add (date1);
    panel4.add (l12);
    panel4.add (l13);
    panel4.add (l6);
    panel4.add (Web);
    panel4.add (l14);
    panel4.add (date2);
    panel4.add (l15);
    panel4.add (l16);
    panel4.add (l7);
    panel4.add (IM);
    panel4.add (l17);
    panel4.add (date3);
    panel4.add (l18);
    panel4.add (l19);
    panel4.add (l8);
    panel4.add (Video);
    panel4.add (l20);
    panel4.add (date4);
    panel4.add (l21);
    panel4.add (l22);
    panel4.add (l9);
    panel4.add (Song);
    panel4.add (l23);
    panel4.add (date5);
    panel4.add (l24);
    panel4.add (l25);
    panel4.add (l10);
    panel4.add (App_G);
    panel4.add (l26);
    panel4.add (date6);
    panel4.add (l27);
    panel4.add (l28);
    container.add (panel5).setBounds (210,540,1000,50);    // panel5
    panel5.add (solu1);
    panel5.add (total2);
    container.add (panel6).setBounds (670,220,200,220);      // panel6
    panel6.add (Usage);
    panel6.add (Estimated);

    container.add (panel7).setBounds (210,580,530,50);    // panel7
    panel7.add (solu2);

    Email.setOpaque(false);
    Web.setOpaque(false);
    IM.setOpaque(false); 
    Video.setOpaque(false); 
    Song.setOpaque(false);
    App_G.setOpaque(false); 
    setVisible (true);

}

public static void main (String[] args)
{
    MonthlyData application = new MonthlyData ();
}

public class SliderHandler implements ChangeListener
{
    public void stateChanged(ChangeEvent e)
    {
        if (e.getSource().equals(Email))
        {
            l11.setText(""+Email.getValue());

            email2= (Email.getValue() * emailmb)*emailvalue;
            l13.setText(email2 + "MB");
        }
        if (e.getSource().equals(Web))
        {

            l14.setText(""+Web.getValue());
            web2 = (Web.getValue() * webmb) * webvalue;
            l16.setText(web2 + "MB");

        }

        if (e.getSource().equals(IM))
        {
            l17.setText(""+IM.getValue());
            IM2 = (IM.getValue() * immb) * IMvalue;
            l19.setText(IM2 + "MB");

        }

        if (e.getSource().equals(Video))
        {
            l20.setText(""+Video.getValue());
            video2 = (Video.getValue() * videomb) * videovalue;
            l22.setText(video2 + "MB");

        }

        if (e.getSource().equals(Song))
        {
            l23.setText(""+Song.getValue());
            song2 = (Song.getValue() * songmb) * songvalue;
            l25.setText(song2 + "MB");

        }

        if (e.getSource().equals(App_G))
        {
            l26.setText(""+App_G.getValue());
            app2 = (App_G.getValue() * appmb) * appvalue;
            l28.setText(app2 + "MB");

        }

    }
}

public void paint (Graphics g)
{
    super.paint(g);

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:31:13.130

您在 switch 语句中使用了仅在 java 7 中可用的字符串。检查您的 jdk 版本

# actionscript-3 - as3/flex 4 个重音字符

> ID：14322402
> 
> 赞同：2
> 
> 时间：2013-01-14T16:25:04.770
> 
> 标签：actionscript-3, flex4, non-ascii-characters

我在 Flexpad Button Bar 中使用 ArrayCollection 作为 dataProvider：

```
<flexpad:ButtonBarBlack change="updAppStack()" id="barAppStack" selectedIndex="0" fontFamily="MyriadWebPro">
        <flexpad:dataProvider>
            <s:ArrayCollection>
                <fx:String>Attività</fx:String>
                <fx:String>Giornale</fx:String>
                <fx:String>Progetti</fx:String>
                <fx:String>Impostazioni</fx:String>
            </s:ArrayCollection>
        </flexpad:dataProvider> 
```

我使用 MyriadWebPro 作为 fontFamily 但“à”字符未正确显示，它似乎使用默认字体系列。我还在我的对象标签的文本字段中使用相同的字体，并且重音字符可以正确显示。我用

```
<?xml version="1.0" encoding="utf-8"?> 
```

我的应用程序开头的行。谁能解释我的区别在哪里？我怎样才能像在字段中一样正确地可视化重音字符？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T03:16:39.590

（这个答案只是为了把它从未回答的列表中删除，因为距离明显的解决方案已经一年了。欢迎提问者发布并接受他们自己的答案而不是这个答案。）

所描述的问题来自 Flexpad 库。使用 Spark ButtonBar 可以正确显示重音字符。

# flash - Flash Builder 4.6 - 列表控件具有带有文本框的 ItemRenderer - 滚动列表使 txt 框值显示在所有地方

> ID：14322403
> 
> 赞同：1
> 
> 时间：2013-01-14T16:25:10.407
> 
> 标签：flash, actionscript, builder, itemrenderer

我有一个列表控件和一个项目渲染器。在项目渲染器中，我有一个文本框，用于显示人们想要的每个项目的数量。在每次更新数量时（关注文本框上的焦点事件），我正在更新数据的值。在主程序中，我显示基于此的总数。

总计代码可以正常工作，但是当我滚动列表时，值会显示在整个页面中。附件是一个简单的向下滚动后所有混乱的值的屏幕截图。此外，下面是完整的项目渲染器。我在网上找到了很多关于此的注释，但我尝试的一切都无济于事！

这是问题图片的链接： [滚动错误](http://forums.adobe.com/servlet/JiveServlet/downloadImage/2-4986103-272887/408-605/scrollingerror.jpg)

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer name="PlowResultsRenderer"
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx" >

<fx:Script>
  <![CDATA[
   import spark.events.TextOperationEvent;
   import flash.events.EventDispatcher;
   import valueObjects.Tag;
   import valueObjects.TagProjectItem;
   import classes.QtyChangeEvent; 

   [Bindable]
   public var lineQty:Number;
   [Bindable]
   public var lineList:Number;
   [Bindable]
   public var lineDealerCost:Number;

   public var textPlaceholder:String = "0";

   override public function set data( value:Object ) : void {
    super.data = value;

    var thisItem:TagProjectItem = data as TagProjectItem;

    if (thisItem.IsOnHand || thisItem.IsOnOrder)
    {
     currentState = "green";
    }else if (thisItem.IsOnDealerFloorplan)
    {
     currentState = "white";
    }else
    {
     currentState = "red";
    }
    //  #EEA2AD  old red

    lineList = Number(thisItem.ListPrice);
    lineDealerCost = Number(thisItem.DealerCost);
    lineQty = 0;

    validateNow();
   }

   /*protected function dataChangeHandler(evt:Event):void {

    var  thisItem:TagProjectItem = data as TagProjectItem;

    if (thisItem.IsOnHand || thisItem.IsOnOrder)
    {
     currentState = "green";
    }else if (thisItem.IsOnDealerFloorplan)
    {
     currentState = "white";
    }else
    {
     currentState = "red";
    }
    //  #EEA2AD  old red

    lblModelNumber.text = thisItem.ModelNumber;

    //lblListPrice.text = America.format(thisItem.ListPrice);
    lblListPrice.text = America.format(thisItem.PromoPrice);

    lblSWDescription.text = thisItem.SWDescription;
    lblSWCategory.text = thisItem.SWCategory;

    lineList = Number(thisItem.ListPrice);
    lineDealerCost = Number(thisItem.DealerCost);
    lineQty = 0;

    validateNow();
   }*/

   protected function doFocusIn(event:FocusEvent):void
   {

    textPlaceholder = txtQty.text;
    if (textPlaceholder == "0"){
     txtQty.text = "1";
    }
   }

   protected function doFocusOut(event:FocusEvent):void
   {

    if (txtQty.text != textPlaceholder){
     //here the text has been changed.
     var changeEvent:QtyChangeEvent = new QtyChangeEvent(QtyChangeEvent.CHANGE, Number(txtQty.text) - Number(textPlaceholder), lineDealerCost, lineList);
     parent.dispatchEvent(changeEvent);
    }
    textPlaceholder = "0";
    if (txtQty.text == ""){
     txtQty.text = "0";
    }
   }

  ]]>
</fx:Script>
<fx:Declarations>
  <!-- Place non-visual elements (e.g., services, value objects) here -->
  <mx:CurrencyFormatter id="America" precision="2" 
         rounding="none"
         decimalSeparatorTo="."
         thousandsSeparatorTo=","
         useThousandsSeparator="true"
         useNegativeSign="true"
         currencySymbol=""
         alignSymbol="left"/>
</fx:Declarations>
<s:states>
  <s:State name="green" />
  <s:State name="white" />
  <s:State name="red" />
</s:states>
<s:layout>
  <s:HorizontalLayout gap="0"
       paddingTop="1" paddingBottom="1"
       verticalAlign="middle" />
</s:layout>
<s:Panel skinClass="PanelNoTitleBar" horizontalCenter="0" width="100%">
  <s:Rect id="rect" width="100%">
   <s:fill>
    <s:SolidColor color.green="#C1FFC1" color.red="#FFC1C1" color.white="#FFEC8B">
    </s:SolidColor>
   </s:fill>
  </s:Rect>
  <s:HGroup width="100%">
   <s:VGroup>
    <s:Label text="Qty" paddingLeft="2" paddingRight="8" paddingTop="4" paddingBottom="1" >
    </s:Label>
    <s:TextInput id="txtQty" width="34" height="30"
        fontSize="11" maxChars="3" restrict="0-9" softKeyboardType="number"
        widthInChars="3" text="{lineQty}"
        focusIn="doFocusIn(event)" focusOut="doFocusOut(event)">
    </s:TextInput>
   </s:VGroup>
   <s:VGroup width="100%">
    <s:HGroup width="100%">
     <s:Label id="lblModelNumber" text="{data.ModelNumber}" paddingLeft="2" paddingRight="2" paddingTop="4" paddingBottom="1"  />
     <s:Spacer width="100%">
     </s:Spacer>
     <s:Label text="List Price: " paddingLeft="2" paddingRight="8" paddingTop="4" paddingBottom="1" />
     <s:Label id="lblListPrice" text="{America.format(data.PromoPrice)}" textAlign="right" fontWeight="bold" paddingLeft="2" paddingRight="8" paddingTop="4" paddingBottom="1"   />
    </s:HGroup>
    <s:Label id="lblSWCategory" text="{data.SWCategory}" paddingLeft="11" paddingRight="2" paddingTop="1" paddingBottom="1" />
    <s:Label id="lblSWDescription" text="{data.SWDescription}" paddingLeft="11" paddingRight="2" paddingTop="1" paddingBottom="4"  textAlign="right" /> 
   </s:VGroup>
  </s:HGroup>
</s:Panel>

</s:ItemRenderer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:34:14.387

这是一个iOS应用程序吗？如果是这样，则本机文本控件的滚动存在错误。以下应该解决它：

```
 <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        @namespace local "*";
        s|TextInput {
            skinClass: ClassReference("spark.skins.mobile.TextInputSkin");
        }
        s|TextArea {
            skinClass: ClassReference("spark.skins.mobile.TextAreaSkin");
        }
    </fx:Style> 
```

# objective-c - NSManagedObject 属性未在父 NSManagedObjectContext 上更新

> ID：14322408
> 
> 赞同：0
> 
> 时间：2013-01-14T16:25:28.423
> 
> 标签：objective-c, cocoa, core-data, nsmanagedobject, nsmanagedobjectcontext

所以我有两个 NSManagedObjectContext 对象。一个父上下文和一个子上下文。我有几个 NSManagedObjectModels，我可以创建/编辑/销毁其中 5 个中的 4 个。没问题。我可以在子上下文中插入对象，然后保存它，*瞧*，它会在根上下文中弹出。

然而，给我带来麻烦的是五分之一。我可以毫无问题地插入它，它会显示在根上下文中。当我尝试更改对象的属性时，尽管它没有在根上下文中更新。这是来自控制台的打印输出（注意 value 属性没有得到更新）。

```
====root_context:("<Token: 0x1006f6a30> (
    entity: Token; 
    id: 0x107115130 <x-coredata:///Token/t2AC116F0-E89B-485D-B0A9-C3D2A58B84847> ; 
    data: {    association = 0;    
    equation = \"0x107114b10 <x-coredata:///Equation/t2AC116F0-E89B-485D-B0A9-C3D2A58B84846>\";    
    isValid = 0;    
    precedence = 0;    
    type = 0;    
    value = nil;})") 
====child_context:("<Token: 0x1071150a0> (
    entity: Token; 
    id: 0x107115130 <x-coredata:///Token/t2AC116F0-E89B-485D-B0A9-C3D2A58B84847> ; 
    data: {    association = 0;
    equation = \"0x107114b10 <x-coredata:///Equation/t2AC116F0-E89B-485D-B0A9-C3D2A58B84846>\";
    isValid = 0;
    precedence = 0;
    type = 0;
    value = 4;})" 
```

)

从我的新手眼中，这些似乎是同一个对象。即使我打印出这两个对象的 objectID（即使它们在不同的上下文中），它们的 objectID 也匹配。

**更多背景信息**
要合并，我正在调用`[_childContext save:&error]`它将更改推送到父上下文。每次检测到子上下文中的更改时都会调用此代码。然后，一旦我在我调用的子上下文中观察到 NSManagedObjectContextDidSaveNotification`[_rootContext mergeChangesFromContextDidSaveNotification:notification]`

**附加说明**
我不知道这是否是另一个线索，但是当我将数据保存到 XML 文件时，它会忽略该`value`属性。这是输出：

```
<object type="TOKEN" id="z104">
    <attribute name="type" type="int16">0</attribute>
    <attribute name="precedence" type="int16">0</attribute>
    <attribute name="isvalid" type="bool">0</attribute>
    <attribute name="association" type="int16">0</attribute>
    <relationship name="equation" type="1/1" destination="EQUATION" idrefs="z106"></relationship>
</object> 
```

谢谢大家！

ps 我检查了我的 .xcdatamodeld 文件，一切似乎都井井有条。我将值存储为字符串，其余的存储为整数 16 和布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:16:46.197

看起来您的`value`属性以某种方式未正确定义。这是一个检查清单：

1.  您已经检查了数据模型中的数据类型
2.  您还应该检查`NSManagedObject`正确类型的子类。
3.  另外，再次检查您如何设置新值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T00:10:49.730

嗯....关于 CoreData 的知识还有很多。

基本上我遇到的问题是：

1.  创建一个 NSManagedObject，但不插入到上下文中。
2.  更新新创建对象的属性。
3.  将对象插入到上下文中。

但是，如果我颠倒第 1 步和第 2 步，而是先将对象插入上下文，然后更新属性，它就可以正常工作。

# php - 不限制 where 语句

> ID：14322410
> 
> 赞同：0
> 
> 时间：2013-01-14T16:25:31.590
> 
> 标签：php, mysql

我的帐户具有与其关联的类别和订单表，其中订单可以是基于“order_type”字段的债务或信用以及存储付款日期和金额的付款表（没有用于债务或信用的负数） .

目前我正在使用这样的东西：

```
SELECT cat, SUM(p.amount) balance
FROM accounts a 
LEFT JOIN orders o ON a.id = o.account_id
LEFT JOIN payments p ON o.id = p.order_id
WHERE YEAR(p.date) = 2012
GROUP BY a.cat 
```

**第一个问题：**

这将全部视为已付款，这是错误的，我尝试使用

```
sum(IF(o.order_type = 1, p.amount, p.amount * -1 )) 
```

由于所有金额均为负数，因此未能给我正确的结果。

**第二题：**

它不会显示没有付款的类别，这里的限制因素是我需要确保我仅在 2012 年计算付款的日期，但如果没有付款，我还想显示所有类别为零。

我以错误的方式接近它吗？

如果有人知道任一问题或两者的解决方案，请提供您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:57:23.593

```
SELECT cat, SUM(p.amount) balance
FROM accounts a 
LEFT JOIN orders o
  ON a.id = o.account_id
     AND o.order_type = 1
LEFT JOIN payments p
  ON o.id = p.order_id
     AND YEAR(p.date) = 2012
GROUP BY a.cat 
```

年份检查必须处于 JOIN 条件，而不是 WHERE，因此它不会排除没有付款的类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:43:17.737

尝试这样的事情：

```
SELECT cat, SUM(p.amount) balance
FROM accounts a 
LEFT JOIN orders o
  ON a.id = o.account_id
     AND o.order_type = 1
LEFT JOIN payments p
  ON o.id = p.order_id
WHERE YEAR(p.date) = 2012
GROUP BY a.cat 
```

但我建议澄清您的数据库架构，以便您的客户是否已付清或欠债更加明显。

# java - Datacom 的 Java 驱动程序：SQL 语法问题

> ID：14322411
> 
> 赞同：0
> 
> 时间：2013-01-14T16:25:32.480
> 
> 标签：java, sql, groovy

有任何使用 Datacom 的 Java/Groovy 开发人员吗？

看起来 Datacom 的 Java 驱动程序不允许我执行以下操作：

```
select top n column from table 
```

或者

```
Order By Rnd 
```

不抛出语法错误异常。

我要做的事情的要点是从表中随机选择 top n 或随机选择 min 。随机化是至关重要的。

此查询在“分组依据”行上失败：

```
Select min(column) as columnAlias From table
Inner Join anotherTable On table.column = anotherTable.column
Group By Rnd(numericColumn)
Order By Rnd(numericColumn) 
```

此查询在“选择顶部”行失败 - 它似乎需要声明一个游标（错误是 DECLARE SQL_JCUR_CA_1 CURSOR FOR SELECT TOP 5）。这让我觉得很奇怪。

```
Select top n column as columnAlias From table 
```

这些查询在 MS Access 中运行正常。我查看了 Datacom SQL 文档，但没有任何问题是潜在的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T21:27:00.063

为了阐明消息“错误是 DECLARE SQL_JCUR_CA_1 CURSOR FOR SELECT TOP 5”的原因，“select top n”不是有效的 CA Datacom SQL 语法。要选择有限数量的行，您需要指定“select [columns list] from table where... **fetch first n rows only** ”。限制从结果集中返回的行数是“仅获取前 n 行”子句。

我目前正在对最新版本的 CA Datacom/Server 15.0 进行 beta 测试，因此如果还有其他语法问题，请告诉我。

# jquery - MVC 4 Razor 对象不支持属性或方法“dataTable”

> ID：14322413
> 
> 赞同：1
> 
> 时间：2013-01-14T16:25:36.817
> 
> 标签：jquery, asp.net-mvc-4

我是 MVC、jquery 和 DataTables 的菜鸟。当我按 F5 在本地构建和启动站点以进行开发/调试时，我收到了 Microsoft Visual Studio 警告对话框：

> JavaScript 运行时错误：对象不支持属性或方法“dataTable”

我将 VS 2012 与 MVC 4 项目一起使用。我使用 NuGet 包管理器作为我的解决方案来安装\更新 jQuery 1.8.3 和 jquery.datatables 1.9.4。这是我的 Index.cshtml 视图代码：

```
<script src="@Url.Content("~/Scripts/jquery-1.8.3.js")" type="text/javascript">     </script>
<script src="@Url.Content("~/Scripts/DataTables-1.9.4/media/js/jquery.dataTables.js")" type="text/javascript"></script>

<script>
 $(document).ready(function () {
     $('#table_id').dataTable({
    });
});
</script>

<table id="table_id" class="display">
<thead>
    <tr>
        <th>Column 1</th>
        <th>Column 2</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Row 1 Data 1</td>
        <td>Row 1 Data 2</td>
    </tr>
    <tr>
        <td>Row 2 Data 1</td>
        <td>Row 2 Data 2</td>
    </tr>
</tbody>
</table> 
```

这似乎是一个参考问题，但我没有尝试解决这个问题！

我搜索了博客，但找不到答案，或者也许了解需要更改的内容。直接回答将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T14:57:30.683

我认为您可以尝试将这些行注释掉：

@Scripts.Render("~/bundles/jquery")

@RenderSection（“脚本”，必需：假）

它们位于“_Layout.cshtml”页面的末尾。

希望有意义

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T17:04:22.407

既然您提到您是 MVC 中的新手（我不喜欢 noob 这个词）等，我假设您在多个视图中声明了 jQuery（就像您在上面所做的那样）。我正在为您的代码提供示例布局，如果您希望遵循它

jQuery 和任何其他库，应该只包含在您的 html 中一次，最好是在页面底部，就在 body 结束标记之前

如果稍后在您的代码中，您再次包含 jQuery，那么它将覆盖前一个，其中附加了 dataTable 插件

最好检查实际浏览器（chrome、firefox、IE）而不是 Visual Studio。在 Chrome 中，按`F12`调出开发者工具，然后按`Esc`调出控制台。看到那里有任何错误吗？

* * *

您的代码的示例布局可能如下所示。这是**主视图**文件（如果我没记错的话，默认情况下它在 Views > Shared > _Layout.cshtml 中）

```
<!DOCTYPE html>
<html>
    <head>
        ...

        <!-- Global Styles -->
        <link href="styles.css" rel="stylesheet" type="text/css" />
        <!-- Page Specific Styles -->
        @if (IsSectionDefined("Styles"))
        { 
            @RenderSection("Styles")
        }

        ...
    </head>
    <body>
        ...
        <!-- Global Scripts -->
        <script src="@Url.Content("~/Scripts/jquery-1.8.3.js")" type="text/javascript"></script>
        <!-- Page Specific Scripts -->
        @if (IsSectionDefined("Scripts"))
        { 
            @RenderSection("Scripts")
        }
    </body>
</html> 
```

您可以将所需的任何特定样式/脚本添加到每个视图，就像这样

```
... 
<!-- View HTML -->
...

@section Styles {
       <link href="specific.css" />
}

@section Scripts {
    <script src="specific.js"></script>
} 
```

* * *

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:32:01.520

好的，

删除数据表的 () 之间的 {}

像这样写

```
 $(document).ready(function () {
    $('#table_id').dataTable();
 }); 
```

[小提琴示例](http://jsfiddle.net/UJvm7/)

当您想向数据表添加选项时，您可以使用 {} 来使用选项

像这样：

```
$(document).ready(function() {
$('#example').dataTable( {
    "bPaginate": false,
    "bLengthChange": false,
    "bFilter": true,
    "bSort": false,
    "bInfo": false,
    "bAutoWidth": false
   } );
} ); 
```

[查看示例](http://www.datatables.net/release-datatables/examples/basic_init/filter_only.html)

# python - 将数据拟合到 python vs gnuplot 中的方程

> ID：14322414
> 
> 赞同：1
> 
> 时间：2013-01-14T16:25:46.567
> 
> 标签：python, gnuplot, data-fitting

我正在尝试将一些数据拟合到 python 中的方程中，但我遇到了一些困难。我有等式：

```
y(t)=yo+a(t-ti)^b+kt 
```

其中`a`、和是拟合参数，`ti`和是分别表示时间和位移的数组变量。该等式将通过一些迭代很好地适合 gnuplot，但在 python 中适合它会引发以下错误：-`b``k``t``disp`

```
ValueError: array must not contain infs or NaNs 
```

完整的堆栈跟踪是：

```
creep_test.py:246: RuntimeWarning: invalid value encountered in power
  fitfunc = lambda p, t: disp_list[0]+(p[0]*(t-p[1])**p[2])+p[3]*t # Target function
Traceback (most recent call last):
  File "creep_test.py", line 374, in <module>
    main()
  File "creep_test.py", line 368, in main
    python_fit(filename)  
  File "creep_test.py", line 256, in python_fit
    out = optimize.leastsq(errfunc, p0[:], args=(t, disp,err), full_output=1)
  File "/usr/lib/python2.7/dist-packages/scipy/optimize/minpack.py", line 338, in leastsq
    cov_x = inv(dot(transpose(R),R))
  File "/usr/lib/python2.7/dist-packages/scipy/linalg/basic.py", line 285, in inv
    a1 = asarray_chkfinite(a)
  File "/usr/lib/python2.7/dist-packages/numpy/lib/function_base.py", line 590, in asarray_chkfinite
    "array must not contain infs or NaNs")
ValueError: array must not contain infs or NaNs 
```

我发现它`ti`是导致问题的术语，如果你已经`ti`固定在周围，那么配件就可以工作`35.5`。我使用了电子表格，对于`t`下的任何值`ti`，等式抛出一个`#VALUE`（可能是因为它是虚构的）

基本上有没有办法让python像gnuplot一样适应曲线（我假设它忽略了无效的结果）？我用于我的程序的fittiong部分的代码如下：

```
 fitfunc = lambda p, t: disp_list[0]+(p[0]*(t-p[1])**p[2])+p[3]*t # Target function
  errfunc = lambda p, t, y, err: (fitfunc(p, t) - y)/(err) # Distance to the target function
  err=0.01
  p0 = [ 50, 35.5,0.005, 0.001] # Initial guess for the parameters
  out = optimize.leastsq(errfunc, p0[:], args=(t, disp,err), full_output=1)
  print out[0]
  print out[1] 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:41:05.473

宝贵的经验教训。我用来尝试打破我之前拟合的更简单方程的起始参数正在打破我现在拟合的更复杂的方程。如果配件声称解决方案没有意义，请务必检查您的起始参数。以艰难的方式学习python，这样你就不必......

# amazon-web-services - 亚马逊应用测试环境

> ID：14322417
> 
> 赞同：1
> 
> 时间：2013-01-14T16:25:51.220
> 
> 标签：amazon-web-services, amazon

只是在玩亚马逊模块的帖子，想知道亚马逊是否有类似 ebay 沙箱的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:58:25.860

没有通用的沙箱。我在亚马逊上了一堂课，他们使用第三方服务创建单独的 AWS 账户，每个学生的预算很少。使用真实账户和真实货币似乎是唯一的方法。

# android - 将 Cordova 导入我的 Android 项目

> ID：14322419
> 
> 赞同：0
> 
> 时间：2013-01-14T16:26:05.057
> 
> 标签：android, cordova

我是android开发的新手。我开始创建本机应用程序，到目前为止一切正常。但我很好奇进入 Cordova-Phonegap 开发。
我一直在阅读有关如何开始的信息，但我注意到在不同的教程中有些使用 ruby​​，有些则不使用。
那么建议我如何开始开发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:28:55.863

你在说什么教程？你在哪里读到的？在 Android 开发中的任何 Windows 或 Mac 场景下都不需要 Ruby。
阅读官方指南：[http ://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.3.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

# math - 在浮点表示中，十进制值表示为 0 100000010 010000 。. . 0

> ID：14322421
> 
> 赞同：0
> 
> 时间：2013-01-14T16:26:10.793
> 
> 标签：math

什么十进制值表示为 0 100000010 010000 。. . 0 ? 你怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T16:30:40.117

您需要知道浮点的表示标准。

[IEEE 754 只是其中之一](http://en.wikipedia.org/wiki/Floating_point)。还有其他的，这取决于这段数据的年龄，或者你从哪里得到它。

仅仅因为数字是 64 位并不意味着它具有唯一的十进制表示。它取决于指数位、尾数位、偏移量等的数量。例如，[IBM Floating Point Architecture](http://en.wikipedia.org/wiki/IBM_Floating_Point_Architecture)就不同了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:27:41.027

> 你怎么能解决这个问题？

将数字转换为十六进制，然后将其分配给内存位置并从该位置读取，将其解释为浮点数或双精度数。在`C`中，您可以使用 an`union`以不同方式解释同一块内存。

另请参阅[如果我的二进制数为 1111111111111111 并且英特尔处理器使用的存储格式是 32 位，浮点数的值是多少？](https://stackoverflow.com/q/13673045/1468366)有关如何执行此操作的详细信息。

作为实验的替代方案，您当然可以阅读 WIkipedia 文章之类的[单](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)精度或[双](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)精度浮点数文档，并从中计算出您输入的结果。

# mysql - 从 MySQL 中的每两行中选择，使用不同的列进行匹配

> ID：14322422
> 
> 赞同：0
> 
> 时间：2013-01-14T16:26:12.343
> 
> 标签：mysql, select, join, group-by

我有一个具有以下结构的 MySQL 表：

> ```
>  mysql> select id,channel,Stats,Bridged from channels;
>  +----------+---------------------------------+---------+-------------------------------+
>  | id       | channel                         | Stats   | Bridged                       |
>  +----------+---------------------------------+---------+-------------------------------+
>  | 21523318 | SIP/5602291658-0007f140         | Up      | SIP/X.Y.Z.Q-0007f13f          >      |
>  | 21523321 | SIP/X.Y.Z.Q-0007f13f            | Up      | SIP/5602291658-0007f140       |
>  | 21523322 | SIP/5154642553-0007f13a         | Up      | SIP/402-0007f135              |
>  | 21523323 | SIP/402-0007f135                | Up      | SIP/5154642553-0007f13a       | 
> ```

查看每两条记录，它们是成对的：例如 ID 21523318 的 Channel 与下一个 ID 的 Bridged 列相同。

我的问题是：考虑到该表通常包含数千个条目，我如何为每两条记录选择一行？

我的意思是——一旦我有了第一行，我可以验证“桥接”列信息在数据库中作为“通道”存在，以显示一行。我可以递归地执行此操作（检查每一行是否有另一个桥接通道，但是对于数千个它变得非常慢并且有很多查询。我正在考虑在 channel=Bridged 上对同一个表进行内部连接，然后以某种方式做一个group by什么的...

关于我应该如何进行的任何线索或想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:44:18.260

如果始终交换通道和桥接，这应该适合您：

```
select *
from channels
where id in (
  select min(id)
  from channels
  group by least(channel, bridged), greatest(channel, bridged)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:31:08.317

加入它自己：

> select * from channels c0
> join channels c1 on c0.channel = c1.Bridged

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:31:34.180

是的，应该做一个自我内部连接。

此外，您可以在通道上添加索引，桥接。

```
select C1.id, C2.id, C1.Stats, C2.Stats, C1.channel 
from channels C1 inner join channels C2 
on C1.channel = C2.Bridged; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:47:33.363

我~觉得~这样会快一点...

```
select a.*
     , b.* 
  FROM channels a 
  JOIN channels b 
    ON b.bridged = a.channel
   AND b.channel = a.bridged
   AND b.id > a.id; 
```

# c++ - 如何在“top”linux命令中进行控制台输入？

> ID：14322430
> 
> 赞同：5
> 
> 时间：2013-01-14T16:26:29.917
> 
> 标签：c++, c, linux, input, console

因此，linux`top`命令具有带有控制台输出的实时循环（没什么花哨的），但它使用非阻塞控制台输入，不会在命令行中显示键入的字符。它是怎么做的？有没有它的库，他们使用线程吗？我需要编写一个具有相同风格的 linux 应用程序（通过 ssh 使用），但我不知道如何输入（单独线程中的 cin 不是解决方案，`top`使用其他东西）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T16:32:59.323

一种解决方案是使用[curses](http://en.wikipedia.org/wiki/Ncurses)的实现。

*我不知道`top`它是怎么做的。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T17:18:50.267

另一种选择，不使用诅咒：

```
#include <stdio.h>
//#include <unistd.h>
#include <termios.h>
//#include <sys/ioctl.h>
//#include <sys/time.h>
//#include <sys/types.h>
#include <fcntl.h>

//------------------------------------------------------------------------------
// getkey() returns the next char in the stdin buffer if available, otherwise
//          it returns -1 immediately.
//
int getkey(void)
{
    char ch;
    int error;
    struct termios oldAttr, newAttr;
    int oldFlags, newFlags;
    struct timeval tv;
    int fd = fileno(stdin);
    tcgetattr(fd, &oldAttr);
    newAttr = oldAttr;
    oldFlags = fcntl(fd, F_GETFL, 0);

    newAttr.c_iflag = 0; /* input mode */
    newAttr.c_oflag = 0; /* output mode */
    newAttr.c_lflag &= ~ICANON; /* line settings */
    newAttr.c_cc[VMIN] = 1; /* minimum chars to wait for */
    newAttr.c_cc[VTIME] = 1; /* minimum wait time */

    // Set stdin to nonblocking, noncanonical input
    fcntl(fd, F_SETFL, O_NONBLOCK);
    error=tcsetattr(fd, TCSANOW, &newAttr);

    tv.tv_sec = 0;
    tv.tv_usec = 10000; // small 0.01 msec delay
    select(1, NULL, NULL, NULL, &tv);

    if (error == 0)
        error=(read(fd, &ch, 1) != 1); // get char from stdin

    // Restore original settings
    error |= tcsetattr(fd, TCSANOW, &oldAttr);
    fcntl(fd, F_SETFL, oldFlags);

    return (error ? -1 : (int) ch);
}

int main()
{
    int c,n=0;
    printf("Hello, world!\nPress any key to exit. I'll wait for 4 keypresses.\n\n");
    while (n<4)
    {
        //printf("."); // uncomment this to print a dot on each loop iteration
        c = getkey();
        if (c >= 0)
        {
            printf("You pressed '%c'\n", c);
            ++n;
        }
    }
} 
```

很抱歉，我不能完全相信这一点，因为很多年前我就把它从网上撤下了。我想我已经对其进行了一些调整，但与我得到它的地方相比，它几乎没有变化。不幸的是，我没有添加说明我在哪里找到它的评论。

# javascript - EmberJS + Handlebars：重用渲染视图

> ID：14322431
> 
> 赞同：4
> 
> 时间：2013-01-14T16:26:32.337
> 
> 标签：javascript, ember.js, handlebars.js

我在我的应用程序中使用 EmberJS 和 Handlebars 来显示大量内容。在控制器内部，有一个`stream`保存数据的数组。基于该`stream`数组，选择特定模板以正确方式显示单个条目。

现在我有不同类型的订单应该显示条目（例如，按时间排序，按用户...）。在 order 函数中，我必须根据条目的属性进行一些计算。当我更改顺序时，我调用`this.("stream").clear()`以清除数组，并以新顺序用旧条目填充它。Ember 检测到更改并导致重新渲染 Handlebar 模板。

问题是，大约 1 秒（或者当列表中有更多条目时甚至更长），页面是空白的，然后出现新顺序的条目。所以我想知道，是否可以重新使用渲染的视图（内容不会改变）并使这个过程更快。

有没有办法告诉 Ember，将渲染视图保存在缓存中或其他东西中？然后在插入 DOM 时重新使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:41:26.280

视图重用是我们一直在努力的事情。我有一个在 ListView 上进行一些工作的分支，它很好地抽象了重用。

它住在这个分支： [https ://github.com/ebryn/ember.js/tree/list-view](https://github.com/ebryn/ember.js/tree/list-view)

感兴趣的文件是：

*   [list_view.js](https://github.com/ebryn/ember.js/blob/baf28ef2630f78ffbf49752f0bd61cb83f0c6654/packages/ember-views/lib/views/list_view.js)
*   [list_item_view.js](https://github.com/ebryn/ember.js/blob/baf28ef2630f78ffbf49752f0bd61cb83f0c6654/packages/ember-views/lib/views/list_item_view.js)
*   [list_view_test.js](https://github.com/ebryn/ember.js/blob/baf28ef2630f78ffbf49752f0bd61cb83f0c6654/packages/ember-views/tests/views/list_view_test.js)

如果你正在寻找一张桌子，Addepar 已经发布了[ember-table](https://github.com/Addepar/ember-table)。

# matlab - 将 txt 文件中的一行字符放入 Matlab 中的向量中

> ID：14322432
> 
> 赞同：2
> 
> 时间：2013-01-14T16:26:38.087
> 
> 标签：matlab, vector, text-parsing, chars

我有一个看起来像这样的 txt 文件

```
a e e a a i
i i a e u i i a
a i e i i i a i 
```

我想把每一行放在一个单独的向量中（当然，每个字符都放在一个字段中）。这些线有不同的长度。数字内容似乎很容易。但是我怎么能用一行字符来做到这一点呢？

我现在选择的方法是将字符转换为数字并使用 dlmread 来完成这项工作。有更好的想法吗？

谢谢。

编辑：我自己找到了一个解决方案。但这里的反应似乎更直接。

```
fname =(['vokale/',si,'.txt']);  
         disp (['loading ...',fname]);
            fid = fopen(fname);           
            [vowels] = textread(fname, '%c');

s = textscan(fid,'%s','Delimiter','\n');
s = s{1};
b1_cell=textscan(s{1,1}, '%s');
b1=b1_cell{1,1};
b2_cell=textscan(s{2,1}, '%s');
b2=b2_cell{1,1};
b3_cell=textscan(s{3,1}, '%s');
b3=b3_cell{1,1};
b4_cell=textscan(s{4,1}, '%s');
b4=b4_cell{1,1};
b5_cell=textscan(s{5,1}, '%s');
b5=b5_cell{1,1}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:39:04.900

首先，使用以下方法获取元胞数组中的行`textread`：

```
C = textread(filename, '%s', 'delimiter', '\n') 
```

然后您可以使用`regexp`将每一行拆分为字符：

```
result = cellfun(@(x)regexp(x, '\w+', 'match'), C, 'Uniform', false) 
```

结果应该是字符元胞数组的元胞数组：

```
result = 
    {'a'    'e'    'e'    'a'    'a'    'i'}
    {'i'    'i'    'a'    'e'    'u'    'i'    'i'    'a'}
    {'a'    'i'    'e'    'i'    'i'    'i'    'a'    'i'} 
```

或者，如果您只处理以空格分隔的字母（即仅一个字符），您可以将每一行存储为一个字符串（相当于 C 中的一个字符数组）。为此，只需删除空格。例如，使用`regexprep`：

```
result = cellfun(@(x)regexprep(x, ' ', ''), C, 'Uniform', false)
result = 
    'aeeaai'
    'iiaeuiia'
    'aieiiiai' 
```

例如，要访问`e`第二行中的 ，您可以编写`result{2}(4)`.

# php - 覆盖 FOSUserBundle 注册表单

> ID：14322433
> 
> 赞同：2
> 
> 时间：2013-01-14T16:26:44.713
> 
> 标签：php, symfony, fosuserbundle

我正在使用 FOSUserBunlde。我已经使用本教程覆盖了它的注册表： [https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)

所以我添加了一个新的名字。

在树枝文件中使用 form_widget(form) 时，它可以工作。但是，我现在想分别显示表单的每个元素。

所以我用：

```
<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">

     {{ form_errors(form) }}
    <div>     
        {{ form_label(form.firstname, "First name") }}
        {{ form_errors(form.firstname) }}
        {{ form_widget(form.firstname) }}
    </div>  
    <div>
       <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
    </div>
</form> 
```

唯一显示的字段是form_label但没有显示输入框的问题。如何修复它以仅显示例如名字字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T21:18:41.703

我有一个类似的问题，但我已经（错误地）注释掉了 {{ form_widget(form) }}。在我的代码中更高。

所以我做了：

```
<!-- {{ form_widget(form) }} --> 
```

当我应该做的时候：

```
{# {{ form_widget(form) }} #} 
```

或者只是将其完全删除。我注意到你没有显示任何注释掉的代码，所以这可能不是你的问题，但我想我会添加这个，以防其他人看到你的帖子并且有类似的东西。

# sql - 从 SQL 导出批处理文件 - 脚本编辑

> ID：14322439
> 
> 赞同：0
> 
> 时间：2013-01-14T16:26:57.397
> 
> 标签：sql, sql-server, batch-file, bcp

我在互联网上找到了一个 bat 脚本，它从带有标题行的 SQL 中导出一个查询，并将其导出到一个制表符分隔的 csv 文件中。该脚本效果很好，但是，我需要文件格式为逗号分隔文件而不是表格。

我对脚本的 BCP 部分进行了一些尝试，但它不起作用。有没有人有任何想法？

```
@ECHO OFF
REM -------------------------------------------------------------------------------
REM Generic script for exporting data to file from SQL Server using a SQL query.
REM The resulting file will be tab separated with newline as the row delimiter.
REM A log file is generated and kept in case of an error or when in debug mode.
REM See command syntax for details.
REM
REM History:
REM 20120327    Lars Rönnbäck   CREATED
REM -------------------------------------------------------------------------------
:constants
SET myCodePage=ACP
:variables
SET theQuery=SELECT  [D-U-N-S Number], [Company Name], [Street Address Line 1], [Street         Address Line 2], [Street Address Line 3], [Street Address Line 4], Town, [County (Actual)], [Full Postcode], [Telephone Number] FROM B2B_Jan13.dbo.DATA_HQ_1_Site_Level
SET theFile=C:\B2B_Matching_Automation\Temp_Files\Sites.csv
SET theServer=localhost
SET theDebug=%~4
SET /a aRandomNumber=%random%%%1000
FOR /F "usebackq tokens=1-7* delims=.:/,- " %%a IN (`ECHO %DATE%_%TIME%`) DO (SET myStartTime=%%a%%b%%c%%d%%e%%f%%g)
SET myColumnQuery="select top 0 * into [#columns_%myStartTime%_%aRandomNumber%] from (%theQuery%) q; select stuff((select char(9) + c.name from tempdb.sys.columns c where c.object_id = t.object_id order by c.column_id for XML path(''), type).value('.', 'varchar(max)'), 1,1,'') AS Header from tempdb.sys.tables t where t.name like '#columns_%myStartTime%_%aRandomNumber%%%'"
SET myHeaderFile=%theFile%.%aRandomNumber%.header
SET myDataFile=%theFile%.%aRandomNumber%.data
SET myLogFile=%theFile%.%myStartTime%_%aRandomNumber%.log
:checks
IF "%theQuery%"=="" (
GOTO syntax
) 
IF "%theFile%"=="" (
GOTO syntax
) 
IF "%theServer%"=="" ( 
SET theServer=%COMPUTERNAME%
)
:information
ECHO Start Time:    %myStartTime%       >> "%myLogFile%" 2>&1
ECHO Random Number: %aRandomNumber%     >> "%myLogFile%" 2>&1
ECHO File:          %theFile%           >> "%myLogFile%" 2>&1
ECHO Server Name:   %theServer%         >> "%myLogFile%" 2>&1
ECHO Query:                             >> "%myLogFile%" 2>&1
ECHO.                                   >> "%myLogFile%" 2>&1
ECHO %theQuery%                         >> "%myLogFile%" 2>&1
:export
BCP %myColumnQuery% queryout "%myHeaderFile%" -T -S "%theServer%" -a 65535 -c -C %myCodePage% -q >> "%myLogFile%" 2>&1
IF ERRORLEVEL 1 GOTO error
BCP "%theQuery%" queryout "%myDataFile%" -T -S "%theServer%" -a 65535 -c -C %myCodePage% -q >> "%myLogFile%" 2>&1
IF ERRORLEVEL 1 GOTO error
ECHO.                   >> "%myLogFile%" 2>&1
ECHO Merging files...   >> "%myLogFile%" 2>&1
ECHO.                   >> "%myLogFile%" 2>&1
COPY /A "%myHeaderFile%" + "%myDataFile%" "%theFile%" /B /Y >> "%myLogFile%" 2>&1
IF ERRORLEVEL 1 GOTO error
:cleanup
DEL "%myHeaderFile%" >NUL 2>&1
IF ERRORLEVEL 1 GOTO error
DEL "%myDataFile%" >NUL 2>&1
IF ERRORLEVEL 1 GOTO error
IF /I NOT [%theDebug%]==[Y] (
DEL "%myLogFile%"
)
IF ERRORLEVEL 1 GOTO error
GOTO end
:error
ECHO 
ECHO ERROR: An export error has occured!
IF NOT [%myLogFile: =%]==[] (
  ECHO Details can be found in:
  ECHO %myLogFile%
)
ECHO 
EXIT /B 1
:syntax
    ECHO.
ECHO SYNTAX: %0 "sql query" "output file" [server] [Y]
ECHO -------------------------------------------------------------------------------
ECHO You must specify an SQL query and an output file name in which the results of  
ECHO the query will be stored. Specifying a server is optional and defaults to the  
ECHO server you are executing on. If a fourth argument is given as Y a log file of
ECHO the command outputs will be saved in the same folder as the output file.
ECHO -------------------------------------------------------------------------------
:end
REM This is the end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:50:19.667

看一下 BCP 命令的 -t 选项。

> **-t** field_term
> 
> ```
> Specifies the field terminator. The default is \t (tab character). Use this
>  parameter to override the default field terminator. For more
>  information, see Specify Field and Row Terminators (SQL Server).
> 
> If you specify the field terminator in hexadecimal notation in a bcp.exe command, 
>  the value will be truncated at 0x00\. For example, if
>  you specify 0x410041, 0x41 will be used.
> 
> If field_term begins with a hyphen (-) or a forward slash (/), do not include a
>   space between -t and the field_term value. 
> ```

[在这里找到](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

我自己没有使用过这个，但也许这会为你指明正确的方向。

# eclipse-plugin - 新的 Action eclipse 插件

> ID：14322451
> 
> 赞同：0
> 
> 时间：2013-01-14T16:27:36.450
> 
> 标签：eclipse-plugin

我添加到我的 eclipse 插件弹出菜单中，如果我只想在文件上弹出它可以工作，但是如果我想弹出到包资源管理器中的项目，它就不起作用

```
<objectContribution
               id="com.dal.pedal.popupMenu"
               objectClass="org.eclipse.core.resources.IProject">

          <action
                class="com.dal.pedal.popup.actions.upgradeApplet"
                id="com.dal.pedal.upgradeApplet"
                label="UpgradeApplet"
                 menubarPath="com.dal.pedal.setActive">
          </action>
       </objectContribution> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:29:33.007

尝试这样的事情。

```
 <viewerContribution
    id="com.sample"
    targetID="org.eclipse.jdt.ui.PackageExplorer">
    <action
            class="com.dal.pedal.popup.actions.upgradeApplet"
            id="com.dal.pedal.upgradeApplet"
            label="UpgradeApplet"
            menubarPath="com.dal.pedal.setActive">
      </action>
   </viewerContribution>
 .... 
```

如需更多帮助，请参阅[此](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_basicext_popupMenus.htm)

# google-app-engine - Google Blobstore 在某些网络上被阻止

> ID：14322455
> 
> 赞同：1
> 
> 时间：2013-01-14T16:27:55.400
> 
> 标签：google-app-engine

我收到报告称，我们从 Google Blobstore (ggpht.com) 提供的图像在某些网络上被阻止。有人对我们如何避免这种情况提出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:09:35.940

[这是答案吗？](https://groups.google.com/forum/?fromgroups=#!topic/PicasaSomethingBroken/slUTFEuVSdk)

撤消“阻止来自 Ih6.ggpht.com 的图像”

# jquery - 悬停期间的颜色变化拒绝恢复

> ID：14322456
> 
> 赞同：3
> 
> 时间：2013-01-14T16:28:03.293
> 
> 标签：jquery, html, css

我有一个`div`，比如说`DivX`，我已经为此编写了`hover`功能`css`来更改它的`background-color`. 此外，我添加了一个`jquery`动画效果来移动它的`left`. 现在的问题是，每当我点击时`DivX`，`hover`效果就会发生并完美地动画化，但是`background-color`更改期间`hover`拒绝返回，直到我移动`cursor`.

## [演示](http://jsfiddle.net/mN7L8/)

***重现步骤：***

*   把它`cursor`放在上面`DivX`，你可以看到它`background-color`变了。
*   点击它。[注意：不要移动光标。]
*   现在您可以看到，`DivX`已经动画到它的新位置，但它`background-color`保持不变。
*   现在，移动`mouse cursor`，您可以注意到`background-color`变化。

我的问题是，我怎样才能`Hover`在没有任何中断的情况下使用我的情况下的功能。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:42:28.030

```
$(document).ready(function(){
  var count = 0;
  $("#test").click(function(){
    $(this).animate({ "left": "200"}, 500 );
    if(!count){
      count++;
    $(this).css({'background-color':'orange'});
    }
  });  
  $("#test").hover(function(){
    $(this).css({'background-color':'yellow'});
  }, function(){
  $(this).css({'background-color':'orange'});
  });

}); 
```

## [http://jsfiddle.net/mN7L8/7/](http://jsfiddle.net/mN7L8/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:58:00.663

这是一种解决方法，其工作方式与 Yusaf 的回答类似。设置一个在悬停时保持背景橙色的类，然后使用“动画完成”回调删除该类。删除该类后，如果再次悬停，您将获得所需的结果。

CSS：

```
#test.fix:hover, #test.fix{
    background-color:orange;
} 
```

JS：

```
$("#test").click(function(){ 
   $(this).animate({ "left": "200"}, 500, function(){ $(this).removeClass("fix");
   }).addClass("fix");
}); 
```

# asp.net-mvc - 在 MVC Razor 视图中使用 @RenderBody 有什么意义？

> ID：14322458
> 
> 赞同：14
> 
> 时间：2013-01-14T16:28:14.740
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在我正在使用的 MVC4 剃须刀布局中`@RenderSection`，我不打扰`@RenderBody`.

然后在视图中，我只是将所有内容放在部分中。

这让我想知道`@RenderBody`除了让不想把东西分成几部分的人更容易之外还有什么意义。`@RenderBody`与 a有什么不同`@RenderSection`吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T16:31:07.270

`@RenderBody`呈现*不在任何命名部分中的页面内容。* 如果您的**所有**内容都在您定义的部分之一内，那么没有意义。然而...

在 Razor 语法中，`@RenderSection`替换母版页。它允许您为特定区域划分页面部分，然后让内容的主体自然地出现在`@RenderBody`放置声明的任何位置。

假设您正在编写发票。该`RenderBody`区域将是包含发票行项目的页面部分。大多数报告都是如此；总是有一个页眉部分、一个正文部分和一个页脚部分。

据推测，在网页的适当区域呈现一个部分可以让您获得正确的语义行为，例如以始终出现在页面底部的方式设置页脚的样式。

```
<footer>
  @RenderSection("Footer", @<span>This is my footer!</span>)
</footer> 
```

[http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor_topic2.aspx](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvc3razor_topic2.aspx)

[http://haacked.com/archive/2011/03/05/defining-default-content-for-a-razor-layout-section.aspx](http://haacked.com/archive/2011/03/05/defining-default-content-for-a-razor-layout-section.aspx)

# python-sphinx - 在 Sphinx 中使用 noindex 和词汇表

> ID：14322461
> 
> 赞同：6
> 
> 时间：2013-01-14T16:28:18.723
> 
> 标签：python-sphinx, restructuredtext, glossary

使用 Sphinx 1.1.3 时，如何创建`.. glossary::`未显示在自动生成的索引中的条目？

我尝试`:noindex:`了四个地方：

词汇表前后使词汇表消失。

```
.. :noindex: glossary:: 

    `term`
        definition

.. glossary:: :noindex:

    `term`
        definition 
```

将其与术语放在一起使术语可点击并显示`:noindex:`.

```
.. glossary:: 

    :noindex: `term`
        definition

.. glossary:: 

    `term` :noindex:
        definition 
```

我的术语有特殊字符，所以我特意用反引号括起来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T11:19:49.687

据我了解，该`glossary`指令为每个可以从文档中的任何位置轻松引用的术语创建挂钩；这最终会出现在某个索引中，至少在构建时内部是这样。

要解决此问题，您可以使用标准定义列表：

```
 term_1
   definition for term_1

 term_2
   definition for term_2 
```

然后，这些定义将仅在本地写入，不会出现在主索引中。有关语法的更多详细信息，请参阅[reST 文档](http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html#definition-lists)。

如果您想在此类列表中明确包含某些术语，则可以使用该`:index:`角色。

```
 :index:`term_3`
   definition for an indexed term 
```

这些术语现在将出现在索引中。但是，除非是很少的术语，否则这是实现词汇表为您提供的功能的笨拙方式；并且失去了使用交叉引用的能力（使用 syntax `:term:`term_1``）。

# java - X509Certificates 添加到 X509Data 的证书列表时重复

> ID：14322463
> 
> 赞同：0
> 
> 时间：2013-01-14T16:28:22.610
> 
> 标签：java, opensaml

我正在尝试将证书添加到 OpenSAML 中的 X509Data 对象。但是，当我这样做时，证书似乎被添加了两次。下面的代码演示了这一点。我在做傻事吗？

```
import org.junit.Test;
import org.opensaml.Configuration;
import org.opensaml.DefaultBootstrap;
import org.opensaml.xml.ConfigurationException;
import org.opensaml.xml.XMLObjectBuilderFactory;
import org.opensaml.xml.signature.X509Certificate;
import org.opensaml.xml.signature.X509Data;

import static org.hamcrest.CoreMatchers.is;
import static org.junit.Assert.assertThat;

public class BrokenListAdditionTest {
    @Test
    public void shouldNotFail() throws ConfigurationException {
        DefaultBootstrap.bootstrap();

        XMLObjectBuilderFactory openSamlBuilderFactory = Configuration.getBuilderFactory();
        X509Certificate x509Certificate = (X509Certificate) openSamlBuilderFactory.getBuilder(X509Certificate.DEFAULT_ELEMENT_NAME).buildObject(X509Certificate.DEFAULT_ELEMENT_NAME, X509Certificate.DEFAULT_ELEMENT_NAME);
        x509Certificate.setValue("foo-value");
        X509Data x509Data = (X509Data) openSamlBuilderFactory.getBuilder(X509Data.DEFAULT_ELEMENT_NAME).buildObject(X509Data.DEFAULT_ELEMENT_NAME, X509Data.TYPE_NAME);
        x509Data.getX509Certificates().add(x509Certificate);

        assertThat(x509Data.getX509Certificates().size(), is(1)); // Fails, because size() is 2!?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:52:27.127

这很奇怪，我无法找到一个很好的解释。正如我在评论中所说，它似乎正在完成某种索引。

但是，我尝试将元素编组为 XML，并且那里的每件事看起来都很好。所以我认为无论如何你都可以使用它。

```
<?xml version="1.0" encoding="UTF-8"?>
<ds:X509Data xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="ds:X509DataType">
<ds:X509Certificate xsi:type="ds:X509Certificate">foo-value</ds:X509Certificate>
</ds:X509Data> 
```

# excel-2010 - 以编程方式查找 sum_range

> ID：14322467
> 
> 赞同：0
> 
> 时间：2013-01-14T16:28:33.567
> 
> 标签：excel-2010

我正在使用该`sumif`函数，而不是硬编码`range`和`sum_range`单元格范围是什么，我想使用类似的东西来查找它们`match.`基本上，我`sum_range`的列有一个我可以查找的列标题，所以在伪代码中，我想要做的是：

1.  找到我要求和的范围的列标题
2.  找到该列后，选择整个列作为范围
3.  使用这个新发现的范围作为我的`range`或函数`sum_range``sumif`

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:39:54.820

您可以查看以下示例并根据您的需要进行调整：

![匹配索引和的 Excel 公式](../Images/f72fab488a6f58e19c5f69ac72817203.png)

```
= SUM(INDEX(A2:C5;;MATCH(F2;A1:C1))) 
```

*   `Match()`选择所需的列（由 cell 给出`F2`）
*   `Index()`然后从给定数组中剪切此列
*   `Sum()`求和 - 我使用了 sum 函数，但你可以使用任何你喜欢的函数

# angularjs - AngularJS 1.0.3 中的内联编辑

> ID：14322470
> 
> 赞同：0
> 
> 时间：2013-01-14T16:28:36.323
> 
> 标签：angularjs

我发现一个[很棒的小提琴](http://jsfiddle.net/vojtajina/XuhzP/64/)在 AngularJS 0.10 中显示了一个内联编辑指令。不幸的是，该代码在 1.0 之后的版本中不起作用。有没有人在最近的 Angular 版本中有类似功能的例子？

我设法通过更改`model: 'accessor'`为取得了一些进展`model: '&'`，但是当我按下回车键时，文本值没有改变。关于指令定义对象的参数的[AngularJS 文档对我来说是完全无法理解的。](http://docs.angularjs.org/guide/directive)`scope`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:04:29.283

如果你想要一个简单 **的双向绑定**使用`model: '='`而不是`model: '&'`

指示：

```
app.directive('inlineEdit', function() {
    return {
        restrict: 'E',           
        templateUrl: 'componentTpl.html',
        scope: {
            model: '=' 
        }
    };
}); 
```

模板：

```
<script type="text/ng-template" id="componentTpl.html">  
    <span ng-hide="editMode" ng-click="editMode=true;value=model">{{model}}</span>
    <input type="text" ng-model="value" ng-show="editMode" ng-model-instant ng-enter="editMode=false" ng-change="model=value"/>
</script> 
```

**jsFiddler**：http: [//jsfiddle.net/XuhzP/147/](http://jsfiddle.net/XuhzP/147/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:09:44.303

您应该使用“=”绑定（双向），然后直接绑定到范围的“模型”属性。

这是更正的示例：[http ://plnkr.co/edit/tjTsNiQ7t0xMWkCEAzwo?p=preview](http://plnkr.co/edit/tjTsNiQ7t0xMWkCEAzwo?p=preview)

（它与@bmleite 给出的解决方案相同）

# jquery - 使用 Bootstrap 的动态菜单

> ID：14322471
> 
> 赞同：0
> 
> 时间：2013-01-14T16:28:37.563
> 
> 标签：jquery, twitter-bootstrap, menu

我正在开发一个大约 10-15 页的小网站，完全用 Bootstrap 制作，我开始想知道，有没有一种简单的方法来制作动态菜单（这意味着如果我添加，我不需要在每个页面上更新它，删除或重命名页面）对于像我这样的菜鸟？

所以我找到了这篇文章：[jquery append external html file into my page](https://stackoverflow.com/questions/8277462/jquery-append-external-html-file-into-my-page)

我认为这将是完美的，所以我制作了一个单独的菜单文件并导入了代码。问题是，由于只有一个菜单文件，我无法将 class="active" 属性应用于我当前正在查看的菜单页面/部分。有没有办法做到这一点？非常感谢和对不起英语，我不是母语人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:01:56.403

如果您将数据附加到页面，然后尝试对其进行 jQuery 翻转/鼠标输入，则需要在其上使用`.live()`函数，以便 jQuery 知道元素已添加：

```
$('.menuitem').live('mouseover',function(){
    //-- script here --//
}); 
```

希望这可以帮助！！

如果您可以访问 PHP，将菜单内容放在`.php`文件中然后包含它会更容易：

```
include("menu.php"); 
```

这意味着菜单将被添加到服务器端（在浏览器加载页面之前）并且 jQuery 可以正常工作。

# javascript - 为什么“onload”不能在 元素？

> ID：14322474
> 
> 赞同：1
> 
> 时间：2013-01-14T16:28:44.653
> 
> 标签：javascript, function, svg, onclick, onload

代码：

```
 <circle id="whitecircle" cx="500" cy="500" r="25" fill="url(#grad1)" onclick="setCoordinates(evt)"  /> 
```

这工作得很好。“setCoordinates(evt)” 函数在单击时为圆提供一个随机位置。

但是，当我用“onload”重播“onclick”时，它只会停留在“500,500”。

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:31:19.183

该元素未加载任何外部内容。由于没有要加载的内容，因此它没有加载事件。

您可以在定义圆元素后立即运行脚本。

```
<circle ... />
<script> function_call() </script> 
```

（HTML`body`元素是一个特例，代表当前文档）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:33:38.380

`<svg>`在 Firefox 上，出于性能原因，仅将 onload 事件分派给元素。Firefox 存在一个关于不向`<image>`元素分派 onload 事件的错误，但目前只有`<svg>`元素可以跨浏览器工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:33:48.643

onload 事件有时也会出现这个问题。将您的 javascript 调用移至页面末尾。

# javascript - 使用与“标准”相同的功能和事件处理程序

> ID：14322477
> 
> 赞同：0
> 
> 时间：2013-01-14T16:28:48.607
> 
> 标签：javascript, event-bubbling

我有一个功能

```
function foo(event, var1) {
    // do something...
} 
```

我在某些事件冒泡中使用此函数，但我还需要将其用作我从代码中调用的普通函数。`Event`参数仅用于事件冒泡。从我自己的代码中传递什么来让它`event`工作？

Ps 我觉得这不是好的设计，但事情就是这样。到时候我们会改变它，但现在，它必须保持这样。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:45:20.087

如果`var1`总是传递给函数，那么你应该切换参数的顺序。

如果你的函数运行，那么它是否为空`foo(var1, event)`并不重要，该函数仍然可以工作。`event`这与[可选参数](http://javascript.about.com/od/3functions/a/fun04.htm)的概念有关。

# android - 推送到 github 时应删除的 Android 应用程序中的任何信息？

> ID：14322478
> 
> 赞同：3
> 
> 时间：2013-01-14T16:28:49.760
> 
> 标签：android, open-source

我正在考虑将我的 Android 应用程序推送到 github，但是在推送之前我应该​​删除任何信息吗？（比如在我的项目文件夹或某种隐藏/嵌入信息中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:32:44.987

1.  确保您的项目结构中没有任何密钥库
2.  如果您使用 Google 地图或其他任何带有 API 密钥的东西，请删除 API 密钥。
3.  如果您的电子邮件是帮助页面或其他内容的一部分，如果您不希望它公开可见，请将其删除。

# android - 以编程方式查找多点触控 Android 设备支持多少根手指

> ID：14322480
> 
> 赞同：9
> 
> 时间：2013-01-14T16:28:54.617
> 
> 标签：android, multi-touch

[在 Android 上，可以通过http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TOUCHSCREEN_MULTITOUCH](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TOUCHSCREEN_MULTITOUCH)以编程方式检查设备是否支持多点触控。

是否也可以准确检查设备在多点触控中可以识别多少根手指？例如，据我所知，从 2.x 开始支持 2 指多点触控，但从 4.0 开始支持 3 指多点触控。但是我们的客户报告说有一些 4.x 的新设备仍然不支持 3 指，这使得对 Android 操作系统版本的简单检查毫无用处。

一个可能的解决方案是为每个设备存储它最多支持的手指数量的字典，但是有 1k+ 设备并且不断出现新设备是不可行的。

有什么解决办法吗？

编辑：事实上，我刚刚发现客户报告的问题是 HTC One 系列的设备问题。请参阅[http://www.mobiflip.de/htc-one-serie-multitouch-beschraenkung-aufheben-tipp/](http://www.mobiflip.de/htc-one-serie-multitouch-beschraenkung-aufheben-tipp/)用户必须在设置中打开特定于设备的手势识别才能使 5 个以上的手指工作。因此，该设备甚至可能会显示 5 个以上的手指支持。我想我们只会检查设备的型号并显示特殊的弹出窗口，告诉用户关闭特定于 HTC 的设置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T16:35:53.920

据我所知，没有办法获得设备支持的确切*指针数量。*我不想在这里重新发明轮子，所以我想在这里分享一个类似的问题和一个很好的答案：[Android multitouch in supported devices](https://stackoverflow.com/a/7244656/1820695)。

总而言之，值得注意的是该方法`PackageManager.hasSystemFeature()`允许您找出当前设备属于哪个多点触控支持类别。有用的功能代码包括：

*   `FEATURE_TOUCHSCREEN_MULTITOUCH`*- 对 2 个指针*的基本支持
**   `FEATURE_TOUCHSCREEN_MULTITOUCH_DISTINCT`- 支持 2+*独立指针*。*   `FEATURE_TOUCHSCREEN_MULTITOUCH_JAZZHAND`- 支持 5+*独立指针*。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:39:13.790

您不想只检查 MULTITOUCH，而是要检查[FEATURE_TOUCHSCREEN_MULTITOUCH_JAZZHAND](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TOUCHSCREEN_MULTITOUCH_JAZZHAND)*

# javascript - phonegap 图片base64 android

> ID：14322482
> 
> 赞同：1
> 
> 时间：2013-01-14T16:28:55.970
> 
> 标签：javascript, image, cordova, camera, base64

我想将从相机拍摄的照片作为 base64 字符串发送到服务器。我的问题是图片在手机中以某种方式损坏。

我有一些console.logs在camera.getPicture的成功函数中打印base64字符串，每当我打印字符串和解码图像时，它只显示顶部，就好像它不完整一样。

这是我的代码：

```
photo.capturePhoto = function(image_button_id) {
        navigator.camera.getPicture(function(image) {
            photo.onPhotoDataSuccess(image)
        }, onFail, {
            quality : 30,
            destinationType: destinationType.DATA_URL,
            correctOrientation : true
        });
    } 
```

和成功功能：

```
photo.onPhotoDataSuccess = function(image) {
        console.log(image); //What this prints is an incomplete image when decoded
    } 
```

这段代码有什么问题？

这是解码时的示例图像：[http ://www.freeformatter.com/base64-encoder.html](http://www.freeformatter.com/base64-encoder.html) ![在此处输入图像描述](../Images/27f868c486da75e6a07d97b0a376904e.png)

我正在使用 phonegap 2.2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:43:09.773

您可以尝试提高图像质量吗？如果质量设置为低，我记得读过一些安卓手机会出现问题。我知道这是一个远射但值得一试:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:17:59.327

我相信 console.log 对它可以打印的字符数有限制。当您将数据设置为图像标签的来源时会发生什么，例如：

```
function onSuccess(imageData) {
    var image = document.getElementById('myImage');
    image.src = "data:image/jpeg;base64," + imageData;
} 
```

此外，您可能想尝试将数据写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T07:34:15.253

我在android中遇到了同样的问题，确切的问题是什么_当我将图像编码为其对应`Base64`的&如果图像大小更大（2mb或更多......&也取决于图像质量和相机质量，可能取自2MP或 5MP 或可能是 8MP 相机）然后将完整图像转换为 Base64 会遇到问题...您必须减小关注图像的大小！我已经完成了我的工作`Android code`_
***获取 Base64 图像字符串***

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
        Bitmap mBitmap= new decodeFile("<PATH_OF_IMAGE_HERE>");
        mBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        byte[] b = baos.toByteArray();
        int i=b.length;
        String base64ImageString=android.util.Base64.encodeToString(b, 0, i, android.util.Base64.NO_WRAP); 
```

***转换为正确的位图***

```
 /**
        *My Method that reduce the bitmap size.
        */
        private Bitmap decodeFile(String  fPath){

        //Decode image size
        BitmapFactory.Options opts = new BitmapFactory.Options();
        //opts.inJustDecodeBounds = true;
        opts.inDither=false;                     //Disable Dithering mode
        opts.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
        opts.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
        opts.inTempStorage=new byte[1024]; 

        BitmapFactory.decodeFile(fPath, opts);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;//or vary accoding to your need...

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(opts.outWidth/scale/2>=REQUIRED_SIZE && opts.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
         opts.inSampleSize=scale;

        return BitmapFactory.decodeFile(fPath, opts);

   } 
```

我希望这会帮助其他面临同样问题的朋友......谢谢！

# javascript - 跨浏览器 jQuery - Firefox 问题

> ID：14322483
> 
> 赞同：0
> 
> 时间：2013-01-14T16:28:56.713
> 
> 标签：javascript, jquery, google-chrome, firefox, dynamic

这段代码在这里：

```
jQuery(function($){
        var $button = $('#addrowbutton'),
            $row = $('.addrow').clone();
        $button.click(function(){
            $row.clone().insertBefore( $button );
        });
    }); 
```

无法在 Firefox 上运行，但在 Chrome 和 IE 上运行良好。

这是呼叫按钮：

```
<input type="button" class=button id="addrowbutton" name="addrowbutton" value="Add Row" style="height: 2em;"/> 
```

有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:45:18.837

我已将您的代码放入 jsfiddle 并在 Firefox 中对其进行了测试。对我来说很好。

[http://jsfiddle.net/nadjib/X48xB/](http://jsfiddle.net/nadjib/X48xB/)

HTML：

```
<div class="addrow">Row</div>
<input type="button" class=button id="addrowbutton" name="addrowbutton" value="Add Row" style="height: 2em;" /> 
```

jQuery：

```
var $button = $('#addrowbutton'),
    $row = $('.addrow').clone();

$button.click(function () {
    $row.clone().insertBefore(this);
}); 
```

我使用“this”而不是$button，因为“this”是您刚刚点击的（即此处的按钮）。

# wcf-data-services - WCF 数据服务和便携式库

> ID：14322489
> 
> 赞同：1
> 
> 时间：2013-01-14T16:29:16.060
> 
> 标签：wcf-data-services

我正在尝试将 WCF 数据服务与包含在可移植库中的 POCO 数据模型一起使用。服务器端使用模型没有问题，但是在客户端，当提要实现时，我得到这个错误：

类型为“PortableEntities.Customers”的名称为“Orders”的属性具有“Structural”类型，但预计为“Navigation”类型

客户端似乎无法具体化未实现为 DataServiceCollection 的关系（可移植库不可用的类型）。

有没有办法使用其他 ICollection 类型，如 HashSet 或 List？

这是我的便携式库中的模型类（来自 Northwind）：

```
Partial Public Class Customers
    Public Property ID As String
    Public Property CompanyName As String
    Public Property ContactName As String
    Public Property ContactTitle As String
    Public Property Address As String
    Public Property City As String
    Public Property Region As String
    Public Property PostalCode As String
    Public Property Country As String
    Public Property Phone As String
    Public Property Fax As String

    Public Overridable Property Orders As ICollection(Of Orders) = New HashSet(Of Orders)
    Public Overridable Property CustomerDemographics As ICollection(Of CustomerDemographics) = New HashSet(Of CustomerDemographics)

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:20:14.590

您可以分享 Orders 类的定义吗？Orders 是否具有 ID 属性或 DataServiceKey 属性？如果不是，WCF 数据服务会将其视为复杂类型而不是实体类型。添加 ID 属性或 DataServiceKey 属性可能会有所帮助。

# ios - 低分辨率预览图像

> ID：14322494
> 
> 赞同：0
> 
> 时间：2013-01-14T16:29:39.283
> 
> 标签：ios, objective-c

我有一堆经过颜色校正的大型 360 度图像序列，并且翻转旋转真的很不稳定。我可以添加一个低分辨率版本并将其换掉，但似乎有些应用程序会自动执行此操作（我不确定它是 PDF 还是照片），我不确定它是否正在读取嵌入的缩略图数据或发生了什么。

大多数图像是 1.5MB，客户坚持使用经过批准的颜色校正图像，但它可以从低分辨率切换到高分辨率，有数千张图像，我不想再膨胀应用程序包，因为它是现在相当大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:07:02.577

如果延迟是由加载过程引起的，那么您将不得不加载并显示缩略图而不是大图像。您可能希望在第一次启动应用程序时以编程方式创建缩略图，方法是缩小图像一次并将其存储在用户设备上的[临时目录中。](https://stackoverflow.com/questions/6847788/create-directory-inside-nstemporarydirectory)这不会增加捆绑包的大小。

如果由于频繁显示大图像而导致延迟，您可以通过[编程](http://www.sourcedrop.net/3vP43a1dec4c7)将它们调整为正确的大小并将它们存储[在内存缓存](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCache_Class/Reference/Reference.html)中。

# c# - 从类（多线程）更新 UI？

> ID：14322495
> 
> 赞同：0
> 
> 时间：2013-01-14T16:29:40.310
> 
> 标签：c#, multithreading, user-interface

> **可能重复：**
> [如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-the-gui-from-another-thread-in-c)

如何从线程类更新我的 UI？无法从线程访问更新表单控件。我想根据每个特定线程的进度更新我的 UI。

```
class MyClass
    {
        public delegate void CountChangedEventHandler(int vCount, int vIndex);
        public event CountChangedEventHandler CountChanged;

        private int count;
        private int index;

        public MyClass(int index)
        {
            this.index = index;
        }

        public int Count
        {
            get { return this.count; }
            set
            {
                this.count = value;
                if (this.CountChanged != null)
                    this.CountChanged(value, this.index);
            }
        }

        public void DoWork(object o)
        {
            for (int i = 0; i < 10000; i++)
            {
                this.Count = i;
            }
        }
    }

    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 3; i++)
            {
                MyClass myCount = new MyClass(i);
                myCount.CountChanged += new MyClass.CountChangedEventHandler(UpdateUI);

                ListViewItem lvi = new ListViewItem();
                lvi.Text = "Thread #" + i.ToString();
                lvi.SubItems.Add("");
                listView1.Items.Add(lvi);

                ThreadPool.QueueUserWorkItem(new WaitCallback(myCount.DoWork));

            }
        }

        private void UpdateUI (int index, int count)
        {
            listView1.Items[index].SubItems[0].Text = count.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:36:58.723

您需要使用`Invoke`或`BeginInvoke`将 UI 访问编组回 UI 线程。

我建议`Invoke`在这种情况下使用，因为这将阻止你的循环过于超前：

```
private void UpdateUI (int index, int count)
{
  Invoke( ( MethodInvoker ) (
    () => listView1.Items[index].SubItems[0].Text = count.ToString()
  ) );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:48:51.663

有多种方法可以实现这一目标。这里有几个选项：

1）[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx) - 你可以在网上找到很多关于如何使用它的例子，只要你只需要在这个过程中将进度（整数）传回 UI 就可以了。

2) 带有计时器的消息队列 - 让您可以选择将进度传递回 UI。

这是我编写的 WPF 应用程序中选项 2 的示例，它将字符串传递回 UI，当然，您可以将字符串替换为所需的任何自定义对象。此外，需要 .NET 3.0 或更高版本：

```
private static List<string> MessageQueue = new List<string>();

private void Window_Loaded(object sender, RoutedEventArgs e)
{
    DispatcherTimer messageQueueTimer = new DispatcherTimer();
    messageQueueTimer.Tick += messageQueueTimer_Elapsed;
    messageQueueTimer.Interval = new TimeSpan(1); //1 tick
    messageQueueTimer.Start();
}

protected void messageQueueTimer_Elapsed(object sender, EventArgs e)
{
    lock(MessageQueue)
    {
        //Read message from queue and remove it.
    }
}

//WriteLine can be called from any asyncronous method spawed from the UI.
public void WriteLine(string message)
{
    lock(MessageQueue)
    {
        //Insert message into the queue.        
    }
} 
```

还有其他几种方法可以实现这一点，但这应该可以帮助您入门。希望这可以帮助！

# android - SharedPreferences 未按预期工作

> ID：14322504
> 
> 赞同：1
> 
> 时间：2013-01-14T16:30:25.710
> 
> 标签：android, sharedpreferences

我遇到了一些麻烦`SharedPreferences`。看起来它们没有通过我的不同活动共享（例如，我的偏好保存在我的活动中，`PreferencesActivity`但在我的其他活动中不可用）

这是我的 PrefencesActivity 的代码：

```
public class SettingsActivity extends SherlockPreferenceActivity {

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            // Creating the ActionBar
            ActionBar mActionBar = getSupportActionBar();
            mActionBar.setHomeButtonEnabled(true);
            mActionBar.setDisplayShowHomeEnabled(true);
            mActionBar.setDisplayHomeAsUpEnabled(true);

            // Getting the preferences
            SharedPreferences preferences = getApplicationContext().getSharedPreferences("PreferencesFile", getApplicationContext().MODE_PRIVATE);
            getPreferenceManager().setSharedPreferencesName("PreferencesFiles");
            addPreferencesFromResource(R.xml.preferences);
    }
} 
```

首选项.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory
            android:title="Informations utilisateur">

        <EditTextPreference
                android:key="id_utilisateur"
                android:title="Identifiant"
                android:summary="Votre identifiant Hangin\'Around"
                android:dialogTitle="Identifiant Hangin\'Around :" />

        <EditTextPreference
                android:key="mdp_utilisateur"
                android:title="Mot de passe"
                android:summary="Votre mot de passe sur Hangin\'Around"
                android:dialogTitle="Mot de passe Hangin\'Around :" />

    </PreferenceCategory>

    <PreferenceCategory
            android:title="Alerte de chute">
        <EditTextPreference
                android:key="num_contact"
                android:title="Numéro à contacter"
                android:summary="Le numéro auquel un SMS sera envoyé en cas de chute"
                android:dialogTitle="Numéro à contacter en cas de chute :" />

        <EditTextPreference
                android:key="nom"
                android:title="Nom présenté"
                android:summary="Le nom auquel vous serez présenté à votre contact"
                android:dialogTitle="Nom présenté :" />

        <CheckBoxPreference
                android:key="confirm"
                android:title="Confirmation de le chute"
                android:summary="Affichera un message vous demandant de confirmer l'envoi d'un message d'alerte de chute" />
     </PreferenceCategory>

    <PreferenceCategory
            android:title="Gestion des modèles de mouvement">

        <PreferenceScreen
                android:title="Enregistrer un nouveau modèle">
            <intent android:action=".EnregistrementActivity"/>
        </PreferenceScreen>

        <PreferenceScreen
                android:title="Gérer les modèles de mouvement">
            <intent android:action=".GestionModelesActivity"/>
        </PreferenceScreen>

    </PreferenceCategory>

</PreferenceScreen> 
```

以下是我在活动中获得偏好的方式：

```
protected void onCreate(Bundle savedInstanceState) {
    //creating the activity and stuffs

    // Getting my preferences
    SharedPreferences preferences = getApplicationContext().getSharedPreferences("PreferencesFile", getApplicationContext().MODE_PRIVATE);
    numContact = preferences.getString("num_contact", null);
    nomUser = preferences.getString("nom", null);
    confirm = preferences.getBoolean("confirm", false);
    modeleChute = preferences.getString("modele_chute", null);

    Log.d(TAG, "numContact = " + numContact + " - nomUser = " + nomUser + " - modeleChute = " + modeleChute);
} 
```

日志显示（modeleChute 来自另一个活动）：

```
01-14 17:04:40.444: D/MainActivity(13277): numContact = null - nomUser = null - modeleChute = Immobile 
```

难道我做错了什么 ？（大概吧）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:32:24.447

改变

```
SharedPreferences preferences = getApplicationContext().getSharedPreferences("PreferencesFile", getApplicationContext().MODE_PRIVATE); 
```

至：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context) 
```

更新：原因是 xml 首选项的默认实现将保存到您的 defaultSharedPreferences 而不是您定义的那个。如果确实需要，您可以使用
[setDefaultValues](http://developer.android.com/reference/android/preference/PreferenceManager.html#setDefaultValues%28android.content.Context,%20java.lang.String,%20int,%20int,%20boolean%29)更改默认值。

# javascript - 设置上下文的不同方法？

> ID：14322505
> 
> 赞同：1
> 
> 时间：2013-01-14T16:30:29.220
> 
> 标签：javascript, jquery

这里有两种设置上下文的方法：

```
$.proxy(function() { 
  this.doStuff();
}, this); 
```

...

```
var that = this;
that.doStuff(); 
```

有什么理由使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:50:40.637

我更喜欢使用绑定。

```
this.ans = 42;
this.fun = function() { alert(this.ans) };
var binded_fun = this.fun.bind(this);
binded_fun() // 42 
```

您也可以使用 bind 进行 сurrying，例如：

```
var sum = function(a, b) { return a + b };
var add5 = sum.bind(this, 5);
alert(add5(3)) // 8 
```

现代浏览器中存在“绑定”功能，本机代码也是如此，并且比 jQuery.proxy [http://jsperf.com/bind-vs-jquery-proxy更快](http://jsperf.com/bind-vs-jquery-proxy)

在旧浏览器中，您可以实现它[https://developer.mozilla.org/ru/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/ru/docs/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:34:00.283

第二种方法是纯 JavaScript。

第一个依赖于框架（在您的情况下为 jQuery）。

没有人比其他人更好。

我更喜欢第二个，它是免费的。

# java - 带有 smartGWT 的 SVG 上的缩放功能

> ID：14322506
> 
> 赞同：0
> 
> 时间：2013-01-14T16:30:31.100
> 
> 标签：java, gwt, svg, smartgwt

我们的任务是在现有的 SVG 地图上构建类似于 Google Maps 缩放功能的缩放功能。

我们使用 GWT 2.4 将我们的 java 代码编译为 Javascript。不幸的是，我们没有找到放大地图的方法。

有没有我们没有找到的功能？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:10:38.250

你看过：

```
http://www.vectomatic.org/gwt/vectomatic2/vectomatic2.html
https://groups.google.com/forum/?fromgroups=#!topic/lib-gwt-svg/YbNIfYBRmSg 
```

希望它能有所帮助。

# c++ - 如何在opencv中制作自己的特征检测方法？

> ID：14322509
> 
> 赞同：4
> 
> 时间：2013-01-14T16:30:38.073
> 
> 标签：c++, opencv, feature-detection, keypoint

让我们看一下[这个](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)名为 Features2D + Homography 的基本教程，以查找已知对象。它使用 SurfFeatureDetector 来检测特征：

```
 SurfFeatureDetector detector( minHessian );
  std::vector<KeyPoint> keypoints_object, keypoints_scene;
  detector.detect( img_object, keypoints_object );
  detector.detect( img_scene, keypoints_scene ); 
```

然后它使用`SurfDescriptorExtractor`检测到的特征来计算描述符（特征向量）。

我的问题是：

1.  如果我想创建自己的特征检测器（例如使用 Trajkovic 或 Harris 算法），我应该使用哪个描述符提取器？
2.  在 SurfFeatureDetector 中发现的特征是公共点还是点的区域？

***********补充****** *******

 **1）在这个例子中，使用了特征检测的 Surf 算法。我制作了自己的算法（Trajkovic），效果很好——找到了所有的角落（图像特征）。然后我尝试使用示例中使用的 SurfDescriptorExtractor。问题是 SurfDescriptorExtractor 不想以正确的方式使用我建立的点（结果图片出现错误的连接，这意味着提取器没有正确计算向量）。

2）我需要完全使用opencv，这就是重点；

3）“特征检测器”是一种算法，它试图在图像上找到关键点（特征或角），“描述符提取器” - 是一种算法，它计算特征向量以最好地理解关键点的位置和方向；

4) 总之，在示例中，所有关键点都连接在两个图像上（如教程的最后一张图片所示），然后用矩形突出显示。但是当我使用 Trajkovic 算法时，它们以错误的方式连接，这就是为什么没有突出显示的矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-16T06:30:12.543

虽然我们无法在不查看您的实现的情况下确定问题，甚至可能进行一些调查，但我可以为您指出解决方案的方向：OpenCV 源代码，您可以与他们的实现进行比较。

看看`detectAndCompute()`函数：

*   [冲浪.hpp](https://github.com/opencv/opencv_contrib/blob/96ea9a0d8a2dee4ec97ebdec8f79f3c8a24de3b0/modules/xfeatures2d/src/surf.hpp)。
*   [冲浪.cpp](https://github.com/opencv/opencv_contrib/blob/master/modules/xfeatures2d/src/surf.cpp)

Harris 角点检测的工作方式略有不同，它的 API 也是如此：

*   [角落.cpp](https://github.com/opencv/opencv/blob/841741aa524e7f63c95f5b2fd631231453788b36/modules/imgproc/src/corner.cpp)**

# r - 比较 R 中文档术语矩阵中的文档术语

> ID：14322511
> 
> 赞同：1
> 
> 时间：2013-01-14T16:30:43.940
> 
> 标签：r, matrix, document, similarity, term

我需要通过比较文档的条款来建立一个相似度矩阵。因此，例如，如果 Document1 和 Document2 有 2 个相同的术语，我需要在我的相似度矩阵中的 m[1, 2] 处写一个 2。我的相似度矩阵现在看起来像这样：

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,]    0   NA   NA   NA   NA   NA   NA   NA   NA
[2,]    0    0   NA   NA   NA   NA   NA   NA   NA
[3,]    0    0    0   NA   NA   NA   NA   NA   NA
[4,]    0    0    0    0   NA   NA   NA   NA   NA
[5,]    0    0    0    0    0   NA   NA   NA   NA
[6,]    0    0    0    0    0    0   NA   NA   NA
[7,]    0    0    0    0    0    0    0   NA   NA
[8,]    0    0    0    0    0    0    0    0   NA 
```

文档和术语位于文档术语矩阵中。现在我必须通过比较所有文档及其在相似度矩阵中表示为 NA 的术语来填充相似度矩阵。对于文档对中的每个 Term 匹配，我必须计算 +1 并将最终值注入矩阵中的正确位置。

我的问题是，我似乎无法访问文档术语矩阵中的单个文档及其术语。有没有其他方法可以执行此操作，或者我错过了什么？这里的代码：

```
install.packages("tm")
install.packages("openNLP")
install.packages("openNLPmodels.en")

Sys.setenv(NOAWT=TRUE)

library(tm)
library(openNLP)
library(openNLPmodels.en)

sample = c(
  "count eagle alien", 
  "dis bound eagle",   
  "bound count eagle dis",
  "count eagle dis alien",
  "bound eagle",
  "count dis alien",
  "bound count alien",
  "bound count",
  "count eagle dis"
)
print(sample)
corpus <- Corpus(VectorSource(sample))
inspect(corpus)

corpus <- tm_map(corpus, removeNumbers)
corpus <- tm_map(corpus, removePunctuation)
corpus <- tm_map(corpus, tolower)
corpus <- tm_map(corpus, removeWords, stopwords("english"))
corpus <- tm_map(corpus, stemDocument,language="english")
corpus <- tm_map(corpus, stripWhitespace)
corpus <- tm_map(corpus, tmTagPOS)
inspect(corpus)

dtm <- DocumentTermMatrix(corpus)
inspect(dtm)

# need to create similarity matrix here
#dist(dtm, method = "manhattan", diag = FALSE, upper = TRUE)

rowCount <- nrow(dtm)
similMatrix = matrix(nrow = rowCount - 1, ncol = rowCount)
show(similMatrix)
similMatrix[ row(similMatrix) >= col(similMatrix) ] <- 0

for(i in 1:(rowCount - 1)){  # rows
  for (j in i+1:rowCount){      # cols

      # need to compare document i and j here and write
      # the value into similarity matrix 
  }
}
show(similMatrix) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:08:14.557

我认为您在相似度矩阵中又少了一行。因为你没有得到你的最后一份文件。我的看起来像这样。

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
 [1,]   NA   NA   NA   NA   NA   NA   NA   NA   NA
 [2,]    1   NA   NA   NA   NA   NA   NA   NA   NA
 [3,]    2    3   NA   NA   NA   NA   NA   NA   NA
 [4,]    3    2    3   NA   NA   NA   NA   NA   NA
 [5,]    1    2    2    1   NA   NA   NA   NA   NA
 [6,]    2    1    2    3    0   NA   NA   NA   NA
 [7,]    2    1    2    2    1    2   NA   NA   NA
 [8,]    1    1    2    1    1    1    2   NA   NA
 [9,]    2    2    3    3    1    2    1    1   NA 
```

为了得到这个结果，我做了以下步骤。

```
mat=as.data.frame(as.matrix(dtm)) # you get the dataframe from DocumentTerm Matrix 
rowCount <- nrow(dtm)
colCount <- ncol(dtm)
similMatrix = matrix(nrow = rowCount, ncol = rowCount)
similMatrix[ row(similMatrix) >= col(similMatrix) ] <- 0
for(i in 1:(rowCount)){ #set all columns NA you can change to zeros if you need later
    similMatrix[i,i]=NA
} # then we will do the actual job
for(i in 1:rowCount ){  # rows
  for (j in 1:rowCount ){      # cols
      if(is.na(similMatrix[i,j])==F){
        a=mat[i,]
        b=mat[j,]
        for(k in 1:colCount){   #n number of Cols in Document term matrix

          if(a[k]==1 && a[k]==b[k]){
              similMatrix[i,j]=similMatrix[i,j]+1
          }
        }
      }
  }
} 
```

# iphone - 在视图控制器中将 JSON 解析为 Tableview

> ID：14322514
> 
> 赞同：1
> 
> 时间：2013-01-14T16:30:46.713
> 
> 标签：iphone, json, tableview

我试图在 viewController 内将 json 解析为我的 tableview。但是当我尝试记录它时，它不会出现。我还想知道如何将此 JSON 放入我的 tableviewcells 中。

自从我第一次提出这个问题以来，我改变了我的代码。

请在下面查看我的代码：

米：

```
#import "UbaGuideStartViewController.h"

#import <QuartzCore/QuartzCore.h>

@interface UbaGuideStartViewController (){
    NSMutableData *jsonData;
    NSURLConnection *connection;
    NSMutableArray *arrData;
}

@property (weak, nonatomic) IBOutlet UIImageView *ImgHeader;

@property (weak, nonatomic) IBOutlet UIImageView *ImgTitle;

@end

@implementation UbaGuideStartViewController

 - (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    [[self StartTableView]setDelegate:self];
    [[self StartTableView]setDataSource:self];
    arrData = [[NSMutableArray alloc]init];

}

//Json parse.

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse  *)response
{
    [jsonData setLength:0];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [jsonData appendData:data];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"Failed with error");
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection

{
    NSDictionary *guideDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:nil];

    NSArray *arrguideTitle = [guideDictionary objectForKey:@"guide"];

    for (NSDictionary *dictionary in arrguideTitle)
    {
        NSString *guideTitle = [dictionary objectForKey: @"guideTitle"];

        [arrData addObject:guideTitle];
    }
    [self.StartTableView reloadData];

    NSURL *url = [NSURL   URLWithString:@"http://www.sofisto.com.br/public_html/TEST/guide.json"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    connection = [NSURLConnection connectionWithRequest:request delegate:self];

    if (connection){
        jsonData = [[NSMutableArray alloc]init];
    }
}

//TableView

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *startGuideCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (startGuideCell == nil) {
        startGuideCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // configure your cell here...

    startGuideCell.textLabel.text = [arrData objectAtIndex:indexPath.row];

    return startGuideCell;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

还有我的JSON：

```
{
"guide": [
{ "guideTitle":"Where to stay"}, 
{ "guideTitle":"Where to eat"}, 
{ "guideTitle":"What to do"}
]
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:10:11.697

您需要使用 NSJSONSerializer 将 JSON 解码为 NSArray 或 NSDictionary，具体取决于 JSON 中存储的内容。例如：

```
NSError *error;
NSData *jsonData = [NSData dataWithContentsOfURL:url];
NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error]; 
```

就我而言，JSON 是一系列字典。此代码获取字典并将它们存储到一个数组中。我可以抓住一个：

```
NSDictionary *dict = [jsonArray objectAtIndex:0; 
```

然后使用那个字典；

```
NSString *string = [dict objectForKey:@"someKey"]; 
```

所以本质上，您可以使用数据来填充您的单元格，就像您将使用的任何其他对象一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:17:58.247

不确定这是否是故意的，但您正在从 connectionDidFinishLoading 回调中创建和启动连接。

尝试在 viewDidAppear 或类似的生命周期回调方法中启动连接（使用以下代码）。

```
NSURL *url = [NSURL   URLWithString:@"http://www.sofisto.com.br/public_html/TEST/guide.json"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

connection = [NSURLConnection connectionWithRequest:request delegate:self];

if (connection){
    jsonData = [[NSMutableArray alloc]init];
} 
```

# c# - 如何从路径字符串中仅获取文件名部分？

> ID：14322524
> 
> 赞同：0
> 
> 时间：2013-01-14T16:31:27.087
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 的目录中获取文件的名称](https://stackoverflow.com/questions/862416/how-to-get-the-name-of-file-in-a-directory-in-c-sharp)

例如，如果我有：

`d:\test\text.txt`或者`d:\test\test5\test.bmp`

例如，我希望它`string t`仅`text.txt`作为字符串，否则`t`将是`test.bmp`

因此`t`将仅包含路径字符串中的文件名部分。

编码：

```
public WmvAdapter(string file, string outFolder)
{
    path_exe = path_exe = Path.GetDirectoryName(Application.LocalUserAppDataPath);
    histograms_dat_fileName = "histogramValues.dat";
    histograms_dat_filenameRGB = "histogramValuesRGB.dat";
    histograms_dat_fileName_Directory = path_exe + "\\" + "dat file"; 
```

我想要如果文件是例如`d:\text\text.txt` 所以

```
histograms_dat_fileName_Directory = path_exe + "\\" + "dat file"; 
```

将会：

```
histograms_dat_fileName_Directory = path_exe + "\\" + "dat file" + "\\" + "text.txt"; 
```

因此，当我稍后创建文件时，它将位于目录中，例如：

```
c:\myuser\appdata\local\dat file\text.txt\ 
```

`text.txt`是路径\文件夹而不是文本文件，我希望将其创建为路径。

今天的路径例如：`c:\myuser\appdata\local\dat file`

但我想为每个文件名创建另一个路径。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T16:33:48.617

使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)：

`Path.GetFileName(@"d:\test\text.txt")`

退货`"text.txt"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T16:34:42.850

使用`Path.GetFileName`和`Path.Combine`：

```
string path = Path.Combine(path_exe, "dat file", Path.GetFileName(file)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:35:06.227

```
string fileName = Path.GetFileName("d:\\test\\test5\\test.bmp");
// fileName now contains "test.bmp" 
```

# jquery - JQuery 手风琴 - 无法正常工作

> ID：14322525
> 
> 赞同：0
> 
> 时间：2013-01-14T16:31:30.893
> 
> 标签：jquery, html, expressionengine

我正在设置一个手风琴来处理我的一个页面。由于某种原因，它无法正常工作。我认为这可能是我的部分标签。下面是我的 HTML 标记：

```
<section class="module flag-{style} {page_module_style}"> <!-- {page_module_style} is the embed for the accordion class/id -->
  <h1>{header}</h1>
  <div class="copy">
    {copy}
  </div>
</section> 
```

我已经应用了来自 JQuery UI 站点和 JQuery 工具的 JQuery 代码，但我得到了零响应。下面是 JQuery UI 代码：

```
$(function() {
  $('#accordion').accordion();
}); 
```

我已经在 J​​Query 中从一个 ID 更改为一个类，就像在我的代码中一样，并在那里交换了它。是因为我的部分标签吗？是的，JQuery 源链接在我的标题中，我已经仔细检查过。

PS 我使用的是 ExpressionEngine CMS，所以在 HMTL 标记中，这些是嵌入花括号内的。我还试图避免手动编写一些 JQuery，因为这可能会在可能具有不同样式的其他页面上实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:34:06.320

您没有在 html 中指定 id 手风琴。用这个

```
<div id="accordion">
    <section class="module flag-{style} {page_module_style}"> <!-- {page_module_style} is the embed for the accordion class/id -->
      <h1>{header}</h1>
      <div class="copy">
        {copy}
      </div>
    </section>
</div> 
```

# mysql - SQL 之间选择？

> ID：14322526
> 
> 赞同：-1
> 
> 时间：2013-01-14T16:31:31.563
> 
> 标签：mysql, sql

我正在为朋友制作假期预订系统。

当他进入假期时，我需要检查日期是否已经在使用，如果是，那么显然它无法创建预订。

我目前正在使用：

```
SELECT * 
FROM anqehxy1kxmeowpcoqjj 
WHERE `from` BETWEEN '2013-01-16' AND '2013-01-23'

SELECT * 
FROM anqehxy1kxmeowpcoqjj 
WHERE `to` BETWEEN '2013-01-16' AND '2013-01-23' 
```

看看我是否可以预订从 2013-01-16 到 2013-01-23 的假期。

在数据库中已经有一个从 2013 年 1 月 15 日到 2013 年 1 月 22 日的预订，这意味着我尝试预订的日期已经被预订；但是，除非我使用与已经使用的日期完全相同的日期，否则 sql 会返回 0 行。

关于如何解决这个问题的任何想法？

请注意，人们在上午 10 点离开，下一个人在下午 2 点到达。

所以如果连续两周被预订，它看起来像

```
2013-01-14 -> 2013-01-21 
2013-01-21 -> 2013-01-28 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:36:42.763

您不能像在第二个查询中所做的那样反转日期。将其更改为

```
SELECT * 
FROM anqehxy1kxmeowpcoqjj 
WHERE `to` BETWEEN '2013-01-16' AND '2013-01-23' 
```

附带说明：您的表名真的`anqehxy1kxmeowpcoqjj`吗？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:40:28.627

如果两个日期与任何日期冲突，我会使用这样的查询来获取它们。此查询将返回哪些日期有冲突。如果没有返回行，则意味着特定时隙是空闲的。@start_time 和 @end_time 是您要预订的日期的参数

```
select * from anqehxy1kxmeowpcoqjj 
where((@end_time > `from` and @end_time <= `to`) or 
        (@start_time >= `from` and @start_time < `to`) or 
        (@start_time <= `from` and @end_time >= `to`)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:25:40.417

我认为最简单的方法是：

```
select *
from anqehxy1kxmeowpcoqjj 
where @end_time >= `to` and @start_time <= `from` 
```

这是一个重叠间隔问题的例子。当一个间隔在第二个结束时或之前开始并在第一个开始或之后结束时，两个间隔重叠。

根据结束日期是否包含在内，您可能需要`<`and`>`而不是`<=`and `>='。

# java - 线程的不可预知的行为

> ID：14322531
> 
> 赞同：1
> 
> 时间：2013-01-14T16:31:49.283
> 
> 标签：java, multithreading

任何人都可以解释为什么这个程序给出输出 9？我猜测“不可预测的行为”是它的答案，因为主线程和线程 0 可以按任何顺序执行。join() 将在主线程本身上做什么？

```
public class Starter extends Thread{
    private int x = 2;
    public static void main(String[] args) throws Exception{
        new Starter().makeItSo();
    }

    public Starter(){
        //Thread main
        x=5;
        start();
    }

    public void makeItSo() throws Exception{
        //Thread main
        join();
        x = x-1;
        System.out.println(x);
    }

    public void run(){ 
        //Thread-0
        x*= 2;
        }
} 
```

主线程启动 thread-0 并调用 run 方法。但是如果你把 SOP 放在 makeItSo() 中，它会说在调用 join() 之后主线程正在那里等待！为什么？我认为 makeItSo() 或 run() 之间没有顺序，因此 X 的值将是不可预测的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T16:37:59.593

这里的执行顺序是固定的，因为调用了`join()`：

1.  构造函数设置`x = 5`.
2.  构造函数调用`start`又调用`run`一个新线程。
3.  `run`执行`x *= 5`，`x`等于 10。
4.  `makeItSo`叫做。它调用`join`，从而等待`run`结束。
5.  最后，`makeItSo`设置`x = x-1`，`x`等于 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:44:52.573

为了真正深入理解这一点，您应该阅读`17.4.4 Synchronization Order`java 语言规范，上面写着：

```
Synchronization actions induce the _synchronized-with_ relation on actions, 
defined as follows:   
         ...
 - An action that starts a thread _synchronizes-with_ the first action in the 
thread it starts.
         ...
 - The final action in a thread *T1* _synchronizes-with_ any action in another
thread *T2*  that detects that *T1* has terminated. *T2* may accomplish this 
by calling *T1.isAlive()* or *T1.join()*. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T18:06:00.337

我相信混淆是由调用 join() 的方式引起的——因为它是从实例方法调用的，就像说 this.join()，其中“this”引用了在 main 方法中创建的 Starter 对象。

这意味着主线程等待 Starter 线程终止，然后减小 x 的值。这是结果非常可预测的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:37:07.890

您首先创建 Starter 对象。在构造函数中你有`x = 5`. 比你打电话`start()`，它内部调用`run()`。运行后您的 x 为 10 ( `x *= 2`)。您`join()`等待`run()`完成，然后将 x 减 1，仅此而已。x 是 9。这里真的没有什么不可预测的。

# javascript - Firefox 失去与 eventSource 的连接

> ID：14322532
> 
> 赞同：0
> 
> 时间：2013-01-14T16:31:58.863
> 
> 标签：javascript, server-sent-events

我正在使用服务器发送事件来运行社交提要并实时更新它。

Javascript代码：

```
var source = new EventSource('php/stream.php?type=1&encoding=data');
source.onmessage = function(e) {
var data = JSON.parse(e.data);
$.each(data, function(id, object) { 
$('#'+ id).append('<div class="main">'+ object["content"]+'</div><!-- .main -->');
});
}; 
```

我的 PHP 发送的内容：

```
id: 5
data: json object
retry: 3000 
```

问题：脚本运行良好，但 10 秒后 +-。Firefox 似乎失去了连接并且没有插入新数据。在 Safari 和 Chrome 中没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-08T22:54:28.287

我有这个确切的问题，我发现如果你创建一个局部变量，firefox 中的 eventsource 不能正常工作。对我来说，我删除了`var`声明源之前的内容，并且它有效。所以`$(document).ready(...)`只要你不用 a 声明它就可以了`var`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T13:19:08.637

我有同样的问题，因为事件源代码在里面

```
$(document).ready(function () {    
   ...
}); 
```

把它拿出来。

# mysql - 从多个表中选择最新行

> ID：14322539
> 
> 赞同：0
> 
> 时间：2013-01-14T16:32:20.437
> 
> 标签：mysql, max

我有多个表的这个查询，我得到了以下结果。然后我想按 t.id 分组。我知道我可以简单地使用 group by t.id 但如何选择 t.id 的最新行，即 url tw5.jpg 和 created_time 10000004

```
SELECT p.url,t.name,t.num_photo,t.id
FROM photos AS p
LEFT JOIN tag_maps AS tm ON p.id = tm.photo_id
LEFT JOIN tags AS t ON t.id = tm.tag_id

url                       created_time    name      num_photo  id
assets/img/tags/tw1.jpg   1000001         my house  1           1
assets/img/tags/tw2.jpg   1000002         dog       1           2
assets/img/tags/tw3.jpg   1000003         taiwan    2           3
assets/img/tags/tw5.jpg   1000004         taiwan    2           3 
```

这是我在使用 group by t.id 时得到的

```
url                       created_time    name      num_photo  id
assets/img/tags/tw1.jpg   1000001         my house  1           1
assets/img/tags/tw2.jpg   1000002         dog       1           2
assets/img/tags/tw3.jpg   1000003         taiwan    2           3 
```

这就是我想要的

```
url                       created_time    name      num_photo  id
assets/img/tags/tw1.jpg   1000001         my house  1           1
assets/img/tags/tw2.jpg   1000002         dog       1           2
assets/img/tags/tw5.jpg   1000004         taiwan    2           3 
```

已编辑

照片表

```
id    url                      created_time
1     assets/img/tags/tw1.jpg  1000001
2     assets/img/tags/tw2.jpg  1000002
3     assets/img/tags/tw3.jpg  1000003
4     assets/img/tags/tw5.jpg  1000004 
```

标签表

```
id name     num_photo
1  my house 1
2  dog      1
3  taiwan   2 
```

标记地图

```
id   tag_id   photo_id
1    1        1
2    2        2
3    3        3
4    3        4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:39:41.247

编辑#2：没有看到每个表或表结构中的示例数据，我猜测以下将起作用：

```
SELECT p.url,
  created_time,
  t.name,
  t.num_photo,
  t.id
FROM photos p
LEFT JOIN tag_maps AS tm 
    ON p.id = tm.photo_id
LEFT JOIN tags AS t 
    ON t.id = tm.tag_id
INNER JOIN
(
  select max(created_time) MaxDate, t.id
  FROM photos p
  LEFT JOIN tag_maps AS tm 
      ON p.id = tm.photo_id
  LEFT JOIN tags AS t 
      ON t.id = tm.tag_id
  group by t.id
) d
  on p.created_time = d.MaxDate
  and t.id = d.id; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5fd42/8)

或者另一种编写方式是使用从表中返回`max(photo_id)`by并在连接中使用该结果的子查询：`tag_Id``tag_maps`

```
SELECT p.url,
  created_time,
  t.name,
  t.num_photo,
  t.id
FROM photos p
INNER JOIN
(
  select max(photo_id) photo_id, tag_id
  from tag_maps
  group by tag_id
) AS tm 
    ON p.id = tm.photo_id
LEFT JOIN tags AS t 
    ON t.id = tm.tag_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/01c51/5)

结果是：

```
|                     URL | CREATED_TIME |     NAME | NUM_PHOTO | ID |
----------------------------------------------------------------------
| assets/img/tags/tw1.jpg |      1000001 | my house |         1 |  1 |
| assets/img/tags/tw2.jpg |      1000002 |      dog |         1 |  2 |
| assets/img/tags/tw5.jpg |      1000004 |   taiwan |         2 |  3 | 
```

~~编辑＃1，因为您的 url 不同并且您想要`max(id)`，那么您应该可以使用：~~

 ~~```
SELECT p.url,
  t.name,
  t.num_photo,
  Max(t.id) id
FROM photos p
LEFT JOIN tag_maps AS tm 
    ON p.id = tm.photo_id
LEFT JOIN tags AS t 
    ON t.id = tm.tag_id
group by t.name, t.num_photo 
```~~ 

OP：您可以使用子查询：

```
SELECT p.url,
    t.name,
    t.num_photo 
FROM
(
    select MAX(created_time) created_time, url, id
    from photos
    group by url, id
)  AS p
LEFT JOIN tag_maps AS tm 
    ON p.id = tm.photo_id
LEFT JOIN tags AS t 
    ON t.id = tm.tag_id 
```

如果表中的`id`值`photos`对于每一行都是唯一的，那么您可能需要使用以下内容：

```
SELECT p1.url,
    t.name,
    t.num_photo 
FROM photos p1
inner join
(
    select MAX(created_time) created_time, url
    from photos
    group by url
)  AS p2
    on p1.url = p2.url
    and p1.created_time = p2.created_time
LEFT JOIN tag_maps AS tm 
    ON p1.id = tm.photo_id
LEFT JOIN tags AS t 
    ON t.id = tm.tag_id 
```

# c# - Crystal Report IE7、IE8、IE 10 设计问题

> ID：14322541
> 
> 赞同：1
> 
> 时间：2013-01-14T16:32:23.860
> 
> 标签：c#, asp.net, crystal-reports-2010

我有一些简单的问题，肯定有人可以帮助我。我正在使用 Visual Studio 2010、Framework 4.0 和 Crystal Report。

根据您使用的浏览器，生成一份看起来不同的报告。它如何看待这些不同的浏览器

即 7：

![IE7版本](../Images/4f148e2a154d691e5f4188b1c412d052.png)

即 9

![IE9版本](../Images/34d889499a1477505bfed8c95001cfcf.png)

IE 10

![IE10版本](../Images/3f0df10e1f5773a167429a61ae36a506.png)

在所有情况下，我都看不到完整的工具栏。可能是什么问题呢？

非常感谢

# django - Django 模型查询集使用 .extra() 或 union 在 PositiveIntegerField 上应用自定义排序

> ID：14322545
> 
> 赞同：0
> 
> 时间：2013-01-14T16:32:48.120
> 
> 标签：django, django-models, django-queryset

对于项目库，用户可以手动对一些项目进行排序以始终使它们首先出现。

为此，模型有一个“排序”而不是 null PositiveIntegerField（默认为 0）。排序字段大于零的项目是手动排序的，并且必须出现在排序值为 0 的未排序项目之前。

可以使用的 SQL 查询可能是这样的：

```
(select photo, sort, 0 as priority from photos where sort > 0)
union all
(select photo, sort, 1 as priority from photos where sort = 0)
order by priority, sort 
```

结果看起来像：

```
+---------+------+----------+
| photo   | sort | priority |
+---------+------+----------+
| photo-a | 1    | 0        |
| photo-b | 2    | 0        |
| photo-c | 0    | 1        |
| photo-d | 0    | 1        |
| photo-e | 0    | 1        |
| ...                       | 
```

但我不知道应该如何使用 Django Queryset 正确完成它？

我可以合并两个不同的`list(chain(q1, q2))`查询集，但是查询被执行，这对于大型集合来说效率低下，特别是如果我的查询集应该被传递给 django.core.paginator 通常会应用 LIMIT OFFSET 子句进行分页。当然，我可以对每个查询应用切片`q1`，`q2`但这有点难看，因为它与分页器的功能重叠。

也许我试图以错误的方式做到这一点。或者也许应该用[extra()](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)方法来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:52:33.100

对查询集进行联合/合并不是解决方案。一个更简单的解决方案是在 order 语句中使用比较。stackeoverflow 上的一个[答案向我指出了这个巧妙的解决方案。](https://stackoverflow.com/a/7632163/523104)

```
select * from photos order by sort=0, sort 
```

0=0 被评估为 True 等于 1，1=0 是 False 等于 0 等等。明白了吗？

翻译成 Django 查询集：

```
Photos.objects.extra(select={'sortiszero': 'sort = 0'}, order_by=['sortiszero', 'sort']) 
```

结果：

```
+---------+------+
| photo   | sort |
+---------+------+
| photo-a | 1    |
| photo-b | 2    |
| photo-c | 0    |
| photo-d | 0    |
| photo-e | 0    |
| ...            | 
```

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:02:36.183

你应该提供更多细节。

如果你想合并这两组，你可以简单地添加列表：

```
list1 = SomeModel.objects.filter(sort != 0).order_by('column_name_1','column_name_2')
list2 = SomeModel.objects.filter(sort = 0).order_by('priority','foo')
return list = list1 + list2 
```

或者如果你想使用 extra() 方法，这里是一个例子：

```
list = SomeModel.objects.fooMethod().extra(order_by=[foo,]) 
```

# visual-studio - 在 Visual Studio 中更改反编译器

> ID：14322546
> 
> 赞同：0
> 
> 时间：2013-01-14T16:32:50.353
> 
> 标签：visual-studio

我在 Visual Studio 中切换反编译器（从 dotPeek 到 .NET Reflector），但无法在 Visual Studio 中找到设置。

谁能给我建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:46:19.137

问题是 Resharper 窃取了反编译管理。在 Resharper / Options / Tools / External Sources 菜单中将此设置更改为“默认 Visual Studio 导航”解决了该问题

# python - 如何在python中捕获外部进程的输出

> ID：14322547
> 
> 赞同：0
> 
> 时间：2013-01-14T16:32:53.223
> 
> 标签：python, stdout, stderr

我正在尝试运行一个外部程序（在这种情况下只是 python -V）并捕获内存中的标准错误。

如果我重定向到磁盘，它会起作用：

```
import sys, os
import subprocess
import tempfile
err = tempfile.mkstemp()
print err[1]
p = subprocess.call([sys.executable, '-V'], stderr=err[0] ) 
```

但这不好玩。然后我需要将该文件读入内存。

我以为我可以创建一些内存中的东西，它就像使用 StringIO 的文件一样，但这次尝试失败了：

```
import sys, os
import subprocess
import tempfile
import StringIO

err = StringIO.StringIO()
p = subprocess.call([sys.executable, '-V'], stderr=err ) 
```

我有：

```
AttributeError: StringIO instance has no attribute 'fileno' 
```

附言。一旦这个工作我也想捕获标准输出，但我想那是一样的。ps2。我在 Windows 和 Python 2.7.3 上尝试了上述方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:33:47.490

你需要设置`stderr = subprocess.PIPE`

例如：

```
p = subprocess.Popen(...,stderr = subprocess.PIPE)
stdout,stderr = p.communicate()
#p.stderr.read() could work too. 
```

*请注意*，要使其正常工作，您需要访问该`Popen`对象，因此您不能`subprocess.call`在这里真正使用（您确实需要`subprocess.Popen`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T18:24:50.780

使用 subprocess.check_output。从[文档](http://docs.python.org/2/library/subprocess.html)

```
subprocess.check_output(args, *, stdin=None, stderr=None, shell=False, universal_newlines=False)
Run command with arguments and return its output as a byte string. 
```

# java - 数组列表和文件

> ID：14322551
> 
> 赞同：0
> 
> 时间：2013-01-14T16:33:08.977
> 
> 标签：java, string, arraylist

我需要做的是从用户那里搜索文件的路径，并从用户那里获取一组字符，这是要搜索的文件名的一部分。找到文件后，它将显示所有位置，包括子文件夹以及完整的文件名。我所做的是获取给定路径中的所有文件，并使用**ListFiles()将它们放入****File[]**数组中**.获取所有文件的名称并将它们保存到数组列表中。创建另一个数组列表并仅保存文件名，而不保存前一个数组列表的扩展名。然后使用用户输入的字符集与此数组列表中的每个文件名进行比较。为了测试这是否有效，我将其打印了出来，但它打印了所有文件名，而不仅仅是与用户输入的字符集匹配的文件名.这是我的代码：**

 **```
import java.util.*;
import java.io.*;

public class FileSearch
 {
  public static void main(String args[])
   {
    try
     {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("  1.Enter the path to search:");
        String str = br.readLine();
        System.out.println("  2.Enter some characters of the filename:");
        String str1 = br.readLine();

        File files = new File(str);

        File[] f = files.listFiles();     

        List<String> li = new ArrayList<String>();
        List<String> li1 = new ArrayList<String>();

        for(int i=0;i<f.length;i++)
        {
            if(f[i].isFile())
            {
                li.add(f[i].getName());
            }
        }

        for(int i=0;i<li.size();i++)
        {
           int j = li.get(i).lastIndexOf('.');
           li1.add((j>-1)?li.get(i).substring(0, j):li.get(i));
        }

        for(int i=0;i<li1.size();i++)
         {
            if(li1.get(i).contains(str1));
            {
                System.out.println(li1.get(i));
            }
        }
     }
    catch(Exception e)
     {
        e.printStackTrace();
     }
  }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:56:52.570

你的代码绝对没问题。以下陈述是问题的根本原因。

```
if(li1.get(i).contains(str1));
{
    System.out.println(li1.get(i));
} 
```

如果你观察清楚你已经使用`;`了if条件之后。删除分号，代码可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:58:06.650

下面看看这篇[文章](http://www.vogella.com/articles/EclipseDebugging/article.html)。它将帮助您了解如何调试您的程序。看起来您可以像这样构建完整路径：

```
String fullPath = files.getAbsolutePath() + li1.get(i); 
```**

# cookies - 为直接访问设置 _utmz cookie？

> ID：14322553
> 
> 赞同：0
> 
> 时间：2013-01-14T16:33:27.063
> 
> 标签：cookies, google-analytics, utm

据我了解，直接访问不会重写 Google Analytics 中的 _utmz cookie，因为这些访问不是“活动”或由外部来源生成的。但是，我仍然想通过直接方式跟踪在后续访问中访问我网站的用户。有没有办法通过一些额外的代码片段为直接访问（仅在直接访问时）设置 utmz cookie？或者这可能应该通过自定义变量来完成？

我知道 GA 现在有“多渠道”漏斗，但无论如何它都不完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:42:40.540

您可以检查是否有引用者（例如，通过 javascript 的 document.referrer），如果没有，则将一些自定义 utm 参数（utm_source 和 utm_medium）传递给虚拟 url（trackPageview 方法的第二个参数） - 如果没有引用者，那就是直接访问（由于某些 UA 不发送推荐人，因此存在一定的误差）。

但是，我不太确定您是否想要完成 - 如果您想检查直接访问者，您可以简单地使用“source =（direct）”创建一个自定义细分。

如果您想跟踪首先作为直接访问者到达然后通过另一个来源返回的访问者，您可以创建一个自定义变量（同样取决于引荐来源）并基于该变量创建一个自定义细分。该变量需要在访问者范围内创建（_setCustomVar 方法的最后一个参数），因此只要访问者没有删除 google cookie（因此为回访者设置），它就会一直存在。

无论如何都不是完美的想法，但也许它们会为您指明正确的方向……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T08:30:30.537

流量来源“（直接）/（无）”总是在 HTTP 引荐来源为空时使用，这可能并不总是由于直接访问您的网站。但是，对此有一个不完善的解决方案，假设绝大多数直接访问都登陆您的主页“/”，您可以使用简单的javascript，当HTTP referrer为空并且用户登陆您的主页时推送utm_source和utm_medium值.

# java - 排列多个不同高度的 JPanel

> ID：14322554
> 
> 赞同：2
> 
> 时间：2013-01-14T16:33:28.323
> 
> 标签：java, swing, layout-manager

我试图在 JScrollPane 中显示多个 JPanel。

面板包含一个带有折叠/展开按钮的标题子面板和一个带有 JTable 和一些 JButton 的内容子面板。

每个 Panel 的高度由 Panel 内的 JTable 的大小决定。

如果没有足够的 JPanel 来填充 JScrollPane，则剩余空间应该是空的。

只要有足够的面板，我使用 BoxLayout 的方法效果很好。

如果我将*TEST_NUMBER_OF_PANELS*设置为 50，它的行为就像 excpeted。如果我将*TEST_NUMBER_OF_PANELS*设置为 2，则会调整面板的高度以填充整个滚动窗格。

我使用来自 swingx 库的 JXCollapsiblePane 作为内容子面板。如果我折叠一个面板并且只有几个面板可见，则 LayoutManager 开始调整标题子面板的大小，它应该始终保持相同的大小。（我猜这是我错误使用 LayoutManager 的后续错误）

以下 SSCCE 无需任何外部库即可编译。我在其中将 JXCollapsiblePane 替换为 JPanel 时添加了“TODO：un/comment line”。（导入、初始化、绑定）

我不确定哪个 LayoutManager 最适合安排我的面板。我想如果我正确使用了 LayoutManager，我也可以放弃一些 JPanel。

先感谢您

```
package test;

import java.awt.BorderLayout;
import java.awt.CardLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.util.Random;
import java.util.Vector;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

// TODO: uncomment line
//import org.jdesktop.swingx.JXCollapsiblePane;

public class Test extends JFrame {
    private static final int TEST_NUMBER_OF_PANELS = 50;
    private static JTabbedPane tabbedPane = new JTabbedPane();
    Test() {
        this.setLayout(new BorderLayout());
        this.setSize(1050, 700);
        this.setMinimumSize(new Dimension(400,200));
        this.add(tabbedPane, BorderLayout.CENTER);

        tabbedPane.addTab("tab1", new TestTabContent());
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new Test().setVisible(true);
            }
        });
    }

    private class TestTabContent extends JPanel {
        TestTabContent() {
            JPanel boxContainer = new JPanel();
            boxContainer.setLayout(new BoxLayout(boxContainer, BoxLayout.Y_AXIS));
            JScrollPane mainScrollPane = new JScrollPane(boxContainer);

            // create toolbar
            JPanel toolBar = new JPanel();
            toolBar.setLayout(new BorderLayout());

            //east
            JPanel InfoPanel = new JPanel();
            InfoPanel.setLayout(new BoxLayout(InfoPanel, BoxLayout.X_AXIS));
            InfoPanel.add(new JLabel("test: some info ..."));
            toolBar.add(InfoPanel, BorderLayout.WEST);
            //west
            JPanel viewOptionPanel = new JPanel();
            viewOptionPanel.setLayout(new BoxLayout(viewOptionPanel, BoxLayout.X_AXIS));
            viewOptionPanel.add(new JLabel("some controls.."));
            toolBar.add(viewOptionPanel, BorderLayout.EAST);

            // set main panel´s layout
            GroupLayout layout = new GroupLayout(this);
            this.setLayout(layout);
            layout.setHorizontalGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(toolBar, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(mainScrollPane)
                    );
            layout.setVerticalGroup(
                    layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                            .addComponent(toolBar, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addGap(0, 0, 0)
                            .addComponent(mainScrollPane, GroupLayout.DEFAULT_SIZE, 413, Short.MAX_VALUE))
                    );

            // create controls 4 test ...
            for (int i = 0; i < TEST_NUMBER_OF_PANELS; i++) {
                TestPanel newTestPanel = new TestPanel();

                // seperator panels for spacing
                JPanel seperator = new JPanel(new BorderLayout());
                seperator.setBackground(Color.black);
                seperator.add(newTestPanel);

                boxContainer.add(seperator);
            }
        }
    }
    private class TestPanel extends JPanel { 
        //private static final Icon COLLAPSE_ICON = new ImageIcon(Test.class.getResource("images/collapse_1616.png"));
        //private static final Icon EXPAND_ICON = new ImageIcon(Test.class.getResource("images/expand_1616.png"));
        private JTable table;
        private DefaultTableModel tableModel;
        private JButton collapsingButton;

        // TODO: uncomment line
        //private JXCollapsiblePane collapsiblePane = new JXCollapsiblePane();
        // TODO: comment line
        private JPanel collapsiblePane = new JPanel();

        public TestPanel() {

            this.setLayout(new BorderLayout()); 

            this.setBorder(BorderFactory.createLineBorder(Color.BLACK));

            // container with boxLayout for collapsiblePane
            JPanel boxContainer = new JPanel();
            boxContainer.setLayout(new BoxLayout(boxContainer, BoxLayout.Y_AXIS));
            boxContainer.setBorder(BorderFactory.createMatteBorder(0, 1, 1, 1, Color.BLACK));

            // set table stuff
            tableModel = new DefaultTableModel();
            // column headers
            Vector<String> title = new Vector<String>();
            title.add("A");
            title.add("B");
            title.add("C");
            title.add("D");
            // some random data
            Random randomGenerator = new Random();
            int rnd = randomGenerator.nextInt(10) + 1;
            Vector<Vector<String>> data = new Vector<Vector<String>>();
            Vector<String> row = new Vector<String>();
            for (int i=0; i<rnd; i++) {
                row.add("1");
                row.add("2");
                row.add("3");
                row.add("4");
                data.add(row);
            }
            tableModel.setDataVector(data, title);
            table = new JTable(tableModel);

            boxContainer.add(table.getTableHeader(), BorderLayout.NORTH);
            boxContainer.add(table, BorderLayout.CENTER);

            // other controls / toolbar
            JPanel toolbar = new JPanel();
            toolbar.setLayout(new BorderLayout());

            // buttons to the right
            JPanel toolbarButtonGroup = new JPanel();
            toolbarButtonGroup.setLayout(new BoxLayout(toolbarButtonGroup, BoxLayout.X_AXIS));

            // Button1
            JButton button = new JButton("Button1");
            JPanel sepPanel = new JPanel();
            sepPanel.add(button);
            toolbarButtonGroup.add(sepPanel);

            // Button2
            button = new JButton("Button2");
            sepPanel = new JPanel();
            sepPanel.add(button);
            toolbarButtonGroup.add(sepPanel);

            // Button3
            button = new JButton("Button3");
            sepPanel = new JPanel();
            sepPanel.add(button);

            toolbarButtonGroup.add(sepPanel);

            toolbar.add(toolbarButtonGroup, BorderLayout.EAST);
            boxContainer.add(toolbar);

            JPanel subPanel = new JPanel();
            subPanel.setLayout(new BoxLayout(subPanel, BoxLayout.Y_AXIS));          

            // add panel with collapse/expand button
            JPanel buttonPanel = new JPanel(); 
            buttonPanel.setLayout(new BorderLayout());
            buttonPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 24));

            collapsingButton = new JButton("foo"); // , COLLAPSE_ICON
            collapsingButton.setName("toggleButton");
            collapsingButton.setHorizontalAlignment(SwingConstants.LEFT);
            collapsingButton.setBorderPainted(false);
            collapsingButton.setFocusPainted(false);

            buttonPanel.add(collapsingButton, BorderLayout.CENTER); 
            buttonPanel.setBorder(BorderFactory.createLineBorder(Color.BLACK));

            subPanel.add(buttonPanel);

            collapsiblePane.setName("collapsiblePane"); 
            collapsiblePane.setLayout(new CardLayout()); 

            collapsiblePane.add(boxContainer, ""); 
            subPanel.add(collapsiblePane); 

            add(subPanel);

            // TODO: uncomment line
            //collapsingButton.addActionListener(collapsiblePane.getActionMap().get( 
            //      JXCollapsiblePane.TOGGLE_ACTION)); 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:31:22.093

您可以将面板封​​装到尽可能减小尺寸的另一个布局中（内部代码`TestTabContent()`）：

```
JPanel boxContainer = new JPanel();
boxContainer.setLayout(new BoxLayout(boxContainer, BoxLayout.Y_AXIS));

JPanel boxContainerOuter = new JPanel();
boxContainerOuter.setLayout(new BorderLayout());
boxContainerOuter.add(boxContainer, BorderLayout.NORTH);

JScrollPane mainScrollPane = new JScrollPane(boxContainerOuter); 
```

在上面的代码中，`boxContainer`包含在另一个面板中`boxContainerOuter`。选择其布局和位置 ( `BoxLayout.NORTH`)，以便外部容器缩小包含的面板。

# compass-sass - 如何覆盖元素的最后一个子元素的属性

> ID：14322556
> 
> 赞同：0
> 
> 时间：2013-01-14T16:33:42.140
> 
> 标签：compass-sass, sass

我构建的页面上有几个部分元素。对于垂直结构，我应用垂直节奏。现在我想实现所有部分的节奏为 0,0,3,2，而最后一个部分应该或多或少地获得重置节奏。

```
section{    
    @include rhythm(0,0,3,2);
    &:last-child{
        @include rhythm(0,0,0,0);
    }
} 
```

可能是一个基本问题，但不知何故，0,0,3,2 也被应用到最后一个部分，而不是把节奏完全排除在最后一个部分。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:35:10.310

使用[选择`:not()`器](https://developer.mozilla.org/en-US/docs/CSS/%3anot)：

```
section {
    &:not(:last-child) {
        @include rhythm(0,0,3,2);
    }

    &:last-child{
        @include rhythm(0,0,0,0);
    }
} 
```

# html - 您可以浏览所有单选按钮吗？

> ID：14322564
> 
> 赞同：86
> 
> 时间：2013-01-14T16:34:00.703
> 
> 标签：html, radio-button

我有一个单选按钮列表。当我浏览它们时，似乎只有第一个单选按钮或被选中的单选按钮将获得焦点，其余单选按钮将被跳过。复选框没有这个问题。

[http://jsfiddle.net/2Bd32/](http://jsfiddle.net/2Bd32/)

我很难向我的 QA 解释这不是错误。有人可以向我解释为什么会这样。

```
Soccer: <input type="checkbox" name="sports" value="soccer"  tabindex="1" /><br />
Football: <input type="checkbox" name="sports" value="football"  tabindex="2" /><br /> 

<input type="radio" name="num" value="3" tabindex="3">3<br>
<input type="radio" name="num" value="4" tabindex="4">4<br>
<input type="radio" name="num" value="5" tabindex="5">5<br>
<input type="radio" name="num" value="6" tabindex="6">6<br>
<input type="radio" name="num" value="7" tabindex="7">7<br>

Baseball: <input type="checkbox" name="sports" value="baseball"  tabindex="8"  /><br /> 
Basketball: <input type="checkbox" name="sports" value="basketball"  tabindex="9"  /> 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-01-14T16:44:31.163

[您可以在此处](https://www.w3.org/TR/wai-aria-practices/)和[此处](http://www.w3.org/wiki/RadioButton)引用 W3C 作为您的来源。

本质上，单选按钮是一个作为单个元素起作用的组，因为它只保留一个值。切换到单选组将带您到第一个项目，然后使用您在组内导航的箭头键。

> *   焦点可以通过以下方式移动到广播组：
>     *   Tab 键
>     *   针对标签的访问密钥或助记符
>     *   激活标签（通过辅助技术机制）
> *   Tab 键在单选按钮组和其他小部件之间移动焦点。
> *   当焦点在组上并且没有选择单选按钮时：
>     *   Tab 键将焦点移动到组中的第一个单选按钮，但不选择单选按钮。
>     *   Shift+Tab 键将焦点移动到组中的最后一个单选按钮，但不选择单选按钮。
> *   当焦点移动到选中单选按钮的组时，按 Tab 和 Shift+Tab 键将焦点移动到选中的单选按钮。
> *   向上箭头和向下箭头键移动焦点和选择。
>     *   向上箭头键通过组中的单选按钮向前移动焦点和选择。如果第一个单选按钮具有焦点，则焦点和选择将移动到组中的最后一个单选按钮。
>     *   向下箭头键通过组中的单选按钮向后移动焦点和选择。如果最后一个单选按钮有焦点，则焦点和选择移动到组中的第一个单选按钮。*空格键按下检查当前具有焦点的单选按钮。
> *   重新进入组时，焦点返回到先前焦点的点（带有选择集的项目）。
> *   按 T​​ab 键退出组并将焦点移动到下一个表单控件。
> *   按 Shift+Tab 键退出组并将焦点移动到上一个表单控件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-14T16:38:23.190

*具有一个名称*的单选按钮就像单个控件（如输入或选择），您可以使用箭头键更改它的值，Tab 键将焦点移动到另一个控件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-12T17:33:11.167

不确定这对任何人来说是否仍然是一个问题，但我找到了解决方案。如上所述，这不是错误，这是默认行为。我们只需要考虑如何以不同的方式与网站交互。当您进入一组单选对象时，您需要使用箭头键在该组输入中导航，然后使用 Tab 或 shift+tab 退出该组输入。

[https://www.w3.org/TR/wai-aria-practices/examples/radio/radio-1/radio-1.html](https://www.w3.org/TR/wai-aria-practices/examples/radio/radio-1/radio-1.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-30T08:56:23.917

如果您使用的是 angularjs，您可以`ng-model`通过使用 same`ng-model`和remove 直接控制单选按钮`name`。

```
<input type="radio" value="0" ng-model="status">
<input type="radio" value="1" ng-model="status"> 
```

现在，除了标签按下之外的另一个优点是，您可以首先通过单选按钮进行对焦，而无需实际选择它。然后您可以按 选择`space`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-10T15:49:54.947

如果您在应用程序中使用[Angular Material](https://material.angular.io/)，您可以通过在 each 中添加一个以*跨浏览器*兼容的方式启用单选按钮选项卡：`tabindex``<mat-radio-button>`

```
<mat-radio-button [tabindex]="0"> 
```

否则，您将无法在 Safari 中选择单选按钮（因为这是默认浏览器行为 - 单击[此处](https://legacy.forums.gravityhelp.com/topic/safari-doesnt-include-radio-buttons-in-tabindex)进行讨论）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-05-04T21:33:55.110

我在任何地方都找不到答案，只能找到解决方案或谜题的一部分，所以我决定弄清楚并证明它是可以做到的。当您运行下面的代码片段时，不要选择单选按钮，而是单击它们附近，然后按 Tab 键，您会看到它选择了第一个。然后它将选择第二个和第三个等。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <div id="buttonArea" style="width:100%;height:100%;">
        <label>Audi E-Tron</label><input type='radio' id='car1' name='car' value='Audi E-Tron'>
        <label>Bolt EV</label><input type='radio' id='car2' name='car' value='Bolt EV'>
        <label>Leaf EV</label><input type='radio' id='car3' name='car' value='Leaf EV'>
        <label>Tesla Model 3</label><input type='radio' id='car4' name='car' value='Tesla Model 3'>
    </div>
</body>
</html>

<script>
$(document).keydown(function(event) {

var car1 = document.getElementById("car1");
var car2 = document.getElementById("car2");
var car3 = document.getElementById("car3");
var car4 = document.getElementById("car4");

// 9 represents the tab keycode of the document keydown event. 

event.preventDefault(); // this prevents the tab from doing its default action.

    if(event.keyCode == 9 && car1.checked == false && car2.checked == false && car3.checked == false && car4.checked == false) {         
        car1.checked = true; // This checks the radio option.
    }
    else if (event.keyCode == 9 && car1.checked == true) { 
        car2.checked = true;
    }
    else if (event.keyCode == 9 && car2.checked == true) { 
        car3.checked = true;
    }
    else if (event.keyCode == 9 && car3.checked == true) { 
        car4.checked = true;
    }
    else if (event.keyCode == 9 && car4.checked == true) { 
        car1.checked = true;
    }

    car1.blur();    car2.blur();    car3.blur();    car4.blur();
})
</script>
```

# iphone - 从 NSString 中删除动态文本

> ID：14322565
> 
> 赞同：0
> 
> 时间：2013-01-14T16:34:03.660
> 
> 标签：iphone, ios, objective-c, regex, nsregularexpression

我有一个 NSString，其中包含一些我想删除的文本，这是我想从 NSString 中删除的文本：

```
Textid="more-98989"> 
```

该号码可以更改为另一个号码。

有什么办法吗？我需要正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:43:42.103

你绝对可以用正则表达式来做，但你也可以很容易地不用它。找到要删除的字符串的初始部分，然后`">` **从`Textid="`**. 这将为您提供需要删除的字符范围。

```
NSString *myString = "Blah blah Textid="more-98989"> More stuff";
NSString *res = nil;
NSRange start = [myString rangeOfString:@"Textid=\""];
if (start.location != NSNotFound) {
    NSRange end = [myString rangeOfString:@"\">" withOptions:NSLiteralSearch range:NSMakeRange(start.Location+1, myString.length-start.location-1)];
    if (end.location != NSNotFound) {
        res = [myString stringByReplacingCharactersInRange:NSMakeRange(start.location, end.location-start.location+2) withString:@""];
    }
}
if (!res) {
    // Starting or ending tags were not found
    res = myString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:38:50.567

**编辑**

要从不同的字符串中删除此字符串，请使用：

```
NSString *stringToRemove = [NSString stringWithFormat:@"more-%@", dynamicNumber];
NSString *newString      = [bigString stringByReplacingOccurrencesOfString:stringToRemove 
                                                                withString:@""]; 
```

# haskell - 扩展 Repa 阵列形状

> ID：14322566
> 
> 赞同：5
> 
> 时间：2013-01-14T16:34:05.273
> 
> 标签：haskell, repa

我正在编写一个生成图像的程序，我想将其带入 Repa 数组。我目前使用的类型：

```
data Colour = Colour Double Double Double 
```

来表示像素，我有一个（可能效率低下但功能强大）函数将 a`Colour`转换为`DIM1`数组：

```
colourToRepa :: Colour -> Array U DIM1 Double
colourToRepa (Colour r g b) = R.fromListUnboxed (Z :. (3::Int)) [r,g,b] 
```

目前我程序中的图像只是一个`[Colour]`具有`(Int, Int)`代表尺寸的值。

我可以使用它来轻松构建一个`Array V DIM2 Colour`，但是有没有办法（使用`colourToRepa`或其他方式）将此数组扩展为一个`Array U DIM3 Double`？

我可以使用列表，`map`但 Repa 的映射保留了数组的形状（我想从 a`DIM2`转到 a `DIM3`）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:03:24.800

请记住，形状与 repa 中的数据分开存储，因此您可以将数组从 DIM1[重塑](http://hackage.haskell.org/packages/archive/repa/3.2.3.1/doc/html/Data-Array-Repa.html#g:7)为 DIM3，而无需更改数组的[范围](http://hackage.haskell.org/packages/archive/repa/3.2.3.1/doc/html/Data-Array-Repa.html#g:1)。

我们有一个 DIM1（平面）数组：

```
> let x :: Array DIM1 Double ; x = fromList (Z :. (9::Int)) [1..9]
> x
Array (Z :. 9) [1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0] 
```

它的程度是：

```
> extent x
Z :. 9 
```

使用 reshape 我们可以将数组的形状从 1D 转换为 3D：

```
> let y :: Array DIM3 Double ;
      y = reshape (Z :. (3::Int) :. (3::Int) :. (1::Int)) x
> y
Array (Z :. 3 :. 3 :. 1) [1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0] 
```

并且它的类型发生了变化：

```
> :t y
y :: Array DIM3 Double 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:42:58.453

根据您想要添加额外维度的确切方式，也可以使用[extend](http://hackage.haskell.org/packages/archive/repa/3.2.3.1/doc/html/Data-Array-Repa.html#v%3aextend)，例如：

```
extraDim :: Source a Double =>
            Array a (Z :. Int :. Int) Double ->
            Array D (Z :.Int :. Int :. Int) Double
extraDim a = extend (Any :. i :. All) a
               where (Z :. i :. j) = extent a 
```

# android - Android：使用平板电脑模拟其他设备？

> ID：14322572
> 
> 赞同：19
> 
> 时间：2013-01-14T16:34:22.337
> 
> 标签：android, emulation, resolution, tablet, dpi

我正在考虑投资 Google Nexus 10 作为我测试应用程序的首选平板​​电脑 - 我只是想知道是否可以模拟其他设备的屏幕分辨率？由于 nexus 10 具有如此高的分辨率和 DPI，我希望能够在其上运行我的应用程序，例如 800 x 480 屏幕等...

如果可能的话，我想这样做，因为它比使用模拟器更快并且支持多点触控。这看起来很简单，但实际上可能吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-14T16:38:07.900

有一种方法 - Adam Powell（Android 开发人员之一）在 G+ 上的一篇文章很好地解释了这一点：

[https://plus.google.com/u/0/107708120842840792570/posts/cz5TxuoNDfG](https://plus.google.com/u/0/107708120842840792570/posts/cz5TxuoNDfG)

基本上，您可以使用一些 ADB 命令来更改设备显示的分辨率：

```
adb shell am display-size 
```

和

```
adb shell am display-density 
```

对于 4.3+ 的设备，命令略有不同：

```
adb shell wm display-density
adb shell wm dislay-size 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-03T21:03:43.340

[Android 开发者 Adam Powell 在 Google+ 上](https://plus.google.com/u/0/+AdamWPowell/posts/cz5TxuoNDfG)对 Jelly Bean 4.3 的此答案的更新（通过[此 SO 答案](https://stackoverflow.com/a/14322631/2577986)找到的链接）：

> 在 Android 4.3 中，这些选项从“am”命令 (ActivityManager) 移至“wm”命令 (WindowManager)。输入“adb shell wm”了解详情。

所以你现在可以在 4.3 设备上运行：

`adb shell wm size 1280x800`或任何大小或`reset`

和

`adb shell wm density 480`或任何密度或`reset`

只需确保在您运行命令时屏幕当前未显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-21T12:39:18.350

另一种选择是使用虚拟机模拟平板电脑。我做了一个基于其他教程的详细教程，这是链接：

[http://edwindh.blogspot.com/2014/07/emular-uma-tablet-ou-smartphone-com.html](http://edwindh.blogspot.com/2014/07/emular-uma-tablet-ou-smartphone-com.html)

# sorting - ZK：组合框排序

> ID：14322573
> 
> 赞同：2
> 
> 时间：2013-01-14T16:34:26.113
> 
> 标签：sorting, combobox, zk

我正在尝试像 listheader 那样对组合框进行排序。zul 中的comobobox 有没有类似 sort(auto) 的方法？我应该在组合框 AZ 中对文本进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:52:09.593

Simple Awnser：不。
如果您在排序方面需要帮助，请提供您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T16:21:40.813

查询列表时使用 ORDER BY [http://www.w3schools.com/sql/sql_orderby.asp](http://www.w3schools.com/sql/sql_orderby.asp)

# ruby-on-rails - Rails 和 Rake 任务 - 如何在 rake 任务文件中定义的自定义类中调用 Rails 方法

> ID：14322575
> 
> 赞同：2
> 
> 时间：2013-01-14T16:34:39.697
> 
> 标签：ruby-on-rails, ruby, rake

我有以下代码`"Rails Root"/lib/tasks/example.rake`：

```
task :example_task => :environment do
  e = Example.new
  e.example_method
end

class Example
  def example_method
    select_tag 'Example'
  end
end 
```

当我调用`e.example_method`rake 任务时，我得到了错误`"undefined method 'select_tag' for #<Example:0x39f58b0>"`。

`select_tag`是 Rails 方法：[http ://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag)

如何使`select_tag`通话正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:17:56.833

您可以：

通过辅助变量访问辅助方法：

```
helper.content_tag :li, "Helola" 
=> "<li>Helola</li>" 
```

或需要所需的助手

```
require "#{RAILS_ROOT}/app/helpers/some_helper.rb"
include SomeHelper 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:35:53.777

您需要要求帮助程序使用您尝试使用的方法。在 的情况下`select_tag`，您需要要求`ActionView`.

# redmine - Redmine - 如何添加仅在特定项目页面的问题菜单页面上可见的链接？

> ID：14322577
> 
> 赞同：0
> 
> 时间：2013-01-14T16:34:49.113
> 
> 标签：redmine

您好 Redmine 专家，

我想在给定项目的问题菜单页面上包含一个链接（指向 javascript 函数）。假设我有几个项目，但是这个链接只在项目 A 的问题菜单页面上可见，而在项目 B、C、... 上不可见。此链接应该在顶部可见，其他链接存在（概述、活动、路线图、问题、新问题等）。

你能告诉我我怎样才能做到这一点吗？也许是一个易于安装和配置的插件？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T11:06:22.190

如果您熟悉rails，这很容易。redmine 的插件创建有很多很好的[手册](http://www.redmine.org/projects/redmine/wiki/Plugin_Tutorial)。
因此，您可以尝试自己做，或者如果做不到，请雇人为您实施。

# c++ - OpenGL wglMakeCurrent() 报告资源繁忙

> ID：14322584
> 
> 赞同：1
> 
> 时间：2013-01-14T16:35:20.657
> 
> 标签：c++, opengl

我正常初始化我的代码，并获得一个有效的设备/渲染上下文，然后将这两个存储在 OpenGL_Display 类型的静态对象中。然后，当我从 DLL 外部调用图像更新函数时，对两者的调用都会 `wglGetCurrentContext()`返回`wglGetCurrentDC()`NULL。当我调用`wglMakeCurrent()`并存储在我的类中时，`HDC`将返回错误 170（请求的资源正在使用中。）`HRC``GetLastError()`

我不明白如何从任何地方使用该资源。请注意，代码从 .exe 运行良好，因此它与我从 C# 应用程序调用它有关，或者它首先位于 DLL 中，但对于我的生活，我无法弄清楚为什么那些资源很忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T16:46:23.873

当上下文在另一个线程中处于活动状态时，将返回此错误。

很可能是您的创建/初始化代码执行了`wglMakeCurrent()`，但在返回之前没有将上下文设置回 NULL 。

如果绘图随后发生在不同的线程上，它将无法设置上下文并返回 ERROR_BUSY。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T16:45:57.920

如果您想在 C# 应用程序中使用 OpenGL（我假设是 .NET 框架），那么您应该使用[OpenTK](http://www.opentk.net/)。

# java - Collections.sort 实现

> ID：14322585
> 
> 赞同：9
> 
> 时间：2013-01-14T16:35:22.200
> 
> 标签：java, sorting, collections

我无法理解 Collections.sort 方法的方法实现和逻辑。这是我找到的方法实现，

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
    Object[] a = list.toArray();
    Arrays.sort(a);
    ListIterator<T> i = list.listIterator();
    for (int j=0; j<a.length; j++) {
        i.next();
        i.set((T)a[j]);
    }
    } 
```

首先这个方法的返回类型是void。方法签名中有什么`<T extends Comparable<? super T>>`作用？

在这里使用 Array.sort 的目的是什么？

同样，一旦我们实现了可比较或比较器，我们编写的 compare 或 compareTo 方法逻辑在哪里考虑？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T16:40:08.813

请注意泛型出现在哪里：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) 
```

它基本上声明并限制泛型类型`T`。在这种特殊情况下，它意味着：*`T`必须扩展`Comparable<F>`*where*`F`必须是类型`T`或 it 的超类型*。这意味着如果您有以下课程：

```
class Animal {}

class Dog extends Animal implements Comparable<Animal> {
    //...
} 
```

你仍然可以传递`List<Dog>`给`Collections.sort()`（注意，`Dog`implements `Comparable<Animal>`，而不是`Comparable<Dog>`像往常一样）。

* * *

`Arrays.sort()`之所以使用，是因为这是实现排序算法的地方。如果集合不是随机访问，则需要从集合到数组的防御性复制以遵守合同并避免次优运行时。

一些列表，如`LinkedList`随机访问（按索引）性能很差，这使得大多数排序算法非常慢（在 范围内`O(n^2)`）。最好防御性地复制整个集合并对数组进行排序，因为`O(n + nlogn + n)`仍然是`O(nlogn)`- 如果你得到大 O 表示法）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T16:39:46.537

工作方式`Collections.sort`是它实际上采用集合的底层数组，并调用**其**排序方法对实际元素进行排序。Java 使用的排序算法是闪电般的[Timsort](https://en.wikipedia.org/wiki/Timsort)。

该方法返回`void`，因为它就地对集合*进行*排序。也就是说，它通过对其元素进行排序来*修改*您作为参数提供的集合。返回排序后的副本会浪费资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T16:42:08.063

> 首先这个方法的返回类型是 void

因为它是**就地**实施。传递给方法的列表将被排序

> 方法签名中有什么`<T extends Comparable<? super T>>`作用？

比较扩展`Comparable`接口类型`T`及其子项的结果。

> 对象[] a = list.toArray();

将列表转换为普通数组。

> 在这里使用 Array.sort 的目的是什么？

数组排序。

> i.set((T)a[j]);

从数组中按排序顺序分配给列表元素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T16:37:47.520

```
 What is <T extends Comparable<? super T>> 
```

这是指定`T`in 的类型`List<T>`。阅读有关[类型推断](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)的本教程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T16:38:43.333

> 首先这个方法的返回类型是void。> 方法签名中的作用是什么？

**是您在方法中使用的泛型类型，T 只能是实现 java.util.Comparable 的对象。**

 **例如，如果你想将 a 传递`List<String>`给它会编译为`java.lang.String`implements的 sort 方法`java.lang.Comparable`，但是如果你传递`List<Animal>`了你会得到一个编译器错误，除非`Animal`implements`java.lang.comparable`**

# c# - 如何使用 c# 访问控制面板->声音->通信对话框？

> ID：14322586
> 
> 赞同：2
> 
> 时间：2013-01-14T16:35:36.013
> 
> 标签：c#, windows

我正在使用一个经常与某种形式的 Windows 电话通话一起使用的程序。

在我的程序执行期间发生的其他声音有时会被抑制，因为使用该程序的人将在声音->通信对话框中进行设置，这将导致这种情况。

有没有办法以编程方式访问此对话框并为用户调整选项而无需他们这样做？

后续问题；是否有某种方法可以向 Windows 提供程序白名单，以确定哪些程序不应用这些设置？

我刚开始调查这个问题，所以非常感谢任何输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:12:59.723

您可以直接访问对话框保存到的注册表设置，以更改选项。

```
HKCU\Software\Microsoft\Multimedia\Audio\UserDuckingPreference 
```

将`DWORD`值设置为 0、1、2 或 3，以在对话框中设置相应的值（从上到下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:39:59.447

我认为没有办法使用应用程序修改此类选项......但是，如果您还需要它来操作声音，[PlaySound](http://msdn.microsoft.com/en-us/library/ms712879.aspx)是 API，另请参阅[播放系统声音](http://msdn.microsoft.com/en-us/library/ms712868%28VS.85%29.aspx)。

# coldfusion - 传递 2 个变量的 ColdFusion 脚本

> ID：14322587
> 
> 赞同：0
> 
> 时间：2013-01-14T16:35:38.767
> 
> 标签：coldfusion, coldfusion-10

我试图在 ColdFusion 函数中返回两个变量。

我知道您可以使用 & 符号在 C++ 中执行此操作。

我的代码：

```
<cfscript>

function browserDetect(browser,version) {

      browser="some value string";
      version="some other value string";
}
</cfscript> 
```

其他页面：

```
<cfoutput>#BrowserName# and #BrowserVer#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T16:41:35.357

我首选的方法是返回一个带有适当键/值对的结构。

```
<cfscript>

    function browserDetect(arg1,arg2) {
      var resultStruct = structNew() ;
      resultStruct.browser="some value string";
      resultStruct.version="some other value string";

      return resultStruct ;
    }
</cfscript> 
```

除了创建本地结构外，您还可以使用显式结构返回结果

```
return { browser : "some value string" , version : "some other value string" } 
```

设置`resultVar`为函数的结果，然后您只需使用输出

```
<cfoutput>#resultvar.browser# and #resultVar.version#</cfoutput> 
```

您还可以创建一个 JSON 字符串并将其返回。

# jquery - 加载后jquery按键不起作用？

> ID：14322592
> 
> 赞同：0
> 
> 时间：2013-01-14T16:35:55.493
> 
> 标签：jquery

我正在尝试使用键盘进行导航。我用 jquery load() 函数加载新内容，但它只在第一次加载脚本时工作，我听说你应该使用 jquery live() 函数来让它加载每个页面，但它没有. 这是按键功能：

```
$(document).live("keydown", function(e){
        if (e.keyCode == 49) {
            $('.next').click();
        }
        if (e.keyCode == 50) {
            $('.prev').click();
        }
    }); 
```

此代码位于加载的每个页面中。但只在第一次使用该页面时有效，单击后无效。为什么？.next 和 .prev 做什么：

```
$('.next').click(function(event) {
        event.preventDefault();
        var href = this.href;
        $('.loading').fadeIn();
        $('#content').load(href, function(){ 
            $('.loading').fadeOut();
        });
    }); 
```

然而，在使用鼠标加载后按 .next 和 .prev 确实有效。只是只工作一次的按键。

这是 HTML 结构：

```
<div id="content">
 Image
 <div class="nav">
  <a href="page.php?id=1" class="prev">Prev</a>
  <a href="page.php?id=2" class="next">Next</a>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:44:04.403

似乎这对你有用。

```
$('.next').click(function (event) {
  event.preventDefault();
  var href = this.href;
  $('.loading').fadeIn();
  $('.main-bg').load(href, function () {
    $('.loading').fadeOut();
  });
}); 
```

由于您总是需要这两个按钮，因此您不需要动态加载它们。此外，事件的数量将随着每次点击而增加。所以只替换`main-bg`div里面的内容。

**更新：**

另外，我注意到每当您更改图像时，您都会重新加载 javascript。那会产生问题。因此，仅将脚本添加到第一页。

如果您希望每次都加载脚本，请使用以下代码

```
$(document).keydown( function(e){
        if (e.keyCode == 49) {
            $('.next').click();
        }
        if (e.keyCode == 50) {
            $('.prev').click();
        }
    });

$('.next').click(function(event) {
        event.preventDefault();
        var href = this.href;
        $('.loading').fadeIn();
        $('#content').load(href, function(){ 
            $('.loading').fadeOut();
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:41:25.653

```
$(document).on("keydown", function(e){
    if (e.keyCode == 49) {
        $('.next').trigger("click");
    }
    if (e.keyCode == 50) {
        $('.prev').trigger("click");
    }
});

$(document).on('click', '.next', function() {
    var href = $(this).attr("href");
    $('.loading').fadeIn();
    $('#content').load(href, function(){ 
        $('.loading').fadeOut();
    });
    return false;
}); 
```

请检查，加载内容后#content 是唯一的...我更改了您的一些代码，但我认为没有必要。

# javascript - 虚拟地球 - 导入本地 KML？

> ID：14322593
> 
> 赞同：0
> 
> 时间：2013-01-14T16:36:00.063
> 
> 标签：javascript, map, bing-maps, virtual-earth

我目前在本地使用 Virtual Earth 测试应用程序时遇到了一些问题。我在 MSDN 论坛上看到这句话：“KML 文件必须由 VE 服务解析，因此可以公开访问。”

我认为这是正确的，因为 Fiddler 没有为我的 VEShapeSourceSpecification 构造函数中指定的（本地）URL 显示任何传出 HTTP 请求。

有针对这个的解决方法吗？我什至无法在我们的 UAT 环境上进行测试，因为它也不能公开访问。

我有点困惑，因为我确定我之前在本地使用过 Virtual Earth，没有任何问题——不过，这本来是使用 GeoRSS 的。

本地 KML 问题是否有解决方案？如果没有，将我的提要转换为 GeoRSS 会解决这个问题吗？如果出现同样的问题，我不想将我们的服务转换为输出 GeoRSS。

非常简单的问题示例：

```
<div id='myMap' style="position:relative; width:100%; height:400px;"></div>

<script type="text/javascript" language="javascript">
map = new VEMap("myMap");
map.LoadMap(new VELatLong(1.3, 1.3), 15, "r", false);
map.ImportShapeLayerData(new VEShapeSourceSpecification(VEDataType.ImportXML, 'http://localhost:81/ts.kml', new VEShapeLayer()));
</script> 
```

我的测试 KML 文件在[http://kmlvalidator.com/validate.htm](http://kmlvalidator.com/validate.htm)进行验证，并且在托管在公共站点上时也可以与 Virtual Earth 一起使用。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:41:11.377

本地 KML 问题是否有解决方案？-> 不，除非您编写自己的客户端 KML 解析器。

如果没有，将我的提要转换为 GeoRSS 会解决这个问题吗？-> 是的，访问本地 GeoRSS 文件不需要往返 Microsoft Bing 地图服务器。

# node.js - 绑定前连接时套接字忙

> ID：14322599
> 
> 赞同：3
> 
> 时间：2013-01-14T16:36:12.683
> 
> 标签：node.js, zeromq

我正在使用[zeromq](http://www.zeromq.org)将消息从 node.js 服务器推送到我的工作人员。`router`我在 node.js 端创建了一个套接字

```
var sender = zmq.socket('router');
sender.bind('tcp://127.0.0.1:6633', function(err) {
  if (err) {
    console.log( 'Error binding socket' );
    return;
  }
  console.log('OK!');
} 
```

`dealer`并使用工作代码中的a 连接到该地址。

当工作人员首先连接时出现问题，在绑定之前（并非总是如此，但经常如此）。这应该不是 zeromq 文档的问题，所以我认为这是[node.js 绑定](https://github.com/JustinTulloss/zeromq.node)的问题，问题是我该如何解决这个问题？

还有一个问题，我可以在函数中捕获此异常`Socket is busy`，`process.on('uncaughtException',...)`而不是在`bind`函数中

我应该提到我正在 Windows 7 64 位上执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T11:45:41.823

问题可能是您使用的是 bind()，而实际上您应该使用的是 bindSync()。当您阅读源代码时，您会发现 async bind() 实际上[会锁定套接字](https://github.com/JustinTulloss/zeromq.node/blob/master/binding.cc#L519)并[在每次](https://github.com/JustinTulloss/zeromq.node/blob/master/binding.cc#L330)对它执行任何操作时检查锁定。您可能遇到的情况是工作人员在套接字解锁之前连接，因此会引发异常。只是用 bindSync() 替换 bind() 对我有用。然而，我猜这不是一个理想的解决方案，或者说不是非常 node.js-ish。让我们证明我的意思：

```
var zmq = require('zmq')
  , sender;
sender = zmq.socket('router');
sender.bind('tcp://127.0.0.1:6633', function(err) {
  if (err) {
    console.log( 'Error binding socket' );
    return;
  }
  sender.close(); // This is fine! The socket is ready!
});

sender.close(); // This is wrong! The socket is not ready yet! 
```

所以你可以调用 bindSync() 并且不关心，或者调用 bind() 并在回调中继续工作，但你绝对不能使用 bind() 并在不等待它完成的情况下继续。bindSync() 使代码更易于阅读，但您在调用期间阻塞了整个 node.js 实例。所以我认为 bind() 方式在应该使用 node.js 的方式上更干净......

希望这有帮助;-)

# jquery - Jquery-UI 切换

> ID：14322601
> 
> 赞同：0
> 
> 时间：2013-01-14T16:36:24.890
> 
> 标签：jquery, jquery-ui

在[http://jqueryui.com/toggle/](http://jqueryui.com/toggle/)上有一个很好的例子，它展示了如何使用切换方法进行动画，它甚至提供了任意方法来传递动画类型作为参数。

这是一个不太复杂的例子（基于toogle），但它不起作用。我添加了第二个按钮，应该执行硬编码动画（runeffect2）。基本上它应该在不调用该方法的情况下在那里做动画......但它不起作用。我就是想不通为什么...

```
</style>
  <script>
  $(function() {
    // run the currently selected effect
    function runEffect() {
      // get effect type from
      var selectedEffect = $( "#effectTypes" ).val();

      // most effect types need no options passed by default
      var obj = {};

      // run the effect
      $( "#effect" ).toggle( selectedEffect, obj, 500 );
    };

    // set effect from select menu value
    $( "#button" ).click(function() {
      runEffect();
      return false;
    });
    $( "#buttonn" ).click(function() {
        var options = {};

      $( "#effect" ).toggle( "Explode", options, 500 );
      //return false;
    });

  </script> 
```

[我已经在小提琴http://jsfiddle.net/xTfED/](http://jsfiddle.net/xTfED/)上放置了完整的非工作解决方案

# google-chrome - Chrome下载文本文件，无法在窗口中打开

> ID：14322604
> 
> 赞同：2
> 
> 时间：2013-01-14T16:36:45.640
> 
> 标签：google-chrome

如何设置文本文件的链接，以便 Chrome 下载文件而不是显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-01T13:42:59.183

您可以从内置的开发人员功能（F12）中获取它，只需右键单击该文件作为选择`Save as..`

[![在此处输入图像描述](../Images/408c1240972aaa0010c80f8c2f7ba1dc.png)](https://i.stack.imgur.com/16jag.jpg)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-23T17:52:19.210

你可能需要做一些与这个非常相似的问题的答案类似的事情

[强制从谷歌浏览器下载图片而不打开新标签](https://stackoverflow.com/questions/3632013/force-download-a-picture-from-google-chrome-without-opening-new-tab?rq=1)

# ruby-on-rails - 我无法让 Nokogiri 循环遍历子节点

> ID：14322607
> 
> 赞同：1
> 
> 时间：2013-01-14T16:36:51.080
> 
> 标签：ruby-on-rails, ruby, xml, xml-parsing, nokogiri

我正在尝试创建一个循环以在我的数据库中为每个 content_option 创建一条记录。我有它，所以它会创建一个选项，但不会创建另一个选项，我不知道为什么。我尝试复制我在谷歌上找到的其他代码，但它只做了 1 个条目。

```
 <?xml version="1.0" encoding="UTF-8" ?>
        <event>
            <name>My Event</name>
            <legacy_id>54321</legacy_id>
            <domain_id>1</domain_id>
            <description>This is a Auction</description>
            <event_type></event_type>
            <starts_at></starts_at>
            <street_1></street_1>
            <city></city>
            <state></state>
            <zip></zip>
            <country></country>
            <phone_1></phone_1>
            <fax></fax>
            <content_options>
                <content_option>
                    <contentable_type>Event</contentable_type>
                    <contentable_id>54321</contentable_id>
                    <key>terms_and_conditions</key>
                    <content>Some Terms and Conditions</content>
                </content_option>
                <content_option>
                    <contentable_type>Event</contentable_type>
                    <contentable_id>54321</contentable_id>
                    <key>email</key>
                    <content>event@event.com</content>
                </content_option>
            </content_options>
            <event_links>
                <link>
                    <name>Brochure</name>
                    <event_id>54321</event_id>
                    <uri>http://www.mysite.com</uri>
                </link>
                <link>
                    <name>Auction Documents</name>
                    <event_id>54321</event_id>
                    <uri>http://www.auctiondocuments.com</uri>
                </link>
            </event_links>
            <phone_numbers>
                <phone_number>
                    <number_type>Approvals</number_type>
                    <event_id>54321</event_id>
                    <name></name>
                    <number></number>
                </phone_number>
                <phone_number>
                    <number_type></number_type>
                    <event_id></event_id>
                    <name></name>
                    <number></number>
                </phone_number>
            </phone_numbers>
            <lots>
                <lot>
                    <legacy_id>12345</legacy_id>
                    <number>1</number>
                    <title>Big Cow</title>
                    <description>A big cow</description>
                    <position>1</position>
                    <price>500</price>
                    <updates>
                        <update>
                            <lot_id>12345</lot_id>
                            <details>Color is blue</details>
                        </update>
                    </updates>
                    <images>
                        <image>http://the.image.is/here.jpg</image>
                    </images>
                    <catalog_images>
                        <catalog_image>http://the.image.is/here.jpg</catalog_image>
                    </catalog_images>
                    <videos>
                        <video>http://the.video.is/here.flv</video>
                    </videos>
                </lot>
            </lots>
        </event> 
```

导轨控制器

```
def upload_xml
        xml = params[:file].read
        xmldoc = Nokogiri::XML(xml)

        @event = Event.find_by_legacy_id(xmldoc.xpath("event/legacy_id").text) 
        if @event.nil?
            @event = Event.new 
            @event.legacy_id = xmldoc.xpath("event/legacy_id").text
            @event.name = xmldoc.xpath("event/name").text
            @event.domain_id = xmldoc.xpath("event/domain_id").text
            @event.description = xmldoc.xpath("event/description").text
            @event.event_type = xmldoc.xpath("event/event_type").text
            @event.starts_at = xmldoc.xpath("event/starts_at").text
            @event.street_1 = xmldoc.xpath("event/street_1").text
            @event.city = xmldoc.xpath("event/city").text
            @event.state = xmldoc.xpath("event/state").text
            @event.zip = xmldoc.xpath("event/zip").text
            @event.country = xmldoc.xpath("event/country").text
            @event.phone_1 = xmldoc.xpath("event/phone_1").text
            @event.fax = xmldoc.xpath("event/fax").text
            @event.save

            content_options = xmldoc.xpath("//content_options")

            content_options.each do |option|
                @content_option = ContentOption.new
                @content_option.contentable_type = option.at("contentable_type").text
                @content_option.contentable_id = option.at("contentable_id").text
                @content_option.key = option.at("key").text
                @content_option.content = option.at("content").text
                @content_option.save
            end

        else

        end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:57:50.953

更改这行代码：

```
content_options = xmldoc.xpath("//content_options") 
```

对此：

```
content_options = xmldoc.xpath("//content_option") 
```

当然它只会显示一个条目；在您的 XML 中，只有一个`content_options`元素，并且有 2 个`content_option`元素。

# windows-phone-8 - 为 windows phone 8 地图添加多个坐标

> ID：14322611
> 
> 赞同：0
> 
> 时间：2013-01-14T16:37:00.643
> 
> 标签：windows-phone-8

我的 wp8 应用程序从 xml 加载了不同的协调，所有协调都应该显示在地图中？我的应用程序中的每一件事都是动态创建的，所以我以编程方式创建地图并添加 maplayer 和 mapoverlay。但似乎我不能向 maplayer 添加多个 mapoverlay。请帮我。

```
MapOverlay myLocationOverlay = new MapOverlay();
                myLocationOverlay.Content = pinIMG;
                myLocationOverlay.PositionOrigin = new Point(0.5, 0.5);
                myLocationOverlay.GeoCoordinate = new GeoCoordinate(57.724611, 12.938945);

MapOverlay myLocationOverlay2 = new MapOverlay();
                myLocationOverlay2.Content = pinIMG;
                myLocationOverlay2.PositionOrigin = new Point(0.5, 0.5);
                myLocationOverlay2.GeoCoordinate = new GeoCoordinate(57.724155, 12.939023);

MapLayer myLocationLayer = new MapLayer();
myLocationLayer.Add(myLocationOverlay);
myLocationLayer.Add(myLocationOverlay2);
MyMap.Layers.Add(myLocationLayer); 
```

它适用于一个 mapoverlay 但不是两个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:12:05.497

通过使用您的示例，我发现将相同的`Image`对象分配给`MapOverlays`' content 变量不起作用（抛出调试异常）。给`MapOverlays`一个独特的`Image`对象是解决方案：

假设您使用的是位图图像，那么这就足够了：

```
BitmapImage bmp = new BitmapImage(new Uri("/Assets/pinIMG.png", UriKind.Relative));

System.Windows.Controls.Image pinIMG1 = new System.Windows.Controls.Image();
pinIMG1.Source = bmp;

System.Windows.Controls.Image pinIMG2 = new System.Windows.Controls.Image();
pinIMG2.Source = bmp;

// MapOverlay and MapLayer setup (each overlay gets its on pinIMG...) 
```

听起来您可能在`MapOverlays`从 XML 加载坐标时使用循环生成。如果是这种情况，只需在每次循环中设置一个新图像，而不是在循环的每次迭代中重用相同的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:03:28.693

请在另一个线程中查看我对这个问题的回答[@How can I add programmatically add a PushPin, and can I make it have a custom image?](https://stackoverflow.com/questions/14267149/how-can-i-add-programmatically-add-a-pushpin-and-could-i-make-it-have-a-custom/14269412#14269412)

简短的版本是您可以在单个 MaPlayer 中以编程方式生成多个 MapOverlay，或者您可以使用 MapExtensions 图钉数据绑定来为您执行此操作。

此外，您的代码中存在错误。您不能将相同的 UIElement（在本例中为 Image）添加到可视化树两次。正如 user8709 所说，您应该为每个 MapOverlay 创建一个新的 UIElement。

# c# - 尝试在调试模式下运行项目时出错，但如果我运行 EXE 文件则有效

> ID：14322612
> 
> 赞同：1
> 
> 时间：2013-01-14T16:37:03.813
> 
> 标签：c#, wpf, compiler-errors

当我尝试为 Visual Studio 2010 和 Visual Studio 2012 运行调试器时，我收到以下错误：

> 尝试运行项目时出错：无法加载文件或程序集“MyProject”或其依赖项之一。试图加载格式不正确的程序。

但是当我转到 x64/Debug 文件夹并直接运行 EXE 时，它可以正常打开。

我尝试禁用包含 32 位引用的项目，但即使所有其他项目都是 64 位（通过配置管理器设置），它仍然给我错误

编辑#1：在 32 位编译模式下，我将`Any CPU`除主启动项目之外的所有内容都设置为 x86，并且它可以正常运行调试模式。当我转到 64 位并执行相同操作但将 Main 启动项目更改为 x64 时，它会出现上述错误。我尝试将所有目标值设置为 x64，但仍然没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T17:54:23.053

以下是我对这个问题的修复：

在 Visual Studio 2010 for c# 的解决方案资源管理器中，右键单击每个项目 -> 属性 -> 构建。将平台*和*平台目标更改为 64 位的任何 CPU，或 32 位的 x86。

之后我也遇到了一点参考问题，只需删除并重新添加任何导致错误的参考即可。

如果您已经找到解决此问题的方法，请发布一个！谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T18:55:53.480

我可以确认 Everlight 的技巧确实解决了这个问题。

我的情况如下：

*   该解决方案是在 x86（32 位）Windows 7 上运行的 Visual Studio 2012 中创建的。
*   升级到 x64（64 位）Windows 8 后，我无法再在同一 Visual Studio 版本中调试解决方案。但是我可以手动运行编译的 exe 文件。
*   我得到的错误是：“尝试运行项目时出错：无法启动程序'path-to-solution-exe-file'。发生了未知的Windows Web服务基础结构错误。”

修复方法是：项目 > {项目名称} 属性... > 构建 > 平台目标。默认情况下它应该是“任何 CPU”。将其更改为 x86 或 x64。

我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T04:47:27.990

我在调试 x64 空控制台应用程序时遇到了同样的问题。应用程序在任何情况下都无需调试即可运行，但调试仅适用于 x86/AnyCPU 目标平台（32 位进程），但使用 x64 我得到了：

> 尝试运行项目时出错：无法加载文件或程序集“ConsoleApplication1”或其依赖项之一。试图加载格式不正确的程序。

我的解决方案是关闭**Project -> Properties -> Debug -> Enable the Visual Studio hosting process**

# bash - Bash - 日期无法识别英国格式 (dd/mm/yyyy)

> ID：14322614
> 
> 赞同：1
> 
> 时间：2013-01-14T16:37:06.143
> 
> 标签：bash, date, format

我有一个包含以下日期的文本文件，格式为`dd/mm/yyyy`：

```
14/09/1992
15/04/1983
15/09/1961
02/06/1979
14/12/1971
08/02/2001
19/06/1999
14/09/1969
31/08/2002
30/07/1980
25/04/1973
03/01/1992 
```

我想将其转换为`YYYY/mm/dd`脚本中的格式。我打算使用 date 命令这样做：

```
date -f tempDate +%Y/%m/%d 
```

但问题是，它无法识别英式日期并显示以下错误，因为我相信它正在阅读它，因为`mm/dd/yyyy`我不希望它：

```
date: invalid date `14/09/1992' 
```

还有另一种方法吗？或者有什么办法可以改变日期格式的顺序？

另外，我需要这个脚本在我不是系统管理员的服务器上工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:54:55.627

如果文件与描述的一样，为什么不使用以下内容反转列`awk`：

```
$ awk 'BEGIN{FS=OFS="/"}{print $3,$2,$1}' file
1992/09/14
1983/04/15
1961/09/15
1979/06/02
1971/12/14
2001/02/08
1999/06/19
1969/09/14
2002/08/31
1980/07/30
1973/04/25
1992/01/03 
```

**编辑：**

`awk`使用多个字段分隔符同样容易：

```
$ awk -F[/,] '{print $1","$2","$5"/"$4"/"$3}' <<< "name,number,14/09/1992"
name,number,1992/09/14 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T16:54:14.593

您可以使用快速 awk 脚本更改为年/月/日顺序：

```
 awk -F '/' '{print $3"/"$2"/"$1}' < file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T17:04:42.693

至少在 Mac OS X 上，`-f`迄今为止的选项记录为：

> `-f` 使用 input_fmt 作为格式字符串来解析提供的 new_date 而不是使用默认 `[[[mm]dd]HH]MM[[cc]yy][.ss]`格式。解析是使用`strptime(3)`.

因此，您应该使用：

```
date -f '%d/%m/%Y' +'%Y-%m-%d' ... 
```

但是，剩余的问题是转换多个值；为此，您需要多次调用`date`，因此您想尝试以下操作：

```
# Bogus code
while read date                                   # Bogus code
do date -f '%d/%m/%Y' $date +'%Y-%m-%d'           # Bogus code
done < tempDate                                   # Bogus code
# Bogus code 
```

但是，这会尝试设置系统时钟（除非您`root`当时设置了系统时钟，否则不会很成功，并且您不应该`root`在实验时设置）。因此，没有一种明显的方法可以让`date`命令执行您想要的操作。

因此，使用`awk`、`sed`、和正则表达式来映射日期的答案是可行的方法。`perl``python`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T16:50:02.550

国际标准日期格式 ISO 8601 是`YYYY-MM-DD`，不是`YYYY/MM/DD`。我建议使用它，除非您有充分的理由不这样做。

美国和英国的日期格式对于每个月 13 日之前的日期是不明确的，因此`date`不会识别它也就不足为奇了。可能有一种方法可以告诉它给定的字符串是英国格式，但我不知道它是什么。

您可以使用`sed`或任何其他执行正则表达式替换的工具来更改格式：

```
$ echo 14/09/1992 | sed 's/\([0-9][0-9]\)\/\([0-9][0-9]\)\/\([0-9][0-9][0-9][0-9]\)/\3-\2-\1/'
1992-09-14 
```

Perl 可以不那么冗长地做到这一点：

```
$ echo 14/09/1992 | perl -pe 's/(\d\d)\/(\d\d)\/(\d\d\d\d)/$3-$2-$1/'
1992-09-14 
```

或者：

```
$ echo 14/09/1992 | perl -pe 's/(\d{2})\/(\d{2})\/(\d{4})/$3-$2-$1/'
1992-09-14 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-24T12:52:12.087

如果您使用的是 Windows，您还可以更改区域设置以更改整个计算机上的日期格式，特别是您的 .csv 文件：

赢7：

1./ 转到开始按钮 2./ 选择控制面板 3./ 时钟、语言和地区。4./更改日期、时间和数字格式。

# php - 计算表中的特定行

> ID：14322616
> 
> 赞同：-1
> 
> 时间：2013-01-14T16:37:08.360
> 
> 标签：php, mysql, count

嗨，我正在尝试计算特定行大于 0 的表。如果表（请求）的行（rq_stamp）大于 0，则应该计算/选择它。

这是我到目前为止得到的，但我总是得到 1。（$num_rows 总是 1）。

```
 $rq_notice = mysql_query("SELECT * FROM requests WHERE rq_poster = '$rq_notice_user' HAVING COUNT(rq_stamp) > 0 ") or die(mysql_error());   
if(mysql_num_rows($rq_notice) > 0 )
{
    $num_rows = mysql_num_rows($rq_notice);
    echo $num_rows;
} 
```

感谢您提供的任何帮助，如果之前已经回答了该问题，但我在搜索时找不到它，我很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:42:11.190

通过使用`COUNT()`，您将聚合引入到您的查询中，这似乎没有必要。如果您只是想确定 的值`rq_stamp`是否大于 0，请执行以下操作：

```
SELECT * FROM requests WHERE rq_poster = '$rq_notice_user' AND rq_stamp > 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:50:44.287

我认为您确实误解了 count 的作用；）

你在这里写的是一个查询。换句话说，您正在派人搜索数据。您将得到的正是您在 SELECT 部分中定义的内容。

如果按特定列分组，Count 是一个可以使用的函数。您可以在此处对存储照片及其上传者的表设置查询。使用*count*您现在可以获得每个上传者上传的照片数量。更多示例：[http ://dev.mysql.com/doc/refman/5.1/en/counting-rows.html](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)

我想你想做这样的事情：

```
SELECT * FROM requests WHERE rq_poster = '$rq_notice_user' AND rq_stamp > 0 
```

只需获取海报为 X 且时间戳 > 0 的所有请求。使用 PHP，您现在可以检查收集了多少行，您可以使用 mysql_query 获取行。[http://php.net/mysql_query](http://php.net/mysql_query)

**But please** use mysqli or PDO instead of mysql. I'm here just talking about the functions you use in PHP. The PHP-extension mysql is deprecated since PHP 5.5 and you shouldn't use something, you now know of, will be removed. If you ask, why it is deprecated: [http://de2.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://de2.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

# html - 如何在子窗口中唯一标识 iframe？

> ID：14322618
> 
> 赞同：2
> 
> 时间：2013-01-14T16:37:17.697
> 
> 标签：html, internet-explorer, opera, session-storage, sessionstorage

我们有以下情况：

Iframe 由一个域 (A) 中的页面嵌入和控制。

我们无权更改域 A 的代码。

Iframe 中的内容是从另一个域 (B) 传递的。

我们正在使用会话存储来处理 iframe 中的所有会话变量。

有一个 Comet 风格的推送正在发生，以向 iframe 提供实时更新，并且为了完成这项工作，我们需要能够唯一地识别每个 iframe。

为此，我们将唯一 ID 存储在 sessionStorage 变量中，当然问题就在这里。

一切都很好，直到域 A 使用“window.open”打开一个子窗口，我们最终得到以下场景。

```
+----------+                +----------+
| A        |                | A        |
| +------+ |                | +------+ |
| | B (1)| | window.open -> | | B (2)| |
| +------+ |                | +------+ |
+----------+                +----------+ 
```

加载 B(2) 时，会话存储按如下方式处理：

```
IE 8,9,10: sessionstorage[B1] is copied to sessionstorgage[B2]
Firefox:   sessionstorgage[B2] is uninitialized (this is OK)
Chrome:    sessionstorage[B1] is copied to sessionstorgage[B2]
Safari:    sessionstorage[B1] is copied to sessionstorgage[B2]
Opera:     sessionstorage[B1] is shared (ie the same) as sessionstorgage[B2]
           (a change in one will appear in the other - is this a bug?) 
```

所以......唯一ID在大多数浏览器中被克隆（或在Opera的情况下共享）

在**Opera**中，因为它似乎共享会话存储，所以可能没有解决方案。

在**Firefox**中，我们就像一个全新的窗口，所以没有问题。

在**Safari**和**Chrome**中，我们可以执行以下操作

```
if (window.opener)
{
    if (window.opener.frames.THE_IFRAME.sessionstorage.THE_UNIQUE_ID ==
        sessionstorage.THE_UNIQUE_ID)
    ... get a new unique ID ...
} 
```

在**IE**中，我们无法访问 window.opener.frames.THE_IFRAME，因为由于跨域限制，它根本不允许我们访问 window.opener 中的任何内容。

任何关于如何在 IE 中进行这项工作的建议（我们可以在没有 Opera 支持的情况下生活），或者总体上更好的解决方案，将不胜感激。

# jquery - 剑道模板记住第一个输入的值

> ID：14322621
> 
> 赞同：1
> 
> 时间：2013-01-14T16:37:41.527
> 
> 标签：jquery, kendo-ui

最近我遇到了剑道模板的奇怪行为。如果您在模板中有输入，则模板将只记住第一个输入的值。因此，您输入的值以后不可能被覆盖。

我有以下模板

```
 <script id="add-new-gruppe" type="text/x-kendo-template">
        <div class="row-fluid">
            <div class="span12">
                <label>Name:</label>
                <input type="text" class="span12" id="groupName" name="newGroupName" /><br />
            </div>
        </div>
        <br />
        <div class="pull-right">
            <button class="add-new-gruppe btn btn-primary">OK</button>
            <button class="add-new-gruppe-cancel btn">Cancel</button>
        </div>
    </script>​ 
```

问题是，如果用户尝试添加超过 1 个组 - 他将永远无法做到这一点，因为只会考虑第一个输入的名称。

在这里您可以重现该问题（我基于删除确认示例）：

[http://jsfiddle.net/x79yp/2/](http://jsfiddle.net/x79yp/2/)

*   点击“删除记录”
*   输入 123
*   点击是
*   您会看到带有刚刚输入的值的警报。
*   点击“删除记录”
*   输入 345
*   点击是
*   您会看到带有“123”而不是输入值“345”的警报

要么这是一个非常有趣的错误，要么是一些特定的行为。

任何想法为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:33:11.603

问题是您多次创建窗口而不是删除它。当您下次请求`input`元素时，您将获得第一个元素的值（而不是刚刚创建的最后一个元素）。

相反，请考虑其他代码：

HTML

```
<button class="delete-button k-button">Delete record</button>
<script id="delete-confirmation" type="text/x-kendo-template">
    <p class="delete-message"> Enter anything </p>
    <input class="span12" id='enteredText'/><br/>
    <button class="delete-confirm k-button"> Yes</button>
    <a href="#" class="delete-cancel k-button">No</a>
</script> 
```

JavaScript：

```
$(document).ready(function () {
    var template = $("#delete-confirmation").html();
    // Create window once
    var kendoWindow = $("<div />").kendoWindow({
        title    : "Confirm",
        resizable: false,
        modal    : true,
        visable  : false
    }).html(template).data("kendoWindow");

    $(".delete-confirm", kendoWindow.element).click(function (e) {
        alert($('#enteredText').val());
        kendoWindow.close();
    });

    $(".delete-button").click(function (e) {
        $('#enteredText').val("");  // Clean previous value
        kendoWindow.open();
    });

    $(".delete-cancel").click(function () {
        kendoWindow.close();  // Cancel without showing
    });
}); 
```

看到它在[这里运行](http://jsfiddle.net/OnaBai/x79yp/4/)

# sql - SQL Server - 是传入参数数组中的值吗？

> ID：14322627
> 
> 赞同：0
> 
> 时间：2013-01-14T16:37:51.340
> 
> 标签：sql, sql-server, tsql, stored-procedures

我很想从 C# 中传入一个值列表并在我的存储过程中查询它。

这就是我所拥有的：

```
select   distinct FileStream_ID
FROM         dbo.vEmailSent
WHERE     
RequestType_ID in ( + '"' + @RequestTypeID +'"' + ) 
```

但我在带括号和不带括号的语法上遇到错误。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T16:41:29.087

您可能有一些语法错误。

首先，您的子句`and`开头有一个。`WHERE`改成：

```
WHERE     
RequestType_ID in ( + '"' + @RequestTypeID +'"' + ) 
```

* * *

其次，你有括号`+`的开头和结尾。`IN`这是无效的，应改为：

```
WHERE
RequestType_ID in ('"' + @RequestTypeID + '"') 
```

* * *

最后，你不应该有`'"'`. 如果你的参数`@RequestTypeID`是一个`int`类型，你应该`CAST()`是一个`varchar`类型，而不是用引号引起来：

```
WHERE
RequestType_ID in (CAST(@RequestTypeID as varchar(100)) 
```

我怀疑这不是你想要做的，这`@RequestTypeID`实际上是逗号分隔的整数。

在这种情况下，您不能像尝试那样使用它。如果`@RequestTypeID = '1,2,3'`，则 SQL 将返回记录 where `RequestType_ID = '1,2,3'`。因此 0 结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:41:08.180

你有一个`AND`直接在`WHERE`. 但即使你解决了这个问题，你也需要一个`Split`函数，然后这个工作：

```
WHERE
    ([RequestType_ID] IN
        (SELECT  Item
         FROM    dbo.Split(@RequestTypeID, ',') AS  Split)) 
```

这是表值函数的可能实现：

```
CREATE FUNCTION [dbo].[Split]
(
    @ItemList NVARCHAR(MAX), 
    @delimiter CHAR(1)
)
RETURNS @IDTable TABLE (Item VARCHAR(50))  
AS      

BEGIN    
    DECLARE @tempItemList NVARCHAR(MAX)
    SET @tempItemList = @ItemList

    DECLARE @i INT    
    DECLARE @Item NVARCHAR(4000)

    SET @tempItemList = REPLACE (@tempItemList, ' ', '')
    SET @i = CHARINDEX(@delimiter, @tempItemList)

    WHILE (LEN(@tempItemList) > 0)
    BEGIN
        IF @i = 0
            SET @Item = @tempItemList
        ELSE
            SET @Item = LEFT(@tempItemList, @i - 1)
        INSERT INTO @IDTable(Item) VALUES(@Item)
        IF @i = 0
            SET @tempItemList = ''
        ELSE
            SET @tempItemList = RIGHT(@tempItemList, LEN(@tempItemList) - @i)
        SET @i = CHARINDEX(@delimiter, @tempItemList)
    END 
    RETURN
END 
```

[SQL Server 2008 中使用表值参数的数组和列表](http://www.sommarskog.se/arrays-in-sql-2008.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:44:53.190

这不起作用，您需要使用表值参数（如果您使用的是 SQL Server 2008+）、动态 SQL、XML，使用函数或类似方法将字符串拆分为表。

MVP Erland Sommarskog 对每种方法的优缺点进行了出色的细分，性能数据如下：

[http://www.sommarskog.se/arrays-in-sql.html](http://www.sommarskog.se/arrays-in-sql.html)

# javascript - 正则表达式匹配除前两个字符之外的所有内容

> ID：14322628
> 
> 赞同：0
> 
> 时间：2013-01-14T16:37:58.003
> 
> 标签：javascript, regex

我需要一个匹配字符串前两个字符之后的所有内容的正则表达式。

例如（首先列出原始字符串，然后是我想要匹配的字符串）：

```
AZ0bc1234  > 0bc1234
50def123   > def123
!@hijk1234 > hijk1234 
```

重要的是位置，任何字符（带符号的字母数字）都可以包含在原始字符串中。

我尝试了很多事情，但我尝试的所有内容都至少匹配前两个字符中的一个。我最接近的是使用`\B.*`匹配除第一个字符之外的所有内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T16:40:13.800

如果您想要除前两个字符之外的所有字符，则可以尝试此操作（捕获到每行的末尾）：

```
".{2}(.*)$" 
```

您在第一组之后（在括号中）。或者不同：

```
"(?:.{2})(.*)$" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T16:42:23.437

您正在寻找一个[积极的向后看](http://www.regular-expressions.info/lookaround.html)。这将*只*匹配您请求的部分。

```
(?<=.{2})(.*)$ 
```

* * *

您已更新您的问题并写道您使用 JavaScript。JavaScript 不支持 Lookbehind。但是，我会将这个答案留给未来的搜索结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:44:07.650

以下将在[捕获组](http://www.regular-expressions.info/brackets.html)中保存匹配的字符串（由括号定义）：

```
^.{2}(.+) 
```

您应该能够将它与`$1`或`\1`取决于语言一起使用。

# javascript - javascript点击事件不适用于iOS中contenteditable div内的链接

> ID：14322635
> 
> 赞同：1
> 
> 时间：2013-01-14T16:38:20.880
> 
> 标签：javascript, jquery, ios6

HTML：

```
<div id="content" contenteditable="true">
Some text <a href="/">Link</a>
</div> 
```

Javascript：

```
$("#content").find('a').click(function(){
    alert('a clicked');
}); 
```

问题：没有调用警报。似乎没有调用点击事件

jsfiddle：http: [//jsfiddle.net/bFtbV/](http://jsfiddle.net/bFtbV/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:45:35.750

这里没有足够的信息，除非您没有覆盖链接的默认行为。如果此代码是这种情况，它应该可以工作：

```
$("#content").find('a').click(function(e){
    e.preventDefault();
    alert('a clicked');
    return false;
}); 
```

如果不：

*   问题出在其他地方，例如阻止脚本执行的 js 错误？你的浏览器控制台说什么？
*   链接是否可点击，清理脚本并放置 href 参考，一些地址并测试它。
*   您使用的框架可能有第三个选项已经覆盖了本机点击事件。

你在pc或mac上测试过吗？iOS 不是调试的最佳场所！使用 iOS6 就更难了，除非你有 Mac 和 Lion OS X。

测试并给我们反馈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:46:05.283

尝试直接在选择器中选择 a 标签：

```
$("#content a").click(function(){
    alert('a clicked');
}); 
```

# javascript - 使用 JavaScript 或 jQuery，如何将名称-值对字符串转换为对象？

> ID：14322639
> 
> 赞同：0
> 
> 时间：2013-01-14T16:38:29.487
> 
> 标签：javascript, jquery, string, object

我有一个存储为字符串的名称值对，我想将其转换为 jQuery 或 JavaScript 中的对象。这是那对的一个例子。

> {'auto':false, 'itemAWidth':20, 'itemBWidth':20, 'marginLeft':0, 'marginRight':0, 'maximumWidth':0, 'propW':5, 'propX':5, ' propY'：空，'propZ'：空}

这被存储为一个字符串。如何将其转换为正确的对象？我的一些不成功的尝试如下所示。

```
convertValuePairsToObject = function (pairs) {

  var outObject = {};
  var nodes = pairs.split(',');
  for (var node in nodes) {

  }

  //alert(pairs);
  //return jQuery.parseJSON('"' + pairs + '"');
  //      var outObject = {};
  //      //var nodes = pairs.split(','), dest = outObject;
  //      var  = pairs.split(',');
  //      return outObject;
} 
```

当我尝试使用 jQuery.parseJSON() 函数时，代码返回了一个非常长的字符串，以这样的开头。

> {'0':'{','1':''','2':'0','3':''','4':':','5':''',' 6':'{', '7':''', '8':',', '9':'', '10':''', '11':'1', '12': ''', '13':':', '14':''', '15':''', '16':''', '17':',', '18':'' , '19':''', '20':'2', '21':''', '22':':', '23':''', '24':'a', ' 25':''', '26':',', '27':'', '28':''', '29':'3', '30':''','31':':', '32':''', '33':'u', '34':''', '35':',', '36':'', '37' :''', '38':'4', '39':''', '40':':', '41':''', '42':'t', '43':' '', '44':',', '45':' ', '46':''', '47':'5', '48':''', '49':':', '50':''', '51':'o',41':''', '42':'t', '43':''', '44':',', '45':'', '46':''', '47': '5', '48':''', '49':':', '50':''', '51':'o',41':''', '42':'t', '43':''', '44':',', '45':'', '46':''', '47': '5', '48':''', '49':':', '50':''', '51':'o',

======================================

在 2013 年 1 月 4 日上午 10:51 以下编辑

======================================

所以我尝试了你们俩提供的建议，并得到了这个。

```
 convertObjectToString = function (obj) {
      return JSON.stringify(obj);
      //      var str = '';
      //      for (var p in obj) {
      //         if (obj.hasOwnProperty(p)) { str += "'" + p + "':" + formatValue(obj[p]) + ", "; }
      //      }
      //      if (str.length > 0) {
      //         str = String(str).substring(0, str.length - 2); // Trim trailing comma
      //         str = '{' + str + '}';
      //      }
      //      return str;
   }

   convertValuePairsToObject = function (pairs) {
      return jQuery.parseJSON('[' + pairs + ']');
   } 
```

但是现在当执行 convertValuePairsToObject 时，代码会在名称值对前面加上：

> {“0”：

如果我反复触发该函数，它将继续将上述内容预先添加到字符串中，如下所示：

> {"0":{"0":{"0":

我不需要索引标识符为零。我怎样才能消除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:50:46.917

您需要用双引号替换单引号：

```
var json = "{'auto':false, 'itemAWidth':20, 'itemBWidth':20, 'marginLeft':0, 'marginRight':0, 'maximumWidth':0, 'propW':5, 'propX':5, 'propY':null, 'propZ':null}".replace(/'/g, '"') 
```

然后，您可以使用`JSON.parse`：

```
JSON.parse(json) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:51:11.393

假设你的意思是你得到这样的字符串：

```
"{'auto':false, 'itemAWidth':20, 'itemBWidth':20, 'marginLeft':0, 'marginRight':0, 'maximumWidth':0, 'propW':5, 'propX':5, 'propY':null, 'propZ':null}" 
```

然后一种选择是`eval`像这样使用：

```
var pairs = "{'auto':false, 'itemAWidth':20, 'itemBWidth':20, 'marginLeft':0, 'marginRight':0, 'maximumWidth':0, 'propW':5, 'propX':5, 'propY':null, 'propZ':null}"

var foo = eval("(" + pairs + ")"); 
```

`foo`现在是实际对象而不是字符串。

执行`console.log(foo);`将导致调试器中的对象树不是字符串。

* * *

[**DEMO**](http://jsfiddle.net/Tw8s7/) - 从字符串中获取对象

* * *

或者，您可以将字符串中的对象转换为正确的 JSON 对象，然后使用`JSON.Parse`其他人提到的方法转换回对象。

# asp.net-mvc - 在控制器中包含相关数据

> ID：14322640
> 
> 赞同：0
> 
> 时间：2013-01-14T16:38:32.353
> 
> 标签：asp.net-mvc, entity-framework

我有一个显示报告的详细信息页面，我现在需要一个显示多个报告的索引页面。我已经成功地进行了设置（我可以选择用户页面上的复选框并在“打印页面”上显示一些信息，但我不知道如何显示相关信息。

我的详细信息包含这样的用户 ID -

```
 public ViewResult Details(string id)
        {
User user = db.Users
                .Include(i => i.UserDetails)
                .Include(i => i.TRS)
                .Include(i => i.Pension)
                .Include(i => i.LifeAssurance)
                .Include(i => i.IncomeProtection)
                .Where(i => i.UserName == id)
                .Single();

string pensionProviderName = providerRepository.GetProviderByID(user.Pension.PensionProviderID).ProviderName;

TRSViewModel viewModel = new TRSViewModel
            {
                UserName = user.UserName,
                FirstName = user.UserDetails.FirstName,
                LastName = user.UserDetails.LastName,
                Salary = user.UserDetails.Salary,
                PensionSchemeName = pensionSchemeName 
```

但在我的索引中我有

```
public ViewResult Index(FormCollection form)
        { 
          string[] UserIDs = form["TRSIDs"].Split(',');

var trs = db.Users
                .Include(t => t.UserDetails)
                .Include(t => t.TRS)
                .Include(t => t.Pension)
                .Where(g => UserIDs.Contains(g.UserName))
                .Select(user => new TRSViewModel
            {
                UserName = user.UserName,
                FirstName = user.UserDetails.FirstName,
                LastName = user.UserDetails.LastName,
                Salary = user.UserDetails.Salary 
```

但我不知道如何在视图模型中包含“PensionSchemeName”详细信息。我尝试直接使用 -

```
PensionSchemeName = db.SchemeNames.Find(user.Pension.PensionSchemeNameID).Name, 
```

但我得到了一个错误。有什么想法可以包括这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:51:37.590

您可以尝试手动加入用户和方案名称：

```
public ViewResult Index(FormCollection form)
{
    string[] UserIDs = form["TRSIDs"].Split(',');

    var trs = db.Users
        .Join(db.SchemeNames,
            user => user.Pension.PensionSchemeNameID,
            schemeName => schemeName.SchemeNameID,
            (user, schemeName) => new { User = user, SchemeName = schemeName })
        .Where(a => UserIDs.Contains(a.User.UserName))
        .Select(a => new TRSViewModel
        {
            UserName = a.User.UserName,
            FirstName = a.User.UserDetails.FirstName,
            LastName = a.User.UserDetails.LastName,
            Salary = a.User.UserDetails.Salary,
            PensionSchemeName = a.SchemeName.Name
        }
    //...
} 
```

我假设它`Pension`没有`PensionSchemeName`导航属性，否则它会更直接：

```
 var trs = db.Users
        .Where(u => UserIDs.Contains(u.UserName))
        .Select(u => new TRSViewModel
        {
            UserName = u.UserName,
            FirstName = u.UserDetails.FirstName,
            LastName = u.UserDetails.LastName,
            Salary = u.UserDetails.Salary,
            PensionSchemeName = u.Pension.PensionSchemeName.Name
        } 
```

（我已经删除了`Include`s。当您使用投影 ( `Select`) 时，它们无论如何都会被忽略。）

# python - 创建 App Engine 数据存储区实体

> ID：14322641
> 
> 赞同：1
> 
> 时间：2013-01-14T16:38:38.443
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在使用谷歌应用引擎，我正在尝试使用代码插入实体/表：

```
class Tu(db.Model):
    title = db.StringProperty(required=True)
    presentation = db.TextProperty(required=True)
    created = db.DateTimeProperty(auto_now_add=True)
    last_modified = db.DateTimeProperty(auto_now=True) 
```

. . .

```
a = Tu('teste', 'bla bla bla bla')
        a.votes = 5
        a.put() 
```

但我收到此错误：

```
TypeError: Expected Model type; received teste (is str) 
```

我正在关注此文档[https://developers.google.com/appengine/docs/python/datastore/entities](https://developers.google.com/appengine/docs/python/datastore/entities)，但我看不出我错在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:45:45.747

您链接到的所有文档都使用关键字参数：

```
a = Tu(title='tests', presentation='blablablah') 
```

如果使用位置参数，第一个参数被解释为父参数，它需要是 Model 或 Key 类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:46:50.900

当您以这种方式创建模型时，您需要为模型的所有属性使用关键字参数。这是来自 的`__init__`签名片段`db.Model`，您的`Tu`模型从该片段继承：

```
def __init__(self,
               parent=None,
               key_name=None,
               _app=None,
               _from_entity=False,
               **kwds):
    """Creates a new instance of this model.

    To create a new entity, you instantiate a model and then call put(),
    which saves the entity to the datastore:

       person = Person()
       person.name = 'Bret'
       person.put()

    You can initialize properties in the model in the constructor with keyword
    arguments:

       person = Person(name='Bret')

    # continues 
```

当您说 时`a = Tu('teste', 'bla bla bla bla')`，由于您没有提供关键字参数而是将它们作为位置参数传递，`teste`因此被分配给（和）中的`parent`参数，并且因为该参数需要一个类型的对象（我假设您没有'没有），你得到那个错误。假设您改为尝试将这些项目添加为and ，您会说（正如@DanielRoseman 已经简洁陈述的那样:)）：`__init__``bla bla bla bla``key_name``Model``title``presentation`

```
a = Tu(title='teste', presentation='bla bla bla bla') 
```

# java - 外部模拟方法在实际类中返回 Null

> ID：14322645
> 
> 赞同：1
> 
> 时间：2013-01-14T16:38:50.680
> 
> 标签：java, unit-testing, mockito, powermock

当我测试模拟的外部调用时，我没有看到报告的模拟值，而是`Null`我的测试失败了。我可以在测试类中看到（报告的）模拟值，但在`BusinessServiceImpl`类中没有，并且应用程序（方法返回）没有按我的预期进行修改。

**我的期望：**当我在 Impl 类中模拟 External 调用时，模拟值应该在那里可用，其余的一切都会发生，就好像调用了真正的方法来完成单元测试一样。

实现代码：

```
package com.core.business.service.dp.fulfillment;

import com.core.business.service.dp.payment.PaymentBusinessService;

public class BusinessServiceImpl implements BusinessService { // Actual Impl Class
    private PaymentBusinessService paymentBusinessService = PluginSystem.INSTANCE.getPluginInjector().getInstance(PaymentBusinessService.class);

    @Transactional( rollbackOn = Throwable.class)
    public Application  applicationValidation (final Deal deal) throws BasePersistenceException {
        Application application = (Application) ApplicationDTOFactory.eINSTANCE.createApplication();
        //External Call we want to Mock
        String report = paymentBusinessService.checkForCreditCardReport(deal.getId());
        if (report != null) {
            application.settingSomething(true); //report is Null and hence not reaching here
        }
        return application;
    }
} 
```

测试代码：

```
@Test(enabled = true)// Test Class
public void testReCalculatePrepaids() throws Exception {
    PaymentBusinessService paymentBusinessService = mock(PaymentBusinessService.class);
    //Mocking External Call
    when(paymentBusinessService.checkForCreditCardReport(this.deal.getId())).thenReturn(new String ("Decline by only Me"));
    String report = paymentBusinessService.checkForCreditCardReport(this.deal.getId());
    // Mocked value of report available here
    //Calling Impl Class whose one external call is mocked
    //Application is not modified as expected since report is Null in Impl class
    Application sc = BusinessService.applicationValidation(this.deal);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:37:55.460

Mockito 的主要目的是隔离测试。就像在测试时一样，`BusinessServiceImpl`你应该模拟它的所有依赖项。

这正是您在上面的示例中尝试做的事情。现在*要使模拟*工作，必须将模拟对象注入到您要测试的类中，在本例中为`BusinessServiceImpl`.

一种方法是通过类的构造函数传递依赖关系，[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。或者您可以看看如何使用[`Spring`and来完成`ReflectionTestUtils`。](http://forum.springsource.org/showthread.php?58444-Unit-testing-Autowire-and-Injecting-mock)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:23:03.067

我完成了它，我成功地获得了 Mocked 值，而根本不接触 BusinessServiceImpl 类。我遵循的步骤是： 1\. @Mock PaymentBusinessService paymentBusinessService = mock(PaymentBusinessService.class); 2\. @InjectMocks private PaymentBusinessService paymentBusinessService = PluginSystem.INSTANCE.getPluginInjector().getInstance(PaymentBusinessService.class);

然后简单地运行上面的测试，我可以在 BusinessServiceImpl 中看到报告的值“只有我拒绝”，我的测试用例通过了

# php - 正则表达式的错误 - 分组问题？

> ID：14322649
> 
> 赞同：1
> 
> 时间：2013-01-14T16:39:07.720
> 
> 标签：php, regex

我正在尝试使用正则表达式在我的应用程序路径中查找“系统”文件夹，并将其替换为“计数器”。但我的正则表达式模式对我不满意。代表我的应用程序路径的字符串称为 $counterslocation，它看起来像这样：

> “/var/www/myapp/系统”

最终，我想结束这个：

> /var/www/myapp/counters

首先，我使用 preg_match 来确保我的模式是正确的。然后我会尝试 preg_replace。我有以下正则表达式代码：

```
 $pattern='/(\/[0-9a-z]\/)*(myapp\/)(system)/i'; 

    if (preg_match($pattern,$counterslocation,$matches))  {
       var_dump($matches);
    } 
```

var_dump() 调用返回以下输出：

> 数组(4) { [0]=> 字符串(10) "myapp/system" [1]=> 字符串(0) "" [2]=> 字符串(4) "myapp/" [3]=> 字符串( 6）“系统”

我的问题是，如何让正则表达式也返回导致字符串“myapp”部分的所有内容？我想通过把它放在括号中，它会将它作为第一组捕获......但看起来我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:41:46.713

您没有量化目录名称，因此它与单个字母数字字符匹配的目录。你需要：

```
/(\/[0-9a-z]+\/)*(myapp\/)(system)/
            ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:44:21.843

在要提取的部分周围添加 () ，理想情况下还使用不同的分隔符，这样您就不必转义斜杠：

```
%((/([0-9a-z]+/)*)(myapp/))(system)% 
```

# javascript - 使用 jquery 在正文中创建 iframe

> ID：14322650
> 
> 赞同：1
> 
> 时间：2013-01-14T16:39:07.910
> 
> 标签：javascript, jquery, html

我面临一个小问题。我想在 div 标签内创建一个 iframe，该标签将位于我的 body 标签内。我尝试了以下 jQuery 代码：

```
$(document.createElement('<div id="modalDiv"><iframe id="modalIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title"></iframe></div>')); 
```

但我没有得到任何结果。另外，我将脚本放在正文标签中，但没有得到任何结果。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:40:46.833

假设您添加了 jQuery：

```
$(document).ready(function(){
    $('body').append('<div id="modalDiv"><iframe id="modalIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title"></iframe></div>');
}); 
```

这会将您的代码添加到正文 html 的末尾...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:42:37.217

`createElement`的参数必须是包含元素类型名称的字符串。您正在提供 HTML 片段。

由于您使用的是 jQuery，因此只需从该字符串构造一个 jQuery 对象。

```
jQuery('<div id="modalDiv"><iframe id="modalIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title"></iframe></div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:46:11.613

`document.createElement()`不支持从 HTML 字符串创建元素，但您可以将字符串传递给 jQuery 以构建内容，即：

```
var newContent = $('<div id="modalDiv"><iframe id="modalIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title"></iframe></div>');
newContent.appendTo("body"); 
```

确保将选择器更新为对您有意义的任何内容，这里它只是被添加到`body`元素中。

此外，如果 iframe 旨在实际指向资源，请务必同时设置`src`属性。

希望有帮助！干杯。

# php - 如何在每个用户触发事件后 12 小时启动 php 脚本

> ID：14322651
> 
> 赞同：1
> 
> 时间：2013-01-14T16:39:13.110
> 
> 标签：php

任何用户都可以根据需要多次触发事件。每次触发此事件时，都会在 mysql 表中创建一行，其中包含时间戳、用户 ID 和其他有用信息。我需要做的是启动一个脚本，该脚本在事件触发后恰好运行 12 小时，即针对表中的每一行。

我怎样才能以自动化和高效的方式实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:43:26.883

您可以使用每分钟启动脚本的 cron 作业。

在脚本中，您应该首先获取行并检查是否可以运行（如果 12 小时过去了）然后继续，否则停止。

我不知道这是否会非常有效，这取决于您在数据库中的条目数，但从技术上讲，仅检查当前日期是否与从数据库中获取的日期相匹配 + 12 小时并不昂贵，我不能说更多因为您没有提供有关数据的太多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:48:50.707

使用 cronjob 可能会更好

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

潜在地，您可以查看 MySQL 事件调度程序。虽然它可能不适合您的需求，但很难真正说出给出的细节

[http://dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

就像是

```
CREATE EVENT myTimedEvent ON SCHEDULE EVERY INTERVAL 5 minutes DO CALL updateRows(); 
```

updateRows 检查您的标准（12 小时前），如果是，请执行您想要执行的任何操作。这要求您的 MySQL 为@ 5.1+ 版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T17:49:04.130

对我来说最简单的方法是让页头包含

```
<head>
    <meta http-equiv="refresh" content="43200"> <!-- 43200 for (12 hours × 60 mintes × 60 seconds)  -->
</head> 
```

**这种方法对于避免服务器超时非常有帮助，如果您只使用 PHP 代码，您将无法避免这种情况**

**重要**的是，如果您使用提交按钮启动脚本，建议您将表单`action="other_page"`设置为不同的页面，并确保您应该使用[setcookie](http://www.w3schools.com/php/func_http_setcookie.asp)函数将输入值保存为 cookie，并在操作页面中使用`$cookieVar = $_COOKIE['the_cookie_name'] ;`

您可能需要增加或减少 $cookieVar 值并在每次您的头部代码`http-equiv`在特定秒数（在我们的示例中为 43200）后自动刷新时使用 setcookie 再次更新该值，具体取决于您要执行的操作

请注意，如果您在不按提交按钮的情况下自动启动操作，您可以在同一页面中执行操作。

我之前做过这个想法，我在一个文件夹中有 180,000 张图片，但服务器不允许我全部下载，因为它只显示前 7998 张图片，所以我创建了一个脚本，将每 1000 张图片压缩到一个文件之外的文件中images 文件夹，为了避免超时，我让代码每 60 秒刷新一次，最后我只有 180 个 zip 文件:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:45:14.023

您可能最好有一个每分钟运行一次的 cron 作业，并检查数据库中是否存在 > 12 小时前尚未处理脚本并处理它们的任何行。这不会给您带来 12 小时的差异，但会在一分钟内给您带来差异。

您可能还希望确保该脚本能够在几秒钟内运行，这样您就不会重叠同时运行两次的脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T16:47:44.683

这可以使用 CronJobs 来完成。如果您对您的服务器或提供 cronjob 管理的服务器管理工​​具包具有 root 访问权限，您将在您的服务器上执行此操作。否则使用在线 cronjob 服务（google for cronjob online）。

然后，cronjob 会在您定义的时间间隔（例如每分钟或每 5 分钟）在您的服务器上触发一个 php 脚本。

然后，此脚本从您的 mysql 表中选择所有早于 12 小时 ( `WHERE timestamp <= NOW() - INTERVAL 12 hour`) 的行，并对每个结果执行所需的操作并从表中删除结果（或将其标记为完成），

只需确保获取和操作本​​身比您的 cronjob 间隔更快，否则您将有两个或多个脚本在同一行上工作。

# css - 使用 CSS 的导航悬停效果

> ID：14322652
> 
> 赞同：0
> 
> 时间：2013-01-14T16:39:12.880
> 
> 标签：css, navigation, css-float, padding, margins

我试图用菜单项的背景来实现悬停效果，但是使用 css 我的东西似乎不合适。我尝试了许多不同的方法，但仍然无法弄清楚如何在悬停时让菜单项保持在原位，也不知道如何让文本贴在背景顶部的底部。

[http://youvisit.com/creative/FindYourFutureCampaign/html/](http://youvisit.com/creative/FindYourFutureCampaign/html/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:47:16.313

修复你的 CSS，它不会“跳转”：

```
ul.menuItems li:hover:before {
    background: url("../img/menuHoverLeft.png") no-repeat 50% 0%;
}
ul.menuItems li:hover:after {
    background: url("../img/menuHoverRight.png") no-repeat 50% 100%;
} 
```

并给予`height`正常`width`工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:08:50.660

问题是，通过添加左/右图像（带有圆角的图像），您正在更改`<li>`. 由于这些图像的高度为 19 像素，因此您需要将其高度设置`<li>`为 19 像素。您可以使用`line-height`和来做到这一点`height`。之后，您必须弄清楚如何垂直对齐`<a>`. 然后，您需要调整宽度的变化。您可以通过在 上使用左/右填充来执行此操作`<a>`，然后在悬停时删除该填充（删除的填充应等于左/右图像的宽度）。

这应该让你非常接近。我没有在 IE7/8 中测试这个。

```
ul.menuItems li {
    float: left;
    height: 19px;
    line-height: 19px;
    margin-right: 20px;
}
ul.menuItems li a {
    color: #000000;
    display: block;
    float: left;
    height: 19px;
    line-height: 19px;
    padding: 0 2px;
    text-decoration: none;
}
ul.menuItems li:hover a {
    background: url("../img/menuHoverCenter.png") repeat-x 0 0;
    padding: 0;
}
ul.menuItems li:hover:before {
    content: url("../img/menuHoverLeft.png");
    float: left;
}
ul.menuItems li:hover:after {
    content: url("../img/menuHoverRight.png");
    float: right;
} 
```

真的，这是一个糟糕的设计。您可能不需要在悬停时添加内容。如何使用 CSS3`border-radius`来获得圆角。然后使用其中一个`linear-gradient`或背景图像作为背景。`border-radius`并非所有浏览器都支持，但如果您不担心 IE8 及更低版本，它的支持相当不错：http: [//caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)

# c# - 使用反射来确定哪些字段是属性的支持字段

> ID：14322660
> 
> 赞同：12
> 
> 时间：2013-01-14T16:39:30.670
> 
> 标签：c#, reflection, properties, field, memory-consumption

我正在使用反射来映射对象。这些对象在托管代码中，但除了通过反射之外，我无法看到它们的源代码、底层结构等。所有这一切的首要目标是对象的基本内存映射（在功能上类似于 SOS.dll`DumpObject`和`!ObjSize`命令）。因此，我试图确定哪些成员被“双重计算”为字段和属性。

例如：

```
public class CalendarEntry
{
    // private property 
    private DateTime date { get; set;}

    // public field 
    public string day = "DAY";
} 
```

映射时显示：

*   字段
    *   天
    *   k__BackingField
*   特性
    *   日期

像这样的班级：

```
public class CalendarEntry
{
    // private field 
    private DateTime date;

    // public field 
    public string day = "DAY";

    // Public property exposes date field safely. 
    public DateTime Date
    {
        get
        {
            return date;
        }
        set
        {
                date = value;
        }
    }
} 
```

映射时显示：

*   字段
    *   天
    *   日期
*   特性
    *   日期

乍一看，没有什么可以告诉您该`Date`属性的“支持字段”是名为 的字段`date`。在这种情况下，我试图避免两次计算日期，因为这会给我一个糟糕的内存大小近似值。

更令人困惑/复杂的是，我遇到了属性并不总是具有将通过该`Type.GetFields()`方法列出的相应字段的情况，因此我不能完全忽略所有属性。

关于如何确定从返回的集合中的字段`Type.GetFields()`是否本质上是从返回的某些相应属性的支持字段的任何想法`Type.GetProperties()`？

编辑-我无法确定属性在从返回的集合中没有列出的相应字段的条件`Type.GetFields()`。有人熟悉这种情况吗？

编辑 2- 我找到了一个很好的例子，说明属性的支持字段何时不会包含在从`Type.GetFields()`. 在查看 String 的引擎盖时，您有以下内容：

*   对象包含名为 FirstChar 的属性
*   对象包含名为 Chars 的属性
*   对象包含名为 Length 的属性
*   对象包含名为 m_stringLength 的字段
*   对象包含名为 m_firstChar 的字段
*   对象包含名为 Empty 的字段
*   对象包含名为 TrimHead 的字段
*   对象包含名为 TrimTail 的字段
*   对象包含名为 TrimBoth 的字段
*   对象包含名为 charPtrAlignConst 的字段
*   对象包含名为 alignConst 的字段

`m_firstChar`和`m_stringLength`是属性的支持字段，但`FirstChar`字符串`Length`的实际内容保存在字符属性中。这是一个索引属性，可以对其进行索引以返回字符串中的所有字符，但我找不到保存字符串字符的相应字段。关于为什么会这样的任何想法？或者如何获取索引属性的支持字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:50:47.513

属性的支持字段的名称是编译器实现的细节，并且将来总是可以更改，即使您弄清楚了模式。

我认为您已经回答了您的问题：*忽略所有属性*。

请记住，属性只是变相的一两个函数。只有在源代码特别请求时，属性才会有编译器生成的支持字段。例如，在 C# 中：

```
public string Foo { get; set; } 
```

但是类的创建者不需要像这样使用编译器生成的属性。例如，一个属性可能会获取一个常量值，多个属性可能会获取/设置位字段的不同部分，等等。在这些情况下，您不会期望看到每个属性都有一个支持字段。忽略这些属性很好。您的代码不会遗漏任何实际数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T16:50:50.613

您*可以*完全忽略所有属性。如果一个属性没有支持字段，那么它根本不会消耗任何内存。

此外，除非您愿意（尝试）解析 CIL，否则您将无法获得此类映射。考虑这段代码：

```
private DateTime today;

public DateTime CurrentDay
{
    get { return today; }
} 
```

您希望如何确定`today`字段和`CurrentDay`属性之间存在某种关系？

**编辑：**关于您最近的问题：

如果您的属性包含类似 的代码`return 2.6;`，则该值不会保存在任何地方，该常量直接嵌​​入在代码中。

关于`string`:`string`由 CLR 以特殊方式处理。如果您尝试反编译它的索引器，您会注意到它是由 CLR 实现的。对于这几个特殊类型（`string`、数组、`int`...），您无法通过查看它们的字段来找到它们的大小。对于所有其他类型，您可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:57:36.603

回答您的另一个问题：在什么情况下属性没有支持字段？

```
public DateTime CurrentDay
{
    get { return DateTime.Now; }
} 
```

或属性可以使用任何其他数量的支持字段/类

```
public string FullName 
{
    get {return firstName + " " + lastName;}
} 
```

# c++ - windows 中 c、c++ 的 eclipse juno 问题

> ID：14322665
> 
> 赞同：0
> 
> 时间：2013-01-14T16:39:49.773
> 
> 标签：c++, c, eclipse, mingw, eclipse-juno

我正在使用 MinGW 在 windows 的 eclipse juno 中运行 c 程序。我的程序大部分时间都运行良好。但有时即使我在项目中没有任何错误，我也会收到一条错误消息，说“项目中有错误，你想继续吗”。当我重新启动 eclipse 并清理并构建项目时，问题得到解决。

我该如何解决这个问题。请帮忙

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:18:24.273

确保您拥有...

*   没有遗漏包括
*   设置适当的 C/C++ 标准（如果需要）
*   当前的 Eclipse 版本（也许你的不支持当前的 C/C++ 标准）
*   错误/警告视图中没有标记
*   输出目录中没有旧的编译文件（使用`clean`命令）

# c# - PredicateBuilder 返回零记录

> ID：14322669
> 
> 赞同：4
> 
> 时间：2013-01-14T16:39:59.790
> 
> 标签：c#, linq, where, predicate, predicatebuilder

我正在使用 PredicateBuilder 创建一个动态 Where 子句来从 DataTable 中查询数据。我有一个字典，其中包含我需要搜索的列名和值。我只是在字典上进行迭代，如果键与列名匹配，则将该键和值添加到谓词中。在对数据表运行实际查询之前，一切似乎都正常，我得到零记录:(但是如果我用 p => p["Year"] == "2010" 之类的东西替换动态谓词，我得到记录回来。这是代码：

```
var objectList = table.AsEnumerable();
Func<DataRow, bool> predicate = GetPredicate(parms, table.Columns);

var list1 = objectList.Where(predicate).ToList();

private static Func<DataRow, bool> GetPredicate(Dictionary <string, string> parms, DataColumnCollection dataColumnCollection)
    {
        var predicate = PredicateBuilder.False<DataRow>();
        foreach (var parm in parms)
        {
            if (dataColumnCollection.Contains(parm.Key))
            {
                var copy = parm;
                predicate = predicate.And(p => p[copy.Key] == copy.Value);
            }
        }
        return predicate.Compile();
    } 
```

任何帮助将不胜感激：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T16:45:25.060

您从子句开始，`false`然后添加`and`子句。

`false && ...`总是返回`false`，所以你的`Where`子句永远不会匹配任何东西。

尝试从：

```
var predicate = PredicateBuilder.True<DataRow>(); 
```

* * *

还：

您正在关闭一个循环变量，这意味着您的所有谓词都将使用最后一个`parm`in `parms`。

您可以通过在循环中创建本地副本来解决此问题：

```
foreach( var parm in parms )
{
  if (dataColumnCollection.Contains(parm.Key))
  {
    var copy = parm;
    predicate = predicate.And( p => p[ copy.Key ] == copy.Value );
  } 
```

* * *

**更新：**

`DataRow[ key ]`是 类型`object`，所以在 中`p[ copy.Key ] == copy.Value`，相等运算符是对象引用相等，而不是字符串相等。

您可以通过指定来解决此问题`String.Equals`：

```
predicate = predicate.And( p => String.Equals( p[ copy.Key ], copy.Value ) ); 
```

有趣的是，这个例子表明你可以有多个`string`具有相同内容的实例。

# c++ - h264 ffmpeg：如何初始化 ffmpeg 以解码使用 x264 创建的 NAL

> ID：14322670
> 
> 赞同：0
> 
> 时间：2013-01-14T16:40:03.750
> 
> 标签：c++, ffmpeg, decode, h.264, x264

我已经使用 x264 编码了一些帧，使用 x264_encoder_encode，之后我使用如下函数创建了 AVPackets：

```
bool PacketizeNals( uint8_t* a_pNalBuffer, int a_nNalBufferSize, AVPacket* a_pPacket )
{
    if ( !a_pPacket )
return false;
    a_pPacket->data = a_pNalBuffer;
    a_pPacket->size = a_nNalBufferSize;
    a_pPacket->stream_index = 0;
    a_pPacket->flags = AV_PKT_FLAG_KEY;

    a_pPacket->pts = int64_t(0x8000000000000000);
    a_pPacket->dts = int64_t(0x8000000000000000);
} 
```

我这样称呼这个函数：

```
x264_nal_t* nals;
int num_nals = encode_frame(pic, &nals);
for (int i = 0; i < num_nals; i++)
{
    AVPacket* pPacket = ( AVPacket* )av_malloc( sizeof( AVPacket ) );
    av_init_packet( pPacket );
    if ( PacketizeNals( nals[i].p_payload, nals[i].i_payload, pPacket ) )
    {
        packets.push_back( pPacket );
    }
} 
```

现在我想做的是使用 avcodec_decode_video2 解码这些 AVPackets。我认为问题在于我没有正确初始化解码器，因为编码我使用了“超快”配置文件和“零延迟”调谐（ x264 ）并且解码我不知道如何指定 ffmpeg 这些选项。在一些示例中，我读过人们使用存储视频的文件初始化解码器，但在这种情况下，我直接使用了 AVPackets。我正在尝试解码的是：

```
avcodec_init();  
avcodec_register_all();  
AVCodec* pCodec;  
pCodec=avcodec_find_decoder(CODEC_ID_H264);  
AVCodecContext* pCodecContext;  
pCodecContext=avcodec_alloc_context();  
avcodec_open(pCodecContext,pCodec);  
pCodecContext->width = 320;
pCodecContext->height = 200;
pCodecContext->extradata = NULL;
unsigned int nNumPackets = packets.size();
int frameFinished = 0;
for ( auto it = packets.begin(); it != packets.end(); it++ )
{
    AVFrame* pFrame;
    pFrame = avcodec_alloc_frame();
    AVPacket* pPacket = *it;
    int iReturn = avcodec_decode_video2( pCodecContext, pFrame, &frameFinished, pPacket );
} 
```

但在 iReturn 中始终为 -1。

谁能帮我？对不起，如果我在这方面的知识很低，我是新手。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-01T12:44:11.163

我编写了一个简单的客户端/服务器应用程序，它使用 lib x264 进行编码和 ffmpeg 进行解码来流式传输原始 RGB 视频。你可以在这里找到代码：[https ://github.com/filippobrizzi/raw_rgb_straming](https://github.com/filippobrizzi/raw_rgb_straming)

它展示了如何设置 x264 和 ffmpeg 进行编码/解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-14T17:23:42.133

现在你像这样初始化解码器

> pCodecContext->额外数据=空；

这是不正确的。您需要为此字段分配内存并将数据从编码器的 AVCodecContext::extradata 复制到分配的缓冲区中。AVCodecContext::extradata_size 指定此额外数据缓冲区的大小（以字节为单位）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T10:46:09.883

Make sure that you are building correct packets. See how this is done in the ffmpeg: [http://ffmpeg.org/doxygen/trunk/libx264_8c_source.html](http://ffmpeg.org/doxygen/trunk/libx264_8c_source.html) (`static int encode_nals(AVCodecContext *ctx, AVPacket *pkt, x264_nal_t *nals, int nnal)` and `static int X264_frame(AVCodecContext *ctx, AVPacket *pkt, const AVFrame *frame, int *got_packet)`)

# google-app-engine - Google App Engine 仅注销应用程序，而不是整个 google 帐户

> ID：14322674
> 
> 赞同：5
> 
> 时间：2013-01-14T16:40:12.060
> 
> 标签：google-app-engine, authentication, go

我用用户 api 创建了一个注销 url：[https ://developers.google.com/appengine/docs/go/users/overview](https://developers.google.com/appengine/docs/go/users/overview)

但我只希望它断开它们与我的应用程序的连接，而不是将它们从其他 Google 服务（Gmail 等）中注销。那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T16:44:36.987

您不能直接使用用户 API 执行此操作，但请参阅[此问题](https://stackoverflow.com/questions/14177469/signing-out-appengine-app-without-signing-out-from-google-com/14178401#14178401)以获取替代选项：

> 您可以手动删除已设置的 AppEngine 特定 cookie，而不是使用 UserService API 注销。查看这篇博客文章，讨论如何做到这一点（用 Python 编写，但您应该能够为 Java 修改它）。这应该有效地将用户从您自己的应用程序中注销，而不是从其他 Google 服务中注销（尽管我自己没有对此进行测试）。
> 
> 更健壮的方法是创建您自己的 User 类并管理您自己的会话 cookie，同时包装 UserService API。与非常易于使用的 UserService API 相比，这种方法的缺点是设置它需要额外的工作。但是，维护自己的用户的好处是，您将能够使用除 Google 之外的其他身份验证方法（例如，现在您也可以使用 Facebook 登录，如果您选择设置，甚至可以使用本机登录向上）。

# build - 部署源代码以外的文件

> ID：14322685
> 
> 赞同：1
> 
> 时间：2013-01-14T16:40:45.543
> 
> 标签：build, release

我开始为我们的发布过程准备路线图。我们目前正在使用 tortoise svn 和 ant 构建源。我正在考虑实施持续集成，并想知道以下选择的正确方向：

首先，目前的过程是这样的，开发人员将处理一个文件，将该文件直接提交到 repo。其他人会运行 tortoise update 命令来获取所需的更改。在构建服务器上遵循相同的过程，其中将更新源代码、构建然后部署到 qa 和生产服务器。然而，这个过程缺乏对 repo 的控制，因为在更新期间，如果两个开发人员处理同一个文件修复两个不同的问题，也会提取不需要的代码。一个被 qa 批准，另一个被拒绝。我该如何克服这种情况。

其次，除了源代码之外，我们还有很多其他文件，例如 xml 文件、css、js 等。如何自动部署这些文件？我已经在本地机器上配置了 Cruisecontrol，它在执行构建时工作正常，但现在确定如何处理其他文件，因为在生产中更新这些文件似乎有风险且容易出错。这方面的任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:54:01.820

您可以尝试将[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)与 CruiseControl 集成，我们的团队让 CC 启动构建过程，然后 PowerShell 将生成的项目文件（代码和其他文件）复制到生产或测试站点或任何地方。

我建议解决缺少存储库控制的问题，即从主干创建候选分支并将其指定为集成代码。一旦确定并提交或提取了必要的更改，将其提升到回归以进行进一步测试。然后，一旦测试成功，就将其推广到生产环境。

在这个过程中，您的开发人员不会直接提交到生产，而是通过一个迭代过程产生一个新的生产存储库，然后可以将其更改重新集成到 Trunk 中，以便该过程可以为下一个版本重新开始。

# gnome - 在 Gnome 中，dbus-monitor 上的什么信号表明用户正在注销？

> ID：14322688
> 
> 赞同：5
> 
> 时间：2013-01-14T16:41:00.583
> 
> 标签：gnome, dbus

我想编写一个在后台运行并检测用户何时注销的脚本。我在 dbus-monitor 上找不到文档。我能做的最好的事情是我看到一连串的`EndSessionQuery`, `EndSession`，`EndSessionResponse`但是这些都带有布尔值，所以它们不能完全被信任（也许一个程序说它不希望用户注销？）除此之外, 如果没有程序打开怎么办？这太不靠谱了。

我想要的是监听用户注销时总会发生的信号。有人可以提供那个信号吗？目前我正在运行这个命令：

```
dbus-monitor --session \
    "type='signal',interface='org.gnome.ScreenSaver',member='ActiveChanged'" | \
        myprog 
```

它捕获屏幕保护程序事件。但我也想赶上注销。我希望是这样的：

```
dbus-monitor --session \
    "type='signal',interface='org.gnome.Session',member='LogoutSuccess'" \
    "type='signal',interface='org.gnome.ScreenSaver',member='ActiveChanged'" | \
        myprog 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:40:21.167

在此处查找名为 org.gnome.SessionManager.* 的文件：[http ://git.gnome.org/browse/gnome-session/tree/gnome-session](http://git.gnome.org/browse/gnome-session/tree/gnome-session)

org.gnome.SessionManager 接口中有一个 SessionOver 信号，这可能是您需要的。

您是在寻找来自会话管理器的正常“会话即将结束、退出或提出提示或其他内容”请求，还是“会话现在真正结束，再见”信号？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T19:33:48.887

这是一个旧线程，但我正在添加一些信息以防其他人需要它。

我有同样的需求，但最终实现了一个 Session Manager DBus 客户端作为一个易于使用的脚本。它在注销时执行用户定义的脚本。准备使用的应用程序在 GitHub 上共享。

[Gnome EndSession DBus 客户端](https://github.com/backloop/gendsession)

# java - 使用 powershell 的参数运行 java.exe

> ID：14322692
> 
> 赞同：0
> 
> 时间：2013-01-14T16:41:08.213
> 
> 标签：java, powershell, arguments, wlst

我正在尝试从 powershell 调用 wlst/jython/python

使用 setWLSEnv.cmd 设置类路径未在正确的会话中设置？所以我试图将 -cp 设置为参数

```
& C:\bea\tpc\weblogic1033\server\bin\setWLSEnv.cmd; 
$cp='C:\bea\tpc\WEBLOG~1\server\lib\weblogic.jar'
$wlst='weblogic.WLST'
$script='C:\domains\tpc\Domain\bin\status.py'
$java="C:\PROGRA~1\Java\JROCKI~1.0\bin\java"
& "$java $cp $wlst $script"
#or
. "`"$java`" -cp `"$cp`" $wlst `"$script`""
#or
& "`"$java`" -cp `"$cp`" $wlst `"$script`"" 
```

我试图以各种方式引用命令字符串但没有成功

术语 '"C:\PROGRA~1\Java\JROCKI~1.0\bin\java" -cp "C:\bea\tpc\WEBLOG~1\server\lib\weblogic.jar" weblogic.WLST "C:\ domain\tpc\SasTT pcDomain\bin\status.py"' 未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 C:_WORK_\SAS\statusAll.ps1:15 char:2 + 。<<<< " `"$java`" -cp `"$cp`" $wlst `"$script`"" + CategoryInfo : ObjectNotFound: ("C:\PROGRA~1\Ja...\bin\status.py":String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:53:27.243

当您使用 call operator`&`时，下一个标记必须是命令的名称，而不是其他任何东西。所以代替这个：

```
& "$java $cp $wlst $script" 
```

试试这个：

```
& $java $cp $wlst $script 
```

有时与本地 exe 争论会变得很丑陋。如果您的任何参数来自用户输入，则通常有效但不安全的技术是：

```
Invoke-Expression "$java $cp $wlst $script" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:23:44.630

除了如何将命令格式化为字符串的麻烦之外，还有`setWLSEnv.cmd`一个 Windows 命令提示符脚本。PowerShell 无法执行此文件；它不知道如何解释它，就像记事本不知道如何解释 docx 文件一样。Windows 将 .cmd 文件与命令提示符相关联，因此您的第一行相当于

```
& cmd.exe /c C:\bea\tpc\weblogic1033\server\bin\setWLSEnv.cmd 
```

（请注意，分号是不必要的，因为您在同一行上没有任何其他命令。）

这将使用 cmd.exe 创建一个新进程。这个新进程执行批处理文件，设置您期望的环境变量，然后进程退出，丢弃环境更改。

如果您需要`setWLSEnv.cmd`在执行程序之前设置环境变量，您应该编写一个调用它的批处理文件而不是 PowerShell 脚本。否则，您将需要找到或编写等效的 PowerShell 来设置您的环境。

# jquery - jquery 全局变量与本地变量

> ID：14322694
> 
> 赞同：2
> 
> 时间：2013-01-14T16:41:17.957
> 
> 标签：jquery

试图自学 jquery。以下代码片段可以正常工作，但我认为可以使代码更短/更高效。

```
 //Alter the stylesheet to hide the contents of the page initially. 
  //When the page is loaded, fade in the contents slowly.
  var backgroundBuffer;
  $('p').mouseover(function() {
      backgroundBuffer = $(this).css("background-color");
      $(this).css({"background-color": 'yellow'});
    }).mouseout(function(){
      $(this).css({"background-color": backgroundBuffer});
  }); 
```

我不想全局声明“backgroundBuffer”，因为我再也不会使用它了。但是，如果我在 .mouseover() 中声明它，系统在后面的 .mouseout() 中将无法识别它

```
 //Alter the stylesheet to hide the contents of the page initially. 
  //When the page is loaded, fade in the contents slowly.
  $('p').mouseover(function() {
      var backgroundBuffer; 
      backgroundBuffer = $(this).css("background-color");
      $(this).css({"background-color": 'yellow'});
    }).mouseout(function(){
      $(this).css({"background-color": backgroundBuffer});
  }); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:47:21.337

使用jQuery数据存储初始值...

```
$('p').mouseover(function() {
  $(this).data('oldcolor', $(this).css("background-color")).css('background-color', 'yellow');
}).mouseout(function(){
  $(this).css("background-color",$(this).data('oldcolor'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:48:22.550

在这种情况下，jQuery 数据方法会很有帮助。这样您就可以从 jQuery 对象访问该变量。

```
 //Alter the stylesheet to hide the contents of the page initially. 
  //When the page is loaded, fade in the contents slowly.
  $('p').mouseover(function() {
      var $this = $(this);
      $this.data('backgroundbuffer', $this.css("background-color")).css({"background-color": 'yellow'});
    }).mouseout(function(){
      var $this = $(this);
      $this.css({"background-color": $this.data('backgroundbuffer')});
  }); 
```

# google-maps-api-3 - 谷歌地图 API 自动完成：仅输出城市

> ID：14322702
> 
> 赞同：0
> 
> 时间：2013-01-14T16:41:40.053
> 
> 标签：google-maps-api-3, autocomplete

有没有办法在谷歌地图 api 自动完成字段中只显示城市？

目前我们正在使用地理编码，但不幸的是，我们甚至收到了国家和地址。

我们甚至尝试了以下代码

```
var input = document.getElementById('txt_city_and');
var options = {
  types: ['(cities)']
}; 
```

自动完成 = 新的 google.maps.places.Autocomplete（输入，选项）；

我们收到的错误是

未捕获的类型错误：无法读取未定义的属性“自动完成”

- 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-24T05:34:57.723

请确保将 `<script type="text/javascript" src="maps.google.com/maps/api/...` 其放在使用它的代码的脚本之前

# android - Android Activity 中的不确定进度

> ID：14322704
> 
> 赞同：6
> 
> 时间：2013-01-14T16:41:44.047
> 
> 标签：android, android-layout

我正在尝试复制您在 ICS 中卸载应用程序时发现的体验。特别是标题栏下的不确定进度指示器。我尝试过使用`requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS)`各种方法，`Activity`但无济于事。相反，它会在屏幕/标题栏的右上角显示一个旋转的进度条。我在这里错过了一些简单的东西吗？或者这完全是定制的？

这是我正在使用的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    super.onCreate(savedInstanceState);

    setProgressBarIndeterminate(true);
    setProgressBarIndeterminateVisibility(true);
} 
```

![卸载截图](../Images/d7664402485cbaa8a8ff2974616dbadf.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T19:05:31.457

您正在使用`ActionBar`不确定的进度条，但您正在寻找[`ProgressBar`](http://developer.android.com/reference/android/widget/ProgressBar.html)视图。

您可以以`View`编程方式创建或将其添加到布局文件中，例如 --

```
<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:indeterminate="true" /> 
```

通常，您可以通过调用 show 来决定何时`.setVisibility(View.VISIBLE)`显示以及`.setVisibility(View.GONE)`何时完成。

如果您的最低 API 为 11 并将您的活动或应用程序主题设置为`@android:style/Theme.Holo`您将获得`ProgressBar`图像中显示的内容。

如果您想在 API 11 之前的设备上获得类似的效果，请查看[HoloEverywhere](https://github.com/Prototik/HoloEverywhere)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-23T18:52:31.643

*免责声明：@iagreen 的答案仍然是正确的——要获得类似于卸载活动中的布局，最好的选择是在布局中使用它，而不是依赖窗口*功能）

但是您在 Windows 功能方面走在了正确的轨道上，您只是将其中两个混合在一起。

看，这个：

```
setProgressBarIndeterminate(true); 
```

请求窗口的*[水平] 进度条*不确定。还有这个：

```
setProgressBarIndeterminateVisibility(true); 
```

显示窗口的*不确定进度条*——事实上，这是一个完全不同的视图。

为了进一步澄清事情，这将为您提供一个显示在窗口顶部的**水平不确定进度条**

```
requestWindowFeature(Window.FEATURE_PROGRESS);
setProgressBarIndeterminate(true);
setProgressBarVisibility(true); 
```

这会在操作栏中为您提供一个微调**器样式的进度条**

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
setProgressBarIndeterminateVisibility(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:42:52.933

那是图片中的水平进度条，Action Bar 不确定进度条是 Spinner 样式。您要么需要为操作栏创建自定义视图，要么将其作为视图放在主布局中。您可以隐藏操作栏并为特定活动制作自定义标题。只需使用 Spinner 风格的不确定进度条，这是每个人都希望在 Action Bar 中看到的。

# c - 如何计算 2 个图像中相同元素之间的像素距离

> ID：14322707
> 
> 赞同：0
> 
> 时间：2013-01-14T16:41:49.273
> 
> 标签：c, opencv

我想用 C 编写一个程序来确定两个图像之间相同元素之间的距离，并在两个镜头之间进行平移（通过立体镜测量距离）。

我正在使用逐像素计算的两个图像之间的估计“距离”来计算这个距离。但是，这真的很慢。

我听说有一种方法可以使用称为互相关和 FFT 的方法更快地完成它。但我在网上找不到任何代码或有关它的信息。

你有一些信息吗？

谢谢 ！

PS：我使用 OpenCV 加载和处理图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:53:34.363

您本质上是在谈论[*图像配准*](http://en.wikipedia.org/wiki/Image_registration)。有很多算法可以解决这个问题，但你提到的可能是[*相位相关*](http://en.wikipedia.org/wiki/Phase_correlation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:12:07.127

感谢您的回答，我设法编写了一个几乎可以工作的代码。

```
struct Peak Find_FFT(IplImage* src, IplImage* tpl, int hamming)
{
    int i, j, k;
    double tmp; //To store the modulus temporarily

    //src and tpl must be the same size
    assert(src->width == tpl->width);
    assert(src->height == tpl->height);

    // Get image properties
    int width    = src->width;
    int height   = src->height;
    int step     = src->widthStep;
    int fft_size = width * height;

    //fftw_init_threads(); //Initialize FFTW for multithreading with a max number of 4 threads
    //fftw_plan_with_nthreads(4);

    //Allocate arrays for FFT of src and tpl
    fftw_complex *src_spatial = ( fftw_complex* )fftw_malloc( sizeof( fftw_complex ) * width * height );
    fftw_complex *src_freq = ( fftw_complex* )fftw_malloc( sizeof( fftw_complex ) * width * height );
    fftw_complex *tpl_spatial = ( fftw_complex* )fftw_malloc( sizeof( fftw_complex ) * width * height );
    fftw_complex *tpl_freq = ( fftw_complex* )fftw_malloc( sizeof( fftw_complex ) * width * height );

    fftw_complex *res_spatial = ( fftw_complex* )fftw_malloc( sizeof( fftw_complex ) * width * height ); //Result = Cross correlation
    fftw_complex *res_freq = ( fftw_complex* )fftw_malloc( sizeof( fftw_complex ) * width * height );

    // Setup pointers to images
    uchar *src_data = (uchar*) src->imageData;
    uchar *tpl_data = (uchar*) tpl->imageData;

    // Fill the structure that will be used by fftw
    for(i = 0; i < height; i++)
    {
        for(j = 0 ; j < width ; j++, k++)
        {
            src_spatial[k][0] = (double) src_data[i * step + j];
            src_spatial[k][1] =  0.0;

            tpl_spatial[k][0] = (double) tpl_data[i * step + j];
            tpl_spatial[k][1] =  0.0;
        }
    }

    // Hamming window to improve FFT (but slightly slower to compute)
    if(hamming == 1)
    {
        double omega = 2.0*M_PI/(fft_size-1);
        double A= 0.54;
        double B= 0.46;
        for(i=0,k=0;i<height;i++)
        {
            for(j=0;j<width;j++,k++)
            {
                src_spatial[k][0]= (src_spatial[k][0])*(A-B*cos(omega*k));
                tpl_spatial[k][0]= (tpl_spatial[k][0])*(A-B*cos(omega*k));
            }
        }
    }

    // Setup FFTW plans
    fftw_plan plan_src = fftw_plan_dft_2d(height, width, src_spatial, src_freq, FFTW_FORWARD, FFTW_ESTIMATE);
    fftw_plan plan_tpl = fftw_plan_dft_2d(height, width, tpl_spatial, tpl_freq, FFTW_FORWARD, FFTW_ESTIMATE);
    fftw_plan plan_res = fftw_plan_dft_2d(height, width, res_freq,  res_spatial,  FFTW_BACKWARD, FFTW_ESTIMATE);

    // Execute the FFT of the images
    fftw_execute(plan_src);
    fftw_execute(plan_tpl);

    // Compute the cross-correlation
    for(i = 0; i < fft_size ; i++ )
    {
        res_freq[i][0] = tpl_freq[i][0] * src_freq[i][0] + tpl_freq[i][1] * src_freq[i][1];
        res_freq[i][1] = tpl_freq[i][0] * src_freq[i][1] - tpl_freq[i][1] * src_freq[i][0];

        tmp = sqrt(pow(res_freq[i][0], 2.0) + pow(res_freq[i][1], 2.0));

        res_freq[i][0] /= tmp;
        res_freq[i][1] /= tmp;
    }

    // Get the phase correlation array = compute inverse fft
    fftw_execute(plan_res);

    // Find the peak
    struct Peak pk; 
    IplImage* peak_find = cvCreateImage(cvSize(tpl->width,tpl->height ), IPL_DEPTH_64F, 1);
    double  *peak_find_data = (double*) peak_find->imageData;

    for( i = 0 ; i < fft_size ; i++ )
    {
        peak_find_data[i] = res_spatial[i][0] / (double) fft_size;
    }

    CvPoint minloc, maxloc;
    double  minval, maxval;

    cvMinMaxLoc(peak_find, &minval, &maxval, &minloc, &maxloc, 0);

    pk.pt = maxloc;
    pk.maxval = maxval;

    // Clear memory
    fftw_destroy_plan(plan_src);
    fftw_destroy_plan(plan_tpl);
    fftw_destroy_plan(plan_res);
    fftw_free(src_spatial);
    fftw_free(tpl_spatial);
    fftw_free(src_freq);
    fftw_free(tpl_freq);
    fftw_free(res_spatial);
    fftw_free(res_freq);
    cvReleaseImage(&peak_find);

    //fftw_cleanup_threads(); //Cleanup everything else related to FFTW

    return pk;
} 
```

问题是`fftw_free(src_freq);`它返回了一个错误（无效的指针），我就是找不到原因......

谢谢

# javascript - 什么是自执行匿名函数或这段代码在做什么？

> ID：14322708
> 
> 赞同：6
> 
> 时间：2013-01-14T16:41:53.627
> 
> 标签：javascript, function, self-executing-function

```
var module = {};

(function(exports){

  exports.notGlobalFunction = function() {
    console.log('I am not global');
  };  

}(module));

function notGlobalFunction() {
  console.log('I am global');
}

notGlobalFunction(); //outputs "I am global"
module.notGlobalFunction(); //outputs "I am not global" 
```

谁能帮我理解这里发生了什么？我知道如果你打电话`notGlobalFunction()`，它只会调用第二个函数。

但是在`var module = {}`做什么呢？为什么在第一个函数中再次调用它？

它说这通常被称为自执行匿名函数，但我真的不知道这意味着什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-14T16:48:55.967

立即调用的函数通常用于创建一个局部函数范围，该范围是私有的，不能从外部世界访问，并且可以定义它自己的局部符号而不影响外部世界。这通常是一种很好的做法，但在这种特殊情况下，我认为它除了增加几行代码之外没有任何好处，因为它没有用于任何事情。

这段代码：

```
(function(exports){

  exports.notGlobalFunction = function() {
    console.log('I am not global');
  };  

}(module)); 
```

将与没有像这样立即调用的一段代码相同：

```
module.notGlobalFunction = function() {
   console.log('I am not global');
}; 
```

不同的是，首先，为`modules`被调用`exports`创建了一个别名，该别名对于立即调用的功能块是本地的。但是，别名并没有做任何独特的事情，代码也可以`modules`直接使用。

* * *

该变量`modules`被创建为单个全局父对象，然后可以将许多其他全局变量作为属性。这通常被称为“命名空间”。这通常是一个很好的设计模式，因为它最大限度地减少了可能与同一项目/页面中使用的其他代码冲突的顶级全局变量的数量。

因此，不要像这样制作多个顶级变量：

```
var x, y, z; 
```

可以像这样制作一个顶级变量：

```
var modules = {}; 
```

然后，将所有其他全局变量作为属性附加到它：

```
modules.x = 5;
modules.y = 10;
modules.z = 0; 
```

这样，虽然仍有多个全局变量，但只有一个可能与其他代码冲突的顶级全局变量。

* * *

类似地，立即调用的函数会创建一个本地私有作用域，其中可以创建该作用域的本地变量，并且不会干扰其他代码段：

```
(function() {
    var x, y, z;

    // variables x, y and z are available to any code inside this immediately invoked function
    // and they act like global variables inside this function block and
    // there values will persist for the lifetime of the program
    // But, they are not truly global and will not interfere with any other global
    // variables and cannot be accessed by code outside this block.
    // They create both privacy and isolation, yet work just as well

})(); 
```

将参数传递给立即调用的函数只是一种将值传递到立即调用的函数作用域的方法，该作用域将具有它自己的局部符号：

```
(function(exports) {
    // creates a local symbol in this function block called exports
    // that is assigned an initial value of module
})(module); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:48:36.607

这将创建一个新的空对象：

```
var module = {}; 
```

它与以下内容相同：

```
var module = new Object(); 
```

这个包装：

```
(function(exports){
  ...
}(module)); 
```

`module`只为函数内部的变量添加别名。由于该匿名函数内没有局部变量或函数，因此您可以在没有它的情况下执行相同操作：

```
module.notGlobalFunction = function() {
  console.log('I am not global');
}; 
```

例如，像这样的匿名函数可用于创建私有变量：

```
(function(exports){

  var s = 'I am not global';

  exports.notGlobalFunction = function() {
    console.log(s);
  };  

}(module)); 
```

现在`notGlobalFunction`添加到`module`对象的方法可以访问变量`s`，但没有其他代码可以访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T16:51:06.707

“自动执行”可能具有误导性。它是一个匿名函数表达式，它没有被分配或作为参数给出，而是被调用。在此处阅读有关[立即调用函数表达式 (IIFE)](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)的内容。

> var module = {} 在做什么？

它初始化一个充当命名空间的空对象。

> 为什么在第一个函数中再次调用它？

它不是“调用”的，也不是“内部”第一个函数。该对象作为参数（“导出”）提供给 IEFE，并且在内部有一个分配给它的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:52:55.517

`module`IIFE 正在向作为参数传入的对象添加一个方法。该代码演示了函数创建范围。具有相同名称的方法被添加到对象和浏览器的头对象（窗口）中。

# oracle - 是否可以在 PL/SQL 中使用对象组合？

> ID：14322711
> 
> 赞同：2
> 
> 时间：2013-01-14T16:41:59.680
> 
> 标签：oracle, plsql, object-composition

我试图弄清楚如何使用 pl/sql 对象类型来实现对象组合。这是我的超级简单的例子。

```
CREATE OR REPLACE TYPE PERSON FORCE AUTHID DEFINER UNDER MYSCHEMA.BASE_OBJECT (
    student                 ND_COMMON_ADMIN.STUDENT
) NOT FINAL;

CREATE OR REPLACE TYPE STUDENT FORCE AUTHID DEFINER UNDER MYSCHEMA.BASE_OBJECT (
    person                  ND_COMMON_ADMIN.PERSON,
    application_checklist   ND_COMMON_ADMIN.APPLICATION_CHECKLIST
) NOT FINAL; 
```

您可以看到那个人（所有者对象）包含学生对象。您还可以看到学生包含一个人员对象（否则，学生将无权访问人员的数据......对吗？）

然而，PL/SQL 不喜欢这些对象相互引用并引发以下错误：

```
Error: ORA-04055: Aborted: "PERSON" formed a non-REF mutually-dependent cycle with "STUDENT". 
```

所以，如果有人能给我建议，让我通过作文让学生成为人的一部分，而且让学生能够分辨出它属于哪个人对象，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:20:47.637

根据 ORA-04055 的文档和以下 URL，您不能在两种对象类型中都有相互依赖的对象的实际实例。其中至少有一个必须是参考。

**注意：**我将 PERSON 的定义放在首位，因为逻辑上 STUDENT 似乎是 PERSON 的依赖项。但是，如果不是这种情况，可以交换声明顺序。

此外，必须首先完全定义包含另一个对象的实际实例的对象。

这将编译，如果两个对象都具有其他对象的 REF 类型，它将编译，但反之则不会。

```
CREATE OR REPLACE TYPE STUDENTC;

CREATE OR REPLACE TYPE PERSONC   AS OBJECT (
    student1  REF STUDENTC
) NOT FINAL;
/
CREATE OR REPLACE TYPE STUDENTC   AS OBJECT  (
    person1   PERSONC,
    application_checklist   INTEGER
) NOT FINAL;
/ 
```

* * *

参考：

[http://psoug.org/definition/REF.htm](http://psoug.org/definition/REF.htm)

[http://docs.oracle.com/cd/A87860_01/doc/appdev.817/a76976/adobjmng.htm](http://docs.oracle.com/cd/A87860_01/doc/appdev.817/a76976/adobjmng.htm)

[http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjmng.htm#i1003083](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjmng.htm#i1003083)

请参阅 ORA-04055 的 ORACLE 文档

# asp.net-mvc-3 - 在运行时添加到 Url.Action 的 RouteValueDictionary

> ID：14322712
> 
> 赞同：1
> 
> 时间：2013-01-14T16:42:02.737
> 
> 标签：asp.net-mvc-3, razor, view

我有一个名为 Country 的字符串属性，可通过所有视图模型查看。我想将此属性添加到 Url.Action 的 RouteValueDictionary 所以现在我必须将每个 Url.Action 更改为

> Url.Action("action","controller", new RouteValueDictionary{new {Country=Country}))。

我正在寻找干净的解决方案，在运行时将其添加到 RouteValueDictionary 而不是到处更改 Url.Action

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:14:59.247

尝试一下（仅使用匿名对象）：

```
Url.Action("action","controller",  new {Country=Country} ) 
```

# html - 位置固定填充

> ID：14322714
> 
> 赞同：2
> 
> 时间：2013-01-14T16:42:03.380
> 
> 标签：html, css

我正在尝试使用 position:fixed 让两个 div 在页面底部粘在一起。问题是当我在#feedbackTab 上添加填充时，它会从页面底部重复#feedbackTab 到我想要的位置。如何将#feedbackTab 放在#feedbackBody 的顶部，并将它们都固定在页面底部？

```
#feedbackTab {
background-image:url(../img/feedback_12.png);
position:fixed;
bottom:0px;
padding-bottom:300px;
margin:0;
width:960px;
height:34px;
}

#feedbackBody {
background-image:url(../img/Feedback_bkg_14.png);
position:fixed;
bottom:0px;
width:960px;
height:292px;
margin:0;
}

<div id="feedback">
        <div id="feedbackTab"></div>
        <div id="feedbackBody">
            <div id="comments">
                <h2>Comments/Suggestions</h2>
                <input class="commentsTxt" type="text" name="Comments"><br \>
                <input id="commentsSubmit" type="submit" value="Submit">
          </div><!-- end comments -->
            <div id="problems">
                <h2>Problems?</h2><br \>
                <label id="email">Email:</label><input class="emailBox" type="text" name="Email"><br \>
                <label id="problem">Problem:&nbsp;</label><input class="problemBox" type="text" name="Comments"><br \>
                <input id="problemsSubmit" type="submit" value="Submit">
            </div><!-- end problems -->
      </div><!-- end feedbackBody -->
    </div><!-- end feedback --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:51:17.640

我会把它们放在一个容器 div 中，像这样把所有东西放在一起：

CSS：

```
#tabContainer{
    width:700px;
}
.tab{
    width:100px;
    text-align:center;
    float:left;
    margin-right:2px;
}
#feedbackTab{
    background-color:red;
}
#tab2{
    background-color:green;
}
#tab3{
    background-color:yellow;
}
#feedbackBody{
    clear:both;
    width:100%;
    height:500px;
    background-color:blue;
} 
```

HTML：

```
<div id="tabContainer">
    <div id="feedbackTab" class="tab">FeedBack</div>
    <div id="tab2" class="tab">Tab2</div>
    <div id="tab3" class="tab">Tab3</div>

    <div id="feedbackBody">
        This is the feedback body
        <br/>lorem ipsum
        <br/>
        <input type="button" value="button">
    </div>
</div>
</body> 
```

不幸的是，JSFiddle 现在似乎已经关闭，所以我无法为您模拟或测试它。我希望这会有所帮助！

**编辑：**我找到了一个替代测试台：[http ://cssdesk.com/y7Hb2](http://cssdesk.com/y7Hb2)

# nhibernate - 实体框架嵌套数据库类

> ID：14322720
> 
> 赞同：1
> 
> 时间：2013-01-14T16:42:15.313
> 
> 标签：nhibernate, entity-framework-5, castle-activerecord

类定义

```
Public Class AddressEntity
    Private _addressId As Guid
    Private m_strStreet As String
    Private m_strSuite As String
    Private m_strCity As String
    Private m_State As String
    Private m_strZipCode As String
    Private m_strCountry As String

    Public Overridable Property Street() As String
        Get
            Return m_strStreet
        End Get
        Set(ByVal Value As String)
            m_strStreet = Left(Value, 50)
            DataChanged(EntityState.Modified, "Street")
        End Set
    End Property

    Public Overridable Property Suite() As String
        Get
            Return m_strSuite
        End Get
        Set(ByVal Value As String)
            m_strSuite = Left(Value, 50)
            DataChanged(EntityState.Modified, "Suite")
        End Set
    End Property

    Public Overridable Property City() As String
        Get
            Return m_strCity
        End Get
        Set(ByVal Value As String)
            m_strCity = Left(Value, 50)
            DataChanged(EntityState.Modified, "City")
        End Set
    End Property

    Public Overridable Property State() As String
        Get
            Return m_State
        End Get
        Set(ByVal Value As String)
            m_State = Left(Value, 50)
            DataChanged(EntityState.Modified, "State")
        End Set
    End Property

    <MaxStringLength(10)>
    Public Overridable Property ZipCode() As String
        Get
            Return m_strZipCode
        End Get
        Set(ByVal Value As String)
            m_strZipCode = Left(Value, 10)
            DataChanged(EntityState.Modified, "ZipCode")
        End Set
    End Property

    Public Overridable Property Country() As String
        Get
            Return m_strCountry
        End Get
        Set(ByVal Value As String)
            m_strCountry = Left(Value, 50)
            DataChanged(EntityState.Modified, "Country")
        End Set
    End Property

    <Key>
    Public Overridable Property AddressId() As Guid
        Get
            Return _addressId
        End Get
        Set(ByVal value As Guid)
            _addressId = value
        End Set
    End Property

Public Class AMAStatementEntity
    Private _DateOfService As Nullable(Of DateTime)
    Private _FacilityLocation As AddressEntity
    Private _BillingAddress As AddressEntity

    <Key>
    Public Property AMAId() As Guid
        Get
            Return _amaId
        End Get
        Set(ByVal value As Guid)
            _amaId = value
        End Set
    End Property
    Public Property DateOfService() As Nullable(Of Date)
        Get
            Return _DateOfService
        End Get
        Set(ByVal value As Nullable(Of Date))
            _DateOfService = value
        End Set
    End Property

    'This was used in Castle Activerecord
    '<Nested(ColumnPrefix:="FL")> _
    Public Property FacilityLocation() As AddressEntity
        Get
            Return _FacilityLocation
        End Get
        Set(ByVal value As AddressEntity)
            _FacilityLocation = value
        End Set
    End Property

    'This was used in Castle Activerecord
    '<Nested(ColumnPrefix:="BA")> _
    Public Property BillingAddress() As AddressEntity
        Get
            Return _BillingAddress
        End Get
        Set(ByVal value As AddressEntity)
            _BillingAddress = value
        End Set
    End Property

    'Other irrelevant properties cut for brevity.

End Class 
```

数据库表

```
CREATE TABLE [dbo].[AMA](
    [AMAId] [uniqueidentifier] NOT NULL,
    [DateOfService] [datetime] NULL,
    [FLStreet] [nvarchar](255) NULL,
    [FLSuite] [nvarchar](255) NULL,
    [FLCity] [nvarchar](255) NULL,
    [FLZipCode] [nvarchar](255) NULL,
    [FLCountry] [nvarchar](255) NULL,
    [FLState] [nvarchar](255) NULL,
    [BAStreet] [nvarchar](255) NULL,
    [BASuite] [nvarchar](255) NULL,
    [BACity] [nvarchar](255) NULL,
    [BAZipCode] [nvarchar](255) NULL,
    [BACountry] [nvarchar](255) NULL,
    [BAState] [nvarchar](255) NULL,
 CONSTRAINT [PK_AMA] PRIMARY KEY CLUSTERED 
(
    [AMAId] ASC
)
) ON [PRIMARY] 
```

鉴于上述类和表结构，我可以，如果可以，我如何正确告诉 Entity Framework 这些类是如何存储在数据库中的？我正在从Castle ActiveRecord（位于NHibernate 之上）迁移，它使用了一个带有选项列前缀的嵌套属性。另外，我不知道这个构造的正确名称（如果有的话）是什么，我知道 TPT、TPC 和 TPH，但我还没有找到它的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:03:39.860

使用实体框架，您所谓的“嵌套数据库类”的终点技术是[“**复杂类型**”](http://weblogs.asp.net/manavi/archive/2011/03/28/associations-in-ef-4-1-code-first-part-2-complex-types.aspx)。

在 EF 术语中，它不是一个“实体”（它有自己的身份，在大多数情况下还有自己的数据库表），所以这个名字`AddressEntity`不是最好的，`AddressType`也许更好。

您将类本身标记为“ComplexType”，而不是包含类中的单个属性（例如您`FacilityLocation`的示例）：

```
<ComplexType>
Public Class AddressEntity
'... 
```

默认情况下，EF 将使用由`FacilityLocation`属性名 + 下划线 + 属性名组成的列名`AddressEntity`，例如

```
FacilityLocation_Street
FacilityLocation_Suite 
```

不幸的是，EF 没有像`ColumnPrefix`我所知道的示例中的映射那样提供如此简单的前缀重命名。您必须一一映射属性，并且必须使用 Fluent API 来完成，使用数据注释无法实现这一点：

（在 C# 中）：

```
modelBuilder.Entity<AMAStatementEntity>()
    .Property(a => a.FacilityLocation.Street)
    .HasColumnName("FLStreet");

modelBuilder.Entity<AMAStatementEntity>()
    .Property(a => a.FacilityLocation.Suite)
    .HasColumnName("FLSuite");

// etc. 
```

# performance - Go 语言的垃圾收集方法与其他方法相比是什么？

> ID：14322724
> 
> 赞同：18
> 
> 时间：2013-01-14T16:42:32.080
> 
> 标签：performance, garbage-collection, jvm, go

我对 Go 编程语言了解不多，但我看到一些说法说 Go 具有无延迟的垃圾收集，并且比其他垃圾收集器（如 JVM 垃圾收集器）要好得多。我已经为 JVM 开发了应用程序，并且我知道 JVM 垃圾收集器不是无延迟的（特别是在使用大量内存时）。

我想知道，Go 中的垃圾收集方法与其他使其无延迟的方法有什么区别？

提前致谢。

* * *

编辑：@All 我完全编辑了这个问题，如果你觉得它有建设性，请投票重新打开这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-06T04:05:40.160

Go 没有无延迟的垃圾收集。如果您能指出这些说法在哪里，我想尝试纠正它们。

我们认为 Go 优于 Java 的一个优势是它可以让您更好地控制内存布局。例如，一个简单的 2D 图形包可能定义：

```
type Rect struct {
    Min Point
    Max Point
}

type Point struct {
    X int
    Y int
} 
```

在 Go 中，一个 Rect 只是内存中连续的四个整数。您仍然可以将 &r.Max 传递给期望 *Point 的函数，这只是指向 Rect 变量 r 中间的指针。

在 Java 中，等效的表达式是创建 Rect 和 Point 类，在这种情况下，Rect 中的 Min 和 Max 字段将是指向单独分配的对象的指针。这需要更多的分配对象，占用更多的内存，并给垃圾收集器更多的跟踪和做更多的事情。另一方面，它确实避免了创建指向对象中间的指针。

与 Java 相比，Go 为程序员提供了对内存布局的更多控制，您可以使用该控制来减少垃圾收集器的负载。这在具有大量数据的程序中非常重要。由于缓存效应等，对内存布局的控制对于从硬件中提取性能也可能很重要，但这与原始问题相切。

当前 Go 发行版中的收集器是合理的，但绝不是最先进的。我们计划在未来一两年内投入更多精力来改进它。需要明确的是，Go 的垃圾收集器肯定不如现代 Java 垃圾收集器，但我们相信在 Go 中编写不需要那么多垃圾收集的程序更容易，所以最终效果仍然是垃圾收集在 Go 程序中的问题比在等效的 Java 程序中要小。

# ios - 我应该如何在 iOS 项目中存储本地化的字符串？

> ID：14322730
> 
> 赞同：0
> 
> 时间：2013-01-14T16:42:51.413
> 
> 标签：ios, objective-c, localization, nsstring, nslocalizedstring

我正在开发一个 iOS 应用程序。我的任务之一是本地化。出于这个原因，我把所有的字符串都放在了一个 中`NSLocalizedString(key,comment)`，一切都很好。

但我的新解决方案是创建一个 Singleton 类，它存储`String`我在项目中使用的所有内容。有了这个，我有一个小而棘手的问题：命名。我是否需要为每个需要本地化字符串的类（视图）创建一些字典？或者我应该为此使用前缀，或者返回具有良好、可理解的属性名称的对象的函数？

PS：我不想发明新轮子。我想创建本地化字符串的存储，将在项目中使用。所以，我的目标是制作单例：

`[[[StringStorage sharedInstance] getStringsForClass:self] objectForKey:@"title"];`

或类似的东西：

`[StringStorage sharedInstance].stringTitleForMainView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:48:48.577

你真的应该坚持使用`NSLocalizedString`and `NSLocalizedStringFromTable`。您也可以使用该`NSBundle`方法`localizedStringForKey:value:table:`。

但是，如果您采取任何其他方式，您就是在重新发明轮子，并且您将失去使用`genstrings`命令行工具从源代码中提取所有字符串的能力。

# asp.net - 在面板外单击时隐藏 Ajax ModalPopupExtender

> ID：14322734
> 
> 赞同：1
> 
> 时间：2013-01-14T16:43:07.623
> 
> 标签：asp.net, ajax, facebook

**在 ASP.NET 中，如何隐藏 Ajax ModalPopupExtender 当点击面板外（ModalPopupExtender）而不是点击面板内的按钮（如 Facebook 照片显示）？谢谢**

# facebook - 是否可以像按钮评论弹出一样控制 facebook 的方向？

> ID：14322740
> 
> 赞同：0
> 
> 时间：2013-01-14T16:43:34.107
> 
> 标签：facebook, widget, facebook-like, facebook-social-plugins

如果可能的话，我希望弹出窗口向左而不是向右，因为它有时会被其他 UI 元素隐藏。![在此处输入图像描述](../Images/dfb44080f96396e01cf6123f6c848b21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:13:45.973

不可以。由于它是一个社交插件，因此您唯一可以更改的样式就是您在[插件配置页面](http://developers.facebook.com/docs/reference/plugins/like/)上看到的样式。

# javascript - Js原型，设置名称

> ID：14322744
> 
> 赞同：1
> 
> 时间：2013-01-14T16:43:44.800
> 
> 标签：javascript

我不是指名称属性，例如

```
String.prototype.myFunc = function(){}

var myString = new String();
console.log(myString); 
```

在控制台中查看创建的函数时，有一个`name:''`. 我想知道我们是如何设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:48:07.997

使用命名函数：

```
String.prototype.myFunc = function myFunc(){}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:15:30.747

您可以使用函数声明语句构造函数，然后将其分配给您选择的原型属性：

```
(function() { // to keep the global scope clean
  function myFunc() {
    // whatever
  }

  String.prototype.myFunc = myFunc;
})(); 
```

实际上，您可以在函数实例化表达式中为任何函数命名，但这[并不是一件超级安全的事情。](http://kangax.github.com/nfe/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:18:38.193

你做了一个匿名函数，它的[`name`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)是空字符串。

要么使用[命名函数表达式](http://kangax.github.com/nfe/)：

```
String.prototype.myFunc = function myNamedFunc(){}; 
```

或分配一个您用名称声明的函数：

```
function myNamedFunc() {};
String.prototype.myFunc = myNamedFunc; 
```

# delphi - 使用 TColorBox 更改字体颜色

> ID：14322749
> 
> 赞同：-1
> 
> 时间：2013-01-14T16:44:18.357
> 
> 标签：delphi

德尔福 v7

我还有另一个补救问题。

使用`TColorBox`我想更改 4 个 RichEdit 控件中每个控件的字体颜色。我正在使用`OnClick`彩盒的事件。

**此过程适用于一个丰富的编辑控件。**

```
 procedure TForm1.cmbFColorClick(Sender: TObject);
    begin

     reProc.SelAttributes.Color := cmbFColor.Selected;

    end; 
```

如果我尝试为每个richedit 控件编写相同的代码，它将同时更改所有richedit 控件中的字体颜色。

**示例：**我选择并更改了一个richedit 控件上的文本颜色，然后我更改了另一个控件上的文本颜色，两个richedit 控件上的文本颜色同时更改。

**例子**

```
 procedure TForm1.cmbFColorClick(Sender: TObject);
     begin

      reProc.SelAttributes.Color := cmbFColor.Selected;
      reApp.SelAttributes.Color := cmbFColor.Selected;
      reServ.SelAttributes.Color := cmbFColor.Selected;

     end; 
```

**这个程序根本不起作用**

```
procedure TForm1.cmbFColorClick(Sender: TObject);
 begin
  if ActiveControl is TDBRichEdit then
   with ActiveControl as TDBRichEdit do
    SelAttributes.Color := cmbFColor.Selected;

  end; 
```

有没有办法可以在不影响任何其他控件的情况下更改所有 Richedit 控件上的文本颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:24:23.057

我认为活动控件是您的 TColorBox 而不是richeditboxes，因为只有一个控件可以是活动控件。如果我没记错的话，这个控件有焦点。

所以你必须实现这样的过程。你已经通过代码记住了，这是最后一个活跃的 Richedit。

程序changeColor（编辑：Trichedit）；开始

```
procedure changeColor(edit:Trichedit); 
begin
     edit.SelAttributes.Color := cmbFColor.Selected;
end; 
```

亲切的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:06:38.600

问题解决了。在 PageControl OnChange 事件中，我将每个富编辑控件的 RichEdit SelLength 设置为“0”。

感谢您的帮助。它给了我这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:16:46.580

我正在将这个问题、你的最后一个问题、对这些问题的评论以及你对这些问题的答案拼凑起来。

您要做的是修改`SelAttributes.Color`单个丰富的编辑控件。问题在于确定要对哪个富编辑控件进行操作。

让我们假设您有以下可用功能：

```
function ActiveRichEdit: TRichEdit; 
```

然后你可以简单地写：

```
ActiveRichEdit.SelAttributes.Color := NewColor; 
```

或者，如果有可能没有激活丰富的编辑控件：

```
if ActiveRichEdit<>nil then
  ActiveRichEdit.SelAttributes.Color := NewColor; 
```

那么，我们如何实现`ActiveRichEdit`呢？好吧，您似乎有一个包含多个页面的控件，每个页面都包含一个独特的富编辑。对我来说，这听起来很像一个页面控件。

我将假设您的页面控件被调用`PageControl`，标签页被调用`TabSheet1`，`TabSheet2`等等，丰富的编辑控件被命名`RichEdit1`，`RichEdit2`等等。但是如果你的名字不同，那么你需要修改这个代码。

```
function TForm1.ActiveRichEdit: TRichEdit;
begin
  if PageControl.ActivePage=TabSheet1 then
    Result := RichEdit1
  else if PageControl.ActivePage=TabSheet2 then
    Result := RichEdit2
  else if PageControl.ActivePage=TabSheet3 then
    Result := RichEdit3
  // etc. etc.
  else
    Result := nil;
end; 
```

现在，还有其他方法可以做到这一点。您可以制作一组丰富的编辑引用，这些引用可以由`PageControl.ActivePageIndex`. 而且确实还有更多可能的解决方案。

但关键是使用页面控件的`ActivePage`或属性来确定操作哪个富编辑控件。`ActivePageIndex`

# c++ - 当提供轴和四元数时，如何使用 GLM 获得角度？

> ID：14322754
> 
> 赞同：0
> 
> 时间：2013-01-14T16:44:30.203
> 
> 标签：c++, opengl, rotation, quaternions, glm-math

我正在使用 GLM 四元数来表示对象的方向。

基本上，我想添加从 quat 中提取轴角度的功能。我不知道这是否是我*需要*做的；但是这样做的一个用途是尝试在 y 轴上旋转立方体，以增加我需要首先获得旧角度的角度，对吧？所以

```
cube.setOrientation(cube.getAngleOnAxis(0, 1, 0) + 5); 
```

那应该将立方体旋转五度，对吗？

我遇到的问题是实现 getAngleOnAxis 函数。是否有可以提取角度的 GLM 函数？

我不确定我是否真的想到了正确的解决方案，所以如果有经验的人可以更简单地解释这一点，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:14:28.307

> 要增加角度，我需要先获得旧角度，对吗？

不[，使用四元数的全部意义在于](https://nicolbolas.github.io/oldtut/Positioning/Tut08%20Quaternions.html)不必*这样*做。您只需将新的四元数乘以旧的四元数，将结果标准化，这就是您的新方向。

# oracle - 如何设置Oracle区分大小写处理对象名称？

> ID：14322758
> 
> 赞同：1
> 
> 时间：2013-01-14T16:44:41.027
> 
> 标签：oracle

我知道我可以使用双引号来强制区分大小写的对象名称，但我想避免使用它。我想知道是否有一个数据库选项可以设置为使 Oracle 以区分大小写的方式处理对象名称而不使用双引号。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:46:33.610

没有这样的选择。如果您想强制所有内容都区分大小写（我强烈质疑这样做是否明智），则需要在整个代码中使用双引号标识符。

# android - Android 上的媒体查询

> ID：14322762
> 
> 赞同：0
> 
> 时间：2013-01-14T16:44:50.630
> 
> 标签：android, responsive-design

```
@media only screen and (max-device-width: 550px) 
```

是一个简单的查询，对吗？参考它应该做什么。我正在使用它`a:href`与设置为`display:none`.

在任何带有 3rd 方浏览器的 iPhone、iPod 或 Android 上都可以正常工作，但在标准 Android 上，它只适用于初始页面加载，之后它会忽略样式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:47:04.703

`max-device-width`在原生 Android 浏览器中没有得到很好的支持。会`max-width`是一个可接受的替代方案吗？

# android - Android：在 NDK 的 jar 文件中链接预构建的共享库 (.so)

> ID：14322766
> 
> 赞同：2
> 
> 时间：2013-01-14T16:45:02.273
> 
> 标签：android, jar, android-ndk, shared, loadlibrary

我有一个编译为 jar 文件的静态 java 库。这个 jar 使用 System.loadLibrary 加载一个 .so 库。然后另一个 Android 应用程序项目静态链接 jar 文件。

一切都是使用 NDK 中的 Android.mk 文件编译的...如何使共享本机库被包含并从我的最终应用程序中正确加载（并从 jar 代码中“看到”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:25:20.293

好的，我通过在 Android.mk 中使用这些说明解决了这个问题：

$(shell cp $(通配符 $(LOCAL_PATH)/libs/armeabi/*.so) $(TARGET_OUT_INTERMEDIATE_LIBRARIES)) LOCAL_JNI_SHARED_LIBRARIES:= libMyLib

就在之前

包括 $(BUILD_PACKAGE)

# html - 内部链接的绝对定位问题

> ID：14322767
> 
> 赞同：0
> 
> 时间：2013-01-14T16:45:05.093
> 
> 标签：html, css

[http://dev.epicwebdesign.ca/karen/2-4/a/#antartica](http://dev.epicwebdesign.ca/karen/2-4/a/#antartica)

绝对定位大陆，由于某种原因，链接没有到达正确的位置。这是绝对定位的不足，还是我在做一些愚蠢的事情？

锚点在标题周围，因为它们应该是。

刚刚意识到它会出现在图像的顶部，而不是下面的标题。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:59:54.710

定义片段的`<a name="fragment_name" />`方法已被弃用，取而代之的是使用`id`s. 因此，当您访问[http://dev.epicwebdesign.ca/karen/2-4/a/#antartica](http://dev.epicwebdesign.ca/karen/2-4/a/#antartica)时，浏览器会认为您想访问`<div id="antarctica"/>`位于页面顶部的 ，而不是位于页面顶部的`<a name="antarctica" />`，页面底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:02:02.580

事实证明，至少在 chrome 中，它认为 ID 是内部链接，而不仅仅是名称。图片的 ID 与标题的名称冲突。一旦ID以“img”为后缀，它就可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:08:08.627

添加到 cimmanon 的答案（如果您引用的页面发生更改）。

**注意：**请粘贴您的代码以供将来参考。

* * *

更改页面顶部的锚点：

```
<div id="continents">
    <a href="#northamerica" id="northamerica"><img src="northamerica.png"></a>
    <a href="#southamerica" id="southamerica"><img src="southamerica.png"></a>
    <a href="#asia" id="asia"><img src="asia.png"></a>
    <a href="#europe" id="europe"><img src="europe.png"></a>
    <a href="#oceania" id="oceania"><img src="oceania.png"></a>
    <a href="#antartica" id="antartica"><img src="antartica.png"></a>
    <a href="#africa" id="africa"><img src="africa.png"></a>
</div> 
```

到：

```
<div id="continents">
    <a href="#northamericaSection" id="northamerica"><img src="northamerica.png"></a>
    <a href="#southamericaSection" id="southamerica"><img src="southamerica.png"></a>
    <a href="#asiaSection" id="asia"><img src="asia.png"></a>
    <a href="#europeSection" id="europe"><img src="europe.png"></a>
    <a href="#oceaniaSection" id="oceania"><img src="oceania.png"></a>
    <a href="#antarticaSection" id="antartica"><img src="antartica.png"></a>
    <a href="#africaSection" id="africa"><img src="africa.png"></a>
</div> 
```

请注意，我已更改`href`所有链接上的。

并将您的标题从以下更改为：

```
<a id="antartica">
    <h1>Antartica</h1>
</a> 
```

到：

```
<h1 id="antarticaSection">Antartica</h1> 
```

没有锚（除非您打算将其链接到其他东西）。

# android-ndk - Android NDK远程调试：为什么gdb这么慢？

> ID：14322772
> 
> 赞同：3
> 
> 时间：2013-01-14T16:45:23.267
> 
> 标签：android-ndk, gdb, remote-debugging

使用 NDK r8c、Eclipse 4.2、Windows 7 64

我之前使用过远程调试器（在其他平台上，通过千兆以太网）用于大型 C++ 代码库，感觉与本地调试没有什么不同。SDK 附带的 Java 调试器运行速度也很快。因此，我很困惑为什么 gdb 连接和跨行代码的速度如此之慢。

在我当前的应用程序中，大约有 20 个静态库和 1500 个源文件，连接大约需要 15 秒，步进大约需要 2 秒。我更担心踩踏。

有没有人分析过 gdb 以查看问题所在？如果是这样，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:40:15.000

我有。我和我在 NVIDIA 的同事已经为 AOSP 做出了一些贡献来解决这个问题，尽管我们的重点一直是共享库（符号加载性能和待处理的符号解析）。我们已经将 solib 加载处理速度提高了 6 倍。（虽然，在完成我们自己的工作之后，我们发现 GNU 在 7.5 中已经在上游解决了 6x 中的 3x ......所以我们放弃了重新发明，并将相关的 7.5 补丁提交到 Google 的 NDK 存储库，该存储库基于较旧的 7.3 GDB。）我相信我们所有的加速都存在于 r8d 中......但我没有检查过。

我想不出静态库会减慢速度的任何原因，但我必须承认我没有考虑过它们。您是否有特定的理由相信这一点，或者这只是为了说明您的调试需求的规模和范围而发表的评论？

我们已经开始研究步进问题，但还没有任何东西可以分享。基本上，瓶颈是 ADB（尤其是在 Windows 上）。此外，在单步执行时，GDB 和 gdbserver 之间有很多闲聊，尤其是当您使用带有本地窗口、注册窗口、表达式窗口、堆栈窗口等的 IDE 时.，每一步都更新。这是很多可能会针对 IDE 用例进行优化的喋喋不休。

我们正在考虑的一些用于加速步进的修复将是特定于 IDE 的：

*   使用 python 脚本在 GDB 中预处理监视表达式，而不是在 IDE 中。

*   实现 GDB 和 gdbserver 之间的“超级数据包”通信... 封装特定于 IDE 的通信的数据包，以最大限度地减少 GDB 和 gdbserver 之间的干扰。

我们打算与 Android 社​​区分享所有这些。

# c# - 解析查询时出错。[令牌行号，令牌行偏移量，，令牌错误，，]

> ID：14322779
> 
> 赞同：1
> 
> 时间：2013-01-14T16:45:39.717
> 
> 标签：c#, visual-studio, oledb

我收到一个错误，`ExecuteNonQuery`真的不知道为什么。我花了很多时间在网上搜索并意识到`User`必须介于 之间`[]`，但这并没有解决我的问题。

```
else {
    DataTable table = new DataTable();
    string query = "SELECT * FROM [User] WHERE Email = '" + tbMail.Text + "'";
    OleDbDataAdapter adapter = new OleDbDataAdapter(query, connectionString);
    int count = adapter.Fill(table);
    if (count != 0)    {
        MessageBox.Show("This email is already in use", "Email in use", MessageBoxButtons.OK, MessageBoxIcon.Information);
    } else {
        OleDbConnection connection = new OleDbConnection(connectionString);
        OleDbCommand insertCommand = new OleDbCommand();
        adapter = new OleDbDataAdapter();

        string encryptedPassword = Convert.ToBase64String(System.Security.Cryptography.MD5.Create().ComputeHash(Encoding.UTF8.GetBytes(tbPass.Text)));

        connection.Open();

        string command = "INSERT INTO [User] (Username, Password, Email) VALUES('" + tbUser.Text + "', '" + encryptedPassword + "', " + tbMail.Text + ")";
        insertCommand.Connection = connection;
        insertCommand.CommandText = command;
        adapter.InsertCommand = insertCommand;
        adapter.InsertCommand.ExecuteNonQuery();

        connection.Close();
    }
} 
```

错误是：

> 解析查询时出错。[令牌行号，令牌行偏移量，，令牌错误，，]"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:47:54.427

您的电子邮件值必须在引号之间，就像用户名和密码一样。

还有一点就是应该使用sql参数来防止sql注入攻击。

# c# - 将展平的字符串映射到列表

> ID：14322785
> 
> 赞同：3
> 
> 时间：2013-01-14T16:45:58.263
> 
> 标签：c#, automapper

好的，关于 AutoMapper 的完全菜鸟问题。

员工模型对象。

```
public class Employee {
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public decimal HourlyRate { get; set; }
    public List<string> EmailAddresses { get; set; }
} 
```

对象：

```
public class UpdateEmployeeDetailsDto {
    public decimal HourlyRate { get; set; }
    public string EmailAddress1 { get; set; }
    public string EmailAddress2 { get; set; }
} 
```

我想将 DTO 映射到 Employee 对象，并将 EmailAddress1 和 EmailAddress2 变成一个列表。

我已经在 google 和 SO 上搜索过这种类型的东西，但是我发现的示例我无法将它们翻译成工作代码。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:54:14.357

用于`AfterMap`提供自定义映射（在您的情况下从属性创建列表）：

```
Mapper.CreateMap<UpdateEmployeeDetailsDto, Employee>()
      .AfterMap((dto, e) => e.EmailAddresses = new List<string>() {
          dto.EmailAddress1,
          dto.EmailAddress2
      }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:05:04.623

除了@lazyberezovsky 所说的，您还可以创建一个自定义解析器：

```
 public class CustomResolver : ValueResolver<UpdateEmployeeDetailsDto, List<string>>
  {
    protected override List<string> ResolveCore(UpdateEmployeeDetailsDto source)
    {
        return new List<string> { source.EmailAddress1, source.EmailAddress2 }
    }
  }

Mapper.CreateMap<UpdateEmployeeDetailsDto, Employee>()
  .ForMember(dest => dest.EmailAddresses, opt => opt.ResolveUsing<CustomResolver>()); 
```

重点是什么？您可以使其更通用并使用它来解决案例`Value1`，`Value2`...映射`Value3`到`ValueN``List<ValueType> Values`

# objective-c - componentsJoinedByString 导致 EXC_BAD_ACCESS 崩溃

> ID：14322790
> 
> 赞同：1
> 
> 时间：2013-01-14T16:46:10.327
> 
> 标签：objective-c, xcode, macos

我很确定这与[componentsJoinedByString 给我的 EXC_BAD_ACCESS中的问题完全相同](https://stackoverflow.com/questions/4315331/componentsjoinedbystring-gives-me-exc-bad-access)

基本上，使用此代码填充一个数组，并打开 ARC：

```
-(NSMutableArray *)getArrayOfCommaSeparatedSelectorStrings{
    NSMutableArray *Array = [[NSMutableArray alloc] init];
    for(NSMutableArray *e in [self getArrayOfSelectorArrays]) {
        [Array addObject:[displayCSSInformation returnArrayAsCommaList:e]];
    }
        return Array;
} 
```

然后 displayCSSInformation 尝试使用此方法返回一个逗号分隔的列表：

```
+(NSString *)returnArrayAsCommaList:(NSMutableArray *)ToBeConverted{
    NSString *test = [ToBeConverted componentsJoinedByString:@", "];
    return test;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:29:30.327

如果该方法所做的只是调用另一个方法，则通常不需要使用单独的方法。删除您的`+returnArrayAsCommaList:`方法并`componentsJoinedByString:`直接在阵列上使用。

```
- (NSMutableArray *) getArrayOfCommaSeparatedSelectorStrings
{
    NSMutableArray *array = [[NSMutableArray alloc] init];
    for (NSMutableArray *e in [self getArrayOfSelectorArrays])
        [array addObject:[e componentsJoinedByString:@", "]];

    return array;
} 
```

如果您仍然遇到错误，上述内容应该有效（它适用于我的小测试示例）：

1.  确保它`getArrayOfSelectorArrays`实际上返回了一个字符串数组。将输出记录到控制台或使用调试器单步执行。

2.  使用“构建和分析”选项让静态分析器检查任何问题。这对 ARC 来说不是问题，但它仍然会处理诸如使用未初始化值之类的问题。

3.  确保您已正确桥接任何 Core Foundation 对象的所有权。

# vb.net - 使用预先格式化的数据打开邮件客户端

> ID：14322796
> 
> 赞同：1
> 
> 时间：2013-01-14T16:46:20.820
> 
> 标签：vb.net, winforms, mapi

我需要创建一封电子邮件，但是当按钮被触发时，我希望它使用预先格式化的电子邮件打开 Outlook。

由于客户端有一些限制，我不希望它从程序本身发送电子邮件，我希望它在 Outlook 中打开。

像这样的东西：

```
Dim email As New CDO.Message
With email
    .From = "the_sender@company1.com"
    .To = "the_reciever@company2.com"
    .Subject = "Great e-mail"
    .HTMLBody = "<h1>Header for a cool email</h1> And cool HTML"
    .AddAttachment("Cute_kitty.jpg")

    '.Send() NO! Open outlook with this stuff typed above and make sender useless
End With 
```

我怎样才能做到这一点？我找到了这些东西，但它（当然）不支持 html 电子邮件和附件......

```
Dim proc As System.Diagnostics.Process = New System.Diagnostics.Process
proc.StartInfo.FileName = "mailto:the_reciever@company2.com?subject=Great e-mail&body=My cool email that does not support html n stuff"
proc.Start() 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:53:14.520

如果要在 Outlook 中打开邮件，则需要使用 Outlook 对象模型。类似的东西：

set App = CreateObject("Outlook.Application")
set NS = App.GetNamespace("MAPI")
NS.Logon
set email = App.CreateItem(0)
With email
.To = "the_reciever@company2.com" .Subject
= "很棒的电子邮件"
.HTMLBody = 您的 HTML 文本"
.Attachments.Add("c:\temp\Cute_kitty.jpg")
.Display
End With

# kendo-ui - Kendo UI Mobile - 我如何在列表视图中做固定流体固定的可点击项目？

> ID：14322798
> 
> 赞同：2
> 
> 时间：2013-01-14T16:46:25.097
> 
> 标签：kendo-ui

在我的剑道移动应用程序中，我有一些需要多个操作的列表视图。我需要类似于[Link Items & Detail Buttons 演示](http://demos.kendoui.com/mobile/listview/detailbuttons.html)中显示的内容，但更灵活。就我而言，我需要涵盖以下场景（所有部分均可点击）：

```
[icon][text of the item]

[text of the item][icon]

[icon][text of the item][icon] 
```

...`[icon]`一些字体图标在哪里。

我已经开始着手解决方案，但在进一步讨论之前，我需要一些反馈，以确保我不会忽视更好的方法或 Kendo 中已经内置的东西。

单击时，每个“部分”都`<LI>`需要执行不同的操作。为了处理这个问题，我在`<UL>`. 我还在模板`data-command-name`中的每个元素上都有一个属性，`<LI>`以便我知道用户点击/单击的内容。

**我已经整理了一个小提琴，但是 jsFiddle 在加载时重新格式化了 HTML 部分（我认为是因为模板脚本标签）。加载小提琴后，请将 HTML 替换为以下内容以使其正常工作：**

**HTML**

```
<div id="itemsView" data-role="view" data-model="vm">
  The red, silver and blue sections along with the X & Y are not part of the design, they are there just to make my intent more obvious.
  <ul data-role="listview" data-bind="source: items, click: clickHandler"
  data-template="itemsTemplate"></ul>

  <script id="itemsTemplate" type="text/x-kendo-template">

    <div class = "left-column" data-command-name="left (red)" > X </div>
    <div class="right-column" data-command-name="right (blue)">Y</div > 
    <div class = "content-column" data-command-name="content (silver)"> #=Name# </div>

  </script>
</div> 
```

**CSS**

```
div.left-column {
  float: left;
  width: 25px;
  margin-top: -5px;
  padding-top: 5px;
  margin-left: -5px;
  padding-left: 5px;
  cursor: default;
  background-color: red;
}
.content-column {
  margin-top: -5px;
  margin-left: 25px;
  margin-bottom: 0;
  margin-right: 25px;
  padding-top: 5px;
  cursor: default;
  background-color: silver;
}
.right-column {
  float: right;
  width: 25px;
  margin-top: -5px;
  padding-top: 5px;
  cursor: default;
  background-color: blue;
} 
```

**JavaScript**

```
var vm = kendo.observable({
  items: [{
    Selected: false,
    Name: "Item1"
  }, {
    Selected: false,
    Name: "Item2"
  }, {
    Selected: false,
    Name: "Item2"
  }],

  clickHandler: function (e) {
    var cmd = e.target.context.attributes["data-command-name"]
    if (cmd) {
      alert(cmd.value);
    }
  },
});

kendoApp = new kendo.mobile.Application(document.body, {
  transition: "slide",
  platform: 'android'
}); 
```

这是小提琴：http: [//jsfiddle.net/8Kydw/](http://jsfiddle.net/8Kydw/)

所以总结一下我的问题：

1）有没有更好的/内置的方法来做到这一点？

2）如果没有，关于CSS的任何提示？例如，为什么在 Android 中列表项的高度比我自定义之前的要小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T14:39:37.307

1）我认为您使用的策略对于 Kendo UI Mobile 来说是完全可以接受的。

2) 如果您使用自己的 CSS 自定义边距或内边距，Kendo UI Mobile 应用了一些非常具体的样式`line-height`以及一些其他将影响列表项显示方式的项目。不过我不会太担心。

# c++ - 使用 dllexport 和特定函数名称时未解析的外部符号

> ID：14322807
> 
> 赞同：3
> 
> 时间：2013-01-14T16:46:53.797
> 
> 标签：c++, dll, dllexport

**编辑**

为了解决这个问题，我在头文件（开头）中添加了以下内容：

```
#ifdef GetMessage
#undef GetMessage
static inline BOOL GetMessage(
LPMSG lpMsg,
HWND hWnd,
UINT wMsgFilterMin,
UINT wMsgFilterMax
) {
#if UNICODE
return ::GetMessageW(lpMsg, hWnd, wMsgFilterMin, wMsgFilterMax);
#else
return ::GetMessageA(lpMsg, hWnd, wMsgFilterMin, wMsgFilterMax);
#endif
}
#endif 
```

* * *

我正在从如下代码创建一个 C++ DLL（使用 Visual Studio 2008）：

头文件：

```
#include <windows.h> // Edit: This is the culprit.
class __declspec(dllexport) TestBaseClass
{
protected:
   char m_Message[512];
public:
   TestBaseClass();
   virtual char* GetMessage(void) = 0;
};

class __declspec(dllexport) TestDerivedClass : public TestBaseClass
{
public:
   TestDerivedClass();
   virtual char* GetMessage(void);
}; 
```

CPP 文件：

```
TestBaseClass::TestBaseClass()
{
}

TestDerivedClass::TestDerivedClass() : TestBaseClass()
{
}

char* TestDerivedClass::GetMessage(void)
{
   sprintf(m_Message, "This is a Message");
   return m_Message;
} 
```

当我去编译 DLL 时，我得到一个链接器错误：

> 错误 LNK2001：未解析的外部符号“公共：虚拟字符 * __thiscall TestDerivedClass::GetMessageA(void)”(?GetMessageA@TestDerivedClass@@UAEPADXZ)

如果我将“GetMessage”的每个实例更改为其他内容（例如“TestFunc”），我不会收到链接器错误。

**主要问题**：为什么我不能使用“GetMessage”作为我的函数名？

**第二个问题**：有没有办法解决链接器错误，并按照当前定义在我的班级中保留“GetMessage”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:55:18.773

这是相当标准的预处理器损失。您的标识符被宏破坏了。它位于 Windows 标头中，它将 winapi GetMessage() 函数重命名为 GetMessageA 或 GetMessageW，具体取决于是否定义了 UNICODE。

选择其他名称或使用#undef GetMessage

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T16:57:04.593

这是由于 Windows 标头中的一个怪癖。当 you 时`#include <windows.h>`，它是or 或`#define`的符号，具体取决于您是否启用了 Unicode 支持（更具体地说，如果定义了宏）——有关更多信息，请参阅[Windows API 中的 Unicode](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374089%28v=vs.85%29.aspx)和[Function Prototypes 的约定。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317766%28v=vs.85%29.aspx)`GetMessage``GetMessageA``GetMessageW``UNICODE`

要解决此问题，您有几个选择：

*   不要包含 Windows 标头
*   [`NOMSG`](https://stackoverflow.com/questions/1394910/how-to-tame-the-windows-headers-useful-defines)在 include 之前定义宏`<windows.h>`——这将抑制各种与消息相关的函数和宏的声明
*   `#undef GetMessage`在你的班级定义之前
*   将您的功能重命名为其他名称

# layout - Razorpad 示例和教程

> ID：14322810
> 
> 赞同：2
> 
> 时间：2013-01-14T16:46:58.360
> 
> 标签：layout, razor, viewbag

有人可以给我一些关于使用 Razorpad 的好教程（[http://docs.razorpad.net/index.html](http://docs.razorpad.net/index.html)）吗？如何指定 _layout.cshtml、@model、诸如`@Url.Content`、`@RenderBody()`、`@ViewBag`等帮助程序`@Layout`都在抛出错误。

文档很差。

提前致谢。

# django - Django 错误配置

> ID：14322811
> 
> 赞同：1
> 
> 时间：2013-01-14T16:47:03.967
> 
> 标签：django, apache

我正在尝试使用 apache webserver 在 RedHat5.6 服务器上以生产模式部署[mayan-edms](http://www.mayan-edms.com)一个 django web 应用程序。

我已经设置了数据库并使用了虚拟环境来设置环境

这是我的 httpd.conf

```
WSGIScriptAlias /mayan /var/www/mayan/mayan/wsgi/dispatch.wsgi
WSGIPythonPath /var/www/mayan/mayan:/var/www/mayan/lib/python2.6/site-packages
<Directory /var/www/mayan/mayan>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

如果我用这个 conf 启动 apache，我会收到 500 错误。谁能告诉我它在哪里配置错误？

这是错误

```
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48] mod_wsgi (pid=21715): Exception occurred processing WSGI script '/var/www/mayan/mayan/wsgi/dispatch.wsgi'.
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48] Traceback (most recent call last):
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]   File "/var/www/mayan/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 250, in __call__
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]     self.load_middleware()
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]   File   "/var/www/mayan/lib/python2.6/site-packages/django/core/handlers/base.py", line 45, in load_middleware
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]     mod = import_module(mw_module)
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]   File "/var/www/mayan/lib/python2.6/site-packages/django/utils/importlib.py", line 35, in import_module
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]     __import__(name)
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]   File "/var/www/mayan/mayan/apps/common/__init__.py", line 17
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]      from .conf.settings import (AUTO_CREATE_ADMIN, AUTO_ADMIN_USERNAME,
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]           ^
[Mon Jan 14 12:47:02 2013] [error] [client 130.229.146.48]  SyntaxError: invalid syntax 
```

这是我在第 17 行的 init.py

```
from django.db import transaction,  DatabaseError 
from navigation.api import register_links, register_top_menu 
from .conf.settings import (AUTO_CREATE_ADMIN, AUTO_ADMIN_USERNAME, AUTO_ADMIN_PASSWORD, TEMPORARY_DIRECTORY) 
from .conf import settings as common_settings
from .utils import validate_path 
from .models import AutoAdminSingleton 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:58:16.240

听起来像是 Python 版本的问题。RHEL 5.6 似乎是一个相当老的版本，而且无论如何 Red Hat 以捆绑旧版本的 Python 而闻名。查看[此表](http://distrowatch.com/table.php?distribution=redhat)，该版本的 RHEL 似乎甚至不是 Python 2.4。

另一方面，运行当前 Django 版本的最低 Python 版本是 2.7。尽管如此，您的应用程序的 requirements.txt 文件实际上要求使用 Django 1.3.5 - 但您仍然至少需要 Python 2.6。您需要自己编译和安装该版本，或者升级您的 Red Hat 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:02:01.053

您正在使用 python 2.6，安装[文档](https://mayan.readthedocs.org/en/latest/intro/installation.html)似乎使用 python 2.7

# scala - 有没有关于 Scala 2.10 的反射 API 的教程？

> ID：14322819
> 
> 赞同：22
> 
> 时间：2013-01-14T16:47:40.197
> 
> 标签：scala, reflection, scala-2.10

有没有一个好地方可以获得 Scala 2.10 的反射 API 的完整教程？我看到在过去两年中写了很多博客文章，但是这些文章的许多细节已经过时了。

现在 2.10 已经公开发布，是否有任何文档可以指导我了解反射的工作原理？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T22:22:13.680

[在http://docs.scala-lang.org/overviews/reflection/overview.html](http://docs.scala-lang.org/overviews/reflection/overview.html)查看官方反射指南。非常感谢花时间组装它的 Heather Miller！

其他可用资源包括：1)[我的一次演讲中的幻灯片](http://scalamacros.org/talks/2012-04-28-MetaprogrammingInScala210.pdf)，2) [Daniel Sobral 的博客文章](http://dcsobral.blogspot.ch/2012/08/json-serialization-with-reflection-in.html)，3) 可通过上面提供的 URL 访问的存根页面上的 Scaladoc 链接，4) 和 Stack Overflow 答案。我可能在这里遗漏了一些东西，如果是这样，请告诉我。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T17:05:59.583

Eugene Burmako的[这些幻灯片是 2.10 中反射和宏背后的负责人](http://scalamacros.org/talks/2012-04-28-MetaprogrammingInScala210.pdf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T17:37:23.717

当您在 Scala 文档站点中搜索它时，会出现一些链接，但并不多。

[http://docs.scala-lang.org/search.html?q=reflection](http://docs.scala-lang.org/search.html?q=reflection)

# git - sed: 解析 git --line-porcelain 输出

> ID：14322824
> 
> 赞同：1
> 
> 时间：2013-01-14T16:48:04.597
> 
> 标签：git, sed, blame

这与[这个问题有关](https://stackoverflow.com/questions/14142609/git-discover-which-commits-ever-touched-a-range-of-lines/14300601#14300601)，但我认为它需要一个单独的问题。

`git blame --line-porcelain`的输出是这样的

```
27ce485030bf872158ceb011e6bd775d2ead5eeb 9 36 1
author Joao Tavora
author-time 1358179206
committer Joao Tavora
committer-time 1358179206
summary initial commit
boundary
filename test.el
    (defun AB (space task next.task)
242020d0de6363d48d32465299d07239f0a9940f 19 37 1
author Joao Tavora
author-time 1358179709
committer Joao Tavora
committer-time 1358179709
summary reinstate declare
previous 11da1748d905aa9520ee3d6d9ac6a8712db0040f test.el
filename test.el
      (declare (ignore space))
cbfa1ec071dd30a27be82dd041ccc9c384e5ff60 11 38 2
author Joao Tavora
author-time 1358179273
committer Joao Tavora
committer-time 1358179273
summary use thingy
previous 69af7ace6e2b6c006c86e4fd91bf3c15ff8cec07 test.el
filename test.el
      (if (and (some.task.p (task (IP.TASK-thingy task))) 
```

我将如何使用 sed（或 grep 或 awk）解析来过滤掉提交 sha 和提交时间？在上面的示例中，它应该产生：

```
27ce485030bf872158ceb011e6bd775d2ead5eeb 1358179206
242020d0de6363d48d32465299d07239f0a9940f 1358179709
cbfa1ec071dd30a27be82dd041ccc9c384e5ff60 1358179273 
```

我宁愿不依赖 ruby​​，尽管 perl 单线可能没问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:42:24.687

这可能对您有用（GNU sed）：

```
sed -r '/^[0-9a-f]{40}\b/!d;:a;/\ncommitter-time\b/bb;$!{N;ba};:b;s/\s+.*(\s.*)/\1/' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:32:14.490

这可能是完全错误的事情，但试试这个：

```
git shortlog --format="%H %ct" -- <filename> 
```

您可能还想`tail -n +2`在命令后用管道切断前几行。当然，这不会显示逐行更改，但我不确定您想要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:54:18.177

我发现

```
git blame -l -e -t -- file-to-blame | awk '{print $1 " " $3}' 
```

几乎解决了我的问题，但我认为这样做是为了作者时间。我真的很想学习解析`--line-porcelain`输出。

# php - preg_match_all 字母+重音，但不是数字

> ID：14322830
> 
> 赞同：1
> 
> 时间：2013-01-14T16:48:16.663
> 
> 标签：php, regex, preg-match-all, regex-negation

我想使用 PHP 的 preg_match_all 来捕获包含以下内容的子字符串：

*   AZ, az, 所有重音字符；
*   空间;
*   连字符。

它不能捕获包含其他任何内容的字符串，包括数字字符。

这个例子很接近，但也捕获了包含数字字符的字符串：

```
preg_match_all("/([\w -]+)/u", $abigstring, $matches); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:51:52.687

这是 Unicode 属性的工作：

```
preg_match_all("/([\p{L} -]+)/u", $abigstring, $matches); 
```

`\p{L}`匹配具有 Unicode 属性“字母”的任何字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T07:10:59.580

这也是一个选项：

```
preg_replace("/[^A-Za-zÀ-ÿ -]+/u", "", "juana 123456 sfdf 423 999 _ -a- dsa & ç%& à à$¨à+", -1); 
```

这是一个工作示例-> [https://xrg.es/#17hyhfm](https://xrg.es/#17hyhfm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T10:33:33.143

对于那些想要的人，这里是对上面代码的更正，它不起作用！

```
preg_match("/^([\p{L} -]+)$/u", $string) 
```

缺少锚点（^ 和 $）

编辑：好多了。如果连字符/空格只允许在中间：

```
/^([\p{L}](?:[\p{L} -]+[\p{L}])?)$/u 
```

# php - 如何使用 PHP 获取活跃用户列表？

> ID：14322833
> 
> 赞同：2
> 
> 时间：2013-01-14T16:48:30.947
> 
> 标签：php, mysql, sql

我目前维护一个用户数据库表，登录后我用他们的 ID 和 login_time 更新表。这在一定程度上有效，但目前我无法判断用户自登录以来是否一直处于活动状态或持续了多长时间。

有没有更好的方法来获取过去 X 分钟内活跃的用户的完整列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T16:51:42.193

获得所需内容的最佳方法是用户表中的“上次活动”列。每当用户访问页面时，您只需更新它。根据您需要的信息，它可以替换该`login_time`列，也可以是一个新列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:53:59.780

您必须跟踪用户在您的数据库中作为单独的表或列发出最后一次请求的时间。然后，您可以制定一个查询来选择，例如在过去 5 分钟内发出请求的所有用户。

PHP 本身不存储或关心此类信息。除非您碰巧拥有自己的会话管理模块来存储此类信息，否则您可以使用其中的数据。

# web-scraping - 获取reddit数据

> ID：14322834
> 
> 赞同：24
> 
> 时间：2013-01-14T16:48:33.630
> 
> 标签：web-scraping, reddit

我有兴趣从不同的 reddit subreddits 获取数据。有谁知道是否有类似 twitter 的 reddit/其他 api 来抓取所有页面？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-14T17:56:57.820

是的，reddit 有一个 API 可用于各种目的，例如数据收集、自动评论机器人，甚至可以协助 subreddit 审核。

有几个地方可以发现有关 reddit API 的信息：

*   [github reddit wiki](https://github.com/reddit/reddit/wiki/API) -- 提供使用 reddit API 的概述和规则（遵循规则）
*   [自动生成的 API 文档](http://www.reddit.com/dev/api)——提供访问*大多数*API 端点所需的请求信息
*   [/r/redditdev](http://www.reddit.com/r/redditdev) -- reddit 社区致力于回答有关 reddit 源代码和有关 reddit API 的问题

如果您已经熟悉某种特定的编程语言，您应该查看针对各种语言的[现有 API 包装器集。](https://github.com/reddit/reddit/wiki/API-Wrappers)尽管我有偏见（我是包维护者），但我很确定[PRAW](https://github.com/praw-dev/praw/wiki)对于 python 支持最多的 reddit API 功能。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-06-26T22:02:01.020

请注意，如果您只是读取数据，并且对回发到 reddit 不感兴趣，那么您可以从与每个 subreddit 关联的 json 提要中获得相当多的数据。使用这种方法，您根本不需要担心 API ——您只需请求相关的 json 文件并用您选择的语言对其进行解析。

这是一个示例 URL，它将返回一个 json 对象，其中包含来自 Justrolledintotheshop 子版块的热门帖子： [https ://www.reddit.com/r/Justrolledintotheshop/top.json](https://www.reddit.com/r/Justrolledintotheshop/top.json)

`hot`您可以使用、`new`或代替顶部`controversial`。使用 top 时，您可以添加`?t=day`到 url 的末尾以指定当天的置顶帖子。其他有效值为`hour`、`day`、`week`、`month`、`year`或`all`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T11:14:17.210

使用**ajax/javascript解析来自****reddit**的JSON 数据。

 **Reddit为 GET 请求启用了**CORS 。**

这里作为示例，以 JSON 格式解析 reddit 中的最后一个**视频**：

```
xhr = new XMLHttpRequest
xhr.open("GET","https://www.reddit.com/r/videos/.json",true)
xhr.send(null)
xhr.onreadystatechange = function() {
  if(this.status === 200) {
    console.log(JSON.parse(xhr.responseText))
  }
}
```

[https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest](https://developer.mozilla.org/fr/docs/Web/API/XMLHttpRequest)

要更深入，请查看以下问题：

[无需重新加载页面即可更改 youtube 视频 ID](https://stackoverflow.com/questions/49138693/change-youtube-video-id-without-page-reloading)**

# titanium - Appcelerator Alloy - 需要 Android 菜单

> ID：14322836
> 
> 赞同：0
> 
> 时间：2013-01-14T16:48:34.870
> 
> 标签：titanium, appcelerator, require, appcelerator-mobile, android-menu

我在使用 Alloy 时遇到了 Require src="menu" 问题。当我想通过 Require XML-Tag 导入菜单时出现编译错误。

我的菜单.xml：

```
<Alloy>
<Menu id="menu">
    <MenuItem onClick="doSomething" title="Item 1">
    <MenuItem onClick="doSomething" title="Item 2">
    <MenuItem onClick="doSomething" title="Item 3">
    <MenuItem onClick="doSomething" title="Item 4">
</Menu>
</Alloy> 
```

我的 index.xml：

```
<Alloy>
    <Window id="index">
        ....a tableview or something...
        <Require src="menu">
    </Window>
</Alloy> 
```

现在，当我编译时，我得到：

```
[ERROR] Alloy compile failed
[ERROR] Application Installer abnormal process termination. Process exit value was 1 
```

和上面的几行：

```
TypeError: Cannot read property 'nodeName' of undefined 
```

然而，

如果我将菜单直接放入 index.xml，一切都编译得很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:58:01.663

尝试用 Window 标签包装它，如下所示：

```
<Alloy>
    <Window>
        <Menu id="menu">
            <MenuItem id="menu1" onClick="doSomething" />
            <MenuItem id="menu2" onClick="doSomethingElse" />
        </Menu>
    </Window>
</Alloy> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T17:56:18.430

你的 menu.js 文件在哪里？这就是 require 命令要查找的内容，而不是 XML 文件

# actionscript-3 - £ 和其他符号未显示

> ID：14322837
> 
> 赞同：0
> 
> 时间：2013-01-14T16:48:35.827
> 
> 标签：actionscript-3

我使用 Mariad Pro 作为字体。它确实支持符号“£”。我已经尝试使用它的 ASCII (String.fromCharCode()) 将它放在文本字段中，并且我尝试直接嵌入它。在闪光灯里面它工作正常。但是当我运行它时，我看到了除了符号之外的其余文本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:50:01.047

似乎没有嵌入这个符号。为确保它已嵌入，请将其添加到 Flash IDE 字体嵌入窗口中的“还包括此字符：”：![在此处输入图像描述](../Images/5b11db436230f784eee512d0de6cf711.png)

[这里](https://dl.dropbox.com/u/77217007/stackoverflow/embed_font_example.fla)是 flash cs6 的工作示例

# clojure - Clojure :: (String/format "%s" "a") :: 失败并出现 ClassCastException

> ID：14322839
> 
> 赞同：5
> 
> 时间：2013-01-14T16:48:39.767
> 
> 标签：clojure

以下调用：

```
(String/format "%s" "a") 
```

...在 Clojure 中引发“ClassCastException java.lang.String 无法转换为 [Ljava.lang.Object”异常。

```
(String/format "%s" (cast Object "a")) 
```

....产生相同的异常。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T17:00:16.020

因为 java API 中的最后一个参数是数组`Object[]`而不是`Object`.

打电话`(String/format "%s" (into-array ["a"]))`

但更习惯使用`(format "Hello %s" "world")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T16:53:50.447

[L 表示“我想要数组”，所以使用`(String/format "%s" (to-array "a"))`. 一般语法：`(to-array ["a" 42 0.666]).`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T16:55:25.547

[`String.format`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)正在使用可变参数，它们是内部普通的 Java 数组。然后，您需要将输入参数转换为数组，例如使用`to-array`：

```
user=> (String/format "%s" (to-array "a"))
"a" 
```

# paymill - Paymill：如何查看订阅交易？

> ID：14322840
> 
> 赞同：0
> 
> 时间：2013-01-14T16:48:48.763
> 
> 标签：paymill

[Paymill](https://www.paymill.com/en-gb/)：给定一个订阅，`curl`列出与该订阅相关的交易的命令是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:13:54.823

目前，您无法列出特定订阅的事务，但您可以通过将“？client=CLIENT_ID”添加到“列出事务”端点来列出客户端的事务。像这样：

`curl https://api.paymill.de/v2/transactions?client=client_1b6b8b4003603f1f3cbd \ -u 319ffd1f1d10766e59350568170e8c70:`

如果您运行此命令，您将获得 2 笔交易。如果您删除“客户端”查询字符串部分，您将获得 3 个事务。

请注意，所有订阅交易的描述都以“Subscription#”开头，其中包含订阅 ID (sub_ef984bab97c253a0a372)。因此，您可以过滤与这些条件中的一个（或全部）匹配的条件。

# entity-framework - 添加后 DbSet.Local 为空

> ID：14322849
> 
> 赞同：0
> 
> 时间：2013-01-14T16:49:17.960
> 
> 标签：entity-framework

我是实体框架的新手。我想在调用之前查询对象`SaveChanges()`。我搜索了一下，发现我应该使用`Dbset.Local`. 但我的查询总是返回 null。这是我的代码。

我在这里添加上下文：

```
DB.RFH_ComplexRequestPersons.Add(person); 
```

并在这里查询：

```
var model = DB.RFH_ComplexRequestPersons.Local.Where(d => d.FKComplexRequestID == requestID); 
```

顺便说一下，DB 是我的上下文。

# javascript - 为什么我的变量会改变值？

> ID：14322852
> 
> 赞同：0
> 
> 时间：2013-01-14T16:49:24.857
> 
> 标签：javascript, jquery

我有一个简单的[jsfiddle](http://jsfiddle.net/a9kG8/3/)，我可以在其中获取 div 的值。

在该`$(document).ready(function(){})`部分中，我得到了 div 的文本就好了。当我稍后在函数中尝试使用该值时，该值会发生变化（除非我添加`.innerHTML`）。为什么该变量的值会发生变化？换句话说，为什么我`.innerHTML`稍后调用该变量时需要添加？

谢谢！

```
<div id="my_div">1</div>

// Javascript/JQuery

$(document).ready(function(){ 
    var my_div = $("#my_div").text();

        alert(my_div);

        func();
    });

function func(){    
    alert(my_div); // why does the value change here...why???
        alert(my_div.innerHTML); // why do I need ".innerHTML' here???
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:50:24.867

该值会更改，因为您没有请求 div 的任何特定“功能”。你只是想提醒一个元素......

首先，您已经在函数内部分配了 my_div。如果将 移到`var my_div`函数外部，它将成为全局变量，而不是局部变量。

编辑小提琴：[这里](http://jsfiddle.net/RzuZ2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:51:19.713

因为您声明 my_div 不在全局范围内。

你应该这样做：

```
var my_div;
$(document).ready(function(){ 
    my_div = $("#my_div").text();

    alert(my_div);

    func();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T16:54:32.260

这是因为默认情况下，所有具有 ID 的元素都是全局范围的属性。

所以基本上`my_div`在你`function func()`的调用中是一样的`window.my_div`。

尝试删除`var my_div = $("#my_div").text()`，您仍然可以在`func()`.

这个问题是相关的[Do DOM tree elements with ids become global variables？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T16:54:42.177

```
$(document).ready(function(){ 
var my_div = $("#my_div").text();

    alert(my_div);

    func(my_div);
});

function func(my_div){    
    alert(my_div); // why does the value change here...why???
}; 
```

您需要传递对 my_div 的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T16:57:59.320

当您执行以下操作时：

```
function func(){    
    alert(my_div); // why does the value change here...why???
    alert(my_div.innerHTML); // why do I need ".innerHTML' here???
}; 
```

`my_div`您可以通过它的 id ( )获得一个 html 元素。
为什么 ？因为`my_div`ins 没有声明为全局。
这就是为什么当你提醒你得到一个对象时。

尝试使用其他名称运行您的代码`my_div`，例如：

```
$(document).ready(function(){ 
    var div = $("#my_div").text();

    alert(my_div);

    func();
});

function func(){
    alert(div);
    alert(div.innerHTML);
}; 
```

您将看到您收到以下错误：

```
Uncaught ReferenceError: div is not defined 
```

# asp.net-mvc - 路由值已删除，但仍作为查询字符串参数添加

> ID：14322856
> 
> 赞同：2
> 
> 时间：2013-01-14T16:49:45.963
> 
> 标签：asp.net-mvc

我正在扩展一个模型以包含一个链接属性。它基于其中的其他属性来生成链接：

```
public partial class MyModelType
{
    public string FilterLink
    {
        get
        {
            var u = new UrlHelper(HttpContext.Current.Request.RequestContext);
            var route = new RouteValueDictionary(u.RequestContext.RouteData.Values);
            route.Remove("other");
            route.Add("other", null);
            route.Add("id", this.Id);
            return u.Action("Index", "ControllerName", route);
        }
    }
} 
```

生成的链接是`/ControllerName/1?other=2`. 如果我摆脱了`route.Remove("other")`基于映射路线的链接：`/ControllerName/1/2`. 当它从路由中删除时，如何防止它被用作查询字符串参数？UrlHelper 似乎以某种方式添加它，即使它不是路由值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T18:09:21.577

这个问题在这里讨论：http: [//erraticdev.blogspot.com/2011/03/removing-route-values-from-linksurls-in.html](http://erraticdev.blogspot.com/2011/03/removing-route-values-from-linksurls-in.html)

然而，与评论中的一个简单解决方案相比，博客的提议令人费解：将“other = null as object”添加到您的 DEFAULT 路由的默认值中。

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, other = null as object }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T06:53:27.373

检查您的路由配置。

MVC 路由将以这种方式附加您路由的任何未知部分，因此只要您预先定义它就可以正常工作。

你可能只有这个：

```
 routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

尝试添加`option`这样的：

```
 routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}/{option}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional, option = UrlParameter.Optional }
    ); 
```

# python - 通过 socketserver 接收多条消息但发送了一条

> ID：14322861
> 
> 赞同：1
> 
> 时间：2013-01-14T16:50:13.673
> 
> 标签：python, sockets, pygame

一个有两个线程的应用程序。它是一个网络控制的游戏，

*1.线程（服务器）*

*   接受套接字连接并接收消息
*   发送消息时，创建一个事件并将其添加到队列中

代码：

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    def handle(self):
        try:
            while True:
                sleep(0.06)
                message = self.rfile.readline().strip()              
                my_event = pygame.event.Event(USEREVENT, {'control':message})
                print message
                pygame.event.post(my_event) 
```

*2.线程（pygame）*

*   负责游戏渲染
*   通过服务器填充的事件队列接收消息
*   每 60 毫秒根据消息渲染游戏

这就是游戏的外观。控制消息只是小方块的速度。

![在此处输入图像描述](../Images/6e0ee1d7c809ed8dfa24896909c0b682.png)

为了调试，我从虚拟机连接到服务器：

```
ncat 192.168.56.1 2000 
```

然后发送控制消息。在生产中，这些消息将由 Android 设备每 50 毫秒发送一次。

**问题**

在我的调试环境中，我以几秒钟的时间手动键入消息。在此期间，我不输入任何内容，游戏被渲染了很多次。发生的事情是`message`（在服务器代码中）不断地用先前接收到的值呈现。

我发送以下内容：

```
1:0.5 
```

在启动应用程序的控制台上，由于`print message`服务器代码中的行，我收到以下信息：

```
alan@alan ~/.../py $ python main.py 
1:0.5 
```

游戏所做的是它不断地接收这个值（随着它呈现的时间段，而不是我输入的每隔几秒）接收这个值。

因为那是发生的，我希望`print message`which is in`while True`也不断输出，并且输出是：

```
alan@alan ~/.../py $ python main.py 
1:0.5
1:0.5
1:0.5
1:0.5
.... 
```

然而事实并非如此。请告知（如果解释性不够，我也愿意建议将主题更改为什么）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:16:03.547

您的`while True`循环正在轮询套接字，它只会在发送消息时获取消息；它不知道也不关心下游事件消费者对这些消息做了什么，它只是每 0.6 秒为套接字队列分派一个事件并打印下一条记录的内容。如果您希望游戏在每个渲染循环中打印当前命令，则必须将`print`语句放在渲染循环本身中，而不是在套接字轮询器中。此外，由于您似乎希望最后一个命令“坚持”并且不发布新事件，除非用户实际输入某些内容，您可能想要放置一个`if message:`阻止您在此处拥有的套接字处理程序中的事件调度代码。现在，如果用户自您上次检查后未向您提供任何输入，您将每 0.6 秒发送一个空事件。

我也不认为`sleep`在您的套接字处理程序中放置一个 或您拥有的循环可能是不可取的。这`SocketServer`每次你在套接字上接收数据时都会调用它，所以这个循环实际上是为你完成的，我认为这里所做的一切都是让你打开缓冲区溢出。如果您想控制向 pygame 发布事件的频率，您可能希望通过阻止添加某种类型的事件（如果已经有 1 个排队）或通过从队列中获取给定类型的所有事件来做到这一点。游戏循环，然后忽略除第一个或最后一个之外的所有内容。您也可以通过检查处理程序来控制它，如果自最后一个事件发布以来已经有一段时间了，但是您必须确保事件使用者能够处理一个事件队列，其中有多个事件在等待它，并且在需要时进行适当的队列刷新。

编辑：

[文档](http://docs.python.org/2/library/socketserver.html#socketserver-tcpserver-example)：

> 不同之处在于第二个处理程序中的 readline() 调用将多次调用 recv() 直到遇到换行符，而第一个处理程序中的单个 recv() 调用将只返回从客户端发送的内容sendall() 调用。

所以是的，保证阅读整行。事实上，我也不认为这`try`是必要的，因为除非有输入要处理，否则它甚至不会被调用。

# apache2 - 配置一个处理特定子域（或目录）的虚拟主机和另一个捕获所有其他虚拟主机

> ID：14322865
> 
> 赞同：0
> 
> 时间：2013-01-14T16:50:21.613
> 
> 标签：apache2, subdomain, virtualhost

我想用自己的 DocumentRoot 为 subdomain.mydomain.tld 配置一个 VirtualHost。和另一个拥有自己 DocumentRoot 的 VitualHost 捕获所有其他人。

我试过

```
<VirtualHost *:80>
    ServerAlias subdomain.mydomain.tld
...
</VirtualHost >

<VirtualHost *:80>
    ServerAlias *.mydomain.tld mydomain.tld
...
</VirtualHost > 
```

它没有正常工作......

还有其他建议吗？如果没有办法解决这个问题，我想将一个虚拟主机映射到 mydomain.tld 的子文件夹，让其他虚拟主机处理其余的，但不知道如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:00:17.403

如果您不指定[ServerName](http://httpd.apache.org/docs/2.2/mod/core.html#servername)，apache 可能会对应该使用哪个 vhost 来服务请求感到有些困惑。

尝试如下弹出 ServerName

```
<VirtualHost *:80>
    ServerName subdomain.mydomain.tld
...
</VirtualHost >

<VirtualHost *:80>
   ServerName mydomain.tld 
   ServerAlias *.mydomain.tld 
...
</VirtualHost > 
```

# objective-c - 嵌套 NSArray 中的 indexOfPath 不正确

> ID：14322866
> 
> 赞同：-3
> 
> 时间：2013-01-14T16:50:23.750
> 
> 标签：objective-c, arrays, nsarray

我有一个嵌套`NSArray`

```
int row = [myarray indexOfObject:module]; 
```

并且该`indexOfObject`方法返回错误的结果。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:57:23.297

这通常发生在对象`module`或其中一个对象`NSArray`没有`isEqual:`正确实现该方法时。确保那个`module`类有这个方法

```
- (BOOL)isEqual:(id)anObject {
    ...
} 
```

`YES`当此对象等于 时，该方法返回，否则`anObject`返回。`NO`

# c# - WCF C# .NET 等效于 PHP 文件获取图像上的内容以与 iOS 一起使用

> ID：14322869
> 
> 赞同：0
> 
> 时间：2013-01-14T16:50:39.777
> 
> 标签：c#, .net, ios, wcf

我目前有一个 PHP 脚本，它给出了服务器上图像的路径，将图像转换为数据流并回显该字符串。

```
<?php
$path = htmlspecialchars{$_POST['URL']);
    $img = file_get_contents($path);
    echo $img;
?> 
```

然后我使用来自 PHP 的响应将数据流转换为 iOS 中的图像，如下所示：

```
NSData *pictureData = [data getPicture:currentPerson.picture_URL];
personPicture = [UIImage imageWithData:pictureData]; 
```

如何在 C# 中完成相同的任务而无需在 iOS 端更改太多代码。目前我知道如何使用用 .NET C# 编写的 WCF 服务返回 JSON 对象。但是，我无法弄清楚如何像在 PHP 中那样返回数据流。

还有什么方法可以使这个过程更安全吗？

- 编辑 -

当前不起作用的实现：

```
[OperationContract]
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest, UriTemplate = "/picture/{path}")]
string GetPictureMethod(string path);

public string GetPictureMethod(string path)
{
   path = "(test path here)";
   string picData = System.IO.File.ReadAllText(path);
   return picData;
} 
```

执行 `NSLog(@"Data: %@", data) 会得到以下结果：

```
Picture data: <efbbbf3c 3f786d6c 20766572 73696f6e 3d22312e 30222065 6e636f64 696e673d 22757466 2d38223f 3e0d0a3c 21444f43 54595045 2068746d 6c205055 424c4943 20222d2f 2f573343 2f2f4454 44205848 544d4c20 312e3020 5472616e 73697469 6f6e616c 2f2f454e 22202268 7474703a 2f2f7777 772e7733 2e6f7267 2f54522f 7868746d 6c312f44 54442f78 68746d6c 312d7472 616e7369 74696f6e 616c2e64 7464223e 0d0a3c68 746d6c20 786d6c6e 733d2268 7474703a 2f2f7777 772e7733 2e6f7267 2f313939 392f7868 746d6c22 3e0d0a20 203c6865 61643e0d 0a202020 203c7469 746c653e 53657276 6963653c 2f746974 6c653e0d 0a202020 203c7374 796c653e 424f4459 207b2063 6f6c6f72 3a202330 30303030 303b2062 61636b67 726f756e 642d636f 6c6f723a 20776869 74653b20 666f6e74 2d66616d 696c793a 20566572 64616e61 3b206d61 7267696e 2d6c6566 743a2030 70783b20 6d617267 696e2d74 6f703a20 3070783b 207d2023 636f6e74 656e7420 7b206d61 7267696e 2d6c6566 743a2033 3070783b 20666f6e 742d7369 7a653a20 2e373065 6d3b2070 61646469 6e672d62 6f74746f 6d3a2032 656d3b20 7d20413a 6c696e6b 207b2063 6f6c6f72 3a202333 33363639 393b2066 6f6e742d 77656967 68743a20 626f6c64 3b207465 78742d64 65636f72 6174696f 6e3a2075 6e646572 6c696e65 3b207d20 413a7669 73697465 64207b20 636f6c6f 723a2023 36363939 63633b20 666f6e74 2d776569 6768743a 20626f6c 643b2074 6578742d 6465636f 72617469 6f6e3a20 756e6465 726c696e 653b207d 20413a61 63746976 65207b20 636f6c6f 723a2023 33333636 39393b20 666f6e74 2d776569 6768743a 20626f6c 643b2074 6578742d 6465636f 72617469 6f6e3a20 756e6465 726c696e 653b207d 202e6865 6164696e 6731207b 20626163 6b67726f 756e642d 636f6c6f 723a2023 30303333 36363b20 626f7264 65722d62 6f74746f 6d3a2023 33333636 39392036 70782073 6f6c6964 3b20636f 6c6f723a 20236666 66666666 3b20666f 6e742d66 616d696c 793a2054 61686f6d 613b2066 6f6e742d 73697a65 3a203236 70783b20 666f6e74 2d776569 6768743a 206e6f72 6d616c3b 6d617267 696e3a20 30656d20 30656d20 31307078 202d3230 70783b20 70616464 696e672d 626f7474 6f6d3a20 3870783b 20706164 64696e67 2d6c6566 743a2033 3070783b 70616464 696e672d 746f703a 20313670 783b7d20 70726520 7b20666f 6e742d73 697a653a 736d616c 6c3b2062 61636b67 726f756e 642d636f 6c6f723a 20236535 65356363 3b207061 6464696e 673a2035 70783b20 666f6e74 2d66616d 696c793a 20436f75 72696572 204e6577 3b206d61 7267696e 2d746f70 3a203070 783b2062 6f726465 723a2031 70782023 66306630 65302073 6f6c6964 3b207768 6974652d 73706163 653a2070 72652d77 7261703b 20776869 74652d73 70616365 3a202d70 72652d77 7261703b 20776f72 642d7772 61703a20 62726561 6b2d776f 72643b20 7d207461 626c6520 7b20626f 72646572 2d636f6c 6c617073 653a2063 6f6c6c61 7073653b 20626f72 6465722d 73706163 696e673a 20307078 3b20666f 6e742d66 616d696c 793a2056 65726461 6e613b7d 20746162 6c652074 68207b20 626f7264 65722d72 69676874 3a203270 78207768 69746520 736f6c69 643b2062 6f726465 722d626f 74746f6d 3a203270 78207768 69746520 736f6c69 643b2066 6f6e742d 77656967 68743a20 626f6c64 3b206261 636b6772 6f756e64 2d636f6c 6f723a20 23636563 6639633b 7d207461 626c6520 7464207b 20626f72 6465722d 72696768 743a2032 70782077 68697465 20736f6c 69643b20 626f7264 65722d62 6f74746f 6d3a2032 70782077 68697465 20736f6c 69643b20 6261636b 67726f75 6e642d63 6f6c6f72 3a202365 35653563 633b7d3c 2f737479 6c653e0d 0a20203c 2f686561 643e0d0a 20203c62 6f64793e 0d0a2020 20203c64 69762069 643d2263 6f6e7465 6e74223e 0d0a2020 20202020 3c702063 6c617373 3d226865 6164696e 6731223e 53657276 6963653c 2f703e0d 0a202020 2020203c 703e4d65 74686f64 206e6f74 20616c6c 6f776564 2e3c2f70 3e0d0a20 2020203c 2f646976 3e0d0a20 203c2f62 6f64793e 0d0a3c2f 68746d6c 3e> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:50:51.773

要返回数据流，您需要将数据作为 a 返回`Stream`，而不是作为`string`. 如果您将数据作为字符串返回，它将作为该字符串的 JSON 编码表示返回。

```
[OperationContract]
[WebGet(BodyStyle = WebMessageBodyStyle.WrappedRequest,
        UriTemplate = "/picture/{path}")]
System.IO.Stream GetPictureMethod(string path);

public System.IO.Stream GetPictureMethod(string path)
{
    path = "(test path here)";
    byte[] picData = System.IO.File.ReadAllBytes(path);
    WebOperationContext.Current.OutgoingResponse.ContentType = "image/jpeg"; // or the correct type
    return new System.IO.MemoryStream(picData);
} 
```

顺便说一句，您应该使用`[WebGet]`而不是`[WebInvoke(Method = "GET")]`.

**更多数据**：您拥有的 NSData 相当于下面的代码。您应该首先尝试使用诸如浏览器或 Fiddler 之类的工具访问 WCF 服务，以检查您是否获得了数据。只有这样你才应该尝试从`NSData`.

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Service</title>
    <style>BODY { color: #000000; background-color: white; font-family: Verdana; margin-left: 0px; margin-top: 0px; } #content { margin-left: 30px; font-size: .70em; padding-bottom: 2em; } A:link { color: #336699; font-weight: bold; text-decoration: underline; } A:visited { color: #6699cc; font-weight: bold; text-decoration: underline; } A:active { color: #336699; font-weight: bold; text-decoration: underline; } .heading1 { background-color: #003366; border-bottom: #336699 6px solid; color: #ffffff; font-family: Tahoma; font-size: 26px; font-weight: normal;margin: 0em 0em 10px -20px; padding-bottom: 8px; padding-left: 30px;padding-top: 16px;} pre { font-size:small; background-color: #e5e5cc; padding: 5px; font-family: Courier New; margin-top: 0px; border: 1px #f0f0e0 solid; white-space: pre-wrap; white-space: -pre-wrap; word-wrap: break-word; } table { border-collapse: collapse; border-spacing: 0px; font-family: Verdana;} table th { border-right: 2px white solid; border-bottom: 2px white solid; font-weight: bold; background-color: #cecf9c;} table td { border-right: 2px white solid; border-bottom: 2px white solid; background-color: #e5e5cc;}</style>
  </head>
  <body>
    <div id="content">
      <p class="heading1">Service</p>
      <p>Method not allowed.</p>
    </div>
  </body>
</html> 
```

# android - 更改组合框的值时出现检查板工件并停止滚动

> ID：14322877
> 
> 赞同：1
> 
> 时间：2013-01-14T16:50:50.747
> 
> 标签：android, html, jquery-mobile

1.  **手机**：三星 Galaxy S
2.  **固件**：2.3.5
3.  **内部版本号：** GINGERBREAD.UCKK4 内核：2.6.35.7-I897UCKK4-CL614489
4.  **浏览器：** 标准安卓浏览器

我有一个简单的 html 表单，一旦我更改了组合框的值，我就不能再垂直滚动并且表单变得无法使用。

此外，我的表格顶部和底部出现了一个奇怪的黑白棋盘图案。

[这是一个演示视频](https://www.youtube.com/watch?v=oC8fjgqkHAs)。它显示表单正常上下滚动。然后，我更改值，然后出现棋盘图案。

**注意**：如果我关闭显示器，然后再打开，表格将恢复正常。

我的 html 中是否有任何问题会导致这种情况：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Paleo Meal</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  <link rel="stylesheet" href=
  "http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" type="text/css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript">
</script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js" type=
  "text/javascript">
</script>
</head>

<body>
  <div id="fb-root"></div>

  <div data-role="page">
    <div data-role="header">
      <h1>Paleo Meal</h1>
    </div>

    <div data-role="fieldcontain">
      <div id="_addMealFrame" data-role="collapsible" data-mini="true" data-theme="a"
      data-collapsed="false">
        <h3 data-theme="d" id="_mealFrameText">Meal Details</h3>

        <form action="" method="post" accept-charset="utf-8" id="_profileForm" data-ajax=
        "false" enctype="multipart/form-data">
          <div data-role="fieldcontain">
            <label for="_mealDate">Date:</label><input type="text" name="meal_date"
            value="01/14/13" id="_mealDate" autocomplete="off" />
          </div>

          <div data-role="fieldcontain">
            <label for="_mealTime" class="select">Meal Time:</label><select name=
            "meal_time" id="_mealTime">
              <option value="0">
                12 am
              </option>

              <option value="1">
                1 am
              </option>

              <option value="23">
                11pm
              </option>
            </select>
          </div>

          <div data-role="fieldcontain">
            <label for="_mealType" class="select">Meal Type:</label><select name=
            "meal_type_id" id="_mealType">
              <option value="1">
                Breakfast
              </option>

              <option value="2">
                Lunch
              </option>

              <option value="3">
                Dinner
              </option>

              <option value="4">
                Snack
              </option>

              <option value="5">
                Other
              </option>
            </select>
          </div>

          <div data-role="fieldcontain">
            <a href="" id="_cancel" data-ajax="false" data-role="button" data-inline=
            "true">Cancel</a><button name="" type="submit" id="_submit" class=
            "ui-btn-hidden" value="Save" aria-disabled="false" data-inline="true"
            data-theme="b"></button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html> 
```

# javascript - Javascript 中的正则表达式来捕捉提及

> ID：14322889
> 
> 赞同：1
> 
> 时间：2013-01-14T16:51:44.857
> 
> 标签：javascript, regex

如何在 javascript 中编写一个匹配所有 twitter 喜欢提及（@something）但不匹配电子邮件地址的正则表达式。

我需要在一个巨大的文本字段中捕获无限数量的提及。应捕获在“@”之前具有不可打印字符和括号的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:01:33.237

```
/(?<!\w)@\w+/g 
```

这将是一个简单的解决方案，但由于 JavaScript 不支持[后视](http://www.regular-expressions.info/lookaround.html)，它成为一项不平凡的任务：

```
var matches = str.match(/(^|\W)@\w+/g);
for (var i=0; i<matches.length; i++)
    matches[i] = matches[i].replace(/^[^@]/, ""); 
```

如果你想支持更广泛的字符（从你的编辑），你会使用

```
/(?<![^\s(]@\S+/g // or respectively
/(^|[\s(])@\S+/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T16:55:27.927

你可以使用这个正则表达式

```
/(\s|^)@[^\s]+/ 
```

`\s`代表空间..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:04:44.803

快速 JSFiddle 为您解答：

```
var re = /\s@[\w\-]/ 
```

[或者直接点击这里](http://jsfiddle.net/Vtwdy/1/)

请注意，您可以在控制台中看到正则表达式的结果（例如 Firebug）。

# logic - 谓词逻辑和 CNF

> ID：14322890
> 
> 赞同：-2
> 
> 时间：2013-01-14T16:51:47.260
> 
> 标签：logic, artificial-intelligence, predicate, conjunctive-normal-form

一个给定的例子，两个问题，两个想法：

```
∃t ∀s learn(s, t, a) and not distracted(s) => passExam(s, a) 
```

1）在自然语言中是什么意思？

有at(opic)，当as(tudent)在a(rtificial intelligence)中了解到t(opic)并且没有分心，这个s(tudent)通过a(i)中的考试

2）它的CNF是什么？

```
not learn(G(x), F(x)) or distracted(G(x)) or passExam(G(x), a) 
```

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:17:15.880

1）这在很大程度上取决于函数和变量的定义方式，但我会假设`learn(a,b,c) := a learns topic b in area c`，另外两个根据假设定义。你基本上是对的，你只是忘记了`and aren't distracted`：

“有一个话题，所有在人工智能中学习这个话题并且不分心的学生都会通过人工智能考试。”

2) [...所有文字的析取都在 CNF 中](http://en.wikipedia.org/wiki/Conjunctive_normal_form)。所以这意味着这个例子已经在 CNF 中了。

# paymill - Paymill：我需要为订阅创建交易吗？

> ID：14322891
> 
> 赞同：0
> 
> 时间：2013-01-14T16:51:48.650
> 
> 标签：paymill

[Paymill](https://www.paymill.com/en-gb/)：如果我创建了订阅，Paymill 会自动为我创建未来的交易，还是我必须在下个月手动创建交易？

如果是自动的，如何判断交易是否成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:03:28.140

Paymill 在定义的时间段（周/月/年）之后自动为每个订阅/报价创建交易。这些交易中的每一个在其描述字段中都有订阅 ID，因此您可以找到它们。这些交易的状态表明交易是否成功。

# google-maps-api-3 - 数以千计的多边形和 IE JavaScript 语句的限制

> ID：14322902
> 
> 赞同：2
> 
> 时间：2013-01-14T16:52:21.023
> 
> 标签：google-maps-api-3

我正在编写一个需要一次显示多达 4000 个多边形的应用程序，其中一些具有数百个坐标。每个多边形都需要一个 、 和 的事件`mouseover`以及`mouseout`一个`doubleclick`信息框标签。

我最初在 IE 8 中遇到了 JavaScript 语句限制的问题。似乎 IE 将 JavaScript 限制为在单个执行块中处理 5,000,000 个 VM 语句，然后抛出一个丑陋的对话框，警告用户使用长时间运行的脚本（无论多快脚本执行。）我通过`"setTimeout"`在我的代码中放置 JavaScript 语句并将处理分成块来解决这个问题。该脚本现在在合理的时间内执行完成，而不会遇到丑陋的错误。

但是我现在遇到的问题是在我的多边形已经构建和显示之后。如果用户随后尝试缩放，则在 IE 中超过了 5,000,000 条语句限制。但是，在这种情况下，在执行 Google Maps API 代码期间达到了限制，我无法控制并且无法放入 setTimeouts 或将其分成块。

在 Chrome 和 Firefox 中，没有任何问题，并且多边形加载速度惊人地快，在几秒钟内。平移和缩放同样没有问题。

我尝试过的事情：

1) 减少 JavaScript 语句的数量。我试过让我的代码更精简。但这实际上是在 Google Maps API 代码中重新绘制多边形时发生的，所以我不确定这是否会产生影响。

2）通过要求不太准确的多边形来减少每个多边形的点数。这有点帮助，但没有解决问题。

3) 更改了 IE 的“MaxScriptStatements”注册表项以阻止 IE 使用此限制。它有效，但它不是我的应用程序的实际解决方案。

有没有其他人遇到过这个问题？

# java - Maven 3 - 如何添加注释处理器依赖项？

> ID：14322904
> 
> 赞同：33
> 
> 时间：2013-01-14T16:52:24.327
> 
> 标签：java, maven, jpa-2.0, maven-3, annotation-processing

我需要在我的项目源上运行注释处理器。注释处理器不应成为项目的传递依赖项，因为它仅用于注释处理而没有其他需要。

这是我用于此的完整（非工作）测试 pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>test</groupId>
  <artifactId>test</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>Test annotations</name>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <hibernate-jpamodelgen.version>1.2.0.Final</hibernate-jpamodelgen.version>
  </properties>
  <dependencies>
    <dependency>
      <groupId>javax</groupId>
      <artifactId>javaee-api</artifactId>
      <version>6.0</version>
      <scope>provided</scope>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <annotationProcessors>
            <annotationProcessor>
              org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor</annotationProcessor>
          </annotationProcessors>
          <debug>true</debug>
          <optimize>true</optimize>
          <source>1.6</source>
          <target>1.6</target>
          <compilerArguments>
            <AaddGeneratedAnnotation>true</AaddGeneratedAnnotation>
            <Adebug>true</Adebug>
          </compilerArguments>
        </configuration>
        <dependencies>
          <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-jpamodelgen</artifactId>
            <version>${hibernate-jpamodelgen.version}</version>
          </dependency>
        </dependencies>
      </plugin>
    </plugins>
  </build>
</project> 
```

我在插件配置中明确定义`org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor`为注释处理器以进行测试，并且我知道它不应该是必需的。

我遇到的问题是`hibernate-jpamodelgen`依赖项没有添加到编译器类路径中，因此找不到注释处理器并且构建失败。

根据这个[答案](https://stackoverflow.com/a/11245730/1030527)，我尝试将依赖项添加为构建扩展（不确定我是否理解那些应该是什么！），如下所示：

```
<extensions>
  <extension>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-jpamodelgen</artifactId>
    <version>${hibernate-jpamodelgen.version}</version>
  </extension>
</extensions> 
```

这也不会添加`hibernate-jpamodelgen`到编译器类路径中。

到目前为止，我发现唯一有效的是将依赖项添加到该`<dependencies>`部分的项目中。这有一个不幸的副作用，`hibernate-jpamodelgen`即我想避免之后添加作为传递依赖项。

我以前的工作设置使用`maven-processor-plugin`插件来实现我想要的。但是，eclipse m2e 不支持此插件，并且最新版本的`maven-compiler-plugin`now 可以正确处理多个编译器参数，因此我宁愿使用后者。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2017-01-21T09:42:13.523

[annotationProcessorPaths](https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#annotationProcessorPaths)选项可以在最新版本的 Maven 编译器插件中使用：

```
<pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.6.1</version>
            <configuration>
                <annotationProcessorPaths>
                    <annotationProcessorPath>
                        <groupId>org.hibernate</groupId>
                        <artifactId>hibernate-jpamodelgen</artifactId>
                        <version>5.2.6.Final</version>
                    </annotationProcessorPath>
                </annotationProcessorPaths>
            </configuration>
        </plugin>
    </plugins>
</pluginManagement> 
```

这样，处理器就与实际的项目依赖项分开了。如果为项目启用了注释处理，Eclipse M2E 插件也会选择此选项。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-14T16:53:59.317

将依赖项添加为[可选依赖项](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)( `<optional>true</optional>`)。这将在编译下添加依赖项，但会阻止它成为传递依赖项：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-jpamodelgen</artifactId>
  <version>${hibernate-jpamodelgen.version}</version>
  <optional>true</optional>
</dependency> 
```

如果您要在此模块中创建一个包含所有依赖项的工件（如 .war），则可以使用 .war `<scope>provided</scope>`。这既可以防止依赖项具有传递性，也可以防止依赖项包含在模块生成的工件中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-07-18T19:14:25.657

对于 JDK 10，我真的不得不有点疯狂才能让它工作，希望有人觉得这很有用

```
<jaxb.version>2.3.0</jaxb.version>
<maven.hibernate.version>5.3.2.Final</maven.hibernate.version>

<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>${maven.compiler.version}</version>
    <goals>
        <goal>compile</goal>
    </goals>
    <configuration>
        <outputDirectory>${project.build.directory}/generated-sources/annotations</outputDirectory>
        <annotationProcessorPaths>
            <annotationProcessorPath>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-jpamodelgen</artifactId>
                <version>${maven.hibernate.version}</version>
            </annotationProcessorPath>
            <annotationProcessorPath>
                <groupId>javax.xml.bind</groupId>
                <artifactId>jaxb-api</artifactId>
                <version>${jaxb.version}</version>
            </annotationProcessorPath>
        </annotationProcessorPaths>
        <annotationProcessors>
            <annotationProcessor>org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor</annotationProcessor>
        </annotationProcessors>
        <compilerArgs>
            <arg>-AaddGeneratedAnnotation=false</arg>
        </compilerArgs>
        <compilerArguments>
            <AaddGeneratedAnnotation>false</AaddGeneratedAnnotation>
            <Adebug>true</Adebug>
        </compilerArguments>
        <failOnError>true</failOnError>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-jpamodelgen</artifactId>
            <version>${maven.hibernate.version}</version>
            <optional>true</optional>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>${jaxb.version}</version>
            <type>jar</type>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-02T12:12:44.697

问题出在**3.***版本的`maven-compiler-plugin`. **它的行为与2.***版本有点不同。特别是，似乎`maven-compiler-plugin`**3.***没有将其依赖项和构建扩展添加到类路径，因为它使用 javax.tools 工具来运行编译过程。要恢复旧行为，`maven-compiler-plugin`您应该使用新的配置属性`forceJavacCompilerUse`：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<version>3.1</version>
<configuration>
    <forceJavacCompilerUse>true</forceJavacCompilerUse>
</configuration>
....
</plugin> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-23T07:01:54.947

## 请看一下[jpa-metamodels-with-maven](http://jinahya.wordpress.com/2014/03/29/jpa-metamodels-with-maven/)

对于更多的访问者，我发现 maven-compiler-plugin 3.x 系列有一些显着的变化。

我就是这样做的。（我是你链接的那个）

关键是我的解决方案不适用于那些 3.x 系列的 maven-compiler-plugin。

```
<project ...>

  <build>

    <extensions>
      <extension>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-jpamodelgen</artifactId>
        <version>1.3.0.Final</version>
      </extension>
    </extensions>

    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.5.1</version> <!-- See this? -->
      </plugin>
    </plugins>

  </build>
</project> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-03T12:51:20.937

不确定您遇到了哪种构建错误，但这是我的情况：我在 Idea 中遇到以下编译错误： `Annotation processor 'org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor' not found error`

但是，当从 Maven 编译时，一切都很好。

所以，我的问题是我在 Idea 设置中的配置错误。特别是，Idea 似乎以某种方式检测到处理器并将其放入模块处理器配置文件的设置中。[在这里讨论。](https://youtrack.jetbrains.com/issue/IDEA-86561#comment=27-341952)

我将其修复如下：

1.  转到想法 > 设置 > 注释处理器。
2.  对于每个处理器配置文件，请确保：
    *   Enable annotation processing 是 Yes；
    *   右侧列表中没有您有错误的注释处理器 FQ 名称 (ei "JPAMetaModelEntityProcessor")。如果它在那里列出，只需选择并单击“-”减号按钮即可将其删除。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-18T15:11:40.517

我认为这是在配置文件中包含此类依赖项以解决此类问题的更好方法。

```
<profile>
    <id>XXX-profile</id>
    <dependencies>
         <dependency>
             // XXX artifact path
         </dependency>
    </dependencies>
</profile> 
```

# xml - XLS 到 CSV 转义

> ID：14322906
> 
> 赞同：1
> 
> 时间：2013-01-14T16:52:26.740
> 
> 标签：xml, excel, csv

`XLS`导出到时如何正确地将分隔符字符从实际内容中转义`CSV`？

当我导出文件时，分隔符是`";"`在某些字段中也可以找到的字符。我需要逃避它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:09:32.730

CSV“格式”实际上没有完全接受的标准。

然而，标准做法是：

1.  用双引号将带有“特殊字符”的任何字段值括起来。

2.  对于包含在双引号中的任何字段值，请通过重复双引号字符来转义字段中的任何内部双引号字符。

所以，ID = 10，名称 = Doe；约翰，昵称 = 约翰尼“下巴”看起来像这样：

```
10; "Doe; John"; "Johnny ""The Chin""" 
```

如果您使用分号（逗号更常见，因此名称为逗号分隔值）。

需要引用的特殊字符是分隔符（无论它是什么）、双引号字符本身和换行符（如果发送和接收程序都支持字段内的换行符）。但是，如果发送程序和接收程序都支持在字段值周围使用双引号，那么将它们包含在所有字段中并没有什么坏处。

# asp.net - CultureInfo 值在相同区域性的应用程序之间有所不同。这是一个错误吗？

> ID：14322910
> 
> 赞同：3
> 
> 时间：2013-01-14T16:52:59.717
> 
> 标签：asp.net, .net

我的 Windows 8 开发盒上出现了一个奇怪的问题。在比较运行 Kentico 的 ASP .NET 应用程序和控制台应用程序（均在 .NET 4.0 上运行）时，以下代码行会导致 NumberFormat.NumberDecimalSeparator 的两个不同值。

```
var culture = new System.Globalization.CultureInfo("en-ZA");
var separator = culture.NumberFormat.NumberDecimalSeparator; 
```

分隔符的值：

1.  Kentico 应用程序："," <- 逗号
2.  控制台应用程序：“.” <-期间

我的区域设置的正确输出是句号。

这怎么可能？当我第一次发现十进制数字的格式问题时，我认为这可能是一个 Kentico 错误，但是这个测试表明并非如此。特定语言环境的 CultureInfo 的新实例如何返回在应用程序中不同的实例？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T17:18:37.983

[Jason Evans 的](https://stackoverflow.com/users/127440/jason-evans)评论为我指明了正确的方向。请参阅他发布的链接：[ASP.NET 应用程序不反映区域设置](https://stackoverflow.com/questions/13645441/asp-net-application-doesnt-reflect-regional-settings)

事实证明，区域设置是**按用户**存储在 Windows 中的。这是我应该意识到的。更新应用程序池以像我自己一样运行在两个应用程序中产生了相同的结果。

公平地说，仍然令人困惑的是网络服务（运行应用程序池的帐户）如何获得不正确的值。我什至不确定我会如何纠正它。

编辑：

如果您需要更新保留帐户的区域设置。你有两个选择。

1.  控制面板 > 区域设置 > 单击管理选项卡，然后选择“复制设置”。在启动的屏幕上，确保选中“欢迎屏幕和系统帐户”。我相信旧版本的 Windows 是相似的。
2.  为勇者。注册表：HKEY_USERS > SID... > 控制面板 > 国际。网络服务的安全标识符是：SID：S-1-5-20。

确保您重新启动应用程序池以使设置生效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:59:04.197

编辑：请注意，这*不是*问题 - 但在其他情况下可能是，所以我将它留在这里以供后代使用。

我强烈怀疑控制台应用程序*没有*在 .NET 4.0 上运行。虽然很容易验证使用`Environment.Version`。这是一个简短的控制台应用程序和两个不同版本的框架的结果：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        CultureInfo culture = new System.Globalization.CultureInfo("en-ZA");
        string separator = culture.NumberFormat.NumberDecimalSeparator;
        Console.WriteLine("Version: {0}", Environment.Version);
        Console.WriteLine("Separator: {0}", separator);
    }
} 
```

针对 .NET 4.5 编译：

```
Version: 4.0.30319.18010
Separator: , 
```

针对 .NET 2.0 编译：

```
Version: 2.0.50727.6400
Separator: . 
```

在这两个应用程序中尝试此代码，并查看它们正在运行的版本。

# c# - 在一个数据库中结合 MVC4 和 Symfony2 用户

> ID：14322912
> 
> 赞同：4
> 
> 时间：2013-01-14T16:53:06.670
> 
> 标签：c#, php, mysql, symfony, asp.net-mvc-4

我有一个 web 应用程序，它有一个使用 Symfony2 的前台和一个使用 ASP.NET MVC4 的后台（在你告诉我之前，是的，我知道这是一个荒谬的设置，但这些是我们必须遵守的限制）。

我现在想在我的数据库中有一个用户表，用户可以从中登录前台 (SF2) 和后台 (MVC4)。我使用 FOSUserBundle 在 Symfony2 端管理我的用户，但我还没有决定应该为应用程序的 MVC4 部分使用哪个成员资格提供程序，主要是因为我不知道如何在 ASP 端对用户进行身份验证。

FOSUserBundle 在注册用户/更改密码时使用 SHA512 迭代 5000 次。散列密码和密码盐都存储在数据库中——这一切都很好。问题是我不确定我应该如何在 MVC4 应用程序中使用这些数据；我做了一些研究，看看是否可以更改散列算法等，但这需要我制作一个自定义会员提供程序，这对于以前从未使用过 MVC4 的人来说有点令人生畏。

谁能指出我正确的方向？将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:26:53.700

你可以[`write a custom membership provider`](http://www.codeproject.com/Articles/165159/Custom-Membership-Providers)查询你的数据库。基本上，您必须编写一个派生自[`MembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)并实现您要使用的方法的类。有很多方法，但您可能不需要全部覆盖它们。例如，该`ValidateUser`方法采用用户名和密码，由您来处理这种情况。

例如：

```
public class MyCustomMembershipProvider: MembershipProvider
{
    ...
} 
```

然后你可以在你的 web.config 中注册这个自定义成员提供者来替换默认的：

```
<membership defaultProvider="MyCustomMembershipProvider">
    <providers>
        <clear/>
        <add name="MyCustomMembershipProvider" 
             type="MvcApplication1.Providers.MyCustomMembershipProvider" />
    </providers>
</membership> 
```

现在，当您在 LogOn 操作中调用时，`Membership.ValidateUser`它将委托给您的自定义提供程序。

# javascript - 与 Backbone 配合良好的 UI 移动框架？

> ID：14322913
> 
> 赞同：2
> 
> 时间：2013-01-14T16:53:10.260
> 
> 标签：javascript, mobile, user-interface, backbone.js

我想找到一个与 Backbone 一起使用的 UI 移动框架。我喜欢 jQuery Mobile，它是构建 HTML 代码的方式，它很容易在一个 HTML 中构建一个具有可接受设计的多页应用程序。然而，jQuery Mobile 不仅仅是一个 UI 框架，因为它处理更多的东西，比如路由，而这些东西在 Backbone 中不能很好地发挥作用。此外，它有点重，在移动设备中的性能并不是很好。所以，基本上，我正在寻找一个轻量级的框架，它可以设置页眉、页脚、按钮、列表视图等样式，并处理页面转换。那存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:21:50.003

尽管您在问题的第一行中排除了 jQuery Mobile，但我见过的其中一个 Backbone“样板”包确实通过关闭路由来使用 jQuery Mobile，因此您仍然可以使用 Backbone 路由器：

```
// Prevents all jQuery Mobile anchor click handling
$.mobile.linkBindingEnabled = false;
// Prevents jQuery Mobile from handling hash changes
$.mobile.hashListeningEnabled = false; 
```

所以如果你没有找到其他东西，它可能仍然值得一试。查看[Backbone-Require-Boilerplate 项目](https://github.com/gfranko/Backbone-Require-Boilerplate)，它有一个完整的系统，可以使用条件 Require.js 加载器将 Backbone 应用程序的桌面版和移动版分开 - 非常有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:27:39.887

到目前为止，我已经找到了[Lungo](http://lungo.tapquo.com/)。设计非常简洁美观，并且利用了许多 HTML5 功能。缺点（如果是缺点）是需要同一公司的另一个库[Quo来遍历 DOM 并处理触摸事件。](http://quojs.tapquo.com/)但是，我习惯了 jQuery，而前者缺少 jQuery 中包含的一些功能，所以我最终得到了两个用途几乎相同的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T02:42:21.863

你看过初中吗？[http://justspamjustin.github.io/junior/](http://justspamjustin.github.io/junior/)

它似乎非常轻量级，至少在与骨干集成方面。

# mysql - MySQL 3-way 1..n 表关系

> ID：14322919
> 
> 赞同：2
> 
> 时间：2013-01-14T16:53:28.460
> 
> 标签：mysql, database, database-design, relational-database

1 个数据库，包含 3 个表：**用户**-**照片**-**投票**
- 一个用户可以拥有多张照片。
- 一张照片可以有很多票。
- 用户可以对多张照片进行投票。
- 一个投票记录：
。结果为 int (-1/disliked, 0/neutral, 1/liked)
。投票的用户的 id。

这是我所拥有的（所有 FK 在删除和更新时都是级联的）：http://grab.by/iZYE
[（](http://grab.by/iZYE)
*sid = surrogate id）*

我的问题是：这似乎不对，我已经看了 2 天，不能自信地继续前进。我该如何优化它还是我完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:01:31.097

我看到的第一件事是您在表上有重复的唯一 ID。您不需要`sid`列；只需使用`user_id`, `photo_id`, and `photo_user_id`（也许将这个重命名为`vote_id`）。那些 ID 列也应该是`INT`类型，绝对不是`VARCHAR`s。您可能不需要投票总数列`photo`；您可以在需要时运行查询以获取总数，而不必担心保持两个表同步。

假设您只允许每位用户对每张照片投一票，则可以修改 的结构，因此只有`user_id`、`photo_id`和列`vote_result`。然后，您将使主键成为 ( `user_id`, `photo_id`) 上的复合索引。但是，由于您使用的是外键，这使得该表有点复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:34:10.850

MySQL/InnoDB 表总是聚集在一起的（更多关于聚集[在这里](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)和[这里](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)）。

由于主键还充当集群键¹，因此使用代理主键意味着您在物理上对表进行排序，这对客户端应用程序没有有用的意义，也不能用于查询。

此外，聚簇表中的二级索引可能比基于堆的表“更胖”，并且可能需要双重查找。

由于这些原因，您希望避免使用代理并使用更多“自然”键，类似于以下内容：

![在此处输入图像描述](../Images/8ab8de1e54ce604dbbd235b8fe70d000.png)

*（`{USER_ID, PICTURE_NO}`在表中`VOTE`引用了中的同名字段`PICTURE`。`VOTE.VOTER_ID`引用。如果可以，`USER.USER_ID`请使用整数`*_ID`和字段。）`*_NO`*

该物理模型将能够非常有效地查询：

*   给定用户的图片（对`PICTURE`主/集群索引的简单范围扫描）。
*   对给定图片投票（对`VOTE`主/集群索引的简单范围扫描）。根据具体情况，这实际上可能足够快，因此您不必将总和缓存在`PICTURE`.

如果您需要给定用户的投票，请将`VOTE`PK 更改为：`{VOTER_ID, USER_ID, PICTURE_NO}`。[如果您需要两者（图片投票和用户投票），请保留现有](http://use-the-index-luke.com/sql/glossary/covering-index)PK，但在`{VOTER_ID, USER_ID, PICTURE_NO, VOTE_VALUE}`.

* * *

*¹在 InnoDB 中。在某些 DBMS（例如 MS SQL Server）中，集群键可能与主键不同。*

# windows-mobile-6.5 - 相机无法在 Windows Mobile 6.5 上运行

> ID：14322925
> 
> 赞同：0
> 
> 时间：2013-01-14T16:53:52.710
> 
> 标签：windows-mobile-6.5, motorola

我有一个使用设备摄像头的摩托罗拉 MC9500 系列应用程序。

我使用以下方法来初始化 Imager：

```
 Symbol.Generic.Device MyDevice;
        int i = 0;

        if (imager == null)
        {
            MyDevice = (Symbol.Generic.Device)Symbol.Imaging.Device.AvailableDevices.GetValue(0);

            for (i = 1; MyDevice != null; i++)
            {

                if (MyDevice.FriendlyName.Equals("Image Capture Driver for Color Camera"))
                    break;

                MyDevice = (Symbol.Generic.Device)Symbol.Imaging.Device.AvailableDevices.GetValue(i);

            }

            if (MyDevice == null)
            {   
                MessageBox.Show("Camera não foi encontrada.");
                this.Close();
                return;
            }

            imager = new Symbol.Imaging.Imager(MyDevice);
        } 
```

它在 WM6.1 上运行良好，但在 WM6.5 上运行良好，最后一行抛出以下异常：

**创建 Imager 失败：IMAGE_Open 失败：E_IMG_INVALIDDEVICE**

根据制造商文档，这意味着：“物理设备驱动程序 (PDD)。DLL 不包含所需的入口点。”。但是，我拥有最新的所有驱动程序。它们可以在以下位置找到：http: [//support.symbol.com/support/search.do ?cmd=displayKC&docType=kc&externalId=12683&sliceId=&dialogID=469856149&stateId=1%200%20469852171](http://support.symbol.com/support/search.do?cmd=displayKC&docType=kc&externalId=12683&sliceId=&dialogID=469856149&stateId=1%200%20469852171)

当我运行程序时，我没有运行其他任务，因为我认为这可能是由于另一个进程将相机​​锁定到自身。

相关事实是，相机似乎无法在使用它的任何其他应用程序中工作/启动。但是，它们似乎可以在我客户的设备上运行（也是 WM6.5，同一设备）。

有人对为什么会发生这种情况或如何解决有任何建议或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T10:52:14.003

我遇到了同样的问题，但我的问题是因为我还激活了条码扫描仪，禁用条码扫描仪为我解决了这个问题。

```
barcode2.Disable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T09:25:33.400

我在使用摩托罗拉 MC75A 时遇到了这个问题。事实证明，也是安装在设备上的 Datawedge 应用程序导致其无法正常工作。相机和条形码扫描仪似乎是某种联系在一起的。您一次只能使用一个，并且由于 DataWedge 已经在运行，我的代码/项目正在生成 IMAGE_Open 失败：E_IMG_INVALIDDEVICE。只需进入 DataWedge 并停止该过程即可立即解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T14:13:42.603

您必须从摩托罗拉网站 (SPR23173) 下载并安装 CAB 才能启用第二个源摄像头。

# java - AsynchronousServerSocketChannel.accept 只接受一个连接

> ID：14322927
> 
> 赞同：2
> 
> 时间：2013-01-14T16:53:57.197
> 
> 标签：java, sockets

我有一个小型服务器设置，我正在尝试使用基于事件的连接套接字，以便在每个传入连接上调用处理程序。它适用于第一个连接，但在第一个连接之后不接受任何新连接。

为简单起见，我只是关闭客户端连接。另外，是的，第一次连接后服务器仍在运行，它不会终止。

这是代码：

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.nio.channels.AsynchronousChannelGroup;
import java.nio.channels.AsynchronousServerSocketChannel;
import java.nio.channels.AsynchronousSocketChannel;
import java.nio.channels.CompletionHandler;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class ServerTest
{
static CompletionHandler<AsynchronousSocketChannel, Object> handler =
        new CompletionHandler<AsynchronousSocketChannel, Object>() {
        @Override
        public void completed(AsynchronousSocketChannel result, Object attachment) {
            System.out.println(attachment + " completed with " + result + " bytes written");
            try {
                result.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        @Override
        public void failed(Throwable e, Object attachment) {
            System.err.println(attachment + " failed with:");
            e.printStackTrace();
        }
    };

public static void main(String[] args) throws Exception
{
    AsynchronousChannelGroup group = AsynchronousChannelGroup.withThreadPool(Executors.newSingleThreadExecutor());
    System.out.println("STARTING");
    AsynchronousServerSocketChannel ssc =
        AsynchronousServerSocketChannel.open(group).bind(new InetSocketAddress("localhost", 9999));

    System.out.println("BOUND");
    ssc.accept(ssc, handler);

    group.awaitTermination(Long.MAX_VALUE, TimeUnit.SECONDS);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-12T04:00:02.657

公共抽象无效接受（附件，CompletionHandler 处理程序）

> 此方法启动异步操作以接受与此通道的套接字建立的连接。handler 参数是一个完成处理程序，在接受连接（或操作失败）时调用。传递给完成处理程序的结果是新连接的 AsynchronousSocketChannel。

[在这里](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/AsynchronousServerSocketChannel.html#accept(A,%20java.nio.channels.CompletionHandler))阅读更多

这意味着它初始化一个异步线程来接受传入的连接。这也意味着它将获取第一个连接并将其转发到异步线程，然后等待更多连接。要允许更多客户端连接，您还必须在覆盖的已完成函数内调用接受方法。

这是一个例子，

```
server.accept(null, new CompletionHandler<AsynchronousSocketChannel,Void>() {
@Override
public void completed(AsynchronousSocketChannel chan, Void attachment) {
    System.out.println("Incoming connection...");
    server.accept(null, this); //add this

    //... 
```

需要注意的是，对于每个客户端，都会产生一个新的 AsynchronousSocketChannel 结果。话虽如此，如果您要打印出“chan”，则会产生不同的对象。

[不同的客户对象](https://i.stack.imgur.com/Nms9m.png)

# python - 在 pip 安装期间更改 Biopython 包含编译路径

> ID：14322932
> 
> 赞同：3
> 
> 时间：2013-01-14T16:54:09.630
> 
> 标签：python, numpy, include, pip, biopython

我正在尝试在我的工作机器（OpenSuse x86_64）上使用 PIP 安装 Biopython（一个 python 包）。

一切都很好，直到它尝试使用 numpy 标头进行一些编译

```
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -fPIC -I/usr/lib64/python2.7/site-packages/numpy/core/include -I/usr/include/python2.7 -c Bio/Cluster/clustermodule.c -o build/temp.linux-x86_64-2.7/Bio/Cluster/clustermodule.o 
```

在这一点上它失败了

```
Bio/Cluster/clustermodule.c:2:31: fatal error: numpy/arrayobject.h: No such file or directory 
```

这是因为`numpy/arrayobject.h`在

```
/usr/local/lib64/python2.7/site-packages/numpy/core/include/ 
```

并不是

```
/usr/lib64/python2.7/site-packages/numpy/core/include 
```

有没有办法更新设置包含路径（`/local`版本）的任何变量，无论是全局还是显式安装？

**更新**

一年多后，我遇到了类似的问题，只是这次`.h`文件根本不存在于我的系统上。`.h`只需从另一台机器复制到

```
/usr/lib64/python2.7/site-packages/numpy/core/include/numpy 
```

目录安装很顺利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:30:28.793

感谢@Bort，我发现这显然是一个[已知错误](http://biopython.org/DIST/docs/install/Installation.html#htoc34)（本地/用户空间安装无论如何都不起作用）。

`setup.py`通过在以下位置编辑 Biopython文件

## 原来的

```
#Add extensions that requires NumPy to build
if is_Numpy_installed():
   import numpy
   numpy_include_dir = numpy.get_include()
   EXTENSIONS.append(
      Extension('Bio.Cluster.cluster',
              ['Bio/Cluster/clustermodule.c',
               'Bio/Cluster/cluster.c'],
              include_dirs=[numpy_include_dir],
              ))
   EXTENSIONS.append(
      Extension('Bio.KDTree._CKDTree',
              ["Bio/KDTree/KDTree.c",
               "Bio/KDTree/KDTreemodule.c"],
              include_dirs=[numpy_include_dir],
              ))
   EXTENSIONS.append(
      Extension('Bio.Motif._pwm',
              ["Bio/Motif/_pwm.c"],
              include_dirs=[numpy_include_dir],
              )) 
```

## 更新

```
#Add extensions that requires NumPy to build
if is_Numpy_installed():
   import numpy
   numpy_include_dir = numpy.get_include()
   EXTENSIONS.append(
      Extension('Bio.Cluster.cluster',
              ['Bio/Cluster/clustermodule.c',
               'Bio/Cluster/cluster.c'],
              include_dirs=[numpy_include_dir, '/usr/local/lib64/python2.7/site-packages/numpy/core/include/'],
              ))
   EXTENSIONS.append(
      Extension('Bio.KDTree._CKDTree',
              ["Bio/KDTree/KDTree.c",
               "Bio/KDTree/KDTreemodule.c"],
              include_dirs=[numpy_include_dir, '/usr/local/lib64/python2.7/site-packages/numpy/core/include/'],
              ))
   EXTENSIONS.append(
      Extension('Bio.Motif._pwm',
              ["Bio/Motif/_pwm.c"],
              include_dirs=[numpy_include_dir, '/usr/local/lib64/python2.7/site-packages/numpy/core/include/'],
              )) 
```

然后使用 pip 从源代码安装（我重新压缩了包含更新`setup.py`文件的文件夹然后运行）

```
pip install recompressed.tar.gz 
```

它已经安装好了。

**更新** 我实际上在另一台 openSUSE 机器上遇到了非常相似的问题，但是这次没有包含文件...为了解决这个问题，我从 numpy 源复制它们并使用上面的 include_dirs 更新将它们提供给它们。

# f# - 尾递归函数的 System.OutOfMemoryException

> ID：14322940
> 
> 赞同：2
> 
> 时间：2013-01-14T16:54:30.603
> 
> 标签：f#, asp.net-membership, tail-recursion, tail-call-optimization

我已将有问题的代码隔离到此函数（使用 ASP.NET 的 Membership 类）：

```
let dbctx = DBSchema.GetDataContext()
let rec h1 (is2_ : int) (ie2_ : int) : unit =
    match is2_ >= ie2_ with
    | true ->
        let st2 = query {
            for row in dbctx.Tbl_Students do
            where (row.Id = is2_)
            head}
        let l2 =
            Membership.FindUsersByEmail (st2.Email_address)
            |> Seq.cast<_>
            |> Seq.length
        match l2 >= 1 with
        | true -> 
            ()
        | false ->
            Membership.CreateUser (st2.Email_address, password, st2.Email_address)
            |> ignore
        h1 (is2_ - 1) ie2_
    | false ->
        () 
```

我得到`System.OutOfMemoryException`了. 但我系统的内存消耗仅为. （我有一台非常强大的 16 GB 机器。）`5626``h1``20 percent`

为什么上面的函数会溢出堆栈？不是递归写成tail吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T17:26:28.703

我不认为这是一个尾递归问题——如果是这样，你会得到 a`StackOverflowException`而不是`OutOfMemoryException`. 请注意，即使您的机器中有 16GB 的内存，您的程序正在执行的进程也可能仅限于较小的内存量。IIRC，对于 .NET 框架版本和操作系统版本的某些组合，它是 3GB——这可以解释为什么当您达到约 20% 的内存使用量（16GB 的 20% = 3.2GB）时进程会崩溃。

我不知道它会有多大帮助，但您可以简化代码以避免创建一些不必要的序列：

```
let dbctx = DBSchema.GetDataContext()
let rec h1 (is2_ : int) (ie2_ : int) : unit =
    if is2_ >= ie2_ then
        let st2 = query {
            for row in dbctx.Tbl_Students do
            where (row.Id = is2_)
            head }
        let existingUsers = Membership.FindUsersByEmail st2.Email_address
        if existingUsers.Count < 1 then
            Membership.CreateUser (st2.Email_address, password, st2.Email_address)
            |> ignore

        h1 (is2_ - 1) ie2_ 
```

编辑：这是上一个问题的链接，其中包含有关 .NET 框架和操作系统版本的某些版本的 CLR 内存限制的详细信息：[单个 .NET 进程是否存在内存限制](https://stackoverflow.com/questions/200348/is-there-a-memory-limit-for-a-single-net-process)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T17:31:05.027

`OutOfMemoryException`通常与您拥有的 RAM 数量没有任何关系。您最有可能以大约 3 GB 的速度获得它，因为您的代码作为 32 位进程运行。但是，如果您确实需要那么多内存并且异常不是由某些错误引起的，那么将其切换到 64 位只会解决您的问题。

# ruby - 仅在登台服务器上更新 gem

> ID：14322942
> 
> 赞同：1
> 
> 时间：2013-01-14T16:54:34.567
> 
> 标签：ruby, bundler

我只想在登台服务器上更新我的宝石之一。所以，我在跑步

```
bundle update gemname 
```

或者

```
bundle install 
```

但后来我得到了错误：

```
You have modified your Gemfile in development but did not check the resulting snapshot (Gemfile.lock) into version control 
```

问题是我无法在本地执行，也无法将其推送到 git 存储库中。任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:47:01.910

好的，我的问题很具体，而且非常罕见，因为由于客户的情况，我无法部署具有新功能的应用程序。也许这听起来很糟糕，但起初我必须在本地更新我的 Gemfile，运行`bundle install`，手动将 Gemfile.lock 复制到我的服务器，毕竟我可以根据需要更新 gem。它现在可以工作，当我被允许使用 capistrano 部署整个应用程序代码时，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:30:15.767

在您的情况下，您可以像这样创建组`Gemfile`：

```
group :staging do
    gem 'gem_name', 'gem_version'
end 
```

仅将您要使用的宝石放在该特定环境中。

希望这可以帮助 ：）

# java - IntelliJ IDEA中默认引入final变量

> ID：14322944
> 
> 赞同：2
> 
> 时间：2013-01-14T16:54:49.450
> 
> 标签：java, intellij-idea

当我在 IntelliJ IDEA 中使用 引入新变量时`Ctrl``Alt``V`，有一个“Declare final”选项。默认情况下未选中。我怎样才能让它默认选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:00:49.117

它可能不是一个特殊的配置，但它确实记住了您所做的最后选择。

（我只是测试它来检查;）

# ember.js - 访问 json 服务器响应中传递的元信息

> ID：14322945
> 
> 赞同：23
> 
> 时间：2013-01-14T16:54:54.793
> 
> 标签：ember.js, ember-data

我正在使用 Ember-Data Rest-Adapter，从我的服务器返回的 JSON 看起来基本上像[Active Model Serializers 文档中的那个](https://github.com/rails-api/active_model_serializers#attributes)

```
{
  "meta": { "total": 10 },
  "posts": [
    { "title": "Post 1", "body": "Hello!" },
    { "title": "Post 2", "body": "Goodbye!" }
  ]
} 
```

从服务器获取数据是可行的，但不幸的是我无法弄清楚我可以从我的 JSON 响应中访问元信息的位置。

根据我对 ember-data 的 github issue 的研究，对元信息的支持似乎是通过 commit [1787bff](https://github.com/tchak/data/commit/1787bff5f9154d9c09f46830e48dfb5e14953fb1)[实现](https://github.com/emberjs/data/issues/595)的。

但即使有测试用例，我也无法弄清楚如何访问元信息。

```
App.PostController = Ember.ArrayController.extend({
   ....
   requestSearchData: function(searchParams){
      posts = App.Post.find(searchParams);
      this.set('content', posts);
      // don't know how to access meta["total"]
      // but I want to do something like this:
      // this.set('totalCount', meta["total"])
   }
}) 
```

你们中的任何人都可以为我解释一下吗？我知道 Ember api 正在快速发展，但我确信我只是遗漏了一小部分，这实际上是可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-15T10:03:34.813

我找到了一种更简洁的方法，可以使用 ember-data 从服务器响应中提取元信息。

我们必须告诉序列化程序期望哪些元信息（在这种情况下是分页）：

```
 App.serializer = DS.RESTSerializer.create();

 App.serializer.configure({ pagination: 'pagination' });

 App.CustomAdapter = DS.RESTAdapter.extend({
   serializer: App.serializer
 });

 App.Store = DS.Store.extend({
   adapter: 'App.CustomAdapter'
 }); 
```

之后，每次服务器发送带有分页对象的元属性时，该对象都会被添加到所`TypeMaps`请求模型类的存储属性中。

例如以下响应：

```
 {
    'meta': {'pagination': { 'page': 1, 'total': 10 } },
    'posts':[
      ...
    ]
  } 
```

App.Post `TypeMap`-Model 将在帖子加载后包含分页对象。

您无法直接观察商店的 TypeMaps 属性，因此我向 PostsController 添加了一个计算属性以访问请求分页元信息：

```
 App.PostsController = Ember.ArrayController.extend({
    pagination: function () {
      if (this.get('model.isLoaded')) {
        modelType = this.get('model.type');
        this.get('store').typeMapFor(modelType).metadata.pagination
      }
    }.property('model.isLoaded')
 }); 
```

我真的不认为这是解决元信息问题的好方法，但这是我能够用 Ember-Data 提出的最佳解决方案。也许这在未来会更容易。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T11:31:33.297

我想出了一种访问响应中传递的元信息的方法。但不幸的是，开箱即用的 ember-data 似乎并不支持它，我正在将元信息写入一个全局变量，然后通过请求控制器中的绑定访问该变量。

我最终自定义了 RESTAdapter 正在使用的序列化程序：

```
App.CustomRESTSerializer = DS.RESTSerializer.extend({
  extractMeta: function(loader, type, json) {
    var meta;
    meta = json[this.configOption(type, 'meta')];
    if (!meta) { return; }
    Ember.set('App.metaDataForLastRequest', meta);
    this._super(loader, type, json);
  }
});

App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    bulkCommit: false,
    serializer: App.CustomRESTSerializer
  })
}); 
```

我知道这不是特别漂亮，实际上认为这与 ember-data 期望我们做的事情背道而驰，但目前它工作正常。

我将尝试以更好的方式使用 ember-data 并在它工作时提交一个拉取请求，或者当其他人有兴趣让它工作时在 github 上打开一个问题。

如果有人找到更干净的解决方案，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T15:50:00.400

我认为您的直接解决方法是将 totalCount 附加到您的模型（recordArray），请参阅此[线程](https://github.com/emberjs/data/issues/124)。

另一种方法是创建自己的适配器：

```
DS.Adapter.create({
  find: function (store, type, id) {
    $.ajax({
      url:      type.url,
      dataType: 'jsonp',
      context:  store,
      success:  function(response){
        this.load(type, id, response.data);
      }
    });
  },
  findAll: function(store, type) {
    $.ajax({
      url:      type.url,
      dataType: 'jsonp',
      context:  store,
      success:  function(response){
        this.loadMany(type, response.data);
      }
    });
  }
}); 
```

findAll 方法中成功回调的响应参数，应该是你需要的对象：

```
response: {
  meta: {
    totalCount: 10
  },
  posts: [{}, {}]
} 
```

希望这可以帮助。

# php - Yii：提交表单时从控制器访问 CActiveForm.htmlOptions 以更改 css 可见性

> ID：14322949
> 
> 赞同：0
> 
> 时间：2013-01-14T16:55:24.250
> 
> 标签：php, yii

我有一个 CActiveForm 提交时应该使第二个 CActiveForm 变得可见。我知道如何在创建表单时更改表单的 htmlOptions，但不知道如何通过控制器访问它。

我的观点有两种形式。第二种形式有可见性：隐藏

```
<div class="form">
            <?php
            $numberForm = $this->beginWidget('CActiveForm', array(
                'id' => 'addnumber-form',
                'enableAjaxValidation' => true,
                'clientOptions' => array(
                    'validateOnSubmit' => true,
                ),
                    ));
            ?>

            <p class="note"><?php echo UserModule::t('Fields with <span class="required">*</span> are required.'); ?></p>
            <?php echo $numberForm->errorSummary($numberModel); ?>

            <div class="row">
                <?php echo $numberForm->labelEx($numberModel, 'number'); ?>
                <?php echo $numberForm->textField($numberModel, 'number'); ?>
                <?php echo $numberForm->error($numberModel, 'number'); ?>

                <?php
                echo CHtml::submitButton(UserModule::t("Verify"), array(
                    "class" => "btn btn-success"
                ));
                ?>

            </div>

            <?php $this->endWidget(); ?>

            <?php
            $verifyForm = $this->beginWidget('CActiveForm', array(
                    'id' => 'verify-form',
                    'enableAjaxValidation' => true,
                    'clientOptions' => array(
                        'validateOnSubmit' => true,
                    ),
                    'htmlOptions' => array("style"=>"visibility: hidden"),
                ));
            ?>

            <?php echo $verifyForm->errorSummary($verifyModel); ?>

            <p>A authorisation code has been sent to your phone. Please enter it below. If you don't receive a text message make sure you entered your number correctly and try again</p>

            <div class="row">
                <?php echo $verifyForm->labelEx($verifyModel, 'authcodeUser'); ?>
                <?php echo $verifyForm->textField($verifyModel, 'authcodeUser'); ?>
                <?php echo $verifyForm->error($verifyModel, 'authcodeUser'); ?>

                <?php
                echo CHtml::submitButton(UserModule::t("Confirm"), array(
                    "class" => "btn btn-success"
                ));
                ?>

                <?php
                    foreach(Yii::app()->user->getFlashes() as $key => $message) {
                        echo '<div class="flash-' . $key . '">' . $message . "</div>\n";
                    }
                ?>

            </div>

            <?php $this->endWidget(); ?>

        </div><!-- form --> 
```

我的这些表格的控制器

```
public function actionAddnumber(){
    $numberModel = new UserAddNumber;
    $verifyModel = new UserVerifyNumber;
    if (Yii::app()->user->id) {

        // ajax validator
        if(isset($_POST['ajax']) && $_POST['ajax']==='addnumber-form')
        {
            echo UActiveForm::validate($numberModel);
            Yii::app()->end();
        }

        if(isset($_POST['UserAddNumber'])) {
                $numberModel->attributes=$_POST['UserAddNumber'];
                if($numberModel->validate()) {
                    $profile = Profile::model()->findByAttributes(array('user_id'=>Yii::app()->user->id));
                    $profile->mobileNo = $numberModel->number;
                    $profile->save();

                    //MAKE $verifyForm visibility to visible uring htmlOptions

                    Yii::app()->session['authcode'] = '4444';
                }
        }

        if(isset($_POST['UserVerifyNumber'])) {
                $verifyModel->attributes=$_POST['UserVerifyNumber'];
                if($verifyModel->validate()) {
                    $profile = Profile::model()->findByAttributes(array('user_id'=>Yii::app()->user->id));
                    $profile->mobileNoVerified = True;
                    $profile->save();
                    Yii::app()->user->setFlash('profileMessage',UserModule::t("Your mobile number has been verified"));
                    $this->redirect(array("profile"));

                }
        }

    }
    $this->render('addnumber', array('numberModel'=>$numberModel, 'verifyModel' => $verifyModel));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:16:55.680

看起来您可以创建一个新变量来确定是否显示第二种形式，然后将其传递给视图。这是您的控制器：

```
public function actionAddnumber(){
    $numberModel = new UserAddNumber;
    $verifyModel = new UserVerifyNumber;
    $formVisibility = "hidden";

    if (Yii::app()->user->id) {

        // ajax validator
        if(isset($_POST['ajax']) && $_POST['ajax']==='addnumber-form')
        {
            echo UActiveForm::validate($numberModel);
            Yii::app()->end();
        }

        if(isset($_POST['UserAddNumber'])) {
                $numberModel->attributes=$_POST['UserAddNumber'];
                if($numberModel->validate()) {
                    $profile = Profile::model()->findByAttributes(array('user_id'=>Yii::app()->user->id));
                    $profile->mobileNo = $numberModel->number;
                    $profile->save();

                    //MAKE $verifyForm visibility to visible uring htmlOptions
                    $formVisibility = "visible";

                    Yii::app()->session['authcode'] = '4444';
                }
        }

        if(isset($_POST['UserVerifyNumber'])) {
                $verifyModel->attributes=$_POST['UserVerifyNumber'];
                if($verifyModel->validate()) {
                    $profile = Profile::model()->findByAttributes(array('user_id'=>Yii::app()->user->id));
                    $profile->mobileNoVerified = True;
                    $profile->save();
                    Yii::app()->user->setFlash('profileMessage',UserModule::t("Your mobile number has been verified"));
                    $this->redirect(array("profile"));

                }
        }

    }
    $this->render('addnumber', array('numberModel'=>$numberModel, 'verifyModel' => $verifyModel, 'formVisibility' => $formVisibility));
} 
```

这是您的第二种形式的第一部分：

```
<?php
            $verifyForm = $this->beginWidget('CActiveForm', array(
                    'id' => 'verify-form',
                    'enableAjaxValidation' => true,
                    'clientOptions' => array(
                        'validateOnSubmit' => true,
                    ),
                    'htmlOptions' => array("style"=>"visibility: ".$formVisibility),
                ));
            ?> 
```

[编辑] 为确保我回答您的问题，我应该补充一点，我从未见过任何直接从控制器更改 htmlOptions 的方法。这就是我提出这个解决方案的原因。

# c - 如何不以二进制格式写入（）

> ID：14322952
> 
> 赞同：-2
> 
> 时间：2013-01-14T16:55:28.340
> 
> 标签：c, linux

我有一个结构，我想将其作为一条记录写入常规文件，并带有逗号分隔的字段。例如

```
 struct A {
      int a;
      int b;
   } test; 
```

给定`test.a=1`and `test.b = 2`，常规文件将有一个对应`1,2`的一行记录。另一个要求是我想用一个系统调用编写整个结构。因此，我创建了 a `char buffer[10]`，将 int a,b 的值存储到缓冲区中，用逗号分隔和换行符，并使用 Linux 系统 write() 调用来写入缓冲区。

问题是记录在文件中最终以二进制形式出现。这是直观的，因为我从变量中删除了“类型”，我将它们存储在一个 char 数组中。我可以使用标准 io，但我想了解如何使用具有概述约束的标准 linux 系统调用来实现预期的结果。我怎样才能保留变量的“典型性”。所谓类型，我的意思是如果变量是 int 类型，那么常规文件应该有人类可读的数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:59:18.763

你想要做的是`fprintf(fh, "%d,%d\n", test.a, test.b);`，如果你用`fopen`. 如果你真的`write()`因为某种原因必须使用，你可以`sprintf(buffer, "%d,%d\n", test.a, test.b); write(fd, buffer, strlen(buffer));`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:22:36.377

`fprintf(fh, "struct:A{int:%d,int:%d}\n", test.a, test.b);`

在某些环境中，您可能可以编写：

`fprintf(fh, "struct:%s{%s:%d,%s:%d}\n", typeid(A).name(), typeid(test.a).name(), test.a, typeid(test.b).name(), test.b);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:56:46.193

如果您希望文件是人类可读的，请使用[fprintf ，使用类似的代码编写文件](http://linux.die.net/man/3/fprintf)

```
void writeArrayToFile(struct A* array, int count)
{
    int i;
    FILE* fp;
    // open file

    for (i=0; i<count; i++) {
        fprintf(fp, "%d,%d\n", array[i].a, array[i].b);
    }
    fclose(fp);
} 
```

# c++ - 基类只有一个派生类可以吗？

> ID：14322957
> 
> 赞同：4
> 
> 时间：2013-01-14T16:56:21.083
> 
> 标签：c++, oop, design-patterns

我正在使用 OOD 和设计模式创建密码模块。该模块将保留可记录事件的日志并读取/写入文件。我在基类中创建了接口，在派生类中创建了实现。现在我想知道如果基类只有一个派生类，这是否是一种难闻的气味。这种类层次结构是不必要的吗？现在为了消除类层次结构，我当然可以在一个类中做所有事情而根本不派生，这是我的代码。

```
class CLogFile
{
public:
    CLogFile(void);
    virtual ~CLogFile(void);

    virtual void Read(CString strLog) = 0;
    virtual void Write(CString strNewMsg) = 0;
}; 
```

派生类是：

```
class CLogFileImpl :
    public CLogFile
{
public:
    CLogFileImpl(CString strLogFileName, CString & strLog);
    virtual ~CLogFileImpl(void);

    virtual void Read(CString strLog);
    virtual void Write(CString strNewMsg);

protected:
    CString & m_strLog; // the log file data
    CString m_strLogFileName; // file name
}; 
```

现在在代码中

```
CLogFile * m_LogFile = new CLogFileImpl( m_strLogPath, m_strLog );

m_LogFile->Write("Log file created"); 
```

我的问题是，一方面我遵循 OOD 原则并首先创建接口并在派生类中实现。另一方面，它是不是有点矫枉过正，是否会使事情复杂化？我的代码很简单，不使用任何设计模式，但它确实从中获得了通过派生类进行一般数据封装的线索。

最终，上面的类层次结构是好的还是应该在一个类中完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T16:58:32.323

不，事实上我相信你的设计是好的。您可能稍后需要为您的类添加一个模拟或测试实现，而您的设计使这更容易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T17:00:33.027

答案取决于您对该接口有多个行为的可能性有多大。

文件系统的读写操作现在可能非常有意义。如果你决定写入远程的东西，比如数据库怎么办？在这种情况下，新的实现仍然可以完美运行，而不会影响客户端。

我会说这是一个很好的例子来说明如何做一个界面。

你不应该让析构函数成为纯虚拟的吗？如果我没记错的话，这是 Scott Myers 推荐的用于创建 C++ 接口的习惯用法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:01:47.137

是的，这是可以接受的，即使您的接口只有 1 个实现，但它在运行时（稍微）可能比单个类慢。（`virtual`调度的成本大约是跟随 1-2 个函数指针）

这可以用作防止客户端依赖于实现细节的一种方式。例如，您的接口的客户端不需要仅仅因为您的实现在上述模式下获得一个新的数据字段而重新编译。

您还可以查看`pImpl`模式，这是一种在不使用继承的情况下隐藏实现细节的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:02:04.683

不。如果不存在多态性，则没有继承的理由，您应该使用重构规则将两个类合二为一。**“更喜欢组合而不是继承”。**

编辑：正如@crush 评论的那样，“更喜欢组合而不是继承”可能不是这里的充分引用。所以让我们说：如果你认为你需要使用继承，三思而后行。如果您真的确定需要使用它，请再考虑一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T17:21:36.127

您的模型适用于工厂模型，您可以在其中使用大量共享指针并调用一些工厂方法来“获取”指向抽象接口的共享指针。

使用 pImpl 的缺点是管理指针本身。然而，对于 C++11，pImpl 可以很好地移动，因此更可行。但是目前，如果您想从“工厂”函数返回类的实例，则它的内部指针存在复制语义问题。

这导致实现者要么返回一个指向外部类的共享指针，该指针是不可复制的。这意味着您有一个指向一个类的共享指针，该类持有一个指向内部类的指针，因此函数调用会通过额外的间接级别，并且每个构造都会获得两个“新”。如果您只有少数这些不是主要问题的对象，但它可能有点笨拙。

C++11 的优势在于具有支持其底层和移动语义的前向声明的 unique_ptr。因此 pImpl 将变得更加可行，因为您确实知道您将只有一个实现。

顺便说一句，我会摆脱那些`CString`s 并将它们替换为`std::string`，而不是将 C 作为每个类的前缀。我还将实现的数据成员设为私有，而不是受保护。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T17:42:58.783

[由 Stephane Rolland 引用的Composition over Inheritance](http://en.wikipedia.org/wiki/Composition_over_inheritance "组合优于继承")和[Single Responsibility Principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)定义的替代模型实现了以下模型。

首先，您需要三个不同的类：

```
class CLog {
    CLogReader* m_Reader;
    CLogWriter* m_Writer;

    public:
        void Read(CString& strLog) {
            m_Reader->Read(strLog);
        }

        void Write(const CString& strNewMsg) {
            m_Writer->Write(strNewMsg);
        }

        void setReader(CLogReader* reader) {
            m_Reader = reader;
        }

        void setWriter(CLogWriter* writer) {
            m_Writer = writer;
        }
}; 
```

CLogReader 处理读取日志的单一职责：

```
class CLogReader {
    public:
        virtual void Read(CString& strLog) {
            //read to the string.
        }
}; 
```

CLogWriter 处理写入日志的单一职责：

```
class CLogWriter {
    public:
        virtual void Write(const CString& strNewMsg) {
            //Write the string;
        }
}; 
```

然后，如果你想让你的 CLog 写入一个套接字，你可以派生 CLogWriter：

```
class CLogSocketWriter : public CLogWriter {
    public:
        void Write(const CString& strNewMsg) {
            //Write to socket?
        }
}; 
```

然后将您的 CLog 实例的 Writer 设置为 CLogSocketWriter 的实例：

```
CLog* log = new CLog();
log->setWriter(new CLogSocketWriter());
log->Write("Write something to a socket"); 
```

**优点** 这种方法的优点是您遵循单一职责原则，因为每个类都有一个目的。它使您能够扩展单一用途，而无需拖拽您无论如何都不会修改的代码。它还允许您根据需要更换组件，而无需为此创建一个全新的 CLog 类。例如，您可以有一个写入套接字的 Writer，但有一个读取本地文件的阅读器。等等。

**缺点** 内存管理在这里成为一个大问题。您必须跟踪何时删除指针。在这种情况下，您需要在销毁 CLog 以及设置不同的 Writer 或 Reader 时删除它们。这样做，如果引用存储在其他地方，可能会导致悬空指针。这将是了解强引用和弱引用的好机会，它们是引用计数器容器，当所有对它的引用都丢失时，它们会自动删除它们的指针。

# java - Android 项目中的常规 JUnit

> ID：14322958
> 
> 赞同：1
> 
> 时间：2013-01-14T16:56:23.147
> 
> 标签：java, android, junit, ide

我一直试图弄清楚如何在我的 Android 应用程序中包含标准的 JUnit 3.x（甚至 JUnit4.x）测试。我想在 Android 单元测试工具上使用 JUnit，因为它更快并且直接在我的 IDE 中运行（Android JUnit 工具需要部署到设备或模拟器 1st）。我还想使用 JUnit 来施加适当的 SoC（关注点分离）。最初我设置了多个模块来实现这一点，主 Android 模块和一个核心库模块，其中主模块将具有所有 Android 细节，而核心模块将具有普通旧 Java 对象 (POJO) 和 JUnit 优点。

最近我开始在一个 Android 项目上工作，在那里我开发了一个库来处理一些低级别的 android 特定工作并将其作为高级操作公开给主模块。问题是我需要在库模块中使用 JUnit，但我不想打破另一个模块来这样做。在一个理想的世界里，我会：

主模块：包括所有高级 UI 和控制器逻辑，用于在活动、片段等之间导航。依赖于 MyLib。

MyLib：包含封装低级逻辑的高级接口，以处理诸如 android 特定网络、持久性、加速度计读取等事情。许多 POJO 涉及一些低级逻辑。还包括一个示例或演示应用程序，可直接使用这些界面。包括在 POJO 上运行 JUnit 的能力。

我是在做白日梦，还是有办法使用当前的开发工具智能地设置它？我主要使用 IntelliJ Idea，但也会对 Eclipse 特定的解决方案开放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:36:34.810

直接在 JUnit 测试运行器中运行测试会遇到的问题是您将无法调用任何 com.android.* 类。这是因为 android.jar 中的这些类在您的 SDK 中被存根。只有这些的 Dalvik 字节代码版本具有仅在模拟器中运行的实际实现。

避免调用 com.android.* 类是非常困难的，特别是考虑到这么多 Android 方法需要一个 Context。

我也觉得这有点令人沮丧，因为模拟器启动速度很慢，执行代码也很慢。它使测试开发非常乏味。

我在没有模拟器的情况下使用 JUnit 测试运行程序的唯一运气是创建了一个指向我的项目文件的单独的非 Android 项目。这允许我在模拟器之外启动 JUnit，但是我可以实际测试的类非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:24:33.637

简而言之

*   使用 Junit 测试类和静态方法。
*   使用 Instrumentation 测试您的应用的点击用户体验响应

仪器入门很痛苦，需要时间来学习。因此，在 hello worlds 中投入大量时间。它是一个全新的世界。

# c# - RavenDB 对非标识符属性的跨实体查询匹配

> ID：14322959
> 
> 赞同：2
> 
> 时间：2013-01-14T16:56:28.163
> 
> 标签：c#, linq, mapreduce, ravendb

我在 RavenDB 中有以下实体集合：

```
public class EntityA
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string[] Tags { get; set; }
}

public class EntityB
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string[] Tags { get; set; }
} 
```

唯一共享的是`Tags`集合： 的标签`EntityA`可能存在于 中`EntityB`，因此它们可能相交。

如何检索每个`EntityA`具有相交标签且`EntityB`其`Name`属性`EntityB`等于给定值的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:04:19.420

嗯，这是一个困难的。要做到这一点，您需要两个级别的缩减 - 一个通过标签来扩展您的结果，另一个通过 id 将其折叠回来。Raven 没有简单的方法来做到这一点。

您可以使用 Transform 来伪造它。唯一的问题是您将[跳过](http://ravendb.net/docs/faq/skipped-results)结果集中的项目，因此请确保您知道[如何处理这些](http://ravendb.net/docs/client-api/querying/paging).

```
public class TestIndex : AbstractMultiMapIndexCreationTask<TestIndex.Result>
{
    public class Result
    {
        public string[] Ids { get; set; }
        public string Name { get; set; }
        public string Tag { get; set; }
    }

    public TestIndex()
    {
        AddMap<EntityA>(entities => from a in entities
                                    from tag in a.Tags.DefaultIfEmpty("_")
                                    select new
                                        {
                                            Ids = new[] { a.Id },
                                            Name = (string) null,
                                            Tag = tag
                                        });

        AddMap<EntityB>(entities => from b in entities
                                    from tag in b.Tags
                                    select new
                                        {
                                            Ids = new string[0],
                                            b.Name,
                                            Tag = tag
                                        });

        Reduce = results => from result in results
                            group result by result.Tag
                            into g
                            select new
                                {
                                    Ids = g.SelectMany(x => x.Ids),
                                    g.First(x => x.Name != null).Name,
                                    Tag = g.Key
                                };

        TransformResults = (database, results) => 
                           results.SelectMany(x => x.Ids)
                                  .Distinct()
                                  .Select(x => database.Load<EntityA>(x));
    }
} 
```

[另请参阅此处](https://gist.github.com/4532842)的完整单元测试。

还有另一种方法，但我还没有测试过。那就是使用[Indexed Properties Bundle](http://ravendb.net/docs/server/bundles/indexed-properties)进行第一遍，然后将这些结果映射到第二遍。我一般都在试验这个，如果它有效，我会用结果更新这个答案。

# c# - 如何在重载中传递类实例

> ID：14322960
> 
> 赞同：0
> 
> 时间：2013-01-14T16:56:30.407
> 
> 标签：c#, class, object

我有一个我实例化`Character`的类的对象数组（ ）`Player``Form1`

我需要以另一种形式（`Combat`）使用这些对象，但我不确定如何传递它们。这是我尝试过的：

```
public partial class Form1: Form
 private void combatBtn_Click(object sender, EventArgs e)
    {
        Form combat = new Combat(Character[0-9]);

        combat.ShowDialog();

    }

public partial class Combat : Form
  {

    Player[] character = new Player[9];

    public Combat(Player chars[0-9])
    {
        InitializeComponent();

        for (int i = 0; i > 9; i++)
        {
            character[i] = chars[i];
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:59:49.700

您可以将属性添加到`Combat`父表单并从其设置：

```
public partial class Combat : Form
{
    public Player[] Characters { get; set; }
} 
```

然后您可以在创建表单时设置该属性：

```
private void combatBtn_Click(object sender, EventArgs e)
{
    Combat combat = new Combat();
    combat.Characters = somePlayerArray;

    combat.ShowDialog();
} 
```

# c# - 尝试在 C# 中为文件名创建自定义正则表达式

> ID：14322966
> 
> 赞同：-1
> 
> 时间：2013-01-14T16:56:47.430
> 
> 标签：c#, regex

我有多个需要解析的文件名。这些文件之间的一个共同点是级别（修订）是点之前的最后一个字母。我还需要一个接受连字符 (-) 的正则表达式。

文件名示例：

1.  068394B.dwg
2.  06841213E.dwg
3.  420676-.dwg

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:06:14.560

尝试这个

```
@"^\d*[a-zA-Z\-]\.dwg$" 
```

c# 的语法也应该相同

* * *

如果您需要捕获组，您可以使用括号来执行此操作。

例如：

```
@"^(\d*)([a-zA-Z\-])\.dwg$" 
```

最后将捕获您的号码和您的代码。

您`Match`应该有一个集合，称为`Groups`第一个将是完整匹配，随后的将是括号中的组。

* * *

[此参考页面上](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)的更多详细信息

[这是一个示例](http://rubular.com/r/i8MiTHl9Sc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:01:40.810

好吧，你真的不需要正则表达式。您可以使用`Path.GetFileNameWithoutExtension`and`Path.GetExtension`来获取名称和扩展部分。然后使用`name.Substring(0, name.Length - 1)`and`name[name.Length-1]`获得编号和修订。

用于`Int32.TryParse`检查数字是否为数字，并`if ((ext >= 'A' && ext <= 'Z') || ext == '-')`检查修订是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:01:38.723

考虑到你有一个文件名列表`lstFn`

你可以做

```
List<string> lstPFn=lstFn.Where(f=>Regex.IsMatch(f,@"^.*\.d.*$"))
                         .ToList<string>(); 
```

# search - 带有特殊字符的 sphinx 搜索 (č š đ ž,..)

> ID：14322967
> 
> 赞同：2
> 
> 时间：2013-01-14T16:56:49.163
> 
> 标签：search, special-characters, sphinx

我正在使用狮身人面像搜索服务器。目前，如果我想查找单词为“čebula”，我必须在搜索中写“čebula”。我想将其配置为能够使用关键字“cebula”或“ćebula”等查找结果。我也希望与例如“fällen”一起使用。它应该双向工作，因此搜索 fe“cesnja”也应该找到结果“češnja”。

这是我在 sphinx.conf 中的当前设置：

```
source src
{
    type            = mysql
    sql_host        = ****
    sql_user        = ****
    sql_pass        = ****
    sql_db          = ****
    sql_port        = 3306

    sql_query       = \
        SELECT id, Title, Content \
        FROM Post
    sql_ranged_throttle = 0

    sql_query_pre = SET CHARACTER_SET_RESULTS=utf8
    sql_query_pre = SET NAMES utf8
}

index idx1
{
    source          = src
    path            = /usr/local/sphinx/var/data/idx1
    docinfo         = extern
    mlock           = 0

    morphology      = metaphone

    expand_keywords = 1
    enable_star     = 1
    min_prefix_len = 3
    min_word_len        = 1

    charset_type        = utf-8
    charset_table = 0..9, a..z, _, A..Z->a..z,-, U+002C, \
    U+010C->U+010D, U+0106->U+0107, U+0160->U+0161, U+017D->U+017E, \
    U+010D->c,U+0107->c, U+0161->s, U+017E->z, \
    U+010D, U+0107, U+0161, U+017E
} 
```

我尝试过使用不同的形态，但没有运气

```
index idx2: idx1
{
    morphology      = metaphone, stem_en, soundex
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:16:06.670

您的问题的解决方案是`charset_table`配置变量。可以在此处找到相关文档：http: [//sphinxsearch.com/docs/current.html#conf-charset-table](http://sphinxsearch.com/docs/current.html#conf-charset-table)

这是`charset_table`我使用的：

```
charset_table = 0..9, a..z, _, A..Z->a..z, U+00C0->a, U+00C1->a,
    U+00C2->a, U+00C3->a, U+00C4->a, U+00C5->a, U+00C7->c, U+00C8->e,
    U+00C9->e, U+00CA->e, U+00CB->e, U+00CC->i, U+00CD->i, U+00CE->i,
    U+00CF->i, U+00D1->n, U+00D2->o, U+00D3->o, U+00D4->o, U+00D5->o,
    U+00D6->o, U+00D8->o, U+00D9->u, U+00DA->u, U+00DB->u, U+00DC->u,
    U+00DD->y, U+00E0->a, U+00E1->a, U+00E2->a, U+00E3->a, U+00E4->a,
    U+00E5->a, U+00E7->c, U+00E8->e, U+00E9->e, U+00EA->e, U+00EB->e,
    U+00EC->i, U+00ED->i, U+00EE->i, U+00EF->i, U+00F1->n, U+00F2->o,
    U+00F3->o, U+00F4->o, U+00F5->o, U+00F6->o, U+00F8->o, U+00F9->u,
    U+00FA->u, U+00FB->u, U+00FC->u, U+00FD->y, U+00FF->y, U+0100->a,
    U+0101->a, U+0102->a, U+0103->a, U+0104->a, U+0105->a, U+0106->c,
    U+0107->c, U+0108->c, U+0109->c, U+010A->c, U+010B->c, U+010C->c,
    U+010D->c, U+010E->d, U+010F->d, U+0112->e, U+0113->e, U+0114->e,
    U+0115->e, U+0116->e, U+0117->e, U+0118->e, U+0119->e, U+011A->e,
    U+011B->e, U+011C->g, U+011D->g, U+011E->g, U+011F->g, U+0120->g,
    U+0121->g, U+0122->g, U+0123->g, U+0124->h, U+0125->h, U+0128->i,
    U+0129->i, U+012A->i, U+012B->i, U+012C->i, U+012D->i, U+012E->i,
    U+012F->i, U+0130->i, U+0134->j, U+0135->j, U+0136->k, U+0137->k,
    U+0139->l, U+013A->l, U+013B->l, U+013C->l, U+013D->l, U+013E->l,
    U+0142->l, U+0143->n, U+0144->n, U+0145->n, U+0146->n, U+0147->n,
    U+0148->n, U+014C->o, U+014D->o, U+014E->o, U+014F->o, U+0150->o,
    U+0151->o, U+0154->r, U+0155->r, U+0156->r, U+0157->r, U+0158->r,
    U+0159->r, U+015A->s, U+015B->s, U+015C->s, U+015D->s, U+015E->s,
    U+015F->s, U+0160->s, U+0161->s, U+0162->t, U+0163->t, U+0164->t,
    U+0165->t, U+0168->u, U+0169->u, U+016A->u, U+016B->u, U+016C->u,
    U+016D->u, U+016E->u, U+016F->u, U+0170->u, U+0171->u, U+0172->u,
    U+0173->u, U+0174->w, U+0175->w, U+0176->y, U+0177->y, U+0178->y,
    U+0179->z, U+017A->z, U+017B->z, U+017C->z, U+017D->z, U+017E->z,
    U+01A0->o, U+01A1->o, U+01AF->u, U+01B0->u, U+01CD->a, U+01CE->a,
    U+01CF->i, U+01D0->i, U+01D1->o, U+01D2->o, U+01D3->u, U+01D4->u,
    U+01D5->u, U+01D6->u, U+01D7->u, U+01D8->u, U+01D9->u, U+01DA->u,
    U+01DB->u, U+01DC->u, U+01DE->a, U+01DF->a, U+01E0->a, U+01E1->a,
    U+01E6->g, U+01E7->g, U+01E8->k, U+01E9->k, U+01EA->o, U+01EB->o,
    U+01EC->o, U+01ED->o, U+01F0->j, U+01F4->g, U+01F5->g, U+01F8->n,
    U+01F9->n, U+01FA->a, U+01FB->a, U+0200->a, U+0201->a, U+0202->a,
    U+0203->a, U+0204->e, U+0205->e, U+0206->e, U+0207->e, U+0208->i,
    U+0209->i, U+020A->i, U+020B->i, U+020C->o, U+020D->o, U+020E->o,
    U+020F->o, U+0210->r, U+0211->r, U+0212->r, U+0213->r, U+0214->u,
    U+0215->u, U+0216->u, U+0217->u, U+0218->s, U+0219->s, U+021A->t,
    U+021B->t, U+021E->h, U+021F->h, U+0226->a, U+0227->a, U+0228->e,
    U+0229->e, U+022A->o, U+022B->o, U+022C->o, U+022D->o, U+022E->o,
    U+022F->o, U+0230->o, U+0231->o, U+0232->y, U+0233->y, U+1E00->a,
    U+1E01->a, U+1E02->b, U+1E03->b, U+1E04->b, U+1E05->b, U+1E06->b,
    U+1E07->b, U+1E08->c, U+1E09->c, U+1E0A->d, U+1E0B->d, U+1E0C->d,
    U+1E0D->d, U+1E0E->d, U+1E0F->d, U+1E10->d, U+1E11->d, U+1E12->d,
    U+1E13->d, U+1E14->e, U+1E15->e, U+1E16->e, U+1E17->e, U+1E18->e,
    U+1E19->e, U+1E1A->e, U+1E1B->e, U+1E1C->e, U+1E1D->e, U+1E1E->f,
    U+1E1F->f, U+1E20->g, U+1E21->g, U+1E22->h, U+1E23->h, U+1E24->h,
    U+1E25->h, U+1E26->h, U+1E27->h, U+1E28->h, U+1E29->h, U+1E2A->h,
    U+1E2B->h, U+1E2C->i, U+1E2D->i, U+1E2E->i, U+1E2F->i, U+1E30->k,
    U+1E31->k, U+1E32->k, U+1E33->k, U+1E34->k, U+1E35->k, U+1E36->l,
    U+1E37->l, U+1E38->l, U+1E39->l, U+1E3A->l, U+1E3B->l, U+1E3C->l,
    U+1E3D->l, U+1E3E->m, U+1E3F->m, U+1E40->m, U+1E41->m, U+1E42->m,
    U+1E43->m, U+1E44->n, U+1E45->n, U+1E46->n, U+1E47->n, U+1E48->n,
    U+1E49->n, U+1E4A->n, U+1E4B->n, U+1E4C->o, U+1E4D->o, U+1E4E->o,
    U+1E4F->o, U+1E50->o, U+1E51->o, U+1E52->o, U+1E53->o, U+1E54->p,
    U+1E55->p, U+1E56->p, U+1E57->p, U+1E58->r, U+1E59->r, U+1E5A->r,
    U+1E5B->r, U+1E5C->r, U+1E5D->r, U+1E5E->r, U+1E5F->r, U+1E60->s,
    U+1E61->s, U+1E62->s, U+1E63->s, U+1E64->s, U+1E65->s, U+1E66->s,
    U+1E67->s, U+1E68->s, U+1E69->s, U+1E6A->t, U+1E6B->t, U+1E6C->t,
    U+1E6D->t, U+1E6E->t, U+1E6F->t, U+1E70->t, U+1E71->t, U+1E72->u,
    U+1E73->u, U+1E74->u, U+1E75->u, U+1E76->u, U+1E77->u, U+1E78->u,
    U+1E79->u, U+1E7A->u, U+1E7B->u, U+1E7C->v, U+1E7D->v, U+1E7E->v,
    U+1E7F->v, U+1E80->w, U+1E81->w, U+1E82->w, U+1E83->w, U+1E84->w,
    U+1E85->w, U+1E86->w, U+1E87->w, U+1E88->w, U+1E89->w, U+1E8A->x,
    U+1E8B->x, U+1E8C->x, U+1E8D->x, U+1E8E->y, U+1E8F->y, U+1E96->h,
    U+1E97->t, U+1E98->w, U+1E99->y, U+1EA0->a, U+1EA1->a, U+1EA2->a,
    U+1EA3->a, U+1EA4->a, U+1EA5->a, U+1EA6->a, U+1EA7->a, U+1EA8->a,
    U+1EA9->a, U+1EAA->a, U+1EAB->a, U+1EAC->a, U+1EAD->a, U+1EAE->a,
    U+1EAF->a, U+1EB0->a, U+1EB1->a, U+1EB2->a, U+1EB3->a, U+1EB4->a,
    U+1EB5->a, U+1EB6->a, U+1EB7->a, U+1EB8->e, U+1EB9->e, U+1EBA->e,
    U+1EBB->e, U+1EBC->e, U+1EBD->e, U+1EBE->e, U+1EBF->e, U+1EC0->e,
    U+1EC1->e, U+1EC2->e, U+1EC3->e, U+1EC4->e, U+1EC5->e, U+1EC6->e,
    U+1EC7->e, U+1EC8->i, U+1EC9->i, U+1ECA->i, U+1ECB->i, U+1ECC->o,
    U+1ECD->o, U+1ECE->o, U+1ECF->o, U+1ED0->o, U+1ED1->o, U+1ED2->o,
    U+1ED3->o, U+1ED4->o, U+1ED5->o, U+1ED6->o, U+1ED7->o, U+1ED8->o,
    U+1ED9->o, U+1EDA->o, U+1EDB->o, U+1EDC->o, U+1EDD->o, U+1EDE->o,
    U+1EDF->o, U+1EE0->o, U+1EE1->o, U+1EE2->o, U+1EE3->o, U+1EE4->u,
    U+1EE5->u, U+1EE6->u, U+1EE7->u, U+1EE8->u, U+1EE9->u, U+1EEA->u,
    U+1EEB->u, U+1EEC->u, U+1EED->u, U+1EEE->u, U+1EEF->u, U+1EF0->u,
    U+1EF1->u, U+1EF2->y, U+1EF3->y, U+1EF4->y, U+1EF5->y, U+1EF6->y,
    U+1EF7->y, U+1EF8->y, U+1EF9->y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T07:22:21.080

这是一个可以为您提供大多数语言的字符集的资源。只需为您要支持的语言复制并粘贴这些字符集 - 只需检查字符集之间的重叠即可。特别是在拉丁语和其他欧洲语言之间。

[http://sphinxsearch.com/wiki/doku.php?id=charset_tables](http://sphinxsearch.com/wiki/doku.php?id=charset_tables)

# php - 为什么即使删除了配置，return ViewModel() 仍然有效？

> ID：14322970
> 
> 赞同：0
> 
> 时间：2013-01-14T16:56:54.083
> 
> 标签：php, zend-framework2

在与 ZF2 一起使用的基本示例应用程序中，IndexController 的编码如下：

```
namespace Application\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;

class IndexController extends AbstractActionController
{
    public function indexAction()
    {
        return new ViewModel();
    }
} 
```

只有一个简单的 return 语句，其内容`index.phtml`会自动包含在输出中。

我看到`index.phtml`引用的唯一地方是`\module\Application\config\module.config.php`

```
'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ), 
```

我试过评论这条线：

```
//'application/index/index' => __DIR__ . '/../view/application/index/index.phtml', 
```

但是 index.phtml 仍然包含在输出中。

**那么问题来了，为什么要包括在内？幕后发生了什么神奇的事情，使它仍然被包括在内？**

在我看来，也许我错过了一些由 ZF2 处理的基本自动映射，我无法在文档中找到这些映射。但是如果有一些自动映射，为什么那条线存在于`module.config.php`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:13:58.687

所以事实证明存在冗余`module.config.php`

```
'view_manager' => array(
        'display_not_found_reason' => true,
        'display_exceptions'       => true,
        'doctype'                  => 'HTML5',
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
            'layout/layout'           => __DIR__ . '/../view/layout/layout.phtml',
            'application/index/index' => __DIR__ . '/../view/application/index/index.phtml',
            'error/404'               => __DIR__ . '/../view/error/404.phtml',
            'error/index'             => __DIR__ . '/../view/error/index.phtml',
        ),
        'template_path_stack' => array(
            __DIR__ . '/../view',
        ),
    ), 
```

此行是静态映射：

```
'application/index/index' => __DIR__ . '/../view/application/index/index.phtml', 
```

这些行是动态映射：

```
'template_path_stack' => array(
    __DIR__ . '/../view',
), 
```

这个页面上的**使用**部分让我很清楚。 [http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html](http://framework.zend.com/manual/2.0/en/modules/zend.view.quick-start.html)

它尽可能使用静态映射来提高性能，然后故障转移到动态映射。注释掉这两个实际上会导致错误，ViewModel() 找不到要包含的页面。

`Fatal error: Uncaught exception 'Zend\View\Exception\RuntimeException' with message 'Zend\View\Renderer\PhpRenderer::render: Unable to render template "application/index/index"; resolver could not resolve to a file'`

# entity-framework - 如何通过 Ninject 在 UnitOfWork 中获取 DbContext 实例？

> ID：14322971
> 
> 赞同：3
> 
> 时间：2013-01-14T16:56:54.230
> 
> 标签：entity-framework, entity-framework-4, ninject, unit-of-work, ninject.web.mvc

我使用 UnitOfWork 模式和实体框架来使用下面的代码公开 DbContext。所以我的问题是，用 Ninject 获取 Context 实例是否可行？

**工作单位**

```
public interface IUnitOfWork<C> :  IDisposable
{
        int Commit();
        C GetContext { get; set; }
} 
```

**工作单位**

```
public class UnitOfWork<C> : IUnitOfWork<C> where C : DbContext
    {
        private bool _disposed;
        private readonly C _dbContext = null;

        public UnitOfWork()
        {
            GetContext = _dbContext ?? Activator.CreateInstance<C>();
        }

        public int Commit()
        {
            return GetContext.SaveChanges();
        }

        public C GetContext
        {
            get;
            set;
        }
[...] 
```

现在在**NinjectWebCommon**

```
private static void RegisterServices(IKernel kernel)
{
  kernel.Bind<IUnitOfWork<MyDbContext>>().To<UnitOfWork<MyDbContext>>().InRequestScope();
  kernel.Bind<IEmployeeRepository>().To<EmployeeRepository>();
} 
```

如果不使用`_dbContext ?? Activator.CreateInstance<C>();`，是否可以通过**Ninject获取****DbContext**实例？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:03:51.167

是的，有可能 。检查下面的解决方案

**Ninject DI 配置**

```
kernel.Bind<MyDbContext>().ToSelf().InRequestScope();
kernel.Bind<IUnitOfWork<MyDbContext>>().To<UnitOfWork<MyDbContext>>();
kernel.Bind<IEmployeeRepository>().To<EmployeeRepository>(); 
```

在**UnitOfWork中**

```
 public class UnitOfWork<C> : IUnitOfWork<C> where C : DbContext
    {
        private readonly C _dbcontext;

        public UnitOfWork(C dbcontext)
        {
            _dbcontext = dbcontext;
        }

        public int Commit()
        {
           return _dbcontext.SaveChanges();
        }

        public C GetContext
        {
            get
            {
                return _dbcontext;
            }

        }
[...] 
```**

# android - 读取 json 文件并在 textview 列表中显示信息

> ID：14322975
> 
> 赞同：0
> 
> 时间：2013-01-14T16:57:05.767
> 
> 标签：android, json, android-listview, textview

是否可以有一个没有可点击行的视图列表？我有我想从 json 文件中读取的信息（我可以这样做），然后在列表中显示该信息（我不知道如何做那个 atm（我也需要帮助，但我会首先自己尝试更多）），但是如果我按下一行，我不希望它被突出显示几秒钟。我尝试将 ListView 更改为 TextView，但随后 setAdapter 出现错误。有可能这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:10:06.463

我认为您想要做的是`setItemsCanFocus`在您的列表视图上使用。这允许您设置列表项是否可聚焦（即可以突出显示）。您可以在 ListView 的 android 文档中 找到有关它[的更多信息。](http://developer.android.com/reference/android/widget/ListView.html#setItemsCanFocus%28boolean%29)

# windows - Windows CMD：如何创建指向可执行文件的符号链接？

> ID：14322980
> 
> 赞同：16
> 
> 时间：2013-01-14T16:57:16.673
> 
> 标签：windows, shell

我的目标是在我的 PATH 中添加一些可执行文件（例如 chrome），以便我可以调用

```
> chrome 
```

从命令提示符开始，它将启动 Chrome。

我知道我可以将 Chrome 的包含目录添加到我的路径`set PATH=%PATH%<chrome_path_here>;`（我自己的路。

Chrome 可执行文件位于

```
C:\Program Files (x86)\Google\Chrome\Application\chrome.exe 
```

所以我尝试了

```
> mklink chrome.exe "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" 
```

这成功地为文件创建了一个符号链接（在输出中这样说，并在检查时使用`> dir`）。我知道我的 PATH 设置正确，当我运行`> where chrome`它时 b/c 会找到我的新符号链接。

但是，当我尝试使用新链接执行 chrome 时，什么也没有发生。应该会出现一个新的空窗口，但没有任何反应。命令提示符或任何内容中没有错误消息。

我究竟做错了什么？我是否误解了 Windows 中的符号链接？这是我一直在 Linux 中使用的方法，但我是 Windows Cmd 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T17:20:14.750

大多数程序不会从它们安装位置以外的地方运行 - 这正是您尝试从符号链接运行它时发生的情况。

在该文件夹中创建具有匹配名称的 CMD/BAT 文件会容易得多，这些文件将从您想要的位置启动程序：

```
REM chrome.cmd
start /b cmd /c "C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" %* 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-06-18T17:25:08.437

在 Windows 7 中，我确认*符号链接不起作用*，就像原始问题中所报告的那样被忽略。

正如[Harry](https://stackoverflow.com/users/886887/harry-johnston)在他的评论中所说，快捷方式**确实**有效，对我来说，比为我想在 CMD 下启用的每个新命令编写单独的脚本更简单、更容易。

他指出您需要将 .lnk 添加到您的 PATHEXT 变量中才能执行此操作。我确认这确实有效，并且将 .lnk 添加到 PATHEXT 我可以简单地输入快捷方式的名称部分来运行命令。例如，如果我的快捷方式名为“sublime.lnk”并且 PATHEXT 包含 .lnk，我可以使用简单的命令“sublime”执行链接。好的！

作为替代方案，我发现如果我在 CMD 提示符下简单地输入快捷方式的全名，包括 .lnk，则不需要修改 PATHEXT。例如，我在 %HOMEPATH%/bin 下创建了一个名为“sublime.lnk”的快捷方式，指向“C:\Program Files\Sublime Text 2\sublime_text.exe”。

现在通过将 %HOMEPATH%\bin 放在我的 %PATH% 中，我可以通过命令“sublime.lnk”运行 sublime。

以上任何一种方法都是我所知道的从 CMD 提示符访问 Windows 文件系统周围的各种命令的最佳方式。虽然我不是 Windows 专家，但我欢迎更好或更标准化的解决方案来解决这个问题。

* * *

PS：我刚刚发现您需要确保以这种方式使用的任何快捷方式的“开始于：”属性被清空，否则您的程序将不会在您调用快捷方式的目录中启动。

* * *

PPS：在相关说明中，我发现了如何在您的 CMD 会话登录到的目录上运行 Windows 资源管理器（或其替代品）`start .`：.

# javascript - jQuery ajax 函数中 contentType 和 dataType 的区别

> ID：14322984
> 
> 赞同：132
> 
> 时间：2013-01-14T16:57:28.310
> 
> 标签：javascript, ajax, jquery

我有以下 Jquery 回调函数，对此我有点怀疑（我不太了解 Jquery）：

```
$("form.readXmlForm").submit(function() {
    // Riferimento all'elemento form che ha scatenato il submit 
    var form = $(this);
    // Variabile che contiene il riferimento al bottone clickato 
    var button = form.children(":first");

    $.ajax({        // Viene eseguita la chiamata AJAX 
        type: "POST", // Tipo di richiesta: POST 
        // URL verso quale viene inviata la richiesta
        url: form.attr("action"),    
        // Dati XML inviati: 
        data: "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><javaBean><foo>bar</foo><fruit>apple</fruit></javaBean>", 
        // Tipo di media type accettabile dalla response: 
        contentType: "application/xml", 
        dataType: "text", 

        success: function(text) { 
            MvcUtil.showSuccessResponse(text, button); 
        }, 

        error: function(xhr) { 
            MvcUtil.showErrorResponse(xhr.responseText, button); 
        }
    }); 
```

正如你所看到的，这个函数只是简单地向后端执行一个 AJAX 请求，为这个请求设置参数。

我已将请求发送到 URL，请求是 POST 请求，并且我发送的数据是以下字符串：

“巴拉普”

我很难理解**contentType**和**dataType之间的区别**

我认为**contentType**指定了 HTTP 响应中可接受的数据类型，对吗？

和数据类型？说啥？我在 HTTP 请求中发送的数据类型？

在这种情况下是“文本”，因为我正在发送一个表示 XML 代码的文本字符串？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2013-01-14T16:59:38.823

从[文档](http://api.jquery.com/jQuery.ajax/)中：

> contentType（默认值：'application/x-www-form-urlencoded; charset=UTF-8'）
> 
> 类型：字符串
> 
> 向服务器发送数据时，使用此内容类型。默认为“application/x-www-form-urlencoded; charset=UTF-8”，在大多数情况下都可以。如果您明确地将内容类型传递给 $.ajax()，那么它将始终被发送到服务器（即使没有发送数据）。如果没有指定字符集，数据将使用服务器的默认字符集传输到服务器；您必须在服务器端对此进行适当解码。

和：

> 数据类型（默认：智能猜测（xml、json、脚本或 html））
> 
> 类型：字符串
> 
> 您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它（XML MIME 类型将产生 XML，在 1.4 中 JSON 将产生一个 JavaScript 对象，在 1.4 中脚本将执行脚本，其他任何东西都会作为字符串返回）。

它们本质上与您认为的相反。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2015-08-15T21:42:13.750

[![在此处输入图像描述](../Images/95e27cd4ba772b67adf8964c5d713215.png)](https://i.stack.imgur.com/VwHaT.png)

用英语：

*   `ContentType`：向服务器发送数据时，使用此内容类型。默认为`application/x-www-form-urlencoded; charset=UTF-8`，这在大多数情况下都很好。
*   `Accepts`：在请求头中发送的内容类型，告诉服务器它将接受什么样的响应作为回报。取决于`DataType`.
*   `DataType`：您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它。可以`text, xml, html, script, json, jsonp`。

# android - 跨活动访问 LRU 磁盘缓存的问题

> ID：14322987
> 
> 赞同：1
> 
> 时间：2013-01-14T16:57:43.150
> 
> 标签：android, android-listview, android-image

我正在使用[Jake Wharton 的 LRU 磁盘缓存](https://github.com/JakeWharton/DiskLruCache)来存储和检索在 ListView 中显示的位图。只要我在同一个活动中存储和访问位图，它就可以正常工作。但是，如果我尝试从应用程序中的其他活动访问缓存（即，我不必下载相同的图像两次），我会得到一个 NullPointerException。我在这里错过了什么吗？这不是可以/将要删除文件的内存缓存。只要我将它们指向内部存储中的正确目录，不应该从应用程序中的所有活动访问磁盘缓存吗？

```
01-14 22:53:44.465: E/AndroidRuntime(10720): java.lang.NullPointerException
01-14 22:53:44.465: E/AndroidRuntime(10720): at java.util.regex.Matcher.reset(Matcher.java:181)
01-14 22:53:44.465: E/AndroidRuntime(10720): at java.util.regex.Matcher.<init>(Matcher.java:94)
01-14 22:53:44.465: E/AndroidRuntime(10720): at java.util.regex.Pattern.matcher(Pattern.java:290)
01-14 22:53:44.465: E/AndroidRuntime(10720): at com.example.echofriendly.DiskLruCache.validateKey(DiskLruCache.java:629)
01-14 22:53:44.465: E/AndroidRuntime(10720): at com.example.echofriendly.DiskLruCache.get(DiskLruCache.java:375)
01-14 22:53:44.465: E/AndroidRuntime(10720): at com.example.echofriendly.DiskLruImageCache.containsKey(DiskLruImageCache.java:145)
01-14 22:53:44.465: E/AndroidRuntime(10720): at com.example.echofriendly.ChatroomFragment.getMessages(ChatroomFragment.java:309)
01-14 22:53:44.465: E/AndroidRuntime(10720): at com.example.echofriendly.ChatroomFragment.access$3(ChatroomFragment.java:284)
01-14 22:53:44.465: E/AndroidRuntime(10720): at com.example.echofriendly.ChatroomFragment$2.run(ChatroomFragment.java:94)
01-14 22:53:44.465: E/AndroidRuntime(10720): at java.lang.Thread.run(Thread.java:1019) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:18:29.453

> 只要我将它们指向内部存储中的正确目录，不应该从应用程序中的所有活动访问磁盘缓存吗？

听起来您在需要它的每个 Activity 中都实例化缓存。我不认为这是一个好主意。由于 Jake 的 LruCache 使用日志，在同一目录上工作的不同实例在我看来很容易分散彼此的注意力。

我的建议是，您可以引入某种单例作为活动和缓存之间的层，或者只存储对整个应用程序的一个缓存实例的引用。

此外，我建议您使用某种两级缓存，例如结合磁盘缓存的内存缓存（这是我在我的应用程序中所做的）。因此，您可以首先检查内存缓存，如果图像缓存在那里，则可以非常快速地获取图像。（可以是同步的）如果不存在，请询问磁盘缓存。（应该是异步的）最后一次调用你会下载它。（也是异步的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:44:32.857

清理 Activity 时可能会破坏缓存。检查库中的回调以获取此类清理调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T21:28:02.917

我有同样的问题：几个活动使用相同的缓存。出现了两个问题： - 缓存从未被驱逐......我认为原因是第二点 - 如果在活动 A 之后调用活动 B： - 活动 B 已启动并打开缓存（但活动 A 不会关闭缓存然而！） - 活动 A 在 onStop() 方法中关闭缓存......而 B 刚刚打开它......

我的解决方案是为每个活动提供一个缓存目录：

```
// retrieve the name of the activity
String nameActivity = ModelActivity.getCurrentActivity().getClass().getSimpleName();

// set the cache directory with a name related to the activity
    DiskLruImageCache imageDiskCache = new DiskLruImageCache(ModelActivity.getCurrentContext(), 
                        "cacheMediaActivity"+nameActivity, 
                        DISK_CACHE_SIZE, 
                        CompressFormat.JPEG, 
                        70); 
```

它对我有用！

# node.js - 第一次 Heroku 部署失败 `error code=H10`

> ID：14322989
> 
> 赞同：116
> 
> 时间：2013-01-14T16:57:54.167
> 
> 标签：node.js, heroku, express

我将我的应用程序部署到 Heroku。这是一个 node.js + express + socket.io 应用程序，这是`package.json`文件

```
{
  "name": "game_test",
  "author": "Ilya",
  "description": "A test app for our board game",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "3.0.6",
    "jade": "*",
    "socket.io" : "*"
  },
 "engines": {
      "node": "0.8.14"
  }
} 
```

这是我得到的日志：

```
heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=game-test-1.herokuapp.com fwd=37.26.146.185 dyno= queue= wait= connect= service= status=503 bytes=
heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=game-test-1.herokuapp.com fwd=37.26.146.185 dyno= queue= wait= connect= service= status=503 bytes= 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2013-06-08T22:40:10.090

在这里为我找到了解决方案：[Heroku + node.js 错误（Web 进程在启动后 60 秒内无法绑定到 $PORT）](https://stackoverflow.com/questions/15693192/heroku-node-js-error-web-process-failed-to-bind-to-port-within-60-seconds-of)

在我的情况下，我的应用程序崩溃了，因为我很难设置 PORT，而不是使用 heroku dinamicaly 设置的端口，可以使用`process.env.PORT`

```
app.listen(process.env.PORT || 3000, function(){
  console.log("Express server listening on port %d in %s mode", this.address().port, app.settings.env);
}); 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2016-01-12T14:46:18.927

我的应用程序也遇到了类似的问题，我在迁移数据库后遇到了这个问题，在尝试了很多选项之后，对我有帮助的一个是：

```
heroku restart 
```

（使用 Heroku toolbelt for mac）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-02-20T15:54:48.543

我有这个问题，唯一的问题是我的 Procfile 是这样的

```
web : node index.js 
```

我改为

```
web:node index.js 
```

唯一的问题是空格

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-06T13:14:25.700

就我而言，我发现了同样的错误，因为我的本地机器上的 node 和 npm 存在版本差异并在 package.json 版本中定义。

```
"engines": {
  "node": "0.8",
  "npm": "1.2.x"
} 
```

当我检查使用

```
node --version : v0.10.41
npm --version : 1.4.29 
```

当我将 package.json 更新为

```
 "engines": {
  "node": "0.10.41",
  "npm": "1.4.29"
} 
```

它工作正常:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-28T13:18:28.667

在我的情况下，添加`process.env.PORT || 3000`到我的 http 服务器脚本，已解决。我的 heroku 日志报告了“H20”错误和 503 http 状态。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-30T03:11:44.673

就我而言，我的 Procfile 指向了错误的文件（我之前使用的 bot.js），所以一旦我更新它，错误就消失了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-01-13T07:57:30.347

还要检查您的数据库连接。我忘记从 localhost 更改我的数据库连接，一旦它被推送到 heroku，这会使我的应用程序崩溃。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-09-30T21:54:38.600

`package.json`就我而言，文件的脚本部分没有启动命令。当我创建`package.json`文件时，`npm init`我没有创建启动脚本命令。所以我去了`package.json`文件，在脚本下我添加了一个新条目：

```
 "scripts": {
    "start": "node index.js"
  }, 
```

保存并上传到 Heroku 并且可以正常工作

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-09T05:58:28.943

使用 hapi18 后，我发现取出“主机”字段并将端口设置为：

`port: process.env.PORT || 5000`成功了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-04-14T14:12:56.453

旧线程，但我通过将 PORT 常量设置为 process.env.PORT || 来解决此问题

出于某种奇怪的原因，它想先搜索 Env。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-02T15:54:05.673

我有一个错字

`const PORT = process.env.PORT||'8080';`

以前是

`const PORT = process.env.port||'8080';`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-06-18T16:55:59.007

如果您`nodemon`像我一样在本地启动节点服务器，并且它在本地工作，请尝试`npm start`. Nodemon 告诉我没有错误，但是 npm start 以一种可以理解的方式告诉了我很多错误，然后我可以通过在此处关注另一个帖子来解决它们。我希望它对某人有所帮助。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-12-24T18:12:37.993

我遇到了同样的问题，上面的答案都没有帮助我。我所做的是运行：

```
node --version 
```

并在 package.json 中添加带有节点版本的引擎部分：

```
{
  "name": "myapp",
  "description": "a really cool app",
  "version": "1.0.0",
  "engines": {
    "node": "6.11.1"
  }
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-10-13T23:03:25.943

在我自己的情况下，我收到了这个错误，因为我拒绝将 Procfile 添加到我的节点 js 应用程序中并且我的“main”：“app.js”最初指向另一个 js 文件作为 main。所以做这些改变会为我解决问题

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-10-24T19:11:06.987

就我而言，我有**code=H10**和**status=503**因为我的 Procfile：

```
web: node build/server.js 
```

我在**.gitignore**中包含**/build**

 *** * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-12-14T22:00:07.193

就我而言，我忘记为部署设置数据库环境。您可以通过此命令设置 env（我使用 mLab 用于 MongoDB 服务器）

heroku 配置：设置 MONGO_URI='mongodb://address'

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-11-15T19:57:20.830

我的`start`命令有`env-cmd -f ./config/prod.env node index.js`.

更改为：`node index.js`它得到修复后。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2022-01-24T14:27:21.983

我遇到了同样的问题，问题是我的个人资料是这样的：

`web: gunicorn__init__:app`

**请注意上面的gunicorn**和**__ init __**之间没有空格

 **代替 `web: gunicorn __init__:app`

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-02-19T09:54:35.637

我的端口设置为`config.httpPort`解析为`80`. 我通过这样做来修复它：

```
const PORT = process.env.PORT || config.httpPort;

app.listen(PORT, ...) 
```

非常感谢，昨晚浪费了我很多时间。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-02-07T22:35:06.577

对我来说，它是 Package.json，尽管我认为我确实安装了它们，但它在依赖项中是空的。所以我不得不在最后使用 --save 选项重新安装它们并验证它们是否已添加到 package.json 中。然后再次推动它，它的工作。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-04-02T13:38:02.267

较旧的线程，但对我来说，我没有`.env`在 Heroku 控制台中设置我的变量。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-09-12T18:02:57.703

我想在这里注册这个错误的解决方案，这是一个未更新到 Github 的简单文件。

我有一个完整的堆栈项目，我的文件的结构既有后端的根目录，也有前端的客户端（我使用的是 React.js）。一切都归结为这样一个事实，即我错误地将客户端文件夹仅推送到 Github，并且我所有有错误的更改（在我的 index.js 中的对象实例中缺少逗号）都没有在后端更新。由于这个 Heroku 从 Github Repository 获取所有更新，我无法访问我的服务器并且错误仍然存​​在。然后我所要做的就是提交并推送到根目录并更新项目的所有更改，一切又恢复了工作。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-20T06:33:19.820

密码包含一个 % 为我打破了它。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-09-06T06:40:48.410

我得到了与“应用程序崩溃”和 H10 错误相同的上述错误，heroku 应用程序日志没有显示与错误消息原因相关的太多信息。然后我在 heroku 中重新启动了 dynos，然后它显示错误，在我的设置中的 index.js 文件之一中显示附加花括号。删除并在 heroku 上重新部署应用程序后，该问题得到解决。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-06-13T06:35:18.617

我正在使用抛出异常的body-Parser

```
const bodyParser = require('body-Parser')    
//Bodyparser Middleware
app.use(bodyparser.json()) 
```

而不是使用

```
 //Bodyparser Middleware
    app.use(express.json()) 
```

这解决了我的问题

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-02-05T05:20:09.567

对我来说，我把东西不必要地分成了单独的文件夹。我正在运行 dash 并且我将我的`Procfile`, 和`Pipfile`（和锁定）放在一起，但与我的应用程序的其他功能分开（`run.py`并且`app.py`，正在使用的页面的实际内容在子文件夹中）。所以将大部分内容结合在一起修复了我的 H10 错误

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-03-20T21:53:50.297

H10 错误代码可能意味着许多不同的事情。就我而言，第一次是因为我不知道 Heroku 与 Sqlite3 不兼容，第二次是因为我不小心在开发和生产中使用 Google Analytics 推送了更新。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-06-12T11:37:59.850

当我收到此错误时，我正在部署 python Django 框架，因为我忘记输入我的应用程序名称`web: gunicorn plaindjango.wsgi:application --log-file -`而不是`plaindjango`

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-01-13T23:18:12.537

我为同样的错误挣扎了几个小时，但我能够解决它。我错误地将 multer 和 aws-sdk 安装为 devDependencies，而不仅仅是依赖项。所以，任何有同样错误的人，只要仔细检查你的 package.json 文件。

此外，还有一个关于 package.json 中引擎属性的小提示。

```
enter code here
//The greater or equal operators will make sure that you use the right node 
//version 
//even if your current node is greater version than npm node

"engines": {
"node": ">= 0.8.14"
},

//insted of
"engines": {
  "node": "0.8.14"
} 
```****

# php - 如何仅在使用 javascript 显示行时运行 PHP 脚本并显示结果

> ID：14322994
> 
> 赞同：1
> 
> 时间：2013-01-14T16:58:15.637
> 
> 标签：php, javascript, ajax, soap

我真的不确定如何正确编码，所以如果有人能指出我正确的轨道，我会很高兴。

我将有一个 SOAP+XML 数组，它的值与 MYSQL 作业表相匹配。然后这些作业显示在一个隐藏行中。在每个隐藏行中，我将有 3 个单独的 SOAP+XML 请求，它们将显示 3 个其他信息位。然后，用户可以单击作业并使用 javascript，它会显示下面的隐藏行，因此会显示额外信息。

我现在的界面 1) [http://i.imgur.com/Cx7qB.png](http://i.imgur.com/Cx7qB.png) 2) [http://i.imgur.com/HzXe5.png](http://i.imgur.com/HzXe5.png)

问题是当我扩大规模时，如果用户选择在页面上显示 100 个作业。我需要为第一个 SOAP+XML 请求访问服务器以获取作业，然后对于每个作业，再单击 3 次。因此，如果我要显示 100 个作业，我将访问 SOAP 服务器 301 次。

我需要的是一种方法，它只针对 1 个初始 SOAP+XML 请求访问服务器，然后当有人启动 javascript 以查看隐藏行时，它会启动 3 个肥皂请求以获取额外的工作信息。这样用户就不会等待他们不想看到的信息，也不会让我的服务器陷入困境。问题是我真的不知道该怎么做。

我真的不太了解javascript，但我确实知道更多的PHP。这是我用来隐藏表中辅助行的脚本：http: [//pastebin.com/jhvaW0X4](http://pastebin.com/jhvaW0X4)

任何人都可以插话我应该如何完成这项工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:26:07.293

我不确定我是否理解这个问题，但您可以在 javascript 事件上发出 ajax 请求，在这种情况下，当用户单击作业 tr 时，为所需信息发出 ajax 请求，您可以使用[$.ajax jquery 方法](http://api.jquery.com/jQuery.ajax/)：

```
$("table#report1.report > tbody > tr.odd").click(function()
{
    if(!$(this).next("tr").hasClass('shown'))
    {
        //Put here your ajax request

        $.ajax({
            url: yourSoapURL, getting tracking info url
            type: "POST",
            dataType: "xml",
            data: soapMessage,
            processData: false,
            contentType: "text/xml; charset=\"utf-8\"",
            success: function(soapMessage) {
                    //Add the tracking info to the tr that will be show
                    $(this).next("tr").text(soapMessage);
                    //Now the text is in the tr, show it!
                    $(this).next("tr").show();
                    $(this).next("tr").addClass("shown");
            },
            error: OnError
        });

    }
    else
    {
        $(this).next("tr").hide();          
        $(this).next("tr").removeClass("shown");
    } 
```

这就是想法。如果你想管理多个 AJAX 请求，请阅读：[Multiple AJAX requests in jQuery](https://stackoverflow.com/questions/4959505/multiple-ajax-requests-in-jquery)。

# c# - 日期选择器显示值为 01/01/0000

> ID：14322998
> 
> 赞同：-3
> 
> 时间：2013-01-14T16:58:20.953
> 
> 标签：c#, wpf, datepicker

我不确定这是如何成为显示值的，因为我没有在我的应用程序的任何地方指定它。

```
<DatePicker Grid.Column="1" Grid.Row="3" 
    Height="25" 
    HorizontalAlignment="Left"
    Margin="12,1,0,0" 
    x:Name="datePicker_dob" 
    Validation.Error="Validation_Error" 
    SelectedDate="{Binding UpdateSourceTrigger=PropertyChanged,
                   Path= dob,
                   ValidatesOnDataErrors=True,
                   NotifyOnValidationError=True}" 
    VerticalAlignment="Top" 
    Width="115" 
    SelectedDateFormat="Short" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:59:27.140

这是一个空的 DateTime 的值。（`new DateTime()`或`DateTime.MinValue`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:06:34.273

答案就在您的问题中：) 由于您没有指定值，因此它显示了 minValue。你只需要设置一些值，比如今天的日期

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:25:32.300

在您的课程中，您可以添加一个属性`dob`，如下所示：

```
private DateTime _dob;
public DateTime dob 
{
    get { return _dob; }
    set {_dob = value; }
} 
```

然后从您的构造函数初始化它： dob = new DateTime...