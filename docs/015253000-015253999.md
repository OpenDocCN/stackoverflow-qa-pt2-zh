# StackOverflow 问答 15253000-15253999

# java - java中的插槽程序帮助

> ID：15253003
> 
> 赞同：0
> 
> 时间：2013-03-06T16:38:34.920
> 
> 标签：java, slots

```
public class slots 
{

public static void main(String[]args)
{

    public  String pull() {
        int rand = (int)(Math.random()*3+1);
        if(rand == 1)
            return "cherries";
        else if(rand == 2)
            return "bar";
        else
            return "7";
    }
    string1 = pull();
    string2 = pull();
    string3 = pull();
}
}
class TripleString 
{
    public static final int MAX_LEN = 20;
    private String string1;
    private String string2;
    private String string3;

    TripleString()
    {
        string1 ="";
        string2 ="";
        string3 ="";
    }

    public void setTripleString (String str1, String str2, String str3) 
    {
        string1 = str1;
        string2 = str2;
        string3 = str3;
    }

    public String getstring1()
    {
        return string1;
    }

    public String getstring2()
    {
        return string2;
    }

    public String getstring3()
    {
        return string3;
    }

    private boolean vaildString( String str ) 
    {
        if (str.length() >0 && str.length() <= MAX_LEN) 
        {
            return true;
        }
        else 
        {
            return false;
        }
    }
} 
```

我目前有此代码，并正在尝试创建一个随机返回这些值的老虎机，但字符串 pull() 上存在语法错误，我不确定如何修复。有谁知道如何使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:40:14.047

您不能在方法内部定义另一个`main`方法；搬出。`pull`_ `main`此外，您似乎打算创建`pull`一个`static`方法（因为您将在 内的`static`上下文中调用它`main`）。最后，不要忘记在 中声明变量的类型`main`，所以你会想要`**String** string1 = pull()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:46:33.080

当您在类中声明这些变量时，您正在尝试在类内部的方法中使用`string1`,`string2`和。`string3``main``slots``TripleStrings`

您还应该（按照惯例）使用`Slots`而不是`slots`作为您的类名。每个 Java 类型都应该以大写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:46:35.803

像这样更改您的代码：

```
public class slots 
{

  public static void main(String[]args)
  {
    String string1 = pull();
    String string2 = pull();
    String string3 = pull();
  }

  public static String pull() {
    int rand = (int)(Math.random()*3+1);
    if(rand == 1)
      return "cherries";
    else if(rand == 2)
      return "bar";
    else
      return "7";
    }
  } 
```

...

# emacs - 在 Emacs org-mode 中，如何让 org-capture 在全尺寸窗口中打开？

> ID：15253005
> 
> 赞同：9
> 
> 时间：2013-03-06T16:38:39.947
> 
> 标签：emacs, org-mode

在 Emacs org-mode 中，如何让 org-capture 在全尺寸窗口中打开，而不是先拆分窗口？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T17:20:57.147

您可以将`(add-hook 'org-capture-mode-hook 'delete-other-windows)`或添加`(add-hook 'org-capture-mode-hook 'make-frame)`到您的`.emacs`. （为了测试，你可以用 eval 这些`M-:`）。第一个应该删除其他窗口，第二个在新框架中打开窗口。但是，这些*在*您选择捕获模板后起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T01:01:36.513

在 emacs 24 中，接受的答案似乎对我不起作用。我能找到的唯一解决方案是在您的 emacs 文件中使用[emacs-noflet](https://github.com/nicferrier/emacs-noflet "emacs-noflet")和（感谢[Alex Vorobiev ）：](http://lists.gnu.org/archive/html/emacs-orgmode/2013-10/msg00150.html)

```
 (defun make-capture-frame ()
     "Create a new frame and run org-capture."
     (interactive)
     (make-frame '((name . "capture")))
     (select-frame-by-name "capture")
     (delete-other-windows)
     (noflet ((switch-to-buffer-other-window (buf) (switch-to-buffer buf)))
       (org-capture))) 
```

并绑定`make-capture-frame`到快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-04T23:23:38.813

对我来说，我需要确保 org-capture 在新框架中打开，并且框架在完成后关闭。以下内容对此效果很好：

```
 ; close capture frames when finished capturing
    (add-hook 'org-capture-after-finalize-hook (lambda () (delete-frame)))

    ; make org-capture open up as sole window in a new frame
    (defadvice org-capture (around my-org-capture activate)
       (progn
          (select-frame (make-frame))
          (delete-other-windows)
          (noflet
             ((switch-to-buffer-other-window (buf) (switch-to-buffer buf)))
             ad-do-it))) 
```

# iphone - iOS + MacOS 应用程序付费应用程序，一次购买并在所有设备上享受的最佳用户体验？

> ID：15253007
> 
> 赞同：3
> 
> 时间：2013-03-06T16:38:41.460
> 
> 标签：iphone, ios, macos, app-store, mac-app-store

我正在构建一个通用应用程序（iPhone+iPad），它也可以在 OSX 上运行。使用通用应用程序，用户只需购买一次，然后就可以在他们所有的 iOS 设备上使用它，
我认为不可能将其扩展到 OSX/Mac App Store。

*   我想避免用户购买两次，一次用于 iOS，一次用于 OSX。
*   我希望用户能够从任何设备上购买，而不必按照特定顺序通过一个平台然后下一个平台
*   该应用程序必须在 App Store 和 Mac App Store 上，因此无论使用哪种机制，它都必须符合审查指南

您认为这种场景的最佳用户体验是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:50:03.960

事实上，你是对的，不可能创建一个完全通用的应用程序（iOS + mac os）。

即使向 iOS 和 Mac OS 提交应用程序也需要支付两个不同的开发者计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T15:12:32.643

在我看来，这里最好的方法是仅在其中一个平台（可能是 ios）上提供升级当两者连接时您必须具有某种服务器-客户端关系对吗？而且我假设配对可以实现两部 iPhone（或 2 部 Mac）无法实现的功能？为什么mac端不只是连接到已经购买或未购买升级的移动设备？有时最简单的方法是最好的方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T16:59:17.167

好吧，“作弊”的一种方法是使用 inAppPurchase

两个版本（os X 和 iOS）都是免费的，但是需要一个解锁码才能使用它们。这个解锁码可以使用 inAppPurchase 购买 => 然后给用户一个他可以在另一个版本上输入的代码来解锁它。

# c#-4.0 - PinvokeStackImbalance 使用 CallingConvention.Cdecl 调用 comctl32

> ID：15253010
> 
> 赞同：2
> 
> 时间：2013-03-06T16:38:53.420
> 
> 标签：c#-4.0, pinvoke, comctl32

我们刚刚将我们的项目从 .NET 3.5SP1 升级到 .NET 4.5，现在我们在从 comctl32 调用 DllGetVersion 时获得了 PInvokeStackImbalance MDA。我已经阅读并了解到框架在默认情况下不再能够适应不正确的调用约定。奇怪的是，我们已经指定了 CallingConvention.Cdecl，我认为这是正确的。如果我完全删除 CallingConvention 属性并让它成为默认值 (CallingConvention.WinAPI)，我们不会得到 PInvokeStackImbalance。任何人都可以对此有所了解吗？操作系统是 Win 7 64 位，如果有任何区别，它是一个 32 位应用程序。我试过查看 DllGetVersion 函数的头文件，但我不知道调用约定应该是什么。

```
 [DllImport("Comctl32.dll", EntryPoint = "DllGetVersion", CallingConvention = CallingConvention.Cdecl)]
    private static extern int NativeDllGetVersion(ref DLLVERSIONINFO pdvi); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:40:17.633

通常，任何 Windows API 调用都应使用[`CallingConvention.StdCall`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.callingconvention.aspx).

在这种情况下，如果您查看 的声明[`DllGetVersion`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776404%28v=vs.85%29.aspx)，您会看到它被定义为：

```
HRESULT CALLBACK DllGetVersion(DLLVERSIONINFO *pdvi); 
```

[`CALLBACK`定义为](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx)：

```
#define CALLBACK __stdcall 
```

附注：

> CALLBACK、WINAPI 和 APIENTRY 都用于定义具有 __stdcall 调用约定的函数。Windows API 中的大多数函数都是使用 WINAPI 声明的。您可能希望将 CALLBACK 用于您实现的回调函数，以帮助将函数识别为回调函数。

在您的情况下，这意味着需要切换到`StdCall`。

# acrobat - Acrobat 在可填充字段中显示双精度值

> ID：15253011
> 
> 赞同：0
> 
> 时间：2013-03-06T16:38:54.340
> 
> 标签：acrobat

在使用 Acrobat Pro 9 时，我创建了一个可填写的表单并使用“简化代码”来计算一些值。然后我应用了一些字体格式并将字段设置为以*数字*格式显示并显示货币标记。

现在我的表单以两种字体显示该值两次！无论我是否添加了代码，它都会在每个表单字段上执行此操作。

是否启用“突出显示字段”也无关紧要。

我尝试使用不同的字体：*Courier Bold*、*Trebuchets*和其他字体，但仍然遇到同样的问题。您可以在我的图片中看到，该值在“幕后”以更小、更灰的字体重复。

我怎样才能解决这个问题？

![在此处输入图像描述](../Images/a2d5e3e04844dcba25b4b5bc25cff0f5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T22:47:49.743

好吧，经过很久并试图重现该错误，我认为这一定是 Adob​​e Acrobat 中的渲染问题。我似乎无法再次重现它（它数字），甚至在 Adob​​e Reader 中也无法重现。

感谢感兴趣的人！我把这个“解决方案”留在这里，以防有人遇到同样的问题。

# python - 使用 MatPlotLib (Python) 将文本添加到我的堆叠 barchard

> ID：15253028
> 
> 赞同：2
> 
> 时间：2013-03-06T16:39:27.770
> 
> 标签：python, matplotlib

我被困在将垂直文本放置在我的条中的路上。我的情节如下所示：http: [//i.imgur.com/pTcElMq.jpg](http://i.imgur.com/pTcElMq.jpg?1) ? 1 我的目的是将密码子的文本放在每个条的中间。我在整个互联网上搜索，没有任何解决方案。

有人对这个问题有想法吗？

我的 Python 代码如下所示：

```
def Graph_Codons(Codons):
print(Codons)
N = 21
X = [Codons["TTA"],Codons["TCT"],Codons["CGT"],Codons["GGT"],Codons["GTT"],
     Codons["CCT"],Codons["ACT"],Codons["GCT"],Codons["ATT"],Codons["TTT"],
     Codons["TAT"],Codons["CAT"],Codons["CAA"],Codons["AAT"],Codons["AAA"],
     Codons["GAT"],Codons["GAA"],Codons["TGT"],Codons["TGG"],Codons["TAA"],
     Codons["ATG"]]
X1 = [Codons["TTG"],Codons["TCC"],Codons["CGC"],Codons["GGC"],Codons["GTC"],
      Codons["CCC"],Codons["ACC"],Codons["GCC"],Codons["ATC"],Codons["TTC"],
      Codons["TAC"],Codons["CAC"],Codons["CAG"],Codons["AAC"],Codons["AAG"],
      Codons["GAC"],Codons["GAG"],Codons["TGC"],0,Codons["TAG"],0]
X2 = [Codons["CTT"],Codons["TCA"],Codons["CGA"],Codons["GGA"],Codons["GTA"],
      Codons["CCA"],Codons["ACA"],Codons["GCA"],Codons["ATA"],0,0,0,0,0,0,0,
      0,0,0,Codons["TGA"],0] 
X3 = [Codons["CTC"],Codons["TCG"],Codons["CGG"],Codons["GGG"],Codons["GTG"],
      Codons["CCG"],Codons["ACG"],Codons["GCG"],0,0,0,0,0,0,0,0,0,0,0,0,0]
X4 = [Codons["CTA"],Codons["AGT"],Codons["AGA"],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]    
X5 = [Codons["CTG"],Codons["AGC"],Codons["AGG"],0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]

BotX2 = [X[0]+X1[0],X[1]+X1[1],X[2]+X1[2],X[3]+X1[3],X[4]+X1[4],X[5]+X1[5],
         X[6]+X1[6],X[7]+X1[7],X[8]+X1[8],X[9]+X1[9],X[10]+X1[10],X[11]+X1[11],
         X[12]+X1[12],X[13]+X1[13],X[14]+X1[14],X[15]+X1[15],X[16]+X1[16],
         X[17]+X1[17],X[18]+X1[18],X[19]+X1[19],X[20]+X1[20]]
BotX3 = [BotX2[0]+X2[0],BotX2[1]+X2[1],BotX2[2]+X2[2],BotX2[3]+X2[3],BotX2[4]+X2[4],
         BotX2[5]+X2[5],BotX2[6]+X2[6],BotX2[7]+X2[7],BotX2[8]+X2[8],BotX2[9]+X2[9],
         BotX2[10]+X2[10],BotX2[11]+X2[11],BotX2[12]+X2[12],BotX2[13]+X2[13],BotX2[14]+X2[14],
         BotX2[15]+X2[15],BotX2[16]+X2[16],BotX2[17]+X2[17],BotX2[18]+X2[18],BotX2[19]+X2[19],
         BotX2[20]+X2[20]]
BotX4 = [BotX3[0]+X3[0],BotX3[1]+X3[1],BotX3[2]+X3[2],BotX3[3]+X3[3],BotX3[4]+X3[4],
         BotX3[5]+X3[5],BotX3[6]+X3[6],BotX3[7]+X3[7],BotX3[8]+X3[8],BotX3[9]+X3[9],
         BotX3[10]+X3[10],BotX3[11]+X3[11],BotX3[12]+X3[12],BotX3[13]+X3[13],BotX3[14]+X3[14],
         BotX3[15]+X3[15],BotX3[16]+X3[16],BotX3[17]+X3[17],BotX3[18]+X3[18],BotX3[19]+X3[19],
         BotX3[20]+X3[20]]
BotX5 = [BotX4[0]+X4[0],BotX4[1]+X4[1],BotX4[2]+X4[2],BotX4[3]+X4[3],BotX4[4]+X4[4],
         BotX4[5]+X4[5],BotX4[6]+X4[6],BotX4[7]+X4[7],BotX4[8]+X4[8],BotX4[9]+X4[9],
         BotX4[10]+X4[10],BotX4[11]+X4[11],BotX4[12]+X4[12],BotX4[13]+X4[13],BotX4[14]+X4[14],
         BotX4[15]+X4[15],BotX4[16]+X4[16],BotX4[17]+X4[17],BotX4[18]+X4[18],BotX4[19]+X4[19],
         BotX4[20]+X4[20]]
ind = np.arange(N)
width = 0.7
p1 = plt.bar(ind, X,  width, color='r',)
p2 = plt.bar(ind, X1, width, color='y', bottom=X)
p3 = plt.bar(ind, X2, width, color='g', bottom=BotX2)
p4 = plt.bar(ind, X3, width, color='b', bottom=BotX3)
p5 = plt.bar(ind, X4, width, color='c', bottom=BotX4)
p6 = plt.bar(ind, X5, width, color='m', bottom=BotX5)
plt.xticks(ind+width/2., ('L', 'S', 'R', 'G', 'V', "P", "T", "A", "I", "F", "Y", "H", 
                          "Q", "N", "K", "D", "E", "C", "W", "STOP", "M" ) )

plt.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:52:50.880

你试过[`position`](http://matplotlib.org/api/axes_api.html?highlight=set%20x%20labels#matplotlib.axes.Axes.set_xticklabels)关键字吗？

```
plt.xticks(ind+width/2., 
           ('L', 'S', 'R', 'G', 'V', "P", "T", "A", "I", "F", "Y", "H", 
            "Q", "N", "K", "D", "E", "C", "W", "STOP", "M" ), 
           position=(0, 0.5)) 
```

那应该做你想做的事。

# mysql - MySQL 减少存储空间

> ID：15253031
> 
> 赞同：0
> 
> 时间：2013-03-06T16:39:35.493
> 
> 标签：mysql, innodb

我有一个表定义：

```
CREATE TABLE `k_timestamps` (
  `id` bigint(20) NOT NULL,
  `k_timestamp` datetime NULL DEFAULT NULL,
  `data1` smallint(6) NOT NULL,
  KEY `k_timestamp_key` (`k_timestamp`,`id`) USING BTREE,
  CONSTRAINT `k_time_fk` FOREIGN KEY (`id`) REFERENCES `data` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

基本上，我有很多键值对`id`，`data1`每隔几个小时我要么将以前从未见过的新键值对添加到列表中，要么之前的 id 的值发生了变化。我想跟踪每个`id`时间的所有值。因此，该`id`列可以包含重复`id`的 's 而不是主键。

旁注，`k_time_fk`指向另一个小得多的表，该表具有特定的通用信息，`id`无论当前时间是什么或它当前持有的价值。

`(id, k_timestamp)`应该被认为是表的（复合）主键。

例如，

```
id          k_timestamp            data1
1597071247  2012-11-15 12:25:47     4
1597355222  2012-11-15 12:25:47     4
1597201376  2012-11-15 12:25:47     4
1597071243  2012-11-15 13:25:47     4
1597071247  2012-11-15 13:25:47     3
1597071249  2012-11-15 13:25:47     3 
```

无论如何，我运行了这个查询：

```
SELECT concat(table_schema,'.',table_name), 
concat(round(table_rows/1000000,2),'M') rows, 
concat(round(data_length/(1024*1024*1024),2),'G') DATA, 
concat(round(index_length/(1024*1024*1024),2),'G') idx, 
concat(round((data_length+index_length)/(1024*1024*1024),2),'G') total_size, 
round(index_length/data_length,2) idxfrac 
FROM information_schema.TABLES ORDER BY data_length+index_length DESC LIMIT 20; 
```

在我的桌子上提取空间信息：

```
rows      Data     idx       total_size  idxfrac
11.25M    0.50G    0.87G     1.36G       1.76 
```

我不确定我是否理解这一点，索引怎么会占用这么多空间？有什么明显的我在这里做错了，还是这是正常的？如果可能，我希望尝试减少此表的占用空间。我什至不确定它`k_timestamp_key`真正为我买了什么，可以安全地删除它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:55:18.047

索引更大，因为当您没有可以视为唯一索引的唯一列时，InnoDB 表将分配一个 6 字节的主键。表中的所有其他索引也包含主键...参见[14.2.3.12.2。](http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html)手册中的[聚集索引和二级索引](http://dev.mysql.com/doc/refman/5.6/en/innodb-table-and-index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:05:06.907

首先，是的，这是很正常的行为，正如 innvo 所写。

[其次，您可以使用OPTIMIZE TABLE](http://dev.mysql.com/doc/refman/5.0/en/optimize-table.html)优化表及其索引。由于您的主键可能是“碎片化的” - 即假设插入的行在物理上与前一行相邻是不安全的 - 那里可能会有一些收益。

最后，您可能*不需要*表上的主键，但如果您要查询数百万行，则几乎肯定需要索引...

# ios - 开发版本与分发版本不同-iOS

> ID：15253033
> 
> 赞同：1
> 
> 时间：2013-03-06T16:39:37.793
> 
> 标签：ios, multithreading, map

我最近在 Appstore 中发布了我的应用程序。但是，通过调用对我的应用程序非常关键的 NSURL 在地图上添加 pin 的一项功能在 Appstore 版本中不起作用。我已经在真实设备上测试了我的应用程序，它正在工作。然而，一旦我为临时分发创建了 iPA，这个功能就不起作用了。

我刚刚创建了一个单独的线程来在地图上添加图钉，但它不起作用。这是地图上插件引脚的代码部分：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UILongPressGestureRecognizer *lpgr=[[UILongPressGestureRecognizer alloc]initWithTarget:self action:@selector(handleLongPress:)];
    lpgr.minimumPressDuration=0.7;
    [self.mapView addGestureRecognizer:lpgr];
}

-(void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer
{
    if(gestureRecognizer.state!=UIGestureRecognizerStateBegan)
    return;
    CGPoint touchPoint=[gestureRecognizer locationInView:self.mapView];
    CLLocationCoordinate2D touchMapCoordinate=[self.mapView convertPoint:touchPoint     toCoordinateFromView:self.mapView];
    lati=touchMapCoordinate.latitude;
    longi=touchMapCoordinate.longitude;
    NSString *newPinPoint2=[NSString stringWithFormat:@"%f,%f", touchMapCoordinate.latitude, touchMapCoordinate.longitude];
    [NSThread detachNewThreadSelector:@selector(annotationHTTPRequest:) toTarget:self withObject:newPinPoint2];// added separate thread
    //[self annotationHTTPRequest:newPinPoint2];// commented our

   }

-(void)annotationHTTPRequest:(NSString*)theNewPoint
{

    NSURL *url1=[NSURL URLWithString:url4];
    NSString *newP=theNewPoint;
    // 4
    __weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
    [request1 setCompletionBlock:^{
        responseString = [request1 responseString];
        [self annotationJSON:responseString second:newP ];

    }];
    [request1 setFailedBlock:^{

        NSError *error=[request1 error];
        NSLog(@"Error: %@", error.localizedDescription);
    }];
    [request1 startAsynchronous];

} 
```

# ios - 是否可以从 iOS 中的另一个图像中剪切图像？

> ID：15253034
> 
> 赞同：0
> 
> 时间：2013-03-06T16:39:42.777
> 
> 标签：ios, image-processing, graphics

谁能告诉我以下内容是否可以实施，如果可以，请指出我正确的方向。假设我们的 iOS 应用程序的屏幕上有一张图片。然后我在这张图片上选择一个区域，用我的手指绘制一个形状，然后选定的区域被切断并成为我可以使用的单独图像。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:44:41.797

快速回答：是的，有可能

看看 [https://github.com/iridia/UIImage-Additions](https://github.com/iridia/UIImage-Additions)

*   (UIImage *)croppedImage:(CGRect)bounds; 在 UIImage+Resize.h

这种方法是您要剪切图像的方法

你的工作是根据你的屏幕选择计算界限

# java - 使用 try 时资源泄漏...最后？

> ID：15253036
> 
> 赞同：6
> 
> 时间：2013-03-06T16:39:48.213
> 
> 标签：java, eclipse, resources, eclipse-juno, java-6

当我在此方法中的块`return`内的两个值中都出现资源泄漏警告时，我在 Eclipse 中正常工作：`try`

```
@Override
public boolean isValid(File file) throws IOException
{
    BufferedReader reader = null;
    try
    {
        reader = new BufferedReader(new FileReader(file));
        String line;
        while((line = reader.readLine()) != null)
        {
            line = line.trim();
            if(line.isEmpty())
                continue;
            if(line.startsWith("#") == false)
                return false;
            if(line.startsWith("#MLProperties"))
                return true;
        }
    }
    finally
    {
        try{reader.close();}catch(Exception e){}
    }
    return false;
} 
```

我不明白它是如何导致资源泄漏的，因为我`reader`在范围之外声明变量，在块`try`内添加资源并在块中使用另一个来`try`关闭它以忽略异常并且if出于某种原因......`finally``try...catch``NullPointerException``reader``null`

据我所知，`finally`离开结构时总是会执行块`try...catch`，因此在块内返回一个值`try`仍然会`finally`在退出方法之前执行块......

这可以很容易地证明：

```
public static String test()
{
    String x = "a";
    try
    {
        x = "b";
        System.out.println("try block");
        return x;
    }
    finally
    {
        System.out.println("finally block");
    }
}

public static void main(String[] args)
{
    System.out.println("calling test()");
    String ret = test();
    System.out.println("test() returned "+ret);
} 
```

结果是：

```
calling test()
try block
finally block
test() returned b 
```

知道了这一切，为什么 Eclipse 会告诉我`Resource leak: 'reader' is not closed at this location`是否要在我的`finally`街区关闭它？

* * *

# 回答

我只想在[这个答案](https://stackoverflow.com/a/15253257/804976)中补充说他是正确的，如果`new BufferedReader`抛出异常，`FileReader`垃圾收集器销毁时会打开一个实例，因为它不会分配给任何变量，并且`finally`块不会关闭它，`reader`因为`null`.

这就是我修复这个可能的泄漏的方法：

```
@Override
public boolean isValid(File file) throws IOException
{
    FileReader fileReader = null;
    BufferedReader reader = null;
    try
    {
        fileReader = new FileReader(file);
        reader = new BufferedReader(fileReader);
        String line;
        while((line = reader.readLine()) != null)
        {
            line = line.trim();
            if(line.isEmpty())
                continue;
            if(line.startsWith("#") == false)
                return false;
            if(line.startsWith("#MLProperties"))
                return true;
        }
    }
    finally
    {
        try{reader.close();}catch(Exception e){}
        try{fileReader.close();}catch(Exception ee){}
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T16:49:39.467

从技术上讲，有一条 BufferedReader 不会关闭的路径：如果`reader.close()`会抛出异常，因为您捕获了异常并且什么也不做。这可以通过`reader.close()`在您的 catch 块中再次添加来验证：

```
 } finally
    {
        try {
            reader.close();
        } catch (Exception e) {
            reader.close();
        }
    } 
```

或者通过删除 finally 中的 try/catch：

```
 } finally
    {
            reader.close();
    } 
```

这将使警告消失。

当然，它对你没有帮助。如果 reader.close() 失败，那么再次调用它没有意义。问题是，编译器不够聪明，无法处理这个问题。所以你能做的唯一明智的事情就是`@SuppressWarnings("resource")`在方法中添加一个。

**编辑**如果您使用的是 Java 7，您可以/应该做的是使用 try-with-resources 功能。这将使警告正确，并使您的代码更简单，为您节省一个`finally`块：

```
public boolean isValid(File file) throws IOException
{
  try(BufferedReader reader = new BufferedReader(new FileReader(file)))
  {
    String line;
    while ((line = reader.readLine()) != null)
    {
      line = line.trim();
      if (line.isEmpty())
        continue;
      if (line.startsWith("#") == false)
        return false;
      if (line.startsWith("#MLProperties"))
        return true;
    }
  } 
  return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:50:02.307

如果`BufferedReader`构造函数抛出异常（例如内存不足），您将`FileReader`泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:49:54.023

```
//If this line throws an exception, then neither the try block
    //nor the finally block will execute.
    //That is a good thing, since reader would be null.
    BufferedReader reader = new BufferedReader(new FileReader(aFileName));
    try {
      //Any exception in the try block will cause the finally block to execute
      String line = null;
      while ( (line = reader.readLine()) != null ) {
        //process the line...
      }
    }
    finally {
      //The reader object will never be null here.
      //This finally is only entered after the try block is 
      //entered. But, it's NOT POSSIBLE to enter the try block 
      //with a null reader object.
      reader.close();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T16:54:45.537

既然`close()`可以抛出异常（为什么哦，他们为什么要这样设计......）我倾向于使用双重尝试

```
try {
  BufferedReader reader = new BufferedReader(new FileReader(file));
  try {
    // do stuff with reader
  } finally {
    reader.close();
  }
} catch(IOException e) {
  // handle exceptions
} 
```

由于这个习惯用法消除了 finally 块中的 try/catch，它可能足以让 Eclipse 满意。

`new BufferedReader(...)`本身不能抛出 an但从技术上讲，如果构造函数抛出or `IOException`，这仍然可能泄漏。`FileReader``BufferedReader``RuntimeException``Error`

# asp.net-mvc - 为什么使用 Chrome 或 IE9 时缺少 Request.Cookies[".ASPXAUTH"]？

> ID：15253038
> 
> 赞同：0
> 
> 时间：2013-03-06T16:39:59.223
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下代码：

```
var httpCookie = context.HttpContext.Request.Cookies[".ASPXAUTH"]; 
```

这适用于 Firefox。[".ASPXAUTH"] 已列出并找到。但是在 Chrome 和 IE9 中它丢失了，因此 httpCookie 为空。

为什么会这样，请问我该如何解决？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:00:35.197

要获取应用程序身份验证的 cookie，您可以尝试以下操作：

```
HttpCookie appCookie = context.HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName]; 
```

要解密它，您可以使用：

```
FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(appCookie.Value);

// you can access all properties using the 'ticket' object. 
string cookikePath = ticket.CookiePath;
DateTime expiration = ticket.Expiration;
bool expired = ticket.Expired;
bool isPersistent = ticket.IsPersistent;
DateTime issueDate = ticket.IssueDate;
string name = ticket.Name;
string userData = ticket.UserData;
string version = ticket.Version; 
```

# javascript - 为用户提供多个 CSS 选项

> ID：15253044
> 
> 赞同：-8
> 
> 时间：2013-03-06T16:40:10.833
> 
> 标签：javascript, css

我的 head 部分中有这两个 CSS 文件：

```
<link href="css1.css" rel="stylesheet" type="text/css" /> 
<link id="css2" href="css2.css" rel="stylesheet" type="text/css" /> 
```

这个href：

```
<a href="#" onclick="document.getElementById('css2').href='css2.css'">Change</a> 
```

该页面显示css2（背景颜色设置为绿色），但我希望它显示css1（红色），然后通过单击css2链接它应该更改为css2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:40:37.483

您可以通过[`disabled`属性](https://developer.mozilla.org/en-US/docs/DOM/stylesheet/disabled)禁用/启用第二个样式表：

```
document.getElementById('css2').sheet.disabled = true; 
```

或整个`<link>`元素：

```
document.getElementById('css2').disabled = true; 
```

这样，声明就不会覆盖第一个声明。您尝试更改`href`链接的 也可以，但为此您*只需要一个* 在和`<link>`之间切换的标签。`"css1.css"``"css2.css"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:47:06.100

如果您问“当用户单击其中一个链接时如何在两个样式表之间切换”，我建议采用以下方法：

*   保持默认样式表不变。
*   在第二个样式表中为所有样式声明添加一些独特的类，即`alternative-css`
*   当用户单击“替代”链接时，将类添加到高级元素（例如`<html>`，`<body>`或包装`<div>`

例如：

HTML：

```
<body>
    <a href="#" id="main">Main Style</a>
    <a href="#" id="alt">Alternative Style</a>
    <div id="wrapper">
        <p>Some text</p>
    </div>
</body> 
```

样式表：

```
#wrapper {
    background: #000;
}
p {
    color: #fff;
} 
```

替代样式表：

```
.alternative-css #wrapper {
    background: #fff;
}
.alternative-css p {
    color: #000;
} 
```

JS：

```
$('#main').click(function(){$('body').removeClass('alternative-css')});
$('#alt').click(function(){$('body').addClass('alternative-css')}); 
```

PS：我知道你没有用 jQuery 标记这个问题......但这更多地意味着一个概念，在 vanilla JS 中编写点击处理程序应该不会太难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:42:10.833

您始终可以使用 JavaScript（或者在本例中为 jQuery）动态添加另一个外部 CSS 文件：

```
$('head').append('<link rel="stylesheet" href="/alternative.css" type="text/css" />'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T18:38:00.167

它不起作用，因为您在页面加载时同时加载了两个文件。所以当然这将是第二个文件的颜色，因为两个文件都在那里。

该页面需要从一个文件开始。

其他选项是您加载两个文件，但规则基于主体上的一个类。

文件1.css

```
body { background-color: yellow; }
h1 { color: red } 
```

文件2.css

```
body.alt {background-color: green; }
body.alt h1 { color : blue; } 
```

并使用 JavaScript 添加类。

```
document.body.className = document.body.className==="alt" ? "" : "alt"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:43:35.343

为站点创建默认样式表并为特定用户创建其他样式表。然后用 javascripts 或 php 覆盖默认样式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T16:52:48.760

我发现的最简单的方法是在`<body>`标签中设置一个类并使用一个 CSS 文件，但定义两组 CSS 定义，并为每组添加一个类名前缀。

设置一个默认类（例如，`<body class="bodyClass1">`），然后，当您想要更改外观时，您只需使用 JavaScript 将该类更新为另一个类。

这样做的好处是，所有类都在页面加载时加载，并且任何常见的样式都可以在“类特定”定义之外进行编码。

例子：

```
body {...}
a {...}
div {font-weight: bold;}

.bodyClass1 div {font-size: 10px;}

.bodyClass2 div {font-size: 12px;} 
```

# maven - 在 maven 中运行 selenium hub

> ID：15253048
> 
> 赞同：2
> 
> 时间：2013-03-06T16:40:21.173
> 
> 标签：maven, selenium, phantomjs

我正在尝试使用 selenium-maven-plugin 在 maven 中使用角色集线器运行 selenium 服务器，以便使用远程控制测试中的 phantomjs 驱动程序，到目前为止，我的插件配置非常简单：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>selenium-maven-plugin</artifactId>
  <version>2.3</version>
  <executions>
    <execution>
      <id>start-selenium</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>start-server</goal>
      </goals>
      <configuration>
        <background>true</background>
      </configuration>
    </execution>

    <execution>
      <id>stop-seleniump</id>
      <phase>post-integration-test</phase>
      <goals>
        <goal>stop-server</goal>
      </goals>
    </execution>
  </executions>  
</plugin> 
```

然后我使用 Maven 执行插件挂钩 phantomjs：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>exec-maven-plugin</artifactId>
  <version>1.2.1</version>
  <executions>
    <execution>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>exec</goal>
      </goals>
    </execution>
  </executions>
  <configuration>
    <executable>phantomjs</executable>
    <arguments>
      <argument>--webdriver=8080</argument>
      <argument>--webdriver-selenium-grid-hub=http://localhost:4444</argument>
    </arguments>
  </configuration>
</plugin> 
```

使用这种配置，输出是：`HTTP ERROR: 403 Forbidden for Proxy`我不能再进一步了。有人成功配置过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T02:13:27.927

仅仅创建一个使用 YAJSW（Yet Another Java Service Wrapper）的脚本来适应将网格集线器注册为服务并不难。然后，Maven 可以调用脚本并将其作为自己的独立进程启动。此外，Maven 可以调用停止服务来停止它。我认为这将是优雅的。

[这是我几乎工作的尝试](https://gist.github.com/djangofan/5696040)。我需要向 Selenium 专家寻求帮助才能使其正常工作。注册服务时出现意外错误。不过大部分工作已经完成。一旦我得到这个工作，很适合你。

现在，虽然您可以将 Grid Hub 作为服务运行，但您不希望对 Node 执行相同操作，因为它需要访问桌面（并且服务只能访问它们自己的不可见私有桌面）。所以，也许这让我们回到了你试图解决的同一个问题。

# .net - 正则表达式匹配右括号不在引号中

> ID：15253054
> 
> 赞同：6
> 
> 时间：2013-03-06T16:40:38.603
> 
> 标签：.net, regex

我正在尝试构建一个正则表达式来匹配字符串，例如

```
1.) $(Something)
2.) $(SomethingElse, ")")
3.) $(SomethingElse, $(SomethingMore), Bla)
4.) $$(NoMatch) <-- should not match
5.) $$$(ShouldMatch) <-- so basically $$ will produce $ 
```

在一个文本中。

**编辑：** Something、SomethingElse、NoMatch、ShouldMatch 甚至可以是其他词——它们是宏的名称。我尝试匹配的字符串是“宏调用”，它可以出现在文本中，应该用它们的结果替换。我只需要正则表达式来突出显示语法。应突出显示完整的宏调用。3 号目前不那么重要。1号和2号需要工作。如果数字 4 和 5 不能像上面写的那样工作，但`$(`a 之后的任何一个`$`都不会匹配，这很好。

目前我有

```
(?<!\$)+\$\(([^)]*)\) 
```

`$(`如果没有前导，它匹配任何`$`，如果我找不到另一种应用`$$`结构的方法，这可能很好。

我想完成的下一步是忽略引号中的右括号。我怎么能做到这一点？

**编辑**所以如果我有这样的输入

```
Some text, doesn't matter what. And a $(MyMacro, ")") which will be replaced. 
```

完整的`'$(MyMacro, ")")'`将突出显示。

我已经有这个表情了

```
"(?:\\\\|\\"|[^"])*" 
```

对于引号，包括转义引号。但我不知道如何应用它来忽略它们之间的一切......

PS 我正在使用 .NET 来应用正则表达式。因此将支持平衡组。我只是不知道如何应用这一切。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:26:15.677

您可以使用这样的表达式：

```
(?<! \$ )                     # not preceded by $
\$ (?: \$\$ )?                # $ or $$$
\(                            # opening (

(?>                           # non-backtracking atomic group
  (?>                         # non-backtracking atomic group
    [^"'()]+                  # literals, spaces, etc
  | " (?: [^"\\]+ | \\. )* "  # double quoted string with escapes
  | ' (?: [^'\\]+ | \\. )* '  # single quoted string with escapes
  | (?<open>       \( )       # open += 1
  | (?<close-open> \) )       # open -= 1, only if open > 0 (balancing group)
  )*
)

(?(open) (?!) )               # fail if open > 0

\)                            # final ) 
```

可以引用如上。例如在 C# 中：

```
var regex = new Regex(@"(?x)    # enable eXtended mode (ignore spaces, comments)
(?<! \$ )                       # not preceded by $
\$ (?: \$\$ )                   # $ or $$$
\(                              # opening (

(?>                             # non-backtracking atomic group
  (?>                           # non-backtracking atomic group
    [^""'()]+                   # literals, spaces, etc
  | "" (?: [^""\\]+ | \\. )* "" # double quoted string with escapes
  | '  (?: [^'\\]+ | \\. )*  '  # single quoted string with escapes
  | (?<open>       \( )         # open += 1
  | (?<close-open> \) )         # open -= 1, only if open > 0 (balancing group)
  )*
)

(?(open) (?!) )                 # fail if open > 0

\)                              # final )
"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T16:46:29.837

对于将宏作为参数（1和2）的部分，您可以执行以下操作：

```
(?<!\$)+\$\(([^)]*?("[^"]*?")?)+\) 
```

你可以在[这里看到](http://rubular.com/r/4kRAq90fbw)

在宏 (3) 的情况下，您可以执行以下操作：

```
(?<!\$)+\$\(([^)]*?("[^"]*?")?(\$\([^)]*?\))?)+\) 
```

但这不适用于包含带括号的字符串的宏。

你可以在[这里看到结果](http://rubular.com/r/PYuXYiGgjx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:32:28.937

像这样的事情很复杂......所以不要害怕以下内容：

正则表达式：`(?<!\$)(?:\$\$)*(\$\((?:[\w, ]+|(?>"(?:(?<=\\)"|[^"])+")|(?1)+)*\))`
在这里解释演示：[http ://regex101.com/r/yZ5dI7](http://regex101.com/r/yZ5dI7)

这遵循您的所有 5 点，仅当前缀的数量为奇数 时，才会匹配前 3 种宏类型，甚至更深层次的变化与多个`"`或宏内部宏。`$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:47:00.757

我最近在寻找类似的正则表达式，但我决定用 C# 解析文本比正则表达式更快，因为我的正则表达式技能不好......所以我写了[这个方法](https://gist.github.com/aviatrix/5100780)来删除 Razor 代码块。

您可以轻松修改它以满足您的需求，而无需复杂的正则表达式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:56:50.713

你的意思是这样的？

```
\$\(SomethingElse, \"|[^"\)]?\"\) 
```

# javascript - 主干视图未呈现正确的 dom 元素

> ID：15253057
> 
> 赞同：0
> 
> 时间：2013-03-06T16:40:49.757
> 
> 标签：javascript, jquery, backbone.js, requirejs

我有两个视图对象：

```
 define(['jquery','underscore','backbone','collections/HipHopVideos','views/Video'],function($,_,Backbone){
  GenreHipHop = Backbone.View.extend ({
    el:"#hipHop",
    collection: new HipHopVideosCollection,

    initialize: function ()
    {
        context = this;
        //fetche data for collection
        this.collection.fetch({success:function ()
            {
                context.render ();
            }
        });
    },

    render: function ()
    {
        this.collection.each(function(video)
        {
            videoView = new VideoView({model:video});
            this.$el.append(videoView.render().el);
        },this);
    }//end render function

});
   define(['jquery','underscore','backbone','collections/PopVideos','views/Video'], function($,_,Backbone){
   GenrePop = Backbone.View.extend({
    el:"#pop",
    collection: new PopVideosCollection(),

    initialize: function ()
    {
        context = this;
        //fetche data for collection
        this.collection.fetch({success:function ()
            {
                context.render ();
            }
        });
    },//end initialize function 

    render: function ()
    {
        this.collection.each(function(video)
        {
            videoView = new VideoView({model:video});
            this.$el.append(videoView.render().el);
        },this);
    }//end render function

}); 
```

然后，这些对象应将内容附加到此 HTML：

```
 <div class="sect">
                  <a href="" class="genre_title">Pop</a>
                  <img class="previousBtn" src="images/nav-left.png"/>
                  <ul class="video_item" id="pop" page="1"></ul>
                  <img class="nextBtn" src="images/nav-right.png"/>
                  <button class="btn btn-small view-all" type="button">view all</button>
              </div>
              <div class="sect">
                  <a href="" class="genre_title">Hip Hop</a>
                  <img class="previousBtn" src="images/nav-left.png"/>
                  <ul class="video_item" id="hipHop" page="1">
                      <script> //loadHipHop ()</script>
                  </ul>
                  <img class="nextBtn" src="images/nav-right.png"/>
                  <button class="btn btn-small view-all" type="button">view all</button>
              </div> 
```

然后我调用两个视图的实例来渲染到 dom：

```
 pop = new GenrePop ();
  hip = new GenreHipHop(); 
```

问题是视图元素被附加到带有 id #hip 模型的 ul 标记，而不是我在视图中概述的那样。我不明白是什么原因造成的以及如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:42:39.860

在您的定义语句中，您将 5 个参数传递到第一个数组中，但仅将前 3 个参数设置为函数的参数。例如，尝试将文件中的第一行更改为：

```
define(['jquery',
        'underscore',
        'backbone',
        'collections/HipHopVideos',
        'views/Video'],
        function($,_,Backbone, ActHipHopVideoCollection, ActVideoView){
...
} 
```

然后在创建 的行上`collection`，执行以下操作：

```
collection: new ActHipHopVideoCollection(), 
```

当您创建 each 时`videoView`，请执行以下操作：

```
videoView = new ActVideoView({model:video}); 
```

这样你就可以使用`collection`and `view`that requirejs 正在为你获取并传递给这个函数。

您还需要对其他文件进行此更改。这样，您就不会使用一些全局变量来创建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:23:29.353

最好从视图外部控制视图到 DOM 元素的映射。您不希望视图需要有关其周围页面结构的信息。将视图绑定到特定元素还可以防止在站点/页面的其他区域重用。

1 - 从您的视图中删除 el 属性

2 - 将视图绑定到 DOM 元素，如下所示：

```
var pop = new GenrePop({el: $('#pop')});
var hip = new GenreHipHop({el: $('#hipHop')}); 
```

有关将视图绑定到元素的更多信息，请参阅[本文](http://aaronhardy.com/javascript/javascript-architecture-backbone-js-views/)。

# wcf - Silverlight 和 http 代码

> ID：15253058
> 
> 赞同：0
> 
> 时间：2013-03-06T16:40:50.210
> 
> 标签：wcf, silverlight

我有一个silverlight 应用程序，其中wcf 调用失败。

我需要判断我是否收到 http 500 错误和 504 错误。

有什么方法可以在 silverlight 中捕获它，以便我可以记录它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T22:01:36.020

由于浏览器堆栈的限制，您在应用程序中看不到 504 错误。浏览器只会向任何插件（例如 Silverlight）返回 200 或 404。

[您可以使用Fault Contracts](http://msdn.microsoft.com/en-us/library/ms733721.aspx)解决此问题。

**[SilverlightShow 上的这篇文章是必不可少的阅读材料](http://www.silverlightshow.net/items/Handling-service-exceptions-within-Silverlight-applications.aspx)**，它将帮助您入门

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:37:52.910

客户端 Http 堆栈将返回 504 错误。

# iis - IIS 表单身份验证无法识别 Cookie

> ID：15253059
> 
> 赞同：1
> 
> 时间：2013-03-06T16:40:55.183
> 
> 标签：iis, cookies, coldfusion, form-authentication

由于某种原因，IIS 无法识别我的表单身份验证 cookie，它一直重定向到登录页面。登录页面是基于使用 .NET 集成的 ColdFusion 10。我基本上试图模仿[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff647070.aspx)的“创建表单身份验证 Cookie”部分。

IIS 7.5 身份验证通过以下设置启用了表单身份验证：

*   登录网址：/my/login/page.cfm
*   超时：30
*   模式：使用cookies
*   名称：.CFAUTH
*   保护：加密
*   需要 SSL：否
*   延长有效期：是

代码基本上是这样的：

```
<!--- Authenticating code here... --->

<!--- Create .NET Instances --->
<cfobject type=".NET" assembly="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\System.Web.dll" class="System.Web.Security.FormsAuthentication" name="authForm" />
<cfobject type=".NET" assembly="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\System.Web.dll" class="System.Web.Security.FormsAuthenticationTicket" name="authTicket" />

<!--- Create Auth Ticket --->
<cfset authTicket.init(2, "user.name", Now(), DateAdd("n", 30, Now()), false, "") />

<!--- Encrypt the Ticket, Creating Cookie Value --->
<cfset authCookie = authForm.Encrypt(authTicket) />

<!--- Create the actual Cookie --->
<cfcookie name=".CFAUTH" expires="#DateAdd("n", 30, Now())#" value="#authCookie#" />

<!--- Redirect Back to Originating URL --->
<cflocation url="#URL.ReturnUrl#" /> 
```

我知道代码中的所有内容都可以正常工作，因为 cookie*是*在浏览器中设置的*，*我可以`Decrypt()`获取 cookie 值并`Get_Name()`检索正确的用户名。但是，IIS 并不关心 cookie。有什么想法吗？我错过了什么吗？感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:26:15.400

再次检查您的 cookie。ColdFusion 将 cookie 名称大写，无论您如何键入名称。还要验证域。我以前在涉及 cookie 的地方混合 CF 和 .Net 时遇到过问题。我们最终将问题追溯到大写问题和 cookie 域。

为您的浏览器获取一个 cookie 插件。在寻找 cookie 问题时，这些是无价的。

# ruby - Phusion乘客不能自由港口

> ID：15253063
> 
> 赞同：2
> 
> 时间：2013-03-06T16:41:10.877
> 
> 标签：ruby, nginx, passenger

好的，我正在单独运行乘客，并且犯了一个愚蠢的错误，现在我需要帮助修复。

所以一个测试应用程序目录在特定端口上运行独立乘客，我删除了该目录，以便我可以拉一个新应用程序来代替它（并使用相同的端口）。好吧，根本不考虑乘客，我应该先停止守护进程。好吧，现在港口被绑在某个地方，我终生无法弄清楚如何阻止它。我找到了端口启动的进程，并将其杀死，但无济于事。该地址仍被绑定且无法使用。

如果没有重新启动服务器（对我来说不是一个真正可行的解决方案），我怎样才能一起杀死那个 nginx / 乘客进程，以便我可以在那个端口上启动一个新的乘客实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T09:21:56.253

运行`lsof -i :portnumber`例如`lsof -i :3000`

你会得到这样的东西......

```
COMMAND     PID    USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
Passenger 10514 USERNAME    5u  IPv4 0xea95336b89bfa931      0t0  TCP *:hbci (LISTEN)
Passenger 10515 USERNAME    5u  IPv4 0xea95336b89bfa931      0t0  TCP *:hbci (LISTEN) 
```

`kill PID`使用...停止进程`kill 10514`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:29:00.540

Passenger Standalone 会为您启动 Nginx，这就是实际绑定到端口的内容。因为您删除了目录，Passenger Standalone 无法访问 Nginx 的锁定文件或 PID 文件，这就是为什么在杀死Passenger Standalone 时它​​无法为您杀死Nginx。你应该手动杀死 Nginx。

# ms-access - 需要有关此 IIF 声明的帮助

> ID：15253064
> 
> 赞同：2
> 
> 时间：2013-03-06T16:41:16.223
> 
> 标签：ms-access, if-statement, syntax

我输入了这个 iif 语句，它说你输入的表达式很复杂，有人可以给我建议如何处理这个问题。你认为我应该拆分公式吗？

```
IIf([MarkUpI]=100 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1.22, 
IIf([MarkUpI]=101 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1.22, 
IIf([MarkUpI]=200 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1.22, 
IIf([MarkUpI]=201 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1.22, 
IIf([MarkUpI]=300 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1, 
IIf([MarkUpI]=400 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1.05, 
IIf([MarkUpI]=500 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*1.03, 
IIf([MarkUpI]=600 And [Stock/NonStock1]="Stock",[QTY1]+[UnitPrice1]*22, 
IIf([MarkUpI]=100 And [Stock/NonStock1]="Non-Stock",[QTY1]+[UnitPrice1]*1.22, 
IIf([MarkUpI]=101 And [Stock/NonStock1]="Non-Stock",[QTY1]+[UnitPrice1]*1.05, 
IIf([MarkUpI]=200 And [Stock/NonStock1]=Non-Stock,[QTY1]+[UnitPrice1]*1.22, 
IIf([MarkUpI]=201 And [Stock/NonStock1]=Non-Stock,[QTY1]+[UnitPrice1]*1.05, 
IIf([MarkUpI]=300 And [Stock/NonStock1]=Non-Stock,[QTY1]+[UnitPrice1]*1, 
IIf([MarkUpI]=400 And [Stock/NonStock1]=Non-Stock,[QTY1]+[UnitPrice1]*1.05, 
IIf([MarkUpI]=500 And [Stock/NonStock1]=Non-Stock,[QTY1]+[UnitPrice1]*1.03, 
IIf([MarkUpI]=600 And [Stock/NonStock1]=Non-Stock,[QTY1]+[UnitPrice1]*22,0)))))))))))))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:55:55.590

似乎 Access 对嵌套 IIF 的数量有限制，但在您的情况下，您可以将其分为 2 个主要 IIF（用于库存和非库存），其他嵌套在其中，并删除以下常见计算：

```
CalcResult: [QTY1]+[UnitPrice1] *
    IIf([Stock/NonStock1]="Stock",
        IIf([MarkUpI]=100,1.22,
        IIf([MarkUpI]=101,1.22,
        IIf([MarkUpI]=200,1.22,
        IIf([MarkUpI]=201,1.22,
        IIf([MarkUpI]=300,1,
        IIf([MarkUpI]=400,1.05,
        IIf([MarkUpI]=500,1.03,
        IIf([MarkUpI]=600,22,0)))))))),
    IIf([Stock/NonStock1]="Non-Stock",
        IIf([MarkUpI]=100,1.22,
        IIf([MarkUpI]=101,1.05,
        IIf([MarkUpI]=200,1.22,
        IIf([MarkUpI]=201,1.05,
        IIf([MarkUpI]=300,1,
        IIf([MarkUpI]=400,1.05,
        IIf([MarkUpI]=500,1.03,
        IIf([MarkUpI]=600,22,0)))))))))) 
```

**注意：**我并不是说这是最好的方法（我也同意查找表会更好），但这可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:41:27.873

如果您真的想在查询中完成所有操作，请使用 Switch 函数，如下所示：

```
[QTY1]+[UnitPrice1] *
IIf([Stock/NonStock1]="Stock",
Switch([MarkUpI]=100,1.22,[MarkUpI]=101,1.22,[MarkUpI]=200,1.22,[MarkUpI]=201,1.22,[MarkUpI]=300,1,[MarkUpI]=400,1.05,[MarkUpI]=500,1.03,[MarkUpI]=600,22,0),
Switch([MarkUpI]=100,1.22,[MarkUpI]=101,1.05,[MarkUpI]=200,1.22,[MarkUpI]=201,1.05,[MarkUpI]=300,1,[MarkUpI]=400,1.05,[MarkUpI]=500,1.03,[MarkUpI]=600,22,0)) 
```

但是您真的想像其他人强烈建议的那样**使用查找表。**稍后更改值会容易得多，看起来像这样：

```
Stocked MarkupI Amt
Stock   100 1.22
Stock   101 1.22
Stock   200 1.22
Stock   201 1.22
Stock   300 1
Stock   400 1.05
Stock   500 1.03
Stock   600 22
Non-Stock   100 1.22
Non-Stock   101 1.05
Non-Stock   200 1.22
Non-Stock   201 1.05
Non-Stock   300 1
Non-Stock   400 1.05
Non-Stock   500 1.03
Non-Stock   600 22 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:48:39.460

考虑使用`Switch()`function 而不是 embedded `iif`s。
您也可以将因子为 1.22 的 5 个案例保留为“其他”案例

看来您还可以创建一个具有不同 [MarkUpI] 和 [Stock/NonStock1] 值的表并加入该表以获得您需要的内容？

# javascript - `navigator.geolocation.getCurrentPosition()` 被卡住并且不会在 Chrome 中触发回调。

> ID：15253066
> 
> 赞同：2
> 
> 时间：2013-03-06T16:41:22.233
> 
> 标签：javascript, html, google-chrome, geolocation

在应用程序的深处，我需要使用 Geolocation API。

```
 var that = this;

    if(Modernizr.geolocation){
      $(this).addClass("loading");

      navigator.geolocation.getCurrentPosition(function(position){
        that.handleGeoSuccess(position); // defined elsewhere
      },function(error){
        that.handleGeoError(error); // defined elsewhere
      }, {maxAge: 0, timeout: 1000});
    } else {
      that.handleGeoError(); // defined elsewhere
    } 
```

这发生在点击事件中。Chrome (25.0.1364.155) 提示许可，但在接受或拒绝地理位置信息时都不会触发任何回调。即使使用 setTimeout 再次询问也没有用。没有回调被触发。

我被困在这里，不知道在哪里看。有任何想法吗？

顺便说一句，它适用于 Firefox (19.0) 和 Safari (6.0.2)，当前的 Chrome Canary 的行为相同。

# workitem - TF237090: 不存在或访问被拒绝

> ID：15253068
> 
> 赞同：4
> 
> 时间：2013-03-06T16:41:26.897
> 
> 标签：workitem

我创建了一个新的工作项类型，我正在尝试将它导入到我的 tfs 2012 项目中，但我收到错误*TF237090: Does not exist or access is denied*。我可以在更改后成功导入现有工作项，但不能导入新工作项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T17:03:22.380

**概括**

*   确保`witadmin`用于导入导出 WITD 的版本与 TFS Server 版本一致
*   确保正在使用的[MS VS TFS Power Tools](http://visualstudiogallery.msdn.microsoft.com/site/search?query=visual%20studio%20team%20foundation%20server%20power%20tools&f%5B1%5D.Value=visual%20studio%20team%20foundation%20server%20power%20tools&f%5B1%5D.Type=SearchText&f%5B0%5D.Value=tools&f%5B0%5D.Type=RootCategory&ac=5)的版本对应于 TFS Server 版本

**背景**

我安装了多个版本的 Visual Studio，包括版本 2012 (v11.0) 和 2013 (v12.0)。但是，我们的 TFS 服务器版本是 2012。

[`witadmin importwitd`](http://msdn.microsoft.com/en-us/library/dd312129.aspx)从命令行运行时我遇到了这个问题。用于导出和导入工作项类型定义 (WITD) 的工具似乎需要与 TFS 服务器版本相同。因此，从命令行运行时，要使用 TFS 2012 运行，该`witadmin`命令应该从`C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE`目录运行，而不是从该目录`v12.0`或任何其他版本运行。

一旦我意识到我可能一直在尝试导入从不同`witadmin`版本导出的 WITD XML 文件，我（从服务器）以正确的版本重新导出 - 使用`witadmin exportwitd`- 然后进行更改，然后重新导入。

令人烦恼的是，2012 年的工作项类型编辑器似乎并不关心我导入的 XML WITD 文件来自不同的版本。

从这里获得的见解：http: [//social.msdn.microsoft.com/Forums/en-US/399b4c50-fbaa-43f6-a0f5-88129f9b2ed8/tf237090-does-not-exist-or-access-is-denied-when -usint-witadmin-importwitd?forum=tfsgeneral](http://social.msdn.microsoft.com/Forums/en-US/399b4c50-fbaa-43f6-a0f5-88129f9b2ed8/tf237090-does-not-exist-or-access-is-denied-when-usint-witadmin-importwitd?forum=tfsgeneral)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T21:19:32.147

我在 VS2012 中通过 Dev Studio Tools->Process Editor->Work Item Types->Import WIT 导入 WIT 进行了尝试。如果我记得我之前遇到这个问题是因为有人打开了一个工作项（在这种情况下它是一个测试用例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-30T16:46:31.170

[就我而言，我能够使用 Visual Studio 2017 中的TFS 流程模板编辑器扩展](https://marketplace.visualstudio.com/items?itemName=KarthikBalasubramanianMSFT.TFSProcessTemplateEditor)来更改特定项目的 Task WIT 模板，但是当尝试更改另一个项目时，它失败并显示消息：

> Microsoft Visual Studio 未能将“任务”工作项类型保存到服务器。**TF237090**：不存在或访问被拒绝。

我是成员项目集合管理员（更高级别 - 集合），我拥有执行大部分所需更改所需的大部分权限，包括团队管理员（“团队项目名称”团队 - 管理员）。

事实证明，我不是该特定团队项目中“项目管理员”的一部分。我所要做的就是导航到管理区域，在该特定项目的安全选项卡下，并将我的用户名添加到项目管理员组。

# grails - 在 Grails 2 中，如何从应用程序所依赖的插件中包含 Gant 脚本中的目标？

> ID：15253070
> 
> 赞同：2
> 
> 时间：2013-03-06T16:41:31.017
> 
> 标签：grails, plugins, gant

在 Grails 2 中，我正在创建一个依赖于 shiro 插件的公司特定身份验证插件。我想在我插件的 gant 脚本中重用 shiro 的 gant 脚本。我的挑战是我不知道如何在我的 includeTargets 中访问 shiro 的 gant 脚本。

我想重用 _ShiroInternal.groovy 中定义的目标，但我不知道使用什么 Grails 变量来访问它：

```
includeTargets << new File ("${**what-goes-here**}/scripts/_ShiroInternal.groovy") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:13:12.083

为每个已安装的插件添加了一个属性，`fooPluginDir`. 所以对于 shiro 插件来说

```
includeTargets << new File(shiroPluginDir, 'scripts/_ShiroInternal.groovy') 
```

# android - 将 Android 视图设置为不可见/不工作

> ID：15253071
> 
> 赞同：1
> 
> 时间：2013-03-06T16:41:32.543
> 
> 标签：android, android-layout, surfaceview

我有一个表面视图，我在上面放了一个相机预览。最重要的是，我有一个包含一堆视图的相对布局，例如扫描按钮等。

我正在尝试使这些视图之一不可见，就像这样

```
myIcon.setVisibility(View.INVISIBLE); 
```

而且我也试过

```
myIcon.setVisibility(View.GONE); 
```

两者似乎都不起作用。Invisible 根本不起作用，而且 Gone*有点用*

在这里您可以看到一个 2D 图标，一个设置按钮。在隐藏之前，它看起来像这样：

![初始](../Images/c738911267f274c56742342ae6e5d6e9.png)

然后我调用 setVisibility(View.GONE)

![在此处输入图像描述](../Images/5332b98e98b97f227c9bda0745afae1c.png)

您可以清楚地看到保存这些视图的线性布局通过为设置按钮提供更多空间来做出响应，但它并没有从其后面移除 2D。我认为这与 SurfaceView 有关，因为我知道这通常会起作用。

我努力了

```
myIcon.requestFocus(); 
```

在我改变可见性之后，但仍然没有。

有什么建议么？请仅在您对此特定问题有经验的情况下回复

编辑：这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.sample.SampleJavaCameraView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="gone"
    android:id="@+id/cv_surface_view" />

<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true">

<ImageView 
    android:id="@+id/myIcon"
    android:layout_width="30dip"
    android:layout_height="30dip"
    android:src="@drawable/twod_icon"

    />

    <ImageButton 
    android:id="@+id/settingsBtn"
    android:layout_width="30dip"
    android:layout_height="30dip"
    android:src="@drawable/settings_gear"
    android:background="@null"
    />
</LinearLayout>

  <ImageButton
      android:id="@+id/scan_btn"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:src="@drawable/logo_small"
      android:background="@drawable/blue_radial_grad"
      android:layout_alignParentBottom="true"
      android:layout_alignParentRight="true"
      android:padding="20dip"
       /> 
```

在这里，您可以看到我试图隐藏的图像被包裹在线性布局中。SurfaceView 在顶部，它是 SurfaceView 的 OpenCV 包装类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:12:47.537

也许试试`myIcon.bringToFront();`

# proxy - 代理和 php 脚本

> ID：15253074
> 
> 赞同：0
> 
> 时间：2013-03-06T16:41:45.447
> 
> 标签：proxy

这可能是一个简单的问题，但我不知道如何解决我的问题。

我正在使用的网络上有一个代理。我在命令行上执行 php 脚本（composer.phar 名称不同）。该脚本显然使用 curl，尝试从 http url 下载文件。由于代理，我无法下载。

所以我的问题是：我应该在哪里配置代理设置以使用 composer.phar 之类的工具？

也许命令行不是问题，如果我在应用程序中使用 curl，我也会遇到同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:18:46.490

我必须添加一个 HTTP_PROXY 系统环境变量才能使其工作

# objective-c - 在objective-c中隐藏UIViewController

> ID：15253075
> 
> 赞同：0
> 
> 时间：2013-03-06T16:41:45.647
> 
> 标签：objective-c, xcode, uiview, uiviewcontroller, nsstring

我有一个带有表格和一个按钮的主页，按下我的按钮我将加载 qrCode 阅读器视图，我想在扫描条形码后隐藏我的 qrCode 视图，

你能给我一些提示吗？最好的方法是什么？NSNOtification 或......以及如何？

提前致谢！

这是我的二维码扫描代码：

```
 - (void) readerView:(ZBarReaderView *)readerView didReadSymbols: (ZBarSymbolSet *)symbols 
fromImage:(UIImage *)image
{

ZBarSymbol * s = nil;
for (s in symbols)
{

    image_view.image = image; 
```

// 这里我会去httpReq类的addStamp方法

```
 [[HttpReq sharedHttp] setCode:s.data];
    [[HttpReq sharedHttp] addStamp];

}
} 
```

这是我的 addStamp 方法，我必须在此方法中隐藏视图：

```
-(void) addStamp
{

// My code was here for connect to api

     NSError *jsonError;
     NSDictionary* dic = [NSJSONSerialization
                          JSONObjectWithData:data
                          options:kNilOptions
                          error:&jsonError];

     if(jsonError != nil)
     {
         return;
     }
 // I want to do it here when I have a success or not      

     BOOL success =  [[dic objectForKey:@"success"] boolValue];

     if(success){

         [self addStampInDB:[[dic objectForKey:@"cardId"] intValue]];

     }else{

         UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[dic 
 objectForKey:@"error"]
                                                        delegate:nil
  cancelButtonTitle:@"OK" otherButtonTitles:nil];
         [alert performSelectorOnMainThread:@selector(show) withObject:nil 
 waitUntilDone:NO];
     }

 }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:44:14.293

在 Objective-C 中隐藏视图非常简单：

```
[theView setHidden:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:57:04.457

当调用 addStamp 方法时，您可以调用在第一个类中定义的方法 using`performSelector`或者您可以遵循协议和委托机制以使其保持整洁。

# css - CSS下拉菜单不适用于ie8并且在iPhone 5浏览器上闪烁关闭

> ID：15253078
> 
> 赞同：-2
> 
> 时间：2013-03-06T16:41:54.293
> 
> 标签：css, menu, internet-explorer-8, submenu

人类需要...我的 CSS 下拉菜单不会显示在 ie8 中，然后在 iPhone 5 浏览器（响应式设计）上闪烁然后关闭...使用来自主题森林模板的代码。没有进一步的告别这里是代码。

HTML

```
<div id="navigation">

<ul>
<li><a href="/index.htm">Home</a></li>

<li><a href="/about">About</a>
<ul>
<li><a href="/leadership">Leadership</a></li>
<li><a href="/giving">Giving</a></li>
<li><a href="/careers">Careers</a></li>
<li><a href="/contact">Contact</a></li>
</ul>
</li>

</ul>

</div> 
```

CSS

```
/* Main Navigation

==========================*/

#navigation {
float: right;
}

#navigation ul, #navigation li {
list-style:none; 
padding:0; 
margin:0; 
display:inline;
}

#navigation ul li{
float:left;  
position:relative; 
}

#navigation ul li a { 
font-family: Arial, sans-serif;
display: inline-block;
color: #888;
padding: 40px 6px 10px 6px;
margin: 0 5px;
text-decoration: none;
font-size: 14px;
border-bottom: 3px solid transparent;
}

#navigation ul li a:hover{
border-bottom: 3px solid #555;
}

#navigation ul ul {
opacity: 0; 
margin: -3px 0 0 5px;
filter: alpha(opacity=0); 
position: absolute;
top:-99999px; 
left: 0;
background: #fff;
border: 1px solid #dddddd;
border-top: 3px solid #555;
z-index: 999;
}

#navigation ul ul li a:hover {
border-bottom: 1px solid #ddd;
}

#navigation ul ul li a {
padding: 8px 0;
display: block;
width: 130px;
margin: 0 16px;
font-family: Arial, sans-serif;
font-weight: normal;
font-size: 12px;
border-bottom: 1px solid #dddddd;
border-top: 1px solid transparent;
}

#navigation ul ul ul { 
position:absolute; 
top:-99999px; 
left:100%; 
opacity: 0;
margin: -3px 0 0 0;
z-index: 999;
}

#navigation ul ul ul li a { 
border-bottom: 1px solid #dddddd !important;
border-top: 1px solid transparent;
}

#navigation ul ul li:last-child a, #navigation ul ul li:last-child a:hover {
border-bottom: 1px solid transparent
}

#navigation ul ul ul li:last-child a {
border-bottom: 1px solid transparent !important
}

#navigation ul li:hover>ul{
opacity: 1; 
position:absolute; 
top:99%; 
left:0;
}

#navigation ul ul li:hover>ul{
position:absolute; 
top:0; left:100%; 
opacity: 1; 
z-index:497; 
background: #fff border: 0; 
}

#navigation ul li:hover > a {
color: #444;
}

#navigation ul ul li:hover > a {
border-top: 1px solid transparent; 
color: #444;
}

#current {
font-weight: bold !important; 
color: #444 !important; 
border-bottom: 3px solid #555 !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:04:31.020

您的问题似乎与该行有关：

```
filter: alpha(opacity=0); 
```

要让它在 IE8 中工作，您需要包含以下行：

```
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"; /*IE8*/ 
```

或者，完全删除这条线似乎不会破坏任何东西。您可能需要使用不同的浏览器，看看会发生什么。

这里有关于 IE8 中不透明度的更深入讨论：[网页中的不透明度？](https://stackoverflow.com/questions/859000/opacity-in-web-pages)

恐怕我无法在 iPhone 方面为您提供帮助。

您的代码中似乎也有错误：

```
#navigation ul ul li:hover>ul{
  position:absolute; 
  top:0; left:100%; 
  opacity: 1; 
  z-index:497; 
  background: #fff border: 0; 
} 
```

`#fff`您在最后一行之后缺少一个分号。使用[W3C CSS Validator](http://jigsaw.w3.org/css-validator/#validate_by_input)来帮助您捕获此类错误。

# xpath - 使用 Xpath 检索元素

> ID：15253080
> 
> 赞同：0
> 
> 时间：2013-03-06T16:42:00.970
> 
> 标签：xpath

HTML部分：

```
<div class="abc">
    <div style="text-align:left; itemscopr itemtype="xyz">
        <h1 itemtype="mno"> I want this text </h1>
    </div>
</div> 
```

我在用

```
$text = $xpath->query('//div[class="abc"]/div/h1] 
```

但我没有得到任何价值。请帮助我，因为我是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:45:44.697

你应该试试

```
//div[@class="abc"]/div/h1 
```

不同之处在于之前的[符号](http://www.w3.org/TR/xpath/#path-abbrev)`@`，`class`因为[轴是通过这种方式访问](http://www.w3.org/TR/xpath/#path-abbrev)​​的。当您省略该符号时，它会查找节点名称（标签名称）。[`attribute`](http://www.w3.org/TR/xpath/#path-abbrev)`@`

这将返回整个`h1`节点（或者，更确切地说，一个包含所有匹配`h1`节点的节点集）。

如果您只想要元素中的文本，请尝试使用以下[`evaluate`](http://www.php.net/manual/en/domxpath.evaluate.php)函数：

```
$text = $xpath->evaluate("//div[@class='abc']/div/h1/text()") 
```

# iis - 允许 SSL 连接到 Google PageSpeed 服务需要哪些步骤？

> ID：15253081
> 
> 赞同：2
> 
> 时间：2013-03-06T16:42:01.437
> 
> 标签：iis, ssl, cdn, google-pagespeed

我目前正在研究如何通过 Google 的 PageSpeed 服务实现 SSL 连接。我已被该计划录取；但我在概念化 SSL 连接的工作方式时遇到了问题。

我正在使用 IIS 7，并且已经拥有多个域的生产证书。谷歌声明您最多可以添加 50 个域......但没有指定有多少可以使用 SSL。

1.  我的所有域都可以通过 Google PageSpeed 提供 SSL 连接吗？
2.  我需要新的 SSL 证书吗？
3.  ~~如果没有，我是将证书的私有部分还是公共部分上传到 Google？~~
4.  ~~如何从 IIS 中获取这些密钥？~~
5.  是否需要在我的服务器上安装任何来自 Google 的证书？

SSL 指南提供的手持方式很少。

[https://developers.google.com/speed/docs/pss/SSLSetup](https://developers.google.com/speed/docs/pss/SSLSetup)

我希望有人曾经经历过这件事并可以指导我。

正如我之前所说，我们有几个域；我正计划使用流量较少的网站之一进行 SSL 测试。我不想让自己无法添加我管理的更重要的域。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:46:33.597

```
 1.Will all of my domains be able to serve SSL 
  connections with Google PageSpeed? 
```

**回答 1** 我在教程中看到的是它支持一个主机：

> 在开始 SSL 设置之前，请注意 PageSpeed 服务支持以下证书类型：
> 
> *   单个域/主机名
> *   自签名
> *   通配符
> *   主题备用名称 (SAN)/多域

来自[https://developers.google.com/speed/docs/pss/SSLSetup](https://developers.google.com/speed/docs/pss/SSLSetup)

```
2\. Do I need new SSL certificates? 
```

**答案 2** 是的，您需要一个新证书，并且需要对其进行签名，这部分描述了它：

**生成证书签名请求** ：[https ://developers.google.com/speed/docs/pss/setup](https://developers.google.com/speed/docs/pss/setup)

```
5\. Do any certificates from Google need to be installed on my server? 
```

**回答 5** 不，您需要将您的证书上传到 Google 的服务器，如下所述：

> **5.上传证书**

在[https://developers.google.com/speed/docs/pss/SSLSetup](https://developers.google.com/speed/docs/pss/SSLSetup)

# xcode - iphone5上UITableview底部被截断

> ID：15253082
> 
> 赞同：1
> 
> 时间：2013-03-06T16:42:03.027
> 
> 标签：xcode, uitableview, iphone-5

让我先说这在 iphone 4 上完美运行 - 视网膜和常规。

我有一个有 4 个部分的分组表。为了设置它，我使用 viewWillAppear 中的 dispatch_async 东西从服务器获取信息 - 然后在服务器返回时调用 reloadTable。

用正确的信息重新加载表格后，当我尝试向下滚动时，我会看到更多单元格，但它会产生阻力，就好像我已经到达表格的末尾一样，即使还有 3 或 4 个表格单元格要显示和反弹背部。

有一个单元格有一个图像和一些文本，我使用 cell.addsubview 在 cellForRowAtIndexPath 函数中添加一些子视图。

但所有其他单元格高度都是正常的 (44)

我正在使用 IB 来获得分组的表格视图，并且不在我的代码中设置框架、边界或任何与它有关的东西 - 只需使用正确的函数设置各种表格单元的高度。

有谁知道为什么它会在 iphone 4 中完美运行（我可以向下滚动到底部并查看所有单元格）而不是在 iphone 5 中？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:18:15.423

我在 Xib 文件中检查了自动布局。

为了解决这个问题，我在顶视图控制器中将 self.view.frame.size.height 设置为 568（我使用的是加载表视图的导航控制器）。一旦我这样做了，所有子视图都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T17:04:42.223

我不知道如何使用 XIB 但我总是这样使用

```
tableview.frame = cgrectMake(0,320,self.view.frame.size.width,self.view.frame.size.height-64); 
```

64= nabvar 高度（44）+ 顶栏（22）；

希望这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T09:06:06.990

我有同样的问题要解决，就像下面的优化方式一样

如果您使用的 autoLayout 不是硬编码，请使用约束

![在此处输入图像描述](../Images/255d9a3cb75a93d76c751f6cf1e6b094.png)

# c# - 自定义会员 3 部分登录

> ID：15253088
> 
> 赞同：0
> 
> 时间：2013-03-06T16:42:16.243
> 
> 标签：c#, .net, asp.net-membership, membership-provider, universal-provider

希望使用通用提供程序实现自定义的 DefaultMembershipProvider，此提供程序需要处理 3 个段以进行身份​​验证。

1.  组ID
2.  用户名
3.  密码

目前，我有通过将 GroupID 和用户名连接在一起作为用户名的函数，如下所示

```
 public UserMembership GetUser(int GroupID, string username, bool userIsOnline)
{
    UserMembership user = new UserMembership(base.GetUser(GroupID.ToString() + ":" + username, userIsOnline));

    return user;
} 
```

对我来说，这感觉就像一个 hack，一个干净的 hack，但仍然是一个 hack。任何人都有更好的想法来实现这一点，而无需从头开始编写完整的提供程序。

# ruby-on-rails-3 - capybara 2.0+ 中的嵌套功能

> ID：15253091
> 
> 赞同：5
> 
> 时间：2013-03-06T16:42:20.083
> 
> 标签：ruby-on-rails-3, rspec, capybara, rspec-rails

我想做这样的事情：

```
feature "sign-up" do
  before {visit signup_path}
  let(:submit) {"Create my account"}

  feature "with invalid information" do
    scenario "should not create a user" do
      expect {click_button submit}.not_to change(User, :count)
    end
  end

  feature "with valid information" do
    scenario "should create a user" do
      fill_in "Name",         with: "test name"
      fill_in "Email",        with: "test@test.com"
      fill_in "Password",     with: "password"
      fill_in "Confirmation", with: "password"
      expect {click_button submit}.to change(User, :count).by(1)
    end
  end
end 
```

但是当我运行 rspec 我得到

```
in `block in <top (required)>': undefined method `feature' for #<Class:0x000000039e0018> (NoMethodError) 
```

如果我将其更改为如下所示，它可以工作：

```
 feature "with invalid information" do
    before {visit signup_path}
    let(:submit) {"Create my account"}

    scenario "should not create a user" do
      expect {click_button submit}.not_to change(User, :count)
    end
  end

  feature "with valid information" do
    before {visit signup_path}
    let(:submit) {"Create my account"}

    scenario "should create a user" do
      fill_in "Name",         with: "test name"
      fill_in "Email",        with: "test@test.com"
      fill_in "Password",     with: "nirnir"
      fill_in "Confirmation", with: "nirnir"
      expect {click_button submit}.to change(User, :count).by(1)
    end
  end 
```

编辑：

另外，以下代码有效（描述嵌套内部功能） - 但它有任何错误吗？

```
feature "sign-up" do
  background {visit signup_path}
  given(:submit) {"Create my account"}

  scenario "with invalid information" do
    expect {click_button submit}.not_to change(User, :count)
  end

  describe "with valid information" do
    background do
      fill_in "Name",         with: "test name"
      fill_in "Email",        with: "test@test.com"
      fill_in "Password",     with: "password"
      fill_in "Confirmation", with: "password"
    end

    scenario { expect {click_button submit}.to change(User, :count).by(1) }

    scenario "after submission" do 
      click_button submit
      page.html.should have_content("Registration successful")
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T17:11:15.467

**编辑（23/01/2014）：**嵌套功能自 2.2.1 版起可用。看[这里](https://github.com/jnicklas/capybara/commit/61524b0fd32a1fb55b82853bdc4a0293e9fcdef0)

**编辑（24/07/2013）：** Capybara > 2.1.0 将允许嵌套功能。看[这里](https://github.com/jnicklas/capybara/pull/1113)

你不能。这就是宝石的管理员所说的

> 我想你可以称之为限制。`feature`不能嵌套。您可以使用其中一个`context`或`describe`代替，但我建议不要使用这些，它往往会使测试变得非常难以理解。

在其他一些情况下，可能会争论这样做的便利性，但在这个特定的情况下，您应该使用`scenario`而不是嵌套的`feature`.

此外，如果您想在任何地方保持一致并使用新的 DSL，请使用`background`代替`before`和`given`代替`let`. 像这样：

```
feature "sign-up" do
  background {visit signup_path}
  given(:submit) {"Create my account"}

  scenario "with invalid information" do
    expect {click_button submit}.not_to change(User, :count)
  end

  scenario "with valid information" do
    fill_in "Name",         with: "test name"
    fill_in "Email",        with: "test@test.com"
    fill_in "Password",     with: "password"
    fill_in "Confirmation", with: "password"
    expect {click_button submit}.to change(User, :count).by(1)
  end
end 
```

您必须删除，`it`因为`scenario`它只是一个别名`it`，您也不​​能嵌套`it`。

或者，如果您发现它更具可读性，您可以随时切换回旧的 DSL。在那种情况下，我会做这样的事情：

```
describe "sign-up" do
  before {visit signup_path}
  let(:submit) {"Create my account"}

  context "with invalid information" do
    it "does not create a user" do
      expect {click_button submit}.not_to change(User, :count)
    end
  end

  context "with valid information" do
    before
      fill_in "Name",         with: "test name"
      fill_in "Email",        with: "test@test.com"
      fill_in "Password",     with: "password"
      fill_in "Confirmation", with: "password"
    end
    it "creates a user" do
      expect {click_button submit}.to change(User, :count).by(1)
    end
  end

end 
```

但只要规范检查它必须检查的内容，无论如何你应该没问题。其余的都是风格、可读性和良好实践的问题，这些都很重要，但更容易引起讨论和分歧。在这种情况下，gem 的作者不允许嵌套`feature`'s。也许是为了可读性，或者可能觉得不需要它，或者可能没有考虑过......如果你真的想嵌套功能，你可以随时尝试实现它并请求它。

# android - 如何防止布局移动？

> ID：15253092
> 
> 赞同：1
> 
> 时间：2013-03-06T16:42:24.240
> 
> 标签：android, android-layout

我的问答游戏中有一个主要布局，其中还有 3 个嵌套布局，一个在另一个下方，垂直。在顶部，我有一个问题的文本视图，中间的一个有四个垂直排列的按钮。现在，当我有一行问题时，一切都很好，但是一旦问题进入两行，我的按钮就会向下移动一行。如何防止这种情况？我希望我的问题下方的所有内容都是固定的，静态的，而不是移动的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="404dp"
        android:orientation="vertical"
        android:weightSum="2"
         >
  <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_weight="1" >

    <TextView
        android:id="@+id/tvPitanje"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="20dp"
        android:gravity="center"
        android:text="@string/tvPitanje"
        android:textSize="22sp" /> 
    </LinearLayout>

<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_weight="1" >

    <Button
        android:id="@+id/bOdgovor1"
        android:layout_width="260dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="10dp"
        android:background="@drawable/buttons"
        android:text="@string/bOdgovor1"
        android:textSize="26sp" />

    <Button
        android:id="@+id/bOdgovor2"
        android:layout_width="260dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:background="@drawable/buttons"
        android:text="@string/bOdgovor2"
        android:textSize="26sp" />

    <Button
        android:id="@+id/bOdgovor3"
        android:layout_width="260dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:background="@drawable/buttons"
        android:text="@string/bOdgovor3"
        android:textSize="26sp" />

    <Button
        android:id="@+id/bOdgovor4"
        android:layout_width="260dp"
        android:layout_height="60dp"
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:background="@drawable/buttons"
        android:text="@string/bOdgovor4"
        android:textSize="26sp" />

    </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <Button
            android:id="@+id/bIzlazIzKviza"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="15dp"
            android:background="@drawable/buttons"
            android:text="@string/bIzlazKviz"
            android:textSize="23sp" />

        </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tvCountdown"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50dp"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:text="@string/tvCountdown"
            android:textColor="#ff0000"
            android:textSize="29sp" />

        <TextView
            android:id="@+id/tvSkor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="30dp"
            android:layout_marginTop="5dp"
            android:gravity="center"
            android:text="@string/tvSkor"
            android:textSize="23sp" />

        </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" >

        <TextView
            android:id="@+id/tvBrojPitanja"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginLeft="30dp"
            android:text="1"
            android:textSize="32sp" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:22:23.370

稍后，我们开始吧，这个问题有几个解决方案，我将在这里指出其中两个可能是最用户友好的：

1.  对所有内容都使用滚动视图，恕我直言，这是最用户友好的解决方案。
2.  仅对具有定义高度的文本和按钮使用滚动视图，并将下面的文本和按钮静态放在下面，然后使用相对布局。
3.  选框文本视图

我将在这里提出的第一个选项，包括一些布局重构，第二个我不推荐使用，如果你有示例的话，实现起来很简单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:background="@android:color/background_light"
              android:orientation="vertical">

    <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">

        <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical">

            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical">

                <TextView
                        android:id="@+id/tvPitanje"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_gravity="center"
                        android:layout_marginLeft="5dp"
                        android:layout_marginRight="5dp"
                        android:layout_marginTop="20dp"
                        android:gravity="center"
                        android:text="long text that will automaticly scroll and make sure all content will be displayed right in the scrollview this is the best case scenario"
                        android:textSize="22sp"/>

                <Button
                        android:id="@+id/bOdgovor1"
                        android:layout_width="260dp"
                        android:layout_height="60dp"
                        android:layout_gravity="center"
                        android:layout_marginTop="10dp"
                        android:text="one"
                        android:textSize="26sp"/>

                <Button
                        android:id="@+id/bOdgovor2"
                        android:layout_width="260dp"
                        android:layout_height="60dp"
                        android:layout_gravity="center"
                        android:layout_marginTop="20dp"
                        android:text="two"
                        android:textSize="26sp"/>

                <Button
                        android:id="@+id/bOdgovor3"
                        android:layout_width="260dp"
                        android:layout_height="60dp"
                        android:layout_gravity="center"
                        android:layout_marginTop="20dp"
                        android:text="three"
                        android:textSize="26sp"/>

                <Button
                        android:id="@+id/bOdgovor4"
                        android:layout_width="260dp"
                        android:layout_height="60dp"
                        android:layout_gravity="center"
                        android:layout_marginTop="20dp"
                        android:text="four"
                        android:textSize="26sp"/>

            </LinearLayout>

            <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:orientation="horizontal">

                <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_weight="1">

                    <Button
                            android:id="@+id/bIzlazIzKviza"
                            style="?android:attr/buttonStyleSmall"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:layout_marginLeft="15dp"
                            android:text="left"
                            android:textSize="23sp"/>

                </LinearLayout>

                <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_weight="1"
                        android:orientation="vertical">

                    <TextView
                            android:id="@+id/tvCountdown"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="50dp"
                            android:layout_marginTop="5dp"
                            android:gravity="center"
                            android:text="next"
                            android:textColor="#ff0000"
                            android:textSize="29sp"/>

                    <TextView
                            android:id="@+id/tvSkor"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="30dp"
                            android:layout_marginTop="5dp"
                            android:gravity="center"
                            android:text="middle"
                            android:textSize="23sp"/>

                </LinearLayout>

                <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:layout_weight="1">

                    <TextView
                            android:id="@+id/tvBrojPitanja"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_gravity="center"
                            android:layout_marginLeft="30dp"
                            android:text="right"
                            android:textSize="32sp"/>

                </LinearLayout>

            </LinearLayout>

        </LinearLayout>

    </ScrollView>

</LinearLayout> 
```

字幕解决方案不太好

```
android:singleLine="true" 
android:ellipsize="marquee"
android:marqueeRepeatLimit ="marquee_forever"
android:scrollHorizontally="true"
android:focusable="true"
android:focusableInTouchMode="true" 
```

# rabbitmq - 如何让话题交流变得可扩展

> ID：15253093
> 
> 赞同：1
> 
> 时间：2013-03-06T16:42:26.900
> 
> 标签：rabbitmq, amqp

所以我们会有一个看起来像这样的主题交换

```
{class}.{genus} 
```

所以我们有一些与主题绑定的消费者

```
mammal.* 
```

（或`bird.*`等）

现在假设稍后我们想要包含物种信息，所以主题交换现在看起来像这样：

```
{class}.{genus}.{species} 
```

现在老消费者坏了:(

然而，他们本可以绑定为

```
mammal.*.# 
```

并且能够听到未来添加的任何信息。然而，这是我的团队自己提出来的，这让我问：

*   这是好习惯吗？
*   我应该注意这方面的权衡吗？
*   是否有另一种方法让生产者能够在不破坏现有消费者的情况下添加信息，而不需要发布到多个交易所？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:51:28.767

通常，如果您需要最大程度地控制队列传递并希望在 rabbit 中执行逻辑，那么您应该考虑**header exchange**。

通常，当我们编写发布代码时，我们确切地知道它需要进入哪个队列，因此您是否要使用路由键或布尔值来执行此操作可能不会有太大区别，具体取决于您的应用程序。

这带来了另一个需要注意的设计考虑：是否需要在 rabbit 中使用路由逻辑。有些人更喜欢只使用简单的路由键和直接或主题交换，专注于灵活的消费者。显然，很难猜测什么最适合您的应用程序。

请记住，您的消费者将被订阅，通常是静态的，订阅到交换交付的队列。也`mammal.#`与`mammal.*.#`（参见：[ref](http://www.rabbitmq.com/tutorials/tutorial-five-python.html "参考")）相同

# java - Java中不同时区之间的日历转换

> ID：15253097
> 
> 赞同：-2
> 
> 时间：2013-03-06T16:42:32.060
> 
> 标签：java

我想在java中转换两个时区之间的日历对象。我将传递第一个日历对象并希望输出是具有不同时区的修改后的日历对象。

有人可以为我提供一种方法吗？

这就是我所做的......

```
DateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
GregorianCalendar pst = new GregorianCalendar();
GregorianCalendar est = new GregorianCalendar();
pst.setTime(maintWindow);
int year = pst.get(Calendar.YEAR);
int month = pst.get(Calendar.MONTH);
int day = pst.get(Calendar.DAY_OF_MONTH);
format.setTimeZone(timeZone);
pst.set(year, month, day, hour, min);
Date date = pst.getTime();
logger.info(date);
logger.info(format.format(date));
logger.info(pst.getTime());
est.setTimeInMillis(date.getTime());
logger.info(est.getTime()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:45:06.953

您可以使用[**`Calendar.setTimeZone`**](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#setTimeZone%28java.util.TimeZone%29).

例如，如果您有一个使用任何时区初始化的`Calendar`引用`cal`，则调用这样的方法

```
cal.setTimeZone(TimeZone.getTimeZone("GMT")) 
```

`cal`修改to的时区`GMT`。

# oracle - Endeca Integrator Studio 能否导出脚本以在没有 GUI 的 RHEL 服务器上执行 ETL？

> ID：15253098
> 
> 赞同：0
> 
> 时间：2013-03-06T16:42:32.307
> 
> 标签：oracle, integration, etl, clover, endeca

我们正在使用**Java Endeca API**对生产服务器上的各种数据源执行 ETL。**Oracle Endeca Integrator Studio** ( **Clover ETL** )似乎能够执行其中许多任务。但是无法在缺少 GUI 功能的生产服务器上运行**Endeca Integrator Studio 。**有没有办法让 Integrator 导出脚本可以在 Linux 服务器上以命令模式运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:01:01.427

查看 Oracle Endeca Integrator Server 产品。它是一个具有 Web 管理界面的长期运行的无头服务。然后，您可以在远程服务器上执行 Integrator 项目和 ETL 图，或安排它们定期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T10:25:01.977

Endeca 3.0 也有 Integrator Web 管理控制台，但我不确定它在多大程度上对您有用。

# sql-server - 在 SQL 数据库中保存一个 VB 时间跨度值

> ID：15253099
> 
> 赞同：0
> 
> 时间：2013-03-06T16:42:34.357
> 
> 标签：sql-server, vb.net, timespan

什么数据类型可以存储大于 24 小时的 VB 时间跨度？以下不会保存为 SQL 时间跨度值。

```
Dim span As TimeSpan = New TimeSpan(1, 2, 0, 30, 0) 
```

输出

1.02:00:30

我希望以后能够对此进行计算。

SqlDbType.Time 溢出。值“1.02:00:30”超出范围。必须介于 00:00:00.0000000 和 23:59:59.9999999 之间。

这个 Fiddler 示例显示了我所追求的结果，我想将结果存储在 SQL 数据库中。
[http://sqlfiddle.com/#!3/c7b0d/53](http://sqlfiddle.com/#!3/c7b0d/53)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-27T02:15:12.090

我最初建议使用 SQL Server 2008“datetimeoffset”数据类型，但这是错误的。

正如之前的评论正确指出的那样，SQL Server 中目前没有自然存储和处理时间跨度值的数据类型。

最简单的替代方法是将偏移存储为浮点值，整数部分表示天，小数部分表示天的部分。这将允许进行简单的计算。数学可以如下进行：

```
select 
    getdate(),                                          -- Current datetime
    CONVERT(date, getdate()),                           -- Current date
    CONVERT(datetime, CONVERT(date, getdate())) +1,     -- Add one day
    CONVERT(datetime, CONVERT(date, getdate())) +1.75   -- Add a day + 3/4 or 18 hours
    getdate() + .75,                                    -- Current Time + 18 hours.
    getdate() + (3/4)                                   -- Current Time + 18 hours. 
```

注意：您只能使用 [datetime] 数据类型进行这种日期时间数学。因此需要将 [date] 数据类型转换回 [datetime]。

# apache - RewriteRule 在 htacces 中不起作用，我收到 404 错误

> ID：15253100
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:42:36.880
> 
> 标签：apache, .htaccess, url-rewriting, rewrite

这是我的 .htaccess

```
RewriteEngine On

RewriteBase /

### PRODUCCION
RewriteRule ^index.html$ index.php [L]
RewriteRule ^contacto.html$ contacto.php [L]
RewriteRule ^mapa-de-sitio.html$ mapa-de-sitio.php [L]
RewriteRule ^delivery/(.+).html$ avisos.php?rubro=$1&delivery=1 [R]
RewriteRule ^delivery.html$ delivery.php [L]
RewriteRule ^planos.html$ planos.php [L]
RewriteRule ^publicar-aviso.html$ publicar_aviso.php [L]
RewriteRule ^avisos.html$ avisos.php [L]

######   Rubros por letras
RewriteRule ^profesionales/([a-z]{1}).html$ rubros.php?seccion=2&letra=$1 [L,NC]
RewriteRule ^comercios/([a-z]{1}).html$ rubros.php?seccion=1&letra=$1 [L,NC]
RewriteRule ^([a-z]{1}).html$ rubros.php?letra=$1 [L,NC]

######   Rubros secciones generales
RewriteRule ^profesionales.html$ rubros.php?seccion=2 [L,NC]
RewriteRule ^comercios.html$ rubros.php?seccion=1 [L,NC]

######   Avisos
RewriteRule ^comercios/(.+).html$ avisos.php?seccion=1&rubro=$1 
RewriteRule ^profesionales/(.+).html$ avisos.php?seccion=2&rubro=$1

######   Centros comerciales
RewriteRule ^centros-comerciales/(.+).html$ centros_comerciales.php?centro_comercial=$1

######   Instituciones
RewriteRule ^instituciones/(.+).html instituciones.php?grupo=$1 
```

当我访问[http://www.test.com/delivery/books.html](http://www.test.com/delivery/books.html)时，浏览器显示 404 错误页面，问题可能出在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:22:47.417

经多方咨询，似乎与传递的保留字有冲突，`options -multiviews`在文件开头添加，修复问题。

# php - OpenCart：如何制作一个全局变量？

> ID：15253101
> 
> 赞同：2
> 
> 时间：2013-03-06T16:42:46.540
> 
> 标签：php, variables, opencart

我正在尝试在 OpenCart 中创建两个全局变量。我基本上希望能够在我的任何`.tpl`文件中声明它们

```
<?php echo $global1; ?> 
```

我尝试过编辑，`library/system.php`也尝试过在我的文件中`config.php`添加。`$global1="test"`但是在文件中调用它`.tpl`不起作用？

例如，看看下面的文件，我希望能够随时调用这些变量.. 我必须编辑 config.php 还是什么？该示例显示了`$header`在每个 .tpl 文件上使用的调用。

**not_found.tpl**

```
<?=$header?>
<div class="breadcrumb">
<? foreach ($breadcrumbs as $breadcrumb) { ?>
    <? $breadcrumb['separator']; ?><a href="<?=$breadcrumb['href']?>"><?=$breadcrumb['text']?></a>
<? } ?>
</div>
<div id="content">
    <?=$global1?>
    <img src="/catalog/view/theme/default/image/error.png"/>
</div>
<?=$footer?> 
```

# 更新

**/catalog/controller/common/header.php**

```
<?php   
class ControllerCommonHeader extends Controller {

    protected function index() {

        // NEW GLOBAL VARS
        $cdnDefault="//www.gorgeouscouturedev.com/catalog/view/theme/";
        $currentUseLang = $this->language->get('code'); 
```

现在在**/catalog/view/theme/default/template/common/home.tpl**

```
<?=$header?>
<?=$column_left?>
<?=$column_right?>
<div id="content">

<? echo $cdnDefault ?>
<? echo $currentUseLang ?>

    <?=$content_top?>
        <div class="flexslider">
            <ul class="slides">
                <li><img src="catalog/view/theme/default/image/desktop.png"/></li>
                <li><img src="catalog/view/theme/default/image/blogger.png"/></li>
            </ul>
        </div>
    <?=$content_bottom?>
</div>
<?=$footer?> 
```

和错误：

```
 Notice: Undefined variable: cdnDefault in /catalog/view/theme/default/template/common/home.tpl on line 6
 Notice: Undefined variable: currentUseLang in /catalog/view/theme/default/template/common/home.tpl on line 7 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:17:34.813

如果您只想使用静态值，则可以使用常量。只需在您的 config.php 文件中创建一个，例如

```
define('CDN_URL', 'http://cdn.someurl.com/'); 
```

然后你可以使用

```
<?php echo CDN_URL; ?> 
```

应用程序中的任何位置。如果您想像在编辑过的问题中那样对其进行编码，那么您的代码的根本缺陷是您使用`$cdnDefault`而不是`$this->data['cdnDefault']`在您的控制器文件中，这会导致未定义的问题。但是请注意，这个变量根本不是全局变量，它只是按应有的方式编码

在我看来，正确的方法是创建一个新的设置值供您`SYSTEM > SETTINGS`在管理区域中编辑，然后使用`$this->config->get('config_value_here')`而不是采用被认为更多的快速破解方法来调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:18:20.097

你可以使用`$GLOBALS`超级全局数组

例如首先声明它`controller/common/header.php`

```
$GLOBALS["1"] = "test"; 
```

然后在任何 tpl 文件中使用它

```
<?php echo $GLOBALS["1"]; ?> 
```

关于那个`header`东西，`header`实际上`five other files`是在每个控制器文件（对应于每个 tpl 文件）中声明的，就像这样

```
$this->children = array(
            'common/column_left',
            'common/column_right',
            'common/content_top',
            'common/content_bottom',
            'common/footer',
            'common/header'     
        ); 
```

**回答更新的问题**

**/catalog/controller/common/header.php**

```
<?php   
class ControllerCommonHeader extends Controller {

    protected function index() {

        // NEW GLOBAL VARS
     $GLOBALS["cdnDefault"]="//www.gorgeouscouturedev.com/catalog/view/theme/";
     $GLOBALS["currentUseLang"] = $this->language->get('code'); 
```

现在在**/catalog/view/theme/default/template/common/home.tpl**

```
<?=$header?>
<?=$column_left?>
<?=$column_right?>
<div id="content">

<? echo $GLOBALS["cdnDefault"]; ?>
<? echo $GLOBALS["currentUseLang"]; ?>

    <?=$content_top?>
        <div class="flexslider">
            <ul class="slides">
                <li><img src="catalog/view/theme/default/image/desktop.png"/></li>
                <li><img src="catalog/view/theme/default/image/blogger.png"/></li>
            </ul>
        </div>
    <?=$content_bottom?>
</div>
<?=$footer?> 
```

# c# - 跨流文档中的列跨越文本

> ID：15253103
> 
> 赞同：4
> 
> 时间：2013-03-06T16:42:55.333
> 
> 标签：c#, wpf, xaml

我正在重新设计我的即时通讯应用程序聊天界面，使其成为一个流文档。这是我试图复制的设计。

[http://imgur.com/5LAz1Tv](http://imgur.com/5LAz1Tv)

到目前为止，这是我使用 XamlPad 尝试过的。我的主要问题是对齐和/或列跨越。编辑：顶部的最新尝试

```
<TabControl Width="500">

    <TabItem Header="Julien Rosen">

        <FlowDocument>

            <Table>

                <Table.Columns>

                    <TableColumn Width="60" />
                    <TableColumn />
                    <TableColumn Width="100" />

                </Table.Columns>

                <TableRowGroup>

                    <TableRow>

                        <TableCell RowSpan="2">
                            <Paragraph>
                                <Image Source="c:\logo.png" Height="35" />
                                <LineBreak />
                                <Image Margin="0,5,5,0" Source="c:\file.png" Height="10" />
                                <Image Source="c:\flag-green.png" Height="10" />
                            </Paragraph>
                        </TableCell>

                    </TableRow>

                    <TableRow>

                        <TableCell>

                            <Paragraph FontStyle="Italic" FontSize="12">
                                <TextBox BorderThickness="0" IsReadOnly="False" Background="Transparent" IsEnabled="False">
                                    Julien Rosen:
                                </TextBox>
                                <TextBox BorderThickness="0" IsReadOnly="False" Background="Transparent" IsEnabled="False">
                                    03/01/2013 14:17
                                </TextBox>      
                            </Paragraph>

                            <Paragraph Margin="0,10,0,0" FontSize="12">
                                This is a new attempt using rows differently
                            </Paragraph>

                        </TableCell>

                    </TableRow>

                </TableRowGroup>

            </Table>

            <Table>

                <Table.Columns>

                    <TableColumn Width="60" />
                    <TableColumn />
                    <TableColumn Width="100" />

                </Table.Columns>

                <TableRowGroup>

                    <TableRow>
                        <TableCell>
                            <Paragraph>
                                <Image Source="c:\logo.png" Height="35" />
                                <LineBreak />
                                <Image Margin="0,5,5,0" Source="c:\file.png" Height="10" />
                                <Image Source="c:\flag-green.png" Height="10" />
                            </Paragraph>
                        </TableCell>

                        <TableCell>

                            <Paragraph FontStyle="Italic" FontSize="12">
                                <TextBox BorderThickness="0" IsReadOnly="False" Background="Transparent" IsEnabled="False">
                                    Julien Rosen:
                                </TextBox>
                            </Paragraph>

                            <Paragraph Margin="0,10,0,0" FontSize="12">
                                Long messages end at the end at the cell wall instead of continuing underneath the date, regardless of ColumnSpan being set on the TableCell
                            </Paragraph>

                        </TableCell>

                        <TableCell>
                            <Paragraph FontStyle="Italic" FontSize="12">
                                <TextBox BorderThickness="0" IsReadOnly="False" Background="Transparent" IsEnabled="False">
                                    03/01/2013 14:17
                                </TextBox>                                      
                            </Paragraph>
                        </TableCell>

                    </TableRow>

                </TableRowGroup>

            </Table>

            <Table>

                <Table.Columns>

                    <TableColumn Width="60" />
                    <TableColumn />

                </Table.Columns>

                <TableRowGroup>

                    <TableRow>
                        <TableCell>
                            <Paragraph>
                                <Image Source="c:\logo.png" Height="35" />
                                <LineBreak />
                                <Image Margin="0,5,5,0" Source="c:\file.png" Height="10" />
                                <Image Source="c:\flag-green.png" Height="10" />
                            </Paragraph>
                        </TableCell>

                        <TableCell>

                            <Paragraph>
                                <Figure HorizontalAnchor="PageLeft">

                                    <Paragraph FontStyle="Italic" FontSize="12">
                                        <TextBox BorderThickness="0" IsReadOnly="False" Background="Transparent" IsEnabled="False">
                                            Julien Rosen:
                                        </TextBox>
                                    </Paragraph>

                                </Figure>

                                <Figure HorizontalAnchor="PageRight">

                                    <Paragraph FontStyle="Italic" FontSize="12">
                                        <TextBox BorderThickness="0" IsReadOnly="False" Background="Transparent" IsEnabled="False">
                                            03/01/2013 14:17
                                        </TextBox>                                      
                                    </Paragraph>

                            </Figure>
                            </Paragraph>

                            <Paragraph Margin="0,10,0,0" FontSize="12">
                                This style tries to use figures, which messes up the alignment and does crazy stuff with the text, but at least the text continues under the date
                            </Paragraph>

                        </TableCell>

                    </TableRow>

                </TableRowGroup>

            </Table>

        </FlowDocument>

    </TabItem>

</TabControl> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T17:16:42.577

我试图提出一个可以扩展的示例。我使用阴影让您了解哪个单元格/行在表格中执行的操作。

```
<Window x:Class="JulienSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="500" Width="525">
    <Window.Resources>
        <BitmapImage x:Key="AvatarImage" UriSource="https://shop.blindferret.com/uploads/products/339af7124f5be1c660107332475fd6038742e1e0.jpg" DecodePixelHeight="96" DecodePixelWidth="72"/>
        <BitmapImage x:Key="FlagImage" UriSource="flag.png" DecodePixelHeight="18" DecodePixelWidth="18" />
        <BitmapImage x:Key="FileImage" UriSource="file.png" DecodePixelHeight="18" DecodePixelWidth="18" />
    </Window.Resources>
    <TabControl Width="500">
        <TabItem Header="Julien Rosen">
            <FlowDocumentReader ViewingMode="Scroll" IsPageViewEnabled="False" IsPrintEnabled="False" IsTwoPageViewEnabled="False">
                <FlowDocument FontFamily="Segoe UI" >
                    <Table BorderBrush="CadetBlue" BorderThickness="1">
                        <Table.Columns>
                            <TableColumn Width="100"/>
                            <TableColumn Width="100" />
                            <TableColumn />
                            <TableColumn Width="100" />
                        </Table.Columns>
                        <TableRowGroup>
                            <TableRow Background="AntiqueWhite">
                                <TableCell RowSpan="2">
                                    <BlockUIContainer>
                                        <Image Source="{StaticResource AvatarImage}" Width="72" Height="96"/>
                                    </BlockUIContainer>
                                </TableCell>

                                <TableCell>
                                    <Paragraph>Julien Rosen</Paragraph>
                                </TableCell>

                                <TableCell Background="Chartreuse"></TableCell>

                                <TableCell>
                                    <Paragraph>07/03/2013</Paragraph>
                                </TableCell>
                            </TableRow>

                            <TableRow Background="Aquamarine">
                                <TableCell ColumnSpan="3" RowSpan="3">
                                    <Paragraph>
                                        Long messages end at the end at the cell wall instead of continuing underneath the date, regardless of ColumnSpan being set on the TableCell
                                    Long messages end at the end at the cell wall instead of continuing underneath the date, regardless of ColumnSpan being set on the TableCell
                                    </Paragraph>
                                </TableCell>
                            </TableRow>
                            <TableRow Background="BurlyWood">
                                <TableCell Background="DarkGreen">
                                    <BlockUIContainer>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Image Source="{StaticResource FlagImage}" Height="18" Width="18"/>
                                            <Image Source="{StaticResource FileImage}" Height="18" Width="18"/>
                                        </StackPanel>
                                    </BlockUIContainer>
                                </TableCell>
                            </TableRow>
                            <TableRow>
                                <TableCell />
                            </TableRow>
                        </TableRowGroup>
                    </Table>
                    <Table BorderBrush="CadetBlue" BorderThickness="1">
                        <Table.Columns>
                            <TableColumn Width="100"/>
                            <TableColumn Width="100" />
                            <TableColumn />
                            <TableColumn Width="100" />
                        </Table.Columns>
                        <TableRowGroup>
                            <TableRow Background="AntiqueWhite">
                                <TableCell RowSpan="2">
                                    <BlockUIContainer>
                                        <Image Source="{StaticResource AvatarImage}" Width="72" Height="96"/>
                                    </BlockUIContainer>
                                </TableCell>

                                <TableCell>
                                    <Paragraph>Julien Rosen</Paragraph>
                                </TableCell>

                                <TableCell Background="Chartreuse"></TableCell>

                                <TableCell>
                                    <Paragraph>07/03/2013</Paragraph>
                                </TableCell>
                            </TableRow>

                            <TableRow Background="Aquamarine">
                                <TableCell ColumnSpan="3" RowSpan="3">
                                    <Paragraph>
                                        Long messages end at the end at the cell wall instead of continuing underneath the date, regardless of ColumnSpan being set on the TableCell
                                    Long messages end at the end at the cell wall instead of continuing underneath the date, regardless of ColumnSpan being set on the TableCell
                                    </Paragraph>
                                </TableCell>
                            </TableRow>
                            <TableRow Background="BurlyWood">
                                <TableCell Background="DarkGreen">
                                    <BlockUIContainer>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Image Source="{StaticResource FlagImage}" Height="18" Width="18"/>
                                            <Image Source="{StaticResource FileImage}" Height="18" Width="18"/>
                                        </StackPanel>
                                    </BlockUIContainer>
                                </TableCell>
                            </TableRow>
                            <TableRow>
                                <TableCell />
                            </TableRow>
                        </TableRowGroup>
                    </Table>                </FlowDocument>
            </FlowDocumentReader>
        </TabItem>

    </TabControl>
</Window> 
```

这将导致：

![截屏](../Images/6fd6768dc9fe71bfea9440fa3ce4cc1d.png)

# c# - C# WinForms ShowDialog() 调用任意方法

> ID：15253104
> 
> 赞同：4
> 
> 时间：2013-03-06T16:42:56.900
> 
> 标签：c#, .net, winforms

我正在开发一个控制台应用程序，该应用程序创建一个表单来提醒用户某些给定状态 - 在稍后阶段，代码库将成为一个类库。

但是，现在，我需要显示表单（我猜 ShowDialog 将是这里最好的方法）然后在表单关闭之前调用任意方法。

例如，我需要显示表单，设置一个标签控件的文本值，等待 n 秒，然后更改标签的值，然后关闭表单。我知道这听起来有点微不足道，但我正在尝试对设计进行概念验证。

我环顾四周，看起来这不可能，因为 ShowDialog() 要求我关闭表单，然后才能继续通过调用方法/类中的代码列表。

这是我到目前为止所拥有的：

```
PopUpForm myForm = new PopUpForm(string messageToDisplay);
myForm.ShowDialog();
//call myForm.someMethod() here, before the form closes
//dispose of the form, now that we've no use for it
myform.Dispose();

//target method in PopUpform class
public void someMethod()
{
  lblText.Text = "Waiting for some reason";
  //wait n number of seconds
  lblText.Text = "Finished waiting. Form will now close";
  //it doesn't matter if the form closes before the user can see this.
} 
```

看起来 ShowDialog() 不支持这种行为。我正在研究 BackgroundWorker 线程，但想知道是否有人对此有任何建议，或者以前遇到过这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:48:24.640

如果您想显示表单，然后继续工作，然后关闭它 - 您可以通过以下方式执行此`Form.Show()`操作`Form.ShowDialog()`：

```
using (var myForm = new PopUpForm(messageToDisplay))
{
    myForm.Show(); // Show the form

    DoWork(); // Do your work...

    myForm.Close(); // Close it when you're done...
} 
```

但是，如果这纯粹是一个控制台应用程序（并且没有消息泵），那么这可能无法正常工作。

其他选项是在您的内部提供一个计时器`Form`以使其关闭，或者将委托传递给表单以在 Show 上运行您的方法，之后它可以自行关闭。

> 在稍后阶段，代码库将成为一个类库。

执行此操作时，您可能希望提出一种不同的机制来提供通知。将您的库与特定的 UI 技术耦合是一个坏主意。最好让您的库只提供事件或其他通知，并允许用户向用户提供 UI/通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:48:18.530

如果这个代码最终会出现在代码库中，我建议不要让它显示任何形式，永远，它自己的意志。库应该生成事件，或者在某些情况下是异常，调用应用程序可以捕获这些事件以允许它显示表单。如果需要向用户展示的某些细节在库内部，请从库中公开 DisplayEventData() 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T16:48:56.570

-`ShowDialog`方法创建一个“模态”窗口，通常会阻止 UI，直到您关闭它（通过单击确定或取消）。您需要自己创建一个 WinForm，但可以是一个简单的并为它创建一个消息泵。您可以通过调用运行自己的表单

`Application.Run(YourForm);`

例如，您需要使用互斥锁来保持控制台线程，以防止它在表单打开时继续运行。该表单提供了您从 WinForms 中知道的所有方法，例如`Close`，您可以在其中告诉您的控制台线程继续。

在 MSDN 上看到[这个。](http://msdn.microsoft.com/en-us/library/ms157902%28v=vs.90%29.aspx)

# c# - 如何在列表框中添加组合框和其他项目？

> ID：15253106
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:42:58.433
> 
> 标签：c#, winforms

我需要创建一个 UI，它允许我从一个列表框中选择条目并在运行时将其添加到另一个列表框中。现在，listbox1 可能包含组合框和复选框作为项目。例如，如果我在 listbox1 中添加一个名为 Quarter 的组合框，其值为“Q1、Q2、Q3、Q4”作为项目，并在其中选择条目 Q1，然后单击“添加”按钮，它应该被添加到 listbox2 . 反之亦然。这在运行时应该是可能的。如何将组合框和复选框作为项目添加到列表框中？另外，请建议对于添加-删除按钮，我的代码是否正确。

```
private void MoveListBoxItems(ListBox source, ListBox destination)
    {
        ListBox.SelectedObjectCollection sourceItems = source.SelectedItems;
        foreach (var item in sourceItems)
        {
            destination.Items.Add(item);
        }
        while (source.SelectedItems.Count > 0)
        {
            source.Items.Remove(source.SelectedItems[0]);
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MoveListBoxItems(listBox1, listBox2);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        MoveListBoxItems(listBox2, listBox1);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:21:10.647

这是满足您需求的 WPF 解决方案。我发布它是因为您告诉我它可能对您有用。它在很大程度上超越了您希望在 winforms 中实现的任何东西，这是一种非常有限且过时的技术。

这是它在我的屏幕上的样子：

![在此处输入图像描述](../Images/a858cebaf6a18957f90c9dcdb515c1cd.png)

我正在使用一些简单的 ViewModel 来表示数据：

ListItemViewModel（“基础”之一）：

```
 public class ListItemViewModel: ViewModelBase
    {
        private string _displayName;
        public string DisplayName
        {
            get { return _displayName; }
            set
            {
                _displayName = value;
                NotifyPropertyChange(() => DisplayName);
            }
        }
    } 
```

BoolListItemViewModel（用于复选框）：

```
public class BoolListItemViewModel: ListItemViewModel
{
    private bool _value;
    public bool Value
    {
        get { return _value; }
        set
        {
            _value = value;
            NotifyPropertyChanged(() => Value);
        }
    }
} 
```

SelectableListItemViewModel（用于组合框）：

```
public class SelectableListItemViewModel: ListItemViewModel
{
    private ObservableCollection<ListItemViewModel> _itemsSource;
    public ObservableCollection<ListItemViewModel> ItemsSource
    {
        get { return _itemsSource ?? (_itemsSource = new ObservableCollection<ListItemViewModel>()); }
    }

    private ListItemViewModel _selectedItem;
    public ListItemViewModel SelectedItem
    {
        get { return _selectedItem; }
        set
        {
            _selectedItem = value;
            NotifyPropertyChange(() => SelectedItem);
        }
    }
} 
```

这是“主”视图模型，它包含 2 个列表和`Commands`（按钮操作）

```
 public class ListBoxSampleViewModel: ViewModelBase
    {
        private ObservableCollection<ListItemViewModel> _leftItems;
        public ObservableCollection<ListItemViewModel> LeftItems
        {
            get { return _leftItems ?? (_leftItems = new ObservableCollection<ListItemViewModel>()); }
        }

        private ObservableCollection<ListItemViewModel> _rightItems;
        public ObservableCollection<ListItemViewModel> RightItems
        {
            get { return _rightItems ?? (_rightItems = new ObservableCollection<ListItemViewModel>()); }
        }

        private DelegateCommand<ListItemViewModel> _moveToRightCommand;
        public DelegateCommand<ListItemViewModel> MoveToRightCommand
        {
            get { return _moveToRightCommand ?? (_moveToRightCommand = new DelegateCommand<ListItemViewModel>(MoveToRight)); }
        }

        private void MoveToRight(ListItemViewModel item)
        {
            if (item != null)
            {
                LeftItems.Remove(item);
                RightItems.Add(item);    
            }
        }

        private DelegateCommand<ListItemViewModel> _moveToLeftCommand;
        public DelegateCommand<ListItemViewModel> MoveToLeftCommand
        {
            get { return _moveToLeftCommand ?? (_moveToLeftCommand = new DelegateCommand<ListItemViewModel>(MoveToLeft)); }
        }

        private void MoveToLeft(ListItemViewModel item)
        {
            if (item != null)
            {
                RightItems.Remove(item);
                LeftItems.Add(item);    
            }
        }
    } 
```

这是 Window 的整个 XAML：

```
<Window x:Class="WpfApplication4.Window14"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication4"
        Title="Window14" Height="300" Width="300">
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:ListItemViewModel}">
            <TextBlock Text="{Binding DisplayName}"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:BoolListItemViewModel}">
            <CheckBox Content="{Binding DisplayName}" IsChecked="{Binding Value}" HorizontalAlignment="Left"/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:SelectableListItemViewModel}">
            <ComboBox ItemsSource="{Binding ItemsSource}" SelectedItem="{Binding SelectedItem}"
                      HorizontalAlignment="Stretch" MinWidth="100"/>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <ListBox ItemsSource="{Binding LeftItems}"
                 x:Name="LeftList"/>

        <StackPanel Grid.Column="1" VerticalAlignment="Center">
            <Button Content="Move to Right" 
                    Command="{Binding MoveToRightCommand}"
                    CommandParameter="{Binding SelectedItem,ElementName=LeftList}"/>
            <Button Content="Move to Left" 
                    Command="{Binding MoveToLeftCommand}"
                    CommandParameter="{Binding SelectedItem,ElementName=RightList}"/>
        </StackPanel>

        <ListBox ItemsSource="{Binding RightItems}"
                 Grid.Column="2" x:Name="RightList"/>
    </Grid>
</Window> 
```

最后，这是 Window Code-behind，它只用一些项目初始化 ViewModel：

```
 public partial class Window14 : Window
    {
        public Window14()
        {
            InitializeComponent();

            DataContext = new ListBoxSampleViewModel()
                              {
                                  LeftItems =
                                      {
                                          new ListItemViewModel(){DisplayName = "Item1"},
                                          new BoolListItemViewModel() {DisplayName = "Check Item 2", Value = true},
                                          new SelectableListItemViewModel()
                                              {
                                                  ItemsSource =
                                                      {
                                                          new ListItemViewModel() {DisplayName = "Combo Item 1"},
                                                          new BoolListItemViewModel() {DisplayName = "Check inside Combo"},
                                                          new SelectableListItemViewModel()
                                                              {
                                                                  ItemsSource =
                                                                      {
                                                                          new ListItemViewModel() {DisplayName = "Wow, this is awesome"},
                                                                          new BoolListItemViewModel() {DisplayName = "Another CheckBox"}
                                                                      }
                                                              }
                                                      }
                                              }
                                      }
                              };
        }
    } 
```

乍一看，这可能看起来像很多代码......但如果你花 2 秒钟来分析它......它只是“简单、简单的属性和`INotifyPropertyChanged`. 这就是你在 WPF 中编程的方式。

我说的范式与你在 winforms 中可能习惯的范式完全不同，但学习它真的很值得。请注意，在我的代码中，我没有与 UI 元素进行交互。我只是创建了`ViewModel`结构，然后`WPF Binding System`使用提供的`DataTemplates`.

我正在使用`ViewModelBase`来自[MVVM Light](http://www.galasoft.ch/mvvm/)和`DelegateCommand`来自[WPFTutorial.net](http://wpftutorial.net/DelegateCommand.html)的。您可以将我的代码复制并粘贴到 a 中`File -> New Project -> WPF Application`并自己查看结果（您还需要上面链接中的这两个类）

如果您需要将其集成到现有的 winforms 应用程序中，您将需要[`ElementHost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost%28v=vs.100%29.aspx)

# c# - 带有Windows用户名和密码的连接字符串，可以吗？

> ID：15253110
> 
> 赞同：0
> 
> 时间：2013-03-06T16:43:03.107
> 
> 标签：c#, asp.net, sql-server

我们可以在连接字符串中使用 Windows AD 用户名和密码吗？它会起作用吗？用户希望使用他们的 AD 帐户从 sql server 获取数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:46:11.920

您不需要这样做，您可以使用模拟连接到使用客户端登录的用户的 SQL 服务器。

如果您在 IIS 中将应用程序配置为需要 Windows 身份验证，然后在您的连接字符串中使用`Integrated Security=true;`- 那么当您从 ASP.Net 应用程序访问数据库时，您将获得登录用户的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:48:09.533

不可以。您不能在 SQL 连接字符串中指定 Windows 帐户凭据。您只能指定 SQL 连接将使用集成安全性，并且将是执行代码的任何人（应用程序池标识）。

另一种方法是使用模拟。根据您的应用程序，您可以在 IIS 中进行设置（导致所有代码在经过身份验证的用户的权限下执行）或使用用户名和密码在代码中手动模拟用户，如[`WindowsIdentity.Impersonate`](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)MSDN 页面所示。

# ios - iOS 'dateFromString' 返回一年

> ID：15253111
> 
> 赞同：2
> 
> 时间：2013-03-06T16:43:03.990
> 
> 标签：ios, objective-c, nsdateformatter

我正在使用 NSDateFormatter 的 dateFromString，但是当它被赋予字符串“2013-03-06”时，它会吐出一个“2012-03-06 00:00:00 CST”的 NSDate。时间并不重要。我将输入和输出之间的日期格式设置为完全相同。

我有一个使用代码设置日期的对象：

```
NSDateFormatter* dateFormat = [[NSDateFormatter alloc] init];
NSDate* currentDate = [[NSDate alloc] init];

[dateFormat setDateFormat:@"YYYY-MM-dd"];
[self setMyValue:[dateFormat stringFromDate:currentDate]]; 
```

然后这个值稍后用于在 UIDatePicker 上设置日期：

```
NSDate *date = [[[NSDate alloc] init] autorelease];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

[dateFormat setDateFormat:@"YYYY-MM-dd"];

date = [dateFormat dateFromString:myFilter.myValue];

[datePicker setDate:date animated:YES]; 
```

任何关于我犯错的地方都将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T16:46:19.043

你应该使用`yyyy`而不是`YYYY`.

来自[数据格式化指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)：

> 一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:50:00.437

将格式中的 YYYY 更改为 yyyy。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-08T10:15:44.717

在更改“年份”时使用`yyyy`代替`YYYY`, 来获得零错误。

# php - PHP图像重命名两位数

> ID：15253113
> 
> 赞同：0
> 
> 时间：2013-03-06T16:43:05.463
> 
> 标签：php

我的文件夹中有图片，我想将它们按顺序重命名为两位数。我浏览并尝试了很多解决方案，但我没有找到我想要的东西。我现在变得绝望了。我设法找到了这个代码，但它将一位数字从 1 重命名为 9，从 10 开始重命名两位数字。我希望它从 01.jpg、02.jpg、03.jpg 等开始计算...

```
<?php

$files = glob('../thumbs/*');

foreach($files as $i => $name) {
    $newname = sprintf('../thumbs/%d.jpg', $i+2);
    if ($newname != $name) {
        rename($name, $newname);
    }
}

?> 
```

如何修改上述代码以使其成为两位数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:45:08.643

更改`sprintf('../thumbs/%d.jpg', $i+2);`为`sprintf('../thumbs/%02d.jpg', $i+2);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:47:13.170

`d`您可以使用in前面的数字指定整数的宽度`%d`。

而不是`sprintf('../thumbs/%d.jpg', $i+2);`使用`sprintf('../thumbs/%02d.jpg', $i+2);`

[另见 sprintf 文档](http://php.net/sprintf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:48:59.423

我建议 str_pad [http://www.php.net/str_pad](http://www.php.net/str_pad)采用更灵活的方法：

```
 $files = glob('../thumbs/*');

    foreach($files as $i => $name) {
  {
         $index = str_pad($i, 2, "0", STR_PAD_LEFT);

        $newname = sprintf('../thumbs/%d.jpg', $index);
        if ($newname != $name) {
            rename($name, $newname);
        }
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T16:45:23.513

```
<?php

$files = glob('../thumbs/*');

foreach($files as $i => $name) {
    if ($i < 10) {
        $index = "0".$i;
    }
    else {
        $index = $i;
    }
    $newname = sprintf('../thumbs/%d.jpg', $index);
    if ($newname != $name) {
        rename($name, $newname);
    }
} 
```

?>

# android - 获取资源编号 0x0000000a 的值时没有包标识符？安卓清单？

> ID：15253115
> 
> 赞同：1
> 
> 时间：2013-03-06T16:43:14.403
> 
> 标签：android, android-manifest, android-resources

我一直在搜索堆栈，但没有找到有关此主题的帮助

```
03-06 11:37:02.448: W/ResourceType(14147): No package identifier when getting value for    resource number 0x0000000a
03-06 11:37:02.448: D/AndroidRuntime(14147): Shutting down VM
03-06 11:37:02.448: W/dalvikvm(14147): threadid=1: thread exiting with uncaught exception    (group=0x41d1b438)
03-06 11:37:02.448: I/Process(14147): Sending signal. PID: 14147 SIG: 9
03-06 11:37:02.448: E/AndroidRuntime(14147): FATAL EXCEPTION: main
03-06 11:37:02.448: E/AndroidRuntime(14147): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sliderexample/com.example.sliderexample.FragmentControllers.LeftRightSliderFragmentController}: android.content.res.Resources$NotFoundException: Resource ID #0xa 
```

我包括一个库，LeftRightSliderFragment 类有一个基类，它是该项目库的一部分。我是否需要一些如何将项目库包含在主项目 android 清单中？

如果是这样，我该怎么做，我似乎在谷歌上找不到这个。

# extjs - extjs解析模板中的嵌套json

> ID：15253118
> 
> 赞同：5
> 
> 时间：2013-03-06T16:43:20.760
> 
> 标签：extjs, extjs4.1

尝试（不成功）显示来自嵌套 json 的数据。

JSON 可能类似于：

```
{
    "contacts": [
        {
            "id": "1",
            "client_id": "135468714603",
            "addresses": [
                {
                    "id": "1",
                    "contact_id": "1",
                    "address_id": "16",
                    "address": {
                        "0": {
                            "id": "16",
                            "address": "123 Some Rd",
                            "address2": "",
                            "city": "Toen",
                            "state": "VS",
                            "zip_code": "11111",
                            "country": "USA"
                        }
                    }
                },
                {
                    "id": "6",
                    "contact_id": "1",
                    "address_id": "26",
                    "address": {
                        "0": {
                            "id": "26",
                            "address": "1 Other Road",
                            "address2": "",
                            "city": "Twn",
                            "state": "BD",
                            "zip_code": "11112",
                            "country": "USA"
                        }
                    }
                }
            ]
        },
        {
            "id": "10",
            "client_id": null,
            "addresses": [
                {
                    "id": "8",
                    "contact_id": "10",
                    "address_id": "28",
                    "address": {
                        "0": {
                            "id": "28",
                            "address": "54 Road",
                            "address2": "",
                            "city": "TWND",
                            "state": "TT",
                            "zip_code": "11113",
                            "country": "USA"
                        }
                    }
                },
                {
                    "id": "9",
                    "contact_id": "10",
                    "address_id": "29",
                    "is_mailing_address": "0",
                    "is_primary_address": "0",
                    "display_priority": "0",
                    "address": {
                        "0": {
                            "id": "29",
                            "address": "6 Road",
                            "address2": "",
                            "city": "TOEOEOWN",
                            "state": "PY",
                            "zip_code": "11116",
                            "country": "USA"
                        }
                    }
                },
                {
                    "id": "10",
                    "contact_id": "10",
                    "address_id": "30",
                    "address": {
                        "0": {
                            "id": "30",
                            "address": "PO Box 9",
                            "address2": "",
                            "city": "TOYN",
                            "state": "GF",
                            "zip_code": "11118",
                            "country": "USA"
                        }
                    }
                }
            ]
        },
        {
            "id": "11",
            "client_id": null,
            "contact_id": "11",
            "addresses": [
                {
                    "id": "11",
                    "contact_id": "11",
                    "address_id": "33",
                    "is_mailing_address": "0",
                    "is_primary_address": "0",
                    "display_priority": "0",
                    "address": {
                        "0": {
                            "id": "33",
                            "address": "4 Street",
                            "address2": "",
                            "city": "TEOIN",
                            "state": "TG",
                            "zip_code": "11119",
                            "country": "USA"
                        }
                    }
                }
            ]
        }
    ]
} 
```

我已经尝试将模型字段映射到我需要的内容（例如联系人模型>地址字段>映射：地址），但这不起作用，因为我需要映射到addresses[0].address[0]来获取显然丢弃其他地址的数据。

我也尝试过使用关联，但这似乎是单独的模型和商店。这里的想法是不要单独请求联系人，然后是他们的地址。

我还尝试直接在模板中挖掘 json（这似乎是最直接的方法），例如 {addresses.address.city} 不起作用。

思路很简单：抓取一些 json，并在应用程序的不同部分显示所述 json 的不同部分。

经历是可怕的。

有人可以解释如何映射这些嵌套的 json 项，以便可以从模板访问它们吗？

## 模板：

```
{
    xtype: 'container',
    flex: 1,
    id: 'mainPanel',
    items: [
        {
            xtype: 'dataview',
            hidden: false,
            id: 'clientsContacts',
            minHeight: 200,
            itemSelector: 'div',
            itemTpl: [
                '{id} | {last_name} | {first_name} | {relationship} | {addresses}'
            ],
            store: 'Contacts'
        }
    ]
} 
```

## 店铺：

```
Ext.define('MyApp.store.Contacts', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.Contacts'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: false,
            storeId: 'Contacts',
            model: 'MyApp.model.Contacts',
            proxy: {
                type: 'ajax',
                extraParams: {
                    id: '',
                    format: 'json'
                },
                url: '/api/contacts/', //the json
                reader: {
                    type: 'json',
                    root: 'contacts'
                }
            },
            listeners: {
                load: {
                    //fn: me.onJsonstoreLoad,
                    //scope: me
                }
            }
        }, cfg)]);
    },
}); 
```

## 模型：

Ext.define('MyApp.model.Contacts', { 扩展：'Ext.data.Model',

```
 uses: [
        //'MyApp.model.Client',
        //'MyApp.model.contactAddressModel'
    ],

    fields: [
        {
            name: 'client_id'
        },
        {
            name: 'id'
        },
        {
            name: 'addresses',
            mapping: 'addresses'//doesn't work
            //mapping: 'addresses[0].address[0]' //works, but only for the first address duh
        }
    ],
}); 
```

通过 Sencha Architect 使用 extjs 4.1。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T19:46:18.443

我想我明白了（希望它是正确的）。

因此，为您需要的每个嵌套数据组创建一个字段。所以我有一个联系人模型。在该模型中有以下字段：

```
id
client_id
addresses //mapped to addresses
address //mapped to addresses.address 
```

然后在模板中：

```
<br>
<tpl for="addresses">
    id: {id}<br>
    addy id: {address_id}<br>

    <tpl for="address">
        {city} {state}, {zip}<br>
    </tpl>

</tpl> 
```

* * *

这是整个事情的样子：

## 看法

```
Ext.define('MyApp.view.MyView', {
    extend: 'Ext.view.View',

    height: 250,
    width: 400,
    itemSelector: 'div',
    store: 'MyJsonStore',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            itemTpl: [
                '<br>',
                '<tpl for="addresses">',
                '    id: {id}<br>',
                '    addy id: {address_id}<br>',
                '    <b>',
                '    <tpl for="address">',
                '        {city} {state}, {zip}<br><br>',
                '    </tpl>',
                '    </b>',
                '',
                '</tpl>',
                '',
                '<hr>',
                ''
            ]
        });

        me.callParent(arguments);
    }

}); 
```

## 店铺

```
Ext.define('MyApp.store.MyJsonStore', {
    extend: 'Ext.data.Store',

    requires: [
        'MyApp.model.Contacts'
    ],

    constructor: function(cfg) {
        var me = this;
        cfg = cfg || {};
        me.callParent([Ext.apply({
            storeId: 'MyJsonStore',
            model: 'MyApp.model.Contacts',
            data: {
                contacts: [
                    {
                        id: '1',
                        client_id: '135468714603',
                        addresses: [
                            {
                                id: '1',
                                contact_id: '1',
                                address_id: '16',
                                address: {
                                    '0': {
                                        id: '16',
                                        address: '123 Some Rd',
                                        address2: '',
                                        city: 'Toen',
                                        state: 'VS',
                                        zip_code: '11111',
                                        country: 'USA'
                                    }
                                }
                            },
                            {
                                id: '6',
                                contact_id: '1',
                                address_id: '26',
                                address: {
                                    id: '26',
                                    address: '1 Other Road',
                                    address2: '',
                                    city: 'Twn',
                                    state: 'BD',
                                    zip_code: '11112',
                                    country: 'USA'
                                }
                            }
                        ]
                    },
                    {
                        id: '10',
                        client_id: null,
                        addresses: [
                            {
                                id: '8',
                                contact_id: '10',
                                address_id: '28',
                                address: {
                                    id: '28',
                                    address: '54 Road',
                                    address2: '',
                                    city: 'TWND',
                                    state: 'TT',
                                    zip_code: '11113',
                                    country: 'USA'
                                }
                            },
                            {
                                id: '9',
                                contact_id: '10',
                                address_id: '29',
                                is_mailing_address: '0',
                                is_primary_address: '0',
                                display_priority: '0',
                                address: {
                                    id: '29',
                                    address: '6 Road',
                                    address2: '',
                                    city: 'TOEOEOWN',
                                    state: 'PY',
                                    zip_code: '11116',
                                    country: 'USA'
                                }
                            },
                            {
                                id: '10',
                                contact_id: '10',
                                address_id: '30',
                                address: {
                                    id: '30',
                                    address: 'PO Box 9',
                                    address2: '',
                                    city: 'TOYN',
                                    state: 'GF',
                                    zip_code: '11118',
                                    country: 'USA'
                                }
                            }
                        ]
                    },
                    {
                        id: '11',
                        client_id: null,
                        contact_id: '11',
                        addresses: [
                            {
                                id: '11',
                                contact_id: '11',
                                address_id: '33',
                                is_mailing_address: '0',
                                is_primary_address: '0',
                                display_priority: '0',
                                address: {
                                    id: '33',
                                    address: '4 Street',
                                    address2: '',
                                    city: 'TEOIN',
                                    state: 'TG',
                                    zip_code: '11119',
                                    country: 'USA'
                                }
                            }
                        ]
                    }
                ]
            },
            proxy: {
                type: 'memory',
                reader: {
                    type: 'json',
                    root: 'contacts'
                }
            }
        }, cfg)]);
    }
}); 
```

## 模型

```
Ext.define('MyApp.model.Contacts', {
    extend: 'Ext.data.Model',

    fields: [
        {
            name: 'id'
        },
        {
            name: 'client_id'
        },
        {
            name: 'addresses',
            mapping: 'addresses'
        },
        {
            name: 'address',
            mapping: 'address'
        }
    ]
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T14:11:55.327

我已经验证了上面的答案确实有效，但请注意，如果您不指定子字段的名称，则不需要第二个嵌套模板。你可以用第一个来做。

# gstreamer - GStreamer - 如何组合三个流（两个带音频的视频文件）

> ID：15253120
> 
> 赞同：2
> 
> 时间：2013-03-06T16:43:26.857
> 
> 标签：gstreamer

我有两个 avi 文件（一个只包含视频，第二个文件包含视频和音频流）。我想将两个 avi 文件合成/混合到一个视频文件（并排）并保留音频。

我可以编写视频流（使用 videomixer），但我不知道如何添加音频流：
`gst-launch filesrc location=test01.avi ! decodebin ! videoscale ! ffmpegcolorspace ! video/x-raw-yuv, width=640, height=480 ! videobox border-alpha=0 left=-640 ! videomixer name=mix ! ffmpegcolorspace ! queue ! avimux ! filesink location=videoTestMix666.avi filesrc location=test02.avi ! decodebin ! videoscale ! ffmpegcolorspace ! video/x-raw-yuv, width=640, height=480 ! videobox right=-640 ! mix.`

你能建议我这样做吗 - 如何添加音频？非常感谢

# xquery - 如何防止 xdmp:node-delete() 在我的 xml 文档中添加空格

> ID：15253121
> 
> 赞同：1
> 
> 时间：2013-03-06T16:43:28.850
> 
> 标签：xquery, marklogic

我正在尝试将`MOVE`节点从一个 xml 文档转移到另一个。两个文档都使用相同的命名空间。我试图通过依次对`xdmp:node-insert-child()`第一个文档然后`xdmp:node-delete()`对第二个文档执行此操作来完成此操作。问题是`xdmp:node-delete()`在我的 xml 文档中留下空格并返回。我怎样才能防止这种情况发生？

这是一个代码示例...

```
let $documentId := 12345
let $newStatus := 123
let $processNode := $PROCESS-DOC//pex:process[(@documentId = $documentId)]    
let $newNode :=
       element { QName($TNS, 'process') } {
        attribute status { $newStatus },
        attribute documentId { $processNode/@documentId },
       }  
return
    if ($processNode and $newNode) then
      (xdmp:node-insert-child($PROCESS-COMPLETE-DOC/pex:processes, $newNode),xdmp:node-delete($processNode))
    else () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:24:32.300

听起来空格保存在您要删除的节点两侧的文本节点中。您可以通过检查`xdmp:describe($processNode/preceding-sibling::text())`和来验证这一点`xdmp:describe($processNode/following-sibling::text())`。如果您愿意，您也可以使用`xdmp:node-delete`部分或全部这些文本节点。

# php - 当另一列等于给定值时，SQL 从列中选择值

> ID：15253128
> 
> 赞同：1
> 
> 时间：2013-03-06T16:43:52.467
> 
> 标签：php, sql, sqlite

我有一个名为 的表`payment`，它由列 - `bill ID`, `group ID`, `u1`, `u1paid`, `u2`, `u2paid`, `u3`, `u3paid`, `u4`, `u4paid`, `u5`,组成`u5paid`。**如果我当前设置的 userID 等于存储在我选择的行中的列 u1、u2...等之一中的 ID，**我想要做的是存储付费列之一的值。

例如，如果当前**用户 ID**等于存储在 中的 ID `u3`，我想将 的值存储`u3paid`在 PHP 变量中。实现此目的的 SQL 命令是什么？

尝试解决方案：

```
SELECT u1paid if u1 = SessionID or u2paid if u2 = SessionID or 
u3paid if u3 = SessionID or u4paid if u4 = SessionID or 
u5paid if u5 = SessionID FROM payment WHERE billID = BILLID; 
```

我知道这不是正确的语法，但它是我能得到的最接近类似 SQL 的东西。

第二次编辑（基于twoleggedhorse的回答）：

```
$payment = "SELECT CASE WHEN u1 = '".$_SESSION['ID']."' THEN u1paid WHEN u2 = 
'".$_SESSION['ID']."' THEN u2paid WHEN u3 = '".$_SESSION['ID']."' THEN u3paid 
 WHEN u4 = '".$_SESSION['ID']."' THEN u4paid 
 WHEN u5 = '".$_SESSION['ID']."' THEN u5paid END AS PAID 
 FROM payment WHERE trackbill = '".$row['BID']."';" 
```

之后，我尝试通过 $payment['PAID'] 访问此语句中的值，但它仍然无法正常工作。我还在搞砸这件事吗？

Edit3：上面的命令有效，我只是弄乱了一个变量名：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:01:05.297

尝试这样的事情：

```
SELECT  CASE WHEN u1 = SessionID THEN u1paid 
             WHEN u2 = SessionID THEN u2paid
             WHEN u3 = SessionID THEN u3paid
             WHEN u4 = SessionID THEN u4paid
             WHEN u5 = SessionID THEN u5paid
             ELSE 'No result found'
        END AS Paid
FROM    payment 
WHERE   billID = BILLID; 
```

# windows - Windows 中的命令行终端

> ID：15253130
> 
> 赞同：0
> 
> 时间：2013-03-06T16:43:55.857
> 
> 标签：windows

我刚开始在 Windows 中开发，我不太喜欢使用“cmd”终端。还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:45:36.190

不要使用cmd，使用Powershell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:46:10.737

如果您想要以 Windows 为中心而不是`cmd.exe`. [`PowerShell`](http://en.wikipedia.org/wiki/Windows_PowerShell)如果您正在寻找更“Linuxy”的风格，我更喜欢`Cygwin`，但有[很多替代品](https://stackoverflow.com/questions/10385424/good-alternatives-to-cygwin-cygwin-doesnt-support-natively-support-win32-app)。

# excel - 复制到工作表中的下一个可用行

> ID：15253131
> 
> 赞同：0
> 
> 时间：2013-03-06T16:43:56.690
> 
> 标签：excel, vba

我用客户数据填写了一个名为“信息”的工作表。然后我手动将相同的客户数据复制到另一个工作表“订单”。“订单”包含发票编号和如下结构：

```
 A           D           E               F            H         J
    INVOICE   FIRSTNAME   LASTNAME        DESCRIPTION   POSTCODE   EMAIL
1    1234       Fred       Smith         Red widget      AR225H   fred@smith.com
2    1235       Bill       Jones         Blue widget     EH66VT   bill@jones.com
3    1236
4    1237 
```

我希望创建一个宏来将我的数据从“信息”逐个单元格地复制到“订单”。我可以这样做，但我需要一个条件注释，说明“如果订单列 D 为空白，则选择第 3 行将数据复制到”。如果我没有这个，那么我会覆盖最后一个订单行。

请注意，每次“信息”表上的客户数据都会更改，这就是我手动复制它的原因。

我目前使用这个公式将下一个可用的发票编号拉入我的信息表：

=INDEX(订单！$A:$A,COUNTA(订单！$D:$D)+1)

它允许我在“信息”表上有一个单元格（比如 F3），该单元格已经包含正确的发票编号以分配给当前的客户数据。使用它，我可以将条件重写为“将信息粘贴到 Info!F3 出现在 Orders! 列 A 中的行中”。

如果有帮助，这里是宏：

```
Sub Macro2()
'
' Macro2 Macro
'

'
    Range("B6").Select
    Selection.Copy
    Sheets("Orders").Select
    Range("C735").Select
    ActiveSheet.Paste
    Sheets("Info").Select
    Range("B7").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Orders").Select
    Range("D735").Select
    ActiveSheet.Paste
    Sheets("Info").Select
    Range("B8").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Info").Select
    Range("B11").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Orders").Select
    Range("E735").Select
    ActiveSheet.Paste
    Sheets("Info").Select
    Range("B12").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Orders").Select
    Range("F735").Select
    ActiveSheet.Paste
    Sheets("Info").Select
    Range("B15").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Orders").Select
    Range("G735").Select
    ActiveSheet.Paste
    Sheets("Info").Select
    ActiveWindow.SmallScroll Down:=-6
    Range("B3").Select
    Application.CutCopyMode = False
    Selection.Copy
    Sheets("Orders").Select
    Range("B735").Select
    ActiveSheet.Paste
End Sub 
```

===================

也许这个问题的信息太多了？在最简单的形式中，我只需要根据单元格的内容选择一行，然后通过宏将信息粘贴到该行。

===================

更新 - 这是“信息”表布局，请注意并非所有行都与“订单”表中的列匹配：

```
 A                             B                C

                          Invoice number:        1236

Peter 
Parker
12
Overflow Road
Stacktown
BB338J
0121 345 6789
0777 789 789
peter@spidermail.com

Order description:          Red widget 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:09:49.610

我喜欢虚构的地址！

我测试了这段代码，它可以工作。您可能需要更改单元格引用，尤其是在工作`Info`表中以获取正确的数据。

简而言之，您从工作`Info`表开始，将相关数据保存在变量中，找到发票编号，`Orders`然后粘贴数据。

```
Sub InfoToOrders()
    Dim InvoiceNo As Long, FirstName As String, LastName As String, Description As String, Postcode As String, Email As String

    With Worksheets("Info")
        InvoiceNo = .Range("D1")
        FirstName = .Range("A3")
        LastName = .Range("A4")
        Description = .Range("B13")
        Postcode = .Range("A8")
        Email = .Range("A11")
    End With

    Dim InvoiceNumbers As Range, invoice As Range

    With Worksheets("Orders")

        Set InvoiceNumbers = .Range("A1:A" & .Range("A1").End(xlDown).Row)

        For Each invoice In InvoiceNumbers
            If invoice = InvoiceNo Then
                invoice.Offset(0, 1) = FirstName
                invoice.Offset(0, 2) = LastName
                invoice.Offset(0, 3) = Description
                invoice.Offset(0, 4) = Postcode
                invoice.Offset(0, 5) = Email
            End If
        Next invoice

    End With
End Sub 
```

# entity-framework - 基于 EntityFramework 代码的迁移，如何确定顺序？

> ID：15253139
> 
> 赞同：16
> 
> 时间：2013-03-06T16:44:27.130
> 
> 标签：entity-framework, entity-framework-migrations, fluent-migrator

我正在使用 EF 5.0，我想开始使用[基于代码的迁移](http://msdn.microsoft.com/en-us/data/jj591621)

我使用了[流利的迁移](https://github.com/schambers/fluentmigrator)器，并且有一个迁移顺序的概念。无论数据库的迁移版本如何，都可以迁移/回滚迁移。

Entity Framework 是否有类似的功能？

我计划为每个数据库版本保留多个迁移实现（最初可能与 sprint 编号相关）。

我为什么要这个？

我们的持续集成将为每个环境迁移数据库。很可能我们的 Dev 构建将只有一个“落后”版本，但是当我们进入 QA 或 PROD 环境时，数据库将被多次迁移落后。

也许我的做法是错误的，在这种情况下，我很想听听关于使用 CI 进行迁移的最佳方式的意见。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-25T21:51:07.043

是的，EF 有这个功能。

运行时，`Add-Migration`您会注意到迁移文件以时间戳为前缀。这就是确定顺序的原因，假设自动迁移被并且总是被禁用。

如果您同时使用显式迁移和自动迁移，那么您可能会注意到迁移生成`Source`的文件中有一个附加属性。`.resx`这就是 EF 在运行显式迁移之前确定是否需要运行自动迁移的方式。

**我的经验教会了我这些准则：**

1）永远不要使用自动迁移。

2) 在创建新的显式迁移之前，您团队中的每个开发人员都应确保他们拥有最新的代码。很明显，但是从陈旧的代码创建迁移会导致问题。

3) 开发人员应确保如果他们`Up()`在迁移方法中编写自定义 SQL，那么他们会编写适当的代码（并对其进行测试！）以逆转`Down()`方法中的这些更改。

# php - 用 Ajax 调用函数？

> ID：15253145
> 
> 赞同：2
> 
> 时间：2013-03-06T16:44:45.977
> 
> 标签：php, ajax, jquery

**我想达到什么** 我有一些我想展示的作品。所以，我有这些的缩略图。当访问者点击缩略图时，我想要一个 div（称为 slickbox）打开并显示标题、描述和关于所点击作品的滑块。

**我已经完成了什么以及如何** 从数据库中获取我的工作数据。这是我的作品清单的一小部分：

索引.php

```
<?php
  $retour_messages = mysql_query('SELECT 2K13_works.*, 2K13_categories.nom AS nomCAT FROM 2K13_works, 2K13_categories WHERE 2K13_works.cat_id = 2K13_categories.cat_id ORDER BY 2K13_works.record_date DESC') or die(mysql_error());//requete sql pour récupérer les works de la page
  ?>
  <ul id = "creations" class = "step">
    <?php
  while($donnees_messages=mysql_fetch_assoc($retour_messages)){
  echo '<li class = "step '.$donnees_messages['nomCAT'].'" id="'.$donnees_messages['work_id'].'">
               <div class = "item"><a href = "#"><img src = "'.$donnees_messages['thumbLink'].'" alt = "'.$donnees_messages['titre'].'" title = "" width = "226" height = "147"/></a>
                <div class = "caption">
                  <h3>'.$donnees_messages['titre'].'</h3>
                  <p>'.html_entity_decode($donnees_messages['resume'],ENT_QUOTES,'UTF-8').'</p>
                  <p id = "desc" class = "hidden">'.html_entity_decode($donnees_messages['description'],ENT_QUOTES,'UTF-8').'</p>
                  <!--<p id = "idw" class = "hidden">'.$donnees_messages['work_id'].'</p>-->
                </div>
              </div>
            </li>';
            }
 ?>
  </ul> 
```

如您所见，我有一个 ul 标签，其中包含每个作品的 li 标签。每个 li 标签获取数据库中作品的 id，每个 li 包含 h3 标签和 p 标签，其中包含我想在 slickbox 中显示的文本（对于图像，我稍后会看到）。

现在，我的 slickbox 的 JavaScript 代码出现和消失：

front_functions.js

```
//_____________SLICKBOX__________________________________
$('#slickbox').hide();
$("#creations li").click(function(e) {
    // shows the slickbox on clicking the noted link
    $titre = $(e.target).children("h3").text();
    $bla = $(e.target).children("#hidden").text();
    $("#description").children("h1").text($titre) ;
    $("#description").children("p").text($bla); 
      $('#slickbox').slideDown();
      e.preventDefault();
      $(e.target).empty();
      //return false;
}); 
```

此代码不起作用，因为我的 slickbox 是在工作之前加载的。这就是为什么我需要 Ajax 和异步发送和执行请求的方式。

我在这里阅读了这个示例代码：[这很有帮助](http://www.degraeve.com/reference/simple-ajax-example.php)。但是，我有一个问题：我正在使用 jQuery，我想使用`$.ajax()`. 而且我真的不明白如何做到这一点。

我必须设置一个 XHMLHTTPRequest 对象吗？我在哪里可以编写 Ajax 调用？我可以调用函数而不是 URL 吗？

喜欢做（我不知道）：

```
$(#creations li).click(function(e){
        $.ajax(){
           function : "displayContent(id,desc,title)",
        }
}
function displayContent(id,desc,title){
    $(#slickBox).children("h1").innerHTML(title);
    $(#slickBox).children("p").innerHTML(desc);
    $(#slickBox).show();
} 
```

我什至不知道我是否应该使用 JSON（但是，因为我的数据已经存储，我只想显示它们，我想我不需要 Json）。

请给我您的知情意见和您的资深建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:11:52.773

当您发送对服务器的请求（使用 ajax）时，这就像您在页面中提交表单一样。
所以当你提交表单时，你可以用 php 做的每一件事，你也可以用 ajax 来做。
例如，如果你想用 ajax 在 php 中调用一个函数，只需像这样向 php 发送一个参数：

```
$.ajax({  
  type:'POST',
  data:{
     param:'Hey_php_call_this_function' 
  },
  success:function(data){
     alert('hey jquery , php said : ' + data);
  }
}); 
```

在服务器端：

```
if(isset($_POST['param']) && $_POST['param'] == 'Hey_php_call_this_function'){
    echo call_a_function();  /// "output to callback success function"  = data
} 
```

希望有帮助。

# ios - IF 语句中的“解析问题”“预期表达式”可能是不好的做法？

> ID：15253150
> 
> 赞同：0
> 
> 时间：2013-03-06T16:45:04.233
> 
> 标签：ios, objective-c

我确定这段代码是非常糟糕的做法，我不知道我还是新手，我只是想找出一种可行的方法，但我一直被抛出错误'解析问题''预期表达式'。

```
if ((firstLabel == nil) && ([theArray objectAtIndex:0] == char A||char B||
char C||char D||char E||char F||char G||char H||char I||char J||char K||
char L||char M||char N||char O||char P||char Q||char R||char S||char T||
char U||char V||char W||char X||char Y||char Z))
    {
        [firstLabel setText:[theArray objectAtIndex:0]];
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:47:18.800

我假设您要检查字符是否为 a,b,c,d,.. 如果 theArray 是 NSArray，它不能保存字符，所以我假设 NSStrings

如果是这样，语法是

```
... [theArray objectAtIndex:0] == @"A" || [theArray objectAtIndex:0] == @"B" || [theArray objectAtIndex:0] == @"C" 
```

但更好：

```
if(theArray.count) {
    id str = @"ABCDEFGHI"; //allowed
    id needle = [theArray objectAtIndex:0];
    if([str rangeOfString:needle].location!=NSNotFound) { 
        //its in!
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T17:05:45.643

创建一个字符集并在此基础上进行检查：

```
NSCharacterSet *myCharSet = [NSCharacterSet characterSetWithCharactersInString:@"ABCDEFGHIJKLMNOPQRSTWXYZ"];
unichar c = [theArray objectAtIndex:0];
if ((firstLabel == nil) && [myCharSet characterIsMember:c])
{
  [firstLabel setText:[NSString stringWithFormat:@"%c",[theArray objectAtIndex:0]];
} 
```

希望这可以帮助。

# c++ - 让 C++ 编译器显示一个类型可以转换成什么

> ID：15253155
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:45:18.800
> 
> 标签：c++, templates, c++03

下面是一个有缺陷的（和简化的）模板函数，它期望在模板 arg 上工作，该模板 arg 可以转换为预定义数量的类型之一。

它恰好是 2 种类型，但它更冷。

```
void do_something_type_specific( const int &unused ) { std::cout << 'i'; }
void do_something_type_specific( const std::string &unused ) { std::cout << 's'; }

template< typename Iterator >
void perform_work_on_a_range( Iterator begin, Iterator end )
{
    do_something_type_specific( *begin );
    // Perhaps more code...
} 
```

这恰好在我的环境中产生了预期的结果。模板实例将成功编译，但前提`*Iterator`是生成的类型可转换为恰好其中一个选项。

但是，此代码不必要地要求执行转换，尽管`unused`未使用，但仍然存在 UB when `begin == end`.

如果没有这些问题，如何在 C++03 中实现这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:00:01.703

`begin == end`您可以尝试使用[std::iterator_traits<>](http://en.cppreference.com/w/cpp/iterator/iterator_traits)，而不是取消引用我导致未定义行为的迭代器 when 。例如：

```
#include <iterator>
#include <string>
#include <cstdio>

void do_something_type_specific(std::string const&) { printf("%s\n", __PRETTY_FUNCTION__); }
void do_something_type_specific(int const&) { printf("%s\n", __PRETTY_FUNCTION__); }

template<class T>
struct ProduceValue
{
    static T value;
};

template<class T>
T ProduceValue<T>::value;

// Specializations for types that can't be default constructed or must be initialized.
template<>
char* ProduceValue<char*>::value = "";

template< typename Iterator >
void perform_work_on_a_range( Iterator begin, Iterator end )
{
    typedef typename std::iterator_traits<Iterator>::value_type value_type;
    do_something_type_specific(ProduceValue<value_type>::value);
}

int main() {
    char** p = 0;
    perform_work_on_a_range(p, p);

    long* q = 0;
    perform_work_on_a_range(q, q);
} 
```

输出：

```
void do_something_type_specific(const string&)
void do_something_type_specific(const int&) 
```

唯一的不便是它`ProduceValue<T>`必须专门用于无法默认构造或由于其他原因（如`char*`）而必须初始化的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:52:51.700

您可以使用一个`boost::is_convertible`元函数来确定是否可以将类型 T 转换为其他类型 U。

其次，对于`begin == end`，只需插入运行时检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T18:52:22.080

问题中的有问题的代码试图利用*模板参数*和*函数参数*的特性。

函数参数允许类型转换，但需要类型的实例化。模板参数不需要实例化，也不需要进行类型转换。

下面的模式使用 Boost 的[`enable_if`](http://www.boost.org/doc/libs/1_53_0/libs/utility/enable_if.html)and[`is_convertible`](http://www.boost.org/doc/libs/1_53_0/libs/type_traits/doc/html/boost_typetraits/reference/is_convertible.html)允许*编译器选择模板函数，就好像模板参数支持与函数参数相同的类型转换规则。* （感谢@dhavenith 的建议）

```
#include <boost/utility.hpp>
#include <boost/type_traits.hpp>

// enable_if_c makes the return type either void or a Substitution Failure.
template < typename T>
typename boost::enable_if_c<boost::is_convertible<T,int>::value>::type
do_something_type_specific()
{
  std::cout << 'i';
}

template < typename T>
typename boost::enable_if_c<boost::is_convertible<T,std::string>::value>::type
do_something_type_specific()
{
  std::cout << 's';
}

template< typename Iterator >
void perform_work_on_a_range( Iterator begin, Iterator end )
{
    // This code is from @MaximYegorushkin's answer.  Vote him up :)
    typedef typename std::iterator_traits<Iterator>::value_type value_type;
    do_something_type_specific<value_type>();
    // Perhaps more code...
} 
```

这已通过@MaximYegorushkin 的示例主程序进行了验证。

```
int main() {
    char** p = 0;
    perform_work_on_a_range(p, p);

    long* q = 0;
    perform_work_on_a_range(q, q);
} 
```

输出：

```
si 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:24:53.087

你可能想做这样的事情：

```
template <typename T>
void do_something_type_specific() {}
template <>
void do_something_type_specific<int>() {...}
template <typename Iterator>
void perform_work_on_a_range(Iterator begin, Iterator end) {
    do_something_type_specific<typename Iterator::value_type>();
} 
```

# image-processing - 图像数据库中的模糊图像去除

> ID：15253157
> 
> 赞同：2
> 
> 时间：2013-03-06T16:45:23.833
> 
> 标签：image-processing, machine-learning, computer-vision, fft, ifft

我有大约 2000 张图像的数据集。该数据库包含一些模糊图像。如何自动从此数据库中删除模糊图像？

我阅读了傅立叶变换以消除模糊图像。首先，我需要将我的图像转换为傅立叶域，然后通过应用一些阈值，我将能够识别出模糊的图像。有人可以为此在matlab中给我一些示例代码吗？我不知道如何确定阈值。有没有办法确定这个阈值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:04:32.330

这个任务真的不是那么简单，如果你删除所有不包含高频的图像，你最终会删除许多包含平滑场景的图像，即使它们没有模糊。

计算机视觉没有 100%，对你来说最好的事情（在我看来）是制作一个人工辅助软件，你的软件应该在它认为应该删除的图像上提出建议，但最终的调用必须由一个人。

# sql - 内连接就像交叉连接？

> ID：15253158
> 
> 赞同：1
> 
> 时间：2013-03-06T16:45:25.370
> 
> 标签：sql, sql-server, join

我正在尝试创建一个查询，在多个表之间创建连接。这是一个例子：

```
select b.name as state, c.name as city, sum(qnt) as total_quantity 
from qtn_table a, state_table b, city_table c
where a.state_id = b.id and a.city_id = c.id
and a.year = 2011 and a.product = 1 group by b.name, c.name 
```

还尝试了内部联接：

```
select b.name as state, c.name as city, sum(qnt) as total_quantity 
from qtn_table a
inner join state_table b ON a.state_id = b.id
inner join city_table c ON a.city_id = c.id
where a.year = 2011 and a.product = 1 group by b.name, c.name 
```

结果是一样的。

它应该返回一个只有自己状态的城市：

```
state    city    total_quantity
NY       A
NY       B
Texas    C
Texas    D
Cali     E
Cali     F 
```

但它返回了奇怪的结果，例如：

```
state    city     total_quantity
NY       A
Texas    A
Cali     A
NY       B
...
... 
```

在一个典型的交叉连接中，我认为它应该出现在所有州的城市 A 上，但它只是在其中一些而不是全部上出现，这是一个更奇怪的情况。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:48:14.720

您缺少从`state_table`to的连接，`city_table`并且它为该表中的每个州或每个具有相同名称的城市（似乎至少）的州返回一行。我添加`AND state_table.state = city_table.state`到您的查询中

```
select b.name as state, c.name as city, sum(qnt) as total_quantity 
from qtn_table a
 inner join state_table b ON a.state_id = b.id
 inner join city_table c ON a.city_id = c.id AND state_table.state = city_table.state
where a.year = 2011 
and a.product = 1 
group by b.name, c.name 
```

# java - JfreeChart：改变极坐标图上的轴线角度

> ID：15253159
> 
> 赞同：1
> 
> 时间：2013-03-06T16:45:32.163
> 
> 标签：java, charts, jfreechart

既然一张图值一千字，那我就给你看。

这就是我所拥有的：

![老的](../Images/16575a67d0e1122b0a01f4578c3e97bc.png)

这就是我需要的：

![新的](../Images/0361b9f719bb2c57c3c4d26cb6bb040f.png)

一些代码可能有用：

```
private JFreeChart createChart (XYDataset dataset)
{
    ValueAxis radiusAxis = new NumberAxis ();
    radiusAxis.setTickLabelsVisible (false);

    //   Rendering serie ( handeling null values )
    DefaultPolarItemRenderer ren = new DefaultPolarItemRenderer ()
    {
        @Override
        public void drawSeries (Graphics2D g2, Rectangle2D dataArea,
            PlotRenderingInfo info, PolarPlot plot, XYDataset dataset, int seriesIndex)
        {
            boolean newPath = true;
            GeneralPath polyline = new GeneralPath ();
            int numPoints = dataset.getItemCount (seriesIndex);
            for (int i = 0 ; i < numPoints - 1 ; i++)
            {
                double theta = dataset.getXValue (seriesIndex, i);
                double radius = dataset.getYValue (seriesIndex, i);
                Point p = plot.translateValueThetaRadiusToJava2D (theta, radius,
                        dataArea);
                if (p.x == 0 && p.y == 0)
                {
                    newPath = true;
                }
                else
                {
                    if (newPath)
                    {
                        polyline.moveTo (p.x, p.y);
                        newPath = false;
                    }
                    else
                    {
                        polyline.lineTo (p.x, p.y);
                    }
                }
            }
            g2.setPaint (lookupSeriesPaint (seriesIndex));
            g2.setStroke (lookupSeriesStroke (seriesIndex));
            g2.draw (polyline);
        }
    };

    // removing fill serie
    ren.setSeriesFilled (0, false);

    // custimizing angles
    PolarPlot plot = new PolarPlot (dataset, radiusAxis, ren)
    {
        @Override
        protected java.util.List refreshAngleTicks ()
        {
            java.util.List ticks = new ArrayList ();

            ticks.add (new NumberTick (0, "12AM", TextAnchor.CENTER, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (30, "2AM", TextAnchor.TOP_LEFT, TextAnchor.TOP_RIGHT, 0));
            ticks.add (new NumberTick (60, "4AM", TextAnchor.TOP_LEFT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (90, "6AM", TextAnchor.TOP_LEFT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (120, "8AM", TextAnchor.TOP_LEFT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (150, "10AM", TextAnchor.TOP_LEFT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (180, "12PM", TextAnchor.CENTER, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (210, "2PM", TextAnchor.TOP_RIGHT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (240, "4PM", TextAnchor.TOP_RIGHT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (270, "6PM", TextAnchor.TOP_RIGHT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (300, "8PM", TextAnchor.TOP_RIGHT, TextAnchor.TOP_LEFT, 0));
            ticks.add (new NumberTick (330, "10PM", TextAnchor.TOP_RIGHT, TextAnchor.TOP_LEFT, 0));

            return ticks;
        }
    };

    // colors..
    plot.setOutlinePaint (new Color (0, 0, 0, 0));
    plot.setBackgroundPaint (Color.white);
    plot.setRadiusGridlinePaint (Color.gray);
    ren.setShapesVisible (true);
    plot.setRadiusGridlinesVisible (true);
    plot.setAngleGridlinesVisible (true);
    plot.setAngleLabelsVisible (true);
    plot.setOutlineVisible (true);
    plot.setAngleGridlinePaint (Color.BLACK);
    plot.setRenderer (ren);

    JFreeChart chart = new JFreeChart ("", JFreeChart.DEFAULT_TITLE_FONT, plot, false);
    chart.setBackgroundPaint (Color.white);
    chart.setBorderVisible (false);
    chart.setBorderPaint (Color.RED);

    // showing Label Axis ( 0 ... 20 ... 30 ...40)
    NumberAxis rangeAxis = (NumberAxis) plot.getAxis ();
    rangeAxis.setTickLabelsVisible (true);

    rangeAxis.setAxisLinePaint (Color.RED);
    return chart;
} 
```

如您所见，我想更改`Axis`Line 角度；我不知道该怎么做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:06:08.207

您没有提到 JFreeChart 的使用版本，但 JFreeChart 1.0.14 对极坐标图进行了一些改进。[您可以通过PolarPlot.setAngleOffset()](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PolarPlot.html#setAngleOffset%28double%29)设置角度偏移，它允许从上午 12 点开始在您喜欢的任何位置。

但是，轴本身不能是任意角度，只能在北、东、南或西。这可以使用[PolarPlot.setAxisLocation()](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/PolarPlot.html#setAxisLocation%28org.jfree.chart.plot.PolarAxisLocation%29)进行设置。

hth，
-马丁

# android - 如何将数据字符串从一个android设备发送到另一个？

> ID：15253163
> 
> 赞同：0
> 
> 时间：2013-03-06T16:45:41.503
> 
> 标签：android, chat, google-cloud-messaging

我需要在我的应用程序中实现一个简单的消息传递功能。安装了我的应用程序的两个用户应该能够在我的应用程序内部/外部相互发送消息。它不需要像聊天应用程序那样是实时的。有一点延迟是可以接受的。我应该使用中央服务器和像 UrbanAirPush 这样的谷歌云消息服务来实现吗？或者我应该使用套接字编程（不是很熟悉，但我不介意学习）。

另外，我不想为此使用短信或蓝牙。请告诉我正确的方法。UrbanAirpush 有一个限制，所以任何其他选择都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:53:14.207

[您可以在交叉复制](http://cross-copy.net)中创建免费的 Web 服务 您可以使用[此](https://github.com/rodja/cross-copy/blob/master/README.md)api 作为指南

或者只是[谷歌](http://developer.android.com/google/gcm/index.html)它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T15:47:44.507

使用 wifi direct 或网络服务发现。使用 wifip2p 可以让您轻松地将消息/音频/图片发送到附近的其他设备，您可以查看本教程：[WIFI DIRECT](http://developer.android.com/training/connect-devices-wirelessly/nsd-wifi-direct.html)，NSD 也在其中。您甚至可以从 Android SDK 中找到示例代码（WIFIServiceDiscoveryActivty）来查看更多信息。

# inheritance - symfony2 自定义控制台如何包含容器？

> ID：15253166
> 
> 赞同：0
> 
> 时间：2013-03-06T16:45:46.990
> 
> 标签：inheritance, symfony, console, undefined-behavior

如何在自定义控制台命令脚本中获取容器？

我希望能够打电话

```
$this->container->get('kernel')->getCachedir(); 
```

或者

```
$this->getDoctrine(); 
```

我可以在控制器内部调用上述两个示例，但不能在命令中调用？...请参见下面的简化示例

```
namespace Portal\WeeklyConversionBundle\Command;

use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;
use Symfony\Component\Console\Input\InputArgument;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Input\InputOption;
use Symfony\Component\Console\Output\OutputInterface;

class ExampleCommand extends ContainerAwareCommand
{

    protected function configure()
    {
        $this->setName('demo:greet')
          ->setDescription('Greet someone')
          ->addArgument('name', InputArgument::OPTIONAL, 'Who do you want to greet?')
          ->addOption('yell', null, InputOption::VALUE_NONE, 'If set, the task will yell in uppercase letters')
        ;
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $name = $input->getArgument('name');
        if ($name) {
            $text = 'Hello '.$name;
        } else {
            $text = 'Hello';
        }

        // this returns an error?
        // $cacheDir = $this->container->get('kernel')->getCachedir();

        // edit - this works
        $this->getContainer()->get('kernel')->getCacheDir();

        $output->writeln($text);
    }
} 
```

返回未定义的错误消息？..我如何定义它？我认为通过添加我可以访问的 ContainerAwareCommand`this->container?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:49:22.730

怎么用，

```
$this->getContainer()->get('kernel')->getCacheDir(); 
```

查看文档中有关[如何创建控制台命令](http://symfony.com/doc/2.0/cookbook/console/console_command.html)部分的[从服务容器获取服务部分。](http://symfony.com/doc/2.0/cookbook/console/console_command.html#getting-services-from-the-service-container)

**从文档中，**

通过使用[ContainerAwareCommand](http://api.symfony.com/2.0/Symfony/Bundle/FrameworkBundle/Command/ContainerAwareCommand.html)作为命令的基类（而不是更基本的 Command），您可以访问服务容器。换句话说，您可以访问任何已配置的服务。

# php - 将 JQuery Image Uploader 与 CI 集成的问题

> ID：15253167
> 
> 赞同：1
> 
> 时间：2013-03-06T16:45:48.123
> 
> 标签：php, jquery, image, codeigniter, upload

在 FF 控制台上，我正在控制台和 UI 上，但是图像已成功上传到服务器上，但 JSON 显示错误“**空文件上传结果**”，并且在控制台中我收到以下错误。

**错误**

```
TypeError: $(...).live is not a function
    $('#fileupload .files a:not([target^=_blank])').live('click', function (e) { 
```

代码结构为：

**包括**

```
<link rel="stylesheet" href="<?php echo site_url(); ?>media/image_uploader/css/bootstrap.min.css">
<!-- Generic page styles -->
<link rel="stylesheet" href="<?php echo site_url(); ?>media/image_uploader/css/style.css">
<!-- Bootstrap styles for responsive website layout, supporting different screen sizes -->
<link rel="stylesheet" href="<?php echo site_url(); ?>media/image_uploader/css/bootstrap-responsive.min.css">
<!-- Bootstrap CSS fixes for IE6 -->
<!--[if lt IE 7]><link rel="stylesheet" href="css/bootstrap-ie6.min.css"><![endif]-->
<!-- Bootstrap Image Gallery styles -->
<link rel="stylesheet" href="<?php echo site_url(); ?>media/image_uploader/css/bootstrap-image-gallery.min.css">
<!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
<link rel="stylesheet" href="<?php echo site_url(); ?>media/image_uploader/css/jquery.fileupload-ui.css">
<!-- CSS adjustments for browsers with JavaScript disabled -->
<noscript>
<link rel="stylesheet" href="<?php echo site_url(); ?>media/image_uploader/css/jquery.fileupload-ui-noscript.css">
</noscript>
<!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
<!--[if lt IE 9]><script src="js/html5.js"></script><![endif]-->

<script src="http://code.jquery.com/jquery.js"></script> 

<script src="<?php echo site_url(); ?>media/image_uploader/js/vendor/jquery.ui.widget.js"></script> 

<script src="<?php echo site_url(); ?>media/image_uploader/js/tmpl.min.js"></script> 
<!-- The Load Image plugin is included for the preview images and image resizing functionality --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/load-image.min.js"></script> 
<!-- The Canvas to Blob plugin is included for image resizing functionality --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/canvas-to-blob.min.js"></script> 
<!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/bootstrap.min.js"></script> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/bootstrap-image-gallery.min.js"></script> 
<!-- The Iframe Transport is required for browsers without support for XHR file uploads --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/jquery.iframe-transport.js"></script> 
<!-- The basic File Upload plugin --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/jquery.fileupload.js"></script> 
<!-- The File Upload file processing plugin --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/jquery.fileupload-fp.js"></script> 
<!-- The File Upload user interface plugin --> 
<script src="<?php echo site_url(); ?>media/image_uploader/js/jquery.fileupload-ui.js"></script> 
```

**主.js**

```
$(function () {
    'use strict';

    // Initialize the jQuery File Upload widget:
    $('#fileupload').fileupload();

    // Enable iframe cross-domain access via redirect option:
    $('#fileupload').fileupload(
        'option',
        'redirect',
        window.location.href.replace(
            /\/[^\/]*$/,
            '<?php echo site_url(); ?>media/image_uploader/js/cors/result.html?%s'
            )
        );

    $('#download-files > .template-download > .add').each(function(e){
        alert(e);
    });

    // Load existing files:
    $('#fileupload').each(function () {
        var that = this;
        $.getJSON(this.action, function (result) {
            if (result && result.length) {
                $(that).fileupload('option', 'done')
                .call(that, null, {
                    result: result
                });
            }
        });
    });

    // Open download dialogs via iframes,
    // to prevent aborting current uploads:
    $('#fileupload .files a:not([target^=_blank])').live('click', function (e) {
        e.preventDefault();
        $('<iframe style="display:none;"></iframe>')
        .prop('src', this.href)
        .appendTo('body');
    });

}); 
```

**上传处理程序**

```
 function __construct() {
        parent::__construct();
        $this->load->helper(array('form', 'url'));

//Set relative Path with CI Constant
        $this->setPath_img_upload_folder("assets/img/articles/");
        $this->setPath_img_thumb_upload_folder("assets/img/articles/thumbnails/");

//Delete img url
        $this->setDelete_img_url(base_url() . 'admin/deleteImage/');

//Set url img with Base_url()
        $this->setPath_url_img_upload_folder(base_url() . "assets/img/articles/");
        $this->setPath_url_img_thumb_upload_folder(base_url() . "assets/img/articles/thumbnails/");
  }

    public function index() {
      $this->load->view('upload_view');
   }

    public function upload_img() {
        $name = $_FILES['userfile']['name'];
        $name = strtr($name, 'ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðòóôõöùúûüýÿ', 'AAAAAACEEEEIIIIOOOOOUUUUYaaaaaaceeeeiiiioooooouuuuyy');

// remplacer les caracteres autres que lettres, chiffres et point par _

         $name = preg_replace('/([^.a-z0-9]+)/i', '_', $name);

        //Your upload directory, see CI user guide
        $config['upload_path'] = $this->getPath_img_upload_folder();

        $config['allowed_types'] = 'gif|jpg|png|JPG|GIF|PNG';
        $config['max_size'] = '1000';
        $config['file_name'] = $name;

       //Load the upload library
        $this->load->library('upload', $config);

       if ($this->do_upload()) {

            //If you want to resize 
            $config['new_image'] = $this->getPath_img_thumb_upload_folder();
            $config['image_library'] = 'gd2';
            $config['source_image'] = $this->getPath_img_upload_folder() . $name;
            $config['create_thumb'] = FALSE;
            $config['maintain_ratio'] = TRUE;
            $config['width'] = 193;
            $config['height'] = 94;

            $this->load->library('image_lib', $config);

            $this->image_lib->resize();

           $data = $this->upload->data();

            //Get info 
            $info = new stdClass();

            $info->name = $name;
            $info->size = $data['file_size'];
            $info->type = $data['file_type'];
            $info->url = $this->getPath_img_upload_folder() . $name;
            $info->thumbnail_url = $this->getPath_img_thumb_upload_folder() . $name; //I set this to original file since I did not create thumbs.  change to thumbnail directory if you do = $upload_path_url .'/thumbs' .$name
            $info->delete_url = $this->getDelete_img_url() . $name;
            $info->delete_type = 'DELETE';

           //Return JSON data
           if (IS_AJAX) {   //this is why we put this in the constants to pass only json data
                echo json_encode(array($info));
                //this has to be the only the only data returned or you will get an error.
                //if you don't give this a json array it will give you a Empty file upload result error
                //it you set this without the if(IS_AJAX)...else... you get ERROR:TRUE (my experience anyway)
            } else {   // so that this will still work if javascript is not enabled
                $file_data['upload_data'] = $this->upload->data();
                echo json_encode(array($info));
            }
        } else {

           // the display_errors() function wraps error messages in <p> by default and these html chars don't parse in
           // default view on the forum so either set them to blank, or decide how you want them to display.  null is passed.
            $error = array('error' => $this->upload->display_errors('',''));

            echo json_encode(array($error));
        }

       }
 // }

//Function for the upload : return true/false
  public function do_upload() {

        if (!$this->upload->do_upload()) {

            return false;
        } else {
            //$data = array('upload_data' => $this->upload->data());

            return true;
        }
     }

public function deleteImage() {

        //Get the name in the url
        $file = $this->uri->segment(3);

        $success = unlink($this->getPath_img_upload_folder() . $file);
        $success_th = unlink($this->getPath_img_thumb_upload_folder() . $file);

        //info to see if it is doing what it is supposed to 
        $info = new stdClass();
        $info->sucess = $success;
        $info->path = $this->getPath_url_img_upload_folder() . $file;
        $info->file = is_file($this->getPath_img_upload_folder() . $file);
        if (IS_AJAX) {//I don't think it matters if this is set but good for error checking in the console/firebug
            echo json_encode(array($info));
        } else {     //here you will need to decide what you want to show for a successful delete
            var_dump($file);
        }
    }

    public function get_files() {

        $this->get_scan_files();
    }

    public function get_scan_files() {

        $file_name = isset($_REQUEST['file']) ?
                basename(stripslashes($_REQUEST['file'])) : null;
        if ($file_name) {
            $info = $this->get_file_object($file_name);
        } else {
            $info = $this->get_file_objects();
        }
        header('Content-type: application/json');
        echo json_encode($info);
    }

    protected function get_file_object($file_name) {
        $file_path = $this->getPath_img_upload_folder() . $file_name;
        if (is_file($file_path) && $file_name[0] !== '.') {

            $file = new stdClass();
            $file->name = $file_name;
            $file->size = filesize($file_path);
            $file->url = $this->getPath_url_img_upload_folder() . rawurlencode($file->name);
            $file->thumbnail_url = $this->getPath_url_img_thumb_upload_folder() . rawurlencode($file->name);
            //File name in the url to delete 
            $file->delete_url = $this->getDelete_img_url() . rawurlencode($file->name);
            $file->delete_type = 'DELETE';

            return $file;
        }
        return null;
    }

    protected function get_file_objects() {
        return array_values(array_filter(array_map(
             array($this, 'get_file_object'), scandir($this->getPath_img_upload_folder())
                   )));
    }

    public function getPath_img_upload_folder() {
        return $this->path_img_upload_folder;
    }

    public function setPath_img_upload_folder($path_img_upload_folder) {
        $this->path_img_upload_folder = $path_img_upload_folder;
    }

    public function getPath_img_thumb_upload_folder() {
        return $this->path_img_thumb_upload_folder;
    }

    public function setPath_img_thumb_upload_folder($path_img_thumb_upload_folder) {
        $this->path_img_thumb_upload_folder = $path_img_thumb_upload_folder;
    }

    public function getPath_url_img_upload_folder() {
        return $this->path_url_img_upload_folder;
    }

    public function setPath_url_img_upload_folder($path_url_img_upload_folder) {
        $this->path_url_img_upload_folder = $path_url_img_upload_folder;
    }

    public function getPath_url_img_thumb_upload_folder() {
        return $this->path_url_img_thumb_upload_folder;
    }

    public function setPath_url_img_thumb_upload_folder($path_url_img_thumb_upload_folder) {
        $this->path_url_img_thumb_upload_folder = $path_url_img_thumb_upload_folder;
    }

    public function getDelete_img_url() {
        return $this->delete_img_url;
    }

    public function setDelete_img_url($delete_img_url) {
        $this->delete_img_url = $delete_img_url;
    } 
```

任何帮助都将是非常可观的。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:55:12.557

从 jQuery 1.9 开始，jQuery 对象没有`live`方法，你可以使用`on`方法来代替：

```
$('#fileupload').on('click', '.files a:not([target^=_blank])', function (e) {
//   ^                                |
//   |                                 ----- target element
//    ----- A static parent or document object 
```

# eclipse - Eclipse PDT，XDebug 变量监视详细信息仅显示 1000 个字符

> ID：15253168
> 
> 赞同：1
> 
> 时间：2013-03-06T16:45:51.010
> 
> 标签：eclipse, xdebug, eclipse-pdt

我正在使用带有 XAMPP 的 Eclipse PDT 进行调试

这个问题与这个项目有关：

[Eclipse 调试上的变量查看器截断字符串值](https://stackoverflow.com/questions/3199611/variables-viewer-on-eclipse-debugging-truncates-the-string-values/15250886#15250886)

我遇到了与该链接相同的问题。

我观察了一个变量，在表达式选项卡中，我只能在“详细信息”窗口中查看大约 1000 个字符。

如果我右键单击并使用“复制表达式”，我会得到相同的 1000 个字符。

我还右键单击了详细信息窗格... Max Length 并尝试将其设置为 0 或 30000（我的数据约为 20k），但都没有更改最大值 1000。

这违背了我花费 2 天时间来设置 Eclipse 以进行调试的整个目的......如果没有解决方法，任何人都可以建议一个没有此限制的 PHP 调试器吗？

我打算尝试 Zend 调试器，但看到一个视频建议它使用相同的表达式/详细信息窗格来显示其数据......有人可以确认/否认吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T10:47:11.357

在**变量**视图中，右键单击变量并选择**更改值**。如果您的变量很大，您必须等待几分钟（在这种情况下 Eclipse 不响应命令），但最终 Eclipse 将完全显示您的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:38:52.160

我尝试了几乎所有可以想象的...我相信这是 Eclipse 中应该修复的错误，但无论如何，我最终只是创建了一个新的测试用例，无需调试 20k 条数据...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T15:31:04.757

*没有设置无限制*的选项，但可以在 XDebug 配置中增加限制。

在 Eclipse 中转到

窗口 -> 首选项 -> PHP -> 调试 -> 已安装的调试器。

突出显示*XDebug*并单击*配置*。

在弹出的窗口中，您可以看到数组深度和最大子代数。将这些值设置得更高将为您提供有关变量的更多数据。

[来源](https://www.eclipse.org/forums/index.php?t=msg&th=24812&goto=80399&#msg_80399)

# ios - 从不属于 UINavigationController 的模态推送

> ID：15253169
> 
> 赞同：1
> 
> 时间：2013-03-06T16:45:52.820
> 
> 标签：ios

我有一个屏幕弹出另一个屏幕作为模式。新屏幕分为多个容器视图。其中一个容器视图包含一个 UITableView。我希望当我选择它在父视图控制器上推送一个新控制器的行时。

基本上，我想要一个从模态到另一个模态的推送！

更新：

很难解释，但让我再试一次。我有一个包含 3 个容器视图的 UIViewController（显示为模式）。每个容器视图都由一个单独的 UIViewController 控制。现在，我希望当我单击其中一个容器视图中的按钮时，它应该替换整个父控制器（包含所有三个容器视图的那个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:49:20.107

如果您有一个包含在 UINavigationController 中的视图控制器，则可以使用

```
[self navigationController] 
```

例如

```
[[self navigationController] pushViewController:someOtherController
                                       animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:05:33.103

从其中一个子视图控制器中，您可以使用 parentViewController 属性引用父级。所以，只需这样做：

```
NextController *next = [NextController alloc] init.....
[self.parentViewController presentViewController:next animated:YES completion:nil]; 
```

# javascript - 按钮不再触发表单提交事件

> ID：15253170
> 
> 赞同：0
> 
> 时间：2013-03-06T16:45:54.057
> 
> 标签：javascript, html, forms, button, input

我最近开始使用：

```
<button type='submit'>Submit Form</button> 
```

代替

```
<input type='submit value='Submit Form'> 
```

提交我的 HTML 表单以获得使用按钮的自定义值。

但是，我的表格如下所示：

```
<form class='format_form' action='add_admin_success.php' onsubmit='return validate_form();' method='POST'> 
```

我刚刚发现使用按钮不再使

```
onsubmit='return validate_form();' 
```

有什么影响。表单现在在不运行**validate_form()**的情况下提交，其中**validate_form()**被定义为与标签一起使用。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:48:15.290

`input`从到更改`button`为可能的原因。为什么不将`onsubmit`代码添加到按钮中`onclick`？

# java - 使用 -XX:-UseSplitVerifier 有多安全？

> ID：15253173
> 
> 赞同：48
> 
> 时间：2013-03-06T16:46:04.200
> 
> 标签：java, java-7

使用检测的 JDK7 编译代码存在已知的兼容性问题。至于[http://www.oracle.com/technetwork/java/javase/compatibility-417013.html](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html)

> 版本号为 51 的类文件是使用类型检查验证器专门验证的，因此这些方法必须在适当的时候具有 StackMapTable 属性。对于版本 50 的类文件，如果文件中的堆栈映射丢失或不正确，Hotspot JVM 将（并继续）故障转移到类型推断验证器。对于版本 51（Java SE 7 的默认版本）的类文件，不会发生此故障转移行为。任何修改版本 51 类文件中字节码的工具都必须确保更新堆栈图信息以与字节码保持一致才能通过验证。

解决方案是使用`-XX:-UseSplitVerifier`此处总结的： [https ://community.oracle.com/blogs/fabriziogiudici/2012/05/07/understanding-subtle-new-behaviours-jdk-7](https://community.oracle.com/blogs/fabriziogiudici/2012/05/07/understanding-subtle-new-behaviours-jdk-7)

它有多安全？我想甲骨文把这个检查放在里面是有原因的。如果我不使用它，我可能会冒其他问题的风险。

使用会产生什么后果`-XX:-UseSplitVerifier`？

谢谢，

彼得。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-09T16:56:14.213

简而言之，它非常安全。

从 Java 6 开始，Oracle 的编译器使用 StackMapTable 制作类文件。基本思想是编译器可以显式指定对象的类型，而不是让运行时来做。这在运行时提供了微小的加速，以换取编译期间的一些额外时间和编译的类文件（前面提到的 StackMapTable）的一些复杂性。

作为一项实验性功能，它在 Java 6 编译器中默认未启用。如果不存在 StackMapTable，则运行时默认验证对象类型本身。

直到 Java 7。Oracle 强制要求：编译器生成它们，运行时验证它们。如果 StackMapTable 不存在，它仍然使用旧的验证器......但仅限于 Java 6 或更早版本（版本 50）的类文件。使用 StackMapTable 需要 Java 7 类文件（版本 51），因此运行时不会对它们进行同样的处理。

如果您的类文件是在没有 StackMapTable 的情况下生成的，那么这只是一个问题。例如，如果您使用的是非 Oracle JVM。或者，如果你后来弄乱了字节码——比如将其与调试器、优化器或代码覆盖分析器一起使用。

但你可以绕过它！Oracle 的 JVM 提供了 -XX:+UseSplitVerifier 来强制运行时回退到旧的类型验证器。它不关心 StackMapTable。

在实践中，运行时速度和效率方面所希望的优化并没有实现：如果存在，还不足以让任何人注意到。由于新类型验证器不提供任何新功能（只是优化），因此将其关闭是非常安全的。

如果您搜索 JSR 202，Oracle 的解释位于[http://www.oracle.com/technetwork/java/javase/compatibility-417013.html 。](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-15T14:13:44.387

是的——它是安全的。正如 Judebert 所说，它只是稍微减慢了类加载。

添加更多信息：StackMap 表到底是什么？好吧，字节码验证器需要对类文件中的代码进行两次传递，以验证正在传递和使用的数据类型是否正确。第一遍，速度较慢，对所有代码的分支进行流分析，以查看每个字节码指令的堆栈上可能有什么类型的数据。第二遍查看每条指令，看它是否可以有效地对所有这些类型进行操作。

这是关键：编译器已经拥有第一遍生成的所有信息 - 因此（在 Java 6 和 7 中）它将其存储在类文件的 StackMap 表中。

这加快了类加载，因为类加载器不必进行第一次传递。这就是为什么它被称为拆分验证器的原因，因为工作是在编译器和运行时加载机制之间拆分的。当您使用 -XX:-UseSplitVerifier 选项时，您告诉 Java 在类加载时进行*两次*传递（并忽略任何 StackMap 表）。许多产品（比如在加载时修改字节码的分析器）最初并不知道 StackMap 表，所以当他们在加载时修改类时，编译器的 StackMap 表已经过时并导致错误。

所以，总而言之， -XX:-UseSplitVerifier 选项会减慢类加载速度。它不会影响安全性、运行时性能或功能。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-26T13:14:05.560

堆栈映射框架是在 Java 7 中添加的，“prashant”认为这个想法是有缺陷的，并建议开发人员总是使用`-XX:-UseSplitVerifier`标志来避免使用它们。

阅读更多：[Java 7 字节码验证器：JVM 的巨大倒退](http://chrononsystems.com/blog/java-7-design-flaw-leads-to-huge-backward-step-for-the-jvm.)

# php - XSD 文件有密码

> ID：15253176
> 
> 赞同：0
> 
> 时间：2013-03-06T16:46:06.587
> 
> 标签：php, xml, web-services, soap, xsd

我到处寻找答案，但似乎找不到。

我正在尝试针对 XSD 文件验证 XML 文件。到目前为止，我已经写了这个。

```
$x_validate = new DOMDocument();
$x_validate->load($xml_path);

$x_validate->schemaValidate($xsd_path); 
```

起初，路径被设置为远程位置。然后我意识到这些远程文件需要身份验证才能看到。因此，为避免这种情况，我将文件下载到我的目录中，因此路径如下所示。

```
$xml_path = "./test-v1.xml";
$xsd_path = "./test-v1.xsd"; 
```

唯一的问题是它不起作用并且我遇到了一些错误。其中之一就是这个。出于安全目的，我将 URL 设为空白。

```
Warning: DOMDocument::schemaValidate() [domdocument.schemavalidate]: Element '{http://www.w3.org/2001/XMLSchema}include': Failed to load the document 'https://****' for inclusion. in C:\Xampp\htdocs\cdes\xml-validation\run-validation.php on line 15 
```

所以由于这个错误，我回到了我原来的 URL 远程引用。

在验证架构之前，有人可以指出正确的方向，将身份验证用户名和密码发送到 XSD 和 XML 文件吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:32:25.450

您应该将文件下载到本地硬盘，包括那些通过包含引用的文件，然后使用所谓的*目录*自动使用本地文件而不是 URI。

这也将大大提高验证速度。我在不同的问答材料中概述了这个示例：

*   [针对同一 XML 模式 (XSD) 加快一批 XML 文件的 XML 模式验证](https://stackoverflow.com/q/13865149/367456)

对于您使用提供的错误信息所写的身份验证问题，尚不清楚究竟是什么原因以及如何解决它（除了使用目录）。当您能够使用浏览器下载文件时，请前往本地副本。大多数情况下，您也可以下载一组 XSD 文件以及 zip 包或类似文件。

如果您无法下载，那么您需要对 HTTP 连接进行故障排除，这需要您使用网络嗅探器跟踪请求，或者使用可用的外部加载程序回调（请参阅 参考资料[`libxml_set_external_entity_loader()`](http://php.net/libxml_set_external_entity_loader)）注入您自己的处理使用 PHP 5.4，您还可以[`libxml_set_streams_context()`](http://www.php.net/libxml_set_streams_context)通过[`stream_notification_callback()`](http://php.net/stream_notification_callback).

TLDR：去找目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:53:21.727

不确定 DOMDocument 类是否支持，但您通常可以以这种格式将身份验证数据添加到 URL：

[http://username:password@cooldomain.com/bla.xsd](http://username:password@cooldomain.com/bla.xsd)

您是否尝试将其添加到 XSD 路径？

# html - 在 IE8 中设置 iframe 样式？

> ID：15253186
> 
> 赞同：1
> 
> 时间：2013-03-06T16:46:40.570
> 
> 标签：html, css, cross-browser

假设我有以下代码：

```
<style>
iframe
{
    border:none;
}
div
{
    border: 1px solid;
    padding: 10px;
}
</style>
<div>
   <iframe></iframe>
</div> 
```

如果我在任何现代浏览器中查看此内容，则 iframe 周围没有边框。但如果我使用 IE8 或 7 查看它，则边框仍然存在。如何让旧的、更糟糕的浏览器的边框消失？

我还遇到了 iframe 的其他一些样式问题，因此任何人的奖励积分都可以提供一个很好的链接，该链接可以超越 iframe 的跨浏览器样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:52:37.507

您需要将以下内容添加到 iFrame。对于旧版浏览器，仅使用 CSS 是无法做到的：

```
frameborder="0" 
```

# jvectormap - jVectorMap 动态定义数据系列

> ID：15253188
> 
> 赞同：2
> 
> 时间：2013-03-06T16:46:51.023
> 
> 标签：jvectormap

我正在尝试做但失败的是：

```
worldMap.series.regions[0]=new jvm.DataSeries({
    scale:['#CCCCCC','#FF0000'],
    normalizeFunction:'polynomial',
    values:{'country_code':value...},
    min:minValue,
    max:maxValue
}); 
```

我得到的错误是没有定义区域，所以我做错了。这样做的正确方法是什么，如果我不再需要它，我该如何处理数据（如删除国家的颜色，就好像地图是用空数据集初始化的一样）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:05:05.323

如果您只想更改系列数据，那么您可以使用和之`DataSeries`类的方法：`clear``setValues`

```
worldMap.series.regions[0].clear(); 
```

# actionscript-3 - AS3 从数组中删除一个对象？

> ID：15253189
> 
> 赞同：0
> 
> 时间：2013-03-06T16:46:55.187
> 
> 标签：actionscript-3

我使用这行代码删除了一个元素：

```
tiles.splice(tiles.indexOf(tiles[i]), 1); 
```

然而之后当我检查该值时，它仍然不是空的，事实上，它仍然包含它内部的电影剪辑。

这虽然有效：

```
tiles[tr] = null; 
```

问题是，这样做还可以吗？我在这个数组中添加和删除了movieclips，然后输入removeChild(tiles[tr); 在将其从阵列中删除之前。

只是不想以后再遇到什么糟糕的表现，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:58:49.870

splice 从 Array 中切出元素，以上所有元素都向下移动一步。这也反映在数组的长度上。所以你找到的元素是下一个元素。只需将其归零即可。将数组的其余部分保留为空位置。

如果我已经是您需要的位置，您也不需要调用 indexOf。

```
tiles.splice(i, 1) 
```

会做。

# jquery - 关闭 Fancybox 2 宽度焦点在画廊模式下不起作用

> ID：15253190
> 
> 赞同：0
> 
> 时间：2013-03-06T16:46:57.727
> 
> 标签：jquery, fancybox, focus, fancybox-2

我对 Fancybox 2 有疑问。当 Fancybox 处于画廊模式并且我用焦点（键盘输入键）关闭 Fancybox 时，它会移动到第二张图像。我无法使用键盘（ESC 除外）关闭我的 Fancybox，它只能使用鼠标。

你可以在这里测试这个[http://jsfiddle.net/korigan/qfxZd/2/](http://jsfiddle.net/korigan/qfxZd/2/)

```
$('.fancybox').click(function(){
       focusLink = this;
   }).fancybox({
    beforeLoad: function() {
        $('a, input, button').attr('tabIndex', -1);
        $('.fancybox-overlay a, .fancybox-overlay button, .fancybox-overlayinput').attr('tabIndex', 0);
    },
    afterClose: function() {
        focusLink.focus();
        $('a, button, input').attr('tabIndex', 0);
    },
}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:06:58.253

Fancybox 可以`keys`选择设置特定按键的行为....键的默认设置`enter`是导航到`next`图库的图像`left`。您可以通过声明要移动到图像的键集并省略*键***（**数值 = ）来覆盖此行为，以便将其从堆栈中删除，如下所示：`next`**`enter``13`**

 **```
keys: {
    next: {
     // 13: 'left', // enter key will do nothing (left is default behavior)
        34: 'up', // page down
        39: 'left', // right arrow
        40: 'up' // down arrow
    }
} 
```

此外，您可以在相同的选项中设置*关闭*fancybox的`enter`键，例如：

 *```
keys: {
    close: [13], // enter key now closes fancybox
    next: {
     // 13: 'left', // enter doesn't show next image from left
        34: 'up', // page down
        39: 'left', // right arrow
        40: 'up' // down arrow
    }
} 
```

... 见**[JSFIDDLE](http://jsfiddle.net/ZbfKY/)*****

# css - 两列具有相同的宽度，但首先具有静态位置，第二个绝对位置

> ID：15253195
> 
> 赞同：0
> 
> 时间：2013-03-06T16:47:18.197
> 
> 标签：css, position

我想制作一个具有 2 列布局的响应式网站。对于桌面屏幕，应显示两列，对于小屏幕（智能手机），应仅显示其中一列。

要在列之间切换，用户必须进行水平滑动（从右到左或从左到右）。这很好用（对于桌面用户：使用鼠标并进行拖放）。

问题是：右列有一个**绝对**位置。左列有一个**静态**位置（我认为）和**100% 的宽度**。对于小屏幕，完整的布局是相对的，通过媒体查询。**我不知道右列**应该有哪个宽度值。我尝试了多个百分比值（100%-90%），但是当我找到正确的值时，我意识到它只适用于特定的窗口宽度。当我为某些像素调整窗口大小时，它会中断。

**所以两列都应该在/与红色边框相同的宽度内（在小提琴中）。**

**不要忘记调整结果窗口的大小，以模拟小屏幕！**
**您也可以切换回左栏，进行反向滑动/拖放。**

这是小提琴：http: [//jsfiddle.net/sUPfh/1/](http://jsfiddle.net/sUPfh/1/)

我有另一个解决方案 (2)，其中宽度还可以，但是幻灯片效果无法正常工作。在幻灯片效果期间，右栏位于左栏下方。效果结束后，右栏突然出现在正确的位置，但它应该从侧面滑动。

您可以尝试这两种解决方案，只需在 css 窗口中删除/评论右列的解决方案之一：

```
/* solution 1 (width is not really percentage, when resize the window, but slide effect ok) */
position: absolute;
width: 94%; /* width only ok if the window width is about 695px */

/* solution 2 (width ok, but wrong slide effect */
/*
position: static;
width: 100%;
*/ 
```

PS：我使用较少的 Twitter Bootstrap 和自定义网格布局，所以我添加了完整生成的 css。重要的 css 规则应该在 css 窗口的末尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T10:45:00.013

解决方案是删除设置为 20px 的水平主体填充。或者为它设置一个百分比值。

# if-statement - 如果控制不起作用使用复选框

> ID：15253199
> 
> 赞同：0
> 
> 时间：2013-03-06T16:47:25.387
> 
> 标签：if-statement, checkbox, event-handling, google-apps-script

我无法处理“复选框处理程序”，这是一个问题，我已经追溯到显然在 if-control 函数中发生的问题。如果您尝试以下修改后的代码，您会看到布尔变量“e.parameter.myCheckBox”产生正确的结果，但是基于此变量的 if-branching-off 不起作用。有人看到这里的错误吗？

非常感谢马丁

```
function ifTest(e) {
  var app = UiApp.createApplication().setTitle('ifTest');
  var panel = app.createVerticalPanel();
  var grid = app.createGrid(3, 3);
  var myCheckBox = app.createCheckBox().setName('myCheckBox').setId('myCheckBox');
  var button =     app.createButton('submit').setId("submit").setWidth("280").setHeight("35");

  grid.setWidget(1, 0, app.createLabel('Check for True').setStyleAttribute("font-size",  "110%"));
  grid.setWidget(1, 1, myCheckBox);
  grid.setWidget(2, 1, button);

  var handler = app.createServerHandler('ifCheck'); 
  var handler = app.createServerClickHandler('ifCheck');
  handler.addCallbackElement(myCheckBox);  
  myCheckBox.setValue(false, false);  

  handler.addCallbackElement(grid);
  button.addClickHandler(handler);

  panel.add(grid);
  app.add(panel);

  ss.show(app);
  return app;
}

function ifCheck(e) {
  var bCBresult = e.parameter.myCheckBox;
  var app = UiApp.getActiveApplication();

  Browser.msgBox(bCBresult);
  if (bCBresult) {    
    Browser.msgBox("bCBresult = true");
  }
  else {
    Browser.msgBox("bCBresult = false");
  };
  return app.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:54:23.783

返回的值`e.parameter.myCheckBox`是字符串，而不是布尔值。（这实际上是所有 e.parameter 值的情况......，它们总是字符串）

所以你的条件是`if (bCBresult=='true') {`

# jquery - 滚动时加载 jquery 对话框

> ID：15253201
> 
> 赞同：1
> 
> 时间：2013-03-06T16:47:28.543
> 
> 标签：jquery, dialog, scrollto

我有以下代码，并且只想在用户滚动超过 1200 像素后才加载对话框。我也试图让 show 变量放慢速度：

```
$(function() {
$( "#dialog" ).dialog({
    autoOpen: true,
    width: 200,
    height: 200,
    show: 'slide',
    hide: 'puff',
});
}); 
```

我正在使用 scrollto 来显示另一个 div，并且它正在工作，因此希望使用相同的功能：

```
$(window).scroll(function() {
if ($(this).scrollTop() > 300) {
    $('.backtotop').fadeIn(500);
} else {
    $('.backtotop').fadeOut();
}
}); 
```

感谢您的帮助，凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:53:18.363

在您的初始代码集中`autoOpen: false`。这将阻止对话框在初始化时打开。然后，您可以`$("#dialog").dialog("open")`使用与第二段代码类似的滚动事件来专门调用。

如果您希望`show`动作更慢，您可以为动画添加其他选项。一个例子是：

```
$(function() {
    $( "#dialog" ).dialog({
        autoOpen: false,
        width: 200,
        height: 200,
        show: {
            effect: 'slide',
            duration: 2000 // 2 second duration
        },
        hide: 'puff'
     });
}); 
```

查看所有可用选项的[对话框 api](http://api.jqueryui.com/dialog/#option-show)。
你可以做两件事让它出现一次：

销毁对话框，或删除事件处理程序。

对于两者，您都可以指定在关闭对话框时执行的函数，如下所示：

```
$(function() {
    $( "#dialog" ).dialog({
        autoOpen: false,
        width: 200,
        height: 200,
        show: {
            effect: 'slide',
            duration: 2000 // 2 second duration
        },
        hide: 'puff',
        close: function () {
            $("#dialog").dialog('destroy'); // this will remove the dialog
        }
     });
}); 
```

相反，如果您希望保留对话框，则可以删除事件处理程序。您将像这样修改滚动事件：

```
$(window).on("scroll.singleDialog", function () {
    if ($(this).scrollTop() > 1400) {
        $("#dialog").dialog("open");
    } else {
        $("#dialog").dialog("close");
    }
}); 
```

然后在关闭函数中删除这样的事件：

```
close : function () {
    $(window).off("scroll.singleDialog");
} 
```

`.singleDialog`只是我正在使用的一个示例命名空间。您可以为您的特定处理程序使用任何您喜欢的名称。您可以查找 jQuery .on() 和 .off() 以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:57:18.910

你可以这样做

```
$(window).scroll(function() {
if ($(this).scrollTop() ==> 1200) {
       $( "#dialog" ).dialog({
         width: 200,
         height: 200,
         show: 'slide',
         hide: 'puff',
     });
}
}); 
```

希望这有帮助..

# ruby-on-rails - Rails 通过集合检索相关数据

> ID：15253202
> 
> 赞同：1
> 
> 时间：2013-03-06T16:47:44.807
> 
> 标签：ruby-on-rails, ruby, activerecord

例如，给定一个`Book`对象，它有几个`Tags`与之关联。我知道我可以轻松检索一本书的所有标签，但我如何检索书籍集合的所有标签。就像一团标签，但只有收藏书籍中的标签，而不是全部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:49:03.497

`book_id`通过s 获取与书籍集合中的 id 匹配的标签。

```
Tag.where(:book_id => book_collection.map(&:id)) 
```

# android - 检查文件夹是否为空（内部存储）

> ID：15253203
> 
> 赞同：2
> 
> 时间：2013-03-06T16:47:46.900
> 
> 标签：android, filesystems, directory

我有后续的麻烦。我的应用程序应该读取文件列表并向用户显示它们的名称。当应用程序第一次启动时，我需要为应用程序创建一个特定的文件夹？那我如何检查它是否为空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:57:47.733

假设您在内部存储中创建了目录，您可以像这样获取目录中子对象的数量

```
File dir = context.getDir("somePath", Context.MODE_PRIVATE);
File[] children = dir.listFiles();
if(children.length > 0)
{
    // the directory is not empty
}
else
{
    // the directory is empty.
} 
```

这只是一个快速示例代码。更好的方法是使用自定义排除 self 和 parent 别名`FileFilter`with `dir.listFiles()`，因为我不确定它们是否会始终从结果列表中排除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:53:35.040

下面的代码将检查一个文件夹是否已经存在，如果不存在，则创建一个，如果创建一个错误，则会警告您：

```
 // check if appfolder is created and if not through an
    // exception
    File path = new File("yourDir");
    if (!path.exists()) {
        if (!path.mkdirs()) {
            try {
                throw new IOException(
                        "Application folder can not be created. Please check if your memory is writable and healthy and then try again.");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return false;
        }
    } else {
        Log.i("app", "directory is: " + path.getPath());
    } 
```

`exists()`检查路径是否存在并`path.exists()`简单地为您创建一个。

# ruby-on-rails - 使用 AJAX 将 Javascript 变量传递给控制器

> ID：15253205
> 
> 赞同：1
> 
> 时间：2013-03-06T16:47:58.807
> 
> 标签：ruby-on-rails, ajax

我无法使用 AJAX 调用的 data 参数将变量传递给我的控制器。我究竟做错了什么？

**显示.html.erb**

```
var parentStepID = 20;

$.ajax({
    url: "/steps/create_branch",
    type: 'GET',
    data: {parent: parentStepID}
}); 
```

**控制器**

```
 def create_branch
    parentStepID = params[:parent]
    logger.debug("parentStepID: #{parentStepID}")
    respond_to do |format|
      format.js
    end
  end 
```

记录器似乎没有得到 parentStepID：

```
Started GET "/projects/20/steps/create_branch" for 127.0.0.1 at 2013-03-06 11:56:44 -0500
Processing by StepsController#create_branch as HTML
  Parameters: {"project_id"=>"20"}
  Project Load (0.1ms)  SELECT "projects".* FROM "projects" WHERE "projects"."id" = ? LIMIT 1  [["id", "20"]]
####################################################################
parentStepID: 
  Rendered steps/create_branch.js.erb (0.1ms)
Completed 200 OK in 16ms (Views: 10.6ms | ActiveRecord: 0.1ms) 
```

**浏览器控制台：**

```
20 0:412
/projects/20/steps/create_branch 0:413 
```

另外，我相信 AJAX 请求工作正常；我在我的步骤视图文件夹中创建了一个名为“create_branch.js.erb”的文件，并放入了一个成功调用的警报。

# python - 维护 dajaxice 调用可以使用的持久串行连接？

> ID：15253208
> 
> 赞同：0
> 
> 时间：2013-03-06T16:48:07.277
> 
> 标签：python, django, dajaxice

我有一个基本的 django 设置正在运行，目前正在实现 dajaxice 调用以将一些数据写入串行连接（RainbowDuino 在另一端）。

以下代码有效，但是当您建立与 Arduino 的串行连接时，您必须等待在 Arduino 重置时向其写入数据。

```
from django.utils import simplejson
from dajaxice.decorators import dajaxice_register
import time, serial

def serialWrite(msg):
    try:
        ser = serial.Serial('/dev/ttyUSB0', 9600)
        time.sleep(1.5) #wait for arduino to reset
        ser.write(msg)
        return "Running Animation"
    except:
        return "Failed to communicate with cube"

@dajaxice_register
def animate(request, data):
    msg = serialWrite(str(data))
    return simplejson.dumps({'message':msg}) 
```

我对 python 和 django 的所有东西都很陌生，所以我不确定如何维护一个可以在这个环境中使用串行连接的持久对象。从我自己的阅读和测试中，我可以看到仅在收到相应的按钮单击时才调用 dajaxice 注册方法。

这是我可能使用我的应用程序视图来实例化串行连接的情况，如果是这样，我如何与 dajaxice 调用共享连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:01:11.480

如果您的运行时环境很简单，中间件可能是一种选择。

```
// middleware/__init__.py
class ArduinoMiddleware:

    def __init__(self):
        self.serial = serial.Serial('/dev/ttyUSB0', 9600)
        time.sleep(1.5)

    def process_request(self, request):
        request.serialWrite = self.serialWrite

    def serialWrite(self, msg):
        try:
            self.serial.write(msg)
            return "Running Animation"
        except:
            return "Failed to communicate with cube"

// ajax.py
@dajaxice_register
def animate(request, data):
    msg = request.serialWrite(str(data))
    return simplejson.dumps({'message':msg})

// settings.py
...
MIDDLEWARE_CLASSES = (
  'middleware.ArduinoMiddleware',
  ...
) 
```

未经测试，如果您在多线程环境（如`manage.py runserver`）中运行，可能需要锁定。

# php - 空间 NSURL 连接

> ID：15253209
> 
> 赞同：0
> 
> 时间：2013-03-06T16:48:07.527
> 
> 标签：php, iphone, ios, xcode, nsurlconnection

我试图有一个名称字段，人们可以在那里输入名称，它将发送到一个 php 页面。

我已经用这个代码在没有空格的情况下工作了......

```
- (IBAction)Submit:(id)sender {

    NSString *strURL=[NSString stringWithFormat:@"http://www.bigwavemedia.co.uk/ios/contact.php?name=%@", nameField.text];

    NSURL *url=[NSURL URLWithString:strURL];
    self.request=[NSURLRequest requestWithURL:url];

    self.nsCon=[[NSURLConnection alloc] initWithRequest:self.request delegate:self];

    NSLog(@"out put = %@", self.request);
} 
```

但是一旦我使用空间加法器修复它就不会被我的 php 页面拾取，尽管日志说它正在工作。

![在此处输入图像描述](../Images/fd1e83616e1425237d6e9430cc701252.png)

```
- (IBAction)Submit:(id)sender {

    NSString *strURL=[NSString stringWithFormat:@"http://www.bigwavemedia.co.uk/ios/contact.php?name=", nameField.text];

    strURL = [strURL stringByAppendingString:nameField.text];
    strURL = [strURL stringByAppendingString:@"'"];
    strURL = [strURL stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

    NSURL *url=[NSURL URLWithString:strURL];
    self.request=[NSURLRequest requestWithURL:url];

    self.nsCon=[[NSURLConnection alloc] initWithRequest:self.request delegate:self];

    NSLog(@"out put = %@", self.request);
} 
```

我是否遇到了语法错误，或者以错误的方式使用此方法？

我的 .h 文件

```
#import <UIKit/UIKit.h>

@interface ContactViewController : UIViewController <UITextFieldDelegate, UITextViewDelegate, NSURLConnectionDataDelegate>{
    IBOutlet UITextField *nameField;
}
- (IBAction)Submit:(id)sender;
@property (nonatomic, retain) IBOutlet UITextField *nameField;
@property (strong) NSURLConnection *nsCon;
@property (strong) NSURLConnection *request;
@property (strong) NSURLConnection *receivedData;

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:51:40.523

您需要`stringByAddingPercentEscapesUsingEncoding`在提出请求之前使用。

```
NSURL *url = [NSURL URLWithString:
                 [[str stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]        
                 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]]; 
```

对于您的代码，请尝试此操作。

```
- (IBAction)Submit:(id)sender {

    NSString *strURL=[NSString stringWithFormat:@"http://www.bigwavemedia.co.uk/ios/contact.php?name=%@", nameField.text];

    NSURL *url = [NSURL URLWithString:
                     [[strURL stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]        
                     stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]];

    self.request=[NSURLRequest requestWithURL:url];

    self.nsCon=[[NSURLConnection alloc] initWithRequest:self.request delegate:self];

    NSLog(@"out put = %@", self.request);
} 
```

# excel - Apache poi setformula 不适用于 SE

> ID：15253212
> 
> 赞同：2
> 
> 时间：2013-03-06T16:48:12.313
> 
> 标签：excel, apache-poi

我正在尝试在带有 POI 的 XSSFCell 中设置公式。

```
Cell.setFormula("SE(D87=0; ""; D80/D87)"); 
```

错误是：

> 名称“SE”在当前工作簿中完全未知。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:54:39.460

看起来您正在尝试创建一个`IF`公式。我发现[这个](http://wwwhome.ewi.utwente.nl/~trieschn/excel/excel.html)关于 Excel 公式翻译成不同语言的页面，我发现英文公式名称`IF`翻译成`SE`几种语言。

我不相信 Apache POI 支持除英文名称之外的公式名称。试试英文名。您可能需要也可能不需要用逗号替换分号；我不确定 Apache POI 是否考虑到这一点。

```
cell.setCellFormula("IF(D87=0, \"\", D80/D87)"); 
```

# cordova - 如何防止 PhoneGap 中的键盘隐藏？

> ID：15253218
> 
> 赞同：3
> 
> 时间：2013-03-06T16:48:23.903
> 
> 标签：cordova, keyboard

我有一个文本字段和一个按钮。默认情况下，当用户输入文本并点击当前按钮时，键盘会向下滑动（隐藏）。

我希望键盘保持向上而不是向下，因为用户应该能够在文本字段中输入大部分文本并再次点击发送。我不希望键盘上下移动。

如何更改 PhoneGap 2.0.0 中键盘的默认行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T07:42:31.270

您应该能够通过在文本输入元素上聚焦/模糊来在任何平台上显示/隐藏键盘，即[假设 jQuery]：

```
 // To focus on your input and show the keyboard
 $('input#my_input_id').focus();

  // To blur on your input and hide the keyboard
  $('input#my_input_id').blur(); 
```

这就是我在 phonegap 构建 [Android 应用程序] 中尝试过的并且对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T08:12:30.133

您必须始终显示键盘并告诉用户在操作完成后关闭它。

```
InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
```

inputManager.toggleSoftInput (InputMethodManager.SHOW_FORCED, InputMethodManager.HIDE_IMPLICIT_ONLY);

在 Activity 的 onCreate() 方法中尝试此代码。如果用户按下键盘上的关闭按钮或后退按钮，它将关闭它。完成这些操作后，您可以从代码中关闭键盘。

# javascript - 使用自己的需求配置按需加载 AMD 模块

> ID：15253220
> 
> 赞同：1
> 
> 时间：2013-03-06T16:48:28.713
> 
> 标签：javascript, requirejs, amd

我有一个 shell 应用程序，它有一个 require.config 指定一些依赖项/垫片等。

shell 可以加载包含需要自己的 require.config 的子模块的包，但我无法确定将加载哪些模块或何时加载。

加载任何子模块时，我需要为特定包加载 require.config 。

IE：

```
Shell
Shell.config
--->Package1
--->Package1-config
------>Module1
------>Module2 
```

shell 可以打开 Module1 或 Module2，我希望加载配置以指定模块路径/垫片等

我似乎可以通过在我的模块定义上方添加 require.config 来做到这一点，但是我必须将它包含在每个模块中。

有没有办法我可以得到它，所以它加载一次包配置，然后后续模块不需要再次加载它？

谢谢

# ipc - 跨 c#、c++ 和可能更多语言的进程间发布/订阅模型

> ID：15253223
> 
> 赞同：0
> 
> 时间：2013-03-06T16:48:38.380
> 
> 标签：ipc, message-queue, publish-subscribe

我想制作一个具有多个通信进程的系统。

主进程将引发事件。将有不同的事件，每个事件都包含结构化数据。几个从属进程将订阅事件、接收数据并调用适当的处理程序。我的情况有两个考虑。

1.  我不担心安全性，因为不会有 3rd 方服务。
2.  我担心性能。

人们建议在这种情况下使用像零 MQ 这样的消息队列。我对它应该实现的方式有点困惑。据我了解，ZeroMQ 只能发送\接收原始字符串数据。

我是否应该在发布者端将数据打包到字符串（例如 json 或 xml）中，在订阅者端手动解包数据并仅过滤必要的消息？

如果有更好的方法来解决我的问题，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T03:30:52.393

对于您描述的场景，我会使用消息传递提供程序。我看到的优点是

1) 不必编写代码来向订阅者传递消息。那让我专注于我的业务逻辑和数据格式。我可以决定数据格式（XML/JSON/任何适合我的要求并被订阅者理解的格式）并发布消息。

2) 如果出现需求，可以在不添加/修改任何代码的情况下增加订阅者的数量。

3) 订阅者可以移动到不同的机器上而不影响解决方案。

4）订阅者也可以离线，主/发布者仍然可以发布消息。订阅者可以稍后进来并调用所需的处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:42:58.240

这些是我看到的选项：

1.  如果只关心性能，而事件的持久性和持久性不是要求的一部分，那么将数据以自定义协议结构封装在一个字节数组中，并使用套接字进行进程间通信。但请注意 - 自定义字节数组结构在可扩展性和可维护性方面的成本很高。另一种选择是选择 JSON 作为数据交换格式，这种格式相对更具可读性。
2.  如果事件数据的持久性和持久性是要求的一部分，那么可以利用面向消息的中间件的好处。声明式同步等功能是 MOM 可以带来的其他一些好处。

# c# - 如何在 WPF 中从 TabControl 更改 Tab 而不违反 MVVM 模式

> ID：15253225
> 
> 赞同：8
> 
> 时间：2013-03-06T16:48:44.167
> 
> 标签：c#, wpf, design-patterns, mvvm, mvvm-light

我的 WPF Windows 包含一个 TabControl，它在不同的选项卡上显示内容。单击下面的按钮通过 ICommand 接口/绑定执行方法。被调用的方法生成文本，该文本旨在显示在第二个选项卡中。

![应用模型](../Images/1c8550d3c6992b3fa78a3a78567af57b.png)

如何在不违反 MVVM 模式的情况下切换到按钮单击的第二个选项卡？

我试图将 TabItem.IsSelected 属性绑定到我的 ViewModel 中的某个东西，但我也想使用其他选项卡 (tab1)。

有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T17:05:48.623

我自己发现的。

关键是双向绑定。单击按钮时，它将属性设置为`DisplayXamlTab`true。该`IsSelected`属性绑定到此变量。如果单击另一个选项卡，则绑定会将 DisplayXamlTab 属性设置为 false。

注意：`UpdateSourceTrigger=PropertyChanged`也很重要

代码如下：

XAML：

```
 <TabItem Header="XAML" IsSelected="{Binding DisplayXamlTab, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <Grid Background="#FFE5E5E5">
                <TextBox x:Name="TxtXamlOutput" IsReadOnly="True" Text="{Binding XamlText, Mode=TwoWay, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" AcceptsReturn="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Visible"/>
            </Grid>
        </TabItem> 
```

C# 属性：

```
private bool displayXamlTab;
public bool DisplayXamlTab
{
    get { return this.displayXamlTab; }
    set
    {
        this.displayXamlTab = value;
        this.RaisePropertyChanged("DisplayXamlTab");
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-06T17:00:23.467

如果您采用 MVVM 方式，您将在后面的代码中创建两个依赖属性：

*   `ObservableCollection<ItemType> Items;`
*   `ItemType MySelectedItem;`

然后，将 TabControl ItemsSource 属性绑定到**Items**并将 SelectedItem 属性绑定到**MySelectedItem**

```
 <TabControl ItemsSource="{Binding Items}"
        SelectedItem="{Binding MySelectedItem, Mode=TwoWay}">
<TabControl.ItemTemplate>
    <DataTemplate>
        <... here goes the UI to display ItemType ... >
    </DataTemplate>
  </TabControl.ItemTemplate>
</TabControl> 
```

当您想要更改选定的选项卡时，只需更新 MySelectedItem 依赖属性

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-06T21:11:45.207

尽管这个问题已经相当老了并且已经得到了很好的回答，但我想我会添加这个额外的答案来演示另一种`TabItem`更改`TabControl`. 如果每个 都有一个视图模型`TabItem`，那么在其中有一个`IsSelected`属性来确定它是否被选中会很有帮助。可以使用以下属性将此`IsSelected`属性与属性数据绑定：`TabItem.IsSelected``ItemContainerStyle`

```
<TabControl ItemsSource="{Binding MenuItems}" TabStripPlacement="Top">
    <TabControl.ItemTemplate>
        <DataTemplate DataType="{x:Type ControlViewModels:MenuItemViewModel}"> 
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding ImageSource}" Margin="0,0,10,0" />
                <TextBlock Text="{Binding HeaderText}" FontSize="16" />
            </StackPanel>
        </DataTemplate>
    </TabControl.ItemTemplate>
    <TabControl.ContentTemplate>
        <DataTemplate DataType="{x:Type ControlViewModels:MenuItemViewModel}">
            <ContentControl Content="{Binding ViewModel}" />
        </DataTemplate>
    </TabControl.ContentTemplate>
    <TabControl.ItemContainerStyle>
        <Style TargetType="{x:Type TabItem}">
            <Setter Property="IsSelected" Value="{Binding IsSelected}" />
        </Style>
    </TabControl.ItemContainerStyle>
</TabControl> 
```

您现在可以`TabItem`像这样更改从父视图模型中选择的内容：

```
MenuItems[0].IsSelected = true; 
```

请注意，由于此属性是绑定到该`TabItem.IsSelected`属性的数据，因此调用此...：

```
MenuItems[1].IsSelected = true; 
```

...实际上还会自动将`MenuItems[0].IsSelected`属性设置为`false`. 因此，如果您正在使用的视图模型的`IsSelected`属性设置为 true，那么您可以确保在`TabControl`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T16:55:03.427

您可以在视图模型和属性之间创建绑定`TabControl.SelectedIndex`- 即，0 选择第一个`TabItem`，1 选择第二个，等等。

```
<TabControl DataContext="..." SelectedIndex="{Binding SomeVmProperty}" ... 
```

（或者，根据您的设置方式，您可以绑定`SelectedItem`...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T16:53:09.507

您可能希望使用某种“[事件聚合器](http://www.mher.info/blog/?p=152)”模式（即 MVVM Light 中的[Messenger](http://mvvmlight.codeplex.com/SourceControl/changeset/view/cf8d07c2ec3f#GalaSoft.MvvmLight/GalaSoft.MvvmLight%20%28NET35%29/Messaging/Messenger.cs)类）来广播某种“导航”消息。您的视图 - TabControl - 可以侦听特定消息，并在收到消息时导航到 Tab2。

或者，您可以将 TabControl 的“ [SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.tabcontrol.selecteditem%28v=vs.95%29.aspx) ”属性绑定到您的 ViewModel，然后简单地`CurrentTab = MySecondTabViewModel`从您的 VM 中调用。这是@HighPoint 在对 OP 的评论中推荐的[方法](https://stackoverflow.com/questions/15209870/dynamically-updating-tabcontrol-content-at-runtime/15210593#15210593)，但我不是粉丝；见下文。这种方法的另一个警告是您需要熟悉[DataTemplates](http://msdn.microsoft.com/en-us/library/ms742521.aspx)，因为您需要将视图映射到您显示的每个 ViewModel。

我个人喜欢第一种方法，因为我不认为它是 ViewModel 处理选项卡导航的“职责”。如果您只是在 ViewModel 中的数据更改时提醒您的 View，您可以让 View 决定是否要更改选项卡。

# java - 控制多线程

> ID：15253226
> 
> 赞同：0
> 
> 时间：2013-03-06T16:48:45.967
> 
> 标签：java

我有 24 个元素的数组，我需要创建 10 个线程和一个控制器线程，控制器线程的任务是允许一些线程访问数组并根据特定标准阻止其中一些线程。主要问题我们能否用一个控制器线程控制所有线程，我们能否确保可以访问数组的线程在访问第二个元素之前完成访问数组中的第一个元素。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:53:48.123

在我看来，您正在寻找[ReadWriteLock](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)。

我建议您为要独立控制的每组元素创建一个锁，并将它们保存在控制器中。所有非控制器线程都可以获取读锁，而控制器通过写锁控制访问。

我建议您使用的主要功能`ReadWriteLocks`是能够非常快速地从多个线程中获取和释放读锁，但尝试写锁将等待所有读锁被释放，然后阻塞所有新的读锁，直到写锁被释放.

# vb.net - 查询/更新 MS 访问记录

> ID：15253227
> 
> 赞同：0
> 
> 时间：2013-03-06T16:48:48.383
> 
> 标签：vb.net, oledb

我正在尝试将项目填充到数据网格中，然后使用 2 个按钮（一个加载，一个将保存）和表单上的数据网格将它们更新回数据库。我在更新时不断遇到“查询表达式中的语法错误（缺少运算符）”，我不知道为什么。我的另一个问题是我的 DataAdapter 和 Dataset 需要在内存中的哪个位置进行标注？下课？

```
 'this loads my data from db into datagrid

    Dim con As New OleDb.OleDbConnection
    Dim sql As String

    con.ConnectionString = "Provider=Microsoft.jet.oledb.4.0;data source=dbsrc.mdb"

    con.Open()
    sql = "SELECT * from [Employee Assignments]"
    da = New OleDb.OleDbDataAdapter(sql, con)
    da.Fill(ds, "Assignments")

    con.Close()

    DataGridView1.DataSource = ds.Tables("Assignments") 
```

以下代码应更新我的数据库以反映在 datagridview 中所做的更改

```
 'this will eventually update the datagrid back into the db

    Dim cb As New OleDb.OleDbCommandBuilder(da)
    Dim con As New OleDb.OleDbConnection

    'Dim sql As String
    con.ConnectionString = "Provider=Microsoft.jet.oledb.4.0;data source=dbsrc.mdb"

    con.Open()

    da.Update(ds, "Assignments")

    con.Close()

    DataGridView1.DataSource = ds.Tables("Assignments") 
```

我在 msdn 上阅读了这篇文章 - [http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx) - 但它似乎没有多大帮助，我很困惑，但我相信我的问题是没有识别正确的数据集并将其传递回数据库。我应该如何处理我使用 DataAdapter 提取、修改然后发送回数据库的数据集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:55:24.660

当表的名称中包含空格时，您应该通知 CommandBuilder 设置[QuotePrefix](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommandbuilder.quoteprefix.aspx)和 QuoteSuffix 属性以避免错误

```
cb.QuotePrefix = "["
cb.QuoteSuffix = "]" 
```

这两个的默认值是一个空字符串，因此，当您尝试将更改写回数据库时，您会收到语法错误。

# html - 以固定宽度和浮动垂直对齐 div 中的文本

> ID：15253228
> 
> 赞同：1
> 
> 时间：2013-03-06T16:48:55.280
> 
> 标签：html, css, css-float

我有一种情况，我需要在具有以下内容的 div 内垂直对齐文本：

1.  固定宽度
2.  多行文本
3.  应用了一个浮点数

下面是一个使用 display:table-cell; 的例子。这不起作用，因为没有浮动，我需要：

```
CSS:

.noFloat {
    width:200px; 
    height:200px; 
    border:1px solid black; 
    vertical-align:middle; 
    display:table-cell;
}

HTML:

<div class="noFloat">
    Here is some content for my div. Here is some more content for my div.
</div> 
```

下面是一个使用 line-height 的例子：; 这不起作用，因为有多行文本最终变得一团糟：

```
CSS:

.lineHeight {
    width:200px; 
    height:200px; 
    line-height: 200px;
    border:1px solid black;
}

HTML:

<div class="lineHeight">
    Here is some content for my div. Here is some more content for my div.
</div> 
```

下面是一个使用 display:table-cell; 的例子。由于浮动而无法工作的浮动，它将所有内容对齐在顶部：

```
CSS:

.withFloat {
    width:200px; 
    height:200px; 
    border:1px solid black; 
    vertical-align:middle; 
    display:table-cell;
    float: left;
}

HTML:

<div class="withFloat">
    Here is some content for my div. Here is some more content for my div.
</div> 
```

以下是所有 3 个示例：http: [//jsfiddle.net/BJGh5/3/](http://jsfiddle.net/BJGh5/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:02:28.613

如果我理解正确，您将需要设置一个容器 div。一个垂直对齐，一个浮动。

# vba - 为什么 Excel 会话必须在 VBA 错误时从 Windows 任务管理器中终止

> ID：15253238
> 
> 赞同：2
> 
> 时间：2013-03-06T16:49:19.223
> 
> 标签：vba, excel

我有一本带有 VBA 的 excel 书。触发错误时，我会尝试关闭整个 Excel 应用程序。但我发现 Excel 会话仍在 Windows 任务管理器中运行。因此，我必须先终止会话，然后才能正确重新启动应用程序并运行 VBA 程序。

如何处理错误，以便即使出现错误，我仍然可以运行 VBA 程序，而无需终止并重新启动 Excel 本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:44:14.810

在您的子/功能顶部写

```
'ErrHandler is a label we put at the bottom of our code section.
On Error Goto ErrHandler 
```

并在函数/子的底部

```
Exit Function

ErrHandler:

'Do something here if there is an error

'For Example
Msgbox(Err.Description)

End Function 
```

或者

```
Exit Sub

ErrHandler:

'Do something here if there is an error

'For Example
Msgbox(Err.Description)

End Sub 
```

注意一定要放Exit语句，否则会在执行结束时进入代码块

err 对象用于获取有关子/函数的错误部分中的错误的信息。您可以根据错误类型使用它来执行不同的操作。

例如。

```
Select Case err.Number

Case 13
    Msgbox("Type Mismatch, macro will continue")

    'Go back to the point of the error and resume code execution..
    Resume Next

Case Else

    Msgbox("A fatal error has occurred. Macro will end " & err.Description)

End Select 
```

捕获特定错误代码的好参考。

[http://www.mcoffice.com/faq/edi/errors.html](http://www.mcoffice.com/faq/edi/errors.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:39:53.860

如果您通过以下几行赋予用户对应用程序的控制权

```
xlApp.Visible = True
xlApp.UserControl = True 
```

它不会消失，否则`End`子或函数应该释放错误的进程

# android - Android：我想在一次只能看到一个单元格的网格单元格之间滑动

> ID：15253240
> 
> 赞同：0
> 
> 时间：2013-03-06T16:49:21.473
> 
> 标签：android, listview, gridview, android-listview, android-gridview

我希望网格的单个单元格占据我的整个屏幕并向上/向下/向左/向右滑动以访问其他单元格（不流畅，但切换到下一个单元格）。您认为实现这一点的好方法是什么？

我已经在包含 Horizo​​ntalListView 的 GridView 和 ListView 中部分实现了这一点，并且正在考虑使用 TableLayout。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:03:16.127

我将从[github 上的 DirectionalViewPager](https://github.com/JakeWharton/Android-DirectionalViewPager/)开始并尝试对其进行修改，以便它始终可以向任何方向滑动，而不必调用`setOrientation(DirectionalViewPager.VERTICAL)`，`setOrientation(DirectionalViewPager.HORIZONTAL)`我不知道您需要修改多少，但它是大多数在那里，我认为改变应该是相对直接的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:16:15.717

你看看[这个](http://developer.android.com/training/implementing-navigation/lateral.html)怎么样。水平分页（滑动视图）

# java - 菜单充气机崩溃，如何解决？

> ID：15253242
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:49:23.080
> 
> 标签：java, android, logcat

我正在编写一个应用程序，在我的主菜单类中有一个菜单 Inflater，我在这个菜单中有三个选项，即 Exit、AboutUs 和 Preferences。退出菜单项有效，但是当我触摸其他两个应用程序崩溃时。

任何修复它的帮助将不胜感激，我已经查看了清单，对我来说一切看起来都是正确的，并且所有类都已定义。

MenuInflater 代码：-

```
@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.main_menu, menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()){
        case R.id.aboutUs:
            Intent i = new Intent(MainMenu.this, AboutUs.class);
            startActivity(i);
            break;
        case R.id.prefs:
            Intent p = new Intent(MainMenu.this, Prefs.class);
            startActivity(p);
            break;
        case R.id.exit:
            finish();
            break;
    }
    return false;
} 
```

每个项目的类：-

```
public class AboutUs extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);
    }
}

public class Prefs extends PreferenceActivity{

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }
} 
```

日志猫：-

```
03-06 16:39:21.040: E/AndroidRuntime(23894): FATAL EXCEPTION: main
03-06 16:39:21.040: E/AndroidRuntime(23894): android.content.ActivityNotFoundException:  Unable to find explicit activity class {coursework.android.travelapp/coursework.android.travelapp.AboutUs}; have you declared this   activity in your AndroidManifest.xml?
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1420)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.Activity.startActivityForResult(Activity.java:3446)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at  android.app.Activity.startActivityForResult(Activity.java:3407)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.Activity.startActivity(Activity.java:3617)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.Activity.startActivity(Activity.java:3585)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at coursework.android.travelapp.MainMenu.onOptionsItemSelected(MainMenu.java:63)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.Activity.onMenuItemSelected(Activity.java:2629)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:1047)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:180)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.widget.AdapterView.performItemClick(AdapterView.java:301)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.widget.AbsListView.performItemClick(AbsListView.java:1276)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:3067)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.widget.AbsListView$1.run(AbsListView.java:3963)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.os.Handler.handleCallback(Handler.java:615)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.os.Looper.loop(Looper.java:137)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at java.lang.reflect.Method.invokeNative(Native Method)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at java.lang.reflect.Method.invoke(Method.java:511)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-06 16:39:21.040: E/AndroidRuntime(23894):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:50:20.533

> .ActivityNotFoundException：找不到明确的活动类

当您未在 androidmanifest.xml 中定义活动时，会发生此异常

像它一样定义它。

```
<activity android:name=".AboutUs" android:label="@string/app_name"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:50:23.600

从您的 LogCat 中：

```
android.content.ActivityNotFoundException:  Unable to find explicit activity class 
    {coursework.android.travelapp/coursework.android.travelapp.AboutUs}; 
    have you declared this activity in your AndroidManifest.xml? 
```

你？我推荐它。

# ios - UIApplicationDidBecomeActiveNotification 和 setRightBarButtonItem:animated:

> ID：15253243
> 
> 赞同：2
> 
> 时间：2013-03-06T16:49:23.230
> 
> 标签：ios, objective-c, cocoa-touch, uinavigationbar, uiapplication

**TL;DR 更新：**基本上我需要延迟我的代码，直到 iOS 完成其“应用程序启动”动画。

当我的应用程序处于活动状态时，我想为导航栏的内容制作动画。在我的控制器中，我订阅`UIApplicationDidBecomeActiveNotification`并用于`setRightBarButtonItem:animated:`执行更改。

问题是变化不是动画的。

我做了一些实验，发现如果我稍等一下 ( `[NSThread sleepForTimeInterval:.3]`)，它的动画就没有任何问题。

这是一个演示问题的简单视图控制器：

```
@interface TESTViewController ()

@property (strong, nonatomic) IBOutlet UINavigationBar *navigationBar;

@end

@implementation TESTViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    UINavigationItem *item = [UINavigationItem new];
    UIBarButtonItem *oldItem = [[UIBarButtonItem alloc] initWithTitle:@"Old" style:UIBarButtonItemStyleBordered target:nil action:NULL];
    [item setRightBarButtonItem:oldItem];
    [[self navigationBar] setItems:@[item] animated:NO];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidBecomeActiveNotificationAction:) name:UIApplicationDidBecomeActiveNotification object:nil];
}

- (void)applicationDidBecomeActiveNotificationAction:(NSNotification *)notification
{
    // [NSThread sleepForTimeInterval:.3];
    UIBarButtonItem *newItem = [[UIBarButtonItem alloc] initWithTitle:@"New" style:UIBarButtonItemStyleBordered target:nil action:NULL];
    [[[self navigationBar] items][0] setRightBarButtonItem:newItem animated:YES];
}

@end 
```

我想找到一个比阻塞线程或在固定延迟后执行更改更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T21:38:34.810

只需`dispatch_after`在主队列上使用，而不是调用
`+[NSThread sleepForTimeInterval:]`类方法。

将您的动画作为一个块传递，它应该可以完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:23:19.713

尝试转移 `[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidBecomeActiveNotificationAction:) name:UIApplicationDidBecomeActiveNotification object:nil];` 到`viewDidLoad:`方法。我认为对象`UIApplicationDidBecomeActiveNotification`在被触发时没有为“”注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:16:57.773

您是否尝试过执行SelectorAfterDelay？

尝试这样的事情：

```
- (void)applicationDidBecomeActiveNotificationAction:(NSNotification *)notification{
     [self performSelector:@selector(yourAnimationAction) withObject:nil afterDelay:1];
}

- (void)yourAnimationAction{
    //Set your NavAnimation here
    [self.navigationItem setRightBarButtonItem:theItem animated:TRUE];
} 
```

只需更改延迟以适合您的应用程序唤醒延迟...也许这会生效？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T21:59:15.123

发布通知时，我不使用您的方法。

我用：

`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changeButton) name:@"changeButton" object:nil];` 在接收端。

在发帖结束时，我打电话给 `[[NSNotificationCenter defaultCenter] postNotificationName:@"changeButton" object:nil];`

尝试将您的代码移动到该方法：

`-(void)changeButton{`

 `UIBarButtonItem *newItem = [[UIBarButtonItem alloc] initWithTitle:@"New" style:UIBarButtonItemStyleBordered target:nil action:NULL];

```
[[[self navigationBar] items][0] setRightBarButtonItem:newItem animated:YES]; 
```` 

`}`

希望这可以帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T19:43:15.723

只需`viewDidAppear:`从您的`applicationDidBecomeActiveNotificationAction:`方法中手动调用。将您的动画代码放在`viewDidAppear:`方法中。希望这可以帮助。

# android - 片段菜单项在滑动时未正确显示，但会在选项卡选择中显示 - 无菜单 xml

> ID：15253245
> 
> 赞同：1
> 
> 时间：2013-03-06T16:49:25.543
> 
> 标签：android, menu, android-fragments, actionbarsherlock

我有一个包含 5 个片段的活动。我正在使用`FragmentPageAdapter`支持库中的一个来实现刷卡。

Fragment4 需要在操作栏中添加一个额外的菜单项。只有当用户选择选项卡并且不滑动到它时，我才能正常工作。如果用户滑动到选项卡，附加菜单项不会一直显示。

本质上，当我滑动到 Fragment3 时，菜单项会显示（因为 Fragment4 的 onCreateView 被调用并存储到内存中），当我滑动到 Fragment4（打算拥有菜单项的那个）时它会保留，然后当我滑动到时再次消失Fragment5（它应该这样做）。但是，除非我向后滑动到 Fragment2 然后继续前进，否则它会一直消失。唯一的例外是，如果我在至少 2 个片段之外并选择选项卡，那么它将正确显示 Fragment4 的菜单项。

此外，如果它显示来自 Fragment3 的菜单项，因为它在执行时调用 onCreate，为什么在滑动到 Fragment5 时它会消失？据我了解，FragmentPageAdapter 一次“加载”了 3 个片段以启用平滑滑动功能。

请看下面的代码。

```
public View onCreateView(){
    ..
    setHasOptionsMenu(true);
    ..
    return view;
}

public void onCreateOptionsMenu(Menu menu, MenuInflater inflater){
    SubMenu sub = menu.addSubMenu("Options");
    sub.add(0, EMAIL, 0, "Email");
    sub.add(0, FILTER, 0, "Filter");
    sub.add(0, SAVE, 0, "Save");
    sub.getItem().setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    setMenuVisibility(true);
} 
```

如果我添加`setMenuVisibility(true)`到`onActivityCreated`菜单将显示上一个片段何时进入视图，因为从技术上讲，这是在`MyFragment.onActivityCreated`调用时，所以菜单显示正确的选项卡和上一个选项卡。但是，如果我滑过 MyFragment 选项卡，菜单会消失，并且在滑回 MyFragment 选项卡或任何其他选项卡时不会重新出现。关于`onCreateOptionsMenu`状态的文档

> “这只会调用一次，第一次显示选项菜单。要在每次显示时更新菜单，请参阅 onPrepareOptionsMenu(Menu)。” >

所以我尝试添加

```
public void onPrepareOptionsMenu(Menu menu){
   setMenuVisibility(true);
} 
```

但它根本没有效果。我显然在这里遗漏了一些东西......这应该可以

编辑：好的，所以我对 ActionBarSherlock 的研究越多，这种行为似乎只能使用该库。它似乎不是`FragmentPagerAdapter`任何版本的 Android 的“本机”操作栏/行为的一部分。谁能帮我确认一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T17:18:27.210

我遇到了与您相同的问题，菜单图标确实显示在选项卡选择上，但没有显示在滑动上。这个解决方案对我有用：

[点击](https://github.com/JakeWharton/ActionBarSherlock/issues/351#issuecomment-6901689) 查看 johanols 评论。

你的另一个问题对我来说似乎很奇怪。为什么不加载所有 5 个片段？

```
mViewPager.setOffscreenPageLimit(5); 
```

希望能帮助到你 ：）

# php - 根据用户的访问级别（用户组）在登录后重定向用户

> ID：15253246
> 
> 赞同：0
> 
> 时间：2013-03-06T16:49:31.593
> 
> 标签：php, html, mysql, sql, login

这是我的第一篇文章，所以请原谅新手喜欢评论。我对 PHP 没意见，但我似乎在这里遗漏了一些东西（显然）。我希望在用户登录后根据分配给他们的用户组重定向用户。所以会员会去会员区，admin到admin区，最后superadmin到superadmin区。该代码最近正在运行，但在我为网页顶部的链接添加 Javascript 下拉菜单后似乎停止了。我已将问题缩小到这个片段：

```
 if($count==1){

        // Register $myusername, $mypassword and redirect to file "login_success.php"
        $_SESSION['myusername'] = $myusername;
        $_SESSION['mypassword'] = $mypassword;
        $_SESSION['myusergroup'] = $myusergroup;
            if($usergroup == "SuperAdmin"){
            header("location:superadmin_login_success.php");
            exit();
            }
            elseif($usergroup == "Admin"){
            header("location:admin_login_success.php");
            exit();
            }
            elseif($usergroup == "Member"){
            header("location:login_success.php");
            exit();
            }
    } 
```

计数表示从 SQL 查询返回的结果。该查询从表中选择所有字段，其中用户名和密码字段等于我之前在登录时提交的表单。我所有的登录 PHP 代码都位于同一个网页上，并且 PHP 开头的 if 语句防止在表单尚未提交时执行代码。任何人都可以发现这个片段或我的逻辑有什么问题吗？我一直在关注和阅读处于类似情况的人的问题，但我仍然无处可去。

如您所见，我正在使用 header 函数进行重定向，并且在调用 header 之前将输出打印到页面上时，函数存在问题。我不完全确定问题的具体细节，但如果有人可以澄清并举例说明，那么我将不胜感激。单独编写这些脚本然后在需要时包含它们是否合适且正确？我也一直在思考这个问题。

非常感谢

里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:52:28.877

确保在发送之前没有输出`header()`。即使是很小的空白也会破坏您的重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:54:44.630

$myusergroup 和 $usergroup 有什么区别？您的 if 语句检查 $usergroup。那是他们检查的设置还是应该是 $myusergroup？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:55:39.790

您可以使用`ob_start()`打开输出缓冲。看看 PHP 的[输出控制函数](http://www.php.net/manual/en/ref.outcontrol.php)。

***提示：**使用`switch()`而不是几个`if()`语句*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:56:15.907

我注意到您将 $myusergroup 分配给您的会话变量，但在您的 if 语句中您只调用 $usergroup。$usergroup 是否在其他地方使用？

# ruby - 在 Ruby 1.9 中使用 CSV 拆分输出数据

> ID：15253251
> 
> 赞同：0
> 
> 时间：2013-03-06T16:49:43.287
> 
> 标签：ruby

我有一个 csv 文件，其中包含 7000 多条记录，我处理/操作并导出到新的 csv 文件。我这样做没有问题，一切都按预期工作。

我想将过程更改为将输出分成多个文件的位置。因此，不是将所有 7000+ 行写入新的 csv 文件，而是将前 1000 行写入 newexport1.csv，将接下来的 1000 行写入 newexport2.csv，直到到达数据的末尾。

在 Ruby 1.9 中使用 CSV 是否有简单的方法来做到这一点？

我目前的写法：

```
CSV.open("#{PATH_TO_EXPORT_FILE}/newexport.csv", "w+", :col_sep => '|', :headers => true) do |f|
export_rows.each do |row|
f << row 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:25:52.697

最简洁的答案是不”。您需要调整当前代码以拆分集合，然后将每个子集转储到不同的文件中。这应该非常接近：

```
export_rows.each_slice(1000).with_index do |rows, idx|
  CSV.open("#{PATH_TO_EXPORT_FILE}/newexport-#{idx.to_s}.csv", "w+", :col_sep => '|', :headers => true) do |f|
    rows.each { |row| f << row }
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:52:26.783

就在这里。它嵌入在 Ruby 1.9 中

[检查此链接](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

读书：

```
CSV.foreach("path/to/file.csv") do |row|
   # manipulate the content
end 
```

来写：

```
CSV.open("path/to/file.csv", "wb") do |csv|
   csv << ["row", "of", "CSV", "data"]
   csv << ["another", "row"]
   # something else
end 
```

我认为您需要将一个与另一个结合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:07:08.473

FasterCSV 是自 ruby​​ 1.9 以来的标准 CSV 库，您可以在示例文件夹中找到大量示例代码： [https ://github.com/JEG2/faster_csv/tree/master/examples](https://github.com/JEG2/faster_csv/tree/master/examples)

要使示例代码正常工作，您应该更改：

```
require "faster_csv" 
```

为了

```
require "csv" 
```

# windows - 使用 schtasks.exe 将任务的开始时间更改 1 小时

> ID：15253253
> 
> 赞同：0
> 
> 时间：2013-03-06T16:49:50.293
> 
> 标签：windows, batch-file, cmd, scheduled-tasks, windows-task-scheduler

是否可以在不使用schtasks 命令的*/ST 参数硬编码时间的情况下将*Windows server 2003 机器中计划任务的开始或运行时间移动 1 小时？我也不想使用计划任务 GUI，因为将它用于许多任务是一个漫长的过程。

例如。如果任务 A 在上午 8 点运行，任务 B 在上午 10 点运行，我想将它们分别移动到上午 9 点和上午 11 点。如果不可能，请提出更好的方法。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:44:29.767

AFAIK`schtasks`不提供相对于现有时间表更改时间表的方法。您可以从任务中查询当前计划，然后进行相应的修改：

```
setlocal EnableDelayedExpansion

for /f "tokens=5" %%t in (
  'schtasks /query /tn foo /fo list ^| find /i "next run time:"'
) do (
  if "%%t"="08:00:00" (
    schtasks /change /tn foo /st 09:00
  else if "%%t"="10:00:00" (
    schtasks /change /tn foo /st 11:00
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T22:30:05.700

无法使用 schtask.exe 完成

您不能将 /st 开关与 /change 开关一起使用。您必须删除并创建。但是您可能会失去使用 Schtask.exe 看不到的高级选项。基本上你需要查看 powershell 来完成你想要的。

# c# - 自定义图像控件上的 SetBinding()

> ID：15253259
> 
> 赞同：0
> 
> 时间：2013-03-06T16:50:05.460
> 
> 标签：c#, lightswitch-2012

我被困在 SetBinding 方法上。

我想在表格中有两种图标，会有一个布尔属性，显示的图标将取决于这个属性。这是一个例子：

![](../Images/b797aea7963f012ef2e8492adb9e6e2a.png)

问题是我无法更改图标。我试着用谷歌搜索了大约 3 个小时，但没有成功。

我的想法是放在那里图像控件，而不是更改源依赖属性，但我无法找到如何更改图像源。

因此，我尝试使用图像模板和 SetBinding 创建自定义示例，但我被卡住了……

```
 int index = 0;

  foreach (var item in this.VidContentItems) {
    if (item.Active == false) {
        this.FindControlInCollection("TrueOrFalse", 
            this.VidContentItems.ElementAt(index)).SetBinding(?????????);
    }
    index++;
  } 
```

或者也许我完全错了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:28:58.250

OK i solved it like this: I created a table where was just one image item and i add a control image viewer to the grid of the target table, then i made loop and if the value was false i hided the control.. looks easy but this wasnt possible when i was trying to put there just image control, becouse visibility couldnt be changed for specific control , only for all controls...that stacked me a lot..never use image control!!!

```
partial void VidContentItemsGrid_Activated() {
  int index = 0;
  foreach (var item in this.VidContentItems) {
    if (item.Active == false) {
      this.FindControlInCollection("TrueIconInd", this.VidContentItems.ElementAt(index)).IsVisible = false;
    }
    index++;
  }
} 
```

# java - 如何通过内部类实例访问 OuterClass？

> ID：15253260
> 
> 赞同：3
> 
> 时间：2013-03-06T16:50:07.587
> 
> 标签：java, class, nested

我知道我可以使用以下方法获取封闭类的实例：

```
OuterClass.this 
```

但我只能在内部类代码本身内做到这一点。只有我有的是内部类实例与**另一个类代码的****引用。**如何通过内部类实例获取 OuterClass 实例？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:52:07.330

您可以定义一个`OuterClass`从外部返回给调用者的 getter：

```
public class InnerClass {
    ...
    public OuterClass getOuterInstance() {
        return OuterClass.this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:01:15.547

你可以（但你不应该）在工作中使用反射：

```
import java.lang.reflect.Field;

public class Outer {
    public class Inner {
    }

    public static void main(String[] args) throws Exception {

        // Create the inner instance
        Inner inner = new Outer().new Inner();

        // Get the implicit reference from the inner to the outer instance
        // ... make it accessible, as it has default visibility
        Field field = Inner.class.getDeclaredField("this$0");
        field.setAccessible(true);

        // Dereference and cast it
        Outer outer = (Outer) field.get(inner);
        System.out.println(outer);
    }
} 
```

当然，隐式引用的名称是完全不可靠的，所以正如我所说，你不应该:-)**

# loadrunner - 每秒下载的 LoadRunner 页面数

> ID：15253261
> 
> 赞同：0
> 
> 时间：2013-03-06T16:50:09.380
> 
> 标签：loadrunner

在 URL 模式下记录了一个脚本，创建了一个工作负载模型来计算我期望的每秒页数，现在想要在场景运行期间监控这个图（每秒下载的页数），我被提示在运行中手动启用它时间设置。所以我做了并显示了图表，但我只得到了 AVG（每秒下载的页面数），而不是 max/min ++。

这是该图的预期行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T22:16:57.483

当您处于 URL 模式时，每个请求都会被记录，多个 URL 请求构成一个页面。使用事务标记来标记页面定义的开始和结束（在标记内没有思考时间），然后观察图表中每秒的事务。由于每个事务都定义了一个页面，因此这应该符合您的需要。

请注意，事务是合乎逻辑的，因此您可以将它们嵌套，例如

```
start_transaction("Page");
start_transaction("Home_Page");
....
<logic to set status for pass|fail>
end_transaction("Home_Page",status_from_test);
end_transaction("Page",LR_PASS); 
```

然后，您可以只查看“页面”事务的过滤图....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:06:16.643

James 建议的另一个选择是不使用 URL 模式，并实际加载带有资源的页面。这将产生精确的 PAGES/SEC 图。

这可以在“录制选项|录制|基于 HTML 的脚本”中设置。在这里，您还应该打开“HTML 高级”对话框并选择“仅包含显式 URL 的脚本......” - 这将产生更易于阅读和处理的脚本。

# blackberry - Blackberry - 如何将 DateField 的日期选择器弹出窗口居中

> ID：15253263
> 
> 赞同：0
> 
> 时间：2013-03-06T16:50:13.320
> 
> 标签：blackberry, datepicker

我`DateField`在屏幕中央

![在此处输入图像描述](../Images/283e0edbd42efa4ce65d9621fcd06bbb.png)

当我触摸它时，我看到：

![在此处输入图像描述](../Images/06a5e767f827e433085823b3eeaf6298.png)

但我想看看：

![在此处输入图像描述](../Images/ca15048350b1af7f64b6579e5793bbb6.png)

我的问题是：

如何将日期选择器弹出窗口居中`DateField`？

黑莓操作系统 6

**更新：**

```
public class MyMainScreen extends MainScreen
{
    protected DateField dateField_ = null;
    protected VerticalFieldManager container_ = null;

    public MyMainScreen()
    {
        super();
        container_ = new VerticalFieldManager(VerticalFieldManager.VERTICAL_SCROLL
            | VerticalFieldManager.VERTICAL_SCROLLBAR | VerticalFieldManager.USE_ALL_HEIGHT)
        {
            protected void sublayout(int width, int height)
            {
                super.sublayout(width, height);

                layoutChild(dateField_ , 100, 40);
                setPositionChild(dateField_ , (width - 100) / 2, 50);

                setVirtualExtent(width, 50);
            }
        };

        add(container_);
        dateField_ = new DateField("", new Date(), new SimpleDateFormat("HH:mm"), Field.FIELD_HCENTER |
                DrawStyle.HCENTER | Field.FOCUSABLE);

        container_.add(dateField_);
        add(container_);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:36:14.173

好的，所以有几个问题：

1.  `DateField`不会因为您传入`Field.FIELD_HCENTER | DrawStyle.HCENTER`构造函数而使该字段居中。我认为`DateField`甚至不承认那些标志。

2.  A`VerticalFieldManager`是一种特殊`Manager`设计，旨在按照您的顺序从上到下垂直布置其子级`add()`。如果您**不**打算以这种方式布置字段，那么我不知道您应该扩展`VerticalFieldManager`. 直接扩展`Manager`，如果你想实现`sublayout()`. 此外，调用`super.sublayout()`您的实现可能会导致问题。

3.  您正在硬编码`DateField`. 我不确定它是否允许这样做。

4.  您的代码实际上并没有为我编译，因为`DateField`构造函数需要一个`long`日期，而不是`Date`. 不过，这与居中无关。

所以，我推荐这样的东西：

```
 super(MainScreen.VERTICAL_SCROLL | MainScreen.VERTICAL_SCROLLBAR);

  dateField_ = new DateField("", (new Date()).getTime(), new SimpleDateFormat("HH:mm"), Field.FOCUSABLE);

  container_ = new Manager(Manager.VERTICAL_SCROLL | Manager.VERTICAL_SCROLLBAR) {
     public int getPreferredHeight() {
        return Display.getHeight();
     }
     public int getPreferredWidth() {
        return Display.getWidth();
     }
     protected void sublayout(int width, int height) {            
        int h = Math.min(height, Display.getHeight());
        setExtent(width, h);
        // only needed if there's actually more content than fits in the visible area
        //setVirtualExtent(width, h + ?);

        int dfWidth = dateField_.getPreferredWidth();
        int dfHeight = dateField_.getPreferredHeight();
        layoutChild(dateField_, dfWidth, dfHeight);
        setPositionChild(dateField_, (width - dfWidth) / 2, (h - dfHeight) / 2);
     }                                      
  };

  container_.add(dateField_);      
  add(container_); 
```

PS我不确定你是否想要滚动。只有 a `DateField`，没有理由滚动。但是，我知道你的 real`Screen`可能有更多的内容，所以你可能需要`setVirtualExtent()`，我已经注释掉了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:58:48.790

该解决方案也适用于我：

```
package com.my.package;

import java.util.Calendar;
import java.util.Date;

import net.rim.device.api.i18n.SimpleDateFormat;
import net.rim.device.api.ui.DrawStyle;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.DateField;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.picker.DateTimePicker;

public class MyDateManager extends VerticalFieldManager {
    protected DateField dateField_ = null;
    protected DateTimePicker dateTimePicker_ = null;
    protected SimpleDateFormat dateFormat_ = null;

    public MyDateManager() {
        super(Manager.FIELD_HCENTER | Manager.FIELD_VCENTER);
        dateFormat_ = new SimpleDateFormat("HH:mm");
        dateField_ = new DateField("", new Date().getTime(), dateFormat_,
                Field.FIELD_HCENTER | DrawStyle.HCENTER | Field.FOCUSABLE) {
            protected boolean touchEvent(TouchEvent paramTouchEvent) {
                if (paramTouchEvent.getEvent() == TouchEvent.CLICK) {
                    dateField_.setEnabled(false);
                    showDatePicker();
                }
                return super.touchEvent(paramTouchEvent);
            }

            protected boolean trackwheelClick(int paramInt1, int paramInt2) {
                dateField_.setEnabled(false);
                showDatePicker();

                return super.trackwheelClick(paramInt1, paramInt2);
            }
        };
        this.add(dateField_);
    }

    protected void sublayout(int width, int height) {
        layoutChild(dateField_, width, height);
        setPositionChild(dateField_, (width - dateField_.getWidth()) / 2,
                (height - dateField_.getHeight()) / 2);
        int h = dateField_.getHeight();
        if (h <= 0)
            h = height;
        setExtent(width, h);
    }

    protected void showDatePicker() {
        if (dateTimePicker_ == null) {
            Calendar cal = Calendar.getInstance();

            // HACK
            String dateFormat = dateFormat_.toPattern().indexOf("H", 0) == -1 ? dateFormat_
                    .toPattern() : null;
            String timeFormat = dateFormat_.toPattern().indexOf("H", 0) != -1 ? dateFormat_
                    .toPattern() : null;

            dateTimePicker_ = DateTimePicker.createInstance(cal, dateFormat,
                    timeFormat);
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    if (dateTimePicker_.doModal()) {
                        dateField_.setDate(dateTimePicker_.getDateTime()
                                .getTime());
                    }

                    dateField_.setEnabled(true);
                    dateField_.setFocus();
                    dateTimePicker_ = null;
                }
            });
        }
    }
} 
```

# spring - Spring @Async 与 Future 和 Callable

> ID：15253269
> 
> 赞同：1
> 
> 时间：2013-03-06T16:50:31.377
> 
> 标签：spring, spring-aop, spring-integration, spring-annotations

我正在尝试实现一个异步执行可调用对象的通用类，但我不确定语义。

```
@Component
public class MyCallerImpl implements MyCaller {

    @Async
    @Override
    public <T> Future<T> runAsync(Callable<T> callable) throws Exception {

        return new AsyncResult<T>(callable.call());
    }
} 
```

基本上，该组件使用 @Async 注释从任何可调用的异步执行任意操作。

我不确定方法签名的 throws 子句中的异常。

一个 Junit 测试：

```
@ContextConfiguration("classpath:test-config.xml")
@RunWith(SpringJUnit4ClassRunner.class)
public class RunnerTest{

    @Resource(name="myCallerImpl")
    private MyCaller myCaller;

    @Test
    public void testException(){

        final Callable<String> callable = new Callable<String>(){
            @Override
            public String call() throws Exception{
                throw new MyException("foobar");
            }
        };

        try
        {
            final Future<String> future = myCaller.runAsync(callable); // this can throw Exception due to Callable.call()
            future.get(); // this can throw InterruptedException and ExecutionException 
        }
        catch (final InterruptedException ie)
        {
            // do someting
        }
        catch (final ExecutionException ee)
        {
            // we want to check the cause
            final Throwable cause = ee.getCause();
            assertTrue(cause instanceof MyException);
        }
        catch (final Exception e)
        {
            // Not sure what to do here. 
            // Must be caught as it is declared to 
            // be thrown from the MyCaller.runAsync() method
            // but nothing will really ever get here 
            // since the method is @Async and any exception will be
            // wrapped by an ExecutionException and thrown during Future.get()

            fail("this is unexpected);
        } 
```

我的问题是如何处理 MyCallerImpl.runAsync() 的 throws 子句中声明的异常？

我声明它的唯一原因是因为我调用可调用对象的方式。最初我在异步方法中有以下内容：

```
FutureTask<T> futureTask = new FutureTask<T>(callable);
futureTask.run();
return futureTask; 
```

但是，当从该实例中的可调用对象抛出异常时，它会在 ExecutionException 中包装两次，第一次是 FutureTask.run() 最终被调用时 FutureTask.Sync.innerRun() 捕获异常并调用 innnerSetException() 和第二次 AsyncExecutionIntercepter 通过 Future.get() 从 Future 获取结果，最终再次检查是否有异常并抛出一个新的 ExecutionException 包装在 innerRun() 中捕获的 ExecutionException

我还尝试在方法中执行以下操作：

```
FutureTask<T> futureTask = new FutureTask<T>(callable);
return futureTask; 
```

我认为自从 AsyncExecutionInterceptor 调用 Future.get() 后，会立即调用可调用对象，但事实并非如此。它只是挂在 FutureTask.acquireSharedInterruptibly() 上并且永远不会返回。

也许我在这里过头了。它现在如何使用可调用文件进行设置，但我宁愿没有方法签名声明抛出异常。

有什么建议吗？我应该忘记这种使用可调用对象进行异步调用的通用方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T05:33:58.223

这里有两层异常。

一：导致调用Callable的异常

```
if (string.equals("X")){ callable.call();} 
```

二：调用callable.call()方法时引发的异常（你的"throw new MyException("foobar");"）

由于您在“callable.call();”之前没有任何其他代码，因此删除检查的异常是安全的。

改变

```
public <T> Future<T> runAsync(Callable<T> callable) throws Exception 
```

至

```
public <T> Future<T> runAsync(Callable<T> callable) 
```

另外，你可以这样编码

```
 final Future<String> future = myCaller.runAsync(callable);
  try
        {
            future.get(); // this can throw InterruptedException and ExecutionException 
        }
        catch (final InterruptedException ie)
        {
            // do someting
        }
        catch (final ExecutionException ee)
        {
            // we want to check the cause
            final Throwable cause = ee.getCause();
            assertTrue(cause instanceof MyException);
        } 
```

# linux - DIR_COLORS 自定义

> ID：15253271
> 
> 赞同：3
> 
> 时间：2013-03-06T16:50:41.973
> 
> 标签：linux, unix, ls

我正在自定义我的 DIR_COLORS (~/.dir_colors) 以在我的终端上为 ls 着色。

我知道如何更改名称以已知扩展名结尾的文件的颜色：

```
.cpp 0;34 
```

但是我想为具有固定名称的文件设置颜色，例如`Makefile`and `Kconfig`，我还想更改以点（例如`.config`）或其他模式开头的文件的颜色。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:02:14.637

不幸的是，没有办法使用它`dircolors`。处理单个文件的一种方法是使用`Makefile`or `Kconfig`：

```
*Makefile 00;36 
```

不幸的是，这会着色以 结尾的所有内容`Makefile`，而不仅仅是`Makefile`。以特定前缀开头的着色文件可能是不可能的。

# php - 间接下载链接+下载管理器

> ID：15253276
> 
> 赞同：0
> 
> 时间：2013-03-06T16:51:15.117
> 
> 标签：php

在我的网站上，很少有帖子附有 VIP 用户的文件。因为我想控制让他们下载文件的学分，所以我制作了间接 URL。

例如这个链接：

`http://mywebsite.com/file/file.zip`

可以通过这个下载：

`http://mywebsite.com/?download=1f3870be274f6c49b3e31a0c6728957f`

但问题是，文件很大，我需要用户可以通过下载管理器下载它们，而且我知道间接下载链接不能像那样下载。

解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:19:31.640

为什么间接不能像那样下载？

您必须为恢复能力编写下载程序搜索用于恢复的`Content-Range`http 标头

看到这个链接可以帮助你

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

[http://forums.phpfreaks.com/topic/209529-download-with-speed-limit-and-resume/](http://forums.phpfreaks.com/topic/209529-download-with-speed-limit-and-resume/)

[http://www.justskins.com/forums/php-getting-download-resume-120719.html](http://www.justskins.com/forums/php-getting-download-resume-120719.html)

[http://www.richnetapps.com/php-download-script-with-resume-option/](http://www.richnetapps.com/php-download-script-with-resume-option/)

[Content-Range 和 Range 标头之间的区别？](https://stackoverflow.com/questions/716680/difference-between-content-range-and-range-headers)

# unit-testing - 从 FakeItEasy A.CallTo() 返回不同的对象

> ID：15253279
> 
> 赞同：8
> 
> 时间：2013-03-06T16:51:22.010
> 
> 标签：unit-testing, fakeiteasy

对于我的测试，我需要第一次调用存根返回一个对象，下一次调用返回一个不同的对象。我在 record() 块中的其他模拟对象框架中看到了这一点，但我还没有弄清楚如何在 FakeItEasy 中做到这一点。FakeItEasy 是我们商店的强制框架，我正在使用 AutoFixture 来生成假货。

我查看了 NextCall，但看起来我无法指定返回值。

这是我想做的事情的想法：

```
ReceiveMessageResponse queueResponse1 = fixture.Create<ReceiveMessageResponse>();
ReceiveMessageResponse queueResponse2 = fixture.Create<ReceiveMessageResponse>(seed);
A.CallTo(() => sqsClient.ReceiveMessage(null)).WithAnyArguments().Returns(queueResponse1);
//The following should happen the second time...
A.CallTo(() => sqsClient.ReceiveMessage(null)).WithAnyArguments().Returns(queueResponse2); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T19:12:40.997

有两种方法，其中一种是您在自己的答案中引用的方法：

```
A.CallTo(() => foo.Bar()).ReturnsNextFromSequence(new[] { response1, response2 }); 
```

另一种方式是：

```
A.CallTo(() => foo.Bar()).Returns(response2);
A.CallTo(() => foo.Bar()).Returns(response1).Once(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T17:07:10.530

当然，它每次都会发生。在发布后的几分钟内，我自己就找到了答案。

我最终使用：

```
ReturnsNextFromSequence(new [] {queueResponse1, queueResponse2}); 
```

我不确定它是否是首选方法，但它对我很有用。

# c++ - 如何将子进程的标准输出重定向到父进程

> ID：15253280
> 
> 赞同：1
> 
> 时间：2013-03-06T16:51:24.223
> 
> 标签：c++, process, parent-child, stdout

我正在尝试从用 C++ 编写的服务器应用程序中的线程调用子进程。

它起初看起来不错，但现在随着子进程的输出变大，我遇到了时间问题。

这就是我现在正在做的事情：

```
int readlinesFromCommandStdout( char * const *argv, int maxLines, int timeout, std::list<std::string> &destination )
{
    int count = 0;

    int filedes[2];
    pipe( filedes );
    dup2( filedes[0], 0 );
    dup2( filedes[1], 1 );

    int flags = fcntl( filedes[0], F_GETFL, 0 );
    flags |= O_NONBLOCK;
    fcntl( filedes[0], F_SETFL, flags );

    spawnv( P_NOWAITO, argv[0], (char * const *) argv );

    char *buffer = (char*) malloc(MAX_BUFFER);
    struct pollfd fds;
    fds.fd = filedes[0];
    fds.events = POLLRDNORM;
    int polling;

    if(!buffer)
        return -1;

    do {

        polling = poll( &fds, 1, timeout <= 0 ? 1000 : timeout );
        if ( gets( buffer ) == NULL ) {
            break;
        }
        destination.push_back( buffer );
        count++;

        if(count >= maxLines) {
            break;
        }
    } while ( polling > 0 );

    close( filedes[0] );
    close( filedes[1] );

    free(buffer);

    return count;
} 
```

有时，两个独立孩子的输出会混淆。我很确定问题出在`dup2()`电话上。是否所有子`stdout`描述符都重定向到*正确*的父线程？

我错过了什么吗？

# php - PHP取消链接不起作用

> ID：15253281
> 
> 赞同：1
> 
> 时间：2013-03-06T16:51:25.300
> 
> 标签：php, yii, unlink

我的一个 CMS 解决方案中有一个多重删除功能，我有以下代码：

```
public function actionDelete() {
    if(Yii::app()->request->isPostRequest) {
        if(isseT($_POST['submit'])) {
            if(isset($_POST['delete']) && (sizeof($_POST['delete']))) {
                foreach($_POST['delete'] as $i => $items) {
                    $model[$i] = Pages::model()->findByPk((int)$items);

                    if(!is_null($model[$i])) {
                        $image[$i] = $model[$i]->image;

                        if($model[$i]->delete()) {
                            if(!unlink($image[$i])) {
                                die('Unable to delete Page Image.');
                            }
                        }
                    }
                }
            }
        }
    }

    $this->redirect('/admin/pages');
} 
```

这是 Yii 控制器的操作，在每一页的“图像”字段/列中都有一个值。

在我使用发布数据调用此操作后，它实际上从数据库表中删除了记录，但它没有从文件系统中删除图片和图像，并且脚本从未出现过这一点：`die('Unable to delete Page Image.');`

PHP是否有可能剥离并忽略该`unlink`功能，主要是在生产/实时服务器上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:00:12.937

> PHP是否有可能剥离并忽略取消链接功能，主要是在生产/实时服务器上？

不，绝对不是（除非他们[禁用了该功能](http://www.php.net/manual/en/ini.core.php#ini.disable-functions)但应该引发错误）。它可能是逻辑错误、权限错误或路径错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:00:44.180

1：我的第一个建议是测试 $model[$i]->image 值，以确保它输出的是您想要输出的内容。然后，在尝试取消链接之前执行 $image[$i] RIGHT 的输出。 **确保您没有尝试删除不存在的文件（这将始终成功）。** 在尝试删除文件之前测试文件的存在。我怀疑这是一个很可能的情况。也许 $model[$i]->image 正在以 Web 访问的方式保存图像路径，而不是作为文件系统？

2：我强烈建议颠倒您的删除顺序。

现在，首先删除数据库行，然后删除图像。如果删除过程中途失败，那么您丢失了指向需要删除的图像的链接。

如果您改为这样做：

```
if(!unlink($image[$i])) {
    if($model[$i]->delete()) {
        die('Unable to delete Page Image.');
    }
} 
```

这允许您仅在成功删除映像时删除数据库条目，这将有助于防止未附加的映像在文件系统中浮动。如果删除过程失败，您仍然拥有再次尝试删除它所需的所有信息。

# c# - 具有属性注入的 MVC3 单元测试控制器

> ID：15253282
> 
> 赞同：1
> 
> 时间：2013-03-06T16:51:26.427
> 
> 标签：c#, asp.net-mvc-3, unit-testing, mocking

我有一个使用**属性注入**的 MVC3 项目。在我的控制器中，我调用了一个服务类。正如我提到的，它使用属性注入（使用**unity**）而不是通过构造函数解决这个问题。我到处搜索，试图找到一个**单元测试**的例子，它解决了我的控制器中的这些依赖关系，但一切似乎都指向构造函数 DI。我越来越沮丧。任何帮助都会很棒。

控制器示例：

```
 [Dependency]
  public ITrainingService trainingService { get; set; } 

  public ActionResult Index(MyTrainingView myTrainingView)
  {
    //Load all training items into view object
    myTrainingView.training = trainingService.getTraining(myTrainingView.trainingId);
    myTrainingView.videos = trainingService.getTrainingVideos(myTrainingView.trainingId);
    myTrainingView.visuals = trainingService.getTrainingVisuals(myTrainingView.trainingId);
    myTrainingView.exams = trainingService.getTrainingExams(myTrainingView.trainingId);

    return View(myTrainingView);
  } 
```

我正在尝试在运行单元测试时解决 trainingService 问题。我发现了无数使用构造函数依赖项来模拟和解决依赖项的示例，但在属性注入方面却一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:18:50.793

您不需要在单元测试中依赖统一性。

像这样的东西可以解决问题：

```
 [Test]
    public void GetTrainingById()
    {
        var mockService = MockRepository.GenerateMock<ITrainingService>();
        mockService.Stub(service => service.getTraining(123)).Return(new ImaginaryClass());

        var sut = new TrainingController();
        sut.trainingService = mockService;

        var myTrainingView = new MyTrainingView();
        sut.Index(myTrainingView);

        Assert.AreEqual(expected, myTrainingView.training);
    } 
```

如果您*必须*在单元测试中使用 unity，您可以`UnityContainer`在测试中实例化 并使用`RegisterInstance`来注册要注入的对象。

# c# - ExecuteNonQuery：连接属性尚未初始化

> ID：15253286
> 
> 赞同：0
> 
> 时间：2013-03-06T16:51:33.963
> 
> 标签：c#, ms-access, connection, executenonquery

我在这里搜索了我的问题，但找不到。我正在使用 Microsoft VS 2010 C#。

这是我的代码：

```
private OleDbConnection myCon;
public Form5()
{
   myCon = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|ForeignWorkerinfo.accdb");
   InitializeComponent();
}

private void Form5_Load(object sender, EventArgs e)
{
   // TODO: This line of code loads data into the 'foreignWorkerinfoDataSet.FWinFO' table. You can move, or remove it, as needed.
   this.fWinFOTableAdapter.Fill(this.foreignWorkerinfoDataSet.FWinFO);
}

private void button1_Click(object sender, EventArgs e)
{                
   OleDbCommand cmd = new OleDbCommand();
   cmd.Connection = myCon;
   cmd = new OleDbCommand("INSERT INTO [FWinFO] ([ID], [Name], [Gender], [Date of Birth], [Country], [Date of Expire], [Passport No], [Working Place]) VALUES (?, ?, ?, ?, ?, ?, ?, ?);");

   cmd.Parameters.AddWithValue("@id", textBox8.Text);
   cmd.Parameters.AddWithValue("@name", textBox1.Text);
   cmd.Parameters.AddWithValue("@gender", textBox2.Text);
   cmd.Parameters.AddWithValue("@dob", dateTimePicker1.Value);
   cmd.Parameters.AddWithValue("@country", textBox4.Text);
   cmd.Parameters.AddWithValue("@doe", dateTimePicker2.Value);
   cmd.Parameters.AddWithValue("@passport", textBox6.Text);
   cmd.Parameters.AddWithValue("@workplace", textBox7.Text);

   cmd.ExecuteNonQuery();
   myCon.Close();
} 
```

谁能告诉我为什么连接属性没有被初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:53:50.327

您有两个错误，一个是您声明的，另一个是在您修复第一个错误后发生的：

第一个是您通过再次调用 new来覆盖您的`Connection`属性设置。`cmd`要么做一个新的，要么设置查询文本属性。

下一个错误是：

你必须打电话[`myCon.Open`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.open%28v=vs.100%29.aspx)才能`ExecuteNonQuery()`打电话。您不能对未打开的连接执行查询。

您始终可以通过检查连接是否打开来检查连接是否[`State`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.state%28v=vs.100%29.aspx)打开[`Open`](http://msdn.microsoft.com/en-us/library/system.data.connectionstate%28v=vs.100%29.aspx)。

但是，我实际上建议按需创建连接，但这取决于代码。使用全局、共享的连接对象会使自己面临问题。不过，您可以缓存连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:54:56.710

尝试先打开连接，使用`myCon.Open()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T16:55:21.757

```
OleDbCommand cmd = new OleDbCommand();
cmd.Connection = myCon;
cmd = new OleDbCommand("INSERT INTO [FWinFO] ([ID], [Name], [Gender], [Date of Birth], [Country], [Date of Expire], [Passport No], [Working Place]) VALUES (?, ?, ?, ?, ?, ?, ?, ?);"); 
```

上面的代码是正确的。问题是，您没有打开连接。请用：

```
 OleDbCommand cmd = new OleDbCommand();
 cmd.Connection = myCon;
 myCon.Open();
 cmd = new OleDbCommand("INSERT INTO [FWinFO] ([ID], [Name], [Gender], [Date of Birth], [Country], [Date of Expire], [Passport No], [Working Place]) VALUES (?, ?, ?, ?, ?, ?, ?, ?);"); 
```

# ios - 没有视网膜图像的应用程序有什么副作用？

> ID：15253289
> 
> 赞同：1
> 
> 时间：2013-03-06T16:51:43.927
> 
> 标签：ios, image

如果您有一个在非视网膜设备上运行良好的应用程序，然后您将其部署在视网膜设备上，而没有提供必要的@2x 图像，可能会出现什么副作用？内存使用率高？应用程序崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T16:53:34.283

不，你提到的事件不会发生。但是，显然您的图像看起来很糟糕，因为它们无法正确缩放（因此它们将被像素化并且尺寸不正确等）。

**不使用视网膜图像没有任何意义**——您所要做的就是在图像中添加@2x 并将图像大小加倍，它们将针对非视网膜和视网膜显示正确缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:01:41.480

如果您不包含@2x 图像，则设备会自动在视网膜设备上拉伸图像以占用相同的房间（放大图像）。

UIKit 使用的缩放方法不做任何插值。相反，它只是将每个像素的大小加倍（“最近邻”缩放）。对于带有硬边的正方形图像，效果很好。但是，对于照片或大多数艺术品，图像最终看起来非常像素化（有伪影）。

由于采用了简单的缩放方法，因此在 Retina 设备上放大图像并不是性能密集型的。它不太可能影响性能，只会影响图像质量。

如果您仅包含高分辨率图像，则它们不会针对非视网膜设备自动缩小。相反，例如，对于 UIImageView，您可以将视图模式设置为 Scale to Fill，以便图像缩小以适合框架。然而，同样，UIKit 使用最近的邻居，但是当按比例缩小时，伪影不太明显。

较新的视网膜设备性能更高，因此它们能够以与非视网膜设备处理低分辨率图像相同的速度处理高分辨率图像，并且放大图像对它们来说是微不足道的。但是，较旧的非视网膜设备在处理高分辨率图像时会更慢，这需要更多内存和更多图形处理能力，尤其是因为它还必须按比例缩小它们。

如果您在 UITableView 中有高分辨率图像，这将非常明显。您的 Retina 设备将非常流畅地滚动表格，而您会注意到非 Retina 设备上的一些抖动。它不会崩溃，只是不会平滑。如果用户体验太差，您的应用可能会被拒绝。对于静态的、非移动的图像，不太可能存在明显的性能差异。

如果您的捆绑包中有空间，则应包括视网膜和非视网膜图像。即使您只是在像 Photoshop 这样漂亮的照片编辑器中将图像大小翻倍来创建 @2x 图像，图像的质量也会比 UIKit 生成的要好得多。

请记住，如果您的压缩应用包超过 50 MB，则只能通过 WiFi 从 App Store 下载。PNG 和 JPEG 压缩得不多，因为它们已经被压缩了。这就是您可能选择仅包含高分辨率图像的原因之一（以减小应用程序包的大小，特别是对于通用应用程序，您最终可能会拥有 4 组图像）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:15:04.660

当然，您可以只提供视网膜图像，甚至只提供非视网膜图像。

几个月前，我们对这个问题进行了一些测试。

正如预期的那样，只有非视网膜图像导致图形质量不佳。即使是未经训练的眼睛也能注意到模糊。

Only retina images: it works. But memory footprint is bigger (for non-retina devices that would otherwise load non-retina images) and some lag could be noticed. Though we had to measure it to be sure.

To answer your question: zenith provided the answer. If you only provide non-retina images the graphics on retina devices will be blurry, but no low-memory condition could emerge because of this.

**EDIT:**

Unless you are doing some kind of research on graphics capabilities of different iOS devices i'd strongly suggest to provide both types of images: retina and non-retina.

If your designer is giving you hard time because of this you can do few things:

*   get a new designer
*   provide him some kind of tool to make his job easier: [Unretiner](http://www.whiskit.com.au/index.php/blog/mobile-dev/96-unretiner) for example

# sql - 如何根据交易日期将交易表连接到历史查找表？

> ID：15253304
> 
> 赞同：0
> 
> 时间：2013-03-06T16:52:39.843
> 
> 标签：sql, select, join

我正在尝试使用如下所示的事务表和历史表运行 SQL 查询：

历史表：

```
Active Date    Inactive Date    Attribute   CustID
1/1/2013        1/15/2013         Blue         A 
1/15/2013       1/30/2013         Green        A 
```

交易表：

```
Transaction Date     CustID
1/12/2013              A
1/28/2013              A

And I would want to return 
```

结果：

```
Transaction Date     CustID   Attribute 
1/12/2013              A        Blue
1/28/2013              A        Green 
```

任何帮助，将不胜感激 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:55:16.000

您可以`JOIN`在 the`custid`和 the上的表`transaction date`同时使用`active date`and `inactive date`：

```
select t.`transaction date`,
  t.custid,
  h.attribute
from transactions t
inner join historical h
  on t.custid = h.custid
  and t.`transaction date` >= h.`Active Date`
  and t.`transaction date` <= h.`Inactive Date` 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/86e88/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:55:30.830

正如我所看到的结果，历史表中的和日期`date of the transaction`之间的落差。结果可以通过在两个条件下加入表来实现：它匹配并且它位于两个日期之间。`Active Date``inActive``CustID`

```
SELECT  a.*, b.Attribute
FROM    TransactionTable a
        INNER JOIN HistoricalTable b
            ON  a.CustID = b.CustID AND
                a.TransactionDATE BETWEEN b.ActiveDate AND b.InActiveDATE 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/c1559/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# sql - DB2 SQL 使用“最小”id 过滤/分组重复列但具有不同的 id

> ID：15253306
> 
> 赞同：1
> 
> 时间：2013-03-06T16:52:42.653
> 
> 标签：sql, db2

如果我有一个包含以下字段的表

```
USER_ID  FAMILY_MEMBER_TYPE  FAMILY_MEMBER  RELATED_PERSON
1008     '01'                'fatherA'       1002
1008     '01'                'fatherA'       1005
1002     '02'                'motherA'       1005
1004     '02'                'motherB'       1007
...
1005     '03'                'childA'        
1007     '03'                'childB' 
```

现在我需要消除重复的related_person 行。因为孩子已经和父亲有关系了，所以我不再需要列出与母亲的关系。

例如，对于上面的示例，我需要得到以下结果：

```
USER_ID  RELATED_PERSON
1008     1002
1008     1005
1004     1007 
```

实现此目的的智能查询是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:07:23.913

很好的谜语，如果在表格中每个人都相关，那么解决方案很简单：

```
SELECT t1.USER_ID, t1.RELATED_PERSON FROM table t1 HAVING t1.USERID = MIN(t1.USERID) 
```

**编辑** 如上述评论中所述，案例需要一些额外的假设。这是我使用相关子查询（[SQLFiddle](http://sqlfiddle.com/#!2/10a12/8/0)）的尝试：

```
SELECT f.USER_ID, f.RELATED_PERSON FROM family f
WHERE 
  f.USER_ID NOT IN 
  ( 
    SELECT USER_ID FROM family WHERE USER_ID > f.USER_ID AND RELATED_PERSON > f.RELATED_PERSON 
    UNION 
    SELECT RELATED_PERSON FROM family WHERE USER_ID > f.USER_ID AND RELATED_PERSON > f.RELATED_PERSON  
  )
  AND
  f.RELATED_PERSON NOT IN 
  ( 
    SELECT USER_ID FROM family WHERE USER_ID > f.USER_ID AND RELATED_PERSON > f.RELATED_PERSON 
    UNION 
    SELECT RELATED_PERSON FROM family WHERE USER_ID > f.USER_ID AND RELATED_PERSON > f.RELATED_PERSON  
  ) 
```

但有多个不相关的家庭的情况仍然是一个问题。GL！随时通知我们。

# hadoop - 本地机器上的 Hadoop - 虚拟机初始化期间发生错误，无法为对象堆保留足够的空间

> ID：15253312
> 
> 赞同：1
> 
> 时间：2013-03-06T16:52:56.360
> 
> 标签：hadoop, linux-mint

我正在尝试在维基百科转储上运行[Wikipedia Miner 的 CSV 提取。](http://wikipedia-miner.cms.waikato.ac.nz/wiki/Wiki.jsp?page=Extracting%20CSV%20Summaries)[我使用此处](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)的说明在虚拟化 Mint 14 32 位操作系统上的单节点集群配置中设置了 Hadoop 1.0.4 。

工作正常，但是当`hadoop*examples*.jar`我尝试从 Wikipedia Miner 运行 CSV 提取时，出现`Could not reserve enough space for object heap`错误。

我不确定提供哪些有用的信息。

我为 Mint 分配了 4 个内核（实际上是 2 个超线程）和 4GB 的 RAM、2GB 的交换空间和足够多的 HD 空间。我正在使用 VirtualBox 4.2.8 在 Windows 7 SP1 64 位上以访客身份运行 Mint。

我试过设置

```
<property>
  <name>mapred.child.java.opts</name>
  <value>-Xmx####m</value>
</property> 
```

其中尝试了`mapred-site.xml`512、768、1024、1536、2048 的值`####`。

`-Dmapred.child.java.opts=-Xmx####m`我还尝试在运行任务时注释掉上述属性并使用内联。

为 Mint 分配更多 RAM 无济于事，因为它是 32 位的。

没有任何工作。请帮忙 ：'（。

# c# - 构造函数的可选类型参数

> ID：15253313
> 
> 赞同：-2
> 
> 时间：2013-03-06T16:53:01.793
> 
> 标签：c#

我有一个像这样工作的课程：

```
public class MyClass
{
    MyClass(SomeOtherObject TheObject)
    {
       ....
    }
} 
```

如您所见，构造函数接受一个对象作为参数。如何更改构造函数以使对象参数变为可选？

*注意：我确实在谷歌上看过，大多数帖子都讨论了一个可选的值参数，但我需要一个可选的类型参数。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T16:54:48.080

重载构造函数。

```
public class MyClass
{
    MyClass()
    {
       ....
    }
    MyClass(SomeOtherObject TheObject)
    {
       ....
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T16:55:01.430

为什么不这样：

```
public class MyClass
{
    MyClass(SomeOtherObject TheObject = null)
    {
       ....
    }
} 
```

通过这种方式，您可以省略构造对象的参数。

```
var cls = new MyClass(); //NO PARAMETER SPECIFIED 
```

这样，在这种情况下，您必须在内部管理`field/property`您分配给`TheObject` 的`null`对象。

或者简单地使用 ctors ctors 重载：

```
public class MyClass
{
    MyClass(SomeOtherObject TheObject)
    {
       ....
    }

    MyClass() : this(null)
    {
       ....
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T16:55:10.633

构造函数重载会起作用吗？

```
public class MyClass
{
    MyClass(Object TheObject)
    {
    }

    MyClass()
    {
    }
} 
```

# linux - 通过 ssh 执行 db2 命令

> ID：15253317
> 
> 赞同：0
> 
> 时间：2013-03-06T16:53:14.663
> 
> 标签：linux, ssh, su

尝试 ssh 到另一个系统然后执行 db2 命令但是使用 'su db2admin -c' 似乎不起作用，尽管它适用于正常的系统命令..

```
#!/bin/bash

sshpass -p 'passw0rd' ssh root@server.com "su db2admin -c 'db2text start'" 
```

这是输出..

```
rob@laptop:~/Desktop$ ./script.sh
bash: db2text: command not found 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:07:18.477

我会冒险猜测并说 root 在 hi 路径中没有任何 db2 东西。由于您使用的是*su db2admin*而不是*su - db2admin* db2admin 继承了 root 的环境。试试那个额外的 - 扔进去。

话虽如此：你到底为什么不以 db2admin 的身份连接 w/ 无密码密钥？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:12:09.653

PATH 没有更新为普通的 root 用户 PATH。指定 db2text 的完整路径或在用户名前添加破折号 (-) 以重新加载环境变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:08:03.490

另一个有效的解决方案..

```
#!/bin/bash

sshpass -p 'passw0rd' ssh root@server.com "su db2admin -c '~/sqllib/bin/db2text start'" 
```

但问题是 db2 路径可能会改变，最好使用 Eric 的答案。

# macos - QFileDialog 工作表

> ID：15253324
> 
> 赞同：1
> 
> 时间：2013-03-06T16:53:25.597
> 
> 标签：macos, qt, qt5, qfiledialog

是否可以在 Mac OS 上显示`QFileDialog::getSaveFileName()`为工作表？

设置父小部件似乎没有帮助，我使用的是 Qt5。

编辑：@troyane 提出类似的建议：

```
QFileDialog dialog(this);
dialog.setWindowModality(Qt::WindowModal);
dialog.setResult(0);
dialog.show(); 
```

但它崩溃了......我一定做错了什么，虽然不确定到底是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:06:44.623

尝试这个：

*   `QFileDialog`在不使用静态函数的情况下创建自己的。更多信息请参见[官方文档](http://qt-project.org/doc/qt-4.8/qfiledialog.html#details)。
*   然后按照这里的说明[https://stackoverflow.com/a/8244876/867349](https://stackoverflow.com/a/8244876/867349)（有 Python 代码，但可能在 Qt 中理解和重放它不是问题）。

希望，这会有所帮助！

# mongodb - mongodb评估字符串是否以另一个子字符串结尾

> ID：15253325
> 
> 赞同：1
> 
> 时间：2013-03-06T16:53:29.437
> 
> 标签：mongodb, aggregation-framework

如果另一个字段以子字符串结尾，但如果不是，我想投影一个带有值的字段

我怎样才能做到这一点？

示例（我省略了不重要的内容）：

文件 1：

```
{
    'Field1': 'A perfect normal string'
} 
```

文件号：

```
{ 
    'Field1': 'This one ends with my substring'
} 
```

理想是：

```
$project: {
    'HasSubstring': {$cond: [{$regex: 'substring$'}, true, false]}
} 
```

但这不起作用，因为我们不能（？？？？？？）在 $cond 中使用 $regex

任何人都可以指点我，好吗？

非常感谢

PS：我不能在比赛中使用正则表达式过滤器，因为我需要两个文档来对它们进行分组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:08:21.713

怎么样：

存储 'Field1Reversed' 字段，字符反转，然后使用：

```
$project: {
    'HasSubstring': {$cond:[{$eq:[ 'gnirtsbus', {$substr:["$Field1Reversed",0,9]}] } ,true,false]}
} 
```

使用 substr 存在 unicode 含义，但如有必要，可以在您的应用程序中解决这些问题（测量比较的长度以获得正确的 substr # of bytes）

# android - rn-42 bluesmirf HID 不发送扫描码？

> ID：15253326
> 
> 赞同：0
> 
> 时间：2013-03-06T16:53:31.633
> 
> 标签：android, bluetooth, arduino, hid, scancodes

我正在尝试使用带有蓝牙 HID 模块（bluesmirf）的 arduino 来控制我的 Galaxy 标签上的音量。我有 arduino 设置，所以我按下一个连接的小按钮，它就像键盘一样将 ascii 文本发送到平板电脑，这很好用。我想为这个“蓝牙键盘”创建一个自定义键盘布局文件，这样当平板电脑通过蓝牙接收来自 arduino 的按键时，它将控制适当的项目，如音量、静音等。但是，当使用 keytest捕获从蓝牙模块按下的传入按钮，扫描码始终为 0。 Keytest 正在读取密钥并在发送 A 时将其显示为 keycode_a （例如），但该键的扫描码始终为 0 而不是唯一的标识符。说来也怪，

我不明白。我一定是做错了什么，但我还是新手/正在学习，所以我一定会错过它。如果没有扫描码供平板电脑查看，我无法设置自定义键盘布局来执行我想要的操作。

如有必要，我可以发布我的 arduino 代码。非常感谢任何和所有帮助。我非常接近完成我需要的东西，这让我发疯。

编辑 - 代码如下：

```
// test code for sending keystrokes from arduino
// to computer via HID bluetooth module
// constants won't change. They're used here to
// set pin numbers:
const int buttonPin = 2;     // the number of the pushbutton pin
const int ledPin =  13;      // the number of the LED pin

// variables will change:
int buttonState = 0;         // variable for reading the pushbutton status
void setup() {
// initialize the LED pin as an output:
  pinMode(ledPin, OUTPUT);     
// initialize the pushbutton pin as an input:
  pinMode(buttonPin, INPUT);   
// begin serial communication at 115200 baud rate 
  Serial.begin(115200);
}
void loop() {
// read the state of the pushbutton value:
  buttonState = digitalRead(buttonPin);

  // check if the pushbutton is pressed.
  // if it is, the buttonState is HIGH,
  //the LED turns on, and the line is printed via bluetooth.
  if (buttonState == HIGH) {   
    digitalWrite(ledPin, HIGH); // turn LED on:
    Serial.println("A"); // write the line via bluetooth
    delay(1000); // delay one second 
  }
  else {
    // turn LED off:
    digitalWrite(ledPin, LOW);
  } 

} 
```

所以在上面的代码中，Serial.println("A"); 发送到平板电脑，我可以在文本编辑器中看到打印的 A。平板电脑看到在 keytest 应用程序中按下了 A，但它显示扫描码为 0。由于某种原因，发送的每个字符都显示为 0，除了草图在 Serial.println 之后抛出的自动回车。我什至尝试使用 Serial.print 代替，因为它不会抛出回车，而且我也得到了相同的扫描码 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-16T11:26:38.013

不要从 Arduino 发送它，而是先通过 Cool-Term 尝试它，具有 3ms 的字符间和 3ms 的数据包间延迟。在行尾，只需使用 0D 而不是 0D 0A 在发送任何内容之前请注意，您的 BlueSMiRF 应该处于 HID 模式，我在上面发布的代码中看不到该部分。对于 HID 模式，您应该从 Cool term $$$ (CR) S~,6 (CR) R,1 (CR) $$$ 执行以下操作 现在红色 LED 应该快速闪烁，连接您的手机并从 Cool term 发送A（回车）你应该直接在你的手机上收到它。

享受！

# jquery - jquery 将 'rel' 中的值转换为变量

> ID：15253327
> 
> 赞同：1
> 
> 时间：2013-03-06T16:53:33.847
> 
> 标签：jquery, html, variables

我目前正在研究[这个](http://www.myjqueryplugins.com/jquery-plugin/jqzoom)jquery 插件（一个图像放大镜）。

我发现许多 html 会为我想要放大的每个图像使用“a rel”或关系。

这是 rel 示例：

```
<a rel="{gallery: 'gal1', smallimage: 'images/image1.jpg',largeimage: 'images/image1.jpg'}">
    <img src = images/image1.jpg>
</a> 
```

所以，我想将'smallimage'和'largeimage'（在rel内部）的值更改为变量。

我不确定 jquery 是否可以处理，我尝试编写一些这样的 jquery：

```
$(function(){
  var src= $("a:first").find('rel').attr();
}); 
```

但我认为它会将'rel'中的所有内容存储到变量src中

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:06:02.530

首先你应该得到这样的`rel`属性：

```
$(element).attr('rel'); 
```

其次，您*可以*将此字符串解析为 JSON 对象，但首先您必须确保您所拥有的`rel`是**格式良好的 JSON 对象**。因此，使用单引号来包装`rel`元素和双引号，如下所示：

```
<a rel='{"gallery": "gal1", "smallimage": "images/image1.jpg","largeimage": "images/image1.jpg"}'> 
```

然后您可以使用 jQuery 解析 JSON 并将其用作对象，如下所示：

```
var src= $("a").attr("rel");
src = $.parseJSON(src); 
```

您可以看到一个工作演示，其中我将`src`用作对象：

`[**Demo**](http://jsbin.com/opeyax/1/edit)`

您说您需要使用`rel`，但是，正如评论中所建议的那样，**更好的选择**`data`是您使用属性来存储此类数据，因为这是他们的工作，而不是`rel`'s。该`HTML`元素看起来像这样：

```
<a data-gallery="gal1" data-smallimage="images/small.jpg" data-largeimage="images/large.jpg" href="#"> 
```

## 编辑：如何更改 rel 对象

您询问如何使用另一个图像标签的属性更改`src`对象的一个`src`​​属性。然后你会这样做：

```
// Get the attribute you want to substitute
var image = $('img').attr('src');

// Substitute it into the object properties
src.smallimage = image;
src.largeimage = image;

// Turn the object back into a string to put it back into the rel attribute
src = JSON.stringify(src);
$('a').attr('rel', src); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:16:37.040

看到这个：

```
$(function () {
    var src = $.parseJSON($("a:first").prop("rel"));
    src.smallimage = "images/newimage1.jpg";
    src.largeimage = "images/newimage1.jpg";

    alert("Before : " + $("a:first").prop("rel"));
    $("a:first").prop("rel", JSON.stringify(src));
    alert("After : " + $("a:first").prop("rel"));
}); 
```

和：

```
<a rel='{"gallery": "gal1", "smallimage": "images/image1.jpg","largeimage": "images/image1.jpg"}'>
    <img src = "images/image1.jpg" >
</a> 
```

`**[SAMPLE](http://jsfiddle.net/EUJdw/2/)**`

# ios6 - 如何更改 UICollectionView 中的导航栏背景

> ID：15253337
> 
> 赞同：0
> 
> 时间：2013-03-06T16:54:10.303
> 
> 标签：ios6, uinavigationbar, uicollectionview

我有一个包含十几个不同视图控制器的项目。全部使用相同的代码来设置导航栏的背景，如下所示：

```
CGRect frame = CGRectMake(0, 0, [self.title sizeWithFont:[UIFont fontWithName:@"HelveticaNeue" size:28]].width, 44);
    UILabel *titleLabel = [[UILabel alloc] initWithFrame:frame];
    titleLabel.text = @"Categories";
    titleLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:22];
    titleLabel.backgroundColor = UIColorFromRGBWithAlpha(0x84A537, 0.5);
    titleLabel.textAlignment = NSTextAlignmentCenter;
    self.navigationItem.titleView = titleLabel;

    self.navigationController.navigationBar.tintColor = UIColorFromRGBWithAlpha(0x84A537, 0.5);
    self.navigationItem.titleView.backgroundColor = [UIColor clearColor];
    self.navigationController.view.backgroundColor = UIColorFromRGBWithAlpha(0x84A537, 0.1); 
```

除了标题文本为灰色背景的 CollectionView 之外，它们都可以正常工作。我复制并粘贴了其他 VC 的代码。我不知道我在做什么来造成这种情况。我像这样设置颜色十六进制值：

```
//RGB color macro
#define UIColorFromRGB(rgbValue) [UIColor \
colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
blue:((float)(rgbValue & 0xFF))/255.0 alpha:1.0]

//RGB color macro with alpha
#define UIColorFromRGBWithAlpha(rgbValue,a) [UIColor \
colorWithRed:((float)((rgbValue & 0xFF0000) >> 16))/255.0 \
green:((float)((rgbValue & 0xFF00) >> 8))/255.0 \
blue:((float)(rgbValue & 0xFF))/255.0 alpha:a] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:24:29.120

似乎集合视图的导航栏样式设置与其他视图控制器不同。对于这些，我必须在调用控制器中设置条形颜色，并设置导航。集合视图中的条形背景颜色为 clearColor。

我希望这对其他人有帮助。

调用VC：

```
- (IBAction)imageButtonTapped:(id)sender {
    imageCellLayout = [[ImageCellLayout alloc] init];

    imageViewController= [[ImageViewController alloc] initWithCollectionViewLayout:imageCellLayout];
    imageViewController.item = item;
    addImageViewController.item = item;
    imageViewController.collectionView.pagingEnabled = YES;
    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:imageViewController];
    nc.navigationBar.tintColor =  UIColorFromRGBWithAlpha(0xC43F32, 0.5);
    nc.modalPresentationStyle = UIModalPresentationPageSheet;
    [self presentViewController:nc animated:YES completion:nil];

} 
```

收藏视图：

```
//Title Stuff

CGRect frame = CGRectMake(0, 0, [self.title sizeWithFont:[UIFont fontWithName:@"HelveticaNeue" size:28]].width, 44);
UILabel *titleLabel = [[UILabel alloc] initWithFrame:frame];
NSString *tempTitle = item.title;
titleLabel.text = tempTitle;
titleLabel.font = [UIFont fontWithName:@"HelveticaNeue" size:22];
titleLabel.backgroundColor = [UIColor clearColor];
titleLabel.textAlignment = NSTextAlignmentCenter;
self.navigationItem.titleView = titleLabel; 
```

# richfaces - a4j：单击按钮后不调用jsFunction

> ID：15253341
> 
> 赞同：0
> 
> 时间：2013-03-06T16:54:15.710
> 
> 标签：richfaces, ajax4jsf

我正在开发我的 jsf2,jaas,richfaces 应用程序，我有这个登录页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich" template = "/WEB-INF/template/login.xhtml" >

        <p>Login to access secure pages:</p>
        <form method='post' action='j_security_check'>
            <h:messages layout='table' errorStyle='background: #AFEEEE;'
                infoStyle='background: #AFEEEE;' globalOnly='true' />
            <h:panelGrid columns='2' styleClass="myTable3">
                <h:outputLabel value='Username: ' />
                <input type='text' id='j_username' name='j_username' />
                <h:outputLabel value='Password: ' />
                <input type='password' id='j_password' name='j_password' />
                <h:outputText value='' />
                <h:panelGrid columns='1'>
                    <input type='submit' name='submit' value='Login' onclick="selectActiveClient();"/>
                </h:panelGrid>
            </h:panelGrid>
        </form>

            <a4j:jsFunction name="selectActiveClient"
                action="#{selectBean.someAction()}"
                render="pannelloClientiAttivi"/>

</ui:composition> 
```

但是 selectActiveClient 没有被调用，怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:58:07.400

`a4j:jsFunction`需要一个表格，用`h:form`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:10:48.497

使用 a`<h:commandButton>`而不是你的`<input type='submit' name='submit' value='Login' onclick="selectActiveClient();"/>`.

# c# - 解析字符串以获取所需信息

> ID：15253343
> 
> 赞同：0
> 
> 时间：2013-03-06T16:54:20.823
> 
> 标签：c#, string, parsing

例如，我有一个带有不同信息的字符串

```
string str = "

Description: 
TEXT,TEXT,TEXT,TEXT,TEXT,TEXT

Note:
TEXT1,TEXT1,TEXT1,TEXT1,TEXT1

Description: 
TEXT2,TEXT2,TEXT2,TEXT2,TEXT2

Note:
TEXT3, TEXT3, TEXT3, TEXT3, TEXT3" 
```

我想以某种方式解析它以获得这个结果：

```
resultString1 = "  
Description: 
TEXT,TEXT,TEXT,TEXT,TEXT,TEXT

Description: 
TEXT2,TEXT2,TEXT2,TEXT2,TEXT2" 

resultString2 = 
Note:
TEXT1,TEXT1,TEXT1,TEXT1,TEXT1

Note:
TEXT3, TEXT3, TEXT3, TEXT3, TEXT3" 
```

**更新**

我正在从文件中读取此信息，因此字符串由循环填充，并且每个描述和注释之后都有一个新行，因此可能应该是一个小算法，将读取直到下一次出现注释，如果找到注释会读到下一个新行..类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:16:22.707

我看到您想要订购/剪切您的内容。

这是一个可能的解决方案：

```
// string to sort / cut
string str ="
Description: 
TEXT,TEXT,TEXT,TEXT,TEXT,TEXT

Note:
TEXT1,TEXT1,TEXT1,TEXT1,TEXT1

Description: 
TEXT2,TEXT2,TEXT2,TEXT2,TEXT2

Note:
TEXT3, TEXT3, TEXT3, TEXT3, TEXT3";

//List of string to retrieve tags descriptions
List<String> tagsDescriptions = new List<String>();
//List of string to retrieve tags notes
List<String> tagsNotes = new List<String>();

// Read str and get only the Description content 'sample'
using (StringReader reader = new StringReader( text )) 
            { 
                string line; 
                bool getContent = false;
                while ((line = reader.ReadLine()) != null) 
                { 
                    if(getContent)
                    {
                        tagsDescription.Add(line);
                        getContent = false;
                    }
                    if(line.contain("Description"))
                    {
                        getContent = true;

                    }
                } 
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:11:31.063

你可以试试这个。我没有测试过这个，它不是很有效。将其用作指南。这假设您遵循格式描述：>> 注意：。您必须执行类似的操作才能获取 Note 变量。：

```
string input = @"

Description: 
TEXT,TEXT,TEXT,TEXT,TEXT,TEXT

Note:
TEXT1,TEXT1,TEXT1,TEXT1,TEXT1

Description: 
TEXT2,TEXT2,TEXT2,TEXT2,TEXT2

Note:
TEXT3, TEXT3, TEXT3, TEXT3, TEXT3";

int startPosition = 0;
int descPosition = -1;
string descriptionResults = "";

while (input.IndexOf("Description:", startPosition) > -1)
{
    descPosition = input.IndexOf("Description:", startPosition);
    int notePosition = input.IndexOf("Note:", startPosition);

    descriptionResults += input.SubString(descPosition, notePosition);
    startPosition = descPosition;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:15:11.323

使用以下正则表达式将起作用：

```
Description:\s*(.*) 
```

只需抓住创建的组

[这是结果匹配的链接](http://rubular.com/r/6YfzuciGkq)。我不知道可以保存链接的.net 在线正则表达式测试器

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T17:07:55.400

您可以使用两个正则表达式来匹配您需要的字符串对于类似的描述：`Description:.\r*\n*.*`

对于注释，例如：`Note:\r*\n*.*`

```
Regex regex = new Regex("Description:.\r*\n*.*");
        string str1 = @"Description: 
            TEXT,TEXT,TEXT,TEXT,TEXT,TEXT

            Note:
            TEXT1,TEXT1,TEXT1,TEXT1,TEXT1

            Description: 
            TEXT2,TEXT2,TEXT2,TEXT2,TEXT2

            Note:
            TEXT3, TEXT3, TEXT3, TEXT3, TEXT3";
        string output = string.Empty;
        foreach (var match in regex.Matches(str1))
        {
            output += match;
        }

Regex regex = new Regex("Note:\r*\n*.*");
        string str1 = @"Description: 
            TEXT,TEXT,TEXT,TEXT,TEXT,TEXT

            Note:
            TEXT1,TEXT1,TEXT1,TEXT1,TEXT1

            Description: 
            TEXT2,TEXT2,TEXT2,TEXT2,TEXT2

            Note:
            TEXT3, TEXT3, TEXT3, TEXT3, TEXT3";
        string output = string.Empty;
        foreach (var match in regex.Matches(str1))
        {
            output += match;
        } 
```

稍加操作，您就可以得到结果。

# javascript - Typescript 生成的 JavaScript 有一个不是函数的函数

> ID：15253346
> 
> 赞同：2
> 
> 时间：2013-03-06T16:54:23.253
> 
> 标签：javascript, node.js, compiler-construction, typescript

这个打字稿：

```
export enum UID {
    FACTORY,
    ROBOT
} 
```

编译成这个 javascript：

```
(function (UID) {
    UID._map = [];
    UID._map[0] = "FACTORY";
    UID.FACTORY = 0;
    UID._map[1] = "ROBOT";
    UID.ROBOT = 1;
})(exports.UID || (exports.UID = {}));
var UID = exports.UID; 
```

我不得不承认代码对我来说似乎相当晦涩，但我相信 tsc 编译器知道它在做什么。不幸的是，javascript无法执行。nodejs 抱怨说：

> （函数（UID）{
> 
> ^ 类型错误：对象不是函数
> 
> ```
> at ... 
> ```

我做错了什么？

更新：Matt B. 已经解决了这个问题。这是 typescript 编译器中的一个已知错误。tsc 无法在 require 语句后插入分号，这可能会导致奇怪的错误。手动将分号添加到我的代码中解决了这个问题。这是 codeplex 问题的链接：http: [//typescript.codeplex.com/workitem/364](http://typescript.codeplex.com/workitem/364)

**更新2：** 对于那些遇到同样错误的人。您可以手动插入缺少的分号，但这不是一个非常舒适的解决方案，因为您必须在每次编译后执行此操作。我注意到这个问题只发生在枚举上。项目中有很多其他模块，没有一个模块导致这个错误。显然，类定义并没有被前面缺少的分号“伤害”。只需将枚举的定义移到您的一个类定义后面，错误就会消失。将枚举移到接口后面是不够的，因为接口没有直接等价物，只是被编译器删除

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:26:57.630

I think this is the same issue as described here -- which turned out to be due to a missing semicolon after a `require()` statement:

[Typescript generating javascript that doesn't work](https://stackoverflow.com/questions/13203558/typescript-generating-javascript-that-doesnt-work/13203882#comment21512231_13203882)

Is there a line like this in another *compiled* file?

`var UID = require('UID')`

If so, try adding a semicolon at the end:

`var UID = require('UID');`

This appears to be a TypeScript bug; here's the bug report (vote it up!): [http://typescript.codeplex.com/workitem/364](http://typescript.codeplex.com/workitem/364)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:15:55.573

在你的 Javascript 中你应该有类似的东西

```
var exports = exports || {}; 
```

前

```
(function (UID) {
    UID._map = [];
    UID._map[0] = "FACTORY";
    UID.FACTORY = 0;
    UID._map[1] = "ROBOT";
    UID.ROBOT = 1;
})(exports.UID || (exports.UID = {}));
var UID = exports.UID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:51:36.940

I tried and I have the same problem - I assume that the missing `exports` variables should be generated by the JavaScript code used to load the module when you do

```
import XXXX = module("XXXX"); 
```

that generates this JavaScript:

```
var XXXX = require("./XXXX") 
```

and I think Matt B. is right and the problem there is the missing semi-colon after `require()`, that messes things up afterwards.

A fix is to place the enumeration declaration in a module:

```
module Test {

    export enum UID {
      FACTORY,
      ROBOT
    }

} 
```

that generates:

```
var test;
(function (test) {
    (function (UID) {
        UID._map = [];
        UID._map[0] = "FACTORY";
        UID.FACTORY = 0;
        UID._map[1] = "ROBOT";
        UID.ROBOT = 1;
    })(test.UID || (test.UID = {}));
    var UID = test.UID;
})(test || (test = {})); 
```

in this way the `exports` variable is no longer needed.

# stored-procedures - TSQL：如果在存储过程中，查询不会返回行

> ID：15253354
> 
> 赞同：0
> 
> 时间：2013-03-06T16:54:45.693
> 
> 标签：stored-procedures, sql-server-2008-r2

我有一个需要一些参数的查询。

在 SQL Server Management Studio 的标准查询屏幕上执行它就像预期的那样在大约 15 秒后返回一些数据行。这是一个复杂的查询。

但是在存储过程中执行它只返回没有任何数据行的标题。

此外，它的执行只需要 1~2 秒。

没有返回或显示错误。

它的方面是这样的：

```
CREATE PROCEDURE [dbo].[sp_StoreProcedure]
    @FDId INT
    , @Year INT
    , @NDate DATETIME
    , @SDate DATETIME
    , @MId INT
AS
BEGIN
    SET NOCOUNT ON;

    SELECT of complex query
END 
```

它的调用很简单：

```
DECLARE @FDId INT
DECLARE @Year INT
DECLARE @NDate DATETIME
DECLARE @SDate DATETIME
DECLARE @MId INT

SET @FDId = 926
SET @Year = 2012
SET @NDate = '1900-01-01'
SET @SDate = GetDate()
SET @MId = 1

EXEC [outsystems].[dbo].[sp_StoreProcedure]
    @FDId
    , @Year
    , @SDate
    , @NDate
    , @MId 
```

但它返回一个空表。

这怎么可能 ？我能做些什么来解决它？

编辑 --> 复杂查询有 24 个连接。在这里展示它会是巨大的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:20:20.767

真的很容易犯错。

当您声明存储过程时：

```
CREATE PROCEDURE [dbo].[sp_StoreProcedure]
    @FDId INT
    , @Year INT
    , @NDate DATETIME
    , @SDate DATETIME
    , @MId INT 
```

执行时，您没有在正确的序数位置传递参数：

```
EXEC [outsystems].[dbo].[sp_StoreProcedure]
    @FDId
    , @Year
    , @SDate
    , @NDate
    , @MId 
```

请注意，在调用过程时，`SDate`和`NDate`是相反的方式。

这应该有效：

```
EXEC [outsystems].[dbo].[sp_StoreProcedure]
    @FDId
    , @Year
    , @NDate
    , @SDate
    , @MId 
```

如果您在执行时指定了哪个参数（而不是依赖于序数位置），这将不是问题，这将是一个更好的主意。

# php - PHP - 遍历 SQL 结果集。当条件满足时重复

> ID：15253358
> 
> 赞同：0
> 
> 时间：2013-03-06T16:54:56.690
> 
> 标签：php, loops, while-loop, html-table

PHP 很新，所以这是问题所在。我有一个具有以下结构的 SQL 结果集：

```
ItemID Desc
0      A
1      B
2      C
0      D
3      E
0      F
4      G
5      H 
```

对于每个 ItemID = 0 我想创建一个表。然后对于 ItemID = 0 下的每个 ItemID，我想在新表中创建一行，直到我点击下一个 ItemID = 0。重复直到结束。

期望的结果：

```
<table>
    <tr>
        <td>A</td>
    </tr>
</table>
<table>
    <tr>
        <td>B</td>
    </tr>
    <tr>
        <td>C</td>
    </tr>
</table>
<table>
    <tr>
        <td>D</td>
    </tr>
</table>
<table>
    <tr>
        <td>E</td>
    </tr>
</table>
<table>
    <tr>
        <td>F</td>
    </tr>
</table>
<table>
    <tr>
        <td>G</td>
    </tr>
    <tr>
        <td>H</td>
    </tr>
</table> 
```

当 ItemID = 0 时，我可以打印每个表，但怀疑这是正确的方法。这是我到目前为止的php代码：

```
$legendSql="select ItemID, Desc from ...";
$getLegend=sqlsrv_query($conn, $legendSql);
while( $row = sqlsrv_fetch_array( $getLegend, SQLSRV_FETCH_ASSOC) ) {
    if ($row['ItemID'] === '.00') { // when ItemID = 0 create table
        print '<table>';
        print '<tr>';
        print '<td>';
        print $row['Desc'];
        print '</td>';
        print '</tr>';
        print '</table>';
    }
//    foreach( )?????
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:02:15.760

像这样的东西：

```
$first=1;

while( $row = sqlsrv_fetch_array( $getLegend, SQLSRV_FETCH_ASSOC) )
  {

    if ($row['ItemID'] === '.00') // when ItemID = 0 create table
    {
      if ($first==0)
      {
        print '</table>';
      }
      print '<table>';
      print '<tr>';
      print '<td>';
      print $row['Desc'];
      print '</td>';
      print '</tr>';
      print '</table>';
      $first=1;
    }
    else
    {
      if ($first==1)
      {
        print '<table>';
        $first=0
      }
      print '<tr>';
      print '<td>';
      print $row['Desc'];
      print '</td>';
      print '</tr>';
    }
}
if ($first==0)
{
  print '</table>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:59:48.550

稍微改变一下你的`if`说法：

```
if ($row['ItemID'] === '.00') { // when ItemID = 0 create table
    print '<table>';
}
print '<tr>';
print '<td>';
print $row['Desc'];
print '</td>';
print '</tr>'; 
```

在`while`循环之外，把这个：

```
print '</table>'; 
```

* * *

整个循环结构变为：

```
while( $row = sqlsrv_fetch_array( $getLegend, SQLSRV_FETCH_ASSOC) ) {
    if ($row['ItemID'] === '.00') {
        print '<table>';
    }
    print '<tr>';
    print '<td>';
    print $row['Desc'];
    print '</td>';
    print '</tr>';
}
print '</table>'; 
```

# ios - openGL 一种 osx 的游戏设计方式

> ID：15253366
> 
> 赞同：1
> 
> 时间：2013-03-06T16:55:07.880
> 
> 标签：ios, macos, opengl

我的目标是一款游戏，稍后也会在 MacOS 和 iOS 上运行。

第一种方法是在主循环中使用 GLUT：

```
int main ( int argc, char * argv [] )
{
                                // initialize glut
    glutInit            ( &argc, argv );
    glutInitDisplayMode ( GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );
    glutInitWindowSize  ( 500, 500 );

                                // create window
    glutCreateWindow ( "Simple GLUT Example" );

                                // register handlers
    glutDisplayFunc  ( display );
    glutReshapeFunc  ( reshape );
    glutKeyboardFunc ( key     );
    glutMouseFunc    ( mouse   );
    glutMotionFunc   ( motion  );
    glutIdleFunc     ( animate );

    glutMainLoop ();

    return 0;
} 
```

这可能是一个不错的决定，但我现在没有经验，我如何捕捉用户交互（触摸、鼠标移动等）

第二种方式，我正在调查的是使用 NSOpenGLView 的子类：

```
 - (void) setupRenderTimer
    {
        NSTimeInterval timeInterval = 0.005;

        renderTimer =  [ NSTimer scheduledTimerWithTimeInterval:timeInterval
                                                          target:self
                                                        selector:@selector( updateGLView: )
                                                        userInfo:nil repeats:YES ];
        [ [ NSRunLoop currentRunLoop ] addTimer:renderTimer
                                        forMode:NSEventTrackingRunLoopMode ];
        [ [ NSRunLoop currentRunLoop ] addTimer:renderTimer
                                        forMode:NSModalPanelRunLoopMode ];
    }

    /*
     * Called by the rendering timer.
     */
    - (void) updateGLView:(NSTimer *)timer
    {
        if( glView != nil )
            [ glView drawRect:[ glView frame ] ];
    }

- (void) awakeFromNib
{
    [ NSApp setDelegate:self ];   // We want delegate notifications
    renderTimer = nil;
    //[self makeFirstResponder:self ];
    glView = [ [ MyOpenGLView alloc ] initWithFrame:[ self.myGLview frame ]
                                          colorBits:16 depthBits:16 fullscreen:FALSE ];
    if( glView != nil )
    {
        [ self.window.contentView addSubview:glView ];
        [ self.window makeKeyAndOrderFront:self ];
        [ self setupRenderTimer ];
    }
    else
        [ self createFailed ];
} 
```

最后，我喜欢保留 Cocoa IB 的优势（在 IB 中构建所有控件并使其保持在 OpenGL 上下文之前）。在这种情况下，直到现在我还没有找到一个解决方案，它在 MacOS 下运行良好，我可以在 OpenGL 上下文之前使用可可 IB 元素。在 IB 上下文中，总是预先考虑所有元素，使用以下方法破解：

```
const GLint aValue = 1;
[[self openGLContext] setValues:&aValue
                   forParameter:NSOpenGLCPSurfaceOpacity]; 
```

给了我很好的结果设置背景颜色：

```
glClearColor( 0.0f, 0.0f, 0.0f, 0.0f );   // Black background 
```

不起作用：

![在此处输入图像描述](../Images/4ad628cef8ed6d56b43f87704a773deb.png)

我想要求的是： - 以任何方式以第二种方式取得成功（性能原因可能对我未来至关重要，游戏将拥有大的 3d 世界）。如果是，您能否分享一些有用的示例或编写我当前错误的修复程序。

*   如果第一种方式只有一种方式，那么在一个代码中支持 iOS 和 osx 平台的代码组织是什么（也写一些代码示例）。GLUT 是否可以很好地控制 iOS 的触摸，难以取代所有可可触摸功能，如长按等

*   我很清楚，我需要做一个特定于平台的更改，但也许你可以分享一些经验，如何更好、更简单地完成它。

PS 我知道我可以使用 GLKit，但不幸的是现在它在 MacOS 上工作得非常糟糕，有已知的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:54:51.040

如果您愿意花时间做正确的事，我建议您阅读一两本书，教程也会有所帮助。这里有两个非常基础的教程：[NeHe](http://nehe.gamedev.net/)，[GameTutorials](http://www.gametutorials.com/gtstore/c-1-test-cat.aspx)。

此外，这是一本非常好的初学者书籍（它是免费的）：[学习现代 3D 图形编程](http://www.arcsynthesis.org/gltut/)。

顺便说一句，GLUT 并不是游戏编程的最佳方式。认真的，读一读。为了简单和紧凑，示例 OpenGL 脚本将使用 GLUT，但这不是在现实世界中执行此操作的方法。

# svg - 在 SVG 中为动画缩放文本的问题

> ID：15253375
> 
> 赞同：3
> 
> 时间：2013-03-06T16:55:20.820
> 
> 标签：svg, librsvg

我正在使用 SVG 生成视频动画，我制作了一系列图像并将其转换为视频文件。我需要的一种效果是能够平滑地平移/缩放文本。我试图通过对包含文本的图形上下文应用转换来做到这一点。每一帧的比例/平移都有很小的变化。这种技术对于静态图像效果很好。但不适用于文本。我看到的效果并不像您期望的那样平滑。从一帧到另一帧的文本有一定的抖动/闪烁。就好像字体渲染规则在转换后（而不是转换前）被应用。

所以问题是：如何用文本实现平滑的缩放/平移效果？

一帧示例：

```
<svg width='320' height='180'>
<rect x='0' y='0' width='320' height='180' fill='white' />
<g transform='scale(5.999999999999893)'><text x='50' y='50'>Hello World!</text>
</g></svg> 
```

这是一个演示我的意思的视频剪辑： [http ://www.youtube.com/watch?v=TrEjDeGlPhA&list=UUfWuDb3rpD5OInqUpNivjdA&index=1](http://www.youtube.com/watch?v=TrEjDeGlPhA&list=UUfWuDb3rpD5OInqUpNivjdA&index=1)

或者您可以从头开始创建：我编写了一个小的 Java 程序来生成这些帧，并创建一个 AVI 文件来演示（假设 Linux、mencoder、rsvg-convert 可用）。

```
import java.io.File;
import java.io.Writer;
import java.io.FileWriter;
import java.io.IOException;

public class MakeTextScaleAnimation {

public static void main (String[] arg) throws Exception {

    double s;

    int frame = 0;
    for (s=1.0; s < 8.0; s+=0.005) {
        String framePrefix = "frame" + String.format("%04d", frame);
        File frameFile = new File (framePrefix + ".svg");
        FileWriter w = new FileWriter(frameFile);
        writeFrame(w,s);
        w.close();

        frame++;

        System.out.println ("rsvg-convert " + frameFile.getName() + " > " + framePrefix + ".png");
    }
}

private static void writeFrame(Writer w, double s) throws IOException {
    w.write ("<svg width='320' height='180'>\n");
    w.write ("<rect x='0' y='0' width='320' height='180' fill='white' />\n");
    w.write ("<g transform='scale(" + s + ")'>");
    w.write ("<text x='50' y='50'>Hello World!</text>\n");
    w.write ("</g></svg>");
}
} 
```

这个脚本要运行：

```
#!/bin/bash
javac MakeTextScaleAnimation.java 

# Make SVG animation frames and generate script to convert to PNG
java MakeTextScaleAnimation  > svgtopng.sh

# Convert SVG frames into PNG images
. svgtopng.sh

# Convert the PNG images into a movie file
mencoder mf://frame*.png -mf fps=24:type=png \
-ovc lavc -lavcopts vcodec=mpeg4:vbitrate=3200 \
-o output.avi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T20:11:23.737

我发现的最好方法是将文本变成路径。我使用 Inkscape，它具有“对象到路径”功能。我将设计文件全部保存在文本中以方便更改，并创建一个路径版本以供显示。这是我能找到的最好的解决方法，这也意味着你不依赖于系统字体。如果你有很多文本，它会产生巨大的文件！

# python - 将文本框输出到窗口

> ID：15253377
> 
> 赞同：0
> 
> 时间：2013-03-06T16:55:24.550
> 
> 标签：python

我试图在我的系统中执行以下代码，如果单击提交按钮，窗口没有响应

```
import Tkinter as tk
from Tkinter import *
top=Tk()
text=Text(top)
def onsubmit():
        a=v.get()
        ea.textbox(text=a)

v=StringVar()
t=Entry(top, textvariable=v)
submit=Button(top,text="SUBMIT",command=onsubmit)
t.grid(row=0,column=0)
submit.grid(row=0,column=1)
text.grid(row=1,column=0)

top.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:10:45.397

如果您从终端运行脚本或只是以其他方式查看程序的文本输出，您将看到以下错误（按下按钮后）：

```
NameError: global name 'ea' is not defined 
```

错误在函数的第二行`onsubmit`。这是工作版本：

```
def onsubmit():
    a=v.get()
    text.insert(INSERT, a) 
```

# quartz-scheduler - 如何使用石英 jdbcStore 加载/引导正在进行的作业

> ID：15253382
> 
> 赞同：0
> 
> 时间：2013-03-06T16:55:37.987
> 
> 标签：quartz-scheduler

我正在努力从 Quartz 1.6 迁移到 2.1 并使用 JDBCJobStore。以前，作业是在 webapp 启动时通过 xml 文件加载的。调度程序现在正在使用 JDBCJobStore 运行，但我不明白如何将作业添加到需要持续运行的数据库（不是一次性作业）。

我的第一个想法是创建一个在启动时运行的 servlet，它将作业添加到数据库中。但我担心的是，每次我需要重新启动应用程序时都会执行此操作，并且作业会重复。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:56:26.153

听起来基于内存的调度程序更适合这些固定作业。如果这对您的应用程序有意义，您可以创建多个调度程序、一个内存、一个 JDBC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:30:20.857

重新启动时，作业不会从数据库中消失。因此，在您的 servlet 中，当它启动时，在添加任何作业之前检查它们是否已经存在。当你创建你的工作时，你可以给他们身份。使用身份和一些石英方法检查它们是否已经存在。

# actionscript-3 - AS3 通过函数应用格式

> ID：15253384
> 
> 赞同：1
> 
> 时间：2013-03-06T16:55:43.117
> 
> 标签：actionscript-3, format, handle

我正在尝试编写一个函数，将 TextFormats 应用于它们所属的 TextFields。问题是，我无法将其放入正确的“表格”（如果甚至有正确的表格）。

我的功能目前看起来像这样

```
function applyFormat(TextFild:String,Format:String,EmbFont:String,NameInJson:String){

//
//example:applyFormat("myTextField","myTextFormat","myFont","TextStuff")
//  
//myData=json object
//all textfields etc. already exist. Just anyone wants to ask if they've been already generated.

//at first i thought it could be as easy as this
this[Format].font=myData.NameInJson.Font //doesn't work obviously

//then I tried this method
this[Format].font=myData.this[NameInJson].Font //doesn't work either

//couldn't find a real solution for this on the internet...    
//how it should turn out in the end: myTextFormat.font=myData.TextStuff.Font
} 
```

myData 的相关部分如下所示：

```
"TextStuff":
{
"Font":"Arial",
"Size" : "16",
"Bold" : "true",
"Color" : "0xFFFFFF"
} 
```

我是否需要更改我的 Json 文件才能做到这一点？我是否忽略了一种处理此类变量/值的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:27:52.220

`this[Format]`将在类中查找名为 Format 的属性。AFAIK 这个类必须是动态的才能工作。

如果您将`TextFormat`实例保存在该类的对象中，则管理起来会更容易：

```
// this is a property in the class
private var _textFormats:Object = {};

// create and store text formats in the object
var textFormat:TextFormat = new TextFormat();
_textFormats["myTextFormat"] = textFormat; 
```

现在假设你得到一个这样的 JSON 文本字符串：

```
{
"TextStuff":{
    "Font":"Arial",
    "Size" : "16",
    "Bold" : "true",
    "Color" : "0xFFFFFF"
  }
} 
```

以下应与此调用一起使用`applyFormat("myTextField","myTextFormat","myFont","TextStuff")`

```
function applyFormat(TextField:String, Format:String, EmbFont:String, NameInJson:String):void
{
    var myData:Object = JSON.parse(theJSonString);
    _textFormats[Format].font = myData[NameInJson].Font;
} 
```

# jquery - jQuery数据表，以编程方式更改显示的行数

> ID：15253385
> 
> 赞同：6
> 
> 时间：2013-03-06T16:55:46.883
> 
> 标签：jquery, datatables

有没有办法以编程方式更改显示的行数，而无需从下拉列表中手动选择？

我已经知道如何更改默认行数。当表第一次加载时，我希望它加载所有行，然后“刷新”表以可能只显示前 10 行。但我想以编程方式刷新表格，而不必从下拉列表中选择一个数字。

我的问题是，如果默认行数小于总行数，则在更改下拉编号或通过分页显示隐藏行后，这些行不具有所有 css 或 js 功能我归因于所有行。出于某种原因，只有默认显示的行具有所有功能，而后来显示的行则没有。

我认为用最少的代码解决这个问题的最简单方法是默认加载所有行，然后以编程方式更改显示的行数以仅显示前 10 行左右。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T08:21:47.070

首先，您应该将数据表设置为变量：

```
var oTable = $('#some_selector').dataTable({
    //some properties
}) 
```

然后您可以即时设置设置：

```
var oSettings = oTable.fnSettings();
oSettings._iDisplayLength = 5; 
```

并简单地用新设置重绘你的数据表：

```
oTable.fnDraw(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-07T12:26:25.807

以前的答案对我不起作用，可能是我使用的是较新版本的 DT。将 displayLength 设置为 20 这对我有用：

```
table.context["0"]._iDisplayLength = "20";
table.draw(); 
```

我正在使用数据表 1.10.10

# java - java新手，不明白为什么我的while循环程序不会运行

> ID：15253388
> 
> 赞同：2
> 
> 时间：2013-03-06T16:55:55.580
> 
> 标签：java, loops, while-loop, percentage

这是我要解决的问题。

“墨西哥人口6200万，年增长率7%。美国目前人口2.8亿，年增长率2%。如果这两个国家保持现在的增长率，多少年后墨西哥的人口将超过美国的一半？你的程序应该回答这个问题。

好的，这是我到目前为止的代码。当我运行程序时，我得到了这个错误。

不太确定如何解决。任何人都可以帮忙吗？：/

```
import java.util.Scanner;

public class Whatever {

 public static void main (String [] args){

    Scanner in = new Scanner (System.in);

  int mex = 62000000;
  int usa = 280000000;
  int years = 0;
  double t = 0 ;

   while(mex(Math.pow(1.07, t)) <= usa(Math.pow(1.02, t)))
   {
       t++;
       years = t;
       if (mex > (usa * 0.5));
          break;
  }   

       System.out.println ("Mexicos population is half of America in " + years + "years");
    }   

   } 
```

***编辑***

对于任何想知道我最终让代码工作的人。这是代码。

* * *

导入 java.util.Scanner；

公共课随便{

公共静态无效主要（字符串[]参数）{

```
Scanner scan = new Scanner (System.in);

double mex = 62000000;
double usa = 280000000;
double years = 0;

    while(mex <= usa/2) 
    {   
        years++;
    mex = mex * 1.07;
    usa = usa * 1.02;

    }       
    System.out.println ("Mexicos population is half of America in " + years + " years ");
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:58:57.073

mex 是一个整数。

我想你是想繁殖。

如果要相乘，请使用 mex * (Math.pow(1.07, t)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:58:56.733

你的问题在这里：

```
while(mex(Math.pow(1.07, t)) <= usa(Math.pow(1.02, t))) 
```

将括号放在变量后面向 Java 发出信号，表明您正在尝试使用该名称调用函数（在本例中为`mex`and `usa`）。您实际上**要做**的是乘以这些值，因此您需要在其中使用星号：

```
while(mex*(Math.pow(1.07, t)) <= usa*(Math.pow(1.02, t))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T16:58:18.357

在您的代码中，您定义了几个变量：

```
int mex = 62000000;
int usa = 280000000;
int years = 0;
double t = 0 ; 
```

但是，您尝试将这些用作函数：

```
while(mex(Math.pow(1.07, t)) <= usa(Math.pow(1.02, t))) 
```

在 Java 中，这些变量用作函数的参数；不是相反！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:58:24.993

您已将括号应用于`mex`while 循环中的 " " 表达式（就好像它是一个函数），其中 " `mex`" 只是一个常规变量。您对“美国”的使用也是如此..

```
while(mex(Math.pow(1.07, t)) <= usa(Math.pow(1.02, t)))
         ^^^               ^ 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-06T17:01:02.097

为了进行乘法运算，您需要使用`*`，即

```
 while(mex * (Math.pow(1.07, t)) <= usa * (Math.pow(1.02, t))) 
```

# asp.net - 使用 jQuery 进行动态验证

> ID：15253389
> 
> 赞同：0
> 
> 时间：2013-03-06T16:56:02.323
> 
> 标签：asp.net, jquery-plugins, validation

我需要你的帮助。我需要为将动态生成的复杂表单创建一个验证框架。例如，用户选择了一些他想要更改的模板，然后他会收到一个要填充数据的字段列表。字段数最多可达 150 个。验证规则的类型将很少

*   正则表达式
*   字段是否必填
*   数据类型 - 字符串、数字或字母数字（可以使用 RegExp 进行验证）

每个字段的所有规则都将存储在数据库中。复杂性在于每个字段可能有自己的正则表达式，因此验证错误消息也不同。我附上了描述控件外观的图像：

![字段](../Images/8166055ad114d587158de05ae1c5e063.png)

我正在考虑使用 JQuery 框架并分配每个控件以使用该属性进行验证，但不确定是否可以使用 JQuery 完成此任务。

将不胜感激任何建议！非常感谢！

# android - OnClick 侦听器无法加载布局

> ID：15253396
> 
> 赞同：0
> 
> 时间：2013-03-06T16:56:46.580
> 
> 标签：android, xml

我创建了一个 java 文件，它应该允许用户单击图像并加载另一个布局（超级简单的代码位 - 但请记住我有点菜鸟）但每次单击它时我都会得到一个强制关闭错误消息，尽管对我来说一切似乎都是正确的（这表明我所知道的）

我知道这可能是超级简单的事情 - 或者是一种类型的问题。

任何帮助是极大的赞赏！

* * *

JAVA

```
package com.example.linkingmanager;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;
import android.content.Intent;
import android.view.View; import android.view.View.OnClickListener;

public class App2Activity extends Activity {

Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main2);
}
public class Test extends Activity {  

 public void imageClick(View view) {  
  //Implement image click function
     Intent intent = new Intent(App2Activity.this, AppActivity.class);
     App2Activity.this.startActivity(intent);
 }  
    }
;
} 
```

* * *

LOGCAT

```
03-06 16:55:06.709: E/Trace(1634): error opening trace file: No such file or directory (2)
03-06 16:55:07.279: D/dalvikvm(1634): GC_FOR_ALLOC freed 54K, 8% free 2456K/2652K, paused 47ms, total 50ms
03-06 16:55:07.319: I/dalvikvm-heap(1634): Grow heap (frag case) to 5.831MB for 3456016-byte allocation
03-06 16:55:07.479: D/dalvikvm(1634): GC_FOR_ALLOC freed 2K, 4% free 5829K/6028K, paused 152ms, total 152ms
03-06 16:55:07.579: D/dalvikvm(1634): GC_CONCURRENT freed <1K, 4% free 5828K/6028K, paused 10ms+16ms, total 100ms
03-06 16:55:08.209: D/libEGL(1634): loaded /system/lib/egl/libEGL_emulation.so
03-06 16:55:08.209: D/(1634): HostConnection::get() New Host Connection established 0x2a1727a0, tid 1634
03-06 16:55:08.289: D/libEGL(1634): loaded /system/lib/egl/libGLESv1_CM_emulation.so
03-06 16:55:08.299: D/libEGL(1634): loaded /system/lib/egl/libGLESv2_emulation.so
03-06 16:55:08.499: W/EGL_emulation(1634): eglSurfaceAttrib not implemented
03-06 16:55:08.569: D/OpenGLRenderer(1634): Enabling debug mode 0
03-06 16:55:11.969: W/EGL_emulation(1634): eglSurfaceAttrib not implemented
03-06 16:55:18.629: D/AndroidRuntime(1634): Shutting down VM
03-06 16:55:18.629: W/dalvikvm(1634): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-06 16:55:18.659: E/AndroidRuntime(1634): FATAL EXCEPTION: main
03-06 16:55:18.659: E/AndroidRuntime(1634): java.lang.IllegalStateException: Could not find a method imageClick(View) in the activity class com.example.linkingmanager.App2Activity for onClick handler on view class android.widget.ImageView with id 'imageView1'
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.view.View$1.onClick(View.java:3586)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.view.View.performClick(View.java:4204)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.view.View$PerformClick.run(View.java:17355)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.os.Handler.handleCallback(Handler.java:725)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.os.Looper.loop(Looper.java:137)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at java.lang.reflect.Method.invokeNative(Native Method)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at java.lang.reflect.Method.invoke(Method.java:511)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at dalvik.system.NativeStart.main(Native Method)
03-06 16:55:18.659: E/AndroidRuntime(1634): Caused by: java.lang.NoSuchMethodException: imageClick [class android.view.View]
03-06 16:55:18.659: E/AndroidRuntime(1634):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at java.lang.Class.getMethod(Class.java:915)
03-06 16:55:18.659: E/AndroidRuntime(1634):     at android.view.View$1.onClick(View.java:3579)
03-06 16:55:18.659: E/AndroidRuntime(1634):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:06:19.537

您正在`onClick`布局文件 ( ) 中设置属性`R.layout.main2`：

```
android:onClick="imageClick" 
```

此布局是`App2Activity`视图层次结构的一部分。所以你必须在`imageClick(View)`里面声明方法`App2Activity`：

```
public class App2Activity extends Activity {
    private Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
    }

     public void imageClick(View view) {  
         Intent intent = new Intent(App2Activity.this, AppActivity.class);
         App2Activity.this.startActivity(intent);
     }  

} 
```

而不是在`Test`课堂上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T16:58:43.110

为什么你在另一个活动中定义另一个活动。

```
public class App2Activity extends Activity {
    private Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);
        button.setOnClickListener(buttonListener);
    }

    private OnClickListener buttonListener = new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent intent = new Intent(App2Activity.this, AppActivity.class);
            App2Activity.this.startActivity(intent);
        }
    };
} 
```

# mysql - 为什么 UNION ALL 似乎要等待两个查询完成？

> ID：15253399
> 
> 赞同：3
> 
> 时间：2013-03-06T16:56:58.213
> 
> 标签：mysql, sql, sleep, union-all

运行此查询：

```
select null, "hello" union all select sleep(4), "world"; 
```

on 5.5.29 不会按预期立即返回第一行。相反，我必须等待 4 秒钟才能得到任何东西。**如何让 MySQL 立即返回第一行？**

我正在尝试测试慢查询的处理。划分它是没有意义的，因为我会测试其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:00:03.187

> 如何让 MySQL 立即返回第一行？

分别运行两个查询，而不是使用 UNION。我承认这个答案可能看起来有点陈词滥调，但它可能是您问题的唯一真正答案。

它必须执行第二个查询的一个原因是 UNION 要求所有联合子查询中的所有列都相同。即数量相同，数据类型兼容。它甚至可以根据第二个查询返回的内容提升数据类型（例如，将 INT 扩展为 BIGINT）。因此，它必须从所有子查询中至少取回一行，然后才能确定结果集第一行的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:00:09.310

您已通过使用 UNION ALL 构造请求单个记录集。如果你想看到一个部分接着另一个，告诉 SQL 引擎；将第一部分作为一个查询运行以返回记录集，然后将后半部分作为另一个查询运行以返回第二个记录集。两者可以在客户端连接在一起。

# handler - Netty 4.0 ChannelInboundByteHandler 和 ChannelInboundMessageHandler 的区别

> ID：15253400
> 
> 赞同：0
> 
> 时间：2013-03-06T16:57:04.637
> 
> 标签：handler, netty, channel

在 Netty 4.0 中，ChannelInboundByteHandler 和 ChannelInboundMessageHandler 或 ChannelOutboundByteHandler 和 ChannelOutboundMessageHandler 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:59:06.307

那么 Channel*ByteHandler 对字节“流”进行操作，而 Channel*MessageHandler 对消息进行操作。

另请阅读 [1]。

[1] [http://netty.io/4.0/guide/](http://netty.io/4.0/guide/)

# c++ - 将输入解释为十六进制数

> ID：15253401
> 
> 赞同：0
> 
> 时间：2013-03-06T16:57:08.620
> 
> 标签：c++, hex, ascii

我在尝试将我的输入解释为十六进制数字时遇到了一些麻烦。例如，如果给定 的输入，并假设我有一个大小为 2 ^(16)`40A2`的数组，我将如何访问以下示例？

```
arr[0x40A2] //this is simply accessing the array at binary 0100 0000 1010 0010 
              which is at index 16546 
```

我对此有点麻烦，因为当程序接收到用户的输入时，数字会被解释为 ASCII 值，并且需要被解释为十六进制值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:00:26.577

你如何阅读输入？C++ 标准输入流理解[`std::hex`修饰符](http://en.cppreference.com/w/cpp/io/manip/hex)：

```
unsigned int index;
std::cin >> std::hex >> index; 
```

# php - 在PHP中将多个数组从一个结果合并到一个数组中

> ID：15253402
> 
> 赞同：0
> 
> 时间：2013-03-06T16:57:08.947
> 
> 标签：php, mysql, arrays

真的很抱歉打扰你，我有一个问题，我已经尝试解决了很长一段时间了。我做了一些研究，发现了像 array_merge 这样的东西，但它似乎对我没有帮助。

无论如何，足够的华夫饼。我的查询结果如下所示：

```
Array
(
    [0] => STRINGA
)
Array
(
    [0] => STRINGA
    [1] => STRINGB
)
Array
(
    [0] => STRINGA
    [1] => STRINGB
    [2] => STRINGC
)
Array
(
    [0] => STRINGD
    [1] => STRINGC
    [2] => STRINGA
    [3] => STRINGB
    [4] => STRINGE
    [5] => STRINGF
) 
```

如何将上述内容组合到一个数组中，以使结果看起来更像：

```
Array
(
    [0] => STRINGA
    [1] => STRINGB
    [2] => STRINGC
    [3] => STRINGD
    [4] => STRINGE
    [5] => STRINGF
) 
```

可以忽略原始数组中的重复项，因为我只需要将字符串放入新数组一次。

任何帮助将不胜感激。

谢谢你。

编辑：这是从数据库中提取结果的代码块：

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    foreach($row as $splitrow) {
        if(NULL != $splitrow) {
            $therow = explode(';',$splitrow);
        }   
        //print_r retrieves result shown above
        print_r($therow);                                    
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T16:59:32.987

```
$bigarray = array(
  array (
    0 => 'STRINGA',
  ),
  array (
    0 => 'STRINGA',
    1 => 'STRINGB',
  ),
  array(
    0 => 'STRINGA',
    1 => 'STRINGB',
    2 => 'STRINGC',
  )
);

$result = array_values( 
    array_unique( 
        array_merge( $bigarray[0], $bigarray[1], $bigarray[2] ) 
    ) 
);  
// array_merge will put all arrays together, including duplicates
// array_unique removes duplicates
// array_values will sort out the indexes in ascending order (1, 2, 3 etc...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T14:27:22.583

```
 $bigarray = array();

    while ($row = $result->fetch(PDO::FETCH_ASSOC)) {

            foreach($row as $value){

                if($value != NULL){
                    $therow = explode(';',$value);

                    foreach($therow as $key=>$values){

                        //push the value into the single array 'bigarray'
                        array_push($bigarray, $values); 

                    }
                }                                    
            }           
    }
    //remove duplicates 
    $uniquearray = array_unique($bigarray);
    //reset key values
    $indexedarray = array_values($uniquearray);

    print_r($indexedarray); 
```

感谢所有帮助过的人，非常感谢！

# python - Python + Selenium 网络驱动程序

> ID：15253403
> 
> 赞同：0
> 
> 时间：2013-03-06T16:57:09.430
> 
> 标签：python, selenium, webdriver

有谁知道如何在 python 中安装 selenium？

是的，我使用窗户。我的蟒蛇是2.7

所以我尝试使用这个链接：[https ://pypi.python.org/pypi/selenium](https://pypi.python.org/pypi/selenium)

但问题是：我在哪里运行“pip install -U command selenium”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:59:43.767

```
pip install -U selenium 
```

后

```
java -jar selenium-server-standalone-2.31.0.jar 
```

简单的例子：

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException
from selenium.webdriver.common.keys import Keys
import time

browser = webdriver.Firefox() # Get local session of firefox
browser.get("http://www.yahoo.com") # Load page
assert "Yahoo!" in browser.title
elem = browser.find_element_by_name("p") # Find the query box
elem.send_keys("seleniumhq" + Keys.RETURN)
time.sleep(0.2) # Let the page load, will be added to the API
try:
    browser.find_element_by_xpath("//a[contains(@href,'http://seleniumhq.org')]")
except NoSuchElementException:
    assert 0, "can't find seleniumhq"
browser.close() 
```

# android - 带有opengl导航元素、背景图片和视频的android应用

> ID：15253405
> 
> 赞同：-1
> 
> 时间：2013-03-06T16:57:12.393
> 
> 标签：android, video, opengl-es

我已经用 setContetnView 和 xml 布局完成了一个视图应用程序......实际上我在 opengl 中做了一些步骤。现在我想要一个背景图像，一个视频区域和视频区域旁边的 opengl 3d 导航元素来控制视频。

是否有必要在 opengl 中完成整个工作，或者是否可以将 opengl 部分放在现有视图上？

我在哪里可以找到这方面的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:07:43.183

您可以将`OpenGL`视图置于其他视图之上。我开发了一个将 OpenGLView 放在`VideoView`. 可能存在一些性能问题，因此我建议将硬件加速属性添加到您的`AndroidManifest.xml`（在应用程序元素下）：

```
android:hardwareAcceleration="true" 
```

要获得所需的布局，您需要知道的一件事是`SurfaceView`s 不符合正常的视图层次结构，因此您需要使用[setZOrderOnTop](http://developer.android.com/reference/android/view/SurfaceView.html#setZOrderOnTop%28boolean%29)方法以编程方式设置视图的*z 顺序*：

```
mVideoView.setZOrderOnTop(false);
mOpenGLView.setZOrderOnTop(true); 
```

# java - 从任何字符串中获取最后三个字符 - Java

> ID：15253406
> 
> 赞同：71
> 
> 时间：2013-03-06T16:57:13.417
> 
> 标签：java

我正在尝试获取任何字符串的最后三个字符并将其保存为另一个字符串变量。我的思维过程有些艰难。

```
String word = "onetwotwoone"
int length = word.length();
String new_word = id.getChars(length-3, length, buffer, index); 
```

当涉及到缓冲区或索引时，我不知道如何使用 getChars 方法。Eclipse 让我拥有了那些。有什么建议么？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-03-06T16:59:23.103

为什么不只是`String substr = word.substring(word.length() - 3)`？

**更新**

请确保`String`在调用之前检查 至少 3 个字符`substring()`：

```
if (word.length() == 3) {
  return word;
} else if (word.length() > 3) {
  return word.substring(word.length() - 3);
} else {
  // whatever is appropriate in this case
  throw new IllegalArgumentException("word has fewer than 3 characters!");
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2016-10-03T08:52:34.293

我会考虑来自 Apache Commons Lang 类的 `right`方法： [http ://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#right(java.lang.String,%](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#right(java.lang.String,%20int)) [20int)](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#right(java.lang.String,%20int))`StringUtils`

这是安全的。你不会得到`NullPointerException`或`StringIndexOutOfBoundsException`。

示例用法：

`StringUtils.right("abcdef", 3)`

您可以在上述链接下找到更多示例。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-06T17:02:21.627

这是一些使用正则表达式完成工作的简洁代码：

```
String last3 = str.replaceAll(".*?(.?.?.?)?$", "$1"); 
```

此代码*最多*返回3；如果少于 3 个，它只返回字符串。

这是如何在一行中没有正则表达式的情况下*安全地做到这一点：*

```
String last3 = str == null || str.length() < 3 ? 
    str : str.substring(str.length() - 3); 
```

通过“安全”，我的意思是如果字符串为空或短于 3 个字符（所有其他答案都不是“安全”），则不会引发异常。

* * *

如果您更喜欢更冗长但可能更易于阅读的形式，则上面的代码与此代码的效果相同：

```
String last3;
if (str == null || str.length() < 3) {
    last3 = str;
} else {
    last3 = str.substring(str.length() - 3);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-06T16:59:23.593

`String newString = originalString.substring(originalString.length()-3);`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-06T17:01:16.070

```
public String getLastThree(String myString) {
    if(myString.length() > 3)
        return myString.substring(myString.length()-3);
    else
        return myString;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-06T17:01:17.517

如果要`String`由最后三个字符组成，可以使用[`substring(int)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29)：

```
String new_word = word.substring(word.length() - 3); 
```

如果你真的想要它们作为一个字符数组，你应该写

```
char[] buffer = new char[3];
int length = word.length();
word.getChars(length - 3, length, buffer, 0); 
```

前两个参数[`getChars`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getChars%28int,%20int,%20char%5B%5D,%20int%29)表示要提取的字符串部分。第三个参数是该部分将被放入的数组。最后一个参数给出了缓冲区中操作开始的位置。

如果字符串少于三个字符，则在上述任何一种情况下都会出现异常，因此您可能需要检查一下。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-25T05:12:37.027

这是我用来获取字符串的最后一个 xx 的方法：

```
public static String takeLast(String value, int count) {
    if (value == null || value.trim().length() == 0 || count < 1) {
        return "";
    }

    if (value.length() > count) {
        return value.substring(value.length() - count);
    } else {
        return value;
    }
} 
```

然后像这样使用它：

```
String testStr = "this is a test string";
String last1 = takeLast(testStr, 1); //Output: g
String last4 = takeLast(testStr, 4); //Output: ring 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-10T04:14:05.577

这种方法会很有帮助：

```
String rightPart(String text,int length)
{
    if (text.length()<length) return text;
    String raw = "";
    for (int i = 1; i <= length; i++) {
        raw += text.toCharArray()[text.length()-i];
    }
    return new StringBuilder(raw).reverse().toString();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-06T17:00:31.547

`getChars`string 方法不返回值，而是将其结果转储到缓冲区（或目标）数组中。index 参数描述目标数组中的起始偏移量。

试试这个[链接](http://www.tutorialspoint.com/java/java_string_getchars.htm)以获得更详细的`getChars`方法描述。

我同意其他人的观点，我认为 substring 是处理你想要完成的事情的更好方法。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-06T17:00:46.323

您可以使用子字符串

```
String word = "onetwotwoone"
int lenght = word.length(); //Note this should be function.
String numbers = word.substring(word.length() - 3); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-10T13:54:04.797

“字符串长度不足或空”保存的替代方法：

```
String numbers = defaultValue();
try{
   numbers = word.substring(word.length() - 3);
} catch(Exception e) {
   System.out.println("Insufficient String length");
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-03-02T12:31:14.557

此方法将从末尾返回 x 个字符。

```
public static String lastXChars(String v, int x) {
    return v.length() <= x ? v : v.substring(v.length() - x);
} 
```

//用法

```
System.out.println(lastXChars("stackoverflow", 4)); // flow 
```

# dynamic - 动态宽度容器上的部分宽度相等？

> ID：15253410
> 
> 赞同：0
> 
> 时间：2013-03-06T16:57:21.047
> 
> 标签：dynamic, width, containers, equals

(html/css)

如何设置动态宽度的容器，但其中的每个部分都具有相同的宽度，以便它们都与容器同时调整大小？

```
.container{
width:80%;
}
.section{
position:relative;
float:left;
width: 80%/6; <---- pseudo code
} 
```

有6个相等的部分。例如，如果 .container 为 900px，则每个 .section 将为 150px。如果 .container 是 1200px，那么每个 .section 就是 200px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T09:55:07.903

我最近开始自己进行网络开发。但是，我希望这个答案可以帮助你。

```
 If your    class="section"    is within your     class="container"    , your browser will     
 assume that your    class="section"     width  is part of it's parent. It's parent is in    
 this case the        class="container".

 .container{
  width:80%;
  }   

 The     class="container"     width is based upon the width of it's parent. 
 The correct formula for this is: target/context=result

 Thus your    class="container"     width is in this case 80% and this based on the width      
 of the parent of your     class="container".

 Your     class="section"     width is inside your      class="container"    and is in     
 this case 80%, thus this width is based on it's parent width. 
 So your     class="container"     is now seen as 100% and your    class="section"     is 
 80% of your     class="container". 
```

希望这个对你有帮助。

# python - PyPy 中的 SQLAlchemy 安装

> ID：15253412
> 
> 赞同：1
> 
> 时间：2013-03-06T16:57:35.860
> 
> 标签：python, database, sqlalchemy, pypy

我有一个数据库项目可以极大地受益于 PyPy 提供的速度提升。但是，我无法在 PyPy 下安装我正在使用的核心库之一 sqlalchemy。我将它放到 Site-Packges 目录中，但 PyPy 对我大喊大叫，说它还需要 PyODBC，它的默认源代码不包含 python 文件，而只包含 .CPP 文件和头文件。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T04:56:39.937

据我所知，标准 pyodbc 包目前无法在没有补丁的情况下使用 PyPy 运行。

但是，您可以尝试[pypyodbc](https://code.google.com/p/pypyodbc)，它类似于 pyodbc，它可以在 PyPy 下运行 SQLAlchemy。[本指南](http://code.google.com/p/pypyodbc/wiki/Enable_SQLAlchemy_on_PyPy)介绍了启用它的 4 个步骤。

免责声明：我是 pypyodbc 的维护者。

# string - RPG中的多功能字符串操作程序

> ID：15253418
> 
> 赞同：1
> 
> 时间：2013-03-06T16:57:49.377
> 
> 标签：string, function, procedure, rpgle, rpg

RPG 中的另一件事我永远不知道如何做正确：编写字符串操作函数/程序。

由于 RPG 中的大多数时间字符串具有固定长度（至少对于我们的程序而言），而且也许更重要的是它们始终具有有限长度，所以当我想编写一个用于一般字符串操作的过程时，我总是有点迷茫。

我如何编写一个处理任何长度的字符串的过程？有没有问题，如果我这样做功能风格（如`text = manip_str(text);`）？如果我直接操纵参数（如`manip_str(text);`），它是否适用于不同的长度？

我会发布我自己的尝试作为答案，但是那里有一些我不确定的问题。你是怎么做到的，因为我敢肯定*很多*人曾经或一千次做过这样的任务。不同的方法很受欢迎，最好是提到这些方法的问题。

在你问之前：我对（EBCDIC）字节字符串和（UTF-16）unicode字符串有这个问题。但我可以接受两次手术，每次一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:48:13.917

RPG 中的大多数字符变量确实是固定长度的。这*意味着*有限的长度。定义为 50a 的字符将*始终*恰好包含 50 个字符。评估 myChar = 'A'; 将导致 myChar 包含 50 个字符：字母 A 后跟 49 个空格。这很无聊但很重要。

第二个无聊但重要的一点是要了解调用者分配内存，而不是被调用者。如果调用者声明 myChar 50a 而被调用者声明 myParm 65535a，则调用者只初始化了 50 个字节的存储空间。如果被调用者尝试使用 myParm 超过第 50 个字节，则它正在使用条件未知的存储。正如他们所说，可能会出现不可预知的结果。

这是您关于处理字符变量的子过程的背景问​​题，该字符变量的大小事先不为子过程所知。处理这个问题的经典方法是不仅传递字符变量，而且传递它的长度。eval myProcedure(myChar: %len(myChar)); 这有点难看，它迫使每个调用者计算 myChar 的长度。如果子过程可以询问传入参数以找到调用者如何定义它，那肯定会很好。

IBM 通过他们称为操作描述符的东西提供了这样的工具。使用操作描述符，调用者将有关字符参数的元数据传递给被调用者。一个通过[CEEDOD](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/CEEDOD.htm) API 检索它。[这里](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r0/topic/com.ibm.etools.iseries.pgmgd.doc/c0925076110.htm#srvex)有一个使用 CEEDOD 的例子。

基本上，子过程需要声明它需要操作描述符：

```
 dddeCheck         pr              n   opdesc
 d test                          20a   const options(*varsize) 
```

然后调用者对子过程进行正常的调用：

```
if ddeCheck(mtel) = *on;               // 10 bytes
...
endif;
if ddeCheck(mdate: *on) = *on;         // 6 bytes
...
endif; 
```

请注意，调用者将不同大小的固定长度变量传递给子过程。

子过程需要使用 CEEDOD 来询问传入参数的长度：

```
 dddeCheck         pi              n   opdesc
     d test                          20a   const options(*varsize)
...
     dCEEDOD           pr
     d parmNum                       10i 0 const
     d descType                      10i 0
     d dataType                      10i 0
     d descInfo1                     10i 0
     d descInfo2                     10i 0
     d parmLen                       10i 0
     d ec                            12a   options(*omit)

     d parmNum         s             10i 0
     d descType        s             10i 0
     d dataType        s             10i 0
     d descInfo1       s             10i 0
     d descInfo2       s             10i 0
     d parmLen         s             10i 0
     d ec              s             12a
...
       CEEDOD (1: descType: dataType: descinfo1: descinfo2: parmlen: *omit); 
```

此时，parmlen 包含调用者将传入变量定义为的长度。现在由我们来处理这些信息。如果我们正在逐个字符处理，我们需要做这样的事情：

```
for i = 1 to parmLen;
  char_test = %subst(test: i: 1);
  ...
endfor; 
```

如果我们作为单个字符串进行处理，我们需要执行以下操作：

```
returnVar = %xlate(str_lc_letters_c: str_uc_letters_c: %subst(s: 1: parmLen)); 
```

重要的是永远不要引用输入参数，除非该引用以某种方式受到调用者定义的实际可变长度的限制。这些预防措施仅对固定长度变量是必需的。编译器已经知道变长字符变量的长度。

关于编译器通过 CONST 将 myFixed 映射到 myVarying 的方式，了解它是如何工作的。编译器会将 myFixed 中的所有字节复制到 MyVarying 中——所有这些字节。如果 myFixed 为 10a，则 myVarying 将变为 10 个字节长。如果 myFixed 为 50a，myVarying 将变为 50 字节长。始终包含尾随空格，因为它们是每个固定长度字符变量的一部分。这些空白对于翻译过程并不重要，忽略空白的过程，但它们对于将字符串居中的过程可能很重要。在这种情况下，您需要求助于操作描述符或执行类似的操作`upperVary = str_us(%trimr(myFixed));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:57:49.377

我发现在 RPG 中最灵活的字符串传递方式适用于 64k-varlength 字符串并传递`*varsize`（它实际上应该只发送传递的字符串中的字节数，所以 64k 应该不是问题——我想我找到了斯科特克莱门特建议的某个地方）。在这里，我将如何编写一个仅限 AZ 的大写函数（因为它是一个最基本的示例）：

```
 * typedefs:
Dstr_string_t     S          65535A   VARYING TEMPLATE

 * constants:
Dstr_uc_letters_c C                   'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
Dstr_lc_letters_c C                   'abcdefghijklmnopqrstuvwxyz'

 * prototype:
Dstr_uc           PR                  like(str_string_t)       
D s                                   like(str_string_t)       
D                                       options(*varsize) const

 * implementation:
Pstr_uc           B                   export                   
D                 PI                  like(str_string_t)       
D s                                   like(str_string_t)       
D                                       options(*varsize) const
 /free                                                         
  return %xlate(str_lc_letters_c:str_uc_letters_c:s);          
 /end-free                                                     
Pstr_uc           E 
```

现在有很多事情让我担心：

*   我传递给它的固定长度字符串会不会有一些问题？
*   这种“只传递所需的字节数”是否也适用于返回值？每次我想大写 3 个字符字符串时，我都不想保留和传递数千个字节。
*   它只能灵活到 64k 字节。但我认为这在理论上是我们程序的一个问题——至少目前是这样……

# c# - 过滤后如何将radgridview中每一列的平均值计算为最后一行？

> ID：15253421
> 
> 赞同：0
> 
> 时间：2013-03-06T16:57:55.733
> 
> 标签：c#, winforms, telerik, radgridview

我想知道如何根据行过滤器找到列的平均值？

```
private void monthlyGridView_Click(object sender, EventArgs e)
{
   List<double> everyQuestion = new List<double>();

    for (int i = 5; i < monthlyGridView.Columns.Count; i++)
    {
        eachQuestion.Clear();
       for (int j = 0; j < monthlyGridView.Rows.Count - 2; j++)
       {
          //mReport is DataTable which return values
          string value = mReport.Rows[j][i].ToString();
          eachQuestion.Add(double.Parse(value));
       }
          string columnAverage = String.Format("{0:0.00}", eachQuestion.Average());
          monthlyGridView.Rows[monthlyGridView.Rows.Count - 1].Cells[i].Value = columnAverage;

    }
} 
```

这段代码只给我平均值而不是基于过滤的平均值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:47:26.657

您可以为此功能使用内置摘要行。更多信息可 [在此处获得](http://www.telerik.com/help/winforms/gridview-rows-summary-rows.html)

# objective-c - 弱属性和强属性示例

> ID：15253423
> 
> 赞同：2
> 
> 时间：2013-03-06T16:57:58.103
> 
> 标签：objective-c, reference-counting

我从 Objective-C 开发开始，并试图理解弱引用和强引用。我想我明白了，但我不确定......

让我们考虑该代码：

```
@interface SomeClass {} 
@property (nonatomic, weak) NSString* propertyName;
@end 
```

现在，如果我在代码中的某处调用如下所示：

`NSString* s = someClassInstance.propertyName;`

参考计数器不递增。我的理解正确吗？

*   疑问1：参考计数器值是`propertyName`多少？

*   疑问 2：所以...你能举个例子说明我什么时候可以得到对这个属性的强引用吗？我希望你知道我的意思或我不明白的...

我会得到弱参考。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T17:05:28.000

声明`propertyName`为“弱”属性意味着两件事：

1.  当您将对象分配给 时`propertyName`，该对象的引用计数不会增加。

2.  当`propertyName`指向的对象被释放时，`propertyName`将被设置为`nil`.

将 的值分配`propertyName`给另一个变量可能会对引用计数产生任何影响，也可能不会。如果将其分配给`strong`属性，您几乎肯定会增加引用计数（因为这是`strong`属性语义的一部分）。但最终编译器将决定是否需要修改引用计数。

了解 Objective-C 中对象所有权的概念很重要，无论您是否使用 ARC，但是在任何给定时刻给定对象的实际引用计数的细节并不是那么有用。记住这一点：一个`strong`属性拥有一个对象。`weak`属性没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:08:22.490

首先，在启用 ARC 的应用程序中，“强”是“保留”的同义词，“弱”是“分配”的同义词。

对疑问 1 的回答：它的保留计数将等于它正在存储的对象的保留计数。因为它只是一个参考。

对疑问 2 的回答

回答你的疑惑：

您应该参考此链接以了解强类型和弱类型属性

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

# java - MyBatis 将数据库和对象映射在一起

> ID：15253424
> 
> 赞同：0
> 
> 时间：2013-03-06T16:58:02.613
> 
> 标签：java, database, orm, mybatis

我在使用 struts 并将记录插入数据库时​​遇到了一些问题

数据库是这样的

以下是地图：

```
<mapper namespace="Employees">
<resultMap id="employeeMap" type="employee">
    <id column="employeeID" property="employeeID" />
    <result column="employeeNum" property="employeeNum" />
    <result column="username" property="userName" />
    <result column="firstName" property="firstName" />
    <result column="lastName" property="lastName" />

    <association property="address" column="addressID" resultMap="addressMap" />
</resultMap>

<resultMap id="addressMap" type="address">
    <id column="addressID" property="id" />
    <result column="addressLine1" property="addressLine1" />
    <result column="addressLine2" property="addressLine2" />
    <result column="city" property="city" />
    <result column="postcode" property="postcode" />
    <result column="country" property="country" />
</resultMap> 
```

这是 Employee 对象：

```
public class Employee{

private static final long serialVersionUID = 1L;

private int employeeID;
private String employeeNum;
private String firstName;
private String lastName; 
```

关于存储上述关系，我的表应该如何？

此时，Employees 表看起来像：employeeID employeeNum firstName lastName addressID

而且我不断收到错误消息，例如“addressID 没有默认值”是所有内容都按照应有的方式布置还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:51:04.027

您正在尝试插入一名员工，但您丢失了`addressID`，并且需要此属性才能插入它。我猜是因为您向我们展示了映射，而不是插入查询。

在数据库中创建表时，可以为列选择“默认值”。当您插入一个寄存器并错过一列时，将使用其默认值。你错过了`addressID`，也没有它的默认值，所以你得到一个错误。

因此，为您创建一个`address`属性并在插入查询中`Employee`使用它。`id`

# php - 无法将用户标记到通过图形 api 上传的 fb 照片

> ID：15253427
> 
> 赞同：0
> 
> 时间：2013-03-06T16:58:17.980
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我只是测试了一些东西，发现脚本不起作用。它实际上上传了一张图片，然后使用它的图片 id 来标记朋友列表中的一些随机人。我的应用程序有`user_photos,publish_stream`权限。我可以成功上传照片，但制作标签时出错。

这是代码：

```
 $f1 = $facebook->api('me/friends?limit=19');

$img = $_REQUEST['imgl'];
$access_token = $facebook->getAccessToken();

$args = array(      
    'message' => $_REQUEST['m_Config']['appTitle'], 
    'source' => '@' . $img,
    'access_token' => $access_token, 
);
$photo = $facebook->api ( $user . '/photos', 'post', $args );   
foreach($f1['data'] as $fbu){
    $tagx = array('tag_uid' => $fbu['id'],'x' => rand(100,350),'y' => rand(100,350));
    $ftags[] = $tagx;
}

$args = array (
    'tags' => json_encode($ftags),
    'access_token' => $access_token,
);

$result = $facebook->api('/' . $photo['id'] . '/tags', 'post', $args);
print_r($result); 
```

现在，我得到的错误是`**Fatal error: Uncaught OAuthException: (#100) Invalid parameter thrown in C:\xampp\htdocs\fb\base_facebook.php on line 1254**`

我的问题是在哪里，我的代码是错误的。为什么我收到错误，我也尝试搜索但无法修复。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:17:47.580

您似乎在随机位置为随机朋友分配标签，这是完全错误的。用户应该选择他们的朋友在照片中的位置 - 其他任何内容都将违反政策并可能作为垃圾邮件被关闭

至于您的代码问题，这不起作用，因为`tag_uid`不是 API 中列出的参数名称 - 用于指定要标记的用户的参数是`to`

有关更多详细信息和一些示例代码，请参阅[Photo 对象的标记连接](https://developers.facebook.com/docs/reference/api/photo/#tags)文档。

# android - SIP手动注册+Textview更新

> ID：15253434
> 
> 赞同：0
> 
> 时间：2013-03-06T16:58:29.523
> 
> 标签：android, sip

我正在尝试编写一个在 android 上运行的简单 SIP 客户端，我下载了 SIPDemo 项目以便与它取得联系，然后我开始编写我的代码，但遇到了一些问题。

让我们向您展示代码：

```
package com.example.gt_sipclient;

import java.text.ParseException;

import android.net.sip.SipAudioCall;
import android.net.sip.SipException;
import android.net.sip.SipManager;
import android.net.sip.SipProfile;
import android.net.sip.SipRegistrationListener;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.preference.PreferenceManager;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Intent;
import android.content.SharedPreferences;
import android.util.Log;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

//Activity android simple pour effectuer quelques appels VoIP
//et réaliser des tests.
public class SIPCliMainActivity extends Activity {

private TextView numText, domText, usrText, pswText, callerIDText, sipText,
        statusText;
private EditText numInput, domInput, usrInput, pswInput, callerIDInput,
        sipInput;
private Button callBtn, registerBtn, unregisterBtn;
private String number, domain, username, password, callerID, sipPort;

public SipManager mySipManager = null;
public SipProfile mySipProfile = null;
public SipAudioCall call = null;
public IncomingCallReceiver callReceiver;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sipcli_main);

    // TODO: virer les éléments qui ne seront pas utilisés au final
    // Get the layout elements
    // TextViews
    numText = (TextView) findViewById(R.id.number_title);
    domText = (TextView) findViewById(R.id.domain);
    usrText = (TextView) findViewById(R.id.username);
    pswText = (TextView) findViewById(R.id.password);
    callerIDText = (TextView) findViewById(R.id.callerid);
    sipText = (TextView) findViewById(R.id.sipport);
    statusText = (TextView) findViewById(R.id.status);

    // EditText views
    numInput = (EditText) findViewById(R.id.number_input);
    domInput = (EditText) findViewById(R.id.domain_input);
    usrInput = (EditText) findViewById(R.id.username_input);
    pswInput = (EditText) findViewById(R.id.password_input);
    callerIDInput = (EditText) findViewById(R.id.callerid_input);
    sipInput = (EditText) findViewById(R.id.sipport_input);

    // Button views
    callBtn = (Button) findViewById(R.id.callbtn);
    registerBtn = (Button) findViewById(R.id.registerbtn);
    unregisterBtn = (Button) findViewById(R.id.unregisterbtn);

    // make sure that the screen will not turn off during the app lifecycle
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

}

// handle click events without implementing listeners (see layout file
// android:onclick)
// register handling
public void registerClick(View v) {

    // Get the SIP account parameters
    domain = domInput.getText().toString().trim();
    username = usrInput.getText().toString().trim();

    // TODO: penser à stocker le psw en MD5 et à le faire aussi dans le
    // sip.conf
    password = pswInput.getText().toString().trim();
    callerID = callerIDInput.getText().toString().trim();
    sipPort = sipInput.getText().toString().trim();

    sipManagerInit();

}

public void unregisterClick(View v) {

    myProfileClose();

}

// TODO: call handling
public void callClick(View v) {

}

public void sipManagerInit() {
    if (mySipManager == null)
        mySipManager = SipManager.newInstance(this);

    myProfileInit();
}

public void myProfileInit() {
    if (mySipManager == null)
        return;

    // TODO: test si un profil est déjà présent

    // TODO: Load persistent data if they exist
    // SharedPreferences myPreferences =
    // PreferenceManager.getDefaultSharedPreferences(getBaseContext());

    if (username == null || password == null || domain == null) {
        updateStatus("Please fill the form.");
        return;
    }

    try {
        SipProfile.Builder builder = new SipProfile.Builder(username,
                domain);
        builder.setPassword(password);
        // important
        //builder.setAutoRegistration(false);
        mySipProfile = builder.build();

        // open myProfile for making and receiving calls

        Intent i = new Intent();
        i.setAction("com.example.gt_sipclient.INCOMING_CALL");
        PendingIntent pi = PendingIntent.getBroadcast(this, 0, i,
                Intent.FILL_IN_DATA);
        mySipManager.open(mySipProfile, pi, null);

        //manual register
        //mySipManager.register(mySipProfile, 60, null);

        // set SIP registration events

        mySipManager.setRegistrationListener(mySipProfile.getUriString(),
                new SipRegistrationListener() {

                    @Override
                    public void onRegistrationFailed(String arg0, int arg1,
                            String arg2) {
                        updateStatus("Registration failed");

                    }

                    @Override
                    public void onRegistrationDone(String arg0, long arg1) {
                        updateStatus("Registration OK");
                        registerBtn.setVisibility(View.INVISIBLE);
                    }

                    @Override
                    public void onRegistering(String arg0) {
                        updateStatus("Registering with SIP server...");

                    }
                });

    } catch (ParseException e) {
        // TODO getMessage juste pour le debug
        updateStatus("Connection error." + e.getMessage());
    } catch (SipException e) {
        // TODO getMessage juste pour le debug
        updateStatus("Connection error SIP." + e.getMessage());
    }

}

public void myProfileClose() {
    if (mySipManager == null)
        return;

    try {
        if (mySipProfile != null) {
            mySipManager.close(mySipProfile.getUriString());
            unregisterBtn.setVisibility(View.VISIBLE);
        }
    } catch (Exception ee) {
        Log.d("WalkieTalkieActivity/onDestroy",
                "Failed to close local profile.", ee);
    }
}

//TODO: completer cette methode pour se desinscrire du serveur manuellement
public void myProfileUnregister(){
    if(mySipManager == null)
        return;

    try {
        if(mySipProfile != null && mySipManager.isRegistered(mySipProfile.getUriString())){
            mySipManager.unregister(mySipProfile, new SipRegistrationListener(){

                @Override
                public void onRegistering(String localProfileUri) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onRegistrationDone(String localProfileUri,
                        long expiryTime) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onRegistrationFailed(String localProfileUri,
                        int errorCode, String errorMessage) {
                    // TODO Auto-generated method stub

                }

            });
        }
    } catch (SipException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.sipcli_main, menu);
    return true;
}

//Allez on va coder un thread propre pour la maj
public void updateStatus(final String status) {

    this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            statusText.setText(status);

        }

    });

}

public void updateStatus(SipAudioCall call) {
    String useName = call.getPeerProfile().getDisplayName();
    // TODO: watch it
    if (useName == null)
        useName = call.getPeerProfile().getUserName();

    updateStatus(useName + "@" + call.getPeerProfile().getSipDomain());

}

    } 
```

好的，现在当我运行应用程序时，出现以下错误：

```
03-06 17:38:35.931: E/JavaBinder(3754): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
03-06 17:38:35.931: E/JavaBinder(3754): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:722)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:771)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.View.invalidate(View.java:8581)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.View.setFlags(View.java:6766)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.view.View.setVisibility(View.java:4617)
03-06 17:38:35.931: E/JavaBinder(3754):     at com.example.gt_sipclient.SIPCliMainActivity$1.onRegistrationDone(SIPCliMainActivity.java:163)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.net.sip.SipManager$ListenerRelay.onRegistrationDone(SipManager.java:601)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.net.sip.ISipSessionListener$Stub.onTransact(ISipSessionListener.java:167)
03-06 17:38:35.931: E/JavaBinder(3754):     at android.os.Binder.execTransact(Binder.java:338)
03-06 17:38:35.931: E/JavaBinder(3754):     at dalvik.system.NativeStart.run(Native Method) 
```

问题是我正在尝试为每个通过的注册步骤更新 TextView，我认为使用 runOnUiThread 可以，但我显然遗漏了一些东西。不用担心注册，它运行良好（它有点慢，但无论如何......）我可以在我的 SIP 服务器上看到该设备。

我的第二个问题是关于避免自动注册：我希望用户通过单击一个按钮来注册/注销自己到 SIP 服务器（如果你知道的话，就像在 zoiper 客户端中一样）我找不到任何例子，但如果你有一些我会很乐意阅读这些。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:09:55.440

你还需要搬进`registerBtn.setVisibility(View.INVISIBLE);`去`runOnUiThread`。将`onRegistrationDone`代码更改为：

```
 @Override
 public void onRegistrationDone(String arg0, long arg1) {
   updateStatus("Registration OK");  
  }
///..your code here....

public void updateStatus(final String status) {
    SIPCliMainActivity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            statusText.setText(status);
            registerBtn.setVisibility(View.INVISIBLE);
        }

    });
} 
```

# jmeter - 使用 JMeter 在 HornetQ 上发布消息

> ID：15253436
> 
> 赞同：2
> 
> 时间：2013-03-06T16:58:34.930
> 
> 标签：jmeter, hornetq

我正在开发一个使用 HornetQ 的项目，我想在其上发布一些消息以使用 JMeter 执行负载测试。这里有没有人尝试过类似的东西？

如何配置 JMeter 在 HornetQ 上发布消息？

我已经将所有 jar 复制到 JMeter lib 并填写了“JMS Publisher Sampler”上的所有字段。我该如何进行？我可以用作示例的任何示例或 JMX 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:00:28.110

将 HornetQ JAR 添加到 jmeter/lib 文件夹

![在此处输入图像描述](../Images/61c22253ce587695a3da07f06fe01d73.png)

然后对于 JMS Sampler 的配置使用这个：

*   [http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/using-jms.html](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html/using-jms.html)

# sql - 如何将oracle sql结果输出到windows中的文件中？

> ID：15253440
> 
> 赞同：32
> 
> 时间：2013-03-06T16:58:52.603
> 
> 标签：sql, oracle, sqlplus

我试过

```
select * from users 
save D:\test.sql create; 
```

但是 SQL plus 给了我“没有正确的结束” 如何在 windows 中的 oracle sql 中指定路径？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-06T17:01:32.433

使用线轴：

```
spool myoutputfile.txt
select * from users;
spool off; 
```

请注意，这将在您运行 SQL*Plus 的目录中创建 myoutputfile.txt。

如果您需要在 SQLPlus 启动时从 SQL 文件（例如，“tmp.sql”）运行它并输出到名为“output.txt”的文件：

tmp.sql：

```
select * from users; 
```

命令：

```
sqlplus -s username/password@sid @tmp.sql > output.txt 
```

请注意，我现在没有 Oracle 实例，因此您可能需要自己做一些工作来调试我从内存中编写的内容。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-06T17:33:29.277

与 Marc 非常相似，唯一的区别是我将假脱机设置为如下参数：

```
WHENEVER SQLERROR EXIT 1
SET LINES 32000
SET TERMOUT OFF ECHO OFF NEWP 0 SPA 0 PAGES 0 FEED OFF HEAD OFF TRIMS ON TAB OFF
SET SERVEROUTPUT ON

spool &1

-- Code

spool off
exit 
```

然后将 SQLPLUS 称为

```
sqlplus -s username/password@sid @tmp.sql /tmp/output.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-05T08:43:26.483

```
spool "D:\test\test.txt"

select  
  a.ename  
from  
  employee a  
inner join department b  
on  
(  
  a.dept_id = b.dept_id  
)  
;  
spool off 
```

此查询将在 D:\test\test.txt 中后台处理 sql 结果

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-06T09:22:34.277

只是为了使答案 2 更容易，您还可以定义可以放置保存文件的文件夹

```
 spool /home/admin/myoutputfile.txt
    select * from table_name;
    spool off; 
```

之后仅使用 nano 或 vi myoutputfile.txt，您将看到所有 sql 轨道。

希望有帮助:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-09T15:38:37.190

在 Windows 10 和 Windows Server 2012 上做同样的工作。我找到了以下解决方案：

```
echo quit |sqlplus schemaName/schemaPassword@sid @plsqlScript.sql > outputFile.log 
```

### 解释

`echo quit |``sqlplus`脚本完成后发送 quit 命令退出

`sqlplus schemaName/schemaPassword@sid @plsqlScript.sql`使用连接到 SID的密码`plsqlScript.sql`在模式中执行 plssql 脚本`schemaName``schemaPassword``sid`

`> outputFile.log`将 sqlplus 输出重定向到日志文件`outputFile.log`

# android-videoview - 无法让 vitamio 显示字幕

> ID：15253446
> 
> 赞同：1
> 
> 时间：2013-03-06T16:59:22.510
> 
> 标签：android-videoview, vitamio

我正在使用 vitamio lib 制作视频播放器。但是，我找不到显示嵌入字幕的方法。我在互联网上彻底搜索过，但没有示例代码。这是我的代码：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    if (!io.vov.vitamio.LibsChecker.checkVitamioLibs(this))
        return;

    setContentView(R.layout.videoview);

    mVideoView = (VideoView) findViewById(R.id.surface_view);
    mVideoView
            .setVideoPath(path);
    mVideoView.setVideoQuality(MediaPlayer.VIDEOQUALITY_HIGH);
    mediaController = new MediaController(this);
    mVideoView.setMediaController(mediaController);
    mVideoView.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer arg0) {
            // TODO Auto-generated method stub
            mVideoView.setSubShown(true);
            mVideoView.setSubPath(Environment
                    .getExternalStorageDirectory().getPath()+"/pi.srt");
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T04:10:34.557

可以使用[Vitamio 4.0 预览版](https://github.com/yixia/VitamioBundle/tree/v4)

# git - 本地 git，推送到 tfs 远程仓库

> ID：15253447
> 
> 赞同：15
> 
> 时间：2013-03-06T16:59:22.817
> 
> 标签：git, tfs, visual-studio-2012

我厌倦了向我的队友解释使用 DVCS 而不是 CVCS 的好处。他们中的一些人害怕学习曲线，其中一些人看不到任何理由，因为对他们来说：“都是一样的”。就我个人而言，我厌倦了 TFS 及其问题。每次当我需要处理一些小的“修复”时，我都必须在主开发分支上工作并将我的东西搁置一旁，导致与 Git 相比，使用 TFS 进行分支非常痛苦。每次从以太网切换到 wifi 时，我都必须重新连接我的 VPN 客户端，这种情况经常发生。

所以我开始想也许我可以在本地使用 Git，并在我的本地 repo 上做任何我想做的事情，到时候把它推送到 TFS。我知道这是可能的，但最好的方法是什么？我可以只`git init`使用当前的存储库并将整个`.git`文件夹放入忽略列表中，这样 TFS 就不会将其签入或者仅仅这样做还不够？

在 Visual Studio 的官方更新到来之前，它将同时支持 git 和 tfs，我必须使用一些技巧来做我想做的事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T17:03:41.550

git-tfs [https://github.com/git-tfs/git-tfs](https://github.com/git-tfs/git-tfs)更适合我。易于安装。便于使用。虽然有点慢，但如果你不介意 - 效果很好

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T17:04:04.523

是的，你是完全正确的——你只需要在 TFS 中处理 .git 。通常，GIT 所做的一切都保存在 .git 中，因此如果您有办法将其排除在 TFS 之外（最坏的情况是移出然后移回），那么您可以毫无问题地使用 GIT。

请注意，可能还有其他与 GIT 相关的文件需要处理，.gitignore 是最常见的示例。

我已经使用 .git 和相关文件的意识成功地覆盖了 GIT 和 SVN。（我知道有一个 git-svn 包；但这不适用于我的特定需要。）

另外，请查看：

```
 git init --separate-git-dir=<other-location-for-dot-git> 
```

您仍然需要处理本地目录中的符号链接，但也许 TFS 问题更容易处理。

# iphone - SyncFolderHierarchy 不适用于 Exchange server 2007

> ID：15253449
> 
> 赞同：0
> 
> 时间：2013-03-06T16:59:22.750
> 
> 标签：iphone, objective-c, exchange-server, exchangewebservices

我使用objective-c 将以下soap 请求发送到交换服务器2007。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
  xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
  <soap:Body>
    <SyncFolderHierarchy  xmlns="http://schemas.microsoft.com/exchange/services/2006/messages">
      <FolderShape>
        <t:BaseShape>AllProperties</t:BaseShape>
      </FolderShape>
    </SyncFolderHierarchy>
  </soap:Body>
</soap:Envelope> 
```

在回复中，我得到“请求无效”。来自服务器的响应
此请求适用于 Exchange Server 2010 和 2013。但不适用于 Exchange Server 2007。

* * *

- Exchange Server 2007参考 支持 SyncFolderHierarchy ：- [http://msdn.microsoft.com/en-us/library/exchange/aa564829%28v=exchg.80%29.aspx](http://msdn.microsoft.com/en-us/library/exchange/aa564829%28v=exchg.80%29.aspx)

* * *

我的问题是
[1] 我必须在交换服务器中为 SyncFolderHierarchy 操作进行任何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:33:59.543

我正在查询 Exchange 2010，但我必须包含一个标题：

```
 NSString *soapMessage = [NSString stringWithFormat:@""
                             @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                             @"<soap:Envelope xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:t=\"http://schemas.microsoft.com/exchange/services/2006/types\" xmlns:m=\"http://schemas.microsoft.com/exchange/services/2006/messages\">"
                             @"<soap:Header>"
                             @"<t:RequestServerVersion Version =\"Exchange2010_SP2\"/>"
                             @"</soap:Header>"
                             @"<soap:Body>"
                             @"<m:GetRooms>"
                             @"<m:RoomList>"
                             @"<t:EmailAddress>%@</t:EmailAddress>"
                             @"</m:RoomList>"
                             @"</m:GetRooms>"
                             @"</soap:Body>"
                             @"</soap:Envelope>"
                             @"", roomlist]; 
```

# android - 有时无法将颜色用作可绘制对象

> ID：15253458
> 
> 赞同：0
> 
> 时间：2013-03-06T16:59:52.090
> 
> 标签：android

我有以下选择器，它工作得很好。

```
<?xml version="1.0" encoding="utf-8"?>
<selector android:exitFadeDuration="@android:integer/config_mediumAnimTime"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@color/the_color" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

注意，我可以使用`Color`drawable，如[drawable-resouce.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

> 颜色资源也可以用作 XML 中的可绘制对象。例如，在创建状态列表可绘制对象时，您可以为 android:drawable 属性 (android:drawable="@color/green") 引用颜色资源。

非常好。现在，我想尝试一下主题。

## home_menu_text_view_selector.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector android:exitFadeDuration="@android:integer/config_mediumAnimTime"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="?attr/homeMenuTextViewPressedColor" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

## attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <attr name="homeMenuTextViewPressedColor" format="color" />
</resources> 
```

## 主题.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.X.Light.DarkActionBar" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="homeMenuTextViewPressedColor">@color/home_menu_text_view_pressed_color_inverse_holo_light</item>
    </style>
</resources> 
```

## 颜色.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="home_menu_text_view_pressed_color_inverse_holo_light">#ff4fc5f1</color>
</resources> 
```

现在，我会收到错误消息：-

> 原因：org.xmlpull.v1.XmlPullParserException：二进制 XML 文件第 4 行：标签需要“drawable”属性或定义可绘制对象的子标签

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:30:15.227

您正在尝试将属性转换为颜色，选择器需要颜色/可绘制对象。如果我正确理解你想要达到的目标，你可以完全摆脱它。

home_menu_text_view_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector android:exitFadeDuration="@android:integer/config_mediumAnimTime"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@color/home_menu_text_view_pressed_color_inverse_holo_light" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

颜色.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="home_menu_text_view_pressed_color_inverse_holo_light">#ff4fc5f1</color>
</resources> 
```

主题是你需要找出你想要设计的究竟是什么。例如：

主题.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.X.Light.DarkActionBar" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="android:actionDropDownStyle">@style/MyDropDownNav</item>
    </style>
    <style name="MyDropDownNav">
        <item name="android:dropDownSelector">@drawable/home_menu_text_view_selector</item>
    </style>
</resources> 
```

希望这可以帮助。

编辑

没关系，我明白你现在想要做什么。这里解决了一个类似的问题：

[选择器资源可以使用样式中定义的颜色吗？](https://stackoverflow.com/questions/3757696/can-a-selector-resource-use-a-color-defined-in-a-style)

# javascript - 从剪贴板 Firefox 获取粘贴的图像

> ID：15253468
> 
> 赞同：18
> 
> 时间：2013-03-06T17:00:19.253
> 
> 标签：javascript, jquery, html, firefox

我正在尝试允许用户将图像粘贴到`div`. 问题是我需要它在 Firefox 中工作。

从我读过的内容来看，自 13 版以来的 Firefox（我认为）不允许 JavaScript 访问剪贴板，并且`event.clipboard`不存在其中。我知道它可以做到，因为即使在 Firefox 中，Gmail 和 Yahoo 也支持它。

我只是希望它以任何可能的方式工作，与 jQuery、JavaScript、HTML5 一起工作，只要它在最新的 Firefox 中工作就没有关系。（虽然没有 Flash）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T22:50:37.683

[我将此问题](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)中的代码用于我的跨浏览器粘贴实现。它适用于我测试过的所有浏览器（向下滚动查看实际的解决方案/代码）。需要注意`event.clipboardData`的是，粘贴事件执行完成后立即过期。

我继续四次检查这在 Firefox 版本 19 中是否有效（我没有 13 个可用，但听起来这个问题是关于新版本中功能的退化）。

以下是答案，引自`Nico Burns`：

# 解决方案

在 IE6+、FF 3.5+、Opera、Chrome、Safari 的最新版本中测试。

```
function handlepaste (elem, e) {
  var savedcontent = elem.innerHTML;
  if (e && e.clipboardData && e.clipboardData.getData) {// Webkit - get data from clipboard, put into editdiv, cleanup, then cancel event
    if (/text\/html/.test(e.clipboardData.types)) {
      elem.innerHTML = e.clipboardData.getData('text/html');
    }
    else if (/text\/plain/.test(e.clipboardData.types)) {
      elem.innerHTML = e.clipboardData.getData('text/plain');
    }
    else {
      elem.innerHTML = "";
    }
    waitforpastedata(elem, savedcontent);
    if (e.preventDefault) {
      e.stopPropagation();
      e.preventDefault();
    }
    return false;
  }
  else {// Everything else - empty editdiv and allow browser to paste content into it, then cleanup
    elem.innerHTML = "";
    waitforpastedata(elem, savedcontent);
    return true;
  }
}

function waitforpastedata (elem, savedcontent) {
  if (elem.childNodes && elem.childNodes.length > 0) {
    processpaste(elem, savedcontent);
  }
  else {
    that = {
      e: elem,
      s: savedcontent
    }
    that.callself = function () {
      waitforpastedata(that.e, that.s)
    }
    setTimeout(that.callself,20);
  }
}

function processpaste (elem, savedcontent) {
  pasteddata = elem.innerHTML;
  //^^Alternatively loop through dom (elem.childNodes or elem.getElementsByTagName) here

  elem.innerHTML = savedcontent;

  // Do whatever with gathered data;
  alert(pasteddata);
}
```

```
<div id='div' contenteditable='true' onpaste='handlepaste(this, event)'>Paste</div>
```

# 解释

该`onpaste`事件具有`handlepaste`附加到它的函数，并传递了两个参数：（`this`即对事件附加到的元素的引用）以及`event`哪个是事件对象。

* * *

`handlepaste`功能：

第一行只是将可编辑 div 的内容保存到一个变量中，以便在最后可以再次恢复它。

检查浏览器`if`是否是 webkit 浏览器（chrome 或 safari），如果是，则将可编辑 div 的内容设置为正在粘贴的数据。然后它会取消该事件以防止 webkit 粘贴任何内容两次。这是因为 webkit 很笨拙，如果你只是清除 div 就不会粘贴任何东西。

如果它不是 webkit 浏览器，那么它只会清除可编辑的 div。

然后调用`waitforpastedata`函数

* * *

`waitforpastedata`功能：

这是必要的，因为粘贴的数据不会立即出现，所以如果您只是直接调用`processpaste`，那么它将没有任何数据要处理。

它所做的是检查可编辑的 div 是否有任何内容，如果有则调用`processpaste`，否则它会设置一个计时器来调用自身并在 20 毫秒内再次检查。

* * *

`processpaste`功能：

此函数将可编辑 div 的 innerHTML（现在是粘贴的数据）保存到变量中，将可编辑 div 的 innerHTML 恢复为其原始值，并警告粘贴的数据。显然，在实际使用场景中，您可能想要的不仅仅是警报数据，您可以从这里做任何您喜欢的事情。

您可能还希望通过某种数据清理过程运行粘贴的数据。这可以在它仍然在可编辑的 div 中时完成，也可以在提取的字符串上完成。

* * *

在实际情况中，您可能希望先保存选择，然后再将其恢复（[在 contentEditable <div> 上设置光标位置](https://stackoverflow.com/questions/1181700/set-cursor-position-on-contenteditable-div/3323835#3323835)）。然后，您可以将粘贴的数据插入到用户启动粘贴操作时光标所在的位置。

PS 这段代码 IE <= 8 和[jsfiddle](http://jsfiddle.net)的组合似乎不起作用，但在非 jsfiddle 环境中 ie <= 8 确实有效。

# angularjs - 用@定义的隔离范围属性在指令的链接函数中未定义/消失

> ID：15253471
> 
> 赞同：5
> 
> 时间：2013-03-06T17:00:24.983
> 
> 标签：angularjs, angularjs-scope

该指令具有隔离范围，并且范围属性使用“@”传递。

这就是指令的调用方式：

```
<div ng-init="classForIcon = 'vladClass'"></div>
<div ng-init="textForIcon = 'Icon\'s text'"></div>
<div ng-init="routeForIcon = 'www.google.com'"></div>
<div ng-init="tooltipForIcon = 'my tooltip'"></div>
<div ng-init="imageForIcon = 'images/HOME_ICON1.png'"></div>

<rl-icon-widget icon-class="{{classForIcon}}" icon-text = "{{textForIcon}}" icon-tooltip="{{tooltipForIcon}}" icon-route="{{routeForIcon}}" icon-image="{{imageForIcon}}"></rl-icon-widget> 
```

这是指令的定义方式：

'使用严格';

```
fcPortalApp.directive('rlIconWidget', ['localizationAssistant', function(localizationAssistant) {
    var obj = {
        restrict: 'E',
        templateUrl: 'scripts/directives/rliconwidget/rliconwidget.html',

        //require: 'ngModel',
        scope: {
            //ngModel: '@',
            iconClass: "@",
            iconRoute: "@",
            iconText: "@",
            iconTooltip: "@",
            iconImage: "@"         
        },

        link: function(scope, element, attrs) {

            console.log(scope);
            console.log(scope.iconImage);
            console.log(scope.iconTooltip);
            console.log(scope.iconRoute);

        }
    };

    console.log(obj);
    return obj;

}]); 
```

当我检查范围对象时（单击console.log 的输出（firebug 中的范围_），看起来它的 iconImage、iconTooltip 和 iconRoute 属性设置正确。

然而 console.log(scope.iconImage)、console.log(scope.iconTooltip) 和 console.log(scope.iconRoute) 打印“未定义”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T18:02:17.873

> 用于`$observe`观察包含插值的属性的值变化（例如`src="{{bar}}"`）。这不仅非常有效，而且也是轻松获得实际值的唯一方法，因为在链接阶段尚未评估插值，因此此时值设置为`undefined`. --[指令文档](http://docs.angularjs.org/guide/directive)

当您手动检查范围时，值已定义。

我们需要使用 $observe 的原因（实际上 $watch 也适用于用 '@' 定义的隔离范围属性）是因为每当插值发生变化时，指令可能需要做一些事情。例如，如果值发生`textForIcon`变化，您可能想要修改由指令管理的 DOM 中的某些内容。

如果您需要在链接函数运行时定义的值，您有两种选择：

1.  使用“=”而不是“@”。这将要求您从 HTML 中删除 {{}}。
2.  如果值不会改变，传递字符串：
    `<rl-icon-widget icon-class="vladClass" ...>`
    然后在你的指令中，只需使用`attrs.iconClass`-- 不需要'@'。

# machine-learning - 交叉验证结果不一致

> ID：15253472
> 
> 赞同：1
> 
> 时间：2013-03-06T17:00:25.593
> 
> 标签：machine-learning, cross-validation

我有一组从受试者执行某些特定认知任务时记录的数据集。数据由 16 个通道和每个通道的多个样本点组成，我想根据正在执行的认知任务对这些数据进行分类（所有内容都已标记）。

问题是我没有大量数据（每个会话大约 60 次试验，每个认知任务 30 次）并且我有 2 个会话。我正在尝试训练一个线性判别分析（LDA）分类器来分类这些数据。分类器稍后将被实时使用，为每个样本数量提供某种形式的输出。

我使用 5 折交叉验证来测量我的分类器的泛化误差。问题是当我多次运行这个 5 折交叉验证时，我得到的结果根本不是恒定的。相反，整体准确度存在显着差异（例如，前 5 次交叉验证可能产生 80% 的平均准确度，第二次产生 65% 的准确度，第三次产生平均 72% 等......）。这是正常的吗？如果不是，可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:46:11.313

听起来您可能有一些错误的数据，或者您的分类器过度拟合。您可以执行 Leave-one-out 交叉验证并记录您的结果。它可以帮助找到可能使结果产生偏差的数据。

# tortoisesvn - Tortoise SVN 客户端在移动到新 PC 时丢失了绿色复选标记

> ID：15253474
> 
> 赞同：0
> 
> 时间：2013-03-06T17:00:26.790
> 
> 标签：tortoisesvn

我搬到了一台新的笔记本电脑上，并复制了我所有的源代码。（从 Win XP 到 Windows 7）。我在新笔记本电脑上安装了乌龟 SVN。但是，当我去更改源代码文件并提交它时，我没有看到绿色的复选标记。所以，新的笔记本电脑 SVN 客户端不知道我的旧笔记本电脑知道什么。有谁知道如何从我的旧笔记本电脑上获取 SVN 客户端信息，以便我可以像以前一样继续工作？（我唯一能想到的另一件事是制作全新的存储库和导入，但我不想这样做......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:02:01.013

SVN 客户端在您的本地副本下包含一个隐藏的文件夹结构，其中包含用于与存储库通信的元数据。我怀疑您复制了“可见”文件，但没有复制隐藏文件。

# html - 如何使用 web::scraper 绕过 html 转义符号并仅从 perl 中的 html 文件中提取文本

> ID：15253478
> 
> 赞同：0
> 
> 时间：2013-03-06T17:00:35.450
> 
> 标签：html, perl, web-scraping

我试图仅从 html 页面中提取文本，并希望忽略或绕过 html 转义符号“<”和“>”。我正在复制用于提取文本的 html 页面部分：

```
 <table class="reference">
    <tr>
    <th align="left" width="25%">Tag</th>
    <th align="left" width="75%">Description</th>
    </tr>
    <tr>
    <td><a href="tag_comment.asp">&lt;!--...--&gt;</a></td>
    <td>Defines a comment</td>
    </tr>
    <tr>
    <td><a href="tag_doctype.asp">&lt;!DOCTYPE&gt;</a>&nbsp;</td>
    <td>Defines the document type</td>
    </tr>
    <tr>
    <td><a href="tag_a.asp">&lt;a&gt;</a></td>
    <td>Defines a hyperlink</td>
    </tr>
    <tr>
    <td><a href="tag_abbr.asp">&lt;abbr&gt;</a></td>
    <td>Defines an abbreviation</td>
    </tr>
    <tr>
... 
```

我的 perl 代码是：

```
my $urlToScrape = "http://www.w3schools.com/tags/";

# prepare data
my $teamsdata = scraper {
process "table.reference > tr > td > a ", 'tags[]' => 'TEXT';
process "table.reference > tr > td > a ", 'urls[]' => '@href';
};

# scrape the data
my $res = $teamsdata->scrape(URI->new($urlToScrape));

print "<HTML_tags>\n";
for my $i ( 0 .. $#{$res->{urls}}) {
 print FILE "   <tag_Name> $res->{tags}[$i] </tag_Name>\n ";
}
print "</HTML_tags>\n"; 
```

我得到的输出如下：

```
<HTML_tags>
    <tag_Name> <!--...--> </tag_Name>
        <tag_Name> <!DOCTYPE> </tag_Name>
        <tag_Name> <a> </tag_Name>
        <tag_Name> <abbr> </tag_Name>
</HTML_tags> 
```

而我希望输出为：

```
<HTML_tags>
    <tag_Name> !--...-- </tag_Name>
        <tag_Name> !DOCTYPE </tag_Name>
        <tag_Name> a </tag_Name>
        <tag_Name> abbr </tag_Name>
</HTML_tags> 
```

谁能告诉我必须改变什么才能获得上述输出？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:47:09.927

蛮力：

```
$res->{tags}[$i] =~ s/[\<\>]//gs; ## Added line 
print FILE "   <tag_Name> $res->{tags}[$i] </tag_Name>\n "; 
```

# java - Future 中的 get 方法在 java 中是如何工作的？

> ID：15253479
> 
> 赞同：3
> 
> 时间：2013-03-06T17:00:43.707
> 
> 标签：java, multithreading, concurrency

下面是提交作业的一段代码。假设我有 3 个线程正在运行。get 方法如何等待并获取相应的线程结果。

```
Future<?> result = threadPool.submitTasks(new Callable<T>() {
            public T call() throws Exception {
                // do something
        }

});
anyType = (T) result.get(); 
```

或者假设我的任务 A 结果为 1，任务 B 结果为 2。当涉及到 get 方法时，它返回正确值的保证是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:11:54.690

您提交的任务（在本例中为 Callable）被包装到返回的实例中`Future`。本质上，与创建它`Future`的*任务直接相关*，而不是任何其他任务。

在内部，当调用 时`get`，future 将尝试获取与其包装任务共享的锁。获取后，它会查询任务的状态以确定下一步要做什么：

1.  如果`Future`被取消，或者底层任务产生异常，则抛出异常
2.  否则，返回任务生成的结果。

这*大致*是它的工作原理，有几种实现，`Future`它们都有不同的内部逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:04:08.670

您假设可以保证他们将收到正确的输出。这是实现[线程安全代码](http://en.wikipedia.org/wiki/Thread_safety)的问题。

通常，为了使实现线程安全，您将使用某种标志将其锁定以禁止使用。这将向其他线程表明他们不能使用它。

# javascript - 无法从谷歌地图中获取纬度和经度值到数组中

> ID：15253484
> 
> 赞同：1
> 
> 时间：2013-03-06T17:00:55.680
> 
> 标签：javascript, jquery, google-maps, geolocation

我正在尝试将经度和纬度的值放入数组中..

```
 function codeAddress(address) {
    var place;
    var lines=[];

    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);

    geocoder.geocode( { 'address': address}, function(results, status) {

      place=results[0].geometry.location;
str=place.lng();
        lines.push(place.lng());
        lines.push(place.lat());

         });
    console.log(lines);
    console.log(lines.length);

    return lines;
  } 
```

但是lines.length显示为零..当我尝试打印数组行时，当我使用firebug检查它时，`[]` 当我尝试单击[]时它显示空数组bt，它显示打开并显示

```
[]
0    1.32323
1    125.12323 
```

我不确定出了什么问题..

当我尝试`console.log(results[0].geometry.location)` 它显示`R { ib=1.32323, jb=125.12323, toString=function(), more...}`

# r - 使用formals（）更改其他人编写的R函数的默认参数时如何处理省略号（...）

> ID：15253494
> 
> 赞同：2
> 
> 时间：2013-03-06T17:01:18.397
> 
> 标签：r, function, arguments

当有一个 R 函数时，我的用法始终不同于默认值时，为了使我的代码简洁且易于维护，我喜欢在脚本开头执行以下操作（在此示例中，我使用`ll()`的是`R.oo`包裹）：

```
> formals(ll.default)$private <- T; 
```

这很好用。但是，现在我想创建一个函数从其`...`参数中读取的默认选项（在此示例中，我想将参数添加`is.function=F`到默认值，并且`...`是第二个形式参数）。有人知道该怎么做吗？我尝试了以下...

```
> formals(ll.default)[[2]]$is.function <-F
Error in formals(ll.default)[[2]]$is.function <- F : 
  argument "*tmp*" is missing, with no default

> formals(ll.default)$`...`$is.function <-F
Error in formals(ll.default)$...$is.function <- F : 
  argument "*tmp*" is missing, with no default

> formals(ll.default)$`...`<-alist(is.function=F)
> ll()
Error in ll.default() : '...' used in an incorrect context
> formals(ll.default)$`...`<-pairlist(is.function=F)
> ll()
Error in ll.default() : '...' used in an incorrect context 
```

我查看了`Defaults`包裹，但文档说：

> 目前，无法为 . . . 参数，仅在原始函数定义中正式指定参数

有没有人知道一种方法来实现这一点，因为只有一个论点而没有编写包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T20:08:21.163

您可以`Curry`在`functional`库中使用：

```
library(functional)
> test <- function(private=FALSE,...) return(private)
> Curry(test,private=TRUE)
function (...) 
do.call(FUN, c(.orig, list(...)))
<environment: 0x4d0bed8>
> testP <- Curry(test,private=TRUE)
> testP()
[1] TRUE
> test()
[1] FALSE
> test2 <- function(...,private=FALSE) return(private)
> test2()
[1] FALSE
> test2P <- Curry(test2,private=TRUE)
> test2P()
[1] TRUE 
```

但是，这会因您想要的示例函数而失败`ll`，这使我相信正在发生其他事情：

```
> llP <- Curry(ll, private=TRUE)
> ll()
  member data.class dimension objectSize
1    llP   function      NULL       1008
> llP()
Error in get("...", envir = envir) : 
  argument "..." is missing, with no default 
```

# c# - 等待阻塞收集（队列）在 C# 中减小大小

> ID：15253495
> 
> 赞同：7
> 
> 时间：2013-03-06T17:01:21.540
> 
> 标签：c#, .net, multithreading, queue, event-driven

我正在使用以下工作流程进行项目：

**第一部分：**

*   事件异步到达并在阻塞队列中排队，我们称之为**Q1**
*   线程从该队列中获取下一个可用项目
*   项目最终并行运行 {N} 个任务
*   每个任务将其结果排入第二个队列，我们​​称之为**Q2**。
*   当项目处理完成时，从队列中读取下一个项目。

**第二部分：**

*   另一个线程一次读取**Q2**一个对象并处理结果

所以，这里的问题是，第一个队列中的每个项目最终都会并行运行大量任务，每个任务都将其结果排队。第二个队列必须按顺序处理，一次一个项目，但它被淹没了。

* * *

**我的问题**

我需要一种机制，使线程处理**Q1**等到**Q2**中的项目数低于特定阈值。实现这一目标的最佳方法是什么？有没有办法拥有事件驱动的解决方案而不是轮询解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T17:04:12.073

`Queue<T>`您可以将 a[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)用于 Q2 ，而不是使用 a 。如果您设置它[`BoundedCapacity`](http://msdn.microsoft.com/en-us/library/dd287159.aspx)，调用`Q2.Add()`将在达到容量时阻塞。这将自动限制 Q1 的处理，因为如果 N 个任务无法添加到最终队列中，它们将开始阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:05:07.043

我假设您在偶尔的洪水中收到数据，在长时间干旱期间，第二季度可以赶上。您是否考虑过通过为这些任务使用有限的线程池来简单地限制从 Q1 产生的并发线程的数量？

如果在到达时很容易确定作业大小，我怀疑您可以从多个线程池中受益。您可以有少量线程来处理大型作业，而大量线程准备好处理小型作业。即使是第三个中间队列也可能是有益的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:09:29.223

您的问题似乎是`TPL Dataflow`图书馆解决的完美示例。如果你愿意尝试，这里是它的工作原理（当然这是一个非常简单的例子）：

```
TransformBlock<int, bool> transform = new TransformBlock<int, bool>(i => i > 5 ? true : false,
            new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = 4 });
ActionBlock<bool> resultBlock = new ActionBlock<bool>(b => Console.WriteLine("My result is : " + b),
            new ExecutionDataflowBlockOptions { BoundedCapacity = 10 });
transform.LinkTo(resultBlock); 
```

您正在定义一个转换块，它将使您的转换（这作为您的`Q1`），您可以将它的并行度级别设置为您想要使用的任务数。

然后，您正在创建第二个块（作为您的`Q2`），它将`BoundedCapacity`设置并同步处理每条消息，为每个元素调用一个操作。该块可以被任何其他块替换，例如`BufferBlock`允许您根据需要从中进行轮询。

# css - CSS 表格持久标头

> ID：15253499
> 
> 赞同：0
> 
> 时间：2013-03-06T17:01:41.383
> 
> 标签：css, css-position, tablelayout

我有一张固定布局的桌子。我添加了一些代码以将 thead 元素从流中取出（位置：固定）以在滚动表格时留在屏幕上。

```
table { table-layout:fixed; width: 100% }
table th { width: 50px }
table th:first-child { width: 20em; }

table td { width: 50px }
table tbody tr:first-child td:first-child { width: 20em;} 
```

问题是，当从流中取出thead 时，表格列的其余部分会自行调整大小。有关复制示例，请参见[http://jsfiddle.net/2EDQR/3/](http://jsfiddle.net/2EDQR/3/)。尝试滚动结果框并查看表格列是如何挤压的。

关于如何防止这种情况的任何想法？

**UPD：**当我滚动页面时，我需要标题留在视口中。问题是当标题从流中取出时，tbody 列正在调整大小，因此标题与列不对齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:19:22.937

如果您删除它几乎可以正常工作`table-layout:fixed;`

# mysql - MySQL 使用相同的字符串为 CRC32() 返回不同的值

> ID：15253512
> 
> 赞同：2
> 
> 时间：2013-03-06T17:02:41.610
> 
> 标签：mysql, sql, crc32, sql-insert

我遇到了一个奇怪的问题，两个查询返回具有相同字符串的 CRC32 的不同哈希值。

如果我运行：

`SELECT 'http://mywebsite4.com/myvideos', CRC32('http://mywebsite4.com/myvideos');`

返回的哈希值为 3769016377。

如果我再跑

`INSERT INTO locations (full_url, full_url_hash) VALUES ('http://mywebsite4.com/myvideos', CRC32('http://mywebsite4.com/myvideos'))`

插入的哈希值为 2147483647。

我在这里有什么明显的遗漏吗？据我了解，CRC32 函数应始终将相等的字符串散列为相等的 32 位整数，我终其一生都无法弄清楚为什么它们在这种情况下有所不同。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T17:04:05.033

将列的数据类型更改为`INT UNSIGNED`. 原因是您正在使用`SIGNED INT`这就是为什么最大值仅为`2147483647`.

```
CREATE TABLE tableNAME
(
    full_url_hash INT UNSIGNED
    -- other columns
) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f552b/1)

# java - 通过java代码签署jar文件

> ID：15253514
> 
> 赞同：0
> 
> 时间：2013-03-06T17:02:49.570
> 
> 标签：java, applet, jarsigner

我有个问题。当我签署我将作为小程序打开的 JAR 文件时，我使用命令提示符和命令：

```
jarsigner -keystore <path to key store> <path to jar file> <alias> 
```

但是仅使用 Java 就可以做到这一点吗？我会`Jarsigner.class`通过命令提示符用一些文件启动我的 JAR，然后它会被自动签名，然后我可以在我的浏览器中将这个 JAR 作为小程序打开。密钥库将作为资源放置在 JAR 中。

# google-app-engine - 在重负载下升级 gae 应用程序的正确方法是什么？

> ID：15253515
> 
> 赞同：1
> 
> 时间：2013-03-06T17:02:49.767
> 
> 标签：google-app-engine

鉴于我的应用程序的默认版本负载很重，将其升级到另一个已部署但具有 0 个实例的版本的正确方法是什么。目标是尽可能少地干扰交通。

一种想法是将常驻实例添加到非默认版本，但常驻实例仅适用于应用程序的默认版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:35:53.687

如果版本已部署，您可以通过如下所示的直接链接访问来启动第一个实例：

```
http://version.example.appspot.com 
```

之后，我认为您可以轻松切换到新的默认版本，并且我认为您的流量不会有任何重大（或根本）干扰。更多实例将像往常一样按需启动。只有要启动新实例的人才会有更大的延迟，但与活跃用户的总数相比，这是很小的并且可以接受。

一般来说，如果您遇到性能问题，您可以根据您的特定需求进行[调整。](https://developers.google.com/appengine/docs/adminconsole/performancesettings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T06:20:56.097

> 一种想法是将常驻实例添加到非默认版本，但常驻实例仅适用于应用程序的默认版本。

你是对的。我认为名为“服务器”的新 App Engine 功能将能够解决您的用例，因为您将能够在非默认版本上拥有常驻实例（也许我应该在这里说“服务器”）。现在我们正在为“服务器”运行 Trusted Tester 程序。如果您有兴趣，请查看[此线程。](https://groups.google.com/d/topic/google-appengine/vNrNnhAKcuk/discussion)

目前，Lipis 的答案是可行的（赞成）。

# iphone - 在控制台中得到奇怪的打印语句

> ID：15253516
> 
> 赞同：1
> 
> 时间：2013-03-06T17:02:50.003
> 
> 标签：iphone, ios, objective-c, youtube

我在我的应用程序中嵌入了一个 youtube 链接，如下所示

```
- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frameSize inView:(UIImageView*)imageView {
    NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";
    NSString *html  = [NSString stringWithFormat:embedHTML, urlString, frameSize.size.width, frameSize.size.height];
    videoView       = [[UIWebView alloc] initWithFrame:frameSize];
    [videoView loadHTMLString:html baseURL:nil];
    [imageView  addSubview:videoView];

} 
```

但是，当我播放视频并且控制台正在向我抛出如下所示的长时间测试时

```
setting movie path: http://r20---sn-tt17rn7s.c.youtube.com/videoplayback?fexp=917000%2C906357%2C923121%2C914071%2C916624%2C920704%2C912806%2C902000%2C922403%2C922405%2C929901%2C913605%2C925006%2C906938%2C931202%2C908529%2C904830%2C920201%2C930101%2C930603%2C906834%2C926403%2C913570%2C901451&newshard=yes&cp=U0hVR1ZMUF9GS0NONV9ORlRDOlZKNFRXTmNDY2NS&sver=3&itag=18&mt=1362588975&id=6e1254edbdac474b&ms=au&mv=m&source=youtube&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&ipbits=8&ratebypass=yes&expire=1362612211&ip=66.207.201.14&key=yt1&upn=3o0EU_taOns&cpn=6QDoUVzCQUiAeBqm&signature=C609660EDEB083FFC1ABD1F781EDA222B6F04C66.CA4A052F0E17C10D866EB3D302A258571322C185 
```

我确实`setting move path`在我的代码中进行了搜索，但是`no recored found`. 到底是从哪里来的，以及如何摆脱它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:15:13.910

这是一种将 stderr 重定向到缓冲区的可能方法，该缓冲区允许您过滤掉特定消息（但就个人而言，这看起来比它的价值更麻烦......但另一方面，这些消息可能会使调试变得烦人）：[关闭控制台记录特定对象](https://stackoverflow.com/questions/12804425/turn-off-console-logging-for-specific-objects)

扩展@detunized的答案（不过我还没有测试过）：

```
bool should_show(char *buffer) {
    return !stncmp("setting movie path", buffer, 18); // untested code...
}

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^(void) {
        size_t const BUFFER_SIZE = 2048;

        // Create a pipe
        int pipe_in_out[2];
        if (pipe(pipe_in_out) == -1)
            return;

        // Connect the 'in' end of the pipe to the stderr
        if (dup2(pipe_in_out[1], STDERR_FILENO) == -1)
            return;

        char *buffer = malloc(BUFFER_SIZE);
        if (buffer == 0)
            return;

        for (;;)
        {
            // Read from the 'out' end of the pipe
            ssize_t bytes_read = read(pipe_in_out[0], buffer, BUFFER_SIZE);
            if (bytes_read <= 0)
                break;

            // Filter and print to stdout
            if (should_show(buffer)) // TODO: Apply filters here
                fwrite(buffer, 1, bytes_read, stdout);
        }

        free(buffer);
        close(pipe_in_out[1]);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:07:44.257

> 设置电影路径：

它来自 youtube.com 中的 javascript 音频播放器。

# ios - UISegmentedControl 分隔线错误

> ID：15253518
> 
> 赞同：4
> 
> 时间：2013-03-06T17:02:53.120
> 
> 标签：ios, objective-c, uisegmentedcontrol

我的 UISegmentedControl 分隔线遇到了一个奇怪的错误。当我将手指拖开时，该段会丢失其突出显示状态图像，但分隔线会保留它。我需要拖动大约 100px 才能发生这种情况。

向下，目标：

![命中目标](../Images/8f1b28759c25cc09de264cb24b426a2a.png)

向下，手指被拖离目标：

![偏离目标](../Images/8631749a53ae0c0f5b7a839e2d38d30f.png)

假设 0 表示正常状态，1 表示选中状态，2 表示高亮状态；我有所有正确的分隔符图像，并为每种情况设置它们，即：

```
00, 01, 02
10, 11, 12
20, 21, 22 
```

其他一切正常，如果我点击并按住目标没有问题。我不希望用户会点击和拖动，但我宁愿解决这个问题。有谁之前经历过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:04:29.330

无需为“11”和“22”状态提供分隔符图像，因为从逻辑上讲，您不能有 2 个相邻的选定段或 2 个相邻的突出显示段。好吧，只有同时点击相邻的部分才能突出显示它们，但不太可能。

因此，您应该有以下分隔线图像：

```
00, 01, 02  
10, --, 12  
20, 21, -- 
```

此外，您还应该为所有 3 个不同状态（正常、选定和突出显示）提供 3 个背景图像。这些背景图像的原因以及如何创建它们我已经[在这里](http://smnh.me/customizing-appearance-of-uisegmentedcontrol)解释了（在那个解释中，我只使用了 2 个背景图像用于正常和选定状态，但如果你想使用突出显示状态，那么你需要添加第三个背景图像）。

这是显示这些图像如何在 UISegmentedControl 中使用的图表： ![在此处输入图像描述](../Images/ad70770bf9971272e122bcd390bf7404.png)

然后使用以下外观方法设置它们：

```
// Set background images
[segmentedControl setBackgroundImage:background_image_normal
                            forState:UIControlStateNormal
                          barMetrics:UIBarMetricsDefault];
[segmentedControl setBackgroundImage:background_image_selected
                            forState:UIControlStateSelected
                          barMetrics:UIBarMetricsDefault];
[segmentedControl setBackgroundImage:background_image_highlighted
                            forState:UIControlStateHighlighted
                          barMetrics:UIBarMetricsDefault];

// Set divider images 0=Normal 1=Selected 2=Highlighted
[segmentedControl setDividerImage:divider_image_00
              forLeftSegmentState:UIControlStateNormal
                rightSegmentState:UIControlStateNormal
                       barMetrics:UIBarMetricsDefault]
[segmentedControl setDividerImage:divider_image_01
              forLeftSegmentState:UIControlStateNormal
                rightSegmentState:UIControlStateSelected
                       barMetrics:UIBarMetricsDefault]
[segmentedControl setDividerImage:divider_image_10
              forLeftSegmentState:UIControlStateSelected
                rightSegmentState:UIControlStateNormal
                       barMetrics:UIBarMetricsDefault]
[segmentedControl setDividerImage:divider_image_02
              forLeftSegmentState:UIControlStateNormal
                rightSegmentState:UIControlStateHighlighted
                       barMetrics:UIBarMetricsDefault]
[segmentedControl setDividerImage:divider_image_20
              forLeftSegmentState:UIControlStateHighlighted
                rightSegmentState:UIControlStateNormal
                       barMetrics:UIBarMetricsDefault]
[segmentedControl setDividerImage:divider_image_12
              forLeftSegmentState:UIControlStateSelected
                rightSegmentState:UIControlStateHighlighted
                       barMetrics:UIBarMetricsDefault]
[segmentedControl setDividerImage:divider_image_21
              forLeftSegmentState:UIControlStateHighlighted
                rightSegmentState:UIControlStateSelected
                       barMetrics:UIBarMetricsDefault] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:30:17.043

一种可能的解决方案是手动继承 UISegmentedControl，并覆盖它以确保在调用 UIResponder 事件时正确“清理”分隔符状态。可能是该段预计 touchesMoved 事件将在与初始 touchesBegan 相同的边界内发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T13:28:56.943

不要忘记 UIControlStateSelected | UIControlStateHighlighted

```
// Set background images
UIImage *normalBackgroundImage = [UIImage imageNamed:@"segmented-background-unselected"];
UIImage *selectedBackgroundImage = [UIImage imageNamed:@"segmented-background-selected"];
[self setBackgroundImage:normalBackgroundImage
                forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[self setBackgroundImage:selectedBackgroundImage
                forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[self setBackgroundImage:normalBackgroundImage
                forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
[self setBackgroundImage:selectedBackgroundImage
                forState:UIControlStateSelected | UIControlStateHighlighted barMetrics:UIBarMetricsDefault];

// Set divider images
UIImage *buttonImageLeftSelected = [UIImage imageNamed:@"segmented-left-selected"];
UIImage *buttonImageNoneSelected = [UIImage imageNamed:@"segmented-none-selected"];
UIImage *buttonImageRightSelected = [UIImage imageNamed:@"segmented-right-selected"];

[self   setDividerImage:buttonImageNoneSelected
    forLeftSegmentState:UIControlStateNormal
      rightSegmentState:UIControlStateNormal
             barMetrics:UIBarMetricsDefault];

[self   setDividerImage:buttonImageLeftSelected
    forLeftSegmentState:UIControlStateSelected
      rightSegmentState:UIControlStateNormal
             barMetrics:UIBarMetricsDefault];
[self   setDividerImage:buttonImageLeftSelected
    forLeftSegmentState:UIControlStateSelected | UIControlStateHighlighted
      rightSegmentState:UIControlStateNormal
             barMetrics:UIBarMetricsDefault];
[self   setDividerImage:buttonImageLeftSelected
    forLeftSegmentState:UIControlStateSelected
      rightSegmentState:UIControlStateHighlighted
             barMetrics:UIBarMetricsDefault];

[self   setDividerImage:buttonImageRightSelected
    forLeftSegmentState:UIControlStateHighlighted
      rightSegmentState:UIControlStateSelected
             barMetrics:UIBarMetricsDefault];
[self   setDividerImage:buttonImageRightSelected
    forLeftSegmentState:UIControlStateNormal
      rightSegmentState:UIControlStateSelected | UIControlStateHighlighted
             barMetrics:UIBarMetricsDefault];
[self   setDividerImage:buttonImageRightSelected
    forLeftSegmentState:UIControlStateNormal
      rightSegmentState:UIControlStateSelected
             barMetrics:UIBarMetricsDefault]; 
```

# php - 如何直接从命令行运行 PHP 语句？

> ID：15253519
> 
> 赞同：1
> 
> 时间：2013-03-06T17:02:54.300
> 
> 标签：php, command-line

我知道这`php -a`将允许我以交互方式执行 PHP 语句，并且我可以创建一个文件并将其传递给`php -f`命令，但我想要的是执行单个 PHP 语句而不必创建文件，也不需要进入交互模式。让我们假设句子是`echo "testing";`。我在 Ubuntu OS 上，我说在我看来，解决方案是将 php 命令与 shell 管道混合使用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T17:04:06.533

那将是

```
 php -r 'echo "something";' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:04:24.643

通过 facebook尝试[phpsh 。](https://github.com/facebook/phpsh)它非常适合测试您的在线用户。

# performance - 对于非常有状态的游戏/模拟，Haskell 状态与 C++ 相比效率如何？

> ID：15253524
> 
> 赞同：8
> 
> 时间：2013-03-06T17:03:04.897
> 
> 标签：performance, haskell

我似乎无法找到有关该主题的任何确凿信息。那里有很多 Haskell 游戏实现，但我发现的是小型游戏，尚不清楚它们的方法是否可扩展。同样，有很多关于在 Haskell 程序中拥有状态的信息（主要使用 State monad），但关于这些方法的效率是否与命令式语言中的状态相当的信息却很少。

我正在开发一个具有极其简单图形的模拟器，这使得在 Haskell 中进行开发对我来说非常理想。但是，我想模拟尽可能多的实体，这意味着效率非常重要。为了使用 Haskell，我会接受性能略有下降，但我担心这种模拟的有状态特性会使 Haskell 代码比我的其他选择 C++ 慢一个数量级。

正如标题所述，Haskell 如何比较这种类型的应用程序？非常感谢有关在 Haskell 中使用的方法的建议，以及指向已实现的有状态的高性能 Haskell 程序的链接。

如果需要一个更具体的示例来说明我需要如何维护状态，我可以提供一个，但只要考虑在每次迭代中都会发生广泛变化的大量坐标集合就足够了。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T17:12:41.530

就目前而言，您的问题无法直接回答。

TL；DR：没有理论上的原因会导致性能问题。而且当然不知道有“一个数量级”的性能差的原因。然而，除非你有一个具体的场景，否则很难做出宽泛的陈述。

* * *

Haskell 可以像 C++ 一样访问裸内存和随机播放位。因此，没有理论上的“慢数量级”需要关注。实际上，如果您希望将状态表示为可变的内存块、堆栈分配的帧或其他任何东西，Haskell（GHC 实现）支持这一点——毕竟有一些操作系统是用 Haskell 编写的。

在这方面有用的一些习语和库：

*   未装箱的严格字段
*   ST monad（对原始内存的安全访问）
*   vector 和 repa 库——高性能向量

除非您正在编写设备驱动程序，否则您很可能不需要绝对的低级控制。

只要你的算法是明智的，你会没事的。

Haskell 的 GHC 实现具有非常快的分配（凹凸指针），使不可变数据变得便宜。使用不可变数据没有固有的损失，您可以获得更容易的并行化和更易于维护的代码。因此，如果可以，请坚持使用 Haskell 习语。

> 我想模拟尽可能多的实体，这意味着效率非常重要。

GHC 有一个非常高效的分配器和垃圾收集器，对象便宜且开销低——假设你使用合理的数据表示——所以我认为这里没有问题。例如，在基准测试游戏中，二叉树基准测试分配器性能——C++ 和 GHC Haskell在编写此微测试时[并列。](http://benchmarksgame.alioth.debian.org/u32/performance.php?test=binarytrees)

最终，从根本上使用 Haskell 无需付出任何代价。您可以在必要时使用命令式算法——可能您不需要。只是不要犯使用幼稚算法的错误（例如使用不可变列表代替可变数组）。这是迄今为止最大的风险——作为一个新用户，你可能会使用低效的方法——寻求帮助和简介:)

顺便说一句，10 年前，一位新的 Haskell 用户编写了[Frag](http://www.haskell.org/haskellwiki/Frag)，它的性能完全可以接受。GHC 现在也聪明多了……

# c# - 界面误区

> ID：15253525
> 
> 赞同：1
> 
> 时间：2013-03-06T17:03:13.370
> 
> 标签：c#, interface, parameters

我正在尝试通过接口提高我的生产力和可扩展性。它们非常强大，但我在理解或实施方面遇到了障碍。

假设，如果我有一个我无法控制的*用户界面；*但我正在编写一个将执行一系列逻辑的*类库。*我最初的想法是这样的：

```
public interface ISiteForm
{
     public string FirstName { get; set; }
     public string LastName { get; set; }

     // Also any other User Interface Form Fields.
} 
```

它将像这样布置，因此它可以由*User Interface*实现和引用。

```
public class SiteForm : ISiteForm
{
    public SiteForm()
    {
        FormPass();
    }

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }
    }

    public string LastName
    {
         get { return lastName; }
         set { lastName = value; }
    }

    private string lastName,
    private string firstName,

    public void FormPass(string _lastName, string _firstName)
    {
        // Implementation to assign a value from User Interface into the interface.

        lastName = _lastName;
        firstName = _firstName;
    }
} 
```

我的想法是当引用*类库*时，他们会在调用方法时将这些参数传递给方法。然后在创建班级时自然而然；它会将这些变量分配给接口。

那么，如果我有需要这些相同变量的项目的任何其他部分；我可以简单地调用接口并调整设置器值。

我的担忧是：

*   接口本质上不需要逻辑
*   它们通常是多态的，这将失去特定的实现。

这是通过接口传递参数的错误方法，以便可以在其他地方使用相同的变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:08:14.663

您没有为接口分配任何东西，它是一个实现合同。实现类包含所有逻辑。

如果您想使用相同的接口和变量，您可能需要查看依赖注入和控制反转之类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:08:43.413

接口只用于多态性。您根本不应该在其中添加任何逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:33:06.810

> 这是通过接口传递参数的错误方法，以便可以在其他地方使用相同的变量吗？

注意不要将对象实例与类型声明混淆。类型的局部变量`ISiteForm`可以在声明它的块中访问。例如，

```
public void M()
{
    ISiteForm s = new SiteForm();
} 
```

如果我声明`s`为`SiteForm`更改，则不会使`s`程序的其他部分更容易访问对象实例。

接口确实允许我们统一对待对象，而不管对象的底层类型如何。

例如

```
public void M(ISiteForm s)
{
    var propertyName = s.FirstName;
} 
```

在这里，我不知道也不关心是否`s`是一种类型`SiteForm`或其他类型碰巧实现了`ISiteForm`. 行为是多态的。

> **它将像这样布置，因此它可以由用户界面实现和引用。**

在这一点上，接口可用于解耦 n 层架构中的层。例如，您可以创建一个 Interfaces.dll。这个 DLL 可以容纳`ISiteForm`. 用户界面和业务逻辑都可以引用这个共享的 DLL。这种设计通过允许其他不相关的对象在层之间传递来允许松散耦合，并有助于避免[循环引用](http://en.wikipedia.org/wiki/Circular_reference)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T22:06:05.193

根据建议，我重新审视了解决方案。这就是我最终处理它的方式，我使用了*依赖注入：接口注入*方法。这种方法提供了我需要的解耦方法；同时仍然保持功能的目标。

我创建了以下内容：

```
public interface ISiteForm
{
     string GetSiteValues(string FirstName, string LastName);
} 
```

这个特定的接口将充当我们的*Dependency*或`IDependency`. 然后我创建了以下`Class`.

```
public class SiteForm : ISiteForm
{
    // Leave for now.
} 
```

所以现在我们已经预先配置了我们的`Interface`and `Class`. 这将作为我们的*Dependency*。

现在设置我们的注射器。

```
public interface ISiteFormInjector
{
    void InjectSiteForm(ISiteForm siteDetails);
} 
```

我们的注入器将是我们的*Dependent*或在我们的情况下`IDependent`。现在我们需要更新我们的代码，以便物理实现数据注入。

```
public class SiteContent : ISiteFormInjector
{
    // Call our Dependency.
    ISiteForm _siteDetails;

    public void InjectSiteForm(ISiteForm siteDetails)
    {
         _siteDetails = siteDetails;
    }

    // Properties to Associate our Value.
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public string GetSiteValues()
    {
        return _siteDetails.GetSiteValues(FirstName, LastName);
    }
} 
```

现在可以注入这些值；显然，通过一些重构，它将能够注入值，然后将这些变量传递给应用程序的其他方面。它遵循这种布局形式：

![用于接口注入的 UML](../Images/b6c776989136f3b57fef0afa0d5741de.png)

# razor - WebGrid 格式不输出任何内容

> ID：15253526
> 
> 赞同：0
> 
> 时间：2013-03-06T17:03:15.627
> 
> 标签：razor, asp.net-mvc-4, webgrid

我有一个使用 MVC 4 (Razor) 中的 foreach 循环构建的表，我正在尝试将其转换为 WebGrid 以利用排序。目前，我只是想让`format`参数为我工作，以便我可以根据需要重新创建列。这是一个我无法开始工作的简单示例：

```
grid.Column(
    columnName: "ChangeId",
    format: (item) => @Html.DisplayFor(m => (item as ChangeStateViewModel).ChangeId)
) 
```

这在渲染期间不输出任何内容：

```
<td></td> 
```

我究竟做错了什么？我试过删除`(item) =>`和使用`<text>...</text>`，但这也没有显示我的价值。

**编辑**

如果我将其更改为以下内容，如此[处](https://stackoverflow.com/a/5723256/128217)所述，它*会*显示项目中的所有属性；然而，从那里开始建设只会让我回到原来的位置。

```
format: @<text>@Html.DisplayFor(x => item)</text> 
```

**编辑2**

```
format: @<text>@item.ChangeId</text> 
```

当然可以，但不能让我提供 DisplayTemplate。

**编辑3**

看起来像是`(item as ChangeStateViewModel).ChangeId`在给我`NULL`..但是为什么呢？如果我只使用`@item.ChangeId`.

**编辑4**

看起来提供的默认项目（当您使用时`@<text>...</text>`）是 a `System.Web.Helpers.WebGridRow`，这就是**EDIT3**提供它所做的行为的原因。像下面这样的东西会起作用，但前提是你把它发送到 DisplayTemplate；出于某种原因，如果您删除该部分，它将不会显示`, "DisplayAny"`。

```
format: @<text>@Html.DisplayFor(x => (item as WebGridRow)["ChangeId"], "DisplayAny")</text> 
```

*不过，这确实使**EDIT2**相当混乱。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:51:54.020

这行得通，所以我停在这里并将其标记为答案。但是，如果有更好的方法来解决这个问题，我很想听听他们的意见。

```
format: @<text>@Html.DisplayFor(x => (item as WebGridRow)["ChangeId"], "DisplayAny")</text> 
```

显示模板是必需的；否则，这不会显示。

# api - 检索 Twitter 对话

> ID：15253528
> 
> 赞同：3
> 
> 时间：2013-03-06T17:03:16.173
> 
> 标签：api, twitter

我正在尝试获取对推文的所有回复，即对这条推文的回复：

[https://twitter.com/bbcworldservice/status/309345806123667456](https://twitter.com/bbcworldservice/status/309345806123667456)

我有这个工作使用类似的东西：

[https://api.twitter.com/1.1/statuses/mentions_timeline.json?count=100&since_id=309345806123667456](https://api.twitter.com/1.1/statuses/mentions_timeline.json?count=100&since_id=309345806123667456)

但后来我发现这会返回所有最新的推文，而不是从此 ID 开始的所有推文。因此，假设该用户被提及超过 100 次，则不再包括对该推文的回复。渲染它没用。

任何人都可以帮忙吗？提供任何替代建议？

谢谢，海伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-08T15:46:32.427

几个月前我在工作中遇到了同样的问题，因为我之前`related_tweets`在 REST V1 中使用了他们的端点。

所以我必须创建一个解决方法，我已经记录在这里。 [http://adriancrepaz.com/twitter_conversations_api](http://adriancrepaz.com/twitter_conversations_api)

这个类应该做你想要的。它会抓取移动网站的 HTML，并解析对话。我已经使用了一段时间，它似乎非常可靠。

要获取对话...

**要求**

```
<?php

require_once 'acTwitterConversation.php';

$twitter = new acTwitterConversation;
$conversation = $twitter->fetchConversion(324215761998594048);
print_r($conversation);

?> 
```

**回复**

```
Array
(
    [error] => false
    [tweets] => Array
        (
            [0] => Array
                (
                    [id] => 324214451756728320
                    [state] => before
                    [username] => facebook
                    [name] => Facebook
                    [content] => Facebook for iOS v6.0 ? Now with chat heads and stickers in private messages, and a more beautiful News Feed on iPad itunes.apple.com/us/app/faceboo?
                    [date] => 16 Apr
                    [images] => Array
                        (
                            [thumbnail] => https://pbs.twimg.com/profile_images/3513354941/24aaffa670e634a7da9a087bfa83abe6_normal.png
                            [large] => https://pbs.twimg.com/profile_images/3513354941/24aaffa670e634a7da9a087bfa83abe6.png
                        )
                )

            [1] => Array
                (
                    [id] => 324214861728989184
                    [state] => before
                    [username] => michaelschultz
                    [name] => Michael Schultz
                    [content] => @facebook good April Fools joke Facebook?.chat hasn?t changed. No new features.
                    [date] => 16 Apr
                    [images] => Array
                        (
                            [thumbnail] => https://pbs.twimg.com/profile_images/414193649073668096/dbIUerA8_normal.jpeg
                            [large] => https://pbs.twimg.com/profile_images/414193649073668096/dbIUerA8.jpeg
                        )
                )
             ....             
        )
) 
```

希望它有所帮助，阿德里安。

# python - 具有重复节点的 8 个平铺求解器 - Python

> ID：15253529
> 
> 赞同：2
> 
> 时间：2013-03-06T17:03:21.897
> 
> 标签：python, depth-first-search, breadth-first-search, heuristics, solver

我正在尝试使用 BFS 搜索、DFS、贪婪和 A* 等技术解决 8tile 难题，并使用曼哈顿距离作为我的启发式解决方案。

问题是，虽然我可以解决很多问题，但问题在于一些谜题，我扩展父节点时得到的子节点可能已经在较旧的节点中。

我不知道我是否能够很好地解释自己，但我的主要问题是我试图查看我创建的新节点是否已经在旧节点上。

有了这个问题，我通常会进入深度 9，然后我的程序不会推进或给出解决方案。

我的一个想法是使用代码：

```
if node in prev:
    continue
prev.append(node) 
```

但我想我走错路了。

我在 python 上做这个，这是我的代码，以防有人可以帮助我。

```
#!/usr/bin/python

import sys
import copy

class Board:
    def __init__(self, matrix, whitepos=None):
        self.matrix = matrix
        self.whitepos = whitepos
        if not whitepos:
            for y in xrange(3):
                for x in xrange(3):
                    if board[y][x] == 0:
                        self.whitepos = (x, y)

def is_final_state(board):
    final = [[1, 2, 3], [8, 0, 4], [7, 6, 5]]
    for y in xrange(3):
        for x in xrange(3):
            if board.matrix[y][x] != final[y][x]:
                return False
    return True

def get_whitepos(board):
    return board.whitepos

def move(board, x, y, dx, dy):
    b = copy.deepcopy(board.matrix)
    b[y][x] = b[y + dy][x + dx]
    b[y + dy][x + dx] = 0
    return Board(b, (x + dx, y + dy))

def manhattan_heur(board):
    finalpos = [(1, 1), (0, 0), (1, 0), (2, 0), (2, 1), (2, 2), (1, 2), (0, 2),
                (0, 1)]
    cost = 0
    for y in xrange(3):
        for x in xrange(3):
            t = board.matrix[y][x]
            xf, yf = finalpos[t]
            cost += abs(xf - x) + abs(yf - y)
    return cost

def wrongplace_heur(board):
    finalpos = [(1, 1), (0, 0), (1, 0), (2, 0), (2, 1), (2, 2), (1, 2), (0, 2),
                (0, 1)]
    cost = 0
    for y in xrange(3):
        for x in xrange(3):
            t = board.matrix[y][x]
            if finalpos[t] != (x, y):
                cost += 1
    return cost

def heuristic(board):
    return manhattan_heur(board)

class Node:
    def __init__(self, board, parent):
        self.state = board
        self.parent = parent
        if not parent:
            self.g = 0
        else:
            self.g = parent.g + 1
        self.h = heuristic(board)

    def test_goal(self):
        return is_final_state(self.state)

    def expand(self):
        children = []
        b = self.state
        x, y = get_whitepos(b)
        if x > 0:
            children.append(Node(move(b, x, y, -1, 0), self))
        if x < 2:
            children.append(Node(move(b, x, y, +1, 0), self))
        if y > 0:
            children.append(Node(move(b, x, y, 0, -1), self))
        if y < 2:
            children.append(Node(move(b, x, y, 0, +1), self))
        return children

class Solution:
    def __init__(self, node, mem_needed, steps):
        self.node = node
        self.mem_needed = mem_needed
        self.iterations = steps

    def inc(self, other):
        self.node = other.node
        self.mem_needed = max(self.mem_needed, other.mem_needed)
        self.iterations += other.iterations

def search(board, queue_fn, queue_arg=None):
    max_nodes = 1
    steps = 0
    nodes = [Node(Board(board), None)]
    prev = []
    depth = 0
    while nodes:
        node = nodes.pop(0)

        if node.g > depth:
            depth = node.g
            print depth

        if node in prev:
            continue
        prev.append(node)

        if node.test_goal():
            return Solution(node, max_nodes, steps)
        new_nodes = node.expand()
        nodes = queue_fn(nodes, new_nodes, queue_arg)

        max_nodes = max(max_nodes, len(nodes))
        steps += 1
    return Solution(None, max_nodes, steps)

def fifo_queue(nodes, new_nodes, _):
    nodes.extend(new_nodes)
    return nodes

def bl_search(board):
    return search(board, fifo_queue)

def lifo_queue(nodes, new_nodes, _):
    new_nodes.extend(nodes)
    return new_nodes

def dfs_search(board):
    return search(board, lifo_queue)

def bpl_queue(nodes, new_nodes, max_depth):
    def f(n):
        return n.g <= max_depth

    new_nodes = filter(f, new_nodes)
    new_nodes.extend(nodes)
    return new_nodes

def bpi_search(board):
    solution = Solution(None, 0, 0)
    for max_depth in xrange(0, sys.maxint):
        sol = search(board, bpl_queue, max_depth)
        solution.inc(sol)
        if solution.node:
            return solution

def sort_queue(nodes, new_nodes, cmp):
    nodes.extend(new_nodes)
    nodes.sort(cmp)
    return nodes

def guloso2_search(board):
    def cmp(n1, n2):
        return n1.h - n2.h

    return search(board, sort_queue, cmp)

def astar_search(board):
    def cmp(n1, n2):
        return (n1.g + n1.h) - (n2.g + n2.h)

    return search(board, sort_queue, cmp)

def print_solution(search, sol):
    print
    print "*", search
    node = sol.node
    if node:
        print "moves:", node.g
        while node:
            print "\t", node.state.matrix
            node = node.parent
    else:
        print "no solution found"
    print "nodes needed:", sol.mem_needed
    print "iterations:  ", sol.iterations

board = [[6, 5, 7], [2, 0, 1], [8, 4, 3]]

print_solution("bl", bl_search(board))
print_solution("dfs", dfs_search(board))
print_solution("bpi", bpi_search(board))
print_solution("guloso2", guloso2_search(board))
print_solution("astar", astar_search(board)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:08:13.117

看起来您正在以正确的方式进行操作，但是您需要在 Node 类中定义`__eq__`and`__ne__`方法；否则`node in prev`将始终返回`False`，因为 Python 不知道如何与`node`列表中的项目进行比较。查看[Python 数据模型文档](http://docs.python.org/2/reference/datamodel.html#object.__eq__)，了解更多关于如何在用户定义类型上进行比较的信息。

我抓住了你的代码并添加了几个（非常天真的）方法来进行相等性检查，它似乎不再挂起。还值得注意的是，您的类应该从基类继承`object`（见下文）。这些是我所做的更改（在上下文中）：

```
class Board(object):
    def __init__(self, matrix, whitepos=None):
        self.matrix = matrix
        self.whitepos = whitepos
        if not whitepos:
            for y in xrange(3):
                for x in xrange(3):
                    if board[y][x] == 0:
                        self.whitepos = (x, y)
    def __eq__(self, o):
        # Note that comparing whitepos is not strictly necessary; but I left 
        # it in as a safety measure in case the board state gets corrupted.
        # If speed becomes an issue, take it out.
        return (self.matrix, self.whitepos) == (o.matrix, o.whitepos)

class Node(object):
    def __init__(self, board, parent):
        self.state = board
        self.parent = parent
        if not parent:
            self.g = 0
        else:
            self.g = parent.g + 1
        self.h = heuristic(board)

    def test_goal(self):
        return is_final_state(self.state)

    def expand(self):
        children = []
        b = self.state
        x, y = get_whitepos(b)
        if x > 0:
            children.append(Node(move(b, x, y, -1, 0), self))
        if x < 2:
            children.append(Node(move(b, x, y, +1, 0), self))
        if y > 0:
            children.append(Node(move(b, x, y, 0, -1), self))
        if y < 2:
            children.append(Node(move(b, x, y, 0, +1), self))
        return children

    def __eq__(self, o):
        # Note that you don't have to compare parents, since your goal
        # is to eliminate ANY nodes with the same position.
        return self.state == o.state

class Solution(object):
    def __init__(self, node, mem_needed, steps):
        self.node = node
        self.mem_needed = mem_needed
        self.iterations = steps

    def inc(self, other):
        self.node = other.node
        self.mem_needed = max(self.mem_needed, other.mem_needed)
        self.iterations += other.iterations

#...

print_solution("bl", bl_search(board))
# I commented out all but the first search to avoid cluttering up the output. 
```

通过这些更改，代码确实产生了一个解决方案（我将由您来验证它是否正确，但这是我的输出）。

```
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20

* bl
moves: 20
    [[1, 2, 3], [8, 0, 4], [7, 6, 5]]
    [[1, 2, 3], [8, 6, 4], [7, 0, 5]]
    [[1, 2, 3], [8, 6, 4], [0, 7, 5]]
    [[1, 2, 3], [0, 6, 4], [8, 7, 5]]
    [[1, 2, 3], [6, 0, 4], [8, 7, 5]]
    [[1, 0, 3], [6, 2, 4], [8, 7, 5]]
    [[0, 1, 3], [6, 2, 4], [8, 7, 5]]
    [[6, 1, 3], [0, 2, 4], [8, 7, 5]]
    [[6, 1, 3], [2, 0, 4], [8, 7, 5]]
    [[6, 1, 3], [2, 7, 4], [8, 0, 5]]
    [[6, 1, 3], [2, 7, 4], [8, 5, 0]]
    [[6, 1, 3], [2, 7, 0], [8, 5, 4]]
    [[6, 1, 0], [2, 7, 3], [8, 5, 4]]
    [[6, 0, 1], [2, 7, 3], [8, 5, 4]]
    [[6, 7, 1], [2, 0, 3], [8, 5, 4]]
    [[6, 7, 1], [2, 5, 3], [8, 0, 4]]
    [[6, 7, 1], [2, 5, 3], [8, 4, 0]]
    [[6, 7, 1], [2, 5, 0], [8, 4, 3]]
    [[6, 7, 0], [2, 5, 1], [8, 4, 3]]
    [[6, 0, 7], [2, 5, 1], [8, 4, 3]]
    [[6, 5, 7], [2, 0, 1], [8, 4, 3]]
nodes needed: 44282
iterations:   59930 
```

希望这可以帮助！

# binary-tree - 使用无歧义的 InOrder 遍历打印二叉树

> ID：15253530
> 
> 赞同：0
> 
> 时间：2013-03-06T17:03:27.517
> 
> 标签：binary-tree, traversal, ambiguity, inorder

我正在尝试使用中序遍历（在 java 中）打印出二叉树，但没有任何歧义。

我从后序符号输入创建了树。

例如，输入 = 2 3 4 * - 5 + 然后我创建树，并希望使用中序遍历将其打印出来。

所以输出必须是 = 2 - (3*4) + 5 但是，使用按顺序遍历显然不会给我分隔括号。

我的问题是，我可以按我想要的方式打印输出，而无需干预基本的 BinaryNode 和 BinaryTree 类，而只更改我的驱动程序类吗？如果是这样，我将如何去做？

如果我只能通过更改我的 printInOrder 方法（在 BinaryNode 类中）来做到这一点，这就是它目前的样子：

```
public void printInOrder()
    {
        if (left != null)
        {
            left.printInOrder();            // Left
        }
        System.out.print(element);       // Node
        if (right != null)
        {
            right.printInOrder();           // Right
        }
    } 
```

这是我第一次使用 Stack Overflow，如果我没有正确发布，请放轻松:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:24:22.283

我想通了，例如，输入 23+4+5* 将给出 (((2+3)+4)*5)

请参见下面的代码：

```
//NOTE: printInOrder has been modified to exclude ambiguity
public void printInOrder()
{
    if (left != null)
    {
        if (height(left)== 0)
        {
            //when we reache the bottom of a node, we put a bracket around each side as we know this will have it's own operation
            // eg:  *
            //     / \
            //    3   4
            System.out.print("("); 
            left.printInOrder();            // Left
        }
        else
        {
            // We also put in a bracket here as this matches the closing brackets to come (which we do not know about yet)
            System.out.print("(");
           left.printInOrder();            // Left 
        }

    }
      System.out.print(element);                // Node
    if (right != null)
    {
        if (height(right) == 0)
        {
            //when we reache the bottom of a node, we put a bracket around each side as we know this will have it's own operation
            // eg:  *
            //     / \
            //    3   4
            right.printInOrder();           // Right
            System.out.print(")");
        }
        else
        {
            right.printInOrder();           // Right
           // System.out.print(")"); // this print statement actually isnt necessary
        }

    }
} 
```

# sqlite - SQLite 中的一个查询中的多个 Select 语句

> ID：15253535
> 
> 赞同：8
> 
> 时间：2013-03-06T17:03:39.517
> 
> 标签：sqlite

是否可以在 SQLite 的一个查询中运行多个选择语句？

如：

```
SELECT ( 
           SELECT ChestGemEffects.Value,
                  Effect.Name
             FROM ChestGemEffects
                  INNER JOIN Effect
                          ON ChestGemEffects.EffectId = Effect.Id
                  INNER JOIN Gems
                          ON ChestGemEffects.GemId = Gems.Id
            WHERE ( Gems.[Key] = 'SG1' )  
       ) 
       AS ChestEffects,
       ( 
           SELECT WeaponGemEffects.Value,
                  Effect.Name
             FROM WeaponGemEffects
                  INNER JOIN Effect
                          ON WeaponGemEffects.EffectId = Effect.Id
                  INNER JOIN Gems
                          ON WeaponGemEffects.GemId = Gems.Id
            WHERE ( Gems.[Key] = 'SG1' )  
       ) 
       AS WeaponEffects,
       ( 
           SELECT OthersGemEffects.Value,
                  Effect.Name
             FROM OthersGemEffects
                  INNER JOIN Effect
                          ON OthersGemEffects.EffectId = Effect.Id
                  INNER JOIN Gems
                          ON OthersGemEffects.GemId = Gems.Id
            WHERE ( Gems.[Key] = 'SG1' )  
       ) 
       AS OthersEffects; 
```

它给了我错误：

'执行查询时出错：作为表达式一部分的 SELECT 只允许一个结果'

我的表达有问题还是 SQLite 不支持？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T17:34:20.220

必须在子句中使用子查询的结果作为源表进行进一步查询`FROM`：

```
SELECT * FROM (SELECT ...), (SELECT ...) 
```

但是，这将是一个[cross join](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)，这不是您想要的。

要仅附加多个表（具有相同数量的列），请使用[UNION ALL](http://www.sqlite.org/lang_select.html#compound)：

```
SELECT ChestGemEffects.Value,
       Effect.Name
  FROM ...
  ...
UNION ALL
SELECT WeaponGemEffects.Value,
       Effect.Name
  FROM ...
  ... 
```

# javascript - 打开一个窗口并写入该窗口

> ID：15253541
> 
> 赞同：2
> 
> 时间：2013-03-06T17:03:59.330
> 
> 标签：javascript

我在一个 Firebug 扩展上工作，它是 Firefox 扩展。从我的扩展中，我必须创建一个报告。我正在尝试打开一个新窗口并将代码写入其中。我可以使用以下代码打开一个窗口，但无法向该窗口写入任何内容。我收到一个错误“`newWindow.document.write()`不安全”

如果我使用`document.body.innerHTML()`我可以将内容写入窗口，但我想以其他方式执行此操作，因为从我的工具生成的文本中包含脚本和 css。

这是我的代码片段：

```
var newWindow = window.open ("","Test","width=335,height=330,resizable=1,toolbar=1,scrollbars=1,status=0")

newWindow .document.open()
// html is the data to be shown on the window. It has script and 
// the content in it.
newWindow .document.write(html)
newWindow .document.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:07:23.503

像这样使用：

```
<script>
var w = window.open('', 'wnd');

w.document.body.innerHTML = "<b>Hello, stackoverflow!</b>";
</script> 
```

# java - 引用的 Jar 中的 Log4J JDBC SQL 错误

> ID：15253544
> 
> 赞同：1
> 
> 时间：2013-03-06T17:04:05.383
> 
> 标签：java, oracle, hadoop, log4j

据我所知，我正在编写一个使用 Hadoop 的 Java 应用程序，该应用程序使用 Log4j。在我的应用程序中，Log4J 工作正常。我正在使用 JDBCAppender 写入 Oracle 数据库。发生的事情是，当我运行应用程序时，在 log4j 调用期间在 Hadoop jar 中它崩溃并给出一个缺少逗号的错误。这很奇怪，因为它在我的程序部分工作，但在 Hadoop 的东西中崩溃。我在 log4j 中打开了调试，一切看起来都很正常。

我的问题如下。1) 是否有可能以某种方式在 JDBCAppender 中打开额外的日志记录以查看有什么问题的 SQL 语句？2）我到底应该如何处理这个！:)

这是异常和 log4j.properties 文件。

```
log4j:ERROR Failed to excute sql
java.sql.SQLSyntaxErrorException: ORA-00917: missing comma

at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:447)
at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:505)
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:223)
at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
at oracle.jdbc.driver.T4CStatement.doOall8(T4CStatement.java:193)
at oracle.jdbc.driver.T4CStatement.executeForRows(T4CStatement.java:1033)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1328)
at oracle.jdbc.driver.OracleStatement.executeUpdateInternal(OracleStatement.java:1837)
at oracle.jdbc.driver.OracleStatement.executeUpdate(OracleStatement.java:1802)
at         oracle.jdbc.driver.OracleStatementWrapper.executeUpdate(OracleStatementWrapper.java:294)
at org.apache.log4j.jdbc.JDBCAppender.execute(JDBCAppender.java:218)
at org.apache.log4j.jdbc.JDBCAppender.flushBuffer(JDBCAppender.java:289)
at org.apache.log4j.jdbc.JDBCAppender.append(JDBCAppender.java:186)
at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
at     org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
at org.apache.log4j.Category.callAppenders(Category.java:206)
at org.apache.log4j.Category.forcedLog(Category.java:391)
at org.apache.log4j.Category.log(Category.java:856)
at org.apache.commons.logging.impl.Log4JLogger.info(Log4JLogger.java:199)
at     org.apache.hadoop.mapreduce.lib.output.FileOutputCommitter.commitTask(FileOutputCommitter.java:173)
at org.apache.hadoop.mapred.Task.commit(Task.java:1012)
at org.apache.hadoop.mapred.Task.done(Task.java:882)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:374)
at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
I/O error: Read timed out 
```

和属性文件...

```
log4j.rootLogger=INFO, DB

log4j.appender.DB = org.apache.log4j.jdbc.JDBCAppender

log4j.appender.DB.URL = jdbc:oracle:thin:@//192.168.0.18:1521/dev01.home.net
log4j.appender.DB.driver = oracle.jdbc.OracleDriver
log4j.appender.DB.user = syslog
log4j.appender.DB.password = syslog
log4j.appender.DB.sql = INSERT INTO SERVICELOG values (log4net_seq.nextVal, sysdate, '%p', null, '%m','')
log4j.appender.DB.layout = org.apache.log4j.PatternLayout 
```

编辑 0

实际上，我想我可能正在做某事。它试图打印的字符串中有一个单引号。这是甲骨文的禁忌。现在我只需要弄清楚如何删除它:)。

/编辑 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T22:07:38.047

我得到了它。Hadoop 的日志中有单引号，这会破坏对 Oracle 的写入。我实现了一个 hack 并修改了 log4j 以去除单引号。更改位于forcedLog 函数中的Category.java 中。我检查传入的对象是否是一个instanceof String。然后我拿那个字符串做一个 replaceAll("'","") 。我本可以做一个 replaceAll("'","''") 来使单引号对 Oracle 来说是可口的，但这对我来说并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:08:38.220

1：你可以很容易地定义你的happender的日志级别：log4j.appender.DB=DEBUG
你甚至可以像这样为一个特定的包设置日志级别`com.foobar = DEBUG`。

2 您可能在 log4j 上有版本冲突。最简单的方法可能是使用与 Hadoop 使用的版本完全相同的版本。另一个可能是为您的应用切换到另一个记录器实现，例如 logback。

最后一个是排除hadoop的log4j传递依赖，如果两个项目都使用maven但不能保证结果。

# c# - 过滤具有特定属性的对象列表

> ID：15253548
> 
> 赞同：14
> 
> 时间：2013-03-06T17:04:14.517
> 
> 标签：c#

```
class Object
{
    public int ID {get; set;}
    public string description {get; set;}
} 
```

如果我有一个`List<Object> Objects`填充了各种对象的对象，并且我想查找其描述具有特定内容的对象，我该怎么做？

```
find every Object in Objects whose description == "test" 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-06T17:05:35.237

您可以使用 LINQ：

```
var results = Objects.Where(o => o.Description == "test"); 
```

* * *

在旁注中，意识到这`Object`是一个非常糟糕的类名称选择，甚至不会按原样编译......我建议选择更合适的名称，并遵循 C# 的标准大写约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:11:03.977

就像 Reed Copsey 回答的那样`LINQ`。+1。

我的答案仍然是`LINQ`，但使用我喜欢的写作方式：

```
var results =   from myobject in myobjects 
                where myobject.description == "test"
                select myobject; 
```

在 where 参数中，您可以放入任何谓词（返回布尔值的函数）。

```
var results =   from myobject in myobjects 
                where MyPredicate(myobject)
                select myobject; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:09:42.933

尝试

```
foreach(Object obj in Objects)
{
    if(obj.description.Contains("test"){
        //Object description contains "test"
    }
} 
```

# r - 从矩阵中返回所有组合集合，使得每个集合中没有一个成员与另一个成员高度相关

> ID：15253549
> 
> 赞同：3
> 
> 时间：2013-03-06T17:04:15.240
> 
> 标签：r, matrix, combinations, combinatorics, correlation

如果我有一个对称矩阵（例如变量之间的相关性），我正在寻找一种方法来返回高于或低于某个阈值相关性的那些变量的所有组合。目前我还不能完全掌握如何使用`expand.grid`or `combn`（如果可以的话）来做到这一点。请注意，我**不**想要成对的变量。

想象一下，我想返回一组数字的所有可能组合（无序，所以不关心每组数字的位置）。如果有两个数字，我只有 {1}、{2}、{1,2}。如果有 3 个数字，它将是 {1} ， {2} ， {3} ， {1,2} ， {1,3} ， {2,3} ， {1,2,3}。

我想在这里对变量做同样的事情，但我想限制返回的组合，以便集合中的任何成员都没有高于某个阈值的相关性（在下面的示例中，阈值是**> 0.7**）与任何其他成员放。

```
set.seed(8) # to reproduce the numbers I have
n <- 5
m <- diag(n)
m[lower.tri(m, diag=F)] <- round( runif( sum( 1:(n-1) ) ) , 2 )
m[upper.tri(m, diag=F)] <- m[lower.tri(m, diag=F)]
m

#In this case I want to return the combinations:
1,2
1,3
1,4
1,5
2,4
4,5
1,2,4 # meaning that none of the pairs {1,2} {1,4} {2,4} share a correlation greater than 0.6
1,4,5 # ditto for {1,4} {1,5} {4,5}

     [,1] [,2] [,3] [,4] [,5]
[1,] 1.00 0.47 0.21 0.65 0.29
[2,] 0.47 1.00 0.80 0.32 0.93
[3,] 0.21 0.32 1.00 0.72 0.77
[4,] 0.80 0.72 0.93 1.00 0.64
[5,] 0.65 0.29 0.77 0.64 1.00 
```

任何人都可以帮助提出一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T18:49:54.710

不是最漂亮的解决方案，但这有效：

```
o <- unlist(lapply(2:nrow(m), function(x) {
    i1 <- combn(seq_len(nrow(m)), x)
    apply(i1, 2, function(y) {
        if (all(combn(y, 2, function(z) m[z[1], z[2]] < 0.7) == TRUE))
            y
        else 
            NA
    })
}), recursive=F)
o[!is.na(o)]

# [[1]]
# [1] 1 2
# 
# [[2]]
# [1] 1 3
# 
# [[3]]
# [1] 1 4
# 
# [[4]]
# [1] 1 5
# 
# [[5]]
# [1] 2 4
# 
# [[6]]
# [1] 4 5
# 
# [[7]]
# [1] 1 2 4
# 
# [[8]]
# [1] 1 4 5 
```

# php - 使用自定义存储库在 MVC 中模拟 Web 服务的最佳实践（在敏捷方法中）

> ID：15253555
> 
> 赞同：0
> 
> 时间：2013-03-06T17:04:44.273
> 
> 标签：php, asp.net-mvc-3, codeigniter, mocking

我正在使用 MVC 架构构建一个 Web 应用程序。我将需要使用仍在开发中的 Web 服务（我们遵循敏捷方法）。网络服务有几种方法。几种方法是稳定的（已发布和运行），有些方法仍在开发中。

所以这意味着，我需要从客户端模拟新方法（直到它们准备好）并继续使用旧方法（用于回归测试）。

在方法级别模拟服务的最佳实践是什么？欢迎任何建议或想法。我可以使用任何模拟框架吗？

我将在 ASP.Net MVC 框架以及基于 CodeIgniter 的 PHP 应用程序上应用它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:50:18.477

可能有很多方法可以做到这一点。这就是我所做的。它可能属于也可能不属于“最佳实践”类别。

我编写了一个带有 Web 服务接口的包装器。

假设我们的 WebService 有四个方法，`Get()`, `Create()`, `Update()`, `Delete()`。

我的界面很简单

```
public interface IServiceWrapper
{
  object Get();
  object Create(object toCreate);
  object Update(object toUpdate);
  bool Delete(object toDelete);
} 
```

现在我可以有两个实现。调用实际网络服务的一种

```
public class ServiceWrapper : IServiceWrapper
{
  public object Get(){//call webservice Get()}
  public object Create(object toCreate){//call webservice Create()}
  public object Update(object toUpdate){//call webservice Update()}
  public bool Delete(object toDelete){//call webservice Delete()}
} 
```

还有一个假（或模拟）实现，我在其中模仿 Web 服务行为（通常使用内存数据）

```
public class FakeServiceWrapper : IServiceWrapper
{
  private void PopulateObjects()
  {
     //mimic your data source here if you are not using moq or some other mocking framework
  }
  public object Get(){//mimic behavior of webservice Get()}
  public object Create(object toCreate){//mimic behavior of webservice Create()}
  public object Update(object toUpdate){//mimic behavior of webservice Update()}
  public bool Delete(object toDelete){//mimic behavior of webservice Delete()}
} 
```

通常，我会通过将实例注入消费服务或控制器来使用其中一个或另一个。但是，如果您愿意，您可以轻松地实例化每个包装器的实例并在方法级别“挑选”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T19:41:18.887

由于我使用的是依赖注入，我们无法在方法级别在 Mock 和 Real Service 之间切换。换句话说，我们需要使用Mock**或****RealTime**服务。

参考上面四十二的例子，

我将在`IServiceWrapper`from的 Mock 或 Real 实现之间切换`RegisterUnityMapping`。

在我的开发团队中，这是一种可行的方法。在本地开发环境中，当我有时切换到 Mock 来运行几个单元测试时 - 否则，总是使用真正的实现。不用说，在更高的环境中 - 只使用 Real 实现。

索姆

# jquery - 使用 jquery 使用两个输入单选按钮和 href 实时求和

> ID：15253557
> 
> 赞同：0
> 
> 时间：2013-03-06T17:04:55.677
> 
> 标签：jquery, radio-button, sum, real-time

我想总结来自按钮和href的2个输入。这是我的代码

这是 HTML 代码

```
 <a id="add1" class="thumbnail"  alt="100000" href="">one</a>
    <br>
  <a id="add1" class="thumbnail"  alt="150000" href="">two</a>
    <br>
  <a id="add1" class="thumbnail"  alt="90000" href="">theree</a>

<hr>
<hr>
<input class="add2" type="radio" value="1" alt="100000" name="material">
LACE
<br>
<input class="add2" type="radio" value="2" alt="200000" name="material">
LACE - LEATHER
<br>
<input class="add2" type="radio" value="3" alt="150000" name="material">
LACE - SUEDE
<br>
<hr>
<hr>
<img src="" alt="0" id="mainImage" class="pret">
<div id="cau"  alt="0"class="pret"></div>
<div id="usertotal"> PRICE  :  IDR  0</div> 
```

这是jQuery

```
<script type="text/javascript">
    $(document).ready(function() {
        $('.thumbnail').live("click", function() {
            var g = $(this).attr('alt');
            var e = $(this).attr('href');
            calculateSum();
            $('#mainImage').hide();
            $('#mainImage').html('<img class="pret" alt="'+g+'" src="'+e+'">').fadeIn();
            return false; 
        });

        $('.add2:checked').change(function(){ 
            var m = $(this).attr('alt');
            var a = $(this).attr('value');
            alert(m);
            calculateSum();
            $('#cau').hide();
            $('#cau').html('<div name="'+a+'" class="pret" alt="'+m+'"></div>').fadeIn();
            return false; 
        });

    });
    function calculateSum() {
        var sum = 0;
        $(".pret").each(function() {
            sum += parseFloat($(this).attr('alt'));
        });
        $('#usertotal').html('PRICE : IDR  '+ sum);
    }
</script> 
```

问题是：为什么我的代码运行这么慢？我必须点击2次才能求和吗？我希望它一键运行。

感谢您的回答:) 问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:16:01.230

我看到你的代码有很多问题，所以我不知道是什么导致了你的问题。

首先：您的 alt 属性和 class 属性之间需要一个空格，例如：

```
<div id="cau" alt="0" class="pret"></div> 
```

第二：

```
$('#mainImage').html('<img class="pret" alt="'+g+'" src="'+e+'">').fadeIn(); 
```

这甚至不应该正常工作，因为您不能将 html 放在图像元素“内部”（毕竟`#mainImage`是一个元素）。`<img />`

第三：

```
$('.add2:checked').change(function(){ 
```

这不应该对您发布的代码做任何事情，因为没有`.add2`在页面加载时检查类的元素。因此，这个处理程序永远不会做任何事情。

# r - 如何在每个子组中执行 Fisher 检验

> ID：15253559
> 
> 赞同：0
> 
> 时间：2013-03-06T17:05:07.333
> 
> 标签：r, dataframe, crosstab

我有一个包含以下数据的数据框：

```
age.cat ds.cat  finalstate
<65     AGN     dead
<65     AGN     alive
<65     PC      alive
65+     AMI     alive
65+     PC      dead
<65     AMI     alive 
```

对于`ds.cat`因子变量的每个级别，我都需要对变量进行 Fisher`age.cat`检验`finalstate`。

我尝试通过多种方式做到这一点，但没有收到我需要的东西。以下 R 代码不会产生所需的结果：

```
library(descr)
# 1 syntax - doesn't work
by(split(df, df$ds.cat), CrossTable(age.cat, finalstate, prop.chisq = FALSE, fisher = TRUE))
# 2 syntax - doesn't work
sapply( split(df, df$ds.cat), function(x) CrossTable(age.cat, finalstate, prop.chisq = FALSE, fisher = TRUE) )
# 3 syntax - doesn't work
for(i in 1:nlevels(ds.cat)){
    curcat <- subset(df, ds.cat == ds.cat[i])
    CrossTable(age.cat[ds.cat == ds.cat[i]], finalstate[ds.cat == ds.cat[i]], prop.chisq = FALSE, fisher = TRUE, data = curcat)
} 
```

请任何人建议如何对因子变量的每个级别执行 Fisher 检验`age.cat`和变量？`finalstate``ds.cat`

## 解决！

非常感谢你们所有人！

此代码`CrossTable`产生错误

```
Error in chisq.test(t, correct = FALSE) : 
'x' must at least have 2 elements 
```

但是感谢@BenBolker，基本`fisher.test`函数在您的代码中运行良好

```
l <- split(arf.mort, arf.mort$ds.cat)
lapply(l, function(x) fisher.test(x$age.cat, x$finalstate)) 
```

以及运作良好

```
by(arf.mort, arf.mort$ds.cat, function(x){ fisher.test(x$age.cat, x$finalstate) }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:06:08.383

您应该提及您正在使用的包 ( `gmodels`)。我们不知道每个已开发的软件包。这似乎有效，我认为这就是您正在寻找的。

```
require(gmodels)
l <- split(df, df$ds.cat)
lapply(l, function(x) CrossTable(x$age.cat, x$finalstate, 
            prop.chisq = FALSE, fisher = TRUE) 
```

它提供了一大堆表格（我猜它类似于 S-plus 格式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:09:02.167

假设您正在使用 iris 数据集（它在您启动 R 时加载），并且您想要获取前 2 列的 CrossTable，按物种拆分。这就是你的做法：

```
#whatever a crosstable is
CrossTable <- function(x, y){
    #something tricky
    sum(x+y)
}

by(iris, iris$Species, function(x){ CrossTable(x[1], x[2]) }) 
```

# sql - 在 SQL 查询中选择除最大记录之外的所有记录

> ID：15253560
> 
> 赞同：0
> 
> 时间：2013-03-06T17:05:16.287
> 
> 标签：sql

我一直在努力让它发挥作用，但我无处可去。我需要的是以下内容：

我需要能够为特定表选择除 MAX 记录之外的所有记录。我知道如何选择 Max 记录（通过使用 TOP 或 MAX），但我想显示除此之外的所有记录。有没有办法做到这一点？我已经尝试了下面的代码，但我一直在获取 MAX 记录。

```
 SELECT 
    rtrim(ltrim(pn.sFirstName + ' ' + pn.uLastName)) as newroom
    FROM tenant t (nolock)
    INNER JOIN room rm (NOLOCK) on t.hmyperson = rm.hmytenant
             and isnull(rm.boccupant,0)=0
             and rm.dtmoveout is null
    INNER JOIN person pn (nolock) on pn.hmy = rm.hmyperson
    WHERE pn.hmy <> 
   (SELECT TOP 1 pn.hmy 
    FROM tenant t (nolock)
    INNER JOIN property p (nolock) on p.hMy = t.hProperty
    INNER JOIN unit u (nolock) on (t.hUnit = u.hMy
    INNER JOIN addr ua (nolock) on u.hmy = ua.hPointer
    INNER JOIN room rm (NOLOCK) on t.hmyperson = rm.hmytenant
             and isnull(rm.boccupant,0)=0
        and rm.dtmoveout is null
        and isnull(rm.dtMoveIn,getdate()) >= getdate()
    INNER JOIN person pn (nolock) on pn.hmy = rm.hmyperson
    WHERE t.code = '011212'
    ORDER BY pn.hmy)
    and t.code = '011212' 
```

提取记录后，我想将 MAX 记录合并到单独的行中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:21:08.050

> 在您的查询中：在第 9 行 - 将其更改为：

```
SELECT MAX(pn.hmy) 
```

> 并删除第 20 行。它不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:10:39.857

基本上，你想要这个：

`SELECT * FROM tableA WHERE tableA.ID < (SELECT MAX(ID) FROM tableA)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:10:42.043

```
select
    MaxValue = Max(/* whatever*/),
   -- other required columns
from 
:
:
group by -- as needed
having value <> MaxValue 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T19:33:53.560

感谢您的输入..

我更接近了。我的下一个障碍是尝试分离剩余的记录。例如，有多个名称链接到记录。

我希望它是：

新房间，新房间 2

鲍勃·史密斯，乔治·威尔逊

我得到：

新房间，新房间 2

鲍勃史密斯

乔治·威尔逊

我的代码如下：

```
 SELECT 
rtrim(ltrim(pn.sFirstName + ' ' + pn.uLastName)) as newroom,
rtrim(ltrim(pn1.sFirstName + ' ' + pn1.uLastName))as newroom2
FROM tenant t (nolock)
INNER JOIN room rm (NOLOCK) on t.hmyperson = rm.hmytenant
         and isnull(rm.boccupant,0)=0
         and rm.dtmoveout is null
INNER JOIN person pn (nolock) on pn.hmy = rm.hmyperson
LEFT OUTER JOIN room rm1 (NOLOCK) on t.hmyperson = rm1.hmytenant
         and isnull(rm1.boccupant,0)=0
         and rm1.dtmoveout is null
LEFT OUTER JOIN person pn1 (nolock) on pn1.hmy = rm1.hmyperson
WHERE (pn.hmy or pn1.hmy) <> 
   (SELECT Max(pn.hmy) 
FROM tenant t (nolock)
INNER JOIN property p (nolock) on p.hMy = t.hProperty
INNER JOIN unit u (nolock) on (t.hUnit = u.hMy
                   and u.sCode not in ('WAIT' ,'COMAREA')
                   and u.scode not like 'NONRES%'
                   and u.exclude = '0' )
INNER JOIN addr ua (nolock) on u.hmy = ua.hPointer
INNER JOIN room rm (NOLOCK) on t.hmyperson = rm.hmytenant
         and isnull(rm.boccupant,0)=0
    and rm.dtmoveout is null
INNER JOIN person pn (nolock) on pn.hmy = rm.hmyperson
WHERE t.scode = 't0029839' 
```

) 和 t.scode = 't0029839'

更不用说，我还需要同一行的 MAX 记录：

MAX_Room, NewRoom, NewRoom2

感谢大家

# selenium - 如何将具有不同数据的不同excel表中的数据传递到硒测试中

> ID：15253561
> 
> 赞同：0
> 
> 时间：2013-03-06T17:05:19.717
> 
> 标签：selenium, selenium-webdriver, testng

我最初的要求是，我有两张 Excel 表

第一张表包含名字，姓氏第二张表包含公司，电子邮件

我必须合并两张表数据并将其传递给测试，在测试中它应该采取

第一组 .... 名字、姓氏、公司、电子邮件。第二组..名字，姓氏，公司，电子邮件..

直到数据存在于 excel 表中.. 这里的问题是在传递参数时我必须传递四个参数但在 excel 表中 2 参数...

需要帮助......

==================================================== =================================================

public Object[][] dataDetails() 抛出 BiffException, IOException{

```
 String pathofExcel="D:\\Test-Excel3.xls";
    String sheetName="test";

    Generics gen=new Generics();
    String employeeDetails[][]=gen.excelRead(pathofExcel, sheetName);

    return employeeDetails;
}

public Object[][] dataDetails2() throws BiffException, IOException{

    String pathofExcel="D:\\Test-Excel4.xls";
    String sheetName="test";

                 Generics gen=new Generics();
    String employeeDetailss[][]=gen.excelRead(pathofExcel, sheetName);

    return employeeDetailss;
}

      @DataProvider(name="enterformDetails")
public Object[][] dp() throws BiffException, IOException {
      List<Object[]> result = Lists.newArrayList();
      result.addAll(Arrays.asList(dataDetails()));
      result.addAll(Arrays.asList(dataDetails2()));
      return result.toArray(new Object[result.size()][]);
    }

@Test(dataProvider="enterformDetails")  
public  void employDetails(String FName,String LastName,String Comp,String Email){
    EmpDetails emp=new EmpDetails();
    emp.enterDetails(FName, LastName, Comp,Email);

  } 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:51:12.850

我会建议，从 xls 文件创建一个地图，并根据输入使用此地图使用地图键获取数据。它将对您有很大帮助，因为只有在您创建地图并在脚本中的任何位置使用此地图之前。如果您这样做，那么您不必在脚本中的任何位置使用@DataProvider。

步骤：从 xls 创建一个映射 使用键将映射值作为测试数据传递给测试用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:49:22.193

我认为您需要的是一个 Dataprovider，它将读取这两个文件并返回一个迭代器，该迭代器将两个文件中的值组合在一起。

```
 @DataProvider
    public CSVIterator1 genericDataProvider(){

    File input1 = new File("c:\\file1.csv");
    File input2 = new File("c:\\file2.csv");

    return new CSVIterator1(input1,input2);

}

@Test(dataProvider ="genericDataProvider")
public void test1(String s1 , String s2, String i1, String i2){

} 
```

你为我们的需要实现了 Iterator 接口。这是一个 CSV 迭代器。你可以实现一个excel迭代器。你就明白了。

```
 public class CSVIterator1 implements Iterator{

String line1;
String line2;
BufferedReader rdr1;
BufferedReader rdr2;

CSVIterator1(File input1 ,File input2){

    try {
         rdr1 = new BufferedReader(new FileReader(input1));
         rdr2 =new BufferedReader(new FileReader(input2));
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public boolean hasNext() {

    try {
        if((line1 = rdr1.readLine()) != null && (line2 = rdr2.readLine()) != null){
            return true;
        }

        // TODO Auto-generated method stub

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return false;
}

@Override
public void remove() {
    // TODO Auto-generated method stub

}

@Override
public Object next() {

    if(line1 !=null && line2 !=null){

        return genParams(line1,line2);

    }

    // TODO Auto-generated method stub
    return null;
}

public Object[] genParams(String line1 , String line2){

    String combined = line1+","+line2;

    StringTokenizer st = new StringTokenizer(combined, ",");
    Object[] result = new Object[st.countTokens()];
    int i=0;
    while(st.hasMoreTokens()){

        result[i] = st.nextElement();
        i++;
    }

    return result;
} 
```

}

# android - Android中HashMap的内存效率

> ID：15253569
> 
> 赞同：3
> 
> 时间：2013-03-06T17:05:34.353
> 
> 标签：android, memory-management, hashmap

当我第一次开始了解`HashMap`'s 时，我为我的公司编写了内部 Android 应用程序，其中包含每个订单项属性的单独地图。订单项是动态的，并且具有多个具有相应值的属性。

示例（并非所有地图都包括在内）：

```
// Preceding onCreate()
HashMap<Integer, Double> latMap;
HashMap<Integer, Double> lngMap;
HashMap<Integer, String> descMap;
// In onCreate()
latMap = new HashMap<Integer, Double>();
lngMap = new HashMap<Integer, Double>();
descMap = new HashMap<Integer, String>(); 
```

LogCat（结构：）`{ItemNumber=Value, ItemNumber=Value}`：

```
-- latMap output --
{1=0.0, 2=0.0}
-- lngMap output --
{1=0.0, 2=0.0}
-- descMap output --
{1=NULL, 2=NULL} 
```

* * *

现在我正在测试只有 2 个地图，主要`HashMap`包含项目编号和包含各个属性和值的包含地图

例子：

```
// Preceding onCreate()
HashMap<Integer, HashMap<String, String>> testMapFull;
HashMap<String, String> testMapContent;
// In onCreate()
testMapFull = new HashMap<Integer, HashMap<String, String>>();
testMapContent = new HashMap<String, String>(); 
```

LogCat（结构：）`{ItemNumber{Property=Value, Property=Value}}`：

```
{
    1={
        object_lat=0.0,
        object_lng=0.0,
        desc=NULL,
    },
    2={
        object_lat=0.0,
        object_lng=0.0,
        desc=NULL,
    }
} 
```

我的问题：内存效率等方面是否存在显着差异？目前一切正常。是的，我知道这两张地图必须比几张更好，但它们将包含相同数量的信息，而要实例化的信息更少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:25:17.797

为什么不能声明一个自定义类来保存有关特定项目的全部信息？它将允许您将`HashMap`的数字减少到 1。

```
public class Item {
    public double lat;
    public double lng;

    public String desc;
}

HashMap<Integer, Item> itemMap; 
```

它需要更少的内存，因为只使用一个`HashMap`并且允许避免[`Boxing/Unboxing`](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)创建不必要的临时对象的操作。

您还可以通过使用而不是`Boxing/Unboxing`更多地减少操作次数[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)`HashMap<Integer, ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:50:03.907

基于@vmironov 提供的答案的可能解决方案，看起来我要切换`HashMap`到`SparseArray`一个包含`Item`所有变量的类。

以下是我如何为未来的访问者进行设置的快速示例：

```
SparseArray<Item> sparseTest;

// Create an instance of this class for each item
public class Item {
    public String desc;
}
int itemNumber = 1;

// Set item variables
Item item = new Item();
item.desc = "Test Description";

// Once all variables are set, put into SparseArray
sparseTest = new SparseArray<Item>();
sparseTest.put(itemNumber, item);

// My application requires this data to be stored in a JSONArray
JSONArray ja = new JSONArray();
JSONObject innerJo = new JSONObject();
JSONObject wrapperJo = new JSONObject();
try {
    innerJo.put("desc", sparseTest.get(itemNumber).desc);
    wrapperJo.put("" + itemNumber, innerJo);
    ja.put(wrapperJo);
} catch (JSONException e1) {
    e1.printStackTrace();
} 
```

最后是输出：

```
[{"1":{"desc":"Test Description"}}] 
```

由于我的订单项值可以更改或修改，因此可以简单地通过以下方式完成：

```
sparseTest.get(itemNumber).desc = "Description Test"; 
```

# java - 项目监听器不起作用

> ID：15253571
> 
> 赞同：0
> 
> 时间：2013-03-06T17:05:40.917
> 
> 标签：java, swing

为什么我的组合框不执行我在 ItemListener 中声明的内容？当我单击组合框中的一个项目时，程序挂起我需要关闭整个 BlueJ。请看看我的代码有什么问题

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class HulaHoops {

private Scanner inp = new Scanner(System.in);

public static void main(String[]args) {
    EventQueue.invokeLater(new Runnable()
    {
        @Override
        public void run()
        {
            new HulaHoops();
        }
    });
}

public HulaHoops() {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    String choices[] = {"Shoes","Comb","Ball"};
    JComboBox combo = new JComboBox(choices);
    combo.setBackground(Color.gray);
    combo.setForeground(Color.red);
    panel.add(combo);
    frame.add(panel);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300,100);
    frame.setVisible(true);

    combo.addItemListener(new ItemListener () {
        @Override
        public void itemStateChanged(ItemEvent e)
        {
            String item = (String)e.getItem();
            if (e.getStateChange () == ItemEvent.SELECTED)
            {
                System.out.println("You chose " +item);
                    if (item == "Shoes")
                    {
                        System.out.println("Enter quantity: ");
                        int bilang = inp.nextInt();
                        int total = bilang * 99;
                        String order = bilang + " " + "Shoes " + "     " + total;
                        System.out.print("" + order);
                    }

                    else if (item == "Comb")
                    {
                        System.out.println("Enter quantity: ");
                        int bilang = inp.nextInt();
                        int total1 = bilang * 99;
                        String order1 = bilang + " " + "Comb " + "     " + total1;
                        System.out.print("" + order1);
                    }

                    else if (item == "Ball")
                    {
                        System.out.println("Enter quantity: ");
                        int bilang = inp.nextInt();
                        int total2 = bilang * 99;
                        String order2 = bilang + " " + "Ball " + "     " + total2;
                        System.out.print("" + order2);
                    }
            }

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:09:58.817

问题是您正在阻止`EDT`呼叫`Scanner#nextInt`等待来自`System.in`您的输入`ItemListener`：

```
int bilang = inp.nextInt(); 
```

不要`Scanner`用于读取 Swing 应用程序中的用户输入。这只会阻止`EDT`直到控制台窗口中提供数据。有许多方法可以读取输入，例如使用`JOptionPane#showInputDialog`. 有关此选项的更多信息，请参阅[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)。

* * *

Aside from this, use `.equals` when comparing `String` content rather than the `==` operator. The latter compares `Object` references.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:11:21.860

The basic mistake that you are doing is comparing the two String objects using `==` operator.
You should use the following conditions instead:

```
if (item .equals("Shoes"))
if (item .equals("Comb"))
if (item .equals("Ball")) 
```

As a short demo of JOptionPane.. I am putting here the changed version of your code...I hope it will help you to understand how to handle such situation properly...

```
 //combo box, the program hangs I need to close the entire BlueJ. Please take a look what is wrong in my code
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class HulaHoops  {

private Scanner inp = new Scanner(System.in);

public static void main(String[]args) {
    EventQueue.invokeLater(new Runnable()
    {
        @Override
        public void run()
        {
            new HulaHoops();
        }
    });
}

public HulaHoops() {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    String choices[] = {"Shoes","Comb","Ball"};
    JComboBox combo = new JComboBox(choices);
    combo.setBackground(Color.gray);
    combo.setForeground(Color.red);
    panel.add(combo);
    frame.add(panel);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300,100);
    frame.setVisible(true);

    combo.addItemListener(new ItemListener () {
        @Override
        public void itemStateChanged(ItemEvent e)
        {
            String item = (String)e.getItem();
            if (e.getStateChange () == ItemEvent.SELECTED)
            {
                System.out.println("You chose " +item);
                    if (item.equals("Comb"))
                    {
            Object val = JOptionPane.showInputDialog("Please input quantity of comb"); 
            System.out.println(val);

                        Integer bilang= Integer.valueOf((String)val);
                        int total = bilang * 99;
                        String order = bilang + " " + "Shoes " + "     " + total;
                        System.out.print("" + order);
                    }

            }
    }
    });
    }
} 
```

# java - m2e Eclipse 插件未找到 GeoTools 依赖项

> ID：15253572
> 
> 赞同：0
> 
> 时间：2013-03-06T17:05:44.433
> 
> 标签：java, eclipse, maven, m2e, geotools

我需要在使用 Eclipse 和 m2e 插件开发的 JAVA 项目中使用 GeoTools。

我在 pom.xml 中配置了以下存储库：

```
<repository>
    <id>osgeo</id>
    <name>Open Source Geospatial Foundation Repository</name>
    <url>http://download.osgeo.org/webdav/geotools</url>
</repository> 
```

当我在 Dependencies->Add 对话框中搜索“gt-shapefile”时，我没有得到任何结果。可能还有另一个存储库吗？我注意到[http://download.osgeo.org/webdav/geotools/org/geotools](http://download.osgeo.org/webdav/geotools/org/geotools)下存在“gt-shapefile”库，但如果我将存储库的 URL 更改为它并没有什么不同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:33:28.440

如果这对将来的任何人有帮助：

使用用户界面方法无法找到依赖项，因此我尝试按照以下链接中的说明手动编辑 pom.xml 文件（请参见第 5 点），它成功了！

[http://docs.geotools.org/latest/userguide/tutorial/quickstart/eclipse.html#adding-jars-to-your-project](http://docs.geotools.org/latest/userguide/tutorial/quickstart/eclipse.html#adding-jars-to-your-project)

# wpf - 如何在 wpf 工具包中动态添加更多线系列到折线图中？

> ID：15253576
> 
> 赞同：2
> 
> 时间：2013-03-06T17:05:56.687
> 
> 标签：wpf, charts, wpftoolkit, linechart, lineseries

我正在尝试使用 wpf 工具包图表线，并且我需要在图表中有不止一条线，但我不知道该怎么做在 c# 中动态执行。在程序中，我不知道我需要多少图表以及每个图表中有多少行，这是我在 XAML 中无法做到的...

```
for (int j = 0; j < 4; j++) //its just so i cant check it
{
    ColumnDefinition cd = new ColumnDefinition();
    myGrid.ColumnDefinitions.Add(cd);

    Chart chart1 = new Chart();
    LineSeries lineChart = new LineSeries();
    chart1.Height = 200;
    chart1.Width = 300;
    chart1.Title = (j);

    //((LineSeries)chart1.Series[0]).ItemsSource = valueList;

    lineChart.DependentValuePath = "Value";
    lineChart.IndependentValuePath = "Key";
    lineChart.ItemsSource = valueList;
    lineChart.IsSelectionEnabled = true;
    chart1.Series.Add(lineChart);
   lineChart.ItemsSource = valueList1;
    chart1.Series.Add(lineChart); <---

    myGrid.Children.Add(chart1);
    Grid.SetColumn(chart1, (j));  
    Grid.SetRow(chart1, 0);

} 
```

我试过这个，但它不工作......

请帮忙！：（

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:27:45.900

XAML：

`<chartingToolkit:Chart Name="lineChart" />`

代码隐藏：

```
private void showChart(List<KeyValuePair<string, int>> valueList)
    {
        LineSeries lineSeries1 = new LineSeries();
        lineSeries1.Title = "Title";
        lineSeries1.DependentValuePath = "Value";
        lineSeries1.IndependentValuePath = "Key";
        lineSeries1.ItemsSource = valueList;
        lineChart.Series.Add(lineSeries1);
    } 
```

您可以将 valueList 定义为： `List<KeyValuePair<string, int>> valueList = new List<KeyValuePair<string, int>>();`

并将所需的值插入为`valueList.Insert(0, new KeyValuePair<string, int>(key, value));`

# vb.net - HTML 标记隔离

> ID：15253581
> 
> 赞同：0
> 
> 时间：2013-03-06T17:06:03.460
> 
> 标签：vb.net, html-agility-pack

使用 htmlagilitypack 如何隔离我正在搜索的标签。

该应用程序是通过某个网站的源代码进行解析，以找到具有要提取的文本的标签。如下图

```
 <div> this is the text i want to extract</div> 
```

我已经尝试过 RegEx 并使用了一些字符串操作，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:27:07.040

当您有一个好的判别式（您在评论中指出）时，例如一个 CLASS 属性，XPATH 是一种查询 HTML DOM 的简单方法，如下所示：

```
 Dim question As String = "what time is it"
   Dim web As New HtmlWeb
   Console.WriteLine(web.Load(("http://wiki.answers.com/Q/" & question)).DocumentNode.SelectSingleNode("//div[@class='answer_text']").InnerText.Trim) 
```

# java - HSQL 数据库中的日期在 fastTime 字段中返回负值

> ID：15253582
> 
> 赞同：0
> 
> 时间：2013-03-06T17:06:04.660
> 
> 标签：java, date, jdbc, hsqldb

我从我的 HSQL 数据库中提取日期，它们显示正确，但在内部它们似乎是错误的。大多数日期都是默认值，其值为 1970-01-01。在调试时，我可以看到一个名为“fastTime”的字段，它说它是-3.600.000，正好是它应该是前一分钟......

当我现在将这些日期与 fastTime 为 0 的一些生成值混合时，比较错误并且选择了错误的日期。

这非常烦人，因为现在仅在从 DB 中提取值时添加该值，但切换到另一个 DBMS 将需要恢复此更改。

所以..这只是一个错误还是发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:28:02.183

如果日期显示正确，那么它们对于您的时区是正确的。

如果 fastTime 指示您报告的值，则表示您的时区是 GMT+1 小时。如果 fastTime 为 0，则日期将表示 GMT 的午夜，而不是您的时区。

当您在 Java 中对属于不同区域的日期进行比较时，您需要考虑时区。您可以为此目的使用 Java 日历对象。

# c++ - 画线c ++中的中点算法

> ID：15253583
> 
> 赞同：1
> 
> 时间：2013-03-06T17:06:07.467
> 
> 标签：c++, visual-studio-2010, algorithm, visual-c++, graphics

c++ win32 中的这个中点算法不起作用。它什么也不画或只画水平线。我犯了什么错误？

```
void midPoint(HDC hdc)
{

    double dx = end.getXPoint()-start.getXPoint();
    double dy = end.getYPoint()-start.getYPoint();

    double x = start.getXPoint();
    double y = start.getYPoint();
    SetPixel(hdc,x,y,color);

    double d = dx - (dy/2);
    double d1 = dx;
    double d2 = abs(dx-dy);

    while(x < end.getXPoint())
    {
    d = abs(((( y+0.5)-start.getYPoint())*dx) - (((x+1)-start.getXPoint())*dy));

    if(d < 0)
    {
        x = x+1;
        y = y+1;
    }
    else
    {
        x = x+1;
    }
    SetPixel(hdc,x,y,color);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:12:06.313

你的 d 永远不会<0。修改 d 的公式，尤其是 ( 和 )。

```
d = abs(((( y+0.5)-start.getYPoint())*dx) - (((x+1)-start.getXPoint())*dy));

    if(d < 0)
    {
        x = x+1;
        y = y+1;   // never executed
    }
    else
    {
        x = x+1;   // horizontal line
    }
    SetPixel(hdc,x,y,color); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:38:43.410

当您在计算 d 时采用 abs 值时，它永远不会小于 0。所以 X 的值单独增加，而您得到的是水平线。

# c - #define 和声明有什么区别

> ID：15253584
> 
> 赞同：4
> 
> 时间：2013-03-06T17:06:08.683
> 
> 标签：c

```
#include <stdio.h>
#include <math.h>

// #define LIMIT 600851475143
int isP(long i);
void run();
// 6857
int main()
{
    //int i = 6857;
    //printf("%d\n", isP(i));
     run();
}

void run()
{
long LIMIT = 600851475143;
// 3, 5
// under 1000

long i, largest =1, temp=0;
for(i=3; i<=775147; i+=2)
{
    temp = ((LIMIT/i)*i);
if(LIMIT == temp)
    if(isP(i)==1)
            largest = i;
}
printf("%d\n",largest);
}

int isP(long i)
{
long j;
for(j=3; j<= i/2; j+=2)
    if(i == (i/j)*j)
        return 0;

return 1;

} 
```

我刚刚遇到了一个有趣的问题。如上所示，这段代码旨在计算 LIMIT 的最大素数。上面显示的程序给我的答案是 29，这是不正确的。

虽然奇迹般地，当我定义 LIMIT 值（而不是将其声明为 long）时，它可以给我正确的值：6857。

有人可以帮我找出原因吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:11:28.207

许多平台上的A`long`是一个 4 字节整数，并且会在`2,147,483,647`. 例如，请参阅[Visual C++ 的数据类型范围](http://msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.80%29.aspx)页面。

当您使用 a`#define`时，编译器可以自由选择一个更合适的类型，它可以容纳您的非常大的数字。这可以使其行为正确，并为您提供您期望的答案。

但是，总的来说，我建议明确说明数据类型，并尽可能选择能够正确表示数字而不需要编译器和平台特定行为的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:09:49.523

我会怀疑这里有数字类型问题。

`#define`是一个预处理器指令，因此它会`LIMIT`在运行编译器之前替换为代码中的那个数字。这为编译器打开了大门，可以按照它想要的方式解释该数字，这可能不是`long`.

在您的情况下，`long`可能还不够大，因此编译器在您使用`#define`. 为了获得一致的行为，您应该指定一个您知道具有适当范围的类型，而不是依赖编译器来正确猜测。

您还应该在编译器上打开完整警告，它可能能够为您检测到此类问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:24:39.373

当您输入如下表达式时：

```
(600851475143 + 1) 
```

一切都很好，因为编译器会自动将这两个常量提升为`long long`足够大以执行计算的适当类型（如您的情况）。你可以用这种方式做尽可能多的表达式。但是当你写：

```
long n = 600851475143; 
```

编译器尝试将 a `long long`（或任何常量隐式转换为）分配给 a `long`，这会在您的情况下导致问题。你的编译器应该警告你，例如 gcc 说：

```
warning: overflow in implicit constant conversion [-Woverflow] 
```

当然，如果 a`long`大到足以容纳该值，则没有问题，因为常量将是大小相同`long`或更小的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:10:42.160

可能是因为`600851475143`大于`LONG_MAX`（根据[this](http://msdn.microsoft.com/en-us/library/7fh3a000%28v=vs.80%29.aspx) 2147483647 ）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T17:14:37.760

尝试用“long long”替换限制类型。它的立场，它环绕（尝试打印限制为长）。预处理器知道这一点并使用正确的类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T17:26:52.457

您的代码基本上减少了这两种可能性：

```
long LIMIT = 600851475143;
x = LIMIT / i; 
```

对比

```
#define LIMIT 600851475143
x = LIMIT / i; 
```

第一个等效于将常量转换为`long`：

```
x = (long)600851475143 / i; 
```

而第二个将被预编译成：

```
x = 600851475143 / i; 
```

区别就在这里：`600851475143`对于你的编译器类型来说太大了，`long`所以如果它被转换成`long`它就会溢出并发疯。但如果直接在除法中使用，编译器知道它不适合 a `long`，自动将其解释为`long long`文字，`i`提升 the 并将除法作为 a 完成`long long`。

但是请注意，即使该算法在大多数情况下似乎都有效，但您仍然在其他地方发生溢出，因此代码不正确。您应该将任何可能包含这些大值的变量声明为`long long`.

# python - Python 扩展调试

> ID：15253586
> 
> 赞同：16
> 
> 时间：2013-03-06T17:06:23.990
> 
> 标签：python, gdb, debug-symbols, python-extensions

我正在尝试调试我用 C 编写的 python 扩展模块。我使用以下代码对其进行了编译：

```
python setup.py build -g install --user 
```

然后我调试：

```
gdb python
...
b py_node_make
run test.py 
```

它在 py_node_make （我定义的函数之一）处中断，但随后我尝试：

```
(gdb) print node
No symbol "node" in current context. 
```

我要调试的功能是：

```
static Python_node_t* py_node_make(
        node_t* node)
{
    Python_node_t* pyNode;

    pyNode = PyObject_New(Python_node_t, &t_node);
    pyNode->node = node;
    pyNode->borrowed = true;

    return pyNode;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T00:05:47.720

要进行源代码调试，您的 C 扩展必须使用调试信息 ( `gcc -g`) 构建。由于您正在使用 驱动编译过程`distutils`，因此您可以通过**CFLAGS**环境变量指定使用的编译器标志（[安装 Python 模块：调整编译器/链接器标志](http://docs.python.org/2/install/index.html#tweaking-compiler-linker-flags)）：

```
CFLAGS='-Wall -O0 -g' python setup.py build 
```

请注意，即使 distutils 默认使用比**-O0**更高的优化级别，只要传递了**-g**并且大多数 Python 构建默认传递**-g**，您就真的不应该在当前上下文中得到*No symbol "node"错误。*

 ***** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T18:02:15.887

问题是优化。我不确定如何从命令行执行此操作，但在 setup.py 脚本中，我刚刚添加`extra_compile_args=['-O0'],`到 Extension 构造函数中，一切正常。

仍然希望（并且会接受）一个涉及命令行 arg（之后的东西）的答案，`python setup.py build`它会完成同样的事情，所以我不必在 setup.py 文件中有编译器特定的行。****

# linq - 使用 linq to xml 构建时如何在 xml 文档中插入空行

> ID：15253587
> 
> 赞同：1
> 
> 时间：2013-03-06T17:06:29.577
> 
> 标签：linq, linq-to-xml

```
<root>
 <a>
    <b>aaaaa</b>
 </a> 

 <a>
    <b>aaaaa2</b>
 </a> 
```

如何在`<a>`没有任何技巧的情况下以正确的方式在标签之间获得一条自由线？

我已经尝试包括

```
XComment fakeBlankCommentLine = new XComment("");
XText fakeBlankTextLine = new XText("\r\n\n"); 
```

但它会导致`<a><b>aaaaa2</b></a>`并破坏可读性。我想保留结构，但要插入那个空行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:46:03.167

我认为唯一的方法是插入一些特殊的（或者只是空的，就像你做的那样）注释，然后将 xml 转换为字符串并用`NewLine`.

# scala - scala laziness - 如何在这个回文搜索中摆脱 return 语句？

> ID：15253591
> 
> 赞同：1
> 
> 时间：2013-03-06T17:06:45.120
> 
> 标签：scala

上下文：在大量文本中找到最长的回文。

这里有两种解决方案——一种是“返回”（完全脱离嵌套函数），另一种是糟糕的“纯”答案。我如何编写具有第一个性能的纯解决方案？

```
 def isPalindrome(str: String) : Boolean = str.reverse == str

  def longestPalindrome(haystack : String) : String = {
    (haystack.length to 1 by -1).foreach{ substrSize =>
      haystack.sliding(substrSize).foreach{ substr =>
        if(isPalindrome(substr))
          return substr
      }
    }
    ""
  }

  def longestPalindrome2(haystack : String) : String = {
    val x = for {
      substrSize <- haystack.length to 1 by -1
      substr <- haystack.sliding(substrSize)
    } yield (substr -> isPalindrome(substr))
    x.find(_._2 == true).map(_._1).getOrElse("")
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:34:01.880

您的问题似乎是如何在不使用`return`. 一种方法是创建一个非严格`view`的`Range`. 这是一个例子，

```
def palindromeStream(haystack : String) = {
  for {
    substrSize <- (haystack.length to 1 by -1).view
    substr <- haystack.sliding(substrSize)
    if isPalindrome(substr)
  } yield substr
}

val x = palindromeStream("a canal") // Palindromes not yet computed
x.headOption                        // Compute the first one: Some(ana)
x.toSet                             // Compute the rest: Set(n, ana, a, " ", l, c) 
```

你也可以考虑`Range.toStream`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:23:03.620

您可以稍微提高第二种方法的性能：

```
def longestPalindrome3(haystack: String): String =
    (for {
      substrSize <- haystack.length to 1 by -1
      substr <- haystack.sliding(substrSize)
      if (isPalindrome(substr))
    } yield substr).headOption.getOrElse("") 
```

# python - iPython 启动时抛出错误：“找不到 ipythonrc”

> ID：15253592
> 
> 赞同：1
> 
> 时间：2013-03-06T17:06:51.383
> 
> 标签：python, macos, ipython

启动 iPython 时出现一个奇怪的错误。我在跑雪豹

```
WARNING: Configuration file ipythonrc not found. Ignoring request.
------------------------------------------------------------
Traceback (most recent call last):
  File "/Library/Python/2.6/site-packages/IPython/ConfigLoader.py", line 66, in load
    fname = filefind(fname,incpath)
  File "/Library/Python/2.6/site-packages/IPython/genutils.py", line 555, in filefind
    ' not found in current or supplied directories:' + `alt_dirs`
IOError: File'ipythonrc' not found in current or supplied directories:u'/Users/admin_mcadminson/.ipython'

WARNING: Problems loading configuration file 'ipythonrc'
Starting with default -bare bones- configuration. 
```

这是以下错误消息：

```
ImportError                               Traceback (most recent call last)

/Library/Python/2.6/site-packages/IPython/ipmaker.pyc in force_import(modname, force_reload)
     61         reload(sys.modules[modname])
     62     else:
---> 63         __import__(modname)
     64         
     65 

ImportError: No module named ipy_user_conf
WARNING: /Users/admin_mcadminson/.ipython/ipy_user_conf.py does not exist, please run %upgrade!
WARNING: Loading of ipy_user_conf failed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:03:54.660

您的 IPython 版本似乎已过时，因为 IPython 不再使用`ipythonrc`文件进行配置。你可能应该[升级它](http://ipython.org/install.html)。

不过，在你这样做之前，你可能应该考虑将你的[python 安装](http://www.python.org/download/)升级到 2.7，因为你使用的是 2.6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T07:50:16.347

找不到文件路径，因此您可以手动创建带有路径的文件以`/Users/admin_mcadminson/.ipython/ipythonrc`绕过检查。不过，我也建议将 ipython 更新为长期解决方案。

# java - java中的Bdb存储列表

> ID：15253594
> 
> 赞同：0
> 
> 时间：2013-03-06T17:06:55.800
> 
> 标签：java, list, berkeley-db-je

我有一个列表对象，它使我的程序因内存不足错误而崩溃。我想将列表转换为 BDB StoredList。但我得到了例外`java.lang.IllegalArgumentException`。

RecordNumberBinding 需要`DB_BTREE/DB_RECNUM, DB_RECNO, or DB_QUEUE`. 有什么办法可以将我的列表缓存到磁盘上，这样它就不会让我的程序崩溃。任何指针都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:35:53.670

在 .Net 中，我使用了基于磁盘的数据结构。尝试为 java 调查此主题。

# java - 是否可以通过命令行修改 eclipse 工作区？

> ID：15253595
> 
> 赞同：8
> 
> 时间：2013-03-06T17:06:56.503
> 
> 标签：java, eclipse, eclipse-plugin

是否可以访问/操作`eclipse workspace`via `command-line`？
我主要是询问工作区元数据而不是文件本身。

例如，做类似的事情

*   修改资源属性（例如设置一些资源为派生）
*   导入现有项目
*   访问标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:03:48.033

我知道没有命令行（无头）工具可以执行这些类型的任务。有[一些 Eclipse 脚本项目可以](http://wiki.eclipse.org/E4/Scripting)为使用 Eclipse API 提供轻量级、可编写脚本的接口，但是，它们都没有可用的命令行，我相信所有这些脚本工具都是基于 UI 的。

另一种选择是使用 Eclipse SDK 构建一个[Eclipse 应用程序](http://wiki.eclipse.org/FAQ_What_is_an_Eclipse_application%3F)（无头应用程序），该应用程序使用[Eclipse 应用程序模型](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/guide/runtime_app_model.htm?resultof=%22org.eclipse.core.runtime.applications%22%20)来执行您想要的命令，但您必须自己编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:27:49.617

以下是 Eclipse 命令行选项列表：[http ://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fruntime-options.html)

似乎没有一个允许设置工作区，但......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T07:32:13.177

Eclipse 不是为在命令行上使用而设计的。如果您想使用命令行，我强烈建议您在项目中使用 Apache Maven 或 Apache Ivy 等构建管理器。优点是您的构建不依赖于 Eclipse，您可以根据需要切换 IDE，并且可以构建项目并在命令行上编辑依赖项。您的项目及其构建/部署应该独立于特定的 IDE。

# java - 无论如何要让 XOM 允许非绝对命名空间？

> ID：15253596
> 
> 赞同：0
> 
> 时间：2013-03-06T17:07:00.417
> 
> 标签：java, xml, sharepoint, xom

我有一些来自 Microsoft sharepoint 站点的 XML。开场白是：

```
<xml xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882'
 xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-00AA00C14882'
 xmlns:rs='urn:schemas-microsoft-com:rowset'
 xmlns:z='#RowsetSchema'> 
```

当我尝试使用 XOM 打开这个 .xml 文件来提取我想要的信息时，它会抱怨：

```
 nu.xom.ParsingException: Missing scheme in absolute URI reference 
```

我假设这是指#RowsetSchema 命名空间绑定，这似乎会导致问题。我试过添加

```
 xmlreader.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false);
  xmlreader.setFeature("http://apache.org/xml/features/validation/schema", false); 
```

到我传递给 XOM Builder 的 XMLReader，但它没有帮助。

有没有办法让 XOM 只加载 XML 并让我提取我想要的数据，还是我必须编写自己的 XML 解析器？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:39:01.927

我找到了[xom-lite](https://sourceforge.net/projects/xomlite/)，这是一个 Apache2 许可的 Java 库，它似乎复制了 XOM 的基本 XML 处理任务，而没有验证开销。这似乎可以解决问题！

如果您知道解决 XOM 本身问题的方法，那么仍然回答，我会接受。

# xcode - 如何将 Xcode 输出显示到 terminal.app

> ID：15253597
> 
> 赞同：1
> 
> 时间：2013-03-06T17:07:01.840
> 
> 标签：xcode, xcode4, xcode4.5

我在将 xcode 项目输出显示到我的 terminal.app 时遇到问题。我可以让终端在运行时弹出，但是如何让“输出”显示到终端应用程序中。

![在此处输入图像描述](../Images/257caf77dfc2b9ad1b04d5931c3c11d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:11:02.963

所有 NSLog 都会自动打印在 Terminal.app 的系统日志中。

> 如果您想直接在终端中查看结果，则需要将构建的产品作为终端的子项运行，这意味着使用 /path/debug/build/MyProgram.app/Contents/MacOS/MyProgram 之类的东西来启动应用程序。

[从这里](https://stackoverflow.com/questions/364564/how-to-get-the-output-of-an-os-x-application-on-the-console-or-to-a-file)。

* * *

编辑：

如果要将 NSLog 重定向到文件，请使用：

```
-(void) redirectNSLogToFile {
     NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     NSString *filePath=[paths objectAtIndex:0];
     NSString *logPath=[filePath stringByAppendingPathComponent:@"LogFile.txt"];
     freopen([logpath cStringUsingEncoding:NSASCIIStringEncoding],"a+",stderr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:58:15.213

当您在 Xcode 中运行您的应用程序时，所有输出都在“所有输出”窗格中。如果您只想保留它：选择它，复制它，然后将其粘贴到一个文件中（使用 TextEdit 或其他创建）。

默认情况下，在 Terminal.app 中运行您的应用程序不会保留输出。您可以使用 Unix 管道/重定向将其放入文件中，例如：

```
 $ /path/to/myapp > /path/to/LogFile.txt 
```

# php - PHP - 两个类，正确地相互交谈

> ID：15253601
> 
> 赞同：2
> 
> 时间：2013-03-06T17:07:13.213
> 
> 标签：php, class, global-variables

我有一个小问题。我试过搜索，但我无法完全正确地找到搜索词，希望有人能提供帮助。

我的系统中的每个页面都有一个包含，其工作方式如下：

```
<?PHP
require_once("class.system.php");
require_once("class.mysql.php");

$oMySQL = new MySQL();
$oSystem        = new SystemClass();

... ?> 
```

但我有一个问题。你可能猜到了——MySQL 类是我用来简化 MySQL 调用的一堆函数。这不是我想使用它的唯一例子，但它是一个很好的例子。

我在系统类中有函数，我希望能够引用 MySQL 类（反之亦然......）。

例如，我在系统类中有一个函数，它将使用来自 MySQL 的数据填充会话变量。我能想到的唯一方法（我知道这是错误的......）是：

```
class SystemClass {

    function PopulateSession(){
         global $oMySQL;
         if($oMySQL->Select('abc')){
             $_SESSION['def']= blahblahblah;
             return true;
         } else {
             return false;
         }
    }
} 
```

它有效，但这意味着我想使用它的每个功能，我必须使用全局，我敢肯定这是非常糟糕的做法。有人可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:08:56.833

你遇到的叫做组合。一个好的解决方案是使用[依赖注入](http://martinfowler.com/articles/injection.html)框架。一个简单的解决方案是使用构造函数参数滚动。

```
public class A { 
  private $b;
  public function __construct($b) {
    $this->b = $b;
  }
}

$b = new B;
$a = new A($b); 
```

或者，作为一种更灵活的解决方案，当您具有相互依赖关系时：

```
public class A {
  private $b;
  public function setB($b) {
    $this->b = $b;
  }
}

public class B {
  private $a;
  public function setA($a) {
    $this->a = $a;
  }
}

$a = new A;
$b = new B;
$a->setB($b);
$b->setA($a); 
```

但缺点是随着依赖项数量的增加，很难管理和记住设置所有依赖项。这正是依赖注入框架流行的原因。

# python - 使用 python 收集电子邮件

> ID：15253607
> 
> 赞同：-4
> 
> 时间：2013-03-06T17:07:29.957
> 
> 标签：python, regex, python-2.7

我开发并申请从文件类型中收获任何类型的电子邮件：ishani@dolly.lk ishani(at)dit.dolly.lk ishani at cs dot dolly dot edu

但问题是输出在列表中显示了一些额外的项目，而不是提取的完整电子邮件。我无法弄清楚为什么会这样。我尝试了各种方式。我认为我的正则表达式或逻辑有问题

这是我的代码

```
data=f.read()

    regexp_email = r'(([\w]+)@([\w]+)([.])([\w]+[\w.]+))|(([\w]+)(\(at\))([\w]+)([.])([\w]+[\w.]+))|(([\w]+)(\sat\s)([\w-]+)(\sdot\s)([\w]+(\sdot\s[\w]+)))'
    pattern = re.compile(regexp_email)
    emailAddresses = re.findall(pattern, data)

    print emailAddresses 
```

输出是这样的

```
[('ishani@sliit.lk', 'ishani', 'sliit', '.', 'lk', '', '', '', '', '', '', '', '', '', '', '', '', ''), ('', '', '', '', '', 'ishani(at)dit.sliit.lk', 'ishani', '(at)', 'dit', '.', 'sliit.lk', '', '', '', '', '', '', ''), ('', '', '', '', '', '', '', '', '', '', '', 'ishani at cs dot dolly dot edu', 'ishani', ' at ', 'cs', ' dot ', 'dolly dot edu', ' dot edu')] 
```

但我期待这样的输出

```
['ishani@dolly.lk','ishani(at)dit.dolly.lk','ishani at cs dot dolly dot edu'] 
```

有没有人尝试过支持我的问题的任何方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:14:31.443

将您更改`regexp_email`为：

```
r'[\w]+@[\w]+[.][\w]+[\w.]+|[\w]+\(at\)[\w]+[.][\w]+[\w.]+|[\w]+\sat\s[\w-]+\sdot\s[\w]+\sdot\s[\w]+' 
```

您似乎不需要捕获组，因此我已将其全部删除。

如果您只需要指定，您也不需要`[]`周围：`\w``\w`

```
r'\w+@\w+[.]\w+[\w.]+|\w+\(at\)\w+[.]\w+[\w.]+|\w+\sat\s[\w-]+\sdot\s\w+\sdot\s\w+' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T17:14:06.410

你可以跳过空白

```
print [e for ea in emailAddresses for e in ea if e] 
```

产生

```
['ishani@sliit.lk', 'ishani', 'sliit', '.', 'lk', 'ishani(at)dit.sliit.lk', 'ishani', '(at)', 'dit', '.', 'sliit.lk', 'ishani at cs dot dolly dot edu', 'ishani', ' at ', 'cs', ' dot ', 'dolly dot edu', ' dot edu'] 
```

这不*完全*是你要求的......

# scala - 中缀位置的Scala无类型宏

> ID：15253608
> 
> 赞同：5
> 
> 时间：2013-03-06T17:07:32.580
> 
> 标签：scala, macros, scala-macros

为了回答[这个问题](https://stackoverflow.com/questions/15249985/coding-style-ordering-of-expressions-in-blocks-in-scala)，我一直在尝试使用宏天堂分支在 Scala 中实现 Haskell 风格的“where”表达式。该代码可在[scala-where](https://github.com/nc6/scala-where)获得。我现在可以写如下内容：

```
val result = where ( f1(1) * f2(2), {
  def f1(x : Int) = x + 1
  def f2(x : Int) = x + 2
}) 
```

但是，我真正想做的是能够在中缀位置调用它：

```
val result = ( f1(1) * f2(2)) where {
  def f1(x : Int) = x + 1
  def f2(x : Int) = x + 2
} 
```

通常，这种事情很容易，但我看不出如何通过宏调用来做到这一点。表达式 (f1(1) * f2(2)) 不会在宏应用之前输入，所以像构建一个隐式值类这样的东西是行不通的。有没有办法获得这种语法？

如果做不到这一点，只有两个参数列表可以做到：

```
val result = where (f1(1) * f2(2)) {
  def f1(x : Int) = x + 1
  def f2(x : Int) = x + 2
} 
```

会很好，但这似乎很难。可以用两个参数列表调用一个宏吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T19:05:41.283

对于第一个选项：我认为您可以使隐式转换本身成为无类型宏，不是吗？

对于第二个选项：您可以调用具有多个参数列表的宏，是的。调用站点的多个列表将转换为定义站点的多个列表，例如：

```
def myMacro(a: _)(b: _) = macro myMacro_impl

def myMacro_impl(c: Context)(a: c.Tree)(b: c.Tree): c.Tree = { ... } 
```

将被称为：

```
myMacro(...)(...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:53:29.963

答：从 2013-03-08 起，无法在中缀位置使用无类型宏。[在scala-user 邮件列表中](https://groups.google.com/d/topic/scala-user/ge_-waot97Y/discussion)引用 Eugene Burmako ：

> 目前，必须先对左侧的参数进行类型检查，然后才能启动任何隐式解析。您可以编写“class foo(x: _)”这一事实是一个疏忽——下划线语法应该只在无类型的宏中有效。

作为参考，我最接近能够做到这一点的是：

```
implicit class HasWhere(val exp : _) {
 def where(block : Unit) = macro whereInfix
}

def whereInfix(c : Context)(block : c.Expr[Unit]) = {
  import c.universe._

  val exp = Select(c.prefix.tree, TermName("exp"))
  val Expr(Block((inner, _))) = block
  val newinner = inner :+ exp
  Block(newinner : _*)
} 
```

# c++ - 从文本文件中提取某些行的最有效方法

> ID：15253609
> 
> 赞同：0
> 
> 时间：2013-03-06T17:07:38.537
> 
> 标签：c++, ifstream

我有一个可变长度的日志文件，它可能包含也可能不包含我正在寻找的字符串。

行有时间戳等，后跟 < 参数 >#< 值 > 我想检查参数并提取值。

下面的实现有效，但我确信必须有一种更有效的方法来解析文件。

关键点：

*   大多数行将被忽略
*   大约有 1600 个日志文件，大小在 1 - 20 Mb 之间
*   即使每个文件的小幅收益也将是一个优势

注意。parse 函数调用 substring 然后将其转换为 int

任何想法都非常感谢

```
ifstream fileReader(logfile.c_str());
string lineIn;
if(fileReader.is_open())
{

while(fileReader.good())
{
    getline(fileReader,lineIn);

    if(lineIn.find("value1#") != string::npos)
    {
        parseValue1(lineIn);
    }
    else if(lineIn.find("value2#") != string::npos)
    {
        parseValue2(lineIn);
    }
    else if(lineIn.find("value3#") != string::npos)
    {
        parseValue3(lineIn);
    }   
}
}
fileReader.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:28:58.063

首先你做错了循环。你的代码应该是：

```
while( getline( fileReader,lineIn ) ) {
} 
```

二、线路：

```
if( fileReader.is_open() ) 
```

和

```
fileReader.close(); 
```

是多余的。至于速度。我建议使用正则表达式：

```
std::regex reg ( "(value1#)|(value#2)|(value#3)(\\d+)" );
while( getline( fileReader,lineIn ) ) {
    std::smatch m;
    if( std::regex_search( lineIn.begin(), lineIn.end(), m, reg ) ) {
        std::cout << "found: " << m[4] << std::endl;
    } 
} 
```

当然，您需要相应地修改正则表达式。

不幸的是，众所周知，iostream 非常慢。如果您无法获得足够的性能，您可以考虑将 fstream 替换为 FILE * 或 mmap。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:22:06.603

您的执行瓶颈将在文件 I/O 中。
我建议您一次提取尽可能多的数据到缓冲区中。接下来，在缓冲区中搜索您的令牌。

您必须阅读文本才能搜索它，因此您最好尽可能多地阅读文件。

将太多数据读入内存可能会有一些缺点。如果操作系统无法容纳所有数据，它可能会将其分页到硬盘驱动器，这使得该技术毫无价值（除非您希望操作系统处理以块的形式读取文件）。

一旦文件在内存中，搜索技术的性能提升可能可以忽略不计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:19:32.293

看起来在同一个字符串中有很多重复的搜索，效率不会很高。

以正确的方式解析文件/行。

Boost 中有三个库可能会有所帮助。

使用正则表达式解析该行：http: [//www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/index.html)

使用标记器 [http://www.boost.org/doc/libs/1_53_0/libs/tokenizer/index.html](http://www.boost.org/doc/libs/1_53_0/libs/tokenizer/index.html)

对于完全自定义，您始终可以使用 Spirit。 [http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/index.html](http://www.boost.org/doc/libs/1_53_0/libs/spirit/doc/html/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T17:20:50.080

第一步是弄清楚在输入文件中花费了多少时间`if(lineIn.find(...)...`以及实际读取输入文件的时间有多少。

应用程序运行的时间（您可能希望选择一些日志文件，而不是全部）。您可能希望连续运行几次以查看您获得相同（大约）的值。

添加：

```
#if 0
if (lineIn.find(...) ...) 
...
#endif 
```

并比较所需的时间。我的猜测是它实际上不会有太大的不同。但是，如果搜索是时间的主要组成部分，您可能会发现使用更聪明的搜索方法是有益的。有一些非常聪明的方法可以在较大的字符串中搜索字符串。

我将发布一些我在其他地方发布的“更快地读取文件”的基准。但请记住，您正在读取的硬盘将是主要的时间量。

参考：

[读取文件时获取行与读取整个文件然后根据换行符拆分](https://stackoverflow.com/questions/14463244/getline-while-reading-a-file-vs-reading-whole-file-and-then-splitting-based-on-n)

稍微不那么相关，但也许很有趣：

[在c ++中从文本文件中读取数百万行分隔的整数的最佳有效方法是什么](https://stackoverflow.com/questions/15115943/what-is-the-best-efficient-way-to-read-millions-of-integers-separated-by-lines-f)

# sql - 反透视税收数据

> ID：15253619
> 
> 赞同：1
> 
> 时间：2013-03-06T17:07:54.803
> 
> 标签：sql, sql-server, sql-server-2005, ssis, unpivot

我有这种形式的数据：

```
department_id | VAT_id | Tax_amount | Net_amount | Gross_amount | Date     | Invoice_no
      1       |    3   |   10       |   90       |  100         | 20130101 |   A5
      1       |    8   |   5        |   35       |  40          | 20130101 |   A5
      3       |    3   |   5        |   45       |  50          | 20130101 |   A8 
```

我想把它变成：

```
Department_id | Vat_id | Amount | Date     | Invoice_No
1             |  3     |  10    | 20130101 |    A5
1             |  0     |  90    | 20130101 |    A5
1             | -1     |  100   | 20130101 |    A5
1             |  8     |  5     | 20130101 |    A5
1             |  0     |  35    | 20130101 |    A5
1             | -1     |  40    | 20130101 |    A5
3             |  3     |  5     | 20130101 |    A8
3             |  0     |  45    | 20130101 |    A8
3             | -1     |  50    | 20130101 |    A8 
```

`Vat_id`值 0 表示净额

`Vat_id`值 -1 表示总金额。

我怎样才能垂直化这些数据，以便我可以继续前进？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:13:12.057

您可以使用该[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能来执行此操作：

```
select department_id,
  case 
    when col = 'net_amount' then 0
    when col = 'Gross_amount' then -1
    else vat_id end vat_od,
  amount, 
  invoice_no
from yourtable
unpivot
(
  amount
  for col in ([Tax_amount], [Net_amount], [Gross_amount])
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/3605b/3)。

如果您无权访问 unpivot 函数，则可以使用`UNION ALL`查询。

```
select department_id,
  case 
    when col = 'net_amount' then 0
    when col = 'Gross_amount' then -1
    else vat_id end vat_od,
  amount, 
  invoice_no
from
(
  select department_id, vat_id, 
    'tax_amount' col, tax_amount amount, invoice_no
  from yourtable
  union all
  select department_id, vat_id, 
    'Net_amount' col, Net_amount amount, invoice_no
  from yourtable
  union all
  select department_id, vat_id, 
    'Gross_amount' col, Gross_amount amount, invoice_no
  from yourtable
) src 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3605b/7)

两个查询都将返回：

```
| DEPARTMENT_ID | VAT_OD | AMOUNT | INVOICE_NO |
------------------------------------------------
|             1 |      3 |     10 |         A5 |
|             1 |      0 |     90 |         A5 |
|             1 |     -1 |    100 |         A5 |
|             1 |      8 |      5 |         A5 |
|             1 |      0 |     35 |         A5 |
|             1 |     -1 |     40 |         A5 |
|             3 |      3 |      5 |         A8 |
|             3 |      0 |     45 |         A8 |
|             3 |     -1 |     50 |         A8 | 
```

# sugarcrm - 为什么将模块上传到 Sugarcrm 后出现空白屏幕

> ID：15253621
> 
> 赞同：0
> 
> 时间：2013-03-06T17:07:58.293
> 
> 标签：sugarcrm

通过管理面板上传模块后，我最终看到一个空白屏幕，上传目录中有 zip 文件，但没有解压缩或安装。

我在任何日志文件中都看不到任何内容。

想法可能有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:20:49.770

在文件 ModuleInstall/PackageManager/PackageManager.php 上的这一行 require_once($target_manifest) 发生在我身上

我要解决的问题是 require_once 不适用于使用 upload://XXXXXXXXXXXXXX 的 $tager_manifest

作为解决方法，我将其修改为清单文件的路径

# django - 2个应用程序和用户模型之间的外键关系

> ID：15253624
> 
> 赞同：0
> 
> 时间：2013-03-06T17:08:03.257
> 
> 标签：django, django-models, foreign-keys

我有一个应用程序，其中模型扩展了用户模式。

```
class ExtendedUser (models.Model):
    user = models.ForeignKey(User)
    favorite_color = models.CharField(...
    #... 
```

我有另一个应用程序，它也具有用户模型的外键。

我想知道如何访问与特定用户相关的所有信息？

当我尝试建立反向关系（我认为）时，我的问题就出现了，这是我尝试的：

```
>>from django.contrib.auth.models import User
>>from firstapp.models import ExtendedUser

>>a = User.objects.get(pk=1)
>>a
<User: username1>
>>b = a.favorite_color
AttributeError: 'User' object has no attribute 'favorite_color'
>>c = ExtendedUser.objects.get(pk=1)
>>c
<User: username1>
>>c.favorite_color
<Favorite_color: blue> 
```

问题是当我在“a”上时，我无法访问用户的扩展模型信息，例如“favorite_color”，而当我在“c”上时，我无法访问用户模型本机信息，例如电子邮件或 perms。有没有办法做到这一点？

并且，

有没有一种方法可以让我选择一个用户 ID 并查看与该对象相关的所有字段（来自所有模型和应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:20:35.120

但这根本不是“扩展用户模型”。您通过 ForeignKey 引用了一个完全不同的模型。我不知道您为什么会期望`favorite_color`突然成为 User 模型上的一个属性。

使用`OneToOneField`. 然后可以直接按照关系：

```
user = User.objects.get(pk=1)
print user.extendeduser.favorite_color 
```

# c# - 当名称有括号和圆括号时反序列化 JSON

> ID：15253633
> 
> 赞同：0
> 
> 时间：2013-03-06T17:08:25.123
> 
> 标签：c#, json

我正在使用来自第三方的 JSON，如下所示：

```
 {"id":"1","[question(21), option(\"10033-other\")]":"","[question(22)]":"electric"} 
```

我了解当键名是简单字符串时如何获取值。但是当键名不是基本字符串时，我无法弄清楚如何获取这些值。我将如何反序列化 [question(21)] 和 [question(22)] 值？

我的代码如下。

课程：

```
public class MyFeed
{
    public string id { get; set; }
}

public class MyFeedClass
{
    public List<MyFeed> data { get; set; }
} 
```

程序.cs

```
 static void Main(string[] args)
    {
        string webReq = String.Empty;
        webReq += "https://restapi.surveygizmo.com/head/survey/zzzzzzzzz";
        webReq += "/surveyresponse/";
        webReq += "?user:pass=xxxxxx:yyyyyyyyy";
        HttpWebRequest request = WebRequest.Create(webReq) as HttpWebRequest;
        var myString = String.Empty;
        using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {
            StreamReader reader = new StreamReader(response.GetResponseStream());
            myString += reader.ReadToEnd();
        }        

        MyFeedClass myFeedClass = 
            new JavaScriptSerializer().
            Deserialize<MyFeedClass>(myString);

        Console.Title = "Bentley - Survey Data Loader";
        Console.WriteLine("");
        foreach (var item in myFeedClass.data)
        {
            Console.WriteLine("id: {0}", item.id);
        }
        Console.WriteLine("");
        Console.WriteLine("Press enter to exit...");
        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:18:21.003

你的 JSON 和你的类看起来不匹配——也就是说，通过一些调整，你可以得到*一些*反序列化的东西：

如果我们像这样包装您发布的 JSON：

```
string data =  @"{""data"":{""id"":""1"",""[question(21), option(\""10033-other\"")]"":"""",""[question(22)]"":""electric""}}"; 
```

（或未损坏的形式）

```
{"data":{"id":"1","[question(21), option(\"10033-other\")]":"","[question(22)]":"electric"}} 
```

并重新定义了 feed 类：

```
public class MyFeedClass
{
    public Dictionary<string,string> data { get; set; }
}

new JavaScriptSerializer().Deserialize<MyFeedClass>(data) 
```

产生一个`Dictionary<string,string>`内容：

```
{id, 1 }
{[question(21), option("10033-other")], }
{[question(22)], electric } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-30T08:46:03.790

这是我用来解决此问题的代码片段：

```
public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            var value = (Data)existingValue;
            if (value == null)
            {
                value = new Data();
                value.SurveyQuestions = new List<SurveyQuestion>();
                value.SurveyUrls = new List<SurveyUrl>();
                value.SurveyGeoDatas = new List<SurveyGeoData>();
                value.SurveyVariables = new List<SurveyVariable>();
                value.SurveyVariableShowns = new List<SurveyVariableShown>();
                value.SurveyQuestionHiddens = new List<SurveyQuestionHidden>();
                value.SurveyQuestionOptions = new List<SurveyQuestionOption>();
                value.SurveyQuestionMulties = new List<SurveyQuestionMulti>();
            }

            // Skip opening {
            reader.Read();

            while (reader.TokenType == JsonToken.PropertyName)
            {
                var name = reader.Value.ToString();
                reader.Read();

                // Here is where you do your magic
                string input = name;

                //[question(1)]
                //[question(11)]
                //[question(111)]
                //[question(1234)]
                //[question(12345)]
                //[url(12345)]
                //[variable(12345)]
                //SINGLE ANSWER
                Match matchSingleAnswer = Regex.Match(input, @"\[(question|calc|comment)\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\)]",
                    RegexOptions.IgnoreCase);

                //SINGLE VARIABLE
                Match matchSingleVariable = Regex.Match(input, @"\[(variable)\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\)]",
                    RegexOptions.IgnoreCase);

                //URL
                Match matchUrl = Regex.Match(input, @"\[url",
                    RegexOptions.IgnoreCase);

                //GEO DATA
                Match matchGeo = Regex.Match(input, @"\[variable\(""STANDARD_",
                    RegexOptions.IgnoreCase);

                //VARIABLES SHOWN
                Match matchVariables = Regex.Match(input, @"\[variable",
                    RegexOptions.IgnoreCase);

                //[question(1), option(\"1
                //[question(11), option(\"2
                //[question(111), option(\"1
                //[question(1234), option(\"1
                //[question(12345), option(\"1
                ////////////////////////////////////////////
                ////////The \ values are being removed.
                ////////////////////////////////////////////
                //OPTIONAL ANSWERS
                string myReg = @"\[(question|url|variable|calc|comment)\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\),\ option\(""[0-9]";
                Match matchOption = Regex.Match(input, myReg,
                    RegexOptions.IgnoreCase);

                //[question(1), option(1
                //[question(11), option(2
                //[question(111), option(1
                //[question(1234), option(1
                //[question(12345), option(1
                //MULTIPLE CHOICE
                Match matchMultiSelect = Regex.Match(input, @"\[question\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\),\ option\([0-9]",
                    RegexOptions.IgnoreCase);

                //[question(1), option(0)
                //[question(11), option(0)
                //[question(111), option(0)
                //[question(1234), option(0)
                //[question(12345), option(0)
                //HIDDEN
                Match matchHiddenValue = Regex.Match(input, @"\[question\(([0-9]{5}|[0-9]{4}|[0-9]{3}|[0-9]{2}|[0-9]{1})\),\ option\(0\)",
                    RegexOptions.IgnoreCase);

                if (matchSingleAnswer.Success)
                {
                    int index = int.Parse(name.Substring(10, name.IndexOf(')') - 10));
                    SurveyQuestion sq = new SurveyQuestion();
                    sq.QuestionID = index;
                    sq.QuestionResponse = serializer.Deserialize<string>(reader);
                    value.SurveyQuestions.Add(sq);
                }
                else if (matchUrl.Success)
                {
                    string urlName = name.Substring(6, name.Length - 9);
                    SurveyUrl su = new SurveyUrl();
                    su.Name = urlName;
                    su.Value = serializer.Deserialize<string>(reader);
                    value.SurveyUrls.Add(su);
                }
                else if (matchGeo.Success)
                {
                    string geoName = name.Substring(11, name.Length - 14);
                    SurveyGeoData sgd = new SurveyGeoData();
                    sgd.Name = geoName;
                    sgd.Value = serializer.Deserialize<string>(reader);
                    value.SurveyGeoDatas.Add(sgd);
                }
                else if (matchSingleVariable.Success)
                {
                    int index = int.Parse(name.Substring(10, name.IndexOf(')') - 10));
                    SurveyVariable sv = new SurveyVariable();
                    sv.SurveyVariableID = index;
                    sv.Value = serializer.Deserialize<string>(reader);
                    value.SurveyVariables.Add(sv);
                }
                else if (matchVariables.Success)
                {
                    string varName = name.Substring(11, name.Length - 14);
                    SurveyVariableShown svs = new SurveyVariableShown();
                    svs.Name = varName;
                    svs.Value = serializer.Deserialize<string>(reader);
                    value.SurveyVariableShowns.Add(svs);
                }
                else if (matchHiddenValue.Success)
                {
                    int index = int.Parse(name.Substring(10, name.IndexOf(')') - 10));
                    SurveyQuestionHidden sqh = new SurveyQuestionHidden();
                    sqh.QuestionID = index;
                    sqh.QuestionResponse = serializer.Deserialize<string>(reader);
                    value.SurveyQuestionHiddens.Add(sqh);
                }
                else if (matchMultiSelect.Success)
                {
                    //Multiple choice question selections
                    string[] nameArray = name.Split(')');
                    string questionPart = nameArray[0];
                    string optionPart = nameArray[1];
                    int index = int.Parse(questionPart.Substring(10, questionPart.Length - 10));
                    int indexSub = int.Parse(optionPart.Substring(9, optionPart.Length - 9));

                    SurveyQuestionMulti sqm = new SurveyQuestionMulti();
                    sqm.OptionID = indexSub;
                    sqm.QuestionID = index;
                    sqm.QuestionResponse = serializer.Deserialize<string>(reader);
                    value.SurveyQuestionMulties.Add(sqm);

                    //NEED TO ADD A BASE QUESTION TO POINT TO ALL THE MULTI
                    //SurveyQuestion sq = new SurveyQuestion();
                    //sq.QuestionID = sqm.QuestionID;
                    //sq.QuestionResponse = "";
                    //value.SurveyQuestions.Add(sq);
                }
                else if (matchOption.Success)
                {
                    //Optional text value for a given question
                    string[] nameArray = name.Split(')');
                    string questionPart = nameArray[0];
                    string optionPart = nameArray[1];
                    int index = int.Parse(questionPart.Substring(10, questionPart.Length - 10));
                    int indexSub = int.Parse(optionPart.Substring(10, 5));

                    SurveyQuestionOption sqo = new SurveyQuestionOption();
                    sqo.OptionID = indexSub;
                    sqo.QuestionID = index;
                    sqo.QuestionResponse = serializer.Deserialize<string>(reader);
                    value.SurveyQuestionOptions.Add(sqo);
                }
                else
                {
                    var property = typeof(Data).GetProperty(name);
                    if (property != null)
                        property.SetValue(value, serializer.Deserialize(reader, property.PropertyType), null);
                }

                // Skip the , or } if we are at the end
                reader.Read();
            }

            return value;
        } 
```

# php - 使用 HTML 表单和 PHP 查询上一个 SQL 查询的结果

> ID：15253635
> 
> 赞同：0
> 
> 时间：2013-03-06T17:08:32.317
> 
> 标签：php, sql, oracle, dynamic-sql

我一直在绞尽脑汁想弄清楚如何让它发挥作用。现在，我将在这里更好地解释它。

我想要做的是，当用户在表单中输入内容时，它会返回查询结果，然后使用该查询的结果**，**对它们执行*另一个*查询。我正在使用 PHP 和 oracle 数据库。

例如：目前我有一个充满食谱及其成分的数据库；我有一个用户可以输入成分的表格。在这个例子中，它是培根。

![在此处输入图像描述](../Images/c22ade6e86a53c6208113ff380f699d0.png)

这工作得很好。但是，我难以实现的是当用户输入*另一种*成分时，当前表的结果在那里并进一步查询。假设我输入“奶酪”，所有包含培根**和**奶酪的食谱都会被查询和显示。

这个过程很容易在简单的 SQL 中实现，但是就像我看到的那样，我很难将它转移到使用表单。

现在，我知道解决方案是与临时表、动态 sql 或两者的组合有关。

预先感谢您对此事的任何帮助。

我的代码如下：

```
<?php
if(isset($_POST['submit'])) 
{ 
    $name = $_POST['name'];
}

function do_fetch($myeid, $s)
{
  print '<table border="1">';
  while ($row = oci_fetch_array($s, OCI_RETURN_NULLS+OCI_ASSOC)) {
    print '<tr>';
    foreach ($row as $item) {
      print '<td>'.($item?htmlentities($item):'&nbsp;').'</td>';
    }
    print '</tr>';
  }
  print '</table>';
  print '<br>';
}

// Create connection to Oracle
$c = oci_connect("system", "luigi98", "localhost/XE");

// Use bind variable
$query = "SELECT DISTINCT r.recipeTitle AS recipe
FROM RECIPES.recipe r
WHERE recipeID IN(
    SELECT r.recipeID
    FROM recipes.recipeIng il
    INNER JOIN RECIPES.ingredient i ON il.ingredientID = i.ingredientID 
    WHERE il.recipeID = r.recipeID
      AND i.ING = :eidbv)";
$s = oci_parse($c, $query);

$myeid = $name;
oci_bind_by_name($s, ":EIDBV", $myeid);
oci_execute($s);
do_fetch($myeid, $s);

// Close the Oracle connection
oci_close($c);

?>
<p>Enter ingredient</p>
<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
   <input type="text" name="name"><br>
   <input type="submit" name="submit" value="Search"><br>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:17:58.487

有几种方法可以做到这一点。

最简单的方法可能是再次在搜索框中显示您的原始成分，并指示用户添加更多（以空格、逗号等分隔）成分（如果他们愿意）。

然后，您可以在这些字符上展开搜索词，并为每种成分添加条件。

# servicestack - ServiceStack 的“新 API”中的 PostFileWithRequest 等价物是什么？

> ID：15253640
> 
> 赞同：1
> 
> 时间：2013-03-06T17:09:05.910
> 
> 标签：servicestack

我想在 multipart-formdata 文件内容旁边发布一些请求值。在旧 API 中，您可以使用 PostFileWithRequest：

```
[Test]
public void Can_POST_upload_file_using_ServiceClient_with_request()
{
    IServiceClient client = new JsonServiceClient(ListeningOn);
    var uploadFile = new FileInfo("~/TestExistingDir/upload.html".MapProjectPath());
    var request = new FileUpload{CustomerId = 123, CustomerName = "Foo"};

    var response = client.PostFileWithRequest<FileUploadResponse>(ListeningOn + "/fileuploads", uploadFile, request);

    var expectedContents = new StreamReader(uploadFile.OpenRead()).ReadToEnd();

    Assert.That(response.FileName, Is.EqualTo(uploadFile.Name));
    Assert.That(response.ContentLength, Is.EqualTo(uploadFile.Length));
    Assert.That(response.Contents, Is.EqualTo(expectedContents));
    Assert.That(response.CustomerName, Is.EqualTo("Foo"));
    Assert.That(response.CustomerId, Is.EqualTo(123));
} 
```

我在新 API 中找不到任何此类方法，也找不到 client.Post() 上的任何覆盖，这表明这仍然是可能的。有谁知道这是否是一个被丢弃的功能？

# 更新

正如@Mythz 指出的那样，该功能没有被删除。我犯了不铸造客户的错误：

```
private IRestClient CreateRestClient()
{
    return new JsonServiceClient(WebServiceHostUrl);
}

[Test]
public void Can_WebRequest_POST_upload_binary_file_to_save_new_file()
{
    var restClient = (JsonServiceClient)CreateRestClient(); // this cast was missing
    var fileToUpload = new FileInfo(@"D:/test/test.avi");
    var beforeHash = this.Hash(fileToUpload);

    var response = restClient.PostFileWithRequest<FilesResponse>("files/UploadedFiles/", fileToUpload, new TestRequest() { Echo = "Test"});

    var uploadedFile = new FileInfo(FilesRootDir + "UploadedFiles/test.avi");
    var afterHash = this.Hash(uploadedFile);

    Assert.That(beforeHas, Is.EqualTo(afterHash));
}

private string Hash(FileInfo file)
{
    using (var md5 = MD5.Create())
    {
        using (var stream = file.OpenRead())
        {
            var bytes = md5.ComputeHash(stream);
            return BitConverter.ToString(md5.ComputeHash(stream)).Replace("-", "").ToLower();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:14:09.493

没有从[C# Service Clients](https://github.com/ServiceStack/ServiceStack/wiki/C#-client)中删除任何旧 API ，只添加了新 API。

您在服务中处理上传文件的方式也没有改变。

# html - 在 IE 中未正确显示 css 功能区

> ID：15253641
> 
> 赞同：0
> 
> 时间：2013-03-06T17:09:10.370
> 
> 标签：html, css, internet-explorer

我在侧边栏中用于标题的两个功能区没有在任何 IE 版本中正确显示。赋予它环绕外观的右下翻盖没有出现。这几乎就像 IE 不喜欢 CSS 之前和之后的东西。

链接 [http://tshirthideout.spreadshirt.com/](http://tshirthideout.spreadshirt.com/)

**HTML**

```
<div class="ribbon"><strong>SPECIAL OFFERS</strong></div> 
```

**CSS**

```
.ribbon {
  padding-bottom: 7px;
  padding-top: 8px;
  padding-left: 3px;
  color: #fff;
  text-shadow: 1px 1px 0px #c1c1c1;
  font-size: 15px;font-family:'Century Gothic',futura,'URW Gothic L',Verdana,sans-serif;
  letter-spacing: 5px;
  position:relative;
  width:267px;
  right:0px;
  top:19px;
  background-color:#212121;
  -moz-border-radius:2px 0px 0px 2px;  /*radius of 2px*/
  -khtml-border-radius:2px 0px 0px 2px;
  -webkit-border-radius:2px 0px 0px 2px;
  -webkit-box-shadow: -2px 2px 4px rgba(50, 50, 50, 0.35);
  -moz-box-shadow:    -2px 2px 4px rgba(50, 50, 50, 0.35);
  box-shadow:         -2px 2px 4px rgba(50, 50, 50, 0.35);
}

.ribbon:after {
  content:'';
  width:0;
  height:0;
  border-color: #000 transparent transparent #000;
  border-style:solid;
  border-width:5px 5px;  
  position:absolute;
  right:0;
  bottom:-10px;
} 
```

此代码适用于其他主要浏览器，但不适用于 IE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:25:28.953

那么元标记：`<meta http-equiv="X-UA Compatible" content="IE=EmulateIE7">`正在为 IE 9 + 8 用户模拟 IE 7 文档模式。我认为在 IE9 下不支持 box-shadow 之类的操作没有任何优势。你应该使用：

`<meta http-equiv="X-UA Compatible" content="IE=edge, chrome=1">`这样无论如何都使用最新版本的 IE，并且如果用户安装了 chrome 框架，它将被使用而不是原生 IE。

# c++ - C++中的抽象类和纯抽象类有什么区别？

> ID：15253642
> 
> 赞同：14
> 
> 时间：2013-03-06T17:09:12.787
> 
> 标签：c++, oop, abstract-class, abstraction

例子：

> 迭代器是纯粹的抽象：任何表现得像迭代器的东西都是迭代器。

这是什么意思？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-06T17:11:29.557

一个*抽象类*至少有一个纯虚函数。这是标准的 C++ 术语。

有些人使用术语*纯抽象类*来描述一个只有纯虚函数（换句话说，没有数据成员也没有具体函数）的类。这相当于 Java 接口。

现在到你的实际问题：

> 迭代器是纯粹的抽象：任何表现得像迭代器的东西都是迭代器。

这与抽象类（纯或其他）无关。它只是说任何满足迭代器契约的东西都是迭代器。它甚至不必是一个类（想想指针）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-06T17:12:17.350

没有什么。C++ 标准仅规定 a)，如果一个类具有至少一个纯虚函数，直接或继承，则该类是抽象的，并且 b)，您不能直接实例化抽象类。没有纯粹的抽象类这样的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T17:12:09.887

我认为纯抽象类是接口的 C++ 等价物。

见[这里](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Classes/Abstract_Classes/Pure_Abstract_Classes)：

> 纯抽象类只有抽象成员函数，没有数据或具体成员函数。通常，纯抽象类用于定义接口，并旨在由具体类继承。这是在类设计者和该类的用户之间强制签订合同的一种方式。该类的用户必须声明一个匹配的成员函数才能编译该类。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-06T17:12:56.230

抽象类是具有某些功能但需要实现一些功能的类，而纯​​抽象类没有实现任何功能。

这有点像 C# 和 Java 等其他语言中的接口。

纯抽象类的目的是指定纯抽象类的实体必须遵守的“契约”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-06T17:47:07.907

**抽象类***至少有一个纯虚函数，并且可以有数据成员。

**纯抽象类** *就像一个* ***接口***。*这里只能定义纯虚函数。此处不能进行数据成员或方法定义。*

欲了解更多信息，请访问：（[https://en.wikibooks.org/wiki/C%2B%2B_Programming/Classes/Abstract_Classes/Pure_Abstract_Classes](https://en.wikibooks.org/wiki/C%2B%2B_Programming/Classes/Abstract_Classes/Pure_Abstract_Classes)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T17:17:42.847

在 C++ 中没有纯抽象类。只有抽象类和纯虚函数（函数已用= 0标记）。具有至少一个纯虚函数的类变得抽象。但是纯虚函数可以有实现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-16T22:25:13.060

在您的示例中，您正在谈论*Iterators*。在 C++ 中，更具体地说，在标准库中，术语*迭代*器不是指纯粹的抽象类，而是指所谓的*概念*。概念与模板一起使用，而不是与基于虚拟/继承的多态性一起使用。目前（C++11），概念仅在库文档中定义，即它们（尚未）作为 C++ 语言本身的一部分存在。标准库文档概念，例如“迭代器”概念，作为一组*需求*任何类型/对象都被接受为想要使用“迭代器”的模板的类型参数。一组要求是根据哪些表达式对对象有效而定义的，无论其类型如何。这是鸭子打字的一种形式。例如，请参阅：[http ://en.cppreference.com/w/cpp/concept/Iterator](http://en.cppreference.com/w/cpp/concept/Iterator)

# javascript - 单击时，单选按钮组内的文本输入在 Firefox 中失去焦点

> ID：15253646
> 
> 赞同：11
> 
> 时间：2013-03-06T17:09:18.693
> 
> 标签：javascript, html, css, forms, input

我在 Firefox 中遇到问题，如果您在 Firefox 中单击`<input type="text">`，焦点会立即转移到单选按钮兄弟。

该行为在 Chrome 中按预期工作。我需要额外的 Javascript 来解决这个问题吗？

[这是 JsFiddle](http://jsfiddle.net/hgS3j/2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T10:21:45.677

来自[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label)：

> **允许的内容：**短语内容，但没有后代标签元素。除了带标签的控件之外，不允许有任何可标记的元素。

基本上，在标签中放置两个输入不是有效的标记。更改您的 html 标记，使标签仅包含无线电输入（和任何文本标签）...

```
<label class="radio">
    <input type="radio" name="requestfor" id="optionsRadios2" value="someoneelse" />
    Behalf of
</label>      
<input type="text" name="behalfof" id="behalfid"/> 
```

...然后使用 javascript（或者在我的惰性情况下，jQuery）来选择收音机：

```
$('#behalfid').click(function(){
    $('#optionsRadios2').trigger('click');
}); 
```

[这是小提琴](http://jsfiddle.net/2D7fM/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T17:13:26.373

似乎 Firefox 根据[W3C](http://www.w3.org/TR/html5/forms.html#the-label-element)实际上在做正确的事情：

> 如果未指定 for 属性，但 label 元素具有可标记元素后代，则按树顺序排列的第一个此类后代是 label 元素的带标签控件。

您的标签包含两个输入元素，因此当您单击文本框时，收音机（按树顺序排列的第一个此类后代）会获得焦点。

结果会因浏览器实现此规则的方式而异，因此要确保跨浏览器结果是的，您需要 JavaScript 介入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T19:18:31.133

做了一些挖掘，发现这个带有 jQ​​uery 解决方案的[jsFiddle](http://jsfiddle.net/p8kvQ/)。`trigger.click();`单击文本框时，在无线电输入上触发将选择它。

# e-commerce - 从 Prestashop 中的外部表单注册新客户

> ID：15253648
> 
> 赞同：0
> 
> 时间：2013-03-06T17:09:21.600
> 
> 标签：e-commerce, prestashop

我需要允许在展会上的访客在**Prestashop**网站上快速注册，并且我在 Prestashop 框架之外制作了一个注册表单，其中只有几个字段（名字、姓氏、电子邮件、邮政编码/邮编、通讯复选框和条件/隐私协议）。它必须是一个干净的屏幕，只有徽标和表格。当访问者发送它时，一个进程必须存储他们的数据。

我不确定该流程应该填写哪些表格字段，以便在他们登录时将它们作为新用户启用。

我想有必要在**"ps_customer"**和**"ps_address"**中填写没有默认值的 "not null" 字段。是否需要额外的表格？密码生成算法如何？该过程将创建它并将其发送给新用户。

也许你们中的某个人以前需要这样做，或者也许你只是知道 Prestashop 注册过程的本质。我还没有足够的时间深入研究它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:32:55.803

您可以使用 prestashop web api 执行此操作：

[http://doc.prestashop.com/display/PS15/Using+the+PrestaShop+Web+Service](http://doc.prestashop.com/display/PS15/Using+the+PrestaShop+Web+Service)

文档实际上包含了这个确切场景的一个例子

# windows - 使用批处理命令自动连接到 FTP 服务器，继续执行批处理脚本，然后在必要时运行 FTP 命令

> ID：15253650
> 
> 赞同：2
> 
> 时间：2013-03-06T17:09:28.593
> 
> 标签：windows, batch-file

这就是我想做的。是否可以使用批处理（Windows XP）文件？

1.  提示用户登录 FTP 服务器。

2.  继续执行其余的批处理命令，同时保持 FTP 会话/登录处于活动状态。

3.  需要时将 FTP PUT 命令与批处理命令一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:44:38.180

不，我想不出在继续运行批处理文件并向 ftp 进程发送命令的同时保持 ftp 进程处于活动状态的方法。

但是，如果这符合您的需要，您的批处理文件可以首先收集它需要的所有数据，生成一个包含所有 ftp 命令的文件，然后将该文件作为最后一步传递给 ftp.exe。

例如：

```
SET /P ftpuser=Username:
SET /P ftppass=Password:

:: generate ftp script file
ECHO %ftpuser% > ftpcommands.txt
ECHO %ftppass% >> ftpcommands.txt
ECHO put file.txt >> ftpcommands.txt
ECHO quit >> ftpcommands.txt

:: now call ftp and have it process all the commands
ftp -s:ftpcommands.txt server.com 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:45:15.677

Windows通过其开关`ftp`支持批处理。`-s`但是，在等待更多命令的同时保持 FTP 会话处于活动状态并没有什么好方法。该`ftp`命令将`-s`从头到尾处理其脚本，然后退出。

除了让批处理脚本生成脚本`ftp -s`并根据需要运行它之外，我能想到的唯一解决方案是将[FTP 服务器映射为驱动器](http://answers.yahoo.com/question/index?qid=20080612073002AAruBR0)号并根据需要进行复制。

# android - Android操作栏获取菜单项的位置

> ID：15253654
> 
> 赞同：2
> 
> 时间：2013-03-06T17:09:40.940
> 
> 标签：android, android-actionbar, actionbarsherlock

我在我的应用程序中使用 Sherlock 操作栏，我想找到菜单项的位置。可能吗？我想支持 Android 版本 >= 2.2。我需要该位置在该菜单项的图标上方显示工具提示。

# ruby - 如何在 ruby vim 插件中获取 vim 配置变量值？

> ID：15253666
> 
> 赞同：0
> 
> 时间：2013-03-06T17:10:04.510
> 
> 标签：ruby, vim, vim-plugin

有一个 vim 插件，它允许使用 vimrc 中的变量进行自定义：

```
let g:foo_plugin_command="bar" 
```

如何在作为插件代码一部分的 ruby​​ 方法中获取此变量的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:07:59.590

Vim::evaluate 可用于获取 vim 全局变量值并将其传递给 Ruby

```
Model.new.run('abc', 123, Vim.evaluate('g:foo_plugin_command')) 
```

# php - PHP regex 失败，在 Regex 101 上成功

> ID：15253667
> 
> 赞同：-1
> 
> 时间：2013-03-06T17:10:04.883
> 
> 标签：php, regex

被这个O_o难住了...

```
if(preg_match("(\d{1,2})\:(\d{2})", "5:00", $matches) == 1) echo "works";
else echo "don't work"; 
```

会回声

```
don't work 
```

但是 Regex 101 上的相同正则表达式似乎工作正常：[http ://regex101.com/r/mW1dN9](http://regex101.com/r/mW1dN9)

我需要一个全球标志或其他东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:12:30.063

您的正则表达式模式需要一些分隔符。

```
if(preg_match("#(\d{1,2})\:(\d{2})#", "5:00", $matches) == 1) echo "works";
else echo "don't work"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:13:06.293

您需要将正则表达式放在分隔符内：

```
if(preg_match("/(\d{1,2}):(\d{2})/", "5:00", $matches) == 1) echo "works";
else echo "don't work"; 
```

此外，您不需要转义`:`，但它可以工作。

# php - MYSQL 数据库优化使用索引

> ID：15253673
> 
> 赞同：-2
> 
> 时间：2013-03-06T17:10:28.847
> 
> 标签：php, mysql, database, indexing, database-optimization

我在[LearnBiz Si​​mulations](http://www.learnbizsimulations.com/)工作，这是一家自筹资金的初创公司，为管理教育领域进行模拟。

(a) 我们的网站目前为大约 16,000 人提供服务。目前，数据库大小为 30 mb，总共大约 90 个表，每个表可能有 5 到 50 列。我们在数据库中的所有表，都反复有新的插入、删除或更新行。但从未添加任何列。使用索引技术是否会产生任何问题？还有一些其他论坛和视频表明，即使插入或删除一行也会使索引变得无用！

(b) 我们网站上的最大工作是 mysql 查询，对 200-800 行之间的代码行进行一些处理。几乎 95% 以上的查询都有多个相等 where 子句，以查明所需的行。如果我理解正确，那么使用索引将帮助我们将流程加快几倍？

(c) 有一些模拟每分钟处理许多参与者的数据。对于此类模拟，目前我们甚至无法同时满足 50 名参与者的需求。采用索引是否有助于此类模拟承载更多用户？

(d) 我们目前拥有的服务器是带有 GoDaddy 的 VDS（每年费用约为 400 美元）。为了让我们的网站更快，我们转向 DDS（每年花费大约 3000 美元）或使用 TokuDB 之类的东西是否有意义？有没有办法判断当前系统的用户容量，即服务器+数据库+编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:29:21.857

关于索引问题，索引不仅是可取的，而且**需要**“加速”事情。据我了解（用“外行”术语），索引的功能是加快表内数据的搜索和恢复。

## **使用索引的原因：**

1.  唯一标识每个表上的每一行（毕竟主键是索引）
2.  索引已排序（即使数据未排序）
3.  加快搜索和过滤速度：索引可以更快地恢复数据，因为它“保存”了数据在表中的位置（它“精确定位”了您要恢复的数据）。此外，它使数据库引擎更容易过滤数据（过滤*排序*数据总是比*过滤*数据更快更简单）
4.  优化使用关联表时的数据恢复方式：每个外键都必须建立索引，以加快涉及主外键关系的查询

## 我使用一些“拇指规则”来决定哪些字段需要被索引：

*   每个主键都有索引（*很明显*：主键必须是唯一的，不能为空）
*   每个外键都必须被索引（为了使主外键关系有效）
*   必须为我需要执行搜索的每个数字或日期字段编制索引。也就是说，我尽量避免`double`（或任何其他浮点数字类型）字段被索引，因为它们通常用于存储不打算搜索的值。
*   我需要执行搜索的每个`char`或字段都必须被索引。`varchar`尽量避免在`text`字段上使用索引，因为它们可以包含非常大的值。
*   **避免**索引二进制 ( `blob`) 字段...没有意义
*   **不要**陷入索引所有内容的诱惑。花点时间决定哪些字段**必须**被索引，哪些字段**不能**被索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:27:23.787

（a）那些论坛和视频毫无价值，盲目地重复半真半假（是的，使用索引时有开销，只是性能增益通常超过它很多倍）

(b) 在大多数情况下，尽管要小心创建实际有用的索引。MySQL 文档有一[整章介绍了如何做到这一点](http://dev.mysql.com/doc/refman/5.6/en/optimization-indexes.html)（通常你也想看看整个[优化](http://dev.mysql.com/doc/refman/5.6/en/optimization.html)章节

(c) 确保您的基准测试没有模拟过大的流量。例如，一次 50 个真实用户不会每秒产生 50 个连接。同样，在实现索引和优化查询后，您的性能应该会提高

(d) 如果您的数据库服务器配置不正确（您是否使用查询缓存？您是否允许 MySQL 使用足够的内存来将表保存在内存中？等等），那么再多的更好的资源也无济于事。

总结一下：阅读有关 MySQL 服务器的基本配置，以便它可以有效地利用您的资源（默认值通常不够好），还可以查看手册中的优化章节。

# c# - 仅在满足特定条件时节流

> ID：15253675
> 
> 赞同：5
> 
> 时间：2013-03-06T17:10:33.573
> 
> 标签：c#, system.reactive, throttling

我有一个我正在订阅的 observable。这个可观察对象将返回一个对象，该对象具有一个名为 ActivationType 的属性，该属性可以设置多次。

我想要实现的是在 ActivationType 设置为“Type1”时记录一条消息。但是，如果 ActivationType 设置为“Type2”，则仅记录一次消息，如果 ActivationType 为“Type2”，则在再次记录之前等待 30 秒。

所以如果我有：

```
myObservable
    .Where(o => o.ActivationType == "Type1" || o.ActivationType == "Type2")  //listen for types 1 and 2
    .Throttle() // ??? somehow only throttle if we are currently looking at Type2
    .Subscribe(Log); //log some stuff 
```

我相信 Throttle() 是我正在寻找的，但不确定如何有条件地触发它。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T18:28:09.307

啊，对于几乎无法理解的`Window`操作员来说，这是一个完美的案例！

编辑：我每个月发布这个链接十几次，我发誓 - 最好的通读我见过的`Window`, `Join`, `Buffer`,`GroupJoin`等运算符：

[Lee Campbell：Rx 第 9 部分——加入、窗口、缓冲区和组加入](http://leecampbell.blogspot.com/2011/03/rx-part-9join-window-buffer-and-group.html)

```
var source = new Subject<Thing>();

var feed = source.Publish().RefCount();
var ofType1 = feed.Where(t => t.ActivationType == "Type1");
var ofType2 = feed
    // only window the type2s
    .Where(t => t.ActivationType == "Type2")
    // our "end window selector" will be a tick 30s off from start
    .Window(() => Observable.Timer(TimeSpan.FromSeconds(30)))
    // we want the first one in each window...
    .Select(lst => lst.Take(1))
    // moosh them all back together
    .Merge();

    // We want all "type 1s" and the buffered outputs of "type 2s"
    var query = ofType1.Merge(ofType2);

    // Let's set up a fake stream of data
    var running = true;
    var feeder = Task.Factory.StartNew(
       () => { 
         // until we say stop...
         while(running) 
         { 
             // pump new Things into the stream every 500ms
             source.OnNext(new Thing()); 
             Thread.Sleep(500); 
         }
    });

    using(query.Subscribe(Console.WriteLine))
    {               
        // Block until we hit enter so we can see the live output 
        // from the above subscribe 
        Console.ReadLine();
        // Shutdown our fake feeder
        running = false;
        feeder.Wait();
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:26:31.417

为什么不只使用两个流？

```
var baseStream = myObservable.Publish().RefCount(); // evaluate once
var type1 = baseStream.Where(o => o.ActivationType == "Type1");
var type2 = baseStream.Where(o => o.ActivationType == "Type2").Throttle(TimeSpan.FromSeconds(30));

type1.Merge(type2).Subscribe(Log); 
```

# objective-c - CATransform3D UIView animateWithDuration 序列

> ID：15253682
> 
> 赞同：1
> 
> 时间：2013-03-06T17:10:44.160
> 
> 标签：objective-c, core-animation, catransform3d

我是一名 Core Animation 初学者，试图按顺序对 3D 视图进行动画处理。但是，我遇到了第二个动画的问题。本质上，一旦视图旋转并平移到某个点，我就会进行另一次平移。

当我运行它时，它似乎在工作，但是第二个动画将视图转换到它的目的地，然后返回到它的初始位置！就好像第三个幻像动画恰好将视图返回到其初始状态。

有人可以解释为什么会发生这种情况以及我该如何解决？谢谢！

```
CATransform3D translation = CATransform3DMakeTranslation(0.0, -50.0, 0.0);
translation.m34 = 1.0 / -500.0f;
CATransform3D finalTransform = CATransform3DRotate(translation, 90.0f, 1.0, 0.0, 0.0);
[UIView animateWithDuration:2.0f animations:^{
    [viewImageScroll.layer setTransform:finalTransform];
} completion:^(BOOL finished) {
    CATransform3D flyAway = CATransform3DMakeTranslation(0., 0., -10000);
    [UIView animateWithDuration:3.0f animations:^{
        NSLog(@"done");
        [viewImageScroll.layer setTransform:flyAway];
    } completion:^(BOOL finished) {
        NSLog(@"done and done");
    }];
}]; 
```

# javascript - ES5 sort() 和日期

> ID：15253684
> 
> 赞同：0
> 
> 时间：2013-03-06T17:10:48.810
> 
> 标签：javascript, node.js, date, ecmascript-5

我在一个数组中有许多对象。这些对象有一个“时间”属性，它是一个日期字符串。

```
items = [
    {time: "2013-03-01T10:46:11Z"},
    {time: "2013-03-03T10:46:11Z"},
    {time: "2013-03-02T10:46:11Z"}
] 
```

我希望按那个“时间”属性对数组进行排序。

我已阅读[Sort Javascript Object Array By Date](https://stackoverflow.com/questions/10123953/sort-javascript-object-array-by-date)和[Javascript Date Sorting](https://stackoverflow.com/questions/4365671/javascript-date-sorting)，但我似乎无法使这些解决方案中的任何一个（转换为 Date 对象或排序为字符串）工作。

我的排序功能：

```
items.sort(function(first, second){
    return new Date(first.time) < new Date(second.time) ? 1 : -1;
}) 
```

测试结果：

```
items.forEach(function(item){
    console.log(item.time)
}) 
```

回报：

```
2013-03-01T10:46:11Z
2013-03-03T10:46:11Z
2013-03-02T10:46:11Z 
```

3 月 1 日，3 月 3 日，3 月 2 日。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:13:49.343

您在比较器函数中调用字段“日期”而不是“时间”。此外，该函数应返回一个整数，而不是布尔值：

```
 return new Date(first.time) - new Date(second.time); 
```

这可能不适用于所有浏览器。如果您所有的时间都是世界时，只需将它们作为字符串进行比较：

```
 return first.time > second.time ? 1 : first.time === second.time ? 0 : -1; 
```

# android - 与其他 Fragment 通信

> ID：15253685
> 
> 赞同：0
> 
> 时间：2013-03-06T17:10:55.233
> 
> 标签：android, android-fragments, android-viewpager

我正在使用本教程[AndroidDev](http://developer.android.com/training/basics/fragments/communicating.html)，我已将值从 FragmentA 传递到我的 FragmentActivity 但我在从 Activity 传递到 Fragment 时遇到问题。我的问题是我决定在 ViewPager 中托管我的片段。在这一点上，我必须从 ViewPager 中获取 FragmentA 或 FragmentB 的实例。我在 Activity 的 onCreate() 方法中调用了 onArticleSelected() 方法。我试过[这个](https://stackoverflow.com/questions/8785221/retrieve-a-fragment-from-viewpager)，但它返回 Fragment，而不是 FragmentA 或 B。

```
public static class MainActivity extends Activity
    implements HeadlinesFragment.OnHeadlineSelectedListener{
...

public void onArticleSelected(int position) {

    ArticleFragment articleFrag = (ArticleFragment)
            getSupportFragmentManager().findFragmentById(R.id.article_fragment);

    if (articleFrag != null) {
        articleFrag.updateArticleView(position);
    } else {
        ArticleFragment newFragment = new ArticleFragment();
        Bundle args = new Bundle();
        args.putInt(ArticleFragment.ARG_POSITION, position);
        newFragment.setArguments(args);

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        transaction.commit();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T21:34:32.290

[安卓参考](http://developer.android.com/training/basics/fragments/communicating.html)

使用接口可以将数据从片段传递到活动

# wordpress - 为 wordpress 寻找水平图像滚动器/图库插件

> ID：15253686
> 
> 赞同：0
> 
> 时间：2013-03-06T17:10:58.937
> 
> 标签：wordpress, slider, gallery

我正在寻找一个插件来精美地展示一些作品。我正在寻找免费的[wp Image 水平卷轴滚动幻灯片](http://www.gopiplus.com/work/2011/05/08/wordpress-plugin-image-horizontal-reel-scroll-slideshow/#.UTdyraVqvZg)之类的东西。它不一定是免费插件。

您对 WordPress 的水平图像滚动条/图库插件有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:19:57.590

这是一个相当模糊/选项的问题，但让我们看看......

如果您正在寻找高级滑块，您可以查看[Solquoy](http://soliloquywp.com/)、[SliderPRO](http://codecanyon.net/item/slider-pro-wordpress-premium-slider-plugin/253501)和[Royal Slider](http://codecanyon.net/item/royalslider-touch-content-slider-for-wordpress/700256)。您可以在 Chris Lema 的博客上阅读这些[评论和比较](http://chrislema.com/comparing-premium-sliders-for-wordpress-by-performance/)。

我还建议您查看 WooThemes 的[FlexSlider](http://flexslider.woothemes.com/)和[Meteor Slides](http://wordpress.org/extend/plugins/meteor-slides/)。

那里有无数的滑块和插件。你必须做一些研究，看看哪一个最适合你的需要。我希望这有帮助！

# c - 使用 scanf() 格式化输入

> ID：15253687
> 
> 赞同：1
> 
> 时间：2013-03-06T17:10:59.353
> 
> 标签：c, scanf

我需要将字符串作为输入，丢弃不是空格、连字符或数字的所有内容。换句话说，我只想读入正整数和负整数。我对使用 scanf 并没有死心，但我更喜欢它。

到目前为止我尝试过的是：

```
char buffer[200];

scanf("%[0-9 ' ']*%c", buffer); /*this works perfectly, except the hyphen part*/
scanf("%[0-9 - ' ']%*c", buffer); /*no change*/
scanf("%[0-9 '-' ' ']%*c", buffer); /*still no change*/ 
```

显然一次只尝试了其中一个。

感谢您提供的任何见解或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T17:52:08.423

我很惊讶这对你有用：

```
scanf("%[0-9 ' ']*%c", buffer);
                 ^--- There's a typo, here. The * should probably be after the %. 
```

关于更紧迫的问题...在 C11 标准中，在第 §7.21.6.2p12 节中，在`[`转换说明符下有一些解释：

> 如果 - 字符在扫描列表中并且不是第一个字符，也不是第一个字符是 ^ 的第二个字符，也不是最后一个字符，则行为是实现定义的。

因此，我建议两件事：

1.  您不能依赖`0-9`可移植地表示扫描集中的字符`0123456789`范围。你最好明确说明`0123456789`.
2.  您的实现没有`-`按照您的意愿进行解释。

我建议这样的事情：

```
assert(scanf("%[- 0123456789]%*c", buffer) == 1); 
```

您*需要*检查返回值。如果`scanf`返回 0 或`EOF`，那么您不能期望使用`buffer`. 我把它放在`-`扫描集的开头，这样它就被很好地定义了，并像前面提到的那样扩展了你`0-9`的。`0123456789`

我希望这会有所帮助:)

# c# - 使用此代码，我无法获得更新，没有任何变化

> ID：15253688
> 
> 赞同：1
> 
> 时间：2013-03-06T17:10:59.523
> 
> 标签：c#, asp.net, entity-framework

这是一个 GridView 更新，没有语法问题。

更新后`((TextBox)GridView1.Rows[e.RowIndex].FindControl("txt")).Text;` 它返回相同的文本没有任何变化我无法获得我在文本框中以更新模式输入的文本

示例：如果我有文字 -`someText`

在更新中我输入了 -`newText`

最后它返回 -`someText`

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e) {
    int id = Convert.ToInt32((GridView1.Rows[e.RowIndex].FindControl("Label1ID") as Label).Text);
    PersonData data = (from x in Domain.Instance.PersonDatas
                                         where x.ID == id
                                         select x).First();

    data.Info = ((TextBox)GridView1.Rows[e.RowIndex].FindControl("txt")).Text;
    data.Info1 = ((TextBox)GridView1.Rows[e.RowIndex].FindControl("txt1")).Text;
    data.Info2 = ((TextBox)GridView1.Rows[e.RowIndex].FindControl("txt2")).Text;

    Domain.Instance.SaveChanges();

    GridView1.EditIndex = -1;
    DatBind();
} 
```

有一个属性：

```
 <asp:TemplateField HeaderText="Info">
                    <EditItemTemplate>
                        <asp:TextBox ID="txt" runat="server" Text='<%# Eval("Info") %>'></asp:TextBox>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="LabelInfo" runat="server" Text='<%# Eval("Info") %>'></asp:Label>
                    </ItemTemplate>
  </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:31:14.663

我认为问题可能在于绑定gridview。
您不应该在页面加载时绑定您的 gridview。
它应该如下所示

```
 if(!IsPostBack)  /// <<<<<<<<<<
 {
    GridView1.DataSource = yourDataSource;
    GridView1.DataBind();
 } 
```

# mongodb - MongoDB 是否像 MySQL 一样使用基于语句和基于行的复制？

> ID：15253690
> 
> 赞同：0
> 
> 时间：2013-03-06T17:11:03.617
> 
> 标签：mongodb

MongoDB 如何复制影响多个文档的更新查询？

它会使用基于语句的方法来保存操作日志还是基于行的方法？

选择基于行或语句的复制的标准是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:29:35.443

> 它会使用基于语句的方法来保存操作日志还是基于行的方法

MongoDB 使用 oplog 逐行工作。因此，当您进行影响多行的更新时，它实际上会将每一行一一写入 oplog，这当然是一个空间占用者；如手册中所述：http: [//docs.mongodb.org/manual/core/replication/#oplog](http://docs.mongodb.org/manual/core/replication/#oplog)

> oplog 必须将多次更新转换为单独的操作，以保持幂等性。这可以使用大量的 oplog 空间，而不会相应增加磁盘利用率。

oplog 基本上是一个有上限的集合，它将首先复制最旧的。

据我所知，MongoDB 不像许多 SQL 技术人员那样做基于语句的复制。

# asp.net-mvc - MVC 4 Ajax.beginform 提交 - 导致完全回发

> ID：15253692
> 
> 赞同：7
> 
> 时间：2013-03-06T17:11:04.180
> 
> 标签：asp.net-mvc, jquery

MVC4 互联网项目

我正在使用 Ajax.BeginForm 进行带有验证的回发，它回发整个页面而不仅仅是 UpdateTargetID。我查看了关于 SO 的其他帖子，但没有找到答案。我构建了一个新的 MVC4 Internet 项目，仅用于测试（VS 2012 已更新为“ASP.NET 和 Web 工具 2012.2”）。

这是我的代码

**控制器**

```
public ActionResult Index() 
{
  var vM = _db.Students.FirstOrDefault(); return View(vM);
}

[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Index(Student vM)
{
  if (ModelState.IsValid)
  { //code if Model valid
    return Json(new { url = Url.Action("About", "Controller") });
  }
  ModelState.AddModelError(string.Empty, "AJAX Post");
  return PartialView("Index", vM);
} 
```

**看法**

```
@model AJAX_Test.Models.Student
@{ ViewBag.Title = "Student"; }
<script src="~/Scripts/jquery-1.8.2.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
<script type="text/javascript">  var onSuccess = function (result)
{
  if (result.url) { window.location.href = result.url; } 
}
  // when server returns JSON object containing an url property redirect the browser    </script>
<h1>@ViewBag.Title</h1>
<div id="IDXForm">
@using (Ajax.BeginForm("Index", new AjaxOptions() { UpdateTargetId = "IDXForm", OnSuccess = "onSuccess", HttpMethod = "Post" }))
{   
  @Html.AntiForgeryToken() @Html.ValidationSummary(true) 
  <span>@Html.EditorFor(m => m.FirstName) @Model.EnrollmentDate.ToShortDateString()</span> <input type="submit" value="Submit" />                   
}
</div> 
```

最初的看法是： ![在此处输入图像描述](../Images/27740cf2c3c26d5c2c40ea1ca5510a0b.png)

提交后： ![在此处输入图像描述](../Images/1d11fa98c4bd6a279102be4860c7b947.png)

提交后body的源代码：

```
 <div id="body">

            <section class="content-wrapper main-content clear-fix">

<script src="/Scripts/jquery-1.8.2.js"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script type="text/javascript">  var onSuccess = function (result) { if (result.url) { window.location.href = result.url; } }
  // when server returns JSON object containing an url property redirect the browser </script>
<h1>Student</h1>
<div id="IDXForm">
<form action="/" data-ajax="true" data-ajax-method="Post" data-ajax-mode="replace" data-ajax-success="onSuccess" data-ajax-update="#IDXForm" id="form0" method="post"><input name="__RequestVerificationToken" type="hidden" value="vkCszJu-fKT6zUr5ys2StOTPF6a9pZdj5k1MyaAZKo8MPweS53dUuni0C9B17NjL_GVydHa7-jI1H0F9HrYEdKxeCWq9mCeER3ebaZYLxIs1" /><span><input class="text-box single-line" id="FirstName" name="FirstName" type="text" value="Carson" /> 9/1/2005</span> <input type="submit" value="Submit" />                                                                                                     
</form></div> 
```

谁能看到我的代码有什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T21:54:12.190

想到可能导致此行为的几件事：

1.  在您的问题中，您已经显示了您的捆绑注册，但您实际上是否将它们包含在您的视图或布局中？确保在您的视图或布局中首先包含`jquery.js`，然后`jquery.unobtrusive-ajax.js`（按该顺序）：

    ```
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval") 
    ```

2.  该`jquery.unobtrusive-ajax.js`脚本与 jquery 1.9 及更高版本不兼容，因为它依赖`.live()`于[`removed in jQuery 1.9`](http://jquery.com/upgrade-guide/1.9/#live-removed). 因此，如果由于某种原因您将 jQuery 版本升级到 1.9 或更高版本，那将无法正常工作。你应该降级。

3.  在您的 onSuccess 回调中，如果控制器操作返回 JSON，您将重定向到 url。您是否确认不是这种情况？因为当使用重定向发生重定向时`window.location.href`，您会重新加载整个页面而不是部分更新是很正常的

在所有情况下都使用 javascript 调试工具来查看到底发生了什么。如果您使用的是 Firefox，那么您可以使用 FireBug。如果您使用的是 Google Chrome，则可以使用 Chrome 开发者工具栏。查看控制台以了解您可能遇到的潜在 javascript 错误。查看网络选项卡以查看是否所有 javascript 都已成功加载并且您没有 404 错误。了解如何使用工具调试您的 JavaScript 代码。您会惊讶于这些工具会为您提供多少有关您的代码可能遇到的潜在问题的信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T00:47:23.110

UpdateTargetID 的内容必须在局部视图中，并且需要从 Controller Post Action 调用该局部视图。达林通过电子邮件回复了我（谢谢达林）。您需要使用部分视图。我已尝试两次更新他的答案，但版主没有这样做或解释原因，所以我发布我自己的答案以供他人受益。

_MyForm 视图：

```
@model AJAX_Test.Models.Student

@using (Ajax.BeginForm("Index", new AjaxOptions { UpdateTargetId = "IDXForm", OnSuccess = "onSuccess" }))
{   
    @Html.AntiForgeryToken() 
    @Html.ValidationSummary(true) 
    <span>
        @Html.EditorFor(m => m.FirstName)              @Model.EnrollmentDate.ToShortDateString()
    </span> 
    <input type="submit" value="Submit" />                                                                                                     
} 
```

主视图：

```
<div id="IDXForm">
    @Html.Partial("_MyForm")
</div> 
```

控制器发布操作：

```
 ModelState.AddModelError(string.Empty, "AJAX Post");
  return PartialView("_MyForm", vM); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T07:43:46.380

采用：`<script src="../Scripts/jquery.unobtrusive-ajax.js"></script>`

这个 JS 是 Ajax 工作的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-31T23:12:12.303

需要注意的其他几件事。

1.  jquery.unobtrusive-ajax.js 现在支持 JQuery 1.9。我已经安装了 jquery.unobtrusive-ajax.js 版本 3.0.0，它正在使用 JQuery 1.9

**2\. 确保所有的 div 标记都正确关闭，包括包含 Ajax.BeginForm 的视图和主视图。此外，如果您在主视图或包含 Ajax.BeginForm 的视图中有 @Html.Raw() ，也要小心。**

在这里发帖以节省一天的头疼。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-10T18:43:51.583

确保你有你的包配置包括这个

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery.unobtrusive*",
                    "~/Scripts/jquery-{version}.js")); 
```

bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include("~/Scripts/jquery.validate*"));

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-31T17:31:06.080

至少，您需要这两个包括：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval") 
```

如果这仍然没有帮助，请检查 web.config 并确保启用了不显眼：

```
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

如果仍然没有效果，请确保不显眼的 js 文件与当前的 jQuery 版本兼容，无论您使用的是什么版本的 jQuery，可以在以下 URL 中找到：

[http://www.nuget.org/packages?q=unobtrusive](http://www.nuget.org/packages?q=unobtrusive)

# c# - 给定范围列表查找最大重叠范围的有效算法

> ID：15253694
> 
> 赞同：10
> 
> 时间：2013-03-06T17:11:07.133
> 
> 标签：c#, algorithm, math, dynamic-programming

考虑以下描述连续`integer`值范围的接口。

```
public interface IRange {
    int Minimum { get;}
    int Maximum { get;}

    IRange LargestOverlapRange(IEnumerable<IRange> ranges);
} 
```

我正在寻找一种有效的算法来找到给定`IRange`对象列表的最大重叠范围。下图简要概述了这个想法。上面的数字代表`integer`值，`|-----|`代表`IRange`具有最小值和最大值的对象。我堆叠了`IRange`对象，以便解决方案易于可视化。

```
0123456789  ...                            N
|-------|   |------------|        |-----|
   |---------|    |---|
       |---|             |------------|
               |--------|  |---------------|
                              |----------| 
```

在这里，该`LargestOverlapRange`方法将返回：

```
 |---| 
```

由于该范围共有 4 个“重叠”。如果有两个`IRange`相同数量的重叠，我想返回`null`.

这是我尝试过的一些简短代码。

```
public class Range : IRange 
{

    public IRange LargestOverlapRange(IEnumerable<IRange> ranges) {           

        int maxInt = 20000;    

        // Create a histogram of the counts
        int[] histogram = new int[maxInt];
        foreach(IRange range in ranges) {
            for(int i=range.Minimum; i <= range.Maximum; i++) {
                histogram[i]++;
            }
        }

        // Find the mode of the histogram
        int mode = 0;
        int bin = 0;
        for(int i =0; i < maxInt; i++) {
            if(histogram[i] > mode) {
                mode = histogram[i];
                bin = i;
            }
        }

        // Construct a new range of the mode values, if they are continuous
        Range range;
        for(int i = bin; i < maxInt; i++) {
            if(histogram[i] == mode) {  
                if(range != null)
                    return null; // violates two ranges with the same mode   
                range = new Range();             
                range.Minimum = i;                     
                while(i < maxInt && histrogram[i] == mode)
                    i++;
                range.Maximum = i;                    
            }
        }

        return range;
    }

} 
```

这涉及四个循环，如果不是更高的话，很容易 O(n^2)。是否有更有效的算法（速度方面）从其他范围列表中找到最大的重叠范围？

**编辑**

是的，O(n^2) 不正确，我想错了。正如评论中指出的那样，它应该是 O(N * M)。

**编辑 2**

让我规定一些事情，值的绝对最小值和最大值`integer`将来自 (0, 20000)。其次，平均数量`IRange`将在 100 左右。我不知道这是否会改变算法的设计方式。

**编辑 3**

我在科学仪器（质谱仪）上实施该算法，其中数据处理的速度对数据质量至关重要（更快的分析时间 = 在时间 T 内收集的更多光谱）。固件语言（专有）只有数组[]，不是面向对象的。我选择 C# 是因为我擅长在两种语言之间移植概念，并认为为了 SO 社区的利益，一个好的答案会吸引更广泛的受众。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T17:16:02.613

将您的范围列表转换为起点和终点列表。使用 O(n log n) 算法对列表进行排序。现在您可以遍历列表并根据它是开始点还是停止点来增加或减少计数器，这将为您提供当前的重叠深度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:41:12.237

据我了解 OP 的问题，给出 3 个范围的解决方案

```
A: 012
B:  123
C:    34 
```

将是范围`12`（A 和 B 的公共子集），***而不是***范围`123`（因为它不是任何对的公共子集）。

* * *

在编写任何代码之前，请考虑一下纸上的算法。动态规划解决方案怎么样？（如果您不了解动态编程，则值得在书中阅读有关它的内容）。动态规划的思想是建立更简单的子问题的解决方案。

让`f_i(n, k)`是从 n 开始的最长间隔的大小，与前 i 个给定范围中的至少 k 个相同。

您可以从 f_0 计算出 f_1，从 f_1 计算出 f_2，依此类推。更新函数仅取决于所考虑的一个额外范围。

假设有 M 个范围。f_M 的值将告诉我们您的问题的答案。

您谈到的最深深度是最大的 k，使得 f_M(n, k) 对于某些 n 不为零。我们称其为最大深度 K。然后我们在 n 上寻找 f_M(n, K) 的最大值。它的最大值是您的最大范围的大小，从最大化 n 开始。

最大化的 n 必须是某个范围的下限，所以我们只需要计算这类 n 的 f。有 M 个范围，所以最多有 M 个下限。因此，该算法的复杂度为 O(MMK)。

> 设第 i 个范围是从 a 到 b
> 
> 如果 n 在 a 到 b 之外，则没有变化
> `f_i(n,k) = f_i-1(n,k)`
> 
> 如果 n 在 a 到 b 之内，我们测试通过将新的区间与旧的 k-1 深度解组合得到的 k 深度解。我们只有在它比我们已经拥有的更好时才使用它。 `f_i(n,k) = max ( f_i-1(n,k) , min( f_i-1(n,k-1) , b-n+1))`

* * *

例子！对于 0 到 5、2 到 6、4 到 8 和 6 到 9 的范围。

```
n           0123456789

            ......          range 0 to 5
f_1(n,1)    6543210000

              .....         range 2 to 6
f_2(n,1)    6554321000
f_2(n,2)    0043210000

                .....       range 4 to 8
f_3(n,1)    6554543210  
f_3(n,2)    0043321000
f_3(n,3)    0000210000

                  ....      range 6 to 9
f_4(n,1)    6554544321
f_4(n,2)    0043323210
f_4(n,3)    0000211000
f_4(n,4)    0000000000 
```

因此最深的深度 K 是 3，最长的范围是 4 到 5。我们还可以看到，最长的范围深度 2 的大小为 4，从 3 开始。

# php - 构建 REST API 以将网站发布到用户域

> ID：15253697
> 
> 赞同：1
> 
> 时间：2013-03-06T17:11:22.573
> 
> 标签：php, ajax, web-services, rest

**用例：**我正在开发一个应用程序，用户可以在其中构建自己的 html 模板并通过选择一个模板将其发布到他的域。他可以使用不同的组件来做到这一点。

**问题：**我想将用户构建的页面从我的域转移到他创建的域。类似于[这里](http://app.imcreator.com/edit)所做的事情。现在目前在原型中，我所做的是将内容写入文件（*使用 ajax 请求**的`.html`*文件）然后与用户域建立 FTP 连接（*可能因为域是由应用程序动态创建的*）并将文件传输到他的域.

我相信这不是正确的方法，我想围绕 REST 服务构建它，这将使其灵活且安全。

**研究：**我浏览了网络，发现一些网站可以很好地处理这个问题（[就像上面提到的那样](http://app.imcreator.com/edit)），并且相信他们已经将它构建为一种服务。我在吗？

我想要建议和可能性，以便我可以继续前进。我在服务器端使用 PHP，在客户端使用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:29:38.730

我可以看到一些可能为您的服务增加安全性的功能：

1.  检查请求中的源 IP，并且只允许您的服务器进行 REST 调用。

2.  添加`header('Access-Control-Allow-Origin: *');`可能的域列表以进行调用，而不是 *.

3.  添加与调用者机器 IP 地址相关的安全令牌，作为机器的密码。

4.  使用 post 而不是 get 发送所有数据。

要更新页面，我会这样：

1.  将数据保存在服务器 1 上的数据库中
2.  添加一个页面，该页面根据域参数从数据库中读取页面内容
3.  在域页面调用服务器 1 以 domain 参数获取内容

# javascript - 用于测试繁重的 javascript 脚本的计算机/浏览器性能缓慢

> ID：15253701
> 
> 赞同：6
> 
> 时间：2013-03-06T17:11:29.677
> 
> 标签：javascript, html, canvas

我正在开发一个 javascript/html5 gif 编辑器，我想知道如何在较慢的环境中进行测试。它在我的电脑上运行良好，但由于它使用繁重的 javascript 和算法，我需要看看它是否能在功能较弱的处理器上顺利运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:14:28.323

[我建议使用VMware Player](http://www.vmware.com/products/player/)或[VirtualBox](https://www.virtualbox.org/)设置虚拟机。您可以调整处理器速度、处理器核心数和内存等属性。这将帮助您在较慢的环境中测试您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:15:34.413

多么奇怪的要求！通常人们希望事情越来越快。

*   在这里使用虚拟机是一个很好的解决方案。它允许您准确分配计算机的功能，并可能为您提供非常合适的测试环境。
*   如果您想要效率低下，那么 Internet Explorer 就是您的最佳选择。你只需要确保它支持你的 HTML5 和你的 JS。
*   使用一些功能更强大的浏览器的旧版本可能也是一个好主意。
*   另外，这有点小技巧，在同一个浏览器中多次打开您的程序可能需要研究一下。它会占用 RAM，并且您的处理器将承受更大的压力，并且不会像正常情况下那样运行。

只是想我会抛出我能想到的每一个建议:)

# regex - 正则表达式 - 查找不匹配的文件

> ID：15253702
> 
> 赞同：1
> 
> 时间：2013-03-06T17:11:29.907
> 
> 标签：regex, bash, find

我有一个目录列表，其中大多数格式为`./[foobar]/`. 但是，有些格式为`./[foo] bar/`.

我想使用`find`（或我的 shell 提供的其他一些实用程序）来查找那些与第一个模式*不*匹配的目录（即在方括号之外有文本）。直到现在，我还无法找到一种方法来“反转”我的模式。

有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:14:41.353

您可以将 find 与 grep 及其 -v 选项结合使用。`find . -type d | grep -v "[foobar]"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:14:13.627

`find`通过`!`和支持否定`-not`。后者不符合 POSIX。为了使用`!`，您必须在它前面加上反斜杠或将其放在单引号内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T17:14:24.110

一个简单的常规 glob 将在此特定示例中起作用：

```
$ ls
[a]b [ab]
$ echo \[*\]
[ab] 
```

对于更复杂的模式，您可以启用`extglob`：

```
!(pattern-list)
     Matches anything except one of the given patterns 
```

（[和类似的球](https://stackoverflow.com/a/15252503)）

或使用查找：

```
find dir ! -name ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T17:15:24.257

```
find -type d -name '*\]?*' 
```

除非你坚持打开括号检查......

# emacs - 如何在emacs中不选择复制单词？

> ID：15253704
> 
> 赞同：3
> 
> 时间：2013-03-06T17:11:35.983
> 
> 标签：emacs

我查看了这个页面：[http](http://emacswiki.org/emacs/CopyWithoutSelection) ://emacswiki.org/emacs/CopyWithoutSelection 。

我将完全相同的代码复制到我的 .emacs 中。不知何故，只有复制行和复制段落有效。但我真正想要的是复制词。每次我运行 copy-word 时，都会收到如下错误：“错误类型参数：integerp，nil”。奇怪的是copy-word和copy-line之间的唯一区别是copy-thing `backward-word`forward-word arg而不是`beginning-of-line and`end-of-line，它们都是内置的。我想知道为什么复制行有效而复制词无效。

谁能帮我解决这个问题？

# wso2 - WSO2ESB - 代理服务定义需要“名称”属性

> ID：15253705
> 
> 赞同：0
> 
> 时间：2013-03-06T17:11:43.620
> 
> 标签：wso2, soa, wso2esb, rule-engine, complex-event-processing

我在部署此示例时遇到问题：“使用 SOA 进行复杂事件处理和业务规则管理”（链接：[http ://wso2.org/library/articles/2011/07/complex-event-processing-business-rule-management -soa](http://wso2.org/library/articles/2011/07/complex-event-processing-business-rule-management-soa) )

我做了所有的细节，但是当我`"cepSample.xml"`在该位置复制文件时，`"wso2esb-4.6.0/repository/deployment/server/synapse-configs/default/proxy-services"`我在控制台中收到了这个错误，我不会被部署： `/WSO2/wso2esb-4.6.0/repository/deployment/server/synapse-configs/default/proxy-services/cepSample.xml failed - Continue in fail-safe mode org.apache.synapse.SynapseException: The 'name' attribute is required for a Proxy service definition`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T12:55:36.420

我尝试手动创建代理服务 - 并获取此文件（在 ESB 4.8.1 中。）可能对您有所帮助：

```
<proxy xmlns="http://ws.apache.org/ns/synapse"
       name="cepSample"
       transports="https,http"
       statistics="disable"
       trace="disable"
       startOnLoad="true">
   <target>
      <inSequence>
         <log level="full"/>
         <property name="txAmount" expression="//reqFinancTx/amount/text()"/>
         <property name="financTx" expression="//reqFinancTx/financTx/text()"/>
         <dblookup>
            <connection>
               <pool>
                  <password>esb</password>
                  <user>esb</user>
                  <url>jdbc:mysql://localhost:3306/brms_db</url>
                  <driver>com.mysql.jdbc.Driver</driver>
               </pool>
            </connection>
            <statement>
               <sql>
             SELECT * FROM `BRMS_USER_INFO` where `user_id`=? </sql>
               <parameter expression="//reqFinancTx/userID" type="VARCHAR"/>
               <result name="balance" column="account_balance"/>
               <result name="userId" column="user_id"/>
               <result name="userName" column="name"/>
               <result name="access" column="accessability"/>
            </statement>
         </dblookup>
         <log>
            <property name="userId" expression="get-property('userId')"/>
            <property name="userName" expression="get-property('userName')"/>
            <property name="access" expression="get-property('access')"/>
            <property name="balance" expression="get-property('balance')"/>
            <property name="txAmount" expression="get-property('txAmount')"/>
            <property name="financTx" expression="get-property('financTx')"/>
         </log>
         <xslt key="sampleXSLT">
            <property name="accountBalance" expression="get-property('balance')"/>
         </xslt>
         <log level="full"/>
         <property name="STATE" value="PERSON_INFO_REQUEST"/>
         <send>
            <endpoint>
               <address uri="http://localhost:9764/services/transactionValidatorService"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <log>
            <property name="xxxxxx" expression="get-property('STATE')"/>
         </log>
         <switch source="get-property('STATE')">
            <case regex="PERSON_INFO_REQUEST">
               <log level="full"/>
               <property xmlns:brs="http://brs.carbon.wso2.org"
                         xmlns:ax26="http://transactionApprovalService.samples/xsd"
                         name="RESULT"
                         expression="//brs:processTransactionResponse/brs:TransactionResult/ax26:transactionCanProceed"/>
               <log>
                  <property name="RESULT" expression="get-property('RESULT')"/>
               </log>
               <switch source="get-property('RESULT')">
                  <case regex="true">
                     <clone>
                        <target>
                           <sequence>
                              <xslt key="cepXSLT">
                                 <property name="userId" expression="get-property('userId')"/>
                                 <property name="financTx" expression="get-property('financTx')"/>
                              </xslt>
                              <log level="full"/>
                              <send>
                                 <endpoint>
                                    <address uri="http://localhost:9766/services/localBrokerService/AllTransactions"/>
                                 </endpoint>
                              </send>
                           </sequence>
                        </target>
                        <target>
                           <sequence>
                              <dblookup>
                                 <connection>
                                    <pool>
                                       <password>esb</password>
                                       <user>esb</user>
                                       <url>jdbc:mysql://localhost:3306/brms_db</url>
                                       <driver>com.mysql.jdbc.Driver</driver>
                                    </pool>
                                 </connection>
                                 <statement>
                                    <sql> SELECT * FROM `BRMS_USER_INFO` where `user_id`=? </sql>
                                    <parameter expression="//reqFinancTx/userID" type="VARCHAR"/>
                                    <result name="balance" column="account_balance"/>
                                    <result name="userId" column="user_id"/>
                                    <result name="userName" column="name"/>
                                    <result name="access" column="accessability"/>
                                 </statement>
                              </dblookup>
                              <log>
                                 <property name="userId" expression="get-property('userId')"/>
                                 <property name="userName" expression="get-property('userName')"/>
                                 <property name="access" expression="get-property('access')"/>
                              </log>
                              <switch source="get-property('access')">
                                 <case regex="false">
                                    <xslt key="accLockedXSLT"/>
                                    <send/>
                                 </case>
                                 <case regex="true">
                                    <xslt key="txProceedXSLT"/>
                                    <send/>
                                 </case>
                              </switch>
                           </sequence>
                        </target>
                     </clone>
                  </case>
                  <case regex="false">
                     <log level="full">
                        <property name="sequence"
                                  value="outSequence - STATE 02 - response from CreditService"/>
                     </log>
                     <send/>
                  </case>
               </switch>
               <send>
                  <endpoint key="CreditEpr"/>
               </send>
            </case>
            <case regex="CREDIT_REQUEST">
               <log level="full">
                  <property name="sequence"
                            value="outSequence - STATE 02 - response from CreditService"/>
               </log>
               <send/>
            </case>
         </switch>
      </outSequence>
   </target>
</proxy> 
```

# vim - vim 复制粘贴缓冲区

> ID：15253709
> 
> 赞同：11
> 
> 时间：2013-03-06T17:11:55.467
> 
> 标签：vim

假设我有以下文本（为清楚起见，我对行进行了编号）并且光标位于第 5 行的开头：

```
1
2 var x = 1;
3 var y = 2;
4 
5 if (true) {
6     print("Hey!");
7 } 
```

好的，现在我尝试剪掉第 5、6、7 行（所有那些“如果”的东西）。为此，我这样做： `Vjjd`。现在看来我在第 4 行的开头，这是一个空字符串。

我的问题：此时是否可以*删除第 4 行*而不会丢失先前复制的第 5、6、7 行（即“如果”的东西），这样我就可以将它们粘贴到其他地方，比如说，在 1 日后线？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-06T17:18:01.783

您始终可以使用“n”将其拉入或删除到寄存器中，其中 n 几乎是任何键。请参阅“帮助寄存器”中的可用寄存器列表，其中一些具有特殊含义。例如，您可以这样做：

```
> "a3dd (to delete the last three lines into a register called a)
> dd (to delete the blank line) 
> "ap (to paste the a register) 
```

您还可以使用 Vjj"ad 来匹配您在原始问题中所做的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T17:17:39.757

是：你可以使用黑洞~~缓冲~~注册：类型`"_dd`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T17:18:57.047

如果你的#4 行是**空行**，这很容易，你不必玩寄存器。做就是了：

```
kJ 
```

它的意思是：

```
k: move to #3
J: (shift-J) Join #3 and #4 
```

或者您更喜欢在`INSERT`模式下进行。

```
i<BS> 
```

或者

```
I<c-u> 
```

**如果该行不为空：**

*   使用寄存器来存储 3 行或 #4，就像@Derek 建议的那样
*   使用像@Jan这样的黑洞寄存器建议
*   或使用**编号寄存器**。

比如说，现在你刚刚做了`3dd`（没有命名寄存器），并且光标在一个非空行（#4）上，你可以直接做`dd`. 3行没有消失。您可以通过以下方式再次粘贴它们：

```
"2p 
```

# javascript - 展开和折叠项目并从 javascript 中删除静态文本

> ID：15253716
> 
> 赞同：2
> 
> 时间：2013-03-06T17:12:17.310
> 
> 标签：javascript, jquery, html, css, ruby-on-rails

我有以下 java 脚本代码来展开和折叠。

```
$(function () {

   $(document).on('click', '.expandcollapse', function(e) {

     $('.collapse').each(function(index) {
       $(this).collapse("toggle");
     });

     if ($(this).html() == "<i class=\"icon-white icon-plus-sign\"></i> Expand All ") {
        $(this).html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
     }
     else {
        $(this).html("<i class=\"icon-white icon-plus-sign\"></i> Expand All");
     } 
    });
}); 
```

它在这里工作正常：

[http://jsfiddle.net/HqXMN/10/](http://jsfiddle.net/HqXMN/10/)

我需要删除静态文本（展开、折叠）并以某种方式将它们放在我的 html 中。有没有办法根据使用 toggleClass 函数的操作隐藏文本和图标加号或减号。

这是我迄今为止尝试过的，但根本不起作用。

```
$(function () {

   $(document).on('click', '.expandcollapse', function(e) {

     $(this).removeClass('icon-white icon-minus-sign');
     $('.collapse').each(function(index) {
       $(this).collapse("toggle");
     });

     if ($(this).html() == "<i class=\"icon-white icon-plus-sign\"></i>") {
        $(this).removeClass('icon-white icon-plus-sign');
        $(this).addClass('icon-white icon-minus-sign');
        //$(this).html("<i class=\"icon-white icon-minus-sign\"></i> Collapse All");
     }
     else {
        $(this).addClass('icon-white icon-plus-sign');
        $(this).removeClass('icon-white icon-minus-sign');

     } 
    });
}); 
```

这是我的html（我使用的是haml语法）

```
 %i.icon-white.icon-plus-sign
    Expand All
  %i.icon-white.icon-minus-sign
    Collapse All 
```

更新：这是我尝试过但无法使其工作的更多内容。 [http://jsfiddle.net/HqXMN/11/](http://jsfiddle.net/HqXMN/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:29:53.740

首先，我建议您在 if 语句中使用 jQuery `.is()`( [http://api.jquery.com/is/](http://api.jquery.com/is/) )，这样您的代码会更加灵活。那么，我想这`toggleClass`也对你有用。我没有做太多，但这是一个开始：

JS：

```
$(function () {
    $(document).on('click', '.expandcollapse', function (e) {

        $('.collapse').each(function (index) {
            $(this).collapse("toggle");
        });

        if ($(this).is('.icon.white-icon .iconplus-sign')) {
            $(this).toggleClass('is-collapsed');
        } else {
            $(this).toggleClass('is-collapsed');

        }
    });
}); 
```

CSS：

```
.expandcollapse .icon-plus-sign {
    display:block;
}
.expandcollapse .icon-minus-sign {
    display:none;
}
.is-collapsed .icon-plus-sign {
    display:none;
}
.is-collapsed .icon-minus-sign {
    display:block;
} 
```

在这里演示：http: [//jsfiddle.net/pavloschris/HqXMN/13/](http://jsfiddle.net/pavloschris/HqXMN/13/)

我希望它有所帮助。

# asp.net-mvc - Html.RenderAction 引发 TextWriter 错误

> ID：15253721
> 
> 赞同：0
> 
> 时间：2013-03-06T17:12:24.617
> 
> 标签：asp.net-mvc

我是使用 MVC 的新手。在我的母版页中，我有以下代码

```
var strAppThemes = <%= Html.RenderAction("PickupThemes", "Header") %>; 
```

我的 HeaderController 定义如下：

```
public class HeaderController : Controller
{
    public ViewResult Index()
    {
        return View(PickupThemes());
    }

    public string PickupThemes()
    {
         return "Hello Lavanya Deepak!";
    }
} 
```

当我使用该标题浏览从该母版页派生的 aspx 页面时，它会引发以下错误

> 编译器错误消息：CS1502：“System.IO.TextWriter.Write(char)”的最佳重载方法匹配有一些无效参数
> 
> 第 18 行： var strAppThemes = <%= Html.RenderAction("PickupThemes", "Header") %>;

我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:19:15.727

返回类型其实还是一个ActionResult，只是一个Content的ActionResult。如下所示。

```
public ActionResult PickupThemese() {
    return Content("Hello Lavanya Deepak!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:35:29.980

我现在处理了不同的路线。现在我不再使用 <% 语法，而是将请求发送到控制器/方法并捕获输出。

——基于汤姆的建议。

不确定这是否是最好的方法，因为它会产生额外的 http 请求。如果有人能解释为什么第 18 行： var strAppThemes = <%= Html.RenderAction("PickupThemes", "Header") %>; 不工作会很棒。

# c# - 从 UserAgent 字符串创建 HttpBrowserCapabilitiesBase

> ID：15253724
> 
> 赞同：8
> 
> 时间：2013-03-06T17:12:33.073
> 
> 标签：c#, .net, http

所以[HttpRequestBase](http://msdn.microsoft.com/en-us/library/system.web.httprequestbase.aspx)类有一个[Browser 属性](http://msdn.microsoft.com/en-us/library/system.web.httprequestbase.browser.aspx)，它返回一个[HttpBrowserCapabilitiesBase](http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilitiesbase.aspx)。我们目前在一些 MVC 基础架构代码中使用此属性来获取诸如浏览器名称和版本号（用于输出到日志）之类的内容。

我们还有一个使用[ServiceStack](http://www.servicestack.net/)的 api，我希望能够将它连接到我们现有的基础设施中。唯一缺少的是能够从 UserAgent 标头中解析浏览器名称和版本（感谢 IHttpRequest.UserAgent），但需要一种方法来解析它。

我的问题-是否可以仅使用 UserAgent 字符串以某种方式创建 HttpBrowserCapabilitiesBase ？我在 msdn 上看到的唯一可用子类型是[HttpBrowserCapabilitiesWrapper](http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilitieswrapper.aspx)，其唯一的 ctor 是另一个 HttpBrowserCapabilitiesBase。

我在想这个类可能只是解析 UserAgent 字符串，那么为什么没有 ctor(string) 呢？是否有我看不到的子类型、工厂或静态方法可以实现这一点？

一般来说，我这样做只是为了懒惰——当我知道.Net 具有他们只是隐藏它的能力时，我不想编写/查找另一个 UserAgent 解析器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T17:29:51.807

我只需要自己做这件事。这是我尝试过的。它是从 反编译的`System.Web`，但仍然依赖于该库。我仍在测试它，但也许它可以帮助你：

```
public class BrowserCapabilities
{

    public static HttpBrowserCapabilities 
        GetHttpBrowserCapabilities(NameValueCollection headers, string userAgent)
    {
        var factory = new BrowserCapabilitiesFactory();
        var browserCaps = new HttpBrowserCapabilities();
        var hashtable = new Hashtable(180, StringComparer.OrdinalIgnoreCase);
        hashtable[string.Empty] = userAgent;
        browserCaps.Capabilities = hashtable;
        factory.ConfigureBrowserCapabilities(headers, browserCaps);
        factory.ConfigureCustomCapabilities(headers, browserCaps);
        return browserCaps;
    }
} 
```

去测试：

```
var features = BrowserCapabilities.GetHttpBrowserCapabilities(null, 
    "Mozilla/4.0    (compatible; MSIE 7.0; Windows NT 6.0)");
Console.WriteLine(features.Browser); 
```

# objective-c - UIView 动画带弓形，不在一条直线上

> ID：15253725
> 
> 赞同：0
> 
> 时间：2013-03-06T17:12:34.130
> 
> 标签：objective-c, animation, uiview, uiviewanimation

我想让我的动画带有弓形而不是直线。
这是我的代码：

```
UIImageView *logoImageView = [[UIImageView alloc] initWithFrame:CGRectMake(-125, 100, 125, 125)];
    logoImageView.image = logoImage;
    logoImageView.contentMode = UIViewContentModeScaleAspectFit;
[self.view addSubview:logoImageView];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:3.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
logoImageView.frame = CGRectMake(screenRect.size.width - 192, 190, logoImageView.frame.size.width, logoImageView.frame.size.height);
[UIView commitAnimations]; 
```

我也试过这个，但它不起作用（它只需要最后一个中心移动）。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:3.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
logoImageView.center = CGPointMake ...
logoImageView.center = CGPointMake ...
logoImageView.center = CGPointMake ... 
```

> 等等

```
logoImageView.frame = CGRectMake(screenRect.size.width - 192, 190, logoImageView.frame.size.width, logoImageView.frame.size.height);
[UIView commitAnimations]; 
```

我怎样才能做到这一点？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T22:40:00.520

正如我在评论中提到的，您将需要`CAKeyframeAnimation`执行多个类似的值。简单的方法是只指定值并指定`calculationMode`它们应该如何插值。如果这不能给你想要的结果，你可以指定任何`CGPath`你想要的视图动画。你正在尝试做的代码看起来像这样。

```
CAKeyframeAnimation *curvedAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
curvedAnimation.duration = 3.0;
curvedAnimation.calculationMode = kCAAnimationCubic;
curvedAnimation.values = @[[NSValue valueWithCGPoint:currentPoint],
                           [NSValue valueWithCGPoint:firstPoint],
                           [NSValue valueWithCGPoint:secondPoint],
                           [NSValue valueWithCGPoint:endPoint]];

curvedAnimation.fillMode = kCAFillModeBackwards; // Show first value before animation begins

logoImageView.layer.position = endPoint; // Change position to end value (Core Animation only performs the animation, it won't change the property you are animating)
[logoImageView.layer addAnimation:curvedAnimation
                           forKey:@"my bow animation"]; 
```

* * *

如果你是 Core Animation 的新手。可以在`QuartzCore.framework`其中找到您必须添加到项目以及`#import <QuartzCore/QuartzCore.h>`代码中的位置。

# colors - 根据范围改变图像的颜色？

> ID：15253726
> 
> 赞同：1
> 
> 时间：2013-03-06T17:12:34.350
> 
> 标签：colors, scheme

我正在尝试制作一个使用图像映射根据范围更改图像颜色的程序。像这样：

```
If the sum of the RGB channels for one pixel = 0 to 181 then the color would be (0 51 76)
If the sum = 182 to 363 then the color would be (217 26 33)
If the sum = 364 to 545 then the color would be (112 150 158)
If the sum = 546 to 765 then the color would be (252 227 166) 
```

现在，这是我到目前为止所拥有的：

```
(define (sum p)
  (image-map
   (lambda (c)
    (+ (color-ref c 'red) (color-ref c 'green) (color-ref c 'blue)))
   p))

(define color-range
  (lambda (c)
    (cond
      [(< (sum c) 181) (color 0 51 76)]
      [(and (>= (sum c) 182) (<= (sum c) 363)) (color 217 26 33)]
      [(and (>= (sum c) 364) (<= (sum c) 545)) (color 112 150 158)]
      [(and (>= (sum c) 546) (<= (sum c) 765)) (color 252 227 166)]))) 
```

所以，我做了一个辅助函数来计算每个像素的总和。当我运行颜色范围时，我收到一条错误消息：

图像映射中的异常：#[color 255 255 255] 类型不正确，应为图像

帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:05:46.040

`sum`像素或图像的预期输入是什么？如果它是一个像素，为什么要使用它来遍历它`image-map`？如果是图像，为什么要添加其所有像素的所有颜色分量并将其设置*为*新像素？

我相信这更接近您的意图（我无法确定当前问题中的代码片段）；还注意到我修复了几个错误`color-range`：

```
(define sum
  (lambda (c)
    (+ (color-ref c 'red)
       (color-ref c 'green)
       (color-ref c 'blue))))

(define color-range
  (lambda (c)
    (cond
      [(<= 0   (sum c) 181) (color 0 51 76)]
      [(<= 182 (sum c) 363) (color 217 26 33)]
      [(<= 364 (sum c) 545) (color 112 150 158)]
      [else                 (color 252 227 166)])))

(define change-colors
  (lambda (image)
    (image-map (lambda (pixel)
                 (color-range pixel))
               image))) 
```

当然，上述内容可以进一步优化（例如，通过删除对 的多次调用`sum`，并`color-range`直接传递给`image-map`等），但首先，让我们确保上述内容有效并且您了解它在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:23:36.910

您将图像和颜色混为一谈（您正在调用`sum`颜色`sum`，但似乎需要图像）。对你的类型更加明确。例如：

```
(define (color-intensity c)
  (+ (color-ref c 'red) (color-ref c 'green) (color-ref c 'blue)))

(define (remap-color c)
  (let ((intensity (color-intensity c)))
    (cond [(<=   0 intensity 181) ...]
          [(<= 182 intensity 363) ...]
          ...)))

(define (remap-image i)
  (image-map remap-color i)) 
```

# python - 检查字典中是否存在某个项目，这是一种不好的做法吗？

> ID：15253727
> 
> 赞同：2
> 
> 时间：2013-03-06T17:12:36.043
> 
> 标签：python, dictionary, exception-handling

这段代码在 python 中并且工作得很好：

```
# tests if class exists in the dictionary attrs
try:
    self.attrs['class']
# if it doesnt python will throw an exception
except KeyError:
    self.attrs['class'] = "someclass"
# else it is defined, so we concat someclass to previous value
else:
    self.attrs['class'] = "someclass %s" % self.attrs['class'] 
```

虽然，恐怕这不是一个好习惯，因为如果 python 有更新并更改抛出的异常名称，它可能会停止工作。这是一个不好的做法吗？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:15:01.957

您在那里进行的查找比您需要的要多得多......在这种情况下，您可能会执行以下操作：

```
self.attrs['class'] = 'someclass %s' % self.attrs.get('class','') 
```

这会给你：

```
'someclass ' 
```

但是，如果`'class'`密钥不在您的字典中（与以前不同的一个空格）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:22:06.897

@mgilson 的回答很棒。这是另一种可能更容易理解并解决最后一个空间问题的方法：

```
if 'class' in self.attrs:
    self.attrs['class'] = "someclass %s" % self.attrs['class']
else:
    self.attrs['class'] = "someclass" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T17:23:34.710

当您可以使用成员资格测试时，为什么还要依赖异常：

```
# tests if class exists in the dictionary attrs
if 'class' in self.attrs:
    self.attrs['class'] = "someclass %s" % self.attrs['class']
else:
    self.attrs['class'] = "someclass" 
```

或者至少，删除 noop 尝试：

```
# tests if class exists in the dictionary attrs
try:
    self.attrs['class'] = "someclass %s" % self.attrs['class']
except KeyError:
    self.attrs['class'] = "someclass" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T17:15:29.490

此代码效率低下，因为在成功路径上它仍然会查找原始`'class'`值两次。试试这个

```
try:
    v = self.attrs['class']
    self.attrs['class'] = "someclass %s" % v
except KeyError:
    self.attrs['class'] = "someclass" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T17:16:28.897

异常的类型不会改变，但有两种可能更好的解决方案：

1.  您可以使用`attrs.get('class', 'someclass')`，即如果找不到密钥，则提供默认值

2.  扩展`UserDict`和覆盖`__missing__()`：

    ```
    class ListDict(UserDict):
        def __missing__(key):
            return ['someclass'] 
    ```

这为您提供了一个字典，该字典会自动为所有丢失的键创建一个新列表。您现在可以像这样使用它：

```
self.attrs['class'].append(v) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T17:24:21.573

我认为异常的名称不应该改变，但如果您需要在字典上执行那种逻辑（如果它不存在则添加新元素或更新），也可以像这样实现以下（是一个例子，我希望它有所帮助）：

```
if not "class" in self.attrs:

   self.attrs['class'] = 'newclass'
else:
    self.attrs['class'] = "someclass %s" % self.attrs['class'] 
```

条件的第一部分检查元素是否在字典的键列表中。作为一种“成语”，这应该对您有用。问候。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T17:24:41.773

如果您自己创建 attrs 字典，则可以使用[DefaultDict](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

attrs = defaultdict(str)

attrs['class'] = "someclass %s" % attrs['class'] 
```

# ruby-on-rails - 在 rails active 支持中对 ajax 请求的参数进行编码会引发 Encoding::CompatibilityError

> ID：15253729
> 
> 赞同：2
> 
> 时间：2013-03-06T17:12:41.697
> 
> 标签：ruby-on-rails, ruby, activesupport

我有一个运行 ruby​​ 1.9.2p320 和 rails 3.0.20 的应用程序（我无法更新这个！）

通过正常的 POST 请求发送常见字符和特殊字符（如 ä ü ö）可以正常工作。通过 AJAX 请求将字符从 A 发送到 Z 也可以正常工作。

但是通过 AJAX 发送特殊字符（如 ä ü ö）会使我的应用程序崩溃。

我的回溯显示问题似乎在于解析 active_support 中的参数。

一个示例请求：

```
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Connection:keep-alive
Content-Length:60
Content-Type:application/json
X-Requested-With:XMLHttpRequest

Payload: {status_message":{"message":"fghfghfghfhfÃ¶"}} # (I found out that it seems to be normal that the encoding messes up here, other rails apps can handle it) 
```

堆栈跟踪是这样说的：

```
DEBUG rails[14870]: Error occurred while parsing request parameters.
Contents:
FATAL rails[14870]: Encoding::CompatibilityError (incompatible character encodings: UTF-8 and ASCII-8BIT):
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:330:in `[]='
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:330:in `unquote'
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:251:in `strtok'
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:215:in `tok'
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:178:in `lex'
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:46:in `decode'
  activesupport (3.0.20) lib/active_support/json/backends/okjson.rb:612:in `decode'
  activesupport (3.0.20) lib/active_support/json/decoding.rb:14:in `decode'
  actionpack (3.0.20) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.0.20) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/flash.rb:182:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/cookies.rb:302:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/callbacks.rb:46:in `block in call'
  activesupport (3.0.20) lib/active_support/callbacks.rb:416:in `_run_call_callbacks'
  actionpack (3.0.20) lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.7) lib/rack/sendfile.rb:106:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
  rack (1.2.7) lib/rack/runtime.rb:17:in `call'
  activesupport (3.0.20) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.7) lib/rack/lock.rb:13:in `block in call'
  <internal:prelude>:10:in `synchronize'
  rack (1.2.7) lib/rack/lock.rb:13:in `call'
  actionpack (3.0.20) lib/action_dispatch/middleware/static.rb:30:in `call'
  railties (3.0.20) lib/rails/application.rb:168:in `call'
  railties (3.0.20) lib/rails/application.rb:77:in `method_missing'
  railties (3.0.20) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.2.7) lib/rack/content_length.rb:13:in `call'
  rack (1.2.7) lib/rack/handler/webrick.rb:52:in `service'
  /.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service'
  /.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:70:in `run'
  /.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/server.rb:183:in `block in start_thread'
INFO rails[14870]: Rendered /.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.0.20/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.3ms)
INFO rails[14870]: Rendered /.rvm/gems/ruby-1.9.2-p320/gems/actionpack-3.0.20/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms) 
```

如何解决这个问题？我不知道如何在 Rails 中更改编码。因为我没有执行此操作的对象。

# android - Android 警报管理器设置奇怪的时间表

> ID：15253732
> 
> 赞同：0
> 
> 时间：2013-03-06T17:12:57.623
> 
> 标签：android

我在尝试安排我的服务每隔一段时间运行时遇到问题。我已经让我的服务在启动时启动，但是无论什么原因，当计划开始时，服务方式启动了很多次。

```
public class PPPService extends Service {

  public void onStart(Intent intent, int startId) {
      //TODO do something useful
      Log.v("TEST", "Service started");

      // Schedule the alarm!
     PendingIntent mAlarmSender = PendingIntent.getService(this, 0, intent, 0);
      AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
      am.set(AlarmManager.ELAPSED_REALTIME_WAKEUP, AlarmManager.INTERVAL_FIFTEEN_MINUTES, mAlarmSender);  

      this.stopSelf();
      }
} 
```

**已解决：**这是通过创建调度程序而不是让我的服务调度本身解决的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:30:25.477

您正在 PendingIntent 中发送您的服务的上下文，该上下文将很快与启动它的意图一起被终止。我想这可能是非常不可预测的。尝试像这样获取待处理的意图：

```
mAlarmSender = PendingIntent.getService(getApplicationContext(), 0, new Intent(getApplicationContext(), PPPService.class), 0); 
```

# ruby-on-rails-3 - Rails 3 可安装引擎在 ApplicationController 中缺少protect_from_forgery 调用

> ID：15253745
> 
> 赞同：2
> 
> 时间：2013-03-06T17:13:29.653
> 
> 标签：ruby-on-rails-3, rails-engines

当创建一个新的 Rails 应用程序时，它的 ApplicationController 包含对protect_from_forgery 的调用。但是在创建可挂载引擎时，命名空间的 ApplicationController 默认不包含该调用。这样做的原因是什么？

# excel - excel 如果顶行中的最大值，然后 excel 在下一行中显示来自同一列的值

> ID：15253749
> 
> 赞同：-1
> 
> 时间：2013-03-06T17:13:46.003
> 
> 标签：excel, vba

我需要excel在下一行的单元格中找到一个值，回到前一个单元格的最大值。例子：

```
-4%  -6%   2%    0.34%
 4%   2%   1%   -0.50%
 3%  -1%   3%      -1% 
```

上面你可以看到顶行的最大值是 2%。我擅长做的只是告诉我 1% 的下一行。然后对于下一行，我需要 excel 告诉我 3%，因为中间行的最大值是 4%

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:54:19.667

```
=INDEX(A2:D2,1,MATCH(MAX(A1:D1),A1:D1,FALSE)) 
```

从内到外：MAX 函数返回行中的最大值。MATCH 函数返回最大值的位置。INDEX 函数从下一行返回相同的位置。

# c# - int 可以从 char 赋值吗？

> ID：15253755
> 
> 赞同：5
> 
> 时间：2013-03-06T17:13:52.857
> 
> 标签：c#, .net, reflection

我注意到

```
int number = 'a'; 
```

是一个健全的 C# 语句

但是那个表情

```
typeof(int).IsAssignableFrom(typeof(char)) 
```

返回假。这不是矛盾吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T17:16:12.057

> 这不是矛盾吗？

没有。C# 提供了从`char`to的隐式转换`int`，但是如果您查看[`Type.IsAssignableFrom`](http://msdn.microsoft.com/en-us/library/system.type.isassignablefrom.aspx)它的文档说明返回值：

> 如果 c 和当前 Type 表示相同的类型，或者如果当前 Type 在 c 的继承层次结构中，或者如果当前 Type 是 c 实现的接口，或者如果 c 是泛型类型参数并且当前 Type 表示，则为 true c 的约束之一，或者如果 c 表示值类型并且当前 Type 表示`Nullable<c>`. 如果这些条件都不为真，或者 c 为空，则为假。

这些条件都不成立，所以它返回`false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:16:46.230

你问的问题略有不同。C# 中的可分配**值**集通常比CLR 中 的可分配**类型集更宽松。**

# android - 复选框使文本变灰

> ID：15253759
> 
> 赞同：0
> 
> 时间：2013-03-06T17:14:04.737
> 
> 标签：android, checkbox

我对复选框有疑问。如果未勾选复选框但我无法这样做，我正在尝试将某些文本变灰。我以前这样做过，但忘记了，我的代码有点搞砸了，因为我没有保存它的副本。

这是java。

```
package com.example.mobilebillforecaster;

import com.example.mbf.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.TextView;

  public class Eticorporate extends Activity {
protected void onCreate(Bundle Bundle)
{
 super.onCreate(Bundle);
 setContentView(R.layout.eti_corporate);

((CheckBox)findViewById(R.id.cRoam)).setOnClickListener(new View.OnClickListener()
 {

public void onClick(View v)
  {
    if (((CheckBox)v).isChecked())
    {
      this.tbDataroam.setEnabled(true);
      this.bIntroam.setEnabled(true);
      this.dataroam.setEnabled(true);
      return;
    }
    this.tbDataroam.setEnabled(false);
    this.bIntroam.setEnabled(false);
    this.dataroam.setEnabled(false);
  }
 }); 
```

这是 XML

```
 <CheckBox
    android:id="@+id/cRoam"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/datalocal"
    android:layout_marginTop="5.0dip"
    android:checked="false"
    android:onClick="onCheckboxClicked"
    android:text="@string/checkroam" />

  <TextView
    android:id="@+id/dataroam"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/datalocal"
    android:layout_below="@+id/bIntroam"
    android:layout_marginTop="18.0dip"
    android:enabled="false"
    android:text="@string/data_roam"
    android:textAppearance="?android:textAppearanceMedium" />

 <ToggleButton
    android:id="@+id/tbDataroam"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/bIntroam"
    android:layout_marginTop="7.0dip"
    android:layout_toRightOf="@id/nationalmins"
    android:enabled="false"
    android:text="@string/data_roam" />

<Button
    android:id="@+id/bIntroam"
    android:layout_width="250.0dip"
    android:layout_height="50.0dip"
    android:layout_alignRight="@id/bundle"
    android:layout_below="@id/cRoam"
    android:enabled="false"
    android:text="@string/int_roam" /> 
```

我知道这可能是一件简单的事情，但我就是想不通。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:20:44.567

我会推荐使用`OnCheckedChangeListener`代替。

看起来像这样：

```
((CheckBox)findViewById(R.id.cRoam)).setOnCheckedChangeListener(new OnCheckedChangeListener()
{  
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if (isChecked)
        {
            this.tbDataroam.setEnabled(true);
            this.bIntroam.setEnabled(true);
            this.dataroam.setEnabled(true);
            return;
        }
        this.tbDataroam.setEnabled(false);
        this.bIntroam.setEnabled(false);
        this.dataroam.setEnabled(false);
    }
}); 
```

编辑：

在尝试访问它们*之前*，您需要获取对这 3 个小部件的引用：

```
ToggleButton tbDataroam = (ToggleButton) findViewById(R.id.tbDataroam); 
```

对其他 2 个小部件重复...

# excel - 带有可选条件的 Vlookup

> ID：15253765
> 
> 赞同：0
> 
> 时间：2013-03-06T17:14:15.503
> 
> 标签：excel, vlookup

我正在尝试使用可选标准查找数据。

例如输入数据可能是：

```
Col1  Col2
Pig   Mouse 
```

和查找表：

```
Col 1   Col2    Col3
Pig             1
Pig     Mouse   2 
```

所以这个例子将返回 2。如果只有 Pig 在输入数据中，它将返回 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:50:17.030

```
=SUMPRODUCT(($A$7:$A$8=A2)*($B$7:$B$8=B2)*($C$7:$C$8)) 
```

这将返回来自 columnC 的每个值，其中 ColumnA = A2 和 ColumnB = B2，即使这些值为空白。

# html - XSLT 标题自动生成

> ID：15253767
> 
> 赞同：0
> 
> 时间：2013-03-06T17:14:19.653
> 
> 标签：html, xml, email, xslt

当谈到 XML/XSLT 电子邮件构建时，我是相当绿色的。我无法弄清楚如何正确调用“CampaignName”并将其放入标签中。

我的 XML 是这样的：

```
<KANARoot>
<EventRequest Id="" CompanyName="default" CampaignName="Statement_Notification">
<Customer  KeyField="alt_customer_id" alt_customer_id="-1" EmailAddress="customer@gmail.com" First_Name="Customer" Last_Name="Name" Address_Line1="" Address_Line2="" City="" State="" Postal_Code="">
<CustomerAttribute      Name="workOrder"/>
<CustomerAttribute      Name="soaMessageId">10</CustomerAttribute>
<CustomerAttribute      Name="accountType">R</CustomerAttribute>
<CustomerAttribute      Name="accountEsbNamespace">8448200010063009</CustomerAttribute>
<CustomerAttribute      Name="billingID">202</CustomerAttribute>
<CustomerAttribute      Name="divisionId">CAR</CustomerAttribute>
<CustomerAttribute      Name="workOrderTimestamp">2013-01-31T10:01:41.109-05:00</CustomerAttribute>
</Customer>
<Event CampaignName="Statement_Notification">
<ExternalXML>
<CustomerInfo>
<CustomerName>Customer Name</CustomerName>
<CustomerBusinessName>Customer</CustomerBusinessName>
<PaperLessFlag>Paperless</PaperLessFlag>
<CustomerEmailAddress>sandhya@gmai.com</CustomerEmailAddress>
</CustomerInfo>
<StatementInfo>
<AccountNumber>8448200000000001</AccountNumber>
<StatementCode/>
<StatementDate>01/31/2013</StatementDate>
<StatementDueDate>01/31/2013</StatementDueDate>
<StatementFromDate>01/31/2013</StatementFromDate>
<StatementToDate>01/31/2013</StatementToDate>
<AmountDue>1000.00</AmountDue>
</StatementInfo>
<DivisionInfo>
<DivisionID>CAR.202</DivisionID>
<BillingSystem>ACP</BillingSystem>
</DivisionInfo>
</ExternalXML>
</Event>
</EventRequest> 
```

到目前为止，我的 XLST 是：

```
<title><xsl:value-of select="EventRequest/Event/CampaignName" /></title> 
```

但这行不通。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:17:50.803

`CampaignName`是一个属性，而不是 的子元素`Event`，因此您需要一个 XPath，例如`EventRequest/Event/@CampaignName`

# ruby-on-rails - 配置轮胎以与 Bonsai ElasticSearch Heroku 插件一起使用

> ID：15253773
> 
> 赞同：0
> 
> 时间：2013-03-06T17:14:36.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, elasticsearch, tire

所以我有一个 rails 3.2 应用程序。我创建了一个索引。我按照本指南：[https](https://gist.github.com/nz/2041121) : //gist.github.com/nz/2041121 创建了一个 bonsai.rb 文件，`config/initializers/bonsai.rb` 如下所示：

```
ENV['ELASTICSEARCH_URL'] = ENV['BONSAI_URL']

# Optional, but recommended: use a single index per application per environment.
# Caveat: This convention not be entirely supported throughout Tire's API.
app_name = Rails.application.class.parent_name.underscore.dasherize
app_env = Rails.env
INDEX_NAME = "#{app_name}-#{app_env}" 
```

但是我没有工作，这是heroku日志的输出：

```
2013-03-06T17:04:54+00:00 app[web.1]: Processing by SchoolsController#index as HTML
2013-03-06T17:04:54+00:00 app[web.1]: Started GET "/trafikskola?utf8=%E2%9C%93&query=Malm%C3%B6" for 192.165.96.102 at 2013-03-06 17:04:54 +0000
2013-03-06T17:04:54+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "query"=>"Malmö"}
2013-03-06T17:04:58+00:00 heroku[router]: at=info method=GET path=/trafikskola?utf8=%E2%9C%93&query=Malm%C3%B6 host=stormy-escarpment-2346.herokuapp.com fwd="192.165.96.102" dyno=web.1 queue=0 wait=0ms connect=1ms service=3106ms status=500 bytes=643
2013-03-06T17:04:58+00:00 app[web.1]:
2013-03-06T17:04:58+00:00 app[web.1]:   app/models/school.rb:19:in `search'
2013-03-06T17:04:58+00:00 app[web.1]:   app/controllers/schools_controller.rb:10:in `index'
2013-03-06T17:04:58+00:00 app[web.1]: Completed 500 Internal Server Error in 3073ms
2013-03-06T17:04:58+00:00 app[web.1]: Errno::ECONNREFUSED (Connection refused - connect(2)):
2013-03-06T17:04:58+00:00 app[web.1]:
2013-03-06T17:04:58+00:00 app[web.1]: 
```

**我的问题：**

1.  我应该`ELASTICSEARCH_URL`在 bonsai.rb 文件中放一些东西吗？如果是，那是什么？
2.  我已经创建了一个本地索引，这是否意味着什么？
3.  或者是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:02:05.943

这`config/initializers/bonsai.rb`是正确的，问题是我也必须在生产模式下对其进行索引。

所以我这样做了：

```
heroku rake environment tire:import CLASS=School FORCE=true 
```

它奏效了。

# javascript - 如何将 AngularJS 应用程序连接到 Kinvey？

> ID：15253778
> 
> 赞同：1
> 
> 时间：2013-03-06T17:14:54.780
> 
> 标签：javascript, angularjs, client-side, kinvey

如何以简单的方式将 AngularJS 应用程序连接到 Kinvey 后端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:49:11.250

免责声明：我在金维工作。

我在空闲时间一直在开发一个使用 Angular 的应用程序，您可以查看我创建的与 Kinvey 通信的服务的来源。[https://github.com/InnCrisis/InnCrisis/blob/master/public/coffeescripts/adminServices.coffee](https://github.com/InnCrisis/InnCrisis/blob/master/public/coffeescripts/adminServices.coffee)

处理 Kinvey 中新用户注册的一小段 javascript。

```
register = function(username, password, name) {
  var deferred = $q.defer();
  new Kinvey.User.create({
    username: username,
    password: password,
    name: name
  }, {
    success: function(user) {
      $rootScope.$apply(null, function() {
        deferred.resolve(user.toJSON(true));
      });
    },
    error: function(e) {
      $rootScope.$apply(null, function() {
        deferred.reject(e);
      });
    }
  });
  return deferred.promise;
} 
```

由于 Kinvey javascript API 会进行 angular 无法跟踪的更改，因此您需要对结果执行 $scope.$apply。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T19:00:06.120

根据对他们网站的快速浏览，Kinvey 似乎有一个 RESTful API，这使得事情变得相当简单。跨域，您需要确定 Kinvey 服务器是否[符合 CORS](http://www.html5rocks.com/en/tutorials/cors/)（返回允许跨域访问的适当标头），否则，您需要使用 Angular 的 $http.jsonp 来获取数据（ jsonp 只支持 GET）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T10:59:35.897

谈话有点晚了，但我已经为 AngularJS 创建了一个库，它使用 REST API 为 Kinvey 提供全面支持。

[https://github.com/ninjatronic/angular-kinvey](https://github.com/ninjatronic/angular-kinvey)

# iphone - 使用 NSPredicate 对 NSArray 进行排序，然后存储在一个新数组中

> ID：15253779
> 
> 赞同：0
> 
> 时间：2013-03-06T17:14:58.057
> 
> 标签：iphone, ios, objective-c, core-data, nspredicate

我有一个`UITableView`通过数组（`tableArray`）填充的，它从核心数据中填充。

每个`UITableViewCell`在创建时都被分配一个数字，并且这些数字存储在一个数组中。( `numberArray`)

当用户重新排序行时，数字会在数组中移动（`tableView`当然与

所以这里使用了两个 Mutable 数组。

保存的`numberArray`数字（或顺序）`TableViewCells`。我需要对包含`UITableViewCell`'s text ( `tableArray`) 的数组进行排序，以反映所`numberArray`包含的相同顺序。

另外，这很重要：正如我之前所说，每个单元格都分配了一个数字，这个数字存储在`numberArray`,

我需要对两个数组进行排序以在同一位置保存相同的值。

例如：

`tableArray`持有一些物品：

```
1) hi
2) whats Up
3) this
4) is cool! 
```

如您所见，这里的每个对象都分配了一个数字 1-4。并且这些数字中的每一个都被添加到`numberArray`.

用户可以移动单元格，因此显然数字的顺序会改变。

所以当视图加载时，我需要得到`numberArray`它是否是的确切顺序

```
1,2,3,4 or 2,4,3,1 
```

我需要排序以反映与 视图加载时`tableArray`相同的顺序，如果顺序为 2、3、4、1，我希望将顺序设置为`numberArray``numberArray's``tableArray's`

2“whats up”、3“this”、4“很酷！”、1“hi”。

我相信我可以通过`NSPredicate`.

任何帮助是极大的赞赏！

**编辑**

cellForRow：

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString * identifier = @"identifier";

self.myCell = [tableView dequeueReusableCellWithIdentifier:identifier];

if (self.myCell == nil) {
    self.myCell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier];
}

HandgunAmmo *handgunAmmo = [self.tableArray objectAtIndex:indexPath.row];
self.myCell.brandLabel.text = handgunAmmo.brand;
self.myCell.caliberLabel.text = handgunAmmo.caliber;
self.myCell.numberOfRoundsLabel.text = handgunAmmo.numberOfRounds;
return self.myCell;
} 
```

在我的`viewWIllAppear`方法中：

-(void)viewWillAppear:(BOOL)动画{

```
if (self.context == nil)
{
    self.context = [(RootAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];
}
NSFetchRequest *request = [[NSFetchRequest alloc]init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"HandgunAmmo" inManagedObjectContext:self.context];
[request setEntity:entity];
NSError *error;
NSMutableArray *array = [[self.context executeFetchRequest:request error:&error] mutableCopy];
    [self setTableArray:array];

[self.ammoTable reloadData];
[super viewWillAppear:YES];
} 
```

因此，数组在更改时不保持持久性的原因是因为我从核心数据加载数据，并且我调用`[self setTableArray:array];`它将核心数据中的所有数据重新加载到数组中，然后用数组填充表格视图。所以我需要能够`array`在我设置它之前对它进行排序等于`self.tableArray`。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:03:56.247

为什么不`tableArray`保持不变，并将`numberArray`用作另一个数组的*索引。*

您将`numberArray`使用`0, 1, 2, ..., n-1`

```
numberArray = [NSMutableArray array];
for (NSUInteger i = 0; i < [tableArray count]; i++) {
     [numberArray addObject:[NSNumber numberWithUnsignedInteger:i]];
} 
```

当您需要一个项目时，例如 in `cellForRowAtIndexPath`，您可以通过索引访问它：

```
NSUInteger i = [[numberArray objectAtIndex:row] unsignedIntegerValue];
NSString *item = [tableArray objectAtIndex:i]; 
```

现在您需要重新排序`numberArray`唯一，并且更改将自动反映在表格视图中。

*更新：*处理表格视图中核心数据对象重新排序的一个很好的解决方案可以在这里找到：[UITableView Core Data reordering](https://stackoverflow.com/questions/2360938/uitableview-core-data-reordering?lq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:26:45.510

```
NSMutableArray *unsortedArray = [NSMutableArray arrayWithObjects:@"1) hi",@"2) whats Up",@"3) this",@"4) is cool!",nil];
NSArray *guideArray = [NSArray arrayWithObjects:@"2",@"4",@"3",@"1", nil];

for(int i=0; i< [guideArray count];i++)
{
    for(int j=0; j< [unsortedArray count];j++)
    {
        if([[[unsortedArray objectAtIndex:j] substringToIndex:[[guideArray objectAtIndex:i] length]] isEqualToString:[guideArray objectAtIndex:i]])
        //if([[unsortedArray objectAtIndex:j] containsObject:[guideArray objectAtIndex:i]])
        {
            [unsortedArray exchangeObjectAtIndex:j withObjectAtIndex:i];
            break;                
        }
    }
}

NSLog(@"%@",unsortedArray); 
```

**或者**

```
guideArray = @[@"2",@"4",@"3",@"1"];
unsortedArray = [@[@[@"1) hi"],
                   @[@"2) wats up "],
                   @[@"3) this,"],
                   @[@"4) cool"]] mutableCopy];

[unsortedArray sortUsingComparator:^(id o1, id o2) {
    NSString *s1 = [o1 objectAtIndex:0];
    s1 = [s1 substringToIndex:[s1 rangeOfString:@")"].location];
    NSString *s2 = [o2 objectAtIndex:0];
    s2 = [s2 substringToIndex:[s2 rangeOfString:@")"].location];
    NSInteger idx1 = [guideArray indexOfObject:s1];
    NSInteger idx2 = [guideArray indexOfObject:s2];
    return idx1 - idx2;
}];
NSLog(@"%@",unsortedArray); 
```

试试这个希望这部分帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:31:14.410

我看不到用谓词解决它的方法

```
NSArray *stringArray = @[@"hi", @"what's up?", @"this", @"is cool"];
NSArray *numberArray = @[@2, @4, @3, @1];
NSMutableArray *combinedArray = [NSMutableArray array];

//connect string with the numbers of there new position
[numberArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSString *string =stringArray[[obj integerValue]-1];
    [combinedArray addObject:@[string, obj]];
}];

NSMutableArray *orderedArray = [NSMutableArray array];
[combinedArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    [orderedArray addObject:obj[0]];
}];

NSLog(@"%@", orderedArray); 
```

*结果*

```
(
    "what's up?",
    "is cool",
    this,
    hi  
) 
```

# java - 如何强制 Play 2.1 针对其他 Java 版本进行编译

> ID：15253782
> 
> 赞同：7
> 
> 时间：2013-03-06T17:15:03.660
> 
> 标签：java, scala, compilation, playframework, playframework-2.1

我使用 Java 1.7 开发了一个 Play 应用程序。现在我需要针对 1.6 版本对其进行编译，因为它将在仍然使用 1.6 的另一台主机上执行（我无法更改）

所以我将启动脚本*play*复制到*play-1.6*并以某种方式对其进行了更改，以便它使用 JDK 版本 1.6（我已将其存储在我计算机上的目录中）

在任何目录中执行此修改后的脚本时，我得到所需的信息行

```
play! 2.1.0 (using Java 1.6.0_38 and Scala 2.10.0), http://www.playframework.org 
```

当我在我的项目目录中执行相同的脚本时，我得到了这条线

```
play! 2.1.0 (using Java 1.7.0_09 and Scala 2.10.0), http://www.playframework.org 
```

项目使用 1.7 版的这些信息存储在哪里，我如何强制它针对 1.6 版进行编译？

**更新 1**

Maxime Calmels 建议执行*清理*以最终删除已编译的配置文件。不幸的是，这没有帮助。

**更新 2**

当我在播放控制台中输入*java-home*时，我收到了消息

```
[info] None 
```

所以我创建了一个文件 build.sbt 并添加了内容

```
javaHome := Some(file("/usr/java/jdk1.6.0_38")) 
```

现在启动播放控制台并键入*java-home*时，我得到了这条线

```
[info] Some(/usr/java/jdk1.6.0_38) 
```

但是 play**仍然**针对 1.7 版本进行编译，所以也没有运气。

**更新 3**

我让它工作了......**但**只能通过将 Play 和我的项目复制到应该运行项目的主机并在那里编译它。这不是一个非常优雅的解决方案，我仍然想知道如何在我的机器上本地完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:32:29.697

无论您在何处安装 Play，您都应该能够通过将其替换为以下内容来更改“播放”脚本：

```
if [ -z "$JAVA_HOME" ]; then
    JAVA="java"
else
    JAVA="$JAVA_HOME/bin/java"
fi 
```

这条新线：

```
JAVA="/TheFullJavaPath/bin/java" 
```

那应该这样做。然后该脚本将使用该版本。我建议将其命名为必须播放-java-1.X 之类的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:35:04.547

我认为java版本存储在编译文件中。
您是否尝试在开始 play-1.6 脚本之前**清理您的项目？**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-15T14:40:34.680

我有这个问题，我解决了它`JAVA_HOME`在当前终端会话中设置环境变量。正如指定[的 @Grmpfhmbl](https://stackoverflow.com/users/2782393/grmpfhmbl)。

如果您更改 java 版本使用`sudo update-alternatives --config java`或其他任何东西都没有关系。play 命令总是使用`JAVA_HOME`环境变量来编译项目的源代码。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T22:15:06.673

因为我无法评论：

`JAVE_HOME`1)在开始游戏之前，您是否尝试过在 shell 中进行设置？不要更改播放脚本。如果它要求那里的环境，也可以在其他地方进行。在 bash 中，它看起来像

```
#> export JAVA_HOME="/your/jdk/path"; play 
```

2）您是否尝试过`inspect *:javaHome`在游戏控制台中？如果`javaHome`已在项目中的某个地方明确设置，那应该会告诉你在哪里。对我来说，它看起来像这样：

```
[project] $ inspect javaOptions
[info] Task: scala.collection.Seq[java.lang.String]
[info] Description:
[info]  Options passed to a new JVM when forking.
[info] Provided by:
[info]  */*:javaOptions
[info] Defined at:
[info]  (sbt.Defaults) Defaults.scala:106
[info] Reverse dependencies:
[info]  *:runner
[info] Delegates:
[info]  *:javaOptions
[info]  {.}/*:javaOptions
[info]  */*:javaOptions
[info] Related:
[info]  */*:javaOptions 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-31T15:43:07.530

您是否可以创建一个用于编译的 Ant 脚本？（我必须承认我不熟悉 Play，所以我不知道是否可能）。

这就是我所做的，然后在编译目标中：

```
<target name="compile" depends="prepare" description="Compile Java sources">
  <!-- Compile Java classes as necessary -->
  <javac
    bootclasspath="/path/to/1.6/rt.jar"
    destdir="/path/to/dest" includeantruntime="false" debug="true"
    deprecation="false" optimize="true"
    source="6" target="6" encoding="utf-8">
    <src path="/path/to/source" />
    <classpath refid="compile.classpath" />
  </javac>
</target> 
```

引导类路径是关键。它应该指向 Java 1.6 的安装，特别是文件 rt.jar 的安装。

我不知道我的回答是否应该包括更多关于 Ant 的背景信息。以防万一，Ant 是一个用于创建任务的 Java 库（非常通用）。

Ant：[http](http://ant.apache.org/) ://ant.apache.org/ Ant 初学者教程：http: [//www.comscigate.com/ant/A_beginners_guide_to_Ant.htm](http://www.comscigate.com/ant/A_beginners_guide_to_Ant.htm)

# oop - OOP 设计 - 许多对象每个都与其他对象的有限子集具有独特的交互

> ID：15253783
> 
> 赞同：7
> 
> 时间：2013-03-06T17:15:04.173
> 
> 标签：oop, polymorphism

**如果类 A 与类 B、C 和 D 中的每一个都有唯一的交互，那么交互的代码应该在 A 中还是在 B、C 和 D 中？**

我正在编写一个小游戏，其中许多对象可以与其他对象进行独特的交互。例如，一个`EMP`击中 a`sentry gun`并禁用它。它也可以击中 a`grenade`并引爆它，它也可以击中 a`player`并施加减速效果。

我的问题是，这段代码应该放在 EMP 类中，还是分散在所有其他类中？我的直觉告诉我要多态地执行此操作，以便我只需告诉每个类处理它喜欢的 EMP 罢工，这将允许我添加更多项目并更改它们处理 EMP 的方式，而无需更改 EMP 代码。

但是，EMP 目前只与我的 50 个对象中的大约 4 个交互，因此用空的 RespondToEMP() 调用填充 46 个对象似乎是错误的。这似乎也有点不直观，如果我决定删除 EMP，我需要更改所有其他类，而 EMP 类本身最终会变得非常小。这也意味着如果我想改变 EMP 的行为方式，我需要查看所有不同的类以找到所有可能的用法。此外，如果 EMP 有一些通用效果，例如爆炸，那么这种效果肯定会在 EMP 代码中，远离所有其他将分发的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:17:45.587

你是对的，有一个虚拟方法是一种代码味道。有几种方法可以解决这个问题：

**如果您希望添加更多对象，则用于处理事件的 Switch 语句**效果很好，因为您将避免在添加更多对象时修改事件：

```
enum Event { EMP, Bomb }

class SentryGun {
    void handleEvent(Event e) { switch(e) {
        case EMP: disable();
    }}
    void disable() {}
}
class Grenade {
    void handleEvent(Event e) { switch(e) {
            case EMP: detonate();
    }}
    void detonate() {}
} 
```

**如果您希望添加更多事件，那么访问对象**的事件效果很好，因为您不必修改现在可以对该事件做出反应的每个对象：

```
class EMP {
    void hit(SentryGun object) {
        object.disable();
    }

    void hit(Grenade object) {
        object.detonate();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:09:16.617

您可能需要考虑[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)。如果您有超过 2 件事一起互动，请查看我对[管理对象间关系的回答](https://stackoverflow.com/questions/948564/managing-inter-object-relationships)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:24:18.233

我的想法是这样`sentry gun`，`grenade`并且`player`都应该实现一个通用接口来强制执行该方法`RespondToEMP`。这样，如果您稍后决定其他 46 个对象中的一个可以被 EMP 击中，您将知道实现此接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T21:53:12.073

这不是最优雅的解决方案，但是您可以做的一件事是拥有一个您的对象扩展的基类，该基类具有事件的默认行为，并且如果有事情要做，对象可以覆盖它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T23:51:43.897

在您的情况下，您需要区分可以交互或不能交互的对象。有三个选项：

*   具有可能为空实现的通用接口
*   接口并检查对象是否实现它
*   定义一些带有交互和反应的地图/表格

由于前两个在其他答案中出现，我将描述第三个选项。我们定义映射：Thing x Object -> Command。在这种情况下，EMP_hit 将是 Thing（也许名称可能更好..），可能包含有关其来源的信息。对象将是你的所有东西。命令类似于命令模式（参见[http://en.wikipedia.org/wiki/Command_pattern](http://en.wikipedia.org/wiki/Command_pattern)）。我会将其存储在地图而不是表格中，以仅保留非空命令，并使用一些将在同一类的事物/对象之间共享的字符串 ID 以在此映射中找到正确的条目。

该解决方案的优点是您可以在某个配置文件中定义它或/并在运行时动态更改。无需重新编译即可更改配置

# ios - gamecenter 回合制不按顺序保存比赛数据

> ID：15253785
> 
> 赞同：3
> 
> 时间：2013-03-06T17:15:11.063
> 
> 标签：ios, game-center

即使轮不到我，我是否有机会保存/更新比赛数据？

```
[currentMatch saveCurrentTurnWithMatchData:data completionHandler:^(NSError *error) {
  if (error)
  { }]; 
```

如果还是轮到这个用户，上面的代码可以使用，但是如果不是轮到这个用户呢？如何在两个玩家之间发送数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:11:54.233

试试这个

```
- (void) advanceTurn

{

    NSData *updatedMatchData = [this.gameData encodeMatchData];

    NSArray *sortedPlayerOrder = [this.gameData encodePlayerOrder];

    this.MyMatch.message = [this.gameData matchAppropriateMessage];

    [this.myMatch endTurnWithNextParticipants: sortedPlayerOrder turnTimeOut: GKTurnTimeoutDefault

                  matchData: updatedMatchData completionHandler ^(NSError *error) {

        if (error)

        {

            // Handle the error.

        }

      }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:23:26.073

从 iOS 6.0 开始，您不能。:(

*   您可以在不推进回合的情况下保存比赛数据（假设您是当前玩家）。看 -`saveCurrentTurnWithMatchData:completionHandler:`
*   您可以不按顺序结束游戏。看 -`participantQuitOutOfTurnWithOutcome:withCompletionHandler:`
*   但是，您不能不按顺序更新匹配数据。

[GKTurnBasedMatch 参考](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html)

# regex - 正则表达式星不产生匹配

> ID：15253789
> 
> 赞同：1
> 
> 时间：2013-03-06T17:15:17.797
> 
> 标签：regex, bash

如果没记错的话，我曾经能够做到这一点

```
$ [[ abc123 =~ ([0-9]*) ]]

$ 回声 ${BASH_REMATCH[1]}

```

正如你所看到的，它没有给出带有星号的输出`*`。现在它只有在我使用加号时才有效`+`。

```
$ [[ abc123 =~ ([0-9]+) ]]

$ echo ${BASH_REMATCH[1]}
123 
```

编辑看到更多的陌生感。它将匹配字符串的开头，但不匹配字符串的结尾。

```
$ [[ 123abc =~ ([0-9]*) ]]

$ echo ${BASH_REMATCH[1]}
123 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T17:18:15.590

您的正则表达式返回它找到的第一个匹配项，即位置 0，在“a”之前，它与空字符串匹配。

`*`因为量词很难，因为如果那是整个表达式，它能够匹配空字符串，因此它将匹配每个没有数字匹配的位置。

所以在字符串“abc123”中匹配了 4 次！

```
 a b c 123
^ ^ ^  ^.. 
```

前 3 次很高兴匹配空字符串，第四次匹配数字系列。

# actionscript-3 - 数组连接中的值与字符串不起作用

> ID：15253790
> 
> 赞同：0
> 
> 时间：2013-03-06T17:15:21.337
> 
> 标签：actionscript-3, flash

在下面的代码中，我想将数组中的数据`arr1`与变量中的字符串值连接起来`t`。

```
var t:String;
var arr4:Array = new Array();
for(w;w<i;w++){
    if(max==arr3[w]){
    t=t.concat(",",arr1[w])
    }
}
trace(t); 
```

但我得到这个错误：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。
> 在 final1_fla::MainTimeline/modebtn()

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:19:17.023

该代码根本没有意义， arr4 已初始化但从未使用过，而是使用了 arr3 和 arr1 可能未初始化并导致空对象引用错误。

您的循环正在使用`w`未初始化的循环，并与`i`此处未显示的循环进行比较。

确保您的数组有效并检查 for 循环是否按预期运行。

# regex - bash 3.2 正则表达式模式在使用 =~ 时不匹配

> ID：15253792
> 
> 赞同：2
> 
> 时间：2013-03-06T17:15:25.407
> 
> 标签：regex, bash

我正在尝试在 bash 脚本中匹配一个简单的正则表达式。它的行为与**GNU bash 版本 4.2.24(1)-release (x86_64-pc-linux-gnu)**一样，但与**GNU bash 版本 3.2.25(1)-release (x86_64-redhat-linux-gnu )**

这是代码：

```
 #!/bin/bash

line="[foo]"
[[ $line =~ ^\[.*\]$ ]] && echo "regex matched"
echo "value of \$? : " $?
echo "value of BASH_REMATCH : " $BASH_REMATCH
/bin/bash --version|grep "GNU bash" 
```

这是**GNU bash 版本 4.2.24(1)-release (x86_64-pc-linux-gnu)的输出**

> $的正则表达式匹配
> 值？：BASH_REMATCH 的 0
> 值：[foo]
> GNU bash，版本 4.2.24(1)-release (x86_64-pc-linux-gnu)

这是**GNU bash 版本 3.2.25(1)-release (x86_64-redhat-linux-gnu)的输出**

> 美元的价值？:
> BASH_REMATCH 的 1 个值 :
> GNU bash，版本 3.2.25(1)-release (x86_64-redhat-linux-gnu)

我在这里和其他地方阅读了很多关于**=~**中操作员行为的帖子，但我找不到任何有同样问题的人。我看到 bash 3.2 发生了重大变化，但据我所知，它应该从 3.2 开始工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:23:34.113

看起来像是某种形式的逃避问题。

这在这里有效（bash 版本`3.2.25(1)-release`）：

```
line="[foo]"
bar="^\[.*\]$"
[[ $line =~ $bar ]] && echo "regex matched" 
```

这似乎也有效：

```
[[ $line =~ ^\\[.*\\]$ ]] && echo "regex matched" 
```

# ruby-on-rails - 解密设备密码

> ID：15253796
> 
> 赞同：11
> 
> 时间：2013-03-06T17:15:29.853
> 
> 标签：ruby-on-rails, encryption, devise, passwords

我需要解密设计生成的密码。

例如，我的密码是`test123test`. 设计生成此密码：

```
$2a$10$vGeVVu.E0XGjlNEa0xMCK.R0SEH0aFuyJpefrq01Axz6WSbHApPEu 
```

我需要解密密码并发送`test123test`.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-06T17:29:46.440

你不能，这就是重点。

Bcrypt 将允许您与 进行比较`test123test`，`$2a$10$vGeVVu.E0XGjlNEa0xMCK.R0SEH0aFuyJpefrq01Axz6WSbHApPEu`但它永远不会给您返回纯文本密码。您可能想问如何破解 bcrypt 加密密码（非常难！我认为几乎不可能）

Jose Valim 通过链接到 devise Google Group 的[http://codahale.com/how-to-safely-store-a-password/](http://codahale.com/how-to-safely-store-a-password/)来描述选择 bcrypt 的动机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T20:14:40.727

使用 Devise 中的可恢复模块重置用户密码。

```
devise :database_authenticatable, :registerable, :token_authenticatable,
     :recoverable, :timeoutable, :trackable, :validatable, :rememberable 
```

Devise 将生成密码重置表单，并向用户发送一封包含密码重置链接的电子邮件。用户单击链接，重置密码并再次登录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-06T08:42:52.407

雷托说的是对的。您无法取回纯文本密码，或者可能需要很长时间才能找到。另一件事是您可以通过 bcrypt-calculator 检查给定密码是否等于加密密码。

[bcrypt 计算器](https://www.dailycred.com/article/bcrypt-calculator)

> a.寻找BCrypt Tester
> 
> b.输入您要检查的密码 ex : test123test
> 
> c.输入设计加密密码 ex : $2a$10$vGeVVu.E0XGjlNEa0xMCK.R0SEH0aFuyJpefrq01Axz6WSbHApPEu
> 
> 按计算。查找密码和哈希匹配

# r - R 使用 %in% 从字符向量中删除停用词

> ID：15253798
> 
> 赞同：6
> 
> 时间：2013-03-06T17:15:37.903
> 
> 标签：r, nlp, subset, tm, stop-words

我有一个带有字符串的数据框，我想从中删除停用词。我试图避免使用该`tm`包，因为它是一个大型数据集，并且`tm`运行速度似乎有点慢。我正在使用`tm` `stopword`字典。

```
library(plyr)
library(tm)

stopWords <- stopwords("en")
class(stopWords)

df1 <- data.frame(id = seq(1,5,1), string1 = NA)
head(df1)
df1$string1[1] <- "This string is a string."
df1$string1[2] <- "This string is a slightly longer string."
df1$string1[3] <- "This string is an even longer string."
df1$string1[4] <- "This string is a slightly shorter string."
df1$string1[5] <- "This string is the longest string of all the other strings."

head(df1)
df1$string1 <- tolower(df1$string1)
str1 <-  strsplit(df1$string1[5], " ")

> !(str1 %in% stopWords)
[1] TRUE 
```

这不是我要找的答案。我正在尝试获取不在向量中的单词的向量或字符串`stopWords`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T17:18:53.180

您没有正确访问列表，也没有从`%in%`（给出 TRUE/FALSE 的逻辑向量）的结果中取回元素。你应该这样做：

```
unlist(str1)[!(unlist(str1) %in% stopWords)] 
```

（或者）

```
str1[[1]][!(str1[[1]] %in% stopWords)] 
```

对于整个`data.frame`df1，您可以执行以下操作：

```
'%nin%' <- Negate('%in%')
lapply(df1[,2], function(x) {
    t <- unlist(strsplit(x, " "))
    t[t %nin% stopWords]
})

# [[1]]
# [1] "string"  "string."
# 
# [[2]]
# [1] "string"   "slightly" "string." 
# 
# [[3]]
# [1] "string"  "string."
# 
# [[4]]
# [1] "string"   "slightly" "shorter"  "string." 
# 
# [[5]]
# [1] "string"   "string"   "strings." 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-05T08:48:23.357

第一的。如果是向量，您应该取消列出`str1`或使用：`lapply``str1`

```
!(unlist(str1) %in% words)
#>  [1]  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE 
```

第二。复杂的解决方案：

```
string <- c("This string is a string.",
            "This string is a slightly longer string.",
            "This string is an even longer string.",
            "This string is a slightly shorter string.",
            "This string is the longest string of all the other strings.")
rm_words <- function(string, words) {
    stopifnot(is.character(string), is.character(words))
    spltted <- strsplit(string, " ", fixed = TRUE) # fixed = TRUE for speedup
    vapply(spltted, function(x) paste(x[!tolower(x) %in% words], collapse = " "), character(1))
}
rm_words(string, tm::stopwords("en"))
#> [1] "string string."                  "string slightly longer string."  "string even longer string."     
#> [4] "string slightly shorter string." "string longest string strings." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T08:36:10.500

当我在做类似的事情时遇到了这个问题。

虽然这已经得到了回答，但我只是想提出一个简洁的代码行，我也用它来解决我的问题 - 这将有助于直接消除数据框中的所有停用词：

```
df1$string1 <- unlist(lapply(df1$string1, function(x) {paste(unlist(strsplit(x, " "))[!(unlist(strsplit(x, " ")) %in% stopWords)], collapse=" ")})) 
```

# php - AJAX 每 5 秒调用一次 PHP 脚本

> ID：15253800
> 
> 赞同：0
> 
> 时间：2013-03-06T17:15:46.793
> 
> 标签：php, ajax

我正在利用 Twitter firehose 来存储一些基于某些设置过滤器的推文，以用于分析目的。

我编写了一个 PHP 脚本，它打开与 Twitter 流的连接，并在（！eof）时保持打开状态......所以这基本上无限期地保持打开状态。

但是，我将其设置为在 5 秒后停止。我想使用 AJAX 每 5.5 秒调用一次此脚本（偏移以确保它们不会发生冲突），然后在成功时重新循环等...

问题是我的函数似乎没有收到“成功”信号。这里发生了什么？

**以下是我的代码的相关部分：**

```
$(function() {
    makeRequest();
});

function makeRequest(){
    console.log("Getting tweets...");
    $.ajax({
        url: "./php/store_tweets.php",
        success: function(){
            console.log("Success!");
            makeRequest();
        }
    });
} 
```

**剧本：**

```
<?php
$start      = time();
$expAddress = "HOSTNAME";
$expUser    = "USERNAME";
$expPwd     = "PASSWORD";
$database   = "DBNAME";

$opts = array(
    'http' => array(
        'method' => "POST",
        'content' => 'keywords,go,here'
    )
);

// Open connection to stream
$db = mysql_connect($expAddress, $expUser, $expPwd);
mysql_select_db($database, $db);

$context  = stream_context_create($opts);
$instream = fopen('https://USERNAME:PASSWORD@stream.twitter.com/1/statuses/filter.json', 'r', false, $context);
while (!feof($instream)) {

    if (time() - $start > 5) { // break after 5 seconds
        break;
    }

    if (!($line = stream_get_line($instream, 100000, "\n"))) {
        continue;
    } else {
        $tweet = json_decode($line);

        // Clean before storing             

        // LOTS OF VARIABLES FOR BELOW...REMOVED FOR READABILITY

        // Send to database
        $ok = mysql_query("INSERT INTO tweets 
                    (created_at, from_user, from_user_id, latitude, longitude, tweet_id, language_code, 
                            place_name, profile_img_url, source, text, retweet_count, followers_count,
                            friends_count, listed_count, favorites_count) 
                    VALUES 
                    (NOW(), '$from_user', '$from_user_id', '$latitude', '$longitude', '$tweet_id', '$language_code', 
                            '$place_name', '$profile_img_url', '$source', '$text', '$retweet_count', '$followers_count',
                            '$friends_count', '$listed_count', '$favorites_count')");

        if (!$ok) {
            echo "Mysql Error: " . mysql_error();
        }

        flush();
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-06T17:39:08.030

您应该尝试 javascript 函数[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)。

```
<script type="text/javascript">
var myVar=setInterval(function(){makeRequest()},5000);
function myStopFunction()
{
    clearInterval(myVar);
}
</script> 
```

# android - android play store 正在从平板电脑（可能是其他设备）中过滤我的应用

> ID：15253804
> 
> 赞同：0
> 
> 时间：2013-03-06T17:16:01.413
> 
> 标签：android, google-play

我在 Play 上有多个版本的应用，但我收到反馈说它们没有出现在平板电脑上。我已经看过[this](https://stackoverflow.com/questions/11768823/android-app-showing-up-in-play-store-search-only-on-certain-devices)和[this](https://stackoverflow.com/questions/10443964/my-app-is-not-available-for-tablet-device-on-google-play)和[this](https://stackoverflow.com/questions/10838604/why-my-app-is-not-available-for-my-device-in-android-market)，但正如你所看到的，它们似乎并不适用。我明确支持所有屏幕并将电话标记为不需要，并且我不使用复制保护，因为我的应用程序对最终用户免费。任何人都可以看到问题吗？

我的清单：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      android:versionCode="1"
      android:versionName="12.0" package="com.example.app">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11"/>
    <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <permission android:name="com.example.app.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.example.app.permission.C2D_MESSAGE" /> 
    <!-- App receives GCM messages. -->
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- GCM connects to Google Services. -->
    <uses-permission android:name="android.permission.INTERNET" /> 
    <!-- GCM requires a Google account. -->
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <!-- Keeps the processor from sleeping when a message is received. -->
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- So that tablets, without telephony will not be filtered out by the market. -->
    <uses-feature android:name="android.hardware.telephony" android:required="false" />
    <supports-screens 
     android:smallScreens="true"
     android:normalScreens="true"
     android:largeScreens="true"
     android:xlargeScreens="true"
                  android:anyDensity="true"/>

    <application android:name="com.example.app.Application" 
        android:icon="@drawable/icon" android:label="@string/app_name">

        <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
          <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.example" />
          </intent-filter>
        </receiver>

        <service android:name="com.example.app.GCMIntentService" />

        <activity android:name="com.example.app.SplashActivity">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.example.app.NavigationActivity" android:label="@string/app_name" android:launchMode="singleTask">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
        </activity>

        <activity android:name="com.example.app.MainActivity"></activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:01:46.790

您已添加 CALL_PHONE 权限。大多数平板电脑不提供此功能，并且很可能会将它们过滤掉。

有关其他信息/想法，请参见此处

[android.permission.CALL_PHONE 平板电脑](https://stackoverflow.com/questions/7882955/android-permission-call-phone-for-tablets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:44:45.383

经过进一步调查，似乎少数找不到应用程序的用户正在寻找较旧的应用程序（不在 `<uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature>` 清单中）。新的应用程序似乎很好。感谢您的回复。

# jpa - persistence.xml 中的 OpenJPA SynchronizeMappings 仅用于托管表

> ID：15253806
> 
> 赞同：2
> 
> 时间：2013-03-06T17:16:10.960
> 
> 标签：jpa, db2, openjpa, persistence.xml

我已经阅读了许多关于 persistence.xml 中的 SynchronizeMappings 选项的教程。我得出的配置是这样的：

```
<property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(SchemaAction=&apos;drop,create,add&apos;)"/> 
```

这在 MySQL 中运行良好，但我遇到了 DB2 的问题，因为它试图删除一些默认表（如 SYS*）

所以我想知道的是：是否可以告诉 OpenJPA 只删除托管类实体而不是数据库的所有表？

非常感谢

# php - PHP - 如何显示包含数组的地址的内容

> ID：15253808
> 
> 赞同：-2
> 
> 时间：2013-03-06T17:16:13.273
> 
> 标签：php, arrays, class

如何显示包含数组的地址的内容？

例子：

```
class ConferenceInfo {

    var $confID;
    var $confName;
    var $divisons = array(); 

    /* display an address in HTML */
    function display() {
        $output = '';
        $output .= $this->confID;
        $output .= $this->confName;
        foreach($this->divisons as $value) { // I know this is incorrect
            $output .= $value;          
        }
        $output .= '<br/>';
        return $output;
    }
} 
```

和 PHP 代码：

```
$conf = new ConferenceInfo;
$conf->confID = $someValue1;
$conf->confName = $someValue2;
$conf->divisons[] = $someValue3;   // this will eventually loop and fill in multiple values
echo $conf->display(); 
```

数据示例为：

```
confID = 1<br/>
confName = Eastern<br/>
dvisions = Atlantic, Central, Northeast 
```

预期的输出`display()`将是：

```
1EasternAtlanticCentralNortheast 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:17:41.580

```
class ConferenceInfo {

    var $confID;
    var $confName;
    var $divisons = array(); 

    /* display an address in HTML */
    function display() {
        $output = '';
        $output .= $this->confID;
        $output .= $this->confName;
        foreach($this->divisons as $value) {
            $output .= $value; 
        }
        $output .= '<br/>';
        return $output;
    }
}

$conf = new ConferenceInfo;
$conf->confID = 1;
$conf->confName = "Eastern";
$conf->divisons = array("Atlantic", "Central", "Northeast");
echo $conf->display(); 
```

# jquery - 哪个是获取 li 中所有元素的更好解决方案

> ID：15253810
> 
> 赞同：0
> 
> 时间：2013-03-06T17:16:15.943
> 
> 标签：jquery, dom, getelementsbyclassname

在这两种方法中，第二个选项是否提供了更好/更快的解决方案。

```
$(goods).parent().parent().children().eq(1).children().eq(1).children(); 
```

第一个选项：我的函数传入一个元素“goods”，然后我横穿 dom 到达包含我的元素的 li

```
var b = document.getElementsbyClassname(); 
```

第二个选项是通过类名简单地获取需要的元素。

该项目没有特别要求支持低于即 9 的任何内容，但我们想尝试一下，这将取消第二个选项的资格，但我的问题是：这两个选项之间是否有任何显着差异会使第二个“值得”损失即支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:21:37.897

您的第一个选择是对用户浏览器的性能造成**严重**影响，因为它将以相反的方向遍历 DOM 树。

您的第二个选项可以用 jQuery 编写，因此您不会失去对 IE 的支持。

像这样写你的jQuery

```
var allElementsWithClass = $('.className'); 
```

然后，您可以遍历结果。

# magento - Magento：收集中的数据不完整？

> ID：15253812
> 
> 赞同：1
> 
> 时间：2013-03-06T17:16:18.433
> 
> 标签：magento, collections

我在 Magento 中创建了一个集合 ($myCollection)，并使用以下代码获取其数据：

```
$data = $myCollection->getData(); 
```

这行得通，但是当我查看 $data 数组时，我发现有些列只是丢失了，奇怪的是，只是有时，并非总是如此。为了弄清楚发生了什么，我使用以下代码获取了底层 SQL：

```
$select = $myCollection->getSelect()->__toString(); 
```

在我的 MySQL 客户端中运行它会返回所有列，没有任何遗漏。知道问题可能是什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:50:03.120

这是正确的，并不总是包含完整的数据，尤其是对于 eav 模型。你可以阅读它

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)

要加载所有这些，另外使用： $collection->addAttributeToSelect('*');

# php - javascript中的htmlentities函数

> ID：15253813
> 
> 赞同：0
> 
> 时间：2013-03-06T17:16:18.570
> 
> 标签：php, javascript

```
$line=htmlentities(stripslashes($line)); 
```

这是正常的 PHP 语句。谁能告诉我 javascript 中的语法以通过 javascript 执行上述任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:46:44.597

有一个图书馆。它等效于 PHP htmlentities 函数： [http://phpjs.org/functions/htmlentities/](http://phpjs.org/functions/htmlentities/)

# ruby - 如何将带有 \xf6 字符的字符串转换为人类可读的字符串？

> ID：15253814
> 
> 赞同：4
> 
> 时间：2013-03-06T17:16:20.287
> 
> 标签：ruby, ruby-on-rails-3, utf-8, iconv

目前我正在使用 PayPal 结帐开发 Rails 应用程序。PayPal 使用 IPN 消息与我的应用程序通信。

在许多情况下，一切正常，但如果有人使用像德语变音符号 ( `öüäß`) 这样的特殊字符，我会`\xf6`进入字符串。

如何将其转换为人类可读的 char `'ö'`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T17:37:01.900

问题是数据被编码为 Windows-1252，但 ruby​​ 不会自动检测到。你可以这样哄它：

```
my_string = "Sch\xF6ning"
my_string.force_encoding('windows-1252').encode('utf-8')
=> "Schöning" 
```

你可以制作一个可重复使用的转换器来帮助你做同样的事情：

```
ec = Encoding::Converter('windows-1252', 'utf-8')
ec.convert(my_string)
=> "Schöning" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T09:02:21.443

请注意，在贝宝端有一个设置：

在卖家的 paypal 帐户中转到：个人资料 > 我的销售工具 > PayPal 按钮语言编码 > 更多选项

# php - 使用没有刀片的 laravel 模板显示内容

> ID：15253821
> 
> 赞同：2
> 
> 时间：2013-03-06T17:16:38.570
> 
> 标签：php, layout, laravel, laravel-4

我有这个控制器方法

```
class Account_Controller extends Base_Controller
{
    public $layout = 'layouts.default';

    public function action_index($a,$b)
    {
        $data['a']  =   $a;
        $data['b']  =   $b;

        $this->layout->nest('content', 'test',$data);
    }
} 
```

这是我的布局

```
<div id = "content">
    <?php echo Section::yield('content'); ?>
</div> 
```

这是我的 test.php

```
echo $a;
echo '<br>';
echo $b;
echo 'this is content'; 
```

当我访问这个

```
http://localhost/myproject/public/account/index/name/email 
```

我加载了我的布局，但未加载 test.php。如何在我的模板中加载内容。我不想用刀片。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:49:46.827

当您将一个视图嵌套在另一个视图中时，它的内容被定义为一个简单的变量。所以，简单地输出它：

```
<?php echo $content ?> 
```

当您需要从子视图中更改布局（或任何父视图）上的某些内容时，使用部分。例如：

```
// on layout.php
<title><?php echo Section::yield('title') ?></title> 
```

```
// on test.php
<?php Section::start('title'); ?>
    My Incredible Test Page
<?php Section::stop(); ?>

<div class="test_page">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:26:57.600

我认为你需要为它渲染，不确定，也许是部分加载：

```
<div class="content">
    <?php echo render('content.test'); ?>
</div> 
```

查看此示例以获取嵌套视图： http: [//laravel.com/docs/views#nesting-views](http://laravel.com/docs/views#nesting-views)

```
 public function action_dostuff()
   {
      $view = View::make('controller.account');
      // try dump var to grab view var_dump($view);
      var_dump($view);
      $view->test = 'some value';
      return $view;
   } 
```

或者使用刀片：[在 Laravel 中进行模板化](https://stackoverflow.com/questions/12524712/templating-in-laravel)

# node.js - 使用 node.js 将主干模型放置在外部文件中

> ID：15253822
> 
> 赞同：0
> 
> 时间：2013-03-06T17:16:39.047
> 
> 标签：node.js, backbone.js

我试图通过node.js 和backbone.js 找到我的方式。我的意图是至少与服务器和浏览器共享所有模型状态。现在我不太确定我是否真的需要分享观点。我还想通过 express 和 nodejs 处理所有路由，而不是骨干网。为了让我的代码更加结构化，我期待将每个模型保存在单独的 *.js 文件中。通过这样做，我遇到了以下错误消息：

```
TypeError: Object #<Object> has no method 'extend' 
```

我认为这可能是单独文件中缺少下划线的问题，所以这是我的基本模型：

模型/BaseModel.js

```
var Backbone = require('../node_modules/backbone'),
_ = require('../node_modules/underscore'),

var BaseModel = Backbone.Model.extend({

  modelName: 'basemodel'

});

exports.BaseModel = BaseModel; 
```

app.js var BaseModel = require('./models/BaseModel');

```
var MyModel = BaseModel.extend({
// ... attributes, functions etc.

}); 
```

有没有人暗示我在那里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T19:38:19.190

然后在 app.js 中尝试这段代码：

```
BaseModel = require('./models/BaseModel').BaseModel; 
```

或者在 models/BaseModel.js 中不`exports.BaseModel = BaseModel;`使用它 -`module.exports = BaseModel`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:50:04.373

我真的想通了。缺陷在于引用 BaseModel，所以

这个

```
var MyModel = BaseModel.extend({
  //
}); 
```

不得不变成：

```
var MyModel = BaseModel.BaseModel.extend({
   //
}; 
```

因为exports.BaseModel = BaseModel; 在 BaseModel.js

# winforms - 在 F# 中在 Windows 窗体中绘图

> ID：15253829
> 
> 赞同：3
> 
> 时间：2013-03-06T17:17:21.097
> 
> 标签：winforms, f#, drawing

我试图`System.Windows.Forms.Form`在 F# 中绘制一个非自定义的（我的意思是，只是创建默认表单类的实例，而不是我可以创建的派生类的实例）。

我创建了一个自定义表单，但我不需要也不想要这样一个新的复杂结构，所以我删除了它，它大大简化了代码；如此之多，以至于它停下来显示图像。

问题一定出在我创建的要绘制的函数中，也就是在另一个 F# 项目中。我已经创建它（函数）以**按照提供的顺序**`conect`连接点，不像，它以其他顺序在点之间绘制线，为什么还没有注意到（可能从右到左，从上到下，因为点是代表）。**`System.Drawing.Graphics.DrawLines`**

 **Programa.fs 相关代码片段：

```
let pen = new Pen(brush = Brushes.Black, width = 1.0f)
let original =            
    ([|new PointF(50.0f, 50.0f); new PointF(100.0f, 50.0f)|])

use form1 = new Form(Width = 400, Height = 400, Text = "Fractais (Teste - Windows Forms)")

form1.Paint.Add(
    fun e -> // (1)
        original
        |> List.ofArray        
        |> Base.applyFractal 1uy Base.fractalFunc1
        |> Base.conect e.Graphics pen) 
```

如果在 lambda 表达式中而不是写的有`e.Graphics.DrawLines(pen, original)`，它将在列表中的点之间画一条简单的线。

这是 Base.fs 中解决方案中的麻烦制造者方法：

```
let conect (gr:Graphics) (pen:Pen) (points:PointF list) =
    let rec usefulFunc (gr:Graphics) (pen:Pen) (points:PointF list) prevPoint =
        match points with
        | [] -> ()
        | point :: remainings ->                
            gr.DrawLine (pen, prevPoint, point)
            usefulFunc gr caneta remainings.Tail remainings.Head
    usefulFunc gr pen points.Tail points.Head 
```

以及 Base.fsi 中的调用（来自表单初始化片段）和相关方法的签名（我可以为您提供所有完整方法的实现，但这会占用大量空间，这可能适合您已经成为一个很长的问题要阅读）：

```
val fractalFunc1 : points:PointF list -> PointF list
val applyFractal : stepNumber:byte -> fractalFunc:(PointF list -> PointF list) -> points:PointF list -> PointF list
val conect : gr:Graphics -> pen:Pen -> points:PointF list -> unit 
```

对于这个特定的问题，我的搜索结果没有。我想知道如何使该功能`conect`正常工作。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:34:19.770

您在 conectar 中有一个错误。

```
fUtil gr caneta resto.Tail resto.Head 
```

应该

```
fUtil gr caneta resto ponto 
```

您已经在 match 语句中匹配了头部和尾部。

下面的代码为我画了一条线。我不必修改太多。

```
open System.Drawing
open System.Windows.Forms

let caneta = new Pen(brush = Brushes.Black, width = 1.0f)
let original =            
    ([|new PointF(50.0f, 50.0f); new PointF(100.0f, 50.0f)|])

let form1 = new Form(Width = 400, Height = 400, Text = "Fractais (Teste - Windows Forms)")

let conectar (gr:Graphics) (caneta:Pen) (pontos:PointF list) =
    let rec fUtil (gr:Graphics) (caneta:Pen) (pontos:PointF list) pontoAnt =
        match pontos with
        | [] -> ()
        | ponto :: resto ->                
            gr.DrawLine (caneta, pontoAnt, ponto)
            fUtil gr caneta resto ponto
    fUtil gr caneta pontos.Tail pontos.Head

form1.Paint.Add(
    fun e -> // (1)
        original
        |> List.ofArray        
        //|> aplicFractal 1uy Base.funcFractal1
        |> conectar e.Graphics caneta)

form1.Show()

Application.Run(form1) 
```**

# qt - Qt 应用程序在启动期间抛出访问冲突异常

> ID：15253831
> 
> 赞同：2
> 
> 时间：2013-03-06T17:17:32.487
> 
> 标签：qt, release, startup, access-violation

我有一个在调试模式下工作的 Qt 应用程序，没有任何问题。两天以来，我试图让它在发布模式下工作。经过一些项目属性修改后，我设法编译没有错误。但不幸的是，应用程序在到达 main 方法之前就崩溃了。这是我的环境：

*   女士 VS 2010
*   Qt 4.8.4
*   质量重量 6.0.0

我不知道这是否相关，但我还为 VS 安装了 Qt 插件并使用 Qt Designer 来创建我的 GUI。

正如我在调试模式下所说，没有问题。从 Visual Studio 启动发行版会产生以下错误：Application.exe 中 0x77c415de 处的未处理异常：0xC0000005：访问冲突读取位置 0x0000000c。

我可以“调试”的最后一个函数是方法“__declspec(noinline) int __tmainCRTStartup”中调用的“WinMain”方法，该方法位于 crtexe.c 中（老实说，我不知道这是什么）。调用堆栈如下所示：

```
ntdll.dll!77c415de()    
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
ntdll.dll!77c415de()    
ntdll.dll!77c3014e()    
msvcr100.dll!718f0269()     
msvcr100.dll!718f233b()     
msvcr100.dll!718f233b()     
msvcr100.dll!718f233b()     
QtCore4.dll!5b2cfc49()  
QtGui4.dll!57bf54ea()   
Application.exe!__tmainCRTStartup()  Line 547 + 0x1c bytes  C
kernel32.dll!754633aa()     
ntdll.dll!77c59ef2()    
ntdll.dll!77c59ec5() 
```

此刻我完全迷失了这个问题。不知道要进一步尝试什么...

我试图减少程序并注释掉完整的主要功能。但结果是相同的行为。正如我所说，错误甚至在调用主函数之前就发生了。我还关闭了所有优化并重新编译......没有改变任何东西。

让我完全困惑的是，当我从命令提示符调用“Application.exe”时它“工作”（好吧，它也崩溃了，但在执行过程中要晚得多）。很奇怪，不是吗？从命令提示符开始和从 Visual Studio 应用程序开始有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:55:29.437

AnatolyS 和 npiau 感谢您的提示。与此同时，我继续挖掘我的代码。或多或少我从一开始就开始了，最后得到了错误发生的地方。我想 npiau 是对的，它与 Qt 无关。

这仍然是（对我来说）一个奇怪的问题。我将它发布在一个新线程中（因为它与这个线程关系不大）：[C++ Creation of a Singleton object in initializer list cause an Access Violation (only Release Mode)](https://stackoverflow.com/questions/15299187/c-creation-of-a-singleton-object-in-initializer-list-causes-an-access-violatio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:17:41.673

问题不在于 QT，而在于您的源代码。“0xC0000005：访问冲突读取位置0x0000000c”表示您尝试访问错误的内存位置。

检查您的数组和指针。

# excel - excel ole db 连接字符串错误，“数据源初始化失败”

> ID：15253838
> 
> 赞同：1
> 
> 时间：2013-03-06T17:17:38.180
> 
> 标签：excel, import, connection, oledb, jet

我正在尝试使用以下连接字符串从访问数据库导入数据：

```
"Provider=Microsoft.Jet.OLEDB.4.0;Password="";User ID=Admin;Data Source="C:\Temp\Dextech PM.mdb";Mode=Share Deny None;Extended Properties="";Jet OLEDB:System database="";Jet OLEDB:Registry Path="";Jet OLEDB:Database Password="";Jet OLEDB:Engine Type=5;Jet OLEDB:Database Locking Mode=0;Jet OLEDB:Global Partial Bulk Ops=2;Jet OLEDB:Global Bulk Transactions=1;Jet OLEDB:New Database Password="";Jet OLEDB:Create System Database=False;Jet OLEDB:Encrypt Database=False;Jet OLEDB:Don't Copy Locale on Compact=False;Jet OLEDB:Compact Without Replica Repair=False;Jet OLEDB:SFP=False" 
```

当我尝试建立连接时，它失败并出现以下错误：

> 数据源初始化失败
> 
> 检查数据库服务器或联系您的数据库管理员。确保外部数据库可用，然后重试该操作。如果您再次看到此消息，请创建一个新数据源以连接到数据库。

连接不会连接，所以我无法导入数据。

# objective-c - 动态库可以引用 Objective-C 对象并且仍然被卸载吗？

> ID：15253843
> 
> 赞同：2
> 
> 时间：2013-03-06T17:17:46.650
> 
> 标签：objective-c, c, dynamic-linking

我知道，至少在 OS X 上，由于 Apple 的 Objective-C 运行时加载类的方式，不可能动态卸载包含已加载类的实现的动态库。对于只知道引用标头的对象但不包含任何类的方法实现的库，这是否成立？

为清楚起见，我想使用 Objective-C 来编写动态库，但会加载和卸载带有`ResultObject* performActionOnObject(SomeObject* object)`.

编辑：

为了更清楚，考虑一个函数，如

```
NSNumber* computeFactorial(NSNumber* operand){
  NSUInteger n = [operand unsignedIntegerValue];
  /// ... pure C loop omitted
  return [NSNumber numberWithUnsignedInteger:n];
} 
```

并假设当它被调用时，自动释放池处于活动状态。这样卸货可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:29:46.873

如果客户端直接引用您的类，如果该类不在链接的二进制文件中，则会导致链接器错误。您可以在运行时加载/卸载类，但您需要通过它们的名称（字符串）查找它们才能使用它们。在按名称查找课程之前，您还需要注册课程。

您可以将 C 函数传递给运行时调用`class_addMethod`，例如`method_exchangeImplementations`在运行时扩展/更改 ObjC 类。

谷歌搜索“method swizzling”将引导您找到示例。

所以最终……“这取决于你如何与对象交互”。

# date - 在 Dlang 中获取按修改日期排序的目录列表

> ID：15253845
> 
> 赞同：1
> 
> 时间：2013-03-06T17:17:47.697
> 
> 标签：date, sorting, directory, d

我正在尝试获取按修改时间排序的目录内容。我认为没有办法直接在`dirEntries`调用中执行此操作，因此我的策略是收集所有文件时间和名称，然后对两个数组进行同步排序。

问题 1：我不知道如何将 a`sysTime`转换为整数。
问题 2：我不知道如何对两个数组进行并行排序。

与 D 中的每个问题一样，不可能找出如何做到这一点:(

这是我的代码：

```
import std.file;
import std.stdio : writeln;
import std.algorithm;
import std.datetime;

void main() {
    string[] myFiles;
    double[] myTimes;

    foreach (DirEntry e; dirEntries("c:/users/istaffel/", SpanMode.shallow)) {
        // calculate unix time (this doesn't work)
        auto dur = (cast(Date)e.timeLastModified) - Date(1970,1,1);

        // store modified time and filename
        myTimes ~= dur.seconds;
        myFiles ~= e.name;
    }

    // now find a way to sort myFiles in order of ascending myTimes...

    // print in order
    for (int i = 0; i < myTimes.length; i++) {
        writeln(myTimes[i], " ", myFiles[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T18:40:29.403

一般来说，除非您正在与 C 交互，否则我建议将其转换`SysTime`为整数值是一个坏主意（并且将其转换`double`为更糟）。但是，如果您真的需要将其转换为`time_t`您似乎正在做的事情，那么只需使用`SysTime`'s`toUnixTime`函数：

```
auto timeT = e.timeLastModified.toUnixTime(); 
```

做你想做的事情的最简单的解决方案是

```
import std.algorithm;
import std.array;
import std.datetime;
import std.file;
import std.stdio;

void main(string[] args)
{
    auto directoryToList = args[1];
    auto files = array(dirEntries(directoryToList, SpanMode.shallow));
    sort!"a.timeLastModified < b.timeLastModified"(files);
    foreach(file; files)
        writefln("%s %s", file.timeLastModified, file.name);
} 
```

如果你真的想要一个`time_t`，那就去做吧`file.timeLastModified.toUnixTime()`。

`dirEntries`返回一个范围，因此您可以对其进行迭代并直接对其进行操作，但是为了对其进行排序，您需要一个随机访问范围（结果`dirEntries`不是，因为它懒惰地访问文件）。因此，您可以使用`std.array.array`它来创建一个数组，然后对其进行排序。`sort`接受一个谓词（无论是使用 std.functional 转换为函数的字符串、lambda 文字、委托、函数指针，还是任何可使用您正在排序的类型的两个参数调用的东西 - 在这种情况下，我使用了一个字符串，在下面的示例中，我将 lambda 文字用于`map`)。

如果您正在处理大量文件并希望最大限度地减少使用的内存量（因为`DirEntry`确实有几个成员变量，因此如果您关心所有这些，那么它们的数组可能会占用比您想要的更多的内存是文件的名称和修改时间），那么它会变得更有趣，但它仍然很可行。

```
import std.algorithm;
import std.array;
import std.datetime;
import std.file;
import std.stdio;
import std.typecons;

void main(string[] args)
{
    auto directoryToList = args[1];
    auto files = dirEntries(directoryToList, SpanMode.shallow);
    auto pairs = array(map!(a => tuple(a.timeLastModified, a.name))(files));
    sort!"a[0] < b[0]"(pairs);
    foreach(pair; pairs)
        writefln("%s: %s", pair[0], pair[1]);
} 
```

再说一次，如果你真的想要一个`time_t`，就做那个`pair[0].toUnixTime()`。

这最终创建了一个仅包含时间和名称的元组数组，然后仅使用时间对这些元组进行排序[。](http://dlang.org/phobos/std_typecons.html#Tuple)

如果您对范围不是很熟悉，那么我建议您从有关 D 的标准库的在线书籍中阅读[本章](http://ddili.org/ders/d.en/ranges.html)。D 的标准库大量使用范围，这可能是您觉得很难弄清楚如何在 D 中做事。范围是一个非常强大的概念，但它们确实需要一些时间来适应。

# jquery - jQuery - 在嵌套动画序列中使用停止来正确回滚 mouseleave 上的所有动画

> ID：15253851
> 
> 赞同：1
> 
> 时间：2013-03-06T17:18:00.223
> 
> 标签：jquery

我已经尝试阅读如何使用止损，并在此处查看其他答案。现在已经修补这个片段太久了。我似乎无法让这个动画始终平行。

它要么在某个点停止，要么在底线继续排队动画（参见下面的代码）。无论哪种方式，我都无法弄清楚在哪里停下来让它正常工作。

```
 $(".property-wrapper").hover(function(e){

    var lines = new Array();
    lines.push($(this).find(".line-top"));
    lines.push($(this).find(".line-left"));
    lines.push($(this).find(".line-right"));
    lines.push($(this).find(".line-bottom-right"));
    lines.push($(this).find(".line-bottom-left"));

    if(e.type == "mouseenter")
    {
        // Animate, starting from top, and going parallell towards the bottom. Then the bottom ones meet eachother.
        // The motion forms a square
        /*
                Index 0 starts (from main.css) on left:50%; and animates to 0 while also animating width to 100%, giving
                the illusion of it "shooting" out in both directions
                Here is a representation of the indices and their direction of animation

                <---------0--------->
                1                   2
                |                   |
                |                   |
                |                   |
                |4--------><-------3|
        */
        $(lines[0]).animate({width:"100%", left:0}, 'fast', function(){
            $(lines[1]).animate({height:"100%"}, 'slow' , function(){
                $(lines[4]).animate({width:"50%"}, 'slow');
            });
            $(lines[2]).animate({height:"100%"}, 'slow', function(){
                $(lines[3]).animate({width:"50%"}, 'slow');
            });
        });
    }
    else
    {
        // Reverse the animation on mouseenter
        $(lines[3]).animate({width:0}, 'fast', function() {
            $(lines[2]).animate({height:0}, 'slow', function(){
                $(lines[0]).animate({width:0, left:"50%"}, 'fast');
            });
        });

        $(lines[4]).animate({width:0}, 'fast', function() {
            $(lines[1]).animate({height:0}, 'slow');
        });
    }
}); 
```

希望任何人都可以提供帮助！谢谢

编辑：这基本上是它的设置方式：

```
 <div>
            <div class="line-top"></div>
            <div class="line-left"></div>
            <div class="line-right"></div>
            <div class="line-bottom-right"></div>
            <div class="line-bottom-left"></div>
        </div> 
```

这是CSS。line div 的 parent 是相对定位的，而 lines 是绝对的，以控制相对于 parent 的位置。

```
 .line-top, .line-left, .line-right, .line-bottom-right, .line-bottom-left 
   {    background:red; position:absolute; }
    .line-top { height:1px; width:0; left:50%; top:0; }
    .line-left { width:1px; height:0; left:0; top:0; }
    .line-right { width:1px; height:0; right:0; top:0; }
    .line-bottom-right { height:1px; width:0; right:0; bottom:0; }
    .line-bottom-left { height:1px; width:0; left:0; bottom:0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:24:27.720

[好吧，我最初过度考虑了这个解决方案](http://jsfiddle.net/UQEmU/7/)。然后，当我完成所有工作时，我再次看了看它，意识到我是愚蠢的并且过度思考它（掌心）。

只需`stop(true)`在每个动画之前添加，您就应该[达到您正在寻找的效果](http://jsfiddle.net/VsJJz/1/)：

```
$(".property-wrapper").hover(function (e) {
    console.debug('fire');
    var lines = new Array();
    lines.push($(this).find(".line-top"));
    lines.push($(this).find(".line-left"));
    lines.push($(this).find(".line-right"));
    lines.push($(this).find(".line-bottom-right"));
    lines.push($(this).find(".line-bottom-left"));

    if (e.type == "mouseenter") {
        $(lines[0]).stop(true).animate({
            width: "100%",
            left: 0
        }, 'fast', function () {
            $(lines[1]).stop(true).animate({
                height: "100%"
            }, 'slow', function () {
                $(lines[4]).stop(true).animate({
                    width: "50%"
                }, 'slow');
            });
            $(lines[2]).stop(true).animate({
                height: "100%"
            }, 'slow', function () {
                $(lines[3]).stop(true).animate({
                    width: "50%"
                }, 'slow');
            });
        });
    } else {
        // Reverse the animation on mouseenter
        $(lines[3]).stop(true).animate({
            width: 0
        }, 'fast', function () {
            $(lines[2]).stop(true).animate({
                height: 0
            }, 'slow', function () {
                $(lines[0]).stop(true).animate({
                    width: 0,
                    left: "50%"
                }, 'fast');
            });
        });

        $(lines[4]).stop(true).animate({
            width: 0
        }, 'fast', function () {
            $(lines[1]).stop(true).animate({
                height: 0
            }, 'slow');
        });
    }
}); 
```

但是，重要的是要注意，我的超级思考答案反应更快，并且没有我在正式发布的答案中看到的一些边缘情况“故障”。但就其本身而言，它有点古怪。我相信在中间的某个地方你会找到你正在寻找的解决方案。

编辑：

在我的过度思考解决方案中[，我最终增加了一个过度思考的层次，](http://jsfiddle.net/vCXZZ/2/)令人惊讶的是，我已经非常接近一个真正的解决方案。

基本上我发现在我过度思考的解决方案中，我正确地管理了队列，唯一的问题是如果事件触发得太快，你最终可能会不按顺序排队。

也就是说，动画需要考虑的不是一组动画，而是单个动画。一旦你突破了这个心理障碍，很明显你需要在动画应该排队的时候设置限制标准。

所以我重新制作了动画，以确保在加载其他部分之前绝对加载它的一部分。这非常有效，直到有人开始使用鼠标。只要`mouseenter`和`mouseexit`事件不会在几分之一秒内真正发生，那么动画就会按预期工作。

# angularjs - AngularJS过滤空字符串

> ID：15253854
> 
> 赞同：1
> 
> 时间：2013-03-06T17:18:03.947
> 
> 标签：angularjs, filtering

我在选择和列表之间有一个简单的 Angular 过滤器设置。当用户从下拉列表中选择一个项目时，列表会更新以显示匹配结果。问题是我在下拉列表中首先有一个“选择...”选项，没有值，当这是选定的值时，会显示所有项目。我想这是有道理的，但我想要相反。如果所选选项没有价值，我不想显示列表。以下是一些相关位，然后是完整小提琴的链接：

下拉列表：

```
<select class="world-list" ng-model="selectedWorld" ng-options="world.worldId as world.worldName for world in allWorlds">
    <option value="">Select...</option>
</select> 
```

名单：

```
<ul class="unstyled" id="charList">
    <li ng-repeat="char in characters | filter:selectedWorld">
        <a href="#" class="btn btn-block" ng-click="selectChar()">{{char.charName}} - {{char.charRace}} {{char.charClass}}</a>
    </li>
</ul> 
```

这是完整小提琴的链接，其中包含驱动所有这些的我的 JSON 结构：http: [//embed.plnkr.co/6XUmC5efO0Y1BRNLRUig](http://embed.plnkr.co/6XUmC5efO0Y1BRNLRUig)

我正在尝试做的事情相当简单，而且我对 Angular 还是很陌生，所以我确信我遗漏了一些明显的东西。检查了 Jabbr 房间，没有人在。:(

无论如何，感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:44:57.373

实现此目的的一种方法是按迭代对象的特定属性进行过滤：

```
<ul class="unstyled" id="charList">
  <li ng-repeat="char in characters | filter:{worldId: selectedWorld}">
    <a href="#" class="btn btn-block" ng-click="selectChar()">{{char.charName}} - {{char.charRace}} {{char.charClass}}</a>
  </li>
</ul> 
```

[普朗克](http://plnkr.co/edit/U6m5jiEB3BWvOp6UZFDI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:37:32.070

我注意到在您的代码“script.js”中您似乎没有考虑空白选项。

我没有对此进行测试（我可能应该在提出这个答案之前），但它应该通过在你的 script.js 中放置“空白”选项来工作。

```
app.controller('WorldCtrl', function ($scope, $http) {
    $scope.allWorlds = [{
      worldId: "",
      worldName: ""
    },
    {
      worldId: "b8ee0530-744b-463e-9428-23178f6c7bff",
      worldName: "World 1"
    },
    {
      worldId: "81211982-5613-4f9c-b704-7b6fa35faf84",
      worldName: "World 2"
    },
    {
      worldId: "df41208e-e8d2-46c9-8299-8f37632a51f8",
      worldName: "World 3"
    }];

    $scope.characters = [{
      charClass: "Rogue",
      charName: "Vaes",
      charRace: "Human",
      worldId: "b8ee0530-744b-463e-9428-23178f6c7bff"
    },
    {
      charClass: "Warrior",
      charName: "Azash",
      charRace: "Orc",
      worldId: "b8ee0530-744b-463e-9428-23178f6c7bff"
    },
    {
      charClass: "Mage",
      charName: "Anele",
      charRace: "Ogre",
      worldId: "81211982-5613-4f9c-b704-7b6fa35faf84"
    }];
}); 
```

# php - Android HttpPost 不起作用

> ID：15253856
> 
> 赞同：0
> 
> 时间：2013-03-06T17:18:11.630
> 
> 标签：php, android, json, get

我正在尝试创建一个使用 WAMP 服务器将数据发送到远程数据库的应用程序。我面临的问题是没有人出现：没有发送数据，也没有显示 logcat 错误，我也无法插入 Toast 以查看应用程序是否进入代码的特定部分，因为 Eclipse 在运行时将其显示为错误模式。

所以，这里是 .java 代码：

```
public class AggiungiProdotto extends Activity 
{
    private static String indirizzo ="http://10.0.2.2/tesina/Aggiungi_Ordinazione";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.aggiungi_prodotto);
    new AggiungoOrdinazione().execute();

}

private class AggiungoOrdinazione extends AsyncTask<String, Void, String>
{

    @Override
    protected void onPreExecute() 
    {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... arg0) 
    {
        InputStream is = null;
        String result = "";
        JSONObject jsonResult = null;
        TextView tv;

        Intent intent = getIntent();
        String Nome = new String();

        String Tavolo = intent.getStringExtra("Tavolo");
        Nome = "ciao";

        HttpPost httppost = new HttpPost(indirizzo);  

        HttpParams httpParams = new BasicHttpParams();

        int timeOutConnection = 5000;
        HttpConnectionParams.setConnectionTimeout(httpParams, timeOutConnection);
        int timeoutSocket = 5000;
        HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
        HttpClient httpclient = new DefaultHttpClient(httpParams);

        List<NameValuePair> Comanda = new ArrayList<NameValuePair>();
        Comanda.add(new BasicNameValuePair("Nome", Nome ));
        Comanda.add(new BasicNameValuePair("Tavolo", Tavolo));

        try 
        {
            httppost.setEntity(new UrlEncodedFormEntity(Comanda));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));

            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
            jsonResult = new JSONObject(result);

        }
        catch (UnsupportedEncodingException e) 
        {
            e.printStackTrace();
        } 
        catch (ClientProtocolException e)
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        } 
        catch (JSONException e) 
        {
            e.printStackTrace();
        }   

        return null;
    }

}

protected void onPostExecute()
{

} 
```

}

然后这里是与将数据插入数据库相关的 .PHP 代码：

```
<?php

// Dichiaro una array nel quale inserirò la risposta in JSON
$response = array();

/* La funzione isset controlla se all'interno della variabile esiste un dato diverso da null.
$_POST è una funzione che inserisce i dati passati attraverso un metodo POST alla variabile seguente. */

if (isset($_POST['Nome']) && isset($_POST['Tavolo'])) 
{

    $Nome = $_POST['Nome'];
    $Tavolo = $_POST['Tavolo'];

    // Includo la classe per la connessione al database
    require_once __DIR__ . '/connessione_db.php';

    // Da file incluso posso istanziare un oggetto della clase
    $db = new DB_CONNECT();

    // Query in mySQL Per creare una riga i cui campi hanno i valori passati dall'applicazione.
    $result = mysql_query("INSERT INTO pizze(Nome, Tavolo) VALUES('$Nome', '$Tavolo')");

    // Controllo se la riga è stata inserita oppure no.
    if ($result) 
    {

        $response["Stato"] = 1;
        $response["Messaggio"] = "Dati inseriti!";

       // echo in PHP che mi converte il risultato in JSON e la mette nella variabile response.
        echo json_encode($response);
    }
    else 
    {

        $response["success"] = 0;
        $response["message"] = "Dati non inseriti!";

        // Converto anche qui.
        echo json_encode($response);
    }
} else 
{
    $response["success"] = 0;
    $response["message"] = "Campo richiesto mancante!";

    // Converto.
    echo json_encode($response);
}
?> 
```

你能帮我出什么问题吗？我做的方式是正确的还是我错过了什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:47:22.173

也许这段代码可以提供帮助。

**得到**

```
InputStream is = null;
    String result = "";
    JSONObject jsonResult = null;

    HttpGet httppost = new HttpGet(url);    
    HttpParams httpParams = new BasicHttpParams();
    int timeOutConnection = 5000;
    HttpConnectionParams.setConnectionTimeout(httpParams, timeOutConnection);
    int timeoutSocket = 5000;
    HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
    HttpClient httpclient = new DefaultHttpClient(httpParams);

    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();

    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));     

    StringBuilder sb = new StringBuilder();

    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    result = sb.toString();
    jsonResult = new JSONObject(result); 
```

**邮政**

```
 InputStream is = null;
    String result = "";
    JSONObject jsonResult = null;

    HttpPost httppost = new HttpPost(url);  
    //httppost.addHeader("content-type", "application/json");
    //httppost.addHeader("User-Agent", userAgent);
    HttpParams httpParams = new BasicHttpParams();

    int timeOutConnection = 5000;
    HttpConnectionParams.setConnectionTimeout(httpParams, timeOutConnection);
    int timeoutSocket = 5000;
    HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
    HttpClient httpclient = new DefaultHttpClient(httpParams);

    httppost.setEntity(new UrlEncodedFormEntity(params));   

    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();

    BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));

    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    result = sb.toString();
    jsonResult = new JSONObject(result); 
```

**更新**

尝试将您的代码包装在此

```
new Thread(new Runnable() {
            @Override
            public void run() {
                //To change body of implemented methods use File | Settings | File Templates.
            }
        }).start(); 
```

但我强烈建议学习使用 Asynctask，它使它更容易和更稳定。网上有很多关于如何使用它们的好例子

使用此代码作为参考并根据您的需要进行修改。我确信这行得通，因为我们一直使用这种和平的代码。

**编辑**

下面我用 Asynctask 的子类编写了一个非常简单的活动

```
public class AsyncTaskExample extends Activity {

private String url;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    url = "http://google.com";

    new WebCall().execute();
}

class WebCall extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {

        InputStream is = null;
        String result = "";
        JSONObject jsonResult = null;

        HttpPost httppost = new HttpPost(url);
        //httppost.addHeader("content-type", "application/json");
        //httppost.addHeader("User-Agent", userAgent);
        HttpParams httpParams = new BasicHttpParams();

        int timeOutConnection = 5000;
        HttpConnectionParams.setConnectionTimeout(httpParams, timeOutConnection);
        int timeoutSocket = 5000;
        HttpConnectionParams.setSoTimeout(httpParams, timeoutSocket);
        HttpClient httpclient = new DefaultHttpClient(httpParams);

        httppost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));

        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
        jsonResult = new JSONObject(result);
        return null;
    }

    @Override
    protected void onPostExecute(String s) {
        super.onPostExecute(s);
        // this method gets called when doInBackground is ready with processing.

        // onPostExecute is also returend on the UIThread. and doInbackground is not.
        // so you cant setText or something else what involves UI components in the doInbackground.
    }
} 
```

}

剩下的由你来做；）

希望能帮助到你，

亲切的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:54:01.800

请使用此代码

```
List<NameValuePair> Parametri = new ArrayList<NameValuePair>(2); 
```

瞬间

```
List<NameValuePair> Parametri = new ArrayList<NameValuePair>(); 
```

谢谢

# java - Eclipse Content Assist 未激活

> ID：15253857
> 
> 赞同：12
> 
> 时间：2013-03-06T17:18:15.047
> 
> 标签：java, eclipse, ubuntu, content-assist

我可以通过按 Ctrl Space 来显示一个空框，但内容辅助根本不会弹出。我在这里阅读了很多关于这个主题的答案，但没有一个有帮助。

我在用着...

Ubuntu 12.10 Eclipse 版本：3.8.0 Build id：I20120502-2000 Java openjdk-7-jre 7u15-2.3.7-0ubuntu1~12.10 执行环境 JavaSE-1.7 (java-6-openjdk)

我检查了首选项设置，它们看起来很合理。我检查了项目构建设置，它们看起来不错。我没有任何编译错误（只有几行代码。）

关于我的下一步行动有什么建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T17:35:50.543

**Windows** →**首选项**→**常规**→**键**→*恢复默认值*

您可以检查的另一件事：

**应检查**Windows** →**首选项**→ **Java** →**编辑器**→**内容辅助**→**高级**→ *Java 提案。***

 **这应该可以解决问题。

请注意，您不必恢复默认值，请确保`CTRL`+`SPACE`未被其他操作覆盖。

* * *

**正如评论中提到的，有时创建一个新的项目工作区可以解决这个问题..出于某种原因。**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-10T01:08:47.973

转到首选项 > Java > 编辑器 > 内容辅助并粘贴“ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz”。（注意 z 后面的点）进入“Java 的自动激活触发器：”字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-19T09:08:20.850

我自己也遇到了这个问题，事实证明，我的窗口管理器（XFCE）或其他东西会占用空间。所以将它映射到 ctrl+space 以外的其他东西为我解决了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-01T14:09:33.023

当您启动 Eclipse 时，内容辅助（ctrl+空格）可能无法处理上一个会话中打开的资源文件（例如 main.cpp）。尝试关闭这些文件并重新打开它们。控制 (ctrl+space) 是否再次起作用。**

# jquery - 将 .click(function(){ } 添加到 div

> ID：15253859
> 
> 赞同：0
> 
> 时间：2013-03-06T17:18:19.750
> 
> 标签：jquery, html, click

所以我想要它，所以我`<p>`用不同的 id 交替不同。这是我到目前为止所拥有的：

```
$(document).ready(function(){
    $("#quote2").hide();
    $("#quote3").hide();            
    $("#quotes").click(function(){
            if(!$("#quote1").is(":visible") && $("quote3").is(":visible")){
                $('quote3').hide();
                $("quote1").fadeIn('slow');
            }
            if(!$("quote2").is(":visible") && $("quote1").is(":visible")){
                $("quote1").hide();
                $("quote2").fadeIn('slow');
            }
            if(!$("quote3").is(":visible") && $("quote2").is(":visible")){
                $("quote2").hide();
                $("quote3").fadeIn('slow');
            }
    });
}); 
```

基本上，我想单击`<div>`带有 id 的`#quotes`，然后它会交替出现`<p>`(quote1,2,3) 但我所拥有的不起作用。我可以不添加 .click`<div>`吗？

编辑：

```
 $(document).ready(function(){
        $("#quotes").hide();
        $("#quote2").hide();
        $("#quote3").hide();
        $("#quotes").click(function(){
            var that = $(this),
            ps = that.find('p'),
            i = that.find('p:visible').index();
            that.find('p').hide().eq(i + 1 < ps.length ? i + 1 : 0).fadeIn('slow');
        });
    }); 
```

工作得很好，谢谢大卫托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:26:09.187

我可以建议将事情（*很多*）简化为：

```
$('div').click(function(){
    var that = $(this),
        ps = that.find('p'),
        i = that.find('p:visible').index();
    that.find('p').hide().eq(i + 1 < ps.length ? i + 1 : 0).show();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/F2Rsn/)。

但是，此答案基于您的 HTML 标记是或类似于以下假设的假设：

```
<div>
    <p>Quote 1</p>
    <p>Quote 2</p>
    <p>Quote 3</p>
</div> 
```

参考：

*   [`click()`](http://api.jquery.com/click/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`find()`](http://api.jquery.com/find/).
*   [`index()`](http://api.jquery.com/index/).
*   [`show()`](http://api.jquery.com/show/).
*   [`:visible`选择器](http://api.jquery.com/visible-selector/)。

# delphi - 如何在对象存在之前将记录字段设置为“对象过程”以便它可以运行

> ID：15253864
> 
> 赞同：2
> 
> 时间：2013-03-06T17:18:43.530
> 
> 标签：delphi, delphi-2006

我知道的非常不时髦的标题。

我有一系列文本行，我需要按特定顺序执行某些操作。通过定义以下记录结构，我想出了一种方法：

```
TProcessOrderRecord = record
  RecordTypes:       TByteSet;
  InitialiseProcedure: TPreScanProc;
  ProcessProcedure:    TProcessRecord;
  FinaliseProcedure:   TEndScanProc;
end;

AProcessOrderArray = array of TProcessOrderRecord; 
```

Initialise 倾向于调用一个构造函数，该构造函数将填充宿主对象中的一个字段。

Process 将是对象上的一个过程，它将为每个与 RecordTypes 中的记录类型匹配的文本行调用。

Finalize 将倾向于调用析构函数并可能在它知道已处理完整的记录集时进行任何检查。

处理这个数组的方法非常简单：

```
procedure TImport.ScanTransferFile;
var
  i: integer;
  lArrayToProcess: AProcessOrderArray;
begin
  lArrayToProcess := SetUpProcessingOrder(NLPGApp.ImportType);
  for i := low(lArrayToProcess) to high(lArrayToProcess) do
  begin
    ProcessRecordType(lArrayToProcess[i].RecordTypes,     lArrayToProcess[i].InitialiseProcedure, lArrayToProcess[i].ProcessProcedure, lArrayToProcess[i].FinaliseProcedure);
  end;
end;

procedure TImport.ProcessRecordType(const RecordTypesToFind: TByteSet; PreScanProcedure: TPreScanProc; OnFindRecord: TProcessRecord; OnCompleteScan: TEndScanProc);
var
  lLineOfText: string;
  lIntegerRecordID: byte;
begin
  if Assigned(PreScanProcedure) then PreScanProcedure;
  try
    if assigned(OnFindRecord) then
    begin
      Reader.GoToStartOfFile;
      while not Reader.EndOfFile do
      begin
        lLineOfText := Reader.ReadLine;
        lIntegerRecordID := StrToIntDef(GetRecordID(lLineOfText), 0);
        if lIntegerRecordID in RecordTypesToFind then
        begin
          try
            OnFindRecord(lLineOfText);
          except
            on E: MyAppException do
            begin
            // either raise to exit or log and carry on
            end;
          end;
        end;
      end;
    end;
  finally
    // OnCompleteScan usually contains calls to destructors, so ensure it's called
    if Assigned(OnCompleteScan) then OnCompleteScan;
  end;
end; 
```

我的问题是我想这样定义一个记录：

```
RecordTypes = [10]
InitialiseProcedure = ProcToCreateFMyObj
ProcessProcedure = FMyObj.do
FinaliseProcedure = ProcToFreeFMyObj 
```

这编译得很好，但是当 ProcessProcedure 被调用时，因为在设置 ProcessProcedure 时 FMyObj 为 nil，即使现在设置了 FMyObj，TMyObj 的实例也是 nil。有没有什么干净的方法可以让记录在调用时而不是在第一次分配时指向 FMyObj 的实例？

目前我已经在宿主对象上使用了“调用者”方法，然后可以在需要时调用 FMyObj 实例，但这会创建一个包含许多单行方法的相当臃肿的对象。

**编辑以澄清/复杂化问题**

有时一个实例`FObj`可以处理不止一种类型的记录（通常如果它们具有主从关系）。在这种情况下，`InitialiseProcedure`第一个记录类型将创建`FObj`，`FinaliseProcedure`第二个记录将释放`FObj`，并且每个记录`ProcessProcedure`可以引用`FObj`(`do1`和`do2`) 的不同过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:29:03.313

> 目前我已经在宿主对象上使用了“调用者”方法，然后可以在需要时调用 FMyObj 实例，但这会创建一个包含许多单行方法的相当臃肿的对象。

这是正确的解决方案。由于实例在初始化时不可用，您别无选择。

当您使用时，`of object`您正在定义一种称为[方法指针](http://docwiki.embarcadero.com/RADStudio/XE3/en/Procedural_Types#Method_Pointers)的东西。当您分配给方法指针类型的变量时，实例在分配点被捕获。与方法指针关联的实例没有动态解析的机制。实现这一目标的唯一方法是使用运行时委托，这是您当前正在做的。通常情况下，使用另一层间接来解决问题！

您包含许多方法的记录看起来非常像`interface`. 我怀疑最优雅的解决方案将涉及`interface`. 也许在调用时您可以调用一个返回`interface`. 并且该函数将使用`FMyObj`调用时的值来定位相应的接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:04:12.740

是的，可以对您的记录进行额外的运行时初始化：

```
var
  A: TProcessOrderRecord;

begin
  ..
  TMethod(A.ProcessProcedure).Data:= FMyObj;
  ..
end; 
```

尽管我更喜欢不同的解决方案，例如您已经使用的解决方案。

# php - 多维数组 - 我怎样才能让它从一个函数中工作？

> ID：15253865
> 
> 赞同：0
> 
> 时间：2013-03-06T17:18:43.997
> 
> 标签：php, multidimensional-array

我在多维数组中有一组信息，如下所示：

```
$slides = array (
    array (
        'link' => 'page.php',
        'image' => 'image1.jpg',
        'alt' => 'text for alt' 
    ),
    array (
        'link' => 'anotherpage.php',
        'image' => 'image2.jpg',
        'alt' => 'text for alt' 
    )
); 
```

目前使用的是：

```
foreach($slides as $slide => $data){
    echo "<a href=\"{$data['link']}\">
        <img src=\"{$data['image']}\" alt=\"{$data['alt']}\" />
        </a>";
} 
```

现在，我的问题是：我**到底如何让它作为一个函数工作？**

```
function createSlides($slides){ /* foreach loop */ } 
```

我试过这个，但我认为我误解了如何传递数组，因为它是一种语言构造而不是对象。这是我第一次使用多维数组。*另外，我在想我可以控制`$data`函数参数的内容，即`echo createSlides($slides[1,2,4]);`*. 我误解了这一点，还是仅仅是因为数组没有传递给函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:22:34.350

我不确定您是否要求这样做，但就像普通参数一样：

```
function createSlides($slides){
   foreach($slides as $slide => $data){
       echo "<a href=\"{$data['link']}\">
          <img src=\"{$data['image']}\" alt=\"{$data['alt']}\" />
       </a>";
   }
}

createSlides($slides); 
```

# android - FLAG_ACTIVITY_NO_HISTORY 在 Android 4.2 中无法正常工作

> ID：15253866
> 
> 赞同：4
> 
> 时间：2013-03-06T17:18:48.610
> 
> 标签：android, android-4.2-jelly-bean

我们目前正在推出一个网站 url，它指向一个网站，然后重定向到一个 Google Play 市场链接。它是这样启动的

```
public static Intent createAdvertisementLaunchIntent(String url) {
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
    return intent;
} 
```

当用户在市场页面上时，意图是当他们按下后退按钮时，他们应该返回到我们的应用程序。

这在所有设备和浏览器上都没有问题，除非在一种情况下：使用 Android 4.2.2 时，并且仅当浏览器在后台打开时。

在这种情况下，当用户按下后退按钮时，他们会返回到 Chrome 并显示上一个活动选项卡。任何进一步的后退按钮都由 Chrome 处理。

我尝试将此意图与 FLAG_ACTIVITY_NEW_TASK 等其他标志结合使用，但无济于事，而且我的搜索没有带来任何新想法。

这是一个已知问题还是我错过了什么？

谢谢

# java - 通过首选项更改文本大小

> ID：15253872
> 
> 赞同：0
> 
> 时间：2013-03-06T17:19:07.027
> 
> 标签：java, android, listadapter

我想知道是否有人可以帮助我解决问题。

如何根据偏好更改 textView 的文本大小？在我的偏好中，我有一个单选组，并希望根据选中的单选按钮更改文本大小。我想出了以下方法，但这不起作用。

```
SharedPreferences getData = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String values = getData.getString("list", "4");

    if (values.contentEquals("1")){
        tv1.setTextSize(20);
    } 
```

以下是我要更改的菜单：

```
setListAdapter(new ArrayAdapter<String>(MainMenu.this, R.layout.mylist, classes)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:23:07.007

可能你没有在你的`SharedPreferences`.

我敢打赌，`getString`返回 4 因为“列表”没有价值。

所以如果你改为：

```
 if (values.contentEquals("4")){
        tv1.setTextSize(20);
    } 
```

# c# - 分离线程上的 Farseer Physics 非 XNA

> ID：15253873
> 
> 赞同：1
> 
> 时间：2013-03-06T17:19:07.193
> 
> 标签：c#, multithreading, farseer

我正在用没有 XNA 的 Farseer Physics 用 C# 开发游戏。我放入`world.Step(float dt)`了一个单独的线程以使表单保持活动状态（实际上，while 循环会阻塞所有其他操作）。好吧，我认为球，一个动态的物体，运行得更快或更慢取决于 CPU 频率。我考虑过`Thread.Sleep()`通过读取 CPU 频率并将其乘以某种东西来计算延迟时间，但我很确定我错了。我是个小菜鸟。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:25:30.040

`Thread.Sleep`这不是一种准确的计时方法。你想使用类似的东西：

```
Stopwatch timer = new Stopwatch();
timer.Start(); 
```

然后您可以使用它来驱动定时更新循环，如下所示：

```
// Run enough updates to catch up to the current time
private void Idle()
{
    double time = timer.Elapsed.TotalSeconds;
    accumulatedTime += (time - lastTime);
    lastTime = time;

    const double frameTime = 1.0/60.0; // 60 frames per second
    while(accumulatedTime > frameTime)
    {
        world.Step((float)frameTime);
        accumulatedTime -= frameTime;
    }
} 
```

然后，您可以在循环中调用上述`Idle`方法，然后调用一个短路`Sleep`。

或者您可以直接从事件处理程序调用它`Application.Idle`- 直接在 UI 线程上，或通过向您的其他线程发出信号。

# c# - 使用已知和未知字段反序列化 json

> ID：15253875
> 
> 赞同：73
> 
> 时间：2013-03-06T17:19:11.127
> 
> 标签：c#, json, json.net

给定以下 json 结果：默认 json 结果具有一组已知字段：

```
{
    "id": "7908",
    "name": "product name"
} 
```

但是可以使用在请求结果时名称未知的附加字段（在此示例中为`_unknown_field_name_1`和）进行扩展。`_unknown_field_name_2`

```
{
    "id": "7908",
    "name": "product name",
    "_unknown_field_name_1": "some value",
    "_unknown_field_name_2": "some value"
} 
```

我希望 json 结果在具有已知字段属性的类之间进行序列化和反序列化，并将未知字段（没有属性）映射到像字典一样的属性（或多个属性），以便它们可以是访问和修改。

```
public class Product
{
    public string id { get; set; }
    public string name { get; set; }
    public Dictionary<string, string> fields { get; set; }
} 
```

我想我需要一种方法来插入 json 序列化程序并自己为丢失的成员进行映射（用于序列化和反序列化）。我一直在寻找各种可能性：

*   json.net 和自定义合约解析器（不知道怎么做）
*   datacontract 序列化器（只能覆盖 onserialized，onserializing）
*   序列化为动态并进行自定义映射（这可能有效，但似乎需要做很多工作）
*   让产品从 DynamicObject 继承（序列化程序使用反射并且不调用 trygetmember 和 trysetmember 方法）

我正在使用restsharp，但可以插入任何序列化程序。

哦，我无法更改 json 结果，[这](https://stackoverflow.com/questions/6843754/deserializing-json-with-unknown-fields)或[这](https://stackoverflow.com/questions/13072447/how-to-deserialize-variable-size-json-string-with-variable-names)也对我没有帮助。

**更新：** 这看起来更像： http: [//geekswithblogs.net/DavidHoerster/archive/2011/07/26/json.net-custom-convertersndasha-quick-tour.aspx](http://geekswithblogs.net/DavidHoerster/archive/2011/07/26/json.net-custom-convertersndasha-quick-tour.aspx)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2014-02-13T19:38:27.663

解决这个问题的一个更简单的选择是使用JSON .NET中的[JsonExtensionDataAttribute](https://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_JsonExtensionDataAttribute.htm)

```
public class MyClass
{
   // known field
   public decimal TaxRate { get; set; }

   // extra fields
   [JsonExtensionData]
   private IDictionary<string, JToken> _extraStuff;
} 
```

[这里](http://james.newtonking.com/archive/2013/10/14/json-net-5-0-release-7-immutable-collections)的项目博客上有一个示例

**更新**请注意，这需要 JSON .NET v5 版本 5 及更高版本

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T18:37:57.503

见[https://gist.github.com/LodewijkSioen/5101814](https://gist.github.com/LodewijkSioen/5101814)

你要找的是一个习俗[`JsonConverter`](http://james.newtonking.com/projects/json/help/index.html?topic=html/CustomJsonConverter.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T18:54:55.993

这是一种你可以解决它的方法，虽然我不太喜欢它。我使用 Newton/JSON.Net 解决了它。我想您也可以使用 JsonConverter 进行反序列化。

```
private const string Json = "{\"id\":7908,\"name\":\"product name\",\"_unknown_field_name_1\":\"some value\",\"_unknown_field_name_2\":\"some value\"}";

    [TestMethod]
    public void TestDeserializeUnknownMembers()
    {
        var @object = JObject.Parse(Json);

        var serializer = new Newtonsoft.Json.JsonSerializer();
        serializer.MissingMemberHandling = Newtonsoft.Json.MissingMemberHandling.Error;
        serializer.Error += (sender, eventArgs) =>
            {
                var contract = eventArgs.CurrentObject as Contract ?? new Contract();
                contract.UnknownValues.Add(eventArgs.ErrorContext.Member.ToString(), @object[eventArgs.ErrorContext.Member.ToString()].Value<string>());
                eventArgs.ErrorContext.Handled = true;
            };

        using (MemoryStream memoryStream = new MemoryStream(Encoding.UTF8.GetBytes(Json)))
        using (StreamReader streamReader = new StreamReader(memoryStream))
        using (JsonReader jsonReader = new JsonTextReader(streamReader))
        {
            var result = serializer.Deserialize<Contract>(jsonReader);
            Assert.IsTrue(result.UnknownValues.ContainsKey("_unknown_field_name_1"));
            Assert.IsTrue(result.UnknownValues.ContainsKey("_unknown_field_name_2"));
        }
    }

    [TestMethod]
    public void TestSerializeUnknownMembers()
    {
        var deserializedObject = new Contract
        {
            id = 7908,
            name = "product name",
            UnknownValues = new Dictionary<string, string>
        {
            {"_unknown_field_name_1", "some value"},
            {"_unknown_field_name_2", "some value"}
        }
        };

        var json = JsonConvert.SerializeObject(deserializedObject, new DictionaryConverter());
        Console.WriteLine(Json);
        Console.WriteLine(json);
        Assert.AreEqual(Json, json);
    }
}

class DictionaryConverter : JsonConverter
{
    public DictionaryConverter()
    {

    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(Contract);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var contract = value as Contract;
        var json = JsonConvert.SerializeObject(value);
        var dictArray = String.Join(",", contract.UnknownValues.Select(pair => "\"" + pair.Key + "\":\"" + pair.Value + "\""));

        json = json.Substring(0, json.Length - 1) + "," + dictArray + "}";
        writer.WriteRaw(json);
    }
}

class Contract
{
    public Contract()
    {
        UnknownValues = new Dictionary<string, string>();
    }

    public int id { get; set; }
    public string name { get; set; }

    [JsonIgnore]
    public Dictionary<string, string> UnknownValues { get; set; }
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-22T01:23:15.923

因为我最近遇到了类似的问题，所以我想我会把我的帽子扔在戒指上。这是我想反序列化的 JSON 示例：

```
{
    "agencyId": "agency1",
    "overrides": {
        "assumption.discount.rates": "value: 0.07",
        ".plan": {
            "plan1": {
                "assumption.payroll.growth": "value: 0.03",
                "provision.eeContrib.rate": "value: 0.35"
            },
            "plan2": {
                ".classAndTier": {
                    "misc:tier1": {
                        "provision.eeContrib.rate": "value: 0.4"
                    },
                    "misc:tier2": {
                        "provision.eeContrib.rate": "value: 0.375"
                    }
                }
            }
        }
    }
} 
```

这适用于覆盖在不同级别应用并沿树继承的系统。无论如何，我想要的数据模型可以让我拥有一个带有这些特殊继承规则的属性包。

我最终得到的是以下内容：

```
public class TestDataModel
{
    public string AgencyId;
    public int Years;
    public PropertyBagModel Overrides;
}

public class ParticipantFilterModel
{
    public string[] ClassAndTier;
    public string[] BargainingUnit;
    public string[] Department;
}

public class PropertyBagModel
{
    [JsonExtensionData]
    private readonly Dictionary<string, JToken> _extensionData = new Dictionary<string, JToken>();

    [JsonIgnore]
    public readonly Dictionary<string, string> Values = new Dictionary<string, string>();

    [JsonProperty(".plan", NullValueHandling = NullValueHandling.Ignore)]
    public Dictionary<string, PropertyBagModel> ByPlan;

    [JsonProperty(".classAndTier", NullValueHandling = NullValueHandling.Ignore)]
    public Dictionary<string, PropertyBagModel> ByClassAndTier;

    [JsonProperty(".bargainingUnit", NullValueHandling = NullValueHandling.Ignore)]
    public Dictionary<string, PropertyBagModel> ByBarginingUnit;

    [OnSerializing]
    private void OnSerializing(StreamingContext context)
    {
        foreach (var kvp in Values)
            _extensionData.Add(kvp.Key, kvp.Value);
    }

    [OnSerialized]
    private void OnSerialized(StreamingContext context)
    {
        _extensionData.Clear();
    }

    [OnDeserialized]
    private void OnDeserialized(StreamingContext context)
    {
        Values.Clear();
        foreach (var kvp in _extensionData.Where(x => x.Value.Type == JTokenType.String))
            Values.Add(kvp.Key, kvp.Value.Value<string>());
        _extensionData.Clear();
    }
} 
```

基本思想是这样的：

1.  JSON.NET 反序列化的 PropertyBagModel 填充了 ByPlan、ByClassAndTier 等字段，还填充了私有 _extensionData 字段。
2.  然后 JSON.NET 调用私有 OnDeserialized() 方法，这会将数据从 _extensionData 移动到适当的 Values （否则将其放在地板上 - 如果您想知道它，大概可以记录它）。然后我们从 _extensionData 中删除额外的垃圾，这样它就不会消耗内存。
3.  在序列化时， OnSerializing 方法会调用我们将内容移动到 _extensionData 中以便保存。
4.  序列化完成后，调用 OnSerialized 并从 _extensionData 中删除多余的内容。

我们可以在需要时进一步删除并重新创建 _extensionData 字典，但我没有看到其中的真正价值，因为我没有使用大量这些对象。为此，我们只需在 OnSerializing 上创建并在 OnSerialized 上删除。在 OnDeserializing 上，我们可以释放它，而不是清除它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-04T09:18:04.923

我正在研究类似的问题并找到了这篇文章。

这是一种使用反射的方法。

为了使其更通用，应该检查属性的类型，而不是简单地在 propertyInfo.SetValue 中使用 ToString()，除非 OFC 所有实际属性都是字符串。

此外，小写的属性名称在 C# 中不是标准的，但鉴于 GetProperty 区分大小写，因此几乎没有其他选项。

```
public class Product
{
    private Type _type;

    public Product()
    {
        fields = new Dictionary<string, object>();
        _type = GetType();
    }

    public string id { get; set; }
    public string name { get; set; }
    public Dictionary<string, object> fields { get; set; }

    public void SetProperty(string key, object value)
    {
        var propertyInfo = _type.GetProperty(key);
        if (null == propertyInfo)
        {
            fields.Add(key,value);
            return;
        }
        propertyInfo.SetValue(this, value.ToString());
    }
}
...
private const string JsonTest = "{\"id\":7908,\"name\":\"product name\",\"_unknown_field_name_1\":\"some value\",\"_unknown_field_name_2\":\"some value\"}";

var product = new Product();
var data = JObject.Parse(JsonTest);
foreach (var item in data)
{
    product.SetProperty(item.Key, item.Value);
} 
```

# recursion - 如何通过递归算法将“不可能”的值冒泡？

> ID：15253886
> 
> 赞同：1
> 
> 时间：2013-03-06T17:19:40.597
> 
> 标签：recursion, dynamic-programming

我有一个具有特殊情况的递归算法，例如一个路径算法，如果路径良好，我想将距离加 1，但如果它遇到死胡同，则返回 -1。当使用一堆递归调用解决最大化问题时，这是有问题的。

有没有更好的方法来编写以下代码：

```
def rec(n):
  if n == 1:
    return -1
  if n == 0:
    return 1
  val = rec(n - 2)
  if val == -1:
    return -1
  else:
    return val + 1 
```

因此`rec(4) = 2`，`rec(3) = -1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:37:07.960

在 Python 中，并非如此。`None`您可以通过返回而不是 -1在 Python 中使其更清晰；这样做的好处是错误地添加到无效值会引发异常。

具有更严格的类型系统和“可能”或可选值的良好概念的语言使其变得轻而易举。说，哈斯克尔：

```
rec 1 = Nothing
rec 0 = Just 1
rec n = map ((+) 1) $ rec (n - 2) 
```

`map`调用意味着它将添加框中的任何内容（如果是），`Just x`并返回无效值（`Nothing`）不变。当然，您可以设计自己的更复杂的类型，允许多种错误条件或其他任何情况，并且仍然获得类似的简单结果。这在 OCaml、F#、Standard ML 和 Scala 中几乎一样简单。

`None`您可以通过定义一个辅助函数在 Python中模拟这种方法：

```
def mapMaybe(obj, f):
    if obj is None:
        return None
    else:
        return f(obj) 
```

然后你可以这样做：

```
return mapMaybe(val, lambda x: x + 1) 
```

但我不知道我是否真的建议这样做。

模拟 Scala 书中的一个技巧，也可以将所有这些都包含在生成器理解中（未经测试）：

```
def maybe(x):
    if x is not None:
        yield x

def firstMaybe(it):
    try:
        return it.next()
    except StopIteration:
        return None 
```

然后：

```
return firstMaybe(x + 1 for x in maybe(val)) 
```

但这确实是非标准、非惯用的 Python。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:56:13.147

一个有用的技术是选择一个“没有可用的解决方案”值，这样处理它就好像它代表一个解决方案一样仍然会产生一个“没有可用的解决方案”值。例如，如果低数字代表最佳解决方案，则可以选择一个大于任何感兴趣的有效解决方案的值。如果使用整数类型，则必须确保“没有可用的解决方案”值足够小，以至于对其进行操作就好像它是一个有效的解决方案不会导致数值溢出[例如，如果递归调用总是假设某个位置的解决方案将比递归调用生成的解决方案的成本大一，然后使用大于 999,999,999 的值来表示“没有可用的解决方案”应该有效；但是，如果代码可能将解决方案的成本视为其他两个解决方案的总和，则可能需要选择较小的值]。或者，一个人可能会从使用浮点类型中受益，因为“正无穷大”的值将比任何其他值都大，并且向它添加任何正数或有限量都不会改变这一点。

# youtube - YouTube API v3：喜欢没有设置频道的视频

> ID：15253889
> 
> 赞同：1
> 
> 时间：2013-03-06T17:20:15.247
> 
> 标签：youtube, youtube-api

我有代码可以通过 YouTube API v3“喜欢”视频。起初，我的代码抛出了 403 Forbidden 错误，我追踪到我的 youtube 帐户没有与之关联的频道这一事实。我通过访问 youtube.com 创建了一个频道，然后单击视频下方的“添加到”链接。出现一个弹出窗口，上面写着“设置您的频道以在 YouTube 上创建您的播放列表”。一旦我填写了该表格并单击继续，代码就停止返回 403，并开始工作。

无论如何“喜欢”视频而无需通过此频道设置过程？或者如果没有，有什么方法可以判断用户是否在他们的帐户上没有频道，并在需要时提示他们进行设置？

作为参考，我的代码是用 python 编写的，并且基于此处的示例： [https ://developers.google.com/youtube/v3/docs/playlistItems/insert](https://developers.google.com/youtube/v3/docs/playlistItems/insert)

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:04:05.687

**编辑**：现在有一个[`channel.status.isLinked`](https://developers.google.com/youtube/v3/docs/channels#status.isLinked)属性可以可靠地告诉您频道资源是否在 v3 中“链接”。

话虽如此，使用 YouTube.com 网络界面为没有频道的帐户点赞视频是可能的，而且我也相信使用旧版 GData API 的[v2.1是可能的。](http://apiblog.youtube.com/2011/10/introducing-google-account-support-and.html)在 v3 中你不能这样做的事实对我来说听起来像是一个错误，我会在内部升级它。

# sql - mysql查询需要很多时间

> ID：15253894
> 
> 赞同：-4
> 
> 时间：2013-03-06T17:20:42.497
> 
> 标签：sql, ruby-on-rails

rails 中的这个查询并没有结束。为什么？查询是：

```
 SELECT CONCAT(f.name, ' ', f.parent_names) AS FullName,
       stts.name AS 'Status',
       u.name AS Unit,
       city.name AS City,
       hus.mobile1 AS HusbandPhone,
       wife.mobile1 AS WifePhone,
       f.phone AS HomePhone,
       f.contact_initiation_date AS InitDate,
       fh.created_at AS StatusChangeDate,
       cmt.created_at AS CommentDate,
       cmt.comment AS LastComment,
       f.reconnection_date AS ReconnectionDate,
  (SELECT GROUP_CONCAT(t.name, ' ')
   FROM taggings tgs
   JOIN tags t ON tgs.tag_id = t.id
   WHERE tgs.taggable_type = 'family'
     AND tgs.taggable_id = f.id) AS HandlingStatus
FROM families f
JOIN categories stts ON f.family_status_cat_id = stts.id
JOIN units u ON f.unit_id = u.id
JOIN categories city ON f.main_city_cat_id = city.id
LEFT JOIN contacts hus ON f.husband_id = hus.id
LEFT JOIN contacts wife ON f.wife_id = wife.id
LEFT JOIN comments cmt ON f.id = cmt.commentable_id
AND cmt.created_at =
  (SELECT MAX(created_at)
   FROM comments
   WHERE commentable_id = f.id)
LEFT JOIN family_histories fh ON f.id = fh.family_id
AND fh.created_at =
  (SELECT MAX(created_at)
   FROM family_histories
   WHERE family_id = f.id
     AND family_history_cat_id = 1422)
AND fh.family_history_cat_id = 1422
WHERE 1=0
  OR (f.family_status_cat_id = 1422
      AND (  (SELECT MAX(_fh.created_at)
              FROM family_histories _fh
              WHERE _fh.family_history_cat_id = 1422
                AND _fh.family_id = f.id
                AND _fh.new_val LIKE '%1422%') BETWEEN '2010-03-10' AND '2011-03-02')) 
```

我错过了什么吗？Synatx 是正确的，那么问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:34:39.327

我认为问题是你有很多子查询。它必须花费很多时间。

我的建议是将通过子查询获得的一些信息存储在主表中。

或者，您始终可以尝试创建存储过程以加快该过程。

最好的祝福

# c# - 从图像中获取 r,g,b 像素

> ID：15253896
> 
> 赞同：0
> 
> 时间：2013-03-06T17:20:44.883
> 
> 标签：c#, image-processing, emgucv

我是图像处理的新手，我将 emgu cv 与 c# 一起使用，但我遇到了问题。如何从图像的 RGB 值中获取 R、G、B 像素值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T13:35:40.680

以下是获取 RGB 值所需的内容：

```
//load image
Image<Bgr, byte> image = new Image<Bgr, byte>("sample.png");

//get the pixel from [row,col] = 24,24
Bgr pixel = image[24, 24];

//get the b,g,r values
double b = pixel.Blue;
double g = pixel.Green;
double r = pixel.Red; 
```

# python - 停止 pylab 覆盖图？

> ID：15253897
> 
> 赞同：5
> 
> 时间：2013-03-06T17:20:47.663
> 
> 标签：python, matplotlib, overlay

在我的代码中，我试图定期创建一个图形并将图形保存到一个文件中。代码如下所示：

```
import pylab as p

def simpledist(speclist,totalbugs,a):
    data = [float(spec.pop)/float(totalbugs) for spec in speclist]
    p.hist(data)
    p.savefig('/Home/s1215235/Documents/python/newfolder/' + str(a) + '.png') 
```

（`a`是一个计数器）

但是，这样做意味着创建的每个新图都会一直覆盖到之前的图上。我如何让它知道一旦我保存了图，我希望它开始一个新图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T17:25:42.433

清除情节使用[`p.clf`](http://matplotlib.org/api/pyplot_api.html?highlight=clf#matplotlib.pyplot.clf)

```
def simpledist(speclist,totalbugs,a):
    data = [float(spec.pop)/float(totalbugs) for spec in speclist]
    p.clf()
    p.hist(data)
    p.savefig('/Home/s1215235/Documents/python/newfolder/' + str(a) + '.png') 
```

假设这`p`是一个`matplotlib.pyplot`或`figure`实例，也是@bernie 所说的 - 这也可以正常工作。

**@Yann 的评论**

如果您已经设置了标题、轴标签等，那么这将破坏所有这些设置。最好按照他说的去做并尝试

```
 p.gca().cla() 
```

保存你的辛勤工作。谢谢雅恩！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:25:57.257

编辑：从性能的角度来看，danodonovan 的答案很可能比这个更可取。

* * *

您没有显示如何`p`创建，但我认为它类似于：

```
import matplotlib.pyplot as plt
p = plt.figure() 
```

在这种情况下，您只需要确保每次都创建一个新图形。例子：

```
def simpledist(speclist,totalbugs,a):
    data = [float(spec.pop)/float(totalbugs) for spec in speclist]
    p = plt.figure() # let's have a new figure why don't we 
    p.hist(data)
    p.savefig('/Home/s1215235/Documents/python/newfolder/' + str(a) + '.png') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T17:45:01.650

您也可以，只需`hold`关闭[(doc)](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.hold)

```
import pylab as p
ax = p.gca()
ax.hold(False)

def simpledist(speclist,totalbugs,a):
    data = [float(spec.pop)/float(totalbugs) for spec in speclist]
    ax.hist(data)
    ax.figure.savefig('/Home/s1215235/Documents/python/newfolder/' + str(a) + '.png') 
```

当您添加新绘图时，它将为您清除轴。

如果你有一堆其他的艺术家，并且只想删除最近的一个，你可以使用`remove`艺术家的实例函数。

```
import pylab as p
ax = p.gca()
# draw a bunch of stuff onto the axse

def simpledist(speclist,totalbugs,a):
    data = [float(spec.pop)/float(totalbugs) for spec in speclist]
    n, bins, h_art = ax.hist(data)
    ax.figure.savefig('/Home/s1215235/Documents/python/newfolder/' + str(a) + '.png')
    for ha in h_art:
        h_a.remove()
    # ax.figure.canvas.draw() # you might need this 
```

# firefox - VBS 启动自定义 Firefox 窗口和 URL

> ID：15253902
> 
> 赞同：0
> 
> 时间：2013-03-06T17:20:59.893
> 
> 标签：firefox, vbscript

我一直在混合一些脚本来启动带有链接到网络摄像头的 URL 的便携式版本的 Firefox。我的目标是让 2 个脚本使用相同的 FF.exe，但转到 2 个不同的 URLS/IP。我试图通过删除滚动条。菜单和状态来限制浏览器功能，因此只能看到网络摄像头控件和视图。

这是当前代码，但我似乎犯了一个错误，因为现在没有显示 URL，只有启动时的默认值。尺码很完美。

```
dim wshshell

FirefoxProfile = "Profile"
FirefoxPath = "C:\ADMIN\FF\FF.exe"
webappurl = "http://Domain.com"
Height = "870"
Width = "920"

Set wshshell = WScript.CreateObject("WScript.Shell")

wshshell.run """" & FirefoxPath & """ -P """ & FirefoxProfile & """ -Height """ & Height & """ -Width """ & Width & "" & webappurl

Set wshshell = Nothing
wscript.quit 
```

您可以提供的任何帮助或只是朝着正确方向轻推将不胜感激。这是我发现的其他东西，所以也许可以使用它，不幸的是，我认为它本身没有任何用处。

```
window.open('Domain.com',null,"height=100px,width=100px,status=0,toolbar=0,menubar=0,location=0"); 
```

工作代码：

```
dim wshshell

Function qq(str)
qq = Chr(34) & str & Chr(34)
End Function

FirefoxProfile = "Profile"
FirefoxPath = "C:\ADMIN\FF\FF.exe"
webappurl = "172.22.111.8"
Height = "700"
Width = "920"
Status ="0"
Toolbar = "0"
Menubar = "0"

Set wshshell = WScript.CreateObject("WScript.Shell")

wshshell.run qq(FirefoxPath) & " -P " & qq(FirefoxProfile) _
& " -status " & qq(status) & " -Toolbar " & qq(toolbar) & " -menubar " & qq(menubar) _
& " -Height " & qq(Height) & " -Width " & qq(Width) _
& " " & webappurl

Set wshshell = Nothing
wscript.quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:09:03.793

我怀疑你的问题出在这里：

```
wshshell.run ... & """ -Width """ & Width & "" & webappurl 
```

`""`当您可能需要一个右双引号后跟一个空格时，该指令中的最后一个只是一个空字符串：

```
wshshell.run ... & """ -Width """ & Width & """ " & webappurl 
```

我通常建议使用引用函数来避免引用融合：

```
Function qq(str)
  qq = Chr(34) & str & Chr(34)
End Function

'...

wshshell.run qq(FirefoxPath) & " -P " & qq(FirefoxProfile) _
  & " -Height " & qq(Height) & " -Width " & qq(Width) _
  & " " & webappurl 
```

# c# - 解析 Java 地图 从 XML 到 C# 对象

> ID：15253908
> 
> 赞同：0
> 
> 时间：2013-03-06T17:21:22.903
> 
> 标签：c#, java, .net, xml, xml-serialization

嘿，每个人都有一个关于在 C# .net 4 MVC 3 中解析一些 XML 的问题。

我有一个从 java 应用程序序列化为 XML 的 Map (HashMap)。

我需要将其解析为 dotnet 端的对象，但似乎无法弄清楚。在我的研究中，我发现您无法序列化为`Dictionary<string, string>`.

其他人提出了一个`public struct KeyValuePair<K, V>`，但似乎没有用。

还尝试了一个`[XmlArray("mapConfig")]`

先决条件之一是我们必须使用`System.Xml.Serialization`，因为我们有一个抽象的信使类，如果我不是绝对必须的话，我想避免改变它。

如果必须，我可能会更改 Java 对象，如果这会使这更容易，但如果可能的话，我宁愿使用已经存在的对象。如果它有助于 Java 层使用 Xstream。

这是从 Java 发送的一大段 XML

```
<ConfigurationMap>
    <mapConfig class="hashtable">
      <entry>
        <string>Key1</string>
        <string>Value1</string>
      </entry>
      <entry>
        <string>Key2</string>
        <string>Value2</string>
      </entry>
      <entry>
        <string>Key3</string>
        <string>Value3</string>
      </entry>
      <entry>
        <string>Key4</string>
        <string>Value4</string>
      </entry>
    </mapConfig>
</ConfigurationMap> 
```

谢谢，如果您需要更多信息，请告诉我。期待答案。

**- 更新 -**

我认为这很明显，但我应该提到 XML 将以字符串的形式返回到我提到的抽象消息中。当前方法使用：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(this.ResponseXml);
XmlElement main = doc.DocumentElement;

XmlElement cse = util.getElementsFirstChild(main, "MessagePayload");
XmlElement ccs = util.getElementsFirstChild(cse, "ReturnedObjectNameHERE"); 
```

`System.Xml`然后我们使用模型上的属性反序列化片段。

这是我们使用一些通用属性的模型的简单示例：

```
[XmlRoot("list")]
public class SearchResults : List<CSearchResult>
{
    public SearchResults() { }
}

[XmlRoot("SearchResult")]
public class SearchResult
{
    [XmlElement("Id")]
    public string OrgUnitId { get; set; }

    [XmlElement("Type")]
    public Type Type { get; set; }

    [XmlElement("Name")]
    public string Name { get; set; }

    [XmlElement("Description")]
    public string Description { get; set; }
} 
```

**-- 更新 2 --** 我能够使用下面的这个模型类获得一些不错的模型绑定

```
[XmlRoot("ConfigurationMap")]
public class ConfigurationMap
{
    [XmlElement("mapConfig")]
    public MapConfig mapConfig { get; set; }

}

[XmlRoot("mapConfig")]
public class MapConfig
{
    [XmlArray("entry")]
    public List<string> entry { get; set; }
} 
```

唯一的问题是 Object 属性 mapconfig 只是将所有条目聚集在一个列表中，这对于模型来说是有意义的。

试图弄乱数组类型，看看我是否能得到更好的结果。看着制作`MapConfig`一个数组`Entry`。我可以保留`Entry`一个列表或创建`Entry`一个数组，以便对象结构变为：

```
MapConfig: [[key1, value1], [key2, value2], [key3, value3], [key4, value4],] 
```

试图确定这是否是一个更好的结构。

在我解决这个问题时，任何关于此的建议都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:44:17.810

你可以创建一个类来序列化成......所以在xml上运行xsd.exe......

```
C:\>xsd test.xml
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.17929]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'C:\test.xsd'.

C:\>xsd test.xsd /classes
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.17929]
Copyright (C) Microsoft Corporation. All rights reserved.
Writing file 'C:\test.cs'. 
```

然后只需使用简单的 c# XmlSerializer ...

```
NewClassName object = xml.DeSerializeStringToObject<NewClassName>(); 
```

下面的助手类

```
public static class XmlSerializerHelper
{
    public static T DeSerializeStringToObject<T>(this string sxml)
    {
        using (XmlTextReader xreader = new XmlTextReader(new StringReader(sxml.Replace("&", "&amp;"))))
        {
            XmlSerializer xs = new XmlSerializer(typeof(T));
            return (T)xs.Deserialize(xreader);
        }
    }

    public static string SerializeObjectToString(this object obj)
    {
        using (MemoryStream stream = new MemoryStream())
        {
            XmlSerializer x = new XmlSerializer(obj.GetType());
            x.Serialize(stream, obj);
            return Encoding.Default.GetString(stream.ToArray());
        }
    }
} 
```

当然，数组中的第一个字符串将是键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:05:19.423

解决方案似乎比我想象的要简单，但实际上取决于选择正确的模型属性组合来正确解析。

这是我决定使用的一个，因为它将每个条目分成自己的列表项。

```
[XmlRoot("ConfigurationMap")]
public class ConfigurationMap
{
    [XmlArray("mapConfig")]
    [XmlArrayItem("entry")]
    public List<Entry> MapConfig { get; set; }

}

[XmlRoot("entry")]
public class Entry
{
    [XmlElement("string")]
    public List<string> entry { get; set; }
} 
```

希望这对其他人有帮助。感谢大家的意见和建议。

# html - 当 Web 浏览器屏幕尺寸发生变化时，如何更改我的 html 输入字段？

> ID：15253909
> 
> 赞同：1
> 
> 时间：2013-03-06T17:21:30.003
> 
> 标签：html, css

我的网页中有搜索字段，现在我需要在网络浏览器屏幕尺寸更改时更改尺寸。

假设最初我有我的网络浏览器屏幕的全尺寸，所以它会根据最大宽度显示，现在当我减小网络浏览器屏幕尺寸时，它也会减小搜索文件的大小，直到最小宽度。任何想法我该怎么做？，这是我尝试过的。

```
.navbar-search input[type="text"]{
    font-size: 15px;
    height: auto;
    margin-bottom: 05px;
    max-width: 565px;
    min-width: 50px;
} 
```

这里我找到了一个例子，如果你缩小屏幕尺寸，搜索栏的尺寸也会改变。[这个链接](http://soundready.fm/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T18:16:24.993

有两种方法可以做到这一点。

一种是简单地使用百分比而不是硬编码像素。如果您`input`在 a 中有一个字段`div`，则可以将输入字段的宽度指定为 div 总宽度的百分比，如下所示：

```
input {
  max-width: 200x;
  width: 80%;
  min-width: 50px;
} 
```

另一种方法是使用更复杂的[CSS3 媒体查询](http://en.wikipedia.org/wiki/Media_queries)。如果你想使用它们，快速[谷歌搜索](https://www.google.com/search?q=media%20queries%20tutorial)会有所帮助。

使用百分比总是更容易，但不会为您提供可能需要的精细控制。做出明智的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T17:32:51.683

他们正在使用@media 查询来做到这一点

CSS：

```
@media (max-width: 480px){
    /* ... */
    .header .search-query{width:100px}
} 
```

然后他们针对不同的上下文使用不同的@ [media-queries](http://en.wikipedia.org/wiki/Media_queries)重新格式化输入宽度

```
@media (max-width: 680px){
    /* ... */
    .header .search-query{width:150px}
} 
```

* * *

> Media Queries 是一个 CSS3 模块，允许内容渲染适应屏幕分辨率等条件（例如智能手机与高清屏幕）。它于 2012 年 6 月成为 W3C 推荐标准。[1](http://en.wikipedia.org/wiki/Media_queries)并且是响应式 Web 设计的基石技术。
> 
> 媒体查询由媒体类型和至少一个表达式组成，该表达式通过使用媒体特征（例如宽度、高度和颜色）来限制样式表的范围。在 CSS3 中添加的媒体查询让内容的呈现可以针对特定范围的输出设备进行定制，而无需更改内容本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T21:58:06.173

我想说想想其他选项（而不是 div、css 和 @media），比如[Twitter bootstrap](http://twitter.github.com/bootstrap/index.html)。

它带有响应式 css `bootstrap-responsive.css`，如关于您的问题，请查看[此链接](http://twitter.github.com/bootstrap/base-css.html#forms)，您有多种选择`form`。

您可以将屏幕尺寸重新调整为手机屏幕，但布局工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T17:24:32.310

您需要设置最大宽度、最小宽度和具有百分比的宽度，而不是设定值。（宽度：75%，不是 75px）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-08T08:20:57.133

在创建容器之前使用百分比宽度，确保它溢出，显示为块然后静态。

```
.card {padding: 20px;} /*create container first*/
.search-container {overflow: hidden; border: 1px solid grey; background: white; display: block ; border-radius: 15px;}
.search-container input[type=text] {position: static; border: 1px dotted red; height: 30px; width: 90%; outline: none;}
/*you can set border to 'none'*/
/*Adjust width% in last css you like, incase you put icon*/
```

```
<div class="card">
  <div class="search-container">
    <form>
     <input type="text" maxlength="50" placeholder="Search.." name="search">
      </form>
  </div>
</div> 
```

# java - 康威人生游戏

> ID：15253912
> 
> 赞同：-4
> 
> 时间：2013-03-06T17:21:36.733
> 
> 标签：java, arrays, boolean

我正在尝试写康威的人生游戏。现在我用加号表示活细胞，用负号表示死细胞。我的第一代看起来不错，然后出现越界错误。此外，我想在打印用户时为用户添加生成计数器。这是错误代码

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10
at Life.Neighbors(Life.java:56)
at Life.nextGen(Life.java:35)
at Life.main(Life.java:18) 
```

这是到目前为止的代码

```
import java.util.Scanner;

public class Life {

    public static boolean[][] gen(){
        boolean[][] matrix = new boolean[10][10];
        for(int i = 0; i < matrix.length; i++)
            for(int j = 0; j < matrix.length; j++)
                if( Math.random() > 0.7 )
                    matrix[i][j] = true;
        return matrix;
    }

    public static void main(String[] args){
        boolean[][] world = gen();
        show(world);
        System.out.println();
        world = nextGen(world);
        show(world);
        Scanner s = new Scanner(System.in);
        while(s.nextLine().length() == 0){
            System.out.println();
            world = nextGen(world);
            show(world);

        }
    }

    public static boolean[][] nextGen(boolean[][] world){
        boolean[][] newWorld 
            = new boolean[world.length][world[0].length];
        int num;
        for(int i = 0; i < world.length; i++){
            for(int j = 0; j < world[0].length; j++){
                num = Neighbors(world, i, j);
                if( occupiedNext(num, world[i][j]) )
                    newWorld[i][j] = true;
            }
        }
        return newWorld;
    }

    public static boolean occupiedNext(int Neighbors, boolean occupied){
        if( occupied && (Neighbors == 2 || Neighbors == 3))
            return true;
        else if (!occupied && Neighbors == 3)
            return true;
        else
            return false;
    }

    public static int Neighbors(boolean[][] world, int row, int col) {
        int num = world[row][col] ? -1 : 0;
        for(int i = row - 1; i <= row + 1; i++)
            for(int j = col - 1; j <= col + 1; j++)
                if( inbounds(world, i, j) && world[i][j] )
                    num++;

        return num;
    }

    public static boolean inbounds(boolean[][] world, int i, int j) {
        return i >= 0 && i < world.length && j >= 0 &&
        i < world[0].length;
    }
    public static void show(boolean[][] matrix){
        String s = "";
        for(boolean[] row : matrix){
            for(boolean val : row)
                if(val)
                    s += "+";
                else
                    s += "-";
            s += "\n";
        }
        System.out.println(s);

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:27:46.767

`inbounds`您用来确保坐标 (i,j) 没有超出范围的方法是错误的：

```
public static boolean inbounds(boolean[][] world, int i, int j) {
    return i >= 0 && i < world.length && j >= 0 && i < world[0].length;
} 
```

事实上，在最后一次检查中，您正在与 比较`i`，`world[0].length`当它应该是`j`：

```
public static boolean inbounds(boolean[][] world, int i, int j) {
    return i >= 0 && i < world.length && j >= 0 && j < world[0].length;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:30:50.823

快速观察，您写道：

 `````
public static boolean inbounds(boolean[][] world, int i, int j) {
        return i >= 0 && i < world.length && j >= 0 &&
        i < world[0].length; 
````  `我认为也许最终的比较应该是：

```
... && j < world[0].length; 
```

而不是我。``

# java - 本机 Java 方法是否等同于静态 Java 方法？

> ID：15253914
> 
> 赞同：15
> 
> 时间：2013-03-06T17:21:39.253
> 
> 标签：java, java-native-interface

我正在将一些本机方法重写为常规 Java 方法。

本机方法实际上是静态的吗？或者是否有过隐含“this”参数的情况？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-06T17:43:44.850

本机方法可以是`static`或非`static`，就像常规的 Java 方法一样。

非`static`本地方法接收`this`引用，`static`而不是接收对包含类的引用。

来自[JNI 规范](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/design.html#wp715)：

> 本机方法参数
> 
> JNI 接口指针是本地方法的第一个参数。JNI 接口指针的类型为 JNIEnv。第二个参数根据本机方法是静态的还是非静态的而有所不同。非静态本机方法的第二个参数是对对象的引用。静态本地方法的第二个参数是对其 Java 类的引用。

# java - 服务器通过 Java 中的套接字对选定客户端的响应

> ID：15253916
> 
> 赞同：0
> 
> 时间：2013-03-06T17:21:52.920
> 
> 标签：java, sockets, tcp

我将在 2 个 Android 设备之间用 Java 创建简单的聊天。我找到了简单的服务器脚本，但我是编程套接字的新手。

问题：我想从客户端 A 接收消息并发送给客户端 B。

我知道如何为同一个客户端创建“回声”响应，但如何向另一个客户端发送消息？

现在服务器看起来像这样：

```
 {
             String clientSentence;
             String capitalizedSentence;
             ServerSocket welcomeSocket = new ServerSocket(19198);
             Socket connectionSocket = welcomeSocket.accept();
             while(true)
             {

                BufferedReader inFromClient =
                   new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
                DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
                clientSentence = inFromClient.readLine();
                System.out.println("Received: " + clientSentence);
                capitalizedSentence = clientSentence.toUpperCase() + '\n';
                outToClient.writeBytes(capitalizedSentence);
             }

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:28:06.850

您需要跟踪您的客户端及其套接字/流，然后您知道将消息发送到哪里。您还需要为每个客户端启动一个新线程。

如果你用谷歌搜索 Java 聊天服务器，你可以找到很多例子......

# javascript - 读取 JavaScript 对象需要 JSON 转换

> ID：15253917
> 
> 赞同：0
> 
> 时间：2013-03-06T17:21:54.090
> 
> 标签：javascript, json, object

我有一个 javascript 对象。

```
var homeObject=JSON.parse(JSON.stringify(BuildingObject));
var flatNumber=homeObject.flatNo; 
```

那么，有没有什么方法可以直接获取**flatNo**属性而无需 JSON 转换。

另外，添加进一步说明：

`BuildingObject.flatNo`如果直接访问，则返回 undefined，无需 JSON 转换

下面列出了 BuildingObject 的 JSON 输出

```
{

    "flatNo": "34",
    "objectId": "4oRaVl96ZQ",
    "createdAt": "2013-03-01T17:35:27.724Z",
    "updatedAt": "2013-03-01T17:40:45.804Z"
} 
```

还是很惊讶！它打印出来`BuildingObject.createdAt`并且`BuildingObject.updatedAt`. 问题在于字符串对象“flatNo”和“objectId”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T18:16:23.587

问题可能源于 JSON.stringify() 将首先尝试在对象上调用 toJSON() 的事实，因此 toJSON() 很可能正在添加不是原始对象键的属性。例如

```
var test = {
    toJSON: function () {
        return {
            foo: "bar"
        };
    }
};

console.log(JSON.stringify(test));
// outputs: {"foo":"bar"} 

console.log(test.foo);
// outputs: undefined

console.log(test.toJSON().foo);
// outputs: bar 
```

因此，在您的情况下，您可以：

a) 检查您的 BuildingObject 是否具有用于 flatNo 的某种访问器函数，例如 BuildingObject.get('flatNo')

或者

b) 使用 BuildingObject.toJSON().flatNo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:56:21.757

如果`BuildingObject`是一个包含名为`flatNo`的属性的对象，则可以使用标准 JavaScript 语法读取该属性：

*   `BuildingObject.flatNo`
*   `BuildingObject["flatNo"]`

测试代码：

```
var BuildingObject = {
    flatNo: 314
};
console.log(BuildingObject.flatNo, BuildingObject["flatNo"]); 
```

...按预期打印：

> 314 314

处理 JavaScript 对象时绝对不需要使用 JSON。尽管普遍认为，JSON 只不过是一种受 JavaScript 语法启发的纯文本数据格式。JSON 不是 JavaScript，也没有“JSON 对象”（您可以在 StackOverflow 上提到 JavaScript 对象的无尽问题中阅读的术语），因为如果它是 JSON，它就是一个字符串。

如果`BuildingObject.flatNo`为您返回未定义，`BuildingObject`则不包含您认为的内容，或者您​​的测试在某处存在缺陷。

# javascript - Javascript获取表格行内不同单元格类型的值

> ID：15253918
> 
> 赞同：0
> 
> 时间：2013-03-06T17:22:02.790
> 
> 标签：javascript, dom

晚上好，我写了一个脚本来获取任何被点击的行的值，但我的问题是任何行都包含不同类型的控件，它可能是一个文本字段`<input type="text" id="speed" />`，也可能是一个下拉列表

```
 <select name="engineType">
       <option value="1">Manual</option>
       <option value="2">Automatic</option>
       <option value="3">Both</option>
    </select> 
```

在第一种情况下，我将获得innerHtml，在第二种情况下，我将获得值（所选项目的值），因此如何在决定获取值或innerHtml之前检查每个单元格的类型，这是脚本：

```
function findRowNumber() {
    var rowIdx;
    var rowData = new Array();
    var table = document.getElementById('product_table');
    var rows = table.getElementsByTagName('tr');
    var selectedRow;
    for (var i = 0; i < rows.length; i++) {
        rows[i].onclick = function() {
            rowIdx = this.rowIndex;
            selectedRow = rows[rowIdx];
            for (var j = 1; j <11; j++) {
                var rowCell = selectedRow.cells[j].innerHTML;
                rowData.push(rowCellValue);
                alert(rowCellValue);

            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:39:40.110

我认为这可能是您正在寻找的东西，尽管正如系统所说，这可能`.innerHTML`不是最好的做事方式。

```
for (var j = 1; j <11; j++) {
    var rowCell = selectedRow.cells[j];
    var inputElements;
    if((inputElements = rowCell.getElementByTagName("select")).length > 0)
    {
        // Do stuff for select
    }
    else if((inputElements = rowCell.getElementByTagName("input")).length > 0)
    {
        // Do stuff for input
    }

    rowData.push(rowCellValue);
    alert(rowCellValue);
} 
```

# c# - C# 或 WinJS：GridView 可以用鼠标滚动吗？

> ID：15253922
> 
> 赞同：0
> 
> 时间：2013-03-06T17:22:27.183
> 
> 标签：c#, html, xaml, windows-8, winjs

我正在启动一个 Windows 8 应用程序，并且我一直在尝试创建一个 GridView，它的行为类似于 Carousel/Coverflow，这意味着它可以通过以下方式滚动：

*   手指触摸（效果很好）
*   鼠标滚轮（它工作正常）
*   鼠标单击并拖动（它不适用于 GridView 本身，仅适用于滚动条）

我在 C#/XAML 中的尝试：

```
 <GridView
        x:Name="itemGridView"
        ItemsSource="{Binding Source={StaticResource itemsSource}}"
        ItemTemplate="{StaticResource ItemTemplate}"
        IsItemClickEnabled="True"
        ItemClick="GoToItemDetails"
        SelectionMode="None"
        IsSwipeEnabled="false"
        /> 
```

我在 WinJS/HTML 中的尝试：

```
 <div
        data-win-control="WinJS.UI.ListView"
        data-win-options="{layout: {type: WinJS.UI.GridLayout},
                           itemDataSource: items.dataSource,
                           itemTemplate: select('.itemTemplate'),
                           selectionMode: 'none',
                           swipeBehavior: 'none'}"
        class="itemGridView win-selectionstylefilled"
        ></div> 
```

对于两者，我都找不到一种方法来让鼠标像手指触摸一样单击和滚动。我不想使用微小的滚动条，我希望整个 GridView 都可以用鼠标滚动。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T19:52:52.397

这是设计使然。您描述的交互模式是 ListView/GridView 控件所期望的，即：

*   触摸 - 点击并拖动以滚动
*   鼠标 - 使用滚轮滚动，或在滚动条中单击并拖动
*   键盘 - 使用 L/R 箭头键或 PgUp/PgDn/Home/End 滚动

您要添加的交互模式的问题在于，在用户可能想要拖动以重新排列 ListView/GridView 中项目的顺序的情况下它会失败（考虑开始屏幕的工作方式）。控件必须能够支持这些场景，因此它们不支持通过单击和拖动进行滚动的概念。

希望有帮助。

有关构建 Windows 应用商店应用的更多信息，请注册[App Builder](http://bit.ly/gd30tolaunch)。

# html - CSS 响应式网页：在一行中显示 2 个 ul li 元素（相互连接）

> ID：15253925
> 
> 赞同：0
> 
> 时间：2013-03-06T17:22:35.803
> 
> 标签：html, css, html-lists, responsive-design

如果没有空间将这两个列表并排显示，我可以将它们的元素推送到“一个”列表中吗？

例如：

```
 <ul>
     <li>A1</li>
     <li>A2</li>
     <li>A3</li>
  </ul>
   <ul>
     <li>B1</li>
     <li>B2</li>
     <li>B3</li>
  </ul> 
```

应该是这样的：

```
A1
B1
A2
B2
A3
B3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:35:37.633

这就是我想出的：

```
 ul,li {
        display: block;
        margin: 0;
        padding: 0;

    }
    ul {
        position:absolute;
    }
    li {
        margin-bottom:1.2em;
    }
    ul+ul{
        margin-top:1.2em;
    } 
```

# jquery - 使用 jQuery 显示基于单选按钮选择的警报

> ID：15253926
> 
> 赞同：0
> 
> 时间：2013-03-06T17:22:45.473
> 
> 标签：jquery

我正在尝试使用 jQuery 根据用户选择的单选按钮显示警报。因此，例如，如果用户选择了 radiobutton1，那么将显示该特定单选按钮的消息。

这是我到目前为止的表格；

```
 <form>
        <input type="radio" name="campus" value="Campus 1"> Campus 1 </br>
        <input type="radio" name="campus" value="Campus 2"> Campus 2 </br>
        <input type="radio" name="campus" value="Campus 3"> Campus 3 </br>
        <input type="radio" name="campus" value="Campus 4"> Campus 4 </br>
    </form>
    <input type='button' value='Display Selected' id='click'> 
```

我知道如何发出显示单选按钮值但无法根据选择显示特定消息的警报。高级感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T17:30:32.060

[http://jsfiddle.net/RXcYy/9/](http://jsfiddle.net/RXcYy/9/)

```
$(function(){
   $('input[type="button"]').click(function(){
     alert($('input[type=radio]:checked').val());
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:29:30.360

使用

```
 $('input[type=radio]:checked').val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:29:49.693

尝试：

```
$(function () {
      $("#click").click( function(){
        alert($('input[type=radio]:checked').val());

        // Or alert($('input[name=campus]:radio:checked').val()); to be more specific
      });
}); 
```

`**[DEMO](http://jsfiddle.net/rh2jt/)**`

# doxygen - doxygen 类列表中显示的奇怪的不存在的命名空间......类型库？

> ID：15253927
> 
> 赞同：1
> 
> 时间：2013-03-06T17:22:45.697
> 
> 标签：doxygen

当我们的代码库甚至不使用命名空间（敏感名称已编辑）时，我对 doxygen 输出中列出的空命名空间感到困惑：

![doxygen 类列表](../Images/a0e8b23be11d75a4f16f190f87ab5885.png)

奇怪的是这些*几乎*匹配我们代码库中的项目/类名称，但不完全匹配。大多数这些字符串在我们的代码库中*都不存在。*

但是我确实发现我们*确实*有与这些“命名空间”中的几个匹配的类型库（.tlb）文件：

![在此处输入图像描述](../Images/a6d00c1025036e30983b9d07c23febaf.png)

**更新**：今天我意识到这是由于`library`ODL 文件中的声明被记录为命名空间。但我不知道如何控制这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:31:58.477

好的，所以我确定这些命名空间来自 IDL 库声明……例如，在 ODL 文件中的任何时候，`library ObjectServerLib`我都有一个 doxygen 中的命名空间。

我唯一的解决方案是结合文件名和符号名排除模式，并排除一些不符合任何命名约定的单个符号。

我看不到`library`完全阻止此命名空间文档发生的方法。

# php - WHERE 条件下的变量

> ID：15253931
> 
> 赞同：1
> 
> 时间：2013-03-06T17:22:54.570
> 
> 标签：php, mysql, sql, where

PHP代码中的以下SQL查询不起作用，有人可以帮助我吗？

```
$reponse = $bdd->query("SELECT * FROM tasks WHERE destinataire = ':destinataire' ORDER BY maturity ASC");
$reponse->execute(array(
                ':destinataire'=>$_SESSION['login']
                )); 
```

正确的查询如下：

```
$reponse = $bdd->prepare("SELECT * FROM tasks WHERE destinataire = :destinataire ORDER BY maturity ASC"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T17:24:20.420

当您想对查询进行参数化时，不应将参数用单引号括起来，因为它们将**转换为字符串文字**（*这意味着它们只是常规值，不再是参数*）。删除单引号，它将起作用。

```
$reponse = $bdd->prepare("SELECT * FROM tasks WHERE destinataire = :destinataire ORDER BY maturity ASC"); 
```

# c++ - 我应该将 libcurl 保留为静态库还是 WIN 环境中的 DLL

> ID：15253932
> 
> 赞同：0
> 
> 时间：2013-03-06T17:22:59.563
> 
> 标签：c++, visual-c++, dll, libcurl

将 libcurl 保留为静态库是最好的还是将其保留为 dll 是最好的？

我有一个嵌入式应用程序，它有一些 http 传输，所以我使用 curl。

由于我将 libcurl 构建为静态库，因此它有助于增加可执行文件的大小。（我还与 openSSL 链接，因为我需要支持 HTTPS 传输）

一旦我启动应用程序，显示应用程序已加载需要相当长的时间。（可能会遇到用户点击多次认为他们没有点击 exe 的情况）

如果我将 libcurl 保留为 DLL 会有帮助吗？如果是这样，我可以在任何地方直接将 libcurl 下载为具有 SSL 支持的 DLL，这将非常有帮助

谢谢

# php - PHP/AJAX 不呈现 javascript

> ID：15253935
> 
> 赞同：0
> 
> 时间：2013-03-06T17:23:04.807
> 
> 标签：php, javascript, jquery, ajax

我正在使用一些用于移动设备的复杂 PHP，它使用 AJAX（如 data-ajax="true" in 所示`<div>`）将其他 PHP 文件包含到页面中，同时使用 jQuery 隐藏现有数据。在标题和地址发生变化的同时，实际网页只是在更新。更新第一个新“页面”时，不添加任何 javascript。核心页面包含一个涉及输出缓冲的 PHP 文件，但我认为这不会导致脚本错误。我正在使用 PHP 5.4.9，不确定这是否会有所作为。

核心页面（page1）：

```
<?php
if (!isset($_SESSION)) session_start();

include_once("$path/lib/functions/show_header.php");

//PHP page including output buffer
show_header($html_back='normal', $html_home='public_page', $header_title='Directory', $bool_back=TRUE, $title=$header_title, $javascript=&$myScript, $cache=FALSE, $viewport=TRUE);
?>

<ul id="list" data-inset="true" data-role="listview" ><!--data-filter="true" data-filter-placeholder="Search for Feeds..."-->
<li id="header" data-role="list-divider">Select a Search Option</li>

<li>
    <a href="page2.php?header=Option1" data-ajax="true">Option 1</a>
</li>
<li>
    <a href="page2.php?header=Option2" data-ajax="true">Option 2</a>
</li>
<li>
    <a href="page2.php?header=Option3" data-ajax="true">Option 3</a>
</li>

</ul>
</div><!-- // Content-->
</div><!-- // Page-->
</body
</html> 
```

插入的代码：

```
<script>alert("The JS is working!");</script>

<div data-role="page" data-theme="c">
    <div data-role="header" data-theme="b">
        <a href="#" data-rel="back" data-ajax="true" data-icon="arrow-l" data-direction="reverse">Back</a>
        <h1><?php echo $_GET['header']?></h1>
    </div>
    <div data-role="content" role="main">

        <textarea id=search name="search" cols="1" rows="1" onblur="return validate()" onfocus="this.innerHTML=''">Search For...</textarea>

        <ul id="list" data-inset="true" data-role="listview" >
            <li id="header" data-role="list-divider"></li>

            <li>
                <a id=button href="" data-ajax="true">Search</a>
            </li>

        </ul>
    </div><!-- // Content-->
</div><!-- // Page--> 
```

任何援助将不胜感激。我对 PHP 有经验，但在 AJAX 和 jQuery 方面是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:12:35.077

jQuery 只抓取了包含在最外层的 PHP `<div>`。不知何故，这从未进入文档。文档为王！

一旦将 javascript 和 php 移动到里面，`<div>`我就可以做任何我想做的事情。那时我摆脱了内联 javascript 并改用 javascript 事件处理程序。我永远无法追踪导致它忽略我的 php 和 javascript 之外的确切 jquery 使用情况`<div>`。

# c# - XmlDocument.LoadXML 名称不能以“<”字符开头

> ID：15253944
> 
> 赞同：0
> 
> 时间：2013-03-06T17:23:26.487
> 
> 标签：c#, asp.net, xml, xml-parsing, xmldocument

当我尝试传递一个包含 html 标记的值时出现错误“名称不能以 '<' 字符开头”，例如`<table>, <div> ...`使用 XsltArgumentList 将项目显示到 xslt 文件中以将这些值传递到 xslt 文件并使用 XslCompiledTransform 传递 xslt 的所有内容具有传递值的文件。最后使用LoadXml加载但会出现错误，我尝试使用“<替换<和>替换>”但仍然出现错误。谁能给我一些建议来解决它？

我的代码：

```
var objXslt = new XslCompiledTransform();

        objXslt.Load(EmailTemplate);
        var xmlDoc = new XmlDocument();
        xmlDoc.AppendChild(xmlDoc.CreateElement("EmailMessage"));
        var xpathNav = xmlDoc.CreateNavigator();

        var xslArg = new XsltArgumentList();
        if (objDictionary != null)
        {
            foreach (DictionaryEntry entry in objDictionary)
            {
                xslArg.AddParam(entry.Key.ToString(), "", entry.Value);
            }
        }

        var emailBuilder = new StringBuilder();
        var xmlWriter = new XmlTextWriter(new StringWriter(emailBuilder)) {Formatting = Formatting.Indented};
        objXslt.Transform(xpathNav, xslArg, xmlWriter);

        var emailDoc = new XmlDocument();

        emailDoc.LoadXml(emailBuilder.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:09:58.510

我找到了解决方案。我将 stringbuilder 写入 html 文件并检查。最后，问题在于字符串值中缺少 img 元素的关闭标记，我用它作为参数传递到 xslt 文件中。

# java - 某些设备上 addFooterView() 上的 NullPointerException

> ID：15253945
> 
> 赞同：1
> 
> 时间：2013-03-06T17:23:27.297
> 
> 标签：java, android, listview, nullpointerexception, footer

首先，让我解释一下我的代码：当用户单击按钮时，会执行以下代码：

```
mMyListView.removeFooterView(mMyFooterView);
mMyListView.setAdapter(null);
//Fetch some data in an AsyncTask 
```

异步完成后，将执行以下代码：

```
if (mMyList.size() > 0){
    mMyListView.addFooterView(mMyFooterView);
}    
MyListAdapter myListAdapter = new MyListAdapter(this, mMyList);
mMyListView.setAdapter(myListAdapter); 
```

这就是事情出错的地方。因为在某些设备上，我在这条线上得到了 NullPointerException：

```
mMyListView.addFooterView(mMyFooterView); 
```

这是堆栈跟踪：

```
java.lang.NullPointerException
at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:778)
at android.widget.ListView.addFooterView(ListView.java:387)
at android.widget.ListView.addFooterView(ListView.java:402)
at com.augustinianum.augustinianum.ManualCheckActivity.showScheduleChanges(ManualCheckActivity.java:84)
at com.augustinianum.augustinianum.ManualCheckActivity.access$1(ManualCheckActivity.java:81)
at com.augustinianum.augustinianum.ManualCheckActivity$CheckScheduleChange.onPostExecute(ManualCheckActivity.java:192)
at com.augustinianum.augustinianum.ManualCheckActivity$CheckScheduleChange.onPostExecute(ManualCheckActivity.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:417)
at android.os.AsyncTask.access$300(AsyncTask.java:127)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method) 
```

奇怪的是，只有当用户第二次单击获取数据的按钮时，我才会收到此异常。第一次一切顺利：显示 listView 并添加页脚。但是第二次，我在某些设备上遇到了这个异常。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:24:43.007

```
if (mMyList.size() > 0){
    mMyListView.addFooterView(mMyFooterView);
} 
```

当没有数据时，您似乎想删除页脚。虽然我不知道如何使用您当前的代码来防止此错误，但我建议采用不同的策略。

*   如果两个数据集都将使用页脚，则不要删除它以再次添加它（如果您想要不同的内容，您仍然可以更改它。）
*   当数据集为空时，用 . 隐藏整个 ListView `setVisibilty(View.GONE)`。

但是错误日志和源代码很清楚，调用`setAdapter(null)`不会取消注册在 GingerBread 中引发 NPE 的内部 DataSetOberver：

```
at android.widget.AdapterView$AdapterDataSetObserver.onChanged(AdapterView.java:778)
at android.widget.ListView.addFooterView(ListView.java:387) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T09:45:05.273

这是我解决它的方式：

当用户单击按钮时，将执行以下代码：

```
mMyListView.setVisibility(View.INVISIBLE);
//Fetch some data in an AsyncTask 
```

异步完成后，将执行以下代码：

```
mMyListView.setVisibility(View.VISIBLE);
if (mMyList.size() > 0){
    mMyListView.removeFooterView(mMyFooterView);
    mMyListView.addFooterView(mMyFooterView);
}    
MyListAdapter myListAdapter = new MyListAdapter(this, mMyList);
mMyListView.setAdapter(myListAdapter); 
```

此代码完美运行。

不过，我将接受 Sam 的回答，因为他很好地解释了为什么抛出异常。此外，多亏了他，我可以弥补这个解决方案。所以为山姆+1！:)

# ruby - 无法使用 Roo 或电子表格 Gems 打开 excel

> ID：15253947
> 
> 赞同：1
> 
> 时间：2013-03-06T17:23:32.690
> 
> 标签：ruby, excel, spreadsheet

当我尝试这个时`roo gem`：

```
irb(main):001:0> require 'roo'
   => true
irb(main):002:0> oo = Excel.new("C:/Users/Abash/Desktop/test1.xls")

**NameError: uninitialized constant Excel** from (irb):2 
from C:/Ruby193/bin/irb:12:in `<main>' 
```

当我尝试这个时`spreadsheet gem`：

```
irb(main):001:0> require 'spreadsheet'
   => true
   irb(main):002:0>Spreadsheet.client_encoding = 'UTF-8'
   => "UTF-8"
   irb(main):003:0> book = Spreadsheet.open 'C:/Users/Abash/Desktop/test1.xls'

**Errno::EACCES: Permission denied** - C:/Users/Abash/Desktop/test1.xls
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.8.2/lib/spreadsheet.rb:69:in `initialize'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.8.2/lib/spreadsheet.rb:69:in `open'
from C:/Ruby193/lib/ruby/gems/1.9.1/gems/spreadsheet-0.8.2/lib/spreadsheet.rb:69:in `open'
from (irb):3
from C:/Ruby193/bin/irb:12:in `<main>' 
```

有人可以向我展示解决这些错误的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T08:58:42.893

我相信您使用的是 ruby​​ 1.9 或更高版本。在这种情况下，您需要在创建新实例时指定 gem。

```
 require 'roo'

 s =Roo::Excel.new("myspreadsheet.xls")       

 s =Roo::Excelx.new("myspreadsheet.xlsx") 
```

# r - 用 gsub 替换带有重音符号的多个字母

> ID：15253954
> 
> 赞同：69
> 
> 时间：2013-03-06T17:23:57.673
> 
> 标签：r, regex, gsub

当然我可以像这样替换特定的参数：

```
 mydata=c("á","é","ó")
    mydata=gsub("á","a",mydata)
    mydata=gsub("é","e",mydata)
    mydata=gsub("ó","o",mydata)
    mydata 
```

但肯定有一种更简单的方法可以在线完成这一切，对吧？我不觉得 gsub 帮助在这方面非常全面。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-06T17:41:38.907

使用字符翻译功能

```
chartr("áéó", "aeo", mydata) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-06T17:40:39.627

一个有趣的问题！我认为最简单的选择是设计一个特殊的函数，比如“multi”gsub()：

```
mgsub <- function(pattern, replacement, x, ...) {
  if (length(pattern)!=length(replacement)) {
    stop("pattern and replacement do not have the same length.")
  }
  result <- x
  for (i in 1:length(pattern)) {
    result <- gsub(pattern[i], replacement[i], result, ...)
  }
  result
} 
```

这给了我：

```
> mydata <- c("á","é","ó")
> mgsub(c("á","é","ó"), c("a","e","o"), mydata)
[1] "a" "e" "o" 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-06T19:49:44.873

也许这可能有用：

```
iconv('áéóÁÉÓçã', to="ASCII//TRANSLIT")
[1] "aeoAEOca" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-07-03T15:51:27.533

您可以使用`stringi`包来替换这些字符。

```
> stri_trans_general(c("á","é","ó"), "latin-ascii")

[1] "a" "e" "o" 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-10-30T16:16:05.567

这与@kith 非常相似，但采用函数形式，并且使用最常见的变音符号：

```
removeDiscritics <- function(string) {
  chartr(
     "ŠŽšžŸÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖÙÚÛÜÝàáâãäåçèéêëìíîïðñòóôõöùúûüýÿ"
    ,"SZszYAAAAAACEEEEIIIIDNOOOOOUUUUYaaaaaaceeeeiiiidnooooouuuuyy"
    , string
  )
}

removeDiscritics("test áéíóú") 
```

> “测试 aeiou”

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-03-06T17:51:53.553

另一种`mgsub`实现使用`Reduce`

```
mystring = 'This is good'
myrepl = list(c('o', 'a'), c('i', 'n'))

mgsub2 <- function(myrepl, mystring){
  gsub2 <- function(l, x){
   do.call('gsub', list(x = x, pattern = l[1], replacement = l[2]))
  }
  Reduce(gsub2, myrepl, init = mystring, right = T) 
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-05-26T14:03:15.247

上面的一些实现（例如，Theodore Lytras 的）的一个问题是，如果模式是多个字符，那么在一个模式是另一个模式的子字符串的情况下，它们可能会发生冲突。解决此问题的一种方法是创建对象的副本并在该副本中执行模式替换。这是在我的包 bayesbio 中实现的，在 CRAN 上可用。

```
mgsub <- function(pattern, replacement, x, ...) {
  n = length(pattern)
  if (n != length(replacement)) {
    stop("pattern and replacement do not have the same length.")
  }
  result = x
  for (i in 1:n) {
    result[grep(pattern[i], x, ...)] = replacement[i]
  }
  return(result)
} 
```

这是一个测试用例：

```
 asdf = c(4, 0, 1, 1, 3, 0, 2, 0, 1, 1)

  res = mgsub(c("0", "1", "2"), c("10", "11", "12"), asdf) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-06T17:44:32.223

不是那么优雅，但它可以工作并且做你想要的

```
> diag(sapply(1:length(mydata), function(i, x, y) {
+   gsub(x[i],y[i], x=x)
+ }, x=mydata, y=c('a', 'b', 'c')))
[1] "a" "b" "c" 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-03-12T04:57:38.283

与贾斯汀的回答相关：

```
> m <- c("á"="a", "é"="e", "ó"="o")
> m[mydata]
  á   é   ó 
"a" "e" "o" 
```

如果你愿意，你可以去掉名字`names(*) <- NULL`。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-21T23:48:39.063

您可以使用该`match`功能。这里返回匹配元素`match(x, y)`的索引。然后，您可以使用返回的索引对另一个向量（例如）进行子集化，该向量包含 的值的替换，与适当匹配。在你的情况下：`y``x``z``x``y`

```
mydata <- c("á","é","ó")
desired <- c('a', 'e', 'o')

desired[match(mydata, mydata)] 
```

在一个更简单的例子中，考虑下面的情况，我试图用、`a`for等代替。`'alpha'``'b'``'beta'`

```
x <- c('a', 'a', 'b', 'c', 'b', 'c', 'e', 'e', 'd')

y <- c('a', 'b', 'c', 'd', 'e')
z <- c('alpha', 'beta', 'gamma', 'delta', 'epsilon')

z[match(x, y)] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-25T14:00:11.553

在这种情况下，没有那么多意义，但如果它们只是两个，你也可以将它们与 gsub 结合起来：

`mydata <- gsub("á","a", gsub("é","e",mydata))`

# sql - SQL：如何查找两个日期之间的记录

> ID：15253956
> 
> 赞同：-2
> 
> 时间：2013-03-06T17:24:04.600
> 
> 标签：sql, sql-server

日期采用 Y2K 日期字符串格式

例如）`1120104`=`20120104`

运行 SQL Server 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:39:34.340

好吧，我同意@usr，首先，停止以这种方式存储日期。

如果你不能，那么添加一个计算列（你甚至可以持久化和/或索引）：

```
ALTER TABLE dbo.MyTable ADD RealDate 
 AS CONVERT(DATE, RIGHT(col, 6), 12); 
```

如果你不能这样做，那么创建一个视图：

```
CREATE VIEW dbo.SmarterView
AS
  SELECT /* other columns, */ 
    RealDate = CONVERT(DATE, RIGHT(col, 6), 12)
  FROM dbo.MyTable; 
```

然后：

```
SELECT ... FROM dbo.MyTable -- or dbo.SmarterView
  WHERE RealDate >= @Start 
  AND RealDate < DATEADD(DAY, 1, @End); 
```

开放式范围要好得多`BETWEEN`- 计算月底很糟糕，尤其是在 2 月，尤其是如果您有任何日期/时间数据类型更改的潜力。看：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

如果您有 1900 年代的日期，那么它会涉及更多：

```
CONVERT(DATE, CONVERT(CHAR(2), 19 + CONVERT(INT, LEFT(col, 1))) + RIGHT(col, 6), 112); 
```

无论如何，这无关紧要，因为 OP 声明他们会将其正确存储为`DATE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:27:34.883

第一个建议：将日期存储为数据类型 date 或 datetime 以便您可以实际搜索它们。

如果您不希望这样，您需要先将字符串转换为日期，以便您可以搜索它们：

```
where convert(date, my_nasty_string_column_with_dates) between @a and @b 
```

这是一个性能问题，因为查询将永远无法在索引上查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T17:42:51.830

您应该能够通过简单的相等性检查在 Y2K 日期与另一个日期进行比较。如果要将 Y2K 转换为，`DateTime`则需要添加 19000000，然后像以下示例一样进行转换：

```
DECLARE @Y2KDate INT
SET @Y2KDate = 1120104
DECLARE @DateTime DateTime
SET @DateTime = CONVERT(DATETIME, CONVERT(CHAR(8), @Y2KDate + 19000000), 112) 
PRINT @DateTime 
```

打印以下输出

> ```
> 1120104
> 20120104
> Jan  4 2012 12:00AM 
> ```

# jquery - 为什么我的服务器会忽略来自 ajax 请求的身份验证标头？

> ID：15253957
> 
> 赞同：3
> 
> 时间：2013-03-06T17:24:07.920
> 
> 标签：jquery, http, basic-authentication, cors

从我使用的JavaScript：

```
xhr.setRequestHeader("Authorization", make_base_auth(username,password)); 
```

但是 HTTP 请求没有`Authorization`标头：

```
OPTIONS /restService/index?_=1362589672203 HTTP/1.1
Host: myappinheroku.herokuapp.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: es-MX,es-ES;q=0.8,es-AR;q=0.7,es;q=0.5,en-US;q=0.3,en;q=0.2
Accept-Encoding: gzip, deflate
Origin: http://127.0.0.1:8081
Access-Control-Request-Method: GET
Access-Control-Request-Headers: authorization,content-type
Connection: keep-alive 
```

似乎完全忽略了身份验证。怎么了？我们如何为 CORS 启用身份验证？

* * *

这是服务器对上述请求的响应：

```
HTTP/1.1 401 Full authentication is required to access this resource
Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: origin, authorization, accept, content-type, x-requested-    with
Access-Control-Allow-Methods: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
Access-Control-Allow-Origin: *
Access-Control-Max-Age: 3600
Server: Jetty(7.x.y-SNAPSHOT)
Set-Cookie: JSESSIONID=6smxjnlqelmc1lg98ain16wv7;Path=/
WWW-Authenticate: Basic realm="Ralph's Bait and Tackle"
Transfer-Encoding: chunked
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T17:34:56.153

当is时，该值`*`不能用于标头。您将需要设置为 Origin 本身的值（即在这种情况下）。`Access-Control-Allow-Origin``Access-Control-Allow-Credentials``true``Access-Control-Allow-Origin``http://127.0.0.1:8081`

另请注意，验证凭据不会在预检请求中发送。它们仅在实际请求时发送。预检仅用于验证是否允许 CORS 请求，它本身不应进行任何身份验证。

# cxf - 避免在 Apache CXF wsdl2java 任务中创建 JDK 类

> ID：15253962
> 
> 赞同：0
> 
> 时间：2013-03-06T17:24:25.107
> 
> 标签：cxf, java

我有一个定义了 java.io.Exception 的 WSDL 文件：

```
<xsd:schema xmlns:tns="http://io.java" xmlns:xsd="http://www.w3.org/2001/XMLSchema" attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://io.java">
<xsd:complexType name="IOException">
<xsd:sequence/>
    </xsd:complexType>
</xsd:schema> 
```

当使用 Apache CXf wsdl2java 任务生成 Java 类时，它会生成这样的类（这会导致编译错误，因为它不是有效的 java.io.IoException）：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "IOException")
public class IOException {
} 
```

有没有办法防止 CXF 生成 JDK 类？

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:17:25.657

你肯定需要改变你的命名空间。

```
targetNamespace="http://io.java"
xmlns:tns="http://io.java" 
```

如果你有这样的命名空间和命名的复杂类型`IOException`当然会有问题。为什么在世界上你这样命名命名空间`http://io.java`？

更改名称空间，例如：

```
targetNamespace="http://yourcompany.com/yourservice"
xmlns:tns="http://yourcompany.com/yourservice" 
```

你会好的。

# html - 在来自相机的视频上创建流畅的动画

> ID：15253963
> 
> 赞同：0
> 
> 时间：2013-03-06T17:24:27.933
> 
> 标签：html, html5-canvas, augmented-reality

我正在做一个项目，我需要在检测到的对象上放置一个图像文件，如下所示：[https](https://github.com/mtschirs/js-objectdetect/blob/master/examples/example_sunglasses_jquery.htm) ://github.com/mtschirs/js-objectdetect/blob/master/examples/example_sunglasses_jquery.htm 。

我可以通过这个例子完成我的目标。

但是我如何使图像文件稳定地粘在人的头上。

[https://github.com/mtschirs/js-objectdetect](https://github.com/mtschirs/js-objectdetect) 如果您仔细查看 PICK YOUR GLASS 视频，在某些情况下跟踪您的头部时，它会在玻璃图像文件上产生抖动/放大效果。我怎样才能防止这种情况或使这种情况顺利发生。

# ios6 - 获取错误：未分配被释放的指针 *** 在 malloc_error_break 中设置断点以进行调试

> ID：15253966
> 
> 赞同：4
> 
> 时间：2013-03-06T17:24:32.670
> 
> 标签：ios6, breakpoints, xcode4.6

我收到以下错误：

```
malloc: *** error for object 0xa68aca0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug 
```

我已经设置了`Symbolic Breakpoint`，但是在控制台中没有发生任何事情，在控制台中没有得到任何提示。

我在用`xcode 4.6`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T18:02:26.923

您可能多次释放该对象。

按 Cmd+Shift+R 打开调试器控制台。然后输入以下内容

```
break malloc_error_break 
```

这将在开头设置一个断点`malloc_error_break`，您也可以尝试打印出 0xa68aca0 处的对象是什么

`print-object 0x1068310`

其他方法是使用[NSZombieEnabled](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

[也值得一读](https://stackoverflow.com/questions/971249/how-to-find-the-cause-of-a-malloc-double-free-error)

# android - 从 CustomAdapter ListView 切换到标准 ArrayAdapter ListView 失败

> ID：15253972
> 
> 赞同：1
> 
> 时间：2013-03-06T17:24:56.100
> 
> 标签：android, android-layout

我最近对 ​​Android 编码感兴趣，并通过几个教程来学习。但是，现在我卡了一天，希望你们能帮助我。

基本上我想为每个主菜单条目创建一个主菜单和一个子菜单。（现在这只是第一个条目的情况）

对于主菜单，我使用了具有不同图标的 ListView（通过自定义适配器实现）。选择其中一个菜单项通常可以正常工作，但是如果我选择配置 onitemclick 以启动一个新活动，这是另一个使用 ArrayAdapter 的（简单）ListView，它会在切换到子菜单活动后中断。

奇怪的是，如果我在两个 ListViews 中都使用 ArrayAdapter 没问题；在两者中使用 CustomAdapter 时也是如此。

这是代码，在此先感谢您的帮助；）

主菜单：

```
public class MainActivity extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // storing string resources into Array contentmenu
    String[] contentmenu = getResources().getStringArray(R.array.mainmenu_cats);
    // storing icons in Array
    TypedArray iconarray = getResources().obtainTypedArray(R.array.mainmenu_icons);

    // Binding resources Array to ListAdapter
    this.setListAdapter(new ImageAndTextAdapter(this, R.layout.list_item, contentmenu, iconarray));

    ListView lv = getListView();

    // listening to single list item on click
    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {

          // Launching new Activity on selecting single List Item
          switch( position )
            {
               case 0:  Intent newActivity0 = new Intent(getApplicationContext(),SubActivity.class);     
                        startActivity(newActivity0);
                        break;

               case 1:  Intent newActivity1 = new Intent(getApplicationContext(),SubActivity2.class);     
                        startActivity(newActivity1);                            
                        break;

            }

      }
    });

} 
```

子菜单：

```
public class SubActivity extends ListActivity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // storing string resources into Array
    String[] submen_1 = getResources().getStringArray(R.array.submenu_1);

    // Binding resources Array to ListAdapter
    setListAdapter(new ArrayAdapter<String>(ctx, R.layout.list_item1, R.id.submen1, submen_1));

    ListView sublv1 = getListView();

    // listening to single list item on click
    sublv1.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {

          // Launching new Activity on selecting single List Item
          Intent newActivity = new Intent(getApplicationContext(),Page1.class);     
          // sending data to new activity
          newActivity.putExtra("position",position);
          startActivity(newActivity);

          }
    });
    } 
```

xml 主菜单：list_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android">
<ImageView
android:id="@+id/option_icon"
android:layout_width="48dp"
android:layout_height="fill_parent"/>
<TextView
   android:id="@+id/option_text"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16dp" >
</TextView> 
```

子菜单：list_item1.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android">
<ImageView
android:id="@+id/icon1"
android:layout_width="48dp"
android:layout_height="fill_parent"
android:src="@drawable/ic_action_google_play" />
<TextView
   android:id="@+id/submen1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16dp" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:38:48.417

目前，您没有`LinearLayout`在`list_item.xml`和`list_item1.xml`layouts 中定义 Hight 和 Width 。添加高度宽度为：

**在 list_item.xml 中：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android">
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

   <!-- PUT YOUR ImageView or other xml elements here -->

</LinearLayout> 
```

并对`list_item1.xml`布局做同样的事情

# c# - 在列表项中查找列表项

> ID：15253977
> 
> 赞同：3
> 
> 时间：2013-03-06T17:25:28.407
> 
> 标签：c#

我对它的工作原理有点困惑。

```
class TestClass
{
    public int ID {get;set;}
    public List<Stuff> StuffList {get; set;}
}
class Stuff
{
    public int ID {get;set;}
    public string Description {get;set;}
} 
```

所以每个`TestClass`人都有一个列表`Stuff`。我想要做的是找到一个`TestClass`包含任何`Stuff`一个`ID`的`0`

```
List<TestClass> TestList = RetrieveAllTestLists();
//Pseudocode:
//
// Find all TestClass in TestList that contain a Stuff with ID == 0; 
```

我已经尝试过了，但没有奏效：

```
List<TestClass> TestList = RetrieveAllTestLists().Where(x=> x.StuffList.Where(y=> y.ID == 0)).ToList(); 
```

谁能向我解释我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T17:26:38.597

您可以使用`Any`：

```
List<TestClass> TestList = RetrieveAllTestLists().
                           Where(x => x.StuffList.Any(y=> y.ID == 0)).ToList(); 
```

基本上`Where`将选择所有满足条件的行（那些返回`true`），但在这个地方你有另一个`Where`. 如果有任何行满足给定条件，`Any`将返回。`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:27:52.033

```
List<TestClass> TestList = RetrieveAllTestLists().Where(x=> x.StuffList.Any(y=> y.ID == 0)).ToList(); 
```

Any() 表示至少对于一个元素或 IEnumerable，参数中给出的谓词返回 true

# ldap - 无法在 JXplorer 中为 LDAP 创建用户 - 我收到错误消息

> ID：15253979
> 
> 赞同：2
> 
> 时间：2013-03-06T17:25:31.790
> 
> 标签：ldap, openldap

我第一次尝试使用 openLDAP。所以我找到了这个不错的教程[http://soswin-techbits.blogspot.com/2011/10/installing-openldap-on-windows-7.html](http://soswin-techbits.blogspot.com/2011/10/installing-openldap-on-windows-7.html)。所以我一直按照说明结束。但是，在最后一步我得到一个错误。当我尝试将用户添加到组人员时，我收到此错误消息“无法执行修改操作”。

因此，在我执行 cn=user1 之后，在表格编辑器中输入“姓氏”并点击提交，然后我收到此错误。

即使我试图添加一个新的目录，我也会得到同样的错误。这是一个详细的错误。

javax.naming.OperationNotSupportedException：[LDAP：错误代码 53 - 没有全局高级知识]；剩余名称 'dc=Organization,dc=com'

怎么了？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T18:22:41.307

服务器可能未配置为托管带有后缀的后端`dc=Organization,dc=com`。

# c - 客户端和服务器程序问题

> ID：15253980
> 
> 赞同：0
> 
> 时间：2013-03-06T17:25:33.243
> 
> 标签：c, sockets

我正在构建一个客户端和服务器程序。下面是服务端main函数中引用socket的代码：

```
 listenfd = socket(AF_INET, SOCK_STREAM, 0);
   serv_addr.sin_family = AF_INET;
   serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
   serv_addr.sin_port = htons(5000); 

   bind(listenfd, (struct sockaddr*)&serv_addr, sizeof(serv_addr)); 

   listen(listenfd, 10);
   pthread_t thread[10];
   while(1)
   {
       connfd[i] = accept(listenfd, (struct sockaddr*)NULL, NULL);
       //I WANT TO GET THE IP ADDRESS HERE
       if( pthread_create(&thread[i], NULL, listener, NULL ) != 0 )
       {
           printf("Cannot create thread , exiting \n ");
           exit(-1);
       }
       i++;
   } 
```

线程如下：

```
void * listener( void * temp_pt )
{
    int connfdLocal=connfd[i];
    while ( (n = read(connfdLocal, recvBuff, sizeof(recvBuff)-1)) > 0)
    {
        printf("TESTING LISTENER");         
        write(connfdLocal, "TEST", strlen("TEST"));     
    }

    if(n <= 0)
    {
        printf("\n Connection lost \n");
        close(connfdLocal);
        return 0;
    } 

} 
```

好吧，我有3个问题：

1.  由于某种原因，线程在与客户端的连接关闭之前不会打印“TESTING LISTENER”，我必须关闭客户端的连接。同样，直到我关闭服务器上的连接，字符串“TEST”才会发送到客户端。为什么会这样？我该如何解决？

2.  建立连接后有什么方法可以获取客户端的IP地址？就在我输入“我想在这里获取 IP 地址”的地方

3.  有人可以向我解释一下，当客户端关闭套接字时，'n' 是如何立即变为 0 的？我以为 read 函数只运行一次，n 值只设置一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:28:02.043

这可能是由于缓冲而发生的。所以`printf`真的会被调用，但文本位于`stdio`缓冲区中。尝试：

```
printf("TESTING LISTENER\n");
fflush(stdout); 
```

客户端也是如此。

> 有什么办法可以得到客户端的ip地址

你需要这个功能`getpeername(2)`。

> 我以为 read 函数只运行一次，n 值只设置一次

它是每次调用接收到的字节数。它不是一个固定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:16:21.790

> 由于某种原因，线程在与客户端的连接关闭之前不会打印“TESTING LISTENER”，我必须关闭客户端的连接。同样，直到我关闭服务器上的连接，字符串“TEST”才会发送到客户端。为什么会这样？我该如何解决？

我需要更多信息：

1.  recvBuff 是如何定义的？
2.  它是在堆上还是在堆栈上定义的？
3.  您是在本地计算机还是远程检查此连接？
4.  您在客户端写入服务器时检查过错误代码吗？
5.  你检查过防火墙设置吗？

> 建立连接后有什么方法可以获取客户端的IP地址？就在我输入“我想在这里获取 IP 地址”的地方

是的你可以。只需在接受参数中声明并传递“struct sockaddr&”。

```
struct sockaddr cli_addr; 
connfd[i] = accept(listenfd, (struct sockaddr*)&cli_addr, sizeof(cli_addr));
char *connected_ip = inet_ntoa(cli_addr.sin_addr); //Client Ip Address
int port = ntohs(cli_addr.sin_port); //Client's Port 
```

> 有人可以向我解释一下，当客户端关闭套接字时，'n' 是如何立即变为 0 的？我以为 read 函数只运行一次，n 值只设置一次。

它是从客户端收到的总字节数。它变为零，因为套接字从远程端关闭。当没有从仪式中阅读的来源时阅读什么......

# c# - 上下文菜单和树视图

> ID：15253981
> 
> 赞同：0
> 
> 时间：2013-03-06T17:25:34.227
> 
> 标签：c#, wpf, treeview, contextmenu

如何创建一个上下文菜单，当用户右键单击我的树视图的元素时将显示该菜单？

我想获取被点击的项目的名称，这怎么可能？

这是我的树视图：

```
<TreeView Name="tvwResultados" 
                  MouseMove="DataGrid_MouseMove"
                  MouseLeftButtonDown="DataGrid_PreviewMouseLeftButtonDown"
                  ItemTemplate="{StaticResource empresaTemplate}"
                  ItemsSource="{Binding Empresas}"
                  Padding="0,6,0,6"
                  Background="Black"
                  BorderBrush="Gray"
                  BorderThickness="1">
            <TreeView.ItemContainerStyle>
                <Style TargetType="{x:Type TreeViewItem}">
                    <Setter Property="BorderThickness" Value="1" />
                    <Setter Property="Padding" Value="4,2,4,2" />
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="BorderBrush" Value="Gray" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TreeView.ItemContainerStyle>
            <TreeView.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#171717" />
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Silver" />
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#333333" />
                <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="Silver" />
                <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="Gray" />
                <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="Silver" />
            </TreeView.Resources>
        </TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:23:04.067

根据许多因素`ContextMenu`，您可以通过多种方式添加一个。`TreeViewItems`例如，`ContextMenu`每个都相同`TreeViewItem`吗？从哪里来`MenuItems`？

一种解决方案是将 a 添加`ContextMenu`到您的`ItemContainerStyle`. 您可以在您的或任何顶级控件中将其定义`ContextMenu`为资源，如下所示：`Window`

```
<Window.Resources>
    <ContextMenu x:Key="TreeItemMenu">
        <MenuItem Header="Menu Item 1" Click="MenuItem_Click_1"/>
        <MenuItem Header="Menu Item 2" Click="MenuItem_Click_2"/>
    </ContextMenu>
</Window.Resources> 
```

然后你可以更新你`ItemContainerStyle`的使用`ContextMenu`这样的：

```
<TreeView.ItemContainerStyle>
    <Style TargetType="{x:Type TreeViewItem}">
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="4,2,4,2" />
        <Setter Property="ContextMenu" Value="{DynamicResource TreeItemMenu}"/>
        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="BorderBrush" Value="Gray" />
            </Trigger>
        </Style.Triggers>
    </Style>
</TreeView.ItemContainerStyle> 
```

要获取被点击的项目，您需要单独处理。您可以使用 an`EventSetter`将事件附加到每个事件`TreeViewItem`，然后跟踪上次单击的项目，如下所示：

将此添加到样式的设置器中：

```
<EventSetter Event="MouseRightButtonDown" Handler="OnTreeItemClicked"/> 
```

然后这在后面的代码中：

```
private void OnTreeItemClicked(object sender, MouseButtonEventArgs e)
{
    _item = sender as TreeViewItem;
    if (_item != null)
    {
        string header = _item.Header.ToString();
    }
} 
```

这将为每个 . 添加相同的`ContextMenu`内容`TreeViewItem`，并对. 您当然可以变得更加灵活/动态/高级，但这应该为您提供入门的基础。`MenuItems``ContextMenu`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-14T18:28:39.767

更简单...将 ContextMenuStrip 从工具箱添加到设计视图。根据需要添加菜单选项（如果需要，重命名名称或将其保留在 ContextMenuStrip1。然后您所要做的就是在设计模式、属性中选择 TreeView，然后设置上下文菜单。

# java - Android - 以编程方式连接到 wifi

> ID：15253982
> 
> 赞同：3
> 
> 时间：2013-03-06T17:25:37.693
> 
> 标签：java, android, wifi, connect

我想以编程方式连接到 WiFi 网络。

这是我的代码：

```
wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(true);

WifiConfiguration config = new WifiConfiguration();
config.SSID = "\"" + ssid + "\"";
config.preSharedKey = "\""+ key +"\"";

int netId = wifiManager.addNetwork(config);
wifiManager.saveConfiguration();
wifiManager.disconnect();
wifiManager.enableNetwork(netId, true);
wifiManager.reconnect(); 
```

当我在手机上启用 wifi 时，它按预期工作，但问题是，当 wifi 被禁用时。在这种情况下，唯一的结果是启用 wifi 适配器，但没有连接到网络。似乎启用需要很长时间，因此无法连接。对我来说另一个奇怪的事情是`wifiManager.getConfiguredNetworks()`返回 null。你知道怎么解决吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T16:15:32.570

> 似乎启用需要很长时间，因此无法连接。

是的。这是因为网络的启用是异步完成的，它是并行发生的，并且不会立即发生。以下是您的问题的两种可能的解决方案：

1）这是最简单的解决方案，但不是最好的。由另一个用户检查扫描结果是否进入所描述的循环。但是，您应该在循环的每个循环之间添加某种睡眠。IE要等待1ms，以免吃光所有CPU资源。我不确定如何在 Android 中做到这一点。这种方法还有另一个问题。如果您在 GUI 线程中，您将在等待建立连接时以这种方式阻止所有 GUI 事件。

2）这是正确的解决方案。建立网络连接后，您可以注册广播事件。然后，您将在完成时收到一个事件。从此事件中，您可以完成所需的任何操作。

很抱歉回答的仓促。我不是 Android 专业人士，所以我无法解释如何做到这一点的细节，但我想我至少会为你指明正确的方向。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-26T06:21:05.760

实际上，如果您多次连接 WiFi，它将解决您的问题。

我看到的另一件事是，如果我的 WiFi 已启用并且我连接到特定的 WiFi 网络，那么它就可以工作了。

另一件事是，当我从移动网络切换到特定的 WiFi 网络时，它会提供不稳定的连接..对于这个问题，我通过特定的 WiFi 网络连接 WiFi，然后在 3 秒延迟后忘记了网络，我再次连接。然后它可以正常工作。

我使用此代码连接到 WiFi。

为了延迟和获得 WiFi 网络，我使用此代码............

```
{ 
   wifi(SSID,PASS); 
   final Handler handler = new Handler();
   handler.postDelayed( 
       new Runnable() 
       { 
          Override public void run() { forgot(); } 
       }, 3000); 
   final Handler handler1 = new Handler();
   handler1.postDelayed(
       new Runnable() 
       {
          Override public void run() {wifi(SSID,PASS); } 
       }, 3000);
} 
```

# android - 使用 ADB 或 java 代码更改默认的 android 键盘

> ID：15253983
> 
> 赞同：18
> 
> 时间：2013-03-06T17:25:39.283
> 
> 标签：android, android-softkeyboard

我正在构建一个使用特定键盘的自定义应用程序，因此当用户运行应用程序时，默认键盘应更改为我的特定键盘，名称为黑客键盘，我如何使用 java 代码或从 java 代码调用 adb 命令，我的设备是植根的，这又是特定的应用程序，我开发的公司需要它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-12T13:00:12.923

您可以使用`ime`命令来设置`input method`.

```
$ adb shell ime
usage: ime list [-a] [-s]
       ime enable ID
       ime disable ID
       ime set ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:56:34.720

您可以[`KeyboardView`](http://developer.android.com/reference/android/inputmethodservice/KeyboardView.html)在您的应用程序中使用来打开您自己的键盘。因此，您应该覆盖`OnTouchListener`例如编辑文本框。

不需要有根设备，也不需要使用 adb。Android SDK 中也有一个示例。它被称为“软键盘”。

[或者您可以在此博客文章](http://www.infiniterecursion.us/2011/02/android-activity-custom-keyboard.html)中查看示例。

# fix-protocol - 记录映射到不同场所的最佳方式

> ID：15253985
> 
> 赞同：0
> 
> 时间：2013-03-06T17:25:43.193
> 
> 标签：fix-protocol

嗨，我的雇主要求我记录我们的 FIX 规范将如何映射到另一个场所的 FIX 规范。这将需要艰苦的工作，因为它涉及浏览每条消息并查看它与我们的不同之处。记录这一点的最佳方法是什么？是否有任何软件可以使这项任务变得更容易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:09:14.127

如果您使用的是 QuickFIX，我会说您的自定义 FIX 字典采用 XML 格式，您可以使用 FIX 4.2、4.4 等的默认字典，并根据您的需要进行更改 [http://sourceforge.net/p/quickfixj/代码/1113/tree/trunk/core/src/main/resources/](http://sourceforge.net/p/quickfixj/code/1113/tree/trunk/core/src/main/resources/)

然后您可以生成 Java 代码，例如使用 QuickFIX/J 代码生成并编写单元测试以检查您是否仍然符合您的 FIX 规范 [http://www.quickfixj.org/quickfixj/usermanual/1.5.3/usage/codegen。 html](http://www.quickfixj.org/quickfixj/usermanual/1.5.3/usage/codegen.html)

# android - 从 Android 中的 OnClickListener 膨胀 ListView 行？

> ID：15253987
> 
> 赞同：0
> 
> 时间：2013-03-06T17:25:52.263
> 
> 标签：android, listview

我有一个类 ( `A_Main.java`) 扩展`ArrayAdapter`。我将我设置为按原样`ListView`使用。在里面我膨胀视图以获取每一行的小部件。每行包含一个,和一个。单击时，我播放与. 我不想在 上使用，因为摸索滚动并开始播放新歌太容易了。`A_Main``ListAdapter``A_Main.getView()``ListView``TextView``CheckBox``ImageButton``ImageButton``TextView``onItemClickListener()``ListView`

当我`ImageButton`在新行中单击一个时，我需要取消`ImageButton`当前正在播放的歌曲的隐藏，并取消新的歌曲。我在想这样做的方法是膨胀 ImageButton 中的视图`onClickListener()`并取消列表中的每个按钮，然后，hi-lite 正在播放的按钮。我不确定解决这个问题的最佳方法。我可以在`A_Main`每个`ImageButton`ID 中保留一个成员列表，因为 getView() 对其进行迭代并直接从中引用 ID`onClickListener()`而不会导致内存泄漏？这些 ID 会在处理完后立即消失`getView()`吗？关于替代方法的任何想法？

![在此处输入图像描述](../Images/b754fbcb8d7fda80bb5a57bb1e6cdd3c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T17:43:42.050

编辑：

解决方案可能很简单 像这样全局获取布尔数组

```
 private final boolean[] selectedstates; 
```

并在构造函数中使用列表的大小对其进行初始化

```
 selectedstates= new boolean[yourlist.size()]; 
```

在这样的 onclick 侦听器设置之外

```
 yourbutton.setSelected(selectedstates[position]); 
```

我希望这能帮到您

* * *

试试这个

采用具有两个不同状态图像的自定义选择器进行选择和非选择

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/pause_button"
          android:state_selected="true" />
    <item android:drawable="@drawable/play_button" />
</selector> 
```

1.创建一个全局变量

```
Imageview previous; 
```

在您的自定义适配器中并在您将获取内容的构造函数中对其进行初始化

```
previous=new ImageView(context); 
```

添加您的适配器 getView() 方法，您可能会有一个 onclickListener 为您的 Imageview 做这样

```
 imagPlay.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
             ImageView current=((ImageView)v);
              current.setSelected(true);
              previous.setSelected(false);
              previous=current;
        }
    }); 
```

这会奏效，我很自信，因为我已经在我的应用程序中使用了它。我希望这能帮到您

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:30:10.033

应该看看这个视频。[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。特别是 viewholder 部分可以重用视图并避免内存泄漏。要突出显示列表视图行按钮，请检查您单击的项目的位置，并通过设置按钮的背景突出显示该按钮。

# opencv - OpenCV - 图像压缩的可能选项

> ID：15253992
> 
> 赞同：6
> 
> 时间：2013-03-06T17:26:09.133
> 
> 标签：opencv, compression, jpeg, image-compression

感谢您花时间阅读我的帖子。

我正在做一个进展顺利的小项目，但作为优化练习，我想减少我输出的一些 JPEG 的大小。目前，我有一个 600 x 400 的 .jpg 文件，大约 80kb。

我已经阅读了关于 32 位、8 位有符号、无符号和浮点数和字符的图像，以及 BGR 和 YUV 颜色空间，但不确定哪些是最影响大小的因素。

有人能建议我从哪里开始减少这个文件的大小吗？

我当然会尝试并进行自己的测试，以找到适合文件大小平衡的图像质量。

非常感谢，凯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T19:20:41.223

听起来你想压缩你的图像，写入磁盘时。

这是jpeg的：

```
std::vector<int> params;
params.push_back(CV_IMWRITE_JPEG_QUALITY);
params.push_back(100);   // that's percent, so 100 == no compression, 1 == full 
cv::imwrite("my.jpg",image,params); 
```

这里是png：

```
std::vector<int> params;
params.push_back(CV_IMWRITE_PNG_COMPRESSION);
params.push_back(9);   // that's compression level, 9 == full , 0 == none
cv::imwrite("my.png",image,params); 
```

# dynamics-crm-2011 - 如何在本地恢复 Dynamics CRM 2011 中已删除的记录

> ID：15253996
> 
> 赞同：2
> 
> 时间：2013-03-06T17:26:28.047
> 
> 标签：dynamics-crm-2011, microsoft-dynamics

我们正在本地环境中设置我们的 Dynamics CRM 2011，我们有兴趣了解 Dynamics CRM 中存在哪些类型的恢复功能，以便我们提前计划。

我们将进行完整的每周备份和每日差异备份，但是如果有人在晚上 9 点意外删除了记录，而我们的最后一次差异备份是在下午 1 点——数据显然不会在备份中。

以前版本的 Dynamics CRM 具有软删除功能，因此很容易取消删除记录，但这在 2011 版本中发生了变化。

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:33:01.527

您可以采取多种措施来防止数据丢失或在数据被删除时恢复数据。

为最重要的记录启用审计——即使数据被删除，您仍然应该能够使用数据库审计数据和 SKD 进行恢复。查看[这篇](http://blogs.msdn.com/b/crm/archive/2011/05/23/recover-your-deleted-crm-data-and-recreate-them-using-crm-api.aspx)文章了解更多详情。

查看用户权限 - 看看您是否可以减少用户权限，以便只有管理员可以删除记录。

进行更频繁的差异数据库备份 - 看看您是否可以每隔一小时左右创建差异备份。

使用第三方工具——查看[ApexSQL Recover](http://www.apexsql.com/sql_tools_recover.aspx)和[ApexSQL Log](http://www.apexsql.com/sql_tools_log.aspx)。这些工具声称他们可以通过读取事务日志来恢复已删除的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:32:27.333

该方法取决于您预计会遇到什么样的伤害。

*   粗心 - 启用审计
*   法律考虑 - 外部网络服务
*   恶意 - 安全角色
*   故障 - 计划备份

# c++ - 自定义有序集给出 find(...) 的“无效操作符<”

> ID：15253999
> 
> 赞同：0
> 
> 时间：2013-03-06T17:26:32.170
> 
> 标签：c++, operator-overloading, set

当我尝试在自定义有序集中查找元素时遇到问题。

```
File: c:\program files (x86)\microsoft visual studio 10.0\vc\include\xtree
Line: 1746

Expression: invalid operator< 
```

我需要一组字符串，其中元素根据我的需要进行排序。

比较器对象：

```
struct OrderComparator {
public:
    static map<string,int> valueOrder;

    bool operator()( const string lhs, const string rhs ) {
        map<string,int>::iterator resultLhs,resultRhs;
        resultLhs = valueOrder.find(lhs);
        resultRhs = valueOrder.find(rhs);
        if (resultLhs == valueOrder.end() || resultRhs == valueOrder.end())
        {
            return false;
        }
        else {
            bool result = resultLhs->second <= resultRhs->second;
            return result;
        }
    }

    static map<string,int> create_map()
    {
        map<string,int> m;
        m["A"] = 1; 
        m["B"] = 2;
        m["C"] = 3;
        m["D"] = 4;
        return m;
    }
}; 
```

* * *

比较器工作正常！

但是当我试图在集合中搜索时出现提到的错误。

```
typedef set<string, OrderComparator> TREESET_CMP;
...
TREESET_CMP::iterator it = myTree.find(obj); <-fails
... 
```

如果有人能告诉我为什么会发生这种情况以及如何解决它，我会很高兴。

* * *

完整的工作迷你示例：

```
 #include "stdafx.h"
#include <string>
#include <set>
#include <map>
#include <iterator>
#include <algorithm>
using namespace std;
#include <stdio.h>
#include <tchar.h>

struct OrderComparator {
public:
    static map<string,int> valueOrder;

    bool operator()( const string lhs, const string rhs ) {
        map<string,int>::iterator resultLhs,resultRhs;
        resultLhs = valueOrder.find(lhs);
        resultRhs = valueOrder.find(rhs);
        if (resultLhs == valueOrder.end() || resultRhs == valueOrder.end())
        {
            return false;
        }
        else {
            bool result = resultLhs->second <= resultRhs->second;
            return result;
        }
    }

    static map<string,int> create_map()
    {
        map<string,int> m;
        m["A"] = 1; 
        m["B"] = 2;
        m["C"] = 3;
        m["D"] = 4;
        return m;
    }
};
map<string,int> OrderComparator::valueOrder = OrderComparator::create_map();

typedef set<string, OrderComparator> TREESET_CMP;

int _tmain(int argc, _TCHAR* argv[])
{
    TREESET_CMP myTree;
    myTree.insert("B");
    myTree.insert("C");
    myTree.insert("A");

    TREESET_CMP::const_iterator it = myTree.find("A");
    system("PAUSE");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T17:52:36.470

您的比较没有定义[严格的弱排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)

严格的弱排序必须具有这些不变量（引用自上面的链接）

*   **非自反性** f(x, x) 一定是假的。
*   **反对称** f(x, y) 意味着 !f(y, x)
*   **传递性** f(x, y) 和 f(y, z) 隐含 f(x, z)。
*   **等价的传递性** 等价（如上定义）是传递性的：如果 x 等价于 y 并且 y 等价于 z，则 x 等价于 z。（这意味着等价实际上确实满足等价关系的数学定义。）

你的至少失败了非反身性（将一个对象与自身进行比较必须是错误的）和反对称性（如果 x 小于 y，那么 y 不小于 x）

基本上，`<=`不是有效的排序，因为`x <= x`返回 true，这意味着您永远无法在集合中找到元素。为了找到一个元素，该集合会寻找一个具有该属性的元素，`!cmp(key, element) && !cmp(element, key)`但它永远不会对您的排序起作用。

最简单的解决方法可能是更改`<=`为`<`，但可能还有其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T18:10:00.697

您的比较器可以是这样的：

```
bool operator()( const string &lhs, const string &rhs ) {
    map<string,int>::iterator resultLhs,resultRhs;
    resultLhs = valueOrder.find(lhs);
    resultRhs = valueOrder.find(rhs);
    if (resultLhs == valueOrder.end()) return false;
    if (resultRhs == valueOrder.end()) return true;

    return resultLhs->second < resultRhs->second;
} 
```

您可以将 2 行替换为：

```
if (resultRhs == valueOrder.end()) return false;
if (resultLhs == valueOrder.end()) return true; 
```

如果您希望在此之前对地图中不存在的字符串进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T17:48:24.640

尝试将您的比较方法声明为`const`并使用 const 引用进行争论。第一个修复是确保您可以使用常量版本调用您的方法，`OrderComarator`第二个修复是避免复制。

```
bool operator()( const string& lhs, const string& rhs ) const { 
```