# StackOverflow 问答 12982000-12982999

# c++ - “new int[5]”和“malloc(5 * sizeof(int))”在 C++ 中有什么区别？

> ID：12982003
> 
> 赞同：1
> 
> 时间：2012-10-19T20:30:06.930
> 
> 标签：c++, c, memory

> **可能重复：**
> [new/delete 和 malloc/free 有什么区别？](https://stackoverflow.com/questions/240212/what-is-the-difference-between-new-delete-and-malloc-free)

它们在功能上是否等效，并且是调用 delete 时需要使用 [] 运算符的唯一区别，还是我还缺少其他东西？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:33:07.613

正如 Mehrdad 在[这个问题中所说：](https://stackoverflow.com/questions/807939/what-is-the-difference-between-new-and-malloc-and-calloc-in-c)

> malloc 分配未初始化的内存。分配的内存必须免费释放。
> 
> new 通过调用构造函数初始化分配的内存（如果它是一个对象）。用 new 分配的内存应该用 delete 释放（这反过来又调用析构函数）。它不需要您手动指定所需的大小并将其转换为适当的类型。因此，它更现代，更不容易出错。
> 
> **注意：-** new 是一个运算符， malloc 是一个函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:33:50.387

有几个不同之处。

首先，`new int[5]`必须使用 释放`delete[]`，并且`malloc(...)`必须使用 释放`free`。你不能混搭。

其次，如果您使用带有构造函数的类型，则`malloc`不会调用构造函数，`free`也不会调用析构函数。您必须手动调用它们（或仅使用`new`/ `free`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T20:33:58.387

new 运算符在失败的情况下调用 new_handler 并可能引发 std::bad_alloc 异常。malloc() 不做这些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T20:35:01.230

`new`有类型安全，`malloc`没有。

`new`调用构造函数，`malloc`没有。

`delete`调用析构函数，`free()`没有。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T20:39:13.260

**运算符 new 和 new[]。**

为了请求动态内存，它存在操作符 new。new 后跟数据类型和可选的括号 [] 中所需的元素数。它返回一个指向新分配内存块开始的指针。

它的形式是：pointer = new type orpointer = new type [elements] 第一个表达式用于分配内存以包含一个类型的单个元素。第二个用于分配类型元素的块（数组）。例如：

诠释*鲍比；

鲍比 = 新的 int [5];

在这种情况下，操作系统在堆中为 5 个 int 类型的元素分配了空间，并返回了一个指向其开头的指针，该指针已分配给 bobby。因此，现在，bobby 指向一个有效的内存块，其中有 5 个 int 元素的空间。

**函数malloc。**

将动态内存分配给指针是通用函数。它的原型是：void * malloc(size_t nbytes)；其中 nbytes 是我们希望分配给指针的字节数。该函数返回一个 void* 类型的指针，我们必须将值类型转换为目标指针的类型，例如：

字符 * 罗尼;

ronny = (char *) malloc (10);

这为 ronny 分配了一个指向 10 字节的可用块的指针。当我们想要分配除 char 以外的不同类型的数据块（不同于 1 个字节）时，我们必须将所需的元素数量乘以每个元素的大小。幸运的是，我们有操作符 sizeof，它返回具体数据的数据类型的大小。

诠释*鲍比；

bobby = (int *) malloc (5 * sizeof(int));

这段代码为 bobby 分配了一个指向 int 类型的 5 个整数块的指针，根据编译程序的系统，这个大小可以等于 2、4 或更多字节。

# c# - 捕捉打印对话框以限制份数（C#）

> ID：12982004
> 
> 赞同：0
> 
> 时间：2012-10-19T20:30:08.150
> 
> 标签：c#, printing, dialog, copy, try-catch

我想知道如何以及是否可以捕获用户何时获得打印对话框（在任何应用程序中 - word、chrome 等），然后限制副本的数量。

我搜索了2个小时，一无所获。

# java - Java GridBagLayout

> ID：12982010
> 
> 赞同：3
> 
> 时间：2012-10-19T20:30:30.553
> 
> 标签：java, swing, jpanel, gridbaglayout

我的任务是使用 Swing 在 Java 中设计一个基本的 UI，但我一直坚持布置它。我想创建类似的东西，[但](https://i.imgur.com/ZvXE0.jpg)我尝试使用 GridBagLayout 导致了一些非常混乱的事情。任何人都可以提供一些关于如何像这样布置我的 GUI 的提示吗？

我有一个 JTabbedPane，我向其中添加了两个选项卡，并且我向这两个选项卡中的每一个添加了一个包含我的控件的 JPanel。 ![我想如何布局](../Images/5f2fd0ab72c6d463de3afb9eeea56dd2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:35:32.463

我建议

*   整体 GUI 使用 BorderLayout，
*   JTable 位于 JScrollPane 中，这应该放置在 BorderLayout.CENTER 中。
*   包含标签、字段和按钮的顶部 JPanel 放置在 BorderLayout.PAGE_START。
*   顶部JPanel 也可以使用BorderLayout 并且可以将按钮保持在BorderLayout.PAGE_END 位置。
*   按钮将由使用 JPanel 的 GridLayout(1, 0, x, 0) 持有，其中 x 是按钮之间的间隙
*   标签和 JTextField 位于使用 GridBagLayout 的 JPanel 中，并且放置在 BorderLayout.CENTER 位置的顶部 JPanel 中。
*   您不要盲目地遵循这些建议，而是尝试并使用嵌套 JPanel 的不同组合，每个组合都使用自己的布局。
*   你也看看[这个链接](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T20:40:51.660

以下是我的建议：

*   使用 a `JPanel pTextBox`with GridLayout(3, 2) 来保存所有标签 + 文本框
*   使用`JPanel pButtons`带有 GridLayout(1, 3) 或 BoxLayout(horizo​​ntal) 的所有按钮
*   使用`JPanel pAll`带有 BoxLayout(vertical) 的 a 来保存`pTextBox`,`pButtons`和 Table。
*   使用支柱、胶水和最小/最大/首选尺寸来调整间距/调整大小行为。

另请查看：[http](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html) ://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html以准确比较您正在寻找的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T21:40:37.577

有一个组件 JTable 想要占据窗口中的所有可用空间。这意味着将需要一个 BorderLayout，其 JScrollPane 包含该 BorderLayout 的 BorderLayout.CENTER 中的 JTable。其他组件将在 BorderLayout.PAGE_START 中的另一个 JPanel 内

在这个新的 JPanel 中，没有需要垂直调整其大小的组件，所以我看不到 BorderLayout 的必要性。我会用一个垂直的 BoxLayout 来组合它。在此面板中再插入两个，一个 GridBagLayout 用于标签和文本字段，一个 FlowLayout 用于按钮，中心对齐和一些水平间隙。我更喜欢 GridLayout 的 FlowLayout insetad 按钮，因为如果您调整主面板的大小，使用 FlowLayout 按钮将保持它们之间的相同距离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-18T20:06:32.723

这是一些代码...我无法让 JTextFields 正确显示，因此您必须修复它。

主要的：

```
 import javax.swing.SwingUtilities;

public class Main {

    public static void main(String [] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                Panel panel = new Panel();
            }

        });

    }

} 
```

控制板：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.JTextField;

public class Panel extends JPanel{

    private JFrame frame; 

    private JLabel label1;
    private JLabel label2; 
    private JLabel label3;

    private JTextField textField1;
    private JTextField textField2;
    private JTextField textField3;

    private JButton button1;
    private JButton button2;
    private JButton button3;

    private JTable table;

    public Panel() {

        label1 = new JLabel("label1");
        label2 = new JLabel("label2");
        label3 = new JLabel("label3");

        textField1 = new JTextField("textField1", 20);
        textField2 = new JTextField("textField2", 20);
        textField3 = new JTextField("textField3", 100);

        button1 = new JButton("Hello");
        button2 = new JButton("Goodbye");
        button3 = new JButton("Love");

        table = new JTable(20,20);

        frame = new JFrame("My application");
        frame.setSize(1000, 1000);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        this.setOpaque(true);

        setLayout(new GridBagLayout());

        GridBagConstraints gc = new GridBagConstraints();

        gc.weightx = 1;
        gc.weighty =1;
        gc.fill = GridBagConstraints.NONE;

        gc.gridx = 0;
        gc.gridy = 0;
    //  gc.anchor = GridBagConstraints.WEST;
        add(label1, gc);

        gc.gridx = 2;
        gc.gridy = 0;
        //gc.anchor = GridBagConstraints.EAST;
        add(textField1, gc);

        gc.gridx = 0;
        gc.gridy = 1;

        //gc.anchor = GridBagConstraints.WEST;
        add(label2, gc);

        gc.gridx = 2;
        gc.gridy = 1;
        //gc.anchor = GridBagConstraints.EAST;
        add(textField2, gc);

        gc.gridx = 0;
        gc.gridy = 2;
        //gc.anchor = GridBagConstraints.WEST;
        add(label3, gc);

        gc.gridx = 2;
        gc.gridy = 2;
        //gc.anchor = GridBagConstraints.EAST;
        add(textField3, gc);

        gc.gridx = 0;
        gc.gridy = 3;
        //gc.anchor = GridBagConstraints.WEST;
        add(button1, gc);

        gc.gridx = 1;
        gc.gridy = 3;
        gc.anchor = GridBagConstraints.CENTER;
        add(button2, gc);

        gc.gridx = 2;
        gc.gridy = 3;
    //  gc.anchor = GridBagConstraints.EAST;
        add(button3, gc);

        gc.gridx = 1;
        gc.gridy = 4;
        gc.anchor = GridBagConstraints.CENTER;
        add(table, gc);

        frame.add(this);
    }

} 
```

# c# - 通过麦克风播放时识别音符

> ID：12982011
> 
> 赞同：2
> 
> 时间：2012-10-19T20:30:31.457
> 
> 标签：c#, audio, xna

我想制作一个程序来识别我用吉他在麦克风上弹奏的音符，但我不确定如何让我的程序识别我弹奏的声音，然后让程序在一堆音符之间进行选择。我可以帮忙吗？我基本上需要一个库，它能够识别通过麦克风播放的声音，然后将其与不同的音频文件进行比较，看看哪个最接近播放的音符。我希望你们现在明白这一点，这很难解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:56:41.897

正如 Dan Bryant 所提到的，您基本上想要进行 FFT，它可以为您提供不同频率的能量。找到具有最大能量的频率，然后选择频率最接近该频率的音符。这就是您购买的小型数字调音器的功能，这些调音器可以帮助您为吉他调音。有几个可用的库可以为您执行 FFT。您只需要指定一个 FFT 大小，它可以为您提供足够的频率分辨率来区分音符。

# php - in_array 有类似的功能吗？

> ID：12982016
> 
> 赞同：-1
> 
> 时间：2012-10-19T20:31:02.413
> 
> 标签：php

我有一组人在 html 文件中在线注册。我正在使用它，以便每个人都可以分配给他们一个图像。但是当检查 using name 是否已在使用时，in_array 函数返回 false 并允许脚本继续。

```
$user = "< img src='default.jpg' />John";
$explode = array("<img src='tress.jpg' />John");

if(in_array($user, $explode))
   {
   //show login script if user exists
   }
   else
    {
     //continue to script
     } 
```

现在这不起作用的原因是数组中的 john 与 $user 中的 john 不同。无论如何检查名称是否存在于数组中？回复时请说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:52:55.510

与其问“我该如何解决这个问题？”，不如先问“我为什么会遇到这个问题？”

```
$user = "< img src='default.jpg' />John"; 
```

是`< img src='default.jpg' />John`用户名吗？你为什么用它作为一个？我猜这背后有一些聪明的想法，比如“好吧，我总是用他们的名字来显示用户的图片，所以我只会*让图片成为他们名字的一部分*。**这会导致比它解决的问题更多的问题。**这回到计算机科学中一个叫做[关注点分离的](https://en.wikipedia.org/wiki/Separation_of_concerns)大概念。图像在*逻辑上*不是用户名的一部分，所以**不要将它存储为一个**。如果你总是一起显示它们，你可以使用函数来显示用户的以标准方式获取信息，而无需将图像作为用户名的一部分。

所以首先，从名称中删除图像。有几种方法可以单独存储它。

我建议使用[一个类](http://php.net/manual/en/language.oop5.php)：

```
class User {
    public $name;
    public $imageSource;

    // The following functions are optional, but show how a class
    // can be useful.

    /**
     * Create a user with the given name and URL to their image
     */
    function __construct($name, $imageSource) {
        $this->name = $name;
        $this->imageSource = $imageSource;
    }

    /**
     * Gets the HTML to display a user's image
     */
    function image() {
        return "<img src='". $this->imageSource ."' />";
    }

    /**
     * Gets HTML to display to identify a user (including image)
     */
    function display() {
        return $this->image() . $this->name;
    }
}

$user = new User("john", "default.jpg");

// or without the constructor defined
//$user = new User();
//$user->name = "john";
//$user->imageSource = "default.jpg";

echo $user->display(); 
```

如果你想更懒一点，你可以使用[“数组”](http://php.net/manual/en/language.types.array.php)，但我不建议在一般情况下使用它，因为你失去了类的酷特性（比如那些函数）：

```
$user = array(
   name => "john",
   image => "<img src='default.jpg' />";
);

echo $user["image"] . $user["name"]; 
```

在您的数据库中（如果您使用的是一个），将它们分开列，然后使用上述数据结构之一。

[现在你有了这个，很容易使用foreach 循环](http://php.net/manual/en/control-structures.foreach.php)查看用户名是否在给定列表中：

```
function userNameInList($user, $users) {
    for($users as $current) {
        if($user->name == $current) {
            return true;
        } 
    }
    return false;
}

$newUser = new User("John", "john.jpg");
$currentUsers = array("John", "Mary", "Bob");
if(userNameInList($newUser, $currentUsers) {
    echo "Sorry, user name " . $newUser->name . " is already in use!";
} 
```

如果您是 PHP 新手，正常`for`循环可能更容易理解：

```
function userNameInList($user, $users) {
    for($i = 0; $i < count($users); ++i) {
        $current = $users[$i];
        if($user->name == $current) {
            return true;
        } 
    }
    return false;
} 
```

让我知道如果其中任何一个不运行，我不再经常编写 PHP 了..

# c - 使用 make 编译为 32 位

> ID：12982020
> 
> 赞同：4
> 
> 时间：2012-10-19T20:31:14.553
> 
> 标签：c, x86, makefile

我正在尝试使用 -m32 标志编译一个非常简单的程序。
如果我尝试使用 gcc -m32 执行此操作，它工作得很好（我有所需的库）

然而，当我将此标志添加到我在 makefile 中的标志时，我收到一个奇怪的错误
这是我拥有的 makefile

```
CC=gcc
CFLAGS=-m32 -O1 -W -Wall -pedantic -std=c99

all: main.o 
    $(CC) -o main main.o 
    rm main.o 

clean: 
    rm main 
```

我收到的错误如下

```
gcc -o main main.o
/usr/bin/ld: i386 architecture of input file `main.o' is incompatible with i386:x86-64 output
collect2: ld returned 1 exit status
make: *** [all] Error 1 
```

有人可以告诉我这是什么意思吗？我该如何解决？

至于代码，代码除了打印'hello world'外什么都不做

我在 Linux 2.6.35 64 位下使用 GCC 4.4.3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T20:47:35.823

您的错误是您没有传递`-m32`给链接器。

你实际上需要改变你`Makefile`的样子：

```
CC=gcc
CFLAGS=-m32 -O1 -W -Wall -pedantic -std=c99
LDFLAGS = -m32

all: main.o 
    $(CC) $(LDFLAGS) -o main main.o 
    rm main.o 

clean: 
    rm main 
```

更好的方法如下`Makefile`：

```
CC=gcc
CFLAGS=-m32 -O1 -W -Wall -pedantic -std=c99
LDFLAGS=-m32

.INTERMEDIATE: main.o

all: main

main: main.o

clean: 
    -rm main 
```

在后面，您只是说 main 依赖于`main.o`并将使用as 参数为您`GNU Make`调用链接器，因为它使用as 参数调用编译器`LDFLAGS``CFLAGS``main.o`

“.INTERMEDIATE 所依赖的目标被视为中间文件。请参阅隐式规则链部分。没有依赖关系的 .INTERMEDIATE 将 makefile 中提到的所有文件目标标记为中间文件。” [特殊的内置目标名称](http://theory.uwinnipeg.ca/localfiles/infofiles/make/make_36.html#SEC35)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T20:33:10.073

您还应该通知链接器有关 32 位架构的信息。尝试添加

```
LD = $(CC)
LDFLAGS = -m32 
```

到您的 Makefile 并更改

```
$(CC) -o main main.o 
```

到

```
$(LD) $(LDFLAGS) -o main $^ 
```

它应该工作。

（为什么有效？如果您使用 GCC 一步编译和链接代码，所有相关标志和选项不仅会传递给编译器，还会传递给链接器。）

# java - BlackBerry 类相当于 AsyncTask？

> ID：12982021
> 
> 赞同：6
> 
> 时间：2012-10-19T20:31:16.223
> 
> 标签：java, android, multithreading, blackberry, android-asynctask

我的要求是有一个线程来维护 BlackBerry 设备和服务器之间的套接字连接并交换命令，类似于请求和响应。

我的问题是我需要让这个线程一直在后台运行，*并*保持 UI 对用户可用。因此，当有来自服务器的命令时，该线程解析它并更新 UI，如果 BlackBerry 用户有操作，它会将其发送到服务器，然后服务器依次处理它。

我使用 Android 开发了相同的应用程序，`AsyncTask`并且运行良好。但在 BlackBerry 中，由于没有此类，我使用了[invokeLater()](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/Application.html#invokeLater%28java.lang.Runnable%29)选项。服务器和 BB 设备之间的通信工作正常，但用户界面在 BlackBerry 上被冻结。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T11:12:55.713

Vishal 走在正确的轨道上，但还需要多一点才能与 Android 的`AsyncTask`. 由于 BlackBerry 上的 Java 1.3 不提供枚举和泛型，因此您无法完美匹配 Android API。

但是，你可以做这样的事情（未经测试......这只是你的起点）：

```
import net.rim.device.api.ui.UiApplication;

public abstract class AsyncTask {

    public static final int FINISHED = 0;
    public static final int PENDING = 1;
    public static final int RUNNING = 2;

    private int _status = PENDING;
    private boolean _cancelled = false;
    private Thread _worker;

    /** subclasses MUST implement this method */
    public abstract Object doInBackground(Object[] params);

    protected void onPreExecute() {
        // default implementation does nothing
    }
    protected void onPostExecute(Object result) {
        // default implementation does nothing
    }
    protected void onProgressUpdate(Object[] values) {
        // default implementation does nothing
    }
    protected void onCancelled() {
        // default implementation does nothing
    }
    protected void onCancelled(Object result) {
        onCancelled();
    }

    public final int getStatus() {
        return _status;
    }

    public final boolean isCancelled() {
        return _cancelled;
    }

    public final boolean cancel(boolean mayInterruptIfRunning) {
        if (_status == FINISHED || _cancelled) {
            return false;
        } else {
            _cancelled = true;
            if (mayInterruptIfRunning && _status == RUNNING) {
                // NOTE: calling Thread.interrupt() usually doesn't work
                //   well, unless you don't care what state the background
                //   processing is left in.  I'm not 100% sure that this is how
                //   Android's AsyncTask implements cancel(true), but I 
                //   normally just cancel background tasks by letting the
                //   doInBackground() method check isCancelled() at multiple
                //   points in its processing.
                _worker.interrupt();
            }
            return true;
        }
    }

    protected final void publishProgress(final Object[] values) {
        // call back onProgressUpdate on the UI thread
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                onProgressUpdate(values);
            }
        });
    }

    private void completeTask(final Object result) {
        // transmit the result back to the UI thread
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                if (isCancelled()) {
                    onCancelled(result);
                } else {
                    onPostExecute(result);
                }
                // TODO: not sure if status should be FINISHED before or after onPostExecute()
                _status = FINISHED;
            }
        }); 
    }

    public AsyncTask execute(final Object[] params) throws IllegalStateException {
        if (getStatus() != PENDING) {
            throw new IllegalStateException("An AsyncTask can only be executed once!");
        } else {
            try {
                onPreExecute();

                _worker = new Thread(new Runnable() {
                    public void run() {
                        try {
                            // run background work on this worker thread
                            final Object result = doInBackground(params);
                            completeTask(result);
                        } catch (Exception e) {
                            // I believe if Thread.interrupt() is called, we'll arrive here
                            completeTask(null);
                        }
                    }
                });
                _status = RUNNING;
                _worker.start();
            } catch (Exception e) {
                // TODO: handle this exception
            }
        }

        return this;
    }

} 
```

此外，请务必记住 Android 的 AsyncTask 的线程规则，它也适用于上述实现：

> **线程** 规则 要使此类正常工作，必须遵循一些线程规则：
> 
> *   AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。
>     
>     
> *   任务实例必须在 UI 线程上创建。
>     
>     
> *   必须在 UI 线程上调用 execute(Params...)。
>     
>     
> *   不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。
>     
>     
> *   该任务只能执行一次（如果尝试第二次执行将引发异常。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T21:15:13.660

您可以创建一个类来扩展我的 class 实现`AsyncTask`。祝你好运 ：）

这里的方法`onPreExecute`，`onPostExecute`在 UI 线程上执行，doInBackground 在工作线程上调用。由于`onPreExecute`,`onPostExecute`是抽象的，您可以覆盖它们并提供您的实现，例如显示和关闭进度对话框。

方法执行的顺序是 1) onPreExecute 2) doInBackground 3) onPostExecute

```
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.Dialog;

public abstract class AsyncTask {
    Runnable runnable;
    Thread threadToRun;

    public abstract void onPreExecute();

    public abstract void onPostExecute();

    public abstract void doInBackground();

    public void execute() {
    try {
        runnable = new Runnable() {

            public void run() {
                // TODO Auto-generated method stub
                UiApplication.getUiApplication().invokeLater(
                        new Runnable() {

                            public void run() {
                                // TODO Auto-generated method stub
                                onPreExecute();
                            }
                        });

                doInBackground();

                UiApplication.getUiApplication().invokeLater(
                        new Runnable() {

                            public void run() {
                                // TODO Auto-generated method stub
                                onPostExecute();
                            }
                        });

            }
        };

        threadToRun = new Thread(runnable);
        threadToRun.start();
    } catch (Exception e) {
        // TODO: handle exception
        Dialog.alert("Async Error Occured. " + e.toString());
    }
}
} 
```

# c# - 用于 Microsoft Solver Foundation 的 LpSolve 插件无法在 64 位操作系统上运行

> ID：12982022
> 
> 赞同：3
> 
> 时间：2012-10-19T20:31:22.337
> 
> 标签：c#, 64-bit, ms-solver-foundation, lpsolve

我不能让用于 MSF 的 LPSolvePlugIn 在 64 位操作系统上工作。（内部 ac# dll 托管从 asp mvc 3 应用程序调用）

有没有特定的版本？我应该构建面向 x86 的应用程序吗？我应该将求解器插件从源代码重建为目标 x64 吗？

我很茫然，关于插件的文档不多，最新的代码似乎针对 MSF 2.0.7（我目前有 3.0.1 或 3.0.2）

任何帮助，将不胜感激。我会在星期一检查并在需要时添加更多信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:29:12.953

我终于解决了。

我得到了 MSF 标准 3.0.2 64 位。在 64 位机器上使用 lpsolve55.dll 为 64 位编译 LPSolvePlugin 代码（来自[http://www.peno.be/MSF/ ）（从](http://www.peno.be/MSF/)[http://sourceforge.net/projects/lpsolve/](http://sourceforge.net/projects/lpsolve/)获得）

将 lpsolveplugin.dll 和 lpsolve55.dll 复制到 msf 的 plugins 文件夹中

在我的 web 服务的 web.config 中添加了以下内容（如果需要，可以添加到桌面应用程序的 app.config 中）

```
<configSections>
  <section name="MsfConfig"
         type="Microsoft.SolverFoundation.Services.MsfConfigSection, Microsoft.Solver.Foundation, Version=3.0.2.10889, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
         allowLocation="true"
         allowDefinition="Everywhere"
         allowExeDefinition="MachineToApplication"
         restartOnExternalChanges="true"
         requirePermission="true" />
</configSections>
<MsfConfig>
  <MsfPluginSolvers>
    <MsfPluginSolver name="LpSolveLP"
                   capability="LP"
                   assembly="LpSolvePlugIn.dll"
                   solverclass="SolverFoundation.Plugin.LpSolve.LpSolveSolver"
                   directiveclass="SolverFoundation.Plugin.LpSolve.LpSolveDirective"
                   parameterclass="SolverFoundation.Plugin.LpSolve.LpSolveParams" />
    <MsfPluginSolver name="LpSolveMIP"
                   capability="MILP"
                   assembly="LpSolvePlugIn.dll"
                   solverclass="SolverFoundation.Plugin.LpSolve.LpSolveSolver"
                   directiveclass="SolverFoundation.Plugin.LpSolve.LpSolveDirective"
                   parameterclass="SolverFoundation.Plugin.LpSolve.LpSolveParams" />
  </MsfPluginSolvers>
</MsfConfig> 
```

它奏效了。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T02:19:04.347

我有一个 VS 2012 Express，我在 lpsolve55.dll / LpSolvePlugIn.dll 中遇到“BadImage”错误。

然后，我与 C# 示例（[http://sourceforge.net/projects/lpsolve/files/lpsolve/5.5.2.0/](http://sourceforge.net/projects/lpsolve/files/lpsolve/5.5.2.0/)上的 lp_solve_5.5.2.0_cs.net.zip ）进行比较，发现我一更改项目从 4.5 到“.NET Framework 4.0”的属性/应用程序/目标网络开始工作:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T20:52:33.337

在放弃之前，我尝试了一段时间。首先，您可能正在使用 MSF 的 xpress 版本。您将很快达到一些限制。至于获得专业版或教育版，祝你好运。我不能。我什至找不到购买 3.0.1 的地方，因为 MSF 已被 MS 弃用。我最终决定调用你可以在这里找到的原始 c++ 代码 [http://sourceforge.net/projects/lpsolve/files/lpsolve/5.5.2.0/](http://sourceforge.net/projects/lpsolve/files/lpsolve/5.5.2.0/) 你会找到一些关于如何从 C# 调用的例子。另一个优点是没有限制。让我知道你是否设法用 MSF 3.0.1 解决了...

# gwt - GWT 回调实现

> ID：12982024
> 
> 赞同：2
> 
> 时间：2012-10-19T20:31:25.017
> 
> 标签：gwt, callback

我正在维护包含一堆用户组的软件。当管理员在组的用户上单击“删除”时，应该会发生两件事：

1.  删除组成员（涉及更新缓存、数据库等）
2.  重新加载组成员列表（用户在删除用户时会看到此列表）

事实证明，#2 在 #1 之前完成 - 竞争条件。因此，我想添加一个回调，以便在 #1 成功之前 #2 不会执行。

GWT 是否可以接受此代码以确保 #2 出现在 #1 之前？

```
 doTask1();

 GWT.runAsync(new RunAsyncCallback()
 {
   public void onFailure(final Throwable reason)
   {
   }

   public void onSuccess()
   {                       
     doTask2();
   }
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T23:24:16.667

`GWT#runAsync()`用于 GWT 的[“代码拆分”功能](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)，它允许延迟加载代码（和其他运行时资源），直到需要它们。您需要使用 GWT 的异步操作模式（即[AsyncCallback](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/AsyncCallback.html)或[Command](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/Command.html)）来传递一个回调`doTask1()`，一旦那里的异步操作完成，就会调用该回调。例如，如果`doTask1()`执行[GWT RPC](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideMakingACall)方法：

```
public void doTask1(final Command onCompletion) {
  myRpcService.doTask1(new AsyncCallback<Void>() {
    @Override
    public void onFailure(Throwable caught) {
      // Error handling
    }

    @Override
    public void onSuccess(Void ignored) {
      onCompletion.execute();
    }
  });
}

public void doTask2() {
  // Perform task 2
}

public void doTasks1And2() {
  doTask1(new Command() {
    @Override
    public void execute() {
      doTask2();
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:33:03.420

不，您仍然可以使用这种控制流风格来获得竞争条件。相反，你想要这样的东西：

```
doTask1(new MyCallback() {
    public void onTask1Complete() {
       doTask2();
    }
} 
```

`doTask1()`需要接受一个回调，以便一旦完成，它将执行下一个操作。

要了解原因，让我们假设两者`doTask1()`都`doTask2()`在进行 HTTP 调用。除非您等到`doTask1()`请求返回，否则您无法保证服务器接收这两个连接的顺序。在您的示例代码中，您发出请求`doTask1()`（在异步发出请求时立即返回），然后进行第二次调用而不等待第一次。

# c++ - 如何确保在修改 .h 文件时，包含它的 .cc 文件在使用 Visual Studio 2008 的发布版本中自动编译？

> ID：12982025
> 
> 赞同：2
> 
> 时间：2012-10-19T20:31:38.370
> 
> 标签：c++, visual-studio-2008

假设我的 Visual Studio 2008 项目中有 ah、a.cc 和 b.cc。a.cc 和 b.cc 都包含 ah 当我修改 ah 并构建项目时，a.cc 和 b.cc 在 Debug 构建中被编译。但是，在发布版本中并非如此。在 Release 版本中，a.cc 和 b.cc 仅在它们被修改后才被编译。似乎编译器没有跟踪发布版本中 .cc 文件的依赖关系。

是否有一些编译器标志可以解决这个问题？如果没有，还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:36:23.620

编译器应该自动执行此操作，尽管偶尔会出现问题，通过触摸文件、与源代码控制交互，甚至夏令时。在“构建”菜单中，选择“清理”，这将重置所有临时文件，这将使所有内容重新同步。

> 此外，如果您在编译之间更改系统时钟。有时在测试时我必须这样做。——约翰·迪布林

# c# - WCF NetTcpBinding 是否提供持久连接？

> ID：12982026
> 
> 赞同：7
> 
> 时间：2012-10-19T20:31:39.593
> 
> 标签：c#, wcf

使用 WCF 制作客户端/服务器样式的应用程序，但我找不到任何说明 NetTcpBinding 是否提供持久连接的文档？

我希望我的客户一次连接并保持连接到服务器数周。（是的，我知道我需要处理断开连接等。）

NetTcpBinding 是否允许这样的长连接？如果是这样，我需要指定什么或者这是默认行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T18:44:28.853

只要您保持服务主机和客户端代理处于活动状态并处于打开状态，WCF 中的底层连接也应该保持打开状态。即使低于此，绑定似乎使用来自 TCP 连接池的连接，如[NetTcpBinding MSDN 页面上](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.aspx)所示：

> **NetTcpBinding**使用基于服务的主机 DNS 名称和服务正在侦听的端口号的 TCP 连接池。

我不是 TCP 连接池如何工作的专家，您可能想尝试一个姊妹站点，例如[ServerFault](https://serverfault.com/)，以获取更多详细信息。

如果您想控制所有这些，那么我可以看到的唯一可以为开箱即用的 NetTcpBinding 调整的属性是[`MaxConnections`](http://msdn.microsoft.com/en-us/library/system.servicemodel.nettcpbinding.maxconnections.aspx). 但是，如果您*真的*愿意深入研究，您还可以使用 TcpTransportBindingElement 构建您自己的自定义绑定[，这可以让您对](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.tcptransportbindingelement.aspx)[TcpConnectionPoolSettings](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.tcpconnectionpoolsettings.aspx)进行更细粒度的控制。

无论如何，如果我冒险猜测，我认为构建服务主机和客户端代理将花费更多的时间（相对），而不是从池中获取连接所花费的时间，因此保持这两个打开可能就足够了你的要求。

我在评论中问您*为什么*希望连接保持打开的原因是因为这本身几乎不是一个要求。不过，速度和响应时间*是*一个真正的要求，因此最好的建议可能是明确这些要求（量化/限定您对速度的需求）并运行一些测试以确定最适合您的情况/需要什么。

# c# - 容器如何知道孩子何时调用了 InvalidateArrange？

> ID：12982032
> 
> 赞同：6
> 
> 时间：2012-10-19T20:32:00.020
> 
> 标签：c#, xaml, windows-runtime

我正在尝试学习在 WinRT XAML 应用程序中创建自定义面板的基础知识。我已经定义了一个附加的依赖属性，它按预期工作，除了我不知道如何获取子元素的属性回调来触发容器的排列或测量。

让孩子知道应该再次调用排列和测量的正确方法是什么？在我的 WPF 4 unleashed 书中，他们使用了 FrameworkPropertyMetadataOptions.AffectsParentArrange，但这似乎在 WinRT 中不可用。

```
public class SimpleCanvas : Panel
{
    #region Variables
    #region Left Property
    public static double GetLeft(UIElement element)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        object value = element.GetValue(LeftProperty);
        Type valueType = value.GetType();
        return Convert.ToDouble(value);
    } 

    public static void SetLeft(UIElement element, double value)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        element.SetValue(LeftProperty, value);
    }

    public static readonly DependencyProperty LeftProperty =
        DependencyProperty.RegisterAttached("Left", typeof(double), typeof(SimpleCanvas),
        new PropertyMetadata(0, OnLeftPropertyChanged));

    public static void OnLeftPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        UIElement element = (UIElement)source;
        // This doesn't cause ArrangeOverride below to be called
        element.InvalidateArrange();
    }
    #endregion

    #region Top Property
    public static double GetTop(UIElement element)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        object value = element.GetValue(TopProperty);
        return (value == null) ? 0 : (double)value;
    }

    public static void SetTop(UIElement element, double value)
    {
        if (element == null)
        {
            throw new ArgumentNullException("element");
        }

        element.SetValue(TopProperty, value);
    }

    public static readonly DependencyProperty TopProperty =
        DependencyProperty.RegisterAttached("Top", typeof(double), typeof(SimpleCanvas),
        new PropertyMetadata(0, OnTopPropertyChanged));

    public static void OnTopPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        UIElement element = (UIElement)source;
        // This doesn't cause ArrangeOverride below to be called
        element.InvalidateArrange();
    }
    #endregion
    #endregion

    public SimpleCanvas()
    {

    }

    #region Methods
    protected override Size MeasureOverride(Size availableSize)
    {
        foreach (UIElement child in this.Children)
        {
            child.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
        }

        return new Size(0, 0);
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        foreach (UIElement child in this.Children)
        {
            double x = 0;
            double y = 0;

            double left = GetLeft(child);
            double top = GetTop(child);

            if (!double.IsNaN(left))
            {
                x = left;
            }
            if (!double.IsNaN(top))
            {
                y = top;
            }

            child.Arrange(new Rect(new Point(x, y), child.DesiredSize));
        }

        return finalSize;
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T12:39:21.883

我参加聚会迟到了，但我朝同一个方向走，面临同样的问题。这是我的解决方案。

在您的回调中，您在将属性附加到的子元素上调用 InvalidateArrange：

```
public static void OnTopPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
{
    UIElement element = (UIElement)source;
    // This doesn't cause ArrangeOverride below to be called
    element.InvalidateArrange();
} 
```

但是您应该通过更改代码来真正使面板无效：

```
public static void OnTopPropertyChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
{
    UIElement panel= VisualTreeHelper.GetParent(source) as UIElement;
    if(panel != null)       
        panel.InvalidateArrange();
} 
```

它应该工作（对我有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:37:24.070

如果 InvalidateArrange 单独不起作用，您也可以尝试 InvalidateMeasure 或 UpdateLayout。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T17:20:27.630

我有一个依赖于`FontSize`父控件的子控件的问题。我通过遍历父母堆栈并使所有内容无效来解决了这个问题：

```
 static MyControl()
    {
        // replace base implementation of the dependent property 
        FontSizeProperty.OverrideMetadata(typeof(Scalar), 
            new FrameworkPropertyMetadata(SystemFonts.MessageFontSize, FrameworkPropertyMetadataOptions.Inherits, OnMeasureInvalidated));
    }

    private static void OnMeasureInvalidated(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        // recurse over parent stack
        while (true)
        {
            var parent = VisualTreeHelper.GetParent(sender) as UIElement;
            if (parent == null) return; // break on root element
            parent.InvalidateMeasure();
            sender = parent;
        }
    } 
```

# forms - Symfony 为一组选项自定义表单验证器

> ID：12982033
> 
> 赞同：0
> 
> 时间：2012-10-19T20:32:01.897
> 
> 标签：forms, symfony-1.4, validation

我有一个带有以下小部件和验证器的表单：

```
 $this->widgetSchema['num01'] = new sfWidgetFormChoice(array(
  'choices' => Doctrine_Core::getTable('ticket')->getTicketnum(),
  'expanded' => true, 'multiple' => true,
   ));

  $this->validatorSchema['num01'] = new sfValidatorChoice(array(
   'choices' =>
   array_keys(Doctrine_Core::getTable('ticket')->getTicketnum()), 'required' => true, 'multiple' => true,
   )); 
```

我遇到的问题是它显示了 20 个复选框，我想让它们只选择其中的 5 个。不多也不少。它必须恰好选中 5 个框。如何自定义我的代码以使其验证这种方式？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:26:12.080

我试过这个只是为了看看它是否会起作用并且它确实起作用了。:)

```
$this->validatorSchema['num01'] = new sfValidatorChoice(array(
   'choices' =>
   array_keys(Doctrine_Core::getTable('ticket')->getTicketnum()), 'required' => true,
   'multiple' => true, 'max' => 5, 'min' => 5,
   )); 
```

# java - 如何在 x64 windows7 上为 tomcat 分配超过 1 gb 的内存

> ID：12982036
> 
> 赞同：1
> 
> 时间：2012-10-19T20:32:30.200
> 
> 标签：java, tomcat, memory-management, permgen

如果我分配超过 1 Gb 的内存，Tomcat 根本无法启动，尽管我在服务器上有 6 Gb 的可用 RAM 空间。

请给我任何建议。我有 tomcat 6.0.35、grails 2.0.1、jdk 1.6.0_35

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:02:20.750

现在我在 catalina.bat 中有 JAVA_OPTS="-server -XX:MaxPermSize=512M -Xms2048M -Xmx2048M -Xss64M -XX:+CMSClassUnloadingEnabled -XX:+CMSPermGenSweepingEnabled" （由chrome建议）。似乎一切正常。在 prev conf 我只有 -Xms2048M -Xmx2048M 选项。

比你们的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:22:12.683

您是否在 bin/catalina.bat 中编辑了 SET "JAVA_OPTS=-Xms1024m -Xmx2048m" 行？

# android - 使用 EditText 中的字符串的 Android 搜索功能

> ID：12982037
> 
> 赞同：0
> 
> 时间：2012-10-19T20:32:34.030
> 
> 标签：android

我的 Android 应用程序中的搜索功能有效。我正在使用`onSearchRequested()`；调用搜索功能。现在我想做的是不使用`onSearchRequested()`；并将字符串从 an 传递`EditText`给 search 方法并在 List 中显示结果。这是我的搜索，因为它在`onSearchRequested`被调用时起作用：

`SearchPage`活动：

```
 DBHelper = new DBAdapter(this);
    DBHelper.open();
    Intent intent = getIntent();

    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);

    }
    //--- END onSearchRequested

private void showResults(String query) {
    Cursor cursor = DBHelper.searchDB(query);
    startManagingCursor(cursor);
    String[] searchFrom = new String[] { DBAdapter.KEY_YEAR,
            DBAdapter.KEY_MAKE, DBAdapter.KEY_MODEL };
    int[] displayHere = new int[] { R.id.rYearTV, R.id.rMakeTV,
            R.id.rModelTV };

    final SimpleCursorAdapter records = new SimpleCursorAdapter(this,
            R.layout.record_2, cursor, searchFrom, displayHere);

    setListAdapter(records); 
```

`DBAdapter`活动：

```
//--- GET RECORDS FOR SEARCH
    public Cursor searchDB(String query) { 

    String[] parts = query.split(" "); 

    String queryString = ""; 
    for(int i = 0; i < parts.length; i++) { 
        queryString += KEY_YEAR + " LIKE '%" + parts[i] + "%' OR "; 
        queryString += KEY_MAKE + " LIKE '%" + parts[i] + "%' OR "; 
        queryString += KEY_MODEL + " LIKE '%" + parts[i] + "%'"; 
        if(i != (parts.length - 1)) { 
            queryString += " OR "; 
        } 
    } 

    return db.query(true, DB_TABLE,  
        new String[] { KEY_ROWID, KEY_SDATE, KEY_YEAR, KEY_MAKE, KEY_MODEL },  
        queryString, null, null, null, null, null); 
}
//--- END Get Records for Search 
```

我想将一个字符串传递给搜索函数`String searchData = searchEditText.getText().toString();`，并让搜索函数通过按“搜索”按钮来处理传递的字符串。有人可以帮助我开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:39:02.567

你的布局中应该有`EditText`这样的：

```
 <EditText
            android:id="@+id/search_query"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:hint="search"
            android:imeOptions="actionSearch"
            android:inputType="text" /> 
```

在您的活动中`onCreate`：

```
EditText searchQuery = (EditText) findViewById(R.id.search_query);
searchQuery.setOnEditorActionListener(new OnEditorActionListener() {
            public boolean onEditorAction(TextView v, int actionId,
                    KeyEvent event) {
                if (actionId == EditorInfo.IME_ACTION_SEARCH) {
                    String searchData = searchQuery.getText().toString();
                            showResults(searchData); //passing string to search in your database to your method
                    return true;
                }
                return false;
            }
    }); 
```

`setOnEditorActionListener`用于在用户按下`search`键盘上的按钮时执行搜索。`imeActions` [您可以在此处](http://developer.android.com/intl/ru/reference/android/view/inputmethod/EditorInfo.html)阅读更多信息。

根据您的代码调用`showResults(searchData);`进行搜索并在列表中显示结果。

* * *

**编辑：** 根据您的代码在`SearchPage`活动中调用它：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //setContentView and other your features

    DBHelper = new DBAdapter(this);
    DBHelper.open();

    EditText searchQuery = (EditText) findViewById(R.id.search_query);

    Button yourButton = (Button) findViewById(R.id.yourButtonId);
    yourButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            String searchData = searchQuery.getText().toString();
            showResults(searchQuery);
        }
    });
}

private void showResults(String query) {
    Cursor cursor = DBHelper.searchDB(query);
    startManagingCursor(cursor);
    String[] searchFrom = new String[] { DBAdapter.KEY_YEAR,
            DBAdapter.KEY_MAKE, DBAdapter.KEY_MODEL };
    int[] displayHere = new int[] { R.id.rYearTV, R.id.rMakeTV,
            R.id.rModelTV };

    final SimpleCursorAdapter records = new SimpleCursorAdapter(this,
            R.layout.record_2, cursor, searchFrom, displayHere);

    setListAdapter(records);
} 
```

# sql - t-sql 中有循环吗？使用它们是个好主意吗？

> ID：12982045
> 
> 赞同：3
> 
> 时间：2012-10-19T20:33:18.157
> 
> 标签：sql, sql-server, database, tsql

如果我问这个问题，请原谅我，但我不是 SQL Server 也不是 SQL 开发人员。

我有一个导入表的 CSV，我们称它为 T，它是我在 SQL Server 2005 中动态创建的。

我想做的是根据导入到我创建的表 T 中的数据对其他表运行一些查询。例子 ：

```
select * 
from TableX 
where customerID = [this should contain the customerID from the table T] 
```

然后如果我找到它，我需要更新同一个表 T，如果没有，我继续前进......直到该 csv 文件中的最后一条记录。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T20:39:36.587

你想要的不需要循环，似乎你只需要`IN`：

```
SELECT *
FROM TableX
WHERE CustomerID IN (SELECT CustomerID FROM TableT) 
```

如果您需要`TableX`使用某个标记（如果存在于 上）进行更新`TableT`，则应该是：

```
UPDATE TableX
SET Mark = 1
WHERE CustomerID IN (SELECT CustomerID FROM TableT) 
```

如果您需要从 更新`TableX`一些值`TableT`，它应该是这样的：

```
UPDATE X
SET X.Column = T.Column
FROM TableX X
INNER JOIN TableT T
ON X.CustomerID = T.CustomerID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T20:38:32.333

循环是 SQL 中的一个危险信号，通常不需要。SQL 基于[集合论](http://seanmehan.globat.com/blog/2011/12/20/set-theory-and-sql-concepts/)。了解 JOIN，您将很少需要迭代。

因此，就您而言，不，循环既不是必需的，也不是一个好主意。

# c# - 是否有任何工具可以帮助我们将 IEnumerator 属性重构为 IList 或类似的？

> ID：12982047
> 
> 赞同：2
> 
> 时间：2012-10-19T20:33:23.113
> 
> 标签：c#, .net, refactoring, ienumerable, automated-refactoring

我们有一个非常古老的代码库（这实际上并不可怕）。它可以追溯到 .Net 预发布的时候，我怀疑这是造成这些奇怪约定的原因。

无论如何，我们刚刚开始放弃对 .Net 1.1 的支持，并且正在将事物转换为泛型并使用 Linq 和所有有趣的东西。我们代码库中最烦人的模式之一是我们会有类似的东西

```
private ArrayList mylist;
public IEnumerator MyList
{
  get
  {
    if(mylist==null)
      return new EmptyEnumerator.Enumerator;
    return mylist.GetEnumerator();
  }
} 
```

这种模式特别可怕，因为它阻止我们简单地做`foreach(var item in MyList)`，因为 IEnumerator 没有实现 IEnumerable。相反，我们必须这样做：

```
IEnumerator enumerator=MyList;
while(enumerator.MoveNext())
{
    object item=enumerator.Current;
} 
```

因此，对于重构，我们当然希望使用类似`ReadOnlyCollection<T>`或`IList<T>`类似的东西。然而，要做到这一点，我们必须更新每一个引用`MyList`来做：

```
IEnumerator enumerator=MyList; 
```

至

```
IEnumerator enumerator=MyList.GetEnumerator(); 
```

在某些情况下，我们可以对一个属性有一百多个引用。是否有任何工具可以使这更容易？我们最近得到了 Resharper（不是为了这个问题，只是为了一般用途），但它似乎没有涵盖这种类型的场景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:48:56.503

听起来您需要做的是返回一个实现`IEnumerator`和`IEnumerable<T>`

制作自己的类型实际上并不难：

```
public class MessedUpIterator<T> : IEnumerable<T>, IEnumerator
{
    private IEnumerable<T> source;
    private IEnumerator enumerator;

    private IEnumerator MyEnumerator
    {
        get
        {
            return enumerator ?? source.GetEnumerator();
        }
    }

    public MessedUpIterator(IEnumerable<T> source)
    {
        this.source = source;
    }
    public IEnumerator<T> GetEnumerator()
    {
        return source.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return source.GetEnumerator();
    }

    object IEnumerator.Current
    {
        get { return MyEnumerator.Current; }
    }

    bool IEnumerator.MoveNext()
    {
        return MyEnumerator.MoveNext();
    }

    void IEnumerator.Reset()
    {
        MyEnumerator.Reset();
    }
} 
```

*现在，您可以返回同时执行两者*的东西，而不是返回an*或*`IEnumerator`an 。`IEnumerable<T>`

 *请注意，它`IEnumerator`是显式`IEnumerable<T>`实现的，而是隐式实现的，因此它鼓励将其用作`IEnumerable`，同时仍将其用作`IEnumerator` *可能的*。

是的，这很丑陋，但肯定会更糟。*

# objective-c - 启用 ARC 的线程化 Obj-C 代码——为什么它会这样工作？

> ID：12982051
> 
> 赞同：0
> 
> 时间：2012-10-19T20:33:35.197
> 
> 标签：objective-c, automatic-ref-counting

我需要一个额外的后台线程来监听来自套接字的请求。

代码放入单例类；它将在 NSApplicationMain() 之前的 main.m 中调用，如下所示：

```
 [[SKSocketThread getSingleton] runThread]; 
```

runThread 定义如下：

```
- (void) runThread {
    [NSThread detachNewThreadSelector:@selector(socketThreadMainLoop:)
                             toTarget:self
                           withObject:[self quitLock]];
}

- (void) socketThreadMainLoop:(id)param {
    NSLock *lock = (NSLock *)param;
    while (![lock tryLock]) {
        NSLog(@"Yay! We are in socketThreadMainLoop now!");
        [NSThread sleepForTimeInterval:2];
    }
    NSLog(@"Terminating the socket thread...");
    [lock unlock]; // is it really necessary?
} 
```

它编译成功，没有警告，但会在运行时抛出错误：

```
autoreleased with no pool in place. 
```

我做了一些谷歌搜索，尝试使用@autoreleasepool 在runThread 和socketThreadMainLoop 中打包代码，但错误仍然存​​在。最后，我在 main.m 中封装了对 runThread 的调用，并且成功了！

我不知道为什么它只能这样工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:44:05.150

你应该用`@autoreleasepool`块包装你的代码。

```
...
- (void) socketThreadMainLoop:(id)param {
@autoreleasepool
{    
    NSLock *lock = (NSLock *)param;
    while (![lock tryLock]) {
        NSLog(@"Yay! We are in socketThreadMainLoop now!");
        [NSThread sleepForTimeInterval:2];
    }
    NSLog(@"Terminating the socket thread...");
    [lock unlock]; // is it really necessary?
}
} 
```

阅读更多： [NSAutoreleasePool 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:58:24.827

设置断点`objc_autoreleaseNoPool`并发布回溯。您需要在所有不运行循环的线程中使用@autoreleasepool{...}，包括主线程（在您的 main.m 中，如果您没有调用 NSApplicationMain()）。

一些额外的反馈；您命名该方法`getSingleton`表明您是 iOS 开发的新手（不要命名`get*`任何方法）。您`sleep`在`while`循环中使用表明您对整个网络事物也有点陌生。

此外，在调用之前启动线程`NSApplicationMain()`是完全错误的事情。您应该将网络连接作为应用程序启动的正常部分...见下文。

你真的*真的* **真的**不想使用带睡眠的手动 while() 循环来进行网络连接。轮询在移动设备上是一种糟糕的模式。它很耗电，`sleep`只会让事情变得没有反应。

使用正确的运行循环和/或调度源和/或 CFStream API 和/或 NSFileHandles。

# java - Eclipse 运行中的“错误：16”

> ID：12982052
> 
> 赞同：1
> 
> 时间：2012-10-19T20:33:37.880
> 
> 标签：java, eclipse

我正在编写一个简单的程序，旨在正确地将大型文本文件中的元素分箱并以可访问的方式重新显示它们。当我在 Eclipse 中运行它时，它似乎运行良好（运行一个小测试文件显示最终的 bin 中没有丢失任何数据），但 Eclipse 编辑器显示“错误：16”。谁能告诉我这是什么？谢谢。

编辑：

这是我完整的控制台输入。它在运行期间完全是测试输出，最后出现错误：

0 4 7 1 0 2 3 4 6 7 6 7 6 7 6 1 1 1 1 3 3 3 2 2 2 2 2 1 1 1 0 0 0 8 8 9 9 9 9 9 9 9 9 9 9 95.80, 1.345345,2.3880140 ,2.43,

6.4.576,

74.5,34.58431,43.50, 67,23.080, 423, 456,

456.2,

6.5,2.8, 3153,29.6,

97.685,

56.821233,

745623482281234,7.64,

6788464, 86,

1.234234,

78.84321,

4.5688,

5672,

45.62,

41.5321,

3.45,56745848867,

4.5234523, 742,

528488,

34.58652,

2340852,243.52345,22.46246,4.35,

345.2347674567,

23452.14352435,

2.68488,2457537453,

2435.23452345,

4358,2.021564,

错误：16

# msbuild - 用于跳过目录的 MSbuild 命令行参数

> ID：12982061
> 
> 赞同：3
> 
> 时间：2012-10-19T20:34:19.047
> 
> 标签：msbuild, teamcity, msdeploy

我在团队城市中有以下命令行参数进行部署。一切正常，但我想在部署时跳过一些目录。我如何在团队城市的 msbuild 脚本中添加该逻辑

```
/P:Configuration=%env.Configuration%
/P:DeployOnBuild=True
/P:DeployTarget=MSDeployPublish
/P:MsDeployServiceUrl=https://%env.TargetServer%/MsDeploy.axd
/P:AllowUntrustedCertificate=True
/P:MSDeployPublishMethod=WMSvc
/P:CreatePackageOnPublish=True
/P:SkipExtraFilesOnServer=True
/P:UserName=xxxxx
/P:Password=xxxxx 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-07T19:25:37.367

我也在做同样的事情。我不喜欢修改我的 .csproj 文件，所以我尝试了这个。到目前为止，它对我有用。就我而言，我从部署中排除了媒体、App_Data\Logs 和 App_Data\preview 文件夹，而不是 Data 文件夹。

基本上，您可以将 ExcludeFoldersFromDeployment 作为参数传递给 MSBuild。将其与 SkipExtraFilesOnServer 相结合就可以解决问题。

```
/p:Configuration=Debug
/p:DeployOnBuild=True
/p:DeployTarget=MSDeployPublish
/p:MsDeployServiceUrl=OurDevWebServer/msdeployagentservice
/p:AllowUntrustedCertificate=True
/p:MSDeployPublishMethod=RemoteAgent
/p:CreatePackageOnPublish=True
/p:DeployIisAppPath=umbraco_TestSite
/p:IgnoreDeployManagedRuntimeVersion=True
/p:SkipExtraFilesOnServer=True
/p:ExcludeFoldersFromDeployment="media;App_Data\Logs;App_Data\preview"
/p:IncludeSetAclProviderOnDestination=False
/p:AuthType=NTML /p:UserName= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T00:37:50.993

您不能通过命令行指定 WPP 跳过规则，因为它们被声明为项目，而不是属性。

以下是在`pubxml`(or `wpp.targets`) 中声明跳过规则的语法：

```
<ItemGroup>
  <MsDeploySkipRules Include="SkipErrorLogFolder1"> 
    <SkipAction>Delete</SkipAction> 
    <ObjectName>filePath</ObjectName> 
    <AbsolutePath>ErrorLog</AbsolutePath> 
  </MsDeploySkipRules> 
</ItemGroup> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:09:50.993

实际上我已经在我的项目中实现了如下：

```
<ItemGroup>
        <MsDeploySkipRules Include="SkipDeleteApp_Data_Import">
            <SkipAction></SkipAction>
            <ObjectName>dirPath</ObjectName>
            <AbsolutePath>$(_Escaped_WPPAllFilesInSingleFolder)\\App_Data\\Import</AbsolutePath>
        </MsDeploySkipRules>
    </ItemGroup>
    <ItemGroup>
        <MsDeploySkipRules Include="SkipDeleteApp_Data_File">
            <SkipAction></SkipAction>
            <ObjectName>filePath</ObjectName>
            <AbsolutePath>$(_Escaped_WPPAllFilesInSingleFolder)\\App_Data\\en-US-custom.txt</AbsolutePath>
        </MsDeploySkipRules>
    </ItemGroup> 
```

# javascript - 如何使用 javascript 在 Windows 8 Metro 应用程序中获取 mp3 文件的文件名和 id3 标签？

> ID：12982066
> 
> 赞同：1
> 
> 时间：2012-10-19T20:34:37.523
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

我想做的就是列出音乐库中的文件。我想列出文件的路径、作者和标题。Windows 8 Javascript API 提供了简洁的异步函数。我的问题是我无法将变量传递给函数，因此我无法识别回调函数中的文件。这是我到目前为止所拥有的：

```
var musicLibrary = Windows.Storage.KnownFolders.musicLibrary;
musicLibrary.getFilesAsync().then(function (resultLibrary) {
 for (var i = 0; i < resultLibrary.length; i++) {
  var path = resultLibrary[i].path;
  resultLibrary[i].properties.getMusicPropertiesAsync().then(function (musicProperties) {
  $("#list").append('<li>'+ musicProperties.artist + ', ' + musicProperties.title + '</li>');
}
}); 
```

如您所见，我可以检索所有信息，但不能将它们放在一个列表项中。谁能告诉我这是怎么做到的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:26:04.860

您可以在 javascript中使用[闭包：](https://stackoverflow.com/q/111102/573218)

```
var musicLibrary = Windows.Storage.KnownFolders.musicLibrary;
musicLibrary.getFilesAsync().then(function (resultLibrary) {

    for (var i = 0; i < resultLibrary.length; i++) {
    (function(song){
        var path = song.path;
        song.properties.getMusicPropertiesAsync().done(function (musicProperties) {
            $("#list").append('<li>' + song.path + musicProperties.artist + ', ' + musicProperties.title + '</li>');
        })
    })(resultLibrary[i]);
    }
}); 
```

# c++ - Kinect C++ 颜色数据检索

> ID：12982067
> 
> 赞同：0
> 
> 时间：2012-10-19T20:34:39.957
> 
> 标签：c++, kinect

我修改了一个用 C++ 编写的 Kinect 示例，新代码将检索骨架和颜色数据，而原始代码仅获取骨架数据。我意识到代码无法调用我为了处理颜色数据而实现的 ProcessColor 方法。当我仔细检查问题时，我看到以下部分（属于 init 函数）的指示行失败。在调试过程中，当我来到该行时，程序会跳转到 ProcessColor 方法，随后会出错。

```
if(NULL!=kinectSensor)
{
    // line that fails is the following
    hr = kinectSensor->NuiInitialize(NUI_INITIALIZE_FLAG_USES_COLOR);
     if (SUCCEEDED(hr))
    {
        // Create an event that will be signaled when color data is available
        m_hNextColorFrameEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

        // Open a color image stream to receive color frames
        hr = kinectSensor->NuiImageStreamOpen(
            NUI_IMAGE_TYPE_COLOR,
            NUI_IMAGE_RESOLUTION_640x480,
            0,
            2,
            m_hNextColorFrameEvent,
            &m_pColorStreamHandle);
    }
} 
```

下面我指出了它跳转的行：

```
 HRESULT hr;
NUI_IMAGE_FRAME imageFrame;
HANDLE m_hNextColorFrameEvent(INVALID_HANDLE_VALUE), m_pColorStreamHandle(INVALID_HANDLE_VALUE);
// Line that it jumps
hr = kinectSensor->NuiImageStreamGetNextFrame(m_pColorStreamHandle, 0, &imageFrame); 
```

错误消息如下：

KinectSample.exe 中 0x5ca5b4a6 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000047。

如果有帮助，我想指出我从官方 Kinect 示例（ColorBasics-D2D）中添加了上面显示的部分，并且可能存在冲突或其他什么，尽管我在此过程中非常小心。

我该如何解决？有什么想法吗？

# sql - mongoose 是否支持 select 中的虚拟字段，如 SQL

> ID：12982069
> 
> 赞同：3
> 
> 时间：2012-10-19T20:34:49.383
> 
> 标签：sql, node.js, mongodb, express, mongoose

在 SQL 中，我可以使用“状态”虚拟字段创建以下 SELECT 语句：

```
SELECT 
   CASE 
      WHEN field = 1 THEN 'sale'
      ELSE 'none'
   END as status 
```

猫鼬中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:39:32.043

是的。Mongoose 模式支持虚拟。查看[指南](http://mongoosejs.com/docs/guide.html)的架构部分。我想你可能想要这样的东西：

```
var salesSchema = new Schema({
  sale: Number
});

salesSchema.virtual('status').get(function() {
  if (this.sale === 1) {
    return 'sale';
  } else {
    return 'none';
  }
}); 
```

# javascript - 帮助旧版浏览器支持 HTML5 标签的非 JavaScript 解决方案

> ID：12982071
> 
> 赞同：1
> 
> 时间：2012-10-19T20:34:53.977
> 
> 标签：javascript, html, modernizr

我很清楚使用 HTML5 的注意事项并且仍然需要支持旧版浏览器（阅读 IE8 和更低版本）...您需要添加 shiv 或 Modenizr 或类似的东西，以使您的小网站尊重和标签。

我对此很满意，但是前几天有人对我说他们没有使用 HTML5 标签，因为显然你需要 JS 才能使 IE8 与这些标签很好地配合。而且我已经看到未加载 Modenizr 会发生什么（我偶尔会使用高级 JS 并打破它，这会停止 Modenizr 加载）。

现在我个人认为这是一个不必要的陈述，因为关闭了 JS 的浏览器 IE8 及更低版本的 useshare 可能代表了您用户群的 0.000001%（特别是考虑到这是由不支持或测试的人告诉我的IE7 及更低版本）。

但我想知道如果您想在关闭 JS 的非 HTML5 浏览器中支持 HTML5 标签，有哪些解决方案。还是我的上述假设非常准确，真的不值得考虑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:44:53.273

对不起。在不使用 Javascript 的情况下，在 IE8 中使用 HTML5 标签没有好的解决方案。

HTML5Shiv 和 Modernizr 利用了唯一已知的 hack，它可以使 IE 以一种可用于现代 HTML5 网站的方式识别未知标签。

可以通过将整个文档转换为 xhtml 并为 HTML5 标签使用不同的命名空间来做到这一点——例如，请参阅[http://www.webstack.co.uk/html5_without_javascript_ie8/](http://www.webstack.co.uk/html5_without_javascript_ie8/)。

但是，这些技术并不理想，因为 IE 存在带有未知标记的错误，这些错误超出了能够正确呈现它们的基本错误。在 HTML5Shiv hack 处理的动态内容和打印等领域，它们还有几个进一步的错误，但不是像这样的命名空间 hack。

底线：html5shiv 就是答案。如果您*确实*需要支持禁用 Javascript 的 IE8 用户，请考虑完全不使用 HTML5 标签。

# css - 位置：绝对元素被隐藏在后面的元素后面

> ID：12982073
> 
> 赞同：20
> 
> 时间：2012-10-19T20:35:01.310
> 
> 标签：css, position, hidden, absolute

[我在这里](http://jsfiddle.net/ABkjE/)整理了一个 jsfiddle 来说明我的问题。本质上，我的主要内容上方有一个绝对定位的菜单系统，但内容似乎漂浮在菜单前面。将鼠标悬停在“Link 3”上，可以看到它只是隐藏它的主要内容；当菜单足够长时，它们会显示在下方。

我的导航标题看起来像这样：

```
<div id='nav-header'>
    <div class='nav-bar'>
        <div class='nav-item '>
            <a class='link-3' href='#'>
                <div class='nav-text-container'><p>Link 3</p></div>
            </a>
            <div class='flydown-container link-3'>
                <div class='flydown'>
                    <div class='header'>Heading 1</div>
                    <ul>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 1</span></a></li>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 2</span></a></li>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 3</span></a></li>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 4</span></a></li>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 5</span></a></li>
                    </ul>
                    <div class='header'>Heading 2</div>
                    <ul>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 1</span></a></li>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 2</span></a></li>
                        <li><a class='secondary-menu-link' href='#'><span>Sub-link 3</span></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div> 
```

有相当多的 CSS，都在上面的 jsfiddle 链接中。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-19T20:43:45.037

使用`z-index`CSS 属性（堆叠级别）。较低的 z-index 意味着较低的堆叠上下文（因此，如果两个重叠的兄弟元素具有不同的 z-index，则具有较高 z-index 的元素将显示在顶部）。

请注意，z-index 为每个级别的元素建立了一个新的堆叠上下文，因此它们需要位于 DOM 的同一级别。此外，z-index 仅适用于定位元素，因此除非将它们设置为相对、绝对或固定位置，否则它不会做任何事情。

修复了您的代码：

```
#nav-header {
    width: 940px;
    margin-bottom: 20px;
    position: relative;
    z-index: 2;
}
#upper-section {
    height: 300px;
    font-size: 0;
    position: relative;
    z-index: 1;
} 
```

更多 z-index 信息：[http ://css-tricks.com/almanac/properties/z/z-index/](http://css-tricks.com/almanac/properties/z/z-index/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:41:55.110

你有一个`position: relative;`，`#media-slider`如果你没有使用这个属性的目的，删除并且会起作用。

# c# - 单声道/月光 + opengl？

> ID：12982074
> 
> 赞同：0
> 
> 时间：2012-10-19T20:35:10.770
> 
> 标签：c#, opengl, mono

是否可以在月光/银光中运行 opengl 代码？

我知道 WPF 可以进行硬件加速，而月光支持硬件加速，但我得到的印象不一定与拥有硬件访问权限以能够使用完整的 opengl 框架相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:55:44.043

不幸的是，月光[有些死了](http://www.infoq.com/news/2012/05/Miguel-Moonlight)，所以我不会花太多精力来完成这项工作。

在任何情况下，我都不相信可以[使用 Silverlight 运行 OpenGL 代码，](https://stackoverflow.com/questions/12371736/is-it-true-that-silverlight-will-not-support-opengl)据我所知，也没有努力单独使用 Moonlight 来支持它。

# html - 固定元素内的中心元素

> ID：12982077
> 
> 赞同：5
> 
> 时间：2012-10-19T20:35:23.103
> 
> 标签：html, css

我无法将一个元素居中在另一个已修复的元素中：

底部横幅位于 html 正文中：

```
<div id="bottombanner">
<div>
    <ul>
        <li><a href="contact.html">ContactUs</a></li>
        <li><a href="about.html">AboutUs</a></li>
        <li><a href="help.html">Help</a></li>
        <li><a href="bugs.html">BugReportBox</a></li>
        <li><a href="suggestions.html">SuggestionBox</a></li>
    </ul>
</div>
</div> 
```

css 已正确链接：

```
 #bottombanner{
    position:fixed;
    width:100%;
    bottom:0;
    }

    #bottombanner > div {
    position:absolute;
    width:100%;
    }

    #bottombanner > div > ul {
    position:relative;
    margin-left:auto;
    margin-right:auto;
    -webkit-margin-start: auto;
    -webkit-margin-end: auto;
    -webkit-padding-start: 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:49:34.143

将高度添加到`#bottombanner`（至少，这是我的小提琴所必需的）并添加`text-align: center`到`#bottombanner > div`：

```
#bottombanner{
    position:fixed;
    width:100%;
    bottom:0;
    height: 130px;
}

#bottombanner > div {
    position:absolute;
    width:100%;
    text-align:center;
}

#bottombanner > div > ul {
    position:relative;
    margin-left:auto;
    margin-right:auto;
    -webkit-margin-start: auto;
    -webkit-margin-end: auto;
    -webkit-padding-start: 0;
} 
```

小提琴：http: [//jsfiddle.net/kboucher/cFgNx/](http://jsfiddle.net/kboucher/cFgNx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T20:38:22.237

您必须将居中元素的显示属性设置为阻塞并设置元素的宽度。

```
#bottombanner > div > ul {
 position:relative;
 margin-left:auto;
 margin-right:auto;
 -webkit-margin-start: auto;
 -webkit-margin-end: auto;
 -webkit-padding-start: 0;
 display:block;
 width:200px;
} 
```

# android - Phonegap 应用程序在收集位置时在后台死机

> ID：12982079
> 
> 赞同：9
> 
> 时间：2012-10-19T20:35:31.960
> 
> 标签：android, cordova, geolocation, background-process

我有一个内置在 PhoneGap 中的应用程序，它利用`navigator.geolocation`呼叫来跟踪移动设备的坐标。用户可以控制跟踪的开始和结束。该应用程序旨在在后台接收坐标更新。该应用程序适用于 Android 和 iOS 设备。

Android 版本在后台运行时似乎很容易崩溃。在某些手机上它做得很好，但在很多手机上，应用程序会在它应该在后台收集坐标数据时简单地死掉。我在下面发布了一个 LogCat 日志。似乎在经理对进程调用“不再需要”`CCWalkerActivity`后不久发生 WIN DEATH（两者都在下面加粗）。`Activity`但是，我无法确定为什么会发生这种情况以及为什么会如此频繁地发生。

这是Phonegap的问题吗？创建一个可以处理前台服务（使用`startForeground()`）的插件会有益吗？

```
10-19 14:50:12.439 D/dalvikvm（496）：GC_CONCURRENT 释放 1917K，28% 释放 12417K/17031K，外部 11622K/13670K，暂停 12ms+10ms
10-19 14:50:13.040 D/CordovaLog（6275）：isGPSEnabled 成功，精度：12
10-19 14:50:13.040 D/CordovaLog（6275）：file:///android_asset/www/lib.js：第 24 行：isGPSEnabled 成功，精度：12
10-19 14:50:13.040 I/Web 控制台（6275）：isGPSEnabled 成功，精度：12 at file:///android_asset/www/lib.js:24
10-19 14:50:13.072 D/CordovaLog（6275）：collectLocationData 成功：12
10-19 14:50:13.072 D/CordovaLog（6275）：file:///android_asset/www/lib.js：第 24 行：collectLocationData 成功：12
10-19 14:50:13.072 I/Web 控制台（6275）：collectLocationData 成功：12 at file:///android_asset/www/lib.js:24
10-19 14:50:14.072 D/WifiLocator（976）：无定位 AP 太多。不会计算位置也不会转到服务器。hasLocation=0 noLocation=0 cacheMiss=0
10-19 14:50:14.072 D/CellLocator（976）：找到单元位置：位置 [已编辑]
10-19 14:50:14.072 D/androidNlpServiceThread(976): 报告位置[mProvider=network,mTime=1350672614078,mLatitude=40.8390777,mLongitude=-73.6949326,mHasAltitude=false,mAltitude=0.0,mHasSpeed=false,mSpeed=0.0 ,mHasBearing=false,mBearing=0.0,mHasAccuracy=true,mAccuracy=1123.0,mExtras=Bundle[{networkLocationSource=cached, networkLocationType=cell}]]
10-19 14:50:14.087 D/libgps (496): GpsInterface_inject_location(40.839078, -73.694933, 1123.000)
10-19 14:50:14.087 D/libgps (496): MPDINJPOS_REQ msg id 12015
10-19 14:50:14.087 D/ClientReporter（976）：报告位置
10-19 14:50:14.095 D/CordovaLog（6275）：collectLocationData 成功：1123
10-19 14:50:14.095 D/CordovaLog（6275）：file:///android_asset/www/lib.js：第 24 行：collectLocationData 成功：1123
10-19 14:50:14.095 I/Web 控制台（6275）：collectLocationData 成功：1123 at file:///android_asset/www/lib.js:24
10-19 14:50:14.118 D/androidNlpServiceThread（976）：添加监听器 com.google.android.location.internal.client.NetworkLocationClient$1@40552710，周期为 45
10-19 14:50:14.118 D/androidNetworkLocationListeners(976): 还有监听器 com.google.android.location.internal.client.NetworkLocationClient$1@40552710
10-19 14:50:14.118 I/ActivityManager(496): 不再需要 com.CCtracks.CCWalker (pid 6275): 隐藏 #21
10-19 14:50:14.126 D/WifiLocator（976）：无定位 AP 太多。不会计算位置也不会转到服务器。hasLocation=0 noLocation=0 cacheMiss=0
10-19 14:50:14.126 D/CellLocator（976）：找到单元位置：位置 [已编辑]
10-19 14:50:14.126 D/androidNlpServiceThread(976): 报告位置[mProvider=network,mTime=1350672614137,mLatitude=40.8390777,mLongitude=-73.6949326,mHasAltitude=false,mAltitude=0.0,mHasSpeed=false,mSpeed=0.0 ,mHasBearing=false,mBearing=0.0,mHasAccuracy=true,mAccuracy=1123.0,mExtras=Bundle[{networkLocationSource=cached, networkLocationType=cell}]]
10-19 14:50:14.134 D/ClientReporter（976）：报告位置
10-19 14:50:14.204 I/WindowManager(496): WIN DEATH: Window{405a97d0 com.CCtracks.CCWalker/com.CCtracks.CCWalker.CCWalkerActivity paused=false}
10-19 14:50:14.228 D/androidNlpServiceThread（976）：添加侦听器 com.google.android.location.internal.client.NetworkLocationClient$1@40552710，期间为 86400
10-19 14:50:14.228 D/androidNetworkLocationListeners(976): 还有监听器 com.google.android.location.internal.client.NetworkLocationClient$1@40552710
10-19 14:50:14.236 D/WifiLocator（976）：无定位 AP 太多。不会计算位置也不会转到服务器。hasLocation=0 noLocation=0 cacheMiss=0
10-19 14:50:14.236 D/CellLocator（976）：找到单元位置：位置 [已编辑]
10-19 14:50:14.236 D/androidNlpServiceThread(976): 报告位置[mProvider=network,mTime=1350672614246,mLatitude=40.8390777,mLongitude=-73.6949326,mHasAltitude=false,mAltitude=0.0,mHasSpeed=false,mSpeed=0.0 ,mHasBearing=false,mBearing=0.0,mHasAccuracy=true,mAccuracy=1123.0,mExtras=Bundle[{networkLocationSource=cached, networkLocationType=cell}]]
10-19 14:50:14.243 D/ClientReporter（976）：报告位置
10-19 14:50:14.595 W/GpsLocationProvider（496）：不需要删除 uid 1000 的侦听器
10-19 14:50:14.595 D/libgps_GpsMgr（496）：schedGps（）模式：3，tbf：0，精度：0，性能：0，pAgps：空
10-19 14:50:14.595 D/libgps (496): GpsInterface_stop()
10-19 14:50:14.603 D/libgps (496): action_thread_main(): BP 不在会话中，发送假 END 回调
10-19 14:50:14.603 D/libgps (496): status_cb: GPS_STATUS_SESSION_END (2)
10-19 14:50:14.603 D/libgps_GpsMgr（496）：sched（）设置模式：3，tbf：0
10-19 14:50:14.634 D/libgps (496): GpsInterface_inject_location(40.839078, -73.694933, 1123.000)
10-19 14:50:14.634 D/libgps (496): MPDINJPOS_REQ msg id 12015

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:33:58.450

如果您的应用程序进程在前台或前台服务中没有任何活动，则系统可以随时终止它以释放内存以供其他应用程序使用。

因此，在您的情况下，当用户使用例如主页按钮离开您的应用程序时调用 Activity.onPause 之后，您的应用程序进程可以随时被终止。

[http://developer.android.com/guide/components/processes-and-threads.html#Lifecycle](http://developer.android.com/guide/components/processes-and-threads.html#Lifecycle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:16:33.380

您需要进行某种排序服务，以便即使您的应用程序没有运行它也能继续运行。（如果您的应用程序不在前台并且系统需要内存，则可以随时终止您的应用程序）。

为此，您需要编写本机代码（Android 应用程序的 Java）。查看官方文档，了解如何编写服务或更好的 phonegap 插件。

# ruby-on-rails - 最近的项目 - 路由错误

> ID：12982083
> 
> 赞同：0
> 
> 时间：2012-10-19T20:36:08.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在我的 rails 应用程序中遇到了一个非常奇怪的行为。基本上，用户可以上传照片。这些照片的模型称为 user_photo。问题是，当我尝试访问最近添加的项目时（使用由 生成的 URL `user_photo_path(@user_photo)`，假设它是`http://localhost:3000/user_photos/20`），我收到此错误：

> 没有路线匹配 {:action=>"show", :controller=>"user_photos", :id=>nil}

这**仅发生在最近添加的项目**上，这意味着如果我最近添加`user_photo`了`:id => 20`它会导致路由错误；但是，如果我将创建新的（使用`:id => 21`），则以前的 id 为 20 的 user_photo 将开始工作。

你知道是什么导致了这种奇怪的行为吗？我正在使用 apache2 + 乘客在开发环境中运行我的 rails 应用程序

# postgresql - PG::Error: ERROR: function left(character varying, integer) 不存在

> ID：12982085
> 
> 赞同：4
> 
> 时间：2012-10-19T20:36:17.627
> 
> 标签：postgresql, substring, postgresql-9.1

我正在使用 PostgreSQL 和 Rails 3.2。我的数据库迁移之一具有以下内容：

```
execute <<-SQL
  CREATE INDEX users_multi_idx
  ON users (lower(left(fname, 1)), fname)
  WHERE deleted_at IS NULL;
SQL 
```

在某些数据库上迁移时，我们收到以下错误：

```
==  AddFnameIndexToUsers: migrating ===========================================
-- execute("      CREATE INDEX users_multi_idx\n      ON users (lower(left(fname, 1)), fname)\n      WHERE deleted_at IS NULL;\n")
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  function left(character varying, integer) does not exist
LINE 2:       ON users (lower(left(fname, 1)), fname)
                              ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts.
:       CREATE INDEX users_multi_idx
      ON users (lower(left(fname, 1)), fname)
      WHERE deleted_at IS NULL; 
```

奇怪的是，这不会发生在所有数据库上，只是一些（分期）。关于这个索引执行有什么问题的任何建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T20:43:13.260

您将其标记为[postgresql-9.1](/questions/tagged/postgresql-9.1 "显示标记为“postgresql-9.1”的问题")，但我强烈怀疑您在这里处理的是旧版本。当您询问时，您会得到什么：

```
SELECT version(); 
```

[`left()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)在 9.1 版本中引入。对于旧版本，请替换为`left(fname, 1)`：

```
substr(fname, 1, 1) 
```

### 直接更换

如果由于某种原因（[例如 @Wize](https://stackoverflow.com/a/33819367/939860)）无法修改查询，您可以为 9.1 之前的旧版本创建一个替换：

```
CREATE OR REPLACE FUNCTION public.left(text, int)
 RETURNS text LANGUAGE sql STABLE COST 30 AS
'SELECT substr($1, 1, $2)'; 
```

这通常*不会*在版本升级后引起冲突，因为默认[模式搜索路径](https://stackoverflow.com/questions/9067335/how-does-the-search-path-influence-identifier-resolution-and-the-current-schema/9067777#9067777)`pg_catalog`（隐式）具有before `public`，因此一旦系统函数退出，用户定义的函数就会停止运行 - 除非明确地限定模式。但是无论如何，您都应该在版本升级后将其删除。

我添加了这个，以建议对 @Wize 提供的一些改进：

*   使用`LANGUGAE sql`(not `plpgsql`) 有多种原因：

    *   更短，更简单。
    *   [plpgsql 在 9.0 之前的版本中默认不安装](http://www.postgresql.org/docs/current/interactive/plpgsql-overview.html)，因此您可能会遇到另一个问题，就像您要解决的问题一样。
    *   我介绍的简单函数可以[内联](https://wiki.postgresql.org/wiki/Inlining_of_SQL_functions)，这可以提高更大查询上下文中的性能。
*   使用函数 volatile `STABLE`，这是合适的并且有助于性能。

*   使用`$n`符号来引用函数参数，因为旧版本中的 SQL 函数不支持参数名称。

*   `public`在模式中显式创建函数。否则，它可能是在当前用户的“私有”模式中创建的，不适用于其他用户。根据您的[架构搜索路径](https://stackoverflow.com/questions/9067335/how-does-the-search-path-influence-identifier-resolution-and-the-current-schema/9067777#9067777)，这应该最适合您。

*   使用 data type `text`，这是默认的字符类型，与`left()`or`substr()`返回相同。也适用`varchar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-20T05:05:15.247

只需为 9.1 之前的 Posgres 版本创建以下函数

```
CREATE OR REPLACE FUNCTION left(s character varying,i int)
RETURNS character varying AS
$BODY$
BEGIN
  return substr(s, 1, i);
 END
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100; 
```

# javascript - 使用 codigniter 和 facebook 身份验证的访客登陆页面

> ID：12982090
> 
> 赞同：0
> 
> 时间：2012-10-19T20:36:26.120
> 
> 标签：javascript, facebook, api

我目前正在建立一个使用 facebook 身份验证来登录用户的新网站。我想知道如何使用 codeigniter 为未经身份验证的用户显示登录页面。我正在使用javascript api。我已经设置了身份验证，但我不认为重定向是要走的路。目前它只是一个页面，如果您未登录，则要求登录。我想要一种 facebook.com 样式的身份验证方法，其中提示用户使用未经身份验证的登录页面（无重定向）和另一个页面，当用户是认证。有任何想法吗？

我正在使用 facebook javascript API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:21:34.563

> 我想要一种 facebook.com 样式的身份验证方法，其中在用户通过身份验证时提示用户使用未经身份验证的登录页面（没有重定向）和另一个页面。有任何想法吗？

在您决定访问者未以任何方式或形式登录后，只需带上“登陆页面”，根据您的描述，我宁愿假设它是一个页面内模式对话框，与 JS 一起显示。

无论您是将该对话框作为 HTML 元素（最初是隐藏的、直接嵌入到您的页面中）还是通过 JavaScript 即时生成……这些细节都取决于您。

# jquery - 将页面内容加载到模态对话框的 jQuery 函数

> ID：12982096
> 
> 赞同：1
> 
> 时间：2012-10-19T20:36:38.947
> 
> 标签：jquery, jquery-ui, modal-dialog

我有以下函数应该将 div id“content”加载到模态对话框中，用于任何 id 为“#modal”的链接。

编辑

我知道 ID 必须是唯一的，但在这种情况下，在实际使用此功能的任何页面上都不会重复 #modal。我什至通过指定.modal 而不是#modal 将#modal 设为一个类。结果是一样的

结束编辑

```
// Load external content in modal
$(document).ready(function(){       
    $('#modal').on('click', function(event){
        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href') + ' #content')
            .dialog({
                autoOpen: false,
                modal: true,
                resizable: false,
                draggable: false,
                overflow: scroll,
                title: $link.attr('title'),
                width: $link.attr('width')
            });

        $link.click(function(){
            $dialog.dialog('open');
            return false;
        });
    });
}); 
```

但是发生的情况是点击事件只是转到链接而不是将外部页面加载到模态对话框中。所有必需的 jQuery 和 jQuery UI 库都包含并从 Google jQuery 存储库链接。从我读过的和我看到的例子来看，这应该有效。

我也尝试过使用

```
$('#modal').bind('click', function(){ 
```

和

```
$('#modal').click(function(){ 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:41:25.467

它转到链接，因为您没有阻止默认的锚行为。使用[event.preventDefault](http://api.jquery.com/event.preventDefault/)

```
$('#modal').on('click', function(event){ // <-- modal is a link with a `href`
        event.preventDefault(); // <--
        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href') + ' #content')
            .dialog({ 
```

具有 href 属性的锚点（单击时）会转到 href 内提供的链接。如果您不阻止该默认操作，它将去那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:42:40.600

我不是 100% 确定`click`你在底部连接的事件是怎么回事。不过，听起来像是`#modal`一个`a`元素。链接的默认行为很可能是这里的罪魁祸首，所以添加`event.preventDefault();`. 我已将它添加到您的`.on`.

现在，我不确定第二次点击事件会做什么，因为您正在将它连接到`#modal`链接。

```
// Load external content in modal
$(document).ready(function(){       
    $('#modal').on('click', function(event){
        event.preventDefault();
        var $link = $(this);
        var $dialog = $('<div></div>')
            .load($link.attr('href') + ' #content')
            .dialog({
                autoOpen: false,
                modal: true,
                resizable: false,
                draggable: false,
                overflow: scroll,
                title: $link.attr('title'),
                width: $link.attr('width')
            });

        $link.click(function(){
            $dialog.dialog('open');
            return false;
        });
    });
}); 
```

modal html加载完成后，是要打开还是真的要等用户`#modal`再次点击打开对话框？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T20:45:37.353

尝试：

```
$('#modal').on('click', function(event){
event.preventDefault(); 
```

如果失败，请尝试查看：

[在 Wordpress 页面上的 JQuery UI 对话框中打开外部 URL](https://stackoverflow.com/questions/8695797/opening-external-url-in-jquery-ui-dialog-on-wordpress-page)

# javascript - document.reg_page 未定义

> ID：12982097
> 
> 赞同：2
> 
> 时间：2012-10-19T20:36:52.223
> 
> 标签：javascript

为什么这些未定义？它们包含在表单验证 js 文件中：

var student_name = document.reg_page.student_name.value; var course_id = document.reg_page.course_id.value;

当我有这个表格

```
<div id="container">
<div id="page">
    <form name="reg_page" action="thanks.htm" onsubmit = "return form_validation()" method="post">
    <table id="form">
        <tr>
            <td colspan="2"><div id="table_title">Web Registration Form</td>
        </tr>
        <tr>
            <td class="label">Student Name:</td><td><input name="student_name" id="s" size="15" value="name"/></td>
        </tr>
        <tr>
            <td class="label">Course ID:</td><td><input name="course_id" id="c" size="10" /></td>
        </tr>
        <tr>
            <td class="label">Select the programming languages you have studied:</td>
            <td>
                <div><input type="checkbox" name="js" id="y" value="JS" />JavaScript</div>
                <div><input type="checkbox" name="py" id="y" value="Python" />Python</div>
                <div><input type="checkbox" name="asp" id="y" value="ASP.NET" />ASP.NET</div>
                <div><input type="checkbox" name="php" id="y" value="PHP" />PHP</div>
            </td>
        </tr>
        <tr>
            <td class="label">Expected Year of Graduation:</td>
            <td>
                <div><input type="radio" name="year" id="y" value="2011" />2011</div>
                <div><input type="radio" name="year" id="y" value="2012" />2012</div>
                <div><input type="radio" name="year" id="y" value="2013" />2013</div>
                <div><input type="radio" name="year" id="y" value="2014" />2014</div>
            </td>
        </tr>
        <tr>
            <td colspan="2" id="buttons">
                <input type="submit" name="sub" value="Log In" id="s" /> <input type="reset" name="re" value="Clear Form" id="r" />
            </td>
        </tr>
    </table>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:43:29.243

您是否在页面的其余部分加载之前做出这些声明？

例如，如果您在正文上方包含脚本并且声明不在函数中，它将查找浏览器尚未创建的表单和输入元素。

# javascript - 如何在 Android 中使用 Phonegap 拨打自定义电话号码？

> ID：12982102
> 
> 赞同：0
> 
> 时间：2012-10-19T20:37:23.860
> 
> 标签：javascript, android, cordova, phone-number

我正在使用phonegap编写一个应用程序。我可以使用 onclick="document.location='tel:0123456789'" 打开本机 android 拨号器。但我希望用我输入的预定义数字打开它作为输入。我收到所需的数字作为文本输入，如下所示：

```
function AddToScreen(a){
    document.getElementById('number_input').value+=a;
} 
```

但我无法用我输入的号码打开拨号器。

我怎样才能让它工作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:06:03.637

一旦您有了想要拨打的完整号码，您需要做的就是拨打：

```
document.location='tel:' + numberYouWantToDial; 
```

看起来你是那里的大部分。

# sql-server-2008 - SQL Server 2008 中的静默类型转换

> ID：12982104
> 
> 赞同：1
> 
> 时间：2012-10-19T20:37:27.107
> 
> 标签：sql-server-2008, tsql

我最近才发现 SQL Server 将为以下两个查询返回等效的答案

```
select * from myTable
    where column1 in('034','023')

select * from myTable
    where column1 in (34,23) 
```

varchar 中的数据类型。有没有人知道 SQL Server（或 T-SQL，特别是可能）中的其他“静默”数据类型转换的链接或知识

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:05:11.087

请参阅有关隐式和显式转换的链接 MSDN 文章。在页面的中间，有一个网格，其中包含 MS SQL 中数据类型之间可用转换的可视指示器。

[http://msdn.microsoft.com/en-us/library/ms191530.aspx](http://msdn.microsoft.com/en-us/library/ms191530.aspx)

# c# - Form.Show(null) 是什么意思？

> ID：12982105
> 
> 赞同：3
> 
> 时间：2012-10-19T20:37:39.703
> 
> 标签：c#, winforms

我有一个表格，需要放在另外两个表格之上。它还应该使用上面的两种形式之一最小化。我发现这就像我这样做时所描述的那样工作

`form.Show(null);`

但是，`form.Show()`不像描述的那样工作。为什么？我意识到我将所有者作为参数传递，但所有者为空。那么为什么表单的行为正确呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T20:46:01.393

请注意，Show() 是 Control 类的方法，而 Show(IWin32Window) 是 Form 类的方法。这是 Show(IWin32Window) 方法的固有行为——如果所有者为空，则将活动窗口用作所有者。Control.Show() 没有所有者的概念。您可以通过[MS 参考](http://referencesource.microsoft.com)源或反编译器进行确认。

```
IntPtr hWndActive = UnsafeNativeMethods.GetActiveWindow();
IntPtr hWndOwner = owner == null ? hWndActive : Control.GetSafeHandle(owner); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T20:46:50.250

当您将 null 作为所有者窗口传递时，您会强制 Show(owner) 方法重载以自行查找所有者。它将选择活动窗口。这通常是您想要的，但并非总是如此。旋转命运之轮的充分理由很少。

我没有得到问题的“show（）不起作用”部分。如果您在没有参数的情况下调用 Show()，则表单将没有所有者。

# c++ - 预处理在编译器中究竟意味着什么

> ID：12982106
> 
> 赞同：8
> 
> 时间：2012-10-19T20:37:54.233
> 
> 标签：c++

我试图了解 typedef 和 define 之间的区别。有很多好帖子，特别是[关于 SO 的上一个问题](https://stackoverflow.com/questions/1666353/is-typedef-and-define-the-same-in-c)，但是我不明白那个帖子

> `#define`是一个预处理器标记：编译器本身永远不会看到它。
> `typedef`是编译器标记：预处理器不关心它。

谁能更详细地解释一下。我对这里的预处理器一词感到困惑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T20:42:39.873

预处理器是在编译器*之前*运行的程序，本质上是执行文本替换。当你写：

```
#define X 10

int main() 
{
    int x = X;
} 
```

预处理器将该文件作为输入，执行它并输出：

```
int main() 
{
    int x = 10;
} 
```

然后编译器对预处理的输出进行处理。

`typedef`另一方面是编译器可以理解的构造。当你写：

```
typedef unsigned int uint_32; 
```

编译器知道这`uint32`实际上是`unsigned int`. 这个别名由编译器自己处理，并且比简单的文本替换涉及更多的逻辑。这通过一个简单的示例变得显而易见：

```
typedef int my_int;

int main()
{
    unsigned my_int x;  // oops, error
} 
```

如果 a`typedef`是一个简单的文本替换机制（就像预处理器一样），那么它会起作用，但它是不允许的并且将无法编译。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T20:40:36.820

预处理器是在任何编译开始之前发生的阶段。它读取特定的宏和符号来替换。它通常是一到两次通过。它扫描整个源文件，并生成一个符号表来替换或扩展宏。

完成所有替换后，语法分析器接管对源文件进行词法分析、生成抽象语法树、生成代码、链接库和生成可执行文件/二进制文件。

在 C/C++/ObjC 预处理器指令中，以“#”开头，后跟指令名称，例如“define”、“ifdef”、“ifndef”、“elif”、“if”、“endif”等。

预处理前：

```
#define TEXT_MACRO(x) L##x
#define RETURN return(0)   
int main(int argc, char *argv[])
{
    static wchar_t buffer[] = TEXT_MACRO("HELLO WORLD");
    RETURN ;
} 
```

预处理后：

```
int main(int argc, char *argv[])
{
    static wchar_t buffer[] = L"HELLO WORLD";
    return (0);
} 
```

如果我没记错的话，Kernighan 和 Ritchie 所著的“The C Programming Language”第 2 版一书中有一个示例，其中展示了如何创建自己的 PREPROCESSOR 以及它是如何工作的。Plan9 C 编译器也将两个过程（编译和预处理）分开。允许您在其中使用自己的 PREPROCESSOR。

查看[适用于多种语言的有趣预处理器](http://code.google.com/p/preprocess/)和[编写您自己的预处理器](http://www.codeproject.com/Articles/3853/Wave-a-Standard-conformant-C-preprocessor-library)。查看这些程序的输入和输出可以让您更深入地了解预处理器实际上是什么。

另一个小秘密：如果你有预处理器，你可以用拉丁语/德语/西班牙语编写 C :)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T20:43:07.680

C 和 C++ 预处理器是编译中很早发生的一个逻辑阶段。预处理器通过包含由 指定的头文件的文本`#include`、通过有条件地消除部分文件（`#if`、`#elif`、`#else`、`#endif`和变体`#ifdef`和`#ifndef`）以及通过执行宏替换来将源文件转换为翻译单元。宏是通过定义的`#define`；可以通过预处理器扫描源来检测宏。

预处理器消除了大多数以开头的行`#`（它只留下`#line`指令和它自己的缩写变体，`#line`以告诉编译器源来自哪里）。然后正确的编译器看到预处理的结果并编译定义的源代码。

预处理器通常不会修改这个词`typedef`。一个疯狂的程序员可以定义一个宏，`typedef`而预处理器可能不在乎；当定义了一个与语言中的任何关键字同名的宏时，程序员不能合法地包含任何系统头文件。但是，否则`typedef`对于编译器来说是一个问题，而不是预处理器。所以，也是`sizeof()`；这不是预处理器理解的东西。

通常有编译器选项可让您查看预处理的输出。对于`gcc`，选项是`-E`和`-P`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T20:41:41.593

在编译方面，您的源代码要经过很多步骤。在这些步骤中，有预处理。

预处理器是在编译器之前运行的程序，并执行所有`#`启动的指令，如`#include`，`#define`等。

在您的特定情况下，`#define WORD newword`是一个指令，它说：“用新词替换所有出现的 WORD”，甚至在尝试编译程序之前。

如果您想查看它的运行情况，请尝试运行`cpp file.c`并检查输出以了解它的作用。

文件.c

```
 #define WORD "newword"

 int main()
 {
     printf("this is word: %s\n", WORD);
     return 0;                           
 } 
```

cpp运行后会变成

```
int main()
{
    printf("this is word: %s\n", "newword");
    return 0;
} 
```

* * *

另一方面，typedef 用于表示“如果我谈论`Type`，请理解我的意思`struct more_complex_type`”，它在编译时使用，并且在`cpp`传递前后保持不变。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T20:41:51.543

预处理器是在编译器编译代码之前执行的“引擎”。 `#define #include`是预处理器指令或宏，因此预处理器引擎执行与指令相关的代码。预处理器完成后，编译器看不到任何指令/宏。但是，编译器可以理解诸如`typedef`,等结构。`if``while`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T20:44:10.533

这意味着预处理器在编译器之前运行，并在将源代码传递给编译器之前对其进行修改。因此，编译器永远不会看到某些代码。例子：

```
#define ONE 1
int x = ONE; 
```

当您编译它时，预处理器将其更改为：

```
int x = 1; 
```

并将该新文本传递给编译器。因此，编译器看不到文本`ONE`。

# javascript - JavaScript 中的自动类型转换

> ID：12982114
> 
> 赞同：8
> 
> 时间：2012-10-19T20:38:36.677
> 
> 标签：javascript

JavaScript 中的以下所有表达式非常明显。

```
var x = 10 + 10; 
```

的`x`值为`20`。

```
x = 10 + '10'; 
```

`x`在这种情况下的值是`1010`因为`+`运算符被重载。如果任何操作数是字符串类型，则进行字符串连接，如果所有操作数都是数字，则执行加法。

```
x = 10 - 10;
x = 10 - '10'; 
```

在这两种情况下，值`x`将是`0`因为`-`运算符没有以这种方式重载，并且所有操作数都转换为数字，如果它们不是在执行实际减法之前（你可以澄清，如果无论如何我错了） .

* * *

下面的表达式会发生什么。

```
x = '100' - -'150'; 
```

的`x`值为`250`。这似乎也很明显，但这个表达式在某种程度上似乎等同于以下表达式。

```
x = '100' +'150'; 
```

如果是这种情况，那么这两个字符串将被连接并分配`100150`给`x`. 那么为什么在这种情况下执行加法呢？

* * *

**编辑 ：**

`+'10' + 5`返回`15`和`'a' + + 'b'`返回`aNaN`。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:45:07.560

在您的情况下`- -`，首先不会评估为等效于`+`. `-"150"`被评估为一个数字，因此成为`-150`.

因为你不能减去一个字符串 ( `NaN`)，所以 JS 然后取`"100"`一个数字，然后它运行`100`-`-150`即 250。

关键是你不能减去类型字符串，所以它将这些字符串转换为数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T20:50:09.467

+ 和 - 运算符对字符串的响应不同。

+ 运算符连接字符串；但是， - 运算符不会执行相反的操作（拆分字符串）。

因此，如果 JavaScript 看到`'100' +'150'`，它会认为“嘿，我看到带有 + 的字符串......我可以将它们连接起来。”

如果 JS 看到`'100' - -'150'`，它会想，“嘿，我看到字符串带有 - .. 我真的不能做任何字符串函数，所以我会把它们当作数字来对待......”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T20:49:58.350

一元运算`-`符始终将其操作数转换为数字（ECMA-262 s. 11.4.6）。所以

```
x = '100' - -'150'; 
```

相当于

```
x = '100' - -150; 
```

这进一步减少到

```
x = 100 - -150; 
```

因为二元`-`运算符也总是将其操作数转换为数字（第 11.6.2 节）。

相比之下，一元运算`+`符将其操作数转换为字符串，如果其中任何一个已经是字符串（s. 11.6.1）。

[您可以在http://www.ecma-international.org/publications/standards/Ecma-262.htm](http://www.ecma-international.org/publications/standards/Ecma-262.htm)找到 ECMAscript 的完整规范（因此也​​是 Javascript 的核心）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T20:55:06.557

如果 JS 看到在字符串上使用减号运算符，它首先尝试将其类型转换为数字，然后评估表达式，因为减号运算符仅用于算术运算。加号运算符可能意味着首先连接然后添加。

在其他一些弱类型语言（如 PHP）中，这种歧义通过使用两个不同的运算符进行连接和加法来消除。

然而，对字符串使用算术的正确方法是将它们手动转换为数字（使用[parseInt](http://www.w3schools.com/jsref/jsref_parseint.asp)）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-20T21:39:53.293

## 附录

此表显示了各种转换的结果，其中变量`s=string`和`n=number`. 您还可以使用提供的代码片段尝试自己的值。

这个帖子回答了我的一些问题。所以我发布我的测试结果来帮助其他到达这里寻找答案的人。

```
╔═════════════╦═══════════╦════════╗
║ INPUT       ║ VALUE     ║ TYPEOF ║
╠═════════════╬═══════════╬════════╣
║ n           ║ 11.5      ║ number ║
║ s           ║ -1.5      ║ string ║
║ s - 0       ║ -1.5      ║ number ║
║ n + s - 0   ║ NaN       ║ error  ║
║ n + (s - 0) ║ 10        ║ number ║
║ s + 0       ║ -1.50     ║ string ║
║ n + s + 0   ║ 11.5-1.50 ║ string ║
║ n + (s + 0) ║ 11.5-1.50 ║ string ║
║ n + s       ║ 11.5-1.5  ║ string ║
║ s + n       ║ -1.511.5  ║ string ║
║ +s + n      ║ 10        ║ number ║
║ n + +s      ║ 10        ║ number ║
║ n++s        ║           ║ error  ║
║ n+(+s)      ║ 10        ║ number ║
║ Number(s)+n ║ 10        ║ number ║
╚═════════════╩═══════════╩════════╝ 
```

```
var n = 11.5, s = '-1.5';

add('n');
add('s');
add('s - 0');
add('n + s - 0');
add('n + (s - 0)');
add('s + 0');
add('n + s + 0');
add('n + (s + 0)');
add('n + s');
add('s + n');
add('+s + n');
add('n + +s');
add('n++s');
add('n+(+s)');
add('Number(s) + n');

function add(eq) {
	var v, r, t;
  try { v = eval(eq); t = typeof v; } catch(e) { v = ''; t = 'error';}
  if (t=='number' && isNaN(v)) t = 'error';
  r = window.stdout.insertRow();
  r.className = t;
  r.insertCell().innerHTML = eq;
  r.insertCell().innerHTML = v;
  r.insertCell().innerHTML = t;
}
```

```
table { border-collapse: collapse; font-family: sans-serif; }
td { min-width: 5em; padding: 2px; border: 1px dimgray solid; text-align: right; }
tr {   background-color: lightgreen; }
.string { background-color: lightyellow; }
.error { background-color: pink; }
```

```
<table id="stdout"><caption>Type Conversion Results</caption></table>
```

# javascript - 如何让引导弹出框与动态生成的图像链接一起使用？

> ID：12982127
> 
> 赞同：2
> 
> 时间：2012-10-19T20:39:37.960
> 
> 标签：javascript, jquery, twitter-bootstrap, popover

我正在尝试让 Bootstrap 2“弹出框”：

A）使用动态生成的内容和
B）在弹出框内显示图像。

我当前的代码：

```
var image = '<img src="img/header/'+selection+'" />';
var previewLink = '<a class="headerPreview" href="#" rel="popover" >(Hover to Preview)    </a>';
$('#headerBlock').append(previewLink);
$('.headerPreview').popover({
    title: 'test',
    content: image
}); 
```

现在，当链接悬停在上面时，它什么也不做。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:47:05.430

试试这个：http: [//jsfiddle.net/KAvAZ/](http://jsfiddle.net/KAvAZ/)

关键是添加`trigger: 'hover'`到您的 popover 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T22:03:04.180

每次您动态添加一些新内容时，如果您想让它启用弹出框（假设您已经添加了正确的 html 标签），则应在添加新内容后立即调用 popover() 函数。这就是我在原始内容和动态生成的内容上启用弹出窗口的方法。

该线程可能会有所帮助：[Twitter Bootstrap Popovers not working for Dynamically Generated Content](https://stackoverflow.com/questions/11947094/twitter-bootstrap-popovers-not-working-for-dynamically-generated-content)

# javascript - 如何确保 javascript 添加而不是字符串连接（不总是添加整数）

> ID：12982128
> 
> 赞同：5
> 
> 时间：2012-10-19T20:39:41.517
> 
> 标签：javascript, string, numbers, addition

通过我的 javascript 库，我最终得到了一个代表数字的字符串。现在我想对该数字进行加法运算，而不是进行字符串连接。如果您的数字始终为整数，则解决方案很简单（ [如何使用 javascript (jquery) 将整数值添加到返回字符串的值？](https://stackoverflow.com/questions/460172/how-do-i-add-an-integer-value-with-javascript-jquery-to-a-value-thats-returni)，[如何进行加法而不是串联）。](https://stackoverflow.com/questions/9081630/how-to-make-an-addition-instead-of-a-concatenation)但是我的字符串可以是浮点数或整数，并且在添加时，我不知道它会是哪个。有没有办法确保加法发生，无论它是浮点数还是整数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T20:43:26.167

尝试使用`parseFloat`. 输入变量将被转换为浮点数，无论字符串包含整数还是浮点数都有效。您的结果将始终是浮点数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T20:43:32.557

`parseFloat`即使给定一个整数，始终使用它也是相当安全的。如果必须使用适当的转换，您可以`match`为小数点并使用适当的函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T20:45:21.677

我将假设浮动添加就足够了，如果不是，那么你需要更深入地挖掘。

```
function alwaysAddAsNumbers(numberOne, numberTwo){
  var parseOne = parseFloat(numberOne),
      parseTwo = parseFloat(numberTwo);
  if (isNaN(parseOne)) parseOne = 0;
  if (isNaN(parseTwo)) parseTwo = 0;
  return parseOne + parseTwo;
} 
```

要接受@Asad 所说的话，您可能想要这样做：

```
function alwaysAddAsNumbers(a, b){
  var m = 0,
      n = 0,
      d = /\./,
      f = parseFloat,
      i = parseInt,
      t = isNaN,
      r = 10;
  m = (d.test(a)) ? f(a) : i(a,r);
  n = (d.test(b)) ? f(b) : i(b,r);
  if (t(m)) m = 0;
  if (t(n)) n = 0;
  return m + n;
} 
```

这将始终为您提供至少零输出，并且不会告诉您是否有任何一个是`NaN`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-27T19:12:00.163

出于某种原因....谁知道？？？

使用 parseFloat 有效....当 parseInt 不...显然它们并不总是相同的。

FWIW ....我在这里从“选中”复选框“添加”数据元素...

```
 var AddOns = 0;

    $( '.broadcast-channels').each(function(){              
        if ( $(this).prop("checked")) {                             
            var thisAddOn =  parseFloat($(this).data('channel'));      
            AddOns = AddOns + thisAddOn;                                      
        }           
}); 
```

# xml - 闪存 AS2 循环错误

> ID：12982140
> 
> 赞同：1
> 
> 时间：2012-10-19T20:41:07.533
> 
> 标签：xml, flash, twitter, actionscript-2

这是使用 xml 从 Twitter Feed 中提取数据，它运行良好，但我无法提取第一个数据？

> trace(wordList[0]) 始终未定义

如果我想添加我写这个的日期：

```
childItems[i].childNodes[0].firstChild.nodeValue 
```

如何将其推送到数组？

```
var wordList:Array = new Array();

var curIndex:Number = 0;

var reviews_xml:XML = new XML();
reviews_xml.ignoreWhite = true;
reviews_xml.onLoad = function (success:Boolean):Void {
    if (success) {
        var childItems:Array = reviews_xml.firstChild.childNodes;

        for (var i:Number = 0; i < childItems.length; i++) {
            wordList.push(childItems[i].childNodes[2].firstChild.nodeValue);
        }
        resimAlanim.loadMovie(childItems[0].childNodes[9].childNodes[5].firstChild.nodeValue);

    } else {
        trace("yüklenemedi");
    }
}

setInterval( showNextText, 3000 );

function showNextText()
{
    curIndex++;
    renderText(curIndex);
     if((curIndex )== wordList.length){
         curIndex = 0;
         renderText(curIndex);
     };
}

function renderText( index:Number )
{
    text_mc.text = wordList[index];
    trace(index);
}

reviews_xml.load("https://api.twitter.com/1/statuses/user_timeline.xml?include_entities=false&include_rts=true&screen_name=twitter&count=5");

renderText(curIndex);
stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:54:20.213

```
reviews_xml.firstChild.childNodes 
```

`<created_at />`可能会 包含 `<retweeted />`

您可以通过查看调试器或执行跟踪语句来检查这一点。created_at 只有一个 childNode（在 XML 处理的 as2 版本中，该 nodeValue 周围有一个隐式 childNode）。

所以

```
childItems[i].childNodes[2].firstChild.nodeValue 
```

将为空，因为该节点上没有第二个子节点。

请注意，创建 AS3 的原因之一是因为它不会在该行静默失败，而是给您一个错误。沉默的失败**不是**你的朋友。

还有第二种可能性，即问题在于您的 XML 在您尝试访问它之前尚未加载。在尝试从数组中读取值之前，我在您的代码中看不到任何等待 xml 加载的内容。

# objective-c - 核心动画和设备方向

> ID：12982142
> 
> 赞同：2
> 
> 时间：2012-10-19T20:41:30.967
> 
> 标签：objective-c, ios, core-animation

我在 iOS 上有一个单一视图应用程序。`view.layer`然后我在 a的子层上添加了一个动画`CAKeyframeAnimation`。只要设备直立，它就可以完美运行。一旦我旋转设备，动画就会随着设备“旋转”。因此，当我转动设备时，从左到右的翻译变成了从上到下的翻译，依此类推。

的`UIViewController`视图会旋转，但子`CALayer`变换不会。

我不明白我需要如何处理它。[正如这篇文章](https://stackoverflow.com/questions/1282302/autorotation-of-calayer-on-iphone-rotation)所建议的，我可以用我自己的旋转来对抗设备旋转。感觉就像我错过了一些东西。我需要做些什么来启用它还是我真的需要手动处理旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:34:09.720

我按照帖子的建议做了，并通过旋转来对抗设备方向。这是代码，为了他人的利益：

```
- (void)setupDeviceCounterRotation
{
  CATransform3D deviceCounterRotation;

  if(self.interfaceOrientation == UIDeviceOrientationPortrait) {
    deviceCounterRotation = CATransform3DIdentity;
  }
  else if(self.interfaceOrientation == UIDeviceOrientationPortraitUpsideDown) {
    deviceCounterRotation = CATransform3DMakeRotation(M_PI, 0.0f, 0.0f, 1.0f);
  }
  else if(self.interfaceOrientation == UIDeviceOrientationLandscapeLeft) {
    deviceCounterRotation = CATransform3DMakeRotation(M_PI/2, 0.0f, 0.0f, 1.0f);
  }
  else if(self.interfaceOrientation == UIDeviceOrientationLandscapeRight) {
    deviceCounterRotation = CATransform3DMakeRotation(-M_PI/2, 0.0f, 0.0f, 1.0f);
  }

  self.view.layer.sublayerTransform = deviceCounterRotation;
} 
```

# r - 在 R 的 sapply 调用中使用 which 的加速函数

> ID：12982152
> 
> 赞同：7
> 
> 时间：2012-10-19T20:42:19.693
> 
> 标签：r, sapply

我有两个向量`e`和`g`。我想知道每个元素中较小`e`的元素百分比。`g`在 R 中实现这一点的一种方法是：

```
set.seed(21)
e <- rnorm(1e4)
g <- rnorm(1e4)
mf <- function(p,v) {100*length(which(v<=p))/length(v)}
mf.out <- sapply(X=e, FUN=mf, v=g) 
```

使用大的`e`or `g`，这需要很长时间才能运行。如何更改或调整此代码以使其运行更快？

注意：`mf`上面的函数是基于`mess`dismo 包中函数的代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T21:20:39.567

这么慢的原因是因为你正在调用你的函数`length(e)`时间。它对小向量并没有太大的区别，但是 R 函数调用的开销确实开始与更大的向量相加。

通常，您需要将其移动到已编译的代码中，但幸运的是您可以使用`findInterval`：

```
set.seed(21)
e <- rnorm(1e4)
g <- rnorm(1e4)
O <- findInterval(e,sort(g))/length(g)

# Now for some timings:
f <- function(p,v) mean(v<=p)
system.time(o <- sapply(e, f, g))
#   user  system elapsed 
#   0.95    0.03    0.98
system.time(O <- findInterval(e,sort(g))/length(g))
#   user  system elapsed 
#      0       0       0 
identical(o,O)  # may be FALSE
all.equal(o,O)  # should be TRUE

# How fast is this on large vectors?
set.seed(21)
e <- rnorm(1e7)
g <- rnorm(1e7)
system.time(O <- findInterval(e,sort(g))/length(g))
#   user  system elapsed 
#  22.08    0.08   22.31 
```

# javascript - 使用 JavaScript 或 jQuery 选择/复制文本

> ID：12982156
> 
> 赞同：8
> 
> 时间：2012-10-19T20:42:32.757
> 
> 标签：javascript, jquery, html

我听说你不能在不使用 Flash 的情况下复制文本（在浏览器中）；那么，有没有办法通过使用锚和 JavaScript 或 jQuery 来选择文本。

```
<p>Text to be copied</p>

<a>Copy Text Above</a> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-12-29T02:13:24.787

在较新的浏览器上，您可以执行此操作来选择和复制。这是一个纯 Javascript 解决方案。

```
function copy_text(element) {
    //Before we copy, we are going to select the text.
    var text = document.getElementById(element);
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(text);
    selection.removeAllRanges();
    selection.addRange(range);
    //add to clipboard.
    document.execCommand('copy');
} 
```

[此复制命令适用于所有主要浏览器、Chrome、Firefox (Gecko)、Internet Explorer 和 Opera，不包括 Safari。](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand#Browser_compatibility)

**编辑**：未来注意事项 - 虽然前面仍然有效，但有人谈到转移到[Permissions API](https://developer.mozilla.org/en-US/docs/Web/API/Permissions)并使用[Clipboard 接口](https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/writeText)，看起来像`navigator.clipboard.writeText('text')`。这个标准还没有最终确定，也没有被许多浏览器支持。随着安全性越来越受到关注，预计未来会出现类似的情况。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-16T14:19:20.193

我找到了这个 jQuery 解决方案：

```
$(function() {
 $('input').click(function() {
 $(this).focus();
 $(this).select();
 document.execCommand('copy');
 $(this).after("Copied to clipboard");
 });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="text" value="copy me!" />
```

[来源](https://www.coderomeos.org/select-and-copy-data-to-clipboard-using-jquery)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T21:17:48.930

给定以下示例 html：

```
<div class="announcementInfoText">
    <p class="copyToClipboard">
        <a id="selectAll">Select All Text</a>
    </p>
    <textarea ID="description" class="announcementTextArea">This is some sample text that I want to be select to copy to the clipboard</textarea>
</div> 
```

您可以使用以下 jQuery 在 textarea 中选择文本：

```
$("#selectAll").click(function () {
    $(this).parents(".announcementInfoText").children("textarea").select();
}); 
```

现在选择了文本“ *This is some sample text that I want to be select to copy to the clipboard* ”，您只需按 Ctrl+C 即可将文本复制到剪贴板。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-20T20:22:49.743

不运行基于 Flash 的插件的最简单的解决方案是：

```
$('a').click(function() {
    window.prompt('Press ctrl/cmd+c to copy text', $(this).prev('p').text());
}); 
```

[http://jsfiddle.net/JFFvG/](http://jsfiddle.net/JFFvG/)

# java - Mac OS X 上预装的 Maven 会给出 java.lang.ClassNotFoundException

> ID：12982161
> 
> 赞同：1
> 
> 时间：2012-10-19T20:42:49.190
> 
> 标签：java, macos, maven

我尝试使用命令运行预安装的 Maven`mvn`并收到此错误：

`Exception in thread "main" java.lang.NoClassDefFoundError: org/codehaus/plexus/classworlds/launcher/Launcher`

运行最新的 Mac OS X Mountain Lion 和 Java。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:49:58.637

这看起来很眼熟。我已经看到，当 M2_HOME 设置为 Maven2 安装时。

你有 M2_HOME 或 MAVEN_HOME 设置吗？这可能是罪魁祸首。

maven 3.0.3 中有一些相当大的错误。与 maven http wagon 相关的 3.0.4 中也有非常好的性能提升，包括连接池。如果您发现构建运行速度较慢，请执行 mvn --version。Lion 附带的版本是 3.0.3。

要解决此问题，请执行以下操作：

brew install maven sudo unlink /usr/share/maven cd /usr/share/ sudo ln -s /usr/local/Cellar/maven/3.0.4 maven

确保未设置 M2_HOME 和 MAVEN_HOME 变量是解决此类问题的关键（出于某种原因，Mac OS X 不需要它们，这会导致问题）。这是通常的罪魁祸首。我会鼓励你升级到 3.0.4 以及 httpclient 的改进，如果没有别的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:28:06.363

请检查您使用的是哪个版本的 Maven 和 Java。

您的用例类似于在网上找到的以下博客文章。

[http://cyntech.wordpress.com/2011/03/09/maven-2-error/](http://cyntech.wordpress.com/2011/03/09/maven-2-error/)

# ruby - Rails 3 Active Record 对象重新初始化

> ID：12982163
> 
> 赞同：0
> 
> 时间：2012-10-19T20:42:52.620
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我有一个旧用户对象和一个新用户对象。我正在尝试创建一个新的用户对象，并希望将所有属性分配给旧用户对象并保持 id（主键）相同，而不在用户表中创建新行。

```
old_user = User.find(20)
old_user.id # this is 20
old_user.name # this displays "old_name"
new_user = User.new
new_user.name = "new_name"
old_user = new_user
old_user.save # this doesn't work since the new_user.id is nil and so is old_user.id is nil
old_user.id = 20 and save #this won't work either. 
```

如何将 new_user 的状态保存到 old_user 对象但保持相同的主键 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:56:44.333

据我所知，您不需要新的用户对象。有几种方法可以更新 ActiveRecord 对象的属性：

```
user = User.find(20)
user.name = "new_name"
user.save # returns true if successful 
```

您可以传入一个哈希值来一次更新多个属性：

```
user = User.find(20)
user.update_attributes(name: "new_name", email: "new_email@email.com") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T11:28:42.403

如果这是你想要的，ruby 中的 clone 方法可以解决问题。它还将克隆 id

```
new_user = old_user.clone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:35:15.120

您的问题很容易回答，但就像 Zach Kemp 上面所说的那样，您应该描述您的用例，这样也许有人可以建议一种更好的方法来做您想做的事情。

无论如何，这会做你想要的。

```
old_user = User.find(20)
new_user = User.new(old_user.attributes)
new_user.save! 
```

# java - 尝试运行多个线程时导致强制关闭的空指针异常

> ID：12982166
> 
> 赞同：0
> 
> 时间：2012-10-19T20:43:12.073
> 
> 标签：java, android, multithreading, timer

我正在尝试在后台运行一项服务，以发送手机位置的短信。在服务中，我使用计时器。发送消息的代码运行正确，但是当我尝试将代码放入以查找用户位置时，我总是遇到错误。

我试图调用一个新线程并使用了一个looper，但现在我得到了一个指向这两行代码的nullpointerexception：

```
sendSmsMessage(); 
```

在这个方法中：

```
if (coordinates.equals(null) || coordinates.equals("") || coordinates == null || coordinates == ""){
        coordinates = "Could Not Receive Location";
    } 
```

所以，我要问的问题是为什么会发生这个错误？如果您能帮助我，将不胜感激。如果我只是忽略了一些非常简单的事情，请指出。谢谢！

这是代码：

```
 public class MessageService extends Service{
int counter = 0;
private Timer timer = new Timer();
public String textTime, phoneNumber;
public int updateInterval;
int lat, lng;
String coordinates, latitude, longitude;
LocationManager locationManager;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId){
    //receives the intent extras from the calling intent
    textTime = intent.getStringExtra("textTime");
    phoneNumber = intent.getStringExtra("phone");

    phoneNumber = "5556";

    //the following if statement has to do with transferring the string textTime into a number that can be used
    if (textTime.equals("15 Minutes")) {
        updateInterval = (15 * (60000));
    }else if (textTime.equals("30 Minutes")) {
        updateInterval = (30 * (60000));
    }else if (textTime.equals("1 Hour")){
        updateInterval = (60 * (60000));
    }else {
        updateInterval = (15 * (60000));
    }

    locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    new Thread(){
        public void run(){
            Looper.prepare();
            // Define a listener that responds to location updates
            LocationListener locationListener = new LocationListener() {
                public void onLocationChanged(Location location) {
                  // Called when a new location is found by the network location provider.
                  //makeUseOfNewLocation(location);
                    lat = (int) (location.getLatitude() * 1E6);
                    lng = (int) (location.getLongitude() * 1E6);

                    latitude = Integer.toString(lat);
                    longitude = Integer.toString(lng);

                    coordinates = "Coordinates: " + latitude + ", " + longitude + ". Latitude: " + latitude + " Longitude: " + longitude + ". Respond 'END' to stop texts."; 
                }

                public void onStatusChanged(String provider, int status, Bundle extras) {}

                public void onProviderEnabled(String provider) {}

                public void onProviderDisabled(String provider) {}
              };

              Looper.loop();

              if (locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
                    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
              }else{
                    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
              }

        }
    }.start();

    //the following method should use a timer to send a sms message in a timed interval. It also should implement using a different thread
    doSomethingRepeatedly();

    return START_STICKY;

}

public void doSomethingRepeatedly(){
    timer.scheduleAtFixedRate(new TimerTask() {
        public void run() {
            //the following code should be what is done repeatedly
            //Log.d("MessageService", String.valueOf(++counter));

            sendSmsMessage();
        }
    }, 0, updateInterval);
}

//the following code handles sending the text message
public void sendSmsMessage(){
    SmsManager sms = SmsManager.getDefault();
    if (coordinates.equals(null) || coordinates.equals("") || coordinates == null || coordinates == ""){
        coordinates = "Could Not Receive Location";
    }

    sms.sendTextMessage(phoneNumber, null, "test" , null, null);

}

public void onDestroy() {
    super.onDestroy();

    if (timer != null) {
        timer.cancel();
    }
}

}//end of service 
```

这是 logcat 输出：

```
 10-19 20:23:28.096: E/AndroidRuntime(944): FATAL EXCEPTION: Timer-0
10-19 20:23:28.096: E/AndroidRuntime(944): java.lang.NullPointerException
10-19 20:23:28.096: E/AndroidRuntime(944):  at com.app.MessageService.sendSmsMessage(MessageService.java:113)
10-19 20:23:28.096: E/AndroidRuntime(944):  at com.app.MessageService$2.run(MessageService.java:105)
10-19 20:23:28.096: E/AndroidRuntime(944):  at      java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:45:24.193

你需要更换

```
coordinates.equals(null) 
```

和

```
coordinates == null 
```

由于第一个永远不会评估为，它每次`true`都会抛出一个is 。`NullPointerException()``coordinates``null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:54:48.430

如果您`coordinates`为 null，那么第一个条件`oordinates.equals(null)`将导致`NullPointerException`.

此外，我还有一个观察。比较`coordinates == ""`没有用，因为您已经以正确的方式使用它，即坐标.equals("")。

改变你`if`的

```
if (coordinates.equals(null) || coordinates.equals("") || 
                                    coordinates == null || coordinates == ""){
    coordinates = "Could Not Receive Location";
} 
```

到

```
if (coordinates == null || coordinates.equals("")){
    coordinates = "Could Not Receive Location";
} 
```

# javascript - 事件.src元素 || event.target 在 ff 中不起作用

> ID：12982169
> 
> 赞同：0
> 
> 时间：2012-10-19T20:43:23.530
> 
> 标签：javascript, firefox

我的代码在 Firefox 中不起作用。`event.target`并且在 Firefox`event.srcelement`中 `window.event.srcElement;` 不起作用。

我的 Firefox 版本是：15.01

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:47:44.560

`window.event`是一个非标准属性，仅适用于某些浏览器（即 IE） - 它将评估到`undefined`其他地方（例如 Firefox，~~铬合金~~）。

请改用[“带有 window.event hack 的事件变量”](https://stackoverflow.com/questions/12614862/how-to-get-the-event-object-when-event-listener-is-added-inline/12614949#12614949)。或者，也许更好的是，使用 jQuery 来统一跨浏览器的事件处理..

* * *

还要记住，案例很重要。`srcelement`并`srcElement`参考不同的属性。由于有时像这样的小问题，请记住*将实际代码*与*实际错误消息*一起发布。此信息还使问题更易于搜索和/或关闭为重复项。

# login - 由于 CFoundry::Client 的“未定义方法‘get’，无法‘vmc login’到 api.cloudfoundry.com

> ID：12982173
> 
> 赞同：1
> 
> 时间：2012-10-19T20:43:40.763
> 
> 标签：login, cloud-foundry, vmc

请参阅下面的 gemlist 和 vmc 错误。

### $宝石清单

*** 当地宝石

可寻址 (2.2.8)
cfoundry (0.3.43)
交互 (0.4.8)
json_pure (1.6.7)
mime-types (1.19)
multi_json (1.3.6)
rb-readline (0.4.2)
rest-client (1.6\. 7) ruby​​gems
-update (1.8.24)
ruby​​zip (0.9.9)
terminal-table (1.4.5)
uuidtools (2.1.3)
vmc (0.3.20)

qa $vmc login 正在尝试登录 [http://api.cloudfoundry.com] 电子邮件：xxx@gmail.com 密码：***** ** *** ****

登录 'http://api.cloudfoundry.com' 时出现问题，# 未定义方法 'get'，重试或注册一个帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:09:50.347

您好我建议您尝试将 VMC 更新到最新版本 0.3.21。您可以通过简单地使用 gem 重新安装来做到这一点；

```
gem install vmc 
```

# postgresql - 从一组表中逐个执行 SELECT

> ID：12982178
> 
> 赞同：2
> 
> 时间：2012-10-19T20:43:57.953
> 
> 标签：postgresql, inheritance, partitioning

我有一组按日期分区并按以下格式命名的表：

```
public.schedule_20121019 
```

我可以在特定天数内成功[返回这些表的列表：](https://stackoverflow.com/questions/12977261/generate-sequence-of-dates-used-in-for-loop)

```
SELECT 'public.schedule_' || to_char(current_date - d, 'YYYYMMDD')
FROM generate_series(6, 0, -1) s(d); 
```

但是`select * from`这些表中的每一个并将结果插入新表中的好方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:57:01.660

如果它们按日期分区，则查询父表。如果要创建一个新表：

```
create table another_table as
select *
from schedule_parent
where the_date between current_date - 6 and current_date 
```

如果要插入现有表：

```
insert into another_table
select *
from schedule_parent
where the_date between current_date - 6 and current_date 
```

分区表有一个检查约束：

```
create table schedule_20121012 (
    check (date the_date = date '20012-10-12')
) inherits (schedule_parent); 
```

因此，当您从父表中查询日期时，计划者知道要查找哪个表：

```
select * from schedule_parent where date the_date = date '20012-10-12' 
```

我有一组使用继承的表。该表`usuarios`具有按其列之一分区的子表。它的一个孩子：

```
\d+ usuarios_25567
             Table "public.usuarios_25567"
 Column  |  Type   | Modifiers | Storage | Description 
---------+---------+-----------+---------+-------------
 usuario | integer | not null  | plain   | 
 data    | integer | not null  | plain   | 
 wus     | integer | not null  | plain   | 
 pontos  | real    | not null  | plain   | 
Indexes:
    "ndx_usuarios_25567" UNIQUE, btree (usuario)
Check constraints:
    "b25567" CHECK (data = 25567)
Foreign-key constraints:
    "fk_usuarios_25567" FOREIGN KEY (data) REFERENCES datas(data_serial)
Inherits: usuarios
Has OIDs: no 
```

它的检查约束是`data`列。现在查看当我使用该列过滤父表上的查询时的查询计划：

```
explain select * from usuarios where data = 25567;
                                          QUERY PLAN                                          
----------------------------------------------------------------------------------------------
 Result  (cost=0.00..26590.45 rows=1484997 width=16)
   ->  Append  (cost=0.00..26590.45 rows=1484997 width=16)
         ->  Seq Scan on usuarios  (cost=0.00..0.00 rows=1 width=16)
               Filter: (data = 25567)
         ->  Seq Scan on usuarios_25567 usuarios  (cost=0.00..26590.45 rows=1484996 width=16)
               Filter: (data = 25567)
(6 rows) 
```

它只会查看该表。不是其他数百张桌子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:24:15.033

有关分区的信息，请参阅详细[文档](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)。有丰富的信息，然后一些。您将使用表继承来进行分区。

两个警告：确保分区确实解决了问题。它适用于删除旧数据和查询日期范围。实际上，单独的分区应该至少有数百万行才能使其保持稳定。

另一个警告：在当前状态下，Postgresql 的分区适用于数十个表。数百似乎有点牵强。考虑每月分区，而不是每天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T00:06:23.930

我想了一个办法来解决它：

```
CREATE OR REPLACE FUNCTION looper(_schema varchar, _partition varchar,
                                  _traceback integer, _table varchar)
RETURNS VOID AS $$
DECLARE row RECORD;
BEGIN
    FOR row IN
        SELECT table_schema
            , table_name
        FROM
            information_schema.tables
        WHERE
            table_type = 'BASE TABLE'
        AND
            table_schema = _schema
        AND
            table_name IN (
                SELECT _partition || to_char(current_date - d, 'YYYYMMDD')
                FROM
                    generate_series(_traceback, 0, -1) s(d)
            )
        ORDER BY table_name
    LOOP
        EXECUTE 'INSERT INTO ' || _table || ' SELECT schedule_date FROM ' ||
            quote_ident(row.table_schema) || '.' ||
            quote_ident(row.table_name);
    END LOOP;
END;
$$ LANGUAGE plpgsql VOLATILE; 
```

# jquery - 将 jQuery 最新版本与 Drupal 和 require.js 一起使用 AMD

> ID：12982183
> 
> 赞同：1
> 
> 时间：2012-10-19T20:44:12.610
> 
> 标签：jquery, drupal, requirejs, amd

我正在使用 Drupal 并希望获得最新的 jQuery 版本。根据我的阅读，有几个关键模块与最新版本有冲突。我尝试了一个名为“jQuery update”的 Drupal 模块，但版本是 1.5.2.... 我想到的一个解决方案是使用 require.js AMD 来加载最新版本以在我的模块中使用（javascript 模块，而不是 Drupal模块）。我担心的是关于两个 jQuery 版本的冲突。我的模块已关闭，可以使用 require.js AMD 自行加载。可以在 [这里](http://jsfiddle.net/yhXrj/8/)找到一个示例，或者：

```
(function($) {

$(function() {
    require.config({
        paths: {
            "jquery": "https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min"
        }
    });

    // Now that we have configured a named alias for the jQuery
    // library, let's try to load it using the named module.
    require([
        "jquery"
        ], function($jq182) {

        var MyModule = (function($jq182) {
            return {
                init: function() {
                    // Log the callback parameter.
                    console.log("$jq182.fn.jquery:", $jq182.fn.jquery);
                }
            };

        }($jq182));

        MyModule.init();
    });

});

}(jQuery));​ 
```

（注意老版本是用old fasion方式引用的（为了演示Drupal的引用），新的jQuery引用是用require.js加载的）

谢谢！！

# mysql - 根据数据库中的值重命名文件

> ID：12982185
> 
> 赞同：2
> 
> 时间：2012-10-19T20:44:13.900
> 
> 标签：mysql, perl, rename

我对 Perl 很陌生，我需要完成一个依赖它的项目。我需要拍摄文件夹中的图片，在数据库中查找它们的名称，然后根据该行中的另一个值重命名图片。

所以说我需要重命名图片

```
010300000000001002.jpg 
```

然后我需要让脚本在数据库中查找

```
010300000000001002 
```

在`USERID`. 然后，当它找到匹配项时，我需要它`EMPNUM`在同一行中查找值。然后`EMPNUM`取值并将图片重命名为 value.jpg，在本例中等于 1002。因此最终产品将如下所示：

```
Old Picture: 010300000000001002.jpg
New Picture: 1002.jpg 
```

然后重复该文件夹中的所有图片。

从数据库脚本中读取：

```
#!/usr/bin/perl -w
use strict;

use DBI;
# Replace datasource_name with the name of your data source.  AdventureWorksDW \dbo.DimEmployee
# Replace database_username and database_password
# with the SQL Server database username and password.
my $data_source = q/not giving the data source/;
my $user = q/Not giving the user/;
my $password = q/Not Giving the password /;
my $dbh = DBI->connect($data_source, $user, $password)
    or die "Can't connect to $data_source: $DBI::errstr";

# Catch and display status messages with this error handler.
sub err_handler {
   my ($sqlstate, $msg, $nativeerr) = @_;
   # Strip out all of the driver ID stuff
   $msg =~ s/^(\[[\w\s:]*\])+//;
   print $msg;
   print "===> state: $sqlstate msg: $msg nativeerr: $nativeerr\n";
   return 0;
}

$dbh->{odbc_err_handler} = \&err_handler;

$dbh->{odbc_exec_direct} = 1;

# Prepare your sql statement (perldoc DBI for much more info).
my $sth = $dbh->prepare('select userid, empnum from dbo.emp0');

# Execute the statement.
if ($sth->execute)
{
    # This will keep returning until you run out of rows.
    while (my $row = $sth->fetchrow_hashref)
    {
        print "ID = $row->{userid}, Name = $row->{empnum}\n";
    }
}

$dbh->disconnect; 
```

复制和重命名文件脚本：

```
#!/usr/bin/perl -w
use strict;
use warnings;

my $i = 1;
my @old_names = glob "/root/pics/*.jpg";

foreach my $old_name (@old_names) {

    my $new_name = "picture$i" . ".jpg";

    rename($old_name, "/root/pics/$new_name") or die "Couldn't rename $old_name to $new_name: $!\n";

} continue { $i++ }

print "Pictures have been renamed.\n"; 
```

编辑：这就是我最终得到的，它完成了这项工作。

```
#!/usr/bin/perl -w
use strict;
use File::Copy;
use DBI;

my $data_source = q/db/;
my $user = q/user/;
my $password = q/password/;
my $dbh = DBI->connect($data_source, $user, $password)
    or die "Can't connect to $data_source: $DBI::errstr";

# Catch and display status messages with this error handler.
sub err_handler {
   my ($sqlstate, $msg, $nativeerr) = @_;
   # Strip out all of the driver ID stuff
   $msg =~ s/^(\[[\w\s:]*\])+//;
   print $msg;
   print "===> state: $sqlstate msg: $msg nativeerr: $nativeerr\n";
   return 0;
}
$dbh->{odbc_err_handler} = \&err_handler;
$dbh->{odbc_exec_direct} = 1;

sub move_image 
{
    my $user_id = $_[0];
    my $emp_num = $_[1];

    my $old_name = "/root/picS/${user_id}.jpg";

    my $new_name = "/root/picD/${emp_num}.jpg";

    move($old_name, $new_name) or return 0;

    return 1;
}

# Prepare your sql statement (perldoc DBI for much more info).
my $sth = $dbh->prepare('select userid, empnum from dbo.emp0');

# Execute the statement.
if ($sth->execute)
{
    # This will keep returning until you run out of rows.
    while (my $row = $sth->fetchrow_hashref)
    {
        my $user_id = $row->{userid};
        my $emp_num = $row->{empnum};

        if (move_image($user_id, $emp_num))
        {
            print "Moved image $user_id to $emp_num successfully\n";
        }
        else
        {
            print "Could not move image $user_id to $emp_num successfully\n";
        }
    }
}

$dbh->disconnect; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:44:48.680

首先，我建议使用`move`From [File::Copy](http://perldoc.perl.org/File/Copy.html)。[rename 子例程](http://perldoc.perl.org/functions/rename.html)对何时可以使用有限制。但是，如果您确定两个图像将始终位于同一个文件夹中，那么`rename`应该没问题，甚至可能更有效。

将以下内容添加到代码顶部以便能够使用`File::Copy`：

```
use File::Copy; 
```

其次，如果你想在这里集成功能，我会把“移动”代码变成一个子程序。

```
sub move_image 
{
    my $user_id = $_[0];
    my $emp_num = $_[1];

    my $old_name = "/root/pics/${user_id}.jpg";

    my $new_name = "/root/pics/picture${emp_num}.jpg";

    move($old_name, $new_name) or return 0;

    return 1;
} 
```

然后调用子程序：

```
# This will keep returning until you run out of rows.
while (my $row = $sth->fetchrow_hashref)
{
    my $user_id = $row->{userid};
    my $emp_num = $row->{empnum};

    if (move_image($user_id, $emp_num))
    {
        print "Moved image $user_id to $emp_num successfully\n";
    }
    else
    {
        print "Could not move image $user_id to $emp_num successfully\n";
    }
} 
```

只需像我展示的那样将子例程添加到您的原始脚本中。不要尝试使用两个不同的脚本。[子程序](http://perldoc.perl.org/perlsub.html)非常有用。

# asp.net-mvc - 在 ASP.NET MVC 中放置 Html.BeginForm()

> ID：12982186
> 
> 赞同：0
> 
> 时间：2012-10-19T20:44:16.643
> 
> 标签：asp.net-mvc

在 asp.net 母版页中使用包含`form control`. 我无法弄清楚，正确的放置位置在哪里`Html.BeginForm()`。是它`Layout Page`还是`View`.

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:46:00.023

您应该在需要表格的任何一个位置放置一个。这通常意味着在视图内部，因为您希望在每个页面/表单上执行不同的操作，而不是在整个站点上执行相同的操作。

Webforms 在 MVC 中不存在每页一个表单的限制 - 每页可以有多个表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:49:49.147

表单元素应该包含您的输入元素和文本区域。
因此，如果您的输入在您的布局或母版页中 - 您可以在那里有一个表单。
但大多数时候，您的表单都在您的视图中，您可以在其中创建或编辑数据。

# python - 如何以编程方式访问pdf页面中的行并在python中赋予它们不同的颜色？

> ID：12982188
> 
> 赞同：0
> 
> 时间：2012-10-19T20:44:45.773
> 
> 标签：python, pdf

我想直接访问 pdf 页面并访问各个行。我想以不同的方式改变每一行的颜色。我正在使用linux，我想用python编程。

任何人都可以让我知道图书馆和示例代码吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T09:20:17.797

您可以使用基于 Python 的库，例如 [Reportlab](http://www.reportlab.com/software/opensource/) ，这是一个很好的库，社区支持也很好。另一个简单的库是 **pythonreport**。

# python - 用字典中的重复键构造数据结构（但不能使用数组）

> ID：12982190
> 
> 赞同：1
> 
> 时间：2012-10-19T20:44:56.950
> 
> 标签：python, soap, duplicates, suds

我正在尝试使用 Suds 为以下数据结构发送 SOAP 请求

```
<WriteRequest>
  <ClassName>Fifth_Grade</ClassName>
  <UpdateStudent>
    <StudentName>Andrew</StudentName>
    <StudentWeight>60</StudentWeight>
    <StudentName>Mike</StudentName>
    <StudentWeight>54</StudentWeight>
    <StudentName>Emma</StudentName>
    <StudentWeight>71</StudentWeight>
  </UpdateField>
</WriteRequest> 
```

当我为 UpdateSudent 创建一个字典时，StudentName 和 StudentWeight 的键值在每次分配迭代时都会被覆盖。

如果我使用数组，提交的数据结构会变成这样的不受欢迎的格式

```
<UpdateStudent>
        <StudentName>Andrew</StudentName>
        <StudentWeight>60</StudentWeight>
</UpdateStudent>
<UpdateStudent>
       <StudentName>Mike</StudentName>
       <StudentWeight>54</StudentWeight>
</UpdateStudent> 
```

关于如何最好地表示 python 中的第一个数据结构的任何想法。

谢谢 ！！

# inventory - 库存管理 - 销售定价

> ID：12982194
> 
> 赞同：2
> 
> 时间：2012-10-19T20:45:01.987
> 
> 标签：inventory

这更像是一个抽象的架构问题。

我正在为药房相关领域开发库存管理系统。我有所有常用的组件，例如产品定义（产品类型、类别等）仓库、采购订单、收货单、销售订单、产品定价等。

对于每次购买，产品可能会产生不同的成本（购买成本 + 运费 + 额外成本），并且应该能够为每个“批次”购买配置售价。销售时应该可以根据 FIFO 或 LIFO 选择 BATCH（在产品定义中配置）

我们如何才能最好地完成这个要求？“价格”的属性是什么？任何关于这个主题的一般最佳实践都是最受欢迎的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:03:27.277

我不确定“最佳”做法是什么，但我以前创建过这种库存系统。您的问题几乎有答案 - 您需要按批次跟踪购买。

所以你的库存主数据看起来像：

```
Primary_Inventory_Key
Description
LIFO_FIFO_FLAG          // if this is set at the inventory item level
... 
```

您的 Inventory Batch 表将是：

```
 Primary_Inventory_Key
 Batch #                  // autoincrement
 // maybe PO # or something rather than these fields, depends on rest of schema
 Purchase Date            //
 Purchase Price           //
 Purchase Qty             // quantity originally purchased 
 VendorID                 

 InventoryLevel           // quantity remaining from this batch
 ...

 PRIMARYKEY(Primary_Inventory_Key,Batch#) 
```

然后，当您进行销售时，只需：

```
SELECT MAX(Batch#) WHERE InventoryKey = 'Mykey' AND InventoryLevel > 0 
```

对于 LIFO 和：

```
SELECT MIN(Batch#) WHERE InventoryKey = 'Mykey' AND InventoryLevel > 0 
```

先进先出。

您还可以拉出一个列表并让用户选择具有此模式的批次。

请记住在提交事务时减少您的库存水平。

# c# - DropDownListFor 不显示所选值

> ID：12982196
> 
> 赞同：0
> 
> 时间：2012-10-19T20:45:05.750
> 
> 标签：c#, c#-4.0, asp.net-mvc-2, html-helper

我在使用 Html.DropDownListFor 显示选定值时遇到问题。我有一个使用**多个**下拉菜单的视图，所有下拉菜单都被填充，但没有选择任何内容。我对每个下拉菜单都有相同的选择，但选择的值不同。这是我的视图模型：

```
public class ViewPersonTargetingViewModel
{
    public List<PersonTarget> Targets { get; set; }
    public SelectList TargetStatuses { get; set; } 
} 
```

这就是我制作 SelectList 的方式：

```
var statuses = DataAccess.GetPersonTargetStatuses();
TargetStatuses = new SelectList(statuses, "PersonTargetStatusUuid", "PersonTargetStatusName"); 
```

我的 PersonTarget 类：

```
public class PersonTarget
{
    public string PersonTargetStatusName { get; set; }
    public Guid PersonTargetStatusUuid { get; set; }
    //and more
} 
```

这就是我创建 DropDownList 的方式：

`<%: Html.DropDownListFor(model => model.Targets[k].PersonTargetStatusUuid, Model.TargetStatuses)%>` 其中 k 是通过目标列表的迭代。

我使用相同的 SelectList 来填充所有 DropDowns，它包含如下信息：

*   文本：A 值：b2e4a939-06d8-4052-8abf-5c1b2a5e8591
*   文本：B 值：0b59faaa-514d-4212-93cd-6b0a50b8f151
*   文本：C 值：5575f3cf-33f8-41df-be73-a176a3db5ed5

例如，当我试图让它显示“B”时，我给了他正确的目标状态，但它仍然显示第一个元素（“A”）被选中，我什至打印出我给他的值，并且我知道它`Model.Targets[k].PersonTargetStatusUuid`的值是：0b59faaa-514d-4212-93cd-6b0a50b8f151（它是“B”的 Guid），但它仍然显示“A”。我没有办法解决这个问题。非常感谢任何帮助，谢谢:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:33:18.037

我做了一个又快又脏的小试验程序，效果很好。

您在问题中提到了它，但我会仔细检查：

*   您的选择列表的 HTML 具有适当的值和名称
*   您的 PersonTargetStatusUuid 是正确的

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var colours = new List<CarColour>() { new CarColour() { Id = Guid.NewGuid(), Colour = "Red" }, new CarColour() { Id = Guid.NewGuid(), Colour = "Blue" }, new CarColour() { Id = Guid.NewGuid(), Colour = "Green" } };
        ViewData["Colours"] = new SelectList(colours, "Id", "Colour");

        var car = new Car() { Id = Guid.NewGuid(), Name = "GreenCar", Colour = colours.First(cc => cc.Colour == "Green") };
        return View(car);
    }
}

public class Car
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public CarColour Colour { get; set; }
}

public class CarColour
{
    public Guid Id { get; set; }
    public string Colour { get; set; }
} 
```

指数：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<CarTest.Controllers.Car>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Index
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <%: Html.LabelFor(m => m.Id) %>
    <%: Html.TextBoxFor(m=> m.Id) %>

    <%: Html.LabelFor(m => m.Name) %>
    <%: Html.TextBoxFor(m=> m.Name) %>

    <%: Html.LabelFor(m => m.Colour) %>
    <%: Html.DropDownListFor(m=> m.Colour.Id, ViewData["Colours"] as IEnumerable<SelectListItem>) %>

</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:43:16.547

所以最后我发现问题出在我的单个列表中。事实证明，出于某种原因，必须从不同的列表中填充各个下拉列表。现在一切正常:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T13:15:46.627

您需要设置`SelectedValue`. `SelectList`例如像这样：

```
<%: Html.DropDownListFor(model => model.Targets[k].PersonTargetStatusUuid, new SelectList(Model.TargetStatuses, "PersonTargetStatusUuid", "PersonTargetStatusName", Model.Targets[k].PersonTargetStatusUuid)) %> 
```

# rest - Jersey 对空列表的响应是 null 而不是 {}

> ID：12982199
> 
> 赞同：4
> 
> 时间：2012-10-19T20:45:11.553
> 
> 标签：rest, jersey

我有一个使用 Jersey 的 JAX-RS REST 服务。我使用 JAXB 进行 JSON 编组（即@XmlRootElement） 方法之一返回使用 JPA 持久化的对象列表。

当此列表包含条目时，它会按我的预期工作。例子：

```
{"androidDevice":[{"email":"dagfinn.parnas@d2.no","timeCreated":"2012-10-19T
22:41:26.862+02:00"},{"email":"dagfinn.parnas@d1.com","timeCreated":"2012-10-
19T22:41:38.093+02:00"}]} 
```

但是，如果列表为空（或 null），我希望它返回 {}。

相反，它返回 null。例子：

```
$ curl  -i -H "Accept: application/json" http://....
HTTP/1.1 200 OK
Content-Type: application/json

null 
```

这是代码

```
 @GET
@Produces( { MediaType.APPLICATION_JSON ,  MediaType.APPLICATION_XML})
public List<AndroidDevice> getAndroidDevices() {
    logger.info("getAndroidDevices method called");

    EntityManager entityManager = entityMangerFactory.createEntityManager();  
    List<AndroidDevice> resultList = entityManager.createNamedQuery(AndroidDevice.QUERY_ALL_ENTRIES,  
            AndroidDevice.class).getResultList();  

    //avoid returning content null. (doesn't work)
    if(resultList==null){
        resultList=new ArrayList<AndroidDevice>();
    }

    return resultList;
} 
```

有没有办法让 Jersey 返回一个空的 JSON 列表（除了硬编码一个 ResponseBuilder）？

我应该为此类事件提供不同的响应代码吗？

更新：通过 twitter 获得有关此错误报告的提示，其结论是他们不会修复它[http://java.net/jira/browse/JERSEY-339](http://java.net/jira/browse/JERSEY-339)

Update2：除了下面的解决方案之外，由于我使用的是应用程序进行配置（在 web.xml 中引用），因此我不得不在那里手动添加 Provider 类。这是相关的代码。

```
public class JAXRSApplication extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> set = new HashSet<Class<?>>();
        //Add all endpoints to this set
        set.add(AndroidDeviceEndpoint.class);
        //Add Providers
        set.add(JAXBContextResolver.class);
        return set;
    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T01:32:58.657

要实现更重要的 JSON 格式更改，您需要配置 Jersey JSON 处理器本身。可以在 JSONConfiguration 实例上设置各种配置选项。然后可以进一步使用该实例来创建 JSONConfigurated JSONJAXBContext，作为该区域的主要配置点。要将您的专用 JSONJAXBContext 传递给 Jersey，您最终需要实现一个 JAXBContext ContextResolver：

```
@Provider
public class JAXBContextResolver implements ContextResolver<JAXBContext> {
    private final JAXBContext context;
    private final Set<Class> types;
    private Class[] ctypes = { AndroidDevice.class}; //your pojo class
    public JAXBContextResolver() throws Exception {
        this.types = new HashSet(Arrays.asList(ctypes));
        this.context = new JSONJAXBContext(JSONConfiguration.natural().build(),
                ctypes); //json configuration
    }

    @Override
    public JAXBContext getContext(Class<?> objectType) {
        return (types.contains(objectType)) ? context : null;
    }
} 
```

详细信息请参阅[球衣官方文档](http://jersey.java.net/nonav/documentation/latest/json.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T00:39:22.920

当 restful 服务返回 null 时，我遇到了同样的问题。我所做的只是检查列表大小。如果列表的大小为 0，我使用以下内容：

```
return Response.ok("{}", req.getContentType()).status(Response.Status.OK); 
```

它在正文中返回“{}”。我的 restkit 客户现在对它很满意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-05T07:39:08.470

我遇到了同样的问题。在 Jersey 1.09 中，发送一个空数组，就像`null`正确写入一个填充数组一样。现在我使用 Jersey 1.19.4，在这个版本中，一个空数组被正确地写为`{}`.

# jquery - Javascript 按值对数组进行排序

> ID：12982201
> 
> 赞同：12
> 
> 时间：2012-10-19T20:45:20.160
> 
> 标签：jquery, arrays, sorting

我有一个 AJAX 调用返回 JSON，如...

```
{
  490: "A",
  675: "B",
  491: "C",
  520: "D",
  681: "E",
  679: "F",
  538: "G"    
} 
```

然后我将它附加到`select`使用：

```
var output = jQuery.parseJSON(data);

$.each(output, function(key, value) {
    $el.append($("<option></option>")
       .attr("value", key).text(value));
}); 
```

我想按值排序，所以输出`A,B,C,D...`就像现在一样，它只是按键的顺序读取。

**这是踢球者**- 似乎在 Firefox 中运行良好，而不是在 Chrome 中。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-19T20:54:09.943

首先将其转换为数组，对其进行排序，然后创建html。[jsfiddle](http://jsfiddle.net/R3eUX/)

```
var output = jQuery.parseJSON(data);
var temp = [];

$.each(output, function(key, value) {
    temp.push({v:value, k: key});
});
temp.sort(function(a,b){
   if(a.v > b.v){ return 1}
    if(a.v < b.v){ return -1}
      return 0;
});
$.each(temp, function(key, obj) {

$el.append($("<option></option>")
       .attr("value", obj.k).text(obj.v));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T20:48:28.807

无法对对象进行排序。尝试将您的 JSON 作为数组返回，以确保它保持在您返回它们的确切顺序中：

```
[
  {"id":490,"name":"A"},
  {"id":675,"name":"B"},
  {"id":491,"name":"C"},
  {"id":520,"name":"D"},
  {"id":681,"name":"E"},
  {"id":679,"name":"F"},
  {"id":538,"name":"G"}
] 
```

这是原始的小提琴：http: [//jsfiddle.net/82BSm/2/](http://jsfiddle.net/82BSm/2/)并更改为数组：http: [//jsfiddle.net/82BSm/1/](http://jsfiddle.net/82BSm/1/)

*根据 pst 的评论更新*

您当然可以通过将列名（“id”和“name”）与数据分开并使其成为数组数组来缩小 json 响应大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:02:10.543

这样的事情怎么样？

```
var output = jQuery.parseJSON(data);

var options = [];
$.each(output, function(key, value) {
    options.push(
        $("<option>").val(key).text(value)
    );
});

options.sort(function(a, b) {
    return a.text() > b.text();
}); 
```

# c# - 无法将参数值从字符串转换为小数？

> ID：12982208
> 
> 赞同：3
> 
> 时间：2012-10-19T20:45:41.393
> 
> 标签：c#, stored-procedures

我有一个这样的存储过程：

```
ALTER PROCEDURE [dbo].[usp_CSR_UpdateDailyCustomerWithLCDHistory]
    -- Add the parameters for the stored procedure here
    @person_id numeric(18, 0),
    @last_contact_date datetime,
    @source nvarchar(50),
    @callLogId int,
    @createdBy nvarchar(50)
AS
BEGIN...END 
```

在我的代码中，我将此存储过程称为：

```
public void UpdateDailyCustomerWithLCDHistory(string callerId, 
    int callLogId, string csrName)
{
    try
    {
        Database db = DatabaseFactory.CreateDatabase
           ("MarketingWriteConnectionString");
        DbCommand dbCommand = 
           db.GetStoredProcCommand("usp_CSR_UpdateDailyCustomerWithLCDHistory");
        dbCommand.CommandTimeout = AppSetting.Instance.GetCommandTimeout();

        db.AddInParameter(dbCommand, "person_id", DbType.Decimal, callerId);
        db.AddInParameter(dbCommand, "last_contact_date", DbType.Date,
            DateTime.Now.ToShortDateString());
        db.AddInParameter(dbCommand, "source", DbType.String, "CSR");
        db.AddInParameter(dbCommand, "callLogId", DbType.Int32, callLogId);
        db.AddInParameter(dbCommand, "createdBy", DbType.String, csrName);

        db.ExecuteNonQuery(dbCommand);
    }
} 
```

这是我的表结构：

```
CREATE TABLE [dbo].[tblDailyCustomerLastContactDateHistory](
    [person_id] [numeric](18, 0) NOT NULL,
    [source] [nvarchar](50) NOT NULL,
    [callLogId] [int] NULL,
    [createdBy] [nvarchar](50) NULL,
    [last_contact_date] [datetime] NOT NULL, 
```

部署应用程序后，出现错误

> *无法将参数值从字符串转换为小数*

很多时候，虽然不是一直。谁能告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:50:03.773

```
public void UpdateDailyCustomerWithLCDHistory(string callerId, int callLogId, string csrName)
{
    try
    {
        Database db = DatabaseFactory.CreateDatabase("MarketingWriteConnectionString");
        DbCommand dbCommand = db.GetStoredProcCommand("usp_CSR_UpdateDailyCustomerWithLCDHistory");
        dbCommand.CommandTimeout = AppSetting.Instance.GetCommandTimeout();

        db.AddInParameter(dbCommand, "person_id", DbType.Decimal, callerId); 
```

callId 是一个字符串，您需要在分配给值之前将其转换为小数。

您可以使用 Decimal.TryParse() 将字符串转换为十进制数。 [http://msdn.microsoft.com/en-us/library/system.decimal.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.decimal.tryparse.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:49:03.033

如果您需要数字标识符，我建议您使用`INT`Id 而不是（十进制）字段。`NUMERIC`除非您的 ID 为 1.2、1.3 等。

另外，请看一下`AddWithValue`- 您不必在 .NET 代码中指定类型。该框架将为您处理。

最后，如果`callerId`不是匹配类型，您应该更改它或至少转换它。

# css - 悬停时 :first-letter 的 CSS 过渡

> ID：12982213
> 
> 赞同：7
> 
> 时间：2012-10-19T20:46:00.067
> 
> 标签：css, css-transitions

我`:first-letter`用一些样式来定位徽标中的第一个字母。悬停时，此字母的颜色会发生变化。

我如何让这种颜色通过 CSS 过渡淡入？将转换属性添加到我的任何选择器似乎都不起作用。

小提琴：http: [//jsfiddle.net/alecrust/YCMMZ/](http://jsfiddle.net/alecrust/YCMMZ/)

**编辑：**显然 Firefox 4+ 是唯一支持伪元素转换的浏览器，但是即使在该浏览器中我也无法让上面的小提琴工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:17:50.680

由于浏览器支持不佳，解决此问题的最佳方法是将您的第一个字母包装在一个跨度中并为该跨度赋予一个类。

```
<header class="header">
    <h1 class="logo">
        <a href="index.html"><span class="transition">E</span>xample</a>
    </h1>
</header>​ 
```

我在这里更新了你的 jsfiddle 来演示：http: [//jsfiddle.net/YCMMZ/3/](http://jsfiddle.net/YCMMZ/3/)

# java - Eclipse 上的插件“移动 linux 运行时工具”

> ID：12982216
> 
> 赞同：1
> 
> 时间：2012-10-19T20:46:14.757
> 
> 标签：java, eclipse-plugin, gumstix

目前在 Gumstix Boards 上工作，我正在设置我的环境，并尝试在 Gumstix board 中上传我的代码。

我正在关注这个[wiki](http://wiki.gumstix.org/index.php?title=Eclipse_on_Gumstix_for_new_users)，并被告知要安装插件“移动 linux 运行时工具”。但是，当我在 Eclipse 中查找它时找不到这个插件（帮助 > 安装新软件...）。

你知道这个插件的等价物吗？

# vba - VBA 调试模式跳过

> ID：12982217
> 
> 赞同：7
> 
> 时间：2012-10-19T20:46:25.863
> 
> 标签：vba

我有以下代码：

```
Public Sub Test1
 Dim RC as myDll.Controller
 Set RC = New myDll.Controller

 RC.DoTask

 Debug.print "1"
 Debug.print "2"
 RC.DoOtherTask

 Msgbox "Help Me!"
End Sub 
```

当我使用调试模式并单步执行代码时，按下 F8 键，只要在 RC.DoTask 之后按下 F8，直到 msgbox 的所有代码都会执行。我的即时窗口有打印的行，rc.DoOtherTask 已经运行。

有没有人见过这个？

它是完全可重复的，但仅限于我正在使用的产品随附的 VBA 版本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T20:44:51.363

软件供应商回来说这是他们的编码问题。这与 VBA、VBA 编辑器等无关。

# asp.net - 跨度内文甚至不在同一页面中分配

> ID：12982223
> 
> 赞同：2
> 
> 时间：2012-10-19T20:46:40.277
> 
> 标签：asp.net, session, listview, html

实际上我必须从下面给出的购物车表中访问税收和总额，然后通过将这些值分配给它们的内部文本，将它们分配给 aspx 页面中的跨度，

我使用了断点并调试了我的代码，但问题太复杂了......->我看到通过在 bindtotal() 方法中的调试中将鼠标指向那里正确显示了内部文本（分配的文本），但是这个.aspx 页面上未显示的文本，，，我的意思是，即使分配了 aspx 页面上的跨度文本仍然是空的。为什么 ？？？？？？

**.aspx**

```
<b>subtotal:</b>
<span id="span_subtotal" runat="server"></span>                         
<br/>
<b>Total:</b>                           
<span id="span_granttotal" runat="server"></span> 
```

**。CS**

这些跨度的内部文本为空以运行以下代码............任何人都可以帮我解决这个问题????????

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {            
        if (Session["cart_table"] == null)
        {
            DataTable dt = new Spcart().GetCart();
            Session["cart_table"] = dt;                  
        }
        BindCartListView();            
    }
}

public void bindtotal(int tax, int total)
{
    int ptax = 0;
    ptax = ptax + tax;

    int subtotal = 0;
    subtotal = subtotal + total;

    int granttotal = 0;
    granttotal = granttotal + ptax +subtotal;

    ///////////setting innertext///////////////////////

    span_subtotal.InnerText = subtotal.ToString();
    span_granttotal.InnerText = granttotal.ToString();
}

public void BindCartListView()
{                        
    DataTable producttable = new BALCate().GetProductDeatils(int.Parse(Request.QueryString["pid"].ToString()));
    DataTable carttable = (DataTable)Session["cart_table"];
    DataRow cartrow;
    DataRow productrow;

        cartrow = carttable.NewRow();
        productrow = producttable.Rows[0];
        cartrow["Pid"] = productrow["pid"];
        cartrow["PImage"] = productrow["pimg_mid1"];
        cartrow["Pprice"] = productrow["pcost"];
        cartrow["Pqty"] = int.Parse(Request.QueryString["qty"].ToString());                
        cartrow["Pname"] = productrow["pname"];
        cartrow["ptax"] = productrow["ptax"];
        cartrow["Total"] = int.Parse(productrow["pcost"].ToString()) * int.Parse(cartrow["Pqty"].ToString());  

        carttable.Rows.Add(cartrow);        

        int tax=int.Parse(cartrow["Ptax"].ToString());
        int total = int.Parse(cartrow["Total"].ToString());
        bindtotal(tax, total);        

 ListView_Cart.DataSource = carttable;
 ListView_Cart.DataBind();
 Response.Redirect("ShoppingCart.aspx");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:48:32.527

`Response.Redirect("ShoppingCart.aspx");`这可能是您在方法结束时执行 a 的事实`BindCartListView()`。

我不知道您发布的代码来自哪个页面，但是您可以将值保存在 中`Session`，或将它们作为查询字符串发送，然后将其设置在后面的*ShoppingCart.aspx*代码中。

查询字符串伪代码：

```
Response.Redirect("ShoppingCart.aspx?subtotal=" + subtotal + "&granttotal=" + granttotal); 
```

*伪代码后面的ShoppingCart.aspx.cs*代码：

```
// Provided you have these span elements in ShoppingCart.aspx.
span_subtotal.InnerText = Request.QueryString["subtotal"];
span_granttotal.InnerText = Request.QueryString["granttotal"]; 
```

# php - PHP正则表达式查找模式但只替换一个字符

> ID：12982224
> 
> 赞同：4
> 
> 时间：2012-10-19T20:46:40.773
> 
> 标签：php, regex

我正在使用 xpdf pdf2text 将 PDF 转换为文本，它工作得很好，除了一件事：它将段落符号 (¶) 转换为数字 8。我需要找到一种方法来使用以下模式获取所有内容：

```
preg_match_all('/\b8\d{1,2}-/', 'text'); 
```

但只替换该模式中的“8”。我已经尝试将匹配项保存到一个数组中，但是如何将它们重新插入到它们所属的文本中？

理想情况下，段落标签会正确转换，但我尝试了几种不同的编码，但都没有成功；我认为一些pdf嵌入了字体。

关于如何仅替换该模式中的“8”的任何想法？我不能只替换所有 8，因为被引用的文章的页面或章节可能是 8；但该段落不存在 80 左右的危险（这就是为什么我在 8 之后检查数字的原因）。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T20:52:05.013

捕获组中的其余模式并将其放回原处：

```
$str = preg_replace('/\b8(\d{1,2}-)/', 'replacement$1', $str); 
```

# linux - 将数字每 80 行和一行 awk

> ID：12982233
> 
> 赞同：2
> 
> 时间：2012-10-19T20:47:12.873
> 
> 标签：linux, shell, unix, scripting, awk

我有一个非常大的文本文件，它是一个数字向量，我想将 80 行加在一起，将结果打印到一个新文件中，然后取第二个 81-160 行，将它们相加并在下一个打印结果新文件的行，依此类推，直到文件结束。

请注意，行数不一定是 80 的倍数，因此对于最后一行，我必须添加剩余的行。

是否可以使用 awk 或类似的编程语言在一行中快速完成此操作？

谢谢。

注2：文件如下所示：

```
3.456
3.4
6.788
9.342
... etc ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:13:23.727

另一个 awk 单线：

```
awk '{s+=$0;if( NR%80==0){print s-r;r=s}}END{if(s!=r)print s-r}' file 
```

使用**seq 21**和每**5**行测试：

```
kent$  seq 21|awk '{s+=$0;if(NR%5==0){print s-r;r=s}}END{if(s!=r)print s-r}' 
15
40
65
90
21 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T01:15:58.877

我能想到的最短的 awk 解决方案是这样的（如果打高尔夫球，则为 47 个字符）：

```
awk '{ s += $1 } NR % c == 0 { print s; s=0 } END { if(NR % c) print s }' c=80 
```

`s`累积总和。`s`每 80 行打印和重置总和。该`END`子句打印最终总和 if `NR % 80 != 0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T20:50:34.233

试试这个：

```
#!/bin/bash
awk 'BEGIN {c=0; tot=0};
    {
        tot=tot+$1;
        c++;
        if (c==80) {
            print tot;
            c=0
            tot=0
        }
    };
    END {print tot}' 
```

（经过测试并且有效）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T20:57:56.107

干净的输出版本：

```
 awk '{
    if ( NR%80 ){tot+=$0} 
    else{tot+=$0;print tot; tot=0}
   }
   END {if (NR%80 !=0 ) print tot}
 ' file > sumFile 
```

请注意，您可以将 80 更改为任何值。

调试版本

```
awk '{
   if ( NR%80 ){
       print "line="$0;tot+=$0} 
   else{
       print "2line="$0;
       tot+=$0;
       print "tot="tot; 
       tot=0
     }
   }
  END {
      if (NR%80!=0) print "2tot="tot
  }' file 
```

IHTH。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T21:48:14.963

这是一个 Perl 解决方案：

```
#!/usr/bin/perl

use strict;
use warnings;

open( my $fh,  '<', 'nums.txt' ) or die $!;
open( my $out, '>', 'res.txt' )  or die $!;

my $sum        = 0;
my $line_count = 1;

while (<$fh>) {
    $line_count++;
    chomp;
    $sum += $_;
    if ( $line_count == 80 or eof($fh) ) {
        print $out "$sum\n";
        $line_count = 0;
        $sum        = 0;
    }
}

close($fh);
close($out); 
```

文件名也由您决定。它将打印前 80 行的总和，然后依次打印下一个换行符。

# java - 关闭 Spring MVC 数据绑定器

> ID：12982237
> 
> 赞同：3
> 
> 时间：2012-10-19T20:47:28.703
> 
> 标签：java, spring, spring-mvc

关于stackoverflow的第一篇文章......我开始使用SpringMVC，我试图找出将我的实体链接到尽可能无状态的Web视图的最佳方法。

我发现的一种方法是在一个方法上使用@ModelAttribute，该方法在参数中（从请求中）接收实体 ID，该实体 ID 从服务/持久层中找到它，并将其返回，以便将其插入到当前请求。

此外，Spring MVC 绑定任何与我的实体字段匹配的传入参数并自动更新其值（通过 WebDataBinder）。

我的问题是关于最后一种行为。我发现当客户发布一些数据时更新我的​​实体很有用。但我想在一个简单的 GET 请求（我认为它是只读的）上避免它。当前行为将允许通过在此类请求的查询中添加参数来更新实体，这可能是一个安全问题。

我知道 dataBinder.setAllowedFields() 和其他东西，但我更喜欢一种方法来禁用任何类型的字段映射任何 GET 请求。有什么办法吗？

谢谢！

编辑：我添加了一个示例原型，以使其更清楚我在寻找什么......

```
@ModelAttribute Entity retrieveEntity(@RequestParam(required=true) Long id) {
    // This is called before the request handler and before parameters are mapped to the entity
    return entityRepository.get(id);
}

@RequestMapping(value="/modify", method=RequestMethod.POST) 
public ModelAndView handleModifyRequest(@ModelAttribute Entity entity) {
    // Here, I want my entity to reflect the parameters passed in the posted form (this works)
    ....
}

@RequestMapping(value="/read", method=RequestMethod.GET) 
public ModelAndView handleReadRequest(@ModelAttribute Entity entity) {
    // Here, I DON'T want my entity to reflect the parameters passed in the URL (which is what happens...)
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:38:12.637

最后，我决定采用这样的方法，因为似乎只有在请求处理程序方法采用 ModelAttribute 参数时才会发生参数映射

```
@ModelAttribute Entity retrieveEntity(@RequestParam(required=true) Long id) {
    return entityRepository.get(id);
}

@RequestMapping(value="/modify", method=RequestMethod.POST) 
public ModelAndView handleModifyRequest(@ModelAttribute Entity entity) {
    // Here, the request parameters have been mapped to the entity
    ....
}

@RequestMapping(value="/read", method=RequestMethod.GET) 
public ModelAndView handleReadRequest(ModelMap model) {
    // This will avoid any parameter mapping to the entity
    Entity entity = (Entity)model.get("entity");
    ....
} 
```

欢迎任何更好的解决方案！谢谢

# python - python中的解包错误

> ID：12982240
> 
> 赞同：0
> 
> 时间：2012-10-19T20:47:45.753
> 
> 标签：python, python-2.7, iterable-unpacking

我正在制作一个脚本，我需要这样做：

```
for ip, location, zone, dns in data: 
```

但我得到这个错误：

```
ValueError: need more than 3 values to unpack 
```

`data`是这样构建的：

```
def loadfile():
    nativeFile = open("Zonechilds.csv","r")
    newLine=" "
    data=[]
    while newLine!="":
        newLine=nativeFile.readline()
        if len(newLine)>0:
            if newLine[len(newLine)-1]=="\n":
                newLine=newLine[0:len(newLine)-1]
        data.append(tuple(newLine.split(";")))
    ultimo = data.pop()
    return data 
```

csv文件的一个小样本：

`200.35.126.30;dnscan01.mnc0004.mcc02de.gprs;View_Blackberry;DNSCAN01 0.0.0.0;lac.rac.prueba;View_Blackberry;DNSCAN01 200.35.126.29;dnscan02.mnc0004.mcc02de.gprs;View_Blackberry;DNSCAN01 127.0.0.1;localhost.mnc0004.mcc02de.gprs;View_Blackberry;DNSCAN01`

当我做：

```
for i in data:  
    print len(i) 
```

我只得到 4 个，我可以假设我的列表数据的任何位置都是 4 个成员列表。

我不明白为什么它告诉我它需要超过 3 个成员，而我给它 4 个。

这段代码发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:03:38.520

如果 data 的所有成员都是 4 成员元组或 4 成员列表，并且您没有在 for 循环期间修改 data 中的任何后续列表，那么我很确定您不可能得到这个从数据中解包元素时出现异常。

我能看到的两个最有可能的解释：

1）您对引发异常的位置有误。它发生在你的 for 循环中的某个地方，而不是在分配 ip、位置、区域和 dns 时。检查您的堆栈跟踪并确保行号确实与 for 循环的顶部匹配。

2）在数据的某处有一个鬼鬼祟祟的 3 成员元组或列表。你真的，真的确定不是这样吗？all([len(i) == 4 for i in data]) 是真的吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T21:06:55.463

另外：这是在 Python 中读取 csv 数据的错误方法——改用`csv`模块。您的整个代码如下所示：

```
import csv

with open("zonechilds.csv", "rb") as fp:
    reader = csv.reader(fp, delimiter=";")
    data = [tuple(line) for line in reader] 
```

产生

```
>>> for ip, location, zone, dns in data:
...     print ip, location, zone, dns
... 
200.35.126.30 dnscan01.mnc0004.mcc02de.gprs View_Blackberry DNSCAN01
0.0.0.0 lac.rac.prueba View_Blackberry DNSCAN01
200.35.126.29 dnscan02.mnc0004.mcc02de.gprs View_Blackberry DNSCAN01 
127.0.0.1 localhost.mnc0004.mcc02de.gprs View_Blackberry DNSCAN01 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:05:54.220

您的文件可能没有像您想象的那样格式化。里面必须有一些 3 元素元组。

`data`您可以在迭代时检查打印出整个或每个元素的内容，例如：

```
for elem in data:
    print(elem)
    ip, location, zone, dns = elem
    #do stuff 
```

这使您可以查看导致错误的原因。

顺便说一句，您的代码可以写得更好，例如：

```
def loadfile():
    native_file = open("Zonechilds.csv","r")
    data = [line.strip('\n').split(';') for line in native_file]
    ultimo = data.pop()
    native_file.close()
    return data 
```

（实际上，我之所以写这个答案，是因为最后一个关于代码风格的建议，而不是我认为很容易验证的错误假设的其余问题）

# backbone.js - Backbone.js 将 XML 加载到 Backbone.Model 并在视图中显示

> ID：12982241
> 
> 赞同：0
> 
> 时间：2012-10-19T20:47:46.280
> 
> 标签：backbone.js, backbone-views

我正在尝试制作一些非标准的主干应用程序，在集线器下使用 requery.js 结构我从我的集合中的 XML 加载数据，并尝试在视图页面上显示它。

```
define([
  'jquery',
  'underscore',
  'backbone',
  'models/products'
], function($, _, Backbone, ProductsModel){
  var ProductsCollection = Backbone.Collection.extend({
    model: ProductsModel,
    url: "Labels.xml",
    parse: function(data) {
    var parsed=[];
    $(data).find('item').each(function (index) {
        var productNode = $(this).attr('nodeID');
        var productNodeValue = $(this).text();
        parsed.push({ title: productNode, value: productNodeValue });
    });
    return parsed;
},

fetch: function(options) {
    options || (options = {});
    options.dataType="xml";
    Backbone.Collection.prototype.fetch.call(this, options);
},
initialize: function(){
}

  });

  return ProductsCollection;
}); 
```

这是一个集合，到目前为止它充满了来自 XML 的数据，但我想在页面上显示它.. 视图看起来像这样

```
define([
  'jquery',
  'underscore',
  'backbone',
  // Pull in the Collection module from above
  'collections/products',
  'text!templates/products/main.html'

 ], function($, _, Backbone, ProductsCollection, productsListTemplate){
  var productsListView = Backbone.View.extend({
    el: $("#page"),
    render: function(){
      var data = {
        productDetails: this.collection,
        _: _ 
      };
      var compiledTemplate = _.template( productsListTemplate, data );
      this.$el.html( compiledTemplate ); 
    },  
    initialize: function(){
      this.collection = new ProductsCollection();
      this.collection = this.collection.fetch();
    }
  });
   return productsListView;
}); 
```

在页面上我尝试展示它

```
<ul>
  <% _.each(productDetails, function(project){ %>
   <li><%= product.get("title") %> - <%= product.get("value") %></li> 
  <% }); %>
</ul> 
```

但我总是收到错误 _each 格式不正确。主要思想是从 XML 加载标签和按钮事件并将其显示在页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:07:24.460

你想传递给你的模板 `this.collection.models`不仅仅是`this.collection`

```
var data = {
  productDetails: this.collection.models,
  _: _ 
}; 
```

因为您使用的是 Underscore 而不是 Backbone。循环的主干方式是

```
Books.each(function(book) {
   book.publish();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T20:31:35.397

我不知道您是否仍然遇到此问题，但您的代码中有错误：

`<ul> <% _.each(productDetails, function(project){ %> <li><%= product.get("title") %> - <%= product.get("value") %></li> <% }); %> </ul>`

应该：

`<ul> <% _.each(productDetails, function(product){ %> <li><%= product.get("title") %> - <%= product.get("value") %></li> <% }); %> </ul>`

# php - 如何在php中重新组合两个json文件并过滤新文件上的重复内容？

> ID：12982242
> 
> 赞同：1
> 
> 时间：2012-10-19T20:47:50.850
> 
> 标签：php, json, offset, array-merge

我正在尝试重新组合/推送一个名为`$new_datas`分配给一个 json 文件的数组，并`$old_datas`分配给另一个 json 文件。

我试图合并这两者，但由于外部 Api 上的每个请求的拉/拉限制为 100 个项目，有时当我使用此 Api 的偏移量时，最终的 json 文件中存在一些重复的内容。我尝试在推送 $new_datas 之前取消设置该值，但目前重复的内容已经存在。

做这个的最好方式是什么？我只是一个爱好者，目前不是专业人士，所以我一个月前才开始学习。在此先感谢您的帮助

有我的代码

```
 //Offset twitch

    $next_offset = get_option('mmob_next_offset');

        //First run
        if(!$next_offset)
        {
            $next_offset = '0';
        }

        $query_api_link_twitch = 'http://api.justin.tv/api/stream/list.json?limit=99&category=gaming&offset='.$next_offset.''; // /!\ json

        //Get all contents
        $datas_get_twitch = file_get_contents($query_api_link_twitch);

        if(!empty($datas_get_twitch))
        {
            $new_datas_twitch = json_decode($datas_get_twitch);
            $old_datas_twitch = json_decode(file_get_contents($cache_target . 'twitch.json'));

            $olds = array();

                    //I have tried this function before the array_merge but don't work
                    //I try to compare the 2nd value from the key "name" because it's the only one "unique"
            foreach($old_datas_twitch as $key => $value)
            {
                //var_dump($value);

                $olds[] = $value->name;

                //var_dump($name);

                foreach($new_datas_twitch as $k => $v)
                {
                    $new = $v->name;

                    if(in_array($new, $olds))
                    {
                        unset($old_datas_twitch->$key);
                    }
                }
            }

            //Merge, put, close
            $twitch_new_build = array_merge((array)$old_datas_twitch, (array)$new_datas_twitch);
            $datas_push_twitch = file_put_contents($cache_target . 'twitch.json', json_encode($twitch_new_build));

            update_option('mmob_next_offset', $next_offset + 100);

if(!file_exists($cache_target . 'twitch.json') || !is_writable($cache_target . 'twitch.json'))
        {
            $email = false;

            $last_known_day = (int)date('d', get_option('mmob_email_date_twitch'));
            $current_day = (int)date('d', time());

            //Cron run every 2 minutes...
            if($current_day > $last_known_day)
            {
                $email = true;
            }

            update_option('mmob_email_date_twitch', time());
        }
    }
    else
    {
        update_option('mmob_next_offset', '0');
    } 
```

有 var_dump

```
object(stdClass)[2533]
  public 'embed_count' => string '0' (length=1)
  public 'name' => string 'live_user_lunaticoldschool' (length=26)
  public 'stream_count' => string '1' (length=1)
  public 'subcategory' => string 'strategy' (length=8)
  public 'category' => string 'gaming' (length=6)
  public 'format' => string 'live' (length=4)
  public 'channel_count' => int 1
  public 'title' => string '"LuNaTiC Teh Macro Zerg" HD Streaming StarCraft 2 EU-Server playing Zerg [Season 4 - 2012 @ Gold League, Some Fun Random Team Games Also]  ' (length=139)
  public 'featured' => boolean true
  public 'site_count' => string '1' (length=1)
  public 'abuse_reported' => boolean false
  public 'channel' => 
    object(stdClass)[2534]
      public 'embed_enabled' => boolean true
      public 'language' => string 'en' (length=2)
      public 'views_count' => string '771554' (length=6)
      public 'embed_code' => string '    <object type="application/x-shockwave-flash" height="295" width="353" id="live_embed_player_flash" data="http://www.justin.tv/widgets/live_embed_player.swf?channel=lunaticoldschool" bgcolor="#000000"><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://www.justin.tv/widgets/live_embed_player.swf" /><param name="flashvars" value="auto_play=false&channel=lunaticoldschool&start_volume=25" /></object>
' (length=480)
      public 'screen_cap_url_small' => string 'http://static-cdn.jtvnw.net/previews/live_user_lunaticoldschool-70x53.jpg' (length=73)
      public 'subcategory' => string 'strategy' (length=8)
      public 'category' => string 'gaming' (length=6)
      public 'status' => string '"LuNaTiC Teh Macro Zerg" HD Streaming StarCraft 2 EU-Server playing Zerg [Season 4 - 2012 @ Gold League, Some Fun Random Team Games Also]  ' (length=139)
      public 'image_url_huge' => string 'http://static-cdn.jtvnw.net/jtv_user_pictures/lunaticoldschool-profile_image-c283f71a8088b0a3-600x600.jpeg' (length=106)
      public 'mature' => boolean false
      public 'producer' => boolean true
      public 'image_url_tiny' => string 'http://static-cdn.jtvnw.net/jtv_user_pictures/lunaticoldschool-profile_image-c283f71a8088b0a3-50x50.jpeg' (length=104)
      public 'title' => string 'LuNaTiC Teh Macro Zerg ' (length=23)
      public 'image_url_large' => string 'http://static-cdn.jtvnw.net/jtv_user_pictures/lunaticoldschool-profile_image-c283f71a8088b0a3-300x300.jpeg' (length=106)
      public 'category_title' => string 'Gaming' (length=6)
      public 'id' => int 19437762
      public 'screen_cap_url_huge' => string 'http://static-cdn.jtvnw.net/previews/live_user_lunaticoldschool-630x473.jpg' (length=75)
      public 'image_url_small' => string 'http://static-cdn.jtvnw.net/jtv_user_pictures/lunaticoldschool-profile_image-c283f71a8088b0a3-70x70.jpeg' (length=104)
      public 'image_url_medium' => string 'http://static-cdn.jtvnw.net/jtv_user_pictures/lunaticoldschool-profile_image-c283f71a8088b0a3-150x150.jpeg' (length=106)
      public 'timezone' => string 'Europe/Athens' (length=13)
      public 'subcategory_title' => string 'Strategy' (length=8)
      public 'screen_cap_url_large' => string 'http://static-cdn.jtvnw.net/previews/live_user_lunaticoldschool-320x240.jpg' (length=75)
      public 'channel_url' => string 'http://www.justin.tv/lunaticoldschool' (length=37)
      public 'tags' => null
      public 'login' => string 'lunaticoldschool' (length=16)
      public 'screen_cap_url_medium' => string 'http://static-cdn.jtvnw.net/previews/live_user_lunaticoldschool-150x113.jpg' (length=75)
  public 'video_height' => int 720
  public 'language' => string 'en' (length=2)
  public 'video_bitrate' => float 309.2265625
  public 'id' => string '4010553696' (length=10)
  public 'meta_game' => string 'StarCraft II: Wings of Liberty' (length=30)
  public 'broadcaster' => string 'fme' (length=3)
  public 'broadcast_part' => int 1
  public 'audio_codec' => string 'aac' (length=3)
  public 'up_time' => string 'Fri Oct 19 06:18:15 2012' (length=24)
  public 'video_width' => int 1280
  public 'geo' => string 'GR' (length=2)
  public 'channel_view_count' => int 771541
  public 'channel_subscription' => boolean false
  public 'embed_enabled' => boolean true
  public 'stream_type' => string 'live' (length=4)
  public 'video_codec' => string 'AVC' (length=3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:50:14.480

您要做的是从两个集合（或者可能是列表，但我的猜测是集合）创建一个集合。为此，您需要确定唯一 ID 将是什么。

在我的第一个示例中，unique_id 只是被传递对象的键。在我的第二个示例中，它是通过连接项目中的多个字段创建的字符串。

还有一个可能的第三个示例，它采用示例 2 中使用的 unique_id 创建和示例 1 中使用的覆盖功能，但这将返回一个由您的 unique_id 键入的数组，因此可能不需要。

**示例一：覆盖键控数组**

```
function example_one_overwrite($old, $new){
    //THIS METHOD ASSUMES THAT KEY IS YOUR UNIQUE ID AND THAT YOU WANT A KEYED ARRAY RETURNED
    $unique = array();

    //DATA THAT MIGHT BE POSSIBLY OVERWRITTEN
    foreach($old as $key=>$item){
        $unique[$key] = $item;
    }

    //DATA THAT MIGHT POSSIBLY OVERWRITE OLD DATA
    foreach($new as $key=>$item){
        $unique[$key] = $item;
    }

    return $unique;
} 
```

**示例二：单次写入数组，数字键**

```
function example_two_singlewrite($old, $new){

    //This method assumes you want a numeric array when you are done, not an associative one. 

    $unique = array();
    $used_unique_ids = array();

    //KEEP DATA
    foreach($new as $item){

        //I have this set to $item->name cause I don't know what you want to use to consider something unique
        //But another example might be $unique_id = $item->name.'-'.$item->format;

        $unique_id = $item->name;

        if(!isset($used_unique_ids[$unique_id])){
            $used_unique_ids[$unique_id] = "used";
            $unique[] = $item;
        }
    }

    //DATA TO KEEP ONLY IF IT WAS NOT IN THE OTHER LIST
    foreach($list as $item){

        $unique_id = $item->name;

        if(!isset($used_unique_ids[$unique_id])){
            $used_unique_ids[$unique_id] = "used";
            $unique[] = $item;
        }
    }

    return $unique;
} 
```

**如何在您的代码中使用这些示例**

```
//NOTE: I'm not sure if you need the $key in your result, if so mod the example_two_singlewrite function.

//STARTING AFTER $old_datas_twitch = json_decode...
//REPLACE ALL CODE TILL $datas_push_twitch = file_put... WITH
$twitch_new_build = example_two_singlewrite($old_datas_twitch , $new_datas_twitch);

//ADD FUNCTION example_two_singlewrite to your file 
```

# android - AndEngine-在其父级后面绘制精灵的子级

> ID：12982247
> 
> 赞同：5
> 
> 时间：2012-10-19T20:48:34.563
> 
> 标签：android, z-index, sprite, andengine

我正在尝试将一个精灵附加到另一个精灵并将其附加在其父级后面。

这通常很容易，我以前在我的代码中就有过它——但由于某种原因，有一次它不起作用。

该过程通常是将父级的 Z 索引设置为某个数字，并为其子级分配较低的 Z 索引。这是`rect`父级的代码，`icon`并附加到它；两者都附加到父实体。然后我`sortChildren()`在所有东西（矩形、父实体，甚至场景本身）上都尝试了该方法；我知道这效率不高，但我只是想看看是否有什么流行起来。它没有。`icon`仍在绘制中`rect`：

```
for (int i=0; i<levelsList.size(); i++) {
    rect = new Sprite(i*(width+padding), 
                      0, 
                      width, 
                      height, 
                      levelSelectorSquareRed, 
                      this.getVertexBufferObjectManager());
    icon = new Sprite((rect.getWidth()-innerWidth)/2f, 
                      (rect.getHeight()-innerHeight)/2f, 
                      innerWidth,
                      innerHeight, 
                      levelIcons.get(i), 
                      this.getVertexBufferObjectManager());
    rect.setZIndex(1);
    icon.setZIndex(0);
    rect.attachChild(icon);
    rect.sortChildren();
    levelSquares.attachChild(rect);
}

levelSquares.setPosition(0, (CAMERA_HEIGHT-height)/2f);
levelSquares.sortChildren();
levelSelectorScene.attachChild(levelSquares);
levelSelectorScene.sortChildren(); 
```

从逻辑上讲，这应该是矫枉过正并让它工作，但它不是/我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T21:06:27.443

有一些神奇的东西`SO`。我可以在一个问题上陷入困境，最后放弃并在这个网站上提问。几分钟之内，问题就轻松解决了。

解决方案：

号`Children`in`AndEngine GLES2`不能被画在他们的后面`parents`。但！您可以不将`child`精灵附加到父精灵，而是将两者都附加到实体，给它们 Z 索引，然后对实体进行排序。

```
levelSquares.attachChild(rect);
levelSquares.attachChild(icon);
rect.setZIndex(1);
icon.setZIndex(0);
levelSquares.sortChildren(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T20:25:14.160

如果您使用的是 AndEngine GLES2，这很容易：在附加孩子之后，只需将其 Z-Index 设置为负值。

# php - 使用 PHP 存储和返回表单数据的最佳实践

> ID：12982249
> 
> 赞同：1
> 
> 时间：2012-10-19T20:48:47.017
> 
> 标签：php, html, forms, session, post

可能重复：

嘿，我正在构建一个表单，用于查询 API 并过滤一些搜索结果。这些数据都没有存储在文本文件或数据库中。

表单提交自然会刷新页面，表单值默认为我在编写 HTML 时指定的原生选择选项。我希望存储用户提交的值，并在页面重新加载和过滤的选择加载后将这些值作为表单中的选定选项。实现这一目标的最佳解决方案是什么？会话，还是查询 POST 数组？

自然地，我做了几次谷歌搜索，但所有与数据库或文本文件相关的内容都不适用。

我当前的表单代码：

```
<form method="post" action="">
  <label>Year</label>
  <select class="minYear" name="minimuimYearFilter">
    <?php 
    $vehicleYear = date("Y") + 1;
    for ($i = 1993; $i <= $vehicleYear; $i++) {
        echo "<option value=".$i.">".$i."</option>";
    }
    ?>
  </select>
  To:
  <select class="maxYear" name="maximumYearFilter">
    <?php 
    for ($i = 1993; $i <= $vehicleYear; $i++) {
      if ($i == $vehicleYear) {
        echo "<option value=".$i." selected>".$i."</option>"; 
      } else {
        echo "<option value=".$i.">".$i."</option>";
      }
    }
    ?>
  </select>
  <label for="priceFilter">Price</label>
  <select class="priceFilter" name="priceFilter">
    <?php 
    for ($i = 1000; $i <= 50000; $i=$i+1000) {
      if ($i == 50000) {
        echo "<option value=".$i.">$".$i."+</option>";
      } elseif ($i == 20000) {
        echo "<option value=".$i." selected>$".$i."</option>";
      } else {
        echo "<option value=".$i.">$".$i."</option>";
      }
    }
    ?>
  </select>
  <label for="mileageFilter">Mileage</label>
  <select class="mileageFilter" name="mileageFilter">
    <?php 
    for ($i = 5000; $i <= 100000; $i=$i+5000) {
      if ($i == 100000) {
        echo "<option value=".$i.">".$i."+</option>";
      } elseif ($i == 75000) {
        echo "<option value=".$i." selected>".$i."</option>";
      } else {
        echo "<option value=".$i.">".$i."</option>";
      }
    }
    ?>
  </select>
  <input type="submit" value="Submit">
</form> 
```

大家好，开个会，然后周末出城 wifi 以外的地方，周一会尽快赶上。感谢迄今为止所有的好评！等不及要回来试试这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:54:50.877

如果您的意思是在页面之间传递数据 - 您应该阅读此问题的最佳答案：

[PHP 将变量传递到下一页](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

在此之后 - 阅读更多关于 PHP 会话的信息。Session 是“记住应用程序状态”的最佳机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:01:43.440

首先在首页设置会话：

```
session_start(); 
```

例如，如果 $_POST 被发送而不是在会话中设置：

```
if (isset($_POST['vehicle_selected']))
{
    $_SESSION['vehicle_selected'] = $_POST['vehicle_selected'];
}
else
{
    $_SESSION['vehicle_selected'] = ''; 
} 
```

在 HTML 表单中添加这个值：

```
value="<?=$_SESSION['vehicle_selected']; ?>"; 
```

或完整示例：

```
<?php

session_start();

if (isset($_POST['vehicle_selected']))
{
    $_SESSION['vehicle_selected'] = $_POST['vehicle_selected'];
}
else
{
    $_SESSION['vehicle_selected'] = ''; 
}

?>

    <form method="post" action="">
      <label>Year</label>
      <select class="minYear" name="minimuimYearFilter">
        <?php 
        $vehicleYear = date("Y") + 1;
        for ($i = 1993; $i <= $vehicleYear; $i++) {
        echo "<option value=".$_SESSION['vehicle_selected'].">".$_SESSION['vehicle_selected']."</option>";
        }
        ?>
      </select>
    .... 
```

另一个词（不是答案，但出于安全目的推荐）：

使用 REQUEST 方法可以比 POST 更简单的攻击，而不是 REQUEST ($_GET,$_POST) 只使用 $_GET。如果您想要更安全地探索 Stackoverflow 中 PHP 的 CSRF 保护。但这只是为了安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T20:55:25.443

您正在使用选择框这一事实使这变得更加困难，但一般的想法是使用`$_REQUEST`数组中每个选择框的值来决定哪个选项获得选定的属性。

这些方面的东西：

```
for ($i = 1993; $i <= $vehicleYear; $i++) {
    echo "<option value='".$i."'".(($_REQUEST['minimuimYearFilter']==$i)?"selected":"").">".$i."</option>";
} 
```

这个想法是，先前选择的选项获得一个 selected 属性，使其成为默认选择值。

这应该是开箱即用的，至少在我的示例中，原因是如果没有选择任何值，它们都不会获得选定的属性，而顶部的属性是默认值。如果您还想要“第一次”选择的选项，只需检测 $_REQUEST['whatever'] 是否返回任何内容，如果没有将其值设置为您想要选择的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T20:53:24.127

使用 cookie。PHP 手册页`setcookies()`非常不言自明： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T20:56:36.870

我会使用 POST 数组。如果您不使用跨多个页面的输入，会话只会添加一个不必要的步骤。

```
$value = (isset($_POST['some_option']) ? $_POST['some_option'] : "";
?>

<select selected="<?php echo $value; ?>"> 
```

或者

```
<input value="<?php echo $value; ?>"/> 
```

# c - 计算整数中数字的出现次数

> ID：12982254
> 
> 赞同：0
> 
> 时间：2012-10-19T20:49:08.333
> 
> 标签：c, function

我想计算某个数字在整数中出现的频率。我有以下代码：

```
int main()
{
    printf ("Put numbers\n");

    int cislo;
    int s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;

    while(scanf("%d",&cislo)==1){
        if (cislo<0)
            printf ("Cislo %d, je zaporne, takove neberu", cislo);
        continue;
    }

    s0=s1=s2=s3=s4=s5=s6=s7=s8=s9=0;
    do{
        (cislo/=10);
        switch (cislo%10){
            case 0: ++s0; break;
            case 1: ++s1; break;
            case 2: ++s2; break;
            case 3: ++s3; break;
            case 4: ++s4; break;
            case 5: ++s5; break;
            case 6: ++s6; break;
            case 7: ++s7; break;
            case 8: ++s8; break;
            case 9: ++s9; break;
        }
    }while (cislo>0);

    printf ("Zadane cislo se sklada z cislic: \n\n 0 ... %dx \n 1 ... %dx \n 2 ... %dx \n 3 ... %dx \n 4 ... %dx \n 5 ... %dx \n 6 ... %dx \n 7 ... %dx \n 8 ... %dx \n 9 ... %dx \n",s0,s1,s2,s3,s4,s5,s6,s7,s8,s9);

    return 0;
} 
```

它必须如何工作：

```
放号：
1111111111

电话：1111111111

包括：
0 ... 0x
1 ... 10 倍
2 ... 0x
3 ... 0x
4 ... 0x
5 ... 0x
6 ... 0x
7 ... 0x
8 ... 0x
9 ... 0x

```

它实际上是如何工作的：

```
放号：
1111111111

电话：1111111111

包括：
0 ... 1x
1 ... 9 倍
2 ... 0x
3 ... 0x
4 ... 0x
5 ... 0x
6 ... 0x
7 ... 0x
8 ... 0x
9 ... 0x

```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:57:02.113

取后除数`mod`：

```
 do{
    switch (cislo%10){
    case 0: ++s0; break;
    case 1: ++s1; break;
    case 2: ++s2; break;
    case 3: ++s3; break;
    case 4: ++s4; break;
    case 5: ++s5; break;
    case 6: ++s6; break;
    case 7: ++s7; break;
    case 8: ++s8; break;
    case 9: ++s9; break;
    }
    cislo/=10;
 }while (cislo>0); 
```

因此，您在计数时会丢失一位数。

你的输入法不是很好。因为，您只想接收一个整数：

```
while(scanf("%d",&cislo)!=1){ 
```

更合适。

您还可以使用数组`s[10]`而不是 10 个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:59:14.140

更改`do`/`while`循环：

```
do {
    int nextval = cislo / 10;

    switch (cislo - (nextval*10)) {
        case 0: ++s0; break;
        case 1: ++s1; break;
        case 2: ++s2; break;
        case 3: ++s3; break;
        case 4: ++s4; break;
        case 5: ++s5; break;
        case 6: ++s6; break;
        case 7: ++s7; break;
        case 8: ++s8; break;
        case 9: ++s9; break;
    }

    cislo = nextval;
} while (cislo>0); 
```

# c++ - 我可以解决“重建”以加载调试器吗？

> ID：12982255
> 
> 赞同：1
> 
> 时间：2012-10-19T20:49:14.450
> 
> 标签：c++, visual-studio-2008

我在 xp 中运行 vs08 试图测试我已经研究了一段时间的 c++ 解决方案。

该解决方案由几个项目组成，其中两个我正在处理分别包含服务器和客户端。我构建服务器和客户端项目的调试实例来测试它们之间发送的自定义消息。

如果我“重建”（清理+构建）整个项目，而不仅仅是“构建”，调试器只能加载已编辑头文件（主要使用模板）的调试信息。如果我尝试“构建”然后调试项目，则头文件中的所有断点都无法访问，并且我收到警告：

> “此断点当前不会被命中。没有可执行代码与此行关联。”

但是，如果我“重建”整个项目，调试器就会工作。

我查看了“解决方案属性 > 通用属性 > 调试源文件”，并确保“不查找这些源文件”部分为空白。

我只想“构建”每个项目（小代码更改之间的操作要短得多）来调试。(1) 我可以更改 Visual Studio 中的哪些设置？

请注意，我使用“build”和“rebuild”来引用 Visual Studio 中的功能。我对这些的理解是“重建”删除了.pdb（程序调试数据库）和相关的调试文件，然后生成所需的文件，而“构建”只修改与新代码更改相关的调试文件。（2）我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:52:06.543

我不是 Visual Studio 方面的专家，但您的问题的原因很可能是因为在编译期间未重新构建特定的源文件。如果自上次构建项目以来您没有对刚刚添加断点的源文件进行任何更改，那么这次将不会重新构建它。

重建工作，因为它清理所有目标文件，然后从头开始构建项目。

要解决此问题，您可以尝试修改您特别要重建的源文件，或者只是从构建目录中删除其目标文件。

# oop - 抽象数据类型和对象之间的区别

> ID：12982257
> 
> 赞同：4
> 
> 时间：2012-10-19T20:49:22.820
> 
> 标签：oop, language-agnostic, abstract-data-type

在阅读了这篇文章[OOP vs ADT](http://www.cs.utexas.edu/~wcook/papers/OOPvsADT/CookOOPvsADT90.pdf)之后，我还不太了解 ADT 到底是什么以及它与接口概念的关系。谁能用一些代码示例来解释这些概念之间的区别（Java 或 Scala 会很棒）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:51:01.303

抽象数据类型（ADT）是具有相似行为的某一类数据结构的数学模型；或者对于具有相似语义的一种或多种编程语言的某些数据类型。抽象数据类型是间接定义的，仅由可能对其执行的操作和对效果的数学约束来定义。抽象数据类型不一定是 OOP 概念。这是一个较旧的术语，用于描述例如 Stack 和 Queue 的功能，而不描述实现。

来自链接：- [AbstractDataTypes](http://en.wikipedia.org/wiki/Abstract_data_type)

一个对象是一个类的一个实例

# java - 将 Java 中的标签设置为图像格式问题

> ID：12982264
> 
> 赞同：1
> 
> 时间：2012-10-19T20:49:59.480
> 
> 标签：java, swing, image-processing, jlabel, bmp

我正在尝试将 java 程序中的标签设置为图像。但是，它似乎不适用于 .bmp 图像

我正在寻找一个转换器，它允许我将图像从 .bmp 转换为具有相同文件名的 .jpg。这个转换器需要由java程序控制，其中有需要转换的图像的名称和位置。

任何帮助都将不胜感激，因为我已经为此花费了数小时：P

谢谢

*编辑：该程序需要能够与该程序一起打包，以便它可以在多台计算机上运行（即不能是我安装到我的计算机上的东西）。我希望找到一个 .exe 接收图像文件名作为参数并将其转换为 .jpg

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T20:55:30.457

像这样使用[`ImageIO#read`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageIO.html)（java 1.4 及更高版本）：

```
ImageIcon icon = new ImageIcon(ImageIO.read(filename));

JLabel label = new JLabel(icon); 
```

对于 Java 1.4 以下的任何内容，请使用[image4j](http://sourceforge.net/projects/image4j/files/image4j-core/)

**更新：**

这是我做的一个例子：

![在此处输入图像描述](../Images/b33071e2ee74ab1160bf5e1305466bbb.png)

```
import java.awt.Dimension;
import java.awt.Image;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class JLabelBmpTest {

    public JLabelBmpTest() throws  MalformedURLException, IOException {
        initComponents();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new JLabelBmpTest();
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
    }

    private void initComponents() throws MalformedURLException, IOException {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Image background = ImageIO.read(new URL("http://www.3drealms.com/zerohour/images/zhbackground.bmp"));
        final ImageIcon ii = new ImageIcon(background);

        frame.add(new JLabel(ii) {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(ii.getIconWidth(), ii.getIconHeight());

            }
        });

        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

**参考：**

*   [在 JLabel 中显示 BMP](https://stackoverflow.com/questions/593830/display-bmp-in-jlabel)

# qt - 动态更改标签文本 QML

> ID：12982268
> 
> 赞同：3
> 
> 时间：2012-10-19T20:50:14.250
> 
> 标签：qt, qml, blackberry-10

这是任何语言中最愚蠢的事情，但我坚持如何在 QML 中做到这一点。

如何更改 QML 中标签的文本值？我错过了什么。。

我的代码如下：

```
Container {
  objectName: "formContainer"
  id: formContainer

  property alias text1: labelTest.text

  onCreationCompleted: {
      Qt.labelTest = labelTest;
      Qt.text1 = formContainer.text1;
  }

  Label {
      id: labelTest
      text: "test"
  }

  TextField {
      id: textFieldPass
      onFocusedChanged: {
             if (focused) {
                     Qt.myFunction();
             }
      }
   }

    function myFunction(){
       //Enter successfuly to the function
       console.log("Qt.labelTest.text:" + Qt.labelTest.text);  //Output: undefined
       Qt.labelTest.text = "Y U NO change!";  //Does nothing
       Qt.text1 = "Y U NO change!";           //Does nothing  
    }
 } 
```

我不确定为什么不工作。即使使用别名属性，文本也拒绝更改。我将不胜感激。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T09:37:47.417

您需要使用控件的 id.aliasname 访问别名。& 如果它在多个插槽中使用，则通过在其根（即本例中的 Page）中声明 myFunction 使其成为全局：

```
Page {
function myFunction() {
    formContainer.text1 = "Y U NO change!";
}
Container {
    id: formContainer
    property alias text1: labelTest.text
    Label {
        id: labelTest
        text: "test"
    }
    TextField {
        id: textFieldPass
        onFocusedChanged: {
            if (focused) {
                myFunction();
            }
        }
     }
  }
} 
```

或者如果它仅用于 TextField 控件，您可以将其设为本地，如下所示：

```
Page {
Container {
    id: formContainer
    property alias text1: labelTest.text
    Label {
        id: labelTest
        text: "test"
    }
    TextField {
        id: textFieldPass
        onFocusedChanged: {
            if (focused) {
                myFunction();
            }
        }
        function myFunction() {
            formContainer.text1 = "Y U NO change!";
        }
    }
}
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T06:19:56.040

您不必使用 Qt.'something' 来更改 QML 对象的属性。更改属性的方法是通过'objectId'.'property' = "value";。所以试试这个：

```
Container {
  objectName: "formContainer"
  id: formContainer

  Label {
    id: labelTest
    text: "test"
  }

  TextField {
    id: textFieldPass
    onFocusedChanged: {
      if (focused) {
        myFunction();
      }
    }
  }

  function myFunction(){
   //Enter successfuly to the function
   console.log("labelTest.text:" + labelTest.text);
   labelTest.text = "Y U NO change!";  //Does nothing
  }
} 
```

# html - 放置一个在语义上是否不正确 或在一个?

> ID：12982269
> 
> 赞同：58
> 
> 时间：2012-10-19T20:50:17.330
> 
> 标签：html

我想做以下事情，但它在语义上是否正确？

```
<button>
  <div></div>
  <div></div>
</button> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-19T20:54:56.197

当前的 HTML5 草案说它是不正确的。

[http://www.w3.org/TR/2012/WD-html5-20120329/the-button-element.html#the-button-element](http://www.w3.org/TR/2012/WD-html5-20120329/the-button-element.html#the-button-element)说`<button>`必须只包含短语内容。短语内容被定义为包含`<span>`但不包含`<div>`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-19T20:51:50.143

不，它无效。您可以在 W3C 验证它。

[http://validator.w3.org/#validate_by_input+with_options](http://validator.w3.org/#validate_by_input+with_options)

将其粘贴到直接输入中，然后验证。

```
<!DOCTYPE html>

<button>
  <div></div>
  <div></div>
</button> 
```

在 W3C 测试时设置 UTF8 编码并选择 HTML5。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-01-22T14:05:15.217

我确信这是异端邪说，但如果你想验证你总是可以`<span>`在你的按钮中使用元素并将它们的样式设置为`<div>`：

```
button span {

  display: block;

}
```

```
<button>
  <span>I'm a div</span>
  <span>I'm a div</span>
  <span>I'm a div</span>
</button>
```

这在今天得到了验证。它是否会在十年内生效是另一回事......

[![在此处输入图像描述](../Images/05449d656b2dfa554a5168a63c9387ac.png)](https://i.stack.imgur.com/LWwnN.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-02T14:14:35.687

Div 和 span 元素没有任何语义。它们是*通用*块和内联元素。当你使用语义时，你唯一需要问自己的问题是，*是否有一个元素对这个内容有更好的语义？*.

也就是说，出于与语义无关的原因，将 div 放在按钮内是不正确的。该[规范](https://www.w3.org/TR/html5/forms.html#the-button-element)说明了按钮的内容模型：

> 短语内容，但不得有交互式内容后代。

… span 是对内容的措辞，但 div 不是。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-02T14:06:22.477

跨度似乎合法。

[![在此处输入图像描述](../Images/914a5c7e48a5e0e432d934959fdcc8a7.png)](https://i.stack.imgur.com/Ic1nL.png)

[（来自https://validator.w3.org/](https://validator.w3.org/)的截图）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-07-16T13:28:15.183

按钮应该包含一个 div 或 span，如果你想将多个 div 或 span 放在一个按钮中，首先将每个内容放在一个 div 或 span 中并应用 style="Display:flex;" 或 style="Display:-webkit-box;"。

# r - 网格：当单位是“npc”而不是“英寸”时，如何强制 grid.layout 的大小？

> ID：12982270
> 
> 赞同：1
> 
> 时间：2012-10-19T20:50:21.847
> 
> 标签：r, grid-layout

为什么下图中的大小（对于区域 (2,2)、(2,4)、(4,2)、(4,4)）不受`grid.rect()`? 换句话说，为什么绘制的矩形与这些区域不完全匹配？单位为“英寸”，这有效（但我想使用“相对”坐标）。

```
require(grid)

inch <- FALSE # TRUE

d <- if(inch) 5 else 1
pspc <- d*c(0.3, 0.3) # width, height of panels
spc <- d*c(0.05, 0.05) # width, height of space
axlabspc <- d*c(0.1, 0.1) # width y label, height x label
labspc <- d*c(0.05, 0.05) # width label boxes, height label boxes

par. <- par(no.readonly=TRUE)
gl <- grid.layout(5, 5, default.units=if(inch) "inches" else "npc",
                  widths=c(axlabspc[1], pspc[1], spc[1], pspc[1], labspc[1]),
                  heights=c(labspc[2], pspc[2], spc[2], pspc[2], axlabspc[2]))
grid.show.layout(gl)
pushViewport(viewport(layout=gl))
for(i in 1:2) {
    for(j in 1:2) {
        pushViewport(viewport(layout.pos.row=2*i, layout.pos.col=2*j, name="foo"))
        grid.rect()
        upViewport()
    }
}
par(par.) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:14:26.093

使用`grid.show.layout(gl, vp=viewport(width=1.25, height=1.25))`它就可以了。

# facebook - 在新的 FB Notifications API 下，是我的应用程序。阅读后负责清理通知？

> ID：12982272
> 
> 赞同：0
> 
> 时间：2012-10-19T20:50:35.380
> 
> 标签：facebook, facebook-graph-api, notifications

我有兴趣使用 2012 年 8 月 31 日宣布的新 Facebook 通知 API。

它看起来很容易实现，但是，我有一个问题。

与应用程序。请求（以前，这是您唯一可以进行的用户对用户通信），它需要发送一个 HTTP DELETE 以从 Facebook 删除应用程序请求，大概是在目标用户单击应用程序之后。通知宝石上的请求。

它不在文档中，但我想仔细检查一下，在对使用新通知 API 发送的通知执行操作后，是否需要进行类似的清理？

非常感谢，韦斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:53:29.430

不，据我所知，通知是“即发即弃”——您不需要“接受”或“拒绝”通知（这就是您的应用需要删除已处理的用户-用户请求的原因），用户只需决定是否采取行动——如果他们不采取行动，则您的应用无需执行任何操作。

# google-apps-script - “在 Chrome 网上应用店注册”未显示在 Google 脚本编辑器中

> ID：12982276
> 
> 赞同：3
> 
> 时间：2012-10-19T20:50:47.857
> 
> 标签：google-apps-script, chrome-web-store, google-apps-script-editor

我正在尝试将脚本（在脚本库中称为“Paypal 商店”）作为 Web 应用程序发布到 Chrome 网上应用店中，但“在 Chrome 网上应用店中注册”项未显示在 Google 脚本的“发布”菜单中编辑器（此菜单中的唯一项目是“发布到图库”和“部署为 Web 应用程序”）。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:56:02.623

“在 Chrome 网上应用店注册”选项仅针对独立脚本显示，而不针对电子表格中包含的脚本显示。看看[这里](https://developers.google.com/apps-script/scripts_containers)了解更多。

# sql - 在空值上压缩数据集

> ID：12982277
> 
> 赞同：1
> 
> 时间：2012-10-19T20:50:58.063
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的查询返回一个看起来像这样的表（请注意，我发布了一个非常简化的输出版本）：

```
+-------+------+------+------+------+
|       |  1   |  2   |  3   |  4   |
+-------+------+------+------+------+
| 14234 | 3    | null | null | null |
| 14234 | null | null | 32   | null |
| 33334 | 4    | null | null | 5    |
| 33334 | null | 3    | null | null |
+-------+------+------+------+------+ 
```

我想重新格式化它看起来像这样：

```
+-------+---+------+------+------+
|       | 1 |  2   |  3   |  4   |
+-------+---+------+------+------+
| 14234 | 3 | null | 32   | null |
| 33334 | 4 | 3    | null | 5    |
+-------+---+------+------+------+ 
```

正如您所看到的，这些行已经放在一起（压缩），我不知道正确的术语是什么。

有没有一种快速的方法可以用 sql server 做到这一点？

这是原始查询：

```
;WITH 
PivotQuery as (
    select client_id,
       [1],[2],[3],[4],[5],[6],[7]
       from
       (   SELECT DISTINCT CLIENT_ID
       , PATIENT_ID
       , count(*) over (partition by client_id, patient_id) AS patientcount

       from f_accession_daily) as SourceTable
       PIVOT
       (
       count(patient_id)
       for patientcount in ([1],[2],[3],[4],[5],[6],[7])
       ) as pivottable),

MinMaxTimes as (
    SELECT a.client_id AS client_id
    ,a.patientcount TimesTested
       , count(a.patientcount)/a.patientcount AS count
       , max(f.received_date) AS maxRecDate
       , min(f.received_date) AS minRecDate
    FROM
    (
       SELECT DISTINCT CLIENT_ID
       , PATIENT_ID
       , count(*) over (partition by client_id, patient_id) AS patientcount

       from f_accession_daily

    ) AS a
    JOIN F_ACCESSION_DAILY AS f ON a.CLIENT_ID = f.CLIENT_ID
       AND a.PATIENT_ID = f.PATIENT_ID

    GROUP BY a.CLIENT_ID, a.patientcount),

maxDates as (
SELECT client_id, [1] maxdate1, [2] maxdate2, [3] maxdate3, [4] maxdate4, [5] maxdate5, [6] maxdate6, [7] maxdate7
FROM MinMaxTimes t
PIVOT (max(maxRecDate)
for TimesTested IN ([1], [2], [3], [4], [5], [6], [7])
) as p),

minDates as (
SELECT client_id, [1] mindate1, [2] mindate2, [3] mindate3, [4] mindate4, [5] mindate5, [6] mindate6, [7] mindate7
FROM MinMaxTimes t
PIVOT (max(minRecDate)
for TimesTested IN ([1], [2], [3], [4], [5], [6], [7])
) as p)

SELECT i.client_id, 
    p.[1], maxdate1, mindate1, 
    p.[2], maxdate2, mindate2, 
    p.[3], maxdate3, mindate3, 
    p.[4], maxdate4, mindate4, 
    p.[5], maxdate5, mindate5, 
    p.[6], maxdate6, mindate6, 
    p.[7], maxdate7, mindate7   
FROM PivotQuery p
LEFT OUTER JOIN maxDates a ON p.client_id = a.client_id
LEFT OUTER JOIN mindates i ON a.client_id = i.client_id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:02:37.700

我将您的示例数据中的第一列称为“fk”

```
SELECT fk,MAX(Col1),MAX(Col2),MAX(Col3),MAX(Col4)
FROM dbo.YourTable
GROUP BY fk 
```

此查询聚合 fk 列上的行。如果您有不止一行具有相同的 fk 值并且在 MAX() 列之一中具有 NOT NULL 值，则将选择最大值。请改用 SUM() 来计算总和。两者都将忽略 NULL 值。但是，也会有关于这一事实的警告。

# symfony-1.4 - symfony 1.4 路由

> ID：12982278
> 
> 赞同：0
> 
> 时间：2012-10-19T20:50:57.873
> 
> 标签：symfony-1.4

我的路由有问题，所以任何帮助将不胜感激？

我将如何为以下内容设置路由规则：

```
 /MyUrl/edit/
 /MyUrl/edit/[something] 
```

并且 [something] 作为变量发送过来。

我正在使用 symfony 1.4 在推进中执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:18:44.630

**我建议你阅读教程**- [**JOBEET**](http://www.symfony-project.org/jobeet/1_4/Propel/en/05)

```
yourFirstRout:  
  url:   /yourFirstRout/edit
  param: { module: yourModule, action: edit }

yourSecondRout:  
  url:   /yourSecondRout/edit/:something
  param: { module: yourModule, action: editEntry } 
```

**something** - 是一个参数，例如 id。在 action **editEntry**中，您可以从**request**获取此参数：

```
$something = $request->getParameter('something'); 
```

然后您可以通过此参数在数据库条目中搜索。

# r - shapefile 区域中的平均光栅文件值返回多个输出 - 解释结果

> ID：12982282
> 
> 赞同：1
> 
> 时间：2012-10-19T20:51:06.030
> 
> 标签：r, shapefile, raster

所以我有我的光栅文件

```
r <- raster('ras') 
```

和一个形状文件

```
abys <- readShapeSpatial('abys') 
```

我通过以下方法计算了 shapefile 定义的平均值：

```
r.vals<- extract(r,abys)
r.mean <- lapply(r.vals,FUN=mean) 
```

但是，当我返回输出时使用几个 shapefile 时，我会得到多个结果，例如：

```
[[1]]
[1] 9321

[[2]]
[1] 6616

[[3]]
[1] 8348 
```

它应该只返回一个我通常得到的。这是因为我的 shapefile 的某些特征还是我的方法有问题？

感谢您的输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:03:45.707

您的问题是`abys`.

最好的解决方案不是平均结果，而是先合并多边形：

```
library(rgeos)
abys.single <- gUnaryUnion(abys)
r.vals<- extract(r,abys.single)
r.mean <- lapply(r.vals,FUN=mean) 
```

# c++ - 有没有办法通过共享内存中的指针到达某个字节？

> ID：12982287
> 
> 赞同：0
> 
> 时间：2012-10-19T20:51:12.563
> 
> 标签：c++, pointers, shared-memory

我有一个指向共享内存的第一个字节的指针，该内存长 66 个字节。我想创建另一个指向共享内存中某个字节的指针（我说某个字节是因为我想从用户那里以整数形式获取此信息，例如：“您想要到达哪个字节？”）。有没有办法通过共享内存的指针到达某个字节？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T20:54:43.640

共享内存部分无关紧要：您拥有的是一个指针，并且您想要增加*n*个字节：

```
T* p = /* pointer to whatever */;
char* nBytesIn = reinterpret_cast<char*>(p) + n; 
```

或者在你的情况下，更安全：

```
char* byte_in_buffer(T* p, std::size_t n)
{
    if (n >= 66)
        throw std::out_of_range("Buffer is only 66 bytes!");

    return reinterpret_cast<char*>(p) + n;
} 
```

您需要转换为，`char*`因为指针算术要求`T* + n`递增`sizeof(T)`；我们想要按字节递增，并且`char`是那种类型（大小始终为 1）。

（通过 a`char*`为值起别名是可以的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:12:45.937

对上述程序进行修改。带有无符号字节。

```
typedef unsigned char byte_t;
byte_t *p = (byte_t *)/*whatever*/

byte_t return_byte(int number)
{
   if(n >= 66 && n <= 0){
       throw std::out_of_range("I don't know what you want");
   }
   byte_t *b = reinterpret_cast<byte_t*>(p)+n;
   byte_t retbyte = *b;
   return retbyte;
} 
```

# asp.net - 在 asp.net 网站上集成 Google Checkout 支付系统

> ID：12982299
> 
> 赞同：1
> 
> 时间：2012-10-19T20:52:08.743
> 
> 标签：asp.net, c#-4.0, google-checkout

我计划在 asp.net 网站上集成 Google Checkout 支付系统。这个想法是会员可以填写详细信息（例如 [https://www.itechline.com/paymentgateway5/](https://www.itechline.com/paymentgateway5/)），但是如何..我不知道请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:19:09.657

真的很想对你的问题做一个[“你试过什么”来](http://mattgemmell.com/2008/12/08/what-have-you-tried/)否决......但是好的~

如果您花一点时间阅读[Google Checkout API 文档](https://developers.google.com/checkout/)，您会发现您的预期目标（*仅*基于您提供的示例链接）与Google *Checkout等**3rd 方结帐服务***不**兼容。

 **您的示例链接要求您：

*   使用[支付处理器/网关服务](http://www.google.com/search?q=payment+gateways)
*   这样您就可以在自己的网站上收集信用卡信息
*   并且必须符合[PCI DSS 要求](https://www.pcisecuritystandards.org/merchants/)**

# java - “Object”对象类型转换和对“Some”类对象的引用

> ID：12982302
> 
> 赞同：0
> 
> 时间：2012-10-19T20:52:32.587
> 
> 标签：java, object, casting

为什么我不能引用类型转换并引用到某个类的对象的“对象”类的对象。下面的代码解释了它。很难用言语表达。意思是，超类对象的对象应该能够引用任何类型的类对象。

```
public class ChildClass {

public static void main(String[]args){
    Simple obj1=new Simple();
    Object obj2=(Simple)obj1;
    System.out.println("1-obj1.a is "+ obj1.a+" obj1.name is "+obj1.name);
    System.out.println("2-obj2.a is "+ obj2.a+" obj2.name is "+obj2.name);/*a cannot be resolved or is not a 
    field*/
    doSomething(obj2);
    System.out.println("3-obj2.a is "+ obj2.a+" obj2.name is "+obj2.name);/*a cannot be resolved or is not a 
    field*/
    System.out.println("4-obj1.a is "+ obj1.a+" obj1.name is "+obj1.name);
}

private static void doSomething(Object obj2) {
    obj2.a=99;//a cannot be resolved or is not a field
    obj2.name="new name";//name cannot be resolved or is not a field

}
class Simple {

    int a=9;
    String name="something";

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:54:01.657

如果您确实希望参数为 type ，则需要将其转换`Object`为： `Simple``Object`

```
private static void doSomething(Object obj2) {
    ((Simple)obj2).a = 99;
    ((Simple)obj2).name = "new name";
} 
```

或者，让它更安全一点：

```
private static void doSomething(Object obj2) {
    if (obj2 instanceof Simple) {
        Simple simple = (Simple) obj2;  
        simple.a = 99;
        simple.name = "new name";
    }
} 
```

你好像把它弄反了。类型的引用`Simple`可用于调用 的方法`Object`，但反之则不行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:58:12.407

按照上面的 Keppil 建议做。

或者，因为您将 obj2 转换为 Simple 类型，只需将 doSomething 的参数更改为该类型：

```
private static void doSomething( Simple simple ) { 
    simple.a=99;
    simple.name="new name";
} 
```

你也应该改变

```
Object obj2=(Simple)obj1; 
```

到

```
Simple obj2 = (Simple)obj1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:01:51.580

您正在尝试引用存在于 Simple 类实例中的字段，但您没有将对象类型转换为 Simple 的实例。

变量 obj2 已被分配来保存 Simple 的一个实例，但它被声明为 Object 类型。如果它没有显式转换为 Simple 类型，编译器只能假设 obj2 具有 Object 类型所具有的功能。

我还没有测试过这段代码，但它应该明白这一点。注意，每当我引用任何在 Simple 类型中声明的字段时，我都会将 obj2 转换为 Simple 类型。

```
public class ChildClass {

public static void main(String[]args){
    Simple obj1=new Simple();
    Object obj2=obj1;
    System.out.println("1-obj1.a is "+ obj1.a+" obj1.name is "+obj1.name);
    System.out.println("2-obj2.a is "+ ((Simple)obj2).a+" obj2.name is "+((Simple)obj2).name);
    doSomething((Simple)obj2);
    System.out.println("3-obj2.a is "+ ((Simple)obj2).a+" obj2.name is "+((Simple)obj2).name);
    System.out.println("4-obj1.a is "+ obj1.a+" obj1.name is "+obj1.name);
}

    private static void doSomething(Simple obj2) {
        obj2.a=99;//a cannot be resolved or is not a field
        obj2.name="new name";//name cannot be resolved or is not a field
    }
    class Simple {
        int a=9;
        String name="something";
    }
} 
```

# javascript - 'this.x1 = options.x1 || 是什么意思？0'; 在Javascript中是什么意思？

> ID：12982303
> 
> 赞同：-2
> 
> 时间：2012-10-19T20:52:32.607
> 
> 标签：javascript

> **可能的重复：**
> [“options = options || {}”在 Javascript 中是什么意思？](https://stackoverflow.com/questions/2851404/what-does-options-options-mean-in-javascript)
> [javascript的空合并运算符？](https://stackoverflow.com/questions/476436/null-coalescing-operator-for-javascript)

正在阅读一些代码，我看到了这个：

`this.x1 = options.x1 || 0;`

以前从未见过这样的语法。这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:54:17.803

这是一个合并...这意味着如果 options.x1 是假的，它将分配 0... 否则 options.x1 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T20:54:40.393

让`this.x1`是`options.x1`if的值`options.x1`具有任何*真*值。`this.x1`否则就让`0`。

# api - 打开图表：自定义操作

> ID：12982304
> 
> 赞同：0
> 
> 时间：2012-10-19T20:52:45.093
> 
> 标签：api, facebook-opengraph

我创建了一个自定义动作和对象。我唯一的问题是在发布到 FB 时，单击图标或标题将用户重定向到空白页面而不是我的应用程序。

我在哪里可以设置重定向链接？我看到的唯一 url 是 opengrap html 中的那个，但是这个应该是 og wright 的地址？(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:58:31.997

此[链接](https://developers.facebook.com/docs/opengraph/keyconcepts/)可能会有所帮助。

基本上，当您的应用程序执行 opengraph 操作时，它会设置表示对象的 url（它提供对象的所有元数据），也是用户在 facebook 中单击操作时发送到的 URL。

例如 https://graph.facebook.com/me/[YOUR_APP_NAMESPACE]:cook ?recipe=OBJECT_URL&access_token=ACCESS_TOKEN

在这种情况下，将使用具有给定 OBJECT_URL 的食谱对象调用烹饪操作。在该 url 处，应该存在一个页面（由您生成），所有 facebook 元数据都包含在 head 标签中，以便可以正确创建对象，但还包含实际网页数据供用户查看。

另一个值得查看的工作示例链接是[here](https://developers.facebook.com/docs/opengraph/tutorial/#publish)

# facebook - 脸书用户照片量大的FQL查询

> ID：12982305
> 
> 赞同：5
> 
> 时间：2012-10-19T20:52:48.163
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql

我需要获取按喜欢排序的 FB 用户的照片。我通过 Facebook JavaScript SDK 运行了这个 FQL 查询来获取它们：

```
SELECT object_id, src_big, src_big_width, src_big_height, link, like_info, caption, created 
FROM photo 
WHERE owner = MANY_PICS_USER_ID ORDER BY like_info DESC LIMIT 10 
```

对于拥有超过 3000 张照片的用户，查询失败。原来有很多这样的用户。相关的 Facebook 错误在这里[http://developers.facebook.com/bugs/438568326189781](http://developers.facebook.com/bugs/438568326189781)

注意：删除“ORDER BY like_info”使查询工作，但我没有简单的方法来获取这些图片，按喜欢排序

重现：
选择一个至少有 3000 张照片的 FB 朋友，获取他们的用户 ID，然后在 API GRAPH EXPLORER 中运行上述查询（替换 MANY_PICS_USER_ID）。

最好的解决方法是什么？或者，您能推荐最简单的轻量级 Open Graph 解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T00:45:08.703

To sort photos by likes you need the following:

*   Run the query which gives first 100 results (replace *me* with user id):

    [http://graph.facebook.com/me/photos?fields=id,source,likes&limit=100](http://graph.facebook.com/me/photos?fields=id,source,likes&limit=100)

Which return the following data structure:

```
"data": [
{
  "id": "1234567890", 
  "source": "http://photo.url.in.facebook.cdn.com/", 
  "created_time": "2012-09-13T22:52:34+0000", 
  "likes": {
    "data": [
      {
        "id": "1234567890", 
        "name": "Full Name"
      }, 
      .....
    "paging": {
      "next": "https://graph.facebook.com/1234567890/likes?limit=25&offset=25"
    }
  }
},
{
  "id": "312323232323", 
  "source": "PICTURE_URL", 
  "created_time": "2012-09-12T20:54:27+0000", 
  "likes": {
    "data": [..]
  }
},
....
"paging": {
  "previous": "http://PREVIOUS_URL?fields=id,source,name,height,width,link,likes&limit=100&since=123456", 
  "next": "http://NEXT_URL?fields=id,source,name,height,width,link,likes&limit=100&until=234567"
} 
```

*   If total number of pictures is more than 100, run all next queries, from the "next" link until the num of pics will be less then 100.

*   For every picture you need to count total number of likes. If the number of likes is more than 25, run extra query from likes.paging.next until number of likes will be < 25 and get the total quantity.

*   Sort all those pics by number of likes.

So for the user with 3000 pics it will be in total 30 calls + extra calls for each picture with more than 25 likes.

# c# - 根据下拉框选择隐藏/显示表单

> ID：12982308
> 
> 赞同：2
> 
> 时间：2012-10-19T20:53:08.477
> 
> 标签：c#, javascript, asp.net, asp.net-mvc, ado.net

我环顾四周，没有发现任何具体的东西。

是否有任何关于如何根据是否选择值来显示/隐藏表单或文本框的教程。

我有类似这个下拉框的东西（添加，项目1，项目2，项目3等..）

如果选择了添加，则显示要添加的表单，添加一些属性，例如（名字，姓氏等），否则它只会对所选项目执行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:05:12.673

我会在客户端代码中连接它。在 JavaScript 或 jQuery 中处理 select 的`onchange`事件并将处理程序绑定到它。由于“ **Add** ”是唯一会显示表单的选项，因此在您的处理程序中检查选定的值，如果它是“ **Add** ”的值，则显示表单。如果它是任何其他值，则隐藏表单。

如果您想在服务器代码中执行此操作，只需处理选择更改的事件并以这种方式设置表单的可见性属性。无论哪种方式都应该很容易。

在客户端上执行此操作可以避免围绕回发进行编码，同时消除处理来自服务器的请求的责任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:29:56.970

```
<select id="target">
    <option value="option1" selected="selected">Add</option>
    <option value="option2">Item1</option>
  </select>

<input type="text" class="textboxclass" />

<div class="someform">
//content
</div> 
```

某个类的默认 css 显示属性为无，例如：

```
.someform{display:none;} 
```

jQuery脚本

```
<script>
$('#target').change(function() {
  var name = $('#target option:selected'),text(); //Item1
  var id = $('#target').val(); // option2

  if(id =="option2"){
   //your logic for this option
   //hide textbox
   $('.textboxclass').hide();
   $('.someform').show();
   }else{
   $('.textboxclass').show();
   $('.someform').hide();

}
   //other if else logic

});
</script> 
```

因为我在笔记本电脑上没有安装任何软件，所以没有测试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T07:50:31.947

如果您想从服务器端执行此操作，您需要将 DrowpDown 列表的 AutoPostBack 属性设置为 true，

并在 DropdownList 的 SelectedIndexChanged 事件中

试试这个，

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
     if (DropDownList1.SelectedIndex == 0)
     {
         entryForm.Visible = true;
         viewForm.Visible = false;
     }
     else if (DropDownList1.SelectedIndex == 1)
     {
         entryForm.Visible = false;
         viewForm.Visible = true;

} 
```

但这不是一个好的方法，我建议按照上面给出的答案，并使用 JavaScript 或 JQuery

# php - 在 PHP 中使用多个哈希

> ID：12982317
> 
> 赞同：0
> 
> 时间：2012-10-19T20:53:37.073
> 
> 标签：php, encryption, passwords, hash, password-storage

我正在从事一个项目，并热衷于从一开始就保证密码存储的安全。在构思阶段，但这大致是我打算使用的。

```
class Crypto {
    public function hash1($string, $salt) {
        return hash('sha512', $string . $salt);
    }

    public function hash2($string, $salt) {
        return hash('sha512', $salt . $string);
    }

    public function compareToHash($string, $salt, $hash1, $hash2) {
        return($this->hash1($string, $salt) === $hash1 && $this->hash2($string, $salt) === $hash2);
    }
} 
```

如您所见，我试图避免碰撞。这是一种有效的方法吗，它看起来非常简单，我想知道我是否遗漏了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:55:31.870

If you want to make your password storage secure from the start, you should not use `sha512` or any other fast hash algorithm, instead use a *key derivation function* like **BCrypt**.

The problem with fast algorithms is, that you can calculate 80 Mega sha512-hashes per second with common hardware ([in 2012](http://hashcat.net/oclhashcat-lite/#performance)). That makes it possible to brute-force a whole english dictionary with about 500000 words, in a few milliseconds! Other algorithms are even faster.

BCrypt was especially designed to hash passwords, and is therefore **slow** (needs some computing time). With a cost factor you can adapt the needed time to future (and therefore faster) hardware.

Using BCrypt can be as easy, as using the sha512 hash. It's recommended to use a well established library like [phpass](http://www.openwall.com/phpass/), and if you want to understand how it can be implemented, you can read this [article](http://www.martinstoeckli.ch/hash/hash.html), where i tried to explain the most important points.

Your scheme with two separate hashes will not increase security, because collisions with sha512 are never the problem. In the worst case it even weakens security, because you have to store both hashes, so an attacker has two related informations about the hashed password.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:02:54.663

由于您计划对可能的网站进行密码保护，让我解释一下，您需要确保从已经编码的客户端发送密码，否则任何嗅探器都会找到真正的密码，并且您知道人们通常如何使用密码，对吧？在许多许多帐户上都是一样的。

我建议看一下我前段时间偶然发现的一篇文章，并为它保留了一个链接，因为它解释了哈希和密码保护的所有问题：http: [//www.codinghorror.com/blog/2007/09 /rainbow-hash-cracking.html](http://www.codinghorror.com/blog/2007/09/rainbow-hash-cracking.html)

很快 - 尽可能使用最强（并且 sha1 不再强）密码编码器。不是最快的。让黑客浪费宝贵的时间尝试闯入。如此一来，闯入将变得没有吸引力。

希望它会有所帮助，祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:05:48.430

这是非常基本的。我会查看 OWASP 的[密码存储备忘单](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)。还有许多已经创建和审查的密码哈希库。

我会看一下 OpenWall 的[Portable PHP Hashing Framework](http://www.openwall.com/phpass/)。它创建了非常安全的哈希值并执行了适当数量的迭代。它的使用也相当广泛。

如果您使用 SHA512 进行散列，那么您当时不需要做任何特别的事情来避免碰撞，我记得最近读到，在一段时间内发现碰撞仍然不可行。

我将关注的两个主要事情是安全盐（20+ 字节）和迭代哈希至少 64,000 次以增加攻击时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:05:56.163

密码安全的第一条规则：如果您不确定某事是否安全，那么很可能不是。

由于您刚刚开始编写密码例程，我的建议是现在停止。

PHP5.5（2013 年 2 月/3 月到期）将附带一组新功能，专为处理密码而设计，并考虑到最佳实践安全性。当 5.5 发布时，这些函数将成为 PHP 中唯一推荐的处理密码的方法。

好消息是，您无需等待或升级到 5.5 即可使用这些功能——它们已被向后移植以在 5.3 和 5.4 中运行，因此您现在可以使用它们。从这里下载库：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

参考文章：[http ://www.h-online.com/open/news/item/PHP-5-5-should-reduce-password-sloppiness-1707835.html](http://www.h-online.com/open/news/item/PHP-5-5-should-reduce-password-sloppiness-1707835.html)

# c - Linux device driver, Is it possible to get the minor number using a file descriptor?

> ID：12982318
> 
> 赞同：7
> 
> 时间：2012-10-19T20:53:54.530
> 
> 标签：c, linux-kernel, linux-device-driver

I am writing a device driver for Linux. It creates a device with 4 minor numbers. Whenever we attempt to write to the device at minor number 3, we are suppose to kill the device and currently it isn't suppose to do anything else except print it is writing to the booga device. Here is some of my current code and I can post more code if necessary:

Write method:

```
static ssize_t booga_write (struct file *filp, const char *buf, size_t count, loff_t *f_pose) {
    printk("Attempting to write to booga device\n");
    /* need to protect this with a semaphore if multiple processes
       will invoke this driver to prevent a race condition */

    if (down_interruptible (&booga_device_stats->sem))
        return (-ERESTARTSYS);
    booga_device_stats->num_bytes_written += count; 
    up(&booga_device_stats->sem);
    return count; // pretend that count bytes were written

} 
```

How it is tested:

```
static void run_write_test(char *device, int bufsize)
{
    char *buf;
    int src;
    int out;

    src = open(device, O_WRONLY);
    if (src < 0) {
        perror("Open for write failed:");
        exit(1);
    }
    buf = (char *) malloc(sizeof(char)*(bufsize+1));
    fprintf(stderr, "Attempting to write to booga device\n");
    out = write(src, buf, bufsize);
    fprintf(stderr, "Wrote %d bytes.\n", out);
    free(buf);
    close(src);

} 
```

I am wondering if there is a way to get the minor number. I looked in linux/fs.h and saw that the file struct has a member called private_data but whenever I attempt to call this, it will crash my system as it is currently set to null.

Or should I not be trying to get the minor number from the struct file at all and should attempt to keep track of it when I first open the device?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T22:00:10.313

You can get the minor number like so:

```
iminor(filp->f_path.dentry->d_inode) 
```

# bash - Shell 函数，用一个 arg 执行操作

> ID：12982326
> 
> 赞同：0
> 
> 时间：2012-10-19T20:54:25.553
> 
> 标签：bash, shell, unix

我正在尝试做一些简单的事情，例如基于给定参数的 mkdir 。

```
#!/bin/bash

make_picNum() {
    arg1 = $1
    echo "Making picture folder $arg1..."
    echo "mkdir picNum_$arg1"
    echo "Created album folder"
} 
```

我假设我有一些基本的语法缺陷。以任何给定的数字作为参数运行它的当前输出/操作是 nada。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:58:05.447

您的脚本定义了一个名为`make_picNum`但它从不调用该函数的函数。尝试在最后添加：

```
make_picNum "$1" 
```

此外，您需要删除`=`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T06:36:25.300

> 我在 .sh 中创建它，然后 chmod +x file.sh 和 ./file.sh args

如果是这样的话，你真的不需要脚本中的那个函数，即你可以只拥有这个

```
#!/bin/bash

echo "Making picture folder $1..."
mkdir "picNum_$1"
echo "Created album folder" 
```

# ruby-on-rails - Ruby on Rails：向应用程序添加用户身份验证后更改功能测试

> ID：12982327
> 
> 赞同：0
> 
> 时间：2012-10-19T20:54:37.540
> 
> 标签：ruby-on-rails

我已使用此 railscast (270#) 将用户身份验证添加到我的 rails 应用程序： [http ://railscasts.com/episodes/270-authentication-in-rails-3-1](http://railscasts.com/episodes/270-authentication-in-rails-3-1)

问题是，现在我的两个功能测试没有通过：

```
 1) Failure:
test_should_create_user(UsersControllerTest) [/home/tim/fairym/test/functional/users_controller_test.rb:20]:
"User.count" didn't change by 1.
<4> expected but was
<3>.

  2) Error:
test_should_update_user(UsersControllerTest):
NoMethodError: undefined method `stringify_keys' for "980190962":String
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/attribute_assignment.rb:69:in `assign_attributes'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/persistence.rb:215:in `block in update_attributes'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/transactions.rb:208:in `transaction'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/persistence.rb:214:in `update_attributes'
    /home/tim/fairym/app/controllers/users_controller.rb:71:in `block in update'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:270:in `call'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:270:in `retrieve_collector_from_mimes'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/mime_responds.rb:194:in `respond_to'
    /home/tim/fairym/app/controllers/users_controller.rb:70:in `update'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:167:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/rendering.rb:10:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:414:in `_run__2246469619999623246__process_action__2071820246947825486__callbacks'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/callbacks.rb:17:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/rescue.rb:29:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `block in instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/notifications.rb:123:in `instrument'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/base.rb:121:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/abstract_controller/rendering.rb:45:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/metal/testing.rb:17:in `process_with_new_base_test'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/test_case.rb:469:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/test_case.rb:49:in `process'
    /home/tim/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_controller/test_case.rb:396:in `put'
    /home/tim/fairym/test/functional/users_controller_test.rb:46:in `block in <class:UsersControllerTest>' 
```

以下是测试：

```
require 'test_helper'
setup do
    @input_attributes ={
    :email => "jojo@yahoo.com", 
    :first_name => "sam",
    :last_name => "Sammy",
    :gender => "Male",
    :orientation => "Bi",
    :location => "London",
    :date_joined => 2012 - 10 - 18
    :date_of_birth => 1987 - 10 - 18
    :last_online => DateTime.now.to_date
    :password => "private",
    :password_confirmation => "private"
    :admin => false
    }
test "should update user" do

    put :update, :id => @user.to_param, :user => @input_attributes
    assert_redirected_to users_path
  end
  test "should create user" do
    assert_difference('User.count') do
      post :create, :user => { @input_attributes }
    end

    assert_redirected_to users_path 
```

## 结尾

```
sessions_controller.rb

def create
  user = User.find_by_email(params[:email])
  if user && user.authenticate(params[:password])
    session[:user_id] = user.id
    redirect_to root_url, :notice => "Logged in!"
  else
    flash.now.alert = "Invalid email or password"
    render "new"
  end
end

def destroy
  session[:user_id] = nil
  redirect_to root_url, :notice => "Logged out!"
end

application_controller.rb

private

def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user 
```

我想通过添加身份验证使这些测试通过，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:33:07.883

这可能是解决您的问题的很长的路要走，但在您的测试中而不是这样做

```
put :update, :id => @user.to_param, :user => @input_attributes 
```

做这个

```
put :update, :id => @user.to_param, :user => { :email => @input_attributes.email, :first_name => @input_attributes.first_name etc...} 
```

指定每个单独的用户属性为我消除了错误。

# dojo - TypeScript + Dojo + AMD？

> ID：12982329
> 
> 赞同：1
> 
> 时间：2012-10-19T20:54:42.653
> 
> 标签：dojo, typescript, amd

将 AMD 与 TypeScript 和 dojo AMD 一起使用的任何示例？继续获取“3”而不是对象（tslab == 3）：

```
 require( ["TypeScriptLab"], function ( tslab )
    {
        new tslab.Tests().run();
    } ); 
```

打字稿看起来像这样：

```
export class TypeScriptLab {
    test() {
    }
} 
```

生成的 JS 如下所示：

```
define(["require", "exports"], function(require, exports) {
    var TypeScriptLab = (function () {
        function TypeScriptLab() { }
        TypeScriptLab.prototype.test = function () {
        };
        return TypeScriptLab;
    })();
    exports.TypeScriptLab = TypeScriptLab;    
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:16:32.830

我定义了我的包：

```
<script>
    dojoConfig = {
        async: true,
        packages: [
            { name: "TSLab", location: "/IPS" }
        ]
    };
</script> 
```

并添加了一个命名空间前缀：

```
 require( ["TSLab/typeScriptLab"], function ( tslab )
    {
        new tslab.Tests().run();
    } ); 
```

模块现在加载。

# c# - C# Relay on SslStream 进行加密

> ID：12982332
> 
> 赞同：1
> 
> 时间：2012-10-19T20:54:48.370
> 
> 标签：c#, sslstream

我可以在 SslStream 上中继以加密我所有发送和接收的数据，这样我就不必散列数据或添加任何其他加密算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:11:43.170

来自 MSDN：

> 提供用于客户端-服务器通信的流，该流使用安全套接字层 (SSL) 安全协议来验证服务器和可选的客户端。

所以，从表面上看，SSL 的功能是在客户端和服务器之间提供一条加密隧道。如果实施得当，SSL 被认为对于大多数操作来说“足够安全”。这意味着您不需要额外的安全层。但是，这也取决于您的应用程序。

我还想解决你问题的另一部分。“所以我不必散列数据” - 如果你散列数据，你就没有加密它。您正在执行一种单向操作，该操作实质上会在您发送原始数据时破坏它。哈希通常用于查看两条或多条数据是否相同；它们不能用于对称加密/解密。

# c++ - C++ 编译错误：对构造函数的引用不明确

> ID：12982339
> 
> 赞同：2
> 
> 时间：2012-10-19T20:55:14.793
> 
> 标签：c++, compilation

我有一个正在尝试编译的单一源文件 C++ 程序。

头文件如下所示：

```
class merge {
public:
explicit merge(int argc, char* argv[]);
virtual ~merge();
}; 
```

源文件如下所示：

```
int main(int argc, char* argv[])
{
merge mrg(argc,argv);
return 0;
}

merge::merge(map<string,string>& params) {
    //code
} 
```

尝试编译：g++ merge.cpp -o merge

我得到：

```
 merge.cpp: In function ‘int main(int, char**)’:
    merge.cpp:10: error: reference to ‘merge’ is ambiguous
    merge.h:12: error: candidates are: class merge
    /usr/lib/gcc/x86_64-redhat-            linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_algo.h:3180: error: template<class     _InputIterator1, class _InputIterator2, class _OutputIterator, class _Compare>     _OutputIterator std::merge(_InputIterator1, _InputIterator1, _InputIterator2,     _InputIterator2, _OutputIterator, _Compare)
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_algo.h:3122: error: template<class     _InputIterator1, class _InputIterator2, class _OutputIterator> _OutputIterator     std::merge(_InputIterator1, _InputIterator1, _InputIterator2, _InputIterator2,     _OutputIterator)
    merge.cpp:10: error: reference to ‘merge’ is ambiguous
    merge.h:12: error: candidates are: class merge
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_algo.h:3180: error: template<class     _InputIterator1, class _InputIterator2, class _OutputIterator, class _Compare>     _OutputIterator std::merge(_InputIterator1, _InputIterator1, _InputIterator2,     _InputIterator2, _OutputIterator, _Compare)
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_algo.h:3122: error: template<class     _InputIterator1, class _InputIterator2, class _OutputIterator> _OutputIterator     std::merge(_InputIterator1, _InputIterator1, _InputIterator2, _InputIterator2,     _OutputIterator)
    merge.cpp:10: error: expected `;' before ‘mrg’
    merge.cpp: At global scope:
    merge.cpp:14: error: prototype for ‘merge::merge(std::map<std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char,     std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const     std::basic_string<char, std::char_traits<char>, std::allocator<char> >,     std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >&)’ does not     match any in class ‘merge’
    merge.h:12: error: candidates are: merge::merge(const merge&)
    merge.h:14: error:                 merge::merge(int, char**)
    merge.cpp: In constructor ‘merge::merge(std::map<std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char,     std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const     std::basic_string<char, std::char_traits<char>, std::allocator<char> >,     std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >&)’:
    merge.cpp:15: error: declaration of ‘std::map<std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char,     std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const     std::basic_string<char, std::char_traits<char>, std::allocator<char> >,     std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > params’     shadows a parameter
    merge.cpp:16: error: ‘argc’ was not declared in this scope
    merge.cpp:16: error: ‘argv’ was not declared in this scope
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_iterator_base_types.h: At global scope:
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_iterator_base_types.h: In instantiation     of ‘std::iterator_traits<std::basic_string<char, std::char_traits<char>,     std::allocator<char> > >’:
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_vector.h:803:   instantiated from ‘void     std::vector<_Tp, _Alloc>::_M_initialize_dispatch(_InputIterator, _InputIterator,     __false_type) [with _InputIterator = std::basic_string<char, std::char_traits<char>,     std::allocator<char> >, _Tp = int, _Alloc = std::allocator<int>]’
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_vector.h:262:   instantiated from     ‘std::vector<_Tp, _Alloc>::vector(_InputIterator, _InputIterator, const _Alloc&) [with     _InputIterator = std::basic_string<char, std::char_traits<char>, std::allocator<char> >,     _Tp = int, _Alloc = std::allocator<int>]’
    merge.cpp:86:   instantiated from here
    /usr/lib/gcc/x86_64-redhat-    linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_iterator_base_types.h:129: error: no     type named ‘iterator_category’ in ‘struct std::basic_string<char, std::char_traits<char>,     std::allocator<char> >’ 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:02:14.577

在你的类声明中

```
explicit merge(int argc, char* argv[]); 
```

但是，当您为您的构造函数提供定义时

```
merge::merge(map<string,string>& params) { /* ... */ } 
```

当然，两者必须匹配。

此外，您的代码中似乎有一个`using namespace std;`声明。编译器无法解析`merge`对您的`merge`类构造函数的调用还是对[`std::merge`](http://en.cppreference.com/w/cpp/algorithm/merge).

从中吸取的教训（除了修复你的构造函数）：

> **不要**在代码中的`using namespace std;` *任何地方*添加。`std::`打字不是很麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T20:56:38.663

合并构造函数的签名与其定义不匹配。

在您的类声明中，您定义`merge::merge`接受两个参数，一个`int`和另一个`char*`。但是，在 的定义中`merge::merge`，您将其定义为仅接受一个类型的参数`map<string,string>&`

# c# - C#在一个类中设置一个数字范围

> ID：12982343
> 
> 赞同：0
> 
> 时间：2012-10-19T20:55:28.347
> 
> 标签：c#, visual-studio-2010

所以我需要使用以下信息创建一个课程，我已经创建或至少制作了一个包含以下信息的课程，但是我在设置入学编号和年份标记的数字范围时遇到了麻烦，并且想知道是否任何人都可以帮助我

在 C# 中实现一个 Student 类型的类，该类应包含在文件 Student.cs 中。该类应符合以下规范：

属性示例数据验证

名字 “Basil” 非空白

SecondName “Fawlty” 非空白

出生日期 23/08/1946 非空白

课程“MA酒店管理”非空白

入学编号 12345 在 10000 到 99999 范围内

年标记 55 在范围 0 -100

继承人到目前为止我的课程，希望到目前为止它是正确的

```
namespace Student
{
    public class Student
    {
        private string firstname;
        private string secondname;
        private double dateofbirth;
        private string course;
        private int    matricnumber;
        private int    yearmark;

        public Student() 
        {
            firstname = "Basil";
            secondname = "Fawlty";
            dateofbirth = 23/08/1946;
            course = "MA Hotel Management";
            matricnumber = 12345;
            yearmark = 55;
        }
        public string FirstName
        {
            get { return firstname; }
            set { firstname = value; }
        }

        public string SecondName
        {
            get { return secondname; }
            set { secondname = value; }
        }
        public double DateOfBirth 
        {
            get { return dateofbirth; }
            set { dateofbirth = value; }
        }

        public string Course
        {
            get { return course; }
            set { course = value; }
        }
        public int Matricnumber
        {
            get { return matricnumber; }
            set { matricnumber = value; }
        }
        public int YearMark
        {
            get { return yearmark; }
            set {yearmark = value; }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:01:23.827

您可以在您的设置器中实现一些逻辑来检查该值是否有效。所以假设我需要一个属性，调用`LastName`某个只能是“Johnson”、“Smith”或“Roberts”的类。我可以做这样的事情：

```
private string _lastName;
public string LastName
{
    get { return _lastName; }
    set
    {
        if (value == "Johnson" || value == "Smith" || value == "Roberts")
        {
            _lastName = value;
        }
        else
        {
            // Do something here. Maybe set a default.  Maybe throw an exception. Whatever.
        }
    }
} 
```

免责声明：我没有写一个*确切的*解决方案，因为这听起来真的像是家庭作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:03:05.837

您需要将数据验证放在“set”方法中。如果用户输入了无效值，则抛出异常。

```
 public int Matricnumber
    {
        get { return matricnumber; }
        set { 
               if (value > 99999 | value < 10000)
                    throw new ArgumentException("Invalid value - MaticNumber must be in the range 10000-99999");
               matricnumber = value;
            }
    } 
```

对于不能为空的值，您可能需要提供某种类型的 Validate() 方法来在事后使用 String.IsNullOrEmpty 来验证这一点，因为用默认值初始化类是没有意义的。

这有意义吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:01:27.760

如果您想对/按班级进行验证，您可以执行以下操作：

```
 public int Matricnumber
    {
        get { return matricnumber; }
        set 
        {
           if (value < MinMatric || value > MaxMatric)
             throw new ArgumentOutOfRangeException("Matricnumber"); 
           matricnumber = value; 
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:03:53.970

您的问题没有指定要防止设置错误值的行为。

一般来说，我会喜欢您指定的限制要求的[代码合同。](http://msdn.microsoft.com/en-us/library/dd287492.aspx)这是使用合同解决问题的一种方法。

```
[ContractInvariantMethod]
private void ObjectInvariant()
{
    Contract.Invariant( matricnumber <= 99999 );
    Contract.Invariant( matricnumber >= 10000 );
    Contract.Invariant( yearmark <= 100 );
    Contract.Invariant( yearmark >= 0 );
} 
```

[这需要您在此处](http://research.microsoft.com/en-us/projects/contracts/)安装 Microsoft的代码合同，并启用运行时检查。提供`ContractInvariantMethod`了在进入和退出方法时必须为真的不变量。如果不变量不成立，则会抛出异常。但是，您可以配置不同的故障行为。

该类`Contract`还有其他成员，您可以在应用了限制的属性中使用这些成员。

更传统的解决方案是使用条件语句来检查设置的要求并手动处理错误（抛出异常、不采取任何措施、设置为最接近的界限等）。

# iphone - iOS, NSMutableDictionary

> ID：12982346
> 
> 赞同：8
> 
> 时间：2012-10-19T20:55:34.267
> 
> 标签：iphone, objective-c, ios, nsmutabledictionary

我在我的项目中遇到了一个问题，我在头文件中声明了一个 NSMutableDictionary 属性，如下所示：

```
@property (copy, nonatomic) NSMutableDictionary *DataDict ; 
```

现在在实现文件中，我继续初始化这个字典，因为我要使用它，像这样：

```
DataDict = [[NSMutableDictionary alloc]init]; 
```

现在，当我这样做时，当我尝试向这本字典中添加一些内容时，我会收到以下错误消息：

> -[__NSDictionaryI setObject:forKey:]：无法识别的选择器发送到实例 0x885ae60 2012-10-19 16:51:56.040 testing[2297:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSDictionaryI setObject: forKey:]: 无法识别的选择器发送到实例 0x885ae60'

一段时间后，我的项目运行了一千次，我决定取消注释我的初始化行，就像这样

```
 //DataDict = [[NSMutableDictionary alloc]init]; 
```

这解决了问题。

我的问题是：为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T21:08:03.763

问题在于您定义属性的方式。如果您将其更改为：

```
@property (strong, nonatomic) NSMutableDictionary *DataDict ; 
```

而不是`copy`一切都应该没问题。

发生这种情况是因为您基本上说您希望通过生成的访问器获得对象的副本，它返回一个`NSDictionary`而不是（一个不可变的副本）。

您可以在此处找到有关[objective-c 属性的](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)更多信息。

顺便说一句：objective-c ivars 通常以小写字母开头（大写名称用于类），因此`dataDict`应该优先于`DataDict`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:07:12.330

这是因为该属性具有“复制”属性，因此 NSMutableDictionary 实例 alloc/init-ed 是使用“复制”方法“复制”的，而“复制”方法创建的不是 NSMutableDictionary 而是 NSDictionary。（“mutableCopy”将创建 NSMutableDictionary）。

可能，您可以使用“保留”而不是“复制”作为属性。

```
@property (retain, nonatomic) NSMutableDictionary *DataDict ; 
```

或者，只是没有“复制”/“保留”，但使用 ARC。（自动引用计数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T01:12:49.510

我有这个确切的问题。保留/复制/强/弱等没有组合可以解决问题。起作用的是创建一个临时的可变字典，将其加载，然后将我的原始字典设置为等于它。

```
 NSMutableDictionary * tempD = [[NSMutableDictionary alloc] init];

[tempD setObject: epsTapeCut forKey:LWPrintParameterKeyTapeCut];
[tempD setObject: epsCopies forKey:LWPrintParameterKeyCopies];
[tempD setObject: epsHalfCut forKey:LWPrintParameterKeyHalfCut];
[tempD setObject: epsPrintSpeed forKey:LWPrintParameterKeyPrintSpeed];
[tempD setObject: epsDensity forKey:LWPrintParameterKeyTapeWidth];

self.ePSprintSettings = tempD; 
```

这失败了：

```
 [self.ePSprintSettings setObject: epsTapeCut forKey:LWPrintParameterKeyTapeCut]; 
```

宣言：

```
 @property (nonatomic, retain) NSMutableDictionary *ePSprintSettings; 
```

（但同样，属性的组合不会产生影响。）

初始化：

```
 self.ePSprintSettings = (NSMutableDictionary *)[myUserDefaults dictionaryForKey:kEpsPrintSettings]; 
```

谢谢你帮助我理解。

我很高兴这有效，但我想了解原因。

# sql - sql多对多关系我在哪里放置类型字段

> ID：12982350
> 
> 赞同：0
> 
> 时间：2012-10-19T20:55:45.620
> 
> 标签：sql

如果我有下面列出的下表，我想将 AddressTypeID 放在 Address 表还是 CompanyAddress 表中？

公司
公司编号

COMPANYADDRESS
CompanyAddressID
CompanyID
AddressID

地址地址
ID

ADDRESSTYPE
地址类型ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:59:22.877

首先，停下来想想这是否真的是一个多对多的关系。您真的会将完全相同的地址记录分配给多个公司吗？您可以通过直接删除`CompanyAddress`和添加一`CompanyID`列来简化您的设计`Address`。

如果这确实是多对多关系，那么要回答您最初的问题，请保留`AddressTypeID`in `Address`，而不是 in `CompanyAddress`，因为对于使用它的每个公司来说，它应该是相同的类型。

# javascript - 嵌入视频的 Javascript 动画不流畅

> ID：12982361
> 
> 赞同：0
> 
> 时间：2012-10-19T20:56:50.223
> 
> 标签：javascript, html, flash, redraw

我在推特引导轮播上有一段 Vimeo 视频。当我单击轮播上的下一个按钮时，动画滞后很多。这可能是因为嵌入的 Flash 对象重绘速度较慢。是否有任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:01:27.483

为您的操作添加一个回调，以`next()`隐藏 vimeo 并显示静态图像或其他内容。这将使重绘不包括闪存容器。

# asp.net-mvc - MVC 嵌套模型集合为空（非空）

> ID：12982362
> 
> 赞同：0
> 
> 时间：2012-10-19T20:56:56.020
> 
> 标签：asp.net-mvc, model-view-controller, model-binding

我有一个模型，它的属性是一个集合。我可以从编辑操作中成功绑定，例如：

```
 [HttpGet]
    public ActionResult Edit(string id)
    {
        // code here
        return this.View(complexModel);            
    }

    [HttpPost]
    public ActionResult Edit(ComplexModel complexModel)
    {
        // code here
        return RedirectToAction("AnotherAction")            
    } 
```

在 post 方法中，我可以成功接收所有对象属性，包括集合之一。但是，我有另一个可以调用 Edit 操作的视图。发生这种情况时，我可以看到呈现的 html 是相同的（即存在嵌套的属性信息）。当我在编辑后保存更改时，我收到了所有正确的属性，但有一个例外 - 集合属性有零项。

我必须在哪里搜索问题？

更新：我正在正确地遍历集合并使用 EditorFor 显示所有项目；但是，当来自具有相同模型的不同视图（不同视图位于另一个控制器中并且编辑链接放置在显示模板中 - 如果这有任何区别）时，我可以看到 html 是相同的，因为所有属性的集合在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:28:15.560

好吧，虚惊一场。我想通了——我正在使用@Html.ActionLink 调用动作方法；我传递了整个模型，而不仅仅是 id。我不知道是什么愚蠢的原因让事情变得一团糟，但现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:08:46.867

您的编辑视图是什么样的？您需要将集合中的所有项目作为表单元素进行迭代。

# ruby-on-rails - 使用rails中的虾合并pdf表格中的单元格

> ID：12982368
> 
> 赞同：1
> 
> 时间：2012-10-19T20:57:23.580
> 
> 标签：ruby-on-rails, ruby, pdf, prawn

我有一个带有标题的单元格，以及它下面的数据。我真的希望那条线消失......是否可以将顶部单元格与底部单元格合并？我想到了一种看起来很hacky的方法是在单元格中使用格式化文本并在文本字符串中创建一个新行\n。这看起来很hacky，这应该怎么做？

想象一下底部两行周围的一个盒子，这就是我的目标，目前在对虾的轨道上，它在下面的每一行周围放置一个盒子......

**Header Test Here**
文本数据字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T09:43:20.887

我不认为我们有这种可能性对虾。曾经，我有同样的需求，我找到的解决方案是分别消除第一个单元格和第二个单元格的底部边框和顶部边框。

```
cell_1 = make_cell(:content => "1", :borders => [:top, :left, :right]
cell_2 = make_cell(:content => "2", :borders => [:bottom, :left, :right] 
```

# javascript - 当初始视图模型加载为空时如何初始化 Knockout 视图模型

> ID：12982376
> 
> 赞同：7
> 
> 时间：2012-10-19T20:58:04.823
> 
> 标签：javascript, asp.net-mvc, knockout.js, knockout-mapping-plugin

我正在使用 Knockout 来实现课程列表选择工具。我正在使用下面的方法来填充数据（MVC3/Razor），因此当最初填充视图模型时，我使用每个 KO 数组（即 CourseList、ScheduleList）都没有问题。但是，当来自服务器的初始加载返回零行时，这意味着视图模型的“ScheduleList”属性为空，则无法调用任何方法，例如 .push() 或 .removeAll()。大概这意味着 observable 数组从未被创建，因为没有任何东西可以填充它。填充模型后，ScheduleList 属性将填充一个列表。当 MVC 操作将其返回为空时，实例化它的最佳方法是什么？有一个 jsFiddle 似乎可以解决它，但是当我尝试使用“创建”选项时，它使我的整个模型空白。我不确定“create”选项的语法是什么。jsFiddle 在这里：[http://jsfiddle.net/rniemeyer/WQGVC/](http://jsfiddle.net/rniemeyer/WQGVC/)

```
// Get the data from the server
var DataFromServer = @Html.Raw(Json.Encode(Model));     

// Data property in viewmodel
var data = {
    "CourseList": DataFromServer.CourseList ,
    "ScheduleList": DataFromServer.ScheduleList
    };

$(function() {
    // Populate Data property
    viewModel.Data = ko.mapping.fromJS(data);   

    // ko.applyBindings(viewModel, mappingOptions);             
    ko.applyBindings(viewModel);
}); 
```

当初始页面加载未填充 ScheduleList 时，以下代码将引发错误。如果初始页面加载包含数据，那么您可以调用 .removeAll() 和 .push() 等。

```
var oneA= 'abc';

// push not working                
this.Data.ScheduleList.push( oneA ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T01:54:17.483

设置你的映射参数以使其在创建时，你给它一个特定的结构。然后它将为您进行更新。

最有可能发生的是您`DataFromServer`实际上根本不包含`ScheduleList`属性。因此，当它被映射时，永远不会产生相应的属性。映射器只会将现有属性映射到可观察对象。

您需要在`create`视图模型的选项中设置以在未设置任一数组时添加空数组。这样，您的视图模型将最终得到相应的可观察数组。

通过确保`CourseList`or`ScheduleList`是一个数组，映射视图模型会将它们映射为`observableArray`对象，因此您的代码将按预期工作。

```
var DataFromServer = {
    'CourseList': [1,2,3]
    //, 'ScheduleList': []
};

var dataMappingOptions = {
    'create': function (options) {
        var data = options.data;
        data.CourseList = data.CourseList || [];
        data.ScheduleList = data.ScheduleList || [];
        return ko.mapping.fromJS(data);
    }
};

viewModel.Data = ko.mapping.fromJS(DataFromServer, dataMappingOptions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:25:40.040

```
var data = {
    CourseList: DataFromServer.CourseList || ko.observableArray([]) ,
    ScheduleList: DataFromServer.ScheduleList  || ko.observableArray([])
    }; 
```

# java - Java 跟踪器/记录器

> ID：12982384
> 
> 赞同：1
> 
> 时间：2012-10-19T20:58:48.820
> 
> 标签：java, jvm

我需要使用数千个 JAR 和 .CLASS 文件来跟踪已编译的 Java 应用程序，你知道任何合适的工具可以附加到 JVM 以跟踪函数调用（没有源代码）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:09:56.647

是的。[Jprofiler](http://www.ej-technologies.com/products/jprofiler/features.html)可以在没有源代码的情况下跟踪其他数据中的方法调用/调用树/分配树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:02:31.363

这是一些内置的跟踪工具，这有帮助吗？

[http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/tracing_logging.html](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/tracing_logging.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T07:50:17.250

这是配置 Jprofiler 的有用链接

[http://resources.ej-technologies.com/jprofiler/help/doc/indexRedirect.html?http&&&resources.ej-technologies.com/jprofiler/help/doc/generalSettings/vm.html](http://resources.ej-technologies.com/jprofiler/help/doc/indexRedirect.html?http&&&resources.ej-technologies.com/jprofiler/help/doc/generalSettings/vm.html)

# c - 使用 struct epoll_event 处理内存

> ID：12982385
> 
> 赞同：16
> 
> 时间：2012-10-19T20:58:58.143
> 
> 标签：c, linux, epoll

我正在使用[epoll 库](http://linux.die.net/man/4/epoll)在 C 中开发服务器，并且我有一个关于如何处理内存的问题`struct epoll_event`。我在一些在线示例中注意到，在进行`epoll_ctl`调用时，`events`参数被分配在堆栈上，然后指针被传递，如下所示：

```
struct epoll_event ev;
ev.events = EPOLLIN;
epoll_ctl(epfd, EPOLL_CTL_ADD, sockfd, &ev); 
```

现在我们都知道`ev`函数返回时会发生什么。我的问题是：epoll 库是在内部复制这些值还是依赖于您传递给堆分配的结构？上面的例子会完全破坏我的反应器实现吗？如果是这样，跟踪我的堆分配`epoll_event`结构的最佳方法是什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T21:03:51.490

一切安好。该`epoll_ctl`函数是对系统调用的简单包装，当函数返回时，系统调用将完全完成。不需要来自用户空间的更多数据。struct 只是一种打包参数的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-19T21:05:15.687

立即丢弃或重用您的 epoll_event 结构绝对没问题。

内核将从 epoll_event 结构体中复制参数。

这与您使用将结构作为参数的 ioctl 或使用 struct sockaddr_in 的套接字操作（例如绑定）完全相同。

内核获取它需要的东西，你可以立即释放它。

您唯一需要担心的是“用户数据”，它只与您相关。内核会存储它，但你需要知道当你得到一个事件时它意味着什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-19T21:06:53.260

`epoll`是一组系统调用，而不是库。当您调用`epoll`系统调用时，您会进入内核，并且内核通常不相信这些用户模式缓冲区一定有效或保留，而是通过`copy_from_user`等方式复制到内核内存中。所以是的，您可以在堆栈上设置结构，将它们的地址传递给系统调用，然后在它返回后丢弃它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T04:06:09.817

众所周知，参数指向的内存`struct epoll_event *`可以在 epoll_ctl() 之后释放或重用。

在[linux/v5.8/source/fs/eventpoll.c#L2288](https://elixir.bootlin.com/linux/v5.8/source/fs/eventpoll.c#L2288)中，我们看到内核复制了 struct epoll_event，这证实了我们的想法。

```
SYSCALL_DEFINE4(epoll_ctl, int, epfd, int, op, int, fd,
        struct epoll_event __user *, event)
{
    struct epoll_event epds;

    if (ep_op_has_event(op) &&
        copy_from_user(&epds, event, sizeof(struct epoll_event)))
        return -EFAULT;

    return do_epoll_ctl(epfd, op, fd, &epds, false);
} 
```

# google-docs-api - 查看重复的集合

> ID：12982386
> 
> 赞同：1
> 
> 时间：2012-10-19T20:59:08.540
> 
> 标签：google-docs-api

我有一个使用 Google Docs API 第 3 版编写的 .Net 应用程序。还没来得及考虑更新到 Drive API。

在过去的几天里，我收到一个客户的报告，他们有时会在我的应用程序上传新文档时创建一个新集合或子集合。我的代码使用“https://docs.google.com/feeds/default/private/full/folder%3Aroot/contents/-/folder”来查找根集合列表，然后根据需要从那里向下钻取使用集合或子集合的 ID 找到插入新项目的适当位置。例如：一级\二级\三级-->新项目。

该程序通常会在查找一级时找到它，但随后会突然创建一个新的一级并在其下添加所有内容（它将根据需要创建子级别）。就像突然之间它会回到使用原始的一级（我可以看到它们有两个名称相同但具有不同 ID 的项目）并且新项目将出现在那里。他们设置了共享原始集合的权限，但重复的集合没有获得这些权限，这会导致真正的问题。

这是某种时间或可用性问题吗？

谢谢！

# javascript - IE9 中选择输入的 change() 事件

> ID：12982387
> 
> 赞同：4
> 
> 时间：2012-10-19T20:59:09.353
> 
> 标签：javascript, jquery, cross-browser, internet-explorer-9

我知道 jQuery 的`change()`方法不会触发 IE9 中的选择和单选输入。但是，我发现的所有解决方法都不适合我。

这是适用于所有体面浏览器的代码：

```
 $("select#orderby").change( function(e){
        console.log("order");
        $("#candidate-filters").submit();
    }); 
```

这是我看到人们在 IE9 中解决此问题的一个版本：

```
 $("select#orderby").bind( ($.browser.msie)? 'propertychange' : 'change', function(e){
        console.log("order");
        $("#candidate-filters").submit();
    }); 
```

这在我尝试时不起作用。控制台中没有错误。只是什么都没有发生。我究竟做错了什么？

**编辑：**当我切换到该`.on()`方法时，我可以导致页面重新加载（可能是由于`.submit()`操作的结果），但没有捕获表单选择输入。页面只是重新加载，就好像没有任何改变一样。

**有用！**但是我忽略了另一部分，其他人可能会发现它有用。IE 不支持 HTML5 属性，该属性允许您在标签`form="form_id"`之外放置一个表单元素。`<form>`因此，一旦我能够绑定事件，我还必须将值附加到表单中：

```
if ($.browser.msie) {
    $("select#orderby").bind( "propertychange", function(e){
        //console.log("order");
        var update = $(this).val();
        $("#candidate-filters").append('<input type="hidden" name="orderby" value="'+ update +'" /> ');
        $("#candidate-filters").submit();
    });
} else {
    $("select#orderby").change( function(e){
        console.log("order");
        $("#candidate-filters").submit();
    });
} 
```

**我说得太早了：** 上面的代码只适用于 IE8，但不适用于 IE9。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:05:37.757

这个**[例子](http://jsfiddle.net/xtKtS/)**在 IE9 的 jsfiddle 中对我来说似乎很好用：

**jQuery**

```
$("#test").on("change", function(){
    alert("test changed to: " + this.value)
})​; 
```

**HTML**

```
<select id="test">
  <option>1</option>
  <option>2</option>
  <option>3</option>
</select> 
```

也有可能使用 on 的选项`blur`，但这绝对取决于具体情况。

**另外**，请注意这`console.log`在 IE 中不起作用......这可能是您问题的一部分。正如@MikeMcCaughan 在评论中所说，控制台应该与 IE 开发工具一起使用。

请在[此处](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)查看兼容性表。看起来`form`IE 中可能还不支持该属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T21:13:39.847

你有没有尝试改变

```
 $("select#orderby").change( function(e){
        console.log("order");
        $("#candidate-filters").submit();
    }); 
```

至

```
 $("select#orderby").click( function(e){
        console.log("order");
        $("#candidate-filters").submit();
    }); 
```

或使用 .on() 或 .live() ，具体取决于您的 jquery 版本，这对我有用，它也来自[Here on SO](https://stackoverflow.com/questions/208471/getting-jquery-to-recognise-change-in-ie)

# ios - Bonjour 不在 BT 上做广告

> ID：12982389
> 
> 赞同：3
> 
> 时间：2012-10-19T20:59:16.687
> 
> 标签：ios, ios5, bluetooth, bonjour

在过去一周左右的时间里，我一直在反对这个。我已经浏览了以下资源：

*   StackOverflow：在没有 Gamekit 的情况下通过蓝牙享受 Bonjour ？(3844189)
*   StackOverflow：Bonjour Over Bluetooth 是如何工作的 (3350094)
*   StackOverflow：在其他平台上使用 iOS GameKit 的“Bluetooth Bonjour” (8070998)
*   技术问答 QA1753 -- Apple Developer
*   WiTap 示例应用程序
*   SRVResolver 示例应用程序
*   DNSSDObjects 示例应用程序

我正在使用 Mac OS 10.7、Xcode 4.5、带有 iOS 6 的 iPhone 4 和带有 iOS 5.1.1 的 iPad 1。

我的问题是这样的：我正在修改一个应用程序，该应用程序当前使用 GameKit 的对等选择器在 iPad 和 iP{hone|od touch} 之间进行连接。我们想修改它以通过蓝牙使用 Bonjour，因为如果连接丢失，我们在使用 Gamekit 重新连接设备时遇到了问题。我已经使用 dns_sd.h API 取得了一些成功，并且已经获得了通过 wifi 进行广告和解析的服务，但是即使我通过了 kDNSServiceFlagsIncludeP2P，我也没有通过蓝牙获得任何成功。

我认为蓝牙 Bonjour 可能已经需要在设备之间建立 PAN，但即使将 iPad 与 iMac 配对并浏览 DNS-SD 服务也没有给我任何帮助……而且 iPhone 无论如何也不会与 iPad 配对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:38:15.657

在过去的 24 小时内，我刚刚在自己的应用程序中解决了这个问题。我使用了 OS X 示例应用程序 DNSSDObjects 中的核心类。我只需要更改三行代码即可添加对蓝牙的支持。这在我的 iOS 应用程序中效果很好。

在 DNSSDBrowser.m 中，调用`DNSServiceBrowse`需要为第二个参数传入**kDNSServiceFlagsIncludeP2P**。

在 DNSSDRegister.m 中，调用`DNSServiceRegister`需要进行相同的更改。

在 DNSSDService.m 中，对 的调用`DNSServiceResolve`也需要进行相同的更改。

如果您想将自己限制为仅使用蓝牙而不是 WiFi，则应更新相同的三行代码，因此第三个参数是**kDNSServiceInterfaceIndexP2P**而不是**kDNSServiceInterfaceIndexAny**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T08:41:29.037

实际上，看起来 kDNSServiceInterfaceIndexP2P 标志在 OSX 上不起作用。

如果您在 IOS 上运行代码，您会注意到 Bonjour 将发布两个 IP 地址：一个用于您的本地 WiFi 网络，一个用于蓝牙的 169.xx.xx.xx 地址。

OSX 上的相同代码从不发布 169.xx.xx.xx 地址，因此只能通过 WiFi 找到。

# java - 带有 Java 的 XML 输入/输出

> ID：12982390
> 
> 赞同：1
> 
> 时间：2012-10-19T20:59:17.213
> 
> 标签：java, xml, fitnesse

此处回答了此问题的 .net 版本：[XML input/output with Fitnesse](https://stackoverflow.com/questions/10248251/xml-input-output-with-fitnesse)

我需要使用 Fitnesse 的 Java 版本来做到这一点，而且似乎没有类似的东西。我有一些接受 XML 并返回 XML 的测试，因此我需要输入和预期输出来处理字段中的 XML。我尝试了各种 html 转义，但这似乎并没有在比较方面完成工作。XML 是任意的，因此我无法将其解析为域对象并比较各个字段（好吧，我可以，但会有大量不同的对象映射）。

任何人都可以找到以通用方式处理此问题的方法吗？存在于某处的 .net 解决方案的自定义 Java 等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:08:39.680

不确定这是否是最佳解决方案。您可能想要使用一些 XML 框架，例如[**XStream**](http://xstream.codehaus.org/)，它具有非常简单的 API 可以转换`XML`为`JAVA`对象。使用它，您可能希望在 JAVA 中转换两个 XML 文件并使用 JAVA 比较。

简单的步骤是：

1.  定义简单 Java 对象 (POJO)，例如`MyXMLObj`将 XML 属性映射到 Java 属性中。
2.  `equals`在上述 POJO 类中创建/生成方法`MyXMLObj`。
3.  将 Java 中的 XML 转换为：

    ```
    XStream xstream = new XStream();
    XStream xstream = new XStream(new DomDriver());
    //or
    //XStream xstream = new XStream(new StaxDriver());

     MyXMLObj myXMLObj1= (MyXMLObj)xstream.fromXML(xml1);
     MyXMLObj myXMLObj2= (MyXMLObj)xstream.fromXML(xml2); 
    ```

4.  只需将两个对象比较为：

    ```
     if(myXMLObj1.equals(myXMLObj2)){
        System.out.println("Matching");
     }else{
        System.out.println("Not Matching");
     } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T14:41:46.167

我遇到了类似的情况，其中 xml 响应将来可能会发生变化或始终无法确认特定样式，或者 xml 不作为 xml 对象返回，而是返回字符串等。

我写了一个通用的fixture，它接受一个xml字符串并解析它给我们一个xml doc对象。我还将从 wiki 捕获 xml 元素路径和预期值，并确认预期值是存储在 xml 中还是不使用 xpath。

```
!|ValidateXmlValue                                                                |
|xmlString|xmlElem                                       |getXMLvalue?            |
|$respBody|/root/childnode1/                             |${variable}             | 
```

通过这种方式，用户可以灵活地查询节点值，只需提供该节点的完整路径并将其与输入变量等进行比较。即使发生变化，也只需要更改测试（您可以将每个 xml 元素的路径存储在变量以及，作为设置步骤的一部分）

# html - 使用 grunt js，如何动态添加 to static html files?

More specifically, I want to add the titles by referencing an external JSON file, let's call it titles.json.

One of the things I use grunt for is

> ID：12982396
> 
> 赞同：7
> 
> 时间：2012-10-19T21:00:07.747
> 
> 标签：html, json, build-process, concatenation, gruntjs

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-21T19:26:59.550

这是我对此的看法。使用 grunt 的标准模板机制，页面元数据定义在一个对象中，在实际页面文件之外，正如你所建议的（我不能说我喜欢这个）。

**gruntfile**（包括`wrap`来自[使用 grunt concat 的任务，我将如何自动将同一文件连接到许多其他文件？](https://stackoverflow.com/questions/12722855/using-grunt-concat-how-would-i-automate-the-concatenation-of-the-same-file-to-m?lq=1)）：

```
/*global module:false*/    
module.exports = function(grunt) {

  // Project configuration.
  grunt.initConfig({
    meta: {
      version: '0.1.0',
      banner: '/*! PROJECT_NAME - v<%= meta.version %> - ' +
        '<%= grunt.template.today("yyyy-mm-dd") %>\n' +
        '* http://PROJECT_WEBSITE/\n' +
        '* Copyright (c) <%= grunt.template.today("yyyy") %> ' +
        'YOUR_NAME; Licensed MIT */'
    },

    // Paths
    project: {
      partials: 'assets/partials',  // don't put trailing slash
      pages:    'assets/pages',     // don't put trailing slash
      less:     'assets/less',
      css:      'assets/css',
      img:      'assets/img',
      js:       'assets/js'
    },

    // Used for page title and nav generation.
    // It's an array to ensure correct order for nav
    pages: [{   
        file: 'index.html',
        title: 'My homepage'
        /* This format can be extended to something like:
         * {
         *      title: 'My homepage',
         *      header: 'Welcome to my site',
         *      navtitle: 'Home'
         * }
         * Although I think it's best to keep page metadata as close to content as possible,
         * i.e. right inside pages files (think YAML headers in Jekyll pages)  
         */
    }, {
        file: 'about.html',
        title: 'About me'
    }, {
        file: 'contact.html',
        title: 'Contact'
    }],

    // wraps files with header and footer
    wrap: {
        html: {
            header: '<%= project.partials %>/head.tmpl',
            footer: '<%= project.partials %>/footer.tmpl',
            src: [
                '<%= project.pages %>/index.html',
                '<%= project.pages %>/about.html',
                '<%= project.pages %>/contact.html'
            ],
            dest: '.'   // destination *directory*, probably better than specifying same file names twice
        }
    },

    // processes templates in page files
    buildPages: {
        pages: '<config:pages>',    // page files metadata
        dir: '.'                    // page files location dir
    }

  });

  // Default task.
  grunt.registerTask('default', 'wrap buildPages');

  grunt.registerMultiTask('wrap', 'Wraps source files with specified header and footer', function() {
        var data = this.data,
            path = require('path'),
            dest = grunt.template.process(data.dest),
            files = grunt.file.expandFiles(this.file.src),
            header = grunt.file.read(grunt.template.process(data.header)),
            footer = grunt.file.read(grunt.template.process(data.footer)),
            sep = grunt.utils.linefeed; 

        files.forEach(function(f) {
            var p = dest + '/' + path.basename(f),
                contents = grunt.file.read(f);

            grunt.file.write(p, header + sep + contents + sep + footer);
            grunt.log.writeln('File "' + p + '" created.');
        });
  });

  grunt.registerTask('buildPages', 'Processes templates in page files', function() {
  // NOTE: current implementation replaces files
    var data = grunt.config('buildPages'),
        pages = data.pages,
        dir = data.dir,
        contents,
        curPath;

    pages.forEach(function(page) {
        curPath = dir + '/' + page.file;
        contents = grunt.file.read(curPath);

        // feed the entire pages array and current entry to the template
        grunt.file.write(curPath, grunt.template.process(contents, {
            pages: pages,
            curPage: page
        }));
        grunt.log.writeln('Page at "' + curPath + '" built.');
    });
  });
}; 
```

**头.tmpl：**

```
<!DOCTYPE html>
<html>
    <head>
        <title><%= curPage.title %></title>
    </head>
    <body>
        <!-- NAV -->
        <ul class="nav">
            <%
                pages.forEach(function(p) {
                    print(
                        '<li class="' + ((curPage === p) ? 'active' : '') + '">' +
                            ((curPage === p) ? p.title : ('<a href="' + p.file + '">' + p.title + '</a>')) + 
                        '</li>\n'
                    );
                });
            %>
        </ul>
        <!-- /NAV -->

        <!-- MAIN CONTENT -->
        <div class="main"> 
```

**页脚.tmpl：**

```
 </div>
        <!-- /MAIN CONTENT -->
    </body>
</html> 
```

# social-networking - 组唯一 ID

> ID：12982397
> 
> 赞同：1
> 
> 时间：2012-10-19T21:00:12.193
> 
> 标签：social-networking, stata

在stata中，如果我有一个列表，如果组：XYZ ABC ABC BCH JSA BCH XYZ 我如何让每个组在排序后的第二列中具有唯一的ID，例如：

```
ABC 1
BCH 2
JSA 3
XYZ 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T11:40:54.880

`sort`那么，你需要`group()`，这是其中的一部分`egen`。

```
sysuse auto,clear
sort make
egen make_gp = group(make) 
```

这产生：

```
. list make make_gp in 1/5

     +-------------------------+
     | make            make_gp |
     |-------------------------|
  1\. | AMC Concord           1 |
  2\. | AMC Pacer             2 |
  3\. | AMC Spirit            3 |
  4\. | Buick Century         7 |
  5\. | Buick Electra         8 |
     +-------------------------+ 
```

# php - phpolait 框架 JSONRpcProxy 函数

> ID：12982398
> 
> 赞同：1
> 
> 时间：2012-10-19T21:00:19.777
> 
> 标签：php, javascript, ajax, class, frameworks

您好 stackoverflow country ，来到这里的原因是 2006 年发布的名为 phpolait 的 php 框架（可以从[phpolait](http://www.phpkode.com/projects/item/phpolait/)下载，文档可以从 [文档](http://phpolait.sourceforge.net/doc/index.html)中看到）

如果有人正在使用或知道**JSONRpcProxy**函数的工作原理可能有助于解决一个小问题。

首先，在我的 web 根目录中，我有一个名为 /test/ 的目录，我在其中放置了 phpolait 框架。我正在创建文件 info.php 和 function.php

info.php 源 =>

```
<?php
require_once("./phpolait/phpolait.php");
$proxy = new JSONRpcProxy("http://127.0.0.1/test/function.php");

echo $proxy->power(2,2);
?> 
```

函数.php 源 =>

```
class Math{
    public function power($x,$y){
        return pow($x,$y);
    }
    public function fact($x){
        if ($x==0){
        return 1;
        } else {
            $x *= $this->fact($x-1);
        }
        return $x;
    }
};

new JSONRpcServer(new Math()); 
```

当试图访问 info.php 文件时，它会出现数组 =>

`Array ( [0] => [1] => JSON-RPC call failed. [2] => )`

我已经阅读过文档，但是您如何看待我遗漏了一些重要的东西，所以如果有人对这个框架有任何了解，可以帮我一把，我会很高兴，谢谢 :)

PS。并且还对继续改进的 phpolait 框架的任何替代方案感兴趣，至少有更新的版本

# java - 复利计划不会计算

> ID：12982401
> 
> 赞同：0
> 
> 时间：2012-10-19T21:00:38.327
> 
> 标签：java, android

我一直试图让这个程序工作，但由于某种原因它不会计算复利。一点帮助将不胜感激。请注意，对于在 CompoundInterestEditText 字段中输入的任何值，我都没有完成 if 语句。我希望它能与我所拥有的一起工作。endValueEditText 甚至不会更新。

主.java：

```
 package com.example.compoundinterest;

import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;
import android.widget.Spinner;
import android.app.Activity;

public class Main extends Activity {

    //contants used when saving and restoring state
        private static final String CAPITAL_TOTAL = "CAPITAL_TOTAL";
        private static final String INTEREST_RATE = "INTEREST_RATE";
        private static final String YEARS_GROW = "YEARS_GROW";
        private static final String ANNUAL_ADDITION = "ANNUAL_ADDITION";
        private static final String COMPOUND_RATE = "COMPOUND_RATE";
        private static final String END_VALUE = "END_VALUE";

    //double values for calculations
    private double currentCapital;
    private double currentInterestRate;
    private double currentYearsToGrow;
    private double currentAnnualAddition;
    private double currentCompoundInterest;
    private double currentEndValue;

        //declare variables to be used
        private EditText capitalEditText;
        private EditText interestRateEditText;
        private EditText yearsToGrowEditText;
        private EditText annualAdditionEditText;
        private EditText compoundInterestEditText;
        private EditText endValueEditText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

      //check if app has been started or being restored from memory
        if(savedInstanceState == null) {
            currentCapital = 0.0;//initialize the capital amount to zero
            currentInterestRate = 0;//initialize the interest rate to zero
            currentYearsToGrow = 0;//initialize the years to grow to zero
            currentAnnualAddition = 0;//initialize the annual addition to zero
            currentCompoundInterest = 0;//initialize the interest rate to zero
            currentEndValue = 0;//initialize the end value to zero
        }//end if

        else//app is being restored from memory, not executed from scratch
        {
            //initialize the capital amount to saved amount
            currentCapital = savedInstanceState.getDouble(CAPITAL_TOTAL);

            //initialize interest rate to saved amount
            currentInterestRate = savedInstanceState.getInt(INTEREST_RATE);

            //initialize years to grow amount to saved amount
            currentYearsToGrow = savedInstanceState.getInt(YEARS_GROW);

            //initialize annual addition amount to saved amount
            currentAnnualAddition = savedInstanceState.getInt(ANNUAL_ADDITION);

            //initialize compound interest rate amount to saved amount
            currentCompoundInterest = savedInstanceState.getInt(COMPOUND_RATE);

            //initialize end value amount to saved amount
            currentEndValue = savedInstanceState.getInt(END_VALUE);

        }//end else

        //get references to EditText fields
        capitalEditText = (EditText) findViewById(R.id.capitalEditText);
        interestRateEditText = (EditText) findViewById(R.id.interestRateEditText);
        yearsToGrowEditText = (EditText) findViewById(R.id.yearsToGrowEditText);
        annualAdditionEditText = (EditText) findViewById(R.id.annualAdditionEditText);
        compoundInterestEditText = (EditText) findViewById(R.id.compoundInterestEditText);
        endValueEditText = (EditText) findViewById(R.id.endValueEditText);

        endValueEditText.addTextChangedListener(endValueEditTextWatcher);

    }//end of method onCreate

    //function for updating the values as the numbers entered by user are changed
    private void updateValue() {

        if(currentCompoundInterest == 1) {

            double finalCalculation = currentCapital * (1 + currentInterestRate);
            endValueEditText.setText(String.format("%.02f", finalCalculation));
        }

        else if(currentCompoundInterest ==2) {

        }

        else if(currentCompoundInterest==3) {

        }

        else if(currentCompoundInterest==4) {

        }

    }//end of updateValue() function

    //main function to aid in updating the user input
    private TextWatcher endValueEditTextWatcher = new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {

            //convert billEditText's text to a double
            try {
                currentCapital = Double.parseDouble(s.toString());
                currentInterestRate = Double.parseDouble(s.toString());
                currentYearsToGrow = Double.parseDouble(s.toString());
                currentAnnualAddition = Double.parseDouble(s.toString());
                currentCompoundInterest = Double.parseDouble(s.toString());
                currentEndValue = Double.parseDouble(s.toString());
            }//end try
            catch (NumberFormatException e)
            {
                currentCapital = 0.0;//default if an exception occurs
                currentInterestRate = 0.0;//default if an exception occurs
                currentYearsToGrow = 0.0;//default if an exception occurs
                currentAnnualAddition = 0.0;//default if an exception occurs
                currentCompoundInterest = 0.0;//default if an exception occurs
                currentEndValue = 0.0;//default if an exception occurs
            }//end catch

            //run updateValue Function
            updateValue();

        }//end of onTextChanged inner onTextChanged

        public void afterTextChanged(Editable s)
        {
        }//end method afterTextChanged

        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
        }//end method beforeTextChanged

    };//end of endValueEditTextWatcher

}//end of Compound Interest function 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow
        android:id="@+id/tableRow7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/instructionsTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="20dp"
            android:paddingTop="5dp"
            android:text="Enter Value to be borrowed or invested:"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="14sp" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/capitalTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Capital" />

        <EditText
            android:id="@+id/capitalEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberDecimal" >

            <requestFocus />
        </EditText>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/interestRateTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Interest Rate (%)" />

        <EditText
            android:id="@+id/interestRateEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberDecimal" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/yearsToGrowTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Years To Grow" />

        <EditText
            android:id="@+id/yearsToGrowEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="numberDecimal" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/annualAdditionTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Annual Addition" />

        <EditText
            android:id="@+id/annualAdditionEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" 
            android:inputType="numberDecimal"/>

    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/compoundInterestTextView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Compound Interest" />

        <EditText
            android:id="@+id/compoundInterestEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="50dp" >

<TextView
    android:id="@+id/endValueTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:paddingTop="20dp"
    android:text="End Value" />

        <EditText
            android:id="@+id/endValueEditText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:ems="10"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:inputType="numberDecimal" />

    </TableRow>

</TableLayout> 
```

日志猫：

```
10-19 15:30:59.251: E/CircleShortcutWidget(641): density = 320
10-19 15:30:59.251: E/CircleShortcutWidget(641): pkg name =com.android.contacts, activityName=com.android.contacts.activities.DialtactsActivity
10-19 15:30:59.251: D/CircleShortcutWidget(641): mIconWidth =0
10-19 15:30:59.251: D/PhoneStatusBar(777): disable: < expand icons alerts ticker system_info BACK* HOME RECENT CLOCK* >
10-19 15:30:59.261: D/CircleShortcutWidget(641): BitmapDrawable
10-19 15:30:59.261: E/CircleShortcutWidget(641): pkg name =com.android.mms, activityName=com.android.mms.ui.ConversationComposer
10-19 15:30:59.261: D/CircleShortcutWidget(641): mIconWidth =0
10-19 15:30:59.261: D/CircleShortcutWidget(641): BitmapDrawable
10-19 15:30:59.261: E/CircleShortcutWidget(641): pkg name =com.sec.android.widgetapp.diotek.smemo, activityName=com.sec.android.widgetapp.q1_penmemo.MemoListActivity
10-19 15:30:59.261: D/CircleShortcutWidget(641): mIconWidth =0
10-19 15:30:59.261: D/CircleShortcutWidget(641): BitmapDrawable
10-19 15:30:59.261: E/CircleShortcutWidget(641): pkg name =com.sec.android.app.camera, activityName=com.sec.android.app.camera.Camera
10-19 15:30:59.261: D/CircleShortcutWidget(641): mIconWidth =0
10-19 15:30:59.261: D/CircleShortcutWidget(641): BitmapDrawable
10-19 15:30:59.261: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.271: D/CircleLockScreen(641): onRefreshBatteryInfo() showPatteryInfo: true pluggedIn: true batteryLevel: 76
10-19 15:30:59.271: D/ClockWidget(641): refreshTime()
10-19 15:30:59.281: D/ClockWidget(641): TTS Message = It is 3 : 30 PM, Friday, October 19
10-19 15:30:59.281: W/LockPatternKeyguardView(641): Couldn't find transport control widget
10-19 15:30:59.281: D/ClockWidget(641): refreshTime()
10-19 15:30:59.291: D/ClockWidget(641): TTS Message = It is 3 : 30 PM, Friday, October 19
10-19 15:30:59.291: D/ClockWidget(641): isServiceEnable = false cityId = cityId:347628
10-19 15:30:59.291: D/ClockWidget(641): Weather Demon is not running, Set visibility to GONE
10-19 15:30:59.301: E/LockPatternKeyguardView(641): mResetWakeLock.release()
10-19 15:30:59.311: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.321: D/KeyguardUpdateMonitor(641): handleClockVisibilityChanged()
10-19 15:30:59.321: D/KeyguardViewMediator(641): adjustStatusBarLocked: mShowing=true mHidden=false isSecure=false --> flags=0x1200000
10-19 15:30:59.331: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.331: D/KeyguardUpdateMonitor(641): handleClockVisibilityChanged()
10-19 15:30:59.331: D/KeyguardViewMediator(641): adjustStatusBarLocked: mShowing=true mHidden=false isSecure=false --> flags=0x1200000
10-19 15:30:59.331: D/STATUSBAR-StatusBarManagerService(641): manageDisableList what=0x1200000 pkg=android
10-19 15:30:59.331: D/STATUSBAR-StatusBarManagerService(641): manageDisableList what=0x1200000 pkg=android
10-19 15:30:59.351: D/memalloc(331): ion: Allocated buffer base:0x439ad000 size:3674112 fd:11
10-19 15:30:59.351: D/memalloc(641): ion: Mapped buffer base:0x65c51000 size:3674112 offset:0 fd:386
10-19 15:30:59.371: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.371: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.371: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.381: I/Adreno200-EGLSUB(331): <GetImageAttributes:1102>: RGBA_8888
10-19 15:30:59.381: D/memalloc(331): ion: Freeing buffer base:0x449ea000 size:1884160 fd:35
10-19 15:30:59.381: D/memalloc(331): ion: Freeing buffer base:0x446ca000 size:3276800 fd:37
10-19 15:30:59.381: I/Adreno200-EGLSUB(777): <ConfigWindowMatch:2078>: Format RGBA_8888.
10-19 15:30:59.391: D/memalloc(331): ion: Allocated buffer base:0x446ca000 size:3485696 fd:35
10-19 15:30:59.401: D/memalloc(331): ion: Allocated buffer base:0x44abd000 size:3768320 fd:37
10-19 15:30:59.401: D/memalloc(777): ion: Mapped buffer base:0x6022d000 size:3485696 offset:0 fd:103
10-19 15:30:59.411: D/memalloc(10083): ion: Mapped buffer base:0x5ce44000 size:3768320 offset:0 fd:52
10-19 15:30:59.441: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.441: I/Adreno200-EGLSUB(331): <GetImageAttributes:1158>: RGBX_8888
10-19 15:30:59.441: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.491: D/dalvikvm(777): GC_FOR_ALLOC freed 2139K, 20% free 21315K/26595K, paused 68ms
10-19 15:30:59.562: D/memalloc(331): ion: Allocated buffer base:0x4563a000 size:3485696 fd:48
10-19 15:30:59.562: D/memalloc(777): ion: Mapped buffer base:0x60580000 size:3485696 offset:0 fd:106
10-19 15:30:59.562: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.562: I/Adreno200-EGLSUB(331): <GetImageAttributes:1102>: RGBA_8888
10-19 15:30:59.562: D/memalloc(331): ion: Freeing buffer base:0x427ad000 size:3276800 fd:45
10-19 15:30:59.562: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.562: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.562: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.572: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.572: D/memalloc(331): ion: Allocated buffer base:0x421c7000 size:94208 fd:45
10-19 15:30:59.572: D/memalloc(331): ion: Freeing buffer base:0x42312000 size:163840 fd:36
10-19 15:30:59.572: D/memalloc(777): ion: Mapped buffer base:0x5dd63000 size:94208 offset:0 fd:100
10-19 15:30:59.572: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.582: W/SurfaceFlinger(331): id=19405(2764) createSurface (1440x1280),-1 flag=20000
10-19 15:30:59.582: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.582: I/Adreno200-EGLSUB(331): <GetImageAttributes:1088>: RGB_565
10-19 15:30:59.602: W/SurfaceFlinger(331): id=19406(2765) createSurface (720x2560),-1 flag=20000
10-19 15:30:59.612: D/memalloc(331): ion: Allocated buffer base:0x427ad000 size:3674112 fd:36
10-19 15:30:59.612: D/memalloc(641): ion: Mapped buffer base:0x65fd2000 size:3674112 offset:0 fd:395
10-19 15:30:59.612: W/SurfaceFlinger(331): id=19407(2766) createSurface (1440x1280),-1 flag=20000
10-19 15:30:59.632: W/SurfaceFlinger(331): id=19408(2767) createSurface (720x2560),-1 flag=20000
10-19 15:30:59.632: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.632: I/Adreno200-EGLSUB(331): <GetImageAttributes:1102>: RGBA_8888
10-19 15:30:59.632: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.632: W/SurfaceFlinger(331): id=19403 Removed idx=11 Map Size=5
10-19 15:30:59.632: W/SurfaceFlinger(331): id=19405 Removed idx=7 Map Size=5
10-19 15:30:59.632: W/SurfaceFlinger(331): id=19403 Removed idx=-2 Map Size=5
10-19 15:30:59.632: W/SurfaceFlinger(331): id=19406 Removed idx=7 Map Size=5
10-19 15:30:59.632: W/SurfaceFlinger(331): id=19405 Removed idx=-2 Map Size=5
10-19 15:30:59.642: W/SurfaceFlinger(331): id=19407 Removed idx=7 Map Size=5
10-19 15:30:59.642: W/SurfaceFlinger(331): id=19406 Removed idx=-2 Map Size=5
10-19 15:30:59.642: W/SurfaceFlinger(331): id=19408 Removed idx=7 Map Size=5
10-19 15:30:59.642: W/SurfaceFlinger(331): id=19407 Removed idx=-2 Map Size=5
10-19 15:30:59.642: W/SurfaceFlinger(331): id=19408 Removed idx=-2 Map Size=5
10-19 15:30:59.652: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.652: D/memalloc(331): ion: Allocated buffer base:0x4598d000 size:3768320 fd:55
10-19 15:30:59.652: D/memalloc(10083): ion: Mapped buffer base:0x5d2dc000 size:3768320 offset:0 fd:59
10-19 15:30:59.662: D/KeyguardViewMediator(641): setHidden false
10-19 15:30:59.672: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.672: I/Adreno200-EGLSUB(331): <GetImageAttributes:1158>: RGBX_8888
10-19 15:30:59.722: D/memalloc(331): ion: Allocated buffer base:0x44e55000 size:3485696 fd:64
10-19 15:30:59.722: D/memalloc(777): ion: Mapped buffer base:0x60a9d000 size:3485696 offset:0 fd:109
10-19 15:30:59.722: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:30:59.722: I/Adreno200-EGLSUB(331): <GetImageAttributes:1102>: RGBA_8888
10-19 15:30:59.992: D/KeyguardUpdateMonitor(641): received broadcast android.intent.action.TIME_TICK
10-19 15:30:59.992: D/KeyguardUpdateMonitor(641): handleTimeUpdate
10-19 15:30:59.992: W/AlarmManager(641): FACTORY_ON= 0
10-19 15:31:00.002: D/STATUSBAR-Clock(777): onReceive() - ACTION_TIME_TICK
10-19 15:31:00.002: D/STATUSBAR-Clock(777): updateClock :3:31 PM
10-19 15:31:00.002: D/STATUSBAR-DateView(777): updateClock :10/19/2012
10-19 15:31:00.052: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:31:00.052: I/Adreno200-EGLSUB(331): <GetImageAttributes:1102>: RGBA_8888
10-19 15:31:00.062: D/ClockWidget(641): refreshTime()
10-19 15:31:00.072: D/ClockWidget(641): TTS Message = It is 3 : 31 PM, Friday, October 19
10-19 15:31:00.092: D/memalloc(331): ion: Allocated buffer base:0x45d25000 size:3674112 fd:71
10-19 15:31:00.092: D/memalloc(641): ion: Mapped buffer base:0x66353000 size:3674112 offset:0 fd:400
10-19 15:31:00.102: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:31:00.112: I/Adreno200-EGLSUB(331): <GetImageAttributes:1102>: RGBA_8888
10-19 15:31:00.142: E/SMD(327): DCD ON
10-19 15:31:00.152: D/memalloc(331): ion: Allocated buffer base:0x4614b000 size:3768320 fd:74
10-19 15:31:00.152: D/memalloc(10083): ion: Mapped buffer base:0x5d674000 size:3768320 offset:0 fd:62
10-19 15:31:00.162: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:31:00.162: I/Adreno200-EGLSUB(331): <GetImageAttributes:1158>: RGBX_8888
10-19 15:31:00.763: D/BatteryService(641): update start
10-19 15:31:00.763: D/KeyguardUpdateMonitor(641): received broadcast android.intent.action.BATTERY_CHANGED
10-19 15:31:00.763: D/BatteryService(641): level:76 scale:100 status:2 health:2 present:true voltage: 4138 temperature: 289 technology: Li-ion AC powered:false USB powered:true icon:17303135 invalid charger:0
10-19 15:31:00.763: D/ThermistorObserver(641): mBatteryBRForAMOLED : onReceive() : newTemperature : 289
10-19 15:31:00.773: E/MTPJNIInterface(6119): In MTPJNIINterface onReceive:android.intent.action.BATTERY_CHANGED
10-19 15:31:00.773: D/KeyguardUpdateMonitor(641): handleBatteryUpdate
10-19 15:31:00.773: D/memalloc(331): ion: Allocated buffer base:0x42269000 size:94208 fd:77
10-19 15:31:00.773: D/memalloc(331): ion: Freeing buffer base:0x4233a000 size:163840 fd:61
10-19 15:31:00.773: D/memalloc(777): ion: Mapped buffer base:0x5dd95000 size:94208 offset:0 fd:52
10-19 15:31:00.773: I/Adreno200-EGLSUB(331): <CreateImage:893>: Android Image
10-19 15:31:00.773: I/Adreno200-EGLSUB(331): <GetImageAttributes:1088>: RGB_565
10-19 15:31:00.773: D/STATUSBAR-BatteryController(777): onReceive() - ACTION_BATTERY_CHANGED
10-19 15:31:00.773: D/STATUSBAR-BatteryController(777): onReceive() - level:76
10-19 15:31:00.773: D/STATUSBAR-BatteryController(777): onReceive() - plugged:2
10-19 15:31:00.773: D/STATUSBAR-BatteryController(777): onReceive() - BATTERY_STATUS_CHARGING:
10-19 15:31:01.113: E/MP-Decision(1348): DOWN Ld:59 Ns:1.100000 Ts:190 rq:0.000000 seq:196.000000
: E/(): Device disconnected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:28:59.680

我猜你会收到一个堆栈溢出异常，因为`setText()`调用`onTextChanged()`哪个调用`updateValues()`哪个调用`setText()`哪个调用......（一遍又一遍）。只需向您的 TextWatcher 添加一个布尔值：

```
private TextWatcher endValueEditTextWatcher = new TextWatcher() {
    boolean update = false;
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        update = !update;
        if(!update)
            return;

        ...
    }
} 
```

* * *

但我认为你创建了一个奇怪的用户界面：只有当用户输入一个值`endValueEditText`时才会`updateValues()`运行。我认为您应该创建一个标有“计算兴趣”的按钮，并改为读取此按钮的 OnClickListener 中的 EditText 值。您还应该更改`endValueEditText`为 TextView，因为用户调用确实更改了此值。

# android - 我需要以编程方式在我的表格行中调整 imageView 的大小

> ID：12982404
> 
> 赞同：1
> 
> 时间：2012-10-19T21:00:55.097
> 
> 标签：android

我试图设置我的`ImageView`调整大小，但它不能通过位图或其他方法工作我将放置我的代码所以如果有人可以帮助我如何调整大小`ImageView`以适应表格行thnx。

```
public class Test extends Activity
{
    private TableLayout Table1;
    protected void onCreate(Bundle savedInstanceState) 
    { 
        int[] ImageArray={R.raw.hospital_image,R.raw.hotel_image};
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favorites);
        Table1 = (TableLayout) findViewById(R.id.Table);
        TableRow.LayoutParams tableRowParams = new TableRow.LayoutParams(
                TableRow.LayoutParams.WRAP_CONTENT,
                TableRow.LayoutParams.WRAP_CONTENT, 1.0f);
        for(int i=0;i<ImageArray.length;i++)
        {
            TableRow TR = new TableRow(this);
            TR.setLayoutParams(tableRowParams);
            ImageView img=new ImageView(this);
            //What should i do here to resize it ???
            Drawable d = getResources().getDrawable(ImageArray[i]);
            img.setImageDrawable(d); 

            TR.addView(img, new TableRow.LayoutParams(
                    TableRow.LayoutParams.WRAP_CONTENT,
                    TableRow.LayoutParams.WRAP_CONTENT, 1.0f));

            Table1.addView(TR);
        }
    } 
```

我的 XML 只包含这些：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >

        <TableLayout
            android:id="@+id/Table1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T21:21:31.280

尝试这个，

```
public class ResizableImageView extends ImageView {
    public ResizableImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ResizableImageView(Context context) {
        super(context);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        Drawable d = getDrawable();
        if (d == null) {
            super.setMeasuredDimension(widthMeasureSpec, heightMeasureSpec);
            return;
        }

        int imageHeight = d.getIntrinsicHeight();
        int imageWidth = d.getIntrinsicWidth();

        int widthSize = MeasureSpec.getSize(widthMeasureSpec);
        int heightSize = MeasureSpec.getSize(heightMeasureSpec);

        float imageRatio = 0.0F;
        if (imageHeight > 0) {
            imageRatio = imageWidth / imageHeight;
        }
        float sizeRatio = 0.0F;
        if (heightSize > 0) {
            sizeRatio = widthSize / heightSize;
        }

        int width;
        int height;
        if (imageRatio >= sizeRatio) {
            // set width to maximum allowed
            width = widthSize;
            // scale height
            height = width * imageHeight / imageWidth;
        } else {
            // set height to maximum allowed
            height = heightSize;
            // scale width
            width = height * imageWidth / imageHeight;
        }

        setMeasuredDimension(width, height);
    }
} 
```

在你的布局中使用它，就像你以前`ImageView`一样，只需更改标签，就像这样，

```
 <com.example.ResizableImageView
            android:id="@+id/image"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:padding="1px"
            android:scaleType="fitCenter"
            android:src="..." /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:10:24.937

`setLayoutParams()`应该做的伎俩，在你的情况下，我相信你需要`TableRow.LayoutParams`，像这样：

```
ImageView img = new ImageView(this);
img.setLayoutParams(new TableRow.LayoutParams(w, h)); 
```

* * *

**编辑**

尝试在`Drawable`之前设置`setLayoutParams`：

```
ImageView img = new ImageView(this);
Drawable d = getResources().getDrawable(ImageArray[i]);
img.setImageDrawable(d);
img.setLayoutParams(new TableRow.LayoutParams(w, h)); 
```

# python - 如何让 setuptools（或分发）从本地文件系统安装包

> ID：12982406
> 
> 赞同：26
> 
> 时间：2012-10-19T21:01:07.743
> 
> 标签：python, packaging, setuptools, distribute

是否可以指定（可编辑的）源依赖项，这些依赖`setup.py`项已知驻留在本地文件系统上？

考虑以下目录结构，所有这些都位于单个 VCS 存储库中：

```
projects
  utils
    setup.py
    ...
  app1
     setup.py
     ... # app1 files depend on ../utils
  app2
     setup.py
     ... # app2 files depend on ../utils 
```

给定以下命令：

```
cd projects
mkvirtualenv app1
pip install -e app1 
```

我想安装 app1 的所有依赖项，包括“utils”，这是一个“可编辑”的依赖项。同样，如果我对 app2 做同样的事情。

我尝试过使用所有不同的`file://...`URL组合`install_requires`，`dependency_links`但无济于事。我想使用一个依赖链接 URL，比如`src+file://../utils`，它会告诉 setuptools 包的源在这个相对路径的文件系统上。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2020-08-26T10:55:50.883

我设法在 setup.py 中提供了相对本地依赖项：

```
setup(
    install_requires=[
        'utils @ file://localhost/%s/../utils/' % os.getcwd().replace('\\', '/'),
        ],
    ) 
```

但也许有人知道更好的解决方案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-26T02:58:28.110

我有一个相同的问题，我需要依赖同级文件夹中的模块。在偶然发现[https://caremad.io/2013/07/setup-vs-requirement/后，我找到了解决方案](https://caremad.io/2013/07/setup-vs-requirement/)

我结束了 requirements.txt 来专门引用我想要的文件，然后安装所有东西

```
pip install -r requirements.txt 
```

* * *

**要求.txt**

```
-e ../utils                                                                                                                                                                    
-e . 
```

setup.py 有我所有的其他依赖项，包括 utils。当 pip 尝试自己安装 app1 时，它意识到 utils 依赖项已经被填充，因此在安装其他需求时跳过它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-20T00:08:14.867

当我想处理一组相互关联的项目时，我会使用`/setup.py develop`.

如果我错误地或稍后我想让 pip 安装的模块可编辑，我克隆源代码，并`python setup.py develop`对其进行操作，替换现有的。

为了确定，我删除了 virtualenv 的站点包和包本身中的引用。

# opencv - 使用线函数绘制直方图

> ID：12982412
> 
> 赞同：1
> 
> 时间：2012-10-19T21:01:27.953
> 
> 标签：opencv

所以我一直在继续我的 opencv 学习并且正在努力使用直方图函数。我清楚地了解 calchist 功能，我的代码一直工作到那里，我不明白它的绘图。

我意识到我将使用 line 函数在两点之间画一条线，但给出的点坐标真的让我很困惑。

我正在关注这里的在线教程：http: [//docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_calculation/histogram_calculation.html)，我也在关注 OpenCV 食谱第 2 版。

根据在线教程计算线在第7步，如：

```
 for( int i = 1; i < histSize; i++ )
  {
      line( histImage, Point( bin_w*(i-1), hist_h - cvRound(b_hist.at<float>(i-1)) ) ,
                       Point( bin_w*(i), hist_h - cvRound(b_hist.at<float>(i)) ),
                       Scalar( 255, 0, 0), 2, 8, 0  );
      line( histImage, Point( bin_w*(i-1), hist_h - cvRound(g_hist.at<float>(i-1)) ) ,
                       Point( bin_w*(i), hist_h - cvRound(g_hist.at<float>(i)) ),
                       Scalar( 0, 255, 0), 2, 8, 0  );
      line( histImage, Point( bin_w*(i-1), hist_h - cvRound(r_hist.at<float>(i-1)) ) ,
                       Point( bin_w*(i), hist_h - cvRound(r_hist.at<float>(i)) ),
                       Scalar( 0, 0, 255), 2, 8, 0  );
  } 
```

老实说，我很难理解这一点，以及 hist_h 和 hist_w 的值，为什么选择 512 和 400？

所以我为此查阅了我的书，发现解决了同样的问题：

```
// Compute histogram first
cv::MatND hist= getHistogram(image);
// Get min and max bin values
double maxVal=0;
double minVal=0;
cv::minMaxLoc(hist, &minVal, &maxVal, 0, 0);
// Image on which to display histogram
cv::Mat histImg(histSize[0], histSize[0], 
CV_8U,cv::Scalar(255));
// set highest point at 90% of nbins
int hpt = static_cast<int>(0.9*histSize[0]);
// Draw a vertical line for each bin 
for( int h = 0; h < histSize[0]; h++ ) {
float binVal = hist.at<float>(h);
int intensity = static_cast<int>(binVal*hpt/maxVal);
// This function draws a line between 2 points 
cv::line(histImg,cv::Point(h,histSize[0]),
cv::Point(h,histSize[0]-intensity),
cv::Scalar::all(0));
}
return histImg;
} 
```

这里第二点的坐标 `cv::Point(h,histSize[0]-intensity)`是我不明白的。至于为什么要减去它的强度？

这可能是一个非常愚蠢的问题，但我很抱歉，我只是不明白这里给出的坐标。我用谷歌搜索了足够多的例子，但没有找到任何帮助来解决这个问题。

所以我在这里问的是任何人都可以向我解释这两种方法中给出的坐标系。我真的很感激。

谢谢

PS我还想在这里指出 histsize = 256

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:51:45.397

谈论第二个代码示例。

在 OpenCV 中，坐标系从左上角开始。所以矩阵的条目 0,0 在左上角，0,(cols-1) 在右上角，(rows-1),0 在左下角，(rows-1),(cols- 1）在右下角。

人类期望直方图从图像底部开始。为了实现这一点，您否定坐标并从 (rows-1) 而不是 0 开始。在您的示例中，`rows == histsize[0]`.

## 您的代码有一个错误：

坐标`…,histsize[0]`无效！矩阵行从`0`到`histsize[0] - 1`！

# javascript - 为什么我的文件预览第一次没有显示我的文件？

> ID：12982415
> 
> 赞同：0
> 
> 时间：2012-10-19T21:01:57.240
> 
> 标签：javascript, internet-explorer, file-io

我想从用户的本地文件中读取图片。（用户在ie7-ie9下，所以不支持完整版html5）我发现第一次假设输入|文件值，图片不显示，第二次我换了另一张图片，图像可以显示。只是想知道如何使我第一次输入图片时可以显示。

我想从用户的本地文件中读取图片，我应用以下代码：

```
function ShowImage(obj){ 
  var allowSuffix=".jpg|.gif|.bmp|.png"; //.jpg,.bmp,.gif,.png

  var suffix=obj.value.substring(obj.value.lastIndexOf(".")+1).toLowerCase();

  var browserVersion= window.navigator.userAgent.toUpperCase();

  if(allowSuffix.indexOf(suffix)>-1){
    if(browserVersion.indexOf("MSIE 7.0")>-1 || browserVersion.indexOf("MSIE 8.0")>-1 || browserVersion.indexOf("MSIE 9.0")>-1){//ie7, ie8, ie9 
      obj.select();
      var source=document.selection.createRange().text;
      obj.blur();

      var newPreview = document.getElementById("divNewPreview");
      newPreview.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = source; 
      newPreview.style.width = 160; 
      newPreview.style.height = 170; 
      newPreview.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").sizingMethod = 'scale';

      $("#divPreview").attr("style","display:none");
      $("#divNewPreview").attr("style","filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);width:160px;height:170px;border:solid 1px #d2e2e2;");

    }
  }
} 
```

html部分代码很简单，例如：

```
<div id="divNewPreview" style="filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image ); width: 160px; height: 170px; border: solid 1px #d2e2e2; display: none;"></div>
<p>
  input file: <input type="file" onchange="ShowImage(this)" />
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:34:02.857

较旧的浏览器无法访问本地文件系统。您需要先将其发布到服务器，然后才能查看文件。

# .net - sql server 中的 Exec master .. cmdshell 语句出现问题

> ID：12982417
> 
> 赞同：0
> 
> 时间：2012-10-19T21:02:02.300
> 
> 标签：.net, sql-server

我无法让 exe 从 sql server 中的 exec master cmdshell 语句工作。

当我双击它时，EXE 工作正常。但是，当我尝试在 SQL Server 中使用此命令运行它时，它不会执行。

```
EXEC master..xp_cmdshell 'Path\Program.exe' 
```

该程序本身非常简单——它只是应该使用内部 DLL 发送电子邮件警报。如果遇到错误，它应该将该错误写入当前目录中的文件。（最终，我希望它设置为在将记录插入特定表时通过触发器运行）。

当我使用上面的语句运行程序时，程序不会打印出错误消息（如下所示）或发送电子邮件。我如何判断它是否正在执行？遇到错误？会发生什么？当我通过双击 path\program.exe 运行程序时，程序本身运行正常。

```
Imports System.IO

Module Module1

    Sub Main()
        Try
            EmailSenderDLL.EmailSender.send(15, "Alert Text.")
        Catch e As Exception
            File.WriteAllText(Directory.GetCurrentDirectory() & "\" & Now.Year & Now.Month & Now.Day & Now.Millisecond, e.Message & vbNewLine & e.StackTrace)
        End Try

    End Sub

End Module 
```

我可以采取哪些步骤来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:31:55.793

是的，您可以通过 google 帐户使用数据库邮件：[https ://blogs.msdn.com/b/suhde/archive/2009/07/12/how-to-configure-sql-server-database-mail-to -send-email-using-your-windows-live-mail-account-or-your-gmail-account.aspx?Redirected=true](https://blogs.msdn.com/b/suhde/archive/2009/07/12/how-to-configure-sql-server-database-mail-to-send-email-using-your-windows-live-mail-account-or-your-gmail-account.aspx?Redirected=true)

确保在防火墙中打开正确的端口 (587) 以允许 SQL Server 与 google 通信。

# sql - 如何在 SQL 中将收益率汇总为资产净值？

> ID：12982418
> 
> 赞同：1
> 
> 时间：2012-10-19T21:02:03.890
> 
> 标签：sql, sql-server, tsql, stored-procedures, calculated-columns

给定起始值和`@pStartingValue`一个表，其中包含仅使用 TSQL 在每个日期获取 NAV 的最有效方法是什么？`rorDate``ror`

这在数学上微不足道，而且代码简单。我目前有一个依赖游标的简单 SQL 实现。

在第一个日期，NAV 是 @pStartingValue * ror
在随后的每个日期，它是之前计算的 nav * ror**或者**它是 @pStartingValue * 每个之前的 ror

您将如何仅在 MSSQL2005+ 中有效地做到这一点？

```
DECLARE @rorDate DATE
DECLARE @getDate CURSOR
DECLARE @lastNAV as DECIMAL(19,7)
DECLARE @datedRoR as float
DECLARE @NAVTotals TABLE
(
  NAV DECIMAL(19,7),
  navDate DATE
)

SET @lastNAV = 100

SET @getDate = CURSOR FOR
    SELECT 
        p.[DATE]
    FROM 
        performance p 
    ORDER BY 
        p.[DATE]

OPEN @getDate
FETCH NEXT
FROM @getDate INTO @rorDate
WHILE @@FETCH_STATUS = 0
BEGIN

SELECT 
    @datedRoR = b.finalNetReturn 
FROM 
    performance b 
WHERE 
    b.date = @rorDate

INSERT INTO @NAVTotals (NAV, navDate)
  VALUES (@lastNAV * (1 + @datedRoR), @rorDate)

SELECT 
    @lastNAV = c.NAV 
FROM 
    @NAVTotals c 
WHERE 
    c.navDate = @rorDate  

FETCH NEXT
FROM @getDate INTO @rorDate
END
CLOSE @getDate
DEALLOCATE @getDate

select * from @NAVTotals 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:54:47.153

您必须进行一些测试以查看性能是否有所提高，但这是一种无需使用光标即可完成相同操作的方法。它未经测试，因此您需要确保对其进行测试。我也铸造`b.finalNetReturn`成一个浮动，如果它已经是一个浮动，你可以删除该部分。

```
DECLARE @lastNAV as DECIMAL(19,7)

SET @lastNAV = 100    

DECLARE @NAVTotals TABLE
(
  NAV DECIMAL(19,7),
  navDate DATE
);

INSERT INTO @NAVTotals (navDate) 
   SELECT [DATE]
    FROM performance
    ORDER BY [DATE] ASC;

UPDATE NT
SET @lastNAV = Nav = (@lastNAV * (1.0 +
 (Cast((SELECT b.finalNetReturn 
        FROM performance b 
        WHERE b.date = NT.navDate) AS FLOAT)))) 
FROM @NAVTotals NT;

SELECT * FROM @NAVTotals ORDER BY navDate; 
```

* * *

通过将 lastNAV 变量放入更新语句中，您可以同时更新两者。它的工作原理类似于：

```
a = a + 1 
```

这里有一个[相同方法的示例](http://geekswithblogs.net/Rhames/archive/2008/10/28/calculating-running-totals-in-sql-server-2005---the-optimal.aspx)。包括一些很好的数字，用于比较该方法与其他方法（如游标）的效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:45:57.523

也许我没有正确理解它，但你甚至不需要存储过程来实现这一点。

```
SELECT p.[DATE] AS navDate
     , @pStartingValue * PRODUCT(1 + b.finalNetReturn) AS NAV
  FROM performance p
 INNER JOIN performance b
    ON b.[DATE] <= p.[DATE]
 GROUP BY p.[DATE]
 ORDER BY p.[DATE] 
```

但是，有一些我没有掌握的“怪异之处”。

1.  为什么 p.[DATE] 没有范围限制？
2.  “性能”表真的只有一项资产吗？

# c# - 我想使用正则表达式替换文本

> ID：12982423
> 
> 赞同：2
> 
> 时间：2012-10-19T21:02:18.497
> 
> 标签：c#, regex

在我的代码中，我试图替换`<Run Foreground="#FFFF0000"> with <Run Foreground="#FFFF0000" Text="`

现在我正在使用这个

```
Regex.Replace(XMLString, @"<Run.*?>", "<Run Text=\"", RegexOptions.IgnoreCase); 
```

替换`<Run Foreground="#FFFF0000">`为`<Run Text="`

我只想将 > 替换为 text = " 每当我遇到`<Run`.

我该如何存档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:07:06.807

捕获的替代方法是使用后视：

```
Regex.Replace(XMLString, @"(?<=<Run[^<]*)>", " Text=\"", RegexOptions.IgnoreCase); 
```

`>`现在，这将仅匹配`<Run`任意数量的非`<`字符之后（因此在同一标签内）之前的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:08:01.317

如果这是一个 XML 文档，那么您可以只使用 XPath 来选择`Run`元素并将属性添加到所选元素。这是比使用 Regex 更好的选择。

尝试这样的事情：

```
string txtAttributeName = "Text";
foreach(XmlNode element in xmlDocument.SelectNodes(".//Run")
{
    if (element.Attributes.GetNamedItem(txtAttributeName) == null)
    {
        XmlAttribute txtAttribute = xmlDocument.CreateAttribute(txtAttributeName);
        txtAttribute.Value = "Whatever you want to place here";

        element.Attributes.Append(txtAttribute);
    }
} 
```

**注意：**我还没有测试过这个，但它应该给你一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:12:11.693

### 选项1）

```
Regex.Replace(XMLString, @"(<Run.*?)>", "$1 Text=\"", RegexOptions.IgnoreCase); 
```

### 选项 2)

```
Regex.Replace(XMLString, @"(?<=<Run.*?)>", " Text=\"", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:06:49.940

您需要捕获要保留的文本，然后重新添加它。我没有对此进行测试，但是：

```
Regex.Replace(XMLString, @"<Run(.*?)>", "<Run$1 Text=\"", RegexOptions.IgnoreCase); 
```

# php - 为扩展类实现工厂方法的最佳方法是什么？

> ID：12982428
> 
> 赞同：1
> 
> 时间：2012-10-19T21:02:42.093
> 
> 标签：php

考虑以下代码：

```
class Vehicle {

    /**
    * Create a new instance of Vehicle
    * 
    * @return Vehicle
    */
    public static function create(){

        return eval( "return new " . get_called_class() . '();' );
        // return self(); would always return Vehicle reg ardless

    }

    public function drive(){

        echo "I am a Vehicle!";

    }

}

class Bus extends Vehicle {

    public function drive(){

        parent::drive();

        echo "\nSpecifically, a bus!";

    }

}

class Car extends Vehicle {

    public function drive(){

        parent::drive();

        echo "\nSpecifically, a car!";

    }

}

// Drive a car
    Car::create()->drive();

// Drive a bus
    Bus::create()->drive(); 
```

我在 Vehicle 类中实现了一个工厂“create”方法，它允许我获取我想要使用的类的实例。

我尝试使用“return new self();” 但这总是返回一个 Vehicle 的实例，所以我求助于使用 eval。

**问题：**是否有一种非评估方式来实现 create() 方法，以便：

*   它返回您正在使用的类的实例
*   它不需要在每个扩展类上实现 create()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:21:06.573

使用[静态](http://docs.php.net/language.oop5.late-static-bindings)而不是`self`，例如

```
<?php
class Vehicle {
    public static function create(){
        return new static();
    }

    public function drive(){
        echo "I am a Vehicle!";
    }
}

class Bus extends Vehicle {
    public function drive(){
        parent::drive();
        echo "\nSpecifically, a bus!";

    }
}

$b = Bus::create();
$b->drive(); 
```

印刷

```
I am a Vehicle!
Specifically, a bus! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:22:58.627

（VolkerK 击败了我，但这有轻微的变化）

等等，你为什么需要`eval()`呢？不会：

```
public static function create() {
    $class = get_called_class();

    return new $class();
} 
```

工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:12:32.967

最好的方法是将工厂方法从具体类型中移到它自己的工厂类中。然后，您不仅可以更轻松地处理此问题，还可以轻松地将工厂替换为另一个工厂。

我假设您知道对象继承是如何工作的，因此您不必处理任何不那么直截了当并且很快就开始以某种方式站立的静态事物。

# c# - 从 XNA 中的 xml 文件加载级别数据

> ID：12982430
> 
> 赞同：1
> 
> 时间：2012-10-19T21:02:52.190
> 
> 标签：c#, xml, oop, xna, xna-4.0

我正在 XNA 中创建一个基于图块的游戏，并将从 xml 文件加载关卡信息。我对加载 xml 数据没有任何问题，但我想就我正在考虑使用的读取 xml 文件的方法提供反馈。

该代码具有类层次结构，例如：

一个 Level 类包含：
- TileLayers
的集合 - Tilesets 的集合

TileLayer 类包含
- Tiles 的集合

Tileset类包含：
- TilsetTiles 的集合

TilesetTile 类包含：
- TileId
- TileProperties 的集合
- TileRectangle

上述每个类都需要 xml 级别文件中的一些信息。

当我加载一个关卡时，我想简单地调用 Level.Load();

我的意图是每个类都有一个 Load() 方法，它将：
1\. 从 xml 文件加载它需要的任何特定信息。
2\. 在其子代上调用 Load()。

我看到的问题是用于处理 xml 的代码将分散在不同的文件中，这使得更改难以实施（例如，如果我决定加密 xml 文件），并且无疑会破坏 SOLID 原则的几个方面。

我有这样的想法，我可以创建一个 xmlLevelReader 类，其唯一目的是读取 xml 级别文件。然后，此类可以公开可以从上述每个类中的 Load() 方法调用的方法。

例如 TileLayer 类的 Load() 方法可以调用 xmlLevelReader.GetTiles() ，这将返回一个`IEnumerable<Tile>`

你认为这种方法会奏效吗？
你能预见到任何困难吗？
这种方法是否过于简单/复杂？
欢迎任何建设性的批评！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:28:12.930

根据您的评论，我看到您正在使用平铺地图编辑器。这导致我建议您使用 TiledLib。这里简要说明了如何启动和运行导入 .tmx 文件以在游戏中使用。

## 内容管道概述

文件 -> 内容导入 -> 内容处理 -> 内容写入 -> .xnb -> ContentRead -> 游戏对象

## 平铺库

TiledLib 只处理`ContentImporter`上图的一部分。它本质上将处理读取 .tmx XML 并允许您将数据处理为运行时所需的任何对象。幸运的是，TiledLib 作者也在下载中提供了一个演示部分。

## 基本平铺地图处理器演示

*   `BasicDemo`包含 ContentManager.Load 调用的主游戏项目。
*   `BasicDemoContent`具有 Tiled 的 .tmx 文件的项目
*   `BasicDemoContentPipeline`项目有`ContentProcessor`
*   `TiledLib`其中有`ContentImporter`

你真的只需要担心它是如何`ContentProcessor`工作的，因为 TiledLib 会为你处理所有的导入。尽管我确实建议查看不同的类以了解它如何反序列化 XML（出于教育目的）。

`ContentProcessor`Basic Demo 项目中的示例`MapContent`从`ContentImporter`(TiledLib) 中获取一个对象，并输出一个`DemoMapContent`在构建时序列化为 .xnb 并`Map`在运行时反序列化为对象的对象。以下是完全处理后表示地图的类：

```
[ContentSerializerRuntimeType("BasicDemo.Map, BasicDemo")]
public class DemoMapContent
{
    public int TileWidth;
    public int TileHeight;
    public List<DemoMapLayerContent> Layers = new List<DemoMapLayerContent>();
}

[ContentSerializerRuntimeType("BasicDemo.Layer, BasicDemo")]
public class DemoMapLayerContent
{
    public int Width;
    public int Height;
    public DemoMapTileContent[] Tiles;
}

[ContentSerializerRuntimeType("BasicDemo.Tile, BasicDemo")]
public class DemoMapTileContent
{
    public ExternalReference<Texture2DContent> Texture;
    public Rectangle SourceRectangle;
    public SpriteEffects SpriteEffects;
} 
```

*   A`Map`包含瓦片宽度、瓦片高度和`MapLayers`.
*   A`MapLayer`包含一个宽度、一个高度和一个列表`Tiles`。
*   A`MapTile`包含一个纹理、一个源矩形（图块集中的正确矩形）和可选的精灵效果（我从未使用过）。

## 这个怎么做的

我建议阅读评论`ContentProcessor`以了解正在发生的事情，但简而言之，这是基础知识：

*   加载瓦片集的纹理数据
*   从纹理中获取每个图块的源矩形
*   遍历地图的所有层
*   对于每一层，遍历所有瓦片
*   对于每个图块，获取正确的纹理和源矩形
*   将输入中的所有数据正确分配到输出

## 注意事项

只要您坚持基本类型（模糊，我知道），您也无需担心内容管道的部分内容`ContentWriter`。`ContentReader`它将分别在构建和运行时自动序列化和反序列化 .xnb 文件。请参阅我问过的一个问题：[here](https://stackoverflow.com/questions/12964904/which-types-are-supported-by-xnas-automatic-xnb-serialization)。

此外，您会注意到，如果您在 Tiled 中使用对象图层，该演示不会向您展示如何处理这些图层。TiledLib 确实正确地导入了它们，您只需将数据提取出来并将其粘贴到适当的类中。稍后我将尝试编辑此答案，并举例说明如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T01:55:13.413

如果您只想加载 XML 而不操作数据，您可以使用内置的 XNA Content Serializer。

本质上，您定义了一个映射到您的 xml 格式的类，然后将 XML 读入该类的实例。

例如。在这里，我定义了要加载到的类：

[SpriteRenderDefinition.cs](http://code.google.com/p/mbhxnazombietaxi/source/browse/trunk/ZombieTaxi/MBHEngineContentDefs/Behaviour/SpriteRenderDefinition.cs)

我选择了这个，因为它有嵌套类，就像你描述的那样。请注意，它会进入 XNA 解决方案的 ContentDefinitions 项目。

现在这里是填写 SpriteRenderDefinition 内容的 xml 文件：

[精灵.xml](http://code.google.com/p/mbhxnazombietaxi/source/browse/trunk/ZombieTaxi/ZombieTaxi/ZombieTaxiContent/GameObjects/Characters/Civilian/Behaviours/Sprite.xml)

该 XML 的格式直接映射到 SpriteRenderDefinition 的成员名称。

最后，在运行时将 XML 数据实际加载到实际对象中的代码非常简单：

```
SpriteRenderDefinition def = GameObjectManager.pInstance.pContentManager.Load<SpriteRenderDefinition>(fileName); 
```

调用该行后，您将拥有一个 SpriteRenderDefintion 对象，其中填充了 XML 文件的所有内容！这就是我写的所有代码。其他一切都内置在 XNA 中。如果你花一个小时左右的时间来弄清楚它真的非常漂亮和有用！

# php - 使用javascript将文本框数组添加到html中

> ID：12982439
> 
> 赞同：0
> 
> 时间：2012-10-19T21:03:36.277
> 
> 标签：php, javascript, html, vbscript

我的代码有问题吗？

```
 <script>
        function add(){
            /* Get your form */
        form = document.getElementById("test");
            /* Create your input element */
        input = document.createElement("input");
        input.type="text";
        input.name="array['artists']";
            /* Append to form */
        form.appendChild(input);
        alert("done");
        }
    </script>

<table>
<tr>
 <td align="right">Artist/s:</td>
 <td><form id="test" enctype="multipart/data-form" method="post">
 <input type="text" name="artists"/>
 <input type="button" onclick='javascript: add()'/></form></td>
</tr>
<tr>
 <td colspan="2"><input type="submit" value="Submit"></td>
</tr>
</table> 
```

我试图在另一个文本框下方添加另一个文本框，但什么也没发生。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:14:08.827

您的 HTML 格式不正确。这就是为什么在“添加”按钮之后添加输入框（TextBox）而不是您想要的下方的原因。

您可以尝试以下代码：

```
var table = document.getElementById("tableAddRows");
var row = document.createElement("tr");
var td1 = document.createElement("td");
var td2 = document.createElement("td");
td2.appendChild(input);
row.appendChild(td1);
row.appendChild(td2);
table.appendChild(row); 
```

向表中添加一个 id（在示例“tableAddRows”中）。

另外，我在另一个表中添加了提交按钮，就像这样（有更简洁的解决方案）：

```
<table>
<tr>
<td colspan="2"><input type="submit" value="Submit"></td>
</tr>
</table> 
```

还要将表单元素放在两个表周围。

我还建议使用[JSRender](http://borismoore.github.com/jsrender/demos/)或[jQuery 模板](http://api.jquery.com/category/plugins/templates/)来实现您的目的。

这是[示例](http://sdrv.ms/Rddbsn)代码，如果您仍然想弄清楚的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:44:41.067

也适用于我。尝试在另一个浏览器中测试..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:10:04.253

似乎正在工作 -[小提琴](http://jsfiddle.net/BkDKr/1/)

`add()`我只是在 a内部调用，`setTimeout`所以它会在页面加载后执行一秒钟。

你只是错过了电话`add()`吗？

**编辑**：我最初没有看到 onclick 绑定。新的工作[小提琴2](http://jsfiddle.net/BkDKr/14/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:14:29.287

似乎也为我工作。

当我第一次将它放入 html 文件时，Internet Explorer 不允许我运行 javascript，因为 html 文件是我计算机的本地文件。如果您正在使用其他浏览器，请尝试使用其他浏览器。或者，如果是这种情况，只需单击 yest 以在 IE 中允许它。

# bash - getopt之后'set -- $args'的目的是什么？

> ID：12982441
> 
> 赞同：3
> 
> 时间：2012-10-19T21:03:41.330
> 
> 标签：bash, getopt

在 bash 中使用 getopt 的常用示例如下

```
args=`getopt abo: $*`
errcode=$?
set -- $args 
```

最后一行实现了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:18:00.363

[这](http://aplawrence.com/Unix/getopts.html)很好地解释了它。本质上，它是将具有多个标志的单个参数分解为多个参数，每个参数具有单个标志：

您是否将脚本称为

```
script -ab 
```

或作为

```
script -a -b 
```

之后`set -- $args`, `$1`will be`-a`和`$2`will be `-b`. 它使处理更容易。

顺便说一句，`getopts`好多了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T21:09:55.373

`set`更新脚本的位置参数。

```
#! /bin/bash
echo "$*"
set -- $1 baz
echo "$*" 
```

如果使用 调用此脚本`/path/to/script foo bar`，则输出为：

```
foo bar
foo baz 
```

# javascript - JavaScript 颜色选择器

> ID：12982444
> 
> 赞同：0
> 
> 时间：2012-10-19T21:04:49.833
> 
> 标签：javascript, draggable, color-picker

我发现 flexi 颜色选择器脚本可以为您提供基于纯 JavaScript 的颜色选择，但是它不允许拖动进行选择，只能单击调色板。

我从以下方面做了很少的修复：

```
if (slideElement.attachEvent) {
    slideElement.attachEvent('onclick', slideListener(this, slideElement, pickerElement));
    pickerElement.attachEvent('onclick', pickerListener(this, pickerElement));
} else if (slideElement.addEventListener) {
    slideElement.addEventListener('click', slideListener(this, slideElement, pickerElement), false);
    pickerElement.addEventListener('click', pickerListener(this, pickerElement), false);
} 
```

至

```
if (slideElement.attachEvent) {
    slideElement.attachEvent('onmouseup', slideListener(this, slideElement, pickerElement));
    slideElement.attachEvent('onmousedown', slideListener(this, slideElement, pickerElement));

    pickerElement.attachEvent('onmouseup', pickerListener(this, pickerElement));
    pickerElement.attachEvent('onmousedown', pickerListener(this, pickerElement));
} else if (slideElement.addEventListener) {
    slideElement.addEventListener('mouseup', slideListener(this, slideElement, pickerElement), false);
    slideElement.addEventListener('mousedown', slideListener(this, slideElement, pickerElement), false);

    pickerElement.addEventListener('mouseup', pickerListener(this, pickerElement), false);
    pickerElement.addEventListener('mousedown', pickerListener(this, pickerElement), false);
} 
```

它有效，但是只有在页面加载时才有效，如果你不止一次开始拖动背景图像，有没有办法解决这个问题？

另外可选的事情是让它改变颜色，同时按住鼠标按钮并尽可能拖动鼠标。

[http://jsfiddle.net/NkH3q/](http://jsfiddle.net/NkH3q/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:09:34.123

你在这里[http://jsfiddle.net/NkH3q/3/](http://jsfiddle.net/NkH3q/3/)

（不适用于 IE8 < 因为我没有 IE 来测试它，但您应该能够复制 IE 的处理程序，它应该可以正常工作）。

解释。

你所追求的是让选择器仅在鼠标按下时移动/拖动。为此，您需要在*mousedown上添加一个侦听器*

```
Elem.addEventListener('mousedown', startDragging, false); 
```

您注意到我们还没有为*mouseup*事件添加监听器，我们现在也不会。startDragging 函数只是设置一个标志

```
this.dragging = false;
var q = this; // cache this to use it in another function scope

var startDragging = function() {
  q.dragging = true;  
  document.addEventListener('mouseup', stopDragging , false);
}; 
```

一切都应该很清楚。您会注意到我们在*文档中设置了**mouseup*侦听器。这样做是为了确保即使用户将光标移出颜色选择器，当点击被释放（mouseup）时，事件也会被我们捕获。

 *让我们看看*stopDragging*函数应该是什么样子

```
 var stopDragging = function() {
      q.dragging = false;  
      document.removeEventListener('mouseup', stopDragging , false);
    }; 
```

同样，我们将拖动标志设置为 false，并删除我们在*文档中设置的**mouseup*侦听器。毕竟，我们不想把 memm 乱扔给听众。

 *现在是*mousemove*函数

```
var pickerFunc = pickerListener(this, pickerElement ),
    slideFunc = slideListener(this, slideElement, pickerElement);

slideElement.addEventListener('mousemove', slideFunc, false);
pickerElement.addEventListener('mousemove',pickerFunc, false);

....
function pickerListener(ctx, pickerElement) {
    return function(evt) {
        if (!ctx.dragging)   
          return false;
..... 
```

首先，既然 pickerListener/slideListener 返回函数，就不需要多次调用它们，只要我们每次都使用相同的参数。因为我们最终会得到重复的函数。因此最好这样做一次并缓存它们（slideFunc/pickerFunc vars）

然后在这些函数的开头，我们添加了对拖动标志的检查。如果它设置为 false，我们什么也不做。

为了防止东西被选中并破坏“拖动”控件，我们需要添加

```
-moz-user-select: none;
-khtml-user-select: none;
-webkit-user-select: none;
-o-user-select: none; 
-ms-user-select: none;
user-select: none; 
```

在包装元素。旧版本的 IE (7,8,9) 和 Opera 需要在 wrapper 元素上有一个*unselectable="on"* 属性。**

# android - android中不同屏幕尺寸的自定义形状

> ID：12982445
> 
> 赞同：0
> 
> 时间：2012-10-19T21:04:51.610
> 
> 标签：android, custom-component

我有自定义视图，它在视图中绘制一系列矩形形状。我扩展了 View 并覆盖了 onDraw 方法。

这是构造函数（仅添加重要部分）

```
 public CustomDrawableView(Context mContext , AttributeSet attr)
    {
        super(mContext,attr);

        //setMeasuredDimension(measuredWidth, measuredHeight)
        Log.e("CustomDrableView", "widht"+attr.getAttributeName(5));
        Log.e("CustomDrableView", "widht2"+attr.getAttributeValue(5));

        mColors = new int[] {
            //color codes
            };

        mColors_state_init = new int[]
                {
                    //color codes
                };

        mPaint = new Paint();
        mPaint.setAntiAlias(true);

        mPaint2 = new Paint(mPaint);
        mPaint2.setAlpha(64);

        float[] radii = {15,15,15,15,15,15,15,15};
        mDrawable = new ShapeDrawable(new RoundRectShape(radii, null, null));

       // mDrawable.getPaint().setColor(0xff74AC23);
        ShapeDrawable prev = mDrawable;
        mDrawables = new ShapeDrawable[15];

        for (int i = 0; i < 15; i++) {
            mDrawables[i] = new ShapeDrawable(new RoundRectShape(radii, null, null));
        }
} 
```

这是 onDraw

```
protected void onDraw(Canvas canvas) {       
     mDrawable.setBounds(x, y, x + width, y + height);
      for (int i = 0; i < 15; i++) {

        mDrawables[i].getPaint().setColor(0xff74AC23);
        mDrawables[i].setDither(true);
        mDrawables[i].setBounds(x, y + (i *20), x+width, y+height+(i*20));
      }

    for(int i = 0 ; i < 15 ; i++)
    {
         ColorFilter filter = null;

         if (mColors[i] == 0) {
                    filter = null;
                } else {
                    filter = new PorterDuffColorFilter(mColors_test[i],
                            PorterDuff.Mode.SRC_ATOP);

        }

             mDrawables[i].setColorFilter(filter);
             mDrawables[i].draw(canvas);
    } 
```

宽度和高度值必须随着不同的屏幕尺寸而变化。我怎样才能做到这一点？

我正在为 xml 中的视图指定静态宽度和高度。我应该避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:20:09.410

首先，是的，您应该避免在 xml 中设置静态宽度和高度，让它们成为 wrap_content。然后，而不是这样做

```
 float[] radii = {15,15,15,15,15,15,15,15}; 
```

根据 screenSize 找到 15 的等效值。为此，您应该获得屏幕尺寸。获得 screenSizes 后，您可以按比例调整大小。它可能是这样的：

```
 int calculatedValue = screenWidth * 15 / 320;    // I assume 320 as a default screen width here
 float[] radii = {calculatedValue, calculatedValue, calculatedValue, calculatedValue, calculatedValue, calculatedValue, calculatedValue, calculatedValue} 
```

以防万一，如果您不知道如何获取屏幕尺寸...这里有一个片段：

```
 public void GetDimensions() {
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    width = metrics.widthPixels;
    height = metrics.heightPixels;
} 
```

# jquery - 使用 jQuery Mobile 1.2 根本不显示 Highcharts

> ID：12982450
> 
> 赞同：0
> 
> 时间：2012-10-19T21:05:23.387
> 
> 标签：jquery, jquery-mobile, highcharts

我为移动应用程序创建了一个 Highchart，但是当我测试图表时，它没有出现。我已经在 Firefox 和 Safari 上进行了测试，并且图表仅在我刷新页面后才会出现。

这是我的代码。

主页

```
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link rel="stylesheet" href="css/jquery.mobile.structure-1.1.1.min.css" />
    <link rel="stylesheet" href="css/themes/theme.css" />
    <link rel="stylesheet" href="css/app.css" />
</head>
<body>
    <div data-role="page" id="pgIndex">
        <div data-role="header">
            <div align="center">
            <h1 class="ui-bar" id="gradheader"><i>UBA<sup style="font-size: 8pt;">&reg;</sup></i> Health Plan</h1>
            </div>
        </div>
        <div data-role="content" class="content">
            <div class="content-primary">
                <ul data-role="listview" data-theme="a">
                    <li>
                        <a href="pre-results.html"><img src="Icons/globe_64_white.png" style="padding:10px 0 10px 20px;"/>
                        <h3>View the National Average</h3></a>
                    </li>
                </ul><br>
                <div data-role="fieldcontain">
                <ul data-role="listview" data-theme="a" data-inset="true">
                    <li data-role="list-divider">
                        <h3>Register to Activate These Options</h3>
                    </li>
                    <li>
                        <img src="Icons/pencil_64_white.png" style="padding:10px 0 10px 10px;"/>
                        <h3>Pick your Plan Type</h3>
                        <ul>
                            <li><a href="pre-results.html"><div id="PPO">PPO</div></a></li>
                            <li><a href="pre-results.html"><div id="HMO">HMO</div></a></li>
                            <li><a href="pre-results.html"><div id="POS">POS</div></a></li>
                            <li><a href="pre-results.html"><div id="CDHP">CDHP</div></a></li>
                            <li data-icon="back" data-iconpos="left"><a href="index.html"><div>Back</div></a></li>
                        </ul>
                    </li>
                    <li>
                        <img src="Icons/spanner_64_white.png" style="padding:10px 0 10px 10px;"/>
                        <h3>Pick your Industry</h3>
                        <ul style="height:auto;">
                            <li><a href="pre-results.html"><div id="Manufacturing">Manufacturing</div></a></li>
                            <li><a href="pre-results.html"><div id="Retail">Wholesale/Retail</div></a></li>
                            <li><a href="pre-results.html"><div id="Scientific">Prof./Scientific/Tech. Svcs.</div></a></li>
                            <li><a href="pre-results.html"><div id="HealthCare">Health Care/Social Assist.</div></a></li>
                            <li><a href="pre-results.html"><div id="Finance">Finance/Insurance/Real Estate</div></a></li>
                            <li><a href="pre-results.html"><div id="Government">Gov't./Education/Util.</div></a></li>
                            <li><a href="pre-results.html"><div id="Information">Information/Arts/Accom. &amp; Food</div></a></li>
                            <li><a href="pre-results.html"><div id="Construction">Construction/Agri./Mining/Trans.</div></a></li>
                            <li><a href="pre-results.html"><div id="Other">All Other Services</div></a></li>
                            <li data-icon="back" data-iconpos="left"><a href="index.html"><div>Back</div></a></li>
                        </ul>
                    </li>
                    <li class="ui-disabled">
                        <img src="Icons/man_64_white.png" style="padding:10px 0 10px 10px;"/>
                        <h3>Pick your Company Size</h3>
                        <ul>
                            <li><a href="pre-results.html"><div id="Under25">Under 25</div></a></li>
                            <li><a href="pre-results.html"><div id="25-49">25-49</div></a></li>
                            <li><a href="pre-results.html"><div id="50-99">50-99</div></a></li>
                            <li><a href="pre-results.html"><div id="100-199">100-199</div></a></li>
                            <li><a href="pre-results.html"><div id="200-499">200-499</div></a></li>
                            <li><a href="pre-results.html"><div id="500-999">500-999</div></a></li>
                            <li><a href="pre-results.html"><div id="1000+">1000+</div></a></li>
                            <li data-icon="back" data-iconpos="left"><a href="index.html"><div>Back</div></a></li>
                        </ul>
                    </li>
                </ul>
                </div>
            </div>
       </div>
       <br><br><br><br><br><br><br><br><br><br>
   </div>
    <div data-role="footer" data-position="fixed" id="menu">
        <div data-role="navbar" style="width:103%; position:absolute; right:10px;">
            <div class="ui-grid-b">
                <div class="ui-block-a">
                    <a href="index.html" data-theme="a">
                    <div class="ui-bar ui-bar-a">
                        <img src="Icons/home_64.png" height="32" width="32"/><br>
                        Home
                    </div>
                    </a>
                </div>
                <div class="ui-block-b">
                    <a href="register.html">
                    <div class="ui-bar ui-bar-a">
                        <img src="Icons/info_64.png" height="32" width="32"/><br>
                        Register
                    </div>
                    </a>
                </div>
                <div class="ui-block-c">
                    <a href="#">
                    <div class="ui-bar ui-bar-a">
                        <img src="Icons/magnifier_64.png" height="32" width="32"/><br>
                        Find Member
                    </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery-1.8.0.min.js"></script>
    <script src="js/jquery.mobile-1.2.0.min.js"></script>
    <script src="js/util.js"></script>
    <script src="js/app.js"></script>
    <script src="js/jquery.validate.min.js"></script>
</body> 
```

这是图表应该出现的内页，无需刷新页面。

```
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link rel="stylesheet" href="css/jquery.mobile.structure-1.1.1.min.css" />
    <link rel="stylesheet" href="css/themes/theme.min.css" />
    <link rel="stylesheet" href="css/app.css" />
</head>
<body>
    <div data-role="page" id="pgIndex">
        <div data-role="header">
        <div align="center">
            <h1 class="ui-bar" id="gradheader"><i>UBA<sup style="font-size: 8pt;">&reg;</sup></i> Health Plan</h1>
        </div>
        </div>
        <div data-role="content" style="padding: 10px;">
            <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
        </div>
    </div>
    <div data-role="footer" data-position="fixed" id="menu">
        <div data-role="navbar" style="width:103%; position:absolute; right:10px;">
            <div class="ui-grid-b">
                <div class="ui-block-a">
                    <a href="index.html" data-theme="a">
                    <div class="ui-bar ui-bar-a">
                        <img src="Icons/home_64.png" height="32" width="32"/><br>
                        Home
                    </div>
                    </a>
                </div>
                <div class="ui-block-b">
                    <a href="register.html">
                    <div class="ui-bar ui-bar-a">
                        <img src="Icons/info_64.png" height="32" width="32"/><br>
                        Register
                    </div>
                    </a>
                </div>
                <div class="ui-block-c">
                    <a href="#">
                    <div class="ui-bar ui-bar-a">
                        <img src="Icons/magnifier_64.png" height="32" width="32"/><br>
                        Find Member
                    </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery-1.8.0.min.js"></script>
    <script src="js/jquery.mobile-1.2.1.min.js"></script>
    <script src="js/util.js"></script>
    <script src="js/app.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/highcharts.js"></script>
    <script src="js/exporting.js"></script>
    <script src="js/nationalchart.js"></script>
</body> 
```

这是我的 JS。

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: [
                'PPO',
                'HMO',
                'POS',
                'HPMO' 
            ]
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Premium Dollars Spent / Year'
            }
        },
        legend: {
            layout: 'horizontal',
            backgroundColor: '#FFFFFF',
            align: 'left',
            verticalAlign: 'top',
            x: 100,
            y: 40,
            floating: true,
            shadow: true
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.x +': '+ this.y +' mm';
            }
        },
        plotOptions: {
            column: {
                pointPadding: 0.2,
                borderWidth: 0
            }
        },
            series: [{
            name: 'National',
            data: [49.9, 71.5, 106.4, 129.2],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }, {
            name: 'Regional (Available after Registering)',
            data: [83.6, 78.8, 98.5, 93.4],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }             
        }]
    });
});
}); 
```

我正在使用 Firebug 1.10.4 来检查错误，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:36:02.720

You need to initialise your chart inside jQuery mobile's pagecreate event

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# java - 从文件中读取

> ID：12982460
> 
> 赞同：0
> 
> 时间：2012-10-19T21:06:00.143
> 
> 标签：java

该程序有 2 个类和一个 main 方法，应该从文件中读取。我的问题是该行`double listPrice = fileScan.nextDouble();`给出了这样的错误异常`Exception in thread "main" java.util.InputMismatchException`。错误在这个类中：

这是文件的内容：
本田雅阁

2004 16780.00 10.0

克莱斯勒 SUV

2002 8600.00 0.0

丰田凯美瑞

2007 21799.99 3.0

福特护航

2006 12345.78 5.5

//注意每行之间没有空格

```
class Proj1P2CarAryListService 
{

  private ArrayList<Proj1CarData> carList = new ArrayList<Proj1CarData>();

  public Proj1P2CarAryListService()
  {
     carList = new ArrayList<Proj1CarData>();
  }

  public void readStoreCarsData()
  {

     Scanner scan = new Scanner(System.in);

     Scanner fileScan;
     boolean validName = false;
     double discountAmount;
     double netPrice;

     do 
     {

        System.out.print("Enter file name: ");
        String str1 = scan.nextLine();

        try 
        {

           fileScan = new Scanner(new File(str1));
           validName = true;

           while (fileScan.hasNext())

           {

              String name = fileScan.nextLine();
              String modelYear = fileScan.next();
              double listPrice = fileScan.nextDouble();
              double percentDiscount = fileScan.nextDouble();

              discountAmount = listPrice * percentDiscount/100.0;
              netPrice = listPrice - discountAmount;

              Proj1CarData proj1 = new Proj1CarData(name, modelYear, listPrice, percentDiscount, discountAmount, netPrice);
              carList.add(proj1);
              System.out.println(proj1.toString());

           }// end while

        }// end try

           catch (FileNotFoundException fnfe)
           {
              System.out.println("Invalid File name; enter again");
           }

     } while (!validName);

  }//readStoreCarsData 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:12:24.847

此异常由 Scanner 引发，以指示检索到的令牌与预期类型的​​模式不匹配（Double 必须用 .**或 分隔，如所说的 jlordo**），或者令牌超出预期类型的​​范围。可能是文件内容问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:31:35.107

Scanner的`nextDouble()`方法是区域感知的（请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextDouble%28%29)）。这意味着，如果您的语言环境设置为“.”所在的国家/地区。分隔浮点数后面将是一个可解析的双精度值：`123.456`而后面的数字会给你一个 InputMismatchException `123,456`。在欧洲`123,456` 会起作用，并且`123.456`会抛出异常。希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:47:00.247

您可能需要考虑打印出每一行。你得到的可能比你预期的要多。

# objective-c - 可靠地检查 NSDate 是否在给定的小时、天或周内

> ID：12982472
> 
> 赞同：4
> 
> 时间：2012-10-19T21:06:55.430
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我需要获取存储的 NSDate 并可靠地确定它是否在当前时刻的小时、天或周内。我似乎已经找到了一个解决方案，但之前没有解决过这个问题，我并不完全相信它是一个可靠的解决方案。

这会在用户设置的 12 小时对 24 小时时间内存活吗？[日期格式指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html%20the%20date%20formatting%20guide)指出此用户设置可能导致一些意外的日期行为：*“在 iOS 中，用户可以覆盖默认的 AM/PM 与 24 小时时间设置。这可能会导致 NSDateFormatter 重写您设置的格式字符串。”*

这个问题的基本代码模式呢？这段代码似乎可靠地服务于它的目的吗？我讨厌发布“检查我的代码”之类的问题，但这对我来说是一个不熟悉的问题，并且足够棘手，无法进行严格的测试，这似乎是合理的。NSDateFormatter 对我来说也比较新；这个问题的另一个动机。

**注意：我紧张的主要来源是，将日期转换为字符串然后进行字符串比较似乎是解决此问题的固有脆弱方法。但这是我能想到的最好的。**

快速参考：`dateFormat`我用于这三种情况的 s 是：

```
dateFormat = @"yyyyMMddHH"; // For "this hour" check
dateFormat = @"yyyyMMdd"; // For "today" check
dateFormat = @"yyyyww"; // For "this week" check 
```

谢谢！代码如下：

```
- (BOOL)didThisCycle {
    // Case 1: hourly; Case 2: daily; Case 3: weekly
    BOOL did = NO;

    NSDate *now = [NSDate date];
    NSDate *lastDid = [self.didDates lastObject];

    if (![lastDid isKindOfClass:[NSDate class]]) { // Crash protection
        return NO;
    }

    int type = [self.goalType intValue];
    switch (type) {
        case 1:
        {
            // If hourly check hour
            NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
            formatter.dateFormat = @"yyyyMMddHH";
            NSString *nowString = [formatter stringFromDate:now];
            NSString *lastDidString = [formatter stringFromDate:lastDid];
            if ([nowString isEqualToString:lastDidString]) {
                did = YES;
            } else {
                did = NO;
            }
            break;
        }
        case 2:
        {
            // If daily check day
            NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
            formatter.dateFormat = @"yyyyMMdd";
            NSString *nowString = [formatter stringFromDate:now];
            NSString *lastDidString = [formatter stringFromDate:lastDid];
            if ([nowString isEqualToString:lastDidString]) {
                did = YES;
            } else {
                did = NO;
            }
            break;
        }
        case 3:
        {
            // If weekly check week
            NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
            formatter.dateFormat = @"yyyyww";
            NSString *nowString = [formatter stringFromDate:now];
            NSString *lastDidString = [formatter stringFromDate:lastDid];
            if ([nowString isEqualToString:lastDidString]) {
                did = YES;
            } else {
                did = NO;
            }
            break;
        }
        default:
        {
            did = NO;
            break;
        }
    }

    return did;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T21:31:09.187

使用 NSDateComponents 类，如下所示：

```
NSDate *someDate = // whatever
NSDate *now = [NSDate date];
NSDateComponents *thenComponents = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSDayCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit fromDate:someDate];
NSDateComponents *nowComponents = [[NSCalendar currentCalendar] components:NSHourCalendarUnit|NSDayCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit fromDate:now];
if([thenComponents year] == [nowComponents year] && [thenComponents month] == [nowComponents month] && [thenComponents day] == [nowComponents day] && [thenComponents hour] == [nowComponents hour])
{
    // hooray
} 
```

如果您只想检查日期，请删除“小时”组件，或者同时删除“小时”和“日”（并替换为`NSWeekCalendarUnit`和`-week`方法）以检查周。

# datetime - Rails 3.1.8 奇怪的时区行为。减去 dates.to_i 得到零，红宝石表示日期不同

> ID：12982480
> 
> 赞同：0
> 
> 时间：2012-10-19T21:07:49.277
> 
> 标签：datetime, ruby-on-rails-3.1, timezone

我正在从 rails 3 升级到 3.1.8（及更高版本）。我的一些测试失败了，其中一个乍一看似乎是因为从 mysql2 gem（0.2.x 到 0.3.x）的变化。然而，它变得有点陌生。这是正在发生的事情。

在我的测试中，我正在更新模型上的属性，并检查它们是否已保存：

... post :create, :advertisement => @advertisement_attributes assert_equal assigns(:blah).start_date, @blah_attributes[:start_date]

说他们是不同的时代是失败的。如果我放一个 binding.pry 并在 assert_equal 之前跳进去，这就是我得到的：

```
a =  assigns(:blah).start_date
b =  @blah_attributes[:start_date]
a == b #false
a.to_s #"2012-10-17 20:46:12 UTC"
b.to_s #"2012-10-17 20:46:12 UTC"
a.to_i #1350506772
b.to_i #1350506772
a.to_i - b.to_i #0 
```

到目前为止..我仍然对 == 返回错误的原因感到困惑。但*真正奇怪*的是，如果我减去日期 -

```
a - b #-0.989403009414673 
```

如果有人能解释这里发生了什么，我很想知道！

此外，同样的测试在 rails 3 中通过了很好的测试（没有为应用程序设置时区），任何指向已更改内容的指针也很方便！

# php - "<< 是什么意思 可能重复： PHP << <eob 0="" 1="" 2="" 3="" 4="" 5="" 228="" 我在一个="" php="" 文件中看到了下面这段代码，有人可以解释一下="" 问问题="" 2012-10-19t21:07:53.543="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 可能重复：="" <<<eob="" <<<="" st="" 是什么意思吗？="" $status['caption']="<<<ST" st;="" ps：我真的不能谷歌它，相信我：d="" 如果这是一个="" xml="" 文档，那么您可以只使用="" xpath="" 来选择run元素并将属性添加到所选元素。这是比使用="" regex="" 更好的选择。="" 尝试这样的事情：="" string="" txtattributename="Text" ;="" foreach(xmlnode="" element="" in="" xmldocument.selectnodes(".="" run")="" {="" if="" (element.attributes.getnameditem(txtattributename)="=" null)="" xmlattribute="" txtattribute="xmlDocument.CreateAttribute(txtAttributeName);" txtattribute.value="Whatever you want to place here" element.attributes.append(txtattribute);="" }="" 注意：我还没有测试过这个，但它应该给你一个好主意。="" phpsyntax="" 回答="" answer="" 这被称为heredoc字符串。="" 于="" 2012-10-19t21:10:18.133="" 这是一种存储多行字符串的方法。（称为="" heredoc="" 语法）="" $string="<<<IDENTIFIER" identifier;="" 中间的所有行都存储为字符串。用于长长的文字墙。此处对其进行了描述。="" 2012-10-19t21:09:21.220="" 它被称为="" 语法：="" http="" :="" www.php.net="" manual="" en="" language.types.string.php#language.types.string.syntax.heredoc="" 它对多行字符串和包含双引号和单引号的字符串很有帮助。作为双引号，heredoc="" 解释了许多特殊字符的转义序列。="" 2012-10-19t21:10:26.490="" 运算符代表heredoc="" 语法。这是一种以自然方式编写字符串的方法。="" http:="" php.net="" 2012-10-19t21:10:31.337="" 这是一个heredoc="" 字符串（“文本块”）。="" 之间的一切<<<st="" st；将在写入时输出。因此，您可以放置="" 一些您想要输出的="" html="" 并保存一堆="" print()="" 语句，或者像使用$variable=" textity text text text" ;命令一样保存转义字符的工作。="" 来自="" 网站：heredoc="" 文本的行为就像一个双引号字符串，没有双引号。这意味着不需要对heredoc="" 中的引号进行转义，但仍然可以使用上面列出的转义码。变量是扩展的，但是在="" 中表达复杂变量时必须像使用字符串一样小心。="" 2012-10-19t21:12:30.180="" related="" mysql="" -="" 在="" 问题中搜索多个值="" xcode="" uinavigationbar="" 的="" uifont="" 是什么？="" java="" dao="" 接口="" 实现拆分层次结构和约定="" android="" 在哪里获得屏幕解锁声音="" c#="" 执行一批微软翻译查询="" javascript="" 获取文本选择中的元素="" pascal="" 定义未知数量的变量="" c++="" 我只需要从文件中提取每条记录的一个字段，但它不起作用="" 为什么这种自引用泛型分配是非法的？="" python="" vba="" 中的表达式语句="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：12982481
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, syntax

> **可能重复：**
> [PHP <<<EOB](https://stackoverflow.com/questions/1048481/php-eob)

我在一个 php 文件中看到了下面这段代码，有人可以解释一下 <<< st 是什么意思吗？

```
$status['caption']=<<<ST

ST; 
```

Ps：我真的不能谷歌它，相信我：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:10:18.133

这被称为[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T21:09:21.220

这是一种存储多行字符串的方法。（称为 Heredoc 语法）

```
$string = <<<IDENTIFIER

IDENTIFIER; 
```

中间的所有行都存储为字符串。用于长长的文字墙。[**此处**](http://php.net/manual/en/language.types.string.php)对其进行了描述。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T21:10:26.490

它被称为 Heredoc 语法： [http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

它对多行字符串和包含双引号和单引号的字符串很有帮助。作为双引号，Heredoc 解释了许多特殊字符的转义序列。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T21:10:31.337

<<< 运算符代表heredoc 语法。这是一种以自然方式编写字符串的方法。

[http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T21:12:30.180

这是一个heredoc 字符串（“文本块”）。

之间的一切`<<<ST and ST`；将在写入时输出。因此，您可以放置​​一些您想要输出的 HTML 并保存一堆 print() 语句，或者像使用`$variable = " textity text text text";`命令一样保存转义字符的工作。

来自 php 网站：Heredoc 文本的行为就像一个双引号字符串，没有双引号。这意味着不需要对heredoc 中的引号进行转义，但仍然可以使用上面列出的转义码。变量是扩展的，但是在 heredoc 中表达复杂变量时必须像使用字符串一样小心。</eob>

# gtk - GLib 编译错误 (ffi.h)，但安装了 libffi

> ID：12982486
> 
> 赞同：119
> 
> 时间：2012-10-19T21:08:20.397
> 
> 标签：gtk, glib

配置成功后，使用*snipped退出*

```
gclosure.c:29:17: fatal error: ffi.h: No such file or directory
compilation terminated. 
```

我安装了 libffi，并找到 ffi.h 给出：

```
/home/luca/gcc4.6/gcc-4.6.0/libffi/include/ffi.h.in
/usr/include/x86_64-linux-gnu/ffi.h
/usr/share/doc/ghc-doc/html/users_guide/ffi.html
/usr/share/doc/libffi5/html/Using-libffi.html 
```

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2013-07-08T01:49:23.360

如果你有一个基于 Debian 的 Linux 操作系统`apt-get`：

```
sudo apt-get install libffi-dev 
```

使用基于 Redhat 的操作系统：

```
yum install libffi-devel 
```

使用 Alpine Linux：

```
apk add libffi-dev 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-19T00:49:31.967

从源代码编译 libffi 3.0.9 时，`include/Makefile.in`会在`${PREFIX}/lib/libffi-3.0.9/include directory`. 我敢肯定这有一个很好的理由，但我很生气。

在编译 libffi 时，这一行修复了它：

```
/bin/perl -pe 's#^includesdir = .*#includesdir = \@includedir\@#' -i include/Makefile.in 
```

包含现在将安装在 中`${PREFIX}/include`，这是`/usr/local/include`为我准备的。

我的完整食谱是：

```
cd /var/tmp
rm -rf libffi-3.0.9
untgz /usr/local/src/utils/libffi-3.0.9.tar.gz
cd libffi-3.0.9
/bin/perl -pe 's#^AM_CFLAGS = .*#AM_CFLAGS = -g#' -i Makefile.in
/bin/perl -pe 's#^includesdir = .*#includesdir = \@includedir\@#' -i include/Makefile.in
./configure --prefix=/usr/local \
    --includedir=/usr/local/include
gmake
gmake install 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T21:46:51.563

通过手动设置 LIBFFI_CFLAGS 来解决 configure 中 ffi.h 的位置

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T12:15:12.047

检查您的 GCC 版本并在 Debian 错误存档中记下此条目：[http ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523869](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=523869)

这是我的特定问题的最终解决方案（它看起来与您报告的完全一样，但无法用上面的解决方案解决）......我的问题与 LIBFFI 完全无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-05T12:17:41.770

一个旧线程，但无论如何......

将所需文件放在可以找到它们的位置后，我得到了它的工作：

```
cp /usr/include/x86_64-linux-gnu/ffi* /usr/local/include/
cp /usr/lib/libffi.so /usr/local/lib/ 
```

# c++ - 如何在 c++ 中随机但非常少的时间在 for 循环中旋转？

> ID：12982487
> 
> 赞同：0
> 
> 时间：2012-10-19T21:08:23.417
> 
> 标签：c++, spinning

所以我基本上有能力从多播环境中捕获一些数据包并将它们保存到文件中，然后将它们多播到需要多播数据的应用程序。我这样做是出于模拟目的。这是一个相对简单的工具，在将 10 甚至 50K 数据包重播到运行在 gdb 中的应用程序时，它非常有用。我的重播循环如下所示：

```
for (size_t i = 0; i < packets_.size(); ++i)
    publisher_.publish(packets_[i].buf_, packets_[i].len_); 
```

问题是，当 packet_.size() 大约为 100-200K 时（我永远不需要做更多的事情），当有人在听时，我似乎会遇到丢包。我猜这是因为它们是连续播放的。如果我尝试过这样的事情：

```
for (size_t i = 0; i < packets_.size(); ++i)
{
    if (i % Y == 0) usleep(X);
    publisher_.publish(packets_[i].buf_, packets_[i].len_);
} 
```

对于不同的数量`Y`和`X`（如 1000/1000 和许多其他组合），但这不是很好。我的猜测是，如果我可以在非常短的时间内忙于每次迭代的咀嚼周期，我可以修补这个问题。忙着咀嚼，因为我不想屈服于其他进程，因此花费的时间比预期的要长，但时间非常短，甚至不到一毫秒，因为这需要等待 200 秒才能多播数据包。在循环中重复调用 sleep 函数似乎会让我大大减慢速度，这就是为什么我想知道旋转四分之一、五分之一、半毫秒左右（大约）的简单方法是什么？

或者是否有更好、更简单的方法来为这个用例打补丁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:23:30.377

下面的功能使系统在一段时间内保持“忙碌”：

```
static long slow( volatile long l ) {
   while ( l-- > 0 )  ;
   return l ;
} 
```

取一些数字，比如 1000，然后运行`slow( N )`，同时计算`clock_t t = clock()`调用前后花了多长时间。增加 N，并重复相同的操作，直到找到使循环保持忙碌 1 秒的数字 N。您现在将拥有一个功能和一个号码，可以让系统保持忙碌一秒钟。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:31:13.813

这是一个繁忙的等待循环：

```
#include <chrono>

auto start = std::chrono::high_resolution_clock::now();
while(std::chrono::high_resolution_clock::now()-start < std::chrono::nanoseconds(500))
    ; 
```

您可以等待的实际最短时间取决于您的实现的 high_resolution_clock 的分辨率。不幸的是，VS2012[还没有](https://connect.microsoft.com/VisualStudio/feedback/details/719443/c-chrono-headers-high-resolution-clock-does-not-have-high-resolution)一个像样的实现。boost::chrono 也可以使用，它要好得多。

如果您正在寻找真正随机的时间，您可以使用该`<random>`库：

```
#include <random>

std::mt19937 eng;
std::uniform_int_distribution<> dist(200,800);

auto delay = std::chrono::nanoseconds(dist(eng)); 
```

这是 c++11 版本的 usleep，当你确实想放弃 CPU 时。

```
#include <thread>

std::this_thread::sleep_for(std::chrono::nanoseconds(500)); 
```

# php - 订购线程/嵌套评论 - PHP

> ID：12982488
> 
> 赞同：2
> 
> 时间：2012-10-19T21:08:28.943
> 
> 标签：php, sql

我在网上找到了下面的线程评论示例，作者说这对他来说效果很好。但是，我在排序结果时遇到问题，因此线程注释位于正确的位置。这就是这个例子给我的：

> 示例作者说：“我使用一个简单且不依赖递归的系统。我基本上将整个线程“路径”存储为行字段。想要获得整个树结构？只需在路径上执行 ORDER BY列并使用如下的一些 PHP 代码进行格式化："

**示例数据**

```
ID | Comment                      | Path
---+------------------------------+----------
0  | Comment #1                   | 00
1  | Comment #1 reply             | 00_01
2  | Comment #1 reply reply       | 00_01_02
3  | Comment #2                   | 00
4  | Comment #3                   | 00
5  | Comment #3 reply             | 00_04 
```

**示例 SQL**

```
SELECT * FROM comments ORDER BY path 
```

**示例 PHP**

```
while ($result = mysql_fetch_assoc($query)) {
    $nesting_depth = count(explode("_", $result['path']));
    $branch = str_repeat("--", $nesting_depth);
    echo $branch {$result['comment']}";
} 
```

**示例结果**

```
Comment #1
-- Comment #1 reply
---- Comment #1 reply reply
Comment #2
Comment #3
-- Comment #3 reply 
```

我将确切的数据添加到我的 MySQL 数据库中并对其进行了测试并按预期工作。但是，如果我更改表中数据的顺序，它就不起作用。我会解释：

**新的*真实*测试数据**

```
ID | Comment                      | Path
---+------------------------------+----------
0  | Comment #1                   | 00
1  | Comment #2                   | 00
2  | Comment #3                   | 00
3  | Comment #3 reply             | 00_04
4  | Comment #1 reply             | 00_01
5  | Comment #1 reply reply       | 00_01_02 
```

看看 row[4] 和 row[5]，这些回复评论是最后添加的评论，并且极大地改变了结果的顺序：

**新的测试结果**

```
Comment #1
Comment #2
Comment #3
-- Comment #1 reply
---- Comment #1 reply reply
-- Comment #3 reply 
```

这是个大问题！这家伙是在胡说八道还是我做错了什么？除非数据与您要显示的顺序完全相同，否则它将永远无法工作。我可以做一些简单的事情来修复订单吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:43:09.767

每个“主”注释都必须有一个包含唯一 ID 号的路径。在您的情况下，每个“主要”评论的 ID 为`00`. 如果你有其中三个，那么就没有办法在两者之间得到答复。

```
ID | Comment                      | Path 
---+------------------------------+---------- 
0  | Comment #1                   | 00 
1  | Comment #2                   | 00 
2  | Comment #3                   | 00 
4  | Comment #1 reply             | 00_01 <-- Last item 
```

最后一个`item`永远是最后一个项目（按字母顺序）。如果您用唯一的 ID 区分每个“主要”评论，那么问题就解决了。

```
ID | Comment                      | Path 
---+------------------------------+---------- 
0  | Comment #1                   | 01
1  | Comment #2                   | 02 
2  | Comment #3                   | 03 
4  | Comment #4 reply to 1 (1)    | 01_01 <- first key is parent_id, second is sequence
5  | Comment #5 reply to 1 (2)    | 01_02 
6  | Comment #6 reply to 4 (1)    | 04_01 
7  | Comment #7                   | 04 
8  | Comment #8 reply reply to 5  | 01_02_01 
```

因此，当您要回复评论时，您需要做的就是引用他们的整个路径，并在末尾添加一个索引键。

在上表中：

```
01_01 = parent id: 01 -> sequence: 01
04_01 = parent id: 04 (so a reply to id 4) -> sequence: 01
01_02_01 = parent_id: 01_02 (references the path of ID 5) -> sequence: 01 
```

等等

再说一次，这是一个奇怪的结构。在我看来`id/parent_id`，这种事情的关系更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:19:22.767

构建的“路径”是垃圾。我在`"00_04"`（评论#3 回复）中看不到任何东西可以告诉我这条评论是评论#3 的子项。我认为您希望在路径中的评论中使用实际的 ID 号。

```
ID | Comment                      | Path
---+------------------------------+----------
0  | Comment #1                   | 00
1  | Comment #2                   | 01
2  | Comment #3                   | 02
3  | Comment #3 reply             | 02_03
4  | Comment #1 reply             | 00_04
5  | Comment #1 reply reply       | 00_04_05 
```

# c++ - Qt Thread 对象仅作为 Qt:DirectConnection 发送信号 - 为什么？

> ID：12982489
> 
> 赞同：0
> 
> 时间：2012-10-19T21:08:30.127
> 
> 标签：c++, qt, signals-slots

我有一个派生自的类`QThread`： `class MyClass : public QThread` 该类与另一个对象的插槽相连。最初这是连接为`Qt::AutoConnection`. 但是然后 - 一旦线程启动（`MyClass::run()`） - 信号不再“到达插槽”（**为什么？**）。

```
// connected before myObject->run()
s = QObject::connect(
_myObject, SIGNAL(signalLogMessage(const QString&, QtMsgType)), 
this, SLOT(slotLogMessage(const QString&, QtMsgType)), Qt::DirectConnection); 
```

我的第一个想法是我需要强制`Qt::QueuedConnection`（`this`/`_myObject`将是跨线程的）。在这种情况下，它根本不起作用。只`Qt::DirectConnection`工作。线程启动后，恕我直言`Qt::QueuedConnection`是正确的选择（跨线程）。

**知道出了什么问题吗？**连接本身似乎是正确的，否则它无法正常工作（意味着即使不使用`Qt::DirectConnection`）。

编辑 1：——截至海德的回答/尼科斯的评论

截至目前，我认为海德的回答/尼科斯的评论指出了根本原因。我`QThread`正在为另一个应用程序运行它自己的消息循环。这就是为什么它在自己的线程中运行并且基本上是一个无限循环的原因

```
run() { 
  // exec(); // while not reached    
  while (_runMessageLoop && ...) {
    hr = CallDispatch(.....);
    if (hr== 0) QThread::msleep(100); 
    // QCoreApplication::processEvents();
  }
} 
```

猜猜由于这个无限循环，Qt 消息循环没有运行，并且没有处理任何信号/插槽（这是正确`Qt::DirectConnection`的吗？）当直接调用方法而不需要 Qt 消息循环时，这可能是唯一的原因连接类型工作。

**现在的问题是，如何将 Qt 和我自己的消息循环结合起来**（如果可行的话）？无法在循环之前调用 exec() （因为它在 Qt 循环中），并且只是`QCoreApplication::processEvents();`在“我的循环”中仍然无法正常工作。

=> 在此处查看新问题：[如何结合自己的消息循环和 Qt 事件循环？](https://stackoverflow.com/questions/13054053/qt-how-to-combine-own-message-loop-and-qt-event-loop)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T18:55:47.710

没有看到所有代码很难说，但这可能是因为：

QThread 对象本身不是线程，它是线程控制器。最重要的是，QThread 对象的线程亲和性*不*应该是它所控制的线程。如果你的线程运行 Qt 事件循环，那么最好避免继承 QThread。相反，将您的逻辑（线程间插槽等）放在另一个 QObject 中，在创建它之后将其移动到使用 moveToThread 创建的线程。子类 QThread 的唯一真正原因是`run()`用不调用的方法覆盖方法`exec()`。

相关阅读： [https ://www.qt.io/blog/2010/06/17/youre-doing-it-wrong](https://www.qt.io/blog/2010/06/17/youre-doing-it-wrong)

另外：如果你重写 QThread::run()，你必须调用`QThread::exec()`那里，否则事件循环将不会运行，并且没有非直接信号被传递到具有该线程亲和力的任何 QObject。如果你想拥有自己的事件循环，那是可能的，你只需要调用[`QCoreApplication::processEvents()`](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#processEvents)来处理 Qt 事件。

# pyrocms - pyro cms 页面中的自定义数据，例如图像或其他数据

> ID：12982496
> 
> 赞同：0
> 
> 时间：2012-10-19T21:09:29.037
> 
> 标签：pyrocms

我想知道如何在 PyroCMS 中向页面添加自定义字段。理想情况下，我希望在布局顶部有一个图像区域，并在 pyro 中有一个自定义字段，允许某人从页面模块填充该图像。我意识到有一些图像插件允许我将图像附加到页面，但我希望能够将图像直接添加到管理中的页面中（以及页面的其他自定义字段）。即使在单独的标签上我也可以。如果有人能指出我正确的方向，我可以建造一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:52:55.847

目前，如果您想向页面添加自定义字段，您必须破解模块。这*显然*不理想，我也不是真的建议这样做，但我必须为[http://tedco.org/business](http://tedco.org/business)为每个页面添加一个“字幕”字段。

2.2/develop 将其页面和博客移至 Streams，因此您可以向全球所有页面添加自定义字段，这意味着您可以根据需要添加图像，或出于某种原因附加美国州，或添加滑块。鞭打！

所以现在：破解它或等待。2.2/develop 将在一两周内拥有您的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T02:36:44.703

我不确定您是否可以直接从页面模块执行此操作而无需进行一些自定义（可能是黑客攻击），但我只是询问并会在可能的情况下进行更新。

与此同时，这可能会有所帮助：

考虑研究[PyroStreams。](https://www.pyrocms.com/store/details/pyrostreams)尽管如此，它需要专业版的 PyroCMS，或者您可以直接从[Parse19](http://parse19.com/pyrostreams/)购买它。

您可能会发现[这篇文章](http://docs.pyrocms.com/2.1/manual/concepts/organization)对组织和页面布局很有帮助。

这是一篇名为[Dynamic Pages with PyroCMS and PyroStreams](http://blog.adamfairholm.com/dynamic-pages-with-pyrocms-and-pyrostreams/)的文章，不过现在有点过时了。

您也可以使用免费的[图库模块](https://www.pyrocms.com/store/details/galleries)，但我不确定这是否能满足您的需求。

# windows-phone-7 - Windows Phone 7.5 应用程序下载

> ID：12982499
> 
> 赞同：0
> 
> 时间：2012-10-19T21:09:53.033
> 
> 标签：windows-phone-7, marketplace

我是否需要有效的电话连接才能从 Windows Market Place 下载应用程序？

当我尝试从 MarKet Place 安装应用程序时，收到错误消息

> 我们尝试向您的手机发送下载请求，但没有收到回复。

我给了继续发送重新安装的电子邮件。

收到重装邮件，点击链接，又回到同一画面，再次出现同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:13:03.210

是的，它会向手机发送一条特殊的短信以开始下载。您可以改为使用手机上的 Marketplace 应用程序下载。

# date - Robocopy 上次修改：比一天更准确？

> ID：12982511
> 
> 赞同：3
> 
> 时间：2012-10-19T21:10:40.780
> 
> 标签：date, batch-file, robocopy

我正在处理一个 Windows 批处理文件来执行与服务器的双向同步。多人将使用该批处理文件将多台计算机与一个网络位置同步。由于限制我不会进入，它必须是一个批处理文件。没有 vbscript，没有 javascript，只有 windows 批处理。Powershell 命令可能没问题，只要我可以从批处理文件中运行它们。

为了允许删除文件，它会多次运行 robocopy。首先，它使用 /MAXLAD 开关复制比上次运行脚本时更新的文件。它在两个方向上都这样做。然后，它使用 /l 开关进行镜像并检查退出代码以检测额外文件。如果任何一方有额外的文件，它会在适当的方向上真正运行镜像。

该脚本按原样运行良好，但是...

问题是，/MAXLAD 接受格式为 YYYYMMDD 的日期，因此，如果您在本地创建文件，运行同步脚本，然后立即删除文件并再次同步，它就从坟墓里回来了。为了成功删除一个文件，它需要在您最后一次运行脚本之前至少一天未修改。我想要一些方法来消除这个限制，所以它可以按照我的用户喜欢的频率运行并按预期工作。

我的问题是：有什么方法可以使最后访问时间更精确吗？即使我可以将它缩小到一个小时，这将是一个改进。除了 robocopy 之外，我还应该做其他事情来复制新文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:03:50.760

使用`ROBOCOPY`AFAIK，不可能比一天更精确。
但是，可以使用其他两种方法获得更精细的**信息。**

```
DIR /o:d /a:-d 
```

将当前目录的文件从最新到最旧排序，并将任何目录排除在列表之外。
要反转列表以使其从最旧到最新，请更改`/o:d`为`/o:-d`。

* * *

此外，该`FOR`语句可以做同样的事情。

```
@ECHO OFF
setlocal ENABLEDELAYEDEXPANSION
set count=0
:: If some other process left %tmp%\temp.txt, delete it.
if exist %tmp%\temp.txt del %tmp%\temp.txt

for %%x in (*.*) do (
    set /a count=!count!+1
    :: Capture Size
    set size=000000%%~zx
    :: Capture Date and Time
    set td=%%~tx
    :: Turn Date into YYYY/MM/DD format
    set dd=!td:~6,4!/!td:~0,5!
    :: Set tt=hour of day
    set tt=!td:~11,2!
    :: Turn AM/PM time into 24 hour day time
    if !td:~-2!==PM set /a tt=!tt!+12
    :: Add :Minutes to time
    set tt=!tt!:!td:~-5,2!
    :: Append Size Date Time FileName to temp.txt
    call echo !size:~-5! !dd! !tt! %%x>>%tmp%\temp.txt
rem    :: Create variable size[n] and set it to: Size Date Time FileName
rem    call set size[!count!]=!size:~-5! !dd! !tt! %%x
)

echo.
echo Size  Date       Time  FileName
echo ===== ========== ===== ===============

::
:: Alternate 1: Replacing the Append line to `temp.
:: :: Print Array into %tmp%\temp.txt
:: for /l %%x in (1 1 %count%) do (
::  :: Pipe variable into a file
::  echo !size[%%x]!>>%tmp%\temp.txt
:: )

::
:: Alternate 2: Another way to iterate through the array size[n]
:: :loop
::   set /a ctr=%ctr%+1
::   echo !size[%ctr%]!
:: if %ctr% lss %count% goto loop

::
:: Sort temp.txt, starting at the 6th character (the date).
type %tmp%\temp.txt | sort.exe /+6
del %tmp%\temp.txt
echo. 
```

上面的代码并不像看起来那么长和复杂。大部分都是简单的注释，将近一半占用了代码。其余大部分是冗余代码，仅用于显示

# java - Click 和 LongClick 监听器抛出 IllegalStateException

> ID：12982512
> 
> 赞同：2
> 
> 时间：2012-10-19T21:10:44.603
> 
> 标签：java, android, exception, button, onclicklistener

尝试同时实现`onClickListener`和时`onLongClickListener`出现此错误`RelativeLayout`：

```
10-19 17:49:31.400: E/AndroidRuntime(30886): FATAL EXCEPTION: main
10-19 17:49:31.400: E/AndroidRuntime(30886): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

这是代码的一部分：

```
RelativeLayout meals_layout = (RelativeLayout) view
.findViewById(R.id.meals);      

meals_layout.setOnLongClickListener(new OnLongClickListener() { 
    @Override
    public boolean onLongClick(View v) {

        AlertDialog.Builder builder = new AlertDialog.Builder(
                JournalActivity.this);
        builder.setTitle(R.string.meal_delete); 
        builder.setView(clickView);

        builder.setPositiveButton(R.string.string_delete,
                new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {

            }

        });
        builder.setNegativeButton(R.string.string_cancel,
                new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog,
                    int which) {
                // Do nothing
                dialog.dismiss();
            }
        });

        builder.create().show();
        return false;
    }
});

meals_layout.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        AlertDialog.Builder builder = new AlertDialog.Builder(
                JournalActivity.this);
        builder.setTitle(R.string.meal_edit); // al que hacerlo bonito
        builder.setView(clickView);

        builder.setPositiveButton(R.string.string_edit,
                new DialogInterface.OnClickListener() {
        }
    });

        builder.setNegativeButton(R.string.string_cancel,
                new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog,
                    int which) {
                // Do nothing
                dialog.dismiss();
            }
        });

        builder.create().show();

}
}); 
```

我第一次打开活动时，我可以按我想要的次数进行长按。但是，当我单击任何其他按钮时（不仅是这里所说的那个），如果我再次尝试进行长按...应用程序崩溃。

我将非常感谢您的帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:13:44.647

每个视图只允许一个父级。显然`clickView`已经有一个，所以当你调用`setView(clickView)`它时会抛出错误。一种解决方法是添加：

```
((GroupView) clickView.getParent()).removeView(clickView); 
```

到你的两个听众的开头。这将“孤立” `clickView`，因此可以添加到 AlertDialog。

# c# - 模拟击键时遇到问题

> ID：12982513
> 
> 赞同：1
> 
> 时间：2012-10-19T21:10:49.490
> 
> 标签：c#, winapi, keyboard

我过去曾使用 WIN32API 调用来模拟击键而没有太多麻烦。即使是现在，从表面上看，它似乎也奏效了。我正在使用 Win32 SendMessage 调用将 WM_KEYDOWN、WM_CHAR、WM_KEYUP 消息发送到记事本实例。

果然，我发送的任何内容都会出现在记事本中。

但是在使用 Spy++ 检查消息时；我注意到我发送的按键与我实际键入的按键或使用 Windows 内置屏幕键盘创建的按键明显不同。

在 Spy++ 中，我的单个 WM_KEYDOWN 生成两行：

```
<001> 00234 S WM_KEYDOWN nVirtKey:'W'....
<002> 00234 R WM_KEYDOWN 
```

真正按下 W 键（或使用 OnScreenKeyboard）只会生成一行

```
<003> 00234 P WM_KEYDOWN nVirtKey:'W'... 
```

如果我展开这些消息，我可以看到“S”代表已发送，R -“已接收”，P -“已发布”。

谁能告诉我如何以编程方式更准确地模拟键盘输入？我已经匹配了消息的其余部分（包括 lParam 值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:12:55.470

我认为您将需要使用`PostMessage`而不是`SendMessage`. 除了将消息传递给接收者的方式之外，它几乎相同。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)

# constants - 编译器问题：“使用未声明的标识符”错误，常量仍然有效

> ID：12982519
> 
> 赞同：1
> 
> 时间：2012-10-19T21:11:15.867
> 
> 标签：constants, compiler-warnings

我正在使用一个 Constants.h 文件来为 URL 等资源声明大量字符串。这在过去一直运行良好，实际上在我编译和运行时继续运行。

然而，尽管将它们标记为“语义问题”（听起来更像是警告），但问题导航器仍显示错误（红色刘海），并且代码编辑器窗口也显示它们，如下所示：

```
[app openBrowserWithUrl:[NSURL URLWithString: kRequestInformationURL]]; 
```

Constants.h 中的行如下所示：

```
static NSString * const kRequestInformationURL = @"http://www.myserver.com"; // uses SSL! 
```

它为我在 Constants.h 中的所有声明抛出警告/错误。但它仍然可以编译并运行良好！我不知道这里发生了什么，但这很烦人，因为我的项目现在显示我有很多警告/错误。

我还应该补充一点，这发生在我的一台 Mac 上的 Xcode 的最新版本（4.5.1）中，而不是另一台，打开完全相同的项目文件。

我应该注意的另一件事：通常只有在编译后单击文件进行编辑时才会看到这些错误/警告。

**更新已编辑**：我认为我可以通过遵守更严格的常量声明来消除这些问题，如本文所述：[https](https://stackoverflow.com/a/539039/326398) ://stackoverflow.com/a/539039/326398但是所有警告（正如我之前所说，在 Xcode 中标有错误图标）马上回来了。所以谜团仍然完好无损。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:19:53.360

当你使用“false”变量时会发生这种情况，你的 NSString 被声明为 *“const”，你不能这样做，因为 const 实际上是 Xcode 中某些东西的自己的声明，只需更改 NSStrings 变量名。

# r - 如何以编程方式创建 R 函数？

> ID：12982528
> 
> 赞同：43
> 
> 时间：2012-10-19T21:12:15.037
> 
> 标签：r, function

[Hadley Wickham](https://stackoverflow.com/users/16632/hadley)最近在[r-devel 邮件](https://stat.ethz.ch/pipermail/r-devel/2012-October/064946.html)列表上提出了一个有趣的问题，并且无法在 StackOverflow 上找到有关该主题的现有问题，我认为它也存在于此处可能很有用。

转述：

**R 函数由三个元素组成：参数列表、主体和环境。我们可以从这三个元素以编程方式构造一个函数吗？**

（在上面 r-devel 链接中的线程末尾有一个相当全面的答案。我将把它留给其他人自己重新创建各种解决方案的基准测试并将其作为答案提供，但一定要引用 Hadley如果你这样做。如果几个小时内没有人站出来，我会自己做。）

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-19T23:56:22.297

[这是对这里](https://stat.ethz.ch/pipermail/r-devel/2012-October/064957.html)讨论的扩展。

我们的三个部分需要是一个参数列表、一个主体和一个环境。

对于环境，我们将简单地`env = parent.frame()`默认使用。

我们并不真正想要一个常规的旧列表作为参数，所以我们使用`alist` 它有一些不同的行为：

> “......不评估值，并且允许没有值的标记参数”

```
args <- alist(a = 1, b = 2) 
```

对于body，我们`quote`的表达式得到一个`call`：

```
body <- quote(a + b) 
```

一种选择是转换`args`为配对列表，然后简单地`function` 使用以下方法调用该函数`eval`：

```
make_function1 <- function(args, body, env = parent.frame()) {
      args <- as.pairlist(args)
      eval(call("function", args, body), env)
} 
```

另一种选择是创建一个空函数，然后用所需的值填充它：

```
make_function2 <- function(args, body, env = parent.frame()) {
      f <- function() {}
      formals(f) <- args
      body(f) <- body
      environment(f) <- env

      f
} 
```

第三种选择是简单地使用`as.function`：

```
make_function3 <- function(args, body, env = parent.frame()) {
      as.function(c(args, body), env)
} 
```

最后，这对我来说似乎与第一种方法非常相似，除了我们使用稍微不同的习惯用法来创建函数调用，使用 `substitute`而不是`call`：

```
make_function4 <- function(args, body, env = parent.frame()) {
      subs <- list(args = as.pairlist(args), body = body)
      eval(substitute(`function`(args, body), subs), env)
}

library(microbenchmark)
microbenchmark(
      make_function1(args, body),
      make_function2(args, body),
      make_function3(args, body),
      make_function4(args, body),
      function(a = 1, b = 2) a + b
    )

Unit: nanoseconds
                          expr   min      lq  median      uq    max
1 function(a = 1, b = 2) a + b   187   273.5   309.0   363.0    673
2   make_function1(args, body)  4123  4729.5  5236.0  5864.0  13449
3   make_function2(args, body) 50695 52296.0 53423.0 54782.5 147062
4   make_function3(args, body)  8427  8992.0  9618.5  9957.0  14857
5   make_function4(args, body)  5339  6089.5  6867.5  7301.5  55137 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-09T14:17:34.530

还有一个以`alist`编程方式创建对象的问题，因为当参数的数量是可变的时，这对于创建函数很有用。

An`alist`只是一个空符号的命名列表。这些空符号可以用`substitute()`. 所以：

```
make_alist <- function(args) {
  res <- replicate(length(args), substitute())
  names(res) <- args
  res
}

identical(make_alist(letters[1:2]), alist(a=, b=))
## [1] TRUE 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-09-06T22:30:51.420

`rlang`有一个名为的函数`new_function`：

> **用法**
> 
> new_function(args, body, env = caller_env())

```
library(rlang)
g <- new_function(alist(x = ), quote(x + 3))
g
# function (x) 
# x + 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-26T12:56:19.570

我不确定这会有所帮助，但下面的代码在某些情况下可能会有所帮助，

**hello_world**可以是用于创建函数的字符串，assign 将用于命名函数**hello_world**

```
hello_world <- "print('Hello World')"

assign("Hello",function()
  {
    eval(parse(text = hello_world))
  }, envir = .GlobalEnv) 
```

This will create a function called hello_world

# sql-server - 模式绑定和计算列依赖循环

> ID：12982529
> 
> 赞同：0
> 
> 时间：2012-10-19T21:12:16.793
> 
> 标签：sql-server, sql-server-2012, circular-dependency, calculated-columns, schemabinding

嗯，这不好。

我有一个名为“GetFriendlyProductItem”的模式绑定函数，它为 ProductItems 表中的产品返回一个人类可读的名称。

反过来，ProductItems 表有一个名为“Name”的计算列，它使用该函数在该列中生成值。

问题是我需要对 ProductItems 进行更改。我不能，因为 GetFriendlyProductItem 使用它并且它是模式绑定的。我试图改变 GetFriendlyProductItem 使它不再是模式绑定的。这会引发我无法更改它的错误，因为它正在 ProductItems 的计算列中使用。

当我有这个依赖循环阻止它时，如何修改 ProductItems 表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:53:31.197

这很容易：

```
ALTER TABLE dbo.ft DROP COLUMN name; 
```

其中 name 是计算列的名称。

只要确保将定义保存在某处...

# ruby-on-rails - 如何通过引用将变量设置为另一个实例

> ID：12982530
> 
> 赞同：0
> 
> 时间：2012-10-19T21:12:17.980
> 
> 标签：ruby-on-rails, ruby

给出以下代码：

```
vars = instance_variables.map(&method(:instance_variable_get))
vars.each {|v| v = 123} 
```

那会设置@something = 123吗？

更进一步

如果我有，是一样的吗

```
vars = instance_variables.map(&method(:instance_variable_get))
vars.each {|v| doSomething(v) }

def doSomething(var)
  var = 123
end 
```

我将如何从函数内部对 var 进行变异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:33:06.833

你可以`irb`很快地对此进行测试：

```
@something = 456
instance_variables
# => [:@something]
instance_variables.map(&method(:instance_variable_get)).each { |v| v = 123 }
@something
# => 456 (i.e. "didn't mutate @something")

def doSomething(var)
  var = 123
end
vars = instance_variables.map(&method(:instance_variable_get))
vars.each { |v| doSomething(v) }
@something
# => 456 (i.e. "didn't mutate @something") 
```

然而，[Object#instance_variable_set](http://ruby-doc.org/core-1.9.3/Object.html#method-i-instance_variable_set)*确实*改变了 的值`@something`：

```
@something = 456
instance_variables.each { |v| instance_variable_set(v, 123) }
@something
# => 123 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:40:00.317

同意 pje，您可能应该在 irb 中对此进行测试，但我假设您想为每个实例变量捕获一个 setter，所以我建议您这样做：

```
setters = instance_variables.map{|v| lambda { |val| instance_variable_set(v, val) }} 
```

那么你可以这样做`setters[0].call(__VALUE__)`，它会相应地设置值。

你想达到什么目的？

# java - 检查文件是否同时执行

> ID：12982533
> 
> 赞同：1
> 
> 时间：2012-10-19T21:12:29.227
> 
> 标签：java, multithreading

我需要独立执行 2 项任务。

**第一个任务**

每分钟一次，它应该检查特定文件夹中是否有任何文件。如果有，它应该将文件的名称添加到队列中。

这可以按如下方式完成：

```
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public class schedulerExample extends Thread{

    public void checkFile()
    {
        System.out.println("checking whether file exist in folder");

    }

    public void getFiles()
    {
        System.out.println("getting the file names");
    }

    public void enqueueFiles()
    {
        System.out.println("add files to queue");
    }
    public static void main(String[] args) {

    final schedulerExample obj = new schedulerExample();
    ScheduledExecutorService executor = new ScheduledThreadPoolExecutor(1);
    executor.scheduleAtFixedRate(new Runnable() {

        @Override
        public void run() {

            obj.checkFile();
            obj.getFiles();
            obj.enqueueFiles();

        }
    }, 0, 1, TimeUnit.MINUTES);

    }

} 
```

**第二个任务**

如果队列为空，则休眠一分钟，否则逐个处理队列中的文件。

```
public class processModel extends Thread{

    public static void getQueueSize(int size)
    {
        System.out.println("getting queue size");

    }
    public void dequeue()
    {

        // dequeue the queue
        System.out.println("dequeue");

    }

    public void processFile()
    {
        // process the file
        System.out.println("process file");
    }

    public static void main(String[] args) {
        final boolean flag = true;
        final int size = 9;
        final processModel obj = new processModel();
        Thread t1 = new Thread(){
            public void run()
            {
                while(flag)
                {
                obj.dequeue();
                obj.processFile();
                getQueueSize(size);
                    if(size == 0)
                    {
                        try
                        {
                        Thread.sleep(60000);
                        }
                        catch(InterruptedException e)
                        {

                        }
                    }
                }

            }

        };

        t1.start();

    }

} 
```

现在我需要在一个班级同时做这两个。那可能吗？

一个线程应该每分钟获取一次文件。另一个线程应该一个接一个地执行文件。如果没有文件，它会等待一分钟并再次检查。在第二种方法中，我使用了无限循环——而不是那样，有没有一种方法可以让我一个接一个地执行事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:33:37.783

您可能需要考虑将[Callable](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)与 java [ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)一起使用。这可用于轻松分解任务并允许它们同时运行。除此之外，您可以获得一个 Future ，它允许您随时检查结果（如果没有完成，则推迟）。

有一本关于 java 和并发的好书叫做“Concurrency in Practice”。

除此之外，Java 7 还具有允许在目录上进行文件侦听器的新功能。这可能允许您抽象这种“检查和循环”功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:33:14.740

当您从队列对象中获取文件以及向其中添加文件时，在队列对象上进行同步。

在读取的线程中，`wait()`如果队列为空，则调用。
在检查新文件的线程中，在将`notify()`新文件添加到队列后调用。

这就是通常的做法。

* * *

您还应该防止将正在处理的文件添加到队列中。

# objective-c - 另一个 ViewController 中的 iOS Perform 方法

> ID：12982536
> 
> 赞同：-2
> 
> 时间：2012-10-19T21:12:33.063
> 
> 标签：objective-c, ios, json, methods

我有一个`FethViewController`和一个`DisplayViewController`...

`FethViewController`其中有一个从 Web 服务获取 JSON 的方法。

我想访问该 JSON 对象，或者在`DisplayViewController`.

我该怎么做呢？我试过[这个](https://stackoverflow.com/questions/12855931/calling-method-from-another-viewcontroller)，但没有用。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:03:50.863

在不了解应用程序架构的更广泛背景的情况下，我会说您有两种选择：

1.  **依赖注入**- 由于您在也需要 JSON 的远端视图之前的视图的上下文中获取 JSON，因此一种选择是将 JSON 对象沿层次结构传递 - 即传递给您的`UITabBarController`等。我相信您发布的链接这个问题是指依赖注入。当您说*“它不起作用”*时，我不确定您的意思。
2.  使 JSON 对象成为**单例类**的属性- 也许您可以创建一个单例类来管理网络访问。然后，在对象图中具有钝关系的对象可以访问网络和网络调用的结果，而无需依赖注入的混乱。

最后，我并不是说这些中的任何一个都比另一个更好（或比其他替代方案更好），因为我们对您的应用程序的目标和剩余的体系结构知之甚少。

# javascript - Jasmine：扫描别名时未找到预期的字母或数字字符

> ID：12982544
> 
> 赞同：8
> 
> 时间：2012-10-19T21:13:00.867
> 
> 标签：javascript, ruby, jasmine

在浏览[http://testfirst.org/learn_javascript](http://testfirst.org/learn_javascript)时，我尝试在 00_hello/ 文件夹中运行 rake jasmine。我收到此错误：

```
hugos-MacBook-Pro:00_hello hugo$ rake jasmine --trace
(in /Users/hugo/Developer/test_first_javascript/learn_javascript)
** Invoke jasmine (first_time)
** Invoke jasmine:server (first_time)
** Invoke jasmine:require (first_time)
** Execute jasmine:require
** Execute jasmine:server
your tests are here:
  http://localhost:8888/
rake aborted!
(<unknown>): did not find expected alphabetic or numeric character while scanning an alias at line 5 column 7
/Users/hugo/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse'
/Users/hugo/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
/Users/hugo/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
/Users/hugo/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/config.rb:19:in `simple_config'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/config.rb:62:in `spec_dir'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/runner_config.rb:32:in `spec_dir'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/application.rb:28:in `block (2 levels) in app'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:141:in `new'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:141:in `block in generate_map'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:141:in `each'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:141:in `generate_map'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:128:in `to_app'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:55:in `app'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/application.rb:14:in `app'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/server.rb:3:in `initialize'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/tasks/jasmine.rake:51:in `new'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/jasmine-1.2.1/lib/jasmine/tasks/jasmine.rake:51:in `block (2 levels) in <top (required)>'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/hugo/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/Users/hugo/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `load'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `<main>'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/Users/hugo/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => jasmine => jasmine:server 
```

我做了一些调查，发现了这个：[http](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=680227) ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=680227 。可能是我的 ruby​​ 解析器错误/我使用了错误版本的 ruby​​。

```
hugos-MacBook-Pro:00_hello hugo$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-27T15:15:24.260

好像你的 yaml 有一些不起作用的字符。看看你的 spec/support/jasmine.yaml，你可能有类似的东西：

```
- **/*.js 
```

只需将其替换为：

```
- '**/*.js' 
```

# jquery - 如何检索 td 具有名称为 mailaddress 的 id 的表行？

> ID：12982548
> 
> 赞同：0
> 
> 时间：2012-10-19T21:13:15.907
> 
> 标签：jquery

我正在使用数据表并包含一个删除操作，因为我需要使用 jquery 选择 tr。但我不知道如何获取名称为 mailaddress 的 td 所在行的 tr。

这是我的桌子

```
 <table id="table_id" class="display">
        <thead>
            <th>Property</th>
            <th>Value</th>      
            <th></th>
        </thead>
        <tbody>
            <button id="create-property">Create new property</button>

            <tr >
                <td>mailAddress_object</td>
                <td id="mailAddress_object" >Message from SendALL 2.5</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_1" name="mailAddress_object"></span></td>                     
            </tr>       

            <tr >
                <td>mjmj</td>
                <td id="mjmj" >xcvxcv</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_2" name="mjmj"></span></td>                       
            </tr>       

            <tr >
                <td>olol</td>
                <td id="olol" >kjkkjk</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_3" name="olol"></span></td>                       
            </tr>       

            <tr >
                <td>plsUrl</td>
                <td id="plsUrl" >http://komm2.srs-management.de</td>        
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_4" name="plsUrl"></span></td>                     
            </tr>       

            <tr >
                <td>scPwd</td>
                <td id="scPwd" >sysadm</td>     
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_5" name="scPwd"></span></td>                      
            </tr>       

            <tr >
                <td>smtp</td>
                <td id="smtp" >YOUR_MAILSERVER</td>     
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_6" name="smtp"></span></td>                       
            </tr>       

            <tr >
                <td>test</td>
                <td id="test" >test3</td>       
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_7" name="test"></span></td>                       
            </tr>       

            <tr >
                <td>useEncryption</td>
                <td id="useEncryption" >false</td>      
                <td><span class="ui-icon ui-icon-trash" id="deleteRow_8" name="useEncryption"></span></td>                      
            </tr>       

        </tbody>    
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:16:11.473

您应该能够与父母一起获得它

```
$("#mailaddress").parent("tr"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:17:24.563

这不是很有效，但这应该有效：

```
$("input[name='mailAddress_object']:first").parents('tr:first') 
```

通常有更好的方法来做到这一点，这样代码就不必做太多的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:17:59.283

试试这个

```
$("tr:has(td[name='mailAddress_object'])") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:19:33.750

```
$('td[name=mailaddress]') 
```

会给你 td name=mailaddress 然后你可以得到父母 tr

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-19T21:15:54.997

假设您的意思是 a`td`的 id `mailAddress_object`，这就是您的代码显示的内容：

```
var $tr = $('#mailAddress_object').closest('tr'); 
```

# jquery - SimpleCart.js - 在滑出面板内时结帐购物车按钮不起作用

> ID：12982550
> 
> 赞同：1
> 
> 时间：2012-10-19T21:13:26.793
> 
> 标签：jquery, e-commerce

现场网站示例在[这里](http://www.rubytuesdaycreative.co.uk/testsite/snood.html) 我设法让结帐按钮在我的正常页面内容中正常工作（您可以在图片下方看到它，尽管链接目前是白色的，因为这只是一个占位符）

但是，我有一个包含购物篮数据的滑出式 div，并且将具有结帐代码。代码是：

```
<a href="javascript:;" class="simpleCart_checkout"></a> 
```

出于某种原因，我的`slide-out-div`工作中没有任何链接，我假设 simplecart 干扰了隐藏的 div 内的东西？div在页面上：

```
<!-- Checkout cart div -->
<div class="slide-out-div">
    <a class="handle" href="http://link-for-non-js-users">Content</a>
    <div class="simpleCart_items"></div>
<a href="javascript:;" class="simpleCart_empty emptyBtn">Empty</a>
<a href="javascript:;" class="simpleCart_checkout buyBtn">Checkout</a>
</div> 
```

此 div 中的任何数据似乎都没有按应有的方式进行交互。

# c - Linux & C：从 X 外部与 X 服务器通信？

> ID：12982559
> 
> 赞同：0
> 
> 时间：2012-10-19T21:14:23.907
> 
> 标签：c, linux, xserver

我正在开发一个小型服务器程序，该程序从网络接收数据并执行各种操作。其中一项操作是打开与系统上运行的 X 服务器的连接并模拟按键操作。当我的服务器从 X 内的终端启动时，这很好，但我希望我的程序在系统启动时作为系统服务启动，然后在客户端请求时与 X 通信。

`XOpenDisplay(NULL)`我遇到的基本问题是对不是从 X 内部启动的进程的调用失败。据我了解，我无法从 X 外部打开 X 显示器，因此我能想到的最佳解决方法是编写一个单独的程序，该程序在用户登录 X 时启动，等待信号或消息从服务器，然后执行请求的操作。如果此帮助程序未运行或由于某种原因失败，则可以假设服务器可以将错误发送回客户端是完全可以的。

所以问题：我上面描述的是最好的（虽然是混乱的）解决方案，还是有更好的方法？事实上，有没有一种从 X 外部打开 X 显示的方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:15:46.480

“在 X 内部”只是`DISPLAY`设置环境变量的问题。您可以在任何地方执行此操作。

如果有问题的 X 服务器正在为不同的用户运行，您可能还需要处理身份验证令牌，例如`Xauthority`票证。

但是 - 对于您描述的用例，我强烈建议您运行您自己的 X 服务器进程，独立于系统的实际显示硬件。这可能是[`Xvnc`](http://www.hep.phy.cam.ac.uk/vnc_docs/xvnc.html)如果您想以交互方式连接检查，或者简单的无头实现，或者[`Xvfb`](http://en.wikipedia.org/wiki/Xvfb)根本不需要显示缓冲区。这种方法还可以防止您的软件在用户登录和注销时需要重新启动，否则会出现这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:45:16.777

可以从机器上运行的任何进程连接到 X 显示器 - 您需要设置`DISPLAY`变量来指示要连接到哪个 X 会话，并且可能需要正确的 XAuthority 令牌。

但是，对于您的情况，这将被视为“混乱”的解决方案，因为您基本上需要猜测显示编号并解决授权问题。您还必须处理当您的守护程序启动时 X 服务器尚未启动的情况，或者当您的守护程序运行时 X 服务器重新启动时（X 客户端库并非真正设计用于处理X 服务器离开并再次回来）。

“干净”的解决方案实际上是您建议的解决方法 - 在 X 会话中运行的客户端通过 UNIX 域套接字或类似连接到您的守护程序。

# include - 无法使用绝对路径调用 `require()`（`allow_url_include` 在 PHP.ini 中设置为 `0`）

> ID：12982560
> 
> 赞同：0
> 
> 时间：2012-10-19T21:14:28.350
> 
> 标签：include, relative-path, php, absolute-path

> **可能重复：**
> [将 include_once 与 php 变量一起使用时出错](https://stackoverflow.com/questions/8034064/error-using-include-once-with-a-php-variable)

我的代码是这样的：

```
<?php   // file location: include/config.php
    $CONFIG["DIRECTORY"]["HTMLINC"] = "http://127.0.0.1/mysite/html_include";
?> 
```

,

```
<?php   // file location: ./template.php
    require_once("include/config.php");
    // ...
    require($CONFIG["DIRECTORY"]["HTMLINC"] . "/anotherpage.php"); // Doesn't work
?> 
```

它给出以下警告消息：

> 警告：require(): http:// wrapper 在服务器配置中被allow_url_include=0 禁用...

我目前正在本地服务器中测试代码，因此我可以轻松更改`allow_url_include`. 但我最终会将这段代码上传到远程服务器。我不能保证`allow_url_include`将始终设置为`1`.

如何防止此警告消息并使此代码正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:17:22.483

这不是绝对路径。那是一个网址。绝对路径将是磁盘上文件的路径。如果你去`/var/www/mysite/html_include`访问文件进行编辑，那就是绝对路径。您可能希望设置`$CONFIG["DIRECTORY"]["HTMLINC"]`为该绝对路径。您可以使用`$_SERVER['DOCUMENT_ROOT']`获取 apache 提供的 Web 根目录并附`/mysite/html_include`加以生成正确的路径。理想情况下，您可能会有一个名为 APP_ROOT 的单独配置变量，它是文档根 + /mysite（应用程序的绝对路径）。就像是：

```
<?php
$CONFIG["DIRECTORY"]["APP_ROOT"] = $_SERVER['DOCUMENT_ROOT'].'/mysite';
$CONFIG["DIRECTORY"]["HTMLINC"] = $CONFIG["DIRECTORY"]["APP_ROOT"].'/html_include'; 
```

这也将允许您将 APP_ROOT 用于其他变量：

```
$CONFIG["DIRECTORY"]["UPLOADS"] = $CONFIG["DIRECTORY"]["APP_ROOT"].'/uploads';
$CONFIG["DIRECTORY"]["IMAGES"] = $CONFIG["DIRECTORY"]["APP_ROOT"].'/images';
$CONFIG["DIRECTORY"]["THUMBNAILS"] = $CONFIG["DIRECTORY"]["APP_ROOT"].'/thumbs'; 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:22:22.103

不要使用 http URL 作为您的包含 - 它们无论如何都不会按您期望的方式工作。

如果它们被启用，它们将被视为外部 URL，因此在提供给包含页面之前由 PHP 解析。因此，结果输出将不包含任何 PHP 代码，因为它已经被执行。

如果要包含本地文件，则需要提供本地磁盘上的目录路径，而不是 URL（甚至不是 localhost URL）。

在任何情况下，任何理智的托管公司几乎总是禁用从 URL 运行包含的功能，因为允许代码从第三方站点进入并直接在您的系统上运行会带来巨大的安全风险。

如果您想包含网站本地的文件，您可以使用`$_SERVER['DOCUMENT_ROOT']`来引用站点的根目录，或者`__DIR__`引用当前文件的目录。我想前者在你的情况下是最好的，所以你需要这个：

```
$CONFIG["DIRECTORY"]["HTMLINC"] = $_SERVER['DOCUMENT_ROOT']."/mysite/html_include"; 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:17:21.283

您使用“http://127.0.0.1”输入一个 URL。您必须从文件系统引用它，而不是通过本地 IP。所以你需要设置`$CONFIG["DIRECTORY"]["HTMLINC"] = '/path/from/root/html_include'`

文件系统中的“绝对路径”与 HTML 中的绝对路径不同（以协议开头 - 即“http://”）。

# javascript - 通过实时计算传递div（数字）中的文本？

> ID：12982562
> 
> 赞同：0
> 
> 时间：2012-10-19T21:14:31.753
> 
> 标签：javascript, jquery

由于缺乏更好的标题，我希望以我在[jsfiddle](http://jsfiddle.net/stebesplace/gYf4h/7/)中的示例为例，并将其转换为 div 中的数字（它始终是一个数字）：

```
<div class="output" id="i1">100</div> 
```

并将该数字通过公式传递，实时将其吐出到**p**标签（不需要是 ap 标签，可以是另一个 div。

```
<p>200</p> or <div id="i2">200</div> 
```

上面的 200 是通过将 div id #i1 的原始值加上 100 来计算的。现在，小提琴显示当您输入一个值时，它会输出实时计算。

所以问题是，如果不是输入值，函数会从 DIV 标签中提取数字数据，通过函数运行它，然后将其吐回段落标签中，它会是什么样子？我认为其中大部分功能已完成，但无法完全弄清楚 DIV 文本的拉动。

我看过的一些帖子已经包括[一篇关于实时输入](https://stackoverflow.com/questions/12892120/javascript-real-time-calculation)的文章，[一篇关于计算和显示](https://stackoverflow.com/questions/12913367/pulling-through-text-into-div)的文章，还有一些其他的。

**解决方案**

[这个小提琴](http://jsfiddle.net/stebesplace/gYf4h/10/)为我展示了解决方案。它比我以前简单得多。下面给出了一个关于监听器插件的解决方案，看起来不错，但对于我需要的东西来说太过分了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:30:37.663

您可以考虑在此处使用观察者模式。

检查更多。[http://canjs.us/#can_observe](http://canjs.us/#can_observe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:36:16.507

要从 div 获取文本，然后将其解析为浮点数，请使用以下命令：

```
parseFloat(document.getElementById('i1').childNodes[0].nodeValue) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T01:42:12.013

[这个小提琴](http://jsfiddle.net/stebesplace/gYf4h/10/)为我展示了解决方案。它比我以前简单得多。下面给出了一个关于监听器插件的解决方案，看起来不错，但对于我需要的东西来说太过分了。

```
<form id="vcForm">
    <div id="i1">100</div>
    <p></p>
</form> 
```

​</p>

```
$("#i1").keyup(function() {
    var input1 = parseFloat($("#i1").text(),10);
    var input2 = 100;
    total1 = parseFloat(input1) + parseFloat(input2);
    $("p").text(total1);
}).keyup()​ 
```

第一个 DIV 中的值将是动态的（通过滑块更改）。当然，当我在功能上扩展它时，我们会看到实时更新，但对于我最初的问题，这回答了它。

# javascript - Javascript HTML 注册

> ID：12982563
> 
> 赞同：1
> 
> 时间：2012-10-19T21:14:41.883
> 
> 标签：javascript, html, forms, registration

我正在为类创建一个 html 文档，我的笔记中有一个示例与我必须做的非常相似，它有名字、姓氏和电话号码，我的问题是这行代码是什么意思？有一个 .addphone 样式，但底部的代码仅适用于电话，为什么不是名字或姓氏？

```
 <!-- <div class="addphone" onclick="addPhone();">Add Phone</div> -->
    <input id="adduser" type="submit" value="Add User" style="margin-top: 25px;">
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:19:14.013

为什么不是名字或姓氏？

我想这是因为您的“用户”可以拥有多个电话，但不能超过一个名字或姓氏。不过，这并不是一个真正的编程问题，是吗？！

`onclick()`将事件处理程序放在`div`元素上从来都不是一件好事。它看起来`div`也被赋予了一个样式类，使其看起来像一个按钮或链接。好吧，如果您需要按钮或链接，请使用按钮或链接。这样，键盘支持就会自动包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:50:17.383

第一行代码是可点击元素的示例。在这种情况下已被注释掉，这意味着它不会在浏览器中呈现。

例如：

```
<!-- Anything written here won't affect the page --> 
```

这行，加上样式表中的行，是否有可能是关于如何为您的作业编写其他字段的示例？

# iphone - 从 viewController 更改 UIColor 以在 UIView 类中使用

> ID：12982564
> 
> 赞同：0
> 
> 时间：2012-10-19T21:14:53.280
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

我正在尝试创建一个绘画应用程序，我看到一个带有颜色的变量并将其传递给 UIView 但我在 viewController 中有一个按钮来更改颜色，但我可以找到一种方法来传递颜色的变化到 UIview：

ViewController（这项工作很好）：

```
paint *canvas=[[paint alloc]initWithFrame:frame];
    [self.view addSubview:canvas];
    canvas.colorSelected=colorSelected; 
```

我有一个按钮来更改颜色选择：

*   (IBAction)colorSelection:(id)sender

但是因为 canvas.colorSelected 的实例是在设置 canvas.colorSelected 之后释放的，所以我如何从 IBAction 更改颜色选择，因为如果我创建另一个实例，它不会指向同一个 colorSelected 指针。我的问题是如何从 viewController 的 ibaction 中更改 colorSelected？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:22:41.037

如果您想设置背景颜色，真的很难理解您要做什么：

`canvas.backgroundColor = colorSelected`

如果你想通过设置一个`colorSelected`值来改变颜色，
你必须在你的`paint`类中覆盖一个 setter，
做这样的事情：

`in Paint.m`

```
- (void) setColorSelected:(UIColor*) color {
    _colorSelected = color;
    self.backgroundColor = color;
} 
```

现在，当您这样做时，`canvas.colorSelected=[UIColor redColor];`您的画布将设置`colorSelected`变量并更改背景颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:20:56.340

您需要在视图控制器中创建一个实例变量来保存对您的**绘画**对象的引用。您无需像在发布的代码中那样使用局部变量，而是将**绘制**对象分配给实例变量。然后在您的按钮处理程序中，您可以调用`colorSelected`实例变量上的属性来更新视图的颜色。

# oracle - 不在查询中...奇怪的结果

> ID：12982568
> 
> 赞同：3
> 
> 时间：2012-10-19T21:15:31.397
> 
> 标签：oracle, notin

我需要一个数据库中未在另一个数据库中列出的用户列表`new_user_id`。两个数据库中有 112,815 个匹配用户；`user_id`是所有查询表中的键。

查询 #1 有效，并为我提供了 111,327 个未被引用为 new_user_Id 的用户。但它需要两次查询相同的数据。

```
-- 111,327 GSU users are NOT listed as a CSS new user 
--   1,488 GSU users ARE listed as a new user in CSS
--
select count(gup.user_id)
from   gsu.user_profile gup
  join (select cud.user_id, cud.new_user_id, cud.user_type_code
        from   css.user_desc cud) cudsubq
    on gup.user_id = cudsubq.user_id
where  gup.user_id not in (select cud.new_user_id 
                           from   css.user_desc cud
                           where  cud.new_user_id is not null); 
```

查询#2 将是完美的......实际上我很惊讶它在语法上被接受。但这给了我一个毫无意义的结果。

```
-- This gives me 1,505 users... I've checked, and they are not
-- referenced as new_user_ids in CSS, but I don't know why the ones 
-- that were excluded were excluded.
--
-- Where are the missing 109,822, and whatexcluded them?
-- 
select count(gup.user_id)
from   gsu.user_profile gup
  join (select cud.user_id, cud.new_user_id, cud.user_type_code
        from   css.user_desc cud) cudsubq
    on gup.user_id = cudsubq.user_id
where  gup.user_id not in (cudsubq.new_user_id); 
```

第二个查询中的 where 子句到底在做什么，为什么它从结果中排除 109,822 条记录？

**注意** 上面的查询是我真正追求的简化。还有其他/更好的方法可以进行上述查询......它们只是代表给我带来问题的查询部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:06:31.167

阅读：[http ://asktom.oracle.com/pls/asktom/f?p=100:11:0::NO::P11_QUESTION_ID:442029737684](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::NO::P11_QUESTION_ID:442029737684)

据我了解，即使两个表都由 连接，您`cudsubq.new_user_id`也可以，因此，*当子集包含**values时，**您将不会使用运算符获得结果*。考虑文章中的示例：`NULL``user_id`*`NOT IN``NULL`*

```
select * from dual where dummy not in ( NULL ) 
```

这不返回任何记录。尝试使用`NOT EXISTS`运算符或只是另一种联接。这是一个很好的来源： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

你需要的是第四个例子：

```
SELECT COUNT(descr.user_id)
FROM 
    user_profile prof
    LEFT OUTER JOIN user_desc descr
        ON prof.user_id = descr.user_id 
WHERE descr.new_user_id IS NULL
    OR descr.new_user_id != prof.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:10:29.640

第二个查询在语义上是不同的。在这种情况下

```
where  gup.user_id not in (cudsubq.new_user_id) 
```

`cudsubq.new_user_id`被视为表达式（[doc: IN 条件](http://docs.oracle.com/cd/B19306_01/server.102/b14200/conditions013.htm)），而不是子查询，因此整个子句基本上等同于

```
where  gup.user_id != cudsubq.new_user_id 
```

因此，在您的第一个查询中，您实际上是在询问“向我展示 GUP 中的所有用户，他们在 CSS 中也有条目，并且他们的 GUP.ID 与 CSS 中的 ANY *NOT NULL* NEW_ID 不匹配”。

但是，第二个查询是“显示 GUP 中的所有用户，他们在 CSS 中也有条目，并且他们的 GUP.ID 不等于他们的 RESPECTIVE *NULLABLE*（没有`is not null`子句，记得吗？） CSS.NEW_ID 值”。

并且任何`(not) in`（或相等/不等式）带有空值的检查实际上都不起作用。

```
12:07:54 SYSTEM@oars_sandbox> select * from dual where 1 not in (null, 2, 3, 4);

no rows selected                                                   

Elapsed: 00:00:00.00 
```

这是您丢失行的地方。`where cudsubq.new_user_id is null`假设不匹配的用户的 new_user_id 为空，我可能会将您的第二个查询的 where 子句重写为 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T21:47:52.533

你想要`new_user_id`'s from table 与 table上的任何内容`gup`都不匹配，对吧？这听起来像是左连接的工作：`new_user_id``cud`

```
SELECT count(gup.user_id)
    FROM gsu.user_profile gup LEFT JOIN css.user_desc cud
        ON gup.user_id = cud.new_user_id
    WHERE cud.new_user_id is NULL 
```

连接保留 的所有行，如果可能`gup`，将它们与 a 匹配。`new_user_id`WHERE 条件仅保留 中没有匹配行的行`cud`。

（抱歉，如果您已经知道这一点并且您只对`not in`查询的行为感兴趣）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T04:32:31.560

您的第二个选择将 gup.user_id 与当前加入记录上的 cud.new_user_id 进行比较。您可以重写查询以获得相同的结果

```
select count(gup.user_id)
from   gsu.user_profile gup
  join (select cud.user_id, cud.new_user_id, cud.user_type_code
        from   css.user_desc cud) cudsubq
    on gup.user_id = cudsubq.user_id
where  gup.user_id != cud.new_user_id or cud.new_user_id is null; 
```

您提到您将一个数据库中的用户列表与另一个数据库中的用户列表进行比较。所以你需要查询两次数据，而不是查询相同的数据。也许您可以使用“减号”运算符来避免使用“in”

```
select count(gup.user_id)
from   gsu.user_profile gup
  join (select cud.user_id from css.user_desc cud
        minus
        select cud.new_user_id from css.user_desc cud) cudsubq
    on gup.user_id = cudsubq.user_id; 
```

# iphone - 在 iOS 开发中应该使用哪种 RGB 比例？

> ID：12982576
> 
> 赞同：1
> 
> 时间：2012-10-19T21:16:26.507
> 
> 标签：iphone, ios, colors, photoshop, rgb

我遇到了一个问题，我相信许多 iOS 开发人员以前都遇到过，所以我来这里寻求帮助。我在一家公司工作，我正在开发的 iPhone 应用程序的设计规范是在 Adob​​e PhotoShop 中制作的。我得到了这些设计规范，并被告知“让它发生”。

为了尽可能地遵循设计规范，我经常使用 OS X 中包含的 DigitalColor Meter 实用程序。它是一个功能强大且非常有用的工具。问题是它能够显示不同的 RGB 比例。

例如，如果我正在查看从 PS 导出的图像并且使用通用 RGB 比例，我可以查看灰度值并获得 234/234/234。没关系。我使用 UIColor 将它放入我的 iOS 应用程序中，我得到了一个看起来正确的颜色，但是当我使用 DigitalColor Meter 查看它时，值是 228/228/228！

如何获得更一致的工作流程？我怎样才能使我从 PS 的 PNG 图像中获得的值与在我的模拟器甚至设备中显示的图像完全相同？那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:27:36.160

我很确定不同的 iOS 设备（iPhone、iPad）在显示颜色配置文件方面具有不同的特性：如果您使用不同的设备，您会从 Digital Color Meter 获得不同的结果。

原则上，要解决这个问题，您应该对设备显示进行颜色配置；一旦有了显示器的颜色配置文件，您就可以在 Photoshop 中使用它来获取您应该指定的值，以便配置文件显示上的输出与原始颜色匹配。要创建颜色配置文件，您应该使用特定的工具（色度计）和特定的软件（市场上有很多）。

实际上，正如我所说，因为每个设备都有自己的特性，所以您需要为每个设备配置一个配置文件，然后为每个设备使用一组不同的颜色。相当难以驾驭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T12:16:09.053

您需要的是应用程序中的颜色管理。有一个很好的颜色管理库可用。它是开源的。看看小 CMS：- [https://github.com/mm2/Little-CMS](https://github.com/mm2/Little-CMS)

从 IOS 9.3 开始，Apple 已经内置了跨设备的色彩管理。

# javascript - 使用 Backbone 路由器重新渲染 Meteor 页面

> ID：12982578
> 
> 赞同：3
> 
> 时间：2012-10-19T21:16:57.507
> 
> 标签：javascript, html, javascript-framework, meteor, handlebars.js

我正在尝试使用 Meteor 创建一个博客应用程序。在这个博客中，有一个主页，访问者可以简单地阅读帖子，另一个部分是“管理”面板，我可以在其中编辑帖子。我正在尝试使用车把模板助手，但我不确定我哪里弄错了。我也是一名业余开发人员，并试图更好地学习 Meteor 框架。我的代码是这样的：

**博客.html**

```
<head>
  <title>Jeff Lam Tian Hung</title>
</head>

<body>
  <h1>Jeff Lam Tian Hung</h1>
  <a href="/" class="main">Main Page</a>
  <a href="/admin" class="admin">Admin</a>
  {{> content}}
</body>

<template name="content">
  {{#if currentPage "blog"}}
    {{#each posts}}
      <h2>{{Title}}</h2>
      <p>{{Body}}</p>
    {{/each}}
  {{/if}}

  {{#if currentPage "admin"}}
    <h2>{{admin}}</h2>
  {{/if}}
</template> 
```

**博客.js**

```
// Declaration of Collections
Posts = new Meteor.Collection("Posts");

// Helper variable is for pages
// TODO: changing this var will change the
// page but now how to rerender the page?
var page = "blog";

// Declaration of Template Reactivity Variables
Template.content.currentPage = function (type) {
  return page === type;
};
Template.content.posts = function () {
  return Posts.find({}, {sort: {Date: 1}});
};
Template.content.admin = function () {
  return "This will render admin section";
};

// Router for Pages
var Router = Backbone.Router.extend({
  routes: {
    "":      "main",
    "admin": "admin"
  },
  main: function () {
    page = "blog";
  },
  admin: function () {
    page = "admin";
  }
});

var BlogRouter = new Router;

Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

**publish.js（仅限服务器端代码）**

```
Posts = new Meteor.Collection("Posts"); 
```

该页面将使用上述代码呈现博客文章，但是当我访问 localhost:3000/admin 时，页面变量设置为“admin”，但页面/模板不会重新呈现自身以显示“Admin” ' 文本。

但是，如果我设置 var page = 'admin' 并刷新应用程序，该页面会重新呈现管理消息就好了。我不确定我是否正确使用了车把模板助手来执行这种“带路由的单页模板刷新”。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T07:15:57.807

您的变量“页面”不是响应式的，只是一个普通的 JavaScript 变量。它无法通知 Meteor 的变化。

当我开始使用 Meteor 时，出于类似目的，我将页面“代码”放入 Session 变量中，这将触发您的页面更新。例如：

```
// Declaration of Template Reactivity Variables
Template.content.currentPage = function (type) {
    return Session.equals("page", type);
}; 
```

在你的路由器中：

```
...
Session.set("page", "admin");
… 
```

（尽管您可能想将 Session.set 位放在它自己的函数中）

因为 Session 变量在 Meteor 框架中是响应式的，并且会在更改时通知。

# java - 如何忽略 Subclipse 中的构建目录？

> ID：12982579
> 
> 赞同：6
> 
> 时间：2012-10-19T21:17:09.237
> 
> 标签：java, eclipse, svn, build, subclipse

构建后，我在构建目录中获得了大量自动生成的类文件。我不想提交它们，所以我尝试使用 忽略它们`Team -> Add to svn:ignore`，但它们已经变灰了。

![在此处输入图像描述](../Images/d452cf73f6f94645ebc88955a34a33df.png)

我尝试使用 删除构建目录`Project -> Clean`，但有趣的是，当我尝试提交时，Subclipse 仍然拥有它们。

什么地方出了错？如何忽略 Subclipse 中的构建目录？

![在此处输入图像描述](../Images/93e55fc79d28edbfa1c25570c8b4e080.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T14:33:18.750

您不能忽略 svn 存储库中已经存在的文件。从存储库中删除该文件，然后重试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:33:18.710

我认为它们已经被添加到版本控制视图中并且尚未提交。我希望您不会在您的`subclipse`存储库中看到您的文件。如果是这样，请先尝试执行项目-> 团队-> 清理。

如果这不起作用，请告诉我，我将与您分享手动执行清理的步骤。

请注意：通过`clean`，我不是指项目干净，而是指在您的项目文件夹的文件夹中`repository cache cleanup`维护的项目。`.svn`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:40:12.857

我必须事先恢复 (team -> revert) 以启用 (team -> add to svn) 项目。我不确定这是否与此更改有关，但我必须`svn update`手动执行以消除一些错误。

# knockout.js - 如何使用字符计数器和最大长度构建文本区域？

> ID：12982587
> 
> 赞同：9
> 
> 时间：2012-10-19T21:17:29.347
> 
> 标签：knockout.js, knockout-2.0

请考虑[这个 jsfiddle](http://jsfiddle.net/wpbWY/)。它包含以下内容：

```
<textarea data-bind="value: comment, valueUpdate: 'afterkyedown'"></textarea>

<br/><br/>
<span data-bind="text: getCount, valueUpdate: ['afterkeydown','propertychange','input']"></span> characters??? 
```

而这个JavaScript：

```
var viewModel = function(){
    var self = this;

    self.count = ko.observable(0);
    self.comment = ko.observable("");
    self.getCount = function(){
        var countNum = 10 - self.comment().length;
        self.count(countNum);
    };
}

var viewModel12 = new viewModel();
ko.applyBindings(viewModel); 
```

我有一个最大长度应为 20 个字符的文本区域。当字符数达到 20 时，将停止，如果您尝试添加更多字符，它们将被删除。

请注意，这也适用于复制/粘贴：如果用户粘贴超过 20 个字符，则只有前 20 个字符会保留，其余的应删除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T21:27:15.607

看看[这个 jsfiddle](http://jsfiddle.net/wpbWY/3/)，它按照以下方式工作：

```
var viewModel = function(){
    var self = this;

    self.comment = ko.observable("");
    self.count = ko.computed(function(){
        var countNum = 10 - self.comment().length;
        return countNum
    });
}

var vm = new viewModel();
ko.applyBindings(vm); 
```

```
<textarea data-bind="value: comment, valueUpdate: 'afterkeydown'"></textarea>
<br/><br/>
<span data-bind="text: count"></span> characters​​​​​​​ 
```

你需要了解[ko.computed()](http://knockoutjs.com/documentation/computedObservables.html)来做这种事情......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T08:39:43.933

使用计算值只能部分解决问题。根据该计算值禁用文本区域（如[Michael Berkompas 的小提琴](http://jsfiddle.net/wpbWY/5/)中所做的那样）并不能真正解决问题。您需要使用[自定义绑定](http://knockoutjs.com/documentation/custom-bindings.html)来完成这项工作。使用那个小提琴作为起点，我们可以使用自定义绑定来完成它：

[http://jsfiddle.net/ReQrz/1/](http://jsfiddle.net/ReQrz/1/)

类似于：

```
ko.bindingHandlers.limitCharacters = {
    update: function(element, valueAccessor, allBindingsAccessor, viewModel)
    {
       element.value = element.value.substr(0, valueAccessor());
       allBindingsAccessor().value(element.value.substr(0, valueAccessor()));
    }
}; 
```

然后做：

```
<textarea data-bind="value: comment, valueUpdate: 'afterkeydown', limitCharacters: 20"></textarea> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-19T20:20:32.533

这在 3.0.0 中对我有用

```
    ko.bindingHandlers.maxLength = {
        更新：函数（元素，valueAccessor，allBindings）{
            if(allBindings().value()){
                所有绑定（）
                  .value(allBindings().value().substr(0, valueAccessor()));
            }
        }
    }

```

```
  <textarea data-bind="value: 消息，
                       最大长度：255，
                       valueUpdate: 'afterkeydown'"></textarea>

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-26T21:43:52.513

为什么不在视图中做这样的事情：

```
<textarea data-bind="event: { keypress: enforceMaxlength }></textarea> 
```

在viewModel中有这个？

```
function enforceMaxlength(data, event) {
        if (event.target.value.length >= maxlength) {
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-01T10:03:45.830

textarea 有一个属性 maxlength。

对于您的问题，我找到了一种没有任何功能的方法：

```
<textarea style="resize: none;" data-bind="value: payComments, valueUpdate: 'afterkeydown', attr: { maxlength: payCommentsMaxlength }"></textarea> 
```

```
 var viewModel = function() {
  var self = this;

  self.payCommentsMaxlength = "20";
  self.payComments = ko.observable("");  

  self.payCommentsCountAndMax = ko.computed(function() {
    return self.payCommentsMaxlength - self.payComments().length;
  });
}

var vm = new viewModel();
ko.applyBindings(vm); 
```

我有一个类似的任务，你可以在这里查看：http: [//jsfiddle.net/KateKotova/h9cvj38L/12/](http://jsfiddle.net/KateKotova/h9cvj38L/12/)

# c# - 如何使用 LINQ 和 C# 从 3 个不同的文件中查找最早的日期？

> ID：12982588
> 
> 赞同：2
> 
> 时间：2012-10-19T21:17:30.957
> 
> 标签：c#, linq

> **可能重复：**
> [如何在 Linq 查询中选择最小和最大日期值](https://stackoverflow.com/questions/5200877/how-to-select-min-and-max-date-values-in-linq-query)

我首先要说我对 LINQ 的经验非常有限。我一直在使用嵌套的 if 语句来查找 3 中最旧的文件，它工作得很好。但我正在尝试扩大我对新技术的使用。我读到的很多关于 LINQ 的内容很快就让我难以理解。尤其是当他们开始使用 lambda 时。所以我可以获得 3 个文件的日期，但是如何使用 LINQ 获取其中最旧的文件？或者甚至有可能吗？我有下面的伪代码。

```
 DateTime file1 = File.GetLastWriteTime(@"c:\test1.txt");
        DateTime file2 = File.GetLastWriteTime(@"c:\test2.txt");
        DateTime file3 = File.GetLastWriteTime(@"c:\test3.txt");

        DateTime[] dates = { file1, file2, file3 };

        var date = from d in dates
                   where d is oldest date
                   select d; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T21:21:42.937

```
var result = dates.Min(); 
```

是你所需要的全部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T21:19:14.953

使用`Min`. 像这样排序：

```
var oldestdate = (from d in dates
                   select d).Min(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T21:21:07.583

```
DateTime oldest = dates.Min(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T21:21:22.020

没有任何IDE方便，但我认为您可以使用扩展方法`dates.Min()`？

根据我的记忆，如果 System.Linq 没有明确包含在您的使用中，您可能需要包含它。

# perl - 为所有元素添加递增的 id 属性

> ID：12982590
> 
> 赞同：0
> 
> 时间：2012-10-19T21:17:40.443
> 
> 标签：perl, xml-twig

有一个 XML-Twig 示例显示了如何将具有递增值的 id 属性添加到指定元素。是否有简单的方法将递增的 id 添加到所有元素。

```
#!/bin/perl -w

#########################################################################
#                                                                       #
#  This example adds an id to each player                               #
#  It uses the set_id method, by default the id attribute will be 'id'  #
#                                                                       #
#########################################################################

use strict;
use XML::Twig;

my $id="player001";

my $twig= new XML::Twig( twig_handlers => { player => \&player } );
$twig->parsefile( "nba.xml");    # process the twig
$twig->flush;
exit;

  sub player
    { my( $twig, $player)= @_;
      $player->set_id( $id++);
      $twig->flush;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:51:37.550

I'm going to assume when you say "every element" you mean it. There's several ways you can do that via [`twig_handlers`](https://metacpan.org/module/XML%3a%3aTwig#XML%3a%3aTwig). There is the special handler `_all_`. Or since twig_handler keys are [XPath](http://www.w3schools.com/xpath/) expressions you can use `*`.

```
use strict;
use warnings;
use XML::Twig;

my $id="player001";
sub add_id {
    my($twig, $element)= @_;

    # Only set if not already set
    $element->set_id($id++) unless defined $element->id;

    $twig->flush;
}

my $twig= new XML::Twig(
    twig_handlers       => {
        # Either one will work.
        # '*'     => \&add_id,
        '_all_' => \&add_id,
    },
    pretty_print        => 'indented',
);
$twig->parsefile(shift);    # process the twig
$twig->flush; 
```

# text-files - 打开 .txt 文件的安全性

> ID：12982597
> 
> 赞同：5
> 
> 时间：2012-10-19T21:18:14.173
> 
> 标签：text-files, virus

如果给我一个指向`.txt`文件的 URL，打开它总是安全的吗？它可能包含病毒或恶意内容吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:28:49.783

真正的txt文件可以包含病毒代码，但不能执行，所以它是完全安全的。但是，文件可以使用这样的双文件扩展名，因此请注意：

病毒文件.txt.exe

Windows 默认隐藏 .exe，因为它是已知的文件类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T21:20:15.590

仅仅依靠文件扩展名是不安全的。更改扩展名的人很容易掩盖真实的文件类型，因此文件很容易成为病毒或恶意内容。

例如：

MyVirus.exe -> 看似无害的文件.txt

# css - Firefox图像位置与chrome不同

> ID：12982598
> 
> 赞同：-2
> 
> 时间：2012-10-19T21:18:13.783
> 
> 标签：css, image, firefox, google-chrome, position

[已解决 - 问题与 ucoz 提供的网络工具有关]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:53:04.767

您的网页缺少文档类型。

`<!DOCTYPE html>`应该是 HTML 中的第一件事。

然后使用 W3C 提供的 HTML 验证器来修复您的 HTML [http://validator.w3.org](http://validator.w3.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T23:26:34.433

您应该投资一个重置样式表来规范跨浏览器的元素。尝试将其插入您的标题：

```
<link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css"> 
```

# powershell - 为什么两个相似的 PowerShell 复制项命令的行为不同

> ID：12982603
> 
> 赞同：0
> 
> 时间：2012-10-19T21:18:59.817
> 
> 标签：powershell

我有两个非常相似的单行命令，但一个有效，一个不带变量。

```
Copy-Item "C:\BadSourceCodes\dropTest\base1\*" -Include "myUsers.Config","myUsers.WSF" -Destination "C:\BadSourceCodes\dropTest\temp1" 
```

这很有效，我有两个文件，我希望将它们复制到目标文件夹。

如果我创造这样的东西

```
$files = "myUsers.Config,myUsers.WSF"

$tempFiles = [string]::Concat("`"",$files.Replace(",","`",`""),"`"")
$tempFiles
Copy-Item "C:\BadSourceCodes\dropTest\base1\*" -Include $tempFiles -Destination "C:\BadSourceCodes\dropTest\temp1" -Force 
```

一旦我对包含文件使用变量，它就不起作用。我检查了不同的变体，但它不起作用。

$ 变量的行为是否不同？

我尝试了以下变体，例如 $($tempFiles)、'$tempFiles'、"$tempFiles".....

**更新：** 我认为当我转义引号并将 , 替换为 "," 时，它会将引号视为字符串的一部分。我采取了一些糟糕的方法。但是起作用的只是 $files.Split(",") 它创建了一个字符串数组并完成了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:46:35.653

该`-Include`参数需要一个字符串数组，而不是单个字符串中的名称列表。将名称放入实际数组中，它应该可以工作：

```
#create an array of strings
$files = "myUsers.Config","myUsers.WSF"

Copy-Item "C:\BadSourceCodes\dropTest\base1\*" -Include $files -Destination "C:\BadSourceCodes\dropTest\temp1" -Force 
```

# spring - Spring 3 表单验证链接到 JPA 实体

> ID：12982606
> 
> 赞同：0
> 
> 时间：2012-10-19T21:19:12.217
> 
> 标签：spring, jpa, validation

我计划在我的 Web 应用程序中使用 Spring 3 验证。我正在考虑这一点，因为我的 JPA 实体的属性已经用一些标准验证进行了注释，例如 nullable="false" 或 length="50"。有什么方法可以在 Spring 3 支持表单中重用 JPA 验证？

我觉得一个更好的主意是重新编码 Spring 表单上的验证，因为我们可以获得更多有用的错误消息。你怎么看 - 是否有可能以一种干净的方式在 Spring 表单中重用 JPA 验证？什么是更好的设计 - 重新实现验证或重用基本验证并分别编码更具体的验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T01:02:47.697

以我的经验，一旦你编写了一个自定义`Validator`，你就负责验证有关 Spring 的所有字段`WebDataBinder`。如果违反，验证约束注释仍然会抛出异常。

# android - android 4.0.3 上操作栏中的“后退按钮”似乎使我的应用程序崩溃

> ID：12982610
> 
> 赞同：2
> 
> 时间：2012-10-19T21:19:16.927
> 
> 标签：android, android-intent, crash, android-actionbar, android-logcat

# 编辑

发生的问题是由于我将清单中设置活动的父级设置为全部小写，这不是主要活动路径的正确格式。

* * *

我最初的应用程序目标是成功实现加载和保存按钮（您猜对了）加载和保存数据（到外部 sd 卡上的文本文件）。成功实现此功能后，我决定使用可更改字体大小和颜色的设置文件来使用共享首选项。我设置了一个菜单，该菜单将通过一个意图运行我的设置活动。设置活动由 sdk 生成，但在您按下操作栏上的后退按钮后似乎崩溃了。 应用程序、[logcat 文件和我的源代码的](http://pastebin.com/fVZW6wNX "LogCat 日志")[屏幕截图](http://i.imgur.com/BcKza.png "错误屏幕")如下。感谢您的时间！

* * *

**这是用于启动设置活动的方法。**

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent intent = new Intent(this, SettingsActivity.class);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

**这是生成的设置活动。**

```
package com.spacemanspiff.savefiles;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class SettingsActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_settings);
    getActionBar().setDisplayHomeAsUpEnabled(true);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_settings, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:02:34.063

```
The crash can be rectified by adding the **android:parentActivityName** in the manifest    file for the child activity.
    E.g.

       <activity
            android:name="com.example.projectlearn.ActivityTwo"
            android:label="@string/title_activity_two"
            android:parentActivityName="com.example.projectlearn.MainActivity" >
        </activity> 
```

# objective-c - drawRect()过程中如何改变字符串默认颜色，核心图形

> ID：12982612
> 
> 赞同：0
> 
> 时间：2012-10-19T21:19:28.647
> 
> 标签：objective-c, ios, core-graphics, drawrect

我正在使用以下方法在矩形中绘制一个字符串

```
- (void)drawRect:(CGRect)rect {
    .................................................
    .................................................
    for(NSString *titleString in self.titlesArray) {
        CGContextSaveGState(context);                                                 // Pushes a copy of the current graphics state onto the graphics state stack for the context.
        CGRect labelRect = CGRectMake((self.segmentWidth*i), yCoor, self.segmentWidth, self.font.pointSize);
        CGContextAddRect(context, labelRect);                                         // Adds a rectangular path to the current path.
        [titleString drawInRect:labelRect withFont:self.font lineBreakMode:UILineBreakModeClip alignment:UITextAlignmentCenter];
        CGContextRestoreGState(context);
    }
} 
```

结果是

![在此处输入图像描述](../Images/418834fa89afe1310e6c73bde015bef8.png)

我们可以看到字符串的默认颜色是黑色

***问题***：是否可以在 drawRect() 期间更改字符串的颜色以及如何将其存档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:25:42.217

就像是：

```
[[UIColor blueColor] set]; 
```

将工作。如果您希望所有字符串都相同，请将其放在循环之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:45:20.380

你可以使用这个：

```
CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor); 
```

# php - 遍历 HTML 网页中的不同工作表

> ID：12982615
> 
> 赞同：0
> 
> 时间：2012-10-19T21:19:35.217
> 
> 标签：php, javascript, html

我正在制作一个用作社交营销应用程序的网站。这个想法是有一堆不同的工作表并迭代它们。现在我正在制作不同的 html 网页并在每个网页中插入这样的代码：

```
<script type="text/javascript>
    setTimeout(function() {
    window.location.href = "http://ip/nextpage"}, 5000);

</script> 
```

我不喜欢这种解决方案，因为我不想从一个页面更改为另一个页面（Chrome 也会显示带有重定向的小消息）。我认为最好有一个可以显示所有工作表的网页。我怎么能这样做？目前我只使用 HTML、Javascript 和 PHP，但我不想使用其他语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:20:57.380

使用将在 s 中显示页面的 js 灯箱`<iframe>`。

[http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

# asp.net - 服务器控制错误：带有 ASP.NET 的未知服务器标记

> ID：12982618
> 
> 赞同：2
> 
> 时间：2012-10-19T21:19:58.487
> 
> 标签：asp.net, vb.net

我正在尝试让自定义控件在**VB ASP.Net中工作**

我已经阅读了一些主题，但它似乎对我没有多大帮助。我有一个解决方案，包括：

*   **名为“SiteCI”的**网站项目****
***   **名为“SiteCI-classes”的**类库项目******

 ****网站项目有对库项目的引用，库DLL在网站项目的bin文件夹内正确生成。

当我在网站项目中创建一个随机类时，我可以通过键入以下内容访问名为 MailLink 的测试控制类：

```
SiteCI_classes.Controls.MailLink 
```

它完美运行，Visual Studio 向我建议，因此**两个项目之间的链接设置正确**。

请注意，我每次都**清理/重建项目以查看它是否真的有效，所以这不是 DLL 构建不正确的问题。**

在 system.web -> pages -> controls 我添加的 Web Config 文件中：

```
<add assembly="SiteCI-classes" namespace="Controls" tagPrefix="custom" /> 
```

但是在我添加时在 ASP.Net 页面上：

```
<custom:MailLink runat="server" id="test1"></custom:MailLink> 
```

我收到***未知服务器标签“自定义：MailLink”***错误。

为了检查我在输入 web 配置文件时是否出错，我尝试将 SiteCI-classes 更改为 SiteCI_classes，但我收到一条错误消息，说它无法加载程序集，所以我猜那部分没问题，然后我尝试更改***namespace="SiteCI_classes.Controls"***或***namespace="SiteCI-classes.Controls"***中的 namespace= ***"Controls*** "并没有解决未知的服务器标签问题。

 ***我不知道该怎么办......它应该工作，不是吗？

这是 MailLink.vb，它位于Library 项目的***Controls文件夹中。***这是我在 Microsoft 页面上选择的一门课程，仅用于测试目的。

如果有人能给我关于检查内容的提示，我将不胜感激。

```
Namespace Controls
    < _
    AspNetHostingPermission(SecurityAction.Demand, _
        Level:=AspNetHostingPermissionLevel.Minimal), _
    AspNetHostingPermission(SecurityAction.InheritanceDemand, _
        Level:=AspNetHostingPermissionLevel.Minimal), _
    DefaultProperty("Email"), _
    ParseChildren(True, "Text"), _
    ToolboxData("<{0}:MailLink runat=""server""> </{0}:MailLink>") _
    > _
    Public Class MailLink
        Inherits WebControl

        < _
        Bindable(True), _
        Category("Appearance"), _
        DefaultValue(""), _
        Description("The e-mail address.") _
        > _
        Public Overridable Property Email() As String
            Get
                Dim s As String = CStr(ViewState("Email"))
                If s Is Nothing Then s = String.Empty
                Return s
            End Get
            Set(ByVal value As String)
                ViewState("Email") = value
            End Set
        End Property

        < _
        Bindable(True), _
        Category("Appearance"), _
        DefaultValue(""), _
        Description("The text to display on the link."), _
        Localizable(True), _
        PersistenceMode(PersistenceMode.InnerDefaultProperty) _
        > _
        Public Overridable Property Text() As String
            Get
                Dim s As String = CStr(ViewState("Text"))
                If s Is Nothing Then s = String.Empty
                Return s
            End Get
            Set(ByVal value As String)
                ViewState("Text") = value
            End Set
        End Property

        Protected Overrides ReadOnly Property TagKey() _
            As HtmlTextWriterTag
            Get
                Return HtmlTextWriterTag.A
            End Get
        End Property

        Protected Overrides Sub AddAttributesToRender( _
            ByVal writer As HtmlTextWriter)
            MyBase.AddAttributesToRender(writer)
            writer.AddAttribute(HtmlTextWriterAttribute.Href, _
                "mailto:" & Email)
        End Sub

        Protected Overrides Sub RenderContents( _
            ByVal writer As HtmlTextWriter)
            If (Text = String.Empty) Then
                Text = Email
            End If
            writer.WriteEncodedText(Text)
        End Sub

    End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:53:09.593

我发现问题似乎**只是由项目名称中的破折号**（“-”）引起的。

该项目的名称仍然是“SiteCI-Classes” ，**但**WebConfig 的最终代码不同：

```
<add assembly="SiteCIClasses" namespace="SiteCI2KClasses.Controls" tagPrefix="cc1" /> 
```

注意两者的区别。ASP.Net 3.5 将无法识别项目名称中的破折号并似乎将其删除：如果您尝试将其设置为 SiteCI-Classes 它将最终出现类似**未找到组件**的错误。*******

# ruby - 如何提供静态文件？（CSS）

> ID：12982620
> 
> 赞同：5
> 
> 时间：2012-10-19T21:20:11.210
> 
> 标签：ruby, rack, camping

在 Camping 中，如何最好地提供静态文件，例如 css？

* * *

现在我有

```
class Style < R '/cards.css'
    def get
         @headers["Content-Type"] = "text/css"
         File.read('cards.css')
    end
end 
```

有没有涉及 Rack 的更聪明的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T11:44:11.720

Camping 对静态文件的当前（记得从 RubyGems 安装最新版本！）立场是*服务器*应该负责提供静态文件。

如果您使用`camping`-command，则`public/`应该自动为您提供 -directory。只需`cards.css`进入`public/cards.css`localhost:3301/cards.css 即可返回该文件。

在生产中，您应该配置 Apache/Nginx/whatever 以直接从`public/`-directory 提供文件。

* * *

如果您无法配置 Apache/Nginx（例如在 Heroku 中），您可以像这样编写自定义 config.ru：

```
# Your Camping app:
app = MyApp
# Static files:
files = Rack::File.new('public')

# First try the static files, then "fallback" to the app 
run Rack::Cascade.new([files, app], [405, 404, 403]) 
```

（这就是 Camping::Server 在内部所做的：[https](https://github.com/camping/camping/blob/5201b49b753fe29dc3d2e96405d724bcaa7ad7d4/lib/camping/server.rb#L151) ://github.com/camping/camping/blob/5201b49b753fe29dc3d2e96405d724bcaa7ad7d4/lib/camping/server.rb#L151 ）

* * *

对于小文件，您可以将它们存储在 app.rb 的数据块中：[https ://github.com/camping/camping/blob/5201b49b753fe29dc3d2e96405d724bcaa7ad7d4/test/app_file.rb#L37](https://github.com/camping/camping/blob/5201b49b753fe29dc3d2e96405d724bcaa7ad7d4/test/app_file.rb#L37)

如果您想将所有内容保存在一个文件中，这也很有用。

```
Camping.goes :Foo

__END__

@@ /cards.css
... 
```

Camping 将使用文件扩展名来设置正确的 Content-Type。

* * *

此外，最新版本的 Camping 有一个`serve`-method 可以为您处理 Content-Type。您可以将控制器简化为：

```
class Style < R '/style.css'
  def get
    serve "cards.css", File.read("cards.css")
  end
end 
```

* * *

我必须为糟糕的文档道歉。现在你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T23:11:16.810

这是whytheluckystiff最初的[建议：](https://github.com/judofyr/camping/wiki/Serving-Static-Files)

```
class Static < R '/static/(.+)'
  MIME_TYPES = {
    '.html' => 'text/html',
    '.css'  => 'text/css',
    '.js'   => 'text/javascript',
    '.jpg'  => 'image/jpeg',
    '.gif'  => 'image/gif'
  }
  PATH = File.expand_path(File.dirname(@__FILE__@))
  def get(path)
    @headers['Content-Type'] = MIME_TYPES[path[/\.\w+$/, 0]] || "text/plain" 
    unless path.include? ".." # prevent directory traversal attacks
      @headers['X-Sendfile'] = "#{PATH}/static/#{path}" 
    else
      @status = "403" 
      "403 - Invalid path" 
    end
  end
end 
```

**PS** - 实际上，您可以[在这里](http://www.oreillynet.com/ruby/blog/2007/01/the_joy_of_rolling_your_own_wi_1.html)找到其他一些很棒的想法，例如文件上传、会话等。

# jquery - 使用样板文件时 Dreamweaver 上的语法错误

> ID：12982625
> 
> 赞同：2
> 
> 时间：2012-10-19T21:20:39.600
> 
> 标签：jquery, html5boilerplate

我是一个相对较新的网站设计师，我使用过样板文件大约 4-5 次。这很棒，我喜欢它解决的所有问题。感谢那！

但是，每次我使用它创建页面然后从该页面创建模板时，Dreamweaver 都会显示以下错误：

“行（*行号*）存在语法错误。在您修复此错误之前，代码提示可能无法正常工作。”

无论我建立了什么网站，错误总是将我引导到上面有这段代码的那一行：

```
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>')</script> 
```

它仅在我创建模板时显示代码。然后它在我从该模板创建的每个页面中标记它。

首先，我对 jQuery 不是很好。有人可以告诉我这段代码在说什么吗？其次，有什么方法可以防止错误发生吗？

在此先感谢，凯瑟琳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:23:50.463

这可能是嵌套`<script>`标签。尝试这个：

```
<script>window.jQuery || document.write('<scr'+'ipt src="js/vendor/jquery-1.8.0.min.js"><\/scr'+'ipt>')</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:23:52.963

Dreamwever 太笨了，无法识别嵌套的 SCRIPT 标记。您可能需要将它们分解，以便它看不到它们。

```
<script>window.jQuery || document.write('<sc'+'ript src="js/vendor/jquery-1.8.0.min.js"><\/sc'+'ript>')</script> 
```

# c# - 在 C# 中存储用户特定数据的最佳方法是什么？

> ID：12982628
> 
> 赞同：3
> 
> 时间：2012-10-19T21:20:56.600
> 
> 标签：c#, .net, windows

我希望每个用户（Windows 用户）在我的应用程序中都有自己的设置。最好的方法是什么？

我应该检查用户名还是自动完成？它会与从 XP 到 Windows 8 的所有 Windows 版本兼容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:22:14.920

将 settings.settings 添加到您的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:44:23.947

如果您将设置属性添加到您的项目，那么您可以指定为您的应用程序预定义的 USER 和 APPLICATION 设置。
当应用程序运行时，您更新特定于当前用户的设置，然后保存这些设置调用

```
Properties.Settings.Default.Save(); 
```

此方法将创建一个`user.config`在路径下调用的文件

```
%AppData%\CompanyName\ExeName_Url_hashcode\Version\ 
```

包含当前用户的设置。
当同一用户重新启动您的应用程序时，将重新加载此文件。
您不必做任何进一步的工作。保存的用户设置将在那里使用。

# ruby-on-rails - 在 nokogiri 中将 XML node.text 读取为 HTML

> ID：12982649
> 
> 赞同：1
> 
> 时间：2012-10-19T21:22:53.950
> 
> 标签：ruby-on-rails, xpath, screen-scraping, nokogiri

我正在使用 Nokogiri 为某个 subreddit 解析 Reddit RSS 提要。

如果帖子转到某个域，我正在尝试捕获帖子的外部 URL。

不幸的是，即使用户创建的帖子链接到外部网站，所有 RSS 标题都会转到该 reddit 帖子（评论区）。然而，有一个名为的属性`description`，由 Reddit RSS 提要生成，它包含一个包含两个链接的 HTML 字符串：

[链接][2 条评论]

它始终是 description.text 中倒数第二个锚点

使用 Nokogiri，我可以深入到将整个描述拉入字符串的部分，然后`Nokogiri::HTML`用这个字符串实例化一个新对象。

我想知道两件事：

1.  有没有办法将字符串转换为`Nokogiri::HTML`所以我不需要创建新对象？
2.  如何保存`href`描述中出现的倒数第二个链接的值？

代码：

```
def scrape
  @document = Nokogiri::XML(open(self.url))
  @document.xpath("//item").each do |item|
    description_html = item.xpath('description').text
    url = Nokogiri::HTML(description_html)... #?
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:50:17.613

弄清楚了

```
def scrape
  document = Nokogiri::XML(open(self.url))
  document.xpath('//item').each do |item|
    description_html = item.xpath('description').text
    url = Nokogiri::HTML(description_html).xpath('//a')[-2]['href']
  end
end 
```

# haskell - 我会在 GHCI 中输入什么来测试这段代码

> ID：12982651
> 
> 赞同：0
> 
> 时间：2012-10-19T21:23:06.903
> 
> 标签：haskell

我是haskell的新手，在维基百科上看到了一些代码

```
data Tree a = Tip | Node a (Tree a) (Tree a) deriving (Show,Eq)

height Tip = 0
height (Node _ xl xr) = 1 + max (height xl) (height xr) 
```

来源：[http ://www.csse.monash.edu.au/~lloyd/tildeFP/Haskell/1998/Tree/](http://www.csse.monash.edu.au/~lloyd/tildeFP/Haskell/1998/Tree/)

我想知道一旦我从文件运行代码，我必须输入 GHCI 来测试这段代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T20:49:11.500

您可以尝试以下方法。如果您问题中的代码在文件“Main.hs”中，则执行

```
$ ghci Main.hs
>> height Tip
0
>> height (Node "a" Tip Tip)
1
>> height (Node "a" Tip (Node "b" Tip Tip))
2 
```

＆C。

# java - 在 Java/Android 中使用已知端口在本地网络中查找服务器 IP

> ID：12982653
> 
> 赞同：5
> 
> 时间：2012-10-19T21:23:12.357
> 
> 标签：java, android, ip, port

我想在短时间内找到本地网络上服务器的 IP 地址。我知道应用程序在服务器上使用的端口。

我试过这个，但它太慢了。即使我知道 IP，响应时间也太长（每个 IP 大约 4 秒）。考虑到这种方法，扫描从 10.0.0.0 到 10.0.0.255 的整个子网需要几分钟。

```
 String ip = "10.0.0.45";

        try {
            InetAddress ping = InetAddress.getByName(ip);
            Socket s = new Socket(ping, 32400);
            System.out.println("Server found on IP: " + ping.getCanonicalHostName());
            s.close();
        } catch (IOException e) {
            System.out.println("Nothing");
        }
} 
```

我可以使用线程，但这仍然很慢。我见过应用程序在几毫秒内找到 IP。他们怎么做到的？Java代码将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:41:37.033

您需要做两件事 - 使用线程同时检查许多主机，并为套接字连接提供较低的超时时间。

[这个答案](https://stackoverflow.com/a/11547117/1760335)显示了一个非常相似的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:41:16.227

我可以建议寻找愤怒的ip扫描仪的源代码。我认为这已经足够快了。

[https://github.com/angryziber/ipscan](https://github.com/angryziber/ipscan)

# iphone - UITextView用cornerRadius包装文本？

> ID：12982665
> 
> 赞同：0
> 
> 时间：2012-10-19T21:24:34.263
> 
> 标签：iphone, ios, uitextview, word-wrap

是否可以使 UITextView 将其文本包装在图层的角半径内？如果我有一个角半径为一半宽度的文本视图，它会形成一个圆圈。如果我想在那个圈子里显示文字，我会在圈子外放掉很多文字。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T23:28:31.337

有可能达到预期的效果，但不是使用单个 UITextView，这并不容易。自动换行必须是手动的，将字符串分割成一系列适合圆圈的 UILabel。也许你应该重新考虑设计——阅读一个以圆圈为界的段落真的有意义吗？

# javascript - 在 AngularJS 模板中增加一个变量

> ID：12982667
> 
> 赞同：13
> 
> 时间：2012-10-19T21:24:47.660
> 
> 标签：javascript, angularjs

我会先说我对 AngularJS 很陌生，所以如果我的思维方式偏离基础，请原谅我。我正在使用 AngularJS 编写一个非常简单的单页报告应用程序，肉和土豆当然是使用角度模板系统自己生成报告。我有很多报告要从类似 Jinja 的语法转换过来，而且我很难复制任何类型的计数器或运行制表功能。

前任。

```
{% set count = 1 %}
{% for i in p %}
  {{ count }}
  {% set count = count + 1 %}
{% endfor %} 
```

在我的控制器中，我定义了一个变量`$scope.total = 0;`，然后我可以毫无问题地访问模板内部。我不太清楚的是如何`total`从一个`ng-repeat`元素中增加它。我想这看起来像 -

```
<ul>
    <li ng-repeat="foo in bar">
        {{ foo.baz }} - {{ total = total + foo.baz }}
    </li>
</ul>
<div> {{ total }} </div> 
```

这显然不起作用，也没有类似的东西`{{ total + foo.baz}}`，提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-22T12:28:47.147

如果您想要的只是一个**计数器**（根据您的第一个代码示例），请查看 $index，它包含包含 ngRepeat 中的当前（基于 0）索引。然后只显示总数的数组长度。

```
<ul>
    <li ng-repeat="item in items">
        Item number: {{$index + 1}}
    </li>
</ul>
<div>{{items.length}} Items</div> 
```

如果您想要重复项目**中的特定字段的总和**，例如价格，您可以使用过滤器执行此操作，如下所示。

```
<ul>
    <li ng-repeat="item in items">
        Price: {{item.price}}
    </li>
</ul>
<div>Total Price: {{items | totalPrice}}</div> 
```

和过滤功能：

```
app.filter("totalPrice", function() {
  return function(items) {
    var total = 0, i = 0;
    for (i = 0; i < items.length; i++) total += items[i].price;
    return total;
  }
}); 
```

或者，为了**提高可重用性**，一个通用的*总*过滤函数：

```
 app.filter("total", function() {
    return function(items, field) {
      var total = 0, i = 0;
      for (i = 0; i < items.length; i++) total += items[i][field];
      return total;
    }
  }); 
```

这将被用作：

```
<div>Total price: {{items | total:'price'}}</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-24T20:42:45.363

我需要运行总计而不是简单的总计，所以我添加了@TimStewart 留下的内容。这里的代码：

```
app.filter("runningTotal", function () {
    return function(items, field, index) {
        var total = 0, i = 0;
        for (i = 0; i < index+1; i++) {
            total += items[i][field];
        }
        return total;
    };
}); 
```

要在列中使用它，您只需执行以下操作：

```
<div>Total price: {{items | runningTotal:'price':$index}}</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T23:08:16.480

我不确定我是否完全理解这个问题，但只需要显示您正在迭代的对象中的总数吗？只需设置`$scope.total`为数组的长度（`bar`在上面的示例中）。所以，`$scope.total = $scope.bar.length;`

如果你想要所有`foo.baz`属性的总和，你只需要在你的控制器中计算它。

```
$scope.total = 0;
angular.forEach($scope.bar, function(foo) {
    $scope.total += foo.baz;
}); 
```

# c++ - std::vector::erase() 是否应该破坏被擦除的元素？（而不是最后一个元素）

> ID：12982668
> 
> 赞同：3
> 
> 时间：2012-10-19T21:24:49.080
> 
> 标签：c++, stdvector

**背景**

不久前，我遇到了一些我发现非常奇怪且看似不正确的行为，我向 GCC 提交了一份错误报告。您可以在此处查看报告和回复：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47305](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=47305)

（我将在这里复制大部分内容。）

当时，我不明白答案，但不是 StackOverflow 的成员，也没有人问这个问题，所以我只是破解了一个解决方法并继续。但是最近，我正在重新访问这段代码，但我仍然不明白这不是错误的理由，所以......

**我的问题**

在我的 Mac（当前为 OS X，Darwin 12.2.0 x86_64）附带的 C++ stdlib 发行版中，第 106-116 行的实现`std::vector::erase()`如下`/usr/include/c++/4.2.1/vector.tcc`所示：

```
template<typename _Tp, typename _Alloc>
  typename vector<_Tp, _Alloc>::iterator
  vector<_Tp, _Alloc>::
  erase(iterator __position)
  {
    if (__position + 1 != end())
      std::copy(__position + 1, end(), __position);
    --this->_M_impl._M_finish;
    this->_M_impl.destroy(this->_M_impl._M_finish);
    return __position;
  } 
```

请注意，`destroy()`将在调用 this 之前为向量中*最后一个*`erase()`元素调用，而不是为 指向的元素调用`__position`。我认为这是不正确的——我认为它应该改为`destroy()`调用`__position`. 对于简单的 POD 类型，这没什么大不了的，但对于析构函数有副作用的类（例如智能指针），这可能很关键。

下面的代码说明了这个问题：

```
#include <vector>
#include <iostream>

class MyClass
{
    int m_x;
public:
     MyClass(int x) : m_x(x) { }
    ~MyClass()
    {
        std::cerr << "Destroying with m_x=" << m_x << std::endl;
    }
};

int main(void)
{
    std::vector<MyClass> testvect;
    testvect.reserve(8);
    testvect.push_back(MyClass(1));
    testvect.push_back(MyClass(2));
    testvect.push_back(MyClass(3));
    testvect.push_back(MyClass(4));
    testvect.push_back(MyClass(5));

    std::cerr << "ABOUT TO DELETE #3:" << std::endl;

    testvect.erase(testvect.begin() + 2);

    std::cerr << "DONE WITH DELETE." << std::endl;

    return 0;
} 
```

当我在我的 Mac 上使用 g++ 版本 4.2.1（无命令行参数）编译它时，它会在我运行它时产生以下结果：

```
Destroying with m_x=1
Destroying with m_x=2
Destroying with m_x=3
Destroying with m_x=4
Destroying with m_x=5
ABOUT TO DELETE #3:
Destroying with m_x=5
DONE WITH DELETE.
Destroying with m_x=1
Destroying with m_x=2
Destroying with m_x=4
Destroying with m_x=5 
```

请注意，“ABOUT TO DELETE #3”消息之后的关键行显示析构函数实际上是为我添加的第五件事（的副本）调用的。 *重要的是，#3 的析构函数永远不会被调用！！*

似乎那个版本`erase()`需要一个范围（两个迭代器）也有类似的问题。

***所以我的问题是，我期望从向量中删除的元素的析构函数被调用是错误的吗？*** 看来，如果你不能指望这一点，你就不能安全地在向量中使用智能指针。或者这只是 Apple 分发的 STL 矢量实现中的一个错误？我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:32:11.590

当您`erase`包含**3**的元素时，必须将以下元素移回以填充空白。然后元素**#3**被分配**#4**所具有的，**#4**被分配**#5**所具有的。最后一个元素**#5**保留了它所具有的任何值，因为它无论如何都将被删除。

当`vector`超出范围时，您会看到剩余的 4 个元素被销毁。

如果您要在 中保存*智能指针*，`vector`则在调用赋值运算符时将正确释放资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T21:32:24.577

实际上，没有问题。在行

```
std::copy(__position + 1, end(), __position); 
```

被删除的元素被连续的元素覆盖；如果它拥有需要释放的资源，它会在其`operator=`.

在 C++11 中，您可能希望使用移动而不是复制；但你发布的是一个好的 C++03 实现`std::vector::erase`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T21:33:45.467

析构函数只被最后一个元素调用，但是被擦除的对象会被下一个元素的赋值覆盖。所以赋值运算符释放了旧的资源。当类型是智能指针时，这意味着调整引用，并在适当的情况下删除受控对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T21:49:58.190

这是一个合理的观点，您至少可以考虑两种不同的实施方式`erase`：

*   销毁元素 3，然后从 4 复制构造元素 3，然后从 5 复制构造元素 3，然后销毁 5。
*   从 4 复制分配到 3，然后从 5 复制到 4，然后销毁 5。

C++11 引入了第三种方法：

*   move-assign 从 4 到 3，然后从 5 到 4，然后销毁 5。

事实上，`vector::erase`第一种方式在 23.2.4.3/4 中被 C++03 标准禁止：

> 复杂度：T的析构函数被称为等于被擦除元素个数的次数，而T的赋值运算符被称为等于被擦除元素之后向量中元素个数的次数。

尽管此文本主要旨在说明操作的运行时复杂性，但您会看到它要求第二个实现。C++11 用“移动赋值”代替“赋值”说了同样的话。

第一种方法还有一个更根本的问题，一般来说（虽然不是为了`int`，因此也不是为了`MyClass`），复制可能会失败。如果`erase`破坏了向量的第三个元素，然后从第四个元素复制失败，那么向量将处于相当危险的状态——第三个元素不再是一个合适的对象。因此，标准中的限制不仅仅是定义运行时，它还可以防止这种糟糕的失败情况。

# objective-c - git、国际化和 iOS 字符串文件

> ID：12982673
> 
> 赞同：2
> 
> 时间：2012-10-19T21:25:36.510
> 
> 标签：objective-c, ios, git, localization, internationalization

想知道这里的人们是否可以与国际化和 git 分享他们的过程。我正在与一个国际化团队合作，该团队每次发送 .strings 文件时都需要差异。以下是我在流程方面的想法：

1.  在代码库上运行 genstrings 以提取所有 NSLocalizedStrings。这将生成一个 .strings 文件。
2.  将此 .strings 文件与同一文件的先前版本进行比较。上一次修订映射到我们上次将 .strings 文件发送给我们的国际化团队的时间。因此，差异应该包含自我们上次发送 .strings 文件以来项目中的所有字符串更改。
3.  现在我有一个差异文件。使用脚本更改此差异文件以仅包含添加和修改。此脚本的输出将生成一个 .strings 文件。这是我们国际化团队想要的 .strings 文件。
4.  国际化过程完成后，我留下了这个 .strings 文件的 n 个实例（每种语言一个）。我现在需要将这些 .strings 文件中的每一个都集成回项目中。
5.  对于应用程序支持的每种语言，获取密钥并在原始 .strings 文件中搜索相同的密钥。如果密钥存在于原始 .strings 文件中，请将原始 .strings 文件中的值替换为 diff'ed 文件中的值。如果原始 .strings 文件中不存在该键，请将新的键/值对添加到原始 .strings 文件的末尾。

上面的数字三和五需要一些脚本，这引出了我的问题。

对于第三个问题，'git diff' 是否可配置以生成仅包含添加或修改的 .diff 文件？有谁知道只包含添加或修改的命令是什么样的？如果 'git diff' 不够灵活，无法产生我需要的输出，那么是否有人知道一些脚本会产生所需的输出。

对于第五个问题，是否有人知道一些已经解决这个问题的脚本？

如果有人可以建议一种更好的方法来处理 iOS 应用程序的国际化过程，我会全力以赴。

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:48:41.203

如果您上传包含英文字符串文件的原始存储库，那么任何进行本地化的人都可以分叉项目，调整字符串，提交到他们的分叉并打开拉取请求。您提取他们的更改并与您的原始文件合并。Git/GitHub 为您完成了所有这些令人讨厌的合并。

如果字符串来自 XIB，那么您可以再次使用 GENStrings 将您的 repo 中的新合并字符串文件与您的 XIB 集成。

来自 Applingua（使用 Git 的应用程序本地化机构！）的 Rob

# javascript - 动态加载 Javascript 和维护对象

> ID：12982677
> 
> 赞同：0
> 
> 时间：2012-10-19T21:25:52.313
> 
> 标签：javascript, jquery, memory-leaks

我正在构建一个基于 ajax 的网站，其中几乎每个页面都有自己的 Javascript 文件，该文件与 html 一起加载。

如果我以正确的方式做事，我有几个问题，所以让我们开始吧:)

首先，我执行加载脚本的方式。我所有的代码都封装在一个函数中，所以假设我已经加载了`register`页面，我要做的是：

```
page_class = "register"; //this will change when new page is loaded
new window[page_class]; 
```

所以这按我希望的方式工作，但我担心一件事，当用户从另一页返回`register`一次并且将再次创建新对象时，它会造成内存泄漏或其他一些不好的事情？如果是这样，我可以对`rerun`我的整个脚本做些什么？

我的下一个问题相当简单，我`jquery`使用附加事件`on`，当我切换页面时，我循环遍历**所有**将被删除的元素并分离每个元素，这足以防止内存泄漏吗？如果不是，我可以改进什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:24:29.800

因此，考虑到我们从评论中得出的结论，这是我的 2 美分：

我建议让您的网站分段 ajaxed。我的意思是将所有音乐区域作为一个小节，视频在另一个小节中，等等。因此，在每个部分中，您都可以进行 ajax 处理，当过渡到另一个部分时，您会优雅地淡出并自然地加载下一个部分。

`.detach()`在我看来，这不足以确保正确的内存处理，因为 detach 保持引用的已删除部分。当您想召回它时很有用，但如果用户只是单击一个区域并退出永远不会返回则无用。现在您有了对存储在内存中的整个部分的引用。

如何处理每个部分的内存？您可以维护部分对象。一个例子：

```
var music = {
    loaded: 0,
    current_track: null,
    init: function(){
        if(this.loaded == 0)
        {
            $.ajax... get your music section html and write it to the #music element
            this.loaded = 1;
        }
    },
    selectTrack: function(id)
    {
        // just an example
    }
}; 
```

同时保持一个恒定的站点对象：

```
var site = {
    init: function(){
        // call selected page, etc
    },
    move: function(page){
        if(page == 'music')
        {
            music.init();
            $('#content').animate(...);
        }
    }
};

$(document).ready(function(){
    site.init();
}); 
```

在页面加载时初始化站点 obj 的位置以及调用 move 函数时，它会调用相应对象的 init 方法，如果页面已经加载，则该方法不执行任何操作。这个例子显然取决于有一个#music 元素以及一个名为#content 的容器元素。这部分可能完全无关紧要，具体取决于您处理转换的方式。所有你的电话，但总体思路是一样的。您始终可以将 display 设置为 none 以避免复杂标记的呈现瓶颈。

您至少简短地提到了该项目预计将非常大。不要太悲观，但“大”是事后定义的，不在计划中。除非你有数百万美元可以用来做这件事。我不是要劝阻你。无论如何，让您的网站如您所愿。但是考虑到在需求调用时扩大规模是一种比在任何人都知道之前全速前进要明智得多的方法。我之所以这么说，是因为我曾为那些投入了数百万美元的客户工作，他们声称这将是下一个 youtube，而 6 个月后他们就消失了。在他们专注于稳定性和安全性的地方，他们在设计和营销方面失败了。这 - 几乎只有这一点 - 就是为什么我建议只制作部分 ajaxed。它保持分隔，焦点很容易跟踪，您只需要担心那一件。当您获得 10,000 个用户时，请考虑使用完整的 ajax。当您到达那里时，您可能也知道为什么考虑 ipad 和平板电脑而不是花哨的 ajax 网站可能是一个更好的举措。您酷炫的过渡和渐变将成为移动设备上的一条受伤的狗。考虑到事情的发展方向，那是你想要的吗？

同样，这只是我的意见。我不知道您的网站或技能，甚至您是否已经考虑过我提到的所有内容。如果您有任何具体问题，我可以尝试回答或更新此帖子。祝你好运。

关于提到的js选项：

标准 jquery 可能就足够了，除非你有时间完全理解[bootstrap之类的东西](http://twitter.github.com/bootstrap/javascript.html)

Node.js 很棒，但您需要确保您的服务器可以部署它。例如，Dreamhost 不支持它。至少他们没有持续我检查。他们是一个体面的、普通的主人的一个很好的例子。我想，Media Temple 也一样。如果我错了，请纠正我。

# ms-access - 编译错误：语法错误 - SQL INSERT INTO 语句上的 MS ACCESS 2007

> ID：12982679
> 
> 赞同：2
> 
> 时间：2012-10-19T21:26:04.500
> 
> 标签：ms-access, syntax

我正在尝试创建以下 SQL INSERT INTO 语句，但出现语法错误。有什么建议么？：

```
SQL = "
INSERT INTO AptRent 
    (BuildingID,
     RentAmountID, 
     InitialRentDueDate, 
     TenantID, 
     AptNoID, 
     MoveInDate, 
     MoveOutDate,  
     DateAdded, 
     SecurityAmount, 
     SecurityPaid, 
     NoDaysLate, 
     LateAmount) 
    VALUES
    (" & Me.cbSelectBuildingForRental & "," 
       & Me.cbCreateRentalRentAmount & "," 
       & Me.tbCreateRentalRDD & "," 
       & Me.cbSelectTenantForRental & ", '" 
       & Me.cbSelectAptNoforRental & "' ," 
       & Me.tbCreateRentalMID & "," 
       & Me.tbCreateRentalMOD & "," 
       & Now() & "," 
       & Me.tbSecurityAmnt & "," 
       & Me.ckSecurityPd & "," 
       & Me.tbNoDaysLate & "," 
       & Me.tbLatePmnt & ")" 
```

表**AptRent**具有以下数据类型：

*BuildingRentID*：自动编号

*BuildingID*：编号（**Me.cbSelectBuildingForRental**）

*RentAmountID* : 数字 ( **Me.cbCreateRentalRentAmount** )

*InitialRentDueDate*：日期/时间（**Me.tbCreateRentalRDD**）

***租户ID**：编号 ( *Me.cbSelectTenantForRental* )*

 **AptNoID*：文本（**Me.cbSelectAptNoforRental**）

*MoveInDate*：日期/时间（**Me.tbCreateRentalMID**）

*MoveOutDate*：日期/时间（**Me.tbCreateRentalMOD**）

*添加*日期：日期/时间（**现在（）**）

*SecurityAmount* : 货币 ( **Me.tbSecurityAmnt** )

*SecurityPaid*：是/否（**Me.ckSecurityPd**）

*NoDaysLate* : 数字 ( **Me.tbNoDaysLate** )

*LateAmount：*货币（**Me.tbLatePmnt**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:38:45.727

假设它们是 ISO 格式 (YYYY-MM-DD HH:NN:SS)，您需要在日期/时间值周围添加单引号。

```
...
& "'" & Me.tbCreateRentalMID & "', " 
... 
```

依此类推，适用于所有日期/时间列。*

# asp.net-mvc - 放弃 DDD，但需要它的一些好处

> ID：12982680
> 
> 赞同：18
> 
> 时间：2012-10-19T21:26:08.247
> 
> 标签：asp.net-mvc, entity-framework, domain-driven-design, poco

我正在放弃传统的 DDD，这通常会浪费大量时间，并迫使我进行无休止的映射：`data layer <--> domain layer <--> presentation layer`.

即使是很小的更改，我也必须更改数据模型、域模型、表示模型/视图模型，然后是存储库、管理器/服务类，当然还有 AutoMapper 映射，然后测试整个事情！每个调用都需要调用一个层，该层调用一个调用底层代码的层。*除了“你将来可能需要它”之外，我没有得到任何回报*。嗯。

**我目前的做法**更务实：

*   我不再担心“数据层”和“域层”之间的区别，因为没有意义——这些术语是可以互换的。我让 EF 做这件事，并在需要时在顶部添加接口和存储库。
*   我已经合并了我的“数据”和“域”项目（合并为“核心”，无聊的名字，我知道），我几乎可以发誓 Visual Studio 实际上运行得更快。
*   我允许 EF 实体在堆栈中上下移动，但是，我仍然像往常一样将它们映射到表示模型/视图模型。
*   对于简单的操作，我直接从控制器调用存储库，对于复杂的操作，我照常使用域管理器/服务；存储库从不公开 IQueryable。
*   我将实体/POCO 定义为部分类，因此我可以在相应的部分类中单独添加域行为。

**问题：**我现在到处都在使用实体，所以客户端代码可以看到它们的*导航属性*。并且模型总是在离开存储库后被具体化，因此这些导航属性通常为空。

**可能的解决方案：**
1\. 忍受它。这很丑陋，但比上面解释的问题更可取。
2.为每个实体定义一个隐藏导航属性的界面；并使客户端代码使用接口。但具有讽刺意味的是，这意味着另一层（尽管薄且易于管理）。
3\. 还有什么？

我不习惯这种快速而松散的编程风格，所以也许我错过了一些明显的技巧。还有什么我应该考虑的吗？我相信我很快就会遇到其他问题。

**编辑：** 这个问题与 DDD 无关。请注意，许多人都在与传统的 DDD 方法作斗争[——Seemann 似乎](https://stackoverflow.com/a/1961139/1711500)得出[了相同的结论](http://blog.ploeh.dk/2012/02/09/IsLayeringWorthTheMapping.aspx)，[Rahien 谈到了“为了抽象反模式而进行无用的抽象”](http://ayende.com/blog/4788/the-wages-of-sin-proper-and-improper-usage-of-abstracting-an-or-m#feedback)，而 Evans 自己说 DDD 仅在 5% 的应用中真正有用案例。另[请参阅此线程](https://stackoverflow.com/a/796961/1711500). 一些评论/答案可以预见地是关于我如何做 DDD 错误，或者我如何调整我的系统以使其正确。但是，我不是在询问 DDD 或在适合的情况下抨击它，而是我想知道其他人在做什么符合我上面描述的想法。并不是说 DDD 是所有设计弊病的灵丹妙药，每十年都会出现一个新流程（RUP 有人吗？XP、敏捷、Booch 等等……）。DDD 只是最闪亮的新版本，也是最知名和最常用的。但是实用主义应该是第一位的，因为我正在尝试构建可按时发货且易于维护的可销售产品。*到目前为止*，我学到的最有用的编程公理是 YAGNI。*我想要的是将我的系统更改为一种“DDD-lite”，在那里我得到了强大的设计/OOP/模式理念，但没有脂肪。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T23:48:22.483

DDD 的典型持久化方法是将域模型*直接*映射到相应的表。**从技术上讲，映射仍然存在（并且通常在代码中声明），但正如lazyberezovsky**所指出的那样，没有明确的数据模型。

导航属性的问题可以通过几种不同的方式解决，无论您是否使用 DDD。我不喜欢方法 1，因为它使你的代码更难推理——你永远不知道哪些属性会被设置，哪些不会。方法 2 在理论上要好得多，因为它非常*明确地*说明了给定查询的要求，并且一般来说，使事情明确是一种很好的做法。一种类似但更简单且不那么脆弱的方法是使用[read-models](http://gorodinski.com/blog/2012/04/25/read-models-as-a-tactical-pattern-in-domain-driven-design-ddd/)，它们只是旨在满足给定查询集查询要求的对象。在 DDD 的上下文中，它们允许您将行为丰富的实体与查询分离，这常常是不一致的。[现在是DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的支持者可能会尖叫异端并用火炬和干草叉向您袭来，但实际上维护读取模型和实体通常要容易得多，然后尝试通过接口或复杂的映射策略强制实体满足查询要求。此外，读取模型和行为模型的职责有很大不同，因此 DRY 不适用。

这并不是说 DDD 适用于您的场景。避免完全成熟的 DDD 通常是一个明智的决定，尤其是在主要是[CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)的场景中。谨慎是正确的，[KISS 和 YAGNI](http://www.codinghorror.com/blog/2004/10/kiss-and-yagni.html)的一个很好的例子。*当您的领域包含复杂的行为*而不仅仅是数据时，DDD 就会受益。无论如何，读取模型模式适用。

**更新**

对于不使用读取模型的实现，请查看[获取策略设计](http://www.udidahan.com/2007/04/23/fetching-strategy-design/)，其中获取策略的概念允许从数据库中准确指定所需的内容，从而减轻导航属性的问题。链接帖子中引用的材料也很有趣。总的来说，这试图避免其他方法中存在的间接层。但是，在我看来，使用建议的获取策略比使用读取模型更复杂，而最终结果是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T22:14:03.223

关于这一点的一些想法：

> ...存储库从不公开 IQueryable ...模型总是在离开存储库后实现...

您的问题被标记为“asp.net-mvc”，因此您有一个 Web 应用程序。90% 或更多的请求将是 GET 请求，它们应该从数据库中获取一些数据并在 Web 视图中显示这些数据。这些需要的数据多久是真正的*实体*，而不仅仅是属性包（实体类型的属性的选择，或者可能由来自多个实体的属性组成）？

假设您的应用程序有 100 个视图。其中只有少数会显示完整的实体：

*   其中 50 个是显示所选数据的列表视图（客户有 ID 和地址，但没有客户的联系人、电话号码和销量）
*   其中 20 个包含用于选择参考的自动填充文本框（订单的客户，但自动填充列表中只显示客户的姓名和城市，而不是其余的地址或联系人、电话号码和销量，只有显示前 5 个匹配项）
*   1 是客户的编辑视图，显示所有内容，但不显示销量
*   图 1 是客户最近五个订单的详细信息视图
*   1 是订单的详细信息视图，包括订单项目，包括每个项目的产品，但没有产品的供应商名称
*   1 是相同的视图，但专门针对希望查看每个项目和项目产品的供应商以及过去三个月平均供应商提前期的采购部门。
*   图 1 是服务部门的视图，显示仅包含产品类别“维修服务”的订单项的订单
*   人力资源部门的 1 个视图显示员工包括存储为大块的照片
*   人事计划部门的 1 个视图显示了没有照片的员工的简短版本
*   等等等等

作为一名 UI 程序员，我将有各种数据要求来使用上面的示例呈现视图：

*   我只需要选择的属性
*   对于不同的视图，我什至需要对同一实体的属性进行不同的选择
*   我需要一份包含所有商品但不提及产品的订单
*   我需要一个包含所有项目（但不是项目的所有属性）并包括对产品和供应商的引用（但不是所有供应商的属性）的订单
*   我需要一个仅包含经过筛选的订单项目列表的订单
*   我需要一个客户，包括最后五个订单，而不是他曾经拥有的所有 3000 个订单
*   我需要一名员工，但请不要使用大斑点图像
*   等等等等

作为数据访问/存储库/服务开发人员，如何满足这些要求？

*   我只提供了一些方法并实现实体：加载订单标题，加载订单标题与项目，加载订单标题与项目和产品，加载订单标题与项目和产品和供应商，加载客户标题（扔掉 20 个属性中的 15 个） ，亲爱的 UI 开发人员，如果您只需要五个属性），加载所有 3000 个订单的客户标题（扔掉 2995，亲爱的 UI 开发人员，如果您只需要五个属性）等等等等。我从不隐藏的存储库中返回接口加载的导航属性。
*   我关心 UI 需要的每一个细节：我创建存储库/服务方法，如`GetFiveCustomerPropertiesForAutoComplete`、`GetCustomerWithLastFiveOrders`等。我从存储库返回接口，这些接口隐藏了我尚未加载的属性（也是标量）。或者我返回包含请求属性的“DTO”。当 UI 开发人员调用下一个视图的数据需求时，我每天都会更改存储库/服务并创建新的 DTO。
*   我`IQueryable<TEntity>`从存储库返回并告诉 UI 开发人员“自己创建 LINQ 查询以获取视图所需的数据”。（第二天早上，DBA 抱怨数百次执行糟糕的数据库查询。）
*   我从存储库/服务返回 "prepared" `IQueryable<TEntity>`s，这些存储库/服务涵盖 - 例如 - 安全问题，例如`Where`为用户的访问权限应用子句或`Where`为搜索词附加子句或将`NoTracking`选项应用于查询。我告诉 UI 开发人员：“您可以使用 a) 投影 ( `Select`)、b) 分页 (`Take`和`Skip`) 以及可能 c) 排序 (`OrderBy`) 因为我认为这三个查询部分是 UI 问题。所有其他查询要求（过滤、加入、分组等）必须在存储库/服务层中实现，并且在 UI 层中被禁止。”这里最重要的部分是通过 LINQ/SQL 查询直接实现 ViewModel 的投影没有中间映射层，也没有加载超过所需列/属性的开销。

这些只是一些想法。每种方法都有其优点和缺点。在至少有一个或几个开发人员了解存储库/服务和 UI/“投影”层中发生的情况的小型团队中工作，根据我的经验，最后一个选项对我来说很好，尽管它并不总是适用描述的严格规则（例如，按产品类别过滤订单中包含的订单项目需要`Where`在投影内部应用子句，即在 UI 层中）。对于 POST 请求和数据修改，我将使用 DTO 将从视图收集的数据发送回要在该处处理的服务。

为了更严格地分离“查询层”和 UI 层，我可能更喜欢接近第二个选项的东西，也许不是每个 UI 需求都有一个接口/DTO，而是以某种方式简化为一组 DTO 来满足最常见的需求（使用有时不必要地加载属性的一点开销的价格）。但是，由于需要更多的存储库/服务方法、（可能很多）DTO 的额外维护以及 DTO 和 ViewModel 之间的中间映射，我希望这比最后一个选项工作更多。

就我个人而言，当我 90% 的时间都不需要它们时，我关心实现完整的实体，尤其是复杂的对象图。但是我的担忧并没有通过广泛的性能测量得到验证，证明这种方法对于没有特殊高性能需求的“正常”应用程序*确实是一个问题。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T21:23:40.120

当我们不知道您正在构建什么时，谁能给您合理的建议？在宏伟的计划中，您可能正在构建错误的解决方案（不是说您是）。所以要意识到我们所能涉及的只是技术设计问题和类似的过去经历。

确实，很多人都面临您的问题。映射是静态类型领域的松耦合税。也许更动态的语言可以解决你的一些痛苦。或者，您可能会发现更多自动化的优点（DSL、MDA）。您也可以改为切换到客户端服务器。

接口不是层，而是抽象。明智地使用它们。

就个人而言，我永远不会走这些捷径。被咬太多次试图跳过步骤。逻辑开始在奇怪的地方出现。如果我有一个数据驱动的应用程序来开发简单的数据集，我也会想到 EF。但我不称对象为 DDD 意义上的聚合或实体，而只是 ERD 意义上的实体。Transactionscript 可能比使用部分方法更合适。至于读取模型对象，这些不是间接层。

总的来说，我有这样的感觉，就是这样，你把事情弄得一团糟，因为你通过依赖不显示所需形状的对象（导航属性为空）来对抗映射摩擦，从而在不同的领域引起问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T12:17:36.050

> 问题：我现在到处使用实体，所以客户端代码可以看到它们的导航属性。

我不太明白为什么这是一个问题，以及它与 EF 实体的关系如何。您所说的*客户端代码*是指表示层代码还是使用您的实体的任何代码？

对于 UI 代码，一个简单的解决方案是定义不公开这些导航属性的 ViewModel（或者根据您的 GUI 需要的对象图深度只公开其中的几个）。

对于其他代码，能够看到实体的导航属性是很正常的。他们公开是有原因的。如果你滥用它们，你最终可能会违反 Demeter 法则，但不要落入这个陷阱是开发人员纪律的问题。

一个实体包含它自己的合约——所有可以访问该实体的代码都应该能够使用该合约的任何部分。如果您觉得您的实体暴露太多并且您需要在它们之上放置接口以限制对某些部分的访问，那么它可能只是一个不同的实体。

> *   我不再担心“数据层”和“域层”之间的区别，因为没有意义——这些术语是
>     可以互换的。我让 EF 做这件事，并
>     在需要时在顶部添加接口和存储库。
> *   我已经合并了我的“数据”和“域”项目（合并为“核心”，无聊的名字，我知道），我几乎可以发誓 Visual Studio
>     实际上运行得更快。
> *   我允许 EF 实体在堆栈中上下移动，但是，我仍然像往常一样将它们映射到表示模型/视图模型。
> *   对于简单的操作，我直接从控制器调用存储库，对于复杂的操作，我照常使用域管理器/服务；存储库从不公开 IQueryable。
> *   我将实体/POCO 定义为部分类，因此我可以在相应的部分类中单独添加域行为。

**除了**数据/域分离之外，这些东西对我来说似乎都不是从根本上反 DDD 的。

特别是如果您执行数据库优先 EF -DDD 显然是一种以域为中心的方法，并且您不应该在定义实体之前定义表。也不清楚您的某些域实体是否直接与数据库或 EF 对话（不是 DDD - 更一般地说，分层架构 - 兼容）或者您系统地在两者之间有数据访问对象（DDD 兼容）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-20T21:31:21.917

我会尽量简短——我们采用了方法 2——即，添加您在客户端上使用的接口层。您可以让 EF 为您生成它们，只需稍微调整一下 .tt 模板。

是的，它（还）创建了另一个层，但它是无逻辑的并且不会增加复杂性。当然，如果您的客户端需要反序列化实体，您必须添加（还）另一个层来处理反序列化并引用实体定义和他将返回给客户端的接口。但它也很薄，所以我们学会了忍受它，因为它工作得很好，而且客户端真的很干净......

# javascript - 自动完成下拉菜单 - 点击/输入键提交

> ID：12982681
> 
> 赞同：3
> 
> 时间：2012-10-19T21:26:09.417
> 
> 标签：javascript, jquery-ui-autocomplete, html-input

在某个地方，我找到了一个非常适合我的自动完成脚本，但有一件事我不知道如何更改。当您单击下拉列表中的某些内容时，它不会提交此字符串，您必须单击以选择字符串，然后单击提交按钮或按 Enter。我希望这个下拉自动完成在单击或按 Enter 时提交选定的字符串。这是代码：

```
 <link rel="stylesheet" href="ac.css" />    
        <script src="./java/jquery182.js"></script>    
        <script src="./java/jqueryui.js"></script>    
        <script>    
        $(function() {        
        var availableTags = [            
        "Car",   
        "Gun",
        "Apple",
        "Example"]; 

         $( "#txt" ).autocomplete({            
         source: availableTags        
         }); 
         });   
         </script>

        <script type="text/javascript"> 
        <!-- 
        function enter(e){ 
        if(e.keyCode == 13) 
        { 
        doSomething(); 
        return false; 
        } 
        } 
        //--> 
        </script> 

<input class="ui-widget" id="txt" type="text" onkeypress="return enter(event);">
<button type="button" id="btn" onclick="doSomething()">Submit</button> 
```

功能`doSomething();`必须在那里，因为我需要它。这个函数：`onkeypress="return enter(event);"`在这里，当按下回车时，值被提交给`doSomething();`函数。有 2 个 Javascript 文档（jquery182.js 和 jqueryui,js）有大约 10,000 行代码，所以我不得不在这里上传它们：http://speedy.sh/a67xR/java-files.zip[希望](http://speedy.sh/a67xR/java-files.zip)有人可以帮助我这。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:01:02.760

您必须在调用中配置 onclick/select 行为`autocomplete`，试试这个：

```
$( "#txt" ).autocomplete({            
    source: availableTags,
    select: function(event, ui) {
        $(event.target).val(ui.item.value);
        doSomething();
        return false;
    }
}); 
```

# xml - oracle plsql：如何解析 XML 并插入到表中

> ID：12982687
> 
> 赞同：25
> 
> 时间：2012-10-19T21:26:42.330
> 
> 标签：xml, oracle, plsql, insert, xml-parsing

如何将嵌套的 xml 文件加载到数据库表中？

```
<?xml version="1.0" ?> 
<person>
   <row>
       <name>Tom</name>
       <Address>
           <State>California</State>
           <City>Los angeles</City>
       </Address>
   </row>
   <row>
       <name>Jim</name>
       <Address>
           <State>California</State>
           <City>Los angeles</City>
       </Address>
   </row>
</person> 
```

在这个 xml 中， person 是表名，name 是文件名，Tom 是它的文件值。地址是一个子表，州和城市是地址内的两列。我想将人员行插入人员表，如果失败，请不要插入地址表。这个 xml 可能非常大。这样做的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-22T03:24:46.150

您可以将 XML 文档加载到 XMLType 中，然后对其进行查询，例如：

```
DECLARE
  x XMLType := XMLType(
    '<?xml version="1.0" ?> 
<person>
   <row>
       <name>Tom</name>
       <Address>
           <State>California</State>
           <City>Los angeles</City>
       </Address>
   </row>
   <row>
       <name>Jim</name>
       <Address>
           <State>California</State>
           <City>Los angeles</City>
       </Address>
   </row>
</person>');
BEGIN
  FOR r IN (
    SELECT ExtractValue(Value(p),'/row/name/text()') as name
          ,ExtractValue(Value(p),'/row/Address/State/text()') as state
          ,ExtractValue(Value(p),'/row/Address/City/text()') as city
    FROM   TABLE(XMLSequence(Extract(x,'/person/row'))) p
    ) LOOP
    -- do whatever you want with r.name, r.state, r.city
  END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-23T13:53:04.437

```
select *  
FROM XMLTABLE('/person/row'  
         PASSING   
            xmltype('
                <person>
                   <row>
                       <name>Tom</name>
                       <Address>
                           <State>California</State>
                           <City>Los angeles</City>
                       </Address>
                   </row>
                   <row>
                       <name>Jim</name>
                       <Address>
                           <State>California</State>
                           <City>Los angeles</City>
                       </Address>
                   </row>
                </person>
            ')
         COLUMNS  
            --describe columns and path to them:  
            name  varchar2(20)    PATH './name',  
            state varchar2(20)    PATH './Address/State',  
            city  varchar2(20)    PATH './Address/City'
     ) xmlt  
; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-08-07T12:38:59.577

```
CREATE OR REPLACE PROCEDURE ADDEMP
    (xml IN CLOB)
AS
BEGIN
    INSERT INTO EMPLOYEE (EMPID,EMPNAME,EMPDETAIL,CREATEDBY,CREATED)
    SELECT 
        ExtractValue(column_value,'/ROOT/EMPID') AS EMPID
       ,ExtractValue(column_value,'/ROOT/EMPNAME') AS EMPNAME
       ,ExtractValue(column_value,'/ROOT/EMPDETAIL') AS EMPDETAIL
       ,ExtractValue(column_value,'/ROOT/CREATEDBY') AS CREATEDBY
       ,ExtractValue(column_value,'/ROOT/CREATEDDATE') AS CREATEDDATE
    FROM   TABLE(XMLSequence( XMLType(xml))) XMLDUMMAY;

    COMMIT;
END; 
```

# c - OpenGL矩阵问题

> ID：12982691
> 
> 赞同：0
> 
> 时间：2012-10-19T21:26:58.013
> 
> 标签：c, cocoa, opengl, viewport, projection-matrix

我有一个 NSOpenGLView 设置并且工作得很好，但是我需要绘制一个*总是*完全填充视图并且没有被剪裁的矩形（这有意义吗？）。我有一个始终为 1100x850 像素大小的视图。基本上，我想要做的是找到一种方法来确保 0.4 的 y 值始终将对象绘制在视图的最顶部，在底部绘制 -0.4 等。我也需要它有一些透视感，所以我做不到`glOrtho`

有没有办法做到这一点？

如果我没有很好地解释它，这就是我的意思：

```
---------
|   |   |
|   |   |
--------- 
```

*   该中心线的 x 值始终为 0.0。

*   左行的 x 值为 -0.55，右行的 x 值为 0.55

*   顶线的y值为0.4，底线的值为-0.4

所以，我需要一个具有以下顶点的矩形来完全填充但不离开屏幕：

```
{
  -0.55,  0.40, 0.00,
   0.55,  0.40, 0.00,
   0.55, -0.40, 0.00,
  -0.55, -0.40, 0.00,
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:40:43.267

不要求您绘制的所有内容都使用相同的投影矩阵。使用透视矩阵绘制场景的“透视”部分，然后切换到正交矩阵并绘制四边形。

确保禁用第二部分的深度测试，因为与透视值相比，正交值没有任何意义。

# java - 比较字节数组

> ID：12982698
> 
> 赞同：2
> 
> 时间：2012-10-19T21:27:37.557
> 
> 标签：java, compare, bytearray

我有两个字节数组（在 Java 中）代表两个（可能是负数）数字。

我如何比较它们（即找出哪个更小/更大）？

目前，我只是通过将它们复活成两个java`int`然后进行比较来比较它们。但是，如果一个字节数组表示一个负数而另一个表示正数，那会给出错误的结果。不可能判断最左边的位是符号还是只是数字的一部分，对吧？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:59:22.920

为什么要重新发明轮子？使用字节缓冲区：

```
int a = ByteBuffer.wrap(byteArrayA).getInt();
int b = ByteBuffer.wrap(byteArrayB).getInt();
System.out.println(a == b); 
```

# sql-server - 带有 XML 目标列的包的性能缓慢

> ID：12982702
> 
> 赞同：4
> 
> 时间：2012-10-19T21:28:04.703
> 
> 标签：sql-server, ssis

在过去的几个月里，我已经完成了几个 SSIS 包，将数据从旧数据库移动到 SQL Server 数据库。根据转换的不同，处理大约 500 万条记录通常需要 10-20 分钟。

我在使用其中一个包时遇到的问题是性能非常差，因为我的目标中的一列是 SQL Server XML 数据类型。

```
 Data comes in like this: 5
 A script creates a Unicode string like this: <XmlData><Value>5</Value></XmlData>
 Destination is simply a column with XML data type 
```

这真的很慢。有什么建议吗？我做了一个 SQL Trace 并注意到在幕后 SSIS 在插入之前对每一行执行一个转换：

```
 declare @p as xml
 set @p=convert(xml,N'<XmlData><Value>5</Value></XmlData>') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:48:36.190

尝试使用临时表来存储不经过 XML 转换的 500 万条记录，然后使用 SQL Server 本身将它们从 tempDB 移动到最终目的地：

```
INSERT INTO final_destination (...)
SELECT cast(N'<XmlData><Value>5</Value></XmlData>' AS XML) AS batch_converted_xml, col1, col2, colX 
FROM   #tempTable 
```

如果 5.000.000 变成单个批次的太多数据，您可以分小批进行（100k 行应该像魅力一样工作）。

分析器捕获的记录看起来像是每行一个命令的 OleDB 转换。

# php - Ajax 加载 - 表单提交

> ID：12982704
> 
> 赞同：2
> 
> 时间：2012-10-19T21:28:06.810
> 
> 标签：php, jquery, ajax

我有一个正在构建的网站，它的设置是当点击左侧的链接时，页面内容会加载到右侧的 div 中。

```
<div id="right-column">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script type="text/javascript">
    var dataReturn='';

    function makeRequest(url){
        $('#preloader').show();
        $.get(url, function(data) {
            $('#resultDiv').html(data);
            $('#preloader').hide();
        });
    }

    function makePostRequest(url, params){
        $('#preloader').show();
        $.post(url,params, function(data){
            $('#resultDiv').html(data);
            $('#preloader').hide();
        });
    }

    </script>
</head>
<body>
    <div id="preloader"></div>
<div id="resultDiv">    
<h3>Welcome <?php echo $user_identity;?></h3>
<h5>Message: <?php echo $wpdb->get_var("SELECT message FROM staff_misc");?></h5>    
</div>

</div> 
```

现在这对于加载他们应该加载的内容的链接来说很好......现在我的问题是。其中一个页面有一个带有以下代码的表单：

```
<h3>Admin Message</h3>

<form id="message" method="post" action="Admin/message.php">
<input type="text" style="width:700px;" value="Set A New Message" name="admin-message"/>
<input class="submit" type="submit" name="submit" value="Submit">
</form>

<?php

if ( isset ( $_POST['submit'] ) ) //If submit is hit
{

$message = $_POST["admin-message"];
$wpdb->query("UPDATE staff_misc set Message = '$message' where id = '1'");

?><b>New Message Set:</b> <?php echo $wpdb->get_var("SELECT message FROM staff_misc");?><?php

} 
```

如果提交了该表单，它会刷新整个页面，而不是将内容重新加载回 AJAX div。我该如何做才能使页面重新加载到 AJAX div 中，而不是刷新整个页面并丢失带有链接的左列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:31:43.827

您可以捕获表单上的提交事件，取消默认操作，并将其重定向到您自己的表单处理程序，然后通过 AJAX 提交......或者您可以将提交按钮更改为调用表单处理程序的常规按钮，然后通过 AJAX 提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:31:55.233

您应该有该表单的提交处理程序，并确保在函数结束时返回 false，以停止表单的默认操作。

```
$('#message').on('submit', function() {
    $.post('Admin/message.php', $('#message').serialize(), function( html ){
       // do something with return message
    });
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:33:58.413

我认为它会是这样的：

```
<script>
  $("#message").submit(function() {
    // do something...

    // this will prevent the event from bubbling and keep the page from refreshing
    return false;
  });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:44:09.600

第一页：

```
 <h3>Admin Message</h3>

    <form id="message" method="post" action="Admin/message.php">
    <input type="text" style="width:700px;" value="Set A New Message" name="admin-message" id="admin-message" />
    <input class="submit" type="submit" name="submit" value="Submit">
    </form>

<div id="result"></div>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

    <script type="text/javascript">

    $(".submit").click(function(e){

     //Prevent the entire page from refreshig
     e.preventDefault();

     $.get("ajax.php?admin-message=" + $("#admin-message").val(), function(result){

          $("#result").html(result);

     });     

    });

    </script> 
```

ajax.php

```
 <?php

if ( isset ( $_POST['submit'] ) ) //If submit is hit
{

$message = $_POST["admin-message"];
$wpdb->query("UPDATE staff_misc set Message = '$message' where id = '1'");

?><b>New Message Set:</b> <?php echo $wpdb->get_var("SELECT message FROM staff_misc");?><?php

}
?> 
```

# css - 将 div 放在视口底部而不覆盖以前的内容

> ID：12982708
> 
> 赞同：0
> 
> 时间：2012-10-19T21:28:32.127
> 
> 标签：css

我有一个名为#wrap 的外部div 和两个内部div：#container 和#footer。内容在#container 中，并且是动态的。可能有一点，也可能有很多。

当内容很少时，页脚 div 可能会出现在页面的中间。但是，这取决于监视器/分辨率。在大型显示器上距底部 50% 的位置可能仅在小型/杂乱视口上距底部 10%。

如果我使用这个 css 方法：

```
body,html { height: 100%; }
#wrap     { position:relative; min-height:100%; }
#container{ margin:0px 0px 50px 0px; }
#footer   { position:absolute; bottom:0px; } 
```

那么页面将始终扩展到使用 100% 的视口，并且页脚将位于视口的底部 - 完全符合要求。

但是，如果内容增加（或者如果视口很小），页脚可能会覆盖任何延伸到其 130 像素高度的内容——页脚不会向下凹凸。

有没有办法解决这个问题？

注意：我不希望对页脚高度使用百分比，因为它固定在 130 像素并且不能压扁。

[这是我一直用来实验的小提琴](http://jsfiddle.net/bcmit/ZfMET/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:30:43.933

这是我见过的粘性页脚的最佳示例：[http ://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

**更新（2017 年 4 月）：**由于上述链接已无法使用（并且自原始帖子以来已经过去了很长时间），我想为这个问题提供以下解决方案：

永久固定：

```
#container {
    padding-bottom: 130px; // ...or more
}

#footer {
    bottom: 0;
    height: 130px;
    position: fixed;
    width: 100%;
} 
```

对于动态固定元素，请查看这个 jQuery 插件：[https ://libraries.io/bower/jquery-sticky-header-footer](https://libraries.io/bower/jquery-sticky-header-footer)

# html - 当我悬停孩子 il 时，父母 ul 应该改变

> ID：12982709
> 
> 赞同：1
> 
> 时间：2012-10-19T21:28:33.657
> 
> 标签：html, css, hover, parent-child

我正在为 Wordpress 模板创建一个下拉菜单，并且我希望主菜单项具有与子项悬停时相同的颜色。我在这里发现了许多关于堆栈溢出的类似问题并尝试了他们的解决方案，但它们似乎不适用于我的情况。

我认为解决方案必须是：

```
parent:hover child { ... } 
```

它[在这里](http://jsfiddle.net/esBrF/)工作。

我尝试对[我的代码](http://jsfiddle.net/BpGu9/)做同样的事情（请参阅最后一个 CSS 选择器），但它在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:31:35.900

从以下位置更新您的 CSS：

```
#menu ul li a:hover {
    background-color: #006699;
    color: #FFFFFF;
} 
```

到

```
#menu ul li:hover a {
    background-color: #006699;
}
#menu ul li a:hover {
    color: #FFFFFF;
} 
```

更新了[jsFiddle](http://jsfiddle.net/gNU63/)上的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:35:02.587

您可以通过将小提琴中的最后一个 CSS 声明替换为以下内容来获得您想要的效果：

```
.menu ul li:hover > a {
    background-color: #006699;
    color: #fff !important;
} 
```

# ios - iOS：如何旋转 CGImage 并将其绘制到 UIImage 上？

> ID：12982713
> 
> 赞同：1
> 
> 时间：2012-10-19T21:28:59.963
> 
> 标签：ios, uiimage, cgaffinetransform, cgimage

我已经为此苦苦挣扎了好几个小时。仿射变换似乎从来没有像我期望的那样做。

```
CGContextSaveGState (ctx);
float w = self.frame.size.width;
float h = self.frame.size.height;
CGContextRotateCTM (ctx, angle);
CGContextTranslateCTM (ctx, w/2, -h/2);
CGRect r = CGRectMake (0,0, w, h);
CGContextDrawImage (ctx, r, image.CGImage);
CGContextRestoreGState (ctx); 
```

我有一个名为 image 的 UIImage，我有一个可通过 ctx 访问的 CGImage。我想将 UIImage 从其中心旋转一个角度，并将其绘制在 CGImage 的顶部。

如果我旋转然后平移，UIImage 会以一种糟糕的方式拉伸。如果我翻译然后旋转，同样的结果。

关于如何做到这一点的任何线索？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:15:32.380

此代码目前在 iOS6 中运行。

检查图像宽度是否大于其高度，如果是，则顺时针旋转图像；否则它将按默认行为加载。

```
- (void)viewDidLoad
{
[super viewDidLoad];
UIImage *image = myImage;

if( image.size.width > image.size.height ) {

    UIImage *image = myImage;
    image = [UIImage imageWithCGImage:image.CGImage scale:image.scale orientation:UIImageOrientationRight];

    [bgImage setImage:image];

} else {

    [bgImage setImage:image];

}

} 
```

# javascript - 检查是否所有图像都在 javascript 中预加载时出现奇怪的错误

> ID：12982714
> 
> 赞同：0
> 
> 时间：2012-10-19T21:29:28.433
> 
> 标签：javascript, canvas

再次回来问愚蠢的问题...... :)

我做了一些功能，一个用于存储图像，一个用于检索，一个用于检查图像是否已加载。图像存储在这样的数组中：

```
tiles = [ ["ID", "Image Object", "Loaded boolean"] ]; 
```

然而，Javascript 运行我的代码的顺序让我大吃一惊。我添加了几个 console.logs 来查看代码中发生了什么，这就是我得到的：

```
 START
    Storing http://funxion.wippiespace.com/js/mario/question.gif...  
    Storing http://funxion.wippiespace.com/js/mario/wall.gif...  
    Storing http://funxion.wippiespace.com/js/mario/floor.gif...  
    Map.draw initiated  
    Checking if all images are loaded...  
    Amount of tile images = 3  
    Checking [0]  
    [0]: q,[object HTMLImageElement],false is not loaded  
    Images not loaded!  
    http://funxion.wippiespace.com/js/mario/question.gif stored!  
    http://funxion.wippiespace.com/js/mario/wall.gif stored!  
    http://funxion.wippiespace.com/js/mario/floor.gif stored! 
```

我不明白为什么loaded=true 是最后一件事。另外，我试过把 setTimeout(this.draw, 1000); 在 Map.prototype.draw 中，因此在再次检查 allImgLoaded 之前会有 1 秒的延迟，这是行不通的。没有加载检查图纸工作正常。此外， Start() 在 .

编码：

```
 var canvas = document.getElementById("surface");
    var ctx = canvas.getContext("2d");

    function Map()
    {
        this.tiles = [];
    }
    Map.prototype.draw = function(tileid)
    {
        console.log("Map.draw initiated");
        if (!allImgLoaded(this.tiles))
        {
            console.log("Images not loaded!");
        }
        else
        {
            console.log("All good, proceeding.");
            var img = this.getImg(tileid);
            ctx.drawImage(img, 100, 100);
        }
    }
    Map.prototype.storeImg = function(identifier, imgSrc)
    {
        var nextIndex = this.tiles.length;
        var tile = [identifier, new Image(), false];
        tile[1].src = imgSrc;
        console.log("Storing " + imgSrc + "...");
        tile[1].onload = function()
        {
            tile[2] = true;
            console.log(this.src + " stored!");
        }
        this.tiles[nextIndex] = tile;

    }
    Map.prototype.getImg = function(identifier)
    {
        for (var i in this.tiles)
        {
            console.log("Checking index " + i + " for " + identifier + "...");
            if (this.tiles[i][0] === identifier)
            {
                console.log("Found " + this.tiles[i][1] + "! Returning it now.");
                return this.tiles[i][1];
            }
        }
    }

    function allImgLoaded(array)
    {
        console.log("Checking if all images are loaded...");
        console.log("Amount of tile images = " + array.length);
        for (var i in array)
        {
            console.log("Checking ["+i+"]");
            if(array[i][2] === false)
            {
                console.log("["+i+"]: " + array[i] + " is not loaded");
                return false;
            }
        }
        console.log("All loaded!");
        return true;
    }
    function Start()
    {
        console.log("START");
        var mappi = new Map();
        mappi.storeImg("q", "http://funxion.wippiespace.com/js/mario/question.gif");
        mappi.storeImg("w", "http://funxion.wippiespace.com/js/mario/wall.gif");
        mappi.storeImg("f", "http://funxion.wippiespace.com/js/mario/floor.gif");
        mappi.draw("w");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:35:07.067

您似乎不了解图像的加载是异步的。它发生在后台，而您的其他 javascript 继续运行。您开始操作，您的其他代码继续运行，一段时间后图像完成加载 onload 回调函数被调用。

如果要在加载图像后运行操作，则需要从该图像的 onload 处理程序启动该操作。现在您的代码开始加载所有图像，然后`mappi.draw()`在图像加载完成之前立即调用。更具体地说`.storeImg()`，只是开始加载图像。图像的实际加载直到一段时间后才完成（正如您从`console.log()`跟踪中看到的那样。

如果您想预加载一堆图像，然后在加载所有图像时触发操作，您可以使用此答案中的代码：[Image preloader javascript that support events](https://stackoverflow.com/questions/8264528/image-preloader-javascript-that-supports-events/8265310#8265310) which will start the loading of a beam images 然后当它们全部加载时调用回调。`.draw()`然后，您可以从该回调中调用您的方法。像这样使用回调是 javascript 中异步编程的一部分，并且在任何时候通过网络加载某些东西（图像、ajax 调用等）时都需要。

# android - AOSP 代码中导航栏上的后退按钮是如何实现的？

> ID：12982715
> 
> 赞同：0
> 
> 时间：2012-10-19T21:29:33.330
> 
> 标签：android, android-source

我试图了解按下后退按钮时会发生什么。系统如何操作回栈？它从哪里得到窗口句柄到顶部窗口？
我已经查看了`PhoneWindowManager.java`，但找不到我要找的东西。有人之前看过这段代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:40:37.447

您所说的“操作栏中的后退按钮”称为“向上按钮”。文档中的那篇文章很好地解释了两者之间的区别：[Navigation with Back and Up](http://developer.android.com/design/patterns/navigation.html)。

简而言之：

*   Up 按钮用于根据屏幕之间的层次关系在应用程序中导航。
*   系统后退按钮用于按时间倒序浏览用户最近使用过的屏幕的历史记录。它通常基于屏幕之间的时间关系，而不是应用程序的层次结构。

例如，当您从另一个应用程序导航到一个应用程序时，差异是很好的市场。例如：您正在通过邮箱中的链接访问应用程序的 Google Play 屏幕。进入 Google Play 后：

*   Up 会带你到 Google Play 的首页进行申请
*   Back 将带您回到 GMail 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:50:17.903

好吧，这将带您返回，就像返回按钮一样：

```
super.onBackPressed(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T00:06:56.990

[onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)的文档说后退按钮只是结束当前活动。不需要回栈操作。

在更深层次上，Android 确实在[Task](http://developer.android.com/guide/components/tasks-and-back-stack.html)内部维护了一堆Activity，它可以确定当顶部 Activity 完成时接下来要显示哪个 Activity。但是这些机制存在于本机代码中，并且可能超出了您尝试做的范围。据我所知，您可以从 Java 中做的最好的事情是使用[RunningTaskInfo （](http://developer.android.com/reference/android/app/ActivityManager.RunningTaskInfo.html)[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ActivityManager.java#410)为源代码），它将公开当前任务中的“基础”和“顶级”活动。

如果您尝试实现复杂的应用导航，可以使用[许多标志](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_BROUGHT_TO_FRONT)来控制 Activity 在堆栈上的放置方式。

# java - 在 Java 中使用 class 关键字

> ID：12982717
> 
> 赞同：12
> 
> 时间：2012-10-19T21:29:49.940
> 
> 标签：java, class

我真的不明白`class`关键字在某些情况下是如何工作的。

例如，该`get(ClientResponse.class)`方法采用 `ClientResponse.class`. 它在获取它时如何使用它，与仅传递它的实例相比有什么优势？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T21:32:32.577

```
SomeClass.class 
```

返回一个 Java 类对象。Class 是泛化的，所以 SomeClass.class 的实际类型是`Class<SomeType>`.

这个对象有很多用途，你可以在这里阅读它的 Javadoc：http: [//docs.oracle.com/javase/6/docs/api/java/lang/Class.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T21:44:08.863

在`ClientResponse.class`,`class`不是关键字，也不是类中的静态字段`ClientResponse`。

关键字是我们用来在 Java 中定义类的关键字。例如

```
public class MyClass { } /* class used here is one of the keywords in Java */ 
```

* * *

`class`in是表示类的实例的`ClientResponse.class`快捷方式。`Class<T>``ClientResponse`

还有另一种方法可以访问您需要`ClientResponse`. 例如

```
ClientResponse obj = new ClientResponse();
Class clazz = obj.getClass(); 
```

> 与仅传递它的实例相比有什么优势？

`obj`在上面的示例中，您可以看到如果为 null（NPE）会发生什么。那么该方法将无法获取`Class`对`ClientResponse`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T21:52:02.460

`Class`与关键字不同的类是`class`描述实例的元数据。它告诉您通过调用创建的实例的方法、数据成员、构造函数和其他特性`new`。

> 例如 get(ClientResponse.class) 方法采用 ClientResponse.class 获取它时如何使用它，与仅传递它的实例相比有什么优势？

您不能将 的实例传递`ClientResponse`给此方法；它期待*有关*. `ClientResponse`如果您传递了一个实例，您会期望该方法可能会更改该实例的状态。但是传递有关所有实例的元数据可能允许该方法创建一种新类型的实例（例如动态代理）或执行其他依赖于所有实例的元数据的事情`ClientResponse`。看到不同？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T22:07:49.903

类是对象的“蓝图”。实例是一个对象。

如果我们有

```
public class SomeClass {
   int a;
   SomeClass(int a) {
      this.a = a
   }
} 
```

我们可以有这个类的一个实例

```
SomeClass c = new SomeClass(10); 
```

`c`是类的一个实例。它有一个`a`带有 value的整数`10`。

该对象`SomeClass.class`代表一个`Class`。

这`SomeClass.class`是具有以下信息的`object`类型`Class``SomeClass`

1.  一个**具体**的类
2.  一个**构造函数**
3.  带有**整数成员变量**

    还有更多`metadata`关于课程的其他内容`SomeClass`。请注意，它没有 的值`a`。

如果`get(c)`您打算使用`instance`类似`c`调用`c.a`或其他有用的功能来操作/获取实例的数据，则应该使用它。

您应该`get(SomeClass.class)`在 get 基于参数是某种类型的类这一事实返回某些内容时使用。例如，如果这是一个类的方法，该方法具有一个映射，该映射根据传入的类的类型`Registry`检索一个。`implementation class`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-06T16:04:48.177

最重要的事实是 - 您不需要实例来调用该方法。当您由于某种原因无法实例化一个类时，它非常有用，例如它是抽象的，或者只有私有构造函数，或者只能由某些框架（如 Spring 或 JSF）正确实例化。

然后，您可以调用`get`以获取所请求类型的对象，甚至不知道它来自哪里以及它是如何创建的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T21:33:49.337

这`ClientResponse.class`是一个实例`Class<ClientResponse>`。通常`Class`object 表示对象的类型。当您创建新实例时：

```
Object obj = new ClientResponse() 
```

您可以通过调用来检索该对象的类（类型）：

```
obj.getClass() 
```

那么，为什么要传递`Class`对象呢？它不太常见，但一个原因是允许某些方法创建给定类的任意数量的实例：

```
ClientResponse resp = ClientResponse.newInstance(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T21:42:28.300

有很多方法可以使用 Class 对象。这用于反射。下面是一个链接，可以帮助您了解更多。

[http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-10T10:26:01.727

每当我们编译任何 Java 文件时，编译器都会在发出的字节码中嵌入一个名为 的字段`public`，`static`其类型为 。由于该字段是and ，因此我们可以使用点分符号以及类名来访问它，就像您的情况一样。`final``class``java.lang.Class``public``static``ClientResponse.class`

# python - 使用 beautifulsoup 获取 span 标题

> ID：12982718
> 
> 赞同：3
> 
> 时间：2012-10-19T21:30:03.887
> 
> 标签：python, python-2.7, beautifulsoup

我有这个跨度，我想获得标题

```
<span title="Something"></span> 
```

如何用beautifulsoup 做到这一点？

```
res = soup.find('span')
print res //Was trying to add res.title but result is 'None' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T21:32:58.223

您应该可以像这样访问它：

`res = soup.find('span')['title']`

[文档](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#The%20attributes%20of%20Tags)

编辑：我应该澄清一下， res 将是 title 属性的值。如果您希望以后使用该元素，请将我的代码更改为：

```
res = soup.find('span')
title = res['title'] 
```

然后你可以继续使用`res`（如果需要）。

此外，`.find`将返回单个元素。您需要确保它是您想要的跨度，因为 HTML 可能有多个跨度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:37:22.023

这是文档的内容：

```
soup.findAll(['title', 'p'])
# [<title>Page title</title>, 
#  <p id="firstpara" align="center">This is paragraph <b>one</b>.</p>, 
#  <p id="secondpara" align="blah">This is paragraph <b>two</b>.</p>]

soup.findAll({'title' : True, 'p' : True})
# [<title>Page title</title>, 
#  <p id="firstpara" align="center">This is paragraph <b>one</b>.</p>, 
#  <p id="secondpara" align="blah">This is paragraph <b>two</b>.</p>] 
```

您也可以使用正则表达式。

# c# - 面板高度在 Internet Explorer 7 中不起作用

> ID：12982719
> 
> 赞同：0
> 
> 时间：2012-10-19T21:30:11.800
> 
> 标签：c#, asp.net, html, ajaxcontroltoolkit, modalpopupextender

我有一个 ajax modalpopupextender，它会在发生错误时打开一个弹出窗口。这在我迄今为止测试过的所有浏览器中都可以正常工作。但不是在 Internet Explorer 7 中（它在 ie 8 和 9 中）

基本上没有应用面板的高度。在屏幕上它大约 20 像素高。我不知道为什么，并且已经使用了几个小时的各种样本无济于事。宽度 os 工作正常。任何帮助感谢达摩

**HTML**

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Login.aspx.cs" Inherits="myapp.Logon" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link href="assets/css/Logon.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/modalBackground.css" rel="stylesheet" type="text/css" />
    <title>myapp Login</title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel" runat="server">
        <ContentTemplate>
            <ajaxToolkit:RoundedCornersExtender ID="RoundedCornersExtenderError" runat="server"
                TargetControlID="PanelLogonDetails">
            </ajaxToolkit:RoundedCornersExtender>
            <asp:Panel ID="PanelLogonDetails" runat="server" Width="350" Height="300" BorderColor="White" BackColor="White">
                <div id="container">
                    <asp:Label ID="LabelLogo" runat="server" Text="Logo"></asp:Label>
                    <br />
                    <div id="inputcontainer">
                        <asp:Label ID="lblUsername" runat="server" Text="Username"></asp:Label>
                        <br />
                        <asp:TextBox CssClass="Textbox" ID="txtUserName" runat="server" Text="Administrator"
                            ToolTip="Username" Width="200px"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidatorUsername" runat="server" ErrorMessage="You must enter a Username"
                            ControlToValidate="txtUserName" ForeColor="White"></asp:RequiredFieldValidator>
                        <br />
                        <asp:Label ID="lblPassword" runat="server" Text="Password"></asp:Label>
                        <br />
                        <!-- TextMode set to singleline for testing - set to Password for production-->
                        <asp:TextBox CssClass="Textbox" ID="txtPassword" runat="server" Text="!password£$nmj5%$-12"
                            ToolTip="Password" TextMode="SingleLine" Width="200px"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidatorPassword" runat="server" ErrorMessage="You must enter a password"
                            ControlToValidate="txtPassword" ForeColor="White"></asp:RequiredFieldValidator>
                        <br />
                        <br />
                        <asp:Button CssClass="Button" ID="btnLogin" runat="server" Text="Login" OnClick="btnLogin_Click" />
                        <br />
                        <br />
                    </div>
                </div>
            </asp:Panel>
            <!-- Error Modal Form -->
            <asp:HiddenField ID="hideForModal" runat="server" />
            <ajaxToolkit:ModalPopupExtender runat="server" ID="ErrorModal" BehaviorID="modalPopupExtenderError"
                TargetControlID="hideForModal" PopupDragHandleControlID="popUpPaneError" PopupControlID="popUpPaneError"
                OkControlID="btnOk" BackgroundCssClass="modalBackground" DropShadow="False" Drag="true">
            </ajaxToolkit:ModalPopupExtender>
            <ajaxToolkit:RoundedCornersExtender ID="RoundedCornersExtender1" runat="server" TargetControlID="popUpPaneError">
            </ajaxToolkit:RoundedCornersExtender>
            <asp:Panel ID="popUpPaneError" runat="server" CssClass="confirm-dialog" Width="485" Height="285" BackColor="White">
                <div id="ErrorInputContainer">
                    <div>
                        <b>Error Code:</b></div>
                    <asp:Label ID="lblErrorCode" runat="server" Text="Error Code"></asp:Label>
                    <div>
                        <b>Error Message:</b></div>
                    <asp:Label ID="lblErrorMessage" runat="server" Text="Error Message"></asp:Label>
                    <div>
                        <b>Ex message:</b></div>
                    <asp:Label ID="lblExMessage" runat="server" Text="Ex Message"></asp:Label>
                    <br />
                    <asp:Button ID="btnOk" runat="server" Text="Ok" CssClass="Button" />
                    <br />
                    <asp:LinkButton ID="LinkButton1" runat="server" CssClass="close" OnClientClick="$find('modalPopupExtenderError').hide(); return false;" />
                </div>
            </asp:Panel>
            <!-- End Error Modal Form -->
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

**登录.css**

```
#PanelLogonDetails
{

  background-color:#FFFFFF;  
  width: 350px;
  height: 300px;
  position:absolute;
  left: 40%;
  top: 40%;
  margin-left: -50px;
  margin-top: -50px;

}

/* main div */

#container
{

    padding-left:50px;
    padding-top:20px; 
}

#LabelLogo
{

    font-family: Arial, Sans-Serif;  
    font-size: 20px;  
    font-weight: bold; 

}

/* end main div */

/* inputcontainer (within the main div above) */

#inputcontainer {
  position:absolute;
  height:100px;
  width:230px;
  left: 35%;
  top: 50%;
  margin-left: -50px;
  margin-top: -50px;
}
/* End inputcntainer */

html,body {
    margin:0px;
    padding:0px;
    font-family: Arial, Helvetica, sans-serif;
    font-size:13px;
    line-height:1.5em;  
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#003366', endColorstr='#FFFFFF'); /* for IE */
    background: -webkit-gradient(linear, left top, left bottom, from(#036), to(#FFF)); /* for webkit browsers */
    background: -moz-linear-gradient(top,  #036,  #FFF); /* for firefox 3.6+ */ 
    height: 100%;   

}

/* Error Modal */

#ErrorInputContainer 
{    

    background-color:White;
        background:white;
    position:absolute;
    height:260px;
    width:460px;
    top:20px;
    left:20px;
    color:Black;

}

#popUpPaneError
{

    height:260px;
    width:460px; 

}

/* End Error Modal */

/* TextBox */

.Textbox
{

    width:auto;
        padding:2px;
        color:Black;

        text-align:left;
         -moz-border-radius: 5px;
         -webkit-border-radius: 5px;
         -khtml-border-radius: 5px; 
          border-radius: 5px; 
              font-size: 10pt; 
    font-family: Arial; 
}

.Textbox:focus
{

 background-color:#FFCC33;

}

/* End TextBox */

/* Button */

.Button
{

         -moz-border-radius: 5px;
         -webkit-border-radius: 5px;
         -khtml-border-radius: 5px; 
          border-radius: 5px;           
          text-align:left;          
          padding-left:22px;       
          background-repeat: no-repeat;
          background-image: url(/assets/img/action.gif);
          background-position:3px 50%
}

.Button:hover
{
          background: #FFCC33;
          background-repeat: no-repeat;
          background-image: url(/assets/img/action.gif);
          background-position:3px 50%
}

/* End Button */ 
```

**modalBackground.css**

```
.modalBackground
{
      background-color:#696969;
      filter: alpha(opacity=60);
      opacity: 0.6;
}

.close { 
    DISPLAY: block;BACKGROUND: url(img/close.png) no-repeat 0px 0px; 
    LEFT: -5px;WIDTH: 26px;TEXT-INDENT: -1000em;POSITION: absolute; 
    TOP: -7px;HEIGHT: 26px; 
}   
.modalBackground {
    background-color:Gray;filter:alpha(opacity=70);opacity:0.7;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:42:46.297

[http://www.mindfiresolutions.com/Workaround-for-Modal-Popup-with-RoundedCornerExtender-issue-833.php](http://www.mindfiresolutions.com/Workaround-for-Modal-Popup-with-RoundedCornerExtender-issue-833.php)

这就是解决方案。ajax controltoolkit 的错误....感谢 Damo

# c# - 有没有办法在不改变屏幕位置的情况下发布（带表格的普通帖子）？

> ID：12982720
> 
> 赞同：3
> 
> 时间：2012-10-19T21:30:26.290
> 
> 标签：c#, forms, post, razor, webmatrix

我有一个一般性问题，我没有要显示的代码（因为我不知道该尝试什么）。我试图对此进行研究，但我想我要么没有搜索正确的关键字（或者在我的书索引中查找正确的单词），要么这样的事情并不容易。

我只想知道是否有一种方法可以在WebMatrix（C＃）中使用通用表单方法进行发布，无论该位置可能是什么，都不会在发布后改变屏幕的位置？

它可能不存在，但似乎它可能存在，而且我不愿意认为它不存在，如果确实存在的话，只是因为我找不到任何关于它的主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:33:52.400

通常你会使用 Javascript/Ajax 异步提交你的帖子。但是由于您要求使用“通用发布方法”，我假设您的意思是正常的按钮单击发布事件，您应该检查这个答案：

[ASP.NET MVC3 Razor - 在回发时保持滚动位置](https://stackoverflow.com/questions/7278295/asp-net-mvc3-razor-maintain-scroll-position-on-postback)

# objective-c - Float 和 int 数据类型会影响性能

> ID：12982725
> 
> 赞同：1
> 
> 时间：2012-10-19T21:30:52.307
> 
> 标签：objective-c, c, xcode, algorithm, data-structures

我正在研究数据类型，我从 INT 和 Float 开始。我做了一个简单的循环，里面有一个方程。循环首先使用 int 数据类型执行，然后使用 float 执行。代码是在目标 c 中完成的，但想法是它们需要相同的时间。但是，在检查 xcode 中的仪器工具时，浮点数似乎在 CPU 上运行更多周期。
有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:51:04.027

[浮点运算](http://en.wikipedia.org/wiki/Floating_point#Floating-point_arithmetic_operations)远比整数运算复杂。通常，CPU 甚至有一个专用的[FPU](http://en.wikipedia.org/wiki/Floating-point_unit)电路来执行浮点运算。因此，您所观察到的情况是可以预料的。

# c++ - C++ 中的动态整数列表

> ID：12982730
> 
> 赞同：0
> 
> 时间：2012-10-19T21:31:28.000
> 
> 标签：c++, arrays, dynamic, copy-constructor

我正在尝试在我的 List 类中创建一个动态数组，该数组的大小从 2 开始，当您使用 Insert 方法插入值时，它将检查是否有足够的空间，如果没有，它将调整数组的大小a size + 2 ... 问题是它正在崩溃 VS 抱怨堆损坏。另外我认为我的复制构造函数没有被调用，因为 cout 没有显示：

list.h 文件：

```
class List
{
public:

    //  DEFAULT Constructor
    List();
    // Deconstructor to free memory allocated 
    ~List();// Prevent memory leaks

    // COPY Constructor for pointers
    List(const List& value);// copy constructor

    //Modification methods
    void Insert(const int);

    // User ACCESS methods
    void display(void) const;

private:
    int size;// MAX size of the array          
    int count;// current number of elements in the dynamic array

protected:
    int *intptr;// Our int pointer
}; 
```

list.cpp 实现文件：

```
#include "list.h" // Include our Class defintion
#include <iostream>

using namespace std;

// CONSTRUCTOR
List::List() {
    size = 2; // initial size of array
    count = 0;
    intptr = new int[size]; // Start off 2 integers sized array
}
// DECONSTRUCTOR
List::~List() {
    delete[] intptr; // free allocated memory
}

// Copy constructor

List::List(const List& value) {
    size = value.size;
    cout << "Copy con size : " << size << endl;
    count = value.count;

    cout << "Compy count : " << count << endl;
    if (count < size) {
        intptr = new int[size]; // Allocate new data
    } else {
        intptr = new int[size + 2]; // Allocate new data
    }

    for (int index = 0; index < count; index++) {
        intptr[index] = value.intptr[index];
    }

    size = size + 2;
    delete[] intptr;
    intptr = value.intptr;
}

void List::Insert(const int value) {
    // do we have room?
    if (count < size) {
        intptr[count] = value;
    } else { // if not we need to add more elements to array
        intptr[count] = value; // DEEP copy invoked with copy constructor
    }

    cout << "SIZE: " << size << endl;
    cout << "COUNT" << count << endl;
    count++; // Increase items added in array
}

void List::display() const {
    for (int i = 0; i < count; i++)
        cout << intptr[i] << endl;
} 
```

main.cpp 测试器

```
#include <iostream>
#include "list.h"

int main()
{
    List mylist;

    mylist.Insert(5);
    mylist.Insert(6);
    mylist.Insert(2);
    mylist.Insert(8);
    mylist.Insert(4);
    mylist.Insert(5);
    mylist.Insert(9);
    mylist.Insert(8);
    mylist.Insert(5);
    mylist.Insert(9);
    mylist.Insert(8);
    mylist.Insert(5);
    mylist.Insert(9);
    mylist.Insert(8);
    mylist.Insert(5);
    mylist.Insert(9);

    mylist.display();

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T21:39:15.733

您的`List::Insert(const int value)`方法根本不调用`List`复制构造函数，它只在`intptr`数组内部写入。当`count`大于时`size`，您在数组之外写入，这就是您有错误的原因。

您应该将您在复制构造函数中所做的`Insert`直接移动到方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:53:36.143

您没有正确管理阵列，尤其是在您的`Insert()`方法中。试试这个：

```
#include "list.h" // Include our Class defintion 
#include <iostream> 

// CONSTRUCTOR 
List::List()  
{ 
    intptr = new int[2];
    size = 2;
    count = 0; 

    std::cout << "Initial size : " << size << " count : " << count << std::endl; 
} 

// DECONSTRUCTOR 
List::~List() 
{ 
    delete [] intptr; // free allocated memory 
} 

// Copy constructor 
List::List(const List& value) 
{ 
    intptr = new int[value.size]; // Allocate new data 
    size = value.size; 
    count = value.count; 

    for(int index = 0; index < count; ++index) 
        intptr[index] = value.intptr[index]; 

    std::cout << "Copy size : " << size << " count : " << count << std::endl; 
} 

void List::Insert(const int value) 
{ 
    if (count == size)
    { 
        int *newintptr = new int[size+2];

        for(int index = 0; index < size; ++index) 
            newintptr[index] = intptr[index]; 

        delete[] intptr;
        intptr = newintptr;
        size += 2;
    }

    intptr[count] = value; 
    ++count;

    std::cout << "New size : " << size << " count : " << count << std::endl; 
} 

void List::display() const 
{ 
    for(int i = 0; i < count; i++) 
        std::cout << intptr[i] << std::endl; 
} 
```

.

```
#include <iostream> 
#include "list.h" 

int main() 
{ 
    List mylist; 

    mylist.Insert(5); 
    mylist.Insert(6); 
    mylist.Insert(2); 
    mylist.Insert(8); 
    mylist.Insert(4); 
    mylist.Insert(5); 
    mylist.Insert(9); 
    mylist.Insert(8); 
    mylist.Insert(5); 
    mylist.Insert(9); 
    mylist.Insert(8); 
    mylist.Insert(5); 
    mylist.Insert(9); 
    mylist.Insert(8); 
    mylist.Insert(5); 
    mylist.Insert(9); 

    mylist.display(); 
    system("PAUSE"); 

    List mylist2(myList); // copy construct a new list

    mylist2.display(); 
    system("PAUSE"); 

    return 0; 
} 
```

话虽如此，您确实应该`std::vector`改用，例如：

```
#include <iostream>            
#include <vector>
#include <algorithm>

void displayValue(int value)
{
    std::cout << value << std::endl; 
}

int main()            
{            
    std::vector<int> mylist;            

    mylist.push_back(5);            
    mylist.push_back(6);            
    mylist.push_back(2);            
    mylist.push_back(8);            
    mylist.push_back(4);            
    mylist.push_back(5);            
    mylist.push_back(9);            
    mylist.push_back(8);            
    mylist.push_back(5);            
    mylist.push_back(9);            
    mylist.push_back(8);            
    mylist.push_back(5);            
    mylist.push_back(9);            
    mylist.push_back(8);            
    mylist.push_back(5);            
    mylist.push_back(9);            

    std::for_each(mylist.begin(), myList.end(), displayValue);
    system("PAUSE");            

    std::vector<int> myList2(myList);

    std::for_each(mylist2.begin(), myList2.end(), displayValue);
    system("PAUSE");            

    return 0;            
 } 
```

更进一步，如果你想继续使用你的自定义`List`类，至少`std::vector`在它里面使用：

```
#include <vector>

class List  
{  
public:  
    //  DEFAULT Constructor  
    List();  

    //Modification methods  
    void Insert(const int);  

    // User ACCESS methods  
    void display(void) const;  

protected:  
    std::vector<int> intvec;
}; 
```

.

```
#include "list.h" // Include our Class defintion 
#include <iostream> 

// CONSTRUCTOR 
List::List()  
{ 
    intvec.reserve(2);
    std::cout << "Initial size : " << intvec.capacity() << " count : " << intvec.size() << std::endl; 
} 

// Copy constructor 
List::List(const List& value) 
{ 
    intvec = value.intvec;
    std::cout << "Copy size : " << invec.capacity() << " count : " << intvec.size() << std::endl; 
} 

void List::Insert(const int value) 
{ 
    intvec.push_back(value); 
    std::cout << "New size : " << intvec.capacity() << " count : " << intvec.size() << std::endl; 
} 

void List::display() const 
{ 
    for(std::vector<int>::const_iterator iter = intvec.begin(), end = intvec.end(); iter != end; ++iter) 
        std::cout << *iter << std::endl; 
} 
```

.

```
#include <iostream> 
#include "list.h" 

int main() 
{ 
    List mylist; 

    mylist.Insert(5); 
    mylist.Insert(6); 
    mylist.Insert(2); 
    mylist.Insert(8); 
    mylist.Insert(4); 
    mylist.Insert(5); 
    mylist.Insert(9); 
    mylist.Insert(8); 
    mylist.Insert(5); 
    mylist.Insert(9); 
    mylist.Insert(8); 
    mylist.Insert(5); 
    mylist.Insert(9); 
    mylist.Insert(8); 
    mylist.Insert(5); 
    mylist.Insert(9); 

    mylist.display(); 
    system("PAUSE"); 

    List mylist2(myList); // copy construct a new list

    mylist2.display(); 
    system("PAUSE"); 

    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:58:40.597

复制构造函数的原因是从现有对象创建一个新对象，但是看看你的复制构造函数，你在那里做什么？

```
/* initialize my size and count, from value */
size = value.size;
count = value.count;

/* Check count and size */
if( count == size ) /* if other is full */
    size += 2;

/* copy content from value.intptr into this->intptr */
//if (count < size)
//    intptr = new int[size]; // Allocate new data
//else
//    intptr = new int[size + 2]; // Allocate new data
intptr = new int[size];  /* Allocate my buffer */

/* It's better to use std::copy in place of a hand written loop */
//for(int index = 0; index < count; index++)
//    intptr[index] = value.intptr[index];
std::copy( value.intptr, value.intptr + value.count, intptr );

/* why you increase your size here?? shouldn't this indicate size of intptr? */
//size = size + 2;

/* After creating a new buffer and putting data into it, you destroy the buffer
   and set your buffer equal to buffer of value? why? if value destroyed it will
   destroy its intptr and your intptr point to a deleted memory
*/
//delete [] intptr;
// intptr = value.intptr; 
```

现在看看你的`insert`方法：

```
if(count < size) // do we have room?
{
    intptr[count] = value;
}
else // if not we need to add more elements to array
{
    /* As you already checked you do not have enough room to insert data to intptr
       so why you do it here? shouldn't you first allocate a new buffer and then
       copy data to it?
       In comment you say DEEP copy with copy-constructor, which copy constructor
       you expect to called here? you are assigning an int to another int, so where
       is copy constructor?
     */
    // intptr[count] = value; // DEEP copy invoked with copy constructor
    int* tmp = new int[size + 2];
    std::copy( intptr, intptr + size, tmp );
    delete[] intptr;
    intptr = tmp;
    size += 2;
    intptr[count] = value;
}

count++; // Increase items added in array 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T21:38:37.627

使用 std::vector。它已经完成了所有这些，并且比您的代码更安全、更快。

# r - 使用 ggplot2 绘制多值（一对多）数据

> ID：12982734
> 
> 赞同：0
> 
> 时间：2012-10-19T21:31:40.963
> 
> 标签：r, ggplot2, plyr

我有数据显示谁在以 CSV 格式存储在文件中的照片中：

```
|------------+---------------------------|
| image      | people                    |
|------------+---------------------------|
| image1.png | John, Paul                |
| image2.png | John                      |
| image3.png |                           |
| image4.png | George, Paul, John, Ringo |
| ...        |                           |
|------------+---------------------------| 
```

我想将它加载到 R 中，并以各种方式绘制它，但假设我想得到一个条形图，显示每个人出现了多少次。

如果有帮助，我可以重组数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:20:39.287

像这样的数据集描述了您在问题中提到的情况：

```
require(plyr)
people_list = c("Edward", "Smith", "Neo", "Mr. Anderson", 
                "Red John", "Blackbeard", "Lily", "Anne")
dat = data.frame(image = sprintf("image%d.png", 1:100))
dat = ddply(dat, .(image), function(x) {
  people = sample(people_list, size = sample(1:length(people_list), 1))
  return(data.frame(image = x$image, people))
})
> head(dat)
       image     people
1 image1.png Blackbeard
2 image1.png     Edward
3 image1.png       Anne
4 image1.png       Lily
5 image1.png        Neo
6 image1.png   Red John 
```

如果您将数据集转换为这种形状，则可以使用`ddply`from计算聚合`plyr`：

```
# Number of occurences of people
occ = ddply(dat, .(people), summarise, no_occurence = length(people))
> occ
        people no_occurence
1         Anne           48
2   Blackbeard           56
3       Edward           46
4         Lily           55
5 Mr. Anderson           55
6          Neo           51
7     Red John           60
8        Smith           56 
```

...并以此创建一个条形图，例如：

```
require(ggplot2)
theme_set(theme_bw())
ggplot(occ, aes(x = people, y = no_occurence)) + geom_bar() 
```

![在此处输入图像描述](../Images/e21d6d6fc980684a39f4068d9b1a977a.png)

这可能会让您开始创建其他可视化。

# eclipse - 当客户端和服务器在同一台开发 PC 上时模拟网络延迟

> ID：12982737
> 
> 赞同：0
> 
> 时间：2012-10-19T21:31:50.160
> 
> 标签：eclipse, debugging, network-programming, client-server

由于我的资源有限并且为了帮助调试，我正在通过在我的 Windows 7 开发 PC 上同时运行服务器和一个或多个客户端来对客户端-服务器（游戏）应用程序进行本地测试。客户端和服务器都是通过 Eclipse 开发的 Java 应用程序。

鉴于一切都在同一台PC上运行，有什么简单的方法可以引入延迟......也许“破解”使用的端口或其他东西？还是只有在每个应用程序都在单独的 PC（或单独的 VM）上运行时才有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:39:04.750

如果检测到连接来自本地主机，则在服务器中创建一个在特定时间范围内随机延迟的功能。然后，您可以根据需要打开/关闭此功能。

# jquery-mobile - 在 jQuery Mobile 中更改方向更改的数据角色

> ID：12982738
> 
> 赞同：1
> 
> 时间：2012-10-19T21:31:52.590
> 
> 标签：jquery-mobile

我正在使用 JQM 构建一个非常简单的移动网页，该网页使用 data-role="footer" 来创建静态页脚。

它在纵向模式下运行良好，但在横向模式下，页脚占据了可用空间的很大比例，以至于它确实影响了用户体验。

我试过这个：

```
$(window).orientationchange(function(){
    $("#foot").removeAttr("data-role");
}); 
```

和

```
$(window).orientationchange(function(){
    $("#foot").attr("data-role","none");
}); 
```

但都没有奏效。

有谁知道是否有办法根据 JQM 事件成功修改数据角色？

谢谢。

# r - R ggplot2 将长 x 轴标签包装在多行上

> ID：12982743
> 
> 赞同：11
> 
> 时间：2012-10-19T21:32:04.743
> 
> 标签：r, ggplot2

我有一个条形图（我使用了 ggplot2、geom_bar），但是 x 轴的标签太长并且重叠。我希望它们保持原样，但我也希望它们是水平的（不是垂直的，也不是有角度的）。有没有办法将长标签包装在多行（至少两行）上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T21:38:48.310

我不知道`ggplot`直接通过的方法。但是，您可以执行以下操作：

```
ggplot(data.frame(x=1:10, y=1:10), aes(x,y)) +
  geom_point() +
  labs(x='really long label \n with a return') 
```

使用您的轴标签使它们以您选择的长度包裹。

# arrays - 当我在 Cocos2D-X 中向数组添加控制点时应用程序崩溃

> ID：12982744
> 
> 赞同：0
> 
> 时间：2012-10-19T21:32:06.097
> 
> 标签：arrays, crash, point, cocos2d-x

好的。要么我错过了一些非常明显的东西，要么我不明白什么是控制点。这是我调用的一个函数，用于创建由多个点组成的数组。稍后我将使用这些点将精灵放置在网格上。

```
void gMode::createGrid(){
    _grid = new CCPointArray;
    for (int y=1; y<=25; y++) {
        for (int x = 2; x<=29; x++){
            CCPoint point = CCPointMake(x, y);
        _grid->addControlPoint(point);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T05:29:00.430

首先，您需要创建 CCPointArray ....say CCPointArray::create(100) 然后执行您想要的任何操作...告诉我结果

# java - 寻找内存高效设计

> ID：12982745
> 
> 赞同：3
> 
> 时间：2012-10-19T21:32:06.540
> 
> 标签：java, optimization

我正在对大型数据集进行一些实验，并希望优化特定部分。目前，我有 5-6 个`Model`s，每个存储一个从`Topic`s 到s`List`的映射`String`。s的集合`Topic`很大，每个之间都一样`Model`，所以一定有更好的办法。最终我需要执行的查询是：对于某些组合`String`的位置 x是什么。`List``Model``Topic`

使用映射方法的问题之一是，如果有 500k-5M 个主题，每个主题都有一个包含 20 个字符串的列表。然后我`Map<Model, Map<Topic, List<String>>>`的将是巨大的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:58:03.807

不清楚您想在哪里/如何实现“内存效率”。首先需要查看详细数据的详细信息以查看消耗了多少存储空间，然后检查各种组织方式并根据开销百分比与“真实”数据分析它们的效率。

简单看一下，当您考虑关联的表时，HashMap 的每个条目大约有 80 个字节的开销。一个 ArrayList 看起来平均在 10-12 左右。不用看，我猜 TreeMap 会比 HashMap 多——可能有 100 个。

一般来说，您自己的对象中的链接在存储和访问速度方面都比使用这些聚合对象的链接“更便宜”。但是聚合对象使用起来很方便，并且已经在一定程度上进行了“优化”。

（但是查看您的更新，您可能应该查看数据库应用程序，而不是将所有内容都保存在堆中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:37:50.837

你试过 SortedSet / Maps 吗？听起来您需要优化搜索，排序集合（如 TreeMap）应该是 log(n)，而常规列表是 O(1)。当然，这种事情是数据库擅长的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:50:36.930

您可以使用`Topic`and`Model`在单个 Map 中构造复合键，例如

```
map.put(topic1_id + model1_id, list1_1);
map.put(topic1_id + model2_id, list1_2);
...
map.get(topic_id + model_id) 
```

其中 ID 是字符串（或类似的方案可以与数字标识符一起使用）。

类似的方法是为每个主题分配一个唯一的编号并建模，然后将字符串列表存储在数组中，因此查找给定组合的列表只需查找两个索引，然后访问二维数组中的给定位置. （但是，如果您在构建数据结构之前知道主题和模型的数量，这会更容易）

为了内存效率，还要考虑小细节。通常，您希望最小化对象的数量 - 每个对象都有开销。ArrayList 在动态增长时可能会浪费大量空间，当它们超过当前容量时，其大小会增加一倍。如果您可以将它们预先设置为所需的容量（或使用数组代替），那么您可以节省大量内存。使用大量小型 HashMap 时也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T21:59:48.843

一种可能的数据结构是映射的层次结构，导致字符串数组。例如：

```
HashMap<Model, HashMap<Topic, String[]>> map; 
```

查询函数将如下所示：

```
public String query(Model model, Topic topic, int x) {

    HashMap<Topic, String[]> childMap = map.get(model);
    if (childMap == null) {
       return null;
    }

    String[] list = childMap.get(topic);
    if (list == null) { 
        return null;
    }

    return list[x];
} 
```

假设您的模型和主题结构实现`hashCode()`并`equals()`合理，查询性能应该是相当不错的。

一个潜在的弱点：我假设您需要索引大量模型/主题组合以及相关的字符串列表（如果没有，您可能不会询问优化）。我的猜测是子 String[] 数组会消耗大量内存。每个数组都是一个 Java 对象（大约 20 个字节）+ 每个数组位置的指针。

那里有2条建议：

`String[]`1）如果许多模型/主题组合共享同一组字符串，您可以通过共享这些实例获得相当多的收益。

2) 如果您使用的是 64 位 VM，请务必使用压缩的普通对象指针 ( `-XX:+UseCompressedOops`)。这至少会使大多数指针保持 4 个字节而不是 8 个字节。自 1.6.0_23 以来，压缩的 OOP 是默认设置，因此相对较新的 VM 将在此处为您节省一些内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T22:28:34.163

未提及的另一种可能性是在查询时使用`String[][][]`和模型和主题存储字符串`List`，`ArrayList`然后在查询时：

```
public String query(Model model, Topic topic, int x) {
   return strings[models.indexOf(model)][topics.indexOf(topic)][x];
} 
```

如果对主题和模型进行排序，则可以进一步提高速度，而不是`indexOf`使用二分搜索。

# linux - lftp + bash 脚本 + 变量

> ID：12982750
> 
> 赞同：2
> 
> 时间：2012-10-19T21:32:41.847
> 
> 标签：linux, variables, queue, mirror, lftp

我正在使用 lftp 从外部服务器镜像文件，但现在我需要的是在成功下载后重命名源目录（在远程服务器上）。基本上我需要的是在远程服务器列表目录上打开连接，下载所有名称以“todo”开头的目录，即 todo.20121019 成功后我必须将下载的目录重命名为“done.20121019”。服务器上可能有多个目录。

远程 FTP 服务器仅适用于活动连接。

```
#!/bin/bash

directories=`lftp -f lftp_script_file.lf |grep done|awk '{print $NF}'`

for i in $directories
  do
    echo $i //here I get list of directories that should be downloaded and renamed
  done 
```

lftp_script_file.lf 只是列出directires：

```
set ftp:passive-mode false;
open ftp://user:pass$@10.10.10.123
ls my_sub_dir/ 
```

有没有办法：

1.  打开到 ftp 服务器的连接
2.  查找我要下载的目录
3.  将这些目录添加到队列并下载
4.  重命名远程服务器上的目录

在批处理文件中？

我试图实现的是列出目录，找到有趣的目录，下载并重命名，但我找不到通过 bash 脚本和“设置 ftp:passive-mode false”将目录列表发布到 lftp 的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:02:06.973

为了能够将变量替换为 lftp 命令，请使用以下内容：

```
lftp -e "cmd1;cmd2" 
```

# jquery - 在 IE7 和 IE8 中向聚合和压缩 CSS 问题添加类

> ID：12982751
> 
> 赞同：1
> 
> 时间：2012-10-19T21:32:48.410
> 
> 标签：jquery, drupal, compression, aggregate

我正在运行 Drupal，并启用了“聚合和压缩 CSS 文件”以及“聚合 JavaScript 文件”。我正在使用以下 jQuery 向其中一个元素添加一个类，效果很好。

但是，当我启用“聚合和压缩 CSS 文件”时，在 IE7 和 IE8 中不会出现预期的结果。它在 Firefox、Safari 和 Chrome 中运行良好。

Drupal 动态生成压缩的 CSS 并将其放置在新目录中。

这是我的 jQuery：

```
(function ($, Drupal, window, document, undefined) {

    $(document).ready(function(){
        // ADD CLASS TO MAIN MENU ITEM WHEN CHILD UL IS HOVERED //
        $("#menu-218-1 ul").hover( 
            function(){ $("li#menu-218-1 a.sf-depth-1").addClass('submenu_hover') },
            function(){ $("li#menu-218-1 a.sf-depth-1").removeClass('submenu_hover') }
        )
        $("#menu-539-1 ul").hover( 
            function(){ $("li#menu-539-1 a.sf-depth-1").addClass('submenu_hover') },
            function(){ $("li#menu-539-1 a.sf-depth-1").removeClass('submenu_hover') }
        )
        $("#menu-540-1 ul").hover( 
            function(){ $("li#menu-540-1 a.sf-depth-1").addClass('submenu_hover') },
            function(){ $("li#menu-540-1 a.sf-depth-1").removeClass('submenu_hover') }
        )
        $("#menu-545-1 ul").hover( 
            function(){ $("li#menu-545-1 a.sf-depth-1").addClass('submenu_hover') },
            function(){ $("li#menu-545-1 a.sf-depth-1").removeClass('submenu_hover') }
        )
        $("#menu-546-1 ul").hover( 
            function(){ $("li#menu-546-1 a.sf-depth-1").addClass('submenu_hover') },
            function(){ $("li#menu-546-1 a.sf-depth-1").removeClass('submenu_hover') }
        )
        $("#menu-547-1 ul ").hover( 
            function(){ $("li#menu-547-1 a.sf-depth-1").addClass('submenu_hover') },
            function(){ $("li#menu-547-1 a.sf-depth-1").removeClass('submenu_hover') }
        )

    });

})(jQuery, Drupal, this, this.document); 
```

这是我的CSS：

```
.submenu_hover {
    background:  #888888 url(../images/arrow.png) no-repeat 97px 0px;
    border-left: #888888 solid 9999px;
    margin-left: -9999px;
} 

.lt-ie8 .submenu_hover {
    background:  #888888 url(../images/arrow.png) no-repeat 97px 0px;
    border-left: #888888 solid 9999px;
    margin-left: -960px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:58:55.943

尝试验证聚合和非聚合 CSS。您显示的行上方可能存在语法错误，导致它们被跳过。

即使它似乎与 CSS 相关，尝试在每个 .hover() 调用后添加分号。缺少可能会使 JS 压缩器跳闸。从技术上讲，在 JS 中它们是可选的，但如果压缩 JS 是将行合并为一条，则分号可能是必需的。

Wirey 说的是真的——但是添加一个类可能需要 php 或使用菜单属性模块。

# dart - Google Dart：Dart strrev() 函数

> ID：12982759
> 
> 赞同：0
> 
> 时间：2012-10-19T21:33:30.270
> 
> 标签：dart

我想知道是否有像 PHP 的**strrev()**这样的 Dart 函数。如果没有，您能否向我展示如何自己制作的任何源代码？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:50:20.443

列表可以反转，因此您也可以使用它来反转字符串：

```
new String.fromCharCodes("input".charCodes.reversed.toList()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T03:12:06.370

作为一个全新的 Dart 用户（截至今天下午），我还没有在 API 中找到一个。但是，在任何语言中反转字符串都非常容易。这是 Dart 形式的典型 O(n) 解决方案：

```
String reverse(String s) {
  var chars = s.splitChars();
  var len   = s.length - 1;
  var i     = 0;

  while (i < len) {
    var tmp = chars[i];
    chars[i] = chars[len];
    chars[len] = tmp;
    i++;
    len--;
  }

  return Strings.concatAll(chars);
}

void main() {
  var s = "dog";
  print(s);
  print(reverse(s));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T22:24:47.433

可能是将来在 List (dart issue 2804) 中实现标准化的 reverse() 方法，以下是比以前的典型解决方案快 8 到 10 倍左右：

```
String reverse(String s) {
  // null or empty
  if (s == null|| s.length == 0)
    return s;
  List<int> charCodes = new List<int>();
  for (int i = s.length-1; i>= 0; i-- )
    charCodes.addLast(s.charCodeAt(i)) ;
  return new String.fromCharCodes(charCodes);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-20T14:23:35.297

试试这个而不是其他的。

```
String try(str) {
  return str.split('').reversed.join('');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-04T15:40:25.017

```
String theString  = "reverse the string";

List<String> reslt = theString.split("");
List<String> reversedString = List.from(reslt.reversed);  
String  joinString = reversedString.join("");
print(joinString); 
```

输出： gnirts eht esrever

# mule - 使用 HTTP 端点下载 Mule 文件

> ID：12982760
> 
> 赞同：1
> 
> 时间：2012-10-19T21:33:31.120
> 
> 标签：mule

我负责在流程结束时下载文件的 HTTP 端点出错了。它一直在尝试与`http://:80/`而不是传入的 URL 进行通信。我在这里做错了什么？

```
<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting" xmlns:file="http://www.mulesoft.org/schema/mule/file" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:json="http://www.mulesoft.org/schema/mule/json" xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd ">
    <flow name="BingFlow1" doc:name="BingFlow1">
        <http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8081" doc:name="HTTP"/>
        <https:outbound-endpoint exchange-pattern="request-response" host="api.datamarket.azure.com" port="443" path="Data.ashx/Bing/Search/v1/Web?Query=%27contract%20california%27&amp;WebFileType=%27PDF%27&amp;$top=50&amp;$format=Json" user="*****" password="*****" doc:name="Bing"/>
        <json:json-to-object-transformer returnClass="java.util.Map" doc:name="JSON to Object"/>
        <expression-transformer expression="#[message.payload.d.results]" doc:name="Expression"/>
        <collection-splitter doc:name="Collection Splitter"/>
        <expression-transformer expression="#[org.mule.util.StringUtils.substringAfter(message.payload.Url, 'http://')]" doc:name="Expression"/>
        <logger message="Payload is: #[message.payload]" level="INFO" doc:name="Logger"/>
        <http:outbound-endpoint exchange-pattern="request-response" host="#[org.mule.util.StringUtils.substringBefore(message.payload, '/')]" port="80" method="GET" doc:name="HTTP" contentType="application/pdf" mimeType="application/pdf" path="#[org.mule.util.StringUtils.substringAfter(message.payload, '/')]"/>
        <file:outbound-endpoint responseTimeout="10000" doc:name="File" outputPattern="#[org.mule.util.StringUtils.replace(message.payload, '/','.')]" path="/home/user/Documents/output" mimeType="application/pdf"/>
    </flow>
</mule> 
```

当更改为匹配第一个答案时，我得到了这个异常：

```
********************************************************************************
Message               : Failed to invoke REST service "http://santaclaraca.gov/modules/ShowDocument.aspx?documentid=108?followRedirects=true". Message payload is of type: LinkedHas
hMap
Code                  : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. Failed to invoke REST service "http://santaclaraca.gov/modules/ShowDocument.aspx?documentid=108?followRedirects=true". Message payload is of type: LinkedHashMap (org.mule.transp
ort.http.components.RestServiceException)
  org.mule.transport.http.components.RestServiceWrapper:219 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/transport/http/components/RestServiceException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.mule.transport.http.components.RestServiceException: Failed to invoke REST service "http://santaclaraca.gov/modules/ShowDocument.aspx?documentid=108?followRedirects=true". Mess
age payload is of type: LinkedHashMap
    at org.mule.transport.http.components.RestServiceWrapper.doInvoke(RestServiceWrapper.java:219)
    at org.mule.component.AbstractComponent.invokeInternal(AbstractComponent.java:126)
    at org.mule.component.AbstractComponent.access$000(AbstractComponent.java:61)
    + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

**- - 解决了 - -**

非常感谢大卫。这是我的最终解决方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:file="http://www.mulesoft.org/schema/mule/file"
    xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:json="http://www.mulesoft.org/schema/mule/json"
    xmlns:https="http://www.mulesoft.org/schema/mule/https" xmlns="http://www.mulesoft.org/schema/mule/core"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
http://www.mulesoft.org/schema/mule/https http://www.mulesoft.org/schema/mule/https/current/mule-https.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">

    <configuration doc:name="Configuration">
        <expression-language>
            <import class="org.mule.util.StringUtils" />
        </expression-language>
    </configuration>
    <flow name="BingQuery" doc:name="BingQuery">
        <http:inbound-endpoint exchange-pattern="one-way"
            host="localhost" port="8082" doc:name="HTTP" />
        <https:outbound-endpoint exchange-pattern="request-response"
            host="api.datamarket.azure.com" port="443"
            path="Data.ashx/Bing/Search/v1/Web?Query=%27california%20school%20district%20contract%27&amp;WebFileType=%27PDF%27&amp;$top=10&amp;$format=Json"
            user="*****" password="*****"
            doc:name="Bing" />
        <json:json-to-object-transformer
            returnClass="java.util.Map" doc:name="JSON to Object" />
        <expression-transformer expression="#[message.payload.d.results]"
            doc:name="Expression" />
        <collection-splitter doc:name="Collection Splitter" />
        <vm:outbound-endpoint exchange-pattern="one-way"
            doc:name="VM" path="fileWriter" />
    </flow>
    <flow name="RestProcessor" doc:name="RestProcessor">
        <vm:inbound-endpoint exchange-pattern="one-way"
            doc:name="VM" path="fileWriter" />
        <set-variable variableName="fileName" value="#[message.payload.ID].pdf"
            doc:name="Variable" />
        <http:rest-service-component
            serviceUrl="#[joinChar=message.payload.Url.contains('?')?'&amp;':'?' ; StringUtils.join(new String[]{message.payload.Url,(String)joinChar,'followRedirects=true'})]"
            httpMethod="GET">
            <http:error-filter>
                <expression-filter
                    expression="#[Integer.valueOf(message.inboundProperties['http.status']) &gt;= 400]"></expression-filter>
            </http:error-filter>
        </http:rest-service-component>
        <file:outbound-endpoint responseTimeout="10000"
            doc:name="File" outputPattern="#[flowVars.fileName]" path="/home/ken/Documents/output"
            mimeType="application/pdf" />
    </flow>
</mule> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T22:13:58.940

我无法发现错误：您的流程看起来不错（除了我将在下面详细说明的问题）因此，除了使用`http:outbound-endpoint`有时可能很挑剔的`http:rest-service-component`.

您的下一个问题将在`outputPattern`文件端点中：记住此时`message.payload`将是来自 HTTP 端点的响应，而不是（部分）URL。您需要预先计算文件名并将其存储在流变量中，然后使用它。

这将给出：

```
<configuration>
  <expression-language>
    <import class="org.mule.util.StringUtils" />
  </expression-language>
</configuration>

<flow name="BingFlow1" doc:name="BingFlow1">
    <http:inbound-endpoint exchange-pattern="one-way" host="localhost" port="8081" doc:name="HTTP"/>
    <https:outbound-endpoint exchange-pattern="request-response" host="api.datamarket.azure.com" port="443" path="Data.ashx/Bing/Search/v1/Web?Query=%27contract%20california%27&amp;WebFileType=%27PDF%27&amp;$top=50&amp;$format=Json" user="*****" password="*****" doc:name="Bing"/>
    <json:json-to-object-transformer returnClass="java.util.Map" doc:name="JSON to Object"/>
    <expression-transformer expression="#[message.payload.d.results]" doc:name="Expression"/>
    <collection-splitter doc:name="Collection Splitter"/>
    <set-variable variableName="fileName" value="#[org.mule.util.StringUtils.substringAfter(message.payload.Url, 'http://').replace('/','.')]" />
    <http:rest-service-component serviceUrl="#[joinChar=message.payload.Url.contains('?')?'&amp;':'?' ; StringUtils.join(new String[]{message.payload.Url,(String)joinChar,'followRedirects=true'})]" httpMethod="GET">
        <http:error-filter>
            <expression-filter expression="#[Integer.valueOf(message.inboundProperties['http.status']) &gt;= 400]" />
        </http:error-filter>
    </http:rest-service-component>
    <file:outbound-endpoint responseTimeout="10000" doc:name="File" outputPattern="#[flowVars.fileName]" path="/home/user/Documents/output" mimeType="application/pdf"/>
</flow> 
```

# c# - Linq 左侧不在右侧表中

> ID：12982763
> 
> 赞同：0
> 
> 时间：2012-10-19T21:33:45.940
> 
> 标签：c#, asp.net-mvc, linq

我不是一个 LINQ 程序员，所以这让我有些困惑。我有两个表：第一个是带有 StartDate 和 EndDate 以及 ID 的 Schedule；其次，带有 InstanceDate 和 ScheduleID 的 ScheduleInstance 表。对于 Schedule.StartDate 和 Schedule.EndDate 之间的每一天，我需要创建一个 ScheduleInstance 行 - 但是，只提前 24 小时。由于计划是在 24 小时前瞻内创建和删除的，因此我必须每 n 分钟生成一个检查器，以检查 ScheduleID 的 ScheduleInstance 是否存在于该 24 小时窗口内。

楷模：

```
public class Schedule
{
    public int ID { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
}
public class ScheduleInstance
{
    public int ID { get; set; }
    public int ScheduleID { get; set; }
    public DateTime InstanceDate { get; set; }
} 
```

LINQ的开始：

```
var skeds = from sked in context.Schedules
            join instance in context.ScheduleInstances
                on sked.ID equals instance.ScheduleID
            where ((sked.StartDate <= DateTime.Now) && (sked.EndDate >= DateTime.Now))
            select sked.ID; 
```

（显然错了）

总而言之，我需要在接下来的 24 小时内获取 ScheduleInstance.InstanceDate 不存在的 Schedule.ID 列表。

非常感谢您的帮助。

**更新**

```
 DateTime tomorrow = DateTime.Now.AddDays(1);
        var skeds = from sked in context.Schedules
                    join instance in context.ScheduleInstances
                         on sked.ID equals instance.ScheduleID into g
                    where (sked.StartDate <= tomorrow) &&
                          (sked.EndDate >= tomorrow) &&
                           !g.Any()
                    select sked; 
```

现在，如果明天不存在一个实例，则会创建一个实例（在与此处无关的后续代码中）。如果我将 StartDate 设置为 Now+2mins ，那么在 2 分钟后创建计划 - 完美。但是，如果我将时钟提前 24 小时，我应该会得到一大堆新实例。重申一下，如果计划开始日期是现在，结束日期是 30 天后，那么我应该以 31 个实例结束，每个新实例都提前 24 小时创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:39:36.593

我相信这会成功

```
var today = DateTime.Now;
var nextDay = today.AddDays(1);
var scheds = from sched in context.Schedules                        
             join instance in context.ScheduleInstances
                on sched.ID equals instance.ScheduleID into schedInstances
             where (sched.StartDate >= today) && 
                   (sched.EndDate <= nextDay) &&
                   !schedInstances.Any()
             select sched.ID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T02:34:01.460

因此，您想要日程表的 StartDate 和明天之间每天少于一个实例的日程表吗？以下是如何实现这一目标的粗略想法：

```
DateTime tomorrow = DateTime.Now.AddDays(1);
var skeds = from sked in context.Schedules
            join instance in context.ScheduleInstances
                 on sked.ID equals instance.ScheduleID into g
            let instances = g.Where(x => x.InstanceDate >= sked.StartDate &&
                                         x.InstanceDate <= tomorrow)
            where (sked.StartDate <= tomorrow) &&
                  (sked.EndDate >= tomorrow) &&
                  (instances.Count() < (tomorrow - sked.StartDate).Days)
            select sked; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:39:43.010

试试这个：（未经测试）

```
var skeds = from sked in context.Schedules
            from instance in context.ScheduleInstances
            where (sked.ID == instance.ScheduleID) && ((sked.StartDate <= DateTime.Now) && sked.EndDate >= DateTime.Now))
            select sked.ID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T18:08:40.120

一方面，我应该采用 KISS 原则。另一方面，我有三个查询而不是一个。但它有效！

```
 var instances = from inst in context.ScheduleInstances
                        where (inst.StartDateTime >= DateTime.Now)
                        && (inst.StartDateTime < tomorrow)
                        select inst;

        var skeds = from sked in context.Schedules
                    where (sked.StartDate <= DateTime.Now)
                    && (sked.EndDate >= tomorrow)
                    select sked;

        var none = from sked in skeds
                   join inst in instances
                   on sked.ID equals inst.ScheduleID
                   into tg
                   from tcheck in tg.DefaultIfEmpty()
                   where tcheck == null
                   select sked; 
```

# sml - 我们如何在参数中表示元组列表

> ID：12982772
> 
> 赞同：0
> 
> 时间：2012-10-19T21:34:38.470
> 
> 标签：sml, smlnj

在 sml 中，我们通过 l::ls 将整数或字符串列表定义为参数，这有助于我们定义任意长度的列表，然后我们可以与 = 或 > 或 < 进行比较。我们如何以类似的方式表示元组？比如我会写，

```
fun delete(x,l::ls)=if x=l then delete(x,ls) else l::delete(x,ls) 
```

我怎样才能为元组写类似的东西？

请注意，我什至需要比较元组的各个元素：即 (a1,b1)>(a2,b2) if b1>b2 所以一些只能像上面那样删除的排序是不够的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:51:20.923

您可以使用通常的形式直接在元组上进行模式匹配`(x, y)`。

您的`delete`函数适用于任何`'a list`类型，因此它也适用于元组列表。这是一个基于元组中的第一个值过滤列表的示例：

```
fun deleteByFirst(x0, []) = []
  | deleteByFirst(x0, (x, y)::ls) = 
    if x = x0 
    then deleteByFirst(x0, ls) 
    else (x, y)::deleteByFirst(x0, ls) 
```

# asp.net-mvc - 阅读表单发布数据与强类型视图

> ID：12982773
> 
> 赞同：0
> 
> 时间：2012-10-19T21:34:38.937
> 
> 标签：asp.net-mvc

我有一组包含输入元素的 HTML 页面。我正在将它们转换为`MVC Views`.

考虑代码的性能和清洁度。正确的做法是什么，

1.  处理表单作为发布的 FormCollection，或

2.  创建强类型视图以从模型中获取输入值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:48:15.553

您可以使用 TextBoxFor 的重载来设置/覆盖输入元素属性：

```
@Html.TextBoxFor(m => m.Name, new { @Value = "0", readonly="readonly" @class="cssClass"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:23:39.270

使用 HTML 助手的一个优点是它可以更好地在编译时检查您的视图（允许您在构建时而不是在运行时查找错误），并且在 Visual Studio 中编辑视图模板时还支持更丰富的智能感知。

另一个优点可能是 HTML 帮助程序允许您在 HTML 标记上设置任何自定义属性。您可以通过传入字典或使用类似以下的匿名类型来使用帮助程序来做到这一点。

```
@Html.TextArea("FirstName", Model.FirstName, new { parameter = "value" }); 
```

[来源 1](http://weblogs.asp.net/scottgu/archive/2010/01/10/asp-net-mvc-2-strongly-typed-html-helpers.aspx)

[来源 2](http://dotnet.dzone.com/articles/aspnet-mvc-html-helpers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T23:37:58.273

这实际上是一个好问题..我不知道是谁投了反对票...在我看来，严格的视图模型传播者太多了。

在与 MVC 合作了一段时间后，我的观点是，对于非常简单的事情，@Html 助手工作得很好......但是它们导致了一种思考网页/服务器交互的方式，从长远来看这是有限的，尤其是对于更多复杂的用途。它使您可以严重依赖不显眼的验证，而不必了解验证在客户端上的工作原理。这对入门级程序员来说非常有用...就像我曾经一样...但是至少不了解 jquery 验证库最终会妨碍您. 进行任何严肃的 Web/Web 应用程序开发，其中验证比检查是否需要值更复杂，变得更加困难。此外，如果您更新它们，您还依赖 Microsoft 来保持他们的验证库与 jquery 验证库同步（我

此外，您需要考虑如果您正在使用任何前端库，以及它们中的任何一个是否不能很好地与这些帮助程序的输出配合使用（引导程序是一个值得注意的）。话虽这么说，表单集合更快，限制更少......使用它和纯验证库将更容易，更具表现力......让您编写任何您想要的代码。毕竟..在服务器端编写 if(!String.IsNullorEmpty()) 或除客户端之外您需要的任何类型的验证有多难。

# ruby-on-rails - 使用设备的智能手机登录

> ID：12982775
> 
> 赞同：0
> 
> 时间：2012-10-19T21:35:03.953
> 
> 标签：ruby-on-rails, ruby, cordova, smartphone

据我了解，基于网站创建智能手机应用程序只是为网站创建一个 API，并以 XML、JSON 格式输出数据。在我的例子中，JSON 有 Ruby on Rails，它内置了它。理论上，我所要做的就是读取 event.json 页面并读取属性，然后在 phonegap 上读取它并从中构建逻辑。

但是，在我的手机应用程序中，我希望允许用户在进入之前登录，实际上在网络基础上，我正在使用设计 gem 来管理我的用户管理。我应该如何允许用户使用 phonegap 从设备登录？我是否应该阅读展示所有用户的 API JSON，但这可能会导致很多安全问题，是否有关于该特定问题的设备文档，或者我应该报废设备并从头开始制作身份验证系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:26:36.367

Devise 提供了一个用于登录的身份验证令牌。这适用于 JSON API，因为您可以设置标头以包含身份验证令牌以识别用户。您的登录表单只负责从有效凭据中获取身份验证令牌。SSL 可以帮助保护网络上的这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:07:15.900

我创建了一个基于[rack_iphone](https://github.com/meetme2meat/rack_iphone)的 Gem来存储会话

在**localStorage**中以及从主屏幕快捷方式打开应用程序时

应用程序从**localStorage**获取 cookie（如果存在）并将其发送到服务器

希望这对你有用

# python - 向多个类添加多个方法的 Pythonic 方式？

> ID：12982777
> 
> 赞同：4
> 
> 时间：2012-10-19T21:35:09.193
> 
> 标签：python, inheritance, styles, decorator

将几个相同的方法添加到多个类中最 Pythonic 的方法是什么？

* * *

我可以使用类装饰器，但这似乎带来了相当多的复杂性，并且比其他方法更难编写和阅读。

我可以创建一个包含所有方法的基类，并让其他类继承，但是对于某些类，我很想允许多重继承，我经常阅读的是要避免或最小化。此外，“is-a”关系不适用。

我还可以将它们从方法更改为使它们成为独立函数，这些函数只期望它们的值通过鸭子类型提供适当的属性。这在某些方面是干净的，但它不是面向对象的，并且在何时可以在该类型的对象上使用函数时不太清楚。

我可以使用委托，但这要求所有想要调用的类都有调用辅助类方法的方法。这将使代码库比其他选项长得多，并且每次我想向助手类添加新函数时都需要添加一个委托方法。

我知道在某些情况下，将另一个类的实例作为属性很好地工作，但它并不总是干净地工作，并且会使调用变得比其他情况更复杂。

在玩了一会儿之后，即使它导致多重继承，我也倾向于继承。但是我犹豫了，因为大量的文本非常强烈地警告不要允许多重继承，并且一些（例如[维基百科](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29#Code_reuse)条目）甚至说继承只是为了代码重用，例如应该最小化。

* * *

举个例子可能会更清楚，所以对于一个简化的例子来说，我们正在处理许多不同的类，这些类都在 x、y 网格上具有一个位置。有很多操作我们可能希望为具有 x、y 位置的所有事物创建方法，例如获取两个此类实体之间的距离、或者它们之间的相对方向、中点等的方法。

让所有此类类访问这些仅依赖于将 x 和 y 作为属性的方法的最 Pythonic 方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:41:32.900

对于您的具体示例，我会尝试利用鸭式打字。编写简单的函数，接收假定具有的对象`x`和`y`属性：

```
def distance(a, b):
    """ 
    Returns distance between `a` and `b`.
    `a` and `b` should have `x` and `y` attributes.
    """

    return math.sqrt((a.x-b.x)**2 + (a.y-b.y)**2) 
```

非常简单。为了清楚地说明如何使用该功能，只需将其记录下来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:21:13.200

普通的旧函数最适合这个问题。例如，而不是这个......

```
class BaseGeoObject:

  def distanceFromZeroZero(self):
    return math.sqrt(self.x()**2 + self.y()**2)
  ... 
```

...只有这样的功能：

```
def distanceFromZeroZero(point):
  return math.sqrt(point.x()**2 + point.y()**2) 
```

这是一个很好的解决方案，因为它也很容易测试 - 不必为了执行特定功能而进行子类化。

# python - 瓶子导致python程序崩溃？使用线程、队列和分叉的简单实现

> ID：12982789
> 
> 赞同：1
> 
> 时间：2012-10-19T21:36:12.070
> 
> 标签：python

我试图尽可能简化这一点，但我仍然遇到错误。我有一个简单的 http 服务器（瓶子），它在收到一个 post 请求后执行一个应该快速分叉的函数。父进程简单地返回一个作业 ID 并关闭，而子进程继续处理相同的数据（这是一个 URL 列表）。我已经删除了所有输入和输出函数并对数据进行了硬编码，但我的程序仍然崩溃。有趣的是，当我将程序更改为直接在命令行运行而不是启动 http 服务器并等待瓶子执行它时，一切正常！

```
#!/usr/bin/python
#This is a comment
import sys, time, bottle, os
from threading import Thread
from Queue import Queue
from bottle import route, run, request, abort

num_fetch_threads = 2
url_queue = Queue()

def fetchURLContent(i, q):
  while True:
    #print '%s: Looking for URLs in queue' % i
    url = q.get()
    #print 'URL found: %s' % url[0]
    q.task_done()
    time.sleep(1)

@route('/', method='POST') # or @route('/login', method='POST')
def main():

  urls = ['http://www.yahoo.com', 'http://www.google.com']

  newpid = os.fork()
  if newpid == 0:

    for i in range(num_fetch_threads):
      worker = Thread(target=fetchURLContent, args=(i, url_queue))
      worker.setDaemon(True)
      worker.start()
    print 'Queuing: ', url
    for url in urls:
      url_queue.put(url)
    time.sleep(2)
    print 'main thread waiting...'
    url_queue.join()
    print 'Done'

  else:
    print "Your job id is 5"
    return
def webServer():
  run(host='33.33.33.10', port=8080)

if __name__ == "__main__":
  print 'Listening on 8080...'
  webServer() 
```

我得到的错误信息如下：

```
Listening on 8080...
Bottle v0.11.3 server starting up (using WSGIRefServer())...
Listening on http://33.33.33.10:8080/
Hit Ctrl-C to quit.

33.33.33.1 - - [19/Oct/2012 21:21:24] "POST / HTTP/1.1" 200 0
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 86, in run
    self.finish_response()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 128, in finish_response
    self.finish_content()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 246, in finish_content
    self.send_headers()
  9 url_queue = Queue()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 268, in send_headers
    self.send_preamble()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 189, in send_preamble
    self._write('HTTP/%s %s\r\n' % (self.http_version,self.status))
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 389, in _write
    self.stdout.write(data)
  File "/usr/lib/python2.7/socket.py", line 324, in write
    self.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
----------------------------------------
Exception happened during processing of request from ('33.33.33.1', 57615)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 284, in _handle_request_noblock
    self.process_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe
---------------------------------------- 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T21:55:03.727

您的 main() 函数立即终止而不返回任何内容。Bottle 向套接字写入一个空的 HTTP 响应，然后 Web 服务器关闭连接。

您的分叉进程在 main() 中停留的时间稍长一些，但随后也会终止并导致 Bottle 向已关闭的套接字写入另一个空响应。这就是你得到的错误（断管）。

在那个时候分叉是行不通的。HTTP 不允许每个请求有多个响应。您可以阻塞直到所有工作完成然后发送响应，或者立即发送响应并在不同的线程中完成工作。

# python - 内插数列

> ID：12982792
> 
> 赞同：2
> 
> 时间：2012-10-19T21:36:44.207
> 
> 标签：python, math, pypy

我正在尝试完成一个不完整的数字列表，我找不到任何 Pythonic 方式来完成它。我有一个从 1 到 31 的天序列，并且对于每一天，我都有一个浮点值。

```
#dictionnary{day: value}
monthvalues = {1: 1.12, 2: 3.24, 3: 2.23, 5: 2.10, 7: 4.97} etc.. to 31st day 
```

但是我的数据不完整，有些天不见了！因此我想以这种方式在数学上填充缺失的图片：

样本月份1：

```
{16: 2.00, 18: 4.00}
#==> I want to add to the dictionnary 17: 3.00 
```

样本月份2：

```
{10: 2.00, 14: 4.00}
#==> I want to add to the dictionnary 11: 2.25, 12: 2.50, 13: 2.75 
```

听起来很简单，但我有数百万行要从不完整的 sql 数据库中处理，目前我完全迷失在 xrange() 循环中......也许数学库中有一个方法，但我找不到它。

感谢您的帮助！

**编辑：** 我想插入数字，但据我所知，只有 numpy/scipy 具有这种数学函数，并且我使用的是与 numpy/scipy 不兼容的 Pypy。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:59:34.260

考虑使用[`pandas`](http://pandas.pydata.org/)这个，该[`interpolate`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.interpolate.html?highlight=interpolate#pandas.Series.interpolate)方法很容易：

```
In [502]: import pandas    

In [503]: s = pandas.Series({1: 1.12, 2: 3.24, 3: 2.23,5: 2.10,7:4.97}, index=range(1,8))

In [504]: s
Out[504]: 
1    1.12
2    3.24
3    2.23
4     NaN
5    2.10
6     NaN
7    4.97

In [505]: s.interpolate()
Out[505]: 
1    1.120
2    3.240
3    2.230
4    2.165
5    2.100
6    3.535
7    4.970 
```

并且有多个缺失值：

```
In [506]: s2 = pandas.Series({10: 2.00, 14: 4.00},index=range(10,15))

In [507]: s2
Out[507]: 
10     2
11   NaN
12   NaN
13   NaN
14     4

In [508]: s2.interpolate()
Out[508]: 
10    2.0
11    2.5
12    3.0
13    3.5
14    4.0 
```

如果需要，您可以将其转换回字典：

```
In [511]: s2.to_dict()
Out[511]: {10: 2.0, 11: 2.5, 12: 3.0, 13: 3.5, 14: 4.0} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:53:09.410

您只需要一些简单的循环和良好的旧编程逻辑。此逻辑中的一个警告是，您需要一个开始和结束编号才能使其工作。我不知道这对您的数据是否有意义，但插值需要这样做。

设置：

```
# Keeps track of the last "seen" day
lastday=0

# Default 1st day if missing
if 1 not in monthvalues:
  monthvalues[1] = 1.23 #you need a default

# Default 31st day if missing
if 31 not in monthvalues:
  monthvalues[31] = 1.23 #you need a default 
```

加工：

```
# Loop from 1 to 31
for thisday in range(1,32):

  # If we do not encounter thisday in the monthvalues, then skip and keep looping
  if thisday not in monthvalues:
    continue

  # How far ago was the last day seen?
  gap = thisday - lastday

  # If the last day was more than 1 ago, it means there is at least one day amis
  if gap > 1:

    # This is the amount of the last "seen" day
    last_amt = monthvalues[lastday]

    # this is the difference between the current day and the last day
    diff = monthvalues[thisday] - last_amt

    # This is how much you want to interpolate per day in-between
    amt_per_day = diff/gap

    # there is a gap of missing days, let's fill them
    # Start at 1 because we start at the day after the last seen day
    for n in range(1, gap):

      # Fill the missing days with an interpolated value
      monthvalues[lastday+n] = last_amt + amt_per_day * n

  # For the next iteration of the loop, this is the last seen day.
  lastday = thisday 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T03:24:39.787

我认为使用[scipy 的插值方法](https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.interpolate.interp1d.html)是一种聪明的方法

首先将您的数据转换为易于操作的格式：

```
monthvalue = {1: 1.12, 2: 3.24, 3: 2.23, 5: 2.10, 7: 4.97, 6: 3.10, 10: 3.3}
X = sorted(monthvalue.keys())
Y = [monthvalue[x] for x in X] 
```

然后创建线性插值函数并输出中间值

```
# interpolate function
f = interp1d(X, Y, kind='linear')

x_new = range(X[0], X[-1]+1, 1)
for x in x_new:
    print "%s: %s" % (x, f(x)) 
```

结果：

```
1: 1.12
2: 3.24
3: 2.23
4: 2.165
5: 2.1
6: 3.1
7: 4.97
8: 4.41333333333
9: 3.85666666667
10: 3.3 
```

# c# - 如何在 SSIS 数据流中将表作为存储的过程参数传递

> ID：12982794
> 
> 赞同：4
> 
> 时间：2012-10-19T21:36:58.680
> 
> 标签：c#, ssis, bids

我正在尝试编写一个 SSIS 包来将数据从一个数据库传输到另一个数据库（直接复制，我传输的表具有相同的结构）。我正在选择记录的子集（自上次运行包以来已创建或修改的记录），我试图将它们转储到目标数据库上的存储过程中，该存储过程将确定哪些记录需要更新和需要插入哪些记录。

我该如何在数据流对象中执行此操作，或者将记录从对象中传输出来，以便我可以使用执行 SQL 任务来执行此操作？

我不想使用 OLE DB 命令，因为它一次只能处理一条记录。这两个数据库位于不同位置的不同机器上，我希望这个包尽可能少地运行，因为我正在编写它来替换一个运行时间太长的 DTS 包（它会删除整个目标表的内容并重新复制所有内容，无论是否更改）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:45:56.910

SSIS 不支持表值参数。您要实现的目标有几种解决方法：

*   有几个第 3 方 UPSERT/MERGE 目的地，包括 CodePlex 上的这个[http://ssisctc.codeplex.com/wikipage?title=MERGE%20Destination](http://ssisctc.codeplex.com/wikipage?title=MERGE%20Destination)
*   您可以使用 OLEDB 目标将行插入服务器上的临时表，然后从执行 SQL 任务针对临时表运行存储过程。（这是我们在我目前的项目中所做的）
*   您可以编写自定义 .NET 脚本目标
*   您可以使用查找转换来查看它们是否存在于表中，然后插入不存在的行并对其他行运行 OLEDB 命令，这至少比对每一行运行它要好

# python - 查询 rdf 文件窗口

> ID：12982799
> 
> 赞同：1
> 
> 时间：2012-10-19T21:37:33.493
> 
> 标签：python, windows, rdf

我想知道如何在 Windows 上使用 Sparql 查询 RDF 文件。我正在使用 python 2.7 并且在 linux os.system(roqet...) 上是否有类似于 Windows 上的 roqet (rasqal) 的东西，例如 curl？，我可以使用 rdflib 或类似的东西进行此查询吗？这个rdf不在线非常重要，我想通过文件在本地执行这个查询。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:44:42.757

看看[Apache Jena提供的](http://jena.apache.org)[ARQ](http://jena.apache.org/documentation/query/cmds.html)工具​​，如果安装了 Java，它将在 Windows 上运行

或者看看dotNetRDF提供的[rdfQuery工具，](http://www.dotnetrdf.org/content.asp?pageID=rdfQuery)[如果](http://www.dotnetrdf.org)安装了 .Net 4.0 Full，它将在 Windows 上运行

*免责声明*- 我是上述两个项目的开发人员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:09:46.920

如果您的文件相当小（少于 100,000 个三元组），我强烈推荐[RDFlib](https://github.com/RDFLib/rdflib)，正如您所建议的那样。它可以在您安装了 Python 的任何地方使用，并允许充分使用 SPARQL（选择和更新/删除语句），还提供了许多其他方便的功能，可以完全在内存中的本地文件上使用。

使用 RDFlib 的好处在于启动和运行它只需要添加 Python 库，因此安装非常简单。

# python - Python加速从超大字符串中检索数据

> ID：12982805
> 
> 赞同：1
> 
> 时间：2012-10-19T21:38:25.083
> 
> 标签：python, regex, performance, python-2.6, substitution

往下看：

我有一个列表，我在尝试编辑它时将其转换为一个非常长的字符串，因为您可以收集它称为 tempString。到目前为止它的工作原理只是需要很长时间才能运行，可能是因为它是几个不同的正则表达式子。它们如下：

```
tempString = ','.join(str(n) for n in coords)
tempString = re.sub(',{2,6}', '_', tempString)
tempString = re.sub("[^0-9\-\.\_]", ",", tempString)
tempString = re.sub(',+', ',', tempString)
clean1 = re.findall(('[-+]?[0-9]*\.?[0-9]+,[-+]?[0-9]*\.?[0-9]+,'
                 '[-+]?[0-9]*\.?[0-9]+'), tempString)
tempString = '_'.join(str(n) for n in clean1)
tempString = re.sub(',', ' ', tempString) 
```

基本上它是一个长字符串，包含逗号和大约 1-5 百万组 4 个浮点数/整数（两者可能的混合），：

```
-5.65500020981,6.88999986649,-0.454999923706,1,,,-5.65500020981,6.95499992371,-0.454999923706,1,,, 
```

我不需要/想要的每组中的第 4 个数字，我实际上只是想将字符串拆分为一个列表，每个列表中有 3 个浮点数，每个浮点数由空格分隔。

上面的代码完美无缺，但你可以想象在大字符串上相当耗时。

我在这里做了很多研究以寻求解决方案，但它们似乎都针对单词，即将一个单词换成另一个单词。

* * *

**编辑：** 好的，这是我目前使用的解决方案：

```
def getValues(s):
    output = []
    while s:
        # get the three values you want, discard the 3 commas, and the 
        # remainder of the string
        v1, v2, v3, _, _, _, s = s.split(',', 6)
        output.append("%s %s %s" % (v1.strip(), v2.strip(), v3.strip()))         
    return output
coords = getValues(tempString) 
```

有人有什么建议可以进一步加快速度吗？运行一些测试后，它仍然需要比我希望的更长的时间。

我一直在看 numPy，但老实说，我完全不知道如何使用它，我知道在完成上述操作并清理值之后，我可以使用 numPy 更有效地使用它们，但不确定如何NumPy 可以适用于上述情况。

The above to clean through 50k sets takes around 20 minutes, I cant imagine how long it would be on my full string of 1 million sets. I'ts just surprising that the program that originally exported the data took only around 30 secs for the 1 million sets

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:51:48.117

Based on your sample data:

```
>>> s = "-5.65500020981,6.88999986649,-0.454999923706,1,,,-5.65500020981,6.95499992371,-0.454999923706,1,,,"
>>> def getValues(s):
...     output = []
...     while s:
...         # get the three values you want, discard the 3 commas, and the 
...         # remainder of the string
...         v1, v2, v3, _, _, _, s = s.split(',', 6)
...         output.append("%s %s %s" % (v1, v2, v3))
...         
...     return output
>>> getValues(s)
['-5.65500020981 6.88999986649 -0.454999923706', '-5.65500020981 6.95499992371 -0.454999923706'] 
```

...once you have those parsed values as strings in a list you can do whatever else you need to do.

Or if you prefer, use a generator so you don't need to build the entire return string at once:

```
>>> def getValuesGen(s):
...     while s:
...         v1, v2, v3, _, _, _, s = s.split(',', 6)
...         yield "%s %s %s" % (v1, v2, v3)
>>> for v in getValuesGen(s):
...     print v
...     
... 
-5.65500020981 6.88999986649 -0.454999923706
-5.65500020981 6.95499992371 -0.454999923706 
```

You may also want to try an approach that pre-splits your long list on the `,,,` set of commas instead of continually building and processing a set of shorter strings, like:

```
>>> def getValues(s):
...     # split your long string into a list of chunked strings
...     strList = s.split(",,,")
...     for chunk in strList:
...         if chunk:
...         # ...then just parse apart each individual set of data values
...             vals = chunk.split(',')
...             yield "%s %s %s" % (vals[0], vals[1], vals[2])
>>> for v in getValues(s10):
...     print v
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454
-5.1  6.8  -0.454 
```

At some point when you're dealing with huge data sets like this and have speed issues it starts to make sense to push things down into modules that are doing the hard work in C, like NumPy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:51:40.940

One way to reduce the memory drain without having to change anything in the regex would be to use the `re.finditer()` method instead of `re.findall()`. This would iterate through the values one-by-one rather than reading the entire string into a single list object. [http://docs.python.org/library/re.html#re.finditer](http://docs.python.org/library/re.html#re.finditer)

# javascript - 对 VB 回发函数的 Javascript 调用导致意外调用错误

> ID：12982810
> 
> 赞同：0
> 
> 时间：2012-10-19T21:38:53.033
> 
> 标签：javascript, asp.net, ajax, vb.net, modalpopupextender

这是VB代码：

```
 Dim button As New Button
 Dim xpanel As New Panel
 button.Text = "Submit"
 button.ID = "button"
 button.Height = "40"
 button.Attributes.Add("Autopostback", "true")
 button.Attributes.Add("Onclick", "Submit_Click") <----commented
 button.Attributes.Add("RunAt", "server")
 Dim trigger As New AsyncPostBackTrigger()
 trigger.ControlID = "button"
 trigger.EventName = "Submit_Click"
 AddHandler button.Click, AddressOf Submit_Click
 xpanel.Controls.Add(button)
 Dim literalx As New Literal
 submitplaceholder.Controls.Add(literalx)
 submitplaceholder.Controls.Add(xpanel) 
```

设置是：从更新面板内部，单击一个按钮，该按钮会在页面底部的隐藏按钮上触发 javascript（thatbutton.onclick 函数），然后依次在 ajaxtoolkit:ModalPopupExtender 上执行“单击”，导致弹出一个模式窗口，该窗口在 page_load 上使用上面的按钮动态填充（以及其他信息，但这对此并不重要）。到目前为止，还没有回帖。

现在我们点击了那个页面的按钮。我希望它回发并调用函数 Submit_Click。我不在乎这个函数实际上被调用了什么，我知道 _Click 是保留的，但尽管如此：它会触发函数但总是出错，这会导致不良行为。

有些事情不对劲，我这辈子都想不出要尝试的其他事情。使用属性 O​​nClick 然后使其自动回发似乎不适用于动态填充控件。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:05:26.653

button.Attributes 是 HTML 属性的集合，因此不会按您想要的方式工作。

试试这个：

```
button.UseSubmitBehavior = True
AddHandler button.Click, AddressOf  Submit_Click 
```

代替

```
button.Attributes.Add("Autopostback", "true")
button.Attributes.Add("Onclick", "Submit_Click") <----commented
button.Attributes.Add("RunAt", "server") 
```

# vb.net - 如何在 VB.NET 2.0 的网格视图中选择一行并处理事件

> ID：12982811
> 
> 赞同：0
> 
> 时间：2012-10-19T21:38:58.133
> 
> 标签：vb.net, gridview

晚上好，我希望能够选择一个网格视图行，并在发生这种情况时在后面的代码中触发一个事件，以便我可以处理它。我尝试使用事件 SelectedIndexChanged 和 SelectedIndexChanging ，但它永远不会到达那里。我需要设置任何属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:57:09.083

你知道你必须启用`autogenerateselectbutton = true`. [在这里查看更多](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanging.aspx)

```
<asp:GridVew id="Gridview1" 
   autogenerateselectbutton="True">

</asp:GridVew > 
```

事件处理程序

```
 Sub GridView1_SelectedIndexChanged(ByVal sender As Object, ByVal e As GridViewSelectEventArgs)

       Dim row As GridViewRow = GridView1.SelectedRow

 End Sub 
```

# visual-studio-2012 - ASP.Net Web API RTM 2012 中的 OData 支持

> ID：12982825
> 
> 赞同：1
> 
> 时间：2012-10-19T21:40:21.503
> 
> 标签：visual-studio-2012, asp.net-web-api, odata

如何使用 Visual Studio 2012 在 ASP .Net Web API 中实现 OData？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:42:36.653

使用 Web API OData 预览包 - [http://nuget.org/packages/Microsoft.AspNet.WebApi.OData](http://nuget.org/packages/Microsoft.AspNet.WebApi.OData)

您可以在此处找到 Alex James 的概述文章 - [http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)

目前**Web API 中没有对 OData 的完全支持**。暂时你能做的最好的就是使用上面的预览包。

它在 Web API RTM 发布的同一天发布，为 OData 提供简单的支持并预览一些功能（这就是它被称为*alpha*的原因）。完整套餐将于今年秋季晚些时候推出。

# java - Oracle 示例中的 Java Applet 说“applet.function 不是函数”

> ID：12982826
> 
> 赞同：0
> 
> 时间：2012-10-19T21:40:23.917
> 
> 标签：java, javascript, applet

我正在尝试从[这个](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)Oracle 示例运行 Java Applet，以便从 Javascript 调用 applet 的方法。我没有对其进行任何更改。当js调用applet的函数时，什么也没发生，但是在js控制台中出现错误`mathApplet.getGreeting is not a function`（在Firefox中）。这在 Chrome 中也不起作用。这是我第一次处理 Java，所以我可能会错过一些重要的事情。我正在使用 Intellij Idea。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:57:48.617

实际上，有两个错误 - 首先，我忘记将 .jnlp 文件放在正确的位置，其次（这很奇怪），这是我在稍微修改代码后得到的 -`document.writeln("...")`在调用 applet 的函数导致 applet 无法工作之前。

# php - PHP函数代码错误

> ID：12982828
> 
> 赞同：-1
> 
> 时间：2012-10-19T21:40:24.917
> 
> 标签：php, jquery, html

下面是我的一个 php 文件中的代码。它似乎有编译错误。我是 php 新手。

谁能告诉我下面的php函数代码有什么问题：

```
function eshop_extras_checkout($echo){

    $echo .= '<script>

    $(".formGroup").hide();
$('#chooseForm input:checkbox').on('change', function() {
    if($(this).is(':checked')) {
        $("#" + $(this).val()).show();
    }
    else {
        $("#" + $(this).val()).hide();
    }   
});
​   
    </script>';

    $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

     $echo .= ' <form id="chooseForm">
    <input type="checkbox" name="form1" value="form1"> Form1<br>
    <input type="checkbox" name="form1" value="form2"> Form2<br>
</form>

<form id="form1" class="formGroup">
    <h2>FORM 1</h2>
    <label>Name</label><input type="text"> <br>
    <label>Address</label><input type="text">
</form>

<form id="form2" class="formGroup">
    <h2>FORM 2</h2>
    <label>Username</label><input type="text"> <br>
</form>';

    $echo .= '<legend>Articles Order Form</legend>' . "\n";

    return $echo;

} 
```

**这是我浏览器中的错误：**

> 解析错误：语法错误，第 43 行 /home/harris12/public_html/somedomain.com/wp-content/plugins/eshop-extras/eshop-extras.php 中的意外 T_IF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:43:44.823

在这一行

```
$('#chooseForm input:checkbox').on('change', function() { 
```

您的代码中有 ' 字符，因此结束了 echo-command。这就是为什么它的解释和 php 代码显然会导致错误。尝试用 \' 转义它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T21:43:25.543

您需要转义 ' （撇号）

```
$('#chooseForm input:checkbox').on('change', function() { 
```

因为它打破了你的第一个回声语句

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:49:18.570

您要连接的第一个字符串在`$echo`单引号内有单引号。

```
if($(this).is(':checked')) 
```

尝试将它们更改为双引号。

是否有理由必须通过连接来构建此字符串？实际上，您似乎根本没有在 PHP 中执行任何操作。您应该以相反的方式执行此操作，并保留所有这些标记，但将任何实际的 PHP 代码散布在`<? ... ?>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T21:50:24.070

试试这样：

```
 <?php
function eshop_extras_checkout($echo){

    $echo .= '<script>

    $(".formGroup").hide();
    $("#chooseForm input:checkbox").on("change", function() {
        if($(this).is(":checked")) {
            $("#" + $(this).val()).show();
        }
        else {
            $("#" + $(this).val()).hide();
        }
    });
    ​
</script>';

    $echo .= '<fieldset class="eshop eshop_extra">' . "\n";

    $echo .= ' <form id="chooseForm">
        <input type="checkbox" name="form1" value="form1"> Form1<br>
        <input type="checkbox" name="form1" value="form2"> Form2<br>
    </form>

    <form id="form1" class="formGroup">
        <h2>FORM 1</h2>
        <label>Name</label><input type="text"> <br>
        <label>Address</label><input type="text">
    </form>

    <form id="form2" class="formGroup">
        <h2>FORM 2</h2>
        <label>Username</label><input type="text"> <br>
    </form>';

    $echo .= '<legend>Articles Order Form</legend>' . "\n";

    return $echo;
}
    ?> 
```

您应该转义撇号或使用双引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T21:56:39.750

这是使用 HEREDOC 的重写：

```
function eshop_extras_checkout($output){
  $output .= <<<ESHOP_SCRIPT
<script>
   $(".formGroup").hide();
  $('#chooseForm input:checkbox').on('change', function() {
  if($(this).is(':checked')) {
    $("#" + $(this).val()).show();
  }
  else {
     $("#" + $(this).val()).hide();
  }   
  });
</script>
<fieldset class="eshop eshop_extra">
 <form id="chooseForm">
  <input type="checkbox" name="form1" value="form1" /> Form1<br />
  <input type="checkbox" name="form1" value="form2" /> Form2<br />
 </form>
 <form id="form1" class="formGroup">
  <h2>FORM 1</h2>
  <label>Name</label><input type="text" /> <br>
  <label>Address</label><input type="text" />
 </form>
 <form id="form2" class="formGroup">
  <h2>FORM 2</h2>
  <label>Username</label><input type="text" /> <br>
 </form>
 <legend>Articles Order Form</legend>
 ESHOP_SCRIPT;
 return $output;
} 
```

# haskell - Agda 中固定长度向量函数中的隐式长度参数

> ID：12982829
> 
> 赞同：6
> 
> 时间：2012-10-19T21:40:25.600
> 
> 标签：haskell, functional-programming, agda, dependent-type

我写了一个 Agda 函数`prefixApp`，它将向量函数应用于向量的前缀：

```
split : {A : Set}{m n : Nat} -> Vec A (n + m) -> (Vec A n) * (Vec A m) 
split {_} {_} {zero}  xs        = ( [] , xs )
split {_} {_} {suc _} (x :: xs) with split xs 
... | ( ys , zs ) = ( (x :: ys) , zs )

prefixApp : {A : Set}{n m k : Nat} -> (Vec A n -> Vec A m) -> Vec A (n + k) -> Vec A (m + k)
prefixApp f xs with split xs
... | ( ys , zs ) = f ys ++ zs 
```

我喜欢这样一个事实，它`prefixApp`可以在不明确提供长度参数的情况下使用，例如

```
gate : Vec Bool 4 -> Vec Bool 3
gate = prefixApp xorV 
```

（`xorV : Vec Bool 2 -> Vec Bool 1`向量异或函数在哪里）

不幸的是，我不知道如何编写一个`postfixApp`可以在不显式提供长度参数的情况下使用的函数。到目前为止，我的函数定义如下所示：

```
postfixApp : {A : Set}{n m k : Nat} -> (Vec A n -> Vec A m) -> Vec A (k + n) -> Vec A (k + m)
postfixApp {_} {_} {_} {k} f xs with split {_} {_} {k} xs
... | ( ys , zs ) = ys ++ (f zs) 
```

然而，这似乎`postfixApp`总是需要一个长度参数。例如

```
gate : Vec Bool 4 -> Vec Bool 3
gate = postfixApp {k = 2} xorV 
```

有谁知道如何消除这种不对称性，即如何编写一个`postfixApp`没有显式长度参数的函数。我想，我需要另一个`split`-function？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T02:30:59.747

有了你的`prefixApp`，你有

```
prefixApp : {A : Set}{n m k : Nat} -> (Vec A n -> Vec A m) -> Vec A (n + k) -> Vec A (m + k) 
```

然后你给它传递一个 function ，所以它通过简单的统一`Vec Bool 2 -> Vec Bool 1`知道这一点。然后，因为加法是通过对左参数的递归定义的，所以函数类型的其余部分从 减少到。然后 Agda 可以应用以下的直接统一（扩展数字文字）：`n = 2``m = 1``Vec A (2 + k) -> Vec A (1 + k)``Vec A (suc (suc k)) -> Vec A (suc k)`

```
Vec A (suc (suc k)) -> Vec A (suc k)
Vec Bool (suc (suc (suc (suc zero)))) -> Vec Bool (suc (suc (suc zero))) 
```

推断`k = 2`。

再看另一张：

```
postfixApp : {A : Set}{n m k : Nat} -> (Vec A n -> Vec A m) -> Vec A (k + n) -> Vec A (k + m) 
```

唯一的区别是你的`xorV`力量`n`和的已知数量`m`是 2 和 1，但这只会使你的函数类型的其余部分变成`Vec A (k + 2) -> Vec A (k + 1)`. 这种类型不会进一步减少，因为加法是由*第一个*参数的递归定义的，`k`此时尚不清楚。然后你尝试`k + 2`用`4`和统一`k + 1`，`3`Agda 吐出黄色。“但很明显`k = 2`，”你说！你知道这一点是因为你懂数学，并且可以应用减法和其他简单的原理，但 Agda 不知道这一点。`_+_`只是它的另一个功能，统一任意功能应用程序很难。如果我要求你`(2 + x) * (2 + y)`与`697`， 例如？是否应该期望类型检查器分解数字并抱怨没有唯一的分解？我猜因为乘法是可交换的，除非你限制边，否则一般不会，但 Agda 是否应该知道乘法是可交换的？

无论如何，所以 Agda 只知道如何进行统一，这基本上将“结构”数量相互匹配。数据构造函数和类型构造函数一样具有这种结构质量，因此它们都可以明确统一。当涉及到比这更奇特的事情时，您会遇到“高阶统一”问题，通常无法解决。Agda 实现了一种称为米勒模式统一的奇特算法，它可以解决一些受限制的奇特情况，但有些事情它无法做到，而您的函数应用程序就是其中之一。

如果您查看标准库，您会发现大多数情况下，类型涉及自然数的加法，其中一个加数（左侧）通常不会是隐式的，除非另一个参数完全指定它（如你的案例`prefixApp`）。

至于如何处理它，一般来说没有太多可以解决的问题。一段时间后，您对 Agda 可以推断什么和不能推断什么有了一定的了解，然后停止隐含不可推断的论点。您可以定义 的“对称”版本`_+_`，但最终使用它的双方同样痛苦，所以我也不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T13:18:44.383

实际上，可以用几乎相同的类型来定义这个函数。

```
postfixApp : {A : Set}{n m k : ℕ} -> (Vec A n -> Vec A m) -> Vec A (n + k) -> Vec A (k + m)
postfixApp f xs with splitAt' (reverse xs)
... | ys , zs = reverse zs ++ f (reverse ys)

test-func : Vec Bool 3 -> Vec Bool 2
test-func (x1 ∷ x2 ∷ x3 ∷ []) = (x1 ∧ x2) ∷ (x2 ∨ x3) ∷ []

test : postfixApp test-func (false ∷ false ∷ true ∷ false ∷ true ∷ [])
                           ≡ false ∷ false ∷ false ∷ true ∷ []
test = refl 
```

整个代码： http: [//lpaste.net/107176](http://lpaste.net/107176)

# facebook - 在R中重新编码facebook时间戳

> ID：12982830
> 
> 赞同：0
> 
> 时间：2012-10-19T21:40:25.983
> 
> 标签：facebook, r

如何从 facebook api pull 重新编码时间戳矢量，该 api pull 是一个类似于以下时间/日期变量的因子？

```
[[1] 2012-10-19T19:52:43+0000 
```

我尝试了以下方法，但我只得到了 NA：

```
strptime(as.character(time), "%Y-%b-%dT%H:%M:%S+0000") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:43:20.553

你的格式不对。`%b`应该`%m`是。

```
> strptime("2012-10-19T19:52:43+0000", "%Y-%m-%dT%H:%M:%S+0000")
[1] "2012-10-19 19:52:43" 
```

# ubuntu - 在 Amazon EC2 ubuntu 上获取 Microsoft Calibri 字体

> ID：12982832
> 
> 赞同：1
> 
> 时间：2012-10-19T21:40:32.060
> 
> 标签：ubuntu, amazon-ec2, jasper-reports

我正在尝试在我的 Amazon EC2 实例上的 JasperReports 中使用 Calibri 字体。我怎样才能让它工作？我试过了...

```
sudo apt-get install ttf-mscorefonts-installer
Reading package lists... Done
Building dependency tree
Reading state information... Done
Package ttf-mscorefonts-installer is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'ttf-mscorefonts-installer' has no installation candidate 
```

我需要能够从访问此字体以获取报告的 PHP 方法启动 JVM，但我的服务器上没有它。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:25:31.723

在此之后，我建议从 ~/.fonts 中删除 Calibri.ttf 但无需删除即可工作...

您需要将此添加到位于“ `/etc/apt/sources.list`”位置的源列表中：

```
deb http://us.archive.ubuntu.com/ubuntu/ lucid multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ lucid multiverse
deb http://us.archive.ubuntu.com/ubuntu/ lucid-updates multiverse
deb-src http://us.archive.ubuntu.com/ubuntu/ lucid-updates multiverse 
```

（您可以对其进行编辑，例如`sudo nano /etc/sources.list`）

然后你可以从终端使用这个命令安装包：

```
sudo apt-get install -y ttf-mscorefonts-installer 
```

这将下载并安装...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:22:39.837

利用

```
wget "http://cl.ly/0m3f0x0c252P3O3t190q/download/Calibri.ttf" -O "~/.fonts/Calibri.ttf" 
```

这会将 Calibri 字体保存到您的默认字体目录中，并且您的所有应用程序和脚本都可以将其用作普通字体。

# jenkins - 为什么黄瓜在詹金斯上总是失败，尽管测试通过了？

> ID：12982834
> 
> 赞同：2
> 
> 时间：2012-10-19T21:40:37.383
> 
> 标签：jenkins, hudson, cucumber

我的黄瓜测试在命令行上运行良好，但是当我在 Jenkins/Hudson 持续集成中运行它们时，我得到以下信息，但不知道如何修复它：

```
11 scenarios (3 skipped, 3 pending, 5 passed)
78 steps (51 skipped, 3 pending, 24 passed)
0m3.238s
Build step 'Execute shell' marked build as failure
Recording test results
Failed to send e-mail to kamilski81 because no e-mail address is known, and no default e-mail domain is configured
Failed to send e-mail to i.wooten because no e-mail address is known, and no default e-mail domain is configured
Failed to send e-mail to scott.j.rodgers because no e-mail address is known, and no default e-mail domain is configured
Sending e-mails to: dev@sc.com
Finished: FAILURE 
```

我的脚本的最后几行：

```
cucumber 
```

有人建议我添加“退出 0”，但这会破坏我的 Junit 报告，因此报告不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T15:46:19.317

我认为 cucumber 给出了非零进程退出代码，要么是因为跳过了，要么是因为待定的测试。尝试让它不运行任何跳过的，然后是任何挂起的，然后是任何跳过的或挂起的测试，并查看它给出的退出代码。要查看退出代码（在 Unix 中），请使用以下内容运行它：

`cucumber ...args to select tests... ; echo $?`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-26T19:56:45.880

如果存在未决方案， cucumber --strict 标志会导致 cucumber 返回退出代码 1（例如失败）。如果存在非零退出代码，Jenkins（或任何 CI）将失败。

我会检查您的项目中是否有 cucumber.yml 文件，因为这很可能是您的 --strict 隐藏的地方。

# ruby - rspec如何测试对外部类中特定方法的调用

> ID：12982838
> 
> 赞同：0
> 
> 时间：2012-10-19T21:40:44.963
> 
> 标签：ruby, rspec

所以我在游戏类中有一个方法......

```
def drawgrid
  @board.draw
end 
```

我想写一个测试来验证drawgrid调用@board.draw

我目前的测试看起来像这样......

```
 describe 'drawgrid method' do
    it 'should call @board.drawgrid' do

      @game.drawgrid.should be_true

      @game.drawgrid
    end
  end 
```

这是写这个的最佳/理想方式吗？有没有更好的办法？

我这样做对吗？

这对我来说似乎很模糊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:46:59.693

为此使用 should_receive：

```
@board.should_receive(:draw) 
```

# php - 将值更改为变量时出现mysql查询问题

> ID：12982839
> 
> 赞同：0
> 
> 时间：2012-10-19T21:40:47.560
> 
> 标签：php, mysql, database

```
$results = mysql_query("select * from doctorlist where assignednumber = '1231231234' "); 
```

我需要将数字 1231231234 更改为变量。如果我将其更改为下面的代码，它将不起作用。我已经在页面上显示了变量，所以我知道它已设置。

```
$results = mysql_query("select * from doctorlist where assignednumber = '$phoneNumber' "); 
```

有人可以帮忙吗。我知道这是一个小问题，但一直无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:51:00.237

也许这样拆分

```
$sql_query = "select * from doctorlist where assignednumber='$phoneNumber'";
$results = mysql_query($sql_query); 
```

或者

```
$sql_query = "select * from doctorlist where assignednumber='".$phoneNumber."' ";
$results = mysql_query($sql_query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:51:43.733

首先使用 var_dump($phoneNumber) 检查您的变量类型，而不是执行以下操作：

```
$results = mysql_query("select * from doctorlist where assignednumber = '".$phoneNumber."' "); 
```

如果您期望 Integer 转换您的变量，则提高可读性和持久性，例如：

```
(int)$phoneNumber 
```

或者如果字符串做

```
mysql_real_escape_string($phoneNumber) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:54:31.357

尝试在查询中使用变量，如下所示：

'{$phoneNumber}'

# c# - TPL 并行 For 循环错误

> ID：12982841
> 
> 赞同：3
> 
> 时间：2012-10-19T21:40:51.223
> 
> 标签：c#, multithreading, task-parallel-library

我的 parallel.for 循环中出现“发生一个或多个错误”异常：

```
at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
at System.Threading.Tasks.Task.Wait(Int32 millisecondsTimeout, CancellationToken            cancellationToken)
at System.Threading.Tasks.Task.Wait()
at System.Threading.Tasks.Parallel.ForWorker[TLocal](Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
at System.Threading.Tasks.Parallel.For(Int32 fromInclusive, Int32 toExclusive, ParallelOptions parallelOptions, Action`1 body)
at StaticClassLibrary.BLL.StaticClass.StatiMethod(String strExt, Object wTable, Object job, String BSPConnectionString) in c:\Users\FredWAD\Documents\Visual Studio 2010\Projects\PayrollCenterLibrary\BLL\ContributionFileManager.cs:line 218
   at myapp.staticlibrary.staticmethod(String str1, String str2) 
```

该应用程序采用结构集合，每个对象都包含元数据，并将它们插入数据库。

违规代码如下：

```
Parallel.For(0, recordCnt, pOptions, d =>
               {
                   //flds = wTable.records[d].fields;
                   ssn = wTable.records[d].fields[fieldIndex].Value;
                   //rowId = wTable.records[d].fields[fieldIndex].rowId;
                   currentPerson = PersontManager.GetPerson(string1, string2);
                   hasContributions = WorkTableManager.RowHasContributionsNEW(List<string> lst, wTable.records[d]);
                   LoadRecordParallel(hasLoan, hasScratchpad, fieldIndex, wTable.records[d], object, string, string);
               }
           ); 
```

wTable = 集合对象。

记录 = 包含元数据的结构列表

fields = 每条记录中的结构。每条记录都包含这些列表。

这本质上是一个表，其中包含一行结构（其中还包含有关每行的一些元数据）和单元格结构。此错误似乎是随机发生的。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:54:06.970

您需要查看 AggregateException 上的 InnerExceptions 属性。这是 TPL 的默认行为，因为多个线程可能同时抛出异常。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)。

我的猜测是您有某种类型的资源不是线程安全的；当并行线程正在访问它时，该资源会与另一个线程进入竞争状态，从而导致您的异常。第一个任务是找出你的并行查询的哪一行导致了问题，然后进入那个问题。如果您的数据库级别的行锁不够，它可能与数据库有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T16:21:03.340

处理此问题的一种方法是`try` `catch`在 Parallel 循环中放置一个块。如果可以在循环内处理异常，则它不会以`AggregateException`.

# youtube-api - 无法使用 Youtube Analytics API 检索视频指标

> ID：12982845
> 
> 赞同：9
> 
> 时间：2012-10-19T21:41:16.920
> 
> 标签：youtube-api

根据 Youtube Analytics API 文档 ( [https://developers.google.com/youtube/analytics/v1/available_reports](https://developers.google.com/youtube/analytics/v1/available_reports) )，看起来您应该能够使用“视频”维度检索特定视频的指标。我能够成功获得所有其他指标 - 要么指定“日”和“国家”等维度，要么根本不提供任何维度。

但是，当我将尺寸值更改为“视频”时，我会收到 400 错误代码，并显示消息“不支持查询。检查文档以获取支持的查询。” 这是一个频道报告 - 不是内容所有者报告 - 但根据文档，这应该是一个有效的报告请求。我什至尝试使用一些额外的参数来限制结果集，例如 start-index、max-results 和 sort。

作品

```
client.execute(:api_method => "youtubeAnalytics.reports.query", 
               :parameters => {'ids' => "channel==##USER_ID##",
                               "start-date" => "2012-01-01", "end-date" => "2012-02-01",  
                               "metrics" => "views"})

client.execute(:api_method => "youtubeAnalytics.reports.query",
               :parameters => {'ids' => "channel==##USER_ID##", 
                               "start-date" => "2012-01-01", "end-date" => "2012-02-01", 
                               "metrics" => "views", 
                               "dimensions" => "day"}) 
```

不工作 - 返回 400 错误

```
client.execute(:api_method => "youtubeAnalytics.reports.query", 
               :parameters => {'ids' => "channel==##USER_ID##", 
                               "start-date" => "2012-01-01", "end-date" => "2012-02-01", 
                               "metrics" => "views", 
                               "dimensions" => "video"})

client.execute(:api_method => "youtubeAnalytics.reports.query", 
               :parameters => {'ids' => "channel==##USER_ID##",
                               "start-date" => "2012-01-01", "end-date" => "2012-02-01", 
                               "metrics" => "views", 
                               "dimensions" => "video", 
                               "start-index" => 1, 
                               "max-results" => 5, 
                               "sort" => "views"}) 
```

有没有人能够成功请求视频级详细信息的频道报告？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T02:13:00.310

所以以下确实有效：

```
channel==USER_ID
start-date=YYYY-MM-DD
end-date=YYYY-MM-DD
metrics=views
dimensions=video
max-results=10
sort=-views 
```

重要的是，如果要运行`dimensions=video`报表，则需要按视图降序排序，并且最多只能检索 10 个结果。这在第二个表中进行了解释

[https://developers.google.com/youtube/analytics/v1/available_reports#Channel_Reports](https://developers.google.com/youtube/analytics/v1/available_reports#Channel_Reports)

他们的文档中提到的最多 10 个结果（按视图递减排序）显然是由 Analytics 数据的后端源强加的人为限制，但这就是 API 之前可以支持的所有内容。Google 刚刚对其进行了更新，因此您可以获得多达 200 个视频结果 - [https://developers.google.com/youtube/analytics/revision_history](https://developers.google.com/youtube/analytics/revision_history)

如果您希望获取给定帐户中任意视频的 Google Analytics（分析）数据，而不仅仅是观看次数最多的 10 个视频，则需要将维度设置为视频以外的其他内容，然后运行带有`filter=`设置为您帐户中您感兴趣的每个视频 ID。同样，这可能会在未来发生变化，但截至目前，Analytics API 不适合为帐户中的每个视频获取大量数据在单个 API 调用中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T00:49:35.760

请注意，最近在 2014 年 8 月对 YouTube API 进行了更改，现在允许每次 API 调用获取多达 200 个视频的指标。

请参阅2014 年 8 月 28 日的[https://developers.google.com/youtube/analytics/revision_history](https://developers.google.com/youtube/analytics/revision_history)

# ruby-on-rails - redirect_to @语法含义

> ID：12982846
> 
> 赞同：2
> 
> 时间：2012-10-19T21:41:22.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3

代码是什么

```
redirect_to @user 
```

在控制器方法中使用时，在 Rails 中是什么意思？

它究竟重定向到哪里？它是重定向到用户控制器（如果是，控制器的哪个方法），还是不通过控制器而是直接进入视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:54:03.420

基本上它会查找一堆关于你的资源路由如何工作的东西

这样想

`send("#{@user.class.name.underscore.downcase}_path", @user)`

这可能不是确切的代码，但它应该可以帮助您可视化实际发生的事情。

控制器始终运行，在这种情况下，除非您有一些时髦的路由器选项，否则它将是您的用户控制器的显示操作。

`rake routes`解释了在这种情况下路线是如何布置的

`get /users/:id => users#show :as => "user_path"`

来自传入模型的替换是这样的

从您的路线创建一个正则表达式

:id 是一个参数

将匹配 inbound_object 到路径函数，即@user

`:id is replaced with @user.id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:56:05.723

从[redirect_to 文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)：

> 将浏览器重定向到选项中指定的目标。此参数可以采用以下三种形式之一：
> 
> ```
>  ... 
> ```
> 
> 记录 - 将通过使用选项调用 url_for 生成 URL，该选项将引用该记录的命名 URL。

从[url_for 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-url_for)：

> 传递记录（如活动记录或活动资源）而不是哈希作为选项参数将触发该记录的命名路由。查找将发生在类的名称上。所以传递一个 Workshop 对象将尝试使用 Workshop_path 路由。如果您有嵌套路由，例如 admin_workshop_path，则必须显式调用它（url_for 无法猜测该路由）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T22:08:19.637

这相当于写

```
redirect_to user_path(@user) 
```

更多的 Rails 魔法在这里起作用，无论好坏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T05:59:25.107

它像这样调用用户的显示功能

```
redirect_to user_path(@user) 
```

重点：如果我们看到路由，则 :id 已通过，但此处对象已通过

它通过以下方式转换为用户的ID

def to_param self.id 结束

这在模型中可用，我们可以将其覆盖为

所以基本上转换首先发生

```
redirect_to @user => redirect_to user_path(@user) 
```

然后

```
 @user => @user.id 
```

# scala - 参数列表中的类型推断与 setter 组合不起作用

> ID：12982847
> 
> 赞同：7
> 
> 时间：2012-10-19T21:41:23.190
> 
> 标签：scala, functional-programming, anonymous-function, type-inference

让我们想象一下范围内的以下项目：

```
object Thing { 
  var data: Box[String] = Empty
}

def perform[T](setter: Box[T] => Unit) {
  // doesn't matter
} 
```

以下无法编译：

```
perform(Thing.data = _) 
```

错误信息是：

```
<console>:12: error: missing parameter type for expanded function ((x$1) => Thing.data = x$1)
              perform(Thing.data = _)
                                   ^
<console>:12: warning: a type was inferred to be `Any`; this may indicate a programming error.
              perform(Thing.data = _)
                                 ^ 
```

虽然以下编译：

```
perform(Thing.data_=) 
```

从那以后，我通过创建一个更好的抽象来超越这个问题，但我的好奇心仍然存在。

谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:46:49.760

让我们扩展您在第一个示例中所做的事情：

```
Thing.data = _ 
```

是定义匿名函数的简写，如下所示：

```
def anon[T](x: Box[T]) {
  Thing.data = x
} 
```

所以当你打电话

```
perform(Thing.data = _) 
```

和

```
perform(anon) 
```

问题是`anon`并`perform`采用类型参数`T`，而您在任何时候都没有声明是什么`T`。编译器只能从传递的参数中推断出函数调用中的类型参数，而不是从函数体内推断出，因此它不能推断出`anon`应该`T`是`String`。

请注意，如果您调用

```
perform[String](Thing.data = _) 
```

编译器没有问题，因为它现在知道`T`应该是什么，如果您尝试使用除字符串之外的任何类型，您将收到类型不匹配错误，但错误发生在匿名函数的主体中，而不是调用`perform`.

然而，当你打电话

```
perform(Thing.data_=) 
```

您正在传递`Thing.data_=`明确定义为的方法`Box[String] => Unit`，因此编译器*可以*推断`perform`的类型参数，因为它来自函数参数。

# haskell - Haskell：具有类限制的元素列表

> ID：12982848
> 
> 赞同：5
> 
> 时间：2012-10-19T21:41:24.217
> 
> 标签：haskell

这是我的问题：

这完美地工作：

```
type Asdf = [Integer]
type ListOfAsdf = [Asdf] 
```

现在我想做同样的事情，但有 Integral 类限制：

```
type Asdf2 a = (Integral a) => [a]
type ListOfAsdf2 = (Integral a) => [Asdf2 a] 
```

我收到了这个错误：

```
Illegal polymorphic or qualified type: Asdf2 a
Perhaps you intended to use -XImpredicativeTypes
In the type synonym declaration for `ListOfAsdf2' 
```

我已经尝试了很多东西，但我仍然无法创建具有上述类限制的类型。

提前致谢！！！=)

达克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T09:06:40.203

如果您需要上下文，最简单的方法是使用`data`声明：

```
data (Integral a) => IntegralData a = ID [a]
type ListOfIntegralData a = [IntegralData a]

*Main> :t [ ID [1234,1234]]
[ID [1234,1234]] :: Integral a => [IntegralData a] 
```

这具有确保将`Integral`上下文添加到使用该`IntegralData`数据类型的每个函数的（唯一）效果。

```
sumID :: Integral a => IntegralData a -> a
sumID (ID xs) = sum xs 
```

同义词对您不起作用的主要原因`type`是类型同义词的设计就是这样 - 替换*类型*而不是*类型签名*的东西。

但如果你想实现存在主义，最好的方法是使用 GADT，因为它会为你处理所有量化问题：

```
{-# LANGUAGE GADTs #-}

data IntegralGADT where
   IG :: Integral a => [a] -> IntegralGADT 
type ListOfIG = [ IntegralGADT ] 
```

因为这本质上是一种存在类型，所以您可以将它们混合起来：

```
*Main> :t [IG [1,1,1::Int], IG [234,234::Integer]]
[IG [1,1,1::Int],IG [234,234::Integer]] :: [ IntegralGADT ] 
```

根据您的应用程序，您可能会发现它非常方便。

与数据声明相比，GADT 的主要优势在于，当您进行模式匹配时，您会隐式获取`Integral`上下文：

```
showPointZero :: IntegralGADT -> String
showPointZero (IG xs) = show $ (map fromIntegral xs :: [Double])

*Main> showPointZero (IG [1,2,3])
"[1.0,2.0,3.0]" 
```

但是存在量化有时被用于错误的原因，（例如，想要将所有数据混合在一个列表中，因为这是你习惯于动态类型语言的内容，而且你还没有习惯静态类型及其优势）。

在这里，我认为麻烦大于价值，除非您*需要*将不同的 Integral 类型混合在一起而不进行转换。我看不出这会有所帮助的原因，因为您在使用它们时必须转换它们。

例如，您不能定义

```
unIG (IG xs) = xs 
```

因为它甚至没有类型检查。经验法则：你不能做提到`a`右侧类型的事情。

但是，这没关系，因为我们转换了类型`a`：

```
unIG :: Num b => IntegralGADT -> [b]
unIG (IG xs) = map fromIntegral xs 
```

当我认为您的原始计划不必这样做时，存在量化迫使您转换数据！您也可以将所有内容都转换为 Integer 而不是这个。

如果你想让事情变得简单，那就保持简单。数据声明是确保您不将数据放入数据类型中的最简单方法，除非它已经是某个类型类的成员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-20T04:56:23.867

**反对反存在主义者**

我总是不喜欢 Haskell 中的反存在论类型的谈话，因为我经常发现存在论很有用。例如，在一些快速检查测试中，我的代码类似于（具有讽刺意味的是未经测试的代码如下）：

```
data TestOp = forall a. Testable a => T String a

tests :: [TestOp]
tests = [T "propOne:" someProp1
        ,T "propTwo:" someProp2
        ]

runTests = mapM runTest tests
runTest (T s a) = putStr s >> quickCheck a 
```

甚至在一些生产代码的角落里，我发现制作一个我需要随机值的类型列表很方便：

```
type R a = Gen -> (a,Gen)
data RGen = forall a. (Serialize a, Random a) => RGen (R a)
list = [(b1, str1, random :: RGen (random :: R Type1))
       ,(b2, str2, random :: RGen (random :: R Type2))
       ] 
```

**回答你的问题**

```
{-# LANGUAGE ExistentialQuantification #-}
data SomeWrapper = forall a. Integral a => SW a 
```

# javascript - 继承具有相同构造函数但原型不同/相似的类

> ID：12982850
> 
> 赞同：0
> 
> 时间：2012-10-19T21:41:33.457
> 
> 标签：javascript

假设我有一个构造函数：

```
function Constructor(input) {
  this.input = input
}

Constructor.prototype.method = function() {
  console.log('a')
} 
```

但是我想使用构造函数的副本创建另一个类，但要更改原型。

```
function Constructor2(input) {
  this.input = input
}

Constructor2.prototype.method = function() {
  console.log('b')
} 
```

我不想重新定义构造函数。你会怎么做？理想情况下，它会很简单：

```
var Constructor2 = inherits(Constructor)
Constructor2.prototype.method = // overwrite the inherited `method()` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:07:52.140

```
var inherits = function(childCtor, parentCtor) {
  /** @constructor */
  function tempCtor() {};
  tempCtor.prototype = parentCtor.prototype;
  childCtor.superClass_ = parentCtor.prototype;
  childCtor.prototype = new tempCtor();
  /** @override */
  childCtor.prototype.constructor = childCtor;
};

// How to use it:

var Constructor1 = function() {
//add all your methods, variables etc
};

Constructor1.prototype.myMethod = function() {
};

var Contructor2 = function() {
Contructor1.call(this); // Call the super class constructor
};
inherits(Contstructor2, Constructor1);
// Constructor2 now inherits from Constructor1
// override, add methods variables etc, whatever you need.

// Have fun! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:53:03.717

好的，更容易使用`apply`：

```
function newConstructor(Super) {
  function Construct() {
    Super.apply(this, arguments)
  }

  require('util').inherits(Construct, Super)

  return Construct
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:13:52.273

这是一个讨厌的解决方案：

```
function Constructor1(input) {
  this.input = input;
}

Constructor1.prototype.method = function() {
  console.log('a');
}

// be careful here: evals the string value of Constructor1 with references to "Constructor1" changed to "Constructor2"
eval(Constructor1.toString().replace("Constructor1", "Constructor2"));

Constructor2.prototype.method = function() {
  console.log('b');
}

var c1 = new Constructor1(1);
var c2 = new Constructor2(2);
console.log(c1.constructor === c2.constructor) // true

c1.method() // a
c2.method() // b 
```

# django - Django将mysql数据正确加载到模板中

> ID：12982854
> 
> 赞同：0
> 
> 时间：2012-10-19T21:41:43.993
> 
> 标签：django, django-models, django-templates, django-views

我是 django 的新手，我正在尝试显示建筑物列表并按字母顺序对它们进行排序，然后将其加载到 html 文档中。有什么我做的不对吗？

下面是models.py

```
class Class(models.Model):
    building = models.CharField(max_length=20)
    class Meta:
        db_table = u'class'
    def __unicode__(self):
        return self.building 
```

下面是views.py

```
views.py

def index(request):
    buildinglist = Class.objects.all().order_by('building')
    c = {'buildinglist': buildinglist}
    t = loader.get_template('index.html')
    return HttpResponse(t.render(c)) 
```

下面是 index.html

```
index.html

{% block content%}
<h3>Buildings:</h3>
<ul>
    {% for building in buildinglist %}
        <li>
            <a href='www.{% building %}.com'>
                            # ex. www.searstower.com
        </li>
    {% endfor %}
</ul>
{% endblock %} 
```

你们能指出我正确的方向吗？提前谢谢你们！我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:54:00.253

`render()`期望它的第一个参数是请求。 [看看这里的文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)。尝试：

```
return render_to_response('index.html',
                          c,
                          context_instance=RequestContext(request)) 
```

# objective-c - UIPageControl 在视网膜设备上滞后

> ID：12982856
> 
> 赞同：0
> 
> 时间：2012-10-19T21:42:13.540
> 
> 标签：objective-c, ios, uipagecontrol

我已经按照 Apple 的代码示例实现了一个带有页面控制器的 iphone 应用程序。页面控制器上只有 3 个视图。该应用程序在普通屏幕上运行良好，但当我在视网膜设备上对其进行测试时，在任何视图中水平或垂直滚动​​时都会出现明显的延迟。关于问题可能是什么或我如何“调试”这个的任何想法？

2 个视图的内容是一个表格视图，在第三个视图上我使用的是 CorePlot。滚动时不使用网络。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:44:06.880

滚动期间加载和绘制的数据量使您的设备窒息。尝试使用 gcd 和块在其他线程中加载这些视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:37:35.210

我在 3 个视图周围添加了一个阴影，这就是使滚动变慢的原因。

# gcc - C/C++ 到 MIPS 程序集

> ID：12982857
> 
> 赞同：3
> 
> 时间：2012-10-19T21:42:21.440
> 
> 标签：gcc, compilation, mips

我知道要编译成程序集，我应该使用or`-S`选项，但是如何获得 MIPS 程序集？`gcc``g++`

我试过了

```
g++ -march=mips2 dll.c 
```

但这给出了错误

```
dll.c:1:0: error: bad value (mips2) for -march= switch 
```

我看到了 compile 命令的建议`mips_gcc`，但我找不到如何安装该编译器。

如果有帮助，我正在使用 Ubuntu 64 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T21:57:46.303

您需要一个构建为 MIPS[交叉编译器](http://en.wikipedia.org/wiki/Cross_compiler)的 gcc 版本。[您可以从这里](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)下载免费的 Mentor/Codesourcery MIPS gnu/gcc 交叉编译工具链。此工具链适用于 Windows 和 Linux。

下载、安装工具链并将其添加到您的路径后，您会说：

```
mips-linux-gnu-g++ -march=mips32r2 -S dll.c 
```

将您的代码编译为 MIPS32R2 程序集。

更新 8/2017：Mentor 网站上似乎不再提供适用于 MIPS 的 Sourcery CodeBench 免费交叉编译器。[在Imagination 的网站上](https://community.imgtec.com/developers/mips/tools/codescape-mips-sdk/ "想象力的网站")试用免费工具链。

# java - java应用程序的安全桌面模式效果

> ID：12982863
> 
> 赞同：2
> 
> 时间：2012-10-19T21:43:08.443
> 
> 标签：java, swing, graphics, glasspane, jlayer

现在有没有人如何实现“安全桌面模式”（效果），例如从 Windows Vista/7 UAC 同意块中获得的？

我认为这是一些功能，它会在这里和那里删除像素（并可能使它们变灰），然后最终将其绘制到屏幕上。我想将它应用到我的应用程序中，以防止用户做任何事情，直到另一个用户连接到系统（但这不是重点）。

我非常感谢您的建议。

亲切的问候，
A。

编辑：我真的只是在寻找这个

```
graphicsFX.setColor(new Color(0, 0, 0, 0.8f));
graphicsFX.fillRect(0, 0, 800, 600); 
```

延迟输入我可以做得很好。

谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T22:59:44.370

我们使用[JXLayer](http://java.net/projects/jxlayer/)来达到这个目的……

![在此处输入图像描述](../Images/af3e1b91a12ecb72a2ee946132f2338f.png)![在此处输入图像描述](../Images/d271c3e8e100b98a573ecad7f34f5144.png)

这非常有用，因为它可以将用户锁定在给定容器之外，而不会像`GlassPane`解决方案那样锁定应用程序。它就像容器的玻璃板；）

我偷了[这里的基本想法](http://weblogs.java.net/blog/alexfromsun/archive/2008/07/jxlayer_30_lock.html)

```
 public class JXLayerTest {

      public static void main(String[] args) {
           new JXLayerTest();
      }

      public JXLayerTest() {
           EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                     try {
                          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                     } catch (ClassNotFoundException ex) {
                     } catch (InstantiationException ex) {
                     } catch (IllegalAccessException ex) {
                     } catch (UnsupportedLookAndFeelException ex) {
                     }

                     final LockableUI ui = new LockableUI();
                     JPanel panel = new JPanel(new GridBagLayout());
                     buildUI(panel);

                     // This stolen directly from the JXLayer lockable blog                         
                     JXLayer layer = new JXLayer(panel, ui);

                     // Java2D grayScale BufferedImageOp
                     ColorConvertOp grayScale = new ColorConvertOp(ColorSpace.getInstance(ColorSpace.CS_GRAY), null);
                     // wrap it with the jxlayer's BufferedImageOpEffect 
                     BufferedImageOpEffect effect = new BufferedImageOpEffect(grayScale);
                     // set it as the locked effect        
                     ui.setLockedEffects(effect);
                     ui.setLocked(false);

                     JFrame frame = new JFrame();
                     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                     frame.setLayout(new BorderLayout());
                     frame.add(layer);

                     JPanel panelButtons = new JPanel(new GridBagLayout());

                     final JButton lock = new JButton("Lock");
                     lock.addActionListener(new ActionListener() {
                          @Override
                          public void actionPerformed(ActionEvent e) {
                               boolean locked = !ui.isLocked();
                               ui.setLocked(locked);
                               lock.setText(locked ? "Unlock" : "Lock");

                          }
                     });

                     panelButtons.add(lock);
                     frame.add(panelButtons, BorderLayout.SOUTH);

                     frame.pack();
                     frame.setLocationRelativeTo(null);
                     frame.setVisible(true);
                }

                protected void buildUI(JPanel panel) {
                     GridBagConstraints gbc = new GridBagConstraints();
                     gbc.gridx = 0;
                     gbc.gridy = 0;

                     JLabel label = new JLabel();
                     try {
                          BufferedImage image = ImageIO.read(new File("megatokyo.png"));
                          label.setIcon(new ImageIcon(image));
                     } catch (IOException ex) {
                          label.setText("Nothing to see here");
                     }

                     panel.add(label, gbc);

                     JButton button = new JButton("Clickl me");
                     button.addActionListener(new ActionListener() {
                          @Override
                          public void actionPerformed(ActionEvent e) {
                               JOptionPane.showMessageDialog(null, "Clicked");
                          }
                     });

                     gbc.gridy++;
                     panel.add(button, gbc);

                }
           });
      }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T21:56:08.383

与其重新发明轮子，不如尝试使用`setEnabled(false)`on 组件来禁用它，并在连接到系统时`setEnabled(true)`再次调用以启用组件。

有关显示灰色/不可点击的更多信息，请参阅[此](http://www.java-examples.com/disable-button-example)`JButton`示例：

![在此处输入图像描述](../Images/ee81718667c3760039da0679c677d351.png)

# ios - 如何在 iOS 中获得最流畅的动画？

> ID：12982865
> 
> 赞同：0
> 
> 时间：2012-10-19T21:43:09.617
> 
> 标签：ios, uiview, core-animation, core-graphics

我正在使用该`UIView`方法`animateWithDuration:animations`为滑动 a 设置动画`UIView`。它看起来有点波涛汹涌。有没有更好的方法，比如 CoreGraphics，来完成更流畅的动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:55:10.393

你可以尝试使用不同的`UIViewAnimationOptions`

默认为`UIViewAnimationOptionCurveEaseInOut`，但您可以尝试其他：

```
[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     v.center = CGPointMake(400, 400);
                 }
                 completion:^(BOOL finished) {

                 }
 ]; 
```

# oracle - 在插入时初始化子序列列值。（甲骨文）

> ID：12982875
> 
> 赞同：3
> 
> 时间：2012-10-19T21:44:34.563
> 
> 标签：oracle, triggers, sequence

我希望我的表根据它的 TEMPLATE_ID 对其“排序依据”列进行排序。我希望这发生在插入时（可能通过插入触发器）。例如，如果我运行以下插入，我应该得到下表中的值。

```
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (1, 1)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (2, 1)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (3, 1)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (4, 2)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (5, 2)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (6, 2)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (7, 2)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (8, 3)

ID TEMPLATE_ID ORDER_BY
 1           1        1
 2           1        2
 3           1        3
 4           2        1
 5           2        2
 6           2        3
 7           2        4
 8           3        1 
```

我第一次尝试创建这个触发器，但是当我插入时它给了我一个错误。

```
create or replace
trigger TEMPLATE_ATTRIBUTES_AF_INS_TRIG
   after insert on TEMPLATE_ATTRIBUTES
   for each row
begin
    if :NEW.ORDER_BY is null then
       update TEMPLATE_ATTRIBUTES
       set ORDER_BY = (select coalesce(MAX(ta.ORDER_BY), 0) + 1 from TEMPLATE_ATTRIBUTES ta where ta.TEMPLATE_ID = :NEW.TEMPLATE_ID)
       where ID = :NEW.ID;
    end if;
end; 
```

它给我的错误是：“表 TEMPLATE_ATTRIBUTES 正在变异，触发器/函数可能看不到它”

所以我需要一种不同的方式来构建这个触发器。而且我还需要它来“线程安全”，这样如果这两个插入同时发生在不同的会话上，那么结果记录仍然会得到不同的“ORDER_BY”值：

```
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (1, 1)
INSERT INTO TEMPLATE_ATTRIBUTES (ID, TEMPLATE_ID) VALUES (2, 1) 
```

编辑：

我尝试了针对“表正在变异，触发器/函数可能看不到它”的常见解决方法以及“有效”的解决方法，但它不是“线程安全的”。我试图添加锁定，但它在插入时给了我另一个错误

```
create or replace package state_pkg
as 
  type ridArray is table of rowid index by binary_integer; 
  newRows ridArray;
  empty   ridArray; 
end;

create or replace trigger TEMPLATE_ATTRIBUTES_ORDER_BY_TB4 
before insert on TEMPLATE_ATTRIBUTES
begin
  state_pkg.newRows := state_pkg.empty; 
end;

create or replace trigger TEMPLATE_ATTRIBUTES_ORDER_BY_TAF1
after insert on TEMPLATE_ATTRIBUTES for each row 
begin
  if :NEW.ORDER_BY is null then
    state_pkg.newRows( state_pkg.newRows.count+1 ) := :new.rowid;
  end if;
end;

create or replace trigger TEMPLATE_ATTRIBUTES_ORDER_BY_TAF2
after insert on TEMPLATE_ATTRIBUTES
declare
  v_request     number;
  v_lockhandle varchar2(200);
begin
  dbms_lock.allocate_unique('TEMPLATE_ATTRIBUTES_ORDER_BY_lock', v_lockhandle);
  while v_request <> 0 loop
    v_request:= dbms_lock.request(v_lockhandle, dbms_lock.x_mode);
  end loop;
  begin
    for i in 1 .. state_pkg.newRows.count loop
      update TEMPLATE_ATTRIBUTES
      set ORDER_BY = (select coalesce(MAX(q.ORDER_BY), 0) + 1 from TEMPLATE_ATTRIBUTES q where q.TEMPLATE_ID = (select q2.TEMPLATE_ID from TEMPLATE_ATTRIBUTES q2 where q2.rowid = state_pkg.newRows(i)))
      where rowid = state_pkg.newRows(i);
    end loop;
    v_request:= dbms_lock.release(v_lockhandle);
  EXCEPTION WHEN OTHERS THEN 
    v_request:= dbms_lock.release(v_lockhandle);
    raise;
  end;
end; 
```

这给了我：

ORA-04092：无法在触发器中提交 ORA-06512：在“SYS.DBMS_LOCK”，第 250 行 ORA-06512：在“TEMPLATE_ATTRIBUTES_ORDER_BY_TAF2”，第 5 行 ORA-04088：在执行触发器“TEMPLATE_ATTRIBUTES_ORDER_BY_TAF2”时出错 ORA-06512

编辑 2： ORDER_BY 列必须是可更新的列。ID 实际上使用一个序列和插入前触发器来设置它的值。当我将它包含在插入示例中时，我认为我正在简化我的问题，但这是不正确的。ORDER_BY 的初始值实际上与 ID 无关，而是与插入记录的顺序有关。但是 ID 已排序，因此如果有帮助，您可以使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:59:14.867

使用更新触发器更新同一个表可能会导致逻辑循环，从而导致变异表错误。尝试使用插入**前**触发器并设置 order_by 的最大值 + 1。

```
create or replace
trigger TEMPLATE_ATTRIBUTES_AF_INS_TRIG
   before insert on TEMPLATE_ATTRIBUTES
   for each row   
begin
    if :NEW.ORDER_BY is null then
      select max(order_by) + 1 into :new.order_by
      from template_attributes
      where template_id = :new.template_id;
    end if;
    :new.order_by := nvl(:new.order_by,1); -- For new templates
end;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:54:57.317

这不起作用的原因是您无法在其自己的行级触发器中选择或更新表。您可以做的是编写一个表级触发器：

```
create or replace trigger TEMPLATE_ATTRIBUTES_AF_INS_TRIG
  after insert on TEMPLATE_ATTRIBUTES
begin
  update TEMPLATE_ATTRIBUTES a
  set 
    a.ORDER_BY = 
     (select 
       coalesce(MAX(ta.ORDER_BY), 0) 
     from 
       TEMPLATE_ATTRIBUTES ta 
     where 
        ta.TEMPLATE_ID = a.TEMPLATE_ID) + row_number
  where 
    a.ORDER_BY is null;
end; 
```

如果您在一个语句中插入多条记录，我添加`row_number`以防止记录获得相同的 ORDER_BY，但我不确定它是否以这种方式工作，我目前无法对其进行测试。我希望你能得到大致的想法。

# c++ - C/C++ 优化检查以查看之前是否已经运行过函数

> ID：12982884
> 
> 赞同：18
> 
> 时间：2012-10-19T21:45:14.433
> 
> 标签：c++, c, performance, optimization

假设您有一个 C/C++ 中的函数，它在第一次运行时会以某种方式运行。然后，所有其他时间它都以另一种方式表现（例如，见下文）。第一次运行后，if 语句变得多余，如果速度很重要，可以优化掉。有没有办法进行这种优化？

```
bool val = true; 

void function1() {

   if (val == true) {
      // do something
      val = false; 
   }
   else {
      // do other stuff, val is never set to true again 
   }

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T21:53:19.800

`gcc`有一个内置函数，可让您通知实现有关分支预测的信息：

```
 __builtin_expect 
```

[http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)

例如在你的情况下：

```
bool val = true; 

void function1()
{
    if (__builtin_expect(val, 0)) {
       // do something
       val = false; 
    }
    else {
      // do other stuff, val is never set to true again 
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-19T21:50:08.950

只有当您确定它确实是一个瓶颈时，您才应该进行更改。使用分支预测，`if`语句可能是即时的，因为它是一种非常可预测的模式。

也就是说，您可以使用回调：

```
#include <iostream>
using namespace std;
typedef void (*FunPtr) (void);
FunPtr method;
void subsequentRun()
{
    std::cout << "subsequent call" << std::endl;
}
void firstRun()
{
    std::cout << "first run" << std::endl;
    method = subsequentRun;  
}
int main()
{
    method = firstRun;
    method();
    method();
    method();
} 
```

产生输出：

> 第一次运行
> 后续调用
> 后续调用

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-19T21:50:44.180

您可以使用函数指针，但无论如何它都需要间接调用：

```
void (*yourFunction)(void) = &firstCall;

void firstCall() {
 ..
 yourFunction = &otherCalls;
}

void otherCalls() {
 ..
}

void main()
{
  yourFunction();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T21:47:48.250

一种可能的方法是编译该函数的两个不同版本（这可以使用模板从源中的单个函数完成），并在运行时使用函数指针或对象来决定。但是，除非您的函数非常昂贵，否则指针开销可能会超过任何潜在收益。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-19T21:51:14.980

您可以使用`static`成员变量而不是全局变量..

或者，如果您第一次运行的代码更改了某些内容以供将来使用（例如，打开文件？），您可以使用该更改作为检查来确定是否运行代码（即检查是否文件已打开）。这将为您节省额外的变量。此外，它可能有助于错误检查 - 如果由于某种原因初始更改未被其他操作更改（例如，文件位于不正确删除的可移动媒体上），您的检查可能会尝试重新进行更改。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T21:50:47.810

编译器只能优化编译时已知的内容。

在您的情况下，该值`val`仅在运行时已知，因此无法优化。

测试`if`非常快，您不必担心对其进行优化。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-22T14:14:25.090

如果您想让代码更简洁一些，您可以使用以下方法将变量设为函数的本地变量`static`：

```
void function() {
    static bool firstRun = true;
    if (firstRun) {
        firstRun = false;
        ...
    }
    else {
        ...
    }
} 
```

第一次进入该函数时，`firstRun`将为真，并且它会持续存在，因此每次调用该函数时，该`firstRun`变量将与之前的实例相同（并且每次后续都为假）。

这可以很好地与@ouah 的解决方案一起使用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-19T21:47:43.337

像 g++（我相信 msvc）这样的编译器支持在第一次运行时生成配置文件数据，然后使用该数据更好地猜测最有可能遵循哪些分支，并进行相应的优化。如果您使用 gcc，请查看该`-fprofile-generate`选项。

预期的行为是编译器将优化该 if 语句，以便首先对 else 进行排序，从而避免在所有后续调用中执行 jmp 操作，使其与不存在时一样快，尤其是在您返回时在 else 中的某个地方（从而避免跳过“if”语句）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-19T22:02:01.497

进行这种优化的一种方法是将函数一分为二。代替：

```
void function1()
{
    if (val == true) {
        // do something
        val = false; 
    } else {
       // do other stuff
    }
} 
```

做这个：

```
void function1()
{
    // do something
}

void function2()
{
   // do other stuff
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-20T00:48:10.457

您可以做的一件事是将逻辑放入对象的构造函数中，然后定义`static`。如果这样的`static`对象出现在块作用域中，则构造函数在该作用域的执行发生的第一次运行。编译器发出一次性检查。

您还可以将`static`对象放在文件范围内，然后在`main`调用之前对其进行初始化。

我给出这个答案是因为您可能没有有效地使用 C++ 类。

（关于`C/C++`，没有这样的语言。有 C 和 C++。你是在 C 中工作，还必须编译为 C++（有时称为，非正式地，“干净的 C”），还是你真的在 C++ 中工作？）

* * *

[什么是“清洁 C”，它与标准 C 有何不同？](https://stackoverflow.com/questions/9694776/what-is-clean-c-and-how-does-it-differ-from-standard-c)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-20T06:57:11.437

为了保持编译器的独立性，您可以在一个函数和`else{}`另一个函数中编写 if() 的各个部分。几乎所有的编译器都优化了`if() else{}`- 所以，一旦最有可能是`else{}` - 因此将偶尔的可执行代码编码`if()`在一个单独的函数中，然后在一个单独的函数中调用`else`

# asp.net-mvc - 如何将数据集返回到视图

> ID：12982886
> 
> 赞同：8
> 
> 时间：2012-10-19T21:45:15.420
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我通过 SqlDataAdapter 向我的 Sql 框发送一个标准的 Sql 选择语句，然后填充一个 DataSet 对象。

我可以访问结果数据集中的行，但是如何将数据集转换为可以返回到 MVC 视图的列表。即，我假设 List 对象是处理此问题的最佳方式。

这是我的控制器 C# 代码：

```
public class QAController : Controller
{

    private readonly static string connString = ConfigurationManager.ConnectionStrings["RegrDBConnection"].ToString();
    private readonly static SqlConnection sqlConn = new SqlConnection(connString);
    private readonly static SqlCommand sqlComm = new SqlCommand();

    public ActionResult Index()
    {
        DbRegressionExec();
        return View();
    }
    public static void DbRegressionExec()
    {
        // SELECT TABLE CONTENTS FROM SQL !!
        RegressDB_TableList regresDB = new RegressDB_TableList();
        string sqlStr = "select * from [RegressionResults].[dbo].[Diff_MasterList] order by TableName";

        // POPULATE DATASET OBJECT
        DataSet ds = new DataSet();
        SqlDataAdapter da = new SqlDataAdapter(sqlStr, sqlConn);
        da.SelectCommand.CommandType = CommandType.Text;
        sqlConn.Open();
        try
        {
            da.Fill(ds, "RegresDB");
        }
        catch (Exception e)
        {
            throw;
        }
        finally
        {
            sqlConn.Close();
        }

       // I can iterate thru rows here, but HOW DO CONVERT TO A LIST OBJECT ????

        int numRows = ds.Tables["RegresDB"].Rows.Count;
        for (int i = 0; i < numRows; i++)
        {
            string tblName = ds.Tables["RegresDB"].Rows[i].Field<string>("TableName");
        }

        //List<RegressDB_TableList> masterList = regresDB.RegresTableList.ToList(); //not working !!
        //var masterList = regresDB.TableName.ToList(); //

    }

} 
```

我可能需要一个简单的类来实现这一点：

```
namespace RegressionMvc.Models
{
  public class RegresDB_TableName
  {
     public string TableName { get; set; }
  }
  public class RegressDB_TableList
  {
     public List<RegresDB_TableName> RegresTableList { get; set; }
  } 
```

}

最后，我试图找出处理来自 Sql Server 的 DataSet 结果的最佳方法，以及如何将它们返回到 MVC 视图。

我可能会使用 jQuery 和 Json，这意味着只需将数据字段转换为 Json 并返回到 JQuery，但我确信有几种方法可以处理基于 Sql 的结果集。

提前感谢您的建议......

最好的，鲍勃

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-09T09:37:57.530

在您的控制器中放置这样的代码

```
[HttpGet]
public ActionResult View(Modelclass viewmodel)
{
    List<Modelclass> employees = new List<Modelclass>();
    DataSet ds = viewmodel.GetAllAuthors();
    var empList = ds.Tables[0].AsEnumerable().Select(dataRow => new Modelclass{
       AuthorId = dataRow.Field<int>("AuthorId"),
        Fname = dataRow.Field<string>("FName"),
       Lname = dataRow.Field<string>("Lname")
    });
    var list = empList.ToList();

    return View(list);
} 
```

并且在视图中

```
@{
var gd = new WebGrid(Model, canPage: true, rowsPerPage: 5, selectionFieldName: "selectedRow",ajaxUpdateContainerId: "gridContent");
    gd.Pager(WebGridPagerModes.NextPrevious);}
@gd.GetHtml(tableStyle: "table",

        columns: gd.Columns(
                 gd.Column("AuthorId", "AuthorId"),
                 gd.Column("Fname", " Fname"),
                 gd.Column("Lname", "Lname", style: "description")

 )) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T21:58:57.147

如果您坚持使用 DAO，我建议您不要使用 DataSet，而是使用具有[SqlDataReader.GetValues()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getvalues.aspx)方法速度的强类型类。这是更多的工作，但如果你想要我强烈推荐的强类型类，它必须在某个地方完成。

```
public class Person
{
  public Person(Object[] values]
  {
    this.FirstName = (string)values[0];
    this.LastName = (string)values[1];
    this.Birthday = (DateTime)values[2];
    this.HasFavoriteColor = (bool)values[3];
  }

  public string FirstName { get; private set; }
  public string LastName { get; private set; }
  public DateTime Birthday { get; private set; }
  public bool HasFavoriteColor { get; private set; }
}

public static void DbRegressionExec()
{
    List<Person> viewModel = new List<Person>();

    // SELECT TABLE CONTENTS FROM SQL !!
    RegressDB_TableList regresDB = new RegressDB_TableList();
    string sqlStr = "select
        FirstName
        ,LastName
        ,Birthday
        ,HasFavoriteColor
      from [RegressionResults].[dbo].[Diff_MasterList] 
      order by TableName";

    // POPULATE VIEWMODEL OBJECT
    sqlConn.Open();

    try
    {
      using (SqlCommand com = new SqlCommand(sqlStr, sqlConn))
      {
        using (SqlDbReader reader = com.ExecuteReader())
        {
          while(reader.Read())
          {
            viewModel.Add(new Person(com.GetValues()));
          }
        }
      }
    }
    catch (Exception e)
    {
        throw;
    }
    finally
    {
        sqlConn.Close();
    }

    return this.View(viewModel);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T22:01:53.087

**简短的回答**

直接回答你的问题：

```
var tableList = new List<RegresDB_TableName>();
int numRows = ds.Tables["RegresDB"].Rows.Count;
for (int i = 0; i < numRows; i++)
{
    string tblName = ds.Tables["RegresDB"].Rows[i].Field<string>("TableName");
    tableList.Add(new RegresDB_TableName() { TableName = tblName };
}

return View(tableList); 
```

**长答案**（实际上更短）

试试[dapper-dot-net](http://code.google.com/p/dapper-dot-net/)。

您的代码可能会更改为：

```
string sqlStr = "SELECT * FROM [RegressionResults].[dbo].[Diff_MasterList] ORDER BY TableName";
return sqlConn.Query<RegresDB_TableName>(sqlStr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-11T10:09:36.100

控制器代码

```
 //pQ is your query you have created 
 //P4DAL is the key name for connection string 

  DataSet ds = pQ.Execute(System.Configuration.ConfigurationManager.ConnectionStrings["Platform4"].ConnectionString);

  //ds will be used below
  //create your own view model according to what you want in your view 
 //VMData is my view model

 var _buildList = new List<VMData>();
            {
                foreach (DataRow _row in ds.Tables[0].Rows)
                {
                    _buildList.Add(new VMData
                    {  
     //chose what you want from the dataset results and assign it your view model fields 

                        clientID = Convert.ToInt16(_row[1]),
                        ClientName = _row[3].ToString(),
                        clientPhone = _row[4].ToString(),
                        bcName = _row[8].ToString(),
                        cityName = _row[5].ToString(),
                        provName = _row[6].ToString(),
                    });

                }

            }

  //you will use this in your view
  ViewData["MyData"] = _buildList; 
```

看法

```
@if (ViewData["MyData"] != null)
{

    var data = (List<VMData>)ViewData["MyData"];
    <div class="table-responsive">
        <table class="display table"  id="Results">

            <thead>
                <tr>
                    <td>Name</td>
                    <td>Telephone</td>
                    <td>Category </td>
                    <td>City </td>
                    <td>Province </td>

                </tr>
            </thead>

            <tbody>
                @foreach (var item in data)
                {
            <tr>
                <td>@Html.ActionLink(item.ClientName, "_Display", new { id = item.clientID }, new { target = "_blank" })</td>
                <td>@item.clientPhone</td>
                <td>@item.bcName</td>
                <td>@item.cityName</td>
                <td>@item.provName</td>

            </tr>

            }
            </tbody>

        </table>
        </div>
        } 
```

# c# - 找不到资源

> ID：12982889
> 
> 赞同：10
> 
> 时间：2012-10-19T21:45:17.027
> 
> 标签：c#, wpf

我不确切知道它是否是一个错误，但我一直收到运行时 IOException 错误，说找不到资源。

我在画布背景中的应用程序（c#、WPF）中加载一些图像取决于数据库状态。问题是，我无法加载 LAST（按字母顺序排序）文件。例如，我在文件夹中有 15 张图像。我可以毫无问题地先加载 14 个。但是最后一个总是抛出异常。

我 100% 确定，我在文件夹中有图像（请参阅下面的 !image-printscreen）。还有我是怎么写的。14 首先我可以毫无问题地加载，只有最后一个抛出异常。

这是 WPF-c# 中的错误还是我做错了什么？

代码什么是抛出异常：

```
canvas_status.Background = new ImageBrush(new BitmapImage(new Uri(BaseUriHelper.GetBaseUri(this), @"Images\" + statusName + ".png")));

canvas_name.Background = new ImageBrush(new BitmapImage(new Uri(BaseUriHelper.GetBaseUri(this), @"Images\" + statusName + bulheadName + ".png"))); 
```

错误：

```
IOException was unhalded
Cannot locate resource 'view/images/panel_uzavreno_d.png'. 
```

图像（更高分辨率单击图像鼠标右键并单击显示图像或类似的东西）：

![打印屏幕](../Images/b196c1fdee0144dae10a23b126f20024.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-28T19:30:08.227

我有一个类似的问题：IOException，找不到确实存在于程序集中的 png 资源。

我通过**显式指定程序集名称**找到了解决方案，即使调用者与资源在同一个程序集中。

以下是使用 Pack URI 语法时的样子：

```
pack://application:,,,/MyAssemblyName;component/MyResourcesFolder/MyImage.png 
```

（有关 Pack URI 的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/aa970069.aspx](https://msdn.microsoft.com/en-us/library/aa970069%28v=vs.100%29.aspx)）

**编辑：**在指定程序集名称后我必须做的另一件事是**清理**项目。构建后问题再次出现，但在清理中间产品后得到解决。这绝对是 Visual Studio 中的一个错误。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-08-11T09:19:39.850

您需要将图像的构建操作设置为“资源”类型。

鼠标右键单击文件>>属性>>将“构建操作”设置为“资源”

# r - 数据框和使用字符列时非常常见的错误

> ID：12982896
> 
> 赞同：1
> 
> 时间：2012-10-19T21:46:25.763
> 
> 标签：r, character, dataframe

R中有用的一个非常出乎意料的行为`data.frame`源于将`character`列作为因素。如果不考虑，这会导致很多问题。例如假设以下代码：

```
foo=data.frame(name=c("c","a"),value=1:2)
#   name val
# 1    c   1
# 2    a   2

bar=matrix(1:6,nrow=3)
rownames(bar)=c("a","b","c")
#   [,1] [,2]
# a    1    4
# b    2    5
# c    3    6 
```

那么你对跑步有什么期望`bar[foo$name,]`呢？它通常应该返回根据'c' 和 'a' 行`bar`命名的行。`foo$name`但结果不同：

```
bar[foo$name,]
#   [,1] [,2]
# b    2    5
# a    1    4 
```

原因就在这里：`foo$name`不是字符向量，而是整数向量。

```
foo$name
# [1] c a
# Levels: a c 
```

为了获得预期的行为，我手动将其转换为字符向量：

```
foo$name = as.character(foo$name)
bar[foo$name,]
#   [,1] [,2]
# c    3    6
# a    1    4 
```

但问题是我们很容易错过执行此操作，并在我们的代码中隐藏错误。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T21:52:37.993

这是一个功能，R 正在按文档说明工作。这通常可以通过以下几种方式处理：

1.  `stringsAsFactors = TRUE`在对 的调用中使用参数`data.frame()`。看`?data.frame`
2.  如果您讨厌这种行为，请通过以下方式全局设置选项

    ```
    options(stringsAsFactors = FALSE) 
    ```

3.  （正如@JoshuaUlrich 在评论中指出的那样）第三种选择是将字符变量包装在`I(....)`. 这会将分配给数据框组件的对象的类更改为 include `"AsIs"`。一般来说，这应该不是问题，因为对象继承了（在这种情况下）类`"character"`，所以应该像以前一样工作。

您可以通过以下方式检查`stringsAsFactors`当前运行的 R 进程的默认值：

```
> default.stringsAsFactors()
[1] TRUE 
```

这个问题比范围稍宽`data.frame()`，因为这也会影响`read.table()`. 在该函数以及上面的两个选项中，您还可以通过参数告诉 R 变量的所有类是什么`colClasses`，R 会尊重这一点，例如

```
> tmp <- read.table(text = '"Var1","Var2"
+ "A","B"
+ "C","C"
+ "B","D"', header = TRUE, colClasses = rep("character", 2), sep = ",")
> str(tmp)
'data.frame':   3 obs. of  2 variables:
 $ Var1: chr  "A" "C" "B"
 $ Var2: chr  "B" "C" "D" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T04:25:28.850

在下面的示例数据中，作者和标题会自动转换为因子（除非您`stringsAsFactors = FALSE`在创建数据时添加参数）。如果我们忘记更改默认设置并且不想全局设置选项怎么办？

我在某处找到的一些代码（很可能是 SO）用于`sapply()`识别因子并将它们转换为字符串。

```
dat = data.frame(title = c("title1", "title2", "title3"),
                 author = c("author1", "author2", "author3"),
                 customerID = c(1, 2, 1))
# > str(dat)
# 'data.frame': 3 obs. of  3 variables:
#   $ title     : Factor w/ 3 levels "title1","title2",..: 1 2 3
#   $ author    : Factor w/ 3 levels "author1","author2",..: 1 2 3
#   $ customerID: num  1 2 1

dat[sapply(dat, is.factor)] = lapply(dat[sapply(dat, is.factor)], 
                                 as.character)
# > str(dat)
# 'data.frame':  3 obs. of  3 variables:
#   $ title     : chr  "title1" "title2" "title3"
#   $ author    : chr  "author1" "author2" "author3"
#   $ customerID: num  1 2 1 
```

我*认为*这比使用参数重新读取数据集要快`stringsAsFactors = FALSE`，但从未测试过。

# html - 这个网站是如何进行他们的启动页面/年龄验证的？

> ID：12982904
> 
> 赞同：0
> 
> 时间：2012-10-19T21:47:21.613
> 
> 标签：html, apache, .htaccess, web

我正在查看这个网站 - [http://www.shopmss.com/](http://www.shopmss.com/) - 我想知道他们是如何进行启动页面、年龄验证并将所有内容存储在同一个 URL 'shopmss.com' 上的。在您返回商店之前单击 3 个屏幕。

我的第二个问题是，你能在不设置 cookie 的情况下做到这一点吗？即附加浏览器栏URL 的Javascript？还是有什么`mod_rewrite`？

编辑：我认为这是一个相关的问题，因为我正在探索完成任务的最佳实践，我认为它会有一些技术性的东西。我的错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:54:42.000

该站点正在设置一个名为`BX`. 这可能是跟踪会话，在其中他们可以根据会话的状态显示不同的内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-19T21:53:17.137

他们正在使用框架集。检查来源。

# asp.net-mvc - 向 AuthorizeAttribute 构造函数添加参数会导致 MvcSiteMapProvider 失败？

> ID：12982905
> 
> 赞同：0
> 
> 时间：2012-10-19T21:47:31.393
> 
> 标签：asp.net-mvc, mvcsitemapprovider

我一直在使用基于授权属性的 MvcSiteMapProvider，直到我们引入了一个从`AuthorizeAttribute`. 主要区别在于它的构造函数签名：

```
public MyAuthorizeAttribute(param RoleCode[] roles) {
    Roles = string.join(",", roles.Select(r => r.ToString());
} 
```

并且... MvcSiteMapProvider 显示了意外的结果：只有标记为的操作`MyAuthorizeAttribute`变得不可见。我已经通过禁用此构造函数来检查这一点——在向构造函数添加参数之前，一切都照常进行。此外 - 它不是`params`特定的 - 任何参数（事件 int）都会导致这种行为。

正如我从 MvcSiteMapProvider 来源中了解到的那样，它会发出一些代码来模拟授权属性 - 但看起来不可能保存由外部代码生成的程序集。我知道有一种解决方法 - 使用某种可枚举的属性，但是你有什么建议可以让它与构造函数参数一起工作吗？你知道为什么 MvcSiteMapProvider 会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:57:44.907

所以，在花了一些时间调试之后，我意识到了答案：**动态代理**。

问题是在 MVC 框架内的请求执行期间，没有简单的方法可以找出派生自的类如何`AuthorizeAttribute`执行其工作。在访问检查失败的情况下，有些可能会抛出异常，有些 - 返回 401 状态代码，有些会立即重定向到登录页面，等等。

但是 MvcSiteMapProvides 做到了！它使用以下解决方法：

*   如果类是`AuthorizeAttribute`：
    *   创建一个`InternalAuthorize`相当简单的类实例。
    *   复制那里的所有属性并
    *   调用`AuthorizeCore`返回布尔值的方法。
*   别的
    *   生成从某种属性派生的代理类，
    *   create instance, */// << 这里我们得到一个异常*
    *   复制那里的所有属性并
    *   调用`AuthorizeCore`返回布尔值的方法。

很明显，制作代理并不是一件容易的事，它知道您的构造函数参数。当然，默认构造函数缺失的异常会被抛出，但它会被空的 catch 子句消耗。这真的很可悲——至少一个调试跟踪可以为我节省几个小时。

所以最后的答案是：

*   显然你应该使用无参数属性构造函数（为什么哦，为什么在任何地方都没有提到？）
*   制作自定义 acl 提供程序：实现`IAclModule`接口并在其中释放您对自己的授权属性的了解。

# mysql - mysql导入过程中ibdata1文件大小没有增加？

> ID：12982913
> 
> 赞同：0
> 
> 时间：2012-10-19T21:48:28.147
> 
> 标签：mysql, wiki

我正在尝试从本地 mysql 5.5 服务器上的英文 wiki 转储中导入 categorylinks sql 文件（大小几乎为 8 GB）。我是通过命令行完成的。导入过程自上周以来一直在进行，我可以通过检查 max(cl_from) 或使用显示当前插入查询的“show processlist”来肯定地验证数据是否已插入到 categorylinks 表中。

我唯一的困惑是 mysqlserver\data 文件夹中的 ibdata1 文件大小根本没有增加。我在某处读到 ibdata1 是包含 innodb 实际数据的文件。那么在执行插入查询以将数据插入到 categorylinks 表中时，ibdata1 文件大小不应该增加吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:57:31.717

您的 my.cnf 很可能启用了[**innodb_file_per_table 。**](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_file_per_table)

禁用 innodb_file_per_table 后，进入 ibdata1 的内容如下：

*   表数据
*   表索引
*   [**MVCC（多版本并发控制）数据**](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)
    *   回滚段
    *   撤消空间
*   表元数据（数据字典）
*   双写入缓冲区（后台写入以防止依赖操作系统缓存）
*   插入缓冲区（管理对非唯一二级索引的更改）
*   [图示](http://www.scribd.com/doc/31337494/XtraDB-InnoDB-internals-in-drawing)

启用 innodb_file_per_table 后，每个 InnoDB 表及其索引都存储在`.ibd`其各自 DB 文件夹下的文件中。例如，mydb.mytable 对于[**datadir**](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_datadir) /var/lib/mysql 存储如下：

*   `/var/lib/mysql/mydb/mytable.frm`
*   `/var/lib/mysql/mydb/mytable.ibd`

# iphone - 模态显示的表格视图没有导航栏

> ID：12982916
> 
> 赞同：0
> 
> 时间：2012-10-19T21:48:42.607
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, ios6

当我以模态方式呈现视图控制器时：

> // 模态显示导航控制器。
> 
> [self presentModalViewController:theNavController Animation:YES];

导航栏被遮住了弹出的视图！我怎样才能让导航栏不被掩盖？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:14:00.667

答案可以在[iPhone 上找到： Show modal UITableViewController with Navigation bar](https://stackoverflow.com/questions/4600448/iphone-show-modal-uitableviewcontroller-with-navigation-bar) and [UINavigationBar rejects to show in Modal View Controller](https://stackoverflow.com/questions/3690917/uinavigationbar-refuses-to-show-in-modal-view-controller)！

您需要将 包装在`UIViewController`中`UINavigationController`，然后显示导航控制器：

```
AccountViewController* accountViewController = [[AccountViewController alloc] initWithNibName:@"AccountView" bundle:nil]; 
... 
// Initialize properties of accountViewController 
... 
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:accountViewController]; 
[self.navigationController presentModalViewController:navController animated:YES]; 
[navController release]; 
[accountViewController release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:17:02.467

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewContorller:someViewController];
[self presentModalViewController:navController animated:YES]; 
```

# r - 如何使用 RCurl 从 WSJ 下载文章

> ID：12982925
> 
> 赞同：2
> 
> 时间：2012-10-19T21:49:41.687
> 
> 标签：r, web, text-mining

我正在尝试使用 RCurl 和 XML 包从 WSJ（华尔街日报）下载和挖掘文章。但是，每当我从 RCurl 使用 getURL 时，我都会得到可供公众查看的文章版本。

我想做的是下载文章的完整版本——因为我是付费会员。我想我必须通过登录凭据，当我调用函数 getURL 时，但是，我不知道该怎么做..

1.  这些信息是否存储在 cookie 中？
2.  我是否需要“经过身份验证”-无论区别（可能是有意的）是什么？

如果有人能解释诸如 WSJ 之类的网站如何使用登录信息来获取数据，以及我如何调整 RCurl 以考虑这些信息，我将不胜感激。一个非常简单的示例将有助于解释设置 cookie（文件、jar、..）等的不同概念

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T15:08:03.710

通常，身份验证信息不存储在 cookie 中。相反，“会话 cookie”存储在您的计算机上 - 并指的是存储在服务器上的身份验证。有关更多信息和提示，请参阅[Wikipedia 上的会话管理文章。](https://en.wikipedia.org/wiki/Session_cookie#Session_management)

所以基本上你需要为这个站点创建一个 cookie jar 文件，使用 curl 登录（这可能很痛苦，因为 WSJ 不使用标准的基于表单的 POST，而是依赖于 javascript），然后你就可以告诉 curl 对文章的以下请求重新使用 cookie。阅读[此答案](https://stackoverflow.com/a/15451157/333599)以了解如何在实践中做到这一点。

# java - 快速音频文件输出

> ID：12982927
> 
> 赞同：2
> 
> 时间：2012-10-19T21:50:02.997
> 
> 标签：java, multithreading

我最近完成了一个小游戏，并一直在尝试为其添加音频。[目前我拥有的音响系统正在工作（基本上与这里](https://stackoverflow.com/questions/2416935/how-to-play-wav-files-with-java)的最佳答案相同的代码 ），但在每次输出（~200-300 ms）期间都有一个明显的停顿。由于这是一款快速游戏，我正在寻找更快的东西。我没有使用线程的经验，但这些是否适用于这里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T22:03:49.580

不是*每次*您希望以音频格式播放其内容时都读取文件，而是将文件一次读取到字节数组中，然后从该字节数组中读取音频。

```
public static byte[] getBytes(String file) {
    RandomAccessFile raf = new RandomAccessFile(file, "r");
    byte[] bytes = new byte[(int) raf.length()];
    raf.read(bytes);
    return bytes;
} 
```

然后，您可以简单地更改`playSound`方法以将字节数组作为参数，然后将它们写入`SourceDataLine`实例以播放声音（就像在原始方法中所做的那样，但它在写入它们之前从文件中读取它们） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:07:04.740

您可以尝试将 BufferedInputStream 传递给重载方法 AudioSystem.getAudioInputStream() 而不是传递文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:09:02.940

调用`drain`是阻塞的，它会导致您观察到的延迟。您无需在那里等待。但是，如果您让声音输出与您的其他代码并行运行，您还应该定义如果声音缓冲区中有大量声音并且您排队更多时会发生什么。了解该`available`方法和 API 的其余部分，以便能够灵活地管理声卡并且没有任何“滞后声音”效果。

线程也可以用于此目的，但这里没有必要。声音驱动程序本身可以充分发挥并行进程的作用，单线程方法将使您的应用程序更易于设计和调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:09:41.613

尽管我很想接受这些现有答案之一，但我以一种简单的方式解决了我的问题。通过在初始化期间加载所有引用的`File`变量，延迟不会在游戏过程中的任何时候回来。但是，如果这对于查看此问题的其他人来说不是一个足够的解决方案，我也会推荐 Vulcan 的回答。

# c# - 拥有新属性的用户控件

> ID：12982929
> 
> 赞同：0
> 
> 时间：2012-10-19T21:50:09.723
> 
> 标签：c#, wpf, mvvm, user-controls

我想创建一个这样的控件：

![控制](../Images/a6e003bc402ca1e6e19b9b6b35b4e10f.png)

我创建了该控件的视图和视图模型，并添加了新属性 - “FileURL”。

我想像这样使用这个属性：

```
<vm:FileSelector FileURL="{Binding Something}"/> 
```

现在这是一个问题：

我的新控件包含按钮和文本框。我希望 FileSelector 的属性“FileURL”包含与 FileSelector 中使用的 TextBox 的“Text”相同的值。

因此，在新控件的 XAML 声明中，我想添加类似的内容：

```
<UserControl x:Class="namespace.FileSelector"
...
FileURL="{Binding ElementName=txtBoxExampleName, Path=Text}"> 
```

但是这种操作是不允许的。

我不知道如何使用 MVVM 模式更改 FileSelector 控件内的属性“FileURL”的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:56:39.060

假设 FileURL 是 FileSelector 中的一个`DependencyProperty`，那么您只需在 FileSelector.xaml 中执行以下操作：

```
 <TextBox Text="{Binding FileURL, RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl}}"/> 
```

# sql - 在插入期间在字符串中间插入@@identity

> ID：12982933
> 
> 赞同：1
> 
> 时间：2012-10-19T21:50:21.137
> 
> 标签：sql

我不确定这是否可能，但基本上我想做这样的事情......

```
insert into [DNSList].[dbo].[myTable] ([myValue]) values ('hello ' + convert(varchar,@@identity) + 'world') 
```

将值存储在数据库中以供稍后检索，并且需要在字符串的某个位置具有唯一值，所以想通了让 sql 跟踪唯一 id 并将其存储在条目中。

谢谢您的帮助！

顺便说一句，使用 sql server 2008

**编辑** 如果我这样做怎么办，它可靠吗？

```
declare @id as varchar
set @id = CONVERT(varchar,@@identity + 1)
insert into [DNSList].[dbo].[myTable] ([myValue]) values ('hello ' + @id + ' world') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:54:22.433

在插入之后才会确定标识列的值，因此您不能将其添加为插入的一部分......但是，您可以使用[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)执行类似的操作：

```
ALTER TABLE dbo.myTable
ADD MyValue AS 'hello ' + convert(varchar, ID) + 'world' PERSISTED 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:08:32.453

这似乎是最直接的插入方式。

```
declare @id as varchar
set @id = CONVERT(varchar,@@identity + 1)
insert into [DNSList].[dbo].[myTable] ([myValue]) values ('hello ' + @id + ' world') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T04:31:05.780

我更喜欢 Computed Column Idea，但如果 Hello world 部分是可变的，您总是可以使用输出：

```
-- What I imagine the table would look like
CREATE TABLE dbo.MyTable (
myID INT IDENTITY(1,1) NOT NULL, 
myValue NVARCHAR(2000)
)

DECLARE @TmpMyIDasString NVARCHAR(2000)
DECLARE @TmpMyIDasINT INT
DECLARE @TmpTable TABLE(tmpID) -- You can only output in a table :/

INSERT INTO dbo.MyTable (myValue)
     VALUES ('AnyText') 
     OUTPUT INSERTED.myId INTO @TmpTable

     -- Put it back in variables you can actually use
     SELECT @TmpMyIDasString = LTRIM(tmpID), 
            @TmpMyIDasINT = tmpID 
       FROM @TmpTable

     -- Update!  
     UPDATE dbo.MyTable 
        SET myValue = myValue+@TmpMyIDasString 
      WHERE myID = @TmpMyIDasINT 
```

它确实让你在插入后进行额外的更新......

# alarmmanager - 带有 Sqlite 数据库的警报

> ID：12982936
> 
> 赞同：0
> 
> 时间：2012-10-19T21:50:31.247
> 
> 标签：alarmmanager, android-notifications, android-pendingintent

嘿，我正在开发一个提醒应用程序，所以我设法从数据库内的表中创建警报，并使用 cols 通知（ReminderID，ReminderTitle，activeOrNot，day，week，......）

这是使用for循环从表中设置警报的交易，它仅查询设置的活动警报

但问题是，当用户单击通知并映射数据库中的自动增量提醒 ID 时，通知弹出给用户只需要用户之前设置的通知 ID 并将警报设置为不活动，因此在进一步设置时警报它没有看到已经通知的警报

我正在使用 Pendingintent.getbrodcast 设置通知

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T14:05:00.033

所以我在 4 天后得到了这个问题的解决方案

当您设置警报时，您应该具有接收器类并在分配 PendingIntent 时

我为意图添加了额外的通知ID，我创建了一个类来接收带有额外内容的捆绑包，它包含通知ID并更新到数据库

# html - 中心水平形式的 twitter 引导程序

> ID：12982957
> 
> 赞同：3
> 
> 时间：2012-10-19T21:52:47.853
> 
> 标签：html, css, ruby-on-rails, twitter-bootstrap

我已经尝试了所有我能想到的东西，并查看了文档/教程/github 自述文件的每一点。

我正在构建一个使用简单表单和 twitter 引导程序的简单 Rails 应用程序。

我希望我的表单位于页面的中心，并且可以通过在我的引导 css 文件中添加它来使字段移动到中心：

```
body {
    text-align: center;
} 
```

结果是：

![伊姆古尔](../Images/0094423cd43239f0faf4a9870f1ae141.png)

无论我做什么，我都无法让标签“ `control-label`”对齐到中心。我尝试过使用`id`其他许多东西。

这是我的表单的代码：

```
 <%= simple_form_for @message, :html => { :class => 'form-horizontal' } do |f| %>

        <%= f.input :phone, :input_html => { :maxlength => 10 }, :label_html => { :class => 'control-label' } %>
       <%= f.input :message %>

       <div class="form-actions" id="sendbtn">
            <%= f.button :submit, :class => 'btn-primary' %>
       </div>

    <% end %> 
```

和生成的html：

```
<div class="container">
    <div class="page-header">
        <h1 id="pagetitle">New Message</h1>
    </div>
    <form id="new_message" class="simple_form form-horizontal" novalidate="novalidate" method="post" action="/messages" accept-charset="UTF-8">
        <div style="margin:0;padding:0;display:inline">
        <div class="control-group tel optional">
            <label class="tel optional control-label control-label" for="message_phone">Phone</label>
            <div class="controls">
                <input id="message_phone" class="string tel optional" type="tel" size="50" name="message[phone]" maxlength="10">
            </div>
        </div>
        <div class="control-group text optional">
            <label class="text optional control-label" for="message_message">Message</label>
        <div class="controls">
                <textarea id="message_message" class="text optional" rows="20" name="message[message]" cols="40"></textarea>
            </div>
        </div>
        <div id="sendbtn" class="form-actions">
            <input class="btn btn-primary" type="submit" value="Create Message" name="commit">
        </div>
    </form>
</div> 
```

请问有人可以在这里提供一些支持吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T22:35:26.183

在这种情况下，以通常的方式居中（使用`margin: 0 auto`）将不起作用，因为您的表单没有附加宽度，但是您可以通过在表单中​​声明容器 div`inline-block`然后将表单文本居中来使其居中而不管宽度如何，像这样：

```
#new_message {
    text-align:center;
}

.center {
    display:inline-block;
} 
```

演示： http: [//jsfiddle.net/uyKqJ/](http://jsfiddle.net/uyKqJ/)，查看这里：http: [//jsfiddle.net/uyKqJ/show/](http://jsfiddle.net/uyKqJ/show/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:55:32.730

添加`form {margin:0 auto}`以使整个表单居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:03:03.010

您必须使用`width: some_value`和`margin:auto`使整个表格居中。（不要忘记`position:relative;`和`display:block;`）

# php - PHP mod_fcgi 与 fastcgi_finish_request();

> ID：12982964
> 
> 赞同：4
> 
> 时间：2012-10-19T21:53:18.497
> 
> 标签：php, fastcgi

我想使用该`fastcgi_finish_request()`功能。

我的服务器上安装了 CPanel，PHP 和 Apache 都是通过它配置的。由于我无法手动编辑 Apache 或 PHP 配置（因为 CPanel），我在 WHM 中使用了 easyApache 来构建它以获得 fastcgi。

我看到了一个名为 Mod FCGID 的选项，所以我启用了它。

在启用该选项的情况下重建 PHP 和 Apache 后，`undefined function`调用该`fastcgi_finish_request`函数时我仍然会调用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-24T23:31:30.177

有点晚了，但对人们来说是个好信息。根据我使用 PHP 5.5.7 的经验。

PHP 使用 mod_php（标准 Apache）：

```
ob_start();
header("Connection: close\r\n"); 
header('Content-Encoding: none\r\n');

// your code here

$size = ob_get_length();
header("Content-Length: ". $size . "\r\n"); 
// send info immediately and close connection
ob_end_flush();
flush();

// run other process without the client attached. 
```

对于使用 FastCGI 和 PHP_FPM 的 PHP：

```
// your code here

fastcgi_finish_request();

// run other process without the client attached. 
```

请注意，对我们来说，在`fastcgi_finish_request()`被执行之后，`log_error`不再起作用。我认为这是因为与 Apache 的连接也被切断，它无法与 FastCGI 通信以记录错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T23:30:41.377

`fastcgi_finish_request`是**PHP-FPM** SAPI 特定函数，在标准 php-fcgi 二进制文件中不可用（由 Apache [mod_fcgid, mod_fastcgi], nginx, lighttpd 等使用）。

# c - Libevent：如何暂时禁用，然后重新启用 EV_READ？（在 C 中）

> ID：12982966
> 
> 赞同：1
> 
> 时间：2012-10-19T21:53:26.693
> 
> 标签：c, event-handling, libevent

我正在使用 libevent 处理一组端口上的数据接收。我想要完成的行为是这样的：

-假设我有一组端口，1001-1004 -读取端口上的数据，例如 1001。 -一旦回调被击中，禁用此端口 (1001) 上的进一步读取。- 一旦所有端口都接收到数据，将它们全部重新打开以进行读取。

现在我有一个缓冲区事件结构：

```
static struct bufferevent *bev[4]; 
```

我像在文档中显示的那样设置了侦听器：

```
/* Listener 1 */
sin.sin_port = htons(MIXPORT + 1);
listener1 = evconnlistener_new_bind(base, accept1, NULL,
    LEV_OPT_CLOSE_ON_FREE|LEV_OPT_REUSEABLE, -1,
    (struct sockaddr*)&sin, sizeof(sin));
if (!listener1) { perror("Couldn't create listener1"); return 1; }
evconnlistener_set_error_cb(listener1, accept_error_cb);

static void accept1(struct evconnlistener *listener,
evutil_socket_t fd, struct sockaddr *address, int socklen,
void *ctx) {
/* A new connection was received on this port */
struct event_base *base = evconnlistener_get_base(listener);
bev[0] = bufferevent_socket_new(base, fd, BEV_OPT_CLOSE_ON_FREE);

/* Callback for when (*bufevent, data READ, data WRITTEN, event OCCURRED, *void) */
bufferevent_setcb(bev[0], read1, NULL, echo_event_cb, NULL);

/* Set bufferevent to be able to read */
bufferevent_enable(bev[0], EV_READ);
} 
```

然后我给了它一个 READ 回调：

```
static void read1(struct bufferevent *bev, void *ctx) {
if(LOG) { logoutput("Data received on port 1"); }

struct evbuffer *input = bufferevent_get_input(bev);
size_t len = evbuffer_get_length(input);
data[0] = malloc(len);

/* Copy evbuffer data into array */
evbuffer_copyout(input, data[0], len);
/* Remove data from evbuffer after copying it out */
evbuffer_drain(input, len);

handle(0);
} 
```

在我的“处理”功能中，我告诉它这样做：

```
static void handle(int i)
{
/* Disable reading on port until re-enabled later */
bufferevent_disable(bev[i], EV_READ);  // I thought this should do it?!

// Do other stuff...
random_function();
} 
```

最后...

```
static void random_function(); {
/* Re-enable read on port */
    bufferevent_enable(bev[src], EV_READ);
} 
```

任何想法我做错了什么？当我将数据发送到随机端口时，我仍然能够发送更多、更多、更多。
蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:01:25.563

看起来您只是禁用读取套接字上的数据，但这不会阻止某人在该套接字上向您发送数据（操作系统将缓冲来自他们的大量数据，因为它假设您想要读取有时间的时候看看）。

您无法阻止它们发送数据，但您可以停止与这些端口的新连接（通过在您想要再次之前不接受已阻止端口上的连接），并且如果它们确实向您发送数据，您可以关闭已关闭端口上的连接（这意味着您仍然想在这些端口上阅读，但如果他们向您发送任何东西，您就是`close()`他们或类似的东西。）

# c# - 从 URL 获取条目

> ID：12982970
> 
> 赞同：3
> 
> 时间：2012-10-19T21:53:43.650
> 
> 标签：c#, asp.net

我正在编写经典的 asp.net 网站并遇到问题。

通常在 URL 中通过这样做发送数据：localhost/MyrandomPage.aspx?UserName=RandomUsername

但我正在尝试使页面更加个性化，所以我希望 Url 看起来像这样：

localhost.com/Profile/RandomUsername

而且我找不到如何在 URL 中的斜线后检索 RandomUserName 的方法。

我完成了路由：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapPageRoute("",
            "/Pages/{UserName}",
            "~/Pages/Profile.aspx");
    } 
```

但是我如何检索用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:57:04.883

假设您的路由方案是正确的并且一切正常，您可以从请求上下文中获取路由值（在本例中为“操作”）：

```
string userName = (string) requestContext.RouteData.Values["UserName"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:58:19.597

你应该能够使用它 `Page.RouteData.Values["UserName"] as string`

Scott Gu 有一篇[很好的博客文章](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)，涵盖了网络表单中的路由。

# iphone - 重新加载 Tapku 日历

> ID：12982971
> 
> 赞同：0
> 
> 时间：2012-10-19T21:53:51.920
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, ios6

如何重新加载 Tapku 日历？

这是我的情况：我有一个名为“日历”的视图控制器，其中包含一个 Tapku 日历。当用户点击某个日期时，下方的表格视图会显示该日期的事件。

> 如果用户点击一个日期，一个名为“Detail”的视图控制器将被推送到导航堆栈上，其中包含有关事件的信息。

在名为“Detail”的视图控制器上是删除此事件的选项。如果用户删除了事件，视图控制器应该被推开。

> “日历”视图再次出现，理论上应该重新加载！

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:09:25.177

您所要做的就是调用 [self.monthview reload];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T06:49:19.683

@iMobileDev 你可以试试这个：

```
[self.mTableView reloadData]; 
```

# iphone - 每次苹果发布新的 iOS 版本时，我是否需要继续“重新编译”我的 iPhone 应用程序代码？

> ID：12982972
> 
> 赞同：1
> 
> 时间：2012-10-19T21:53:55.800
> 
> 标签：iphone

新来的家伙，但有一个真正的问题。我有一个使用 SDK4 开发的 iPhone 应用程序。随着苹果推出新的 iOS 版本 6，我的代码是否需要在新的 SDK 上重新编译以使其与版本 6 兼容？

现在它在iOS6上崩溃了。另外，每次苹果推出新版本时我都需要这样做吗？我想知道地球上所有其他应用程序都已经这样做了吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T22:07:01.163

主要 iOS 升级的问题是方法弃用。您的代码的某些部分可能会依赖于 iOS6 不支持的方法。发生这种情况时，您应该首先检查 API 更改，然后使用最新的 API 重新编译它。如果您的代码库在 iOS6 上运行良好，则无需重新编译它，但不幸的是，这似乎不是您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:13:00.680

有时你也不需要。大多数时候，Apple 会发布库更新，因此有时旧代码不再兼容。你必须重新编译它，否则你会发现问题。

例如，我有一个在 iOS 5 上运行的应用程序。随着 iOS 6 的更新，我不得不引用一些新代码，因为该应用程序因 SIGABRT 而崩溃。在 iOS 6 之前它运行良好。通过 Xcode 的 Debugger，大多数时候发现问题并不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T22:19:25.590

我发现大多数时候崩溃是由我不知道的应用程序中现有的错误引起的。细微的变化揭示了它。它很少只是重新编译的问题，而是修复该错误的问题。

只是重新编译可能很危险。Apple 可以（并且确实）检测到您的应用程序是用什么版本的开发工具编译的，维护一些可以让您的应用程序运行的行为。更新，您将获得新的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T22:59:45.810

我不必为了IOS6而重新编译我的。他们工作得很好。但我不得不调整 4" iphone 5 屏幕。

# php - 我期待不同的sql结果

> ID：12982974
> 
> 赞同：0
> 
> 时间：2012-10-19T21:54:00.743
> 
> 标签：php, mysql

我正在使用这个：

```
foreach($affid as $id) {

   $id = @mysql_real_escape_string(strip_tags($id));

   $otherid = $_POST['postid'];

   $sql = "UPDATE dlbprog SET affId=".$id." WHERE id=".$otherid;

   echo $sql;

   //@mysql_query($sql) or die(mysql_error());
} 
```

结果是这样的：

```
UPDATE dlbprog SET affId=323 WHERE id=5
UPDATE dlbprog SET affId=424 WHERE id=5 
```

而我想让它说：

```
UPDATE dlbprog SET affId=323 WHERE id=1
UPDATE dlbprog SET affId=424 WHERE id=5 
```

（它将最后一个结果保留为当前结果）

这是我的表格：

```
<table border="1" width="90%" align="center" cellspacing="0" cellpadding="2">
 <tr>
  <td align="left" colspan="2">'.$row["description"].'</td>
 </tr>
 <tr>
  <td align="left" width="55%">
    To Sign Up <a href="'.$row["progUrl"].'" target="_blank">Click Here</a>
    <br />
    <input type="checkbox" name="blocked" value="'.$row['ownerId'].'"  />
    &nbsp;Block this program
  </td>
  <td align="left" width="45%">
   Your Affiliate Id: &nbsp; 
   <input type="text" class="input" size="30" name="affid[]" value="'.$row['affId'].'">
   <input name="postid" value="'.$row["id"].'">
  </td>
 </tr>
</table>
<p>&nbsp;</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T21:56:11.170

`$_POST['postid']`是一个过帐值。这个值在你的循环中不会改变，所以很明显它在每次迭代中都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:04:01.933

改变

`<input name="postid" value="'.$row["id"].'">`

至

`<input name="postid[]" value="'.$row["id"].'">`

将 PHP 更改为

```
foreach($i = 0; $i < count($affid); $i++) {
  $id = @mysql_real_escape_string(strip_tags($affid[$i]));
  $otherid = @mysql_real_escape_string(strip_tags($postid[$i]));

  $sql = "UPDATE dlbprog SET affId=".$id." WHERE id=".$otherid;

  echo $sql;

  //@mysql_query($sql) or die(mysql_error());
} 
```

# wordpress - 如何爬取所有wordpress页面

> ID：12982977
> 
> 赞同：1
> 
> 时间：2012-10-19T21:54:10.050
> 
> 标签：wordpress, dns, web-crawler, reverse-dns

我想爬取所有的 wordpress 博客。有没有什么快速的方法可以列出 wordpress.com 下的所有二级域名？例如[http://developer.wordpress.com/](http://developer.wordpress.com/)

如果我们能得到所有二级域地址的列表，那么爬取所有数据集应该很容易和快速。

所以我们可以通过 1) dns 查找网站的所有二级域名。2）或通过其他黑客技术？

感谢您对这个问题的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-31T16:31:25.910

您可以在一些实时搜索的在线应用程序上使用 google dorks 轻松找到子域，例如[http://www.iseebug.com/find-sub-domain-online-search-domain/](http://www.iseebug.com/find-sub-domain-online-search-domain/) 以及在线爬虫，例如[http:// iseebug.com/sandVox/](http://iseebug.com/sandVox/)

# unit-testing - 如何在 Resharper 7 中支持 MBUnit 测试

> ID：12982978
> 
> 赞同：7
> 
> 时间：2012-10-19T21:54:16.960
> 
> 标签：unit-testing, visual-studio-2012, mbunit, gallio, resharper-7.0

自从我升级到 VS2012 后，我的 R#5 许可证就不再有用了。下载 R#7.0.1 并安装后，我意识到 MbUnit 不再内置对 R#7 的支持。

因为我花了一些时间弄清楚如何让插件运行，所以我会在这里发布以节省其他人的时间（如果我需要再做一次，为了让自己找回它......）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T21:54:16.960

快速浏览一下 Gallio.ResharperRunner 上的 Gallio 源代码，[我](http://code.google.com/p/mb-unit/source/browse/#svn/trunk/v3/src/Extensions/ReSharper/Gallio.ReSharperRunner)发现有人已经编写了代码。[我在Gallio Build Server](http://ccnet.gallio.org/server/local/project/MbUnit%20v3/ViewProjectReport.aspx)上找不到任何发行版，所以我从 SVN 中提取了最新的 R#Runner 代码。（我得到了 rev 3359）并`v3\src\Extensions\ReSharper\Gallio.ReSharperRunner\Gallio.ReSharperRunner70.vs2010.csproj`在 VS2012 中编译。

该项目已更改，以便它引用`c:\Program Files\Gallio\bin\gallio.dll`，我还将`Gallio.ReSharperRunner70.plugin`文件更改为“内容”和 PreserveNewest（而不是不复制）

然后我将以下 3 个文件从`debug\bin`文件夹复制到：`C:\Users\*MYUSERNAME*\AppData\Local\JetBrains\DotNet\vAny\Plugins`

*   加里奥.dll
*   Gallio.ReSharperRunner70.dll
*   Gallio.ReSharperRunner70.plugin

瞧 - 可以使用 Resharper 7 在 VS2012 中执行 MbUnit 测试

注意：不确定 ResharperRunner 代码是否 100% 稳定 - 我似乎注意到了一些小故障，但至少我的测试再次出现在 R# 中。

一旦我弄清楚如何将文件附加到问题中，我将上传已编译的文件。嗯 - 不知道怎么做，所以我把它上传到我的网站[http://www.albrektsen.net/Gallio.ResharperRunner70.zip](http://www.albrektsen.net/Gallio.ResharperRunner70.zip)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-17T22:25:23.490

这是 Resharper 7.1 的编译插件： [http ://code.google.com/p/mb-unit/issues/detail?id=900#c9](http://code.google.com/p/mb-unit/issues/detail?id=900#c9)

# javascript - $(window).width() 在 IE9 中不起作用

> ID：12982982
> 
> 赞同：0
> 
> 时间：2012-10-19T21:54:36.913
> 
> 标签：javascript, jquery

> **可能重复：**
> [$(window).width() 在 IE9 中不起作用](https://stackoverflow.com/questions/7016268/window-width-not-working-in-ie9)

我正在尝试为响应式网页设计做一些 DOM 操作。在 IE 中，这不起作用。

```
var w = $(document).width(); 

if (w > 940) {
console.log("If test");     
} else {
console.log("Else test"); 
```

如果我使用 window.width，它可以在 IE 中工作，但在其他浏览器中停止工作。有没有跨浏览器的方式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:59:30.607

```
var maskWidth = window.innerWidth;
var maskHeight = window.innerHeight; 
```

根据，[$(window).width() 在 IE9 中不起作用](https://stackoverflow.com/questions/7016268/window-width-not-working-in-ie9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T22:01:44.213

响应式设计应该在 CSS 中使用媒体查询来完成：

```
@media all and (max-width:940px) {
    /* some style rules that should be put in place
       if the window is smaller than 940px wide */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T22:08:04.793

您的方法存在一个固有问题，那就是“响应式”是指设计响应大小的变化。通过您在此处执行的操作，您只会在浏览器加载时得到检测。

例如，假设您正在使用 iPhone 浏览该网站，并且您将手机 45 度转为横向而不是纵向。本质上，你的宽度只是改变了，但你的 width() 没有。

如果您需要使用 javascript 进行 DOM 操作并且无法使用纯 CSS 完成它（这通常是最好的方法），我建议您查看几个选项：

1.  [查看 Rob Tarr http://seesparkbox.com/foundry/responsive_web_design_and_javascript](http://seesparkbox.com/foundry/responsive_web_design_and_javascript)提出的 matchMedia() 方法
2.  使用[http://modernizr.com/](http://modernizr.com/)或其他已经为您解决此问题的库。

# r - 来自文件存储数据帧 (ffdf) 的子集超出内存

> ID：12982991
> 
> 赞同：1
> 
> 时间：2012-10-19T21:55:29.817
> 
> 标签：r, statistics

我正在 32 位 Windows 机器上处理大约 17M x 4 值的数据集。这在 GNU R 中需要 ~700 MB - 所以当我尝试做一些增强的操作时，很容易达到 2 GB 的限制并且我收到一个内存不足的错误（无法分配向量......）。

没问题 - 有包“ff”将此类数据存储在磁盘上。但是我的第一个子集遇到了同样的错误。根据 ff 文档，我预计“[”将直接子集到另一个 ffdf 中，而无需将数据的两个副本加载到内存中。我到底错在哪里？

```
ffshares = read.table.ffdf(
  file=tmpFilename, header = FALSE, sep = ",", quote = "\"",
  dec = ".",
  col.names = c("articleID", "measure", "time", "value"),
  na.strings = c("","-1","\\N"),
  colClasses = c("integer","factor","POSIXct","integer"),
  check.names = TRUE, fill = TRUE,
  strip.white = FALSE, blank.lines.skip = TRUE,
  comment.char = "",
  allowEscapes = F, flush = F #, nrow=1000
)
# Until here, the R process requires about 200M

ffshares = ffshares[ffshares[,"articleID"] %in% articles[,"articleID"],]
# As I try this, memory consumption exceeds 1.7G and the available limits 
```

注意：articles 是一个大约 30K 行的数据框。articleID 是一个简单的整数。

奖励问题： ffshares[,"articleID"] 有效，但 ffshares$articleID 无效。根据文档，美元（$）应该像在数据框中一样工作？！

感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-19T22:23:52.907

对于这不是您问题的直接答案，我深表歉意，但我已将[bigmemory 包](http://cran.r-project.org/web/packages/bigmemory/index.html)用于类似大小的对象。filebacked.big.matrix 函数和大矩阵优化运算符。如果您没有直接回答您的问题，您可能会发现它很有用。

# plone - Plone - 如何使用分面导航？

> ID：12982992
> 
> 赞同：0
> 
> 时间：2012-10-19T21:55:29.803
> 
> 标签：plone, faceted-search

我有一个克隆网站，并且添加了一个名为游戏的内容类型。现在有几个游戏已经添加并且可以查看。我想使用 eea.facetednavigation 模块，您可以在此处阅读：http: [//plone.org/products/eea.facetednavigation](http://plone.org/products/eea.facetednavigation)。

分面导航背后的想法是可以快速过滤所有对象，这就像进行搜索一样。例如，我根据流派将我所有的游戏归入大约十二个类别之一。我有“冒险”“动作”“解谜”“角色扮演”等选项。

我想在用户可以单击“拼图”的一侧有一个区域，然后让页面仅显示拼图游戏。我还想在其他地方复制这种行为，以便用户可以按价格过滤。当然，如果用户对两者都进行过滤，那么这也应该有效。

我正在对用户可以过滤的四五个不同方面进行成像。现在，我已将 eea.facetednavigation 放在我的 buildout.cfg 文件中，当我以“管理员”身份登录时，我会在“游戏”选项卡（我添加了一些游戏）下看到启用分面导航的选项。但是，当我这样做时，我会看到一个我无法理解的无用屏幕，并且不允许我设置我想到的过滤标准。我附上了屏幕截图。

正如您在屏幕截图中看到的那样，分面导航为我提供了“视频链接”、“视频文件”、“页面”、“新闻项目”等选项。这些都不是与我的游戏相关的字段。如果我在该门户类型上单击“更多”，我会看到一个名为“游戏”的选项——因为我已经创建了该内容类型——但选择它并没有给我想要的行为。

在屏幕截图中很难看到，但“游戏”选项卡在顶部突出显示。那是我启用了分面导航的文件夹，也是我添加了几个游戏的文件夹。

我已经尝试阅读有关分面导航的文档——http: [//plone.org/products/eea.facetednavigation——](http://plone.org/products/eea.facetednavigation)但我已经考虑了一个小时，我就是无法理解它.

![我的 plone faceted 导航配置屏幕是什么样子的。](../Images/6812e5f8d889fe1710cb3e6fb1c02f9b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:09:40.077

假设“价格”是您的内容类型的整数字段，您需要将其作为portal_catalog 中的索引启用，以使其可用作eea-searchform 中的标准。

因此，首先在profiles/default/catalog.xml 中注册索引，如下所示：

`<?xml version="1.0"?> <object name="portal_catalog" meta_type="Plone Catalog Tool"> <index name="Price" meta_type="FieldIndex"> <indexed_attr value="getPrice"/> </index> </object>`

然后在 eea-searchform 添加一个小部件，点击其中一个加号图标，选择“范围”类型，并在索引中选择“价格”。

对您的其他字段进行类似操作，为您的类别小部件选择复选框等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:10:03.073

如果您使用标准 Plone“标签”功能对游戏进行分类（如果您编辑内容，则在“分类”选项卡上），那么您应该能够简单地添加“选择”小部件并将其设置为搜索“标签”索引（在“用于搜索的目录索引”下）。

我同意分面导航 UI 相当迟钝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:38:37.063

只需添加“复选框”类型的小部件，然后从目录索引中选择“主题”，然后在“目录从目录中获取唯一值作为词汇表的替代品”上选择“是”。这应该为您提供带有类别的复选框列表。还添加在“游戏”类型上选择的隐藏（您可以通过单击眼睛图标将其隐藏）小部件，因此结果会根据该内容类型进行预过滤，因此“主题”小部件仅包含游戏类别，而不是来自网站的全部.

对于奖品，请遵循 Ida 的答案。

# xcode - 单击菜单按钮打开网站

> ID：12982995
> 
> 赞同：0
> 
> 时间：2012-10-19T21:55:47.787
> 
> 标签：xcode, macos, web, hyperlink

[编辑：哇，这仍然有效？嗯。]

抱歉，这是在另一个问题中提出并回答的，我不确定这是怎么发生的？对不起，这是我的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:05:26.000

NSWorkspace 负责那种东西。

```
[[NSWorkspace sharedWorkspace] openFile:@"http://www.mylink.com"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T22:07:19.893

有很多方法可以做到这一点 - 但最简单的是使用`open`shell 命令：

`open http://www.google.com`

如果您想从 C、C++ 或 Objective-C[++] 执行此操作：

`system("open http://www.google.com");`

# javascript - 如何在 Raphael JS 中模拟拖动结束事件？

> ID：12982996
> 
> 赞同：5
> 
> 时间：2012-10-19T21:55:48.570
> 
> 标签：javascript, jquery, raphael, drag

我正在使用 Raphael JS 2.0 并想模拟对另一个元素的拖动结束，然后删除正在处理的当前元素。如果它可以使用 jquery 来完成，那也很棒。

像这样的东西：

```
var child = currentShift.data('endChild');
var newX = child.attr('x');
if (this !== currentShift)
{
    newX = child.attr('x')-day;
}
currentShift.attr({y: child.attr('y'), x: newX, height: child.attr('height')});
$(currentShift.node).mouseup();
child.remove(); 
```

我收到错误，因为子元素`this`位于拖动的“移动”部分。但它被用来与`currentShift`.

我知道还有其他一些方法可以获得类似的效果，但我想知道是否有某种方法可以模拟任意元素的拖动端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T00:24:43.063

看起来您可以使用对拖动结束函数的引用（在我的情况下`up`），`call()`只需将引用（在我的情况下`currentShift`）传递给您的 Raphael JS 元素。我的代码现在看起来像这样：

```
var child = currentShift.data('endChild');
var newX = child.attr('x');
if (this!==currentShift)
{
    newX = child.attr('x')-day;
}
currentShift.attr({y: child.attr('y'), x: newX, height: child.attr('height')});
if (this !== currentShift)
    up.call(child);
else
    up.call(currentShift);
child.remove(); 
```

这仍然不是我想要的，因为如果用户一直按住鼠标，即使在元素被删除后它也会尝试调用我的拖动移动函数（即它实际上并没有强制拖动事件停止，它只是调用 up 事件，然后给出很多非致命错误，因为在尝试调用 move 函数时元素不再存在。）

如果有人可以在接下来的几天内提供有关如何强制结束拖动的答案（因此不再调用 move 函数），即使用户继续按住鼠标，我也会接受该答案。否则，我只会接受这个。

# jms - JMeter JMS 点对点请求响应：“未收到回复消息”

> ID：12982998
> 
> 赞同：3
> 
> 时间：2012-10-19T21:55:58.150
> 
> 标签：jms, activemq, jmeter

我创建了 JMS 点对点请求响应测试，如 JMeter 手册中所述。

我的 JMeter 点对点配置：

![在此处输入图像描述](../Images/1cf184fe52a1b5561a7dff9175cf9c9a.png)

但是，当我运行它时，它总是响应超时。如果我查看采样器日志文件，我似乎`rm="No reply message received"`：

```
<sample t="1016" lt="0" ts="1350683197138" s="false" lb="JMS Point-to-Point" rc="" rm="No reply message received" tn="Attributes Fetch 1-1" dt="text" by="0"/> 
```

我知道我的消费者已正确设置为根据 replyTo JMS 标头进行回复。事实上 - 如果我查看 ActiveMQ 管理控制台，它会显示我指定的回复队列已排队和出队，这与测试中的消息数完全相同。所以看起来 JMeter*正在*对它们进行出队，但在那之后出现了问题！

我的 ActiveMQ 管理控制台：

![在此处输入图像描述](../Images/a2c61a2a898292f94e107feb46a9968a.png)

有没有人能够使用 JMeter 和 ActiveMQ 成功地做到这一点？
我正在使用 JMeter 2.8 和 ActiveMQ 5.6.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:35:22.670

这当然是由于选择了相关属性。

请仔细阅读：

*   [http://jmeter.apache.org/usermanual/component_reference.html#JMS_Point-to-Point](http://jmeter.apache.org/usermanual/component_reference.html#JMS_Point-to-Point)