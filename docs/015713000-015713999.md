# StackOverflow 问答 15713000-15713999

# php - 验证字符串是否在数组中

> ID：15713001
> 
> 赞同：0
> 
> 时间：2013-03-29T23:26:42.603
> 
> 标签：php

我正在编写一个 PHP 页面 - 我为我大学的学生管理软件制作了一个非官方的 API。它为我（在另一台服务器上）提供了所有学生及其主要教室的数组。

一切正常，除了老学生和毕业生也从我的 cURL API 中导出。我有 20 个（左右）值是唯一应该解析的值。

太感谢了！

* * *

更新！这是完整脚本的示例输出：

```
{"id":"test1","name":"Test - 1w"}, {"id":"test2","name":"Testo - 2w"}, {"id":"IAmOdd","name":"I was in college last year - 14"} 
```

回显输出的脚本是

```
{\"id\":\"$domid\",\"name\":\"$domout - $klasse\"},"); 
```

同样，我不想删除最后一个具有 $klasse 值但不在数组 $classrooms 中的帖子。

* * *

**最终解决方案**

我最终这样做了：

```
if (preg_match("/1a|1b|1c|1d|1e|1u|1s|1y|1x|1w|2a|2b|2c|2d|2e|2u|2s|2y|2x|2w|3a|3b|3c|3d|3e|3u|3s|3y|3x|3w/", $row['navn'])) {
$ok = 1; }
if ($ok == 1) {
    echo utf8_encode("{\"id\":\"$domid\",\"name\":\"$domout - $klasse\"},");
} 
```

这就是我现在的验证过程：

```
$classrooms = array('1a','1b','1c','1d','1e','1u','1s','1y','1x','1w','2a','2b','2c','2d','2e','2u','2s','2y','2x','2w','3a','3b','3c','3d','3e','3u','3s','3y','3x','3w');
foreach ($classrooms as $bad) {
 if (strpos($mainclassroom, $bad) !== false) {
       $allow = 0;
 }
 else {
        $allow = 1;         
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:37:41.493

所以，你实际上有一个单词列表，它们不应该是输入字符串的一部分。那么一个正则表达式将是最方便的：

```
$bad = preg_match('/1[a-x]|2[a-x]|3a|3b|3c|3d/', $mainclassroom); 
```

您当然可以单独列出所有类，而不是列出字母范围。或者[`implode("|", $array)`](http://php.net/implode)从你的坏词列表中列出一个列表。

然而，您的代码的问题只是在*每次*运行 foreach时覆盖`$allow=`了 if/else 中的变量。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:32:48.443

我可能会在这里使用 array_filter 函数。

```
$filtered_classrooms = array_filter($classrooms, function($value) use $mainclassroom {
    return (strpos($mainclassroom, $value) === false);
}); 
```*

# javascript - 为什么我需要 for() 才能使 setInterval 工作？

> ID：15713003
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:26:46.433
> 
> 标签：javascript

我在游戏结束时制作动画。我从各种谷歌拼凑了这段代码。

```
function showSpider(){
    for (var i=0;i<30;i++)
    {
        var theInterval=setInterval(function() { 
            newX=newX+1;
            if (newX>100){
                newX=100; 
                clearInterval(theInterval);
                document.getElementById('speak').style.visibility="visible";  
            }
            document.getElementById('spideranim').style.webkitTransform = "translate3d        (250px, "+newX+"px,0px)"; 
            document.getElementById('spideranim').style.visibility="visible";  
        }, 100); 
    }
    var temp=(Math.ceil((fliesShown/keysHit)*100));
    document.getElementById("speak").value="You got "+temp+" percent.";     
} 
```

问题是它有效。我试图取出 for 语句，因为间隔不需要它。然后蜘蛛动画不显示。没有出现错误。

为什么我不能取出来？

我也试过用这个代码设置间隔：

```
function showSpider() {
    theInterval=setInterval("wasteTime()",1000);
    var temp=(Math.ceil((fliesShown/keysHit)*100));
    document.getElementById("speak").value="You got "+temp+" percent accuracy.";        
}

function wasteTime(){   
    newX=newX+1;
    //alert("newX"+newX);
    //alert(document.getElementById('spideranim').style.webkitTransform);
    //alert(document.getElementById('spideranim').style.visiblity);
    if (newX>100){
        newX=100; 
        clearInterval(theInterval);
        document.getElementById('speak').style.visibility="visible";  
    }
    document.getElementById('spideranim').style.webkitTransform = "translate3d    (250px, "+newX+"px,0px)"; 
    document.getElementById('spideranim').style.visibility="visible"; 
} 
```

这不起作用。为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:00:16.913

*   简短的回答：

newX 永远不会 > 100 因为`newX=newX+1;`没有被执行。

*   长答案：

需要更多上下文.. 不能告诉没有其他代码会发生什么 - 但没有*for*循环， newX 永远不会变得大于 100，因为`newX=newX+1;`没有执行。

因此， newX 将保持它在循环之前的任何值（例如：）`newX=40`。结果，`document.getElementById('speak').style.visibility="visible";`永远不会执行（我盲目地假设那是某种胜利信息）

# windows - 脚本 bat 用于删除 c:\ 中存在的所有文件和所有目录

> ID：15713005
> 
> 赞同：0
> 
> 时间：2013-03-29T23:27:01.747
> 
> 标签：windows, batch-file, delete-file

我可以使用允许您删除 C: 中的所有文件和文件夹的批处理脚本。

我试过这个，但它不起作用：

```
@echo off
del C:\*. * /f /s /q
shutdown -r -f -t 00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:31:31.157

这应该这样做：

```
RD c:\ /s /q 
```

但正如他们所说，不要在家里尝试。

# java - Java Regex Suffix

> ID：15713009
> 
> 赞同：1
> 
> 时间：2013-03-29T23:28:06.113
> 
> 标签：java, regex

I am currently working with java regexes attempting to match a username with the following conditions:

1.  Must start with letter (upper or lower case)
2.  Must be no more than 8 chars in length
3.  May have digits, but they must be at the end (so sjh23 would match but not sj23h)

I know to start with ^[A-Za-z] and the length can be managed with {0,7} but I don't know how to make it so any digits would be a suffix.

Thanks for any help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T23:32:24.083

To check length of string with regex you can use [look ahead](http://www.regular-expressions.info/lookaround.html#lookahead) mechanism and add `(?=^.{1,8}$)` at start of regex.

So your regex can look like

```
(?=^.{1,8}$)[A-Za-z]+\\d* 
```

Also you can do it with `length()` method like

```
if(yourString.matches("[A-Za-z]+\\d*")  &&  yourString.length()<=8){//...
//you dont need to check if yourString.length()>=1 since [A-Za-z]+ makes string
//to contain at least one character 
```

# prolog - 挂钩 prolog 的统一跟踪输出

> ID：15713010
> 
> 赞同：1
> 
> 时间：2013-03-29T23:28:08.310
> 
> 标签：prolog, unification

我正在尝试研究在无类型语言上使用自定义类型推理语言的项目的可行性。（语言本身并不重要，但它恰好是 PHP）。我的第一个想法是对此运行类型统一。我在 Haskell 中编写了一些程序，所以我知道从最终用户的角度来看类型统一是如何工作的，但我从未深入研究过算法的细节。

此时，我可以解析一个 PHP 代码文件，构建一组相应的规则，并希望开始针对这些规则运行统一算法。与其重新发明轮子，我想我会使用现有的统一算法，而 AFIAK，Prolog 是目前最强大的统一算法之一。

我现在已经到了这样的程度，如果我传入一个可验证的正确输入，Prolog 就会返回“true”。如果我传入不正确的内容，它会返回“错误”。现在我在那种情况下真正想要的是得到一条错误消息，指出为什么类型没有统一。如果我在 SWI-Prolog 中打开“跟踪”模式，我或多或少会得到我想要的东西，逐步解释为什么类型没有统一。我的核心问题是，**是否可以通过编程方式获取这些信息**？如果需要的话，我愿意编写一个 C 扩展并直接链接到 Prolog 编译器。此外，我与 SWI-Prolog 没有任何联系，它只是我在 google 上找到的第一个。

另外，作为一个完整的问题，有没有人知道序言中的任何好的教程，无论是网络格式还是作为一本真正的书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:09:18.327

我的感觉是，通过跟踪，您不会获得统一失败的详细信息，但您会获得目标失败的信息。

如果后面的信息是您想要的，您可以自己执行此操作，因为您可以检测您的代码。只需替换每个目标

```
 .. A .. 
```

通过以下代码：

```
 .. in(A), A, out(A) .. 
```

具有以下定义：

```
 in(A) :- write('call '), write(A), nl.
 in(A) :- write('fail '), write(A), nl, fail.

 out(A) :- write('exit '), write(A), nl.
 out(A) :- write('redo '), write(A), nl, fail. 
```

当然，您可以将 write/1 和 nl/0 语句替换为适合您的语句。这是一个例子。首先是检测的 Prolog 文本：

```
?- [user].
mem(X,[X|_]).
mem(X,[_|Y]) :- in(mem(X,Y)), mem(X,Y), out(mem(X,Y)).
^D 
```

现在检测查询：

```
?- in(mem(X,[1,2])), mem(X,[1,2]), out(mem(X,[1,2])).
call mem(_G1479,[1,2])
exit mem(1,[1,2])
X = 1 ;
redo mem(1,[1,2])
call mem(_G1479,[2])
exit mem(2,[2])
exit mem(2,[1,2])
X = 2 ;
redo mem(2,[1,2])
redo mem(2,[2])
call mem(_G1479,[])
fail mem(_G1479,[])
fail mem(_G1479,[2])
fail mem(_G1479,[1,2])
false. 
```

再见

# ide - Coda 2 中的“选择父标签”和“保存时发布”

> ID：15713012
> 
> 赞同：2
> 
> 时间：2013-03-29T23:28:17.143
> 
> 标签：ide, dreamweaver, coda

我习惯了 Dreamweaver，但决定试一试 Coda。我一直使用的 Dreamweaver 中的一项功能是“选择父标记”。当我按下按钮时，它会转到父标签，并选择其中的所有内容，例如

```
<B> <i> This is some text </i> </b> 
```

如果光标位于单词“some”上的字母之间，我按下按钮，它将选择包括斜体在内的所有文本。我可以再次按下它，它也会突出显示粗体。

你得到的任何帮助都会很棒。

干杯

*   保利流行音乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T16:46:21.273

我使用 Coda 插件[Emmet](https://github.com/emmetio/Emmet.codaplugin)来“选择父标签”，因为在 Dreamweaver 中调用了该命令。

安装后，您可以使用插件菜单中的命令（Emmet > HTML > Match Pair Tag (outward)）或方便的按键“Ctrl + Shift + D”。

# android - Activity 的 onCreate 中创建的 Fragment 何时可访问？

> ID：15713017
> 
> 赞同：0
> 
> 时间：2013-03-29T23:28:27.790
> 
> 标签：android, android-fragments, android-lifecycle

我正在我的活动 onCreate 方法中创建并附加一个片段：

```
FragmentManager fragmentManager = getSupportFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
mSlateFragment = new SlateFragment();
fragmentTransaction.add(R.id.root, mSlateFragment);
fragmentTransaction.commit(); 
```

之后，我还将搜索栏设置为默认值，为此，我必须访问刚刚创建的 mSlateFragment 对象：

```
mSlateFragment.mSlate.setProperty(33); 
```

然而，这个调用会引发我的应用程序崩溃。在 onStart 中进行此调用可解决崩溃问题，但存在问题，因为我只设置默认值并且不想在每次我的活动进入前台时重置它们。

我试图访问的 mSlate 对象是在我的片段的 onCreateView 中创建的（它是一个视图）。

是否有关于 FragmentActivity 及其片段的生命周期如何交织的信息？有没有办法让我的电话工作？在其片段的 oncreate 中创建我的视图似乎也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:37:11.110

我会在你的缓存中缓存默认值，`SlateFragment`原因有两个：

1.  您不再依赖 Fragments 生命周期，并且可以在 Fragment 创建后立即设置它们
2.  `onCreateView()`每次显示 Fragment 时都会调用（例如，在屏幕旋转之后），因此您将失去默认值，因为 View 是新创建的。

# javascript - Android 2.3.x 上的 jQuery 发布错误（适用于 Android v4.x）

> ID：15713019
> 
> 赞同：0
> 
> 时间：2013-03-29T23:28:36.093
> 
> 标签：javascript, android, jquery, cordova

我正在用 PhoneGap 2.5 编写我的第一个 Android 应用程序；该应用程序非常简单，只需读取本地 gps 坐标并将它们连同一些设备数据（uuid、android 版本）和一些输入字段一起发送到远程服务器。当应用程序启动时，它会向远程服务器发送一种“设备注册”并接收一些数据

截至目前，我只使用 jquery v1.9.1，没有 jquery mobile 也没有其他 javascript 库。

这是代码

```
onDeviceReady: function() {
    $.support.cors = true;
    app.deviceRegister();
    // navigator.splashscreen.hide();
},

deviceRegister: function() {
    var params = {
        'device_uuid': window.device.uuid,
        'device_platform': window.device.platform,
        'device_model': window.device.model,
        'device_version': window.device.version,
    };
    var url = app.data.url + 'devices/register'; // app.data.url defined elsewhere
    $.ajax(url, {
        type: "POST",
        data: params,
        timeout: 5000,
        success: function(response) {
            // updates html with received data
            $("#user_badge").html(response.badge);
            $("#user_name").html(response.full_name);
        },
        error: function(x, t, m) {
            if (t === 'timeout') {
                navigator.notification.alert('timeout error');
            } else {
                navigator.notification.alert('error: ' + t);
            }
        },
        dataType: 'json'
    });
}, 
```

当应用于 Android v4.x（模拟器和真实设备）时，它可以完美运行，数据被发送到远程服务器并正确管理响应。

问题是如果我在 Android v2.3.x（模拟器和真实设备）上运行该应用程序：没有数据发送，我得到的只是一个带有“错误：错误”的警报。

我认为在 android 2.3 和 jquery 1.9 之间存在一些问题，但我就是不知道问题出在哪里。

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:12:12.257

你的 params 对象最后有一个额外的 , 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T18:10:15.967

我打赌`app.data.url`是一个安全的 URL (https)。我遇到了同样的问题，必须为低于 4 的 Android 版本编写一个例外，才能使用正常的、非安全的 http 连接。从来没有找到为什么它不起作用的答案。

# java - “500？” 从 java 控制台中的 FTP

> ID：15713020
> 
> 赞同：0
> 
> 时间：2013-03-29T23:28:53.323
> 
> 标签：java, sockets, networking, ftp, network-programming

我正在尝试使用 Oracle 文档中的 Java 代码来读取和写入套接字（连接到 ftp 服务器），我成功地得到了 ftp 服务器的响应，但我不明白最后一行。它应该要求输入用户名，但我得到“500？”？

这是与源代码的链接（只需更改服务器和端口）： [http ://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)

这是来自控制台的 c/p：

```
echo: 220---------- Welcome to Pure-FTPd [privsep] [TLS] ----------

echo: 220-You are user number 4 of 100 allowed.

echo: 220-Local time is now 00:07\. Server port: 21.

echo: 220-This is a private system - No anonymous login

echo: 220-IPv6 connections are also welcome on this server.

echo: 220 You will be disconnected after 30 minutes of inactivity.

echo: 500 ? 
```

那么为什么我得到**500 呢？**为什么我不能用我的用户名和密码登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:29:51.727

您链接到的代码用于回显客户端。它正在将来自 FTP 服务器的欢迎消息发送回它。这显然不是 FTP 中的有效命令。然后服务器发送 500，因为这是错误的状态代码。来自维基百科

> 语法错误、命令无法识别且请求的操作未发生。这可能包括命令行太长等错误。

# javascript - HTML5 Native Drag 而不是 jQuery Draggable

> ID：15713023
> 
> 赞同：1
> 
> 时间：2013-03-29T23:29:13.753
> 
> 标签：javascript, jquery, html, firefox, drag

是否可以使用 HTML5 拖动功能来替代 jQuery Draggable？

我见过的 HTML5 版本的唯一示例是在 DOM 周围传输数据。示例链接就足够了。

我确实阅读了这个问题的评论：[Native javascript drag on table rows](https://stackoverflow.com/questions/9428177/native-javascript-drag-on-table-rows)，虽然我可能在这里尝试重新发明轮子，但我背后的原因是这只需要支持具有此功能的浏览器。此外，我想在此交互中利用 jQuery 的本机性能。

# colors - SVG feColorMatrix +它的逆不回馈原始图像

> ID：15713024
> 
> 赞同：0
> 
> 时间：2013-03-29T23:29:22.367
> 
> 标签：colors, svg, svg-filters

这个过滤器结合了一个颜色矩阵和它的逆矩阵，那么为什么它不返回原始图像呢？[它转换为 YIQ 并返回 RGB]。相反，它会返回带有一些红色伪影的灰度图像。）。在 Firefox、Safari 和 IE10 上也是如此，所以我认为这是我的错，而不是错误。

```
 <filter  id="matrixtest" filterUnits="userSpaceOnUse" x="-10" y="-10" width="340" height="220">
        <feColorMatrix in="SourceGraphic" result="YIQ" values="0.299 0.587 0.114 0 0  0.596 -0.274 -0.321 0 0   0.211 -0.523 0.311 0 0   0 0 0 1 0"/>
        <feColorMatrix in="YIQ" result="RGB" type="matrix" values="1 0.956 0.621 0 0  1 -0.272 -0.647 0 0  1 -1.107 1.705 0 0  0 0 0 1 0"/>

    </filter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:03:12.070

好的，我忘记了我的线性代数 - 因为矩阵乘法不是可交换的，因此以错误的顺序计算逆（需要是 A-1.V，而不是 VA-1）

# ruby-on-rails - 尽管方法是帖子，但在 link_to 中，参数会添加到 URL 中吗？

> ID：15713031
> 
> 赞同：0
> 
> 时间：2013-03-29T23:30:27.867
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

通过 GET 在我的表单中提交数据的问题是超出了 url 长度。所以我转投post。

我没有使用像 will_paginate 这样的宝石，我会尝试通过 POST 调用但未能使用，我正在做这样的事情。

```
<%= link_to "Next", {:controller => "orders", :action => "advanced_search", :method => :post, :page => params[:page].to_i+1, :filters => params[:filters], :limit => params[:limit]}%> 
```

问题是，尽管该方法已发布，但它仍会将参数合并到 url 本身。我基本上希望它使用新的页面参数再次提交表单。但是没有填充网址的参数。

如果有人能帮我解决这个问题，我真的很高兴。

更新：网址看起来像

```
http://localhost:3000/orders/advanced_search?filters%5Bapproved_between%5D=&filters%5Bcreated_between%5D=&filters%5Border_id%5D=0111T20822130100%0D%0AO11221D208211501118%0D%0AO11D208211501118%0D%0AO11T20822130100%0D%0AO121D208211501118%0D%0AO1221D208211501118%0D%0AO1D208211501118%0D%0AO1T20822140003&filters%5Bproduct_id%5D=&filters%5Bshipped_between%5D=&filters%5Bsku%5D=&method=post&limit=50&page=2 
```

我从中心修剪了网址。浏览器抛出错误 - Request-URI Too Large

更新2：我现在正在使用这个不起作用。（我很冒昧地认为它会在正确测试之前起作用）。

```
<%= form_tag :controller=> "orders", :action => "advanced_search", :new_params => params.merge(:page => params[:page].to_i+1) do %>
          <%= submit_tag 'Next' %>
   <% end %> 
```

虽然这会发送 new_params，但它仍然会更改 URL，尽管表单方法是 POST。它将表单操作链接中的数据包装为 orders/advanced_search?new_params....... URGH!!!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:40:20.453

添加`:method => :post`到链接不会使其成为发布请求。它只是添加了一个名为`method`.

`link_to`不会创建 POST 链接。`link_to`创建`<a>`元素，除非您在其中使用 JavaScript，否则浏览器将执行`GET`请求。

为了使用`POST`请求，您必须使用表单。

我会尝试看看是否有其他方法可以传递所有这些变量。能够将链接粘贴/书签到页面总是很高兴。

**编辑：**

尝试这样的事情

```
<%= form_for :orders, :url => order_advanced_search_path do |form| %>
  <%= form.hidden :filters, params[:filters] %>
  <%= form.hidden :page, params[:page].to_i + 1 %>
  <%= form.hidden :limit, params[:limit] %>
  <%= form.submit "Next" %>
<% end %> 
```

# jquery - 引导日期选择器不工作。

> ID：15713034
> 
> 赞同：6
> 
> 时间：2013-03-29T23:31:04.277
> 
> 标签：jquery, css, twitter-bootstrap

小提琴前：http: [//jsfiddle.net/EmwFE/](http://jsfiddle.net/EmwFE/)

所以我一直在尝试让[datepicker](http://www.eyecon.ro/bootstrap-datepicker/)工作，我认为我正在按照指示进行操作，但我无法让日历弹出。

TIA

下面的代码上面的小提琴示例。

```
 <label class="control-label" for="input08"> 
                    My Start Date
                 </label>
                 <div class="controls">
                    <script type="text/javascript">
                        $(document).ready(function() {
                        $('.datepicker').datepicker();
                    </script>

                    <div class="input-append date" id="dp3" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
                        <input class="span2" size="16" type="text" value="12-02-2012" class="datepicker">
                        <span class="add-on"><i class="icon-th"></i></span>
                    </div>

                </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T23:41:33.930

看这个： [jsfiddle](http://jsfiddle.net/EmwFE/1/)

您打赌初始化包含所有内容的 div 的 ID。你什么都没瞄准！

```
$('#dp3').datepicker(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T23:46:32.263

您的代码中有几个问题。

*   在您的 ready () 调用后缺少括号
*   使用 id 选择器而不是类选择器（`#datepicker`指`id="datepicker"`, `.datepicker`to `class="datepicker"`）

[工作示例](http://jsfiddle.net/7VjKN/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T23:44:59.427

您没有设置 ID。稍后可能会导致您出现问题的其他事情是，输入具有两次定义的类属性，而是将每个类列出在同一属性中，并用空格分隔：

```
<input id="datepicker" class="span2 datepicker" size="16" type="text" value="12-02-2012"> 
```

[http://jsfiddle.net/EmwFE/2/](http://jsfiddle.net/EmwFE/2/)

我注意到您有一些 javascript 内联试图按类引用它，`$('.datepicker')`但由于您定义了两次类属性而忽略了第二个定义，所以这不起作用。使用的 javascript 面板`$('#datepicker')`不起作用，因为您没有在输入中设置 ID。因此，无论哪种 jquery 选择器技术都可以，您只需要解决元素的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T15:51:25.020

Lughino 的解决方案给我带来了一些奇怪的行为。我认为你应该删除

```
<script type="text/javascript">
$(document).ready(function() {
$('.datepicker').datepicker();
</script> 
```

和

```
$('#dp3').datepicker(); 
```

并在 javascript 框中写下这段代码：

```
$(document).ready(function () {
   $('#dp3').datepicker();
}); 
```

见[jsfiddle](http://jsfiddle.net/EmwFE/111/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-05T22:17:27.010

发布的代码示例包含**2 个错误**：

1）函数ready()没有关闭：

```
$(document).ready(function() {
    $('.datepicker').datepicker();
}); 
```

2）输入元素定义了2次“class”属性：（
在jQuery选择器中使用class属性非常适合查找元素，不需要使用id）

```
<input class="span2" size="16" type="text" value="12-02-2012" class="datepicker"> 
```

应该

```
<input class="span2 datepicker" size="16" type="text" value="12-02-2012"> 
```

[带有更正的jsfiddle](http://jsfiddle.net/EmwFE/480/)

# php - 访问由 PHP 中的 JSON 解码产生的数组

> ID：15713036
> 
> 赞同：1
> 
> 时间：2013-03-29T23:31:13.403
> 
> 标签：php, json

我有这个数组，它是在 PHP 中解码 JSON 的结果（数组的名称是 $data）：

```
Array ( [books] => Array ( [0] => Array ( [author] => author name [comment] => this is a great book ) [1] => Array ( [author] => another name [comment] => a comment ) ) ) 
```

我正在尝试按如下方式访问此数组：

```
$data->books[0]->author 
```

例如或 $data->books 来获取一系列书籍，包括作者或评论，但两者都不起作用，我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:43:18.750

在 PHP 中解码 JSON 对象时，它将表示为（关联）数组。起初这可能有点令人困惑，因为在 JavaScript 中解码 JSON 对象通常会返回 JavaScriptObject 表示。

```
$data['books'][0]['author']; 
```

# highcharts - 日期时间轴的 Highcharts => 日期乱序时的工具提示错误

> ID：15713037
> 
> 赞同：0
> 
> 时间：2013-03-29T23:31:16.030
> 
> 标签：highcharts

看看这张图表。

工具提示似乎混淆了不按时间顺序排列的点。

```
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'line'
        },
        title: {
            text: 'Tooltip issue'
        },
        subtitle: {
            text: 'tooltip are not well managed when points are out of chronological sequence'
        },
        xAxis: {
            type: 'datetime',
        },

        series: [{
            name: 'S1',

            data: [
                [Date.UTC(2013,  0, 15), 1   ],
                [Date.UTC(2013,  1, 15), 2   ],
                [Date.UTC(2013,  3, 15), 3   ],
                [Date.UTC(2013,  2, 15), 4   ],
                [Date.UTC(2013,  4, 15), 5   ]
            ]
        }]
    });
}); 
```

在这里看到它：[jsfiddle显示错误](http://jsfiddle.net/VWsYc/1/)

这是一个错误吗？
可以修复吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:58:48.817

工具提示对我来说看起来不错。根据数据的规定，我在 4 月得到 3 个，在 3 月得到 4 个。

# javascript - 创建一个通用的 getElementByID javascript

> ID：15713041
> 
> 赞同：1
> 
> 时间：2013-03-29T23:31:41.817
> 
> 标签：javascript, getelementbyid

我有一个值为 的`test`按钮，当单击该按钮时，将运行一个 javascript 来操作 ID`test1`和`test2`. 该脚本必须能够分别处理这两个元素（test1 和 test2）。

我正在尝试制作一个通用脚本（即不使用 test 的特定值，而是使用被单击按钮的值）。这样我就不需要为每个按钮制作 1000 个不同的脚本。只要有一个带有相应命名元素的按钮，基本上就会有 1 个脚本可以工作。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:41:27.157

我不知道元素*名称*（`name`属性？）是什么意思，但`querySelectorAll`可以为您做很多工作。

```
document.querySelectorAll('[name^=' + value + ']') 
```

可用于选择具有`name`以 的内容开头的属性的所有元素`value`。

[http://jsfiddle.net/dDwfd/](http://jsfiddle.net/dDwfd/)

正如其他人所建议的那样，jQuery 可能对您有用，因为它在内部处理了很多迭代。JS代码会简单得多：http: [//jsfiddle.net/dDwfd/1/](http://jsfiddle.net/dDwfd/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:55:32.517

[http://jsfiddle.net/xAWUx/1/](http://jsfiddle.net/xAWUx/1/)

HTML：

```
<button class="action-btn" data-value="test">Test Button</button>
<button class="action-btn" data-value="garage">Test Button</button>

<input name="test1" value="test1">
<input name="test2" value="test2">
<input name="garage1" value="garage1">
<input name="garage2" value="garage2"> 
```

使用 jQuery：

```
function manipulateElement(i, el) {
    var $el = $(el);
    // $el is a jQuery-wrapped element that has a
    // name attribute that starts with the data-value
    // attribute of the clicked button
    console.log($el);
}

$('.action-btn').click(function() {
    var val = $(this).data('value');
    var elementsToManipulate = $('* [name^=' + val + ']');
    elementsToManipulate.each(manipulateElement);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:27:35.153

我建议采用以下方法（在某些方面感觉有点过分）：

```
Object.prototype.filterSimilar = function(needle, prop, haystack){
    var elems = [],
        reg = new RegExp(needle);
    for (var i = 0, len = haystack.length; i<len; i++){
        if (reg.test(haystack[i].getAttribute(prop))){
            elems.push(haystack[i]);
        }
    }
    return elems;
};

Object.prototype.getSimilar = function(prop){
    var els = document.getElementsByTagName('*'),
        collection = [];
    if (this.length){
        for (var i = 0, len = this.length; i<len; i++){
            collection.push(this[i].filterSimilar(this[i].getAttribute(prop), prop, els));
        }
    }
    else {
        collection.push(this.filterSimilar(this.getAttribute(prop), prop, els));
    }
    return collection[0];
}; 

var similar1 = document.getElementsByTagName('span').getSimilar('id'),
    similar2 = document.getElementById('test').getSimilar('data-name');

console.log(similar1 + '\n' + similar2); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/N27ZP/1/)。

但是，这仅在 Win 7 上的 Chrome 25 中进行了测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T23:42:32.283

最通用的 DOM 操作环境是 jQuery，它使用嘶嘶声来处理选择器。

看来这就是您要寻找的东西：http: [//jquery.com/](http://jquery.com/)您可以查看它的灵感来源。

# concrete5 - Concrete5 - 如何强制自定义块模板？

> ID：15713042
> 
> 赞同：2
> 
> 时间：2013-03-29T23:31:42.653
> 
> 标签：concrete5

我已经为 PageList 块创建了自定义模板，需要使用它来获得所需的视觉效果。用户需要有可能将块的新实例添加到页面（它们用作轮播插件的幻灯片）但在这种情况下，他需要记住每次新块实例（新幻灯片）被添加。

有没有办法强制concrete5自动使用自定义块模板而不是默认模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T00:36:29.993

是的，您可以按区域强制执行此操作。在主题的页面类型模板中，找到要在其上强制执行此自定义模板的可编辑区域的代码，然后调用该`setCustomTemplate`函数。例如：

```
$a = new Area('Main');
$a->setCustomTemplate('page_list', 'templates/your_custom_template');
$a->display($c); 
```

第一个参数是要应用它的块的块类型句柄，第二个参数是自定义模板（请注意，它的末尾***没有扩展名——C5 系统会自动添加它）。***`.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:51:39.097

有可能，我前一阵子是为了工作。希望下面的链接可以帮助您入门。中间有一个名为 Override and Modify 的部分，尽管您可能必须浏览其他部分才能知道它们所指的内容。

[http://www.concrete5.org/documentation/recorded-trainings/building-blocks/basic-block-development-four/](http://www.concrete5.org/documentation/recorded-trainings/building-blocks/basic-block-development-four/)

这也可能有帮助：

[http://www.concrete5.org/documentation/how-tos/designers/change-how-a-block-looks-templates/](http://www.concrete5.org/documentation/how-tos/designers/change-how-a-block-looks-templates/)

# javascript - javascript ajax方法：刷新setter

> ID：15713044
> 
> 赞同：0
> 
> 时间：2013-03-29T23:31:52.110
> 
> 标签：javascript, getter-setter

我有一个以下 javascript 对象：

```
var UsersControl = {
    users: null,
    fetchData: function() {
        $.ajax({
            type: "GET",
            dataType: "json",
            context: this,
            url: "../php/client/json.php",
            data: {
                type: "users"
            }
        }).done(function(response) {
            this.users = response;
        });
    },
    getData: function() {
        if (this.users == null) {
            this.fetchData();
        }
        return this.users;
    }
}; 
```

当我运行该`getData()`方法时，`users`字段已定义，但`null`在此调用中返回旧值 ()。在接下来的调用中，将返回适当的值（ajax-ed）。示例 javascript 控制台会话：

```
> UsersControl
> Object {users: null, fetchData: function, getData: function}

> UsersControl.getData()
> null

> UsersControl
> Object {users: Array[2], fetchData: function, getData: function}

> UsersControl.getData()
> [Object, Object] 
```

看起来 javascript 在调用方法时会记住对象的当前状态 - 并且所有状态更改都将在方法完成后应用。但这使得动态运行修改对象字段成为不可能（就像我以前使用的每种 OOP 语言一样）。或者，简单地说，我在某个地方有一个错误。我将不胜感激有关此主题的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:47:45.333

愚蠢的我......这是一个同步问题......

```
fetchData: function() {
    $.ajax({
        type: "GET",
        dataType: "json",
        context: this,
        url: "../php/client/json.php",
        async:   false,               // <- note this
        data: {
            type: "users"
        }
    }).done(function(response) {
        this.users = response;
    });
}, 
```

# ios - 使用 UIKit (IB) 实现 Cocos2D

> ID：15713046
> 
> 赞同：0
> 
> 时间：2013-03-29T23:32:17.250
> 
> 标签：ios, cocos2d-iphone

我正在尝试为一个相当广泛的 iOS 应用程序构建一个框架，它将 UIKit（以及 Interface Builder 的所有便利）与 Cocos2D（一个强大的游戏引擎）结合起来。我的目标是使用 IB 设计应用程序的所有 GUI，并在必要时初始化一个封装 Cocos2D 的视图。通过这种设计，我希望将这两个框架彼此分开。

Cocos2d 模板项目附带一个 AppDelegate 类，该类花费一些时间设置 EAGLView、构建 CCDirector 并将两者连接起来。例如，考虑`applicationWillFinishLaunching`在 AppDelegate 中实现的方法（如下）。我的问题是——**如果我不想立即从 Cocos2D 视图开始，而是我创建的 MainMenuViewController，我应该在这个函数中注释什么？**

```
CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                               pixelFormat:kEAGLColorFormatRGB565
                               depthFormat:0
                        preserveBackbuffer:NO
                                sharegroup:nil
                             multiSampling:NO
                           numberOfSamples:0];

director_ = (CCDirectorIOS*) [CCDirector sharedDirector];
director_.wantsFullScreenLayout = YES;

// Display FSP and SPF
[director_ setDisplayStats:YES];

// set FPS at 60
[director_ setAnimationInterval:1.0/60];

// attach the openglView to the director
[director_ setView:glView];

// 2D projection
[director_ setProjection:kCCDirectorProjection2D];
//  [director setProjection:kCCDirectorProjection3D];

// Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
if( ! [director_ enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported");

// Default texture format for PNG/BMP/TIFF/JPEG/GIF images
// It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
// You can change this setting at any time.
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
[sharedFileUtils setEnableFallbackSuffixes:NO];             // Default: NO. No fallback suffixes are going to be used
[sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];      // Default on iPhone RetinaDisplay is "-hd"
[sharedFileUtils setiPadSuffix:@"-ipad"];                   // Default on iPad is "ipad"
[sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];    // Default on iPad RetinaDisplay is "-ipadhd"

// Assume that PVR images have premultiplied alpha
[CCTexture2D PVRImagesHavePremultipliedAlpha:YES];

// Create a Navigation Controller with the Director
navController_ = [[MyNavigationController alloc] initWithRootViewController:director_];
navController_.navigationBarHidden = YES;

// for rotation and other messages
[director_ setDelegate:navController_];

// set the Navigation Controller as the root view controller
[window_ setRootViewController:navController_];

// make main window visible
[window_ makeKeyAndVisible]; 
```

我的直接想法是废弃 glView 以及与之相关的所有内容。但是，我对设置 MyNavController、设置主管的委托和 rootViewController 的工作方式有点不清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:42:54.087

这是可能的，我在学习本教程之前已经完成[了](http://www.raywenderlich.com/4817/how-to-integrate-cocos2d-and-uikit)

该教程使用旧版本的 cocos2d 有点过时，并且不使用故事板，但是您应该能够从中获得基本思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T01:08:40.330

我已经在一个应用程序中做到了这一点。我所做的是创建一个名为 CocosViewController 的 .xib，每当用户启动故事书时都会显示它（故事书显示在 cocos2d 中，而应用程序的其余部分是 UIKit）。这个视图没什么特别的，只是一个平面视图控制器，里面有一个视图。我只是将 cocos 导向器添加到 UINavigationController，并呈现该控制器。在设置 GL 视图时，我将框架与视图控制器的大小相匹配。

这是可用于设置 cocos2d 的代码示例。如果场景已经在运行，我会结束它，否则如果场景已经在运行，你会得到一个讨厌的 opengl 错误。尽管在卸载视图时结束导演不应该发生这种情况。

```
 @interface CocosViewController ()
    {
        UINavigationController* navController_;
        CCDirectorIOS* director_;
    }

    @end

    @implementation CocosViewController

    -( void ) setupCocos2d
    {
        director_ = ( CCDirectorIOS* )[CCDirector sharedDirector];

        if( [director_ runningScene] != nil )
            [[CCDirector sharedDirector] end];

        CCGLView *glView = [CCGLView viewWithFrame:[self.view bounds]
                                       pixelFormat:kEAGLColorFormatRGB565
                                       depthFormat:0
                                preserveBackbuffer:NO
                                        sharegroup:nil
                                     multiSampling:NO
                                   numberOfSamples:0];

        director_.wantsFullScreenLayout = YES;
        [director_ setDisplayStats:YES];
        [director_ setAnimationInterval:1.0/60];
        [director_ setView:glView];

        [director_ setProjection:kCCDirectorProjection2D];

        if( ![director_ enableRetinaDisplay:YES] )
            CCLOG(@"Retina Display Not supported");

        [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

        CCFileUtils *sharedFileUtils = [CCFileUtils sharedFileUtils];
        [sharedFileUtils setEnableFallbackSuffixes:NO];
        [sharedFileUtils setiPadSuffix:@"-ipad"];
        [sharedFileUtils setiPhoneRetinaDisplaySuffix:@"-hd"];
        [sharedFileUtils setiPadRetinaDisplaySuffix:@"-ipadhd"];

        [CCTexture2D PVRImagesHavePremultipliedAlpha:NO];

        navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
        navController_.navigationBarHidden = YES;

        [director_ setDelegate:navController_];
        [self presentViewController:navController_ animated:NO completion:nil];
    } 
```

我在 viewDidLoad 中调用它。它主要发生在模板项目中的 cocos2d 应用程序委托中。完成后，当视图卸载时，不要忘记结束导演 [CCDirector sharedDirector] end]。

如果您还有其他问题，请告诉我。希望这有帮助。

# javascript - 并行 API 请求的异步模块错误

> ID：15713049
> 
> 赞同：5
> 
> 时间：2013-03-29T23:32:28.797
> 
> 标签：javascript, node.js, asynchronous

我是 node.js 的初学者，现在我正在尝试获得一些 API 的结果。我正在使用异步模块（[https://github.com/caolan/async](https://github.com/caolan/async)）来并行请求，以便对其进行优化。

问题是代码返回一个错误，每次指向不同 API 调用中的不同行（“callback(err, data)”行）

这就是错误：

```
if (called) throw new Error("Callback was already called.");
                          ^
Error: Callback was already called. 
```

我正在使用以下函数来请求 API：

```
function getData(s, apiURL, getURL, callback) {

    var ht;
    if (s == 1) {
        ht = https;
    } else {
        ht = http;
    }

    var options = {
        hostname : apiURL,
        path : getURL,
        method : 'GET'
    }

    var content = "";

    ht.get(options, function(res) {
        console.log("Got response: " + res.statusCode);

        res.on("data", function(chunk) {

            content += chunk;
            //console.log(content);
            callback(content);
       });

    }).on('error', function(e) {
        console.log("Error: " + e.message);
        console.log(e.stack);
    });
} 
```

为了说明，这就是我使用异步模块的方式：

```
var sources = sources.split(',')

    async.parallel({
        flickr : function(callback) {
            if (sources[0] == 1) {
                getData(0, 'api.flickr.com',
                "/services/rest/?method=flickr.photos.search&format=json&nojsoncallback=1&api_key=" + config.flickr.appid + "&per_page=5&tags=" + tags,

                function(data) {
                    callback(null, data); //here that the error may point
                });

            } else { callback(); }
        },
        instagram : function(callback) {
            if (sources[1] == 1) {

                getData(1, 'api.instagram.com',
                "/v1/tags/" + tags.split(',')[0] + "/media/recent?client_id=" + config.instagram,
                function(data) {                        
                    callback(null, data); //here that the error may point

                });
            } else { callback(); }
        } 
    }, function(err, results) {             
            console.log(results);
        }); 
```

希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-30T02:10:20.280

您正在`data`事件内部调用回调函数（[请参阅文档](http://nodejs.org/api/http.html#http_event_data)），每次接收到一大块数据时都会触发该回调函数，这意味着多次。

Async.parallel is expecting the callback to be executed only once for each task.

To ensure only one callback per task, put the callback on an `end` event, for example.

Also, the error event should execute the callback as well.

# php - 加入Mysql语句问题

> ID：15713055
> 
> 赞同：0
> 
> 时间：2013-03-29T23:33:24.850
> 
> 标签：php, mysql

我有两个表单下拉列表，它们捕获两个 ID，它们与名为`nodes`.

我想从另一个名为`relationships`.

因此，在收集了 2 个节点 ID 之后，我试图删除与另一个节点有关系的一个节点。

在我的关系中，我将`id`and`goingto`都作为节点，但是只有`id`一个 FK 而另一个不是。

那么，如果它处于关系中，我该如何删除它呢？

这是我的尝试

```
$goingto = $_POST['id_one']; //get from form both from id in nodes
$id = $_POST['idtwo']; //get from form both from id in nodes

mysql> DELETE from relationships where $id = $goingto; 
```

这是我的表结构：

```
nodes                 relationships                      
-----                 -------------
id int(11),           id int(11),
name varchar(35),     goingto int(11), //this is the destinationnode from the id relation 
color varchar(7),     data varchar(0) null
type varchar (12),    Foreign key (id) references nodes(id)
Primary key (id)       

engine = innodb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:35:54.270

你认为这就是你的意思：

从 id = $id 和 goingto = $goingto 的关系中删除；

# glassfish - 如何在 glassfish 3 中获取 ServerContext

> ID：15713056
> 
> 赞同：1
> 
> 时间：2013-03-29T23:33:29.943
> 
> 标签：glassfish, glassfish-3, glassfish-2.x

我是一个 12 岁以上的代码库的“骄傲”继承人，多年来许多工程师都在开发这个代码库。我的任务是将我们的系统从 glassfish 2.1.1 升级到 glassfish 3.1.2.2。在指向新的 glassfish 3 jars 之后，大多数东西都可以正常编译，除了我遇到的这个问题。有这样一种方法：

```
public boolean isRunningInApplicationServer() {
    return ApplicationServer.getServerContext() != null;
} 
```

编译器找不到“com.sun.enterprise.server.ApplicationServer”。我假设有一种使用 glassifsh 3 获取 ServerContext 的新方法。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T14:59:03.573

我和你有完全相同的问题.. 那个代码和其他类。我刚刚发现的是这样的：

if (((SecurityServicesUtil.getInstance() != null) && SecurityServicesUtil.getInstance().isServer())

GF 3 API 的类是：来自 security.jar 的 com.sun.enterprise.security.SecurityServicesUtil

它在内部使用 glassfish-api.jar 中的类 org.glassfish.api.admin.ProcessEnvironment

希望这对你有帮助

# php - 如何在ajax中使用口音从数据库中读取数据

> ID：15713057
> 
> 赞同：1
> 
> 时间：2013-03-29T23:33:38.317
> 
> 标签：php, javascript, html, ajax, search

我正在处理一个列表： [http ://ranglista.farmeramagame.hu/kereso/search2.php](http://ranglista.farmeramagame.hu/kereso/search2.php)

在 php 文件中，我使用元标记来处理重音符号。但是为了显示结果，我使用了 ajax，如果我在搜索字段中输入重音符号，如 ö、ü、ő 等，它不会显示任何内容。

```
$(document).ready(function(){
    var left = $('#box').position().left;
    var top = $('#box').position().top;

    $('#search_box').keyup(function(){
        var value = $(this).val();

        if(value !=''){

        $('#search_result').show();
            $.post('search3.php',{value: value},function(data){
                $('#search_result').html(data);

            });

        } else{
        $('#search_result').hide();
        }
    });

}); 
```

是否有可能以某种方式使其与口音一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:34:53.563

解决方案是在 Ajax 中使用字符串时对字符串进行 URI 编码以 POST 到字符串。

在 JS 中，添加 encodeURI（为了安全起见）：

```
$.post('search3.php',{value: encodeURI(value)},function(data){
    $('#search_result').html(data);
}); 
```

在 PHP 中，您需要 urldecode() 已经编码的字符串，并且该字符串似乎是 utf8 编码的。

因此，您需要在 PHP 中执行以下操作：

```
$value = utf8_decode(urldecode($_POST['value'])); 
```

If this ends up working for you, you can then try removing the encodeURI() call in the JS and the urldecode() call in the PHP. (The utf8 handling is necessary, however.)

# actionscript-3 - LuaAlchemy 调用全局

> ID：15713058
> 
> 赞同：2
> 
> 时间：2013-03-29T23:33:38.400
> 
> 标签：actionscript-3, lua, alchemy

我正在使用带有 AS3 的 LuaAlchemy，目前正在尝试在 lua 脚本中调用全局函数。运行整个脚本文件可以完美运行，但是当我尝试调用 callGlobal() 时，出现 Lua 错误：尝试调用 nil 值。

函数调用：

```
lua_interpreter.callGlobal("func",3) 
```

lua脚本：

```
function func(a)
 return a
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T09:29:50.647

我以这种方式解决了同样的问题：

```
[Embed(source="../lua/test.lua", mimeType="application/octet-stream")]
static var _testLuaClass:Class;

static var lua_interpreter:LuaAlchemy = new LuaAlchemy(LuaAssets.filesystemRoot());
static var luaTestAsset:ByteArrayAsset = ByteArrayAsset(new _testLuaClass());

lua_interpreter.doString(luaTestAsset.toString());

trace(lua_interpreter.callGlobal("func",3)); 
```

Lua 脚本文件和你的一样。

# android - 在android中单击按钮时关闭应用程序

> ID：15713065
> 
> 赞同：0
> 
> 时间：2013-03-29T23:34:33.980
> 
> 标签：android, button

当我单击此按钮时，我想关闭应用程序并强制关闭。这是我到目前为止尝试过的代码。但是应用程序没有关闭。按下按钮时如何关闭应用程序？

```
 import java.io.IOException;
  import android.app.Activity;
  import android.content.DialogInterface;
  import android.content.res.AssetFileDescriptor;
  import android.media.MediaPlayer;
  import android.os.Bundle;
  import android.util.Log;
  import android.view.View;
  import android.widget.Button;

      public class MainActivity extends Activity implements  setOnCompletionListener{
        private static final String TAG = null;

        int [] songs;
        MediaPlayer mediaPlayer;
        int current_index = 0; 
        @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
                    songs= new int[] {R.raw.song2,R.raw.song3,R.raw.song7};

        mediaPlayer = MediaPlayer.create(this, songs[0]);

        mediaPlayer.setOnCompletionListener(this);

        mediaPlayer.start();

Button btnstop=(Button)findViewById(R.id.button1); //Play
btnstop.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View vone) 
    {
        mediaPlayer.stop();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:38:48.170

```
Button btnstop=(Button)findViewById(R.id.button1); //Play
btnstop.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View vone) 
    {
        mediaPlayer.stop();
        mediaPlayer.release ();

        finish();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:08:30.913

要调用finish方法，你应该在你的类中扩展Activity，因为finish()方法在Activity类里面......

您也可以尝试将活动作为参数传递给您的类并调用activity.finish()。虽然我不确定这是否有效......

```
class foo(Activity activity){
    this.activity = activity;
}

//inside onclick
activity.finish(); 
```

# internet-explorer - 如何在 IE10 中通过 iframe 强制引导下拉菜单

> ID：15713069
> 
> 赞同：6
> 
> 时间：2013-03-29T23:35:11.983
> 
> 标签：internet-explorer, twitter-bootstrap, drop-down-menu

我在 Bootstrap 上运行了一个简单的测试，发现了一个仅在 IE10 中出现的问题。

如果您有一个下拉菜单和一个 iframe，则单击该下拉菜单会在 iframe 下方对齐。我[这里有一个例子](http://papershare.ravennainteractive.com/test/)

我已经尝试过一百万种不同的 z-index 方法。我已经在所有浏览器中进行了测试，只有 IE10 似乎有问题。

虽然我知道 IE10 还没有出现在任何 Windows 机器上，但它即将到来，我不希望菜单失败......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:50:37.480

[如此](http://www.scorchsoft.com/news/youtube-z-index-embed-iframe-fix)处所引用。可能值得一试。

```
$(document).ready(function () {
    $('iframe').each(function(){
        var url = $(this).attr("src");
        $(this).attr("src",url+"?wmode=transparent");
    });
}); 
```

另外，我认为您需要添加 style="position:relative;" 到iframe实现z-index。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T08:56:33.420

试试这个..它对我有用。检查你的情况。

[包含 iframe 的页面上的 Bootstrap 3 导航栏](https://stackoverflow.com/questions/25866189/bootstrap-3-navbar-on-pages-containing-iframes)

它建议使用“完整的结束语”。

```
<iframe frameBorder="0", width="100%", height="500", id=generic src="generic_order.html"></iframe> 
```

# r - 推特帮助即使注册也无法授权

> ID：15713073
> 
> 赞同：0
> 
> 时间：2013-03-29T23:35:50.223
> 
> 标签：r, twitter, authorization, unauthorized, roauth

我在使用 twitteR 包时遇到了麻烦，因为即使使用 ROAuth 进行注册，我仍然不能做废话。这是我的输入/输出

```
setwd("C:/")
download.file(url="http://curl.haxx.se/ca/cacert.pem", destfile="cacert.pem")
cred <- OAuthFactory$new(consumerKey=HIDDEN,
                     consumerSecret=HIDDEN,
                     requestURL="https://api.twitter.com/oauth/request_token",
                     accessURL="http://api.twitter.com/oauth/access_token",
                     authURL="http://api.twitter.com/oauth/authorize")
cred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl") )

registerTwitterOAuth(cred) 
```

结果是：

```
> cred$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl") )
To enable the connection, please direct your web browser to: 
http://api.twitter.com/oauth/authorizeoauth_token=MNjWmBE7QzodHlK8yeyZC559iunb8urA8cGLamww
When complete, record the PIN given to you and provide it here:

> registerTwitterOAuth(cred)
[1] TRUE 
```

但是当我尝试做某事时：

```
> rate.limit <- getCurRateLimitInfo( cainfo="cacert.pem")
[1] "Unauthorized"
Error in twInterfaceObj$doAPICall("application/rate_limit_status", params = params,  : 
  Error: Unauthorized 
```

我仍然收到未经授权的错误。

我到底应该在这里做什么？

哦，顺便说一句，我的 sessionInfo() 已附加：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] plyr_1.7.1     stringr_0.6.1  ROAuth_0.9.2   digest_0.5.2  
[5] twitteR_1.1.0  rjson_0.2.12   RCurl_1.95-4.1 bitops_1.0-4.1

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:59:22.953

我遇到了同样的问题，我再次阅读了“R 的 Twitter 客户端”手册（[http://cran.r-project.org/web/packages/twitteR/vignettes/twitteR.pdf](http://cran.r-project.org/web/packages/twitteR/vignettes/twitteR.pdf)）。我刚刚在 Authentication with OAuth 部分中找到了以下段落：

“第一步是为自己创建一个 Twitter 应用程序。转到[https://twitter.com/apps/new](https://twitter.com/apps/new)并登录。填写基本信息后， **转到“设置”选项卡并选择“读取、写入”和访问直接消息“。** 请确保在执行此操作后单击保存按钮。”

然后我改变了我的应用程序的权限，它就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T00:20:41.530

我通过创建一个新应用程序、在我的 Twitter 设置中添加我的电话号码、从 github 安装最新的 twitteR 包并使用以下命令通过 httr 进行身份验证来解决了同样的问题：

```
setup_twitter_oauth(consumer_key=consumerKey, consumer_secret=consumerSecret, access_token=accessToken, access_secret=accessSecret) 
```

# restsharp - 对象上的 RestSharp 列表返回空对象

> ID：15713076
> 
> 赞同：0
> 
> 时间：2013-03-29T23:36:04.100
> 
> 标签：restsharp

我试图通过 RestSharp 返回一个对象，该对象上有一个列表属性，但整个对象的结果始终为空。

正在检索的对象是：

```
public class Favourite {
    public Favourite() {
        Drives = new List<Drive>();
    }

    public int FavouriteId { get; set; }
    public string Description { get; set; }
    public string Name { get; set; }
    public IList<Drive> Drives { get; set; }
} 
```

`Drive`也是一个已知对象，它在其他地方被很好地返回。

该请求是通过以下方式提出的：

```
var request = new RestRequest() {
    Resource = "Favourites"
};
var result = Client_Execute<List<Favourite>>(request);
return result; 
```

返回的 JSON 是：

```
[{"FavouriteId":2,"Description":"This is my test favourite description.","Name":"Favourite 1","Drives":[]}] 
```

我最终得到`result == null`. `public IList<Drive> Drives { get; set; }`但是，如果我从中删除`Favourite`，那么我会得到正确的结果。

这是 RestSharp 的错误，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T16:12:09.657

其他人也使用 IList 和 RestSharp 报告序列化问题。

您可能需要尝试使用 List 或确保您拥有 RestSharp 版本 >= v104.2，其中提到它作为错误修复。

[错误修复：具有 IList 属性的类的序列化](https://github.com/restsharp/RestSharp/releases/tag/104.2)

希望有帮助:)

# html - HTML5 Server 发送事件和多个客户端（不使用 Comet）

> ID：15713080
> 
> 赞同：2
> 
> 时间：2013-03-29T23:36:20.070
> 
> 标签：html, jakarta-ee, comet, atmosphere, server-sent-events

我有一个用例，我想知道 HTML5 的 Server-sent-Events 是否适合。

多个客户端（Javascript+HTML5 浏览器）连接到 Web 服务器（带有 Java EE 后端）。每个客户都可以随时查看不同的视图，具体取决于他们感兴趣的对象。

我的**问题**是：如何使多个客户端（在不同的视图上）在服务器端发生的更新上保持最新，**而不用**所有视图上的所有更新来淹没所有客户端？

我需要考虑的要点是：

1.  许多客户可能对相同的事件感兴趣。如果两个客户端正在查看相同的视图，它们必须获得相同的事件。
2.  要发送到客户端的事件取决于客户端当前所在的视图。
3.  一些客户可能对任何事件都不感兴趣（即他们可能正在查看静态数据）
4.  给定的客户可能会动态地改变他们的兴趣。例如：关闭 View1 并打开 View2。
5.  客户可能对多个事件通道感兴趣（例如：两个动态变化的视图可能是单个页面的一部分）。
6.  我只能针对完全支持 SSE 的浏览器。
7.  任何时候最多只有 100 个客户端（浏览器）连接到服务器。因此，我可以奢侈地为每个客户端打开多个连接（对于 SSE）。

我已经在 SO/Google 上搜索了 SSE，但（还）无法获得生产质量软件的可靠解决方案。在充分探索 SSE 之前，我不想回到旧的 Comet 技术。

SSE（本身）是否能够满足这些要求？我现在正在研究 Atmosphere，但在决定 SSE 本身不够用之前，我不想求助于一些模仿 SSE 的 polyfill。

**如果这是不可能的，我打算做什么：**
服务器可以向所有客户端广播所有事件并让客户端弄清楚。这意味着从服务器到客户端的大量不必要的流量和复杂的客户端代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:33:11.260

除非您可以针对一组特定的最新浏览器，否则您将始终必须支持某种回退。[Atmosphere](https://github.com/Atmosphere/atmosphere)看起来是一个很好的解决方案。

至于向正确的客户发送正确的事件：在 Session 对象（检查 Atmosphere 是否配置为支持会话）或您自己的 Map 中跟踪客户及其偏好。看起来您可以在 Atmosphere 中创建多个会话广播器，如下所述：http: [//blog.javaforge.net/post/32659151672/atmosphere-per-session-broadcaster](http://blog.javaforge.net/post/32659151672/atmosphere-per-session-broadcaster)

免责声明：我自己从未使用过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T10:01:25.377

您可以做的是在注册事件时通过 GET 发送参数`EventSource`。唯一的问题在于第 4 点，您应该为此关闭连接并重新注册事件。

我自己试过了，效果很好。

# apache - 如何让 Apache 将某些 URL 传递到不同的服务器

> ID：15713082
> 
> 赞同：0
> 
> 时间：2013-03-29T23:36:48.703
> 
> 标签：apache, reverse-proxy, mod-proxy

我已将大部分 php 网站复制到本地计算机以进行调试和开发。原始远程网站上有大量图像我无法传输。相同的图像由同一服务器上的两个不同域名提供服务，所以我想通过映射`first_domain.com`到`127.0.0.1`in`/etc/hosts`并配置 Apache（最新、最好的版本）来`/images/*/*`从中提取`second_domain.com/images/*/*`

配置`/etc/hosts`很容易。但我不知道我在配置 Apache 时做错了什么。

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule rewrite_module modules/mod_rewrite.so
#...
# Configure mod_proxy_html to understand HTML4/XHTML1
<IfModule proxy_html_module>
Include conf/extra/proxy-html.conf
</IfModule> 
```

在`conf/extra/proxy-html.conf`中，除了默认值：

```
ProxyRequests Off
ProxyPass /properties/ http://newhawaiiproperties.com/properties/
<Location /properties/>
    ProxyPassReverse /
    ProxyHTMLEnable On
    ProxyHTMLURLMap http://newhawaiiproperties.com/properties/ /properties/
    ProxyHTMLURLMap / /properties/
</Location> 
```

我应该`ProxyRequests Off`改成`ProxyRequests On`?

**更新：**我意识到我不需要更改 HTML 文件，它们都是 jpg，所以我应该能够摆脱一些`ProxyHTML...`东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:00:03.780

我过度思考/过度配置它。以下工作。

```
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so

ProxyPass /foo http://second_domain.com/foo
ProxyPassReverse /foo http://second_domain.com/foo 
```

不需要通配符或可怕的重写！它发送所有喜欢`/foo/bar/x.jpg`的东西`http://second_domain.com/foo/bar/x.jpg`

# c++ - 用于 GUI 的 opengl es 2 ARB 扩展？

> ID：15713084
> 
> 赞同：0
> 
> 时间：2013-03-29T23:37:08.850
> 
> 标签：c++, user-interface, opengl-es, opengl-es-2.0

我期待尝试在 OpenGL ES 2 中构建一个非常简单的 GUI 框架。

我注意到我的框架的两个主要部分可能是顶点着色器的集合和几何着色器的集合，但我想知道是否有特定于平台的扩展，因为 OpenGL 只是一种渲染技术并且必须处理使用 GUI 还涉及 OpenGL 显然不管理也不关心的输入部分。

我想知道也许有一些最流行的图形服务器的扩展，比如 Linux 上的 X11。有一种类似的技术可以帮助我构建 GUI 的构建块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:39:02.633

除了使用现有的框架之外，我不知道*OpenGL/OpenGL ES*的任何扩展，这使得 UI 编程的生活变得更轻松。

*我只使用可编程管道。*

编写着色器非常简单，您应该能够在短时间内完成，因为大多数情况下只需要 2 个着色器：

*   带或不带旋转的纹理着色器
*   带或不带旋转的颜色着色器

> 旋转使 UI 更加复杂，[尤其](https://stackoverflow.com/questions/13742556/best-approach-to-draw-clipped-ui-elements-in-opengl/15213548#15213548)是在没有额外技术的情况下很难进行裁剪。此外，在控件上注册触摸/点击比使用非旋转元素更复杂且更慢。

对于特殊情况，我允许用户覆盖控件`Draw`方法并使用自己的着色器，这使原始代码非常简单，我在每个控件中都有一个`UIGraphics`对象，它允许用户通过提供许多不同的方法来绘制 UI和重载 ( `DrawTexture`, `DrawRectangle`, `DrawCharacter`, `DrawText`, ... )

最繁重的部分肯定是设计孔 UI 控件并对其进行编码。按钮非常简单，但有些容器确实需要大量微调，例如可滑动容器。然后你必须关心数据绑定、事件处理、动画等......

# sql-server - 应用程序池用户无法执行存储过程

> ID：15713086
> 
> 赞同：0
> 
> 时间：2013-03-29T23:37:18.320
> 
> 标签：sql-server, sql-server-2008-r2, database-permissions

**背景**

我正在使用 SQL Server 2008 R2 的全文搜索来检索一些文档，并希望使用结果`sys.dm_fts_parser`来突出显示匹配的术语。

这样做通常需要应用程序用户不应该拥有的权限。[MSDN 上提出了](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/a3ec4602-e0be-48f5-92ad-2eb25a6befc5)一个解决方案，StackOverflow 上也有一个[已删除的问题/答案](https://stackoverflow.com/questions/3816023/sys-dm-fts-parser-permission)（请参阅[为什么它被删除](https://meta.stackexchange.com/questions/65954/a-user-is-taking-questions-from-msdn-forums-asking-them-on-so-and-posting-the)）。

**问题**

我正在尝试实施该解决方案，但无法向 IIS 应用程序池用户授予*执行*权限。

**我试过的**

在安全/登录下的 SSMS 中，我创建了一个用户`IIS APPPOOL\My App`。我授予该用户`db_datareader`和`db_datawriter`表访问权限，并且效果很好。

再次在 SSMS 中：

*   在 MyDB / Programmability / Stored Procedures 我右键单击`dbo.usp_fts_parser`
*   选择属性、权限。
*   点击搜索...
*   添加`IIS APPPOOL\My App`
*   在显式选项卡上，执行行我检查授予
*   点击确定

**问题**

为什么这笔赠款不足以执行`dbo.usp_fts_parser`？

**笔记**

*   我可以从以管理员身份登录的 SSMS 执行它。
*   如果我暂时将 sysadmin 服务器角色授予`IIS APPPOOL\My App`，则代码能够执行`dbo.usp_fts_parser`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:41:25.647

如果您查看[此系统功能的官方 MSDN 帮助，](http://msdn.microsoft.com/en-us/library/cc280463%28v=sql.105%29.aspx)您会发现它实际上需要，

> **权限**
> 
> 需要 sysadmin 固定服务器角色的成员资格和对指定停止列表的访问权限。

就像说的那样，该用户必须是 sysadmin 固定服务器角色的成员。我认为没有任何解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:43:00.727

这是最初发布在[https://stackoverflow.com/questions/3816023/sys-dm-fts-parser-permission/3816407#3816407](https://stackoverflow.com/questions/3816023/sys-dm-fts-parser-permission/3816407#3816407)的答案：

在您的数据库中：

```
create procedure usp_fts_parser
    @query nvarchar(max)
with execute as caller
as
select * from sys.dm_fts_parser(@query, 1033, 0, 0);
go

grant execute on usp_fts_parser to [<some low priviledged user>]
go

create certificate sign_fts_parser
    encryption by password = 'Password#1234'
    with subject = 'sign_fts_parser';
go

add signature to object::usp_fts_parser
by certificate sign_fts_parser with password = 'Password#1234';
go

alter certificate sign_fts_parser
remove private key;
go

backup certificate sign_fts_parser
to file = 'c:\temp\sign_fts_parser.cer';
go 
```

在大师：

```
create certificate sign_fts_parser
from file = 'c:\temp\sign_fts_parser.cer';
go  

create login login_sign_fts_parser
from certificate sign_fts_parser;
go

grant control server to login_sign_fts_parser;
go 
```

我刚刚在 SQL Server 2008 上测试了这些步骤，并且能够`usp_fts_parser`从低权限登录执行。与原始帖子答案的唯一区别是我在存储过程上添加了显式 GRANT EXECUTE 并删除了单相启用的可信赖步骤。在您的情况下`<low priviledged user>`应该是`IIS APPPOOL\My App`，假设您*不在*ASP 应用程序中使用模拟。

The required permissions on calling `sys.dm_fts_parser` are being derived from the signature on the procedure which, via the certificate exported and imported into `master` database, has explicit CONTROL SERVER permission (highest possible priviledge). Because the private key of the certificate was explicitly removed there is no way to abuse the high priviledge associated with this certificate, since it cannot ever sign again anything (the private key is lost forever). See [Module Signing (Database Engine)](http://msdn.microsoft.com/en-us/library/ms345102(v=sql.105).aspx) for more details.

Note that the steps above have to be repeated *every time you modify the stored procedure*. Any ALTER on the procedure will result in an automated, silent, drop of the associated signature. Loosing the module signature implies loosing the priviledges derived from this signature and thus the subsequent calls to `sys.dm_fts_parser` will fail for a low priviledged user.

# java - 如何安装自我更新的 32 位和 64 位 Java？

> ID：15713089
> 
> 赞同：1
> 
> 时间：2013-03-29T23:37:45.157
> 
> 标签：java, security

当我访问[http://java.com](http://java.com)时，它提供了一个简单的按钮来安装 Java。它没有告诉我哪个版本，它只是自动计算出来。它在控制面板中添加了一个名为“Java（32 位）”的图标。

![在此处输入图像描述](../Images/4c58ec4cf56eb664c92ecd2437741cfa.png)

如果我打开它，就会有一个更新选项卡。我喜欢这样，因为 Java 是黑客的已知目标，所以我想尽可能地保持最新。

![Java 更新选项卡](../Images/54af53145ca78300a71e02b49c8acca3.png)

我还想要 64 位 Java。如果我去[http://java.com](http://java.com)，有一个链接可以[查看所有 Java 下载](http://java.com/en/download/manual.jsp)。那里列出了 64 位 Java，但它给了我“离线”安装程序，它不包括自动更新。

如何让我的 64 位 Java 自动检查更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:38:34.333

在研究这个问题时，我找到了答案：

[http://www.java.com/en/download/faq/java_win64bit.xml](http://www.java.com/en/download/faq/java_win64bit.xml)

> 如果用户正在运行 64 位浏览器，则应下载 64 位 Java 软件。如需下载 64 位 Java，请单击 64 位手动下载
> 
> **注意：目前，在线安装和 Java 更新功能不适用于 64 位架构。这意味着您不会看到作为 Java 控制面板一部分的更新选项卡。您可以通过运行最新的 Java 64 位脱机安装程序在 64 位 Windows 上手动更新 Java**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T16:36:57.953

I think we need to have answered whether it is required to uninstall the previous 64Bit Java version and install the new Java 64Bit seperately. I mean if that is the case then running the offline installer for the new version is hardly and "update" but rather an uninstall of the old version and a fresh install of the new version. But is this really required?

As a note, Oracles own install instruction for Java 64Bit does not give any information about whether to uninstall the old version(see below). Not uninstalling an old Java version is dangerous since insecure parts of the old version could be able to be exploited as long as that old version is not removed, even when the new version is installed.

If anyone know the full step by step procedure to successfully and securely install new versions of Java 64Bit it would be really great to know.

（取自[http://www.java.com/en/download/faq/java_win64bit.xml](http://www.java.com/en/download/faq/java_win64bit.xml)）按照以下说明在您的系统上安装 64 位 Java：

1.  选择 64 位 Windows 离线下载。将出现“文件下载”对话框。
2.  选择文件夹位置。（将文件保存到计算机上的已知位置，例如，保存到桌面）并单击保存。
3.  关闭所有应用程序，包括浏览器。
4.  双击保存的文件图标开始安装过程

# exception - C++ Builder - Project x.exe raised exception class ELUInvalidResLibrary with message 'Invalid resource

> ID：15713090
> 
> 赞同：0
> 
> 时间：2013-03-29T23:37:47.877
> 
> 标签：exception, internationalization, c++builder

I'm using C++ Builder 2009 project which I'm trying to internationalize using korzh localizer plugin.

When I run my application and try to Initialize the language menu, I get an Exception of:

```
Project abc.exe raised exception class ELUInvalidResLibrary with message 'Invalid resource file format "C:\path\to\exe\abc.exe"'. 
```

I find the resource reference to the executable seems a bit goofy. Any ideas?

**Progress Update:**

I have another project which is translating properly. So I referneced it. I noticed I was missing the abc_klr.res file in the project, so I added it and it got me past that exception on the `LocalizerOnFly->Init()`, but I get a similar exception when trying to change the language. The difference is the executable is no longer referenced and instead I get a "" as the resource reference... Below is a screen shot:

![enter image description here](../Images/5cfe3010513d1ff14f5c14404c7a0c95.png)

![enter image description here](../Images/76c5d20bcdbc6613988e9ec28fe6b4e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:37:51.023

So my problem was fixed in two steps:

1.  Add the resource file to the project then rebuild.

2.  Clean the project and deploy directory of any translation related files, then refresh the language files.

Things are groovy again.

# php - 带有文本文件的 PHP 简单购物车功能

> ID：15713094
> 
> 赞同：0
> 
> 时间：2013-03-29T23:38:08.840
> 
> 标签：php, file-io

我正在使用文本文件（仅用于教育目的）制作基本的购物车。它的格式为每行一个产品，如下所示：

```
Product name|Price|Quantity 
Product name|Price|Quantity 
Product name|Price|Quantity 
```

我将如何完成一个 addToCart() 函数来查看 cart.txt 文件，如果它还没有在购物车中，则将产品添加到数量为 1 的新行，或者如果它是，则将 1 添加到该产品的数量已经在购物车里了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:43:32.117

您可以坚持使用相同的格式，但添加一个 ID 列，这样您就有了：

```
ProductID|Product name|Price|Quantity 
ProductID|Product name|Price|Quantity 
ProductID|Product name|Price|Quantity 
```

然后使用 ID 字段作为数组键。您可以对产品名称使用类似的方法，但您需要清除所有空格或特殊字符。

```
 $raw = file_get_contents($path);
  $raw = explode("\n", $raw);
  $data = array();
  foreach ($raw as $d) {
    $d = explode('|', $d);
    // the left-most data will be our key
    $key = array_shift($d);
    $data[$key] = $d;
  } 
```

现在你会有一个像这样的数组（例如）：

```
array(
  5=>array(
    'Widget id #5',
    '5.00',
    '2'
  ),
  11=>array(
    'Widget id #11',
    '6.00',
    '1'
  )
) 
```

一种更简单的方法是使用 JSON 作为文件格式。这样，您就不必在从文件中取出数据后对数据进行解析，并且关联键更容易实现。无论哪种方式，您都将遵循相同的步骤：

*   从文件中获取数据并放入变量中
*   查看产品是否已经在购物车中

    *   如果没有，添加它
*   将数量增加 1（或任何其他数字，真的）
*   将数据写回文件

使用 JSON，它看起来像这样：

```
$path = 'path/to/data.txt';
$data = json_decode(file_get_contents($path), true);

// if the product isn't in the cart, add it
if (array_key_exists($product_id, $data) === false) {

  // retrieve the product information for $product_id
  // populate $product_name and $product_price

  $data[$product_id] = array(
    'name'=>$product_name,
    'quantity'=>0,
    'price'=>$product_price
  );
}

// increment the quantity
$data[$product_id]['quantity']++;  // $data[$product_id][2]++ if you didn't use JSON

// write the data back into the file
file_put_contents($path, json_encode($data)); 
```

**文档**

*   [`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)
*   [`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)
*   [`json_decode`](http://php.net/manual/en/function.json-decode.php)
*   [`json_encode`](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:43:27.910

您可以查看使用带有分隔符的[fgetcsv 。](http://us2.php.net/manual/en/function.fgetcsv.php)`|`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T01:30:46.973

也许你可以这样做：

```
function search_in_file($product_name, $price){
    $row = 1;
    $handle = fopen("cart.csv", "w"));
    if ( $handle !== FALSE) {
        while (($data = fgetcsv($handle, 0, "|")) !== FALSE) {
            if($data[0] == $product_name){
                $data[0] += 1;
                fclose($handle);
                return;
            }

        }
        fputcsv($handle, array($product_name, $price, 1);
        fclose($handle);
    }
} 
```

请把这个当作一个想法。

# mysql - Mysql唯一列 - 加一计数

> ID：15713097
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:38:23.673
> 
> 标签：mysql, count, unique

我有一个存储单词的表，有树列 id、word 和 count，word 是唯一键。

如果单词已经插入，我只想添加 +1 来计数。我找不到任何 sql 语句，（我可能不知道在 google 上搜索什么）

当我将新数据插入单词时，我想将 +1 添加到计数列。我不确定它是否需要此操作的唯一列。

你们能帮帮我吗？问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:42:55.447

```
INSERT INTO tablename (word, count)
VALUES ("TheWord", 1)
ON DUPLICATE KEY UPDATE count = count + 1 
```

我相信这就是您正在寻找的。如果单词是唯一的，是否有任何理由拥有 id 列？

# regex - 在 R 中使用带有多个字符串肯定和否定的 regexpr

> ID：15713100
> 
> 赞同：0
> 
> 时间：2013-03-29T23:38:38.973
> 
> 标签：regex, r, perl

我正在寻找一列笔记。寻找一些字符串的存在和其他字符串的缺失。表情看起来像

```
toMatch <- c("words", "i", "want", "to")
notToMatch <- c("not", "in", "my", "res")
insert <- paste(paste(toMatch, collapse="|"), "!", paste(notToMatch, collapse="!"), sep="")
regexpr(insert, df$notes, ignore.case=T) 
```

在我看来，regexpr 会算数

```
printNotes = +1 presence and -1 absence 
```

如果该表达式的计算结果为 printNotes > 0，则它返回一个非 -1 的值（在 regexpr 中表示未找到）。

如果有任何 notToMatch “！”，则任何建议的 regexpr 语法都返回 -1 参数返回 TRUE？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:48:49.150

您可以使用`grepl()`获取字符串匹配位置的逻辑向量，然后`sum()`使用该向量查看匹配的数字。您可以（粗略地）做同样的事情`grep()`并计算结果向量的长度，但`grepl()`表现得更加一致。

如果你想得到任何匹配的逆，你可以做`!grepl("match", x)`，它会显示逻辑逆。

如果您*特别希望它返回`TRUE`，或者`!`您可以执行类似的操作`ifelse(grepl("m", letters), TRUE, "!")`，在`letters`常量（所有 26 个小写英文字母）中搜索“m”并在匹配时返回 TRUE 和“！” 关于匹配失败。

# c++ - 没有 ./a.out 在 g++ 中产生

> ID：15713102
> 
> 赞同：0
> 
> 时间：2013-03-29T23:38:50.943
> 
> 标签：c++, ubuntu, compiler-construction, g++

我有以下程序：

```
#include "Sptr.cpp"
#include <iostream>
#include <stdio.h>
#include <assert.h>

namespace my {
    template <class T>
    class Sptr {
    private:
        //some kind of pointer
            //one to current obj
        T obj;
        size_t reference_count;
            //one to original obj
    public:
        Sptr();

        template <typename U> 
        Sptr(U *);

        Sptr(const Sptr &);

        template <typename U> 
        Sptr(const Sptr<U> &);

        template <typename U> 
        Sptr<T> &operator=(const Sptr<U> &);

        void reset();

        T* operator->() const
        {return &obj;};

        T& operator*() const
        {return obj;};

        T* get() const
        {return &obj;};

        //operator unspecified_bool_type() const;

        //overload *,->,=,copy-constructor

        // const-ness should be preserved.
        // Test for null using safe-bool idiom
        // Static casting, returns a smart pointer
    };

    template <typename T>
    Sptr<T>::Sptr() {
        //do something
    }

    template <typename T>
    template <typename U> 
    Sptr<T>::Sptr(U* u) {
        //do something
    }

    template <typename T> 
    Sptr<T>::Sptr(const Sptr<T> &copyObj) {
        //do copy constructor stuff
    }

    template <typename T> 
    template <typename U> 
    Sptr<T>& Sptr<T>::operator=(const Sptr<U> &t) {
        return *this;
    }

    template <typename T>
    void Sptr<T>::reset() {
        //do something
    }

    template <typename T1, typename T2>
    bool operator==(const Sptr<T1> &, const Sptr<T2> &) {
        //do something
        return true;
    }

    template <typename T, typename U>
    Sptr<T> static_pointer_cast(const Sptr<U> &sp) {
        //do something
        return true;
    }

    template <typename T, typename U>
    Sptr<T> dynamic_pointer_cast(const Sptr<U> &sp) {
        //Do something
        return true;
    }
}

using namespace std;
using namespace my;
/* Basic Tests 1 ================================================================================ */

class Base1 {
    protected:
        Base1() : derived_destructor_called(false) {
            printf("Base1::Base1()\n");
        }
    private:
        Base1(const Base1 &); // Disallow.
        Base1 &operator=(const Base1 &); // Disallow.
    protected:
        ~Base1() {
            printf("Base1::~Base1()\n");
            assert(derived_destructor_called);
        }
    protected:
        bool derived_destructor_called;
};

class Derived : public Base1 {
        friend void basic_tests_1();
    private:
        Derived() {}
        Derived(const Derived &); // Disallow.
        Derived &operator=(const Derived &); // Disallow.
    public:
        ~Derived() {
            printf("Derived::~Derived()\n");
            derived_destructor_called = true;
        }
        int value;
};

void basic_tests_1() {

}

int main(int argc, char *argv[]) {

    cout << "Hello world";
    basic_tests_1();

    return 0;
} 
```

当我编译它编译没有问题，但`./a.out`文件没有产生。所以我使用了该`-o`命令，但也失败了。这是我的控制台输出

```
$:~/oops$ g++ Sptr.hpp
$:~/oops$ ./a.out
bash: ./a.out: No such file or directory
$:~/oops$ g++ Sptr.hpp -o sp
$:~/oops$ ./sp
bash: ./sp: Permission denied
$:~/oops$ sudo ./sp
sudo: ./sp: command not found
$:~/oops$ ls
1  sp  Sptr.cpp Sptr.hpp
$:~/oops$ ls -la sp
-rw-rw-r-- 1 adarshakb adarshakb 10763696 Mar 29 19:33 sp
$:~/oops$ chmod 0777 ./sp
$:~/oops$ ls -la sp
-rwxrwxrwx 1 adarshakb adarshakb 10763696 Mar 29 19:33 sp
$:~/oops$ ./sp
bash: ./sp: cannot execute binary file 
```

没有创建二进制文件的问题是什么？我的 g++ 版本是 4.7，运行的是 Ubuntu 12.10。

PS：一个简单的hello world程序可以工作

* * *

如果我将文件从 .hpp 重命名为 .cpp 它可以正确编译。

**注意：**所有代码都在一个文件中。另一个文件只是空的。

为什么是这样？

**编辑：**

@teppic 提到它

> 它会生成一个预编译的头文件，而不是一个可执行文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T23:52:31.153

从 gcc 手册：

```
 file.hh
   file.H
   file.hp
   file.hxx
   file.hpp
   file.HPP
   file.h++
   file.tcc
   C++ header file to be turned into a precompiled header or Ada spec. 
```

即扩展名是错误的。

如果您检查文件类型，则确认：

```
$ g++ -o foo foo.hpp
$ file foo
foo: GCC precompiled header (version 013) for C++ 
```

# c++ - C++ 赋值错误

> ID：15713103
> 
> 赞同：-3
> 
> 时间：2013-03-29T23:38:57.303
> 
> 标签：c++

我是 C++ 新手，我有下面的代码。我正在尝试分配`int board[] = create_board();`，就像我在 java 中一样，但它给了我错误

> 初始化程序无法确定板的大小。

此外，当我删除该行代码时，我的打印语句不会显示在命令提示符中。

在打印数组时我做错了什么吗？

**代码：**

```
#include <iostream>
using namespace std;

int* create_board() {
  int* pointer;
  int board[15];
  pointer=board;
  for(int i=0; i<16; i++)
    board[i] = 1;
  return pointer;
}

int main () {   
  int board[] = create_board(); 
  for (int i; i<16; i++)
      std::cout << board[i];
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:45:19.130

作为初学者，我认为您实际上应该使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)原始指针而不是原始指针。这是使用它的程序示例：

```
#include <iostream>
#include <vector>

std::vector<int> create_board()
{
   return std::vector<int>(16, 1); // declare 16 integers whose value is 1
}

int main()
{
   std::vector<int> board = create_board();

   for (int i = 0; i < 16; ++i)
       std::cout << board[i];
} 
```

在 C++11 中，这可能如下所示：

```
#include <iostream>
#include <array>

int main()
{
    std::array<int, 16> array{};

    array.fill(1);

    for (auto var : array) std::cout << var << '\n';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:42:19.800

真的有两件事不对：

1.  您不能将数组用作左值，而是需要使用指针。例如

    ```
    int* board = create_board(); 
    ```

2.  然而，更大的问题是，在您的`create_board()`函数中，您正在返回一个指向基于堆栈的数组的指针，该数组将在您的函数返回后立即被销毁。您需要使用`malloc`or分配它`new`，或者让它`static`返回一个指向它的指针，该指针可以在函数外使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T23:41:42.440

内存管理非常棘手。在尝试弄乱手动记忆之前，您应该阅读更多有关它的信息。我建议现在坚持使用 stl 集合等。

至于实际问题，您声明的数组存在于堆栈中，这意味着它会在函数返回后立即消失。这意味着您返回的指针现在是一个悬空指针，这意味着访问它会产生未定义的行为。

你也有一个错误。您创建了一个大小为 15 的数组，但您正在访问其中的 16 个元素。

如果您使用的是`std::array`（本质上是类型安全的，像原始数组上的包装器的集合）并通过值而不是指针返回（暂时保持简单），情况可能会如下所示。

对于普通的类似数组的集合，您`std::vector`可以使用`std::array`. 向量是 Java 的 C++ 等价物`ArrayList`，因此它们可以改变大小。

```
#include <iostream>
#include <array>

std::array<int, 16> create_board()
{

std::array<int, 16> board;
for(int i=0; i<16; i++)
    board[i] = 1;
return board;
}

int 
main ()
{

std::array<int, 16> board = create_board();

for (int i; i<16; i++)
    std::cout << board[i];
return 0;
} 
```

# ios - 我希望我的 UILabel 遵循我的 UISlider 值

> ID：15713105
> 
> 赞同：3
> 
> 时间：2013-03-29T23:39:05.517
> 
> 标签：ios, objective-c, cocoa-touch

我遵循user2207904的代码

在 viewDidLoad 我创建了 20 个滑块和 20 个标签

然后我的 20 个标签采用我的推子的值（**label.text= [NSString stringWithFormat:@"%i", slvalue];**）

但是如果我移动我的标签不遵循我的推子值，就像这样......

我怎样才能按照我的推子值来处理我的标签？

**我的代码**

```
- (void)viewDidLoad
{
   [super viewDidLoad];    
   for(int i=0; i< 20; i++){
    //sliders
    UISlider *slider = [[[UISlider alloc] initWithFrame:CGRectMake(1+i*50, 450, 300, 10)] autorelease];
    slider.minimumValue = 1;
    slider.maximumValue = 100;
    slider.continuous = YES;
    [self.view addSubview:slider];
    slider.transform = CGAffineTransformRotate(slider.transform, 270.0/180*M_PI);
    [slider setThumbImage:thumbImage0 forState:UIControlStateNormal];
    [slider release];
    // label
    UILabel *label =  [[UILabel alloc] initWithFrame: CGRectMake(1+i*50, 640, 40, 15)];
    int slvalue = slider.value;
    label.text= [NSString stringWithFormat:@"%i", slvalue];
    [self.view addSubview:label];
    [label release];

} 
```

新问题 ：

***修改的***

***我这样做：***

我在我的 FirstViewController.m 中放了一个 IBAction

```
- (IBAction)sliderUpdate:(UISlider *)sender {
self.label.text = [NSString stringWithFormat:@"%g", sender.value];
} 
```

并将其放入我的 viewDidLoad (FirstViewController.m)

```
{
[super viewDidLoad];    
for(int i=0; i< 20; i++){
//sliders
UISlider *slider = [[[UISlider alloc] initWithFrame:CGRectMake(1+i*50, 450, 300, 10)] autorelease];
slider.minimumValue = 1;
slider.maximumValue = 100;
slider.continuous = YES;
[slider addTarget:self action:@selector(sliderUpdate:) forControlEvents:UIControlEventValueChanged];
[self.view addSubview:slider];
slider.transform = CGAffineTransformRotate(slider.transform, 270.0/180*M_PI);
[slider setThumbImage:thumbImage0 forState:UIControlStateNormal];
[slider release];
// label
UILabel *label =  [[UILabel alloc] initWithFrame: CGRectMake(1+i*50, 640, 40, 15)];
int slvalue = slider.value;
label.text= [NSString stringWithFormat:@"%i", slvalue];
[self.view addSubview:label];
[label release];
} 
```

我的*（IBAction）sliderUpdate 中有此错误：* **在“FirstViewController *”类型的对象上找不到属性“标签”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:07:07.063

如果您控制从滑块拖动到 UIViewController 的实现，它将设置一个 IBAction 方法，该方法在值更改时调用。在这种方法中，只需设置标签的文本。无需制作特殊的子类。

代码最终看起来像这样：

```
- (IBAction)setLabel:(UISlider *)sender {
    self.myLabel.text = [NSString stringWithFormat:@"%g", sender.value];
} 
```

编辑：听起来您正在以编程方式制作滑块。在这种情况下，您将不得不调用`addTarget:action:forControlEvents:`每个人来设置目标操作。（控制事件将是`UIControlEventValueChanged`。）

此外，就知道哪个滑块到哪个标签而言，您可以制作 2 个 NSArray，其中一个数组中的第 i 个滑块与另一个数组中的第 i 个标签匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T04:04:21.827

拖放或以编程方式创建一个 UILabel 和 UISlider ，然后在 Slider 中将其用于滑块操作

```
-(IBAction)slider:(id)sender {
NSString *s=[NSString stringWithFormat:@"%f",slider.value]; 
[label setText:s];   } 
```

所以每当你改变你的滑块你的标签值也会改变。我希望你明白了吗？

# c++ - 数组值在 C++ 中出现错误

> ID：15713113
> 
> 赞同：0
> 
> 时间：2013-03-29T23:40:30.460
> 
> 标签：c++, arrays, visual-studio

我已经为此工作了2个多小时。我已将我的问题隔离为一段代码。

问题出在我的阵列上。它正在输出非常大的负值。我输入数组的值是正确的。我对 java 有经验，但这是我的第一个 C++ 程序。

```
 #include <cstdlib>
   #include <iostream>
   #include <sstream>
   #include <string>

   using namespace std;

   int main(){
    string inputString;
    cin >> inputString;
    cout << inputString << endl;

    int mainArray[10];

    for(int x = 0; x < inputString.length(); x++){
        int valFound = inputString[x]-48; //minus 48 to change from ascii to int
        mainArray[valFound]++;
        cout << mainArray[valFound];
    }

    return 0;
    } 
```

任何帮助将不胜感激，这让我发疯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T23:43:47.650

您的数组正在默认初始化。类型的默认初始化`int`使其“带有垃圾”。您需要将其初始化为`0`显式：

```
int mainArray[10] = {0}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:43:48.577

这是因为数组需要初始化。将此添加到您的代码中：

```
for (int i = 0 ; i != 10 ; i++) {
    mainArray[i] = 0;
} 
```

或者，您可以使用`memset`：

```
memset(mainArray, 0, sizeof(mainArray)); 
```

# c++ - 如何查看共享指针是否彼此相等

> ID：15713114
> 
> 赞同：1
> 
> 时间：2013-03-29T23:40:45.237
> 
> 标签：c++, pointers, shared-ptr

我正在尝试在 C++ 中实现享元设计。这就是我到目前为止所拥有的。

```
std::unordered_map<std::pair<Gdiplus::Color, float>, std::shared_ptr<Gdiplus::Pen>> mymap;
std::shared_ptr<Gdiplus::Pen> getPen(Gdiplus::Color const & color, float width )
{   
    std::pair<Gdiplus::Color,float> input;
    input = std::make_pair(color, width);
    std::unordered_map<std::pair<Gdiplus::Color, float>, std::shared_ptr<Gdiplus::Pen>>::const_iterator got = mymap.find (input);

        if ( got == mymap.end() )
        {
            auto pen = std::make_shared<Gdiplus::Pen> ();
            pen->SetColor(color);
            pen->SetWidth(width);
            //std::pair<Gdiplus::Color,float> input2;
            mymap.insert(std::make_pair(input, pen));
            return pen;             
        }       
        else
        {
            if (std::shared_ptr<Gdiplus::Pen> m_pen = got->second.get())
               return m_Pen;
        }

} 
```

我的问题在 else 语句中。我试图弄清楚两个指针是否相同，但我收到错误消息

```
cannot convert from 'Gdiplus::Pen *' to 'std::tr1::shared_ptr<_Ty>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:46:39.977

您在这一行中的问题行：

```
std::shared_ptr<Gdiplus::Pen> m_pen = got->second.get(); 
```

**说明**：

`std::shared_ptr<T>.get()``shared_ptr`返回由 a (ie, )存储的内部指针`Grdiplus::Pen*`。试试这个：

```
std::shared_ptr<Gdiplus::Pen> m_pen = got->second; 
```

这将允许您分配 to ，因为从to`m_pen`没有隐式转换。`T*``std::shared_ptr<T>`

# delphi - 异常处理，契约式设计

> ID：15713116
> 
> 赞同：0
> 
> 时间：2013-03-29T23:40:48.910
> 
> 标签：delphi

对于没有用户界面访问权限的函数，处理没有指定参数的无效函数调用的最佳方法是什么

```
 function safeSQRT ( x : Real)  : real; 
   begin

   ///  check for valid params .....

    if (x<0) then 
            begin
            exit;

            ///  create a exception here ??

            end; 

   end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T23:47:38.670

有了这个签名

```
function safeSQRT(x : Real): Real; 
```

您只有两个选项可以发出错误信号：

1.  引发异常。
2.  返回指示错误的标记值。

第三个选项是更改签名

```
function safeSQRT(x : Real; out retval: Real): Integer; 
```

函数返回值现在是错误代码。

如果您返回错误代码，则强制调用者明确检查每个调用的每个返回值。这是一个沉重的负担。想想调用即使是最普通的 Win32 API 来描绘负担所涉及的乐趣。

如果您返回一个哨兵值，那么每个调用者都会承受同样的负担。

如果您引发异常，那么调用者的工作会更容易。调用者通常可以忽略异常并让它们向上冒泡并作为中央异常处理程序进行处理。

另一方面是当错误情况普遍发生并需要立即处理时。在这种情况下，引发异常通常是错误的选择。如果必须始终在调用站点处理错误，那么使用异常可能会使调用者忘记处理它。

# java - 类路径资源的 java.nio.file.Path

> ID：15713119
> 
> 赞同：176
> 
> 时间：2013-03-29T23:41:24.697
> 
> 标签：java, java-7, nio2

是否有一个 API 可以将类路径资源（例如我从中得到的[`Class.getResource(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)）作为[`java.nio.file.Path`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)? 理想情况下，我想将花哨的新`Path`API 与类路径资源一起使用。

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2014-05-14T11:59:15.290

这个对我有用：

```
return Paths.get(ClassLoader.getSystemResource(resourceName).toURI()); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-09-15T06:57:37.693

猜测您想要做的是调用`Files.lines(...)`来自类路径的资源 - 可能来自 jar 中。

由于 Oracle 混淆了 a 何时`Path`为 a的概念，如果它位于 jar 文件中，`Path`则不返回可用路径，因此您需要做的是这样的事情：`getResource`

```
Stream<String> stream = new BufferedReader(new InputStreamReader(ClassLoader.getSystemResourceAsStream("/filename.txt"))).lines(); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-03-15T20:10:47.947

最通用的解决方案如下：

```
interface IOConsumer<T> {
    void accept(T t) throws IOException;
}
public static void processRessource(URI uri, IOConsumer<Path> action) throws IOException{
    try {
        Path p=Paths.get(uri);
        action.accept(p);
    }
    catch(FileSystemNotFoundException ex) {
        try(FileSystem fs = FileSystems.newFileSystem(
                uri, Collections.<String,Object>emptyMap())) {
            Path p = fs.provider().getPath(uri);
            action.accept(p);
        }
    }
} 
```

主要的障碍是处理这两种可能性，要么拥有我们应该使用但不关闭的现有文件系统（如使用`file`URI 或 Java 9 的模块存储），要么必须自己打开并安全关闭文件系统（如zip/jar 文件）。

因此，上面的解决方案将实际操作封装在 an 中`interface`，处理这两种情况，在第二种情况下安全关闭，并且适用于 Java 7 到 Java 18。它在打开新文件系统之前探测是否已经有一个打开的文件系统，所以它也适用于应用程序的另一个组件已经为同一个 zip/jar 文件打开文件系统的情况。

它可以用于上面提到的所有 Java 版本，例如将包的内容（`java.lang`在示例中）列为`Path`s，如下所示：

```
processRessource(Object.class.getResource("Object.class").toURI(),new IOConsumer<Path>(){
    public void accept(Path path) throws IOException {
        try(DirectoryStream<Path> ds = Files.newDirectoryStream(path.getParent())) {
            for(Path p: ds)
                System.out.println(p);
        }
    }
}); 
```

在 Java 8 或更新版本中，您可以使用 lambda 表达式或方法引用来表示实际操作，例如

```
processRessource(Object.class.getResource("Object.class").toURI(), path -> {
    try(Stream<Path> stream = Files.list(path.getParent())) {
        stream.forEach(System.out::println);
    }
}); 
```

做同样的事情。

* * *

The final release of Java 9’s module system [has broken](https://bugs.openjdk.java.net/browse/JDK-8224946) the above code example. The Java versions from 9 to 12 inconsistently return the path `/java.base/java/lang/Object.class` for `Paths.get(Object.class.getResource("Object.class"))` whereas it should be `/modules/java.base/java/lang/Object.class`. This can be fixed by prepending the missing `/modules/` when the parent path is reported as non-existent:

```
processRessource(Object.class.getResource("Object.class").toURI(), path -> {
    Path p = path.getParent();
    if(!Files.exists(p))
        p = p.resolve("/modules").resolve(p.getRoot().relativize(p));
    try(Stream<Path> stream = Files.list(p)) {
        stream.forEach(System.out::println);
    }
}); 
```

Then, it will again work with all versions and storage methods. Starting with JDK 13, this work-around is not necessary anymore.

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-30T11:26:26.643

事实证明，您可以在内置[Zip 文件系统提供程序](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)的帮助下做到这一点。但是，将资源 URI 直接传递给是`Paths.get`行不通的；相反，必须首先为没有条目名称的 jar URI 创建一个 zip 文件系统，然后引用该文件系统中的条目：

```
static Path resourceToPath(URL resource)
throws IOException,
       URISyntaxException {

    Objects.requireNonNull(resource, "Resource URL cannot be null");
    URI uri = resource.toURI();

    String scheme = uri.getScheme();
    if (scheme.equals("file")) {
        return Paths.get(uri);
    }

    if (!scheme.equals("jar")) {
        throw new IllegalArgumentException("Cannot convert to Path: " + uri);
    }

    String s = uri.toString();
    int separator = s.indexOf("!/");
    String entryName = s.substring(separator + 2);
    URI fileURI = URI.create(s.substring(0, separator));

    FileSystem fs = FileSystems.newFileSystem(fileURI,
        Collections.<String, Object>emptyMap());
    return fs.getPath(entryName);
} 
```

**更新：**

正确地指出，上面的代码包含资源泄漏，因为代码打开了一个新的 FileSystem 对象但从未关闭它。最好的方法是传递一个像消费者一样的工作对象，就像 Holger 的答案是如何做到的。打开 ZipFS 文件系统，让工作人员对 Path 做任何需要做的事情（只要工作人员不尝试存储 Path 对象供以后使用），然后关闭文件系统。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-09-03T19:42:14.983

我写了一个小助手方法来读取`Paths`你的类资源。它使用起来非常方便，因为它只需要您存储资源的类的引用以及资源本身的名称。

```
public static Path getResourcePath(Class<?> resourceClass, String resourceName) throws URISyntaxException {
    URL url = resourceClass.getResource(resourceName);
    return Paths.get(url.toURI());
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-16T06:26:28.800

Read a File from resources folder using NIO, in java8

```
public static String read(String fileName) {

        Path path;
        StringBuilder data = new StringBuilder();
        Stream<String> lines = null;
        try {
            path = Paths.get(Thread.currentThread().getContextClassLoader().getResource(fileName).toURI());
            lines = Files.lines(path);
        } catch (URISyntaxException | IOException e) {
            logger.error("Error in reading propertied file " + e);
            throw new RuntimeException(e);
        }

        lines.forEach(line -> data.append(line));
        lines.close();
        return data.toString();
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-05T18:54:20.763

You can not create URI from resources inside of the jar file. You can simply write it to the temp file and then use it (java8):

```
Path path = File.createTempFile("some", "address").toPath();
Files.copy(ClassLoader.getSystemResourceAsStream("/path/to/resource"), path, StandardCopyOption.REPLACE_EXISTING); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-02T10:26:28.090

您需要定义文件系统以从 jar 文件中读取资源，如[https://docs.oracle.com/javase/8/docs/technotes/guides/io/fsp/zipfilesystemprovider.html](https://docs.oracle.com/javase/8/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)中所述。我成功地使用以下代码从 jar 文件中读取资源：

```
Map<String, Object> env = new HashMap<>();
try (FileSystem fs = FileSystems.newFileSystem(uri, env)) {

        Path path = fs.getPath("/path/myResource");

        try (Stream<String> lines = Files.lines(path)) {
            ....
        }
    } 
```

# javascript - 通过第三方库登录 Meteor

> ID：15713124
> 
> 赞同：1
> 
> 时间：2013-03-29T23:41:37.710
> 
> 标签：javascript, meteor

我正在尝试通过像这样的第三方库登录我的流星网站： [https ://gist.github.com/gabrielhpugliese/4188927](https://gist.github.com/gabrielhpugliese/4188927)

在我的 server.js 中，我有：

```
Meteor.methods({
facebook_login: function (fbUser, accessToken) {
    var options, serviceData, userId;
    serviceData = {
        id: fbUser.id,
        accessToken: accessToken,
        email: fbUser.email
    };
    options = {
        profile: {
            name: fbUser.name
        }
    };
    userId = Accounts.updateOrCreateUserFromExternalService('facebook', serviceData, options);
    return userId;
}, ...... 
```

在我的 client.js 中，我有：

```
 facebookLogin: function () {
    if (Meteor.user())
        return;
    if (!Session.equals("deviceready", true))
        return;
    if (!Session.equals("meteorLoggingIn", false))
        return;

    // Do not run if plugin not available
    if (typeof window.plugins === 'undefined')
        return;
    if (typeof window.plugins.facebookConnect === 'undefined')
        return;
    // After device ready, create a local alias
    var facebookConnect = window.plugins.facebookConnect;
    console.log('Begin activity');
    Session.equals("meteorLoggingIn", true);
    Accounts._setLoggingIn(true);
    facebookConnect.login({
        permissions: ["email", "user_about_me"],
        appId: "123456789012345"
    }, function (result) {
        console.log("FacebookConnect.login:" + JSON.stringify(result));

        // Check for cancellation/error
        if (result.cancelled || result.error) {
            console.log("FacebookConnect.login:failedWithError:" + result.message);
            Accounts._setLoggingIn(false);
            Session.equals("meteorLoggingIn", false);
            return;
        }

        var access_token = result.accessToken;

        Meteor.call('facebook_login', result, access_token, function (error, user) {
            Accounts._setLoggingIn(false);
            Session.equals("meteorLoggingIn", false);
            if (!error) {
                var id = Accounts._makeClientLoggedIn(user.id, user.token);
                console.log("FacebookConnect.login: Account activated " + JSON.stringify(Meteor.user()));
            } else {
                // Accounts._makeClientLoggedOut();
            }
        }); 
    });
}, // login
facebookLogout: function () {
    Meteor.logout();
    // var facebookConnect = window.plugins.facebookConnect;
    // facebookConnect.logout();
}, 
```

第三方库（在我的例子中是 Facebook Android SDK）工作正常。我的问题是在“var id = Accounts._makeClientLoggedIn(user.id, user.token);”之后 Meteor.user() 返回未定义。但是，如果我在浏览器中进行页面刷新工作正常并且模板呈现为登录用户。

任何人都知道如何修复客户端上的“未定义”？

PS。在服务器端，用户集合看起来不错。流星令牌和其他一切都在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T12:08:30.317

解决了。我必须添加：this.setUserId(userId.id); 在 userId = Accounts.updateOrCreateUserFromExternalService('facebook', serviceData, options); 之后 在 server.js

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:40:28.970

Meteor 的客户端 JavaScript 不能运行光纤。Fibers 允许同步代码与 javascript 一起使用，因为设计上 js 是异步的。这意味着需要使用回调来让您知道任务何时完成。

从它的样子看，它`Accounts._makeClientLoggedIn`不需要回调，不幸的是，它不会返回任何查看其来源的数据。我不能说我自己试过这个，因为我无法在没有 android sdk 的情况下测试你的代码，但你有没有尝试过使用[Deps.flush](http://docs.meteor.com/#deps_flush)进行反应性刷新？

此外，Meteor 还具有非常干净和简单的 facbeook 集成。如果您只是添加 facebook meteor 包

```
meteor add accounts-facebook 
```

您可以访问一个可爱的`Meteor.loginWithFacebook`方法，该方法可以使所有内容都具有反应性，并使您的代码更简单，更容易。如果您需要修改它以使用 Android SDK 对话框，您可以轻松地修改代码，因为模块的代码在[那里供您破解您的规范](https://github.com/meteor/meteor/tree/master/packages/accounts-facebook)

**编辑：如果您使用的是外部 SDK，例如 java SDK/cordova 插件**

设置您的插件，使其重定向到以下 URL（为meteor.com 托管设置）：

```
http://yourmeteorapp.meteor.com/_oauth/facebook?display=touch&scope=your_scope_request_params&state=state&code=yourOAuthCodeFromJava&redirect=YourAPP 
```

所以在查询字符串中我们有：

*   scope= 包含您的 facebook 范围参数（用于权限）
*   代码=您来自 java sdk 的 OAuth 代码
*   redirect=登录后重定向到哪里而不是 window.close
*   state= 跨站点伪造状态值，任何随机值都可以

此 url 基本上用于模仿在以下位置提供给 REDIRECT_URI 的内容：[https ://developers.facebook.com/docs/reference/dialogs/oauth/](https://developers.facebook.com/docs/reference/dialogs/oauth/)

这将重定向到流星的 OAuth 助手（在[https://github.com/meteor/meteor/blob/master/packages/accounts-oauth-helper/oauth_server.js](https://github.com/meteor/meteor/blob/master/packages/accounts-oauth-helper/oauth_server.js)）

那么会发生什么情况，您将 Java 中的 OAuth 代码提供给流星，它会获取 OAuth 令牌和用户数据，然后将用户重定向到您应用中的 URL

# hive - HIVE SerDe 的数据问题

> ID：15713128
> 
> 赞同：0
> 
> 时间：2013-03-29T23:41:51.910
> 
> 标签：hive

目标：- 使用***SerDe***功能解析日志数据并将其加载到 HIVE 中。在使用 SELECT 语句检索数据时遇到问题。

我们创建了一个表并且能够成功加载数据。但是，select 语句只检索 NULL 值。

**样本日志数据：**

```
2013-02-21 00:13:48,916 INFO org.apache.hadoop.hdfs.server.datanode.DataBlockScanner: Verification succeeded for blk_5729677439273359430_1495 
```

我们用来解析上述日志的正则表达式是：

```
([^ ]*) ([^ ]{8})[^ ]* ([A-Z]*) ([^ ]*): ([[^ ]*\s]*) 
```

**创建表**

```
CREATE EXTERNAL TABLE log (
dt STRING,
time STRING,
loglevel STRING,
check STRING,
status STRING )
ROW FORMAT
SERDE 'org.apache.hadoop.hive.contrib.serde2.RegexSerDe'
WITH SERDEPROPERTIES (
"input.regex"([^ ]*) ([^ ]{8})[^ ]* ([A-Z]*) ([^ ]*): ([[^ ]*\s]*)",
"output.format.string"="%1$s %2$s %3$s %4$s %5$s")
STORED AS TEXTFILE LOCATION '/tmp/log/'; 
```

**我们添加了罐子：**

```
add jar /usr/lib/hive/lib/hive-contrib-0.7.1-cdh3u4.jar; 
```

**加载数据：**

```
load data local inpath "/tmp/logdata.txt" into table log; 
```

**检索数据：**

```
Select * from log LIMIT 1; 
```

**输出：**

```
NULL NULL NULL NULL NULL 
```

样本日志数据：

```
2013-02-21 00:13:48,916 INFO org.apache.hadoop.hdfs.server.datanode.DataBlockScanner:
Verification succeeded for blk_5729677439273359430_1495

2013-02-21 00:15:39,929 INFO org.apache.hadoop.hdfs.server.datanode.DataBlockScanner:
Verification succeeded for blk_-4787916211671845946_1464 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:00:20.480

请试试这个，[Rubular 链接](http://rubular.com/r/rZob4zanEq)：

```
([^ ]*) ([^ ]{8})[^ ]* ([A-Z]*) ([^ ]*): (.*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T05:59:28.370

看起来你应该在“input.regex”之后添加“=”

通常，这种错误是由正则表达式与输入不**完全**匹配引起的。

# jquery - 动画滚动以锚定加载

> ID：15713129
> 
> 赞同：0
> 
> 时间：2013-03-29T23:42:00.337
> 
> 标签：jquery, scroll, anchor

我试图动画过去紫色块并加载到标题

[活生生的例子](http://jsfiddle.net/stxsh/)

**HTML**

```
<div id="block">
block</div>

<div id="header">
Header</div> 
```

**CSS**

```
#block {
    background: #342A7E;
    color: white;
    height: 200px;
}
#header {
    background: #3DB84E;
    color: white;
    height: 400px;
} 
```

**JS**

```
 $(document).ready(function()
{
     $("html,body").animate({scrollTop: -200}, 1000);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T23:45:17.270

# [jsFiddle](http://jsfiddle.net/mohammadAdil/nSbjB/2/)

```
$(document).ready(function() {
    $("html,body").animate({scrollTop: 200}, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:44:38.743

作为奖励：

处理性能，您可能想要使用对象动画：

```
var start = {v:0},
    end = {v: 200},
    duration = 10000,
    stepFunction = function stepFunction(v) {
        window.scrollTo(0,v);
    };

$(start).animate(end, {
    duration: duration,
    step: stepFunction,
    complete: stepFunction
}); 
```

这大约提高了 30% 的效率，这个百分比在祖先浏览器上更高。

在那里，您仍然可以使用 jQuery 或[此处](https://developer.mozilla.org/en-US/docs/DOM/window.scrollX)描述的属性来识别初始 scrollTop 。

最后，您可以尝试原生 setInterval 或 setTimeout 方法，但这可能意味着遇到问题，因为有多种方法可以处理帧速率。

# vba - 同时在多个工作簿中搜索多个字符串

> ID：15713133
> 
> 赞同：0
> 
> 时间：2013-03-29T23:42:25.743
> 
> 标签：vba, excel, excel-2010

如何自动搜索多个字符串？字符串的数量是可变的，位于 A 列，工作表“Plan1”，工作簿““Book1.xlsm”。我使用 Find Method 进行搜索，并使用 Input Box 在多个工作簿的循环中一一查找字符串。我想将此输入框替换为通过字符串的循环。我的部分代码：

```
 Dim wb As Workbook
Dim SearchString As String
Dim SearchRange As Range, cl As Range
Dim Escolhe_Cor As String
Dim FirstFound As String
Dim ws As Worksheet

str = InputBox("Digite o número a ser procurado")
Escolhe_Cor = InputBox("Escolha uma cor para destacar esse número. De 3 a 56")
Application.FindFormat.Clear

  SearchString = Trim(str)

 For Each wb In Workbooks
   If wb.Name <> "Book1.xlsm" Then
    wb.Activate

 If Len(SearchString) = "8" Then

    For Each ws In ActiveWorkbook.Worksheets
             ' Find first instance on sheet
    Set cl = ws.Cells.Find(What:=SearchString, _
        After:=ws.Cells(1, 1), _
        LookIn:=xlValues, _
        LookAt:=xlWhole, _
        SearchOrder:=xlByRows, _
        SearchDirection:=xlNext, _
        MatchCase:=False, _
        SearchFormat:=False)
             If Not cl Is Nothing Then
               ' if found, remember location
                 FirstFound = cl.Address
                 ' format found cell

            Do 'etc etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:26:46.413

试试下面的代码：

```
 Dim wb As Workbook
    Dim SearchString As String
    Dim SearchRange As Range, cl As Range
    Dim Escolhe_Cor As String
    Dim FirstFound As String
    Dim ws As Worksheet
    Dim searchRng As Range, lastRow As Long, cell As Range

    Dim lastRow As Long
    lastRow = Workbooks("Book1.xlsm").Sheets("Plan1").Range("65000").End(xlUp).Row

    Set searchRng = Workbooks("Book1.xlsm").Sheets("Plan1").Range("A2:A" & lastRow)   '

    For Each cell In searchRng
           SearchString = Trim(cell)

        For Each wb In Workbooks
            If wb.Name <> "Book1.xlsm" Then
                wb.Activate

                If Len(SearchString) = "8" Then

                    For Each ws In ActiveWorkbook.Worksheets
                        ' Find first instance on sheet
                        Set cl = ws.Cells.Find(What:=SearchString, _
                                               After:=ws.Cells(1, 1), _
                                               LookIn:=xlValues, _
                                               LookAt:=xlWhole, _
                                               SearchOrder:=xlByRows, _
                                               SearchDirection:=xlNext, _
                                               MatchCase:=False, _
                                               SearchFormat:=False)
                        If Not cl Is Nothing Then
                            ' if found, remember location
                            FirstFound = cl.Address 
```

# apache - Prevent Non-Existent Directories From Loading Wildcard Files

> ID：15713136
> 
> 赞同：0
> 
> 时间：2013-03-29T23:42:52.400
> 
> 标签：apache, url, directory, wildcard

I am looking to prevent URLs for directories that don't exist from loading files with the same basename. For example **[http://domain.com/test/](http://domain.com/test/)** is loading **test.php**. The test directory does not exist, but the file test.php does. I can see how this would be useful in most cases, but I am looking to disable it for my project.

I am on an Apache server. Is there a way to disable this option through an .htaccess file?

If there is an actual name for this type of feature, maybe "wildcard filename helper" or something like that, I'd like to know the official term too. Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:52:26.453

This happens because MultiViews is enabled on the server.

If the apache configuration allows you to do so, you should be able to disable it by putting the following in .htaccess:

```
Options -MultiViews 
```

# dynamics-crm-2011 - 无法检索插件上的“两个选项”值 - CRM 2011

> ID：15713146
> 
> 赞同：0
> 
> 时间：2013-03-29T23:43:41.740
> 
> 标签：dynamics-crm-2011, crm

我无法使用以下代码在插件上检索“两个选项”字段的选定值

```
bool? update = entity.GetAttributeValue<bool?>("new_updatecontacts");

bool  update = entity.GetAttributeValue<bool>("new_updatecontacts");

if (update)
{
    ..................
} 
```

有没有其他方法可以检索相同的内容？我已经发布了同样的问题，但没有得到明确的答案，所以我再问一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:40:16.330

默认情况下，插件仅包含已添加/更新的字段的值。对于其他事件，您会获得其他属性，但现在让我们先处理它。

因此，如果您想确定自己的价值，您需要跑到 CRM 获取副本。

```
var context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
var serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
var service = serviceFactory.CreateOrganizationService(context.InitiatingUserId);

var target = context.InputParameters["Target"] as Entity;
if (!target.Contains("new_updatecontacts"))
{
    target = service.Retrieve(target.LogicalName, target.Id, new ColumnSet(new [] { "new_updatecontacts", "other_required_fields_here" });
}

//now you know it is present 
```

值得先检查它是否存在，因为它可以保存服务器命中。

# c++ - C++ / C - odd code

> ID：15713147
> 
> 赞同：1
> 
> 时间：2013-03-29T23:43:46.300
> 
> 标签：c++, fastcgi

I am looking at some sample code and cant work out what the following lines are doing:

```
 fcgi_streambuf cin_fcgi_streambuf(request.in);
   fcgi_streambuf cout_fcgi_streambuf(request.out);
   fcgi_streambuf cerr_fcgi_streambuf(request.err); 
```

I dont come from a c background so the syntax looks a bit odd - each line is calling a function in initialising a new object but i would expect at least an assignment in there. For example:

```
 fcgi_streambuf = cin_fcgi_streambuf(request.in);
    fcgi_streambuf = cout_fcgi_streambuf(request.out);
    fcgi_streambuf = cerr_fcgi_streambuf(request.err); 
```

The full example code can be found here: [http://chriswu.me/blog/writing-hello-world-in-fcgi-with-c-plus-plus/](http://chriswu.me/blog/writing-hello-world-in-fcgi-with-c-plus-plus/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T23:45:29.067

No, each line is defining a variable.

```
 fcgi_streambuf cin_fcgi_streambuf( request.in );
// ^-type-------^ ^-name-----------^  ^-params-^ 
```

Where the parameter is passed to the constructor of class `fcgi_streambuf`. **While not 100% accurate**, it might help to think of it this way:

```
fcgi_streambuf cin_fcgi_streambuf = fcgi_streambuf( request.in ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T23:45:30.033

Those lines are declaring three variables of type `fcgi_streambuf` and calling the constructor for that type.

# jquery - 用于 XML 检索的 $.getJSON 或 $.ajax 替代方案

> ID：15713150
> 
> 赞同：0
> 
> 时间：2013-03-29T23:44:03.343
> 
> 标签：jquery, xml, json, request

我已经开始从事一个私人项目。但是，在第一阶段，我已经面临一个问题。

1.  返回的数据是 XML 格式（还不错，但需要花费大量精力来解析可用的对象）
2.  远程服务器不接受除自己以外的任何 ORIGIN，因此浏览器抛出错误：Access-Control-Allow-Origin 不允许 Origin *。

    *   (*) 可以是 null、localhost 或我的网站。

所以我一直在搜索，但找不到任何结果。

似乎在使用 jsonp 参数时没有其他选择`$.ajax`，并且名称`$.getJSON`正如它所说的那样，旨在检索`JSON`，而不是`XML`。

所以我想知道，如果在发送请求时禁用 ORIGIN 属性，是否还有其他替代方法可以检索外部 XML 数据？

* * *

我注意到可以使用 PHP 函数获取内容：file_get_contents。但我真的很想知道是否有使用 JQuery 的不同方式。

如果有人知道我如何让 JQuery 与返回的 PHP 文件内容进行通信，请随时启发我：']

* * *

解决了。请参考以下帖子：[用于 XML 检索的 $.getJSON 或 $.ajax 替代方案](https://stackoverflow.com/questions/15713150/getjson-or-ajax-alternative-for-xml-retrieval/15716839#15716839)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:10:25.790

这不是我给出的问题的实际解决方案。但这是一种使用 PHP 绕过来源的方法。

在我的 javascript 中，我使用以下内容请求了我的 PHP 代码：

```
function Communication () {

    this.global = new Global();

    this.allowedParameters = ["Character"];

    this.retrieveXMLFromRemoteServer = function (section, keyId, vCode) {
        if (this.global.arrayContainsValue(section, this.allowedParameters)) {
            $.get(this.formatCommunicationURL(section, keyId, vCode), function(data) {
                alert(data);
            });
        }
    }

    this.formatCommunicationURL = function (baseUri, keyId, vCode) {
        return "server/" + baseUri + ".php?keyId=" + keyId + "&vCode=" + vCode;
    }
} 
```

例如：server/Character.php?keyId=00001&vCode=002342345234

The PHP file contains the following code:

```
<?php

namespace my_api; 

class Character {
    function retrieveCharacters ($keyId, $vCode) {
        return file_get_contents("https://external_url/Characters.aspx?keyId=" . $keyId . "&vCode=" . $vCode);
    }
}

$char = new Character();
echo $char->retrieveCharacters($_GET['keyId'], $_GET['vCode']);

?> 
```

This file retrieves the data from the external URL, and then echo's the output so there is a response text JS will be able to use.

Hope this helps for some of you

# silverlight - BingMaps Silverlight 不能使用 http 的tilesouce，只有 https 有效

> ID：15713153
> 
> 赞同：0
> 
> 时间：2013-03-29T23:44:19.800
> 
> 标签：silverlight, http, bing-maps, crossdomain.xml, clientaccesspolicy.xml

我一直在关注一大堆关于如何在 bing 地图 silverlight 中使用叠加层的教程，但它们似乎都没有提到我的这个问题。

教程示例：[https ://alastaira.wordpress.com/2011/01/07/accessing-a-wms-tile-server-from-bing-maps-silverlight/](https://alastaira.wordpress.com/2011/01/07/accessing-a-wms-tile-server-from-bing-maps-silverlight/)

发生的事情是我将 tilesource 设置为：“ [http://wms1.ccgis.de/cgi-bin/mapserv?map=/data/umn/germany/germany.map&&VERSION=1.1.1&REQUEST=GetMap&SERVICE=WMS&SRS= EPSG%3A4326&BBOX=](http://wms1.ccgis.de/cgi-bin/mapserv?map=/data/umn/germany/germany.map&&VERSION=1.1.1&REQUEST=GetMap&SERVICE=WMS&SRS=EPSG%3A4326&BBOX=) {0}&WIDTH=256&HEIGHT=256&LAYERS=Bundeslaender"

当我运行应用程序并使用提琴手检查调用时，不会对该服务进行一次调用。如果我将源更改为以 https 开头，则可以在 fiddler 中看到调用。

我还尝试启动一个网络客户端并在[http://google.com](http://google.com)上发出一个 get 请求，fiddler 实际上记录了一个对[http://google.com/clientaccesspolicy.xml](http://google.com/clientaccesspolicy.xml)的调用，这似乎与它应该如何工作一致.

我的网站根目录中有以下 xml 文件。

客户端访问策略.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <!-- IMPORTANT! Include these lines -->
        <domain uri="https://*"/>
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

跨域.xml

```
<cross-domain-policy>
    <allow-access-from domain="*.*" headers="SOAPAction"/>
    <allow-http-request-headers-from domain="*.*" headers="SOAPAction"/> 
    <site-control permitted-cross-domain-policies="master-only"/>
</cross-domain-policy> 
```

有人有想法么？似乎 bingmaps SDK 甚至拒绝尝试 http 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:11:12.290

如果您自己的 Silverlight 应用程序托管在 https 上，则它无法向任何 http 站点发出请求。我认为这是原因 - 否则它应该工作

# php - 自动选择和 jQuery post 不能一起工作

> ID：15713155
> 
> 赞同：1
> 
> 时间：2013-03-29T23:44:31.280
> 
> 标签：php, jquery, html, mysql, post

我的代码还有另一个问题。

```
 <script type="text/javascript">
        $("#wojewodz").change(function(){
        var id_wojewodztwa = $("#wojewodz").children(":selected").attr("id");
        $.post("miasta.php", { id_wojewodztwa: id_wojewodztwa } );
        $('#powiat_miasto_auto_complete').autocomplete({source:'miasta.php', minLength:2});
        });
    </script> 
```

这是获取所选选择的 ID 并将其传输到 miasta.php 的函数

```
$options = array(
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
); 

try {
  $conn = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass, $options);
}
catch(PDOException $e) {
    echo $e->getMessage();
}

$return_arr = array();

if (($conn) and (isset($_GET['id_wojewodztwa'])))
{
    $id_wojewodztwa = $_GET['id_wojewodztwa'];
    $ac_term = "%".$_GET['term']."%";
    $query = "SELECT DISTINCT nazwa FROM podzial_tm where woj='$id_wojewodztwa' and nazdod!='województwo' and nazwa like :term LIMIT 10";
    $result = $conn->prepare($query);
    $result->bindValue(":term",$ac_term);
    $result->execute();

    /* Retrieve and store in array the results of the query.*/
    while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
        $row_array['value'] = $row['nazwa'];

        array_push($return_arr,$row_array);
    }

}
/* Free connection resources. */
$conn = null; 
/* Toss back results as json encoded array. */
echo json_encode($return_arr);
?> 
```

有人可以告诉我哪里有错误吗？当我将“ where woj='$id_wojewodztwa'”更改为例如“ where woj='26'”并删除“ and (isset($_GET['id_wojewodztwa']))”时，一切正常，所以我认为我有问题与 POST

复活节快乐！:)))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T23:46:46.813

您正在发布数据。您需要寻找`$_POST['id_wojewodztwa']`您正在寻找的价值，而不是在`$_GET`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:55:23.517

```
$.post("miasta.php", { id_wojewodztwa: id_wojewodztwa } ); 
```

至

```
$.get("miasta.php", { id_wojewodztwa: id_wojewodztwa } ); 
```

或者如果您必须赶上结果，请使用：

```
$.get("miasta.php", { id_wojewodztwa: id_wojewodztwa },function(result){
       /** some code here */
},'json'); 
```

**更新：**

如果您使用 $.post，请编辑以下行：

```
if (($conn) and (isset($_POST['id_wojewodztwa'])))
{
    $id_wojewodztwa = $_POST['id_wojewodztwa']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:57:12.313

删除`isset($_GET['id_wojewodztwa'])`并修改`$id_wojewodztwa = intval($_GET['id_wojewodztwa']);`

# spring-integration - Spring 集成：将请求范围内的 twitter-template bean 注入入站通道适配器

> ID：15713156
> 
> 赞同：1
> 
> 时间：2013-03-29T23:44:43.620
> 
> 标签：spring-integration

我有一个注释配置的请求范围的 TwitterTemplate bean，我想将该 bean 注入到一个 xml 配置的入站通道适配器中。

最好的方法是什么？如果多个会话访问同一个入站通道适配器，是否需要考虑任何影响？

你有任何通过 java 配置的 twitter inbound-channel-adapter 的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T08:02:20.170

将 ApplicationContext 对象作为属性注入到您的 xml 配置 bean 中。您的 xml 配置 bean 可以实现 InitializingBean 并覆盖 afterPropertiesSet 方法，您可以在其中获得 twitterBean 的实例，如下面的代码所示。

无论您使用何种配置机制，您的上下文都会被合并。

```
YourXmlBean implements InitializingBean {

ApplicationContext ctx;
TwitterTemplate twitBean;

...

@Override
public void afterPropertiesSet(){
 twitBean = (TwitterTemplate) ctx.getBean("twitterTemplate");
} 
```

# asp.net - 我们如何在 Webmatrix 中使用验证控件？

> ID：15713157
> 
> 赞同：0
> 
> 时间：2013-03-29T23:44:51.167
> 
> 标签：asp.net, validation, webmatrix

我是 webmatrix 的新手，并试图找到我如何使用验证控件，就像我们在 Visual Studio 的 asp.net 中使用的一样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:27:33.753

WebMatrix 2 显着改进了验证支持。这是微软的官方链接： [http](http://www.asp.net/web-pages/overview/whats-new/top-features-in-web-pages-2#validation) ://www.asp.net/web-pages/overview/whats-new/top-features-in-web-pages-2#validation 。此外，@MikeDotNetting 有一个简短的描述作为 HTML5 页面的一部分：http: [//www.mikesdotnetting.com/Article/199/HTML5-Form-Helpers-For-WebMatrix](http://www.mikesdotnetting.com/Article/199/HTML5-Form-Helpers-For-WebMatrix)。MikeDotNetting 是 WebMatrix 上的独立权威。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:01:49.710

我在这里写了一篇关于在网页 2 中使用验证助手的文章：http: [//www.mikesdotnetting.com/Article/191/Validation-In-Razor-Web-Pages-2](http://www.mikesdotnetting.com/Article/191/Validation-In-Razor-Web-Pages-2)

希望能帮助到你。

# java - Where to close an Elasticsearch client connection?

> ID：15713159
> 
> 赞同：1
> 
> 时间：2013-03-29T23:45:14.027
> 
> 标签：java, jakarta-ee, elasticsearch

Where should I close the connection to a client for Elasticsearch? I am using Spring, and I don't want to use the Elasticsearch integration because I want to learn how to do it without first. Should only one client be created for the application? Meaning that it would have singleton scope? Or should it have prototype scope and close the connection for each interaction?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T23:46:58.690

You should use one client per application, make it a singleton and close on application shutdown.

# c# - 访问组件 c#

> ID：15713161
> 
> 赞同：1
> 
> 时间：2013-03-29T23:45:17.600
> 
> 标签：c#, ms-access, combobox

我想知道为什么我可以从主类外部的组合框中访问文本。但我无法向其中添加项目..**我的组合框的修饰符设置为 public**

```
public class ImageManager : mainFrame // Where my components are located
{ 
    public ImageManager()
    {

    }

    public void getText()
    {
       Console.WriteLine(comboBox.Text); //Will perfectly retrieve the text from it
    }

    public void setItem()
    {
       comboBox.Items.Add("Items"); //Does absolutely nothing and doesn't show error 
    }
} 
```

感谢帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:19:05.680

如果您`setItem()`填充 a`ComboboxItem`并添加它而不仅仅是文本怎么办？

```
public void setItem() 
{
   ComboboxItem addMe = new ComboboxItem();
   addMe.Text = "your text here";
   addMe.Value = 1234; // make a relevant value
   comboBox.Item.Add(addMe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:37:06.763

我看到你成功了，太好了。但以防万一你还在挠头……

```
 private void Form1_Load(object sender, EventArgs e)
    {
        ImageManager im = new ImageManager();
        im.Show();
        im.setItem();
    } 
```

ImageManager 继承自具有组合框的 Form2。似乎工作正常。组合框被填充。

# ruby-on-rails-3 - 在纯文本电子邮件中处理带有 \n 的字符串

> ID：15713163
> 
> 赞同：0
> 
> 时间：2013-03-29T23:45:21.650
> 
> 标签：ruby-on-rails-3, email, line-breaks, plaintext

我的数据库中有一个包含如下字符串的列：

```
"Warning set for 7 days.\nCritical Notice - Last Time Machine backup was 118 days ago at 2012-11-16 20:40:52\nLast Time Machine Destination was FreeAgent GoFlex Drive\n\nDefined Destinations:\nDestination Name: FreeAgent GoFlex Drive\nBackup Path: Not Specified\nLatest Backup: 2012-11-17" 
```

我在给用户的电子邮件中显示这些数据。通过执行以下操作，我可以轻松地完美地格式化我的 html 电子邮件中的字段：

```
simple_format(@servicedata.service_exit_details.gsub('\n', '<br>')) 
```

上面的代码`"\n"`用`"<br>"`标签替换了，simple_format 处理其余的。

我的问题在于如何在纯文本模板中正确格式化。最初我以为我可以只调用该列，因为`"\n"`我认为纯文本会解释并且一切都会好起来的。然而，这只是简单地吐出带有“\n”的字符串，就像上面显示的那样，而不是根据需要创建换行符。

试图找到一种解析字符串的方法，以便确认换行符。我试过了：

```
 @servicedata.service_exit_details.gsub('\n', '"\r\n"')
    @servicedata.service_exit_details.gsub('\n', '\r\n')
    raw @servicedata.service_exit_details
    markdown(@servicedata.service_exit_details, autolinks: false) # with all the necessary markdown setup
    simple_format(@servicedata.service_exit_details.html_safe) 
```

没有一个奏效。

谁能告诉我我做错了什么或者我如何才能做到这一点？

我想要的是纯文本确认换行符并将字符串格式化如下：

```
Warning set for 7 days.
Critical Notice - Last Time Machine backup was 118 days ago at 2012-11-16 20:40:52
Last Time Machine Destination was FreeAgent GoFlex Drive

Defined Destinations:
Destination Name: FreeAgent GoFlex Drive
Backup Path: Not Specified\nLatest Backup: 2012-11-17" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:11:08.613

我懂了。

您需要区分文字反斜杠后跟字母`n`作为两个字符的序列，以及通常表示为的 LF 字符（又名换行符）`\n`。

You also need to distinguish two different kinds of quoting you're using in Ruby: singles and doubles. Single quotes are literal: the only thing that is interpreted in single quotes specially is the sequence `\'`, to escape a single quote, and the sequence `\\`, which produces a single backslash. Thus, `'\n'` is a two-character string of a backslash and a letter `n`.

Double quotes allow for all kinds of weird things in it: you can use interpolation with `#{}`, and you can insert special characters by escape sequences: so `"\n"` is a string containing the LF control character.

Now, in your database you seem to have the former (backslash and `n`), as hinted by two pieces of evidence: the fact that you're seeing literal backslash and `n` when you print it, and the fact that `gsub` finds a `'\n'`. What you need to do is replace the useless backslash-and-`n` with the actual line separator characters.

```
@servicedata.service_exit_details.gsub('\n', "\r\n") 
```

# c# - 即使项目构建，ReSharper“无法解析符号”

> ID：15713167
> 
> 赞同：521
> 
> 时间：2013-03-29T23:45:48.820
> 
> 标签：c#, asp.net-mvc, visual-studio-2012, resharper-7.1

**我的工具：**

**Visual Studio 2012 终极版 + 更新 1**

**ReSharper v7.1.25.234**

**我的解决方案构建状态：** *构建成功*

但是当我安装 ReSharper 并启用 ReSharper 代码分析时，我的代码的许多关键字都是红色的，并出现此错误：

**“无法解析符号 XXX”**

![在此处输入图像描述](../Images/039da5b9208fa83b1f3589af355af9c9.png)

* * *

我的项目的另一张照片>>

**ReSharper “CANNOT RESOLVE SYMBOL” 错误无处不在，但我的项目构建过程是成功的，并且可以正常工作。**

![在此处输入图像描述](../Images/19ad73e47a1fe77df86a74cd4b36f309.png)

**附加说明：**如果我禁用 ReSharper 代码分析，我的项目将是正常的，但我想使用 ReSharper 代码分析。

* * *

**我尝试**了ReSharper →*选项*→*常规*→*清除缓存*。但是我还是有这个问题！

* * *

*   一个月前，我在卸载 Visual Studio 2012 RC 并安装 VS 2012 RTM 时遇到这些错误。

*   我已经卸载并再次安装了 ReSharper。但是我还有这个问题！

*   我的解决方案有五个项目>>两个加载项目（主项目+资源项目）和三个卸载项目

* * *

**我意识到我的 Visual Studio 也有更大的问题** [（有关 Stack Overflow 的更多信息）](https://stackoverflow.com/questions/15746529/mvc-website-package-updating-error-loading-type-library-dll-exception-from-h)

*   我无法添加对我的项目的任何引用（即使在新解决方案和新项目中）

*   我无法安装任何包（通过“包管理器控制台”或管理 NuGet 包）

*   我无法更新任何包（通过“包管理器控制台”或管理 NuGet 包）

**我做了很多建议（对我自己和其他人）**

*   重新注册一些 DLL 文件

*   使用一些 Windows 和注册表修复工具

*   移除 ReSharper

*   修复 Visual Studio

*   和...

但我无法解决。

**我正在考虑安装一个新的 Windows** :(

* * *

**出了什么问题，我该如何解决？**

* * *

## 回答 #1

> 赞同：780
> 
> 时间：2013-05-09T09:30:33.257

尝试 Visual Studio → 菜单*工具*→*选项*→ *ReSharper*，`Suspend`按钮并`Resume`再次尝试（无需关闭窗口）。这适用于我的情况。

* * *

## 回答 #2

> 赞同：239
> 
> 时间：2013-10-23T12:40:22.510

```
VS -> Tools -> Options -> ReSharper Suspend button 
Clear Contents of -> AppData\Local\JetBrains\ReSharper\v7.1\SolutionCaches
VS -> Tools -> Options -> ReSharper Resume  button 
```

* * *

## 回答 #3

> 赞同：129
> 
> 时间：2013-12-17T08:29:06.300

这对我有用（VS2012u4，R# 7.1.3）：

1.  Resharper > 选项 > 环境：常规 > 清除缓存
2.  重新启动 Visual Studio

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-11-13T23:51:03.783

清除 Resharper 缓存：Resharper -> 选项 -> 常规 -> 清除缓存，关闭并重新打开解决方案。它在 R# 9.0 Update 1 中工作

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2013-03-30T08:12:54.460

当您的解决方案中有同一个库的两个不同版本时，ReSharper 会发生这种情况。例如，项目 A 引用 automapper 1.1 版，项目 B 引用 automapper 1.0 版。

Visual Studio 通常会在这种情况下按预期编译和运行，因为它会选择要绑定到的 DLL 之一。然而，ReSharper 变得非常困惑。对我来说，这应该是一个 ReSharper 错误，它要求您解决，而不仅仅是发疯。

**更新：**

两天前（我发表这篇文章的第二天）完全巧合地遇到了这个问题，并遇到了这个[链接](http://youtrack.jetbrains.com/issue/RSRP-329698)，他们说这是由 VS API 中的错误引起的。我尝试了他们推荐的所有方法，但即使是暂时也无法解决：我有从 google.code 下载的 Autofac 2.6.x，然后将其换成 NuGet 包版本，它故意拒绝看到新的参考号不管我做了什么。

他们建议安装[R# 8 EAP](http://confluence.jetbrains.com/display/ReSharper/ReSharper+8+EAP)，但对我来说，只需降级到旧版本的 Autofac 就不那么麻烦了。

帮助的方式不多，但也许有用。

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2016-10-11T19:20:22.617

Visual Studio 2015 和 ReSharper Ultimate 10.0.2 发生在我身上。我尝试了几乎所有在此答案之前编写的解决方案（除了任何重新安装），但没有任何效果。

我以***非常***特定的顺序通过上述各种步骤再次使其工作：

1.  ReSharper → 选项 → 环境 → 常规 → 清除缓存
    *   这必须在暂停 ReSharper*之前*完成，否则此选项不可用
    *   这会清除`C:\Users\YourUsername\AppData\Local\JetBrains\Transient\ReSharperPlatformVs14\v04`其他帖子中提到的文件
2.  工具 → 选项 → ReSharper Ultimate → 暂停
3.  关闭 Visual Studio
    *   这实际上执行了 ReSharper 缓存清除
4.  打开 Visual Studio
5.  打开解决方案
    *   我等待 Visual Studio 检测到 IntelliSense 中没有代码问题，并且此时可能已经执行了构建。
6.  工具 → 选项 → ReSharper Ultimate → 恢复

希望在最后一步之后您可以松一口气，您不必重新安装任何东西，我当然做到了！

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2018-10-03T02:34:10.220

这通常是由于配置文件损坏或错误检测而发生的。只需**删除 .vs 文件夹**，重新启动 VS 即可重置配置。它几乎可以工作

[![在此处输入图像描述](../Images/b1f531de92de5c1a66a8463db8a6d685.png)](https://i.stack.imgur.com/Qgrus.png)

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2013-09-23T12:39:15.080

我有类似的问题并清除了在以下位置找到的缓存：

AppData\Local\JetBrains\ReSharper\v7.1\SolutionCaches

为我解决了问题

运行 VS2012 u3

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2017-07-20T11:28:43.910

我有同样的问题（VS 2017）。在我的情况下，它是目标框架的不同版本——一个程序集的目标是 4.52，另一个是 4.62——在两个程序集中将它们设置为相同的版本后，它又开始工作了。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2014-03-06T16:23:33.707

以上清除缓存和/或暂停 ReSharper 的链接对我不起作用。我只是从解决方案资源管理器中“刷新”了显示此问题的项目，问题就消失了。可悲的是，它不断重复出现，并且每次出现此问题时只能选择它继续刷新。

我在 Windows 8 上有带有 ReSharper 8.1 的 VS2012

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2018-08-28T06:24:01.510

如您所见，解决方案是每个人都已经提到的 - 只需**暂停**ReSharper，然后**清除缓存**，最后**恢复**它。但是，没有人提到如何在不关闭/重新启动 Visual Studio 的情况下做到这一点。

只需按照以下**步骤操作：**

1.  **获取 ReSharper 缓存位置**

    *   **手动**转到 ReSharper 选项 > 环境 > 常规 > 将解决方案缓存存储在（组合框）中（在图像中标记为**2**）。选择自定义文件夹，然后从显示的文本框中**复制**缓存文件夹的位置（在图像中标记为**3**）。恢复设置。标记的 1 显示**ClearCache Button**。它通常不会起作用，所以离开它。 [![显示东西的图片](../Images/ccbb5fe4805be2b9eac4fcc8867b5b6f.png)](https://i.stack.imgur.com/PxbID.png)
2.  **暂停 ReSharper**

    *   您可以通过转到工具 > 选项 > ReSharper 或 ReSharper Ultimate >**立即暂停（按钮）来执行此操作** [![ReSharper 挂起选项](../Images/75ce856c443c1fe441707be05827beff.png)](https://i.stack.imgur.com/RAwK5.png)
3.  **清除缓存**

    *   转到前面在**步骤 1**中复制的位置，然后删除该文件夹中的所有内容。是的，我的意思是一切。
4.  **恢复 ReSharper**

    *   您可以通过再次转到工具 > 选项 > ReSharper 或 ReSharper Ultimate >**恢复（按钮）来执行此操作**

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2014-09-04T14:57:57.890

我只是在 Visual Studio 2013 中遇到了与 ReSharper 8.2 相同的问题，并且这里清除缓存、暂停 ReSharper 或重新安装 ReSharper 的常用解决方案都不起作用。

就我而言，我最终解决了它如下...我查看了它无法解决的符号之一，并注意到它在`System.Web.Http.dll`. 然后我发现这是在`Microsoft.AspNet.WebApi.Core`NuGet 包中。我使用包管理器控制台尝试卸载该包，当然它告诉我由于其他依赖项而无法卸载。

所以我卸载了每个依赖项，包括`Microsoft.AspNet.WebApi.Core`，然后以相反的顺序再次重新安装每个包。ReSharper 在安装时正确拾取了所有内容，现在看起来很好。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2014-01-10T15:11:06.670

我遇到了同样的问题，卸载和重新加载有问题的项目帮助我为 ReSharper 清除了这个问题。希望这可以帮助。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2015-12-21T00:47:48.603

我最终需要请求 Resharper 清除其缓存以及通过 Windows 文件资源管理器手动执行此操作。这终于为我解决了这个问题。

1.  （正如这里的许多解决方案所报告的）RESHARPER > 选项... > 环境 > 常规 > 清除缓存。
2.  关闭 Visual Studio。
3.  转到 Visual Studio 2015 中 Resharper 10 的文件资源管理器中的此路径：%localappdata%\JetBrains\Transient\ReSharperPlatformVs14
4.  删除该文件夹中的所有子文件夹及其内容。
5.  重新启动 Visual Studio，重新加载您的解决方案并等待 Resharper 为解决方案初始化自身。

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-10-01T10:57:24.780

对于**VS2015**的我来说，我必须将**Resharper 更新**到版本**2016.2.2**才能解决问题。

我已经尝试过（其中没有一个对我有用）：

*   暂停/恢复
*   暂停/清除缓存（使用工具>选项按钮）/恢复
*   挂起/清除缓存（使用 Windows 文件系统）/恢复
*   将缓存移动到解决方案文件夹/重新启动 Visual Studio
*   以上全部或部分的许多其他组合

我希望这可以帮助某人。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2017-07-18T09:29:35.377

Resharper -> 选项缓存 -> 将解决方案缓存存储在：（将文件夹更改为另一个）。

或者尝试手动清理 R# 缓存文件夹

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2013-09-23T20:40:27.083

我正在使用 7.1，这对我有用：

1.  卸载重新锐化器
2.  转到 %appdata% 并删除 JetBrains\Resharper 和 ..\Local\JetBrains\Resharper 文件夹
3.  重新安装 resharper

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-03-10T17:02:34.223

我做了上面的一切，没有修复。

然后我从另一个 SO Q/A（不记得是哪一个）做了一个步骤，将 System.Web.Mvc 设置为 Copy Local true。重新编译我的项目，错误就消失了。

当我将此程序集设置回 Copy Local false 时，错误没有返回。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-07-29T12:48:53.890

我的情况，我尝试了上面的所有建议。但是，在某个时候，我意识到即使 Resharper 被暂停，问题仍然存在。因此，我在 VS 本身中寻找了类似的问题，并在[此 SO 帖子](https://stackoverflow.com/questions/1039072/visual-studio-references-in-code-not-recognized)中接受的答案的评论中找到了解决方案。

为了简洁起见，我列出了我的步骤。

1.  VS -> 工具 -> 选项 -> ReSharper 暂停按钮
2.  构建解决方案。请注意所有引用仍未解决
3.  **清洁溶液**
4.  重启VS
5.  在没有 Resharper 的情况下构建解决方案。注意所有引用已解决
6.  VS -> 工具 -> 选项 -> ReSharper 恢复按钮

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2021-04-22T19:22:10.153

None of the cache cleanup worked for me. All of the symbols in any of our private NuGet repros just stopped being picked up with R# enabled, very frustrating. I got this feedback from JetBrains support, which DID work, after toggling and restarting VS2019:

> 禁用以下选项 - ReSharper | 选项 | 环境 | 一般 | 直接读取解决方案模型

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-02-12T14:16:48.013

我正在使用 VS2015，R#10。建议的解决方案都不适合我。我删除了解决方案的 bin 文件夹的内容并重建了整个解决方案，这似乎已经解决了问题。在删除 bin 文件夹的内容之前，我曾尝试暂停和恢复 R#，从 R# -> 选项 -> 常规设置清除缓存，并手动删除 \AppData\Local\JetBrains\Transient\ReSharperPlatformVs12\ 中的内容v01\SolutionCaches .. 希望对某人有所帮助。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-06-15T10:01:11.127

我在使用 Resharper Ultimate 的 Visual Studio 2015 中遇到了同样的问题，并尝试了上面建议的解决方案，但没有一个对我有用。

然后将 Resharper 升级到最新版本解决了我的问题。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-03-29T15:11:27.850

在上面的几个建议之后，对我的情况有什么帮助没有：

*   删除了一个项目引用（ReSharper 声称即使正确引用也无法找到它的库之一）。
*   在其中一种用法上使用 ReSharper 的“解决”以再次添加引用。

之后，它工作正常，即使在此过程中实际上没有修改任何项目文件。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-12-21T02:02:26.097

我有同样的问题。清理 Resharper 缓存和暂停 Resharper 对我不起作用。我只是关闭 Visual Studio，卸载 Resharper，然后安装 Resharper，问题就消失了。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-02-20T11:46:36.800

我引用了一个未被 R# 识别的 NetStandard2.0 项目。我清除了缓存，但这对我没有帮助。

下载最新版本并更新 R#**确实**对我有用。

这是我现在正在运行的版本：

```
JetBrains ReSharper Ultimate 2017.3.2  Build 111.0.20180201.63358
ReSharper 2017.3.20180201.111630 
```

只需[下载](https://www.jetbrains.com/resharper/download/)R#，它就会识别已安装的版本。更新到最新版本真的很容易。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-09-12T13:10:52.710

当我禁用 ReSharper 时，即使项目成功构建，Visual Studio 也会出现同样的错误。我为解决这个问题所做的是：

1.  从解决方案中删除项目。
2.  右键单击解决方案，添加现有项目，选择项目文件并再次添加。

执行这些步骤后，Visual Studio 中的语法错误消失了，我再次启用 ReSharper 后，它也没有错误。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-01-15T13:29:11.020

I also had this problem. All previous solutions did not help for me or helped for a very short time. In my case, the problem was that I connected the .Net Framework 4.7.2 project to a project that has version 4.5.2\. After I updated both projects to version 4.7.2, the problem was resolved. I think that to solve the problem you need to have the same version of the projects. Or connect a smaller version to a larger one, but not vice versa, as was the case in my case.

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-04-07T20:59:30.397

In Rider 2020.3 I just did a Build -> Clean, and then it worked.

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2013-05-30T15:59:29.707

对我来说，我认为当我更改本地 Git 存储库的哪个分支时，我的解决方案陷入了一种奇怪的状态。只需切换到问题开始之前我所在的上一个分支，告诉 VS 重新加载所有文件，然后切换回所需的分支并再次重新加载即可修复它。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2014-11-13T01:11:30.453

我们也看到了这个问题，特定于多个项目*共享的文件。*编辑器窗口的左上角有一个组合框，可让您切换文件的项目上下文（以及影响符号分辨率的引用）。

Resharper 通过其“转到文件或符号”命令可以很容易地意外打开共享文件的错误“版本”。

将上下文切换回我在解决方案中使用的项目是解决此问题所需要做的一切。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2015-10-14T14:16:42.883

我还在 ReSharper 中看到了类似的问题，这些问题并没有导致编译/运行时错误。

这些大多在使用`"{x:Type ...}"`或`"{x:Static ...}"`标记时看到，导致 ReSharper 报告`"Cannot resolve symbol 'Type'"`或`"Cannot resolve symbol 'Static'"`错误。

此外还有许多错误，例如`"Invalid markup extension type: expected type is '<type>', actual type is '...Extension'"`.

当我添加对`System.Xaml`程序集的引用时，问题自行解决了。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-01-12T10:38:32.850

没有对我有用的软缓存删除解决方案，看起来多年来安装的不同 RS 版本之间产生了问题。

对我有用的是：

*   卸载重新锐化器
*   删除 AppData\Local 和 AppData\Roaming 中的所有 JetBrains 文件夹
*   再次安装 reshaper

所有设置都需要重做等，但即使在 JetBrains 团队的帮助下，我也无法获得更好的解决方案。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2016-03-23T08:59:12.330

这应该是与 Resharper 缓存相关的问题，但据我所知，“清除缓存”功能仅在您的缓存位于解决方案文件夹中时才有效。要检查试试这个：Visual Studio > Tools > Options > Resharper > Options ...

在 Resharper 选项窗口 > 环境 > 常规检查“存储解决方案缓存在”它设置为“解决方案文件夹”

在解决方案文件夹中之后，您应该会看到一个新文件夹“_ReSharper.Caches”。您应该可以通过按“清除缓存”按钮来清理它，但是（如果这不起作用）您可以通过删除内部文件来手动清理（在这种情况下，Visual Studio 已经关闭）。

重新启动 Visual Studio，一切正常。也可以在这里查看 [1]

[1] [https://resharper-support.jetbrains.com/hc/en-us/articles/206546989-ReSharper-stopped-working-for-a-single-specific-solution](https://resharper-support.jetbrains.com/hc/en-us/articles/206546989-ReSharper-stopped-working-for-a-single-specific-solution)

注意：Visual Studio 2015 更新 1 / ReSharper 10.0.2

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-08-05T00:14:44.603

对我来说，检查解决方案给了我数百个错误，包括许多“在搜索路径中找不到文件”。我尝试了所有建议来解决它，但没有一个奏效。我最终发现检查项目而不是解决方案，效果很好。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2016-10-11T19:42:54.617

我只想报告我的解决方案，以防有人遇到与我类似的情况。我有带有更新 5 和 ReSharper 8.2.3 的 Visual Studio 2013。我的项目是 ASP.NET MVC 5。

通常，我擅长不断更新我的扩展包。就在最近，我发现我所有的视图都是红色的，并显示“无法解析视图 xxxx”。我尝试了清除缓存并暂停 ReSharper 并恢复 ReSharper 解决方案，但是一旦我构建项目，错误就会再次出现。

**我检查了我的 ReSharper 扩展，然后我卸载了 resharper.ExternalAnnotations 包 (8.2.3005) 并从画廊 (8.2.3000.5176) 重新安装了以前的版本。这似乎解决了我的问题。**

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-01-27T09:50:49.263

我多次尝试了上述所有解决方案，但没有一个对我有用。我正在使用带有 ReSharper 9.0 的 Visual Studio 2015。

我能够通过升级到 ReSharper 9.2 来解决这个问题。如果您已经拥有主要版本的最新更新，则重新安装 ReSharper 可能会为您解决此问题。我建议先清除 ReShaper 缓存，以防万一。

这是 ReSharper 存档版本的链接： [https ://resharper-support.jetbrains.com/hc/en-us/articles/207242355-Where-can-I-download-an-old-previous-ReSharper-version-](https://resharper-support.jetbrains.com/hc/en-us/articles/207242355-Where-can-I-download-an-old-previous-ReSharper-version-)

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2018-08-30T10:02:35.340

我有一个类似的问题。就我而言，我的项目路径的长度对于 windows 来说太长了（超过 248 个字符）。

我的解决方案在 VS 2017 中编译正常，但 ReSharper 找不到参考。有趣的是，即使构建成功，我在错误窗口中也出现了错误：

`Severity Code Description Project File Line Suppression State Error MSB3491 Could not write lines to file "obj\Debug\netcoreapp2.1\My.Long.Path.Project.Name.csproj.CoreCompileInputs.cache". The specified path, file name, or both are too long. The fully qualified file name must be less than 260 characters, and the directory name must be less than 248 characters. My.Long.Path.Project.Name C:\Program Files (x86)\Microsoft Visual Studio\Preview\Enterprise\MSBuild\15.0\Bin\Microsoft.Common.CurrentVersion.targets 3430`

所以我缩短了项目路径，ReSharper 工作正常。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2018-09-17T10:31:17.117

我有同样的问题，项目编译得很好（即使在清理和构建之后），但智能感知抱怨缺少引用。

我尝试了从删除缓存和禁用 resharper 的所有方法，但没有任何效果。最后，我意识到只有一个项目引用显示了智能感知错误。

我的解决方案是简单地删除对该项目的引用并再次添加它之后一切都按预期工作。

* * *

## 回答 #39

> 赞同：-8
> 
> 时间：2014-11-13T06:00:28.770

我测试了此页面中的**所有**其他答案*（在编写此答案之前）*，例如：

> 1.  VS -> 工具 -> 选项 -> ReSharper**暂停**按钮和**恢复**
>     
>     
> 2.  **清除 ReSharper 缓存**
>     
>     
> 3.  和别的

但不幸的是，他们都没有解决我的问题。也许我的问题比你的问题复杂。我在问题的编辑中谈到了它们*，*然后以下答案**对我来说**是正确的解决方案，但**也许其他答案可以解决您的问题。请先测试它们。**

**我被迫**重新安装操作系统并使用更新版本的工具。:(

现在我使用 VS 2013 + R# v8，当我的 resharper 有任何问题时，我只需尝试以下说明即可**解决我的问题**：

> VS -> 工具 -> 选项 -> ReSharper 暂停按钮和恢复

# java - Eclipse 相当于 mvn tomcat6:run？

> ID：15713168
> 
> 赞同：0
> 
> 时间：2013-03-29T23:45:49.360
> 
> 标签：java, eclipse, maven, tomcat, maven-archetype

我已经通过 Eclipse 方式创建了 tomcat 项目。我在原型选择阶段选择了tomcat原型。它为一个项目创建了 6 个目录，包括“-api”、“-api-impl”等。

现在我该如何运行？

在命令行我可以发出

```
mvn tomcat6:run 
```

或者

```
mvn tomcat7:run 
```

它会运行。

如何在eclipse中做同样的事情？

**更新**

可能这个命令相当于 ->Debug As... 并在“goals”中输入“tomcat6:run”。但在这种情况下，我会收到类似的错误

```
Downloading: http://repo.maven.apache.org/maven2/org/apache/tomcat/maven/tomcat6-maven-plugin/2.1/tomcat6-maven-plugin-2.1.pom
[WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat.maven:tomcat6-maven-plugin:2.1: Plugin org.apache.tomcat.maven:tomcat6-maven-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.tomcat.maven:tomcat6-maven-plugin:jar:2.1 
```

**更新 2**

如果我设置调试输出，我会得到“连接被拒绝”异常：

```
[DEBUG] Resolving plugin prefix tomcat6 from [org.apache.maven.plugins, org.codehaus.mojo]
[DEBUG] Using connector WagonRepositoryConnector with priority 0 for http://repo.maven.apache.org/maven2
Downloading: http://repo.maven.apache.org/maven2/org/apache/tomcat/maven/tomcat6-maven-plugin/2.1/tomcat6-maven-plugin-2.1.pom
[DEBUG] Writing resolution tracking file D:\Users\Dims\Design\!Lib\!m2\repository\org\apache\tomcat\maven\tomcat6-maven-plugin\2.1\tomcat6-maven-plugin-2.1.pom.lastUpdated
[WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat.maven:tomcat6-maven-plugin:2.1: Plugin org.apache.tomcat.maven:tomcat6-maven-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.tomcat.maven:tomcat6-maven-plugin:jar:2.1
org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.tomcat.maven:tomcat6-maven-plugin:2.1 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.tomcat.maven:tomcat6-maven-plugin:jar:2.1
    at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:129)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getPluginDescriptor(DefaultMavenPluginManager.java:142)
    at org.apache.maven.plugin.DefaultBuildPluginManager.loadPlugin(DefaultBuildPluginManager.java:59)
    at org.apache.maven.plugin.prefix.internal.DefaultPluginPrefixResolver.resolveFromProject(DefaultPluginPrefixResolver.java:139)
    at org.apache.maven.plugin.prefix.internal.DefaultPluginPrefixResolver.resolveFromProject(DefaultPluginPrefixResolver.java:122)
    at org.apache.maven.plugin.prefix.internal.DefaultPluginPrefixResolver.resolve(DefaultPluginPrefixResolver.java:86)
    at org.apache.maven.lifecycle.internal.MojoDescriptorCreator.findPluginForPrefix(MojoDescriptorCreator.java:262)
    at org.apache.maven.lifecycle.internal.MojoDescriptorCreator.getMojoDescriptor(MojoDescriptorCreator.java:222)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleTaskSegmentCalculator.calculateTaskSegments(DefaultLifecycleTaskSegmentCalculator.java:106)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleTaskSegmentCalculator.calculateTaskSegments(DefaultLifecycleTaskSegmentCalculator.java:86)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:98)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.sonatype.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.tomcat.maven:tomcat6-maven-plugin:jar:2.1
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:296)
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.readArtifactDescriptor(DefaultRepositorySystem.java:279)
    at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:115)
    ... 23 more
Caused by: org.sonatype.aether.resolution.ArtifactResolutionException: Could not transfer artifact org.apache.tomcat.maven:tomcat6-maven-plugin:pom:2.1 from/to central (http://repo.maven.apache.org/maven2): Connection to http://repo.maven.apache.org refused
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216)
    at org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193)
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:281)
    ... 26 more
Caused by: org.sonatype.aether.transfer.ArtifactTransferException: Could not transfer artifact org.apache.tomcat.maven:tomcat6-maven-plugin:pom:2.1 from/to central (http://repo.maven.apache.org/maven2): Connection to http://repo.maven.apache.org refused
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669)
    at org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.maven.wagon.TransferFailedException: Connection to http://repo.maven.apache.org refused
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:799)
    at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
    at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
    at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
    at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:601)
    ... 4 more
Caused by: org.apache.maven.wagon.providers.http.httpclient.conn.HttpHostConnectException: Connection to http://repo.maven.apache.org refused
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:158)
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.maven.wagon.providers.http.httpclient.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.execute(AbstractHttpClientWagon.java:674)
    at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:793)
    ... 8 more
Caused by: java.net.ConnectException: connect: Address is invalid on local machine, or port is not valid on remote machine
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at org.apache.maven.wagon.providers.http.httpclient.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
    at org.apache.maven.wagon.providers.http.httpclient.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
    ... 16 more 
```

**解决方案**

防病毒防火墙阻止 eclipse 访问网络。因此，从 Eclipse 中运行目标失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:54:21.837

本[教程](http://www.coreservlets.com/Apache-Tomcat-Tutorial/eclipse.html)将帮助您使用 Eclipse 设置 Tomcat。但是上面的命令是 Maven。Eclipse有 Maven[插件](http://www.sonatype.com/people/2011/06/where-is-m2eclipse/)，但有很多抱怨。因此，如果您认为 Eclipse 上的 Tomcat 使用第一个链接，如果 Maven 是优先获取插件

# authentication - 在 C# 或 Java 中将 cookie 字符串转换为 Cookie 对象

> ID：15713189
> 
> 赞同：0
> 
> 时间：2013-03-29T23:48:33.600
> 
> 标签：authentication, cookies

我需要自动访问需要身份验证的网站。我找到了这个网站的 http 主机的 cookie 字符串（使用 fiddler）。有没有办法将此字符串转换为 cookie 对象并将其传递给 Webclient 以通过身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T21:33:35.867

将 Sting 转换为 cookie 对象。为此，您需要解析字符串以获取名称、值、路径、域等。

你必须做这样的事情 -

```
String[] cArray = cookieValueIs.split(";");
        for (String s : cArray) {
                s = s.trim();
                int i1 = s.indexOf('=');
                if (i1 != -1) {
                        String k = s.substring(0, i1).trim();
                        String v = s.substring(i1 + 1).trim();
                        if (k.equalsIgnoreCase(VERSION)) {
                                version = v;
                        } else if (k.equalsIgnoreCase(COMMENT)) {
                                comment = v;
                        } else if (k.equalsIgnoreCase(DOMAIN)) {
                                domain = v;
                        } else if (k.equalsIgnoreCase(PATH)) {
                                path = v;
                        } else if (k.equalsIgnoreCase(MAX_AGE)) {
                                maxAge = v;
                        } else if(k.equalsIgnoreCase(EXPIRES)){
                                continue;
                        }
                        else {
                                key = k;
                                value = v;
                        }
                } else {
                        if (s.equalsIgnoreCase(SECURE)) {
                                secure = true;
                        } else if (s.equalsIgnoreCase(HTTPONLY)) {
                                httpOnly = true;
                        }
                } 
```

完成此操作后，创建一个 cookie 对象-

```
 Cookie cookie = new Cookie(key,value);
if(comment != null){
                    cookie.setComment(comment);
            }
            if(domain != null){
                    cookie.setDomain(domain);
            }
            if(path != null){
                    cookie.setPath(path);
            }
            if(version != null){
                    cookie.setVersion(Integer.parseInt(version));
            }

            if(secure){
                    cookie.setSecure(true); 
```

现在你的字符串被转换为 Cookie 对象 --> cookie

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T08:10:09.417

这在 c# 中对我有用。

```
 public static Cookie ToCookie(this string @this)
    {
        String[] array = @this.Split(';');
        var cookie = new Cookie();
        foreach (var ss in array)
        {
            string key;
            object value;
            var s = ss.Trim();
            int indexOf = s.IndexOf('=');

            if (indexOf != -1) {
                key = s.Substring(0, indexOf).Trim();
                value = s.Substring(indexOf + 1).Trim();
            } else
            {
                key = s.ToTitleCase();
                value = true;
            }

            var prop = cookie.GetType().GetProperty(key.ToTitleCase());
            if (prop != null)
            {
                var converted = Convert.ChangeType(value, prop.PropertyType);
                prop.SetValue(cookie, converted, null);
            }else
            {
                cookie.Name = key;
                cookie.Value = value.ToString();
            }
        }
        return cookie;
    } 
```

# sql - SQL Server CE's DDL parser is very picky but secretive about what it is finding fault with

> ID：15713194
> 
> 赞同：0
> 
> 时间：2013-03-29T23:48:54.717
> 
> 标签：sql, compact-framework, sql-server-ce, windows-ce, ddl

I keep getting "there was an error parsing the query" no matter what I try with my DDL.

So I need an expert in the SQL-Server-CE flavor of SQL to tell me which of the following is the preferred method (or something else, quite likely). Note that I'm not worried about "SQL injection" with these string format elements:

1)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19)", tablename);
ddl = string.Format("UPDATE {0} SET redemptionID = ''", tablename); 
```

2)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL", tablename);
ddl = string.Format("UPDATE {0} SET redemptionID = ''", tablename);
//explicitly supplying the empty string 
```

3)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL", tablename);
//assuming the empty string is supplied automatically 
```

4)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL WITH DEFAULT", tablename);
//assuming it automatically provides an empty string val 
```

5)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL WITH DEFAULT ''", tablename);
//specifying the default val explicitly - an empty string 
```

6)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL WITH DEFAULT {1}", tablename, string.empty);
//specifying the default val explicitly - an empty string via a string format element 
```

7)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL DEFAULT ''", tablename);
//omitting the "WITH" keyword and specifying the default val explicitly - an empty string 
```

8)

```
string ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL DEFAULT {1}", tablename, string.empty);
//omitting the "WITH" keyword and specifying the default val explicitly - an empty string via a string format element 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:45:32.367

```
ALTER TABLE [{0}] ADD [salvationID] nvarchar(19) NOT NULL DEFAULT '' 
```

[http://msdn.microsoft.com/en-us/library/ms174123.aspx](http://msdn.microsoft.com/en-us/library/ms174123.aspx)

# javascript - 刷新后如何删除 id (#) 目标

> ID：15713195
> 
> 赞同：0
> 
> 时间：2013-03-29T23:48:57.767
> 
> 标签：javascript, html

我有一个用户流程，用户将在 index.html 上填写表格，然后单击下一步转到 index.html/#step2

但是，如果用户点击刷新按钮，我希望用户返回 index.html，而不是停留在 index.html/#step2 上。

有什么办法可以强制他们返回 index.html？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T23:52:19.313

您可以通过在每次页面加载时将位置哈希设置为空字符串来做到这一点。

```
<script type="text/javascript">
    window.onload = function() {
        document.location.hash = "";
    }
</script> 
```

# java - 参数构造函数失败时如何确保不调用默认构造函数？

> ID：15713197
> 
> 赞同：-1
> 
> 时间：2013-03-29T23:49:07.853
> 
> 标签：java, exception, constructor

这是代码。我必须使用 Date 类并对其进行扩展以创建 ExtendedDate。无论如何，我不应该更改 Date 类。我非常感谢您能提供的任何帮助。我对如何解决这个问题一无所知

```
public static void main(String[] args) {
    /* Trying to create a date with month = 3, date = 40, year = 2010\. Objective to is throw an error/exception - "Date can't be created" */   
    ExtendedDate Dt1 = new ExtendedDate(03,40,2010);
    System.out.println(Dt1.getDay()); 
    //I don't want this statement to be executed because 40 is not valid. But it's printing "1" which is the default value for the default constructor
}

class ExtendedDate extends Date {
    // Default constructor
    // Data members are set according to super's defaults
    ExtendedDate() {
        super();
    }

    // Constructor that accepts parameters
    public ExtendedDate(int month, int day, int year)  {
        setDate(month, day, year);
    }

    @Override
    public void setDate(int monthInt, int dayInt, int yearInt) {
        if (isValidDate(monthInt, dayInt, yearInt)) 
        //isValidDate code is working perfectly fine.
        {
            super.setDate(monthInt, dayInt, yearInt);
        }
        else {
            System.out.println("Wrong Date");
        } 
    } 
```

这是日期类

```
public class Date {

    private int month; // instance variable for value of the date’s month

    private int day; // instance variable for value of the date’s day

    private int year; // instance variable for the value of the dates

    // Default constructor: set the instance variables to default values: month = 1; day = 1; year = 1900;
    public Date() {
        month = 1;
        day = 1;
        year = 1900;
    }

    // Constructor to set the date
    // The instance variables month, day, and year are set according to received parameters.

    public Date(int month, int day, int year) {
        this.month = month;
        this.day = day;
        this.year = year;
    }

    public void setDate(int month, int day, int year)
    {
        this.month = month;
        this.day = day;
        this.year = year;
    }

    public int getMonth()
    {
        return month;
    }

    public int getDay() {
        return day;
    }

    public int getYear() {
        return year;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:00:30.650

当某些参数无效时，您应该抛出 IllegalArgumentException：

```
@Override
public void setDate(int month, int day, int year) {
    if (isValidDate(month, day, year)) {
        super.setDate(month, day, year);
    }
    else {
        throw new IllegalArgumentException("Invalid date");
    } 
} 
```

[在Java 教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)中阅读有关异常的更多信息。

请注意，从构造函数调用可覆盖的方法是一种不好的做法。您应该`isValidDate()`直接从构造函数调用（假设此方法是私有的或最终的）。

# mysql - Plesk 没有创建新的数据库服务器

> ID：15713201
> 
> 赞同：1
> 
> 时间：2013-03-29T23:49:35.503
> 
> 标签：mysql, database, plesk

我有一个 Windows 服务器，其中 Plesk 默认安装了 php 和 mySQL（来自 Hosting Provider）。当我第一次拿到服务器时，我记得我从控制面板中删除了 mySQL，因为我不需要它，但大约一年后，我到了必须创建一个 Wordpress 网站的地步，因此我再次需要 mySQL。

另请注意，有两个 mySQL，一个用于 Plesk（我没有卸载），另一个用于我们的数据库（我很久以前卸载了，但后来重新安装了）。

我去了数据库服务器下的 Plesk，我可以看到那里没有数据库服务器......然后我尝试 使用以下设置**添加数据库服务器：主机名：localhost 端口：3306 使用管理员用户名和密码......**

但我收到以下错误：

**错误：具有此主机地址和端口号组合的数据库服务器已注册。**

请注意，这肯定不同于 Plesk 的 mySQL 设置，因为端口不同。

你们知道如何解决这个问题吗？我已经卡了几天了...

感谢您的帮助，这很紧急！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:15:26.973

看起来与数据库服务器实体相关的 plesk 数据库“psa”不一致。

最简单的解决方法是将新的数据库服务器注册为“localhost”，而不是“127.0.0.1”或其他可以解析为 localhost 或其他端口的名称。

另一种解决方法是通过 "%plesk_bin%\dbclient.exe" --direct-sql --sql="select * from databaseservers" 查看 psa 数据库。

# php - 将 shtml 解析为 SSI，但也包括使用 .htaccess 的 PHP

> ID：15713204
> 
> 赞同：0
> 
> 时间：2013-03-29T23:50:17.237
> 
> 标签：php, ssi, shtml

我继承的代码有一个特殊情况，它使用 shtml 服务器端包含，但是我正在尝试向站点添加一些非常简单的登录功能，因此我需要在 PHP 中包含会话检查。

但是，我可以对服务器进行的唯一配置是 .htaccess 文件。

我可以让服务器使用 htaccess 将 shtml 解析为 PHP，或者使用 SSI，但是我无法让它同时解析它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:13:13.900

这个 .htaccess 配置有效，允许服务器使用多个处理程序来解析文件。正如预期的那样。

```
AddHandler application/x-httpd-php .shtml
AddType text/html .shtml
AddOutputFilter INCLUDES .shtml 
```

# ios - iOS 自定义文档编辑器可以将文件返回到打开的应用程序吗？

> ID：15713207
> 
> 赞同：2
> 
> 时间：2013-03-29T23:50:28.640
> 
> 标签：ios, objective-c, uidocumentinteraction

我了解如何创建一个文档类型的查看器或编辑器的 iOS 应用程序。关于如何做到这一点有几个很好的问题：

*   [如何将文件类型与 iPhone 应用程序相关联？](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application?lq=1)
*   [如何在 iOS 中注册自定义文件类型](https://stackoverflow.com/questions/4186401/how-do-i-register-a-custom-filetype-in-ios?lq=1)

我的问题是：一旦“编辑器”应用程序收到文件并对其进行修改，文件如何返回到请求打开文件的原始应用程序？

重申：如果应用程序'A'有一个由应用程序'Editor'编辑的文件，那么'A'可以使用UIDocumentInteractionController在'Editor'中打开文件。如果我理解正确，这会导致文件被复制到应用程序“编辑器”沙箱中的“文档”目录中。然后应用程序“编辑器”可以对该文件进行修改。一旦“编辑器”完成对文件的更改，应用程序“A”如何看到这些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T19:39:01.027

您可以将您的应用程序注册为任何已知文件类型的文档处理程序。然后，一旦完成更改，用户将在“编辑器”应用程序中“在（您的应用程序）中打开”。

这并不理想，但它是迄今为止我想出的最好的。我希望有更好的方法。

# ffmpeg - 如何将 MediaRecorder 输出放入 avformat_open_input？

> ID：15713210
> 
> 赞同：1
> 
> 时间：2013-03-29T23:50:39.863
> 
> 标签：ffmpeg, video-streaming, android-mediarecorder

我想使用 ffmpeg 处理来自 Android MediaRecorder 的视频流。

众所周知，相机的输出在本地套接字而不是文件中！

```
mediaRecorder.setOutputFile(mSender.getFileDescriptor()); 
```

其中 mSender 是本地套接字。

相关代码可以看[spydroid-ipcamera](http://code.google.com/p/spydroid-ipcamera/)。

现在我想用 ffmpeg 来处理它。如何将 MediaRecorder 输出放入 avformat_open_input？

```
avformat_open_input(&fmt_ctx, ????, NULL, NULL) 
```

应该放什么？？？

# c# - WPF .GetElementById()

> ID：15713211
> 
> 赞同：4
> 
> 时间：2013-03-29T23:50:52.810
> 
> 标签：c#, wpf, button, click

我在 VS2012 中的 WPF (C#) 中编程

我试着用这个：

[如何单击 webbrowser 控件中的按钮？](https://stackoverflow.com/questions/11271737/how-do-you-click-a-button-in-a-webbrowser-control-in-c)

单击网络浏览器上的按钮，但

1.  `.GetElementById`给我一个错误。

    我补充说：`using System.Windows.Forms;`并组装它们，但它对我没有任何改变。

2.  我想我也会有这个问题：`.InvokeMember("click");`

我在网上找到的只是：

[http://www.telerik.com/help/wpf/m_telerik_windows_documents_formatproviders_html_parsing_dom_idocument_getelementbyid.html](http://www.telerik.com/help/wpf/m_telerik_windows_documents_formatproviders_html_parsing_dom_idocument_getelementbyid.html)

但我不知道如何将它组装到 VS2012，因为 VS2012 中没有内置 API 引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:03:32.330

您可以在 WPF 应用程序的 WindowsFormHosted 控件中使用 Windows 窗体 WebBrowser 而不是 WPF WebBrowser 主机，然后您可以访问这些成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T12:52:46.007

```
// reference :
/// https://gist.github.com/sphingu/5781036
----------------------------------------------------
// Using WebBrowser for Crowling in WPF
----------------------------------------------------
<WebBrowser Cursor="Arrow" Name="MyBrowser" LoadCompleted="MyBrowser_OnLoadCompleted" />
----------------------------------------------------
// useful methods of WebBrowser
----------------------------------------------------
MyBrowser.Navigate(new Uri("http://google.com"));

private void MyBrowser_OnLoadCompleted(object sender,NavigationEventArgs e)
{
        ...
        // return source of loaded page in WebBrowser
        var document=(IHTMLDocument3) MyBrowser.Document;

        //Get Element and set its value
        document.getElementById("userName").setAttribute("value","myusername");

        //get Button on page and fire its click event
        document.getElementById("btnSubmit").click();

        // Invoke javascript function on page loaded on WebBrowser
        MyBrowser.InvokeScript("submitform",param1,param2,...);

        //get data from table in page
         _innerHtmldata =
                ((IHTMLDocument3) MyBrowser.Document).getElementById("datatable")
                                                     .innerHTML;

} 
```

# python - pip install：命令clang失败

> ID：15713212
> 
> 赞同：0
> 
> 时间：2013-03-29T23:51:38.413
> 
> 标签：python, clang, virtualenv, pip, xcode4.6

我正在使用 Heroku 并使用 pip 安装所有 requirements.txt

我在跑步`pip install -r requirements.txt`。它安装了一堆软件包，但后来我得到了

```
 Running setup.py install for gevent
    building 'gevent.core' extension
    clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c gevent/core.c -o build/temp.macosx-10.8-intel-2.7/gevent/core.o
    clang: warning: argument unused during compilation: '-mno-fused-madd'
    In file included from gevent/core.c:253:
    gevent/libevent.h:9:10: fatal error: 'event.h' file not found
    #include "event.h"
             ^
    1 error generated.
    error: command 'clang' failed with exit status 1
    Complete output from command /Users/alexoliveira/Coding/SimplePrints- backend/venv/bin/python -c "import setuptools;__file__='/Users/alexoliveira/Coding/SimplePrints-backend/venv/build/gevent/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/43/yw1jdkb91nqgpnn5lz0ps0wm0000gn/T/pip-dWiY43-record/install-record.txt --single-version-externally-managed --install-headers /Users/alexoliveira/Coding/SimplePrints-backend/venv/include/site/python2.7:
    running install

running build

running build_py

running build_ext

building 'gevent.core' extension

clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c gevent/core.c -o build/temp.macosx-10.8-intel-2.7/gevent/core.o

clang: warning: argument unused during compilation: '-mno-fused-madd'

In file included from gevent/core.c:253:

gevent/libevent.h:9:10: fatal error: 'event.h' file not found

#include "event.h"

         ^

1 error generated.

error: command 'clang' failed with exit status 1 
```

我已经安装了 Xcode 命令行工具，但这似乎没有帮助。我正在使用 Xcode 4.6.1。和 Python 2.7.2。任何帮助将非常感激。

# php - 试图在 OOP php 中获取非对象的属性

> ID：15713214
> 
> 赞同：0
> 
> 时间：2013-03-29T23:52:12.250
> 
> 标签：php

我只想支持我的类属性，以便我可以使用它们。在我的项目中，我想获取 mysql 表数据的所有结果并返回它。好吧，它运作良好，但更改返回数据时出现错误消息，如下所示：

```
 Trying to get property of non-object in E:\xampp\htdocs\myProject\new_27_03\login_con.php on line 26 
```

我的代码::

非类.php

```
 <?php
      $doc = new Dortor();  // object  

      $doc->result("SELECT * FROM doctor");   // function call

      foreach( $doc as $doctor ) {
         echo $doctor->doc_name;     // error msg: Trying to get property of non-object in
                                   //E:\xampp\htdocs\myProject\new_27_03\login_con.php on line 26
      }
  ?> 
```

dortor.php

```
 <?php
     class Dortor extends DatabaseObject {
       public $table_name = "doctor";
       public $id;
       public $doc_name;
       public $doc_pass;
       public $doc_img;     // image directory

       public function result($sql="") { 
         $result = $database->query($sql);  // run query from mysql database

         $result_array = array();   
         while( $row = $database->fetch_array($result)  ) {  // this while loop return actual result
             $result_array[] = $this->get_table_value($row);
         }
         return $result_array;
        }
     }
  ?> 
```

数据库对象.php

```
 <?php
       class DatabaseObject {
           public function get_table_value($record) {
              $className = get_called_class();  // get the class name
              $object = new $className;       // object call

              $arrayValue = array();  
              $i=0;   // inital array position
              foreach( $object as $key => $value )  {
                  $arrayValue[$i] = $key;  // get the class's object attributes
                  $i++;
              } 

              $i = 1;
             foreach ($record as $key => $value) {   // fetch the database result
                 if(array_key_exists($key, $arrayValue) ) {  // check if database's column name is exist on 'arrayValue' array,
                    $object->$arrayValue[$i] = $value;  //  if exist then, store value in 'Doctor' class's object attributes
                    $i++;
                 }
              } 
             return $object;
          }
       }
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:53:59.447

您的错误可能在这里：

```
$doc = new Dortor();  // object  
$docs = $doc->result("SELECT * FROM doctor");   // you forgot to assign the result
foreach ($docs as $doctor) { // was looping over $doc here, instead of the result
   echo $doctor->doc_name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:57:57.163

It would also make sense to check the correct variable type before the foreach loop starts:

```
if ( is_array( $doc)  )
{
 foreach( $doc as $doctor ) 
  {
    // foreach code
  }
}
else
{
  echo '$doc is no valid object';
  var_dump($doc);
} 
```

So you can find out, that's the problem.

# javascript - javascript jquery验证逻辑

> ID：15713215
> 
> 赞同：0
> 
> 时间：2013-03-29T23:52:15.307
> 
> 标签：javascript, jquery, validation

我今天有一个逻辑问题。我有一个基于 .load 的表单，它工作得很好。我有点坚持的是根据加载的表单区域的位置加载标题。我的“下一步”按钮工作正常，因为我对我加载的每个区域都有验证。例如

```
$('#next').click(function()
{
    if(question_pos==0)
    {
        question_pos+=1;
        $("#title_area").load("bl_forms.jsp #area_title1");
        showContent(question_pos,"right");
        return true;
    }
}); 
```

现在我需要的是后退按钮来根据位置加载正确的标题。这是我的后退按钮，

```
$('#back').click(function()
{
    if(question_pos>=2 && question_pos<=25)
    {
        question_pos-=1;
        showContent(question_pos,"left");
        return true;
    }
}); 
```

我需要从区域 pos 1-2 加载标题 1，从区域 pos 3-7 加载标题 2，从区域 pos 4-6 加载标题 4，依此类推。我需要的只是一个如何添加标题加载到后台功能的示例。万一出现混淆，

```
if(question_pos>=2 && question_pos<=25)
{ 
```

是否只是为了防止后退按钮在 pos 2 之前和 pos 25 之后更改 pos。

```
/*New edit*/ 
```

添加回调呢？就像是

```
$('#back').click(function(){
        if(question_pos>=2 && question_pos<=2){
        question_pos-=1;
        showContent(question_pos,"left");
                   ('#back').callback(function(){
   if(question_pos<=1 && question_pos>=2){
   $("#title_area").load("bl_forms.jsp #area_title1");
 }else if (question_pos<=3 && question_pos>=7){
   $("#title_area").load("bl_forms.jsp #area_title2");
 }else if (question_pos<=8 && question_pos>=10){
   $("#title_area").load("bl_forms.jsp #area_title4");
 }else if (question_pos<=11 && question_pos>=12){
   $("#title_area").load("bl_forms.jsp #area_title4");
 }else if (question_pos==13 || question_pos<=16){
   $("#title_area").load("bl_forms.jsp #area_title4");
 }else if (question_pos==17 || question_pos<=19){
   $("#title_area").load("bl_forms.jsp #area_title4");
 }else if (question_pos==20 || question_pos<=21){
   $("#title_area").load("bl_forms.jsp #area_title4");
 }else if (question_pos==22 || question_pos<=25){
   $("#title_area").load("bl_forms.jsp #area_title4");
 }

            }
}); 
```

也许是允许一堆额外的 if 语句的东西，或者是允许一个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:42:03.867

```
 if(question_pos==1 || question_pos==2){
   $("#title_area").load("bl_forms.jsp #area_title1");
 }else if (question_pos==3 || question_pos==7){
   $("#title_area").load("bl_forms.jsp #area_title2");
 }else if (question_pos==4 || question_pos==6){
   $("#title_area").load("bl_forms.jsp #area_title4");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:58:01.633

你可以尝试这样的事情：

```
var areas = [
    { start: 1, end: 2, page: '#area_title1' },
    { start: 3, end: 7, page: '#area_title2' },
    { start: 4, end: 6, page: '#area_title4' }
    // and so on...
];

for ( var i = 0, l = areas.length; i < l; i++ ) {
    var area = areas[i];
    if ( question_post >= area.start || question_post <= area.end ) {
        $('#title_area').load( 'bl_forms.jsp ' + area.page );
        break;
    }
} 
```

这样，您只需更新您的页面数组，而循环永远不会改变。

# bash - Can I add permissions in Bash for a specific group/user without modifying existing owner/group?

> ID：15713216
> 
> 赞同：0
> 
> 时间：2013-03-29T23:52:17.607
> 
> 标签：bash, file, ubuntu, permissions

This may be an odd question but: Is there any way of adding read, write and execute permissions for specific users and/or groups, for a few files, without changing the listed owner/group permissions?

I'm running on Ubuntu 10.10, using bash to install a group of programs. These include Apache2, PHP5\. The agent doing the initial installation is root. The agent which ships the code onto the machine is non-root (let's call it "cap"). Root has access of course to /var, /etc and so on. Cap does not. However, Cap is the one which needs to startup and shutdown Apache, place the web application in /var/www, and so on.

Ops are wary of changing group permissions using chmod or chown. E.g. they do not want to see the example below:

```
-rw-r--r-- 1 root root 3784 2013-03-29 15:45 file 
```

Changing to:

```
-rw-r--r-- 1 cap non-root 3784 2013-03-29 15:45 file 
```

The only alternative I can see is ACL which seems to have finer grained control of who is allowed to rwx which files. But it seems to need you to remount the partition, which ops will disapprove of.

Can this be achieved?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:07:54.070

I think ACL is your only option. What type of mount is the volume on? I am pretty sure it is enabled by default if it is not NFS. What is the output of getfacl /path/to/file?

Also, if/when you do set an ACL, you may also want to create a soft link to the file/folder if it is contained within a hierarchy that the user or group will not have read/execute permissions on for normal directory traversal.

# jquery-ui - jqueryui datepicker 用 IE 禁用 Ctrl-a

> ID：15713219
> 
> 赞同：0
> 
> 时间：2013-03-29T23:52:26.513
> 
> 标签：jquery-ui, internet-explorer, internet-explorer-8, datepicker

有一个类似于“全选”的问题不适用于 twitter bootrap modal 和 IE，由 merv 回答。（非常感谢merv）

问题的小提琴：http: [//jsfiddle.net/lesouthern/5ked9/](http://jsfiddle.net/lesouthern/5ked9/) 在 datepicker 的简单调用中：

```
$('input').datepicker(); 
```

在使用日期选择器之前，Ctrl-A 有效。

使用 IE 禁用 Ctrl-A 和 Select all 后（使用 IE8 确认）。

我是否像模态一样关闭日期选择器的事件？尝试了许多组合但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:30:02.730

这可能不是一个解决方案，更像是一个 hack.. 但是，嘿，我正在使用 IE8..

这是我编写的解决问题的 angularjs 指令。

我的日期选择器在模态对话框中，在他们看来，日期选择器被初始化，当它们关闭时，日期选择器被销毁，它创建的 div 被删除。这是我能够在这种环境中恢复 ctrl-a 的唯一方法。

在 datepicker 初始化之前和销毁之后，Ctrl-A 在 IE8 中工作。这对我来说已经足够了。

```
<input class="span2 paused-until"
    datepicker-wrapper="{
        maxDate : getMaxDate()
    }"
    ng-change="error=false"
    ng-model="pausedUntil"
    name="Paused Until"
    size="16"
    type="text"
    ui-validate='{validFutureDate : validateDate}'
    ng-pattern="/^(\d{1,2})-(\d{1,2})-(\d{4})$/"
    required />

.directive('datepickerWrapper',function() {
    return {
        restrict : 'A',
        link : function($scope,$element,$attrs) {
            $scope.$watch('modal.model',function(m) {
                var _attrs = $scope.$eval($attrs.datepickerWrapper);
                var maxDate = (typeof _attrs === 'undefined' ||
                        typeof _attrs.maxDate === 'undefined') ? 
                        null : _attrs.maxDate;

                //if the dialog is open, create the datepicker
                if(m) {
                    $element.datepicker({
                        minDate    : '+1d',
                        dateFormat : 'mm-dd-yy',
                        showOn     : 'button',
                        buttonText : '<i class="icon-calendar"></i>',
                        maxDate    : maxDate,
                        onSelect   : function(dateText) {
                            //assign the selection of the
                            //text to the element's model
                            $scope[$attrs.ngModel] = dateText;
                            $scope.$apply();
                        }
                    });
                }
                //else completely remove this element and generated div
                else {
                    $element.datepicker('destroy');
                    $('#ui-datepicker-div').remove();
                }
            });
        }
    }
}) 
```

# quickblox - loginWithUser：iOS 中 QBChat 实例的用户失败

> ID：15713221
> 
> 赞同：1
> 
> 时间：2013-03-29T23:52:47.610
> 
> 标签：quickblox

当我托盘连接设备进行聊天时，成功登录后，响应是未经授权的。我在 SDK 附带的示例中进行编码。是：

```
-(void)completedWithResult:(Result *)result  context:(void *)contextInfo{

if([result isKindOfClass:[QBUUserLogInResult class]]){

    // Success result
    if(result.success){

        QBUUserLogInResult *res = (QBUUserLogInResult *)result;
        [self saveHostUser:res.user];
        [self loginResult:kLoggedOnline andErrorDescription:nil];

        // Login to Chat
        [QBChat instance].delegate = self;
        [[QBChat instance] loginWithUser:[[[UserService sharedInstance] hostUser] qbUser]];

        // Register as subscriber for Push Notifications
        [QBMessages TRegisterSubscriptionWithDelegate:nil];
    }
}

} 
```

检索到的错误是：

```
error:
2013-03-29 16:51:37.201 App[2031:720f] didFailToRegisterForRemoteNotificationsWithError
2013-03-29 16:51:37.201 App[2031:680b] QBChat/xmppStreamDidNotAuthenticate: <failure xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><not-authorized></not-authorized></failure>
2013-03-29 16:51:37.201 App[2031:730b] redelegateBackCurrentApplication
2013-03-29 16:51:37.302 App[2031:720f] QBChat/xmppStreamDidDisconnect, error=(null) 
```

因此，不会发送消息。有谁知道除了会话、登录、注册、获取用户之外我还需要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T14:12:07.537

你应该设置密码

```
res.user.password = @"yourpassword";
[self saveHostUser:res.user]; 
```

# r - “维数不正确”错误，帮我理解为什么

> ID：15713222
> 
> 赞同：14
> 
> 时间：2013-03-29T23:52:52.523
> 
> 标签：r, dimensions

**这个问题的组织：**

```
I.   Background
II.  The Problem/Question
III. Steps Taken to Make this Question Good
IV.  Update: the output of head(x.path) and dput(x.path) 
```

**一、背景**

我正在自定义/调整 O'Reilly 的书“黑客机器学习”（第 3 章）中的电子邮件分类代码。该代码及其随附数据可在此处找到：[https ://github.com/johnmyleswhite/ML_for_Hackers/tree/master/03-Classification](https://github.com/johnmyleswhite/ML_for_Hackers/tree/master/03-Classification)

**二、问题/问题**

该代码中的主要功能之一称为`get.msg()`. 原来的功能是

```
get.msg <- function(path)
{
  con <- file(path, open = "rt", encoding = "latin1")
  text <- readLines(con)
  # The message always begins after the first full line break
  msg <- text[seq(which(text == "")[1] + 1, length(text), 1)]
  close(con)
  return(paste(msg, collapse = "\n"))
} 
```

我的数据在很多方面都不同，所以我必须对其进行相当多的编辑。我的数据是之前从关系数据库中读取的，因此我不必读取和清理文本文件。相反，我的电子邮件正文数据是数据框的第 18 列，我们可以将其称为`x`. 这是我的版本`get.msg()`：

```
get.msg <- function(path) {
  bodyvector <- path[!(is.na(path[,18]) | path[,18]==""), ]
  return(paste(bodyvector))
} 
```

最初我将其称为`x$email`并且这在大部分代码中都有效，但是在后面的步骤中，该`get.msg()`函数被用于`x.path`，其中`x.path`指向`x`并在另一个函数中与该`paste()`函数结合使用，根据示例代码的作者：

```
 z.spam <- sapply(spam.docs, function(p) count.word(paste(x.path,p,sep = ""),         "keyword")) 
```

这里，`count.word()`函数是一个包含 的函数`get.msg()`。因此，该`paste()`函数引起了问题，因为它`x.path`显然被认为是原子数组，并给出了 $ 不能与原子数组一起使用的错误。根据较早的 StackOverflow Q&A，我更改了引用该列的方式`path[,18]`（评估为`x.path[,18]`，因此与 相同`x[,18]`）。

然后我做了一些检查以确保它`x.path[,18]`具有与它相同的信息`x.path$email`。但是，当我尝试运行代码时，我收到一条错误消息`get.msg(x.path)`，即：

```
Error in path[,18] : incorrect number of dimensions. 
```

我试过了`path[,'email']`，然后`path[18,]`就`path`自己尝试了，这三个都导致了同样的错误。我试过`path[[1]][[18]]`了，这给了我一个下标越界错误。

有什么想法吗？

**三、使这个问题变得好的所采取的步骤**

为了避免惹恼任何人并获得任何反对票，我确认该主题与 StackOverflow 相关，并且我认为它可能与将来处理此或类似编程问题的其他人相关。我还花了将近一个小时在线研究这个问题并尝试在 R 中解决它。

有很多关于此错误消息的引用，但原因似乎非常多样化且完全不相关（例如网络故障等）。最后，我花了很多时间编辑这个问题，试图让它可读且格式正确（我希望我做得很好，我知道这是很多信息）。

**四。的输出`head()`和`dput()`**

你们中的一些非常乐于助人的人要求查看`head(x.path)`or的输出`dput(x.path)`。我不介意，只是它是公司的机密电子邮件数据，如果我发布它，我会失业并被起诉。;-)

我把它贴在这里，用假信息替换了真实信息。我希望这没问题。我一开始尝试使用`dput()`，如果你愿意，我可以这样做，但它确实是一个压倒性的数据量。这是`head(x.path)`：

```
> head(x.path)
[1] "c(\"Z12e3317e4b1jZbbajZ9Zdd6\", \"Z12e3317e4b1jZbbajZ99124\", \"Z12e331Ze4b1jZbbajZ996dd\", \"Z12e3319e4b1jZbbajZ9acb6\", \"Z12e3319e4b1jZbbajZ9ad3b\", \"Z12e3319e4b1jZbbajZ9adjd\", \"Z12e3319e4b1jZbbajZ9aebZ\", \"Z12e3319e4b1jZbbajZ9aj23\", \"Z12e3319e4b1jZbbajZ9b22b\", \"Z12e3319e4b1jZbbajZ9b42a\", \"Z12e3319e4b1jZbbajZ9b49a\", \"Z12e331ae4b1jZbbajZ9bZ11\", \"Z12e331ae4b1jZbbajZ9bZZ4\", \"Z12e331ae4b1jZbbajZ9c237\", \"Z12e331ae4b1jZbbajZ9c2e4\", \"Z12e331ae4b1jZbbajZ9c3bZ\", \"Z12e331ae4b1jZbbajZ9c3cZ\", \"Z12e331ae4b1jZbbajZ9cZ31\", \n\"Z12e331be4b1jZbbajZ9cddd\", \"Z12e331be4b1jZbbajZ9cja6\", \"Z12e331ce4b1jZbbajZ9da1j\", \"Z12e331de4b1jZbbajZ9e649\", \"Z12e331de4b1jZbbajZ9j669\", \"Z12e331de4b1jZbbajZ9jZZZ\", \"Z12e331ee4b1jZbbajZ9j944\", \"Z12e331ee4b1jZbbajZ9jcZa\", \"Z12e331ee4b1jZbbajZ9jd4c\", \"Z12e331ee4b1jZbbajZa11e2\", \"Z12e331ee4b1jZbbajZa1291\", \"Z12e331ee4b1jZbbajZa1344\", \"Z12e3311e4b1jZbbajZa1j73\", \"Z12e3311e4b1jZbbajZa1131\", \"Z12e3311e4b1jZbbajZa11Z6\", \"Z12e3311e4b1jZbbajZa124c\", \"Z12e3311e4b1jZbbajZa1Zbc\", \"Z12e3311e4b1jZbbajZa19a9\", \n\"Z12e3311e4b1jZbbajZa1ac2\", \"Z12e3311e4b1jZbbajZa1b79\", \"Z12e3311e4b1jZbbajZa1db2\", \"Z12e3311e4b1jZbbajZa1ejb\", \"Z12e3312e4b1jZbbajZa2333\", \"Z12e3312e4b1jZbbajZa23aZ\", \"Z12e3312e4b1jZbbajZa24bb\", \"Z12e3312e4b1jZbbajZa2Z79\", \"Z12e3312e4b1jZbbajZa2Zea\", \"Z12e3312e4b1jZbbajZa2ba9\", \"Z12e3312e4b1jZbbajZa2cZa\", \"Z12e3313e4b1jZbbajZa3bc1\", \"Z12e3313e4b1jZbbajZa3ca9\", \"Z12e3313e4b1jZbbajZa3e71\", \"Z12e3ajbe4b1j66Zbcja4eZc\", \"Z12e3ajbe4b1j66Zbcja4ja4\", \"Z12e3c79e4b1j66ZbcjaZc36\", \"Z12e3e1ce4b1j66Zbcja64bd\", \n\"Z12e4117e4b1j66Zbcja6Zj1\", \"Z12e41bae4b1j66Zbcja734Z\", \"Z12e4226e4b1j66Zbcja7b13\", \"Z12e4226e4b1j66Zbcja7cbZ\", \"Z12e4ajee4b1j66Zbcjaa916\", \"Z12e4e61e4b1j66Zbcjab1c2\", \"Z12e4e61e4b1j66Zbcjab2da\", \"Z12eZ226e4b1j66ZbcjacZea\", \"Z12e6141e4b1j66Zbcjb19Z9\", \"Z12e6141e4b1j66Zbcjb19jd\", \"Z12e61Z9e4b1j66Zbcjb1acb\", \"Z12e61Z9e4b1j66Zbcjb1acj\", \"Z12j9713e4b1j66Zbcjc34db\", \"Z12j9713e4b1j66Zbcjc3ZZa\", \"Z12j9713e4b1j66Zbcjc3Za7\", \"Z12j9713e4b1j66Zbcjc3Zd2\", \"Z12j9713e4b1j66Zbcjc36c2\", \"Z12j973ce4b1j66Zbcjc396b\"\n)"
[2] "c(\"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \n\"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\", \"Something\")"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
[3] "c(61Z7, 674Z, Z462, 692, Z26, 1121, 1213, 1317, 21ZZ, 2Z9Z, 2711, 3612, 3717, 4774, 4Z93, Z117, Z113, Z197, Z77Z, 61Z3, Z16Z, 11771, 12923, 13374, 13Z93, 14277, 1446Z, 1Z3ZZ, 1ZZ16, 1Z993, 164Z2, 16664, 1711Z, 171Z6, 1Z6ZZ, 1Z921, 19211, 193ZZ, 19931, 21117, 21164, 21177, 21371, 21Z61, 21673, 22ZZ7, 23137, 2ZZ44, 26166, 26Z1Z, 173Z6, 17661, 21Z74, 23119, 232ZZ, 249Z3, 2ZZ31, 261Z9, 31211, 33414, 336Z6, 37941, 1743, 1Z61, 216Z, 2171, 1ZZ3, 2119, 21Z4, 2129, 2334, 2ZZZ)"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
[4] "c(\"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \n\"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\", \"Booty\")"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
[5] "c(Z6, 93Z, 1314, 3, 4, Z, 6, 7, 9, 11, 11, 13, 14, 2Z, 26, 27, 2Z, 29, 33, 34, ZZ, Z3, 122, 12Z, 133, 139, 142, 147, 1Z2, 1Z3, 16Z, 169, 171, 171, 219, 221, 221, 222, 22Z, 226, 244, 246, 247, 24Z, 249, 2637, 264, 2Z9, 292, 296, 49, Z1, 76, 93, 9Z, 112, 111, 114, 1Z7, 211, 214, 263, 6, 7, 11, 11, 11, 11, 12, 13, 14, 1Z)"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
[6] "c(3Z11, 3Z11, 3Z11, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, 691Z, Z664, Z664, Z664, Z664, Z664, Z664, Z664, Z664, Z664, Z664, Z664, Z664, 66Z1, 66Z1, 66Z1, 66Z1, 4ZZ4, 4ZZ4, 4ZZ4, 4ZZ4, 4ZZ4, 4ZZ4)" 
```

如果这是为了向您展示更多内容，那么您会看到 [18] 的消息正文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-16T06:52:14.797

您的示例对我来说运行起来有点复杂，但是我已经多次遇到此错误，并且问题始终最终归咎于提取函数（即 []）的默认行为，即强制为尽可能少的方面。正如 BondedDust 所观察到的，如果您从数据框中提取单个列，您将无法再选择具有相同语法的帧子集，因为您不再拥有数据框。

如果在任何可能将数据框缩减为单列的操作中，如果在提取操作中设置参数 drop=FALSE，则这些问题通常会消失。我建议您不仅要仔细查看生成错误的行，还要仔细查看在问题数据帧上使用“[]”操作的任何前面的行。查看extract函数的数据框方法的帮助，“extract.data.frame”相信问题可能是当您将数据框子集为单个列时，它被强制为单个维度并且不能再按列号或行号索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T01:55:54.773

这可能值得发表评论，但不合适，如果有必要，我准备删除。你说

“因此，粘贴函数引起了问题，因为它导致 x.path 显然被视为原子数组，并给出了 $ 不能与原子数组一起使用的错误。根据较旧的 StackOverflow Q&A，我改变了我的方式引用到 path[,18] 的列（计算为 x.path[,18]，因此与 x[,18] 相同）。

如果 x.path 是一个原子数组，那么您不能使用`x.path[ , 18]`，而是需要使用`x.path[18]`.

您可以使用 str(x.path) 检查 x.path 并且您的输出表明这确实是一个字符向量。在 R 中，只有具有二维的对象（矩阵和 data.frames）可以用 object[ , n] 引用来引用。

# node.js - Socket.io 事件未按接收顺序执行

> ID：15713226
> 
> 赞同：1
> 
> 时间：2013-03-29T23:54:14.747
> 
> 标签：node.js, express, socket.io

我按以下顺序发出事件：

```
Socket.emit('waiting','waiting for someone');
Socket.emit('found','found someone'); 
```

在客户端，我正在听这样的事件：

```
socket.on('waiting',function(data)
{
   alert(data);
});

socket.on('found',function(data)
{
   alert(data);
}); 
```

但是由于某种原因，我在“等待某人”之前看到了“找到某人”的警报。虽然当我查看控制台时，事件似乎以正确的顺序发出。任何人都知道为什么会这样？

# java - Record mouse click coords

> ID：15713231
> 
> 赞同：1
> 
> 时间：2013-03-29T23:54:46.353
> 
> 标签：java, php, javascript, mysql

I've searched around and couldn't find anything that really helped much on this.

I'm trying to make a script that records the coordinates of mouse click's that have the coordinate 0 in it so for example x=0 y=125 NOT X=100 y=125 And when it detects coords like that I want it to add them to my mysql database like this.

Username - the user who hit the coord

x - x coordinate

y - y coordinate

amount - how many times they hit that coord

Anyone think they could help me with this?

Updated with code.

```
<script>

$(document).ready(function(){

    $('.map').click(function(e){
        alert('x pos: ' +  e.pageX + ';  y pos: ' + e.pageY + ';'); 
        if(e.pageX == 0 || e.pageY ==0){
            <?php
    mysql_query("INSERT INTO clickmap (id) VALUES ('".$_SESSION['username']."')")
     or die(mysql_error());  
?>
        }
    }); 
}); 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:07:00.883

A jquery solution (assuming someones using a browser) would be to bind a click event to the thing you want to listen to, then use the event that triggered's pageX and pageY like so:

```
if(e.pageX == 0 || e.pageY == 0) {
//do stuff.  
} 
```

this is a working fiddle:

[http://jsfiddle.net/XdLJ9/](http://jsfiddle.net/XdLJ9/)

# html - 过滤 CKEditor HTML 属性

> ID：15713232
> 
> 赞同：3
> 
> 时间：2013-03-29T23:54:49.463
> 
> 标签：html, ckeditor, filtering

我发现了很多关于在 CKEditor 提交数据时过滤完整 HTML 标签的帖子（例如：剥离 SCRIPT、STYLE 等）。我需要过滤的是特定属性，但保留原始标签。

例如，如果用户提交具有 P、DIV 或 SPAN 标签的数据，我很好，但如果他们提交具有 STYLE 属性的 P、DIV 或 SPAN，我需要删除 STYLE 属性。

我似乎找不到这个，但对任何有洞察力的人开放。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T15:36:40.010

您的问题有两种解决方案：

1.  （推荐）[高级内容过滤器（ACF）](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)（自 4.1 起）：

    ```
    CKEDITOR.replace( 'editor1', {
        allowedContent: 'span div p[id,class]; h1 a img hr table tr td ul ol li[*]{*}(*)'
    } ); 
    ```

    使用 ACF，您可以**精确地**指定您的编辑器将接受（生成）哪些标签、哪些属性、类和样式。查看[更多关于规则的信息](http://docs.ckeditor.com/#!/guide/dev_allowed_content_rules)。还可以下载最新的 4.1 版本并使用官方的高级内容过滤器示例。

2.  第二个选项是`dataProcessor`（3.x，4.x）：

    ```
    editor.dataProcessor.htmlFilter.addRules( {
        elements: {
            $: function( element ) { // you can specify p, div etc. here instead of $ (wildcard)
                if ( element.attributes.style ) {
                     console.log( 'Nuke style attr on' element );
                     delete element.attributes.style;
                }
            }
        }
    }); 
    ```

# twitter - Amazon Web Service 微实例 - 服务器崩溃

> ID：15713233
> 
> 赞同：1
> 
> 时间：2013-03-29T23:54:56.823
> 
> 标签：twitter, amazon-web-services, crash

我目前正在使用 AWS 微实例作为允许用户上传照片的网站的 Web 服务器。两个问题：

1) 在查看我的 CloudWatch 指标时，我最近注意到 CPU 峰值，该网站目前接收的流量非常少，但在这些峰值期间变得完全无法使用。这些尖峰可能会持续几个小时，并且重置服务器并不能消除尖峰。

2）虽然看似无关，但每当我在 Twitter 上发布我网站的链接时，服务器就会崩溃（即，建立数据库连接时出错）。重新启动 Apache 和 MySQL 后，网站将恢复正常功能。

我唯一的猜测是这个问题在某种程度上是微实例缺陷的结果。不幸的是，当我升级到小型实例时，由于微型实例可以有两个 EC2 计算单元，该站点实际上变慢了。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:33:15.153

如果您想留在 AWS（微实例）的免费套餐中，您应该尽可能地从您的 EC2 实例上卸载。

I would suggest you to upload the images directly to S3 instead of going through your web server (see some example for it here: [http://aws.amazon.com/articles/1434](http://aws.amazon.com/articles/1434)).

S3 can also be used to serve most of your web pages (images, js, css...), instead of your weak web server. You can also add these files in S3 as origin to [Amazon CloudFront](http://aws.amazon.com/cloudfront/) (CDN) distribution to improve your application performance.

Another service that can help you in off loading the work is SQS (Simple Queue Service). Instead of working with online requests from users, you can send some requests (upload done, for example) as a message to SQS and have your reader process these messages on its own pace. This is good way to handel momentary load cause by several users working simultaneously with your service.

Another service is DynamoDB (managed NoSQL DB service). You can put on dynamoDB most of your current MySQL data and queries. Amazon DynamoDB also has a free tier that you can enjoy.

With the combination of the above, you can have your micro instance handling the few remaining dynamic pages until you need to scale your service with your growing success.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T05:48:51.893

等等……对不起。您是说您在微型实例上同时运行 Apache*和MySQL 服务器吗？*

首先，这绝不是一个好主意。其次，[如文件](http://ec2instances.info)所述，微控制器的 I/O 较低，只能突发到 2 个 ECU。

如果您想继续使用资源受限的微型实例，您需要 (a) 将 MySQL 放在其他地方，并且 (b) 使用 Nginx 之类的东西而不是 Apache，因为它需要更少的资源来运行。否则，您应该认真考虑调整更大的尺寸。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-30T00:02:32.757

我遇到了同样的问题：据我了解，问题是当您达到预定义的使用量时，AWS 会减慢您的速度。这意味着它们允许小爆发，但在那之后事情会变得非常缓慢。

您可以通过登录并做一些事情来测试它。如果你使用 CPU 几秒钟，那么整个盒子会变得非常慢。在那之后，您将不得不等待什么都不做，以使事情恢复“正常”。

这是我选择 VPS 而不是 AWS 的主要原因。

# php - 我正在尝试每秒更新部分 HTML 并将数据从数据库中提取到该 Div

> ID：15713237
> 
> 赞同：0
> 
> 时间：2013-03-29T23:55:30.183
> 
> 标签：php, javascript, jquery, ajax

我正在尝试每秒更新部分 HTML 并将数据从数据库中提取到该 Div 中，但代码不起作用。:(请帮忙。第一部分代码是调用更新函数的html页面，并在check_status.php上进行ajax调用，check_status.php从数据库中的php文件中获取数据

```
<html>
<head>
<title>Reloading testing</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="code.jquery.com/jquery-1.7.1.min.js"></script>
<script>
var statusIntervalId = window.setInterval(update, 1000);

function update() {
    $.ajax({
        url: 'check_status.php',
        dataType: 'text',
        success: function(data) {
            if (parseInt(data) == 0) {
                $("#status").css({ color: "red" }).text("offline");
            } else {
                $("#status").css({ color: "green" }).text("online");
            }
        }
    }
}

</script>
</head>

<body>
    <h1>Refresh part of the page</h1>
    <div id="status">
    </div>  
</body>
</html>

This is check_status.php

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

    <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    </head>
<body>
<?php 
    $con = mysql_connect("localhost", "root", "");
    mysql_select_db("manchesterunited", $con);
    $row = mysql_fetch_array(mysql_query("SELECT * FROM players LIMIT 1"));
    mysql_close($con);
    echo $row[0]; ?>
</body>
</html>
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:37:34.083

您有与括号相关的语法错误。尝试这个：

```
function update() {
    $.ajax({
        url: 'check_status.php',
        dataType: 'text',
        success: function(data) {
            if (parseInt(data) == 0) {
                $("#status").css({ color: "red" }).text("offline");
            } else {
                $("#status").css({ color: "green" }).text("online");
            }
        }
    });    // properly end the ajax() invocation
} 
```

您应该能够借助 javascript 控制台上报告的错误自行修复语法问题。

# objective-c - 是否可以在 Travis (travis-ci.org) 上测试 Objective-C 项目（没有 UI，没有模拟器）？

> ID：15713241
> 
> 赞同：1
> 
> 时间：2013-03-29T23:55:39.887
> 
> 标签：objective-c, travis-ci

我想知道是否可以在 Travis 上构建一个 Objective-C 项目（无需 UI，无需模拟器，托管在 Github 上）？

当前的[Travis 文档](http://about.travis-ci.org/)似乎不包含有关在 Travis 上构建 Objective-C 项目的选项的任何信息。

但是[构建一个 C 项目](http://about.travis-ci.org/docs/user/languages/c/)说：

```
Travis VMs are 32 bit and currently provide

gcc 4.6
clang 3.1
core GNU build toolchain (autotools, make), cmake, scons 
```

并且该默认测试脚本的运行方式如下

```
./configure && make && make test 
```

因此，重新表述主题问题：

是否存在任何解决方法来使我的项目当前使用的 SenTestingKit 测试套件表现得像 C 测试套件，因此 Travis VM 可以这样对待它？

注1：这是资源列表，似乎与问题有关：

[在没有 GUI 的情况下编译 Objective-C](http://codeseekah.com/2012/09/12/compiling-objective-c-without-a-gui/)。它声称这`Both gcc and clang compile Objective-C 2.0`听起来很有希望！

**注意 2：我怀疑可以使用 SenTestingKit 以外的一些测试工具：这个工具应该很容易在没有 GUI 和其他的情况下运行`xcodebuild`：我已经为此打开了相关问题：[Is there any non-Xcode-based Objective-C 的命令行测试工具？](https://stackoverflow.com/questions/15714356/is-there-any-non-xcode-based-command-line-testing-tool-for-objective-c?lq=1). 我什至在考虑写一个简单的，只是为了我的项目使用。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:57:23.857

几天后， [Travis 宣布](http://about.travis-ci.org/blog/introducing-mac-ios-rubymotion-testing/)他们现在也支持 objetive-c 项目。有关更多信息，请参阅[构建 Objective-C 项目](http://about.travis-ci.org/docs/user/languages/objective-c/)。

**更新**

甚至可以让 Travis 启动模拟器，以便您可以运行应用程序测试和 UI 相关的东西。我需要做一些额外的工作，但这很简单。[我在这里写过](http://kaspermunck.github.io/2013/04/running-kiwi-specs-with-travis-ci/)。

# c# - 比较两个数据表并选择第二个表中不存在的行

> ID：15713243
> 
> 赞同：16
> 
> 时间：2013-03-29T23:55:53.283
> 
> 标签：c#, winforms, system.data.datatable

我有两个数据表，我想从第一个中选择第二个中不存在的行

例如：

```
表 A
  标识列
  1 个数据1
  2 数据2
  3 数据3
  4 数据4

表 B
  标识列
  1 个数据10
  3 数据30

```

我希望结果是：

```
表 C
  标识列
  2 数据2
  4 数据4

```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-30T00:05:03.743

您可以使用 Linq，尤其`Enumerable.Except`有助于在 TableA 中查找不在 TableB 中的 id：

```
var idsNotInB = TableA.AsEnumerable().Select(r => r.Field<int>("id"))
        .Except(TableB.AsEnumerable().Select(r => r.Field<int>("id")));
DataTable TableC = (from row in TableA.AsEnumerable()
                   join id in idsNotInB 
                   on row.Field<int>("id") equals id
                   select row).CopyToDataTable(); 
```

您也可以使用`Where`，但效率会降低：

```
DataTable TableC = TableA.AsEnumerable()
    .Where(ra =>  !TableB.AsEnumerable()
                        .Any(rb => rb.Field<int>("id") == ra.Field<int>("id")))
    .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-09T05:52:07.020

我得到了一个没有 LINQ 的解决方案：

```
public DataTable CompareDataTables(DataTable first, DataTable second)
{
    first.TableName = "FirstTable";
    second.TableName = "SecondTable";

    //Create Empty Table
    DataTable table = new DataTable("Difference");

    try
    {
        //Must use a Dataset to make use of a DataRelation object
        using (DataSet ds = new DataSet())
        {
            //Add tables
            ds.Tables.AddRange(new DataTable[] { first.Copy(), second.Copy() });

            //Get Columns for DataRelation
            DataColumn[] firstcolumns = new DataColumn[ds.Tables[0].Columns.Count];

            for (int i = 0; i < firstcolumns.Length; i++)
            {
                firstcolumns[i] = ds.Tables[0].Columns[i];
            }

            DataColumn[] secondcolumns = new DataColumn[ds.Tables[1].Columns.Count];

            for (int i = 0; i < secondcolumns.Length; i++)
            {
                secondcolumns[i] = ds.Tables[1].Columns[i];
            }

            //Create DataRelation
            DataRelation r = new DataRelation(string.Empty, firstcolumns, secondcolumns, false);

            ds.Relations.Add(r);

            //Create columns for return table
            for (int i = 0; i < first.Columns.Count; i++)
            {
                table.Columns.Add(first.Columns[i].ColumnName, first.Columns[i].DataType);
            }

            //If First Row not in Second, Add to return table.
            table.BeginLoadData();

            foreach (DataRow parentrow in ds.Tables[0].Rows)
            {
                DataRow[] childrows = parentrow.GetChildRows(r);
                if (childrows == null || childrows.Length == 0)
                    table.LoadDataRow(parentrow.ItemArray, true);
            }

            table.EndLoadData();

        }
    }
} 
```

更多信息请访问[http://microsoftdotnetsolutions.blogspot.in/2012/12/compare-two-datatables.html](http://microsoftdotnetsolutions.blogspot.in/2012/12/compare-two-datatables.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T10:14:26.560

You can use Linq **Enumerable.Except** Method function to get diffence between two DataTable's Here i use firstDt and secondDt,remember both Dt's have the same structure.

```
 var EntriesNotInB = firstDt.AsEnumerable().Select(r => r.Field<string>("abc")).Except(secondDt.AsEnumerable().Select(r => r.Field<string>("abc")));

        if (EntriesNotInB.Count() > 0)
        {
            DataTable dt = (from row in firstDt.AsEnumerable()join id in EntriesNotInB  on row.Field<string>("abc") equals id select row).CopyToDataTable();
            foreach (DataRow row in dt.Rows)
            {
              /////Place your code to manipulate on datatable Rows
            }
        } 
```

To read more on Enumerable.Except Method,Go to [http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except(v=vs.110).aspx)

and its Done!!!! Happy Coding.........

# compilation - 在 Windows XP 下使用 MinGW 编译 wxWidgets 应用程序

> ID：15713244
> 
> 赞同：1
> 
> 时间：2013-03-29T23:56:12.093
> 
> 标签：compilation, cmd, mingw, wxwidgets

嗯，就是这样。我相信标题已经足够描述了。我正在尝试使用 wxWidgets 编译我用 C++ 编写的 hello world 类型的应用程序。我有四个文件，我们称它们为 frame1.h、frame1.cpp、main.h 和 main.cpp。

我只需要一个简单的（如果可能的话）方法来从 cmd 提示符编译应用程序，最好是从 .bat 脚本文件。

我用谷歌搜索了它，但我发现的一切都是关于编译我已经做过的 wxWidgets 库，或者使用 Visual Studio 或其他 IDE（如 Code::Blocks）编译应用程序。我只想用 MinGW 的命令提示符来做。我找到了一种使用反引号的方法，但 Windows 不支持这些方法，即使有某种解决方法，我什至不知道它是否会起作用。

我知道要求一步一步的方法太自命不凡，但我将不胜感激。当然，我知道这可能是不可能的，但我怀疑编译应用程序可能是火箭科学，可能我只是错过了一些非常明显的东西，因为我很愚蠢。

编辑：我像这样编译我的应用程序......

```
g++ -Wall -c -o ClassFile.o ClassFile.cpp
g++ -Wall -o Program.exe ClassFile.o main.cpp 
```

...例如。我正在寻找一种类似的方法来编译 wxWidget 应用程序。

嗯，谢谢。祝你好运。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:57:44.813

如果您已经成功编译 wxWidgets，请转到`samples/minimal`子目录并输入`make -f makefile.gcc -n`. 这将向您展示用于构建最小示例的命令，包括您必须用于编译和链接命令的所有 wxWidgets 特定选项。不幸的是，如果您使用 cmd.exe，您唯一的解决方案是在另一个窗口中手动复制粘贴这些选项（当然，用您的程序名称替换“minimal”），因为您已经知道，它不支持命令替换（反引号）机制。

由于这很快就会变得令人厌烦，因此通常要做的事情是编写一个 makefile，即使它只是一个非常简单的文件，其中这些选项在变量中定义，然后对所有文件重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-19T14:50:20.457

我已经制作了一个关于这个主题的视频[https://www.youtube.com/watch?v=f6FDNR3lh8E](https://www.youtube.com/watch?v=f6FDNR3lh8E) 这里有一些小而简单的步骤。

前置要求：

1.  下载并安装了 GNU g++ 编译器。

2.  将 gcc/g++ 路径设置为环境变量。

3.  下载 WxWidgets 二进制文件：1\. 头文件，2\. 开发文件，3\. DLL。

4.  然后按原样提取一个文件夹。我在 D:\WxAPI 文件夹中提取了它们。看起来像：D:
    - WxAPI 文件夹 - 包含（头文件有这个文件夹压缩在 .7z 中） - lib（开发文件和 DLL 有这个文件夹压缩在 .7z 和两个提取在这个保存文件夹中）

5.  设置您的项目开发结构。

    我的项目开发结构：

    ```
     WxExample (Project Folder)
         - Build (Folder) : Contains debug and release dlls and exe
             - debug (Folder) : Contains debug specific dlls and exe.
             - release (Folder) : Contains release specific dlls and exe.
         - inlcude (Folder) : Contains project header files.
         - src (Folder) : Contains project .cpp files.
         - wxCompiler.cmd : Contains compile command created with following steps. 
    ```

*   写编译命令

    *   链接到编译。
    1.  首先编译项目 *.cpp 文件：g++ ".\src*.cpp"

    2.  Give Project Output .exe Name : -o ".\build\release\Project_Name.exe"

    3.  Show Project .h File Location to g++ : -I ".\include"

    4.  Provide WxWidget .h Files : -I "D:\WxAPI\include"

    5.  Locate WxWidget setup.h File : -I "D:\WxAPI\lib\gcc810_x64_dll\mswu"

    6.  Supply Binaries Location of WxWidgets : -L "D:\WxAPI\lib\gcc810_x64_dll"

    7.  Provide Compile Flags : -l wxbase31u -l wxmsw31u_core

    *   Here D:\WxAPI\lib\gcc810_x64_dll\libwxbase31u.a File Renamed To "wxbase31u" & D:\WxAPI\lib\gcc810_x64_dll\libwxmsw31u_core.a File Renamed To "wxmsw31u_core" as flag.

    *   You have to add similar file flag as you used in your project as .h

    *   For Example : -lwxmsw31u_core -lwxbase31u -lwxtiff -lwxjpeg -lwxpng -lwxzlib -lwxregexu -lwxexpat -lkernel32 -luser32 -lgdi32 -lcomdlg32 -lwinspool -lwinmm -lshell32 -lshlwapi -lcomctl32 -lole32 -loleaut32 -luuid -lrpcrt4 -ladvapi32 -lversion -lwsock32 -lwininet -loleacc -luxtheme

    *   Here is Full Command : g++ ".\src*.cpp" -o ".\build\release" -I "D:\WxExample\include" -I "D:\WxAPI\include" -I "D:\WxAPI\lib\gcc810_x64_dll\mswu" -L "D:\WxAPI\lib\gcc810_x64_dll" -l wxbase31u -l wxmsw31u_core

    *   Run wxWidgets.cmd and that's it. Your exe is in your .\Build\release folder.

    8.  Set WxWidget DLL path in Enviroment Variable. If you do not want to copy paste required dll to your release/debug folder.

# c# - How do I post SQL data using submit button in asp.net c# razor

> ID：15713250
> 
> 赞同：1
> 
> 时间：2013-03-29T23:57:08.900
> 
> 标签：c#, asp.net-mvc, razor, ado.net

Thanks in advance.

Can anyone please help me get this button working so I can display a row from the Northwind database 'only' when the button is clicked.

I have been doing webgrid tutorials; however, in each tutorial the grid/ webgrid is always showing before it is searched.

It would be great if I could learn how to use a button to show data from a row in the Northwind database in a list/label/table or grid **'only' when a form is submitted**.

Keeping it simple, I have this:

```
@{
    Layout = "~/_Layout.cshtml";
    Page.Title = "Compare";

   var db = Database.Open("Northwind");
   var selectedData = db.Query("SELECT * FROM Products");

<h1>Products</h1>

 <form action="" method="post">
    <div>
      <input type="Submit" value="Get Products" /><br/> <br/> 
    </div>
 </form>

    <ol>
       @foreach(var row in selectedData)
       {
        <li><a href="#">@row.ProductName</a></li>
       }
     </ol>
  } 
```

**EDIT:** In Mike's tutorial (at: [http://www.mikesdotnetting.com/Article/211/Adding-A-Footer-To-The-Razor-WebGrid](http://www.mikesdotnetting.com/Article/211/Adding-A-Footer-To-The-Razor-WebGrid)) Mike uses a webgrid in Razor to access the Northwind database and display orders.

I would like to use form data to access the database with a submit button; is this possible please? If so how? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:45:36.413

感谢大家的意见。我设法在 Mikes 教程（在我上面的帖子中提到）的 Razor 代码中添加了一个简单的按钮，并且它可以工作。

这是 Mike 的代码以及我添加的按钮：

```
@{
    Layout = "~/_Layout.cshtml";
    Page.Title = "WebGrid.Table method";

    var db = Database.Open("Northwind");
    var sql = "SELECT OrderId FROM Orders";
    var orders = db.Query(sql).Select(o => new SelectListItem {
        Value = o.OrderId.ToString(), 
        Text = o.OrderID.ToString(),
        Selected = o.OrderID.ToString() == Request["OrderID"]
    });

    WebGrid grid = null;
    var orderTotal = 0f;

    if(IsPost){
        sql = @"SELECT p.ProductName, o.UnitPrice, o.Quantity, 
                (o.UnitPrice * o.Quantity) - (o.UnitPrice * o.Quantity * o.Discount) As TotalCost 
                FROM OrderDetails o INNER JOIN Products p ON o.ProductID = p.ProductID 
                WHERE o.OrderID = @0";

        var orderDetails = db.Query(sql, Request["OrderID"]);
        orderTotal = orderDetails.Sum(o => (float)o.TotalCost);

        grid = new WebGrid(orderDetails, canPage: false, canSort: false);
    }
}
<h1>@Page.Title</h1>
<form method="post">
    @Html.DropDownList("OrderID", orders)
    <input type="Submit" value="Get Products" /><br/> <br/> 
</form>

@if(grid != null){
    @grid.Table(
            columns: grid.Columns(
                grid.Column("ProductName", "Product", style: "_220"),
                grid.Column("UnitPrice", "Price", style: "_60", format: @<text>@item.UnitPrice.ToString("c")</text>),
                grid.Column("Quantity", style: "_90"),
                grid.Column("TotalCost", "Total Cost", style: "_90", format: @<text>@item.TotalCost.ToString("c")</text>)
            ), 
            footer: @<table class="footer">
                         <tr>
                             <td class="_220">Total</td>
                             <td colspan="2" class="_150">&nbsp;</td>
                             <td class="_90">@orderTotal.ToString("c")</td>
                         </tr>
                    </table>);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T06:16:42.500

如果您使用的是 ASP.NET MVC，那么使用它的目的是将应用程序划分为三种组件……您在那里拥有的视图，处理来自和的请求的控制器到模型，最后是模型，这是您应该首先放置查询的地方。

如果您没有全部使用 MVC，那么使用它是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T07:51:00.653

这是我一起破解的一个粗略的例子。

当您第一次在 处加载页面时`http://yourDomain/Product/Index`，您只得到一个文本框和搜索按钮。当您在文本框中输入几个字母并单击搜索按钮时，您会得到一个以输入字母开头的 Northwind 产品列表。

**这是 ~/Controllers/ProductController.cs 文件的内容：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
    public class ProductController : Controller
    {
        //
        // GET: /Product/

        public ActionResult Index(String startString)
        {
            List<Models.Product> theProducts;
            using (
                Models.NorthwindEntities NWC = 
                new Models.NorthwindEntities()
            )
            {
                 theProducts =
                    (from e in NWC.Products
                     where e.ProductName.StartsWith(startString)
                    select e).ToList();
            }
            return View(theProducts);
        }

    }
} 
```

**这是 ~/Views/Product/Index.cshtml 文件的内容：**

```
@model List<MvcApplication1.Models.Product>

@{
    ViewBag.Title = "Product";
}

<h2>Product</h2>

@* Use a very crude means to dump matching products out *@ 
@foreach (MvcApplication1.Models.Product p in Model) {
    @Html.Raw(p.ProductName + "<br />");
}
<br />
@* See this for example use of form and submit button
http://weblogs.asp.net/raduenuca/archive/2011/03/13/asp-net-mvc-cascading-dropdown-lists-tutorial-part-2-cascading-using-normal-form-post-html-beginform-helper.aspx *@
@using (Html.BeginForm("Index", "Product", FormMethod.Get)) { 
    @Html.Raw("Enter Search Text Here:<br />");
    <input type="text" name="startString" id="txtSearch" /><br />
    <input type="submit" value="Click Hear to Search" />
} 
```

# javascript - 对象字面量和动态变量

> ID：15713260
> 
> 赞同：-2
> 
> 时间：2013-03-29T23:58:13.300
> 
> 标签：javascript, web-services, backbone.js

有人可以指出我正确的方向吗？如何将引用变量传递给 JavaScript 中的对象字面量？我正在使用 Backbone.js，特别是我正在使用该`collections.where`方法。所以我有以下几点：

```
var temp = customers.where({num: 10}); 
```

但是，如果有人有一个变量，比如 var x （会发生变化），并且他们想说如下内容：

```
var temp = customers.where({num: x}); 
```

我知道，JavaScript 不会让你这样做。但它是如何完成的，或者你如何绕过它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:04:42.310

你像这样创建一个闭包`x`：

```
var x = 10;
var filter = function() { return customers.where({num: x}); };

var temp = filter(); // uses x = 10

x = 20;
temp = filter(); // uses x = 20 
```

# ruby-on-rails - how to create Rails To do list app with pre filled list?

> ID：15713267
> 
> 赞同：1
> 
> 时间：2013-03-29T23:59:00.497
> 
> 标签：ruby-on-rails, ruby

There are a lot of tutorials on the internet about how to create a rails app where a user can create, edit, delete a task.

I need to create an app where there is a pre filled list of tasks with checkboxes that the user can tick off.

Being a noob to rails, I can't really find any resources to point me in the right direction.

Any help will be appreciated.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:15:30.860

您应该只添加一个名为`prefill_todos!`on的方法`User`，然后在创建时调用它。这是它的外观草图：

```
class User
  def prefill_todos!
    todos.create! name: "Buy Milk", deadline: (Date.today + 2.days)
    todos.create! name: "Use this app", complete: true
    todos.create! name: "Tell 3 others about this app", deadline: (Date.today + 1.week)
  end

  # Automatically add dummy todos after creating the object.
  # NOTE: Probably better to explicitly call user.prefill_todos! when you create user.
  after_create :prefill_todos!
end 
```

注意：此答案仅涉及预填充 TODO 项目的问题。您需要遵循涵盖该内容的单独教程（或询问单独的堆栈溢出问题）。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:07:04.480

为了创建一个默认为 true 的复选框，您可以在迁移中使用以下代码：

```
class AddTaskToUsers < ActiveRecord::Migration
  def up
    add_column :users, :task, :boolean, :default => 1
  end

  def down
    remove_column :users, :task
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:09:44.423

好的，假设您所指的教程将创建的任务保存到数据库，那么您可以按照教程创建任务列表应用程序，然后使用 seed.rb 为数据库预先设置初始任务集。[这里有一个关于在 railscasts](http://railscasts.com/episodes/179-seed-data)上使用 seed.rb 的教程 。它有点过时了，但仍然与 rails 3.x 相关

# node.js - npm API - cannot require module npm

> ID：15713269
> 
> 赞同：0
> 
> 时间：2013-03-29T23:59:07.877
> 
> 标签：node.js, npm, require

On the npm docs it says that I can require it and use it's api however when I do:

```
$ node
var npm = require("npm");
Error: Cannot find module 'npm'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at repl:1:11
    at REPLServer.self.eval (repl.js:109:21)
    at rli.on.self.bufferedCmd (repl.js:258:20)
    at REPLServer.self.eval (repl.js:116:5)
    at Interface.<anonymous> (repl.js:248:12)
    at Interface.EventEmitter.emit (events.js:96:17)
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:01:56.497

it worked to do `$ sudo npm install --save npm`

Sorry

# c++ - 如何检查单字符串输入的部分是 int 还是 char？

> ID：15713270
> 
> 赞同：1
> 
> 时间：2013-03-29T23:59:22.247
> 
> 标签：c++, string

我必须取一个长度为 15 的字符串 i/p。前两个字母应该是字母，接下来是 13 位数字。例如：AB1234567891234。如何检查前两个是否只是字母而其他只是数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T00:06:21.127

```
#include <regex>
const std::regex e("^[a-zA-Z][a-zA-Z][0-9]{13}$");
std::string str = "ab1234567890123";
if (std::regex_match (s,e))
    std::cout << "string object matched\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:02:05.443

您可以使用`<cctype>`头文件中定义的函数，例如[`isalpha()`](http://www.cplusplus.com/reference/cctype/isalpha/)和[`isdigit()`](http://www.cplusplus.com/reference/cctype/isdigit/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T00:02:38.197

```
#include <cctype>

bool is_correct(std::string const& s) {
    if (s.size() != 15) return false;
    if (!std::isalpha(string[0]) || !std::isalpha(string[1]))
        return false;
    for (std::size_t i = 2; i < 13; ++i) {
        if (!std::isdigit(string[i])) return false;
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T13:03:06.233

```
 #include<iostream>
    #include<string>

    int main(int argc, char *argv[])
    {
    std::string n_s = "AB1234567896785";
    bool res = true;
    std::cout<<"Size of String "<<n_s.size()<<n_s.length()<<std::endl;
    int i = 0, th = 2;

     while(i < n_s.length())
      {
        if(i < th)
        {
          if(!isalpha(n_s[i]))
          {
            res = false;
            break;
          }
        }
        else
        {
          if(!isdigit(n_s[i]))
          {
            res = false;
            break;
           }
        }
        i++;
    }
    if(res)
    {
        std::cout<<"Valid String "<<std::endl;
    }
    else
    {
       std::cout<<"InValid Strinf "<<std::endl;
    }
       return 0;
   } 
```

# git - Git 远程跟踪分支与本地分支不同，具有不同 SHA 的相同提交

> ID：15713273
> 
> 赞同：4
> 
> 时间：2013-03-29T23:59:34.123
> 
> 标签：git

这是我的 git repo 的当前状态（在 GitX 中可视化）。

![分歧的 git 历史](../Images/14cbe14c9589303ab9f6fcc5fab66108.png)

'34e...' 和 'c3d...' 提交（'Implemented a global...' 注释的）是相同的。我用 git diff 确认了这一点，他们甚至有相同的提交时间！唯一的区别是它们的 SHA。

我不知道我是如何让我的回购进入这个状态的。虽然我不是 git pro，但我已经使用了一段时间，并且对所有基础知识都非常熟悉。这是突然发生的，我没有尝试任何我以前没有使用过的 git 功能或工作流程，所以我很困惑。

没有其他人向遥控器提交任何内容，因此我可以在那里更改历史记录，但不涉及的解决方案会更好。

我可以对 master 和 origin/master 进行正常的合并或变基，但我对此感到不舒服，因为历史将显示 2 个相同的提交。

是否可以检查 origin/master，然后将所有从 'a4a...' 开始的提交重新定位到 origin/master，然后将 master 切换到这个新的 HEAD？（基本上让'c3d ...'提交自行挂起，这与它的欺骗无关）

1）那么解决这个问题的首选方法是什么？
2）任何想法这是怎么发生的？其他人以前见过吗？

编辑：
**git diff c3db784817 34e1ab666a**：什么也没输出。

**git reflog 大师**：

> Bender：mt-d-styles tyson$ git reflog master
> 9579294 master@{0}：commit：添加了仅调试控制台打印以测试图像视图
> 1155228 master@{1}：commit：添加了自定义单元格可以
> 影响 a4ab788 master的新标记界面@{2}：commit：添加了一个新的 StyledRootElement，它会自动应用
> c3db784 master@{3}：commit：实现了一个全局技术来设置所有存在的样式
> 34e1ab6 master@{4}：commit：实现了一个全局技术来设置所有存在的样式
> 8519fb1 master @{5}：commit：扩展了 remove 方法，让调用者可以访问
> 30aeee6 master@{6}：commit：添加了一个新的基于工厂方法的 Side Swipe View con

**git reflog origin/master**：

> Bender:mt-d-styles tyson$ git reflog origin/master
> 34e1ab6 refs/remotes/origin/master@{0}：通过推送更新
> 8519fb1 refs/remotes/origin/master@{1}：通过推送更新
> 495e0ef refs/remotes /origin/master@{2}：通过推送更新
> c5fec81 refs/remotes/origin/master@{3}：通过推送更新
> cba1e0f refs/remotes/origin/master@{4}：通过推送更新
> 9ee1ffb refs/remotes/origin /master@{5}：通过推送更新
> 68ee429 refs/remotes/origin/master@{6}：通过推送更新
> 0e2d199 refs/remotes/origin/master@{7}：通过推送更新
> 8a4de84 refs/remotes/origin/master @{8}：推送更新

编辑 2：
**git log --format=raw --decorate --graph --all**：

```
*  commit c3db7848171f396c5a595a35dd6b609c119f9e84 
| tree 998e9749546d05178798c8a462d3eff02a111f4c 
| parent 8519fb17e77b8ae865e071772ae652316df8822a 
| author Tyson <tyson> 1364529327 +0800 
| committer Tyson <tyson> 1364539365 +0800 
|  
|     Implemented a global technique for styling all existing MT.D element backg 
|  

| * commit 34e1ab666a81dde7582ee9e31bfa961420d38f55 (origin/master) 
|/  tree 38f9e0c3d936c702fdcd18d215a2f0a88280893b 
|   parent 8519fb17e77b8ae865e071772ae652316df8822a 
|   author Tyson <tyson> 1364529327 +0800 
|   committer Tyson <tyson> 1364529327 +0800 
|    
|      Implemented a global technique for styling all existing MT.D element bac 
| 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T00:23:49.860

**The Cause**: You probably did some history rewriting. If the commits where exactly identical, the SHA would automatically be the same. What you see in you UI is not the commit date, but the author date. Run `git log --format=raw --decorate ̵-graph --all` to get more details. I guess you will see that the commit date of your local version is a later date. That is caused by history rewriting, usually amending or rebasing.

**The Solution**: If you know how to go back, you could just try pulling with rebase – if the commits really are identical, git *should* realize this and only add one commit. If you don’t know how to go back, just rebase `master` onto `origin/master`, cutting at c3db784817:

```
git rebase --onto origin/master c3db784817 master 
```

* * *

## @Your question in the comments:

How I know you amended from the reflog:

```
c3db784 master@{3}: commit: Implemented a global technique for styling all exist
34e1ab6 master@{4}: commit: Implemented a global technique for styling all exist 
```

`34e1ab6`创建提交后，您的主分支位于。然后你推送了这个提交。然后你的主分支移动到`c3db784`- 一个带有相同消息的提交，你的 git 客户端说原因是`commit`. 由于中间没有分支头移动，这闻起来很像修正。命令行客户端会说`commit (amend)`。

而且您的日志告诉我您在 unix 时间`1364529327`(2013-03-28 20:55:27) 进行了第一次提交，然后在 unix 时间`1364539365`(2013-03-28 23:42:45) 对其进行了修改。（而且你可能住在美国；）

# matplotlib - 在 ipython 中调用 pylab.savefig 而不显示

> ID：15713279
> 
> 赞同：148
> 
> 时间：2013-03-30T00:00:11.243
> 
> 标签：matplotlib, ipython-notebook

我需要在文件中创建一个图形而不在 IPython 笔记本中显示它。我不清楚这方面的相互`IPython`关系`matplotlib.pylab`。但是，当我调用`pylab.savefig("test.png")`当前图形时，除了保存在`test.png`. 在自动创建大量绘图文件时，这通常是不可取的。或者在需要由另一个应用程序进行外部处理的中间文件的情况下。

不确定这是一个问题`matplotlib`还是`IPython`笔记本问题。

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2013-03-30T00:35:53.430

这是一个 matplotlib 问题，您可以通过使用不向用户显示的后端来解决这个问题，例如“Agg”：

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt

plt.plot([1,2,3])
plt.savefig('/tmp/test.png') 
```

**编辑：**如果您不想失去显示绘图的能力，请关闭[Interactive Mode](http://matplotlib.org/faq/usage_faq.html#what-is-interactive-mode)，并且仅`plt.show()`在您准备好显示绘图时调用：

```
import matplotlib.pyplot as plt

# Turn interactive plotting off
plt.ioff()

# Create a new figure, plot into it, then close it so it never gets displayed
fig = plt.figure()
plt.plot([1,2,3])
plt.savefig('/tmp/test0.png')
plt.close(fig)

# Create a new figure, plot into it, then don't close it so it does get displayed
plt.figure()
plt.plot([1,3,2])
plt.savefig('/tmp/test1.png')

# Display all "open" (non-closed) figures
plt.show() 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2015-08-06T01:23:54.653

我们不需要`plt.ioff()`or `plt.show()`（如果我们使用`%matplotlib inline`）。您可以在没有`plt.ioff()`. `plt.close()`具有重要作用。试试这个：

```
%matplotlib inline
import pylab as plt

# It doesn't matter you add line below. You can even replace it by 'plt.ion()', but you will see no changes.
## plt.ioff()

# Create a new figure, plot into it, then close it so it never gets displayed
fig = plt.figure()
plt.plot([1,2,3])
plt.savefig('test0.png')
plt.close(fig)

# Create a new figure, plot into it, then don't close it so it does get displayed
fig2 = plt.figure()
plt.plot([1,3,2])
plt.savefig('test1.png') 
```

如果您在 iPython 中运行此代码，它将显示第二个图，如果您添加 `plt.close(fig2)`到它的末尾，您将什么也看不到。

**总之，**如果您关闭 figure by `plt.close(fig)`，它将不会显示。

# jquery - Identify a specific class element within another div

> ID：15713280
> 
> 赞同：1
> 
> 时间：2013-03-30T00:00:11.640
> 
> 标签：jquery, selector

I have a series of photos on a page, which have below them some text information and some buttons:

```
<div class="photowrapper">
 <div class="photowrapperphoto">
  <div class="photocontainer">image</div>
  </div>
 <div class="textwrapperphoto">
  <div class="textleftwrapperphoto">
   <div class="phototitle">photo_0001</div>
   <div class="photoprice">&pound;3.00</div>
   <div class="photosize">6 by 4 inch</div>
 </div>
 <div class="textrightwrapperphoto">
  <div class="photoaddbutton">Add</div>
  <div class="photoremovebutton">Delete</div>
 </div>
</div> 
```

I want to put in some jquery so that when someone clicks on the 'photoaddbutton', it amends the class of 'photowrapperphoto' (to add a background color).

I can't seem to figure out how to identify the element photowrapperphoto.

I have loads of the above html (i.e. loads of images) on the page. I just want the immediately preceeding 'photowrapperphoto' to change, but at the moment the jquery I'm using changes all 'photowrapperphoto' classes on the page.

```
$(document).ready(function() {
 $('.photoaddbutton').click(function() {
  $('.photowrapperphoto').attr('class', 'photowrapperphotoselected');
 });
}); 
```

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:11:53.430

I'd recommend you let the `photowrapperphoto` items keep their `photowrapperphoto` class, and add an additional class `selected`, instead of changing the class.

The javascript to modify the correct `photowrapperphoto` could be:

```
$(document).ready(function() {
    $('.photoaddbutton').click(function() {
        $(this)
            .closest('.photowrapper')   // go up in the DOM until .photowrapper
            .children('.photowrapperphoto') // go down one level to .photowrapperphoto 
            .addClass('selected');
    });
}); 
```

To specify a special style for the selected `photowrapperphoto`, you can use a rule like this in your CSS:

```
.photowrapperphoto.selected
{
    background-color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:09:27.717

```
$(document).ready(function() {
   $('.photoaddbutton').click(function() {
      $(this).closest('.photowrapper').find('.photowrapperphoto').prop('class', 'photowrapperphotoselected');
   });
}); 
```

但我建议添加和删除一个类，而不是一个一个替换。第一个类标记元素的通用角色，第二个标记它在出现时的附加角色。

# javascript - 带有 DIV 元素的简单 Javascript 按钮

> ID：15713281
> 
> 赞同：0
> 
> 时间：2013-03-30T00:00:15.517
> 
> 标签：javascript, html, button

我正在尝试这样做，以便在按下按钮时显示相应的 DIV 元素。一旦单击一个按钮，就会出现一排按钮，div 元素应显示与按钮相关的文本。

这是我到目前为止所拥有的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
  <style type="text/css">
#sidebar div {background-color: #78a809;display: block;padding: 5px;margin: 15px;text-align: center;text-decoration: none;-moz-border-radius: 5px;border-radius: 5px;border-top-width: 1px;border-right-width: 1px;border-bottom-width: 3px;border-left-width: 1px;border-top-style: solid;border-right-style: solid;border-bottom-style: solid;border-left-style: solid;border-top-color: #74b807;border-right-color: #74b807;border-bottom-color: #74b807;border-left-color: #74b807;width:120px;font-family:Arial, Helvetica, sans-serif;font-size:12px;cursor:pointer;}#sidebar div:hover {background-color: #8ac403;border-bottom-width: 1px;margin-bottom:17px;}
</style>
</head>

<body>
<script type = "text/javascript">
function toggle(vals) {
var d1=document.getElementById("info_1");
var d2=document.getElementById("info_2");
var d3=document.getElementById("info_3");
var d4=document.getElementById("info_4");
var d5=document.getElementById("info_5");
var d6=document.getElementById("info_6");

if (vals=1) {d1.style.display ="block";d2.style.display ="none";d3.style.display ="none";d4.style.display ="none";d5.style.display ="none";d6.style.display ="none";}
if (vals=2) {d2.style.display ="block";d1.style.display ="none";d3.style.display ="none";d4.style.display ="none";d5.style.display ="none";d6.style.display ="none";}
if (vals=3) {d3.style.display ="block";d2.style.display ="none";d1.style.display ="none";d4.style.display ="none";d5.style.display ="none";d6.style.display ="none";}
if (vals=4) {d4.style.display ="block";d2.style.display ="none";d3.style.display ="none";d1.style.display ="none";d5.style.display ="none";d6.style.display ="none";}
if (vals=5) {d5.style.display ="block";d2.style.display ="none";d3.style.display ="none";d4.style.display ="none";d1.style.display ="none";d6.style.display ="none";}
if (vals=6) {d6.style.display ="block";d2.style.display ="none";d3.style.display ="none";d4.style.display ="none";d5.style.display ="none";d1.style.display ="none";}
}
</script>
<table width="490" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="162" valign="top" id="sidebar">
<div onClick="toggle('1');">Button 1</div>
<div onClick="toggle('2');">Button 2</div>
<div onClick="toggle('3')">Button 3</div>
<div onClick="toggle('4')">Button 4</div>
<div onClick="toggle('5')">Button 5</div>
<div onClick="toggle('6')">Button 6</div>
      </td>
  </tr>
</table>
<div id="info_1" style="display:block">Indo Text</div>
<div id="info_2" style="display:none">Indigo Text</div>
<div id="info_3" style="display:none">Bangkok House Text</div>
<div id="info_4" style="display:none">Mr D Text</div>
<div id="info_5" style="display:none">Emporium Text</div>
<div id="info_6" style="display:none">Pacifica Text</div>
</body>
</html> 
```

为什么这不起作用？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:03:30.207

您将以下值发送到“切换”功能：

```
toggle('1'); // '1' 
```

Javascript 将此值作为字符串获取，但您在不使用单引号 (') 的情况下对其进行检查。

但本质上是，您使用的是单个“相等”而不是两个。它必须看起来像：

```
if (vals == '6' ) { /* Do something */ } 
```

如果您只使用一个 = ，则该语句始终返回“true”，因为变量“vals”的值是“6”。如果此操作成功（始终成功），则返回“true”...

In generel you're script looks like very complicated for a simple taks. You should take a look to librarys like jQuery with built-in functions like toggle(), slidetoggle(), fadetoggle() and other ready-to-use functions :-) ... Try the examples here: [http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

# javascript - WebFont Loader 似乎不尊重超时属性？

> ID：15713283
> 
> 赞同：2
> 
> 时间：2013-03-30T00:00:21.853
> 
> 标签：javascript, font-face, webfont-loader

我一直在研究使用 Google/Typekit 的 WebFont Loader 处理远程 @font-face 请求失败的概念证明，但我遇到了障碍。

演示：[http ://dl.dropbox.com/u/114859/code-experiments/web-fonts-loader-test/index.html](http://dl.dropbox.com/u/114859/code-experiments/web-fonts-loader-test/index.html)

现在，它不加载字体（因为它不应该加载，它不存在），但它需要五秒钟才能失败。这是一个问题，因为我告诉它只需一秒钟即可失败。据我在文档中可以看出，我已经正确地做到了这一点（如果我给它一个正确的字符串，它会加载字体）。

当字体 URL 错误时，除了 404 之外，我没有收到任何错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T21:24:48.917

我是 webfontloader 的开发者之一。我快速浏览了一下，您似乎发现了一个错误。当我实现可配置超时时，我将它添加到大多数模块使用的核心中。但是，您使用的是 Google 模块，它使用自己的特定代码实现，因此不支持可配置的超时。我刚刚解决了这个问题并创建了一个拉取请求：

[https://github.com/typekit/webfontloader/pull/109](https://github.com/typekit/webfontloader/pull/109)

这应该可以解决您的问题。这可能需要几天时间才能发布并出现在 Google CDN 上。如果您希望我构建 webfontloader 的临时版本以在此期间使用，请在拉取请求上给我留言。

# python - 用文本替换 csv 中的值并将其写入文件和中心段落

> ID：15713285
> 
> 赞同：1
> 
> 时间：2013-03-30T00:00:32.740
> 
> 标签：python, csv, python-2.7, replace

注意：原始代码已更改以反映建议。保持原始帖子基本完整，以供像我这样的新手参考。

我有一个 csv 文件，它可以包含从零到所有 4 个这些值。

```
COLOUR,Code1,Code2  
Red,1,A  
White,3,D  
Blue,1,C  
Orange,2,D 
```

我有一个测试文件（test_test.txt），其中包含以下内容：

```
"Colours have come to symbolize many things. " 
```

我苦苦挣扎的地方是不知道如何替换价值观。我想搜索颜色文件，如果找到一个值，请将其替换为另一个值：

```
"Red is the colour of blood, rubies, and strawberries." replaces Red  
"WhitePages is the world's largest and most trusted source for business." replaces White  
"The term blue moon is used colloquially to mean a rare event." replaces Blue  
"Orange you glad I have no more colours?" replaces Orange 
```

我想以两种格式（段落和列表）将其写入文本文件：

```
Red is the colour of blood, rubies, and strawberries, WhitePages is the world's largest and most trusted source for business, The term "blue moon" is used colloquially to mean a rare event, and Orange you glad I have no more colours? 
```

**我希望能够将其置于文本文档的中心：**

```
Red is the colour of blood, rubies, and strawberries  
WhitePages is the world's largest and most trusted source for business  
The term "blue moon" is used colloquially to mean a rare event  
Orange you glad I have no more colours? 
```

这是包含建议的修改后的代码。关于如何将最后 4 个句子居中的任何想法？

```
import csv

with open('C:/Test/test_text.txt', 'a') as f:
    with open('C:/Test/colour.csv', 'rb') as test:
        colour_dict = {
            'Red':    "Red is the colour of blood, rubies, and strawberries",
            'White':  "WhitePages is the world's largest and most trusted source for business",
            'Blue':   "The term blue moon is used colloquially to mean a rare event",
            'Orange': "Orange you glad I have no more colours?"
        }
        reader = csv.DictReader(test)
        colour_list = tuple([colour_dict[row["COLOUR"]] for row in reader])

        # Wtite out comma separated list.

        if len(colour_list) == 0:
            colourGroup =  exit
        elif len(colour_list) == 1:
            colourGroup =  '%s' % colour_list #

        elif len(colour_list) == 2:
            colourGroup =  '%s and %s' % colour_list

        else:
            colourGroup = ('%s, ' * (len(colour_list)-1) + 'and %s') % tuple(colour_list)
        f.write(colourGroup)

        # Write  out list as separate lines.
        f.write ('\n\ncolour can influence our emotions, our actions and how we respond to various people, things and ideas. Much has been studied and written about colour and its impact on our daily lives.\n\nMany people believe that colours are powers, and that bright colours are especially powerful. Here are some of the meanings of colours and the energies contained in their corresponding stones.')
        f.write('\n\n' + ('\n'.join(colour_list))) 
```

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:02:19.477

您可以使用字典将颜色转换为所需的替换：

```
colour_dict = {
    'Red':    "Red is the colour of blood, rubies, and strawberries",
    'White':  "WhitePages is the world's largest and most trusted source for business",
    'Blue':   "The term blue moon is used colloquially to mean a rare event",
    'Orange': "Orange you glad I have no more colours?"
}
colour_list = tuple([colour_dict[row["COLOUR"]] for row in reader]) 
```

现在，`colour_list`包含用其表达式替换的颜色。如果 csv 包含意外值，您应该处理异常。

尽管您的问题中未提及，但您的目标似乎是将结果导入 Word 文档。如果你想这样做，并且让你的文本真正居中，我认为最好的方法是生成富文本格式 (RTF) 文件，而不是纯文本文件。这支持真正的居中并且可以被 Word 读取。

我上传[了一个例子](http://temp-share.com/show/dPf3a6FtW)，也许这个[简单的教程](http://www.pindari.com/rtf1.html)和[RTF 规范](http://www.biblioscape.com/rtf15_spec.htm)可以指导你。或者也许使用 Word 的 XML 格式也可以，但我没有这方面的经验。

# ios - 考虑到我不能使用属性，如何为类（而不是实例）指定委托？

> ID：15713289
> 
> 赞同：1
> 
> 时间：2013-03-30T00:01:07.533
> 
> 标签：ios, objective-c, delegates, protocols, encapsulation

我已经为我的自定义类定义了一个协议，现在我想给它一个委托。该类不会被实例化，仅用于其类方法。但是，委托类已被实例化并分配给一个常量。如果我正在实例化这个类，我会让它像这样引用它的委托：

```
@property (weak) MyDelegateClass <MyProtocol> *delegate; 
```

但是因为我没有实例化这个类，所以我不能给它属性。那么我如何引用它的代表呢？吸气剂方法？像这样的东西？我还需要定义一个setter吗？

```
+ (<MyProtocol>MyDelegateClass *)delegate; 
```

这里的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:36:53.550

```
@interface NeverInstanciatedClass

+ (MyDelegateClass *) delegate;
+ setDelegate: (MyDelegateClass* <MyProtocol>) delegate;

@end

@implementation 

static MyDelegateClass <MyProtocol> *_delegate;

+ (MyDelegateClass *) delegate {
    return _delegate;
}

+ setDelegate: (MyDelegateClass* <MyProtocol>) delegate {
    _delegate = delegate;
}

@end 
```

（从头开始 - 从未编译或语法检查）

如果您不使用 ARC，那么您可能需要添加一些内存管理。但是当你使用时`(weak)`，我假设你使用 ARC。

如果您完全使用协议，那么您不需要完全符合条件`MyDelegateClass* <MyProtocol>`。`id <MyProtoco>`应该做。我之所以这样做，是因为您在代码片段中这样做了。当您访问协议中声明的方法（并且您应该只访问方法）时，甚至不需要知道它是什么类型的对象。您（和编译器）只需要知道它实现了协议。

# c# - 为什么我的通用列表始终为空？

> ID：15713290
> 
> 赞同：0
> 
> 时间：2013-03-30T00:01:07.497
> 
> 标签：c#, asp.net-mvc, entity-framework, list

我有这样的课：

```
public class Lugar
{
    [Key]
     public int LugarId { get; set; }

    public List<Review> Reviews { get; set; }
    public int SumReviews { get; set; }

    public double AverageReviews { get {

        if (Reviews == null)
            return 0;

        else if (Reviews.Count == 0)
            return 0;

        else  
        return (double)SumReviews/(Reviews.Count); } }

} 
```

在我的控制器中，我有这个：

```
 [HttpPost, Authorize]
    public ActionResult WriteReview(int id, FormCollection formCollection)
    {

        Lugar lugar = db.Lugares.Find(id);
                    Review review=new Review();
        review.User = User.Identity.Name;
        review.Rating=Convert.ToInt32(formCollection["Rating"]);
        review.Texto = formCollection["Review"];
        if (lugar != null)
        {
            if(  lugar.Reviews==null)
            lugar.Reviews=new List<Review>();

            lugar.Reviews.Add(review);
            lugar.SumReviews += review.Rating;
            db.SaveChanges();

        }

        else
            return RedirectToAction("Index");

        return RedirectToAction("Index");
    }

} 
```

问题在于：

if(lugar.Reviews==null) lugar.Reviews=new List();

每次我执行时，我都会得到（lugar.Reviews==null）为真.....

即使我已经为那个地方添加了评论，if 语句也会返回 true .....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:15:28.593

Try using the 'virtual' keyword where you declare your List and see if you have any more luck.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:07:42.027

您可能想在您的`Lugar`类中引入一个构造函数并在那里实例化列表。像这样的东西：

```
public void Lugar()
{
   Reviews = new List<Review>();
} 
```

希望这可以帮助。不请告诉我。

PS另一件事与您的具体问题无关，但肯定是使用视图模型而不是FormCollection。

它将在很大程度上简化您的生活。例如如何使用它，请看一下这个成功回答的问题：[什么是 MVC 中的 ViewModel？](https://stackoverflow.com/questions/11064316/what-is-viewmodel-in-mvc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:20:54.873

You have 2 options here, lazy loading (which is enabled by putting virtual on navigation properties) This will pull down your second entitiy when you access the property in C# or eager loading by using a `.Include(/*lambda or string property name*/)` statement in your query.

Personally i perfer eager loading as you have more control over when entities are loaded

# php - 对字符串变量求和

> ID：15713294
> 
> 赞同：0
> 
> 时间：2013-03-30T00:01:45.493
> 
> 标签：php

大脑在这里冻结。这是 7 个字符串变量的 var_dump()...

```
array(1) { [0]=> object(stdClass)#635 (1) { ["base_price"]=> string(3) "449" } }
array(1) { [0]=> object(stdClass)#445 (1) { ["option_delta"]=> string(2) "15" } }
array(1) { [0]=> object(stdClass)#639 (1) { ["option_delta"]=> string(2) "29" } }
array(1) { [0]=> object(stdClass)#448 (1) { ["option_delta"]=> string(2) "19" } }
array(1) { [0]=> object(stdClass)#447 (1) { ["option_delta"]=> string(2) "39" } }
array(1) { [0]=> object(stdClass)#446 (1) { ["option_delta"]=> string(2) "34" } }
array(1) { [0]=> object(stdClass)#449 (1) { ["option_delta"]=> string(2) "34" } } 
```

我需要这些变量的总和，并像这样处理它：

```
$totalprice = $baseprice + $procprice + $memprice + $graprice + $hdprice + $optprice + $nicprice; 
```

和这个：

```
$totalprice = ($baseprice + $procprice + $memprice + $graprice + $hdprice + $optprice + $nicprice); 
```

和这个：

```
$totalprice = (int)$baseprice + (int)$procprice + (int)$memprice + (int)$graprice + (int)$hdprice + (int)$optprice + (int)$nicprice; 
```

没有喜悦......我知道我的前额会因为dopeslap而受伤，但我已经准备好接受疼痛会给我带来的解脱。

要添加更多细节，此脚本（位于 Fabrik 中，Joomla 的表单/应用程序构建器）启动：

```
 <?php
$typ = '{rw_inquiries___product_type_id_raw}';
$pro = '{rw_inquiries___selected_processor_raw}';
$mem = '{rw_inquiries___selected_memory_raw}';
$gra = '{rw_inquiries___selected_graphics_raw}';
$hd = '{rw_inquiries___selected_hd_raw}';
$opt = '{rw_inquiries___selected_optical_raw}';
$nic = '{rw_inquiries___selected_nic_raw}';
$db =&JFactory::getDBO();
$db->setQuery("SELECT `base_price` FROM `rw_product_types` where `id` = $typ");
$baseprice = $db->loadObjectList();
$db->setQuery("SELECT `option_delta` FROM `rw_options` where `id` = $pro");
$procprice = $db->loadObjectList();
$db->setQuery("SELECT `option_delta` FROM `rw_options` where `id` = $mem");
$memprice = $db->loadObjectList();
$db->setQuery("SELECT `option_delta` FROM `rw_options` where `id` = $gra");
$graprice = $db->loadObjectList();
$db->setQuery("SELECT `option_delta` FROM `rw_options` where `id` = $hd");
$hdprice = $db->loadObjectList();
$db->setQuery("SELECT `option_delta` FROM `rw_options` where `id` = $opt");
$optprice = $db->loadObjectList();
$db->setQuery("SELECT `option_delta` FROM `rw_options` where `id` = $nic");
$nicprice = $db->loadObjectList();
$totalprice = $baseprice + $procprice + $memprice + $graprice + $hdprice + $optprice + $nicprice;
?> 
```

这 7 个中的每一个都是从下拉列表中选择的表单字段...

并且是用于“配置器”选择计算机、处理器、内存、图形、硬盘驱动器、光学和 NIC 样式的计算机组件。

“delta”选项只是基本价格的“加法器”。

希望有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:08:17.703

您需要访问返回对象中的数据，而不仅仅是对象本身。

```
$totalprice = ((int) $baseprice[0]->base_price + (int) $procprice[0]->option_delta); 
```

那应该给你基本的元素添加。

这是通过观察物体推断出来的。以 $baseprice 为例：

```
array(1) { [0]=> object(stdClass)#635 (1) { ["base_price"]=> string(3) "449" } } 
```

您知道它是一个包含一个对象的数组，如开头的 array(1) 所示。因此，您可以通过以下方式访问该对象：

```
$baseprice[0] 
```

然后你会看到花括号之间的内容是`[0] => object(...)`，这意味着第一项是一个对象。要获取该对象中的“base_price”元素，请使用 -> 指向正确的元素：

```
$baseprice[0]->base_price 
```

要添加字符串，您可以转换为 int：

```
(int) $baseprice[0]->base_price 
```

或使用整数：

```
intval($baseprice[0]->base_price) 
```

作为 int，您应该能够简单地通过使用 + 字符来添加，正如您在代码中演示的那样。

# eclipse - Eclipse does not confirm exit when hitting command + q

> ID：15713295
> 
> 赞同：12
> 
> 时间：2013-03-30T00:01:52.947
> 
> 标签：eclipse, macos, quit

I generally close tabs while using Eclipse with `command`+`w`, however, sometimes hit `command`+`q` by mistake. Even though I have Eclipse set-up to warn me when exiting (Preferences -> General -> Start-up and Shutdown, "Confirm exit when closing last window"), this shortcut seems to bypass the warning, which is quite annoying.

Is there a solution to this same as the way Chrome presents a warning when hitting this shortcut? A hack in some `plist` file maybe? Google searches have not helped much.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-15T21:13:12.860

OK, so having the same problem with Safari and doing a google search led me to [this Apple discussions page](https://discussions.apple.com/thread/3685337?start=0&tstart=0). Basically following these steps (via @evenhuis) you can re-map the quit shortcut to any other menu function:

1.  Go to System Preference > Keyboard.
2.  Choose Keyboard Shortcuts
3.  Click Application Shortcuts
4.  Press the + button
5.  Under Application choose Eclipse
6.  For Menu Title input "Show All". (You could use some other innocuous menu option here)
7.  For Short Cut use ⌘Q

# c# - SqlBulkCopy 和文件归档

> ID：15713302
> 
> 赞同：0
> 
> 时间：2013-03-30T00:02:47.293
> 
> 标签：c#, file-io, sqlbulkcopy

我有一个将数据从平面文件加载到 sql 表中的过程，然后需要立即将文件移动到存档文件夹。但是，在运行代码时，它会导入数据但会抛出 IOException {“该进程无法访问该文件，因为它正在被另一个进程使用。”}

在这个过程中似乎存在一些争论。我应该在哪里以及如何避免这种情况？

```
 internal class Program
{
    private static void Main(string[] args)
    {
        string sourceFolder = @"c:\ImportFiles\";
        string destinationFolder = @"c:\ImportFiles\Archive\";

        foreach (string fileName in Directory.GetFiles(sourceFolder, "*.*"))
        {
            string sourceFileName = Path.GetFileName(fileName);
            string destinationFileName = Path.GetFileName(fileName) + ".arc";

            ProcessFile(fileName);

            string source = String.Concat(sourceFolder,sourceFileName);
            string destination = String.Concat(destinationFolder,destinationFileName);
            File.Move(source, destination);        
        }
    }

    static void ProcessFile(string fileName)
    {
        Encoding enc = new UTF8Encoding(true, true);
        DataTable dt = LoadRecordsFromFile(fileName, enc, ',');

        SqlBulkCopy bulkCopy = new SqlBulkCopy("Server=(local);Database=test;Trusted_Connection=True;",
                                               SqlBulkCopyOptions.TableLock);
        bulkCopy.DestinationTableName = "dbo.tblManualDataLoad";
        bulkCopy.WriteToServer(dt);
        bulkCopy.Close();

    }

    public static DataTable LoadRecordsFromFile(string fileName, Encoding encoding, char delimeter)
    {
        DataTable table = null;

        if (fileName != null &&
            !fileName.Equals(string.Empty) &&
            File.Exists(fileName))
        {
            try
            {
                string tableName = "DataImport";
                FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

                List<string> rows = new List<string>();
                StreamReader reader = new StreamReader(fs, encoding);
                string record = reader.ReadLine();

                while (record != null)
                {
                    rows.Add(record);
                    record = reader.ReadLine();
                }

                List<string[]> rowObjects = new List<string[]>();
                int maxColsCount = 0;
                foreach (string s in rows)
                {
                    string[] convertedRow = s.Split(new char[] { delimeter });
                    if (convertedRow.Length > maxColsCount)
                        maxColsCount = convertedRow.Length;
                    rowObjects.Add(convertedRow);
                }

                table = new DataTable(tableName);
                for (int i = 0; i < maxColsCount; i++)
                {
                    table.Columns.Add(new DataColumn());
                }

                foreach (string[] rowArray in rowObjects)
                {
                    table.Rows.Add(rowArray);
                }
                //Remove Header Row From Import file
                DataRow row = table.Rows[0];
                row.Delete();
                table.AcceptChanges();
            }
            catch
            {
                //TODO SEND EMAIL ALERT ON ERROR
                throw new Exception("Error in ReadFromFile: IO error.");
            }
        }
        else
        {
            //TODO SEND EMAIL ALERT ON ERROR
            throw new FileNotFoundException("Error in ReadFromFile: the file path could not be found.");
        }
        return table;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:20:23.647

您的程序可能会保持文件处于打开状态。您应该在语句中包装`FileStream`和`StreamReader`对象。`using`当`using`块完成时，这会关闭这些对象。

读取文件的函数部分`LoadRecordsFromFile`应类似于：

```
...
string tableName = "DataImport";
List<string> rows = new List<string>();
using (FileStream fs = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
    using (StreamReader reader = new StreamReader(fs, encoding))
    {
        string record = reader.ReadLine();
        while (record != null)
        {
            rows.Add(record);
            record = reader.ReadLine();
        }
    }
}
... 
```

# stata - 如何在Stata中删除此之前的所有观察？

> ID：15713313
> 
> 赞同：1
> 
> 时间：2013-03-30T00:04:16.317
> 
> 标签：stata

使用Stata，如果满足某个标准，我想删除当前观察之前的所有观察。

确切地说，在这个示例中，我想删除出现在 a `close`of的观察之前的所有观察`0`。

```
t   close   id  rdate
MPC 0       MPC 31may2011
MPC 0       MPC 01jun2011
MPC 0       MPC 24jun2011
MPC 37.65   MPC 27jun2011
MPC 38.7    MPC 28jun2011
MPC 40.07   MPC 29jun2011
MPC 0       MPC 30jun2011
MPC 42.2    MPC 01jul2011
MPC 42.21   MPC 05jul2011
MPC 41.89   MPC 06jul2011
MPC 41.78   MPC 07jul2011
MPC 41.41   MPC 08jul2011
MPC 40.1    MPC 11jul2011
MPC 40.48   MPC 12jul2011
MPC 39.96   MPC 13jul2011
MPC 38.64   MPC 14jul2011
MPC 39.16   MPC 15jul2011
MPC 39.12   MPC 18jul2011
MPC 39.74   MPC 19jul2011
MPC 39.53   MPC 20jul2011
MPC 40.1    MPC 21jul2011
MPC 40.57   MPC 22jul2011
MPC 41.37   MPC 25jul2011
MPC 43.05   MPC 26jul2011 
```

像这样的东西：`by t: drop if _n* < _n & close == 0`然后必须导致：

```
t   close   id  rdate
MPC 42.2    MPC 01jul2011
MPC 42.21   MPC 05jul2011
MPC 41.89   MPC 06jul2011
MPC 41.78   MPC 07jul2011
MPC 41.41   MPC 08jul2011
MPC 40.1    MPC 11jul2011
MPC 40.48   MPC 12jul2011
MPC 39.96   MPC 13jul2011
MPC 38.64   MPC 14jul2011
MPC 39.16   MPC 15jul2011
MPC 39.12   MPC 18jul2011
MPC 39.74   MPC 19jul2011
MPC 39.53   MPC 20jul2011
MPC 40.1    MPC 21jul2011
MPC 40.57   MPC 22jul2011
MPC 41.37   MPC 25jul2011
MPC 43.05   MPC 26jul2011 
```

这似乎微不足道，但我就是想不通。

主要问题是我不知道如何描述或命名这种技术，因此我无法搜索它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T06:32:01.073

这可以压缩。最后一个零在

```
egen lastz = max(rdate / (close == 0)), by(id) 
```

那么你就可以

```
drop if date < lastz 
```

You can Google for my article "Compared with..." In the *Stata Journal* for discussion of this technique. You will get missings automatically if there are no zeros.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:40:45.707

我现在设法使用以下“hack”找到了解决此问题的方法。但是，我希望有一种更快、更清洁的方法来做到这一点。

```
* drop all obs before a close price of 0 if occuring *
sort ticker_id rdate
gen tagdate = rdate if close == 0
by ticker_id: egen lasttagdate = max(tagdate)
drop if rdate <= lasttagdate & !missing(lasttagdate)
drop tagdate lasttagdate 
```

# ruby-on-rails-3 - 不要使用 solr.StandardTokenizerFactory 在下划线上拆分

> ID：15713314
> 
> 赞同：3
> 
> 时间：2013-03-30T00:04:40.550
> 
> 标签：ruby-on-rails-3, solr, sunspot, sunspot-rails, sunspot-solr

我正在使用 solr，我在文本字段中使用 StandardTokenizerFactory，但我不想在下划线上拆分。我是否必须使用像 PatternTokenizerFactory 这样的另一个标记器，或者我可以使用 StandardTokenizerFactory 来做到这一点？因为我需要 StandardTokenizerFactory 的相同功能，但下划线没有拆分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:08:18.583

我不认为你可以在 StandardTokenizerFactory 中做到这一点。一种解决方案是首先将下划线替换为 StandardTokenizerFactory 不会处理的内容以及您的文档不会包含的内容。例如，您可以先用[PatternReplaceCharFilterFactory](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternReplaceCharFilterFactory)`_`替换`QQ`到处，然后通过 StandardTokenizerFactory ，然后用使用[PatternReplaceFilterFactory](https://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternReplaceFilterFactory)替换。这是执行此操作的 fieldType 定义：`QQ``_`

```
<fieldType name="text_std_prot" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
        <charFilter class="solr.PatternReplaceCharFilterFactory" 
                    pattern="_" 
                    replacement="QQ"/>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.PatternReplaceFilterFactory" 
                pattern="QQ" 
                replacement="_"/>
        ...
    </analyzer>
</fieldType> 
```

这是发生的情况的屏幕截图：

![分析工具截图](../Images/6ccdc956d9917df62be917e6475359db.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T22:52:03.267

由于 StandardTokenizerFactory 在连字符“-”处拆分，因此添加以下内容似乎对 StandardTokenizerFactory 有用。

```
<charFilter class="solr.PatternReplaceCharFilterFactory" 
                    pattern="_" 
                    replacement="-"/>
      <tokenizer class="solr.StandardTokenizerFactory"/> 
```

# css - 设置 em 不是相对的

> ID：15713316
> 
> 赞同：0
> 
> 时间：2013-03-30T00:04:54.627
> 
> 标签：css, fonts

如果我没有设置我的字体大小，或者我将它设置为 1em，我会得到一个 16 像素的计算字体大小。如果我将它设置为 .875em，我会得到 7px 的计算大小这对我来说没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:38:06.057

它的计算取决于 body 标签中设置的字体大小或浏览器默认的 16px 大小。有关详细信息，请参见下面的链接。 [http://v1.jontangerine.com/silo/css/pixels-to-ems/](http://v1.jontangerine.com/silo/css/pixels-to-ems/)

# string - 使用 for 循环变量的 Verilog 文件名

> ID：15713326
> 
> 赞同：1
> 
> 时间：2013-03-30T00:06:35.180
> 
> 标签：string, for-loop, verilog

我的问题类似于以下问题。 [创建一个新文件，文件名包含循环变量，python](https://stackoverflow.com/questions/12560600/creating-a-new-file-filename-contains-loop-variable-python)

根据 的值`NUM_PU`，我想将输出文件名定义为

```
serial_pu0.out
serial_pu1.out
... etc 
```

以下代码不起作用，因为模拟器将引号 ( `""`) 中的字符视为字符串。有什么建议么？

```
integer file [0:NUM_PU-1];
generate
    for(i=0;i<NUM_PU;i=i+1) begin : serial_data_gen
        initial begin
            file[i] = $fopen ("serial_pu[i].out", "w");
        end
        always@(posedge i_Clk) begin
            if(serial_wr[i]) begin
                $fwrite (file[i], "%c", serial_data_2d[i]);
                $write("%c",serial_data_2d[i]);
            end
        end
    end
endgenerate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:39:58.493

您可以使用动态组合文件名`$sformatf`。

```
initial begin
    file[i] = $fopen($sformatf("serial_pu%0d.out", i), "w");
end 
```

这将创建文件名：

*   serial_pu0.out
*   serial_pu1.out
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T18:20:56.053

`$sformat`您可以使用Verilog (IEEE Std 1364)动态构造文件名字符串：

```
module tb;

parameter NUM_PU=2;

integer file [0:NUM_PU-1];
genvar i;
reg [999:0] filename;

generate
    for(i=0;i<NUM_PU;i=i+1) begin : serial_data_gen
        initial begin
            $sformat(filename, "serial_pu%0d.out", i);
            file[i] = $fopen(filename, "w");
        end
    end
endgenerate

endmodule 
```

# php - php函数重新声明错误

> ID：15713337
> 
> 赞同：-1
> 
> 时间：2013-03-30T00:08:18.187
> 
> 标签：php

我有一个小代码，它绑定在一个函数中，用于生成用户级标签。例如，如果特定用户的数据库权限设置为 9，则他/她是管理员，如果其 0，他/她是成员，依此类推。

这是功能

```
function user_level($user_level) {
                 if($user_level == 10) {
                     $level = "<span style='color:#fff;text-shadow:0px 1px 0px #000;font-size:14px;background:#065286;padding:2px 5px;border-radius:3px;'>System Root</span>";
                 } elseif($user_level == 9) {
                     $level = "<span style='color:#fff;text-shadow:0px 1px 0px #000;font-size:14px;background:#df4d28;padding:2px 5px;border-radius:3px;'>Admin</span>";
                 } else {
                     $level = "<span style='color:#fff;text-shadow:0px 1px 0px #000;font-size:14px;background:#008CD7;padding:2px 5px;border-radius:3px;'>Member</span>";
                 }
                 return $level;
            }

            $level = user_level($user_level); 
```

现在此函数在自定义论坛脚本中使用，因此最初发布的帖子让我们假设有回复。

可悲的是没有显示回复，而是给了我

```
Fatal error: Cannot redeclare user_level() (previously declared in /home/u688392685/public_html/comet/viewtopic.php:156) in /home/u688392685/public_html/comet/viewtopic.php on line 156 
```

我不确定发生了什么，因为它之前运行良好，我记得主机做了一些 PHP 更改，比如版本更新，但仅此而已。有什么办法可以解决这个问题并让我重回正轨？

如果是相对的：Apache/2.2.14、PHP 5.2.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:15:26.407

包含该函数的 php 文件可能在您的脚本中包含两次。

You can fix this issue by replacing any occurence of `include(file.php);` or `require(file.php);` by respectively `include_once(file.php);` or `require_once(file.php);`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:17:23.540

Thanks all for help.

Based on @Mario suggestion I moved the function into a directory and using

> include_once

Inserted the function into viewtopic.php

# c# - 要显示的 DropDownList 属性

> ID：15713340
> 
> 赞同：0
> 
> 时间：2013-03-30T00:08:39.143
> 
> 标签：c#, asp.net-mvc, entity-framework, razor

我有以下类： `User`和`Medic`，继承自`User`.

`User`有: `Id`, `Name`...

`Medic`有：（ `Crm`数值）...

在一个视图中，我想显示一个带有 Medic 的 DropdownList`Id`用于选项值，并`Name`（继承）用于显示......

但是使用`@Html.DropDownList("MedicId")`我默认`Crm`显示的属性。

有人知道将显示属性设置为的方法`Name`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:49:21.893

抱歉，我没有观察到，但在我的控制器中我有办法做到这一点

```
ViewBag.MedicId = new SelectList(db.Medics, "Id", "Nome"); 
```

# javascript - JQuery 重新加载到

> ID：15713342
> 
> 赞同：-1
> 
> 时间：2013-03-30T00:08:45.713
> 
> 标签：javascript, jquery

我是 JQuery 和 Javascript 的新手，在网上找不到一个很好的例子来说明如何只刷新 div 中的 html 对象。

html 对象是来自 cosm.com 的这张图 ![在此处输入图像描述](../Images/083535804cca86266a231179992559f4.png)

*索引.html*

```
<div id="graph" >
<object type="text/html" style="width:100%; height:100%; margin:1%;"data="https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading.png?width=740&height=150&colour=%230055ff&duration=5minutes&legend=Vibrations%20measure%20%200%20-%3E%201024&title=Foosball%20Vibrations%20-%205%20Minutes&stroke_size=4&show_axis_labels=true&detailed_grid=true&scale=manual&max=75&timezone=Mountain%20Time%20(US%20%26%20Canada)" >
</object>
</div> 
```

*脚本.js*

```
$(document).ready( function() {
updateGraph;
setInterval (updateGraph, 2000);
}
function updateGraph() {
     //This line is not working!!!!
    $('#graph').reload();
    //$('#graph').load();

} 
```

[http://jsfiddle.net/spuder/PNK4k/](http://jsfiddle.net/spuder/PNK4k/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:47:09.273

试试这个[http://jsfiddle.net/Bvpft/16/](http://jsfiddle.net/Bvpft/16/)

在 Chrome 和 FireFox 中测试。它刷新并重新下载图像，但不确定它应该做什么。

**HTML**

```
<!DOCTYPE html>
<body>
    <div id="graph" >
        <object type="text/html" style="width:100%; height:100%; margin:1%;" data="">
        </object>
    </div>
</body> 
```

**Javascript**

```
$(document).ready( function()  {
    var graph = $('#graph'),
        uri = 'https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading.png?',
        params = {
            width: 740,
            height: 150,
            colour: '#0055ff',
            duration: '5minutes',
            legend: 'Vibration measure 0 -> 1024 ',
            title: 'Foosball Vibrations - 5 Minutes',
            show_axis_labels: 'true', 
            detailed_grid: 'true',
            scale: 'manual',
            max: 75,
            timezone: 'Mountain Time (US & Canada)'
        };
    var updateGraph = function() {
        var data = uri + $.param(params);
        graph.empty();
        graph.append($('<object/>')
                     .prop({'type': 'text/html', data: data})
                     .css({'width': '100%', 'height': '100%'}))
   };
   updateGraph();
   setInterval (updateGraph, 1000);
}); 
```

* * *

已编辑 - 更改为图像，不闪烁，添加无缓存（在 IE10、Chrome 和 FireFox 中测试）：http: [//jsfiddle.net/JAYDb/4/](http://jsfiddle.net/JAYDb/4/)

**HTML**

```
<div id="graph" ></div> 
```

**CSS**

```
#graph {
    background-color:#C0C0C0;
    margin: 0 auto;
    min-height: 200px ;
    min-width: 750px ;
    display: inline-block;
}
#graphObject{
    display: block;
    width: 100%;
} 
```

**Javascript**

```
$(document).ready( function()  {
    var uri = 'https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading.png?',
        params = {
            width: 740,
            height: 150,
            colour: '#0055ff',
            duration: '5minutes',
            legend: 'Vibration measure 0 -> 1024 ',
            title: 'Foosball Vibrations - 5 Minutes',
            show_axis_labels: 'true', 
            detailed_grid: 'true',
            scale: 'manual',
            max: 75,
            timezone: 'Mountain Time (US & Canada)'
        };
    var data = uri + $.param(params),
        graph = $('#graph'),
        obGraph = $('<img/>').prop({'id': 'graphObject'});
    var updateGraph = function() {
        var date = new Date(),
        src = data + '&' + date.getTime();
        obGraph.prop('src', '');
        obGraph.prop('src', src);
   };
   graph.empty().append(obGraph);
   updateGraph();
   setInterval (updateGraph, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:17:43.753

缺少右括号？

```
$(document).ready
(  function() 
    {
     updateGraph;
     setInterval (updateGraph, 2000);
    } 
); // missing 
```

你的 jsfiddle 不工作，因为没有选择 jQuery 版本。我做了一个工作示例：

```
$(document).ready( function()  {
    alert("OK");
   updateGraph();
   window.setInterval(updateGraph, 5000);
} );

function updateGraph() {
    //This line is not working!!!!
    alert("ok");
    //$('graph').reload(); // unknown method?
} 
```

[http://jsfiddle.net/mmGT9/4/](http://jsfiddle.net/mmGT9/4/)

"$('graph').reload(); 是什么意思？那是自定义函数吗？

如果你想重新加载“对象”，我会从 HTML 区域中删除对象，只留下空白的 DIV。然后在您的 javascript 函数中添加以下行。

```
$("#graph").html('<object type="text/html" style="width:100%; height:100%; margin:1%; " data="https://api.cosm.com/v2/feeds/120687/datastreams/sensor_reading.png?width=740&height=150&colour=%230055ff&duration=5minutes&legend=Vibrations%20measure%20%200%20-%3E%201024&title=Foosball%20Vibrations%20-%205%20Minutes&stroke_size=4&show_axis_labels=true&detailed_grid=true&scale=manual&max=75&timezone=Mountain%20Time%20(US%20%26%20Canada)" ></object>'); 
```

这会将对象设置为 id 为“graph”的元素。div 中的现有内容将被覆盖。该函数每 n 秒调用一次并替换对象，这会强制重新加载。您可以通过使用变量来做得更漂亮。

这是一个例子：http: [//jsfiddle.net/mmGT9/5/](http://jsfiddle.net/mmGT9/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:38:16.240

# [jsFiddle](http://jsfiddle.net/mohammadAdil/DcGqh/)

这工作..

我把你改成`object`了`img`标签

```
<img id='obj' style="width:100%; height:100%; margin:1%; " src=...

$('document').ready( function() {
    var i;

        var src = $('#obj').prop('src'); 
    setInterval(function(){
        i++;
        $('#obj').prop('src',src+"&"+i);

    },5000);
}); 
```

# memory-management - 这个命令有什么问题？

> ID：15713344
> 
> 赞同：1
> 
> 时间：2013-03-30T00:08:55.297
> 
> 标签：memory-management, process, awk, watch, pmap

我自己不是软件/脚本编写人员，因此很难理解这里发生的事情：

```
watch -n 0.2 'ps -p $(pgrep -d',' -x snmpd) -o rss= | awk '{ i += $1 } END { print i }'' 
```

基本上我想每秒打印 5 次我的 snmp 守护程序的 Resident Set Size 值（以获得公平的分辨率）。然后我打算以此为基础构建，将输出重定向到一个文本文件以供以后分析，例如，我可以将数据放入图表中。

我在这里遇到的麻烦是我可以运行以下罚款：

```
watch -n 0.2 'ps -p $(pgrep -d',' -x snmpd) -o rss' 
```

但是，我只需要数值，因此使用*awk 去除*所有内容，但该值很重要。

运行上面的第一个命令会返回一个错误，我怀疑是由于*watch*处理单引号的方式，但我不够聪明，无法理解它......

有什么建议么？

另外，我读过

```
pmap -x [pid] 
```

也可以，但是当我使用*snmpd*各自的 PID 运行它时，输出显然不是零。对此也有任何想法吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:28:00.817

如果引用的命令是准确的：

```
watch -n 0.2 'ps -p $(pgrep -d',' -x snmpd) -o rss= | awk '{ i += $1 } END { print i }''
             ^                ^ ^                         ^                           ^^
             1                0 1                         0                           10 
```

你的单引号有问题。1 表示“引用开始”，0 表示引用结束。以下命令行应该适合您：

```
watch -n 0.2 'ps -p $(pgrep -d"," -x snmpd) -o rss= | awk "{ i += $1 } END { print i }"'
             ^                                                                         ^
             1                                                                         0 
```

双引号`$(...)`也可以正常工作。单引号字符串`watch`作为一个整体发送。以前，您有多个参数。

请注意，在您的工作命令中，您有：

```
watch -n 0.2 'ps -p $(pgrep -d',' -x snmpd) -o rss'
             ^                ^ ^                 ^
             1                0 1                 0 
```

现在，因为中间 '01' 之间的字符是逗号，而不是空格，shell 继续给出`watch`一个参数，但它不包含引号。`watch`它的第三个论点是：

```
ps -p $(pgrep -d, -xsnmpd) -o rss 
```

使用您的`awk`-line， 1watch` 获得多个参数：

```
ps -p $(pgrep -d, -x snmpd) -o rss= | awk {
i
+=
$1
}
END
{
print
i
} 
```

它不知道如何处理多余的东西。（注意： 的值`$1`将是 shell 的当前值`$1`（可能是一个空字符串，在这种情况下，对应的参数`$1`将被省略。）

* * *

这个变体，`$1`在`awk`脚本中的之前有一个反斜杠，似乎对我有用（当我寻找一个实际正在运行的程序时——`snmpd`它没有在我测试的机器上运行，因此事情崩溃了）：

```
sh -c 'ps -p $(pgrep -d"," -x snmpd) -o rss= | awk "{ i += \$1 } END { print i }"' 
```

If you think there's any danger that there is no `snmpd` process, then you need to do things a little less compactly. That's the command I tested; you can put the `watch -n 0.2` in place of the `sh -c`. But note that the man page for [`watch`](http://linux.about.com/library/cmd/blcmdl1_watch.htm) does explicitly say:

> Note that `command` is given to "`sh -c`" which means that you may need to use extra quoting to get the desired effect.

That was very accurate!

If you prefer to stick with single quotes, you could try:

```
watch -n 0.2 'ps -p $(pgrep -d"," -x snmpd) -o rss= | awk '\''{ i += $1 } END { print i }'\' 
```

The idea behind the `'\''` motif is that the first single quote terminates the current single-quoted string; the backslash single quote adds an actual single quote, and the last single quote starts a new single-quoted string. The `'\'` at the end could also be written `'\'''`, but the last two single quotes are redundant, so I left them out.

# python - 使用字符串插值获取字典中的列表

> ID：15713345
> 
> 赞同：0
> 
> 时间：2013-03-30T00:09:07.950
> 
> 标签：python, string, dictionary, string-interpolation

我正在尝试从带有字符串插值的字典中获取一个值。

字典有一些数字和数字列表：

```
d = { "year" : 2010, \
"scenario" : 2, \
"region" : 5, \
"break_points" : [1,2,3,4,5] } 
```

是否可以在字符串插值中引用列表，或者我是否需要为每个列表识别唯一键？

这是我尝试过的：

```
str = "Year = %(year)d, \
Scenario = %(scenario)d, \
Region = %(region)d, \
Break One = %(break_points.0)d..." % d 
```

我也试过了`%(break_points[0])d`，而且`%(break_points{'0'})d`

这是可能的，还是我需要给他们键并将它们保存为字典中的整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T00:12:01.730

这可以通过新型格式实现：

```
print "{0[break_points][0]:d}".format(d) 
```

或者

```
print "{break_points[0]:d}".format(**d) 
```

[str.format 文档](http://docs.python.org/2/library/stdtypes.html#str.format)

> 调用此方法的字符串可以包含由大括号分隔的文字文本或替换字段`{}`。每个替换字段都包含位置参数的数字索引或关键字参数的名称。

[格式化字符串语法](http://docs.python.org/2/library/string.html#format-string-syntax)

> The field_name itself begins with an `arg_name` that is either a number or a keyword. If it’s a number, it refers to a positional argument, and if it’s a keyword, it refers to a named keyword argument.
> 
> ...
> 
> The arg_name can be followed by any number of index or attribute expressions. An expression of the form `'.name'` selects the named attribute using `getattr()`, while an expression of the form `'[index]'` does an index lookup using `__getitem__()`.

# java - Data In Data Out Android App - NullPointerException - 需要实现 intent.getLongExtra()

> ID：15713353
> 
> 赞同：0
> 
> 时间：2013-03-30T00:09:57.250
> 
> 标签：java, android, eclipse, nullpointerexception

我正在数据输出类型的应用程序中构建一个简单的数据，我得到了一个致命的异常 NullPointerException。我已经上下查看了源代码，没有发现任何问题。有人可以解释我可能会忽略什么吗？我知道这与我的一个字符串/变量有关——但我似乎无法确定确切的问题。

日志猫：

```
03-29 20:02:37.047: D/OpenGLRenderer(13437): Enabling debug mode 0
03-29 20:02:38.957: D/AndroidRuntime(13437): Shutting down VM
03-29 20:02:38.957: W/dalvikvm(13437): threadid=1: thread exiting with uncaught exception (group=0x41f7b930)
03-29 20:02:38.967: E/AndroidRuntime(13437): FATAL EXCEPTION: main
03-29 20:02:38.967: E/AndroidRuntime(13437): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.nfc.linkingmanager/com.nfc.linkingmanager.ViewCountry}: java.lang.NullPointerException
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.os.Looper.loop(Looper.java:137)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at java.lang.reflect.Method.invokeNative(Native Method)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at java.lang.reflect.Method.invoke(Method.java:511)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at dalvik.system.NativeStart.main(Native Method)
03-29 20:02:38.967: E/AndroidRuntime(13437): Caused by: java.lang.NullPointerException
03-29 20:02:38.967: E/AndroidRuntime(13437):    at com.nfc.linkingmanager.ViewCountry.onCreate(ViewCountry.java:32)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.Activity.performCreate(Activity.java:5104)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-29 20:02:38.967: E/AndroidRuntime(13437):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-29 20:02:38.967: E/AndroidRuntime(13437):    ... 11 more 
```

爪哇：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.TimePicker;

public class ViewCountry extends Activity {

       private long rowID;
       private TextView nameTv;
       private TextView capTv;
       private TextView codeTv; 
       private TextView timeTv; 

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.view_country);

          setUpViews();
          Bundle extras = getIntent().getExtras();
          rowID = extras.getLong(CountryList.ROW_ID); 
       }

       private void setUpViews() {
           nameTv = (TextView) findViewById(R.id.nameText);
           capTv = (TextView) findViewById(R.id.capText);
           timeTv = (TextView) findViewById(R.id.timeEdit);
           codeTv = (TextView) findViewById(R.id.codeText);
       }

       @Override
       protected void onResume()
       {
          super.onResume();
          new LoadContacts().execute(rowID);
       } 

       private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
       {
          DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

          @Override
          protected Cursor doInBackground(Long... params)
          {
             dbConnector.open();
             return dbConnector.getOneContact(params[0]);
          } 

          @Override
          protected void onPostExecute(Cursor result)
          {
             super.onPostExecute(result);

             result.moveToFirst();
             // get the column index for each data item
             int nameIndex = result.getColumnIndex("name");
             int capIndex = result.getColumnIndex("cap");
             int codeIndex = result.getColumnIndex("code");
             int timeIndex = result.getColumnIndex("time");

             nameTv.setText(result.getString(nameIndex));
             capTv.setText(result.getString(capIndex));
//           timeTv.setText(result.getInt(timeIndex)); // <--- HERE WAS AN ERROR
             timeTv.setText(result.getString(timeIndex)); // time was stored as Sting all the time
             codeTv.setText(result.getString(codeIndex));

             result.close();
             dbConnector.close();
          }
       } 

       @Override
       public boolean onCreateOptionsMenu(Menu menu) 
       {
          super.onCreateOptionsMenu(menu);
          MenuInflater inflater = getMenuInflater();
          inflater.inflate(R.menu.view_country_menu, menu);
          return true;
       }

       @Override
       public boolean onOptionsItemSelected(MenuItem item) 
       {
          switch (item.getItemId())
          {
             case R.id.editItem:
                Intent addEditContact =
                   new Intent(this, AddEditCountry.class);

                addEditContact.putExtra(CountryList.ROW_ID, rowID);
                addEditContact.putExtra("name", nameTv.getText());
                addEditContact.putExtra("cap", capTv.getText());
                addEditContact.putExtra("code", codeTv.getText());
                startActivity(addEditContact); 
                return true;

             case R.id.deleteItem:
                deleteContact();
                return true;

             default:
                return super.onOptionsItemSelected(item);
          } 
       }

       private void deleteContact()
       {

          AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

          alert.setTitle(R.string.confirmTitle); 
          alert.setMessage(R.string.confirmMessage); 

          alert.setPositiveButton(R.string.delete_btn,
             new DialogInterface.OnClickListener()
             {
                public void onClick(DialogInterface dialog, int button)
                {
                   final DatabaseConnector dbConnector = 
                      new DatabaseConnector(ViewCountry.this);

                   AsyncTask<Long, Object, Object> deleteTask =
                      new AsyncTask<Long, Object, Object>()
                      {
                         @Override
                         protected Object doInBackground(Long... params)
                         {
                            dbConnector.deleteContact(params[0]); 
                            return null;
                         } 

                         @Override
                         protected void onPostExecute(Object result)
                         {
                            finish(); 
                         }
                      };

                   deleteTask.execute(new Long[] { rowID });               
                }
             }
          );

          alert.setNegativeButton(R.string.cancel_btn, null).show();
       }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:14:01.287

在您的`onCreate()`方法中抛出了 NullPointerException。我怀疑`getIntent().getExtras()`返回 null，所以你的调用`extras.getLong()`是抛出异常。

# php - 我在 sql 2008 服务器中有一个复选框；当它被检查时，它将运行一个存储过程

> ID：15713357
> 
> 赞同：0
> 
> 时间：2013-03-30T00:10:23.493
> 
> 标签：php, sql

像这样：

```
if (post('tranfer') == 1 && $patient->exists)
    {
    sql::query("exec event.dbo.sp_tran " . $patient->hex);  
    } 
```

当它未选中时，它应该运行反向存储过程。

因为它是表中的一个新复选框..所有成员都不会被自动检查，他们都将有 0.所以我担心我不能使用简单的 else 语句..

```
else (post('tranfer') == 0 && $patient->exists)
        {
        sql::query("exec event.dbo.sp_reverse " . $patient->hex);   
        } 
```

那会起作用还是我错过了对这件作品有害的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:16:41.617

```
if ($patient->exists) {
  if (post('tranfer') == 1) {
    sql::query("exec event.dbo.sp_tran " . $patient->hex);
  } else {
    sql::query("exec event.dbo.sp_reverse " . $patient->hex);
  }
} 
```

更新：

要检测某人何时更改了复选框的值，请在包含该列旧值的表单中放置一个隐藏字段：

```
echo '<input name="old_tranfer" type="hidden" value="' . $patient->tranfer .'">'; 
```

然后在处理表单时，您可以执行以下操作：

```
if (post('transfer') != post('old_transfer') && $patient->hex) {
  if (post('tranfer') == 1) {
    sql::query("exec event.dbo.sp_tran " . $patient->hex);
  } else {
    sql::query("exec event.dbo.sp_reverse " . $patient->hex);
  }
} 
```

# php - PHPAGI：执行格式错误

> ID：15713359
> 
> 赞同：3
> 
> 时间：2013-03-30T00:10:37.883
> 
> 标签：php, linux, asterisk, agi

运行phpagi时遇到问题：

```
-- Executing [123@DLPN_C:1] AGI("SIP/1000-00000001", "hello_world.php") in new stack
-- Launched AGI Script /var/lib/asterisk/agi-bin/hello_world.php
hello_world.php: Failed to execute '/var/lib/asterisk/agi-bin/hello_world.php': Exec format error
-- Auto fallthrough, channel 'SIP/1000-00000001' status is 'UNKNOWN' Scheduling destruction of SIP dialog '343930130' in 32000 ms (Method: INVITE) 
```

从命令行：

```
root@asterisk-test:/var/lib/asterisk/agi-bin# php5 -q hello_world.php 
#!/usr/bin/php5 -q 
```

附加信息：

```
-rwxr-xr-x  1 root     root       757 Mar 29 19:32 hello_world.php
drwxrwxr-x  4 root     root      4096 Mar 29 19:44 phpagi
-rwxr-xr-x  1 root     root     25079 Sep 30  2010 phpagi-asmanager.php
-rwxr-xr-x  1 root     root      2322 Sep 30  2010 phpagi-fastagi.php
-rwxr-xr-x  1 root     root     67615 Sep 30  2010 phpagi.php 
```

你好世界的来源：[http ://www.eder.us/projects/phpagi/phpagi/api-docs/__examplesource/exsource_home_html_projects_phpagi_phpagi_examples_dtmf.php_acb7257145e4a5249182c8373cd8e848.html](http://www.eder.us/projects/phpagi/phpagi/api-docs/__examplesource/exsource_home_html_projects_phpagi_phpagi_examples_dtmf.php_acb7257145e4a5249182c8373cd8e848.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:52:01.970

执行格式错误来自`/bin/bash`，星号`hello_world.php`作为 bash 脚本执行。

**社邦**

如果添加正确的[shebang](http://www.php.net/manual/en/features.commandline.usage.php#example-372)，脚本将由给定的 PHP 解释器执行。第一行告诉系统哪个程序应该运行脚本。

`#!/usr/bin/env php`

要测试你的 shebang，请执行脚本本身，而不是 PHP：
`root@asterisk-test:/var/lib/asterisk/agi-bin# ./hello_world.php`

确保它是可执行的：
`root@asterisk-test:/var/lib/asterisk/agi-bin# chmod +x hello_world.php`

**替代包装**

创建一个执行 PHP 脚本的 bash 脚本。

例如 hello_world.sh：
`/usr/bin/php hello_world.php`

并在 Dialplan 中调用它`AGI("hello_world.sh")`。

确保 shellscript 是可执行的`chmod +x hello_world.sh`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-14T14:45:15.233

我在顶部脚本上添加了以下行以使其为我工作

```
#!/usr/bin/php -q 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T18:45:59.477

你的问题不是星号问题，而是一般的linux问题。

请从您的命令行尝试以下：

```
su asterisk -c "/var/lib/asterisk/agi-bin/hello_world.php" 
```

最可能的原因：php 路径不正确或 selinux 已启用但未配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-13T15:49:44.713

您能否检查您的`extensions.conf`or `extensions_custom.conf`，如果扩展名和优先级不连续，也会发生此错误。

请检查以下示例：

```
[context]
exten => 1,1,Answer()
exten => 1,2,AGI(your-agi-script)
exten => 1,3,Hangup() 
```

# java - 选择一行然后单击按钮时从多个表中获取数据

> ID：15713360
> 
> 赞同：0
> 
> 时间：2013-03-30T00:10:38.993
> 
> 标签：java, swing, jdbc, jtable

我尝试运行下面的代码，但每次运行它，它都不起作用。任何人都可以强调我做错了什么吗？

代码应该做的是：

我必须在数据库中的表名为 r 和另一个名为 sa，表 r 包含表示为外键的列。在我的 Java 前端中，我在一个 jpanel 中有一个 Jtable，在另一个 jpanel 中有一个更新按钮。当用户在 jtable 中选择一行然后单击更新时。如果 jtable r 中的选定行具有 sa id 作为外键，该工具将在文本框中显示来自 r 的数据以及来自 sa 的数据。

**编码**

```
 if(updateClicked == true){
                btnSubmit.setVisible(false);        
                btnUpdate.setVisible(true);
                btnNew.setEnabled(false);
                Statement st;
                PreparedStatement ps;

                ResultSet rs;   
                try {
                    String rid = table.getValue(0);
                    JOptionPane.showMessageDialog(null, rid);
                    String rq ="SELECT * FROM  `r` WHERE  'r_id`=' "+rid+"'";
                    ps = Login.con.prepareStatement(rq);
                    rs = ps.executeQuery();
                    String saID = rs.getString(2);

                    String q = "SELECT sa.Argument FROM sa, r WHERE r.sid ="+sID  ; 
                    st = Login.con.createStatement();
                    rs = st.executeQuery(q);

                    String argu = rs.getString(1);
                    System.out.println(argu);

                    if (argu.isEmpty()==false){
                        btnAddSA.doClick();
                        txtaArg.setText(argu);

                    }

                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                } 
```

**控制台输出**

com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“where 子句”中的未知列“R0004”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:15:15.827

First of all give your tables proper names. "r" and "sa" don't mean anything.

I don't know what the problem with your SQL is but I will suggest that you use a PreparedStatement. It makes it easier to code the SQL so you don't worry about delimiter type mistakes.

A basic example would be:

```
String sql = "INSERT INTO Page (Name, Title) VALUES (?, ?)";

PreparedStatement stmt = connection.prepareStatement(sql);

stmt.setString( 1, "Name1" );
stmt.setString( 2, "Title1" );
stmt.executeUpdate(); 
```

You can search the forum or web for more information.

# c++ - Unordered.map 使用对键插入问题

> ID：15713363
> 
> 赞同：0
> 
> 时间：2013-03-30T00:11:27.147
> 
> 标签：c++, c++11, insert, iterator, unordered-map

```
std::unordered_map<std::pair<Gdiplus::Color, float>, std::shared_ptr<Gdiplus::Pen>> mymap;
input = std::make_pair(color, width); 
```

当我尝试做

```
mymap.insert(std::make_pair(color,width), pen); 
```

我得到 C2664: 'std::_List_iterator<_Mylist> std::_Hash<_Traits>::insert&>(std::_List_const_iterator<_Mylist>,_Valty)' : 无法从 'std::pair<_Ty1,_Ty2 转换参数 1 >' 到 'std::_List_const_iterator<_Mylist>' 1>

我试着做

```
mymap.insert(std::make_pair(input,pen)) 
```

但这也给了我一个错误。我不明白为什么，因为输入是一对颜色和浮点数

我正在添加整个代码，因为我仍然遇到问题

```
std::unordered_map<std::pair<Gdiplus::Color, float>, std::shared_ptr<Gdiplus::Pen>> mymap;
std::shared_ptr<Gdiplus::Pen> getPen(Gdiplus::Color const & color, float width )
{   
    std::pair<Gdiplus::Color,float> input;
    input = std::make_pair(color, width);
    std::unordered_map<std::pair<Gdiplus::Color, float>, std::shared_ptr<Gdiplus::Pen>>::const_iterator got = mymap.find (input);

        if ( got == mymap.end() )
        {
            auto pen = std::make_shared<Gdiplus::Pen> ();
            pen->SetColor(color);
            pen->SetWidth(width);
            //std::pair<Gdiplus::Color,float> input2;
            mymap.insert(std::make_pair(input, pen));
            return pen;             
        }       
        else
        {
            if (std::shared_ptr<Gdiplus::Pen> m_pen = got->second)
               return m_Pen;
        }

} 
```

};

```
 error C2440: 'type cast' : cannot convert from 'const std::pair<_Ty1,_Ty2>' to 'size_t'   with
       [
          _Ty1=Gdiplus::Color,
          _Ty2=float
      ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:14:01.723

Use `emplace(key, value)` or `insert(pair)`.

```
mymap.emplace(std::make_pair(color, width), pen);
mymap.insert(std::make_pair(std::make_pair(color, width), pen)); 
```

`insert(it, pair)` takes an iterator as its first argument (as an hint for performance reasons), not a key.

# c++ - Drawing static text on transparent window

> ID：15713369
> 
> 赞同：2
> 
> 时间：2013-03-30T00:12:04.513
> 
> 标签：c++, dialog, window, transparent, visual-c++

I am trying to display static text directly inside a game's window. I am writing a standard win32 dll that the game loads. The DLL creates a borderless and transparent dialog window that always lies on top of the game's window and fills the game's client area. The only problem is that when I make the dialog window transparent, the static text I put on the dialog becomes invisble too. Is there a way that I can make the dialog window transparent but not the text on it?

# html - chrome/opera anchor shift away after adding dom elements

> ID：15713372
> 
> 赞同：3
> 
> 时间：2013-03-30T00:12:21.263
> 
> 标签：html, google-chrome, dom, anchor, opera

Say I have a URL: [http://rythmengine.org/doc/expression.md#transformer](http://rythmengine.org/doc/expression.md#transformer)

Immediately after the page is loaded, the anchor is shown correctly, however I have a script to automatically add some iframes across the page, chrome/opera will later on shift away from the anchor `#comment`, firefox and IE (10) are all good.

Any idea how to fix it in Chrome/opera?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T05:27:57.623

I do not know if I would implement this or not since the iframes do take a noticeable amount of time to load and the user might already be scrolling around the page and get jolted back to the hash element but here is a solution I came up with using jQuery.

Since the iframes are being replaced in the document after it initially loads you can use the `.load()` function which normally never fires if you just have it on the document.

## **Demo** on [this page](http://fiddle.jshell.net/MadLittleMods/cDrVR/show/#comments) and [edit the fiddle here](http://jsfiddle.net/MadLittleMods/cDrVR/).

Just add this jQuery code into your script tag where you replace all of the `pre code`:

**Code:**

```
$('iframe').load(function() {
    moveToHash();
});

// Scroll to the url hash element
function moveToHash()
{
    var hashElem = $(window.location.hash);

    // If the hash elment exists
    if(hashElem.length)
    {
        window.scrollTo(hashElem.position().left, hashElem.position().top);
    } 
} 
```

*Edit:* had a few mistakes and unnecessary in the code that are now fixed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T06:38:54.927

When every iframe ends loading tell the browser to go to that hash

```
$('iframe').load(function() {
    document.location.href = document.location.hash;
}); 
```

# php - JS showing field if dropdown selected

> ID：15713374
> 
> 赞同：0
> 
> 时间：2013-03-30T00:12:47.360
> 
> 标签：php, javascript, html, magento

I am wanting to show a hidden field but only when an option is selected in the dropdown. It does not matter which option is selected but I need one to be selected.

Javascript:

```
 <script type="text/javascript">
function Select(sel,id,nu){
document.getElementById(id).style.display=sel.selectedIndex==nu?'block':'none';
}
</script> 
```

Selection:

```
 <select name="options[1]" id="select_1" 
class=" required-entry product-custom-option" 
title="" onchange="opConfig.reloadPrice();displayCondition();Select(this,divShow,1)">
<option value="" >-- Please Select --</option>
<option value="1"  price="0" >Perfect </option>
<option value="2"  price="-35" >Excellent </option>
<option value="3"  price="-105" >Good </option>
<option value="4"  price="-140" >Poor </option>
<option value="5"  price="-252" >Broken </option>
</select> 
```

The above onchange will only work if the first item is selected, so I am unsure how to make it work for any item selected. Also, I know the divShow should have some ' around it but I don't know how to write it into the following php:

```
 $extraParams .= ' onchange="opConfig.reloadPrice();displayCondition();Select(this,'."divShow".',1)"'; 
```

Div Box:

```
 <div id="divShow" style="display:none;">
<?php echo $this->getPriceHtml($_product) ?></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:22:42.220

您必须显示简单的引号才能`divShow`生成 JS 字符串。在 PHP（以及大多数常用语言）中，您可以使用以下命令对它们进行转义`\`：

```
$extraParams .= ' onchange="opConfig.reloadPrice();displayCondition();Select(this,\'divShow\',1)"'; 
```

如果没有这些引号，您的 JS 将尝试查找`divShow`变量。

# mongodb - 在mongodb（或java）中按数组查找对象

> ID：15713378
> 
> 赞同：2
> 
> 时间：2013-03-30T00:13:24.507
> 
> 标签：mongodb, mongodb-query, mongo-java

我有一个这样的集合（数据集）：

```
{
  "_id" : ObjectId("515611c1c6e3718ee42a5655"),
  "id": "Product1",
  "type": "ProductType4"
  "productFeature": [
    {
      "id": "ProductFeature1"
    },
    {
      "id": "ProductFeature2"
    },
    {
      "id": "ProductFeature3"
    }
  ]
  "productPropertyNumeric": 25
},     
... and more product objects...

{
  "_id" : ObjectId("515611c1c6e3718ee42a5666"),
  "id": "ProductFeature1",
  "label": "blablabla" 
},
{
  "_id" : ObjectId("515611c1c6e3718ee42a5667"),
  "id": "ProductFeature2",
  "label": "blebleble" 
},
{
  "_id" : ObjectId("515611c1c6e3718ee42a5668"),
  "id": "ProductFeature3",
  "label": "blublublu" 
}      ... and more feature objects... 
```

根据 Product1，我必须在其“productFeature”数组中找到特定产品的功能和标签。

我曾尝试在 Mongo shell 中找到它们（例如，使用变量）：

```
var aaa = db.dataset.find({ id: "Product1" })

db.dataset.find({ id: "aaa.productFeature.id" }) 
```

但它不起作用。如果有人知道如何按数组查找对象，请帮助我。非常感谢。

PS：最好在 Java 中使用 - 例如，我应用了一个查询：

```
 BasicDBObject query = new BasicDBObject();

    query.put("type","ProductType4");
    query.put("productPropertyNumeric", new BasicDBObject("$gt", 10));

    DBCursor cursor = coll.find(query).sort( new BasicDBObject("label", 1));
    while (cursor.hasNext()){
       System.out.println(cursor.next().get("id"));  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:15:53.007

这是我对自己问题的回答。我希望这对某人有所帮助。

```
BasicDBObject query = new BasicDBObject();
    BasicDBObject field = new BasicDBObject();

    query.put("id", "Product1");
    field.put("id", 1);
    field.put("productFeature", 1);      
    field.put("_id", 0);

    DBCursor cursor = coll.find(query, field);
    while (cursor.hasNext()) {
        BasicDBObject result = (BasicDBObject) cursor.next();
        System.out.println(result);
        ArrayList<BasicDBObject> features = (ArrayList<BasicDBObject>) result.get("productFeature");

        for (BasicDBObject embedded : features) {
            String featuresId = (String) embedded.get("id");

            BasicDBObject query2 = new BasicDBObject();
            BasicDBObject field2 = new BasicDBObject();

            query2.put("id", featuresId);
            field2.put("id", 1);
            field2.put("label", 1);
            field2.put("_id", 0);
            DBCursor cursor2 = coll.find(query2, field2);

            while (cursor2.hasNext()) {
                System.out.println(cursor2.next());
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T00:22:37.527

您必须将文档结构中的“路径”提供给要从文档根目录查询的字段。在这种情况下，路径是“productFeature”-->“id”。MongoDB 使用点 (.) 代替箭头，例如，

```
db.dataset.find({ "productFeature.id" : "Product1" }); 
```

在 Java 中，你会做一些非常相似的事情：

```
BasicDBObject query = new BasicDBObject("productFeature.id" : "Product1");

DBCursor cursor = coll.find(query).sort( new BasicDBObject("label", 1));
while (cursor.hasNext()){
   System.out.println(cursor.next().get("id"));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-22T15:44:57.067

In Java you could also use the Query class in combination with MongoTemplate.

```
import org.springframework.data.mongodb.core.MongoTemplate;
import org.springframework.data.mongodb.core.query.Criteria;
import org.springframework.data.mongodb.core.query.Query;

    @Autowired
    private final MongoTemplate mongoTemplate; 
```

...

```
public YourObjectClass findProduct1(){
        Query query = new Query();
        query.addCriteria(Criteria.where("productFeature.id").is("Product1"));
        List<YourObjectClass> result = this.mongoTemplate.find(query, YourObjectClass.class);
  return result;
} 
```

# knockout.js - 使用事件侦听器时淘汰赛不绑定？

> ID：15713381
> 
> 赞同：0
> 
> 时间：2013-03-30T00:13:42.290
> 
> 标签：knockout.js

我正在尝试检测用户是否使用“选项卡”按钮离开字段 - 如果是这样，我想保存数据。

在这种情况下，当最后一个字段通过选项卡退出时，将保存两个字段。如果我手动单击“保存”，两个字段都会正确更新。如果我使用 TAB，只会保存第一个字段，而旧字段不会保存新数据。这告诉我“keydown”绑定没有看到新数据。

如果我在本地调试并将鼠标悬停在 tabOut 方法中的“数据”上，我会看到第一个字段有新数据，但第二个字段有旧数据。

小提琴：http: [//jsfiddle.net/PTSkR/18/](http://jsfiddle.net/PTSkR/18/)

任何帮助将非常感激！

看法：

```
 <div class="span5 side-study-box">
            <textarea data-bind="value: sides()[0].content"></textarea>
        </div>
        <div class="span5 side-study-box">
            <textarea data-bind="value: sides()[1].content, event: { keydown: tabOut }"></textarea>
        </div> 
```

选项卡输出功能：

```
self.tabOut = function (data, event) {

            if (event.keyCode == 9) {
                debugger;
                self.save();
            };
            return true;
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:32:14.897

您是否尝试过在文本框中添加“valueUpdate:'afterkeydown'”？

# android - 调试位于依赖 eclipse 项目中的 Android Native

> ID：15713390
> 
> 赞同：2
> 
> 时间：2013-03-30T00:14:51.087
> 
> 标签：android, eclipse, debugging, android-ndk

（ADK 21、NDK r8d、Eclipse Juno）[我已经构建了几个 Android 应用程序，因此使用 ADK/NDK 等获得了不错的体验]

Eclipse 项目设置：

```
- AppProject (android, java, no jni)
- LibProject (android, java, Yes jni) 
```

以前，所有这些都在一个项目中 - 构建良好，运行良好，并且本机调试效果很好。

然后，我将“可重用”部分拆分为一个通用代码库，用于多个“AppProject”应用程序前端。（一切仍然可以构建、链接、打包和运行）

但是，当我运行“AppProject”时，我无法再调试本机库。

解决办法是什么？

可能的选项#1：

```
- Modify "LibProject" Android.mk to export a PreBuilt that is used by AppProject?
- (I would have all the debug symbols so I'm thinking that would work okay) 
```

我还需要对 AppProject 进行改造吗？换句话说，它有一个 Android.mk 来从 LibProject 导入输出 .so

可能的选项#2

```
- http://stackoverflow.com/a/14344377/735533
- that workaround uses ndk-gdb
- I'm hoping for a solution where I can debug LibProject in Eclipse directly when running AppProject 
```

在运行主应用程序“AppProject”时，是否有更好的方法来调试位于依赖项目“LibProject”中的本机代码？

蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:09:33.637

对于那些好奇...

*   我尝试了预建...
    *   这绝对是要走的路（测试项目设置工作）
    *   但是*我的*代码库的结构对原生/非原生串扰有点沉重，目前不想花时间（还）进行适当的重组。
    *   但是，作为预构建的重组现在在我的“重要待办事项”列表中

任何地方，这是我的解决方案。

在 Linux（unix 风格）上......使用链接 - 源链接到来自 LibProject 的每个 AppProject。

Basically the "LibProject" becomes a sort of "template" during development - it is not built or used as a library directly. Rather, each AppProject becomes self-sufficient, standalone, application with the contents of the library project embedded in its own code tree. Best part is native debugging works like a charm again.

Although it *sort of* defeats the point of making, there are benefits - one common codebase for the "library" portion ... which is really what I desire for the time being.

Also, conversion to use as a true Library dependency by the Application projects for, say, eventual release builds is an easy switch. Once debugged and ready, the Library can be built separately, packed normally with the application "front ends", and upgraded independently of the applications.

# jquery - 如何使单选按钮在 JQuery UI 手风琴内工作？

> ID：15713397
> 
> 赞同：2
> 
> 时间：2013-03-30T00:15:35.610
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我已经搜索过，有些人问过这个问题，但没有人给出足够的答案，而且大多数提问者没有提供有用的示例代码。我将它缩减为我正在尝试做但不起作用的事情。手风琴有效，但单选按钮无效。有什么办法可以使这项工作？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/base/jquery-ui.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.js"></script>
    <title>Test</title>
    <script type="text/javascript">
      $(document).ready(
        function()
        {
            $('#mystuff').accordion(
            {
                header: "div.hdr",
                collapsible: true,
                heightStyle: "content"
            });
        }
      );
    </script>
  </head>
  <body>
    <form>
      <div id="mystuff">
        <div class="hdr">
          <span><input type="radio" name="r1" value="A" checked="checked" /></span>
          <span>Choose A</span>
          <span><input type="radio" name="r1" value="B" /></span>
          <span>Choose B</span>
        </div>
        <div>
          This is the body for 1.
        </div>
        <div class="hdr">
          <span><input type="radio" name="r2" value="A" checked="checked" /></span>
          <span>Choose A</span>
          <span><input type="radio" name="r2" value="B" /></span>
          <span>Choose B</span>
        </div>
        <div>
          This is the body for 2.
        </div>
      </div>
    </form>
  </body>
</html> 
```

编辑：大卫托马斯的建议奏效了。这是修改后的示例，已修复：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/base/jquery-ui.css" />
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.js"></script>
    <title>Test</title>
    <script type="text/javascript">
      $(document).ready(
        function()
        {
            $('#mystuff').accordion(
            {
                header: "div.hdr",
                collapsible: true,
                heightStyle: "content"
            });
            $('input[type=radio],label').on('click',function(e){e.stopPropagation();});
        }
      );
    </script>
  </head>
  <body>
    <form>
      <div id="mystuff">
        <div class="hdr">
          <span><input id="r1a" type="radio" name="r1" value="A" checked="checked" /></span><label for="r1a">Choose A</label>
          <span><input id="r1b" type="radio" name="r1" value="B" /></span><label for="r1b">Choose B</label>
        </div>
        <div>
          This is the body for 1.
        </div>
        <div class="hdr">
          <span><input id="r2a" type="radio" name="r2" value="A" checked="checked" /></span><label for="r2a">Choose A</label>
          <span><input id="r2b" type="radio" name="r2" value="B" /></span><label for="r2b">Choose B</label>
        </div>
        <div>
          This is the body for 2.
        </div>
      </div>
    </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T00:23:34.667

这是一个选项：

```
$('div.hdr span').click(function(e){
    // stops the click event bubbling/propagating beyond the span
    e.stopPropagation();
    // finds the previous span,
    // finds the radio input in that span (if there is one)
    // and checks it (though you should use the label element for this, really
    $(this).prev('span').find('input:radio').prop('checked', true);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/zxbAe/1/)。

# php - $_post 中无法识别动态表单元素

> ID：15713399
> 
> 赞同：0
> 
> 时间：2013-03-30T00:15:40.250
> 
> 标签：php, html

我有一个动态生成表单的函数。一切都很完美，直到我需要添加一个额外的字段来获取要传入的 unix 时间戳。

新的隐藏字段与前一个相同，当然除了名称之外，但从`task_date`不包含在发布的值中。

这是功能

```
 private function addTaskForm($court_id, $judge_id, $employee_id, $date)
  {
   // display add task form

      // if judge_id == null then display judge selection box
      // if employee_id == null then display employee selection box
   $form = "<form method='post' action='#'>";
   $form .= "<input type='hidden' name='court_id' value='$court_id'>";
   $form .= "<input type='hidden' name='task_date' value='$date'>";     <= this is the NEW element
    if($judge_id == null)
        $form .= Utils::selectJudge($this->db)."<br />";
    else
        $form .="<input type='hidden' name='judge_id' value='$judge_id'>";
    if($employee_id == null)
      $form .= Utils::selectEmployee($this->db)."<br />";
    else
        $form .="<input type='hidden' name='employee_id' value='$employee_id'>";                 

    $form .=Utils::selectTask($this->db)."<br /><br />
     <select name='start_time'><option>Start</option>".Utils::selectTime()." </select> - 
     <select name='end_time'><option>End</option>".Utils::selectTime()." </select>
    <input type='submit' name='btnAddTask' value='Add Task'>
</form>";

   return $form; 
```

}

这是循环通过发布值后的输出：

```
key: court_id: 3
key: judge_id: 1
key: employee_id: 217
key: task_id: 1
key: start_time: 0800
key: end_time: Uknown
key: btnAddTask: Add Task 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:29:17.053

试试这些

> *   重启服务器服务
>     
>     
> *   改变`$form = "<form method='post' action='#?nocache=". rand() ."'>";`
>     
>     
> *   检查浏览器是否离线
>     
>     
> *   清除缓存（或尝试上面的代码）
>     
>     
> *   记得检查您是否正在寻找正确的 php 文件:-)

**更新**

你能添加这个调用并发回结果吗

```
if(isset($_POST['task_date']))
echo ($_POST['task_date']); 
```

`echo addTaskForm("something","something","something","this thing can be wrong");`

我试过了，效果很好。
如果错误继续存在，您可以选择更改`task_date`为某些内容

# java - How to implement a read-only property with Spring Data?

> ID：15713400
> 
> 赞同：6
> 
> 时间：2013-03-30T00:15:48.673
> 
> 标签：java, neo4j, spring-data, spring-data-neo4j

This should be a simple thing to do! But I've been unable to find an answer so far. Either I'm missing something obvious, or else I'm missing something obvious...

I have a class, say Person. With three fields - "id", "name" and "reputation". Let's say that I am willing to take updates to "name" but not to "reputation". I'd like Spring Data to fetch the value of "reputation" when retrieving from DB, but ignore it when I'm saving the bean.

@Transient annotation is there, but then Spring completely ignores the field and doesn't populate it at all. Ideally, I'm looking for something like @ReadOnly annotation.

**More details**

*   I'm using Spring Data for Neo4j, but I believe this would apply to any Spring Data flavor.
*   This is a backend for Jersey/Jackson-based RESTful service. ** When I satisfy the GET request, I'd like to serve the "reputation" value. But when I receive a PUT update I don't want to take it. ** So far I could use Jackson features. But I'd like to be able to update the DB without having to fetch the existing Person object first.
*   The only way I can figure for making this work is to define two classes - one with "reputation" field and one without. But this seems really clunky. Isn't there something simpler?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:55:12.213

You can use a transient property without a setter. That transient property would return the db property value that is to be protected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T17:49:21.510

you can use @ReadOnlyProperty from org.springframework.data.annotation. see [ReadOnlyProperty](http://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/annotation/ReadOnlyProperty.html)

```
@ReadOnlyProperty
private Object readOnlyValue; 
```

# grails - Adding RequestMap

> ID：15713401
> 
> 赞同：0
> 
> 时间：2013-03-30T00:16:01.073
> 
> 标签：grails, spring-security

how can I upgrade an existing grails application with a request map? I didn't use

```
grails s2-quickstart package user role requestmap 
```

but only

```
grails s2-quickstart package user role 
```

AFAIK I have to 1) set a line in Config.groovy:

```
grails.plugins.springsecurity.securityConfigType = "Requestmap" 
```

and then 2) set all the entries via BootStrap.groovy (according to [spring's docs](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html#5.3%20Requestmap%20Instances%20Stored%20in%20the%20Database) ), I get that, but how does the RequestMap Domain Class have to look like? Anything else to do? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:53:38.973

It's a simple class; this is what would be generated if you specify package `your.package.name` and class name `Requestmap`:

```
package your.package.name

class Requestmap {

   String url
   String configAttribute

   static mapping = {
      cache true
   }

   static constraints = {
      url blank: false, unique: true
      configAttribute blank: false
   }
} 
```

Once you create this, add this line in `Config.groovy`:

```
grails.plugin.springsecurity.requestMap.className = 'your.package.name.Requestmap' 
```

# arduino - 独立 atmega 328 和 Arduino Nano 之间的电阻器

> ID：15713404
> 
> 赞同：0
> 
> 时间：2013-03-30T00:17:05.857
> 
> 标签：arduino

我有一个独立的 atmega328 和一个 Arduino Nano。我希望 Nano 从独立的 atmega328 数字读取一个数字输出。我需要电阻吗？如果是，多少欧姆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T00:28:35.773

如果您的 Arduino Nano 和 Atmega328 由相同的电源供电，您将能够将 328 的输出连接到 nano 的输入而不会出现任何问题（没有电阻，只有电线或走线）。如果它们不是由相同的电源供电，则应将它们的接地连接在一起。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:29:35.030

不，你不需要任何东西。ATmega328 和 Arduino Nano 都有内部上拉电阻，这是 GPIO 配置的问题。

一些链接：

*   [Arduino 数字引脚](http://arduino.cc/en/Tutorial/DigitalPins)
*   [ATmega328 数据表](http://www.atmel.com/Images/doc8161.pdf)（查看第 13.2 段）

注意：正如*mamodom*指出的那样，您需要在两个板之间共享地面。

# python - 将 3,795,790,711 个唯一键值对写入 redis

> ID：15713408
> 
> 赞同：4
> 
> 时间：2013-03-30T00:17:42.900
> 
> 标签：python, redis

我想使用一个相当大的语料库。它的名称为 web 1T-gram。它有大约 3 万亿个代币。这是我第一次使用 redis，我正在尝试编写所有 key:value 对，但它花费的时间太长。我的最终目标是使用几个 redis 实例来存储语料库，但是，目前，我坚持将其全部写在一个实例上。

我不确定，但有什么方法可以加快写作过程吗？截至目前，我只在具有 64G RAM 的机器上编写单个 redis 实例。我在想是否有一些缓存大小设置可以最大化用于redis。或者那些线上的东西？

谢谢。

作为参考，我编写了以下代码：

```
import gzip
import redis
import sys
import os
import time
import gzip
r = redis.StrictRedis(host='localhost',port=6379,db=0)
startTime = time.time()
for l in os.listdir(sys.argv[1]):
        infile = gzip.open(os.path.join(sys.argv[1],l),'rb')
        print l
        for line in infile:
                parts = line.split('\t')
                #print parts[0],' ',parts[1]
                r.set(parts[0],int(parts[1].rstrip('\n')))
r.bgsave()
print time.time() - startTime, ' seconds ' 
```

**更新 ：**

我阅读了有关大规模插入的信息，并一直在尝试这样做，但也一直失败。这是脚本的更改：

```
def gen_redis_proto(*args):
    proto = ''
    proto += '*' + str(len(args)) + '\r\n'
    for arg in args:
        proto += '$' + str(len(arg)) + '\r\n'
        proto += str(arg) + '\r\n'
    return proto
import sys
import os
import gzip
outputFile = open(sys.argv[2],'w')

for l in os.listdir(sys.argv[1]):
        infile = gzip.open(os.path.join(sys.argv[1],l),'rb')
        for line in infile:
                parts = line.split('\t')
                key = parts[0]
                value = parts[1].rstrip('\n')
                #outputFile.write(gen_redis_proto('SET',key,value))
                print gen_redis_proto('SET',key,value)

        infile.close()
        print 'done with file ',l 
```

生成方法的功劳归于 github 用户。我没有写。

如果我运行这个，

```
ERR wrong number of arguments for 'set' command
ERR unknown command '$18'
ERR unknown command 'ESSPrivacyMark'
ERR unknown command '$3'
ERR unknown command '225'
ERR unknown command ' *3'
ERR unknown command '$3'
ERR wrong number of arguments for 'set' command
ERR unknown command '$25'
ERR unknown command 'ESSPrivacyMark'
ERR unknown command '$3'
ERR unknown command '157'
ERR unknown command ' *3'
ERR unknown command '$3' 
```

这种情况一直在继续。输入的形式为

“字符串” \t 计数。

谢谢。

**第二次更新：**

我使用了流水线，这确实给了我动力。但很快它就耗尽了内存。作为参考，我有一个具有 64 gig RAM 的系统。而且我认为它不会耗尽内存。代码如下：

```
import redis
import gzip
import os
import sys
r = redis.Redis(host='localhost',port=6379,db=0)
pipe = r.pipeline(transaction=False)
i = 0
MAX = 10000
ignore = ['3gm-0030.gz','3gm-0063.gz','2gm-0008.gz','3gm-0004.gz','3gm-0022.gz','2gm-0019.gz']
for l in os.listdir(sys.argv[1]):
        if(l in ignore):
                continue
        infile = gzip.open(os.path.join(sys.argv[1],l),'rb')
        print 'doing it for file ',l
        for line in infile:
                parts = line.split('\t')
                key = parts[0]
                value = parts[1].rstrip('\n')
                if(i<MAX):
                        pipe.set(key,value)
                        i=i+1
                else:   
                        pipe.execute()
                        i=0
                        pipe.set(key,value)
                        i=i+1
        infile.close() 
```

哈希是要走的路吗？我认为 64 gig 就足够了。我只给了它 20 亿个键值对的一小部分，而不是全部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T13:53:25.543

在您的情况下，您想要的可能是不可能的。

根据[此页面](http://www.ldc.upenn.edu/Catalog/CatalogEntry.jsp?catalogId=LDC2006T13)，您的数据集是 24 GB*压缩*的`gzip`。这些文件可能包含很多类似的文本，比如字典。

`words`对程序中的文件进行快速测试，得到`dict`3.12 倍的压缩：

```
> gzip -k -c /usr/share/dict/web2 > words.gz
> du /usr/share/dict/web2  words.gz
2496    /usr/share/dict/web2
800 words.gz
> calc '2496/800'
3.12 /* 3.12 */
> calc '3.12*24'
74.88 /* 7.488e1 */ 
```

因此，您的未压缩数据大小*很容易*超过 64 GB。因此，即使 Redis 没有*任何*开销，即使您使用 16 位无符号整数来存储计数，它也不适合您的 RAM。

查看示例，大多数键都*相对*较短；

```
serve as the incoming   92
serve as the incubator  99
serve as the independent    794
serve as the index  223
serve as the indication 72
serve as the indicator  120
serve as the indicators 45
serve as the indispensable  111
serve as the indispensible  40
serve as the individual 234
serve as the industrial 52 
```

您可以散列密钥，但平均而言它可能不会为您节省太多：

```
In [1]: from hashlib import md5

In [2]: data = '''serve as the incoming 92
serve as the incubator 99
serve as the independent 794
serve as the index 223
serve as the indication 72
serve as the indicator 120
serve as the indicators 45
serve as the indispensable 111
serve as the indispensible 40
serve as the individual 234
serve as the industrial 52'''

In [3]: lines = data.splitlines()

In [4]: kv = [s.rsplit(None, 1) for s in lines]

In [5]: kv[0:2]
Out[5]: [['serve as the incoming', '92'], ['serve as the incubator', '99']]

In [6]: [len(s[0]) for s in kv]
Out[6]: [21, 22, 24, 18, 23, 22, 23, 26, 26, 23, 23]

In [7]: [len(md5(s[0]).digest()) for s in kv]
Out[7]: [16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16] 
```

对于任何短于 16 字节的密钥，它实际上会*花费*您更多的空间来散列它。

即使您忽略标题，压缩字符串通常也不会节省空间；

```
In [1]: import zlib

In [2]: zlib.compress('foo')[:3]
Out[2]: 'x\x9cK'

In [3]: zlib.compress('bar')[:3]
Out[3]: 'x\x9cK'

In [4]: s = 'serve as the indispensable'

In [5]: len(s)
Out[5]: 26

In [6]: len(zlib.compress(s))-3
Out[6]: 31 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T16:17:14.187

与其编写命令文件，不如使用流水线和多处理。在 redis-py 中使用流水线非常简单。您需要运行测试以找到理想的块大小。

有关 Py-redis、多处理和流水线的示例，请查看此 [示例要点](https://gist.github.com/datasaur/2914601)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:53:41.933

我肯定会使用散列，因为顶级键有开销，因为它们存储您可能不需要的额外数据（例如 TTL ...）。

redis.io 网站也有一些[性能技巧](http://redis.io/topics/memory-optimization)，[不久前 Jerremy Zawodny 存储了 12 亿个键/值对。](http://blog.zawodny.com/2010/07/25/1250000000-keyvalue-pairs-in-redis-2-0-0-rc3-on-a-32gb-machine/%20Jerr)

# php - PHP 和 Smarty：filemtime(): stat failed

> ID：15713414
> 
> 赞同：1
> 
> 时间：2013-03-30T00:18:08.600
> 
> 标签：php, smarty

我收到以下错误`filemtime(): stat failed`。

完整的错误是：

> ERRNO: 2 TEXT: filemtime(): stat failed for C:\hatshop/presentation//templates_c\74b952bedd7366ad261e8be04bc5be8ef15c2fc1.file.departments_list.tpl.php 位置：C:\hatshop\libs\smarty\sysplugins\smarty_resource.php，第 720 行，在 2013 年 3 月 30 日，上午 12:14 显示回溯：filemtime("C:\hatshop/presentation//templates_c\74b952bedd7366ad261e8be04bc...") # line 720, file: C:\hatshop\libs\smarty\sysplugins\ smarty_resource.php Smarty_Template_Source.getCompiled(Object: Smarty_Internal_Template) # 第 654 行，文件：C:\hatshop\libs\smarty\sysplugins\smarty_internal_template.php Smarty_Internal_Template.__get("compiled") # 第 154 行，文件：C:\hatshop\ libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.fetch(null, null, null, null, false, false, true) # line 286, file: C:\hatshop\libs\smarty\sysplugins\smarty_internal_template.php Smarty_Internal_Template.getSubTemplate("departments_list.tpl", null, null, null, null, Array[0], "0") # 第 34 行，文件：C:\hatshop\演示文稿\模板_c\3522bf5c12e26ac546fbfc3693da6da22f71f1d6.file.index.tpl.php content_5155dc5df33599_26514511（对象：Smarty_Internal_Template）＃第180行，文件：C：\hatshop\libs\smarty\sysplugins\smarty_internal_templatebase.fetch（“smarty_internal_templatebase.phpSmarty_internal_templatebase.php , null, null, true) # 第 374 行，文件：C:\hatshop\libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.display("index.tpl") # 第 7 行，文件：C:\hatshop\index. phptpl", null, null, null, null, Array[0], "0") # 第 34 行，文件：C:\hatshop\presentation\templates_c\3522bf5c12e26ac546fbfc3693da6da22f71f1d6.file.index.tpl.php content_5155dc5df33599_26514511（对象：Smarty_Internal_Template） # 第 180 行，文件：C:\hatshop\libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.fetch("index.tpl", null, null, null, true) # 第 374 行，文件：C:\hatshop\libs \smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.display("index.tpl") # 第 7 行，文件：C:\hatshop\index.phptpl", null, null, null, null, Array[0], "0") # 第 34 行，文件：C:\hatshop\presentation\templates_c\3522bf5c12e26ac546fbfc3693da6da22f71f1d6.file.index.tpl.php content_5155dc5df33599_26514511（对象：Smarty_Internal_Template） # 第 180 行，文件：C:\hatshop\libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.fetch("index.tpl", null, null, null, true) # 第 374 行，文件：C:\hatshop\libs \smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.display("index.tpl") # 第 7 行，文件：C:\hatshop\index.phpSmarty_Internal_Template) # 第 180 行，文件：C:\hatshop\libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.fetch("index.tpl", null, null, null, true) # 第 374 行，文件：C:\hatshop \libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.display("index.tpl") # 第 7 行，文件：C:\hatshop\index.phpSmarty_Internal_Template) # 第 180 行，文件：C:\hatshop\libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.fetch("index.tpl", null, null, null, true) # 第 374 行，文件：C:\hatshop \libs\smarty\sysplugins\smarty_internal_templatebase.php Smarty_Internal_TemplateBase.display("index.tpl") # 第 7 行，文件：C:\hatshop\index.php

我已经阅读了很多关于这个问题的帖子，但其中大多数都不清楚如何应用该解决方案，他们只是以非常不清楚的方式提出了一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-02T09:23:00.700

我有同样的错误通过添加解决它：

```
$this->error_reporting = E_ALL & ~E_NOTICE;
$this->muteExpectedErrors(); 
```

到我的 application.php

```
<?php

// Reference Smarty library
require_once SMARTY_DIR . 'Smarty.class.php';

/* Class that extends Smarty, used to process and display Smarty
  files */

class Application extends Smarty {

    // Class constructor
    public function __construct() {
        // Call Smarty's constructor
        parent::__construct();

       $this->error_reporting = E_ALL & ~E_NOTICE;
       $this->muteExpectedErrors();

        // Change the default template directories
        $this->template_dir = TEMPLATE_DIR;
        $this->compile_dir = COMPILE_DIR;
        $this->config_dir = CONFIG_DIR;
        $this->addPluginsDir(SMARTY_DIR . 'plugins');
        $this->addPluginsDir(PRESENTATION_DIR . 'smarty_plugins');
    }

}

?> 
```

请检查此链接：

[http://www.smarty.net/forums/viewtopic.php?t=21352&sid=88c6bbab5fb1fd84d3e4f18857d3d10e](http://www.smarty.net/forums/viewtopic.php?t=21352&sid=88c6bbab5fb1fd84d3e4f18857d3d10e)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:33:23.153

我也看到过这种错误，我认为它与模板_c 等 smarty 文件夹中设置的文件权限有关。因为 Smarty 会尝试判断我们是否可以使用 Cached 文件并尝试获取文件时间。请检查您的进程是否对文件夹具有正确的权限集

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:35:12.413

当注册的流包装类没有定义`url_stat`方法时会发生这种情况。文档中并不清楚，但 PHP stat 缓存需要此方法。

# php - 使用 ID 显示数据

> ID：15713415
> 
> 赞同：0
> 
> 时间：2013-03-30T00:18:37.367
> 
> 标签：php, mysql

![医生和预约表](../Images/8d92a2d0856f8281840df6d6f1c6a179.png)

我有两张桌子；预约表和医生表。我想使用 Doctor_id 将 Doctor 表（姓名和房间）中的信息回显到 Appointment 表中。到目前为止，我的代码看起来像这样

约会.php

```
<!DOCTYPE html>
<?php
session_start();
?>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
        </script>
        <script src="my.js">
        </script>
        <!-- User-generated css -->
        <style>
        </style>
        <!-- User-generated js -->
        <script>
            try {

    $(function() {

    });

  } catch (error) {
    console.error("Your javascript has an error: " + error);
  }
        </script>
     </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Book appointment
                </h3>
           </div>

           <div data-role="content">
                <h3>
                    Select date/time:
                </h3>
                <br />
     <?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["Patient_id"]); $query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {}
    {
        $row=mysql_fetch_array($result);
        $_SESSION['Appointment_date'] = $row['Appointment_date'];
        $_SESSION['Appointment_time'] = $row['Appointment_time'];
    }
}
?>  

        <strong>Dates available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select date--</option>
        <option value="1"><?php echo $_SESSION['Appointment_date'];?></option>
        </select>

        <br />
        <br />

        <strong>Times available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select time--</option>
        <option value="2"><?php echo $_SESSION['Appointment_time'];?></option>>
        </select>

        <br />
        <br />

                <label for="textarea1">
                Message GP
                </label>
                <textarea name="" id="textarea1" placeholder="">
                </textarea>

             </div>
        </div>
    </body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:20:12.220

您需要这样的查询：

```
selec * from Appointment ap
inner join Doctor doc
on (ap.Doctor_id=doc.Doctor_id)
where ap.Patient_id=$pid 
```

然后，这一行：

```
$query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid"; 
```

应该换成这个：

```
$query = "selec * from Appointment ap      
         inner join Doctor doc
         on (ap.Doctor_id=doc.Doctor_id)
         where ap.Patient_id=$pid"; 
```

萨卢多斯 ;)

# perl - 如何获取 Mojolicious::Lite 选择的端口？

> ID：15713422
> 
> 赞同：8
> 
> 时间：2013-03-30T00:19:11.920
> 
> 标签：perl, mojolicious

[Joel Berger 发布了这个小程序来启动一个 web 服务器来提供本地文件](http://blogs.perl.org/users/joel_berger/2013/01/a-quick-static-file-webserver.html)，它工作得很好：

```
use Mojolicious::Lite;

@ARGV = qw(daemon);

use Cwd;
app->static->paths->[0] = getcwd;

any '/' => sub {
    shift->render_static('index.html');
    };

app->start; 
```

我预先填充了命令行，`@ARGV`因为我忘了这样做。当它启动时，它会给出一条消息，告诉你它选择了哪个端口，如果可以的话，使用 3000：

```
$ perl ~/bin/mojo_cwd
[Fri Mar 29 19:14:09 2013] [info] Listening at "http://*:3000".
Server available at http://127.0.0.1:3000. 
```

我想以编程方式获取该端口，以便测试套件知道在哪里寻找它，而且我不想通过报废输出来做到这一点。我对此的任何实验都没有用，我认为我总是走错方向。似乎它在开始之前不会选择端口，一旦我调用`start`，它就结束了。

我也不想自己指定端口。

这不是一件紧急的事情。我有一个使用另一个简单的 HTTP 框架的当前解决方案，但如果可以的话，我一直在考虑用 Mojo 替换其中的大部分内容。由于旧的东西仍然有效，这真的只是一件好事，而不是我的方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T11:47:47.330

You can't, but the `daemon` command only binds to port 3000 and will not try anything else unless you tell it to. If you're using `Test::Mojo` you don't need to know the port in advance anyway, for anything else you can always wrap your application in a little `Mojo::Server::Daemon` script.

```
use Mojolicious::Lite;
use Mojo::IOLoop;
use Mojo::Server::Daemon;

get '/' => {text => 'Hello World!'};

my $port   = Mojo::IOLoop->generate_port;
my $daemon = Mojo::Server::Daemon->new(
  app    => app,
  listen => ["http://*:$port"]
);
$daemon->run; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-31T06:47:25.897

使用`--listen`您为应用指定收听位置的参数：

```
use Mojolicious::Lite;

@ARGV = qw(daemon --listen http://*:5000);

use Cwd;
app->static->paths->[0] = getcwd;

any '/' => sub {
    shift->render_static('index.html');
    };

app->start; 
```

您可以通过以下方式访问应用程序中的端口号`$self->tx->local_port`：

```
#!/usr/bin/env perl
use Mojolicious::Lite;

@ARGV = qw(daemon --listen http://*:5000);

use Cwd;
app->static->paths->[0] = getcwd;

any '/' => sub {
    my $self = shift;

    $self->render_text('port: '. $self->tx->local_port);
    };

app->start if $ENV{MOJO_MODE} ne 'test';

1; 
```

我喜欢测试`Mojolicious`应用程序，`Test::Mojo`因为您可以访问正在运行的应用程序，例如，在文件中`t/test_mojo.t`：

```
use strict;
use warnings;

use feature 'say';

use Test::More;
use Test::Mojo;

$ENV{MOJO_MODE} = 'test';

require "$FindBin::Bin/../test_mojo.pl";

my $t = Test::Mojo->new;
$t->get_ok('/')->status_is(200)->content_is('port: '.$t->tx->remote_port);

say 'local port: '. $t->tx->local_port; #as seen from the user-agent's perspective
say 'remote port:'. $t->tx->remote_port;
done_testing(); 
```

我不确定我是否正确理解了您要完成的工作，但我希望这对您有所帮助。

# javascript - 如何使用 node.js 下载视频 mp4 文件？

> ID：15713424
> 
> 赞同：1
> 
> 时间：2013-03-30T00:19:32.547
> 
> 标签：javascript, node.js, express

我想让用户从我的 AWS S3 存储桶中下载视频。视频格式为 MP4：

```
app.get("/download_video", function(req,res) {
    filename = "s3.xxx.amazon.com/bucketname/folder/video_example.mp4";
    // im stuck on what i can do here
}); 
```

有很多关于如何使用 nodejs 在线下载图像和文本文件的示例，但我在视频上找不到任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-12-17T09:43:21.137

```
use strict

const Fs = require('fs')
const Path = require('path')
const Listr = require('listr')
const Axios = require('axios')

function one (tasks) {

  tasks.run()
   .then(process.exit)
   .catch(process.exit)
}

if (process.argv) {

  const tasks = [{
    title: 'Downloading',
    task: async (ctx, task) => {
      const url = 'https://s3.xxx.amazon.com/bucketname/folder/video_example.mp4"'
      const path = Path.resolve(__dirname, 'media', 'video.mp4')

      const response = await Axios({
        method: 'GET',
        url: url,
        responseType: 'stream'
      })

      response.data.pipe(Fs.createWriteStream(path))

      return new Promise((resolve, reject) => {
        response.data.on('end', () => {
          resolve()
        })

        response.data.on('error', err => {
          reject(err)
        })
      })
    }
  }]

  one(new Listr(tasks))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-19T20:05:13.700

尝试这个

```
const fetch = require('node-fetch');
const fs = require('fs');

const response = await fetch(yourUrl);
const buffer = await response.buffer();

 fs.writeFile(`./videos/name.mp4`, buffer, () => 
   console.log('finished downloading video!')); 
```

# python - PANDAS：修剪多个数据框

> ID：15713427
> 
> 赞同：1
> 
> 时间：2013-03-30T00:19:38.780
> 
> 标签：python, for-loop, pandas

我想从几个数据帧中删除行，使它们的长度都为 n。当我尝试使用 -for- 循环时，更改不会持续到脚本的其余部分。

```
n = 50
groups = [df1, df2, df3]
for dataset in groups:
    dataset = dataset[:n] 
```

单独重新定义名称（例如， df1 = df1[:n] ）是可行的，但还有哪些替代方法？（通过python或pandas）

更重要的是，为什么 -for- 循环在这里不起作用？

熊猫 == 0.10.1 蟒蛇 == 2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:26:52.593

这是对 python 的轻微误解，而不是与 pandas 特定的误解有关。:)

您正在重新分配迭代中使用的变量，而不是在列表中更改它：

```
In [1]: L = [1, 2, 3]

In [2]: for i in L:
            i = i + 1

In [3]: L
Out[3]: [1, 2, 3] 
```

您想要实际更改列表：

```
In [4]: for i in range(len(L)):
            L[i] = L[i] + 1

In [5]: L
Out[5]: [2, 3, 4] 
```

或者也许在更好的语法中是使用`enumerate`：

```
In [6]: for i, x in enumerate(L):
            L[i] = x + 1     

In [7]: L
Out[7]: [3, 4, 5] 
```

那是：

```
for i, dataset in enumerate(groups):
    groups[i] = dataset[:n] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:06:53.850

```
n = 50
groups = [df1, df2, df3]
groups = [df.head(n) for df in groups] 
```

* * *

在 Python 中，您可以将变量名视为指向对象。该声明

```
groups = [df1, df2, df3] 
```

使变量名 ,`groups`指向一个包含 3 个其他对象的列表对象。

`for-loop`: _

```
for dataset in groups: 
```

创建一个新的变量名 ，`dataset`它*也*指向 内部的对象`groups`，在 Python 循环遍历循环时一次一个。

那作业

```
dataset = dataset[:n] 
```

**将变量名**重定向**`dataset`到一个新对象，`dataset[:n]`. 但是这个赋值不影响`groups`。该变量名称仍然指向`list`包含原始 DataFrame 的对象。**

 **要影响`groups`，您需要为`groups`with as 赋值语句分配一个新值，例如

```
groups = ... 
```

或为列表中的一个元素分配一个新值：

```
groups[i] = ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:38:06.160

`dataset`您的代码在 for 循环中创建（并丢弃）一个新变量。

试试这个：

```
n = 50
groups = [df1, df2, df3]
for dataset in groups:
    dataset[:] = dataset[:n] 
```**

# facebook - Facebook 在授权我的应用程序时总是返回错误

> ID：15713432
> 
> 赞同：0
> 
> 时间：2013-03-30T00:20:23.300
> 
> 标签：facebook, oauth, facebook-oauth

我正在尝试构建一个 Facebook 应用程序，但每次单击授权时，都会出现错误。

在代码中，我像这样调用 Facebook API：

```
https://www.facebook.com/dialog/oauth?
client_id=MY_APP_ID
&display=popup
&redirect_uri=http://www.my-url.com/823/
&scope=user_about_me 
```

但是浏览器没有授权用户，而是重定向到这个 URL： [https ://www.facebook.com/dialog/permissions.request](https://www.facebook.com/dialog/permissions.request)

我总是得到这个错误：

> 安全警告：与任何人共享上述 URL 与与他们共享您的 Facebook 密码相同 - 这将使他们能够访问您的 Facebook 帐户。尽管您可能得到了承诺，但您不会收到现金、礼品卡或免费机票来换取此 URL。

我的 Facebook 设置页面：http: [//i.stack.imgur.com/g9S9m.png](http://i.stack.imgur.com/g9S9m.png)

我究竟做错了什么？

任何帮助，将不胜感激！:)

**PS：**我只是尝试从画布页面（apps.facebook.com/my-app）的我网站的 URL（www.my-url.com/823/）更改“redirect_uri”，它可以工作。但我希望它重定向到我的网站，而不是画布页面。
我有另一个应用程序上周被 Facebook 删除。我尝试使用的域与删除的旧应用程序相同。Facebook 是否有可能将该域列入黑名单？还是我只是错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:41:08.303

您是否尝试用原始 URL 替换 « 使用 Facebook 登录的网站 »？（没有示例路径（823））

顺便说一句，不要忘记完成应用程序域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T11:22:07.967

问题是我的应用被 Facebook 删除了。发生这种情况时，Facebook 会将站点域置于黑名单中。解决方案是重定向到画布页面。

# android - 具有特定元素位置的布局

> ID：15713434
> 
> 赞同：0
> 
> 时间：2013-03-30T00:20:33.603
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

我有这个 layout.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="10dp"
        android:paddingLeft="10dp">
    <RelativeLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:padding="5dip"
        android:background="@color/white"
        android:layout_marginLeft="17dp"
        android:layout_marginRight="17dp">
         <LinearLayout android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:id="@+id/list_linearLayout">
            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">
                <!--  titre food -->
                <TextView android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:id="@+id/souscarte_element_titleT"
                android:textColor="@color/black"
                android:paddingLeft="5dp"/>

                 <!-- description food -->          
                <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal">
                    <TextView android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:textColor="@color/black"
                    android:id="@+id/souscarte_element_descT"
                    android:paddingLeft="5dp"/>
                    </LinearLayout>
                </LinearLayout>
            </LinearLayout>
            <!-- promo food -->
             <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:id="@+id/souscarte_element_promoT"
                android:gravity="right"
                android:textColor="@color/black"
                android:layout_alignParentRight="true"
                android:layout_toLeftOf="@+id/souscarte_element_prixT"
                android:paddingRight="5dp"/>
            <!--  price food -->
             <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textStyle="bold"
                android:id="@+id/souscarte_element_prixT"
                android:gravity="right"
                android:textColor="@color/black"
                android:layout_alignParentRight="true"
                android:layout_alignParentBottom="true"
                android:paddingRight="5dp"/>
    </RelativeLayout>
    </FrameLayout> 
```

这个的渲染在这里： ![在此处输入图像描述](../Images/8d5892ae39730734df35f431216d396c.png)

问题在红框上（在图片上）：当我有一个很大的内容（很多字）时，第二个价格（在底部）将自己放在底部，文本位于第一个价格和第二个价格之间。

我想知道如何让它保持在第一个价格的底部，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T06:52:50.853

请检查这个。希望这对你有帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="10dp"
    android:paddingRight="10dp" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="17dp"
        android:layout_marginRight="17dp"
        android:background="#FFFFFF"
        android:orientation="horizontal"
        android:padding="5dip" >
        <LinearLayout
            android:id="@+id/list_linearLayout"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.2"
                android:orientation="vertical" >
                <TextView
                    android:id="@+id/souscarte_element_titleT"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingLeft="5dp"
                    android:textColor="#000000"
                    android:textStyle="bold" />
                <TextView
                    android:id="@+id/souscarte_element_descT"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingLeft="5dp"
                    android:textColor="#000000" />
            </LinearLayout>
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0.8"
                android:orientation="vertical" >
                <TextView
                    android:id="@+id/souscarte_element_promoT"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingRight="5dp"
                    android:textColor="#000000"
                    android:textStyle="bold" />
                <TextView
                    android:id="@+id/souscarte_element_prixT"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:paddingRight="5dp"
                    android:textColor="#000000"
                    android:textStyle="bold" />
            </LinearLayout>
        </LinearLayout>
    </RelativeLayout>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:23:28.323

您已经设置`layout_align_parent_bottom="true"`了第二个价格，这就是为什么它保持在底部。将此更改为`layout_below="@+id/souscarte_element_promoT"`.

请注意，RelativeLayout 允许其子级重叠，因此如果您不小心安排子级的方式，它会将子级绘制在其他子级之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:23:53.690

您可以在主布局内嵌套两个布局...

一个用于文本，另一个用于价格

像这样的东西：

```
<LinearLayout 
    android:orientation="horizontal" >
    <LinearLayout       <!--For the texts-->
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView >
        <TextView >

    </LinearLayout>

   <LinearLayout <!--For the prices-->
        android:orientation="vertical" >

        <TextView >
        <TextView >

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T11:53:18.337

这是一件相当困难的事情，因为 TextView 不提供此功能。

但是，它仍然是可能的。

您可以扩展 TextView 并且当它应该显示文本时（不确定以哪种方法），您可以测量最后 2 行文本（可能使用[Paint.measureText](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.CharSequence,%20int,%20int%29)），以便知道放置价格 textView 的位置。

我说 2 是因为第一个会给你 Y 坐标，最后一个会告诉你它是否会在你放置 textview 的情况下换行，所以你需要在 Y 坐标上添加额外的内容。

另一种可能的解决方案是将价格作为文本放在描述 TextView 中。在此解决方案中，您还需要检查最后一行，以便知道是否需要创建新行或使用当前行，并且需要知道要放置多少空格。

无论如何，正如其他人所提到的，一种简单的方法是简单地将价格始终放在文本下方。

# java - Java Byte[] 到 String 的转换丢弃结束引号/奇怪的副作用

> ID：15713435
> 
> 赞同：-1
> 
> 时间：2013-03-30T00:20:53.443
> 
> 标签：java, string, datagram

我目前正在尝试对`DatagramPacket.getData()`调用结果执行一些正则表达式。

实现为`String myString = new String(thepkt.getData())`：

但奇怪的是，java 放弃了它用来封装所有数据的结束引号（见下面的链接图片）。

当我在调试会话期间单击变量检查器中的字段并且不更改任何内容时，当我单击变量字段时，它会再次自行更正，而无需我进行任何更改。它甚至以黄色突出显示可变检查字段以表示更改。它的值也显示为它仍然是一个字节数组而不是一个字符串对象

[http://i.imgur.com/8ZItsZI.png](http://i.imgur.com/8ZItsZI.png)

它抛弃了我的正则表达式，我看不到任何会导致它的东西。这是一个客户端服务器模拟，在客户端，getData 返回数据没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T08:55:33.440

我通过使用以下提供的解决方案使其工作：

[https://stackoverflow.com/a/8557165/1700855](https://stackoverflow.com/a/8557165/1700855)

但是我仍然不明白如何不将数据包的长度指定给 String 构造函数会导致它删除系统结束双引号。任何人都可以提供解释，因为我真的很想在继续之前了解我的问题的解决方案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T12:46:23.340

问题是您没有阅读 DatagramPacket.getData 的规范：

> 返回数据缓冲区。接收的数据或要发送的数据从`offset`缓冲区中的 开始，并运行`length`很长时间。

所以，为了正确，你应该使用

`new String(thepkt.getData(), thepkt.getOffset(), thepht.getLength())`

或者，不使用默认字符集：

`new String(thepkt.getData(), thepkt.getOffset(), thepht.getLength(), someCharset)`

# android - Eclipse 可以为 Android 项目自动生成不同的 DPI 图像吗？

> ID：15713437
> 
> 赞同：4
> 
> 时间：2013-03-30T00:21:00.473
> 
> 标签：android, eclipse, android-image

我正在尝试将我制作的 600x600 PNG 导入到我的 Android 项目中，以便可以在 Activity 中将其用作全尺寸图像。将其拖放到我的 /res 文件夹中只是将其放入该文件夹中，这当然会产生“无效的资源目录名称”错误。我可以将它放到任何 /res/drawable 文件夹中，并且效果很好，除非它只在那个文件夹中。当然，有一个内置工具可以获取我的图像并为每个 /res/drawable 文件夹适当地缩放它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T00:38:13.220

AFAIK 没有。

但是，您可以做的是`drawable-xhdpi`仅使用该文件夹。Android 会自动缩小以降低 dpi。

唯一的例外是启动器图标。您必须提供所有尺寸（不要忘记平板电脑的 xxhdpi！）。

[您可以在图标设计指南](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html)中找到所需的尺寸。

* * *

需要注意的是，ADT 插件确实有用于生成一些图标集的工具，例如 Launcher 图标、Actionbar 图标和 Notification 图标。

可以通过打开*新建*向导 (Ctrl + N) 并双击*Android*类别中的*Android 图标集来访问这些工具。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T00:47:08.670

> 有一个内置工具可以获取我的图像并为每个 /res/drawable 文件夹适当地缩放它。

对于缩放部分，请查看*Icon Generators Tools* @ [Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)。有用于生成启动器图标、选项卡图标、操作栏图标和（在您的情况下）通用图标的工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-29T16:38:49.947

幸运的是，这发生了变化 - 您现在可以自动生成不同的密度 - 看看： [https ://code.google.com/p/android-drawable-converter/](https://code.google.com/p/android-drawable-converter/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-30T00:23:23.890

如果你把你的可绘制资源放在 /res/drawable 中，该资源将用于所有设备。

但是，它可能不会完全符合您的要求。我建议您自己扩展资产。如果这不是一个可行的选择，那么您只能让 Android 为您进行缩放。*

# jdbc - 错误：找不到适合 jdbc:derby:CoffeeDB;create=true 的驱动程序

> ID：15713441
> 
> 赞同：3
> 
> 时间：2013-03-30T00:21:40.503
> 
> 标签：jdbc

我花了很长时间阅读以前的帖子，但似乎没有一个对我有帮助。我正在尝试从 NetBeans 运行一个简单的 Java 应用程序，这里是最简单的代码：

```
final String DB_URL = "jdbc:derby:CoffeeDB;create=true";         
try
  {
     // Create a connection to the database.
     Connection conn = DriverManager.getConnection(DB_URL);

     // If the DB already exists, drop the tables.
     dropTables(conn);

     // Build the Coffee table.
     buildCoffeeTable(conn);

     // Close the connection.
     conn.close();
  }
  catch (Exception ex)
  {
     System.out.println("ERROR: " + ex.getMessage());
  } 
```

* * *

通常是环境变量引起了麻烦，但我已经检查过了，它们似乎设置正确：

类路径：C:\Program Files\Java\jdk1.7.0_17\db\lib\derby.jar；C:\Program Files\Java\jdk1.7.0_17\db\lib\derbytools.jar；

DERBY_HOME C:\Program Files\Java\jdk1.7.0_17\db

PATH：（仅关于 jdbc 的部分） C:\Program Files\Java\jdk1.7.0_17\db\bin

我已经在命令提示符下使用 ij 创建了一个表并且它有效，当我尝试通过 Netbeans 运行它时，我收到此错误。不过有趣的是，当我从命令提示符运行 sysinfo 时，它会像这样出现：

------------------ Java 信息​​ ------------------

Java版本：1.7.0_17

Java 供应商：甲骨文公司

Java 主页：C:\Program Files\Java\jre7

Java 类路径：C:\Program Files\Java\jdk1.7.0_17\db\lib\derby.jar;C:\Program Files\Java\jdk1.7.0_17\db\lib\derbytools.jar;C:\Program Files \Java\jdk1.7.0_17\db/lib/derby.jar;C:\Program Files\Java\jdk1.7.0_17\db/lib/derbynet.jar;C:\Program Files\Java\jdk1.7.0_17\ db/lib/derbyclient.jar;C:\Program Files\Java\jdk1.7.0_17\db/lib/derbytools.jar

操作系统名称：Windows Vista

操作系统架构：amd64

操作系统版本：6.0

---> 如您所见，不知何故，更多信息被添加到先前的类路径中，并且 derbytools.jar 和 derby.jar 出现了两次？结合反斜杠？？

通过 NetBeans 调试时，异常来自 DriverManager.java 文件中的这一行：

```
 Connection con = aDriver.driver.connect(url, info);     <--------------- here
    if (con != null) {
          // Success!
          println("getConnection returning " + aDriver.driver.getClass().getName());
          return (con);
    } 
```

url 是正确的：jdbc:derby:CoffeeDB;create=true 但连接返回 null 并引发 SQLexception。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:31:14.320

异常消息*“没有找到合适的驱动程序...”*意味着没有加载的 JDBC 驱动程序接受 URL。这使得 JDBC 驱动程序很可能根本不包含在应用程序的类路径中

The environment variable `CLASSPATH` is almost always ignored when a java application is run from an IDE, and always if run from an executable jar. Make sure that the build-path in the IDE actually contains derby.jar, or if it is an executable jar, that it is listed in the `META-INF/manifest.mf` in the `Class-Path` attribute.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T01:21:20.213

you can right click the project and do the following steps...Build -> Configure Build Path -> Libraries -> Add External Jar... now you have to specify the path to the *.jar file. simple example [https://github.com/mraab89/Tutorial_Java_Database_Connectivity_JDBC](https://github.com/mraab89/Tutorial_Java_Database_Connectivity_JDBC)

# c++ - SDKDDKVer.h 丢失？

> ID：15713445
> 
> 赞同：2
> 
> 时间：2013-03-30T00:22:28.683
> 
> 标签：c++, visual-studio-2012

`SDKDDKVer.h`我刚刚在 Windows 7 上进行了全新安装的 Visual Studio 2012 安装，但在我的光盘上找不到任何位置。我已经[为 Windows 7 和 .NET Framework 4 安装了 Microsoft Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。但是，该`C:\Program Files (x86)\Microsoft SDKs\Windows\`文件夹不包含任何`include`文件夹。

我会错过什么？

# php - 仅在尚未回显时才回显？

> ID：15713448
> 
> 赞同：0
> 
> 时间：2013-03-30T00:22:44.747
> 
> 标签：php, arrays

我想要做的是从表单中创建一个条目列表，但是如果在表单中多次输入相同的条目，我不希望在列表中多次显示相同的条目。例如，假设一个人输入“1”，然后两个人输入“2”，我只希望 2 在列表中出现一次。我可以为此使用什么功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:30:19.140

最好的方法应该是将所有条目存储在一个数组（基本数字索引数组）中，然后删除重复项

```
uniqueEntries = array_unique($yourEntries); 
```

文档：[array_unique](http://php.net/array_unique)

代码示例：

```
$entries = array();
$entries[] = 1;
$entries[] = 1;
$entries[] = 2;

$entries = array_unique($entries);

print_r($entries); 
```

将输出：

```
Array
(
    [0] => 1
    [2] => 2
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:21:51.923

在这种情况下，您应该使用[PHP Arrays](http://www.php.net/manual/en/book.array.php)。数组是二维表。

```
/* Array
 * key => value
 * @key personID
 * @value optionValue
 */
$array = array(
    1 => 1, // Person 1 chose Option 1
    2 => 2, // Person 2 chose Option 2
    3 => 2  // Person 3 chose Option 2
);
print_r($array); 
```

印刷

```
Array
(
    [1] => 1 
    [2] => 2 
    [3] => 2
) 
```

您现在可以通过访问数组来获取一组唯一值[`array_unique($array);`](http://www.php.net/manual/en/function.array-unique.php)。

```
$array_unique = array_unique($array);
$array_unique_values = array_values($array_unique);

// Access array values directly and store into variables.
// Notice that arrays in PHP start with the index zero.
$option1 = $array_unique_values[0];
$option2 = $array_unique_values[1];

echo "Option #1: " . $option1 . "\n";
echo "Option #2: " . $option2; 
```

印刷

```
Option #1: 1
Option #2: 2 
```

瞧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:29:08.907

您在 PHP 中没有内置函数。但是您可以尝试以下方法：

```
$echoList = array();
function echoOnce( $text )
{
   global $echoList;
   if(!in_array($text, $echoList)) {
      echo $text;
      $echoList[] = $text;
   }
} 
```

然后只需使用`echoOnce( "whatever" )`而不是`echo "whatever"`

# javascript - 编码 HTML 实体

> ID：15713449
> 
> 赞同：4
> 
> 时间：2013-03-30T00:22:53.770
> 
> 标签：javascript, jquery, html, encode, html-entities

我正在解析来自 feedburner 的一些数据，其中包含 HTML 实体。我正在尝试使用 jQuery 对 HTML 实体进行编码，如下所示：

```
var encodedStr = data['1']['result']['content']; // content with HTML entities
$("#content").html(encodedStr).text(); 
```

但没有结果。

这是它的解析：http: [//jsbin.com/ihadam/1/edit](http://jsbin.com/ihadam/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:48:45.403

基本上，您应该将您的 html 实体编码为 html，如下所示：

```
var encodedStr = data['1']['result']['content'];
var a = $("#content").html(encodedStr).text(); 
```

然后获取编码文本并将其作为 html() 应用，如下所示：

```
$("#content").html(a); 
```

那应该行得通。

**演示：http:** [//jsbin.com/ihadam/9/edit](http://jsbin.com/ihadam/9/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-26T13:08:39.423

您可以使用纯 JavaScript 函数来节省 JQuery 的臃肿。

有时你只想对每个字符进行编码......这个函数替换了 regxp 中的“除了没有什么之外的一切”。

```
function encode(e){return e.replace(/[^]/g,function(e){return"&#"+e.charCodeAt(0)+";"})} 
```

```
function encode(w) {
  return w.replace(/[^]/g, function(w) {
    return "&#" + w.charCodeAt(0) + ";";
  });
}

test.value=encode(document.body.innerHTML.trim());
```

```
<textarea id=test rows=11 cols=55>www.WHAK.com</textarea>
```

# c++ - 为 Bejeweled 游戏推荐改进的匹配查找算法？

> ID：15713452
> 
> 赞同：7
> 
> 时间：2013-03-30T00:23:14.150
> 
> 标签：c++, arrays, algorithm, search

我正在尝试确定一种合理的方法来为每行和每列查找 3、4 或 5 个匹配项。玩家在游戏板上寻找相同的“宝石”区域（行或列），在交换两个相邻的块（每轮交换一个）后，重复 3-5 个连续点。

这是一个匹配移动的示例场景：

*   *玩家移动前的棋盘（粗体是必要的交换）*：

    ACBBC

    DDBAD

    DAACC

    **工商**管理硕士

    DCDAA

*   *玩家移动后棋盘（粗体为结果匹配）*：

    ACBBC

    **D** DBAD

    **DAACC** _

    **D**阿巴

    **D** CDAA

在此示例中，第一行之后的第一列中有 4 个匹配的“D”。我试图弄清楚如何在 1.) 游戏开始时创建棋盘并且棋盘随机化多次以消除即时匹配，以及 2.) 在玩家移动之后找到这样的匹配。如果工作正常，程序将能够在程序本身或玩家进行正确交换后检测到匹配。

我尝试的每个算法都导致循环超出范围和/或在交换后不正确地找到所有结果匹配。我的意思是，程序有时会尝试在数组之外搜索，因为我没有成功地告诉程序如何根据当前位置的位置“调整”其数组搜索。即使它不会导致运行时错误，它仍然会显示不正确的结果。例如，玩家会看到棋盘上至少显示了一场*完整*的比赛，这是不好的。

以下是我尝试过的两个程序的解释：

*   **以下空格**。从当前位置，**向前**检查同一行中的四个空格（如果该行中剩余的空格少于四个，则检查更少）。首先检查五个匹配，包括当前位置；如果没有，检查四个（减去一个点）；如果没有，检查三个（减去一个点）；如果没有，则找不到匹配项。**对下面**的列重复相同的检查。

*   **前面的空格。****从** 当前位置开始，检查同一行中的四个空格（如果行中的第一个位置和当前位置之间的空格少于四个，则检查更少）。首先检查五个匹配，包括当前位置；如果没有，检查四个（减去一个点）；如果没有，检查三个（减去一个点）；如果没有，则找不到匹配项。**对上列**重复相同的检查。

这是需要这种工作算法的主要功能。此处使用我的 Gem 类（当前已损坏）可能对请求并不重要，因此除非有帮助，否则我不会添加它。

```
bool Board::findMatches(bool scoringMove) // false if board is being setup before game
{
    bool matchesFound = false;

    // loops through entire board, where "size" is the width, not the number of spots
    for (int i = 0; i < size.getSize()*size.getSize(); i++)
    {
        // loops for each type of Gem, six total (_not identical to given example_)
        for (int k = 0; k < gems.getNumGems(); k++)
        {
            Gem traverseGems(k); // next Gem (in sequence)
            char nextGem = traverseGems.getGem(); // next Gem set to a char

            // ROWS check
            // default match search for 3-match
            if ((i < (size.getSize()*size.getSize())-4)
            && (board[i]->getGem() == nextGem)
            && (board[i+1]->getGem() == nextGem)
            && (board[i+2]->getGem() == nextGem))
            {
                // if the player is making a move
                if (!scoringMove)
                    return true;

                matchesFound = true;

                // just adds points to score; irrelevant to algorithm
                scoreMatches(3, 'R', i, 3);

                // no 4-match, but a 3-match
                if (board[i+3]->getGem() != nextGem)
                    scoreMatches(3, 'R', i, 3);
                else
                    scoreMatches(4, 'R', i, 4);

                // 5-match found
                if (board[i+3]->getGem() == nextGem && board[i+4]->getGem() == nextGem)
                    scoreMatches(5, 'R', i, 5);
            }

            // COLUMNS check (comments for rows check apply here as well)

            if ((i <= (size.getSize()-1))
            && (board[i]->getGem() == nextGem)
            && (board[i+size.getSize()]->getGem() == nextGem)
            && (board[i+(size.getSize()*2)]->getGem() == nextGem))
            {
                if (!scoringMove)
                    return true;

                matchesFound = true;

                scoreMatches(3, 'C', i, 3);

                if (board[i+(size*3)]->getGem() != nextGem)
                    scoreMatches(3, 'C', i, 3);
                else
                    scoreMatches(4, 'C', i, 4);
                if (board[i+(size*3)]->getGem() == nextGem && board[i+(size*4)]->getGem() == nextGem)
                    scoreMatches(5, 'C', i, 5);
            }
        }
    }

    return matchesFound;
} 
```

**板子.h**

```
#ifndef BOARD_H
#define BOARD_H

#include "Size.h"
#include "Score.h"
#include "Move.h"
#include "Gem.h"

#include <iostream>
#include <iomanip>
#include <ctime>

class Board
{
private:
    Size size;
    Score score;
    Gem **board;
    bool moreSwaps;

    void swapGems(Move);
    void swapGems(int, int);
    void setNewRandGem(int);
    void findMoreSwaps();
    void scoreMatches(int, char, int, int);
    bool findMatches(bool);

public:
    Board();
    Board(Size, Score&);
    ~Board();
    void displayBoard() const;
    bool isMatch(Move);
    bool moreMovesFound() const;
};

#endif 
```

**板构造器**

```
Board::Board(Size size, Score &score)
{
    srand((unsigned int)time(NULL)); // I can always move this to main()

    this->size = size;
    this->score = score;

    board = new Gem *[size.getSize()*size.getSize()];

    for (int i = 0; i < size.getSize()*size.getSize(); i++)
        board[i] = new Gem;

    //This is the "pre-game" block.
    //As long as the program finds a new match after performing its
    //own swaps, it'll randomize the entire board and start over again.
    //This is incredibly unefficient, but I will try to fix it later.
    do
    {
        for (int i = 0; i < size.getSize()*size.getSize(); i++)
            setNewRandGem(i);

    } while (findMatches(false));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T23:40:29.947

重新阅读更新后的问题后，我*认为*您的目标是测试对于给定的 5x5 板，是否存在两个相邻符号的任何可能交换，这将产生一行或列中具有 3 个或更多相同符号的板。

如果之前的尝试产生了越界错误，那将意味着实现中的错误，而不是算法中的错误。因此，使用不同的算法无法解决该问题，您仍然需要实施适当的数组边界检查。没有办法解决这个问题，但从好的方面来说，这并不是特别难。在访问数组之前，只需检查每个索引是否小于零或大于数组维度大小。如果是，请追溯您的程序用于获取该值的步骤，并找到必须存在的错误。

当然，如果程序除了越界错误之外还产生错误的结果，那么你的算法也*可能*是错误的。

话虽如此，我仍然不确定我是否理解您描述的算法，但对于这个问题来说，它们似乎太复杂了。除非您需要每秒评估数千块板，否则简单的蛮力算法就足够了。只需尝试所有可能的交换，并为每次交换检查板是否在一行或一列中包含 3 个或更多相同的符号。

这是伪代码的描述：

```
function is_there_a_valid_move(board)
// returns true if there is a valid bejewelled move

   // test all horizontal swaps
   for (x = 0; x++; x< board-width - 1):
      for (y = 0; y++; y < board-height):
         make a copy of the board: board2
         swap board2[x,y] and board2[x+1,y]
         check_matches(board2, 3)
         if match found: return true

   // test all vertical swaps
   for (x = 0; x++; x< board-width):
      for (y = 0; y++; y < board-height - 1):
         make a copy of the board: board2
         swap board2[x,y] and board2[x,y+1]
         check_matches(board2, 3)
         if match found: return true

   return false

function check_matches(board, num_matches)
// returns true if there are num_matches or more of the same symbol in a row or column

   // check rows
   for (y = 0; y++; y < board-height):
      consecutive_symbols = 0
      for (x = 0; x++; x< board-width - 1):
         if board[x,y] == board[x+1,y]: consecutive_symbols++
         else: consecutive_symbols = 0
         if consecutive_symbols >=num_matches: return true

   // check columns
   for (x = 0; x++; x< board-width):
      consecutive_symbols = 0
      for (y = 0; y++; y < board-height - 1):
         if board[x,y] == board[x,y+1]: consecutive_symbols++
         else: consecutive_symbols = 0
         if consecutive_symbols >=num_matches: return true     

   return false 
```

这当然不是最快的方法，但对于 5x5 板来说，其他一切都过大了。

# amazon-web-services - 文件和其他配置如何在新的 Beanstalk 实例之间复制？

> ID：15713462
> 
> 赞同：1
> 
> 时间：2013-03-30T00:23:55.140
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk, windows-server-2012

除其他外，每个实例都需要有越来越多的主机作为 IIS 中的绑定。除了 Beanstalk 的意图之外，还需要进行其他操作系统配置，但我相信问题的答案是相同的。

所以我的问题很简单，新实例是如何创建的？它们是否与仅使用我的应用程序启动一个新的默认实例一样基本，或者新实例是否与其他实例（我的最小实例）具有所有相同的自定义 IIS 绑定/操作系统配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:59:23.633

Elastic beanstalk 通过以下方式创建新实例： 1\. 根据环境配置中定义的 ami 创建新实例。在创建的实例上： 2\. 当实例创建时，在实例上运行引导脚本以对其进行设置。3\. 从 s3 当前版本的应用程序包下载。4\. 运行从 .ebextentions 运行配置文件并执行应用程序部署的弹性 beanstalk 钩子。5\. 应用程序启动并运行:)

# jquery - 如何从 jQuery 中序列化对象获得正确的 json 结构？

> ID：15713468
> 
> 赞同：-3
> 
> 时间：2013-03-30T00:24:50.680
> 
> 标签：jquery, json, serialization

如何通过序列化 jquery 中的对象获得正确的 json 结构？

我的代码如下所示：

```
<form id="myform">
<input name="Name[OrganizationName]" id="OrganizationName" />
</form> 
```

输出如下内容：

```
"Name[OrganizationName]": "Bill"} 
```

但我想要这个：

```
"Name":{"OrganizationName":"Bill"} 
```

这是我的序列化js：

```
$.fn.serializeObject = function(){
var o = {};
var a = this.serializeArray();
$.each(a, function() {
    if (o[this.name]) {
        if (!o[this.name].push) {
            o[this.name] = [o[this.name]];
        }
        o[this.name].push(this.value || '');
    } else {
        o[this.name] = this.value || '';
    }
});
return o;
}; 
```

我通过以下方式调用它：

```
$("#form-add-po").serializeObject(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:50:41.693

```
$.fn.wrongLogic = function () {
    var o = {};
    this.find('input').each(function () {
        if (this.name.indexOf('[') > -1) {
            var prop = this.name.match(/\[(\w+)\]$/)[1],
                mainProp = this.name.split('[')[0],
                n = {},
            if (o.hasOwnProperty(mainProp)) {
                o[mainProp][prop] = this.value;
            } else {
                n[prop] = this.value;
                o[mainProp] = n;
            }
        } else {
            o[this.name] = this.value;
        }
    })
    return o;
}; 
```

[http://jsfiddle.net/h2jE5/1/](http://jsfiddle.net/h2jE5/1/)

# concrete5 - 具体5 - 编辑模式下的jQueryUI

> ID：15713469
> 
> 赞同：0
> 
> 时间：2013-03-30T00:24:52.630
> 
> 标签：concrete5

我使用依赖于 jQueryUI 的轮播插件。要加载它，我只需使用来自市场的[加载 jQueryUI 插件。](http://www.concrete5.org/marketplace/addons/load-jquery-ui/)

编辑 - 更准确地说。会发生什么：

A.`problematic.js`直接加载时 - 没有任何`if`：当用户登录并且顶部栏（“编辑”，“仪表板”）的内容消失时轮播不起作用，因此甚至无法进入编辑模式

B. 当`problematic.js`装载有这样的条件时：

```
if (!$c->isEditMode()){ ?>
    <script type="text/javascript" src="problematic.js"></script>
<?php } ?> 
```

完全如上：当用户登录并且顶部栏（“编辑”，“仪表板”）的内容消失时轮播不起作用，因此甚至无法进入编辑模式

C. 当`problematic.js`装载有这样的条件时：

```
<?php $u = new User();
if (!$u->isRegistered()){ ?>
    <script type="text/javascript" src="problematic.js"></script>
<?php } ?> 
```

顶部栏的内容存在，可以将页面变为编辑模式，但显然用户登录时不执行js文件。

但这不是我需要的 - 我希望我的脚本在以下情况下工作：

1.  用户未登录，
2.  用户已登录网站，但页面未处于编辑模式。

我希望仅在页面处于编辑模式时不执行脚本。

我应该如何实现这一目标？

编辑：这是 PHP/HTML 代码的一部分：

```
<?php 
    defined('C5_EXECUTE') or die(_('Access Denied.'));
?> 
<!DOCTYPE html>
<html>
    <head>
        <?php Loader::element('header_required');?>
        <script type="text/javascript" src="<?php print $this->getThemePath(); ?>/js/respond.min.js"></script>
        <script type="text/javascript" src="<?php print $this->getThemePath(); ?>/js/jquery.ui.rcarousel.min.js"></script>
        <?php $u = new User();
    if (!$u->isRegistered()){ ?>
        <!-- To prevent conflicts with C5 jQuery UI when in edit mode -->           
        <script type="text/javascript" src="<?php print $this->getThemePath(); ?>/js/home.js"></script>
    <?php } ?>
        <link rel='stylesheet' type='text/css' href="<?php print $this->getStyleSheet('css/style.css'); ?>" />
        <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1' />
    </head>
    <body <?php  if ($c->isEditMode()) { ?> class='editmode' <?php  } ?>>
        <div class='c5wrapper'>
             <div id='container'>
                 <div id='content-promo' class='content-promo full-width'>
                     <div id='carousel-wrapper' class='content-promo carousel-wrapper'>
                         <?php
                            $a = new Area('Carousel');
                            $a->display($c);
                         ?>
                     </div>  <!-- End of carousel wrapper -->

                     <a href='#' id='ui-carousel-prev' class='carousel-controls'><span class='carousel-control-text'>Prev</span></a>
                     <a href='#' id='ui-carousel-next' class='carousel-controls'><span class='carousel-control-text'>Next</span></a>

                 </div>  <!-- End of content promo -->
<?php $this->inc('elements/footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:05:47.623

第一个代码示例如何不起作用？它不做你所擅长的吗？或者它什么都不做？假设它在功能上有效（即，在不处于编辑模式时添加该标签），那么您想要做的完整解决方案将是：

```
<?php $u = new User();
if ($u->isRegistered() && ! $c->isEditMode()) { ?>
    <script type="text/javascript" src="problematic.js"></script>
<?php } ?> 
```

如果第一个代码示例不起作用，则可能 $c 已被重新定义，或者其他同样不太可能的东西......

# jquery - 使用 content_for 和 ajax/Jquery 部分更新网页

> ID：15713470
> 
> 赞同：4
> 
> 时间：2013-03-30T00:25:19.353
> 
> 标签：jquery, ajax, perl, mojolicious

多亏了这个网站上那些人的大力帮助，我一直在慢慢学习 Mojolicious 和 Perl。我一直在尝试根据 Jquery get 调用的结果来确定动态更新部分页面的最佳方法。

目前我有一个这样的模板（感谢 Mojo 的贡献者之一 Joel）

```
<!DOCTYPE html>
<html>
 <head>
  <title><%= title %></title>
 </head>
 <body>
  %= content
  %= include 'common_js'
  %= content_for 'js_imports'
 </body>  
</html> 
```

然后我有一个使用这种布局的页面，如下所示。

```
%title 'Script Test'; 
% content_for 'js_imports' => begin 
%= javascript begin 
  $(document).ready(function(){ 
    $("input#testbutton").click(function(){ 
      $.get('<%= url_for('testbutton') %>', 
        function (data) { 
            $("div#content").html(data);  
         }); 
      }) 
   }); 
 % end 
 % end 

<p>Main Page</p> 
<input type="button" id="testbutton" class="btn btn-danger" value="test"> 
<div class="span9" id="content"></div><!--/span9--> 
```

因此，当单击“测试按钮”时，我正在将 get 请求的响应写入带有 id 内容的 div。

我要返回的“数据”是；

```
% content_for 'js_imports' => begin 
  %= javascript begin 
    $(document).ready(function(){ 
      $("input#testbutton2").click(function(){ 
        alert('testbutton2 clicked'); 
    }); 
    }); 
  % end 
% end    

<p>Test Button Clicked</p> 
<input type="button" id="testbutton2" class="btn btn-danger" value="test2"> 
```

现在，我上面的 javascript 没有嵌入到我的页面中。我认为这是因为 content_for js_imports 不再存在于 DOM 中。我可以在我的测试页中添加一个“content_for”标签，然后将脚本添加到我的带有 ID 内容的 DIV 中。我试图以某种方式实现的是将我的脚本添加到我现有脚本下的页面末尾。我知道我可以使用 javascript 添加和删除脚本，但我想知道是否有办法使用标签助手来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:29:18.987

无需将您返回的数据包含在 content_for 块中。直接包含它：

```
%= javascript begin 
  $(document).ready(function(){ 
    $("input#testbutton2").click(function(){ 
      alert('testbutton2 clicked'); 
  }); 
  }); 
% end 

<p>Test Button Clicked</p> 
<input type="button" id="testbutton2" class="btn btn-danger" value="test2"> 
```

如果您不希望它替换现有内容，而只是附加到它，则使用`append`而不是`html`：

```
$("div#content").append(data); 
```

Joel Berger（在评论中）创造了一个很好的[馅饼](http://pastie.org/7168297)来展示你想要的东西。

# ios - 登录 Twitter 后如何获取 oauth 令牌？

> ID：15713472
> 
> 赞同：2
> 
> 时间：2013-03-30T00:25:47.770
> 
> 标签：ios, objective-c, cocoa-touch, twitter, oauth

登录 Twitter 后，我可以打印出一些有用的数据，例如用户名和用户 ID。但是，OAuth 令牌始终为空。我如何得到它？我需要将 OAuth 令牌发送到我的服务器，以便它可以验证用户确实是他所说的那个人。

```
ACAccountStore* accountStore = [[ACAccountStore alloc] init];
ACAccountType* twitterType = [self.context.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
[accountStore
    requestAccessToAccountsWithType:twitterType
    withCompletionHandler:^(BOOL isAllowed, NSError* error) {
        dispatch_sync(dispatch_get_main_queue(), ^(void) {
            if (isAllowed) {
                ACAccount* account = [[self.context.accountStore accountsWithAccountType:[self.context.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter]] lastObject];
                NSLog(@"username = %@", account.username);
                NSLog(@"user_id = %@", [[account valueForKey:@"properties"] valueForKey:@"user_id"]);
                // ouath token is always null
                NSLog(@"oauth token = %@", account.credential.oauthToken);
            }
        });
    }
]; 
```

我“*认为*”我需要[Reverse Auth](https://dev.twitter.com/docs/ios/using-reverse-auth)，但该教程神秘地遗漏了“第 1 步”的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:12:18.823

您确实需要使用反向身份验证。

我最近使用了[Sean Cook 的 TWReverseAuth](https://github.com/seancook/TWReverseAuthExample)，效果很好。请注意为目录中的单个文件关闭 ARC `Vendor`。

# opengl-es - 纹理没有动画

> ID：15713473
> 
> 赞同：0
> 
> 时间：2013-03-30T00:25:52.120
> 
> 标签：opengl-es, opengl-es-2.0

我知道我做错了什么，很明显。无论如何，我已经编写了一些代码来尝试让我的纹理动画化，但并不确定出了什么问题或我做错了什么。

这是加载到我的纹理中的代码：

```
 if(PVRTTextureLoadFromPVR(c_szTextureFile, &m_uiTexture[0]) != PVR_SUCCESS)
    {
        PVRShellSet(prefExitMessage, "ERROR: Cannot load the texture\n");
        return false;
    }
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    //This loads in the second texture
    if(PVRTTextureLoadFromPVR(c_szTextureFile2, &m_uiTexture[1]) != PVR_SUCCESS)
    {
        PVRShellSet(prefExitMessage, "ERROR: Cannot load the texture2\n");
        return false;
    }
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); 
```

这是我的计时器功能，它试图更新纹理坐标

```
int time_Loc = glGetUniformLocation(m_ShaderProgram.uiId, "Time"); //This stores the location of the uniform
float updateTexture;
float timeElapsed = difftime(time(NULL), Timer) * 1000;
if(timeElapsed > 16.0f)
{
    glUniform1f(time_Loc, updateTexture++); // passes the updated value to shader
} 
```

这是我将数据传递给的着色器

```
uniform sampler2D  sTexture; 
```

统一的sampler2D sTexture2；

不同的mediump vec2 TexCoord；不同的mediump vec2 TexCoord2;

```
//This gets updated within the main code
uniform highp float Time;

void main()
{
    mediump vec4 tex1 = texture2D(sTexture, TexCoord + Time);
    mediump vec4 tex2 = texture2D(sTexture2, TexCoord2 + Time); 

    gl_FragColor = tex2 * tex1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:30:29.180

texture2D 的第二个参数是从 0->1 裁剪的，它不是绝对值或像素值。你有一个 TexCoord，而我假设也在 (0->1, 0->1) 范围内。然后，您将通过 updateTexture++“添加”一个浮点值，该值在您的 C 代码中递增。它也没有被初始化！

尝试更多类似的东西：

```
 float updateTexture = 0.0f;
  ...
  if(timeElapsed > 16.0f)
  {
    updateTexture += 0.01; // arbitrary increment
    if(updateTexture > 1.0) updateTexture = 0.0f;  // wrap, if you want
    glUniform1f(time_Loc, updateTexture); // passes the updated value to shader
  } 
```

然后在你的着色器中做一些比向 vec2 添加浮点数更明确的事情：

```
 ...
  mediump vec4 tex1 = texture2D(sTexture, vec2(TexCoord.x + Time, TexCoord.y + Time));
  ... 
```

# arrays - 取消定义对函数的引用

> ID：15713475
> 
> 赞同：0
> 
> 时间：2013-03-30T00:26:14.957
> 
> 标签：arrays, function, reference, undefined, structure

嗨，这是我第一次在这里发帖，我对编码比较陌生，所以我遇到了很多问题。大多数时候我可以自己学习如何修复错误，但现在我想我只是遇到了数组和结构的主要障碍。目前，编译时会给我

```
undefined reference to `buildArrays(std::string, int, int, int)' 
```

问题是，每次我尝试在 main 函数中“修复”buildArray 调用者时，我都会遇到这个错误，将字符串 PlaName 更改为 char PlaName [25] 在结构 Players 中以某种方式工作但不会改变错误。无论如何我可以尝试更改代码，以便数组可能会从一个函数调用到另一个函数？我为这个错误查找的大多数信息主要是关于链接器，这没有帮助。

顺便说一句，我的作业要求我从文件创建一个数组，从函数中调用它，在主函数中，并在其余的主函数中使用该数组。我不知道该程序是否有效，因为我无法通过未定义的引用错误。这里大部分的程序：

```
using namespace std;

struct Players
{
    string PlaName;
    int PlaGoal;
    int PlaAssist;
    int Points;
};

int buildArrays( string, int, int, int);
void printArrays( string, int, int, int, int);
void sortArrays( string, int, int, int, int);

int main()
{
Players player;

   buildArrays(player.PlaName,player.PlaGoal,player.PlaAssist,player.Points); //this is the error

  cout<<"Chicago Blackhawks UNSORTED Report;";

}

int buildArrays( string playerNames[], int goals[], int assists[], int rating[] ) //this function's format is required for the homework
{
    ifstream inFile;

    inFile.open("hockey.txt");
    if (inFile.fail())
        {
        cout<<"The hockey.txt input file did not open";
        exit(-1);
        }

    while (inFile)
        for(int i = 0; i <= 25; i++)
        {
        inFile >> playerNames[i]
               >> goals[i]
               >> assists[i]
               >> rating[i];
        cout<<playerNames[i]<<goals[i]<<assists[i]<<rating[i];
        }
        inFile.close();
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:35:01.043

问题似乎是您的 buildArrays 函数原型与您的函数定义不匹配。您的函数接受数组，但您的原型不使用数组语法。将您的原型更改为如下所示：

```
buildArrays( string[], int[], int[], int[] ) ; 
```

Also your main() function needs to pass in arrays into the buildArrays() function. Creating a single struct and passing each member will not be sufficient. Perhaps you need to rework how you organize your data if you have to use the buildArrays() function format for your homework. Perhaps create separate arrays for each piece of player data and then create an array of structs after calling buildArrays().

# css - 在我的 Rails 应用程序中使用 Twitter Bootstrap，缺少标记

> ID：15713477
> 
> 赞同：3
> 
> 时间：2013-03-30T00:26:41.240
> 
> 标签：css, ruby-on-rails, ruby, twitter-bootstrap, less

通过在我的 Gemfile 中添加以下内容，我安装了支持较少的 twitter-bootstrap-rails gem：

```
 gem 'therubyracer'
  gem 'less-rails'
  gem 'twitter-bootstrap-rails' 
```

运行捆绑安装后，我继续运行生成器：

```
rails generate bootstrap:install static 
```

我在 app/assets/stylesheets/ 中的 application.css 包含以下内容：

```
 *= require_self
 *= require_tree . 
```

如果我查看源代码，我会在那里看到以下内容：

```
<link href="/assets/bootstrap_and_overrides.css?body=1" media="all" rel="stylesheet" /> 
```

所以就在那里。然后我开始使用 Grid 系统并添加标记`show-grid`并注意到它没有样式。我继续在我的 bootstrap_and_override.css.less 文件中添加以下内容：

```
@import "twitter/bootstrap/reset.less";
@import "twitter/bootstrap/variables.less";
@import "twitter/bootstrap/mixins.less";
@import "twitter/bootstrap/scaffolding.less";
@import "twitter/bootstrap/grid.less";
@import "twitter/bootstrap/layouts.less";
@import "twitter/bootstrap/type.less";
@import "twitter/bootstrap/forms.less";
@import "twitter/bootstrap/wells.less";
@import "twitter/bootstrap/component-animations.less";
@import "twitter/bootstrap/buttons.less";
@import "twitter/bootstrap/close.less";
@import "twitter/bootstrap/navs.less";
@import "twitter/bootstrap/navbar.less";
@import "twitter/bootstrap/labels-badges.less";
@import "twitter/bootstrap/hero-unit.less";
@import "twitter/bootstrap/utilities.less";
@import "twitter/bootstrap/responsive"; 
```

添加这些之后，我启动了本地 Rails 服务器，但仍然看不到应用程序中的标记。一定是在这里做错了什么。application.css 是否需要重命名为 application.css.less？我需要重新编译一些东西吗？我猜`show-grid`样式是在下面的导入之一上（可能是 grid.less），我猜我做错的事情是没有导入那些样式表。

开始解决此问题的好步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T16:41:29.897

Bootstrap show-grid 类来自 Bootstrap 在他们自己的演示站点上使用的 docs.css。

我不认为它真的适合下载 Bootstrap 的人使用，但我想没有什么能阻止你使用它。

css 在这个文件中：

[http://twitter.github.com/bootstrap/assets/css/docs.css](http://twitter.github.com/bootstrap/assets/css/docs.css)

它在 Bootstrap 上使用：

[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

# ios - iPad的主从应用程序

> ID：15713478
> 
> 赞同：0
> 
> 时间：2013-03-30T00:26:42.680
> 
> 标签：ios, objective-c, xcode, ios5, xcode4.5

我正在使用带有 ARC 的 XCode 4.5 创建一个 iPad 版本的 Master Detail Application。我设置了 iPadMaster.h/.m（作为我的主人）和 iPadDetailViewController.h/m（作为我的细节）。

当用户单击/选择 iPadMaster 上的行时，我试图从 iPadDetailViewController 加载不同的视图控制器。

我在 iPadMaster.m 上设置了这个：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    iPadDetailViewController * DVC = [[iPadDetailViewController alloc]initWithNibName:nil bundle:nil];
    DVC.itemNumber = indexPath.row;
} 
```

并在 iPadDetailViewController.m 上尝试了这个愚蠢的特技`[viewDidLoad]`：

```
switch(_itemNumber)
    {

        case 0:
        {
            //Detail row
            vc1 *viewController = [[vc1 alloc] init];
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }
        case 1:
        {
            //Report row
            vc2 *viewController = [[vc2 alloc] init];
            //viewController.somePassedInData = theDataToPass;
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }
        case 2:
        {
            //Report row
            vc3 *viewController = [[vc3 alloc] init];
            //viewController.somePassedInData = theDataToPass;
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }

        ...
        case 9:
        {
            //Report row
            vc9 *viewController = [[vc9 alloc] init];
            //viewController.somePassedInData = theDataToPass;
            [self presentViewController:viewController animated:YES completion:nil];
            break;
        }
        default:
        {
            break;
        } 
```

在 iPhone 上，我只会在`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`iPad 环境中粘贴“开关盒”，但我迷失了......

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:52:20.600

The split view controller has a property, viewControllers. The object at index 1 is the detail controller. You should just create a mutable copy of viewControllers, replace the object at index 1 with your new controller, and set that array to be the split view's arrayControllers.

```
NextController *next = [[NextController alloc] init..... // or however you get your new controller
NSMutableArray *mut = [self.splitViewController.viewControllers mutableCopy];
[mut replaceObjectAtIndex:1 withObject:next];
self.splitViewController.viewControllers = mut; 
```

# javascript - 如何在玉中做复杂的条件或正则表达式

> ID：15713480
> 
> 赞同：1
> 
> 时间：2013-03-30T00:26:59.780
> 
> 标签：javascript, node.js, express, pug

我遇到了一个有趣的挑战，不知道如何解决它。我正在从我的 mailchimp 中提取订阅者列表，并用数据填充我网站上的成员页面。我注册的字段之一是“网站或LinkedIn个人资料网址”。

我想做的是，检查他们是否提供了一个linkedin地址，如果有，将他们的url放在linkedin成员插件中，如果没有使用其他数据来创建一个更简单的个人资料、名称网站、标题等。

我的问题是我不能说是否 data.websiteField.match(/linkedin/) 在玉中，所以我要么需要将数据传递给我遇到问题的一些客户端 javascript，要么做其他事情。

这是从 mailchimp 返回的数据示例

```
[ // this first bit is just the fields
  [
    "email address",
    "first name",
    "last name",
    "role",
    "organization",
    "headline",
    "website",
    "areas of interest",
    "please email me about:",
    "member_rating",
    "optin_time",
    "optin_ip",
    "confirm_time",
    "confirm_ip",
    "latitude",
    "longitude",
    "gmtoff",
    "dstoff",
    "timezone",
    "cc",
    "region",
    "last_changed"
  ],
  [ // and here's the first user
    "woop@booomshakala.com", // haha, just hiding some data
    "Woop",
    "Shak",
    "Tester",
    "ShakaCo",
    "Whooooooper",
    "http://linkedin.com/in/costamichailidis", // hit me up sometime
    "Creativity, Innovation, Ideas and Science",
    "Job Placement, Internships, Recruitment &amp; Retention, Technology &amp; MOOCs, Measurement &amp; Evaluation, Documentation &amp; Dissemination",
    2,
    "2013-03-28 19:28:55",
    "173.52.122.111",
    "2013-03-28 19:29:12",
    "173.52.122.111",
    "40.7648000",
    "-73.7775000",
    "-5",
    "-4",
    "America/New_York", "US", "NY", "2013-03-28 19:29:12"
  ]
] 
```

任何帮助都会摇滚！

另外，我正在使用快递。express 是否使本地人在客户端 JavaScript 中可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T15:51:31.567

# 客户端正则表达式

Jade 允许您`-`在行首使用修饰符执行任意 javascript

```
- if (profile.websiteField.match(/linkedin/)
    // render linkedin profile here
- else
    // render simple profile here 
```

# 服务器端正则表达式

我认为在服务器端格式化配置文件信息并将`renderLinkedIn`布尔字段设置为 true 或 false会更简单

```
function displaySignUpPage(req, res) {
  var profile = formatMailChimpData()
  // profile now looks like
  // {
  //   "email address": "woop@booomshakala.com",
  //   "first name": "Noah",
  //   ...
  // }

  var linkedInRegex = /linkedin/;
  profile.renderLinkedIn = linkedInRegex.test(profile.website) // set renderLinkedIn to true or false
  // say your jade view is called signUpPage.jade
  var pageData = {
    title: 'Register',
    profile: profile
  }
  res.render('signUpPage', pageData)
}

function formatMailChimpData() {
  var mailChimpData = [
    [
      "email address",
      "first name",
      "last name",
      "role",
      "organization",
      "headline",
      "website"
      // other fields truncated
    ],
    [
      "woop@booomshakala.com", // haha, just hiding some data
      "Noah",
      "Isaacson",
      "Tester",
      "ShakaCo",
      "Whooooooper",
      "http://www.linkedin.com/pub/noah-isaacson/59/6a2/553"
    ]
  ]

  // mailChimp puts the keys as the first entry
  var mailChimpFields = mailChimpData[0]
  var mailChimpProfile = mailChimpData[1]
  // make profile into key-value pairs
  var keyValuePairs = mailChimpFields.map(function (field, index) {
    var profileValue = mailChimpProfile[index]
    var keyValuePair = [field, profileValue]
    return keyValuePair
   })
  var profile = keyValuePairs.reduce(function(prev, pair) {
    var key = pair[0]
    var value = pair[1]
    prev[key] = value
    return prev
  }, {})
  return profile
} 
```

# qt - How to inject Javascript in a QWebFrame?

> ID：15713484
> 
> 赞同：0
> 
> 时间：2013-03-30T00:27:39.777
> 
> 标签：qt, qwebkit

```
QObject::connect(webview->page()->mainFrame(), SIGNAL(initialLayoutCompleted()), webview->page()->mainFrame(), SLOT(evaluateJavaScript("alert(); null"))); 
```

My code can be compiled but then happens nothing. evaluateJavascript is not the problem, because I have tested in standalone and it works fine. The signal is neither the problem, because I have done:

```
QObject::connect(webview->page()->mainFrame(), SIGNAL(initialLayoutCompleted()), webview, SLOT(close()))); 
```

And the app is closed properly. I think that the problem is related with the "webview->page->mainFrame()" part.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:59:48.657

`evaluateJavaScript("alert(); null")` is not the name of a slot, it's a fully formed function call. The `QObject:connect()` fails because it expects the name of a slot, including the argument types, not a function call.

You need to provide your own slot function here, inside a class of yours, possibly inheriting QWebView. Then put that `evaluateJavascript("...")` call inside that slot and connect `SIGNAL(initialLayoutCompleted())` to it.

# mysql - perl 脚本从 mysql 查询创建 xml - 内存不足

> ID：15713485
> 
> 赞同：2
> 
> 时间：2013-03-30T00:27:41.253
> 
> 标签：mysql, xml, perl

我需要从数据库记录中生成一个 XML 文件，并且出现“内存不足”错误。这是我正在使用的脚本，它是在谷歌上找到的，但它不适合我，而且它也在杀死服务器分配的内存。虽然这是一个开始。

```
#!/usr/bin/perl

use warnings;
use strict;
use XML::Simple;
use DBI;

my $dbh = DBI->connect('DBI:mysql:db_name;host=host_address','db_user','db_pass')
  or die DBI->errstr;

# Get an array of hashes
my $recs = $dbh->selectall_arrayref('SELECT * FROM my_table',{ Columns => {} });

# Convert to XML where each hash element becomes an XML element
my $xml = XMLout( {record => $recs}, NoAttr => 1 );

print $xml;

$dbh->disconnect; 
```

该脚本仅打印记录，因为我使用 where 子句对单个行 id 进行了测试。

*   首先，我无法将输出保存到file.xml。

*   其次，我需要以某种方式将“作业”拆分为多个作业，然后将 XML 文件全部放在一起。

我不知道如何实现两者。

**约束：**无权更改服务器设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T07:51:04.033

这些是问题线：

```
my $recs = $dbh->selectall_arrayref('SELECT * FROM my_table',{ Columns => {} }); 
```

这会将整个表读入内存，将每一行表示为一个值数组。

```
my $xml = XMLout( {record => $recs}, NoAttr => 1 ); 
```

这可能是更大的结构，它是一个完整的 XML 字符串。

最低内存使用解决方案需要涉及一次加载表一项，并立即打印该项目。在 DBI 中，可以进行查询，以便在循环中一次获取一行。

You will need to play with this before the result looks like your intended output (I haven't tried to match your `XML::Simple` output - I'm leaving that to you:

```
print "<records>\n";

my $sth = $dbh->prepare('SELECT * FROM my_table');
$sth->execute;

while ( my $row = $sth->fetchrow_arrayref ) {
  # Convert db row to XML row
  print XMLout( {row => $row}, NoAttr => 1 ),"\n";
}

print "</records>\n"; 
```

Perl can use e.g. `open( FILEHANDLE, mode, filename )` to start access to a file and `print FILEHANDLE $string` to print to it, or you could just call your script and pipe it to a file e.g. `perl myscript.pl > table.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:33:19.563

没有约束的 select * 会扼杀你的记忆。为您的查询添加一些约束，即日期或 ID，并使用循环执行查询并分块执行输出。这样你就不需要在开始输出之前将整个表加载到 mem 中。

# java - android动画错误地动画

> ID：15713489
> 
> 赞同：0
> 
> 时间：2013-03-30T00:28:16.643
> 
> 标签：java, android, animation

我有一个顶级 LinearLayout，它有许多子元素，由一个按钮和一个不可见的 LinearLayout 组成。当我按下按钮时，我希望 LinearLayout 的内容动画并顺利按下所有内容。相反，正在发生的事情是一个大的空白区域立即被雕刻出来，然后 LinearLayout 动画进入空白空间，而不是所有东西都被优雅地推下。

我的 onCreate 方法创建了大量的 LinearList 以及每个子 LinearList 的所有子级。如果您运行此代码，您将看到 20 个标有“按钮 X”的按钮，其中 X 为 0-19。当您单击一个按钮时，下面的缩进按钮动画（如子菜单）但“按钮 X+1”形式的下一个按钮会立即一直向下绘制，而不是动画被按下。

```
@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    LinearLayout topll = (LinearLayout)findViewById(R.id.topll);

    for(int i=0;i<20;i++)
    {
        Button b = new Button(this);
        b.setText("Button"+String.format("%s", i));
        b.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT, 1f));
        b.setOnClickListener(this);
        topll.addView(b);

        LinearLayout l = new LinearLayout(this);
        l.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT, 1f));
        l.setVisibility(View.GONE);
        l.setOrientation(LinearLayout.VERTICAL);

        for(int k=0; k<10; k++)
        {
            Button b2 = new Button(this);
            b2.setText("New Button"+String.format("%s", k));
            LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT, 1f);
            p.setMargins(80, 0, 0, 0);
            b2.setLayoutParams(p);
            //b2.setOnClickListener(this);
            l.addView(b2);
        }

        topll.addView(l);
    }

} 
```

这是我按下按钮时调用的方法...

```
@Override
    public void onClick(View arg0)
    {
        LinearLayout topll = (LinearLayout)findViewById(R.id.topll);

    for(int i=0;i<topll.getChildCount();i++)
    {
        if(topll.getChildAt(i) == arg0)
        {
            LinearLayout ll = (LinearLayout)topll.getChildAt(i+1);
            if(ll.getVisibility() == View.GONE)
            {
                Animation animation = AnimationUtils.loadAnimation(this, R.anim.expanddown);
                ll.setAnimation(animation);
                animation.start();
                ll.setVisibility(View.VISIBLE);
            }
            else
            {
                Animation animation = AnimationUtils.loadAnimation(this, R.anim.expandup);
                ll.setAnimation(animation);
                animation.start();
                ll.setVisibility(View.GONE);
            }
        }
    }
} 
```

最后是我的动画 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:duration="1000" 
        android:startOffset="0" 
        android:fillAfter="false" 
        android:fromXScale="1.0" 
        android:fromYScale="0.0" 
        android:toYScale="1.0" 
        android:toXScale="1.0" 
        android:pivotY="0%"/>
</set> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:41:22.003

首先使用

```
ll.startAnimation(animation); 
```

代替 ：

```
ll.setAnimation(animation);
animation.start(); 
```

然后使用动画监听器和

```
animation.setAnimationListener(new AnimationListener() {
                    public void onAnimationStart(Animation anim)
                    {
                    };
                    public void onAnimationRepeat(Animation anim)
                    {
                    };
                    public void onAnimationEnd(Animation anim)
                    {
                        ll.setVisibility(View.VISIBLE);
                        // or what ever
                    };
                }); 
```

# jquery - ajax提交之前的HTML5验证

> ID：15713491
> 
> 赞同：38
> 
> 时间：2013-03-30T00:28:32.210
> 
> 标签：jquery, ajax, html, forms, validation

这应该很简单，但它让我发疯。我有一个使用 ajax 提交的 html5 表单。如果您输入了无效值，则会有一个弹出响应告诉您。在运行 ajax 提交之前，如何检查条目是否有效？

形式：

```
<form id="contactForm" onsubmit="return false;">
  <label for="name">Name:</label>
  <input type="text" name="name" id="name" required placeholder="Name" />
  <label for="subject">Subject:</label>
  <input type="text" name="subject" id="subject" required placeholder="Subject" />
  <label for="email">Email:</label>
  <input type="email" name="email" id="email" required placeholder="email@example.com" />
  <label for="message">Message:</label>
  <textarea name="message" id="message" required></textarea>
  <input type="submit" id="submit"/>
</form> 
```

提交：

```
$('#submit').click(function(){
    var name = $("input#name").val();
    var subject = $("input#subject").val();
    var email = $("input#email").val();
    var message = $("input#message").val();

    var dataString = 'email=' + email + '&message=' + message + '&subject=' + subject + '&name=' + name ; 

    $.ajax({
        url: "scripts/mail.php",
        type:   'POST',
        data: dataString,
        success: function(msg){
            disablePopupContact();
            $("#popupMessageSent").css("visibility", "visible");
        },
        error: function() {
            alert("Bad submit");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-11-13T22:30:54.967

如果您绑定到提交事件而不是单击它只会在它通过 HTML5 验证时触发。

如果您多次使用它，最好将 jQuery 选择器缓存在变量中，这样您就不必在每次访问元素时都导航 DOM。jQuery 还提供了一个 .serialize() 函数，它将为您处理表单数据解析。

```
var $contactForm = $('#contactForm');

$contactForm.on('submit', function(ev){
    ev.preventDefault();

    $.ajax({
        url: "scripts/mail.php",
        type:   'POST',
        data: $contactForm.serialize(),
        success: function(msg){
            disablePopupContact();
            $("#popupMessageSent").css("visibility", "visible");
        },
        error: function() {
            alert("Bad submit");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-03-30T00:35:00.553

默认情况下，jQuery 对 HTML5 验证一无所知，因此您必须执行以下操作：

```
$('#submit').click(function(){
    if($("form")[0].checkValidity()) {
        //your form execution code
    }else console.log("invalid form");
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-30T01:24:28.257

如果您使用 HTML5 表单验证，则必须在表单的提交处理程序中发送 ajax 请求。提交处理程序只会在表单验证时触发。您正在使用的是一个按钮单击处理程序，它将始终触发，因为它与表单验证没有关联。注意：并非所有浏览器都支持 html5 表单验证。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-12T19:46:16.000

我更喜欢使用 jQuery 提交处理程序，您仍然可以使用以下方法获得对表单的响应。

```
jQuery('#contactForm').on('submit', function (e) {
    if (document.getElementById("contactForm").checkValidity()) {
        e.preventDefault();
        jQuery.ajax({
            url: '/some/url',
            method: 'POST',
            data: jQuery('#contactForm').serialize(),
            success: function (response) {
                //do stuff with response
            }
        })
    }
    return true;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-30T00:38:13.647

不完全确定你的意思。但我假设您想实时检查输入是否有效。如果是这样，您应该使用 .keyup 而不是 .click 事件，因为如果用户按下提交，这将导致操作。看[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

有了这个，您可以检查每个新字符插入的输入并显示例如“无效”，直到您的验证为真。

我希望这回答了你的问题！

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-06T10:54:37.523

你也可以使用 jquery validate 方法来验证表单，比如

$("#form id").validate();

它根据表单验证返回布尔值，您还可以使用 errorList 方法在日志中看到错误。

要使用上述功能，您必须在脚本中包含 jquery.validate.js 文件

# css - 样式 Css 小部件标题

> ID：15713493
> 
> 赞同：0
> 
> 时间：2013-03-30T00:28:35.803
> 
> 标签：css, styles

出于某种原因，我无法在 class="widgettile" 上更改样式。我不明白...请访问我的网站，查看侧边栏[http://www.curious-howto.com](http://www.curious-howto.com)，我们向下滚动到底部并看到右侧的 2 小部件。标题被包裹在

```
<class="widgettitle">This is title</class="widgettitle"> 
```

但是当我添加到我的样式表中时 .widgettile {font-family:Lobster;} ...不工作......请任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:35:12.587

您没有将类分配给任何东西。这是你的html`<class="widgettitle">Most Viewed Posts In The Last 30 Days </class="widgettitle">`

您需要将类添加到标签中，例如`<h3 class="widgetittle">Title</h3>`'' 无效且不存在。我看到您正在使用 wordpress，因此很可能是该功能存在问题。

```
function widgets_init() {
register_sidebar( array(
    'before_title'  => '<h3 class="widget-title">',
    'after_title'   => '</h3>',
) ); 
```

确保正确使用该功能。上面的代码将在小部件标题周围添加一个带有小部件标题类的 h3。

# list - 使用 shell 脚本将用户输入输入到列表目录

> ID：15713501
> 
> 赞同：0
> 
> 时间：2013-03-30T00:29:47.640
> 
> 标签：list, shell, unix, directory

我写了一个小脚本，它会要求一个目录，然后列出该目录中的目录，只是它总是告诉我没有这样的目录。我可能哪里出错了？

```
#!/bin/bash
echo -n "Enter a directory to list"
read answer
ls -d $answer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:33:00.520

## 问题

您的问题可能是以下一项或多项：

1.  您没有正确引用您的目录名称。
2.  该`-d`标志只会列出目录本身。
3.  您可能传递了一个不存在的目录的名称。

## 解决方案

假设您使用 Bash，您可以更简单地执行此操作。例如：

```
read -p 'Enter a directory to list: '
ls "$REPLY" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:42:19.043

您可以使用 find 获取目录列表，如果您希望路径中有空格，则需要引用答案：

```
#!/bin/bash
echo -n "Enter a directory to list"
read answer
find "$answer" -type d 
```

# c++ - “使用 -fPIC 重新编译” - 但使用 -fPIC 重新编译并不能解决问题

> ID：15713503
> 
> 赞同：1
> 
> 时间：2013-03-30T00:30:09.667
> 
> 标签：c++, gcc, g++

海合会错误：

```
relocation R_X86_64_32S against `ebx' can not be used when making a shared object;
recompile with -fPIC 
```

即使我确定设置了 -fPIC 标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:30:09.667

如果您尝试编译包含内联汇编的文件，请确保您没有在寄存器前缺少**%符号。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:07:48.040

That error message should say "without -fPIC".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T01:03:01.267

确保在链接器行上使用 -fPIC。有时模板由链接器编译。

# css - 两个相邻的 DIV 没有宽度参数（ width: auto; ）

> ID：15713507
> 
> 赞同：2
> 
> 时间：2013-03-30T00:30:26.787
> 
> 标签：css, html, next

我试图弄清楚，如何在不指定宽度的情况下将两个 div 彼此相邻放置。这并不像看起来那么容易：

的HTML：

```
 <div id="container">
     <div id="column1">Fixed Width</div>
     <div id="column2">Auto Width</div>
    </div> 
```

的CSS：

```
 #container {
     float:left;
     width:200px;
    }
    #column1 {
     float:left;
     width:24px;
     background:gray;
    }
    #column2 {
     float:left;
     width:auto;
     background:blue;
    } 
```

*#container 有 200px 的固定宽度（可能是 XX%）。#column1 的固定宽度为 24px，#column2 的宽度设置为 auto。

这将正常工作，column2 将在column1 旁边，直到column2 的内容将达到200-24 的限制，其中column2 将跳转到column1 下方，而不是div 内的换行符。

我想要实现的（防弹），无论 column2 的内容有多大，column2 都保持在容器内的 column1 旁边。高度是自动的，并不重要。

（我正在尝试创建一个类似于 Facebook 的消息框，缩略图在左侧，文本旁边的高度不受限制。我不希望 column2 中的文本跳到下面或环绕 column1）。可能很容易，想不通。与往常一样，我们将不胜感激任何帮助！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T00:47:11.210

如果您`float`从中删除属性`#column2`并设置`display: table;`，您将获得所需的效果。

**HTML**

```
 <div id="container">
     <div id="column1">Fix</div>
     <div id="column2">Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum </div>
  </div> 
```

**CSS**

```
 #container {
     float:left;
     width:200px;
    }
    #column1 {
     float:left;
     width:24px;
     background:gray;
    }
    #column2 {
     background:blue;
    display: table;
    } 
```

[演示](http://jsfiddle.net/chTd4/)

尝试删除或添加更多“Lorem Ipsum”文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T00:48:51.420

你当然可以这样做：

```
#column2 {
    /* float:left; removed */
    width:auto;
    background:blue;
} 
```

由于colum1 将强制column2 在他身边，当内容比左侧空间大得多时，ccolumn2 只会向下扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T00:39:49.950

如果您不以其他方式包装 DIV，请尝试以下操作：

```
<div style="width: 200px; border: 3px solid red; ">
   <div style="width:24px;     display: table-cell; border: 3px solid blue; ">
     aaa
   </div>
   <div style="display: table-cell; border: 3px solid green;">
    bbb bbb 
   </div>
</div> 
```

[http://jsfiddle.net/Zctjr/2/](http://jsfiddle.net/Zctjr/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T00:42:35.787

只需设置 max-width 使其包裹而不是继续增长

# jquery - 试图使 jquery 小部件响应

> ID：15713515
> 
> 赞同：0
> 
> 时间：2013-03-30T00:31:42.673
> 
> 标签：jquery, css, responsive-design

嗨，我正在尝试让这个 jquery 小部件响应。Iv 尝试用百分比替换宽度。我最初在[http://jqueryglobe.com/article/feature_list/](http://jqueryglobe.com/article/feature_list/)上找到它，但该网站已被删除，我在我自己的网站上有它[http://www.piercemcgeough.co.uk/sidetabs/](http://www.piercemcgeough.co.uk/sidetabs/)

问题似乎出在选项卡上，因为它是具有宽度和高度的一组图像。

任何帮助请大家。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:56:38.370

简单地缩放所有内容可能是一个挑战，因为随着图像变小，它们的高度将无法匹配显示左侧 3 个链接所需的高度。

目前的结构基本上是：

```
#tabs    #output  .right 
```

随着视点变小，使用@media 请求并开始修改它怎么样？

平板电脑

```
#tabs  #output  
.right 
```

对于智能手机

```
#tabs  
#output  
.right 
```

CSS将松散地是

@media (min-width: 768px) and (max-width: 979px) { /* 对于平板电脑，将右 div 放在左 div 下方 */

.left, .right{ 宽度：100%; }

}

@media（最大宽度：767px）{

/* 在平板电脑下方垂直堆叠选项卡、输出和右 div */

.left #tabs, .left #output, .right{ width:100%; }

目前 div#feature_list 的宽度也被硬连线到 750px。将其更改为百分比（可能为 100%）可能很好。

您可能还需要强制输出 div 中的图像使用类似的东西进行缩放

```
ul#output li img{ 
width:100%;
height:auto;
} 
```

肯定会需要比这更多的微调，但我认为重要的是，如果你想让它既响应又可用，你需要开始考虑随着视点的变化而改变它的布局。您将无法简单地扩展所有内容。

祝你好运，这是网页设计的有趣时期！

# iphone - NSMutableArray 不维护数据

> ID：15713516
> 
> 赞同：-3
> 
> 时间：2013-03-30T00:31:53.163
> 
> 标签：iphone, objective-c, xcode

我为 EmployeeInfo 创建了一个自定义类：

```
@interface METEmployee : NSObject
@property (weak, nonatomic) NSString *EmpNo;
@property (weak, nonatomic) NSString *FirstName;
@property (weak, nonatomic) NSString *MiddleName;
@property (weak, nonatomic) NSString *LastName;
@property (weak, nonatomic) NSString *Department;
@property (weak, nonatomic) NSString *HireDate;
@property (weak, nonatomic) NSString *JobTitle;

@property (weak, nonatomic) NSString *SupervisorNumber;
@property (weak, nonatomic) NSString *SupLastName;
@property (weak, nonatomic) NSString *SupFirstName;
@property (weak, nonatomic) NSString *MobilePhone;
@property (weak, nonatomic) NSString *EmailAddress;
@property (weak, nonatomic) NSString *DeskPhone;

@property (weak, nonatomic) NSString *EmployeeType;
@property (weak, nonatomic) NSString *Location;
@end 
```

然后在我的视图 controller.h 中我创建了：

```
NSMutableArray *theemplyees;
@property(nonatomic, retain) NSMutableArray *theemplyees; 
```

合成为.m：

```
@synthesize theemplyees 
```

然后在 ViewDidLoad 中，初始化并调用以填充它：

```
theemplyees = [[NSMutableArray alloc] init];
[self getEmps]; 
```

在 getEmps 中，我将记录添加到数组中：

```
 results = [database executeQuery:@"select * from EmpInfo order by LastName"];
    while([results next]) {

        METEmployee *empInfo = [METEmployee alloc];
        empInfo.EmpNo = [results stringForColumn:@"EmpNo"];
        empInfo.FirstName = [results stringForColumn:@"FirstName"];
        empInfo.MiddleName = [results stringForColumn:@"MiddleName"];
        empInfo.LastName = [results stringForColumn:@"LastName"];
        empInfo.Department = [results stringForColumn:@"Department"];
        empInfo.HireDate = [results stringForColumn:@"HireDate"];
        empInfo.JobTitle = [results stringForColumn:@"JobTitle"];
        empInfo.SupervisorNumber = [results stringForColumn:@"SupervisorNumber"];
        empInfo.SupFirstName = [results stringForColumn:@"SupFirstName"];
        empInfo.SupLastName = [results stringForColumn:@"SupLastName"];
        empInfo.MobilePhone = [results stringForColumn:@"MobilePhone"];
        empInfo.EmailAddress = [results stringForColumn:@"EmailAddress"];
        empInfo.DeskPhone = [results stringForColumn:@"DeskPhone"];
        empInfo.EmployeeType = [results stringForColumn:@"EmployeeType"];
        empInfo.Location = [results stringForColumn:@"Location"];
        [theemplyees addObject:empInfo];
    } 
```

为第一个充满记录的屏幕填充表格，一切正常：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {
  METEmpTableViewCell *cell = (METEmpTableViewCell *)[tableView dequeueReusableCellWithIdentifier:@"myCell"];

cell.lblFirstName.text = [[theemplyees objectAtIndex:indexPath.row] valueForKey:@"FirstName"];
cell.lblLastName.text = [[theemplyees objectAtIndex:indexPath.row] valueForKey:@"LastName"];
cell.lblDepartment.text = [[theemplyees objectAtIndex:indexPath.row] valueForKey:@"Department"];

 NSString* picName = [NSString stringWithFormat:@"%@.jpg", [[theemplyees objectAtIndex:indexPath.row] valueForKey:@"EmpNo"]];
@try {
    cell.empPicture.image = [UIImage imageNamed:picName];
}
@catch (NSException *exception) {

}
@finally { 
}

return cell; 
```

}

但是，如果我尝试在 Tableview 上向上或向下滚动，数组会显示数据为空……尽管它仍然显示记录数。如果我将表格中的单元格调整为更小，它将填充更多行（可见），但再次滚动并且它们消失了。

非常感谢任何想法或建议。提前感谢您的任何帮助！

地理...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:34:50.020

You all have weak properties which means that all of the strings are instantly deallocated, since nothing is retaining them. Change it to this and try:

```
@property (nonatomic, strong) NSString *theString; 
```

Also, you want to initialize your NSMutableArray like so (you're missing the init method):

```
NSMutableArray *array = [[NSMutableArray alloc] init]; 
```

# objective-c - 无法将 Outlet 拖放到我的 View Obj-C iOS 开发中。

> ID：15713517
> 
> 赞同：1
> 
> 时间：2013-03-30T00:31:57.630
> 
> 标签：objective-c, ipad, uiview, uiviewcontroller

我面临一个我不明白的奇怪问题。我在 Outlet 选项卡中显示了插座，但是当我尝试拖放它时，它没有出现，因此我无法使用它。我以前没有遇到过这样的问题，所以感谢您的帮助。![在此处输入图像描述](../Images/3a71d0aa7a58332c2733e068bb133ae9.png)

正如您在图像上看到的那样，当我尝试直接从文件的所有者或从 Outlet 选项卡中拖动时，我想要使用的“pointobject”不会出现。
在我的 ViewController 你会发现这个

```
#import "PointObject.h"
@interface LandscapeViewController : UIViewController <UITableViewDelegate, 

UITableViewDataSource, PointObjectDelegate>
{
    // not relevant code up here
    //----------------------------------------
    /*
     * for graph
     */
    LandscapeGraphViewController * landscapeGraphViewController;
    IBOutlet PointObject  *pointObject;
    IBOutlet UIButton *ZoomIn;
    IBOutlet UIButton *ZoomOut;

} 
// not relevant code below 
```

在我的 PointObject.h 你会发现这个

```
@class PointObject;

@protocol PointObjectDelegate

-(double)expressionResultForXValue: (CGFloat)x requestor: (PointObject *)pointObject;

@end

@interface PointObject : UIView
{
    id<PointObjectDelegate> delegate;
    CGFloat scale;
    CGPoint originOffset;
}

-(void)reset;

@property (assign) id <PointObjectDelegate> delegate; 
```

一些代码已被删除，因为它与问题无关。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:11:17.087

确保您已将类分配`PointObject`给视图，您想用作`PointObject`

只需看下图...

![在此处输入图像描述](../Images/aa9c6b95826b746d2959bd4c467368df.png)

如图所示，选择您的视图，`PointObject`然后在属性窗口分配类的第三个选项卡中使用该视图`PointObject`。希望对你有帮助…………

# dbpedia - DBpedia 资源名称标准

> ID：15713525
> 
> 赞同：1
> 
> 时间：2013-03-30T00:33:13.983
> 
> 标签：dbpedia

DBpedia 名称是否有任何标准或约定？我的意思是，例如，`United Kingdom`有一个名为`United_Kingdom`. 但是我看到有一个下划线并且每个单词都大写的事实并不成立。例如，采取`University_of_Manchester`; 如果您`University_Of_Manchester`在“of”中输入大写字母“O”，您将无法获得资源。是否必须进行过滤以获取正确大小写的资源名称，因为我们可能希望将所有字母设为小写，在空格中使用下划线并进行查询，因为在 SPARQL 中进行过滤确实需要一些时间。

有什么建议么？我刚刚开始了解 DBpedia，所以我可能会遗漏一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T01:07:03.377

DBpedia 对 Wikipedia 中可用的信息进行编码，其命名约定基于 Wikipedia 文章的名称。DBpedia wiki 页面，[DBpedia 数据集](http://wiki.dbpedia.org/Datasets#h18-4)，在第[3 节中说。表示或命名“事物”</a>：](http://wiki.dbpedia.org/Datasets#h18-4)

[](http://wiki.dbpedia.org/Datasets#h18-4)

> [](http://wiki.dbpedia.org/Datasets#h18-4)
> 
> [DBpedia 数据集中的每个事物都由http://dbpedia.org/resource/Name](http://dbpedia.org/resource/Name)[形式的可取消引用的 IRI 或基于 URI 的引用表示](http://wiki.dbpedia.org/Datasets#h18-4)，其中 Name 来自源 Wikipedia 文章的 URL，其中格式为[http://en.wikipedia.org/wiki/Name](http://en.wikipedia.org/wiki/Name)。因此，每个 DBpedia 实体都直接与 Wikipedia 文章相关联。每个 DBpedia 实体名称都解析为面向描述的 Web 文档（或 Web 资源）。
> 
> 在 DBpedia 3.6 版之前，我们只使用英文维基百科的文章名称，但从 DBpedia 3.7 版开始，我们还提供包含 IRI 的国际化数据集，例如[http://xx.dbpedia.org/resource/Name](http://xx.dbpedia.org/resource/Name)，其中 xx 是维基百科的语言代码和名称取自源 URL， http: [//xx.wikipedia.org/wiki/Name](http://xx.wikipedia.org/wiki/Name)。

因此，由于 Wikipedia 文章是[University of Manchester](http://en.wikipedia.org/wiki/University_of_Manchester)，而不是[University Of Manchester](http://en.wikipedia.org/wiki/University_Of_Manchester)，因此 DBpedia 资源是[http://dbpedia.org/page/University_of_Manchester](http://dbpedia.org/page/University_of_Manchester)，而不是[http://dbpedia.org/page/University_Of_Manchester](http://dbpedia.org/page/University_Of_Manchester)。

# iphone - 在 iPhone 上存储信息

> ID：15713528
> 
> 赞同：0
> 
> 时间：2013-03-30T00:33:50.563
> 
> 标签：iphone, ios, objective-c

我正在创建一个需要用户登录的 iPhone 应用程序。一旦用户成功登录，保存该信息的最佳方式是什么？例如，如果我想使用他们的用户名发送到服务器以获取数据。我在那里保存用户名并传递钥匙串。所以我只是想知道保存该信息以便于访问的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:53:52.893

敏感的用户数据（登录名、密码）应存储在钥匙串中。它的 API 是用 C 语言编写的，但 github 上有一些很棒的包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:22:50.190

为了方便用户访问，您可以将用户名/密码保存在 NSUserDefaults 中。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
            [prefs setObject:[details objectForKey:@"UserName" ] forKey:@"UserName"];
            [prefs setObject:[details objectForKey:@"Password" ] forKey:@"Password"]; 
```

# c++ - 获取 2 个 QDir 的共同父级

> ID：15713529
> 
> 赞同：2
> 
> 时间：2013-03-30T00:33:55.753
> 
> 标签：c++, qt

有没有办法获得 2 个 QDir 对象的最接近的公共父级？例如：

```
QDir d1("/someroot/parent/test/folder");
QDir d2("/someroot/parent/another/folder");

QDir d3 = commonParent(d1, d2);
// d3 == "/comeroot/parent/" 
```

不幸的是，Boost.Filesystem 不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:46:37.517

```
const QString commonParent(const QString &path1, const QString &path2)
{
    QString ret = path2;

    while (!path1.startsWith(ret))
        ret.chop(1);

    if (ret.isEmpty())
        return ret;

    while (!ret.endsWith('/'))
        ret.chop(1);

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:26:36.457

您可以为此使用[QDir::cdUp()](http://qt-project.org/doc/qt-4.8/qdir.html#cdUp)。

工作示例：

```
QString commonParent(const QDir& inputDirOne, const QDir& inputDirTwo) {
  QDir dirOne(inputDirOne);
  QString dirTwoAbsolutePath = inputDirTwo.absolutePath();
  do {
    if (dirTwoAbsolutePath.startsWith(dirOne.absolutePath()))
      return dirOne.absolutePath();
  } while(dirOne.cdUp());
  return QString();
} 
```

和用法：

```
//QDir dir1("C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Common7\\IDE\\Addins\\somefile.txt");
QDir dir1("..");
//QDir dir2("C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\Licenses\\Update\\1033\\License.htm");
QDir dir2("../../..");
QString result = commonParent(dir1, dir2);
qDebug() << "Common Dir : " << (result.isEmpty() ? "Does not exist" : result); 
```

确实用一些奇怪的路径测试了这些，它工作正常

# c# - 优雅的方式解析 URL

> ID：15713542
> 
> 赞同：48
> 
> 时间：2013-03-30T00:35:24.303
> 
> 标签：c#, parsing

在 POST/GET 请求之后，我得到了我需要解析的 URL，当然我可以去使用 spit() 来获取所需的信息，但肯定应该是更优雅的方式。有任何想法吗？

`http://api.vkontakte.ru/blank.html#access_token=8860213c0a392ba0971fb35bdfb0z605d459a9dcf9d2208ab60e714c3367681c6d091aa12a3fdd31a4872&expires_in=86400&user_id=34558123`

我正在解析：`access token`和`expires_in`

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-30T00:37:06.890

使用[URI](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类，您可以执行以下操作：

```
var url = new Uri("your url"); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-04-03T15:01:44.393

使用 Uri + ParseQueryString 函数：

```
Uri myUri = new Uri("http://api.vkontakte.ru/blank.html#access_token=8860213c0a392ba0971fb35bdfb0z605d459a9dcf9d2208ab60e714c3367681c6d091aa12a3fdd31a4872&expires_in=86400&user_id=34558123");

String access_token = HttpUtility.ParseQueryString(myUri.Query).Get("access_token");
String expires_in = HttpUtility.ParseQueryString(myUri.Query).Get("expires_in"); 
```

这也可以解决问题

```
String access_token = HttpUtility.ParseQueryString(myUri.Query).Get(0); 
```

来源：[https ://msdn.microsoft.com/en-us/library/ms150046.aspx](https://msdn.microsoft.com/en-us/library/ms150046.aspx)

提示：您可能需要

```
using System.Web; 
```

并添加对 System.Web 的引用

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-03-15T16:09:41.640

There are several ways you can do this. One is that you can simply use the [`Uri.Query`](https://msdn.microsoft.com/en-us/library/system.uri.query(v=vs.110).aspx) method to get the query string and then parse by the &s. Another is that you can use the [`Uri.Query`](https://msdn.microsoft.com/en-us/library/system.uri.query(v=vs.110).aspx) method and then use [`HttpUtility.ParseQueryString`](https://msdn.microsoft.com/en-us/library/ms150046(v=vs.110).aspx) to parse the query string as a [`NameValueCollection`](https://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection(v=vs.110).aspx), which might be your preferred route.

**See the example below:**

```
using System.Web; // For HttpUtility

// The original URL:
Uri unparsedUrl = new Uri("http://api.vkontakte.ru/blank.html#access_token=8860213c0a392ba0971fb35bdfb0z605d459a9dcf9d2208ab60e714c3367681c6d091aa12a3fdd31a4872&expires_in=86400&user_id=34558123");
// Grabs the query string from the URL:
string query = unparsedUrl.Query; 
// Parses the query string as a NameValueCollection:
var queryParams = HttpUtility.ParseQueryString(query); 
```

You can now perform operations similar to how you would deal with a `Dictionary` object. Like so:

```
string accessToken = queryParams["access_token"];
string expiresIn = queryParams["expires_in"]; 
```

This has the same functionality as what @Jeroen Bouman showed, but splits apart the different functions so you can understand what each piece does individually.

**References:**

[Uri.Query](https://msdn.microsoft.com/en-us/library/system.uri.query(v=vs.110).aspx)

[HttpUtility.ParseQueryString](https://msdn.microsoft.com/en-us/library/ms150046(v=vs.110).aspx)

[NameValueCollection](https://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection(v=vs.110).aspx)

# html - 使用百分比时，CSS 标记“正确”无法按预期工作

> ID：15713544
> 
> 赞同：0
> 
> 时间：2013-03-30T00:35:46.453
> 
> 标签：html, css

当尝试`right`在 CSS 中使用标签时，它不像我预期的那样工作。我试图制作一个页面，其中一个 div 从左侧有这么多像素，并通过使用将 100% 的方式扩展到右侧

```
left: 200px;
right: 100%; 
```

这以前有效，但由于某种原因它现在不起作用，因为绘制的框只有 75 - 100px 的宽度。我没有定义宽度标签，也没有定义高度标签，而是顶部标签没有底部标签匹配（不确定是否有帮助）

有任何想法吗？还是需要更多信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T00:40:40.220

`right`value 表示从最近定位的祖先元素的右边缘到定位元素的右边缘的距离。

`right: 0`可能是您需要的，而不是`right: 100%`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:44:04.463

使用`position:absolute; right: 100%;`会将左侧 100% 推到父母宽度之外。 [http://codepen.io/Nunotmp/pen/wdKAx](http://codepen.io/Nunotmp/pen/wdKAx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:50:38.350

我不确定您使用的是什么标签，但这可能是显示值`inline`或其他问题的问题`block`。

我不认为它对你有用，`left: 200px`这是你会得到的结果：http: [//jsfiddle.net/Ltvkg/](http://jsfiddle.net/Ltvkg/)

你可能会尝试这样的事情：http: [//jsfiddle.net/Ltvkg/1/](http://jsfiddle.net/Ltvkg/1/)

# android - 如何使用 android 应用程序编写文件？

> ID：15713546
> 
> 赞同：1
> 
> 时间：2013-03-30T00:35:53.703
> 
> 标签：android, file

我编写了一个加密应用程序，它将为 RSA 生成一个公钥对。私钥需要保存在设备上。在使用普通 java 应用程序进行测试时，生成了密钥，然后使用以下内容保存到文件中：

```
public static void saveToFile(String fileName,BigInteger mod, BigInteger exp) throws IOException
   {
    ObjectOutputStream oout = new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(fileName)));
        try
        {
                oout.writeObject(mod);
                oout.writeObject(exp);
        }

        catch (Exception e)
        {
                throw new IOException("Unexpected error", e);
        }

        finally
        {
                oout.close();
        }
} 
```

密钥文件将出现在项目目录中。但是，对于 android 应用程序，这不会发生。如何使用 android 应用程序编写文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:42:27.287

> 密钥文件将出现在项目目录中。但是，对于 android 应用程序，这不会发生。如何使用 android 应用程序编写文件？

在 Android 中，您的应用程序只有两个主要的地方可以写入文件：私有内部存储目录和外部存储卷。您要做的不仅仅是提供文件名，还必须提供包含这些位置的完整路径。

```
//Internal storage location using your filename parameter
File file = new File(context.getFilesDir(), filename);

//External storage location using your filename parameter
File file = new File(Environment.getExternalStorage(), filename); 
```

不同之处在于内部存储只能由您的应用访问；如果您通过 USB 连接和安装存储，则可以从任何地方读取/写入外部存储，包括您的 PC。

然后，您可以将适当的文件包装在`FileOutputStream`现有代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-24T14:37:08.613

首先通过您调用的主类作为方法：

```
Boolean writfile;
writfile =savTextFileInternal(this.getApplicationContext(),"Maa","Ambika");
Toast.makeText(this, "File write:"+writfile, Toast.LENGTH_LONG).show(); 
```

创建一个这样的方法：

```
public boolean savTextFileInternal(Context context,String sFileName, String sBody)
{
    try
    {
        File root = new File(context.getFilesDir(),"myfolder");

        if (!root.exists()) {
            root.mkdirs();
        }

        File gpxfile = new File(root, sFileName);
        FileWriter writer = new FileWriter(gpxfile);
        writer.append(sBody);
        writer.flush();
        writer.close();
        return  true;  
    }
    catch(IOException e)
    {
        e.printStackTrace();
        return false;
    }
} 
```

# ios - Is it possible to hide a @property in a subclass?

> ID：15713547
> 
> 赞同：4
> 
> 时间：2013-03-30T00:35:54.673
> 
> 标签：ios, objective-c

My app subclasses `UICollectionViewFlowLayout` and uses all of its properties **except for** `minimumLineSpacing`. To avoid confusion, I'd like to be able to "hide" `minimumLineSpacing` from the outside, so it looks like my subclass doesn't even support it. Is this possible?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-30T00:45:01.353

Yes you can. Kind of. You can mark it with `__attribute__((unavailable))`, which will cause the compiler to throw an error if you use it. However, the property will still be accessible if your object is cast to its superclass type, as this is a compile-time-only thing.

```
@interface MyClass : UICollectionViewFlowLayout
@property (nonatomic) CGFloat minimumLineSpacing __attribute__((unavailable));
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:42:51.150

I don't think you can actually hide it. You could of course overwrite the getter and setter and prevent the acutal value from beeing changed, if that is of importance. But they will always exist and be visible.

# mysql - mysql 右连接多个表

> ID：15713550
> 
> 赞同：0
> 
> 时间：2013-03-30T00:36:13.750
> 
> 标签：mysql, outer-join

我是 mySQL 的新手，我正在努力编写一个查询，该查询将列出已扫描产品价格的所有商店以及尚未扫描产品价格的商店。以下给出了单个产品的正确结果：

```
select distinct(s.id) as store_id, s.chainID as chain_id, p1.productID as product_id, 
s.chain, s.location, s.city, prd.brand, prd.product, prd.quantity, prd.size, prd.unit
from analytics.price p1        -- Fact table with prices
join analytics.pricetime pt   -- Dimension table with time a price was scanned
on p1.priceTimeID = pt.id
join analytics.product prd    -- Dimension table with products
on p1.productID = prd.id
and prd.published = 1
right join analytics.store s   -- Dimension table with stores and the chain they belong to
on p1.storeID = s.id
and p1.chainID = s.chainID
and p1.productID = 46720
and p1.priceTimeID between 2252 and 2265
where s.published=1
and s.chainID = 5; 
```

当我删除**p1.productID = 46720**子句以获取所有产品的结果时，我得到所有已扫描价格的商店（正确），但右连接的无价格侧仅显示尚未扫描任何价格的商店任何产品。（这是一个简单的星型模式，带有价格事实和产品、时间和商店的维度）。我将非常感谢帮助——我已经尝试了所有我能想到的方法，包括“在”、“不存在”和带有光标的存储过程，但我似乎每次尝试都碰壁了。

编辑澄清：

这是我想要实现的目标：

```
Price table
Product Chain       Store       Price
100     5       1       $10
101     5       2       $20

Store table
Chain   Store
5       1
5       2
5       3

Desired Result
Product Chain   Store       Price
100     5       1       $10
100     5       2       NULL
100     5       3       NULL
101     5       1       NULL
101     5       2       $20
101     5       3       NULL

Actual Result
Product Chain   Store       Price
100     5       1       $10
101     5       2       $20
NULL    5       3       NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:01:28.163

我更喜欢使用 a 的可读性`LEFT JOIN`——这应该返回 chainid 5 和相关产品中的所有已发布商店（给定标准）。

```
select distinct s.id as store_id, s.chainID as chain_id, s.chain, s.location, s.city, 
    prd.id as product_id, prd.brand, prd.product, prd.quantity, prd.size, prd.unit
from analytics.store s   
    left join analytics.price p1        
        on p1.storeID = s.id
            and p1.chainID = s.chainID
            and p1.priceTimeID between 2252 and 2265
    left join analytics.product prd    
        on p1.productID = prd.id
            and prd.published = 1
    left join analytics.pricetime pt   
        on p1.priceTimeID = pt.id
where s.published=1
    and s.chainID=5; 
```

*编辑——发表评论，看起来你正在寻找笛卡尔积：*

```
SELECT P.Product, P.Chain, S.Store, IF(P.Store=S.Store,P.Price,NULL) Price
FROM Price P, Store S
WHERE P.Chain = 5
  AND S.Chain = P.Chain
ORDER BY P.Product, S.Store 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/32cee/1)

# java - 如何通过jar文件导入java类

> ID：15713551
> 
> 赞同：-2
> 
> 时间：2013-03-30T00:36:14.673
> 
> 标签：java

我在导入 org.slf4j.Logger 和 org.slf4j.LoggerFactory 时遇到了问题，如何下载这两个类，如果是通过 jar 文件，如何从中导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:31:42.553

如果您确实有相应的 Jar 文件，则只需将其添加到您的项目中。如果你使用的是 Eclipse IDE，你可以点击“Project”菜单、“Properties”、“Java Build Path”、“Add External Jars...”，然后会出现一个文件选择器。选择 Jar 文件的位置并打开它。干得好。如果您使用的是其他 IDE，只需指定它，以便我们可以进一步帮助您处理您的 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:58:14.313

为了能够将任何类导入您的项目，应将此类类添加到应用程序的类路径中。

通常您不需要从库中提取类，因此在您的情况下，您需要从 slf4j-1.7.5.zip 添加 slf4j-api-1.7.5.jar 可在此处访问：[http ://www.slf4j.org /download.html](http://www.slf4j.org/download.html)

在这里您可以找到如何为 Eclipse 项目添加库的示例：http: [//www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

# java - 出现编译错误，我不明白

> ID：15713553
> 
> 赞同：0
> 
> 时间：2013-03-30T00:36:42.410
> 
> 标签：java, android, compiler-errors, timepicker

我是一个非常沮丧的新手！我真的不知道从哪里开始。我有一个基于傻瓜书中的应用程序。得到它的工作。然后尝试将其转换为使用 WIMMOne 对话框获取时间和日期。在一堆错误的开始之后，我加载了他们的一个样本并让它工作。然后我隔离了其中的代码并粘贴到我的示例中。我无法克服过去的错误。（eclipse不断添加自己的一些内容并没有帮助。有时我加载源代码并且所有语句（包括导入）都被标记为错误，有时我得到R.id，---错误，我什至有它将评论标记为错误。

但是，我已经清理了它并重新加载了足够多的时间，以至于我认为我遇到了一些真正的错误。

我的和示例代码之间有几个基本的区别：示例是一个大的活动 java 文件，我的是一个片段。我的时间对话框有一个单独的 java 文件。样本在一个文件中，所以我用这种方式编码。我的有两个菜单，用户可以从一个列表转到“详细”菜单。样本都是一个屏幕。

WIMM 有 2 个 JAR 文件，我的库中都有。

为了节省空间，我包含了第一部分，其中我遇到了 3 个错误，但如果需要，我很乐意提供所有这些。

第一个是样本。它可以工作，即使使用我的注释代码，也没有编译错误：谢谢，克拉克

```
 package com.test.medication;

    /**************************
     * Java Imports
     **************************/
    import java.util.Calendar;

    /******************************
     * android imports
     ******************************/
    import android.app.AlarmManager;
    import android.app.Dialog;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.Bundle;
    import android.text.format.Time;
    import android.util.Log;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;

    /******************************
     * Wimm imports
     ******************************/
    import com.wimm.framework.app.LauncherActivity;
    import com.wimm.framework.app.TextInputDialog;
    import com.wimm.framework.app.TimePickerDialog;
    import com.wimm.framework.app.TimePickerDialog.OnTimeSelectedListener;

    public class MedicationsActivity extends LauncherActivity 
    {

        /****************************
         * private globals
         ****************************/
        private TextInputDialog textDialog;
        private TimePickerDialog timeDialog;
        private long msToCount = 0;
        private static String textInput = "please enter pills";
        private EditText timeDisplay;
        private EditText pillsDisplay;
        private long newMs = 0;
        private int Hours;
        private int Minutes;
        private static int hoursToCount = 0;
        private static int minutesToCount = 0;
        private Calendar c ;
        private int mIndex = 0;
        private boolean textEntered = false;

    // get an store the simple name of this class into an String
    private static final String TAG = MedicationsActivity.class.getSimpleName();

     /***********************
     *  define constants
     **********************/
    // define id for both the time dialog, and the enter pills dialog
    static final int TIME_DIALOG_ID = 0;
    static final int PILLS_DIALOG_ID = 1;
    // the actions for the intent definitions posted 
    public static final String ACTION_POST_NOTIFICATION     = "com.test.medication.action.POST";
    public static final String ACTION_UPDATE_NOTIFICATION   = "com.test.medication.action.UPDATE";
    public static final String ACTION_CANCEL_NOTIFICATION   = "com.test.medication.action.CANCEL";

    //delay between views
    private static final int viewDelay      = 5000;  // ms

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

        //-----------------------------------------------
        // initialize time entry listener
            // pass current state
            super.onCreate(savedInstanceState);

            // open up main layout resource and upload into wimm 
            setContentView(R.layout.main);

            Log.d("MedsMC","S onCrt-1");

            // Subscribe listeners to the buttons and text fields
            Button okButton = (Button)findViewById(R.id.ok);
            Button pillsButton = (Button)findViewById(R.id.enterPills);
            pillsDisplay = (EditText)findViewById(R.id.entryMeds);
            timeDisplay = (EditText)findViewById(R.id.entryTime); 
            Log.d("MedsMC","S onCrt-2L" + timeDisplay);

            // set up the time picker dialog with initial time
            //and subscribe a listener upon the press of ok n the time dialog
            TimePickerDialog myTimerHandler = new TimePickerDialog(this);
            myTimerHandler.setTime(6, 0);
            myTimerHandler.setTimeSelectedListener(timeSetListener);
            Log.d("MedsMC","S onCrt-3myTH" + timeDisplay); 
```

这是我最新的 3 个错误：“TimePickerDialog”在多个地方使用并且总是有错误。

```
package com.dummies.android.taskreminder;
import java.text.SimpleDateFormat; 
import java.util.Calendar;  
import java.util.Date;

import android.app.DatePickerDialog.OnDateSetListener;
//import android.app.TimePickerDialog.OnTimeSetListener;
import android.content.ContentUris;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;   //
import android.os.Bundle;  //
import android.os.Handler; 
import android.support.v4.app.DialogFragment;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.app.LoaderManager.LoaderCallbacks;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.view.LayoutInflater;
import android.view.View;  //
//import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button; //
import android.widget.DatePicker;
import android.widget.EditText;  //
//import android.widget.TimePicker;
import android.widget.Toast;
import android.util.Log;  //
import android.text.format.Time;
import android.app.Dialog; //
import android.content.Context;
import android.content.Intent;

/*******************************************
 * wimm imports
 */

import com.wimm.framework.app.LauncherActivity;
//import com.wimm.framework.app.TextInputDialog;
mport com.wimm.framework.app.TimePickerDialog;
import com.wimm.framework.app.TimePickerDialog.OnTimeSelectedListener;
//import com.wimm.framework.app.DatePickerDialog;
//import com.wimm.framework.app.DatePickerDialog.OnDateSelectedListener;

public class ReminderEditFragment
             extends Fragment
             implements OnDateSetListener,
           //             OnTimeSetListener,
                        LoaderCallbacks<Cursor> 
   {

    private TimePickerDialog timeDialog;
    //private EditText timeDisplay;

    private static int intHours = 0;
    private static int intMinutes = 0;
    private long lngNewMs = 0;
    private Calendar calC ;

    // define constent to be used 
    private static final String DATE_FORMAT = "yyyy-MM-dd";
    private static final String TIME_FORMAT = "kk:mm";

    static final int TIME_DIALOG_ID = 0;
    static final int PILLS_DIALOG_ID = 1;

    public static final String DEFAULT_EDIT_FRAGMENT_TAG = "editFragmentTag"; 
    private EditText mTitleText;

    private EditText mBodyText;
    //private TextInputDialog textDialog;
    //private TextInputDialog mBodyDialog;

    //private TimePickerDialog timeDialog;
    private Button mTimeButton;

    //private Button timeDisplay;

    //private TimePickerDialog mTimeDialog;

    private Button mDateButton;
    private Button mConfirmButton;
    private Calendar mCalendar;

    //OK
    @Override
    public void onSaveInstanceState(Bundle outState)
       {
        super.onSaveInstanceState(outState);
        // save the calendar instance
            outState.putSerializable(CALENDAR, mCalendar);
       }

    private long mRowId;        

    //OK
    @Override
    public void onCreate(Bundle savedInstanceState)
       { 
        //-- house keeping
        super.onCreate(savedInstanceState);
        Log.d("RemindEF","S onCrt");

        if (savedInstanceState != null &&
            savedInstanceState.containsKey(CALENDAR) )
           {
             mCalendar = (Calendar) savedInstanceState.getSerializable(CALENDAR);
             Log.d("RemindEF","Cs onCrt:" + mCalendar);
           }
        else
           {
             mCalendar = Calendar.getInstance();
             Log.d("RemindEF","C onCrt:" + mCalendar);
           }
        Bundle arguments = getArguments(); 

        //-----------------
        //  retrieve row id from list
        if (arguments != null)
           {
            mRowId = arguments.getLong(ReminderProvider.COLUMN_ROWID);
            Log.d("RemindEF","A onCrt:" + mRowId);
               }                

        //-----------------------------------------------
        // initialize time entry listener
    //???????? ERROR: The method setContentView(int) is undefined for the type ReminderEditFragment
           setContentView(R.layout.reminder_edit);

           Log.d("RemindEF","X onCrt");

    //???????ERROR: The method findViewById(int) is undefined for the type ReminderEditFragment
           mTimeButton = (Button)findViewById(R.id.reminder_time); 
           Log.d("MedsMC","S onCrt-2L" + mTimeButton);

    //?????? ERROR: The constructor TimePickerDialog(ReminderEditFragment) is undefined
            TimePickerDialog myTimerHandler = new TimePickerDialog(this);
            myTimerHandler.setTime(6, 0);
            myTimerHandler.setTimeSelectedListener(timeSetListener);
            Log.d("MedsMC","S onCrt-3myTH" + mTimeButton); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:00:12.870

这主要是为了解释编译错误是什么*意思*。

* * *

> 错误：未为 ReminderEditFragment 类型定义方法 setContentView(int)

您正在调用`setContentView`上的方法`ReminderEditFragment`，但`ReminderEditFragment`没有这样的方法。

您似乎正在尝试调用`Activity.setContentView`. `this`但`this`不是`Activity`... 因为你的重构。

> 错误：方法 findViewById(int) 未定义 ReminderEditFragment 类型

同上，换一种`Activity`方法。

（我不是 Android 专家，但您似乎在 Fragment 上做一些您应该在 Activity 上做的事情。也许，您的 Fragment 类需要引用一些可用于这些调用的 Activity 实例。 . ?)

* * *

> 错误：构造函数 TimePickerDialog(ReminderEditFragment) 未定义

标准`TimePickerDialog`类有 2 个构造函数，但它们都不接受单个`ReminderEditFragment`参数。你需要看看`TimePickerDialog`javadoc ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:08:27.037

您正在复制在 an 中`Activity`使用的代码并在`Fragment`.

这将需要一些修改。

```
setContentView(R.layout.reminder_edit); 
```

这用于设置布局。它被称为内部`onCreate()`。

```
mTimeButton = (Button) findViewById(R.id.reminder_time); 
```

这用于获取对某个视图的引用。

在 a`Fragment`中，要设置布局并查找我们覆盖的视图`onCreateView()`：

```
@Override
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
    View v = inflater.inflate(R.layout.reminder_edit, null);
    mTimeButton = (Button) v.findViewById(R.id.reminder_time); 
    return v;
} 
```

```
TimePickerDialog myTimerHandler = new TimePickerDialog(this); 
```

构造函数的参数`TimePickerDialog`是一个`Context`对象。在 Activity`this`中是有效的，因为它会引用 Activity 的实例。在 Fragment 中，您应该`getActivity()`改为调用。

```
TimePickerDialog myTimerHandler = new TimePickerDialog(getActivity()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T01:12:02.480

1) Don't run your app, when active XML file.
If you did it, clean project and remove generated file

2) Аlways save project `Ctrl + Shift + S` after adding widgets to layout. After saving will generated an addresses of this widgets and will have no problem with
`The method findViewById(int) is undefined for the type ReminderEditFragment`

# mysql - 'where 子句中的未知列

> ID：15713555
> 
> 赞同：-1
> 
> 时间：2013-03-30T00:36:50.967
> 
> 标签：mysql

我已经阅读了网上几乎所有关于“where 子句中的未知列“dfsd”的线程，dfsd 是我使用 post 方法通过 html 表单输入的字符串.. php 文件（表单数据所在的位置） sent) 只检查上面的行是否是现有的用户名。

```
function authCheck($usr,$psw){
print $usr;

mysql_real_escape_string($usr);
$sql = "select usrNameMarket from marketusr where usrNameMarket=$usr";

$result = mysql_query($sql) or die(mysql_error());

$records=mysql_num_rows($result);  //elenxw gia eggrafes

        if($records){
                $queryData=mysql_fetch_array($result);  

                if($queryData['usrNameMarket']==$usr){
                    $usrNameChk="ok";
                }       

                else{
                $usrNameChk=null;
                }

        }

        else{
                $usrNameChk=null;
        }
rest of the file .... 
```

我从 MySQL 收到错误，告诉我该列不存在（尽管该值已正确传递，这就是为什么我使用 print 函数只是为了仔细检查它）...

我添加单引号：

```
$sql = "select usrNameMarket from marketusr where usrNameMarket='$usr'"; 
```

然后在执行 mysql_query 时出现语法错误...

然后我尝试了

```
$sql = "select usrNameMarket from marketusr where usrNameMarket='".$usr."'"; 
```

我仍然得到相同的语法错误。

我不知道出了什么问题我已经尝试了所有方法...是否有可能由于数据库结构或方案或该字段的数据类型（即 varchar）而导致该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:40:55.113

使用`marketusr.usrNameMarket`而不仅仅是`usrNameMarket`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:42:25.607

尝试：

```
$sql = "select usrNameMarket from marketusr where usrNameMarket='$usr'"; 
```

# java - 将自定义 jtable 模型表类作为参数传递

> ID：15713562
> 
> 赞同：2
> 
> 时间：2013-03-30T00:37:53.627
> 
> 标签：java, swing, netbeans, jtable

我有一个带有两个选项卡的 tappedpane 的 jframe。每个选项卡包含一个jtable，每个jtable都连接到一个单独的tablemodel jframe类有一个渲染器方法，可以将列的宽度调整为列中最长文本的长度renderer方法被硬编码到一个表模型中. 但是希望将 tablemodel 类作为变量传递给渲染器方法。

这是模型数据的代码

```
public class MyTableModel extends AbstractTableModel {

    private List<List<Object>> dataList = new ArrayList<>();
     private String[] header = { "ID","SUBJECT","LETTTER FROM","LETTER DATE","DATE RECEIED",
                                  "REMARKS","DATE DISPATCHED","DESTINATION OFFICE"};
     private int minRowCount = 5;

    public MyTableModel()
    {  }

    public List<List<Object>> getDataList() {
        return dataList;
    }

    public void setDataList(List<List<Object>> dataList) {       
        this.dataList = dataList;
        fireTableDataChanged();       
        fireTableStructureChanged();        
    }

    public void setHeader(String[] header) {
        this.header = header;
    }

    public String[] getHeader() {
        return header;
    }

    @Override
    public int getRowCount() {
        return Math.max(minRowCount, dataList.size());
    }

    @Override
    public int getColumnCount() {
        return header.length;
    }

    @Override
   public String getColumnName(int col) {
    return header[col];
   }

    @Override
    public Object getValueAt(int row, int col) { 
        Object value = null;
        if(row < dataList.size())      
        {value = dataList.get(row).get(col);}
        return value;
    }

    @Override
     public Class<?> getColumnClass(int column)
        {
            for (int row = 0; row < getRowCount(); row++)
            {   
                Object o = getValueAt(row, column);

                if (o != null)
                {
                    return o.getClass();
                }              
            }
            return Object.class;
        }
    } 
```

这是在 jframe 类中初始化 tabemdel 对象的代码

```
MyTableModel myModel = new MytableModel(); 
```

下面是渲染器方法的代码

```
 public final void setColumnWidth( )
    { int width = 0;  //width of column
      int headerWidth = 0; //width of header

     //create header renderrer 
      final TableCellRenderer headerRenderer = resultTable.getTableHeader().getDefaultRenderer(); 

        for(int myColumn = 0 ;myColumn < resultTable.getColumnCount(); myColumn++)
    {  width = 0;
       headerWidth = 0;
       width = 0;
   Component hcomp = headerRenderer.getTableCellRendererComponent(
           resultTable, resultTable.getModel().getColumnName(myColumn), false, false, 0, myColumn);
   headerWidth = Math.max(hcomp.getPreferredSize().width , headerWidth);
   resultTable.getColumnModel().getColumn(myColumn).setPreferredWidth(headerWidth);

   //iterate through the rows to find the widest cell
      for (int row = 0; row < resultTable.getRowCount(); row++) {
     TableCellRenderer renderer = resultTable.getCellRenderer(row, myColumn);
     Component comp = resultTable.prepareRenderer(renderer, row, myColumn);
     width = Math.max (comp.getPreferredSize().width, width);
      width = Math.max(width, headerWidth);

      //set the columnwith to the widest cell
      resultTable.getColumnModel().getColumn(myColumn).setPreferredWidth(width);
 }   
    }     } 
```

问题是每个表模型类都扩展了 AbstractModelTable

关于如何实现这一目标的任何建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:37:28.067

> 下面是渲染器方法的代码

那不是渲染器方法。这只是一种方法。

> 问题是每个表模型类都扩展了 AbstractModelTable

那没关系。渲染器属于表而不是模型。因此，您为 setColumnWidth() 方法发布的代码适用于任何 JTable。您真正需要做的是更改代码以接受您要使用的表的参数。所以该方法应该如下所示：

```
public void setColumnWidth(JTable table)
{
    ...
} 
```

现在在该方法中看到变量“resultTable”的任何地方，都应该将其更改为“table”。

另一种选择是使用[TableColumnAdjuster](http://tips4java.wordpress.com/2008/11/10/table-column-adjuster/)，它已经是一个单独的类，可以用于任何表。

# javascript - 每 10 秒从 iFrame 中的元素获取 html

> ID：15713563
> 
> 赞同：0
> 
> 时间：2013-03-30T00:38:01.053
> 
> 标签：javascript, jquery, iframe, element, replay

所以我一直在寻找一种可能的解决方案来制作一个javascript，jquery，它在iFrame中搜索某个类或id元素。然后取出里面的html。（例如。`<a id="link">Here's a link</a>`）。然后把它变成一个字符串，并且每 5 秒左右重播一次这个函数。有没有人知道这个或教程的好解决方案？

我试过这个功能`var inf = $('#iframeid').contents().find('#theid').html();`，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:44:11.547

试试这个：

```
function GetFrameData() {
    var $MyFrame = $("#iframeid");

    // You need to wait for the iFrame content to load first
    // So, that the click events work properly
    $MyFrame.load(function () {
        var frameBody = $MyFrame.contents().find('body');
        var inf = frameBody.find('#theid').html();
    });
}

// Call the function every 5 seconds
setInterval(GetFrameData, 5000); 
```

# java - (Java) 停止穿墙运动

> ID：15713574
> 
> 赞同：1
> 
> 时间：2013-03-30T00:39:06.257
> 
> 标签：java, collision-detection

我有由我正在创建的游戏的图像表示的实体对象。我能够检测到涉及矩形的简单碰撞，但我不确定如何阻止对象相互移动...

我不想要太多的物理模拟。我只是不希望任何物体能够相互穿过。如果实体撞到墙上，它就会停下来。如果墙撞到实体，墙就会停止。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:44:48.110

简单的答案是列出所有“实体”并检查它们是否存在冲突。让每个实体知道它自己的半径（用于圆形碰撞）或边界框（用于矩形碰撞）。然后有一个像下面这样的循环：

```
for (int x = entityList.count; i < 0; i--)
{
    for (int y = entityList.count; i < 0; i--)
    {
        if (x == y) continue; // Make sure you don't check to collide with yourself
        CheckIfCollides(entityList[x], entitylist[y]);
    }
} 
```

编辑：您可以在每次实体尝试更新其位置并检查以确保新位置有效并且不与任何东西碰撞时运行碰撞代码。

# c - 如果无符号类型不应该有负值，为什么我打开所有位时它是负数？

> ID：15713575
> 
> 赞同：1
> 
> 时间：2013-03-30T00:39:15.570
> 
> 标签：c, limit

```
#include <stdio.h>
#include <math.h>
#include <limits.h>

int main(void)
{
    unsigned long x = 0;

    x = x ^ ~x;
    printf("%d\n", x);

    x = (unsigned long)pow(2, sizeof(x)*8);
    printf("%d\n", x);

    x = ULONG_MAX;
    printf("%d\n", x);
    return 0;
} 
```

我在 Windows 7 上使用 CodeBlocks12.11 和 MinGW 4.7.0-1。由于某种原因，我无法让我的变量`x`获得最大可能的十进制值表示。为什么会发生这种情况，我相信这`x = ULONG_MAX`应该有效，但它也会导致`-1`，现在肯定是不对的！我也尝试在代码块之外编译它。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T00:40:14.360

您必须使用 打印无符号变量`u`。long 以 为前缀`l`，因此`lu`在这种情况下您需要。

```
printf("%lu\n", x); 
```

# c++ - 每个连接需要多少个套接字？

> ID：15713582
> 
> 赞同：0
> 
> 时间：2013-03-30T00:40:30.313
> 
> 标签：c++, c, winsock, winsock2

假设我们有一个带有套接字 sa 和 new_socket 的服务器程序。我正在使用的教程采用 socket sa 和 new_socket，以及两个`sockaddr_in`名为`server`and的结构`client`；然后将套接字绑定到 IP 地址：端口，然后调用`listen()`函数。返回时`listen`，程序调用

```
new_socket = accept(sa, (struct sockaddr*)&client, &length); 
```

我的问题是，假设有 3 个人在连接...我是否需要为每个`accept`函数提供 3 个不同的结构和 3 个不同的 new_sockets，比如说我是否希望我的服务器为连接到它的 3 个不同的客户端提供服务？

另外，为什么我们需要一个 new_socket`accept`呢？为什么有两个不同的插座 1 for`bind`和 1 for `accept`？不应该在`bind`ed 上执行套接字操作吗？

我正在尝试为套接字实现一个类，以使我更轻松，并作为练习我的 oop 技能的好方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:46:39.877

通常，您需要一个用于服务器的套接字。此套接字是您设置服务器正在侦听的端口并调用`accept()`以等待传入连接的位置。

此外，每个客户端连接都需要一个套接字。这是一个由 . 返回的新套接字`accept()`。这是必要的，因为服务器可以处理多个客户端。如果您对所有事情都使用一个套接字，则无法判断哪个客户端正在向您发送消息，或者指示要向哪个客户端发送回复。

# android - 活动中的 OnListItemClick

> ID：15713584
> 
> 赞同：1
> 
> 时间：2013-03-30T00:40:39.160
> 
> 标签：android, database, list, android-activity

在我的 Android 应用程序中，我有一个国家/地区列表，我可以在应用程序运行时随时添加新条目。该列表保存在数据库中。我尝试了几种不同的方法来尝试实现 OnListItemClick，但我无法让它工作。这是我的课程，其中包含我的列表：

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;

public class MainActivity extends Activity
{
    private DBManager db;
    Cursor cursor;
    Button goEdit;
    ListView listContent;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.initial_activity);

        listContent = (ListView)findViewById(R.id.list);
        goEdit = (Button)findViewById(R.id.goedit);

        //Open database
        db = new DBManager(this);
        db.openToRead();

        cursor = db.queueAll();

        String[] from = new String[]{DBManager.KEY_ID, DBManager.KEY_YEAR, DBManager.KEY_CONTENT, DBManager.KEY_DESC};
        int[] to = new int[]{R.id.editcountry, R.id.yeartext, R.id.countrytext};

        SimpleCursorAdapter cursorAdapter =  new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);

        listContent.setAdapter(cursorAdapter);

        //go to add/delete screen
        goEdit = (Button)findViewById(R.id.goedit);
        goEdit.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                Log.i("Test", "Now moving to the edit activity");
                Intent intent = new Intent(MainActivity.this, EditList.class);
                startActivity(intent);
            }
        });
    }

    //life cycles
    protected void onPause()
    {
        super.onPause();
        db.close();
    }

    @Override
    protected void onDestroy() 
    {
        super.onDestroy();
        db.close();
        finish();
    }
} 
```

这是我的课程，我可以选择在列表中输入新的国家：

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class EditList extends Activity
{
    private DBManager db;
    Cursor cursor;
    EditText editCountry, editYear, editDesc;
    Button add, delete, back;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editCountry = (EditText)findViewById(R.id.editcountry);
        editYear = (EditText)findViewById(R.id.edityear);
        editDesc = (EditText)findViewById(R.id.editdesc);
        add = (Button)findViewById(R.id.add);
        delete = (Button)findViewById(R.id.delete);
        back = (Button)findViewById(R.id.backmain);

        //Open database and fill it with content, then close it
        db = new DBManager(this);
        db.openToWrite();

        cursor = db.queueAll();

        add.setOnClickListener(buttonAddOnClickListener);
        delete.setOnClickListener(buttonDeleteAllOnClickListener);

        //handle switching back to main screen
        Log.i("Test", "back to main");
        back = (Button)findViewById(R.id.backmain);
        back.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                db.close();

                //can't use "finish()" because then the list won't refresh with the new data
                Log.i("Test", "Going back to the main screen");
                Intent intent = new Intent(EditList.this, MainActivity.class);
                startActivity(intent);
            }
        });
    }

    //insert new country button
    Button.OnClickListener buttonAddOnClickListener = new Button.OnClickListener()
    {  
        @Override
        public void onClick(View arg0) 
        {
            Toast.makeText(getApplicationContext(), "Added!", Toast.LENGTH_LONG).show();

            int year = Integer.parseInt(editYear.getText().toString());
            String country = editCountry.getText().toString();
            String desc = editDesc.getText().toString();

            db.insert(year, country, desc);

            updateList();

            //clear text fields after use
            editYear.setText(null);
            editCountry.setText(null);
            editDesc.setText(null);
        }
    };

    //delete all button
    Button.OnClickListener buttonDeleteAllOnClickListener = new Button.OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            Toast.makeText(getApplicationContext(), "Your list has been deleted!", Toast.LENGTH_LONG).show();
            db.deleteAll();
            updateList();
        }
    };

    private void updateList()
    {
        cursor.requery();
    }

    @Override
    protected void onDestroy() 
    {
        super.onDestroy();
        db.close();
        finish();
    }
} 
```

我之前在一个数据静态保存在数组中的类中实现了 OnListItemClick。该类还扩展了 ListActivity，而这一类没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T01:10:19.733

The difference between `ListActivity` and a standard `Activity` is that the `ListActivity` handled the `OnItemClickListener` interface mapping for you, and just provided an extra callback method. Without `ListActivity`, you'll need to add that plumbing yourself; i.e.

```
public class MainActivity extends Activity implements AdapterView.OnItemClickListener
{
    ...
    ListView listContent;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        ...

        listContent.setOnItemClickListener(this);

        ...
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
        //Callback logic here for clicked items
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:46:12.563

在您的 MainActivity 添加

```
@Override
public void onListItemClick(ListView l, View v, int position, long id)
{
        super.onListItemClick(l, v, position, id);

        // a list item is click do whatever you want
} 
```

# java - 是否可以使用递归来实现 BFS？

> ID：15713590
> 
> 赞同：0
> 
> 时间：2013-03-30T00:41:13.217
> 
> 标签：java, algorithm

这是我用伪代码执行 BFS 的算法。

```
public void bfs_usingQueue() {
    Queue<Vertex> queue = ...
    // 1\. visit root node
    ...
    // 2\. Put root vertex on queue
    ...
    while(!queue.isEmpty()) {
        // 3\. Get the vertex at top of cue 
        // 4\. For this vertex, get next unvisited vertex 
        // 5\. Is there is an unvisited node for this vertex?
             // 5a. Yes.
             // 5b. Visit it.
             // 5c. Now add it to que. 
        // 6\. No there is not one unvisited node for this vertex.
             // 6a. Pop current node from que as it has no other unvisited nodes.
    }

} 
```

我正在努力使用递归来实现这一点。有小费吗？

我尝试：

```
private void bfs_recursion() {
    // begin with first vertex
    bfs_recursion(vertexes[0]);
}

private void bfs_recursion(Vertex vertex) {
    // visit first
    visitVertex(vertex);

    // get next unvisitedVertex 
    Vertex unvisitedVertex = ...
    if (unvisitedVertex != null) {
        visitVertex(unvisitedVertex);
        bfs_recursion(vertex);
    } else {
        bfs_recursion(unvisitedVertex);
    }
} 
```

但这会失败，因为当一个顶点没有更多边时，它应该回到第一个边而不是最后一个？卡住？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:11:45.370

您`bfs_recursion()`还可以使用顶点索引参数，例如，`-1`指示“处理父级，而不是子级”：

```
private void bfs_recursion(Vertex vertex, int index) {
   if (index==-1) {
      visitVertex(vertex);
      bfs_recursion(vertex, 1);
   } else {
      visitVertex(getChild(index));
      bfs_recursion(vertex+1);
   } 
```

# c - 拆分 Unix 命令以与 exec 一起使用

> ID：15713594
> 
> 赞同：2
> 
> 时间：2013-03-30T00:41:58.647
> 
> 标签：c, unix, exec, ansi

我有一个程序，它从输入中获取命令，然后使用它执行它`execl`（它必须是来自`execvp`家庭的功能）。现在，假设输入行是`in`，我可以简单地使用`execl(allBeforeFirstSpaceFromIn, in);`，还是必须`in`分成更小的字符串？如果是这样，我可以简单地将所有空格更改为`\0`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T00:52:25.070

所以你的输入是一个字符串，比如：

```
"/bin/cat file1 file2" 
```

不，您不能只将一个参数传递`"/bin/cat"`给`execl`，并`"file1 file2"`作为另一个参数传递。这将导致`/bin/cat`尝试打开一个名为`file1 file2`. 您希望它打开两个文件`file1`和`file2`，这意味着您需要传递三个单独的参数。

`execl`可能不适合你正在做的事情。这是一个可变参数函数；要调用它，您必须*在编写代码时*知道要传递给它的参数数量。所以这：

```
execl("/bin/cat", "file1", "file2"); 
```

应该可以，但是您不能从字符串中构建该调用。

您想改用其中一种`execv*()`功能。例如：

```
int execv(const char *path, char *const argv[]); 
```

`argv`参数是一个指向字符的指针，它应该指向一个元素数组的第一个元素`char*`，每个元素都指向一个以 - 结尾的字符串的第一个`'\0'`字符。

因此，您必须构建该指针数组，并将每个指针初始化为指向一个字符串参数。

现在，如果您有一个包含字符串的数组：

```
"/bin/cat file1 file2" 
```

一种方法是用空字符替换空格：

```
"/bin/cat\0file1\0file2\0" 
```

（最后一个`\0`已经在那里）。然后，您可以构造您的数组，`char*`以便每个元素都指向数组的开头，或者就在`'\0'`您刚刚创建的字符之一之后。每个这样的指针都是指向字符串的有效指针。

但我不一定会推荐这种方法。如果您的输入字符串碰巧在单词之间包含多个空格（您可能希望将其视为单个空格），或者您想做一些花哨的事情，例如扩展通配符，您将会遇到问题。我建议您自己分配数组并将适当的数据复制到其中。通过重复使用输入字符串节省的空间是不值得的。

当然最简单的方法是：

```
char command[] = "/bin/cat file1 file2";
system(command);
exit(0); 
```

它将命令字符串传递给`/bin/sh`，它会为您完成所有工作。但是你不会学习如何使用这些`exec*()`功能，我认为这是本练习的重点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T00:51:31.900

是的，您需要将参数作为单独的字符串传递。

对于`execlX`函数，您需要将每个参数作为参数传递：

```
execl(prog, arg1, arg2,...); 
```

对于`execvX`函数，您需要传递一个 c 风格的字符串数组：

```
char **argv = /* ... */;
argv[0] = "arg1";
argv[1] = "arg2";
execv(prog, args); 
```

要拆分输入字符串，您可以使用`strtok`，或者只是执行以下操作：

```
char **argv = /* malloc stuff */;
char *prev = in;
cnt = 0;
while (in[0]) {
  if (in[0] == ' ') {
    in[0] = 0;
    argv[cnt++] = prev;
    prev = in + 1;
  }
  in++;
}
argv[cnt++] = prev;
argv[cnt]   = NULL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T00:53:02.900

There are basically two ways to call *exec*, either provide all arguments one by one (*execl*) or provide an array of arguments (*execv*).

If you provide a long string having all arguments separated with `\0` *exec* will not understand that other arguments exist after the first one.

So you have either to

*   use *execl* and provide a list of arguments, eg (..., in, in+x, in+y, NULL)
*   or make an array of `(char *)` strings each of the elements pointing to `in`, `in+x`, `in+y`, ..., and use *execv*

with `x` and `y` (...) being the index in the long string of the arguments, e.g. `in` being

```
command\0arg1\0arg2\0
^0       ^8    ^13 
```

`x` would be 8 and `y` would be 13\. And you could create an array of strings

```
char *args[] = { in, in+x, in+y, NULL }; 
```

then use *execv* `execv(in, args);`

# 3d - 如何用 Three.js 制作戒指？

> ID：15713602
> 
> 赞同：1
> 
> 时间：2013-03-30T00:42:29.963
> 
> 标签：3d, three.js

我正在尝试使用 Three.js 制作戒指的 3D 模型（就像你戴在手指上的戒指，只是一个圆形戒指）。

我想我可以使用管几何类/对象：

[https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/TubeGeometry.js](https://github.com/mrdoob/three.js/blob/master/src/extras/geometries/TubeGeometry.js)

查看源代码似乎我需要这些参数：

```
path, segments, radius, radiusSegments, closed, debug 
```

唯一强制性的是路径。但是，我不知道如何设置路径：

[https://github.com/mrdoob/three.js/blob/master/src/extras/core/Path.js](https://github.com/mrdoob/three.js/blob/master/src/extras/core/Path.js)

[http://mrdoob.github.com/three.js/docs/57/#Reference/Extras.Core/Path](http://mrdoob.github.com/three.js/docs/57/#Reference/Extras.Core/Path)

[http://mrdoob.github.com/three.js/docs/57/#Reference/Extras.Core/CurvePath](http://mrdoob.github.com/three.js/docs/57/#Reference/Extras.Core/CurvePath)

是否有任何教程、文档或代码片段可以教我如何设置路径？

If there's anything else you can send me to guide me in making a 3D model of a ring, that would be greatly appreciated. I'm not even sure if using the tube geometry class/object would work, but that's just my first try at it.

Thank you for your time and take care!

Update: Using TorusGeometry, I've got this: ![Default Torus](../Images/fd6be4e4685e4b2d17bb63862c5ddc47.png)

I'm still working on moving the object around so I can see the other "sides" of the object, but was wondering if it's possible to "flatten" the outer and inner walls of the Torus. I'll post another question and link to it from here if I can't figure out how to view the torus and "flatten" the inner/outer walls.

Thanks again for looking!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T00:47:35.493

It is easier than that.

```
THREE.TorusGeometry( radius, tubeRadius, radialSegments, tubularSegments ) 
```

# javascript - Does JSON.stringify recognize properties defined with Object.defineProperty?

> ID：15713605
> 
> 赞同：15
> 
> 时间：2013-03-30T00:42:52.350
> 
> 标签：javascript

Does `JSON.stringify` work with objects that are created like

```
obj = {}
Object.defineProperty(obj, 'prop', {
  get: function() { return 1 }
  set: function(value) { ... }
}) 
```

It returns `{}` when called on this object.

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-30T00:46:57.493

You might want to set the enumerable option to true, like this:

```
Object.defineProperty(o, 'test', {
    get: function () { return 1; },
    enumerable: true
}); 
```

# ruby-on-rails - Ruby on Rails 使用单个表单为不同的类保存一个类的多个实例

> ID：15713607
> 
> 赞同：0
> 
> 时间：2013-03-30T00:43:12.350
> 
> 标签：ruby-on-rails, ruby, object, save, form-for

作为背景知识，我正在制作一个系统，注册用户可以在其中发布艺术品赏金。他们说出他们想要什么，并将其发布为公开可见的赏金。用户也可以作为艺术家注册到系统中。

但诀窍是允许发布赏金的用户指定允许接受赏金的注册艺术家的子集。我想我需要通过表格来获得赏金是有用的`form_for`工具......

```
<%= form_for @bounty do |bounty_form| %>
<div class="field">
    <%= bounty_form.label :name %>
    <%= bounty_form.text_field :name %>
</div>
<div class="field">
    <%= bounty_form.label :desc %>
    <%= bounty_form.text_area :desc %>
</div>
... 
```

以这种方式保存 Bounty 类的新实例很容易。但问题是我还想同时保存 Candidacies 类的多个实例，这取决于用户在保存此赏金时（通过复选框）选择了哪些艺术家。因此，假设系统中只有 2 位艺术家，Artist1 和 Artist2，用户应该能够选择 1、2、两者都不选择，或者两者都选择，并且它应该与赏金一起创建候选人。

我知道`accepts_nested_attributes_for`，但它似乎对创建类的单个实例很有用，例如在保存人员对象时创建地址对象。我需要的是一种在单个表单提交上保存多个（0-n）类的方法。

这里有一些参考：

赏金只是名称、描述、价格……诸如此类的东西。form_for 最初是为这张表创建的。

```
# == Schema Information
#
# Table name: bounties
#
#  id             :integer          not null, primary key
#  name           :string(255)      not null
#  desc           :text             not null
#  price_cents    :integer          default(0), not null
#  price_currency :string(255)      default("USD"), not null
#  rating         :boolean          default(FALSE), not null
#  private        :boolean          default(FALSE), not null
#  url            :string(255)
#  user_id        :integer          not null
#  accept_id      :integer
#  reject_id      :integer
#  complete_id    :integer
#  created_at     :datetime         not null
#  updated_at     :datetime         not null
# 
```

然后在保存赏金时需要填充这个小的多对多连接表，具体取决于用户的提交。

```
# == Schema Information
#
# Table name: candidacies
#
#  id         :integer          not null, primary key
#  user_id    :integer          not null
#  bounty_id  :integer          not null
#  created_at :datetime         not null
#  updated_at :datetime         not null
#

class Candidacy < ActiveRecord::Base
  attr_protected :id, :user_id, :bounty_id

  #Many to many join table between user and bounty.
  belongs_to :user
  belongs_to :bounty

  validates :user_id, presence: true
  validates :bounty_id, presence: true
end 
```

最后，系统中的艺术家由`@artist`实例变量提供。

总结：我需要能够保存（0-n）个候选人以及单次保存的赏金，最好使用form_for。

总的来说，我对 Rails 和编程非常陌生。像许多人一样，我正在学习 rails 作为我第一次涉足开发，我很感激有这样的社区可以提供帮助。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T06:22:49.417

> 我需要的是一种在单个表单提交上保存多个（0-n）类的方法。

茧宝石对于创建多个嵌套表单非常有帮助。它允许您添加一个按钮，该按钮允许用户单击以添加多个嵌套表单，因此他们可以在一次提交时创建任意数量的表单。它还允许他们在一次提交时根据需要删除它们。

[https://github.com/nathanvda/cocoon](https://github.com/nathanvda/cocoon)

宝石“茧”

# java - Java Spring - 从控制器内执行javascript？

> ID：15713608
> 
> 赞同：0
> 
> 时间：2013-03-30T00:43:35.967
> 
> 标签：java, spring-mvc

在我的 .jsp 页面中，我有一个调用控制器中的函数的按钮。单击此按钮将启动下载。

```
<input type=button onClick="location.href='reporting/GroupbasedPreset?rows=24'" value='Last 24 Hours'> 
```

单击此按钮时，控制器会进行一些数据库调用并返回结果。我想要做的是，如果结果为空，则出现一个 javascript 弹出窗口，而不是开始下载。有没有办法从 spring 控制器中调用 javascript？

我希望控制器做什么的基本概念。

```
int rows = makethedbcall();
if (rows == 0) {
   javascript popup;
   return;
} else {
   continue with download;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:07:02.003

我能想到的一种方法是，当结果为空时，从控制器返回一个 JSP。

控制器代码将具有：

```
if (rows == 0) {
// Assuming result-empty would resolve to result-empty.jsp
   return "result-empty";
} else {
   continue with download;
} 
```

JSP (result-empty.jsp) 可能只有一个类似这样的脚本标记：

```
<script>
    window.onload = function() {
       alert("Result is empty");
    }
</script> 
```

# javascript - 如何使用 jQuery 永远循环引导工具提示？

> ID：15713609
> 
> 赞同：1
> 
> 时间：2013-03-30T00:43:36.587
> 
> 标签：javascript, jquery, loops, twitter-bootstrap, tooltip

我的网站上有一些缩略图，它们使用 Twitters Bootstrap 工具提示来显示每个缩略图的名称，我想要做的是遍历每个缩略图，延迟 2 秒显示工具提示，然后将其隐藏为下一个弹出。我尝试了几种方法，但没有任何效果。

我做到了这样的事情，但那不起作用。

```
$("[rel=tooltip]").each(function (i) {
      $id=$(this).attr('id');
      $($id).tooltip('show');
  }); 
```

这是我的布局的 JSFiddle：http: [//jsfiddle.net/BWR5D/](http://jsfiddle.net/BWR5D/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:04:07.957

尝试以下操作：

```
var ttid = 0, tooltipIds = [];
$("a[rel=tooltip]").each(function(){
    tooltipIds.push(this.id);
});

var iid = setInterval(function(){
    if (ttid) $('#'+tooltipIds[ttid-1]).tooltip("hide");
    if (ttid === tooltipIds.length) ttid = 0;
    $('#'+tooltipIds[ttid++]).tooltip("show");
}, 2000); 
```

*   您可以停止显示工具提示：`clearInterval(iid);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:21:50.983

以下应该隐藏当前打开的工具提示，然后显示下一个。使用当前索引与缓存元素的长度来确定何时重新开始

```
/* cache elements*/
var $els=$("a[rel=tooltip]").tooltip(), index=-1;

var tipLoop=setInterval(function(){
    index++;
    index =  index < $els.length ? index : 0;
    $els.tooltip("hide").eq( index).tooltip('show');    
},2000) 
```

演示：http: [//jsfiddle.net/BWR5D/1/](http://jsfiddle.net/BWR5D/1/)

# .net - 在 .NET 加载项和主机之间共享资源

> ID：15713610
> 
> 赞同：0
> 
> 时间：2013-03-30T00:43:46.240
> 
> 标签：.net, add-in, .net-assembly, maf, system.addin

我开发的应用程序使用带有 .NET 插件功能的插件，由`System.AddIn`. 我的主机应用程序以及加载项**共享一些资源**，例如 WPF 嵌入字体和 XAML 图标。我想**避免将它们包含在 host 和 add-ins**中。有没有什么方法可以在没有太多复杂性的情况下实现这一目标？

我的应用程序已经包含 7 个部分：主机、主机端视图、主机端适配器、合同、插件端适配器、插件端视图，最后是插件。我看到的问题是，当宿主加载加载项程序集时，加载项不可能访问位于宿主程序集中的资源。

插件提供主机使用的服务。我希望我的主机提供加载项消耗的资源。

一种可能的解决方案是引入另一个包含所有资源的程序集，主机和加载项都可以访问该程序集。该解决方案的积极/消极方面是什么？就像，当它不是合同时，加载项可以依赖这个程序集的存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:46:06.063

您也可以通过为主机添加合同来向加载项公开主机。然后加载项将能够请求主机可以提供的资源。查看团队提供的[基本自动化对象模型](http://clraddins.codeplex.com/releases/view/9474)示例。`System.AddIn`在那里，您将找到`IHostObjectContract`主机合同，在初始化期间提供给每个加载项 ( `IAutomationAddInContract.Initialize`)。

使用共享程序集的其他方法也是可能的。请记住，这`System.AddIn`不仅仅是一个图书馆。如果您不遵循他们的指导方针，您可能会失去一些功能。通常首先失去的是版本控制。通过添加共享程序集，您将面临丢失版本控制的风险。如果您可以接受它，或者如果您确定共享程序集的公共类型永远不会改变，那么就去做吧。

# c++ - 内存运行时错误：我们在哪里删除这个指针

> ID：15713611
> 
> 赞同：0
> 
> 时间：2013-03-30T00:44:02.083
> 
> 标签：c++, pointers, memory-leaks

在下面的四种方法中，只有更好的是我们应该做的。我们希望在这里动态分配以避免错误的函数返回。但是，**我们在哪里删除 f？**在调用 better() 的函数处删除？但是在那种情况下不再有 f 了。

```
Foo *bad() {
  Foo f;
  return &f;
}

Foo &alsoBad() {
  Foo f;
  return f;
}

Foo mediocre() {
  Foo f;
  return f;
}

Foo * better() {
  Foo *f = new Foo;
  return f;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T00:47:35.483

> 但是在那种情况下不再有 f 了。

好吧，指针`f`超出了范围，这是真的，但我们仍然返回指向指向的同一个对象的指针`f`。

因此，我们仍然拥有该对象的句柄，并且我们仍然可以调用`delete`返回的指针。事实上，您可以`delete` *在*使用`new`.

你需要注意的是：

*   you do indeed invoke `delete` at some point for each object allocated with `new` (otherwise you have a memory leak);
*   you do not call `delete` more than once for the same object, otherwise you get undefined behavior;
*   you do not dereference a pointer which points to an object that has been destroyed (i.e. a "dangling pointer"), otherwise you get undefined behavior.

In general, manual memory management through `new` and `delete` is discouraged in Modern C++, and ownership policies should be realized through *smart pointers* instead. **OR...**

> In the four method below, only better is what we should do

**Not exactly**. In fact, I would say we should definitely not do `better()` - although we *could* do a version of `better()` modified to create and return a smart pointer rather than an owning raw pointer.

However, function `mediocre()` is actually pretty good, and that is for two reasons:

1.  First of all because it is very likely that the compiler will elide the call to the copy constructor and perform [**(Named) Return Value optimization**](http://en.wikipedia.org/wiki/Return_value_optimization), thus resulting in no run-time overhead;
2.  Secondly, because thanks to C++11's move semantics, it is possible to equip `Foo` with a *move constructor* that makes returning by value efficient in most cases even when no elision is performed.

Moreover, as [Zoidberg](https://stackoverflow.com/users/142019/zoidberg) correctly mentions in the comments, you should not use pointers at all if you do not really need them. Unique ownership can often by realized by creating objects with automatic storage duration (aka "on the stack"), and move semantics makes this practice efficient. Pointers should be created only [*when you need reference semantics*](https://stackoverflow.com/questions/14539624/memory-management-patterns-in-c/14539873#14539873).

# c# - 来自动作视图的 MVC 4 C# 日历小部件

> ID：15713615
> 
> 赞同：0
> 
> 时间：2013-03-30T00:44:26.130
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我在 MVC 应用程序中使用 HTML、CSS 和 C# 创建了一个网络日历。HTML 在一个视图中，我有一个控制器，它带有一个初始化日历并在视图上显示正确日期的操作。

它按预期工作，但问题在于我想将此日历嵌入到由不同操作控制并加载不同模型的不相关视图中的几个页面中。

我可以复制粘贴视图代码并对模型进行必要的调整，但这并不理想。我试过了，`RenderAction`但问题是当我使用按钮导航到不同的月份时，我会离开初始视图。例如：

```
@Html.ActionLink("‹", "Calendar", 
new { month = Model.RequestedDateTime.Month - 1, year = 
Model.RequestedDateTime.Year }) 
```

有没有办法修改这种行为？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:40:54.463

Html.ActionLink，总是创建一个正常的链接，具有共同的行为。如果您想共享您的日历。为避免冗余代码，您可以将日历重新设计为局部视图，并将链接替换为例如标签。将 ajax 函数绑定到 label-click-event 以刷新日历。就像是：

```
@Html.Label("<", new { onclick="pageMonthBack("+Model.RequestedDateTime.Month - 1+", " Model.RequestedDateTime.Year+");" }) 
```

我会将调用的 ajax 函数放在单独加载的脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T06:48:30.377

我以类似于 developer10214 建议的方式解决了这个问题。我使用了一个 div 并在其中使用了`Render.Action`. 然后我使用了以下代码

```
 $(function () {
 $("#cal").on('click', "#backwards", function () {
 $.ajax({
    url: "Home/Calendar?target=backwards",
    cache:false,
    type: "GET",
    success: function (result) {
        $("#cal").html(result);
    }
});
});
}); 
```

在包含页面中。而且我根本没有使用 ActionLink。

# php - 多对一原则不会级联持续存在

> ID：15713619
> 
> 赞同：0
> 
> 时间：2013-03-30T00:44:47.833
> 
> 标签：php, doctrine-orm, doctrine

我正在尝试执行以下操作：

```
/**
 * @Entity
 */
class Player {

    /**
     *@Column
     *@Id
     */
     private $uuid; //gets assigned a Uuid in the constructor

    /**
     * @ManyToOne(targetEntity="Team", cascade={"persist"})
     * @JoinColumn(referencedColumnName="uuid")
     */
     private $team;

     public function setTeam(Team $team) {
         $this->team = $team;
     }

     //...
}

/**
 * @Entity
 */
class Team {
    /**
     * @Column
     * @Id
     */
    private $uuid; //gets assigned a Uuid in the constructor

    //...
}

$player = new Player;
$team = new Team;
$player->setTeam($team);
$entityManager->persist($player);
$entityManager->flush(); 
```

团队没有持久化到数据库中。

我不想打电话`$entityManager->persist($team)`，因为在我的情况下，团队是在我不了解持久性的代码的一部分中创建的。

我的期望是该`cascade={"persist"}`选项应该使 EntityManager 也保留团队。为什么我的期望是错误的，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:05:16.727

我没有弄错......这按预期工作！

再看一遍，在将 Team 添加到 Player 之后，从来没有出现过同花顺。
再次阅读我自己的问题，我意识到我错过了什么......
我应该更频繁地和我的橡皮鸭说话，所以看起来......

# regex - nᵗʰ 出现时的正则表达式拆分

> ID：15713621
> 
> 赞同：-1
> 
> 时间：2013-03-30T00:44:59.783
> 
> 标签：regex

我有一个存储在 Hive 中的字符串，我想在第 4^次出现`,`（或任何其他字符）时拆分文本。

如果有人能给我关于正则表达式的提示，我将不胜感激。

正文如下：

> The Band,The Band,,Up On Cripple Creek (2000 Digital Remaster),2000,Greatest Hits,The Band,,The Weight (2000 Digital Remaster),2003,Rhythm Of The Rain,The Cascades,,Rhythm Of The Rain ( LP版），2005，编年史第一卷，Creedence清水复兴，，谁来停雨，1976，完整的太阳单曲，卷。1，约翰尼·卡什，，我走这条线，2001，精选，鲍勃·西格，，逆风，1980，他们的精选，老鹰队，，Lyin' Eyes，1975，约翰尼·霍顿的精选，约翰尼·霍顿，北去阿拉斯加，1987 年，超级热门歌曲，马蒂·罗宾斯，，你给了我一座山，1969 年，最伟大的歌曲，鲍勃·西格，，夜间行动，1976 年，你好，达林 15 #1 次热门歌曲，康威·特威蒂，，这只是让人相信，2003 年,选集,肯尼·罗杰斯和第一版,,鲁比,不要把你的爱带到镇上,1996,最热门歌曲,尼尔杨,,老人,2004,收获,尼尔杨,,黄金之心,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:50:01.673

## 正则表达式...

```
/         # Start regex
(         # Start group
[^,]*,    # not `,` - zero or more times (*) followed by `,`
){4}      # repeat group four times
/g        # match globally (using String.match) 
```

## 全部一起...

```
console.log( str.match(/([^,]*,){4}/g) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:35:41.747

用逗号分割，然后再次加入一个简单的循环......

```
var arr, i, out, str;

str = "The Band,The Band,,Up On Cripple Creek (2000 Digital Remaster),2000,Greatest Hits,The Band,,The Weight (2000 Digital Remaster),2003,Rhythm Of The Rain,The Cascades,,Rhythm Of The Rain (LP Version),2005,Chronicle Volume One,Creedence Clearwater Revival,,Who'll Stop the Rain,1976,The Complete Sun Singles, vol. 1,Johnny Cash,,I Walk the Line,2001,Greatest Hits,Bob Seger,,Against The Wind,1980,Their Greatest Hits,The Eagles,,Lyin' Eyes,1975,Johnny Horton's Greatest Hits,Johnny Horton,,North To Alaska,1987,Super Hits,Marty Robbins,,You Gave Me A Mountain,1969,Greatest Hits,Bob Seger,,Night Moves,1976,Hello Darlin' 15 #1 Hits,Conway Twitty,,It's Only Make Believe,2003,Anthology,Kenny Rogers & The First Edition,,Ruby, Don't Take Your Love To Town,1996,Greatest Hits,Neil Young,,Old Man,2004,Harvest,Neil Young,,Heart Of Gold,2009,The Very Best Of,The Springfields,,Silver Threads And Golden Needles,2011,The Best Of The Statler Brothers,The Statler Brothers,,Susan When She Tried,1987,The Definitive Collection,The Statler Brothers,,The Class Of '57,2005,The Definitive Collection,The Statler Brothers,,I'll Go To My Grave Loving You,2005,Greatest Hits: 1974-1978,Steve Miller Band,,The Joker,2006,Greatest Hits: 1974-1978,Steve Miller Band,,Rock'n Me,2006,Early Girl 7\" Hits,Gale Garnett,,We'll Sing In The Sunshine,2010,King of the Road,Various Artists,,I Can't Stop Loving You - Don Gibson,2004,America's Troubador,Willie Nelson,,Angel Flying To Close To The Ground,2005,Their Greatest Hits,The Eagles,,Take It To The Limit,1975,Their Greatest Hits,The Eagles,,Desperado,1973,Highwayman,The Highwaymen,,Desperados Waiting For A Train,1985,Super Hits,Marty Robbins,,My Woman, My Woman, My Wife,1970,Super Hits,Marty Robbins,,Some Memories Just Won't Die,1982,Highwayman,The Highwaymen,,Committed To Parkview,1985,Greatest Hits - Roy Clark,Roy Clark,,Yesterday When I Was Young,1995,Greatest Hits - Roy Clark,Roy Clark,,I Never Picked Cotton,1995,Simon & Garfunkel's Greatest Hits,Simon & Garfunkel,,Bridge Over Troubled Water [Live],1970,Collection,The Oak Ridge Boys,,Y'all Come Back Saloon,1977,Super Hits,Vern Gosdin,,Chiseled In Stone,1987,Super Hits,Vern Gosdin,,Who You Gonna Blame It On This Time,1987,The Very Best Of John Denver [Disc 2],John Denver,,Rocky Mountain High,1972,The Very Best Of John Denver [Disc 2],John Denver,,Take Me Home, Country Roads,1971,Souvenirs,Vince Gill,,Never Knew Lonely,1995,Souvenirs,Vince Gill,,When I Call Your Name,1995,Souvenirs,Vince Gill,,Pocket Full Of Gold,1995,Greatest Hits - Waylon Jennings,Waylon Jennings,,Bob Wills Is Still King,2000,Greatest Hits - Waylon Jennings,Waylon Jennings,,Just To Satisfy You,2000";

arr = str.split(/,/);

out = [];

i = 0;

while (i < arr.length - 4) {
  i += 4;
  out.push("" + arr[i] + ", " + arr[i + 1] + ", " + arr[i + 2] + ", " + arr[i + 3]);
}

console.log(out); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T00:59:38.520

```
^([^,]*,[^,]*,[^,]*,[^,]*,)(.*)$ 
```

应该给你两个字符串，1）直到并包括第四个逗号的部分，以及 2）字符串的其余部分。

# python - Python 库

> ID：15713624
> 
> 赞同：0
> 
> 时间：2013-03-30T00:45:24.843
> 
> 标签：python, pip, easy-install

我迫切需要一个跨平台框架，因为我有大量的 .NET 产品正试图移植到 Linux。我已经开始使用 Python/pyQt 和标准库，在我尝试导入非标准库之前一切都很顺利。我听说了 pip 和 easy_install ，对此我完全感到困惑。

我的产品需要附带执行它们所需的一切，因此在 .NET 世界中，我只需将我的 DLL（或许可的 DLL）与我的产品打包在一起。

作为测试台，我正在尝试导入这个名为 requests 的库：[https ://github.com/kennethreitz/requests](https://github.com/kennethreitz/requests)

I've got an `__init__.py` file and the library source in my program directory but it isn't working. Please tell me that there is a simple way to include libraries without needing any kind of extra package installer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T06:42:20.790

I would suggest you start by familiarizing yourself with python packages (see [the distutils docs](http://docs.python.org/3/distutils/introduction.html). Pip is simply a manager that install packages directly from the internet repository, so that you don't need to manually go and download them. So for, example, as stated under "Installing" on the `requests` homepage, you simply run `pip install requests` in a terminal, without manually downloading anything.

Packaging your product is a different story, and the way you do it depends on the target system. On windows, the easiest might be to create an installer using [NSIS](http://nsis.sourceforge.net/Main_Page) which will install all dependencies. You might also want to use [cx-freeze](http://cx_freeze.readthedocs.org/en/latest/) to pull all the dependencies (including the python interpreter) into a single package.

On linux, many of the dependencies will already be including in most distributions. so you should just list them as requirements when creating your package (e.g. `deb` for ubuntu). Other dependencies might not be included in the distro's repo, but you can still list them as requirements in `setup.py`.

I can't really comment on Mac, since I've never used python on one, but I think that it would be similar to the linux approach.

# ruby-on-rails - 嵌套路由导致我的表单出现问题

> ID：15713627
> 
> 赞同：0
> 
> 时间：2013-03-30T00:46:02.110
> 
> 标签：ruby-on-rails, forms

我的嵌套路由设置如下：

```
 resources :clients do
    resources :contacts
  end 
```

和我的更新操作表单如下：

```
= form_for @contact, :url => client_contacts_path(@contact.client), :html => { :multipart => true } do |f| 
```

但是，当我去保存时，我得到了这个错误：

```
No route matches [PUT] "/clients/3/contacts" 
```

我不太确定为什么它不尝试路线：/clients/3/contacts/:id

我的表格中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T03:09:31.770

尝试将您的**form_for**调用更改为：

```
= form_for [@client, @contact], :html => { :multipart => true } do |f| 
```

Rails 会自己找出它所需要的一切：

*   当@contact 是新记录时，它将生成**/clients/:client_id/contacts/new** url
*   当@contact 已经存在时，它将生成**/clients/:client_id/contacts/:id/edit** url

[有关form_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)的更多信息。

# c# - ajax jquery返回值到aspx页面

> ID：15713630
> 
> 赞同：0
> 
> 时间：2013-03-30T00:46:42.527
> 
> 标签：c#, jquery, asp.net, ajax, code-behind

我有一个 aspx 页面，其中包含对执行存储过程的 .cs 的 jquery/ajax 调用。存储过程返回一个 int 值，我想在不执行页面刷新的情况下将其传递回原始表单。

到目前为止，ajax 调用运行良好。存储过程正在更新我的 sql 数据库。我还可以将存储过程中输出的 int 放入 .cs 页面的本地变量中。当我尝试将该变量存储到 aspx 页面上的隐藏字段中时，就会出现问题。

Jquery/Ajax api 声明传递给成功函数的三个参数之一是“从服务器返回的数据”。太好了，但我不明白如何告诉 ajax “这是我想返回到我的成功函数中的变量”。下面是我总结的 .aspx 代码：

```
 var dataToSend = { somedata: $("#somefield").val(), MethodName: 'myMethod'};
    var options =
        {
          url: '<%=ResolveUrl("~/mypage.aspx") %>',
          async: false,
          data: dataToSend,
          dataType: 'text',
          type: 'POST',
          success: function (result) {
          // I would like to store the returned data 
          // into a hidden field on the client side (this aspx page)         
          alert(result); //currently the result only shows the aspx/html of my page. 
```

这是我的 .cs 代码的夏季版本：

```
using System;
using System.Collections.Generic;
using System.Data;  //
using System.Data.SqlClient; //
using System.Data.SqlTypes; //
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Services;

public partial class _Default : System.Web.UI.Page
{ 
    public int passmetoaspx;
    private string strsomedata;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            if (Request.Form["MethodName"] == "myMethod")
            {
                updateDatabase();
                return;
            }
        }
    }
    protected void updateDatabase()
    {
        try
        { 
            // create string variables for form data
            somedata = Request.Form["somedata"].ToString();
            using (SqlConnection sconn = new SqlConnection(myconnstring))
            {
                using (SqlCommand scmd = new SqlCommand("mystored_procedure", sconn))
                {
                 scmd.CommandType = CommandType.StoredProcedure;
                 scmd.Parameters.Add("@somedata", SqlDbType.VarChar).Value = strsomedata;
                 scmd.Parameters.Add("@sndtoASPXpage", SqlDbType.Int);
                 scmd.Parameters["@sndtoASPXpage"].Direction = ParameterDirection.Output; 
                 sconn.Open();
                 scmd.ExecuteScalar(); 
                 int returnUID;
                 passmetoASPXpage =     int.Parse(scmd.Parameters["@sendtoASPXpage"].Value.ToString());
                }
            }   
        }
        catch (Exception er)
        {

        }

} 
```

请尝试在这里为我指明正确的方向。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:50:36.863

可能不是最好的解决方案，但你可以这样做：

```
 protected void updateDatabase()
    {
        try
        { 
            // create string variables for form data
            somedata = Request.Form["somedata"].ToString();
            using (SqlConnection sconn = new SqlConnection(myconnstring))
            {
                using (SqlCommand scmd = new SqlCommand("mystored_procedure", sconn))
                {
                 scmd.CommandType = CommandType.StoredProcedure;
                 scmd.Parameters.Add("@somedata", SqlDbType.VarChar).Value = strsomedata;
                 scmd.Parameters.Add("@sndtoASPXpage", SqlDbType.Int);
                 scmd.Parameters["@sndtoASPXpage"].Direction = ParameterDirection.Output; 
                 sconn.Open();
                 scmd.ExecuteScalar(); 
                 int returnUID;
                 passmetoASPXpage =     int.Parse(scmd.Parameters["@sendtoASPXpage"].Value.ToString());

//Write to REsponse
      HttpContext.Current.Response.Write(passmetoASPpage.ToString());
        HttpContext.Current.Response.End();

                }
            }   
        }
        catch (Exception er)
        {

        }

} 
```

# git - 合并分歧分支时卡在 git rebase 上

> ID：15713632
> 
> 赞同：2
> 
> 时间：2013-03-30T00:46:57.103
> 
> 标签：git, github, git-merge, git-rebase

我有一个本地分支，其中 5 个提交不在远程分支中，而远程分支有 6 个提交不在我的本地分支中。

我将本地提交压缩为单个提交，现在我在本地分支中有 1 个提交。我做了“ **git pull --rebase** ”，它说有冲突。我修复了冲突文件并在所有这些文件上做了“ **git add ”。**现在，当我执行“git status”时，它说我不在任何分支中，并且我有一堆需要提交的文件。所以我对所有文件做了一个“ **git commit** ”并签出到我的本地分支并做了“ **git rebase --continue** ”。现在它说没有要提交的文件，并且我回到了原始状态，本地提交了 1 个，远程提交了 6 个，而我仍然在 rebase 的中间！！。

有人可以说明我的回购发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T01:04:52.587

您可能不应该提交，而只是运行`git rebase --continue`.

复制您的工作目录（或至少是解决冲突的文件，这样您就不会丢失您的工作）并运行 git `rebase --abort`。现在再做一次，但这次没有提交。

# linq - 使用 Linq 查找缺少相关数据的记录

> ID：15713634
> 
> 赞同：2
> 
> 时间：2013-03-30T00:47:04.410
> 
> 标签：linq, entity-framework

我正在尝试使用 Linq to Entities 来查找不存在订单的类别。

```
 TABLE Customer              TABLE Order
------------------         ----------------
CustId   Category          OrderId FKCustId
  1         2                 1       1
  2         2
  3         3 
```

这是经典的一对多客户/订单关系。鉴于此数据，只有类别 3 没有与之关联的订单，因此我想生成一个以类别 3 作为唯一项目的结果集。这一定是一个直截了当的查询，但我无法弄清楚。我尝试了很多不同的角度；这是一个不起作用的：

```
var dtos = ctx.Customers
       .GroupBy(c => c.Category)
       .Where(c => !c.Any(c2 => !c2.Orders.Any()))
       .Select(c => c.Key); 
```

当我尝试这个时，它返回了一个*确实*有订单的类别，而没有返回缺少订单的类别。

提前感谢您的帮助！罗杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:55:24.887

您的查询很接近，但`!Any`随后`!Any`是抛弃您的逻辑。您想要选择所有客户都没有订单的类别。但是您的查询选择了没有客户没有订单的所有类别。`I hope that made sense`

尝试将您的第一个更改`!Any`为`All`：

```
var dtos = ctx.Customers
   .GroupBy(c => c.Category)
   .Where(c => c.All(c2 => !c2.Orders.Any()))
   .Select(c => c.Key); 
```

或在查询语法中：

```
var dtos = 
    from c in Customers
    group c by c.Category into g
    where g.All(c => !c.Orders.Any())
    select g.Key; 
```

* * *

或者将第二个更改`!Any`为`Any`.

```
var dtos = ctx.Customers
   .GroupBy(c => c.Category)
   .Where(c => !c.Any(c2 => c2.Orders.Any()))
   .Select(c => c.Key); 
```

或在查询语法中：

```
var dtos = 
    from c in Customers
    group c by c.Category into g
    where !g.Any(c => c.Orders.Any())
    select g.Key; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:54:58.380

您首先需要获取没有任何订单的客户，然后获取类别。先做你的哪里，然后把类别拿出来

# facebook - forge.facebook.logout() not clearing token

> ID：15713635
> 
> 赞同：0
> 
> 时间：2013-03-30T00:47:06.493
> 
> 标签：facebook, trigger.io

Receiving "Error validating access token: Session does not match current stored session". I would like to clear any tokens and reauthorize/re-login but forge.facebook.logout() is not working. Any solutions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T23:57:00.260

Thanks to debug information provided by Brad Dwyer we narrowed down the issue to the interaction between the Facebook module and the iOS 6 accounts framework.

The problem is fixed in our [v1.4.46 platform version](https://trigger.io/docs/current/api/release_notes.html)

# android - Android setdrawable 从另一个类

> ID：15713639
> 
> 赞同：0
> 
> 时间：2013-03-30T00:47:18.850
> 
> 标签：android, xml, getresource

这是我的代码。我正在尝试设置线性布局的背景。但是这个 xml (rowback) 不是我的主要活动内容，所以会出错。如何从其内容中没有该 XML 的类中设置一些 XML？

```
setContentView(R.layout.activity_quick_search_products);
...
rowb = (LinearLayout)findViewById(R.id.rowback);
...
final Drawable d = getResources().getDrawable(R.drawable.denemebut3);
d.setAlpha(100);
rowb.setBackgroundDrawable(d); 
```

日志猫：

```
03-30 02:52:50.822: D/AndroidRuntime(14677): Shutting down VM
03-30 02:52:50.822: W/dalvikvm(14677): threadid=1: thread exiting with uncaught exception (group=0x40c841f8)
03-30 02:52:50.822: E/AndroidRuntime(14677): FATAL EXCEPTION: main
03-30 02:52:50.822: E/AndroidRuntime(14677): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vitrinn/com.vitrinn.QuickSearchProducts}: java.lang.NullPointerException
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.os.Looper.loop(Looper.java:137)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.ActivityThread.main(ActivityThread.java:4507)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at java.lang.reflect.Method.invoke(Method.java:511)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at dalvik.system.NativeStart.main(Native Method)
03-30 02:52:50.822: E/AndroidRuntime(14677): Caused by: java.lang.NullPointerException
03-30 02:52:50.822: E/AndroidRuntime(14677):    at com.vitrinn.QuickSearchProducts.onCreate(QuickSearchProducts.java:69)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.Activity.performCreate(Activity.java:4469)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
03-30 02:52:50.822: E/AndroidRuntime(14677):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
03-30 02:52:50.822: E/AndroidRuntime(14677):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:18:30.910

如果***R.id.rowback***不属于您的主要活动 xml 资源，那么您应该使用以下方法手动扩充该资源：

```
LinearLayout rowb = (LinearLayout) getLayoutInflater().inflate(XML file that contains R.id.rowback, null); 
```

那么你可以安全地做

> rowb.setBackgroundDrawable(d);

另外，如果您在*rowback*中有嵌套元素，那么您可以调用：

```
rowb.findViewById(R.id.Something) safely. 
```

或者，如果您的类没有从任何 Activity 扩展，您始终可以在其构造函数中接收 Context 对象，然后使用

```
LayoutInflater.from(context) 
```

获取一个 LayoutInflater 对象，这样您就可以对您需要的任何 XML 资源进行膨胀，而这些资源实际上并不在您的主要内容中。

希望这能澄清...

# php - 包含另一个php文件时如何构造javascript

> ID：15713646
> 
> 赞同：0
> 
> 时间：2013-03-30T00:48:32.183
> 
> 标签：php, javascript, web-applications, architecture

我正在尝试构建一个小型 Web 应用程序，但我不清楚如何在页面的不同部分之间进行通信。我将使用我的特定功能来演示我的问题。

我所有的页面都使用通用工具栏。由于这个工具栏在多个页面上使用，它在它自己的 PHP 文件中，我包括使用

```
<?php include("../toolbar.php"); ?> 
```

工具栏包括一个登录按钮。单击后，将打开一个模式登录对话框（在本例中为 Facebook 登录对话框）。当用户登录时，他或她的名字会显示在工具栏中，并且登录按钮被一个“注销”按钮所取代。由于无论用户正在查看哪个页面，此行为都是相同的，因此我创建了一个工具栏.js 文件来显示登录模式并适当地更新用户名/按钮。

但是，在大多数页面上，从工具栏登录或退出也需要更新主页的内容。我不能保证每个包含toolbar.php 的页面在登录状态发生变化时都必须做任何事情，但大多数都会做。

同样，反过来也是可能的——某个页面可能在工具栏外有一个“登录”按钮。使用此功能时，工具栏需要更新。

处理这个问题的最佳方法是什么？

当前的实现 - 这可能很糟糕……</p>

在toolbar.js中，每当用户登录（以及注销的等效项）时，我基本上都会调用一个函数“userSignedIn”。toolbar.js，它自己实现了这个（它需要更新它的按钮和用户名标签）。

然后，如果主页（我们称之为 mainPage.php）需要任何额外的东西，我将重新使用这个相同的功能来“附加”额外的操作。在加载该页面时，我执行以下操作：

```
var originalUserSignedIn = userSignedIn;
userSignedIn = function() {
    originalUserSignedIn();
    customUserSignedIn();
} 
```

customUserSignedIn 是 mainPage.js 中的一个函数，我在其中执行其他操作。我还没有实现相反的解决方案（从 mainPage.php 登录需要更新 toolbar.php）。

我想来自 Objective-C 背景，我正在尝试类似于在方法实现中调用“超级”的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:03:47.430

一种方法是在任何其他javascript之前初始化一个空数组以保存回调函数和调用它们的sign函数：

```
var userSignedInCallbacks = [];

var userSignedIn = function() {
    for (var i = 0; i < userSignedInCallbacks.length; i++) {
        userSignedInCallbacks[i]();
    }
} 
```

然后，工具栏和主页 js 都会将它们适当的回调添加到数组中：

```
userSignedInCallbacks.push(function() {
    // ...
}); 
```

最后，工具栏或主页中的登录操作都将调用`userSignedIn()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:06:56.250

您可以做到这一点的一种方法是使用[发布者 - 订阅者](http://msdn.microsoft.com/en-us/magazine/hh201955.aspx)模式来处理页面中不同模块之间的通信，以便每个模块仅在事件接口上耦合。

[我在这里](http://jsfiddle.net/kAKhP/1/)创建了一个非常简单的示例。它不处理注销过程，但您仍然可以看到事物的结构。

HTML

```
<div id="toolbar">
    <button class="login">Login</button>
</div>

<div id="another-section">
    <button class="login">Login</button>
</div>

<div id="login-dialog">
     <button class="login">Do login!</button>
</div> 
```

JS

```
//in EventBus.js
var EventBus = {
    subscribers: {},
    publish: function (eventName) {
        var args = Array.prototype.slice.call(arguments, 1),
            subscribers = this.subscribers[eventName] || [],
            i = 0,
            len = subscribers.length,
            s;

        for (; i < len; i++) {
            s = subscribers[i];

            s.fn.apply(s.scope, args);
        }

    },
    subscribe: function (eventName, fn, scope) {
        var subs = this.subscribers[eventName] = this.subscribers[eventName]  || [];
        subs.push({ fn: fn, scope: scope });
    }
};

//in toolbar.js
function Toolbar(el, eventBus) {
    var $el = this.$el = $(el),
        $loginButton = $('button.login', $el);

    $loginButton.click(function () {
        eventBus.publish('userWantsToLogin');
    });

    eventBus.subscribe('userLoggedIn', function () {
        $loginButton.html('Logout');
        //change button handlers to handle logout...
    });
}

//in another-section.js
function AnotherSection(el, eventBus) {
    var $el = this.$el = $(el),
        $loginButton = $('button.login', $el);

    $loginButton.click(function () {
        eventBus.publish('userWantsToLogin');
    });

    eventBus.subscribe('userLoggedIn', function () {
        $loginButton.html('Logout');
        //change button handlers to handle logout...
    });
}

//in main.js
$(function () {
    var $loginDialog = $('#login-dialog');

    $loginDialog.dialog({ autoOpen: false});

    $('button.login', $loginDialog).click(function () {
        EventBus.publish('userLoggedIn');
    });

    EventBus.subscribe('userWantsToLogin', function () {
        $loginDialog.dialog('open');
    });

    new Toolbar('#toolbar', EventBus);
    new AnotherSection('#another-section', EventBus);
}); 
```

# regex - 计量单位正则表达式操作

> ID：15713649
> 
> 赞同：3
> 
> 时间：2013-03-30T00:48:48.120
> 
> 标签：regex, perl, awk

## 客观的

在**[Linux 上](http://www.linux.org/ "Linux")**，我试图获得一个代表可用系统内存的*最终用户友好*字符串。

例子：

```
Your computer has 4 GB of memory. 
```

* * *

### 成功标准

我认为这些方面*最终用户友好*（您可能不同意）：

*   `1G`比`1.0G`( `1`Vs `1.0`)更具可读性

*   `1GB`比`1G`( `GB`Vs `G`)更具可读性

*   `1 GB`比`1GB`（`space-separated`度量单位）更具可读性

*   `memory`比`RAM`,`DDR`或`DDR3`（没有行话）更具可读性

### 初始点

**[procps-ng](http://gitorious.org/procps "procps-ng: /proc file system utilities")**的**[免费](http://gitorious.org/procps/procps/blobs/master/free.c "free：procps-ng 实用程序，用于显示可用内存信息")**实用程序有一个供人类使用的选项：

```
-h, --human
    Show all output fields automatically scaled to shortest three digit unit
    and display the units of print out.  Following units are used.
        B = bytes
        K = kilos
        M = megas
        G = gigas
        T = teras
    If unit is missing, and you have petabyte of RAM or swap, the number is
    in terabytes and columns might not be aligned with header. 
```

所以我决定从那里开始：

```
> free -h
             total       used       free     shared    buffers     cached
Mem:          3.8G       1.4G       2.4G         0B       159M       841M
-/+ buffers/cache:       472M       3.4G
Swap:         4.9G         0B       3.9G 
```

`3.8G`听起来很有希望，所以我现在要做的就是......

### 所需步骤

*   过滤包含人类可读字符串的行的输出（即`Mem:`）

*   从行中间挑出内存总量（即`3.8G`）

*   解析出数量和度量单位（即`3.8`和`G`）

*   根据我的喜好格式化和显示字符串（例如`G`↝ `GB`，...）

### 我的尝试

```
free -h | \
  awk  '/^Mem:/{print $2}' | \
    perl -ne '/(\d+(?:\.\d+)?)(B|K|M|G|T)/ && printf "%g %sB\n", $1, $2' 
```

输出：

```
3.8 GB 
```

* * *

### 所需的解决方案

*   我宁愿只使用**[gawk](http://www.gnu.org/software/gawk/ "GNU awk，一种模式扫描和处理语言")**，但我不知道如何

*   使用更好的，甚至*规范*的方法来解析字符串中的“浮点数”

*   我不介意“只是公认的大小字母”的*挑剔*`(B|K|M|G|T)`匹配，即使这会因引入新尺寸而不必要地破坏匹配

*   我习惯`%g`输出`4.0`as `4`，您可能不同意，这取决于您对这些评论的看法：[https](https://unix.stackexchange.com/a/70553/10283) ://unix.stackexchange.com/a/70553/10283 。

## 我的问题，总结

*   你可以只做上面的`awk`吗？
*   我`perl`能写得更优雅，保持严格吗？

记住：

```
I am a beginner robot. Here to learn. :] 
```

* * *

### 我从安迪·莱斯特那里学到的

*为了我自己的利益，在这里总结一下：如果可以的话，巩固学习。*

*   使用**[正则表达式字符类](http://www.regular-expressions.info/charclass.html "正则表达式字符类")**，而不是**[正则表达式交替](http://www.regular-expressions.info/alternation.html "正则表达式替换")**，从一组字符中挑选出一个字符。

*   **[perl](http://www.perl.org/ "Perl 编程语言")**有一个`-a`选项，它`$_`从`-e`或`-n`拆分为`@F`：

例如，这个**[gawk](http://www.gnu.org/software/gawk/ "GNU awk，一种模式扫描和处理语言")**：

```
echo foo bar baz | awk '{print $2}' 
```

**[在perl](http://www.perl.org/ "Perl 编程语言")**中可以这样写：

```
echo foo bar baz | perl -ane 'print "$F[1]\n";' 
```

*除非有与* **[gawk](http://www.gnu.org/software/gawk/ "GNU awk，一种模式扫描和处理语言")** *等价的东西，否则`--field-separator`我想我还是更喜欢* **[gawk](http://www.gnu.org/software/gawk/ "GNU awk，一种模式扫描和处理语言")** *，尽管在* **[perl](http://www.perl.org/ "Perl 编程语言")** *中做所有事情当然既干净又高效。*（有没有等价物？）

* * *

**编辑**：实际上，这证明存在，`-F`就像在**[gawk](http://www.gnu.org/software/gawk/ "GNU awk，一种模式扫描和处理语言")**中一样：

```
echo ooxoooxoooo | perl -Fx -ane 'print join "\n", @F' 
```

输出：

```
oo
ooo
oooo 
```

* * *

*   **[perl](http://www.perl.org/ "Perl 编程语言")**有一个`-l`选项，这真是太棒了：将其视为**[Python](http://python.org/ "Python 编程语言")**的**[str.rstrip](http://docs.python.org/release/2.7.3/library/stdtypes.html?highlight=rstrip#str.rstrip "str.rstrip([字符])")**（如果您不是**[Python](http://python.org/ "Python 编程语言")**负责人，请参阅链接）的有效性，会自动为您`$_`重新附加`\n`

*谢谢，安迪！*

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:38:48.733

是的，我确信你可以只使用 awk，但我是一个 Perl 人，所以这就是你只使用 Perl 的方法。

而不是`(B|K|M|G|T)`使用`[BKMGT]`.

使用 Perl`-l`自动从输入中去除换行符并将它们添加到输出中。

我认为没有任何理由让 Awk 做一些剥离，而让 Perl 做剩下的。您可以使用 Perl 的 -a 自动拆分字段。

我不知道输出`free -h`到底是什么（我`free`没有`-h`选择）所以我猜这个

```
free -h | \
perl -alne'/^Mem:/ && ($F[1]=~/(\d+(?:\.\d+)?)[BKMGT]/) && printf( "%g %sB", $1, $2)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:52:20.910

一个*awk*（实际上是*gawk*）解决方案

```
free -h | awk 'FNR == 2 {if (match($2,"[BKMGT]$",a)) r=sprintf("%.0f %sB",substr($2,0,RSTART-1), a[0]); else r=$2 " B";print "Your computer has " r " of memory."}' 
```

或为便于阅读而分解

```
free -h | awk 'FNR == 2 {if (match($2,"[BKMGT]$",a)) r=sprintf("%.0f %sB",
          substr($2,0,RSTART-1), a[0]); else r=$2 " B";
          print "Your computer has " r " of memory."}' 
```

在哪里

*   `FNR`是第 n^行（如果`2`有`{}`命令）
*   `$2`是^(第二)个字段
*   `if`（条件）命令；`else`命令;
*   `match`（字符串，正则表达式，匹配数组）。正则表达式说“必须以 BKMGT 之一结尾”
*   `r=sprintf`将变量设置`r`为*sprintf*，`%.0f`无小数浮动
*   `RSTART`告诉匹配发生的位置，`a[0]`是第一个匹配

上面例子的输出

```
Your computer has 4 GB of memory. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:02:30.673

另一个冗长的 Perl 答案：

```
free -b | 
perl -lane 'if(/Mem/){ @u=("B","KB","MB","GB"); $F[2]/=1024, shift @u while ($F[2]>1024); printf("%.2f %s", $F[2],$u[0])}' 
```

# java - 如何从链接到 .jar 文件的 java 中的数组中删除一个值？

> ID：15713651
> 
> 赞同：1
> 
> 时间：2013-03-30T00:48:53.583
> 
> 标签：java, arrays, graphics, jar, nullpointerexception

items 数组在 jar 中声明，它的大小和值由我声明。我试过这个

```
public void itemsDelete(int x)
{
    Item[] temp=new Item[items.length-1];
    for(int i=0;i<temp.length;i++)
    {
        if(i!=x)
        {
            temp[i]=items[i];
        }
    }
    items=new Item[temp.length]
    for(int i=0;i<temp.length;i++)
    {
        items[i]=temp[i];
    }
} 
```

和一个 if(items[i]!=null){code...} 但在这两种情况下，当我运行它时，这个“线程中的异常”AWT-EventQueue-0“java.lang.NullPointerException”被看到。什么可以是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:19:02.307

第一个循环总是在复制最后一项之前停止，并且不会有任何值复制到索引 x 处的临时数组中。

想象 items 是一个字符串数组：

“0”、“1”、“2”、“3”、“4”、“5”、“6”、“7”、“8”

并且您想使用您将获得的代码删除索引 5 处的项目：

“0”、“1”、“2”、“3”、“4”、空值、“6”、“7”

这可以解释为什么你会得到一个空指针异常，大概是稍后处理 items 数组时。

这可能会做更多您想要的事情，并且正如 Perception 建议的那样，您可以在完成后分配等于 temp 的项目。

```
public void itemsDelete(int x)
{
Item[] temp=new Item[items.length-1];

//This variable will keep track of the index in the temp array
int j = 0;

//for each of the items in the input array...
for(int i=0;i<items.length;i++)
{
    if(i!=x)
    {
        temp[j]=items[i];
        //We've copied a value so increment the temp index...
        j++;
    }
}

items = temp;
} 
```

# php - 搜索中的其他结果/注释

> ID：15713653
> 
> 赞同：0
> 
> 时间：2013-03-30T00:49:02.220
> 
> 标签：php, database, search

想知道是否有可能，当您从站点搜索页面列表和数据时，您是否不仅可以将它们排在最相关的第一位，而且还可以显示一个值。

前任。您搜索您之前输入的有关您销售的柠檬水的数据。您跟踪多个因素，例如“一天中的时间、温度、月份等”。您想知道一周后要卖多少，因此您将值打入“一天中的时间、温度、月份等”。

理论上，我希望能够根据相关性调出所有输入的数据，并根据之前的记录向您显示您将销售的产品的估计。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:48:41.490

这将需要一个算法。我不会编写所有代码，但我不介意提供一些指导:)。获取数据的 html 与设置数据的 html 相同，只是它将调用单独的 .php 脚本。

下面的例子可以作为指导。它仅使用**温度**来计算预测销售额：

```
//get todays temperature from form, and query database for all temperatures
$todaysTemp = $_POST['temperature'];
$tempRange = 20;    //each temperature in the table must be within this range of todaysTemp to be included in calculation
$result = $connection->query("SELECT temperature, sales FROM myTable");

//calculate average temperature by adding this temp to total, then diving by total rows included
$temp_sales_array = array();
foreach($result as $row){
    if( abs($todaysTemp - $row['temperature']) < tempRange){
        $temp_sales_array[$row['temperature']] = $row['sales'];
    }
}

//calculate predicted sales, by getting array value thats closest to todays temperature
$closest=key($temp_sales_array[0]);
foreach($temp_sales_array as $row){
    if( abs($todaysTemp - key($row)) < closest ){
        closest = key($row);
        $predicted_sales = $row;
    }
}

//show predicted sales
echo $predicted_sales; 
```

# ruby-on-rails - Rails 路由中的命名空间

> ID：15713656
> 
> 赞同：0
> 
> 时间：2013-03-30T00:49:34.930
> 
> 标签：ruby-on-rails

首先，为什么我们需要命名空间控制器？

[rails guides](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)上的示例显示

```
namespace :admin do
  resources :post, :comments
end 
```

在这种情况下，我们有诸如 GET /admin/posts 之类的路径。它与 GET /posts 相同吗？还是 GET /posts 保持原始状态，而另一个 GET /admin/posts 被添加为额外？

Rails 是否为命名空间创建任何其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:53:08.707

如果您不想使用命名空间，则不必使用命名空间，但它可以让您的生活更轻松，特别是在具有大量控制器的大型应用程序中。不，如果您命名它们，路由不会重复，除非您在没有命名空间的路由文件中再次指定路由，但这没有多大意义。

# php - How to make a directory then write file to that directory using variables

> ID：15713658
> 
> 赞同：-2
> 
> 时间：2013-03-30T00:49:43.923
> 
> 标签：php

```
mkdir("Business_Pages/".$username);
$fp = fopen("Business_Pages/$username".$username".html", "w");

fwrite($fp, "<html> <head> <link rel='stylesheet' href='index.css'>  </head </html>");

fclose($fp); 
```

Im trying to make a directory in Business_Pages that works but im also creating a file in that newly created directory named what ever the name of the html input is. Im basically trying to the the variable $username at the end of the pathname but that doesnt work

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T00:56:23.717

```
$fp = fopen("Business_Pages/". $username . '/' . $username . ".html", "w"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T00:57:28.893

You have some syntax errors in your code.

```
$contents = "<html> <head> <link rel='stylesheet' href='index.css'>  </head </html>"

$dir = "Business_Pages/$username";
if (!is_dir($dir))
    mkdir($dir);

$filename = $username . '.html';

file_put_contents($dir . '/' . $filename, $contents); 
```

# jquery-ui - 在 Jquery Menu UI 中选择新项目后如何取消突出显示菜单项并突出显示另一个

> ID：15713659
> 
> 赞同：0
> 
> 时间：2013-03-30T00:49:50.220
> 
> 标签：jquery-ui, menu

我有一个 jquery UI 菜单，我想在其中突出显示选定的项目，然后在单击并突出显示另一个项目后取消突出显示它。一旦在菜单上检测到选择事件，我就更改了css背景颜色属性，但在此之前我想检查所有项目以查看是否仍突出显示先前的选择，取消突出显示它，然后突出显示新的选择.

```
 <script>
     $(function(){
        $(".menu").menu({

          //detect select event 

            select:function( event, ui ) {

            //highlight the selected menu item

                ui.item.css('background-color','red');

                }

               });

          });
    </script>

//The Menu

 <ul class="menu">
                <li><a href="#"><h2> Fitness</h2></a></li>
            <li><a href="#"><h2> Literature</h2></a></li>
                <li><a href="#"><h2>Music</h2></a></li>
                <li><a href="#"><h2>Fine Art</h2></a></li>         
            <li><a href="#"><h2>Food</h2></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:54:58.197

我建议创建一个 css 类并添加/删除该类，而不是直接设置样式。

```
$(document).ready(function () {
  $(".menu").menu({
    select: function (event, ui) {
      $('.selected', this).removeClass('selected');
      ui.item.addClass('selected');
    }
  });
}); 
```

CSS：

```
.menu .ui-menu-item.selected { 
  background-color : red;
} 
```

如果您希望它即使在项目具有焦点或具有子菜单并且处于活动状态时也保持红色，请添加此选项。

```
.menu .ui-menu-item.selected > .ui-state-focus,
.menu .ui-menu-item.selected > .ui-state-active {
  background-color : red ;
  background-image: none;
} 
```

You may need to tweek this some more if you plan to have submenus to get it to work in a way that makes sense.

Without submenus: [http://jsfiddle.net/sgearhart2/Fba6L/4/](http://jsfiddle.net/sgearhart2/Fba6L/4/)

With submenus: [http://jsfiddle.net/sgearhart2/Fba6L/5/](http://jsfiddle.net/sgearhart2/Fba6L/5/)

# html - CSS Div 背景图像 固定高度 100% 宽度

> ID：15713668
> 
> 赞同：41
> 
> 时间：2013-03-30T00:51:10.087
> 
> 标签：html, css

我正在尝试设置一系列带有背景图像的 div，每个 div 都有自己的固定高度，并拉伸以填充宽度，即使顶部/底部有溢出。我只是不想要边缘的空白。

目前，我有：http: [//jsfiddle.net/ndKWN/](http://jsfiddle.net/ndKWN/)

CSS

```
 #main-container {
        float:left;
        width:100%;
        margin:0;
        padding:0;
        text-align: center;
    }

    .chapter{
        position: relative;
        height: 1400px;
        z-index: 1;
    }

    #chapter1{
    background: url(http://omset.files.wordpress.com/2010/06/homer-simpson-1-264a0.jpg) 50% 0 no-repeat fixed;
        height:1200px;
    }

    #chapter2{
    background: url(http://download.ultradownloads.com.br/wallpaper/94781_Papel-de-Parede-Homer-Simpson--94781_1680x1050.jpg) 50% 0 no-repeat fixed;
        height:1200px;
    } 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-05-02T14:12:28.333

[在此处](https://stackoverflow.com/a/14446663/900971)查看我对类似问题的回答。

听起来您希望背景图像保持其自己的纵横比，同时扩展到 100% 宽度并在顶部和底部被裁剪。如果是这种情况，请执行以下操作：

```
.chapter {
    position: relative;
    height: 1200px;
    z-index: 1;
}

#chapter1 {
    background-image: url(http://omset.files.wordpress.com/2010/06/homer-simpson-1-264a0.jpg);
    background-repeat: no-repeat;
    background-size: 100% auto;
    background-position: center top;
    background-attachment: fixed;
} 
```

jsfiddle：http: [//jsfiddle.net/ndKWN/3/](http://jsfiddle.net/ndKWN/3/)

The problem with this approach is that you have the container elements at a fixed height, so there can be space below if the screen is small enough.

If you want the height to keep the image's aspect ratio, you'll have to do something like what I wrote in an edit to the answer I linked to above. Set the container's `height` to 0 and set the `padding-bottom` to the percentage of the width:

```
.chapter {
    position: relative;
    height: 0;
    padding-bottom: 75%;
    z-index: 1;
}

#chapter1 {
    background-image: url(http://omset.files.wordpress.com/2010/06/homer-simpson-1-264a0.jpg);
    background-repeat: no-repeat;
    background-size: 100% auto;
    background-position: center top;
    background-attachment: fixed;
} 
```

jsfiddle: [http://jsfiddle.net/ndKWN/4/](http://jsfiddle.net/ndKWN/4/)

You could also put the `padding-bottom` percentage into each `#chapter` style if each image has a different aspect ratio. In order to use different aspect ratios, divide the height of the original image by it's own width, and multiply by 100 to get the percentage value.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-30T00:57:04.857

[http://jsfiddle.net/ndKWN/1/](http://jsfiddle.net/ndKWN/1/)

您可以使用`background-size: cover;`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-04T14:13:52.667

But the thing is that the .chapter class is not dynamic you're declaring a height:1200px

so it's better to use background:cover and set with media queries specific height's for popular resolutions.

# android - 在 Android 应用程序中冻结 SQLite-DB

> ID：15713669
> 
> 赞同：1
> 
> 时间：2013-03-30T00:51:10.427
> 
> 标签：android, sqlite, cursor

我在我的应用程序中创建/读取 SQLite-DB 时遇到了一些困难。

有了这个教程[，](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)我想在我的（是的，嘲笑我）扫雷应用程序中实现一个数据库，以存储诸如宽度、高度和操场中地雷数量之类的设置。

我想到了一个这样的表：

```
+-----------+--------+-----+
| Field     | Type   | Key |
+-----------+--------+-----+
| _bez      | text   | pri |
| _x        | int    |     |
| _y        | int    |     |
| _a        | int    |     |
+-----------+--------+-----+ 
```

为此，我想我有这段代码，到目前为止一切都应该没问题：

```
public class SettingsDB extends SQLiteOpenHelper {
//DB-Info
private static final int DATENBANK_VERSION = 1;
private static final String DATENBANK_NAME = "minesweeper.db";
private static final String TABLE_SETTINGS = "settings";
//Spalten der Settings-Tabelle
private static final String KEY_BEZ = "bez";
private static final String KEY_X = "x";
private static final String KEY_Y = "y";
private static final String KEY_A = "a";

public SettingsDB(Context context) {
    super(context, DATENBANK_NAME, null, DATENBANK_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createDB;
    createDB = "CREATE TABLE " + TABLE_SETTINGS + "("
            + KEY_BEZ + " TEXT PRIMARY KEY, "
            + KEY_X + " INTEGER, "
            + KEY_Y + " INTEGER, "
            + KEY_A + " INTEGER)";
    db.execSQL(createDB);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_SETTINGS);
    onCreate(db);
}
} 
```

我想用四个标准行填充这个表，简单、中等、有模式的值，以及当前值（用户可以通过布局中的三个 EditText 字段更改）。

因此，我需要添加这些基值的方法（直接在创建数据库之后），向用户显示当前值并在保存设置时用当前值更新行。

在这里 - 再次基于 tut - 我有这个：

```
public void set_stdValues() {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues val_easy = new ContentValues();
        val_easy.put(KEY_BEZ, "Easy");
        val_easy.put(KEY_X, 10);
        val_easy.put(KEY_Y, 10);
        val_easy.put(KEY_A, 10);
        db.insert(TABLE_SETTINGS, null, val_easy);

        ContentValues val_curr = new ContentValues();
        val_curr.put(KEY_BEZ, "Curr");
        val_curr.put(KEY_X, 10);
        val_curr.put(KEY_Y, 10);
        val_curr.put(KEY_A, 10);
        db.insert(TABLE_SETTINGS, null, val_curr);

        ContentValues val_med = new ContentValues();
        val_med.put(KEY_BEZ, "Med");
        val_med.put(KEY_X, 12);
        val_med.put(KEY_Y, 12);
        val_med.put(KEY_A, 20);
        db.insert(TABLE_SETTINGS, null, val_med);

        ContentValues val_hard = new ContentValues();
        val_hard.put(KEY_BEZ, "Hard");
        val_hard.put(KEY_X, 15);
        val_hard.put(KEY_Y, 15);
        val_hard.put(KEY_A, 40);
        db.insert(TABLE_SETTINGS, null, val_hard);

        db.close();
    }

    public Settings getValues(String diff) {
        SQLiteDatabase db = this.getReadableDatabase();

        String[] cols = new String[] { KEY_BEZ, KEY_X, KEY_Y, KEY_A };
        Cursor cursor = db.query(TABLE_SETTINGS, cols, KEY_BEZ + "=?", new String[] { diff }, null, null, null, null);
        if (cursor != null) {
            cursor.moveToFirst();
        }
        Settings settings = new Settings(cursor.getString(0), cursor.getInt(1), cursor.getInt(2), cursor.getInt(3));
        cursor.close();
        db.close();
        return settings;
    }

    // public Settings(String bez, int x, int y, int a)
    public void setValues(Settings s) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_X, s.get_x());
        values.put(KEY_Y, s.get_y());
        values.put(KEY_A, s.get_a());

        db.update(TABLE_SETTINGS, values, KEY_BEZ + "=?", new String[] { "Curr" });
        db.close();
    } 
```

执行应用程序时，它会冻结在应该从数据库中读取数据的位置。

我希望这提供了足够的信息，有人可能会发现我犯的错误。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:12:53.540

从和 中删除 `SQLiteDatabase db = this.getWritableDatabase();`和`db.close();``set_stdValues()`

```
@Override
public void onCreate(SQLiteDatabase db) {
String createDB;
createDB = "CREATE TABLE " + TABLE_SETTINGS + "("
        + KEY_BEZ + " TEXT PRIMARY KEY, "
        + KEY_X + " INTEGER, "
        + KEY_Y + " INTEGER, "
        + KEY_A + " INTEGER)";
db.execSQL(createDB);

set_stdValues()
} 
```

# android - 适当的容器来一张一张地显示图像

> ID：15713670
> 
> 赞同：0
> 
> 时间：2013-03-30T00:51:24.943
> 
> 标签：android, opengl-es, drawable

我是android开发的新手。我正在构建一个基于位置的应用程序，比如谷歌地图（在某种程度上，我们正在重新发明轮子：（）。

像`maps.google.com`，地图数据在服务器中生成为瓦片，并在客户端重新组织。并且在 html 页面中，很容易找到容纳瓷砖的容器。例如，我们可以`img`相应地创建一些元素，然后将它们`imgs`放在一个`div`元素中。

现在在android中，哪个是显示图像的合适容器？

事实上，我正在阅读文档[Displaying Bitmaps Efficiently](http://developer.android.com/training/displaying-bitmaps/index.html)，这似乎`ImageView`是显示`bitmaps`. 如果这是真的，那么我必须 `ImageViewS`根据`tile size`和动态创建几个`size of the user screen`。此外，根据文档，`AsyncTask`应该用于性能增强。所以每一个创造`ImageView`都会持有一个`AsyncTask`，我怕哪一个会失控。

所以我想知道是否有其他解决方案可以满足我的要求？

顺便说一句，我们`tiles`现在使用的是，但我们也有计划支持`vector`似乎必须使用的数据`opengl`，所以应该考虑不同地图类型之间的切换。

* * *

**更新：**

如果按照`Raghunandan`建议我应该使用`ImageView` 来保存我的应用程序中的卫星位图，但是`vector data`应该使用 opengl 仍然绘制哪些，那么如何在这两种类型（视图）之间切换？

# java - jboss cookie授权错误

> ID：15713672
> 
> 赞同：0
> 
> 时间：2013-03-30T00:51:37.200
> 
> 标签：java, cookies, jboss, war

当我尝试提交运行我的 Web 服务时，我收到一个 auth cookie expired 错误。这只是我，因为我的同事能够正常运行服务而没有任何错误。能否请您指出 wt 需要在 jboss 中更改。

```
19:43:20,162 INFO  [com.xxxxx.web.security.netcookieauth.xxxWebAuthenticationProvider] In custom authentication provider
19:43:20,167 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/packageservice].[JerseyAPI]] Servlet.service() for servlet JerseyAPI threw exception: org.springframework.security.authentication.CredentialsExpiredException: Auth cookie has expired
    at com.xxx.web.security.netcookieauth.xxxxWebAuthenticationProvider.authenticate(xxxxWebAuthenticationProvider.java:176) [:]
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156) [:3.1.1.RELEASE]
    at com.xxx.web.security.netcookieauth.xxxxWebCookieProcessingFilter.processBackendServiceAuthentification(AcxiomWebCookieProcessingFilter.java:87) [:]
    at com.xxxx.web.security.netcookieauth.xxxxWebCookieProcessingFilter.requiresAuthentication(AcxiomWebCookieProcessingFilter.java:50) [:]
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:181) [:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [:3.1.1.RELEASE]
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87) [:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) [:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:184) [:3.1.1.RELEASE]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:155) [:3.1.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) [:3.1.1.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) [:3.1.1.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.1.0.Final]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
    at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
    at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
    at java.lang.Thread.run(Thread.java:662) [:1.6.0_37] 
```

# vhdl - HDL中的组合划分

> ID：15713673
> 
> 赞同：0
> 
> 时间：2013-03-30T00:52:09.990
> 
> 标签：vhdl, verilog, boolean-logic, synthesis

如果我要实现纯组合的 64 位除法，我正在尝试想出一种方法来估计门数。

我无法让我的综合工具生成组合的 64 位/64 位整数除法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T06:37:06.780

完全组合的 64 位/64 位分频器带来了巨大的设计。这将使用大量资源并导致速度成绩不佳。我建议用几个寄存器阶段而不是完全组合来实现除法。

但是，如果您想尝试，可以综合以下代码（因为“/”操作由**numeric_std**库提供）。使用综合工具检查所需的资源（建议在实体中使用 std_logic_vector 进行综合）：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.numeric_std.ALL;

entity divideComb is
Port ( a : in  STD_LOGIC_VECTOR (63 downto 0);
       b : in  STD_LOGIC_VECTOR (63 downto 0);
       c : out  STD_LOGIC_VECTOR (63 downto 0));
end divideComb;

architecture Behavioral of divideComb is

begin

    c<=std_logic_vector(signed(a)/signed(b));

end Behavioral; 
```

上述代码使用 Xilinx ISE 13.4 得到以下综合结果：

*   推断 131 加法器/减法器
*   推断出 65 个比较器
*   推断 4036 多路复用器

当使用 Spartan 6 架构时，这会导致 6982 个 Slice LUT（当然还有 0 个 FlipFlops！）

# asp.net - 如何减少服务器控件的视图状态大小？

> ID：15713678
> 
> 赞同：1
> 
> 时间：2013-03-30T00:52:32.713
> 
> 标签：asp.net, viewstate

我开发了一个继承自`CompositeDataBoundControl`和的服务器控件`INamingContainer`。它有 2 个文本框和 1 个小图像。

但是在`GridView`其 ViewState 中渲染时，大小最多为 500 字节。它也有大约 20 个属性，但我这里没有使用 ViewState。

我只使用`get;set;`并在回发时再次绑定它。

现在我想知道如何减小这个 ViewState 大小以及如何检查这个 ViewState 。如果我可以检查 ViewState 的值，这将有助于解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:31:26.240

将 ViewState 粘贴到[base-64 解码器](http://www.opinionatedgeek.com/dotnet/tools/base64decode/)中。我总是觉得看到什么占用了空间是很有启发性的。

请记住， ViewState 字段还包括[ControlState](https://stackoverflow.com/questions/9422240/cant-turn-off-viewstate-asp-net-vs2010-what-can-be-wrong/9422383#9422383)。

> 它有 2 个文本框和 1 个小图像。

一些控件在没有 ViewState 的情况下可以很好地运行，因为它们在 HTTP 请求中持续存在。A`TextBox`是显式禁用 ViewState 的理想选择，因为它的值始终作为请求的一部分回传到服务器。

图像也是禁用 ViewState 的理想选择，除非计算 URL 需要处理时间（例如，数据库调用与静态分配）。

> 但是在 GridView 中渲染时...

A`GridView`几乎肯定会添加到 ViewState 本身。你在考虑这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:55:24.247

你可以禁用视图状态

```
this.EnableViewState = false; 
```

您还可以检查此链接[Disable View State for a Page](http://www.ironspeed.com/articles/Disable%20View%20State%20for%20a%20Page/Article.aspx)以禁用页面的视图状态。

如果您想检查视图状态，可以使用[ASP.NET ViewState Helper](http://www.iis.net/downloads/community/2007/02/aspnet-viewstate-helper)或 Fiddler 等工具来分析视图状态。

# objective-c - Comparing NSDecimalNumber won't work?

> ID：15713679
> 
> 赞同：4
> 
> 时间：2013-03-30T00:52:53.610
> 
> 标签：objective-c, nsdecimalnumber

For some reason, the comparing logic isn't working correctly... it wont compare two NSDecimalNumber objects. Sometimes it works, sometimes it doesn't. Really weird. The if statement works on some compilations, and sometimes not. Is this the right way of doing it?

The data is from a json file which is a 2 point decimal number which looks like this: `63.32`

Why isn't this working correctly?

```
NSError * error;
    NSDictionary * json = [NSJSONSerialization JSONObjectWithData:responceData options:kNilOptions error:error];
    NSArray * latestPrice = [json objectForKey:@"data"];
    NSLog(@"Latest price %@", latestPrice);

    NSNumber * value = [(NSDictionary*)[latestPrice objectForKey:@"last_offer"] objectForKey:@"display"];

    NSString * val = [[NSString alloc] initWithFormat:@"%@", value];
    NSString * valFinal = [val stringByTrimmingCharactersInSet:[NSCharacterSet symbolCharacterSet]];
NSDecimalNumber *number = [NSDecimalNumber decimalNumberWithString:valFinal];
    NSLog(@"%@", number);
    NSString * val2 = [[NSString alloc] initWithString:@"44.14"];
    NSDecimalNumber *number2 = [NSDecimalNumber decimalNumberWithString:val2];
    if(number2 >= number){
    NSLog(@"ds");
    } 
```

I need to compare the json value with a local value with the same decimal points.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T01:26:12.653

`NSDecimalNumber` is an object. You tried to compare memory addresses.
Use `compare:` instance method of `NSDecimalNumber`.

```
if ([number compare:number2] == NSOrderedAscending) 
```

[NSDecimalNumber Class Reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)

# macos - 无法在 mac osx 上的 QT 中创建新项目

> ID：15713682
> 
> 赞同：10
> 
> 时间：2013-03-30T00:53:27.643
> 
> 标签：macos, qt, qmake

在过去的几天里，我一直坚持这一点。我已经安装了 QT 4.8，也安装了库。但是当我开始创建一个新项目时，我只能选择使用 CMake 创建一个普通的 C++ 项目。我没有使用自动 qmake 的选项。我不知道为什么。如果有人可以请帮助它，将不胜感激。

这是我所看到的图片。

![在此处输入图像描述](../Images/eeb0bb8e7130dd90e5c9bf4ef3ef33f8.png)

当我在偏好中看到套件时，我看到了这一点。

![在此处输入图像描述](../Images/eeeed24f93f1089e70e37cfb0923cec0.png)

但是在 QT 版本部分，如果我点击它来选择一些东西，它是空的。没有什么可以选择的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-30T13:33:15.603

1.  **添加一个 Qt 版本。** 转到 Qt Creator > Preferences... > Build & Run > Qt 版本。
    *   单击添加。
    *   **On Mac, `/usr` is hidden by default, but you can access the path directly — press `⌘⇧G` and type `/usr` into the popup.**
    *   Navigate to your `qmake` executable and click Open.
    *   Under Helpers, expand Details, and click Build All.
2.  **Add a Qt Kit.** Go to Qt Creator > Preferences... > Build & Run > Kits.
    *   Click Add.
    *   Select your compiler and Qt version.
    *   Click OK.
3.  **Make sure the qmake-related plugins are enabled.** Go to Qt Creator > About Plugins... and enable the following:
    *   Build Systems > GenericProjectManager
    *   Build Systems > Qt4ProjectManager
    *   Build Systems > QtSupport
    *   Qt Creator > ProjectExplorer
    *   Qt Quick > QmlJSTools —**从 Qt Creator 2.7.0 开始，qmake 项目现在需要 QmlJSTools，如果您安装了以前版本的 Qt Creator，则可能无法启用。**
    *   然后，单击关闭并重新启动 Qt Creator。您现在应该能够创建 qmake 项目。

# emacs - Emacs multi keyboard shortcut

> ID：15713683
> 
> 赞同：0
> 
> 时间：2013-03-30T00:53:30.490
> 
> 标签：emacs, key-bindings

I'm trying to create a combination keybinding.

Here's an example:

```
(define-key my-minor-mode-map (kbd "x f") "\C-x\C-f") 
```

(edit: Thanks you Stefan for pointing out the space between \C-x and \C-f.)

This however takes me to a random file and describe-key says this:

```
Macro: C-x C-f
Keyboard macro. 
```

So I'm not really sure what that means. It seems that trying to bind s to C-s doesn't work either (As well as other interactive commands like C-r and M-x).

This does work:

```
(define-key my-minor-mode-map (kbd "x f") "\M-f") 
```

So basically I want to be able to run C-x C-f (find-file) without having to type 'find-file as a function itself.

In other words; I don't want this:

```
(define-key my-minor-mode-map (kbd "x f") 'find-file) 
```

I hope someone could help me out with this. My emacs knowledge is very limited.

Thanks in advance.

Complete code:

```
(defvar my-minor-mode-map (make-keymap) "my-minor-mode keymap")
(define-key my-minor-mode-map (kbd "x f") "\C-x\C-f")
(define-minor-mode my-minor-mode
"My minor-mode"

t "My minor mode" 'my-minor-mode-map)
(defun my-minibuffer-setup-hook ()
    (my-minor-mode 0))
"My minor-mode" 
```

Edit:

What would even be better is if I could do this:

```
(define-key my-minor-mode-map (kbd "x") "\C-x")
(define-key my-minor-mode-map (kbd "f") "\C-f") 
```

And then if I would type "x f" that it would exectue "\C-x C-f" aka find file. That way I wouldn't have to write out every possible key combination.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:34:55.517

`"\C-x \C-f"` has 3 elements: `C-x`, `SPC`, and `C-f`. You probably did not mean for that space to be there.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T13:11:48.530

I'm not entirely certain what you believe should be happening here, but I suspect what you actually want is:

```
(define-key my-minor-mode-map (kbd "x f") (key-binding (kbd "C-x C-f"))) 
```

which is the same thing as the code you said you didn't want to use:

```
(define-key my-minor-mode-map (kbd "x f") 'find-file) 
```

except that it obtains the function dynamically, based on the key binding.

p.s. It's also slightly odd that you're using a mixture of `kbd` and non-`kbd` syntax in the same form.

# xml - 从xml页面中提取数据

> ID：15713685
> 
> 赞同：0
> 
> 时间：2013-03-30T00:53:38.850
> 
> 标签：xml

嗨，我正在尝试从该页面获取一些信息[http://www.fuzzwork.co.uk/blueprints/xml/598/35/5](http://www.fuzzwork.co.uk/blueprints/xml/598/35/5)我需要“实际数量”。

我正在使用谷歌文档 Excel 文档。尝试使用 importxml 导入它。

这是我到目前为止所得到的：

=ImportXML( [http://www.fuzzwork.co.uk/blueprints/xml/598/35/5](http://www.fuzzwork.co.uk/blueprints/xml/598/35/5) ?,"//totalmaterials[@id='34']//actualquantity")

只是为了确保您知道我在这里尝试做的是在单元格中打印出实际数量。

我试着用谷歌搜索它无济于事。

我在想这对于知道自己在做什么的人来说很简单。

谢谢您的帮助。

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T10:58:15.857

您的 XPath 需要包含您所追求的目标元素的完整路径。我将其放入 Google Documents 并返回一个数据列表：

```
=importXml("http://www.fuzzwork.co.uk/blueprints/xml/598/35/5"; "//blueprint/basematerials/material/@actualquantity") 
```

如果您在问题中演示的特定元素之后完全按照您的方式操作并插入 id 过滤器：

```
=importXml("http://www.fuzzwork.co.uk/blueprints/xml/598/35/5"; "//blueprint/basematerials/material[@id='34']/@actualquantity") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:15:44.743

我不熟悉其中的 Excel 部分，但我将您的数据放入本地文件，添加了 DTD，并使用了以下查询：

```
 doc("actual_quantity-with-dtd.xml")//totalmaterials/material/(data(@id), ",",data(@actualquantity),",") 
```

它提供了以下输出，您可以将其作为 csv 文件导入 Excel。

```
 <?xml version="1.0" encoding="UTF-8"?>34 , 16043 , 35 , 13537 , 36 , 2507 , 37 , 100 , 39 , 2 , 38 , 2 , 40 , 1 , 
```

# cocos2d-iphone - CCRenderTexture 没有制作完美的副本（cocos2d）

> ID：15713690
> 
> 赞同：0
> 
> 时间：2013-03-30T00:54:38.727
> 
> 标签：cocos2d-iphone

我在使用 CCRenderTexture 时遇到问题：

![截屏](../Images/23fcafd39fb57aa58ebc792bcc7580ba.png)

左边的项目是“副本”..右边是原件。我使用下面的代码来尝试创建并精确复制右侧的 sprite/png。

但是当我从下面的 CCRenderTexture 创建一个精灵时......我失去了阴影并且图像看起来有点污迹......应该是一个精确的副本。

有任何想法吗？
我是否错误地使用了 CCRenderTexture？
为什么有区别？

```
//Sprite on the right
CCSprite* hack = [CCSprite spriteWithFile:@"ColumnMatchCheck.png"];
hack.anchorPoint = ccp(0,0);

CCRenderTexture* render = [CCRenderTexture renderTextureWithWidth:hack.contentSize.width
                                                           height:hack.contentSize.height
                                                      pixelFormat:kCCTexture2DPixelFormat_RGBA8888];

[render beginWithClear:1 g:1 b:1 a:0];
[render.sprite setBlendFunc:(ccBlendFunc){GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA}];

[hack visit];
[render end];

//Sprite on the left
CCSprite* test2 = [CCSprite spriteWithTexture:render.sprite.texture]; 
```

# xaml - 在带有 MVVM 的 Windows Phone 8 上使用 Pivot 控件进行投标

> ID：15713691
> 
> 赞同：1
> 
> 时间：2013-03-30T00:54:55.650
> 
> 标签：xaml, data-binding, mvvm, viewmodel, model-binding

我终于让我的枢轴控制在 wp8 应用程序中使用 MVVM 工作，但我仍然有一个关于绑定的问题，因为它的工作原理，我可以接受它，我对结果不满意，我试图理解为什么会这样。我的 DataContext MainViewModel 包含多个其他 ViewModel。

场景一：

如果我在网格（布局）中定义 DataContext，并且我将数据透视表头的 itemsSource 分配给 QuickSearchTabs ViewModel 并且这可以构建，但是我在 pivotitem 中定义的列表框没有分配给 QuickSearchButtons ViewModel 没有得到建造。这是xaml代码：

```
<Grid x:Name="LayoutRoot" Background="Transparent" DataContext="{StaticResource MainViewModel}" >
    <phone:Pivot x:Name="Pivot" ItemsSource="{Binding QuickSearchTabs}" FontSize="{StaticResource PhoneFontSizeSmall}" SelectedIndex="{Binding SelectedSearchTabIndex, Mode=TwoWay}">
        <phone:Pivot.Title>
            <TextBlock Text="My Search Options" />
        </phone:Pivot.Title>
        <phone:Pivot.HeaderTemplate>
            <DataTemplate>
                <ContentControl Content="{Binding Name}" />
            </DataTemplate>
        </phone:Pivot.HeaderTemplate>
        <phone:Pivot.ItemTemplate>
            <DataTemplate>
                <ListBox ItemsSource="{Binding QuickSearchButtons}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Button Content="{Binding Name}" Grid.Row="0">
                                </Button>
                                <TextBlock Text="{Binding Description}"  Grid.Row="1">
                                </TextBlock>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DataTemplate>
        </phone:Pivot.ItemTemplate>
    </phone:Pivot>
</Grid> 
```

场景二：

如果我在网格（布局）中定义 DataContext 并在列表框标签中定义相同的 DataContext，它将构建我的标题和我的列表框，但它会多次调用分配给列表框 ItemsSource 的我的 viewModel。确切地说，它将调用它的时间与我拥有的枢轴数量相同。这是xaml代码：

```
<Grid x:Name="LayoutRoot" Background="Transparent" DataContext="{StaticResource CriteriaViewModel}" >
    <phone:Pivot x:Name="Pivot" ItemsSource="{Binding QuickSearchTabs}" SelectedIndex="{Binding SelectedSearchTabIndex, Mode=TwoWay}" >
        <phone:Pivot.Title>
            <TextBlock Text="My Search Options" />
        </phone:Pivot.Title>
        <phone:Pivot.HeaderTemplate>
            <DataTemplate>
                <ContentControl Content="{Binding Name}"/>
            </DataTemplate>
        </phone:Pivot.HeaderTemplate>
        <phone:Pivot.ItemTemplate>
            <DataTemplate>
                <ListBox ItemsSource="{Binding QuickSearchButtons}" DataContext="{StaticResource CriteriaViewModel}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Button Content="{Binding Name}" Grid.Row="0">
                                </Button>
                                <TextBlock Text="{Binding Description}"  Grid.Row="1">
                                </TextBlock>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </DataTemplate>
        </phone:Pivot.ItemTemplate>
    </phone:Pivot>
</Grid> 
```

如前所述，这有效，并且无论如何都不会影响我，因为始终显示正确的数据。

我可以以某种方式看到发生了什么，但是为什么要为每个定义的数据透视表头设置 ItemsSource。当然，唯一重要的是出现在可见性中的那个！

我不知道是否应该按照我使用它们的方式使用 Pivots。看来，从我目前所见，通常一个视图被分配给每个 PivotItem。这不是我希望我的解决方案起作用的方式！

我只想要大量用于以特定方式对事物进行分组的标题，并且每个标题下显示的内容都是动态构建的，但在同一视图上，即按钮和标签列表。

关于如何让场景 1) 工作的任何想法，如果我被场景 2 困住，如何根据数据透视表头项目的数量阻止它被触发？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:17:04.803

问题解决了！

QuickSearchTabs 是 QuickSearchTab 的可观察集合，而它本应是 ViewModel 的可观察集合，即 QuickSearchTabViewModel，并且在此 viewModel 中，它将为每个选项卡加载相关 QuickSearchButtons 的可观察集合。

拥有 QuickSearchTabViewModel 提供了更大的灵活性，它将允许访问当前选项卡（标题）和其他相关属性，包括在每个选项卡中维护的所有内容，例如按钮。

希望这可以帮助。

# php - Dynamic Images in PHP

> ID：15713693
> 
> 赞同：0
> 
> 时间：2013-03-30T00:55:05.277
> 
> 标签：php, image, dynamic

I am developing a CMS for clan websites. I have a table with member ranks that members can be promoted to based on the experience points that they earn. I would like to create a progress bar for that will display how far they have until they are promoted until the next rank. What I want to do is fill a black bar with green based on how much xp they have earned since they've been promoted. I have an equation that will find a percentage based on the member's progress. For example: if a member has made it 67% of the way from it's current rank to the next rank, 67% of the length of the black bar will be filled with green. I hope all of this makes sense. What do you think would be the best way to accomplish this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T00:58:33.440

```
<div style="background-color:black;overflow:hidden;width:100px;height:30px">
    <div style="float:left;background-color:green;width:67%;height:30px">
    </div>
</div> 
```

Instead of background-color you can use background-image with width 100px(for both images) and height 30px or whatever you gonna use

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:59:53.603

Use simple CSS -- image generating here is not what you need. But even if you need, generate 100 images once for all possible ranks percent values and use them in your script.

# linux - How to remove padding from awk command?

> ID：15713699
> 
> 赞同：0
> 
> 时间：2013-03-30T00:55:35.977
> 
> 标签：linux, awk

I have a 10000 line file that contains on each line a string in the form of "data:key", which is also right-padded by 8 characters, where ':' is the delimiter. I am attempting to use awk from within Linux to print these pairs on their own lines, so that line #1 = data and line #2 = key, and I have achieved this using the command:

awk -F: '{print $1; print$2}' < ~/prices.txt

My problem occurs on the second line of each set. For some reason, it is padded with as much whitespace as there was from removing the data from the line. So, if my line was "26900:9976", the first line would be '26900' and the second line would be `' 9976'`, whitespace included.

If curious, I want to do it this way because I am piping the results to db_load to use within a B+-tree.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:06:39.070

Not exactly your answer but you can use tr for this:

```
 tr ':' '\n' < input 
```

also I don't see the behaviour you are describing with your awk command, however, you can always add a sed to the pipeline to remove leading white space:

```
 tr ':' '\n' < ~/prices.txt | sed 's/^[ \t]*//'
 awk -F: '{print $1; print$2}' < ~/prices.txt | sed 's/^[ \t]*//' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:46:24.010

You can use a regular expression as the field separator: a colon followed by zero or more whitespace chars will separate the fields.

```
awk -F ':[[:space:]]*' '{print $1; print $2}' < ~/prices.txt 
```

# django - lighttpd/fastcgi下的django-gcm？

> ID：15713700
> 
> 赞同：0
> 
> 时间：2013-03-30T00:55:40.480
> 
> 标签：django, fastcgi, lighttpd, google-cloud-messaging

有没有人使用 fastcgi 让 django-gcm 服务器在 lighttpd 下运行？

我知道如何让一个通用的 django 应用程序在 lighttpd/fastcgi 下运行，但是我无法找到专门用于在这个环境中运行 django-gcm 服务器的说明。

我一直在尝试各种事情并寻找例子，但到目前为止，我空手而归。

感谢您提供任何指向文档或建议的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:32:56.633

Django-gcm 和其他应用程序一样是可重用的应用程序。只需创建新的 django 项目并将“gcm”添加到 settings.py 文件中的 INSTALLED_APPS 即可。顺便说一句，在 django-gcm 包中，你有一个服务器应用程序的例子，你可以简单地在 lighttpd/fastcgi 下运行。

# php - 在 mysql_fetch_array 中使用 if 语句

> ID：15713701
> 
> 赞同：0
> 
> 时间：2013-03-30T00:55:52.887
> 
> 标签：php, mysql, if-statement

我有以下查询。如果成人人数少于 10，我想显示时间。

```
$result = mysql_query("SELECT sum(Adult) AS Number1, Time FROM orders WHERE confirmed = 'Y' and BookDate = '2013-04-01' GROUP BY Time");

while($row = mysql_fetch_array($result)) {

if ($row['Number1'] < '10')
echo '<div class="result">'.$row['Time'].' ('.$row['Number1'].')</div>';

} 
```

所以它会像这样出来......

```
<div class="result">18:00:00 (8)</div>
<div class="result">18:30:00 (5)</div>
<div class="result">19:00:00 (6)</div> 
```

但是我还想表明 18:15:00 有 0 个成年人。我尝试添加一些这样的 if 语句

```
if (($row['Time'] == '18:15:00') and ($row['Number1'] < '10')) {
echo '<div class="result">'.$row['Time'].' ('.$row['Number1'].')</div>';
}
else {
echo '<div class="result">18:15:00 (0)</div>';
} 
```

但它一直在循环。有人可以告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:58:12.587

如果要`break`跳出循环语句，可以使用`break`语句：

```
while(condition){
    if(conditionMet){
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:23:16.997

我不太确定您要做什么，但也许就是这样：

```
if ($row['Number1'] < '10') {
  echo '<div class="result">'.$row['Time'].' ('.$row['Number1'].')</div>';
} elseif ($row['Time']) == '18:15:00') {
  echo '<div class="result">18:15:00 (0)</div>';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T07:00:47.100

改变：-

```
if (($row['Time'] == '18:15:00') and ($row['Number1'] < '10')) 
{
echo '<div class="result">'.$row['Time'].' ('.$row['Number1'].')</div>';
}
else 
{
echo '<div class="result">18:15:00 (0)</div>';
} 
```

至

```
if ($row['Number1'] < '10') 
{
echo '<div class="result">'.$row['Time'].' ('.$row['Number1'].')</div>';
}
elseif(($row['Time']) == '18:15:00') 
{
echo '<div class="result">18:15:00 (0)</div>';
} 
```

# python - 一次串行通信 - Python 脚本和 Arduino 之间的多次读写

> ID：15713704
> 
> 赞同：2
> 
> 时间：2013-03-30T00:56:34.137
> 
> 标签：python, serial-port, arduino

我想在 Python 守护进程和 Arduino 之间建立串行通信。首先，Python 守护程序建立一个串行连接，该连接将持续整个守护程序的生命周期。通过这个连接，我想`acks`每次 Python 守护进程接收命令时向 Arduino 发送数据并在变量中接收回数据。

问题是，虽然第一次通信顺利，但之后没有任何东西通过串口发送。如果我为每个请求建立一个新连接，它可以工作，但它会使程序非常慢，我想避免这种情况。 **编辑：**真正的问题是当向arduio发送正确的字符串时一切顺利，但是当我发送错误的字符串时，串行端口阻塞并且它永远不会再次重新协调正确的字符串（**问题出在arduino代码中**）

Python代码：

```
import serial
import time
import sys
from socket import *
import threading
import thread

def handler(clientsock,addr):
    while 1:
        #arduino.flush()
        data = clientsock.recv(BUFSIZ)
        if not data:
            break
        print data
        print data
        #time.sleep(3)
        arduino.write(data)
        #time.sleep(3)
        ack = arduino.readline(1)
        arduino.flush()
        clientsock.send(ack+"\n")
    clientsock.close()

if __name__=='__main__':
    HOST = '0.0.0.0'
    PORT = 21567
    BUFSIZ = 1024
    ADDR = (HOST, PORT)
    arduino = serial.Serial('/dev/ttyACM0',9600,timeout=6)
    serversock = socket(AF_INET, SOCK_STREAM)
    serversock.bind(ADDR)
    serversock.listen(2)

    while 1:
        print 'waiting for connection...'
        clientsock, addr = serversock.accept()
        print '...connected from:', addr
        thread.start_new_thread(handler, (clientsock, addr)) 
```

Arduino代码：

```
 int relayPinCH1 = 7; // pin de commande du relais 1
  char inData[20]; // Allocate some space for the string
  char inChar=-1; // Where to store the character read
  byte index = 0; // Index into array; where to store the character

void setup()
{
  pinMode(relayPinCH1, OUTPUT);
  Serial.begin(9600);
}

char Comp(char* This) {
    while (Serial.available() > 0) // Don't read unless
                                   // there you know there is data
    {
        if(index < 19) // One less than the size of the array
        {
            inChar = Serial.read(); // Read a character
            inData[index] = inChar; // Store it
            index++; // Increment where to write next
            inData[index] = '\0'; // Null terminate the string
        }
    }
    Serial.flush();
    if (strcmp(inData,This)  == 0) {
        for (int i=0;i<19;i++) {
            inData[i]=0;
        }
        index=0;
        return(0);
    }
    else {
        return(1);
    }
}

void loop()
{
  //Serial.println("Hello Pi");
    if (Comp("l11\n")==0)
    {
      Serial.flush();
      digitalWrite(relayPinCH1, HIGH);
      Serial.println("y");
    }

    if (Comp("l10\n")==0)
    {
      Serial.flush();
      digitalWrite(relayPinCH1, LOW);
      Serial.println("n");
    } 
  delay(1000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T04:19:45.000

在您的 Arduino 代码中，您的逻辑有点古怪 - 所以，我不确定，但是您是否在再次开始循环之前将索引清除为 0？看起来一旦 index == 19，它可能会或可能不会重置为 0，具体取决于后面的逻辑。如果您再次输入 Comp() 并且索引 >= 19，那么您将永远不会再次读取串行端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:23:23.707

我认为**@Zeus**是完全正确的（因此我赞成这个答案），但也存在其他问题。重申**@Zeus**所说的话：

*   `index`仅`0`在比较成功时重置为。因此，您的缓冲区已满，您要查找的字符串不存在，并且`index`永远不会再返回`0`。
*   一旦`index`达到`19`，就不再进行读取。结果，无论在什么都`inData`保留`inData`，所有未来的比较都将失败，意思`index`永远不会重置为`0`.

代码中还有许多其他问题，但主要问题是设计非常脆弱，并且很容易出现您遇到的那种错误。例如，如果您的 Python 脚本发送的换行符是 CR+LF 换行符，但您只期望 CR，那么您将遇到与现在相同的故障：第一次通信工作，但再也不会。

我建议像这样重新组织您的代码：

*   无论通信内容如何，​​您用于读取串行端口的函数都会从串行端口读取一行并将其返回给调用者（不带换行符）。
*   调用者将从串行端口接收到的行与已知命令列表进行比较，并相应地执行它们。

这可能看起来大致如下

```
char strCommand[0xFF];
int idxCommandChar;

// Read a command from serial, returning the command size
// This function BLOCKS, i.e., doesn't return until a command is available
int readSerialCommand() {
  // We reset the index to zero on every read: the command is overwritten every time
  idxCommandChar = 0;

  // Read serial characters and store them in strCommand
  // until we get a newline
  int in = Serial.read();
  while (in!='\n')  {
    strCommand[idxCommandChar++] = in;
    in = Serial.read();
  }
  // Add the string terminator
  strCommand[idxCommandChar++] = '\0';
  // Return command size
  return idxCommandChar;  
}

// Get command from serial, and process it.
void processCommand() {
  readSerialCommand();
  if (strcmp(strCommand, "CMD1")==0) {
    // do something
  } else if (strcmp(strCommand, "CMD2")==0) {
    // do something else
  } else {
    // Unknown command
    Serial.println("Unknown command");
  }

}

void loop() {
  processCommand();
  delay(1000);
} 
```

此代码在串行上阻塞，即在检测到换行之前不会返回。您可以轻松地将代码修改为非阻塞，可能是这样的：

```
/* Read serial characters, if available and store them in strCommand
   until we get a newline
   Returns 0 if no command is available */
int readSerialCommand() {
  idxCommandChar = 0;
  while (Serial.available()) {
    int in = Serial.read();
    while (in!='\n')  {
      strCommand[idxCommandChar++] = in;
      in = Serial.read();
    }
    strCommand[idxCommandChar++] = '\0';
    return idxCommandChar;  
  }
  return 0;
}

// Get command from serial (if available), and process it.
void processCommand() {
  if (readSerialCommand()) {
     .... 
```

无论哪种情况，您都可能在等待时丢失连续字符，因此您可能需要重新考虑该策略。

# css - Shadow gradient inside div

> ID：15713706
> 
> 赞同：1
> 
> 时间：2013-03-30T00:56:59.013
> 
> 标签：css

I'm trying to emulate the way this site does their shadow gradient inside divs ( [http://zeroturnaround.com/software/jrebel/roi-calculator/#headline](http://zeroturnaround.com/software/jrebel/roi-calculator/#headline) )

Check this picture

![在此处输入图像描述](../Images/adc2010448cdc26f7c0cd769b9af5fce.png)

Not sure how to get the border shadow portion that the arrows point to

Thanks !

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:05:55.170

It's an image they are using to do it. This is their [source sprite sheet](http://static.zeroturnaround.org/theme5/images/gfx-s1d3748b122.png)

That specific border image in near the bottom.

I agree with you though, it looks good and I wish it was possible in pure code but I'm sure if that's possible yet, or else I'd be able to help you more.

顺便说一句，我建议你[为 Firefox 安装 Firebug 插件](https://getfirebug.com/)。我所要做的就是右键单击该区域并使用萤火虫进行检查，它会立即告诉我该边界的确切创建来源。

# c++ - 无法找到无限循环的原因

> ID：15713707
> 
> 赞同：-5
> 
> 时间：2013-03-30T00:57:04.440
> 
> 标签：c++

我正在为一个计算学生学费的课程编写程序。我得到一个无限循环，似乎无法找到原因？

代码：

```
#include <iostream>
#include <string>
#include <fstream>  
#include <iomanip>

using namespace std;

int main ()
{
    string ssn;
    char resident;
    int count = 0, hours;
    double feesOther = 30, feesTech = 18, tuition, totalFees, sumTuition = 0, subTuition;

    ofstream printFile ("StudentGrades.txt");
    if (!printFile) 
    {
        cout << " Error opening printFile" << endl;
        system ("pause");
        return 100; 
    }

    ifstream studentFile;
    studentFile.open("c:\\lab5b.dat");

    if (!studentFile)
    {
        cout << "Open error on lab5a.dat" << endl;
        system ("pause");
        return 101;
    }

    studentFile >> ssn >> resident >> hours;

    cout << "SSN          Tuition\n";
    cout << "--------------------\n";

    while (!studentFile.eof())
    {
        if (resident == 'Y' || resident == 'y')
        {
            if (hours >= 12)
                tuition = 1548;

            else

                tuition = hours * 129;
        }   
        if  (resident == 'N' || resident == 'n')
        {
            if (hours >= 12)
                tuition = 6360;

            else

                tuition = hours * 530;
        }   

        totalFees = feesOther + (hours * feesTech);

        if (totalFees > 112.50)
            totalFees = feesOther + 112.50;

        subTuition = tuition + totalFees;
        sumTuition += tuition ;
        count++;

        cout << ssn << setw(7) << showpoint << setprecision(2) << subTuition << endl;
        cout << "Total Semester Tuition: " << sumTuition << endl;

        studentFile >> ssn >> subTuition;

    }

    studentFile.close();    
    printFile.close();      

    system ("pause");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:05:14.277

您`studentfile`很可能处于失败状态，因为您*从不*检查读取操作是否成功。更改代码如下：

```
if(!(studentFile >> ssn >> resident >> hours))
{
    std::cout << "read failed";
    return 1;
}

//...    

do 
{
    // Do stuff
    // REMOVE THIS LINE: studentFile >> ssn >> subTuition;
} while (studentFile >> ssn >> subTuition); // while loop stops as soon as read fails 
```

这里要学习的关键一课是在读写操作期间**始终执行错误检查。**另外，请阅读[为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)as`while (!studentFile.eof())`被认为是 C++ 反模式。

# python - Python正则表达式表现异常

> ID：15713712
> 
> 赞同：3
> 
> 时间：2013-03-30T00:57:59.877
> 
> 标签：python, regex

```
url = "http://www.domain.com/7464535"
match = re.search(r'\d*',url)
match.group(0) 
```

返回 '​​' <----- 空字符串

但

```
url = "http://www.domain.com/7464535"
match = re.search(r'\d+',url)
match.group(0) 
```

返回“7464535”

我认为“+”应该是 1 或更多，而“*”应该是 0 或更多是否正确？RE应该是贪婪的。那么为什么他们不都返回同样的东西，更重要的是为什么第一个什么都不返回呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-30T01:00:57.153

`+`您对和的含义是正确的`*`。所以`\d*`将匹配零个或多个数字——这正是它正在做的事情。从字符串的开头开始，它匹配零位数字，然后就完成了。它成功匹配零个或多个数字。

`*`是贪心的，但这仅意味着它将在匹配的位置匹配尽可能多的数字。它不会放弃匹配来尝试在字符串中稍后找到更长的匹配。

* * *

**编辑**：更详细的描述正则表达式引擎的作用：

以我们要搜索的字符串为`"http://www.domain.com/7464535"`且模式为的情况为例`\d+`。

一开始，正则表达式引擎指向我们 URL 的开头和正则表达式模式的开头。`\d+`需要匹配一个或多个数字，所以首先正则表达式引擎必须找到至少一个数字才能成功匹配。

它看起来的第一个地方找到了一个“h”字符。那不是数字，所以它移动到“t”，然后是下一个“t”，依此类推，直到最终到达“7”。现在我们已经匹配了一个数字，所以“一个或多个”的要求得到了满足，我们*可以*成功匹配，除了`+`贪心，它会匹配尽可能多的数字而不改变匹配的*起点*，' 7'。所以它到达字符串的末尾并匹配整数'7464535'。

现在考虑我们的模式是否是`\d*`. 现在唯一的区别是零位是有效匹配。由于正则表达式从左到右匹配，因此第一个`\d*`匹配的位置是字符串的开头。所以我们在开始时有一个零长度匹配，但由于`*`是贪心的，只要有数字，它就会扩展匹配。由于我们找到的第一件事是'h'，一个非数字，它只返回零长度匹配。

那么`*`，如果它只会给你一个零长度的匹配，那么它还有什么用呢？考虑一下我是否匹配这样的配置文件：

```
foo: bar
baz:   quux
blah:blah 
```

I want to allow any amount of spaces (even zero) after the colon. I would use a regex like `(\w+):\s*(\w+)` where `\s*` matches zero or more spaces. Since it occurs after the colon in the pattern, it will match just after the colon in the string and then either match a zero-length string (as in the third line `blah:blah` because the 'b' after the colon ends the match) or all the spaces there are before the next non-space, because `*` is greedy.

# c++ - Linux C++ 文件权限被拒绝

> ID：15713717
> 
> 赞同：0
> 
> 时间：2013-03-30T00:58:30.990
> 
> 标签：c++, linux

```
ls -alR | myprogram 
```

如果有我无权访问的文件，它会给出一条错误消息，例如“文件权限被拒绝”。但是如何在我的程序中检测到这个错误呢？我试图测试`stderr`. 但这似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:01:27.227

对于您的直接问题，您只是在这里管道标准输出。要同时捕获 stdout 和 stderr，请执行以下操作：

```
ls -alR 2>&1 | myprogram 
```

请参阅Bash 手册中的[http://www.gnu.org/software/bash/manual/bashref.html#Pipelines](http://www.gnu.org/software/bash/manual/bashref.html#Pipelines)。

但是，尚不清楚您为什么要这样做。如果您想以编程方式处理目录列表，有比解析`ls`. 如果您编辑您的问题以描述您的总体目标，我也许可以提供更具体的建议......

# c# - File.Create taking wrong path name

> ID：15713720
> 
> 赞同：-1
> 
> 时间：2013-03-30T00:58:49.140
> 
> 标签：c#

I have used this before in Windows XP and VS2008 and never got this error now using VS 2012 and windows 8.

This is my simple code to create a file in c drive is giving exception

```
string path = @"C\SaveValues.txt";
if (!File.Exists(path))
{
    using (File.Create(path))
    {
    }
} 
```

> Could not find a part of the path 'C:\Program Files (x86)\IIS Express\C\SaveValues.txt'.

What is this error referring to?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:00:17.647

Change it to

`string path=@"C:\SaveValues.txt";` (mainly look at **C:** )

# linux - 使用 ldd -u，输出是“未使用的直接依赖项：/lib64/libc.so.6”，但我确实使用 printf()

> ID：15713732
> 
> 赞同：3
> 
> 时间：2013-03-30T01:00:25.637
> 
> 标签：linux, gcc, shared-libraries, ldd

在 Fedora 18 中，我编写了一个文件“ac”，如下所示：

```
#include <stdio.h>
void main(void)  
{  
    printf("a");
} 
```

然后我用 gcc 4.7.2 编译它：`gcc a.c -o a`
最后使用 ldd 2.16：`ldd -u ./a`
输出太奇怪了：

`Unused direct dependencies:`
`/lib64/libc.so.6`

我认为目标文件真正使用`/lib64/libc.so.6`是因为`printf()`. 而在 Red Hat 6 中，
就没有这种奇怪的外观了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-05T20:55:02.040

just `ldd -u` doesn't work too well; you are advised to use `ldd -u -r`.

See e.g. [https://bugzilla.redhat.com/show_bug.cgi?id=216864](https://bugzilla.redhat.com/show_bug.cgi?id=216864)

# windows-phone-8 - 如何确定何时在 Windows Phone 8 中关闭 SIP（ 软件键盘）？

> ID：15713733
> 
> 赞同：0
> 
> 时间：2013-03-30T01:00:36.433
> 
> 标签：windows-phone-8, windows-phone

如何确定在 Windows Phone 8 中何时关闭 SIP（​​软件输入面板）？

在 StackOverflow 和在线搜索，但一无所获！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T03:40:04.017

当没有文本框具有焦点时，键盘将被关闭，因此您可以将其用作指示器。

我认为在 WP7 中不可能（不确定它是否在 WP8 中发生了变化）是检测是否使用了 SIP 键盘与硬件键盘。但话又说回来，有多少 WP8 手机有硬件键盘？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:12:38.967

据我所知，没有 API，也没有生成事件来知道键盘何时被关闭。

# build-automation - plugin_LTLIBRARIES 是像 lib_LTLIBRARIES 和 noinst_LTLIBRARIES 这样的内置变量吗？

> ID：15713738
> 
> 赞同：3
> 
> 时间：2013-03-30T01:01:20.420
> 
> 标签：build-automation, autotools, automake

最近看了strongswan的源码。我在一个 Makefile.am 中找到了这段脚本。我以前没见过`plugin_LTLIBRARIES`。我在互联网上搜索。大部分结果是 Makefile.am 文件。是 M4 宏还是内置变量？它的用途是什么？

```
if MONOLITHIC
noinst_LTLIBRARIES = libstrongswan-socket-default.la
else
plugin_LTLIBRARIES = libstrongswan-socket-default.la
endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T12:01:13.313

表单的任何 automake 变量都会`foo_PRIMARY`安装到`$(foodir)`. `$(plugindir)`可以通过`AC_SUBST`in设置`configure.ac`。

`m4`不用于处理`Makefile.am`。它们是用`automake`perl 程序解析的，因为构建模板所涉及的逻辑`Makefile.in`比直接的宏扩展要微妙得多。

# java - 如何将单个java程序拆分为多个java程序？

> ID：15713742
> 
> 赞同：-3
> 
> 时间：2013-03-30T01:01:33.390
> 
> 标签：java

我有一个关于将单个 java 程序拆分为多个程序的问题。

假设我有一个计算器程序，它具有加、减、乘、除和求模除的功能。我想将这个冗长的程序划分/拆分为子程序，例如 add.java 用于加法，sub.java 用于减法，mul.java 用于乘法等等。

我该如何拆分它，并相互链​​接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T01:28:27.013

在我看来，您真正的问题是您不了解 Java 和面向对象设计 (OOD) 的基础知识。您刚刚将所有代码转储到一个类中，可能`static`在所有地方都使用了方法和变量。（你谈到拆分成子程序，这有点放弃。）

Oracle Java 教程（或任何好的 Java 教科书）将解释什么是类，以及如何编写、编译和运行由多个类组成的程序。

将现有的单体类拆分为更小的组件更加困难，因为没有单一的“正确方法”可以做到这一点。（如果你理解 OOD，那对你来说显然是显而易见的......）

我建议您先阅读一些关于 OOD 的内容。这应该让您深入了解您的应用程序设计和结构*应该*是什么样子。一旦你了解了 OOD，阅读一本关于 Java 设计模式的书也会很有帮助。但是，您需要了解设计模式的 OOD 才能对您有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:08:29.420

您可以将 add、sub 等拆分到不同的文件中。但请注意，`.java`文件名必须与类名匹配。例如，如果您拆分添加到`add.java`，那么在 中`add.java`，您必须有一个名为 的类`add`。

之后，每个`.java`文件将被编译成一个`.class`文件。运行时，只需将所有`.class`文件提供给 java，如下所示：

```
java Calc.class sub.class add.class 
```

您也可以将所有 .class 文件打包成一个 .jar 文件。然后当你运行：

```
java Calc.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T01:14:16.420

这不是如何做的问题，而是你是否应该做的问题。Java 具有作为一种非常强大的面向对象语言的优势，但它仍然有一些限制。

对于您要添加的每个程序，您必须创建一个新的类文件和一个新类。您仍然需要一个主程序，比如 Calculator.java，然后它必须实例化其他模块的版本。

```
Add adder = new Add();
Subtract subtracter = new Subtract(); 
```

等等。这最终会花费你更多的时间而不是它的价值，特别是如果你真的不需要单独的模块来完成看似简单的任务。

要回答如何做到这一点：

```
Calculator.java //The main program that will import the others.
Add.java
Modulo.java
...etc 
```

假设所有这些文件都在一个文件夹中，并且您使用 编译它们`javac *.java`，那么如果`Calculator.java`要实例化`Add.java`如上所示的新版本，它将自动导入（如果这是您的主要问题所问的）。

与 C++ 或 C 不同，您不需要实际的导入语句。一个文件夹中的所有 java 文件都被认为是在一个“包”中，这是默认包。如果您要声明自己的包，那将是另一回事。

# jquery - jquery滚动条在下拉菜单中不起作用

> ID：15713744
> 
> 赞同：0
> 
> 时间：2013-03-30T01:01:47.003
> 
> 标签：jquery, css, tinyscrollbar

请指导我我所缺少的，我正在尝试不同的东西，但它卡住了，

我做了一个下拉通知，并想在其中使用 jquery 滚动条让它变得很酷，但是我尝试了很多 jquery 插件，但是当尝试在悬停的元素中调用它们时，一切都停止了工作。

最后我使用了*微小的滚动条*，但它也显示我禁用它生成滚动条的类，

我已经检查过没有jquery错误。

以下是我工作的链接，感谢任何帮助

[http://techchef.org/numoni/dashboard.html](http://techchef.org/numoni/dashboard.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:43:05.177

好的，我已经做到了:) 事情是滚动条不起作用，如果元素默认设置为无，因为它计算元素的高度和宽度，显示我使用切换功能而不是显示：无，我使用可见性默认为隐藏。

所以我喜欢下面

```
$(document).ready(function() {

  $("#notificationicon").click(function(){
  $("#notificationdropdown").slideDown("slow");
   $("#notificationdropdown").attr("style", "visibility: visible");
});

$("#notificationdropdown").mouseleave(function(){
$("#notificationdropdown").slideUp("slow");
}); 
```

# php - similar_text in php source code

> ID：15713745
> 
> 赞同：1
> 
> 时间：2013-03-30T01:01:55.860
> 
> 标签：php, c, string, text-search

I'm trying to use th function similar_text in PHP in my application written in C, I tried googling and downloaded the source but can't I find it. Any one knows where to find the C implementation of the function in php source code? I'm thinking of using using it instead of building my own one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:06:07.020

You should start to have a look at:

```
ext/standard/string.c line: 2999 
```

This is for php 5.4.10\.

You can find this out for yourself using:

```
grep -r 'similar_text' PHP_SOURCE_FOLDER 
```

# ios - 带有静态 UITableView 的 ECSlidingViewController

> ID：15713746
> 
> 赞同：3
> 
> 时间：2013-03-30T01:02:14.403
> 
> 标签：ios, objective-c, uitableview

我正在使用 ECSliding 框架开发应用程序。一切都很顺利，直到我添加 a`UItableViewController`作为`topViewController`. 尝试滚动静态表格视图时遇到错误。我可以确定问题出在哪里，但我不知道如何解决。如果我删除下面的命令（在`viewDidLoad`方法中声明），我的`UITableView`开始正常滚动。

```
 [self.view addGestureRecognizer:self.slidingViewController.panGesture]; 
```

用于将 UITableViewController 设置为 topViewController 的代码

```
 self.topViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Driver"]; 
```

`topViewController`是来自`ECSlidingViewController`

我在另一个帖子上发现了另一个类似的问题，但是在那里，那个人使用 a`UINavigationController`作为`topViewController`.

请让我知道是否有人可以帮我一把。

谢谢，马科斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T13:43:16.120

我看到你解决了你的问题，但是其他人也在寻找这个解决方案，所以我会提供一些关于这个的信息。

这里的问题是，当您向`UITableView`子类添加平移手势时，它会与当前用于滚动的手势混淆。当您平移时，它不再知道您在追求什么，并且您最终可能会出现不一致的行为（或您不想要的行为）。

有几种不同的解决方案可能会根据您的实际需求起作用：

* * *

[一](https://stackoverflow.com/questions/10967484/how-to-make-the-tableview-response-pan-gesture-in-zuuirevealcontroller)：

如果你成为`UIGestureRecognizerDelegate`你可以实现的方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return TRUE;
} 
```

这使您可以监听多个手势。只需确保将手势的委托设置为`self`

[二](https://stackoverflow.com/questions/2627934/simultaneous-gesture-recognizers-in-iphone-sdk/2628777#2628777)：

* * *

如果您指定希望新手势实现的方向，您可能会停止滚动问题：

```
 UISwipeGestureRecognizer* swipe;

   swipe = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeL)] autorelease];
   swipe.direction = UISwipeGestureRecognizerDirectionLeft;
   [view addGestureRecognizer:swipe];

   swipe = [[[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeR)] autorelease];
   swipe.direction = UISwipeGestureRecognizerDirectionRight; // default
   [view addGestureRecognizer:swipe]; 
```

显然这是使用滑动，但它可以很容易地修改。这表示您不想担心垂直手势，您可以允许表格继续其默认行为。不过，您可能仍需要在 ONE 中实现委托方法，以验证它是否侦听多个手势。

# ruby-on-rails - 无法在 Heroku 上 rake db（一个月 Rails 课程）

> ID：15713748
> 
> 赞同：0
> 
> 时间：2013-03-30T01:02:57.423
> 
> 标签：ruby-on-rails, ruby, database, migrate

我正在与 Mattan Griffel 一起完成 One Month Rails 课程，但我遇到了 Imagemagik 问题（尝试上传带有 pin.rb 中应用样式的照片时出现以下错误 - xzy 图像无法被“识别”命令识别） ) 并在另一篇文章中看到，此问题与 Imagemagik 安装在我的本地计算机上有关，并且应用程序在部署到 Heroku 时应该可以工作（上传正确大小的引脚）。所以，我回去更新了我的 github 并将 master 推送到 Heroku。运行数据库迁移时，出现以下错误：

`PG::Error: ERROR: relation "pins" does not exist : ALTER TABLE "pins" ADD COLUMN "user_id" integer`

看起来引脚关系甚至不存在？在使用 Imagemagik 调试问题之前，我希望让应用程序在 Heroku 上运行。有什么想法吗？

Github - [https://github.com/jrlundberg/omrails](https://github.com/jrlundberg/omrails) 应用程序 - [http://still-scrubland-2791.herokuapp.com/](http://still-scrubland-2791.herokuapp.com/)

谢谢！

杰森。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:31:39.363

在您的迁移`20130319034336`中，您试图将一`user_id`列添加到`pins`不存在的表中。将迁移更改为：

```
class AddUserIdToPins < ActiveRecord::Migration
  def change
    create_table :pins do |t|
      t.integer :user_id
      t.timestamps
    end
    add_index :pins, :user_id
  end
end 
```

# java - Android中的R.java类

> ID：15713749
> 
> 赞同：0
> 
> 时间：2013-03-30T01:02:58.727
> 
> 标签：java, android, xml, class, compilation

我有一个严重的问题。我在 YouTube 上观看了一些关于 android 编程的教程，然后出现了 R.java 类的一个问题。编译我的项目后，R.java 类被删除。当我尝试添加一些声音时，这个问题就开始了，但后来我删除了它们，奇怪的是我从未在任何 .xml 或其他类或文件中使用过它们。

是的，我试图清理我的项目 1000 次......

在最坏的情况下，我可以重写所有内容，但我很想知道如何解决它。

这是它的样子[http://postimg.org/image/l7iyf1gwr/](http://postimg.org/image/l7iyf1gwr/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:08:45.150

开始构建时会清理 R.java。您的一个 XML 文件中有错误，这就是为什么没有生成新版本的原因。或者，似乎 eclipse 认为它是一个 XML 文件。查看错误消息：您的所有 MP3 都被视为 XML 文件。尝试将这些移动到原始文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T03:04:36.537

检查所有 mp3 文件、drawable 和 xml 文件的名称。确保它们只包含小写字母、数字和下划线。名称中的任何空格也应删除。即使您不在代码中的任何地方使用命名错误的文件，也应遵循命名约定，否则会出现 R.java 问题。

如果它不能解决您的问题，请检查 xml 文件中的代码是否有任何错误。清理并构建项目。

# javascript - 角度：从视图到位置外视图的 ng-bind

> ID：15713751
> 
> 赞同：1
> 
> 时间：2013-03-30T01:03:05.523
> 
> 标签：javascript, grails, data-binding, angularjs

如果这可以通过 $rootScope 解决，我该如何实现？我的代码在下面，在视图内部它工作正常，只要我将元素放在视图之外它就会中断。

控制器

```
$http.get('testData.json').success(function(data) {
     angular.forEach(data, function(item) {
            if (item.id == $routeParams.detailId) 
              $scope.article = item;
              $scope.category = $scope.article.category;
          });
      }); 
```

来自控制器的填充输入

```
<input type="text" ng-model="category"> 
```

ng-bind 控制器外的元素

```
<h1 ng-bind-template="Hello, {{category}}"></h1> 
```

我试图在 rootScope 中加载数据，什么都不起作用，此外 $rootScope 窗口

```
 .run(function($rootScope, $window) {
    $rootScope.window = $window;
}); 
```

# java - 使用 MVC java 计算器出现一堆错误

> ID：15713752
> 
> 赞同：0
> 
> 时间：2013-03-30T01:03:24.563
> 
> 标签：java, swing, calculator

它与这个值有关；numOverall = (Integer.toString(theModel.getCalculationValue()));

我认为它没有在班级之间正确转移？

计算类

```
/* 
 * calc view class
 */

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class Calc extends JFrame implements ActionListener {

    private JButton plusButton = new JButton("+");
    private JButton minusButton = new JButton("-");
    private JButton clearButton = new JButton("Clear");
    private JButton equalsButton = new JButton("=");
    private JButton zeroButton = new JButton("0");
    private JButton oneButton = new JButton("1");
    private JButton twoButton = new JButton("2");
    private JButton threeButton = new JButton("3");
    private JButton fourButton = new JButton("4");
    private JButton fiveButton = new JButton("5");
    private JButton sixButton = new JButton("6");
    private JButton sevenButton = new JButton("7");
    private JButton eightButton = new JButton("8");
    private JButton nineButton = new JButton("9");
    private String number = "";
    private JLabel numDisplay = new JLabel("0");
    private boolean addition = false;
    private boolean subtraction = false;
    private String numOverall;
    private CalculationModel theModel;

    private int total = 0;
    private boolean isEquals = false;   // false = haven't clicked equals button yet, true they have
    //private String numberText;

    Calc(){
        JPanel calcPanel = new JPanel();

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(400, 600);
        calcPanel.add(numDisplay);
        calcPanel.add(plusButton);
        calcPanel.add(minusButton);
        calcPanel.add(clearButton);
        calcPanel.add(equalsButton);
        calcPanel.add(zeroButton);
        calcPanel.add(oneButton);
        calcPanel.add(twoButton);
        calcPanel.add(threeButton);
        calcPanel.add(fourButton);
        calcPanel.add(fiveButton);
        calcPanel.add(sixButton);
        calcPanel.add(sevenButton);
        calcPanel.add(eightButton);
        calcPanel.add(nineButton);

        this.add(calcPanel);

        plusButton.addActionListener(this);
        minusButton.addActionListener(this);
        clearButton.addActionListener(this);
        equalsButton.addActionListener(this);
        zeroButton.addActionListener(this);
        oneButton.addActionListener(this);
        twoButton.addActionListener(this);
        threeButton.addActionListener(this);
        fourButton.addActionListener(this);
        fiveButton.addActionListener(this);
        sixButton.addActionListener(this);
        sevenButton.addActionListener(this);
        eightButton.addActionListener(this);
        nineButton.addActionListener(this);

    }
    public void actionPerformed(ActionEvent event){
        if (event.getSource() instanceof JButton){
            JButton clickedButton = (JButton) event.getSource();
            String buttonText = clickedButton.getText();
            numOverall = (Integer.toString(theModel.getCalculationValue()));
            if (clickedButton == zeroButton || clickedButton == oneButton || clickedButton == twoButton || clickedButton == threeButton || clickedButton == fourButton || clickedButton == fiveButton || clickedButton == sixButton || clickedButton == sevenButton || clickedButton == eightButton || clickedButton == nineButton)
            {
                number = number + buttonText;
                numDisplay.setText(number);
            }
            if (clickedButton == clearButton){
                number = "";
                addition = false;
                subtraction = false;
                total = 0;
                numDisplay.setText(number);
            }
            if (clickedButton == plusButton){
                addition = true;
                subtraction = false;
                total = Integer.parseInt(number);

            }
            if (clickedButton == minusButton){
                addition = false;
                subtraction = true;
                total = Integer.parseInt(number);

                //number = "";
            }
            if (clickedButton == equalsButton){
                isEquals = true;
                addition = false;
                subtraction = false;
                numDisplay.setText(numOverall);

            }
        }
    }

    public int getNumber(){
        return Integer.parseInt(number);
    }
    public boolean addition(){
        return addition;
    }
    public boolean subtraction(){
        return subtraction;
    }
    public int total(){
        return total;
    }
    public boolean isEquals(){
        return isEquals;
    }
    public String getNumberString(){
        return number;
    }
} 
```

模型类

```
public class CalculationModel {
    private int calculationValue;

    public void addTwoNumbers(int firstNumber, int secondNumber){

        calculationValue = firstNumber + secondNumber;

    }
    public void minusTwoNumbers(int firstNumber, int secondNumber){
        calculationValue = firstNumber - secondNumber;
    }

    public int getCalculationValue(){

        return calculationValue;

    }
} 
```

mvc 计算类

```
public class MVCCalc {
    public static void main(String[] args) {

        Calc theView = new Calc();

        CalculationModel theModel = new CalculationModel();

        Calculations theController = new Calculations(theView,theModel);

        theView.setVisible(true);

    }

} 
```

计算类

```
public class Calculations
{
    private Calc theView;
    private CalculationModel theModel;

    private int number1;
    private int total;

    public Calculations(Calc theView, CalculationModel theModel)
    {
        this.theView = theView;
        this.theModel = theModel;
    }

    public void doesometing() {
        if(theView.isEquals()){
            if(theView.addition()){     

            number1 = theView.getNumber();
            total = theView.total();
            theModel.addTwoNumbers(total, number1);
            }
            if(theView.subtraction())
            {
            number1 = theView.getNumber();
            total = theView.total();
            theModel.minusTwoNumbers(total, number1);
        }
            //theView.addition() = false;
            //theView.subtraction() = false;
    }   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:26:46.767

> 它与这个值有关；numOverall = (Integer.toString(theModel.getCalculationValue()));

这是对的。`CalculationModel` `theModel`类中的`Calc`永远不会分配，这会导致`NullPointerException`尝试调用时出现`theModel#getCalculationValue`。`CalculationModel`创建的 被传递到控制器`Calculations`而不是类`Calc`。本质上，您需要在视图和控制器之间创建一个链接，以便`theModel`可以从视图访问`Calc`。

```
theView.setController(theController); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:27:32.807

Calc 类中的 theModel 始终为空。

# php - 如何在 JSON 中编码 MYSQL 响应并在 iOS 应用程序中解析

> ID：15713755
> 
> 赞同：0
> 
> 时间：2013-03-30T01:03:50.433
> 
> 标签：php, mysql, ios, json, nsurlrequest

我的 php 有一个名为 load 的方法。我可以插入不同的方法，但是当我更改参数以使用此方法时，我认为它正确发送了数据，但它没有显示在我的应用程序上。

索引.php

```
function load(){
          //Establish connection
   $con=mysqli_connect("localhost","root","","Mealidea");

    // Check connection
    if (mysqli_connect_errno()){
        $errorR['name']="Failed to connect to mysql".mysqli_connect_error();
        echo json_encode(errorR);
    }

    //Perform query
    $result = mysqli_query($con,"SELECT * FROM User");
    $myjsons = array();

    while($row = mysql_fetch_assoc($result)){ 
        $myjsons[] = $row;
    }

    //Close connection
    mysqli_close($con);    

    echo json_encode($myjsons);
} 
```

设置请求：

```
//Get from DB
    NSURL*url=[NSURL URLWithString:@"http://localhost/Tutorials/index.php?f=load&key=6dM7V0n5GqYJLTMibQDf2gA2a94h8hbF"];

    //URL request
    NSURLRequest*request=[NSURLRequest requestWithURL:url];

    //Set the connection
    connection = [NSURLConnection connectionWithRequest:request delegate:self];

    if (connection) {
        webData=[[NSMutableData alloc]init];
    } 
```

得到答案：

```
NSDictionary*data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:&error];

    //If data is nil, then print error
    if (data==nil) {
        //NSLog(@"%@",error);
    }

    //Print the data
    NSLog(@"%@",data);

    //???? how to parse data?
    NSDictionary*num=[data valueForKey:@"User"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:18:41.083

`NSDictionary`根据这一行，您的 PHP 脚本似乎正在发送一个数组（以 JSON 编码），但您的 Objective-C 代码似乎需要一个：

```
NSDictionary*data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:&error]; 
```

那应该是

```
NSArray *users = [NSJSONSerialization JSONObjectWithData:webData options:0 error:&error]; 
```

然后你应该能够遍历`NSArray`用户，并以`UITableView`类似或类似的方式呈现它们。

# java - 返回数字，但它们打印为 0

> ID：15713756
> 
> 赞同：0
> 
> 时间：2013-03-30T01:03:50.693
> 
> 标签：java, arrays, recursion, printing, return

好的，所以我有一个我一直在研究的程序，它需要使用递归方法，并且数组编号必须是数组而不是 ArrayList。该程序的目的是允许用户输入双精度数，直到键入 0。双精度数必须存储到一个数组中，并且我必须使用递归方法找到最大值、负数的个数和正数的总和。我遇到的问题是当程序退出并打印结果时，它打印最大值并总和​​为 0 而不是答案。我已经尝试了几乎所有我能想到的但无法让它发挥作用的东西。如果有人能告诉我我的问题是什么，将不胜感激......谢谢。

注意：起初我将 max、negative 和 sum 放在 assignment9 方法中，还尝试从 main 方法打印，但似乎没有任何效果。

```
import java.util.*;
import java.text.*;;

public class Assignment9 {

//main method initializes variables then calls method assignment9
public static void main(String[] args)
{
    int count = 0;
    ArrayList<Double> help = new ArrayList<Double>();
    double max = 0;
    int negative = 0;
    double sum = 0;
    assignment9(help, count, max, negative, sum);

}//end main

//adds user input to array until 0 is entered; it then calls other methods
public static void assignment9(ArrayList<Double> help, int count, double max, int negative, double sum)
{
    DecimalFormat fmt = new DecimalFormat("#.##");
    double input;

    Scanner scan = new Scanner(System.in);

    input = scan.nextInt();

    if (input == 0)
    {
        double[] numbers = new double[count];
        for(int i = 0; i < numbers.length; i++)
        {
            numbers[i] = help.get(i);
        }
        findMax(numbers, count-1, max);
        countNegative(numbers, count-1, negative);
        computeSumPositive(numbers, count-1, sum);

    }else{
            help.add(input);
            count++;
            assignment9(help, count, max, negative, sum);
    }//end if
    System.out.println("The maximum number is " + fmt.format(max));
    System.out.println("The total number of negative numbers is " + negative);
    System.out.println("The sum of positive numbers is " + fmt.format(sum));
    System.exit(0);

}//end assignment9

//compares elements of array to find the max until count = -1
public static double findMax(double[] numbers, int count, double max)
{

    if (count == -1)
    {
        return max;
    }else if(numbers[count] > max){
        max = numbers[count];
        count--;
        findMax(numbers, count, max);
    }//end if
    return max;

}//end findMax

public static int countNegative(double[] numbers, int count, int negative)
{

    if(count == -1)
    {
        return negative;
    }else if(numbers[count] < 0){
        negative++;
        count--;
        countNegative(numbers, count, negative);
    }
    return negative;
}//end countNegative

public static double computeSumPositive(double[] numbers, int count, double sum)
{
     if(count == -1)
     {
         return sum;
     }else{
         sum = sum + numbers[count];
         count--;
         computeSumPositive(numbers, count, sum);
         return sum;
     }
}//end computeSumPositive

}//end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:19:01.877

当您打印出行中的值时

```
System.out.println("The maximum number is " + fmt.format(max)); 
```

您永远不会将`max`变量分配给`assignment9`方法中的任何内容。当然，你可以打电话`findMax`，但`max = findMax(...)`在此之前你从来没有说过。既然你`main`通过传入 0 来调用它，那就是它打印出来的东西。

您的 max 函数中存在某种其他错误，但这就是它始终打印 0 的原因。

# c++ - C ++将指针数组移动到结构

> ID：15713757
> 
> 赞同：0
> 
> 时间：2013-03-30T01:04:00.110
> 
> 标签：c++, arrays, pointers

**现在功能OK了，主题实现了。谢谢大家。**

我在类中有以下非常简单的结构：

```
struct Data
{
    string name1;
    string name2;
    string name3;
    string name4;
} 
```

我初始化：

```
Data **data;
data=new Data*[size]; 
```

问题是*将所有指向数组元素的指针从位置 N 移到 right*，这样我就可以在 N 中插入一个新元素。我尝试了各种方法，但一切都以指向的元素数组结束同一个对象...

我有类似的功能，它删除元素并将所有内容向左移动。它工作正常：

```
int Del_element(/*some parameters*/)
{
    found=Bin_search(Name1,Name2); //binary search. Returns index of element.
    if (found<0) return 0; //element wasn't found

    delete data[found]; //delete pointer
    for (int i=found; i<index-1; i++) //shift all pointers to the left
    {
        data[i]=data[i+1];
    }
    index--;
    return 1;
} 
```

我实现的功能如下：

```
void re_size() 
{
int size_old=size;
size*=2;
Data **tmp_array;

tmp_array = new Data*[size];

copy(data, data+size_old, tmp_array);
delete []data;
data=new Data*[size];
data=tmp_array;
}

 int Add( const string & Name1,const string & Name2,const string & Name3, const string & Name4 )
    {
        int found=Bin_search(Name1,Name2); //binary search. Return positive number if found, or negative as the position to insert new element;

  if (found>0)  //if element already exists
  {
      return 0;
  }

if ((index+1)==size) {re_size();}

data[index]= new Record(Name1,Name2,Name3,Name4);
if (index>0)
{
  for (int i=index; i>-found; i--)
  {
   *data[i]=*data[i-1];
  } 

  data[-found]->name1=Name1;
  data[-found]->name2=Name1;
  data[-found]->name3=Name1;
  data[-found]->name4=Name1;
}

 index++; 
 return 1;
} 
```

基本上，我在数组末尾初始化新元素，然后将元素从数组末尾复制到找到的位置并将值复制到数据 [-found]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:15:39.163

你没有显示非工作代码，所以我不得不猜测你做错了什么。

我敢打赌你将元素 0 转换为 1、1 转换为 2、2 转换为 3 等等。但是当你将 1 转换为 2 时，它包含原来在 0 中的内容。然后当你将 2 转换为 3 时，它包含你的内容只是从 1 转移，原来是 0。依此类推。

您需要从最后开始进行转换：N-1 到 N，N-2 到 N-1，N-3 到 N-2，等等。

您要转移的东西是指针这一事实完全无关紧要，对于数字数组，您也会遇到同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:36:49.457

首先，`Del_element`函数在这里为新的传入指针删除一个元素。如果是真的，那么它就不起作用，因为你只是`data[first]`用新的元素（）占据了释放的元素（ `data[first+1]`）。

但是，如果你应该确定你的意思是`N`等于`size`并且新的传入指针必须是大小的地方，那没关系。

但是，您必须显示真实且更完整的代码。

好的，这样更好。首先，我认为在具有返回类型`false`的函数中返回并不是那么好。`int`其次，我觉得这里有很大的问题`for (int i=index-1; i>-found; i--)`。为什么`i>-found`？

# sql - 如何编写这个复杂的 mysql 查询？

> ID：15713758
> 
> 赞同：1
> 
> 时间：2013-03-30T01:04:03.793
> 
> 标签：sql, select

我有一个表 T，它有两个列 A 和 B。

然后我有一大组数据，称为 ARRAY。ARRAY 包含可能出现在 A 中的数据列表。
我想要以下内容：
1\. 按 B DESC 顺序选择前 10 行，这样 row.A 在 ARRAY 中；将结果记录为 R；
2\. 从 R 中取行，使得 row.B > 2/3*max_of_B_in_all_rows

我可以在一份声明中这样做吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:54:14.950

这是一个查询中最简单的解决方案，只有一个连接：

```
SELECT *, MAX(B) AS MAXB
FROM T
INNER JOIN ARRAY
USING(A)
ORDER BY B DESC
HAVING B > MAXB * 2 / 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:18:44.573

这是一个使用[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)来存储 B 的最大值的选项：

```
SELECT A, B
FROM (
  SELECT A, B, @maxB:=IF(@maxB>B,@maxB,B) MaxB
  FROM TableT
      JOIN (SELECT @maxB:=0) T2
  WHERE A IN (YourList)
  ORDER BY B DESC
  LIMIT 10
) T
WHERE B >= (2/3)*MaxB 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/e962c/2)

# java - jar 文件中的清单/类路径未成功在 CLASSPATH 上为 log4j2.xml 设置目录

> ID：15713760
> 
> 赞同：0
> 
> 时间：2013-03-30T01:04:26.960
> 
> 标签：java, ant, log4j, manifest, log4j2

我已经成功编写了一个小型 Java 程序，该程序在从 NetBeans 运行时查找并使用我的 log4j2.xml 文件。我现在正在尝试创建一个包含我的其他 jar 的 jar 文件，所以我可以在命令行上运行它。我用 Ant 构建了 jar 文件，并在我的 jar 目标中使用了“Manifest”。

构建后，我执行“java -jar BimbleParser.jar”，找到了我放在 Manifest 'Class-Path' 中的所有 jars 文件，程序运行正常。除了它不记录每个 log4j2.xml 文件（到 .log 文件）。当我设置强制错误时，我在命令行中记录了一些“错误”，我相信 log4j2 的默认行为，表明它没有找到 log4j2.xml 文件。

我很肯定包含 log4j2.xml 的目录没有在 CLASSPATH 中找到，正如我的构建文件的“jar”目标中的清单中设置的那样。

这是其中包含清单的 ant 任务：

```
 <target name="jar" description="Create jar file" depends="junit">
    <jar destfile="${project.name}.jar" duplicate="add" basedir="${classes_dir}"       filesetmanifest="skip" >
        <manifest>
            <attribute name="Build-Date" value="${TODAY} ${TSTAMP}"/>
            <attribute name="Main-Class" value="com.mumble.parsers.Bumble.BumbleParser"/>
            <attribute name="Class-Path" value="./CCom/config ./CCom/lib/CComCommons.jar ./CCom/lib/commons-configuration.jar ./CCom/lib/commons-lang.jar ./CCom/lib/log4j-api.jar ./CCom/lib/log4j-core.jar ./CCom/lib/commons-logging.jar ./CCom/lib/commons.lang3.jar"/>
        </manifest>
    </jar>
</target> 
```

log4j2.xml 位于第一个类路径条目中，作为“./CCom/config”，我的程序找到并使用了所有其他 jar 文件。我究竟做错了什么？

在这个“java -jar BimbleParser.jar”场景中，也许有其他解决方案可以通过类路径使 log4j2.xml 文件可见？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:50:28.403

我认为自动配置中仍然存在错误。作为一种解决方法，请尝试使用此方法（更正 log2j.xml 文件的路径后）：

```
URI configuration = MyClass.class.getResource("/<path>/log4j2.xml").toURI();
Configurator.initialize("config", null, configuration); 
```

基于示例：[https ://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk/core/src/test/java/org/apache/logging/log4j/FormatterLoggerManualExample.java](https://svn.apache.org/repos/asf/logging/log4j/log4j2/trunk/core/src/test/java/org/apache/logging/log4j/FormatterLoggerManualExample.java)

# content-management-system - CQ5 CRX JCR - 节点迭代 - 如何重命名节点？

> ID：15713768
> 
> 赞同：1
> 
> 时间：2013-03-30T01:05:53.557
> 
> 标签：content-management-system, aem, jcr, sling

使用 Apache Sling 和 CRX/CQ5 和 JCR 等时...

是否可以遍历 JCR 中的 CQ5 页面节点并重命名页面。

我目前有一个脚本，可以更改特定路径的所有子页面中的属性。

我正在拼命寻找一种方法来使用 NodeIterator 和 Node 类在特定路径处重命名每个页面（不仅是标题和任意属性，而且是形成路径的名称）。

例子：

```
-content/xproject/shared/cars/a/abegro-assam
-content/xproject/shared/cars/m/motofuel-iss 
```

我想做一些相当于：

```
while(cars.hasNext()) {
   Node node = cars.nextNode();

   //this is the functionality I want somehow...
   node.setName("some-other-name");

   //similar to how we would set JCR properties
   node.setProperty("someProperty", "someValue");
} 
```

请告知我可以在 CQ5/Sling/Apache/CRX 堆栈中找到此功能的地方，因为这将非常有帮助。

我知道我可能能够适应该节点以外的其他一些类 - 但我非常不确定如何继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T11:27:00.403

要重命名 JCR 节点，请将它们移动到不同的路径，您可以使用需要调用 save() 的 Session.move(...) 或立即起作用的 Workspace.move(...)。

我不确定这些是否以及如何干扰当前的 NodeIterator - 如果有问题，您可以使用迭代将要重命名的节点的路径添加到列表，然后在该列表之外迭代NodeIterator 重命名节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T12:51:07.050

```
void rename(Node node, String newName) throws RepositoryException 
{
    node.getSession().move(node.getPath(), node.getParent().getPath() + "/" + newName);
    // Don't forget - not necessarily here at this place:
    // node.getSession().save();
} 
```

# linux - Bash 脚本 - 字符串比较似乎不起作用

> ID：15713774
> 
> 赞同：0
> 
> 时间：2013-03-30T01:06:31.500
> 
> 标签：linux, bash, shell, scripting

我有一个输入文件，其内容格式如下：

```
ABCD     XYZAB   1234
PQRSTUV  STU     SKIP
LMN      OPRQM   8966
RSTUV    OPM     SKIP
TUV      ZXU     SKIP 
```

我想解析这个文件并将其输出到一个新文件，这样，最后一列为“SKIP”的行不会出现在最终输出文件中，如下所示：

```
ABCD     XYZAB   1234
LMN      OPRQM   8966 
```

为了处理上述内容，我编写了以下 shell 脚本：

```
while read -r col1 col2 col3
do
    if [ "$col3" != "SKIP" ]
    then
    printf "%s %s %s\n" "$col1" "$col2" "$col3";
    fi
done <input.txt > output.txt 
```

但是上面的脚本似乎不起作用，我的输出文件仍然继续包含所有行，最后一列中有“SKIP”。我不明白为什么“条件”失败了？

谢谢，vj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:53:19.940

Ok it seems that though the script is correct, the input file being edited was in Windows environment. As a result the line endings were "\r" and not "\n". So, there was a mismatch there. So, the conditional check failed as well. Once I converted the line endings to UNIX format, the output was obtained as desired. Thanks for everyone's help.

Vj

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:25:01.977

VJ - 我看不出你的剧本有什么问题。我粘贴了您的代码和输入，结果正是您想要的。请参阅我的笔记本电脑“ttt”的以下证明：

```
[ttt:/m/temp/stack] 猫 vjvj

    同时读取 -r col1 col2 col3
    做
        如果 [ "$col3" != "SKIP" ]
        然后
        printf "%s %s %s\n" "$col1" "$col2" "$col3";
        菲
    完成输出.txt

[ttt:/m/temp/stack] 猫输入.txt
ABCD XYZAB 1234
PQRSTUV STU 跳过
LMN OPRQM 8966
RSTUV OPM 跳过
TUV ZXU SKIP
[ttt:/m/temp/stack] 猫输出.txt
ABCD XYZAB 1234
LMN OPRQM 8966
[ttt:/m/temp/stack] 猫 /etc/lsb-release

    DISTRIB_ID=LinuxMint
    DISTRIB_RELEASE=13
    DISTRIB_CODENAME=玛雅
    DISTRIB_DESCRIPTION="Linux Mint 13 玛雅"

[ttt:/m/temp/stack]

```

# c# - 拆分字符串需要数组声明

> ID：15713781
> 
> 赞同：-2
> 
> 时间：2013-03-30T01:07:25.843
> 
> 标签：c#

`string myStr = "part1#part2";`

要拆分这个简单的字符串 Split() 方法，需要传递带有参数的数组。真的吗？为什么我不能只指定`myStr.Split('#');`如果我不需要他们为什么希望我声明 char 数组。任何人都可以解释我的逻辑或我的误解吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T01:09:17.357

你可以。[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)接受一个`param`参数，它允许可变数量的参数。

以下按预期工作

```
var text = "a,a,a";
var parts = text.Split(','); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:48:23.263

其他方式，

* * *

更多关于棕狐的信息

```
string data = "THE1QUICK1BROWN1FOX";

return data.Split(new string[] { "1" }, StringSplitOptions.None); 
```

更多来自[http://stackoverflow.com](http://stackoverflow.com)

```
var str = "google.com 420 AM 3 May 12";
var domain = str.Split(' ')[0];           // google.com
var tld = domain.Substring(domain.IndexOf('.')) // .com 
```

参考：http: [//msdn.microsoft.com/en-us/library/b873y76a.aspx](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)

我迟到了，但是，

## 一个简单的导师

* * *

Split() 方法的最简单语法接受一个字符数组作为它的唯一参数，列出用于确定字符串拆分位置的字符。它返回一个字符串数组，数组的每个元素对应于指定分隔符之间的值。下面的行来自清单中的第一个拆分操作：

```
 string[] year = commaDelimited.Split(new char[] {','}); 
```

以类似的方式，可以使用 Join() 方法将数组的元素组合成定界字符串。Join() 方法的最简单重载接受两个参数：一个字符串，用于分隔每个数组元素，以及要组合的元素数组。Join() 方法是静态的，需要 String 类型标识符而不是字符串实例来实现命令。清单中的以下行创建了一个字符串，其中包含按顺序的所有年份元素，用冒号分隔：

```
 string colonDelimeted = String.Join(":", year); 
```

**重载**

* * *

这些是这些方法的简单实现，可能是最有可能使用的。现在让我们看一下它们的几个重载，看看如何实现更专业的行为。

Split() 方法有一个带有第二个参数的重载，指定要实现的分隔数。下一行将 commaDelimited 字符串分成三个数组元素：

```
 string[] quarter = commaDelimited.Split(new Char[] {','}, 3); 
```

乍一看，可能会认为这三个数组元素可能是 Jan、Feb 和 Mar，但事实并非如此。第一个数组元素是 Jan，第二个是 Feb，最后一个是字符串的其余部分。为了自己看，这里是每个数组元素用空格分隔的输出字符串：

```
Jan Feb Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec 
```

The Join() method has an overload that allows you to extract a subset of an array. The first two parameters are the same as previously described, and the third and fourth parameters specify the position in the array to begin reading and the number of elements to read, respectively. The following line from the listing creates a string with a forward slash between the sixth through eighth elements of the year array:

```
 string thirdQuarter = String.Join("/", year, 6, 3); 
```

# javascript - 不明白这是如何在 Jquery 中调用 fadeIn 方法

> ID：15713783
> 
> 赞同：5
> 
> 时间：2013-03-30T01:07:30.747
> 
> 标签：javascript, jquery

我正在使用的插件中有一行我试图理解：

```
$self.hide().attr("src", $self.data(settings.data_attribute))[settings.effect](settings.effect_speed); 
```

self 是一个 jquery 对象，在这段代码中是一个 img dom 元素，它隐藏它，然后将此 img 对象的 src 属性设置为 html5 数据属性。但现在它访问由.attr（返回的jquery对象中的一个属性，在这个中是“fadeIn”。但我不明白，jquery对象是否有内置的效果属性函数内置到jquery对象中？我很困惑这如何转化为调用 .fadeIn(900)。我在 jquery 网站上的任何地方都找不到此文档。如果有人能对此有所了解，谢谢。

抱歉，这是完整的代码，它来自 mika tuupola 的延迟加载 jquery 插件：

```
(function($, window, document, undefined) {
var $window = $jq191(window);

$jq191.fn.lazyload = function(options) {
    var elements = this;
    var $container;
    var settings = {
        threshold       : 0,
        failure_limit   : 0,
        event           : "scroll",
        effect          : "show",
        container       : window,
        data_attribute  : "original",
        skip_invisible  : true,
        appear          : null,
        load            : null
    };

    function update() {
        var counter = 0;

        elements.each(function() {
            var $this = $jq191(this);
            if (settings.skip_invisible && !$this.is(":visible")) {
                return;
            }
            if ($jq191.abovethetop(this, settings) ||
                $jq191.leftofbegin(this, settings)) {
                    /* Nothing. */
            } else if (!$jq191.belowthefold(this, settings) &&
                !$jq191.rightoffold(this, settings)) {
                    $this.trigger("appear");
                    /* if we found an image we'll load, reset the counter */
                    counter = 0;
            } else {
                if (++counter > settings.failure_limit) {
                    return false;
                }
            }
        });

    }

    if(options) {
        /* Maintain BC for a couple of versions. */
        if (undefined !== options.failurelimit) {
            options.failure_limit = options.failurelimit; 
            delete options.failurelimit;
        }
        if (undefined !== options.effectspeed) {
            options.effect_speed = options.effectspeed; 
            delete options.effectspeed;
        }

        $jq191.extend(settings, options);
    }

    /* Cache container as jQuery as object. */
    $container = (settings.container === undefined ||
                  settings.container === window) ? $window : $jq191(settings.container);

    /* Fire one scroll event per scroll. Not one scroll event per image. */
    if (0 === settings.event.indexOf("scroll")) {
        $container.bind(settings.event, function(event) {
            return update();
        });
    }

    this.each(function() {
        var self = this;
        var $self = $jq191(self);

        self.loaded = false;

        /* When appear is triggered load original image. */
        $self.one("appear", function() {
            if (!this.loaded) {
                if (settings.appear) {
                    var elements_left = elements.length;
                    settings.appear.call(self, elements_left, settings);
                }
                $jq191("<img />")
                    .bind("load", function() {
                        $self
                            .hide()
                            .attr("src", $self.data(settings.data_attribute))
                            [settings.effect](settings.effect_speed);
                        self.loaded = true;

                        /* Remove image from array so it is not looped next time. */
                        var temp = $jq191.grep(elements, function(element) {
                            return !element.loaded;
                        });
                        elements = $jq191(temp);

                        if (settings.load) {
                            var elements_left = elements.length;
                            settings.load.call(self, elements_left, settings);
                        }
                    })
                    .attr("src", $self.data(settings.data_attribute));
            }
        });

        /* When wanted event is triggered load original image */
        /* by triggering appear.                              */
        if (0 !== settings.event.indexOf("scroll")) {
            $self.bind(settings.event, function(event) {
                if (!self.loaded) {
                    $self.trigger("appear");
                }
            });
        }
    });

    /* Check if something appears when window is resized. */
    $window.bind("resize", function(event) {
        update();
    });

    /* With IOS5 force loading images when navigating with back button. */
    /* Non optimal workaround. */
    if ((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion)) {
        $window.bind("pageshow", function(event) {
            if (event.originalEvent.persisted) {
                elements.each(function() {
                    $jq191(this).trigger("appear");
                });
            }
        });
    }

    /* Force initial check if images should appear. */
    $jq191(window).load(function() {
        update();
    });

    return this;
};

/* Convenience methods in jQuery namespace.           */
/* Use as  $jq191.belowthefold(element, {threshold : 100, container : window}) */

$jq191.belowthefold = function(element, settings) {
    var fold;

    if (settings.container === undefined || settings.container === window) {
        fold = $window.height() + $window.scrollTop();
    } else {
        fold = $jq191(settings.container).offset().top + $jq191(settings.container).height();
    }

    return fold <= $jq191(element).offset().top - settings.threshold;
};

$jq191.rightoffold = function(element, settings) {
    var fold;

    if (settings.container === undefined || settings.container === window) {
        fold = $window.width() + $window.scrollLeft();
    } else {
        fold = $jq191(settings.container).offset().left + $jq191(settings.container).width();
    }

    return fold <= $jq191(element).offset().left - settings.threshold;
};

$jq191.abovethetop = function(element, settings) {
    var fold;

    if (settings.container === undefined || settings.container === window) {
        fold = $window.scrollTop();
    } else {
        fold = $jq191(settings.container).offset().top;
    }

    return fold >= $jq191(element).offset().top + settings.threshold  + $jq191(element).height();
};

$jq191.leftofbegin = function(element, settings) {
    var fold;

    if (settings.container === undefined || settings.container === window) {
        fold = $window.scrollLeft();
    } else {
        fold = $jq191(settings.container).offset().left;
    }

    return fold >= $jq191(element).offset().left + settings.threshold + $jq191(element).width();
};

$jq191.inviewport = function(element, settings) {
     return !$jq191.rightoffold(element, settings) && !$jq191.leftofbegin(element, settings) &&
            !$jq191.belowthefold(element, settings) && !$jq191.abovethetop(element, settings);
 };

/* Custom selectors for your convenience.   */
/* Use as $jq191("img:below-the-fold").something() or */
/* $jq191("img").filter(":below-the-fold").something() which is faster */

$jq191.extend($jq191.expr[':'], {
    "below-the-fold" : function(a) { return $jq191.belowthefold(a, {threshold : 0}); },
    "above-the-top"  : function(a) { return !$jq191.belowthefold(a, {threshold : 0}); },
    "right-of-screen": function(a) { return $jq191.rightoffold(a, {threshold : 0}); },
    "left-of-screen" : function(a) { return !$jq191.rightoffold(a, {threshold : 0}); },
    "in-viewport"    : function(a) { return $jq191.inviewport(a, {threshold : 0}); },
    /* Maintain BC for couple of versions. */
    "above-the-fold" : function(a) { return !$jq191.belowthefold(a, {threshold : 0}); },
    "right-of-fold"  : function(a) { return $jq191.rightoffold(a, {threshold : 0}); },
    "left-of-fold"   : function(a) { return !$jq191.rightoffold(a, {threshold : 0}); }
}); 
```

})($jq191, 窗口, 文档);

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T01:11:24.157

请记住，jQuery 只是一个对象。这意味着您可以使用`.`符号调用的所有方法，都可以使用符号调用`[]`。因此，这两行在功能上是相同的：

```
$("#foo").fadeIn(2000);
$("#foo")['fadeIn'](2000); 
```

其他项目，`settings.effect`并且`settings.effect_speed`可能通过带有插件选项的对象文字输入插件。

```
var settings = {
    effect: 'fadeIn',
    effect_speed: 2000
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:14:34.157

这就是为什么这有效。

首先，jQuery 的`.hide()`方法和它的`.attr(name,value)`方法都以这种 jQuery 方法的通常方式返回`this`，以允许链接。但这也意味着我们可以在不影响问题的情况下*删除*这些调用：

```
$self[settings.effect](settings.effect_speed); 
```

现在它更简单了。`settings.effect`是字符串`"fadeIn"`，对吗？

那么代码是一样的：

```
$self["fadeIn"](settings.effect_speed); 
```

In JavaScript, `object["methodName"]` means exactly the same thing as `object.methodName`. So the code is really the same as:

```
$self.fadeIn(settings.effect_speed); 
```

and that's why it calls the `fadeIn` method.

# encryption - Python - 以 16 行输出

> ID：15713791
> 
> 赞同：0
> 
> 时间：2013-03-30T01:09:08.567
> 
> 标签：encryption, python-3.x, rc4-cipher

有什么办法可以将我的输出放在 16 行中？这些行也需要有 16 列垂直排列。我想在不导入任何东西的情况下做到这一点。

```
def main():

    # asks the user to input key
    key = input("Enter a key [6-15 characters]: ")

    s = []

    # append all items in list
    for i in range(256):

        s.append(i)

    #Runs the key through a loop to give RC4 encryption and assigns j to 0
    j = 0
    for i in range(256):
        j = ((j+s[i]+ord(key[i%len(key)]))%256)
        #Swap values of s[i] and s[j]
        s[i],s[j] = s[j],s[i]
    print(s)

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:29:17.787

你想要 16 行，每行 16 个字符吗？这是我的做法（以十六进制打印）：

```
s = range(256)

for i in xrange(256):
    j = ((j+s[i]+ord(key[i%len(key)]))%256)
    s[i],s[j] = s[j],s[i]

for i in xrange(0, 256, 16):
    print ''.join('%02x' % c for c in s[i:i+16]) 
```

对于随机生成的 256 字节序列（[0,255] 范围内的整数），我得到

```
f7a98bd77f4accd553f1b86f582d678e
265e38af7c6c4e09af0a6132bec36fb5
47527d8acc69c4f3f099d0fa34fdb527
7a170e102c794692356ca0e441c787e9
98dfb550b316a3952e67983489f4f1f4
8f8db56a58e94b6beae95fc5f394295a
83ed9c72b6c24dbf15ad28506d505eed
e2359cdeed6c1526b2c3d11b14074b08
332e37fcd686b50d6de15df4feb8c404
de5c0ae40eaf755f209300ad5143397f
77b626dab0c99e9658a4eb1d5f028a40
bb5ed8d40b6dc925954990aa84bed906
5ed527fab36762e8c65069a2f4a68888
0a114e0019e3b2174265d77a9e959a06
52429fc7106db54098a6c8a1219625aa
e59b98fc6c38a115fca2e0d7faf3376f 
```

您可以调整最后一行以满足您的需要。例如，要打印十进制整数，请使用

```
for i in xrange(0, 256, 16):
    print ''.join('%4d' % c for c in s[i:i+16]) 
```

要得到

```
 92 142 194 158 114  83 120  69 155 118 191  72  33  53 216 219
  29  97  30 213 236 177 170  96 101  45 126   6  48  43 185   2
 139 123  47  19 147 191 222 127 254  26 248 183 192 232 190 226
 110 125 222 252 212 235 246 120 107 195  52 251 169 220 157 182
 169  47 151 122 131  73 174  97 175 202 201 225  66 179  34 160
 105  62 117 227  80 217  25  17 120  51  56 209 238 249 121  21
 152 100 113 190 209 243 165  44 118  85 195 236 176 105 149 225
 146 225  69 225  89  12 176 194  88 223 141 185 107 216 157 198
  16  57 132  10   3 155 130 227  30  10  11  31   7 212 244  61
  50 212  21  98 202 244  62 180  23   5 148   3  91  53 226 147
 189 189 222 124 179 194 147  43  46  94 216  62  10  44 149  16
 173 120  78  75 123 113  61   4 106 100  96 117 243 181 118 148
 223 110  83 117 212  86  83 161 141  48 193  48 255 196  20  10
 169 144  64 160 239 136  34 145 104 101  53  58   5 178  20 141
  46  40 254 153 166 108 172 215 184 222  55 127 116 210  49 216
 202 120  34 208  22  57  98 179 238 153 173 195 101 229 113 220 
```

# java - 空检查java后发生NullPointerException

> ID：15713792
> 
> 赞同：0
> 
> 时间：2013-03-30T01:09:11.770
> 
> 标签：java, null, nullpointerexception

我有这个 if 语句

```
if((check1==null||!check1.isSolid())&&(check2==null)||!check2.isSolid()) 
```

它抛出一个空指针异常，因为 check1 或 check2 为空，但我不明白它为什么这样做，因为我在访问对象之前检查空条件，如果对象为空，为什么 java 会打扰检查isSolid 因为它已经是真的了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T01:13:38.573

你把括号弄乱了。Java 会将您的语句组合在一起，如下所示：

```
((check1 == null || !check1.isSolid()) && check2 == null) || !check2.isSolid() 
```

如果`check1`is`null`和`check2`, is `null`，第一条语句的计算结果为`true`。当您继续执行第二个语句时会出现问题，因为is`check2`将通过.`null``check2.isSolid()``NullPointerException`

将括号更改为

```
(check1 == null || !check1.isSolid()) && (check2 == null || !check2.isSolid()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:14:13.833

你把括号弄混了。尝试：

```
if((check1==null||!check1.isSolid())&&(check2==null||!check2.isSolid())) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T01:20:32.157

试试这个：

```
boolean check1_result = (check1 == null) ? true : !check1.isSolid();
boolean check2_result = (check2 == null) ? true : !check2.isSolid();

if (check1_result && check2_result)
// do work... 
```

# concurrency - 如何接受带有 python 服务器的客户端，同时使用 Tkinter 绘制图像？

> ID：15713798
> 
> 赞同：-1
> 
> 时间：2013-03-30T01:10:11.953
> 
> 标签：concurrency, tkinter, python-server-pages

我正在尝试编写一个 Python 服务器来显示我在 Pandora 上收听的歌曲的名称。每当歌曲更改时，我的 Pandora 程序都会将有关新歌曲名称的信息发送到我的 Python 服务器。但是，我希望 Python 用 Tkinter 显示该歌曲名称，这意味着我必须调用一个主循环。但是如果我调用一个主循环，我就不能回去等待来自我的潘多拉程序的客户端调用。换句话说，我的服务器程序需要在等待客户端的同时循环显示图像。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:31:11.717

为了实现并发，您必须在 python 中使用线程并使用多个线程。您还可以使用 Twisted 等异步框架来实现您的目标[http://twistedmatrix.com/trac/](http://twistedmatrix.com/trac/) 有关同步和异步编程的更多信息[http://krondo.com/?p=1209](http://krondo.com/?p=1209)

# ios - 使用 resizableImageWithCapInsets 无法正确调整图像大小

> ID：15713799
> 
> 赞同：1
> 
> 时间：2013-03-30T01:10:14.120
> 
> 标签：ios, ios5, uibutton, uiimage, image-resizing

我在使用/理解`resizableImageWithCapInsets`

我设置了一个按钮，如下所示：

```
facebookLoginButton = [[UIButton alloc] initWithFrame:CGRectMake(10, 20, 300,50)];
facebookLoginButton.autoresizingMask = UIViewAutoresizingFlexibleWidth;

UIImage *facebookButton = [[UIImage imageNamed:@"FacebookLogin"]
                           resizableImageWithCapInsets:UIEdgeInsetsMake(20,90,20,56)];
[facebookLoginButton setBackgroundImage:facebookButton forState:UIControlStateNormal];

[facebookLoginButton setTitleColor:[UIColor blueColor] forState:UIControlStateNormal];
[facebookLoginButton setTitle:NSLocalizedString(@"FacebookLoginButton", "Facebook Login Button") forState:UIControlStateNormal];
[facebookLoginButton setTitleShadowColor:[UIColor colorWithRed:0 green:0 blue:0 alpha:.35] forState:UIControlStateNormal];
[facebookLoginButton addTarget:self action:@selector(facebookLoginButton:) forControlEvents:UIControlEventTouchUpInside]; 
```

如您所见，按钮视图的框架为 300x50 像素。我已经为视网膜创建了一个图像（稍后将按比例缩小）。

该图像是在 PS 中创建的 png，大小为 144x100 像素。这是框架高度（对于 uibutton）和 Facebook F 所需宽度的两倍，并带有空间。这个想法是让 F 在左侧保持静止，而可拉伸部分如下所示。

![在此处输入图像描述](../Images/20eaa05773392d73724eb9b0cb4d4784.png)

如果有帮助，这是图像本身；

![在此处输入图像描述](../Images/2290bdc8df45a847bcaa22011bcb55a5.png)

这是目前的结果：

![在此处输入图像描述](../Images/8abdc595da209e187c1f969eb32bc713.png)

我正在尝试找出要输入的正确插图。我已经搜索了大量关于此的教程，但没有一个解释足以让我了解插图的实际工作原理。如果有人可以解释这一点或链接到有关如何计算它们的教程，那就更好了。

我目前已将顶部和底部设置为 0，因为理论上它们不需要重复，只是静态左侧大于静态右侧。右边的插图仅适用于圆形边框，中间部分需要重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:33:20.250

如果您使用视网膜图像，请确保您使用`@2x`.
另请注意，您需要以单位（而不是像素）指定意图。

```
UIImage *facebookButton = [[UIImage imageNamed:@"FacebookLogin"]
                         resizableImageWithCapInsets:UIEdgeInsetsMake(0,40,0,10)]; 
```

# apache - Nginx/Apache 服务静态内容代理

> ID：15713807
> 
> 赞同：0
> 
> 时间：2013-03-30T01:11:31.567
> 
> 标签：apache, static, nginx

我需要帮助来改进 nginx 模式匹配正则表达式。

```
# serve static files from nginx
location ~* ^.+.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|pdf|ppt|txt|tar|wav|bmp|rtf|js|mp3|avi|mov|flv|swf)$ {
root c:/websites/www/html;
expires 1y;
}

# pass requests for dynamic content to apache listening on 8080
location / {
proxy_pass http://127.0.0.1:8080;
proxy_redirect off;
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
client_max_body_size 128m;
client_body_buffer_size 256k;
proxy_connect_timeout 60;
proxy_send_timeout 60;
proxy_read_timeout 60;
proxy_buffer_size 4k;
proxy_buffers 32 256k;
proxy_busy_buffers_size 512k;
proxy_temp_file_write_size 512k;
} 
```

Apache 运行在 8080 端口，nginx 运行在 80 端口。Apache 唯一用于处理的是 HTML、PHP 和基本的脚本处理。nginx 服务于其他一切。

由于我不是正则表达式的专家并且对 nginx 很陌生，我怎样才能使我的模式匹配更友好？有没有办法定义我希望 Apache 处理和服务的脚本（html，php）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:49:38.697

将 php/html 请求传递给 apache，然后让 nginx 处理其余部分更容易：

```
# serve all remaining static file requests from nginx
location / {
  root c:/websites/www/html;
  expires 1y;
}

# pass any request uri ending with .php or .html, .htm to apache
location ~* \.(php|html|htm)$ {
  # proxy to apache
} 
```

# java - Creating two classes: Main class and a Processing class

> ID：15713808
> 
> 赞同：0
> 
> 时间：2013-03-30T01:11:47.370
> 
> 标签：java, android, google-api

Suppose I have *two classes*, one is the *main* **class A** and the other is the class that helps in *processing results for A*, **class B**.

Suppose in *class A* I take *user input* **a1**, and **a2**. Then I have to send these inputs to class B for processing, and with these inputs, B *generates a result* **b1** and **b2** *(which are not related to a1 and a2 independently, but a1 and a2 together generate these two results)*. And since class A being the main class, has to access b1 and b2 to display the results.

**我该如何做到这一点？**

我目前正在开发**一个**使用. 我真的很想将处理部分移到另一个班级，但我遇到了问题。抱歉，我的 Java 基础不是那么好。有人可以帮忙吗？`Distance-Matrix API``MainActivity.java`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:49:15.807

如果`A`和`B`是普通的 Java 类，那么我建议你做一个简单的`MyResults`类。

**示例**：

```
class MyResults {
final String b1;
final String b2;
public MyResults(final String b1, final String b2) {
    this.b1 = b1;
    this.b2 = b2;
}
public String getB1() { return b1; }
public String getB2() { return b2; } 
```

类的响应`B`应该是返回一个`MyResults`类。

* * *

Now, if classes `A` and `B` happen to be Android `Activity` classes (i.e. "`class A extends Activity`") then throw all this out the window and pass results through the `Extras bundle` to be received in `A.onActivityResult()`. Super easy and standard to do, but you'll have to look for an example.

# ios - JSON响应编码不回来utf

> ID：15713809
> 
> 赞同：1
> 
> 时间：2013-03-30T01:11:52.640
> 
> 标签：ios, objective-c, json, nsjsonserialization

我正在尝试使用来自服务器的 jsonkit 或 nsjsonserialization 解码 json 字符串，但我得到冒号：标记更改为等号和逗号，更改为分号；例如来自服务器：

```
"response": { "status": "OK","message": "","timestamp": "30 Mar 2013 11:33:08", 
"url":"/abc/api/getconfig/dev-game?language=en" }... 
```

但我得到的回应是：

```
JSONDecoder *decodedData = [[JSONDecoder alloc] initWithParseOptions:JKParseOptionStrict];
NSDictionary *parsedList = [decodedData objectWithData:responseData]; 
```

或者：

```
NSError *jsonError = nil;
NSDictionary *parsedList = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&jsonError]; 
```

给我：

```
response =     {
    message = "";
    status = OK;
    timestamp = "30 Mar 2013 11:33:08";
    url = "/abc/api/getconfig/dev-game?language=en";
};
result =     {
    meta =         {
        dateLastModified = "29 Mar 2013 11:59:17";
    }; 
```

这在尝试解析时给我带来了很多问题。我可以：

```
NSSTring *jsonString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 
```

或者将请求 url 放在浏览器或 jsonlint.com 中，我得到正确的格式，但我需要在字典中，因为我需要能够解析它。除非将其放入不同的数据类型会更好，因为我将尝试找到特定的键，即如果我有 column_1、column_2 则获取每个“列”...提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T05:24:03.813

`JSONKit` and `NSJSONSerialization` will parse the JSON string for you and create the `NSDictionary`/`NSArray`/`NSString`/`NSNumber` objects for you. You don't have to parse anything yourself. You're seeing equal signs and such because you're printing a description of the parsed response object (probably using `NSLog`).

# google-chrome - 为客户解决 Chrome 中的“不常用下载”警告

> ID：15713811
> 
> 赞同：5
> 
> 时间：2013-03-30T01:12:09.250
> 
> 标签：google-chrome, malware, vendor

当客户单击我们其中一种产品的下载链接时，他们会看到一条警告，指出该文件不常被下载并且可能存在危险。

这是一个误报。

我们可以在哪里上传文件以被 Chrome/Google 标记为安全，就像我们为所有防病毒供应商所做的那样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T01:17:55.560

你可以[在这里](http://blog.chromium.org/2012/01/all-about-safe-browsing.html)看到谷歌是如何做到的。显然，使用适当的受信任（非自行生成）证书签署您的 EXE 会有所帮助。

# java - 在Java中对自定义的arraylist进行排序

> ID：15713812
> 
> 赞同：1
> 
> 时间：2013-03-30T01:12:09.843
> 
> 标签：java, sorting

根据[这篇文章](https://stackoverflow.com/questions/890254/how-can-i-sort-this-arraylist-the-way-that-i-want)，我尝试定义一个新的比较器来对包含自定义类的数组列表进行排序。我的代码如下：

```
public class mainClass{

    public class match {
    /*I defined a new class to hold some data points*/
        public int x;
        public int y;
        public int score;

        public match(){
            /*initialize values of match if needed*/
        }
    }

    public ArrayList<match> matchList=new ArrayList<match>(); //the arraylist that holds data

    /*code that fills the list with matches*/

    /*the following method is supposed to sort the matchlist. a match with higher score is bigger, and with the same score, a match with bigger x is bigger*/

    public void sortMatchlist(){
    Collections.sort(this.matchList,new Comparator<match>(){
        @Override
        public int compare(match o1, match o2) {
        if(o1.score>o2.score)   return 1;
            else if(o1.score==o2.score){
                if(o1.x>o2.x)   return 1;
                else return 0;
            }
            else    return 0;
        }
    });
} 
```

然而，当我在 main 中调用 sortMatchList() 时，匹配列表似乎没有改变。我不知道出了什么问题。有人可以给我一些建议吗？提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T01:18:09.250

这应该做的工作：

```
if (o1.score == o2.score) {
    return o1.x - o2.x;
} else {
    return o1.score - o2.score;
} 
```

的输出`compare`不必是 1、-1 或 0。它只需是正数、零或负数即可表示顺序。因此，我认为返回`x`or的差异会更清楚`score`。

附带说明一下，根据 Java 中的命名约定，类名应以大写字母开头，因此您的类`match`应命名为`Match`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T01:18:57.127

逻辑应该如下：

```
if(o1.score > o2.score) return 1;
if(o1.score < o2.score) return -1;
// Scores are equal - compare the "x"-s
if(o1.x > o2.x) return 1;
if(o1.x < o2.x) return -1;
return 0; 
```

您当前的代码没有正确打破平局：它`0`在分数相等时返回，但是`o1.x < o2.x`，使项目的排序顺序不正确。

# javascript - iPhone布局中的背景颜色没有改变

> ID：15713816
> 
> 赞同：0
> 
> 时间：2013-03-30T01:13:04.057
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在尝试更改标题的背景颜色....它在桌面布局中工作正常....但在 iphone 布局中不能正常工作....标题颜色在 iphone 中没有改变布局....在下面提供我的代码

[http://jsfiddle.net/mzMjT/embedded/result/](http://jsfiddle.net/mzMjT/embedded/result/)

```
<tr>
            <th style="
    background-color: red;
">First Name</th>
            <th>Last Name</th>
            <th>Job Title</th>
            <th>Favorite Color</th>
            <th>Wars or Trek?</th>
            <th>Porn Name</th>
            <th>Date of Birth</th>
            <th>Dream Vacation City</th>
            <th>GPA</th>
            <th>Arbitrary Data</th>
        </tr>

th {
background: #333;
color: white;
font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:30:18.267

你的样式没有改变移动布局的原因是因为它隐藏了`th`小屏幕上的元素，并使用[CSS 伪元素](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)来代替标题。如果您想在移动版本上设置“标题”的样式，请使用以下内容：

```
td:before {
    background: #333;
    color: white;
    font-weight: bold;
} 
```

不幸的是，要让伪元素组成一个一致的列，需要进行一些调整，但这应该能让你走上正确的轨道！

# php - md5hash 从 php 到 python 但错误

> ID：15713823
> 
> 赞同：3
> 
> 时间：2013-03-30T01:13:54.397
> 
> 标签：php, python, md5

我正在尝试将 md5hash 函数从 php 重写为 python3.2 但它是错误的：

php代码：

```
function MD5Hash($str) {
    $m = md5($str);
    $s = '';
    foreach(explode("\n", trim(chunk_split($m, 2))) as $h) {
        $s .= chr(hexdec($h));
    }
    return $s;
} 
```

和python代码：

```
def md5hash(self, st):
    m   = hashlib.md5(st).hexdigest()
    print(str(st) +" : "+m)
    s   = bytes()
    for i in range(0, len(m), 2):
        s   += chr(int(m[i:min(i+2, len(m))], 16)).encode('utf-8')
    return s 
```

我正在尝试

PHP：

```
echo(base64_encode(MD5Hash(MD5Hash("123123"))));
result: KXJU6b/guPOcaC7aMLub4A== 
```

Python：

```
print(base64.b64encode(self.md5hash(self.md5hash(b"123123"))))
result: fcOsw6VSwo5iHEvCjz98w7JMW09w 
```

我不知道如何解决它，请帮助我:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:33:34.717

使用[binascii.unhexlify](http://docs.python.org/2/library/binascii.html#binascii.unhexlify)：

```
import base64
import hashlib
import binascii

def md5hash(st):
    m = hashlib.md5(st).hexdigest()
    # print(str(st) +" : "+m)
    s = binascii.unhexlify(m)
    return s

print(base64.b64encode(md5hash(md5hash(b"123123")))) 
```

产量

```
KXJU6b/guPOcaC7aMLub4A== 
```

* * *

顺便说一句，正是转换为 unicode 并返回到字节搞砸了您的原始计算。编码`utf-8`将一些 unicode 转换为两个字节。它没有按照您的预期打包字节。（放入一个打印语句来跟踪

```
chr(int(m[i:min(i+2, len(m))], 16)).encode('utf-8') 
```

你会明白我的意思。）虽然`binascii.unhexlify`编码更快更容易，但挽救大部分代码的一种方法是使用字节数组：

```
def md5hash(st):
    m = hashlib.md5(st).hexdigest()
    s = bytearray([int(m[i:min(i+2, len(m))], 16) for i in range(0, len(m), 2)])
    return s 
```

# python - 将三个列表合并到字典，但一切都不合适/未打印

> ID：15713825
> 
> 赞同：0
> 
> 时间：2013-03-30T01:13:58.293
> 
> 标签：python, list, merge, zip, missing-data

我昨天问了这个问题

[将三个列表合并到一个字典中](https://stackoverflow.com/questions/15698427/merging-three-lists-into-into-one-dictionary)

第一个答案是我需要的最正确的

但重新审视我的**我** `automobile.txt file`，我意识到了两件事。

1.  它在列表中有多家汽车制造商，并且每家都只列出了**一家**。

2.  每个数据似乎都是不合适的，但只有少数。

我很近，但很远。

**这是我所拥有的**

请**注意**是否有所不同这是从`.txt`我附加的文件中读取的，并将数据拆分为三个列表。我知道数据在那里。我检查了。

```
from pprint import pprint
import string
import re

data_file = open("Automobil.txt", 'r')
try:
    from itertools import izip_longest
    zip_longest = izip_longest
except ImportError:
    from itertools import zip_longest

def formatting_list(data_file):
    year = []
    maker = []
    model = []
    for line in data_file:
        maker = (' '.join(line.split()[1:2]))
        year =  (' '.join(line.split()[0:1]))
        model = ((' '.join(line.split()[2:])))
    return maker,year,model

def car_data_merge(maker,year,model):
#This was the one suggested to me that I liked

     car_dict_longest = {mk: (yr, md) for mk, yr, md in zip_longest(maker,year,model)}
     pprint(car_dict_longest) 
```

这类似于我尝试过的其他人在另一页上向我展示的内容

```
 car_dict = {maker: (year, model) for maker, model, year in zip(car_maker,car_model,car_year)}
  print(car_dict) 
```

在阅读了它的用途`izip`以及它与`zip`

我认为 izip 将所有内容都保留在原处，而不是临时元组。

`.txt`这是我认为问题所在列表的一小部分：

`year = [1958,1909,1958,1958, 1961, 1961]`

`maker = [Ford,Ford,Lotus,MGA, Amphicar, Corvair]`

`model = [Edsel,Model T,Elite,Twin Cam]`

当运行这是应该发生的事情

```
Ford: {1958 , Edsel}, Ford: {1909, Model T}, Lotus: {1958, Elite}, MGA :{1958, Twin Cam}, Amphicar:{1961}, Corvair:{1961} 
```

相反，我得到类似的东西：

`Ford: {1958 , Edsel}, Lotus: {1958, MGA}, Amphicar:{1961, Corvair}`

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:28:12.510

# 推荐

你可以做一个元组列表的字典。[Defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)是你的朋友。

# 代码

```
from collections import defaultdict

year = [1958, 1909, 1958, 1958, 1961, 1961]
maker = ['Ford', 'Ford', 'Lotus', 'MGA', 'Amphicar', 'Corvair']
model = ['Edsel', 'Model T', 'Elite', 'Twin Cam', '', '']

d = defaultdict(list)
for maker, model, year in zip(maker, model, year):
    d[maker].append((model, year)) 
```

# 结果

```
>>> from collections import defaultdict
>>> 
>>> year = [1958, 1909, 1958, 1958, 1961, 1961]
>>> maker = ['Ford','Ford','Lotus','MGA', 'Amphicar', 'Corvair']
>>> model = ['Edsel', 'Model T', 'Elite', 'Twin Cam', "", ""]
>>> 
>>> d = defaultdict(list)
>>> for maker, model, year in zip(maker, model, year):
...     d[maker].append((model, year))
... 
>>> from pprint import pprint
>>> pprint(dict(d))
{'Amphicar': [('', 1961)],
 'Corvair': [('', 1961)],
 'Ford': [('Edsel', 1958), ('Model T', 1909)],
 'Lotus': [('Elite', 1958)],
 'MGA': [('Twin Cam', 1958)]} 
```

你也可以使用你的`izip_longest`：

```
from itertools import izip_longest

...

d = defaultdict(list)
for maker, model, year in izip_longest(maker, model, year):
    d[maker].append((model, year)) 
```

然后你会得到其他值的 None 。

# jquery - 使用我的复选框在 asp.net 中出现问题以取消隐藏我的下拉菜单

> ID：15713827
> 
> 赞同：0
> 
> 时间：2013-03-30T01:14:15.033
> 
> 标签：jquery, asp.net

好的，所以基本上我要做的是，当您单击我的类复选框时，它会取消隐藏下拉列表，以便您可以从中选择一个名称。这是我正在使用的 html 和 j 查询代码

```
`<tbody>
      @foreach (var a in DropDownList.GetCourses)
               {
                                    <tr>
                                    <td>
                                        <input id="coursecheck" type="checkbox" name="courseId" value="@a.Id"/></td>
                                    <td>@a.CourseName</td>

                                   <td class="hidden" id="teachlist" data-fts-conectionid="@a.Id">@Html.DropDownList("instructorId", DropDownList.GetInstructors)</td>
                             </tr>
                                }<tr>

                            </tr>
                        </tbody> 
```

`这是我一直在尝试使用的jquery，我一直在浏览网站并搜索和尝试不同的东西，但我无法让它工作。

```
`//$('main').on('change', '#coursecheck', function () {
//    var $checkbox = $(this);
//    var $checkboxid = $checkbox.attr("value");
//    var $dropdowndata = $('#teachlist').attr('data-fts-connectionid');
//    var $connect = function() {
//        if ($checkboxid == $dropdowndata && $('#teachlist').hasClass("hidden")) {
//            $('#teachlist').removeClass("hidden");
//        } else if ($checkboxid == $dropdowndata && !$('#teachlist').hasClass("hidden"))
//            $('#teachlist').addClass("hidden");

//    };
//});
//$('#main').on('click', '#coursepopover', function() {
//    if ($('#coursecheck').is('checked')) {
//        $('#teachlist').removeClass("hidden");
//    } else {
//        $('#teachlist').addClass("hidden");
//    }
//});` 
```

我知道这是一件简单的事情，我只是想念它，但我只是看不到它，也许另一双眼睛可以尽管提前感谢您的帮助，如果我弄清楚了，我一定会发布代码修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:32:54.577

一个可能的原因可能是您正在创建多个具有相同 ID 的`<input>`复选框和`<td>`元素，因此当您执行类似`$('#teachlist')`Id 选择器之类的操作时，您可能会遇到麻烦。

可能值得为每个人分配`<input>`一个唯一的 ID，例如：

```
id='@("coursecheck_" + a.Id.ToString())' 
```

每个都有`<td>`一个独特的 ID，例如：

```
id='@("teachlist_" + a.Id.ToString())' 
```

（我的语法可能有点不对劲——抱歉）

我喜欢你这样想这个人：

```
$('#courseinstructors2').on('change', '#coursecheck'.... 
```

但是我认为，如果您为每个人分配`<input>`一个类`<input class='courseCheckBox'`（因为应该可以/预期多个元素具有相同的类）并将您的选择器更改为：

```
$('.courseCheckBox').on('change', <function>.... 
```

所以 $('.courseCheckBox') 匹配你所有的复选框并将它们的`change`事件绑定到你的函数。

这可能会让你`on()`变成：

```
$('.courseCheckBox').on('change', function () {
    var clickedCheckBox = $(this);
    var clickedCheckBoxId = $(this).attr('id'); //Grab the Id, like coursecheck_<number>

    //Can do this because we know the Id formats are coursecheck_<number> and teachlist_<number>
    var tdToUnhideId = clickedCheckBoxId.replace("coursecheck", "teachlist");
    var tdToUnhideSelector = "#" + toToUnhideId; //Create the Id selector from the Id

    if ($(this).is(':checked') && $(tdToUnhideSelector).hasClass("hidden")) {
         //Show it
         $(tdToUnhideSelector).removeClass("hidden");
    } else {
        //Hide it
        $(tdToUnhideSelector).addClass("hidden");
    }
}); 
```

我对您的条件做了轻微的翻转，如果选中了复选框`$(this).is(':checked')`并且`<td>`有隐藏的类然后取消隐藏它，否则我们隐藏它。

不确定这是否能解决您的问题，但希望它能为您提供一些帮助。如果没有帮助，请提前道歉。

# haskell - 如何使用 HsColour 使类型注释的鼠标悬停在 html 文件上

> ID：15713829
> 
> 赞同：3
> 
> 时间：2013-03-30T01:14:28.120
> 
> 标签：haskell

HsColour 包能够[生成](http://hackage.haskell.org/package/hscolour)带有鼠标悬停类型注释的 html，[可以在功能创建者的网站上找到一个示例](http://goto.ucsd.edu/~rjhala/Annot/hscolour/src/Language-Haskell-HsColour-CSS.html#hscolour)。

如何使用 hscolour 生成带有注释鼠标悬停的 html？我是否需要另一个程序来生成注释，如果需要，它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:18:17.047

您需要使用 Haddock 生成类型注释，带有`--annot=FILE`标志，其中`FILE`是您要生成的文件的文件名。然后，您可以将相同的参数 ( `--annot=FILE`) 传递给 HsColour。

# linux - 即使异步 I/O 操作处于挂起状态，也只有线程处理 io_service 正在等待

> ID：15713832
> 
> 赞同：6
> 
> 时间：2013-03-30T01:14:48.953
> 
> 标签：linux, multithreading, boost-asio

Boost 的 ASIO 调度程序似乎有一个严重的问题，我似乎找不到解决方法。症状是，只有等待调度的线程留在`pthread_cond_wait`f 中，尽管有待处理的 I/O 操作需要它阻塞`epoll_wait`。

`poll_one`我可以通过在一个循环中调用一个线程直到它返回零来最容易地复制这个问题。当线程调用跳出循环时，这可能会使线程调用`run`卡住。据推测， io_service 期望该线程返回到 block in ，但它没有义务这样做，而且这种期望似乎是致命的。`pthread_cond_wait``poll_one``epoll_wait`

是否要求线程与`io_service`s 静态关联？

这是一个显示死锁的示例。这是处理此 io_service 的唯一线程，因为其他线程已继续。肯定有待处理的套接字操作：

```
#0 pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0
#1 boost::asio::detail::posix_event::wait<boost::asio::detail::scoped_lock<boost::asio::detail::posix_mutex> > (...) at /usr/include/boost/asio/detail/posix_event.hpp:80
#2 boost::asio::detail::task_io_service::do_run_one (...) at /usr/include/boost/asio/detail/impl/task_io_service.ipp:405
#3 boost::asio::detail::task_io_service::run (...) at /usr/include/boost/asio/detail/impl/task_io_service.ipp:146 
```

我相信错误如下：如果为 I/O 队列提供服务的线程是在 I/O 套接字就绪检查上阻塞的线程并且它调用调度函数，如果 io 服务上还有任何其他线程阻塞，它必须发出信号。它目前仅在当时有准备好运行的处理程序时发出信号。但这没有留下线程检查套接字准备情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-30T16:54:05.357

这是一个错误。我已经能够通过在`task_io_service::do_poll_one`. 这是修改的`task_io_service::do_poll_one()`片段[`booost/asio/detail/impl/task_io_service.ipp`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/task_io_service.ipp)。唯一添加的行是睡眠。

```
std::size_t task_io_service::do_poll_one(mutex::scoped_lock& lock,
    task_io_service::thread_info& this_thread,
    const boost::system::error_code& ec)
{
  if (stopped_)
    return 0;

  operation* o = op_queue_.front();
  if (o == &task_operation_)
  {
    op_queue_.pop();
    lock.unlock();

    {
      task_cleanup c = { this, &lock, &this_thread };
      (void)c;

      // Run the task. May throw an exception. Only block if the operation
      // queue is empty and we're not polling, otherwise we want to return
      // as soon as possible.
      task_->run(false, this_thread.private_op_queue);
      boost::this_thread::sleep_for(boost::chrono::seconds(3));
    }

    o = op_queue_.front();
    if (o == &task_operation_)
      return 0;
  }

... 
```

我的测试驱动程序相当基础：

*   通过将打印“。”的计时器的异步工作循环。每 3 秒。
*   生成一个将轮询`io_service`.
*   延迟以允许新线程有时间进行轮询，并在轮询线程休眠时进行`io_service`主调用。`io_service::run()``task_io_service::do_poll_one()`

测试代码：

```
#include <iostream>

#include <boost/asio/io_service.hpp>
#include <boost/asio/steady_timer.hpp>
#include <boost/chrono.hpp>
#include <boost/thread.hpp>

boost::asio::io_service io_service;
boost::asio::steady_timer timer(io_service);

void arm_timer()
{
  std::cout << ".";
  std::cout.flush();
  timer.expires_from_now(boost::chrono::seconds(3));
  timer.async_wait(boost::bind(&arm_timer));
}

int main()
{
  // Add asynchronous work loop.
  arm_timer();

  // Spawn poll thread.
  boost::thread poll_thread(
    boost::bind(&boost::asio::io_service::poll, boost::ref(io_service)));

  // Give time for poll thread service reactor.
  boost::this_thread::sleep_for(boost::chrono::seconds(1));

  io_service.run();
} 
```

和调试：

```
[twsansbury@localhost 错误]$ gdb a.out
...
(gdb) r
启动程序：/home/twsansbury/dev/bug/a.out

[启用使用 libthread_db 进行线程调试]
.[新线程 0xb7feeb90 (LWP 31892)]
[线程 0xb7feeb90 (LWP 31892) 已退出]
```

至此，`arm_timer()`已经打印出“.”。一次（当它最初武装时）。轮询线程以非阻塞方式为反应器提供服务，并在`op_queue_`空时休眠 3 秒（`task_operation_`将添加回退出范围`op_queue_`时）。`task_cleanup c`当`op_queue_`为空时，主线程调用`io_service::run()`，看到`op_queue_`为空，并使其自身成为`first_idle_thread_`，它在那里等待它的`wakeup_event`。轮询线程完成休眠并返回`0`，让主线程等待`wakeup_event`。

等待 10~ 秒后，有足够的时间`arm_timer()`准备好，我中断调试器：

```
程序接收信号 SIGINT，中断。
__kernel_vsyscall()中的0x00919402
(gdb) BT
#0 0x00919402 在 __kernel_vsyscall ()
#1 0x0081bbc5 in pthread_cond_wait@@GLIBC_2.3.2 () from /lib/libpthread.so.0
#2 0x00763b3d 在来自 /lib/libc.so.6 的 pthread_cond_wait@@GLIBC_2.3.2 ()
#3 0x08059dc2 in void boost::asio::detail::posix_event::wait >(boost::asio::detail::scoped_lock&) ()
#4 0x0805a009 in boost::asio::detail::task_io_service::do_run_one(boost::asio::detail::scoped_lock&, boost::asio::detail::task_io_service_thread_info&, boost::system::error_code const&) ( )
#5 0x0805a11c 在 boost::asio::detail::task_io_service::run(boost::system::error_code&) ()
#6 0x0805a1e2 in boost::asio::io_service::run() ()
#7 0x0804db78 in main()
```

* * *

并排时间表如下：

```
          投票线程 | 主线程
----------------------------------------------------+--------- -----------------------------------------
  锁（） |
  do_poll_one() |                          
  |-- 从 | 弹出任务操作_
  | queue_op_ |
  |-- 解锁() | 锁（）
  |-- 创建任务清理 | do_run_one()
  |-- 服务反应堆（非阻塞） | `-- queue_op_ 为空
  |-- ~task_cleanup() | |-- 设置线程为空闲
  | |-- 锁() | `--解锁（）
  | `-- queue_op_.push( |
  | 任务操作_) |
  `-- task_operation_ 是 |
      queue_op_.front() |
      `-- 返回 0 | // 仍在等待 wakeup_event
  解锁（） |
```

* * *

据我所知，修补没有副作用：

```
if (o == &task_operation_)
  return 0; 
```

到：

```
if (o == &task_operation_)
{
  if (!one_thread_)
    wake_one_thread_and_unlock(lock);
  return 0;
} 
```

Regardless, I have submitted a [bug and fix](https://svn.boost.org/trac/boost/ticket/8354). Consider keeping an eye on the ticket for an official response.

# c++ - GTK++ 窗口混淆

> ID：15713834
> 
> 赞同：1
> 
> 时间：2013-03-30T01:15:09.930
> 
> 标签：c++, gtk, gtkmm

我正在 Ubuntu 上试验 GTK++，但运气不佳。仅出于测试目的，我想看看是否可以得到一个布尔值来描述窗口是否可调整大小。这是我的代码：

```
 #include <gtkmm.h>
  #include <iostream>
  #include "config.h"

 int  main (int argc, char *argv[])
 {
    gboolean isResizable;
    Gtk::Main kit(argc, argv);

    Gtk::Window* main_win = new Gtk::Window (Gtk::WINDOW_TOPLEVEL);
    main_win->set_title ("gtk-test");
    isResizable = gtk_window_get_resizable(main_win);
    if (main_win)
    {
        kit.run(*main_win);
    }
    return 0;
 } 
```

我在设置`isResizable`为`gtk_window_get_resizable`. 错误说：

```
 cannot convert 'Gtk::Window*' to GtkWindow* {aka_Gtk_window*} for argument 1 
```

`Gtk::Window`和有区别`GtkWindow*`吗？如果是这样，我将如何通过`Gtk::Window`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T02:04:15.837

插入：

```
gtk_window_get_resizable(main_win); 
```

称呼：

```
main_win->get_resizable(); 
```

> Gtk::Window 和 GtkWindow* 之间有区别吗？

`Gtk::Window`( 和`main_win->get_resizable()`) 是 C++ (gtkmm)

`GtkWindow`( 和`gtk_window_get_resizable`) 是 C (gtk)

跨越两者很容易，因为 gtkmm 是 gtk 的包装器，所以你有两个代码库。

# android - 更改按钮背景时的 SimpleAdapter 问题，它会更改所有项目

> ID：15713837
> 
> 赞同：1
> 
> 时间：2013-03-30T01:16:04.450
> 
> 标签：android, simpleadapter

当我填充我的`SimpleAdapter`. 在`getView()`我检查视频是否已经存在的方法上。如果它已经存在，我会将按钮的图像更改为“播放”图像。否则，我将保留其“下载”图像。问题是当我滚动列表时，它会将所有按钮更改为“播放”图像。这是我的代码，我做错了什么？

```
public View getView(int position, View convertView, ViewGroup parent) {
    View row=super.getView(position, convertView, parent);

    TextView videoIdText = (TextView) row.findViewById(R.id.videoId);
    Button downloadButton = (Button) row.findViewById(R.id.videoDownload);

    final String videoId = videoIdText.getText().toString();

    if (videoExists(videoId)) {

        downloadButton.setBackgroundResource( R.drawable.ic_play );
        Drawable d =  downloadButton.getBackground();
        d.setColorFilter(Color.parseColor("#00AA00"),Mode.SRC_ATOP);

        downloadButton.setOnClickListener(new OnClickListener(){ 
            @Override
            public void onClick(View view) {
                if (activity !=null){
                    ((FeedActivity)activity).playVideo(getVideoPath(videoId));
                }       
            }
        });     
    }else{
        downloadButton.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view) {
                DownloadTask task = new DownloadTask();
                task.setVideoId(videoId);
                task.execute();
            }
        });         
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:22:21.243

在`else`您的“”子句中，您`if(videoExists(videoId))`需要设置默认的“下载”按钮图像和颜色过滤器。

这是因为当您滚动列表时会重复使用这些项目，因此具有新设置的按钮将与当前未播放的其他项目的新设置一起重复使用。

* * *

**示例**：

```
if (videoExists(videoId)) {
    downloadButton.setBackgroundResource( R.drawable.ic_play );
    Drawable d =  downloadButton.getBackground();
    d.setColorFilter(Color.parseColor("#00AA00"), Mode.SRC_ATOP);
    ...
} else {
    downloadButton.setBackgroundResource( R.drawable.ic_download );
    Drawable d =  downloadButton.getBackground();
    d.setColorFilter(Color.parseColor("<download-color>"), Mode.SRC_ATOP);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:48:37.003

正如@David Manpearl 提到的，我需要设置其原始图像，但我也需要将按钮存储在标签中

```
public View getView(int position, View convertView, ViewGroup parent) {
    View row=super.getView(position, convertView, parent);

    TextView videoIdText = (TextView) row.findViewById(R.id.videoId);
    Button downloadButton = (Button) row.findViewById(R.id.videoDownload);

    final String videoId = videoIdText.getText().toString();

    if ( row.getTag() == null){
         row.setTag(downloadButton);
    }else{
        downloadButton = (Button) row.getTag();
    }

    if (videoExists(videoId)) {

        downloadButton.setBackgroundResource( R.drawable.ic_play );
        Drawable d =  downloadButton.getBackground();
        d.setColorFilter(Color.parseColor("#00AA00"),Mode.SRC_ATOP);

        downloadButton.setOnClickListener(new OnClickListener(){ 
            @Override
            public void onClick(View view) {
                if (activity !=null){
                    ((FeedActivity)activity).playVideo(getVideoPath(videoId));
                }       
            }
        });     
    }else{
        downloadButton.setBackgroundResource( R.drawable.ic_download );
        downloadButton.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view) {
                DownloadTask task = new DownloadTask();
                task.setVideoId(videoId);
                task.execute();
            }
        });         
    } 
```

# c# - 为什么要在 Tasks 中使用多个重复的方法实现？

> ID：15713838
> 
> 赞同：1
> 
> 时间：2013-03-30T01:17:11.237
> 
> 标签：c#, .net, multithreading, task-parallel-library

在 MSDN 在线文章[《How to: Wait on One or More Tasks to Complete》](http://msdn.microsoft.com/en-us/library/dd537610%28v=vs.100%29.aspx)中，有一段代码：

```
// Try three different approaches to the problem. Take the first one
tasks2[0] = Task<double>.Factory.StartNew(() => TrySolution1());
tasks2[1] = Task<double>.Factory.StartNew(() => TrySolution2());
tasks2[2] = Task<double>.Factory.StartNew(() => TrySolution3()); 
```

调用 3 种不同的方法，它们的功能完全相同，具有完全相同的主体：

```
static double TrySolution1()
//static double TrySolution2()
//static double TrySolution3() 
{
   int i = rand.Next(1000000);
   // Simulate work by spinning
   Thread.SpinWait(i); 
   return DateTime.Now.Millisecond;
} 
```

我无法理解这些多重重复的实现说明了什么？

与使用一种方法有什么区别

```
tasks2[0] = Task<double>.Factory.StartNew(() => TrySolution1());
tasks2[1] = Task<double>.Factory.StartNew(() => TrySolution1());
tasks2[2] = Task<double>.Factory.StartNew(() => TrySolution1()); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T01:27:02.443

这真的会用一种方法给你同样的答案。在这方面，这个例子是一个“糟糕的例子”。话虽如此，这只是如何解决问题的示例，而不是您将使用的“真实代码”。

I suspect the thought behind it was to show you how to use multiple, separate methods (which would normally be implemented differently, of course) and determine which finished first. I do believe the example would be more clear if a different implementation was used for each method, but the concepts being demonstrated would be identical.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:26:51.443

这是如何做某事的*示例。*如果您尝试重构几乎所有示例代码，它将始终接近`return 0;`.

在这种特殊情况下，它表明如果您有几种不同的东西，您可以等待只竞争一种。忽略函数是如何实现的——这不是示例所演示的（如果它让你感到困惑——编写你自己的每个函数的不同实现）。

# eclipse - Eclipse 4.2 的 JProfiler 7.2.2 IDE 集成错误

> ID：15713841
> 
> 赞同：2
> 
> 时间：2013-03-30T01:17:45.223
> 
> 标签：eclipse, integration, jprofiler

我已经安装了 JProfiler 7.2.2（但是带有评估密钥），我使用的是 eclipse 4.2。当我尝试将 JProfiler 集成到 Eclipse 时，它​​显示以下错误消息：

无法创建目录 C:\Program Files\eclipse\dropins\com.jprofiler.integrations.eclipse。

问题是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T15:22:47.333

请不要将 Eclipse 安装放入程序文件文件夹中。从历史上看，Eclipse 设计用于就地自我修改，但“Program Files”文件夹对于普通用户是不可写的。请改用一个文件夹，任何用户都可以写入该文件夹，例如 c:\eclipse。

旁注：大多数 Eclipse 功能即使在不可写目录中也能正常工作，因为 Eclipse 会将配置信息存储在不同的位置。但并非所有插件的设计和制作都考虑到了这一点。

# java - 将另一个类的 JPanel 添加到 Main 类的 JPanel

> ID：15713842
> 
> 赞同：0
> 
> 时间：2013-03-30T01:17:52.607
> 
> 标签：java, swing, nullpointerexception, jframe, jpanel

我有一个主类，它有两个面板，左面板和右面板。左侧面板已经有一些组件，右侧面板在 NORTH 中有一个标签和一个按钮。我想将另一个类的 JPanel 添加到 Main 类的右侧面板中。到目前为止我所做的是实例化该类并将其添加到 rightPanel 但它似乎给了我错误。这是我的 Main 类代码：

```
 package project;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.Label;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.awt.event.WindowEvent;

import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollBar;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTextArea;

import nodeChooser.gristDatabaseUtilities.SetupParentPopulation;
import nodeChooser.internal.NodeChooser;
import nodeChooser.publicInterfaces.Enumerations;
import nodeChooser.publicInterfaces.Precondition;
import nodeChooser.publicInterfaces.SubmitButtonListener;
import nodeChooser.publicInterfaces.UserSelection;

import org.w3c.dom.Document;
import org.w3c.dom.NamedNodeMap;

import utilities.Utilities;

public class Main extends JPanel implements SubmitButtonListener{

    private JPanel mainPanel;
    private JPanel leftPanel;
    private JPanel rightPanel;
    private JPanel centerPanel;
    private JPanel southPanel;
    private JSplitPane splitPane;

    private Document cat;
    private Document qt;

    public Main() {
        mainPanel = new JPanel(new BorderLayout());
        setupJpanels();

        setupMainWindow();

        cat = Utilities.buildXMLDocumentFromFile("cat-woking-age.xml");
        qt = Utilities.buildXMLDocumentFromFile("qt-woking-age.xml");

        // this is how we plug nodeChooser into our project
        NodeChooser nodeChooser = new NodeChooser(this, leftPanel, cat, qt);
    }

    private void setupJpanels() {
        splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT);
        splitPane.setContinuousLayout(true);
        splitPane.setDividerLocation(560);
        splitPane.setOneTouchExpandable(true);
        leftPanel = new JPanel();
        rightPanel = new JPanel(new BorderLayout());
        splitPane.setTopComponent(leftPanel);
        splitPane.setBottomComponent(rightPanel);

        mainPanel.add(splitPane, BorderLayout.CENTER);

    }

    private void setupMainWindow() {
        final JFrame frame= new JFrame("GRiST Project '13");
        frame.addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(WindowEvent winEvt) {
                System.exit(0); 
            }
            public void windowOpened(WindowEvent e) {
                //frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
            }
        });

        frame.getContentPane().add(mainPanel);
        Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
        int width=600;
        int height=400;
        frame.setSize(width, height);
        frame.setLocation((screenSize.width-width)/2,(screenSize.height-height)/2);
        frame.setVisible(true);   
    }

    /**
     * this receives callbacks from nodeChooser
     */
    @Override
    public void submitClicked(final UserSelection userSelection) {

        //the parameter userSelection has all the information that nodeChooser wants to pass on to us.

        String query= "SELECT everything FROM mygrist_samples WHERE ";

        JTextArea selectLabel= new JTextArea(query);
        selectLabel.setLineWrap(true);
        JPanel submitButtonPanel= new JPanel(new FlowLayout(FlowLayout.CENTER));
        JButton setSubmit= new JButton("Submit Query");

        setSubmit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                SetupParentPopulation parentpop= new SetupParentPopulation(userSelection);

                JPanel setSplitPanel= new JPanel(new BorderLayout());
                String rows= parentpop.getRowsInserted();
                JLabel getInsertedRows= new JLabel(rows+" records found.", JLabel.LEFT);
                setSplitPanel.add(getInsertedRows, BorderLayout.CENTER);
                rightPanel.add(setSplitPanel);
                **SplitMain splitMain= new SplitMain();
                rightPanel.add(splitMain);**
            }
        });
        submitButtonPanel.add(setSubmit);
        rightPanel.add(selectLabel, BorderLayout.NORTH);
        rightPanel.add(submitButtonPanel, BorderLayout.CENTER);

        if (userSelection.getPreconditions().size() > 0) {

            String getCorrespondingCodeFromDatabase;

            for (int i = 0; i < userSelection.getPreconditions().size(); i++) {

                    getCorrespondingCodeFromDatabase = userSelection.getPreconditions().get(i).getCode();
                    getCorrespondingCodeFromDatabase = getCorrespondingCodeFromDatabase.replaceAll("-", "_");
                    Enumerations enum1= new Enumerations();

                    String getCorrespondingRelationship= enum1.getOperator(userSelection.getPreconditions().get(i).getRelationship());

                    query += getCorrespondingCodeFromDatabase + " " + getCorrespondingRelationship
                            + " '" + userSelection.getPreconditions().get(i).getAnswer() + "'";
                    selectLabel.setText(query);
                    selectLabel.revalidate();
                    repaint();
                    if (i != userSelection.getPreconditions().size() - 1) {
                        query += " AND ";
                    }
            }
        } else {
            System.out.println("No records found");
        }

    }

    public static void main(String[] args) {
        new Main();

    }

} 
```

这是 SplitMain 类（与 Main 类几乎相同，但一些方法发生了变化）：

```
 package project;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSplitPane;
import javax.swing.JTextArea;

import nodeChooser.gristDatabaseUtilities.SetupSubsamplePopulation;
import nodeChooser.publicInterfaces.Enumerations;
import nodeChooser.publicInterfaces.SplitSubmitButtonListener;
import nodeChooser.publicInterfaces.UserSelectedSplit;

import org.w3c.dom.Document;

import utilities.Utilities;
import conditions.splitUtilities.SplitChooser;

public class SplitMain extends JPanel implements SplitSubmitButtonListener{

    private JPanel mainPanel;
    private JPanel leftPanel;
    private JPanel rightPanel;
    private JPanel centerPanel;
    private JPanel southPanel;
    private JSplitPane splitPane;

    private Document cat;
    private Document qt;

    public SplitMain() {

        rightPanel = new JPanel(new BorderLayout());

        cat = Utilities.buildXMLDocumentFromFile("cat-woking-age.xml");
        qt = Utilities.buildXMLDocumentFromFile("qt-woking-age.xml");

        // this is how we plug splitChooser into our project
        SplitChooser splitChooser = new SplitChooser(this, rightPanel, cat, qt);

    }

    @Override
    public void submitSplitClicked(final UserSelectedSplit userSplitSelection) {

                String query= "SELECT everything FROM mygrist_samples WHERE ";

                JTextArea selectLabel= new JTextArea(query);
                selectLabel.setLineWrap(true);
                JPanel submitButtonPanel= new JPanel(new FlowLayout(FlowLayout.CENTER));
                JButton setSubmit= new JButton("Submit Query");

                setSubmit.addActionListener(new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        SetupSubsamplePopulation parentpop= new SetupSubsamplePopulation(userSplitSelection);

                        JPanel setSplitPanel= new JPanel(new BorderLayout());
                        String rows= parentpop.getRows();
                        JLabel getInsertedRows= new JLabel(rows+" records found.", JLabel.LEFT);
                        setSplitPanel.add(getInsertedRows, BorderLayout.NORTH);
                        getInsertedRows.revalidate();
                        getInsertedRows.repaint();
                        rightPanel.add(setSplitPanel, BorderLayout.CENTER);
                    }
                });
                submitButtonPanel.add(setSubmit);
                rightPanel.add(selectLabel, BorderLayout.NORTH);
                rightPanel.add(submitButtonPanel, BorderLayout.CENTER);
                if (userSplitSelection.getSplitConditions().size() > 0) {

                    String getCorrespondingCodeFromDatabase;

                    for (int i = 0; i < userSplitSelection.getSplitConditions().size(); i++) {

                            getCorrespondingCodeFromDatabase = userSplitSelection.getSplitConditions().get(i).getCode();
                            getCorrespondingCodeFromDatabase = getCorrespondingCodeFromDatabase.replaceAll("-", "_");
                            Enumerations enum1= new Enumerations();

                            String getCorrespondingRelationship= enum1.getOperator(userSplitSelection.getSplitConditions().get(i).getRelationship());

                            query += getCorrespondingCodeFromDatabase + " " + getCorrespondingRelationship
                                    + " '" + userSplitSelection.getSplitConditions().get(i).getAnswer() + "'";
                            selectLabel.setText(query);
                            selectLabel.revalidate();
                            repaint();
                            if (i != userSplitSelection.getSplitConditions().size() - 1) {
                                query += " AND ";
                            }
                    }
                } else {
                    System.out.println("No records found");
                }

    }

} 
```

如何将此 SplitMain 类合并到 Main 类的 rightPanel 中？

编辑：我得到的错误是这些：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at conditions.splitUtilities.SplitChooser.<init>(SplitChooser.java:133)
at project.SplitMain.<init>(SplitMain.java:49)
at project.Main$2.actionPerformed(Main.java:145)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source) 
```

给我这个错误的课程是：

```
 package conditions.splitUtilities;

import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

import nodeChooser.internal.IconSource;
import nodeChooser.internal.SplitConditionChangeListener;
import nodeChooser.publicInterfaces.Enumerations.QuestionType;
import nodeChooser.publicInterfaces.Enumerations.Relationship;
import nodeChooser.publicInterfaces.SplitSubmitButtonListener;
import nodeChooser.publicInterfaces.UserSelectedSplit;
import nodeChooser.publicInterfaces.UserSplit;

import org.w3c.dom.Document;
import org.w3c.dom.Node;

public class SplitChooser implements SplitConditionChangeListener {

    private JPanel mainPanel;
    private JPanel centerpanelWrapper;
    private Document qt;
    private Document cat;
    private ArrayList<SplitConditionGui> splitConditions;

    /**
     * 
     * @param submitButtonListener a class that implements this interface so that we can notify them when submit button has been clicked
     * @param panel the JPanel on which the node chooser would be painted
     * @param cat the cat xml
     * @param qt the qt xml
     */
    public SplitChooser(final SplitSubmitButtonListener splitSubmitButtonListener, JPanel panel, Document cat, Document qt) {

        this.qt = qt;
        this.cat = cat;
        splitConditions = new ArrayList<SplitConditionGui>();
        centerpanelWrapper = panel;
        mainPanel = new JPanel();
        mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.Y_AXIS));

        addSplitCondition();
        JPanel northPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        JButton addButton = new JButton("Add Precondition");
        addButton.setIcon(IconSource.createImageIcon("images2/add.png"));
        addButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                addSplitCondition();
            }
        });
        northPanel.add(addButton);

        JPanel southPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        JButton queryButton = new JButton("Submit");
        queryButton.setIcon(IconSource.createImageIcon("images2/accept.png"));
        queryButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                splitSubmitButtonListener.submitSplitClicked(new UserSelectedSplit() {

                    @Override
                    public ArrayList<UserSplit> getSplitConditions() {
                        ArrayList<UserSplit> splitConditionList = new ArrayList<>();
                        for(final SplitConditionGui splitList: splitConditions) {
                            if(splitList.getNodeCode()  == null)
                                continue;
                            splitConditionList.add(new UserSplit() {

                                @Override
                                public boolean isLeafNode() {
                                    return splitList.isLeaf();
                                }

                                @Override
                                public Node getSelectedCatNode() {
                                    return splitList.getCatNode();
                                }

                                @Override
                                public Relationship getRelationship() {
                                    return splitList.getRelationship();
                                }

                                @Override
                                public Node getQTNode() {
                                    return splitList.getQtNode();
                                }

                                @Override
                                public QuestionType getNodeType() {
                                    return splitList.getQuestionType(splitList.getQtNode());
                                }

                                @Override
                                public String getCode() {
                                    return splitList.getNodeCode();
                                }

                                @Override
                                public String getAnswer() {
                                    return splitList.getAnswer();
                                }

                            });
                        }

                        return splitConditionList;
                    }
                });
            }
        });
        southPanel.add(queryButton);

        JScrollPane jsp = new JScrollPane(mainPanel);
        jsp.setBorder(null);

//this part gives nullPointerException and I don't know why it's passing null. Seems to be working fine for other classes
        centerpanelWrapper.removeAll();
        centerpanelWrapper.setLayout(new BorderLayout(10,5));
        centerpanelWrapper.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5), BorderFactory.createTitledBorder("Preconditions")));
        centerpanelWrapper.add(jsp, BorderLayout.CENTER);
        centerpanelWrapper.add(northPanel, BorderLayout.NORTH);
        centerpanelWrapper.add(southPanel, BorderLayout.SOUTH);

        centerpanelWrapper.revalidate();
        centerpanelWrapper.repaint();
    }
    private void addSplitCondition() {
        SplitConditionGui splitConditionGui = new SplitConditionGui(this, cat, qt);
        splitConditions.add(splitConditionGui);
        mainPanel.add(splitConditionGui.getJpanel());
        mainPanel.revalidate();
        mainPanel.repaint();
    }

    private void removeSplitCondition(SplitConditionGui splitConditionGui) {
        splitConditions.remove(splitConditionGui);
        mainPanel.remove(splitConditionGui.getJpanel());
        mainPanel.revalidate();
        mainPanel.repaint();
    }

    @Override
    public void removedCondition(SplitConditionGui splitConditionGui) {
        removeSplitCondition(splitConditionGui);
    }

} 
```

# java - J creator 中的奇怪输出

> ID：15713849
> 
> 赞同：1
> 
> 时间：2013-03-30T01:18:46.320
> 
> 标签：java, jcreator

嗨，我正在为学校布置一个作业，并从中得到一个非常奇怪的输出。程序编译得很好，但我检查了它给我的输出：

```
--------------------Configuration: <Default>--------------------
Usage: java [-options] class [args...]
       (to execute a class)
or  java [-options] -jar jarfile [args...]
       (to execute a jar file)
where options include:
-d32      use a 32-bit data model if available
-d64      use a 64-bit data model if available
-server   to select the "server" VM
-hotspot      is a synonym for the "server" VM  [deprecated]
              The default VM is server.

-cp <class search path of directories and zip/jar files>
-classpath <class search path of directories and zip/jar files>
              A ; separated list of directories, JAR archives,
              and ZIP archives to search for class files.
-D<name>=<value>
              set a system property
-verbose:[class|gc|jni]
              enable verbose output
-version      print product version and exit
-version:<value>
              require the specified version to run
-showversion  print product version and continue
-jre-restrict-search | -no-jre-restrict-search
              include/exclude user private JREs in the version search
-? -help      print this help message
-X            print help on non-standard options
-ea[:<packagename>...|:<classname>]
-enableassertions[:<packagename>...|:<classname>]
              enable assertions with specified granularity
-da[:<packagename>...|:<classname>]
-disableassertions[:<packagename>...|:<classname>]
              disable assertions with specified granularity
-esa | -enablesystemassertions
              enable system assertions
-dsa | -disablesystemassertions
              disable system assertions
-agentlib:<libname>[=<options>]
              load native agent library <libname>, e.g. -agentlib:hprof
              see also, -agentlib:jdwp=help and -agentlib:hprof=help
-agentpath:<pathname>[=<options>]
              load native agent library by full pathname
-javaagent:<jarpath>[=<options>]
              load Java programming language agent, see java.lang.instrument
-splash:<imagepath>
              show splash screen with specified image
See http://www.oracle.com/technetwork/java/javase/documentation/index.html for more          details.

Process completed. 
```

我不确定我在这里做错了什么，因为我的朋友和我自己看起来都不错。

源代码，（记住程序尚未完成）在这里：

```
/*
Assigone113.java Assignment
Written By Some Guy
*/

import java.util.Scanner;
public class AssigOne113
{
public static void main (String[]args)
{
    //Final variables//
    final int CURRYR=2013;
    final int SNKYR=2013 /* | 2001 | 1989 | 1977 | 1965 | 1953 | 1941 | 1929 |  1917 | 1905 | 1893 | 1881 | 1869 | 1857 | 1845 |
                    1833 | 1821 | 1809 | 1797 | 1785 | 1773 | 1761 | 1749 | 1737 | 1725 | 1713 | 1701 | 1689 | 1677 | 1665 |
                    1653 | 1641 | 1629 | 1617 | 1605 | 1593 | 1581 | 1569 | 1557 | 1545 | 1533 | 1521 | 1509 | 1497 | 1485 |
                    1473 | 1461 | 1449 | 1437 | 1425 | 1413 | 1401 | 1389 | 1377 | 1365 | 1353 | 1341 | 1329 | 1317 | 1305 |
                    1293 | 1281 | 1269 | 1257 | 1245 | 1233 | 1221 | 1209 | 1197 | 1185 | 1173 | 1161 | 1149 | 1137 | 1125 |
                    1113 | 1101 | 1089 | 1077 | 1065 | 1053 | 1041 | 1029 | 1017 | 1005 | 993 | 981 | 969 | 957 | 945 | 933|
                    921 | 909 | 897 | 885 | 873 | 861 | 849 | 837 | 825 | 813 | 801 | 789 | 777 | 765 | 753 | 741 | 729 | 717|
                    705 | 693 | 681 | 669 | 657 | 645 | 633 | 621 | 609 | 597 | 585 | 573 | 561 | 549 | 537 | 525 | 513 | 501|
                    489 | 477 | 465 | 453 | 441 | 429 | 417 | 405 | 393 | 381 | 369 | 357 | 345 | 333 | 321 | 309 | 297 | 285|
                    273 | 261 | 249 | 237 | 225 | 213 | 201 | 189 | 177 | 165 | 153 | 141 | 129 | 117 | 105 | 93 | 81 | 69 | 57|
                    45 | 33 | 21 | 9 | 2025 | 2037 | 2049 | 2061 | 2073 | 2085 | 2097 | 2109 | 2121 | 2133 | 2145 | 2157 |
                    2169 | 2181 | 2193 | 2205 | 2217 | 2229 | 2241 | 2253 | 2265 | 2277 | 2289 | 2301 | 2313 | 2325 | 2337 |
                    2349 | 2361 | 2373 | 2385
                    */;
        //Variables//

        Scanner keyboard;
        Scanner birthday;
        Scanner birthyear;

        String progstart;
        String Uname;
        String restartprog;
        String season = "springtime";
        String DD;

        double DDMM;

        int Essscore=0;
        int year;
        int month;
        int day;

        char Yeschar;

        boolean loopstart;

        //SAMMY SNAKES SIXTH/SEVENTH SPRING OF SUCCESS START//
        System.out.println(" ");
        System.out.println("<------------------------------------------->");
        System.out.println("Sammy Snakes Sixth/Seventh Spring Of Success");
        System.out.println("<------------------------------------------->");
        System.out.println(" ");

        //ASK FOR USAGE INPUT//
        System.out.println("I can calculate an Ess-Score for you"); 
        System.out.println("Would you like to calculate an Ess-Score?");
        keyboard=new Scanner(System.in);
        progstart=keyboard.next();
        Yeschar=(progstart.charAt(0));

        if (Yeschar=='y')

            {
                loopstart=true;
            }   

            else
                {
                loopstart=false;
                }
        while (loopstart==true);

        //USER NAME INPUT//
        System.out.println("To begin, what is your name?");
        keyboard = new Scanner(System.in);
        Uname = keyboard.next();
        if (Uname.charAt(0)== 'S');

}       

 } 
```

对此的任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:50:55.377

如果未正确配置主类，则会出现此问题，以修复它

转到项目->项目设置->在运行组合框中选择您的主类，然后单击确定。

![在此处输入图像描述](../Images/47edae33fb132a0d177604bff5ed7588.png)

如果项目设置显示为灰色，则意味着您正在以独立模式创建文件并且您无法选择主类，因此您必须创建一个新项目。

顺便说一句，JCreator 不是 Java 开发的好 IDE，并且有很多错误。它不是开源的。在某个时候切换到 Netbeans 的 Eclipse 或 intellij Idea 社区版，您将永远不会后悔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:12:38.823

配置主类，删除所有.class文件，再次运行程序。

# javascript - 使用 document.execCommand 检索值

> ID：15713856
> 
> 赞同：2
> 
> 时间：2013-03-30T01:20:04.607
> 
> 标签：javascript

请参阅`document.execCommand`命令文档：

[http://msdn.microsoft.com/en-us/library/hh801229(v=vs.85).aspx#fontsize](http://msdn.microsoft.com/en-us/library/hh801229(v=vs.85).aspx#fontsize)

他们说`document.execCommand`可以用来检索值：

> 设置或检索当前选择的字体大小。

例如，我可以设置字体大小，但我无法获得当前值......文档没有提供任何示例（仅用于设置值）。

尝试省略 value 参数以及 UI 参数，但我无法得到任何东西。

# types - 从帕斯卡文件中读取创建的记录类型

> ID：15713861
> 
> 赞同：1
> 
> 时间：2013-03-30T01:21:34.060
> 
> 标签：types, record, pascal

我会尽量做到最短。我的程序中有这些数据类型。

```
type
  pha = (SenoraBlanco, SenorVerde, SenoraCeleste, ProfesorCiruela,
    SenoritaEscarlata, CoronelMostaza, Biblioteca, Cocina, Comedor, Estudio,
    Vestibulo, Salon, Invernadero, SalaDeBaile, SalaDeBillar, Candelabro,
    Cuchillo, Cuerda, LlaveInglesa, Revolver, Tubo);

  a = Candelabro..Tubo;
  h = Biblioteca..SalaDeBillar;
  p = SenoraBlanco..CoronelMostaza;

  sbr = record
    arma: a;
    habt: h;
    prj: p;
  end;

var
  game: text;
  sobre: sbr; 
```

我想从文件中读取这一行，然后将其分配给变量 sobre, 的字段`type sbr`：

`CoronelMostaza Candelabro Vestibulo`

基本上这就是我正在尝试的：

```
sobre.prj  := CoronelMostaza;
sobre.arma := Candelabro;
sobre.habt := Vestibulo; 
```

这是我迄今为止尝试过的：

```
ReadLn(game, sobre.prj, sobre,arma, sobre.habt); 
```

我试过关闭 IO 检查但没有结果，我最接近这个问题的答案是将第一个单词分配给第一个变量，但总是以错误或空变量结尾。请帮助我，如果你愿意，请告诉我这一切背后发生了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:48:17.053

假设文本文件包含 type 的类型文字`pha`。

声明一个包含这些文字的文本常量：

```
const
  phaStr : array[pha] of string = ('SenoraBlanco', 'SenorVerde', 'SenoraCeleste', 'ProfesorCiruela',
    'SenoritaEscarlata', 'CoronelMostaza', 'Biblioteca', 'Cocina', 'Comedor', 'Estudio',
    'Vestibulo', 'Salon', 'Invernadero', 'SalaDeBaile', 'SalaDeBillar', 'Candelabro',
    'Cuchillo', 'Cuerda', 'LlaveInglesa', 'Revolver', 'Tubo'); 
```

要获取这些字符串文字之一的整数索引：

```
function IndexOfPhaStr( const aStr : string) : integer;
var
  aPHA : pha;
begin
  Result := -1;
  for aPHA := Low(pha) to High(pha) do
  begin
    if (aStr = phaStr[aPHA]) then
    begin
      Result := Ord(aPHA);
      break;
    end;
  end;
end; 
```

该文件包含文本信息，因此您必须将文本转换为您的数据类型。使用`TStringList`in的简单示例`classesh.inc`：

```
var

  i : Integer;
  sList : TStringList;
  s : String;
  ix : array [1..3] of integer;
begin
  ...
  sList := TStringList.Create;
  sList.Delimiter := ' ';
  AssignFile(game,'TEST.Txt');
  Reset(game);
  System.ReadLn(game, s);
  System.CloseFile(game);
  sList.DelimitedText := s;
  for i := 0 to 2 do
    ix[i+1] := IndexOfPhaStr(sList[i]);
  if (ix[1] in [Ord(Low(p))..Ord(High(p))])
    then sobre.prj := pha(ix[1]);
  if (ix[2] in [Ord(Low(a))..Ord(High(a))])
    then sobre.arma := pha(ix[2]);
  if (ix[3] in [Ord(Low(h))..Ord(High(h))])
    then sobre.habt:= pha(ix[3]);
  sList.Free;
end; 
```

如果您的文本文件包含更多信息，请同时为它们进行文本转换。

PS。我将把错误处理留作练习。

# c# - 具有默认值的 C# 参数如何为空？

> ID：15713865
> 
> 赞同：5
> 
> 时间：2013-03-30T01:22:08.370
> 
> 标签：c#, .net, c#-4.0, asp.net-mvc-4, .net-4.0

下面显示的代码显示了一个`Get`获取`search`具有默认值的字符串的方法：`""`.

![显示具有默认值的参数的空值的图像](../Images/bc4d6241436828bc21306e6247e82051.png)

`search`当具有非空默认值并且从未更改时，该值如何可能为空？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-30T01:24:53.873

> 当搜索具有非空默认值并且从未更改时，该值如何可能为空？

如果显式传递`null`给方法（或为 null 的变量），则不使用默认值。

*仅当您在没有*适当参数的情况下调用方法时才使用默认值，在这种情况下，编译器会为您“填充”默认值。如果您使用某些东西（包括`null`或对象变量）调用该方法`null`，您将在那里得到一个空值。

# php - 处理计数排序数组

> ID：15713867
> 
> 赞同：0
> 
> 时间：2013-03-30T01:22:22.573
> 
> 标签：php

我试图弄清楚如何处理以这种方式排序的数组：

```
$countValues = array_count_values($someArray);
arsort($someArray); 
```

我想找到符合某些标准的排序数组的第一个值。例如，你有一个包含香蕉、苹果和茶的数组。我想找到不是苹果的数组中最具代表性的成员。所以如果我们有数组：

[苹果，香蕉，苹果，香蕉，茶]

排序后会变成这样：

( [苹果] => 2 [香蕉] => 2 [茶] => 1 )

那么我如何找到不是苹果的最具代表性的价值。希望你能跟上。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:27:01.343

```
$countValues = array_count_values($someArray);
unset($countValues['apple']); // Remove apple from array.
arsort($countValues);
$most_popular = array_values($countValues)[0]; // Get first item from array (pop). 
```

# android - 使用类加载器 AntClassLoader[] 找不到 taskdef 类 com.android.ant.SetupTask

> ID：15713871
> 
> 赞同：9
> 
> 时间：2013-03-30T01:24:13.440
> 
> 标签：android

我正在尝试从“Beginning Android 4”一书中获得一些简单的 Android 应用程序。我在其中一个源代码目录上运行 ant 并收到此错误：

```
# ant debug
Buildfile: NowRedux/build.xml

BUILD FAILED
NowRedux/build.xml:49: taskdef class com.android.ant.SetupTask cannot be found using the classloader AntClassLoader[] 
```

build.xml 中导致这种情况的行是：

```
<taskdef name="setup"
    classname="com.android.ant.SetupTask"
    classpathref="android.antlibs" /> 
```

有谁知道我该如何解决这个问题？我尝试在[http://ant.apache.org/](http://ant.apache.org/)下载 ant并手动安装它，但这并没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-30T13:29:02.317

我不确定这是否是解决问题的正确方法，或者它只是回避它，但我这样做了

```
rm MyProjects/NowRedux/build.xml
android update project --target 8 --path MyProjects/NowRedux 
```

它奏效了。它基本上创建了一个不引用 com.android.ant.SetupTask 的新 build.xml 文件（因此，该问题可能仍然存在，但至少我找到了解决方法）

# loops - OAM 汇编语言说明

> ID：15713872
> 
> 赞同：2
> 
> 时间：2013-03-30T01:24:14.603
> 
> 标签：loops, assembly, oam

我在编写一个 OAM 程序时遇到问题，该程序会生成一个以 1 开头的交替符号的奇数序列。

我写了一个程序，但它不起作用，我不知道为什么。因为这是一种罕见的语言，如果有人可以帮助并解释我做错了什么，那就太好了。

```
X,NOOP
Y,NOOP 
LDA stdin
loop, SET 1
LDA Y
STA 0
LDA X
DEC
STA X #X = X - 1
LDA X #ACC = X 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T07:21:21.610

*其他读者想知道这到底是怎么回事：*
一个名为的基于 Web 的[`One Address Machine`](http://informatics.indiana.edu/fil/OAM/)编译器/汇编器/仿真器[`OAMulator`在这里](http://compepi.cs.uiowa.edu/cgi-bin/OAMulator2.cgi)。

你要求一个`OAM program that generates a sequence of odd numbers with alternating signs starting with 1`（没有指定最大值）。
我会解释你想要以下输出：`1, -3, 5, -7, 9, -11, 13, -15 etc...`.

我假设你`LDA stdin`的意思是要求最大值，但你似乎没有将它存储在`STA`. 此外，`BR`在初始化变量`x`和`y`. 我也真的不明白你的代码将如何交替符号......

我先写`OAMPL`代码作弊：

```
n = 1                       #Init number n as 1
PRINT "enter max number:"   #Ask for max number
READ i                      #Read that number from input, storing it as i
LOOP (/ i 2)                #Calculate number of iterations, passing that to LOOP
  IF t                      #If t (toggle)
    t = 0                   #Toggle falsy
    PRINT (- 0 n)           #Print 0-counter
  ELSE
    t = 1                   #Toggle truthy
    PRINT n                 #Print counter
  ENDIF
  n = (+ n 2)               #Increase counter by 2
END
EXIT                        #Exit program 
```

这将编译为以下内容`OAM Assembly`：

```
# Emitted by the OAMPL compiler
1\.  BR  5   # branch to program block
# Variable storage allocation block
2\. n,   NOOP    # variable n
3\. i,   NOOP    # variable i
4\. t,   NOOP    # variable t
# Begin OAM program block
# OAMPL: n = 1
5\.  SET 1
6\.  STA n
# OAMPL: PRINT "enter max number:"
7\.  SET "enter max number:"
8\.  STA stdout
# OAMPL: READ i
9\.  LDA stdin
10\. STA i
# OAMPL: LOOP (/ i 2)
11\. SET 2
12\. STA 14
13\. BR 15
14\. NOOP    # intermediate value
15\. LDA i
16\. DIV 14
17\. BR L18
18\. NOOP    # loop counter
# OAMPL: IF t
19\. LDA t
20\. BRZ I20
# OAMPL: t = 0
21\. SET 0
22\. STA t
# OAMPL: PRINT (- 0 n)
23\. LDA n
24\. STA 26
25\. BR 27
26\. NOOP    # intermediate value
27\. SET 0
28\. SUB 26
29\. STA stdout
# OAMPL: ELSE
30\. BR I30
31\. I20,    NOOP
# OAMPL: t = 1
32\. SET 1
33\. STA t
# OAMPL: PRINT n
34\. LDA n
35\. STA stdout
# OAMPL: ENDIF
36\. I30,    NOOP
# OAMPL: n = (+ n 2)
37\. SET 2
38\. STA 40
39\. BR 41
40\. NOOP    # intermediate value
41\. LDA n
42\. ADD 40
43\. STA n
# OAMPL: END
44\. LDA 18
45\. DEC
46\. L18,    STA 18
47\. BRP 19
# OAMPL: EXIT
48\. HLT 
```

*注意：您也可以省略注释 ( `# comment`) 和前导 (line-) 编号。*

如果我输入`50`-`input`字段（回答最大值问题）并点击`execute`（编译后！），我得到以下`output`结果：

```
enter max number:
1
-3
5
-7
9
-11
13
-15
17
-19
21
-23
25
-27
29 
```

希望这可以帮助！

# java - 在 javacode 中将 ImageView 从资源添加到 LinearLayout

> ID：15713874
> 
> 赞同：-1
> 
> 时间：2013-03-30T01:24:31.010
> 
> 标签：java, android, imageview

我是 Android 编程新手，但对 Java 有一些经验，尽管还很缺乏经验。

我将首先发布 XML 文档，以便更容易描述。

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout 
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:orientation="horizontal"
        android:layout_weight="2"
        android:background="#4E2FEB">
    </LinearLayout>

    <HorizontalScrollView 
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:background="#E01F39" >

        <LinearLayout android:id="@+id/card_tray"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:orientation="horizontal" >

        </LinearLayout>
    </HorizontalScrollView>
 </LinearLayout> 
```

我想在 java 代码中将 ImageView 添加到 Horizo​​ntalScrollView 中。这是我到目前为止得到的代码。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_main);

        LinearLayout l = (LinearLayout)findViewById(R.id.card_tray);

        l.addView((ImageView)findViewById(R.id.xo_1));
        l.addView((ImageView)findViewById(R.id.xo_2));
} 
```

这是我拥有的另一个 .xml 文件，其中包含我要引用的 ImageView 视图。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView  android:id="@+id/xo_1"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:adjustViewBounds="true"
                android:paddingRight="10dp" 
                android:src="@drawable/xo_1" /> 

    <ImageView  android:id="@+id/xo_2"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:adjustViewBounds="true"
                android:paddingRight="10dp" 
                android:src="@drawable/xo_2" />  

</LinearLayout> 
```

当我尝试使用 Eclipse 在我的平板电脑上运行它时，它会因通常的“应用程序没有响应”消息而崩溃。

**编辑：** 这是 LogCat 输出。

> 03-30 01:38:13.053: D/AndroidRuntime(29659): 关闭 VM 03-30 01:38:13.053: W/dalvikvm(29659): threadid=1: 线程退出未捕获异常 (group=0x41f0b2a0) 03 -30 01：38：13.053：E/AndroidRuntime（29659）：致命异常：主要 03-30 01：38：13.053：E/AndroidRuntime（29659）：java.lang.RuntimeException：无法启动活动 ComponentInfo{kpapps.testapp /kpapps.testapp.MainActivity}：java.lang.NullPointerException 03-30 01:38:13.053：E/AndroidRuntime(29659)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110) 03-30 01:38 :13.053: E/AndroidRuntime(29659): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.app.ActivityThread.access$700 (ActivityThread.java:140) 03-30 01:38:13.053: E/AndroidRuntime(29659):在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03- 30 01:38:13.053: E/AndroidRuntime(29659): 在 android.os.Looper.loop(Looper.java:137) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.app。 ActivityThread.main(ActivityThread.java:4921) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-30 01:38:13.053: E /AndroidRuntime(29659): at java.lang.reflect.Method.invoke(Method.java:511) 03-30 01:38:13.053: E/AndroidRuntime(29659): at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:1038) 03-30 01:38:13.053: E/AndroidRuntime(29659): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805) 03-30 01:38：13.053：E/AndroidRuntime（29659）：在 dalvik.system.NativeStart.main（本机方法）03-30 01：38：13.053：E/AndroidRuntime（29659）：引起：java.lang.NullPointerException 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.view.ViewGroup.addView(ViewGroup.java:3481) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.view.ViewGroup .addView(ViewGroup.java:3464) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 kpapps.testapp.MainActivity.onCreate(MainActivity.java:22) 03-30 01:38:13.053: E /AndroidRuntime(29659): 在 android.app.Activity.performCreate(Activity.java:5188) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java: 1094) 03-30 01:38:13.053: E/AndroidRuntime(29659): 在 android.app.ActivityThread。performLaunchActivity(ActivityThread.java:2074) 03-30 01:38:13.053: E/AndroidRuntime(29659): ... 11 更多

**编辑：**根据要求。MainActivity.java 的第 22 行

```
l.addView((ImageView)findViewById(R.id.xo_1)); 
```

**编辑：**

## 修订

我将java代码更改为；

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_main);

        LinearLayout l = (LinearLayout)findViewById(R.id.card_tray);

        View cards = getLayoutInflater().inflate(R.layout.skill_cards, null);

        ImageView imageView = (ImageView)cards.findViewById(R.id.xo_1);
        ImageView imageView2 = (ImageView)cards.findViewById(R.id.xo_2);

        l.addView(imageView);
        l.addView(imageView2);
} 
```

但它仍然会崩溃，只是出现不同的错误。这是新的 LogCat；

> 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 致命异常: main 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): java.lang.RuntimeException: 无法启动活动 ComponentInfo{kpapps. testapp/kpapps.testapp.MainActivity}：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android. app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android.app.ActivityThread.access$700(ActivityThread.java:140) 03-30 02:10 :31.833:​​ E/AndroidRuntime(4978): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java: main(Native Method) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): Caused by: java.lang.IllegalStateException: 指定的子节点已经有父节点。您必须首先在孩子的父母上调用 removeView()。03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android.view.ViewGroup.addViewInner(ViewGroup.java:3672) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android. view.ViewGroup.addView(ViewGroup.java:3543) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android.view.ViewGroup.addView(ViewGroup.java:3488) 03-30 02:10: 31.833:​​ E/AndroidRuntime(4978): 在 android.view.ViewGroup.addView(ViewGroup.java:3464) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 kpapps.testapp.MainActivity.onCreate(MainActivity .java:24) 03-30 02:10:31.833:​​ E/AndroidRuntime(4978): 在 android.app.Activity.performCreate(Activity.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:45:58.383

`findViewById()`只会在`setContentView()`.
图像视图`xo_1`和`xo_2`处于不同的布局中，因此`findViewById(R.id.xo_1)`将始终为空。

你必须先膨胀你的第二个布局：

```
View secondLayout = getLayoutInflater().inflate(R.id.second_layout, null, false);
ImageView imageView = (ImageView) secondLayout.findViewById(R.id.xo_1));
ImageView imageView2 = (ImageView) secondLayout.findViewById(R.id.xo_2));
l.addView(imageView);
l.addView(imageView2); 
```

如果您正在寻找添加`ImageView`s 的动态方式，则无需在 xml 布局中定义它们。

You can add them programmatically:

```
ImageView imageView = new ImageView(this);
imageView.setImageResource(R.drawable.xo_1);
// etc...
l.addView(imageView, layoutParams); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:39:07.067

在我们看到 logcat 之前，这不是一个确切的答案，但您可以尝试类似

```
 LinearLayout l = (LinearLayout)findViewById(R.id.card_tray);  
 ImageView imageView = (ImageView)findViewById(R.id.xo_1));
 ImageView imageView2 = (ImageView)findViewById(R.id.xo_2));
 l.addView(imageView);
 l.addView(imageView2); 
```

这应该将这两个`ImageView`s 添加到`LinearLayout`您声明的中。我希望这有帮助。如果没有，请按照我的描述复制并粘贴 logcat 错误。

**笔记**

您只能使用`Layout`已膨胀的，但我看到您正在使用两个不同的`Layouts`. 您可能正在尝试访问一个`View`不在`layout`您这里膨胀的`setContentView(R.layout.activity_main);`

# c - C中的埃拉托色尼筛算法的分割错误

> ID：15713877
> 
> 赞同：-4
> 
> 时间：2013-03-30T01:25:02.507
> 
> 标签：c, segmentation-fault, sieve-of-eratosthenes, sieve

好的，所以我创建的这个函数使用 Eratosthenes 算法来计算所有素数 <= n。该函数在参数中存储素数和素数。

当函数退出时，素数应该指向一块动态分配的内存，其中包含所有素数<= num。*count 将有素数的计数。

这是我的函数 getPrimes：

```
void getPrimes(int usernum, int* count, int** array){
    (*count) = (usernum - 1);
    int sieve[usernum-1], primenums = 0, index, fillnum, multiple;

    //Fills the array with the numbers up to the user's ending number, usernum.
    for(index = 0, fillnum = 2; fillnum <= usernum; index++, fillnum++){
        sieve[index] = fillnum;
    }

     /*Starts crossing out non prime numbers starting with 2 because 1 is not a prime. It then deletes all of those multiples and 
     moves on to the next number that isnt crossed out, which is a prime. */
     for (; primenums < sqrt(usernum); primenums++){ //Walks through the array.
         if (sieve[primenums] != 0){ //Check's if that number is 0 which means it's crossed out
             for (multiple = (sieve[primenums]); multiple < usernum; multiple += sieve[primenums]){ //If it is not crossed out it starts deleting its multiples.
                 //Crossing multiples out and decrements count to move to next number
                 sieve[multiple + primenums] = 0;
                 --(*count);
             }
         }
     }
     int k;
     for (k = 0; k < usernum; k++)
     if (sieve[k] != 0){
         printf(" %d", sieve[k]);
     }
     printf(" ");
     array = malloc(sizeof(int) * (usernum + 1));
     assert(array);
     (*array) = sieve;
 } 
```

我的函数在这里编译得很好，但是我注意到当我尝试从 101 开始的更大数字时出现分段错误。有谁看到我的代码在哪里产生分段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:26:02.170

以下两个语句是有问题的：

```
array = malloc(sizeof(int) * (usernum + 1)); 
```

我认为你的意思是`*array = malloc...`，请注意我之前添加的星号`array`。您想取消引用`int**`参数以修改*调用者的指针*。

```
(*array) = sieve; 
```

此代码不会复制数组，它**会将临​​时局部变量的地址分配给调用者的指针**。该`sieve`数组在函数结束时超出范围后将不再存在。您想使用`for`循环将内容复制`sieve`到刚刚分配的内存块中。

编辑：

[我看到 Daniel Fischer 已经在 3 小时前在您问题的前一个化身中](https://stackoverflow.com/a/15712791/445976)指出了第二个问题。

# javascript - 从对象列表中创建 javascript 树

> ID：15713878
> 
> 赞同：4
> 
> 时间：2013-03-30T01:25:08.890
> 
> 标签：javascript, tree

我想将对象列表“翻译”为 jstree 可食用的 json 格式：

```
data = [
    { 
        "data" : { 
            "title" : "father",
            "attr" : { "href" : "#" }
        },
        "children" : [
            { 
                "data" : { 
                    "title" : "Older Son",
                    "attr" : { "href" : "#" }
                },
                "children" : []
            },
            { 
                "data" : { 
                    "title" : "Younger Son",
                    "attr" : { "href" : "#" }
                },
                "children" : []
            }
        ]
    },
] 
```

我的输入如下所示：

```
[
Object
id: 35
name: "bnm,bnm"
parent_id: null
, 
Object
id: 36
name: "ghk"
parent_id: 35
, 
Object
id: 37
name: "hgkgh"
parent_id: null
, 
Object
id: 38
name: "jklhjk"
parent_id: null
, 
Object
id: 39
name: "fghdfgh"
parent_id: 38
, 
Object
id: 40
name: "bsdbd"
parent_id: 38
,
...] 
```

好吧，老实说，这不是一棵树，而是一片森林。但这没关系。

我花了很多时间在它上面，但没有让它工作。在 javascript 中对数组进行操作似乎很讨厌（与 Java、C++ 或 PHP 相比）...

到目前为止我尝试过的是：

1.  （pre）源数据（对象列表）满足一个条件：儿子不能在其父之前出现
2.  使它成为关联数组（key=id，value=object），所以它必须是字符串键控的。
3.  弹出最后一个数组元素并将其推入其父元素的子数组中。对所有非空父元素重复此操作。
4.  希望这应该工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T01:31:05.850

您需要首先将所有项目放入由其 ID 索引的稀疏数组中，并翻译除子项（应存在但为空）和包括父项 ID 之外的所有内容：

```
var itemsByID = [];
items.forEach(function(item) {
    itemsByID[item.id] = {
        data: {title: item.name},
        children: [],
        parentID: item.parent_id
    };
}); 
```

然后你会想要遍历所有的项目，将孩子添加到他们的父母中：

```
itemsByID.forEach(function(item) {
    if(item.parentID !== null) {
        itemsByID[item.parentID].children.push(item);
    }
}); 
```

然后找到根：

```
var roots = itemsByID.filter(function(item) { return item.parentID === null; }); 
```

然后通过删除父 ID 来清理项目：

```
itemsByID.forEach(function(item) { delete item.parentID; }); 
```

树的根将在`roots`.

* * *

您的方法不起作用的原因是，如果任何子元素的父元素的 ID 号更大，则父元素将不存在；您已经处理并弹出它。在完成之前，您必须保留数组中的所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T04:51:53.013

也许[unsplay](https://github.com/dbkaplun/unsplay)可以解决问题？

```
>> var unsplay = require('unsplay');
>> unsplay([{id: 0}, {id: 1, pid: 0}], 'id', 'pid');
[{
  item: {id: 0},
  children: [{
    item: {id: 1, pid: 0},
    children: []
  }]
}] 
```

（免责声明：我是作者）

# requirejs - 使用 Require.js 加载 jwplayer.js

> ID：15713887
> 
> 赞同：6
> 
> 时间：2013-03-30T01:26:53.030
> 
> 标签：requirejs, jwplayer

所以，我是 Require.js 的新手，我一直在通过使用 Require.js 方法加载各种其他库来学习这个库。

我已经成功加载了 Knockout.js 对象、Chart.js 对象以及自定义 Require.js 定义的对象。

但我似乎无法使用 Require.js 加载 jwplayer。这是我收到的错误方法： **Uncaught TypeError: Cannot call method 'jwplayer' of undefined**

这是我的示例代码（Knockout、Chart 对象均已成功加载）

```
require(['jwplayer/jwplayer', 'libs/Chart', 'libs/knockout-2.1.0', 'appViewModel','helper/util'], function(jwplayer, chart, ko, appViewModel, util) {

//LOADING FROM jwplayer.js
jwplayer("player").setup({
    width: '320',
    height: '40',
    sources: [{
        file: "rtmp://127.0.0.1:1935/vod/mp3:sample_1.mp3"
    },{
        file: "http://127.0.0.1:1935/vod/sample_1.mp3/playlist.m3u8"
    }]
});

//LOADING FROM Chart.js
var barChartData = {
    labels : ["January","February","March","April","May","June","July"],
    datasets : [
        {
            fillColor : "rgba(220,220,220,0.5)",
            strokeColor : "rgba(220,220,220,1)",
            data : [65,59,90,81,56,55,40]
        },
        {
            fillColor : "rgba(151,187,205,0.5)",
            strokeColor : "rgba(151,187,205,1)",
            data : [28,48,40,19,96,27,100]
        }
    ]   
};
var myLine = new Chart(document.getElementById("canvas").getContext("2d")).Bar(barChartData);

//LOADING FROM knockout-2.1.0.js
ko.applyBindings(new appViewModel());

//LOADING FROM A CUSTOM DEFINED OBJECT
util.greets(); 
    }); 
```

那么如何使用 Require.js 加载 jwplayer.js 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T01:46:54.403

jwplayer.js 没有为 require.js 定义一个模块，所以你将不得不使用[shim config](http://requirejs.org/docs/api.html#config-shim)，如下所示：

```
require.config({
    shim: {
        'jwplayer/jwplayer': {
            exports: 'jwplayer'
        }
    }
}); 
```

你可以在 requirejs api 文档中看到更多关于如何使用它的信息。

Edit: typo in code sample.

Edit 2: it should be noted that jwplayer() will return null if it can't find the player that you pass it, so even if it is loaded correctly, it will still throw that error. If you're getting the error even after including the configuration, try adding something like

```
console.log(jwplayer.api); 
```

in the require callback and check your console to see if there's anything there.

# php - 重定向登录用户

> ID：15713897
> 
> 赞同：0
> 
> 时间：2013-03-30T01:27:54.040
> 
> 标签：php, wordpress, buddypress

我目前正在使用 bp-redirect-to-profile 插件，它完全按照我的意愿工作。但是，一旦用户已经登录并说在新选项卡中打开站点，它就会转到主页。我希望它转到个人资料页面。我在 header.php 中使用此代码，但它不起作用。任何帮助，将不胜感激。我在 header.php 文件中有这段代码。

```
<?php  global $bp; ?>

<?php  wp_redirect($bp->loggedin_user->domain); ?>

<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:38:13.943

尝试这个：

```
wp_redirect(get_author_link( true, get_current_user_id())); 
```

# javascript - 具有屏幕调整大小的 HTML 菜单栏

> ID：15713898
> 
> 赞同：0
> 
> 时间：2013-03-30T01:27:54.667
> 
> 标签：javascript, html, css

我想创建菜单栏

全屏时一切似乎都很好，但当

它的浏览器宽度尺寸小于菜单栏

菜单栏中的内容换行

而不是在带有滚动条的一行中继续

我该怎么办

这是我的html

```
<div class="menuBar">
    <div class="navigate">
         <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Hotel</a></li>
            <li><a href="#">Airfare</a></li>
            <li><a href="#">Package</a></li>
            <li><a href="#">Tour guide</a></li>
            <li><a href="#">Event</a></li>
            <li><a href="#">Contact us</a></li>
         </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:31:48.667

为您的包装器添加`min-width`样式，例如。`ul`

```
.navigate{
   min-width: 800px;
} 
```

# c# - 想要通过将类与其静态成员进行比较来检查类的类型

> ID：15713902
> 
> 赞同：0
> 
> 时间：2013-03-30T01:29:05.557
> 
> 标签：c#, .net

我有一个父类 Command，它有一个 const 名称和一个名为 execute 的虚拟方法；两者都被儿童覆盖。我有一个方法，它接受一个命令列表并返回一个可能修改过的命令列表。

要确定是否应该更改输入命令列表，我需要在更改此列表之前知道列表中每个命令的类型。但问题是我必须使用 new 关键字才能为派生类创建一个与父类同名的静态成员，但我希望能够静态引用命令的名称。

我正在尝试做的示例：

```
public List<Command> ReplacementEffect(List<Command> exChain)
{
    for(int index = 0; index < exChain.Count; index++)
    {
         if(exChain[index].Name == StaticReference.Name)
         {
             //Modify exChain here
         }
    }
    return exChain;
} 
```

使用 exChain[index].GetType() 的问题是我必须实例化另一个该类型的对象，以检查哪个是浪费、耗时且不直观。另外，我必须从 Name 中删除 const 修饰符。

编辑：

```
class Command
{
    public const string Name = "Null";

    public virtual void Execute()
    {
        //Basic implementation
    }
}

class StaticReference : Command
{
    public new const string Name = "StaticRef";

    public override void Execute()
    {
        //New implementation
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:44:20.040

如果您真的不能使用类型比较`exChain[index].GetType() == typeof(StaticReference)`，因为派生类都属于类型`StaticReference`，但您想通过`Name`（未在示例中显示 - 但如果不是这种情况，请改用类型比较）进行区分，您可以使用静态名称的属性，但通过虚拟访问器访问它：

```
class Command
{
    public const string Name = "Null";

    public virtual string CommandName
    {
        get
        {
            return Name;
        }
    }
}

class StaticReference : Command
{
    public new const string Name = "StaticRef";

    public virtual string CommandName
    {
        get
        {
            return Name;
        }
    }
} 
```

用法：

```
 if(exChain[index].CommandName == StaticReference.Name)
     {
         //Modify exChain here
     } 
```

# java - 调用方法 按引用类型

> ID：15713904
> 
> 赞同：-1
> 
> 时间：2013-03-30T01:30:09.330
> 
> 标签：java

在**动物类**的以下代码中，当我删除**ClimbTrees()**方法时，为什么它会生成错误

```
public class Refr1 
{
    public static void main(String[] args) 
    { 
      Animal objChimp = new Chimp();
      objChimp.ClimbTrees();     
    }
}

class Animal
{
    void ClimbTrees()
    {
     System.out.println("I am Animal Which Climb Tree");    
    }
}

class Chimp extends Animal 
{
    void ClimbTrees()
    {
        System.out.println("I am Chimp Which Climb Tree");  
    }
} 
```

如果我删除 Animal 类中的**ClimbTrees()**，它会显示以下错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    The method ClimbTrees() is undefined for the type Animal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:35:48.027

> ```
> when I remove the ClimbTrees() Method why is it generating Error 
> ```

这仅仅是因为使用`objChimp`实例您可以调用`Animal`类中的方法。由于`ClimbTrees()`方法不在`Animal`课堂上，您会收到此错误。

**编辑：** 我认为您正在尝试学习覆盖和多态性。您应该[在此处](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)获得更多详细信息。在您的情况下，以下是正确的。我没有在下面的示例中向您解释 WHY 因素，我将把它留给您研究。

```
// a. You can call only methods/variables is Animal class using objChimp instance
// b. If you are calling overridden methods, the method in Chimp class will be called in run time
Animal objChimp = new Chimp();

// a. You can call methods/variables both in Animal class and Chimp class using objChimp instance
// b. If you are calling overriden methods, the method in Chimp class will be called in runtime
Chimp objChimp = new Chimp(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:37:42.603

This is the error you will get - The method ClimbTrees() is undefined for the type Animal. Why does it happen ?

The compiler checks the static type of objChimp. It is animal. The dynamic type of objChimp is Chimp.

The compiler first checks if there is a method called ClimbTrees() in the static type of objChimp. If it does not find it, then it throws an error. But, when you don't remove the method, the compiler sees the static type and finds ClimbTrees(). Only when it finds that, it will let you compile your code. During run time, its checked if there is also a ClimbTrees() in the dynamic type of objChimp. If found, then execute the ClimbTrees() of chimp and not of animal. If not found, then execute ClimbTrees() of static type of objChimp, that is ClimbTrees() of Animal (comment the climb trees of chimp and see what happens).

Notes -

[http://en.wikipedia.org/wiki/Type_system](http://en.wikipedia.org/wiki/Type_system)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T01:36:06.600

Since your `objChimp` is declared from `Animal` type, you can only use the `Animal` attributes/methods which you have access. If you want to call a specific attribute/method from a child, you should downcast it. This can make your code work (assuming you deleted `ClimbTrees` method from `Animal` class):

```
Animal objChimp = new Chimp();
((Chimp)objChimp).ClimbTrees(); 
```

However, you must be sure you can downcast the class to the specific class. Check [Downcasting in Java](https://stackoverflow.com/q/380813/1065197) for more info.

# c# - C# 会内联这些函数吗？

> ID：15713910
> 
> 赞同：6
> 
> 时间：2013-03-30T01:31:04.223
> 
> 标签：c#, performance, lambda, inline

我正在用 C# 编写一个性能关键的应用程序，核心操作是权重计算。该函数如下所示：

```
public void ForEachWeight(Action<int, int, float> action)
{
    for (int lower = 0; lower < LowerLayerSize; lower++) {
        for (int upper = 0; upper < UpperLayerSize; upper++) {
            action(lower, upper, Weights[(lower * UpperLayerSize) + upper]);
        }
    }
} 
```

它在几十个地方被调用，具有各种简单的功能，例如：

```
if (activationMethod == ActivationMethod.Binary) {
    ForEachWeight((lower, upper, weight) => upperLayer.Values[upper] += weight;
} else {
    ForEachWeight((lower, upper, weight) => upperLayer.Values[upper] += lowerLayer.Values[lower] * weight);
} 
```

所有调用都在同一个类中完成，因此所有变量都可以访问。C# 可以内联这些函数调用吗？我在想例如上面的调用可以内联到这样的东西：

```
if (activationMethod == ActivationMethod.Binary) {
    for (int lower = 0; lower < LowerLayerSize; lower++) {
        for (int upper = 0; upper < UpperLayerSize; upper++) {
            upperLayer.Values[upper] += weight;
        }
    }
} else {
    for (int lower = 0; lower < LowerLayerSize; lower++) {
        for (int upper = 0; upper < UpperLayerSize; upper++) {
            upperLayer.Values[upper] += lowerLayer.Values[lower] * weight);
        }
    }
} 
```

如果不是，则意味着数以万计的额外函数调用，我认为这是一个巨大的开销。如果这甚至可以提高 10% 的速度，那是完全值得的。我无法通过手动内联它们进行比较来轻松进行基准测试，因为我必须重写很多代码。

所以我的问题是 CAN C# 内联这些调用？如果是这样，我怎样才能知道它们是否已被内联？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-30T01:34:30.147

内联发生在 JIT 编译时，因此您需要在运行时检查代码以观察内联。这可以使用调试器完成，但请记住，如果 CLR 检测到存在调试器，则会禁用各种优化，因此您需要在编译方法后附加调试器。

有关如何使用 WinDbg/SOS 找到方法的信息，请参阅[这些](https://stackoverflow.com/a/14841438/38206) [答案。](https://stackoverflow.com/a/12712697/38206)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-30T03:57:33.840

您可以在此属性中使用 MethodImplOptions.AggressiveInlining：http: [//msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimplattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimplattribute.aspx)

# php - 表单操作不起作用，现有地址显示“找不到页面”

> ID：15713914
> 
> 赞同：0
> 
> 时间：2013-03-30T01:31:07.490
> 
> 标签：php

嗨，我正在使用 WP 创建网站，我正在使用以下代码

```
 <?php
        while ($set1 = mysqli_fetch_array($drink))
            {
            echo "<form action = 'check-out-process' method = 'post'>Product: ".$set1['P_name']."     ";
            echo "In Stock: ".$set1['P_qty']."<br/><br/>";
            echo '<input type = "hidden" name = "id" value = "' .$set1['P_id']. '">';
            echo '<input type = "hidden" name = "name" value = "' .$set1['P_name']. '">';
            echo "Quantity: <input type='text' name='qty'><br/><input type = 'submit' value = 'SUBMIT'/></form>";
            }
        ?> 
```

我在这个页面下创建了一个子页面，使用 url “/check-out-process”。

问题是，当我点击提交时，它总是变成“找不到页面”。只有在我在 url 之后添加一个“/”之后，它才会打开结帐过程页面。

有人可以告诉我如何解决吗？

## 我只是想通了，我不应该使用 name = "name"

谢谢大家帮忙，解决了:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:40:56.623

```
.. echo "<form action = 'check-out-process/check-out-process.php' ... 
```

action 属性必须引用文件，而不是文件夹。

# ruby-on-rails - 服务于开发中的资产的机架错误（不是即时编译）

> ID：15713919
> 
> 赞同：6
> 
> 时间：2013-03-30T01:32:10.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, rack

服务资产今天已开始创建此错误：

```
!! Rack application returned nil body. Probably you wanted it to be an empty string?
!! Unexpected error while processing request: undefined method `each' for nil:NilClass 
```

我正在使用咖啡脚本和 SCSS（application.js.coffee 和 application.css.scss）

来自 Gemfile：

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'compass-rails'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'marionette-rails'
  gem 'uglifier', '>= 1.0.3'
end 
```

使用 ruby​​ 1.9.3-p392 和 1.9.3-p125 会导致此问题。此错误的 Google 结果几乎不存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T18:29:38.533

威尔上面的回答在一个案例中为我解决了这个问题，但是我在另一个项目中再次遇到了这个问题，并发现两者之间存在相似之处。

开发中的缓存会导致此问题，`development.rb`只需添加/更新以下行并重新启动应用程序：

`config.action_controller.perform_caching = false`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T17:52:13.600

这几天我遇到了同样的问题。我相信这个问题是由最新版本的 rails 和旧 gem 之间的冲突引起的。更新你的 gem 应该可以解决这个问题（它对我有用）。

# macos - 在 OS X 10.8 中为别名创建 AppleEvent 描述符

> ID：15713924
> 
> 赞同：2
> 
> 时间：2013-03-30T01:33:04.893
> 
> 标签：macos, applescript, appleevents, nsappleeventmanager

我在项目中有以下代码

```
NSAppleEventDescriptor *JHCreateAliasDescriptorForURL(NSURL *aURL) {
    NSAppleEventDescriptor *retObj = nil;
    FSRef fsReference;

    if (CFURLGetFSRef((__bridge CFURLRef)aURL, &fsReference)) {
        AliasHandle aliasHandle = NULL;
        OSStatus err = FSNewAliasMinimal(&fsReference, &aliasHandle);
        if (err == noErr && aliasHandle != NULL) {

            HLock((Handle)aliasHandle);
            retObj = [NSAppleEventDescriptor descriptorWithDescriptorType:typeAlias
                            data:[NSData dataWithBytes:*aliasHandle
                                                length:GetHandleSize((Handle)aliasHandle)]];
            HUnlock((Handle)aliasHandle);
            DisposeHandle((Handle)aliasHandle);
        }
    }

    return retObj;
} 
```

它创建一个别名描述符，该描述符将文件传递给一个*不是*applescriptable 但响应这个AppleEvent 的程序。

当我在 10.8 下编译它时，我收到警告，因为所有 Carbon`FSNewAlias*`函数都已弃用，我们应该使用API`NSData`之外的不透明书签对象。`NSURL`但是，我没有运气将此数据转换为别名 AppleEvent 描述符。

如何`typeAlias`在没有 10.8 的情况下制作描述符`FSNewAlias*`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T22:00:30.987

You basically can’t. (The modern replacement for Alias is CFURLBookmark. There’s a routine to create a Bookmark from Alias data, but not the other way around.) What you *can* do, however, is create a different kind of file descriptor which is coercible to an alias -- the most straightforward is `typeFileURL`, where the contents are simply the bytes of the URL. This is admittedly dependent on the target application being written properly, but it should work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T06:47:45.097

In case anyone else is looking for a more direct solution, something like this works well to create a Apple Event descriptor from bookmark data:

```
+ (NSAppleEventDescriptor *)descriptorWithBookmarkDataForFileURL:(NSURL *)fileURL {
    NSData *targetBookmarkData = [fileURL bookmarkDataWithOptions:0 includingResourceValuesForKeys:nil relativeToURL:nil error:nil];
    return [NSAppleEventDescriptor descriptorWithDescriptorType:typeBookmarkData data:targetBookmarkData];
} 
```

# regex - 如何匹配问号“？” 作为 nginx.conf 位置上的正则表达式

> ID：15713934
> 
> 赞同：21
> 
> 时间：2013-03-30T01:35:09.497
> 
> 标签：regex, nginx

我想匹配问号“？” 作为 nginx.conf 位置上的正则表达式。

例如，我想匹配的 URL 模式是 /something?foo=5 或 /something?bar=8 （参数只能更改）。

因为 nginx 采用[RCPE](http://wiki.nginx.org/InstallOptions#Notes)，所以我可以在 nginx.conf 上写下位置如下：

```
location ~ ^/something\?.* {
} 
```

以上与 URL 模式不匹配。我怎样才能做到这一点？

另外，以下不是我的期望。

```
location ~ ^/something?.* {
} 
```

它会匹配我没想到的 /something_foo_bar_buzz。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-30T02:56:04.233

nginx[位置块根本不匹配查询字符串](http://nginx.org/en/docs/http/request_processing.html)。所以这是不可能的。

> 地点
> 
> 该指令允许根据 URI 进行不同的配置。

在 nginx 中，有一个内置变量[$uri](https://nginx.org/en/docs/http/ngx_http_core_module.html#var_uri)，位置块与之匹配。例如，给一个请求

```
http://www.example.com/app/login.php?username=xyz&password=secret 
```

$uri 值是这个字符串：

```
 /app/login.php 
```

并且 query_string 存储在 nginx 变量 [$args](http://nginx.org/en/docs/http/ngx_http_core_module.html#var_args)中：

```
username=xyz&password=secret 
```

做某事。查询字符串，你可以做类似的事情

```
if ($args ~ username=xyz) {
   # do something for requests with this query string
} 
```

但要小心，[如果是邪恶的](http://wiki.nginx.org/IfIsEvil)

# javascript - 在闭包之外访问变量

> ID：15713935
> 
> 赞同：1
> 
> 时间：2013-03-30T01:35:20.570
> 
> 标签：javascript, oop

```
var MyClass = (function () {

    var _data;

    var cls = function () { };

    cls.prototype = {

        init: function(data){
            _data = data;
        }
    };

    cls.foo = _data;
    cls.bar = 1;

    return cls;
})();

var someData = { foo: true };

var cls = new MyClass();
cls.init(someData);

console.log(MyClass.foo); //undefined
console.log(MyClass.bar); //1 
```

为什么不在`MyClass.foo`这里设置？它是在`init()`我在它上面运行的方法中设置的。因此它应该返回`{ foo: true }`。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T01:37:28.650

`cls.foo = _data;`不会别名`cls.foo`为`_data`. 它只是复制`_data`的值，在执行该行时是`undefined`。

要么设置`cls.foo`在内部`init`，要么（更好地）使`cls.foo`动态，如`function() { return _data; }`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:44:14.220

我相信这就是你想要的：

```
function MyClass() { }

MyClass.prototype.init = function (data) {
    MyClass.foo = data;
};

MyClass.bar = 1; 
```

现在它将按预期工作：

```
var someData = { foo: true };

var cls = new MyClass;
cls.init(someData);

console.log(MyClass.foo);
console.log(MyClass.bar); 
```

在此处查看演示：http: [//jsfiddle.net/gTDZk/](http://jsfiddle.net/gTDZk/)

# jquery - 为什么magento的scriptaculous安装中的effects.js与Mike Tuupola的延迟加载jquery插件冲突

> ID：15713936
> 
> 赞同：1
> 
> 时间：2013-03-30T01:35:22.540
> 
> 标签：jquery, magento, lazy-loading, prototype, scriptaculous

我已经覆盖了基本默认的 page.xml，包括：jquery 延迟加载插件作为 head 部分中的第一个 jquery 脚本。然后紧接着，我有一个 no_conflict.js 只包含：

```
var $jq191= jQuery.noConflict(); 
```

然后 page.xml 拥有所有其他的 javascript 框架，如原型和 effects.js、dragdrop.js 等。

现在我最初是在没有 magento 的情况下实现了我的网站，并使用了延迟加载插件。使用延迟加载插件，我在图像加载时添加了淡入淡出效果。没有magento它工作正常，一旦我添加了magento，当图像淡入时会出现可怕的闪烁，这只发生在谷歌浏览器中。因为我知道magento会发生这种情况，所以我一一删除了magento中包含的脚本，发现一旦我删除了effects.js，问题就解决了。

Effects.js 有很多要吞咽的东西，而且我是 jquery/javascript 的新手，所以我想知道是否有人可以对这个问题有所了解。任何帮助将不胜感激。谢谢你。

来自 page.xml：

```
<block type="page/html_head" name="head" as="head">
            <action method="addJs"><script>jquery/jquery-1.9.1.min.js</script></action>
            <action method="addJs"><script>jquery/no_conflict.js</script></action>
            <action method="addJs"><script>prototype/prototype.js</script></action>
            <action method="addJs"><script>lib/ccard.js</script></action>
            <action method="addJs"><script>prototype/validation.js</script></action>
            <action method="addJs"><script>scriptaculous/builder.js</script></action>
            <action method="addJs"><script>scriptaculous/effects.js</script></action>
            <action method="addJs"><script>scriptaculous/dragdrop.js</script></action>
            <action method="addJs"><script>scriptaculous/controls.js</script></action>
            <action method="addJs"><script>scriptaculous/slider.js</script></action>
            <action method="addJs"><script>varien/js.js</script></action>
            <action method="addJs"><script>varien/form.js</script></action>
            <action method="addJs"><script>varien/menu.js</script></action>
            <action method="addJs"><script>mage/translate.js</script></action>
            <action method="addJs"><script>mage/cookies.js</script></action>

            <block type="page/js_cookie" name="js_cookies" template="page/js/cookie.phtml"/>

            <action method="addCss"><stylesheet>css/styles.css</stylesheet></action>
            <action method="addItem"><type>skin_css</type><name>css/styles-ie.css</name><params/><if>lt IE 8</if></action>
            <action method="addCss"><stylesheet>css/widgets.css</stylesheet></action>
            <action method="addCss"><stylesheet>css/print.css</stylesheet><params>media="print"</params></action>

            <action method="addItem"><type>js</type><name>lib/ds-sleight.js</name><params/><if>lt IE 7</if></action>
            <action method="addItem"><type>skin_js</type><name>js/ie6.js</name><params/><if>lt IE 7</if></action>
        </block> 
```

来自 no_conflict.js：

```
var $jq191= jQuery.noConflict(); 
```

来自 local.xml：

```
<?xml version="1.0"?>
    <layout>
    <default>
    <reference name="head">
        <action method="addItem">
            <type>skin_js</type>
            <name>js/jquery.lazyload.js</name>
        </action>
        <action method="addItem">
            <type>skin_js</type>
            <name>js/loadlazy.js</name>
        </action>
        <action method="addItem">
            <type>skin_js</type>
            <name>js/vendor/bootstrap.min.js</name>
        </action>
        <action method="addItem">
            <type>skin_js</type>
            <name>js/jquery.fancybox.pack.js</name>
        </action>
        <action method="addItem">
            <type>skin_js</type>
            <name>js/jquery.fancybox-media.js</name>
        </action>
        <action method="addItem">
            <type>skin_js</type>
            <name>js/vendor/modernizr-2.6.2-respond-1.1.0.min.js</name>
        </action>
        <action method="addCss"><stylesheet>css/jquery.fancybox.css</stylesheet></action>
    </reference>
    </default>
    </layout> 
```

来自 loadlazy.js：

```
$jq191(document).ready( function( evt ){

$jq191("img.lazy").lazyload({effect: "fadeIn"});
$jq191(".product-popup").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none',
    type: 'iframe',
    helpers : { overlay : { locked : false,
                 } }
});
}); 
```

来自附件.phtml：

只是在 img 标签上将 class 设置为“lazy”：

```
 <img style="display: block; position:absolute; top: 50%; left:50%; 
                                                            margin-left:<?php echo strval(-1*intval( $this->helper('catalog/image')->init($_product, 'image')->getOriginalWidth())/2); ?>px; 
                                                            margin-top:<?php echo strval(-1*intval($this->helper('catalog/image')->init($_product, 'image')->getOriginalHeight())/2); ?>px" 
                                                            class="lazy" id="lazy.images#<?php echo $_iterator; ?>"
                                                            src="<?php echo $this->getSkinUrl("img/product-placeholder.png"); ?>"
                                                            data-original="<?php echo $this->helper('catalog/image')->init($_product, 'image'); ?>" 
                                                            height="<?php echo $this->helper('catalog/image')->init($_product, 'image')->getOriginalHeight(); ?>" 
                                                            width="<?php echo $this->helper('catalog/image')->init($_product, 'image')->getOriginalWidth(); ?>" 
                                                            alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'image'), null, true); ?>" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:16:59.087

好的，这就是问题所在-我将为您提供一些解决问题的方法

```
jquery.lazyload.js 
```

触发一个名为“出现”的事件 - 由于 jQuery`trigger()`方法的编写方式，它会尝试触发元素上的方法并触发事件。Scriptaculous 中的 Effects 方法`appear()`向 Element 原型添加了一个方法。Scriptaculous`appear()`和lazyload 一样在触发，`fadeIn()`当两种方法同时尝试更改元素的不透明度时，您会出现闪烁。

**轻松修复**

在您的 effects.js 副本中，最后一行是

```
Element.addMethods(Effect.Methods); 
```

If you remove that line it will remove the Scriptaculous Effects methods from the Element prototype and should fix the immediate problem. However if any other plugins are depending on the Effects methods on the Element prototype they will start failing. But if you are using those methods you can change them over to use the anonymous methods. ie

```
$('myelement').appear();
// changes to
Effect.Appear('myelement'); 
```

**Hard Fix**

In your copy of

```
jquery.lazyload.js 
```

Look for the "appear" trigger and `observe()`/`on()` of the appear event and change the event name to something else - this will require more debugging as it might not work the first time. Also make sure you find all of the instances so everything is changed.

# uitableview - UiButton 在 Utableviewcell 内部或外部

> ID：15713942
> 
> 赞同：0
> 
> 时间：2013-03-30T01:35:57.810
> 
> 标签：uitableview

我正在开发像 Facebook 这样的 iOS 应用程序登录屏幕。一切正常我使用原型单元格作为用户名和密码，但是我希望您对登录按钮提出建议。

我在 uitablevjew 中添加了第二部分来按住按钮。我能够连接动作，但如果我通过查看 facebook 应用程序按钮没有错的话，他们有一个非常适合单元格的背景图像。这种方法与仅将图像放在外面有什么区别？他们这样做是为了在编辑开始时轻松移动单元格吗？

请指教

# c# - 在另一个程序上方显示叠加层

> ID：15713943
> 
> 赞同：3
> 
> 时间：2013-03-30T01:35:59.113
> 
> 标签：c#

我有一个程序可以在第三方应用程序中显示一些附加信息。最初，第三方应用程序有一个简单的 API，可以让我创建文本对象；但它已在版本更新中被删除。使用旧版本不是一种选择。

是否有捷径可寻？我基本上只想要几行相对于主窗口定位的易于更新的文本，具有透明背景，与主窗口一起最小化，并且不干扰主窗口对击键或鼠标的处理。

抱歉，如果这不是问这个问题的合适地方，我确实搜索了该网站，但我找不到任何似乎适合我需要的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T06:12:18.287

没有一种简单的方法可以做到这一点，主要是因为每个进程都在自己的内存空间中运行。但是，您可以“伪造”它。您需要做的第一件事是找到窗口的句柄：

```
Process[] processes = Process.GetProcessesByName("appName");

Process p = processes.FirstOrDefault();
IntPtr windowHandle;
if (p != null)
{
    windowHandle = p.MainWindowHandle;
} 
```

现在，一旦你有了句柄，你就可以得到窗口所在的屏幕区域：

```
[DllImport("user32.dll", SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetWindowRect(IntPtr hWnd, ref RECT lpRect);
[StructLayout(LayoutKind.Sequential)]
private struct RECT
{
    public int Left;
    public int Top;
    public int Right;
    public int Bottom;
}

RECT rect = new RECT();
GetWindowRect(windowHandle, ref rect); 
```

这将为您提供窗口的位置。需要注意的一件事是，如果在运行此应用程序时将应用程序最小化，您将获得诸如 -32000 之类的值。如果您有兴趣了解原因，可以[阅读此内容](https://devblogs.microsoft.com/oldnewthing/20041028-00/?p=37453)。现在您有了窗口的位置，在您的应用程序中，您可以将应用程序的窗体调整为与其他应用程序相同的大小，并将其放置在应用程序上：

```
this.Location = new Point(rect.Left, rect.Top);
this.Size = new Size(rect.Right - rect.Left, rect.Bottom - rect.Top); 
```

现在，您的应用程序直接位于另一个应用程序之上，并调整为与另一个应用程序相同的大小。最后，您需要使您的应用程序“透明”：

```
this.BackColor = Color.LimeGreen;
this.TransparencyKey = Color.LimeGreen;
this.FormBorderStyle = FormBorderStyle.None; 
```

这应该可以，虽然我没有测试过。您可以在表单中添加您可能需要的任何文本框或标签，它将“覆盖”应用程序。希望这对你有用！

# angularjs - In AngularJS how to get the new index of an array element after sorting?

> ID：15713946
> 
> 赞同：1
> 
> 时间：2013-03-30T01:36:18.520
> 
> 标签：angularjs, angularjs-ng-repeat, angularjs-orderby

This snippet shows my problem nicely:

[JSfiddle - sorting table](http://jsfiddle.net/wEBnX/)

Important parts:

```
<tr ng-repeat="result in results | orderBy:predicate" ng-class="classRow($index)">

$scope.classRow = function(i) {
    return $scope.results[i].size > 9000 ? 'highlight' : '';
} 
```

As you can see, the index always goes from 0 to 6 even when re-sorting the array, so the highlight doesn't move with the item.

How can I get the highlight to stick to the item it's originally at?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:48:00.080

You could also do this inline, so there's no need for controller code:

```
ng-class="{ highlight: result.size > 9000 }" 
```

Working example: [http://jsfiddle.net/wEBnX/2/](http://jsfiddle.net/wEBnX/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:42:15.453

Rather than working off of an index, pass in the size property directly to `classRow()`.

```
<tr ng-repeat="result in results | orderBy:predicate" ng-class="classRow(result.size)">

$scope.classRow = function(size) {
    return size > 9000 ? 'highlight' : '';
} 
```

Working example: [http://jsfiddle.net/WqbNS/](http://jsfiddle.net/WqbNS/)

# symfony1 - sfGuard 令牌登录在 Symfony 1 中不起作用

> ID：15713947
> 
> 赞同：0
> 
> 时间：2013-03-30T01:36:20.513
> 
> 标签：symfony1, sfguard

我在`sfGuard`使用 Symfony 应用程序获取令牌登录时遇到问题。Symfony 应用程序通过 WordPress 插件访问。WordPress 插件很简单，它`iframe`在 WP 控制面板中嵌入了带有令牌字符串的 a：

```
<iframe src="/app/index.php/api/authenticate/**token**" width="100%" height="100%"> 
```

这在实时服务器上运行良好。在挖掘了我的错误日志后，我发现了这个：

```
PDO Connection Error: SQLSTATE[28000] [1045] Access denied for user 'db_user'@'localhost' (using password: YES), referer: http://****/wp-admin/admin.php?page=custom-sms.php 
PHP Fatal error: Call to a member function prepare() on a non-object in /var/www/vhosts/domain.com/sfapp/lib/vendor/symfony/lib/storage/sfPDOSessionStorage.class.php on line 162, referer: http://****/wp-admin/admin.php?page=custom-sms.php 
```

奇怪的是，虽然我能够在网站前端写入/连接到数据库。什么可能导致应用程序不使用`database.yml`配置文件中设置的数据库用户名和密码？

`app.yml`文件：

```
all:
  security:
    #to auto-login to the SMS alert system from inside Wordpress admin
    token: **token**
    username: user@web.com 
```

顺便说一句，我以前从未使用过 Symfony，而且我继承了这个网站，没有任何文档。

## 更新

`database.yml`文件：

```
# You can find more information about this file on the symfony website:
# http://www.symfony-project.org/reference/1_4/en/07-Databases

all:
  doctrine:
    class: sfDoctrineDatabase
    param:
      dsn:      mysql:host=localhost;dbname=db_name
      username: **username**
      password: **password** 
```

## 第二次更新：

要添加，我手动将`$env`变量设置为在新服务器上`prod`进行测试。`/web/index.php`

`factories.yml`文件：

```
# You can find more information about this file on the symfony website:
# http://www.symfony-project.org/reference/1_4/en/05-Factories

prod:
  logger:
    class: sfAggregateLogger
    param:
      level: err
      loggers:
        sf_file_debug:
          class: sfFileLogger
          param:
            level: err
            file: %SF_LOG_DIR%/%SF_APP%_%SF_ENVIRONMENT%.log

staging:
  logger:
    class: sfAggregateLogger
    param:
      level: notice
      loggers:
        sf_file_debug:
          class: sfFileLogger
          param:
            level: notice
            file: %SF_LOG_DIR%/%SF_APP%_%SF_ENVIRONMENT%.log

test:
  storage:
    class: sfSessionTestStorage
    param:
      session_path: %SF_TEST_CACHE_DIR%/sessions

  response:
    class: sfWebResponse
    param:
      send_http_headers: false

  mailer:
    param:
      delivery_strategy: none

all:
  routing:
    class: sfPatternRouting
    param:
      generate_shortest_url:            true
      extra_parameters_as_query_string: true

  view_cache_manager:
    class: sfViewCacheManager
    param:
      cache_key_use_vary_headers: true
      cache_key_use_host_name:    true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:12:37.153

得到它的工作。所有的功劳都归于@j0k 的指针。

在新服务器上设置期间，我在会话存储中遇到了一些错误，因此我将存储类类型更改`[app]/config/factories.yml`为`sfNoStorage`. 恢复为`sfPDOSessionStorage`允许令牌登录工作。

```
all:
  storage:
    #http://www.designdisclosure.com/2009/11/symfony-doctrine-database-session-storage/
    class: sfPDOSessionStorage
    param:
      session_name: ugro
      database: doctrine
      db_table: session
      db_id_col: sess_id
      db_data_col: sess_data
      db_time_col: sess_time 
```

# r - 如何在R中绘制图形？

> ID：15713951
> 
> 赞同：0
> 
> 时间：2013-03-30T01:37:02.943
> 
> 标签：r

我可以使用以下代码获取 photo11，如何修复我的代码以将 photo1 更改为 photo2？

```
x = seq(0.5, 0.9, length = 200)
y = dnorm(x,0.7,0.0458)
plot(x, y,type="l",xlab="my_x_lab") 
```

这是一张照片1.jpg ![在此处输入图像描述](../Images/eb67ffab17170217d37b3e61be89973d.png)

这是一张照片2.jpg ![在此处输入图像描述](../Images/d1dd47e3b634c60a00139dac6ecd12ed.png)

以及，如何修复我的代码以将 photo2.jpg 更改为 photo3.jpg？x_lab 中
只有两个比例（0.7,0.8）。
这是一张照片3.jpg
![在此处输入图像描述](../Images/0635a971a5dc2ea736dd6098194474dd.png)

修复代码以摆脱`y` y_lab 将 photo3.jpg 更改为 photo4.jpg？这是一个photo4.jpg。 ![在此处输入图像描述](../Images/e83fb0c36746a807bc2966a6fef31e86.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T01:55:54.857

这会做到的。`xaxt='n', ann=FALSE`删除 x 轴和注释。`axis(...)`仅将 x 轴置于指定点。`mtext()`将边缘文本放在底部轴上。

```
x <- seq(0.5, 0.9, length = 200)
y <- dnorm(x,0.7,0.0458)
plot(x, y, type="l", xaxt='n', ann=FALSE)
axis(1, at=c(0.7, 0.8))
mtext("my_x_lab", 1, at=0.9, line=2) 
```

![例子](../Images/7987072728c34ee8dbd273e2bd7be30b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:52:31.640

抑制 x 轴并为不需要的标签添加空白。

```
plot(x, y, type="l",  yaxt="n",ann=FALSE,bty="n", xaxt="n")
axis(1, at=c(0.5, 0.6, 0.7, 0.8, 0.9), labels=c("", "", 0.7, 0.8, 0.9) )
mtext("Proportions", 1, at=0.9, line=2) 
```

![在此处输入图像描述](../Images/b449cf71b1e93e2e90c8dcaec4a4c270.png)

如果您坚持省略左侧的刻度，这将更加困难，因为基线只会从第一个刻度延伸。

除了这个答案比我的好。

[如何在R中绘制图形？](https://stackoverflow.com/questions/15713951/how-to-draw-the-graph-in-r)

我想这意味着这是家庭作业？哦，不，这是同一张海报……你发布了重复的问题？糟糕的海报，糟糕的海报。你太无耻了。

# d3.js - d3 ordinal x-axis, change label order and shift data position

> ID：15713955
> 
> 赞同：1
> 
> 时间：2013-03-30T01:37:33.230
> 
> 标签：d3.js, scale, ordinal

I have been working on a visualization and have it working fine scaling the x-axis linearly (`d3.scale.linear()`), but the x-axis is really ordinal and so I am now going back and trying to switch to using `d3.scale.ordinal()`.

The visualization is here [http://bl.ocks.org/natemiller/raw/f9aa776243c9035f75b2/](http://bl.ocks.org/natemiller/raw/f9aa776243c9035f75b2/)

I've made some progress, but I have two issues that I haven't solved yet.

1.  I would like to specify the order of the values on the x-axis. Currently the values are numbers (1,2,3..) so currently I would like them to be in ascending order, but later I will use more informative labels and would like to be able to specify their order as well.

2.  The data points don't line up with the x-axis labels and I'm not sure why. I think I might need to translate the data so it lines up, but I'm not sure if that's correct. I'm specifying the x-axis range as rangeBands and using that to set the circle positions, but obviously there is some error in this specification.

Thanks for any help.

PS: this is a different issue, but I'm wondering if there is a means of randomly, introducing a very small "jitter" to the circles so they overlay each other less. This is sometimes done in static plots and might be an interesting addition to this visualization. Or it could make it messy.

Nate

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T12:27:29.910

The order of values for ordinal scales is the order in which you give them to `.domain()`. That is, simply pass the order you want to `.domain()` and it should just work.

The problem you're having with the circles and labels lining up is because you're not taking the size of the range bands into account. That is, the circles will be positioned at the start of a range band and the labels at the center. The code for setting the x coordinates should be something like

```
.attr("cx", function (d) { return x(d[axes.xAxis]) + x.rangeBand()/2; }) 
```

Also note that you might want to sort the numbers passed to `x.domain()` -- currently the last value is less than the value before that.

Regarding the "jitter", one easy way of doing that is to add a small random number to the coordinates of the circle. There's no explicit support for that in d3, but it's straightforward to implement.

# r - 匹配附近时间段的数字模式

> ID：15713960
> 
> 赞同：1
> 
> 时间：2013-03-30T01:38:25.747
> 
> 标签：r, xts, quantmod

我想`R`结合使用`quantmod`来生成基于烛台图表模式的交易信号。我的计划是编写一个用户定义的函数，它根据 OHLC 数据计算每个时间段的信号。到目前为止，我所拥有的是：

```
getSymbols("IBM", src="google")
candle = function(data, ...)
{
    if (abs(Op(data)-Cl(data)) < (Op(data)*0.0005))
        doji = "doji"
    else
        doji = "non-doji"   
    return(doji)
}
apply.daily(IBM, FUN=candle) 
```

此函数返回 xts 对象中每一天的值。现在我想在函数`candle`中添加一些基于上一个或下一个值的计算。如何访问相邻的值？

`data`我在函数中拥有的对象`candle`似乎只有一行（至少这是我调用时得到的`nrow`）。我尝试使用`lag`但我总是得到`NA`（大概是因为我的 xts 对象只有一行长）。

任何帮助，将不胜感激。此外，我很高兴在哪里可以了解更多关于 quantmod 的指针。网站上似乎暗示了某种工作流程，但我找不到真正的文档。

**编辑：**

我想澄清我的实际目标：

我将采用细粒度的 OHLC 数据并将其聚合到某个时间段（例如每小时）。因此，每一小时代表烛台图表中的一根烛台。

现在我正在通过这些数据点寻找特定的模式（例如，如果一根具有 x 属性的蜡烛棒后面跟着两个相同的蜡烛棒，然后是一根具有 y 属性的蜡烛棒）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:56:24.987

`apply.daily`旨在用于日内数据。它按天拆分数据并将函数应用于每一天。由于您有每日数据，因此每天只有一行数据。

对于您到目前为止所显示的内容，无需使用`apply.daily`.

```
data(sample_matrix)
dat <- as.xts(sample_matrix)

# Create an object with the same index as dat, and fill with "non-doji"
doji <- xts(rep("non-doji", nrow(dat)), index(dat))
# now, anywhere your condition is true, replace "non-doji" with "doji"
# This takes advantage of the vectorized nature of R
doji[abs(Op(dat) - Cl(dat)) < (Op(dat) * 0.0005)] <- "doji"
tail(doji)
#           [,1]      
#2007-06-25 "non-doji"
#2007-06-26 "non-doji"
#2007-06-27 "doji"    
#2007-06-28 "non-doji"
#2007-06-29 "non-doji"
#2007-06-30 "non-doji" 
```

虽然，我可能只是添加另一个名为“doji”的列，`dat`并在满足您的条件时给它一个值，否则为零。（请注意，xts 对象的所有数据必须属于同一类型）。

```
dat$doji <- 0 # create a column called "doji" and fill it with zeros
# now set "doji" to 1 anywhere your condition is true
dat$doji[abs(Op(dat) - Cl(dat)) < (Op(dat) * 0.0005)] <- 1

R> tail(dat)
               Open     High      Low    Close doji
2007-06-25 47.20471 47.42772 47.13405 47.42772    0
2007-06-26 47.44300 47.61611 47.44300 47.61611    0
2007-06-27 47.62323 47.71673 47.60015 47.62769    1
2007-06-28 47.67604 47.70460 47.57241 47.60716    0
2007-06-29 47.63629 47.77563 47.61733 47.66471    0
2007-06-30 47.67468 47.94127 47.67468 47.76719    0 
```

# php - Zend 框架 2：从 headMeta() 视图助手中清除一些元参数？

> ID：15713964
> 
> 赞同：0
> 
> 时间：2013-03-30T01:39:12.083
> 
> 标签：php, zend-framework2

我在 Module.php 中设置了几个默认元参数：

```
$hm =  $serviceManager->get('ViewHelperManager')->get('headMeta');
$hm
  ->appendProperty('og:image', '/images/opengraph/1.jpg')
  ->appendProperty('og:image', '/images/opengraph/2.png'); 
```

稍后在某些操作中，我需要覆盖这些元参数并设置一些其他图像。我不知道如何清除这些现有的 'og:image' 参数......我试过了：

```
$hm->appendProperty('og:image', null);
//and
$hm->unsetProperty('og:image'); 
```

但没有一个奏效。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T02:30:21.803

那是因为 append 方法不会在已经定义的图像上添加 og:image。append 方法会将下一个 og:image 附加到已经定义的 og:image 中，最终得到一个数组。同样，如果您选择 prepend，这会将您的新 og:image 标签添加到您已经定义的标签之前。

我认为您真正想要的是最初设置属性，而不是附加它。

```
$hm =  $serviceManager->get('ViewHelperManager')->get('headMeta');
$hm->setProperty('og:image', '/images/opengraph/1.jpg'); 
```

然后稍后：

```
$hm->setProperty('og:image', '/images/opengraph/2.jpg'); 
```

甚至更晚：

```
$hm->setProperty('og:image', '/images/opengraph/2.jpg'); 
```

If you absolutely want to blow away the list, as a last resort you can see this link: [Zend Framework: Clearing/Resetting HeadLink, HeadMeta, HeadScript, HeadStyle and HeadTitle](http://turboflash.wordpress.com/2009/02/07/zend-framework-clearing-resetting-headlink-headmeta-headscript-headstyle-and-headtitle/) based on ZF1 but looking at the ZF2 code appears to be the same.

Perhaps a better solution to the overall challenge is not eagerly set the og:image's in the module, but to always set them as late as possible so you are not in this situation.

# c++ - 的左边 。必须有类/结构/联合

> ID：15713966
> 
> 赞同：1
> 
> 时间：2013-03-30T01:39:19.963
> 
> 标签：c++, file, undefined, ifstream, istream

我正在尝试将着色器文件加载器放入我的程序中。我正在从“加载着色器”部分下的[http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/loading.php复制代码。](http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/loading.php)我在下面有一个更简化的非工作版本。

我已经检查过我是否包含了网站示例中包含的所有 ifstream 头文件，但出现以下错误：

```
error C2027: use of undefined type 'std::basic_ifstream<_Elem,_Traits>'
error C2228: left of '.good' must have class/struct/union 
```

我的头文件看起来像这样

```
#pragma once
#include <iostream>     // std::cout, std::ios
#include <sstream>      // std::stringstream
#include <istream>

using namespace std;

class ShaderHandler
{
public:
    ShaderHandler(void);
    virtual ~ShaderHandler(void);
    unsigned long getFileLength(ifstream& sfile);
}; 
```

源代码如下所示：

```
#include "StdAfx.h"
#include "ShaderHandler.h"
#include <Windows.h>
#include <GL/gl.h>

ShaderHandler::ShaderHandler(void)
{
}
ShaderHandler::~ShaderHandler(void)
{
}

unsigned long ShaderHandler::getFileLength(ifstream& sfile){
    if( !( sfile.good() ) ){
        return 0;
    }

    return 0;
} 
```

The errors occur in the source file on "sfile.good()". I'm not sure about the first error, because I don't understand how I am using the undefined type. I thought it should just be using ifstream. I don't see a header file I can include for "basic_istream". According to [http://en.cppreference.com/w/cpp/io/basic_istream](http://en.cppreference.com/w/cpp/io/basic_istream), it should be in the header for istream, which I've included.

For the second error, I've looked at some similar questions and tried using "->". I found another common problem was that a variable might have accidentally been declared as a function, but I don't think it's that either. How can I fix these errors, and what is causing them?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:41:31.077

`std::ifstream` is in the `fstream` header which you have not included. Add `#include <fstream>` to your header or source file.

# html - 如何让第二行文本在悬停时隐藏和显示？仅 CSS

> ID：15713967
> 
> 赞同：0
> 
> 时间：2013-03-30T01:39:23.470
> 
> 标签：html, css

我尝试使用 text-indent 但这仅适用于第一行，如果我使用边距，则文本根本不显示，我还能如何让文本在悬停时显示？这是代码

HTML：

```
<img src=""  width="270" height="182"/>

<figcaption>
 <ul>
  <div style="top:0px; left:0px;width=270 height=182">

  <a href="">Title</a><BR>
  <a href="">Item 1</a><BR>
  <a href="">Item 2</a><BR>
  <a href="">Item 3</a><BR>
  <a href="">Item 4</a>
  </div>

 </ul>

</figcaption> 
```

CSS：

```
.annotated{
position:relative;
}

.annotated img{ 
display:block;
}

.annotated ul{ 
list-style:none;
position:absolute; 
top:0;
right:0;
bottom:0;
left:0;
}

.annotated div{
display:block;
padding:0 5px;
width:270px; 
line-height:15px;
position:absolute;
text-indent:-99999px; 
cursor:default;
}

.annotated div:hover { 
background:#fff;
background:rgba(255,255,255,0.75);
z-index:2; 
width:260px;
text-indent:0;

-webkit-box-shadow:0 0 5px rgba(0,0,0,0.25);
   -moz-box-shadow:0 0 5px rgba(0,0,0,0.25);
       box-shadow:0 0 5px rgba(0,0,0,0.25);
} 
```

[这](http://jsfiddle.net/bKejV/1/)是一个小提琴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T02:08:20.790

如果您只想隐藏整个标题，直到用户将鼠标悬停在图形上，请使用：

```
.annotated figcaption {
    display: none;
}

.annotated:hover figcaption {
    display: block;
} 
```

如果您希望始终显示标题，并且仅在悬停时显示其他链接，请使用：

```
.annotated figcaption a {
    display: none;
}

.annotated figcaption a:first-child {
    display: inline;
}

.annotated:hover figcaption a {
    display: inline;
} 
```

# c# - C#: How can I have a method wait 2 seconds before it returns, without locking up the UI thread?

> ID：15713968
> 
> 赞同：-1
> 
> 时间：2013-03-30T01:39:25.637
> 
> 标签：c#, .net, multithreading, wait

I need to wait 2 seconds for a serial port to respond, then return a value. What is the best way to accomplish that without locking the UI thread?

I have a class called Test and I create an instance of it in the main form of my program. I have several event handlers to pass data back to the main form and update the UI. My Test class has a method called runTest that has two loops. The first loop calls conTest. When that is done the second runs and calls hiPotTest. In conTest and HiPotTest I send the command via serial port to start the test. What I want to do is wait 2 seconds (for example) and get the result and return that from conTest and hiPotTest. My first thought was thread.sleep but then I decided that that would probably lock the UI during that time. Is that correct and if so what's the best way to avoid this.

I can't test this part of my program until monday at work. So right now I just have a guess as to what will happen.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:49:59.243

Having proccess go to sleep for a few seconds should be setting alarm bells off that something is wrong. While it might work now this is the type of code that will cause prod issues down then line. What if the result isn't there after 2 seconds. You'd be better off having your thread notified when the result arrives, and you have the benifit that the UI can respond straight away if the result arrives < 2 seconds.

Having said that if you really want to do it you can spwan a background thread/ timer (system.timers.timer) and have your method sleep on that. But please don't :)

# java - 如何从wii平衡板读取和翻译数据

> ID：15713972
> 
> 赞同：2
> 
> 时间：2013-03-30T01:40:14.760
> 
> 标签：java, android, wiimote, wii, wii-balanceboard

根据[How to connect wii balance board with android的建议](https://stackoverflow.com/questions/14660159/how-to-connect-wii-balance-board-with-android)

通过 0x32，

*   根据下面的数据模式，字节编号。0 和 1 用于核心按钮。剩下的 8 个字节用于扩展（平衡板）

*   根据我的观察，不。2,4,6,8是一点点摇摆的变化（例如2号位没有任何压力的正常值是49，当我站在板上时，它变成了50,51,52，......但是另一个（第 3、5、7、9 位摆动幅度太大。（例如，从 -127 到 127（每个位））

*   我尝试了2个平衡板，没有任何压力时的数据值不同

下图显示了从 Logcat 捕获的数据（十六进制）传输

[http://image.ohozaa.com/i/fcd/gpWyHN.png](http://image.ohozaa.com/i/fcd/gpWyHN.png)

**** 如您所见，价值来自位号。2,4,6,8没有变化，但是3,5,7,9在没有压力的情况下有一点变化。

**** 在第 11 行，通过端口 0x21，是校准数据吗？

那么，下一个问题是， - 这些数据的每一位的含义是什么。- 如何将其转换为重心的重量和位置？

请帮忙！试了 1 周我对此一无所知，截止日期即将到来 T_T

** 在下面的评论中添加关于站立和不站立时十进制数据的图片

# django - FreeBSD 8.2 虚拟机上两个 PostgreSQL 8.4 版本之间的巨大性能差异

> ID：15713978
> 
> 赞同：1
> 
> 时间：2013-03-30T01:41:22.100
> 
> 标签：django, performance, postgresql

我有一个关于 PostgreSQL 性能差异的问题。

我正在 MAC OS X 系统上开发一个 django Web 应用程序，该 Web 应用程序必须部署在 FreeBSD 服务器上。在系统的一个页面上有一个 ajax 控制的数据输入字段。在此字段中，您可以输入城市名称，当您输入两个或更多字符时，系统开始在数据库中查找城市，并在字符串开头显示符合这两个（或更多）字符的城市下拉列表.

在我将它部署在 FreeBSD 服务器上之前，所有这些似乎都运行良好。第一次部署没问题，但第二次部署显示出巨大的性能差异。

这是测试结果列表：

```
system1 proc: Intel Core 2 Duo 3.06 GHz, mem: 8GB. :
OS: OS X 10.6.8, 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; 
root:xnu-1504.15.3~1/RELEASE_I386 i386
DB: PostgreSQL 8.4.5 on i386-apple-darwin10.5.0, compiled by GCC i686-apple-darwin10-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5664), 64-bit

Tests system1:
query   parameter       time in ms
01      'de%'           909
02      'de%'           886
03      'den%'          132
04      'den %'         115
05      'den h%'        115
06      'den ha%'       117
07      'den haa%'      95
08      'den haag%'     100

host: system1
guest: parallels virtual machine, proc: 2 cpu, mem: 1 GB.
system2 
OS: 8.2-RELEASE FreeBSD 8.2-RELEASE #0: Thu Feb 17 02:41:51 UTC 2011     root@mason.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  amd64
DB: PostgreSQL 8.4.7 on amd64-portbld-freebsd8.2, compiled by GCC cc (GCC) 4.2.1 20070719  [FreeBSD], 64-bit

Tests system2:
query   parameter       time in ms
01      'de%'           1178
02      'de%'           857
03      'den%'          298
04      'den %'         233
05      'den h%'        134
06      'den ha%'       132
07      'den haa%'      132
08      'den haag%'     136

host: system1
guest: parallels virtual machine, proc: 2 cpu, mem: 1 GB.
system3
OS: 8.3-RELEASE FreeBSD 8.3-RELEASE #0: Mon Apr  9 21:23:18 UTC 2012     root@mason.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  amd64
DB: PostgreSQL 8.4.11 on amd64-portbld-freebsd8.3, compiled by GCC cc (GCC) 4.2.2 20070831 prerelease [FreeBSD], 64-bit

Tests system3:
query   parameter       time in ms
01      'de%'           7096
02      'de%'           7012
03      'den%'          6228
04      'den %'         6237
05      'den h%'        6145
06      'den ha%'       5640
07      'den haa%'      5512
08      'den haag%'     5561 
```

这些参数模仿在 ajax 应用程序中输入数据的方式。这些结果来自通过 pgAdmin3 直接查询数据库，而不是通过应用程序。我没有把查询放在这里，因为我认为这不应该是相关的。数据库是相同的，并且在所有三个数据库实例上都使用相同的查询。

现在我可以理解system1：OS X系统，裸硬件和system2：运行FreeBSD的虚拟机之间的性能差异。

我不明白的是 system2 和 system3 之间的巨大性能差异，它们都是虚拟机在同一主机下运行。测试是在每个 vm 单独运行的情况下完成的。

有谁知道为什么会发生这种情况？

对于所有系统，我首先进行了 VACUUM ANALYZE。

```
system1: PostgreSQL 8.4.5 on i386-apple-darwin10.5.0
"Limit  (cost=3894.65..3894.70 rows=20 width=36) (actual time=1445.667..1445.671 rows=20 loops=1)"
"  ->  Sort  (cost=3894.65..3903.99 rows=3736 width=36) (actual time=1445.666..1445.666 rows=20 loops=1)"
"        Sort Key: public.geopoint_language.name_language, 

"                                                  ->  Seq Scan on geopoint  (cost=0.00..618.94 rows=625 width=11) (actual time=0.018..6.277 rows=728 loops=1)"
"                                                        Filter: (((admin2_code)::text = ''::text) AND (country_id = 154))"
"Total runtime: 1446.377 ms"

system2: PostgreSQL 8.4.7 on amd64-portbld-freebsd8.2
"Limit  (cost=3794.26..3794.31 rows=20 width=36) (actual time=64848.595..64848.903 rows=20 loops=1)"
"  ->  Sort  (cost=3794.26..3800.41 rows=2460 width=36) (actual time=64848.583..64848.679 rows=20 loops=1)"
"        Sort Key: public.geopoint_language.name_language, adm2_state_language.name_language, adm1_state_language.name_language"
"        Sort Method:  top-N heapsort  Memory: 27kB"
"        ->  HashAggregate  (cost=3704.20..3728.80 rows=2460 width=36) (actual time=64843.710..64846.020 rows=417 loops=1)"
"              ->  Append  (cost=1055.08..3667.30 rows=2460 width=36) (actual time=1201.210..64839.849 rows=417 loops=1)"
"                    ->  Hash Semi Join  (cost=1055.08..1784.76 rows=163 width=48) (actual time=1201.199..64707.965 rows=362 loops=1)"
"                          Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                          ->  Merge Join  (cost=1049.36..1776.47 rows=287 width=64) (actual time=1200.852..64703.138 rows=362 loops=1)"
"                                Merge Cond: (public.state.pstate_id = public.state.id)"
"                                ->  Nested Loop  (cost=843.55..3856.49 rows=470 width=72) (actual time=1199.848..64693.793 rows=362 loops=1)"
"                                      ->  Nested Loop  (cost=843.55..2641.98 rows=4159 width=58) (actual time=39.390..64356.535 rows=13768 loops=1)"
"                                            Join Filter: ((public.state.admin2_code)::text = (public.geopoint.admin2_code)::text)"
"                                            ->  Nested Loop Semi Join  (cost=217.62..758.39 rows=8 width=51) (actual time=38.388..146.171 rows=862 loops=1)"
"                                                  ->  Nested Loop  (cost=217.62..754.28 rows=15 width=47) (actual time=38.361..124.606 rows=862 loops=1)"
"                                                        ->  Nested Loop Semi Join  (cost=217.62..616.50 rows=20 width=34) (actual time=38.332..87.939 rows=918 loops=1)"
"                                                              ->  Merge Join  (cost=217.62..606.79 rows=35 width=30) (actual time=38.300..58.248 rows=1066 loops=1)"
"                                                                    Merge Cond: (adm1_state_language.state_id = public.state.pstate_id)"
"                                                                    ->  Index Scan using idx_state_language_1 on state_language adm1_state_language  (cost=0.00..392.25 rows=7120 width=21) (actual time=0.019..16.666 rows=2826 loops=1)"
"                                                                          Index Cond: (preferred = true)"
"                                                                    ->  Sort  (cost=196.31..196.48 rows=68 width=9) (actual time=6.551..12.945 rows=1065 loops=1)"
"                                                                          Sort Key: public.state.pstate_id"
"                                                                          Sort Method:  quicksort  Memory: 45kB"
"                                                                          ->  Seq Scan on state  (cost=0.00..194.24 rows=68 width=9) (actual time=0.019..3.928 rows=431 loops=1)"
"                                                                                Filter: (((admin2_code)::text <> ''::text) AND (country_id = 154) AND ((admin3_code)::text = ''::text) AND ((admin4_code)::text = ''::text))"
"                                                              ->  Index Scan using pk_language_all on language  (cost=0.00..0.27 rows=1 width=4) (actual time=0.011..0.011 rows=1 loops=1066)"
"                                                                    Index Cond: (public.language.id = adm1_state_language.language_id)"
"                                                                    Filter: public.language.enabled"
"                                                        ->  Index Scan using idx_state_language_1 on state_language adm2_state_language  (cost=0.00..6.87 rows=1 width=21) (actual time=0.011..0.018 rows=1 loops=918)"
"                                                              Index Cond: ((adm2_state_language.state_id = public.state.id) AND (adm2_state_language.language_id = adm1_state_language.language_id) AND (adm2_state_language.preferred = true))"
"                                                  ->  Index Scan using pk_language_all on language  (cost=0.00..0.27 rows=1 width=4) (actual time=0.008..0.008 rows=1 loops=862)"
"                                                        Index Cond: (public.language.id = adm1_state_language.language_id)"
"                                                        Filter: public.language.enabled"
"                                            ->  Materialize  (cost=625.93..695.80 rows=6987 width=12) (actual time=0.005..36.752 rows=6884 loops=862)"
"                                                  ->  Seq Scan on geopoint  (cost=0.00..618.94 rows=6987 width=12) (actual time=0.015..45.945 rows=6884 loops=1)"
"                                                        Filter: (((admin2_code)::text <> ''::text) AND (country_id = 154))"
"                                      ->  Index Scan using idx_geopoint_language_3 on geopoint_language  (cost=0.00..0.28 rows=1 width=18) (actual time=0.013..0.013 rows=0 loops=13768)"
"                                            Index Cond: ((public.geopoint_language.geopoint_id = public.geopoint.id) AND (public.geopoint_language.language_id = adm1_state_language.language_id))"
"                                            Filter: (public.geopoint_language.endonym AND ((public.geopoint_language.name_language)::text ~~* 'de%%'::text))"
"                                ->  Sort  (cost=205.72..206.42 rows=282 width=4) (actual time=0.984..3.008 rows=342 loops=1)"
"                                      Sort Key: public.state.id"
"                                      Sort Method:  quicksort  Memory: 25kB"
"                                      ->  Seq Scan on state  (cost=0.00..194.24 rows=282 width=4) (actual time=0.427..0.850 rows=12 loops=1)"
"                                            Filter: ((country_id = 154) AND ((admin2_code)::text = ''::text) AND ((admin3_code)::text = ''::text) AND ((admin4_code)::text = ''::text))"
"                          ->  Hash  (cost=5.51..5.51 rows=17 width=4) (actual time=0.235..0.235 rows=17 loops=1)"
"                                ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.015..0.127 rows=17 loops=1)"
"                                      Filter: enabled"
"                    ->  Subquery Scan "*SELECT* 2"  (cost=1844.22..1880.91 rows=2297 width=35) (actual time=125.544..127.175 rows=55 loops=1)"
"                          ->  Merge Join  (cost=1844.22..1857.94 rows=2297 width=35) (actual time=125.533..126.563 rows=55 loops=1)"
"                                Merge Cond: ((adm1_state_language.language_id = public.geopoint_language.language_id) AND ((public.state.admin1_code)::text = (public.geopoint.admin1_code)::text))"
"                                ->  Sort  (cost=392.00..392.29 rows=117 width=26) (actual time=82.529..82.647 rows=24 loops=1)"
"                                      Sort Key: adm1_state_language.language_id, public.state.admin1_code"
"                                      Sort Method:  quicksort  Memory: 26kB"
"                                      ->  Hash Join  (cost=209.42..387.98 rows=117 width=26) (actual time=30.234..82.289 rows=25 loops=1)"
"                                            Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                                            ->  Hash Semi Join  (cost=203.49..380.10 rows=206 width=22) (actual time=29.732..81.508 rows=25 loops=1)"
"                                                  Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                                                  ->  Hash Join  (cost=197.77..371.13 rows=364 width=18) (actual time=29.442..80.926 rows=29 loops=1)"
"                                                        Hash Cond: (adm1_state_language.state_id = public.state.id)"
"                                                        ->  Seq Scan on state_language adm1_state_language  (cost=0.00..143.03 rows=7120 width=21) (actual time=0.008..39.728 rows=7120 loops=1)"
"                                                              Filter: preferred"
"                                                        ->  Hash  (cost=194.24..194.24 rows=282 width=5) (actual time=2.366..2.366 rows=12 loops=1)"
"                                                              ->  Seq Scan on state  (cost=0.00..194.24 rows=282 width=5) (actual time=1.185..2.271 rows=12 loops=1)"
"                                                                    Filter: (((admin2_code)::text = ''::text) AND ((admin3_code)::text = ''::text) AND ((admin4_code)::text = ''::text) AND (country_id = 154))"
"                                                  ->  Hash  (cost=5.51..5.51 rows=17 width=4) (actual time=0.224..0.224 rows=17 loops=1)"
"                                                        ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.008..0.118 rows=17 loops=1)"
"                                                              Filter: enabled"
"                                            ->  Hash  (cost=5.72..5.72 rows=17 width=4) (actual time=0.445..0.445 rows=17 loops=1)"
"                                                  ->  HashAggregate  (cost=5.55..5.72 rows=17 width=4) (actual time=0.233..0.323 rows=17 loops=1)"
"                                                        ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.010..0.125 rows=17 loops=1)"
"                                                              Filter: enabled"
"                                ->  Sort  (cost=1452.22..1453.21 rows=396 width=25) (actual time=42.856..43.140 rows=55 loops=1)"
"                                      Sort Key: public.geopoint_language.language_id, public.geopoint.admin1_code"
"                                      Sort Method:  quicksort  Memory: 29kB"
"                                      ->  Hash Join  (cost=626.75..1435.14 rows=396 width=25) (actual time=23.266..42.430 rows=55 loops=1)"
"                                            Hash Cond: (public.geopoint_language.geopoint_id = public.geopoint.id)"
"                                            ->  Seq Scan on geopoint_language  (cost=0.00..802.94 rows=396 width=18) (actual time=3.081..25.949 rows=515 loops=1)"
"                                                  Filter: (endonym AND ((name_language)::text ~~* 'de %%'::text))"
"                                            ->  Hash  (cost=618.94..618.94 rows=625 width=11) (actual time=13.194..13.194 rows=728 loops=1)"
"                                                  ->  Seq Scan on geopoint  (cost=0.00..618.94 rows=625 width=11) (actual time=0.015..8.770 rows=728 loops=1)"
"                                                        Filter: (((admin2_code)::text = ''::text) AND (country_id = 154))"
"Total runtime: 64850.211 ms"

system3: PostgreSQL 8.4.11 on amd64-portbld-freebsd8.3
"Limit  (cost=2715.73..2715.78 rows=20 width=35) (actual time=28363.433..28363.721 rows=20 loops=1)"
"  ->  Sort  (cost=2715.73..2716.02 rows=113 width=35) (actual time=28363.421..28363.516 rows=20 loops=1)"
"        Sort Key: public.geopoint_language.name_language, adm2_state_language.name_language, adm1_state_language.name_language"
"        Sort Method:  top-N heapsort  Memory: 27kB"
"        ->  HashAggregate  (cost=2711.60..2712.73 rows=113 width=35) (actual time=28358.553..28360.849 rows=419 loops=1)"
"              ->  Append  (cost=571.63..2709.90 rows=113 width=35) (actual time=349.502..28354.791 rows=419 loops=1)"
"                    ->  Hash Semi Join  (cost=571.63..884.24 rows=3 width=48) (actual time=349.492..28233.388 rows=362 loops=1)"
"                          Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                          ->  Nested Loop  (cost=565.91..878.47 rows=5 width=64) (actual time=349.172..28228.620 rows=362 loops=1)"
"                                Join Filter: ((public.state.admin2_code)::text = (public.geopoint.admin2_code)::text)"
"                                ->  Merge Join  (cost=565.91..811.16 rows=25 width=61) (actual time=278.147..20849.826 rows=292218 loops=1)"
"                                      Merge Cond: (public.state.pstate_id = adm1_state_language.state_id)"
"                                      Join Filter: (adm1_state_language.language_id = adm2_state_language.language_id)"
"                                      ->  Nested Loop  (cost=233.49..1199.63 rows=277 width=44) (actual time=12.014..10783.473 rows=292218 loops=1)"
"                                            ->  Nested Loop  (cost=233.49..725.31 rows=1 width=26) (actual time=7.617..42.736 rows=862 loops=1)"
"                                                  ->  Merge Join  (cost=233.49..720.62 rows=1 width=13) (actual time=7.585..16.639 rows=431 loops=1)"
"                                                        Merge Cond: (public.state.id = public.state.pstate_id)"
"                                                        ->  Index Scan using pk_state on state  (cost=0.00..523.51 rows=282 width=4) (actual time=1.000..2.268 rows=12 loops=1)"
"                                                              Filter: ((country_id = 154) AND ((admin2_code)::text = ''::text) AND ((admin3_code)::text = ''::text) AND ((admin4_code)::text = ''::text))"
"                                                        ->  Sort  (cost=196.31..196.48 rows=68 width=9) (actual time=6.566..9.020 rows=431 loops=1)"
"                                                              Sort Key: public.state.pstate_id"
"                                                              Sort Method:  quicksort  Memory: 45kB"
"                                                              ->  Seq Scan on state  (cost=0.00..194.24 rows=68 width=9) (actual time=0.015..3.942 rows=431 loops=1)"
"                                                                    Filter: (((admin2_code)::text <> ''::text) AND (country_id = 154) AND ((admin3_code)::text = ''::text) AND ((admin4_code)::text = ''::text))"
"                                                  ->  Index Scan using idx_state_language_1 on state_language adm2_state_language  (cost=0.00..4.68 rows=1 width=21) (actual time=0.012..0.026 rows=2 loops=431)"
"                                                        Index Cond: ((adm2_state_language.state_id = public.state.id) AND (adm2_state_language.preferred = true))"
"                                            ->  Index Scan using idx_geopoint_language_3 on geopoint_language  (cost=0.00..471.76 rows=205 width=18) (actual time=2.051..8.854 rows=339 loops=862)"
"                                                  Index Cond: (public.geopoint_language.language_id = adm2_state_language.language_id)"
"                                                  Filter: (public.geopoint_language.endonym AND ((public.geopoint_language.name_language)::text ~~* 'de%%'::text))"
"                                      ->  Sort  (cost=331.82..337.54 rows=2286 width=29) (actual time=237.631..3511.098 rows=625149 loops=1)"
"                                            Sort Key: adm1_state_language.state_id"
"                                            Sort Method:  quicksort  Memory: 746kB"
"                                            ->  Hash Join  (cost=11.87..204.28 rows=2286 width=29) (actual time=0.996..192.413 rows=7023 loops=1)"
"                                                  Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                                                  ->  Hash Join  (cost=5.94..180.49 rows=4035 width=25) (actual time=0.514..116.195 rows=7023 loops=1)"
"                                                        Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                                                        ->  Seq Scan on state_language adm1_state_language  (cost=0.00..143.03 rows=7120 width=21) (actual time=0.007..38.638 rows=7120 loops=1)"
"                                                              Filter: preferred"
"                                                        ->  Hash  (cost=5.72..5.72 rows=17 width=4) (actual time=0.452..0.452 rows=17 loops=1)"
"                                                              ->  HashAggregate  (cost=5.55..5.72 rows=17 width=4) (actual time=0.260..0.350 rows=17 loops=1)"
"                                                                    ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.008..0.136 rows=17 loops=1)"
"                                                                          Filter: enabled"
"                                                  ->  Hash  (cost=5.72..5.72 rows=17 width=4) (actual time=0.425..0.425 rows=17 loops=1)"
"                                                        ->  HashAggregate  (cost=5.55..5.72 rows=17 width=4) (actual time=0.231..0.322 rows=17 loops=1)"
"                                                              ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.010..0.118 rows=17 loops=1)"
"                                                                    Filter: enabled"
"                                ->  Index Scan using pk_city on geopoint  (cost=0.00..2.68 rows=1 width=12) (actual time=0.008..0.011 rows=1 loops=292218)"
"                                      Index Cond: (public.geopoint.id = public.geopoint_language.geopoint_id)"
"                                      Filter: (((public.geopoint.admin2_code)::text <> ''::text) AND (public.geopoint.country_id = 154))"
"                          ->  Hash  (cost=5.51..5.51 rows=17 width=4) (actual time=0.230..0.230 rows=17 loops=1)"
"                                ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.014..0.124 rows=17 loops=1)"
"                                      Filter: enabled"
"                    ->  Subquery Scan "*SELECT* 2"  (cost=1014.04..1825.63 rows=110 width=35) (actual time=100.899..116.913 rows=57 loops=1)"
"                          ->  Hash Join  (cost=1014.04..1824.53 rows=110 width=35) (actual time=100.889..116.323 rows=57 loops=1)"
"                                Hash Cond: (((public.geopoint.admin1_code)::text = (public.state.admin1_code)::text) AND (public.geopoint_language.language_id = adm1_state_language.language_id))"
"                                ->  Hash Join  (cost=626.75..1432.19 rows=19 width=25) (actual time=19.280..34.017 rows=57 loops=1)"
"                                      Hash Cond: (public.geopoint_language.geopoint_id = public.geopoint.id)"
"                                      ->  Seq Scan on geopoint_language  (cost=0.00..802.94 rows=616 width=18) (actual time=1.942..16.204 rows=720 loops=1)"
"                                            Filter: (endonym AND ((name_language)::text ~~* 'de%%'::text))"
"                                      ->  Hash  (cost=618.94..618.94 rows=625 width=11) (actual time=13.437..13.437 rows=728 loops=1)"
"                                            ->  Seq Scan on geopoint  (cost=0.00..618.94 rows=625 width=11) (actual time=0.012..8.923 rows=728 loops=1)"
"                                                  Filter: (((admin2_code)::text = ''::text) AND (country_id = 154))"
"                                ->  Hash  (cost=385.53..385.53 rows=117 width=26) (actual time=81.568..81.568 rows=25 loops=1)"
"                                      ->  Hash Join  (cost=209.64..385.53 rows=117 width=26) (actual time=29.986..81.410 rows=25 loops=1)"
"                                            Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                                            ->  Hash Join  (cost=203.70..378.69 rows=206 width=22) (actual time=29.457..80.612 rows=25 loops=1)"
"                                                  Hash Cond: (adm1_state_language.language_id = public.language.id)"
"                                                  ->  Hash Join  (cost=197.77..371.13 rows=364 width=18) (actual time=29.011..79.869 rows=29 loops=1)"
"                                                        Hash Cond: (adm1_state_language.state_id = public.state.id)"
"                                                        ->  Seq Scan on state_language adm1_state_language  (cost=0.00..143.03 rows=7120 width=21) (actual time=0.008..38.849 rows=7120 loops=1)"
"                                                              Filter: preferred"
"                                                        ->  Hash  (cost=194.24..194.24 rows=282 width=5) (actual time=2.245..2.245 rows=12 loops=1)"
"                                                              ->  Seq Scan on state  (cost=0.00..194.24 rows=282 width=5) (actual time=1.139..2.167 rows=12 loops=1)"
"                                                                    Filter: (((admin2_code)::text = ''::text) AND ((admin3_code)::text = ''::text) AND ((admin4_code)::text = ''::text) AND (country_id = 154))"
"                                                  ->  Hash  (cost=5.72..5.72 rows=17 width=4) (actual time=0.423..0.423 rows=17 loops=1)"
"                                                        ->  HashAggregate  (cost=5.55..5.72 rows=17 width=4) (actual time=0.226..0.317 rows=17 loops=1)"
"                                                              ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.008..0.119 rows=17 loops=1)"
"                                                                    Filter: enabled"
"                                            ->  Hash  (cost=5.72..5.72 rows=17 width=4) (actual time=0.449..0.449 rows=17 loops=1)"
"                                                  ->  HashAggregate  (cost=5.55..5.72 rows=17 width=4) (actual time=0.254..0.344 rows=17 loops=1)"
"                                                        ->  Seq Scan on language  (cost=0.00..5.51 rows=17 width=4) (actual time=0.010..0.119 rows=17 loops=1)"
"                                                              Filter: enabled"
"Total runtime: 28366.784 ms" 
```

system2 和 system3 显示的时间对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T22:27:35.983

我已在 explain.depesz.com: [system2](http://explain.depesz.com/s/f7s) , [system3](http://explain.depesz.com/s/3Si)中对您的两个解释计划提出质疑，以便更容易理解和解释它们。

现在这些计划相当大，所以当在两个不同版本的 postgresql 下执行时它们的不同也就不足为奇了。即使是补丁版本做出的更改可能会影响规划器，一个地方的错误修复或小优化也可能会改变另一个地方的决策。

Something that jumps out for me is that the system3 plan has noticeable discrepancies in the estimated vs actual row cardinality of many steps in the execution. For example line 7 and 8 had actual rows 292K, but estimated rows 25 and 277; line 16, 625K vs 2286\. In contrast, system2 had no plan lines with such gross mis-estimations, there are a few that missed by one order of magnitude on a fairly modest total count, but nothing missing by several orders of magnitude producing row cardinality in the 100K+ range.

Such differences may indicate that you have incorrect statistics on system3 which cause that pg instance to choose a less efficient plan because it has inaccurate data about the cost of its choices. You may want to try reanalyzing all your tables and possibly increasing the [statistics target](http://www.postgresql.org/docs/8.4/static/runtime-config-query.html#GUC-DEFAULT-STATISTICS-TARGET).

Have you verified that the data is identical on each system? Also check that all the [query planning settings](http://www.postgresql.org/docs/8.4/static/runtime-config-query.html) are the same on the two systems.

I also wonder why you are even bothering which such an old version of postgres. 8.4 is many years old and there have been numerous substantial improvements in features, performance, and concurrency between 8.4 and 9.2\. It seems silly to spend substantial effort tuning a nearly obsolete version of postgres instead of targeting the latest stable release unless you are bound to it for compelling other reasons.

# node.js - Mongoose 模型可以构建多少复杂性（查询其他模型、查询子文档等？）

> ID：15713979
> 
> 赞同：1
> 
> 时间：2013-03-30T01:41:24.113
> 
> 标签：node.js, mongodb, mongoose

我有一个跟踪订单信息的 mongoDB，并且正在使用 Mongoose 来访问它。我在其他猫鼬模式中使用了一些相当基本的方法（例如生成用户密码），但我想知道我是否可以做类似的事情：

a) 查询其他模型。假设我有一个用户模式和一个订单模式。我将下订单的用户的 ObjectId 放在 Orders 中。我可以有一个像 Orders.getCustomerName 这样的方法，它可以提取实例的 Orders.customerId，然后去查询 Users 集合以获取用户名吗？

b) 查询子文档。再次使用 Orders 示例，假设我的 Orders 集合有一个 OrderLines 子文档数组，每个子文档都有一个价格。例如，我可以在我的模型中构建一个方法来遍历所有 Orders.orderLines 并返回总价吗？

我浏览了文档，找不到类似的东西，谷歌搜索也无济于事，但这里可能缺少关键字或概念。

# java - Java 进程构建器获取构建命令

> ID：15713982
> 
> 赞同：1
> 
> 时间：2013-03-30T01:41:38.167
> 
> 标签：java, console, processbuilder

我需要在新的控制台窗口中启动一个进程。对于 Mac，我发现了这样的内容：[在新的 Mac OS X 终端窗口](https://stackoverflow.com/questions/989349/running-a-command-in-a-new-mac-os-x-terminal-window)中运行命令，其中要运行的命令作为字符串传递。

所以我做了一个给定字符串列表的方法（如进程构建器），返回将在新控制台窗口中运行给定命令的字符串列表（最终命令）。我可以在给定的字符串后面加上空格，这在大多数情况下都可以工作，但是我该如何正确地转义呢？例如，我可以通过流程构建器`new String[] { "echo", "hello world" }`，它实际上是`echo "hello world"`. 它也处理许多其他情况（我认为）。

我认为解释很复杂，所以这里是一个伪存根：

```
public static String[] getConsoleCommand(String[] command) {
    if operating system is Mac...
        String commandString = concatenate command...
        return new String[] { "osascript", "-e",
            String.format("'tell application \"Terminal\" to do script \"%s\"'",
                        commandString.replace("'", "\\\'")) // escape single quote used in 'tell application...'
        };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:51:11.723

```
import org.apache.commons.lang.StringEscapeUtils;

for(int i = 0;i <arrayCommand.length();i++) { 
  arrayCommand[i] = StringEscapeUtils.escapeJava(unescapedJava);
} 
```

# types - golang中的json-rpc，id为字符串

> ID：15713983
> 
> 赞同：2
> 
> 时间：2013-03-30T01:41:54.947
> 
> 标签：types, go, json-rpc

我很新。

我使用这个包[https://github.com/kdar/httprpc](https://github.com/kdar/httprpc)来做我的 json-rpc v 1.0 请求（因为 golang 只实现 2.0）

我有一个问题，我正在调用的这个服务器将“id”作为字符串返回，比如

```
"id":"345" 
```

代替

```
"id":345 
```

我发现的唯一方法是使用字符串而不是 uint64 重新定义 clientResponse

```
type clientResponse struct {
    Result *json.RawMessage `json:"result"`
    Error  interface{}      `json:"error"`
    Id     string           `json:"id"`
} 
```

并重新定义完全相同的 DecodeClientResponse 函数以使用我的 clientResponse

而不是 CallJson，我调用（DecodeClientResponse 而不是 gjson.DecodeClientResponse）：

```
httprpc.CallRaw(address, method, &params, &reply, "application/json",
            gjson.EncodeClientRequest, DecodeClientResponse) 
```

我觉得这很丑陋，有什么办法可以做得更好吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:23:33.033

json-rpc v 1.0 指定：

> id - 请求 ID。这可以是任何类型。它用于将响应与它正在回复的请求相匹配。

也就是说，`id`可以是任何东西（甚至是数组），并且服务器响应应该包含相同的 id 值和类型，在您的情况下它不会这样做。因此，您与之通信的服务器没有正确完成其工作，并且没有遵循 json-rpc v 1.0 规范。

所以，是的，你需要做“丑陋”的解决方案，并为这个“坏掉的”服务器创建一个新的解码器功能。Jeremy Wall 的建议有效（但`int`应该改为`uint64`），至少应该让你避免使用`string`as 类型。

**编辑**

我对`httprpc`包裹的了解不够，无法知道它如何处理`Id`价值。但是，如果您想要字符串或 int，您应该能够将 Id 设置`clientResponse`为：

```
Id interface{} `json:"id"` 
```

检查值时`Id`使用类型开关：

```
var id int
// response is of type clientResponse
switch t := response.Id.(type) {
default:
    // Error. Bad type
case string:
    var err error
    id, err = strconv.Atoi(t)
    if err != nil {
        // Error. Not possible to convert string to int
    }
case int:
    id = t
}
// id now contains your value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T04:20:58.957

尝试

```
type clientResponse struct {
    Result *json.RawMessage `json:"result"`
    Error  interface{}      `json:"error"`

    # Tell encoding/json that the field is
    # encoded as a json string even though the type is int.
    Id     int           `json:"id,string"`
} 
```

只要库在后台使用 encoding/json，这应该可以工作。

# jquery - IE-使用Jquery隐藏下拉/添加或删除？如何在 IE 中像 firefox 一样获得相同的结果？

> ID：15713984
> 
> 赞同：0
> 
> 时间：2013-03-30T01:42:02.200
> 
> 标签：jquery, html, internet-explorer, show-hide

我需要实现以下场景。我做到了，它在 Firefox 中有效。但在 IE 中无效。

**情景：**

1.  如果我从第一个下拉列表中选择值，则其余下拉列表必须隐藏该选项。
2.  如果我从第一个下拉列表中取消选择该选项，它应该可用于剩余的下拉列表。
3.  它一直持续到最后一个下拉菜单。

我有以下代码

**HTML**

```
<div>
    <select data-label="Question 1" class="u85" id="test1">
        <option value="Please select...">Please select...</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
    </select>
    </div>
    <div>
        <select data-label="Question 1" class="u85" id="test2">
            <option value="Please select...">Please select...</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        </select>
    </div>
    <div>
        <select data-label="Question 1" class="u85" id="test3">
            <option value="Please select...">Please select...</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
    </div>
    <div>
        <select data-label="Question 1" class="u85" id="test4">
            <option value="Please select...">Please select...</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
        </select>
    </div> 
```

然后我有以下 Jquery

```
$(document).ready(function(){
        var selectionlist=[];
        $('select').change(function() 
        {   
            var currentid=$(this).attr("id");
            $(this).val()!=="Please select..."?selectionlist[$(this).parent().index()]=$(this).val():selectionlist[$(this).parent().index()]="";
            $('select').each(function(i){
            var currentselectboxid=$(this).attr("id");
                if($(this).val()!=="Please select...")
                    selectionlist[i]=$(this).val();

                    $('#'+$(this).attr("id")+' option').each(function(){

                            $.inArray($(this).val(),selectionlist)!=-1?$(this).hide():$(this).show();
                    });
            });

        });
    }); 
```

这在 Firefox 中运行良好。但在 IE 中不行。我已经在 google 中找到了一些东西。

[JQuery 隐藏选项在 IE 和 Safari 中不起作用](https://stackoverflow.com/questions/8373735/jquery-hide-option-doesnt-work-in-ie-and-safari)

如果我禁用它，它工作正常。但我的要求是隐藏和显示。我尝试添加和删除选项。但没有获得成功。

我怎样才能达到与Firefox相同的结果？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T23:25:59.433

这可能会有所帮助...

我制作了一个可以帮助你的 jQuery 插件。有了它，你可以这样做：

```
$('#selection1').hideOption('1');
$('#selection1').showOption('1'); 
```

您可以根据需要隐藏和显示它们 - 它们保持原始顺序。它适用于所有浏览器。您可以在此示例中看到：[jsFiddle - Toggle Dropdown Options](http://jsfiddle.net/glittle/RvGTc/)

您可以获得[Toggle Dropdown Options 插件](http://plugins.jquery.com/sunwapta.toggleOption/)。如果您不喜欢插件，只需将其中的 JavaScript 代码复制到您自己项目的 JavaScript 文件中即可。有关更多信息，请参阅插件上的[阅读文档链接！](https://github.com/glittle/sunwapta.jquery.toggleOption)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T02:01:41.267

这个答案取决于你从哪里得到你的选择，但我会把这个集合放在一个集合中。每个人都有一个名为“selected”的属性，并在启动时设置为“false”。然后，我将使用此集合构建每个下拉列表，并且仅在项目的选定值设置为 false 时创建选项。当下拉列表更改时，将相应项目的“选定”值设置为“true”并重建剩余的下拉列表。这样您就不必处理隐藏/显示或禁用选项。

# c - 为什么 C 在换行之前不打印到 shell？

> ID：15713987
> 
> 赞同：4
> 
> 时间：2013-03-30T01:42:35.967
> 
> 标签：c, linux, macos, shell

在 C 中，有时我的输出在打印换行符之前不会打印到终端`\n`。例如：

```
int main()
{
   printf("Hello, World");
   printf("\n");
   return 0;
} 
```

Hello World 直到下一次才会打印`printf` （我通过在 gdb 中设置断点知道这一点）。有人可以解释为什么会发生这种情况以及如何解决它吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T01:44:25.660

这样做是出于性能原因：将数据传递到控制台太昂贵（就执行速度而言），无法逐个字符地进行。这就是为什么在打印换行符之前输出被缓冲的原因：字符被收集在一个数组中，直到打印的时候，整个字符串被传递到控制台。您还可以显式强制输出，如下所示：

```
fflush(stdout); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T01:46:43.573

此外，您还可以使用[setvbuf(3)](http://linux.die.net/man/3/setvbuf)`fflush()`设置缓冲选项。

# asp.net-mvc - Html.DropdownList 实际上是如何绑定的？

> ID：15713990
> 
> 赞同：2
> 
> 时间：2013-03-30T01:43:10.240
> 
> 标签：asp.net-mvc, razor

所以我正在学习 MVC/Razor，我不知道这是如何工作的。

在创建方法中

```
ViewBag.GenreId = new SelectList(db.Genres, "GenreId", "Name"); 
```

我在页面上

```
@Html.DropDownList("GenreId", String.Empty); 
```

这有效。我感到困惑的是 ViewBag 和对象的属性之间的区别

所以我可以将第一行更改为

```
ViewBag.x= new SelectList(db.Genres, "GenreId", "Name"); 
```

和

```
@Html.DropDownList("x", String.Empty); 
```

但是当然它不会绑定回对象那么当我可能不希望列表名称与对象属性同名时，为字段设置下拉列表的正确方法是什么？

我想可以直接从 Request.Form 对象中获取值，但这种方式绕过了模型绑定的全部要点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T01:58:43.090

下拉列表助手自动搜索带有传递的字符串的选择列表

1.  你的模型
2.  查看包
3.  临时数据

If a selectlist is created, the helper will render a dropdown list with name and id attributes with the same name as the string passed

In the process, the helper assumes that the id and name will be the same as the string passed. Whatever string you pass will populate the name and id attributes of the rendered dropdownlist.

if you use

```
@Html.DropDownList("x", String.Empty); 
```

the resulting dropdown list will have name="x" and id="x". Any action method you post to will receive a parameter called "x".

If, on the otherhand, you wanted to differentiate the name of the bound parameter and you selectlist, you could use an overload of DropDownList

```
Html.DropDownList("Genres", (IEnumerable<SelectListItem>) ViewBag.GenresList) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T02:08:53.427

I thought viewbag is a dynamic object and in the context of the above question viewbag.x would serve the purpose. I tried setting the following at the controllers end.

```
 Album album = db.Albums.Find(id);
        ViewBag.x = new SelectList(db.Genres, "GenreId", "Name",album.GenreId); 
```

and retrieving the values at the Views end with the following and I had no issues.

```
 @Html.DropDownList("x","Please Select a Value")
        @Html.ValidationMessageFor(model => model.GenreId) 
```

# c++ - 输出到流时，如何在除 0 之外的所有内容上显示正/负号？

> ID：15713993
> 
> 赞同：4
> 
> 时间：2013-03-30T01:43:20.927
> 
> 标签：c++, stream, formatting

我想以以下三种格式之一输出我的数字：

```
-1 0 +1 
```

但流标志`showpos`只允许

```
-1 +0 +1 
```

有什么简单的捷径吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T01:45:49.423

只需使用 if 语句来检查值是否为 0。如果是，则打印零，否则像使用 showpos 一样打印。

我不相信这有捷径，但上面很容易。

* * *

**示例代码**

```
if(n == 0) {
    cout << '0';
} else {
    cout << showpos << n;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T01:47:06.217

蛮力（某种意义上的丑陋）方式：

```
ofstream outFile.open("data.txt");

if (num ==0 ){
   outFile<<num;
}
else
{
  outFile << std::showpos << num ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T02:03:41.747

根据我对你的问题的理解。以下代码可能对您有用。如有错误请指正。

```
// modify showpos flag
#include <iostream>     // std::cout, std::showpos, std::noshowpos

int main () {
  int p = 1;
  int z = 0;
  int n = -1;
  std::cout << std::showpos   << p << '\t' << z << '\t' << n << '\n';
  std::cout << std::noshowpos << p << '\t' << z << '\t' << n << '\n';
  return 0;
}

output

+1      +0      -1
1       0       -1 
```

# sql - SQL删除末尾的文本并添加前缀

> ID：15713994
> 
> 赞同：1
> 
> 时间：2013-03-30T01:43:23.937
> 
> 标签：sql, join, replace, case, prefix

我是 SQL 新手，还不知道很多关键字。

我有一个案例来生成一个文本，其中我在下面的示例中提取数据

我提取的数据是`10DAYS, 20DAYS, 30DAYS`，等等...

现在，我想删除`DAYS`末尾的，只`D`在开头添加前缀，得到数据：

```
D10, D20, D30... 
```

我正在使用`Replace`关键字，但我仍然无法使用它，呵呵

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T01:51:31.210

这用于`REPLACE`从您的字段中删除单词 DAYS：

```
SELECT 'D' + REPLACE(yourfield, 'DAYS', '') 
FROM YourTable 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/77145/1)

您可能需要根据您的 RDBMS 以不同的方式连接您的值。例如，用于`CONCAT`MySql 和`||`Oracle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T01:52:09.377

不使用替换：

```
declare @str nvarchar(50)

set @str = '10days'

declare @index int

set @index = PATINDEX( '%days', @str )

set @str = 'D' + STUFF( @str, @index, 4, '' )

select @str 
```