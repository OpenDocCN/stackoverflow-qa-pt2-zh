# StackOverflow 问答 13478000-13478999

# javascript - 在 JavaScript 中使用 setter 重置变量

> ID：13478002
> 
> 赞同：0
> 
> 时间：2012-11-20T16:48:50.720
> 
> 标签：javascript

我对 JavaScript 中的 getter 和 setter 非常熟悉，但我对我目前得到的行为有点困惑。这是我的代码：

```
function u0(n) {

return {

    get count() { return ++n; },
    set count(m) { m = n; }

}

} 

v0 = u0(10); //start with 10
console.log(v0.count); //11: increase by 1
console.log(v0.count); //12: increase by 1
console.log(v0.count); //13: increase by 1
console.log(v0.count = 0); //set back to 0
console.log(v0.count); //14? 
```

当我调用该`count`方法并设置它时，它确实将计数重置为零，但是当我`count`再次调用我的方法而不设置它时，它会在它停止的地方重新开始。我的印象是，当我将 count 方法设置`n`为`0`.

为什么在我设置时`count`从中断的地方继续而不是被重置？`0``count`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:54:26.960

你倒着做；）

```
function u0(n) {
    return {
        get count() { return ++n; },
        set count(m) { n = m; } // Notice? ;)
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:51:48.777

您没有重置方法。我想你想要这个：

```
v0.count = 0; 
```

我敢打赌你的`v0`对象现在看起来像这样：

```
v0 = {
    n: 14,
    reset: 0
}; 
```

另外，应该是

```
set count(m) { n = m; } // you had them backwards 
```

# javascript - 仅使用 Javascript 验证强制输入框

> ID：13478004
> 
> 赞同：0
> 
> 时间：2012-11-20T16:48:50.410
> 
> 标签：javascript

我想知道验证的最佳方法是什么（以确保所有 4 个输入框都不为空）？

```
<html>

  <head></head>

  <body>
    <input type="text" id="i1">
    <input type="text" id="i2">
    <input type="text" id="i3">
    <input type="text" id="i4">
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:01:50.743

如果它们都是`input`s 那么你可以使用`document.getElementsByTagName`

```
var allinputs = document.getElementsByTagName("input");
console.log(allinputs);
for (var i = 0; i < allinputs.length; i++) {
    if(allinputs[i].value.length == 0){
      alert('need to have something here');
       return;
    }
} 
```

这是一个[工作小提琴](http://jsfiddle.net/aL7dV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:58:42.330

JQuery Validate 是一种非常简单的验证字段的方法。您可以在他们的 wiki 上阅读更多相关信息：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T16:59:15.800

HTML：

```
<input type="button" value="submit" onclick="submitForm()"> 
```

JavaScript：

```
 function submitForm()
    {
     if(validate())
      {
       alert('No blank found!!');
      }
      else
     {  alert('blank found!!');  }
    }    

    function validate()
    {
      var i1 =document.getElementById('i1').value;
      var i2 =document.getElementById('i2').value;
      var i3 =document.getElementById('i3').value;
      var i4 =document.getElementById('i4').value;
      var result = false;

      if( i1 && i2 && i3 && i4) {
         result = true;
      }
     return result;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:59:23.287

我的自定义方法，而不是跨浏览器：

```
NodeList.prototype.every = HTMLCollection.prototype.every = Array.prototype.every;

var allChecked = document.querySelectorAll('input[type=text]').every(function(el) {
    return el.value !== '';
});

if (allChecked) alert("All checked!"); 
```

跨浏览器（IE8及以上），不好笑的方式：

```
var inputs = document.querySelectorAll('input[type=text]');

var allChecked = true;
for (var i = 0, len = inputs.length; i < len; i++) {
    if (inputs[i].value === '') {
        allChecked = false;
    }
}

if (allChecked) alert("All checked!"); 
```

# javascript - Javascript根据浏览器窗口中的可用高度修复iframe高度

> ID：13478006
> 
> 赞同：-2
> 
> 时间：2012-11-20T16:48:56.193
> 
> 标签：javascript, jquery

我需要 Javascript 根据浏览器中的可用高度动态修复 iframe 高度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:52:16.533

这是你想要的？

```
$(function(){    
    //sets the height of the iframe to the height of the browser viewport
    $("#idOfIframe").height($(window).height());
} 
```

# heroku - Heroku Godaddy 裸域

> ID：13478008
> 
> 赞同：24
> 
> 时间：2012-11-20T16:48:56.847
> 
> 标签：heroku, dns

我有一个 Heroku 应用程序，并且我添加了一个 CNAME（www 到 herokuapp）以将其从 GoDaddy 重定向到 Heroku。现在我也在尝试管理裸域。

这来自[Heroku 文档](https://devcenter.heroku.com/articles/custom-domains)。

裸域（也称为裸域或顶级域，例如**mydomain.com**）必须使用 DNS A 记录。要设置您的根域，请使用您的 DNS 管理工具为以下每个地址添加单独的 A 记录：

```
75.101.163.44
75.101.145.87
174.129.212.2 
```

使用“host”命令检查您的 DNS 是否正确配置：

```
$ host example.com
example.com has address 75.101.163.44
example.com has address 75.101.145.87
example.com has address 174.129.212.2 
```

我还从 GoDaddy 主菜单激活了转发。

好的，如果我尝试使用我的域**托管 example.com**，一切都很好。但是，当我尝试使用浏览器时，我得到了这个：

> 赫罗库 | 没有这样的应用程序 没有在该主机名上配置应用程序。可能是应用所有者重命名了它，或者您输入了错误的 URL

我也尝试使用该命令`heroku domains:add yourdomain.com` ，但这会创建我的应用程序的第二个实例，它不会将其重定向到完整的域 www

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T17:04:33.243

Heroku**强烈建议不要**使用 A 记录将域指向云应用程序。使用 A 记录会增加 DNS 解析不稳定的可能性。Heroku 在[这里](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords#naked-domain-arecord-limitations)详细介绍。

相反，您应该将裸域重定向到“www”子域。有关如何在 GoDaddy 上进行设置的更多详细信息，您可以参考[此 SO 线程。](https://stackoverflow.com/questions/11492563/heroku-godaddy-send-naked-domain-to-www)

# java - 播放 2.0 使用复合（嵌入）键时创建查找器：无法正常工作

> ID：13478014
> 
> 赞同：2
> 
> 时间：2012-11-20T16:49:04.697
> 
> 标签：java, jpa, playframework-2.0, ebean

我有一个名为 Totals 的模型

```
@Entity
public class Totals extends Model{
@EmbeddedId
private TotalsPK id;
public Totals(TotalsPK key, Integer _count)
{
    id = key;
    count = _count;
}

public static Finder<TotalsPK,Totals> find = new Finder<TotalsPK, Totals> (
        TotalsPK.class, Totals.class
);

public static Totals find(TotalsPK id) 
 {
    //try this way instead of relying on find.byId working..... same error though!
    return find.where().eq("user_id", id.getUserId()).eq("item_id", id.getItemId()).findUnique();
//  return find.byId(id);
 }
........... etc 
```

然后我有我的关键课程

```
@Embeddable
public class TotalsPK {

private Long userId;
private Long itemId;

public TotalsPK(Long _userId, Long _itemId)
{
    userId = _userId;
    itemId = _itemId;
}

public boolean equals(Object rhs)
{
    return (userId.equals(((TotalsPK)rhs).getUserId()) && itemId.equals(((TotalsPK)rhs).getItemId()));
}

public int hashCode()
{
    //from Effective Java Chapter 3
    int result = (int) (userId ^ (userId >>> 32));
    result = 31 * result + (int) (itemId ^ (itemId >>> 32));
    return result;  
} 
```

这在搜索不存在的记录时工作正常，但是在搜索确实存在的记录时，从 Ebean 传递给“equals”的对象为空，我不知道为什么会这样，任何想法我在这里做错了什么？

Null 检查传递给 equals 的 rhs 值会阻止它崩溃，但永远不会命中 equals 检查

谢谢

# spring - 在spring xml中获取http请求或会话对象

> ID：13478016
> 
> 赞同：1
> 
> 时间：2012-11-20T16:49:21.013
> 
> 标签：spring

我知道如何在 Java 代码中自动装配 http 请求对象：

```
@Resource
private HttpServletRequest request; 
```

我想在 xml conf 中做类似的事情。我试图实例化的 bean 将一个 http 会话对象作为构造函数参数：

```
 <bean class="..." scope="request">
        <constructor-arg>
             ???
        </constructor-arg>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:02:05.590

您可以创建一个使用此方法的工厂类：

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/context/request/RequestContextHolder.html#currentRequestAttributes%28%29](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/context/request/RequestContextHolder.html#currentRequestAttributes%28%29)

例如：

```
<bean id="httpSessionFactory" class="HttpSessionFactory">
    <constructor-arg>true</constructor-arg>
</bean>

<bean class="..." scope="request">
    <constructor-arg>
        <bean factory-bean="httpSessionFactory"
              factory-method="getSession"/>
    </constructor-arg>
</bean> 
```

和Java：

```
public class HttpSessionFactory {
    private boolean create;

    public HttpSessionFactory(boolean create) {
        this.create = create;
    }

    public static HttpSession getSession() {
        ServletRequestAttributes attr = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
        return attr.getRequest().getSession(create);
    }
} 
```

# java - 处理 - 余弦规则 ( sss) - NaN

> ID：13478022
> 
> 赞同：4
> 
> 时间：2012-11-20T16:49:37.567
> 
> 标签：java, processing, trigonometry, nan

我正在研究一个带有处理的简单反向运动增量机器人控制器。我被余弦规则困住了。我有三个边的长度，并希望得到角度。但`float angle = acos((sq(humerus)+sq(ulna) - sq(radius))/(2 * humerus * ulna));` 总是返回 NaN。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:54:36.147

如果你知道两边，你可能会想使用*余弦定律：*

![在此处输入图像描述](../Images/da38ef6ca98c72933ab1e7c1b5e74781.png)

在 Java 术语中，要求解角度*`C`*（与 length 的边相反`c`），我们将有

```
Math.acos((a*a + b*b - c*c) / (2*a*b)) 
```

* * *

您可能会得到以下几个原因`NaN`：

*   您的边长之一是负数，因此当您将其平方根时，您会收到`NaN`.
*   根据您指定的边长，您的三角形不可能真正存在。查看此文档以了解[`acos`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html#acos%28double%29)：

    > 如果参数为`NaN`或其绝对值大于`1`，则结果为`NaN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:11:17.387

如果您检查 javadoc 的[Math.acos](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#acos%28double%29)，您会看到以下内容：

```
If the argument is NaN or its absolute value is greater than 1, then the result is NaN. 
```

所以，有两种可能：

1.  分子的绝对值大于分母，导致分数超过 1.0。因此，反余弦将返回 NaN。

2.  其中一个平方根返回一个 NaN。正如我们从[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#sqrt%28double%29)中看到的：`If the argument is NaN or less than zero, then the result is NaN.`

所以，我会检查你的肱骨、半径和尺骨的值。可能是您允许的分子稍大（例如，通过浮点误差），或者您的手臂骨骼测量值是矢量而不是标量值（导致平方根的参数为负数而不是正数）。

# teradata - 在 teradata 14 中收集统计信息 - 不允许在同一组列上具有不同列顺序的多个统计信息

> ID：13478024
> 
> 赞同：2
> 
> 时间：2012-11-20T16:49:39.497
> 
> 标签：teradata

Teradata 14 的另一个问题（由 TC 提供）可能会引起人们的注意。

使用这样定义的表：

```
CREATE TABLE test( 
CALENDAR_DATE DATE FORMAT 'YY/MM/DD' NOT NULL           
,RETAIL_OUTLET_NUMBER INTEGER NOT NULL   
,BASE_PRODUCT_NUMBER INTEGER NOT NULL      
) 
PRIMARY INDEX (calendar_date, retail_outlet_number, base_product_number) 
```

此 SQL 将失败：

```
COLLECT STATS test COLUMN(
calendar_date, base_product_number, retail_outlet_number); 
```

带有错误消息：

> 3706：语法错误：不允许在同一组列上具有不同列排序的多个统计信息

但：

```
COLLECT STATS test COLUMN(
calendar_date, retail_outlet_number, base_product_number); 
```

会好的。

现在，collect stats 语句和主索引中的列顺序必须相同。

...

有没有其他方法可以让它们在不改变列顺序的情况下工作？？？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:29:27.103

使用 Teradata 14，您可以通过显式命名多列统计信息来解决此问题：

```
COLLECT STATISTICS
 COLUMN (Calendar_Date, Base_Product_Number, Retail_Outlet_Number) AS Stats_CalDate_ProdNum_RtlNum
     ON test; 
```

随后的回忆可以使用：

```
COLLECT STATISTICS COLUMN Stats_CalDate_ProdNum_RtlNum ON test; 
```

Teradata 客户可以通过 Teradata @ Your Service 或您的 CSR 获得一本橙皮书，其中解释了这一点以及 Teradata 14 统计的其他注意事项。Carrie Ballinger 还在[此处](http://developer.teradata.com/blog/carrie/2012/08/new-opportunities-for-statistics-collection-in-teradata-14-0)简要介绍了 Teradata 14 Statistics 增强功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:41:14.440

出现此错误是因为订单中已经收集了统计信息

> calendar_date、retail_outlet_number、base_product_number

您不能以不同的顺序收集同一列的统计信息。所以如果你想按你想要的顺序收集，即

> calendar_date、base_product_number、retail_outlet_number

您必须首先使用 DROP stats

```
DROP STATS ON TEST COLUMN(calendar_date, retail_outlet_number, base_product_number); 
```

然后使用您的首选订单再次收集。

# html - 对于具有相同标记的 2 个不同 div，我的 div 的对齐方式是不同的

> ID：13478031
> 
> 赞同：0
> 
> 时间：2012-11-20T16:49:53.927
> 
> 标签：html, css

底部 div 进一步向左移动，为什么会这样，我怎样才能更好地对齐它们？

[外观图片](http://puu.sh/1smgh.png)

[链接到标记](http://pastebin.com/Xv6JFREb)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:59:35.480

好的，这是因为 stats div 中的 Items。底部有更多“项目”，因此它向左移动（因为它更宽并且向右浮动）。为了解决这个问题，我建议给那个 div 一个固定的宽度，也许是 400px。所以`<div style="float: right; width: 400px;>`在第 30 行。

# php - PHP使用imagemagick缩小图像大小并裁剪

> ID：13478032
> 
> 赞同：1
> 
> 时间：2012-11-20T16:49:54.863
> 
> 标签：php, algorithm, imagemagick, crop, pseudocode

我正在尝试缩小用户在上传时上传的图像。
这没问题，但我现在想具体说明尺寸。

我正在寻找一些关于我努力生成的算法的建议，该算法将采用任何形状的图像 - 任何宽度/高度的正方形或矩形并缩小它。

该图像需要缩小到目标框大小（这会发生变化但存储在变量中）..
因此需要缩小图像以使宽度和高度都大于目标保持纵横比的宽度和高度. 但只是......
目标尺寸将用于裁剪图像，因此边缘等周围没有空白区域。

我正在寻找基于不同尺寸图像创建正确调整大小的算法 - 我可以处理裁剪，甚至在大多数情况下调整大小，但它在少数情况下失败，所以我正在伸出援手。

我并不是真的要求 PHP 代码更伪。显然都可以。

谢谢。

当前代码..但是我经历了这么多迭代，这可能不再起作用了..：P

```
$image = $image_orig->clone();
$wRatio = $imageprops['width'] / $dimensions[0];   // imageprops = original image dimens.
$hRatio = $imageprops['height'] / $dimensions[1];  // $dimensions[0] = new width
$maxRatio = max($wRatio,$hRatio);                  // $dimensions[1] = new height

var_dump('thumb');

$ratio = ($imageprops['width'] - $dimensions[0]) > ($imageprops['height'] - $dimensions[1]);
$shape = ($imageprops['width'] > $imageprops['height']);
$error = ($imageprops['width'] / $imageprops['height']);

if( $error < 0.95 || $error > 1.05 ) { // its NOT a square
    if($shape){  // longer width
        $scale = $imageprops['height'] / $dimensions[0];
        var_dump('1');

        $height = $imageprops['height'] / $scale;
        $image->scaleImage(0, $height);
    } else {
        $scale = $imageprops['width'] / $dimensions[1];
        var_dump('2');

        $width = $imageprops['width'] / $scale;
        $image->scaleImage($width, 0);

    }
} elseif($ratio) { // is square
    $scale = $imageprops['height'] / $dimensions[1];
    $newWidth = $imageprops['width'] / $scale;
    $extra = 0;

    $height = $dimensions[1]+$extra;
    $image->scaleImage(0, $height);
} else {
    $scale = $imageprops['width'] / $dimensions[0];
    $newHeight = $imageprops['height'] / $scale;
    $extra = 0;

    $width = $dimensions[0]+$extra;
    $image->scaleImage($width, 0);

}

$image_size = $image->getImageGeometry();

$image->cropImage($dimensions[0], $dimensions[1],($image_size['width']-$dimensions[0])/2,($image_size['height']-$dimensions[1])/2); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T17:23:19.037

**注意：**我在原始海报编辑他的问题之前写了这个答案，以包括澄清点的内容，这些内容已经改变了我认为原始问题所问的内容。

* * *

因此，您可以抛出一些概念和想法来尝试解决您打算实现的目标。（重力裁剪、[内容感知裁剪](http://jueseph.com/2010/06/opticrop-content-aware-cropping-with-php-and-imagemagick/)、内容感知重新缩放等）

因为您总是在减小原始图像的大小，所以您实际上只是想“切掉”图像的一部分。非常像这样：

![在此处输入图像描述](../Images/ded802abb4645d13382388261c156cb6.png)

然而，问题是您经常希望确保选择图像的最佳区域，以免裁剪图像的不相关部分。这称为内容感知图像裁剪，只需使用“内容感知图像裁剪”进行搜索，您就可以找到大量信息。

无论如何，继续前进，根据您的确切用例，您可能会发现实际上您不想从图像中切掉任何东西，而是想要“液体缩放和裁剪”图像，以便您执行“内容意识到调整大小”。内容感知调整大小的区别在于，调整大小会忽略图像的所有纵横比，而是查看相邻边缘和颜色，以便以流体方式调整图像大小。

所以，幸运的是，`Imagick`它带有它自己的`[liquidRescaleImage][3]`功能。

你可以像这样使用它

`$im->liquidRescaleImage(480, 260, 3, 18);`

使用 Liquid Rescale 可以很好地重新缩放。下面是一个不完美的示例，但我故意创建了一个不完美的示例，因此您实际上可以看到liquidRescale 改变了图像的组成，而不仅仅是调整纵横比。

## 原来的

![原来的](../Images/63acab45e7ef11782b1125be5022ac3b.png)

## 内容感知液体重新缩放 (450x350)

![重新缩放](../Images/bf967614a8e6bcfbc96096238c83c36a.png)

但是，如果您只想缩放图像并保持纵横比，您可能想要做 Flickr 等网站所做的事情，它们使图像最长长度等于一个值。（例如 Flickr 有 6 种左右不同的尺寸）

> 我们将您的照片调整为更适合网络使用的尺寸。每个图像都有一个 75x75 和 150x150 的方形缩略图和 100-、240-、320-、500-、640- 800*-、1024-、1600*- 和 2048*-像素版本（这是最长边的长度） ，以及您的原始文件。

**复制 Flickr 调整大小策略的基本类...**

```
<?php    
class Scale {        
    public function getImageScale($x, $y, $longestLength, $allowDistort = false) {
        //Set the default NEW values to be the old, in case it doesn't even need scaling
        list($nx, $ny) = array($x, $y);            
            if ($x > $y) {                   
                if ($longestLength > $x && !$allowDistort) {
                    return array($x, $y);
                }
                $r = $x / $longestLength;
                return array($longestLength, $y / $r);
            } else {
                if ($longestLength > $x && !$allowDistort) {
                    return array($x, $y);
                }
                $r = $y / $longestLength;
                return array($x / $r, $longestLength);
            }
        return array($nx, $ny);
    }       
} 
```

然后，如果您要像这样传递图像尺寸：

```
$originalImageX = 480;
$originalImageY = 260;    
$scale = new Scale();
var_dump($scale->getImageScale($originalImageX,$originalImageY,120 ) );    

/* Outputs
   array(2) {
  [0]=>
  int(120)
  [1]=>
  int(65)
} */ 
```

此外，Git 上有这个 Content Aware Cropping 类，我之前已经调整了基类/结构以在我自己的项目中使用，所以我知道它工作得很好。我不确定这个类的许可，但你显然可以看看它，并像我之前所做的那样找出对你有用的东西。

[https://gist.github.com/2468935#file_content_aware_image.php](https://gist.github.com/2468935#file_content_aware_image.php)

（还有PS。下次直接提供你问题中的所有信息......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:57:02.020

不知道这是不是你想要的，来自我的个人脚本库 xD：你只需要为缩略图指定所需的 $maxW $maxH 和相同，它会按比例缩小图像。

该脚本有两个几乎相同的部分，一个用于缩略图，另一个用于实际图像。

```
list($w, $h) = getimagesize($file);
$maxW = 1024;
$maxH = 786;
$thumbMaxW = 138;
$thumbMaxH = 92;

$newW = $w;
$newH = $h;

if($w > $thumbMaxW OR $h > $thumbMaxH){
    if($w>=$h){
        $thumbW = $thumbMaxW;
        $thumbRatio = $w/$thumbMaxW;
        $thumbH = (int)($h/$thumbRatio);
    } else {
        $thumbH = $thumbMaxH;
        $thumbRatio = $h/$thumbMaxH;
        $thumbW = (int)($w/$thumbRatio);
    }
} else {
    $thumbW = $w;
    $thumbH = $h;
}
--------------------------------------------

if($w > $maxW OR $h > $maxH){
    if($w >= $h){
        $newW = $maxW;
        $reduction = $w/$newW;
        $newH = (int)   ($h/$reduction);
    }

    if($h > $w){
        $newH = $maxH;
        $reduction = $h/$newH;
        $newW = (int)($w/$reduction);
    }
} else {
    $newW = $w;
    $newH = $h;
} 
```

# assembly - MIPS 汇编中的十进制到二进制转换

> ID：13478035
> 
> 赞同：0
> 
> 时间：2012-11-20T16:50:01.450
> 
> 标签：assembly, mips, division

我正在尝试在 MIPS 中显示小数的二进制表示。但是这个程序陷入了无限循环。我无法弄清楚这个问题，所以请告诉我我做错了什么，这个程序对于查找数字的二进制表示是否有效。这是代码：

```
Loop:

div $s0,$t1   # t1 is 2

mflo $s0      # storing quotient in s0 for division
mfhi $s4

move $a0,$s4
li $v0,1
syscall

beq $s4,0,Exit

j Loop 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:23:34.540

`$s4`是当前数字（余数）。你应该测试`$s0`为零。如果您在调试器/模拟器中单步执行代码，这应该很明显。另请注意，这将以相反的顺序打印数字。

如果只需要二进制转换，通常的方法就是使用移位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:55:15.163

装配中的分支伴随着它的危险。通常你会拖延你的程序，直到分支被采用。这样做是为了防止程序执行指令集中的下一条指令。

在你的情况下，我会尝试放置一个`noop`后`beq`指令。 `SLL $0, $0, 0`

`noop`是对程序没有任何影响或没有意义的指令。

# asp.net - ASP.NET DetailsView 更新不起作用

> ID：13478036
> 
> 赞同：1
> 
> 时间：2012-11-20T16:50:02.457
> 
> 标签：asp.net, sql-server, detailsview

我使用 SQL Server 的 DetailsView 中的所有数据 BoundField。我得到正确的显示，然后单击编辑，然后使用 SQLDataSource 和一些文本框编辑一些下拉列表。然后我单击更新，没有任何反应，仍然是旧值并且没有错误。有谁知道为什么它不起作用？这是我的代码，

```
<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" DataKeyNames="DatabaseName,ServerName,Instance" DataSourceID="SqlDataSource1" Height="50px" Width="125px">
        <Fields>
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" ShowHeader="True" ShowInsertButton="True" />
            <asp:BoundField DataField="DatabaseName" HeaderText="DatabaseName" ReadOnly="True" SortExpression="DatabaseName" />
            <asp:TemplateField HeaderText="ServerName" SortExpression="ServerName">
                <EditItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("ServerName") %>'></asp:Label>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("ServerName") %>'></asp:TextBox>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("ServerName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="WorkProcess" SortExpression="WorkProcess">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="workprocess" DataTextField="WorkProcess" DataValueField="WorkProcess">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="workprocess" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [WorkProcess] FROM [tblWorkProcess]"></asp:SqlDataSource>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList8" runat="server" DataSourceID="workprocess" DataTextField="WorkProcess" DataValueField="WorkProcess">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="workprocess" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [WorkProcess] FROM [tblWorkProcess]"></asp:SqlDataSource>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("WorkProcess") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Primary_DBA" SortExpression="Primary_DBA">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="userid" DataTextField="UserID" DataValueField="UserID">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="userid" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [UserID] FROM [tblDBA]"></asp:SqlDataSource>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList9" runat="server" DataSourceID="userid" DataTextField="UserID" DataValueField="UserID">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="userid" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [UserID] FROM [tblDBA]"></asp:SqlDataSource>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("Primary_DBA") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="TMLASGroupNumber" SortExpression="TMLASGroupNumber">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList3" runat="server" DataSourceID="TMLAS" DataTextField="TMLASGroupNumber" DataValueField="TMLASGroupNumber">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="TMLAS" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [TMLASGroupNumber] FROM [tblTM_LAS]"></asp:SqlDataSource>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList10" runat="server" DataSourceID="TMLAS" DataTextField="TMLASGroupNumber" DataValueField="TMLASGroupNumber">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="TMLAS" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [TMLASGroupNumber] FROM [tblTM_LAS]"></asp:SqlDataSource>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label4" runat="server" Text='<%# Bind("TMLASGroupNumber") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="TMASGroupNumber" SortExpression="TMASGroupNumber">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList4" runat="server" DataSourceID="TMAS" DataTextField="TMASGroupNumber" DataValueField="TMASGroupNumber">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="TMAS" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [TMASGroupNumber] FROM [tblTM_AS]"></asp:SqlDataSource>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList11" runat="server" DataSourceID="TMAS" DataTextField="TMASGroupNumber" DataValueField="TMASGroupNumber">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="TMAS" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [TMASGroupNumber] FROM [tblTM_AS]"></asp:SqlDataSource>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label5" runat="server" Text='<%# Bind("TMASGroupNumber") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="IIASGroupNumber" SortExpression="IIASGroupNumber">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList5" runat="server" DataSourceID="IIAS" DataTextField="IIASGroupNumber" DataValueField="IIASGroupNumber">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="IIAS" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [IIASGroupNumber] FROM [tblII_AS]"></asp:SqlDataSource>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList12" runat="server" DataSourceID="IIAS" DataTextField="IIASGroupNumber" DataValueField="IIASGroupNumber">
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="IIAS" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [IIASGroupNumber] FROM [tblII_AS]"></asp:SqlDataSource>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label6" runat="server" Text='<%# Bind("IIASGroupNumber") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Architecture" SortExpression="Architecture">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList6" runat="server">
                        <asp:ListItem>BSN EAP</asp:ListItem>
                        <asp:ListItem>BSN NEA</asp:ListItem>
                        <asp:ListItem>BSNConnect.com</asp:ListItem>
                        <asp:ListItem>BSNDMZ.COM</asp:ListItem>
                        <asp:ListItem>Dow EAP</asp:ListItem>
                        <asp:ListItem>Dow NEA</asp:ListItem>
                    </asp:DropDownList>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList13" runat="server">
                        <asp:ListItem>BSN EAP</asp:ListItem>
                        <asp:ListItem>BSN NEA</asp:ListItem>
                        <asp:ListItem>BSNConnect.com</asp:ListItem>
                        <asp:ListItem>BSNDMZ.COM</asp:ListItem>
                        <asp:ListItem>Dow EAP</asp:ListItem>
                        <asp:ListItem>Dow NEA</asp:ListItem>
                    </asp:DropDownList>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label7" runat="server" Text='<%# Bind("Architecture") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Version" SortExpression="Version">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList7" runat="server">
                        <asp:ListItem>Oracle 11g</asp:ListItem>
                        <asp:ListItem>Oracle 11g R2</asp:ListItem>
                        <asp:ListItem>SQL Server 2008</asp:ListItem>
                        <asp:ListItem>SQL Server 2008 R2</asp:ListItem>
                        <asp:ListItem>SQL Server 2012</asp:ListItem>
                        <asp:ListItem>SQL Svr 2008 R2 SS%S</asp:ListItem>
                        <asp:ListItem>SQL Svr 2012 SS%S</asp:ListItem>
                    </asp:DropDownList>
                </EditItemTemplate>
                <InsertItemTemplate>
                    <asp:DropDownList ID="DropDownList14" runat="server">
                        <asp:ListItem>Oracle 11g</asp:ListItem>
                        <asp:ListItem>Oracle 11g R2</asp:ListItem>
                        <asp:ListItem>SQL Server 2008</asp:ListItem>
                        <asp:ListItem>SQL Server 2008 R2</asp:ListItem>
                        <asp:ListItem>SQL Server 2012</asp:ListItem>
                        <asp:ListItem>SQL Svr 2008 R2 SS%S</asp:ListItem>
                        <asp:ListItem>SQL Svr 2012 SS%S</asp:ListItem>
                    </asp:DropDownList>
                </InsertItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label8" runat="server" Text='<%# Bind("Version") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Quarter_Close_Vital" HeaderText="Quarter_Close_Vital" SortExpression="Quarter_Close_Vital" />
            <asp:BoundField DataField="Business_Importance" HeaderText="Business_Importance" SortExpression="Business_Importance" />
            <asp:BoundField DataField="Application_Number" HeaderText="Application_Number" SortExpression="Application_Number" />
            <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
            <asp:BoundField DataField="Role_Based_Security_Doc" HeaderText="Role_Based_Security_Doc" SortExpression="Role_Based_Security_Doc" />
            <asp:BoundField DataField="Max_Users" HeaderText="Max_Users" SortExpression="Max_Users" />
            <asp:BoundField DataField="Storage_Requirements" HeaderText="Storage_Requirements" SortExpression="Storage_Requirements" />
            <asp:BoundField DataField="Projected_Growth" HeaderText="Projected_Growth" SortExpression="Projected_Growth" />
            <asp:BoundField DataField="Data_Owner_1" HeaderText="Data_Owner_1" SortExpression="Data_Owner_1" />
            <asp:BoundField DataField="Data_Owner_2" HeaderText="Data_Owner_2" SortExpression="Data_Owner_2" />
            <asp:BoundField DataField="SID" HeaderText="SID" SortExpression="SID" />
            <asp:BoundField DataField="Alias" HeaderText="Alias" SortExpression="Alias" />
            <asp:BoundField DataField="Instance" HeaderText="Instance" ReadOnly="True" SortExpression="Instance" />
            <asp:BoundField DataField="Backup_Nodes" HeaderText="Backup_Nodes" SortExpression="Backup_Nodes" />
            <asp:BoundField DataField="Portfolio_Lookup" HeaderText="Portfolio_Lookup" SortExpression="Portfolio_Lookup" />
            <asp:BoundField DataField="Notes" HeaderText="Notes" SortExpression="Notes" />
            <asp:BoundField DataField="ConnectionString" HeaderText="ConnectionString" SortExpression="ConnectionString" />
            <asp:BoundField DataField="InstanceOccurence" HeaderText="InstanceOccurence" SortExpression="InstanceOccurence" />
            <asp:BoundField DataField="OccurenceNormalState" HeaderText="OccurenceNormalState" SortExpression="OccurenceNormalState" />
            <asp:BoundField DataField="SupportedFuntionalArea" HeaderText="SupportedFuntionalArea" SortExpression="SupportedFuntionalArea" />
        </Fields>
    </asp:DetailsView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConflictDetection="CompareAllValues" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" DeleteCommand="DELETE FROM [tblDatabase] WHERE [DatabaseName] = @original_DatabaseName AND [ServerName] = @original_ServerName AND [Instance] = @original_Instance AND [WorkProcess] = @original_WorkProcess AND [Primary_DBA] = @original_Primary_DBA AND [TMLASGroupNumber] = @original_TMLASGroupNumber AND [TMASGroupNumber] = @original_TMASGroupNumber AND [IIASGroupNumber] = @original_IIASGroupNumber AND (([Architecture] = @original_Architecture) OR ([Architecture] IS NULL AND @original_Architecture IS NULL)) AND (([Version] = @original_Version) OR ([Version] IS NULL AND @original_Version IS NULL)) AND (([Quarter_Close_Vital] = @original_Quarter_Close_Vital) OR ([Quarter_Close_Vital] IS NULL AND @original_Quarter_Close_Vital IS NULL)) AND (([Business_Importance] = @original_Business_Importance) OR ([Business_Importance] IS NULL AND @original_Business_Importance IS NULL)) AND (([Application_Number] = @original_Application_Number) OR ([Application_Number] IS NULL AND @original_Application_Number IS NULL)) AND (([Description] = @original_Description) OR ([Description] IS NULL AND @original_Description IS NULL)) AND (([Role_Based_Security_Doc] = @original_Role_Based_Security_Doc) OR ([Role_Based_Security_Doc] IS NULL AND @original_Role_Based_Security_Doc IS NULL)) AND (([Max_Users] = @original_Max_Users) OR ([Max_Users] IS NULL AND @original_Max_Users IS NULL)) AND (([Storage_Requirements] = @original_Storage_Requirements) OR ([Storage_Requirements] IS NULL AND @original_Storage_Requirements IS NULL)) AND (([Projected_Growth] = @original_Projected_Growth) OR ([Projected_Growth] IS NULL AND @original_Projected_Growth IS NULL)) AND (([Data_Owner_1] = @original_Data_Owner_1) OR ([Data_Owner_1] IS NULL AND @original_Data_Owner_1 IS NULL)) AND (([Data_Owner_2] = @original_Data_Owner_2) OR ([Data_Owner_2] IS NULL AND @original_Data_Owner_2 IS NULL)) AND (([SID] = @original_SID) OR ([SID] IS NULL AND @original_SID IS NULL)) AND (([Alias] = @original_Alias) OR ([Alias] IS NULL AND @original_Alias IS NULL)) AND (([Backup_Nodes] = @original_Backup_Nodes) OR ([Backup_Nodes] IS NULL AND @original_Backup_Nodes IS NULL)) AND (([Portfolio_Lookup] = @original_Portfolio_Lookup) OR ([Portfolio_Lookup] IS NULL AND @original_Portfolio_Lookup IS NULL)) AND (([Notes] = @original_Notes) OR ([Notes] IS NULL AND @original_Notes IS NULL)) AND (([ConnectionString] = @original_ConnectionString) OR ([ConnectionString] IS NULL AND @original_ConnectionString IS NULL)) AND (([InstanceOccurence] = @original_InstanceOccurence) OR ([InstanceOccurence] IS NULL AND @original_InstanceOccurence IS NULL)) AND (([OccurenceNormalState] = @original_OccurenceNormalState) OR ([OccurenceNormalState] IS NULL AND @original_OccurenceNormalState IS NULL)) AND (([SupportedFuntionalArea] = @original_SupportedFuntionalArea) OR ([SupportedFuntionalArea] IS NULL AND @original_SupportedFuntionalArea IS NULL))" InsertCommand="INSERT INTO [tblDatabase] ([DatabaseName], [ServerName], [WorkProcess], [Primary_DBA], [TMLASGroupNumber], [TMASGroupNumber], [IIASGroupNumber], [Architecture], [Version], [Quarter_Close_Vital], [Business_Importance], [Application_Number], [Description], [Role_Based_Security_Doc], [Max_Users], [Storage_Requirements], [Projected_Growth], [Data_Owner_1], [Data_Owner_2], [SID], [Alias], [Instance], [Backup_Nodes], [Portfolio_Lookup], [Notes], [ConnectionString], [InstanceOccurence], [OccurenceNormalState], [SupportedFuntionalArea]) VALUES (@DatabaseName, @ServerName, @WorkProcess, @Primary_DBA, @TMLASGroupNumber, @TMASGroupNumber, @IIASGroupNumber, @Architecture, @Version, @Quarter_Close_Vital, @Business_Importance, @Application_Number, @Description, @Role_Based_Security_Doc, @Max_Users, @Storage_Requirements, @Projected_Growth, @Data_Owner_1, @Data_Owner_2, @SID, @Alias, @Instance, @Backup_Nodes, @Portfolio_Lookup, @Notes, @ConnectionString, @InstanceOccurence, @OccurenceNormalState, @SupportedFuntionalArea)" OldValuesParameterFormatString="original_{0}" SelectCommand="SELECT * FROM [tblDatabase]" UpdateCommand="UPDATE [tblDatabase] SET [WorkProcess] = @WorkProcess, [Primary_DBA] = @Primary_DBA, [TMLASGroupNumber] = @TMLASGroupNumber, [TMASGroupNumber] = @TMASGroupNumber, [IIASGroupNumber] = @IIASGroupNumber, [Architecture] = @Architecture, [Version] = @Version, [Quarter_Close_Vital] = @Quarter_Close_Vital, [Business_Importance] = @Business_Importance, [Application_Number] = @Application_Number, [Description] = @Description, [Role_Based_Security_Doc] = @Role_Based_Security_Doc, [Max_Users] = @Max_Users, [Storage_Requirements] = @Storage_Requirements, [Projected_Growth] = @Projected_Growth, [Data_Owner_1] = @Data_Owner_1, [Data_Owner_2] = @Data_Owner_2, [SID] = @SID, [Alias] = @Alias, [Backup_Nodes] = @Backup_Nodes, [Portfolio_Lookup] = @Portfolio_Lookup, [Notes] = @Notes, [ConnectionString] = @ConnectionString, [InstanceOccurence] = @InstanceOccurence, [OccurenceNormalState] = @OccurenceNormalState, [SupportedFuntionalArea] = @SupportedFuntionalArea WHERE [DatabaseName] = @original_DatabaseName AND [ServerName] = @original_ServerName AND [Instance] = @original_Instance AND [WorkProcess] = @original_WorkProcess AND [Primary_DBA] = @original_Primary_DBA AND [TMLASGroupNumber] = @original_TMLASGroupNumber AND [TMASGroupNumber] = @original_TMASGroupNumber AND [IIASGroupNumber] = @original_IIASGroupNumber AND (([Architecture] = @original_Architecture) OR ([Architecture] IS NULL AND @original_Architecture IS NULL)) AND (([Version] = @original_Version) OR ([Version] IS NULL AND @original_Version IS NULL)) AND (([Quarter_Close_Vital] = @original_Quarter_Close_Vital) OR ([Quarter_Close_Vital] IS NULL AND @original_Quarter_Close_Vital IS NULL)) AND (([Business_Importance] = @original_Business_Importance) OR ([Business_Importance] IS NULL AND @original_Business_Importance IS NULL)) AND (([Application_Number] = @original_Application_Number) OR ([Application_Number] IS NULL AND @original_Application_Number IS NULL)) AND (([Description] = @original_Description) OR ([Description] IS NULL AND @original_Description IS NULL)) AND (([Role_Based_Security_Doc] = @original_Role_Based_Security_Doc) OR ([Role_Based_Security_Doc] IS NULL AND @original_Role_Based_Security_Doc IS NULL)) AND (([Max_Users] = @original_Max_Users) OR ([Max_Users] IS NULL AND @original_Max_Users IS NULL)) AND (([Storage_Requirements] = @original_Storage_Requirements) OR ([Storage_Requirements] IS NULL AND @original_Storage_Requirements IS NULL)) AND (([Projected_Growth] = @original_Projected_Growth) OR ([Projected_Growth] IS NULL AND @original_Projected_Growth IS NULL)) AND (([Data_Owner_1] = @original_Data_Owner_1) OR ([Data_Owner_1] IS NULL AND @original_Data_Owner_1 IS NULL)) AND (([Data_Owner_2] = @original_Data_Owner_2) OR ([Data_Owner_2] IS NULL AND @original_Data_Owner_2 IS NULL)) AND (([SID] = @original_SID) OR ([SID] IS NULL AND @original_SID IS NULL)) AND (([Alias] = @original_Alias) OR ([Alias] IS NULL AND @original_Alias IS NULL)) AND (([Backup_Nodes] = @original_Backup_Nodes) OR ([Backup_Nodes] IS NULL AND @original_Backup_Nodes IS NULL)) AND (([Portfolio_Lookup] = @original_Portfolio_Lookup) OR ([Portfolio_Lookup] IS NULL AND @original_Portfolio_Lookup IS NULL)) AND (([Notes] = @original_Notes) OR ([Notes] IS NULL AND @original_Notes IS NULL)) AND (([ConnectionString] = @original_ConnectionString) OR ([ConnectionString] IS NULL AND @original_ConnectionString IS NULL)) AND (([InstanceOccurence] = @original_InstanceOccurence) OR ([InstanceOccurence] IS NULL AND @original_InstanceOccurence IS NULL)) AND (([OccurenceNormalState] = @original_OccurenceNormalState) OR ([OccurenceNormalState] IS NULL AND @original_OccurenceNormalState IS NULL)) AND (([SupportedFuntionalArea] = @original_SupportedFuntionalArea) OR ([SupportedFuntionalArea] IS NULL AND @original_SupportedFuntionalArea IS NULL))">
        <DeleteParameters>
            <asp:Parameter Name="original_DatabaseName" Type="String" />
            <asp:Parameter Name="original_ServerName" Type="String" />
            <asp:Parameter Name="original_Instance" Type="String" />
            <asp:Parameter Name="original_WorkProcess" Type="String" />
            <asp:Parameter Name="original_Primary_DBA" Type="String" />
            <asp:Parameter Name="original_TMLASGroupNumber" Type="Int32" />
            <asp:Parameter Name="original_TMASGroupNumber" Type="Int32" />
            <asp:Parameter Name="original_IIASGroupNumber" Type="Int32" />
            <asp:Parameter Name="original_Architecture" Type="String" />
            <asp:Parameter Name="original_Version" Type="String" />
            <asp:Parameter Name="original_Quarter_Close_Vital" Type="String" />
            <asp:Parameter Name="original_Business_Importance" Type="String" />
            <asp:Parameter Name="original_Application_Number" Type="String" />
            <asp:Parameter Name="original_Description" Type="String" />
            <asp:Parameter Name="original_Role_Based_Security_Doc" Type="String" />
            <asp:Parameter Name="original_Max_Users" Type="String" />
            <asp:Parameter Name="original_Storage_Requirements" Type="String" />
            <asp:Parameter Name="original_Projected_Growth" Type="String" />
            <asp:Parameter Name="original_Data_Owner_1" Type="String" />
            <asp:Parameter Name="original_Data_Owner_2" Type="String" />
            <asp:Parameter Name="original_SID" Type="String" />
            <asp:Parameter Name="original_Alias" Type="String" />
            <asp:Parameter Name="original_Backup_Nodes" Type="String" />
            <asp:Parameter Name="original_Portfolio_Lookup" Type="String" />
            <asp:Parameter Name="original_Notes" Type="String" />
            <asp:Parameter Name="original_ConnectionString" Type="String" />
            <asp:Parameter Name="original_InstanceOccurence" Type="Decimal" />
            <asp:Parameter Name="original_OccurenceNormalState" Type="String" />
            <asp:Parameter Name="original_SupportedFuntionalArea" Type="String" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:Parameter Name="WorkProcess" Type="String" />
            <asp:Parameter Name="Primary_DBA" Type="String" />
            <asp:Parameter Name="TMLASGroupNumber" Type="Int32" />
            <asp:Parameter Name="TMASGroupNumber" Type="Int32" />
            <asp:Parameter Name="IIASGroupNumber" Type="Int32" />
            <asp:Parameter Name="Architecture" Type="String" />
            <asp:Parameter Name="Version" Type="String" />
            <asp:Parameter Name="Quarter_Close_Vital" Type="String" />
            <asp:Parameter Name="Business_Importance" Type="String" />
            <asp:Parameter Name="Application_Number" Type="String" />
            <asp:Parameter Name="Description" Type="String" />
            <asp:Parameter Name="Role_Based_Security_Doc" Type="String" />
            <asp:Parameter Name="Max_Users" Type="String" />
            <asp:Parameter Name="Storage_Requirements" Type="String" />
            <asp:Parameter Name="Projected_Growth" Type="String" />
            <asp:Parameter Name="Data_Owner_1" Type="String" />
            <asp:Parameter Name="Data_Owner_2" Type="String" />
            <asp:Parameter Name="SID" Type="String" />
            <asp:Parameter Name="Alias" Type="String" />
            <asp:Parameter Name="Backup_Nodes" Type="String" />
            <asp:Parameter Name="Portfolio_Lookup" Type="String" />
            <asp:Parameter Name="Notes" Type="String" />
            <asp:Parameter Name="ConnectionString" Type="String" />
            <asp:Parameter Name="InstanceOccurence" Type="Decimal" />
            <asp:Parameter Name="OccurenceNormalState" Type="String" />
            <asp:Parameter Name="SupportedFuntionalArea" Type="String" />
            <asp:Parameter Name="original_DatabaseName" Type="String" />
            <asp:Parameter Name="original_ServerName" Type="String" />
            <asp:Parameter Name="original_Instance" Type="String" />
            <asp:Parameter Name="original_WorkProcess" Type="String" />
            <asp:Parameter Name="original_Primary_DBA" Type="String" />
            <asp:Parameter Name="original_TMLASGroupNumber" Type="Int32" />
            <asp:Parameter Name="original_TMASGroupNumber" Type="Int32" />
            <asp:Parameter Name="original_IIASGroupNumber" Type="Int32" />
            <asp:Parameter Name="original_Architecture" Type="String" />
            <asp:Parameter Name="original_Version" Type="String" />
            <asp:Parameter Name="original_Quarter_Close_Vital" Type="String" />
            <asp:Parameter Name="original_Business_Importance" Type="String" />
            <asp:Parameter Name="original_Application_Number" Type="String" />
            <asp:Parameter Name="original_Description" Type="String" />
            <asp:Parameter Name="original_Role_Based_Security_Doc" Type="String" />
            <asp:Parameter Name="original_Max_Users" Type="String" />
            <asp:Parameter Name="original_Storage_Requirements" Type="String" />
            <asp:Parameter Name="original_Projected_Growth" Type="String" />
            <asp:Parameter Name="original_Data_Owner_1" Type="String" />
            <asp:Parameter Name="original_Data_Owner_2" Type="String" />
            <asp:Parameter Name="original_SID" Type="String" />
            <asp:Parameter Name="original_Alias" Type="String" />
            <asp:Parameter Name="original_Backup_Nodes" Type="String" />
            <asp:Parameter Name="original_Portfolio_Lookup" Type="String" />
            <asp:Parameter Name="original_Notes" Type="String" />
            <asp:Parameter Name="original_ConnectionString" Type="String" />
            <asp:Parameter Name="original_InstanceOccurence" Type="Decimal" />
            <asp:Parameter Name="original_OccurenceNormalState" Type="String" />
            <asp:Parameter Name="original_SupportedFuntionalArea" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:34:17.780

我发现了为什么它不起作用。
当我将文本框替换为下拉列表时，它会擦除`databinding`​​ . 我必须去 Edit DataBinding 将其目标设置为特定列。
之前，它把它留空，这就是为什么它没有改变任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T10:44:13.710

在寻找相同问题的解决方案时遇到了这个问题。我的解决方法是`DataKeyNames`将 DetailsView 的属性设置为表的主键。

# css - CSS没有为子指标定位图像

> ID：13478038
> 
> 赞同：0
> 
> 时间：2012-11-20T16:50:11.200
> 
> 标签：css, superfish

[http://rusticblonde.hostizzo.com/](http://rusticblonde.hostizzo.com/)

我的菜单上有一个子指示器，例如位于 images/arrows-ffffff.png 中。我什至尝试指向完整的 URL，但是它没有显示子指示器...

有任何想法吗？

我的代码如下： -

```
.sf-sub-indicator {
position:       absolute;
display:        block;
right:          .75em;
top:            1.05em; /* IE6 only */
width:          10px;
height:         10px;
text-indent:    -999em;
overflow:       hidden;
background:     url('images/arrows-ffffff.png') no-repeat -10px -100px; /* 8-bit indexed alpha png. IE6 gets solid image only */
} 
```

谢谢大家柯斯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:28:18.780

因为当您使用`images/arrows-ffffff.png`它时，意味着您的图像文件夹和 css 文件应该位于同一位置，但是在观察您的站点时，您正在从`css/superfish.css`. 所以要么将你的 css 文件移动到同一个文件夹，要么使用以下路径之一：

1.  `http://rusticblonde.hostizzo.com/images/arrows-ffffff.png`
2.  `../images/arrows-ffffff.png`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T08:21:24.653

1/ 问题是您没有修复脚本，因此`sub-indicator`该类的元素不存在。

2/ 改变：

```
url('images/arrows-ffffff.png') no-repeat -10px -100px 
```

至：

```
url('/images/arrows-ffffff.png') no-repeat -10px -100px 
```

使用绝对路径。它们通常更可靠，尤其是在 CSS 文件中。谷歌“css 中的相对路径与绝对路径”以获取更多信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-20T16:54:21.890

删除代码：

```
overflow:       hidden; 
```

# jquery - 使用jQuery动态更改选项element 我已经在其他一些讨论中查找了这一点，但需要有人用简单的术语向我解释它。我有 2 个选择元素，我想根据第一个选择的内容更改其中一个的选项。我已经通过使用下面的代码让它工作了。它非常适用于 4 级和 5 级选项，但是当我在第一个下拉列表中选择 6 级时，当您打开第二个下拉列表时，它只显示第一个选项和一个很小的滚动条，因此您必须单独滚动浏览每个选项. 我想得到它，以便在打开下拉列表时可以看到所有 6 级选项（带有 class="l6workshopmo

> ID：13478043
> 
> 赞同：0
> 
> 时间：2012-11-20T16:50:28.087
> 
> 标签：jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:25:14.793

选项的隐藏/显示在浏览器中的行为不一致。一个简单的解决方法是使用分离/附加而不是隐藏/显示。

有关使用该方法的演示，请参见：http: [//jsfiddle.net/BRTpN/1/](http://jsfiddle.net/BRTpN/1/)

```
$.fn.linkToSelect= function(target) {
    target = $(target);
    //find all options in the target dropdown
    var options = target.find("option");
    //hide all except for the first
    options.filter(":gt(0)").detach();

    //listen for changes on the source select
    this.bind('change', function() {
        //get the selected value
        var value = $(this).val();
        //extract the level number
        value = /[0-9]+/.exec(value);
        if(value) {
            value = value[0];
        }
        //hide all target options except for the first
        options.filter(":gt(0)").detach();
        target.val('choosecourse');
        if(value || value === '0') {
            //reset the selected value 
            target.val('choosecourse');
            //show the once we want to keep:
            var classSelector = ".l"+ value + "workshopmods";
            options.filter(classSelector).appendTo(target);                       
        }        
    });
};
$("#workshopcourseselect").linkToSelect("#workshopmoduleselect");

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:32:29.297

实际上，我根本无法在 Chrome/MacOS X 上使用 `hide()`它。`show()`对于选项似乎没有任何效果。

所以我做了一个**[小提琴](http://jsfiddle.net/slashingweapon/FFXTg/)**并想出了一个稍微不同的技术。我实际上从第二个选择元素中删除了所有选项。然后当第一个选择发生变化时，我清空第二个选择中的任何内容，然后插入我们想要的选项：

```
var l4 = $("#workshopmoduleselect .l4workshopmods").detach();
var l5 = $("#workshopmoduleselect .l5workshopmods").detach();
var l6 = $("#workshopmoduleselect .l6workshopmods").detach();
var def = $("#workshopmoduleselect option"); // everything else.  Don't detach.

$('#workshopcourseselect').change(function() {
    var level = $(this).val();
    var menu = $('#workshopmoduleselect');

    menu.empty();
    if (level == "level4")
        menu.append(l4);
    else if (level == "level5")
        menu.append(l5);
    else if (level == "level6")
        menu.append(l6);
    else
        menu.append(def);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:31:08.317

这发生在你身上，因为最初你有一个非常大的`select`元素，有很多选择。

如果您将级别 5 的选项数量减少到一对，您将看到级别 6 可以正常工作。

由于元素的原始渲染，您的问题似乎正在发生。就像@nxt 所说，一个好的解决方案是使用 jQuery 动态添加和删除元素。

# linux - 如何损坏 tar.gz 的标头以进行测试

> ID：13478044
> 
> 赞同：0
> 
> 时间：2012-11-20T16:50:31.480
> 
> 标签：linux

如何损坏 tar.gz 的标头以进行测试？因此，当应用程序尝试解压缩它时......它会失败。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:07:16.160

创建 gzip 无法识别的文件非常简单：

```
dd if=/dev/urandom bs=1024 count=1 of=bad.tar.gz 
```

虽然当然可以使用 . 创建一个有效的 gzip 文件`/dev/urandom`，但它很可能与被闪电击中一样。在晴朗的天空下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T16:58:30.517

给自己一个[十六进制编辑器](https://stackoverflow.com/questions/5498197/need-a-good-hex-editor-for-linux)，以前的问题建议[祝福](http://home.gna.org/bless/)。

您可以尝试任意更改位，但如果您想更加外科手术，请查看[gzip 规范](http://www.gzip.org/zlib/rfc-gzip.html)，它可以准确告诉您要在外部 gzip 标头上翻转哪些位。或尝试[tar 规范](http://www.gnu.org/software/tar/manual/html_node/Standard.html)。

gzip 文件中嵌入了校验和，这些可能是更改的首选：

> 如果设置了 FHCRC，则在压缩数据之前存在 gzip 标头的 CRC16。CRC16 由 CRC32 的两个最低有效字节组成，用于 gzip 标头的所有字节，直到并且不包括 CRC16

# javascript - 调试 jquery 添加的 javascript

> ID：13478048
> 
> 赞同：0
> 
> 时间：2012-11-20T16:50:58.103
> 
> 标签：javascript, jquery, debugging, firebug

我在另一个 .js 文件中导入了一个 .js 文件，如下所示：

```
$.getScript("/js/...../myFile.js", function() {
    }); 
```

所有代码都已满载，因为我可以使用文件中的函数。但是当我尝试通过firebug或IE8的开发者工具调试它时，页面中不包含js，所以我无法调试，因为我无法选择.js并设置断点。我怎样才能“真正”加载文件以便调试它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:02:25.693

Chrome 有一个功能，您可以指定解析器属性并使动态 JS 显示为一个文件，然后可以浏览该文件并设置断点。

在脚本选项卡的 chrome 中，您可以启用“暂停所有异常”

![在此处输入图像描述](../Images/f80f430d37fe8af259d36cd68e225acd.png)

然后放在你的代码行中的某个地方`try{throw ''} catch(e){}`。Chrome 将在到达此行时停止执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:28:08.633

根据[这个](https://stackoverflow.com/questions/690781/debugging-scripts-added-via-jquery-getscript-function)先前的答案：

```
jQuery.ajax({
        crossDomain: true,
        dataType: "script",
        url: "js/.../myscript.js",
        success: function(){
            _success(_slot)
        },
        error: function(){
            _fail(_slot);
        }
    }); 
```

全面工作

# c++ - 具有唯一键的多图

> ID：13478049
> 
> 赞同：0
> 
> 时间：2012-11-20T16:51:01.350
> 
> 标签：c++, stl

使用`multimap`如下：

```
multimap<int, string> mm;
mm.insert(make_pair(1, "jack"));
mm.insert(make_pair(1, "jack"));
mm.insert(make_pair(1, "jack"));
mm.insert(make_pair(1, "joe"));
mm.insert(make_pair(2, "david"));
mm.insert(make_pair(2, "daniel"));
mm.insert(make_pair(3, "alex"));

for (multimap<int, string>::iterator itr = mm.begin(); itr != mm.end(); itr++)
{
    cout << "key: " << itr->first << ", value: " << itr->second << endl;
} 
```

结果：

```
key: 1, value: jack
key: 1, value: jack
key: 1, value: jack
key: 1, value: joe
key: 2, value: david
key: 2, value: daniel
key: 3, value: alex 
```

如您所见，键`1`有两个不同的值`joe`，`jack`没关系。但是`<1,"jack">`容器中有两个重复。

我怎样才能摆脱那些重复的项目？有符合我要求的标准容器吗？或者，我们如何结合现有的容器来实现我的目标（效率非常重要）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:14:06.080

在 STL 中，您可以使用`std::pair`创建一个容器，其键（或值）是多个值的组合，因此您可以将您的`multimap`变成`set`：

```
set<pair<int, string> > 
```

生成的容器对于这两个值的每个组合只能包含一个条目。

# android - Android ADT：移动视图会混淆 ID（错误？）

> ID：13478052
> 
> 赞同：5
> 
> 时间：2012-11-20T16:51:03.753
> 
> 标签：android, adt, paste

我一直有一个非常烦人的问题，我怀疑是 Android ADT 错误（v21.0.0-519525）。

假设我正在处理一个有两个视图的 Activity - 顶部的 TextView 和底部的 ImageView。我想将 TextView 从顶部移动到底部。如果我在 GUI 中单击或拖动它，或者在 XML 中剪切/粘贴它，预览和 XML 代码上的一切看起来都很好，但是当我去运行应用程序时，它们的 ID 似乎混淆了。将 R.id.textView 转换为 TextView 的代码会引发错误，因为它现在认为 R.id.textView 是 ImageView。

有没有其他人遇到过这个？有办法解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:52:59.663

这种问题有时会在使用布局 ID 时发生。

一种解决方案是清理项目并重建它。

# hibernate - TransientObjectException - 对象引用未保存的瞬态实例 - 在刷新之前保存瞬态实例

> ID：13478055
> 
> 赞同：21
> 
> 时间：2012-11-20T16:51:08.803
> 
> 标签：hibernate, jpa, hibernate-onetomany

对于我的问题，我遇到了一些很好的答案，但这是关于从 Hibernate 3.4.0GA 升级到 Hibernate 4.1.8。所以这曾经在以前的版本下工作，我已经搜索了高低，为什么它会在这个新版本中中断。

我得到一个

> org.hibernate.TransientObjectException：对象引用了未保存的瞬态实例 - 在刷新之前保存瞬态实例：com.test.server.domain.model.NoteItem.note -> com.test.server.domain.model.Note

任何帮助都会很棒。

这是我的课。

```
@MappedSuperclass
public abstract class EntityBase implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    protected Long id;

    @Version
    @Column(name = "VERSION")
    protected Long version; 

    public Long getId() {
        return id;
    }

    public Long getVersion() {
        return version;
    }

    protected static final EntityManager entityManager() {
        return EntityManagerUtil.getEntityManager();
    }
}

@Entity
@Table(name = "WORK_BOOK")
public class WorkBook extends EntityBase {
    private static final long serialVersionUID = 1L;

    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "NOTE_ID")
    private Note note;

    public WorkBook() {
        super();
    }

    public Note getNote() {
        return note;
    }

    public void setNote(Note note) {
        this.note = note;
    }

    public WorkBook persist() {
        EntityManager em = entityManager();
        EntityTransaction tx = em.getTransaction();

        if (tx.isActive()) {
            return em.merge(this);
        } else {
            tx.begin();
            WorkBook saved = em.merge(this);
            tx.commit();
            return saved;
        }
    }
}

@Entity
@Table(name = "NOTE")
public class Note extends EntityBase {
    private static final long serialVersionUID = 1L;

    @OneToOne(mappedBy = "note")
    private WorkBook workBook;

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "note")
    private List<NoteItem> notes = new ArrayList<NoteItem>();

    public WorkBook getWorkBook() {
        return workBook;
    }

    public List<NoteItem> getNotes() {
        return notes;
    }

    public void setWorkBook(WorkBook workBook) {
        this.workBook = workBook;
    }

    public void setNotes(List<NoteItem> notes) {
        if (notes != null) {
            for (NoteItem ni : notes) {
                ni.setNote(this);               
            }
        }

        this.notes = notes;
    }
}   

@Entity
@Table(name = "NOTE_ITEM")
public class NoteItem extends EntityBase {
    private static final long serialVersionUID = 1L;

    @Column(name = "NOTE_NAME")
    private String noteName;

    @Column(name = "NOTE_TEXT")
    private String noteText;

    @Column(name = "NOTE_DATE")
    private Date noteDate;

    @Column(name = "NOTE_CREATOR")
    private String noteCreator;

    @Column(name = "NOTE_CREATOR_ID")
    private Integer noteCreatorId;

    @ManyToOne
    @JoinColumn(name = "NOTE_ID", updatable = true)
    private Note note;

    public String getNoteName() {
        return noteName;
    }

    public void setNoteName(String noteName) {
        this.noteName = noteName;
    }

    public String getNoteText() {
        return noteText;
    }

    public void setNoteText(String noteText) {
        this.noteText = noteText;
    }

    public Date getNoteDate() {
        return noteDate;
    }

    public void setNoteDate(Date noteDate) {
        this.noteDate = noteDate;
    }

    public String getNoteCreator() {
        return noteCreator;
    }

    public void setNoteCreator(String noteCreator) {
        this.noteCreator = noteCreator;
    }

    public Integer getNoteCreatorId() {
        return noteCreatorId;
    }

    public void setNoteCreatorId(Integer noteCreatorId) {
        this.noteCreatorId = noteCreatorId;
    }

    public Note getNote() {
        return note;
    }

    public void setNote(Note note) {
        this.note = note;
    }

    public NoteItem create() {
        return new NoteItem();
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-28T09:15:15.573

`NoteItem``Note`引用之前必须保存的瞬态（尚未保存）实例。因此，请在属性注释上指定“Cascade.all”或先在注释上调用 saveorupdate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-26T13:39:27.907

在引入乐观锁定（@Version）之后，我在所有 PUT HTTP 事务中都面临同样的错误

在更新实体时，必须发送该实体的 ID 和版本。如果任何实体字段与其他实体相关，那么对于该字段，我们还应该提供 id 和版本值，而不是 JPA 尝试首先保留该相关实体

**示例**：我们有两个实体 --> **Vehicle** (id,Car,version) ；**更新/保留车辆实体的汽车**（id、版本、品牌）确保车辆实体中的 Car 字段提供了 id 和 version 字段

# c# - 如何将特定的 .hbm.xml 文件添加到 nhibernate 配置以在导出模式中使用

> ID：13478057
> 
> 赞同：2
> 
> 时间：2012-11-20T16:51:15.173
> 
> 标签：c#, nhibernate, triggers, fluent, schemaexport

我正在使用 nhibernate + fluent，我有这个代码

```
FluentConfiguration fc = Fluently.Configure()
            .Database(MySQLConfiguration.Standard.ConnectionString(connectionString).ShowSql()
            .Dialect<NHibernate.Dialect.MySQL5Dialect>().Driver<NHibernate.Driver.MySqlDataDriver>())
            .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<UsuarioMap>()
                .Conventions.Add(PrimaryKey.Name.Is(a => string.Concat("Id", a.EntityType.Name)))
                .Conventions.Add(ForeignKey.Format((x, y) => string.Concat("Id", y.Name))))
            .ExposeConfiguration(BuildSchema); 
```

这会从我的地图文件中添加映射，稍后我使用公开的配置来导出架构

现在我需要添加一个特定的`.hbm.xml`文件以便在我的数据库中创建一个触发器，我不知道如何，我已经编写了`.hbm.xml`文件，它看起来像这样

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <database-object>
    <create>
    CREATE TRIGGER borradoUsuario BEFORE DELETE ON activaciones
    FOR EACH ROW BEGIN set @idUsuario = OLD.IdUsuario;
    SELECT IdHistorialEstado FROM Usuarios WHERE IdUsuario = @idUsuario INTO @IdHistorial;
    SELECT IdDomicilio FROM Usuarios WHERE IdUsuario = @idUsuario INTO @idDomicilio;
    DELETE FROM usuarios WHERE IdUsuario = @idUsuario;
    DELETE FROM domicilios WHERE IdDomicilio = @IdDomicilio;
    DELETE FROM historialestado WHERE IdHistorialEstado = @idHistorial;
    DELETE FROM detallehistorialestado WHERE idHistorialEstado = @idHistorial;
    DELETE FROM inmobiliarias WHERE IdInmobiliaria = @idUsuario;
    DELETE FROM particulares WHERE IdParticular = @idUsuario;
    DELETE FROM moderadores WHERE IdModerador = @idUsuario;
    END
</create>

<drop>
</drop> 
```

我希望我能在这里得到一些帮助 =/

我已经转向另一种方法，不，我有一个从 AbstractAuxiliaryDatabaseObject 扩展的类，它知道创建和删除脚本：

```
public class BorradoUsuarioTrigger : AbstractAuxiliaryDatabaseObject{

    public override string SqlCreateString(Dialect dialect, IMapping p, string defaultCatalog, string defaultSchema){
//The drop is important, because the shema export calls and executes this twice.   

    return @"
        DROP TRIGGER IF EXISTS borradoUsuarioTrigger;
        DELIMITER $$
        CREATE TRIGGER borradoUsuarioTrigger BEFORE DELETE ON activaciones FOR EACH ROW 
        BEGIN 
            DECLARE idHist INTEGER;
            DECLARE idDom INTEGER;
            SET idHist = (SELECT IdHistorialEstado FROM Usuarios WHERE IdUsuario = OLD.IdUsuario);
            SET idDom = (SELECT IdDomicilio FROM Usuarios WHERE IdUsuario = OLD.IdUsuario);
            DELETE FROM domicilios WHERE IdDomicilio = @idDom;
            DELETE FROM historialestado WHERE IdHistorialEstado = @idHist;
            DELETE FROM detallehistorialestado WHERE idHistorialEstado = @idHist;
            DELETE FROM inmobiliarias WHERE IdInmobiliaria = OLD.idUsuario;
            DELETE FROM particulares WHERE IdParticular = OLD.idUsuario;
            DELETE FROM moderadores WHERE IdModerador = OLD.idUsuario;
            DELETE FROM usuarios WHERE IdUsuario = OLD.idUsuario;
        END$$";
    }

    public override string SqlDropString(Dialect dialect, string defaultCatalog, string defaultSchema){
    return @"DROP TRIGGER IF EXISTS borradoUsuarioTrigger";
    }

    public void AddDialectScope(string dialectName){
    throw new NotImplementedException();
    }

    public bool AppliesToDialect(Dialect dialect){
    return true;
    }

    public void SetParameterValues(IDictionary<string, string> parameters){
    base.SetParameterValues(parameters);
    }
} 
```

我想我已经接近我需要的了，但它仍然无法正常工作，我在最深的异常中收到以下消息：

```
"Parameter @idDom must be defined" 
```

我认为这是因为我正在尝试为 sql create 脚本返回一个硬编码的字符串，但我不知道，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:30:59.170

终于得到了答案：

知道 sql 脚本的类看起来像这样

```
public class BorradoUsuarioTrigger : AbstractAuxiliaryDatabaseObject
{
    public override string SqlCreateString(Dialect dialect, IMapping p, string defaultCatalog, string defaultSchema){
    //The drop is important, because the shema export calls and executes this twice.   
    this.Parameters.Add("idHist", "(SELECT IdHistorialEstado FROM Usuarios WHERE IdUsuario = OLD.IdUsuario)");
    this.Parameters.Add("idDom", "(SELECT IdDomicilio FROM Usuarios WHERE IdUsuario = OLD.IdUsuario)");

    StringBuilder builder = new StringBuilder();

    builder.AppendLine("DROP TRIGGER IF EXISTS borradoUsuarioTrigger;");
    builder.AppendLine("CREATE TRIGGER borradoUsuarioTrigger BEFORE DELETE ON activaciones FOR EACH ROW ");
    builder.AppendLine("BEGIN ");
    builder.AppendLine("DELETE FROM domicilios WHERE IdDomicilio = " + this.Parameters["idDom"] + "; ");
    builder.AppendLine("DELETE FROM historialestado WHERE IdHistorialEstado = " + this.Parameters["idHist"] + "; ");
    builder.AppendLine("DELETE FROM detallehistorialestado WHERE idHistorialEstado = " + this.Parameters["idHist"] + "; ");
    builder.AppendLine("DELETE FROM inmobiliarias WHERE IdInmobiliaria = OLD.idUsuario; ");
    builder.AppendLine("DELETE FROM particulares WHERE IdParticular = OLD.idUsuario; ");
    builder.AppendLine("DELETE FROM moderadores WHERE IdModerador = OLD.idUsuario; ");
    builder.AppendLine("DELETE FROM usuarios WHERE IdUsuario = OLD.idUsuario; ");
    builder.AppendLine("END ");

    return builder.ToString();
    }

    public override string SqlDropString(Dialect dialect, string defaultCatalog, string defaultSchema)
    {
        return @"DROP TRIGGER IF EXISTS borradoUsuarioTrigger";
    }

    public void AddDialectScope(string dialectName)
    {
        throw new NotImplementedException();
    }

    public bool AppliesToDialect(Dialect dialect)
    {
        return true;
    }

    public void SetParameterValues(IDictionary<string, string> parameters)
    {
        base.SetParameterValues(parameters);
    }
} 
```

流畅的配置是这样的：

```
 FluentConfiguration fc = Fluently.Configure()
            .Database(MySQLConfiguration.Standard.ConnectionString(connectionString).ShowSql()
            .Dialect<NHibernate.Dialect.MySQL5Dialect>().Driver<NHibernate.Driver.MySqlDataDriver>())
            .Mappings(m => m.FluentMappings
                .AddFromAssemblyOf<UsuarioMap>()
                .Conventions.Add(PrimaryKey.Name.Is(a => string.Concat("Id", a.EntityType.Name)))
                .Conventions.Add(ForeignKey.Format((x, y) => string.Concat("Id", y.Name))))
            .ExposeConfiguration(conf => conf.AddAuxiliaryDatabaseObject(new BorradoUsuarioTrigger()))
            .ExposeConfiguration(BuildSchema); 
```

# php - mail() 不起作用，即使在 php.ini 中设置了 SMTP

> ID：13478059
> 
> 赞同：1
> 
> 时间：2012-11-20T16:51:19.143
> 
> 标签：php, email

我正在尝试让邮件/谴责类型的东西起作用：有邮件组，您加入一个邮件组并离开一个邮件组，您可以通过按一个按钮向整个邮件组发送一封电子邮件，当您按下按钮，您将被定向到将放置表单的页面，然后单击发送

以下代码运行：

```
 $new_subject = $_POST['subject'];
$new_message = $_POST['message'];
// subject and message posted from the forum
if ($new_subject&&$new_message){

    $query = mysql_query("SELECT * FROM mail_groups");
    while($row=mysql_fetch_assoc($query)){
    $id = $row['id'];
    }
// Selects all mail groups, and gets their ID
    $query6 = mysql_query("SELECT * FROM mail_group_members WHERE gid='$id'");
// Selects the members' email out of the specific mail group where the group id is ID
    while($row3=mysql_fetch_assoc($query6)){
        $send_to = $row3['email'];
    // sets the send_to variable, which is different to each user (this is the user's email) 

    mail($send_to,$new_subject,$new_message,$headers);
// tries to send email, but nothing happens, no error messages, nothing
}
header("Location: mail.php");
// redirects to main mail page
} 
```

我在 php.ini***中***设置了 SMTP 服务器（作为我的 ISP-s）

提前感谢所有帮助

# visual-studio-2010 - 设置实体框架 DDL 生成语言

> ID：13478063
> 
> 赞同：1
> 
> 时间：2012-11-20T16:51:29.373
> 
> 标签：visual-studio-2010, entity-framework, visual-studio-2012, table-per-type

我正在使用带有 Visual Studio 2012 或 2010 的实体框架。我正在与安装了不同语言版本（德语）的 Visual Studio 的同事一起工作。

我们的一些模型使用继承。从模型生成数据库时（使用标准值：TablePerTypeStrategy.xaml 和 SSDLToSQL10.tt），EF 生成继承约束。这些约束的名称是本地化的（x_inherits_y vs x_erbt_y）。这意味着，每次有人对模型进行更改并生成 SQL 文件时，所有约束名称都会使用本地化版本进行更新。

这开始成为一个主要的烦恼，因为我们需要知道约束的名称。有时我们需要更新已经部署的数据库，并且无法知道它们是使用德语还是英语约束名称创建的。这使得在不访问数据库的情况下无法编写更新脚本。

除了强制所有开发人员使用相同的语言版本之外，还有什么方法可以阻止 Visual Studio 本地化这些名称？

# oop - 如何在函数式编程中使用多态性？

> ID：13478064
> 
> 赞同：14
> 
> 时间：2012-11-20T16:51:30.277
> 
> 标签：oop, clojure, functional-programming, polymorphism

如何在函数式编程中使用多态性（使用动态类型系统）？

让我们考虑以下示例（首先在 OOP 中，然后在 FP 中）。该程序非常简单 - 有图形列表，我们需要绘制所有这些图形，不同的图形使用不同的绘图算法。

在 OOP 中可以轻松完成，但如何在 FP 中完成呢？特别是在具有动态类型系统的语言中，如 Scheme、Clojure（在编译时没有静态类型解析）？

我创建了简单的代码（实时版本[http://tinkerbin.com/0C3y8D9Z](http://tinkerbin.com/0C3y8D9Z)，按“运行”按钮）。我在 FP 示例中使用了 if/else 开关，但这是一种非常糟糕的方法。如何更好地解决这样的问题？

示例是用 JavaScript 编写的，但这只是为了简单起见，如果看到任何具有动态类型系统的函数式语言的解决方案将会很有趣。

**面向对象**

```
var print = function(message){document.write(message + "\n<br/>")}

// Object Oriented Approach.
var circle = {
  draw: function(){print("drawing circle ...")}
}
var rectangle = {
  draw: function(){print("drawing rectangle ...")}
}

var objects = [circle, rectangle]
objects.forEach(function(o){
  o.draw()
}) 
```

**FP**

```
var print = function(message){document.write(message + "\n<br/>")}

// Functional Approach.
var circle = {type: 'Circle'}
var drawCircle = function(){print("drawing circle ...")}

var rectangle = {type: 'Rectangle'}
var drawRectangle = function(){print("drawing rectangle ...")}

var objects = [circle, rectangle]
objects.forEach(function(o){
  if(o.type == 'Circle') drawCircle(o)
  else if(o.type == 'Rectangle') drawRectangle(o)
  else throw new Error('unknown type!')
}) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T21:22:37.100

您的“FP”版本不是我认为惯用的 FP 示例。在 FP 中，您经常使用变体和模式匹配，而在 OOP 中您将使用类和方法分派。特别是，您只有一个`draw`已经在内部进行调度的函数：

```
var circle = {type: 'Circle'}
var rectangle = {type: 'Rectangle'}

var draw = function(shape) {
  switch (shape.type) {
    case 'Circle': print("drawing circle ..."); break
    case 'Rectangle': print("drawing rectangle ..."); break
  }
}

var objects = [circle, rectangle]
objects.forEach(draw) 
```

（当然，那是 JavaScript。在函数式语言中，您通常有更优雅和简洁的语法，例如：

```
draw `Circle    = print "drawing circle..."
draw `Rectangle = print "drawing rectangle..."

objects = [`Circle, `Rectangle]
foreach draw objects 
```

)

现在，一般的 OO 爱好者会看到上面的代码并说：“但是 OO 解决方案是可扩展的，上面的不是！” 从某种意义上说，您可以轻松地将新形状添加到 OO 版本中，并且在添加时不必触及任何现有形状（或其`draw`功能），这是正确的。使用 FP 方式，您必须进入并扩展`draw`功能以及可能存在的所有其他操作。

但那些人没有看到的是，反过来也是正确的：FP 解决方案是可扩展的，而 OO 解决方案则不然！即，当您在现有形状上添加新*操作*时，您无需触及任何形状定义，也无需触及现有操作。您只需添加另一个函数，而使用 OO，您必须修改每个类或构造函数以包含新操作的实现。

也就是说，就模块化而言，这里存在二元论。沿着两个轴实现同时可扩展性的理想在文献中被称为“表达问题”，虽然存在各种解决方案（尤其是在函数式语言中），但它们通常更复杂。因此，在实践中，您通常希望决定一个维度，这取决于哪个维度更可能对手头的问题很重要。

功能版本还有其他优点。例如，它可以简单地扩展到多调度或更复杂的案例区分。在实现复杂的算法并且不同情况相互关联的情况下，它也是更可取的，这样您就希望将代码放在一个地方。根据经验，每当您开始在 OO 中使用访问者模式时，函数式解决方案会更合适（而且容易得多）。

一些进一步的说明：

*   程序组织中的这种不同偏好并不是 FP 的中心思想。更重要的是不鼓励可变状态，并鼓励高度可重用的高阶抽象。

*   OO 社区有这样一种习惯，即为每个旧想法发明新的（流行的）词。它使用术语“多态性”（与其他地方的含义完全不同）就是一个这样的例子。它只是说能够在不静态知道被调用者是什么的情况下调用函数。您可以在函数是一等值的任何语言中做到这一点。从这个意义上说，您的 OO 解决方案也非常实用。

*   您的问题与类型几乎没有关系。惯用的 OO 和惯用的 FP 解决方案都以无类型或有类型的语言工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T23:52:15.677

在 Clojure 中，有一些协议提供与 Haskell 的类型类基本相同的临时多态性：

```
(defprotocol shape (draw [e]))
(defrecord circle [radius])
(defrecord rectangle [w h])
(extend-protocol shape 
    circle (draw [_] "I am a nice circle")
    rectangle (draw [_] "Can I haz cornerz please?")) 
```

您还可以扩展现有类型：

```
(extend-protocol shape 
   String (draw [_] "I am not a shape, but who cares?")) 
```

然后您可以将 draw 方法应用于某些实例

```
user=> (map draw [(->circle 1) (->rectangle 4 2) "foo"])
("I am a nice circle" "Can I haz cornerz please?" "I am not a shape, but who cares?") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T17:48:12.427

OO 多态性不是函数式编程的一部分。然而，一些函数式语言（例如clojure）具有oo 多态性。

另一种多态是多方法

```
(def circle {:type :circle
             :radius 50})

(def rectangle {:type :rectangle
                :width 5
                :height 10})

(defmulti draw :type)

(defmethod draw :circle [object]
  (println "circle: radius = " (:radius object)))

(defmethod draw :rectangle [object]
  (println "rectangle: "
           "width = " (:width object)
           "height = " (:height object)))

(doseq [o [rectangle circle]] (draw o))
=> rectangle:  width =  5 height =  10
   circle: radius =  50 
```

或者你可以使用功能风格

```
(defn circle [] (println "drawing circle ..."))
(defn rectangle [] (println "drawing rectangle ..."))

(def objects [circle rectangle])

(doseq [o objects] (o))
=> drawing circle ...
   drawing rectangle ... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T17:08:17.250

在主要为函数式编程设计的几种语言中，有一些方法可以实现（即所谓的）多态性，尽管它们与您所说的多态性不同。例如，Haskell 有类型类（不要与经典 OOP 中的类混淆）：

```
class Draw a where
    draw :: a -> SomethingSomthing -- probably IO () for your example, btw 
```

（Scala 有对象，也有明显平行甚至超越类型类的[隐含对象。）然后您可以实现任意数量的独立类型，并使每个类型成为类型类的实例（再次独立，例如在完全不同的模块中）：](http://lambda-the-ultimate.org/node/4039)

```
data Circle = Circle Point Double -- center, radius
data Rectangle = Rect Point Double Double -- center, height, width

instance Draw Circle where
    draw (Circle center radius) = …
instance Draw Rectangle where
    draw (Rect center height width) = … 
```

如果您确实需要那种程度的可扩展性，这可能是您在 Haskell 中使用的。如果您有有限数量的案例属于一起（即您可以`sealed`在 OOP 替代方案中使用类），您可能会使用代数数据类型（见下文）。

另一种方法是做你的 JS 片段所做的事情（顺便说一下，如果你有任意数量的每种类型的对象，而不是你为实现多态性所做的事情，并且这个版本有同样的问题）：嵌入一个在每个对象中执行多态行为的函数。从某种意义上说，您的“OOP”片段已经可以使用了。

```
data Drawable = Drawable (Drawable -> SomethingSomething) {- other fields -}
draw (Drawable draw) = draw Drawable 
```

尽管在静态语言中，这不允许不同的对象具有不同的属性。

与您提出的一堆条件相比，一个更可忍受的替代方案是与代数数据类型进行模式匹配，但仍然相似且具有相同的限制（很难添加另一个形状）。Stackoverflow 上的其他答案已经很好地解释了这些，我将用这种风格给出这个具体的例子：

```
data Shape = Circle {- see second snippet -}
           | Rect {- ditto -}

draw (Circle center radius) = …
draw (Rect center height width) = … 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-20T17:01:44.820

您的第一个代码示例确实没有任何非功能性。即使在不支持面向对象的语言中，您也可以做同样的事情。也就是说，您可以创建一个包含函数的记录/结构/映射，然后将它们放入您的列表中。

在您只有一个函数的简单示例中，您也可以直接创建一个函数列表，例如`objects = [drawCircle, drawRectangle]`.

# excel - 禁用 ActiveX 保存的 Excel 2003 电子表格将不再弹出 ActiveX 提示

> ID：13478069
> 
> 赞同：1
> 
> 时间：2012-11-20T16:51:47.607
> 
> 标签：excel, activex, excel-2003, vba

我有一个使用 ActiveX 的电子表格。我意识到如果用户在第一次提示 ActiveX 时选择**否**，然后保存工作表，则工作表将永远不会提示用户再次启用 ActiveX。

但是，我正在开发的工作表需要启用 ActiveX。所以我的问题是：

如果用户在提示启用 ActiveX**并**保存工作表时第一次选择**否。**如何在下次重新打开工作表时仍提示 ActiveX？换句话说，我怎样才能总是提示用户启用 ActiveX？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:46:04.580

如果未启用 ActiveX，我的工作表中有一个登录宏会引发错误。因此，如果未启用 ActiveX，我会隔离并发现该错误并强制保存并关闭工作表。

代码：

```
Private Sub Workbook_Open()
  ' ...some code...
  On Error GoTo InitializeLoginErrorHandler:
    DoLogin

  Exit Sub

  InitializeLoginErrorHandler:
    MsgBox "ActiveX has not been enabled. ActiveX must be enabled for worksheet to function. Restart worksheet and enable ActiveX." _
      & vbNewLine & vbNewLine & "worksheet will now close without saving any changes."
    ThisWorkbook.Close savechanges:=False
End Sub

Private Sub DoLog()
  ' Login to system through linked .dlls and .ocx. This portion requires ActiveX to be enabled. 
End sub 
```**

# android - Holo.Light 主题但带有白色溢出点？

> ID：13478078
> 
> 赞同：1
> 
> 时间：2012-11-20T16:51:58.670
> 
> 标签：android

如果您将应用程序的主题设置为 Holo.Light，那么您可以获得浅色弹出菜单、深色文本等，这正是我想要的。但是，我的操作栏使用自定义的较深颜色，我希望溢出菜单（点）恢复为白色（就像使用 Theme.Holo 时一样）。我需要在我的主题中覆盖什么才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:41:11.230

```
<style name="Theme" parent="@android:style/Theme.Holo.Light">
    <item name="actionOverflowButtonStyle">@style/OverflowStyle</item>
</style

<style name="OverflowStyle" parent="@android:style/Widget.ActionButton.Overflow">
    <item name="android:src">@drawable/custom_asset</item>
</style> 
```

或使用深色操作栏主题

```
<style name="Theme" parent="@android:style/Theme.Holo.Light.DarkActionBar" /> 
```

# logging - 关于算法复杂度测量

> ID：13478080
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:52:02.660
> 
> 标签：logging, big-o, time-complexity

嘿伙计们，我是新来的，所以我会尽量保持清楚。

在我目前的练习中，我将展示几种排序算法之间的时间差异。为了获得更精确的结果，我采用了几个不同大小的数组（已排序、未排序）并得到了我的结果。我理解 o、big O 等的含义……所以我的问题是关于 theta 在归并排序中的含义。更清楚地说，我知道这个特定算法的复杂性是 n*log(n)，我不明白的是，当我在大小为 2000 的数组中获得例如 15000 毫秒的结果时会发生什么 - 如果我把它在函数 n*log(n) 中，我不应该得到与系统提供的相同的数字吗？或者我是不是乳清了？

我希望我的问题可以理解，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:02:22.460

Big O 表示算法性能接近极限时的趋势，而不是表示任何特定 N 值的结果。例如，如果算法的性能可以表示为 f(x) = 2x + x^ 2，那么它有 x^2 的大 O。

此外，Big O 是独立于硬件的。

如果您想查看您的时间与大 O 之间的关系，请多次运行该算法并增加 n 值并绘制结果图表。您会看到时间遵循类似于 Big O 所描述的图表。

# adfs2.0 - adfs windows 身份验证

> ID：13478081
> 
> 赞同：1
> 
> 时间：2012-11-20T16:52:02.463
> 
> 标签：adfs2.0

我已经尝试搜索这个并且找不到任何东西。

我希望用户拥有真正的 SSO 体验。这意味着他们登录到他们的计算机，当他们点击我们在 ADFS 中建立信任的网络应用程序时，他们会直接进入该网站。现在无论他们被带到 ADFS 表单登录页面。如果用户尚未连接到网络，我们只希望显示表单登录页面。否则，ADFS 应识别用户在网络上并使用 Windows 身份验证。

为了实现这一点，我必须在 ADFS 中进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:11:32.060

在 ADFS web.config 中，您有什么顺序：

```
<localAuthenticationTypes>
    <add name="Integrated" page="auth/integrated/" />      
      <add name="Forms" page="FormsSignIn.aspx" />
      <add name="TlsClient" page="auth/sslclient/" />
      <add name="Basic" page="auth/basic/" />
</localAuthenticationTypes> 
```

表格在上面吗？

这些用户是在 Internet 上还是在 Intranet 上？

您使用 ADFS 代理吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T17:36:38.463

一种选择是为 RedirectingToIdentityProvider 事件添加一个处理程序，方法是将代码放在 global.asax 中本段的正下方。这使您有机会在浏览器重定向到 ADFS 之前跳入并修改请求（查询字符串）的外观。您可以执行此操作来指定身份验证类型或主域（如果您有多个联盟并且想要跳过 HRD），以及可能还有很多我不知道的其他内容。

```
void Application_Init()
    {
        FederatedAuthentication.WSFederationAuthenticationModule.RedirectingToIdentityProvider += new EventHandler<RedirectingToIdentityProviderEventArgs>(WSFederationAuthentication_RedirectingToIdentityProvider);
    } 
```

然后你会向你的处理程序添加代码，看起来像这样：

```
void WSFederationAuthentication_RedirectingToIdentityProvider(object sender, RedirectingToIdentityProviderEventArgs e)
{
WSFederationAuthenticationModule instance = FederatedAuthentication.WSFederationAuthenticationModule;
SignInRequestMessage request = instance.CreateSignInRequest(Guid.NewGuid().ToString(), instance.Realm, true);
request.AuthenticationType = "urn:federation:authentication:windows";
Response.Redirect(request.WriteQueryString());
} 
```

当您将 request.AuthenticationType 设置为该值时，您就是在告诉 ADFS 您想要进行 Windows（集成）身份验证。这就是我让它工作所需要的一切。我不必像 nzpcmad 建议的那样费心在 web.config 中切换身份验证类型的顺序。

此外，为了使其正常工作，IIS 和您的 Web 浏览器在 AD FS 和您的依赖方之外发挥了一些作用，因此在 IE 中，您的用户必须转到工具 > Internet 选项 > 安全并将站点添加到您的本地 Intranet 站点。可能有一种方法可以通过组策略或其他方式来解决这个问题，但这是另一个问题。无论如何，现在我想起来了，这可能是您唯一缺少的步骤。

# c# - 将项目添加到任务栏应用程序菜单

> ID：13478089
> 
> 赞同：4
> 
> 时间：2012-11-20T16:52:26.180
> 
> 标签：c#, winforms, taskbar

我有一个应用程序。我想通过 C# 将我的特定项目添加到右键单击应用程序的任务栏菜单。我想同时添加永久物品和临时物品。

如果我还没有让你明白，这就是我正在谈论的菜单：

![在此处输入图像描述](../Images/bc7c3902d492ab34cc2e1f62c6a21b76.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T16:56:15.850

此功能称为 JumpList，适用于 Windows 7。它是 Microsoft API 的一部分。如何在 C# 中使用它已在[此处](http://www.codeproject.com/Articles/103913/How-to-Create-a-Custom-Jumplist-with-Custom-Events)和[此处](http://channel9.msdn.com/coding4fun/articles/Windows-7-Jump-Lists)详细记录。

为了能够处理 Windows 窗体中的 Jumplist 类，您必须在项目中包含这些 DLL (`Microsoft.WindowsAPICodePack.dll`和`Microsoft.WindowsAPICodePack.Shell.dll`)。您可以从此[CodeProject 项目中获取它们，也可以从](http://www.codeproject.com/Articles/103913/How-to-Create-a-Custom-Jumplist-with-Custom-Events)[WindowsAPICodePack](http://code.msdn.microsoft.com/WindowsAPICodePack)下载开源库，其中包括可用于访问 Windows 7 和 Windows Vista 功能的源代码。您需要在代码顶部添加两个使用：

```
using Microsoft.WindowsAPICodePack.Taskbar;
using Microsoft.WindowsAPICodePack.Shell; 
```

Any`Jumplist`由类别组成，每个类别都有自己`Jumptask`的 s。`Jumptask`WindowsAPICodePack目前支持两种类型的s；`JumplistLink` 和`JumplistSeperator`。_ A`Jumptask`表示用户要执行的操作，例如打开应用程序的新实例或启动另一个程序。这些`Jumptask`s 被分组到称为 的类别中`JumplistCustomCategories`。

# sql - 查询中的动态分组依据

> ID：13478092
> 
> 赞同：0
> 
> 时间：2012-11-20T16:52:39.943
> 
> 标签：sql

有没有办法将 group by 应用或不应用到查询中？例如，我有这个：

```
Col1 Col2 Col3
A    10   X
A    10   NULL
B    12   NULL 
B    12   NULL 
```

只有当我在 Col3 中有值时，我才必须按 Col1 和 Col2 分组，如果 Col3 为空，我不需要对其进行分组。结果应该是：

```
Col1 Col2
A    20  
B    12   
B    12 
```

也许不是一个优雅的例子，但这就是想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:02:32.180

当 col3 不为空时，听起来您想要 col1 的所有唯一值。否则，您需要 col1 的所有值。

假设你有一个支持窗口函数的 SQL 引擎，你可以这样做：

```
select col1, sum(col2)
from (select t.*,
             count(col3) over (partition by col1) as NumCol3Values,
             row_number() over (partition by col1 order by col1) as seqnum
       from t
     ) t
group by col1,
         (case when NumCol3Values > 1 then NULL else seqnum end) 
```

逻辑和你说的差不多。如果有任何非 NULL 值，则 group by 的第二个子句始终评估为 NULL——所有内容都在同一个组中。如果一切都为 NULL，则该子句计算为一个序列号，它将每个值放在单独的行上。

如果没有窗口函数，这会有点困难。如果我假设第 3 列的最小值（当不是 NULL 时）是唯一的，那么以下将起作用：

```
select t.col1,
       (case when minCol3 is null then tsum.col2 else t.col2 end) as col2
from t left outer join
     (select col1, sum(col2) as col2, 
             min(col3) as minCol3
      from t
     ) tsum
     on t.col1 = tsum.col1
where minCol3 is NULL or t.col3 = MinCol3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:11:39.373

回复：*有没有办法在查询中应用或不应用分组？* 不是直接的，但是您可以通过分组将其分解，然后将结果联合在一起。

这行得通吗？

```
Select col1, sum(col2)
from table
group by col1, col2
having max(col3) is not null

union all

select col1, col2
from table t left outer join
 (Select col1, col2
 from table
 group by col1, col2
 having max(col3) is not null) g
where g.col1 is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:17:25.140

这是一个可以满足您要求的 SQL Fiddle： [http ://sqlfiddle.com/#!3/b7f07/2](http://sqlfiddle.com/#!3/b7f07/2)

这是 SQL 本身：

```
SELECT col1, sum(col2) as col2 FROM dataTable WHERE 
col1 in (SELECT col1 from dataTable WHERE col3 IS NOT NULL)
GROUP BY col1
UNION ALL
SELECT col1, col2 FROM dataTable WHERE
(col1 not in 
 (SELECT col1 from dataTable WHERE col3 IS NOT NULL and col1 is not null)) 
```

# c++ - boost chrono endTime - startTime 在 boost 1.51 中返回负数

> ID：13478093
> 
> 赞同：3
> 
> 时间：2012-11-20T16:52:45.367
> 
> 标签：c++, boost, chrono

当我减去 endTime - startTime 时，我的 macbook pro 上的 boost chrono 库 vs1.51 返回负时间。如果您打印时间点，您会看到结束时间早于开始时间。这怎么可能发生？

```
typedef boost::chrono::steady_clock clock_t;
clock_t clock;

// Start time measurement
boost::chrono::time_point<clock_t>  startTime = clock.now();
short test_times = 7;

// Spend some time...
for ( int i=0; i<test_times; ++i )
{
   xnodeptr spResultDoc=parser.parse(inputSrc);

  xstring sXmlResult = spResultDoc->str();
  const char16_t* szDbg = sXmlResult.c_str();

  BOOST_CHECK(spResultDoc->getNodeType()==xnode::DOCUMENT_NODE && sXmlResult == sXml);
}

// Stop time measurement
boost::chrono::time_point<clock_t> endTime = clock.now();
clock_t::duration elapsed( endTime - startTime);

std::cout << std::endl;
std::cout << "Now time: " << clock.now() << std::endl;
std::cout << "Start time: " << startTime << std::endl;
std::cout << "End time: " << endTime << std::endl;

std::cout << std::endl << "Total Parse time: " << elapsed << std::endl;
std::cout << "Avarage Parse time per iteration: " <<  (boost::chrono::duration_cast<boost::chrono::milliseconds>(elapsed) / test_times) << std::endl; 
```

我尝试了不同的时钟，但没有区别。

任何帮助，将不胜感激！

编辑：忘记添加输出：

现在时间：自启动后 1 纳秒

开始时间：自启动以来 140734799802912 纳秒

结束时间：自启动以来 140734799802480 纳秒

总解析时间：**-432**纳秒平均每次迭代解析时间：0 毫秒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:44:45.230

超线程或只是调度干扰，[Boost 实现](http://www.boost.org/doc/libs/1_52_0/doc/html/chrono/appendices.html#chrono.appendices.implementation)对操作系统提供单调支持：

POSIX：`clock_gettime (CLOCK_MONOTONIC)`虽然它仍然可能由于在校准系统时处理超线程的内核错误而失败。

WIN32： `QueryPerformanceCounter()`除了 Nehalem 架构或更新的架构之外，它不会在内核和线程之间是单调的。

OSX: `mach_absolute_time()`，即稳定和高分辨率时钟是相同的。[源代码](http://www.opensource.apple.com/source/Libc/Libc-320.1.3/i386/mach/mach_absolute_time.c)表明它使用了对硬件稳定性的`RDTSC`严格依赖：即不保证。

禁用超线程是一种推荐的方法，但是说在 Windows 上你真的很有限。除了放弃计时器分辨率之外，唯一可用的方法是直接访问底层硬件计时器，同时确保线程亲和性。

现在是向 Boost 提交错误的好时机，我建议：

Win32：使用[`GetTick64Count()`](http://msdn.microsoft.com/en-us/library/ms724411%28v=vs.85%29.aspx)，如此[处](https://stackoverflow.com/q/211257/175849)所述。

OSX：[`clock_get_time (SYSTEM_CLOCK)`](http://www.opensource.apple.com/source/xnu/xnu-1486.2.11/osfmk/man/clock_get_time.html)根据[这个问题](https://stackoverflow.com/q/11680461/175849)使用。

# algorithm - BST 输入的可能排列

> ID：13478094
> 
> 赞同：6
> 
> 时间：2012-11-20T16:52:48.510
> 
> 标签：algorithm, language-agnostic, permutation, binary-search-tree

我得到一个字符串，即“CPHBDZ”。通过向 BST 插入（按此顺序）字母，我将拥有：

```
 C
 / \
B   P
   / \
  H   Z
 /
D 
```

如果我们将字符串的顺序更改为“CBPHDZ”，我们将得到相同的树。而且我必须找到并列出提供相同 BST 的输入字符串的所有排列。我想出了如何计算这些排列的数量，但我无法弄清楚任何实际找到它们的算法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:03:45.113

假设您没有进行任何旋转（等）来平衡树，您可以从树的结构中得出答案：新节点始终作为现有节点的后代添加，因此树中更高的任何节点都必须先于它自己的后代，但可以与它的“同行”（任何既不是它的父母也不是后代的东西）随意重新排列。

例如，由于您有`C`作为树的根，因此`C`必须是从流中读取的第一项。由于它的后代是`B`和`P`，输入中的下一个项目必须是这两个之一。`B`没有任何后代，但`P`有两个:`H`和`Z`，因此它们必须在 之后阅读`P`，但可以相对于`B`. 同样，对于and`Z`可以按任何顺序排列，但必须在 之前。`H``D``H``D`

编辑：至于生成所有这些排列，一种简单的（作弊）方法是使用 Prolog。基本上，您将依赖关系编码为“事实”，它将生成符合这些事实的所有排列。事实上（没有双关语），这几乎是对 Prolog 是/做什么的描述。

自己做，您可能希望以递归方式完成大部分工作。一个有效的排序是一个根，后跟其后代的有效顺序的任何交错。

至于如何进行交织，您将（例如）生成左子树的一个有效顺序和右子树的一个有效顺序。将它们放在一个数组中，其中左子树中的所有项都在开头，右子树中的所有项都在结尾。为了演示，我们假设树还包含一个`A`（作为`B`你展示的后代）。在一个数组中，来自子树的数据如下所示：

```
B A P H Z D 
```

然后我们从左子树的最后一项开始，并“遍历”每个数组向右，每次生成一个新排列：

```
B P A H Z D
P B A H Z D
B P H A Z D
P B H A Z D
P H B A Z D
[ ... ] 
```

对于左子树的每个有效顺序，您需要对右子树的每个有效顺序进行所有这些交织（并将其返回给父级，父级也会这样做）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T20:09:26.863

在 Python 中，

```
tree = {
    'C' : ['B', 'P'],
    'P' : ['H','Z'],
    'H' : ['D']}

def f(tree,  ready):
    if not ready:
        return [[]]
    else:
        rv = []
        for r in ready:
            for rest in f(tree,
                          [n for n in ready if r != n] + tree.get(r, [])):
               rv.append([r] + rest)
        return rv

for o in f(tree, 'C'):
    print ''.join(o) 
```

# url - 删除预填充的 url 表单链接中的“未定义”（来自修改后的 Google 费用报告脚本）

> ID：13478095
> 
> 赞同：2
> 
> 时间：2012-11-20T16:52:48.850
> 
> 标签：url, google-apps-script, google-sheets

我已经修改了标准的 google drive 费用报告系统，将其用作经理可以批准/拒绝表格的能力和经验矩阵。我遇到的问题是，当经理拒绝表单时，它会向员工发送一个链接，其中包含指向由 url 预先填充的表单的链接。

但是，如果员工没有在原始表单中输入值，则 url 会将其填充为“未定义”。

问题，我可以通过 url 删除或替换“未定义”值来预填充表单吗？

也许代码会比我解释得更好。

```
+ "<P><b>" + 'Please re-submit your form <a href=' + USER_FORM_URL +
'&entry_2=' + encodeURIComponent(row.forename) + '&entry_3=' +
encodeURIComponent(row.surname) + '>here</a></b>' 
```

任何帮助将不胜感激，努力寻找“在那里”的解决方案。

汤姆

图片链接[http://s11.postimage.org/dyd1olkoz/url_stack.jpg](http://s11.postimage.org/dyd1olkoz/url_stack.jpg)因为我是新海报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:08:31.853

看起来`getObjects()`脚本中的函数可能会跳过向对象添加值，如果该值在费用报告电子表格中为空，则`row`稍后在 中使用。`sendReportToManager()`因此，稍后尝试附加类似的`row.bananas`内容（或在工作表中为空的内容，因此未在对象上定义）将导致将“未定义”附加到字符串中。如果您查看带有“未定义”值的表单的查询字符串，您应该在 url 的查询字符串中看到“未定义”。

您可以通过将`encodeURIComponent(row.XXXX)`可能为空的列的调用包装成如下所示来避免这种情况：`row.XXXX ? encodeURIComponent(row.XXXX) : ""`

因此，替换以下内容：

```
+ "<P><b>" + 'Please re-submit your form <a href=' + USER_FORM_URL + 
'&entry_2=' + encodeURIComponent(row.forename) + '&entry_3=' + 
```

和

```
+ "<P><b>" + 'Please re-submit your form <a href=' + USER_FORM_URL + 
'&entry_2=' + (row.forename ? encodeURIComponent(row.forename) : "") + '&entry_3=' + 
```

# c# - LDAP 用于检索交换室列表的问题 2007

> ID：13478096
> 
> 赞同：0
> 
> 时间：2012-11-20T16:52:53.703
> 
> 标签：c#, ldap, directoryservices, exchange-server-2007

我正在尝试使用 c# 查找 Exchange Server 2007 的所有会议室。我找到了一种使用 EWS 托管 API 的简单方法：

[http://msdn.microsoft.com/en-us/library/exchange/hh532566(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/hh532566(v=exchg.80).aspx)

不幸的是，GetRoomLists() 不适用于 Exchange Server 2007。我希望如果有人已经工作或知道如何在 Exchange Server 2007 上找到会议室，那将是一个很大的帮助。我想查看 Exchange 服务器上所有可用的会议室，然后想使用它们的属性。

有没有办法可以显示所有现有房间，然后使用其属性，如电话/便笺选项卡信息？

我正在使用 LDAP，但它一直给我错误“服务器无法运行”。我想可能是我使用了错误的凭据。因此，我尝试使用 Google，但它对我没有帮助。

随附请找到我的代码：-

```
 using (DirectoryEntry dir2 = new DirectoryEntry("LDAP://www.google.com/DC=www,DC=google,DC=com", null, null,  AuthenticationTypes.Encryption))
        {
           dir2.RefreshCache();

            DirectorySearcher adSearch = new DirectorySearcher(dir2);
            adSearch.Filter = "(&(objectClass=*)(msExchRecipientDisplayType=7))";
            SearchResultCollection adResult = adSearch.FindAll();

            foreach (SearchResult item in adResult)
            {

                ResultPropertyCollection property = item.Properties;

                ResultPropertyValueCollection name = property["name"];
                ResultPropertyValueCollection proxyAddresses = property["proxyAddresses"];
                ResultPropertyValueCollection legacyExchangeDN = property["legacyExchangeDN"];

                ..........
        }
} 
```

它给了我封闭代码的错误：- `dir2.RefreshCache();` 我不确定，我做错了什么。我尝试过使用不同的 LDAP 值，例如：- `using (DirectoryEntry dir2 = new DirectoryEntry("LDAP://ldap.google.com/DC=www,DC=google,DC=com", null, null, AuthenticationTypes.Encryption))`

`using (DirectoryEntry dir2 = new DirectoryEntry("LDAP:///DC=www,DC=google,DC=com", null, null, AuthenticationTypes.Encryption))`

`using (DirectoryEntry dir2 = new DirectoryEntry("LDAP://DC=www,DC=google,DC=com", null, null, AuthenticationTypes.Encryption))`

但没有什么能真正帮助我。

你知道我做错了什么吗？

随附请查找堆栈跟踪：

```
 at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
   at System.DirectoryServices.DirectoryEntry.Bind()
   at System.DirectoryServices.DirectoryEntry.RefreshCache()
   at Test_Exchange.Program.Main(String[] args) in C:\Inetpub\wwwroot\Test Exchange\Test Exchange\Program.cs:line 26
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

任何帮助或建议将不胜感激。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:12:37.720

我想分享我做错了什么。它可能会帮助其他人。现在运行良好。问题是错误的 AD 名称。请与 IT 或管理员联系，以确认您使用的 Active Directory 名称是否正确。

干杯！！

# java - 双层加密：“使用填充密码解密时，输入长度必须是 16 的倍数……”

> ID：13478097
> 
> 赞同：0
> 
> 时间：2012-11-20T16:52:53.610
> 
> 标签：java, encryption

我有一个由三个服务组成的应用程序：*Client*、*Server*和*TokenService*。为了访问*服务器*上的数据，*客户端必须从**TokenService*获取`SecurityToken`对象。各方之间的通信使用共享密钥加密（*客户端*和*令牌服务*共享一个密钥'A'，*令牌服务*和*服务器*共享一个不同的密钥'B'）。当*客户端向**TokenService*发送请求时，通信使用“A”加密。当*TokenService*返回时********`SecurityToken`对象，该对象使用 B 和 A 加密，如下所示：`((SecurityToken)B)A)`. 这个双重加密的对象首先返回给*客户端*，*客户端*用 A 解密它，将它放入另一个对象中，附加一些附加信息（带有请求的字符串）并将其发送到*服务器*，在那里`SecurityToken`用 B 解密。********

 **一切正常，直到我在服务器端解密`SecurityToken`对象。我得到例外：

```
 javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher
at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:749)
at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:675)
at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313)
at javax.crypto.Cipher.doFinal(Cipher.java:2087)
at mds.hm5.sharedclasses.Decryptor.decryptData(Decryptor.java:40)
at mds.hm5.tokenservice.Main2.main(Main2.java:28) 
```

我能够像这样重新创建这个错误（各方之间没有远程通信）：

```
public static void main(String[] args) {

    SecurityToken s = new SecurityToken(false, "2");

    try {
        byte[] bytes = Encryptor.getBytesFromObject(s);
        bytes = Encryptor.encryptData(bytes, "secretkey1");
        bytes = Encryptor.encryptData(bytes, "secretkey2");
        bytes = Base64.encodeBase64(bytes);

        System.out.println(bytes);

        bytes = Base64.decodeBase64(bytes);
        bytes = Decryptor.decryptData(bytes, "secretkey2");
        bytes = Decryptor.decryptData(bytes, "secretkey1");
        SecurityToken s2 = (SecurityToken) Decryptor.getObjectFromBytes(bytes);

        System.out.println(s2.getRole());

    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
} 
```

**我不知道我在这里做错了什么。就这样创建两层加密是不可能的吗？我错过了什么吗？**

*附加信息：*

这是我的加密器类：

```
public class Encryptor {

public static byte[] encryptData(byte[] credentials, String key){

    Cipher c;
    SecretKeySpec k;
    byte[] byteCredentials = null;
    byte[] encryptedCredentials = null;
    byte[] byteSharedKey = null;

    try {

        byteCredentials = getBytesFromObject(credentials);
        byteSharedKey = getByteKey(key);

        c = Cipher.getInstance("AES");
        k = new SecretKeySpec(byteSharedKey, "AES");
        c.init(Cipher.ENCRYPT_MODE, k);
        encryptedCredentials = c.doFinal(byteCredentials);

    } catch (NoSuchAlgorithmException | NoSuchPaddingException e) {
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (BadPaddingException e) {
        e.printStackTrace();
    }

    return encryptedCredentials;

}

public static byte[] getBytesFromObject(Object credentials) throws IOException{

    //Hmmm.... now I'm thinking I should make generic type for both: Token and ITU_Credentials object, that would have this getBytes and getObject methods.
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutput out = null;
    byte[] newBytes = null;

    try {

      out = new ObjectOutputStream(bos);   
      out.writeObject(credentials);
      newBytes = bos.toByteArray();

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
      out.close();
      bos.close();
    }
    return newBytes;
}

private static byte[] getByteKey(String key) throws UnsupportedEncodingException, NoSuchAlgorithmException{

    //Converting key to SHA-1 and trimming to mach maximum lenght of key

    byte[] bkey = key.getBytes("UTF-8");
    MessageDigest sha = MessageDigest.getInstance("SHA-1");
    bkey = sha.digest(bkey);
    bkey = Arrays.copyOf(bkey, 16);

    return bkey;
} 
```

这是我的 Decryptor 类：

```
public class Decryptor {

public static byte[] decryptData(byte[] encryptedCredentials, String key){

    Cipher c;
    SecretKeySpec k;
    byte[] byteSharedKey = null;
    byte[] byteObject = null;

    try {

        byteSharedKey = getByteKey(key);

        c = Cipher.getInstance("AES");
        k = new SecretKeySpec(byteSharedKey, "AES");
        c.init(Cipher.DECRYPT_MODE, k);
        byteObject = c.doFinal(encryptedCredentials);

    } catch (NoSuchAlgorithmException | NoSuchPaddingException e) {
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IllegalBlockSizeException e) {
        e.printStackTrace();
    } catch (BadPaddingException e) {
        e.printStackTrace();
    }

    return byteObject;

}

public static Object getObjectFromBytes(byte[] credentials) throws IOException, ClassNotFoundException{

    ByteArrayInputStream bis = new ByteArrayInputStream(credentials);
    ObjectInput in = null;
    ITU_Credentials credentialsObj = null;

    try {

        in = new ObjectInputStream(bis);
        credentialsObj = (ITU_Credentials)in.readObject(); 

    } finally {
      bis.close();
      in.close();
    }
    return credentialsObj;
}

private static byte[] getByteKey(String key) throws UnsupportedEncodingException, NoSuchAlgorithmException{

    //Converting key to SHA-1 and trimming to mach maximum lenght of key

    byte[] bkey = key.getBytes("UTF-8");
    MessageDigest sha = MessageDigest.getInstance("SHA-1");
    bkey = sha.digest(bkey);
    bkey = Arrays.copyOf(bkey, 16);

    return bkey;
}

public static void main(String[] args) {
    new Encryptor();
} 
```

}

**编辑：**

按照建议，我将所有替换`e.printStackTrace();`为`throw new RuntimeException(e);`类中的所有`Decriptor`内容以正确抛出异常：

```
public class Decryptor {

public static byte[] decryptData(byte[] encryptedCredentials, String key){

    Cipher c;
    SecretKeySpec k;
    byte[] byteSharedKey = null;
    byte[] byteObject = null;

    try {

        byteSharedKey = getByteKey(key);

        c = Cipher.getInstance("AES");
        k = new SecretKeySpec(byteSharedKey, "AES");
        c.init(Cipher.DECRYPT_MODE, k);
        byteObject = c.doFinal(encryptedCredentials);

    } catch (NoSuchAlgorithmException | NoSuchPaddingException e) {
        throw new RuntimeException(e);
    } catch (InvalidKeyException e) {
        throw new RuntimeException(e);
    } catch (IOException e) {
        throw new RuntimeException(e);
    } catch (IllegalBlockSizeException e) {
        throw new RuntimeException(e);
    } catch (BadPaddingException e) {
        throw new RuntimeException(e);
    }

    return byteObject;

}

public static Object getObjectFromBytes(byte[] credentials) throws IOException, ClassNotFoundException{

    ByteArrayInputStream bis = new ByteArrayInputStream(credentials);
    ObjectInput in = null;
    ITU_Credentials credentialsObj = null;

    try {

        in = new ObjectInputStream(bis);
        credentialsObj = (ITU_Credentials)in.readObject(); 

    } finally {
      bis.close();
      in.close();
    }
    return credentialsObj;
}

private static byte[] getByteKey(String key) throws UnsupportedEncodingException, NoSuchAlgorithmException{

    //Converting key to SHA-1 and trimming to mach maximum lenght of key

    byte[] bkey = key.getBytes("UTF-8");
    MessageDigest sha = MessageDigest.getInstance("SHA-1");
    bkey = sha.digest(bkey);
    bkey = Arrays.copyOf(bkey, 16);

    return bkey;
}

public static void main(String[] args) {
    new Encryptor();
}

} 
```

现在异常如下所示：

```
Exception in thread "main" java.lang.RuntimeException: javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher
at mds.hm5.sharedclasses.Decryptor.decryptData(Decryptor.java:51)
at mds.hm5.tokenservice.Main2.main(Main2.java:28)
Caused by: javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when decrypting with padded cipher
at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:749)
at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:675)
at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:313)
at javax.crypto.Cipher.doFinal(Cipher.java:2087)
at mds.hm5.sharedclasses.Decryptor.decryptData(Decryptor.java:40)
... 1 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:47:38.387

我认为你的问题的根源是：

```
byte[] bytes = Encryptor.getBytesFromObject(s);
bytes = Encryptor.encryptData(bytes, "secretkey1"); 
```

去：

```
//etc.//
byte[] encryptedCredentials = null;
byte[] byteSharedKey = null;

try {
    byteCredentials = getBytesFromObject(credentials);
    //Whoops!  credentials is already a byte array.
//etc.//
catch (and eat) exception.....
return encryptedCredentials; 
```

而且，由于您吃掉了异常并只返回 null，正如 home 在评论中所建议的那样，所以它会继续移动，直到它进入解密步骤，在那里它会引发您没有预料到的异常（当它无法解密时，一个 IllegalBlockSizeException ，它不是您在那里捕获的八种异常类型中的任何一种），并为您提供了一些有用的东西。

这就是我认为正在发生的事情。**

# python - 从 XML 文件中逐行读取数据

> ID：13478100
> 
> 赞同：0
> 
> 时间：2012-11-20T16:53:04.960
> 
> 标签：python

我试图找到一个包含 http 或 // 或 \ 的链接，并在找到后用 href 标记包围，但是当从 xml 读取的数据中逐行读取时。我看到输出与每个字母分开。请请参阅下面的输入和输出..有人可以建议我哪里出错了吗？

```
 INput:-http://pastebin.com/p9H8GQt4
 Currentoutput:- http://pastebin.com/7428jK63

sanity_results = sanity_results.replace('\n','<br>\n')
return sanity_results

def main ():
resultslis=[]
xmlfile = open('results.xml','r')
contents = xmlfile.read()
testresults=getsanityresults(contents)
#print testresults
for line in testresults:
    #print line
    line = line.strip()
    #print line
    line = re.sub(r'(http://[^\s]+|//[^\s]+|\\\\[^\s]+)', r'<a href="\1">\1</a>', line)
    print line       
    resultslis.append(line)
print resultslis

if __name__ == '__main__':
main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:00:59.960

您想使用 XML 解析器，例如

*   元素
*   lxml
*   迷你世界

等用于解析任何类型的 XML 文件。自己解析 XML - 尤其是逐行解析很容易出错。特别是正则表达式的使用是被设计破坏的。不要那样做。

聪明点，改用 XML 解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:02:15.033

您正在迭代字符串，而不是文件。

如果要遍历字符串中的行，请使用`str.splitlines`：

```
>>> text ='''first
... second
... '''
>>> for line in text.splitlines():
...     print(line)
... 
first
second
>>> for char in text:
...     print(char)
... 
f
i
r
s
t

s
e
c
o
n
d 
```

无论如何，我建议您使用 XML 解析器。已经提供了一个，`stdlib`并且周围还有很多额外的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:04:28.063

问题是这条线：

```
contents = xmlfile.read() 
```

它返回一个字符串；因此迭代对字符进行操作。用 readlines() 替换 read() ，你就有了预期的行。

# mysql - mySQL 查询 - #1054 - 未知列 3

> ID：13478102
> 
> 赞同：0
> 
> 时间：2012-11-20T16:53:08.113
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL #1054 未知列](https://stackoverflow.com/questions/12951903/mysql-1054-unknown-column)

我需要一个查询，它只提取与用户提供的搜索查询匹配的记录。棘手的部分是用户正在搜索的信息在另一个表中。我的应用程序正在从名为“计算机”的表中提取记录。在“计算机”内有一列有打印机的 ID 号（default_printer）。所有打印机信息，例如名称（用户正在搜索）都在用户正在搜索的“打印机”表中。

所以自然我需要列出所有计算机信息，但同时将“计算机”表中的 ID 解析为“打印机”表中的名称。这是我到目前为止提出的查询：

```
 SELECT c.id, c.name, p.name default_printer, c.description
       FROM computers c, groups g
 INNER JOIN printers p
         ON g.default_printer = p.id OR c.default_printer = p.id
      WHERE p.name LIKE 'mfd%' 
```

问题是我收到错误：#1054 - 'on 子句'中的未知列'c.default_printer'。'computers' 表有一个名为 'default_printer' 的列。

这是我的表架构：

```
Table name: computers
Columns: id, name, description, default_printer, report_date, guid

Table name: printers
Columns: id, name, path, location, description

Table name: groups
Columns: id, name, description, default_printer 
```

我卡住了，求救！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:55:12.650

不要将逗号表示法与显式连接表示法混合使用，您将无法访问您的某些别名。如果您无权访问别名，则无法引用其列。我假设组有一个专栏`id`

此外，如其他地方所述，我建议您在解决此问题时为标签“default_printer”使用不同的名称，以便清楚起见。

```
SELECT c.id, c.name, p.name the_default_printer, c.description
   FROM computers c
   INNER JOIN groups g  ON g.id = c.guid
   INNER JOIN printers p
     ON g.default_printer = p.id OR c.default_printer = p.id
  WHERE p.name LIKE 'mfd%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:55:00.437

您在 p.name 和 default_printer 之间缺少逗号

# .net - 使用 RegEx .NET 匹配包括小数在内的零

> ID：13478107
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:53:22.657
> 
> 标签：.net, regex, zero

我有一个最多接受 7 个字符的文本框。如果在小数点之前和/或之后全为零，我需要确保不接受该值，但我无法弄清楚模式

例如 000、00.000、0.0000 等。

可以允许 0.001、0.1 等情况

已经尝试过 ^[0] 但这不允许单个零，或者不允许组合，例如 0.001

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:58:38.360

```
[0.]* 
```

将匹配空白、零和小数点。不完全符合您的要求，但可能适用于您的情况。

实际上，您可能想要匹配的不仅仅是零。

```
\d*[1-9]\d*(?:\.(?:\d*[1-9]+\d*)?)?|\d+\.\d*[1-9]+\d* 
```

它将匹配小数点前的某个数字（至少一个非零）与可选的小数点和一些数字。或者，一些数字，一个小数，然后是一些数字（至少一个非零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:04:37.573

```
^(?=.*[1-9])\d+(\.\d+)?$ 
```

此正则表达式将接受满足以下条件的字符串：

*   字符串中必须有一个 1-9 的数字 -`(?=.*[1-9])`
*   它必须以一位或多位数字开头 -`\d+`
*   它可以选择以句点和一个或多个数字结尾 -`(\.\d+)?`

它将匹配这些字符串：

*   `42`
*   `42.42`

它不会匹配这些字符串：

*   `0`
*   `0.0`
*   `42.`
*   `.42`

[在这里查看它的实际应用。](http://refiddle.com/gd7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:35:02.803

正则表达式相当简单：

```
@"^(?![0.]*$)\d*\.?\d+$" 
```

但是，**正则表达式不是您应该使用的。**如果您正在使用 ASP.NET WebForms，您应该使用 CompareValidator：

```
<asp:CompareValidator id="Compare1Validator1" runat="server" 
       ControlToValidate="TextBox1" 
       Operator="DataTypeCheck"
       Type="Double" />

<asp:CompareValidator id="Compare1Validator2" runat="server" 
       ControlToValidate="TextBox1" 
       Operator="NotEqual"
       Type="Double"
       ValueToCompare="0" /> 
```

如果您使用 C#，请使用`double.TryParse`和/或字符串函数：

```
var str = TextBox1.Text.Trim();
var textBoxValue;

if (!double.TryParse(str, out textBoxValue)) || textBoxValue == 0)
{
    throw new Exception("Input was not a properly-formatted, nonzero number.");
} 
```

# ajax - 如何在 Joomla 组件中发出 Ajax 请求

> ID：13478108
> 
> 赞同：8
> 
> 时间：2012-11-20T16:53:23.873
> 
> 标签：ajax, joomla

这是我调用 ajax 请求时得到的屏幕截图：

![在此处输入图像描述](../Images/bf5c3bca9f8859806fdd787955388ea2.png)

如何只运行任务而不打印整个页面？这是我的ajax调用：

```
$.ajax
({
type: "POST",
url: "index.php?option=com_similar&task=abc",
    data: {
        id: id,
        name: name,
        similar_id: similar_id,
    },
cache: false,
success: function(html)
{
$("#flash").fadeOut("slow");
$("#content"+similar_id).html(html);
} 
});
});

$(".close").click(function()
{
$("#votebox").slideUp("slow");
});

}); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-20T18:04:15.430

**不要退出或死亡**，Joomla！有它处理这些东西的好方法。

以下答案在 Joomla 中进行了测试！2.5 和 3（对于 1.5。也可以工作）。

* * *

**一般的**

您的任务**URL**需要如下所示：

`index.php?option=com_similar&task=abc&format=raw`

然后创建将使用视图的控制器，比如说 Abc，它将包含文件 view.raw.html（与普通视图文件相同）。

下面是生成原始 HTML 响应的代码：

**/控制器.php**

```
public function abc() 
{
    // Set view
    JRequest::setVar('view', 'Abc');
    parent::display();
} 
```

**/views/abc/view.raw.php**

```
<?php
defined('_JEXEC') or die;

jimport('joomla.application.component.view');

class SimilarViewAbc extends JView
{
    function display($tpl = null)
    {
        parent::display($tpl);
    }
} 
```

**/views/abc/tmpl/default.php**

```
<?php

echo "Hello World from /views/abc/tmpl/default.php"; 
```

*Note: This is the solution I would use if I had to return HTML (it's cleaner and follows Joomla logic). For returning simple JSON data, see below how to put everything in the controller.*

* * *

If you make your Ajax request to a **subcontroller**, like:

`index.php?option=com_similar&controller=abc&format=raw`

Than your subcontroller name (for the raw view) needs to be `abc.raw.php`.

This means also that you will / may have 2 subcontrollers named Abc.

If you return JSON, it may make sense to use `format=json` and `abc.json.php`. In Joomla 2.5\. I had some issues getting this option to work (somehow the output was corrupted), so I used raw.

* * *

If you need to **generate a valid JSON response**, check out the docs page [Generating JSON output](http://docs.joomla.org/Generating_JSON_output)

```
// We assume that the whatver you do was a success.
$response = array("success" => true);
// You can also return something like:
$response = array("success" => false, "error"=> "Could not find ...");

// Get the document object.
$document = JFactory::getDocument();

// Set the MIME type for JSON output.
$document->setMimeEncoding('application/json');

// Change the suggested filename.
JResponse::setHeader('Content-Disposition','attachment;filename="result.json"');

echo json_encode($response); 
```

You would generally put this code in the controller (you will call a model which will return the data you encode - a very common scenario). If you need to take it further, you can also create a JSON view (view.json.php), similar with the raw example.

* * *

**Security**

Now that the Ajax request is working, don't close the page yet. Read below.

Don't forget to check for request forgeries. `JSession::checkToken()` come in handy here. Read the documentation on How to add [CSRF anti-spoofing to forms](http://docs.joomla.org/How_to_add_CSRF_anti-spoofing_to_forms)

* * *

**Multilingual sites**

It may happen that if you don't send the language name in the request, Joomla won't translate the language strings you want.

Consider appending somehow the lang param to your request (like `&lang=de`).

* * *

*New in Joomla 3.2!* - [Joomla! Ajax Interface](https://github.com/Joomla-Ajax-Interface/component/blob/master/README.md)

Joomla 现在提供了一种轻量级的方式来处理插件或模块中的 Ajax 请求。您可能想使用 Joomla！如果您还没有组件或者需要从已有的模块发出请求，则为 Ajax 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T12:48:02.333

如果您只想将响应输出包含在某些 HTML 元素中，请将 format=raw 附加到您的 URL 中，如上所述。然后你可以有一个这样的控制器功能：

```
function abc(){

//... handle the request, read variables, whatever
print "this is what I want to place in my html";

} 
```

AJAX 响应将输出您在控制器中打印/回显的所有内容。

# c++ - 在资源脚本 (.rc) 中包含问题

> ID：13478109
> 
> 赞同：0
> 
> 时间：2012-11-20T16:53:38.173
> 
> 标签：c++, mfc

我做了一个项目（实际上是复制的，但它来自一个非常过时的旧项目，不再编译）。它是一个 MFC 项目。在 .rc 文件中包含两个文件，这两个文件也用于正常代码本身。问题是当我编译时，在 .rc 文件中我收到一个错误，说它找不到任何一个文件。

.rc 文件和主项目位于不同的文件夹中，但文件夹的数量相同。所以目录结构是：

```
ManagerDir->ManagerProj
ManagerDir->ManagerProj.rc 
```

在我的附加依赖项中，我有一个指向它找不到的文件所在的文件夹的路径。这适用于项目代码。在 .rc 文件中，如果我给出长的 ..\..\Dir1\subDir\.. 路径，则包含工作。问题是同样的事情正在发生，所以这似乎是一个症状，而不是问题。

我尝试将 rc 脚本从现在的位置移动到与项目代码相同的文件夹中，但是当我这样做时它会重新编写 rc 脚本。

有谁知道可能会发生什么？

# php - 更新会话变量

> ID：13478110
> 
> 赞同：0
> 
> 时间：2012-11-20T16:53:40.677
> 
> 标签：php, ajax, session-variables

我在 index.php 中有以下代码：

```
<div class="done">
        <b>Thank you<?php
             echo $_SESSION['session_vname']." "; 
             echo $_SESSION['session_lname']."! </b><br><br>Email: ";
             echo $_SESSION['session_email']."<br> Status: ";
             echo $_SESSION['session_status']."<br>";

        ?>
    </div> 
```

和

```
<div class="form">
        <form method="post" action="process.php">
            <div class="element">
                <label>First Name</label>
                <input type="text" name="vname" class="text" />
            </div>
            <div class="element">
                <label>Last Name</label>
                <input type="text" name="lname" class="text" />
            </div>
            <div class="element">
                <label>Email</label>
                <input type="text" name="email" class="text" />
            </div>
            <div class="element">
                <label>Status</label>
                <input type="text" name="status" class="text" />
            </div>
            <div class="element">
                <input type="submit" id="submit"/>
                <div class="loading"></div>
            </div>
        </form>
    </div> 
```

我使用 ajax 提交执行表单，因此 index.php 不会刷新。完成后会得到一个fadeOut 和一个fadeIn。

**这工作正常，除了以下部分：**

当显示*div class="form"*时，它显示上次提交之前表单中的会话变量。

**例子：**

第一个输入： session_vname = testa

第一个输出 $_SESSION['session_vname'] = none

第二个输入： session_vname = 溢出

第二个输出 $_SESSION['session_vname'] = testa

**所以最后的问题是：**

如何在表单提交后强制更新会话变量 index.php 也没有重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:58:19.910

在页面显示给查看器之前，PHP 代码在服务器端执行。这意味着如果您不想刷新整个页面，则需要使用 JavaScript 更新静态元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:01:35.530

您不能使用 javascript 更新服务器端 php 会话，您应该使用 cookie 来实现该类型的功能

# php - 使用 " 和 ' 重定向到 url

> ID：13478112
> 
> 赞同：1
> 
> 时间：2012-11-20T16:53:51.203
> 
> 标签：php, redirect

嗨，我有链接，其中有“和”，例如：`http://site.com/?sd=text&sery=&son="><ic=x onerror="`

```
<?
header("HTTP/1.1 301 Moved Permanently");
header("Location: http://site.com/?sd=text&sery=&son="><ic=x onerror=");
exit;
?> 
```

如何正确编写脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:58:05.303

您必须使用 php 的[`urlencode()`](http://php.net/manual/en/function.urlencode.php)函数对其进行 url 编码。这是在查询字符串中编码键和值的正确方法。您还必须使用前导反斜杠转义引号，以便它们包含在双引号字符串文字中。尝试这个：

```
<?
header("HTTP/1.1 301 Moved Permanently");
header("Location: http://site.com/?sd=text&sery=&son=" . urlencode("\"><ic=x onerror=\""));
exit;
?> 
```

或者，在这种情况下，您可以单引号您的字符串文字，这将消除转义双引号的需要。注意：如果您对字符串进行单引号，则字符串中出现的任何撇号字符都需要使用前导反斜杠进行转义。尽管问题的标题和描述，我在您的示例中看不到任何内容。

```
<?
header('HTTP/1.1 301 Moved Permanently');
header('Location: http://site.com/?sd=text&sery=&son=' . urlencode('"><ic=x onerror="'));
exit;
?> 
```

# android - Android - 渐变怪异

> ID：13478116
> 
> 赞同：2
> 
> 时间：2012-11-20T16:54:03.743
> 
> 标签：android, drawable, gradient

我有一个“Tiles”的 GridView，每个都具有以下`android:background`属性：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
        android:endColor="#00FFFFFF"
        android:gradientRadius="180"
        android:startColor="#55FFFFFF"
        android:type="radial" />

</shape> 
```

当可滚动网格最初呈现时，图块如下所示：

![在此处输入图像描述](../Images/15d9dbd0e1b68fccc5187b2593e966d4.png)

列表向下滚动后，即使只是一个像素，所有的图块都会有这个新的、像素化的渐变：

![在此处输入图像描述](../Images/906e9005f1436c5c3382f634bc33995a.png)

渐变位于相对布局上，定义如下（其中有一个用于星形的 ImageView、一个 TextView 等）：

```
<RelativeLayout
    android:id="@+id/tile_image_layout_gradient"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/radialbg"
    android:orientation="vertical"
    android:paddingBottom="10dp"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    android:paddingTop="20dp" /> 
```

这是一款运行 Android 2.3.4 的 Experia 手机。Galaxy S3 似乎可以很好地渲染它，但任何基于 4.x 的 x86 仿真器也有同样的伪影问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:01:12.703

请尝试在您的`onCreate()`方法中设置它，之前`setContentView()`：

```
getWindow().setFormat(PixelFormat.RGBA_8888); 
```

在这种情况下，您可能还需要以编程方式设置背景，而不是通过 xml。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:01:17.373

将以下覆盖添加到您的活动中，这应该通过将窗口格式设置为支持更多颜色来解决您看到的色带问题。

```
@Override
public void onAttachedToWindow() {
    getWindow().setFormat(PixelFormat.RGBA_8888);
} 
```

更多信息： http: [//developer.android.com/reference/android/view/Window.html#setFormat(int)](http://developer.android.com/reference/android/view/Window.html#setFormat%28int%29)

# c# - 图表轴标签间隔问题

> ID：13478117
> 
> 赞同：1
> 
> 时间：2012-11-20T16:54:03.657
> 
> 标签：c#, asp.net, charts, axis-labels

`dropdown`我正在制作一个图表，该图表将显示从列表中选择的可变时间段内的出勤率。我正在尝试根据所选值更改 x 轴的间隔。我使用了 MSDN 的图表控件教程中的代码，但问题是当我选择下拉项时，我只能得到一两个间隔。

当我选择 1（1 个月）时，我会从最小日期 10/14 开始得到一个间隔。当我选择 3（3 个月）时，我应该得到几个两周的间隔，但我只得到 2 个月的间隔。

有人可以帮我弄清楚为什么我会得到这些结果以及如何解决它吗？

下面的代码显示了我到目前为止在下拉列表的事件处理程序中的内容：

```
public void AttendanceChange(Object sender, EventArgs e){
        string StatusSelect = this.AttendanceSelect.SelectedValue;
    int Time = Convert.ToInt32(StatusSelect);

    if (Time == 1)
        SetAxisInterval(Chart3.ChartAreas[0].AxisX, 1, DateTimeIntervalType.Weeks);
    else if (Time == 3)
        SetAxisInterval(Chart3.ChartAreas[0].AxisX, 1, DateTimeIntervalType.Weeks);
    else if (Time == 6)
        SetAxisInterval(Chart3.ChartAreas[0].AxisX, 1, DateTimeIntervalType.Months);
    else if (Time == 12)
        SetAxisInterval(Chart3.ChartAreas[0].AxisX, 2, DateTimeIntervalType.Months);
    else if (Time == 24)
        SetAxisInterval(Chart3.ChartAreas[0].AxisX, 3, DateTimeIntervalType.Months);
} 
```

以下是更改间隔的方法：

```
public void SetAxisInterval(Axis axis, int interval, DateTimeIntervalType intervalType)
{
    axis.Interval = interval;
    axis.IntervalType = intervalType;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:56:36.517

这里的问题与加载的每个日期都被计为一周中的一天而不是一周本身这一事实有关。我正在这篇文章中寻找这个问题的答案：[.Net Chart display dates as days in a week](https://stackoverflow.com/questions/13614209/net-chart-displaying-dates-as-days-in-a-week)。

# module - 雅虎管道翻译模块丢失

> ID：13478118
> 
> 赞同：2
> 
> 时间：2012-11-20T16:54:11.843
> 
> 标签：module, translation, yahoo-pipes

我尝试构建一个 yahoo 管道，以便将不同语言的 RSS 提要翻译成一种。在网上搜索有很多过去 2 年的示例和教程。通过其他用户的雅虎管道灼热，有许多管道，准备克隆......

...但如果我想建立自己的，需要翻译模块。这通常是“字符串”子菜单的一部分。

但我找不到翻译模块。那里没人！

翻译模块仍然存在于[yahoo 管道文档](http://pipes.yahoo.com/pipes/docs?doc=string#Translate) 中，但在我的管道源代码编辑器中不可用。

雅虎删除了这个模块吗？还是我必须先“激活”某些东西才能使用管道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:23:10.720

最初的翻译工具（Babelfish.yahoo.com）于 2012 年初关闭，因此翻译模块停止工作。

Yahoo Pipes 博客最近描述了一种可以使用的新替换方法：http: [//pipes.yqlblog.net/2012/12/10/pipes-translate-module/](http://pipes.yqlblog.net/2012/12/10/pipes-translate-module/)

# django - 使用不同的字段名称从 3rd 方 POST 填充 Django 表单

> ID：13478119
> 
> 赞同：1
> 
> 时间：2012-11-20T16:54:15.033
> 
> 标签：django, post, django-forms

我的 Django 应用程序将处理来自第 3 方支付处理器的发布数据。我想使用 Django 表单来清理和处理这些数据，但是 POST 变量的名称对于 Django 表单字段来说不是有效的名称。如何将这些重新映射到我的表单？

所以，我有一个表格：

```
class PayResponseForm(forms.Form):
    status = forms.Charfield()
    message = forms.CharField()
    avs_code = forms.CharField(max_length=1) 
```

我从第 3 部分网站获得的帖子如下所示：

```
request.POST['FinalStatus']
request.POST['MErrMsg']
request.POST['avs-code'] 
```

如何将这些 post 变量映射到我的表单字段？如果在我看来，我只是做类似的事情，它会引起问题`request.POST['status'] = request.POST['FinalStatus']`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:08:20.970

为了整洁，您可以使用`request.POST['status'] = request.POST.pop('FinalStatus')`，否则使用您的方法非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T19:41:34.167

您可以为表单 init 创建自己的字典：

```
if request.method == 'POST':
    if need_to_convert_post(request):
        post = {
            'field1': None,
            'field2': None,
            'field3': None,
        }
        post['field1'] = request.POST.get('SomeOtherField1', None)
    else:
        post = request.POST
    form = Form1(post)
else:
    form = Form1() 
```

并检测何时需要更改帖子：

```
def need_to_convert_post(request):
    if 'uniqueCheckField' in request.POST:
        return True
    return False 
```

# c# - 如何递归搜索具有多个通配符的目录？

> ID：13478121
> 
> 赞同：2
> 
> 时间：2012-11-20T16:54:22.373
> 
> 标签：c#, .net, search, path, directory

使用 C# (.NET)，如何在给定目录搜索掩码的情况下搜索文件系统：(？)

```
\\server\Scanner\images\*Images\*\*_* 
```

例如，我需要先找到所有顶级目录：

```
\\server\Scanner\images\Job1Images
\\server\Scanner\images\Job2Images 
```

...然后我需要继续使用搜索掩码：

```
\\server\Scanner\images\Job1Images\*\*_*
\\server\Scanner\images\Job2Images\*\*_* 
```

这似乎并不太复杂，但我无法为我的生活弄明白......

如上所述，我使用的是 C# 和 .NET。搜索可能试图定位目录或文件。（即 *.txt 或 <*Directory>）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:01:19.403

像这样：

顶级目录：

```
 //get Top level
   string[] TopLevel = Directory.GetDirectories(path); 
```

然后您将不得不使用通配符模式对此文件夹执行递归函数，例如：

```
 // Only get subdirectories that begin with the letter "p." 
            string pattern = "p*";
            string[] dirs = folder.GetDirectories(path, pattern); 
```

我建议您使用通配符来获取数组输出，如果使用递归函数或直接查询路径，您将找出最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:49:04.587

**编辑**：啊，.NET 4 的新功能，因此您不必执行递归函数（感谢 Matthew Brubaker）

```
IEnumerable<String> matchingFilePaths2 = System.IO.Directory.EnumerateFiles(@"C:\some folder to start in", filePatternToMatchOn, System.IO.SearchOption.AllDirectories); 
```

第一个答案：

```
//get all files that have an underscore - searches all folders under the start folder
List<String> matchingFilePaths = new List<string>();
String filePatternToMatchOn = "*_*";
FileUtilities.GetAllFilesMatchingPattern(@"C:\some folder to start in", ref matchingFilePaths, filePatternToMatchOn); 
```

...

```
public static void GetAllFilesMatchingPattern(String pathToGetFilesIn, ref List<String> fullFilePaths, String searchPattern)
{
    //get all files in current directory that match the pattern
    String[] filePathsInCurrentDir = Directory.GetFiles(pathToGetFilesIn, searchPattern);
    foreach (String fullPath in filePathsInCurrentDir)
    {
        fullFilePaths.Add(fullPath);
    }

    //call this method recursively for all directories
    String[] directories = Directory.GetDirectories(pathToGetFilesIn);
    foreach (String path in directories)
    {
        GetAllFilesMatchingPattern(path, ref fullFilePaths, searchPattern);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T18:58:00.877

```
 public static IEnumerable<string> GetImages()
{    
    //For each "*Image" directory
    foreach (var jobFolder in Directory.EnumerateDirectories(@"\\server\Scanner\images", "*Images"))
    {
        //For each first level subdirectory
        foreach (var jobSubFolder in Directory.EnumerateDirectories(jobFolder))
        {
            //Enumerate each file containing a '_'
            foreach (var filePath in Directory.EnumerateFiles(jobSubFolder, "*_*", SearchOption.TopDirectoryOnly))
            {                               
                yield return filePath;
            }
        }
    }
} 
```

仅枚举每个“*Image”目录的第一级子目录中的文件。

最后你可以使用它：

```
foreach (var path in GetImages())
            {
                Console.WriteLine(path);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-25T12:30:51.130

有一个 C# 过程，您可以使用 * 和 ? 等通配符按路径模式搜索文件夹。

示例如果将路径模式 C:\Folder?*\Folder2 传递给过程，则将返回文件夹路径列表

C:\文件夹1\A\文件夹2

C:\文件夹A\B\文件夹2

...

等等

```
static List<string> GetFoldersByPathPattern(string folderPathPattern)
{
    List<string> directories = new List<string>();
    directories.Add("");

    string[] folderParts = folderPathPattern.Split(new char[] { '\\' }, StringSplitOptions.None);
    foreach (string folderPart in folderParts)
    {

        if (folderPart.Contains('*') || folderPart.Contains('?'))
        {
            List<string> newDirectories = new List<string>();

            foreach (string directory in directories)
            {
                foreach (string newDirectory in Directory.GetDirectories(directory, folderPart))
                {
                    newDirectories.Add(newDirectory);
                }
            }

            directories = newDirectories;
        }
        else
        {
            for (int i = 0; i < directories.Count(); i++)
            {
                directories[i] = directories[i] + folderPart + "\\";
            }
        }
    }

    return directories;
} 
```

# iphone - 以编程方式在子类 UIView 的子视图上自动布局

> ID：13478128
> 
> 赞同：12
> 
> 时间：2012-11-20T16:54:39.707
> 
> 标签：iphone, ios6, nslayoutconstraint

我将 UIView 子类化为自定义 groupView，我用它以简单的方式向我的布局添加一些东西。这个 groupView 包括一个用作标题的 UILabel 和一个在它的 CALayer 上绘制一个带有背景颜色的 roundRect 的 UIView。想想 UITableView 的部分。我通过删除 UIView 并将其类更改为我的子类来将此 groupView 添加到情节提要。一切正常，我通过 Xcode 中用户定义的运行时属性设置标题。一切都很好，我在故事板上的这个视图中添加了 UILabels，它在运行时创建了标题标签和圆形矩形。

我的 groupView 的结构：

1.  groupView: (UIView)clipToBounds:NO;
    *   标题：（UILabel）位于 groupView 上方。
    *   contentView:(UIView) 通过CALayer 创建roundRect 和颜色，应该和groupView 一样大小。

所以有什么问题？好吧，开始处理自动布局是一件很痛苦的事情，但是为了让这个子类 UIView 工作，我需要以编程方式设置 contentView 约束。我无法弄清楚这个自动布局 ASCII 格式字符串的语法。目前我有：

```
 _contentView = [[UIView alloc]initWithFrame:self.bounds];

    _contentView.layer.cornerRadius = 5.0f;
    _contentView.layer.masksToBounds=YES;
    _contentView.backgroundColor=_backgroundColor;
    _contentView.layer.borderWidth=_borderWidth;
    _contentView.layer.borderColor=_borderColor.CGColor;
    [self insertSubview:_contentView atIndex:0];
    NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(self,_contentView);
    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"[self]-0-[_contentView]-0-[self]" options:0 metrics:nil views:viewsDictionary];

    for (NSLayoutConstraint *constraint in constraints) {
        [_contentView addConstraint:constraint];
    } 
```

哪个崩溃：***由于未捕获的异常“NSGenericException”而终止应用程序，原因：“无法在视图上安装约束。约束是否引用了视图子树之外的内容？那是违法的。约束：视图：>'

我先尝试了这个，它仍然没有工作：

```
 NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(_contentView);
    NSArray *constraints = [NSLayoutConstraint constraintsWithVisualFormat:@"|-0-[_contentView]-0-|" options:0 metrics:nil views:viewsDictionary]; 
```

哪个崩溃：***由于未捕获的异常“NSGenericException”而终止应用程序，原因：“无法在视图上安装约束。约束是否引用了视图子树之外的内容？那是违法的。约束：视图：>'

> RANT：不知何故，这个 AutoLayout 应该可以节省我们的工作量，但我不明白现在的好处是如何超过开销的。他们到底为什么要从使用引用和方法甚至类型定义转移到这种古老的格式字符串？做起来容易多少：[_contentView 约束：NSLayoutFormatAlignLeading toView:self withDistance:0.0f]; 或者类似的东西？在这一点上，我更愿意处理弹簧和支柱。

任何帮助理解或向我展示将 contentView 限制为 self 大小的语法都会有所帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-20T17:13:24.970

该错误告诉您您需要知道的内容：

> 约束是否引用了视图子树之外的内容？

是的，它确实。它引用了它的超级视图。

您所做的这些约束需要应用于超级视图，在本例中为`groupView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T21:36:38.660

该| 字符代表视觉格式语言中的超级视图，所以我认为你想要：

```
@"|-0-[_contentView]-0-|" 
```

然后您需要将约束添加到 self 而不是 contentView，因为您需要将其添加到可以看到所有参与者的视图中。

这是视觉语言的参考： [https ://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3- SW1](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3-SW1)

您还可以使用以下方法完全避免视觉格式：

```
+(id)constraintWithItem:(id)view1 attribute:(NSLayoutAttribute)attr1 relatedBy:(NSLayoutRelation)relation toItem:(id)view2 attribute:(NSLayoutAttribute)attr2 multiplier:(CGFloat)multiplier constant:(CGFloat)c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T06:41:51.610

尝试检查约束，它们是否正确添加到视图中

例如：

```
UIView *yellowView = [[UIView alloc] init];
yellowView.backgroundColor = [UIColor yellowColor];
yellowView.translatesAutoresizingMaskIntoConstraints = false;
[self.view addSubview:yellowView];

//ios 9 last
NSLayoutConstraint *heightAnchor = [yellowView.heightAnchor constraintEqualToAnchor:self.purView.heightAnchor];
// addConstraints
[self.view  addConstraints:@[heightAnchor]];
[self.view setNeedsLayout]; 
```

如果添加`heightAnchor to` `yellowView`喜欢跟随。它会显示错误

> [yellowView addConstraints:@[heightAnchor]];

# android - 如何将（已购买的）Android 应用程序作为礼物赠送给客户？

> ID：13478130
> 
> 赞同：7
> 
> 时间：2012-11-20T16:54:42.200
> 
> 标签：android, google-play, google-checkout, android-lvl

是的，所以，我知道，这不是“程序员”的问题：）但是客户有时会帮助我们（开发人员）编写代码，所以我们（开发人员）应该心存感激。我认为对我的问题的回答对所有安卓开发者都有用。

用户购买了我的应用。退款期（15 分钟）当然已经结束。现在我想把钱还给他作为礼物，因为他帮助我做了一点测试。

如果我在 Checkout->Orders 中退还整个订单，用户是否会保留我的应用程序“已购买”？我的意思是他可以从 GooglePlay->MyApps 卸载并再次安装它，并且应用程序会被标记为“已购买”吗？Google LVL 会接受他来运行应用程序吗？

我以前也做过这样的退款，但后来他们称它为“Android Market”，退款是12h，没有LVL。也许有人知道使用 Google Play 制作小礼物的另一种方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:57:43.850

Google Play 目前没有实施赠与。

退款购买将自动从用户的设备上卸载该应用程序，如果他侧载它，LVL 将不接受他作为注册用户。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-16T02:01:50.657

您现在可以为您的应用或游戏生成促销代码并将其分发给 Google Play 上的现有用户和新用户。

在 Google Play 开发者控制台的“**促销**”标签下，您可以为您的应用、游戏和应用内商品设置促销代码，以便在您自己的营销活动中分发（每个应用最多 500 个代码，每季度）：

1.  转到您的 Google Play 开发者控制台，选择您的应用。
2.  选择**促销 > 添加新促销**。
3.  按照屏幕上的说明（促销名称、开始和结束日期、促销类型、要创建的促销代码数量）。
4.  选择**Create**，选择**下载**链接。您的代码将下载到 CSV 文件。要与用户共享，您可以打印代码或发送深层链接，允许用户通过电子邮件或应用内的通知兑换代码。

参考： https: [//support.google.com/googleplay/android-developer/answer/6321495](https://support.google.com/googleplay/android-developer/answer/6321495) [http://android-developers.blogspot.com/2016/01/create-promo-codes-for-your-apps-and -in.html](http://android-developers.blogspot.com/2016/01/create-promo-codes-for-your-apps-and-in.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T16:56:04.640

你不能给他礼物。Google Play 中没有实施礼物概念。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-27T05:23:02.303

目前我们所能做的就是**在 48 小时后**通过 Google 电子钱包商家帐户对购买的商品进行退款（当客户发起的退款期限到期时，未来可能会有所不同）。

如果他们从 Google 获得退款，它将卸载该应用并删除他们的访问权限。

如果您从您的 Wallet 商家帐户亲自执行此操作，则在 48 小时后（或每当客户发起的退款期结束时），他们仍然可以保留应用程序并获取更新。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-15T09:15:11.010

我知道这已经过时了，但是您是否考虑过让有问题的客户购买该应用程序，然后通过 PayPal 或其他方式向他/她汇款？另外，如果*您*启动退款流程怎么办？在那种情况下，我不希望应用程序被卸载，因为用户不同意卸载。

# matlab - 如何减少matlab和子轴中子图周围的边界不起作用

> ID：13478132
> 
> 赞同：1
> 
> 时间：2012-11-20T16:54:55.553
> 
> 标签：matlab, matlab-figure

我编写了一个 GUI，它提供了一个不同大小的 matlab 子图，我正在寻找一种将子图压缩在一起的通用方法。Subaxis 适用于垂直间距，但不影响水平间距。

将它们挤在一起的最简单方法是什么？ 它是在 for 循环中使用以下代码生成[的输出图形之一的示例](http://imgur.com/Eizzc)

```
 subaxis (1+ceil(max(zindex)/5),5,5+i, 'Padding', 0, 'Margin', 0,'SpacingHoriz',0.0001,'SpacingVert',0.009); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T15:45:58.640

看起来您的图形尺寸与您拥有的地块数量有很大不同。如果您定义图形大小，则子轴效果最好，并且您应该根据您拥有的图形数量来选择纵横比。

在示例中，您有 13 x 5 的子图，但您的图形的纵横比更像是 7:13。因此，垂直图靠得很近，但有很多水平空白。

在绘图之前，请尝试定义您的图形，如：

```
nRows=13;
nCols=5;
PlotWidth=3;  %This is your Plot width in cm. 
FigW=nCols*FigWidth;
FigH=nRows*FigWidth;   %Note: I'm assuming the plots are square
Figure1=figure(1);clf;
set(Figure1,'PaperUnits','centimeters',...
      'PaperSize',[FigW FigH],...
      'PaperPosition',[0,0,FigW,FigH],...
      'Units','centimeters','Position',[1,9,FigW,FigH]); 
```

看看你的图形间距是否更好看。一些注意事项，如果您想使用“英寸”而不是厘米，那很好。此外，我的纸图上没有任何边距（定义纸张尺寸和纸张位置对于导出很有用）。如果你想要一个利润，你可以尝试这样的事情：

```
Mgn=1;
set(Figure1,'PaperUnits','centimeters',...
      'PaperSize',[FigW+2*Mgn FigH+2*Mgn],...
      'PaperPosition',[Mgn,Mgn,FigW,FigH],...
      'Units','centimeters','Position',[1,9,FigW,FigH]); 
```

然后，您可以使用 matlab 的[打印](http://www.mathworks.com/help/matlab/ref/print.html)命令将其导出为您选择的格式。

# c - 文本视图的 GTK+ 行号

> ID：13478133
> 
> 赞同：2
> 
> 时间：2012-11-20T16:54:55.800
> 
> 标签：c, gtk

我正在用 GTK+ 设计一个编辑器，并想添加一个 gedit 文本编辑器的功能来表示文本左侧的行号。我添加了一张[gedit 图像，显示每行左侧的行号](http://2.bp.blogspot.com/-hhZ6P72REuY/T64Xmfba4SI/AAAAAAAAA-0/MKubycxNXdY/s1600/grub-timeout.png)。我需要指导我应该使用哪个小部件以及如何使用它。

提前致谢 ：）.. ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T08:58:26.290

要获取行号，请使用`GtkSourceView`而不是`GtkTextView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:23:07.057

它是一个名为 geditview 的对象，您可以查看[http://code.ohloh.net/file?fid=UbTA_LHqUuoYhNCUyaNFsy91ZqQ&cid=vmd9QnPTRes&s=&browser=Default#L545](http://code.ohloh.net/file?fid=UbTA_LHqUuoYhNCUyaNFsy91ZqQ&cid=vmd9QnPTRes&s=&browser=Default#L545)

geany 还使用名为 Scintilla 的对象实现行号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T07:22:15.407

在 textview 你可以试试这个。`self.textview.get_iter_at_location(x, y).get_line()` 记录在这里[http://www.pygtk.org/pygtk2tutorial/sec-TextIters.html](http://www.pygtk.org/pygtk2tutorial/sec-TextIters.html)。

x, y 位置可以使用以下代码获得：

```
 x, y = self.textview.get_pointer()
 x, y = self.textview.window_to_buffer_coords(gtk.TEXT_WINDOW_WIDGET, x, y) 
```

# linux - 在不同目录中查找具有相同名称的文件并计算重复项

> ID：13478139
> 
> 赞同：2
> 
> 时间：2012-11-20T16:55:12.340
> 
> 标签：linux, algorithm, bash

我希望你能帮助我解决以下问题。我有 24 个目录，每个目录包含许多（1000 个）文件。我想找出哪个目录组合包含最多的重复（仅按名称）文件。例如，如果我们只考虑 4 个目录

目录 1 目录 2 目录 3 目录 4

具有以下目录内容

目录1

> 1.fa 2.fa 3.fa 4.fa 5.fa

目录2

> 1.fa 10.fa 15.fa

目录3

> 1.fa 2.fa 3.fa

目录4

> 1.fa 2.fa 3.fa 5.fa 8.fa 10.fa

因此，目录 dir1 和 dir4 的组合包含最多重复的文件 (4)。

24 个目录的问题变得非常大，所以我想我可能会使用蛮力方法。类似的东西

1.  计算所有 24 个目录中出现的所有重复文件
2.  删除目录并计算重复文件的数量
3.  替换目录并删除另一个然后计数
4.  对所有目录重复
5.  获取具有最大重复文件数的 23 个目录的子集
6.  重复以上2-5，保留重复文件最多的22个目录
7.  重复直到只剩下 2 个目录
8.  选择具有最大重复文件数的目录组合

如果有人有办法做到这一点，我将非常感谢一些建议。我想过使用`fdupes`或`diff`但无法弄清楚如何解析输出和总结。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:40:17.347

我标记了你的问题，`algorithm`因为我不知道有任何现有的 bash / linux 工具可以帮助你直接解决这个问题。最简单的方法是用 Python、C++ 或 Java 等编程语言构造算法，而不是使用 bash shell。

话虽如此，这是对您的问题的高级分析：乍一看，它看起来像是一个最小集合覆盖问题，但实际上它分为两部分：

* * *

**第 1 部分 - 要涵盖的文件集是什么？**

您希望找到覆盖最多重复文件的目录组合。但首先，您需要知道 24 个目录中的最大重复文件集是多少。

由于两个目录之间的文件交集总是大于或等于与第三个目录的交集，因此您遍历所有目录对并找到最大交集集是多少：

```
(24 choose 2) = 276 comparisons 
```

您采用找到的最大交集并将其用作您实际尝试覆盖的集合。

* * *

**第 2 部分 - 最小集覆盖问题**

这是[计算机科学中一个经过充分研究的问题](http://en.wikipedia.org/wiki/Set_cover_problem)，因此您最好阅读[比我聪明得多的人的著作](http://math.mit.edu/~goemans/18434S06/setcover-tamara.pdf)。

我唯一需要注意的是，这是一个[NP-Complete 问题](http://en.wikipedia.org/wiki/NP-complete)，所以它不是微不足道的。

* * *

这是我能做的最好的解决你的问题的原始表述，但我觉得这对于你真正需要完成的事情来说太过分了。您应该考虑用您需要解决的实际问题来更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T22:47:13.833

./count_dups.sh：

```
1 files are duplicated Comparing dir1 to dir2.
3 files are duplicated Comparing dir1 to dir3.
4 files are duplicated Comparing dir1 to dir4.
1 files are duplicated Comparing dir2 to dir3.
2 files are duplicated Comparing dir2 to dir4.
3 files are duplicated Comparing dir3 to dir4. 
```

./count_dups.sh | 排序-n | 尾-1

```
4 files are duplicated Comparing dir1 to dir4. 
```

使用脚本 count_dups.sh：

```
#!/bin/bash

# This assumes (among other things) that the dirs don't have spaces in the names

cd testdirs
declare -a DIRS=(`ls`);

function count_dups {
    DUPS=`ls $1 $2 | sort | uniq -d | wc -l`
    echo "$DUPS files are duplicated comparing $1 to $2."
}

LEFT=0
while [ $LEFT -lt ${#DIRS[@]} ] ; do
    RIGHT=$(( $LEFT + 1 ))
    while [ $RIGHT -lt ${#DIRS[@]} ] ; do
        count_dups ${DIRS[$LEFT]} ${DIRS[$RIGHT]}
        RIGHT=$(( $RIGHT + 1 ))
    done
    LEFT=$(( $LEFT + 1 ))
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T06:00:36.900

我们可以为所有这 24 个目录创建哈希表吗？如果文件名只是数字，哈希函数将很容易设计。

如果我们可以使用哈希表，搜索和查找重复项会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T22:11:33.703

计算 shell 中的重复文件名：

```
#! /bin/sh

# directories to test for
dirs='dir1 dir2 dir3 dir4'

# directory pairs already seen
seen=''

for d1 in $dirs; do
    for d2 in $dirs; do
        if echo $seen | grep -q -e " $d1:$d2;" -e " $d2:$d1;"; then
            : # don't count twice
        elif test $d1 != $d2; then
            # remember pair of directories
            seen="$seen $d1:$d2;"
            # count duplicates
            ndups=`ls $d1 $d2 | sort | uniq -c | awk '$1 > 1' | wc -l`
            echo "$d1:$d2 $ndups"
        fi
    done
# sort decreasing and take the first
done | sort -k 2rn | head -1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T16:15:03.363

出于好奇，我做了一些简单的测试：24 个目录，每个目录大约有 3900 个文件（0 到 9999 之间的随机数）。两个 bash 脚本每个都需要大约 10 秒。这是一个基本的 python 脚本，在 ~0.2 秒内做同样的事情：

```
#!/usr//bin/python

import sys, os

def get_max_duplicates(path):
    items = [(d,set(os.listdir(os.path.join(path,d)))) \
        for d in os.listdir(path) if os.path.isdir(os.path.join(path, d))]
    if len(items) < 2: 
        # need at least two directories
        return ("","",0)
    values = [(items[i][0],items[j][0],len(items[i][1].intersection(items[j][1]))) \
        for i in range(len(items)) for j in range(i+1, len(items))]
    return max(values, key=lambda a: a[2])

def main():
    path = sys.argv[1] if len(sys.argv)==2 else os.getcwd()
    r = get_max_duplicates(path)
    print "%s and %s share %d files" % r

if __name__ == '__main__':
    main() 
```

正如 Richard 所提到的，通过使用哈希表（或在 python 中设置），我们可以加快速度。两个集合的交集是[O(min(len(set_a), len(set_b)))](http://wiki.python.org/moin/TimeComplexity)，我们必须进行`N(N-1)/2=720`比较。

# umbraco - Umbraco 和 SagePay

> ID：13478140
> 
> 赞同：2
> 
> 时间：2012-11-20T16:55:13.370
> 
> 标签：umbraco, payment-gateway, umbraco-ucommerce

我为客户使用 umbraco，但被要求为类似于此处的发票实施 SagePay 支付系统： [https ://secure.conscious.co.uk/cms/billpay/invoice](https://secure.conscious.co.uk/cms/billpay/invoice)

虽然有点矫枉过正，但我​​是否可以期望通过 uCommerce 开箱即用地实现这一点？无论哪种方式，我都找不到合适的文档来为我提供建议。

任何人都可以建议任何其他可能有效的 umbraco align 解决方案吗？

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T13:19:31.480

uCommerce 在线文档将 SagePay 作为一流的支持支付提供商。

文档中的此页面 (http://www.publicvoid.dk/SetupUCommerceToIncludeSagePayAsAPaymentMethod.aspx) 被称为“设置 uCommerce 以将 SagePay 作为付款方式”应该向您展示方法。

# php - PHP循环遍历多维数组并更改值

> ID：13478149
> 
> 赞同：7
> 
> 时间：2012-11-20T16:55:37.970
> 
> 标签：php, arrays, loops

我在下面有一个多维数组，我想遍历它并将 [menu_cats] 的值从一个数字更改为一个字符串，该字符串是从数据库选择中提取的。这可能吗？数组的名称是“结果”。

```
Array
(
[0] => Array
    (
        [0] => Array
            (
                [menu_cats] => 1                    
                [item] => Introduction
                [link] => needs
            )

        [1] => Array
            (
                [menu_cats] => 1
                [item] => Needs Assessment
                [link] => needs/needs.php
            )

    )

[1] => Array
    (
        [0] => Array
            (
                [menu_cats] => 2                    
                [item] => Introduction
                [link] => knowledge
            )

        [1] => Array
            (
                [menu_cats] => 2
                [item] => Administer Knowledge Pre-Test
                [link] => knowledge/pre_test.php
            )
    )

) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T16:57:51.620

```
foreach($result as $key => $subarray) {
   foreach($subarray as $subkey => $subsubarray) {
      $result[$key][$subkey]['menu_cats'] = 'your string here';
   }
} 
```

# c++ - 在自动对象上调用删除

> ID：13478150
> 
> 赞同：2
> 
> 时间：2012-11-20T16:55:39.230
> 
> 标签：c++

考虑以下 c++ 代码：

```
class test
{
public:
    int val;

    test():val(0){}
    ~test()
    {
        cout << "Destructor called\n";
    }
};

int main()
{
    test obj;
    test *ptr = &obj;
    delete ptr;

    cout << obj.val << endl;

    return 0;
} 
```

我知道 delete 应该只在动态分配的对象上调用，但现在 obj 会发生什么？

好的，我知道我们不应该做这样的事情，现在如果我正在编写智能指针的以下实现，我怎么能确保这样的事情不会发生。

```
class smart_ptr
{
public:
    int *ref;
    int *cnt;

    smart_ptr(int *ptr)
    {
        ref = ptr;
        cnt = new int(1);
    }

    smart_ptr& operator=(smart_ptr &smptr)
    {
        if(this != &smptr)
        {
            //  House keeping
            (*cnt)--;
            if(*cnt == 0)
            {
                delete ref;
                delete cnt;
                ref = 0;
                cnt = 0;
            }

            //  Now update    
            ref = smptr.ref;
            cnt = smptr.cnt;
            (*cnt)++;
        }
        return *this;
    }

    ~smart_ptr()
    {
        (*cnt)--;
        if(*cnt == 0)
        {
            delete ref;
            delete cnt;
            ref = 0;
            cnt = 0;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:56:52.693

您在帖子中提出了两个不同的问题。我将分别回答他们。

> > 但是现在 obj 会发生什么？

你的程序的行为是**未定义**的。C++ 标准没有对现在发生的事情发表评论`obj`。事实上，该标准也没有评论您的程序在错误*之前所做的事情。*它根本**没有定义**。

也许您的编译器供应商对发生的事情做出了承诺，也许您可​​以检查程序集并预测会发生什么，但是 C++*本身*并没有定义会发生什么。

实际上说¹，您可能会从标准库中收到警告消息，或者您会收到段错误，或两者兼而有之。

^(1：假设您在 Windows 或带有 MMU 的类 UNIX 系统中运行。其他规则适用于其他编译器和操作系统。)

* * *

> > 我怎样才能确保 [ `delete`ing a stack variable] 不会发生。

`smart_ptr`切勿使用堆栈变量的地址进行初始化。一种方法是将接口记录到`smart_ptr`. 另一种方法是重新定义接口，以便用户永远不会将指针传递给`smart_ptr`; make`smart_ptr`负责调用`new`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:57:00.103

您的代码具有*未定义的行为*，因为您在未分配 new 的指针上使用了 delete。这意味着任何事情都可能发生，并且不可能说会发生什么`obj`。

我*猜想*在大多数平台上你的代码会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:00:30.633

Delete 试图访问内存中的 obj 空间，但操作系统不允许这样做并抛出（核心转储）异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T16:56:48.590

不确定会发生什么，所以你不能说太多。您能做的最好的事情就是推测特定的实现/编译器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T17:01:56.167

这不仅仅是未定义的行为，就像其他答案中所说的那样。这几乎肯定会崩溃。

第一个问题是尝试释放堆栈变量。

第二个问题将在程序终止时发生，此时`test`将调用析构函数`obj`。

# spring-mvc - 解组 xml/json

> ID：13478156
> 
> 赞同：0
> 
> 时间：2012-11-20T16:55:59.233
> 
> 标签：spring-mvc

使用 google map RESTful api 构建示例 spring mvc 项目。

我可以使用 Jersey 客户端使用 API。

响应可以是 xml/json

[XML 格式是](https://developers.google.com/maps/documentation/distancematrix/#XML)

反序列化这些数据的最佳方法是什么，以便我可以获得单个响应元素，如持续时间/距离？

感谢任何建议或有用的学习链接。

这可能违反论坛规则，但是如果在回答我的问题时，如果有人知道一本好的 spring mvc 书，你能在答案中推荐它吗？

# jsf - JSF 2：无法在 selectOneMenu 中加载对象

> ID：13478157
> 
> 赞同：0
> 
> 时间：2012-11-20T16:56:03.113
> 
> 标签：jsf, exception, object, jsf-2, glassfish-3

我正在尝试使用从数据库中检索到的一些对象来填充下拉菜单。所以，在阅读[了这个主题](https://stackoverflow.com/questions/6848970/how-to-prepopulate-a-hselectonemenu-from-a-db)之后，我做了这个：

```
<h:form id="register_form">
  <h:panelGrid columns="3">
    <h:outputLabel for="client" value="Client:" />
    <h:selectOneMenu id="client" value="#{reuniaoc.cliente}" converter="#{clienteConverter}" >
      <f:selectItems value="#{reuniaoc.clientes}" var="_cliente" itemValue="#{_cliente}" itemLabel="#{_cliente.id}" />
      <f:ajax event="blur" render="m_client" />
    </h:selectOneMenu>
    <h:message id="m_client" for="client" />
  </h:panelGrid>
</h:form> 
```

这是我的`controller`：

```
package control;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.SessionScoped;
import javax.faces.context.FacesContext;

import model.Cliente;

import utility.Message;
import bean.ReuniaoBean;
import eao.ClienteEAO;
import eao.ReuniaoEAO;

@ManagedBean(name="reuniaoc")
@RequestScoped
public class ReuniaoController implements Serializable {
    private static final long serialVersionUID = 7737795872305798041L;

    @EJB ReuniaoEAO rEAO;
    @EJB ClienteEAO cEAO;

    private ReuniaoBean rb;

    private Cliente cliente;
    private List<Cliente> clientes;

    @PostConstruct
    public void init() {
        clientes = cEAO.list();
    }

    private void addMessage(Message message){
        FacesMessage fMessage = new FacesMessage(message.getMessage());
        FacesContext.getCurrentInstance().addMessage(null, fMessage);
    }

    public void register(){
        Message message = rEAO.create(rb.getReuniao());
        addMessage(message);
    }

    public String getClientes(){

        for (Cliente c : clientes)
            System.out.println(c.getFantasia());

        return "/funcionario/register/reuniao.xhtml?faces-redirect=true";
    }

    // get's and set's
    public ReuniaoBean getRb() {
        return rb;
    }

    public void setRb(ReuniaoBean rb) {
        this.rb = rb;
    }

    public void setClientes(List<Cliente> clientes) {
        this.clientes = clientes;
    }

    public Cliente getCliente() {
        return cliente;
    }

    public void setCliente(Cliente cliente) {
        this.cliente = cliente;
    }

} 
```

还有我的转换器：

```
package bean.converter;

import javax.ejb.EJB;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.ConverterException;

import model.Cliente;
import eao.ClienteEAO;

@ManagedBean
@RequestScoped
public class ClienteConverter implements Converter {

    @EJB private ClienteEAO clienteEAO;

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (!(value instanceof Cliente) || ((Cliente) value).getId() == null) {
            return null;
        }

        return String.valueOf(((Cliente) value).getId());
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        if (value == null || !value.matches("\\d+")) {
            return null;
        }

        Cliente c = clienteEAO.find(Integer.valueOf(value));

        if (c == null) {
            throw new ConverterException(new FacesMessage("Unknown operation ID: " + value));
        }
        return c;
    }

} 
```

但是当我尝试加载页面时，给了我这个错误：（抱歉异常这么长）

```
java.lang.IllegalArgumentException
    at com.sun.faces.renderkit.SelectItemsIterator.initializeItems(SelectItemsIterator.java:216)
    at com.sun.faces.renderkit.SelectItemsIterator.hasNext(SelectItemsIterator.java:135)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.renderOptions(MenuRenderer.java:762)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.renderSelect(MenuRenderer.java:844)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.encodeEnd(MenuRenderer.java:298)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
```

对我来说，我的代码似乎非常一致，但是我在这里缺少一些东西。任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:07:30.270

```
public String getClientes(){

    for (Cliente c : clientes)
        System.out.println(c.getFantasia());

    return "/funcionario/register/reuniao.xhtml?faces-redirect=true";
} 
```

此`<f:selectItems value>`getter 不返回客户端列​​表。它返回一个导航案例字符串，该字符串不被识别为 的有效`value`参数`<f:selectItems>`。看起来您正在将操作方法​​与属性获取器混合在一起。

相应地将 getter 修复为真正的 getter：

```
public List<Cliente> getClientes() {
    return clientes;
} 
```

顺便说一句，该属性的 setter 方法是不必要的。在此构造中不会以任何方式使用它。

### 也可以看看：

*   [我们的`h:selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

# javascript - 谷歌电子表格 - ajax 调用（获取和发布）

> ID：13478160
> 
> 赞同：2
> 
> 时间：2012-11-20T16:56:13.470
> 
> 标签：javascript, jquery, google-docs

我需要做的是阅读“公共”谷歌电子表格的内容（公开我的意思是我点击“文件>发布到网络”保存了工作表，因此无需登录谷歌即可访问帐户），为什么不也写一些东西进去。

谷歌搜索，我发现我可以访问工作表并获得与工作表内容等效的 xml，例如

```
https://spreadsheets.google.com/feeds/list/<sheetCode>/od6/public/values 
```

如果我将该网址加载到浏览器中，效果会很好。但我需要找到一种“javascript 方式”来获取和处理返回值，即 xml（或 json，但 xml 会更可取）。

我尝试使用 ajax 调用，但我认为协议有些混乱。我无法正确获得服务器响应。

```
$.ajax({
    type: "GET",
    url: "https://spreadsheets.google.com/feeds/list/<sheetCode>/od6/public/values",
    success: function(data){alert("yeah");},
    error: function(){alert("fail..");},
    dataType:"xml",
}); 
```

我还尝试获取 json 而不是 xml，将“？alt = json”添加到 url 并更改数据类型，但我仍然有问题..

有什么想法/建议吗？

在此先感谢，最好的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:36:28.917

您需要使用 JSONP 调用进行请求，并且需要指定回调方法。这可以在 jQuery 中使用：

```
var url = 'https://spreadsheets.google.com/feeds/list/<CODE>/od6/public/values?alt=json-in-script&callback=?';
jQuery.getJSON(url).success(function(data) {
    console.log(data); 
}).error(function(message) {
    console.error('error' + message); 
}).complete(function() {
    console.log('completed!'); 
}); 
```

[谷歌电子表格](https://developers.google.com/gdata/samples/spreadsheet_sample)的文档和样本。

# zigbee - 将 zigbee USB 棒模块与 MSP430（指纹开发套件德州仪器 C5515）连接

> ID：13478164
> 
> 赞同：1
> 
> 时间：2012-11-20T16:56:29.747
> 
> 标签：zigbee, interfacing

我正在开发一个基于无线指纹的考勤管理系统，以部署在我的大学（巴基斯坦国立科技大学）。我想在我的项目中使用“ETRX357USB+8M ZigBee Wireless Mesh Networking USB Stick”。

**问题**：我如何将 c5515 手指开发套件的 MSP430 控制器与 ETRX357USB zigbee 连接，以便将数据传输到我的服务器？

我正在使用的手指开发套件（FDK）上有一个 USB 端口（德州仪器 C5515），所以我想知道它是否可以托管 USB 记忆棒 Zigbee，因为托管 USB 设备需要在主机上安装驱动程序（在我的情况下是 C5515）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:50:23.180

Telegesis USB 记忆棒均使用 Silicon Laboratories 串行转 USB 芯片。当您将它们连接到 PC（或 Mac/Linux）时，您必须安装[驱动程序](http://www.telegesis.com/telegesis_zigbee_technology_-_technical_support_/software_download.htm)，设备将显示为 COM 端口。如果 MSP430 运行的是 Linux，那么您可能会走运，否则我不知道该产品是否适合您的用例。

您可能会查看他们的[Zigbee 模块](http://www.telegesis.com/product_range_overview/etrx3_zigbee_module.htm)，该模块将为您提供 UART 访问，或者可能是[Digi XBee](http://www.digi.com/xbee/)设备之一。

# java - AssertionError 的 getMessage() 奇怪地为 null

> ID：13478165
> 
> 赞同：3
> 
> 时间：2012-11-20T16:56:29.243
> 
> 标签：java, exception, assert

自从我与 JVM 进行单人战斗以来已经有很多年了，我想我忘记了一些事情。

得到了一些有大量断言的代码，没有自定义消息，只是`assert some_condition;` 我已经验证过的普通代码`-ea`正在传递给 VM，并在启动时以编程方式仔细检查了断言是否启用。

调用链更高的是如下代码：

```
try {
    start_the_deeply_nested_stuff();
}
catch (Throwable e) {
    do stuff with e.getMessage()
} 
```

[AssertionError](http://docs.oracle.com/javase/6/docs/api/java/lang/AssertionError.html)的文档说它是 Throwable 的后裔，并且始终使用断言的表达式作为 ctor 参数构造它（在转换为字符串之后）。我觉得我应该能够在这里调用 getMessage() 并得到一些有用的东西，比如*"assertion failed on file X line Y because your code shits"*。

相反，getMessage() 返回 null。我能够弄清楚断言正在被触发的唯一方法是循环`e.getStackTrace()`并跟踪行号。

getMessage 怎么了？AssertionError 是否总是应该包含有关触发它的条件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:35:57.650

> AssertionError 是否总是应该包含有关触发它的条件的内容？

显然不是基于[文档](http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html)。

表达方式

```
assert args != null; 
```

将抛出没有详细消息的 AssertionError（如果 args 为空）

```
assert args != null : "Arguments must not be null"; 
```

将抛出带有详细消息的 AssertionError`Arguments must not be null`

我同情。如果编译器足够聪明，可以接受这样的表达式，那就太酷了

```
assert args != null; 
```

并抛出带有消息“args！= null”的 AssertionError 但我想这不是它的工作原理。

我想您可以编写一个脚本来遍历所有旧代码，检测断言表达式并将它们替换为以下内容：

```
assert <expression> : "<text of expression>"; 
```

如

```
assert args != null : "args != null"; 
```

# delphi - TIdTCPClient 到 SSL

> ID：13478167
> 
> 赞同：1
> 
> 时间：2012-11-20T16:56:39.147
> 
> 标签：delphi, delphi-xe3

当我连接到 80 端口，使用 TIdTCPClient 组件的纯文本网站时，一切正常，数据接收没有问题，但是，当我连接到 443 端口，SSL 网站时，数据**并不总是**来。

也许与我的接收数据块有关？需要建议。

```
 while not Terminated do
  begin
    SetLength(data, 0);
    ws.IOHandler.ReadBytes(data, -1);
    if Length(data) = 0 then
      break;

    // processing_my(data);
  end; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:22:36.720

打开与其他端口的连接以确保其安全是不够的。要连接到任何 SSL，您需要一个支持它的 IOHandler，例如[TIdSSLIOHandlerSocketOpenSSL](https://duckduckgo.com/?q=delphi%20TIdSSLIOHandlerSocketOpenSSL)

# coffeescript - 在多个脊椎模型中覆盖 fetch

> ID：13478168
> 
> 赞同：0
> 
> 时间：2012-11-20T16:56:40.807
> 
> 标签：coffeescript, spine.js

我需要`@fetch()`在我的所有 Spine 模型中覆盖 Spine 的方法。目前我的代码重复如下：

```
TastypieEndpointMixin =
    fromJSON: (data) ->
        return unless data
        return Spine.Model.fromJSON(data.objects)

class App.models.Position extends Spine.Model
    @configure 'Position', 'code', 'name'
    @extend Spine.Model.Ajax
    @extend TastypieEndpointMixin
    @url: '/api/v1/position/?format=json'

    validate: ->
        'code is required' unless @code

    @fetch: ->
        defer = $.Deferred()
        @one "refresh", ->
            defer.resolve()
        super
        return defer

class App.models.Player extends Spine.Model
    @configure 'Player', 'first_name', 'last_name', ...
    @extend Spine.Model.Ajax
    @extend TastypieEndpointMixin
    @url: '/api/v1/player/?format=json'

    @fetch: ->
        defer = $.Deferred()
        @one "refresh", ->
            defer.resolve()
        super
        return defer 
```

我的问题是：如何创建某种形式的父类，其中包含`@fetch()`？

我知道这应该是一个简单的问题来解决。我尝试了很多选项（包括扩展`Spine.Model`和`Spine.Model.Ajax`），但没有任何效果，我似乎无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:57:45.437

这就是我解决完全相同问题的方法：

```
class BasicModel extends Spine.Model

  @fetch: ->
    defer = $.Deferred()
    @one "refresh", ->
      defer.resolve()        
    super
    defer

class App.models.Player extends BasicModel

  #This class now has the fetch() function from the BasisModel 
```

当然，您可以在 BasicModel 中放置许多有用的功能，这些功能将在您的所有其他模型中可用。

# parsing - ANTLR：重写规则中的文本标记

> ID：13478172
> 
> 赞同：1
> 
> 时间：2012-11-20T16:56:55.037
> 
> 标签：parsing, antlr, antlr3, abstract-syntax-tree

我正在使用 ANTLR 构建 AST。我想写一个匹配这个字符串的产品：

```
${identifier} 
```

在我的语法文件中，我有：

```
reference
  : DOLLAR LBRACE IDENT RBRACE -> ^(NODE_VAR_REFERENCE IDENT)
; 
```

这工作正常。我正在使用自己的适配器来发出树节点。使用的重写规则为我创建了两个节点：一个 for`NODE_VAR_REFERENCE`和一个 for `IDENT`。

我要做的是只创建一个节点（用于`NODE_VAR_REFERENCE`令牌），并且该节点必须`IDENT`在其“令牌”字段中具有令牌。

这可能使用重写规则吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:34:05.047

好吧，让`IDENT`成为节点的令牌`NODE_VAR_REFERENCE`意味着根本没有任何令牌`NODE_VAR_REFERENCE`。标记由类型 (`NODE_VAR_REFERENCE`或`IDENT`) 和该标记匹配的一些文本组成。让树节点的标记成为`IDENT`意味着类型*和*文本都将是`IDENT`（丢失`NODE_VAR_REFERENCE`标记或类型）。

您可能的意思是拥有类型`NODE_VAR_REFERENCE`和文本的单个节点`IDENT`，在这种情况下，您可以执行以下操作：

```
reference
 : DOLLAR LBRACE IDENT RBRACE -> NODE_VAR_REFERENCE[$IDENT.text]
 ; 
```

# python - 计数器在python的一个类中是否具有一定的值

> ID：13478186
> 
> 赞同：-1
> 
> 时间：2012-11-20T16:57:52.080
> 
> 标签：python, class

我在 python 中学习课程，当我阅读文档时，我发现了这个我不理解的例子：

```
class MyClass:
    """A simple example class"""
    def __init__(self):
        self.data = []
        i = 12345
    def f(self):
        return 'hello world' 
```

那么如果我们分配：

```
x = MyClass()
x.counter = 1 
```

现在如果我们实现 while 循环：

```
while x.counter < 10:
       x.counter = x.counter * 2 
```

所以 x.counter 的值将是：

```
16 
```

而例如，如果我们有一个变量 y ：

```
y = 1
while y < 1 :
   y = y *2 
```

那么如果我们寻找 y 的值，我们会找到它

```
1 
```

所以我不知道 counter 的值是如何变成 16 的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:07:08.587

这实际上与课程没有任何关系，但这就是正在发生的事情......

```
x == 1 # x is less than 10, so it is doubled
x == 2 # x is less than 10, so it is doubled
x == 4 # x is less than 10, so it is doubled
x == 8 # x is less than 10, so it is doubled
x == 16 # now x is greater than 10, so it is not doubled again 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:59:10.387

```
y = 1
while y < 1 :
   y = y *2 
```

如果您想要相同的输出，请始终提供相同的输入。

您会看到您正在检查`y < 1`哪些在第一次运行时会失败。做到这一点`y < 10`，就像你的`x.counter`情况一样。

```
y = 1
while y < 10:
   y = y *2 
```

# c++ - 如果 C++ stdlib 流的解析编号后紧跟非空白字符，如何引发错误？

> ID：13478188
> 
> 赞同：2
> 
> 时间：2012-11-20T16:57:55.737
> 
> 标签：c++, stream

在下面的例子中，我没想到`1.2345foo`会被解析。由于我正在读取数据文件，因此最好提出错误并通知用户。

`peek()`在这里做正确的事吗？

```
#include <iostream>
#include <sstream>

int main()
{
  std::stringstream in("1.2345foo");

  double x;

  in >> x;

  if (in) {
    std::cout << "good\n";
  }
  else {
    std::cout << "bad\n";
  }
} 
```

输出

```
good 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:01:09.790

最简单的方法是把它读成`std::string`，然后用它[`std::stod`](http://en.cppreference.com/w/cpp/string/basic_string/stof)来转换`std::string`成`double`. 转换函数将为无效输入抛出异常，例如当您传递`"1.2345foo"`给它时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:34:30.717

只需向前看下一个字符。在孤立的情况下`std::istringstream`，您可以执行以下操作：

```
if ( in >> x && in.get() == std::string::traits_type::eof() ) {
    //  good
} else {
    //  bad
} 
```

（我通常喜欢将测试分开，以便提供更有意义的错误消息。）

如果您关心较大文件中的数据，例如`"1.2345 foo"`合法但`"1.2345foo"`不合法，则可以使用前瞻，例如：

```
if ( in >> x 
        && (std::isspace( in.peek() )
            || in.peek() == std::string::traits_type::eof())  ) {
    //  good
} else {
    //  bad
} 
```

编辑：

我忘了提及：在第一种情况下，您可能希望在检查 eof 之前跳过空格：

```
if ( in >> x >> std::ws && in.get() == std::string::traits_type::eof() ) ... 
```

（我经常这样做。如果字符串输入是 from `std::getline`，您确实希望允许尾随空格，因为任何查看文件的人都看不到它。）

# core-data - 如何从核心数据搜索/过滤器中获取结果？

> ID：13478194
> 
> 赞同：2
> 
> 时间：2012-11-20T16:58:23.833
> 
> 标签：core-data, ios6, nsfetchedresultscontroller

我需要一些帮助来搜索/过滤核心数据实体。结果数组返回 Null..

我有一个带有搜索栏、控制器和表格视图的根视图。此视图正常显示。

我正在调用 UISearchBarDelegate 和 UISearchDisplayDelegate。

我有一个可变数组（searchResults）。

我的搜索代码如下：

```
-(void) filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
{
    NSLog(@"%s", __FUNCTION__);
    [self.searchResults removeAllObjects];

    for (Entity *ent in [self.fetchedResultsController fetchedObjects])
    {
        if ([scope isEqualToString:@"All"] || [ent.title isEqualToString:scope])
        {
            NSRange range = [ent.title rangeOfString:searchText options:NSCaseInsensitiveSearch];

            if (range.location != NSNotFound)
            {
                NSLog(@"Adding title '%@' to searchResults as it contains  '%@'", ent.title, searchText);
                [self.searchResults addObject:ent];
            }
        }

    }
    NSLog(@"The searchResults array contains '%@'", searchResults); <<<< RETURNS NULL
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    [self filterContentForSearchText:searchString scope:@"All"];
    return YES;
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption
{
    [self filterContentForSearchText:[self.searchDisplayController.searchBar text ]scope:@"All"];
    return YES;
} 
```

并且单元配置代码是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"MyVeryOwnCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    Entity *entity = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView)
    {
        //NSLog(@"Configuring cell to show search results");
        entity = [self.searchResults objectAtIndex:indexPath.row];
    }
    else
    {
        //NSLog(@"Configuring cell to show normal data");
        entity = [self.fetchedResultsController objectAtIndexPath:indexPath];
    }
    cell.textLabel.text = entity.title;
    return cell;
} 
```

我必须做一些愚蠢的事情，因为 searchResults 数组似乎为空。我会很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:33:11.153

您只是忘记分配/初始化`searchResults`数组。

;-)

# php - 检查空结果（PHP、PDO 和 MySQL）

> ID：13478206
> 
> 赞同：54
> 
> 时间：2012-11-20T16:58:56.053
> 
> 标签：php, mysql, pdo

我在这里做错了什么？我只是从表中检索结果，然后将它们添加到数组中。在我检查空结果之前，一切都按预期工作......

这将获得匹配，将其添加到我的数组并按预期回显结果：

```
$today = date('Y-m-d', strtotime('now'));

$sth = $db->prepare("SELECT id_email FROM db WHERE hardcopy = '1' AND hardcopy_date <= :today AND hardcopy_sent = '0' ORDER BY id_email ASC");

$sth->bindParam(':today', $today, PDO::PARAM_STR);

if(!$sth->execute()) {
    $db = null;
    exit();
}

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
    $this->id_email[] = $row['id_email'];
    echo $row['id_email'];
}

$db = null;
return true; 
```

当我尝试检查空结果时，我的代码返回“空”，但不再产生匹配结果：

```
$today = date('Y-m-d', strtotime('now'));

$sth = $db->prepare("SELECT id_email FROM db WHERE hardcopy = '1' AND hardcopy_date <= :today AND hardcopy_sent = '0' ORDER BY id_email ASC");

$sth->bindParam(':today',$today, PDO::PARAM_STR);

if(!$sth->execute()) {
    $db = null;
    exit();
}

if ($sth->fetchColumn()) {
    echo 'not empty';
    while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        $this->id_email[] = $row['id_email'];
        echo $row['id_email'];
    }
    $db = null;
    return true;
}
echo 'empty';
$db = null;
return false; 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-11-20T17:01:28.260

当您这样做时，您正在丢弃结果行`$sth->fetchColumn()`。这不是您检查是否有任何结果的方式。你做

```
if ($sth->rowCount() > 0) {
  ... got results ...
} else {
   echo 'nothing';
} 
```

相关文档在这里：*[PDOStatement::rowCount](http://php.net/manual/en/pdostatement.rowcount.php)*

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-16T14:40:22.587

如果您可以选择使用 fetchAll() 那么，如果没有返回行，它将只是一个空数组。

```
count($sql->fetchAll(PDO::FETCH_ASSOC)) 
```

将返回返回的行数。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-12-02T22:03:58.967

您不应将 rowCount 用于 SELECT 语句，因为它不可移植。我使用[isset](https://www.php.net/manual/en/function.isset.php)函数来测试 select 语句是否有效：

```
$today = date('Y-m-d', strtotime('now'));

$sth = $db->prepare("SELECT id_email FROM db WHERE hardcopy = '1' AND hardcopy_date <= :today AND hardcopy_sent = '0' ORDER BY id_email ASC");

// I would usually put this all in a try/catch block, but I kept it the same for continuity
if(!$sth->execute(array(':today'=>$today)))
{
    $db = null;
    exit();
}

$result = $sth->fetch(PDO::FETCH_OBJ)

if(!isset($result->id_email))
{
    echo "empty";
}
else
{
    echo "not empty, value is $result->id_email";
}

$db = null; 
```

当然，这仅适用于单个结果，就像您在遍历数据集时可能遇到的那样。

[我想我会权衡一下，因为我最近不得不处理这个问题。]

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-03-15T22:09:13.800

```
$sql = $dbh->prepare("SELECT * from member WHERE member_email = '$username' AND member_password = '$password'");

$sql->execute();

$fetch = $sql->fetch(PDO::FETCH_ASSOC);

// if not empty result
if (is_array($fetch))  {
    $_SESSION["userMember"] = $fetch["username"];
    $_SESSION["password"] = $fetch["password"];
    echo 'yes this member is registered'; 
}else {
    echo 'empty result!';
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-16T15:03:44.403

> 我在这里做错了什么？

几乎所有的。

```
$today = date('Y-m-d'); // no need for strtotime

$sth = $db->prepare("SELECT id_email FROM db WHERE hardcopy = '1' AND hardcopy_date <= :today AND hardcopy_sent = '0' ORDER BY id_email ASC");

$sth->bindParam(':today',$today); // no need for PDO::PARAM_STR

$sth->execute(); // no need for if
$this->id_email = $sth->fetchAll(PDO::FETCH_COLUMN); // no need for while

return count($this->id_email); // no need for the everything else 
```

实际上，您**始终**拥有获取的数据（在本例中为`$this->id_email`变量）来判断您的查询是否返回任何内容。[在我关于 PDO 的文章中](https://phpdelusions.net/pdo#count)阅读更多内容。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-31T09:40:32.443

另一种需要考虑的方法：

当我构建 HTML 表或其他依赖于数据库的内容时（通常通过 AJAX 调用），我喜欢在处理任何标记之前检查 SELECT 查询是否返回了任何数据。如果没有数据，我只是返回“未找到数据......”或类似的东西。如果有数据，则继续，构建标题并循环遍历内容等。尽管我可能会将我的数据库限制为 MySQL，但我更喜欢编写可移植的代码，所以 rowCount() 不可用。相反，请检查列数。不返回任何行的查询也不会返回任何列。

```
$stmt->execute();
$cols = $stmt->columnCount(); // no columns == no result set
if ($cols > 0) {
    // non-repetitive markup code here
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) { 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-02T17:44:29.127

我只找到了一种有效的方法...

```
$quote = $pdomodel->executeQuery("SELECT * FROM MyTable");

//if (!is_array($quote)) {  didn't work
//if (!isset($quote)) {  didn't work

if (count($quote) == 0) {   //yep the count worked.
    echo 'Record does not exist.';
    die;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-20T17:51:05.743

感谢[Marc B 的帮助](https://stackoverflow.com/questions/13478206/checking-for-empty-result-php-pdo-and-mysql/13478250#13478250)，这对我有用（注意：Marc 的 rowCount() 建议也可以工作，但我对它不能在不同的数据库上工作或者我的某些东西发生变化的可能性感到不舒服......也，他的 select count(*) 建议也可以，但是，我想是因为如果数据存在的话，我最终会得到数据，所以我就这样走了）。

```
$today = date('Y-m-d', strtotime('now'));

$sth = $db->prepare("SELECT id_email FROM db WHERE hardcopy = '1' AND hardcopy_date <= :today AND hardcopy_sent = '0' ORDER BY id_email ASC");

$sth->bindParam(':today', $today, PDO::PARAM_STR);

if(!$sth->execute()) {
    $db = null;
    exit();
}

while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
    $this->id_email[] = $row['id_email'];
    echo $row['id_email'];
}
$db = null;

if (count($this->id_email) > 0) {
    echo 'not empty';
    return true;
}
echo 'empty';
return false; 
```

# html - 使用 HTML5 和 CSS3 像 Flash 一样多秒切换“帧”

> ID：13478207
> 
> 赞同：0
> 
> 时间：2012-11-20T16:58:58.287
> 
> 标签：html, css, audio, text

我想使用 HTML5 和 CSS3 来加载 MP3/OGG​​，它将与正在显示的文本一起阅读。当它完成屏幕上的内容时，它会切换到新屏幕。

所以第一个屏幕会在 mp3 启动时加载，并一直持续到 12 秒（这是 mp3 上的声音读取它需要多长时间）。在 12 秒时，它切换到下一个文本，该文本将持续到 22 秒。总共将有7个段落。

下面是我找到的一些代码示例，但我无法对其进行编辑以在我需要的时间正常工作。

HTML的基础知识：

```
<audio controls="controls" preload="auto" autoplay="autoplay">
    <source src="valmp3.ogg" type="audio/ogg" />
    <source src="valmp3.mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
</audio> 
<ul>
    <li>Paragraph 1</li>
    <!--^^Should load when the mp3 starts and stay for 12 seconds^^-->

    <li>Paragraph 2</li>
    <!--^^Should load at 12 seconds and stay until 22 seconds^^-->

    <li> Paragraph 3</li>

    <li> Paragraph 4</li>

    <li>Paragraph 5</li>

    <li>Paragraph 6</li>

    <li>Paragraph 7</li>
</ul> 
```

CSS：

```
* {
  margin: 0;
  padding: 0;
}
body{
  background: #422A20;
  font-size: 2em;
}
ul {
  height: 100%;
  left: 0;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 0;
}
ul li {
  color: transparent;
  font-size: 250%;
  position: absolute;
  text-align: center;
  top: 35%;
  width: 100%;
}

/* delay between each text */
ul li:nth-child(1),
ul li:nth-child(2),
ul li:nth-child(3),
ul li:nth-child(4) {
  -moz-animation: blurFadeInOut 3s ease-in backwards;
  -ms-animation: blurFadeInOut 3s ease-in backwards;
  -webkit-animation: blurFadeInOut 3s ease-in backwards;
}
ul li:nth-child(1) {
  -webkit-animation-delay: 0s;
  -moz-animation-delay: 0s;
  -ms-animation-delay: 0s;
  animation-delay: 0s;
}
ul li:nth-child(2) {
  -webkit-animation-delay: 3s;
  -moz-animation-delay: 3s;
  -ms-animation-delay: 3s;
  animation-delay: 3s;
}
ul li:nth-child(3) {
  -webkit-animation-delay: 6s;
  -moz-animation-delay: 6s;
  -ms-animation-delay: 6s;
  animation-delay: 6s;
}
ul li:nth-child(4) {
  -webkit-animation-delay: 9s;
  -moz-animation-delay: 9s;
  -ms-animation-delay: 9s;
  animation-delay: 9s;
}
ul li:nth-child(5) {
  -webkit-animation-delay: 12s;
  -moz-animation-delay: 12s;
  -ms-animation-delay: 12s;
  animation-delay: 12s;
}
/* delay for the last slide */
ul li:nth-child(5) span {
  -webkit-animation: blurFadeIn 3s ease-in 12s backwards;
  -moz-animation: blurFadeIn 1s ease-in 12s backwards;
  -ms-animation: blurFadeIn 3s ease-in 12s backwards;
  animation: blurFadeIn 3s ease-in 12s backwards;
  color: transparent;
  text-shadow: 0px 0px 1px #fff;
}
ul li:nth-child(5) span:nth-child(2) {
  -webkit-animation-delay: 13s;
  -moz-animation-delay: 13s;
  -ms-animation-delay: 13s;
  animation-delay: 13s;
}
ul li:nth-child(5) span:nth-child(3) {
  -webkit-animation-delay: 14s;
  -moz-animation-delay: 14s;
  -ms-animation-delay: 14s;
  animation-delay: 14s;
} 
```

动画代码：

```
@-moz-keyframes blurFadeInOut {
  0% { opacity: 0; text-shadow: 0px 0px 40px #fff; -moz-transform: scale(1.3); }
  25%, 75% { opacity: 1; text-shadow: 0px 0px 1px #fff; -moz-transform: scale(1); }
  100% { opacity: 0; text-shadow: 0px 0px 50px #fff; -moz-transform: scale(0); }
}
@-webkit-keyframes blurFadeInOut {
  0% { opacity: 0; text-shadow: 0px 0px 40px #fff; -webkit-transform: scale(1.3); }
  25%, 75% { opacity: 1; text-shadow: 0px 0px 1px #fff; -webkit-transform: scale(1); }
  100% { opacity: 0; text-shadow: 0px 0px 50px #fff; -webkit-transform: scale(0); }
}
@keyframes blurFadeInOut {
  0% { opacity: 0; text-shadow: 0px 0px 40px #fff; transform: scale(1.3); }
  25%, 75% { opacity: 1; text-shadow: 0px 0px 1px #fff; transform: scale(1); }
  100% { opacity: 0; text-shadow: 0px 0px 50px #fff; transform: scale(0); }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:52:14.597

我想你想要这样的东西：http: [//jsfiddle.net/VL3Ub/](http://jsfiddle.net/VL3Ub/)（可能有不同的效果）

我把它简化为我能做到的最简单的形式。

```
<ul>
    <li>Hello (hello hello hello)</li>
    <li>Is there anybody in there?</li>
    <li>Just nod if you can hear me.</li>
</ul>​ 
```

CSS

```
@-webkit-keyframes fadeInOut{
    from,to{opacity:0;}
    25%,75%{opacity:1;}
}

ul li{
    opacity:0;
    -webkit-animation: fadeInOut 4s ease-in;
}

ul li:nth-child(2){
    -webkit-animation-delay:4s;
}
ul li:nth-child(3){
    -webkit-animation-delay:8s;
} 
```

因此，每个 li 将淡入 1 秒，可见 2 秒，然后淡出 1 秒。然后我只是通过设置动画时间的延迟来错开`>=`动画。

在考虑嵌套动画时，管理所有内容可能会变得更加棘手，但它应该遵循相同的原则。

我不确定这是否回答了您的问题，或者为您指明了正确的方向，所以如果没有，请告诉我。:)

您可以这样做以使动画持续更长时间。我建议将`blurFadeInOut`可见步骤调整为`10%,90%`，或添加动画的第二个版本以延长持续时间。

```
ul li:nth-child(1) {
  -webkit-animation-duration:12s;
  -webkit-animation-delay: 0s;
}
ul li:nth-child(2) {
  -webkit-animation-duration:10s;    
  -webkit-animation-delay: 12s;
}
ul li:nth-child(3) {
  -webkit-animation-delay: 22s;
}
ul li:nth-child(4) {
  -webkit-animation-delay: 25s;
} 
```

# mysql - MYSQL 触发器中的编译错误？

> ID：13478216
> 
> 赞同：-3
> 
> 时间：2012-11-20T16:59:35.387
> 
> 标签：mysql, sql, rdbms, database, mysql-5.1

表结构为：

```
mysql> DESC groups;
+--------------+--------------+------+-----+---------+-------+
| Field        | Type         | Null | Key | Default | Extra |
+--------------+--------------+------+-----+---------+-------+
| PKey         | varchar(64)  | NO   | PRI | NULL    |       |
| group_name   | varchar(64)  | YES  |     | NULL    |       |
| Region       | varchar(128) | NO   |     | NULL    |       |
| Role         | varchar(128) | NO   |     | NULL    |       |
| parent_group | varchar(64)  | NO   | MUL | NULL    |       |
+--------------+--------------+------+-----+---------+-------+
5 rows in set (0.00 sec) 
```

当我执行此**触发器**时，我遇到了编译错误

```
DELIMITER $$
CREATE
    TRIGGER `group_before_delete` BEFORE DELETE
    ON `groups`
    FOR EACH ROW BEGIN
    IF old.parent_group=old.PKey THEN
        UPDATE `Error: deletion RootGroup is prohibited!`;
    ELSE              
        UPDATE groups
        SET parent_group=old.parent_group
        WHERE parent_group=old.Pkey; 
    END IF;
    END$$
DELIMITER ; 
```

* * *

**ERROR 1064 (42000)：**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '; 附近使用的正确语法。
ELSE
t_group=old.parent_group
t_group=old.PKey;
万一;' 在第 6 行
mysql> DELIMITER ;

* * *

你能告诉我我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:23:05.903

您的代码中出现错误，因为您的[UPDATE 语句](http://dev.mysql.com/doc/refman/5.5/en/update.html)的语法无效。

您提供的链接有 4 年和 5 年之久！由于该`SIGNAL`语句自[5.5.0 版](http://dev.mysql.com/doc/refman/5.5/en/news-5-5-0.html)（3 年前发布）起在 MySQL 中可用，因此使用这两个网页中描述的 hack 确实不是一个好主意。相反，请使用[SIGNAL 语句](http://dev.mysql.com/doc/refman/5.5/en/signal.html)。

**注意**：从评论中我们了解到 OP 没有使用 MySQL 5.5，因此`SIGNAL`不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:08:00.380

在您的 IF 语句中，以下不是有效的 SQL 语句：

```
UPDATE `Error: deletion RootGroup is prohibited!`; 
```

这应该是这样的：

```
IF old.parent_group=old.PKey THEN
    UPDATE `Error: deletion RootGroup is prohibited!` set x=1;
ELSE              
    UPDATE groups
    SET parent_group=old.parent_group
    WHERE parent_group=old.PKey; 
END IF; 
```

我从来没有这样做过。这是一种丑陋的做法。但如果它有效，那又怎样。

# android - 使用动态填充的字符串异步任务

> ID：13478219
> 
> 赞同：0
> 
> 时间：2012-11-20T16:59:39.257
> 
> 标签：android

当有人输入地址以从地址中获取经纬度时，我有一个由编辑文本字段填充的字符串。

```
 final String specAddressStr = specAddress.getText().toString() + " " + specCity.getText().toString() + "," + " " + specState.getText().toString() + " " + specZip.getText().toString(); 
```

我需要在异步任务中使用此字符串，但是当我尝试引用它并将字符串设置为全局变量以在任务中使用它时，它会导致应用程序强制关闭。是否有其他方法可以在我缺少的异步任务中使用动态填充的字符串？这是请求的异步任务代码：

```
 public class LowSignal extends Activity {

String specAddressStr;

private class processLatandLong extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... params) {

        List<Address> foundGeocode = null;

        // find the addresses by using getFromLocationName() method with the given address

        try {

            foundGeocode = new Geocoder(LowSignal.this).getFromLocationName(specAddressStr, 1);
            foundGeocode.get(0).getLatitude(); // getting latitude
            foundGeocode.get(0).getLongitude();// getting longitude

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (foundGeocode !=null) {
            returnedLat.setText(String.valueOf(foundGeocode.get(0).getLatitude()));
            returnedLong.setText(String.valueOf(foundGeocode.get(0).getLongitude()));
        } else {
            returnedLat.setText("Unable to find Latitude. Please try again.");
            returnedLong.setText("Unable to find Longitude. Please try again.");
        }

        return null;

    } 
```

这是我调用任务的地方：

```
 public void getLatandLong(View v) {

    String specAddressStr = specAddress.getText().toString() + " "
                + specCity.getText().toString() + "," + " "
                + specState.getText().toString() + " "
                + specZip.getText().toString();

        new processLatandLong().execute(specAddressStr);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:12:15.713

您可以将 String 传递`AsyncTask.execute(Your_String)`给以访问 Vue`doInBackground`为：

```
 specAddressStr = specAddress.getText().toString() + " " + 
                     specCity.getText().toString() + "," + " " + 
                     specState.getText().toString() + " " + 
                     specZip.getText().toString();
    new LongOperation().execute(specAddressStr);

private class LongOperation extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {
               String stredittext=params[0];
            }
// your code....
} 
```

# python - 使用 Python 将 CSV 转换为 mongoimport 友好的 JSON

> ID：13478222
> 
> 赞同：5
> 
> 时间：2012-11-20T16:59:48.860
> 
> 标签：python, json, csv, geospatial, mongoimport

我有一个 300 mb 的 CSV，其中包含来自 Geonames.org 的 300 万行城市信息。我正在尝试将此 CSV 转换为 JSON 以使用 mongoimport 导入 MongoDB。我想要 JSON 的原因是它允许我将“loc”字段指定为数组而不是与地理空间索引一起使用的字符串。CSV 以 UTF-8 编码。

我的 CSV 片段如下所示：

```
"geonameid","name","asciiname","alternatenames","loc","feature_class","feature_code","country_code","cc2","admin1_code","admin2_code","admin3_code","admin4_code"
3,"Zamīn Sūkhteh","Zamin Sukhteh","Zamin Sukhteh,Zamīn Sūkhteh","[48.91667,32.48333]","P","PPL","IR",,"15",,,
5,"Yekāhī","Yekahi","Yekahi,Yekāhī","[48.9,32.5]","P","PPL","IR",,"15",,,
7,"Tarvīḩ ‘Adāī","Tarvih `Adai","Tarvih `Adai,Tarvīḩ ‘Adāī","[48.2,32.1]","P","PPL","IR",,"15",,, 
```

与 mongoimport 一起使用的所需 JSON 输出（字符集除外）如下：

```
{"geonameid":3,"name":"Zamin Sukhteh","asciiname":"Zamin Sukhteh","alternatenames":"Zamin Sukhteh,Zamin Sukhteh","loc":[48.91667,32.48333] ,"feature_class":"P","feature_code":"PPL","country_code":"IR","cc2":null,"admin1_code":15,"admin2_code":null,"admin3_code":null,"admin4_code":null}
{"geonameid":5,"name":"Yekahi","asciiname":"Yekahi","alternatenames":"Yekahi,Yekahi","loc":[48.9,32.5] ,"feature_class":"P","feature_code":"PPL","country_code":"IR","cc2":null,"admin1_code":15,"admin2_code":null,"admin3_code":null,"admin4_code":null}
{"geonameid":7,"name":"Tarvi? ‘Adai","asciiname":"Tarvih `Adai","alternatenames":"Tarvih `Adai,Tarvi? ‘Adai","loc":[48.2,32.1] ,"feature_class":"P","feature_code":"PPL","country_code":"IR","cc2":null,"admin1_code":15,"admin2_code":null,"admin3_code":null,"admin4_code":null} 
```

我已经尝试了所有可用的在线 CSV-JSON 转换器，但由于文件大小，它们无法正常工作。我得到的最接近的是[Mr Data Converter](http://shancarter.com/data_converter/)（如上图所示），它会在删除文档之间的开始和结束括号以及逗号后导入到 MongoDb。不幸的是，该工具不适用于 300 mb 的文件。

上面的 JSON 设置为 UTF-8 编码，但仍有字符集问题，很可能是由于转换错误？

我花了最后三天学习 Python，尝试使用 Python CSVKIT，尝试了 stackoverflow 上的所有 CSV-JSON 脚本，将 CSV 导入 MongoDB 并将“loc”字符串更改为数组（不幸的是，这保留了引号），甚至尝试手动一次复制和粘贴 30,000 条记录。大量的逆向工程、反复试验等等。

有没有人知道如何在保持编码正确的同时实现上面的 JSON，就像上面的 CSV 一样？我完全处于静止状态。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T18:44:29.577

Python 标准库（加上用于十进制编码支持的 simplejson）拥有你所需要的一切：

```
import csv, simplejson, decimal, codecs

data = open("in.csv")
reader = csv.DictReader(data, delimiter=",", quotechar='"')

with codecs.open("out.json", "w", encoding="utf-8") as out:
   for r in reader:
      for k, v in r.items():
         # make sure nulls are generated
         if not v:
            r[k] = None
         # parse and generate decimal arrays
         elif k == "loc":
            r[k] = [decimal.Decimal(n) for n in v.strip("[]").split(",")]
         # generate a number
         elif k == "geonameid":
            r[k] = int(v)
      out.write(simplejson.dumps(r, ensure_ascii=False, use_decimal=True)+"\n") 
```

其中“in.csv”包含您的大 csv 文件。上面的代码被测试为在 Python 2.6 和 2.7 上工作，具有大约 100MB 的 csv 文件，生成正确编码的 UTF-8 文件。根据要求，没有括号、数组引用或逗号分隔符。

还值得注意的是，要使编码正常工作（在这种情况下），需要同时传递 ensure_ascii 和 use_decimal 参数。

最后，[基于 simplejson](https://stackoverflow.com/questions/712791/json-and-simplejson-module-differences-in-python)的 python stdlib *json*包迟早也会获得十进制编码支持。所以最终只需要stdlib。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-17T12:25:00.047

也许您可以尝试使用将 csv 直接导入 mongodb

```
mongoimport -d <dB> -c <collection> --type csv --file location.csv --headerline 
```

# android - 黑色方块代替图像

> ID：13478228
> 
> 赞同：0
> 
> 时间：2012-11-20T17:00:25.333
> 
> 标签：android, android-layout, android-ui, galaxy

我有一个问题，在 Galaxy S3 上，一些图像被黑色方块取代。在其他设备上它工作正常。一些想法可能导致这个问题？

![在此处输入图像描述](../Images/691b230aa950561c1cd5cf82641dc0f2.png)

编辑：一些代码：

```
final ImageView subscribe = (ImageView) view.findViewById(R.id.subscribe);
final boolean isSubscribed = isSubscribed();
subscribe.setImageResource(isSubscribed ? R.drawable.star_yellow : R.drawable.star_gray); 
```

布局：

```
<ImageView
     android:id="@+id/subscribe"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentRight="true" 
     android:padding="20dip"
     android:src="@drawable/star_gray"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T01:37:27.193

我之前测试了一些GIF图像也遇到了同样的问题，只需改回PNG，就可以了。

如果图像已经是 PNG，也许可以重新编辑图像以防万一......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:16:46.057

我将imageview更改为imagebutton，现在可以使用

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-10-19T07:28:41.163

只需卸载然后安装应用程序，它的工作正常..

# java - 在 Eclipse 调试器和设备上启动 android 应用程序有什么区别

> ID：13478230
> 
> 赞同：1
> 
> 时间：2012-11-20T17:00:30.960
> 
> 标签：java, android, eclipse, debugging

有人可以指出在 eclipse 调试器中启动 android 应用程序和通常从设备启动 android 应用程序的区别。我正在构建一个使用 wifi direct 的应用程序。当它从调试器运行时，它工作正常，但是当它从设备启动时，因为我们通常启动任何应用程序，一些功能/服务不起作用。

两者的基本区别是什么？

谢谢

# c# - Javascript window.open() 转义 & 符号

> ID：13478231
> 
> 赞同：2
> 
> 时间：2012-11-20T17:00:30.717
> 
> 标签：c#, javascript, asp.net, popup

我正在升级一个遗留应用程序，它使用了使用 Javascript`window.open()`打开弹出窗口以设置值的烦人做法。我在将查询字符串变量传递到该弹出窗口时遇到问题，因为 url 是在服务器端构建的。

例子

JS：

```
function popupwindow(vLink) { 
    window.open(vLink, 'Detail','width=600px,height=545px,status=yes,help=no,scrollbars=yes,resizable=yes,top=350');
} 
```

XML

```
<asp:Label ID="lblOpener" runat="server" Text="_"></asp:Label> 
```

服务器端

```
int ditem = 123;
string dcode = "ABC";
string vLink = string.Format("detail.aspx?item={0}&code={1}", ditem, dcode);
lblOpener.Attributes.Add("onclick", "popupwindow('" & vLink & "');"); 
```

单击标签时，我希望弹出窗口会使用查询字符串打开：

`http://detail.aspx?item=123&code=ABC`

相反，我得到这样的东西： `http://detail.aspx?item=123&amp%3bcode=ABC`

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:04:01.277

您可以尝试使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)进行编码：

```
lblOpener.Attributes.Add("onclick", "popupwindow(" & New JavaScriptSerializer().Serialize(vLink) & ");"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:08:19.040

encodeURI 会起作用吗？像这样包装你 `vLink`：

```
lblOpener.Attributes.Add("onclick", "popupwindow('" & encodeURI(vLink) & "');"); 
```

可能工作！

# c - 在C中以均匀概率有效地从文本文件中选择随机行？

> ID：13478232
> 
> 赞同：9
> 
> 时间：2012-11-20T17:00:37.383
> 
> 标签：c, random, random-access

这本质上是[这个问题](https://stackoverflow.com/questions/232237/whats-the-best-way-to-return-a-random-line-in-a-text-file-using-c)的一个更受限制的版本。

假设我们有一个非常大的文本文件，其中包含大量行。

我们需要从文件中随机选择一行，概率一致，但是有一些限制：

*   因为这是一个软实时应用程序，我们无法遍历整个文件。选择应该花费恒定的时间。
*   由于内存限制，无法缓存该文件。
*   因为文件允许在运行时更改，所以不能假定文件的长度是一个常数。

我的第一个想法是使用`lstat()`调用来获取总文件大小（以字节为单位）。`fseek()`然后可以用于直接访问随机字节偏移量，获得类似 O(1) 访问文件的随机部分的内容。

问题是我们不能再执行诸如读取到下一个换行符并收工之类的事情，因为这会产生一个偏向于长行的分布。

我解决这个问题的第一个想法是读取前“n”个换行符（如果需要，回绕到文件的开头），然后从这个较小的集合中选择一个概率一致的行。可以安全地假设文件的内容是随机排序的，所以这个子样本在长度方面应该是统一的，并且由于它的起点是从所有可能的点中统一选择的，它应该代表文件中的统一选择作为所有的。所以，在**pseudo-C**中，我们的算法看起来像：

```
 lstat(filepath, &filestat);
 fseek(file, (int)(filestat.off_t*drand48()), SEEK_SET);
 char sample[n][BUFSIZ];
 for(int i=0;i<n;i++)
     fgets(sample[i], BUFSIZ, file); //plus some stuff to deal with file wrap around...
 return sample[(int)(n*drand48())]; 
```

这似乎不是一个特别优雅的解决方案，而且我不完全相信它会是统一的，所以我想知道是否有更好的方法来做到这一点。有什么想法吗？

编辑：进一步考虑，我现在很确定我的方法不统一，因为起点更有可能在较长的单词内，因此不统一。棘手！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:00:39.803

找到了解决方案，效果出奇的好。在这里为我自己和其他人记录。

此示例代码在实践中每秒执行大约 80,000 次绘制，在大多数运行中，平均行长度与文件的 4 位有效数字相匹配。[相比之下，我使用交叉引用问题](https://stackoverflow.com/questions/232237/whats-the-best-way-to-return-a-random-line-in-a-text-file-using-c)中的方法每秒获得大约 250 次绘图。

本质上，它所做的是对文件中的一个随机位置进行采样，然后丢弃它并以与行长度成反比的概率再次绘制。这消除了对较长单词的偏见。平均而言，该方法在接受一次之前，绘制的次数等于文件中的平均行长度。

一些显着的缺点：

*   行长较长的文件每次绘制会产生更多的拒绝，这会慢得多。
*   行长较长的文件在 rdraw 函数中需要大于 50 的常数，如果行长表现出高方差，这在实践中似乎意味着*更长的*寻道时间。例如，在我测试的一个文件上将其设置为 BUFSIZ，将绘制速度降低到每秒 10000 次左右。尽管如此，仍然比计算文件中的行快得多。

    ```
    int rdraw(FILE* where, char *storage, size_t bytes){
        int offset = (int)(bytes*drand48());
        int initial_seek = offset>50?offset-50:0;
        fseek(where, initial_seek, SEEK_SET);
        int chars_read = 0;
        while(chars_read + initial_seek < offset){
                fgets(storage,50,where);
                chars_read += strlen(storage);
        }
        return strlen(storage);
    }

    int main(){
        srand48(time(NULL));
        struct stat blah;
        stat("/usr/share/dict/words", &blah);
        FILE *where = fopen("/usr/share/dict/words", "r");
        off_t bytes = blah.st_size;
        char b[BUFSIZ+1];

        int i;
        for(i=0;i<1000000; i++){
                while(drand48() > 1.0/(rdraw(where, b, bytes)));
        }

    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T20:11:19.170

从文件中选择一个随机字符（通过 rand 并按照您的说明进行搜索）。现在，而不是找到相关的换行符，因为正如你所指出的那样有偏见，我将应用以下算法：

```
 Is the character a newline character?
   yes - use the preceeding line
   no  - try again 
```

除了线条的均匀分布之外，我看不出这怎么能提供任何东西。效率取决于一条线的平均长度。如果您的文件有相对较短的行，这可能是可行的，但如果文件真的不能被操作系统预缓存，您可能会在物理磁盘寻道上付出沉重的代价。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:37:15.200

如果文件最后只更改（添加更多行），您可以创建具有统一概率的算法：

准备工作：创建一个索引文件，其中包含每个第 n 行的偏移量。使用固定宽度格式，以便可以使用位置来确定您拥有的记录。

1.  打开索引文件并读取最后一条记录。用于`ftell`确定记录号。

2.  打开大文件并`fseek`到步骤 1 中获得的偏移量。

3.  将大文件读到最后，计算换行符的数量。您现在有了大文件中的总行数。

4.  生成一个随机数，最多为步骤 3 中获得的行数。

5.  `fseek`到并读取索引文件中的相应记录。

6.  `fseek`到大文件中的适当偏移量。跳过其余的换行符。

7.  读线！

**例子**

假设我们选择了 n=100 并且大文件包含 367 行。

索引文件：

```
00000000,00004753,00009420,00016303 
```

1.  索引文件有 4 条记录，因此大文件至少包含 300 条记录 (100* (4-1))。最后一个偏移量是 16303。

2.  打开大文件`fseek`到16303。

3.  计算剩余的行数 (67)。

4.  Generata 是 [0-366] 范围内的随机数。假设我们得到了 112。

5.  112/100 = 1，余数为 12。读取偏移量为 1 的索引文件记录。我们得到结果 4753。

6.  `fseek`到大文件中的 4753，然后跳过 11 (12-1) 行。

7.  阅读第 12 行。

瞧！

**编辑：**

我看到关于目标文件的评论发生了变化。如果目标文件很少更改，那么这可能仍然是一种可行的方法。您需要在切换目标文件之前创建一个新的索引文件。`n`当目标文件增长超过行数时，您可能还想更新索引文件。

# python - 用elaphe生成code128条码

> ID：13478246
> 
> 赞同：2
> 
> 时间：2012-11-20T17:01:19.013
> 
> 标签：python, python-imaging-library, barcode, ghostscript, eps

我使用该[`elaphe`包](http://code.google.com/p/elaphe/)生成 code128 条形码。但是，生成的条形码是空的。起初我认为问题出在 ghostscript（PIL 库用来读取 EPS 文件），但其他条形码类型工作正常。

我写的代码是：

```
barcode('code128', 'barcodetest').save('/home/vj/barcodetest.jpg') 
```

但这给了我`IOError: gs failed (status 256)`错误。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:00:24.880

google.com 线程中提供的 PostScript 文件严重损坏。我不确定这是否是真正的原始问题。查看 PostScript 文件的内部，我发现了许多技术问题，包括使用从未定义的例程（实际上其中许多看起来像不正确的换行符）。然而最明显的问题是：

```
/rationalizedCodabar {
.....
.....
    /textsGS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>GS>ize 10 def 
```

显然不应该出现重复的“GS>”插入，并且该行应该是：

```
 /textsize 10 def 
```

我倾向于认为我看到的其他问题是相同故障的症状。如果这是发送到 Ghostscript 的实际 PostScript 文件，我一点也不惊讶它不起作用。

# java - 投诉最终变量

> ID：13478264
> 
> 赞同：7
> 
> 时间：2012-11-20T17:02:06.780
> 
> 标签：java, final

好的，据我所知，我了解关于`final`变量的这些事情。

1.  它应该只分配一次
2.  所有`final`变量都应该在构造函数完成之前初始化

现在使用上述内容，我不明白以下内容如何不起作用：

```
public class FinalTest implements AnotherClass {

    private final Something something;
    private final otherthing;

    @Override
    public void setStuff(Something something) {
        this.something = something;
        this.otherthing = new SomeClass(something);
    }

    public FinalTest(Something something) {
        setStuff(something);
    }
} 
```

在这里，在构造函数完成之前，`final`正在设置变量。那么为什么编译器会抱怨它呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-20T17:03:57.897

不必仅从构造函数调用您的方法，也可以从构造函数外部调用它。甚至将来也可能将第二次调用添加到同一个构造函数中。

即使您现在可能没有使用它，但编译器无法确定它，所以它不允许它。从技术上讲，没有`definite assignment`.

**例如：-**假设您从以下位置实例化您的类`main`：-

```
public static void main(String[] args) {
    FinalTest obj = new FinalTest(something);

    obj.setStuff(something); // There you go. This cannot be prevented. 
} 
```

有关详细说明，请参阅[JLS - 明确分配。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T17:03:58.237

因为没有人阻止你`setStuff()`在对象生命周期的第二次调用，这将是非法的。

`final`字段只能在保证只运行一次的代码块中分配，即构造函数和实例初始化程序。（或在字段的情况下使用静态初始化程序`static final`。）

更多关于这可以在[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)中找到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T17:04:05.023

因为编译器不知道唯一的调用

```
public void setStuff(Something something) {
    this.something = something;
    this.otherthing = new SomeClass(something);
} 
```

来自构造函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:04:22.680

应该是以下行

```
private final otherthing; 
```

就像是

```
private final Something otherthing; 
```

你错过了课程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T17:07:37.087

只是一个旁注：

```
@Override
public void setStuff(Something something) {
    this.something = something;
    this.otherthing = new SomeClass(something);
}

public FinalTest(Something something) {
    setStuff(something);
} 
```

这真是一个糟糕的设计。您不应从构造函数调用可覆盖的方法。

# powershell - 以表格格式显示二维数组

> ID：13478265
> 
> 赞同：3
> 
> 时间：2012-11-20T17:02:09.883
> 
> 标签：powershell

我正在学习一些关于图论的知识，并被转移到 Powershell 文本格式中。我正在编写一个脚本，该脚本根据用户输入创建一个二维数组并以表格格式显示该数组。第一部分很简单：询问用户数组的大小，然后询问用户每个元素的值。第二部分——在行和列中显示数组——是困难的。

Powershell 在自己的行中显示数组的每个元素。以下脚本产生以下输出：

```
$a= ,@(1,2,3)
$a+=,@(4,5,6)
$a

1
2
3
4
5
6 
```

我需要像这样的输出：

```
1 2 3
4 5 6 
```

我可以使用脚本块来正确格式化它：

```
"$($a[0][0])   $($a[0][1]) $($a[0][2])"
"$($a[1][0])   $($a[1][1]) $($a[1][2])"

1   2   3
4   5   6 
```

但这只有在我知道数组的大小时才有效。每次脚本运行时，用户都会设置大小。它可能是 5x5 或 100x100。我可以通过使用 foreach 循环来调整行数：

```
foreach ($i in $a){
     "$($i[0]) $($i[1]) $($i[2])"
     } 
```

但是，这不会根据列数进行调整。我不能只嵌套另一个 foreach 循环：

```
foreach ($i in $a){
     foreach($j in $i){
          $j
          }
     } 
```

这只是将每个元素再次打印在自己的行上。嵌套的 foreach 循环是我用来遍历数组中每个元素的方法，但在这种情况下它们对我没有帮助。有任何想法吗？

脚本如下：

```
clear

$nodes = read-host "Enter the number of nodes."

#Create an array with rows and columns equal to nodes
$array = ,@(0..$nodes)
for ($i = 1; $i -lt $nodes; $i++){
     $array += ,@(0..$nodes)
     }

#Ensure all elements are set to 0
for($i = 0;$i -lt $array.count;$i++){
     for($j = 0;$j -lt $($array[$i]).count;$j++){
          $array[$i][$j]=0
          }
     }

#Ask for the number of edges
$edge = read-host "Enter the number of edges"

#Ask for the vertices of each edge
for($i = 0;$i -lt $edge;$i++){
     $x = read-host "Enter the first vertex of an edge"
     $y = read-host "Enter the second vertex of an edge"
     $array[$x][$y] = 1
     $array[$y][$x] = 1
     }

#All this code works. 
#After it completes, I have a nice table in which the columns and rows 
#correspond to vertices, and there's a 1 where each pair of vertices has an edge. 
```

此代码生成邻接矩阵。然后我可以使用矩阵来学习所有关于图论算法的知识。同时，我只想让 Powershell 将其显示为一张整洁的小桌子。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:06:26.893

试试这个：

```
$a | % { $_ -join ' ' } 
```

或更好

```
$a | % { $_ -join "`t" } 
```

# java - oracle变更通知问题

> ID：13478273
> 
> 赞同：3
> 
> 时间：2012-11-20T17:02:32.373
> 
> 标签：java, oracle

我有 oracle 数据库 11.2，我正在尝试让 oracle 更改通知正常工作。但它似乎没有通知我，我正在使用 ojdbc6.jar。表正在注册到通知中；通过运行验证

```
select * from USER_CHANGE_NOTIFICATION_REGS 
```

当我从外部客户端对表执行更新时，我的侦听器没有被调用。但是当我关闭/启动数据库时，它会通知。

```
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;
import oracle.jdbc.OracleConnection;
import oracle.jdbc.OracleDriver;
import oracle.jdbc.OracleStatement;
import oracle.jdbc.dcn.DatabaseChangeEvent;
import oracle.jdbc.dcn.DatabaseChangeListener;
import oracle.jdbc.dcn.DatabaseChangeRegistration;

public class DBChangeNotification
{
  static final String USERNAME= "scott";
  static final String PASSWORD= "tiger";
  static String URL;

  public static void main(String[] argv)
  {
    if(argv.length < 1)
    {
      System.out.println("Error: You need to provide the URL in the first argument.");
      System.out.println("  For example: > java -classpath .:ojdbc5.jar DBChangeNotification \"jdbc:oracle:thin: @(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=yourhost.yourdomain.com)(PORT=1521)) CONNECT_DATA=(SERVICE_NAME=yourservicename)))\"");

      System.exit(1);
    }
    URL = argv[0];
    DBChangeNotification demo = new DBChangeNotification();
    try
    {
      demo.run();
    }
    catch(SQLException mainSQLException )
    {
      mainSQLException.printStackTrace();
    }
  }

  void run() throws SQLException
  {
    OracleConnection conn = connect();

    // first step: create a registration on the server:
    Properties prop = new Properties();

    // if connected through the VPN, you need to provide the TCP address of the client.
    // For example:
    // prop.setProperty(OracleConnection.NTF_LOCAL_HOST,"14.14.13.12");

    // Ask the server to send the ROWIDs as part of the DCN events (small performance
    // cost):
    prop.setProperty(OracleConnection.DCN_NOTIFY_ROWIDS,"true");
    // 
    //Set the DCN_QUERY_CHANGE_NOTIFICATION option for query registration with finer granularity.
    prop.setProperty(OracleConnection.DCN_QUERY_CHANGE_NOTIFICATION,"true");

    // The following operation does a roundtrip to the database to create a new
    // registration for DCN. It sends the client address (ip address and port) that
    // the server will use to connect to the client and send the notification
    // when necessary. Note that for now the registration is empty (we haven't registered
    // any table). This also opens a new thread in the drivers. This thread will be
    // dedicated to DCN (accept connection to the server and dispatch the events to 
    // the listeners).
    DatabaseChangeRegistration dcr = conn.registerDatabaseChangeNotification(prop);

    try
    {
      // add the listenerr:
      DCNDemoListener list = new DCNDemoListener(this);
      dcr.addListener(list);

      // second step: add objects in the registration:
      Statement stmt = conn.createStatement();
      // associate the statement with the registration:
      ((OracleStatement)stmt).setDatabaseChangeRegistration(dcr);
      ResultSet rs = stmt.executeQuery("select rowid from dept where 1 = 2");
      while (rs.next())
      {}
      String[] tableNames = dcr.getTables();
      for(int i=0;i<tableNames.length;i++)
        System.out.println(tableNames[i]+" is part of the registration.");
      rs.close();
      stmt.close();
    }
    catch(SQLException ex)
    {
      // if an exception occurs, we need to close the registration in order
      // to interrupt the thread otherwise it will be hanging around.
      if(conn != null)
        conn.unregisterDatabaseChangeNotification(dcr);
      throw ex;
    }
    finally
    {
      try
      {
        // Note that we close the connection!
        conn.close();
      }
      catch(Exception innerex){ innerex.printStackTrace(); }
    }

    synchronized( this ) 
    {

      // wait until we get the event
      try{ this.wait();} catch( InterruptedException ie ) {}
    }

    // At the end: close the registration (comment out these 3 lines in order
    // to leave the registration open).
    OracleConnection conn3 = connect();
    conn3.unregisterDatabaseChangeNotification(dcr);
    conn3.close();
  }

  /**
   * Creates a connection the database.
   */
  OracleConnection connect() throws SQLException
  {
    OracleDriver dr = new OracleDriver();
    Properties prop = new Properties();
    prop.setProperty("user",DBChangeNotification.USERNAME);
    prop.setProperty("password",DBChangeNotification.PASSWORD);
    return (OracleConnection)dr.connect(DBChangeNotification.URL,prop);
  }
}
/**
 * DCN listener: it prints out the event details in stdout.
 */
class DCNDemoListener implements DatabaseChangeListener
{
  DBChangeNotification demo;
  DCNDemoListener(DBChangeNotification dem)
  {
    demo = dem;
  }
  public void onDatabaseChangeNotification(DatabaseChangeEvent e)
  {
    Thread t = Thread.currentThread();
    System.out.println("DCNDemoListener: got an event ("+this+" running on thread "+t+")");
    System.out.println(e.toString());
    synchronized( demo ){ demo.notify();}
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-21T01:22:52.140

好吧，这个更改通知根本不起作用。我将使用另一条路线 Oracle Advance Queue JMS 消息传递

```
oracle.jms.AQjmsSession
oracle.jms.AQjmsFactory 
```

# git - 默认情况下，如何使 git 示例挂钩不可执行？

> ID：13478274
> 
> 赞同：2
> 
> 时间：2012-11-20T17:02:34.017
> 
> 标签：git, permissions, hook

我如何配置 git在新的 1.6 后 git 存储库中默认**不**使其可执行？`.git/hooks/*.sample`

我无权：

```
$ chmod -x /usr/share/git-core/templates/hooks/* 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:09:40.407

`/usr/share/git-core/templates/`通过复制到主目录中的 somwhere来创建自己的模板目录。添加到您的`~/.gitconfig`：

```
[init]
    templatedir = /path/to/my/templates 
```

在您自己的副本中，您应该能够根据需要更改权限。

# java - 改善禁用复选框的外观

> ID：13478275
> 
> 赞同：0
> 
> 时间：2012-11-20T17:02:52.047
> 
> 标签：java, jcheckbox

有一组复选框，我根据需要在我的程序中选择它们。由于我只需要显示选定的值，用户不应该能够对这些复选框执行操作。（即选择复选框）。禁用这些复选框（即 setEnabled(false)），通过将其变灰使其看起来很奇怪。是否存在不禁用组合框的解决方案？我为 ActionEvent 尝试了 consume()。但是使用 consume() 是不可能的。

# jquery - jQuery 工具提示被 jQuery 1.8.1 破坏

> ID：13478277
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:02:53.667
> 
> 标签：jquery, tooltip, jquery-tools

我有使用 jQuery 1.7.1 的 jQuery 工具工具提示。但是，我不得不将我的 jQuery 更新到 1.8.1 以解决一个甜蜜的 IE8 和更低的问题。工具提示不再适用于 jQuery 1.8.1。有谁知道快速修复？谢谢。

更新 - 这是我用来调用插件的 JS。还使用实时查询。

```
$(function() {

    $("th a[title], a.tipin[title]").livequery(function(){
        $(this).tooltip({
            offset: [-30, 0],
            opacity: 0.9
        }).dynamic({ bottom: { direction: 'down' } });
    });

    $("a.tip[title]").livequery(function(){
        $(this).tooltip({
            offset: [0, 30],
            position: 'center right',
            opacity: 0.9
        }).dynamic({ bottom: { direction: 'down' } });
    });}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:44:36.690

所以我还在使用 jQueryUI 1.8.19 来实现其他一些功能。我将 jQueryUI 更新到 1.9.1 以使用它的工具提示功能，这解决了我使用 jQuery 工具工具提示的问题。我猜 jQueryUI 1.8 中存在某种冲突？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:55:26.917

jQuery 1.8 的问题是从`outerWidth()`到`outerWidth(true)`. 您不能再在没有参数的情况下调用该函数。为边距设置 true 或 false 或不设置边距。

jQuery 工具尚未更新，但我在工具提示中更改了`outerWidth`/`outerHight`的所有调用，现在它又可以工作了。

# python - Python-Tkinter：当窗口最小化到任务栏时，如何在 Windows XP 上突出显示任务栏上的项目

> ID：13478279
> 
> 赞同：1
> 
> 时间：2012-11-20T17:02:58.907
> 
> 标签：python, tkinter, highlight, taskbar

我正在使用 python/tkinter 在 XP 上编写一个 IM 软件。现在我已经完成了所有主要功能，除了当收到新消息时窗口最小化到任务栏时，我不知道如何在 windows xp 的任务栏上突出显示或更改我的 IM 项目的颜色。我已经搜索过了，但刚刚得到了 c# 解决方案。我需要关于 python 的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-13T10:44:23.740

我需要为我正在编写并找到[http://wiki.tcl.tk/1049](http://wiki.tcl.tk/1049)的 tkinter python slack 客户端执行此操作。经过一番猜测，我发现

```
Tk().deiconify()
Tk().focus_force() 
```

（即在根窗口上）可以解决问题。Windows 实际上并没有改变焦点并显示窗口，因为不允许应用程序这样做（XP 之后的 Windows），但它会闪烁任务栏。它会一直闪烁，直到被点击，但这似乎是 Skype/Slack 等的行为。当然对于许多用途来说足够接近。

显然这是一个老问题，但我找不到一个简洁的、仅限 python 的答案，但仍然需要一个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:39:47.563

我不确定是否有使用 Tk 的好方法。也许更有知识的人将能够为您指明更好的方向。由于 Python 如此依赖 OO，因此您可能很难将绑定写入 Windows 窗口管理器。

如果您没有找到其他任何东西，我确实偶然发现了[http://wiki.tcl.tk/4089](http://wiki.tcl.tk/4089)，它管理任务栏上的 Windows 图标。也许您可以利用它来模拟您想要的任务栏闪存？

# eclipse - 以编程方式打开一个视图 eclipse 视图

> ID：13478281
> 
> 赞同：0
> 
> 时间：2012-11-20T17:03:16.787
> 
> 标签：eclipse, eclipse-plugin, treeviewer

我想以编程方式打开一个 Eclipse 视图，我尝试了以下代码：

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView(view.ID); 
```

它打开了视图，但它只实例化了一次。我需要在包资源管理器中双击一个文件来打开一个视图，到目前为止我发现的唯一方法是在编辑器构造函数中打开它（一个自定义编辑器，顺便说一句如果有人知道如何通过双击包资源管理器中的文件来打开视图，我会全力以赴）。为了填充视图（树视图），我使用文件中的数据，它在我第一次打开它时工作正常，但它不会刷新它的内容。

我是否可以访问视图类对象并以某种方式进行操作（可能获取树查看器对象）？做到这一点的完美方法是直接在我需要渲染的文件中双击打开视图，但我没有找到如何，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:12:04.043

您所描述的实际上是一个只读编辑器。不应该有任何理由不能实现具有虚拟 save() 和 saveAs() 实现的编辑器。您将在任何导航视图中获得所需的双击支持。

# c++ - cmake 无法检测到 boost 多个安装

> ID：13478289
> 
> 赞同：1
> 
> 时间：2012-11-20T17:03:56.013
> 
> 标签：c++, boost, cmake

我以前从 ubuntu repo 安装了 1.42 的 boost 安装，`/usr/lib`现在我下载了 1.52 并将`./b2 install`它安装在`/usr/local/lib`. 现在 cmake 仅检测 1.52 并使用包含路径`/usr/local/include`（即 1.52）和使用库目录`/usr/lib`（即 1.42）并给出未定义的参考错误。

```
cmake_minimum_required(VERSION 2.6)
PROJECT(app)
set(Boost_USE_MULTITHREADED ON)
FIND_PACKAGE(Boost 1.52 COMPONENTS filesystem program_options thread system serialization  REQUIRED)
ADD_EXECUTABLE(app list_of_cpp_files)
MESSAGE(STATUS "** Boost Include: ${Boost_INCLUDE_DIR}")
MESSAGE(STATUS "** Boost Libraries: ${Boost_LIBRARIES}")
TARGET_LINK_LIBRARIES(app ${Boost_LIBRARIES})
if(CMAKE_COMPILER_IS_GNUCXX)
    set(CMAKE_CXX_FLAGS "-g -O2")
    set(CMAKE_EXE_LINKER_FLAGS "-s")
endif() 
```

即使我在 CMakeLists.txt 中给出一个 LIBRARY_PATH 它仍然使用 /usr/lib

现在应该怎么办？我会做一个`booststrap.sh --prefix=/usr`但不会复制副本吗？我还需要手动更改所有符号链接吗？

或者我会从 repo (apt-get) 中删除以前的安装 (1.42)？我不能全部删除，因为有依赖包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:18:36.733

通过做一个解决`./bjam --layout=tagged install`

# nagios - 如何在 check_mk / Nagios 中测试手动检查

> ID：13478292
> 
> 赞同：3
> 
> 时间：2012-11-20T17:03:58.707
> 
> 标签：nagios

我的组织正在使用带有[check_mk](http://mathias-kettner.de/index.html)插件的 Nagios 来监控我们的节点。我的问题是：是否可以从命令行运行[手动检查](http://mathias-kettner.de/checkmk_manualchecks.html)？在流程方面，能够在部署配置更改之前对其进行测试非常重要。

例如，我准备了一个配置更改，它使用[ps.perf](http://mathias-kettner.de/checkmk_check_ps.perf.html)检查类型来检查我们的 Web 服务器上的 httpd 进程的数量。检查如下所示：

```
checks = [
  ( ["web"], ALL_HOSTS, "ps.perf", "Number of httpd processes", ( "/usr/sbin/httpd", 1, 2, 80, 100 ) )
] 
```

我想在提交和部署之前测试此配置更改。

是否可以通过命令行运行此检查，而无需先将其添加到`main.mk`？我正在设想类似的东西：

```
useful_program -H my.web.node -c ps.perf -A /usr/sbin/httpd,1,2,80,100 
```

我在 check_mk 文档中看不到任何方法可以做这样的事情，但我希望有办法实现这样的事情。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T15:27:04.897

这很容易检查。

只需进行配置更改，然后运行：cmk -nv HOSTNAME。

那 (-n) 将尝试运行所有内容并返回 (-v) 输出。

因此可以在 GUI 中看到与稍后相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T06:31:03.257

列出支票

```
$check_mk -L | grep ps.perf 
```

如果它列出 ps.perf 然后运行以下命令，

```
$check_mk --checks=ps.perf -I Hostname 
```

# wix - 在 WiX 中静默安装根证书

> ID：13478297
> 
> 赞同：10
> 
> 时间：2012-11-20T17:04:17.220
> 
> 标签：wix

如何从 WiX 静默安装根证书？我正在安装一些根证书和中间证书，对于根证书，系统会显示确认对话框，其中显示基本证书属性和指纹。这是我拥有的相关代码，`WixIIsExtension`在命名空间中使用映射`iis`：

```
<Binary Id="RootCa" SourceFile="Certificates\RootCa.cer" />

<DirectoryRef Id="TARGETDIR">
  <Component Id="RootCa" Guid="...">
    <iis:Certificate
      Id="RootCa"
      BinaryKey="RootCa"
      Name="RootCa"
      StoreLocation="currentUser"
      StoreName="root"/>
  </Component>
</DirectoryRef>

<Feature ...>
    <ComponentRef Id="RootCa" />
</Feature> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T05:13:01.707

我正在使用相同的自定义操作

```
<CustomAction Id="InstallCertificates" Directory="TARGETDIR" ExeCommand="[SystemFolder]Certutil –addstore –f &quot;root&quot; &quot;[INSTALLLOCATION]Certificates\CertificateName.cer&quot;" Execute="immediate" Return="ignore" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T06:52:55.577

我很久以前就一直在寻找答案。所以，这就是我所拥有的：

维克斯代码：

```
<CustomAction Id="ImportCer.Props" Property="ImportCer" Value="[INSTALLDIR]ca\root.cer" />
<CustomAction Id="ImportCer" Execute="deferred"  FileKey="hsminst.dll" DllEntry="ImportCer" />

<CustomAction Id="ImportPfx.Props" Property="ImportPfx" Value="[INSTALLDIR]ca\super.pfx" />
<CustomAction Id="ImportPfx" Execute="deferred" FileKey="hsminst.dll" DllEntry="ImportPfx" /> 
```

C++ 代码：

```
 extern "C" __declspec(dllexport) UINT __stdcall ImportCer(MSIHANDLE hInstall)
 {
      char szPath[MAX_PATH];

      GetModuleFileNameA(NULL, szPath, MAX_PATH);

      char certFilePath[MAX_PATH] = {0};
  DWORD certFilePathLen = MAX_PATH;
      MsiGetProperty (
           hInstall, 
           "CustomActionData", 
           certFilePath, 
           &certFilePathLen);

      wchar_t certFilePathW[MAX_PATH];
      MultiByteToWideChar(
           CP_ACP, 
           0, 
           certFilePath, 
           -1, 
           certFilePathW, 
           MAX_PATH);

      PCCERT_CONTEXT pCertCtx = NULL;

      if (CryptQueryObject (
         CERT_QUERY_OBJECT_FILE,
         certFilePathW,
         CERT_QUERY_CONTENT_FLAG_ALL,
         CERT_QUERY_FORMAT_FLAG_ALL,
         0,
         NULL,
         NULL,
         NULL,
         NULL,
         NULL,
         (const void **)&pCertCtx) != 0)
      {
          HCERTSTORE hCertStore = CertOpenStore (
              CERT_STORE_PROV_SYSTEM,
              0,
              0,
              CERT_STORE_OPEN_EXISTING_FLAG |
              CERT_SYSTEM_STORE_LOCAL_MACHINE,
              L"root");
          if (hCertStore != NULL)
          {
               if (!CertAddCertificateContextToStore (
                  hCertStore,
                  pCertCtx,
                  CERT_STORE_ADD_ALWAYS,
                  NULL))
               {
                  return -2;
               }

               if (!CertCloseStore (hCertStore, 0))
               {
                   return -3;
               }
          }
          else
          { 
                return -1; 
          }

          if (pCertCtx)
          {
               CertFreeCertificateContext (pCertCtx);
          }
      }
      return 0;
  }

  extern "C" __declspec(dllexport) UINT __stdcall ImportPfx(MSIHANDLE hInstall)
  {
       char certFilePath[MAX_PATH] = {0};
   DWORD certFilePathLen = MAX_PATH;
       MsiGetProperty (
            hInstall, 
            "CustomActionData", 
            certFilePath, 
            &certFilePathLen);

       wchar_t certFilePathW[MAX_PATH];
       MultiByteToWideChar(
            CP_ACP, 
            0, 
            certFilePath, 
            -1, 
            certFilePathW, 
            MAX_PATH);

       CRYPTUI_WIZ_IMPORT_SRC_INFO importSrc;
       memset(
           &importSrc, 
           0, 
           sizeof(CRYPTUI_WIZ_IMPORT_SRC_INFO));

       importSrc.dwSize = sizeof(CRYPTUI_WIZ_IMPORT_SRC_INFO);
       importSrc.dwSubjectChoice = CRYPTUI_WIZ_IMPORT_SUBJECT_FILE;
       importSrc.pwszFileName = certFilePathW;
       importSrc.pwszPassword = L"111111";
       importSrc.dwFlags = CRYPT_EXPORTABLE;

       HCERTSTORE serviceStore = CertOpenStore(
            CERT_STORE_PROV_SYSTEM,
            0,
            0,
            CERT_STORE_OPEN_EXISTING_FLAG |
            CERT_SYSTEM_STORE_CURRENT_USER,
            L"my");

       if (CryptUIWizImport(
            CRYPTUI_WIZ_NO_UI ,
            NULL,
            NULL,
            &importSrc,
            serviceStore
            ) == 0)
       {
           return -1;
       }
       return 0;
  } 
```

希望能帮助你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T12:33:25.623

Sunil 提供的自定义操作等价于`Certificate`具有属性的组件`StoreLocation="localMachine"`。在我的情况下，无论如何安装在机器商店更有意义，所以我会继续这样做。原始问题仍然存在：如何在用户存储中静默安装根证书。如果有人对该问题有答案，我会将其标记为正确答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T21:14:18.450

我在使用 WiX 安装证书时遇到了问题 - 我遇到了两个问题：

1\. 如果您告诉 WiX 在本地计算机上安装受信任的根证书，它不起作用，而是安装在个人商店中。
2\. WiX 安装的证书的权限（当他们有私钥时）没有设置 Everyone 用户。[您可以使用MMC->证书管理器->本地机器->（使用私钥查找证书）右键单击->所有任务->管理私钥来更改权限，这会弹出一个文件权限对话框]。

[您可以使用 microsoft winhttpcertcfg.exe工具](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384088%28v=vs.85%29.aspx)避免这两个问题。我在批处理文件中使用它（见下文），并使用 WiX 静默自定义操作来调用批处理文件。在执行批处理之前，我让 WiX 安装工具、证书和批处理文件。可以设置批处理以在安装后删除工具和证书。它还可用于启动 WiX 安装的依赖于证书的服务。批处理的使用大大减少了您的 WiX 文件中的自定义操作的数量。

未正确安装证书的后果是在执行 http 请求时出现间歇性错误（有些机器工作，有些机器不工作），.net 客户端“无法创建 SSL/TLS 安全通道”异常。

```
REM Batch file to install certificates using WinHttpCertCfg.exe
"[path to installed]winhttpcertcfg.exe" -i "[path to installed]ca.pfx" -a Everyone -c LOCAL_MACHINE\Root  > c:\temp\installcc.log
"[path to installed]winhttpcertcfg.exe" -i "[path to installed]server.pfx" -a Everyone -c LOCAL_MACHINE\My  >> c:\temp\installcc.log 
```

我在产品中安装了批量安装和卸载文件。然后在 WiX 中 - 注意延迟和模拟的自定义操作。

```
<CustomAction Id="InstallCustomAction_Cmd" 
    Property="InstallCustomActionQt" 
    Value="&quot;cmd.exe&quot; /c &quot;[#InstallCustomAction.cmd]&quot;" 
    Execute="immediate" />

<CustomAction Id="InstallCustomActionQt" 
    BinaryKey="WixCA" 
    DllEntry="CAQuietExec"
    Execute="deferred" 
    Return="ignore" 
    Impersonate="yes"/>

<InstallExecuteSequence>
    <Custom Action="InstallCustomAction_Cmd" Before="InstallFinalize">NOT REMOVE</Custom>
    <Custom Action="InstallCustomActionQt" After="InstallCustomAction_Cmd" >NOT REMOVE</Custom>
...
</InstallExecuteSequence>
...
<Component Id="InstallCustomAction" Guid="{your-GUID}">
    <File Id="InstallCustomAction.cmd" KeyPath="yes"  
          Source="tools\InstallCloudConnectCustomAction.cmd" />
</Component> 
```

# html - 使用 Modernizr 检测 IE 的正确方法？

> ID：13478303
> 
> 赞同：84
> 
> 时间：2012-11-20T17:04:30.560
> 
> 标签：html, cross-browser, modernizr

我想使用 Modernizr JS 库来检测一些浏览器属性以确定显示或不显示的内容。

我有一个名为[Pano2VR](http://gardengnomesoftware.com/pano2vr.php)的应用程序，它同时输出 HTML5 和 SWF。我需要 iOS 设备用户的 HTML5。

但是，IE 根本不会呈现这个“HTML5”输出。似乎他们的输出使用了 CSS3 3D 转换和 WebGL，IE9 中显然不支持其中一种或多种。

因此，对于那些用户，我需要显示 Flash 版本。我计划使用 IFRAME 并通过 Modernizr 脚本或 document.write 出正确的 IFRAME 代码通过 SRC，具体取决于浏览器。

所有这些都导致我如何使用 Modernizr 来检测简单的 IE 或不检测 IE？或者检测 CSS 3d 转换？

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-11-20T19:14:51.820

Modernizr 本身并不会检测浏览器，它会检测存在哪些特性和功能，这就是它试图做的事情的全部内容。

您可以尝试像这样挂钩一个简单的检测脚本，然后使用它来做出选择。我还包括了版本检测，以防万一。如果您只想检查任何版本的 IE，您只需查找值为“MSIE”的 navigator.userAgent。

```
var BrowserDetect = {
        init: function () {
            this.browser = this.searchString(this.dataBrowser) || "Other";
            this.version = this.searchVersion(navigator.userAgent) || this.searchVersion(navigator.appVersion) || "Unknown";
        },
        searchString: function (data) {
            for (var i = 0; i < data.length; i++) {
                var dataString = data[i].string;
                this.versionSearchString = data[i].subString;

                if (dataString.indexOf(data[i].subString) !== -1) {
                    return data[i].identity;
                }
            }
        },
        searchVersion: function (dataString) {
            var index = dataString.indexOf(this.versionSearchString);
            if (index === -1) {
                return;
            }

            var rv = dataString.indexOf("rv:");
            if (this.versionSearchString === "Trident" && rv !== -1) {
                return parseFloat(dataString.substring(rv + 3));
            } else {
                return parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
            }
        },

        dataBrowser: [
            {string: navigator.userAgent, subString: "Edge", identity: "MS Edge"},
            {string: navigator.userAgent, subString: "MSIE", identity: "Explorer"},
            {string: navigator.userAgent, subString: "Trident", identity: "Explorer"},
            {string: navigator.userAgent, subString: "Firefox", identity: "Firefox"},
            {string: navigator.userAgent, subString: "Opera", identity: "Opera"},  
            {string: navigator.userAgent, subString: "OPR", identity: "Opera"},  

            {string: navigator.userAgent, subString: "Chrome", identity: "Chrome"}, 
            {string: navigator.userAgent, subString: "Safari", identity: "Safari"}       
        ]
    };

    BrowserDetect.init();
    document.write("You are using <b>" + BrowserDetect.browser + "</b> with version <b>" + BrowserDetect.version + "</b>");
```

然后，您可以简单地检查：

```
BrowserDetect.browser == 'Explorer';
BrowserDetect.version <= 9; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-03-25T00:19:21.747

您可以使用[Modernizr](http://www.modernizr.com)通过检查 SVG **SMIL**动画支持来简单地检测 IE 或非 IE。

如果您在 Modernizr 设置中包含**SMIL**功能检测，则可以使用简单的 CSS 方法，并将Modernizr 应用于**html**元素的**.no-smil类作为目标：**

 **```
html.no-smil {
  /* IE/Edge specific styles go here - hide HTML5 content and show Flash content */
} 
```

或者，您可以将 Modernizr 与简单的 JavaScript 方法一起使用，如下所示：

```
if ( Modernizr.smil ) {
  /* set HTML5 content */
} else {
  /* set IE/Edge/Flash content */
} 
```

请记住，IE/Edge 有朝一日可能会支持**SMIL**，但目前没有计划这样做。

作为参考，这里是[caniuse.com上](http://caniuse.com/#search=smil)**SMIL**兼容性图表的链接。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-05T07:15:11.973

### 检测 CSS 3D 变换

Modernizr[可以检测 CSS 3D 变换](http://modernizr.com/download/#csstransforms3d)，是的。的真实性`Modernizr.csstransforms3d`会告诉你浏览器是否支持它们。

上面的链接允许您选择要包含在 Modernizr 构建中的测试，并且您正在寻找的选项在那里可用。

* * *

### 专门检测IE

*或者*，正如 user356990 回答的那样，如果您只搜索 IE 和 IE，则可以使用条件注释。`<html>`您可以使用 HTML5 Boilerplate 的条件注释技巧来分配一个类，而不是创建一个全局变量：

```
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

如果你已经初始化了 jQuery，你可以用`$('html').hasClass('lt-ie9')`. 如果您需要检查您所在的 IE 版本以便有条件地加载 jQuery 1.x 或 2.x，您可以执行以下操作：

```
myChecks.ltIE9 = (function(){
    var htmlElemClasses = document.querySelector('html').className.split(' ');
    if (!htmlElemClasses){return false;}
    for (var i = 0; i < htmlElemClasses.length; i += 1 ){
      var klass = htmlElemClasses[i];
      if (klass === 'lt-ie9'){
        return true;
      }
    }
    return false;
}()); 
```

*注意 IE 条件注释仅支持 IE9（含 IE9）。从 IE10 开始，微软鼓励使用功能检测而不是浏览器检测。*

* * *

无论您选择哪种方法，您都可以使用

```
if ( myChecks.ltIE9 || Modernizr.csstransforms3d ){
    // iframe or flash fallback
} 
```

当然，不要`||`从字面上理解。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-11-07T13:56:40.720

如果您正在寻找 html5 样板文件的 JS 版本（结合使用特征检测和 UA 嗅探）：

```
var IE = (!! window.ActiveXObject && +(/msie\s(\d+)/i.exec(navigator.userAgent)[1])) || NaN;
if (IE < 9) {
    document.documentElement.className += ' lt-ie9' + ' ie' + IE;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-19T17:28:49.350

好吧，在对这个主题进行了更多研究之后，我最终使用了以下针对 IE 10+ 的解决方案。由于 IE10&11 是唯一支持 -ms-high-contrast 媒体查询的浏览器，因此无需任何 JS，这是一个不错的选择：

```
@media screen and (-ms-high-contrast: active), screen and (-ms-high-contrast: none) {  
   /* IE10+ specific styles go here */  
} 
```

完美运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-19T15:52:52.690

CSS 技巧有一个很好的针对 IE 11 的解决方案：

[http://css-tricks.com/ie-10-specific-styles/](http://css-tricks.com/ie-10-specific-styles/)

.NET 和 Trident/7.0 是 IE 独有的，因此可用于检测 IE 版本 11。

然后代码将用户代理字符串添加到具有属性“data-useragent”的 html 标记中，因此可以专门针对 IE 11...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-28T03:37:10.547

我需要检测 IE 与大多数其他东西，我不想依赖 UA 字符串。我发现`es6number`与 Modernizr 一起使用正是我想要的。我不太担心这种变化，因为我不希望 IE 支持 ES6 Number。所以现在我知道任何版本的 IE 与 Edge/Chrome/Firefox/Opera/Safari 之间的区别。

更多细节在这里：[http ://caniuse.com/#feat=es6-number](http://caniuse.com/#feat=es6-number)

请注意，我并不真正关心 Opera Mini 的误报。你可能是。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-09T16:49:19.427

我同意我们应该测试功能，但是很难找到一个简单的答案来回答“'现代浏览器'支持哪些功能而不是'旧浏览器'？”

所以我启动了一堆浏览器并直接检查了 Modernizer。我添加了一些我绝对需要的功能，然后我添加了“inputtypes.color”，因为它似乎涵盖了我关心的所有主要浏览器：Chrome、Firefox、Opera、Edge……而不是 IE11。现在我可以温和地建议用户使用 Chrome/Opera/Firefox/Edge 会更好。

这就是我使用的 - 您可以编辑要针对您的特定案例进行测试的事物列表。如果缺少任何功能，则返回 false。

```
/**
 * Check browser capabilities.
 */
public CheckBrowser(): boolean
{
    let tests = ["csstransforms3d", "canvas", "flexbox", "webgl", "inputtypes.color"];

    // Lets see what each browser can do and compare...
    //console.log("Modernizr", Modernizr);

    for (let i = 0; i < tests.length; i++)
    {
        // if you don't test for nested properties then you can just use
        // "if (!Modernizr[tests[i]])" instead
        if (!ObjectUtils.GetProperty(Modernizr, tests[i]))
        {
            console.error("Browser Capability missing: " + tests[i]);
            return false;
        }
    }

    return true;
} 
```

这是“inputtypes.color”所需的 GetProperty 方法。

```
/**
 * Get a property value from the target object specified by name.
 * 
 * The property name may be a nested property, e.g. "Contact.Address.Code".
 * 
 * Returns undefined if a property is undefined (an existing property could be null).
 * If the property exists and has the value undefined then good luck with that.
 */
public static GetProperty(target: any, propertyName: string): any
{
    if (!(target && propertyName))
    {
        return undefined;
    }

    var o = target;

    propertyName = propertyName.replace(/\[(\w+)\]/g, ".$1");
    propertyName = propertyName.replace(/^\./, "");

    var a = propertyName.split(".");

    while (a.length)
    {
        var n = a.shift();

        if (n in o)
        {
            o = o[n];

            if (o == null)
            {
                return undefined;
            }
        }
        else
        {
            return undefined;
        }
    }

    return o;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-25T16:43:35.637

您可以使用`< !-- [if IE] >` hack 设置一个全局 js 变量，然后在您的普通 js 代码中进行测试。有点难看，但对我来说效果很好。**

# jquery - rails 3 remote_function 原型转换为 jQuery

> ID：13478305
> 
> 赞同：1
> 
> 时间：2012-11-20T17:04:33.243
> 
> 标签：jquery, ruby-on-rails-3, prototype

我如何在 rails 3.1 中实现这一点？

```
<input type="radio" name='radiotype' value='ord' checked="checked"
                    onclick="<%= remote_function(:controller=>'controllername', :update => 'wrapper', :action => :radiotype, :with => 'Form.Element.serialize(this)' ) %>"
                /> 
```

我环顾四周，我知道 remote_function 已经消失了，我怎么能用 jQuery 做到这一点？

# c# - 找不到类型或命名空间名称 keyedcollection

> ID：13478314
> 
> 赞同：2
> 
> 时间：2012-11-20T17:05:06.517
> 
> 标签：c#, keyedcollection

我对 C# 还很陌生，所以如果这是一个愚蠢的问题，请原谅我。我遇到了一个错误，但我不知道如何解决它。我正在使用 Visual Studio 2010。

此代码行

```
public class GClass1 : KeyedCollection<string, GClass2> 
```

给我错误

```
'GClass1' does not implement inherited abstract member 'System.Collections.ObjectModel.KeyedCollection<string,GClass2>.GetKeyForItem(GClass2)' 
```

根据我的阅读，这可以通过在继承类中实现抽象成员来解决，如下所示

```
public class GClass1 : KeyedCollection<string, GClass2>
{
  public override TKey GetKeyForItem(TItem item);
  protected override void InsertItem(int index, TItem item)
  {
    TKey keyForItem = this.GetKeyForItem(item);
    if (keyForItem != null)
    {
        this.AddKey(keyForItem, item);
    }
    base.InsertItem(index, item);
} 
```

然而，这给了我错误，说“找不到类型或命名空间名称 TKey/TItem 找不到。”

帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:06:59.717

`TKey`是的`TItem`类型参数`KeyedCollection<TKey, TItem>`。

由于您分别继承`KeyedCollection<string, GClass2>`了具体类型`string`和`GClass2`，因此您应该用这两种类型替换占位符类型`TKey`和`TItem`在您的实现中：

```
public class GClass1 : KeyedCollection<string, GClass2>
{
  public override string GetKeyForItem(GClass2 item);
  protected override void InsertItem(int index, GClass2 item)
  {
    string keyForItem = this.GetKeyForItem(item);
    if (keyForItem != null)
    {
        this.AddKey(keyForItem, item);
    }
    base.InsertItem(index, item);
} 
```

# jquery - 如何从 Jquery、HTML5 移动应用程序中获取唯一设备 ID

> ID：13478319
> 
> 赞同：0
> 
> 时间：2012-11-20T17:05:27.507
> 
> 标签：jquery, html, cordova

我正在为 iOS、Android 和 Blackberry 构建移动应用程序，我是这样做的

1.  我使用 jQuery、HTML5 构建了一个应用程序。
2.  制作该包的 Zip 文件。
3.  使用[http://build.phonegap.com](http://build.phonegap.com)，我构建了在 jQuery、HTML5 中创建的应用程序，并且 phonegap 界面为我提供了适用于每个设备（即 iOS、Android 和 Blackberry）的构建包。

所以这样我只需要创建一个应用程序，phonegap 为我提供了适用于不同设备的应用程序包，每件事都很好，但现在我遇到了一个问题，我想识别每个设备上唯一安装了我的应用程序，但当然解决方案必须是全球性的我的意思是我不应该尽可能为不同的平台和设备编写不同的代码，解决方案应该只使用 jQuery、HTML5。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:13:30.113

`device.uuid`，给你类似的东西，但正如文档所说

> 不是一个可靠的值

[http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#device.uuid](http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#device.uuid)

也许您可以存储 GUID、伪随机数或安装时生成的东西……（我的意思是，第一次运行应用程序时）

**更新**：JS 伪随机数实现： [在 JavaScript 中创建 GUID/UUID？](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:12:01.847

Have you looked at the device object provided by cordova? [http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#Device](http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#Device)

You should be able to determine what platform your app is running on at runtime.

# javascript - 骨干.js 模型扩展了另一个模型

> ID：13478320
> 
> 赞同：4
> 
> 时间：2012-11-20T17:05:32.257
> 
> 标签：javascript, design-patterns, backbone.js

我正在使用 Backbone.js 构建仪表板应用程序

有一个称为模块的窗格网格。每个模块都有自己需要监听的自定义数据。

从这个意义上说，我创建了一个名为的主干模型`Module`，它基本上是每个模块的顶级信息，例如`module_name`&`module_description`

我的第一个倾向是找到一种方法，为每个模块制作一个新的特殊模块模型……比如“计数器”模块、“消息”模块等。

我应该如何处理每个模块的单独和不同的数据？任何设计模式建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T17:18:46.943

你可以这样做：

```
var Module = Backbone.Model.extend({
// default properties/methods of this module
});

var MessageModule = Module.extend({
// new properties/methods of this module
}); 
```

# android - 如何避免 android 2.3 中的鬼点击问题？

> ID：13478321
> 
> 赞同：2
> 
> 时间：2012-11-20T17:05:35.383
> 
> 标签：android, cordova, jquery-mobile

我在我的 android 设备上遇到了奇怪的行为。当我单击弹出窗口上的按钮时，会单击基础列表元素。有什么建议么？我尝试了 z-index 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:16:12.030

这是因为弹出窗口不响应 onTouch 或 onKey 事件，除非它的背景为 != null。

背景不能为空的原因是因为 PopupWindow#preparePopup 中发生的事情。如果它检测到 background != null 它会创建一个 PopupViewContainer 实例并在其上调用 setBackgroundDrawable 并将您的内容视图放入其中。PopupViewContainer 基本上是一个 FrameLayout，它侦听触摸事件和 KeyEvent.KEYCODE_BACK 事件以关闭窗口。如果 background == null，它不会做任何事情，只是使用你的内容视图。作为依赖 PopupWindow 来处理它的替代方法，您可以扩展您的根 ViewGroup 以按照您想要的方式运行。

确保在显示对话框之前调用 setBackgroundDrawable ......我花了一段时间才弄清楚。

我遇到了类似的事情，在这里找到了我需要的答案： [Android popup window dismissal](https://stackoverflow.com/questions/3121232/android-popup-window-dismissal)

# sql - Postgres 中的快速近似计数

> ID：13478324
> 
> 赞同：4
> 
> 时间：2012-11-20T17:05:45.040
> 
> 标签：sql, postgresql

我正在使用以下内容查询我的数据库（Postgres 8.4）：

```
SELECT COUNT(*) FROM table WHERE indexed_varchar LIKE 'bar%'; 
```

这个复杂度是 O(N) 因为 Postgres 必须计算每一行。Postgres 9.2 具有仅索引扫描，但不幸的是，升级不是一种选择。

但是，获得准确的行数似乎有点过头了，因为我只需要知道以下三种情况中的哪一种是正确的：

*   查询不返回任何行。
*   查询返回一行。
*   查询返回两行或多行。

所以我不需要知道查询返回 10,421 行，只需要返回两个以上。

我知道如何处理前两种情况：

```
SELECT EXISTS (SELECT COUNT(*) FROM table WHERE indexed_varchar LIKE 'bar%'); 
```

如果存在一行或多行，则返回 true，而 false 则不存在。

关于如何以有效的方式扩展它以涵盖所有三种情况的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:16:13.703

```
SELECT COUNT(*) FROM (
  SELECT * FROM table WHERE indexed_varchar LIKE 'bar%' LIMIT 2
) t; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:19:51.693

应该很简单。您可以使用语句`LIMIT`执行您想要的操作并返回数据（计数） 。`CASE`

```
SELECT CASE WHEN c = 2 THEN 'more than one' ELSE CAST(c AS TEXT) END 
FROM 
     (
      SELECT COUNT(*) AS c 
      FROM   (
              SELECT 1 AS c FROM table WHERE indexed_varchar LIKE 'bar%' LIMIT 2
             ) t
     ) v 
```

# c# - VS2008 Web 应用程序中无法识别自定义命名空间

> ID：13478325
> 
> 赞同：2
> 
> 时间：2012-11-20T17:06:06.100
> 
> 标签：c#, asp.net, visual-studio-2008, asp.net-3.5

我已将 C# ASP 网站移至 C# ASP Web 应用程序。我这样做是为了可以做一些事情，比如添加 Pre-Build 事件。

除了无法识别我在 App_Code 文件夹中的 .cs 文件中声明的某些命名空间外，一切似乎都几乎正常工作。

我收到构建错误，例如

`The type or namespace name 'nsAppGlobal' could not be found (are you missing a using directive or an assembly reference?)`

我有一个 .cs 文件，它非常清楚地声明了这个命名空间。由于某种原因，Intellisense 和编译器都看不到它。

我听说我可以通过将我的命名空间构建到一个 dll 库中然后将其包含在 Web 应用程序中来解决这个*问题*。这听起来很傻 - 因为我将如何编辑该代码？我必须在另一个项目中编辑并重建 dll？

有没有人遇到过这个问题？在 Web 应用程序项目中使用命名空间的最佳策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:30:03.463

[在将网站迁移到 Web 应用程序](http://devio.wordpress.com/2010/07/30/differences-between-web-site-project-and-web-application-project/)时，我也注意到了这种行为：似乎 App_Code 目录因其“神奇”的名称而被忽略。

解决方案很简单：只需重命名 App_Code 目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:17:57.573

有时在将网站转换为 Web 应用程序时，Global.asax 命名空间会损坏。Global.asax.cs 将具有正确的命名空间，但 Global.asax 不会。

```
<%@ Application Codebehind="Global.asax.cs" Inherits="WILD.MvcApplication" Language="C#" %> 
```

默认情况下，当您打开 Global.asax 时，它会打开关联的 C# 文件。您想查看标记。确保属性“ **Inherits** ”与 Global.asax.cs 命名空间相匹配。

# android - Android：int h=getWindowManager().getDefaultDisplay().getHeight() 在我的 acer 平板电脑上返回错误值

> ID：13478327
> 
> 赞同：0
> 
> 时间：2012-11-20T17:06:22.723
> 
> 标签：android

我正在尝试制作一个允许您拖动形状的应用程序。它适用于智能手机，但不适用于我的 Acer a500 平板电脑

当我通过调用获得高度时

```
ih=getWindowManager().getDefaultDisplay().getHeight()-25; 
```

我得到的值只有应该值的 1/3，因此我只能将 sahpes 向下拖动 1/3。如果平板电脑是水平的，它会下降 1/2。

为什么这种方法会在我的平板电脑上返回错误的高度值？

```
public class cPlay extends  cBase  implements OnClickListener {
/** Called when the activity is first created. */
   @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
  //      setContentView(R.layout.play);

        int w=getWindowManager().getDefaultDisplay().getWidth()-25;
        int h=getWindowManager().getDefaultDisplay().getHeight()-25;

        BallView ballView=new BallView(this,w,h);
        setContentView(ballView);
   } // end function

   public void onClick(View v) {
       finish();

       } // end function

} // end class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:39:32.737

试试这个：

```
 DisplayMetrics displaymetrics = new DisplayMetrics();
  getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
  int height = displaymetrics.heightPixels;
  int Width = displaymetrics.widthPixels; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:12:30.227

方法 getWidth() 和 getHeight() 在 Display 中已弃用。尝试使用 DisplayMetrics。此外，您可能希望在调用 onMeasure() 后调用 getMeasuredWidth() 和 getMeasuredHeight() 来获取视图容器的大小，以获得更精确的视图大小。

# iphone - 如何在基于选项卡的应用程序中永久隐藏“更多”栏

> ID：13478330
> 
> 赞同：1
> 
> 时间：2012-11-20T17:06:40.397
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uitabbarcontroller

第一次在这里Stackoverflow'er，所以请耐心等待......

我正在为 iPhone 开发一个基于选项卡的应用程序，我遇到了一个我一直无法解决的问题。我一直在寻找答案，但这是难以简洁表达的问题之一。这使得获得有用的搜索结果变得困难。

简而言之，我的应用程序将在底部选项卡栏中有五个以上的选项卡项，导致第五个选项卡项被标记为“更多...”。点击该项目然后会弹出一个视图，顶部有一个显示“更多”的栏（UINavigationBar），以及一个列出第 5、第 6 和第 7 个项目的标题和图标的 UITableView。

尽管一旦用户点击了第 5、6 或第 7 个项目，我找到了一种摆脱顶部栏的方法，但我希望永远不会显示顶部的“更多”栏。换句话说，用户点击底部的“更多...”选项卡项目，他们会看到 UITableView 上方没有栏。理想情况下，我想将我自己的自定义标题图像放在列表上方，但我只想知道我想要做的事情是否可能首先。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:44:09.603

从 派生一个类`UITabBarController`，例如`MyTabController`。将此类用作选项卡控制器，即在情节提要中分配它。隐藏`initWithNibName`该控制器的导航栏`moreNavigationController`：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
      // ... whatever you want
    self.moreNavigationController.navigationBarHidden=true;
  }
  return self;
} 
```

导航栏不会出现。

# c - 怎么做圆圈？

> ID：13478331
> 
> 赞同：-4
> 
> 时间：2012-11-20T17:06:39.950
> 
> 标签：c

问题是，我没有得到一个合适的圈子。例如，如果我输入坐标：9,8 和半径：8 ...我只得到很少的点。有人可以指导我如何获得一个完整的圆，这段代码有什么问题？我们不能使用任何内置函数..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:11:40.887

This is incorrect

`if(sqrt(pow(i,2)+ pow(j,2))== radius)`

It's very rare that these two values will be **exactly** equal. Instead you should make a test to see if the two numbers are roughly equal. Like this for instance

`if (fabs(sqrt(pow(i,2)+ pow(j,2)) - radius) <= 0.001)`

This tests if `sqrt(pow(i,2)+ pow(j,2))` and `radius` are within 0.001 of each other. You might need to change the value of 0.001 to something else. It depends on your co-ordinate system.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:12:21.613

You should use [Midpoint circle algorithm](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm).

Nice thing about it that it uses only integer arithmetic - so it is both fast and exact.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:11:48.730

> what is wrong in this code?

Here you are:

```
if (sqrt(pow(i, 2) + pow(j, 2)) == radius) 
```

You should not compare floating-point numbers using `==`, it won't work as expected. You should check instead if it's **close to** the radius:

```
if (sqrt(pow(i, 2) + pow(j, 2)) >= radius * 0.95) 
```

for example.

# google-chrome - mediaelement.js，Chrome PC，YouTube 视频错误，视频无法播放

> ID：13478340
> 
> 赞同：0
> 
> 时间：2012-11-20T17:07:12.383
> 
> 标签：google-chrome, youtube, mediaelement.js

有人知道如何在 Chrome(23.0.1271.64) PC 上解决 youtube 视频的问题吗？当我单击“播放”时.. 没有任何效果。

这个错误出现在我们制作的几个网站上，我查看了 mediaelement.js 网站。[同样的错误](http://mediaelementjs.com/examples/?name=youtube)。但是，没有显示错误。

我不知道如何解决这个问题。它适用于 IE7+、Firefox PC 和 Mac、Chrome Mac。

问候

# insert - DocumentFilter 不会检测和处理来自网页 (html) 的粘贴/插入

> ID：13478348
> 
> 赞同：0
> 
> 时间：2012-11-20T17:07:33.623
> 
> 标签：insert, paste, jtextpane, documentlistener, documentfilter

有没有人找到允许*DocumentFilter*检测从 Web 浏览器粘贴到*JTExtPane*的方法？

我注意到它会将文本或文本从控制台粘贴到*JTextPane*中，但在 Windows 上，当网页中的某些内容粘贴到*JTextPane*中时，*DocumentFilter*不会检测到 insertString() 或 replaceString()。

需要注意的一个有趣的事情是，*DocumentListener*将捕获从网页粘贴到*JTextPane*并将其检测为 insertString()。

*我已经在 Linux 和 Windows 上对此进行了测试。*

如果有人可以解决或可以阐明为什么会发生这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:42:24.167

发生这种情况是因为既没有`insertString()`也没有`replaceString()`被调用。如果在剪贴板中找到 HTML 内容（不是纯文本）`HTMLReader/HTMLParser`，则解析它并创建适当`Document`的`Elements`.

# c# - “Random_Number_File_Writer.Form1”不包含“saveFileDialog1_FileOk”的定义

> ID：13478350
> 
> 赞同：0
> 
> 时间：2012-11-20T17:07:34.873
> 
> 标签：c#, if-statement, try-catch, savefiledialog

**'Random_Number_File_Writer.Form1' 不包含'saveFileDialog1_FileOk' 的定义，并且找不到接受'Random_Number_File_Writer.Form1' 类型的第一个参数的扩展方法'saveFileDialog1)_FileOk'（您是否缺少 using 指令或程序集引用？）**

那是我收到的错误消息。我试图去我大学的实验室寻求帮助，但那个人不熟悉 C#，我们花了大约一个小时才让我的行号显示出来（仅供参考......）然后我去找我的教授，他说他会忙一段时间。所以我想我会在这里尝试作为替代的帮助来源。

我查看了这里已经存在的关于类似错误的问题，但它仍然让我感到困惑，尤其是如何更正这个错误，并且当我尽可能接近地引用教科书中的代码时，我不确定我是否理解为什么我我什至得到这个错误。

这是代码，如果难以阅读，我很抱歉。哦，我知道这是产生错误的部分，因为我昨天运行它，没有这部分。但部分任务是保存为对话框。

```
try
        {
            //Initial opening point for save file dialogue
            saveFileDialog1.InitialDirectory = @"C:\Users\Heather\Documents\Visual Studio 2010\Projects\Random Number File Writer";
            //Save As popup - Opening the file for writing usage once it's created.
            if(saveFileDialog1.ShowDialog() == DialogResult.OK)
            {
                randomNumberFile = File.CreateText(openFileDialog1.FileName);
            }
            else // Popup informing user that the data will not save to a file because they didn't save.
            {
                MessageBox.Show("You elected not to save your data.");
            } 
```

这是未格式化的使用内容：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO; // Added to be able to use StreamWriter variable type 
```

这是我双击时它给出的代码片段，它将我带到 Form1.Designer.CS 窗口。

```
 this.saveFileDialog1.FileOk += new System.ComponentModel.CancelEventHandler(this.saveFileDialog1_FileOk); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:19:15.983

`saveFileDialog1_FileOk` 看起来它应该是一个事件处理程序（一种方法），所以请确保您有一个类似的方法

```
public void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
{
} 
```

在你的`Form1`课上

# javascript - 如何在不使用已弃用的@Anywhere 的情况下获取 Twitter 推文框

> ID：13478353
> 
> 赞同：0
> 
> 时间：2012-11-20T17:07:40.357
> 
> 标签：javascript, web-applications, twitter

我想在我的网站上包含一个推文框，但我不想使用[已弃用的@Anywhere](https://dev.twitter.com/docs/anywhere/tweet-box)平台。如果没有@Anywhere，我似乎找不到这样做的例子。如何在我的网站上嵌入 Twitter 框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:14:44.990

我的学校个人使用[这个](https://github.com/seaofclouds/tweet)。不能说它是更容易还是更难实现，但他们[在这里](http://tweet.seaofclouds.com/)有一些例子。

# xcode - XCode - “放弃更改”后有什么方法可以恢复代码？

> ID：13478358
> 
> 赞同：5
> 
> 时间：2012-11-20T17:07:57.883
> 
> 标签：xcode, ios5, version-control

昨晚我无意中做了一件非常愚蠢的事情。我已经在 iPad 项目上工作了几个月，而且（更愚蠢的是）没有备份。通过在 XCODE 中右键单击项目，我错误地单击了“放弃更改”

（愚蠢再次盛行）自最初以来我没有任何提交，当我进行放弃更改时，似乎它一直回到最初的提交，如果我正确地看待事情看起来每个文件都是这是它第一次被保存。

我的问题是：有没有办法恢复我的工作？它在 .git 目录中吗？副本是否存储在其他地方？或者作为最后的手段，是否有机会使用取消删除实用程序恢复一些源文本？

谢谢，

鲍勃

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-01T07:12:00.060

澄清一下..人们可以从垃圾箱中放回文件，因为丢弃更改会将文件发送到垃圾箱中

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-25T07:48:08.150

答案复制自[How to undo xcode 如果未提交则丢弃所有更改](https://stackoverflow.com/questions/25308554/how-to-undo-xcode-discard-all-changes-if-not-committed)

退出 Xcode。使用 TextEdit 打开您希望恢复丢失更改的文件。转到文件 -> 恢复到 -> 浏览所有版本...滚动浏览可用版本。希望您将有许多可供选择。选择一个版本并点击恢复。按照 1-5 获取所有必要的文件。启动 Xcode。您现在应该在 Project Navigator 中看到这些文件旁边的 M 表示它们包含未提交的更改（您之前丢弃的更改）。您可能已经创建并被丢弃的全新文件可以在垃圾箱中找到。

还有一点小建议。如果您需要放弃更改，请通过右键单击项目导航器中的文件来使用 Source Control -> Discard Changes，而不是 Discard All Changes，这可能会给您带来各种麻烦。

祝你今天过得愉快。:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T00:19:30.547

毕竟运气在我这边。事实证明，当我执行 Source Control > Discard Changes 操作时，它没有对保存在我的项目目录中的源代码进行任何更改。我能够开始一个新项目并重新添加文件。一旦我这样做了，我就能够在模拟器中编译和运行我的项目，就像它在事件发生之前一样。我现在有一个备份，并在 git 中提交了更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:17:19.863

如果您“推送”并将之前丢弃的更改提交到本地 git 存储库，您就有希望获取此代码。或者，如果您使用的是 MacOS 随附的[Time Machine](http://www.apple.com/findouthow/mac/#timemachinebasics)或其他一些自动备份解决方案。

除此之外，你可能会被冲洗掉。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T17:35:05.753

如果您使用的是 Lion 或更高版本，即使您没有外置驱动器，您也可能拥有 Time Machine 备份。从 Lion 开始，Time Machine 将对文件进行“本地快照”；这就是他们支持“版本”功能的方式，该功能可让您返回文件的先前版本。

但是，如果您没有打开 Time Machine，那么您可能会不走运。

# matlab - 为什么 eig(A) 函数（其中 A 是半正定函数）返回负双精度数？

> ID：13478359
> 
> 赞同：1
> 
> 时间：2012-11-20T17:07:58.273
> 
> 标签：matlab, linear-algebra

如果我们生成`b=randn(10,1)`，则矩阵`A=b*b'`必须是半正定矩阵，因此其所有特征值必须 >=0。

当我使用`eig(A)`函数时，它会返回像`-3.6934e-16`and ...（负双打）这样的双打。

有什么办法可以提高精度吗？将它们四舍五入到绝对零是否安全？

谢谢。

编辑：我删除了一个不相关的部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:17:12.297

这只是一个舍入问题，当您有一个向量，其中一些元素比其他元素小 16 个数量级时，在 matlab 中将它们舍入为零是非常安全的。

# xdomainrequest - IE 中的 XDomainRequest 给出访问被拒绝错误

> ID：13478361
> 
> 赞同：9
> 
> 时间：2012-11-20T17:08:01.320
> 
> 标签：xdomainrequest

这是我使用的代码如下：

我正在使用 IE9，无法在“网络”选项卡中看到正在发送的请求。我确实在 JSP 中设置了 Access-Control 标头：

```
<% response.setHeader("Access-Control-Allow-Origin", "*");%> 
```

从 JSP 获取 AJAX HTML 内容的代码：

```
if ($.browser.msie && window.XDomainRequest) {

    var xdr = new window.XDomainRequest();
    xdr.open("GET", "http://dev01.org:11110/crs/qw/qw.jsp?&_=" + Math.random());
    xdr.contentType = "text/plain";
    xdr.timeout = 5000;
    xdr.onerror = function () {
        console.log('we have an error!');
    }
    xdr.onprogress = function () {
        console.log('this sucks!');
    };
    xdr.ontimeout = function () {
        console.log('it timed out!');
    };
    xdr.onopen = function () {
        console.log('we open the xdomainrequest');
    };
    xdr.onload = function() {
        alert(xdr.responseText);
    };
    xdr.send(null);
} else { ...... } 
```

我收到拒绝访问错误。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T16:19:40.650

**请求必须针对与托管页面相同的方案**

在您的示例中，您正在请求：

```
http://dev01 ... 
```

您应该从 HTTP 协议执行此操作。

例如：如果您的站点，js脚本所在的位置：`http://dev.org` 您可以这样做：

```
xhr = new XDomainRequest();
xhr.open("GET", "http://dev01.org?p=1"); 
```

但这会引发“访问被拒绝”：

```
xhr = new XDomainRequest();
xhr.open("GET", "https://dev01.org?p=1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T01:31:11.500

我对 XDomainRequest 的经验是它不尊重`Access-Control-Allow-Origin: *`. 相反，您必须指定域。如果您需要动态生成它，可以从 HTTP_REFERER 标头中获取它，或者如果您只期望来自一个域的请求，您可以手动设置它。 [这篇文章可能会有所帮助。](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)

```
<% response.setHeader("Access-Control-Allow-Origin", "http://dev01.org");%> 
```

# sql - 在第一个表结果中从第二个表中选择最大值

> ID：13478363
> 
> 赞同：1
> 
> 时间：2012-11-20T17:08:03.450
> 
> 标签：sql, sql-server

我有2张桌子如下 -

表一

```
ID  DATE
1   05/11/12
2   23/11/12
3   29/11/12
4   04/10/12
5   20/11/12 
```

另一个表（IH）包含以下信息 -

```
ID  RECNO   NOTE
1   1       Open
1   2       Update
1   3       Close
2   1       Open
2   2       Update
2   3       Hold
2   4       Close
3   1       Open
4   1       Open
4   2       Update
5   1       Open 
```

我想输出如下所示的结果，使用每个 ID 的最高值 RecNo 显示 Note 字段。因此，使用输出上方的数据应该是-

```
ID  DATE        NOTE
2   23/11/12    Close
3   29/11/12    Open 
```

我的代码是-

```
SELECT I.ID, I.DATE, IH.NOTE FROM
I I, IH IH
JOIN (SELECT MAX([RECNO]) [RECNO] FROM
IH
GROUP BY RECNO) IH2 ON IH2.ID = IH.ID AND
IH2.[RECNO] = IH.[RECNO]
JOIN I I2 ON I2.ID = IH.ID WHERE
(I2.DATE>={TS ‘2012-11-22 00:00:002}) GROUP BY I2.ID 
```

但是，当我执行代码时，我得到-

```
Invalid Column Name 'RECNO'. Statement(s) could not be prepared. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:20:49.807

这个怎么样？注意，没试过，我现在在我的 Mac 上。

```
SELECT I.ID, I.DATE, IH.NOTE
FROM I I
OUTER APPLY 
  (SELECT TOP 1 *
   FROM IH 
   WHERE IH.ID = I.ID
   ORDER BY RECNO DESC) IH    
WHERE I.DATE >= '2012-11-22' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:21:38.590

还有一个

```
SELECT I.ID, I.DATE
,(Select TOP 1 IH.NOTE FROM IH where IH.ID=i.ID Order by Recno DESC) as Note
from I
WHERE
I.DATE>'20121122' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:18:14.890

您的 SQL 相当，呃，混乱。

假设您使用的是 SQL Server 2005 或更高版本，则可以使用该`row_number()`函数，如下所示：

```
SELECT I.ID, I.DATE, IH.NOTE
FROM I join
     (select ih.*, ROW_NUMBER() over (PARTITION by id order by recno desc) as seqnum
      from IH
     ) ih
     on IH2.[RECNO] = IH.[RECNO] and seqnum = 1
WHERE I2.DATE>='2012-11-22 00:00:002' 
```

这是在 IH 表中分配一个序列号，对于每个具有最高记录号的 id 获得值“1”。剩下的只是 SQL。

您的原始查询在语法上根本不正确，但我认为根据描述这是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:22:41.160

也许这会有所帮助

```
SELECT a.ID, a.DATE, b.NOTE FROM a
inner join  b on a.ID = b.ID
where b.recno in (select max(bb.recno)
               from b as bb where bb.id = b.id) 
```

[http://sqlfiddle.com/#!3/fd141/2](http://sqlfiddle.com/#!3/fd141/2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T19:03:32.830

如果您不介意不同的标识符，请查看以下解决方案：

```
select t1.MyID, t1.MyDate, y.Note
from t1
join
(
    select MyID, max(RecNo) as RecNo
    from t2
group by MyID
) x
    on t1.MyID = x.MyID
left join
(
    select *
    from t2
) y
    on t1.MyID = y.MyID
and x.RecNo = y.RecNo
where t1.MyDate >= '2012.11.22' 
```

完整的解决方案在这里：[http ://sqlfiddle.com/#!3/4ca09/3](http://sqlfiddle.com/#!3/4ca09/3)

**更新：**糟糕，忘记在 where 子句中输入日期。更新了 SQL Fiddle 和上面的查询。

# java - jdbc4.CommunicationsException - 神秘超时

> ID：13478368
> 
> 赞同：0
> 
> 时间：2012-11-20T17:08:21.543
> 
> 标签：java, mysql, jdbc, c3p0

日志消息全文：

`Log Message: An error occurred while grabbing new users com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 44,567,434 milliseconds ago. The last packet sent successfully to the server was 44,567,434 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.`

这对我来说很奇怪，因为那是超过 10 个小时。在过去的 10 个小时里，我的程序运行愉快且成功，包括与数据库的通信。我最好的假设是池中的单个连接已过时，但在这种情况下，我不知道为什么不会自动清理它，或者这个异常是否与该操作有关。我该如何处理？

我正在使用 c3p0 连接池。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:17:46.977

c3p0 有很多方法可以测试连接并防止它们超时或过时。解决您所看到的特定问题的最简单方法是将配置参数 maxIdleTime 简单地设置为 8 小时（28800 秒）。

但是您可能希望开始测试一般的连接，例如，通过将 idleConnectionTest 周期设置为频繁设置并将 testConnectionOnCheckin 设置为 true。看...

[http://www.mchange.com/projects/c3p0/#configuring_connection_testing](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

[http://www.mchange.com/projects/c3p0/#configuration_properties](http://www.mchange.com/projects/c3p0/#configuration_properties)

# python - 使用 plistlib 查看 key 是否存在

> ID：13478370
> 
> 赞同：0
> 
> 时间：2012-11-20T17:08:24.317
> 
> 标签：python

如何使用 plistlib 检查键值是否有效，或者键是否存在？我试过：

```
if result['Tags'] != "":
    dtags = result["Tags"]
    dotags = '#' + ' #'.join(dtags)
else:
    dotags = "" 
```

它只是返回了错误：

```
KeyError: 'Tags' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:10:21.603

一种方法是使用该`get()`方法检查密钥是否存在：

```
# Here we don't have to compare to anything because a match will return True
if result.get('Tags', None):
    dtags = result["Tags"]
    dotags = '#' + ' #'.join(dtags)
else:
    dotags = "" 
```

# jquery - jQuery: append() vs appendTo()

> ID：13478372
> 
> 赞同：32
> 
> 时间：2012-11-20T17:08:45.197
> 
> 标签：jquery, jquery-selectors, jquery-append

I am testing jQuery's `.append()` vs `.appendTo()` methods using following code:

```
$('div/>', {
    id : id,
    text : $(this).text()
    }).appendTo('div[type|="item"]#'+id);
$('div[type|="item"]#'+id).append($(this).text()); 
```

Note that the selectors are identical in `.appendTo()` and `.append()`, yet the latter works (within the same page), while the former does not. Why?

How do I get `.appendTo()` to work with this type of (complex) *selector*? Do the two methods interpolate differently? Is there some syntax I'm missing?

I don't want to clutter the post with impertinent code: suffice it to say that elements referenced by selectors exist, as is evidenced by the `.append()` method producing desired result. Let me know if more info is needed.

Thanks!

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-20T17:12:20.337

To answer the question, you don't have an element to `appendTo` anything, as you're missing characters (in your case it's an ***opening angle bracket*** `<`).

This

```
$('div/>',{}); 
```

needs to be

```
$('<div/>',{}); 
```

to create an element, otherwise it does exactly what you say it does - nothing!

* * *

Otherwise you seem to have the order of things right, it's like this:

*   [`.append()`](http://api.jquery.com/append/) inserts the content specified by the parameter, to the end of each element in the set of matched elements, as in

    ```
    $(Append_To_This).append(The_Content_Given_Here); 
    ```

*   while [`.appendTo()`](http://api.jquery.com/appendto/) works the *other way around*: it insert every element in the set of matched elements to the end of the target given in the parameter, as in

    ```
    $(The_Content_Given_Here).appendTo(Append_To_This); 
    ```

There's also [`.prepend()`](http://api.jquery.com/prepend/) and [`prependTo()`](http://api.jquery.com/prependto/) which works exactly the same, with the only difference being that the prepended elements are added at the beginning of the target elements content instead of the end.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-20T17:10:42.443

`append` appends the parameter to the object you're working on.

`appendTo` appends the object you're working on to the parameter.

More info here: [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

aside from that, there is something wrong here:

```
$('div/>', 
```

this is not selecting anything.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-23T05:33:39.780

I faced similar query and on researching got some more insights. It was confusing to hear target, element etc and I prefer to visualise the outer selector as $container and element added as $widget. In plain english, I want to add widget to container. Both append and appendTo can be used in the following way and you get exact same result.

`$container = $("#containerdiv");`

`$widget = $("<div> <h1 id='title'> widget </h1> </div>")`

Approach 1 : `$container.append($widget)`

Approach 2 : `$widget.appendTo($container)`

The key difference is what gets returned. In the first case, $container is returned, and in second case, $widget is returned. This will be useful if you are chaining the request with another jquery statement. If you want to work with $container, use first construct and to work with widget, use the second way. For example,

if you want to append 2 widgets to the container, you would give

`$container.append($widget1).append($widget2)`

and if you want to add a widget and then widget's title to say 'Cool Widget', you would give

`$widget.appendTo($container).find('#title').text("Cool Widget")`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-04T07:02:35.537

Both methods perform the same task. The major difference is --

*   in the syntax-specifically,
*   in the placement of the content and target.

With `.append()`, the selector expression preceding the method is the container into which the content is inserted.

With `.appendTo()`, on the other hand, the content precedes the method, either as a selector expression or as markup created on the fly, and it is inserted into the target container.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-12T10:40:41.823

To make this two easier to understand.

Suppose I have **A B C** three ordered charters.

> *A `append` C* means MOVE C before A, this results C's reloaction but not A, so we have **C A B**.
> 
> *A `appendTO` C* means MOVE A after C, this results A's relocation but not C, so we have **B C A**.

*   Both of `append` and 'appendTo' has the same result of 甲 and 丙, but the whole order of the three charters changes.
*   Due to the relocation of OOO.appendTo(XXX), the XXX should be exists before this control.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-13T23:27:55.750

`$('#someDiv').append(someStuff); someStuff.appendTo($('someDiv'));` //same result here, just different way to do it depending on your sitch

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-02T12:58:29.343

The **`.append()`** method inserts the specified content as the **last child** of each element in the jQuery collection (To insert it as the **first child**, use **`.prepend()`**).

The **`.append()`** and **`.appendTo()`** methods perform the same task. The major difference is in the syntaxspecifically, in the placement of the content and target. With **`.append()`**, the selector expression preceding the method is the container into which the content is inserted. With **`.appendTo()`**, on the other hand, the content precedes the method, either as a selector expression or as markup created on the fly, and it is inserted into the target container.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-18T01:09:41.767

The **`appendTo()`** method is used to add additional content at the end of the selected elements. It is same as jQuery **`append()`** method. There is only syntactical difference between **`append()`** and **`appendTo()`** methods.

> **`.appendTo()`** syntax:
> 
> `$(content).appendTo(selector)`

> **`.append()`** syntax:
> 
> `$(selector).append(content)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-03T06:49:23.930

The .append() and .appendTo() methods perform the same task and only target and html content to be inserted syntax will chnage . go through [http://api.jquery.com/appendTo/](http://api.jquery.com/appendTo/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-07T17:59:41.070

**Return result** is the only difference and it makes `appendTo` handier for methods-chaining:

```
$("<div>...</div>").appendTo(target).hide();  //hide new-element, not the whole target 
```

# eclipse - 如何从新类的末尾删除空行 - Eclipse

> ID：13478373
> 
> 赞同：4
> 
> 时间：2012-11-20T17:08:49.543
> 
> 标签：eclipse

我目前在 Eclipse Juno 4.2 上工作（但问题也与 eclipse 的旧版本有关），我发现了一个恼人的问题。当我们尝试使用默认格式化程序设置创建新类时，eclipse 在文件末尾放置一个空行。

![在此处输入图像描述](../Images/d4895a9514e1060811121eeba0e6da8e.png)

我试图自己弄清楚如何删除这个烦人的行并在格式化程序选项中搜索。我找到了可以帮助解决我的问题的选项，但我发现默认情况下它是禁用的。

![在此处输入图像描述](../Images/730801f20dd35a2b2b64bb2cb21d9c81.png)

我的问题是：如何摆脱这条线？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T17:48:09.423

这不是一个真正的空行。它只是在 Eclipse 中以这种方式出现。

当您在 Eclipse 中看到空行时，表示文件的最后一行以换行符终止。也就是说，Java 文件中的最后一个字符可能是`}\n`（在 *nix 上，以 LF 行结尾）或`}\r\n`（在 Windows 上以 CRLF 行结尾），在每种情况下都跟在文件末尾。

您可以使用`tail`或`cat`在 *nix 上向自己证明这一点。如果提示与最后一行代码出现在同一行，则没有尾随的新行。如果提示出现在单独的行上，则后面有一个换行符。如果提示之前有一个空行，那么文件中有一个空行。

如果以上内容不能说服您，请使用十六进制编辑器。:o) 空行将显示为两个连续的行尾：`\n\n`或`\r\n\r\n`（分别在 *nix 和 windows 上）。

文件的最后一行末尾有换行符没有任何问题。事实上，将它留在那里是个好主意，因为如果它不存在，一些工具会发出警告。这些工具包括[Checkstyle](http://checkstyle.sourceforge.net/)（有一个[Eclipse Checkstyle 插件](http://eclipse-cs.sourceforge.net/)）和`diff`.

Eclipse 允许您将光标放在那里，以防您想在文件末尾添加新内容。（这在 Java 中并不经常需要，因为大多数人不会在一个文件中放置多个顶级类型。）

最好把它放在那里，并习惯 Eclipse 显示它。

# r - 是否有关于 R 版本昵称的权威文档？

> ID：13478375
> 
> 赞同：62
> 
> 时间：2012-11-20T17:09:02.890
> 
> 标签：r

在 R 2.1.0 之后的某个地方，我开始注意到启动时显示的 R 版本号旁边的短语。结果证明这是一个发布昵称，一个添加到 R.Version 变量的未记录组件，可通过`R.Version$nickname`.

R-announce 的档案显示 Peter Dalgaard 多次宣布新版本的昵称（例如，[这里](http://tolstoy.newcastle.edu.au/R/announce/12/0228.html)），但我没有找到任何其他信息。尽管它是由 查询的对象的列表元素`R.Version()`，但它不包含在该函数的帮助文件中。

是否有关于此功能的任何文档？理想情况下，我想要一份用于确定发布昵称的系统声明，但任何权威参考都会很棒。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-21T15:46:24.050

在回复一封询问姓名是否有系统的电子邮件时，Peter Dalgaard 表示有

> “没有系统（除了它们应该在发布时处于旺季）”

因此，它们不是按字母顺序排列的，也不是按其他顺序排列的——显然没有办法从它们的昵称中推断出发布的顺序。

然而，出现了一个可能的一般主题：

*   r-devel（未发布的开发版本）未遭受的后果
*   2.14.0 (2011-10-31)[大南瓜](https://stat.ethz.ch/pipermail/r-announce/2011/000544.html)
*   2.14.1 (2011-12-22)[十二月雪花](https://stat.ethz.ch/pipermail/r-announce/2011/000548.html)
*   2.14.2 (2012-02-29)[送礼季](https://stat.ethz.ch/pipermail/r-announce/2012/000550.html)
*   2.15.0 (2012-03-30)[复活节小猎犬](https://stat.ethz.ch/pipermail/r-announce/2012/000551.html)
*   2.15.1 (2012-06-22)[烤棉花糖](https://stat.ethz.ch/pipermail/r-announce/2012/000554.html)
*   2.15.2 (2012-10-26) 不给糖就[捣蛋](https://stat.ethz.ch/pipermail/r-announce/2012/000557.html)
*   2.15.3 (2013-03-01)[安全毯](https://stat.ethz.ch/pipermail/r-announce/2013/000560.html)
*   3.0.0 (2013-04-03)[蒙面漫威](https://stat.ethz.ch/pipermail/r-announce/2013/000561.html)
*   3.0.1 (2013-05-16)[好运动](https://stat.ethz.ch/pipermail/r-announce/2013/000563.html)
*   3.0.2 (2013-09-25)[飞盘帆船](https://stat.ethz.ch/pipermail/r-announce/2013/000567.html)
*   3.0.3 (2014-03-06)[温暖的小狗](https://stat.ethz.ch/pipermail/r-announce/2014/000569.html)
*   3.1.0 (2014-04-10)[春舞](https://stat.ethz.ch/pipermail/r-announce/2014/000572.html)
*   3.1.1 (2014-07-10)[给我袜子](https://stat.ethz.ch/pipermail/r-announce/2014/000575.html)
*   3.1.2 (2014-10-31)[南瓜头盔](https://stat.ethz.ch/pipermail/r-announce/2014/000578.html)
*   3.1.3 (2015-03-09)[平滑人行道](https://stat.ethz.ch/pipermail/r-announce/2015/000582.html)
*   3.2.0 (2015-04-16)[满载而归](https://stat.ethz.ch/pipermail/r-announce/2015/000583.html)
*   3.2.1 (2015-06-18)[世界著名宇航员](https://stat.ethz.ch/pipermail/r-announce/2015/000586.html)
*   3.2.2 (2015-08-14)[消防安全](https://stat.ethz.ch/pipermail/r-announce/2015/000589.html)
*   3.2.3 (2015-12-10)[木制圣诞树](https://stat.ethz.ch/pipermail/r-announce/2015/000593.html)
*   3.2.4 (2016-03-11)[非常安全的菜肴](https://stat.ethz.ch/pipermail/r-announce/2016/000597.html)
*   3.2.5 (2016-04-11)[非常非常安全的菜肴](https://svn.r-project.org/R/tags/R-3-2-5/VERSION-NICK)（经过[重新标记](https://stat.ethz.ch/pipermail/r-announce/2016/000601.html) [的 3.2.4 修订版](https://stat.ethz.ch/pipermail/r-announce/2016/000598.html)）
*   3.3.0 (2016-05-03)[据说是教育](https://stat.ethz.ch/pipermail/r-announce/2016/000602.html)
*   3.3.1 (2016-06-21)[头发中的错误](https://stat.ethz.ch/pipermail/r-announce/2016/000604.html)
*   3.3.2 (2016-10-31)[真诚南瓜补丁](https://stat.ethz.ch/pipermail/r-announce/2016/000608.html)
*   3.3.3 (2017-03-06)[另一个独木舟](https://stat.ethz.ch/pipermail/r-announce/2017/000611.html)
*   3.4.0 (2017-04-21)[你这个愚蠢的黑暗](https://stat.ethz.ch/pipermail/r-announce/2017/000612.html)
*   3.4.1 (2017-06-30)[单根蜡烛](https://hypatia.math.ethz.ch/pipermail/r-announce/2017/000616.html)
*   3.4.2 (2017-09-28)[短暂的夏天](https://hypatia.math.ethz.ch/pipermail/r-announce/2017/000619.html)
*   3.4.3 (2017-11-30)[吃风筝的树](https://hypatia.math.ethz.ch/pipermail/r-announce/2017/000623.html)
*   3.4.4 (2018-03-15)[有人依靠](https://hypatia.math.ethz.ch/pipermail/r-announce/2018/000626.html)
*   3.5.0 (2018-04-23)[玩的开心](https://hypatia.math.ethz.ch/pipermail/r-announce/2018/000628.html)
*   3.5.1 (2018-07-02)[羽毛喷雾](https://stat.ethz.ch/pipermail/r-announce/2018/000630.html)
*   3.5.2 (2018-12-20)[蛋壳冰屋](https://stat.ethz.ch/pipermail/r-announce/2018/000634.html)
*   3.5.3 (2019-03-11)[大真理](https://stat.ethz.ch/pipermail/r-announce/2019/000638.html)
*   3.6.0 (2019-04-26)[植树](https://hypatia.math.ethz.ch/pipermail/r-announce/2019/000641.html)
*   3.6.1 (2019-07-05)[脚趾动作](https://hypatia.math.ethz.ch/pipermail/r-announce/2019/000643.html)
*   3.6.2 (2019-12-12)[黑夜风雨](https://hypatia.math.ethz.ch/pipermail/r-announce/2019/000647.html)
*   3.6.3 (2020-02-29)[拿着风向袋](https://hypatia.math.ethz.ch/pipermail/r-announce/2020/000650.html)
*   4.0.0 (2020-04-24)[植树节](https://hypatia.math.ethz.ch/pipermail/r-announce/2020/000653.html)
*   4.0.1 (2020-06-06)[立即查看](https://hypatia.math.ethz.ch/pipermail/r-announce/2020/000655.html)
*   4.0.2 (2020-06-22)[再次起飞](https://hypatia.math.ethz.ch/pipermail/r-announce/2020/000658.html)
*   4.0.3 (2020-10-10) [Bunny-Wunnies Freak Out](https://stat.ethz.ch/pipermail/r-announce/2020/000662.html)
*   4.0.4 (2021-02-15)[丢失的图书馆书](https://hypatia.math.ethz.ch/pipermail/r-announce/2021/000664.html)
*   4.0.5 (2021-03-31)[摇一摇](https://hypatia.math.ethz.ch/pipermail/r-announce/2021/000668.html)
*   4.1.0 (2021-05-18)蓬塔尼森[营地](https://hypatia.math.ethz.ch/pipermail/r-announce/2021/000670.html)
*   4.1.1 (2021-08-10)[踢东西](https://hypatia.math.ethz.ch/pipermail/r-announce/2021/000672.html)
*   4.1.2 (2021-11-01)[鸟嬉皮](https://hypatia.math.ethz.ch/pipermail/r-announce/2021/000677.html)

由于没有人发现任何文档，我将暂时接受我自己的答案。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-04-18T12:32:37.063

我很惊讶@joran 没有在评论部分跟进他自己的提示。所有版本名称都可以直接追溯到花生漫画。我偶然发现了我日常花生桌面日历中的证据：

[![在此处输入图像描述](../Images/3e2c39cdc2bdd873f94f915c71049426.png)](https://i.stack.imgur.com/TkVBI.png)

我在这里提供了一个答案： [https](https://www.quora.com/What-are-the-reasons-behind-the-release-names-of-the-various-R-iterations) ://www.quora.com/What-are-the-reasons-behind-the-release-names-of-the-various-R-iterations 。

再举几个例子：

（飞盘帆船）

[![在此处输入图像描述](../Images/032cd2d9d667523b7fc271e258e62382.png)](https://i.stack.imgur.com/jbPcs.png)

[![在此处输入图像描述](../Images/d1c5ef298bc0e9f3a96e309f8398b9db.png)](https://i.stack.imgur.com/V1Rvv.png)

（世界著名宇航员）

[![在此处输入图像描述](../Images/2dae38b56ba7d119ad075802218aa992.png)](https://i.stack.imgur.com/jkIVl.png)

这太容易了——只需谷歌版本名称后跟“花生”，你就会找到所有的！

对此的后续问题是：R 核心团队中谁喜欢 Peanuts 并开始了这个？

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-07-24T00:55:27.297

Peter Delgaard 在他在 userR!2018 的演讲中确认发行名称取自 Peanuts 漫画：[https ://www.youtube.com/watch?v=z1vTSdRolgI](https://www.youtube.com/watch?v=z1vTSdRolgI)

大约 8 分钟后，他开始谈论版本名称（视频截图）：

[![在此处输入图像描述](../Images/f49ca29d1358c98241b4c9c69ee944a8.png)](https://i.stack.imgur.com/GnpeI.png)

他还参考了这个网站来解释这些版本： http: [//livefreeordichotomize.com/2018/04/23/r-release-names/](http://livefreeordichotomize.com/2018/04/23/r-release-names/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-19T07:52:42.097

其他回应指出，所有发行名称都是对花生条/电影的引用。[R 版本名称](https://livefreeordichotomize.com/2017/09/28/r-release-names/)是一个博客页面，参考了每个版本名称的每个漫画。

从页面：

> r-devel（未发布的开发版本）未遭受的后果
> 
> 参考：花生 1967 年 8 月 17 日
> 
> 2.14.0 (2011-10-31) 大南瓜
> 
> 参考：花生 1973 年 10 月 29 日
> 
> 2.14.1 (2011-12-22) 十二月雪花
> 
> 参考：查理布朗的圣诞节
> 
> 这与 1960 年 1 月 5 日的花生非常接近，但他们提到了一月的雪花而不是十二月。“十二月雪花”的名言来自查理布朗的圣诞节。
> 
> 2.14.2 (2012-02-29) 送礼季
> 
> 参考：这是露西在短片中说的一句话，这是复活节小猎犬，查理布朗！– 将复活节称为“收礼季”。
> 
> 2.15.0 (2012-03-30) 复活节小猎犬
> 
> 参考：花生 1971 年 4 月 11 日
> 
> 这也可能引用了它是复活节小猎犬，查理布朗！。
> 
> 2.15.1 (2012-06-22) 烤棉花糖
> 
> 参考：花生 1987 年 6 月 6 日
> 
> 2.15.2 (2012-10-26) 不给糖就捣蛋
> 
> 参考：花生 1969 年 10 月 31 日
> 
> 2.15.3 (2013-03-01) 安全毯
> 
> 参考：花生 1965 年 10 月 23 日
> 
> 3.0.0 (2013-04-03) 蒙面漫威
> 
> 参考：花生 1981 年 6 月 23 日
> 
> 编辑：从消息来源自己那里得到一些内幕消息，这是来自查理布朗和史努比秀！
> 
> Source MoviesAfterMidnight 3.0.1 (2013-05-16) 好运动
> 
> 参考：你是一个很好的运动，查理布朗
> 
> 这很可能来自电影你是一个很好的运动查理布朗，但是花生在 1953 年 11 月 22 日确实提到了“很好的运动”！
> 
> 3.0.2 (2013-09-25) 飞盘帆船
> 
> 参考：花生 1971 年 9 月 3 日
> 
> 3.1.0 (2014-04-10) 春舞
> 
> 参考：花生 1971 年 3 月 22 日
> 
> Sock it to me Source ebay 3.1.1 (2014-07-10) Sock it to Me
> 
> 参考：这似乎是指一个迷你拼图游戏，可在 ebay 上找到！
> 
> Source MoviesAfterMidnight 3.1.2 (2014-10-31) 南瓜头盔
> 
> 参考：你是一个很好的运动，查理布朗
> 
> 在剪辑中稍晚一点，大约 16:45。
> 
> Source Something to be Found 3.1.3 (2015-03-09) 平滑人行道
> 
> 参考：这是《幸福是一只温暖的小狗》书中的一页。
> 
> 3.2.0 (2015-04-16) 满载而归
> 
> 参考：花生 1966 年 4 月 7 日
> 
> 3.2.1 (2015-06-18) 世界著名宇航员
> 
> 参考：花生 1969 年 3 月 10 日
> 
> 来源 Business Wire 3.2.2 (2015-08-14) 消防安全
> 
> 参考：大都会人寿似乎创作了一本以花生为主题的消防安全手册着色和活动书。
> 
> 3.2.3 (2015-12-10) 木制圣诞树
> 
> 参考：这是查理布朗圣诞节中的一句台词——Linus 说：“哎呀，我不知道他们仍然制作木制圣诞树”。
> 
> 3.2.4 (2016-03-11) 非常安全的菜肴
> 
> 参考：花生 1964 年 2 月 20 日
> 
> 3.2.5 (2016-04-11) 非常、非常安全的菜肴（经过重新标记的 3.2.4 修订版）
> 
> 我认为这仍然是对 Peanuts 1964 年 2 月 20 日的引用
> 
> 3.3.0 (2016-05-03) 据说是教育
> 
> 参考：花生 1971 年 5 月 7 日
> 
> 3.3.1 (2016-06-21) 头发中的错误
> 
> 参考：花生 1967 年 6 月 15 日
> 
> 3.3.2 (2016-10-31) 真诚南瓜补丁
> 
> 参考：花生 1968 年 10 月 30 日
> 
> 3.3.3 (2017-03-06) 另一个独木舟
> 
> 参考：花生 1966 年 6 月 29 日
> 
> 3.4.0 (2017-04-21) 你这个愚蠢的黑暗
> 
> 参考：花生 1965 年 9 月 9 日
> 
> 3.4.1 (2017-06-30) 单根蜡烛
> 
> 参考：花生 1965 年 9 月 9 日
> 
> 3.4.2 (2017-09-28) 短暂的夏天
> 
> 参考：这是一个短暂的夏天，查理布朗
> 
> 3.4.3 (2017-11-30) 吃风筝的树
> 
> 参考：花生 1967 年 2 月 19 日
> 
> Peter Dalgaard 制作了一个 gif 来纪念这一重要时刻！
> 
> 来源 catawiki 拍卖 3.4.4 (2018-03-15) 有人依靠
> 
> 参考：花生雕像（1971 年）。有几个不同的版本，有些是查理布朗和史努比的，一个是莱纳斯和史努比的，一个是伍德斯托克和史努比的。其中许多是标志牌，但也有徽章和这个小雕像。我能找到的最古老的（过时的）是 1971 年的这个，所以我们就去了！
> 
> 3.5.0 (2018-04-23) 玩的开心
> 
> 参考：花生 1973 年 1 月 27 日
> 
> 3.5.1 (2018-07-02) 羽毛喷雾
> 
> 参考：花生 1972 年 3 月 9 日

# .net - 带有有效证书的“无法为 SSL/TLS 安全通道建立信任关系”

> ID：13478377
> 
> 赞同：1
> 
> 时间：2012-11-20T17:09:04.823
> 
> 标签：.net, wcf, ssl

我有一个在亚马逊云服务器上运行的 WCF 服务。有时在某些客户端上——它们是每 5 分钟轮询一次服务的长时间运行的进程——会发生以下异常：

> System.ServiceModel.Security.SecurityNegotiationException：无法为具有权限“myservicehost.com”的 SSL/TLS 安全通道建立信任关系。---> System.Net.WebException：底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。---> System.Security.Authentication.AuthenticationException：根据验证程序，远程证书无效。

看起来 SSL 证书有问题，但我找不到原因。该证书由 DigiCert 颁发。

奇怪的是，总是在客户端启动时，WCF 调用成功。然后，正如我所写的，每 5 分钟重复一次通话。这工作正常，直到 30 分钟到 8 小时之间的某个时间过去。从那时起，它不再起作用，并且每次后续调用都会发生上述异常。然后这种状态可以保持几天。

在极少数情况下，在 2/3 天后，它会在短时间内再次运行，然后异常再次出现。

当我重新启动客户端进程时，它会再次出现一段时间，直到上述问题一遍又一遍地开始。

SO上有很多带有这个标题的消息，但我没有找到任何与我的特殊问题相关的消息。在大多数其他情况下，异常总是发生而不是不定期发生。那么任何人都可以帮助或尝试指出我的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:34:38.950

终于在研究了很久之后，找到了解决办法。在我们软件的同一进程中，另一个模块同时运行，它发出 FTP 请求，其中包含以下代码：

```
ServicePointManager.ServerCertificateValidationCallback =
    new RemoteCertificateValidationCallback( myCertificateValidation ); 
```

`myCertificateValidation`是一个执行自定义验证的回调方法。不幸的是，就我而言，它总是返回`false`。这导致了上述异常。因为 FTP 模块没有一直运行，所以错误很难找到。

# java - Strange behavior of JDBC connection

> ID：13478379
> 
> 赞同：1
> 
> 时间：2012-11-20T17:09:24.293
> 
> 标签：java, database, unix, stored-procedures

We are facing some strange behavior in calling stored procedure from java. We are using plain JDBC connection in our stand alone application to invoke some stored procedure which is taking more than 1 hour to finish. Problem is that when we are after the stored procedure finishes executing, we are not getting any response in java code. Java code seems to be stuck but after the Socket is getting timed out, we are getting readTimedOut exception in java. This happens only on 1 instance of our database, on other instance it works fine

Is the firewall between the servers may cause the problem. Or there is some parameter in oracle that is causing the connection to be terminated. Is there some parameter in JDBC driver. We are using jdbc.odbc.OracleDrive

# php - 用另一个数组重写数组的键

> ID：13478380
> 
> 赞同：3
> 
> 时间：2012-11-20T17:09:24.937
> 
> 标签：php, arrays, sorting

我想用字符串键重写数组“foo”的数字键。该关系保存在另一个数组“bar”中。

```
$foo = array(
 1 => 'foo',
 2 => 'bar',
 ...
);

$bar = array(
 1 => 'abc',
 2 => 'xyz',
 ...
);

$result = array(
 'abc' => 'foo',
 'xyz' => 'bar',
 ...
); 
```

实现此结果的最快方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T17:10:55.267

使用[`array_combine`](http://www.php.net/manual/en/function.array-combine.php)功能：

```
$combined = array_combine($bar, $foo); 
```

`print_r($combined);`给

```
Array
(
    [abc] => foo
    [xyz] => bar
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:15:23.037

如果两个数组（$foo 和 $bar）中的键/值的顺序不同，则 NullPointer 的示例将失败。考虑一下：

```
$foo = array(
    1 => 'foo',
    2 => 'bar',
);

$bar = array(
    2 => 'xyz',
    1 => 'abc',
); 
```

如果你`array_combine($foo, $bar)`像以前一样运行，输出将是

```
array(2) {
  ["foo"]=>
  string(3) "xyz"
  ["bar"]=>
  string(3) "abc"
} 
```

然而，这个简单的循环应该可以工作：

```
$output = array();
foreach ($bar as $from => $to) {
    $output[$to] = $foo[$from];
} 
```

# python - python使用不同的方式调用类的方法

> ID：13478383
> 
> 赞同：2
> 
> 时间：2012-11-20T17:09:36.273
> 
> 标签：python, oop, class, object

我有一些课：

```
class RSA:
 CONST_MOD=2
 def __init__(self):
  print "created"

 def fast_powering(self,number,power,mod):
  print "powering" 
```

我想实例化它并调用fast_powering方法：

```
 def main():
  obj=RSA() # here instant of class is created 
  val=obj.fast_powering(10,2,obj.CONST_MOD)  #  and we call method of object
  print val 
```

它工作正常！

但我发现我也可以用一些不同的方式来做，比如：

```
def main():
 obj=RSA #do we create a link to the class without creating of object , or what?
 val=obj().fast_powering(10,2,obj().CONST_MOD) # and here we do something like
          # calling of static method of class in C++ without class instantiation,
          #  or ?
 print val 
```

抱歉，我有点用 C++ 的方式思考，但无论如何，令我惊讶的是它也可以工作！
这里到底发生了什么？哪种方式更受欢迎？这对我来说有些神秘。

提前感谢您的任何回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:16:37.480

在您的示例中，您正在执行以下操作：

```
obj = RSA 
```

这只是将名称`obj`绑定到绑定到的任何内容`RSA`，这是`RSA`您实例中的类。然后你在做：

```
obj().fast_powering(…) 
```

这相当于创建一个实例`RSA`并调用`fast_powering`它的方法。请注意，这样，您将`RSA`在每次调用时获得一个新实例，这可能不是您想要的。您还会注意到，该`__init__`方法已在上面引用的行中调用。还要考虑：

```
>>> class RSA:
...   def __init__(self):
...     print("foo")
... 
>>> obj = RSA
>>> obj() is obj()
foo
foo
False 
```

在这里，我们看到该语句`obj() is obj()`实际上创建了两个对象，当然这两个对象并不相同。这与您的第一个示例相反，如下所示：

```
>>> class RSA:
...   def __init__(self):
...     print("foo")
... 
>>> obj = RSA()
foo
>>> obj is obj
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:14:46.947

之后`obj = RSA`，`RSA`和都`obj`引用同一个类 - 但是，您*没有*创建 的实例`RSA`。考虑一下：

```
class Foo:
    def __init__(self):
        print 'Foo'

Bar = Foo

Foo()
Bar() 
```

输出：

```
富
富

```

就哪种方式更可取而言：这实际上取决于您要做什么。但总的来说，第一种方法更可取，除非您有充分的理由使用第二种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:30:12.633

好吧...事实证明这`class RSA`也是一个实例，因此您可以将其存储在变量中（这是您的第二种方法正在做的事情），尽管我需要指出您实际上并没有在它们中做同样的事情。当你这样做时：

```
val=obj().fast_powering(10,2,obj().CONST_MOD) 
```

您实际上调用了 RSA 的构造函数两次（您有两次`obj()`调用），因此您将在控制台上看到两条“ *created ”消息。*

在 Python 中有很多奇怪的方法可以做同样的事情。为了便于阅读，我更喜欢“常规”方式（在您的第一种方法中显示的方式），但这里有一个在*法律上*可行的快速示例：

```
#!/usr/bin/env python

class RSA(object):
    CONST_MOD=2
    def __init__(self):
        print "created"

    def fast_powering(self,number,power,mod):
        print "powering"

def method1_good():
    obj=RSA() # here instant of class is created 
    val=obj.fast_powering(10,2,obj.CONST_MOD)  #  and we call method of object
    print val

def method2_bad():
    obj=RSA #do we create a link to the class without creating of object , or what?
    val=obj().fast_powering(10,2,obj().CONST_MOD)
    print val

def method3_badToo():
    getattr(RSA(), "fast_powering")(10,2,RSA().CONST_MOD)

def method4_areYouNuts():
    for key, val in globals().iteritems():
        if isinstance(val, type) and (key == "RSA"):
            obj = val()
            getattr(obj, "fast_powering")(10,2,obj.CONST_MOD)
            break

if __name__ == "__main__":
    print "Works with method1?"
    method1_good()
    print "Works with method2?"
    method2_bad()
    print "Works with method3?"
    method3_badToo()
    print "Works with method4?"
    method4_areYouNuts() 
```

也许这可能会给您一些需要寻找的东西，例如： [Globals 和 Locals](https://stackoverflow.com/questions/7969949/whats-the-difference-between-globals-locals-and-vars) Gettattr 和 setattr ( [1](https://stackoverflow.com/questions/6893929/accessing-list-items-with-getattr-setattr-in-python)和[2](http://bytes.com/topic/python/answers/832252-setattr-getattr-when-use) )

[如果你想深入挖掘......你可以用元类](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)做的疯狂的事情......（在我在 StackOverflow 中见过的最好的答案之一中解释过）

# playframework-2.0 - TimeoutException after facebook login when using securesocial module in play 2.0.2

> ID：13478385
> 
> 赞同：0
> 
> 时间：2012-11-20T17:09:52.120
> 
> 标签：playframework-2.0, securesocial

I'm using securesoial 2.9.1, 2.0.6 version with play 2.0.2\. I'm getting a promise timeout exception while redirecting after successful login via facebook to a particular url.

the url is specified in the routes file and that url is written in the `securesocial.conf` file as written below:

```
onLoginGoTo=/after-redirect 
```

full stack trace is :

```
[debug] application - authorizationUrl = https://graph.facebook.com/oauth/authorize
[debug] application - Redirecting to : [https://graph.facebook.com/oauth/authorize?scope=email&client_id=XYZ&redirect_uri=http%3A%2F%2Flab.verchaska.com%2Ftest%2Fauthenticate%2Ffacebook&response_type=code&state=ab113e0b-37cc-4849-b84e-a84a5fe7f135]
[error] application -

! @6cd55ef0a - Internal server error, for request [GET /test/authenticate/facebook?state=ab113e0b-37cc-4849-b84e-a84a5fe7f135&code=AQDkiVlAMuutA5KEt1fA17fFUjh1RSQJ7MpLwlyfr10PK35izqZq5JXTgWQhIvpQv7GwrK5iMBz_VjpIRd9Qy784YczSZjudgHKTj1M3DOjRZAg5le1wHeWqwClQ4isZf9oRcmPVuswxG8uvTSQNZzUEjrAQZ5tQ0o67N5Xp0kc2kAjJKnf906nFaTmllYAgTP_D92fkI6fhGuVkDVrlnkiB] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[TimeoutException: Promise timed out after 10000 : MILLISECONDS]]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1-2.0.4.jar:2.0.4]
        at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1-2.0.4.jar:2.0.4]
        at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
        at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1-2.0.4.jar:2.0.4]
        at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.util.concurrent.TimeoutException: Promise timed out after 10000 : MILLISECONDS
        at play.api.libs.concurrent.STMPromise$$anonfun$await$1.apply(Promise.scala:158) ~[play_2.9.1-2.0.4.jar:2.0.4]
        at play.api.libs.concurrent.STMPromise$$anonfun$await$1.apply(Promise.scala:154) ~[play_2.9.1-2.0.4.jar:2.0.4]
        at scala.concurrent.stm.ccstm.InTxnImpl.runBlock(InTxnImpl.scala:538) ~[scala-stm_2.9.1.jar:0.5]
        at scala.concurrent.stm.ccstm.InTxnImpl.topLevelAttempt(InTxnImpl.scala:494) ~[scala-stm_2.9.1.jar:0.5]
        at scala.concurrent.stm.ccstm.InTxnImpl.topLevelAtomicImpl(InTxnImpl.scala:365) ~[scala-stm_2.9.1.jar:0.5]
        at scala.concurrent.stm.ccstm.InTxnImpl.atomic(InTxnImpl.scala:244) ~[scala-stm_2.9.1.jar:0.5] 
```

I have my own domain, I'm not using localhost:9000.

# couchdb - CouchDB _changes，查看相关

> ID：13478392
> 
> 赞同：1
> 
> 时间：2012-11-20T17:10:30.543
> 
> 标签：couchdb

简单的问题：我想对数据库中的一些更改做出反应，但只对那些导致某个`view1`. 也就是说，我对数据库中的所有更改都不感兴趣，只对影响`view1`. 我不是在这里谈论过滤器，只是关于视图+更改。像这样的东西（尽管这可能不正确）：

```
http://localhost:5984/db/_design/doc1/_view/view1/_changes 
```

CouchDB 是否完全支持这一点？这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:14:43.587

这是可能的，但以另一种方式。从 1.1.0 版本开始，CouchDB 能够[使用 map 函数作为](https://github.com/apache/couchdb/commit/56086f07c425bd272bda5a6609ed9db3758178ba)更改源的过滤器。这就像常规过滤器一样工作：如果为更改的文档至少发出一次键值对，则意味着他通过了过滤器并`_changes`产生了关于他的记录。如果您只需要获取特定视图的新更新，则需要指定起始`since`序列号 - 它可以很容易地`_design/ddoc-name/_info`从 field 的资源中检索`view_index/update_seq`。从 1.3 版本开始，您还可以指定`since=now`从当前时间点收听更新。

请注意，此视图过滤器不使用视图索引，并且在发生新更改时不会更新他。此外，还有[一组补丁](https://issues.apache.org/jira/browse/COUCHDB-1398)可以以您可能感兴趣的方式改进视图过滤器。

# svn - How to solve "The node '...' was not found." in SVN

> ID：13478397
> 
> 赞同：14
> 
> 时间：2012-11-20T17:10:44.773
> 
> 标签：svn, version-control

I've merged two branches (trunk and a development branch). A folder has dissapeared.

I'm working in command line and when trying to say `svn resolve --accept working src/path/to/folder` the terminal spits out `The node 'src/path/to/folder' was not found`

After that it also spits out:

`svn: E200009: Could not add all targets because some targets don't exist`

`svn: E200009: Illegal target for the requested operation`

How can I force SVN to accept this change?

Thanks!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T22:56:50.473

我在尝试使用 TortoiseSVN 更新工作副本时遇到了这个错误。在我的情况下，我设法通过使用 SVN 命令行界面而不是`svn update`. 即使在成功提交后，我仍然无法更新。

很奇怪，但手动删除和更新似乎可以清理所有内容。我的两个客户端都基于 Subversion 1.7.6。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-03T10:15:10.770

It looks like some info is broken. Which seems to happen during merge with tree conflicts.

I had to fix the svn database which is the file **.svn/wc.db**.

WARNING! You are manipulating the svn database which can be harmful! Do this only if you have a backup and if this procedure does not help, restore the data from backup.

1.  Go to SQLite from [SQLite Download Page](http://www.sqlite.org/download.html), download the archive of the precompiled binary for your platform and extract it e.g. to **/tools**
2.  Change into the **.svn** directory make a backup of the **wv.db** (!) and run **sqlite3** with **wc.db** as parameter. E.g.

    `\tools\sqlite3.exe wc.db`

3.  Search the entries causing the problem with

    `select * from actual_node where conflict_data like '%missing%';`

    or

    `select * from actual_node where conflict_data like '%obstructed%';`

    refine these queries until only the faulty actual nodes are listed. Also

    `select * from actual_node where local_relpath like '%...%';`

    is helpful to find the faulty nodes.

4.  Remove the faulty nodes by replacing the **select** with a **delete**

    `delete from actual_node where conflict_data like '%missing%';`

5.  Check again with your favorite svn tool.

6.  Rinse and repeat until all problems are gone.

WARNING! You are manipulating the svn database which can be harmful! Do this only if you have a backup and if this procedure does not help, restore the data from backup.

For me it worked several times.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-04T10:54:18.173

由于使用服务器的 DNS 名称检出工作副本，例如[http://myServer/svn/software/Trunk/](http://myServer/svn/software/Trunk/) ，我遇到了这个问题；并且我告诉我的 SVN 客户端合并的分支是同一个分支，仅由其 IP 地址直接引用，例如[http://10.140.1.29/svn/software/Branches/myBranch/](http://10.140.1.29/svn/software/Branches/myBranch/)。使用基于 GUI 的客户端（例如 TortoiseSVN）时很容易被忽视，并且诸如“找不到节点”之类的神秘错误消息并不能真正告诉您任何信息。希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-11T08:54:10.693

在 Eclipse 中也有这个。我做了几次刷新、svn 清理等，但没有任何帮助。

然后我从命令行进行了 SVN 提交，效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T05:20:15.460

对我来说，我正在使用 Tortoise SVN 中的“测试合并”按钮，我收到了这个错误。最终我真的点击了“合并”，错误没有显示......

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-06-10T06:45:26.503

我删除了文件的文件夹并再次更新。我发现这样做解决了这个问题。

# ios - 如何在 Xcode 4.5 中创建 IOS 5.1 应用程序

> ID：13478398
> 
> 赞同：1
> 
> 时间：2012-11-20T17:10:46.410
> 
> 标签：ios, xcode, landscape

当我在 Xcode 4.5 上为 IOS 5 创建 Ipad 应用程序时遇到横向问题，我看到的相关问题很少，但大多数与我的情况相反。

我不使用任何代码，就像`Bool autorotate`我只是在界面生成器上选择横向一样。取消选择使用自动布局。

当我创建应用程序时，我在项目文件夹（蓝色图标）上选择 IOS Deployment Target 5.1

![在此处输入图像描述](../Images/d33bd6be13c0fb34700ef13b547f0486.png)

**构建设置是架构 Base Sdk 是 IOS 6**

![在此处输入图像描述](../Images/ea497dd9ad78609abfab279f3d14bc6e.png)

**在情节提要中，导航控制器设置为横向，界面文档设置为 5.1**

![在此处输入图像描述](../Images/1f1559f7259406fd6deac3e485f4a3b1.png)

**在 IOS 6 模拟器环境中运行良好：**

![在此处输入图像描述](../Images/aada0f9123c1eeedd50ec2ddcf949205.png)

**但在 IOS 5.1 Simulator 环境中不起作用且迷失方向**

![在此处输入图像描述](../Images/a00691d503e0af1402b4715b2519d7f3.png)

*我错过了什么？我怎样才能使这项工作同时适用于 5.1 和 6 版本？*

编辑=====

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if (interfaceOrientation==UIInterfaceOrientationLandscapeRight)
        return YES;

    return NO;
} 
```

上面的代码也不起作用。它仍然是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:14:55.703

您应该在视图控制器上覆盖 shouldAutorotateToInterfaceOrientation: 并为您想要的方向返回 YES，例如

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
return toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:21:57.803

在 IOS 6.0 之前，您必须在项目的所有 ViewController 上覆盖此方法。在 IOS 6 中，Apple 终于纠正了这种行为

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T19:16:41.620

使用以下代码更新所有视图控制器。

适用于模拟器 5.0 及更高版本。

```
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 
```

# javascript - 如何测试浏览器对事件的支持

> ID：13478403
> 
> 赞同：2
> 
> 时间：2012-11-20T17:11:05.497
> 
> 标签：javascript, events, browser-feature-detection

具体来说，测试是否`input[type=date]`会触发`input`事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:14:29.720

[jsFiddle 示例](http://jsfiddle.net/UThQu/)

你可以这样做：

```
 var element = document.getElementById('myElement');
 var supported = 'oninput' in element; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T17:14:47.867

通过查看[**此**](http://danielfriesen.name/blog/2010/02/16/html5-browser-maze-oninput-support/)网站，我建议您尝试

> 测试 B：在输入上使用 setAttribute 设置 oninput 并检查 node.oninput 是否是函数测试 C：使用 w3 事件 api 创建输入并伪造按键以查看 oninput 是否触发

这是来自测试 C 的 JavaScript

```
function testC(){
    var input = document.createElement('input'),
        e = document.createEvent("KeyboardEvent");
    // set type for DATE
    input.setAttribute('type', 'date');
    e.initKeyEvent("keypress", true, true, window, false, false, false, false, 0, "e".charCodeAt(0));
    // use initKeyboardEvent for webkit
    document.body.appendChild(input);
    input.addEventListener("input", function(e) { alert('C Successful'); e.preventDefault(); e.stopPropagation(); }, false);
    input.focus();
    input.dispatchEvent(e);
    document.body.removeChild(input);
} 
```

* * *

[编辑：测试代码是从测试页面](http://jsbin.com/efalu/7)复制的，只有几个小的更改（var 的位置、type=date、alert）。我刚才在 chrome 中运行它（更改`initKeyEvent`为之后`initKeyboardEvent`）并且它没有产生任何结果，但是注释掉该`removeChild`行并手动执行它*会*导致成功消息。不确定为什么模拟事件没有调用它，因此您需要先查看它，然后再将其应用到您的代码中。

# python - Camera Calibration (cv.calibrateCamera and cv.InitUndistortMap)

> ID：13478404
> 
> 赞同：0
> 
> 时间：2012-11-20T17:11:07.583
> 
> 标签：python, opencv, camera-calibration

The cv.InitUndistortMap opencv function is not working. I get the intrinsic and distortion matrix, but I can not use this values to fix my image. I get this error:
cv.InitUndistortMap(camera_matrix,distortion_coefs,mapx,mapy) TypeError: Argument 'cameraMatrix' must be CvMat. Use fromarray() to convert numpy arrays to CvMat

```
import numpy as np
import cv2
import cv
import os
import sys, getopt
from glob import glob

def calibracion():

  args, img_mask = getopt.getopt(sys.argv[1:], '', ['save=', 'debug=', 'square_size='])
  args = dict(args)
  img_mask = 'left*.jpg'
  img_names = glob(img_mask)
  debug_dir = args.get('--debug')
  square_size = float(args.get('--square_size', 1.0))

  pattern_size = (9, 6)
  pattern_points = np.zeros( (np.prod(pattern_size), 3), np.float32 )
  pattern_points[:,:2] = np.indices(pattern_size).T.reshape(-1, 2)
  pattern_points *= square_size

  obj_points = []
  img_points = []
  h, w = 0, 0
  for fn in img_names:
      print 'processing %s...' % fn,
      img = cv2.imread(fn, 0)
      h, w = img.shape[:2]
      found, corners = cv2.findChessboardCorners(img, pattern_size)
      if found:
      term = ( cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_COUNT, 30, 0.1 )
      cv2.cornerSubPix(img, corners, (5, 5), (-1, -1), term)
      if debug_dir:
      vis = cv2.cvtColor(img, cv2.COLOR_GRAY2BGR)
      cv2.drawChessboardCorners(vis, pattern_size, corners, found)
      path, name, ext = splitfn(fn)
      cv2.imwrite('%s/%s_chess.bmp' % (debug_dir, name), vis)
      if not found:
      print 'chessboard not found'
      continue
      img_points.append(corners.reshape(-1, 2))
      obj_points.append(pattern_points)

      print 'ok'

  rms, camera_matrix, dist_coefs, rvecs, tvecs = cv2.calibrateCamera(obj_points, img_points, (w, h))
  cv2.destroyAllWindows() 
  return camera_matrix, dist_coefs

if __name__ == '__main__':

  camera_matrix = cv.CreateMat(3, 3, cv.CV_32FC1)
  dist_coefs = cv.CreateMat(4, 1, cv.CV_32FC1)

  camera_matrix , dist_coefs = calibracion()
  print "camera matrix:\n", camera_matrix       # intrinsic
  print "distortion coefficients: ", dist_coefs     # distortion

  image=cv.LoadImage('dog.jpeg')
  mapx = cv.CreateImage( cv.GetSize(image), cv.IPL_DEPTH_8U, 1 )
  mapy = cv.CreateImage( cv.GetSize(image), cv.IPL_DEPTH_8U, 1 )

  cv.InitUndistortMap(camera_matrix,dist_coefs,mapx,mapy)
  t = cv.CloneImage(image)
  cv.Remap( t, image, mapx, mapy )

  cv.ShowImage('FOTO', t )
  cv.WaitKey(0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:00:41.420

我无法运行该`calibration`函数，但我认为错误是您要在`camera_matrix`此处替换变量的值：`camera_matrix , dist_coefs = calibracion()`. `camera_matrix`需要像这里这样的 CvMat `camera_matrix = cv.CreateMat(3, 3, cv.CV_32FC1)`：. 如果您注释这行代码：`camera_matrix , dist_coefs = calibracion()`您将不会再次显示该错误消息。

简而言之：修复`calibration`功能

# jquery - 表单编辑期间的 jqGrid 内容类型

> ID：13478407
> 
> 赞同：3
> 
> 时间：2012-11-20T17:11:13.183
> 
> 标签：jquery, jqgrid

我是 jqGrid 的新手。但是，主要是在 Oleg 的回答的帮助下，成功地使用 jqGrid 开发了一个应用程序。我根据下拉列表的选择加载了一个 jqGrid。数据从 Web 服务 (asmx) 文件返回。代码是这样的

```
jQuery("#list").jqGrid({
    url: '<%= ResolveClientUrl("OfficeData.asmx/GetSCFS_RO") %>',
    editurl: '<%= ResolveClientUrl("OfficeData.asmx/SaveFPSUpdates") %>',
    datatype: "json",
    mtype: 'POST',
    ajaxGridOptions: { contentType: 'application/json; charset=utf-8' }, 
    ajaxEditOptions: { contentType: 'application/json; charset=utf-8', dataType: 'json' },
    serializeGridData: function (postData) {
        // return null;
        if (postData.OfficeId === undefined) { postData.OfficeId = 0; }
        else {
            postData.OfficeId = officeId;
        }
        return JSON.stringify(postData);
    }, 
    jsonReader: { repeatitems: false, root: "d.rows", page: "d.page",
        total: "d.total", records: "d.records" },
    colNames: ['FPSCode',  'Owner Name ', 'Licese_No', 'ShopAddress', 'Village',
        'License Valid From', 'Valid To','FPS Type','WholeSalerName',  'Mobile'],
    colModel: [{ name: 'FPSCode', index: 'FPSCode', width: 60, align: 'left',
        editable:true, editrules:{required:true}, 
        editoptions:{ 
            dataInit: function(element) { 
                $(element).attr("readonly", "readonly"); 
            } 
        }
    },
    ...... 
```

Firebug 显示以下 Post 标头

**响应标头**

```
......
Content-Type      application/json; charset=utf-8
Date              Tue, 20 Nov 2012 14:20:34 GMT
Server            ASP.NET Development Server/10.0.0.0
X-AspNet-Version  4.0.30319 
```

**请求标头**

```
Accept            application/json, text/javascript, */*; q=0.01
Accept-Encoding   gzip, deflate
Accept-Language   en-US,en;q=0.5
Cache-Control     no-cache
Connection        keep-alive
Content-Length    105
.......... 
```

正如预期的那样，我得到的响应是 JSON 对象。

但是表单提交总是发送`Content-Type`为`application/x-www-form-urlencoded; charset=UTF-8`

**响应标头**

```
Cache-Control     private, max-age=0
Connection        Close
Content-Length    95
Content-Type      text/xml; charset=utf-8
Date              Tue, 20 Nov 2012 14:20:46 GMT
Server            ASP.NET Development Server/10.0.0.0 
```

**请求标头**

```
Accept            */*
Accept-Encoding   gzip, deflate
Accept-Language   en-US,en;q=0.5
Cache-Control     no-cache
Connection        keep-alive
Content-Length    254
Content-Type      application/x-www-form-urlencoded; charset=UTF-8
Cookie            ASP.NET_SessionId=utts2wlhdto4xhae34fzqkt4
Host              localhost:18017
Pragma            no-cache
Referer           Account/FPSUpdate.aspx
User-Agent        Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
X-Requested-With  XMLHttpRequest
X-AspNet-Version  4.0.30319 
```

正如我在 Stackoverflow 上所建议的那样

```
ajaxEditOptions:  { contentType: 'application/json; charset=utf-8', dataType: 'json' } , 
```

`ajaxEditoptions`我什至尝试使用

```
jQuery.extend(jQuery.jgrid.edit, {
    ajaxEditOptions:  { contentType: 'application/json; charset=utf-8', dataType: 'json' },
    ...
}); 
```

但是 . 中没有任何变化`Content-Type`。因此，我总是从服务器收到更新的 XML 响应。服务器的输出是

```
<string xmlns="http://tempuri.org/">Data Saved</string> 
```

我无法将 Mime 类型修复为 JSON。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:33:37.700

首先，我很高兴，我的旧答案可以帮助你。

jqGrid的`ajaxEditOptions`as 选项的用法确实不正确。它是[editGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)的选项，因此您必须将其作为属性包含在[navGrid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#definition)`prmEdit`的and`prmAdd`选项中或使用

```
$.extend($.jgrid.edit, {
    ajaxEditOptions: { contentType: "application/json" }
}); 
```

您写道，您尝试使用非常接近的选项。我建议您再验证一次。为确保该行将被执行，您可以将它包含在 JavaScript 脚本开头的某个位置。

我个人使用

```
$.extend($.jgrid.defaults, {
    ajaxGridOptions: { contentType: "application/json" },
    ajaxRowOptions: { contentType: "application/json", async: true },
    ajaxSelectOptions: { contentType: "application/json", dataType: "JSON" },
    ...
});
$.extend($.jgrid.edit, {
    ajaxEditOptions: { contentType: "application/json" },
    recreateForm: true,
    serializeEditData: function(postData) {
        return JSON.stringify(postData);
    },
    ....
});
$.extend($.jgrid.del, {
    ajaxDelOptions: { contentType: "application/json" }
    ...
}); 
```

一切都按预期工作：可以`Content-Type: application/json`在相应请求的 HTTP 标头中看到。

**更新：我认为 jqGrid 的奇怪行为的起源是我**[在这里](http://www.trirand.com/blog/?page_id=393/bugs/one-need-use-deep-recursive-jquery-extend-in-grid-formedit-js/#p27764)向 trirand 报告的小错误。您可以在您的副本中自己进行相应的修改或保留规则：如果您在like`jquery.jqGrid.src.js`中定义了一些非标量（对象）选项，则不应使用. [如果您按照我在错误报告](http://www.trirand.com/blog/?page_id=393/bugs/one-need-use-deep-recursive-jquery-extend-in-grid-formedit-js/#p27764)中描述的那样修复 jqGrid 的代码，那么限制将不再存在。`$.jgrid.edit``ajaxEditOptions``navGrid`

**更新 2**：该错误已在 github 的主代码中修复（请参见[此处）。](https://github.com/tonytomov/jqGrid/commit/65ce3a1d61b14f0131dc23856ca76da0e56cc3af)所以 jqGrid 的下一个版本（4.4.1 更高版本）应该没有描述的问题。

# ruby-on-rails - Rails 自定义消费者 oauth 策略

> ID：13478418
> 
> 赞同：2
> 
> 时间：2012-11-20T17:11:49.260
> 
> 标签：ruby-on-rails, magento, oauth

我是 oauth 和 api 集成的新手，并且有一段时间试图弄清楚它。

我想将我的 rails 应用程序连接到 Magento（一个 php 电子商务车）。

他们在这里有一些基本文档：

[http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html](http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html)

虽然我原则上理解 oauth 的概念，但我不知道如何实现自定义解决方案。我使用了一些 gem（例如：omniauth）连接到 Twitter，这很好，但我只是不知道如何创建自己的连接到 Magento 的策略。

有谁知道该怎么做？有没有我可以使用的演练或截屏视频？

如果不是，您可能会建议我使用哪些工具或方法来解决这个问题——如果只是通过反复试验？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T03:16:24.087

以下是我创建的[omniauth-magento gem / strategy的repo 的详细说明：](https://github.com/Zookal/omniauth-magento)

**设置 Magento**

*消费者密钥和秘密*

在 Magento 中设置消费者并记下消费者密钥和消费者秘密

*特权*

在 Magento Admin 后端，转到*System > Web Services > REST Roles*，选择*Customer* ，然后在*Customer*下勾选*Retrieve*。根据需要添加更多权限。

 **属性*

在 Magento Admin 后端，转到*System > Web Services > REST Attributes*，选择*Customer ，然后在**Customer > Read*下勾选*Email*、*First name*和*Last name*。根据需要添加更多属性。

 ***设置 Rails**

这些说明的一部分基于这些[OmniAuth 说明](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)，您可以阅读这些说明以防遇到困难。

*设计*

如果尚未安装，请安装[Devise](https://github.com/plataformatec/devise)

*在您的routes.rb*中添加/替换此行。一旦 Magento 成功授权并返回 Rails 应用程序，就会调用它。

```
devise_for :users, :controllers => { :omniauth_callbacks => "users/omniauth_callbacks"} 
```

*Magento oAuth 策略*

将此库加载到您的 Gemfile 中`gem "omniauth-magento"`并运行`bundle install`

修改*config/initializers/devise.rb*：

```
Devise.setup do |config|
  # deactivate SSL on development environment
  OpenSSL::SSL::VERIFY_PEER ||= OpenSSL::SSL::VERIFY_NONE if Rails.env.development? 
  config.omniauth :magento,
    "ENTER_YOUR_MAGENTO_CONSUMER_KEY",
    "ENTER_YOUR_MAGENTO_CONSUMER_SECRET",
    { :client_options => { :site => "ENTER_YOUR_MAGENTO_URL_WITHOUT_TRAILING_SLASH" } }
  # example:
  # config.omniauth :magento, "12a3", "45e6", { :client_options =>  { :site => "http://localhost/magento" } } 
```

*可选*：如果你想使用 Admin API（而不是 Customer API），你需要像这样覆盖默认的 authorize_path：

```
{ :client_options => { :authorize_path => "/admin/oauth_authorize", :site => ENTER_YOUR_MAGENTO_URL_WITHOUT_TRAILING_SLASH } } 
```

在您的文件夹*控制器*中，创建一个子文件夹*users*

在该子文件夹*app/controllers/users/*中，使用以下代码创建文件 *omniauth_callbacks_controller.rb*：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def magento
    # You need to implement the method below in your model (e.g. app/models/user.rb)
    @user = User.find_for_magento_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      sign_in_and_redirect @user, :event => :authentication #this will throw if @user is not activated
      set_flash_message(:notice, :success, :kind => "magento") if is_navigational_format?
    else
      session["devise.magento_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

*用户模型和表格*

这是一个有用的 Magento 信息示例，您可以在创建这些列后将其存储在 User 表中：

*   电子邮件
*   名
*   姓
*   magento_id
*   magento_token
*   magento_secret

*可选*：例如，您可能希望使用 *attr_encrypted gem* 加密 *magento_token* 和 *magento_secret*（需要将 magento_token 重命名为 encrypted_magento_token，将 magento_secret 重命名为 encrypted_magento_secret）。

将您的*用户*模型设置为`omniauthable :omniauthable, :omniauth_providers => [:magento]`并创建一个方法来在成功验证后保存检索到的信息。

```
class User < ActiveRecord::Base  
  devise :database_authenticatable, :registerable, :recoverable,
         :rememberable, :trackable, :validatable, :timeoutable,
         :omniauthable, :omniauth_providers => [:magento]  

  def self.find_for_magento_oauth(auth, signed_in_resource=nil)
    user = User.find_by(email: auth.info.email)
    if !user
      user = User.create!(
        first_name: auth.info.first_name,                           
        last_name:  auth.info.last_name,
        magento_id: auth.uid,
        magento_token: auth.credentials.token,
        magento_secret: auth.credentials.secret,
        email:      auth.info.email,
        password:   Devise.friendly_token[0,20]
      )
    else
      user.update!(
        magento_id: auth.uid,
        magento_token: auth.credentials.token,
        magento_secret: auth.credentials.secret
      )
    end    
    user
  end         
end 
```

*开始认证的链接*

将此行添加到您的视图中`<%= link_to "Sign in with Magento", user_omniauth_authorize_path(:magento) %>`

**认证**

启动你的 Rails 服务器

启动您的 Magento 服务器

使用客户帐户（或管理员帐户，如果您想使用管理 API）登录 Magento

在您的 Rails 应用程序中，转到您粘贴此行的视图`<%= link_to "Sign in with Magento", user_omniauth_authorize_path(:magento) %>`

点击链接

您现在应该被引导到 Magento 视图，提示您授权访问 Magento 用户帐户

确认后，您应该登录到 Rails 并重定向到上面指定的 Rails 回调 URL。用户现在应该存储了 magento_id、magento_token 和 magento_secret。

**进行 API 调用**

创建一个使用 magento_token 和 magento_secret 进行 API 调用的类，例如在 *lib/magento_inspector.rb* 中。例子：

```
class MagentoInspector
  require "oauth"
  require "omniauth"
  require "multi_json"

  def initialize
    @access_token = prepare_access_token(current_user) # or pass user in initialize method 
    @response = MultiJson.decode(@access_token.get("/api/rest/customers").body) # or pass query in initialize method, make sure privileges and attributes are enabled for query (see section at top)
  end

private

  # from http://behindtechlines.com/2011/08/using-the-tumblr-api-v2-on-rails-with-omniauth/
  def prepare_access_token(user)
    consumer = OAuth::Consumer.new("ENTER_YOUR_MAGENTO_CONSUMER_KEY", "ENTER_YOUR_MAGENTO_CONSUMER_SECRET", {:site => "ENTER_YOUR_MAGENTO_URL_WITHOUT_TRAILING_SLASH"})
    token_hash = {:oauth_token => user.magento_token, :oauth_token_secret => user.magento_secret}
    access_token = OAuth::AccessToken.from_hash(consumer, token_hash)
  end
end 
```

确保 Rails 将文件加载到放置此类的文件夹中。对于 lib 文件夹，将其放入*config/application.rb*：`config.autoload_paths += Dir["#{config.root}/lib/**/"]`

执行查询`MagentoInspector.new`

扩展课程以满足您的需求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:40:28.353

当我听到 M 字 (Magento) 时，我得到了这种喉音响应，我花了几个月的时间试图让它做任何有用的事情。但是...假设您别无选择，并假设 Magento 提供标准的 OAuth 服务器，那么您应该能够使用 OmniAuth 连接到 Mag...blurrgh..ento。

Magento 需要提供几个令牌，client_id 和 client_secret。您可以使用这些来为您的应用请求访问令牌。拥有它后，您可以半永久地重复使用它。OmniAuth 或许可以帮助您。

获得访问令牌后，您需要传递一个 HTTP 标头，该标头`Authentication: OAuth <access-token>`与您向服务发出的每个请求都类似。

使用标准 https（我希望，vs http）向服务器发出请求。在 Rails 中，您可以滚动自己的 REST 客户端（使用 Net::HTTP 和朋友），但您可能会发现像[RestClient 这样的 gem，链接在这里](https://github.com/archiloque/rest-client)。还有其他的——请查看[The Ruby Toolbox 了解更多信息](https://www.ruby-toolbox.com/categories/http_clients)。

这会让你开始吗？**

# asp.net-mvc - 将标头添加到控制器上的 Web API 操作

> ID：13478420
> 
> 赞同：1
> 
> 时间：2012-11-20T17:11:59.123
> 
> 标签：asp.net-mvc, http-headers, asp.net-web-api

我试图向控制器添加标头属性，但 Response 的 HttpActionContext 属性为空。难道我做错了什么？

**控制器.cs**

```
[ExceptionHandling, ApiValidation, HttpHeader("X-Robots-Tag", "noindex, nofollow")]
    public abstract class BaseApiController : System.Web.Http.ApiController
    { 
```

**HttpHeaderFilter.cs**

```
 public class HttpHeaderAttribute : System.Web.Http.Filters.FilterAttribute 
{
    public string Name { get; set; }
    public string Value { get; set; }

    public HttpHeaderAttribute(string name, string value)
    {
        Name = name;
        Value = value;
    }
}

public class HttpHeaderFilter : System.Web.Http.Filters.IActionFilter
{
    private readonly string _name;
    private readonly string _value;

    public HttpHeaderFilter(string name, string value)
    {
        _name = name;
        _value = value;
    }

    public bool AllowMultiple
    {
        get { return true; }
    }

    public Task<HttpResponseMessage> ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
    {
        actionContext.Response.Headers.Add(_name, _value);

        return continuation();
    }
} 
```

**全球.asax**

```
kernel.BindHttpFilter<HttpHeaderFilter>(System.Web.Http.Filters.FilterScope.Controller)
                       .WhenControllerHas<HttpHeaderAttribute>()
                       .WithConstructorArgumentFromControllerAttribute<HttpHeaderAttribute>("name", q => q.Name)
                       .WithConstructorArgumentFromControllerAttribute<HttpHeaderAttribute>("value", q => q.Value); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:28:49.543

从 web api 的 ActionFiterAttribute 类派生并将标头添加到响应中，而不是使用 IActionFilter 从头开始​​实现操作过滤器，这会更简单。

**[已编辑]** 对于上述情况，请尝试执行以下操作：

```
return continuation().ContinueWith<HttpResponseMessage>((tsk) =>
                {
                    HttpResponseMessage response = tsk.Result;

                    response.Headers.Add(...)

                    return response;

                }, TaskContinuationOptions.OnlyOnRanToCompletion); 
```

# ruby - Ruby: asynchronous actor/message "society"?

> ID：13478427
> 
> 赞同：1
> 
> 时间：2012-11-20T17:12:26.013
> 
> 标签：ruby, asynchronous, actor

The vision:

*   I code up regular ruby classes, arbitrarily organized into files.
*   Each class behaves as if it were a actor with particular job duties and who responds to requests.
*   My application consists of a society of these actors performing their tasks asynchronously, passing messages to each other and asking for data.
*   While everything is running, at any time, I (as "god") can pause an actor or kill an actor or edit the code of an actor and respawn it. Again, this is while all the other actors are still running; in essence this allows me to modify my program while it's running by killing a particular actor, revising its code, and respawning it.
*   Let's assume that in my code for each actor I have written comprehensive exception handling such that if I kill, revise, and respawn another actor, the first will go on working and not crash.

Question: Does this exist? How can I most easily implement it?

# jquery-ui - 防止恶意覆盖 JQuery

> ID：13478430
> 
> 赞同：2
> 
> 时间：2012-11-20T17:12:34.477
> 
> 标签：jquery-ui, jquery, malware

长话短说：

一段时间以来，我们已经记录了有关基于 JQuery/JQueryUI 的系统的错误。在它的核心，我们正在做一个非常基本的点击链接 -> JQuery AJAX GET -> 打开 JQueryUI 模式模式。

我们得到的错误看起来很简单——“对象不支持属性或方法'对话框'”——导致我们相信 JQueryUI 存在错误。在花费大量时间排除浏览器不兼容、JQuery 端的错误代码、我们端的错误代码、愤怒的代码之神之后……我们幸运地休息了。在办公室的一台机器上进行 100% 的复制。

原来这东西充斥着广告软件——特别是easyinline的[旧版本]——http: [//www.easyinline.com](http://www.easyinline.com)。当用户单击任何链接时，将加载级联的 javascript 文件，包括从 Google 的 CDN 重新加载 JQuery。

对于大多数链接来说，这并不是一个真正的问题——它们无论如何都会让你离开页面并且一切都会重新加载。但是对于我们的模态，这意味着每个模态链接都会在发送请求时覆盖我们的 JQuery，从而导致响应尝试使用现在缺少 JQueryUI 和任何其他插件的“新”$。

最初，我们考虑为“我们的”JQuery 创建另一个全局变量（$$ 或其他东西），并在我们的代码中显式使用它，而不仅仅是 $。问题在于我们使用了其他一些依赖 $ 的 3rd 方工具，而加载广告软件的 $ 是不同的（旧）版本。因此，正确保存 $ 很重要。

有任何想法吗？我知道 JQuery 的 noConflict() 方法，但粗略一瞥后认为它不符合要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:17:13.600

最终，我们决定在收到任何 ajax 响应时重新建立我们的 JQuery 完整性（即在执行打开模式代码之前）。我们所有的 ajax 东西都包装在我们自己的处理程序中，所以这很容易全面注入。

基本上;

我们已经“保存”了原始的 JQuery - 由于我们的处理程序，我们已经将它放在了范围内，但它可以在加载后轻松放入单独的全局（如 $$）中。在我们的 ajax 响应处理程序中，我们有一个相当简单的检查；

```
if (window.$ !== $$) {
    window.$ = window.jquery = window.jQuery = $$;
} 
```

这会将全局 jquery 重置为应有的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:26:17.263

好吧，这只是一种解决方法，而不是一个完整的解决方案。
您可以在此处尝试多种操作
1\. 如果您可以控制广告软件加载的内容，那么只需`if(!$)`在他们尝试加载 jquery 的地方放入类似的内容
2\. 尝试在页面末尾加载您的插件
3.即使结束页面不工作。`script tag`尝试在 Jquery 文档就绪事件中将链接（a using ）注入`document.write`到插件 CDN。这将确保在所有 jquery 都已加载（不是首选）时最后加载插件代码。

# javascript - 如何将 dojo/aspect 连接到小部件？

> ID：13478431
> 
> 赞同：2
> 
> 时间：2012-11-20T17:12:36.323
> 
> 标签：javascript, dojo

我无法弄清楚如何将 dojo/aspect 与小部件一起使用。

考虑以下：

```
require( [ 'dijit/form/Button' ],
function( Button)
{
    var myButton = new Button({label: 'Click me!'});
} ); 
```

如何连接到按钮的 postCreate() 或 startup() 方法以发现它何时被渲染？

当我可以向方法添加建议时似乎没有意义。在这里查看评论：

```
require( [ 'dijit/form/Button', 'dojo/aspect' ],
function( Button, aspect )
{
    // I cannot use aspect.after() here as I have no instance yet
    var myButton = new Button({label: 'Click me!'});
    // ...but I cannot do it here either as the lifecycle has already kicked off
} ); 
```

（该按钮只是为了更容易解释问题。我的实际问题涉及包含其他小部件的小部件，因此在执行操作之前我需要知道全部内容何时呈现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:31:37.053

通过以编程方式实例化小部件，小部件的`postCreate`方法被隐式调用。据我所知，`postCreate`在小部件生命周期中连接到阶段并不容易（或真正有充分的理由）。

`startup`，另一方面，您需要在以编程方式实例化小部件时显式调用：

```
var myButton = new Button({label: 'Click me!'});
aspect.after(myButton, 'startup', function(){
    console.log('startup called');
});
//place button in page (since startup implies the widget has been placed in the page
myButton.placeAt(someDomNode)
myButton.startup(); 
```

如果你想在一个小部件的 postCreate 生命周期中工作，你可能想要子类化那个小部件。这样做看起来像这样：

```
//in a file like my/custom/widget.js
define(['dojo/_base/declare','dijit/form/Button'],function(declare,Button){
  return declare('my.custom.widget',[Button],{
    postCreate:function(){
      //we still want to call the parent class's postCreate function
      this.inherited(arguments);
      //create some other widgets as well
    }
  });
}); 
```

# java - Java中的重载方法

> ID：13478435
> 
> 赞同：0
> 
> 时间：2012-11-20T17:12:45.730
> 
> 标签：java, methods, overloading

```
class Overload{

  public static void main(String args[]) {
    int[]  number={1,2,3,4,5,6,7,8,9,10};   
    int [] num={1,2,3,4,5};
    int i;
    int sum=0;
    sum = f(number);   
    int sum1= f(num);
    System.out.println("The sum is" +sum + ".");
    System.out.println("The sum is" +sum1 + ".");
  }

  public static int f(int[] value) {
    int i, total = 0;
    for(i=0; i<10; i++) {
      total = total + value[ i ];
    }
    return (total);
  }

  public static int f(int... x) {
    int i, total = 0;
    for(i=0; i<10; i++) {
      total = total + x[ i ];
    }
    return (total);
  }

} 
```

在编译上述程序时，我收到错误消息

```
C:\Program Files\Java\jdk1.7.0_09\bin>javac Overload.java
Overload.java:30：错误：不能在 Overload 中同时声明 f(int...) 和 f(int[])
公共静态int f（int ... x）

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:14:28.517

```
public static int f(int... x) 
```

只不过是：-

```
public static int f(int[] x) 
```

唯一的区别是它不一定需要传递参数。当您传递单个元素时，它们会在内部转换为数组。所以，你实际上`array`只是通过了一个。

而后者需要一个论点。至少是一个空数组。

如果您将数组作为参数传递，那么这两种方法都有资格被调用。

所以调用：

```
f(new int[] {1, 2}); 
```

可以对这两种方法进行。因此，存在歧义。

* * *

但是，`f(5)`只能对第一种方法进行调用。因为，`5`不能分配给数组类型。因此，只有在传递数组时才会出现歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:14:18.437

您的**编译器**认为**将变量参数作为参数**的方法可能与**将数组作为参数**的方法相同。即，它认为存在具有相同数量参数的重复方法，这违反了重载规则。

```
public void m1(int[] arr){

}

public void m1(int...i){

} 
```

基本相同。唯一的区别是**var-args**可以接受任意数量的 int 变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:21:48.797

方法签名是相同的。因此过载是不可能的。更改方法签名。

[wikipedia](http://en.wikipedia.org/wiki/Type_signature#Java_2)中有一个 Java 中方法签名的定义。

> 在 Java 编程语言中，方法签名是方法名称及其参数的数量和类型。返回类型和抛出的异常不被视为方法签名的一部分。

在您的代码中，您有两个具有相同签名的方法`f(int[] value)`。另一个函数`int...`用作参数，但它等效于`int[]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T18:45:22.227

方法重载是java的一项功能，它允许您使用多个具有相同名称但参数列表不同的方法

**方法重载也称为静态多态**

```
Argument list must be differ 
 1) Numbers of Parameters "not the same parameters"
 2) Data type of parameters "does not have the same datatype of parameters" 
 3) Sequence of Datatype of parameters "its may be possible to change the sequence the of datatype." 
```

方法重载具有相同的参数，那么它必须是返回类型不同假设

```
 public class Test
 {

   public int printVal(int i,int j)
   {
     System.out.println("Integer Return type")
      return i*j;
   }

   public double printVal(int i,int j)
   {
     System.out.println("Double Return type")
      return i*j;
   }

 } 
```

在上面的类中，我们有两个方法，一个具有 int 返回类型，另一个具有 double 返回类型，因此可以在方法重载中使用。

**它意味着数据类型的序列**

```
public class Test
{
  public void display(String surname ,String name)
  {
     System.out.println("Surname = "+surname);
     System.out.println("Name    = "+name);

  }

  public void display(String name,String surname)
  {

     System.out.println("Name    = "+name);
     System.out.println("Surname = "+surname);

  }
} 
```

在上面的示例中，我们有两个方法作为相同的数据类型，但其顺序不同，这种情况也称为方法重载..

# c# - 列表和排序

> ID：13478436
> 
> 赞同：1
> 
> 时间：2012-11-20T17:12:50.337
> 
> 标签：c#, list

基本上我在这里要做的是创建自己的结构并通过获取用户输入来利用它，将其添加到列表中，然后以不同的方式（ID等）对其进行排序。

我认为我正确地制作了结构，但我不知道如何比较这两个学生实例，按 ID 对它们进行排序，然后将它们打印出来（按 ID 排序）到控制台。

有任何想法吗？我想我正朝着正确的方向前进。

```
 namespace App26
{
    public struct Student
    {
        public String first, last;
        public double ID;

        public Student(String first, String last, double ID)
        {
            this.first = first;
            this.last = last;
            this.ID = ID;
        }
    }

    class IDCompare : IComparer<Student>
    {
        public int Compare(Student a, Student b)
        {
            return a.first.CompareTo(b.f);
        }
    }

    class Program
    {

        static void Main(string[] args)
        {
            String firstname, lastname, first, last;
            double num, IDnum;

            //First person   
            Console.WriteLine("Please enter first name");
            firstname = Console.ReadLine();
            Console.WriteLine("Please enter last name");
            lastname = Console.ReadLine();
            Console.WriteLine("Please enter ID");
            IDnum = Convert.ToDouble(Console.ReadLine());
            Console.WriteLine();

            //Second Person
            Console.WriteLine("Please enter first name");
            first = Console.ReadLine();
            Console.WriteLine("Please enter last name");
            last = Console.ReadLine();
            Console.WriteLine("Please enter ID");
            num = Convert.ToDouble(Console.ReadLine());
            Console.WriteLine();

            List<Student> list = new List<Student>();
            Student person1 = new Student(firstname, lastname, IDnum);
            //Student person2 = new Student(first, last, num);
            list.Add(person1);
            list.Add(person2);
            list.Sort();

            foreach (Student i in list)
            Console.WriteLine(i);
        }        
       }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:15:33.680

您应该使用下面的代码进行排序

```
list.Sort(new IDCompare()); 
```

还

```
return a.first.CompareTo(b.f); 
```

似乎不正确。请同时检查您的代码编译时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:28:13.453

您`IDCompare`不是在比较 ID，而是首先比较 ID（我假设是名称）。你应该像这样改变它：

```
class IDCompare : IComparer<Student>
{
    public int Compare(Student a, Student b)
    {
        return a.ID.CompareTo(b.ID);
    }
} 
```

然后像这样调用你的排序：

```
list.Sort(new IDCompare()); 
```

请记住，ID 通常是整数，而不是双精度数（尽管我不知道您的 ID 是什么意思）。

如果你想使用这个

```
 foreach (Student i in list)
            Console.WriteLine(i); 
```

我建议您覆盖`ToString()`结构中的方法（为什么不使用类？）

```
public override string ToString()
{
       return ID.ToString() + " " + first + " " + last + " ";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T18:17:11.703

您也可以非常轻松地使用 Linq。然后你不需要实现任何比较器。

```
foreach (Student entry in myList.OrderBy(student => student.ID))
  Console.Write(entry.Name); 
```

也可以按第二个属性排序。您也可以使用降序排序。

```
foreach (Student entry in myList.OrderBy(student => student.ID).ThenBy(student => student.Name))
  Console.Write(entry.Name); 
```

# ios - AFNetworking QUEUE 与 pdf、png、mp4 文件

> ID：13478437
> 
> 赞同：1
> 
> 时间：2012-11-20T17:12:50.810
> 
> 标签：ios, json, download, queue, afnetworking

我有一台服务器，我得到了响应：

```
 {"products": [
    {
      "product_id": "1170",
      "name": "zzzz®",
      "sort_order": 0,
      "brand": "zzzas",
      "product_category_id": "1090",
      "location_ids": [
        "1078"
      ],
      "icon_url": "http://zzzzz.com/media/2502/zzzz.png",
      "icon_date": "Wed, 07 Nov 2012 14:03:47 GMT",
      "thumbnail_url": "http://zzzz.com/media/2591/zzdfs.png",
      "thumbnail_date": "Wed, 07 Nov 2012 14:04:02 GMT"
    },
    {
      "product_id": "1126",
      "name": "ddddd®",
      "sort_order": 1,
      "brand": "dddsas",
      "product_category_id": "1110",
      "location_ids": [
        "1095"
      ],
      "icon_url": "http://zzzzz.com/media/2507/ddddd.png",
      "icon_date": "Wed, 07 Nov 2012 14:03:48 GMT",
      "thumbnail_url": "http://zzzzz.com/media/2596/sssds.png",
      "thumbnail_date": "Wed, 07 Nov 2012 14:04:05 GMT"
    }
]} 
```

我正在使用该代码来解析 JSON

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"link"]]; AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

NSDictionary *jsonDict = (NSDictionary *) JSON;
   NSArray *products = [jsonDict objectForKey:@"products"];
  [products enumerateObjectsUsingBlock:^(id obj,NSUInteger idx, BOOL *stop){
    NSString *productIconUrl = [obj objectForKey:@"icon_url"];
}];
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) { NSLog(@"Request Failure Because %@",[error userInfo]); }];

[operation start]; 
```

如何获取所有 icon_url 并将它们分配到 AFnetworking 队列以进行序列化下载。响应中的某些文件也是 pdf 或 mp4 文件，因此我希望所有这些文件作为请求打包在一个数组中，并一个一个地下载它们。

我搜索了 AFClient，但可以找到任何源代码或示例用法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T07:15:36.887

您应该在项目中遵循 MVC 架构。根据您的 json 格式，以下是我对您的建议。

所以首先你应该创建一个模型名称“产品”。“产品”应该具有您的 json 数据 iconUrl、productId、productName、thumnailURL 等属性。

所以请看下面的解析代码并首先获取产品列表。

> ```
> NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL
> URLWithString:@"link"]];  AFJSONRequestOperation *operation =
> [AFJSONRequestOperation JSONRequestOperationWithRequest:request
> success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
> {
> 
>     NSDictionary *jsonDict = (NSDictionary *) JSON;    
>     NSArray *products = [jsonDict objectForKey:@"products"];
> 
>     NSMutableArray *productsList = [[NSMutableArray alloc] init];
>     Product *product = [[Product alloc] init];
> 
>     [products enumerateObjectsUsingBlock:^(id obj,NSUInteger idx, BOOL *stop){
>         product.icon_url= [obj objectForKey:@"icon_url"];
>         [productsList addObject:product];
>     }]; 
> 
> } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON { 
>     NSLog(@"Request Failure Because %@",[error userInfo]); 
> }];
> 
> [operation start]; 
> ```

现在您有了完整的产品列表。然后您使用以下代码迭代列表并下载图像数据

> ```
> NSData *imageData = [NSData dataWithContentsOfURL:
>                             [NSURL URLWithString:product.iconUrl]]; 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:37:34.110

您应该能够使用 JSON 循环访问每个 URL 并为每个 URL 添加异步下载。

使用 for 循环很容易做到。

```
for (NSDictionary *dict in [jsonDict objectForKey:@"products"]) {
    NSURL *fileURL = [NSURL URLWithString:[dict valueForKey:@"icon_url"];
    // Some code to start the download.
} 
```

我会在 AFNetworking 的 Github 页面上查看[这个示例。](https://github.com/AFNetworking/AFNetworking#file-upload-with-progress-callback)

您应该能够使用[此处](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPRequestOperation.html)`AFHTTPRequestOperation`记录的文件设置下载。

要设置请求，您可以执行以下操作：

```
NSURL *baseURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@://%@", u.scheme, u.host]];
AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:baseURL];
NSString *path = [url stringByReplacingOccurrencesOfString:s withString:@""];
NSURLRequest *request = [client requestWithMethod:@"GET" path:path parameters:nil];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    // Do success stuff
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    // Do fail stuff
}];
[operation start]; 
```

可能有一种方法可以优化其中的一些，但这是一般的想法。

# cakephp - cakephp ControllerTest

> ID：13478439
> 
> 赞同：3
> 
> 时间：2012-11-20T17:13:00.797
> 
> 标签：cakephp, testing

我是一个尝试为 cakephp 书的博客教程编写 ControllerTest 的菜鸟。完成这项任务后，我寻找了一个我可以适应的好例子。这本书提供了以下示例： [http](http://book.cakephp.org/2.0/en/development/testing.html#testing-controllers) ://book.cakephp.org/2.0/en/development/testing.html#testing-controllers 所以我在 /app/Controller/ 中创建了一个 ArticlesController.php 文件，在 /app/Controller/ 中创建了一个 ArticlesControllerTest.php /app/测试/案例/控制器/

我的 ArticlesController.php 的内容是：

```
<?php
class ArticlesController extends ControllerTestCase {
//public $fixtures = array('app.article');

public function testIndex() {
    $result = $this->testAction('/articles/index');
    debug($result);
}

public function testIndexShort() {
    $result = $this->testAction('/articles/index/short');
    debug($result);
}

public function testIndexShortGetRenderedHtml() {
    $result = $this->testAction(
        '/articles/index/short',
        array('return' => 'contents')
    );
    debug($result);
}

public function testIndexShortGetViewVars() {
    $result = $this->testAction(
        '/articles/index/short',
        array('return' => 'vars')
    );
    debug($result);
}

public function testIndexPostData() {
    $data = array(
        'Article' => array(
            'user_id' => 1,
            'published' => 1,
            'slug' => 'new-article',
            'title' => 'New Article',
            'body' => 'New Body'
        )
    );
    $result = $this->testAction(
        '/articles/index',
        array('data' => $data, 'method' => 'post')
    );
    debug($result);
} 
```

}

我的 ArticlesController.php 的内容是：

```
<?php
class ArticlesControllerTest extends ControllerTestCase {
    public $fixtures = array('app.article');

    public function testIndex() {
        $result = $this->testAction('/articles/index');
        debug($result);
    }

    public function testIndexShort() {
        $result = $this->testAction('/articles/index/short');
        debug($result);
    }

    public function testIndexShortGetRenderedHtml() {
        $result = $this->testAction(
           '/articles/index/short',
            array('return' => 'contents')
        );
        debug($result);
    }

    public function testIndexShortGetViewVars() {
        $result = $this->testAction(
            '/articles/index/short',
            array('return' => 'vars')
        );
        debug($result);
    }

    public function testIndexPostData() {
        $data = array(
            'Article' => array(
                'user_id' => 1,
                'published' => 1,
                'slug' => 'new-article',
                'title' => 'New Article',
                'body' => 'New Body'
            )
        );
        $result = $this->testAction(
            '/articles/index',
            array('data' => $data, 'method' => 'post')
        );
        debug($result);
    }
} 
```

我从书中复制了这些代码，并对固定装置进行了注释。运行测试给了我以下错误：

错误：找不到类“AppController”
文件：/Applications/MAMP/htdocs/cake/app/Controller/ArticlesController.php
行：3

大法错了吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T15:11:03.690

尝试将以下内容添加到 ArticlesController 文件的顶部：

```
App::uses('AppController', 'Controller'); 
```

# asp.net - 如何将列表框中的多个选定项目传递给 ObjectDataSource 中的选择参数

> ID：13478440
> 
> 赞同：0
> 
> 时间：2012-11-20T17:13:02.617
> 
> 标签：asp.net, listbox, reportviewer, objectdatasource

我有一个列表框，用户可以从中选择多个项目，但我需要将这些多个选定项目传递给对象数据源中的选择参数，然后它将触发对 reportviewer 报告的查询。

现在，我可以很容易地让它适用于一个选定的项目，但我如何让它适用于多个项目呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T17:40:00.247

这是一个旧帖子，但可能对其他人有所帮助。ListItemCollection 不可序列化，因此您不能将 Items 属性用作 ControlParameter。

在阅读了一些令我不满意的解决方案后，我将 ListBox 类扩展为：

```
[ToolboxData("<{0}:ListBoxExtended runat=server></{0}:ListBoxExtended>")]
public class ListBoxExtended : ListBox
{
    public IEnumerable<string> SelectedValues
    {
        get
        {
            var results = new List<String>();
            if (SelectionMode == ListSelectionMode.Single)
            {
                results.Add(SelectedValue);
            }
            else
            {                    
                foreach (ListItem item in Items)                    
                    if (item.Selected)
                        results.Add(item.Value);                    
            }
            return results;
        }
    }

} 
```

现在，您可以在 ObjectDatasource 的 ControlParameter 中使用 SelectedValues 新属性

请记住在 .aspx 中注册 ListBoxExtended 命名空间和程序集

```
<%@ Register Assembly="MyExtendedControls" 
             Namespace="MyControls" TagPrefix="custom" %> 
```

并替换`<aspnet:Listbox ...>`为：

```
<custom:ListBoxExtended  ... > ... </custom:ListBoxExtended> 
```

# c++ - C++ - 删除二维数组

> ID：13478447
> 
> 赞同：1
> 
> 时间：2012-11-20T17:13:44.770
> 
> 标签：c++, visual-c++

我在 VC++ 中工作，但这是一个基本的 C++ 问题......我对 C++ 很陌生，从来不用担心在 Java 中删除......无论如何，经过一些研究，我相信我找到了正确的方法做一个删除，但不起作用......我在一个函数中使用了一些临时的二维数组，在结束函数之前，我需要删除它们。这是代码：

```
int** a;
a = new int*[b/2];
for(int i = 0; i < (b/2); i++)
{
    a[i] = new int[b];

}

    // some code here. Not changing the b variable!

for(int i = 0; i < (b/2); i++)
{
    // error happens here
    delete[] a[i];
}
delete[] a; 
```

运行程序后，我收到“检测到堆损坏”错误 - 粘贴打印屏幕： ![错误打印屏幕](../Images/90f4a8e1a62485cb7b9b1a855134b968.png)

知道问题出在哪里吗？

谢谢你。

* * *

更新

我正在发布调试器屏幕截图，发生在我收到错误之前。（变量a的真名是“vkljucenost”：

![调试器截图](../Images/a1834a5dcb610b9f8b7118bea8c728c6.png)

* * *

更新

由于有些人要求我发布更多代码，因此我发布了整个功能代码：

```
int** CVaja3KruskalView::CalcKruskal(EnosSez* seznam, int dimenzijaMatr)
{
    int** rezultat; // results array
    int stRezultatov = 0; // number of connections
    rezultat = new int*[dimenzijaMatr-1];
    for(int i = 0; i < (dimenzijaMatr-1); i++)
    {
        rezultat[i] = new int[2]; // shranjujem p in q
        rezultat[i][0] = -1;
        rezultat[i][1] = -1;
    }

    int** vkljucenost;
    int* dolzVkljuc = new int[dimenzijaMatr/2]; // last list elements
    vkljucenost = new int*[dimenzijaMatr/2];
    for(int i = 0; i < (dimenzijaMatr/2); i++)
    {
        vkljucenost[i] = new int[dimenzijaMatr];
        dolzVkljuc[i] = -1; // the i-list is empty
    }

    EnosSez* tmp = seznam;
    int pVkljuc;
    int qVkljuc;
    while(tmp!=NULL)
    {
        pVkljuc=Vkljuceno(vkljucenost, dolzVkljuc, tmp->p, dimenzijaMatr);
        qVkljuc=Vkljuceno(vkljucenost, dolzVkljuc, tmp->q, dimenzijaMatr);

        if(pVkljuc==qVkljuc && pVkljuc != -1) 
        {} else if (pVkljuc!=qVkljuc && pVkljuc != -1 && qVkljuc != -1) 
            rezultat[stRezultatov][0] = tmp->p;
            rezultat[stRezultatov][1] = tmp->q;
            stRezultatov++;

            int prvi = min(pVkljuc,qVkljuc);
            int drugi = max(pVkljuc,qVkljuc);
            // prestavimo drugi seznam v prvega (seznama združimo)
            for(int i = 0; i <= dolzVkljuc[drugi]; i++)
            {
                vkljucenost[prvi][dolzVkljuc[prvi]] = vkljucenost[drugi][i];
                dolzVkljuc[prvi]++;
            }
            dolzVkljuc[drugi] = -1; // spraznemo drugi seznam
        } else if((pVkljuc != -1 && qVkljuc == -1) || (pVkljuc == -1 && qVkljuc != -1)) 
        {
            rezultat[stRezultatov][0] = tmp->p;
            rezultat[stRezultatov][1] = tmp->q;
            stRezultatov++;

            if(pVkljuc == -1)
            {
                vkljucenost[qVkljuc][dolzVkljuc[qVkljuc]] = tmp->p;
                dolzVkljuc[qVkljuc]++;
            } else
            {
                vkljucenost[pVkljuc][dolzVkljuc[pVkljuc]] = tmp->q;
                dolzVkljuc[pVkljuc]++;
            }
        } else 
        {
            rezultat[stRezultatov][0] = tmp->p;
            rezultat[stRezultatov][1] = tmp->q;
            stRezultatov++;

            int prviPrazen = 0; 
            while(dolzVkljuc[prviPrazen] > -1)
            {
                prviPrazen++;
            }
            dolzVkljuc[prviPrazen] = 2;
            vkljucenost[prviPrazen][0]=tmp->p;
            vkljucenost[prviPrazen][1]=tmp->q;
        }

        tmp=tmp->next;
    }

    //destruction
    delete[] dolzVkljuc;
    for(int i = 0; i < (dimenzijaMatr/2); i++)
    {
        // error happening here!!!
        delete[] vkljucenost[i];
    }
    delete[] vkljucenost;

    return rezultat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:42:18.957

正如评论中所建议的，问题出在其他代码中，而不是删除节点。我没有调试代码，但是，正如评论者所建议的那样，使用 std::vector 而不是数组 - 首先检查使用向量实际上与使用数组具有相同的效率。

# javascript - 读取 SharePoint 列表并通过 JavaScript 函数将数据放在 HTML 文件中

> ID：13478449
> 
> 赞同：6
> 
> 时间：2012-11-20T17:13:48.623
> 
> 标签：javascript, html, sharepoint, sharepoint-list

我有一个 SharePoint URL，它只是一个包含一些数据列和行的 SharePoint 列表。

我想从该特定 URL 读取该信息，并通过 JavaScript 函数将数据放在 HTML 文件中。

我完全没有 JavaScript 和 HTML5 的经验，所以我不知道如何调用这些函数来检索数据。

这就是我到目前为止所拥有的，它根本不起作用：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
</head>

<script type="text/javascript" src="filelink/jquery-1.6.1.min.js"></script>
<script type="text/javascript" src="filelink/jquery.SPServices-0.6.2.min.js"></script>
<script language="javascript" type="text/javascript">
    $(document).ready(function() {
      $().SPServices({
        operation: "GetListItems",
        webURL: "http://myURL.aspx",
        async: false,
        listName: "Announcements",
        CAMLViewFields: "<ViewFields><FieldRef Name='Title' /></ViewFields>",
        completefunc: function (xData, Status) {
          $(xData.responseXML).SPFilterNode("z:row").each(function() {
            var liHtml = "<li>" + $(this).attr("ows_Title") + "</li>";
            $("#tasksUL").append(liHtml);
          });
        }
      });
    });
</script>
<ul id="tasksUL"/>  
<body>
</body>
</html> 
```

如果我尝试打开 index.html 没有任何反应，所以我不知道如何调用我的 HTML 文件上的函数。另外，我不知道如何在 HTML 文件中定义 SP.ClientContext 。

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:19:11.517

[SPServices 库](http://spservices.codeplex.com/)会很容易地为您做到这一点。

你会想要使用[这个](http://spservices.codeplex.com/wikipage?title=GetListItems&referringTitle=Lists)调用。我通常将它封装在我自己的函数中以使代码更漂亮，尤其是在我进行大量 AJAX 列表查询时。

基本上，SharePoint 将返回一个丑陋的 XML 文档，其中包含[Microsoft 文档](http://msdn.microsoft.com/en-us/library/lists.lists.getlistitems%28v=office.14%29.aspx)定义的所有列表项。您将使用 SPServices 遍历此文档，如下所示：

```
<script type="text/javascript" src="filelink/jquery-1.6.1.min.js"></script>
<script type="text/javascript" src="filelink/jquery.SPServices-0.6.2.min.js"></script>
<script language="javascript" type="text/javascript">

$(document).ready(function() {
  $().SPServices({
    operation: "GetListItems",
    async: false,
    listName: "Announcements",
    CAMLViewFields: "<ViewFields><FieldRef Name='Title' /></ViewFields>",
    completefunc: function (xData, Status) {
      $(xData.responseXML).SPFilterNode("z:row").each(function() {
        var liHtml = "<li>" + $(this).attr("ows_Title") + "</li>";
        $("#tasksUL").append(liHtml);
      });
    }
  });
});
</script>
<ul id="tasksUL"/>` 
```

逐行：
`<script type="text/javascript" src="filelink/jquery-1.6.1.min.js"></script>`
SPServices 需要 JQuery
`<script type="text/javascript" src="filelink/jquery.SPServices-0.6.2.min.js"></script>`
包括 SPServices
`$(document).ready(function() {`
“加载 DOM 时，执行此函数”
`$().SPServices({`
“这是一个 SPServices 函数”
`operation: "GetListItems",`
“我们正在使用 'GetListItems' Web 服务”
`async: false,`
“不是异步的，现在就做”
`listName: "Announcements",`
“我们're using the list 'Announcements"
`CAMLViewFields: "<ViewFields><FieldRef Name='Title' /></ViewFields>",`
别管这行
`completefunc: function (xData, Status) {`
"当请求完成时运行这个函数。数据作为xData传递，完成状态作为Status传递"
`$(xData.responseXML).SPFilterNode("z:row").each(function() {`
"取响应字符串，只取"行” XML 节点。对于这些节点中的每一个，运行此函数...”
`var liHtml = "<li>" + $(this).attr("ows_Title") + "</li>";`
“创建一个名为 liHtml 的变量，它等于一个 li 标记和 XML 属性 ows_Title”
`$("#tasksUL").append(liHtml);`
“将此列表项附加到 ID 为 'tasksUL' 的元素”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:09:47.803

你的代码有很多问题。

首先，它只能在 SharePoint 页面中工作，而不是像您使用 SP.ClientContext 等 SharePoint 函数那样独立。

其次，片段中似乎存在错误。例如，我认为`this.collList`实际上应该是`var collList`.

也许试试这个其他参考（但同样它只能在 SharePoint 2010 或 2013 页面中工作）：

[http://msdn.microsoft.com/en-us/library/hh185007(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/hh185007(v=office.14).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T13:25:01.807

实际上，您使用的代码是用于由 Sympmarc 编写的 SPServices 库，并且在其文档中提到它将在 SharePoint Context 上运行的页面中使用，因为它使用 __REQUESTDIGEST 后变量进行调用，这将不可用普通的 HTML5 页面，我可以给你的选项是：-

1) 在 SharePoint 站点上启用基本 Http 身份验证，然后在您的服务调用中使用 jquery 的 $ajax 函数和基本身份验证凭据。

2）使用代码创建一个 http 处理程序来完成您的工作，然后从 jquery 传递 json 以从该处理程序中获取数据。

# magento - Magento 通过本地 xml 向产品抵押品添加部分无法正常工作

> ID：13478458
> 
> 赞同：2
> 
> 时间：2012-11-20T17:14:28.873
> 
> 标签：magento, magento-layout-xml

我已按照本文将产品评论添加到产品页面的附属部分： [http ://www.crearegroup-ecommerce.co.uk/blog/magento-tutorials/product-reviews-on-product-view-page .php](http://www.crearegroup-ecommerce.co.uk/blog/magento-tutorials/product-reviews-on-product-view-page.php)

我已将以下代码添加到我的 local.xml：

```
<catalog_product_view translate="label">
    <reference name="content">
       <block type="review/product_view_list" name="product.info.product_additional_data" as="product_review" template="review/product/view/list.phtml">
          <block type="review/form" name="product.review.form" as="review_form"/>
       </block>
    </reference> 
```

以及 view.phtml 中的以下代码：

```
<?php echo $this->getChildHtml('product_review') ?> 
```

上述内容只是在对 getChildHtml 的其他一些调用之间添加的（在附属部分中）

**问题：**评论和表格被添加到页面末尾而不是附属部分？

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T00:06:47.190

将参考名称从 更改`content`为`product.info`。当您将其添加到内容节点（这是一个`core/text_list`块）中时，它会自动将其附加到底部。这就是为什么您需要将它放在`product.info`节点内，然后在模板中引用它。

# mysql - MySQL Select 3 个月内没有订单的客户

> ID：13478459
> 
> 赞同：1
> 
> 时间：2012-11-20T17:14:32.040
> 
> 标签：mysql, date, max

我有一个表（订单），其中存储了订单的所有数据。

我想列出所有从我们这里下订单的客户，但仅限于那些没有下订单的客户，比如说 3 个月。

以下是数据库（订单）中的相关表信息：

order_id、customer_id、名字、姓氏、添加日期

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:18:20.457

假设您只需要 customer_id、名字和姓氏，并且 date_added 是一些有效的时间字段，如时间戳、日期或日期时间（不是字符串）。

```
SELECT o.customer_id, o.firstname, o.lastname, MAX(o.date_added) AS latest_date FROM `order` o 
  LEFT JOIN `order` o2 ON o.customer_id = o2.customer_id 
                    AND o2.date_added >= NOW() - INTERVAL 3 MONTH 
 WHERE o2.order_id IS NULL
 GROUP BY o.customer_id, o.firstname, o.lastname 
```

注意表名“order”上的反引号。这是因为`ORDER`是 Mysql 中的保留字。尽量避免使用保留字来命名数据库、表或列——它总是会咬你一口。

可以这样想，给我所有的用户，包括他们所有的订单信息，如果订单在 3 个月内，那么只显示那些没有订单的。

如果您为您的客户表提供架构，我可以使这更清洁并避免`group by`.

# python - imshow中的对数y标度

> ID：13478460
> 
> 赞同：6
> 
> 时间：2012-11-20T17:14:36.190
> 
> 标签：python, matplotlib, logarithm

> **可能重复：**
> [在 python 中使用 matplotlib 绘制对数轴](https://stackoverflow.com/questions/773814/plot-logarithmic-axes-with-matplotlib-in-python)

我有一个 50*1050 矩阵，其中维度 50 代表频率，1050 代表时间。我尝试使用 imshow 绘制它，我得到了这张图片：

![http://ge.tt/26MVT0S/v/0?c](../Images/74a3b72407dc6e55a2fdbfdfc7e9037e.png)

但我想突出较低的频率，这意味着我需要对 y 刻度使用对数刻度。我搜索了很多，但我还没有找到任何有效的解决方案。

我需要的是矩阵的第一行应该占据图像的最大百分比，并且随着行的增加，如果它们在图像中占据的行的宽度应该减小。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:09:56.777

更新轴：

```
a = list(axis())
a[3] = 10
axis(a)
yscale('log') 
```

# c# - 找不到用于解密的证书和私钥

> ID：13478461
> 
> 赞同：4
> 
> 时间：2012-11-20T17:14:38.140
> 
> 标签：c#, .net, certificate, code-signing

我从 GlobalSign 获得了代码签名证书，并希望在 C# .NET 中对我的程序集进行签名。但是，当我按照微软的手册（[http://msdn.microsoft.com/en-us/library/ms247123(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms247123(v=vs.80).aspx)），在我应该浏览我的证书并添加它的步骤，我收到错误消息：“找不到用于解密的证书和私钥。” 没有进一步的信息。证书位于 .pfx 文件中。我在谷歌上做了一些研究，但没有发现任何有用的东西或对我的问题有用。

# php - PHP BitWise 权限和角色，或替代方案

> ID：13478462
> 
> 赞同：2
> 
> 时间：2012-11-20T17:14:39.673
> 
> 标签：php, permissions, bit-manipulation, bit, user-permissions

我正在做我的第一个应用程序，其中包含多个用户的权限和角色。我的理解是最好的方法是使用 BitWise 格式。这是真的，还是有更好的选择？

这是我当前的测试代码，我得到了一个相当奇怪的效果。如果有人能解释为什么会这样，那将不胜感激。

例子：

```
$user = array('permissions' => 1); // This *should* return ONLY READ, (except it shows all)
$user = array('permissions' => 8); // Shows correct, FULL resources. 
```

您可以使用它来测试代码... [http://writecodeonline.com/php/](http://writecodeonline.com/php/)

```
define("PERM_R", 1);  # Read    
define("PERM_W", 2);  # Write   
define("PERM_E", 4);  # Edit    
define("PERM_D", 8);  # Delete  

define("ROLE_GUEST",  PERM_R);
define("ROLE_EDITOR", ROLE_GUEST | PERM_W | PERM_E);
define("ROLE_FULL",   ROLE_EDITOR | PERM_D);

function hasAccess($user, $action) {
    if( is_array($user) ) {
        return $user['permissions'] & $action;
    } else if ( is_int($user) ) {
        return $user & $action;
    }
}

$user = array('permissions' => 1);
echo "USER PERMISSIONS: ". $user['permissions'] ."<br /><br />";

# TEST PERMS
if(hasAccess($user, PERM_R)) {
    echo PERM_R;
    echo " - Yes you can see READ <br />";
}
if(hasAccess($user, PERM_R | PERM_W)) {
    echo PERM_R | PERM_W;
    echo " - Yes you can see READ & WRITE<br />";
}
if(hasAccess($user, PERM_R | PERM_W | PERM_E)) {
    echo PERM_R | PERM_W | PERM_E;
    echo " - Yes you can see READ & WRITE & EDIT<br />";
}
if(hasAccess($user, PERM_R | PERM_W | PERM_E | PERM_D)) {
    echo PERM_R | PERM_W | PERM_E | PERM_D;
    echo " - Yes you can see READ & WRITE & EDIT & DELETE<br />";
}

# TEST ROLES
if(hasAccess($user, ROLE_GUEST)) {
    echo ROLE_GUEST;
    echo " - Yes, You Are A GUEST <br />";
}
if(hasAccess($user, ROLE_EDITOR)) {
    echo ROLE_EDITOR;
    echo " - Yes, You Are A EDITOR <br />";
}
if(hasAccess($user, ROLE_FULL)) {
    echo ROLE_FULL;
    echo " - Yes, You Are A FULL <br />";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:35:21.757

问题是您只是简单地返回按位的结果`&`，对于您的所有测试，至少`1/true`是因为所有用户都有`R`权限。

1.  只输入一个权限`hasAccess()`，停止使用`|`。
2.  Write a new function to determine the user level that does an integer comparison.

# node.js - 如何将 JQuery AJAX 请求中的数据发送到 Node.js 服务器

> ID：13478464
> 
> 赞同：20
> 
> 时间：2012-11-20T17:14:44.487
> 
> 标签：node.js, jquery, request

**我想要做什么：**
只需使用 jquery ajax 请求将一些数据（例如 json）发送到 node.js http 服务器。

出于某种原因，我无法在服务器上获取数据，因为它永远不会触发请求的“数据”事件。

**客户端代码：**

```
$.ajax({
    url: server,
    dataType: "jsonp",
    data: '{"data": "TEST"}',
    jsonpCallback: 'callback',
    success: function (data) {
        var ret = jQuery.parseJSON(data);
        $('#lblResponse').html(ret.msg);
    },
    error: function (xhr, status, error) {
        console.log('Error: ' + error.message);
        $('#lblResponse').html('Error connecting to the server.');
    }
}); 
```

**服务器代码：**

```
var http = require('http');
http.createServer(function (req, res) {

    console.log('Request received');

    res.writeHead(200, { 'Content-Type': 'text/plain' });
    req.on('data', function (chunk) {
        console.log('GOT DATA!');
    });
    res.end('callback(\'{\"msg\": \"OK\"}\')');

}).listen(8080, '192.168.0.143');
console.log('Server running at http://192.168.0.143:8080/'); 
```

正如我所说，它永远不会进入请求的“数据”事件。

**评论：**
1\. 它记录“收到请求”消息；
2.响应很好，我可以在客户端处理它，有数据；

有什么帮助吗？我错过了什么吗？

谢谢大家。

**编辑：**
根据答案评论了代码的最终版本：

**客户端代码：**

```
$.ajax({
type: 'POST' // added,
url: server,
data: '{"data": "TEST"}',
//dataType: 'jsonp' - removed
//jsonpCallback: 'callback' - removed
success: function (data) {
    var ret = jQuery.parseJSON(data);
    $('#lblResponse').html(ret.msg);
},
error: function (xhr, status, error) {
    console.log('Error: ' + error.message);
    $('#lblResponse').html('Error connecting to the server.');
}
}); 
```

**服务器代码：**

```
var http = require('http');
http.createServer(function (req, res) {

    console.log('Request received');

    res.writeHead(200, { 
        'Content-Type': 'text/plain',
        'Access-Control-Allow-Origin': '*' // implementation of CORS
    });
    req.on('data', function (chunk) {
        console.log('GOT DATA!');
    });

    res.end('{"msg": "OK"}'); // removed the 'callback' stuff

}).listen(8080, '192.168.0.143');
console.log('Server running at http://192.168.0.143:8080/'); 
```

由于我想允许跨域请求，我添加了[CORS](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)的实现。

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-20T18:00:14.693

要在 node.js 服务器端触发“数据”事件，您必须发布数据。也就是说，“数据”事件仅响应 POST 数据。将 'jsonp' 指定为数据格式会强制执行 GET 请求，因为 jsonp 在 jquery 文档中定义为：

> “jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调

以下是修改客户端以触发数据事件的方法。

### 客户：

```
<html>
<head>
    <script language="javascript" type="text/javascript" src="jquery-1.8.3.min.js"></script>
</head>

<body>
    response here: <p id="lblResponse">fill me in</p>

<script type="text/javascript">
$(document).ready(function() {
    $.ajax({
        url: 'http://192.168.0.143:8080',
        // dataType: "jsonp",
        data: '{"data": "TEST"}',
        type: 'POST',
        jsonpCallback: 'callback', // this is not relevant to the POST anymore
        success: function (data) {
            var ret = jQuery.parseJSON(data);
            $('#lblResponse').html(ret.msg);
            console.log('Success: ')
        },
        error: function (xhr, status, error) {
            console.log('Error: ' + error.message);
            $('#lblResponse').html('Error connecting to the server.');
        },
    });
});
</script>

</body>
</html> 
```

一些有用的行来帮助您调试服务器端：

### 服务器：

```
var http = require('http');
var util = require('util')
http.createServer(function (req, res) {

    console.log('Request received: ');
    util.log(util.inspect(req)) // this line helps you inspect the request so you can see whether the data is in the url (GET) or the req body (POST)
    util.log('Request recieved: \nmethod: ' + req.method + '\nurl: ' + req.url) // this line logs just the method and url

    res.writeHead(200, { 'Content-Type': 'text/plain' });
    req.on('data', function (chunk) {
        console.log('GOT DATA!');
    });
    res.end('callback(\'{\"msg\": \"OK\"}\')');

}).listen(8080);
console.log('Server running on port 8080'); 
```

节点端的数据事件的目的是构建主体 - 每个单个 http 请求都会触发多次，它接收到的每个数据块都会触发一次。这是 node.js 的异步特性——服务器在接收数据块之间做其他工作。

# python - Fabric检查以查看文件是否有数据

> ID：13478467
> 
> 赞同：3
> 
> 时间：2012-11-20T17:14:47.547
> 
> 标签：python, bash, fabric

我想检查一个文件里面是否有数据，如果它告诉我那个文件里面有什么，如果没有以“文件中没有任何内容”退出。我正在使用 Fabric 1.2 在远程服务器上执行此操作。

我正在尝试这个：

```
 def test():
        run("cat myfile.txt | awk '{print $1}' > /dir/newfile.txt")
    if run("test -s /dir/newfile.txt || cat /dir/newfile.txt"):
            else run("echo Nothing in the file") 
```

我知道这不是最好的方法，而且我知道 Python 将 os.path.getsize(path) 用于类似目的。你能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:48:42.460

有一个更简单的命令可以做到这一点，它不需要将任何内容保存到文件中：

```
file 'the-filename' | grep 'the-filename' 
```

因此，代码将是：

```
if run("file 'the-filename' | grep 'the-filename'", warn_only=True).succeeded:
    print("The file 'the-filename' is empty.")
else:
    print("The file 'the-filename' is not empty.") 
```

[`succedeed`](http://docs.fabfile.org/en/1.5/api/core/operations.html?highlight=run#fabric.operations.run)返回值的属性是`True`命令是否成功，这发生在`grep`匹配字符串时（即文件为空时）。

在`fabric`的文档中搜索它似乎没有提供类似的功能`os.path.getsize`，因此您可能会被困在使用`run`.

另一种方法是使用`stat 'the-filename' --format=%s | grep '^0$'`并检查`succeeded`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:58:17.117

这应该有效：

```
@task
def empty():
    some_file = 'some_file'
    run(('if [ -s "%s" ]; then'
         ' cat "%s"; '
         'else'
         ' echo "EMPTY FILE"; '
         'fi') % (some_file, some_file)) 
```

我在 Redhat Unix 系统上对其进行了测试，只在一次调用中使用了 bash if 语句和 cat。

# java - 递增 countDownTimer Android

> ID：13478471
> 
> 赞同：0
> 
> 时间：2012-11-20T17:14:57.737
> 
> 标签：java, android, timer, increment, countdowntimer

对 CountDownTimer 有疑问。我必须制作一个应用程序，允许用户在每次单击按钮时将时间时间增加 +1。然后在按钮停止单击后等待三秒钟，然后开始倒计时。

我在下面粘贴了我的代码。

我的问题是：我似乎无法使数字的递增正常工作，但是似乎在我停止递增数字（onStop（））后，它直接转到（onFinish（））。而不是去 OnTick() 并每秒将数字减少 1。我尝试了很多方法来解决这个问题，但都被卡住了。

谁能带领我朝着正确的方向前进？任何帮助，将不胜感激。谢谢你们！

```
public class MainActivity extends Activity {

    Button incrementTime, startTime;
    public TextView timedisplay;
    public myTimer wavetimer;
    private long millisInFuture;
    private long millisUntilFinished;
    private long countDownInterval;
    private long onclicktime;
    //private WaveInterface model;
    public int countdown;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     
    incrementTime = (Button) findViewById(R.id.button2);
    startTime = (Button) findViewById(R.id.button3);
    incrementTime.setText("Increment Time");
    startTime.setText("Start");
    timedisplay = (TextView) findViewById(R.id.mycounter);
    timedisplay.setText("Time Left: " + millisUntilFinished);
    wavetimer = new myTimer (millisInFuture, 1000);

    incrementTime.setOnClickListener(new OnClickListener(){
    int countdown = 01;
   /**
    * On click button Listner
 * @return 
    */
    public void onClick(View v) {
        millisInFuture++;
        return; 
    }

   });
    startTime.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {
        wavetimer.start();
    }
});}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class myTimer extends CountDownTimer  {
public long millisInFuture;
private long countDownInterval;

public myTimer(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
}
@Override
public void onTick(long millisUntilFinished) {
    millisUntilFinished--;
    if (millisUntilFinished == 0){
        wavetimer.onFinish();
    }
    else {
    timedisplay.setText("Time Left: " + millisUntilFinished / 1000);
    }

}
@Override
public void onFinish() {
    timedisplay.setText("Countdown Finished");
    wavetimer.cancel();
}

public void onStop() {
    millisInFuture = millisInFuture + 1;
    timedisplay.setText("Time Left: " + millisInFuture);
} 
```

我似乎无法弄清楚如何正确增加数字。我尝试了多种方法，它一直在搞砸。不知道在哪里看。任何帮助，将不胜感激。谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T03:20:05.243

您应该知道，当倒计时课程的时间到了时，您不必手动调用`onFinish`，也不必取消，`onFinish`因为一个导致另一个或手动递减任何内容。尝试以下操作，看看它是否符合您的想法。希望您能注意到，我没有看到实际的理由来查看按钮是否“不再被点击”。

```
public class MainActivity extends Activity {

    Button incrementTime, startTime;
    public TextView timedisplay;
    long millisInFuture = 1000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        incrementTime = (Button) findViewById(R.id.button2);
        startTime = (Button) findViewById(R.id.button3);
        timedisplay = (TextView) findViewById(R.id.mycounter);

        resetText();

        incrementTime.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                millisInFuture += 1000;
                resetText();
            }
        });

        startTime.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                CountDownTimer wavetimer = new myTimer(millisInFuture + 3000, 1000).start();
                // ^ add 3 seconds.
            }
        });}

    protected void resetText() {
        timedisplay.setText("Time Left: " + millisInFuture / 1000);
    }

    public class myTimer extends CountDownTimer  {

        private long millisActual;

        public myTimer(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
            millisActual = millisInFuture - 3000;
        }

        @Override
        public void onTick(long millisUntilFinished) {
            //v start showing the tick after 3 seconds.
            if (millisUntilFinished <= millisActual) {
                timedisplay.setText("Time Left: " + millisUntilFinished / 1000);                
            }
        }

        @Override
        public void onFinish() {
            timedisplay.setText("Countdown Finished");
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T11:43:03.863

在您的活动 xml 文件中添加名称为“timerText”的 TextView

在类中添加以下两个全局变量

```
int repeatCounter=1;//incrementing for every 60 sec
CountDownTimer tripTimeCounter; 
```

将以下方法添加到类并从活动 onCreate 或您想要的任何其他地方调用它

```
public void startTimeCounter(){
    tripTimeCounter=new CountDownTimer(60*1000, 1000){

        @Override
        public void onFinish() {
            // TODO Auto-generated method stub
            repeatCounter=repeatCounter+1;
            startTimeCounter();//follow the recursion on finish of the limit of 60 seconds & increment the repeat counter
        }

        @Override
        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub

            timerText.setText(formatMillis((repeatCounter*60)*1000-millisUntilFinished));
        }

    }.start();
} 
```

要以时间格式显示值，请使用以下方法

```
 static public String formatMillis(long val) {
    StringBuilder                       buf=new StringBuilder(20);
    String                              sgn="";

    if(val<0) { sgn="-"; val=Math.abs(val); }

    append(buf,sgn,0,( val/3600000));
    append(buf,":",2,((val%3600000)/60000));
    append(buf,":",2,((val %60000)/1000));
    //append(buf,".",3,( val%1000));
    return buf.toString();
 } 
```

# matlab - 当$x_{n+1}=e^(-x_{n})$的$x_{0}=0$时，如何计算前6次迭代？

> ID：13478472
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:15:04.870
> 
> 标签：matlab

如何计算前 6 次迭代

```
$x_{0}=0$ of $x_{n+1}=e^(-x_{n})$? 
```

我的问题是你用这些迭代制作了一个表格，我是 Matlab 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:53:50.567

那么，直接的解决方案将是一个简单的`for`循环：

```
x= zeros(1, 6);
for n = 2:6
    x(n) = exp(-x(n - 1));
end 
```

请注意，MATLAB 数组中的索引从 1 开始，而不是 0。

# javascript - 向下滚动时如何将标题固定到列表顶部？

> ID：13478474
> 
> 赞同：0
> 
> 时间：2012-11-20T17:15:10.633
> 
> 标签：javascript, jquery, html

我愿意显示分为 2 类的可滚动列表。每个类别都有一个标题，我希望这些标题在我向下滚动列表时保持可见。

我知道有人问过类似的问题，并且我尝试过使用 scrollTop 但我无法让它在列表中工作。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:18:08.197

只需将要保留的元素的 CSS 位置设置为“固定”即可。

```
#fixedDiv{
position:fixed; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:28:59.527

这是我过去使用的。它适用于`<tag id="containerToFix">` 您可能需要使用的许多 VAR

```
var scrollLabel = false;
var scrollPadding = 40; //height from top of page
//use window.scroll NOT document.scroll for IE8, 7, 6
$(window).scroll(function () {

    var bottomScroll = $('.header').offset().top; //container of Tag above
    var maxScrolling = bottomScroll - (maxHeightOfContainerToFix) - (scrollPadding);//(scrollPadding) may not be needed for you
    var startScrolling = $('.ten').offset().top - scrollPadding;
    if ($(window).scrollTop() > startScrolling && $(window).scrollTop() < maxScrolling) {
        $('#containerToFix').css({ 'position': 'fixed', 'top': scrollPadding + 'px' });
        $('#containerToFix').addClass('ie7Fixed');
    }
    else if ($(window).scrollTop() < startScrolling) {
        $('#containerToFix').css({ 'position': '' });
    }
    else if ($(window).scrollTop() > maxScrolling) {
        scrollPosition = maxScrolling - $(window).scrollTop();
        $('#containerToFix').css({ 'top': scrollPosition + scrollPadding + 2 });
    };
}); 
```

# java - 如何在运行时修改 Web 应用程序中的属性文件？

> ID：13478477
> 
> 赞同：2
> 
> 时间：2012-11-20T17:15:20.737
> 
> 标签：java, web-applications, spring-mvc, properties, resources

我的 Web 应用程序通过读取属性文件来执行它的一些行为。我想要一个可以在应用程序通过 jsp 界面运行时修改属性文件的管理控制台。我目前可以通过执行以下操作来读取属性文件：

```
Properties props = new Properties();
props.load(Thread.currentThread().getContextClassLoader().getResourceAsStream(FILE_PATH)); 
```

然后我可以将它们传递给我的视图并显示它们。

但是，当我想修改它们时，我无法以相同的方式（需要输出流）找到属性文件来保存新的属性值，除非我将完整路径传递给文件。

我已经阅读过，修改 ClassLoader 提供给您的资源是一种不好的做法。如果我要将属性文件放在 Web 应用程序外部，如何确保在修改完成时它被锁定？还有另一种方法可以做到这一点（属性必须在 .properties 文件中）。

如果这有什么不同的话，我在使用 Spring MVC 的 Tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:23:38.187

我会将您当前的属性文件准确地保留在原处，并将它们用作基本的“加载”源。所有覆盖都将转到 Web 应用程序外部的位置（使位置可配置）。您的启动逻辑将始终是：

*   加载基础源
*   覆盖覆盖

很明显，每当通过管理控制台更改属性时，它将被保存为覆盖。除了解决应用程序存档问题之外，此设置的一个不错的功能是您可以为用户提供一个选项，以将属性值恢复为“默认值”。

# c - 制作一个字符数组

> ID：13478479
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:15:23.777
> 
> 标签：c

我有一个问题，我必须制作一个字符数组，从一个字符开始，在所有字符用完后，制作 2 位数字，当它们用完时，制作 3 位数字，等等。所以这就是我的方法关于那个：

```
char myChar = malloc(8);

for (int i = 0; i < 25; i++)
{
mychar[i] = i + 'a';
} 
```

当 1 个字符用完时，我不知道该去哪里。嵌套for循环？如何添加字符？使用 strcat()？

编辑：对不起，如果我的问题不清楚。基本上，它是制作蛮力哈希破解器的任务。我有一部分工作，比较字符串工作，唯一的问题是这个东西生成符号。这是如何工作的——我造了一个词，将其发送到具有功能并使用目标哈希检查结果。如果它们相同，瞧。所以在这里我尝试制​​作一个从 1 个字符开始向上的字符数组。所以我做'a'，检查它，如果没有用，我把它改成'b'，等等，等等，直到'z'。当我到达 'z' 时，我希望它以 2 个字符重新开始，'aa'，然后是 'ab'，然后是 'ac' 直到 'zz'。当这个用完时，我希望它以'aaa'然后'aab'等开头，等等，最多8位数。我知道这将花费大量时间。但我面临的问题是字符的串联。我如何编写一个循环，所以在第一轮它只有一个符号，在第二轮它是两个，依此类推。我希望这能解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:07:38.783

以下代码使用嵌套循环。外循环是无止境的；用你需要的长度的循环替换它。内部循环将字符串更改为下一个："aa" 到 ba"，"ba" 到 "ca"，...，"zz" 到 "aaa" 等。它更改字符串中的单个字符，而不是使用`strcat`.

请注意，输出看起来有点落后；我想这还不错，因为检查所有猜测的顺序并不是很重要，只要你检查它们。

```
char str[100] = ""; // initialize all characters to '\0'
char min = 'a';
char max = 'z';
for (;;)
{
    int i;
    int increase_length = 1; // a flag to detect transitions like "zzz" => "aaaa"
    for (i = 0; str[i] != '\0'; ++i)
    {
        if (str[i]++ == max) // change to next character and check whether it was 'z'
        {
            str[i] = min;
        }
        else
        {
            increase_length = 0;
            break;
        }
    }
    if (increase_length)
        str[i] = min;
    puts(str);
} 
```

# sql-server-2008 - 如何编写更有效的查询而不是使用 Not Equals 参数

> ID：13478480
> 
> 赞同：1
> 
> 时间：2012-11-20T17:15:28.687
> 
> 标签：sql-server-2008, tsql

有点生疏，但我想返回表`Email`中`Customers`未找到的所有`MailingList`表，所以我正在使用这个查询，但它比预期的要长一点。有没有其他类型的逻辑可以用来让它更快（而不是 ie `M.Email <> C.Email`？

```
 SELECT DISTINCT C.Email FROM CUSTOMERS C
 INNER JOIN MailingList M ON M.Email <> C.Email
 GROUP BY C.Email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:19:05.413

你可以这样做：

```
SELECT DISTINCT C.Email FROM CUSTOMERS C
LEFT OUTER JOIN MailingList M ON M.Email = C.Email
WHERE M.Email is null 
```

我认为这两个查询都不需要分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:27:51.853

相关的子查询也可以解决问题

```
SELECT C.Email FROM CUSTOMERS C 
WHERE C.Email NOT IN (
  SELECT M.Email FROM MAILINGLIST
  WHERE M.EMAIL = C.EMAIL
) 
```

为了提高性能，请确保您在 MAILINGLIST 表中的 EMAIL 字段上有一个索引。

# php - MYSQL fetch 数组无法在 php 中捕获行的名称

> ID：13478483
> 
> 赞同：1
> 
> 时间：2012-11-20T17:15:43.147
> 
> 标签：php, mysql, html-select

这是我的代码

```
$sql = "SELECT distinct s.doc_id, s.pat_id, s.approved, p.pat_fullname, p.pat_id from patient p, subscribe s WHERE s.doc_id = '$doc_id' AND s.approved = '1' AND s.pat_id = p.pat_id;";
$result = mysql_query($sql);
while ($row = mysql_fetch_array($result))
{
    $patname = $row['p.pat_fullname'];      
    echo "<label>Patient:</label>";
    echo "<option value='$patname'>$patname</option>";

} 
```

注意：未定义索引：第 60 行 C:\Program Files (x86)\EasyPHP-5.3.9\www\PHR system\doc_patdoc.php 中的 p.pat_fullname

以上是来自浏览器的通知。sql 查询肯定是有效的，因为我已经在我的数据库中尝试过它。那么我应该输入什么行的名称而不是 p.pat_fullname？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:16:53.940

结果不包含`p.`前缀，因此请删除：

```
 $patname = $row['pat_fullname']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:17:02.067

在查询中使用别名：

```
p.pat_fullname as fullname 
```

然后像这样访问它：

```
$row['fullname'] 
```

您可以在没有`p.`表别名的情况下访问它，但如果您有多个具有相同名称的列，这是最安全的方法

# java - 每次我的 JSlider 移动时都会出现 JDialog

> ID：13478487
> 
> 赞同：3
> 
> 时间：2012-11-20T17:15:56.140
> 
> 标签：java, swing, exception, jdialog, jslider

每次我移动我的 JSlider 时，我的 JDialog 框都会出现在它移动的每个位置上，我只希望它在用户尝试移动 JSlider 而不他们从我的菜单中进行选择时显示一次。我该怎么做？

```
public void stateChanged(ChangeEvent e)
{
  if(myFrame.shape == null)
  {

JOptionPane.showMessageDialog(popUp, "You should select an item first.", "Information",     JOptionPane.WARNING_MESSAGE);
  }
  else if(myFrame.shape != null)
  {
    DecimalFormat df = new DecimalFormat("0.0");
    float value = diameterJSlider.getValue();
    String strValue = Float.toString(value);
    sliderLabel.setText(strValue);
    boundaryTextField.setText("" + df.format(myFrame.shape.getBoundary(value)));
    areaTextField.setText("" + df.format(myFrame.shape.getArea(value)));

    myTopPanel.reDraw(diameterJSlider.getValue());
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:30:50.980

> 但是每次 JSlider 移动一个位置时，它都会为它移动的每个位置显示 JDialog 框。如果你移动它 20 次，你会得到 JDialog 20 次。我该如何解决这个问题，让它只出现一次？

您可以尝试忽略调整事件，以获得所需的行为。

```
 public void stateChanged(ChangeEvent e) {
    JSlider source = (JSlider)e.getSource();
    if (!source.getValueIsAdjusting()) {
      // your code
    }
  } 
```

# ssis - SSIS - 无法将值 null 插入列

> ID：13478489
> 
> 赞同：1
> 
> 时间：2012-11-20T17:16:03.990
> 
> 标签：ssis

我以前见过这个错误，但是通过手动输入值来解决它，但那是 4 行，这次这个错误发生在 100 多行。

问题是，这个名为`Shipto`it 的列将包含以下三种内容之一：1 位数字、2 位数字或单词`All`。导入对于 1 位和 2 位数字非常有效，但是当它出现`All`时会导致此错误：

> *[SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。处理输入“OLE DB 目标输入”(175) 时，组件“OLE DB 目标”(162) 上的 ProcessInput 方法失败，错误代码为 0xC0202009。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。*

这个包从一个表中获取值并将它们插入到另一个表中。我查看了将从中获取值的表，并且该列`shipto`不为空。

唯一的区别在于这两个表的结构。临时表允许该列上的空值，而实际表不允许。两个表的列都是`varchar(20)`.

我注意到在数据流中有一个复选框，上面写着`check constraints`；取消选中这个可以解决这个问题吗？因为该列不为空。

感谢您提供的任何帮助，我将发布可能需要的任何其他信息。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:35:56.047

有几种可能性：

1.  您的源表中有一个空值。您的目标表不允许该列中有空值。有几个选择。如果您直接使用表中的数据源，请改用 SQL 命令并在查询中处理 null：

    SELECT field1, field2, isnull(shipto, '') field3, field4, .... FROM Table

    您可以在上面的空字符串中使用您想要的任何内容，将空值替换为更可接受的值。

    如果您不想这样做，则必须在目标数据库中允许空值，或者找出源数据库表中存在空值的原因并确保不再发生这种情况。

2.  字段未映射。您在源中有未映射到目标字段的值。

3.  源和目标之间的其他转换正在引入 NULL 值。

# c - GCD中的定时锁？

> ID：13478496
> 
> 赞同：0
> 
> 时间：2012-11-20T17:16:17.527
> 
> 标签：c, multithreading, pthreads, grand-central-dispatch

**用例**：

1.  有很多请求需要处理。
2.  处理每个请求所需的时间各不相同。
3.  请求意味着同时处理（现在它们被推入由 获得的全局队列`dispatch_get_global_queue`）。
4.  来自同一客户端的请求**最好**同步处理，例如，在开始处理 rca2 之前，应该完成对来自 ca 的*rca1*的处理，*同时**处理*rcb1 *、* rcd3*等*。 rca *i* : 来自客户端 a 的请求。
***   如果处理请求的时间过长，即超过`TIME_OUT`，则来自同一客户端的其他请求可以开始处理。**

 **当 rca1 处理完成但尚未到达 时，为每个客户端使用`dispatch_get_global_queue`一个串行队列`void dispatch_after( dispatch_time_t when, dispatch_queue_t queue, dispatch_block_t block)`将是次优的。`when`

每个客户有一个串行队列不会满足 5。

* * *

**我知道[GCD 基于不同的范例](https://developer.apple.com/library/mac/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyandApplicationDesign/ConcurrencyandApplicationDesign.html#//apple_ref/doc/uid/TP40008091-CH100-SW1)，但是 GCD 中是否有任何等效的[pthread_mutex_timedlock](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutex_timedlock.html)或[lockBeforeDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLock_Class/Reference/Reference.html#//apple_ref/occ/instm/NSLock/lockBeforeDate%3a)或[Lock.tryLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html#tryLock%28long,%20java.util.concurrent.TimeUnit%29)？**

**如何使用 GCD 实现定时锁提供的功能？**

[Grand Central Dispatch (GCD) 参考](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:40:08.887

您可以在 dispatch_semaphore 上使用超时的下一个作业块。但是，您需要等待作业提交，而不仅仅是作业执行……否则 GCD 将启动大量立即等待的线程，这不是您想要的。**

# ios - iOS将UIViews数组保存到文件然后重新加载

> ID：13478497
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:16:24.267
> 
> 标签：ios, xcode, nsmutablearray, nsarray, save

当我的应用程序终止时，我无法保存数据。

目前，我有一个可变的字符串数组，当应用程序加载此数组时，这些字符串会加载到 uicollection 视图中，并且可以很好地保存和加载。

然后我有一个可变的 UIView 数组的可变数组。

（第一个可变数组 --> 第二个可变数组 1、第二个数组 2 等 --> UIView 1、UIView 2 等）

这是不会保存的。

是否可以保存 UIView 的可变数组？

我不确定我是否以最好的方式措辞，但我希望你能理解。

如果需要，我可以发布代码，但我以本教程为基础

[http://mobileorchard.com/how-to-make-an-iphone-app-part-6-saving-data/](http://mobileorchard.com/how-to-make-an-iphone-app-part-6-saving-data/)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:56:44.137

如果您使用的是自定义类，则需要确保它实现了`NSCoding`协议才能将其保存到磁盘。

要保存和加载它，您需要使用`NSKeyedArchiver`and `NSKeyedUnarchiver`。

```
// SAVE
[NSKeyedArchiver archiveRootObject: myArray toFile: myFilePath]

// LOAD
NSMutableArray *myArray = [NSKeyedUnarchiver unarchiveObjectWithFile: myFilePath]; 
```

常规`writeToFile:atomically:`和`writeToURL:atomically:`方法只允许您编写属性列表对象。如果数组中有任何非属性列表对象，它们就会失败。属性列表对象是：`NSArray`、`NSDictionary`、`NSString`、`NSData`、`NSDate`和`NSNumber`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:22:17.407

`NSArray`an of`UIViews`与 an `NSArray`of应该没有区别`NSStrings`。它们都是 Obj-C 对象，除了性能之外（与可能包含其他对象`NSString`的 a 相比，an 的占用空间非常小），在两种情况下的行为都是相同的。`UIView``NSArray`

如果您需要进一步的帮助，您将需要发布代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:52:42.603

这可能听起来很傻，但你有分配`NSMutableArray`吗？

我已经忘记了几次，而且很容易忘记。

# javascript - 用于噱头购物车的 javascript 只需要 javascript

> ID：13478507
> 
> 赞同：0
> 
> 时间：2012-11-20T17:16:47.237
> 
> 标签：javascript, jquery, cart

[http://jsfiddle.net/mDayR/](http://jsfiddle.net/mDayR/)

如果您查看该 jsFiddle，我要做的就是当您单击“添加到购物车”按钮时，它将发送您要添加到 li 元素内的购物车的项目名称。以及更新总价。这是一些在线 Ecart 的噱头购物车，因为无法访问 php，所以一切都是手动完成的。

假设我点击了三件商品，可口可乐 200 美元、手枪 600 美元和棒球帽 500 美元。然后我希望列表像这样

```
<ul>
<li>Coke Cola</li> 
 <li>Pistol</li>
  <li>Baseball Cap</li>
 </ul>
 <span>Total = $1300.00</span> 
```

请不要让我查看购物车，这是用户的噱头购物车，这是为了帮助他们的用户查看他们将欠多少积分。除了将项目粘贴到隐藏表单中之外，不会处理任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:23:47.090

那么您需要在单击时创建列表项并将它们附加到列表中。

然后将 points 属性添加到总数中，然后显示它。

所以

```
var theNewItem = '<li>' + itemName + '</li>';
$('.itemList').append(theNewItem);
runningTotal += points;
$('.totaler').html("$" + runningtotal.toFixed(2)); 
```

这应该让你开始

这是一个更正的小提琴 [http://jsfiddle.net/mDayR/4/](http://jsfiddle.net/mDayR/4/)

就个人而言，因为“不会处理任何数据”，我建议您使用按钮而不是提交，然后在按钮的单击处理程序上进行计算。

[http://jsfiddle.net/mDayR/6/](http://jsfiddle.net/mDayR/6/)

再摆弄按钮逻辑

[http://jsfiddle.net/mDayR/10/](http://jsfiddle.net/mDayR/10/) - 可以多次添加项目 [http://jsfiddle.net/mDayR/11/](http://jsfiddle.net/mDayR/11/) - 只能添加一次

# actionscript-3 - 填充移动圆锥形状不起作用，

> ID：13478509
> 
> 赞同：1
> 
> 时间：2012-11-20T17:16:51.943
> 
> 标签：actionscript-3

我正在使用 Flash API 绘制一个移动的锥形，该锥形稍后将用作激光束。但是，即使形状没有间隙，我也无法填充它。

这是我得到的当前结果，我按以下顺序绘制，如数字所示。

[链接到当前结果](http://i.imgur.com/sGBp3.jpg)

在这之前，我开始一个 beginFill(...) 并结束它，在绘制完所有线条之后，使用一个 endFill()。

如前所述，圆锥体的移动将在稍后用作效果（在每个点之间，我将淡化线条样式）。所以我要做的是存储每个 OnEnterFrame 事件的点并根据这些点绘制线（1 和 2）。激光束具有方向。

如果它保持静态并且我按照以下方式绘制它（在 OnEnterFrame 事件上）：

```
 graphics.clear();
        graphics.lineStyle(3, 0xFF0000);
        graphics.beginFill(0xFFFFFF);

        var dx:Number = end.x - source.x;
        var dy:Number = end.y - source.y;

        var angle:Number = Math.atan2(dy, dx);

        var endX1:Number = end.x + 20 * Math.cos(angle - 90);
        var endY1:Number = end.y + 20 * Math.sin(angle - 90);
        var endX2:Number = end.x + 20 * Math.cos(angle + 90);
        var endY2:Number = end.y + 20 * Math.sin(angle + 90);

        graphics.lineStyle(3, 0xFFFFFF);
        graphics.moveTo(source.x, source.y);
        graphics.lineTo(endX1, endY1);

        graphics.moveTo(source.x, source.y);
        graphics.lineTo(endX2, endY2);
        graphics.lineTo(endX1, endY1);
        graphics.endFill(); 
```

话虽如此，我不会画第 4 行（如图所示）。

我的想法已经不多了，形状显然是封闭的，但填充不起作用。这是“移动”锥形效果的 OnEnterFrame 事件的完整代码。这里

```
public function update():void
    {
        /*
        graphics.clear();
        //graphics.lineStyle(3, 0xFF0000);
        graphics.beginFill(0xFFFFFF);
        //graphics.moveTo(source.x, source.y);
        //graphics.lineTo(end.x, end.y);
        */
        var dx:Number = end.x - source.x;
        var dy:Number = end.y - source.y;

        var angle:Number = Math.atan2(dy, dx);

        var endX1:Number = end.x + 20 * Math.cos(angle - 90);
        var endY1:Number = end.y + 20 * Math.sin(angle - 90);
        var endX2:Number = end.x + 20 * Math.cos(angle + 90);
        var endY2:Number = end.y + 20 * Math.sin(angle + 90);

        /*
        graphics.lineStyle(3, 0xFFFFFF);
        graphics.moveTo(source.x, source.y);
        graphics.lineTo(endX1, endY1);

        graphics.moveTo(source.x, source.y);
        graphics.lineTo(endX2, endY2);
        graphics.lineTo(endX1, endY1);
        graphics.endFill();

        return;
        */

        var x:Number  = currentPoint.x;
        var y:Number  = currentPoint.y;
        var x2:Number = currentPoint2.x;
        var y2:Number = currentPoint2.y;

        points[0].x = x;
        points[0].y = y;

        points2[0].x = x2;
        points2[0].y = y2;

        //::  Interpolate Current Point
        currentPoint    = Point.interpolate(new Point(endX1, endY1), source, progress);
        currentPoint2   = Point.interpolate(new Point(endX2, endY2), source, progress);

        //::  Add new point with properties
        if (progress < 1.0 )
        {
             points.splice(1, 0, {x: x, y: y, life: getTimer(), thickness: 2 + (20 * progress)});
             points2.splice(1, 0, {x: x2, y: y2, life: getTimer(), thickness: 2 + (20 * progress)});
        }

        //::  Line 1
        graphics.clear();
        graphics.lineStyle(3, 0xFFFFFF, 1);
        graphics.beginFill(0xFF0000);

        graphics.moveTo(x, y);

        for (var i:int = 1; i < points.length; i++) 
        {
            //::  Point dead, remove it
            if (getTimer() - points[i].life > lifetime)
            {
                points.splice(i--, 1);
            }
            //::  Update point life and draw graphics
            else 
            {
                var currentLife:Number  = (getTimer() - points[i].life);
                var perc:Number         = Math.abs(1 - (currentLife / lifetime));

                //graphics.lineStyle(3, 0xFFFFFF, perc);

                //::  Prev point
                var px:Number = points[i - 1].x;
                var py:Number = points[i - 1].y;

                graphics.lineTo(px, py);                                    
            }
        }

        //::  Line 2
        graphics.beginFill(0xFFFFFF);
        graphics.moveTo(x2, y2);

        for (var i:int = 1; i < points2.length; i++) 
        {
            //::  Point dead, remove it
            if (getTimer() - points2[i].life > lifetime)
            {
                points2.splice(i--, 1);
            }
            //::  Update point life and draw graphics
            else 
            {
                var currentLife:Number  = (getTimer() - points2[i].life);
                var perc:Number         = Math.abs(1 - (currentLife / lifetime));

                //graphics.lineStyle(3, 0xFFFFFF, perc);

                //::  Prev point
                var px:Number = points2[i - 1].x;
                var py:Number = points2[i - 1].y;

                graphics.lineTo(px, py);                                    
            }
        }

        //::  Close 3 & 4
        if (points.length > 1)
        {
            graphics.moveTo(points[points.length-2].x, points[points.length-2].y);
            graphics.lineTo(points2[points2.length-2].x, points2[points2.length-2].y);
        }

        graphics.moveTo(x, y);
        graphics.lineTo(x2, y2);
        graphics.endFill();

        //::  Progress
        progress += progressSpeed;      
        if (progress >= 1.0)    progress = 1.0; 
```

该代码是非常安全的解释。如果您需要更多信息，我会提供！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:14:58.617

我相信你的问题是因为你移动了两次绘图位置，这让 Flash 对应该填充的内容感到困惑。

通常，当我绘制这样的形状时，我只会`moveTo()`在开始时调用 1 次，然后从当前端点开始绘制每条线。当您绘制每条线时，“当前终点”会发生变化。我建议您修改代码，使其绘制如下：

```
moveTo(startX, startY);
lineTo(endX1, endY1);
lineTo(endX2, endY2);
lineTo(endX3, endY3);
lineTo(startX, startY); 
```

我相信正在发生的事情是，当您对`moveTo()`Flash 进行第二次调用时，会尝试填充之前绘制的任何内容。但是因为你只画了两条线，所以没有什么可以填充的。它重置它的状态（关于应该填充什么），然后你再画一两条线。当您调用`endFill()`时，它只查看自上次以来绘制的内容，`moveTo()`并再次决定没有要填充的内容。

# visual-studio-2010 - Specflow 测试 Flash UI

> ID：13478514
> 
> 赞同：1
> 
> 时间：2012-11-20T17:17:13.097
> 
> 标签：visual-studio-2010, flash, apache-flex, specflow

我们有一个 Web 应用程序，它有一个 Flash UI，我们想为其编写自动化测试。有谁知道这是否可以使用 Specflow 和 Visual Studio？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T00:17:08.427

SpecFlow 是一个用于创建验收测试的框架。在 SpecFlow 步骤下，您可以运行任何您想要的：Selenium、WPF UI 测试等。换句话说，SpecFlow 没有对任何类型的测试的任何内置支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:58:44.350

如果您使用的是 VS2010 或 VS2012，并且您真的想做自动化的 UI 方面，您可以将 MS Coded UI 测试与 MSTest 结合使用。如果你以非常模块化的方式构建你的 UI 测试，你可以使用 SpecFlow 来启动各种 UI 测试和驱动场景。

# authentication - 从 ServiceStack 中利 用表单身份验证的最简洁方法是什么？

> ID：13478515
> 
> 赞同：5
> 
> 时间：2012-11-20T17:17:16.197
> 
> 标签：authentication, forms-authentication, servicestack

我正在尝试将 ServiceStack 与现有的 Web 表单站点集成。该站点使用表单身份验证以及一些涉及数据库调用等的自定义身份验证逻辑。

如何使用相同的机制保护 ServiceStack 调用？阅读[文档](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)，似乎我应该编写一个继承自的自定义身份验证提供程序`CredentialsAuthProvider`来进行数据库检查等，并添加一个请求过滤器以将其`AuthenticateAttribute`应用于每个请求。我是否还需要设置表单身份验证票，一旦通过身份验证，并检查每个请求的票？我会在哪里做这些事情？

我错过了什么吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:40:21.567

有关将 MVC 表单身份验证与 ServiceStack 的身份验证提供程序集成的示例，请参阅[CustomAuthenticationMvc UseCase 项目。](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/CustomAuthenticationMvc)

具体而言，[AccountController.Login()](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/AccountController.cs#L41)方法显示了如何从 MVC 调用 ServiceStack：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        var authService = AppHostBase.Instance.TryResolve<AuthService>();
        authService.RequestContext = CreateRequestContext();
        var response = authService.Authenticate(new Auth
        {
            UserName = model.UserName,
            Password = model.Password,
            RememberMe = model.RememberMe
        });

        // add ASP.NET auth cookie
        FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

        return RedirectToLocal(returnUrl);
    }

    // If we got this far, something failed, redisplay form
    ModelState.AddModelError("", 
        "The user name or password provided is incorrect.");
    return View(model);
} 
```

# jenkins - 如何配置 Jenkins 发送电子邮件？

> ID：13478518
> 
> 赞同：3
> 
> 时间：2012-11-20T17:17:20.957
> 
> 标签：jenkins, hudson

我正在尝试将 Jenkins 配置为在美国东部标准时间下午 2 点向我们的分发列表发送一封电子邮件。我看到的电子邮件插件的唯一选项是在构建失败或构建失败后第一次成功时发送电子邮件。我希望 Jenkins 每天在美国东部标准时间下午 2 点发送一封电子邮件，让每个人都知道正在进行构建。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:35:24.817

我能想到的几个选择：

1.  创建一个在美国东部标准时间每天下午 2 点构建的简单作业，只打印一条消息，然后使用[email-ext 插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)发送通知；无论构建状态如何，您都可以配置此插件以发送电子邮件。然后触发实际的构建作业作为下游构建。
2.  在实际构建发生之前，在主构建中放置一个 shell 步骤，并让 shell 步骤从命令行发送电子邮件。

# java - 垂直滚动条和视口定位

> ID：13478520
> 
> 赞同：1
> 
> 时间：2012-11-20T17:17:30.477
> 
> 标签：java, jscrollpane

我将 JTextPane 与 JScrollPane 结合使用。JTextPane 预先填充了大量需要滚动阅读的文本。我遇到的问题是视口默认显示文本的最底部 - 即当 JFrame 打开或刷新时，垂直滚动条旋钮位于底部（而不是顶部）。我以前使用过 JScrollPane 时没有遇到过这个问题。

这是我用来创建滚动窗格的代码：-

```
 JTabbedPane jtpCentre = new JTabbedPane();

    JPanel panHexagramText = new JPanel();
    panHexagramText.setBorder(bor);
    txpHexagramText = new JTextPane();
    txpHexagramText.setPreferredSize(new Dimension(595, 300));
    scrHTPanel = new JScrollPane(txpHexagramText,
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
            JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);      
    scrHTPanel.setPreferredSize(new Dimension(595,300));

    panHexagramText.add(scrHTPanel); 
```

我用来填充文本窗格的代码位于不同的类中：

```
 try {
        String strLineText = this.createLineTextString(strLineTextData);
        String[] strFullText = {"Hexagram Text\n\n",
            strTranslationData[0][1],
            "\n\nLine Text",
            strLineText};
        String[] strStyles = {"bold", "regular", "bold", "regular"};
        gui.txpHexagramText.setText(null);
        StyledDocument sDoc = gui.txpHexagramText.getStyledDocument();
        this.addStylesToDoc(sDoc);
        for (int i = 0; i < strFullText.length; i++) {
            sDoc.insertString(sDoc.getLength(), strFullText[i],
                    sDoc.getStyle(strStyles[i]));
        }
    } catch (Exception ex) {// Trap error if there is no translation available.
        gui.txpHexagramText.setText(str);
    } 
```

我想问一下为什么会这样，我该如何纠正？

非常感谢。

# sql - 5天后如何自动触发触发器？

> ID：13478521
> 
> 赞同：1
> 
> 时间：2012-11-20T17:17:36.323
> 
> 标签：sql, sql-server, triggers

我有一个包含以下列的`Shoppping List`表格：

```
shopID, Product, DateTimeShopped, PaiedOrNot, ListStatus 
```

我的要求是将当前日期时间与 进行比较`DateTimeShopped`，如果购物清单在 5 天后仍未付款，则自动将其标记`ListStatus`为`Blocked`。

如何处理 SQL Server 触发器中的时间问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:19:51.483

**简短的回答**。你不能。

**长答案**。可以从触发器运行多个简单的语句，但是，这不是最好的地方。

**另一种选择**。我会将数据插入另一个表并从 Sql Agent 运行存储过程以相应地对其进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:26:32.350

创建一个 SP`ShoppingListSP`

```
declare @current datetime    
set @current = (select GETDATE() )

if ( datediff(@DateTimeShopped,@current ) > 5)
begin
    update [Shopping List] set ListStatus = 'Blocked' where id=123123
end 
```

然后创建一个 SQL 作业，在后台每隔一小时左右运行一次这个 SP。

```
exec ShoppingListSP 
```

您可能还需要使用游标来逐行处理一组数据。

# jquery - jQuery：链接多个子元素

> ID：13478523
> 
> 赞同：3
> 
> 时间：2012-11-20T17:17:44.873
> 
> 标签：jquery, jquery-selectors

我有一个带有多个子元素的父元素，每个子元素都需要不同的更改。有一个简单的解决方案，但我想知道链接是否可行并且效率更高。

一个非常简单的例子：

```
<div id="parent">
    <div class="one">One</div>
    <div class="two">Two</div>
    <div class="three">Three</div>
</div>

----------------------

$('#parent .one').text('Some');
$('#parent .two').text('Thing');
$('#parent .three').text('Else'); 
```

有没有办法做类似的事情？

```
$('#parent')
  .children('.one').text('Some')
  .children('.two').text('Thing')
  .children('.three').text('Else'); 
```

每个孩子将链重置回父级。另外，除了使代码更易于阅读之外，这是否有效？请记住，这是一个非常简单的示例来澄清问题。我不是指这个确切的代码。我真的很感激帮助。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T17:18:46.307

[end()](http://api.jquery.com/end/)会将链返回到上次过滤之前的状态：

```
$('#parent')
  .children('.one').text('Some').end()
  .children('.two').text('Thing').end()
  .children('.three').text('Else'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:19:25.120

```
$('#parent')
    .find('.one').text('Some')
    .siblings('.two').text('Thing')
    .siblings('.three').text('Else'); 
```

# java - 带有 onclick 监听器的 Android 按钮导航

> ID：13478526
> 
> 赞同：0
> 
> 时间：2012-11-20T17:17:52.797
> 
> 标签：java, android, navigation

```
main.xml
--------
|button1| (button press)>page1.xml
|button2| (button press)>page2.xml
|button3| (button press)>page3.xml
|button4| (button press)>page4.xml
|button5| (button press)>page5.xml
|button6| (button press)>page6.xml
------------------------------------------- 
```

单击按钮时，它会转到相应的页面。实现这一点的最佳/最简单的方法是什么？当我尝试 onclick 侦听器时，我尝试了一切都无济于事。我可以让一个听众工作，但是当我尝试让多个听众工作时，它就搞砸了，我无法弄清楚。我目前的方法是使用这 2 个 java 文件
activity1.java

```
package install.fineline;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;

import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;

public class Activity1 extends Activity {

Button Button1;
Button Button2;
Button Button3;
Button Button4;
Button Button5;
Button Button6;

public void addListenerOnButton() {

final Context context = this;

Button1 = (Button) findViewById(R.id.autobody);

Button1.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button2 = (Button) findViewById(R.id.glass);

Button2.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button3 = (Button) findViewById(R.id.wheels);

Button3.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button4 = (Button) findViewById(R.id.speedy);

Button4.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

});

Button5 = (Button) findViewById(R.id.sevan);

Button5.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        Intent intent = new Intent(context, Activity2.class);
        startActivity(intent);   

    }

}); 
```

Button6 = (Button) findViewById(R.id.towing);

Button6.setOnClickListener(new OnClickListener() {

```
@Override
public void onClick(View arg0) {

    Intent intent = new Intent(context, Activity2.class);
    startActivity(intent);   

}

});

}} 
```

这是我的另一个java文件

activity2.java
包 install.fineline；

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.Button;

public class Activity2 extends Activity {

Button button1;

public void onCreate1(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.autobody);
}
Button button2;

public void onCreate2(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.glass);
}
Button button3;

public void onCreate3(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.wheels);
}
Button button4;

public void onCreate4(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.speedy);
}
Button button5;

public void onCreate5(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.sevan);
}

Button button6;

public void onCreate6(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.towing);
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:30:11.630

您应该为每个页面定义一个活动。所以总共有7个活动，包括主要的。在主要活动中，定义单个 onClickListener 来处理所有点击。

```
class ClickListener implements View.OnClickListener {
    void onClick(View v) {
       switch(v.getId()) {
        case R.id.btn_1:
             ...
             break;
        ...
       }
    } 
```

将此侦听器设置为所有 6 个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:28:13.970

你肯定做错了。您的所有按钮都在调用相同的活动。如果您希望他们去不同的地方，请创建不同的活动。如果您希望他们使用不同的数据去同一个地方，请使用意图将信息作为额外信息发送。

此外，为了便于阅读，您可能想了解 XML 定义的点击方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:36:45.863

1.  使用单个 switch-case 更改您的 OnClick 方法
2.  像这样从activity1传递数据：

    intent.putExtra("buttonClick", buttonnumber); 开始活动（意图）；

3.  像这样接收activity2中的数据：

    clickedButton = getIntent().getExtras().getString("buttonClick");

4.  在activity2中将方法名改为OnCreate

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:32:27.227

好的，首先，实现 OnClickListener，你必须添加未实现的方法`onClick()`

```
public class Activity1 extends Activity implements OnClickListener { 
```

然后初始化您的按钮并在您的`onCreate()`

```
Button1 = (Button) findViewById(R.id.autobody);
Button1.setOnClickListener(this); 
```

然后在`onClick()`设置一个开关/外壳

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.autobody:
        // do code
        break;
    case R.id.glass:
        // do code
        break;
    }
} 
```

我只是做了一些你的按钮，但你可以弄清楚其余的。只需确保初始化并将 onClickListeners 添加到它们中`onCreate()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T17:34:56.850

不要将按钮用于此功能。使用[ListView](http://developer.android.com/reference/android/widget/ListView.html)并使用它的 onItemClickListener，您将获得被点击的行号。然后，您可以使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)根据点击显示页面。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T17:35:35.893

首先，这不是您的问题，而是使代码更易于阅读并节省内存：制作一个 onClickListener 并在其中检查单击了哪个按钮。

```
class Activity1 extends Activity implements onClickListener {

    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
            // handle button1 press
        case R.id.button2:
            // ...
        }
    }
} 
```

现在解决真正的问题：在您的第二个活动中，Android 不知道任何 onCreate1()、onCreate2() 等函数。相反，您必须实现 onCreate() （Android 确实知道），并将 Intent 中按下的按钮发送给它，如下所示：

```
// You can just take your activity object as the context, 
// no need to convert explicitly.
Intent i = new Intent(this, Activity2.class);
i.putExtra("button", 1);
startActivity(i); 
```

然后在您的活动中获取数据：

```
public void onCreate() {
    int button = getIntent.getIntent().getInt("button");
} 
```

# android - android - 复选框和字符串 []

> ID：13478534
> 
> 赞同：0
> 
> 时间：2012-11-20T17:18:03.330
> 
> 标签：android, string, checkbox

抱歉，下面的代码看起来如此笨拙。综上所述，我正在制作一个问答游戏，用户可以选择问题的 4 种难度。例如，如果用户选择复选框 1 和 3，则以下代码旨在将 string.xml 中的字符串数组存储到 String[] NUM_ALL_QuestionNames 中。

```
//same for checkbox1,2,3, so here not duplicate //

      if (checkbox4=="yes") 
      {
          NUM_EXP_QuestionNames = getResources().getStringArray(R.array.Num_Q_Expert_List);                                               
          NUM_EXP_AnswerNames = getResources().getStringArray(R.array.Num_A_Expert_List);

          QuestionImport= 0;                  
          QuestionImport = NUM_EXP_QuestionNames.length;
          int i =0;
          while (i<QuestionImport)
          {
              String Q_toimport = NUM_EXP_QuestionNames[i];
              String A_toimport = NUM_EXP_AnswerNames[i];   

              NUM_ALL_QuestionNames.add(Q_toimport);
              NUM_ALL_AnswerNames.add(A_toimport);                    
              ++i;                    
          }           
      };

      NUM_ALLL_QuestionNames = new String[NUM_ALL_QuestionNames.size()]; //convert ArrayList<String> to String[]
      NUM_ALLL_AnswerNames = new String[NUM_ALL_AnswerNames.size()]; //convert ArrayList<String> to String[] 
```

最后 NUM_ALL_Questionnames 将从 ArrayList NUM_ALLL_QuestionNames 转换回 String[] 以供进一步处理。

string.xml 中的文件应该没有问题，因为当我尝试如下设置（直接从 string.xml 中提取）时，应用程序运行良好：

```
NUM_ALLL_QuestionNames = getResources().getStringArray(R.array.Num_Q_Simple_List);
NUM_ALLL_AnswerNames = getResources().getStringArray(R.array.Num_A_Simple_List); 
```

## 问题：

1.  现在它是来自 string.xml 的 String[] 格式的数据，然后它被添加到 List 中，这个 List 最后转换回 String[]。是否有任何修改不需要这种转换。如果 string.xml 可以直接到 String[] 就更好了

2.  当继续执行应用程序时，logcat 不会显示任何错误。但是，模拟器保持黑屏。为什么会这样？代码是否存在无限循环？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:24:48.003

这是错误的：

```
NUM_ALLL_QuestionNames = new String[NUM_ALL_QuestionNames.size()]; //convert ArrayList<String> to String[] 
```

它不会将 ArrayList 转换为 String[]，而是将变量的值设置为空 String[]。要转换，请执行以下操作：

```
NUM_ALLL_QuestionNames = NUM_ALL_QuestionNames.toArray(); 
```

假设这`NUM_ALL_QuestionNames`是一个列表。

Doctor 是对的，字符串比较在 Java 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:23:26.397

我不明白为什么 checkbox4 值是一个字符串，但永远不要通过 == 比较字符串，因为这样可以比较可能指向不同对象的链接。相反，使用 String 这样的 equals 方法 if (checkbox4.equals("yes"))

# image-processing - 如何在 J2ME 中裁剪图像

> ID：13478540
> 
> 赞同：1
> 
> 时间：2012-11-20T17:18:30.477
> 
> 标签：image-processing, java-me, crop

我想在 J2ME 中裁剪图像，但我似乎无法在网上找到有关如何执行此操作的任何内容。我在 Java 中看到了一些实现，但它们使用 J2ME 中不可用的库。

它是如何在 J2ME 中完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:27:36.567

创建一个[`Image`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Image.html#createImage%28int,%20int%29)具有精确裁剪大小的可变对象。从可变
的. 在裁剪区域完全适合 mutable 的位置 绘制原件。 [`Graphics`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Graphics.html)`Image`
`Image``Image`

例如，如果我想裁剪图像的中心：

```
Image original = Image.createImage(stream); // 320 x 240
Image crop = Image.createImage(160, 120);
Graphics cropGraphics = crop.getGraphics();
int x = crop.getWidth() / 2;
int y = crop.getHeight() / 2;
int anchor = Graphics.HCENTER | Graphics.VCENTER;

cropGraphics.drawImage(original, x, y, anchor); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T18:37:19.560

不确定 J2ME，但您总是可以寻找 JQuery 图像裁剪插件。Jcrop 就是一个这样的工具。[http://deepliquid.com/projects/Jcrop/demos.php](http://deepliquid.com/projects/Jcrop/demos.php)

# search - 如何安装endeca？

> ID：13478544
> 
> 赞同：1
> 
> 时间：2012-11-20T17:18:49.487
> 
> 标签：search, download, installation, endeca

我不想学习 Endeca Search。经过大量搜索，我没有找到任何下载和安装 Endeca 的链接。我正在使用 Windows XP Service Pack 2（32 位）。我应该在哪里下载它？我应该如何安装它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:08:58.173

虽然 Endeca 不是免费的，但您仍然可以从 Oracle 的软件交付云下载它：[https](https://edelivery.oracle.com) ://edelivery.oracle.com 。如果没有从 Oracle 购买许可证，您将无法在生产环境中使用它。

@PaulLemke 与联系人和文档有很好的链接。如果您想提问，可以使用 My Oracle Support（针对付费客户）或 OTN 上的免费论坛：[https](https://forums.oracle.com/forums/category.jspa?categoryID=514) ://forums.oracle.com/forums/category.jspa?categoryID=514 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T00:42:46.567

按照以下链接快速轻松地安装 Endeca

在 Mac 上安装 Endeca [http://www.gingercart.com/Home/developer-handy/installing-endeca-on-mac-osx](http://www.gingercart.com/Home/developer-handy/installing-endeca-on-mac-osx)

在 Linux 上安装 Endeca [http://www.gingercart.com/Home/developer-handy/install-endeca-commerce-guided-search-on-linux](http://www.gingercart.com/Home/developer-handy/install-endeca-commerce-guided-search-on-linux)

在 Windows 上安装 Endeca [http://www.gingercart.com/Home/developer-handy/installing-endeca-commerce-search-on-windows](http://www.gingercart.com/Home/developer-handy/installing-endeca-commerce-search-on-windows)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T13:28:21.520

Endeca 不是免费产品，因此不能公开下载。要获得该软件的评估副本，您必须联系 Endeca 的新所有者：Oracle。

在 Endeca[主页](http://www.oracle.com/us/products/applications/commerce/endeca/Overview/index.html)的右侧有一个“全球联系人”，可以帮助您与可以帮助您获得安装副本的人取得联系。

这是[文档索引。](http://www.oracle.com/technetwork/middleware/endeca/documentation/documentation-1544963.html)这是最新的[安装指南。](http://docs.oracle.com/cd/E29584_01/webhelp/mdex_install/toc.htm)根据操作系统，安装非常简单。

# html - 从 index.html 中提取表 Objective-c

> ID：13478545
> 
> 赞同：0
> 
> 时间：2012-11-20T17:18:58.853
> 
> 标签：html, objective-c, parsing, stringbyevaluatingjavascr

问题如下：我正在尝试使用“stringByEvaluatingJavaScriptFromString”从 html 中获取一个表。表本身在 NSLog 中被拉取，但她不想出现在 UIWebView 中。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    filePath = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"index.html"];

    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:filePath]]];
}

- (void)webViewDidFinishLoad:(UIWebView*)webView1
{
    NSLog(@"webViewDidFinishLoad");

    html = [webView stringByEvaluatingJavaScriptFromString: @"document.body.getElementsByClassName('bottomwideborder')[1].innerHTML;"];
    html1 = [NSString stringWithFormat:@"<html><body>%@</body></html>", html];
    [webView loadHTMLString:html1 baseURL:[NSURL URLWithString:filePath]]; //Here page does not refresh

    NSLog(@"%@", html1); //It's all displayed

   [webView stopLoading];
} 
```

我认为这个页面应该以某种方式更新，但我不知道如何（（

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:21:21.633

这可能是一个简单的变量命名错误。

我懂了：

```
- (void)webViewDidFinishLoad:(UIWebView*)webView1 
```

当您将该函数中的所有内容称为“ `webView`”（没有“ `1`”）时。

另外，请确保您的 " `webView`" 不是 NULL 并且它是您所期望的，因为您正在尝试使用（显然正确解析的）" `html1`" 代码加载它。

# xpath - 如何从基于消息的变量中提取原子值并使用 XPATH 分配给输出变量

> ID：13478550
> 
> 赞同：1
> 
> 时间：2012-11-20T17:19:18.557
> 
> 标签：xpath, wso2, wso2carbon, bpel

只是为了重新表述我正在使用 WSO2 BPS 服务器运行业务流程以调用 WSO2 ESB 上的 RestProxy 服务的问题。我通过一个名为 LVCounterOut 的输出变量得到响应。LVCounterOut 是基于消息类型的变量，响应为 XML 格式，如下所示：

```
<message>
 <payload>
  <Response>
     <Terminal>
       <Name>RValue</Name>
       <Value>0.000000</Value>
     </Terminal>
     <Terminal>
       <Name>SValue</Name>
       <Value>**1.000000**</Value>
     </Terminal>
  </Response>
 </payload>
</message> 
```

我可以将上述变量中​​的原子值分配给业务流程的输出变量吗？例如，在上面的响应中，我想将“Value”节点的数字部分“1.0000000”分配给进程的输出变量，该部分将是字符串格式。下一个问题是如何将此字符串值转换为整数，以便我可以在我的业务流程中的 If 控件中使用它。例如“如果值 > 10”调用 ServiceA，否则调用 ServiceB。

这是我已经尝试将 LVCounterOut 变量的输出分配给输出变量“ProcessOutput”的方法。

```
<bpel:assign validate="no" name="AssignProxyOut">
        <bpel:copy>
            <bpel:from>
                <bpel:literal>
                    <tns:LVCounterProcessResponse xmlns:tns="http://wso2.org/bps/sample" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><tns:return>tns:return</tns:return>

                    </tns:LVCounterProcessResponse>
                </bpel:literal>
            </bpel:from>
            <bpel:to variable="ProcessOutput" part="payload"></bpel:to>
        </bpel:copy>
        <bpel:copy>
            <bpel:from>
              <![CDATA[$LVCounterOut.payload/ns:Response/ns:Terminal[2]/ns:Value/text()]]>
            </bpel:from>
            <bpel:to part="payload" variable="ProcessOutput">
                <bpel:query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0"><![CDATA[tns:return]]></bpel:query>
            </bpel:to>
        </bpel:copy>
    </bpel:assign> 
```

当我使用 tryit 在 BPS 服务器上运行业务流程时，出现以下错误

```
[2012-11-20 16:41:59,882] ERROR - BpelEngineImpl - Scheduled job failed; jobDetail=JobDetails( instanceId: null mexId: hqejbhcnphr7rsjnbxjhrs processId:
 {http://wso2.org/bps/sample}LVSelectProcess-127 type: INVOKE_INTERNAL channel: null correlatorId: null correlationKeySet: null retryCount: null inMem:
false detailsExt: {enqueue=false}) java.lang.ClassCastException: java.lang.String cannot be cast to org.w3c.dom.Node at
org.jaxen.dom.DocumentNavigator.getChildAxisIterator(DocumentNavigator.java:152)
at org.jaxen.util.DescendantAxisIterator.next(DescendantAxisIterator.java:129) 
```

我认为这里使用 XPATH 是错误的，还是我的做法完全错误？我很抱歉，但 XML 和 XPATH 不是我的强项，我仍在努力掌握它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:13:36.497

对于遇到类似问题的任何人，我已按如下方式解决了此查询：

要从调用服务的输出消息变量中提取原子值，您可以使用

bpel:getVaribleData(varName, partName, xpathStr) 函数。

WS-BPEL-2.0 规范中未定义此功能。但这适用于 WSO2-BPS 和 Apache-ODE。它可用于使用 XPath 表达式从变量中提取一组元素。

例如 -

```
<bpel:copy>
<bpel:from>
    <![CDATA[count(bpel:getVariableData(‘$Variable','$partName')/ns:return)]]>
</bpel:from>
<bpel:to variable="itemCount"></bpel:to>
</bpel:copy> 
```

传递 varName 和 partName 时记得使用 ''。这里的“/ns:return”是xpath表达式。

# c# - 以字符串形式显式检索 XML 元素的内容

> ID：13478554
> 
> 赞同：2
> 
> 时间：2012-11-20T17:19:28.620
> 
> 标签：c#, xml, serialization, xml-serialization

我有这样的 XML：

```
<entry xmlns="http://www.w3.org/2005/Atom">
    <fullstoryimage>
        <img src="http://someimageurl/animage.jpg" width="220" height="150" border="0" />
    </fullstoryimage>
</entry> 
```

和这样的模型：

```
[Serializable]
[XmlRoot("entry", Namespace = "http://www.w3.org/2005/Atom")]
public class NewsItem
{
    [XmlElement("fullstoryimage")]
    public string Image { get; set; }
} 
```

如何适当地标记“fullstoryimage”以将内容作为字符串提取？

注意：XML 不是我设计的，不能更改，无论它看起来多么愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:35:24.173

如果你想要做的是获取图片链接，你可以使用 Linq2Xml

```
XNamespace ns = "http://www.w3.org/2005/Atom";
var imgLink = XDocument.Parse(xml)
                .Descendants(ns + "img")
                .Select(i => i.Attribute("src").Value)
                .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:56:51.200

为了保持我的序列化一致，我这样做了：

```
public class StoryImage
{
    [XmlElement("img")]
    public Image Img { get; set; }
}

public class Image
{
    [XmlAttribute("src")]
    public string Source { get; set; }
}

[Serializable]
[XmlRoot("entry", Namespace = "http://www.w3.org/2005/Atom")]
public class NewsItem
{
    [XmlElement("fullstoryimage")]
    public StoryImage FullStoryImage { get; set; }
} 
```

然后 newsItem.FullStoryImage.Img.Source 可以访问该 URL。

# python - 在山狮上安装 Scipy

> ID：13478555
> 
> 赞同：3
> 
> 时间：2012-11-20T17:19:30.140
> 
> 标签：python, scipy, osx-mountain-lion

我试图使用 Xcode 及其命令行工具在全新安装的 Mountain Lion 上安装 python 及其科学库。

我安装了自制软件，并通过它安装了一个新的 python 2.7，因为我不想弄乱苹果提供的那个。我也总是通过自制软件安装 gfortran。

然后我从其源代码安装 Numpy，使用标志使用 gfortran 构建它。我这样做是因为如果我 pip install 它，那么 scipy 安装将失败。

安装后，我通过bumpy.test('full') 对其进行了测试，它说OK。

此时我尝试使用 pip 或从源代码安装 scipy。结果是一样的，它安装了，但是当我使用 scipy.test() 测试它时，我得到了大量的失败和一个错误。知道如何解决这个问题吗？

报告的错误是

```
ERROR: test_logm_consistency (test_matfuncs.TestExpM)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/scipy/linalg/tests/test_matfuncs.py", line 124, in test_logm_consistency
    assert_array_almost_equal(expm(logm(a)), a)
  File "/usr/local/lib/python2.7/site-packages/scipy/linalg/matfuncs.py", line 453, in logm
    errest = norm(expm(F)-A,1) / norm(A,1)
  File "/usr/local/lib/python2.7/site-packages/scipy/linalg/matfuncs.py", line 49, in expm
    A_L1 = norm(A,1)
  File "/usr/local/lib/python2.7/site-packages/scipy/linalg/misc.py", line 12, in norm
    a = np.asarray_chkfinite(a)
  File "/usr/local/lib/python2.7/site-packages/numpy/lib/function_base.py", line 590, in asarray_chkfinite
    "array must not contain infs or NaNs")
ValueError: array must not contain infs or NaNs 
```

相反，故障与 boas、basic、dot、asum、nrm2、arpack 有关。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T00:36:15.963

[我的建议是始终在virtualenv](http://www.virtualenv.org/en/latest/)中设置 python 计算环境（尤其是使用 scipy 和 numpy 等挑剔的包）。virtualenv 是一个工具，它允许您设置和切换到隔离的 Python 环境，以便在一个环境中安装和更改内容不会与其他环境混淆。

编辑：使用 virtualenv 的另一个原因是，如果你把所有事情都搞砸了，你并没有搞砸你的全局系统配置，你可以删除 virtualenv 并从头开始修复它。我还推荐[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)，它基本上只是一些让 virtualenv 更直观、使用更快的糖。

还要解决您的实际问题：我相信您仍然必须使用 scipy 的开发分支才能使其在 OSX 10.8 上成功编译。我几乎完全按照[这里的说明进行操作，一切正常。](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)

# jquery - jQuery Mobile 将“Retina”图标设置为默认值

> ID：13478556
> 
> 赞同：1
> 
> 时间：2012-11-20T17:19:41.750
> 
> 标签：jquery, css, jquery-mobile

我正在开发一个基于 jquery 移动的网站，并为视网膜显示设置 css。Jquery Mobile 包含 36px x 36px 图标大小，但默认使用 18px 版本。我找不到要添加到按钮以使其使用 36px 大小的 jQuery Mobile 类或数据属性。

看起来*ui-icon-alt类使用了正确的背景图像，但是当我将类从**ui-icon*更改为*ui-icon-alt*时，按钮根本不会呈现。这是我正在处理的问题按钮：

```
<a href="#" data-icon="arrow-l" data-role="button" class="show-back ui-btn-left ui-btn ui-btn-corner-all ui-btn-icon-notext" data-iconpos="notext">
    <span class="ui-btn-inner ">
        <span class="ui-btn-text">Back</span>
        <span class="ui-icon ui-icon-arrow-l"></span>
    </span>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:52:46.080

您无需为图标添加任何内容即可使用*Retina*版本。

根据 jQuery Mobile[文档](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-icons.html)，为了使用*视网膜*图标，您应该使用 css 媒体查询（如果您查看`jquery.mobile-1.2.0.css`文件，您会注意到他们是如何完成它的。

> 要添加高清图标，请创建一个 36x36 像素（正好是 18 像素大小的两倍）的图标，然后添加第二个规则，该规则使用 `-webkit-min-device-pixel-ratio: 2`媒体查询将规则仅定位到高分辨率显示器。指定高清图标文件的背景图像并将背景大小设置为 18x18 像素，这将使 36 像素图标适合相同的 18 像素空间。媒体查询块可以包装多个图标规则

和示例 css

```
@media only screen and (-webkit-min-device-pixel-ratio: 2) {
    .ui-icon-myapp-email {
        background-image: url("app-icon-email-highres.png");
        background-size: 18px 18px;
    }
    ...more HD icon rules go here...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T09:20:45.823

我相信你可以给主播一个ID，比如

```
<a id="backBtn" href="#">
<span class="ui-btn-inner ">
    <span class="ui-btn-text">Back</span>
    <span class="ui-icon ui-icon-arrow-l"></span>
</span> 
```

**注意：**如果你愿意，你可以删除所有这些 span(s) 和 class(s) 并保持简单，并且 jQuery 会为你处理其余的 css 类和布局。*示例*：

```
<a id="backBtn" href="#" data-icon="arrow-l" data-iconpos="notext">Back</a> 
```

然后在您的 my-custom.css 中，您可以编辑此特定 ID 的图标 url()，以及您希望它们使用 36px 图标而不是 18px 的其他按钮。*示例*：

```
#backBtn .ui-icon { 
     width: 36px; 
     height: 36px; 
     background-image: url(images/icons-36-white.png); 
} 
```

**请**让我知道它是否回答了您的问题，如果可以，请将其作为正确答案。

# macos - g++ 4.2.1：-O 中断链接到模板化函数

> ID：13478560
> 
> 赞同：1
> 
> 时间：2012-11-20T17:19:54.507
> 
> 标签：macos, templates, linker, g++, linker-errors

`g++ main.c f.c`下面适用于 g++-4.2.1，但
`g++ -O3 main.c f.c`会发出警告

```
/usr/libexec/gcc/powerpc-apple-darwin8/4.2.1/ld: Undefined symbols:
int f<int>(int const*)
collect2: ld returned 1 exit status

// main.c
template <typename T>
int f( const T* A );

int main()
{
    int* A = new int[10];
    int ftemplate = f( A );
}

// f.c
template <typename T>
int f( const T* A )
{   return A[0];
}

int call_f()
{   int* A = new int[10];
    return f( A );  // ok here but not from main()
} 
```

在 macosx 10.4.11 powerpc-apple-darwin8-g++-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5564) 上， `-O2`有效，`-O3`无效。
在 macosx 10.7.4 i686-apple-darwin11-llvm-g++-4.2 （来自[https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer)）上，
普通的`g++ *.c`作品，`g++ -O *.c`给出了同样的`ld: Undefined symbols`错误。
也许是一个错误 g++ <-> old /usr/bin/ld ？更有可能我做了一些愚蠢的事情......

谁能帮忙，或者看看这是否适用于非Mac？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:08:59.077

Unless you explicitly instantiate a function template for the arguments you use in a function call, you have to make the function template definition visible to the caller of it.

This includes the call in main.

It probably works in unoptimized builds because the compiler emits an exported function definition symbol for the implicit function template instantiation. The C++ Standard grants compilers to omit doing that, and GCC does it here for optimized builds (probably it just inlines the call and then the definitions symbol becomes unused).

# jquery - 修改此 jquery 以为页面上的每个链接分配随机边框颜色

> ID：13478562
> 
> 赞同：0
> 
> 时间：2012-11-20T17:20:01.807
> 
> 标签：jquery, arrays

我希望在底部有不同边框颜色的页面上有一系列链接。显然，我可以使用针对父 div 的 CSS 来设置样式，但是我认为如果我有一组颜色值，那么使用 jquery 必须有一种更简单的方法来做到这一点。

我找到了这个函数，它在悬停时添加了边框，但我想更改它，以便将它添加到 pa 作为默认值。希望这是有道理的。

不太确定该怎么做...任何指针都会很棒...

```
<script>
$(document).ready(function() {
    $("p a").hover(function(e) {
        var randomClass = getRandomClass();
        $(e.target).attr("class", randomClass);
    });
});

function getRandomClass() {
    //Store available css classes
    var classes = new Array("yellow", "pink", "green", "blue");

    //Give a random number from 0 to 5
    var randomNumber = Math.floor(Math.random() * 5);

    return classes[randomNumber];
}
</script> 
```

* * *

更新功能

```
 $(document).ready(function() {
 $("p a").hover(function(e)
    {
        var randomClass = getRandomClass();
        $(e.target).attr("class", randomClass);
    });
});
function getRandomClass()
{
    //Store available css classes
    var classes = new Array("yellow", "pink", "green", "blue");

    //Give a random number from 0 to 5
    var randomNumber = Math.floor(Math.random()*4);

    return classes[randomNumber];
}
$(document).ready(function() {
    $("p a").each(function() {
        $(this).addClass(getRandomClass());
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:22:10.757

这样的事情会做到这一点：

```
$(document).ready(function() {
    $("p a").each(function() {
        $(this).addClass(getRandomClass());
    });
}); 
```

用于[`.each()`](http://api.jquery.com/jQuery.each/)遍历`a`元素中的所有`p`元素并使用添加随机类[`.addClass()`](http://api.jquery.com/addClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:26:20.557

这应该这样做：

```
$(document).ready(function() {
    $("p a").each(function(){
        $(this).addClass(getRandomClass());
    });
    $("p a").hover(function(e) {
        var randomClass = getRandomClass();
        $(this).addClass(randomClass);
    },function(e){
        $(this).removeClass();
    });
}); 
```

问题是这些类没有被删除，所以最后出现在 css 中的类将是唯一应用的类。

# php - 在 pdo 数组中使用变量

> ID：13478563
> 
> 赞同：0
> 
> 时间：2012-11-20T17:20:03.260
> 
> 标签：php, mysql, pdo

简单的问题，我想。

我有以下 pdo 语句：

```
$sth = $db->prepare("SELECT person,job FROM orgstructure where department=:dept order by id asc"); 
$sth->bindParam(':dept', $departmentname, PDO::PARAM_STR); 
$sth->execute(); 
$dataArray = $sth->fetchAll();
echo $dataArray[0]['person'];
echo $dataArray[1]['job']; 
```

这两个回声是要测试的，它们 100% 有效。

稍后在我的表单中，我`for loop`根据 pdo 的输出提供了一个选择框选项，如下所示：

```
<table>
<?
    for ( $i = 1; $i <=50; $i++ ) { 

        ?>      
            <tr>
                <td> Job <? echo  $i; ?></td>
                <td>
                    <SELECT NAME=job<? echo $i; ?> id=job<? echo $i; ?> style="width:150px;border: 1px solid #2608c3;color:red"> 
                    <? echo  "<option selected>".$dataArray[$i]['job']."</option>"; ?>
                    <option>
                    <?=$optionjobs?> 
                    </option>
                    </SELECT>
                </td>
                <td> Person </td>
                <td>
                <? echo $i."person: ".$dataArray[$i]['person']."job: ".$dataArray[$i]['job']; ?>

                    <SELECT NAME=person<? echo $i; ?> id=person<? echo $i; ?> style="width:150px;border: 1px solid #2608c3;color:red">
                    <? echo  "<option selected>".$dataArray[$i]['person']."</option>"; ?>               
                    <option>
                    <?=$optionpersons?> 
                    </option>
                    </SELECT>
                </td>
            </tr>
        <?
            }
        ?>
</table> 
```

然而，这不起作用。如果我用文本替换 $dataarray，select 语句是正确的并且有效。

我假设问题在于 $dataArray 中使用的 $i 计数器？有什么建议么？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:43:47.863

Try this code, worked on my machine

```
<?php
    for ( $i = 1; $i <=50; $i++ ) { 

        ?>      
            <tr>
                <td> Job <?php echo  $i; ?></td>
                <td>
                    <SELECT NAME=job<?php echo $i; ?> id=job<?php echo $i; ?> style="width:150px;border: 1px solid #2608c3;color:red"> 
                    <?php echo  "<option selected>".$dataArray[$i]['job']."</option>"; ?>
                    <option>
                    <?php echo $optionjobs ?> 
                    </option>
                    </SELECT>
                </td>
                <td> Person </td>
                <td>
                <?php echo $i."person: ".$dataArray[$i]['person']."job: ".$dataArray[$i]['job']; ?>

                    <SELECT NAME=person<?php echo $i; ?> id=person<?php echo $i; ?> style="width:150px;border: 1px solid #2608c3;color:red">
                    <?php echo  "<option selected>".$dataArray[$i]['person']."</option>"; ?>               
                    <option>
                    <?php echo $optionpersons ?> 
                    </option>
                    </SELECT>
                </td>
            </tr>
        <?php
            }
        ?>
</table> 
```

# sql - SQL查询将两列合二为一

> ID：13478564
> 
> 赞同：2
> 
> 时间：2012-11-20T17:20:09.197
> 
> 标签：sql, sql-server, sql-server-2000

抱歉标题含糊。

我有一个 SQL 查询

```
SELECT SaleDate, Location, SUM(DollarSales)
FROM [TableName]
WHERE (SaleDate= '2012-11-19' OR SaleDate= '2012-11-12')
GROUP BY SaleDate, Location
ORDER BY Location, SaleDate 
```

我得到的结果如下

```
SaleDate                    Location    (No column name)
2012-11-12 00:00:00.000     002         21500.38
2012-11-19 00:00:00.000     002         24166.81
2012-11-12 00:00:00.000     016         14723.26
2012-11-19 00:00:00.000     016         12801.00 
```

我希望结果看起来像

```
Location    (Sale on 11/12)    (Sale on 11/19)
002         21500.38           24166.81
016         14723.26           12801.00 
```

我不想使用内部选择。有什么办法可以做到这一点。这是我们使用 SQL Server 2000 的旧系统之一。在此先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:24:54.260

你可以试试：

```
SELECT
Location,
SUM(CASE WHEN SaleDate = '2012-11-12' THEN DollarSales ELSE 0 END)'Sale on 11/12'
SUM(CASE WHEN SaleDate = '2012-11-19' THEN DollarSales ELSE 0 END)'Sale on 11/19'
FROM [TableName]
GROUP BY Location
ORDER BY Location 
```

这仅在列是静态的情况下才有效，如果日期更改，您将不得不更改此设置。

# c# - 在制作网络爬虫以获取总链接数时需要帮助来理解混淆

> ID：13478565
> 
> 赞同：3
> 
> 时间：2012-11-20T17:20:12.420
> 
> 标签：c#, regex, web-crawler, webrequest

我试图开始制作网络爬虫。进展顺利，直到我遇到了我无法理解的困惑。我写了以下代码：

我`http://www.google.com`作为字符串传递`URL`

```
public void crawlURL(string URL, string depth)
{
    if (!checkPageHasBeenCrawled(URL))
    {
        PageContent = getURLContent(URL);
        MatchCollection matches = Regex.Matches(PageContent, "href=\"", RegexOptions.IgnoreCase);
        int count = matches.Count;
    }
} 

private string getURLContent(string URL)
{
    string content;
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
    request.UserAgent = "Fetching contents Data";
    WebResponse response = request.GetResponse();
    Stream stream = response.GetResponseStream();

    StreamReader reader = new StreamReader(stream);
    content = reader.ReadToEnd();

    reader.Close();
    stream.Close();
    return content;
} 
```

问题：我正在尝试获取页面的所有链接（http://www.google.com 或任何其他网站），但我看到来自 Regex 匹配项的链接数量较少。当我手动检查源代码中的单词“href=”时，它给了我 19 个链接计数，它给了我 41 次出现。我不明白为什么它让我从代码中减少了单词的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:54:00.270

我修复并测试了您的正则表达式模式。以下应该更有效地工作。它从 google.ca 获得 11 个匹配项

```
public void crawlURL(string URL)
        {

            PageContent = getURLContent(URL);
            MatchCollection matches = Regex.Matches(PageContent, "(href=\"https?://[a-z0-9-._~:/?#\\[\\]@!$&'()*+,;=]+(?=\"|$))", RegexOptions.IgnoreCase);
            foreach (Match match in matches)
                Console.WriteLine(match.Value);

            int count = matches.Count;

        }

        private string getURLContent(string URL)
        {
            string content;
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
            request.UserAgent = "Fetching contents Data";
            WebResponse response = request.GetResponse();
            Stream stream = response.GetResponseStream();

            StreamReader reader = new StreamReader(stream);
            content = reader.ReadToEnd();

            reader.Close();
            stream.Close();
            return content;
        } 
```

# angularjs - AngularJS - 重定向到登录页面和会话 ID 的持久性

> ID：13478568
> 
> 赞同：16
> 
> 时间：2012-11-20T17:20:31.877
> 
> 标签：angularjs

我正在寻找一种方法来做这两件事，首先，如果没有找到 SessionID，我想将用户重定向到登录页面，其次我想听听您关于仅在内存中持久化会话 ID（没有 cookie）的意见。

我为重定向提出的解决方案是：

1 - 创建一个名为 OAuth 的服务，它将检查 SessionID 是否存在，如果不存在，则重定向到登录页面，该服务还负责登录和注销方法。

```
app.factory('OAuth', ['$http', function ($http) {

    var _SessionID = '';

    return { 
        login: function () {
            //Do login ans store sessionID in var _SessionID
        },

        logout: function () {
            //Do logout
        },

        isLoggedIn: function () {
            if(_SessionID) {
                return true;
            }
            //redirect to login page if false
        }
    };

}]); 
```

2 - 在每个控制器中注入新的 OAuth 服务并检查用户是否为 isLoggedIn

```
app.controller('myCtrl', ['$scope', 'OAuth', function ($scope, OAuth) {

    //check if user is logged
    OAuth.isLoggedIn();

}]); 
```

问题：

1 - isLoggedIn() 方法将在所有控制器中调用，所以我想知道是否有一种方法可以做到这一点，而不必注入服务并在每个控制器中调用它。

2 - 我不想使用 cookie 来存储 sessionID，而是将其保存在 OAuth 的 _SessionID 变量中，并为每个请求将其发送到服务器。这是一种可行/安全的方法吗？你能给我一些想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T13:44:20.987

我使用了类似的策略（拦截来自服务器的 401 响应）。您可以在此处查看完整示例：[https ://github.com/Khelldar/Angular-Express-Train-Seed](https://github.com/Khelldar/Angular-Express-Train-Seed)

它在后端使用 node 和 mobgodb 进行会话存储，并在客户端使用精简的 http 拦截器，它不会像上面链接的 Dan 那样重试请求：

```
 var interceptor = ['$q', '$location', '$rootScope', function ($q, $location, $rootScope) {
        function success(response) {
            return response;
        }

        function error(response) {
            var status = response.status;
            if (status == 401) {
                $location.path('/login');
            }
            return $q.reject(response);
        }

        return function (promise) {
            return promise.then(success, error);
        }
    }];
    $httpProvider.responseInterceptors.push(interceptor); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T17:39:15.197

我将从[这里](https://github.com/witoldsz/angular-http-auth)开始，Witold 创建了这个很酷的拦截器，它可以使用 http 响应。我使用它，它真的很有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-30T00:40:12.110

就我而言，我用

1.  带有 $httpProvider 的拦截器
2.  配置
3.  和 $window 依赖项，因为 $location 只是将路径附加到现有 url。发生的事情就像“ [http://www.tnote.me/#/api/auth](http://www.tnote.me/#/api/auth) ”，它应该像“ [http://www.tnote.me/auth](http://www.tnote.me/auth) ”

代码片段是这样的。

```
noteApp = angular.module('noteApp', ['ngRoute', 'ngCookies'])
  .factory('authInterceptor', ['$rootScope', '$q', '$cookies', '$window', 
    function($rootScope, $q, $cookies, $window) {
      return {
        request: function (req) {
          req.headers = req.headers || {};
          if ($cookies.token) {
            req.headers.Authorization = 'Bearer ' + $cookies.token;  
          }

          return req;
        },
        responseError: function (rejection) {
          if (rejection.status == 401) {
            $window.location = '/auth';      
          }

          return $q.reject(rejection);
        }
      }
  }])
  .config(['$routeProvider', '$httpProvider', function($httpProvider) {
    $httpProvider.interceptors.push('authInterceptor');  
    }
  ]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-27T12:45:42.830

> 这会奏效。它在我的应用程序中运行良好

```
var interceptor = function ($q, $location) {
        return {
            request: function (config) {//req
                console.log(config);
                return config;
            },

            response: function (result) {//res
                console.log('Repos:');
                console.log(result.status);
                return result;
            },

            responseError: function (rejection) {//error
                console.log('Failed with', rejection.status, 'status');
                if (rejection.status == 403) {
                    $location.url('/dashboard');
                }

                return $q.reject(rejection);
            }
        }
    };
    module.config(function ($httpProvider) {
        $httpProvider.interceptors.push(interceptor);
    }); 
```

# java - Android：何时使用 . 在 Android 清单中？

> ID：13478572
> 
> 赞同：0
> 
> 时间：2012-11-20T17:20:42.060
> 
> 标签：java, android, class, android-manifest

简单的问题：你什么时候必须用 . 在 de Manifest 文件中，为什么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:30:48.263

简单地在你的清单文件中。如果您的应用程序包含多个包，则表示您的主包（这是在您的应用程序中启动的第一个活动），因此对于该类，您必须指定 `full package name . class name`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T17:26:18.767

它与您在 Manfiest 中指定的包名称相关。

如果您的活动在清单中`com.example.myActivityPackage`并且在清单中您指定您的包是`com.example`，那么您选择的名称是`.myActivityPackage.myActivityClass`。

同样，如果您有一个位于 中的活动`completely.separate.package`，那么您必须将整个事物指定为`completely.separate.package.activityClass`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:22:36.340

这`.`只是应用程序本身的包名称的快捷方式。当活动在另一个包中时，您需要使用完全限定名称。当活动在同一个包（或子包）中时，仍然可以使用完整的包名，但`.`更容易阅读。

如果活动名称根本没有，则某些版本的构建工具似乎也会在应用程序包名称前面加上`.`，但这与[文档](http://developer.android.com/guide/topics/manifest/activity-element.html#nm)相反。

> 实现activity的类名，Activity的子类。属性值应该是一个完全限定的类名（例如，“ `com.example.project.ExtracurricularActivity`”）。但是，作为简写，如果名称的第一个字符是句点（例如，“ `.ExtracurricularActivity`”），则将其附加到`<manifest>`元素中指定的包名称中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T17:22:49.880

> 但是，作为简写，如果名称的第一个字符是句点（例如“.ExtracurricularActivity”），它会附加到 .

从 Android 源代码中，句点表示 Activity 存在于您的包中。

# symfony - Symfony2 + Monolog：针对不同错误级别的不同操作

> ID：13478573
> 
> 赞同：2
> 
> 时间：2012-11-20T17:20:43.907
> 
> 标签：symfony, monolog

我已经为我们的 Symfony2 项目设置了 Monolog，以便在发生严重错误时将它们通过电子邮件发送给我们。

但是，我还想记录非关键错误，并将这些错误通过电子邮件发送给不同的收件人。我很难在文档中看到这一点，但它看起来应该是可能的。我已经设置了如下配置：

```
parameters:
    error_mail_sender: error@mysite.com
    error_mail_recipients: [siteerrors@mysite.com]
    critical_error_mail_recipients: [siteerrors@mysite.com, developer@developers.com]

monolog:
    handlers:
        main_critical:
            type:         fingers_crossed
            action_level: critical
            handler:      grouped_critical
            bubble:       false
        main_error:
            type:         fingers_crossed
            action_level: error
            handler:      grouped_error
        grouped_critical:
            type:    group
            members: [streamed, buffered_critical]
        grouped_error:
            type:    group
            members: [streamed, buffered_error]
        streamed:
            type:  stream
            path:  "%kernel.logs_dir%/%kernel.environment%.log"
            level: debug
        buffered_critical:
            type:    buffer
            handler: swift_critical
        buffered_error:
            type:    buffer
            handler: swift_error
        swift_critical:
            type:       swift_mailer
            from_email: %error_mail_sender%
            to_email:   %error_mail_recipients%
            subject:    Critical error occurred!
            level:      debug
        swift_error:
            type:       swift_mailer
            from_email: %error_mail_sender%
            to_email:   %critical_error_mail_recipients%
            subject:    Non-critical error occurred
            level:      debug 
```

通过这种设置，我们会收到严重错误，但不会收到非严重错误。

此设置大致基于对以下问题的（未接受的）答案：[如何在电子邮件主题中包含日志的严重性？](https://stackoverflow.com/questions/12481353/how-to-include-the-severity-of-a-log-in-the-e-mail-subject). （如果答案对我有用，我会投票赞成的！！）

谁能发现这有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:35:56.503

问题似乎是气泡：第一个处理程序中的错误，这意味着它将停止将消息传播到其他处理程序。

另一个注意事项，我会从 grouped_critical 中删除组和流处理程序，因为它已经从 grouped_error 接收到错误，从而导致日志文件中出现重复条目​​。

所以这应该工作：

```
parameters:
    error_mail_sender: error@mysite.com
    error_mail_recipients: [siteerrors@mysite.com]
    critical_error_mail_recipients: [developer@developers.com]

monolog:
    handlers:
        main_critical:
            type:         fingers_crossed
            action_level: critical
            handler:      buffered_critical
        buffered_critical:
            type:    buffer
            handler: swift_critical
        swift_critical:
            type:       swift_mailer
            from_email: %error_mail_sender%
            to_email:   %error_mail_recipients%
            subject:    Critical error occurred!
            level:      debug

        main_error:
            type:         fingers_crossed
            action_level: error
            handler:      grouped_error
        grouped_error:
            type:    group
            members: [streamed, buffered_error]
        streamed:
            type:  stream
            path:  "%kernel.logs_dir%/%kernel.environment%.log"
            level: debug
        buffered_error:
            type:    buffer
            handler: swift_error
        swift_error:
            type:       swift_mailer
            from_email: %error_mail_sender%
            to_email:   %critical_error_mail_recipients%
            subject:    Non-critical error occurred
            level:      debug 
```

我对它们进行了重新排序，以便更容易看到两个处理程序链。

# objective-c - 坐标区域的中心坐标

> ID：13478580
> 
> 赞同：4
> 
> 时间：2012-11-20T17:21:06.173
> 
> 标签：objective-c, mkmapview, coordinates, geography

我有 2 个坐标，左上角和右下角。我想找到该区域的中心点。现在我有以下方法来计算它。中心点离得很远。当我用

```
[self.map setRegionTopLeft: CLLocationCoordinate2DMake(21.57524, -157.984514)
               bottomRight: CLLocationCoordinate2DMake(21.309766, -157.80766)
                  animated:YES]; 
```

它应该以美国夏威夷州的瓦胡岛为中心。[我在这里](http://mathforum.org/library/drmath/view/70471.html)找到了这个数学，所以我不确定发生了什么。

**代码 A** - 这太离谱了。它不会让我靠近岛屿。

```
- (CLLocationCoordinate2D)centerPointFromRegionTopLeft:(CLLocationCoordinate2D)topLeft
                                           bottomRight:(CLLocationCoordinate2D)bottomRight
{
    CLLocationCoordinate2D centerPoint;

    centerPoint.longitude = (topLeft.longitude + bottomRight.longitude) / 2;
    if (fabs(bottomRight.longitude - topLeft.longitude) > 180)
    {
        if (centerPoint.longitude > 0)
        {
            centerPoint.longitude = centerPoint.longitude + 180;
        } else {
            centerPoint.longitude = centerPoint.longitude - 180;
        }
    }

    centerPoint.latitude = asin((sin(bottomRight.latitude) + sin(topLeft.latitude))/2);

    return centerPoint;
} 
```

我最初也尝试过这种方法。当我想到矩形的中心时，这就是我脑海中突然出现的东西。如果让我更接近中心应该是什么 - 我可以看到这个岛 - 但它仍然关闭。

**代码 B** - 我尝试过的原始代码。这更接近我的预期，但仍然没有。

```
- (CLLocationCoordinate2D)centerPointFromRegionTopLeft:(CLLocationCoordinate2D)topLeft
                                           bottomRight:(CLLocationCoordinate2D)bottomRight
{
    CLLocationCoordinate2D centerPoint;

    centerPoint.latitude =  ((topLeft.latitude + bottomRight.latitude) / 2);
    centerPoint.longitude = ((topLeft.longitude + bottomRight.longitude) / 2);

    return centerPoint;
} 
```

那么给定一个坐标区域（topLeft，bottomRight）我如何获得中心坐标？这个想法是我应该能够给出任何 2 个坐标并获得中心坐标。

**更新***代码 B 有效。我的 topLeft 和 bottomRight 错了。代码 A 把我放在它应该在的地方非常南边和东边一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T00:02:37.503

您需要 L（经度）和 B（纬度）的中间值。对于 B 来说，问题出在杆子周围，但是当你设置它时，你根本不能“把帽子放在杆子上”，所以，这里真的没有问题。

```
Middle(B1,B2)=(B1+B2)/2. 
```

但 L 更糟。L 可以从 -179 跳到 -179。还有一个问题：(-179,+179) 的中间应该是 180，中间(-1,+1) 应该是 0。也就是说，我们应该始终在相对点之间沿着较短的路径选择中间，而不是围绕整个地球.

我们应该移动零子午线，使L1，L2之间的差异小于180，使它们成为正常中间，然后将零子午线返回。

*   让 L1
*   如果 L2-L1>180，我们选择 L2 作为新的零子午线。
    *   班次=L2
    *   L2=L2-移位，L1=L1+360-移位。现在，请注意，L1-L2<180！
    *   LmShifted=(L1+L2)/2
    *   Lm=LmShifted+移位。
    *   如果我们将这些公式放在一起，我们将有：
    *   Lm=(L1-L2+360)/2+L2
*   如果 L2-L1<180，Lm=(L1+L2)/2

问题是当 L2-L1=180 时。在这种情况下，您有两条相反的子午线，将地球一分为二，并且对于中间两个“四分之一”子午线的作用，右侧和左侧都合适。这取决于你，选择什么。

# c# - 创建范围表

> ID：13478581
> 
> 赞同：1
> 
> 时间：2012-11-20T17:21:12.047
> 
> 标签：c#

首先线程名称可能有点奇怪，但我会尽力解释我想在这里做什么，以便您可以建议我一个好的线程名称。

我想创建一个函数来通过检查他的经验来返回员工级别

如果经验是 0~50 他是 1 级 如果经验是 50~150 他是 2 级……以此类推直到 100 级

我在想的是创建一个 const int 来保存每个级别所需的所有 exp

```
public const int Level1 = 50,
                 Level2 = 150...; 
```

那么有没有办法让函数返回我想要的？不使用 1000++ 行？！。

请不要将我的问题视为垃圾邮件，我只是很困惑，如果需要，我会尽力澄清我的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:24:31.047

```
int level = Math.Min(10, experience / 10); 
```

会这样吗？

如果您想要 0-10 -> 1 和 11-20 -> 2 等，请按如下方式更改：

```
int level = Math.Min(10, (experience + 9) / 10); 
```

如果在经验获取中根本没有模式，或者一些非常模糊的模式，你可以使用这个：

```
var level = 1;

var levelRequirements = new int[] {10, 20, 50, 150, 300};
for (int i = 0; i < levelRequirements.Length; i++)
{
    if (levelRequirements[i] > currentExperience)
        break;
    level++;
} 
```

现在是我的最后更新：

```
var level = 0;

var levelRequirement = 0;
var levelRequirementAddition = 50;

while (currentExperience >= levelRequirement)
{
    levelRequirement += levelRequirementAddition;
    levelRequirementAddition += 50;
    level++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:23:51.943

由于该级别所需的 xp 公式`x`似乎是`25*(x²+x)`

您可以使用反函数：

```
public int GetLevel(int xp)
{
    return (int)(Math.Sqrt(1 + 4 * xp / 25) - 1) / 2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:24:39.123

```
public int ReturLevel(int experience)
{
    return (experience-1)/10 + 1;
} 
```

如果您的意思是“如果经验为 1~9” `-1`，则可以删除`(experience-1)`

如果您的意思是“如果经验是 11~20 他是 2 级”，请留下它

编辑：

如果您对水平功能的经验不遵循任何模式，那么是的，您必须为它们中的每一个单独制作一个案例。

```
if(experience > 20)
    return level 3;
else if(experience > 10)
    return level 2;
else
    return level 1; 
```

不同的设计模式会影响您添加这些不同案例的方式和方式，但如果您没有模式，则必须添加它们。

# python - 如何在 PyQt4 QtWebkit 中更改 User_Agent

> ID：13478582
> 
> 赞同：0
> 
> 时间：2012-11-20T17:21:13.433
> 
> 标签：python, pyqt

现在它看起来像这样：

```
Mozilla/5.0 (X11; Linux i686) AppleWebKit/534.34 (KHTML, like Gecko) Qt/4.8.1 Safari/534.34 
```

但我想把它改成这样：

```
Nokia5320XpressMusic/GoBrowser/1.6.0.70 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:28:57.843

最简单的方法是子类`QWebPage`化并覆盖[`userAgentForUrl`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwebpage.html#userAgentForUrl)- 方法，然后您可以`QWebView`使用[`setPage`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwebview.html#setPage).

# file - 使用 JSF 下载文件

> ID：13478584
> 
> 赞同：0
> 
> 时间：2012-11-20T17:21:21.850
> 
> 标签：file, jsf, download

每个人！

我有麻烦。我试图将 excel 文件保存在 jsf Web 应用程序中。我通过我的 utils 生成文件并尝试获取“保存”窗口，但我失败了。

这是我的代码：

```
 <div>
  <h:commandButton value="Apply" actionListener="#{hornPhonesBean.generateReport}"/>
  </div> 
```

和：

```
 public void generateReport(ActionEvent event) {
    System.out.println("GENERATE REPORT FROM = " + this.dateFrom + "; TO = " + this.dateTo);

    try {
        XSSFWorkbook workbook = (XSSFWorkbook) HornReportGenerator.getWorkbook(null, null);
        String fileName = "1.xlsx";

        FacesContext fc = FacesContext.getCurrentInstance();
        ExternalContext ec = fc.getExternalContext();

        // Some JSF component library or some Filter might have set some headers in the buffer beforehand. We want to get rid of them, else it may collide.
        ec.responseReset(); 

        // Check http://www.w3schools.com/media/media_mimeref.asp for all types. Use if necessary ExternalContext#getMimeType() for auto-detection based on filename.
        ec.setResponseContentType("application/vnd.ms-excel"); 

        // Set it with the file size. This header is optional. It will work if it's omitted, but the download progress will be unknown.
        //ec.setResponseContentLength(contentLength); 

        // The Save As popup magic is done here. You can give it any file name you want, this only won't work in MSIE, it will use current request URL as file name instead.
        ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); 

        OutputStream output = ec.getResponseOutputStream();
        workbook.write(output); 
        output.flush();
        output.close();

        fc.responseComplete(); // Important! Otherwise JSF will attempt to render the response which obviously will fail since it's already written with a file and closed.
        System.out.println("END");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我在这里和其他论坛阅读了建议-每个人都说我不应该使用，但我根本没有使用它。

然后我认为问题可能出在

```
 <ice:form>, 
```

我保存的地方

```
 <h:commandButton>, 
```

我改为

```
 <h:form>, 
```

但这没有帮助。

也许是请求中的问题 - 它具有标头 Faces-Request 部分/ajax。但我不确定。

请给我一些想法 - 我已经为这个疯狂的 jsf 下载问题花了 4 个小时）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:40:53.760

> *也许是请求中的问题 - 它具有标头 Faces-Request 部分/ajax。但我不确定。*

这表明该请求是一个 ajax 请求。您不能通过 ajax 下载文件。Ajax 请求由 JavaScript 处理，出于明显的安全原因，JavaScript 无法以编程方式弹出“*另存为*”对话框，也无法访问/操作客户端的磁盘文件系统。

但是，您的代码片段并未显示您正在使用 ajax。也许您过于简单化了，或者您正在使用 ICEfaces，它在所有标准 JSF 命令组件上静默自动启用 ajax。

在任何情况下，您都需要确保它**没有**发送 ajax 请求。

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)
*   [类路径中的 ICEfaces 库可防止在文件下载时弹出“另存为”对话框](https://stackoverflow.com/questions/13420958/ice-faces-libary-in-classpath-prevents-saveas-dialog-from-popping-up/13422428#13422428)

# database - 使用 HDBC / Haskell 将程序中的多个条目添加到 SQLite3 数据库

> ID：13478585
> 
> 赞同：0
> 
> 时间：2012-11-20T17:21:27.747
> 
> 标签：database, haskell, sqlite, hdbc

我正在尝试使用 Database.HDBC 和 Database.HDBC.Sqlite3。

要将表添加到 SQLite3 数据库，这是我在 GHCI 中输入的命令类型：

```
run conn "CREATE TABLE table1 (a INTEGER)" [] 
```

我现在想使用字符串列表从我的程序中将表名添加到数据库中。

这是我正在使用的变量：

```
tables = ["CREATE TABLE t1 (a INTEGER)","CREATE TABLE t2 (a INTEGER)",..] 
```

表被传递给我创建的名为 addTables 的函数：

```
addTables xs = [ run conn x [] | x <- xs ] 
```

但我的 addTables 函数返回此错误：

```
<interactive>:199:1:
    No instance for (Show (IO Integer))
      arising from a use of `print'
    Possible fix: add an instance declaration for (Show (IO Integer))
    In a stmt of an interactive GHCi command: print it 
```

我怀疑 Haskell 不喜欢不打印任何内容的列表推导？

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:26:15.000

不，问题是`IO`无法打印动作。看，你只是构建了一个动作列表，而不是运行它们。

试试这个：

```
addTables xs = sequence [run conn x [] | x <- xs] 
```

或者，等效地：

```
addTables xs = mapM (\x -> run conn x []) xs 
```

如果您不关心结果，`mapM_`则效率稍高。

# c# - 列表框转换为数组 int

> ID：13478586
> 
> 赞同：2
> 
> 时间：2012-11-20T17:21:28.810
> 
> 标签：c#, .net, arrays, listbox, int

我正在尝试将列表框转换为数组：

```
var modarray = listBox1.Items.Cast<String>().ToArray(); 
```

但后来我还需要使用一个 int 数组，所以我尝试了以下方法：

```
int[] arr = modarray.Cast<int>().ToArray(); 
```

我收到一个错误，表明无法转换数组。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:26:11.263

尝试这个：

```
int[] arr = modarray.Select(int.Parse).ToArray(); 
```

这将使用`int.Parse()`原始数组中每个字符串的方法来创建一个新的整数数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:25:13.547

试试这个：

```
int[] arr = modarray.Select(I => Convert.ToInt32(I)).ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:26:01.837

`.Cast<int>()`就好像`foreach (var i in list) yield return (int)i;`

如果您的项目是下面的字符串，则会失败。

我相信你需要：`int[] arr = modarray.Select(s => Int32.Parse(s)).ToArray();`

# solr - 将字段更改为 Ngram，现在不返回任何结果

> ID：13478587
> 
> 赞同：1
> 
> 时间：2012-11-20T17:21:36.080
> 
> 标签：solr, n-gram

我将文本字段的架构映射更新为：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">              
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" axGramSize="15" side="front"/>

  </analyzer>
  <analyzer type="query">     
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>     
  </analyzer>
</fieldType> 
```

但是，在这样做并重新索引索引之后，对于任何查询字符串，我都没有得到任何搜索结果。如果我`*`为 q 参数输入 a，我只会看到结果。

我的模式映射是完全错误的，还是我只是缺少一些简单的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:09:32.673

这是一个错字

```
axGramSize="15" 
```

需要是

```
maxGramSize="15" 
```

# javascript - 是否可以让我的 Firefox 扩展程序获得对其他程序的关注？

> ID：13478589
> 
> 赞同：4
> 
> 时间：2012-11-20T17:21:38.307
> 
> 标签：javascript, firefox, window, focus

我正在开发一个 Firefox 扩展，我需要将注意力集中在其他程序上。window.focus() 仅适用于其他 Firefox 窗口。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T12:56:47.913

这类似于我在这里回答的另一个问题：[xul:panel position on multiple monitor](https://stackoverflow.com/questions/10070456/xulpanel-position-on-multiple-monitors)

在 js-ctypes 加载/使用的外部 DLL 的帮助下，我能够实现您想要的。为了操纵操作系统级别的窗口焦点，您需要能够做两件事：

*   *找到*有问题的 Firefox 窗口（`find_window`下面的 javascript 函数），以及
*   聚焦窗口（`window_focus`下面的函数）。

我发现找到窗口句柄的最简单方法是将窗口标题更改为不会与其他窗口标题冲突的可预测的内容（例如 MD5 总和`"your-app"+(new Date())`），然后枚举所有操作系统级别的窗口以查找该窗口标题 ( `find_window`)。

一旦你有了一个窗口句柄，你就可以调用`window_focus`（定义如下）来关注操作系统级别的窗口。

* * *

Win32 示例：

以下是将外部 DLL 绑定到 JavaScript 的基础知识。此示例仅涵盖 Win32，但相同的过程适用于每个。

有3个部分：

*   用于加载/绑定平台特定（即：Win32）API 的特权 JavaScript 代码
*   我们外部 DLL 的 CPP 头文件
*   我们外部 DLL 的 CPP 源文件

我在 VS2010 中用后面的两个文件构建了一个简单的 GUI DLL 项目，并根据 msvcr100.dll 编译了 wmctrl.dll，并使用 Dependency Walker 找到了 DLL 导出的供 js-ctypes 使用的“普通 C”符号。

在特权 JavaScript 代码中（例如：在您的插件代码中）：

```
// import js-ctypes 
const {Cc,Ci,Cu} = require("chrome"); // you probably don't need this line.
var file=null, lib=null, ctypes = {};
Cu.import("resource://gre/modules/ctypes.jsm", ctypes);
var ctypes = ctypes.ctypes;

// build platform specific library path (yours will be named/located differently)
var filename = ctypes.libraryName("wmctrl");
var comp = "@mozilla.org/file/directory_service;1"; // read the docs for this!!!
var file = Cc[comp].getService(Ci.nsIProperties).get("CurProcD", Ci.nsIFile); 
file.append("browser_code"); // a sub-folder
file.append(filename);

// get the JavaScript library interface (load the library)
var lib = ctypes.open(file.path);

// wmctrl_find_window: returing unsigned 32bit (long) "window handle"
// takes string "window title".
var find_window = lib.declare("?wmctrl_find_window@@YAKPAD@Z", 
    ctypes.stdcall_abi, ctypes.uint32_t,
    ctypes.char.ptr);

// wmctrl_window_focus: takes unsigned 32bit (long) "window handle".
var window_focus = lib.declare("?wmctrl_window_focus@@YAXK@Z", 
    ctypes.stdcall_abi, ctypes.void_t,
    ctypes.uint32_t); 
```

wmctrldll.h

```
#ifdef WMCTRLDLL_EXPORTS
#define WMCTRLDLL_API __declspec(dllexport)
#else
#define WMCTRLDLL_API __declspec(dllimport)
#endif

WMCTRLDLL_API unsigned long wmctrl_find_window(char* find_title);
WMCTRLDLL_API void wmctrl_window_focus (unsigned long wid); 
```

wmctrldll.cpp

```
typedef struct {
  HWND hWnd;
  char title[255];
} myWinSpec;

BOOL CALLBACK EnumWindowsProc(HWND hWnd, LPARAM lParam) {
  char String[255];
  myWinSpec* to_find = (myWinSpec*) lParam;

  // not a window
  if (!hWnd) return TRUE;                                      

  // not visible
  if (!IsWindowVisible(hWnd)) return TRUE;

  // no window title                     
  if (!GetWindowTextA(hWnd, (LPSTR)String, 255)) return TRUE;  

  // no title match
  if (strcmp(String, to_find->title) != 0) return TRUE;        

  to_find->hWnd = hWnd;
  return FALSE;
}

WMCTRLDLL_API void wmctrl_window_focus(unsigned long wid) {
  SetForegroundWindow((HWND) wid);
}

WMCTRLDLL_API unsigned long wmctrl_find_window(char* find_title) {
  myWinSpec to_find;

  sprintf_s(to_find.title, sizeof(to_find.title), "%s", find_title);
  to_find.hWnd = 0;

  EnumWindows(EnumWindowsProc, (LPARAM)&to_find);
  return (unsigned long) to_find.hWnd;
} 
```

我也为 Linux (X11) 和 Mac OS X 做了这个，没有太大的困难。

# python-3.x - python3中的chardet和未知文件编码

> ID：13478592
> 
> 赞同：1
> 
> 时间：2012-11-20T17:21:49.773
> 
> 标签：python-3.x

我使用 chardet 来识别我的文件编码，但是发生了这个错误：

```
fh= open("file", mode="r")
sc= chardet.detect(fh)

Traceback (most recent call last):
  File "/home/alireza/test.py", line 19, in <module>
    sc= chardet.detect(fh)
  File "/usr/lib/python3/dist-packages/chardet/__init__.py", line 24, in detect
    u.feed(aBuf)
  File "/usr/lib/python3/dist-packages/chardet/universaldetector.py", line 65, in feed
    aLen = len(aBuf)
TypeError: object of type '_io.TextIOWrapper' has no len() 
```

我无法在不知道编码的情况下打开文件，

```
fh= open("file", mode="r").read()
sc= chardet.detect(fh)

Traceback (most recent call last):
  File "/home/alireza/workspacee/makecdown/test.py", line 21, in <module>
    fh= open("910.srt", mode="r").read()
  File "/usr/lib/python3.2/codecs.py", line 300, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xc7 in position 34: invalid continuation byte 
```

如何在没有打开文件的情况下使用 chardet？！或者在打开之后/之前找出文件编码的任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:42:02.840

尝试像这样打开文件

```
fh= open("file", mode="rb") 
```

# 命令行工具

如果这不起作用，请尝试使用 chardet 的命令行工具。来自[https://github.com/erikrose/chardet](https://github.com/erikrose/chardet)的描述：

> chardet 带有一个命令行脚本，它报告一个或多个文件的编码：
> 
> ```
> % chardetect.py somefile someotherfile
> somefile: windows-1252 with confidence 0.5
> someotherfile: ascii with confidence 1.0 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:41:40.237

[不是一个直接的答案，但您可以在此处http://getpython3.com/diveintopython3/case-study-porting-chardet-to-python-3.html](http://getpython3.com/diveintopython3/case-study-porting-chardet-to-python-3.html)找到它在 Python 3 中如何工作的描述。研究完之后，您可能会找到如何检测另一种特定编码的方法。

该代码最初源自[Mozilla Seamonkey](http://lxr.mozilla.org/seamonkey/source/extensions/universalchardet/src/base/)。您也可以在那里找到更多信息。或者寻找一些与 Seamonkey 相关的更高级的 Python 包。

# python - 基于距离的点列表的排序功能

> ID：13478596
> 
> 赞同：2
> 
> 时间：2012-11-20T17:21:57.637
> 
> 标签：python, function, point

[问题已被重写以澄清]

我正在尝试提出排序功能。正在排序的是一个点列表。

排序功能需要 3 分。一个来自要排序的点列表，另外两个用于比较。目标是确定要排序的点与其他两个点的相对欧几里得距离。当点直接位于两点之间时，应给出函数的最小值。该函数应利用两点之间的欧几里得距离。

到目前为止，该公式似乎应该是距离的一些平方，或者在两个给定点之间创建一个点，并使用到该点的欧几里得距离。下面我已经包括了两个可能的功能。

```
p is the point to be sorted
p1,p2 are the given points

def f(p,p1,p2): #Midpoint distance
   midPoint = midpoint(p1,p2)
   return distance(p,midPoint)

def f(p,p1,p2): #Sum of squares
   return distance(p,p1) ** 2 + distance(p,p2) ** 2

def distance(pointA,pointB): #Psudocode
   dx = pointA.x - pointB.x
   dy = pointA.y - pointB.y
   return sqrt(dx ** 2 + dy ** 2) 
```

下面是一个例子：

![在此处输入图像描述](../Images/e534c7507630b993762275727f2ef4bf.png)

这里考虑的两点是在它们之间画线的点。圈出的点应该是排序算法中的三个最低点。左边的近点因靠近两点之一但远离另一点而受到处罚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:29:35.757

好吧，使用平均值似乎是一种直观的方法（顺便说一下，这与使用总和相同）。您可以做的另一件事是使用“加权”平均值。例如，如果`a`是较短的距离，您可以使用`(2*a + b) / 3`, 例如（或通常`(m*a + b*n) / (m + n)`where `m > n`）给它更高的优先级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:36:17.243

也许[最小二乘](https://en.wikipedia.org/wiki/Least_squares)法会有所帮助？所以你对距离的*平方求和。*这样，左节点将因离行中的右节点太远而受到惩罚。

另一种选择是取两个基节点所形成的直线中点的距离。这也将更喜欢三个节点而不是左侧的一个。

# python - Pandas 中日期序列的算术运算（不是索引）

> ID：13478597
> 
> 赞同：4
> 
> 时间：2012-11-20T17:22:04.120
> 
> 标签：python, pandas

（Python 2.7，熊猫 0.9）

这似乎是一件简单的事情，但我不知道如何使用 Pandas 计算数据框中两个日期列之间的差异。此数据框已经有一个索引，因此不希望将任一列设为 DateTimeIndex。

要从我使用的字符串转换每个日期列：

```
data.Date_Column = pd.to_datetime(data.Date_Column) 
```

从那里，为了获得两列之间的经过时间，我这样做：

```
data.Closed_Date - data.Created_Date 
```

返回错误：

```
TypeError: %d format: a number is required, not a numpy.timedelta64 
```

检查两列上的 dtypes 产生 datetime64[ns] 并且数组中的各个日期是时间戳类型。

我错过了什么？

编辑：

这是一个示例，我可以创建单独的 DateTimeIndex 对象并完成我想要的，但是当我尝试在数据框的上下文中执行它时，它失败了。

```
Created_Date = pd.DatetimeIndex(data['Created_Date'], copy=True)
Closed_Date = pd.DatetimeIndex(data['Closed_Date'], copy=True)

Closed_Date.day - Created_Date.day
[Out] array([ -3, -16,   5, ...,   0,   0,   0]) 
```

现在相同，但在数据框中：

```
data.Created_Date = pd.DatetimeIndex(data['Created_Date'], copy=True)
data.Closed_Date = pd.DatetimeIndex(data.Closed_Date, copy=True)

data.Created_Date.day - data.Created_Date.day

AttributeError: 'Series' object has no attribute 'day' 
```

如果您想尝试一下，这里有一些数据：

```
data['Created Date'][0:10].to_dict()
{0: '1/1/2009 0:00',
 1: '1/1/2009 0:00',
 2: '1/1/2009 0:00',
 3: '1/1/2009 0:00',
 4: '1/1/2009 0:00',
 5: '1/1/2009 0:00',
 6: '1/1/2009 0:00',
 7: '1/1/2009 0:00',
 8: '1/1/2009 0:00',
 9: '1/1/2009 0:00'}

data['Closed Date'][0:10].to_dict()
{0: '1/7/2009 0:00',
 1: nan,
 2: '1/1/2009 0:00',
 3: '1/1/2009 0:00',
 4: '1/1/2009 0:00',
 5: '1/12/2009 0:00',
 6: '1/12/2009 0:00',
 7: '1/7/2009 0:00',
 8: '1/10/2009 0:00',
 9: '1/7/2009 0:00'} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T21:07:57.290

更新：一个有用的解决方法是使用 DatetimeIndex 构造函数（通常比应用快得多）粉碎它，例如：

```
DatetimeIndex(df['Created_Date']).day 
```

在 0.15 中，这将在 dt 属性中可用（以及其他日期时间方法）：

```
df['Created_Date'].dt.day 
```

* * *

您的错误是语法，尽管人们可能希望它会起作用，但它不会：

```
data.Created_Date.day - data.Created_Date.day
AttributeError: 'Series' object has no attribute 'day' 
```

通过像这样更复杂的选择，您可以使用[`apply`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html?highlight=apply#pandas.DataFrame.apply)：

```
In [111]: df['sub'] = df.apply(lambda x: x['Created_Date'].day - x['Closed_Date'].day, axis=1)

In [112]: df[['Created_Date','Closed_Date','sub']]
Out[112]: 
         Created_Date         Closed_Date  sub
0 2009-01-07 00:00:00 2009-01-01 00:00:00    6
1                 NaT 2009-01-01 00:00:00    9
2 2009-01-01 00:00:00 2009-01-01 00:00:00    0
3 2009-01-01 00:00:00 2009-01-01 00:00:00    0
4 2009-01-01 00:00:00 2009-01-01 00:00:00    0
5 2009-01-12 00:00:00 2009-01-01 00:00:00   11
6 2009-01-12 00:00:00 2009-01-01 00:00:00   11
7 2009-01-07 00:00:00 2009-01-01 00:00:00    6
8 2009-01-10 00:00:00 2009-01-01 00:00:00    9
9 2009-01-07 00:00:00 2009-01-01 00:00:00    6 
```

**请注意**，您可能应该对这些`NaT`s 分别做一些事情：

```
In [114]: df.ix[1][1].day # NaT.day
Out[114]: -1 
```

.

*`.days`注意：在 timedelta 上使用类似的奇怪行为`NaT`：*

```
In [115]: df['sub2'] = df.apply(lambda x: (x['a'] - x['b']).days, axis=1)

In [116]: df['sub2'][1]
Out[116]: 92505 
```

# asp.net-mvc - ModelState.IsValid 无效。为什么我可以创建用户？

> ID：13478605
> 
> 赞同：0
> 
> 时间：2012-11-20T17:22:22.560
> 
> 标签：asp.net-mvc, asp.net-mvc-4, model

更新：发现我认为 modelState.isValid 的原因是错误的。该模型有 7 个属性...调试时我发现该模型仅从视图中接收 6 个属性。

我的复选框没有发送到控制器？我应该做任何额外的配置来实现它吗？

这是视图：

```
 @using (Ajax.BeginForm("Register", "Account", new AjaxOptions { HttpMethod = "POST", OnSuccess = "closeDialog('RegistroUsuario', '<b>Usuário cadastrado com Sucesso!</b>', true)" }, new { id = "FormRegistroUsuario" }))
{
   <fieldset>
        <legend>Cadastro novo Usuário</legend>
       <table id="changePassword">
                <tr>
                    <td class="smallField">Username:</td>
                    <td>@Html.TextBoxFor(m => m.UserName,new { @class = "validate[required]" }) @Html.ValidationMessage("usernameVal", "*")</td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td>@Html.PasswordFor(m => m.Password, new { @class = "validate[required]" }) @Html.ValidationMessage("passwordVal", "*")</td>
                </tr>
                <tr>
                    <td>Repetir Senha:</td>
                    <td>@Html.PasswordFor(m => m.ConfirmPassword, new { @class = "validate[required,equals[Password]]" }) @Html.ValidationMessage("senhaVal", "*")</td>
                </tr>
                <tr>
                    <td>Email:</td>
                    <td>@Html.TextBoxFor(m => m.Email, new { @class = "validate[required,custom[email]]" }) @Html.ValidationMessage("emailVal", "*")</td>
                </tr>
                <tr>
                    <td>Pergunta Secreta:</td>
                    <td>@Html.TextBoxFor(m => m.SecretQuestion, new { @class = "validate[required]" }) @Html.ValidationMessage("secretVal", "*")</td>
                </tr>
                               <tr>
                    <td>Resposta:</td>
                    <td>@Html.TextBoxFor(m => m.SecretQuestionPassword, new { @class = "validate[required]" }) @Html.ValidationMessage("awnserVal", "*")</td>
                </tr>
                <tr>
                    <td>Ativo:</td>
                    <td><input type="checkbox" name="status" id="status" value="Ativo" data-val="true"/> @Html.ValidationMessage("activeVal", "*")</td>
                </tr>    
            </table>  
       <input type="submit" value="Criar Usuário" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only button-link"/>         
    </fieldset>

} 
```

谢谢...

* * *

这是一个非常奇怪的行为
，由于某种原因，我仍然会创建用户。

有时，由于用户名已经存在，因此未创建用户。（即使用户不存在）..很奇怪

```
 if (ModelState.IsValid)
        {

            MembershipProvider mp = Membership.Provider;
            MembershipCreateStatus Status;
            string erroMsg;

            if (String.IsNullOrEmpty(Request.Form["status"]))
            {
                model.Active = false;
            }
            else
            {
                model.Active = true;
            }

            MembershipUser newUser = mp.CreateUser(model.UserName, model.Password, model.Email, model.SecretQuestion, model.SecretQuestionPassword, model.Active, Guid.NewGuid(), out Status);

            try
            {

                if (newUser == null)
                {
                    erroMsg = GetErrorMessage(Status);
                    return Content(erroMsg);
                }
                else
                {
                    return Content("Usuário Cadastrado");
                }

            }
            catch (MembershipCreateUserException e)
            {
                throw e;
            }
            catch (Exception e)
            {
                throw new MembershipCreateUserException("An exception occurred creating the user.", e);
            }
        }
        else
        {
            return Content("isValid is false!");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T01:11:44.483

我终于找到了遮阳篷。模型确实不一致。输入复选框未发送到模型，因此导致 model.isValid 为假。

我使用 helper html 复选框解决了这个问题。

```
<td>@Html.CheckBoxFor(m => m.Active)</td> 
```

我所要做的就是让复选框的正确值

```
bool checkvalue = bool.Parse(Request.Form.GetValues("Active")[0]); 
```

非常感谢！

# c# - 将文本文件解析为字典

> ID：13478607
> 
> 赞同：1
> 
> 时间：2012-11-20T17:22:30.057
> 
> 标签：c#, file, parsing, text, dictionary

我有一个包含数百个配置值的文本文件。配置数据的一般格式是“Label:Value”。使用 C# .net，我想阅读这些配置，并在代码的其他部分使用这些值。我的第一个想法是我会使用字符串搜索来查找标签，然后解析出标签后面的值并将它们添加到字典中，但考虑到我必须搜索的标签/值的数量，这似乎相当乏味. 我很想听听有关执行此任务的可能架构的一些想法。我已经包含了一个示例文本文件的一小部分，其中包含一些标签和值（如下）。一些注意事项： 值并不总是数字（如 AUX 序列号所示）；不管什么原因，文本文件使用空格 (\s) 而不是制表符 (\t) 进行格式化。提前感谢您花时间思考这个问题。

示例文本：

```
 AUX Serial Number:  445P000023       AUX Hardware Rev:           1

 Barometric Pressure Slope:     -1.452153E-02
 Barometric Pressure Intercept: 9.524336E+02 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T19:14:59.383

这是一个不错的小脑筋急转弯。我认为这段代码可能能够为您指明正确的方向。请记住，这填充了 a `Dictionary<string, string>`，因此没有将值转换为整数等。另外，请原谅混乱（以及糟糕的命名约定）。这是根据我的思路快速写的。

```
Dictionary<string, string> allTheThings = new Dictionary<string, string>();

public void ReadIt()
{
    // Open the file into a streamreader
    using (System.IO.StreamReader sr = new System.IO.StreamReader("text_path_here.txt"))
    {
        while (!sr.EndOfStream) // Keep reading until we get to the end
        {
            string splitMe = sr.ReadLine();
            string[] bananaSplits = splitMe.Split(new char[] { ':' }); //Split at the colons

            if (bananaSplits.Length < 2) // If we get less than 2 results, discard them
                continue; 
            else if (bananaSplits.Length == 2) // Easy part. If there are 2 results, add them to the dictionary
                allTheThings.Add(bananaSplits[0].Trim(), bananaSplits[1].Trim());
            else if (bananaSplits.Length > 2)
                SplitItGood(splitMe, allTheThings); // Hard part. If there are more than 2 results, use the method below.
        }
    }
}

public void SplitItGood(string stringInput, Dictionary<string, string> dictInput)
{
    StringBuilder sb = new StringBuilder();
    List<string> fish = new List<string>(); // This list will hold the keys and values as we find them
    bool hasFirstValue = false;

    foreach (char c in stringInput) // Iterate through each character in the input
    {
        if (c != ':') // Keep building the string until we reach a colon
            sb.Append(c);
        else if (c == ':' && !hasFirstValue)
        {
            fish.Add(sb.ToString().Trim());
            sb.Clear();
            hasFirstValue = true;
        }
        else if (c == ':' && hasFirstValue)
        {

            // Below, the StringBuilder currently has something like this:
            // "    235235         Some Text Here"
            // We trim the leading whitespace, then split at the first sign of a double space
            string[] bananaSplit = sb.ToString()
                                     .Trim()
                                     .Split(new string[] { "  " },
                                            StringSplitOptions.RemoveEmptyEntries);

            // Add both results to the list
            fish.Add(bananaSplit[0].Trim());
            fish.Add(bananaSplit[1].Trim());
            sb.Clear();
        }                    
    }

    fish.Add(sb.ToString().Trim()); // Add the last result to the list

    for (int i = 0; i < fish.Count; i += 2)
    {
        // This for loop assumes that the amount of keys and values added together
        // is an even number. If it comes out odd, then one of the lines on the input
        // text file wasn't parsed correctly or wasn't generated correctly.
        dictInput.Add(fish[i], fish[i + 1]); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T11:24:04.110

我有另一个想法。值是否包含空格？如果没有，你可以这样做：

1.  忽略空格，直到您读取一些其他字符（键的第一个字符）。
2.  读取字符串直到 ':' 出现。
3.  你得到的修剪钥匙。
4.  忽略空格，直到您读取其他字符（值的第一个字符）。
5.  阅读直到你得到空字符。
6.  修剪你得到的价值。
7.  如果它是结束比停止。否则，返回步骤 1。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T20:25:51.287

这可能是我写过的最脏的函数，但它确实有效。

```
 StreamReader reader = new StreamReader("c:/yourFile.txt");

            Dictionary<string, string> yourDic = new Dictionary<string, string>();            

            StreamReader reader = new StreamReader("c:/yourFile.txt");

            Dictionary<string, string> yourDic = new Dictionary<string, string>();

            while (reader.Peek() >= 0)
            {
                string line = reader.ReadLine();
                string[] data = line.Split(':');

                if (line != String.Empty)
                {
                    for (int i = 0; i < data.Length - 1; i++)
                    {
                        if (i != 0)
                        {
                            bool isPair;
                            if (i % 2 == 0)
                            {
                                isPair = true;
                            }
                            else
                            {
                                isPair = false;
                            }

                            if (isPair)
                            {
                                string keyOdd = data[i].Trim();
                                try { keyOdd = keyOdd.Substring(keyOdd.IndexOf(' ')).TrimStart(); }
                                catch { }
                                string valueOdd = data[i + 1].TrimStart();
                                try { valueOdd = valueOdd.Remove(valueOdd.IndexOf(' ')); } catch{}
                                yourDic.Add(keyOdd, valueOdd);
                            }
                            else
                            {
                                string keyPair = data[i].TrimStart();
                                keyPair = keyPair.Substring(keyPair.IndexOf(' ')).Trim();
                                string valuePair = data[i + 1].TrimStart();
                                try { valuePair = valuePair.Remove(valuePair.IndexOf(' ')); } catch { }
                                yourDic.Add(keyPair, valuePair);
                            }

                        }
                        else
                        {
                            string key = data[i].Trim();
                            string value = data[i + 1].TrimStart();
                            try { value = value.Remove(value.IndexOf(' ')); } catch{}
                            yourDic.Add(key, value);
                        }
                    }
                }
            } 
```

它是如何工作的？，很好地分割线，你可以知道你可以在数组的每个位置得到什么，所以我只使用偶数和奇数值。当您调试此功能时，您会理解我的：D。它填充了您需要的字典。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:42:09.897

因此，鉴于您受限于格式，我能想到的唯一通用方法是首先找到该行的第一个冒号并将其前面的所有内容作为标签。跳过所有 whilespace 字符，直到您到达第一个非空白字符。将所有非空白字符作为标签的值。如果该值结束后有一个冒号，则将前一个值结束后的所有内容作为下一个值并重复。您可能还需要修剪标签周围的空白。

您可能可以使用正则表达式来捕捉该含义，但如果可以的话，它可能不会是一个漂亮的含义；除非您整个开发团队都*非常*精通它们，否则我会避免使用这种复杂的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T18:04:35.477

我会尝试这样的事情：

1.  当字符串包含三倍空格时，将其替换为双倍空格。
2.  将所有“：”和“：”（：带双空格）替换为“：”。
3.  将所有“”（双空格）替换为 '\n'（新行）。
4.  如果行不包含 ':' 则跳过该行。否则，使用 string.Split(':')。这样，您将收到 2 个字符串（键和值）的数组。其中一些可能在开头或结尾包含空字符。
5.  使用 string.Trim() 去除那些空字符。
6.  将接收到的键和值添加到字典。

我不确定它是否能解决你所有的情况，但这是我将如何尝试做的一般线索。如果它有效，您可以考虑性能（尽可能使用 StringBuilder 而不是 string 等）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-20T17:43:07.507

也许这样的事情会起作用，小心'：'字符

```
 StreamReader reader = new StreamReader("c:/yourFile.txt");

            Dictionary<string, string> yourDic = new Dictionary<string, string>();

            while (reader.Peek() >= 0)
            {
                 string line = reader.ReadLine();
                 yourDic.Add(line.Split(':')[0], line.Split(':')[1]);
            } 
```

无论如何，我建议以某种方式组织该文件，以便您始终知道它的格式。

# php - 1 个文件中不同域的不同内容

> ID：13478608
> 
> 赞同：1
> 
> 时间：2012-11-20T17:22:32.600
> 
> 标签：php

试图为 3 个不同的域创建一个 index.php 文件......所以我需要为不同的域显示不同的内容。但希望它也适用于子文件夹的“子文件夹”，我的意思是 site1.com/some_content

这是我的代码，但它不能按我的意愿工作。

```
<?php
    $host = $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
    if($host == 'site1.com')  {
        echo "A LOT OF HTML JAVASCRIPT AND CSS";
    }
    if($host == 'site2.com')  {
        echo "Same here but different content";
    }
    if($host == 'site3.com')  {
        echo "Cats and flowers";
    }
?> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:31:43.880

如果您使用的是 Apache，您可以在`.htaccess`文件中定义如下内容：

```
SetEnvIfNoCase Host "^development.example.com$" APPLICATION_ENV=development
SetEnvIfNoCase Host "^staging.example.com$"     APPLICATION_ENV=staging
SetEnvIfNoCase Host "^example.com$"             APPLICATION_ENV=production 
```

然后，在您的 index.php 文件（或您在每个页面加载中包含的任何内容）中添加以下内容：

```
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production')); 
```

之后，您可以读取`APPLICATION_ENV`代码中任何位置的值，以确定您目前所处的环境，如下所示：

```
switch (APPLICATION_ENV) {
   case 'development':
       // do stuff
       break;

   case 'staging':
       // do stuff
       break;

   case 'production':
   default:
       // do stuff
       break;
} 
```

您可以将多个主机名指向 /etc/hosts（或 C:/Windows/System32/drivers/etc/hosts）文件中的同一个 IP/主机，如下所示（假设它位于 localhost 上）：

```
127.0.0.1 development.example.com
127.0.0.1 staging.example.com
127.0.0.1 example.com 
```

我知道拥有一个全局常量不是主意，但它比依赖 HTTP_HOST 更好，因为它可以很容易地改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:26:54.260

`$host = $_SERVER["HTTP_HOST"];`
你不需要剩下的。

我将不得不注意到你很可能做错了什么。至少创建 3 个不同的脚本，或者更确切地说，使用它自己的脚本将每个域映射到不同的目录。在代码中出现这样的混乱是一种不好的做法。

# spring - 无法从托管 bean 实例化 Spring Bean，Spring + JSF

> ID：13478611
> 
> 赞同：1
> 
> 时间：2012-11-20T17:22:37.130
> 
> 标签：spring, jsf, managed-bean

我创建了一个使用 JSF 和托管 bean 的简单应用程序。我试图从托管 bean 实例化一个将数据存储到数据库的 spring bean。但是“@Autowired”注释似乎不起作用，因为我得到了一个 nullPointerExcpetion。我阅读了有关如何使用 JSF 和 Spring 托管 bean 的所有相关主题，但无法解决问题。也许有人可以看看下面的代码并给我一个提示？

```
########## ManagedBean #########

    @零件
    @Scope("请求")
    @Qualifier("memberBean")
    公共类 ProjectEntityHandlerBean
    {

      私有列表项目列表；

      @自动连线
      私人项目豆本地项目豆；

    公共 ProjectEntityHandlerBean()
    {

    }

    公共列表 getProjectList() {  
        返回项目列表；  
    }

        公共字符串 getAllProjects()
        {       
            projectList = projectBean.getAllProjects();
            返回“真”；      
        }

```

服务 Bean

```
    @服务
    公共类 ProjectBean 实现 ProjectBeanLocal {

          @PersistenceContext
          私人 EntityManager em;

        /**
         * 默认构造函数。
         */

        公共项目Bean（）{
            // TODO 自动生成的构造函数存根
        }

        @Transactional
        公共列表 getAllProjects()

        {   
            System.out.println("ProjectBean 调用");

            查询 query = em.createQuery("SELECT p FROM Project p");

            @SuppressWarnings("未选中")

        列出项目 = query.getResultList();                 
            返回项目；
        }

```

faces.config.xml

```
 <application>
     <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
    </application>

    <managed-bean>
        <managed-bean-name>loginBean</managed-bean-name>
        <managed-bean-class>com.example.controller.LoginBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>ProjectEntityHandlerBean</managed-bean-name>
        <managed-bean-class>com.example.controller.ProjectEntityHandlerBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:59:32.600

如果您看到您的配置`@component`是 Spring 注释。而你`ProjectEntityHandlerBean`在`faces-config.xml`. 因此，首先将您`ProjectEntityHandlerBean`实例化为 JSF ManagedBean。

因此，您必须像这样将您的服务`@ManagedProperty`类`<managed-property>`注入到 JSF 托管 bean 中。在这种特定情况下，您将 bean 定义`faces-config.xml`为像这样注入。

```
<managed-bean>
  <managed-bean-name>ProjectEntityHandlerBean</managed-bean-name>
  <managed-bean-class>com.example.controller.ProjectEntityHandlerBean</managed-bean-class>
  <managed-bean-scope>request</managed-bean-scope>
  <managed-property>
   <property-name>ProjectBeanLocal</property-name>
   <property-class>Qualified path for this class</property-class>
   <value>#{projectBeanLocal}</value>
  </managed-property>
 </managed-bean> 
```

去掉`@Autowired`上面的`ProjectEntityHandlerBean`。

**`Important :`**您只能使用`@Autowired`注解将一个 Spring Bean 注入另一个 Spring Bean。如果您想将一个 Spring Bean 注入 JSF Managed Bean 或将一个 JSF ManagedBean 注入另一个 JSF ManagedBean，`@ManagedProperty`如果您使用的是 JSF 2.0 或更高版本或`<managed-propety>`jsf 1.2 版本，则可以使用.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:32:48.063

Srinivas，谢谢你的帮助。那行得通！

所以我所做的是：我删除了`@Autowire`and

我按照您的建议更改了 faces-config.xml，但略有不同：

```
<property-name>projectBean</property-name>
<property-class>Qualified path for this class</property-class>
<value>#{projectBean}</value> 
```

我需要提一下我正在使用 JSF2.0。我使用`<managed-property>`了 @ManagedProperty。仍然可以正常工作。这是我应该担心的事情吗？我这么说是因为你提到 JSF2.0 或更高版本我应该使用 @ManagedProperty

PS：很抱歉我将其发布为“asnwer”，但我真的找不到更新我原来的问题的方法。

# c++ - 如何在 Perl（或 C++）中返回以某些字符开头和结尾的所有字符？

> ID：13478618
> 
> 赞同：1
> 
> 时间：2012-11-20T17:23:00.693
> 
> 标签：c++, string, perl, input, io

**注意：**我在 Linux 上运行 Perl 5

我目前正在做一个项目，我必须输入几个单词，然后返回以“d”开头并以“e”结尾的单词。我没有使用预先完成的列表，例如我输入到控制台*Done、Dish、Dome 和 Death*中。我希望它返回*Done 和 Dome*，而不是其他词。我希望获得如何在 Perl 中执行此操作的帮助，但如果 Perl 不成功，C++ 会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:25:45.753

`perl -ne ' print if /^d/i && /e$/i ' < words`

由于您使用的是 Linux，因此使用 grep(1) 可能更简单：

`grep -i '^d.*e$' < words`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T17:25:21.093

这在 Perl 中几乎是微不足道的：

```
$ perl -nE 'say "ok" if /^d.*e$/i'
Done
ok
Dish
Dome
ok
Death 
```

如果行匹配，它将从 STDIN 和`say`s读取。`ok`这在调试正则表达式时很有用。你只想输出匹配的行，所以你可以简单地替换 `say "ok"`为`say`

```
$ perl -nlE 'say if /^d.*e$/i' words 
```

while`words`是你的 words 文件的文件名。它神奇地读出了它的台词。该正则表达式匹配的简短说明：

```
^    # start of the line
d    # the literal character 'd' (case-insensitive because of the i switch)
.*   # everything allowed here
$    # end of the line 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T17:25:56.157

我不经常回答 perl 问题，但我认为这可以解决问题。

```
my @words = ...;
@words = grep(/^d.*e$/i, @words); 
```

grep 使用正则表达式来过滤单词。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T20:56:32.423

怎么样：

```
#!/usr/bin/perl -Tw

use strict;
use warnings;

for my $word (@ARGV) {

    if ( $word =~ m{\A d .* e \z}xmsi ) {

        print "$word\n";
    }
} 
```

# javascript - div内的jQuery选择器锚点

> ID：13478619
> 
> 赞同：5
> 
> 时间：2012-11-20T17:23:03.240
> 
> 标签：javascript, jquery, html, selector

我有以下 HTML 代码：

```
<div id="mycontainer">
   <p> title </p>
   <ul>
   <li><span>**</span><a href="...">KEY</a></li>
   </ul>
   <ul>
   ...
   </ul>
</div> 
```

我将如何获得 KEY 值？换句话说，从这个 id = "mycontainer" 的 div 中，我将如何从第一个 ul 中获取元素的内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T17:24:09.263

```
$("#mycontainer ul:first a").text(); 
```

在这里，有一个小提琴：http: [//jsfiddle.net/8tvTt/](http://jsfiddle.net/8tvTt/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:25:05.417

这样的事情将实现你所追求的：

`$("#mycontainer ul:first a").text();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:24:23.237

这有效：

```
$('#mycontainer ul:eq(0) a').text(); 
```

这也有效：（更具可读性）

```
$('#mycontainer ul:first a').text(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T17:24:41.877

用这个：

```
$('#mycontainer a').text(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T17:54:13.230

虽然许多现有的答案将实现您所追求的，但我认为您真正要求的（或至少您真正需要的）是对[jQuery 选择器](http://www.w3schools.com/jquery/jquery_ref_selectors.asp)和[DOM 遍历](http://api.jquery.com/category/Traversing/?rdfrom=http%3A%2F%2Fdocs.jquery.com%2Fmw%2Findex.php%3Ftitle%3DTraversing%26redirect%3Dno)的一些熟悉。

很多人似乎都假设您想要链接元素的内部文本，我不确定是否如此。在不提供此标记的变化并且不考虑选择器的速度的情况下，任何数量的答案都可以满足您的需求，包括一些愚蠢的东西，`$('a').text();`因为它是`a`您提供的标记中唯一的。我们只能猜测情况。了解每个答案的工作原理（以及为什么不成功的答案不这样）以及为什么会更有帮助。

选择器的特殊性是可取的，但您必须权衡通过 DOM 的实际代价高昂的旅行的成本和收益。你会一直得到链接的文本内容吗？它可能包含html吗？你真的想得到包装`<a>`吗？

如果您只想要唯一`a`inside的文本内容`#mycontainer`，请确定：

```
$("#mycontainer ul:first a").text(); 
```

但`$('#mycontainer').find('a').text();`可能会更快。（等等，什么是`find()`？，你问，为什么它更快？）但是如果 KEY 被格式化了`<strong>`，并且你希望它延续到你正在用它做的任何事情上呢？您可能想`.html()`改用。如果你想要它`a`本身，为什么不：

```
$("#mycontainer ul:first a"); 
```

但是如果每个`li`人都有一个`a?`

```
$("#mycontainer ul:first li:first a").clone(); 
```

你也想要跨度吗？

```
$("#mycontainer ul:first li:first").clone(); 
```

或者

```
$("#mycontainer ul:first li:first").html(); 
```

你也想要包装`<li>`吗？

```
$("#mycontainer ul:first li:first").clone(); 
```

玩玩，多读一些，然后你不会让每个人（包括我自己）都如此贪婪地寻找一些愚蠢的、简单的代表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T17:26:44.033

你需要阅读 jquery 选择器...但是使用这个

```
$('#mycontainer ul:first a').text(); 
```

# mysql - Jboss7数据源配置工作在mysql主从模式

> ID：13478623
> 
> 赞同：1
> 
> 时间：2012-11-20T17:23:13.103
> 
> 标签：mysql, spring, hibernate, jboss7.x

以下是我在standalone.xml 文件中的数据源

```
 <datasources>
    <datasource jta="false" jndi-name="java:/smslite" pool-name="smslite" enabled="true" use-java-context="false">
                <connection-url>jdbc:mysql:replication://10.32.4.71:3306,10.32.4.247:3306/smslite?autoReconnect=true</connection-url>
                <driver>com.mysql</driver>
                <pool>
                    <min-pool-size>2</min-pool-size>
                    <max-pool-size>5</max-pool-size>
                    <prefill>true</prefill>
                </pool>
                <security>
                    <user-name>root</user-name>
                    <password>abc123</password>
                </security>
                <statement>
                    <prepared-statement-cache-size>32</prepared-statement-cache-size>
                    <share-prepared-statements>true</share-prepared-statements>
                </statement>
            </datasource>
            <drivers>
                <driver name="h2" module="com.h2database.h2">
                    <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                </driver>
                <driver name="com.mysql" module="com.mysql">
                    <xa-datasource-class>com.mysql.jdbc.ReplicationDriver</xa-datasource-class>
                </driver>
            </drivers>
        </datasources> 
```

我正在尝试使用此配置连接到主/从配置的 Mysql 数据库。当主服务器启动时，所有数据库交互工作正常。但是，当主设备关闭时，应用程序无法连接到从设备进行读取操作。

```
 **22:25:09,414 WARN  [org.hibernate.util.JDBCExceptionReporter] (http--0.0.0.0-8080-1) SQL Error: 0, SQLState: 08S01
    22:25:09,414 ERROR [org.hibernate.util.JDBCExceptionReporter] (http--0.0.0.0-8080-1) Communications link failure
    The last packet successfully received from the server was 659,446 milliseconds ago.  The last packet sent successfully to the server was 16 milliseconds ago.
    22:25:09,414 ERROR [com.prov.smslite.dao.DaoOrganizationAccount] (http--0.0.0.0-8080-1) listAll() failed: org.hibernate.exception.JDBCConnectionException: could not execute query
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.doList(Loader.java:2216) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.list(Loader.java:2099) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at com.prov.smslite.dao.DaoOrganizationAccount.listAllExistingOrganizationAcct(DaoOrganizationAccount.java:168) [classes:]
        at com.prov.smslite.dao.DaoOrganizationAccount$$FastClassByCGLIB$$68b5ac83.invoke(<generated>) [cglib-2.1_3.jar:]
        at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149) [cglib-2.1_3.jar:]
        at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [spring-tx-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at com.prov.smslite.dao.DaoOrganizationAccount$$EnhancerByCGLIB$$8a109920.listAllExistingOrganizationAcct(<generated>) [cglib-2.1_3.jar:]
        at com.prov.smslite.bo.ServiceProviderMgmtService.listAllExistingOrganizationAcct(ServiceProviderMgmtService.java:119) [classes:]
        at com.prov.smslite.action.ServiceProviderMgmtAction.list(ServiceProviderMgmtAction.java:236) [classes:]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_02]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_02]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_02]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_02]
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.prov.smslite.interceptor.AuthenticationInterceptor.intercept(AuthenticationInterceptor.java:60) [classes:]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.LoggingInterceptor.intercept(LoggingInterceptor.java:67) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.TimerInterceptor.invokeUnderTiming(TimerInterceptor.java:135) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.TimerInterceptor.intercept(TimerInterceptor.java:122) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
        at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_02]
    Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure
    The last packet successfully received from the server was 659,446 milliseconds ago.  The last packet sent successfully to the server was 16 milliseconds ago.
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_02]
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [rt.jar:1.6.0_02]
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [rt.jar:1.6.0_02]
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [rt.jar:1.6.0_02]
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:409) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1122) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3056) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2942) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3485) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1960) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2114) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2696)
        at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2105) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2264) [mysql-connector-java-5.0.5.jar:]
        at org.jboss.jca.adapters.jdbc.CachedPreparedStatement.executeQuery(CachedPreparedStatement.java:107)
        at org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeQuery(WrappedPreparedStatement.java:462)
        at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.getResultSet(Loader.java:1787) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.doQuery(Loader.java:674) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.doList(Loader.java:2213) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        ... 89 more
    Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
        at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2503) [mysql-connector-java-5.0.5.jar:]
        at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2953) [mysql-connector-java-5.0.5.jar:]
        ... 103 more
    22:25:09,523 ERROR [com.prov.smslite.bo.ServiceProviderMgmtService] (http--0.0.0.0-8080-1) listAll() failed: org.hibernate.exception.JDBCConnectionException: could not execute query
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:74) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.doList(Loader.java:2216) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.Loader.list(Loader.java:2099) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569) [hibernate-3.2.6.ga.jar:3.2.6.ga]
        at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283) [hibernate-3.2.6.ga.jar:3.2.6.ga]
            at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110) [spring-tx-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621) [spring-aop-3.0.5.RELEASE.jar:3.0.5.RELEASE]
        at com.prov.smslite.dao.DaoOrganizationAccount$$EnhancerByCGLIB$$8a109920.listAllExistingOrganizationAcct(<generated>) [cglib-2.1_3.jar:]
        at com.prov.smslite.bo.ServiceProviderMgmtService.listAllExistingOrganizationAcct(ServiceProviderMgmtService.java:119) [classes:]
        at com.prov.smslite.action.ServiceProviderMgmtAction.list(ServiceProviderMgmtAction.java:236) [classes:]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_02]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_02]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_02]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_02]
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at          at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.prov.smslite.interceptor.AuthenticationInterceptor.intercept(AuthenticationInterceptor.java:60) [classes:]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.LoggingInterceptor.intercept(LoggingInterceptor.java:67) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.TimerInterceptor.invokeUnderTiming(TimerInterceptor.java:135) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.interceptor.TimerInterceptor.intercept(TimerInterceptor.java:122) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249) [xwork-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:510) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) [struts2-core-2.3.1.2.jar:2.3.1.2]
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
        at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
        at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_02]
    Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure** 
```

我的应用程序使用 Spring /Hibernate 连接数据库。

# sqlite - 使用 FluentNHibernate 的 InMemory SQLite 的 release_mode、池化、最大池大小

> ID：13478629
> 
> 赞同：0
> 
> 时间：2012-11-20T17:23:45.573
> 
> 标签：sqlite, fluent-nhibernate, in-memory-database

我在内存中遇到了 Sqlite 的一些问题。

我有一个具有 CPF 字段的类 - 类似于美国的 SSN。作为商业规则，CPF 在系统中必须是唯一的。

所以我决定检查有这个字段的类。现在可能这里有代码异味：我用 ORM 检查这是否是一个冲突的 CPF。

```
 private CPF cpf;
    public virtual CPF CPF
    {
        get { return cpf; }
        set
        {
            if (this.ormCreated) //Do not check if it is loaded from the DB. Otherwise, it loops, generating a StackOverflow exception
            {
                cpf = value;
            }
            else
            {
                this.setNewCpf(value);
            }
        }
    }

    private void setNewCpf(CPF newCpf)
    {
        if (this.cpf == newCpf)
        {
            return;
        }

        if (Helper.Orm.IsConflictingCpf(newCpf))
        {
            throw new ConflictingCpfException();
        }
        else
        {
            cpf = newCpf;
        }
    } 
```

这是 ORM Helper 类上的实现。

```
 bool OrmHelper.IsConflictingCpf(CPF cpf)
    {
        int? cpfNumber = cpf.NumeroSemDV;
        if (cpfNumber.HasValue)
        {
            var teste = findByCpfNumber<Client>(cpf);
            return 
                (
                findByCpfNumber<Client>(cpf) != null ||
                findByCpfNumber<Adversary>(cpf) != null
                );
        }
        else
        {
            //CPFSemDV = Nullable 
            return false;
        }
    }

    private PersonType findByCpfNumber<PersonType> (CPF cpf) where PersonType : PessoaFisica
    {
        int? cpfNumber = cpf.NumeroSemDV;
        using (var session = this.NewSession())
        using (var transaction = session.BeginTransaction())
        {
            try
            {
                var person = session.Query<PersonType>()
                    .Where(c => c.CPF.NumeroSemDV == cpfNumber)
                    .FirstOrDefault<PersonType>();
                return person; 
            }
            catch (Exception) { transaction.Rollback(); }
            finally 
               { 
                  session.Close();
               }
        }
        return null;
    } 
```

问题发生在我的测试中。我正在使用 FluentNHibernate 和内存 SQLite。

```
 protected override FluentConfiguration PersistenceProvider 
    { 
        get 
        {
            return Fluently
                .Configure()
                .Database(
                    SQLiteConfiguration
                    .Standard
                    .InMemory()
                    .ShowSql()
                    );
        } 
    } 
```

这是失败的测试。

```
 protected override void Given()
    {
        base.Given();
        var clients = new List<Client>();

        Client client1 = new Client("Luiz Angelo Heinzen")
        {
            Capaz = true,
            CPF = new CPF(18743509),
            eMail = "lah@furb.br"
        };

        session.Save(client1);
        session.Evict(client1);
    }

    [Then]
    public void Motherfaker()
    {
        Client fromDb;
        var clientsFromDb = session.Query<Client>()
            .Where(c => c.eMail == "lah@furb.br");
        fromDb = clientsFromDb.FirstOrDefault<Client>();

        Assert.AreEqual(fromDb.FullName, "Luiz Angelo Heinzen");

    } 
```

失败的原因是什么？一开始它失败了，因为该表不存在。在内存中，sqlite 会破坏每个新会话的模式。所以我更改了代码以在 NewSession() 上返回相同的会话。但现在它因 NHibernate 异常而失败：会话已关闭。我已经测试过，如果从这里更改 findByCpfNumber

```
 private PersonType findByCpfNumber<PersonType> (CPF cpf) where PersonType : PessoaFisica
    {
        int? cpfNumber = cpf.NumeroSemDV;
        using (var session = this.NewSession())
        using (var transaction = session.BeginTransaction())
        {
            try
            {
                var person = session.Query<PersonType>()
                    .Where(c => c.CPF.NumeroSemDV == cpfNumber)
                    .FirstOrDefault<PersonType>();
                return person; 
            }
            catch (Exception) { transaction.Rollback(); }
            finally 
               { 
                  session.Close();
               }
        }
        return null;
    } 
```

对此

```
 private PersonType findByCpfNumber<PersonType> (CPF cpf) where PersonType : PessoaFisica
    {
        int? cpfNumber = cpf.NumeroSemDV;
        //using (var session = this.NewSession())
        var session = this.NewSession();
        using (var transaction = session.BeginTransaction())
        {
            try
            {
                var person = session.Query<PersonType>()
                    .Where(c => c.CPF.NumeroSemDV == cpfNumber)
                    .FirstOrDefault<PersonType>();
                return person; 
            }
            catch (Exception) { transaction.Rollback(); }
            finally 
               { 
                  //session.Close();
                  this.CloseSession(session);
               }
        }
        this.CloseSession(session);
        return null;
    } 
```

该错误不再发生。显然，我必须实现 CloseSession 方法。它将关闭生产数据库上的会话，如果正在使用 Sqlite，它将什么也不做。

但我宁愿以某种方式配置 SQLite，它不会处理会话。我在[这里](https://stackoverflow.com/questions/189280/problem-using-sqlite-memory-with-nhibernate)阅读了 有关 release_mode、Pooling 和 Max Pool 属性的信息。但我似乎无法在 FluentNHibernate 中找到它，所以甚至无法测试它是否有效。我克隆了 FluentNHibernate，它似乎将 release_mode 设置为 on_close，但这无济于事。

我什至尝试过：

```
 public override ISession NewSession()
    {
        if (this.session == null)
        {
            if (sessionFactory == null)
            {
                CreateSessionFactory();
            }
            this.session = sessionFactory.OpenSession();
        }
        if (!session.IsOpen)
        {
            sessionFactory.OpenSession(session.Connection);
            session.Connection.Open();
        }
        return session;
    } 
```

但它一直告诉我会话已关闭。那么，有人对如何解决这个问题有任何建议吗？

还是这太臭了，无法拯救？

我希望这足够清楚。请原谅我的错误：我来自巴西，不是以英语为母语的人。

谢谢，

路易斯安吉洛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:26:26.640

我会在系统中创建 CPF 时检查唯一性，并在数据库中有一个额外的唯一约束来强制执行。然后，如果将每个对 CPF 的引用设置为无级联（默认为无），则无法将新创建的重复 CPF 分配给实体并毫无例外地保存它，因此它不会意外发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T15:04:16.327

我有同样的问题。发生的事情是，当连接关闭时，内存中的 SQLite 将删除整个模式。如果您创建一个为所有测试保留的会话，它将保留所有其他会话的结构。

有关代码和更完整的解释，请查看以下答案：[Random error when testing with NHibernate on an in-Memory SQLite db](https://stackoverflow.com/a/8744536/218136)

# mysql - Mysql如何按月或年聚合日期

> ID：13478631
> 
> 赞同：3
> 
> 时间：2012-11-20T17:23:45.717
> 
> 标签：mysql, sum, aggregate

```
$SQLString = "SELECT    
            count(score) as counts,
            DATE(date),
            SUM(CASE WHEN gender = 1 then 1 ELSE 0 END) Male,
            SUM(CASE WHEN gender = 2 then 1 ELSE 0 END) Female,
            AVG(age) as age, score
            FROM persons  
            WHERE date > '".$_SESSION['date1']."' AND date < '".$_SESSION['date2']."' 
            GROUP BY DATE(date) 
            ORDER BY DATE(date) asc"; 
```

这是我的查询，每天显示一些数据，如性别、年龄等。如何按月或年汇总这些日期并显示添加的数据？

如果我也没有解释我的自我，请注意我:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:24:37.193

`GROUP BY year(date), month(date)`.

# c# - 围绕多个视图传递带有控制器的视图模型

> ID：13478634
> 
> 赞同：0
> 
> 时间：2012-11-20T17:24:00.640
> 
> 标签：c#, asp.net-mvc, razor

所以我有 3 个视图，一个控制器和一个模型。（只是一个例子）第一个视图设置用户的名字和姓氏。哪个被发回控制器，我可以在视图模型中看到数据。然后控制器调用第二个视图设置电子邮件（我可以从视图 1 调用数据）。第三个视图显示了所有数据（视图 1 中的原始内容不再存在）

```
@Html.DisplayFor(m => m.FirstName)
@Html.DisplayFor(m => m.LastName)
@Html.DisplayFor(m => m.Email) 
```

你认为创建一个静态单例模型可以在控制器中工作吗？还是我应该使用 TempData

编辑：对不起，我忘了我的控制器

我的控制器中的 GET 方法是否需要参数？

```
 [HttpGet]
    public virtual ActionResult SignUp1(model m)
    {
        return View(m)
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:43:21.063

`Html.Partial("view name", object)`如果要执行逻辑，可以使用 @ 调用另一个视图，可以使用 调用另一个控制器操作`@Html.Action("action", "controller", object)`。那么它就像任何其他控制器动作一样。通常从视图中调用动作都装饰有`[ChildActionOnly]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:41:06.987

静态对于网页来说是个坏主意，因为它本质上不是线程安全的（[见这里](https://stackoverflow.com/a/6505715/298754)）。这意味着如果您有两个或更多人同时使用它，您将获得非常奇怪的行为。

我不确定你为什么要考虑这样做——你有什么特别的原因吗？正确的做法是将模型从每个视图发布回每个控制器操作，每次填充更多数据。或者，您可以回发到相同的操作，然后根据模型中缺少哪些字段（如果没有，则显示）返回适当的视图。

# objective-c - 为 NSOutlineView 创建控制器

> ID：13478635
> 
> 赞同：0
> 
> 时间：2012-11-20T17:24:03.793
> 
> 标签：objective-c, macos, cocoa, nsoutlineview

我在为我拥有的 NSOutlineView 创建单独的 Controller 类时遇到问题。

我创建了一个名为的新类`LTSidebarViewController`，并在我的 MainMenu.xib 文件中添加了一个对象到“工作台”并将其链接到我的`LTSidebarViewController`类。我还将委托和数据源设置为链接到 MainMenu.xib 中的 NSOutlineView。

我要做的是`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`在我的 AppDelegate 文件中创建这个类的一个实例，当我这样做时，我想传入 App Delegate 的 managedObjectContext。所以，我创建了一个自定义`init`方法，`LTSidebarViewController`如下所示：

```
-(id)initWithManagedObject:(NSManagedObjectContext*)managedObject{

    self = [super init];
    if (self) {
        self.managedObjectContext = managedObject;

        NSFetchRequest *subjectsFetchReq = [[NSFetchRequest alloc]init];
        [subjectsFetchReq setEntity:[NSEntityDescription entityForName:@"Subject"
                                                inManagedObjectContext:self.managedObjectContext]];

        subjectsArray = [self.managedObjectContext executeFetchRequest:subjectsFetchReq error:nil];

        _topLevelItems = [NSArray arrayWithObjects:@"SUBJECTS", nil];

        // The data is stored in a  dictionary
        _childrenDictionary = [NSMutableDictionary new];
        [_childrenDictionary setObject:subjectsArray forKey:@"SUBJECTS"];

        // The basic recipe for a sidebar
        [_sidebarOutlineView sizeLastColumnToFit];
        [_sidebarOutlineView reloadData];
        [_sidebarOutlineView setFloatsGroupRows:NO];

        // Set the row size of the tableview
        [_sidebarOutlineView setRowSizeStyle:NSTableViewRowSizeStyleLarge];

        // Expand all the root items; disable the expansion animation that normally happens
        [NSAnimationContext beginGrouping];
        [[NSAnimationContext currentContext] setDuration:0];
        [_sidebarOutlineView expandItem:nil expandChildren:YES];
        [NSAnimationContext endGrouping];

        // Automatically select first row
        [_sidebarOutlineView selectRowIndexes:[NSIndexSet indexSetWithIndex:1] byExtendingSelection:NO];
    }
    return self;

} 
```

我也有这个类中所有必需的方法，`- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item`等等。

在 App Delegate 的`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`方法中，我有以下内容：

```
 LTSidebarViewController *sidebarViewController = [[LTSidebarViewController alloc] initWithManagedObject:self.managedObjectContext]; 
```

我的问题是这不起作用，我没有收到任何错误并且应用程序运行但 NSOutlineView 中没有显示任何数据。

现在从我可以看出的问题是，最初加载 MainMenu.xib 文件时，它会自动创建我的`LTSidebarViewController`类的实例并调用它的 init 方法，但是因为我的 init 方法没有做任何事情，所以应用程序没有完成启动正确。

我在这里采取正确的方法吗？简单来说，我正在寻找一个单独的文件，用作我的 NSOutlineView 的数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:04:29.493

在使用 NSOutlineView 时，我通常会进行大量的日志记录以弄清楚发生了什么。我可能会做类似以下的事情（也许你已经做了一些）：

通过记录它来确保您确实在subjectsArray中有数据，例如

```
NSLog(@"subjectsArray");
NSLog(@"%@", subjectsArray); 
```

[确保您已经从 AppDelegate.m 文件中的NSOutlineView 数据源方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSOutlineViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSOutlineViewDataSource)实现了 NSOutlineView 数据源协议方法，并且它们正在返回适当的数据。

*   如果您在实现这些方面需要帮助，请尝试使用[Source Lists 和 NSOutlineView](http://benreimers.net.au/blog/sources-lists-and-nsoutlineview)等教程。

*   我通常在每个 NSOutlineView 数据源方法中使用 NSLog 语句，以确保它们被调用并且我了解每个方法的期望和返回。

`initWithManagedObject:(NSManagedObjectContext *)managedObject`通过记录它们，确保您的委托和数据源在您的方法中由于某种原因不为零，例如

```
NSLog(@"datasource: %@", [self datasource]);
NSLog(@"delegate: %@", [self delegate]); 
```

如果您发现由于某种原因它们为零，您可以手动设置它们以确保这不是问题，例如在 initWithManagedObject 中：

```
[self setDelegate: [NSApp delegate]];
[self setDatasource: [NSApp delegate]]; 
```

至于这是否是“正确”的方法：我从您的代码中不清楚您是否打算让 sideBarController 既是 the`delegate`又是 the`datasource`或是否`AppDelegate`正在服务这些角色。显然，您需要在适当的文件中实现`delegate`和`datasource`协议。你当然可以`AppDelegate`担任这些角色，尽管让你的 sideBarController 这样做似乎更有意义。

一个小提示：我有时会直接从支持文件中访问 AppDelegate 的 managedObjectContext，例如

```
-(NSManagedObjectContext *)managedObjectContext
{
return [[NSApp delegate] managedObjectContext];
} 
```

而不是手动将 managedObjectContext 传递给每个文件。

# android - 签署应用程序发布模式或 dubug 模式

> ID：13478636
> 
> 赞同：1
> 
> 时间：2012-11-20T17:24:07.440
> 
> 标签：android

我正在编写应用内教程，但我收到一条错误消息，提示该版本未配置为通过 Google 商店计费。

我的设备上使用的版本可能会有些混乱。

这是我的正常流程

我使用 Eclipse 并在那里构建我的应用程序我不断地构建它购买点击构建图标，如果我的设备已连接，它会在设备上打开我没有签署任何我知道的东西（这会导致一些混乱）

当我想发布应用程序时，我使用签名密钥将其导出，并且我必须在我右键单击应用程序时看到的 Android 工具中导出签名的应用程序包。生成了一个 .apk 文件，我将其上传到谷歌，一切正常。

我的问题是当我简单地在手机上运行应用程序时，它直接来自 eclipse 它处于什么模式

应用内教程说我必须在手机上运行签名版本。当我从 Eclipse 启动它时，我是自动执行此操作还是处于调试模式。如果它是调试模式，我如何让它从 Eclipse 进入签名模式。

我需要上传到谷歌的版本已签名，但设置为未发布，如教程中的指南所述，因此我无法从商店获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:30:48.217

要测试必须与 Google 商店交互的任何内容，您需要使用 .apk 文件的发布版本。像往常一样从 Eclipse 中导出它，然后使用命令行工具在设备或模拟器上安装 release .apk：

```
>adb install myApp.apk 
```

如果您之前在 Eclipse 中在同一设备或模拟器上运行，则该应用程序将使用调试证书进行签名，您必须先完全卸载它。如果签名证书不同，即使命令`-r`上的开关`apk install`也不会安装。

# php - 根据变量的数量使用 mod_rewrite 重定向到不同的页面

> ID：13478641
> 
> 赞同：0
> 
> 时间：2012-11-20T17:24:29.830
> 
> 标签：php, mod-rewrite

我目前正在使用 mod_rewrite 规则：

```
RewriteRule ^(.+)/?$ page.php?slug=$1 [L] 
```

这可以很好地制作`/page`load `page.php?slug=page`。

但是，我想网址：

```
/cat/page 
```

装载

```
page.php?slug=page 
```

和网址

```
/cat 
```

加载页面

```
cat.php?slug=cat 
```

这可能吗？我可以在一个 page.php 上执行此操作并使用 if 来确定它应该是哪个页面，但是由于类别页面和页面页面的代码是如此不同，我宁愿将它们分开。

谢谢，

山姆

**更新：**根据要求提供更多示例。

`/food/pizza`负载`page.php?slug=pizza`

`/food`负载`cat.php?slug=pizza`

`/animals/pigs`负载`page.php?slug=pigs`

`/animals`负载`cat.php?slug=animals`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T20:59:30.557

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !=page.php
RewriteCond %{REQUEST_URI} !=cat.php
RewriteRule ^([^/]+)/([^/]+)/?$ cat.php?slug=$2 [L]

RewriteCond %{REQUEST_URI} !=page.php
RewriteCond %{REQUEST_URI} !=cat.php
RewriteRule ^([^/]+)/?$ page.php?slug=$1 [L] 
```

我不确定参数的名称，`cat.php`因为`page.php`您的示例不一致（有时是`slug`，有时是`cat`？）无论如何这是小问题。

说明：`RewriteCond`确保不会被改写`page.php`。`cat.php`然后有正则表达式匹配一个或两个级别的虚拟目录传递请求以纠正 PHP 脚本。

编辑：不是。它将它传递给**真正**正确的脚本:-)

# javascript - Google Maps API - 如何在不显示地图的情况下从自动完成获取纬度和经度？

> ID：13478646
> 
> 赞同：62
> 
> 时间：2012-11-20T17:24:36.980
> 
> 标签：javascript, google-maps-api-3, autocomplete, latitude-longitude

我正在尝试从 Autocomplete Google Maps API 获取纬度和经度而不显示地图。在我的脚本中，自动补全效果很好，但我无法获得纬度和经度。

```
 <script type="text/javascript">
       function initialize() {

     var options = {
      types: ['(cities)']
     };

     var input = document.getElementById('searchTextField');
     var autocomplete = new google.maps.places.Autocomplete(input, options);
    }
       google.maps.event.addDomListener(window, 'load', initialize);

       var geocoder = new google.maps.Geocoder();
        var address = autocomplete;

    geocoder.geocode( { 'address': address}, function(results, status) {

      if (status == google.maps.GeocoderStatus.OK) {
        var latitude = results[0].geometry.location.lat();
        var longitude = results[0].geometry.location.lng();
        alert(latitude);
      } 
    }); 

    </script>
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-23T13:09:28.630

您可以使用下面的代码。

```
<script src="http://maps.googleapis.com/maps/api/js?libraries=places" type="text/javascript"></script>

<script type="text/javascript">
    function initialize() {
        var input = document.getElementById('searchTextField');
        var autocomplete = new google.maps.places.Autocomplete(input);
        google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place = autocomplete.getPlace();
            document.getElementById('city2').value = place.name;
            document.getElementById('cityLat').value = place.geometry.location.lat();
            document.getElementById('cityLng').value = place.geometry.location.lng();
            //alert("This function is working!");
            //alert(place.name);
           // alert(place.address_components[0].long_name);

        });
    }
    google.maps.event.addDomListener(window, 'load', initialize); 
</script> 
```

这部分在您的表格中：

```
<input id="searchTextField" type="text" size="50" placeholder="Enter a location" autocomplete="on" runat="server" />  
<input type="hidden" id="city2" name="city2" />
<input type="hidden" id="cityLat" name="cityLat" />
<input type="hidden" id="cityLng" name="cityLng" /> 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-02-02T06:33:59.183

只需要：

```
var place = autocomplete.getPlace();
// get lat
var lat = place.geometry.location.lat();
// get lng
var lng = place.geometry.location.lng(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-30T13:21:29.890

您无法从自动完成 API 获取纬度/经度，因为谷歌从该 API 生成的数据不包含纬度和对数字段。例子：-

```
{
   "predictions" : [
      {
         "description" : "IIT Mumbai, Mumbai, Maharashtra, India",
         "id" : "ac3235cda973818a89b5fe21ad0f5261ac9b6723",
         "matched_substrings" : [
            {
               "length" : 10,
               "offset" : 0
            }
         ],
         "reference" : "CkQ0AAAAHWg-RSngiYHHdz_yqyFKmfSoBwT-_PW0k8qQDhsbiVrk7BlPHCyJb58OthledMUTGYS5Vhec1Zj2L7w9Rq0zDxIQrbn05RX1QgWHkSXsmTk1TRoU45APW2BBRIUsA3t6XBy_8s0BPPA",
         "terms" : [
            {
               "offset" : 0,
               "value" : "IIT Mumbai"
            },
            {
               "offset" : 12,
               "value" : "Mumbai"
            },
            {
               "offset" : 20,
               "value" : "Maharashtra"
            },
            {
               "offset" : 33,
               "value" : "India"
            }
         ],
         "types" : [ "establishment", "geocode" ]
      }
   ],
   "status" : "OK"
} 
```

您可以使用 Google API 从您的地址获取经度和纬度。正如您已经说过的，您应该在应该插入结果的地方实现一个隐藏字段。然后您可以将位置与坐标一起保存。

例如[https://maps.googleapis.com/maps/api/geocode/json?address=IIT%20Area,%20Mumbai,%20Maharashtra,%20India&sensor=false](https://maps.googleapis.com/maps/api/geocode/json?address=IIT%20Area,%20Mumbai,%20Maharashtra,%20India&sensor=false)

我最近在我的一个项目中实现了这个功能：

```
function getLatLngFromAddress(city, country){

  var address = city +", "+ country;
  var geocoder = new google.maps.Geocoder();

  geocoder.geocode( { 'address': address}, function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {
      $('#latitude').val(results[0].geometry.location.Pa);
      $('#longitude').val(results[0].geometry.location.Qa);

    } else {
      console.log("Geocode was not successful for the following reason: " + status);
    }
  });
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-10T12:46:28.960

是的你可以：

```
var place = autocomplete.getPlace();

document.getElementById('lat').value = place.geometry.location.lat();
document.getElementById('lon').value = place.geometry.location.lng(); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-08-11T08:13:53.653

您可以从 place 对象获取 lat，lng，即

```
var place = autocomplete.getPlace();

var latitude = place.geometry.location.lat();
var longitude = place.geometry.location.lng(); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-11-11T13:19:53.827

根据 2020 年末，这很容易如下。

对于`geometry`要在从位置下拉列表中选择的位置显示的键，`geometry`应`Autocomplete`使用方法在对象实例上设置该字段`setFields()`。

代码应如下所示。

加载 API 库：

```
<script src="https://maps.googleapis.com/maps/api/js?key=API_KEY&libraries=places&callback=initAutocomplete" 
```

初始化自动完成并处理所选地点数据，通常与上述所有答案相同。但是`autocomplete.setFields(['geometry'])`用来取回坐标；

```
const autocomplete;

// Init the autocomplete object
function initAutocomplete() {
    autocomplete = new window.google.maps.places.Autocomplete(
        document.getElementById('current_location'), { types: ["geocode"] }
    );

    // !!! This is where you set `geometry` field to be returned with the place.
    autocomplete.setFields(['address_component', 'geometry']); // <--

    autocomplete.addListener("place_changed", fillInAddress);
}

// Process the address selected by user
function fillInAddress() {
    const place = autocomplete.getPlace();

    // Here you can get your coordinates like this
    console.log(place.geometry.location.lat());
    console.log(place.geometry.location.lng());
} 
```

[`Autocomplete.setFields`](https://developers.google.com/maps/documentation/javascript/reference/places-widget#Autocomplete.setFields)请参阅关于和[`geometry`选项](https://developers.google.com/maps/documentation/javascript/reference/places-service#PlaceResult.geometry)的 Google API 文档。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-20T17:35:25.290

Google Places API 还提供 REST api，包括 Places Autocomplete。 [https://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)

但是从服务中检索的数据必须用于地图。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-26T15:29:43.180

Youtube 视频：[https](https://youtu.be/8QYiGuq5LG4) ://youtu.be/8QYiGuq5LG4 这将有助于在不显示 gmap 的情况下获得 lat/lon。

```
 <!DOCTYPE html>
    <html>
        <head>
        <title>Place Autocomplete With Latitude & Longitude </title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <style>
    #pac-input {
        background-color: #fff;
        padding: 0 11px 0 13px;
        width: 400px;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        text-overflow: ellipsis;
    }
    #pac-input:focus {
        border-color: #4d90fe;
        margin-left: -1px;
        padding-left: 14px;  /* Regular padding-left + 1\. */
        width: 401px;
    }
    }
    </style>
         <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&key=[YOUR-KEY]"></script> 
        <script>

      function initialize() {
            var address = (document.getElementById('pac-input'));
            var autocomplete = new google.maps.places.Autocomplete(address);
            autocomplete.setTypes(['geocode']);
            google.maps.event.addListener(autocomplete, 'place_changed', function() {
                var place = autocomplete.getPlace();
                if (!place.geometry) {
                    return;
                }

            var address = '';
            if (place.address_components) {
                address = [
                    (place.address_components[0] && place.address_components[0].short_name || ''),
                    (place.address_components[1] && place.address_components[1].short_name || ''),
                    (place.address_components[2] && place.address_components[2].short_name || '')
                    ].join(' ');
            }
            /*********************************************************************/
            /* var address contain your autocomplete address *********************/
            /* place.geometry.location.lat() && place.geometry.location.lat() ****/
            /* will be used for current address latitude and longitude************/
            /*********************************************************************/
            document.getElementById('lat').innerHTML = place.geometry.location.lat();
            document.getElementById('long').innerHTML = place.geometry.location.lng();
            });
      }

       google.maps.event.addDomListener(window, 'load', initialize);

        </script>
        </head>
        <body>
    <input id="pac-input" class="controls" type="text"
            placeholder="Enter a location">
    <div id="lat"></div>
    <div id="long"></div>
    </body>
    </html> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-05T11:31:15.567

You can get from the same api without any additional api or url call.

HTML

```
<input class="wd100" id="fromInput" type="text" name="grFrom" placeholder="From" required/> 
```

Javascript

```
var input = document.getElementById('fromInput');
var defaultBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(-33.8902, 151.1759),
    new google.maps.LatLng(-33.8474, 1512631)
)

var options = {
bounds: defaultBounds   
}

var autocomplete = new google.maps.places.Autocomplete(input, options);
var searchBox = new google.maps.places.SearchBox(input, {
         bounds: defaultBounds
});

google.maps.event.addListener(searchBox, 'places_changed', function() {
    var places = searchBox.getPlaces();

console.log(places[0].geometry.location.G); // Get Latitude
console.log(places[0].geometry.location.K); // Get Longitude

//Additional information
console.log(places[0].formatted_address); // Formated Address of Place
console.log(places[0].name); // Name of Place

    if (places.length == 0) {
      return;
    }

    var bounds = new google.maps.LatLngBounds();
    console.log(bounds);
     });
   } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-15T08:44:15.840

HTML：

```
<input type="text" id="address" name="address" value=""> //Autocomplete input address

<input type="hidden" name="s_latitude" id="s_latitude" value="" /> //get latitude
<input type="hidden" name="s_longitude" id="s_longitude" value="" /> //get longitude 
```

Javascript：

```
<script src="https://maps.googleapis.com/maps/api/js?key=API_KEY&libraries=places&callback=initMap"
async defer></script>

<script>
var input = document.getElementById('address');
var originLatitude = document.getElementById('s_latitude');
var originLongitude = document.getElementById('s_longitude');

var originAutocomplete = new google.maps.places.Autocomplete(input);

originAutocomplete.addListener('place_changed', function(event) {
    var place = originAutocomplete.getPlace();

    if (place.hasOwnProperty('place_id')) {
        if (!place.geometry) {
                // window.alert("Autocomplete's returned place contains no geometry");
                return;
        }
        originLatitude.value = place.geometry.location.lat();
        originLongitude.value = place.geometry.location.lng();
    } else {
        service.textSearch({
                query: place.name
        }, function(results, status) {
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                originLatitude.value = results[0].geometry.location.lat();
                originLongitude.value = results[0].geometry.location.lng();
            }
        });
    }
});
</script> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-12T16:30:11.540

```
<!DOCTYPE html>
<html>
<head>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDB1ujwvkFEo87xhHyHhHP52iJ6zMlbB_w&libraries=places&callback=initMap" async defer></script>

</head>
<body>

<input id="searchTextField" type="text" size="50" placeholder="Enter a location" autocomplete="on" runat="server" />  

<input type="text" id="Lat"  />
<input type="text" id="Lng"  /> 

</body>

<script type="text/javascript">
    function initialize() {
        var input = document.getElementById('searchTextField');
        var autocomplete = new google.maps.places.Autocomplete(input);
        google.maps.event.addListener(autocomplete, 'place_changed', function () {
            var place = autocomplete.getPlace();
            document.getElementById('Lat').value = place.geometry.location.lat();
            document.getElementById('Lng').value = place.geometry.location.lng();
        });
    }
    google.maps.event.addDomListener(window, 'load', initialize); 
</script>
</html> 
```

# mysql - 需要查询此输出

> ID：13478649
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:24:41.517
> 
> 标签：mysql

此输出需要 sql 查询：

如果 location = 'chennai' 那么，

```
A       2
B       1 
```

这是我的表结构：

```
location               team

chennai                 A
Bangalore               A
Bangalore               B
chennai                 B
madurai                 B
chennai                 A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:27:11.387

```
Select team,count(team) from tb_name where location='chennai' group by team 
```

# php - $_POST 和变量索引

> ID：13478651
> 
> 赞同：0
> 
> 时间：2012-11-20T17:24:52.643
> 
> 标签：php, html, post

我有一个项目，我用 jQuery 创建隐藏的输入值。这些代表组和成员，因此我为组本身和每个组的成员都有一个数组。

例如，经过几次创建后，表单中的代码包括

```
<input type="hidden" name="groups['group_2']" value="0">
<input type="hidden" name="groups['group_1']" value="0">
<input type="hidden" class="mem_id_holder" name="group_1[]" value="FWNGVISkjW">
<input type="hidden" class="mem_id_holder" name="group_1[]" value="G0t9E3C0yG">
<input type="hidden" class="mem_id_holder" name="group_2[]" value="NT-JEDVCS9"> 
```

例如 2 个组，group_1 中有 2 个成员，group_2 中有 1 个成员。

现在，在提交我的代码以迭代我使用此代码的值之后：

```
if ($groups_no && isset($_POST['groups']) && !empty($_POST['groups'])){
    $groups = $_POST['groups'];
    foreach ($groups as $key => $val){
        if (isset($_POST[$key]) && !empty($_POST[$key])){
            $group_members = $_POST[$key];      
            foreach ($group_members as $member_key => $member_val){
                echo 'Actions to be done here!';
            }
        }
    }
} 
```

我遇到的问题是我收到以下警告并且程序失败：

```
Notice: Undefined index: 'group_1' in C:\ ... .php on line 31
Warning: Invalid argument supplied for foreach() ...
Notice: Undefined index: 'group_2' in C:\ ... .php on line 31
Warning: Invalid argument supplied for foreach() ... 
```

当我使用`$_POST['group_1']`一切正常但由于我不知道我必须插入多少组和哪些组时，我需要该变量。我尝试了一些通过谷歌结果建议的不同的东西，但没有任何效果。

有任何想法吗？`$_POST`甚至能够将变量作为索引吗？另外，如果不是，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:27:23.387

在您的 HTML 中，不要在数组索引周围加上引号。

```
<input type="hidden" name="groups[group_2]" value="0">
<input type="hidden" name="groups[group_1]" value="0">
<input type="hidden" class="mem_id_holder" name="group_1[]" value="FWNGVISkjW">
<input type="hidden" class="mem_id_holder" name="group_1[]" value="G0t9E3C0yG">
<input type="hidden" class="mem_id_holder" name="group_2[]" value="NT-JEDVCS9"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:28:05.027

通过做这个：

```
<input type="hidden" class="mem_id_holder" name="group_1[]" value="FWNGVISkjW"> 
```

而不是这个：

```
<input type="hidden" class="mem_id_holder" name="group_1" value="FWNGVISkjW"> 
```

当您发布值时，您将获得一个数组，因此`$_POST['group_1']`在第一个实例中不会作为字符串存在，它将是`$_POST['group_1'][0]`. 因此，您还必须遍历该值。

希望这可以帮助。

# sql - 如果我使用 TEXT 数据类型存储数字，会产生任何不良影响

> ID：13478653
> 
> 赞同：2
> 
> 时间：2012-11-20T17:24:55.440
> 
> 标签：sql, database, postgresql, database-design

如果我使用`TEXT`数据类型将 ID 号存储在数据库中，会有什么不好的影响吗？我做类似的事情：

```
CREATE TABLE GenData ( EmpName TEXT NOT NULL, ID TEXT PRIMARY KEY); 
```

实际上，如果我想存储日期值，我通常使用`TEXT`数据类型。如果这是一个错误的方式，它的缺点是什么？

我正在使用`PostgreSQL`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:29:26.623

在文本列中存储数字是一个**非常**糟糕的主意。当你这样做时，你会失去很多优势：

*   您无法阻止存储无效数字（例如“foo”）
*   排序不会按照您想要的方式工作（“10”比“2”“小”）
*   它使每个查看您的数据模型的人感到困惑。

> *我想存储一个我通常使用 TEXT 的日期值*

这是*另一个* **非常**糟糕的主意。主要是因为同样的原因，您不应该在文本列中存储数字。除了完全错误的日期（'foo'）之外，您也不能防止“无效”日期（例如 2 月 31 日）。`>`然后是排序的事情，与and的比较`<`，以及日期算术......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:29:13.793

我真的不建议使用文本作为日期。

用文本查看您缺少的所有[功能](http://www.postgresql.org/docs/8.0/static/functions-datetime.html)

如果你想使用它们，你必须强制转换，如果偶然存储的日期不是有效的，因为文本没有验证，这只是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T19:53:16.297

除了已经提供的其他答案：

`text`也受[编码](http://www.postgresql.org/docs/current/interactive/multibyte.html)[`COLLATION`](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-COLLATE-EXPRS)，这可能会使平台之间的可移植性和数据交换复杂化。它还减慢了排序操作。

关于[存储大小`text`](http://www.postgresql.org/docs/current/interactive/datatype-character.html)：an`integer`占用 4 个字节（并且需要[*填充*以进行数据*对齐*](https://stackoverflow.com/a/7431468/939860)）。`text`或`varchar`占用 1 个字节加上实际字符串，对于 UTF-8 中的 ASCII 字符为 1 个字节，对于特殊字符则为更多。很可能，`text`会更大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T01:44:27.983

这取决于您要对数据执行的操作。

如果您要对数值数据进行大量算术运算，则将其存储为某种数值数据类型更有意义。此外，如果您计划按数字顺序对数据进行排序，那么将数据存储为数字确实会有所帮助。

当存储为文本时，“11”在“9”之前，因为“1”在“9”之前。如果这不是您想要的，请不要使用文本。

另一方面，将数字字符串（例如邮政编码或社会安全号码或电话号码）存储为文本通常是有意义的。

# php - 上传文件夹安全解决方案

> ID：13478662
> 
> 赞同：0
> 
> 时间：2012-11-20T17:25:28.893
> 
> 标签：php, security, upload, chmod

我们都知道 chmod 777 并不是让我们的上传脚本正常工作的最佳方式。所以我在想使用它时最好的解决方案是什么。

我认为当用户上传文件“ **picture.jpg** ”时，我可以将其重命名为“ **md5(username-picture-1.jpg)** ”并在网页上显示为`<img src="files.php?img=username-picture-1.jpg">`.

然后在这个 files.php 文件上看起来像

```
<?php
    $file = md5($_GET['img']);

    header('Content-Type: image/jpeg');
    header('Content-Length: ' . filesize($file));
    echo file_get_contents($file);
?> 
```

这样用户就不会知道他上传的文件的文件名，也就是说，他将无法执行它。我对吗？

并且显然我会进行一些其他检查来处理上传，例如 mime 类型和其他内容。我只想知道这是否会阻止用户执行他上传的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:30:24.633

您可以简单地将 .htaccess 文件添加到包含上传文件的文件夹以防止执行，但我认为这是在将上传文件永久存储在文件系统之前检查上传文件的 mime-type/file-extension 的更好方法

# jsf - noSelectionOption 属性

> ID：13478663
> 
> 赞同：4
> 
> 时间：2012-11-20T17:25:33.980
> 
> 标签：jsf, jsf-2

我是 JSF 的新手，我`noSelectionOption`在 JSF 2.0 中遇到了该属性。

我不明白这个属性的目的。根据描述，它在需要选择并且用户选择`noSelectionOption`导致验证错误时使用。

那么，如果`noSelectionOption = true`用户可以选择`noSelectionOption`并绕过该列表或菜单？

或者，如果`noSelectionOption = true`用户必须选择其中一项，并且如果他选择了，`noSelectionOption`那么会发生验证错误？

如果为真，用户能否将其`noSelectionOption`视为列表或菜单下的项目之一？

请帮助我理解这背后的逻辑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T18:27:59.243

设置为 true 的A`f:selectItem`表示`noSelectOption`“无选择”选项，如下所示：

```
-- Select a Colour -- < noSelectOption was intended for this case
Red
Green
Blue
Tomato 
```

此项目在菜单中呈现，除非`hideNoSelectionOption`在您的菜单组件中设置为 true。在这种情况下，当用户与菜单交互时选择该选项。

请记住，如果需要输入并且选择了此“无选择”选项，则会出现验证错误。

另一种需要更多编码的方法是使用`f:selectItem`with`value="#{null}"`来表示用户没有选择值的情况。如果您有转换器，则必须检查这种`null`情况，如果您愿意，请引入一些自定义验证器。

# android - ZXing - 如何将结果放入也用于手动输入的 EditText 中？

> ID：13478665
> 
> 赞同：0
> 
> 时间：2012-11-20T17:25:38.823
> 
> 标签：android, zxing

我从 ZXing（未嵌入）得到了很好的结果，但我不知道如何将结果放入在布局 xml 中正确定义并在主类中声明的 EditText - 或其他地方。这是我的代码：

```
public class main extends Activity implements OnClickListener {     
    EditText edit_text = null;  
@Override  
public void onCreate(Bundle savedInstanceState) {  
super.onCreate(savedInstanceState);  
setContentView(R.layout.main);  
edit_text = (EditText) findViewById(R.id.pn);  
findViewById(R.id.my_button).setOnClickListener(this);  
findViewById(R.id.scan_button).setOnClickListener(this);  
}  //end of onCreate 
```

ZXing 启动发生在条件内：

```
public void onClick(View arg0) {    
Button b = (Button)findViewById(R.id.my_button);  
Button s = (Button)findViewById(R.id.scan_button);  
if(arg0==s){  
    s.setClickable(false);      
    IntentIntegrator.initiateScan(this);    
}  
if(arg0==b){  
    b.setClickable(false);  
    findViewById(R.id.pn);  
CharSequence edit_text_value =edit_text.getText();  
itemno = edit_text_value.toString();  
InputMethodManager inputManager = (InputMethodManager)  
getSystemService(Context.INPUT_METHOD_SERVICE);   
inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
   InputMethodManager.HIDE_NOT_ALWAYS);  
new LongRunningGetIO().execute();  
}     
}//end of onClick method - note main class is still open 
```

以及最后的强制性 zxing 结果方法，仍在主类中：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {  
    IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode,     resultCode, data);  
    edit_text = (EditText) findViewById(R.id.pn);  
    if (scanResult != null) {  
            String resultStr = "";  
            resultStr = scanResult.getContents();  
            edit_text.setText = resultStr;  
        }  
}  
}//closes main class 
```

这里的布局xml：

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
    android:id="@+id/main_layout"  
    android:layout_width="fill_parent"   
    android:layout_height="fill_parent"  
    android:orientation="vertical"  
    android:padding="5dp"    
        >               
<TextView  
    android:id="@+id/tag_line"  
    android:layout_width="wrap_content"  
    android:layout_height="wrap_content"   
/>     
<EditText android:layout_margin="20dip"   
    android:layout_width="fill_parent"  
    android:layout_height="wrap_content"    
    android:hint="Enter Item Number"  
    android:id="@+id/pn"   
    />  
<TableLayout  
        android:id="@+id/button_layout"  
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content"  
        android:stretchColumns="*"  
    >           
    <TableRow>  
        <Button  
            android:id="@+id/scan_button"  
            android:text="SCAN"  
        />      
        <Button android:layout_width="wrap_content"  
            android:id="@+id/my_button"  
            android:text="GET RESULTS"  
        />  
    </TableRow>  
    </TableLayout>      
    <EditText android:layout_margin="20dip"   
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"   
        android:minLines="30"  
        android:maxLines="30"     
        android:textSize="18sp"    
        android:editable="false"   
        android:id="@+id/my_edit" />        
     <WebView xmlns:android="http://schemas.android.com/apk/res/android"   
         android:id="@+id/webview"   
         android:layout_width="fill_parent"   
         android:layout_height="fill_parent" />   
    </LinearLayout> 
```

好的，我已经尝试了所有方法并在我不知道存在的地方进行了搜索。有谁愿意告诉我我做错了什么？？？对不起，草率的代码。第一个Q在这里发布。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:55:32.597

```
edit_text.setText = resultStr; 
```

该行不应该编译。`setText()`是一个方法，所以你这样称呼它：

```
edit_text.setText(resultStr); 
```

# jquery - 让 div 与相邻的两个 div 重叠并在点击时拉伸到 100% 宽度？

> ID：13478673
> 
> 赞同：1
> 
> 时间：2012-11-20T17:26:05.290
> 
> 标签：jquery, html, css-position, overlapping

所以我有 3 个 div 列（每个 33% 宽度），我正在尝试对其进行设置，以便一旦单击任何列，它将扩展到 100% 宽度，同时重叠旁边的两列.

我知道这与 z-index 和 div 的定位有关，但我想它需要添加到 Jquery 而不是 CSS？

左侧 div 在单击时与中间和右侧 div 重叠，但不能让其他两个执行等效操作。单击时，它们会拉伸到 100%，但会下降到左列下方并且不重叠。看琴...

在这里小提琴 - [http://jsfiddle.net/PGRAr/7/](http://jsfiddle.net/PGRAr/7/)

这是在单击时拉伸列的 Jquery：

```
$('#divleft, #divmid, #divright').toggle(function(){
$(this).animate({height:'200', width: '100%'})
}, function() {
$(this).animate({height:'200', width: '33.3%'})
}) 
```

这是CSS：

```
#divleft{
width:33.3%;
height:200px;
background:#ccc;
margin-top: 10px;
float: right;
position: absolute;
}

#divmid{
width:33.3%;
height: 200px;
background: #696;
margin-top: 10px;
float: right;
}

#divright{
width:33.3%;
height:200px;
background:#000;
margin-top: 10px;
float: right;  
} 
```

左栏效果很好，我只需要为中栏和右栏创建相同的效果......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:50:53.677

这是另一个解决方案。我绝对定位元素并添加 z-index 切换以覆盖其他元素。还必须为每个元素设置返回位置值

[http://jsfiddle.net/nxtwrld/PGRAr/10/](http://jsfiddle.net/nxtwrld/PGRAr/10/)

```
$('#divleft, #divmid, #divright').toggle(
function(){
     $(this).css({zIndex: 2}).animate({left:'0px', width: '100%'})
}, 
function() {
    var pos = "0px",
        id = $(this).attr("id");
    if(id== "divmid") pos = "33.3%";
    else if(id== "divright") pos = "66.6%";
    $(this).animate({left:pos, width: '33.3%'}, function(){
        $(this).css({zIndex: 0})
    })
}) 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:44:41.480

这并不理想，但这是一种方法。这里面的东西可能对你有用。

```
$('#divleft, #divmid, #divright').toggle(function(){
    var did = $(this).attr('id');
    if (did == 'divleft'){
        $(this).animate({height:'200', width: '100%'});
    }else if (did == 'divmid'){
        $(this).animate({height:'200', width: '100%'});
        $('#divleft').hide();
        $('#divright').hide();
    }else{
        $(this).animate({height:'200', width: '100%'});
        $('#divleft').hide();
        $('#divmid').hide();
    }

}, function() {
    var did = $(this).attr('id');
    if (did == 'divleft'){
        $(this).animate({height:'200', width: '33.3%'})
    }else if (did == 'divmid'){
        $('#divleft').show();
        $('#divright').show();
        $(this).animate({height:'200', width: '33.3%'});
    }else{
        $('#divleft').show();
        $('#divmid').show();
        $(this).animate({height:'200', width: '33.3%'});
    }
}) 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:48:38.930

我必须对你的 CSS 做一些小的修改并添加一些 JS，但这应该能让你开始。

```
$('#divleft, #divmid, #divright').toggle(function () {

    //Set a base config option that you can modify
    var cfg = { height: '200', width: '100%' };

    //Set current element as top-most div
    $(this).css({ 'z-index': 100 });

    //Get the pct of the current element and switch based on it.
    var pct = $(this).css('left').split('p')[0] / $(document).width();
    if (pct <= .33 && pct > 0) {
        cfg.left = '0';
        $(this).data('oldLeft', "33%");
    } else if (pct <= .66 && pct > .33) {
        cfg.left = '0';
        $(this).data('oldLeft', "66%");
    }
    $(this).animate(cfg)
}, function () {
    var cfg = { height: '200', width: '33%', 'z-index': 1 };
    if ($(this).data('oldLeft')) {
        console.log($(this).data('oldLeft'));
        cfg.left = $(this).data('oldLeft');
    }
    $(this).animate(cfg)
}) 
```

[这是工作小提琴](http://jsfiddle.net/TNCodeMonkey/PGRAr/9/)

# android - 远程连接到 Android 设备

> ID：13478680
> 
> 赞同：3
> 
> 时间：2012-11-20T17:26:19.390
> 
> 标签：android, remote-access

我正在尝试构建一个应用程序，该应用程序使用另一个 android 设备控制 android 设备的以下功能：
1\. 使用 GPS 获取当前位置
2\. 使用相机拍摄照片/视频
3\. 在远程设备上查看照片
4.观看信息 (SMS)
5\. 打开录音机

我想获得有关如何在 2 台设备（客户端和代理）之间创建连接的建议？在此先感谢，尼尔

# wordpress - WordPress中所有图像的颜色框

> ID：13478683
> 
> 赞同：0
> 
> 时间：2012-11-20T17:26:28.447
> 
> 标签：wordpress, colorbox

我想在我的 Wordpress 博客中使用 Colorbox 和我的所有图像。我正在使用此命令在我的 functions.php 中添加 rel='colorbox'：

```
 //colorbox
  // adds the colorbox jQuery code
  function insert_colorbox_js() {
  ?>
      <script type="text/javascript">
      // <![CDATA[
      jQuery(document).ready(function($){
          $("a[rel='colorbox']").colorbox({
                  transition:'elastic', 
                  opacity:'0.7', 
                  maxHeight:'90%'
          });
          $("a[rel='colorboxvideo']").colorbox({
                  iframe:true, 
                  transition:'elastic', 
                  opacity:'0.7',
                  innerWidth:'60%', 
                  innerHeight:'80%'
          });
      });  
      // ]]>
      </script>
  <?php
  }
  add_action( 'wp_head', 'insert_colorbox_js' );

  // automatically add colorbox rel attributes to embedded images
  function insert_colorbox_rel($content) {
    $pattern = '/<a(.*?)href="(.*?).(bmp|gif|jpeg|jpg|png)"(.*?)>/i';
      $replacement = '<a$1href="$2.$3" rel=\'colorbox\'$4>';
    $content = preg_replace( $pattern, $replacement, $content );
    return $content;
  }
  add_filter( 'the_content', 'insert_colorbox_rel' ); 
```

此函数条目在我的本地 Mamp 设置上运行良好，但由于我将网站移动到我的服务器，它不再工作 - rel 属性被添加到 img 标签而不是链接：

```
<div id="attachment_1131" class="wp-caption alignleft" style="width: 160px"><a href="http://www.somesite.net/somelink/" rel="attachment wp-att-1131"><img class="size-thumbnail wp-image-1131" title="Some title" src="http://www.somesite.net/wp-content/uploads/2011/04/CIMG0935-150x150.jpg" rel='colorbox' alt="Some Text" width="150" height="150" /></a><p class="wp-caption-text">Some other Text</p></div> 
```

我如何必须更改 functions.php 才能使其再次工作？

谢谢你的帮助！

顺便说一句 - 我在最新的 Wordpress 3.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:20:48.530

自己找到了解决方案 - 默认上传链接在我的主题中以某种方式更改。我不得不将此行添加到functions.php：

```
update_option('image_default_link_type' , 'file'); 
```

所以，上一篇文章中的函数工作得很好......

# c# - RavenDB 并发 put

> ID：13478684
> 
> 赞同：0
> 
> 时间：2012-11-20T17:26:31.997
> 
> 标签：c#, ravendb

我开始使用 RavenDB，在创建实体并将实体链接到另一个实体时遇到并发异常，例如：

*   班级 - 列出学生 - 字符串是学生 ID
*   学生

创建新学生时，我正在获取相关课程并将学生添加到“学生”列表中。我看到这种存储和添加这种关系是我的应用程序的瓶颈。

我该如何解决这个并发问题？或者也许我可以用其他方式进行这种链接？或使用 PatchRequest 更新类，然后我不会遇到并发问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:59:09.533

你有两个选择

1.  并发失败重试
2.  减少对 Class 实体的争用。

实际上，学生和班级之间存在多对多关系 - 因此您可以将相关密钥存储在关系的任一侧（或如果需要，也可以存储在两侧）。

如果您的应用程序在课堂上的使用频率高于学生，请尝试在每个学生上放置一个 ClassId 列表。您仍然可以通过查询获取班级中所有学生的列表。

除了 - 我建议使用“Course”而不是“Class”以避免踩到 c# 中的关键字

# php - 仍然存在列数与第 1 行 mysql 和 php 的值计数不匹配的问题

> ID：13478688
> 
> 赞同：0
> 
> 时间：2012-11-20T17:26:38.067
> 
> 标签：php, mysql, insert

我已经为此工作了两天，阅读了所有内容，但我无法得到答案。提前谢谢你看这个！！！

我有一个加入几个表的查询，它输出我正在寻找的内容这是我的选择

```
mysql_select_db($database_dbConnect, $dbConnect);
$query_rsMale = "SELECT  r.points, r.license, l.acaNo, l.firstName, l.lastName,   
l.cxage, l.cxcat,l.cxteam, l.city, l.state, l.gender     FROM rankingsM r INNER  
JOIN field f ON  r.license=f.USAC_No INNER JOIN racers l ON  l.usacNo=f.USAC_No
ORDER BY points";
$rsMale = mysql_query($query_rsMale, $dbConnect) or die(mysql_error());
$row_rsMale = mysql_fetch_assoc($rsMale);
$totalRows_rsMale = mysql_num_rows($rsMale);

echo "<br> This is num " . $totalRows_rsMale . "<br>"; 
```

我已将其下载到其他页面上的 csv 文件中，并且工作正常。然后我把那个数组放入另一个带有内爆的数组中。

```
$newData = implode(",",$row_rsMale );
$newData = mysql_real_escape_string($newData);

echo "<br> This is newdata <br>". $newData; 
```

这是我得到 Column not matching 错误的地方。我检查了它们匹配的列，我检查了数据类型，它们匹配。

```
 $insertSQL ="INSERT INTO ranking (points, usacNo, acaNo, firstName, lastName,
 cxage, cxcat, cxteam, city, state, gender)
 SELECT ( '$newData' )";

 $Result1 = mysql_query($insertSQL, $dbConnect) or die(mysql_error());

 echo "<br>Insert complete!<br>"; 
```

接下来我做了列的显示

```
 $rankingSQL ="Select * from ranking";

 $result = mysql_query($rankingSQL, $dbConnect) or die(mysql_error());
echo "<table><tr>";
for($i = 0; $i < mysql_num_fields($result); $i++) {
$field_info = mysql_fetch_field($result, $i);
echo "<th>{$field_info->name},</th>";
} 
```

这是我网站上我的页面上显示的内容 这是插入之前 这是数字 22

这是新数据 185.34,362355,4174,Shawn,Lortie,47,2,Rally Sport Cycling Team,BOULDER,CO,M points, usacNo, acaNo, firstName, lastName, cxage, cxcat, cxteam, city, state, gender, (为了便于阅读，我在列上添加了逗号。）列数与第 1 行的值计数不匹配

我最终回到了`while ($l = mysql_fetch_array($result)) {

```
{
  $insertSQL = sprintf("INSERT INTO ranking (points, usacNo, acaNo, firstName,   
lastName, cxage, cxcat, cxteam, city, `state`, gender) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
                   GetSQLValueString($l ['points'], "double"),
                   GetSQLValueString($l ['license'], "int"),
                   GetSQLValueString($l ['acaNo'], "int"),
                   GetSQLValueString($l ['firstName'], "text"),
                   GetSQLValueString($l ['lastName'], "text"),
                   GetSQLValueString($l ['cxage'], "int"),
                   GetSQLValueString($l ['cxcat'], "int"),
                   GetSQLValueString($l ['cxteam'], "text"),
                   GetSQLValueString($l ['city'], "text"),
                   GetSQLValueString($l ['state'], "text"),
                   GetSQLValueString($l ['gender'], "text"));

  $Result1 = mysql_query($insertSQL, $dbConnect) or die("<br>Error is " . mysql_error());
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:59:21.780

我认为问题在于以下陈述：

```
$insertSQL ="INSERT INTO ranking (points, usacNo, acaNo, firstName, lastName,
                                  cxage, cxcat, cxteam, city, state, gender)
             SELECT ( '$newData' )"; 
```

一旦 php 用您的数据扩展它，您将拥有以下 SQL 语句：

```
INSERT INTO ranking (points, usacNo, acaNo, firstName, lastName,
                     cxage, cxcat, cxteam, city, state, gender)
SELECT ( '185.34,362355,4174,Shawn,Lortie,47,2,Rally Sport Cycling Team,BOULDER,CO,M' ) 
```

SELECT 正在返回一个字段。因此，您将一个字段提供给具有 11 个字段的插入语句，这会产生错误。

您需要正确地形成插入，可能类似于：

```
$newData = implode("','",$row_rsMale );
$insertSQL = "INSERT INTO ranking (...) VALUES ('$newData')"; 
```

这应该导致以下结果：

```
INSERT INTO ranking (...) VALUES ('185.34','362355','4174','Shawn','Lortie','47','2','Rally Sport Cycling Team','BOULDER','CO','M') 
```

这不是最佳的，因为它用引号包围数字参数，但也许您的数据库会进行转换。

如果您不必通过 CSV 步骤，那么我会使用子选择进行插入，例如

```
INSERT INTO ranking (points, usacNo, acaNo, firstName, lastName,
                     cxage, cxcat, cxteam, city, state, gender) 
(SELECT  r.points, r.license, l.acaNo, l.firstName, l.lastName,
                     l.cxage, l.cxcat,l.cxteam, l.city, l.state, l.gender
FROM rankingsM r 
INNER JOIN field f ON r.license=f.USAC_No 
INNER JOIN racers l ON l.usacNo=f.USAC_No
ORDER BY points) 
```

一个操作完成整个操作并返回插入的行数。没有类型争论，并且从数据库/应用程序的角度来看非常有效，因为您不会将所有数据拉回 PHP 只是为了再次将其反馈回来。

# asp.net - 更新了 Microsoft 站点上的 ASP.NET Web API 教程

> ID：13478691
> 
> 赞同：0
> 
> 时间：2012-11-20T17:26:45.927
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

对于我应该学习哪个版本的 ASP.NET Web API 以及最佳信息来源在哪里，我感到非常困惑。许多教程是在 beta 和 alpha 的不同阶段发布的。据我所知，最新的框架与 alpha 和 beta 相差很大。

MS 网站上的教程是最新的吗？其中一些是在 2012 年 2 月上旬发布的，是否也值得一看，或者从那时起框架发生了很大变化？

（参考[http://www.asp.net/web-api/videos](http://www.asp.net/web-api/videos)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:00:40.630

[http://www.asp.net/web-api](http://www.asp.net/web-api)上的教程应该已经全部更新以与 ASP.NET Web API 的 RTM 版本一起使用。

# javascript - jQuery：测试元素是否是 MATCHED 元素中的第一个

> ID：13478692
> 
> 赞同：3
> 
> 时间：2012-11-20T17:26:45.967
> 
> 标签：javascript, jquery

我有几个 div 是警报。用户关闭它们，在最后一个（这是 DOM 中的第一个）之后，我需要触发一些 jquery 魔法。

这是一些简化的 HTML：

```
​&lt;body>
<div class="">Bla bla bla</div>
<div class="alert">A</div>
<div class="alert">B</div>
</body>​ 
```

这就是我想用 jquery 做的事情......

```
$(".alert").click( function() {

if ( $(this).is(".alert:first") ) { 
//do stuff
}

}); 
```

它不起作用。条件永远不会返回 true。我可以让它工作的唯一方法是使用`.index()`，但这很糟糕，因为如果标记的顺序发生变化，它会破坏脚本。

我究竟做错了什么？

编辑：该解决方案使用`.index()`但以一种我没有意识到的方式是可能的。如果以这种方式使用，它*是相对于匹配的选择。*谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:32:58.090

你可以编码：

```
$(".alert").click(function() {
    if ($(".alert").index(this) == 0) {
       // 
    }
}); 
```

[http://jsfiddle.net/g2gGa/](http://jsfiddle.net/g2gGa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:29:49.417

试试这个：

```
if ($(this).hasClass("alert") && $(this).is(":first")) { 
  //do stuff
} 
```

或者：

```
$(".alert").click( function() {
    if ($(".alert").index(this) == 0) { 
        //do stuff
    }
}); 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:34:17.233

试试这个[jsfiddle](http://jsfiddle.net/7ue5H/)

```
$(".alert").click( function() {

      if (this == $(".alert:first")[0] ) { 
        //do stuff 
           alert(this);
       }

});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:34:13.437

你可以试试这个。

```
$('.alert').click( function() {

if ( ($(this)[0] === $('.alert').first()[0])) { 
alert('first');
}

});​ 
```

# android - 具有准确计时的 Flash Android 屏幕

> ID：13478693
> 
> 赞同：2
> 
> 时间：2012-11-20T17:26:53.883
> 
> 标签：android, android-ndk

我必须创建一个 Android 应用程序，以准确的时间闪烁屏幕打开/关闭，以便通过可见光向外部设备发送类似摩尔斯电码的消息。到目前为止，我的实验都失败了，因为操作系统似乎干扰了我的“postAtTime”请求并弄乱了我的时间。

有没有人建议我如何至少每 50 毫秒以正负 5% 的精度打开/关闭 Android 屏幕（黑/白）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:46:06.610

你可以试试这个：

## 闪屏.java

```
package some.pkg.name;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;

public class SplashScreen extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash_screen);

    Handler handler = new Handler();

    // run a thread after 5 seconds to start the home screen
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

           finish();

           // start the home screen
            Intent intent = new Intent(SplashScreen.this, TargetActivity.class);
            SplashScreen.this.startActivity(intent);

        }

    }, 5000); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called

} 
```

}

## splash_screen.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:background="@drawable/splash_image"/> 
```

## 在清单文件中

```
 <activity android:name=".SplashScreen"      
          android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.MAIN">
            <category android:name="android.intent.category.LAUNCHER">
        </category></action></intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:34:06.390

我会尝试在视图上使用动画。您可以使用黑色背景和全屏白色视图，并以动画方式打开和关闭视图的可见性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:41:14.737

使用 CountDownTimer 类及其 onTick 方法。

您可以设置闪烁时间的毫秒数，在 CountDownTimer 的 onTick 方法中编写动画逻辑代码。

您只需要编写一个扩展 CountdownTimer 的类，然后在您的活动的 onCreate 中调用 countdowntimerOBJECT.start()。您可以使用黑色背景和全屏白色视图，并以动画方式打开和关闭视图的可见性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:35:18.793

使用`postAtTime()`会增加太多开销。您可以尝试使用动画，甚至尝试旧的、基于循环/睡眠的方法。对于动画，[请参阅此处的文档（此处](http://developer.android.com/reference/android/animation/package-summary.html)[的](http://www.vogella.com/articles/AndroidAnimation/article.html)教程），对于循环/[睡眠](http://developer.android.com/reference/android/os/SystemClock.html#sleep%28long%29)：通过执行即 10 次闪烁并查看需要多长时间来校准您的设备上的应用程序。然后你知道单次闪光需要多少时间。相应地调整`sleep()`以获得所需的闪光率。或者，您可以尝试 Handler's `postDelayed()`，但在这种情况下它会相当无效。

# c# - 在 ComboBox/DropDown 列表控件的 Lightswitch 中使用 EF 的 Enum

> ID：13478701
> 
> 赞同：0
> 
> 时间：2012-11-20T17:27:49.767
> 
> 标签：c#, visual-studio-2012, entity-framework-5, visual-studio-lightswitch

我创建了以下表格：

![在此处输入图像描述](../Images/3a1232e26e11b7c480b6ae3ae2e42944.png)

AccountContact 表中的**Role**是以下枚举：

```
public enum UserRoles : int
{
    Admin = 0,
    AccountAdmin = 1,
    AccountUser = 2,
    SiteAdmin = 3,
    SiteUser = 4,
    User = 5,
    None = 6
} 
```

在 Lightswitch 中，我添加了从 EF 设计创建的数据库，但 Role 在数据源表中是 int 而不是枚举。如何为枚举的 lightswitch 创建下拉列表并选择作为结果 int？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:43:06.600

尽管 EF5 现在支持枚举，但这并不意味着 LightSwitch 也支持它们。

我还没有使用 LS 2012，所以我无法确认这一点，但很可能是你的问题。我不记得听说 LightSwitch 中引入了枚举支持。

# php - 关于获取通用模拟对象的简单 PHPUnit

> ID：13478703
> 
> 赞同：1
> 
> 时间：2012-11-20T17:27:56.157
> 
> 标签：php, testing, mocking, phpunit

测试方法：

```
public function convert(AbstractMessage $message)
{
    $data = array();

    // Text conversion
    $text = $message->getText();

    if(null !== $text) {
        if(!is_string($text) && (is_object($text)
            && !method_exists($text, '__toString'))) {
            throw new UnexpectedTypeException(gettype($text), 'string');
        }

        $data['text'] = (string) $text;
    }
} 
```

如何模拟具有`__toString`方法的通用对象（无论类）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:43:39.213

```
<?php

// UnderTest.php

class UnderTest
{
    public function hasTostring($obj)
    {
        return method_exists($obj, '__toString');
    }
}

// Observer.php

class ObserverTest extends PHPUnit_Framework_TestCase
{
    public function testHasTostring()
    {

        $tester = new UnderTest();
        $with = new WithToString();
        $without = new WithoutToString();

        $this->assertTrue($tester->hasTostring($with));
        $this->assertFalse($tester->hasTostring($without));

        // this automatically calls to string
        // and if the method toString doesnt exists - returns E_RECOVERABLE_ERROR
        // so this line should work
        $x = $with . '';

        // but this shouldnt work, because the method doesnt exist
        // therefore you are supposed to get an exception
        $this->setExpectedException('PHPUnit_Framework_Error');
        $x = $without . '';
    }
}

        class WithToString
        {
            public function __toString() { return 'hi'; }
        }

        class WithoutToString{} 
```

# javascript - 在 knockout.js 中重用 ViewModel 之间的数据

> ID：13478705
> 
> 赞同：4
> 
> 时间：2012-11-20T17:28:00.283
> 
> 标签：javascript, knockout.js, knockout-2.0, breeze

**我有一个由敲除 ViewModel 中的 AJAX 调用填充的项目**数组，它显示网页上每个项目的几个数据字段。

现在我需要使用户能够单击一个项目来填充侧栏，其中包含从先前的 AJAX 请求（一些字段加上更多）接收到的数据。

我想通常一个人会接受一个**id**并执行一个特定于**项目**的 AJAX 请求，通过 Sammy.js 路由它，但我们不需要这样做。

我是淘汰赛新手；我想最好的策略是为各种 div 设置一个 ViewModel 来显示数据，但是如何让 ViewModel 在它们之间传递数据呢？这是禁忌吗？

*   通过窗口对象引用另一个窗口？
*   使用**with:**关键字？它不断出现，但我看不出如何在这种情况下应用它。
*   也许通过 Sammy.js，并在**Amplify**中缓存数据？

这是一个向下钻取功能的示例，我已经阅读了许多关于此的 StackOverflow 问答，但找不到我可以使用的东西。通过遵循 John Papa 的 PluralSight 教程，我已经达到了这个阶段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T04:49:08.813

您可能想要使用 Amplify 的消息传递或 @RPNiemeyer 上面提到的库的 pub/sub 模型。两者都很棒。

但是，听起来您只想从服务器获取数据，然后在多个视图模型中使用该数据。甚至可能在多个视图模型中共享其中的一些数据。我的 SPA 教程中的 datacontext 概念允许您在 datacontext 中托管数据并从其他视图模型中引用它。

您还可以使用 Breeze 之类的库来帮助执行此操作（Breeze 将替换我的 SPA 中的数据上下文......并且会做得更好，正如我将在即将到来的课程中展示的那样）。

这些只是几个选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:21:03.913

您可能还想查看微风文档中“Cool Breezes”下的“ [Share an EntityManager ”帖子。](http://www.breezejs.com/documentation/share-entitymanager)

共享单个 EntityManager 可能就是您所需要的。但是，如果您认为您需要多个管理器，请阅读“[多个管理器](http://www.breezejs.com/documentation/multiple-managers)”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-12T13:09:29.100

IMO 最简单的方法是简单地将带有可观察数据的“参数”传递给您的侧边栏组件。 [http://knockoutjs.com/documentation/component-custom-elements.html#passing-observable-expressions](http://knockoutjs.com/documentation/component-custom-elements.html#passing-observable-expressions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T11:44:37.213

正如评论中提到的，不错的选择是使用[**淘汰赛邮箱**](https://github.com/rniemeyer/knockout-postbox)

> *knockout-postbox 是一个 Knockout.js 插件，旨在使用 Knockout 的基本发布/订阅功能来促进不同视图模型/组件之间的解耦通信。*

这使您可以设置简单的基于主题的通信，例如：

```
var ViewModelOne = function() {
  this.isEditable = ko.observable();  
};

var ViewModelTwo = function() {
  this.editable = ko.observable(false);  
};

var one = new ViewModelOne();
var two = new ViewModelTwo();

var editableTopic = "myEditableTopic";
one.isEditable.subscribeTo(editableTopic);
two.editable.publishOn(editableTopic) 
```

# sql - 使用映射表的 SQL JOIN

> ID：13478715
> 
> 赞同：9
> 
> 时间：2012-11-20T17:28:30.003
> 
> 标签：sql, inner-join

我有三张桌子：

```
COLLECTION 
PERSON 
PERSON_COLLECTION 
```

`PERSON_COLLECTION`映射表在哪里`id|person_id|collection_id`

我现在想选择集合中的所有条目并按`person.name`.

我是否必须先将单独的表与映射表连接起来，然后再对结果进行连接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T17:30:16.670

```
SELECT
    c.*,
    p.Name
FROM
    Collection c
    JOIN Person_Collection pc ON pc.collection_id = c.id
    JOIN Person p ON p.id = pc.person_id
ORDER BY p.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:34:26.657

您加入的顺序不会破坏它，但取决于您使用的 sql 产品可能会影响性能。您需要决定是要来自两个/任一表的所有记录还是只需要具有匹配映射条目的记录，这将更改您需要使用的连接类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:35:55.687

不确定没有表架构，但我的看法是：

```
SELECT
c.*,
p.*

FROM
Person_Collection pc
LEFT JOIN Collection c
ON pc.collection_id = c.id
LEFT JOIN Person p
ON pc.person_id = p.id

ORDER BY p.name 
```

# java - 如何首先对目录深度的HashMap进行排序？

> ID：13478729
> 
> 赞同：-2
> 
> 时间：2012-11-20T17:29:11.217
> 
> 标签：java

我创建了一个哈希图，我将目录存储为键，然后将它们的内容存储为值。当我遍历哈希图并打印出我得到的所有内容时

```
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/ek.java
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/nu.java
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/os.java
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/njwqdp/di.html
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/njwqdp/po.html 
```

然而我想得到的是

```
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/njwqdp/di.html
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/njwqdp/po.html
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/ek.java
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/nu.java
files/abknl/bbxudleuf/jlffhq/y/xwjj/ell/os.java 
```

有任何想法吗？

为此，我正在对 hashmaps 键进行排序，然后打印每个键的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:34:17.533

A`HashMap`通常不排序。`SortedMap`例如，您将需要使用[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html). 此类将允许您使用自己的[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)，因此您可以根据需要对其内容进行排序。从[`TreeMap(Comparator<? super K>)`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap%28java.util.Comparator%29)构造函数 Javadoc：

> 构造一个新的空树映射，根据给定的比较器排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:34:15.537

尝试使用具有合适的[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)`Comparator`，然后`putAll`您的`HashMap`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:34:55.990

如果您需要以 . 开头`HashMap`，则可以创建[`new TreeMap(myHashMap)`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap%28java.util.Map%29). 这将具有相同的映射，但将按排序顺序遍历它们。

# javascript - 仅使用提供的 src 属性定位 iframe

> ID：13478737
> 
> 赞同：2
> 
> 时间：2012-11-20T17:29:26.797
> 
> 标签：javascript, jquery, html, css, iframe

我们有一个页面在底部呈现一些附属脚本。其中一个脚本呈现了一个 iframe，它在某些浏览器中破坏了我们的页面。我们希望阻止显示此 iframe，但它提供给我的唯一属性是`src`属性。我不能用我的 CSS 广泛地定位 iframe，因为其他生成的 iframe 对于各种合作伙伴来说都是必需的。

在他们有机会诊断出他们的错误代码之前，我们有没有办法通过它的 src 或使用 CSS 或 JavaScript/jQuery 的东西来定位这个 iframe 并阻止它显示在页面上？

坏的 iframe：

`<iframe src="https://someurl.net/p.ashx?a=9879&b=3541" height="1" width="1" frameborder="0">`

在这个 iframe 内部，文档树如下：

```
<html>
    <head><head>
    <body>
        <pre style="word-wrap:break-word; white-space:pre-wrap;">NF</pre>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:31:46.657

这应该可以解决问题：

```
$('iframe[@src*="someurl.net/p.ashx"]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-15T21:43:04.960

CSS方法将是：

```
iframe[src*="someurl.net"] {
    display: none;
} 
```

# java - 没有回应我的代码

> ID：13478740
> 
> 赞同：0
> 
> 时间：2012-11-20T17:29:42.897
> 
> 标签：java, event-handling, applet, mouseevent, paintcomponent

我试图学习小程序并在执行此代码时，没有编译时错误，但问题是我没有得到对我的代码的任何响应。我使用简单的记事本和appletviewer 来完成它。单击小程序时，应该显示坐标，但没有发生。我尝试输入相关的 html 代码并通过浏览器执行，但响应是相同的。任何帮助将不胜感激

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
/*
<applet code="MyMouseApplet.class"
width = "400"
height = "400"> 
</applet>*/

public class MyMouseApplet extends Applet implements MouseListener{
int x,y;
String str=" ";
public void init(){
this.addMouseListener(this);
}
public void paint(Graphics g){
g.drawString(str,x,y);
}
public void update(Graphics g){
paint(g);
}
public void mouseClicked(MouseEvent m)
{
int x = m.getX();
int y = m.getY();
str="x:" + x + "y:" + y;
repaint();
}
public void mouseExited(MouseEvent m){}
public void mouseEntered(MouseEvent m){}
public void mousePressed(MouseEvent m){}
public void mouseReleased(MouseEvent m){}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:44:17.173

您的`mouseClicked`函数需要`x`和`y`超出范围。做这个：

```
public void mouseClicked(MouseEvent m)
{
     //int x = m.getX();
     //int y = m.getY();
     x = m.getX();
     y = m.getY();
     str="x:" + x + "y:" + y;
     repaint();
} 
```

这将访问您的类的字段，而不是局部变量。

# php - jQueryUI 选项卡 - 通过 POST 变量强制单击选项卡

> ID：13478741
> 
> 赞同：0
> 
> 时间：2012-11-20T17:29:42.387
> 
> 标签：php, jquery-ui

我希望能够通过 GET 变量发送消息来打开特定选项卡上的页面。我在想类似的事情：

```
http://mydomain/mytimecards.php?tab=vte 
```

这是 jQuery 选项卡的代码：

```
<div id="tabs">
    <ul>
        <li><a href="#mytimecards">Submit Time Cards</a></li>
        <li><a href="#timecardReports" id="vte">View Time Entries</a></li>
    </ul>
    <div id="mytimecards">
    etc .... 
```

是否可以强制页面显示第二个选项卡 (#timecardReports) 而不是第一个仅当 ?tab=vte 作为 GET（或更好的 POST）变量接收时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:32:36.933

假设您使用的插件允许您在加载时设置一个活动选项卡，您可以执行以下操作：

```
<li><a href="#timecardReports" id="vte" <? if(isset($_GET['tab']) && $_GET['tab'] == 'vte'){ echo 'class="active"'; } ?>>View Time Entries</a></li> 
```

替换`class="active"`插件需要您设置的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:53:01.453

谢谢，伙计们，Ben 和 itachi 找到了正确的解决方案。这有效：

```
http://mydomain.com/mytimecards.php?tab=vte#timecardReports 
```

我通过使用 firebug 并观察单击选项卡时发生的变化发现了这一点。谢谢伊藤。

Ben 的建议使我能够测试这种情况并将其设置为页面加载。

Credit to them both.

# html - IE9 和 标签

> ID：13478742
> 
> 赞同：1
> 
> 时间：2012-11-20T17:29:47.443
> 
> 标签：html, internet-explorer-9, html5-audio

我有一个 100% 有效的 html5 文档，在每个操作系统上的所有其他浏览器上，都没有问题，但在 IE9 上，我总是只得到带有红十字的黑色矩形而不是音频播放器。我认为它可能与activeX有某种冲突。

谢谢。

```
<audio controls="controls">
        <source src="/files/NRUPPLYSNINGEN_XTRA.mp3" type="audio/mp3">
        <source src="/files/NRUPPLYSNINGEN_XTRA.wav" type="audio/wav">
        <source src="/files/NRUPPLYSNINGEN_XTRA.ogg" type="audio/ogg">
        Your browser does not support this audio format.
</audio> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:21:00.100

也许是一个愚蠢的问题，但可能是音频文件的路径不正确吗？即使找不到音频文件，Chrome 也能很好地呈现音频播放器。但是，IE9 似乎没有这样做。

如果我用一个工作文件替换音频文件，那么十字架就会消失，一切正常。

```
<audio controls="controls">
        <source src="http://open.is/jQueryMusicPlayer/betty.mp3" type="audio/mp3">
        Your browser does not support this audio format.
</audio>​ 
```

试试看：http: [//jsfiddle.net/PFTaN/](http://jsfiddle.net/PFTaN/)

# asp.net - Elmah 集成 - 尝试访问 elmah.axd 时出现错误 500

> ID：13478746
> 
> 赞同：1
> 
> 时间：2012-11-20T17:30:05.130
> 
> 标签：asp.net, session, web-config, state, elmah

我正在尝试将 Elmah 工具添加到我的网站，以便能够记录异常。Elmah 正在工作，因为异常记录到我的 SQL Server 数据库的表 ELMAH_Error 中。

问题是，当我尝试访问页面 elmah.axd 时，我收到错误 500。问题与似乎未激活的 sessionState 有关。但是，如果我查看 Web.config，我有：

```
<sessionState mode="SQLServer" timeout="60" allowCustomSqlDatabase="true"
sqlConnectionString="data source=MYSERVER;Initial Catalog=ASPStateFicheClient;
user id=USERID;password=Password" cookieless="UseCookies" /> 
```

我正在使用 .NET 3.5 和 Webforms。

这是网站上显示的错误：

* * *

## “/”应用程序中的服务器错误。

会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Web.HttpException：会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[HttpException (0x80004005)：会话状态只能在 enableSessionState 设置为 true 时使用，无论是在配置文件中还是在 Page 指令中。还请确保 System.Web.SessionStateModule 或自定义会话状态模块包含在应用程序配置的 \\ 部分中。] System.Web.UI.Page.get_Session() +2650952 MyFramework.HttpModules.ResultMessageModule.loadComplete(对象发送者，EventArgs e) +67 System.Web.UI.Page.OnLoadComplete(EventArgs e) +8711878 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +735

提前感谢您的帮助，

# jquery - jQuery 可排序的重新排序

> ID：13478747
> 
> 赞同：3
> 
> 时间：2012-11-20T17:30:05.423
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-sortable

我有一些结构：

```
li#lists
--ul
----li.category

------ul.due
--------li.item

------ul.date
--------li.item

------ul.other
--------li.item
--------li.item
--------li.item 
```

我需要在 ul.other 元素中对我的 li.item 元素进行排序。现在在某些类别中排序正在工作，但我需要将项目排序到另一个类别。

示例：我需要在“这是可排序的 5”之后排序“这是可排序的 2”。或在“这是可排序的 2”之后排序“这是可排序的 5”。

我的代码（[小提琴](http://jsfiddle.net/XYEtC/9/)）：

```
$('.category ul.other').sortable({
    items: "li",
    helper: "clone",
    cursor: "move",
    placeholder: "drag-to",
    opacity: 0.5,
    connectWith: ".category ul.other"
}).disableSelection(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:17:09.093

这是[错误 #4551](http://bugs.jqueryui.com/ticket/4551)。当扩充列表项浮动时，该`connectWith`选项显然无法按预期工作。

从以下规则中删除`float: left;`以牺牲项目布局为代价解决了您的问题（您可能希望指定一个固定宽度来补偿）：

```
#lists .due li,
#lists .date li,
#lists .other li,
#lists .title {
    float: left;  // <-- Remove this style.
    padding: 8px;
    margin-left: -9px;
    border: 1px solid #fff;
    border-radius: 2px;
    margin-top: 1px;
} 
```

[你会在这里](http://jsfiddle.net/XYEtC/10/)找到一个更新的小提琴。

# security - 如何使我的 API 私有但可由移动应用程序使用？

> ID：13478748
> 
> 赞同：9
> 
> 时间：2012-11-20T17:30:08.660
> 
> 标签：security, api, http, rest, private

这是我的要求：

*   **可用于我正在**开发的任何移动应用程序

我正在开发移动应用程序，因此我可以实施任何安全策略。

*   可使用经典的 HTTP 缓存策略进行缓存

我正在使用具有非常基本配置的 Varnish，并且效果很好

*   不公开

我不希望人们能够使用我的 API

我想到的解决方案：

*   使用 HTTPS，但它不涵盖最后的要求，因为来自应用程序的代理请求将显示使用的 API KEY。

有没有可能做到这一点？例如，使用诸如私钥/公钥之类的东西？

它非常适合 HTTP、Apache 和 Varnish。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T17:39:20.110

无法确保网络链接的另一端是您的应用程序。这不是一个可以解决的问题。你可以用证书、密钥、秘密等混淆事物。但是所有这些都可以由最终用户进行逆向工程，因为他们可以访问应用程序。可以使用证书之类的小混淆，但不能保证安全。您的服务器必须假定连接到它的任何人都是敌对的，并采取相应的行为。

可以对*用户*进行身份验证，因为他们可以拥有帐户。因此，您当然可以确保只有有效用户才能使用您的服务。但是您不能确保他们只使用您的应用程序。如果您当前的架构需要，您必须重新设计。它是不可解决的，而且在常见的移动平台上肯定是不可解决的。

如果您可以集成一块安全硬件，例如智能卡，则可以提高安全性，因为您可以更加确定另一端的人实际上是客户，但即使这样也不能保证您的应用程序是连接到服务器的那个，只有智能卡对正在连接的应用程序可用。

有关此主题的更多信息，请参阅[iPhone 应用程序到网页的安全 https 加密](https://stackoverflow.com/questions/9181186/secure-https-encryption-for-iphone-app-to-webpage/9183066#9183066)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-13T16:42:08.957

尽管这是真的，但基本上没有办法保证您的 API 仅由您的客户使用，除非您使用硬件安全元素来存储秘密（这意味着您从头开始制作自己的手机，任何外部设备都可以被任何非官方客户端应用程序）你可以做一些相当有效的事情来掩盖 API。首先，使用 HTTPS，这是给定的。但这里的关键是在您的应用程序中进行证书固定。证书锁定是一种技术，您可以在其中存储您尝试连接的 HTTPS 服务器的有效公钥证书。然后在每个连接上，验证它是 HTTPS 连接（不接受降级攻击），更重要的是，验证它是完全相同的证书。这样，您可以防止路径中的网络设备执行中间人攻击，从而确保没有人在您与服务器的对话中监听。通过这样做，并且对在应用程序中存储 API 参数的一般设计方式有点聪明（参见代码混淆，特别是如何混淆字符串常量），您可以相当确定您是唯一与您的服务器交谈的人。当然，安全性只是一个人想要闯入你的东西的程度的函数。这样做并不会阻止有经验的逆向工程师有时间尝试（并且可能成功）反编译您的源代码并找到它正在寻找的内容。但是这样做会迫使它查看二进制文件，这比仅仅在中间攻击中执行一个人要困难几个数量级。这与最新的一连串泄露图像有关。存在用于 snapchat 的第三方客户端，它们是通过对 API 进行逆向工程创建的，通过嗅探器在中间人攻击期间查看流量。如果 snapchat 应用程序开发人员更聪明，他们会将他们的证书固定到他们的应用程序中，绝对保证他们正在与之交谈的是 snapchat 的服务器，并且黑客需要检查二进制文件，这是一项更加费力的任务，也许考虑到所涉及的努力，将不会执行。它们是通过对 API 进行逆向工程创建的，通过嗅探器在中间人攻击期间查看流量。如果 snapchat 应用程序开发人员更聪明，他们会将他们的证书固定到他们的应用程序中，绝对保证他们正在与之交谈的是 snapchat 的服务器，并且黑客需要检查二进制文件，这是一项更加费力的任务，也许考虑到所涉及的努力，将不会执行。它们是通过对 API 进行逆向工程创建的，通过嗅探器在中间人攻击期间查看流量。如果 snapchat 应用程序开发人员更聪明，他们会将他们的证书固定到他们的应用程序中，绝对保证他们正在与之交谈的是 snapchat 的服务器，并且黑客需要检查二进制文件，这是一项更加费力的任务，也许考虑到所涉及的努力，将不会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-13T16:49:03.387

我们使用 HTTPS 并为授权用户分配一个密钥，该密钥在每个请求中发送并验证。

我们还使用 HMAC 哈希。

好好阅读这个 HMAC： [http ://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

# objective-c - OS X GUI Cocoa 应用程序与 shell 交互

> ID：13478755
> 
> 赞同：2
> 
> 时间：2012-11-20T17:30:36.767
> 
> 标签：objective-c, cocoa, shell, terminal

背景：

我们正在开发一个仅供内部使用的可可应用程序，以帮助我们完成一些基本的系统管理任务和复杂的网站部署。这个应用程序基本上是许多不同 bash shell 命令的包装器。这些命令的输出有时需要解析或显示给用户。

我们玩过 NSTask 并且能够启动一些脚本。但是，这似乎有些麻烦（需要设置确切的路径，分别传入每个参数，等等......）。如果这实际上是首选方法，我们可以以这种方式使用 NSTask。

迄今为止最大的挑战是设置 shell 环境。我们与许多 ruby​​ gems 和程序进行交互，并使用 capistrano 进行部署。

问题是：

我们如何像用户一样通过环境设置与 shell 交互？（别名、rvm、ruby、路径）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:44:23.843

您将在 Terminal.app 的 shell 中看到的环境变量几乎仅限于您在终端上下文中使用的任何 shell。`NSTask`它不会被 " " 自动拾取。

但是……你确实有选择。[其中一些在此相关问题的答案中进行了描述](https://stackoverflow.com/questions/386783/nstask-not-picking-up-path-from-the-users-environment)。

您可以通过“”文件设置更多由 NSTask 拾取的通用环境变量，或者*您*`~/.launchd.conf`可以设置“”的外壳`NSTask`以匹配终端中的那个（这意味着您选择 .bashrc 或 .profile 或任何初始化路径）通过“ [`[NSTask setLaunchPath:]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html#//apple_ref/occ/instm/NSTask/setLaunchPath:)”（启动路径是你的shell）。

当然，您也可以[`system()`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/system.3.html)从您的工具中调用“”。`~/.launchd.conf`这也可能会选取“ ”文件中设置的变量。

[此问题中提供了有关环境变量的更多信息。](https://stackoverflow.com/questions/603785/environment-variables-in-mac-os-x)

# floating-point - OCaml 中的 80 位扩展精度浮点

> ID：13478758
> 
> 赞同：45
> 
> 时间：2012-11-20T17:30:45.123
> 
> 标签：floating-point, ocaml, extended-precision

是否有 OCaml 库可以利用 IA-32 和 x86-64 架构上的 80 位扩展精度浮点类型？

我知道[MPFR 绑定](http://www.inrialpes.fr/pop-art/people/bjeannet/mlxxxidl-forge/mlgmpidl/)，但我理想的库会更轻量级。利用历史浮点指令将是理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:00:44.893

*由于语言对ffi*的支持，这样一个库的实现可以在编译器之外实现。

该库必须分为两部分：本机 ocaml 源代码部分和 C 运行时部分。OCaml 源必须包含数据类型声明，以及所有导入函数的声明。例如，添加操作将是：

```
(** basic binary operations on long doubles *)
external add : t -> t -> t = "ml_float80_add"
external sub : t -> t -> t = "ml_float80_sub"
external mul : t -> t -> t = "ml_float80_mul"
external div : t -> t -> t = "ml_float80_div" 
```

在 C 代码中，`ml_float80_add`应该定义函数，如 OCaml 手册中所述：

```
CAMLprim value ml_float80_add(value l, value r){
   float80 rlf = Float80_val(l);
   float80 rrf = Float80_val(r);
   float80 llf = rlf + rrf;
   value res = ml_float80_copy(llf);
   return res;
} 
```

在这里，我们将 OCaml`value`运行时表示转换为原生 C 值，对它们使用二元运算符，并返回一个新的 OCaml 值。该`ml_float80_copy`函数执行该运行时表示的分配。

`sub`同样， ,`mul`和函数的 C 实现也`div`应该在那里定义。可以注意到这些函数在签名和实现上的相似之处，并通过使用 C 宏进行抽象：

```
#define FLOAT80_BIN_OP(OPNAME,OP)                   \
  CAMLprim value ml_float80_##OPNAME(value l, value r){     \
    float80 rlf = Float80_val(l);                           \
    float80 rrf = Float80_val(r);                           \
    float80 llf = rlf OP rrf;                               \
    value res = ml_float80_copy(llf);           \
    return res;                     \
  }

FLOAT80_BIN_OP(add,+);
FLOAT80_BIN_OP(sub,-);
FLOAT80_BIN_OP(mul,*);
FLOAT80_BIN_OP(div,/); 
```

OCaml 和 C 模块的其余部分应遵循。

关于如何将`float80`C 类型编码为 OCaml 值有很多可能性。最简单的选择是使用一个字符串，并将 raw 存储在其中`long double`。

```
type t = string 
```

在 C 端，我们定义了将 OCaml 值来回转换为 C 值的函数：

```
#include <caml/mlvalues.h>
#include <caml/alloc.h>
#include <caml/misc.h>
#include <caml/memory.h>

#define FLOAT80_SIZE 10  /* 10 bytes */

typedef long double float80;

#define Float80_val(x) *((float80 *)String_val(x))

void float80_copy_str(char *r, const char *l){
   int i;
   for (i=0;i<FLOAT80_SIZE;i++)
      r[i] = l[i];
}

void store_float80_val(value v,float80 f){
   float80_copy_str(String_val(v), (const char *)&f);
}

CAMLprim value ml_float80_copy(value r, value l){
   float80_copy_str(String_val(r),String_val(l));
   return Val_unit;
} 
```

但是，该实现不支持 OCaml 内置的多态比较函数`Pervasive.compare`以及其他一些功能。在上面的 float80 类型上使用该函数会误导比较函数认为这些值是字符串，并对其内容进行字典比较。

不过，支持这些特殊功能很简单。我们将 OCaml 类型重新定义为抽象类型，并更改 C 代码以创建和处理我们的 float80 的自定义结构：

```
#include <caml/mlvalues.h>
#include <caml/alloc.h>
#include <caml/misc.h>
#include <caml/memory.h>
#include <caml/custom.h>
#include <caml/intext.h>

typedef struct {
   struct custom_operations *ops;
   float80 v;  
} float80_s;

#define Float80_val(x) *((float80 *)Data_custom_val(x))

inline int comp(const float80 l, const float80 r){
   return l == r ? 0: (l < r ? -1: 1); 
}

static int float80_compare(value l, value r){
   const float80 rlf = Float80_val(l);
   const float80 rrf = Float80_val(r);
   const int llf = comp(rlf,rrf);
   return llf;
}

/* other features implementation here */

CAMLexport struct custom_operations float80_ops = {
  "float80", custom_finalize_default, float80_compare, float80_hash,
  float80_serialize, float80_deserialize, custom_compare_ext_default
};

CAMLprim value ml_float80_copy(long double ld){
  value res = caml_alloc_custom(&float80_ops, FLOAT80_SIZE, 0, 1);  
  Float80_val(res) = ld;
  return res;
} 
```

然后我们建议使用 ocamlbuild 和一个小的 bash 脚本来构建整个东西。

# javascript - Titanium - ScrollView 中的文本区域

> ID：13478763
> 
> 赞同：0
> 
> 时间：2012-11-20T17:30:59.007
> 
> 标签：javascript, android, textarea, scrollview, titanium-mobile

我正在尝试在滚动视图中创建一个文本区域框。问题是它适用于 iOS，但在 Android 中，当在 textarea 中输入多行时，我无法上下滚动查看我输入的内容。我知道在本机 Android 中，您可以提供最大数量的行和滚动条以允许在视图 XML 文件中允许滚动视图中的可滚动文本区域，但是有没有办法做类似或不同的方式来做到这一点钛？

这是我正在使用的代码：

```
var win = Ti.UI.createWindow({
    title: 'Test',
    backgroundColor: 'transparent'
});

var view = Ti.UI.createScrollView({
    top: 10,
    left: 10,
    right: 10,
});

var ta = Ti.UI.createTextArea({
    top: 5,
    left: 5,
    right: 5,
    height: 400,
    backgroundColor: '#AA8BC9'
});

var btn = Ti.UI.createButton({
    top: 800,
    left: 10,
    right: 10,
    width: Ti.UI.FILL,
    height: Ti.UI.SIZE,
    backgroundColor: 'FF00CC',
    text: 'OK'
});

view.add(ta);
view.add(btn);
win.add(view);
win.open(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T04:25:32.970

Kibria，这是旧钛 sdk 中的问题。我也遇到了android中的tableview和scrollview这个问题。我希望这个问题可以在新的钛 sdk 中解决。

另一种解决方案是您需要将滚动视图布局设置为垂直。并将您的 TextArea 高度设置为自动，然后添加您的按钮。通过这种方式，您的滚动视图和文本区域非常适合您。

# c# - 根据 C# 中的条件从 JSON 中删除元素

> ID：13478767
> 
> 赞同：6
> 
> 时间：2012-11-20T17:31:28.493
> 
> 标签：c#, json, json.net

我有一个我希望能够在 C# 中修改的 JSON 字符串。我希望能够根据其中一个子值是某个值时删除一组数据。

采取以下

```
 {
  "responseHeader":{
    "status":0,
    "QTime":0,
    "params":{
      "explainOther":"",
      "fl":"*,score",
      "indent":"on",
      "start":"0",
      "q":"*:*",
      "hl.fl":"",
      "qt":"",
      "wt":"json",
      "fq":"",
      "version":"2.2",
      "rows":"2"}
  },
  "response":{"numFound":2,"start":0,"maxScore":1.0,"docs":
  [{
        "id":"438500feb7714fbd9504a028883d2860",
        "name":"John",
        "dateTimeCreated":"2012-02-07T15:00:42Z",
        "dateTimeUploaded":"2012-08-09T15:30:57Z",
        "score":1.0
   },
   {
        "id":"2f7661ae3c7a42dd9f2eb1946262cd24",
        "name":"David",
        "dateTimeCreated":"2012-02-07T15:02:37Z",
        "dateTimeUploaded":"2012-08-09T15:45:06Z",
        "score":1.0
    }]
 }} 
```

上面显示了两个响应结果。我希望能够在其子“id”值匹配时删除整个父响应结果组，例如，如果我的 id 是“2f7661ae3c7a42dd9f2eb1946262cd24”，我希望删除第二组，因此我的结果如下所示.

```
{
  "responseHeader":{
    "status":0,
    "QTime":0,
    "params":{
      "explainOther":"",
      "fl":"*,score",
      "indent":"on",
      "start":"0",
      "q":"*:*",
      "hl.fl":"",
      "qt":"",
      "wt":"json",
      "fq":"",
      "version":"2.2",
      "rows":"2"}},
  "response":{"numFound":2,"start":0,"maxScore":1.0,"docs":[
  {
        "id":"438500feb7714fbd9504a028883d2860",
        "name":"John",
        "dateTimeCreated":"2012-02-07T15:00:42Z",
        "dateTimeUploaded":"2012-08-09T15:30:57Z",
        "score":1.0
    }]
  }} 
```

我将需要对 Json 文件执行多个删除操作。Json 文件可能包含数千个结果，我真的需要尽可能高性能的方式。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:42:28.623

```
var jObj = (JObject)JsonConvert.DeserializeObject(json);
HashSet<string> idsToDelete = new HashSet<string>() { "2f7661ae3c7a42dd9f2eb1946262cd24" };

jObj["response"]["docs"]
    .Where(x => idsToDelete.Contains((string)x["id"]))
    .ToList()
    .ForEach(doc=>doc.Remove());

var newJson = jObj.ToString(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T18:09:58.323

在过去的 10 分钟左右，我一直在尝试将其压缩为更好的 LINQ 语句，但已知 Id 列表本质上改变了每个元素的评估方式这一事实意味着我可能不会得到那个发生。

```
 var jObj = (JObject)JsonConvert.DeserializeObject(json);
        var docsToRemove = new List<JToken>();
        foreach (var doc in jObj["response"]["docs"])
        {
            var id = (string)doc["id"];
            if (knownIds.Contains(id))
            {
                docsToRemove.Add(doc);
            }
            else
            {
                knownIds.Add(id);
            }
        }
        foreach (var doc in docsToRemove)
            doc.Remove(); 
```

这似乎与我测试的蹩脚的小控制台应用程序配合得很好，但我的测试仅限于上面的示例数据，所以如果有任何问题，请继续发表评论，以便我修复它们。

对于它的价值，这基本上将在线性时间内运行，相对于你提供多少元素，这很可能是你将获得的更多算法性能，而不会对这个问题感到厌烦。使用任务并行库将大约 100 条记录的每一页旋转到自己的任务中，调用将处理自己的小页面并返回清理后的 JSON 字符串的工作人员。如果您在多核机器上运行它肯定会使它更快，我很乐意提供一些代码让您开始使用它，但这对于所呈现的问题范围来说也是一个巨大的过度工程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-05T15:16:16.197

上面的答案都不适合我，我不得不从( ) 中获得`Remove()`孩子，而不仅仅是它。下面的工作代码示例：`Parent``.Parent.Remove()``Remove()`

```
namespace Engine.Api.Formatters
{
    using Newtonsoft.Json;
    using Newtonsoft.Json.Linq;
    using System;
    using System.IO;
    using System.Net;
    using System.Net.Http;
    using System.Net.Http.Formatting;
    using System.Net.Http.Headers;
    using System.Threading.Tasks;
    using System.Web.Script.Serialization;
    using System.Xml;
    using System.Xml.Serialization;

    public class ReducedJson
    {
        public dynamic WriteToStreamAsync(object value)
        {
                    var json = new JavaScriptSerializer().Serialize(value);
                    var serializedJson = (JObject)JsonConvert.DeserializeObject(json);
                    foreach (var response in serializedJson["ProductData"]["Motor"]["QuoteResponses"])
                    {
                        response["NetCommResults"].Parent.Remove();
                        foreach (var netCommResult in response["BestPriceQuote"]["NetCommResults"])
                        {
                            netCommResult["Scores"].Parent.Remove();
                        }
                    }

          return serializedJson;
        }
} 
```

希望这可以节省您一些时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-30T17:58:27.740

我只是找到另一个答案。

```
var aJson = JsonConvert.DeserializeObject<JObject>(json);
var doc = aJson["response"]["docs"];
JObject docs = new JObject();
docs["docs"] = doc;

// remove
docs.SelectTokens(string.Format("docs[?(@.id == '{0}')]", "2f7661ae3c7a42dd9f2eb1946262cd24")).ToList().ForEach(i => i.Remove());
// replace
aJson.SelectToken("response.docs").Replace(docs["docs"]); 
```

# smtp - 如何在 whm cpanel 中获取传入邮件的 smtp 身份验证

> ID：13478769
> 
> 赞同：1
> 
> 时间：2012-11-20T17:31:42.210
> 
> 标签：smtp, sendmail, whm

有没有办法在 whm cpanel 中访问 POP3 协议（来自 gmail）的传入邮件？我尝试了所有不同的方法。我查不出来。任何帮助表示赞赏..

# php - 我可以覆盖在另一个文件/插件中调用的 PHP 函数吗？

> ID：13478774
> 
> 赞同：1
> 
> 时间：2012-11-20T17:32:09.183
> 
> 标签：php, wordpress, customization, jigoshop

首先，我已经阅读了“[覆盖默认 php 函数](https://stackoverflow.com/questions/3927995/override-default-php-function)”并且命名空间不能满足我的需要。我也研究了[PHP.net 的 override_function()](http://php.net/manual/en/function.override-function.php)但这也不能帮助我解决我的问题。

我正在使用名为 Jigoshop 的 Wordpress 插件作为电子商务解决方案，但在某些情况下，我无法删除将自己的结构应用于“单一产品”页面所需的操作。我不想自己编辑插件文件，因为插件更新可能会否定并删除我以前的更改。本质上，我想通过我的`/themes/mytheme/functions.php`文件控制输出。

有没有人遇到过这种情况，原始函数包含在我不想编辑的文件中，因为同样的“更新”原因？

谢谢

**编辑（2012-11-21）：** 我的`functions.php`文件中有一个自定义函数，如下所示：

```
function prepare_jigoshop_wrappers() {
    remove_action('jigoshop_before_main_content', 'jigoshop_breadcrumb', 20);
    add_action('jigoshop_before_main_content', 'custom_jigoshop_breadcrumb', 10);
}
add_action('wp_head', 'prepare_jigoshop_wrappers'); 
```

这基本上允许我应用我自己的结构和配置。对于其他默认功能，它有点困难。例如，“数量选择器”、“添加到购物车”按钮和“库存可用性”都包含在文件中调用的函数`jigoshop_template_single_summary`中，该`jigoshop_template_actions.php`函数调用了`_title`, `_price`, `_excerpt`, `_meta`, `_sharing`&之类的函数`_add_to_cart`。

这些显示的顺序，我似乎无法改变。因此，我想从本质上重新定义`function jigoshop_template_single_summary() {...}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:07:40.243

您可能想查看 PECL 扩展。它可以满足您的需要，PHP.NET 上的文档。

runkit_function_redefine

(PECL runkit >= 0.7.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:38:28.243

我不太了解这个插件，但可能这就是你需要[Jigoshop 的主题](http://forum.jigoshop.com/kb/customize-jigoshop/theming-with-jigoshop)

重写 php 中的一些函数（也是常见的..）从来都不是一个好主意。如果插件没有提供一种方法来挂钩它的功能，有时最好使用替代插件或重写核心代码。

# c++ - 将 SqlServer 数据库添加到基于 MFC 对话框的应用程序

> ID：13478777
> 
> 赞同：0
> 
> 时间：2012-11-20T17:32:28.367
> 
> 标签：c++, sql-server, mfc, dialogbasedapp

我在 c# 中有一些代码可以连接到 sqlserver 数据库并在 datagridview 上显示数据：

```
SqlConnection conn = new SqlConnection();
conn.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\Users\\UVSS\\Documents\\CommPortDB.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
conn.Open();            
var adapter = new SqlDataAdapter("Select * from UVSSTable1", conn);
var table = new DataTable();
adapter.Fill(table);
this.dataGridView1.DataSource = table; 
```

如何在 C++ 中基于 MFC 对话框的应用程序中使用它？我已经提到了[这个](https://stackoverflow.com/questions/11360247/add-sql-database-in-mfc-dialog-based-application)先前的问题，但它似乎并没有涵盖我需要知道的内容。

# python - 在 python 中使用斯坦福标记器时出错

> ID：13478779
> 
> 赞同：6
> 
> 时间：2012-11-20T17:32:28.710
> 
> 标签：python, stanford-nlp, pos-tagger

这是我的代码和错误消息：

```
>>> from nltk.tag.stanford import StanfordTagger
>>> st = StanfordTagger('bidirection-distsim-wsj-0-18.tagger')

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk/tag/stanford.py", line 42, in __init__
    verbose=verbose)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nltk/internals.py", line 597, in find_jar
    raise LookupError('\n\n%s\n%s\n%s' % (div, msg, div))
LookupError: 

===========================================================================
  NLTK was unable to find ! Set the CLASSPATH environment variable.

  For more information, on , see:
    <http://nlp.stanford.edu/software>
=========================================================================== 
```

我该如何解决？我真的很想在 Python 中使用 stanford tagger 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T02:37:12.907

```
from nltk.tag.stanford import POSTagger

st = POSTagger( < path to tagger >, < path to stanford NLP package/stanford-postagger.jar >) 
```

包括两个参数的完整路径。

如果可行，请尝试一个例句

```
st.tag('What is the airspeed of an unladen swallow ?'.split()) 
```

检查您是否已将 Stanford Parser 路径添加到`CLASSPATH`环境变量

```
export CLASSPATH = {CLASSPATH}: < path to stanford NLP package > 
```

这应该有效。

# mongodb - 如何通过身份验证远程复制 mongo 数据库？

> ID：13478784
> 
> 赞同：1
> 
> 时间：2012-11-20T17:32:44.500
> 
> 标签：mongodb, copy, remote-server

我正在尝试将远程服务器上的现有 mongo 数据库“test”复制到同一个远程服务器，但它应该得到一个不同的名称“test2”。Mongodb 在此服务器上受密码保护。

有什么简单的方法可以做到这一点？（我想用这个创建一个shell脚本）

我尝试的是通过使用连接到 mongo

```
mongo "IP" 
```

然后我尝试使用数据库副本

```
db.copyDatabase( "test", "test2", "localhost", "<username>", "<password>"); 
```

但这并没有奏效......即使我在复制之前验证自己的身份时也会出错......任何建议任何人如何最简单地做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:59:16.930

我的猜测是使用“localhost”作为主机名会导致您的问题，因为“localhost”对于运行 shell 的机器与运行 mongod 的机器不同。尝试在命令中使用运行 db 的机器的主机名或 ip，而不是“localhost”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:13:48.560

我会尝试单独运行 auth 命令。所以是这样的：

```
mongo "IP"
use test
db.auth("<username>", "<password>")
db.copyDatabase("test", "test2") 
```

我认为您不需要放置 localhost 因为它们在同一台服务器上

# php - Ubuntu / PHPStorm / Xdebug

> ID：13478786
> 
> 赞同：3
> 
> 时间：2012-11-20T17:32:50.193
> 
> 标签：php, xdebug, phpstorm

我无法在**Ubuntu 12.10**和**PHP5.4**下的**PhpStorm上运行 xdebug 在我看来，一切****都已** 启用，但 IDE 不会在断点处停止。下面是相关参数。

 ****有人可以查看参数以查看我缺少的内容吗？我想知道 xdebug.remote_enable 是否需要打开。我正在调试一个本地文件。服务器根目录和项目路径相同。

如果我确实需要更改 PHP54 xdebug 参数，我到底该在 ubuntu 哪里做呢？

我将以下内容添加到/etc/php5/apache2/php.ini，重新启动了apache，但它们似乎被忽略了。

```
xdebug.remote_enable=1
xdebug.remote_port=9000
xdebug.remote_handler="dbgp"
xdebug.remote_host="localhost" 
```

php - 我输出

```
/etc/php5/cli/conf.d/20-xdebug.ini
xdebug
xdebug support => enabled
xdebug.auto_trace => Off => Off
xdebug.cli_color => 0 => 0
xdebug.collect_assignments => Off => Off
xdebug.collect_includes => On => On
xdebug.collect_params => 0 => 0
xdebug.collect_return => Off => Off
xdebug.collect_vars => Off => Off
xdebug.coverage_enable => On => On
xdebug.default_enable => On => On
xdebug.dump.COOKIE => no value => no value
xdebug.dump.ENV => no value => no value
xdebug.dump.FILES => no value => no value
xdebug.dump.GET => no value => no value
xdebug.dump.POST => no value => no value
xdebug.dump.REQUEST => no value => no value
xdebug.dump.SERVER => no value => no value
xdebug.dump.SESSION => no value => no value
xdebug.dump_globals => On => On
xdebug.dump_once => On => On
xdebug.dump_undefined => Off => Off
xdebug.extended_info => On => On
xdebug.file_link_format => no value => no value
xdebug.idekey => no value => no value
xdebug.max_nesting_level => 100 => 100
xdebug.overload_var_dump => On => On
xdebug.profiler_aggregate => Off => Off
xdebug.profiler_append => Off => Off
xdebug.profiler_enable => Off => Off
xdebug.profiler_enable_trigger => Off => Off
xdebug.profiler_output_dir => /tmp => /tmp
xdebug.profiler_output_name => cachegrind.out.%p => cachegrind.out.%p
xdebug.remote_autostart => Off => Off
xdebug.remote_connect_back => Off => Off
xdebug.remote_cookie_expire_time => 3600 => 3600
xdebug.remote_enable => Off => Off
xdebug.remote_handler => dbgp => dbgp
xdebug.remote_host => localhost => localhost
xdebug.remote_log => no value => no value
xdebug.remote_mode => req => req
xdebug.remote_port => 9000 => 9000
xdebug.scream => Off => Off
xdebug.show_exception_trace => Off => Off
xdebug.show_local_vars => Off => Off
xdebug.show_mem_delta => Off => Off
xdebug.trace_enable_trigger => Off => Off
xdebug.trace_format => 0 => 0
xdebug.trace_options => 0 => 0
xdebug.trace_output_dir => /tmp => /tmp
xdebug.trace_output_name => trace.%c => trace.%c
xdebug.var_display_max_children => 128 => 128
xdebug.var_display_max_data => 512 => 512
xdebug.var_display_max_depth => 3 => 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:14:54.243

命令行上的“php -i”使用与 apache (/etc/php5/apache2/php.ini) 不同的 php.ini 文件 (/etc/php5/cli/php.ini)。确保通过浏览器检查 phpinfo() 以查看是否已设置 xdebug.remote_enable。phpinfo() 输出还告诉您哪些 INI 文件已被加载，因此请检查那里。

然而，一般来说，对于扩展，您希望将扩展的配置文件放在 /etc/php5/mods-available 中 - 在这种情况下，您只需创建 /etc/php5/mods-available/xdebug.ini ：

```
xdebug.remote_enable=1 
```

在里面。所有其他设置都应保持不变（因为它们无论如何都是默认值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-11T05:07:30.253

另一个提示，前段时间有帮助。我在虚拟机上安装了 ubuntu，端口 9000 很忙，并且在 PhpStorm 中没有遇到断点。所以我写这个：

```
xdebug.remote_port=9001 
```

同样的端口也应该在 PhpStorm 调试配置中。希望它可以帮助某人节省时间。****

# javascript - 创建变量名函数

> ID：13478787
> 
> 赞同：2
> 
> 时间：2012-11-20T17:32:52.783
> 
> 标签：javascript, function, variables

> **可能重复：**
> [Javascript 动态变量名](https://stackoverflow.com/questions/5117127/javascript-dynamic-variable-name)

我正在尝试在 javascript 中创建一个名称取决于变量的函数。

例如：

```
var myFuncName = 'somethingWicked';
function myFuncName(){console.log('wicked');};
somethingWicked(); // consoles 'wicked' 
```

我似乎想不出办法……我试图评估它，但是当我稍后尝试使用该函数时，它“不存在”……或者更确切地说，我得到了一个 ReferenceError该函数未定义...

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:34:59.523

您可以将您的函数分配给一个对象并像这样引用它们：

```
var funcs = {};
var myFuncName = 'somethingWicked';
funcs[myFuncName] = function(){console.log('wicked');};
funcs.somethingWicked(); // consoles 'wicked' 
```

或者，您可以将它们保留为全局变量，但您仍然必须通过`window`对象分配它们：

```
var myFuncName = 'somethingWicked';
window[myFuncName] = function(){console.log('wicked');};
somethingWicked(); // consoles 'wicked' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:34:48.223

```
var myFuncName = 'somethingWicked';
window[myFuncName] = function(){console.log('wicked');};
somethingWicked(); // consoles 'wicked' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:35:33.443

任何时候您必须创建依赖于变量的动态名称的东西时，您应该使用对象的属性或数组成员。

```
var myRelatedFunctions = {};
var myFuncName = 'somethingWicked';
myRelatedFunctions[myFuncName] = function (){console.log('wicked');};
myRelatedFunctions['somethingWicked']() 
```

# gwt - GWT 从内部以编程方式设置 iframe 尺寸

> ID：13478790
> 
> 赞同：0
> 
> 时间：2012-11-20T17:33:00.480
> 
> 标签：gwt, iframe, jsni

我有一个包含 GWT 代码的 iframe。我想从该代码中动态更改 iframe 尺寸。

我正在尝试以下操作：

```
Element iframe = we start from some element inside the iframe;
while (!iframe.getTagName().toLowerCase().equals("iframe")) { // get embedding iframe
    iframe = iframe.getParentElement();
}

iframe.setAttribute("style", "height:100px;width:100px;"); 
```

它不起作用。在中间的某个地方，我在到达 iframe 之前到达了一个 null 父级。

如何从在 iframe 本身中运行的 GWT 更改 iframe 尺寸？我不介意它是否是基于 JSNI 的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:46:59.870

你不能这样做。如果 iFrame 内的文档在您的域中，而包含 iFrame 的文档在不同的域中，则安全机制将阻止您从一个到另一个进行任何更改。

# file - 如何将文档文件从一个站点复制到另一个站点

> ID：13478791
> 
> 赞同：0
> 
> 时间：2012-11-20T17:33:00.677
> 
> 标签：file, sharepoint, copy, move

我正在寻找一个示例，其中基于对象模型中的标题名称，我想将单个文件从一个文档库复制到另一个文档库。我有超过 2000 个文件，不想循环完成收集是否有任何简单的方法可以完成此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T08:20:59.237

没有像 GetDocumentByName 这样的方法可以使用。但是你想什么时候做这个？如果您希望它由用户触发，您可以在文档库上使用自定义操作，当它被触发时，您知道是什么项目触发了它。

如果你想通过一项工作来完成它，我想你可以在库上创建一个隐藏的 SPView 来过滤标题。我不确定这是一个很好的解决方案，但至少可以做到。

# java - 访问 Java 项目中的文件

> ID：13478798
> 
> 赞同：0
> 
> 时间：2012-11-20T17:33:26.757
> 
> 标签：java, eclipse, file-io

我有一个使用第三方应用程序的 Java 项目。我将许可证文件（.lic 格式）存储在资源文件夹中。运行 Ant 脚本后，它将将此文件复制到 /lib/jar 目录中，因为它将项目汇总到 Jar 文件中以在服务器上使用。这是我在实时运行系统时需要访问文件的地方。这是文件夹结构的外观

```
MyProject
  src
    package
      AccessingClass.java
  resources
    File.lic
  lib
    jar
      File.lic (upon copy from Ant) 
```

我不确定执行此操作的最佳方法，因此除了我一直在尝试的方法之外的任何建议都可能会有所帮助。第 3 方项目在 License.setLicense() 之类的类中有一个方法，该方法可以将字符串带到位置或文件的 InputStream。

我一直在为它提供一个 InputStream，但在调用 getClass().getResourceAsStream() 时总是得到一个空值。这是我尝试过的一切：

*   getClass().getResourceAsStream("../../../lib/jar/File.lic"); getClass().getResourceAsStream("/File.lic");

作为备份，我也尝试了（对于本地构建，我想我会尝试资源文件夹）：

*   getClass().getResourceAsStream("../../../resources/File.lic"); getClass().getResourceAsStream("/File.lic");

是否有更好的方法来执行此操作？或者有人能告诉我为什么我正在尝试失败？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:37:04.410

**首先，您需要确保`JAR`在您的类路径中添加了**。

下面应该工作。

```
 InputStream inputStream = 
    getClass().getClassLoader().getResourceAsStream("/resources/File.lic"); 
```

假设`File.lic`放置在 jar 的根文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:01:40.663

您是独立运行此代码还是在 IDE 环境中运行此代码看起来像类路径问题。如果您在命令提示符下运行，则必须将类路径设置为 lib 目录，如果在 ide 中确保资源目录位于类路径中。

# javascript - 在外部文件中使用 JQuery 获取文本文件内容

> ID：13478800
> 
> 赞同：1
> 
> 时间：2012-11-20T17:33:37.183
> 
> 标签：javascript, jquery

我有一个外部 javascript 文件，我想用它来收集许多文本文件的内容。JQuery .get() 似乎是最明显的选择。如果 JQuery 在页面中，我可以完成这项工作，但当 JQuery 在外部文件中时则不行。我错过了一些非常简单的东西......我目前正在将普通的 javascript 与 JQuery 混合在同一个文件中，我担心它的格式很差。

我试图访问的所有文件都在同一个文件结构中。目前，我的外部 .js 中有以下内容：

```
function addPanels() {
    // eventually loop over list of local HTML files
    // and do some stuff with the results...
    fileContents = readHTMLFile();
}

jQuery(function($){
    readHTMLFile = $.get('../html/test.html', function(data) {
        alert('Loaded something');
        return(data);
    });
}); 
```

我的 HTML 页面包含以下内容：

```
<script type="text/javascript">
    $(document).ready(function(){
        addPanels();
    });
</script> 
```

很确定这是一个 RTFM 时刻，所以朝着正确的手册/教程方向发展会很棒！

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T18:02:20.987

在您的脚本中，函数“addPanels”不知道“readHTMLFile”，您应该将它们放在同一级别。

这个脚本应该可以工作

```
<script type="text/javascript">
    (function($){
        var readHTMLFile = function(url){
            var toReturn;
            $.ajax({
                url: url,
                async: false
            }).done(function(data){
                toReturn = data;
            });
            return toReturn;
        };
        $.addPanels = function(url){
            fileContents = readHTMLFile(url);  
        };
     })(jQuery);
</script> 
```

在您的页面中，您可以这样称呼它：

```
<script type="text/javascript">
    $(document).ready(function(){
        $.addPanels('../test/test.html');
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T18:12:10.890

是一个异步函数，当`jQuery.get`服务器返回请求的文档时执行一个回调。因此，您不能从该方法返回任何数据。

```
function addPanels() {
    // will not work
    fileContents = readHTMLFile();
}

...

readHTMLFile = $.get('../html/test.html', function(data) {
    // will not work
    return(data);
}); 
```

但是，这将起作用：

```
var addPanelCallback = function(html) {
    // append html (or something like that)
    alert(html);
};

var addPanel = function(url) {
   $.get(url, addPanelCallback);
};

addPanel('../html/test1.html');
addPanel('../html/test2.html'); 
```

示例：http: [//jsfiddle.net/FgyHp/](http://jsfiddle.net/FgyHp/)

# ruby-on-rails - RAILS：将 simple_form 与父/子帐户一起使用

> ID：13478805
> 
> 赞同：0
> 
> 时间：2012-11-20T17:33:53.467
> 
> 标签：ruby-on-rails, forms, associations, parent

我在具有以下关联的项目中使用 simple_form

```
Company  
  has_many :users 
  has_many :projects
User  
  belongs_to :company
  has_many :tasks
Project 
  belongs_to :company
  has_many :tasks
Task  
  belongs_to :project
  belongs_to :user 
```

我正在使用 simple_form 关联输入，如下所示：

```
<%= f.association :user, :prompt => "Assign To...", :label_method => :first_name, :value_method => :id %> 
```

但我需要它仅列出具有正确 company_id 的用户（与项目所属的用户相同）。有没有办法做到这一点？我做了一些谷歌搜索，到目前为止还没有提出任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:14:11.490

您应该提取属于该公司的所有用户，并将其传递到分配列表中，对吗？在您的方法中（助手或模型）

```
@company = Company.find(params[:id])
@labors = @company.users 
```

它应该返回一个实例对象数组，您可以在列表中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:17:44.980

我找到了一种处理方式：

```
<%= f.association :user, :collection => User.where(:company_id => current_user.company_id), :prompt => "Assign To...", :label_method => :first_name, :value_method => :id %> 
```

只显示 company_id 与当前用户匹配的用户（与项目匹配）

# asp.net - GridView RowUpdating 无法获取新值

> ID：13478806
> 
> 赞同：8
> 
> 时间：2012-11-20T17:33:56.587
> 
> 标签：asp.net, gridview

我只是在测试我是否会在没有运气的情况下从文本框中获取更改的值。我只是无法获得新的价值。我究竟做错了什么？我已经尝试了很多东西。这是最新的。如何将更新后的新值添加到我的标签中？当我单击网格上的编辑并更改文本框的值并单击更新时，标签将仅显示文本框的原始值。

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView1.EditIndex = e.NewEditIndex;

    bindgrid();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = GridView1.Rows[e.RowIndex];
    Label1.Text = ((TextBox)(GridView1.Rows[GridView1.EditIndex]).Cells[2].Controls[0]).Text;

    GridView1.EditIndex = -1;
    bindgrid();
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T17:55:58.157

我认为当你推送更新链接`Gridview`在获取新值之前再次绑定。你必须使用`if(!IsPostBack)`之前`GridView.DataBind()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-20T13:07:43.513

只需将 Enableviewstate 属性设置为 gridview 的 false 即可获得新值。

```
<asp:GridView runat="server" EnableViewState="False" ID="GridView6"  AutoGenerateColumns="false" Width="100%"
                EmptyDataText="No Record Found" AllowPaging="false" PageSize="10" OnPageIndexChanging="ChangePage"
                OnRowCommand="RowCommand" OnRowDataBound="GridView6_RowDataBound" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:13:58.093

`GridView1.Rows[GridView1.EditIndex]`当您已经拥有当前行时，为什么还要再次调用？尝试使用您已经检索到的行

```
GridViewRow row = GridView1.Rows[e.RowIndex];
Label1.Text = ((TextBox) row.Cells[2].Controls[0]).Text; 
```

[阅读更多关于这个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdating.aspx)

# compare - 比较电子表格时搜索不匹配的 nthemes

> ID：13478812
> 
> 赞同：2
> 
> 时间：2012-11-20T17:34:15.847
> 
> 标签：compare, excel-formula

在一个电子表格中，我有 3 列，其中包含一个人的名字和姓氏。在第二个电子表格中，我有 a 列 = 名字和 b 列 = 姓氏。

我想知道在电子表格二中找不到电子表格一中的哪些名称。我还需要验证数据以确保公式在查找正确查找时是准确的。

我是否必须在电子表格 2 中合并我的列以使名字和姓氏在同一列中才能正常工作？

对于这两种情况，您会使用哪个公式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:10:57.320

用这个：

```
=ISNA(MATCH($A1&" "&$B1,Sheet2!$A:$A,FALSE))) 
```

哪里（按顺序）：

*   `A1`是中的名字列`Sheet1`
*   `B1`是中的姓氏列`Sheet1`
*   `Sheet2`是将数据单独存储为名称的工作表
*   `$A:$A`是同时具有两个名称的行
*   `FALSE`是因为它是完全匹配的

`FALSE`如果元素不存在，这将返回，`TRUE`如果存在

您还可以使用：

```
=VLOOKUP($A1&" "&$B1,Sheet2!$A:$D,3,FALSE) 
```

如果要检索匹配的数据。

最后，如果您需要以另一种方式进行查找，请查看[此线程](https://stackoverflow.com/questions/1031305/simulate-string-split-function-in-excel-formula)以获取有关如何将字符串分成两部分的一些想法。

# google-chrome - 如何隐藏 Chrome“在调试器中暂停”覆盖？

> ID：13478817
> 
> 赞同：31
> 
> 时间：2012-11-20T17:34:29.713
> 
> 标签：google-chrome, user-interface, debugging, google-chrome-devtools

当在断点处暂停时，Chrome 的一些半近期更新现在会在我的网页上放置一个叠加层。我现在特别想查看我的页面标记的状态，而覆盖层正是隐藏了我想看到的内容！

有没有办法关闭这个标记？

或者有没有办法将 Chrome 恢复到没有这个错误功能的版本？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-03-10T21:04:00.437

现在 Inspector 的设置中有一个选项，只需取消选中`Disable paused state overlay`：转到设置 (F1)，首选项选项卡（第一个），它是外观下的最后一个选项（左上角）。

[`setTimeout(function(){debugger;}, 5000);`](https://stackoverflow.com/a/23096743/504270)检查仅在悬停时可见的元素的技巧非常有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-08T20:12:00.860

我遇到了同样的问题，我发现如果我切换到“元素”选项卡并启用元素检查器（右下角带有放大镜图标的按钮），那么覆盖就会被隐藏。如您所料，当您再次禁用元素检查器时，“在调试器中暂停”消息又回来了，所以我通常在单步调试调试器时让检查器保持启用状态。

它可能不直观，但至少它有效。如果还有其他选择，我很想听听！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-11T14:39:53.640

如果您在 Chrome 90.0+ 上看到“Paused in Debugger”弹出窗口，请确保在 Preferences -> Appearance in Chrome Dev Tool 下**启用此设置以禁用弹出窗口。**

[![在此处输入图像描述](../Images/8de2f8c29b67c419e2dd08eed3110196.png)](https://i.stack.imgur.com/ndbiV.png)

# c - C中函数的默认参数——

> ID：13478819
> 
> 赞同：1
> 
> 时间：2012-11-20T17:34:32.320
> 
> 标签：c, gcc, compiler-construction

我是初学者，如果我违反任何规则，请道歉。这是我的问题。

我在 Codeblocks 上使用 GCC 编译器，我注意到一段特殊的代码片段有一些特殊之处。我希望有人可以对此有所了解。

```
int main()
{
Tree *t;
//some operations on the tree
traverse();// No parameter is passed here.
...
}

void traverse(Tree *t)
{
..
} 
```

在以下代码中，函数 traverse() 正确执行。我的问题是为什么？我不确定这一点，但是如果未声明函数，则其默认类型将变为 int。现在，编译器不仅在编译时抑制了错误，而且还正确地为函数 traverse() 提供了参数“t”。

这是因为智能编译器设计吗？

所以总的来说：我的问题是 - 如果编译器遇到尚未声明的方法，它会默认采取什么行为？更重要的是，它如何“知道”我想传递哪个参数？

如你所知，我可以拥有三个“Tree *”实例：t1、t2 和 t3。那么编译器会通过哪一个呢？

我试着在谷歌上四处寻找，但还没有找到明确的来源。

感谢您的时间。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:36:10.990

该函数正在堆栈上寻找它的参数。该函数不知道它所期望的参数实际上并不存在。

碰巧的是，堆栈中查找参数的地方是函数中的局部`t`变量`main()`。如果您在 内部有更多局部变量`main()`，那么其中一个变量会被误解为函数的参数，事情就会大错特错。

所以，它的工作纯粹是偶然的。

# google-app-engine - 数据存储区管理员冻结中的 Google 应用程序引擎作业

> ID：13478822
> 
> 赞同：1
> 
> 时间：2012-11-20T17:34:45.350
> 
> 标签：google-app-engine, google-cloud-datastore

我试图从 GAE 数据存储管理页面中一次删除一种实体。问题是，我解雇了两个工作来删除一种（相同的）。一个作业成功完成后，另一个作业会冻结，从而阻止其他作业运行。

职位描述是：

```
Job #158264924762856ED17CF
Overview
Running
Elapsed time: 00:00:00
Start time: Tue Nov 20 2012 09:58:27 GMT+0800
entity_kind: "CacheObj"
Counters 
```

我怎样才能清除这些工作？从任务队列中删除它们并没有多大帮助，它们仍然在数据存储管理页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:02:41.920

我遇到了同样的问题，但冻结的工作并没有阻止新的工作被执行。然而，获得一份冻结的工作具有误导性。我的解决方法：

*   转到数据存储查看器
*   选择 _AE_DatastoreAdmin_Operation 作为种类
*   找到冻结的工作
*   删除它
*   您可能会收到一条错误消息，指出应用程序失败
*   返回到 Datastore Admin，并检查该作业是否不再存在

# php - 使用 MySQL 数据库中的 AJAX 和 PHP 显示实时用户状态

> ID：13478825
> 
> 赞同：1
> 
> 时间：2012-11-20T17:34:52.983
> 
> 标签：php, mysql, ajax, xmlhttprequest

我有一个简单的 mysql 查询，它显示用户的最后状态。我现在想更进一步，创建一个页面来显示用户最近的状态而无需刷新。mysql 数据库随用户状态动态更新。

因此，所需要的只是渲染 mysql 的页面以最新的用户状态刷新，而无需我点击刷新按钮。

任何人都可以就我如何去做这件事提供指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:25:53.803

您需要推入页面，而不是池。从数据库进行轮询有点愚蠢。这是它的工作原理。

1.  假设您的页面上有 n 个用户。
2.  每次更改该状态时（将其插入数据库）

    2.1 发生这种情况时，您需要将信号推送到您的网页（使用[Strophe](http://strophe.im/)库）。

    2.2 为了将内容推送到页面，您需要运行 Strophe 实例。

    2.3 如果你的网站是 PHP，这里有一个与 Strophe 实例通信的[好](http://code.google.com/p/xmpphp/)类。

    我可以为你做这件事，但如果你自己做，你会更开心。实时的东西非常有趣。

# javascript - Firefox 重置 Javascript 的变量值

> ID：13478829
> 
> 赞同：0
> 
> 时间：2012-11-20T17:35:00.290
> 
> 标签：javascript, firefox, load, addeventlistener

我正在使用 Firefox 16.0.2。
我正在使用 onload eventlistener 来调用增加变量值的脚本。
在增加变量之前，我需要获取变量的值。Safari 和 Chrome (Webkit) 给出了正确的结果，但 Firefox 总是提示“0”...

**这是我的脚本：**

```
var obj = {
    build: function() {
        var progressCount = 0; 
        var otherFunction = function(number) {
                alert(number);
        } 
        var finalFunction = function() {
                alert("done");
        } 
        var progress = function() {
                alert(progressCount);   //    !  very important line !
                progressCount++;
                otherFunction(progressCount);
                if (progressCount == ARRAY.length) {
                finalFunction();
                }
        }
        ARRAY=document.getElementsByClassName("picture")
        for (var i = 0; i < ARRAY.length; i++)
        ARRAY[i].addEventListener("load", progress);
    }
}
obj.build(); 
```

我还能尝试什么？非常感谢！

# javascript - 在插件内的回调函数中使用 ajax 输出 (jQuery)

> ID：13478833
> 
> 赞同：0
> 
> 时间：2012-11-20T17:35:08.777
> 
> 标签：javascript, jquery, ajax, callback

我想在我的插件的回调函数中访问 AJAX 调用的输出。该插件用于联系表格，因此它使用 AJAX 发送数据，但我需要在日志/警报中查看输出。我已经有一个名为“after”的回调函数。

// 我现在使用的部分

```
$.ajax({
   success: function(data){
      if(typeof options.after == 'function'){
         options.after.call(this);
      } 
   }
}); 
```

// 选项以及我想如何使用它

```
$.fn.dform.options = {
   option1: 'lorem',
   option2: 'lorem',
   option3: 'lorem',
   after: function(e){
      console.log(e)
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:38:47.647

您可以在调用时简单地将它 ( `data`) 作为参数发送`after()`：

```
if(typeof options.after == 'function'){
     options.after.call(this, data);
} 
```

**编辑** [这里是 MDN 的`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call).

# codeigniter - IF Session 数据存在，输出在视图中

> ID：13478836
> 
> 赞同：3
> 
> 时间：2012-11-20T17:35:22.287
> 
> 标签：codeigniter, codeigniter-2

所以我试图将会话的变量值输出到视图中（仅当它存在时）。但我似乎无法让它工作。没有错误。没有什么。我错过了什么？以为我现在已经收拾好这个了-猜不...

在控制器...仅供参考， $data 被分配给视图（即`$this -> load -> view('view', $data);`

```
$data['campaign_name'] = $this -> session -> userdata('campaign_name'); 
```

这是我试图输出的视图中的 php 片段。所以简而言之，如果会话存在，则输出它。如果没有，什么也不做。

```
<input type="text" name="campaign_name" class="wizardInput nameField" value="<? if (isset($campaign_name)) ;?> "> 
```

任何人？

**编辑**好的，我应该提到我正在尝试将会话值输出为 FORM 值。修改了上面的视图代码。表单就像值在那里一样提交 - 甚至发送值。但是，它在文本输入中不可见...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T17:40:10.053

在您看来，您可以轻松做到这一点：

```
if($this->session->userdata('campaign_name')){
 // do somenthing cause it exist
} 
```

然后，如果您想将会话数据作为输入的值，请执行以下操作：

```
<input type="text" name="campaign_name" class="wizardInput nameField" value="<?php echo $this->session->userdata('campaign_name') ?>"> 
```

您**不需要控制会话用户数据是否存在**，因为如果它不存在，它不会打印任何内容，导致`userdata()`方法返回`false`！

然后你不需要通过 传递会话数据`$data[] array`，因为可以从任何地方检索会话数据（模型/控制器/视图/钩子/库/助手等）

# php - 如何在同一事务中保存和删除

> ID：13478840
> 
> 赞同：3
> 
> 时间：2012-11-20T17:35:26.810
> 
> 标签：php, magento, transactions

我需要在单个事务中保存一些 cms 页面并删除其他页面。

那么，我如何做到这一点：

```
$page1->save();
$page2->delete(); 
```

单笔交易？作为参考，$page1 和 $page2 都来自 Mage::getModel('cms/page')。[另外，我在这里](https://stackoverflow.com/questions/4878634/magento-catching-exceptions-and-rolling-back-database-transactions)找到了一个很好的答案，它告诉我如何在事务中进行两次保存，而不是如何同时进行保存和删除。怎么做到呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T19:12:10.250

如果您*必须*在单个事务中执行此操作，只需调用`isDeleted(true)`您希望删除的那些项目：

```
//Build out previous items, then for each which should be deleted...
$page2->isDeleted(true);

$transaction = Mage::getModel('core/resource_transaction');
$transaction->addObject($page1)
$transaction->addObject($page2)
//$transaction->addObject(...) etc...
$transaction->save(); 
```

以为我应该添加一个解释（来自[`Mage_Core_Model_Abstract::save()`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Model/Abstract.php#L307)）：

```
/**
 * Save object data
 *
 * @return Mage_Core_Model_Abstract
 */
public function save()
{
    /**
     * Direct deleted items to delete method
     */
    if ($this->isDeleted()) {
        return $this->delete();
    }
    // ...
} 
```

# android - 在多个活动中管理单个仪表板菜单

> ID：13478843
> 
> 赞同：0
> 
> 时间：2012-11-20T17:35:38.343
> 
> 标签：android, android-layout, dashboard, android-menu

在我的应用程序中，我有启动器活动显示不同内容的摘要。每个活动中都设置了一个**SlidingDrawer ，其中包含一个包含 9 个菜单作为内容的仪表板。**当用户单击抽屉的句柄时，内容会向上滚动以显示该仪表板。这些菜单从仪表板启动 9 个活动，并且没有任何活动与仪表板具有相同的 SlidingDrawer。

现在让我感到不安的是，我不得不在控制仪表板行为的每个活动中放置相同的代码块。仪表板本身是从单一布局膨胀而来的。所以设计不是问题。但是我必须将事件处理程序附加到每个按钮并从那里开始新的活动。问题是每当我进行更改时，我都需要在所有活动中复制这些更改。

如何避免此类冗余代码并使用单个类或让我定义启动这 9 个活动的东西？

抱歉标题和描述。我真的很难用语言来表达。如果您发现标题或描述不合适，请告诉我或在适当的地方进行编辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:18:24.310

[对于Android 片段](http://developer.android.com/guide/components/fragments.html)来说，这可能是一个完美的情况

每个活动有两个片段，一个用于滑动抽屉，一个用于其他所有内容。

Android 片段一开始看起来很复杂，但相信我，学习它们会让你的生活更轻松。

# windows-8 - 使用 Windows 8 应用商店应用共享合同

> ID：13478846
> 
> 赞同：0
> 
> 时间：2012-11-20T17:35:55.690
> 
> 标签：windows-8, windows-runtime, windows-store-apps

据我了解 Windows 8 的共享合同，当我在共享合同中提供一些信息时，我应该会看到任何能够使用该信息的已安装应用程序。我有以下代码：

```
request.Data.SetText(myString); 
```

但是，当我选择共享时，我只看到邮件应用程序。我追求的是一种从我的应用程序启动工作处理器（例如 MS Word）的方法。我还需要做些什么来将我共享的数据标记为与 Word“兼容”吗？还是因为 Word 是桌面应用程序而无法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:57:43.997

您不能使用共享合同将数据从 Windows 应用商店应用程序移动到桌面应用程序。如果您查看共享和交换数据 - [http://msdn.microsoft.com/en-us/library/windows/apps/hh464923.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464923.aspx) - 它指出，“剪贴板与共享相比的一个优势是它是**唯一的方式将数据**从 Windows 应用商店应用程序移动到桌面，反之亦然。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T05:51:38.127

确实，您不能将数据共享到桌面应用程序，而且目标应用程序需要将自己注册为共享目标才能共享工作。

尽管您提到要启动 Word。如果您有需要打开的 Word 文件，则可以使用[Launcher类：](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.launcher.aspx)

```
var file = await ApplicationData.Current.LocalFolder.GetFileAsync("Test.doc");
await Launcher.LaunchFileAsync(file); 
```

# java - 理解这种递归方法

> ID：13478847
> 
> 赞同：-9
> 
> 时间：2012-11-20T17:35:56.177
> 
> 标签：java, recursion

我们在我的 Java 类介绍中学习递归，我很难理解给出的示例中的方法是如何工作的。调用该方法时会发生什么？

这是代码：

```
public class Hanoi

    private int n;
    private int pegA;
    private int pegB;

    public Hanoi(int in_n, int in_pegA, int in_pegB)
    {
        n = in_n;
        pegA = in_pegA;
        pegB = in_pegB;
    }

    public void makemoves()
    {
        if (n==1)
            System.out.format("%d ==> %d%n", pegA, pegB)
        else
        { 
             int otherPeg = 6 - pegA - pegB; // 1 + 2 + 3 =6
             Hanoi firstmove = new Hanoi (n-1, pegA, otherPeg);
             firstmove.makemoves();
             System.out.format("%d ==> %d%n", pegA, pegB);
             Hanoi secondmove = new Hanoi (n-1, otherPeg, pegB);
             secondmove.makemoves();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:10:29.563

递归只是一种调用自身并测试中断条件的方法。这是一个非常简单的例子来说明基本概念：

```
static void recurse( int val ) {
    if ( val == 0 ) {
        return; // returns from last invocation
    }
    System.out.println("val=" + val );
    recurse( val - 1 );
    return; // here the method returns to previous invocation (or initial call from main)
}

public static void main( String[] args) {
    recurse( 3 );
} 
```

第一次调用 recurse(3) 调用该方法，在测试 3 != 0 之后，该方法使用 val - 1 调用自身，直到值变为 0。

调用层次结构如下：

```
recurse( 3 )
  recurse( 2 )
    recurse( 1 )
      recurse( 0 ) // break condition
      return        // val == 0
    return          // val == 1
  return            // val == 2
return              // val == 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:48:36.843

这项工作的原理很简单，就是按顺序遍历二叉树。检查[维基](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Towers_of_Hanoi)。

# objective-c - UITableViewCell 内存管理

> ID：13478851
> 
> 赞同：1
> 
> 时间：2012-11-20T17:36:09.680
> 
> 标签：objective-c, ios, xcode, memory-management

非常基本的 cellForRowAtIndexPath 实现。

我想知道为什么分析器告诉我我在这里泄漏内存。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    MyObject *object = [[self.datasource objectForKey:key] objectAtIndex:indexPath.row];

    cell.textLabel.text = object.title;

    return cell;
} 
```

分析仪告诉我“细胞”可能会泄漏。这只是分析仪的一个弱点还是我应该如何处理？

注意：像这样添加对 autorelease 的调用：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier] autorelease]; 
```

导致崩溃。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:39:55.693

如果你不使用 ARC，那么你应该自动释放单元格：

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

请注意，这与从 检索它后自动释放它**不等效**`dequeueReusableCellWithIdentifier:`，因为该方法会为特定单元格多次调用，并且过度自动释放会导致崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:41:51.130

您应该将自动释放放在分配新单元格的行上：

```
 cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

# android - 如何在不更改代码的情况下强制 android 应用使用安全 SSL/TLS 连接而不是 http？

> ID：13478855
> 
> 赞同：2
> 
> 时间：2012-11-20T17:36:15.627
> 
> 标签：android, ssl, https

我面临的挑战是将使用 HTTP 连接的 android 应用程序转换为 HTTPS 连接而不重写代码？

在没有 root 访问权限的设备上实现上述挑战有哪些可用选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:38:40.027

任何依赖服务器端重定向（从 HTTP 到 HTTPS）的解决方案都容易受到 MITM 攻击（请参阅[此答案](https://webmasters.stackexchange.com/a/28443/11628)）。

如果此应用程序中的地址是可配置的，只需将它们更改为使用您的 HTTPS URL。

否则，您当然可以使用服务器端重定向来稍微降低风险，但这并不能防止降级 MITM 攻击（这种情况可能会发生，在使用移动设备时可能更是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:39:08.457

如果它始终连接到您控制的已知端点，您可以在目标服务器端实现一些东西来重定向，如果它是一个 Apache 服务器，可能类似于 mod_rewrite。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T19:46:26.647

没有什么可重写的。您基本上将`http://`链接更改为`https://`，就是这样。当端点的证书是自签名的或由一些不太流行的 CA 签名时可能会出现一些问题，但是您可以轻松地将您的 HttpClient 替换为[这个](http://code.google.com/p/httpclientandroidlib/)，将颁发者的 CA 添加到您的应用程序中，基本上只需一屏代码即可完成。

如果应用程序不是您的并且您没有代码，那么您可以尝试通过隧道通过您的接入点访问网络，这将通过 ssh 隧道或 VPN 或其他任何方式透明地重新路由数据包。

如果应用程序不是您的，但您可以拥有代码 - 恕我直言，这是最好的方法。

# wget - wget 从标准输入读取输入

> ID：13478857
> 
> 赞同：4
> 
> 时间：2012-11-20T17:36:31.847
> 
> 标签：wget, stdin

从 wget 手册页

[§ 2.4 记录和输入文件选项](http://gnu.org/software/wget/manual/wget.html#Logging-and-Input-File-Options)

```
'-i 文件'
'--输入文件=文件'
     从本地或外部文件中读取 url。如果 '-' 被指定为文件，则 urls
     从标准输入读取。（使用 './-' 从字面上读取文件
     命名为'-'。）

     如果使用此函数，则命令行中不需要存在 url。如果
     命令行和输入文件中都有 url，那些在
     命令行将是第一个被检索的。如果 '--force-html' 是
     未指定，则文件应包含一系列 URL，每行一个。

```

我试着做

```
wget -i - www.google.com 
```

它下载了一个文件`index.html`，但随后挂起。即使我按了几次“Enter”，它仍然挂起。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:41:51.610

因为您还没有关闭您的“文件”，所以`wget`继续等待您在标准输入中输入更多内容。要终止，请按 ctrl + d [EOF 终止符]

# linux - alsa - 内存泄漏？

> ID：13478861
> 
> 赞同：4
> 
> 时间：2012-11-20T17:36:44.483
> 
> 标签：linux, memory-leaks, valgrind, alsa

我一直在寻找内存泄漏（由 'valgrind --leak-check=yes' 报告），它似乎来自 ALSA。这段代码在自由世界里已经有一段时间了，所以我猜这是我做错了。

```
#include <stdio.h>
#include <stdlib.h>
#include <alsa/asoundlib.h>

int main (int argc, char *argv[])
{
    snd_ctl_t *handle;

    int err = snd_ctl_open( &handle, "hw:1", 0 );
    printf( "snd_ctl_open: %d\n", err );

    err = snd_ctl_close(handle);
    printf( "snd_ctl_close: %d\n", err );
} 
```

输出如下所示：

```
[root@aeolus alsa]# valgrind --leak-check=yes ./test2
==16296== Memcheck, a memory error detector
==16296== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==16296== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
==16296== Command: ./test2
==16296==
snd_ctl_open: 0
snd_ctl_close: 0
==16296==
==16296== HEAP SUMMARY:
==16296==     in use at exit: 22,912 bytes in 1,222 blocks
==16296==   total heap usage: 1,507 allocs, 285 frees, 26,236 bytes allocated
==16296==
==16296== 4 bytes in 2 blocks are possibly lost in loss record 1 of 62
==16296==    at 0x4007100: malloc (vg_replace_malloc.c:270)
==16296==    by 0x340F7F: strdup (in /lib/libc-2.5.so)
==16296==    by 0x624C6B5: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624CA5B: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624CD81: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624F311: snd_config_update_r (in /lib/libasound.so.2.0.0)
==16296==    by 0x624FAD7: snd_config_update (in /lib/libasound.so.2.0.0)
==16296==    by 0x625DA22: snd_ctl_open (in /lib/libasound.so.2.0.0)
==16296==    by 0x804852F: main (test2.cpp:9) 
```

并继续一些页面

```
==16296== 2,052 bytes in 57 blocks are possibly lost in loss record 62 of 62
==16296==    at 0x4005EB4: calloc (vg_replace_malloc.c:593)
==16296==    by 0x624A268: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624A38F: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624CA33: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624CCC9: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624CD81: ??? (in /lib/libasound.so.2.0.0)
==16296==    by 0x624F311: snd_config_update_r (in /lib/libasound.so.2.0.0)
==16296==    by 0x624FAD7: snd_config_update (in /lib/libasound.so.2.0.0)
==16296==    by 0x625DA22: snd_ctl_open (in /lib/libasound.so.2.0.0)
==16296==    by 0x804852F: main (test2.cpp:9)
==16296==
==16296== LEAK SUMMARY:
==16296==    definitely lost: 0 bytes in 0 blocks
==16296==    indirectly lost: 0 bytes in 0 blocks
==16296==      possibly lost: 22,748 bytes in 1,216 blocks
==16296==    still reachable: 164 bytes in 6 blocks
==16296==         suppressed: 0 bytes in 0 blocks
==16296== Reachable blocks (those to which a pointer was found) are not shown.
==16296== To see them, rerun with: --leak-check=full --show-reachable=yes
==16296==
==16296== For counts of detected and suppressed errors, rerun with: -v
==16296== ERROR SUMMARY: 56 errors from 56 contexts (suppressed: 19 from 8) 
```

这是因为我在一个项目中使用 ALSA 并开始看到这个巨大的泄漏......或者至少是所说泄漏的报告。

所以问题是：是我、ALSA 还是 valgrind 有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:31:20.823

[http://git.alsa-project.org/?p=alsa-lib.git;a=blob;f=MEMORY-LEAK;hb=HEAD](http://git.alsa-project.org/?p=alsa-lib.git;a=blob;f=MEMORY-LEAK;hb=HEAD)说：

> ```
>  Memory leaks - really?
>                           ---------------------- 
> ```
> 
> 请注意，一些开发人员认为 ALSA 库存在一些内存泄漏。当然，这可能是事实，但在联系我们之前，请确保这些泄漏不是强迫的。
> 
> 报告的最大泄漏是全局配置被缓存以备下次使用。如果您不想要此功能，只需在所有 snd_*_open*() 调用后调用 snd_config_update_free_global()。此函数将释放缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-17T01:16:25.290

报告的最大泄漏是全局配置被缓存以备下次使用。

如果您不想要此功能，只需`snd_config_update_free_global()`在所有呼叫后呼叫即可`snd_*_open*()`。

此函数将释放缓存。” <---- Valgrind 仍然检测到泄漏。

**如果您在之后**致电，则可以解决此问题`snd_config_update_free_global()` **`snd_pcm_close(handle);`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:19:30.557

也许这会起作用（[来源](http://git.alsa-project.org/?p=alsa-lib.git;a=commitdiff;h=edcd677bf2065c560ef578940bab8f0aacddf0e6)）：

```
diff --git a/src/pcm/pcm.c b/src/pcm/pcm.c

--- a/src/pcm/pcm.c
+++ b/src/pcm/pcm.c
@@ -2171,7 +2171,12 @@ static int snd_pcm_open_conf(snd_pcm_t **pcmp, const char *name,
        if (open_func) {
                err = open_func(pcmp, name, pcm_root, pcm_conf, stream, mode);
                if (err >= 0) {
-                       (*pcmp)->open_func = open_func;
+                       if ((*pcmp)->open_func) {
+                               /* only init plugin (like empty, asym) */
+                               snd_dlobj_cache_put(open_func);
+                       } else {
+                               (*pcmp)->open_func = open_func;
+                       }
                        err = 0;
                } else {
                        snd_dlobj_cache_put(open_func); 
```

我自己尝试过，但无济于事。我的核心温度升高了约 10°F，很可能是由于类似的内存泄漏。*以下是valgrind*给我的一些东西，即使在使用了上面的补丁之后：

```
    ==869== 103 的丢失记录 103 中可能丢失了 226 个块中的 16,272 个字节
    ==869== 在 0x4C28E48: calloc (vg_replace_malloc.c:566)
    ==869== 由 0x5066E61：_snd_config_make（在 /usr/lib64/libasound.so.2 中）
    ==869== by 0x5066F58: _snd_config_make_add (在/usr/lib64/libasound.so.2)
    ==869== by 0x50673B9: parse_value (in /usr/lib64/libasound.so.2)
    ==869== 由 0x50675DE：parse_array_def（在 /usr/lib64/libasound.so.2 中）
    ==869== by 0x5067680: parse_array_defs (in /usr/lib64/libasound.so.2)
    ==869== by 0x5067A8E: parse_def (in /usr/lib64/libasound.so.2)
    ==869== by 0x5067BC7: parse_defs (in /usr/lib64/libasound.so.2)
    ==869== by 0x5067A6F: parse_def (in /usr/lib64/libasound.so.2)
    ==869== by 0x5067BC7: parse_defs (in /usr/lib64/libasound.so.2)
    ==869== by 0x5067A6F: parse_def (in /usr/lib64/libasound.so.2)
    ==869== by 0x5067BC7: parse_defs (in /usr/lib64/libasound.so.2)
```

丢失的字节数不断增加。**

# enums - 在 N2CMS 中，如何为下拉列表中的选项添加空格

> ID：13478863
> 
> 赞同：0
> 
> 时间：2012-11-20T17:36:49.150
> 
> 标签：enums, n2cms

N2CMS 使用标准 .net 枚举来定义可编辑下拉列表的选项。

我的下拉选项需要包含空格，但当然你不能在枚举项名称中包含空格。

我曾希望可以应用某种属性来定义选项的文本。但是我看不到任何似乎可以做到的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:05:01.983

我最终设法弄清楚了如何做到这一点（通过阅读 N2 源代码）。您使用全局资源文件。

特别是，对枚举中的每个项目`EditableEnumAttribute`调用`HttpContext.GetGlobalResourceObject`（通过调用）中的代码。`Utility.GetGlobalResourceString`

因此，要让枚举名称中包含空格（和其他特殊字符），您需要添加一个与枚举名称匹配的全局资源文件，并为每个需要特殊字符的枚举项添加一个条目。

您需要做的第一件事是将`App_GlobalResources`文件夹添加到项目的顶层。这很重要，就像您使用 VS.NET 在其他地方创建资源文件一样，它们不会被创建为全局文件。

接下来创建一个`App_GlobalResources`与枚举名称匹配的资源文件。它只需要匹配枚举的短名称，而不是完整的命名空间前缀名称。

现在在资源文件中为每个枚举项创建一个条目，枚举项名称在`Name`列中，名称包括列中的特殊字符`Value`。您不需要为每个枚举项添加一个条目，只需为具有特殊字符的那些项添加一个条目（尽管将它们全部添加可能是有意义的）。

# iphone - Xcode 4.3 如何保存我的应用程序屏幕的区域？

> ID：13478864
> 
> 赞同：1
> 
> 时间：2012-11-20T17:36:58.483
> 
> 标签：iphone, ios, iphone-5

我正在 Xcode 4.3 上创建本机应用程序并部署到目标 iOS 5。该应用程序基本上是一个贺卡创建者。我无法弄清楚如何从应用程序中保存屏幕的一部分。

我想做的是：

我为用户提供了一个按钮，上面写着“电子邮件”。当他们点击按钮时，应用程序应该将他们的卡片“保存”为图像，然后将其“粘贴”到电子邮件正文中。

这与本网站上的其他答案不同的原因是我要保存的区域由 4 个“元素”组成。有一个背景图形是倾斜的卡片背景，然后是一个文本字段，用户可以在其中输入消息，然后旁边是一个图片区域，他们可以选择自己的图片放在卡片上。

这是我正在谈论的照片： http://marklopezdesigns.com/mydownloadz! [/screenshotCard3.png](http://marklopezdesigns.com/mydownloadz!/screenshotCard3.png)

如何保存这些的“复合”高分辨率？

然后如何将其放入电子邮件正文中？

我问如何“保存”它的原因是因为我希望能够为用户提供另一个按钮，上面写着“保存到相机胶卷”和“作为消息发送”。我想如果我能理解如何将这个高分辨率保存到变量中，那么我应该下班并运行。

在此先感谢您的帮助。

========

这是下面的解决方案

======== ...所以经过一番摆弄。终于得到了我想要的。这是我的方法中的代码库，它在触摸“保存到相册”按钮时触发：

```
- (IBAction)savePhoto{  

CGRect rect;  
rect = CGRectMake(11,50 ,305, 262);  
UIView *cardViewer = [[UIView alloc] initWithFrame:rect];  
UIGraphicsBeginImageContext(cardViewer.bounds.size);   
//make view background transparent  
cardViewer.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.0];  
cardViewer.opaque = NO;  

//stuff items into a subview for capturing  
[self.view addSubview:cardViewer];  
[cardViewer addSubview:self.tiltedCard];  
[cardViewer addSubview:self.bigCardView];  
[cardViewer addSubview:self.cardWords];  
[cardViewer addSubview:self.photoView];  

[cardViewer.layer renderInContext:UIGraphicsGetCurrentContext()];  
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();  
UIGraphicsEndImageContext();  
CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], rect);  
UIImage *img = [UIImage imageWithCGImage:imageRef];  
CGImageRelease(imageRef);  
UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil);  

//put everything back where it belongs  
[self.view addSubview:self.tiltedCard];  
[self.view addSubview:self.bigCardView];  
[self.view addSubview:self.cardWords];  
[self.view addSubview:self.photoView];  

[cardViewer removeFromSuperview]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:27:30.023

要仅捕获屏幕的一个区域，请使用 指定边界`CGRectMake`。

```
CGRect rect = CGRectMake(50, 50, 100, 100);
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.view.layer renderInContext:context];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

在上面的示例中，我们从 x:50px 和 y:50px 开始捕获一个 100px x 100px 的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:18:46.170

要仅捕获屏幕的一个区域，请使用**UIView 或 SubView**并使用 CGRectMake 指定边界。

```
CGRect rect = CGRectMake(10, 10, 200, 200);
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.YourView.layer renderInContext:context]; // Make sure here you are using the  greetingcardView rather than self.view
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

**注意：** self.view 将捕获整个屏幕，因此只需在任何地方渲染视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T19:52:13.643

也许通过渲染图层上下文并抓取图像来获取图层的图片，我用它来显示精美的动画

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# algorithm - Flash 中的算法回声消除器

> ID：13478868
> 
> 赞同：1
> 
> 时间：2012-11-20T17:37:18.343
> 
> 标签：algorithm, flash, echo, aec

有人知道 Flash 中 Echo Canceller 的算法和架构/方案是什么吗？

# php - 如何在 PHP 中访问变量

> ID：13478869
> 
> 赞同：1
> 
> 时间：2012-11-20T17:37:18.150
> 
> 标签：php, variables, firebug

我是 PHP 的真正新手，我希望有一个简单的问题。

我在 DOM 部分找到了一个带有 Firebug 的变量，并想访问它以确定它是真还是假。该变量称为 isResponsive，它位于 Firebug 的 DOM 部分下。我会发布屏幕截图，但论坛不会让我。

在萤火虫它说：窗口>响应式设计，然后在它下面列出所有变量。其中之一是调用 isResponsive 并在右侧的列中表示真或假。

非常感谢任何有关如何访问此变量的帮助！

在此先感谢道格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:40:09.993

你不能，至少不能直接。

PHP 在服务器上运行并生成一些（大部分）文本并将其发送到浏览器。

浏览器将该文本解析为 HTML、JavaScript、CSS 等，并从中构造一个 DOM。

DOM 变量存在于浏览器中，而不是运行 PHP 的服务器上。

要让 PHP 访问它们，您必须使用 JavaScript（或其他运行客户端并可以访问 DOM 的东西）将数据序列化为字符串，然后在 HTTP 请求中将它们发送到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:40:31.220

您不能在 php 中访问 DOM 变量 - 它们只能通过 JavaScript 使用。如果你想要这个值，唯一的方法是通过 JavaScript 将 var 传递给 php 脚本

# knockout.js - 在 ObservableArray 中观察\更新数据

> ID：13478870
> 
> 赞同：2
> 
> 时间：2012-11-20T17:37:34.067
> 
> 标签：knockout.js

我正在学习 Knockout.js 并且我有一个关于更新嵌套数据的问题，我正在做的事情是可能的还是我需要重新考虑我的模型？

这是视图模型中的数据：

```
this.menu = ko.observableArray([
    {text: "one",
        children: [{text: "child 1.1", checked: true},{text: "child 1.2", checked: false}]},
    {text: "two",
        children: [{text: "child 2.1", checked: false},{text: "child 2.2", checked: true}]},
    {text: "three",
        children: [{text: "child 3.1", checked: false}]}
]); 
```

这是小提琴：

[http://jsfiddle.net/4aqrg/1/](http://jsfiddle.net/4aqrg/1/)

数据在最后被写出，所以我们可以看到它的状态。

我希望在 HTML 视图中更改复选框时更新选中的值，但这并没有发生。在状态变化的后面我想采取一些行动。在这种情况下，操作将是在图表中显示一个数据系列（仍然要做那部分）。

在此先感谢，马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:55:25.830

您的示例中的问题是您使数组可观察，但各个属性不可观察。

您需要使每个“已检查”属性 ko.observable 才能更新。

像这样：

```
this.menu = ko.observableArray([
        {text: "one",
            children: [{text: "child 1.1", checked: ko.observable(true)},{text: "child 1.2", checked: ko.observable(false)}]},
        {text: "two",
            children: [{text: "child 2.1", checked: ko.observable(false)},{text: "child 2.2", checked: ko.observable(true)}]},
        {text: "three",
            children: [{text: "child 3.1", checked: ko.observable(false)}]}
    ]); 
```

如果您希望文本也可观察，则还必须将其包装起来： ko.observable("child 1.1")

# php - 请求以小写形式出现，但我需要以大写形式出现

> ID：13478871
> 
> 赞同：0
> 
> 时间：2012-11-20T17:37:43.250
> 
> 标签：php, xml, soap, curl

我正在使用 php curl 发送 xml 请求。在我的请求中，一些字段名称应该以大写字母开头（我提到这些字段名称应该是这样的）。但它仍然是小写的。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:15:55.530

```
$soap_request  ="<?xml version=\"1.0\" encoding=\"UTF-8\"?> "
."<soapenv:Envelope xmlns:soapenv=http://schemas.xmlsoap.org/soap/envelope/>"
//. "<soapenv:Header /> "
.  "<soapenv:Body>"
."<air:AirFareRulesreq targetbranch=\"P107616\" Fareruletype=\"Long\" xmlns:air=\"http://www.travelport.com/schema/air_v16_0\" xmlns:com=\"http://www.travelport.com/schema/common_v13_0\" >" 
."<com:BillingPointOfSaleInfo OriginApplication=\"UAPI\">" ."</com:BillingPointOfSaleInfo>"
."<air:FareRuleKey FareInfoRef=$farere ProviderCode=\"1G\">$farerulekk"
."</air:FareRuleKey> " 
."</air:AirFareRuleReq>"
. "</soapenv:Body>"
."</soapenv:Envelope>"
."?>"; 
```

# matlab - 实施 kmeans 聚类时出错

> ID：13478872
> 
> 赞同：1
> 
> 时间：2012-11-20T17:18:45.540
> 
> 标签：matlab

有一个灰度图像`A`，我想应用 kmeans 聚类`K=2`，MATLAB 给我以下代码的错误，如何解决？

```
[idx,ctrs] = kmeans(im2double(A),2);
??? Error using ==> minus
Number of array dimensions must match for binary array op.

Error in ==> kmeans>onlineUpdate at 576
        Del(:,i) = (m(i) ./ (m(i) + sgn)) .* sum((X - C(repmat(i,n,1),:)).^2, 2);

Error in ==> kmeans at 341
        converged = onlineUpdate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T15:31:05.433

您需要将图像分解为“矢量”组件才能使用 Matlab kmeans。请参阅此处的示例：http: [//imageprocessingblog.com/ ?p=178](http://imageprocessingblog.com/?p=178)

# excel - Excel 将范围命名为索引

> ID：13478873
> 
> 赞同：1
> 
> 时间：2012-11-20T17:37:58.083
> 
> 标签：excel, excel-formula

我正在使用这个公式：

```
=INDEX(Listings!$A$2:$X$4915,MATCH(H1,Listings!$B$2:$B$4915,0),14) 
```

我希望索引数组是一个命名范围，如下所示：

```
=INDEX(myRange1,MATCH(H1,myRange2,0),14) 
```

当我尝试这个时，我得到一个#ref 错误。范围设置为与第一个公式中列出的相同的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:03:06.457

...我只是按照您所说的做了，而且效果很好...您是否正确定义了名称？如果您尝试导航到该范围，它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:48:33.007

Row_num、column_num 和 area_num 必须指向引用内的单元格；否则，INDEX 返回 #REF！错误值。如果省略 row_num 和 column_num，则 INDEX 返回由 area_num 指定的引用区域。

[参考网站](http://office.microsoft.com/en-us/excel-help/index-HP005209138.aspx)

# ruby - Ruby 通过另一个扩展时间类

> ID：13478874
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:03.670
> 
> 标签：ruby, class, model, module

我正在尝试根据时间戳检索税率。在 Time 类中定义“tax_rate”的地方做一个简单的 mixin 对我来说没有意义。将“tax_rate”放在“Government”类（或模块？我不知道我是新手）中更有意义，并且只需让 Time 类可以使用该方法，并可以选择假设当前时间如果单独使用。

例子：

`Time.now.tax_rate`== `0.13`
`10.years_ago.tax_rate`== `0.10`
`Government.tax_rate`== `0.13`（假设 Time.now）

其中tax_rate方法如下：

```
def self.tax_rate
  t = self || Time.now # I know this part won't work properly, I'll fix it later. I want it to default to using the current Time object or if the method is used on its own, the current time.
  return 0.10 if t < Time.parse("July 1, 2001")
  return 0.12 if t < Time.parse("July 1, 2010")
  0.13
end 
```

我基本上需要在我的 Rails 项目中参考不同类别的税率，我觉得直接将其放入其中一个模型中并不合适。它需要靠自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:00:56.580

为什么不只是一个`TaxRate`模块？

```
module TaxRate
  def self.get t = Time.now
    t = Time.parse(t) if t.kind_of?(String)
    case
    when t < Time.parse("July 1, 2001") then 0.10
    when t < Time.parse("July 1, 2010") then 0.12
    else 0.13
    end
  end
end

TaxRate.get #=> 0.13
TaxRate.get(Time.now) #=> 0.13
TaxRate.get("July 1, 2000") #=> 0.10
TaxRate.get("July 1, 2012") #=> 0.13
TaxRate.get(10.years_ago) #=> 1.10 
```

如果您想定义`tax_rate`on `Time`，我认为这是不自然的，那么，只需 Monkey patch 即可`Time`。

```
class Time
  def tax_rate
    case
    when self < Time.parse("July 1, 2001") then 0.10
    when self < Time.parse("July 1, 2010") then 0.12
    else 0.13
    end
  end
end

Time.now.tax_rate #=> 0.13
10.years_ago.tax_rate #=> 0.10 
```

# ember.js - 如何使表单数据成为应用程序状态的一部分？（在 Ember 应用程序中管理状态的替代方法？）

> ID：13478879
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:18.367
> 
> 标签：ember.js, ember-router

我目前正在寻找一种可行的方法来在我的 Ember 应用程序中全局存储表单数据。表单的状态必须反映在 URL 中。我还没有看到管理这种状态的 Ember 示例，因为路由总是围绕由应用程序显示的某些实体/模型。

Soo .. 我的用例是什么？

> 当用户进入我的应用程序时，他可能会在表单中修改我的应用程序的一些设置（例如位置和时间）。我希望将此信息作为应用程序状态的一部分。**为什么？用户可以轻松地与其他用户共享设置的状态，因为他可以共享应用程序的当前 URL。**

这是我目前的实现想法：

*   我可以将当​​前设置存储在全球位置，例如在我的路由器中。
*   这使我能够访问我的主要路线（和潜在的其他路线）的序列化和反序列化方法中存储的设置。

您对我目前对解决方案方法的想法有何看法？我是否错过了合适的 Ember 功能？

# apache-camel - 如何在路由级别进行 corrleationId 复制？并且仅在未填写 CorrelationID 时

> ID：13478880
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:21.117
> 
> 标签：apache-camel

我的用例（骆驼）：

*   如果传入的消息具有correlationId（比如clientCorrId）=>离开，则什么都不做，因为客户端使用clientCorrId来映射响应。

*   如果传入消息没有correlationId =>取messageId并将其放入correlationId（在路由级别，而不是在使用“jms”组件的每个路由中）

复制correlationId 应该只在路由级别完成

如何在路由级别进行 corrleationId 复制？（不是全局的，如下所示的 useMessageIDAsCorrelationID）

```
<bean id="jms" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory" ref="jmsConnectionFactory" />
    <!--property name="useMessageIDAsCorrelationID" value="true" / WARNING! Do not use this as we need to copy only in the beginning not everywhere -->
    <property name="transactionManager" ref="jpaTransactionManager" />
    <property name="transacted" value="true" />
</bean> 
```

我想避免使用像这样的单独 bean 代码来复制 correlationId **ONLYIF 它是空的**：

```
 if (EMPTY_MSG_ID.equals(currentCorrId)) {
        log.info("No corrId set, setting msgId to corrid :" + msgId);
        outHeader.put(correlationIdKey, msgId);
    } else {
        outHeader.put(correlationIdKey, currentCorrId);
        log.info("CorrId already set: " + currentCorrId);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T10:26:36.943

您可以使用拦截器从 jms 端点拦截，并在需要时添加缺少的 id。见[http://camel.apache.org/intercept](http://camel.apache.org/intercept)

# android - 按多个键对集合进行排序

> ID：13478881
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:24.447
> 
> 标签：android, sorting, hashmap

我想通过多个键对 Hashmap 进行排序，目前我使用以下代码

```
Collections.sort(ilv2, new Comparator<HashMap<String,String>>() {
        public int compare(HashMap<String, String> arg0, HashMap<String, String> arg1) {
            // TODO Auto-generated method stub
            Time d1 = Time.valueOf(arg0.get("stamp"));
            Time d2 =Time.valueOf(arg1.get("stamp"));
            return  d1.compareTo(d2);
        }
    }); 
```

Hasmap ilv2 按时间键“stamp”排序，但现在我想按键 res_id (int) 排序，然后按时间排序，如 sql 语句“order by res_id, stamp”有什么建议吗？

编辑：基于给定答案的解决方案

```
Collections.sort(ilv2, new Comparator<HashMap<String,String>>() {
        public int compare(HashMap<String, String> arg0, HashMap<String, String> arg1) {
            // TODO Auto-generated method stub
            int i = 0;
            int r1 = Integer.valueOf(arg0.get("resid"));
            int r2 = Integer.valueOf(arg1.get("resid"));
            i = r1-r2;
            if(i==0){
                Time d1 = Time.valueOf(arg0.get("stamp"));
                Time d2 =Time.valueOf(arg1.get("stamp"));
                 i = d1.compareTo(d2);
            }
            return  i;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:56:46.580

从我的代码中，是这样的：

```
public int compare(ProductItemData pr1, ProductItemData pr2) {
                int i = pr1.crossed.compareTo(pr2.crossed);
                if(i==0) {
                    int j = pr1.addTime.compareTo(pr2.addTime);
                    if(j==0)
                        return ((Long)pr1.id).compareTo(pr2.id);
                    else
                        return j;
                }
                return i;
            } 
```

了解 compareTo 返回的内容。

# iphone - 从 UIImageView 中删除最后一个绘图上下文

> ID：13478882
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:25.300
> 
> 标签：iphone, objective-c, ios, uiimageview, cgcontext

我有这个在 a 上绘图的代码`UIImageView`，我想将绘图保存到一个数组中并添加一个删除最后一个绘图的按​​钮。

我怎样才能做到这一点？

这是我的代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];

    lastPoint = [touch locationInView:self.view];
    lastPoint.y -= 10;
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;

    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    currentPoint.y -= 10;

    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    lastPoint = currentPoint;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    if(!mouseSwiped) {
        UIGraphicsBeginImageContext(self.view.frame.size);
        [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10.0);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());
        drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        drawImage.backgroundColor = [UIColor clearColor];
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:37:55.657

```
 Declare on NSMutableArray object in .h file
         // in .h file
           NSMutableArray *storage;

        // in .m file and initialize in view did load
           storage = [[NSMutableArray alloc]init];

 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
                if ([self.storage count] < MAX_LINE) {
                if(!mouseSwiped) {
                    UIGraphicsBeginImageContext(self.view.frame.size);
                    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
                    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
                    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10.0);
                    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
                    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
                    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
                    CGContextStrokePath(UIGraphicsGetCurrentContext());
                    CGContextFlush(UIGraphicsGetCurrentContext());
                    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
                    UIGraphicsEndImageContext();
                    drawImage.backgroundColor = [UIColor clearColor];
                }
                NSString *path = [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString      stringWithFormat:@"%d_drawslide__.png", [self.storage count]]];
                        [self.storage addObject:path];
                        NSMutableDictionary *params = [[NSMutableDictionary alloc] initWithObjectsAndKeys:drawImage.image, path, nil];
                    [NSThread detachNewThreadSelector:@selector(backuppmage:) toTarget:self withObject:params];
                        [params release];
            }

 }

-(void) backuppmage:(NSMutableDictionary *) params
  {
        NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
        for (NSString *key in params) {
              UIImage *image = (UIImage *)[params objectForKey:key];
              [UIImagePNGRepresentation(image) writeToFile:key atomically:YES];
              }
         [pool drain];

  }

        // add this method to button click
-(IBAction) undoEraseDrawing:(id) sender {

            if (!isErased && [self.storage count] > 0) {

                [self.storage removeObject:[self.storage lastObject]];

            }

            if ([self.storage count] > 0 && [self.storage lastObject] != nil) {
                drawImage.image = [self getImageWithURL:(NSString *)[self.storage lastObject]];
            } else {
                drawImage.image = nil;
            }
            isErased = NO;

    }

-(UIImage *) getImageWithURL:(NSString *)url
    {
            return [UIImage imageWithContentsOfFile:url];
    } 
```

# jquery - 选中选项时如何更新cookie

> ID：13478884
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:41.000
> 
> 标签：jquery

我有一个清单，当用户检查第一个选项时，我想获得该值。然后，当他们检查另一个选项时，我想分别获得第二个值。这是我到目前为止的代码

```
$('input[type="checkbox"]').live('click', function() {
var values = [];

$('input[type="checkbox"]').each(function(index, value) {
    if (this.checked && $('input[type="checkbox"]:checked').length == 1) {

            values.push($(this).next().html());
        str1 = values[0];
        number1 = str1.replace(/\D/g,"");
        $('#resultsection p').html("<span>" + number1 + " </span> ");

    } else if (this.checked && $('input[type="checkbox"]:checked').length == 2) {

        values.push($(this).next().html());
            str1 = values[0];
            number1 = str1.replace(/\D/g,"");

            str2 = values[1];
            number2 = str2.replace(/\D/g,"");

            $('#resultsection p').html("<span>" + number1 + number2 + " </span> ");

    } else {

        $('#resultsection p').html("No metrics selected.");
    }
}); 
```

我花了很多时间来更改此代码以使其正常工作，但到目前为止我失败了。有人能告诉我这段代码有什么问题吗？谢谢

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:47:41.197

据我所知，在您的代码中，您缺少`$.each()`函数的结尾......您正在开始`$.each(function(a,b) {` 但没有结束它。

```
$('input[type="checkbox"]').live('click', function() {
    var values = [];

  $('input[type="checkbox"]').each(function(index, value) {
    if (this.checked && $('input[type="checkbox"]:checked').length == 1) {

            values.push($(this).next().html());
        str1 = values[0];
        number1 = str1.replace(/\D/g,"");
        $('#resultsection p').html("<span>" + number1 + " </span> ");

    } else if (this.checked && $('input[type="checkbox"]:checked').length == 2) {

        values.push($(this).next().html());
            str1 = values[0];
            number1 = str1.replace(/\D/g,"");

            str2 = values[1];
            number2 = str2.replace(/\D/g,"");

            $('#resultsection p').html("<span>" + number1 + number2 + " </span> ");

    } else {

        $('#resultsection p').html("No metrics selected.");
    }
  }); // you forgot to end your each()
}); 
```

# c - C - #include 和多个 typedef

> ID：13478885
> 
> 赞同：0
> 
> 时间：2012-11-20T17:38:44.293
> 
> 标签：c, gcc, typedef, header-files, include-guards

我正在用 gcc 在 eclipse 中编写一个嵌入式 C 程序，但看不到如何解决某个问题。我在头文件中有一个 typedef，它受包含保护。由于我在多个头文件中使用此 typedef，因此我需要将其包含在其他头文件中，但是当我尝试编译时，无论我做什么，其中一个头文件都看不到 typedef 并抱怨未知类型名称。

我相信这说明了问题：

标题啊：

```
#ifndef _a_h
#define _a_h

typedef enum {
  USBD_OK   = 0,
  USBD_BUSY,
  USBD_FAIL,
}USBD_Status;

#endif 
```

标题 bh：

```
#ifndef _b_h
#define _b_h

#include "a.h"

extern USBD_Status USB_getStatus(void);

#endif 
```

标题通道：

```
#ifndef _c_h
#define _c_h

#include "a.h"

extern USBD_Status USBD_Sync(void);

#endif 
```

这似乎总是导致错误“未知类型名称'USBD_Status'”，因为第二个编译的任何头文件都看不到typedef。从 ah 中删除包含保护会导致抱怨 USBD_Status 正在被重新声明。

编辑：我已经仔细检查了所有包含路径、所有包含、所有文件名和所有包含保护 - 没有重复或拼写错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:09:15.773

可能是您有另一个使用相同标头保护名称的标头。

您可以在 ah 的顶部添加一些代码来执行此操作：

```
#ifdef _a_h_
#error this header is already defined
#endif 
```

通过这种方式，您可以追踪包含 ah 的任何地方，并查看可能出现异常的地方。

如评论中所述，您的上述示例有效，因此问题必须出在其他地方...

# java - 在java中突出显示单词

> ID：13478892
> 
> 赞同：1
> 
> 时间：2012-11-20T17:39:18.890
> 
> 标签：java, swing, timer, highlight, jtextpane

我正在尝试突出显示一个单词，但第一次仅突出显示 .length()-2，延迟，然后是最后两个单词。第一个单词被突出显示，但延迟后没有突出显示最后两个单词。请帮助。这是代码：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultHighlighter;

public class newkarao {

private int[] timings = {600, 1000, 400,50};
private String[] words = new String[]{"Hellojjkhl", "java", "whoooooh","bye"};
private DefaultHighlighter.DefaultHighlightPainter highlightPainter = new       DefaultHighlighter.DefaultHighlightPainter(Color.GREEN);
private int count = 0;
private int xx=0,tlength,spe;
private boolean fisrTime = true;
private JFrame frame;
private JTextPane jtp;
JButton startButton;

public newkarao() {
    initComponents();
}

private void initComponents() {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(false);

    jtp = new JTextPane();

    for (String s : words) {
        String tmp = jtp.getText();
        if (tmp.equals("")) {
            jtp.setText(s);
        } else {
            jtp.setText(tmp + " " + s);
        }
    }

    startButton = new JButton("Start");
    startButton.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            startKaraoke();
        }
    });

    frame.add(jtp, BorderLayout.CENTER);
    frame.add(startButton, BorderLayout.SOUTH);

    frame.pack();
    frame.setVisible(true);
   }

   private void startKaraoke() {
    if (fisrTime) {
        startButton.setEnabled(false);
        fisrTime = false;
    }
    new Thread(new Runnable() {
        @Override
        public void run() {

            Timer t = null;
            try {
                t = createAndStartTimer(timings[count], count);
            } catch (InterruptedException ex) {
                Logger.getLogger(newkarao.class.getName()).log(Level.SEVERE, null, ex);
            }

            while (t.isRunning()) {//wait for timer to be done
                try {
                    Thread.sleep(1);
                } catch (InterruptedException ex) {
                    Logger.getLogger(newkarao.class.getName()).log(Level.SEVERE, null, ex);
                }
            }

            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    count++;
                    if (count == timings.length) {
                        JOptionPane.showMessageDialog(frame, "Done");
                        startButton.setEnabled(true);
                        count = 0;
                    } else {
                        startKaraoke();
                    }
                }
            });

        }
    }).start();
   }

  private Timer createAndStartTimer(int delay, final int count) throws InterruptedException {

    try {
        int sp = 0;
        for (int i = 0; i < count; i++) {
            sp += words[i].length() + 1;
            spe=sp;
        }
   //     int a=timings[xx];xx++;
        System.out.println("jfd");
        tlength=words[count].length();//Thread.currentThread().sleep(5000);
        jtp.getHighlighter().addHighlight(sp, sp + words[count].length()-2, highlightPainter);
        System.out.println(sp + words[count].length()-2);
    } catch (BadLocationException ex) {
        ex.printStackTrace();
    }

    Timer t = new Timer(delay, new AbstractAction() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            try {System.out.println(spe + words[count].length());
                jtp.getHighlighter().addHighlight(spe, spe + words[count].length(), highlightPainter);
                System.out.println("sleep");
               //    Thread.currentThread().sleep(5000);

                jtp.getHighlighter().removeAllHighlights();
            } catch (BadLocationException ex) {
                Logger.getLogger(newkarao.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    });
    t.setRepeats(false);
    t.start();
    return t;
   }

   public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            new newkarao();
        }
    });
   }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T18:54:16.530

我不认为你理解我。

使用[我的最新示例](https://stackoverflow.com/questions/13360411/highlighting-words-in-java/13361657#13361657)，我制作了这个（注意这是上一个问题中示例的更新代码。现在仅使用 Swing Timers）：

```
private int[] timings = {2000, 4000, 0, 3000, 2000};//word timings
private String[] words = {"Hel", "lo", " ", "wor", "ld"};//each indiviaul word

private String sentence = "Hello world";//entire string for writing to JSCrollPane 
```

![在此处输入图像描述](../Images/82ed107ff67a616cefb8b098efee30aa.png)

![在此处输入图像描述](../Images/575d673ab9bb10d42c7fa628e9ca7115.png)

![在此处输入图像描述](../Images/05aca964853b5194a110d340989a0ee2.png)

![在此处输入图像描述](../Images/0eb94f5f03d4421dd22cd7bd38b5ec21.png)

![在此处输入图像描述](../Images/ab59830c9b78b2b37cc6509a1dedeabc.png)

![在此处输入图像描述](../Images/5a7487b70a6cade91b913965b836f7ad.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.atomic.AtomicBoolean;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultHighlighter;

public class KaraokeTest {

    private int[] timings = {2000, 4000, 0, 3000, 2000};//word timings
    private String[] words = {"Hel", "lo", " ", "wor", "ld"};//each indiviaul word
    private String sentence = "Hello world";//entire string for writing to JSCrollPane
    private DefaultHighlighter.DefaultHighlightPainter highlightPainter = new DefaultHighlighter.DefaultHighlightPainter(Color.YELLOW);
    private int count = 0;
    private boolean fisrTime = true;
    private JFrame frame;
    private JTextPane jtp;
    private JButton startButton;
    private AtomicBoolean done = new AtomicBoolean(false);

    public KaraokeTest() {
        initComponents();
    }

    private void initComponents() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        jtp = new JTextPane();

        jtp.setText(sentence);
        jtp.setEditable(false);

        startButton = new JButton("Start");
        startButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                startKaraoke();
            }
        });

        frame.add(jtp, BorderLayout.CENTER);
        frame.add(startButton, BorderLayout.SOUTH);

        frame.pack();
        frame.setVisible(true);
    }

    private void startKaraoke() {
        if (fisrTime) {
            startButton.setEnabled(false);
            fisrTime = false;
        }

        createAndStartTimer(timings[count], count);

        Timer t = new Timer(1, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                if (done.get()) {
                    count++;
                    if (count == timings.length) {
                        JOptionPane.showMessageDialog(frame, "Done");
                        startButton.setEnabled(true);
                        count = 0;
                        fisrTime = true;
                        done.getAndSet(false);
                        ((Timer) ae.getSource()).stop();
                    } else {
                        ((Timer) ae.getSource()).stop();
                        startKaraoke();
                    }
                }
            }
        });
        done.getAndSet(false);//to synchronize when the remove highlight timer is done so a clash between adding highlights before the timer is done doesnt occur
        t.start();
    }

    private void createAndStartTimer(int delay, final int count) {
        int sp = 0;
        for (int i = 0; i < count; i++) {
            sp += words[i].length();
        }
        try {
            jtp.getHighlighter().addHighlight(sp, sp + words[count].length(), highlightPainter);
        } catch (BadLocationException ex) {
            ex.printStackTrace();
        }

        Timer t = new Timer(delay, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                jtp.getHighlighter().removeAllHighlights();
                done.getAndSet(true);//so that out other timer knows we are done completly and can add new higlights
            }
        });
        t.setRepeats(false);
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new KaraokeTest();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T22:53:13.613

您也可以`Timer`通过简单地调整`Timer`. 刚刚从@DavidKroukamp 获取代码并删除了其中一个`Timer`实例

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.text.BadLocationException;
import javax.swing.text.DefaultHighlighter;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.atomic.AtomicBoolean;

public class KaraokeTest {

  private int[] timings = {2000, 4000, 0, 3000, 2000};//word timings
  private String[] words = {"Hel", "lo", " ", "wor", "ld"};//each indiviaul word
  private String sentence = "Hello world";//entire string for writing to JSCrollPane
  private DefaultHighlighter.DefaultHighlightPainter highlightPainter = new DefaultHighlighter.DefaultHighlightPainter(Color.YELLOW);
  private boolean fisrTime = true;
  private JFrame frame;
  private JTextPane jtp;
  private JButton startButton;
  private AtomicBoolean done = new AtomicBoolean(false);

  public KaraokeTest() {
    initComponents();
  }

  private void initComponents() {
    frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(false);

    jtp = new JTextPane();

    jtp.setText(sentence);
    jtp.setEditable(false);

    startButton = new JButton("Start");
    startButton.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent ae) {
        startKaraoke();
      }
    });

    frame.add(jtp, BorderLayout.CENTER);
    frame.add(startButton, BorderLayout.SOUTH);

    frame.pack();
    frame.setVisible(true);
  }

  private void startKaraoke() {
    if (fisrTime) {
      startButton.setEnabled(false);
      fisrTime = false;
    }

    Timer t = new Timer( timings[0], new ActionListener() {
      private int currentIndex = 0;
      @Override
      public void actionPerformed( ActionEvent e ) {
        clearHighlights();
        highlightWord( currentIndex );
        currentIndex++;
        if ( currentIndex < timings.length ){
          ( ( Timer ) e.getSource() ).setDelay( timings[currentIndex] );
          ( ( Timer ) e.getSource() ).restart();
        } else {
          ( ( Timer ) e.getSource() ).stop();
        }
      }
    } );
    t.setRepeats( true );

    t.start();
  }

  private void highlightWord( int index ){
    int sp = 0;
    for (int i = 0; i < index; i++) {
      sp += words[i].length();
    }
    try {
      jtp.getHighlighter().addHighlight(sp, sp + words[index].length(), highlightPainter);
    } catch (BadLocationException ex) {
      ex.printStackTrace();
    }
  }
  private void clearHighlights(){
    jtp.getHighlighter().removeAllHighlights();
  }

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        new KaraokeTest();
      }
    });
  }
} 
```

# javascript - 使用 javascript 删除 CSS 类不会产生预期的结果

> ID：13478895
> 
> 赞同：2
> 
> 时间：2012-11-20T17:39:24.817
> 
> 标签：javascript, css, removeclass

我有一个存在于一个页面上的网站：index.html。网站上有很多内容（似乎在许多“页面”上），但通过 javascript 和 CSS，所有信息都包含在 index.html 中。

所以存在一个“主页”位置和一个“内部”位置（如主页和内部页面），当用户在内部页面和主页上时，我需要一些链接来表现不同。因此，按照我的设置方式，一旦单击“内部”链接，我就会从 div 中删除一个类，我*认为*该类应该会导致该 div 中的链接表现不同。但他们的行为*不像*我预期的那样。

该页面在此示例中非常笨拙，如下所示：

[http://littleduck.com/ns_sample/index.html](http://littleduck.com/ns_sample/index.html)

在此示例中，只有主页和“服务”页面。您可以在它们之间来回链接。

如果您将鼠标悬停在左侧的那些灰色链接（在代码中称为“气球”），您将看到它们具有悬停颜色，并出现一个弹出图形。我只希望页面处于“主页”位置时发生这种情况。我有一个名为“popup_yes”的类，它允许这种悬停/弹出动作发生。它在加载 index.html 时出现，如果我将其删除或在代码中更改其名称，则悬停/弹出窗口不起作用。所以我知道班级正在做某事。现在，当单击“服务”时，我删除了该类。通过检查 Chrome 中的元素，我可以看到“popup_yes”实际上已被删除。但是...当您将鼠标悬停在气球上时，仍然会发生悬停/弹出操作。

当我检查元素时，即使您可以在代码中看到“popup_yes”消失了，Chrome 仍在使用它。这是 Inspect Element 在“主页”和“内部”页面上的截图：

[http://i.stack.imgur.com/p1ZP7.jpg](http://i.stack.imgur.com/p1ZP7.jpg)

所以，请告诉我我的大脑哪里出轨了。当我在“服务”页面上时，如何使悬停/弹出操作不起作用？非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:30:08.130

我已经修改了您正在使用的 javascript 并且可以使它工作。这是我所做的更改。

首先，当您在单击服务页面时删除了类时，我指定了要删除的类。

```
$('#balloons').removeClass("popup_yes"); 
```

在此之后，当您返回主页时，必须重新添加该类，因此我在您为`$('#buttons')`div 设置动画后包含了这一行。

```
$("#balloons").addClass("popup_yes"); 
```

现在来改变每个气球的悬停效果。我将展示我对第一个气球元素所做的更改，您可以为其他气球元素复制相同的内容。

```
$(".balloon_1").mouseover(function() {
   if($(this).closest('#balloons').attr("class")=="popup_yes"){
      $("#popup_1").show(400);
      $(".balloon_1").addClass("hover");
     }
 });

$(".balloon_1").mouseout(function() {
    if($(this).closest('#balloons').attr("class")=="popup_yes"){
        $("#popup_1").hide(400);
        $(".balloon_1").removeClass("hover");
     }
}); 
```

我修改的不是检查两个类是否悬停我只是检查了这个`balloon_1`类，然后我只在最接近它的具有 id 的元素`balloons`具有 class时才产生效果`popup_yes`。

我在chrome中试过了。希望它在其他浏览器中也能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:35:50.760

问题在于您的鼠标悬停/移出代码

```
$(".popup_yes .balloon_1").mouseover(function() {
    $("#popup_1").show(400);
    $(".balloon_1").addClass("hover");
}); 
```

当页面加载时，鼠标悬停事件绑定到该跨度，因此该操作已经建立，如果您在函数中添加检查

```
$(".popup_yes .balloon_1").mouseover(function() {
    if ($('#balloons').hasClass('popup_yes') ){ //<--here
        $("#popup_1").show(400);
        $(".balloon_1").addClass("hover");
    }
    }); 
```

它应该按预期工作

# git - 如何用 git 修改作者？

> ID：13478899
> 
> 赞同：0
> 
> 时间：2012-11-20T17:39:40.357
> 
> 标签：git

初始化存储库后，我提交一次，没有配置名称和电子邮件。然后我在存储库中编辑一个文件，然后再次提交而不配置名称和电子邮件。现在我执行以下命令来更新名称和电子邮件：

```
git config --global user.name "name" 
git config --global user.email abc@d.com 
git commit --amend -m "some information" 
```

我使用 git gui 检查修改后的文件，发现提交者是正确的我的姓名和电子邮件。但是作者仍然保留它就像我的计算机的 name@host 。我怎样才能让它正确。提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:41:10.907

好的解决方案是使用`--reset-author`：

```
git commit --amend --reset-author 
```

另一种可能性是修改`--author`选项：

```
git commit --amend --author="My Name <my.name@email.com>" 
```

* * *

**资源：**

*   [git 提交手册](http://www.kernel.org/pub/software/scm/git/docs/git-commit.html)

# php - 如何避免在“无限滚动”系统中从数据库中获取重复的帖子？

> ID：13478901
> 
> 赞同：2
> 
> 时间：2012-11-20T17:39:46.423
> 
> 标签：php, javascript, html, mysql

我有一个 AJAX 系统，它从数据库中获取帖子，然后在我的布局中创建 DIV 来放置它们。当用户到达页面末尾时，API 将加载许多其他帖子。问题是，我怎样才能获得以下 10 个帖子，它们只是已经加载的最后一个帖子的先前帖子？当我在顶部加载新帖子时，我希望发生同样的事情，如何以正确的顺序显示每个帖子而不会丢失任何帖子或重复任何帖子？

对不起，糟糕的解释和糟糕的英语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T17:42:02.583

您需要存储最后检索到的消息的 id。当您提交新请求时，发送最后收到的消息 id 并让 php/mysql 从那里返回结果。

* * *

如果您的查询看起来像这样：

```
SELECT * FROM posts WHERE username='redcurley' LIMIT 10 
```

然后你需要修改为更像：

```
SELECT * FROM posts WHERE username='redcurley' AND id > :id LIMIT 10 
```

您也可以使用 Scott 提到的偏移方法。

* * *

**编辑：**我假设您使用的是自动增量 ID，因为它很常见。由于您不是，因此您需要一些方法来跟踪返回的最后一条消息。您可以通过以每次都以相同顺序出现并使用偏移量的方式对记录进行排序来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:44:49.080

您可能可以在查询中使用 OFFSET，即使您想要获得可能具有无序 ID 的结果，它也可以工作。所以如果你有 -

```
SELECT * FROM posts WHERE username='foo' LIMIT 10 
```

下一个查询是

```
SELECT * FROM posts WHERE username='foo' LIMIT 10 OFFSET 10 
```

当您获取越来越多的记录时，依此类推。您的 Javascript 必须跟踪偏移量并将其与 AJAX 请求一起发送到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:58:18.527

要允许接近无限的结果，您不能使用 AUTO_INCREMENT，因为最终会有限制。

但是您可以做的是在发布时向该行添加一个时间戳，然后在第一次加载时没有为 AJAX 句柄代码提供时间戳，因此它会全部获取它们并发送回运行查询的时间戳，然后当它接收它时然后可以使用不同的查询`WHERE timestamp > $sentTimestamp`

例如

```
<?php
// AJAX handler code
$sqlQuery = "SELECT * FROM posts"

if(!empty($_REQUEST['lastPull'])){
    $sqlQuery .= " WHERE `timestamp` > ".mysql_real_escape_string($_REQUEST['lastPull']);
}
// do your query and formatting for AJAX response here
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T18:41:42.530

当用户加载页面时，您可以通过页面加载获取所有最后 10 个帖子，

例如 -

id 发布 1 发布 1 2 发布 2 3 发布 3。. . 10 帖子10

因此，当用户滚动页面底部时，您将调用您的 ajax 代码并将最后一个 id 作为输入传递给您，并在 SQL 查询中使用 LIMIT 进行分页。

例如 - 我的最后一个帖子 id 是 50 并且用户向下滚动页面，所以查询会触发，Select * from tableName where id < 50 LIMIT 10

这是针对旧帖子的，这意味着如果有任何新帖子，那么您可以在用户刷新页面时使用带有最后一个 ID 的新查询来检查新帖子。Select * from tableName where id > 50 LIMIT 10

这是针对新帖子的，将两个集合都返回到页面的单个请求中，并通过评估两者，您可以插入新的 div 标签来显示这一点。

您可以使用 ajax 和 JSON 组合，如果您想了解更多关于 JSON 和 AJAX 的信息，请[单击此处。](http://mycodeprograms.blogspot.in/p/json.html)

# ms-access - 在子报表中为主报表设置标志

> ID：13478903
> 
> 赞同：0
> 
> 时间：2012-11-20T17:39:59.500
> 
> 标签：ms-access, ms-access-2003

好的，我有点 VBA 新手。我有一份基于子报告生成的报告。这一切都很好。

现在我需要在子报表中添加一个条件标志来以不同的方式显示主报表。IE。如果子报表中的某个项目的值 > 50，我想为“DispalyAlternateMessage”设置一个标志，然后将显示与报表上的默认值不同的消息。我知道如何有条件地显示/隐藏主报告中的元素，但我似乎无法弄清楚如何将条件值从子报告传递到主报告，甚至访问来自主报表的子报表变量。

有什么想法/帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:04:33.563

您可以通过子报表控件的名称引用子报表，然后是`Report`包含的项目，然后是控件。例如，您可以将文本框的控制源设置为：

```
=[Table1 subreport].[Report].[ATextbox] 
```

或者

```
=IIf([Table1 subreport].[Report].[ATextbox]=50,"Is 50","Is not 50") 
```

# ios - 创建 IOS 6 通讯簿组

> ID：13478905
> 
> 赞同：1
> 
> 时间：2012-11-20T17:40:08.623
> 
> 标签：ios, xcode, ios6

我以前在这里看到过有关添加地址簿组的问题；但是，它们中的大多数都包含 ABAddressBookCreate() 而不是新的 ABAddressBookCreateWithOptions() 并且 Xcode 在使用之前的代码时会抛出警告。

我想我的主要问题是正确的方法是什么：1.检查组是否存在 2.如果在 IOS 6 中不存在则创建组。

谢谢！

# marshalling - 用于不同 Web 服务调用的 Spring 3 Web 服务模板？

> ID：13478909
> 
> 赞同：2
> 
> 时间：2012-11-20T17:40:10.567
> 
> 标签：marshalling, spring-3, webservicetemplate

我是新手用来`WebserviceTemplate`拨打客户电话。

我可以`marshalSendAndReceive(request)`用于单个暴露的 WS。在我的客户中，我也需要调用其他 WS。在我`SpringConfig.xml`的 中，`jaxbMarshaller`是用 a 定义的`p:contextPath="com.acme.domain1.service1"`。据我了解，`contextpath`用于编组请求。

那么，如果我需要调用`service2`其生成的类在 下`com.foo.service2`，我该如何在同一代码中执行此操作？我在自动装配`WebserviceTemplate`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:17:48.497

只需添加列表

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
                 <property name="contextPaths">
                        <list>
                                <value>com.acme.domain1.service1</value>
                                <value>com.foo.service2</value>
                        </list>
                </property>
</bean> 
```

# android - 如何在安装时检查设备品牌名称

> ID：13478910
> 
> 赞同：0
> 
> 时间：2012-11-20T17:40:09.517
> 
> 标签：android, installation

如何在android中安装应用程序时检查设备品牌名称。当品牌不匹配时，我想取消安装。

获取品牌名称的代码 - String brand = android.os.Build.BRAND;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:42:12.250

您不能取消安装，也不能在安装之前执行任何操作（这将是相当明显的）并由用户手动启动至少一次。

如果您想将应用程序的访问权限限制为匹配某些特征的设备，请阅读这篇文章：[Google Play 上的过滤器](http://developer.android.com/guide/google/play/filters.html)

# ruby - 如何正确使用数据映射器回调（或挂钩）？

> ID：13478917
> 
> 赞同：1
> 
> 时间：2012-11-20T17:40:35.673
> 
> 标签：ruby, database, callback, sinatra, datamapper

我尝试了以下方法：

```
class DataEntry
  include DataMapper::Resource
  property :id,         Serial,   :key => true
  property :some_data,    Text,   :length => 1000000
  property :created_at, DateTime

  after :save do |entry|
    if entry.created_at.strftime('%T') == "00:00:00"
      @new_datetime = ((entry.created_at.to_time+1)-3600).to_datetime
      entry.update!(:created_at => @new_datetime)
    end
    return true
  end
end 
```

如果它是 00:00:00（小时：分钟：秒），这应该将条目保存的时间更改为 00:00:01。我知道我的代码很脏（我正在学习 ruby​​、datamapper 等，我有点菜鸟；）），但更糟糕的是：它对模型没有任何影响。它就像我的钩子不存在一样保存。我究竟做错了什么？

（可能也很重要：我将它与 sinatra 一起使用，所以我无法访问诸如 n.hours 等的 Rails 助手！）

提前致谢！;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:26:36.750

你为什么用`after`？

我建议使用`before`以避免对对象的双重操作。

通过 using`self`你可以省略多余的`entry`using

并且不需要`return true`

另外，为什么是实例变量？

```
before :save do
  if self.created_at.strftime('%T') == "00:00:00"
    self.created_at = ((self.created_at.to_time+1)-3600).to_datetime
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T11:44:59.107

万一其他人发现了这一点，尽管接受的答案提供了一种解决方法，但关于为什么“after”钩子没有触发的原始​​问题的答案可能是因为“after :save”钩子不会触发，除非调用 save 时模型很脏！

所以;

```
m = MyModel.first
m.save #Hook will not fire
m.name = "Foo"
m.save #Hook will fire 
```

数据映射器的小怪癖，以这种方式做事可以提高性能，但可读性通过地板 IMO。

# iphone - 是否有更可靠的 GKSession 替代方案允许在 3 个以上设备之间进行 P2P？

> ID：13478918
> 
> 赞同：2
> 
> 时间：2012-11-20T17:40:38.530
> 
> 标签：iphone, ios, networking, bonjour, gksession

有人指出卓悦更可靠。Bonjour 只有 WiFi，不支持蓝牙，不是吗？

必须有一种替代方案，`GKSession`将 Bonjour 和蓝牙的所有优点结合在一个简单易用的 API 中，但我找不到它。

对于一个玩家可以随时加入的游戏，我需要自动连接最多 8 台设备，而且`GKSession`PeerToPeer 的总限制似乎是 3 台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:56:08.877

我相信，从 iOS 6 开始，GKSession 最多可以支持 16 台设备。它当然应该至少适用于 8 个设备，因为蓝牙支持 8 个设备。

我已经成功连接了 6 台设备，没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T20:11:41.130

更新 iOS 7，因为`GKSession`现在已弃用。

Multipeer Connectivity 框架的`MCSession`类最多可以连接 8 个对等点（当前值为`kMCSessionMaximumNumberOfPeers`）。

对于任何感兴趣的人，我创建了[MCSessionP2P](https://github.com/shrtlist/MCSessionP2P.git)，这是一个演示应用程序，它说明了`MCSession`. 该应用程序通过 Wi-Fi 或蓝牙进行自我宣传，并以编程方式连接到可用的对等点，从而建立对等网络。

# javascript - 在展示时执行第三方 JavaScript 代码段

> ID：13478919
> 
> 赞同：2
> 
> 时间：2012-11-20T17:40:41.853
> 
> 标签：javascript

印象跟踪器通常是您可以使用该`new Image().src`方法或类似方法点击的 URL。我只见过像素或 PHP 脚本在这些 URL 中被击中。

当第三方想要执行 JavaScript 代码片段时会发生什么？像下面这样

```
<script src="http://their.special/javascript.file.js"></script>
<script>
    aFunctionThatExistsInThatSpecialFile();
    if(someFlagSetInThatFile) {
        someObjectInThatFile.setSomeProperty();
    }
    someOtherFunction();
</script> 
```

或者它看起来像

```
var myVar = document.getElementById('someID');
//... more JavaScript 
```

该片段可以做任何它想做的事情，比如写出一个 cookie 或其他东西。

您不能将其加载为`img`. 您不应该这样做，`document.write`因为展示事件可能会在页面加载后触发。A`document.write`可以擦除整个页面。

那么如何使用 JavaScript 来支持这种印象跟踪器呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:57:09.583

如果您查看 AdWords 之类的内容，通常会看到如下内容：

```
<script src="//google.com/something/something.js"></script>
<script>
    account_name = "name";
    dollar_value = 37.05;
    fire_adWords_tracking();
</script> 
```

这根本不是它的样子。
但它就是这样做的——基本上。

然而，这些天来，更多的程序正在做类似的事情（考虑 GA）：

```
var tracker = tracker || []; // if tracker doesn't exist, make it an array
tracker.push(["account", "12345H"],
             ["amount", "37.05"],
             ["product_name", "thingy"]); 
```

然后在页面底部，加载一个脚本，该脚本将查找`tracker`并制作图像以跟踪所有数据：

```
(function () {
    var s = document.createElement("script"),
        parent = document.getElementsById("script")[0].parentNode,
        src = "//google.com/wherever.js";
    s.src = src;
    parent.appendChild(s);
}()); 
```

每当它加载时，它都会遍历交给它的一堆东西，并将它们一个一个地放在一起。

如果您谈论的是在“印象”上触发它，那么您（或您公司的利益相关者——营销或 IT，或分析领域的高层）将必须定义“印象”对他们意味着什么。

对于很多人来说，只需将它放在页面底部，以便在页面加载时触发（即：页面的“印象”）就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:49:47.820

尝试类似：

```
<script src="http://their.special/javascript.file.js"></script>
<script>
    aFunctionThatExistsInThatSpecialFile();
    if(someFlagSetInThatFile) {
        someObjectInThatFile.setSomeProperty();
    }
    someOtherFunction();
</script> 
```

在 HTML5 中不允许在`<script>`具有in 属性的标记内执行代码，并且可以在某些浏览器中执行，但非常不可靠且非常不鼓励。`src`

# python - 使用 Jinja 2 时，我可以在 Python 中指定不同的“扩展”基本模板吗？

> ID：13478924
> 
> 赞同：0
> 
> 时间：2012-11-20T17:41:13.150
> 
> 标签：python, jinja2

我在脚本中使用 Jinja 作为独立库，这样我就可以编写网站的多个版本，一个使用 base_a.html，另一个使用 base_b.html、base_c.html 等等。

但是，文件中使用的`extends`关键字需要在每个子模板中指定基本模板名称。

有没有办法在 Python 中指定基本模板名称，例如

`t.render(extends="base_a.html")`

例如？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:54:38.057

好的，这是一种方法，

`extends`在子模板中使用以下内容作为您的标签，

```
 {% extends base_template %} 
```

然后使用以下，

```
from jinja2 import Environment, Template, FileSystemLoader
env = Environment(loader = FileSystemLoader(["../templatedir"])
t = env.get_template("child.html")
print t.render(base_template="parent_template.html") 
```

# jquery - Jquery从复选框行计算总数

> ID：13478925
> 
> 赞同：1
> 
> 时间：2012-11-20T17:41:15.640
> 
> 标签：jquery, html

基本上我遇到的问题是第二个下拉列表（bagel_form）继承了第一个下拉列表中的任何值，并根据该值计算总数。

我想要发生的是根据它当前的下拉列表将其值添加到总计中。如果选中该框，则添加到总计中，如果未选中该框，则从总计中减去。*（基于下拉修饰符）。*

我做了一个小提琴来说明这个问题，因为它有点令人困惑。

[http://jsfiddle.net/Gqzhq/5/](http://jsfiddle.net/Gqzhq/5/)

* * *

HTML

```
<table id="hor-minimalist-b" summary="Breakfast Sponsor">
<th>Pizza</th> <th>Bagel</th>

<tr>
<td><input type="checkbox" name="pizza_form" id="1" value="500"> 
    <select id="my_select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option></td>

    <td><input type="checkbox" name="bagel_form" id="1" value="200"> 
    <select id="my_select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option></td>

    </tr>

    </table>
    <div id="total_price">Total:</div>
<input class="total" readonly="readonly"> 
```

* * *

jQuery

```
var total = 0;
 $('input[name=pizza_form], input[name=bagel_form] ').live('click', function() {
    var current_price = parseInt($(this).attr('value'));
    if($(this).hasClass('checked'))
    {
    $(this).removeClass('checked');
    total -= current_price  ;
    remove_dropdowns(total) ;
    }
    else
    {     
    $(this).addClass('checked');
    total += current_price  ;
    add_dropdowns(total) ;
    }

    function add_dropdowns(total) {
    var quantity = parseInt($('#my_select').val());
    var new_price = parseInt(quantity * total);
    $("input[class='total']").val(new_price); 

    $('select#my_select').change(function() {
    var quantity = parseInt($('#my_select').val());
    var new_price = parseInt(quantity * total);
    $("input[class='total']").val(new_price); 

    });
        }

    function remove_dropdowns(total) {
    var quantity = parseInt($('#my_select').val());
    var new_price = parseInt(quantity * total);
    $("input[class='total']").val(new_price); 

    $('select#my_select').change(function() {
    var quantity = parseInt($('#my_select').val());
    var new_price = parseInt(quantity * total);
    $("input[class='total']").val(new_price); 

    });
        }
 }); 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:47:25.300

你在重复 ids ( `myselect`)。如果您重复 id 并尝试按 id 选择，它只会选择第一个。

这是工作代码：

[http://jsfiddle.net/Gqzhq/10/](http://jsfiddle.net/Gqzhq/10/)

我更改`myselect`为一个类并传递了对当前复选框的引用。从那里您可以找到下一个最接近`.myselect`的值并使用该值。

# xml - XSLT - 如何有条件地计算节点？

> ID：13478926
> 
> 赞同：1
> 
> 时间：2012-11-20T17:41:19.540
> 
> 标签：xml, xslt, xpath, xslt-1.0

我一直在考虑这个问题，我很确定必须有一个基本的解决方案。

我正在尝试使用 XSLT 1.0 将 xml 文件转换为 XHTML，并且我希望有一个部分，对于每个玩家（XML 文件中的 fD:jogador），代码将查看他们的 @id 属性，然后检查目标元素及其目标子元素（fD:golos 和 fD:golo），并计算所有由@id 等于我们正在处理的玩家的玩家得分的目标。

我现在拥有的，是在匹配播放器的模板中，

```
<xsl:call-template name="calcgolos">
    <xsl:with-param name="id" select="@id"/>
</xsl:call-template> 
```

模板本身如下所示：

```
 <xsl:template name="calcgolos">
    <xsl:param name="id"/>
    <xsl:value-of select="count(//fD:golo/@marcador = $id)"/>
 </xsl:template> 
```

这只是每次都返回 0，这不是我想要的！

当我尝试在 Eclipse 的 XPath 处理器中输入此表达式时，将 $id 替换为实际的 id，在本例中为“POR_NANI”，它...爆炸了。但是，如果我在没有计数的情况下执行此操作，则会显示正确的元素，因此语法不会*太*错误。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:43:57.400

你想计算节点，而不是测试。尝试这个：

```
<xsl:value-of select="count(//fD:golo[@marcador = $id])"/> 
```

# internet-explorer - 故障排除错误“您的 Web 浏览器设置不允许您运行未签名的应用程序”但应用程序已签名

> ID：13478928
> 
> 赞同：3
> 
> 时间：2012-11-20T17:41:30.130
> 
> 标签：internet-explorer, clickonce

我的一位客户无法下载/执行我们的 ClickOnce 应用程序（我相当肯定它已签名）。我尝试让我的客户遵循[Clickonce 中的建议，“您的 Web 浏览器设置不允许您运行未签名的应用程序。！](https://stackoverflow.com/questions/4385878/clickonce-your-web-browser-settings-do-not-allow-you-to-run-unsigned-applicat)但他说该选项显示为灰色，可能是出于安全考虑。

我转到我的 IE 设置并确认我的浏览器不允许运行未签名的应用程序。

1.  如何确定我的应用程序已签名？我已经清除了 ClickOnce 缓存并再次下载了 ClickOnce 应用程序，我确实看到了我认为正确的“签名”
2.  假设应用程序已签名，我们如何解决此问题？我怀疑这与客户网络有关。他们是一个政府组织，所以我不会对某些事情被锁定感到惊讶。

> ==================================================== ==
> 
> 平台版本信息 Windows：6.1.7601.65536 (Win32NT) 公共语言运行时：4.0.30319.269 System.Deployment.dll：4.0.30319.1 (RTMRel.030319-0100) clr.dll：4.0.30319.269 (RTMGDR.030319-260.dll)df dll：4.0.30319.1 (RTMRel.030319-0100) dfshim.dll：4.0.31106.0 (Main.031106-0000) 来源部署网址：[http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application?t7ZqWrTkOp8xCKiP5%2f1vqG2JYPdRGxnhY%2fR5zb%2bBVDRiGg2afBaqInthrN1VxEcBFMhjr6QX%2fYMOBClnQ1X8AzBnVUeUcomt6xqm2cRv%2bs%2bWMu1dSX3SxhKs2ebeb%2fbzTS2GiU3fRqkq41Kz3RTRodFFpNc3S4dASyH9qFQ%2fzc2AhHM1DhUxiFKY5kJSjfk9k8UJEDMsRZaHSQ19Rg25gw%3d%3d](http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application?t7ZqWrTkOp8xCKiP5%2f1vqG2JYPdRGxnhY%2fR5zb%2bBVDRiGg2afBaqInthrN1VxEcBFMhjr6QX%2fYMOBClnQ1X8AzBnVUeUcomt6xqm2cRv%2bs%2bWMu1dSX3SxhKs2ebeb%2fbzTS2GiU3fRqkq41Kz3RTRodFFpNc3S4dASyH9qFQ%2fzc2AhHM1DhUxiFKY5kJSjfk9k8UJEDMsRZaHSQ19Rg25gw%3d%3d) Server : Microsoft-IIS/6.0 X-Powered-By : ASP.NET 部署提供程序网址：[http ://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application](http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application) 服务器 : Microsoft-IIS/6.0 X-Powered-By : ASP.NET 错误摘要 下面是错误摘要，这些错误的详细信息将在日志后面列出。* Activation of [http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application?t7ZqWrTkOp8xCKiP5%2f1vqG2JYPdRGxnhY%2fR5zb%2bBVDRiGg2afBaqInthrN1VxEcBFMhjr6QX%2fYMOBClnQ1X8AzBnVUeUcomt6xqm2cRv%2bs%2bWMu1dSX3SxhKs2ebeb%2fbzTS2GiU3fRqkq41Kz3RTRodFFpNc3S4dASyH9qFQ%2fzc2AhHM1DhUxiFKY5kJSjfk9k8UJEDMsRZaHSQ19Rg25gw%3d%3d](http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application?t7ZqWrTkOp8xCKiP5%2f1vqG2JYPdRGxnhY%2fR5zb%2bBVDRiGg2afBaqInthrN1VxEcBFMhjr6QX%2fYMOBClnQ1X8AzBnVUeUcomt6xqm2cRv%2bs%2bWMu1dSX3SxhKs2ebeb%2fbzTS2GiU3fRqkq41Kz3RTRodFFpNc3S4dASyH9qFQ%2fzc2AhHM1DhUxiFKY5kJSjfk9k8UJEDMsRZaHSQ19Rg25gw%3d%3d) 导致异常。检测到以下失败消息： + 您的 Web 浏览器设置不允许您运行未签名的应用程序。组件存储事务失败摘要未检测到事务错误。警告 此操作期间没有警告。OPERATION PROGRESS STATUS * [11/19/2012 12:07:02 PM] : Activation of [http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application?t7ZqWrTkOp8xCKiP5%2f1vqG2JYPdRGxnhY%2fR5zb%2bBVDRiGg2afBaqInthrN1VxEcBFMhjr6QX%2fYMOBClnQ1X8AzBnVUeUcomt6xqm2cRv%2bs%2bWMu1dSX3SxhKs2ebeb% 2fbzTS2GiU3fRqkq41Kz3RTRodFFpNc3S4dASyH9qFQ%2fzc2AhHM1DhUxiFKY5kJSjfk9k8UJEDMsRZaHSQ19Rg25gw%3d%3d](http://corebeta.expertchoice.com/TTA/TeamTimeAssistant.application?t7ZqWrTkOp8xCKiP5%2f1vqG2JYPdRGxnhY%2fR5zb%2bBVDRiGg2afBaqInthrN1VxEcBFMhjr6QX%2fYMOBClnQ1X8AzBnVUeUcomt6xqm2cRv%2bs%2bWMu1dSX3SxhKs2ebeb%2fbzTS2GiU3fRqkq41Kz3RTRodFFpNc3S4dASyH9qFQ%2fzc2AhHM1DhUxiFKY5kJSjfk9k8UJEDMsRZaHSQ19Rg25gw%3d%3d) 开始了。错误详细信息 在此操作期间检测到以下错误。* [11/19/2012 12:07:03 PM] System.Deployment.Application.InvalidDeploymentException (Manifest) - 您的 Web 浏览器设置不允许您运行未签名的应用程序。- 来源：System.Deployment - 堆栈跟踪：System.Deployment.Application.ApplicationActivator.BrowserSettings.Validate(String manifestPath) at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings浏览器设置，

# c# - 反射发射创建类实例

> ID：13478933
> 
> 赞同：4
> 
> 时间：2012-11-20T17:41:52.037
> 
> 标签：c#, reflection, reflection.emit, il

我想使用反射发射来创建具有任意构造函数参数的类的实例。这就是我的代码的样子：

```
public delegate object ObjectActivator(params object[] args);
static void Main(string[] args)
{
    var ao = new { ID = 10000, FName = "Sample", SName = "Name" };
    var t = ao.GetType();
    var info = t.GetConstructor(new Type[] { typeof(int), typeof(string), typeof(string) });
    var objActivatorEmit = GetActivatorEmit(info);
    var obj = createdActivatorEmit(4, "Foo", "Bar");
}
public static ObjectActivator GetActivatorEmit(ConstructorInfo ctor)
{
    ParameterInfo[] paramsInfo = ctor.GetParameters();
    DynamicMethod method = new DynamicMethod("CreateInstance", typeof(object), new Type[] { typeof(object[]) });
    ILGenerator gen = method.GetILGenerator();
    for (int i = 0; i < paramsInfo.Length; i++)
    {
        Type t = paramsInfo[i].ParameterType;
        gen.Emit(OpCodes.Ldarg_0); // Push array (method argument)
        gen.Emit(OpCodes.Ldc_I4, i); // Push i
        gen.Emit(OpCodes.Ldelem_Ref); // Pop array and i and push array[i]
        if( t.IsValueType )
        {
            gen.Emit( OpCodes.Unbox_Any, t ); // Cast to Type t
        }
        else
        {
            gen.Emit( OpCodes.Castclass, t ); //Cast to Type t
        }
    }
    gen.Emit(OpCodes.Newobj, ctor);
    gen.Emit(OpCodes.Ret);
    return (ObjectActivator)method.CreateDelegate(typeof(ObjectActivator));
} 
```

代码失败并`MethodAccessException`显示错误消息`Attempt by method 'DynamicClass.CreateInstance(System.Object[])' to access method '<>f__AnonymousType1'3<System.Int32,System.__Canon,System.__Canon>..ctor(Int32, System.__Canon, System.__Canon)' failed.`。

出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T18:39:23.323

错误消息表明匿名类型的构造函数不是公共的。我认为匿名类型构造函数总是`internal`，因此您需要使用不同的`DynamicMethod`构造函数来跳过可见性检查：

```
DynamicMethod method = new DynamicMethod("CreateInstance", typeof(object), new Type[] { typeof(object[]) }, true); 
```

请注意，这在部分信任方案中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T18:03:49.313

你不需要使用 Reflection.Emit，我建议你不要。除非您知道自己在做什么，或者有一些其他 API 无法满足的特殊需求，否则最好远离。

有 3 种选择更容易正确。一探究竟：

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;

public static class App
{
    public delegate object ObjectActivator(params object[] args);

    public static void Main(string[] args)
    {
        var ao = new { ID = 10000, FName = "Sample", SName = "Name" };
        var t = ao.GetType();
        var info = t.GetConstructor(new[] { typeof(int), typeof(string), typeof(string) });
        if (info == null)
        {
            throw new Exception("Info is null");
        }

        // This uses System.Linq.Expressions to create the delegate
        var activator = GetActivator(info);
        var newObj1 = activator(4, "Foo", "Bar");

        // This invokes the ConstructorInfo directly
        var newObj2 = info.Invoke(new object[] { 4, "Foo", "Bar" });

        // This uses System.Activator to dynamically create the instance
        var newObj3 = Activator.CreateInstance(t, 4, "Foo", "Bar");
    }

    // This uses System.Linq.Expressions to generate a delegate
    public static ObjectActivator GetActivator(ConstructorInfo ctor)
    {
        var args = Expression.Parameter(typeof(object[]), "args");
        var parameters = ctor.GetParameters().Select((parameter, index) => Expression.Convert(Expression.ArrayIndex(args, Expression.Constant(index)), parameter.ParameterType));
        return Expression.Lambda<ObjectActivator>(Expression.New(ctor, parameters), args).Compile();
    }
} 
```

[注意：来自这篇文章](http://rogeralsing.com/2008/02/28/linq-expressions-creating-objects/)`GetActivator`的方法的灵感

# windows-7-x64 - 适用于 Windows 7（64 位）的 GW-Basic

> ID：13478940
> 
> 赞同：0
> 
> 时间：2012-11-20T17:42:13.723
> 
> 标签：windows-7-x64, gw-basic

我正在寻找适用于 Windows 7（64 位）的 GW-Basic，但找不到兼容版本。

经过搜索，我知道了用于 GW-Basic 程序的 QBasic。

请帮我设置GW-Basic的环境。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-21T15:40:36.957

看看[PC-BASIC](https://sourceforge.net/projects/pcbasic/)。它是 GW-BASIC 的免费实现，可在 Windows 7（以及 Linux 和 Mac）上本地运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T19:02:21.950

您可以在模拟器中运行旧的遗留 (DOS) 应用程序，如 GW basic。我认为最简单的方法是使用[DosBox](http://www.dosbox.com/)。一些更复杂的 - 在 VMWare 或 VirualPC 等虚拟机上安装 DOS。Windows 7 中还有 XPMode，它也可以运行 DOS 应用程序。

# c++ - openCV 更改颜色后不会复制到图像（opencv 和 c++）

> ID：13478941
> 
> 赞同：1
> 
> 时间：2012-11-20T17:42:19.953
> 
> 标签：c++, opencv

我是opencv的初学者。我有这个任务：

1.  制作新图像

2.  在 0,0 处放入某个图像

3.  将特定图像转换为灰度

4.  将灰度图像放在它旁边（在 300, 0 处）

这就是我所做的。我有一个具有构造函数和所有函数的类图像处理程序。

```
cv::Mat m_image 
```

是成员字段。

构造新图像的构造函数：

```
imagehandler::imagehandler(int width, int height)
: m_image(width, height, CV_8UC3){

} 
```

从文件中读取图像的构造函数：

```
imagehandler::imagehandler(const std::string& fileName)
: m_image(imread(fileName, CV_LOAD_IMAGE_COLOR))
{
if(!m_image.data)
{
    cout << "Failed loading " << fileName << endl;
}

} 
```

这是转换为灰度的函数：

```
void imagehandler::rgb_to_greyscale(){

cv::cvtColor(m_image, m_image, CV_RGB2GRAY);

} 
```

这是复制粘贴图像的功能：

```
//paste image to dst image at xloc,yloc
void imagehandler::copy_paste_image(imagehandler& dst, int xLoc, int yLoc){

cv::Rect roi(xLoc, yLoc, m_image.size().width, m_image.size().height);
cv::Mat imageROI (dst.m_image, roi);

m_image.copyTo(imageROI);
 } 
```

现在，总的来说，这就是我所做的：

```
imagehandler CSImg(600, 320); //declare the new image
imagehandler myimg(filepath);

myimg.copy_paste_image(CSImg, 0, 0);
CSImg.displayImage(); //this one showed the full colour image correctly
myimg.rgb_to_greyscale();
myimg.displayImage(); //this shows the colour image in GRAY scale, works correctly
myimg.copy_paste_image(CSImg, 300, 0);
CSImg.displayImage(); // this one shows only the full colour image at 0,0 and does NOT show the greyscaled one at ALL! 
```

似乎是什么问题？我一直在为这个挠头好几个小时！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:58:22.497

您有以下问题：

在构造函数而不是

```
m_image(width, height, CV_8UC3){} 
```

你应该写

```
{  
  m_image.create(width, height, CV_8UC3);  
} 
```

相反，不要担心默认构造。

评论：

*   我不确定 cvtColor 与输入和输出相同的 Mat 是否正常工作，我认为将其更改为更安全`Mat temp; cvtColor(m_image, temp, CV_...); m_image=temp;`
*   `m_image.empty()`您可以通过调用not 来检查图像是否为空`!m_image.data`。否则你无法确定。由于引用计数的资源管理，指针 m_image.data 也可能过时。
*   从您之前的问题中，我看到了一个自定义析构函数：您不需要那个，不用担心。

# web-services - 带简历的下载和不带简历的下载有什么区别？

> ID：13478944
> 
> 赞同：1
> 
> 时间：2012-11-20T17:42:34.243
> 
> 标签：web-services, networking, network-programming, network-protocols

我需要一个关于带简历下载和不带简历下载的简短说明。

服务器上的这些文件有什么区别？

原因是关于协议、ip 还是文件类型？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:48:06.087

带恢复下载只是意味着可以停止包含附件的字节流，并且接收到的任何内容都将保存在本地。当下载恢复时，客户端要求服务器在指定索引处启动流以下载流的其余部分。如果没有恢复，客户端将不得不下载整个文件，重新下载他们之前保存的任何数据。

这种交互发生在网络服务器级别，与特定的通信/网络协议、文件类型等无关。只是服务和客户端有一种交互方式，允许部分下载并恢复。

这是一篇关于如何在 ASP.net 1.1 中使用简历进行部分下载的有点过时的文章，只是为了给你一些它的味道：http: [//www.devx.com/dotnet/Article/22533](http://www.devx.com/dotnet/Article/22533)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:45:15.210

> 需要关于带恢复下载和不带恢复下载的简短说明。

使用resume，您可以恢复。没有它，你不能。

> 服务器上的这些文件有什么不同。

什么文件？什么服务器？带/不带恢复的下载根本不会影响文件，它会影响下载过程。

这几乎不是一个真正的问题。这只是关于词的含义，这是不言而喻的。

# java - Eclipse 4.2 共享插件

> ID：13478945
> 
> 赞同：1
> 
> 时间：2012-11-20T17:42:37.810
> 
> 标签：java, eclipse, eclipse-plugin, bundle, p2

我一直在寻找如何做到这一点，在最近的历史中，这似乎已经改变了多次，目前没有关于如何做到这一点的方向。

我在网络（开发人员计算机）上管理一堆 Eclipse 安装。现在它们是独立安装（都在本地安装了相同的插件）。

我希望能够在所有这些机器上安装基本 Eclipse，并让它们中的每一个都到网络上的一个中心位置来获取它们的插件。这样我就可以在一个位置添加/更新/删除插件，而不是多台单独的计算机。

谁能告诉我如何使用最新版本的 Eclipse 做到这一点。我正在使用 Eclipse IDE for Java Devlopers (Juno 4.2) [http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1)

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T03:54:20.923

您面临的问题是[P2 当前的弱点，](http://wiki.eclipse.org/Equinox/p2/Shared_Install)希望很快得到解决。目前，没有好的解决方案。

期间的选项：

*   插件和功能在其中携带它们的部署信息。在构建插件和功能时，可以添加[安装程序的“建议” 。](http://www.toedter.com/blog/?p=79)此建议可以更改将部署到 P2 系统的更新站点。此选项要求您创建一个包含*所需*所有内容的最外层包，并更改包含的所有更新站点以指向您的部署位置。这需要您更改分配单位。很多辛苦的工作。

*   使用[商业 Nexus Pro P2 代理服务](http://www.sonatype.com/books/nexus-book/reference/_proxy_p2_repositories.html)。该服务是一个 HTTP 代理服务器，它拦截对外界的请求，缓存调用并在本地应答。这将允许您通过阻止对外部的呼叫来限制用户可以安装的内容，但需要花钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:50:08.983

从计算机共享一个文件夹到所有机器并在该文件夹上创建工作空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:55:50.277

创建一个网络文件夹并在那里安装 eclipse 和所有插件。团队可以映射到网络驱动器并通过标准 eclipse 和插件复制到本地驱动器，并且每个主体都获得相同的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T18:16:15.030

[在Yoxos](https://yoxos.eclipsesource.com)中创建配置文件并将启动器分发到各个计算机。

编辑

公开资料是免费的，应该足够了，除非您

*   想要分发私有功能
*   想节省带宽

编辑

我读了一点你提到的 .eclipseextension 。[您可以通过dropins](http://wiki.eclipse.org/Equinox_p2_Getting_Started#Dropins)文件夹在 p2 中实现相同的功能。

通过网络共享服务器安装的 dropins 文件夹。将客户端安装的 dropins 文件夹与共享文件夹同步。

# three.js - 旋转科拉达模型

> ID：13478951
> 
> 赞同：1
> 
> 时间：2012-11-20T17:43:09.790
> 
> 标签：three.js, collada

我有一个奶牛的 collada 模型，我想用鼠标围绕该模型旋转。我已经搜索了很多解决方案，但没有一个适用于我的代码。

下面是代码。

我的问题是：我想用鼠标旋转模型而不是自动旋转

```
 <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=2.0, maximum-scale=2.0">
    <style>
        body {
            font-family: Monospace;
            background-color: #676578;
            margin: 0px;
            overflow: hidden;
        }

        #info {
            color: #000000;
            position: absolute;
            top: 10px;
            width: 100%;
            text-align: center;
            z-index: 100;
            display:block;

        }

        a { color: skyblue }
    </style>
</head>
<body>

    <script src="js/three.min.js"></script>
    <script src="js/ColladaLoader.js"></script>
    <script src="js/Detector.js"></script>
    <script src="js/stats.min.js"></script>
    <script src="js/TrackballControls.js"></script>

    <script>
        //als de browser geen open gl ondersteunt, geeft ie een message
        if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

        var container, stats;

        var camera, scene, renderer, objects;
        var particleLight, pointLight;
        var dae, skin;

        var loader = new THREE.ColladaLoader();
        loader.options.convertUpAxis = true;
        loader.load( './models/collada/monster/monster.dae', function ( collada ) {

            dae = collada.scene;
            skin = collada.skins[ 0 ];
            //scale van de koe, scaled de x y en z as gelijk
            dae.scale.x = dae.scale.y = dae.scale.z = 0.006;
            dae.updateMatrix();

            init();
            animate();

        } );

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
            camera.position.set( 0, 0, 3 );

            scene = new THREE.Scene();

            // Grid

            /*/
            //grid grote
            var size = 0, step = 1;

            var geometry = new THREE.Geometry();
            var material = new THREE.LineBasicMaterial( { color: 0xcccccc, opacity: 0.2 } );

            for ( var i = - size; i <= size; i += step ) {

                geometry.vertices.push( new THREE.Vector3( - size, - 0.04, i ) );
                geometry.vertices.push( new THREE.Vector3(   size, - 0.04, i ) );

                geometry.vertices.push( new THREE.Vector3( i, - 0.04, - size ) );
                geometry.vertices.push( new THREE.Vector3( i, - 0.04,   size ) );

            }

            var line = new THREE.Line( geometry, material, THREE.LinePieces );
            scene.add( line );/*/

            // Add the COLLADA

            scene.add( dae );

            particleLight = new THREE.Mesh( new THREE.SphereGeometry( 4, 8, 8 ), new THREE.MeshBasicMaterial( { color: 0xffffff } ) );
            scene.add( particleLight );

            // Lights

            scene.add( new THREE.AmbientLight( 0xcccccc ) );
            //hoeveelheid licht
            var directionalLight = new THREE.DirectionalLight(/*Math.random() * 0xffffff*/0xe5e5e4 );
            directionalLight.position.x = Math.random() - 10;
            directionalLight.position.y = Math.random() - 10;
            directionalLight.position.z = Math.random() - 10;
            directionalLight.position.normalize();
            scene.add( directionalLight );

            pointLight = new THREE.PointLight( 0xffffff, 4 );
            pointLight.position = particleLight.position;
            scene.add( pointLight );

            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );

            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            //

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        //

        var t = 0;
        var clock = new THREE.Clock();

        function animate() {

            var delta = clock.getDelta();

            requestAnimationFrame( animate );

            if ( t > 0 ) t = 0;

            if ( skin ) {

                // guess this can be done smarter...

                // (Indeed, there are way more frames than needed and interpolation is not used at all
                //  could be something like - one morph per each skinning pose keyframe, or even less,
                //  animation could be resampled, morphing interpolation handles sparse keyframes quite well.
                //  Simple animation cycles like this look ok with 10-15 frames instead of 100 ;)

                for ( var i = 0; i < skin.morphTargetInfluences.length; i++ ) {

                    skin.morphTargetInfluences[ i ] = 10;

                }

            }

            render();
            stats.update();

        }

        function render() {
            //snelheid van het draaien
            var timer = Date.now() * 0.0005;
            //camera positie op x
            camera.position.x = Math.cos( timer ) * 15;
            camera.position.y = 2;
            // camera positie op z
            camera.position.z = Math.sin( timer ) * 10;

            camera.lookAt( scene.position );
            // light positie
            particleLight.position.x = Math.sin( timer * 0 ) * 3009;
            particleLight.position.y = Math.cos( timer * 0 ) * 4000;
            particleLight.position.z = Math.cos( timer * 0 ) * 3009;

            renderer.render( scene, camera );

        }

        //nieuw

    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T13:45:00.900

我猜你想要类似[http://threejs.org/examples/misc_controls_trackball.html](http://threejs.org/examples/misc_controls_trackball.html)的东西？

重要的位是

```
controls = new THREE.TrackballControls( camera ); // in the init function 
```

和

```
controls.update(); // in the animate function 
```

如果它没有产生您想要的，您可能必须调整控件属性，就像在示例中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T07:16:41.213

我对你的情况做了类似的事情。我使用**OrbitControls**来做这些事情。您可以使用 Three.js 提供的 OrbitControls。OrbitControls 允许您对模型进行旋转、缩放和平移。

请访问此链接[https://github.com/mrdoob/three.js/](https://github.com/mrdoob/three.js/)以获取源代码。OrbitControls.js 位于**examples/js/controls**中。

您接下来需要做的是：

*   导入 OrbitControls.js

> `<script src="lib/OrbitControls.js"></script>`

*   在创建相机和渲染器，并将 domelement 附加到渲染器之后，您需要创建新的 OrbitControls 对象以及相机和 renderer.domelement 参数。

> var controls = new THREE.OrbitControls(camera, renderer.domElement);

*   更新渲染函数中的控件。请将此代码放在`controls.update();`后面`renderer.render( scene, camera );`

# sql - 组合 SQL 查询的结果并取所有组合

> ID：13478954
> 
> 赞同：0
> 
> 时间：2012-11-20T17:43:20.393
> 
> 标签：sql, sql-server

我在 SQL Server 中有一个问题。我有下表：

```
ROUTES = the route ID
STATIONS = the station ID
ORDER = the order the train pass from the stations
STOPS? = if the train stops at this station then is equal to 1 otherwise 0 
```

样本数据：

```
-----------------------------------------------------
ROUTES      STATIONS    ORDER       STOPS?
-----------------------------------------------------
R1          S1          1           1
R1          S2          2           1
R1          S3          3           1
R1          S4          4           1
R1          S5          5           1
R2          S2          1           1
R2          S3          2           1
R2          S4          3           1
R3          S1          1           1
R3          S2          2           1
R3          S7          3           1
R3          S4          4           1
R3          S5          5           1
R3          S6          6           1
R4          S1          1           1
R4          S2          2           1
R4          S3          3           0
R4          S4          4           1
R5          S2          1           1
R5          S3          2           0
R5          S4          3           1
R6          S3          1           1
R6          S4          2           0
R6          S5          3           0
R6          S6          4           1
R7          S2          1           1
R7          S3          2           0
R7          S4          3           0
R7          S5          4           1 
```

所以得出结论，我们有以下路线：

```
R1: S1-S2-S3-S4-S5
R2: S2-S3-S4
R3: S1-S2-S7-S4-S5-S6
R4: S1-S2-S3-S4
R5: S2-S3-S4
R6: S3-S4-S5-S6
R7: S2-S3-S4-S5 
```

**假设 S2 和 S4 是连接站**

这意味着如果一条路线上的火车停在那里（STOPS = 1），乘客可以下车并从另一条路线乘坐另一辆火车

所以我们有一张表提到中转站

```
conn_stations
--------------
S2
S4 
```

我的问题是如何获得所有可能的路线组合，例如从 S1 站出发并到达 S5 站。乘客可以根据上面的数据改变路线，我们应该得到以下结果（路线）：

```
R1:     S1-S2-S3-S4-S5
R3:     S1-S2-S7-S4-S5
temp1:  S1-S2(from R1)-S7-S4-S5(from R3)
temp2:  S1-S2(from R3)-S3-S4(from R1)-S5(from R3)
temp3:  S1-S2-S3-S4(from R1)-S5(from R3)
e.t.c 
```

我希望你明白我在问什么。

如果有帮助，我有一张表，上面写着两个车站之间的距离，这也表明了哪些车站是连接的

```
Station A   Station B   Distance
-------------------------------------
S1          S2          5
S2          S3          1
S2          S7          8
S3          S4          15
S4          S5          16
S5          S6          25
S7          S4          10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:22:29.847

我认为，如果您不必包括连接站和终点站之间的所有中间站，那会更容易，但这是我为直达路线所做的：

```
select sroute, sstation, sorder, eroute, estation, eorder
from
 (select route as sroute, station as sstation, order as sorder
  from path
  where station = "s1" and stops = 1) pstart inner join
 (select route as eroute, station as estation, order as eorder
  from path
  where station = "s5" and stops = 1) pend on
 pstart.sroute = pend.eroute) direct 
```

并通过一个连接站的路线：

```
SELECT sroute, sstation, sorder, 
        croute, cstation, corder,
        oroute, ostation, oorder,
        p.route , p.station, p.ORDER
FROM
    (SELECT sroute, sstation, sorder, 
                     croute, cstation, corder, 
                     p.route AS oroute, p.station AS ostation, p.ORDER AS oorder
    FROM
         (SELECT sroute, sstation, sorder, 
                 p.route AS croute, p.station AS cstation, p.ORDER AS corder
          FROM
              (SELECT route AS sroute, station AS sstation, ORDER AS sorder
               FROM path
               WHERE station = "s1" AND stops = 1
               ) pstart INNER JOIN
               path p ON 
               pstart.route = p.route INNER JOIN 
               conn_stations c ON 
               p.station = c.station
          WHERE p.stops = 1
          ) conn INNER JOIN 
          path p ON 
          conn.cstation = p.station
          WHERE p.stops = 1 AND p.route <> conn.route 
      ) conn_off INNER JOIN
        path p ON 
        conn_off.oroute = p.route
WHERE p.stops = 1 AND p.station = "s5" 
```

但是连接站的数量会反映在SQL中，你最好使用编程工具。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:35:39.087

我认为在您的示例数据中有 39 条从`S1`to的路线`S5`（如果我的查询正确的话）。我不一定相信 SQL 是这项工作的正确工具（特别是如果根据评论，路由变成双向的）。

查询：

```
declare @StartStation char(2)
declare @EndStation char(2)
select @StartStation = 'S1'
select @EndStation = 'S5'

;With PartialRoutes as (
    select Route,Station,CONVERT(varchar(max),Station) as CurrentPath,RouteOrder,1 as HasTransferred,CONVERT(varchar(max),Route) as RoutesTaken,Stop
    from
        @Routes r
    where
        r.Station = @StartStation and r.Stop = 1
    union all
    --Continue on current route
    select pr.Route,r.Station,pr.CurrentPath + '-' + r.Station,r.RouteOrder,0,RoutesTaken,r.Stop
    from
        PartialRoutes pr
            inner join
        @Routes r
            on
                pr.Route = r.Route and
                pr.RouteOrder = r.RouteOrder - 1
    union all
    --Transfers
    select r.Route,r.Station,pr.CurrentPath,r.RouteOrder,1,RoutesTaken + '-' + r.Station + '(' + pr.Route + ',' + r.Route + ')',r.Stop
    from
        PartialRoutes pr
            inner join
        @Connections c
            on
                pr.Station = c.Station
            inner join
        @Routes r
            on
                pr.Route != r.Route and
                pr.Station = r.Station
    where
        pr.HasTransferred = 0 --Prevents us transferring multiple times in a single station
            and r.Stop = 1
)
select * from PartialRoutes where Station = @EndStation and Stop=1 option (MAXRECURSION 0) 
```

结果：

```
Route Station CurrentPath         RouteOrder  HasTransferred RoutesTaken
----- ------- ------------------- ----------- -------------- --------------------------
R7    S5      S1-S2-S3-S4-S5      4           0              R4-S2(R4,R7)
R3    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R7)-S4(R7,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R7)-S4(R7,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R5)-S4(R5,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R5)-S4(R5,R1)
R3    S5      S1-S2-S7-S4-S5      5           0              R4-S2(R4,R3)
R1    S5      S1-S2-S7-S4-S5      5           0              R4-S2(R4,R3)-S4(R3,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R2)-S4(R2,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R2)-S4(R2,R1)
R1    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R4-S2(R4,R1)-S4(R1,R3)
R3    S5      S1-S2-S3-S4-S5      5           0              R4-S4(R4,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R4-S4(R4,R1)
R7    S5      S1-S2-S3-S4-S5      4           0              R3-S2(R3,R7)
R3    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R7)-S4(R7,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R7)-S4(R7,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R5)-S4(R5,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R5)-S4(R5,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R4)-S4(R4,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R4)-S4(R4,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R2)-S4(R2,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R2)-S4(R2,R1)
R1    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R3-S2(R3,R1)-S4(R1,R3)
R3    S5      S1-S2-S7-S4-S5      5           0              R3
R1    S5      S1-S2-S7-S4-S5      5           0              R3-S4(R3,R1)
R7    S5      S1-S2-S3-S4-S5      4           0              R1-S2(R1,R7)
R3    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R7)-S4(R7,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R7)-S4(R7,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R5)-S4(R5,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R5)-S4(R5,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R4)-S4(R4,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R4)-S4(R4,R1)
R3    S5      S1-S2-S7-S4-S5      5           0              R1-S2(R1,R3)
R1    S5      S1-S2-S7-S4-S5      5           0              R1-S2(R1,R3)-S4(R3,R1)
R3    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R2)-S4(R2,R3)
R1    S5      S1-S2-S3-S4-S5      5           0              R1-S2(R1,R2)-S4(R2,R1)
R1    S5      S1-S2-S3-S4-S5      5           0              R1
R3    S5      S1-S2-S3-S4-S5      5           0              R1-S4(R1,R3) 
```

我在末尾添加了一个列，显示了遵循的路线，例如`R4-S2(R4,R7)-S4(R7,R6)`，表示他们从 route 开始`R4`，然后在`S2`他们转移到 route `R7`，然后在`S4`他们转移到 route `R6`。

希望您可以使用此查询并根据需要对其进行修改（即，我仍然不知道您问题中最终表格的相关性）。

**编辑**我在火车需要到达`Stop`目的地车站的查询中添加了最后一个条件。我不确定这是否是一项要求，但无论如何它不会影响`S1`结果`S5`。取回来很容易。

* * *

基于此数据设置：

```
declare @Routes table (Route char(2) not null, Station char(2) not null,RouteOrder int not null,Stop bit not null)
insert into @Routes (Route,Station,RouteOrder,Stop) values
('R1','S1',1,1),('R1','S2',2,1),('R1','S3',3,1),('R1','S4',4,1),('R1','S5',5,1),
('R2','S2',1,1),('R2','S3',2,1),('R2','S4',3,1),
('R3','S1',1,1),('R3','S2',2,1),('R3','S7',3,1),('R3','S4',4,1),('R3','S5',5,1),('R3','S6',6,1),
('R4','S1',1,1),('R4','S2',2,1),('R4','S3',3,0),('R4','S4',4,1),
('R5','S2',1,1),('R5','S3',2,0),('R5','S4',3,1),
('R6','S3',1,1),('R6','S4',2,0),('R6','S5',3,0),('R6','S6',4,1),
('R7','S2',1,1),('R7','S3',2,0),('R7','S4',3,0),('R7','S5',4,1)

declare @Connections table (Station char(2) not null)
insert into @Connections (Station) values ('S2'),('S4') 
```

# java - 为什么我的代码没有打印出 txt 文件的所有行？

> ID：13478955
> 
> 赞同：0
> 
> 时间：2012-11-20T17:43:26.250
> 
> 标签：java

所以，我有这段代码应该从“Questions.txt”中读回文本并将其显示在 JTextArea 中，并带有保存任何编辑的选项，但它只读回最后一行。它出什么问题了？

```
package secondgui;

public class MainGUI {
public static void main (String [] args) {
    SecondGUI phillip = new SecondGUI(); 
    phillip.repaint();

}
}

 package secondgui;

 import java.awt.event.*;
 import java.io.FileWriter;
 import java.io.IOException;
 import java.io.PrintWriter;
 import java.util.Scanner;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 import javax.swing.*;

 public class SecondGUI extends JFrame implements ActionListener {

/**
 * @param args the command line arguments
 */
private JButton save = new JButton("Save Edits");
private JTextArea edit = new JTextArea();

public SecondGUI() {
    this.setVisible(true);
    this.setSize(600, 600);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);

    JPanel panel = new JPanel();
    panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));
    this.add(panel);

    JLabel label = new JLabel("Please edit the question(s) below"
            + " as you see fit");

    panel.add(save);

    save.addActionListener(this);

    panel.add(label);
    edit.setLineWrap(true);

    try { 
        Scanner b = new readFile().openFile();
        while (b.hasNextLine()) {
            edit.setText(b.nextLine() + "\n");
        }
    } catch (Exception e) {}

    JScrollPane scrollyBar = new JScrollPane(edit);
    scrollyBar.setBounds(150, 150, 250, 100);
    scrollyBar.setSize(300, 300);

    panel.add(scrollyBar);
    this.repaint();
  }

  @Override
  public void actionPerformed(ActionEvent e) {
    if (e.getSource() == save) {
        PrintWriter out;
        FileWriter outFile;
        try {
            outFile = new FileWriter("Questions.txt");
            out = new PrintWriter(outFile);
            out.println(edit.getText());
            out.close();
            outFile.close();
        } catch (IOException ex) {
            Logger.getLogger(SecondGUI.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

 }
 }

 package secondgui;

import java.io.*;
import java.util.*;

public class readFile {

private Scanner x = new Scanner(System.in);

public Scanner openFile() {
    try {
        x = new Scanner(new File("Questions.txt"));

    } catch (Exception e) {
        System.out.println("Could not find file");

    }
    return x;
}

public void readFile() {
    while (x.hasNext()) {
        x.next();
    }
}

public void closeFile() {
    x.close();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:46:55.373

违规行是：`edit.setText(b.nextLine() + "\n");` 您应该附加下一行，而不是设置文本。如果我没记错的话，有一种`edit.append()`方法可以使用。

查看[JavaDocs](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html)以获取有关`JTextArea`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:50:02.547

不管你的最后一个问题是什么，我认为你的`readfile()`机制充其量是有问题的。这：

```
 private Scanner x = new Scanner(System.in);
 try {
        x = new Scanner(new File("Questions.txt"));

    } catch (Exception e) {
        System.out.println("Could not find file");
    } 
```

看起来很狡猾。如果遇到错误，扫描仪默认使用标准输入。还有这个：

```
public void readFile() {
    while (x.hasNext()) {
        x.next();
    }
} 
```

似乎只是迭代文件而不做任何事情。我会阅读[有关阅读文件的教程](http://docs.oracle.com/javase/tutorial/essential/io/file.html)，并且（至少目前）如果其中任何一个失败，则抛出显式异常。

# c# - SQLite 与 LINQ 集成到 Visual Studio 2010 Express C#

> ID：13478957
> 
> 赞同：2
> 
> 时间：2012-11-20T17:43:29.223
> 
> 标签：c#, linq, sqlite

我有一个最初`XML`用作数据源的项目。我现在正在重构代码以使用 SQLite ( `System.Data.SQLite`) 数据源。我找到了许多展示如何生成 SQL 查询的示例，但我更喜欢使用 LINQ，因为我更熟悉这种方法。

我最初使用带有 LINQ 表达式的 LINQpad 来测试我的 LINQ to Objects 查询。在 LINQpad 中，我创建了与数据库的连接以及基本模型信息。然后我像这样查询数据库：

```
var site = (from s in siteinfo
            where s.site_name == "some name"
            select new Site
            {
              ID = s.id,
              State = s.state,
              City = s.city,
              ...
            }
           ); 
```

LINQpad 查询识别我的数据库中的表和列，我能够生成我想要的对象。

移至 VS 2010 Express 我添加了`System.Data.SQLite`和`System.Data.SQLite.Linq`引用。然后我在数据源窗格中添加了到我的数据库的连接，其中包括文件`connectionString`中的a `app.config`。

**问题**：应该将此连接作为数据集（我当前的方法）还是实体数据模型添加到我的项目中？我都试过了，但都没有回答下面的问题。

当我尝试使用 VS 从上面重新创建 LINQpad 查询时，智能感知没有给我选择特定表的选项。相反，我有`sitedata.siteinfoDataTable`其他表的选项和类似选项。例如：

```
var site = (from s in sitedataset.siteinfoDataTable
            where s.site_name == "some name"
            select new Site
            {
              ID = s.id,
              State = s.state,
              City = s.city,
              ...
            }
           ); 
```

我在参考中收到以下错误`sitedataset.siteinfoDataTable`：

`Could not find an implementation of the query pattern for source type 'sitedataset.siteinfoDataTable'. 'Where' not found. Are you missing a reference to 'System.Core.dll' or a using directive for 'System.Linq'?`

我的项目确实引用了`Core.dll`并且我有一个`using`针对`System.Linq`.

我还尝试从数据集中查询不同的状态。例如：

```
var states = (from s in sitedataset.siteinfoDataTable
              select s.state).Distinct(); 
```

该`select`语句产生以下错误：

`Cannot convert lambda expression to type 'string' because it is not a delegate type`

**问题**：使用 VS，我如何针对 SQLite 数据库编写 LINQ 查询？VS 中如何识别该数据库模式？

任何帮助表示赞赏，谢谢！

# php - Mysqli 查询结果问题

> ID：13478959
> 
> 赞同：0
> 
> 时间：2012-11-20T17:43:44.907
> 
> 标签：php, mysql, mysqli

我正在尝试使用 mysqli 方法制作登录表单。我没有收到任何错误，但在这两种情况下（正确或不正确的身份验证）我都得到了 IF 条件结果的第二部分！**“你没有权限！。”**

```
<?php
include_once('db.php');
$eMail = mysql_real_escape_string($_POST["eMail"]);
$passWord = mysql_real_escape_string($_POST["psword"]);
$query  = "SELECT count(*) FROM users WHERE (email='$eMail' AND pass='$passWord')";
if( $query > 0 ) {
echo "You are allowed.";
}
else{
echo "You are not allowed!.";
}
$mysqli->close();
?> 
```

我也将 if 条件改为以下

```
if( $mysqli->query > 0 ){} 
```

我有一个名为 users 的表和两列（email，pass），其中包含用户的电子邮件和密码。现在你能告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:56:12.633

出于某种原因，您正在使用 mysql 和 mysqli 函数。这应该更新。这也是假设您的变量`$mysqli`包含有效的 mysqli 数据库连接：

```
<?php
include_once('db.php');
$eMail = mysqli_real_escape_string($mysqli,$_POST["eMail"]);
$passWord = mysqli_real_escape_string($mysqli,$_POST["psword"]);
$query  = $mysqli->query("SELECT count(*) FROM users WHERE (email='$eMail' AND pass='$passWord') LIMIT 1");
if( $mysqli->num_rows($query) > 0 ) {
    echo "You are allowed.";
}else{
    echo "You are not allowed!.";
}
mysqli_free_result($query);
$mysqli->close();?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:07:09.747

不鼓励使用 mysql_* 扩展来支持`mysqli`和/或`pdo`函数。

您的代码失败，因为没有调用该`mysql_query`函数，因此在您的代码的这一行中：

```
$query > 0 
```

您所做的就是验证您的 String 是否大于 0，这就是为什么您总是得到错误结果的原因。

我已经从面向对象的登录方法改编为（大部分）程序登录方法。

在下面查看通过将参数绑定到准备好的语句来处理用户输入的不同方法：

```
function login($email, $password, $mysqli){
    if($login_stmt = $mysqli->prepare("SELECT Pass,Salt from Users WHERE Email = ? LIMIT 1")){
        $login_stmt->bind_param('s',$email);
        //The line above prevents SQL Injection
        $login_stmt->execute();
        $login_stmt->store_result();

        $rows = $login_stmt->num_rows;

        $login_stmt->bind_result($db_pass,$salt); //Stores the result in the $db_pass and $salt variables
        $login_stmt->fetch();
        $password = hash('sha512',$password.$salt); //This is a method I'm using to encrypt using sha512 encription
        if($rows==1){//The user exists
            if($db_pass==$password){
            //User logged in, do your stuff here
                return true;
            } else { 
                //password not correct
                return false;
            }
        } else{
            return false; //no user
        }
     } else {
         //Prepared statement failed
         return false;
    }
} 
```

这里的主要区别是准备好的语句如何`bind_param`防止代码上的 SQL 注入。

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:50:56.133

首先连接到数据库，然后使用执行查询`mysql_query($query);`

```
$result = mysql_query($query);
if (mysql_num_rows($result) > 0) {
} else {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T17:45:58.433

您忘记运行查询。见[`mysql_query()`](http://us3.php.net/manual/en/function.mysql-query.php)。

# java - 使用 javacv 时如何将 imagedata() 转换为字符数组？

> ID：13478962
> 
> 赞同：0
> 
> 时间：2012-11-20T17:44:00.500
> 
> 标签：java, javacv

我的代码如下：

```
int compare(IplImage img1, IplImage img2)
{
    int c=img1.nChannels();
    int h= img1.height(); 
    int w= img1.width(); 
    int step= img1.widthStep();
    int step2=img2.widthStep();
    int nc=w*c;
    int i,j,a=0;
    char data[]= (char)img1.imageData();
    char data1[]= (img2.imageData());
    if(step==step2)
        for(i=0;i<=h;i++)
        {
            for(j=0;j<nc;j+=c)
            {
                if((int)(data[j]+data[j+1]+data[j+2])==0  &&  (int)(data1[j]+data1[j+1]+data1[j+2])==0)
                    a++;
        }
    … 
```

我想`imagedata`返回一个 char 数组，但我得到了一个`com.google.javacpp.bytepointer`类型。我怎样才能做到这一点？

# python - 如何从子目录/子文件夹导入？

> ID：13478965
> 
> 赞同：0
> 
> 时间：2012-11-20T17:44:07.173
> 
> 标签：python

从 main.py，我想从后端文件夹导入一个文件

WebAppName/main.py WebAppName/backend/handlers.py

如何将其指定为导入语句

我知道从同一个文件夹导入只是导入处理程序

但这是一个子目录，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:46:09.540

您需要`__init__.py`在 Python 文件夹中有一个文件`backend`才能将其视为*package*。然后你可以做`import backend.handlers`或`from backend.handlers import foo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T17:47:52.110

当您进行导入时，Python 会在 sys.path 中列出的目录中搜索您要导入的任何内容，这是一个 Python 列表。要使模块或其他代码源可导入，只需将代码源的路径附加到 sys.path：

```
sys.path.append(os.path.join(os.path.abspath('.'), 'backend')) 
```

在该行之后，然后导入处理程序，它将起作用。

祝你好运，迈克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T17:46:00.657

所以你在 main.py 中导入 handlers.py？

`import backend.handlers as handlers`

如果您放入`__init__.py`后端应该可以工作

编辑：选项 2

在 main.py 的开头，您可以通过执行以下操作将子文件夹添加到您的 python 路径：

```
import sys
sys.path.append('./backend') 
```

# android - 如何仅从图库中选择图像

> ID：13478966
> 
> 赞同：1
> 
> 时间：2012-11-20T17:44:08.380
> 
> 标签：android

我想从图库中挑选照片，但从下面的代码中，它显示了带有 SD 卡外部应用程序的图库，例如 ex Astro Manager。我希望它应该只显示画廊而不是其他第三方应用程序或与这些东西相关的东西等。

当前列出所有可以浏览的应用程序的虚拟代码，如 Astro Manager 等。

```
Intent intent=new Intent();
intent.setType("image/*"); 
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),10); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:53:26.540

您的代码是正确的，但您几乎不需要我的帮助。只需查看链接，它将帮助您处理 Gallery [Link](http://viralpatel.net/blogs/pick-image-from-galary-android-app/)

对于您的任务，您可以添加此示例代码

```
Intent i = new Intent(
Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(i, RESULT_LOAD_IMAGE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T21:18:09.577

试试这个 -

```
private static final int PICTURE_GALLERY = 1;
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(photoPickerIntent, PICTURE_GALLERY); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T17:13:07.860

如果您的应用支持 sdk 版本 JELLY_BEAN_MR2。最好像这样打开意图，

```
Intent intent;
    if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.JELLY_BEAN_MR2) {
        intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        intent.setType("image/*");
    } else {
        intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        intent.setType("image/*");
    }
checkAndStartActivityForResult(intent, RESULT_LOAD_IMAGE);

private void checkAndStartActivityForResult(Intent intent, int requestCode) {
    //Open only if any intent can be handled from some component
    if (intent.resolveActivity(getActivity().getPackageManager())!=null) {
        startActivityForResult(createChooser(intent, ""), requestCode);
    }else{
    //show error to user
    }
} 
```

# css - CSS 正文背景

> ID：13478967
> 
> 赞同：0
> 
> 时间：2012-11-20T17:44:12.440
> 
> 标签：css, background

嗨，我有这样的代码：

```
body {  

background: rgb(59,103,158);
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzNiNjc5ZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjN2RiOWU4IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgIDxzdG9wIG9mZnNldD0iOTklIiBzdG9wLWNvbG9yPSIjMmI4OGQ5IiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==);
background: -moz-linear-gradient(top,  rgba(59,103,158,1) 0%, rgba(125,185,232,1) 0%, rgba(43,136,217,1) 99%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(59,103,158,1)), color-stop(0%,rgba(125,185,232,1)), color-stop(99%,rgba(43,136,217,1))); 
background: -webkit-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(125,185,232,1) 0%,rgba(43,136,217,1) 99%);
background: -o-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(125,185,232,1) 0%,rgba(43,136,217,1) 99%); 
background: -ms-linear-gradient(top,  rgba(59,103,158,1) 0%,rgba(125,185,232,1) 0%,rgba(43,136,217,1) 99%);
background: linear-gradient(to bottom,  rgba(59,103,158,1) 0%,rgba(125,185,232,1) 0%,rgba(43,136,217,1) 99%); 
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3b679e', endColorstr='#2b88d9',GradientType=0 );

} 
```

我是直接从 ColorZilla 那里得到的，但它会自我重复很多次。我希望它成为网页的背景。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:48:50.953

似乎您想防止背景重复。为此，添加

```
body { background-repeat: no-repeat; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:56:13.393

尝试设置背景大小：

```
BODY {
    -webkit-background-size: 100% 100%;
       -moz-background-size: 100% 100%;
         -o-background-size: 100% 100%;
            background-size: 100% 100%;
} 
```

（当然会应用于常规背景，而不是 IE 的过滤器。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:52:00.873

如果您确实希望减少所需的编码量（如某些人所建议的那样），我仍然会坚持使用带有 repeat-x 的 1px 宽度的图像。

更少的编码，跨浏览器兼容，而且我没有看到一张图像在渲染时间上有如此巨大的差异。

```
background: url('path_here/bg.jpg') repeat-x; 
```

# vb.net - 如何从 Web 远程播放 Visual Basic 中的随机 wav 文件

> ID：13478969
> 
> 赞同：0
> 
> 时间：2012-11-20T17:44:16.060
> 
> 标签：vb.net, audio, random

我正在制作一个程序，而不是嵌入 wav 文件（程序变得很大）；我决定将歌曲上传到我的网站。该程序是一个儿童游戏，一旦游戏结束，我希望它播放来自 URL 的随机歌曲。最初，我使用嵌入式资源中的代码来执行此操作。这是代码：

```
 Public Sub PlayRandomTrack()
           Randomize()

    Dim trackNum As Integer = CInt(Rnd() * 5 + 0.5)

    Select Case trackNum
        Case 1
            My.Computer.Audio.Play(My.Resources.CallingMonsters, AudioPlayMode.Background)
        Case 2
            My.Computer.Audio.Play(My.Resources.McclainSisters, AudioPlayMode.Background)
        Case 3
            My.Computer.Audio.Play(My.Resources.Mendler, AudioPlayMode.Background)
        Case 4
            My.Computer.Audio.Play(My.Resources.Pray, AudioPlayMode.Background)
        Case Else
            My.Computer.Audio.Play(My.Resources.WillowWhip, AudioPlayMode.Background)

    End Select
End Sub 
```

有没有办法简单地将 URL 放在某个地方而不是一个全新的代码？如果它是需要的新代码，它会是什么？我在网上找不到这方面的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:37:52.407

```
Option Strict On
Imports System.Net
Imports System.IO
Public Class Form1
    Dim SongURLs As New List(Of String)
    Dim R As New Random
    Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
        GameOver()
    End Sub
    Sub GameOver()
        PlayRandomInternetSong()
    End Sub
    Sub PlayRandomInternetSong()
        Randomize()
        Dim RandomSongIndex As Integer = R.Next(0, SongURLs.Count)
        PlayOnlineWaveFile(SongURLs(RandomSongIndex))
    End Sub
    Sub PlayOnlineWaveFile(ByVal Address As String)
        Dim WavBytes As Byte()
        Using W As New WebClient
            WavBytes = W.DownloadData(Address)
        End Using
        Using mStream As New MemoryStream(WavBytes, False)
            My.Computer.Audio.Play(mStream, AudioPlayMode.Background)
        End Using
    End Sub
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        SongURLs.Add("http://www.villagegeek.com/downloads/webwavs/adios.wav")
        SongURLs.Add("http://www.villagegeek.com/downloads/webwavs/excellent.wav")
        SongURLs.Add("http://www.villagegeek.com/downloads/webwavs/failure1.wav")
        SongURLs.Add("http://www.villagegeek.com/downloads/webwavs/Austin_Powers_groovy.wav")
        SongURLs.Add("http://www.villagegeek.com/downloads/webwavs/american_pie_bless_net.wav")
        SongURLs.Add("http://www.villagegeek.com/downloads/webwavs/BluesBros_106miles.wav")
    End Sub
End Class 
```

# ios - 我的 iPhone 锁死了

> ID：13478972
> 
> 赞同：1
> 
> 时间：2012-11-20T17:44:34.303
> 
> 标签：ios

软件：XCode 6.2 测试版

这是我的问题：我有两个要出售的应用程序。我创建了其中一个应用程序的精简版，并将其加载到我的手机上进行测试。精简版运行良好，广告运行，应用内购买测试成功。

这就是问题所在：当我的手机上有精简版并且我尝试打开我的其他一个正在出售的应用程序时，我的手机会短路。“待售”应用程序在启动图像上冻结，我必须在手机上进行软重启才能使其正常工作。从那时起，我的待售应用程序从它所在的文件夹中消失了，但它仍然存在于“设置>使用”中。当我在使用列表中找到它时，应用程序的图标消失了，当我单击空白图标时，详细信息页面会显示我的测试应用程序（精简版）中的应用程序图标。

这个问题也反过来发生了。当我打开精简版时，它会冻结在启动图像上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:39:06.347

在远离我的问题几个小时后，我意识到我所做的是重用了一个包标识符。一旦我改变了这个，我所有的问题都解决了

# python - 如何在列表中查找所有出现的元素？

> ID：13478974
> 
> 赞同：2
> 
> 时间：2012-11-20T17:44:38.877
> 
> 标签：python, list, indexing, element

我读了这篇文章：如何在列表中找到所有出现的元素？ [如何在列表中查找所有出现的元素？](https://stackoverflow.com/questions/6294179/how-to-find-all-occurrences-of-an-element-in-a-list)

给出的答案是：

```
indices = [i for i, x in enumerate(my_list) if x == "whatever"] 
```

我知道这是列表理解，但我无法分解这段代码并理解它。有人可以给我一块吃吗？

* * *

如果执行以下代码：我知道 enumerate 只会创建一个元组：

```
l=['a','b','c','d']
enumerate(l) 
```

输出：

```
(0, 'a')
(1, 'b')
(2, 'c')
(3, 'd') 
```

如果有更简单的方法，我也会对此持开放态度。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T17:48:34.277

`indices = [i for i, x in enumerate(my_list) if x == "whatever"]`相当于：

```
# Create an empty list
indices = []
# Step through your target list, pulling out the tuples you mention above
for index, value in enumerate(my_list):
    # If the current value matches something, append the index to the list
    if value == 'whatever':
        indices.append(index) 
```

结果列表包含每个匹配项的索引位置。采用相同的`for`结构，您实际上可以更深入地遍历列表列表，从而使您陷入 Inception 式的疯狂螺旋：

```
In [1]: my_list = [['one', 'two'], ['three', 'four', 'two']]

In [2]: l = [item for inner_list in my_list for item in inner_list if item == 'two']

In [3]: l
Out[3]: ['two', 'two'] 
```

这相当于：

```
l = []
for inner_list in my_list:
  for item in inner_list:
    if item == 'two':
      l.append(item) 
```

您在开头包含的列表理解是我能想到的最 Pythonic 的方式来完成您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:47:44.487

```
indices = []
for idx, elem in enumerate(my_list):
    if elem=='whatever':
        indices.append(idx) 
```

# silverlight - 使用字符串格式正确转义 Silverlight 绑定中的“{”字符

> ID：13478985
> 
> 赞同：0
> 
> 时间：2012-11-20T17:45:09.547
> 
> 标签：silverlight, data-binding, string-formatting

我正在尝试在 Silverlight 中使用带有数据绑定的字符串格式，但是如果“{”字符是字符串格式中的第一个字符，则项目无法构建。

在之前添加一个空格可以让代码构建并显示我想要的内容，但是我想摆脱第一个空格。

```
<TextBlock Grid.Column="0"
           Grid.ColumnSpan="2"
           Grid.Row="11"
           Margin="2">
    <TextBlock.Text>
        <Binding ElementName="_DateTypes" 
                 Path="SelectedItem"
                 StringFormat=" {0}'s Ago "/>
        </TextBlock.Text>
    </TextBlock> 
```

我试过以下

```
StringFormat=" {0}s Ago "
StringFormat="\{0}s Ago "
StringFormat="/{0}s Ago "
StringFormat="%s's Ago " 
```

如果字符串为 Day，则得到以下结果

```
 Days Ago
\Days Ago
/Days Ago
Day 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T17:50:34.717

我不知道它是如何或为什么起作用的，但你只需要预先添加`{}`：

```
StringFormat="{} {0}'s Ago " 
```

`{`（我想这只是一种语法解决方法，因为通常以表示绑定表达式的属性开头。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:02:53.243

我认为应该是

```
StringFormat="\{0\}s Ago " 
```

转义两个符号

# asterisk - 提示用户输入 N（整数）并打印一行星号

> ID：13478986
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:45:13.743
> 
> 标签：asterisk

我在使用这段代码时遇到了问题，我想提示用户输入整数 N，然后打印星号的“左下”三角形，用 N 行，所以让我们说`N=5`然后打印：

```
*
**
***
****
***** 
```

这是我到目前为止所拥有的。

```
def tri(x):
   N = 0
   while N == x:
   print '*' * 1 
   print '*' * 2
   print '*' * 3
   etc...
   N = N + 1

print tri(x) 
```

我不认为我做得很好......无论如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:04:08.960

这是一个有效的PHP脚本

```
function Tri($x){
   $N = 0; //this flag makes sure you add one (*) each line
   for($i = 0; $i <= $x; $i++) //this loop is for each row of asterisk
   {
       for($j = 0; $j < $N; $j++) //this nested loop adds one more asterisk each line
       {
           echo "*"; 
       }
       echo "<br>";
       $N++;
   }
} 
```

# c# - 清除 .net 文本框控件不起作用

> ID：13478987
> 
> 赞同：-1
> 
> 时间：2012-11-20T17:45:16.833
> 
> 标签：c#, asp.net, controls

我有一个带有很多文本框的网络表单，我想`string.Empty`在 foreach 语句中将所有这些文本框简单如下：

```
foreach(Control c in this.Controls)
{
  if(c is TextBox)
  {
      //..some code
  }

} 
```

但是 if 语句没有返回 true，尽管我在页面中有文本框。但是当我尝试写：时 `if(c is Control)`，它返回真，文本框不。

看不到我做错了什么..感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:56:51.393

您只循环遍历`this`可能是页面对象的直接子级。

要遍历页面上包含嵌套控件的所有控件，您必须递归遍历控件树。

```
public void RecursivelyClear(Control parent)
{
    for each (var theControl in parent.Controls)  {
        if (theControl is TextBox)
            // your code here ...
        if (theControl.HasControls)
            RecursivelyClear(theControl);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:57:17.197

重置表单的简单方法是添加一个 RESET HTML 按钮：

```
 <input type="reset" value="Reset" /> 
```

这样，您将避免页面回发和所有控件的循环。仅重置控件将有助于提高页面性能。

我希望这能回答你的问题。如果是，请标记为“已回答”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T17:49:38.750

利用

```
c.GetType().ToString() == "System.Web.UI.WebControls.TextBox" 
```

# delphi - Indy SMTP Connect 在不同 PC 上的处理方式不同

> ID：13478990
> 
> 赞同：3
> 
> 时间：2012-11-20T17:45:41.573
> 
> 标签：delphi, smtp, delphi-7, indy10

在德尔福体育俱乐部会员计划中，我使用俱乐部的 BTConnect 帐户向会员发送大量电子邮件，该帐户已迁移到 Office365。最近，BT 提高了身份验证，我将 SMTP 参数从 satNone 更改为 satDefault 和 utUseExplicitTLS。如果我在家运行程序，它会按预期工作：

```
Stat Connected.
Recv 20/11/2012 16:36:02: 220 pod51016.outlook.com Microsoft ESMTP MAIL Service ready at Tue, 20 Nov 2012 16:36:01 +0000<EOL>
Sent 20/11/2012 16:36:02: EHLO macxp<EOL>
Recv 20/11/2012 16:36:02: 250-pod51016.outlook.com Hello [81.155.5.61]<EOL>250-SIZE 36700160<EOL>250-PIPELINING<EOL>250-DSN<EOL>250-ENHANCEDSTATUSCODES<EOL>250-STARTTLS<EOL>250-AUTH<EOL>250-8BITMIME<EOL>250-BINARYMIME<EOL>250 CHUNKING<EOL>
Sent 20/11/2012 16:36:02: STARTTLS<EOL>
Recv 20/11/2012 16:36:02: 220 2.0.0 SMTP server ready<EOL>
Sent 20/11/2012 16:36:02: EHLO macxp<EOL>
Recv 20/11/2012 16:36:02: 250-pod51016.outlook.com Hello [81.155.5.61]<EOL>250-SIZE 36700160<EOL>250-PIPELINING<EOL>250-DSN<EOL>250-ENHANCEDSTATUSCODES<EOL>250-AUTH LOGIN<EOL>250-8BITMIME<EOL>250-BINARYMIME<EOL>250 CHUNKING<EOL>
Sent 20/11/2012 16:36:02: AUTH LOGIN<EOL>
Recv 20/11/2012 16:36:02: 334 deleted<EOL>
Sent 20/11/2012 16:36:02: deleted<EOL>
Recv 20/11/2012 16:36:02: 334 deleted<EOL>
Sent 20/11/2012 16:36:02: deleted<EOL>
Recv 20/11/2012 16:36:04: 235 2.7.0 Authentication successful<EOL>
Sent 20/11/2012 16:36:04: RSET<EOL>
Recv 20/11/2012 16:36:10: 250 2.0.0 Resetting<EOL>
Sent 20/11/2012 16:36:10: MAIL FROM: <deleted@btconnect.com><EOL>
Recv 20/11/2012 16:36:10: 250 2.1.0 Sender OK<EOL> 
```

就这样，没问题。如果我将程序带到体育俱乐部并在那里运行，我会得到：

```
Stat Connected.
Recv 12/11/2012 15:17:31: 220 pod51014.outlook.com Microsoft ESMTP MAIL Service ready at Mon, 12 Nov 2012 15:17:03 +0000<EOL>
Sent 12/11/2012 15:17:31: EHLO ovscbob<EOL>
Recv 12/11/2012 15:17:31: 250-pod51014.outlook.com Hello [81.149.229.105]<EOL>250-SIZE 36700160<EOL>250-PIPELINING<EOL>250-DSN<EOL>250-ENHANCEDSTATUSCODES<EOL>250-STARTTLS<EOL>250-AUTH<EOL>250-8BITMIME<EOL>250-BINARYMIME<EOL>250 CHUNKING<EOL>
Sent 12/11/2012 15:17:31: STARTTLS<EOL>
Recv 12/11/2012 15:17:31: 220 2.0.0 SMTP server ready<EOL>
Sent 12/11/2012 15:17:31: QUIT<EOL>
Stat Disconnected. 
```

似乎 Indy 发出的是 QUIT 而不是第二个 EHLO 命令，但我不知道为什么。我将设置更改为使用 satSASL 和相关机制，结果相同。它在家里工作得很好，但在俱乐部里却不行。有什么办法可以解决这个问题吗？大约一周前，我也将 Indy 更新到了最新版本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T23:38:35.150

当服务器接收到`STARTTLS`命令并回复成功响应时，它希望`TIdSMTP`在发送任何进一步的命令之前启动 SSL/TLS 握手。在这种情况下，SSL/TLS 握手必须失败，并且应该引发异常。 发生异常时`TIdSMTPBase.StartTLS()`调用。这是在成功命令后发送命令`Disconnect()`的唯一方法，而不是发送第二个.`TIdSMTP``QUIT``STARTTLS``EHLO`

# visual-studio-2012 - VS2012 - 同步项目属性和 ClickOnce 内部版本号

> ID：13478991
> 
> 赞同：1
> 
> 时间：2012-11-20T17:45:41.917
> 
> 标签：visual-studio-2012, clickonce, .net-assembly, version-numbering

ClickOnce 应用程序的发布会自动增加构建/版本号。此版本号与项目属性中的程序集版本不同（后者又会自动显示在生成的 WPF 关于框中）。

有没有办法在程序集属性中同步 ClickOnce 版本号和项目号？目标是为两个地方获得一个自动增加且相同的版本号。

![ClickOnce / Publish 的版本号](../Images/cc175a6e0e40ebd78a3745c771016b5f.png)

![项目属性](../Images/7fa1f44c01666223b751b5fd86a8be61.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T11:01:43.777

没有自动（内置）方法可以做到这一点。我在项目中使用的一种可能的解决方法是使用自定义 msbuild 任务生成发布和程序集版本信息。

一些作为 nuget 包可用的项目旨在解决这些问题，但那里没有什么非常完整的。看看[SemVerHarvester](https://github.com/Grynn/SemVerHarvester "SemVerHarvester")和[CroMagVersion](https://github.com/EastPoint/CroMagVersion "CroMag 版本") ...

以上两种都有很多问题：

1.  SemVerHarvester 绑定到 git/hg 并从 git 标签获取版本信息
2.  它实际上并没有自己编写 AssemblyInfo.cs 文件，而是依赖于 Msbuild Community Tasks
3.  AssemblyInfo.cs 文件始终被“触及”，这意味着每次重建都是完全重建而不是增量重建。CroMagVersion 部分解决了这个问题——它在发布版本中定义了一个#define，并且只有当这个定义存在时才会重新生成一个 AssemblyInfo.cs ......
4.  两个项目都没有直接设置 ClickOnce 系统用于发布的 ApplicationVersion/ApplicationRevision 属性

我已经为上述所有方法提供了解决方法，我打算很快在 github 上开源......同时我将描述我所做的事情：

我做了一个自定义的 msbuild 任务，它从 git 读取版本信息，然后根据这些信息创建一个内存中的 AssemblyInfo 文件。我检查现有的 AssemblyInfo.cs 文件（即具有 AssemblyVersion 和其他属性的文件），当且仅当内存中的版本较新时才覆盖它。这允许增量重建。最后，我还输出了 ApplicationVersion、ApplicationRevision 和其他属性以支持 ClickOnce。

如果我将我的解决方法开源作为一个独立的解决方案，我可能会允许从文本文件、git、hg 等中获取版本信息

我仍然没有找到好的解决方案的问题：

ClickOnce 不直接支持多个发布渠道——比如 debug/beta/custom_feature/whatever，这让我想知道我是否应该放弃 clickonce 并改用[Shimmer](https://github.com/github/Shimmer)。

# .net - 使 Salesforce 依赖选项列表在 .NET Web 界面中工作

> ID：13478992
> 
> 赞同：2
> 
> 时间：2012-11-20T17:45:49.963
> 
> 标签：.net, api, salesforce

Salesforce 允许使用相关选项列表，如下所述：http: [//ap1.salesforce.com/help/doc/en/fields_defining_field_dependencies.htm](http://ap1.salesforce.com/help/doc/en/fields_defining_field_dependencies.htm)

我们有一个用 .NET 编码的 Web 界面，通过 API 与 Salesforce 进行通信。

有没有人在 .NET Web 界面中使 Salesforce 的依赖选项列表字段工作的经验？

任何帮助表示赞赏，谢谢！泉。

# android - 不推荐使用 SlidingDrawer

> ID：13478993
> 
> 赞同：22
> 
> 时间：2012-11-20T17:45:52.050
> 
> 标签：android, deprecated, slidingdrawer

我刚刚注意到，自 API 17 以来，[SlidingDrawer](https://developer.android.com/reference/android/widget/SlidingDrawer.html)已被弃用。

对它的评论说：

> **此类在 API 级别 17 中已弃用。** 不再支持此类。如果您必须在应用程序中使用它，建议您将自己的实现基于 Android 开源项目的源代码。

这是否意味着我应该将[代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/SlidingDrawer.java#SlidingDrawer)导入我的项目以确保将来会支持它？

是否已经有一些开源项目可以扩展slidingDrawer？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-20T17:53:07.360

> 这是否意味着我应该将代码导入我的项目以确保将来会支持它？

就个人而言，我会`SlidingDrawer`为所有新的应用程序开发转储并做其他事情。

话虽如此，`SlidingDrawer`在可预见的未来应该会出现在 Android SDK 中。正如文档所指出的，谷歌不再支持它，这意味着，在某个时候，它可能根本不再工作，必须放弃。如果您当时仍在使用它，那么您将做出决定。例如，`AbsoluteLayout`在 2008 年底 IIRC 被弃用，它仍然可以使用。

没有什么能阻止您尝试`SlidingDrawer`在库项目中创建一个分支，尽管您需要复制一些资源并进行代码更改以指向您的资源而不是框架内部的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T23:18:00.473

重申@MarioLenci 的评论，有一个实现它的库：[https ://github.com/umano/AndroidSlidingUpPanel](https://github.com/umano/AndroidSlidingUpPanel)

通过[https://stackoverflow.com/a/16866284/57490](https://stackoverflow.com/a/16866284/57490)

# windows-7 - Ihttphandler 在本地 IIS 上不起作用，但在服务器上编译和部署后就可以工作

> ID：13478994
> 
> 赞同：0
> 
> 时间：2012-11-20T17:45:52.393
> 
> 标签：windows-7, iis-7, localhost, ihttphandler

我们将 Web 应用程序从 asp 3.5 升级到 4.0 框架，但存在一些小问题。现在，我曾经能够调试抛出和错误的代码块，但是一旦我以发布模式编译和发布它并将其部署到服务器，它就可以正常工作。服务器是 2008 企业版 iis 7。代码块如下。出现问题。当页面更改为 ihttphandler 类型时，可以处理页面的请求。当该行命中时，我得到 IIS 必须处于集成模式。我检查了项目。它正在使用本地 ISS。应用程序池设置为集成。正在尝试的是在内存中呈现页面，以便我可以获取页面上包含的控件。我不明白为什么它一旦发布和部署就可以工作。

```
 Private Sub RetrieveControls(ByVal file As String)
        If Not String.IsNullOrEmpty(file) Then
            Dim s As New System.IO.MemoryStream()
            Dim w As New System.IO.StreamWriter(s)
            Dim path As String = Me.Request.Url.AbsolutePath
            path = path.Remove(path.LastIndexOf("/") + 1)
            Dim wr As New System.Web.Hosting.SimpleWorkerRequest(path & file, "security=true", w)

            Dim t As Type = System.Web.Compilation.BuildManager.GetCompiledType(path & file)
            Dim p As Page = Activator.CreateInstance(t)
            p = BuildManager.CreateInstanceFromVirtualPath("~/Screens/" & file, t)
            Dim con As New HttpContext(wr)

            CType(p, IHttpHandler).ProcessRequest(con)

            Dim containerPC As ContentPlaceHolder = p.Form.FindControl("PageContent")
            Dim containerBC As ContentPlaceHolder = p.Form.FindControl("ButtonContent")

            RecursiveControlDrill(containerPC)
            RecursiveControlDrill(containerBC)
            Master.sm.ModifyData(m_ci, "Controls", SessionManager.SessionDataType.Temporary)
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T17:23:14.993

我找到了答案。通过组织范围的更新框架 4.5 安装在开发人员机器上。一旦将其删除并重新安装了 4.0，现在一切都可以正常工作了。

# php - 如何成为 OpenCart 大师？

> ID：13478995
> 
> 赞同：100
> 
> 时间：2012-11-20T17:45:51.313
> 
> 标签：php, opencart

除了官方论坛上的一些 api 调用外，他们似乎没有任何文档。我有 Zend 框架和 CodeIgniter 框架的经验。任何 OpenCart 大师都可以推荐我在最短的时间内学习并掌握它的最佳方法吗？我必须尽快用它做一个大项目。

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-11-21T01:11:26.860

# 面向初学者的 OpenCart 1.5.X 开发者快速入门指南

本指南是为已经熟悉 PHP、OOP 和 MVC 架构的开发人员编写的

在下文中，您将看到购物车目录侧的示例。除了相关部分中提到的视图外，管理端在功能上是相同的

* * *

## 了解图书馆

所有库功能都可以通过控制器、模型和视图使用`$this->library_name`. 所有这些都可以在`/system/library/`文件夹中找到。例如，要访问当前购物车的产品，您需要使用`Cart`该类，该类位于`/system/library/cart.php`并且可以使用`$this->cart->getProducts()`

常用物品

*   `customer.php`- 客户相关功能
*   `user.php`- 管理用户相关功能
*   `cart.php`- 购物车相关功能
*   `config.php`- 所有设置都从此加载
*   `url.php`- URL生成功能

* * *

## 了解路由参数

OpenCart 的框架依赖于`route=aaa/bbb/ccc`查询字符串中的参数来知道要加载什么，并且是查找需要为每个页面编辑的文件的基础功能。大多数路由实际上只使用`aaa/bbb`应该被视为两部分的，但是有些包含三个部分`aaa/bbb/ccc`第一部分`aaa`通常与通用文件夹中的文件夹相关，例如控制器或模板文件夹。第二部分通常与文件名有关，没有相关`.php`或`.tpl`扩展名。第三部分在下面的“了解控制器”部分进行了解释

* * *

## 理解语言

语言存储在子`/catalog/language/`文件夹中的`your-language`文件夹中。其中，跨页面使用的一般文本值存储在`your-language.php`文件夹内的文件中，因此对于目录端的英语，您可以在`catalog/language/english/english.php`. 对于特定的页面文本，您需要`route`页面的 （通常是这种情况，但并非*总是*如此，因为您可以指定任何您喜欢的语言文件）。例如，搜索页面有路由`product/search`，因此该页面的语言特定文本可以在`catalog/language/english/product/search.php`（注意文件名和子文件夹与`.php`.

要在控制器中加载语言，请使用

```
$this->language->load('product/search'); 
```

然后就可以使用语言库功能`get`来检索特定的语言文本，比如

```
$some_variable = $this->language->get('heading_title'); 
```

语言变量使用特殊变量在语言文件中分配，该变量`$_`是键和文本值的数组。在你的`/catalog/language/english/product/search.php`你应该找到类似的东西

```
$_['heading_title']     = 'Search'; 
```

全局语言文件`english/english.php`中的值会自动加载，并且可以在没有`$this->language->load`方法的情况下使用

* * *

## 了解控制器

控制器是基于 加载的，`route`并且很容易理解。控制器位于`/catalog/controller/`文件夹中。继续上一个示例，搜索页面的控制器`/product/search.php`位于此文件夹中。再次注意，使用了后面的路线`.php`。

打开控制器文件，您将看到一个扩展`Controller`类的 Pascal Case 类名，称为`ControllerProductSearch`. 这又是特定于路由的，`Controller`后跟子文件夹名称和文件名，扩展名不大写。大写实际上不是必需的，但为了便于阅读，建议使用它。值得注意的是，除了字母和数字之外，类名不会从子文件夹和文件名中获取任何值。下划线被删除。

类中有方法。声明的类中的方法`public`可以通过路由运行 -`private`不是。默认情况下，使用标准的两部分路由（`aaa/bbb`如上），`index()`会调用默认方法。如果使用了路由的第三部分（`ccc`上面），则将运行此方法。比如`account/return/insert`会加载`/catalog/controller/account/return.php`文件和类，并尝试调用`insert`方法

* * *

## 了解模型

OpenCart 中的模型位于`/catalog/model/`文件夹中，并根据功能而非路由进行分组，因此您需要通过以下方式将它们加载到控制器中

```
$this->load->model('xxx/yyy'); 
```

这会将文件加载到`xxx`名为`yyy.php`. 然后可以通过对象使用

```
$this->model_xxx_yyy 
```

和控制器一样，你只能调用它的`public`方法。例如，要调整图像大小，您可以使用模型并按如下方式`tool/image`调用其方法`resize`

```
$this->load->model('tool/image');
$this->model_tool_image->resize('image.png', 300, 200); 
```

* * *

## 从控制器了解视图中的变量分配

为了从控制器向视图传递值，您只需将数据分配给`$this->data`变量，该变量本质上是一个键 => 值对的数组。举个例子

```
$this->data['example_var'] = 123; 
```

如果您熟悉将每个键转换为变量的[extract()](http://php.net/extract)方法，在视图中访问它应该很容易理解。所以`example_var`密钥变成`$example_var`并且可以在视图中访问。

* * *

## 理解主题

主题仅在目录端可用，基本上是一个包含模板、样式表和主题图像的文件夹。主题文件夹放置在`/catalog/view/theme/`后跟主题名称的文件夹中。文件夹名称不重要，`default`文件夹除外

管理端使用`/admin/view/template/`（从路径中跳过，`/theme/theme-name/`因为它不允许不同的主题）

模板文件位于`template`主题文件夹内的文件夹中。如果当前选择的主题没有任何模板可用，则使用默认文件夹的模板作为备用。这意味着可以用很少的文件创建主题，并且仍然可以充分发挥作用。它还可以减少代码重复和升级时的问题

* * *

## 了解视图（模板）

与语言和模型一样，视图文件通常与路线相关，但根本不必如此。`/catalog/view/theme/your-theme/template/`除非它不存在，否则通常会在目录端找到模板，在这种情况下，将使用默认主题的模板。对于我们上面的搜索页面示例，文件是`product/search.tpl`. 对于三部分的路线，`aaa/bbb_ccc.tpl`虽然没有硬性规定，但通常是在其中。在 admin 中，大多数页面都遵循此规则，除了列出项目的页面（如产品列表页面）`catalog/product_list.tpl`和产品编辑表单位于`catalog/product_form.tpl`. 同样，这些不是设置的，而是默认购物车的标准。

模板文件实际上只是另一个 php 文件，但扩展名为 .tpl，并且实际上在控制器文件中运行，因此您可以在控制器中编写的所有内容都可以在模板文件中运行（尽管不推荐，除非绝对必要的）

* * *

## 了解数据库对象

查询运行使用

```
$result = $this->db->query("SELECT * FROM `" . DB_PREFIX . "table`"); 
```

`DB_PREFIX`顾名思义，是一个包含数据库前缀（如果存在）的常量

`$result`将返回一个用于`SELECT`查询的对象，其中包含一些属性

`$result->row`如果一个或多个作为关联数组返回，则包含第一行的数据

`$result->rows`包含一组行结果，非常适合使用 foreach 循环

`$result->num_rows`包含返回的结果数

`$this->db`该对象还有一些额外的方法

`$this->db->escape()`对传递的值使用[mysql_real_escape_string()](http://php.net/mysql_real_escape_string)

`$this->db->countAffected`返回受`UPDATE`查询影响的行数等

`$this->db->getLastId()`[使用mysql_insert_id()](http://php.net/mysql_insert_id)返回最后一个自动递增 id

* * *

## 了解保留变量

OpenCart 有预定义的变量来代替标准的`$_GET`, `$_POST`, `$_SESSION`, `$_COOKIE`, `$_FILES`, `$_REQUEST`AND`$_SERVER`

`$_SESSION`使用`$this->session->data`where data 是一个模仿`$_SESSION`

所有其他人都可以使用`$this->request`并已“清理”以符合启用/禁用的魔术引号，因此

`$_GET`变成`$this->request->get`

`$_POST`变成`$this->request->post`

`$_COOKIE`变成`$this->request->cookie`

`$_FILES`变成`$this->request->files`

`$_REQUEST`变成`$this->request->request`

`$_SERVER`变成`$this->request->server`

* * *

## 概括

虽然以上内容对于开发人员来说并不是一个万无一失的指南，但希望它可以为那些入门者提供一个很好的起点

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-10-10T09:33:29.127

全局库方法：基本的 opencart 库函数及其功能，其中大部分可以从目录或管理文件夹（控制器、模型、视图）中的任何位置调用

```
CACHE
$this->cache->delete($key) - Deletes cache [product, category, country, zone, language, currency,
manufacturer]

CART
$this->cart->getProducts() Gets all products currently in the cart including options, discounted prices, etc.
$this->cart->add( $product_id, $qty = 1, $options = array()) - Allows you to add a product to the cart
$this->cart->remove( $key ) - Allows you to remove a product from the cart
$this->cart->clear() - Allows you to remove all products from the cart
$this->cart->getWeight() - Sum of the weight of all products in the cart that have require shipping set to Yes
$this->cart->getSubTotal() - returns the subtotal of all products added together before tax
$this->cart->getTotal() - returns the total of all products added together after tax
$this->cart->countProducts() - returns the count of all product in the cart
$this->cart->hasProducts() - returns true if there is at least one item in the cart
$this->cart->hasStock() - returns false if there is at least one item in the cart that is out of stock
$this->cart->hasShipping() - returns true if there is at least one item in the cart that requires shipping
$this->cart->hasDownload() - returns true if there is at least one item in the cart that has a download
associated

CONFIG
$this->config->get($key) - returns setting value by keyname based on application (catalog or admin)
$this->config->set($key, $value) - set the value to override the setting value. DOES NOT SAVE TO DATABASE

CURRENCY
$this->currency->set($currency) - set or override the currency code to be used in the session
$this->currency->format($number, $currency = '', $value = '', $format = TRUE) - format the currency
$this->currency->convert($value, $from, $to) - convert a value from one currency to another. Currencies must
exist
$this->currency->getId() - get the database entry id for the current currency (1, 2, 3, 4)
$this->currency->getCode() - get the 3-letter iso code for the current currency (USD, EUR, GBP, AUD, etc)
$this->currency->getValue($currency) - get the current exchange rate from the database for the specified
currency.
$this->currency->has(currency) - Check if a currency exists in the opencart currency list

CUSTOMER
$this->customer->login($email, $password) - Log a customer in
$this->customer->logout() - Log a customer out
$this->customer->isLogged() - check if customer is logged in
$this->customer->getId() - get the database entry id for the current customer (integer)
$this->customer->getFirstName() - get customer first name
$this->customer->getLastName() - get customer last name
$this->customer->getEmail() - get customer email
$this->customer->getTelephone() - get customer telephone number
$this->customer->getFax() - get customer fax number
$this->customer->getNewsletter() - get customer newsletter status
$this->customer->getCustomerGroupId() - get customer group id
$this->customer->getAddressId() - get customer default address id (maps to the address database field)

DATABASE
$this->db->query($sql) - Execute the specified sql statement. Returns row data and rowcount.
$this->db->escape($value) - Escape/clean data before entering it into database
$this->db->countAffected($sql) - Returns count of affected rows from most recent query execution
$this->db->getLastId($sql) - Returns last auto-increment id from more recent query execution 4

DOCUMENT (*Called from controller only before renderer)
$this->document->setTitle($title) - Set page title
$this->document->getTitle()- Get page title
$this->document->setDescription($description) - Set meta description
$this->document->getDescription()- Get meta description
$this->document->setKeywords()- Set meta keywords
$this->document->getKeywords()- Get meta keywords
$this->document->setBase($base) - Set page base
$this->document->getBase() - Get page base
$this->document->setCharset($charset) - Set page charset
$this->document->getCharset() - Get page charset
$this->document->setLanguage($language) - Set page language
$this->document->getLanguage()- Get page language
$this->document->setDirection($direction) - Set page direction (rtl/ltr)
$this->document->getDirection()- Get page direction (rtl/ltr)
$this->document->addLink( $href, $rel ) – Add dynamic <link> tag
$this->document->getLinks()- Get page link tags
$this->document->addStyle( $href, $rel = 'stylesheet', $media = 'screen' ) – Add dynamic style
$this->document->getStyles()- Get page styles
$this->document->addScript( $script ) - Add dynamic script
$this->document->getScripts()- Get page scripts
$this->document->addBreadcrumb($text, $href, $separator = ' &gt; ') – Add breadcrumb
$this->document->getBreadcrumbs()- Get Breadcrumbs

ENCRYPT
$this->encryption->encrypt($value) - Encrypt data based on key in admin settings
$this->encryption->decrypt($value) - Decrypt data based on key in admin settings

IMAGE
$this->image->resize($width = 0, $height = 0)

JSON
$this->json->encode( $data )
$this->json->decode( $data , $assoc = FALSE)

LANGUAGE
$this->language->load($filename);

LENGTH
$this->length->convert($value, $from, $to) - convert a length to another. units must exist
$this->length->format($value, $unit, $decimal_point = '.', $thousand_point = ',') - format the length to use
unit

LOG
$this->log->write($message) - Writes to the system error log

REQUEST
$this->request->clean($data) - Cleans the data coming in to prevent XSS
$this->request->get['x'] - Same as $_GET['x']
$this->request->post['x'] - Same as $_POST['x']

RESPONSE
$this->response->addHeader($header) - additional php header tags can be defined here
$this->response->redirect($url) - redirects to the url specified

TAX
$this->tax->setZone($country_id, $zone_id) - Set the country and zone id for taxing (integer)
$this->tax->calculate($value, $tax_class_id, $calculate = TRUE) - Calculate all taxes to be added to the total
$this->tax->getRate($tax_class_id) - Get the rates of a tax class id
$this->tax->getDescription($tax_class_id) - Get the description of a tax class id
$this->tax->has($tax_class_id) - Check if a tax class id exists in opencart

SESSION
$this->session->data['x'] - Same as $_SESSION['x'] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-05-30T05:56:33.767

有一个 OpenCart Wiki 网站，其中包含面向初学者开发人员的文档。按照下面给出的网址了解更多详细信息：

~~[http://wiki.opencarthelp.com/doku.php?id=start](http://wiki.opencarthelp.com/doku.php?id=start)~~
~~[http://wiki.opencarthelp.com/doku.php?id=methods_reference](http://wiki.opencarthelp.com/doku.php?id=methods_reference)~~

互联网档案链接

[http://web.archive.org/web/20160305131349/http://wiki.opencarthelp.com/doku.php?id=start](http://web.archive.org/web/20160305131349/http://wiki.opencarthelp.com/doku.php?id=start) [http://web.archive.org/web/20160305131349/http://wiki .opencarthelp.com/doku.php?id=methods_reference](http://web.archive.org/web/20160305131349/http://wiki.opencarthelp.com/doku.php?id=methods_reference)

例如，方法参考有以下详细信息：

1.  客户登录
2.  数据库访问
3.  购物车处理
4.  配置
5.  缓存
6.  货币处理

仍然有一些页面正在建设中，但它会有所帮助。

**[更新]**

**截至 2018 年 1 月，opencarhelp.com 域已关闭。**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-06T06:15:12.720

虽然这个话题已经回答了很多次，但我想根据我的经验提供另一种掌握 OpenCart 的方法。

# 边干边学

通过使用少量文件从头开始创建自己的 OpenCart 框架，您可以了解所有内容是如何组合在一起的。我将为您模仿 OpenCart 的文件结构。

创建文件`index.php`

```
<?php
// My simpleCart 
```

# 1.注册表

Opencart 使用注册表模式列出加载类的所有实例。它是您的 OpenCart 应用程序的核心。然后将注册表对象传递给每个类别、模型和库，以便快速访问其他对象。

创建一个带路径的文件`/system/engine/registry.php`

```
<?php
// Registry class. 
class Registry
{
    private $data = array();

    public function set($key, $value){
        $this->data[$key] = $value;
    }

    public function get($key){
        return (isset($this->data[$key])) ? $this->data[$key] : false;
    }
} 
```

在你的`index.php`

```
<?php
// My simpleCart

//load dependency files
require_once('system/engine/registry.php');

//initialize registry
$registry = new Registry; 
```

## 2\. 输出

现在让我们添加一个输出，它将成为我们未来的 HTML。毕竟，整个想法是向浏览器发送一串文本。

创建文件`system/library/response.php`

```
<?php
class Response {
    private $output;

    public function getOutput() {
        return $this->output;
    }

    public function setOutput($output) {
        $this->output = $output;
    }

    public function output() {
        if ($this->output) {
            echo $this->output;
        }
    }
} 
```

在你的`index.php`

```
<?php
// My simpleCart

//load dependency files
require_once('system/engine/registry.php');
require_once('system/library/response.php');

//initialize registry
$registry = new Registry;

//initialize response
$response = new Response;
//add response object to the registry
$registry->set('response', $response);

//lets set an output as a test
$registry->get('response')->setOutput('Hello World');

//send the output to the client
$registry->get('response')->output(); 
```

> 请注意，我添加 Hello world 仅作为示例。我们将进一步删除它。刷新您的网站以检查它。浏览器应显示`Hello World`.

## 3.控制器

将控制器视为页面。他们将定义向客户端显示的内容：文本、html、json、下载甚至图像。现在，我们只需要一个发送文本的页面。

我们将为`home`页面创建一个控制器。

添加带有路径的文件`catalog/controller/common/home.php`

```
<?php

class ControllerCommonHome{

    private $registry = array();

    public function __construct($registry){
        $this->registry = $registry;
    }

    public function index(){

        $output = 'Home Page';
        //using the registry to get the response object and set the Output
        $this->registry->get('response')->setOutput($output);
    }
} 
```

并编辑您的`index.php`

```
<?php
// My simpleCart

//load registry
require_once('system/engine/registry.php');
//load response
require_once('system/library/response.php');

//initialize registry
$registry = new Registry;

//initialize response
$response = new Response;
//add resoinse object to the registry
$registry->set('response', $response);

//load controller common/home
require_once('catalog/controller/common/home.php');
$controller = new ControllerCommonHome($registry);
$controller->index();

//send the output to the client
$registry->get('response')->output(); 
```

> 请注意我如何将 传递`$refistry`给 ControllerCommonHome 以便我可以在控制器内部访问它。

## 4.路由器

我们不希望控制器被硬编码，对吧。我们将使用`route`来自 url 地址的参数来告诉我们的购物车要加载哪个控制器。

创建一个带路径的文件`system/library/request.php`

```
<?php
class Request {
    public $get = array();

    //for now I just need the $_GET parameter
    public function __construct() {
        $this->get = $_GET;
    }
} 
```

创建Router类，该类将负责根据路由初始化Controller文件（换句话说：动态调用控制器）

```
<?php
class Router {
    private $registry;

    public function __construct($registry) {
        $this->registry = $registry;
    }

    public function dispatch($route) {
        require_once('catalog/controller/'.$route.'.php');
        $class = "Controller".str_replace('/', '', $route);
        $controller = new $class($this->registry);
        $controller->index();
    }
} 
```

将其加载到您的`index.php`

```
<?php
require_once('system/engine/registry.php');
require_once('system/engine/router.php');
require_once('system/library/response.php');
require_once('system/library/request.php');

$registry = new Registry;

$response = new Response;
$registry->set('response', $response);

$request = new Request;
$registry->set('request', $request);

//get the route from the url
if(isset($registry->get('request')->get['route'])){
    $route = $registry->get('request')->get['route'];
}else{
    $route = 'common/home';
}

//initiate the router and dispatch it base on the route
$router = new Router($registry);
$router->dispatch($route);

$registry->get('response')->output(); 
```

> 请注意我如何将所有内容加载到 中`$registry`，然后将其传递给`$router`which 然后将其传递给`$controller`.

这篇文章已经太长了，但我希望它能对 OpenCart 中的 MVC 模式有一个基本的了解。

> 如果你想让我继续这篇文章并告诉你其他东西是如何工作的，比如模型和视图，请评价这个答案，以便我知道。

另请查看我的 Youtube [https://www.youtube.com/dreamvention](https://www.youtube.com/dreamvention)和我的博客[https://dreamvention.com/blog](https://dreamvention.com/blog)我将在那里为你们发布更多提示和教程！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-20T10:18:42.603

PHP 是一种相当大的语言，具有[超过 5000 个内置函数](https://stackoverflow.com/questions/2243832/how-can-i-count-the-total-number-of-built-in-functions-in-php)，因此学习新平台的一个策略是确定它最常使用的函数并花一些时间来很好地了解这些函数。

我在 OpenCart 源代码上运行了一些查询，前 10 个最常用的函数是：

```
array()
count()
explode()
implode()
mktime()
delete()
time()
date()
sprintf()
list() 
```

此处列出的所有 52 个命令以及您可以在任何代码库上使用的 Linux bash 命令来识别常用功能： [https ://www.antropy.co.uk/blog/efficient-learning-for-new-opencart-developers/](https://www.antropy.co.uk/blog/efficient-learning-for-new-opencart-developers/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-06T19:44:29.497

这个 youtube 视频播放列表也有助于成为 OpenCart 开发者大师：

[OpenCart 视频教程](https://www.youtube.com/watch?v=7Q641RjdJY4&list=PLJrQQAOTh1X_QDKxUsfmIuteb-VXkBDNe)

1.  [简介和目录](https://www.youtube.com/watch?v=7Q641RjdJY4)本视频介绍了该系列
2.  [OpenCart 安装 localhost](https://www.youtube.com/watch?v=ZeTJKjlgRLg)本视频介绍了在 localhost 中安装 OpenCart
3.  [OpenCart 的文件和文件夹结构](https://www.youtube.com/watch?v=kCDqw7kcqLQ)它描述了 OpenCart 的文件和文件夹结构
4.  [在 OpenCart 中创建数据库表模式](https://www.youtube.com/watch?v=w8Uay-QvHFg)它显示了数据库表模式并展示了如何在 OpenCart 中创建数据库表
5.  [OpenCart 库预定义对象的方法](https://www.youtube.com/watch?v=EdJFjJek_3Y)它描述了 OpenCart 库预定义对象的方法并显示了在哪里可以找到它们。
6.  [OpenCart 中的 MVCL 模式、代码流和请求与响应](https://www.youtube.com/watch?v=X6bsMmReT-4)它显示了 OpenCart 中的 MVCL 模式、代码流和请求与响应。他们描述了如下图所示的流程： [![用代码描述的 MVCL](../Images/e9b1ad960b683d5fced047517e4c1f91.png)](https://i.stack.imgur.com/FRuI5.png)

7.  [安装、配置和卸载 OpenCart 模块](https://www.youtube.com/watch?v=mXhRSXw_ycE)它显示了上传模块的三种方法，然后安装、配置和卸载 OpenCart 3 模块/扩展。

8.  [Opencart 3](https://www.youtube.com/watch?v=l5I0nwQs27g)中的布局和位置 它描述了 OpenCart 3 的布局和位置。它展示了如何显示不同页面的自定义布局，并给出了类别页面的示例。我们展示了不同类别的不同布局。

9.  [Opencart 的事件概述](https://www.youtube.com/watch?v=_aH2hiUK-jo)您将了解 OpenCart 中的事件、它们的工作原理以及使它们如此有用的原因。

10.  [面向开发人员的 Opencart API 文档](https://youtu.be/bc2govdEiuA)此视频将展示如何使用和制作自定义 opencart API

看到这些视频后，您就可以开始编码了 :)

# javascript - 不可见时初始化谷歌地图=错误

> ID：13478996
> 
> 赞同：0
> 
> 时间：2012-11-20T17:45:54.627
> 
> 标签：javascript, jquery, google-maps

我在初始化谷歌地图时遇到了这个错误 - 而画布隐藏在（非活动）选项卡上。-> 它是可滚动和可缩放的，但不会在整个画布上延伸，画布的其余部分保持灰色。

![在此处输入图像描述](../Images/121d905caae088b1cb1ec3d38eaea44e.png)

我正在使用 jQuery 地图扩展 ( [http://code.google.com/p/jquery-ui-map/](http://code.google.com/p/jquery-ui-map/) ) 在我的页面上加载 gmap。还有两个选项卡视图，一个选项卡上没有地图，另一个选项卡上有 gmap。

我有两种情况（在页面加载时初始化地图）： 1\. 加载页面以显示 TAB1（带地图） 2\. 加载页面以显示 TAB2（不带地图）

在场景 1 中，一切都很好，地图显示和显示，正常运行。在场景 2 中，地图看起来像上图

切换选项卡时，我尝试再次初始化地图。但这似乎没有任何效果。

*   是否有正确重新初始化 gmap 元素的选项？
*   一种重新膨胀 gmap 元素的方法？
*   你有类似的错误并且知道我的解决方案吗？

谢谢！帕特里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:16:38.257

正如前面的答案中提到的，谷歌地图在初始化时只呈现其容器大小的地图。当包含元素不可见时，地图呈现大小为 0x0。

您需要通过触发`resize`地图本身的事件来通知地图其包含的大小已更改。

```
// Assuming "map" is the map object returned by "google.maps.Map"
google.maps.event.trigger(map, 'resize'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T17:52:31.360

已知问题/按预期工作。单击选项卡后，您必须向选项卡添加处理程序以初始化选项卡中的地图。相反，在选项卡处于活动状态之前不要初始化您的地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T18:08:26.230

如前所述，这是一个已知问题。解决方案是在您显示选项卡时动态加载地图。我看不到您的代码，因此这是一个非常简单的通用解决方案。修改您用于显示选项卡内容的任何功能，如下所示。当您加载特定选项卡时，请检查地图是否存在并在需要时加载。

```
$(document).ready(function() {

    function my_tab_reveal() {  // or whatever function you use for showing your tabs content
        // whatever your code for revealing tab content is here

        if (!loaded) {  // this checks to see if the map is not already loaded
            load(); // this loads the map
        }
    }

    var loaded = false;
    load = function() {
        // your google maps JavaScript code goes here

        // checks tiles to see if map has loaded
        google.maps.event.addListener(map, "tilesloaded", function() {
            loaded = true;
        });
    }

}); 
```