# StackOverflow 问答 15351000-15351999

# c# - 列表 从 WCF 肥皂服务返回到 PHP

> ID：15351001
> 
> 赞同：0
> 
> 时间：2013-03-12T00:09:20.297
> 
> 标签：c#, php, wcf, soap

我正在开发一个项目，并且我在控制台应用程序中有一个 WCF 自托管服务。然后我有一个访问soap服务并返回一个类型数组的PHP项目`List<SoapHandler.EmailStatus>`。下面是当我将数据打印到浏览器时如何返回数据的。

```
stdClass Object
(
    [getRamInfoResult] => stdClass Object
        (
            [SoapHandler.RamInfo] => stdClass Object
                (
                    [ramFree] => 3
                    [ramTotal] => 7
                )
        )
) 
```

我不知道如何访问 SoapHandler.RamInfo 中的数据，即 echo ramFree 和 ramTotal。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:13:06.863

试试这个

```
$ramFree = $ret->getRamInfoResult->{"SoapHandler.RamInfo"}; 
```

`$ret`你的肥皂返回值在哪里

# c++ - 从 (void *) 中“取消转换”并取消对 char 数组的引用

> ID：15351002
> 
> 赞同：0
> 
> 时间：2013-03-12T00:09:29.890
> 
> 标签：c++, pointers, casting, pthreads, void-pointers

我几乎完成了一项要求我使用 pthread 的家庭作业。我已经弄清楚了pthreads。我剩下的唯一问题是弄清楚如何通过 pthread_create() 将多个参数传递给线程。

我需要将两个字符传递给线程。我必须将它们转换为 (*void) 才能与 pthread_create() 一起使用。我可以传递它们，但我不知道如何从函数中的 *parameter 获取值。

```
void *my_function(void *parameter) {

    /* ATTEMPT 1 - DOESN'T WORK */
    //char* arguments[2];
    //arguments = (char * [2]) parameter;
    /*Error message: 
    error: ISO C++ forbids casting to an array type char* [2] [-fpermissive]
    error: incompatible types in assignment of char** to char*[2]
    */

    /* ATTEMPT 2 - DOESN'T WORK */
    //char *my_data = (char *)parameter;
    //my_data is blank when I try to use cout to check it's values

    /* What I need to do is get those two chars from the array and print them out as part of this thread function */

    pthread_exit(NULL);
}

int main(int argc, char **argv) {

    char duration = '5'; //in reality, this value is taken from argv but I am leaving that out for brevity

    pthread_t threads[3];

    for(int i=0; i < 3; i++){

         char thread_args[2] = {i, duration};

         //create thread with arguments passed in
         int results = pthread_create(&threads[i], NULL, my_function, (void *) &thread_args);

         //testing for pthread error
         if (results){
             printf("ERROR; return code from pthread_create() is %d\n", results);
             exit(-1);
         }

     }

    /* Wait for all threads to complete */
    for (int j=0; j < num_threads; j++) { // https://computing.llnl.gov/tutorials/pthreads/
        pthread_join(threads[j], NULL);
    }

    /* some information prints here that is unrelated to my problem (the date, time, etc) */

    pthread_exit(NULL);
} 
```

我能够毫无问题地传递一个值。有什么建议么？

我能找到的最接近的现有问题是这个，但我仍然没有运气：[Converting from void* to char ** in C](https://stackoverflow.com/questions/12053716/converting-from-void-to-char-in-c)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:32:59.453

请注意，在此循环中：

```
for(int i=0; i < 3; i++){
    char thread_args[2] = {i, duration};
    int results = pthread_create(&threads[i], NULL, my_function, (void *) 
    ...
} 
```

`thread_args`是一个具有自动存储持续时间的本地数组，其生命周期与每次迭代相关，因此有可能在线程访问它之前释放存储这些参数的内存，这将导致在这种情况下出现**未定义的行为**。

更好的方法是创建一个结构，用于将数据传递给该线程：

```
typedef struct {
    char duration;
    int num;
} ThreadData; 
```

然后您的代码可能如下所示：

```
void *my_function(void *parameter) {
    // retrieve and print the thread data:
    ThreadData* td = (ThreadData*) parameter;
    printf("num = %d, duration = %c\n", td->num, td->duration);
    delete td;
    return NULL;
}

int main(int argc, char **argv) {
    char duration = '5';
    pthread_t threads[3];

    for (int i = 0; i < 3; i++) {
        // create structure that will be passed to thread:
        ThreadData* td = new ThreadData;
        td->duration = duration;
        td->num = i;

        //create thread with arguments passed in:
        int ret = pthread_create(&threads[i], NULL, my_function, (void *) td);

        //testing for pthread error:
        if (ret) {
            printf("ERROR; return code from pthread_create() is %d\n", ret);
            exit(-1);
        }
    }
    // wait for all threads to complete:
    for (int i = 0; i < 3; i++) {
        pthread_join(threads[i], NULL);
    }
    exit(0);
} 
```

另请注意，要结束线程的执行，最好使用它`return`，`pthread_exit`因为`return`它可以保证线程例程中的变量将被销毁并且堆栈将被展开。有关更多信息，请参阅[pthread 启动函数中的 return() 与 pthread_exit()](https://stackoverflow.com/q/3692591/1168156)

# php - 外部评级系统的问题，TypeError: $(...).live is not a function

> ID：15351006
> 
> 赞同：0
> 
> 时间：2013-03-12T00:10:06.707
> 
> 标签：php, javascript, jquery

我很不擅长 JS，我正在尝试实施这个评级系统，[http://www.technabled.com/2011/02/pulse-lite-reddit-ajax-up-down-voting.html](http://www.technabled.com/2011/02/pulse-lite-reddit-ajax-up-down-voting.html)

但是当我用萤火虫检查它时，我得到了这个错误，有什么可能出错的线索吗？

TypeError: $(...).live 不是函数

```
$("input.pulse_vote_button").live('click', function(){ 
```

这是所有的JS：

```
$(function(){
var u = "/post/Pulse"; // NO trailing slash; Same as PULSE_DIR in pulse.config.php
$("input.pulse_vote_button").live('click', function(){
    var item_id = $(this).attr("data-itemId"); // id of the item to vote
    var format = $(this).attr("data-format"); // result format
    var dir = $(this).attr("data-dir"); // voting direction; up or down
    el = $(this);
    result = el.parent().next(".pulse_result_format").text();
    el.parent().next(".pulse_result_format").html(" <img class='busy' src='"+u+"/assets/images/ajaxloader.gif'/> "); // show loading animation
    el.parent().children(".pulse_vote_button").each(function(){
        $(this).attr("disabled","disabled"); // disable buttons
        $(this).addClass('disabled');
    });
    $.ajax({
        type: "POST",
        data: "action="+dir+"&item_id="+item_id+"&format="+format,
        url: u+"/votes.php",
        dataType: 'json',
        error: function(a,b){
            alert("Cannot connect to database. Please try again.");
            el.parent().children(".pulse_vote_button").each(function(){
                $(this).removeAttr("disabled"); // disable buttons
                $(this).removeClass('disabled');
            });             
            el.parent().next(".pulse_result_format").text(result);
        },
        success: function(obj)
        {
            if('error' in obj){
                switch(obj.error){
                    case "already_voted":
                        alert("You have already voted");
                        el.parent().next(".pulse_result_format").text(result); // clear the loader and replace with result
                        break;
                    case "database_error":
                        alert("Cannot connect to database. Please try again.");
                        el.parent().children(".pulse_vote_button").each(function(){
                            $(this).removeAttr("disabled"); // disable buttons
                            $(this).removeClass('disabled');
                        }); 
                        el.parent().next(".pulse_result_format").text(result); // clear the loader and replace with result
                        break;
                }
                return false;
            } if('msg' in obj) {
                var re = /\\/g; 
                obj.msg = obj.msg.replace(re, "");
                el.siblings(".busy").remove(); // remove loader
                el.parent().next(".pulse_result_format").text(obj.msg); // insert the formatted result
                el.parent().next(".pulse_result_format").show();
            }
        }
    });
 });
}); 
```

# ios - iOS 6 In App Purchases - 在不使用需要用户密码的“restoreCompletedTransactions”的情况下访问已完成的交易数据

> ID：15351008
> 
> 赞同：0
> 
> 时间：2013-03-12T00:10:15.660
> 
> 标签：ios, transactions, in-app-purchase, receipt

我有一个使用自动续订订阅的应用程序。我需要访问已完成的交易以确定用户是否有有效的订阅。我知道“restoreCompletedTransactions”会为您执行此操作，但是，它烦人地要求用户重新输入他们的 iTunes 密码。

有没有更好的方法来做到这一点？在本地存储收据数据是没有意义的，因为我必须检查最新的交易以确保还没有满足 expires_date，所以我假设我需要始终直接从 Apple 下载交易数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:06:15.667

如果您想知道用户是否有效，您想存储收据数据和您的共享密钥您想将收据数据作为您的共享密钥发布到苹果服务器，苹果将响应最新收据和最新状态如果状态为“0”，则用户有效，否则如果状态为“21006”，则此收据有效，但订阅已过期。当此状态代码返回到您的服务器时，收据数据也会被解码并作为响应的一部分返回。[验证此链接](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/RenewableSubscriptions/RenewableSubscriptions.html#//apple_ref/doc/uid/TP40008267-CH4-SW2)

# c# - 来自 Datarow 的 SqlHierarchyID 强制转换

> ID：15351009
> 
> 赞同：2
> 
> 时间：2013-03-12T00:10:25.537
> 
> 标签：c#, sql-server, sqlclr, hierarchyid

我正在尝试从已从 SQL Server 数据库获取的 DataRow 中检索 C# 中的 SqlHierarchyID 数据类型。在数据库调用之后，如果我写以下内容：

```
var id = datarow["TreeID"]; 
```

然后在 Visual Studio 中使用手表检查 id 的值，它持有正确的层次结构值（并且非空）。

但是，以下所有情况都会引发 InvalidCastException：

```
SqlHierarchyId id2 = (SqlHierarchyId) id;
SqlHierarchyId id3 = datarow.Field<SqlHierarchyId>("TreeID");
SqlHierarchyId id4 = (SqlHierarchyId)datarow["TreeID"]; 
```

此外，要求对两个对象的分配能力进行反思：

```
//returns false:
SqlHierarchyId id5 = new SqlHierarchyId();
return id5.GetType().IsAssignableFrom(id.GetType()); 
```

此外，尝试“软演员”返回 null：

```
SqlHierarchyId id6 = id as SqlHierarchyId; 
```

*   尝试一切作为 SqlHierarchyId？数据类型是徒劳的。
*   我正在引用 32 位程序集，并尝试在 64 位和 32 位模式下编译我的解决方案。
*   初始化一个空的 SqlHierarchyId 实例然后分配它没有帮助。

谢谢你的帮助！

-JT

**编辑：**程序集来自 SQL Server Express 2012 (x86) SDK 目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T15:05:20.510

我有同样的问题。原来我添加了错误的Microsoft.SqlServer.Types.dll的链接。对于 MS SQL 2008，它位于 C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies 对于 MS SQL 2012 在 C:\Program Files (x86)\Microsoft SQL Server\110\SDK\Assemblies 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:59:45.333

怎么用

```
//convert the string back into a hierarchyid
oRow["NodeKey"] = SqlHierarchyId.Parse((string)oRow["NodeString"]); 
```

我还看到您正在使用一棵树，所以这篇代码项目[文章](http://www.codeproject.com/Articles/37038/Loading-a-TreeView-using-HierarchyID)可能会对您有所帮助

# maven - 无法在 Glassfish 上运行 Arquillian 测试用例

> ID：15351010
> 
> 赞同：3
> 
> 时间：2013-03-12T00:10:26.067
> 
> 标签：maven, jboss-arquillian, shrinkwrap

我在一个非常简单的 Arquillian 测试用例实现中陷入了非常糟糕的境地。我跟着[Can I add jars to maven 2 build classpath 而不安装它们？](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them/7623805#7623805)将我的项目 jar 添加到 Maven 存储库。我使用 Glassfish 服务器作为我的应用程序服务器。然后我需要编写 arquillian 测试用例。
为此，我使用了以下代码

```
@Inject
   private ControllerLoginModule controllerloginmodule;
    @Deployment
   public static WebArchive createDeployment()
   {
     File[] lib = Maven.resolver()
            .resolve("com.controllerjars:controllerbeans:1.0.0","com.controllerjars:controllerapi:2.0.0","com.controllerjars:controllerauth:1.0.0")
            .withTransitivity().as(File.class);

    return ShrinkWrap.create(WebArchive.class, "test.war")
            .addClasses(ControllerLoginModule.class,AuthRealm.class,IAccountManagerInternal.class)
            .addAsLibraries(lib)
            .addAsWebInfResource(new StringAsset("<beans/>"), "beans.xml")
            .addAsWebInfResource(new StringAsset("<web-app></web-app>"), "web.xml");

   }  
@Test
   public void testIsDeployed()
   {
      Assert.assertNotNull(controllerloginmodule);

   } 
```

基本上我正在加载一些包含被测类和这些类所依赖的类的罐子。最后，我试图从中创建一个网络档案。然后我尝试测试对象是否为空。

我可以从堆栈跟踪中找出的问题是部署无法从 Maven 中找到文件。下面是我尝试运行测试用例时观察到的堆栈跟踪。

```
java.lang.RuntimeException: Could not invoke deployment method: public static org.jboss.shrinkwrap.api.spec.WebArchive com.appdynamics.auth.ControllerLoginModuleTest.createDeployment()
    at org.jboss.arquillian.container.test.impl.client.deployment.AnnotationDeploymentScenarioGenerator.invoke(AnnotationDeploymentScenarioGenerator.java:160)
    at org.jboss.arquillian.container.test.impl.client.deployment.AnnotationDeploymentScenarioGenerator.generateDeployment(AnnotationDeploymentScenarioGenerator.java:94)
    at org.jboss.arquillian.container.test.impl.client.deployment.AnnotationDeploymentScenarioGenerator.generate(AnnotationDeploymentScenarioGenerator.java:57)
    at org.jboss.arquillian.container.test.impl.client.deployment.DeploymentGenerator.generateDeployment(DeploymentGenerator.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
    at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
    at org.jboss.arquillian.container.test.impl.client.ContainerEventController.execute(ContainerEventController.java:100)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
    at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
    at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
    at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
    at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.beforeClass(EventTestRunnerAdaptor.java:80)
    at org.jboss.arquillian.junit.Arquillian$2.evaluate(Arquillian.java:182)
    at org.jboss.arquillian.junit.Arquillian.multiExecute(Arquillian.java:314)
    at org.jboss.arquillian.junit.Arquillian.access$100(Arquillian.java:46)
    at org.jboss.arquillian.junit.Arquillian$3.evaluate(Arquillian.java:199)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.jboss.arquillian.junit.Arquillian.run(Arquillian.java:147)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.arquillian.container.test.impl.client.deployment.AnnotationDeploymentScenarioGenerator.invoke(AnnotationDeploymentScenarioGenerator.java:156)
    ... 50 more
Caused by: java.lang.RuntimeException: Could not create new descriptor instance
    at org.jboss.shrinkwrap.resolver.api.DependencyBuilderInstantiator.createFromUserView(DependencyBuilderInstantiator.java:101)
    at org.jboss.shrinkwrap.resolver.api.DependencyResolvers.use(DependencyResolvers.java:39)
    at com.appdynamics.auth.ControllerLoginModuleTest.createDeployment(ControllerLoginModuleTest.java:51)
    ... 55 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.jboss.shrinkwrap.resolver.api.DependencyBuilderInstantiator.createFromUserView(DependencyBuilderInstantiator.java:96)
    ... 57 more
Caused by: java.lang.NoSuchMethodError: org.codehaus.plexus.DefaultPlexusContainer.lookup(Ljava/lang/Class;)Ljava/lang/Object;
    at org.jboss.shrinkwrap.resolver.impl.maven.MavenRepositorySystem.getRepositorySystem(MavenRepositorySystem.java:220)
    at org.jboss.shrinkwrap.resolver.impl.maven.MavenRepositorySystem.<init>(MavenRepositorySystem.java:64)
    at org.jboss.shrinkwrap.resolver.impl.maven.MavenBuilderImpl.<init>(MavenBuilderImpl.java:105)
    ... 62 more 
```

我无法理解我在哪里以及缺少什么。我更新了[Can I add jars to maven 2 build classpath 中给出的依赖项的条目而不安装它们？](https://stackoverflow.com/questions/364114/can-i-add-jars-to-maven-2-build-classpath-without-installing-them/7623805#7623805). 任何帮助是极大的赞赏。谢谢。

下面是我的pom

```
 <?xml version="1.0" encoding="UTF-8"?>
<project
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

   <!-- Model Information -->
<modelVersion>4.0.0</modelVersion>

   <!-- Artifact Information -->
  <groupId>com.auth</groupId>
  <artifactId>controller.functionaltest</artifactId>
  <version>1.0.0-SNAPSHOT</version>
<packaging>pom</packaging>

<!-- Properties -->
<properties>
  <version.shrinkwrap.resolver>2.0.0-beta-2</version.shrinkwrap.resolver>
  <version.junit>4.11</version.junit>
  <version.arquillian_core>1.0.3.Final</version.arquillian_core>
  <project.basedir>/controller.functionaltest</project.basedir>
  <version.org.jboss.shrinkwrap>1.1.2</version.org.jboss.shrinkwrap>
</properties>

<!-- Dependency Management -->
<dependencyManagement>
  <dependencies>
  <dependency>
  <groupId>org.jboss.shrinkwrap.resolver</groupId>
  <artifactId>shrinkwrap-resolver-bom</artifactId>
  <version>${version.shrinkwrap.resolver}</version>
  <scope>import</scope>
  <type>pom</type>
  </dependency>
  <dependency>
  <groupId>org.jboss.arquillian</groupId>
  <artifactId>arquillian-bom</artifactId>
  <version>${version.arquillian_core}</version>
  <type>pom</type>
  <scope>import</scope>
  </dependency>
  </dependencies>
</dependencyManagement>

<!-- Dependencies -->
<dependencies>
  <dependency>
  <groupId>org.jboss.spec</groupId>
  <artifactId>jboss-javaee-6.0</artifactId>
  <version>1.0.0.Final</version>
  <type>pom</type>
  <scope>provided</scope>
  </dependency>
  <dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>${version.junit}</version>
  <scope>test</scope>
  </dependency>
  <dependency>
  <groupId>org.jboss.arquillian.junit</groupId>
  <artifactId>arquillian-junit-container</artifactId>
  <version>${version.arquillian_core}</version>
  <scope>test</scope>
  </dependency>
  <dependency>
  <groupId>com.controllerjars</groupId>
  <artifactId>commonscollections</artifactId>
  <version>3.2.1</version>
  </dependency>
  <dependency>
  <groupId>com.controllerjars</groupId>
  <artifactId>commonutil</artifactId>
  <version>1.0.0</version>
  </dependency>

  <dependency>
  <groupId>com.controllerjars</groupId>
  <artifactId>controllerapi</artifactId>
  <version>2.0.0</version>
  </dependency>
  <dependency>
  <groupId>com.controllerjars</groupId>
  <artifactId>controllerauth</artifactId>
  <version>1.0.0</version>
  </dependency>
  <dependency>
  <groupId>com.controllerjars</groupId>
  <artifactId>controllerbeans</artifactId>
  <version>1.0.0</version>
  </dependency>

 <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-depchain</artifactId>
        <type>pom</type>
        <version>2.0.0-beta-2</version>
    </dependency>
</dependencies>

<!-- Repositories -->
<repositories>
  <repository>
  <id>JBOSS_NEXUS</id>
  <url>http://repository.jboss.org/nexus/content/groups/public</url>
  </repository>
  <repository>
  <releases>
  <enabled>true</enabled>
  <checksumPolicy>ignore</checksumPolicy>
  </releases>
  <snapshots>
  <enabled>false</enabled>
  </snapshots>
  <id>repo</id>
  <url>file://${project.basedir}/src/main/resources</url>
  </repository>
</repositories>

<!-- Plugin Configuration -->
<build>
  <finalName>controller.functionaltest</finalName>

  <!-- Compiler -->
  <plugins>
  <plugin>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>2.3.2</version>
  <configuration>
  <source>1.6</source>
  <target>1.6</target>
  <encoding>UTF-8</encoding>
  </configuration>
  </plugin>
  </plugins>

  <!-- Plugin Management -->
  <pluginManagement>
  <plugins>
  <!--This plugin's configuration is used to store Eclipse m2e settings
  only. It has no influence on the Maven build itself. -->
  <plugin>
  <groupId>org.eclipse.m2e</groupId>
  <artifactId>lifecycle-mapping</artifactId>
  <version>1.0.0</version>
  <configuration>
  <lifecycleMappingMetadata>
  <pluginExecutions>
  <pluginExecution>
  <pluginExecutionFilter>
  <groupId>
  org.apache.maven.plugins
  </groupId>
  <artifactId>
  maven-dependency-plugin
  </artifactId>
  <versionRange>[2.1,)</versionRange>
  <goals>
  <goal>unpack</goal>
  </goals>
  </pluginExecutionFilter>
  <action>
  <ignore></ignore>
  </action>
  </pluginExecution>
  </pluginExecutions>
  </lifecycleMappingMetadata>
  </configuration>
  </plugin>
  </plugins>
  </pluginManagement>
</build>
<profiles>
  <profile>
  <id>GLASSFISH_REMOTE_3.1_(REST)</id>
  <build>
  <plugins>
  <plugin>
  <artifactId>maven-dependency-plugin</artifactId>
  <extensions>false</extensions>
  <executions>
  <execution>
  <id>unpack</id>
  <phase>process-test-classes</phase>
  <goals>
  <goal>unpack</goal>
  </goals>
  <configuration>
  <artifactItems>
  <artifactItem>
  <groupId>org.jboss.as</groupId>
  <artifactId>jboss-as-dist</artifactId>
  <version>7.1.3.Final</version>
  <type>zip</type>
  <overWrite>false</overWrite>
  <outputDirectory>~/JBOSS_Managed</outputDirectory>
  </artifactItem>
  </artifactItems>
  </configuration>
  </execution>
  </executions>
  </plugin>
  </plugins>

  </build>
  <dependencies>
  <dependency>
  <groupId>org.jboss.arquillian.container</groupId>
  <artifactId>arquillian-glassfish-remote-3.1</artifactId>
  <version>1.0.0.CR3</version>
  </dependency>
  </dependencies>
  </profile>
  <profile>
  <id>JBOSS_AS_MANAGED_7.X</id>
  <build>
  <plugins>
  <plugin>
  <artifactId>maven-dependency-plugin</artifactId>
  <extensions>false</extensions>
  <executions>
  <execution>
  <id>unpack</id>
  <phase>process-test-classes</phase>
  <goals>
  <goal>unpack</goal>
  </goals>
  <configuration>
  <artifactItems>
  <artifactItem>
  <groupId>org.jboss.as</groupId>
  <artifactId>jboss-as-dist</artifactId>
  <version>7.1.3.Final</version>
  <type>zip</type>
  <overWrite>false</overWrite>
  <outputDirectory>~/JBOSS_Managed</outputDirectory>
  </artifactItem>
  </artifactItems>
  </configuration>
  </execution>
  </executions>
  </plugin>
  </plugins>

  </build>
  <dependencies>
  <dependency>
  <groupId>org.jboss.as</groupId>
  <artifactId>jboss-as-arquillian-container-managed</artifactId>
  <version>7.1.3.Final</version>
  </dependency>
  </dependencies>
  </profile>
</profiles>
</project> 
```

下面是我的依赖树。

```
 [INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building controller.functionaltest 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ controller.functionaltest ---
[INFO] com.appdynamics.auth:controller.functionaltest:pom:1.0.0-SNAPSHOT
[INFO] +- org.jboss.spec:jboss-javaee-6.0:pom:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.annotation:jboss-annotations-api_1.1_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.resource:jboss-connector-api_1.5_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.ejb:jboss-ejb-api_3.1_spec:jar:1.0.0.Final:provided
[INFO] |  |  \- javax.xml:jaxrpc-api:jar:1.1:provided
[INFO] |  +- org.jboss.spec.javax.el:jboss-el-api_2.2_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.interceptor:jboss-interceptors-api_1.1_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.security.jacc:jboss-jacc-api_1.4_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.enterprise.deploy:jboss-jad-api_1.2_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.security.auth.message:jboss-jaspi-api_1.0_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.xml.registry:jboss-jaxr-api_1.0_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.jms:jboss-jms-api_1.1_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.servlet.jsp:jboss-jsp-api_2.2_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.servlet:jboss-servlet-api_3.0_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.xml.bind:jboss-jaxb-api_2.2_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.xml.rpc:jboss-jaxrpc-api_1.1_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.xml.soap:jboss-saaj-api_1.3_spec:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.spec.javax.xml.ws:jboss-jaxws-api_2.2_spec:jar:1.0.0.Final:provided
[INFO] |  +- javax.activation:activation:jar:1.1:provided
[INFO] |  +- javax.enterprise:cdi-api:jar:1.0-SP4:provided
[INFO] |  +- com.sun.faces:jsf-api:jar:2.0.3-b05:provided
[INFO] |  +- javax.inject:javax.inject:jar:1:provided
[INFO] |  +- javax.jws:jsr181-api:jar:1.0-MR1:provided
[INFO] |  +- javax.mail:mail:jar:1.4.2:provided
[INFO] |  +- javax.servlet:jstl:jar:1.2:provided
[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.0.Final:provided
[INFO] |  +- org.jboss.resteasy:jaxrs-api:jar:2.1.0.GA:provided
[INFO] |  +- stax:stax-api:jar:1.0.1:provided
[INFO] |  \- javax.validation:validation-api:jar:1.0.0.GA:provided
[INFO] +- junit:junit:jar:4.11:test (scope not updated to runtime)
[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test
[INFO] +- org.jboss.arquillian.junit:arquillian-junit-container:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.junit:arquillian-junit-core:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.test:arquillian-test-api:jar:1.0.3.Final:test
[INFO] |  |  \- org.jboss.arquillian.core:arquillian-core-api:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.test:arquillian-test-spi:jar:1.0.3.Final:test
[INFO] |  |  \- org.jboss.arquillian.core:arquillian-core-spi:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-test-api:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-test-spi:jar:1.0.3.Final:test
[INFO] |  |  \- org.jboss.arquillian.container:arquillian-container-spi:jar:1.0.3.Final:test
[INFO] |  |     \- org.jboss.shrinkwrap.descriptors:shrinkwrap-descriptors-api-base:jar:2.0.0-alpha-3:test
[INFO] |  +- org.jboss.arquillian.core:arquillian-core-impl-base:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.test:arquillian-test-impl-base:jar:1.0.3.Final:test
[INFO] |  +- org.jboss.arquillian.container:arquillian-container-impl-base:jar:1.0.3.Final:test
[INFO] |  |  +- org.jboss.arquillian.config:arquillian-config-api:jar:1.0.3.Final:test
[INFO] |  |  +- org.jboss.arquillian.config:arquillian-config-impl-base:jar:1.0.3.Final:test
[INFO] |  |  \- org.jboss.shrinkwrap.descriptors:shrinkwrap-descriptors-spi:jar:2.0.0-alpha-3:test
[INFO] |  \- org.jboss.arquillian.container:arquillian-container-test-impl-base:jar:1.0.3.Final:test
[INFO] +- com.controllerjars:commonscollections:jar:3.2.1:compile
[INFO] +- com.controllerjars:commonutil:jar:1.0.0:compile
[INFO] +- com.controllerjars:controllerapi:jar:2.0.0:compile
[INFO] +- com.controllerjars:controllerauth:jar:1.0.0:compile
[INFO] +- com.controllerjars:controllerbeans:jar:1.0.0:compile
[INFO] \- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-depchain:pom:2.0.0-beta-2:compile
[INFO]    +- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-api:jar:2.0.0-beta-2:compile
[INFO]    +- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-spi:jar:2.0.0-beta-2:compile
[INFO]    +- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-api-maven:jar:2.0.0-beta-2:compile
[INFO]    +- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-impl-maven:jar:2.0.0-beta-2:runtime
[INFO]    |  +- org.sonatype.aether:aether-api:jar:1.13.1:runtime
[INFO]    |  +- org.sonatype.aether:aether-impl:jar:1.13.1:runtime
[INFO]    |  +- org.sonatype.aether:aether-spi:jar:1.13.1:runtime
[INFO]    |  +- org.sonatype.aether:aether-util:jar:1.13.1:runtime
[INFO]    |  +- org.sonatype.aether:aether-connector-wagon:jar:1.13.1:runtime
[INFO]    |  +- org.apache.maven:maven-aether-provider:jar:3.0.4:runtime
[INFO]    |  +- org.apache.maven:maven-model:jar:3.0.4:runtime
[INFO]    |  +- org.apache.maven:maven-model-builder:jar:3.0.4:runtime
[INFO]    |  +- org.apache.maven:maven-repository-metadata:jar:3.0.4:runtime
[INFO]    |  +- org.apache.maven:maven-settings:jar:3.0.4:runtime
[INFO]    |  +- org.apache.maven:maven-settings-builder:jar:3.0.4:runtime
[INFO]    |  +- org.codehaus.plexus:plexus-interpolation:jar:1.14:runtime
[INFO]    |  +- org.codehaus.plexus:plexus-utils:jar:2.0.6:runtime
[INFO]    |  +- org.apache.maven.wagon:wagon-provider-api:jar:2.2:runtime
[INFO]    |  +- org.apache.maven.wagon:wagon-file:jar:2.2:runtime
[INFO]    |  \- org.apache.maven.wagon:wagon-http-lightweight:jar:2.2:runtime
[INFO]    |     \- org.apache.maven.wagon:wagon-http-shared4:jar:2.2:runtime
[INFO]    |        +- org.jsoup:jsoup:jar:1.6.1:runtime
[INFO]    |        +- org.apache.httpcomponents:httpcore:jar:4.1.2:runtime
[INFO]    |        \- commons-io:commons-io:jar:2.0.1:runtime
[INFO]    \- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-impl-maven-archive:jar:2.0.0-beta-2:runtime
[INFO]       +- org.jboss.shrinkwrap:shrinkwrap-impl-base:jar:1.0.1:runtime
[INFO]       |  +- org.jboss.shrinkwrap:shrinkwrap-api:jar:1.0.1:runtime
[INFO]       |  \- org.jboss.shrinkwrap:shrinkwrap-spi:jar:1.0.1:runtime
[INFO]       +- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-api-maven-archive:jar:2.0.0-beta-2:runtime
[INFO]       +- org.jboss.shrinkwrap.resolver:shrinkwrap-resolver-spi-maven-archive:jar:2.0.0-beta-2:runtime
[INFO]       +- org.codehaus.plexus:plexus-compiler-javac:jar:2.1:runtime
[INFO]       |  \- org.codehaus.plexus:plexus-compiler-api:jar:2.1:runtime
[INFO]       \- org.codehaus.plexus:plexus-component-api:jar:1.0-alpha-33:runtime
[INFO]          \- org.codehaus.plexus:plexus-classworlds:jar:1.2-alpha-10:runtime 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:06:55.010

我认为这个问题的原因是由于模糊的 ShrinkWrap Resolver 依赖关系。您应该在 Arquillian BOM 之前在依赖项管理链中声明 ShrinkWrap 解析器物料清单。我推荐使用 ShrinkWrap Resolver 2.0.0-beta-2。

```
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.jboss.shrinkwrap.resolver</groupId>
            <artifactId>shrinkwrap-resolver-bom</artifactId>
            <version>2.0.0-beta-2</version>
            <scope>test</scope>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.jboss.arquillian</groupId>
            <artifactId>arquillian-bom</artifactId>
            <version>${arquillian.version}</version>
            <scope>test</scope>
            <type>pom</type>
        </dependency>
</dependencyManagement> 
```

在依赖项部分，您需要存在以下依赖项：

```
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.jboss.shrinkwrap.resolver</groupId>
    <artifactId>shrinkwrap-resolver-depchain</artifactId>
    <type>pom</type>
    <version>2.0.0-beta-2</version>
</dependency>
<dependency>
    <groupId>org.jboss.arquillian.junit</groupId>
    <artifactId>arquillian-junit-container</artifactId>
    <version>${arquillian.version}</version>
    <scope>test</scope>
</dependency> 
```

ShrinkWrap Resolver 2.0.0-beta-2 提供了一个用于解析工件的新 API，因此您需要确保使用该特定 API，例如：

```
File lib = Maven.resolver()
        .resolve("artifact-groupid:artifact-artifactid:version")
        .withoutTransitivity()
        .asSingle(File.class);
return ShrinkWrap.create(WebArchive.class, "test.war")
        .addClass(MyClass.class)
        .addAsLibrary(lib)
        .addAsWebInfResource(new StringAsset("<beans/>"), "beans.xml")
        .addAsWebInfResource(new StringAsset("<web-app></web-app>"), "web.xml"); 
```

我创建了一个示例项目，其中包含使用 ShrinkWrap Resolver 所需的最低限度，它利用了上面的配置和代码，但是在嵌入式 TomEE 容器中运行。你可以在这里找到它：[https](https://github.com/tommysdk/showcase/tree/master/arquillian-shrinkres) ://github.com/tommysdk/showcase/tree/master/arquillian-shrinkres 。希望这可以帮助您理清所需的正确依赖项和版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-11T07:54:08.760

我遇到过同样的问题。原因是无法访问资源文件。例子：

```
.addAsWebResource("index.html") 
```

*Index.html*文件在测试运行时必须在类路径中，否则抛出的异常是（！）：

*java.lang.RuntimeException：无法调用部署方法：public static org.jboss.shrinkwrap.api.Archive com.intrasoft.ssp.persistence.admin.service.IndexPageTest.createDeployment()*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:00:45.517

您的 POM 看起来会导致 Arquillian BOM 和 ShrinkWrap Resolvers depchain 引入的 ShrinkWrap 工件之间存在冲突或缺少依赖关系。

通过[此处的 POM 片段](https://community.jboss.org/wiki/HowToIAddMavenArtifactsToMyShrinkWrapArchives)，我相信您还应该在项目 POM 中添加 ShrinkWrap Resolver BOM 作为托管依赖项，在 Arquillian BOM 之前。

# firebug - Firebug 的 CSS 面板中的 Live Edit 和 Source Edit 有什么区别？

> ID：15351011
> 
> 赞同：2
> 
> 时间：2013-03-12T00:10:37.093
> 
> 标签：firebug, edit

我刚刚做了一个谷歌搜索，找不到一个直接的答案。问题是Firebug 的*CSS*面板工具栏中的*Live Edit*和*Source Edit*选项有什么区别？

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:00:18.400

*Source Edit*允许您在浏览器加载 CSS 时对其进行编辑。即包括评论和格式。

*Live Edit*在浏览器解释后显示 CSS。即没有注释并且CSS 规则有一个统一的格式。

有关更多信息，请参阅[CSS 面板的说明](https://getfirebug.com/wiki/index.php/CSS_Panel#Edit_Button)。*

# java - 无法从 ant 编译但可以从命令行运行，为什么？

> ID：15351012
> 
> 赞同：0
> 
> 时间：2013-03-12T00:10:39.357
> 
> 标签：java, eclipse, ant, payment-gateway

我无法在 ant 和 eclipse 中为我的项目提供课程。

我正在使用 eclipse **juno+wpt**和**ant 1.7**。

我正在将委内瑞拉一家名为 CrediCard 的信用卡公司的支付平台集成到一个已经工作的站点。

我们收到了一个 .zip 包，其中包含以下内容：

![银行收到的包裹结构](../Images/d664a9f7ecd1f4350cc1a0085abc7d07.png)

我使用 debian 进行开发，因为银行要求我们编译和运行项目，我们需要一个名为：

**libc6.1-1.so.2**

需要项目运行，我不太明白。也因为生产操作系统也是非 debian。

该软件包有一个名为 ejemplodigest.java 的源示例，其中包含编译它的说明，如下所示：

```
javac -classpath /home/DigestJavaLinux/classes ejemplodigest.java 
```

并像这样运行它：

```
java -Djava.library.path=/home/DigestJavaLinux/lib/ -classpath /home/DigestJavaLinux/:/home/DigestJavaLinux/classes ejemplodigest 
```

这些命令在命令行上完美运行。要运行它，必须在 debian 中安装 依赖**项 libc6.1-1.so.2 。**

当我在我的项目中包含相应的行并将类路径添加到 ant 的 javac 任务时，我什至无法用 ant 编译代码。我得到错误

```
symbol  : class OasisEMSecIm
    [javac] location: class com.bamboo.catW3.business.impl.MainHtmlController
    [javac]          OasisEMSecIm digest= new OasisEMSecImp(); 
```

在类的声明和导入中：

```
import OasisEM.*;
import eMerchantServlet.*; 
```

没有找到：

```
OasisEM does not exist. 
```

这是给出的示例源：

```
//import OasisEM.*;
import java.*;
// import eMerchantServlet.*;

class ejemplodigest {
    public static void main(String args[]) {
        String varMerchant = "00260364";        // Merchant ID
        String varStore = "0";                  // Store ID
        String varTerm = "4001";                // Term ID
        String varTotal = "12345445";           // Monto de Transaccion
        String varCurrency = "937";             // Codigo de Moneda
        String varOrder_id = "444444";          // Order Id
        String varDigest;                       // Valor de Digest

        OasisEMSecImp digest= new OasisEMSecImp();
        varDigest = digest.getDigest(varTotal,varOrder_id,varMerchant,varStore,varTerm,varCurrency);

        System.out.println ("Merchant ID :" + varMerchant);
        System.out.println ("Store ID :" + varStore);
        System.out.println ("Term ID :" + varTerm);
        System.out.println ("Total :" + varTotal);
        System.out.println ("Currency :" + varCurrency);
        System.out.println ("Order ID :" + varOrder_id);
        System.out.println ("Digest " + varDigest);

    }
} 
```

我也无法让 Eclipse 识别它们，我尝试将类文件夹添加到 Eclipse，使类成为 jar 并添加它。

我检查了路径并被 ant 任务正确接收，所有其他依赖项都可以正常工作。

ANT 问题：为什么示例源代码使用命令行编译，但是当将相同的行添加到我的项目中的方法并将类路径添加到类文件夹时，它不会编译？

Eclipse 问题：如何让 Eclipse 识别 OasisEMSecImp 类？

**更新**

您好，蚂蚁文件有点长，我将如何粘贴我认为相关的部分：

```
<path id="library.digest.classpath">
            <pathelement location="../../digest/classes"/>
        </path>

 <path id="catw.module.classpath">
        <path refid="library.blazeds.classpath"/>
        <path refid="library.hibernate3.classpath"/>
        <path refid="library.jta.classpath"/>
        <path refid="library.log4j.classpath"/>
        <path refid="library.mail.classpath"/>
        <path refid="library.oreilly.classpath"/>
        <path refid="library.spring-2.0.7.classpath"/>
        <path refid="library.velocity.classpath"/>
        <path refid="library.jexcel.classpath"/>
        <path refid="library.tomcat_5.classpath"/>
        <path refid="library.digest.classpath" />
        <pathelement location="../catw-common/build/catw-common.jar"/>
    </path>

<javac destdir="${catw.output.dir}" debug="${compiler.debug}" nowarn="${compiler.generate.no.warnings}" memorymaximumsize="${compiler.max.memory}" fork="true">
            <compilerarg line="${compiler.args.catw}"/>
            <bootclasspath refid="catw.module.bootclasspath"/>
            <classpath refid="catw.module.classpath"/>
            <src refid="catw.module.sourcepath"/>
            <patternset refid="excluded.from.compilation.catw"/>
        </javac> 
```

我调试了 catw.module.classpath 并且位置正确。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:38:47.037

我认为您没有正确设置 ant 中的路径。您在路径元素中使用相对路径。因此，请确保您的项目的 basedir 设置正确。您可能还需要将 verbose 设置为 true 以获得一些有用的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:36:29.133

我已经理解了这个问题并找到了解决我的情况的方法，我[在这个问题的回答中](https://stackoverflow.com/questions/15576305/unable-to-create-jar-when-adding-the-package-declaration)解释了它。

希望它可以帮助某人。

# java - JUnit4 预期异常

> ID：15351015
> 
> 赞同：3
> 
> 时间：2013-03-12T00:11:02.790
> 
> 标签：java, junit, junit4

我正在为一个项目使用 JUnit4 进行场景测试。

在其中一项测试中，我需要检查预期的异常。使用 JUnit4，我使用注释来做到这一点。

```
 @Test(expected=...) 
```

现在的问题是，在测试中引发异常的代码下面还有一些其他注释我需要检查哪些没有被执行。给出一个例子：

```
 @Test(expected=NullPointerException.class)
     public void nullPointerTest() {
         Object o = null;
         o.toString();
         assertTrue(false);
     } 
```

这个测试通过了，因为它得到了 nullpointerexception，但是很明显，asserTrue(false) 有一个断言错误，因此我希望它失败。

解决此问题的最佳方法是什么？对此的解决方案可能如下，但我不知道这是否是正确的方法。

```
@Test
public void nullPointerTest2() {
    boolean caught = false;
    try{
        Object o = null;
        o.toString();
    }
    catch(NullPointerException e)
    {
        caught = true;
    }
    assertTrue(caught);
    assertTrue(false);
} 
```

第二次测试如预期的那样失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:06:18.613

考虑：

```
@Test(expected=NullPointerException.class)
public void nullPointerTest2() {
  boolean caught = false;
  try{
     Object o = null;
     o.toString();
  }
  catch(NullPointerException e)
  {
    // test other stuff here
     throw e;
  }
} 
```

这允许在充分利用 JUnit 的内置异常检查的同时进行额外检查。

此外，我认为在许多情况下使用`@Rule ExpectedException`to 是一个更好的选择。`expected`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T00:21:22.640

JUnit4 的行为符合预期：当抛出异常时，执行不会继续。所以`NullPointerException`被抛出，测试方法退出，JUnit4 将它标记为通过，因为你期望一个异常。null 取消引用后的代码实际上不存在。

如果您想要第二次测试的行为，那么您所写的是一个很好的解决方案。但这是一件奇怪的事情。在我看来，您将两种不同的测试混为一谈。一项测试应该测试在异常情况下是否引发了异常。第二个测试应该测试第二个断言检查的任何内容。

# ios - 当我在 IOS 中使用其父级时，是否有可能对弱引用进行垃圾收集？

> ID：15351016
> 
> 赞同：3
> 
> 时间：2013-03-12T00:11:23.040
> 
> 标签：ios

假设我有一个父 UIView。这个 UIView 有一个指向子视图 UIImageView 的弱指针。如果 UIView 当前显示在屏幕上，由于父 UIview 只有对 UIImageView 的弱引用，图像视图是否可能被垃圾收集？

仅供参考 UIview 和 UIImageView 都将在屏幕上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T00:22:13.170

> 这个 UIView 有一个指向子视图 UIImageView 的弱指针

停止。如果 UIImageView 是 UIView 的子视图，那么 UIView 有一个指向 UIImageView 的*强*指针。故事结局。

换句话说，视图保留了它的子视图。只要子视图是子视图，它就不会烟消云散。

现在，另一方面，如果您删除了该子视图，那么您必须担心它的内存管理，否则它*可能会*化为乌有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:57:24.737

当您向视图添加子视图时，根据定义，它将保持对该子视图的强引用。这只是`addSubview`维护视图层次结构的内部过程的一部分。视图将保持对其子视图的强引用，直到该子视图被手动删除（例如， via `removeFromSuperview`）或者如果父视图本身被删除（例如，您关闭了它的视图控制器）。

视图内部在其子视图上维护的这些强引用不应与`weak`您（或 IB）可能添加到您的视图或视图控制器子类 .h 文件的引用相混淆。这些`weak`引用只是为您提供引用子视图或控件的便捷方式。您的 .h 文件具有`weak`对子视图的引用（例如`IBOutlet`为了您的利益）这一事实并不会改变视图自动在幕后对其子视图的强引用作为整体视图层次结构的一部分这一事实。

因此，一个子视图，例如一个图像视图，只有在其最后一个强引用被删除时才会被释放（或者在非 ARC 语言中，当保留计数降至零时）。如果您已将图像视图添加为子视图，则在消除该强引用之前它不会被释放（即图像视图从其父视图中删除，或者父视图本身被删除）。显然，如果您要维护对控件的其他强引用，那么也必须删除这些引用，以便释放子视图。

一个警告：如果你没有使用 ARC，也就是说，你正在做手动引用计数（例如手动调用`release`and `autorelease`），你肯定有可能犯编程错误并“过度释放”图像视图，从而让保留count 降为零，因此可以过早地释放它。但是鉴于您在`weak`问题中引用了属性，您必须使用 ARC，所以这个观察是没有实际意义的。

在其他情况下，草率地使用`weak`变量可能会导致问题，但我不愿详细说明，除非您告诉我们子视图根本没有显示。

（顺便说一句，您在问题中提到了垃圾收集（GC），但我认为真正的问题是“我的子视图是否可能在 ... 时被释放”。显然，iOS 没有 GC。但我假设真正的问题是您的子视图是否可能在其仍存在于其父视图上时被释放。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T00:17:23.797

当期望创建子视图并将其直接添加到视图子视图层次结构时，您可以在子视图上使用“弱”属性：`UIView addSubview:`已经保持对视图的强引用。

如果您的视图是 UIViewController 的弱属性，您通常从 NIB 或在`-(void)viewDidLoad`. 如果控制器的视图因为不再需要而被丢弃，那么您的子视图也会如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:14:39.633

如果 UIVIew 添加了 UIImageView ，则引用将增加，直到从视图中删除该操作才会释放。

在不知道你为什么问这个的情况下，我还会说我认为对它进行字符串引用不会有任何害处，因为在清理 UIView 时，它也会取消引用 uiimageview 并且它会被释放然后。

另外我知道你说垃圾收集但iOS没有垃圾收集。不过我知道你的意思

# algorithm - （固定）平衡树的摊销成本

> ID：15351021
> 
> 赞同：1
> 
> 时间：2013-03-12T00:12:07.423
> 
> 标签：algorithm, tree, tree-balancing

假设我有一个带有 N 个节点的常量（一旦构建就不会改变）平衡树，每个内部节点都有 p 个子节点。显然，访问节点的最坏情况是 logp(N)。但是访问 r 个节点的摊销成本呢？如果我们按升序访问它们（有一个搜索树）怎么办？它只是（logp（N））/ r吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:22:52.833

您当然可以计算访问平衡搜索树中每个元素的摊销成本。但是，您会发现“几乎所有”节点都位于树的底部。（更准确地说，对于完整的`p`二叉树，`1/p`节点不是叶子）。因此，所有访问的平均成本将（大致）是叶子访问的成本（），这与最坏情况的成本相同。`log[p]n`

# html - 如何使用 wkhtmltopdf 处理尺寸/尺寸？

> ID：15351025
> 
> 赞同：0
> 
> 时间：2013-03-12T00:12:55.073
> 
> 标签：html, css, wkhtmltopdf, dimension

我正在使用 wkhtmltopdf 将一些 HTML 转换为 PDF。是否有适当的方法来处理尺寸和尺寸？

我的意思是 - 如何设置尺寸为 100px x 1oopx 的图像，它以以下尺寸 10mm x 10mm 打印（我使用的是 DINA4：210mm x 297mm）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:35:22.207

我相信您可以在打印样式中使用多种单位，包括 cm 和 mm。所以这样的事情应该有效：

```
@media print {
  img.selector { width:1cm; height:1cm; }
} 
```

或者也许只是：

```
@media print {
  img[width="100"]{ width:1cm; height:1cm; }
} 
```

# tsql - TSQL 数据库名称的同义词

> ID：15351026
> 
> 赞同：1
> 
> 时间：2013-03-12T00:13:03.873
> 
> 标签：tsql

我在 sql server 数据库 [A] 中有许多存储过程，需要引用同一服务器中另一个数据库 [B] 中的表。

所以在一个典型的 sp 我艾米有这样的陈述

```
 select * from [A].table1 inner join
                [B].table2 ..... 
```

这很好用。但是 [B] 数据库名称将来可能会更改。所以我想将其设为变量（另一个数据库的同义词）。一种方法当然是为数据库 [A] 中的 [B] 中的表创建同义词。我也不想使用动态 sql。

其他数据库（例如 Oracle）具有数据库链接之类的概念，它是任何其他数据库（可能在另一台服务器上）的符号名称

想知道 TSQL 中是否有任何等效功能可用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:38:41.617

SQL Server 没有数据库同义词。您唯一的选择是为 [A] 中的 [B] 中的所有必需对象创建同义词。但是，您可以创建一个自动循环遍历 [B] 中的对象并在 [A] 中创建它们的同义词的过程。

# json - 从 Ajax 源生成数据表时 JSON 格式不匹配

> ID：15351029
> 
> 赞同：0
> 
> 时间：2013-03-12T00:13:08.700
> 
> 标签：json, datatables

我希望生成一个以 ajax 响应为源的 DataTable。我使用 GSON 库将员工的 ArrayList 转换为 JSON 字符串。我得到的 JSON 字符串是

```
{
"sEcho": 3,
"iTotalRecords": 2,
"iTotalDisplayRecords": 2,
"aaData": [
    {
        "id": 1,
        "firstName": "darsheet",
        "lastName": "shah",
        "city": "san jose",
        "state": "ca",
        "zip": 95112
    },
    {
        "id": 2,
        "firstName": "akshat",
        "lastName": "shah",
        "city": "ahmedabad",
        "state": "gj",
        "zip": 380061
    }
] 
```

}

但是 sAjaxSource 属性需要以下格式的 JSON 字符串

```
{
"sEcho": 3,
"iTotalRecords": 2,
"iTotalDisplayRecords": 2,
"aaData": [
    {
        "0": 1,
        "1": "darsheet",
        "2": "shah",
        "3": "san jose",
        "4": "ca",
        "5": 95112
    },
    {
        "0": 2,
        "1": "akshat",
        "2": "shah",
        "3": "ahmedabad",
        "4": "gj",
        "5": 380061
    }
] 
```

}

我使用的数据表代码是

```
$(document).ready(function(){
$('#refresh').click(function(){
    $('#emp').dataTable({
        "sAjaxSource":".../ExploreDatatable/loadTableAjax"  
    });

});
}); 
```

如何消除 JSON 结构中的这种不匹配？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:56:30.563

据我所知，您的数据表选项是错误的。它应该这样做：

```
$('#emp').dataTable({
        "sAjaxSource":".../ExploreDatatable/loadTableAjax",
        "aoColumns": [{"mDataProp": "id"},
                      {"mDataProp": "firstName"},
                         .....the other column names, that should be mapped to the json key......
                     ］
    }); 
```

# .net - 为 MVC Membership 生成测试数据

> ID：15351030
> 
> 赞同：0
> 
> 时间：2013-03-12T00:13:23.510
> 
> 标签：.net, asp.net-mvc, razor, membership-provider, hashcode

我正在尝试创建一个脚本来创建一些 MVC 用户进行测试，但是，我在生成密码哈希时遇到了问题。

我正在使用[HASHBYTE](http://msdn.microsoft.com/en-us/library/ms174415.aspx)文档中描述的以下 SQL ：

```
INSERT INTO webpages_Membership([UserId],[CreateDate],[ConfirmationToken],[IsConfirmed],[LastPasswordFailureDate],[PasswordFailuresSinceLastSuccess],[Password],[PasswordChangedDate],[PasswordSalt],[PasswordVerificationToken],[PasswordVerificationTokenExpirationDate]) VALUES(1,'2013-01-01 00:00:00.000',NULL,1,NULL,0,HASHBYTES('SHA1', CONVERT(nvarchar(4000),'!+test123')),'2013-01-01 00:00:00.000','',NULL,NULL); 
```

但是，生成的哈希似乎是二进制的，而不是 Base64 字符串。

我应该如何为测试数据生成哈希？

```
-- DROP webpages_UsersInRoles
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[fk_RoleId]') AND parent_object_id = OBJECT_ID(N'[dbo].[webpages_UsersInRoles]'))
ALTER TABLE [dbo].[webpages_UsersInRoles] DROP CONSTRAINT [fk_RoleId]
GO

IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[fk_UserId]') AND parent_object_id = OBJECT_ID(N'[dbo].[webpages_UsersInRoles]'))
ALTER TABLE [dbo].[webpages_UsersInRoles] DROP CONSTRAINT [fk_UserId]
GO

/****** Object:  Table [dbo].[webpages_UsersInRoles]    Script Date: 03/11/2013 23:47:49 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[webpages_UsersInRoles]') AND type in (N'U'))
DROP TABLE [dbo].[webpages_UsersInRoles]
GO

/****** Object:  Table [dbo].[webpages_Roles]    Script Date: 03/11/2013 23:52:45 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[webpages_Roles]') AND type in (N'U'))
DROP TABLE [dbo].[webpages_Roles]
GO

/****** Object:  Table [dbo].[UserProfile]    Script Date: 03/11/2013 23:53:09 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UserProfile]') AND type in (N'U'))
DROP TABLE [dbo].[UserProfile]
GO

USE [Development_Membership]
GO

IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__webpages___IsCon__2F10007B]') AND type = 'D')
BEGIN
ALTER TABLE [dbo].[webpages_Membership] DROP CONSTRAINT [DF__webpages___IsCon__2F10007B]
END

GO

IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__webpages___Passw__300424B4]') AND type = 'D')
BEGIN
ALTER TABLE [dbo].[webpages_Membership] DROP CONSTRAINT [DF__webpages___Passw__300424B4]
END

GO

/****** Object:  Table [dbo].[webpages_OAuthMembership]    Script Date: 03/11/2013 23:53:46 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[webpages_OAuthMembership]') AND type in (N'U'))
DROP TABLE [dbo].[webpages_OAuthMembership]
GO

/****** Object:  Table [dbo].[webpages_Membership]    Script Date: 03/11/2013 23:53:29 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[webpages_Membership]') AND type in (N'U'))
DROP TABLE [dbo].[webpages_Membership]
GO

/*  Recreate Databases */

/****** Object:  Table [dbo].[webpages_OAuthMembership]    Script Date: 03/11/2013 23:54:33 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[webpages_OAuthMembership](
        [Provider] [nvarchar](30) NOT NULL,
        [ProviderUserId] [nvarchar](100) NOT NULL,
        [UserId] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
        [Provider] ASC,
        [ProviderUserId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[webpages_Membership](
        [UserId] [int] NOT NULL,
        [CreateDate] [datetime] NULL,
        [ConfirmationToken] [nvarchar](128) NULL,
        [IsConfirmed] [bit] NULL,
        [LastPasswordFailureDate] [datetime] NULL,
        [PasswordFailuresSinceLastSuccess] [int] NOT NULL,
        [Password] [nvarchar](128) NOT NULL,
        [PasswordChangedDate] [datetime] NULL,
        [PasswordSalt] [nvarchar](128) NOT NULL,
        [PasswordVerificationToken] [nvarchar](128) NULL,
        [PasswordVerificationTokenExpirationDate] [datetime] NULL,
PRIMARY KEY CLUSTERED 
(
        [UserId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[webpages_Membership] ADD  DEFAULT ((0)) FOR [IsConfirmed]
GO

ALTER TABLE [dbo].[webpages_Membership] ADD  DEFAULT ((0)) FOR [PasswordFailuresSinceLastSuccess]
GO

CREATE TABLE [dbo].[webpages_Roles](
        [RoleId] [int] IDENTITY(1,1) NOT NULL,
        [RoleName] [nvarchar](256) NOT NULL,
PRIMARY KEY CLUSTERED 
(
        [RoleId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
        [RoleName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[UserProfile](
        [UserId] [int] IDENTITY(1,1) NOT NULL,
        [UserName] [nvarchar](56) NOT NULL,
PRIMARY KEY CLUSTERED 
(
        [UserId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
        [UserName] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

INSERT INTO [UserProfile]([UserName]) VALUES ('TestUser1')
INSERT INTO [UserProfile]([UserName]) VALUES ('TestUser2')
INSERT INTO [UserProfile]([UserName]) VALUES ('TestUser3')
INSERT INTO [UserProfile]([UserName]) VALUES ('TestUser4')
INSERT INTO [UserProfile]([UserName]) VALUES ('TestUser5')

INSERT INTO webpages_Membership([UserId],[CreateDate],[ConfirmationToken],[IsConfirmed],[LastPasswordFailureDate],[PasswordFailuresSinceLastSuccess],[Password],[PasswordChangedDate],[PasswordSalt],[PasswordVerificationToken],[PasswordVerificationTokenExpirationDate]) VALUES(1,'2013-01-01 00:00:00.000',NULL,1,NULL,0,HASHBYTES('SHA1', CONVERT(nvarchar(4000),'!+test123')),'2013-01-01 00:00:00.000','',NULL,NULL);
INSERT INTO webpages_Membership([UserId],[CreateDate],[ConfirmationToken],[IsConfirmed],[LastPasswordFailureDate],[PasswordFailuresSinceLastSuccess],[Password],[PasswordChangedDate],[PasswordSalt],[PasswordVerificationToken],[PasswordVerificationTokenExpirationDate]) VALUES(2,'2013-01-01 00:00:00.000',NULL,1,NULL,0,HASHBYTES('SHA1', CONVERT(nvarchar(4000),'!+test123')),'2013-01-01 00:00:00.000','',NULL,NULL);
INSERT INTO webpages_Membership([UserId],[CreateDate],[ConfirmationToken],[IsConfirmed],[LastPasswordFailureDate],[PasswordFailuresSinceLastSuccess],[Password],[PasswordChangedDate],[PasswordSalt],[PasswordVerificationToken],[PasswordVerificationTokenExpirationDate]) VALUES(3,'2013-01-01 00:00:00.000',NULL,1,NULL,0,HASHBYTES('SHA1', CONVERT(nvarchar(4000),'!+test123')),'2013-01-01 00:00:00.000','',NULL,NULL);
INSERT INTO webpages_Membership([UserId],[CreateDate],[ConfirmationToken],[IsConfirmed],[LastPasswordFailureDate],[PasswordFailuresSinceLastSuccess],[Password],[PasswordChangedDate],[PasswordSalt],[PasswordVerificationToken],[PasswordVerificationTokenExpirationDate]) VALUES(4,'2013-01-01 00:00:00.000',NULL,1,NULL,0,HASHBYTES('SHA1', CONVERT(nvarchar(4000),'!+test123')),'2013-01-01 00:00:00.000','',NULL,NULL);
INSERT INTO webpages_Membership([UserId],[CreateDate],[ConfirmationToken],[IsConfirmed],[LastPasswordFailureDate],[PasswordFailuresSinceLastSuccess],[Password],[PasswordChangedDate],[PasswordSalt],[PasswordVerificationToken],[PasswordVerificationTokenExpirationDate]) VALUES(5,'2013-01-01 00:00:00.000',NULL,1,NULL,0,HASHB 
```

YTES('SHA1', CONVERT(nvarchar(4000),'!+test123')),'2013-01-01 00:00:00.000','',NULL,NULL);

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:47:10.120

SQL Server 具有对 BASE64 编码的内置支持。

```
declare @source varbinary(max)
set @source = hashbytes('sha', '!+test123')

declare @encoded varchar(max)
set @encoded = cast('' as xml).value('xs:base64Binary(sql:variable("@source"))', 'varchar(max)') 
```

但我不确定你会得到你需要的字符串。因为生成的字符串比 Membership 表中的字符串短。例如，在我的会员表中，我可以看到 `'ABwa5RUTn98IqJxFaq3MXC2N6dtUT78HAUWuaI3Kl2BIgbBP0IkkVb70FtOYj9ib+A=='`密码“123123”的（68 个字符）字符串，但是上面的代码只`'YB8YiWZ++uuzO4wSVyg12j8Cf3g='`为相同的密码生成（28 个字符）。

您可以查看[http://www.mikesdotnetting.com/Article/200/The-SimpleMembershipProvider-Secure-Passwords-And-The-Crypto-Helper](http://www.mikesdotnetting.com/Article/200/The-SimpleMembershipProvider-Secure-Passwords-And-The-Crypto-Helper)了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:21:23.200

您可以通过使用 Base-16（不是 Base-64）并在二进制字符串前面加上 ，在 T-SQL 中向 MSSQL 服务器提供二进制数据`0x`，如下所示：

```
INSERT INTO binaryValues ( [SomeBinaryColumn] ) VALUES ( 0xDEADBEEF ) 
```

在 C# 中，您可以直接向 a 提供二进制值，`SqlParameter`或者如果您像这样生成 SQL：

```
Byte[] hashData = GetHash();
StringBuilder sb = new StringBuilder( hashData.Length * 2 );
sb.Append("0x");
for(int i=0;i<hashData.Length;i++) {
    sb.Append( hashData[i].ToString("x2") );
}
return sb.ToString(); 
```

# windows - 批处理文件对多个目录中的所有文件执行命令

> ID：15351034
> 
> 赞同：2
> 
> 时间：2013-03-12T00:13:51.647
> 
> 标签：windows, command-line, for-loop, batch-file, batch-processing

我想制作一个运行此命令的批处理文件：

```
C:\Program Files (x86)\IrfanView\i_view32.exe" "C:\Users\digi_admin\TIFFs\
OLD DIRECTORY\*.tif" /ini="C:\Users\digi_admin\Documents\" /advancedbatch /tifc=4  
/convert="C:\Users\digi_admin\CompTIFs\Some Folder\NEW DIRECTORY\*.tif" 
```

在几个文件夹中的所有文件上。所有文件都将位于 \TIFFs\ 但将驻留在几个不同的子文件夹中。(OLD DIRECTORY) 我还需要在运行命令之前创建文件夹 \NEW DIRECTORY\（与 OLD DIRECTORY 同名）（是否运行？）。这是我到目前为止所拥有的：

```
FOR /D %d IN ("C:\Users\digi_admin\TIFFs\*.*") DO "C:\Program Files 
(x86)\IrfanView\i_view32.exe" %d\*.tif /ini="C:\Users\digi_admin\Documents\" 
/advancedbatch /tifc=4 /convert="C:\Users\digi_admin\CompTIFs\Some Folder\%d\*.tif" 
```

我一直在命令行中尝试它，所以 %d 应该是 %%d。我对DOS不熟悉，所以我敢肯定它相对简单。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:09:38.333

```
@ECHO OFF
SETLOCAL
SET destroot=C:\Users\digi_admin\CompTIFs
FOR /D %%d IN ("%destroot%\*") DO (
MD "%destroot%\%%~nxd" 2>nul

"C:\Program Files (x86)\IrfanView\i_view32.exe" "%%d\*.tif" /ini="C:\Users\digi_admin\Documents\" /advancedbatch /tifc=4 /convert="%destroot%\%%~nxd\*.tif"
) 
```

现在 - 假设“/convert”是目标文件规范。

笔记：

*   我已将目标根设置为变量 - 使输入更容易
*   如果目标目录已经存在， 2>nul 会抑制生成的错误消息
*   %%~nxd 表示来自 %%d 的名称和扩展名。扩展名很可能不存在 - 这是无害的

# git - 使用 SmartGIT 的问题 - 无法自动检测电子邮件地址

> ID：15351036
> 
> 赞同：1
> 
> 时间：2013-03-12T00:14:15.780
> 
> 标签：git, smartgit

昨天当朋友建议我应该使用 SmartGIT 时，我决定尝试使用 SmartGIT 来管理我的代码。

在安装并尝试（成功）之后，我以为我已经设置好了，直到今天我尝试提交代码时，我收到了错误消息“无法自动检测电子邮件地址（得到 'User@Computer-name.(none)' ）。

我检查了 GIT 配置，一切都设置正确，但我继续收到此消息。

还有其他人遇到过这类问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T09:09:59.770

我完全沮丧：

A. 因为这也发生在我和

B. 因为这个线程中的答案非常模糊。

据我所知，您需要将 .gitconfig 文件放入 C:/Documents and Settings/USERNAME 文件夹，但我：

1）找不到任何 .gitconfig 文件（我搜索了整个系统）只有 gitconfig 和 gitconfig.vim 和

2）将这两个文件放入上述文件夹对我没有好处。

我有一个对开发人员的要求：虽然这个问题似乎很少见，但您能否提供一个用于 smartgit 的 CLEAN UNINSTALL 以及 CLEAN INSTALL 的选项，它重新创建每个必要的配置文件。我认为这是一种自然的做法，并且由于您不遵循它而看到这样的错误支持，我感到很震惊。

解决方案：好的，所以为了解决问题，我启动了 [GIT_FOLDER]/git/git-cmd.bat，它启动了命令行并从错误中输入了命令。正是我输入：

git config --global user.email "[MY_EMAIL]"

和

git config --global user.name "[MY_NAME]"

虽然我认为我输入的电子邮件与我第一次安装程序时提供的电子邮件相同（注册非商业副本）但我认为他们当时从未问过我的名字，所以这个名字是全新的. 因此我不知道您是否需要输入您在第一次安装时提供的精确电子邮件。

之后我重新启动了 Git，提交行为正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:59:42.790

在与 SmartGIT 的制造商取得联系后，他们指出我的 PC 指向了我之前使用的旧文件夹中的一个 git config 文件。此外，我的`HOME`变量设置为指向此文件夹，导致这种奇怪的冲突，因为 SmartGIT（显然）在`%USERNAME%`文件夹中查找您的 .gitconfig 文件。刚刚将我的 .gitconfig 移动到该文件夹​​，它就可以工作了。

# java - 软件膨胀 - 在 Java 和性能中添加库

> ID：15351038
> 
> 赞同：-1
> 
> 时间：2013-03-12T00:14:25.360
> 
> 标签：java, python

我从人们那里听到了一些争论，最好避免在`java`项目中添加大量依赖项（额外的库，如番石榴等）。

他们的论点是基于这样一个事实，即添加太多库`python`会减慢速度。

我反对重新实现已经内置到库中的功能，我还认为 java 的编译性质和工具中可用的压缩功能`proguard`实际上使`python`bloat 的论点无效。

我对吗 ？还是我应该尽量减少添加到`java`构建中的依赖项数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:23:23.917

当然，反对库的主要论据不是导入类的性能，而是更多地与代码库的可维护性有关——例如，如果你乐意让你的团队混合搭配**Guava**和**Apache Commons**，那么你很可能最终会从两个库中导入不同的内容以在不同的类中实现相同的目标（例如 Guava Strings 与 Apache StringUtils）。

稍后，如果您决定可以将跨两个类的一些相似代码重构到其自己的类中，则您必须处理两个库以不同方式处理事物的任何差异。

我会说你是对的，但我当然还要说你应该尽量减少构建中的依赖关系——如果有必要，你应该引入库以避免重复，但只有在适当考虑之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:25:28.987

Java 中的类加载应仅限于您最终实际使用的类。JIT 编译器还将减少任何膨胀的影响。因此，在大多数情况下，您不应该因为大量依赖项而遭受性能损失。

在以不同方式实现相同功能的意义上，您可能会在依赖项之间存在重叠。这意味着您将拥有更大的安装大小（JAR 的总数大于它所必须的），并且由于加载了多个不同的类而可能会消耗更多的内存，这些类有效地执行相同的操作。

除非您正在处理非常严格的限制，例如部署到小型嵌入式设备，否则我不认为这会比不重新发明轮子所获得的收益更接近危害。您不仅可以节省开发工作量，还可以从一开始就获得更稳定的代码。

Java 世界中的另一件大事是 Maven，它使管理依赖项和创建模块化软件比以前容易得多。它确实在模块化设置中大放异彩（不要在大型​​的单体构建中尝试它）。

# asp.net-mvc - Internet Explorer 中的敲除验证错误？

> ID：15351041
> 
> 赞同：2
> 
> 时间：2013-03-12T00:15:08.500
> 
> 标签：asp.net-mvc, internet-explorer, knockout.js, knockout-validation, knockout-mvc

[在我认为使用淘汰赛](http://knockoutjs.com)和所谓的[淘汰赛验证](https://github.com/ericmbarnard/Knockout-Validation)的剃刀观点中，我添加了以下行（实际上开始使用 ko 验证）：

```
<script src="@Url.Content("~/Scripts/knockout.validation.debug.js")" type="text/javascript"></script> 
```

*   当我在 Chrome 验证中运行此视图时，它运行良好。
*   当我在 IE (9.0) 中运行此视图时，我收到非常丑陋的消息，内容如下：

![错误信息](../Images/223e9ccf8f5dd1c66644f4ab636738ac.png)

> 0x800a138f - Microsoft JScript 运行时错误：无法获取属性“规则”的值：对象为空或未定义。

（在 SO 上的未来搜索文本中）点击“继续”后，它运行良好，验证似乎工作正常。它只是这个消息。

值得一提的是，我搜索了解决方案——我没有在任何地方使用“规则”。不知道 IE 发生了什么。

有没有人知道为什么会发生以及如何消除错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:29:03.313

简短的回答：看起来[新版本的 Knockout Validation](https://raw.github.com/ericmbarnard/Knockout-Validation/master/Dist/knockout.validation.js)解决了这个问题。更新您的 Knockout Validation 以解决此问题，并忘记这曾经发生过。

更长的答案：错误来自名为 `isValidatable`. 这是从源代码复制粘贴的：

```
isValidatable: function (o) {
    return o.rules && o.isValid && o.isModified;
} 
```

正如错误所说，有人称`isValidatable`where `o`is "null or undefined"。如果一个对象甚至不是一个对象，它就是不可验证的！在这种情况下，我们遇到了一个错误，因为我们正在寻找`o.rules`，这会抛出一个错误，因为`o`它是 undefined 或 null。

[新版本的淘汰赛验证](https://github.com/ericmbarnard/Knockout-Validation/blob/master/Dist/knockout.validation.js)这样做：

```
isValidatable: function (o) {
    return o && o.rules && o.isValid && o.isModified;
}, 
```

如果对象存在，则第一个子句返回 true（从技术上讲，它返回`o`，计算结果为 true）。如果对象*不*`o`存在，如果未定义，则返回且不出错。

如果您好奇，[这里是修复您遇到的错误的提交](https://github.com/ericmbarnard/Knockout-Validation/commit/a54ad5038589237fe0d64dc8e43e5d710e46df85)。

# google-apps-script - 使我访问的所有电子表格文件都可以使用菜单（和基础功能）

> ID：15351049
> 
> 赞同：0
> 
> 时间：2013-03-12T00:16:15.737
> 
> 标签：google-apps-script, google-sheets

我正在开发一堆 GAS 工具，我将在设计和构建电子表格时使用它们。为了方便访问这些工具，我创建了一个菜单项，让我可以快速访问这些工具。但是，我希望每次使用 Google 电子表格时都能使用此菜单，而不仅仅是在我添加了脚本的特定电子表格上。我想这类似于 Excel 中的加载项。这些工具和功能可用于在 Excel 中打开的所有电子表格，但不是电子表格的一部分。

谷歌电子表格/应用程序可以做到这一点吗？我对此的所有研究都找到了需要将代码附加到特定电子表格的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:50:26.600

不可以。您必须将其添加到您的每个电子表格中。但是您可以通过[使用库](https://developers.google.com/apps-script/guide_libraries)并使用[onInstall 触发器](https://developers.google.com/apps-script/understanding_triggers)将 onOpen 触发器添加到每个电子表格，将相同的脚本添加到每个电子表格。

# iphone - Xcode 旧标签栏图标突然出现

> ID：15351050
> 
> 赞同：0
> 
> 时间：2013-03-12T00:16:20.830
> 
> 标签：iphone, ios, objective-c, xcode

因此，在 xcode 中，我有一个带有多个选项卡的选项卡栏视图控制器。每个选项卡都有一个单独的选项卡栏图标。不久前，我制作了自己的自定义图标并将它们添加到我的标签栏视图控制器中，但直到最近我才认为它们看起来不合适。所以我用更清晰的图标代替了它们。问题是当我运行我的应用程序时，它会显示旧图标几秒钟，*然后*显示新图标。我已经多次清理/构建，但徒劳地试图停止这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:19:22.780

这类问题几乎总是由在您的构建中徘徊的旧图标引起的。首先，确保你真的从你的项目中删除了它们。然后退出 Xcode。最后，按照此处的说明进行操作：

[如何清空缓存并清理所有目标 Xcode 4](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4/6247073#6247073)

请务必清除 DerivedData 文件夹和 Simulator。现在没有旧版本的痕迹，下次您应该得到一个适当的干净版本。

# actionscript-3 - Mouse.hide() 不适用于 htmlText 上的超链接

> ID：15351051
> 
> 赞同：0
> 
> 时间：2013-03-12T00:16:32.643
> 
> 标签：actionscript-3, flash, air

我使用`Mouse.hide();`flash专业cs5.5（为AIR 2.5编译）隐藏AS3上的鼠标光标的功能。几乎在比赛场景中，鼠标指针是隐藏的，但如果您有一个带有 html 内容的文本字段，则当您悬停超链接时，鼠标会重新出现`<a>`。我需要链接是可点击的，但没有鼠标光标，因为该应用程序旨在在触摸屏上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:52:39.433

`Mouse.hide()`在 AIR 中实际上并不像在 flash 中那样在任何地方都有效（检查过 mac 吗？）

[这里](http://blog.formatlos.de/2008/11/16/air-hiding-the-mouse/)有一个解决方法，作为解决方案一直在浮动：

```
stage.nativeWindow.activate();
stage.nativeWindow.orderToBack();
stage.nativeWindow.orderToFront();
Mouse.hide(); 
```

# r - r中的批处理和合并

> ID：15351053
> 
> 赞同：0
> 
> 时间：2013-03-12T00:16:56.280
> 
> 标签：r, batch-processing

我有一个 .csv 文件列表，我需要删除所有文件的前三行。有没有办法一次完成所有这些？

为名为“test”的文件单独执行的代码是：test<-test[-c(1:3),]

我想为我导入的文件列表运行上述行：filenames <- list.files(path = getwd())

处理完上述文件后，我想使用 cbind 制作单个文件。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:44:01.050

您可以尝试关注，看看它是否有效。

```
result <- do.call(cbind, lapply( list.files(path = getwd()), function(n) read.csv(file=n , skip = 3) )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:33:34.080

```
csvlist <- lapply(csvnames, function(nam) read.csv( file=nam) )
do.call( cbind, lapply(csvlist, "[", -c(1:3)) ) 
```

你的问题暗示你有一个成功的输入策略，但你现在报告错误，所以你应该更好地描述你的文件。排除前三行*可能会*更好：

```
csvlist <- lapply(csvnames, function(nam) read.csv( file=nam, header=FALSE, skip=3) )
do.call( cbind, csvlist )  # no longer need to remove since skip=3 did that. 
```

你确定你不想`rbind`代替`cbind`吗？

# openmp - CPU时间与超线程相关吗？

> ID：15351058
> 
> 赞同：1
> 
> 时间：2013-03-12T00:17:29.650
> 
> 标签：openmp, multicore, overhead, hyperthreading

增加的 CPU 时间（如`time`CLI 命令所报告的）是否表明使用超线程时效率低下（例如花费在自旋锁或缓存未命中的时间），或者 CPU 时间是否可能因 HT 的奇怪性质而膨胀？（例如，真正的核心很忙，HT 无法启动）

我有四核 i7，我正在测试[OpenMP 程序](http://pngquant.org)的可并行化部分（图像到调色板的重新映射） ——没有锁，没有关键部分。所有线程都访问一些只读共享内存（查找表），但只写入自己的内存。

```
 cores real CPU
  1:   5.8  5.8
  2:   3.7  5.9
  3:   3.1  6.1
  4:   2.9  6.8
  5:   2.8  7.6
  6:   2.7  8.2
  7:   2.6  9.0
  8:   2.5  9.7 
```

我担心当核心数量超过 1 或 2 时，使用的 CPU 时间量会迅速增加。

我想在理想情况下，CPU 时间不会增加太多（相同数量的工作只是分布在多个内核上）。

这是否意味着有 40% 的开销用于并行化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:52:03.107

快速提问——你运行的是真正的时间程序 /usr/bin/time，还是内置的同名 bash 命令？我不确定这是否重要，它们看起来非常相似。

查看您的数字表，我感觉处理后的数据集（即输入加上所有输出数据）总体上相当大（大于 L2 缓存），并且每个数据项的处理时间并不长。

数字显示从 1 核到 2 核的改进几乎是线性的，但是当您使用 4 核时，这种改进显着下降。hyoerthreaded 内核几乎没有添加任何内容。这意味着正在争夺共享的东西。您的程序有自由运行的线程，因此只能是内存（i7 上的 L3 缓存和主内存）。

这听起来像是受 I/O 限制而不是计算限制的典型示例，在这种情况下，I/O 是往返于 L3 缓存和主内存。L2 缓存是 256k，所以我猜你的输入数据加上一组结果和所有中间数组的大小都大于 256k。

我接近标记了吗？

一般来说，在考虑使用多少线程时，您必须考虑共享缓存和内存速度以及数据集大小。这可能是一个正确的错误，因为您必须在运行时解决它，这需要大量的编程工作（除非您的硬件配置是固定的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-08T23:52:37.413

这很可能是如何测量 CPU 时间的人工制品。一个简单的例子，如果你运行一个 100 MHz CPU 和一个 3 GHz CPU 各一秒钟，每个都将报告它运行了一秒钟。第二个 CPU 可能会多做 30 倍的工作，但需要一秒钟。

使用超线程，一个合理（不太准确）的模型是一个内核可以运行一个任务，比如说 2000 MHz，或者两个任务，比如说 1200 MHz。运行两个任务，每个线程只完成 60% 的工作，但两个线程一起完成 120% 的工作，提高了 20%。但是如果操作系统询问使用了多少秒的 CPU 时间，第一个将实时报告每秒后的“1 秒”，而第二个将报告“2 秒”。

所以报告的 CPU 时间会增加。如果它不到一倍，则整体性能会有所提高。

# java - 如何使用 JPQL 忽略日期查询中的时间？

> ID：15351060
> 
> 赞同：1
> 
> 时间：2013-03-12T00:17:37.170
> 
> 标签：java, jpa, jpql

我在使用日期（并忽略时间）对 JPQL 进行查询时遇到问题。这是我的方法：

```
@Override
public List<Event> findByDayAndStatus(User usr, Date d, char status) {
    Query q = em.createQuery("SELECT e FROM Event as e where " +
                             "e.idusr=:usr AND e.datestart=:d AND " + 
                             "e.status=:status", Event.class);            
    q.setParameter("usr", usr);
    q.setParameter("datestart", d, TemporalType.DATE);
    q.setParameter("status", status);
    return q.getResultList();
} 
```

问题是我得到一个空列表，当我在查询中省略日期参数时，我得到了我的数据。

我认为日期有问题，因为我查询的方式类似于 2013-03-20 00:00:00，而数据库日期类似于 2013-03-20 12:00:00。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:11:56.483

将查询修改为
SELECT e FROM Event as e where e.idusr=:usr AND cast(e.datestart as date) =:d AND e.status=:status 它将跳过给定日期的时间，只返回日期.

# html - CSS 表格样式 - 获取表格行以填充整个内容区域

> ID：15351063
> 
> 赞同：0
> 
> 时间：2013-03-12T00:17:43.580
> 
> 标签：html, css

我正在尝试使用 CSS 表格显示来布局我的页面，但我无法让我的主要内容区域占据页眉和页脚之间的整个区域（垂直）。主 div 包含一些浮动元素，它们不一定会延长屏幕的长度。基本上，无论我做什么，我的主要内容的区域都是由这些元素的垂直高度决定的。对此我能做些什么吗？谢谢！

html:

```
<div id="all-container">
    <div id="header">
  ...
    </div>
    <div id="table-container">
        <div id="content">
            <div id="side-bar">
               ...      
            </div>
            <div id="main">
               ... some content that's floated ...
            </div>
        </div>
    </div>
    <div id="footer"></div>
</div> 
```

CSS：

```
#all-container {
    margin:0px;
    position:relative;
    min-height:100%;
    background-color:#E6DCD8;
}

#header {
    height:60px;
    padding-left:20px;
    padding-right:20px;
    background-color:#685642;
}

#table-container {
    display:table;
    height:100%;
}

#content {
    display:table-row;
    height:100%;
}

#side-bar {
    display:table-cell;
    vertical-align:top;
    padding-right:100px;
    height:100%;
    padding-bottom:60px;
}

#main {
    display:table-cell;
    vertical-align:top;
    border-left-style:solid;
    border-left-width:normal;
    border-left-color:#685642;
    padding-bottom:60px;
    height:100%;
}

#footer {
    position:absolute;
    width:100%;
    height:50px;
    bottom:0px;
    background-color:#685642;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:11:28.067

我将在黑暗中尝试回答。这些是我的建议，不一定是您正在寻找的规范正确答案。没有完全回答关于表格布局的问题，但我提供了其他方法来实现相同的预期结果。

[这是您在小提琴http://jsfiddle.net/CRzfS/](http://jsfiddle.net/CRzfS/)中的原始代码

我认为您至少有两个想要实现的设计目标：

1.  制作全屏高度布局
2.  做一个2列布局

我得先提出来，有很多方法可以实现这个目标，但由于浏览器的支持，它们都有其局限性。我也建议*不要*使用表格布局，除非有必要。

对我来说，`display: table`主要只用于一个原因：`vertical-align`在固定高度的容器中工作，尤其是`vertical-align: middle`. 从固定宽度的表格中自动计算表格单元格宽度也有相关用途，但这完全取决于您希望如何呈现数据或信息。

我们将一一面对问题。

## 全高

首先是布局的高度问题。高度灵活性一直是网页设计布局的痛点。

*   **仅**填充屏幕高度，您可以查看此贴纸页脚实现： [http ://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

这是一个全屏高度的示例小提琴，不考虑页脚实现：http: [//jsfiddle.net/CRzfS/3/](http://jsfiddle.net/CRzfS/3/)

**CSS：**

```
html, body {
    height: 100%;
    min-height: 100%;
} 
```

*   对于液体高度布局，您可以查看： http: [//www.mightymeta.co.uk/superstretch-a-vertically-fluid-layout-using-css/](http://www.mightymeta.co.uk/superstretch-a-vertically-fluid-layout-using-css/)

*   要获得适当的灵活高度，您必须使用 CSS Flexbox。 [http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

你可以在这里试试[http://flexiejs.com/playground/](http://flexiejs.com/playground/)

您使用 CSS Flexbox 实现的示例：http: [//jsfiddle.net/CRzfS/4/](http://jsfiddle.net/CRzfS/4/)

**CSS：**

```
html, body {
    height: 100%;
    min-height: 100%;
    margin: 0;
    padding: 0;
}

#all-container {
    display: -webkit-box;
    display: -moz-box;
    display: box;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    box-orient: vertical;
    margin:0px;
    position:relative;
    min-height:100%;
    height: 100%;
    background-color:#E6DCD8;
}

#header {
    height:60px;
    padding-left:20px;
    padding-right:20px;
    background-color:#685642;
}

#table-container {
    display: -webkit-box;
    display: -moz-box;
    display: box;
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    box-flex: 1;
    -webkit-box-orient: vertical;
    -moz-box-orient: vertical;
    box-orient: vertical;

}

#content {
    display: -webkit-box;
    display: -moz-box;
    display: box;
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    box-flex: 1;
    overflow: hidden;
}

#side-bar {
    vertical-align:top;
    min-width: 150px;
}

#main {
    -webkit-box-flex: 1;
    -moz-box-flex: 1;
    box-flex: 1;
    vertical-align:top;
    border-left-style:solid;
    border-left-width:normal;
    border-left-color:#685642;
}

#footer {
    width:100%;
    height:50px;
    background-color:#685642;
} 
```

## 两列布局

有很多方法可以实现这一目标。必须考虑您支持的不同屏幕尺寸（这是一个令人头疼的问题）。每个都有自己的缺点。它还取决于您的宽度要求，即固定宽度、灵活宽度。

1.  通过绝对定位侧边栏并为主要内容设置边距的语义方式
2.  布局框架通过浮动侧边栏和容器使用的常用方法，因此它们并排
3.  使用`display: inline-block`与#2相同的效果。

这里的第一种方法，在 HTML 中设置你的`#side-bar`after 。`#main`然后使用 CSS 绝对定位设置`#side-bar`到左侧，并为您的`#main`. [http://jsfiddle.net/CRzfS/2/](http://jsfiddle.net/CRzfS/2/)

**HTML：**

```
<div id="table-container">
    <div id="content">
        <div id="main">
           ... some content that's floated ...
        </div>
        <div id="side-bar">
           ...      
        </div>
    </div>
</div> 
```

**CSS：**

```
#table-container {
    position: relative;
}

#content {
    height: 200px;
}

#side-bar {
    width: 200px;
    position: absolute;
    left: 0; 
    top: 0;
    background-color: rgba(255,255,255,0.5);
    height: 100%;
}

#main {
    margin-left: 200px;
    height: 100%;
    overflow: hidden; // for floated elements within
} 
```

这里的第二种方法，使用原始 HTML，您只需要设置 CSS。[http://jsfiddle.net/CRzfS/5/](http://jsfiddle.net/CRzfS/5/)

```
#table-container {
    overflow: hidden;
}

#content {
   width: 100%;
}

#side-bar {
    width: 33%;
    float:left;
}

#main {
    width: 66%;
    float: left;
    vertical-align:top;
    border-left-style:solid;
    border-left-width:normal;
    border-left-color:#685642;
    padding-bottom:60px;
    min-height: 100px;    
    overflow: hidden; // for floated elemnts
} 
```

如果我不确定您对垂直高度部分的确切要求，如何将这两个布局要求结合在一起将很困难。我需要更多信息才能针对您的问题提供相关答案。

## 资源

如果你对布局网格系统框架持开放态度，我建议你看看：http: [//twitter.github.com/bootstrap/scaffolding.html#gridSystem](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)

即使你不想使用它，只要看看 CSS 实现就会给你带来有趣的见解。

随着有关该问题的更多信息的出现，我将添加其他 jsfiddle 示例。

编辑：添加了更多信息和解释。

# c# - 比秒表更精确的计时器？

> ID：15351068
> 
> 赞同：0
> 
> 时间：2013-03-12T00:18:20.300
> 
> 标签：c#, kinect, clock, stopwatch

在为 Kinect 记录位置时，我试图让秒表开始和停止：

```
 //process x and y coordinates
   public void calculateJoints(Skeleton skeleton)
    {          
        Joint rightHand = skeleton.Joints[JointType.HandRight];
        Joint leftHand = skeleton.Joints[JointType.HandRight];
        rightX = rightHand.Position.X;
        rightY = rightHand.Position.Y;         

    }

//start the stopwatch (tried to use a greater time between positions 1 and 5 vs 1 and 2
  public void processJointsAndRepeat(Skeleton skeleton)
  {
        startTime();
        while (numPositions < 5)
        {   
             calculateJoints(skeleton);
             numPositions++;
        }
        stopTime();
        double tempTime = calculateTimeElapsed();
  }

   //calculate time in milliseconds
   private double calculateTimeElapsed()
    {
        long milliseconds = stopWatch.ElapsedMilliseconds;
        return (double)milliseconds;
    } 
```

但是，每当我尝试输入 x、y 和 time 值时，以 time 为键，它都会引发重复键的错误。当我检索 tempTime 的值时，它只显示 0。

这是我的代码的问题，还是我需要更精确的秒表？

我意识到花时间玩 30 fps 的东西很困难，所以如果您有任何其他建议，那就太好了！我基本上只是想计算点之间的平均速度来调整音频文件的播放速度。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:37:16.387

秒表是常规 Windows 盒子上分辨率最高的计时器包装器。[通过使用Stopwatch.ElapsedTicks](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsedticks.aspx)和[Stopwatch.Frequency](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.frequency.aspx)，您可以使用较少花哨的函数来获得比 MS 分辨率更高的分辨率。

请注意，您的问题可能与计时器无关，而是与您未显示的其他代码有关...

# java - XStream 1.4 在使用转换器时删除双引号

> ID：15351069
> 
> 赞同：0
> 
> 时间：2013-03-12T00:18:38.990
> 
> 标签：java, json, xstream

我正在将 Xstream 1.3 升级到 1.4。但是我发现生成的 JSON 不正确，我不确定我需要做什么来解决这个问题。我写了一个 JUNIT 测试并且能够重现这个问题。这是测试的代码

```
public class XstreamTest {

     @Test
        public void testXstreamStuffForBasicVO(){
            BasicVO basicVO = new BasicVO("atttr1", "attr2");
            XStream xstream = new XStream(new JsonHierarchicalStreamDriver());
            //XStream xstream = new XStream(new JettisonMappedXmlDriver());
            xstream.setMode(XStream.NO_REFERENCES);
            xstream.registerConverter(new BasicVOConverter());
            System.out.println(xstream.toXML(basicVO));
            //return setupXstream(xstream);
        }

         class BasicVO{
             @XStreamAlias("alias1")
             private String attribute1;

             @XStreamAlias("alias2")
             private String attribute2;

             BasicVO(String att1, String att2){
                 setAttribute1(att1);
                 setAttribute2(att2);
             }

             BasicVO(){

             }

            public String getAttribute1() {
                return attribute1;
            }

            public void setAttribute1(String attribute1) {
                this.attribute1 = attribute1;
            }

            public String getAttribute2() {
                return this.attribute2;
            }

            public String getAttribute3(){
                return "madeupAttribute";
            }

            public void setAttribute2(String attribute2) {
                this.attribute2 = attribute2;
            }

         }

         class BasicVOConverter implements Converter{

            @Override
            public boolean canConvert(Class type) {
                return BasicVO.class.isAssignableFrom(type);
            }

            @Override
            public void marshal(Object source, HierarchicalStreamWriter writer,
                    MarshallingContext context) {

                BasicVO basicVO = (BasicVO) source;

                writer.startNode("property1");
                writer.setValue(basicVO.getAttribute1());
                writer.endNode();

                writer.startNode("property2");
                writer.setValue(basicVO.getAttribute2());
                writer.endNode();

                writer.startNode("property3");
                writer.setValue(basicVO.getAttribute3());
                writer.endNode();

            }

            @Override
            public Object unmarshal(HierarchicalStreamReader reader,
                    UnmarshallingContext context) {
                    BasicVO person = new BasicVO();

                    reader.moveDown();
                    person.setAttribute1(reader.getValue());
                    reader.moveUp();

                    reader.moveDown();
                    person.setAttribute2(reader.getValue());
                    reader.moveUp();

                    return person;
            }

         }
} 
```

生成的输出是以下无效 JSON（无效，因为值不在双引号内）

```
{"com.xyz.XstreamTest$BasicVO": {
  "property1": atttr1,
  "property2": attr2,
  "property3": madeupAttribute
}} 
```

我想指出的是，当我使用 JettisonMappedXmlDriver 时，这不是问题，但是，我不能使用它，因为我失去了使用 JsonHierarchicalStreamDriver 获得的其他一些重要的东西。

使用 Xstream 1.3，我得到以下信息

```
 {"com.xyz.XstreamTest$BasicVO": {
      "property1": "atttr1",
      "property2": "attr2",
      "property3": "madeupAttribute"
    }} 
```

我浏览了 Xstream 1.4 和 1.3 的代码，发现了显着的差异。此外，我发现引用逻辑的应用方式存在差异。在 1.3 中，更普遍地添加了引号。但是在 1.4 中，仅为“字符串”类型添加引号，我不确定这是如何确定的。

我倾向于 xstream 1.4 代码中的一些错误？这似乎太牵强了，我可能错过了一些步骤。谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:59:06.497

看起来这是一个当前的错误，将在下一个版本中修复

[https://jira.codehaus.org/browse/XSTR-728](https://jira.codehaus.org/browse/XSTR-728)

谢谢

# python - mysql python并发访问同一表列

> ID：15351074
> 
> 赞同：4
> 
> 时间：2013-03-12T00:19:09.880
> 
> 标签：python, mysql, concurrency, process

我探索了一些解决方案，但没有取得多大成功。我有两个 python 进程（使用子进程中的 Popen 创建）和一个 mysql 表（称为`persone`），其中包含一行两列：`Age:0, id:1`. 一个进程选择该行，获取它的年龄并将其递增一。它这样做了 1000 次。第二个做同样的事情，但减少它。我并行运行每个进程。

从理论上讲，我希望最终年龄保持在零。问题是我在 mymain.py 的末尾不断获得介于 100 和 -100 之间的随机值，我猜这意味着有同时完成的访问，破坏了数据库。我想知道我错过了什么？

这是我用来测试的代码：

*ajoutAge.py*

```
import MySQLdb as lite

num=1000
connexion = lite.connect(host="localhost", user="root", passwd="123", db="test")
with connexion:
    for i in range(num):
       cur = connexion.cursor()
       cur.execute('start transaction')
       cur.execute('select Age from persone where id=1')
       age = cur.fetchone()[0]
       cur.execute('update persone set Age='+str(age+1)+' where id=1')
       # cur.execute('rollback')
       cur.execute('commit')
print "ajout Done" 
```

*retraitAge.py*

```
import MySQLdb as lite

num=1000
connexion = lite.connect(host="localhost", user="root", passwd="123", db="test")
with connexion:
    for i in range(num):
        cur = connexion.cursor()
        cur.execute('start transaction')
        cur.execute('select Age from persone where id=1')
        age = cur.fetchone()[0]
        cur.execute('update persone set Age='+str(age-1)+' where id=1')
        cur.execute('commit')
print "retrait Done" 
```

*我的主程序*

```
from subprocess import Popen

a=Popen("python ajoutAge.py", shell=True)
aa=Popen("python ajoutAge.py", shell=True)
b=Popen("python retraitAge.py", shell=True)
bb=Popen("python retraitAge.py", shell=True)

a.communicate()
aa.communicate()
b.communicate()
bb.communicate()
print "Main done" 
```

我的表使用 InnoDB 作为存储引擎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:44:04.000

您正在创建一个[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。

每次您选择当前年龄时，它和您的更新之间都会有一瞬间。在那一瞬间，另一个过程可能（并且显然有时是）更新值。

因此，在第一个过程中，当您将值更新为 age+1 时，它会根据稍微过时的值递增。

要解决此问题，您有几个选择：

*   `SELECT ... FOR UPDATE`，它会锁定该行，防止其他进程在您完成事务之前对其进行修改。你需要确保你没有提交你的 SELECT 事务，这会释放锁，允许另一个竞争条件。

*   `UPDATE persone SET age = age+1 WHERE id=1`（或者`age=age-1`当然）。换句话说，在您更改值的同一表达式中读取值，因此它是原子的，没有并发进程可以“潜入”并在两者之间进行更改。

# memory - 从内存中打印值列表时出现分段错误

> ID：15351076
> 
> 赞同：1
> 
> 时间：2013-03-12T00:19:25.563
> 
> 标签：memory, printing, segmentation-fault

我正在尝试制作一个打印多个连续内存位置内容的小型应用程序。作为程序在内存中位置的指示，我正在打印主函数和虚拟变量的内存位置。

在第一列中，我想打印地址。在第二列中，我想要这个地址的内容和它后面的 9 个地址的内容。在第三列中，如果它是可打印的，我想将字节值打印为字符。如果它不可打印，我想打印一个点。在第一行下的行中，我做的完全一样。

在启动时，可以输入许多要打印的值。如果输入正值，地址将增加，如果输入负值，地址将减少。

为了快速查看我想要到达的位置，您可以运行代码并输入例如 20 个字节来转储并使用虚拟地址作为起始地址。

到目前为止，我的代码只适用于正值。当我输入一个负数时，我得到一个分段错误，但我不知道为什么。我试图在 Valgrind 中找到错误，但没有成功。

一些帮助将不胜感激！

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#define NUMBER_OF_BYTES 10

void showAddresses(void);
void printMemory(void);
void getDumpSize(void);

char* dummy;                // dummy is een pointer naar een int
signed int dumpSize;            // how many bytes have to be dumped?
signed int upDown;          // do I need to go up or down?

int main(void)
{
    dummy = (char *) malloc (sizeof(unsigned char));// memory allocation
    showAddresses();    // prints the main function address and a variable address
    getDumpSize();  //      
    printMemory();  //
    free(dummy);        // free memory
    return 0;       // end the main function
}

void showAddresses(void)
{
    printf("Main function address is %p \n", main); 
    printf("Dummy variable address is %p \n",(void*)dummy);
}

void getDumpSize(void)
{
    printf("Enter number of bytes to dump <negative or positive>:");
    scanf("%d",&dumpSize);
    if(dumpSize<0)
    {
        upDown = -1;        // count down
        printf("upDown was set to -1\n");
    }
    else
    {
        upDown = 1;         // count up
        printf("upDown was set to +1\n");
    }
}

void printMemory(void)
{
    int input;
    printf("Enter the address:");
    scanf("%x", &input);                // enter the input
    printf("Address \tBytes \t\t\t\tChars \n"); // print the table header
    printf("--------- \t----------------------------- \t---------- ");
    int i;
    unsigned char* address;         // 
    for(i=0;i<abs(dumpSize);i++)
    {
        address = (unsigned char*) (input+(i*upDown));  // make the address to print
        if( (i%NUMBER_OF_BYTES) == 0)   // show the address every 'i*NUMBER_OF_BYTES' times
        {
            printf("\n%p \t", (void*) address); 
        }

        printf("%02x ", *address);  // print as a 2 number hex and use zero padding if needed

        if( (i%NUMBER_OF_BYTES) == (NUMBER_OF_BYTES-1) )// print the char list for every value (if printable)
        {
            printf("\t");
            int j;
            for(j=(NUMBER_OF_BYTES-1);j>=0;j--)
            {
                address = (unsigned char*) (input+(i*upDown)-j); 
                if(isprint(*address)==0)// print a dot if the byte value is not printable
                {
                    printf(".");
                }
                else
                {
                     printf("%c",*address); // print the byte value as a char, if printable
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:12:15.143

您的分段错误可能来自尝试访问程序范围之外的内存。“dummy”中的地址是您程序中的第一个 malloc，因此它代表（可能）您的程序可用的第一个内存“区域”。从那里往上走可能会把你留在程序空间中（因此没有段错误），但往后走可能会把你带到一个受限的内存区域。出于好奇：为您的“虚拟”malloc 返回的内存地址是什么？这个数字是否大到足以倒退而不会变成负数？（我想知道您的程序是否看到真正的系统内存映射或已经为程序沙盒的分页映射。）

# vb.net - 如何使一个视图具有与其布局中指定的内容不同的内容？

> ID：15351077
> 
> 赞同：1
> 
> 时间：2013-03-12T00:04:31.733
> 
> 标签：vb.net, asp.net-mvc-3, razor

假设我有很多视图，每个视图都显示非常相似的内容。每个视图都使用与 _ViewStart 中定义的相同的 _Layout。

我的 _Layout 可能如下所示：

```
<html>
<!-- some html -->
@ViewBag.SomeViewBagFun
<!-- more html -->
@RenderBody
<!-- more html -->
@SpecialFunction()
</html>

Helper SpecialFunction()
@<a href="/">Linky</a>
@<!-- complex HTML -->
End Helper 
```

假设我 90% 的页面使用`SpecialFunction()`布局中定义的默认值，但偶尔有些视图需要不同的`SpecialFunction()`.

解决此问题的一种方法是以这种方式使用`ViewBag`和发送每个视图内容，但`SpecialFunction()`包含复杂的 HTML，我想使用剃刀视图。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:31:36.047

最好的方法是使用一个部分，当你渲染它时让它*不需要*。

有关详细信息，请参阅 ScottGu 的博客：[http ://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:31:36.593

在这里。

自从我使用 ASP.NET MVC 和 Razor 以来已经有一段时间了。我忘记了**Sections**。我觉得很傻^^

解决方案：

`_Layout`

```
<html>
<!-- some html -->
@ViewBag.SomeViewBagFun
<!-- more html -->
@RenderBody
<!-- more html -->
@If IsSectionDefined("SpecialFunction") Then
    @RenderSection("SpecialFunction", False)
Else
    @SpecialFunction()
End If

</html>

Helper SpecialFunction()
@<a href="/">Linky</a>
@<!-- complex HTML -->
End Helper 
```

`Another View`

```
Section SpecialFunction
<p>Very different HTML!</p>
End Section 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:16:18.373

您可以在实际中指定布局`View`，因此，

```
@{
    Layout = "/address/to/your/different/layout.cshtml"
} 
```

查看此[问题](https://stackoverflow.com/questions/5161380/how-do-i-specify-different-layouts-in-the-asp-net-mvc-3-razor-viewstart-file)以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:35:27.037

您可以将条件添加到您的视图包，并根据布局将执行 specialFfunction 或 someOtherFunction 的值[Scott Guthrie 在他的博客中给出了这种技术的一个很好的例子](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

# python - 如何从命令行调用 Python 程序中的函数

> ID：15351081
> 
> 赞同：-3
> 
> 时间：2013-03-12T00:19:44.947
> 
> 标签：python, windows, cmd

例如，假设我有一个名为 myscript.py 的文件

该文件包含以下代码。

```
foo(var):
   return var 
```

我将如何在命令行上使用参数 var 调用函数 foo。

我知道我可以进入 myscript.py 所在的目录并输入。

```
>>> python myscript.py 
```

这将运行 myscript.py。唯一的问题是 myscript.py 在运行时不会自动调用 foo。

我试过使用

```
if __name__ == "__main__":
    foo( ) 
```

这对我不起作用。出于某种原因，当我这样做时，什么也没有发生。我没有收到任何错误消息，也没有调用任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:22:20.953

你没有得到任何输出，因为你没有生成任何输出。尝试调用[`print`](http://docs.python.org/3/library/functions.html#print)：

```
def foo(var):
    print(var)

if __name__ == '__main__':
    foo('Hello, world') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:29:35.620

您必须使用该`sys`模块从命令行传递参数。你可以这样做：

```
import sys

def foo(var):
  return var

if __name__ == '__main__':
  # arguments check
  if len(sys.argv) != 2:
    print "USAGE: %s <value>" % sys.argv[0]
    sys.exit(1)

  # get the agument so as to use it to the function call
  arg = sys.argv[1]

  # call the function using this argument
  val = foo(arg)

  # print the returned value
  print val 
```

然后你可以通过这个命令运行你的 python 脚本： `python myscript.py 3` 给作为参数，例如数字 3

# sql - 合并时如何计数 (*) - SQL Server

> ID：15351082
> 
> 赞同：-3
> 
> 时间：2013-03-12T00:19:53.780
> 
> 标签：sql, sql-server-2008, sum, coalesce

我有这个 T-SQL 语句，它加起来所有，`col1`但`col2`还需要返回由返回的行数`WHERE`

我想出如何做到这一点的唯一方法是`count(FlightLogLegID - (FlightLogLegID - 1))`每行求和 1。我希望有一种更好的方法，不需要不必要的加法和减法。

```
SELECT 
    coalesce((Select sum(Col1)),0) AS Number1,
    coalesce((Select sum(Col2)),0) AS Number2,
    coalesce((Select count(TableRowID - (TableRowID - 1)), 0) AS Number3
FROM 
    SomeTable 
WHERE ... 
```

示例行

```
TableRowID   Col1   Col2
1            5      10
2            3      5
3            12     8 
```

期望的结果

```
Number1   Number2   Number3
20        23        3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:03:54.467

如果它像您的示例所暗示的那样简单，只返回一行，那么您所需要的就是：

```
Select SUM(Col1)
     , SUM(Col2)
     , Count(*)
From   SomeTable
Where  <whatever> 
```

`Coalesce`不会是一个问题： Count(*) 将计算所有记录，即使是具有空值的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:07:24.357

这是你问的吗？

```
SELECT SUM(Col1) [Number1], SUM(Col2) [Number2], COUNT(*) [Number3] 
FROM SomeTable 
```

你可以使用这个[SQL Fiddle](http://sqlfiddle.com/#!3/675e7/1)来检查它。

# c# - 依赖需要根据 StructureMap 中请求的父类型进行不同的配置

> ID：15351089
> 
> 赞同：4
> 
> 时间：2013-03-12T00:20:24.067
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, structuremap

我们正在使用 StructureMap 并试图弄清楚如何实现以下目标。

我们有 2 个接口：ICat、IDog

对于 ICat，我们需要使用 Cat 的实例。Cat 构造函数采用 ISound 的一个实例。

对于 IDog，我们需要使用 Dog 的实例。Dog 构造函数还采用 ISound 的一个实例。

ISound 有一个实现 AnimalSound。

到目前为止，一切都很好。这部分我们可以很容易地在结构图中完成。

现在，AnimalSound 出现了问题。AnimalSound 有一个可以用 LoudSound 或 SoftSound 初始化的构造函数。（LoudSound 和 SoftSound 共享同一个接口 IVolume）

我们希望所有 Cats 都被赋予一个由 SoftSound 构建的 AnimalSound，并且所有 Dogs 被赋予一个由 LoudSound 构建的 AnimalSound。

除了将设计更改为使用工厂之外，有没有办法在 StructureMap 中进行装饰性配置（我们使用的是 2.6.4.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:39:37.207

使用命名实例，您可以这样做：

```
For<ISound>().Add<AnimalSound>().Ctor<IVolume>().Is<LoudSound>().Named("Loud");
For<ISound>().Add<AnimalSound>().Ctor<IVolume>().Is<SoftSound>().Named("Soft");
For<ICat>().Use<Cat>().Ctor<ISound>().Named("Soft");
For<IDog>().Use<Dog>().Ctor<ISound>().Named("Loud"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:56:07.337

我不敢相信这是您应用程序`ICat`中`IDog`接口的实际名称，因此我无法对该设计提供真正的反馈。但是，总的来说，我会说您的设计中存在歧义，导致您出现这种情况。与其使您的 DI 配置复杂化，不如敦促您仔细查看设计并查看是否不应该修复它。

# php - 将 Ã char 转换为正确的 Å char

> ID：15351090
> 
> 赞同：0
> 
> 时间：2013-03-12T00:20:40.323
> 
> 标签：php, encode

我知道这是一个编码错误，我通常会解决它，但这让我很生气。

位于我服务器上 /files/ 目录中的文件名为：“Åkersson.pdf”

所以，这很好，花花公子。每当我尝试在 php 脚本中链接文件时，我都会得到链接“Ãkersson.pdf”。

我尝试解码结果如下：“kersson”并且编码 whish 与第一个相同：“Ãkersson.pdf”

# php - MSSQL 将多行返回到数组中，每行分解为一个数组

> ID：15351096
> 
> 赞同：0
> 
> 时间：2013-03-12T00:21:32.063
> 
> 标签：php, arrays, sql-server-2008

我有一个 MSSQL 查询，它选择满足特定条件的所有行。在 PHP 中，我想获取该数组，但随后我想将其转换为每行一个数组。因此，如果我的查询返回 3 行，我希望有 3 个可以使用的唯一数组。

我不知道该怎么做。任何帮助将不胜感激！

谢谢，内森

* * *

编辑：

```
$query = "SELECT * FROM applicants WHERE applicants.user_id ='{$_SESSION['user_id']}'";
$query_select = mssql_query($query , $connection);
if (mssql_num_rows($query_select) == 2){
      $message = '2 students created successfully';
}

$i = 0;
while($row = mssql_fetch_array($query_select)) {
    $student.$i['child_fname'][$i] = $row['child_fname']; 
        $student.$i['child_lname'][$i] = $row['child_lname'];
    $i++;
}
    $query_array1 = $student0;
$query_array2 = $student1; 
```

您会从上面的代码中注意到，我期望返回两行。现在，我想取这两行并从结果中创建两个数组。我尝试使用下面给出的解决方案。也许我的语法不正确，或者我不明白如何正确实施他的解决方案。但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:36:21.657

```
$i=0;
while( $row = mysql_fetch_array(query){
   $field1['Namefield1'][$i] = $row['Namefield1']; 
   $field2['Namefield2'][$i] = $row['Namefield2']; 
   $field3['Namefield3'][$i] = $row['Namefield3'];
   $i++;
} 
```

或者如果您喜欢二维数组：

```
$i=0;
while( $row = mysql_fetch_array(query){
   $result['Namefield1'][$i] = $row['Namefield1'];
   $result['Namefield2'][$i] = $row['Namefield2'];
   $result['Namefield3'][$i] = $row['Namefield3'];
   $i++
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:14:10.737

```
$query = mssql_query('SELECT * FROM mytable');
$result = array();
if (mssql_num_rows($query)) {
    while ($row = mssql_fetch_assoc($query)) {
        $result[] = $row;
    }
}

mssql_free_result($query); 
```

现在你可以像你想要的那样使用数组：

```
print_r($result[0]); //first row
print_r($result[1]); //second row
... 
```

# list - 在python中，如何根据特殊条件将列表中的特定值转换为不同的值

> ID：15351103
> 
> 赞同：0
> 
> 时间：2013-03-12T00:22:33.297
> 
> 标签：list, input, replace

我正在尝试编写一个程序，将班级中收到的百分比转换为 GPA 格式，然后最终找到整体 GPA。我希望它首先提示用户输入类的数量，然后输入百分比。我在让程序将百分比转换为 GPA 格式时遇到了一些麻烦（90 或更大等于 4、80 到 89 等于 3，等等......）。这是我到目前为止所拥有的

```
class_number = int(raw_input("How many classes do you have? "))
total_grade = list((raw_input("Enter Percentage: ")) for i in range(class_number))

a = total_grade

def alter(x):
   if x >= 90:
    return 4
   elif x >= 80:
    return 3
a = map(alter,a)

print a 
```

问题是无论原始百分比如何，这似乎都只输出 4s。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:27:02.443

那是因为`x`实际上是一个字符串。我认为字符串总是大于数字。您需要将每个项目转换`total_grade`为 int：

```
total_grade = list(int(raw_input("Enter Percentage: ")) for i in range(class_number)) 
```

此外，您可以只使用列表推导：

```
total_grade = [int(raw_input("Enter Percentage: ")) for i in range(class_number)] 
```

# mysql - 如何将所有查询命令和输出保存到 .sql 文件中？

> ID：15351106
> 
> 赞同：0
> 
> 时间：2013-03-12T00:22:49.690
> 
> 标签：mysql, sql

我是一个mysql新手。所以我做了几个查询并得到了结果。如何将所有内容（包括查询命令）保存到 .sql 文件中？复制和粘贴？如果结果很长怎么办？或 mysqldump （对我不起作用---找不到查询命令）任何输入表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:37:32.980

我使用[`tee`MySQL 客户端内置的命令](http://dev.mysql.com/doc/refman/5.5/en/mysql-commands.html)。

```
mysql> tee myoutputfile.txt
Logging to file 'myoutputfile.txt'
mysql> SELECT CURDATE();
+------------+
| CURDATE()  |
+------------+
| 2013-03-11 |
+------------+
1 row in set (0.05 sec)

mysql> notee
Outfile disabled.
mysql> quit
Bye

$ cat myoutputfile.txt 
mysql> SELECT CURDATE();
+------------+
| CURDATE()  |
+------------+
| 2013-03-11 |
+------------+
1 row in set (0.05 sec)

mysql> notee

$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:24:42.513

```
mysql -user -pass -e "SELECT cols FROM table WHERE cols NOT null" > /yourfolder/output.sql 
```

这会将输出保存到`/tmp/output.sql`. `.sql`不建议保存纯文本。

尝试使用`.txt`或`.log`等来保存屏幕输出。

# c - 在 C 中打印控制字符

> ID：15351109
> 
> 赞同：0
> 
> 时间：2013-03-12T00:22:56.643
> 
> 标签：c

C 中是否有使用插入符号来打印控制字符的标准方法，以便打印 ascii char 31 而不是 '\037' ，它会打印 '^C' 或 '^D'？

```
(gdb) p/c 33
$5 = 33 '!'
(gdb) p/c 32
$6 = 32 ' '
(gdb) p/c 31
$7 = 31 '\037' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:30:46.977

我想您的问题是如何在 GDB 中以该符号表示字符？如果您的问题是关于独立 C 的，为什么不使用简单的查找表呢？

```
static const char const *CTRL_CODES[32] = {
    "^@",
    "^A",
    ... // C.f. http://www.bbdsoft.com/ascii.html
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:31:43.263

不，该标准不要求将 ASCII 用作执行字符集。

# java - 从Java中的对象数组将数据写入文本文件

> ID：15351111
> 
> 赞同：-2
> 
> 时间：2013-03-12T00:23:12.563
> 
> 标签：java, arrays

```
public class ReaderWriter extends Bank {

private final String FILENAME = "clients.txt";

public void writeToFile() {
    int i = 0;
    boolean repeat = true;
    Formatter output = null;   // Used to write to file

    try {
        output = new Formatter(FILENAME);
        // Open the file

        while ((i <= accounts.length - 1) && (accounts[i] != null)) {
            output.format("%s\n", accounts[i].getAccountHolder());      
            output.format("%d%n", accounts[i].getAccountNumber());
            output.format("%d%n", accounts[i].getAmount());
            i = i + 1;
        }catch (Exception ex) {

        ex.printStackTrace();
    } finally {
        output.close();                 // Make sure to close the resource after usage.
    }
} 
```

这是`Bank`类：

```
public class Bank {

public final int MAX_NUMBER_OF_ACCOUNTS = 10;
public int max = 0;

String name1;
int money1;
int number1;

Scanner input = new Scanner(System.in);
BankAccount[] accounts = new BankAccount[MAX_NUMBER_OF_ACCOUNTS];
public void greateAccount() {
    int i = 0;
    boolean repeate2 = true;
    System.out.println("You have chosen to create a new account.");
    System.out.println("Enter the name of the account holder:  ");
    name1 = input.next();

    System.out.println("Enter the account no.");
    number1 = input.nextInt();

    System.out.println("Enter the initiating amount: ");
    money1 = input.nextInt();

    while (repeate2 == true) {
        if (accounts[i] == null) {
            if (i < 1) {
                accounts[i] = new BankAccount();
                accounts[i].setAccountHolder(name1);
                accounts[i].setAccountNumber(number1);
                accounts[i].setAmount(money1);
                repeate2 = false;
            } else {
                if (ifAccountExist(number1) != true) {
                    accounts[i] = new BankAccount();
                    accounts[i].setAccountHolder(name1);
                    accounts[i].setAccountNumber(number1);
                    accounts[i].setAmount(money1);
                    repeate2 = false;
                } else {
                    System.out.println("****This account ALREADY EXIST!****");
                    System.out.println("*************************************");
                    System.out.println();
                    max = max - 1;
                    repeate2 = false;
                }
            }
        }
        i = i + 1;
    }
    max++;
} 
```

现在我想写入文本文件帐号、姓名和金钱。我的代码不起作用。我不写它不能从数组中检索值我不知道为什么？你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:45:16.507

代码无法编译，原因有很多......

例如：

1.  为什么这条线：

    ex.printStackTrace();

    浮动在您的类 ReaderWriter （第 21 行）中并远离一个 catch 块？

2.  为什么你没有**包含**声明？

# php - 如何在打印 PDF 时添加水印？

> ID：15351112
> 
> 赞同：-2
> 
> 时间：2013-03-12T00:23:21.667
> 
> 标签：php, fpdf, watermark, fpdi

这是我的想法：

首先，我将在嵌入标签中查看文档。

其次，用户可以打印pdf，但这些是机密文件，所以他们需要与文档控制器协调以拥有自己的副本。

第三，当他们打印 PDF 时，有一些动作会在 pdf 中添加水印。我进行了研究，这就是我发现的：

[http://techienextdoor.blogspot.com/2012/10/pdfwatermarker-apply-image-watermark-to.html](http://techienextdoor.blogspot.com/2012/10/pdfwatermarker-apply-image-watermark-to.html)

我想将它集成到我的实现中，因为它很容易。但我不知道从哪里开始。

我的想法是在用 PHP 打印 PDF 之前如何拦截动作（以便我可以放置水印）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:31:27.857

您需要在查看之前生成用户特定的水印文件。否则任何人都可以保存您的原始文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:31:09.007

用php可以很容易地完成。你可以从这里开始。

[http://www.php.net/manual/en/ref.image.php](http://www.php.net/manual/en/ref.image.php)

# asp.net-mvc - SSRS 和渲染和流信息

> ID：15351115
> 
> 赞同：0
> 
> 时间：2013-03-12T00:23:45.567
> 
> 标签：asp.net-mvc, reporting-services, ssrs-2008

我正在将 Web 表单应用程序移植到 mvc。表单应用大量使用了在 mvc 世界中不能很好扩展的 ReportViewer 控件。我从头开始。如果没有自定义渲染器，我无法可靠复制的唯一属性是页数和总页数。如何使用 ReportExecution 获取这些值？我真的很犹豫是否将时间/资源投入到自定义渲染器中。我唯一能想到和不喜欢的就是设置 DeviceInfo.Section 并在它不在范围内时捕获异常。报告以 HTML40 格式呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:27:20.547

继续使用嵌入在 .aspx 页面中的 ReportViewer 控件，并创建到该页面的 MVC 路由：

```
routes.MapPageRoute(
          "Reports",
          "Reports/{folder}/{name}",
          "~/Reports/default.aspx",
          false,
          new RouteValueDictionary(
              new { folder = "", name = "", controller = "", action = "" }),

          new RouteValueDictionary(
              new { constraint = new ReportConstraint() })
          ); 
```

# java - 计算数组的平均值

> ID：15351116
> 
> 赞同：0
> 
> 时间：2013-03-12T00:23:49.280
> 
> 标签：java, arrays, mean

这是一个代码，用于获取用户估算的成绩，找到他们的平均值，偏差，并以表格样式显示此信息。我的程序接受用户输入并很好地显示信息，但它不会正确计算平均值和偏差。运行时，它显示平均值为 0。我的做法与我的老师教我们的原因相同，但我找不到我的错误。

```
import java.util.Scanner;

public class ClassScores{
public static void main(String[] args){
String[] names = {"Bashful","Doc","Dopey","Grumpy","Happy","Sleepy","Sneezy"};
double[] grades = new double[7];
double mean=0;
double[] difference = new double[7];

getScores(grades);
average(grades, mean);
deviation(grades,mean,difference);
displayResults(names, grades, difference, mean);
} 

public static double[] getScores(double[] grades)
{
Scanner kb= new Scanner(System.in);
System.out.println("Enter grades for students in alphabetical order.");
for (int i=0;i<grades.length; i++)
{
    grades[i]=kb.nextDouble();
}
return grades;  
}

public static double average(double[] grades, double mean)
{
double total = 0;
for (double i : grades)
{
    total += i;
}
if (grades.length>0)
{
    mean = total/grades.length;
}
return mean;
}

public static double[] deviation(double[] grades, double mean, double[] difference)
{
for (int i=0; i<grades.length; i++)
{
    difference[i]=grades[i]-mean;
}
return difference;
}

public static void displayResults(String[] names, double[] grades, double[] difference, double mean)
{
System.out.println("The average score is" +mean);
System.out.println("Student Name   Grade    Mean Deviation");

for (int i=0; i<names.length; i++)
{
    System.out.printf(names[i]);
    System.out.printf("%20f", grades[i]);
    System.out.printf("%20f", difference[i]);
    System.out.println();
}

}   

} 
```

这是任何好奇的人的编辑代码。

导入 java.util.Scanner；

```
public class ClassScores{
public static void main(String[] args){
String[] names = {"Bashful","Doc","Dopey","Grumpy","Happy","Sleepy","Sneezy"};
double[] grades = new double[7];
double mean=0;
double[] difference = new double[7];

getScores(grades);
mean = average(grades);
deviation(grades,mean,difference);
displayResults(names, grades, difference, mean);
}

public static double[] getScores(double[] grades)
{
Scanner kb= new Scanner(System.in);
System.out.println("Enter grades for students in alphabetical order.");
for (int i=0;i<grades.length; i++)
{
    grades[i]=kb.nextDouble();
}
return grades;  
}

public static double average(double[] grades)
{
double total = 0;
for (double i : grades)
{
    total += i;
}
return total/(grades.length);
}

public static double[] deviation(double[] grades, double mean, double[] difference)
{
for (int i=0; i<grades.length; i++)
{
    difference[i]=grades[i]-mean;
}
return difference;
}

public static void displayResults(String[] names, double[] grades, double[] difference, double mean)
{
System.out.println("The average score is" +mean);
System.out.println("Student Name   Grade    Mean Deviation");

for (int i=0; i<names.length; i++)
{
    System.out.printf(names[i]);
    System.out.printf("%20f", grades[i]);
    System.out.printf("%20f", difference[i]);
    System.out.println();
}

}   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:28:08.947

您从未真正使用过该`average`方法的返回结果。您可能打算将其传递给`displayResults`，或将其分配给`mean`方法中`main()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:29:38.420

首先，您的平均方法应该看起来更像这样：

```
public static double average(double[] grades)
{
    // Error check up front.
    if (grades.length == 0) { 
        throw new InvalidArgumentException("length is 0");
    }

    // These next lines are good.
    double total = 0;
    for (double i : grades)
    {
        total += i;
    }

    // Then you can just divide and return.
    return total / (grades.length);
} 
```

没有理由将`mean`参数传递给该`average`方法。这就像将 a 传递`Dog`给一个`createDog`方法。

但更重要的是，当您调用 时`average`，您不会将结果存储在任何地方。你只是忽略它。

如果您来自使用指针的背景，请记住 Java 通过*值*更改传递原语 -方法内部的`mean`a`double`对方法外部的值没有影响。相反，有

```
double mean = average(grades); 
```

所以为什么`mean`是零的根本原因是因为你将它设置为零，并且永远不会改变它：

```
double mean = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:28:42.667

您正在返回您的`mean`值，但您没有将方法调用的结果分配`average`给任何东西。您想要的是将方法的结果分配给变量：

```
mean = average(grades); 
```

而且在你的`average`方法中，不需要`mean`作为参数，只需在本地声明并返回即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:31:08.263

`average(grades, mean);`将变量的*副本*`average()`发送到方法。尽管同名，但里面的变量与`mean`里面`average()`的变量没有任何关系。要解决此问题，您需要执行类似的操作`mean``main()`

```
mean = average(grades, mean); 
```

我还建议您删除`mean`参数并在`average()`. 然后你可以做

```
mean = average(grades); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T00:31:48.607

您已声明此方法以返回一个值：

```
public static double average(double[] grades, double mean) 
```

但是在您的 main 方法中，您不使用返回的结果。然后，您将打印出该函数全局的另一个“均值”变量的值，并被赋值为 0。

```
double mean=0;
double[] difference = new double[7];

getScores(grades);
**average(grades, mean);**
deviation(grades,mean,difference);
displayResults(names, grades, difference, mean); 
```

我想你想要：

```
getScores(grades);
**mean = average(grades, mean);**
deviation(grades,mean,difference);
displayResults(names, grades, difference, mean); 
```

# php - 将产品导出为 csv 然后将它们导入到 shopify

> ID：15351124
> 
> 赞同：1
> 
> 时间：2013-03-12T00:24:47.500
> 
> 标签：php, database, csv, e-commerce, shopify

我希望将大约 4000 个从较旧的电子商务平台转移到 shopify。

我已经将一些产品导出为 csv 文件，并一直在研究如何将它们上传到 shopify，但我很早就遇到了一个相当大的问题：下载的 csv 文件不包含图像或图像的永久链接。

我的一位老讲师曾经告诉我，他编写了一个 php 脚本，该脚本对数据库中的电子邮件执行了类似的操作，所以我想知道您是否可以对电子商务网站上的产品执行此操作？

有关如何执行此操作的任何信息都会很棒，制作执行此操作的脚本的想法似乎很酷，我注意到 shopify 似乎已经准备好从 Magent 和 Wordpress 导入产品的应用程序。

这是csv中的数据行之一

Harken 绞盘 Harken 绞盘 Harken 1 HB0011 绞盘 HARKEN ALUMINIUM 1SP 描述 0.7

B6
齿轮比：1:1
功率比：8.4:1
紧固件圆：65mm
紧固件：6 x 6mm

B6A 208.564 0 HB0011 1.1 B8A 307.6825 0 HB0014 0
Harken 绞盘 Harken 绞盘 Harken 1 HBR3STA 绞盘 HARKEN 3SPEED STA RADIAL 描述 11.7

60.3STA
滚筒：120mm
底座：236mm
高度：246mm
重量：11.7kg
紧固件圆周：204mm
齿轮比 1：2.20
齿轮比 2：4.80
齿轮比 3：14.40
功率比 1：9.20
功率比 2：20.30
功率比 3：61.00

60.3STA 7183.4058 0 HBR60.3STA 11.7 70.3STA 9893.3115 0 HBR70.3STA 12.8 80.3STA 14834.9199 0 HBR80.3STA 22.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:42:25.987

这在 Shopify 中是可能的，但您必须按照 Shopify 期望的方式格式化您的 CSV 文件。

[请参阅有关常见产品 CSV 导入问题](https://help.shopify.com/en/manual/products/import-export/common-import-issues)的这篇文章。那里也有几个示例文件。

图像会更难。您需要从当前的电子商务主机下载，然后[将它们批量上传到 Shopify](https://help.shopify.com/en/manual/productivity-tools/bulk-editing-products)。

上传图片后，您要么需要在 Shopify 中逐个产品地将它们重新分配给产品，要么在 Shopify 上确定它们的 URL 路径并将该 URL 添加到您的 CSV 文件中，然后再上传。

# ruby-on-rails - 如何在我的 `_navigation.html.erb` 中动态生成选择菜单，最好使用 simple_form？

> ID：15351127
> 
> 赞同：0
> 
> 时间：2013-03-12T00:25:32.057
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我想在我的部分中生成一个选项`<select>`菜单，该菜单将显示在每一页上。`Vendor``_navigation.html.erb`

这是我想要生成的 HTML：

```
<form>
 <select>
    <option value="">Browse by Store</option>           
    <option value="Apple">Apple</option>
    <option value="Deisel">Deisel</option>
    <option value="NIke">Nike </option>
 </select>
</form> 
```

然后，一旦有人选择了供应商，就会将他们带到相当于`vendors_path(@vendor)`. 如果我试图以常规 form_partial 执行此操作，我只需执行以下操作：

```
<%= simple_form_for(@product) do |f| %>
    <%= f.association :vendors %>
<% end %> 
```

但是...然后我会声明某种方式，`@product`以便在控制器中处理该表单，该控制器控制呈现此表单的视图。

我该怎么做`/layouts/_navigation.html.erb`？

而且...我如何生成链接功能，当他们选择`vendor`他们想要的时，它会自动将他们重定向到该`vendor/:id`页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:44:07.900

我不明白您为什么要使用表单来构建这些链接，以及为什么将这些链接与您的应用程序控制器一起使用。如果您想更改每个产品页面显示的链接，您可以这样做：

```
<ul class="nav nav-pills">
 <li class="dropdown">
  <a class="dropdown-toggle"
   data-toggle="dropdown"
   href="#">
   Navigation with Vendors by Product
     <b class="caret"></b>
  </a>
<ul class="dropdown-menu">
  <% @product.vendors.each do |vendor| %>
  <li><%= link_to vendor.name, vendor %></li>
  <%end%>
 </ul>
 </li>
</ul> 
```

将此部分用于您的展示视图产品。

假设这些模型：product.rb

```
has_many :brands
has_many :vendors, :through => :brands 
```

供应商.rb

```
has_many :brands
has_many :products, :through => :brands 
```

品牌.rb

```
belongs_to :product
belongs_to :vendor 
```

如果您只需要所有供应商的部分菜单，您也可以这样做：

```
<ul class="nav nav-pills">
  <li class="dropdown">
<a class="dropdown-toggle"
   data-toggle="dropdown"
   href="#">
    General Navigation Vendors
    <b class="caret"></b>
  </a>
<ul class="dropdown-menu">
  <% Vendor.all.each do |vendor| %>
  <li><%= link_to vendor.name, vendor %></li>
  <%end%>
</ul> 
```

If you want to load all Vendors into your application_controller, maybe you can use before_filter :load_vendors

```
 def load_vendors
  @vendors = Vendor.all
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:13:52.123

将您的控制器代码放入您的 application_controller.rb 然后在您的视图文件夹中创建一个名为 application 的文件夹并将您的部分文件放入其中。

[http://railscasts.com/episodes/269-template-inheritance](http://railscasts.com/episodes/269-template-inheritance)

我不熟悉简单的形式，但 railscasts 也有一个很好的如何使用简单的形式。

[http://railscasts.com/episodes/234-simple-form-revised](http://railscasts.com/episodes/234-simple-form-revised)

# java - Google Maps Android v2 - 无法隐藏地图片段

> ID：15351128
> 
> 赞同：3
> 
> 时间：2013-03-12T00:25:38.820
> 
> 标签：java, android, google-maps-android-api-2

我在新的 v2 API 中遇到了谷歌地图对象的问题。我正在尝试添加方法来显示和隐藏地图对象，但我似乎无法让它工作。

例如 - 我有一个名为 MyMapFragment 的类，它扩展了 MapFragment 类。

我已经尝试了几种我在这里看到过的方法，但似乎都不适合我。

选项 1：在 MyMapFragment 类中，我尝试调用：

```
this.getFragmentManager().beginTransaction().hide(this).commit(); 
```

选项 2：我尝试使用以下内容隐藏实际的包含视图：

```
getActivity().getWindow().findViewById(CONTENT_VIEW_ID);
v.setVisibility( View.INVISIBLE ); 
```

这两个选项都成功隐藏了地图的 UI 控件（即缩放控件），但实际地图并未隐藏。

有谁看到这种隐藏地图片段的方法可能有什么问题？

非常感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T09:54:53.547

尝试将其放入`FrameLayout`然后将 id 分配给布局并使用该方法显示/隐藏整个布局`.setVisibility(View.GONE/View.VISIBLE)`

不确定这是否是正确的方法，但它对我有用。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:46:01.237

我遇到了同样的问题（请参阅[MapFragment 和 Camera 在同一个 Activity 中似乎相互干扰](https://stackoverflow.com/questions/15370624/mapfragment-and-camera-seem-to-interfere-with-each-other-in-the-same-activity)）。就我而言，用户 CommonsWare 建议我的问题是因为我在一个 Activity 中使用了两个 SurfaceView 对象，我就是这样。当我为一个应用程序使用两个活动时，我的问题就消失了。也许这就是问题的根源？

# duplicates - 关于重复和区域服务器热点的 HBase 表键设计

> ID：15351130
> 
> 赞同：6
> 
> 时间：2013-03-12T00:25:41.673
> 
> 标签：duplicates, hbase, primary-key-design

我需要存储由*userId*标识的用户生成的事件。每个用户都属于一个由*companyId*标识的公司。我在 HBase 中提出了一个表设计，如下所示：

**行键**：<*公司*ID ><用户*ID* ><*时间戳*>

 ***column-family** : info （封装事件属性集，如下所示）

**列**：< *attr1* >、< *attr2* >....< *attrn* >

我知道这种键设计将有助于稍后通过使用部分键扫描在*companyId*和/或*userId上查询数据。*话虽如此，我有一些问题和疑虑，想得到一些想法。

1-如果我们有一个读取给定时间范围的所有数据的读取用例，那么在当前的设计中，我们将无法使用 rowKey。相反，我们将不得不对时间戳字段进行全面扫描和过滤行（作为*attr*列之一单独维护）我在这里完全偏离基础吗？

2-如何处理重复？我知道 HBase 在这种情况下会创建该行的新版本，但它是否允许稍后根据 1 中提到的读取用例进行读取？我知道您可以在查询时控制版本，但这会是一个好的设计还是错误地重载本机功能？

3-这与区域服务器热点有关。我们没有单片密钥，但如果某个特定公司或用户非常活跃，我们仍然可以解决这个问题。基于服务器数量的散列和分桶在这种情况下不起作用？也许如果我们对时间戳字段进行散列并将其附加到 rowKey 而不是原始值？但是问题在于无法扫描密钥的时间戳组件。我们必须在一个列中有一个单独的列 (attr) 来捕获它。有什么建议么？

非常感谢您提供的任何输入（评论、链接、书籍、想法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T21:36:33.703

1：阅读用例

这取决于您的用例：

*   如果您希望在给定时间范围内获取组织的每个用户数据，那么您所拥有的对我来说似乎是正确的，您必须对所有组织数据进行扫描。

*   如果您希望读取给定的所有数据，您当前的密钥设计似乎很好。虽然我会翻转 org 和 user id 位置来制作新键（**rowkey** : *userId-companyId-timestamp*）。这将因为来自独立用户的数据是不相交的，这些现在不需要耦合在一起。

*   如果您将时间戳推到顶部（**rowkey** : *timestamp-companyId-userId*），您可能能够对在时间范围定义的位置结束的所有组织/所有用户信息进行扫描（跳过全表扫描）

2：重复

注意：Hbase 默认记录最多 3 个版本的单元格（也不要将这些版本时间戳与行键上的时间戳混淆）。您也可以增加此限制并从不同版本中获取结果，但不建议此版本计数很高。

如果您要覆盖以前保存的值，我建议不要依赖查找以前保存的版本（尽管有实现此目的的方法）。如果您必须能够保存/获取所有以前记录的数据，您也可以使用新列来存储新值。

3：热点地区

*   如果一家公司非常活跃，您可以将 companyId-userId 的散列附加到您的行键。这将在任何组织上分发写入。

*   如果用户非常活跃并且有一个用例以最佳方式取回其所有数据，那么我不确定散列密钥或时间戳是否是一个好的解决方案。您肯定希望将用户的数据保存在一起，我不确定这里有什么更好的解决方案。

根据我对您问题的理解，我可能**会将 ROWKEY**设计为**HASH(companyId-UserId)-companyId-UserId-Timestamp***

# cloud-foundry - 如何访问 BOSH 部署作业的服务器 IP 地址？

> ID：15351134
> 
> 赞同：1
> 
> 时间：2013-03-12T00:26:05.543
> 
> 标签：cloud-foundry

标准 Cloud Foundry 版本中的许多作业都有模板，这些模板利用 Ruby erb 将值从 bosh 部署清单插入到文件中，这些文件成为已安装组件的一部分。例如，[postgresql 网关启动脚本](https://github.com/cloudfoundry/cf-release/blob/master/jobs/postgresql_gateway/templates/postgresql_gateway_ctl)的模板包括如下几行：

```
PG_ADMIN_USER=<%= properties.postgresql_gateway.admin_user || "pg_admin" %>
PG_ADMIN_GROUP=<%= properties.postgresql_gateway.admin_group || "admin" %>
PG_ADMIN_PASSWD_HASH=<%= properties.postgresql_gateway.admin_passwd_hash || "" %> 
```

替换将按如下方式实例化文件：

```
PG_ADMIN_USER=adminadmin
PG_ADMIN_GROUP=admin
PG_ADMIN_PASSWD_HASH= 
```

如果您的 bosh 发布清单中包含以下内容。

```
properties:
  postgresql_gateway:
    check_orphan_interval: 7200
    token: AAAeAh4BXFBXwLrrWJCpQTfeDnaCn7m
    supported_versions: ["9.0"]
    version_aliases:
      current: "9.0"
    admin_user: adminadmin
    admin_group: admin 
```

有没有办法让我动态插入虚拟机的 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:26:05.543

是的。在评估这些模板表达式的上下文中还有另一个可用的对象——“spec”对象。我会留给你去挖掘并查看规范对象中所有可用的内容，但迄今为止我发现的最有用的部分之一是提供此模板的服务器 IP 地址的部分实例化。您可以在我通过 BOSH 部署示例回显服务的练习中[描述的 mods](http://corneliadavis.com/blog/2013/02/22/deploying-a-service-to-cloud-foundry-via-bosh/)中看到一个示例：

```
exec java \
    -jar EchoServer-0.1.0.jar \
    -ipaddress <%= spec.networks.default.ip %> \
    -port <%= properties.echoserver && properties.echoserver.port || 8080 %> \
    >>$LOG_DIR/echoserver.stdout.log \
    2>>$LOG_DIR/echoserver.stderr.log 
```

这是您正在寻找的 spec.networks.default.ip 值。

# java - 从命令行在谷歌应用引擎上部署应用程序后出现 500 服务器错误

> ID：15351139
> 
> 赞同：0
> 
> 时间：2013-03-12T00:26:53.707
> 
> 标签：java, google-app-engine

我正在将应用程序部署到谷歌应用引擎命令行。当我在 GAE 上成功部署我的应用程序后尝试访问我的应用程序时（管理日志显示新版本已成功部署。）当我使用 Eclipse Juno 的 appengine 插件部署应用程序时，我能够成功访问 servlet。我在 Mac OSX 上，但我能够成功访问 index.html。我的 appengine-web.xml 看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <application>my-app-id</application>
    <version>1</version>
    <threadsafe>true</threadsafe>
    <system-properties>
        <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
    </system-properties>
</appengine-web-app> 
```

# c - 用 32 位编译会出错

> ID：15351140
> 
> 赞同：3
> 
> 时间：2013-03-12T00:27:00.787
> 
> 标签：c, linux, gcc, ubuntu

我正在将程序编译为汇编代码，特别是 32 位形式，当我在没有 -m32 标志的情况下编译时...：

```
gcc -S examples.c 
```

它编译得很好。但是，当我这样做时...

```
 gcc -S -m32 examples.c 
```

我在包含 stdlib.h （因为它没有出现在预览窗口中显示格式而被删除）行上出现错误，如下所示：

```
In file included from /usr/include/stdlib.h:25:0,
             from examples.c:1:
/usr/include/features.h:324:26: fatal error: bits/predefs.h: No such file or directory
compilation terminated. 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T00:32:48.830

您缺少 32 位 C 库和头文件。这些默认情况下未安装在 64 位 Ubuntu 中，但您可以通过运行以下命令来安装（与 C++ 一起）：

```
$ sudo apt-get install g++-multilib 
```

# c# - 如何在 1 个阻塞调用中执行操作？

> ID：15351142
> 
> 赞同：0
> 
> 时间：2013-03-12T00:27:05.353
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone

如何将这 2 个操作变成 1 个操作？实际上我在后台代理中使用了，但是第二个操作无法执行并且无法获取值。任何的想法？

```
public void running()
{    
  ServiceReference1.WebServiceSoapClient test = new ServiceReference1.WebServiceSoapClient();

  test.ReadTotalOutstandingInvoiceCompleted += new EventHandler<ServiceReference1.ReadTotalOutstandingInvoiceCompletedEventArgs>(serviceClient);  

  test.ReadTotalOutstandingInvoiceAsync();
}

public void serviceClient(object sender, ReadTotalOutstandingInvoiceCompletedEventArgs e)
{

  answer = int.parse(e.Result.ToString());
} 
```

更新：在后台代理：

```
 VibrateController testVibrateControl = VibrateController.Default;
        public int answer;

        protected override void OnInvoke(ScheduledTask task)
        {
            //TODO: Add code to perform your task in background
            running();

            ShellTile t = ShellTile.ActiveTiles.First();

            StandardTileData d = new StandardTileData()
            {
                Title = "U have " + answer + " Invoice!!",
                BackTitle = "How Are You!!",
                //Count = 0,
                // BackBackgroundImage = new Uri("dog.jpg", UriKind.Relative),
                // BackgroundImage = new Uri("untitled.png", UriKind.Relative)
            };
            t.Update(d);

            testVibrateControl.Start(TimeSpan.FromSeconds(3));
            testVibrateControl.Stop();
            //ShellTile.Create(new Uri("/MainPage.xaml?pp=cas", UriKind.Relative), d);
            NotifyComplete();
        } 
```

在主页：

```
 private void CheckBox_Checked_1(object sender, RoutedEventArgs e)
        {
            try
            {
                PeriodicTask p = new PeriodicTask("jj");
                p.Description = "Don't push the red button";
                ScheduledActionService.Add(p);
                //ScheduledActionService.LaunchForTest(p.Name, TimeSpan.FromSeconds(2));
                #if (DEBUG_AGENT)
                ScheduledActionService.LaunchForTest(p.Name, TimeSpan.FromSeconds(2));
                #endif
            }
            catch (Exception ex)
            {
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:58:05.543

在 99.9% 的情况下，将异步调用转换为阻塞调用是一个坏主意，所以我很想知道你为什么需要它。

如果从未执行第二个操作，则可能存在服务器端或连接问题。假设您使用的是 WCF 服务，请使用[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)检查返回的结果是否与您期望的一样。

据我所知，`NotifyComplete`在触发回调之前调用，这很可能是问题所在。虽然所有其他调用都被单步执行，但存在潜在的竞争条件，即回调不够快，无法在代理执行完成通知操作系统之前被触发。

您可以做的是在内部包装回调。像这样：

```
ServiceReference1.WebServiceSoapClient test = new ServiceReference1.WebServiceSoapClient();
test.ReadTotalOutstandingInvoiceCompleted += (s,e) =>
{
   // Do some things here
   NotifyComplete();
};

test.ReadTotalOutstandingInvoiceAsync(); 
```

从那里继续，为什么不让它返回一个`int`开始，这样你就不必解析它了？

# php - 将压缩文件存储在数据库中是否有优势

> ID：15351145
> 
> 赞同：5
> 
> 时间：2013-03-12T00:27:26.827
> 
> 标签：php, postgresql, compression

问题的背景。

*   数据库是 PostgreSQL 9.1
*   数据是大量的文本（网页标记语言）
*   专栏是 bytea

因此，我可以使用 PHP 的 gzcompress 存储压缩文本，并可能将文件大小减少到 70%，然后将其存储在 bytea 列中。但是手术真的值得吗？是不是已经在 PostgrSQL 中使用 TOAST 压缩了 bytea 并且添加另一层压缩不会对数据大小产生重大影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:55:20.787

是和不是，这取决于您的应用程序。

RE：TOAST，[根据 PostgreSQL 的文档](http://www.postgresql.org/docs/8.3/static/storage-toast.html)压缩（使用 LZ），它们仅在文本大于 2KiB 的阈值时才调用压缩。

因此，如果您存储的 HTML 小于 2KiB，那么进行自己的压缩可能是值得的，但在这种情况下，我不会打扰，因为如今大多数 HTML 文档往往至少为 10KiB，并在您的应用程序层中实现压缩似乎很麻烦，并使您的数据不那么便携。在 PHP 中执行此操作也会对性能产生非常实际的影响。

但是，如果您正在为一个非常大的网络论坛存储一个存档，例如，其中的 HTML 平均将小于 2KiB，但其中有很多（一些论坛的帖子数达到数百亿），那么无论如何压缩数据都有一个很好的案例。

因此，如果您有很多（例如，>10GB 左右）的小数据，那么自己压缩数据可能是值得的，**但始终首先进行分析和基准测试！**, 否则就别费心了，让 PostgreSQL 整理一下吧。

# c - 如何从 Visual Studio 2010 调用批处理文件

> ID：15351147
> 
> 赞同：1
> 
> 时间：2013-03-12T00:27:38.430
> 
> 标签：c, file, batch-file, execute

我编写了一个代码来生成翼型形状并使用外部程序作为评估工具对其进行评估。我还制作了一个批处理文件，该文件启动该程序执行翼型评估所需的一些批处理命令，然后关闭该程序....！

我在每个循环中进行了几次评估。我的问题是我找不到通过我的代码运行批处理文件的方法。我使用了下面显示的两种方法，但它们似乎都不能在 Visual Studio 2010 中工作。我用 C 编写代码，我收到 C:/Users/Angelos/Documents/CExperiments/BSplines/run.bat 不是内部的消息命令等等……！

你能检查一下并告诉我我在做什么错吗..？

谢谢

```
void XfoilCall()
{
SHELLEXECUTEINFO ShExecInfo = {0};
ShExecInfo.cbSize = sizeof(SHELLEXECUTEINFO);
ShExecInfo.fMask = SEE_MASK_NOCLOSEPROCESS;
ShExecInfo.hwnd = NULL;
ShExecInfo.lpVerb = NULL;
ShExecInfo.lpFile = ("C:/Users/Angelos/Documents/CExperiments/BSplines/run.bat");
ShExecInfo.lpParameters = ("");
ShExecInfo.lpDirectory = NULL;
ShExecInfo.nShow = SW_SHOW;
ShExecInfo.hInstApp = NULL;
ShellExecuteEx(&ShExecInfo);
WaitForSingleObject(ShExecInfo.hProcess,INFINITE);

void XfoilCall()
{
system("C:/Users/Angelos/Documents/CExperiments/BSplines/run.bat");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:29:30.317

而是试试这个：

```
system("cmd C:/Users/Angelos/Documents/CExperiments/BSplines/run.bat"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:31:57.093

您的斜杠方向错误（它们应该是反斜杠）并且需要转义。您还需要启动命令解释器 ( `cmd.exe`) 来处理批处理脚本。

```
ShExecInfo.lpFile = ("cmd.exe /c C:\\Users\\Angelos\\Documents\\CExperiments\\BSplines\\run.bat"); 
```

# java - Permutations with Restrictions

> ID：15351150
> 
> 赞同：3
> 
> 时间：2013-03-12T00:27:53.357
> 
> 标签：java, permutation

In java, I'm trying to find a way to generate permutations based on restrictions. How can I generate the number of permutations (with the restrictions in mind), or at least know how many?

**Edit: Simple Restriction Definition:**

Possible values: `A, B, C`

Restrictions: `a[0] == a[1]` and `a[0] != [2]`

Example dataset:

```
AABA
AABB
AABC
AACA
AACB
AACC
BBAA
BBAB
BBAC
BBCA
BBCB
BBCC
CCAA
CCAB
CCAC
CCBA
CCBB
CCBC 
```

I've tried generating all permutations and then subtracting the incompatible ones, this seems terribly inefficient. How can I do this efficiently? **I only need to count the permutations, however it would be good to generate them all.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:12:46.737

Strictly speaking, those are not [permutations](http://en.wikipedia.org/wiki/Permutation), but rather sequences over a finite domain.

A trivial algorithm is to generate all sequences, and only output those sequences that satisfy the restrictions. Generating all sequences of length n over a domain A is quite easy with recursion:

```
class SequenceGenerator {
    char[] domain;
    char[] sequence;
    int n;

    void generate(int i) {
        if (i == n) {
            System.out.println(new String(sequence));
        } else {
            for (char c : domain) {
                sequence[i] = c;
                generate(i + 1);
            }
        }
    }
} 
```

A more refined algorithm would check partially formed sequences. For instance, if you know your sequence starts with AB, you already know it will not satisfy the restriction sequence[0] == sequence[1], so there is no point in filling in the remaining elements:

```
abstract class PickySequenceGenerator extends SequenceGenerator {

    @Override
    void generate(int i) {
        if (possible(i)) {
            super.generate(i);
        }
    }

    /** @return whether a sequence starting with the first i elements of {@link #sequence} can still satisfy all constraints */
    abstract boolean possible(int i);
} 
```

For extra efficiency, you can assign values to the most constrained sequence elements first.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:22:34.450

If you only want to count the sequences rather than generate them, then you can borrow some ideas from combinatorics. First note that without restrictions there are `3*3*3*3` 4-character strings from the "alphabet" {A, B, C}. If we add the restriction that the first and second character must be the same, then there are `3*1*3*3` possible strings. If, on the other hand, we add the restriction that the first and third character *cannot* be the same, then there are `3*3*2*3` possibilities.

If the restrictions are part of the input to your program, then you can use these two examples to create a general solution by assigning the number of choices to each character in the string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:38:40.563

```
for (char a0='A'; a0<='C'; a0++) {
  char a1=a0;
  for (char a2='A'; a2<='C'; a2++) {
    if (a0 != a2) {
      for (char a3='A'; a3<='C'; a3++) {
         a.append(a0 + a1 + a2 + a3);
      }
    }
  }
} 
```

(pseudocode, but I think you get the picture)

# c++ - 使用 C++11 正则表达式捕获上下文无关语法文件的内容

> ID：15351153
> 
> 赞同：2
> 
> 时间：2013-03-12T00:28:10.200
> 
> 标签：c++, regex, parsing, context-free-grammar, lexer

# 前言

我正在尝试编写自己的上下文无关语法规范，以与我的词法分析器/解析器的规则相关联。这意味着类似于[ANTLR](http://www.antlr.org/)的，其中大写标识符分类为 Lexer 规则，小写标识符分类为 Parser 规则。它旨在接受用于词法分析器规则的字符串文字和/或正则表达式的任何组合，以及用于解析器规则的词法分析器/正则表达式规则和/或其他解析器标识符的任何组合。里面的每条规则都是***<identifier>:<expression>的格式；***

下面是一个语法示例：

```
integer      : DIGIT+;        //parser rule containing at least one lexer rule
twodigits    : DIGIT DIGIT;   //parser rule containing two consecutive lexer rules
DIGIT        : [0-9];         //lexer rule containing regex
string       : '"' CHAR* '"'; //parser rule containing zero or more 
                              //  lexer rules, wrapped in two string literals
CHAR         : (LCHAR|UCHAR); //lexer rule containing two lexer rules which
                              //  will later evaluate to one of two tokens
LCHAR        : [a-z];         //lexer rule containing regex
UCHAR        : [A-Z];         //lexer rule containing regex
SPACE        : ' ';           //lexer rule containing string literal 
```

* * *

# 问题

我遇到的麻烦是匹配表达式字符串的能力，因为它们的内容往往会有所不同。
我最初写
`([a-zA-Z0-9_]*)(?:\s*)(?:\:)(?:\s*)((?:\'?).*(?:\'?)(?:\;))`
的是：作为匹配规则，它适用于由单引号括起来的单个字符串文字表达式，但我需要扩展它以允许多个非贪婪字符串文字，以及由任意数量的空格分隔的组合语句。我不关心在匹配的表达式中匹配潜在的正则表达式，甚至不关心表达式的隔离部分，因为这稍后由单独的正则表达式操作处理，所以实际上我只需要*验证*标识符和表达式......

***总而言之***，我需要 regex_search 操作来查看语法的内容，使用以下语法进行匹配：

*   **一个有效的标识符**，以一个或多个小写或大写字母开头，后跟任意数量的字母数字字符（可选地可以在其间包含任意数量的下划线字符，只要标识符不以一个开头或结尾）。
*   **任意数量的**空白字符、制表符、换行符等，而不捕获它。
*   **没有捕获**的冒号。****
***   **任意数量的**空白字符、制表符、换行符等，而不捕获它。*   **至少以下之一**：（以任何顺序）任意数量的字符串文字（括在单引号中，不捕获引号），任意数量的词法分析器/解析器标识符，任意数量的正则表达式（括在方括号中）。此匹配规则的结果应将整个表达式捕获为单个字符串，稍后将通过后处理阶段。*   **任意数量的**空白字符、制表符、换行符等，而不捕获它。*   **分号**可选地后跟任何未捕获的空格。*   **（可选）任意**数量的未捕获空格，后跟单个捕获的行注释*   **任意数量的**空白字符、制表符、换行符等，而不捕获它。**

 *** * *

# 问题

是否可以将其放入单个 regex_search 操作中？
我在[Expresso](http://www.ultrapico.com/Expresso.htm)中搞砸了，但似乎无法正确处理......

* * *

# 更新

到目前为止，我已经能够提出以下建议：

```
#/////////////////////
# Identifier
#/////////////////////
(
    (?:[a-zA-Z]+)           # At least one lower/uppercase letter
    (?:
        (?:[a-zA-Z0-9_]*)   # Zero or more alphanumeric/underscore characters,
        (?:\w+)             # explicitly followed by one or more alphanumeric
    )?                      #   characters
)

#/////////////////////
# Separator
#/////////////////////
(?:\s*)                     # Any amount of uncaptured whitespace
(?:\:)                      # An uncaptured colon
(?:\s*)                     # Any amount of uncaptured whitespace

#///////////////////////
# Expression
#///////////////////////
(
    # String Literals:
    (?:\'?)                 # An optional single quote,
    (?:                     #   which is meant to start and end a string
        (?:[^'\\] | \\.)*   #   literal, but issues several problems for
    )                       #   me (see comments below, after this code block)
    (?:\'?)
    # Other expressions
    # ????????????
)

#/////////////////////
# Line End
#/////////////////////
(?:\s*)                     # Any amount of uncaptured whitespace
(?:\;)                      # An uncaptured colon
(?:\s*)                     # Any amount of uncaptured whitespace 
```

如您所见，我的*标识符*、*分隔符*和*行尾*工作得很好。但是表情是我完全卡住的地方！

**我如何告诉正则表达式库我想要*一个*非贪婪的字符串文字，*或者*行尾之前的任何字符集，以及*任何*数量的任意顺序？**

即使我只允许一个字符串文字，我怎么会说*“如果第一个单引号存在，则右单引号不是可选的”*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:30:29.380

它可能并非完美无缺，并且可能需要对匹配结果的处理方式进行额外编码，但这似乎可行：

```
#/////////////////////
# Identifier
#/////////////////////
(
    (?:[a-zA-Z]+)
    (?:
        (?:[a-zA-Z0-9_]*)
        (?:\w+)
    )?
)

#/////////////////////
# Separator
#/////////////////////
(?:\s*\:\s*)

#///////////////////////
# Expression
#///////////////////////
(
    '(?:\\\\.|[^'])*'|[^']+     # Might need to be processed separately
)

#/////////////////////
# Line End
#/////////////////////
(?:\s*\;\s*) 
```**

# jruby - jruby-openssl 依赖于不存在的 bouncy-castle-java 版本？

> ID：15351155
> 
> 赞同：2
> 
> 时间：2013-03-12T00:28:15.380
> 
> 标签：jruby, bouncycastle, jruby-openssl

我正在尝试安装 jruby-openssl，但这取决于似乎不存在的 bouncy-castle-java 版本。有人知道如何解决这个问题吗？

```
$ gem install jruby-openssl 
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: jruby-openssl requires bouncy-castle-java (>= 1.5.0147) 
```

我尝试安装旧版本的 jruby-openssl，但似乎没有帮助。

```
$ gem install jruby-openssl 0.7
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: jruby-openssl requires bouncy-castle-java (>= 1.5.0147) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:58:24.520

我希望我有一个链接给你，因为我真的不明白到底发生了什么，但我遇到了同样的问题。我在 Twitter 上看到 0.8.4 版本存在问题。我不知道为什么降级到 0.8.2 没有解决它，但他们已经在 0.8.5 中发布了一个修复程序，它似乎对我有用。

（信息量不是很大，但这里是推文：[https](https://twitter.com/jruby/status/312314690313269248) ://twitter.com/jruby/status/312314690313269248 ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:35:38.067

试试看

> gem install redcar --both --no-force

bouncy-castle-java-1.5.0147 也会被安装。

# android - 所有的 10 英寸安卓平板电脑都被识别为 xlarge 吗？

> ID：15351157
> 
> 赞同：1
> 
> 时间：2013-03-12T00:28:57.033
> 
> 标签：android, screen

我正在尝试为 10 英寸（或更大）平板电脑和所有其他设备（7 英寸平板电脑、手机、三星 Galaxy Note 等）提供纵向视图。

我想知道我是否可以依靠 android 将设备识别为 xlarge ，然后假设它至少是 10 英寸平板电脑。这意味着 android 不会将任何小于 10 英寸的平板电脑识别为 xlarge（这是我所希望的，但可能不是真的）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:36:52.613

根据[文档](http://developer.android.com/guide/practices/screens_support.html)，xlarge 尺寸至少为 960dp x 720dp，其中 1px = ~ 1dp，分辨率为 160dpi。因此，这些屏幕必须（大约）为 6" x 4.5" 或更大，即最小对角线为 7.5"。因此您不能指望屏幕至少为 10"。

无论如何，如果您参考Declaring [Tablet Layouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)部分，它会解释为什么不再需要使用 xlarge 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:36:33.467

这当然是谷歌推荐的。

然而：

*   设备制造商可以修补这些东西，因此将 8.9 英寸平板电脑归类为`-xlarge`制造商选择这样做并不是不可能的，尽管如今这似乎不太常见（可能是由于更好的 Googly执法）

*   非平板电脑可以`-xlarge`，例如 1080p 显示器上的 Google TV

*   [使用](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)[而不是较旧的存储桶](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)可能会更好地为您服务[`-swNNNdp`](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)

说了这么多，我对你所说的目标感到困惑：

> 我正在尝试为 10 英寸（或更大）平板电脑和所有其他设备（7 英寸平板电脑、手机、三星 Galaxy Note 等）提供纵向视图。

您应该为所有受支持的设备尺寸提供纵向和横向布局。应该欢迎用户随意握住他们的设备，而不受人为限制。仅仅因为*您*可能更喜欢以这种方式使用这些平板电脑并不意味着您的所有用户都会这样做。

# java - 创建多个 HashMap 有多糟糕？

> ID：15351158
> 
> 赞同：1
> 
> 时间：2013-03-12T00:29:22.673
> 
> 标签：java, hashmap

我基本上只是想知道制作 HashMaps 使用了多少内存。

在获取时制作一个类型的 HashMap 并进行转换会更好`Object`吗？还是可以为我要存储的不同类型制作许多 HashMap？

例子：

```
HashMap<Integer,Type1> map1;
HashMap<Integer,Type2> map2;
HashMap<Integer,Type3> map3; 
```

对比

```
HashMap<Integer, Object> map;
// And getting it by
(Type1)map.get(Integer); //or (Type2), etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:31:35.277

我会避免创建一个`HashMap`对象值。利用 的通用特性`HashMap`来避免在代码中到处出现强制转换。关于记忆，如果合适的话，我会`HashMap`在它出现和发出时使用对记忆的担忧，一旦它抬起头来解决它。大多数正常的初始化不`HashMap`应该产生内存问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:41:06.147

如何使用这些 HashMap 很重要。如果您要存储多种类型的值并使用一组键，那么您应该使用一个 HashMap。如果您要存储多种类型的值并为每种类型使用不同的键集，则应该使用多个映射。

100 个 HashMap 和 1 个之间的内存成本差异非常小。您会注意到的最重要的事情是，如果您有很多微小的 HashMap（例如，数千张地图，每个地图中只有 2 或 3 个值），那么您将浪费大量空间，因为默认构造函数需要约 16 个值. 要解决此问题，只需使用预期大小初始化 HashMap：

```
HashMap<Foo> fooMap = new HashMap<Foo>(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:31:48.300

在运行时，hashmap 的“类型”是什么并不重要，因为 JVM 甚至不知道它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:36:44.807

我会说这将是一种洗涤。使用多个地图，您有多个对象和多个哈希表（它们具有一些最小的“开销”），但超过一定的大小，初始成本会被“隐藏”，并且多个表的哈希速度会稍微快一些。

但是，转换的开销没有区别，因为当您使用泛型时，转换就在那里，只是隐藏了

# java - 如何使用计时器在摇摆中显示和隐藏图像？

> ID：15351159
> 
> 赞同：0
> 
> 时间：2013-03-12T00:29:24.293
> 
> 标签：java, swing, concurrency, timer, event-dispatch-thread

有什么办法可以根据输入显示和隐藏一些图像。

我正在使用“T”和“F”的字符数组，如果是“T”那么它将显示图像，如果不是那么它将禁用。

我所做的只是使用`JLabel`并设置`ImageIcon`它。它显示和隐藏图像，但使用计时器，它只是刷新整个事物。就像如果有一个“T”值的图像，并且如果定时器的下一个循环有 arr[2] 的“T”值，那么它应该只停留在那里而不是刷新整个事物，即它闪烁。

我的代码如下：

```
 Timer timer = new Timer();
    TimerTask task = new TimerTask() {
        @Override
        public void run() {
            // TODO Auto-generated method stub
            frame.getContentPane().removeAll();
            call();
        }
    };
    timer.schedule(task, 0, 2000);
}

static void call() {

    String S = "";

    for (int i = 0; i < bool.length; i++) {
        bool[i] = r.nextBoolean();
        if (bool[i]) {
            S = S + "T";
        } else {
            S = S + "F";
        }
    }
    System.out.print(S + "\n");

    char[] chars = S.toCharArray();
    for (int i = 0; i < chars.length; i++) {
        if ('T' == chars[i]) {
            label[i] = new JLabel(img);
            frame.getContentPane().add(label[i]);
        } else {
            label[i] = new JLabel(img1);
            frame.getContentPane().add(label[i]);
        }
        frame.setVisible(true);
    }
} 
```

我想要的只是在特定时间间隔内显示和隐藏图像的 UI，就像在 Android 中一样，我可以`setVisibility`使用`TextView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:43:16.900

`TimerTask`不适用于此任务，因为它不遵守 Swing 的单线程规则（有关更多详细信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)）。

相反，您应该使用`javax.swing.Timer`，这将确保“tick”事件在事件调度线程中执行。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Blinky01 {

    public static void main(String[] args) {
        new Blinky01();
    }

    public Blinky01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JLabel label;

        public TestPane() {
            setLayout(new GridBagLayout());
            label = new JLabel("0");
            add(label);
            Timer timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    boolean value = (((int) Math.round(Math.random() * 1))) == 0 ? false : true;
                    System.out.println(value);
                    label.setText(value ? "1" : "0");
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.setInitialDelay(0);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }
} 
```

# php - 使用别名加入 Zend Framework

> ID：15351160
> 
> 赞同：3
> 
> 时间：2013-03-12T00:29:30.090
> 
> 标签：php, zend-framework, join, zend-db, zend-db-table

如何进行查询：

```
$name = $this->_dbTable->info('name');
$result = $this->_dbTable->select()->from($name)->setIntegrityCheck(false);
$result->join(array('t' => "$name.tipo")), "t.id = $name.id"); 
```

其中 '$name.tipo' 是连接的表名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:59:30.840

您不能每行加入不同的表，具体取决于`tipo`. SQL 要求在准备查询时修复表，当发现从给定列提取的数据值时，表不能更改。

您的设计称为[*Polymorphic Associations*](https://stackoverflow.com/questions/tagged/polymorphic-associations)，它是一种非关系设计。在 SQL 中执行此操作非常尴尬。

请参阅我的演示文稿[Practical Object Oriented Models In SQL](http://www.slideshare.net/billkarwin/practical-object-oriented-models-in-sql)了解一些替代方案。

# java - 将 Double 转换为 Int 数组？

> ID：15351162
> 
> 赞同：0
> 
> 时间：2013-03-12T00:29:31.840
> 
> 标签：java, arrays, double

我正在开发一个程序，用户输入一个双精度数，然后我将双精度数拆分并将其放入一个数组中（然后我做一些其他的事情）。问题是，我不确定如何按数字拆分双精度，并将其放入一个 int 数组中。请帮忙？

这是我要找的东西：

```
 double x = 999999.99 //thats the max size of the double
    //I dont know how to code this part
    int[] splitD = {9,9,9,9,9,9}; //the number
    int[] splitDec = {9,9}; //the decimal 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:40:07.323

您可以转换数字，`String`然后根据`.`字符拆分字符串。

例如：

```
public static void main(String[] args) {
        double x = 999999.99; // thats the max size of the double
        // I dont know how to code this part
        int[] splitD = { 9, 9, 9, 9, 9, 9 }; // the number
        int[] splitDec = { 9, 9 }; // the decimal

        // convert number to String
        String input = x + "";
        // split the number
        String[] split = input.split("\\.");

        String firstPart = split[0];
        char[] charArray1 = firstPart.toCharArray();
        // recreate the array with size equals firstPart length
        splitD = new int[charArray1.length];
        for (int i = 0; i < charArray1.length; i++) {
            // convert char to int
            splitD[i] = Character.getNumericValue(charArray1[i]);
        }

        // the decimal part
        if (split.length > 1) {
            String secondPart = split[1];
            char[] charArray2 = secondPart.toCharArray();
            splitDec = new int[charArray2.length];
            for (int i = 0; i < charArray2.length; i++) {
                // convert char to int
                splitDec[i] = Character.getNumericValue(charArray2[i]);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:34:23.890

有几种方法可以做到这一点。一种是首先获取 的整数部分`double`并将其分配给`int`变量。然后您可以使用`/`and`%`运算符来获取 that 的数字`int`。（事实上​​，这将是一个漂亮的函数，因此您可以在下一部分中重用它。）如果您知道您只处理最多两位小数，您可以从双精度数中减去整数部分以获得小数部分部分。然后乘以 100 并得到与整数部分一样的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:39:57.060

您可以从双重创建一个字符串：

```
String stringRepresentation  = Double.toString(x); 
```

然后拆分字符串：

```
String[] parts = stringRepresentation.split("\\.");
String part1 = parts[0]; // 999999
String part2 = parts[1]; // 99 
```

然后使用以下方法将其中的每一个转换为您的数组：

```
int[] intArray = new int[part1.length()];

for (int i = 0; i < part1.length(); i++) {
    intArray[i] = Character.digit(part1.charAt(i), 10);
} 
```

# sbt - Escalante sbt 插件没有找到 org.jboss.shrinkwrap.descriptors#shrinkwrap-descriptors-spi;1.0.3.Final

> ID：15351171
> 
> 赞同：0
> 
> 时间：2013-03-12T00:30:47.353
> 
> 标签：sbt, escalante

我将此添加到 project/plugin.sbt 文件中：

```
resolvers ++= Seq(
  "JBoss repository" at "http://repository.jboss.org/nexus/content/groups/public/",
  "Project Odd repository" at "http://repository-projectodd.forge.cloudbees.com/upstream/"
)

addSbtPlugin("io.escalante.sbt" % "sbt-escalante" % "0.1.1") 
```

然后构建.sbt

```
import io.escalante.sbt.EscalantePlugin._
import io.escalante.sbt.EscalantePlugin.EscalanteKeys._
escalanteSettings 
```

当我加载 sbt 0.12.1 时，我得到：

```
[error] (*:update) sbt.ResolveException: unresolved dependency: org.jboss.shrinkwrap.descriptors#shrinkwrap-descriptors-spi;1.0.3.Final: not found 
```

我该如何解决这个问题？

（我没有足够的积分来创建 #escalante 标签 :( ，抱歉使用 sbt 标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T20:02:14.850

刚刚又遇到了这个问题。

当使用 maven repo 中已发布的 sbt-escalante 二进制文件时 ，添加`shrinkwrap-descriptors-spi`依赖项作为[sbt#647的解决方法似乎并不总是有效，但是将其添加为远程 git 插件项目依赖项似乎是可行的。](https://github.com/sbt/sbt/issues/647)

为此，您需要`addSbtPlugin("io.escalante.sbt" % "sbt-escalante" % "0.1.1")`从文件中删除该行`project/build.sbt`并在您的目录中添加一个 *.scala 插件项目定义文件，`project/project`其内容如下：

*示例“项目/项目/插件.scala”：*

```
import sbt._
import Keys._

object Plugins extends Build {
  lazy val pluginProject = Project("plugins", file(".")).settings(
    resolvers ++= Seq(
      "JBoss repository" at "http://repository.jboss.org/nexus/content/groups/public/",
      "Project Odd repository" at "http://repository-projectodd.forge.cloudbees.com/upstream/")        
  ).dependsOn(sbtEscalante)

  lazy val sbtEscalante = uri("git://github.com/escalante/sbt-escalante.git#0.1.1")
} 
```

可以在[此处找到示例 git 项目](https://github.com/arashi01/sbt-escalante-example)

# iphone - 无法以编程方式设置键盘类型 - ios

> ID：15351176
> 
> 赞同：2
> 
> 时间：2013-03-12T00:31:10.207
> 
> 标签：iphone, objective-c, interface, uikeyboard

我在我的应用程序中设置 UIKeyboardtype 时遇到问题。

这些是我的应用程序中没有反映的 2 行。

```
_firstTextFieldWebsite.keyboardType = UIKeyboardTypeURL;
_firstTextFieldWebsite.keyboardType = UITextAutocapitalizationTypeNone; 
```

代码可在此上下文中找到。您看到的所有其他自定义项都有效。

```
_firstTextFieldWebsite = [[UITextField alloc] init];
_firstTextFieldWebsite.frame = CGRectMake(20, 73, 280, 30);
_firstTextFieldWebsite.placeholder = @"Enter the url here";
_firstTextFieldWebsite.borderStyle = UITextBorderStyleBezel;
_firstTextFieldWebsite.backgroundColor = [UIColor whiteColor];
_firstTextFieldWebsite.delegate = self;
_firstTextFieldWebsite.alpha = 1.0;

//[_firstTextFieldWebsite setKeyboardType:UIKeyboardTypeURL];

_firstTextFieldWebsite.keyboardType = UIKeyboardTypeURL;
_firstTextFieldWebsite.keyboardType = UITextAutocapitalizationTypeNone;

[self.view addSubview:_firstTextFieldWebsite]; 
```

我错过了什么或做错了什么？我在这里没有使用故事板，我的应用程序基于 IOS 6 最低要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:36:12.840

您设置的键盘类型不正确。采用：

```
_firstTextFieldWebsite.keyboardType = UIKeyboardTypeURL;
_firstTextFieldWebsite.autocapitalizationType = UITextAutocapitalizationTypeNone; 
```

# php - 来自数组问题的 json 编码

> ID：15351177
> 
> 赞同：0
> 
> 时间：2013-03-12T00:31:24.667
> 
> 标签：php, javascript, mysql, json

嗨，我正在尝试 json_code 一个关联数组，其中最终结果应该看起来像下面的这个 json 数组

```
 var json =[{  "adjacencies": [
      {
        "nodeTo": "graphnode9",
        "nodeFrom": "graphnode5",
        "data": {}
      }
    ],
    "data": {
      "$color": "#C74243",
      "$type": "triangle"
    },
    "id": "graphnode5",
    "name": "graphnode5"
  }]; 
```

这是我尝试将关联数组放入 json_encode 但它似乎不起作用，您可能会看到任何错误吗？太感谢了

```
 function getjson(){  
   $db = adodbConnect();
   $query = "SELECT nodes.*, relationships.* FROM nodes inner JOIN relationships ON nodes.id = relationships.id";
  $result = $db -> Execute($query);

  while($row=$result->FetchRow())
   {
  $id= (float)$row['id'];
  $name = $row['name'];
  $color1 = $row['color'];
  $type1 = $row['type'];
  $to= (float)$row['to'];

  $array = array(
  "adjacencies:" => array(
  "nodeTo" => "$to",
  "nodeFrom" => "$id",
  "data" => array() ),
  "data" => array(
   "$"."color" => $color1,
   "$"."type" => $type1 ),
  "id".":" => $id,
  "name".":" => $name);

}
print"$array";
json_encode($array);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:51:50.100

您希望您的数组创建看起来像：

```
$array = array(
  "adjacencies" => array(
      "nodeTo" => "$to",
      "nodeFrom" => "$id",
      "data" => array()
  ),
  "data" => array(
       '$color' => $color1,
       '$type' => $type1
  ),
  'id' => $id,
  'name' => $name
); 
```

这将给出一个结果`json_encode`，从那里开始，取决于您如何循环以将所有数据返回到您的应用程序。不过，您确实需要分配`json_encode`给类似的东西`$my_json = json_encode($array);`

# ios - 核心数据计数（或不同）

> ID：15351179
> 
> 赞同：1
> 
> 时间：2013-03-12T00:31:26.540
> 
> 标签：ios, objective-c, core-data

我有一个大约 100 行的表。其中一列有一个名为“MeetingType”的列，它始终是一个 int 值（1、2 或 3）

我如何创建一个 fetch 谓词来返回计数 a 有多少行具有不同的类型？

例如，如果在 100 行中，50 行的类型 = 0，25 行的类型 = 1，其余 25 行的类型 = 2。结果集的计数为 3。（表明所有行中有 3 种不同的类型）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T06:38:40.687

这是简单而纯粹的`NSFetchRequest`版本：

```
 NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"Meeting"];
    [request setResultType:NSDictionaryResultType];
    [request setPropertiesToGroupBy:@[@"MeetingType"]];
    [request setPropertiesToFetch:@[@"MeetingType"]];
    NSError* error = nil;
    NSUInteger count = [[context executeFetchRequest:request error:&error] count]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:49:03.317

除了在集合中计数之外，您还可以进行三个计数获取。

```
NSError *error;
int count;
NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:NSStringFromClass([yourObject class])];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"MeetingType == 1"];
count = [managedObjectContext countForFetchRequest:fetchRequest error:&error];

if (count > 0) {
    //Add 1 to your set or handle appropriately
}

fetchRequest.predicate = [NSPredicate predicateWithFormat:@"MeetingType == 2"];
count = [managedObjectContext countForFetchRequest:fetchRequest error:&error];
if (count > 0) {
    //Add 2 to your set or handle appropriately
}

fetchRequest.predicate = [NSPredicate predicateWithFormat:@"MeetingType == 3"];
count = [managedObjectContext countForFetchRequest:fetchRequest error:&error];
if (count > 0) {
    //Add 3 to your set or handle appropriately
} 
```

这应该比实际拉出对象并在该集合中搜索具有不同 MeetingType 属性的对象要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T00:35:41.747

将结果作为一个集合获取，然后计算集合中的项目数。

编辑＃2：还有以下链接可以帮助您获得更简洁的方法。[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE)

编辑：好的，这是一个尝试。

```
//you will be working on some sort of entity, i've guessed its called Meeting
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Meeting" inManagedObjectContext:managedObjectContext];
[request setEntity:entity];

//you can set a predicate here if you like, eg only meetings with a certain name or something
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@", type_name];
[request setPredicate:predicate];
// Specify that the request should return dictionaries.
[request setResultType:NSDictionaryResultType];

// Create an expression for the key path, in this case MeetingType
NSExpression *keyPathExpression = [NSExpression expressionForKeyPath:@"MeetingType"];

// Create an expression description using the maxExpression and returning a date.
NSExpressionDescription *expressionDescription = [[NSExpressionDescription alloc] init];

// The name is the key that will be used in the dictionary for the return value.
[expressionDescription setName:@"meetingTypes"];
[expressionDescription setExpression:keyPathExpression];
[expressionDescription setExpressionResultType:NSInteger32AttributeType];

// Set the request's properties to fetch just the property represented by the expressions.
[request setPropertiesToFetch:[NSArray arrayWithObject:expressionDescription]];

// Execute the fetch.
NSError *error = nil;
NSArray *objects = [sharedAISDataService.managedObjectContext executeFetchRequest:request error:&error];    

//check for no error
if(error == nil){
     //the following set will contain unique NSNumber objects
     NSSet *setOfMeetinTypes = [NSSet setWithArray:objects];

     int numberOfMeetinTypes = [setOfMeetinTypes count];
     //you now have the number of unique meeting types

} 
```

# javascript - 事件监听器应该放置在容器上还是单个按钮上？

> ID：15351189
> 
> 赞同：0
> 
> 时间：2013-03-12T00:31:55.677
> 
> 标签：javascript, javascript-events, onclick

我想知道在哪里附加 javascript 点击监听器的最佳实践是什么。即事件监听器应该放置在容器上还是单个按钮上？

例如 html 示例：

```
<div id="content">
    somecontent blah blaoh
    <button class="button1"></button>
    <button class="button2"></button>
    blah blah blah
    <table></table>
    more content...
</div> 
```

1）如果我将点击监听器放在#content 上，那么当我点击该div 中的任何内容时，该事件将触发。因此，在事件处理程序中，我可以查看单击目标的类并执行正确的行为。2）或者我应该直接在 .button1 和 .button2 上附加事件监听器？

有什么优缺点等等。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:34:53.513

如果您想在单击`.button1`和单击时执行不同的操作，`.button2`请为每个按钮分配单独的事件处理程序以避免检查目标。如果您在单击任一按钮时执行相同的操作，您可以将事件处理程序分配给，`div`但是此时您确实需要质疑为什么您有两个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:40:47.047

将其直接附加到按钮上。优点：

*   这要容易得多
*   每个人都使用它
*   你不需要输入额外的代码来检查被点击的按钮
*   没有理由不

没有人将事件处理程序应用于父级。我认为没有理由这样做，也从未见过任何这样做的代码，而且我从未想过要这样做。

然而，有一个小建议：在按钮而不是类上使用 id，因为向它们添加事件处理程序会更容易。

如果您有更具体的问题或有理由在父级上使用事件处理程序，请将其放在评论中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:16:05.487

我的简化答案我们看起来像这样

```
<div id="container1" onClick="doAction1()">
  <button id="A" class="buttonA" onClick="doActionA()"></button>
  <button id="B" class="buttonB" onClick="doActionB()"></button>
</div> 
```

很快，我将为我的按钮 A 和 B 使用容器，以防我需要为两个事件触发相同的公共事件，并直接设置它们的本地事件。至少对我来说，检查混入事件并不方便。

# objective-c - MonoTouch 绑定到 ObjectiveC 库不起作用

> ID：15351191
> 
> 赞同：4
> 
> 时间：2013-03-12T00:32:06.663
> 
> 标签：objective-c, xamarin.ios

.h：

```
#import <Foundation/Foundation.h>

typedef enum _XLBadgeManagedType {
    XLInboxManagedMethod = 0,
    XLDeveloperManagedMethod = 1
} XLBadgeManagedType ;

@interface XLXtifyOptions :NSObject
{
    NSString *xoAppKey;
    BOOL    xoLocationRequired ;
    BOOL    xoBackgroundLocationRequired ;
    BOOL    xoLogging ;
    BOOL    xoMultipleMarkets;
    XLBadgeManagedType xoManageBadge;
}
+ (XLXtifyOptions *)getXtifyOptions;
- (NSString *)getAppKey ;
- (BOOL) isLocationRequired;
- (BOOL) isBackgroundLocationRequired ;
- (BOOL) isLogging ;
- (BOOL) isMultipleMarkets;
- (XLBadgeManagedType)  getManageBadgeType;
- (void)xtLogMessage:(NSString *)header content:(NSString *)message, ...;
@end 
```

他们：

```
#import "XLXtifyOptions.h"
#import "XtifyGlobal.h"

static  XLXtifyOptions *xXtifyOptions=nil;

@implementation XLXtifyOptions

+ (XLXtifyOptions *)getXtifyOptions
{
    if (xXtifyOptions==nil) {
        xXtifyOptions=[[XLXtifyOptions alloc]init];
    }
    return xXtifyOptions;
}

-(id)init
{
    if (self = [super init]) {        
        xoAppKey=xAppKey;
        xoLocationRequired=xLocationRequired;
        xoBackgroundLocationRequired=xRunAlsoInBackground ;
        xoLogging =xLogging ;
        xoMultipleMarkets=xMultipleMarkets;
        xoManageBadge=xBadgeManagerMethod;

    }
    return self;
}

- (NSString *)getAppKey
{
    return xoAppKey;
}
- (BOOL) isLocationRequired
{
    return xoLocationRequired;
}
- (BOOL) isBackgroundLocationRequired 
{
    return xoBackgroundLocationRequired;
}
- (BOOL) isLogging 
{
    return xoLogging;
}
- (BOOL) isMultipleMarkets
{
    return xoMultipleMarkets;
}
- (XLBadgeManagedType)  getManageBadgeType
{
    return xoManageBadge;
}
- (void)xtLogMessage:(NSString *)header content:(NSString *)format, ... {
    va_list args;
    va_start(args, format);
    if (xoLogging) {
        NSString *prettyFmt=[NSString stringWithFormat:@"%@ %@", header,format];
        NSLogv(prettyFmt, args);
    }
    va_end(args);
}
@end 
```

全球.h：

```
#define xAppKey @"abc123"

#define xLocationRequired NO

#define xRunAlsoInBackground FALSE    

#define xBadgeManagerMethod XLInboxManagedMethod 

#define xLogging TRUE

#define xMultipleMarkets FALSE 
```

我的绑定定义：

```
[BaseType (typeof (NSObject))]
public interface XLXtifyOptions {

    [Static]
    [Export ("xtifyOptions")]
    XLXtifyOptions Options { get;}

    [Export ("getAppKey")]
    string GetAppKey ();

    [Export ("isLocationRequired")]
    bool IsLocationRequired ();

    [Export ("isBackgroundLocationRequired")]
    bool IsBackgroundLocationRequired ();

    [Export ("isLogging")]
    bool IsLogging ();

    [Export ("isMultipleMarkets")]
    bool IsMultipleMarkets ();

    [Export ("getManageBadgeType")]
    XLBadgeManagedType GetManageBadgeType ();

    //      [Export ("xtLogMessage:content:...")]
    //      void XtLogMessagecontent... (string header, string message,, );
    //      
} 
```

这些返回 null：

```
XLXtifyOptions.Options;
new XLXtifyOptions().GetAppKey(); 
```

供应商入门说明：

```
 XLXtifyOptions *anXtifyOptions=[Options getVendorOptions];
  [[TheirClass get ]initilizeXoptions:anVendorOptions]; 
```

我匆忙尝试重命名一些东西，因为我不确定供应商的代码有多少可以粘贴，所以希望我没有混淆。

这与：[Binding #define used as constant](https://stackoverflow.com/questions/15350740/binding-define-used-as-constant/15350825?noredirect=1#comment21685459_15350825)

**更多信息：**

如果我在设备而不是模拟器上运行它，我会收到以下错误：

```
Unhandled managed exception: Wrapper type 'XtifyPush.XLXtifyOptions' is missing its native ObjectiveC class 'XLXtifyOptions'. 
```

**编辑**

回复@Stephane：我更新了代码以不再掩盖供应商。我绑定的是： http: [//developer.xtify.com/display/sdk/Getting+Started+with+Apple+Push+Notification+Service，fwiw](http://developer.xtify.com/display/sdk/Getting+Started+with+Apple+Push+Notification+Service)。我按照您的建议更新了对 getXtifyOptions 的引用，但结果相同。我对您引用的 github 库的了解已尽，但我会继续挖掘。

我正在处理的绑定可在以下位置获得：[https ://github.com/lordscarlet/monotouch-bindings/tree/master/Xtify](https://github.com/lordscarlet/monotouch-bindings/tree/master/Xtify)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:17:02.377

正确的绑定`getVendorOptions`应该是这样的：

```
[Static]
[Export ("vendorOptions")]
Options Options { get;} 
```

该`get`部分和大写是按惯例完成的。查看为此生成的代码。GetAppKey 只要您将其绑定为方法而不是属性就可以了。请注意，它不应返回 null 而是抛出异常。

关于

```
MyNamespace.Current; 
```

我没有看到任何定义。所以我不知道怎么了。

在这一点上，我对如何构建本机库并将其包含在托管库中的方式有​​些担忧（re: 设备上的异常）。确保你做对了，看看[https://github.com/mono/monotouch-bindings中的大量示例](https://github.com/mono/monotouch-bindings)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T13:52:23.037

tl; dr Options 类未编译

我查看了您的项目以及您尝试绑定的功能。看起来有 2 个部分，嵌入式框架，它是分布式预编译的，还有一些其他的东西（主要是 Options 类），包括设置`.h`你**应该**在你的应用程序中编译的 .`AppKey`

 **除非您创建一个最小的`xcode`项目（并为 公开一个设置器`AppKey`），否则您的绑定无法正常工作。

另一种选择是放弃该部分并在 C# 中完全实现 XLXtifyOptions，然后您负责自己设置 AppKey。

**更新**：编译后的嵌入式框架的一些 api 调用将选项作为参数，因此如果您仅在 C# 中定义选项，请确保为`[Export]`Options.h 文件中定义的每个函数或属性添加一个属性

希望它有帮助，你明白我的意思。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T15:54:22.620

当您需要构建自己的托管选项类时，您可以如何做到这一点（在您的 Extra.cs 文件中）

```
public class XLXtifyOptions : NSObject {
    static XLXtifyOptions options;
    [Export ("getXtifyOptions")] //not sure that one will be ever called by obj-C code
    public static XLXtifyOptions XtifyOptions () {
        return options ?? (options = new XLXtifyOptions () {
            appKey = "yourappkey",
        });
    }

    string appKey;

    [Export ("getAppKey")]
    public string GetAppKey () {
        return appKey;
    }

    //same for all the getters

    [Export ("getManageBadgeType")
    public XLBadgeManageType GetManageBadgeType () {
        return manageBadge;
    }

    //Have to check if this is the right way to bind method with variable lengths argument, but that's the idea
    [Export ("xtLogMessage:content:")]
    public void LogMessage (string header, params string[] message)
    {
        //print the message
    }
}

public enum XLBadgeManageType {
    Inbox,
    Developer
} 
```

这应该给你一个想法......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T09:03:10.713

首先，这个 API 的设计很糟糕，它依赖于#define 预处理器指令来进行初始配置，如 ApiKey、标题上的大量空格……仅提及一些问题。

你可以在这里找到一个绑定项目，请测试它并告诉我它是否能解决你的问题。

[https://dl.dropbox.com/u/2058130/random%20stuff/XtifyLib.zip](https://dl.dropbox.com/u/2058130/random%20stuff/XtifyLib.zip)

* * *

APIKey 尚未在您的绑定上设置。

在 SDK 头文件中，您会发现`XLXtifyOptions.h`这`XLXtifyOptions.m`意味着`XLXtifyOptions`类不在 Static 中`XtifyPush`，因此我对这两个文件进行了一些修改，并创建了另一个名为`libXtifyLibHelper.a`.

该库包含两个帮助 objc 消息`getXtifyOptionsWithAppKey:locationRequired:backgroundLocationRequired:logging:multipleMarkets:manageBadge:`，`getXtifyOptionsWithAppKey:`它们将帮助您正确设置 API 密钥。

请使用上述帮助程序之一来设置您的 API 密钥，这些已绑定为 XLXtifyOptions 类中的静态方法。

作为旁注，您不必担心，`libXtifyLibHelper.a`当您构建提供的项目时，它会自动 (TM) 包含在您的 DLL 中。

希望这可以帮助

亚历克斯**

# authentication - Symfony2 以另一个用户身份登录，当已经登录时

> ID：15351193
> 
> 赞同：0
> 
> 时间：2013-03-12T00:32:15.673
> 
> 标签：authentication, symfony

当我根本没有登录时，我正在使用以下代码以用户身份登录；

```
$token = new UsernamePasswordToken($user, $user->getPassword(), 'main', $user->getRoles());
$this->get('security.context')->setToken($token);

$event = new InteractiveLoginEvent($this->getRequest(), $token);
$this->get("event_dispatcher")->dispatch("security.interactive_login", $event);

try
{
    $request = $this->container->get('request')->getSession()->set('_security_' . "main", serialize($token));
}
catch(InactiveScopeException $e)
{
    die($e->getMessage());
}       

return new RedirectResponse($this->container->get('router')->generate('fos_user_profile_show')); 
```

登录后，我再次使用相同的代码以另一个用户身份重新登录。当我已经登录时，只有相同的代码会失败。

因此，如果我是匿名的，它可以工作，但是一旦我通过身份验证，它就会失败。

我是否需要做一些额外的事情以便即使我已经登录并想以其他用户身份登录也能正常工作？

# java - 求 n 个数的 GCD

> ID：15351195
> 
> 赞同：0
> 
> 时间：2013-03-12T00:32:27.737
> 
> 标签：java

我正在尝试编写一个简单的程序，它要求 5 个数字并输出它们的 GCD。我已经发现如何用两个数字用一个简单的方法做到这一点：

```
private static int gcd(int number1, int number2) //Finds GCD of 2 numbers.
{
    if(number2 == 0)
    {
        return number1;
    }
    return gcd(number2, number1%number2);
} 
```

return 语句中的实际数学让我感到困惑，我不确定如何用 5 个甚至更多的数字写出来。我听说递归地执行此方法，例如使用 "gcd(a,b,c)=gcd(gcd(a,b),c)" 是最好的方法，但我想我在实际操作中遇到了麻烦有问题的数学逻辑。我只需要一个好的起点，真的，如何返回 3 个数字，然后是 4，然后是 5，等等。我想一旦我得到逻辑部分，我就会明白如何更容易地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:39:43.477

您应该将现有`gcd(int, int)`方法视为“黑匣子”；您的新`gcd(int, int, int, int, int)`方法可以在不知道它如何工作的情况下调用它。你会写：

```
private static int gcd(int a, int b, int c, int d, int e)
{
    return gcd(gcd(a, b), gcd(gcd(c, d), e));
} 
```

或者，对于更通用的解决方案，您可以使用 Java 5 的 var-args 支持编写一个`gcd(int, int...)`采用*任意*正数参数的方法：

```
private static int gcd(int number1, int... otherNumbers)
{
    int result = number1;
    for(int number: otherNumbers)
        result = gcd(result, number);
    return result;
} 
```

（请注意，在这两种情况下，此函数在编程意义上都不是“递归”的。前一种方法确实递归地嵌套了它的调用`gcd(int, int)`，但这并不是程序员所说的“递归”。`gcd(int, int)`但是，您的原始函数*是*递归的，因为它实际上调用了自己。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T00:45:00.687

这是关于最大公因数的物质观点。想一想尺寸为 m 和 n 的矩形地板。m 和 n 的 GCD 是可以完美贴合到该地板上的最大方形瓷砖的尺寸。

所以在你使用的算法中，你从两个数字开始，比如 8 和 10。然后你的程序用一个数字（比如 8）和两个数字的模数重复这个过程，即 2。这相当于斩波关闭 8x8 部分，因为我们知道进入剩余位的任何瓷砖也将适合该区域。我们剩下一个 2x8 的部分。重复这个过程，我们将得到 2 作为 GCD。我希望这能阐明您正在使用的算法的实际含义。

因此，将这个概念扩展到三个数的 GCD，我们可以说 m、n 和 p 的 GCD 是最大的立*方块*，可以放入尺寸为 mxnx p 的矩形棱柱中。为了找到这个 GCD，我们首先找到适合棱镜面之一的方形瓷砖。然后我们可以使用这个维度来切割一个横截面，可以说是棱镜，并取那个横截面的 GCD。当然，这可以扩展到我们无法精确可视化的更高维度！

# java - 是否可以从 Android 设备发送 HDMI CEC 命令。

> ID：15351197
> 
> 赞同：21
> 
> 时间：2013-03-12T00:32:28.557
> 
> 标签：java, android, hdmi

我有一个 MK809，想发送一个 HDMI CEC 命令来打开/关闭设备所连接的电视。有没有办法或库来发送 CEC 命令，因为我在任何地方都看不到任何记录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T16:34:54.223

“HDMI-CEC 是一种单线双向串行总线，它使用行业标准的 AV.link 协议来执行远程控制功能。CEC 接线是强制性的，尽管在产品中实施 CEC 是可选的。它在 HDMI 规范 1.0 中定义并在 HDMI 1.2、HDMI 1.2a 和 HDMI 1.3a（最后添加到总线的计时器和音频命令）中进行了更新。存在 USB 到 CEC 适配器，允许计算机控制启用 CEC 的设备。 [来源](http://elinux.org/CEC_%28Consumer_Electronics_Control%29_over_HDMI)

假设 MK809 遵循 HDMI 规范，从硬件的角度来看应该是可能的。但是，问题在于软件。在粗略的搜索过程中，我无法找到用于 CEC 命令的 Java 库，尽管我能够找到一些用于 C 甚至 Arduino 的库。

要问的问题：

1.  您的设备是否支持 CEC？操作系统当前是否通过其驱动程序支持它？
2.  你的硬件支持吗？（如果它遵循 HDMI 规范，则可以）
3.  您的电视是否支持 CEC？当它收到命令时它会真正关闭还是忽略它？

PS：恭喜，你的问题是我加入这个网站以来的第一个回答。:D

截至 2016 年的更新：Android Lolipop 确实支持操作系统中的新 HDMI 控件，如 Android 源[代码](https://android.googlesource.com/platform/frameworks/base/+/4e90fcd/core/java/android/hardware/hdmi)所示。API 文档可以在[这里](https://source.android.com/devices/tv/HDMI-CEC.html)找到。请记住，设备制造商仍然需要在设备驱动程序中实际支持 API。此外，大多数电视现在都支持 CEC 命令，但默认情况下通常不启用它们。

# javascript - 画布上的图像相互堆叠

> ID：15351198
> 
> 赞同：1
> 
> 时间：2013-03-12T00:32:29.740
> 
> 标签：javascript, html, canvas

我正在使用 for 循环将多个图像放在画布上。我的 for 循环生成位置

```
 var posx= i*(50);
         var posy = i*(50);

         img.src = "./path/img.png"; 
         img.onload = function() {
         var canvas = document.getElementById("canvas").getContext('2d');

             canvas.drawImage(this, posx, posy);
} 
```

即使我正在更改我的 posx 和 posy ，所有图像都被绘制在同一个位置。我将它们的 posx, posy 打印到控制台，并且它们在每次迭代中都不同。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:41:51.343

这是一个范围问题

您需要创建一个闭包以防止所有调用使用相同*的（最后一个*）`posx`和`posy`值。

就像是

```
img.onload = (function(x,y) { return function() {
        var canvas = document.getElementById("canvas").getContext('2d');
        canvas.drawImage(this, x, y);
    };
  })(posx, posy); 
```

`src`并且在定义图像对象后使用设置图像对象`onload`以避免缓存图像问题也是明智的。

# javascript - array[i].count 在 JavaScript 中返回什么？它在actionscript中的等价物是什么？或者如何在 Actionscript 中实现？

> ID：15351199
> 
> 赞同：-4
> 
> 时间：2013-03-12T00:32:32.333
> 
> 标签：javascript, arrays, actionscript-3, actionscript, multidimensional-array

做什么

```
array[i].count 
```

在javascript中返回？它在actionscript中的等价物是什么？或者它如何在actionscript中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:33:43.370

假设这`i`是一个数字，这将简单地从对象中获取第 i 个元素，然后尝试解析该`count`对象的属性。

```
var elem = array[i];
elem.count; 
```

这里的查找与在任何其他对象上的`count`查找没有什么不同`count`

# g++ - 使用g ++创建静态库时如何命名.a文件？

> ID：15351202
> 
> 赞同：1
> 
> 时间：2013-03-12T00:32:38.890
> 
> 标签：g++, static-libraries, static-linking

为什么必须将“lib”作为 .a 创建的前 3 个字母？如：[http ://segfault.in/2008/04/how-to-create-static-libraries-with-gcc/](http://segfault.in/2008/04/how-to-create-static-libraries-with-gcc/)

谢谢

# java - 如何使用包在linux中编译java文件

> ID：15351208
> 
> 赞同：0
> 
> 时间：2013-03-12T00:33:08.557
> 
> 标签：java, linux, command-line

我能够在 Eclipse 中编译我的 Main.java 文件而没有任何问题。

在 Main.java 我有

```
package com.selenium.zLoadProfilerPkg; 
```

在其他 3 个文件中，我也有

```
package com.selenium.zLoadProfilerPkg; 
```

但是，当我将整个结构上传到 linux 并尝试编译它时，出现错误：

```
[sgalkov@zpub zLoadProfilerPkg]$ pwd
/home/sgalkov/zpp_tech_git_checkout/profiler/zLoadProfiler/zLoadProfiler/src/com/selenium/zLoadProfilerPkg
[sgalkov@zpub zLoadProfilerPkg]$ cd /home/sgalkov/zpp_tech_git_checkout/profiler/zLoadProfiler/zLoadProfiler/src/com/selenium/zLoadProfilerPkg/; javac -cp ".:/home/sgalkov/zpp_tech_git_checkout/profiler/selenium-2.30.0/selenium-java-2.30.0.jar:/home/sgalkov/zpp_tech_git_checkout/profiler/selenium-2.30.0/libs/*:/home/sgalkov/zpp_tech_git_checkout/profiler/selenium-2.30.0/selenium-server-standalone-2.30.0.jar:/home/sgalkov/zpp_tech_git_checkout/profiler/browsermob-proxy-2.0-beta-7/browsermob-proxy-2.0-beta-7-sources.jar:/home/sgalkov/zpp_tech_git_checkout/profiler/browsermob-proxy-2.0-beta-7/lib/*:/home/sgalkov/zpp_tech_git_checkout/profiler/zLoadProfiler/zLoadProfiler/src/com/selenium/zLoadProfilerPkg" Main.java
Main.java:54: error: cannot find symbol
    BrowsermobProxy bmp = new BrowsermobProxy(PROXY_API_HOST, PROXY_API_PORT);
    ^
symbol:   class BrowsermobProxy
location: class Main

Main.java:54: error: cannot find symbol
    BrowsermobProxy bmp = new BrowsermobProxy(PROXY_API_HOST, PROXY_API_PORT);
                              ^
symbol:   class BrowsermobProxy
location: class Main

Main.java:310: error: cannot find symbol
        HarStorage hs = new HarStorage(HARSTORAGE_HOST, HARSTORAGE_PORT);
        ^
symbol:   class HarStorage
location: class Main

Main.java:310: error: cannot find symbol
        HarStorage hs = new HarStorage(HARSTORAGE_HOST, HARSTORAGE_PORT);
                            ^
symbol:   class HarStorage
location: class Main

4 errors
[sgalkov@zpub zLoadProfilerPkg]$ 
```

如果我注释掉“package com.selenium.zLoadProfilerPkg;” 在 4 个文件中的每一个中并一个一个地编译它们，一切正常。

另外，如果我尝试以这种方式编译它：

```
cd /home/sgalkov/zpp_tech_git_checkout/profiler/zLoadProfiler/zLoadProfiler/src/com/selenium/zLoadProfilerPkg/;

javac -cp ".\
:/home/sgalkov/zpp_tech_git_checkout/profiler/selenium-2.30.0/selenium-java-2.30.0.jar\
:/home/sgalkov/zpp_tech_git_checkout/profiler/selenium-2.30.0/libs/*\
:/home/sgalkov/zpp_tech_git_checkout/profiler/selenium-2.30.0/selenium-server-standalone-2.30.0.jar\
:/home/sgalkov/zpp_tech_git_checkout/profiler/browsermob-proxy-2.0-beta-7/browsermob-proxy-2.0-beta-7-sources.jar\
:/home/sgalkov/zpp_tech_git_checkout/profiler/browsermob-proxy-2.0-beta-7/lib/*\
:/home/sgalkov/zpp_tech_git_checkout/profiler/zLoadProfiler/zLoadProfiler/src/com/selenium/zLoadProfilerPkg" \
BrowsermobProxy.java HarStorage.java HttpRequest.java Main.java 
```

它确实可以编译，但我为 Main.java 获得了一个额外的类

```
 rw-r--r-- 1 sgalkov users  1422 Mar 11 20:30 Main$1.class
 rw-r--r-- 1 sgalkov users  8264 Mar 11 20:30 Main.class
 rw-r--r-- 1 sgalkov users 14864 Mar 11 19:32 Main.java 
```

我无法运行程序，我收到错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: Main (wrong name: com/selenium/zLoadProfilerPkg/Main)
    at java.lang.ClassLoader.defineClass1(Native Method) 
```

我环顾四周并尝试了各种选项，但无法编译该项目，并希望得到任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:41:46.757

```
dir=/home/sgalkov/zpp_tech_git_checkout/profiler

cd "$dir/zLoadProfiler/zLoadProfiler/src/"

javac -cp ".\
:$dir/selenium-2.30.0/selenium-java-2.30.0.jar\
:$dir/selenium-2.30.0/libs/*\
:$dir/selenium-2.30.0/selenium-server-standalone-2.30.0.jar\
:$dir/browsermob-proxy-2.0-beta-7/browsermob-proxy-2.0-beta-7-sources.jar\
:$dir/browsermob-proxy-2.0-beta-7/lib/*\
:$dir/zLoadProfiler/zLoadProfiler/src/" \
com/selenium/zLoadProfilerPkg/*.java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:48:41.623

如果您想在 IDE 之外编译您的应用程序，您应该使用[Apache Ant](http://ant.apache.org)。这是一个示例 build.xml 文件，您可以使用它来使用 Ant 编译您的应用程序。

```
<?xml version="1.0" encoding="UTF-8"?>
<project basedir="/home/sgalkov/zpp_tech_git_checkout/profiler/zLoadProfiler/zLoadProfiler"
    default="compile">

<property name="dir.prefix" value="/home/sgalkov/zpp_tech_git_checkout/profiler"/>

<path id="compile.classpath">
    <pathelement location="classes"/>
    <fileset dir="${dir.prefix}/selenium-2.30.0">
        <include name="selenium-java-2.30.0.jar"/>
        <include name="libs/*"/>
        <include name="selenium-server-standalone-2.30.0.jar"/>
    </fileset>
    <fileset dir="${dir.prefix}/browsermob-proxy-2.0-beta-7">
        <include name="browsermob-proxy-2.0-beta-7-sources.jar"/>
        <include name="lib/*"/>
    </fileset>
</path>
<property name="compile.classpath" refid="compile.classpath"/>

<target name="compile">
    <mkdir dir="classes"/>
    <javac failonerror="true" srcdir="src" debug="yes"
        includes="**/*.java" destdir="classes"
        classpath="${compile.classpath}">
    </javac>
</target>

<target name="clean">
    <delete dir="classes"/>
</target>

</project> 
```

您的所有类最终都将放在一个名为的文件夹中，该文件夹`classes`的结构反映了您的源包层次结构。要执行您的应用程序，您只需将`classes`文件夹放在类路径中并将主类称为`com.selenium.zLoadProfilerPkg.Main`. ant 中有一些不错的功能，例如将您的类打包到 jar 文件中等。检查一下。

至于`Main$1.class`，请确保您的包定义在每个 java 源文件的顶部正确定义。

另外，请务必检查`compile.classpath`我提供的 ant 构建脚本，以确保我没有拼错或代表您在问题中提供的类路径中的某些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:00:33.537

您必须在有一个子目录（顶级包）的源根目录中启动**javac 。**`com`这你也可以在 Windows 上测试。

您也可以部署已编译的 .class'es / jars / wars / ear。然后需要编译的目标（1.5、1.6、1.7）。

是的，**ant**或现在的**maven**可能会在 IDE 内部和独立环境中提供良好的构建基础架构。

# hashtable - 将整数存储在哈希表中而不是 int32

> ID：15351209
> 
> 赞同：0
> 
> 时间：2013-03-12T00:33:09.037
> 
> 标签：hashtable, unity3d, int32, unityscript

给定两个字符串，比如 hashKey 和 hashVal，我将这对添加到一个哈希对象中。在此示例中，hashVal 是一个表示整数的字符串，因此我在将其存储到表中之前对其进行解析。

现在问题来了。存储在哈希表中的值实际上是一个 int32 对象，这使得后面在内部表达式中使用起来很麻烦。经过长时间的寻找，我一​​直无法找到一种简单的方法来存储实际的 int 或提取存储为 int 而不是 int32 对象的值。

下面是我正在尝试做的一个例子：

```
var myHash : HashObject;
var intTemp : int;
var hashKey : String;
var hashVal : String;
hashKey = "foobar";
hashVal = "123";

if(System.Int32.TryParse(hashVal,intTemp)) 
{
    intTemp = int.Parse(hashVal);
    myHash.Add(hashKey,hashVal);
}

// later, attempt to retrieve and use the value:

var someMath : int;
someMath = 456 + myHash["foobar"]; 
```

这会产生编译时错误：
BCE0051：运算符“+”不能与“int”类型的左侧和“Object”类型的右侧一起使用。

如果我尝试转换对象，则会收到运行时错误：
InvalidCastException：无法从源类型转换为目标类型。

我知道我可以先将检索到的值存储在一个新的 int 中，然后再使用它，但这对于我将使用的数学数量和键值对的数量来说将是一个非常冗长且不优雅的解决方案，因此主要否定首先使用哈希表的好处。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:37:23.740

为什么不存储表中的`hashVal`和的元组而不仅仅是存储？然后您可以直接从查找中访问数字值`intTemp``hashVal`

```
if(System.Int32.TryParse(hashVal,intTemp)) {
    intTemp = int.Parse(hashVal);
    myHash.Add(hashKey, { hashValue : hashVal, intValue : intTemp });
}

var someMath : int;
someMath = 456 + myHash["foobar"].intValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:44:46.697

我不熟悉统一脚本中的“HashObject”。您可以改用 HashTable 吗？：

```
var myHash: Hashtable;

function Start() {
    myHash = new Hashtable();
    myHash.Add("one",1);
    myHash.Add("two",2);
}
function Update () {
    var val = myHash["one"] + myHash["two"] + 3;
    Debug.Log("val: " + val);
} 
```

同样在您的原始示例中，您将字符串值分配给哈希表，从未使用过 intTemp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T11:42:25.527

```
C# : The easiest hash solution in Unity is the HashSet:
https://msdn.microsoft.com/en-us/library/bb359438(v=vs.110).aspx

(You have to include the System.Collections.Generic library)

Very simple usage, O(1) speed

// create - dont even worry setting the size it is dynamic, it will also do the hash function for you :) 

private HashSet<string> words = new HashSet<string>();

// add- usually read from a file or in a for loop etc

words.Add(newWord);

// access via other other script such as

if (words.Contains(wordToCheck)) 
  return true; 
```

# sequelize.js - sequelize js：没有正确创建数据库

> ID：15351210
> 
> 赞同：1
> 
> 时间：2013-03-12T00:33:13.697
> 
> 标签：sequelize.js

所以我刚刚使用 sequelize.js 为节点创建了一个数据库，并拥有以下代码：

```
var sequelize = new Sequelize('database', 'sheta', 'mysqlroot', {
    host: 'localhost',
    port: 3000,
   timestamps: false
});

var User = sequelize.define('User', {
    userID: Sequelize.INTEGER,
    userName: Sequelize.TEXT,
    password: Sequelize.TEXT
}, {
    instanceMethods: {
        getUserId: function() {
            return this.userID;
        }
    }
});

var Post = sequelize.define('Post', {
    userID: Sequelize.INTEGER,
    postText: Sequelize.TEXT,
    date: Sequelize.DATE,
    postID: Sequelize.INTEGER
}, {
    instanceMethods: {
        getPost: function() {
            return this.postText;
        }  
    }
});

var Comment = sequelize.define('Comment', {
    postID: Sequelize.INTEGER,
    commentText: Sequelize.TEXT,
    date: Sequelize.DATE,
    commentID: Sequelize.INTEGER 
} , {
    instanceMethods: {
        getComment: function() {
            return this.commentText;
        }
    }
});

var Tag = sequelize.define('Tag', {
    tagID: Sequelize.INTEGER,
    tagText: Sequelize.TEXT,
    postID: Sequelize.INTEGER
});

//Associations
Post.belongsTo(User);
Post.hasOne(User);
User.hasMany(Post);
Post.hasMany(Comment);
Comment.belongsTo(User);
Comment.hasOne(User);
User.hasMany(Comment);
Post.hasMany(Tag);
Tag.hasMany(Post);

sequelize.sync(); 
```

但是当我尝试使用以下方法添加元组时：

```
User.create({ userID: 1, userName: 'sam', password: 'th'}).success(function(task) {
    console.log("inserted");
    // you can now access the newly created task via the variable task
}); 
```

“插入”从不打印。难道我做错了什么？主要看sequelize js上的代码。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:25:09.223

关于您的问题可能是什么的一些建议。

您说您使用 sequelize 创建了数据库 - 您必须已经创建了一个数据库，sequelize 只创建表 - 只是检查;-)

您能否将`.error`or`.done`函数附加到`sequelize.sync`and`User.create`调用并发布出现的错误

# java - 如何使用逆向工程更好地输出类图

> ID：15351211
> 
> 赞同：0
> 
> 时间：2013-03-12T00:33:14.763
> 
> 标签：java, reverse-engineering, uml, use-case

如果您构建了一个由许多事件处理方法和“Swing”组件组成的 Swing Java 应用程序，您如何消除这些以更好地输出“序列图”和/或“类图”。一般有技术吗？也许在 eclipse 或 netbeans IDE 中？

唯一的选择是手动删除 GUI 并保留正常的逻辑方法并希望最好。我希望能够生成 UML，但要隐藏摆动组件，否则类很长，因为包含声明的摆动组件。

# jquery - jQuery .load() 没有在顶部加载需要向上滚动

> ID：15351212
> 
> 赞同：0
> 
> 时间：2013-03-12T00:33:31.407
> 
> 标签：jquery

当您单击链接时，它会加载正确的文件，但如果您在#right 并向下滚动然后单击不同的链接，它将不会加载到顶部，您必须滚动到顶部。当您单击任何链接时，有关如何使其加载到#right 顶部的任何想法？

```
<script type="text/javascript" src="jquery-1.8.1.min.js"></script>
<style type="text/css">

    #left,#right{
        width:500px;
        height:100px;   
        overflow: scroll;
        overflow-x:hidden;
        float:left;
    }
</style>

<div id="left">
<ul>
    <li><a class="page" id="one" href="one.html">One</a></li>
    <li><a class="page" id="two" href="two.html">Two</a></li>
    <li><a class="page" id="three" href="three.html">Three</a></li>
    <li><a class="page" href="#">lskf</a></li>

</ul>
</div>
<div id="right"></div>

<script type="text/javascript">  
$(document).ready(function(){  
    $('.page').click(function(e){  
        e.preventDefault();  
        var pg = $(this).attr('id');  
        var toLoad = $(this).attr('href');  
        var goin = $('#right').load(toLoad);      
        switch (pg){  
            case 'one':   
            goin;  
            break;  
            case 'two':  
            goin;  
            break;  
            case 'three':  
            goin;  
            break;    
            default: $('#right').load('test.html');  
                            break;  

        }  

    });  
});   
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:48:37.893

所以你可以在页面加载后滚动到顶部，

```
 var goin = $('#right').load(toLoad, function() {
        $(this).scrollTop(0);
    }); 
```

# jquery - ASMX Web 服务未返回到 jQuery

> ID：15351213
> 
> 赞同：1
> 
> 时间：2013-03-12T00:33:32.127
> 
> 标签：jquery, asp.net, ajax, web-services, asmx

已解决：您无法从 AJAX 网络服务返回字典，请使用列表！

我正在尝试从 jQuery 调用 ASP.NET Web 服务。

Web 服务运行，但结果不返回到 javascript。知道为什么吗？我想我可能在 web.config 或.. 中遗漏了一些东西？

jQuery：

```
function GetAccountTypes() {
        var ddl = $("#ListBoxType");
        clearSelect(ddl.attr("id"));
        $.ajax({
            type: "POST",
            url: "WebService.asmx/GetAccountTypes",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                alert(response.d);
                var accTypes = response.d;
                var options = ddl.attr("options");
                $.each(accTypes, function (index, accType) {
                    options[options.length] = new Option(accType.Value, accType.Key); 
                });
            },
            failure: function (msg) {
                alert(msg);
            }
        });
    } 
```

网络服务：

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class WebService : System.Web.Services.WebService {

public WebService()
{
}

[WebMethod]
public Dictionary<int, string> GetAccountTypes() {
    Dictionary<int, string> types = new ATDB().GetAccountTypes();
    return types;
}

} 
```

网络配置：

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
</configuration> 
```

在 js 函数和 web 服务方法中设置断点表明该方法运行但它从未达到“成功”或“失败”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:43:02.437

好吧，我发现您不能从 Web 服务返回字典，因为它实现了 IDoctionary 并且不可序列化。解决方案：返回一个简单自定义对象的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:05:53.407

您的函数 GetAccountTypes() 等待 json 格式...您确定该服务以 json 格式返回字典吗？我想不是。

Web 服务是基于 SOAP 的 Web 服务，您可以考虑将您的 Web 服务迁移到 WCF，您可以在其中对所需的输出格式进行大量控制。

看看这个材料

[http://blog.clauskonrad.net/2010/11/how-to-expose-json-endpoint-from-wcf.html](http://blog.clauskonrad.net/2010/11/how-to-expose-json-endpoint-from-wcf.html)

# asp.net - 当我在 VB.net 中单击 webform 的任何空间时如何在 ASP.net 中隐藏按钮控件

> ID：15351217
> 
> 赞同：0
> 
> 时间：2013-03-12T00:33:52.207
> 
> 标签：asp.net, vb.net, hide, webforms

我的网络表单中有一个按钮，我想做的是在单击网络表单的任何空间时隐藏它。这可能吗？我正在使用 VB.net 作为代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:52:41.957

听起来你想使用javascript。如果您使用 jQuery，它们有一个简单的[隐藏](http://api.jquery.com/hide/)功能。

# vbscript - WMI 获取对象访问被拒绝

> ID：15351222
> 
> 赞同：0
> 
> 时间：2013-03-12T00:34:12.797
> 
> 标签：vbscript, permissions, wmi

1.  普通用户登录域
2.  组策略运行用户配置 -> 登录 -> VBS 脚本
3.  设置 ServerWMI = GetObject("winmgmts:\print\root\CIMV2")
4.  我作为普通用户被拒绝访问，适用于域管理员

5.  尝试更改 GPO 以使用管理参数运行 - /u:"domain\user" /p:"adminpassword"

6.  试过 impersonateLevel=impersonate
7.  试过 authenticationLevel=pktPrivacy
8.  尝试转到远程计算机（打印）并更改已验证用户的 WMI CIMV2 权限以拥有所有权限

需要非管理员用户以足够的权限运行此登录脚本，以远程查询我们打印服务器上的 WMI。我这样做是为了进行客户端/服务器比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:31:42.193

对于具有显式凭据的远程 WMI 访问，您必须使用以下内容：

```
server = "print"
user   = "domain\admin"
pass   = "password"

Set locator = CreateObject("WbemScripting.SWbemLocator")
Set svc = locator.ConnectServer(server, "root\cimv2", user, pass)
svc.Security_.ImpersonationLevel = 3 
```

我**强烈**建议**不要**在任何类型的用户/登录脚本中这样做。

更好的方法是为需要它的用户[启用远程 WMI 访问](https://support.infosim.net/demo/wmi/wmi.html)。

但是，请注意，出于安全原因，通常不允许远程 WMI 访问，那么您为什么认为您需要它呢？您希望通过为用户提供远程 WMI 访问来实现什么？

# matlab - 如何使用 strcmp() 将函数的返回值与循环中的函数调用进行比较？

> ID：15351227
> 
> 赞同：0
> 
> 时间：2013-03-12T00:34:51.877
> 
> 标签：matlab

我遇到的问题是我试图将 fireShot() 命令的结果与结果“Splash”进行比较。接下来我需要计算总的真实值（或每次 fireShot()= 'Splash'）。但是，每次我尝试使用 while 循环或 if 循环时，我都会得到一个常数（与相应的随机数或我在各自绘图上的前面的函数不匹配）。我确信它的格式不是很讨人喜欢并且可以使用工作，但我相信我真正的问题在于 strcmp() 的值的统计。

无论如何，这是我的代码：

```
function [ output_args ] = fireShots(shotstofire, fieldSize, pondRadius)
%// This function will fire multiple shots and count how many of them     
%// land in the pond.

    %// Counts down total number of shots and subtracts 1 until
    %// total is equal to '0'    
    while shotstofire > 0
        shotstofire;
        shotstofire = shotstofire - 1;

        %// Calls fireShot function
        Splash = fireShot(fieldSize,pondRadius);
        Land = strcmp(Splash,'Splash');
    end

    %// If the ball hits inside the pond
    %// Land (total tally) gets +1
    if (Land)
        Land = Land + 1;
    else

    end        
end 
```

我知道我的代码可能已关闭，但我的所有功能都可以按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:11:23.493

那么你的问题其实只是逻辑错误；strcmp 检查很好，您只需将您的`Land`计数逻辑移动到您的 while 循环中即可获得“Splash”的总镜头数。`Land`实际上，根据 last 的结果`strcmp`，当您在 while 循环之外执行检查和递增时，您最多会为您的变量获得 +1 。

```
function [ output_args ] = fireShots(shotstofire, fieldSize, pondRadius)
    %// This function will fire multiple shots and count how many of them     
    %// land in the pond.

    %// Counts down total number of shots and subtracts 1 until
    %// total is equal to '0'    
    while shotstofire > 0
        shotstofire;
        shotstofire = shotstofire - 1;

        %// Calls fireShot function
        Splash = fireShot(fieldSize,pondRadius);

        %// If the ball hits inside the pond
        %// Land (total tally) gets +1
        if (strcmp(Splash,'Splash'))
            Land = Land + 1;
        end
    end      
end 
```

# java - 将多个面板放入 JFrame 的问题

> ID：15351229
> 
> 赞同：0
> 
> 时间：2013-03-12T00:34:56.963
> 
> 标签：java, swing

这是关于同一问题的两个问题。我正在做一个完成后看起来像这样的数字时钟项目：

![数码时钟](../Images/d6dc8b01c57dd3d0d40eeb9d967a4f7d.png)

一帧中有9个面板。一个班的小组，`TitlePanel`班的6个，`DigitPanel`班的2个`ColonPanel`。我遇到的问题出在`DigitPanel`课堂上。我现在编写的代码只显示一个面板，但是当我运行程序时，数字面板想要占据整个 JFrame。有人可以告诉我问题是什么吗？

**主类：**

```
public class DigitalTimeUI extends JFrame {

    public DigitalTimeUI() {
        JFrame clock = new JFrame("Clock");
        clock.setSize(605, 250);

        clock.setDefaultCloseOperation(EXIT_ON_CLOSE);
        clock.setLocationRelativeTo(null);
        clock.setResizable(false);

        clock.add(new TitlePanel(), BorderLayout.NORTH);
        clock.add(new DigitPane(), BorderLayout.SOUTH);

        clock.pack();
        clock.setVisible(true);
    }

    public class DigitPane extends JPanel {

        DigitPanel[] hourDigit = new DigitPanel[]{new DigitPanel(), new DigitPanel()};
        DigitPanel[] minDigit = new DigitPanel[]{new DigitPanel(), new DigitPanel()};
        DigitPanel[] secDigit = new DigitPanel[]{new DigitPanel(), new DigitPanel()};
        private String hour = pad(Calendar.getInstance().get(Calendar.HOUR));
        private String min = pad(Calendar.getInstance().get(Calendar.MINUTE));
        private String sec = pad(Calendar.getInstance().get(Calendar.SECOND));
        private char[] hours = hour.toCharArray();
        private char[] minutes = min.toCharArray();
        private char[] seconds = sec.toCharArray();

        public DigitPane() {
            JLabel label = new JLabel();
            label.setFont(new Font("Tahoma", Font.BOLD, 72));
            label.setForeground(Color.WHITE);

            JPanel digitsPanel = new JPanel(new GridBagLayout());
            digitsPanel.setSize(new Dimension(605, 100));

            digitsPanel.add(new panelPadding());

            label.setText(String.valueOf(hours[0]));
            hourDigit[0].add(label);
            digitsPanel.add(hourDigit[0]);

            digitsPanel.add(new panelPadding());

            label.setText(String.valueOf(hours[1]));
            hourDigit[1].add(label);
            digitsPanel.add(hourDigit[1]);
            digitsPanel.add(new panelPadding());

            digitsPanel.add(new ColonPanel());
            digitsPanel.add(new panelPadding());

            label.setText(String.valueOf(minutes[0]));
            minDigit[0].add(label);
            digitsPanel.add(minDigit[0]);
            digitsPanel.add(new panelPadding());

            label.setText(String.valueOf(minutes[1]));
            minDigit[1].add(label);
            digitsPanel.add(minDigit[1]);
            digitsPanel.add(new panelPadding());

            digitsPanel.add(new ColonPanel());
            digitsPanel.add(new panelPadding());

            label.setText(String.valueOf(seconds[0]));
            secDigit[0].add(label);
            digitsPanel.add(secDigit[0]);
            digitsPanel.add(new panelPadding());

            label.setText(String.valueOf(seconds[1]));
            secDigit[0].add(label);
            digitsPanel.add(secDigit[1]);
            digitsPanel.add(new panelPadding());

            this.add(digitsPanel);
        }
    }

    protected String pad(int value) {
        StringBuilder sb = new StringBuilder(String.valueOf(value));
        while (sb.length() < 2) {
            sb.insert(0, "0");
        }
        return sb.toString();
    }

    public static void main(String[] args) {
        new DigitalTimeUI();
    }

    public class panelPadding extends JPanel {

        public panelPadding() {
            this.setPreferredSize(new Dimension(5, 80));
        }
    }
} 
```

**标题面板：**

```
public class TitlePanel extends JPanel {

    JLabel title;

    public TitlePanel() {
        this.setBackground(Color.WHITE);
        this.setPreferredSize(new Dimension(605, 100));
        this.setLayout(new GridBagLayout());
        title = new JLabel("DIGITAL CLOCK");
        title.setFont(new Font("Tahoma", Font.BOLD, 72));
        title.setForeground(Color.BLACK);
        this.add(title);
    }
} 
```

**数字面板：**

```
public class DigitPanel extends JPanel {

    public DigitPanel() {
        this.setLayout(new GridBagLayout());
        this.setPreferredSize(new Dimension(80, 80));
        this.setBackground(Color.BLACK);
    }
} 
```

当我调整它的大小时，标题面板（无论出于何种原因）不会占据整个框架，但数字面板会，我不知道为什么。我尝试了`.setLocation()`, `.setLayout()`,`.setSize()`和其他一些东西，但似乎没有任何效果。

或许可以在这里回答的第二个问题是，创建每个数字面板的最佳方式是什么？我之前正在玩一个while循环和一个switch语句，但没有得到任何结果，因为我一直遇到我解决的第一个问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:00:23.807

`BorderLayout`有 5 个不同的区域可以添加组件。默认情况下，如果您不指定位置，则会将组件添加到该`CENTER`位置。

在您的代码中，您正在执行此操作...

```
clock.setLayout(new BorderLayout());
clock.add(new TitlePanel())
clock.add(new DigitPanel()).setLocation(5, 125); 
```

这基本上是用 替换`TitlePane`，`DigitialPanel`意思是`TitlePane`不会显示。

此外，使用`setLocation`不仅没有意义（因为一旦面板被重新验证，该值将被丢弃）而且也不鼓励使用。

我会;

1.  将`TitlePanel`加到`NORTH`位置 ( `clock.add(new TitlePane(), BorderLayout.NORTH))`)
2.  创建 ANOTHER `JPanel`（类似`digitsPanel`）并设置为使用 a `GridLayout`，类似 ( `digitsPanel.setLayout(new GridLayout(1, 8))`)。
3.  将每个添加`DigitalPane`到`digitsPanel`（包括冒号）
4.  将-添加`digitsPanel`到`CENTER`位置`clock``clock.add(digitsPanel)`

唯一的问题是每个面板（在 上`digitsPanel`）将是相同的大小。

如果这不能满足您的需求，我鼓励您使用其中一个，`FlowLayout`或者`GridBagLayout`如果您需要更多地控制布局

**更新**

```
DigitPane[] hourDigit = new DigitPane[]{new DigitPane(), new DigitPane()};
DigitPane[] minDigit = new DigitPane[]{new DigitPane(), new DigitPane()};
DigitPane[] secDigit = new DigitPane[]{new DigitPane(), new DigitPane()};

JPanel digitsPanel = new JPanel(new GridBagLayout());
digitsPanel.add(hourDigit[0]);
digitsPanel.add(hourDigit[1]);
digitsPanel.add(new ColonPane());
digitsPanel.add(minDigit[0]);
digitsPanel.add(minDigit[1]);
digitsPanel.add(new ColonPane());
digitsPanel.add(secDigit[0]);
digitsPanel.add(secDigit[1]); 
```

# objective-c - 以编程方式在 ScrollView 中复制现有的 UIView？（故事板）

> ID：15351231
> 
> 赞同：2
> 
> 时间：2013-03-12T00:35:23.450
> 
> 标签：objective-c, xcode, uiview, uiscrollview, storyboard

我使用 Storyboard，我想以编程方式复制现有的 UIView（以及所有“孩子”，如 UILabels）并将其添加到 ScrollView。因此，首先我为该视图*（EventView）*创建了一个自定义 UIView-Class，在其中我通过使用标签标识它们来初始化 UILabel 的新文本。现在我想将这些 EventViews 添加到这样的 Scrollview 中：

```
CGRect rect = CGRectMake(0.0, 0.0, 320, 320*10);
UIView *theView = [[UIView alloc] initWithFrame:rect];

for (int i = 0; i<10; i++)
{
     CGRect rC = CGRectMake(0.0, 320*i, 320, 320);

    EventView *dV = [[EventView alloc] initWithFrame:rC];
   [dV inWithEvent:allEvents[i]];//Strings for the UILabels
    [theView addSubview:dV];

}

theScrollView.contentSize = rect.size;
[theScrollView addSubview:theView];
} 
```

有更好的（和有效的）解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T00:56:35.260

要复制视图或 ui 对象，我在这里学到了一种方法

```
 NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject: viewToBeDuplicated];

 UIView * newView = [NSKeyedUnarchiver unarchiveObjectWithData: archivedData]; 
```

现在您可以使用新视图做任何您想做的事情。

# python - hadoop /usr/bin/env: python: 没有这样的文件或目录

> ID：15351241
> 
> 赞同：0
> 
> 时间：2013-03-12T00:36:19.487
> 
> 标签：python, hadoop-streaming

我正在尝试使用 shell 脚本中的以下命令运行 hadoop 流服务器

```
hadoop jar /usr/local/hadoop/contrib/streaming/hadoop-0.19.2-streaming.jar -input $1 -output Twitter/Net.pegasus -mapper 'mapper.py Reverse' -reducer NONE -file mapper.py
hadoop jar /usr/local/hadoop/contrib/streaming/hadoop-0.19.2-streaming.jar -input $1 -output Twitter/Net.exclude -mapper 'mapper.py Reverse' -reducer reducer.py -file mapper.py -file reducer.py -file ../twitter/exclude.txt
hadoop jar /usr/local/hadoop/contrib/streaming/hadoop-0.19.2-streaming.jar -input $1 -output Twitter/Net.complete -mapper 'mapper.py Reverse' -reducer reducer.py -file mapper.py -file reducer.py 
```

我收到以下错误

```
/usr/bin/env: python2.5: No such file or directory
java.lang.RuntimeException: PipeMapRed.waitOutputThreads(): subprocess failed with code 127
    at org.apache.hadoop.streaming.PipeMapRed.waitOutputThreads(PipeMapRed.java:362)
    at org.apache.hadoop.streaming.PipeMapRed.mapRedFinished(PipeMapRed.java:576)
    at org.apache.hadoop.streaming.PipeMapper.close(PipeMapper.java:135)
    at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
    at org.apache.hadoop.streaming.PipeMapRunner.run(PipeMapRunner.java:36)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
    at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

但是已经安装了更高版本的python

```
$ which python
/usr/bin/python
$ python --version
Python 2.7.3 
```

我在其他帖子上读到，通过“apt-get install python2.5”它可以工作，但该软件包不可用，我还尝试将 #!/usr/bin/env python 添加到我的 python 脚本的顶部，但它没有工作任何一个

[python中的Hadoop Streaming Job失败错误](https://stackoverflow.com/questions/4460522/hadoop-streaming-job-failed-error-in-python)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T15:19:09.377

```
$ which python
/usr/bin/python
$ python --version
Python 2.7.3 
```

表明您安装的 Python 版本高于默认版本。您必须确保集群中的每个节点都是相同的情况。例如，我使用集群 Redhat 6.4 版本集群，默认的 Python 是 Python 2.6 我认为是默认的，但我对主节点进行了一点定制，它与数据节点不同。所以你需要配置你的映射器来调用每个节点上存在的python。

放

```
#!/usr/bin/python 
```

在 python 脚本的开头总是对我有用。

# javascript - 谷歌图表：整个列的一个工具提示

> ID：15351243
> 
> 赞同：13
> 
> 时间：2013-03-12T00:36:30.670
> 
> 标签：javascript, google-visualization

我有一个使用[Google Charts](https://developers.google.com/chart/)的基本面积图。我可以为图表上的每个点设置工具提示，但是有没有办法为列中的所有点设置一个工具提示。

这是所需行为的屏幕截图：

![根据 Highcharts 为整列提供一个工具提示](../Images/6683dcb3cab132fc41a99219f4ad91e3.png)

您可以看到，当光标位于图形上的某个点上时，会绘制一条垂直线，并显示一个工具提示来描述该列中的所有数据（两条线的数据）。如果需要，请在此处查看[实时示例。](http://www.highcharts.com/demo/line-ajax)

这可以用谷歌图表来实现吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-15T05:29:20.780

您需要做的就是将以下内容添加到您的选项中（如果是折线图）：`focusTarget: 'category'`

这是一个示例（只需打开[Google Playground](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)并将上述行添加到最后的选项中）：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Cats', 'Blanket 1', 'Blanket 2'],
    ['A',   1,       1,           0.5],
    ['B',   2,       0.5,         1],
    ['C',   4,       1,           0.5],
    ['D',   8,       0.5,         1],
    ['E',   7,       1,           0.5],
    ['F',   7,       0.5,         1],
    ['G',   8,       1,           0.5],
    ['H',   4,       0.5,         1],
    ['I',   2,       1,           0.5],
    ['J',   3.5,     0.5,         1],
    ['K',   3,       1,           0.5],
    ['L',   3.5,     0.5,         1],
    ['M',   1,       1,           0.5],
    ['N',   1,       0.5,         1]
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10},
  // This line will make you select an entire row of data at a time
                  focusTarget: 'category'
                 }
          );
} 
```

非常简单！有关更多详细信息，请参阅[Google 文档中的 focusTarget](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)

如果你想要更复杂的东西，你可以摆弄[域数据角色](https://developers.google.com/chart/interactive/docs/roles)

这是一个示例代码：

```
 google.load('visualization', '1.1', {'packages':['corechart']});

 google.setOnLoadCallback(drawChart_C6);

  function drawChart_C6() {
    var data = new google.visualization.DataTable();
    data.addColumn({type: 'string', role: 'domain'}, '2009 Quarter');
    data.addColumn('number', '2009 Sales');
    data.addColumn('number', '2009 Expenses');
    data.addColumn({type: 'string', role: 'domain'}, '2008 Quarter');
    data.addColumn('number', '2008 Sales');
    data.addColumn('number', '2008 Expenses');
    data.addRows([
      ['Q1 \'09', 1000, 400, 'Q1 \'08', 800, 300],
      ['Q2 \'09', 1170, 460, 'Q2 \'08', 750, 400],
      ['Q3 \'09', 660, 1120, 'Q3 \'08', 700, 540],
      ['Q4 \'09', 1030, 540, 'Q4 \'08', 820, 620]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('chart_C6'));
    chart.draw(data, {width: 400, height: 240, legend:'right', focusTarget: 'category'});
  } 
```

# java - 寻找使用 PrintWriter 的指导

> ID：15351245
> 
> 赞同：0
> 
> 时间：2013-03-12T00:36:34.060
> 
> 标签：java

我正在尝试从一个文件读取并将结果处理到另一个文件，但我在使用 PrintWriter 时遇到了困难。我知道当我打印到控制台时一切正常，但是当我使用 JOFileChooser 将 PrintWriter 设置为指定文件时，它不会写入或创建文件。我不确定我哪里出错了。对此的任何帮助将不胜感激。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.PrintWriter;
import java.util.Scanner;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class FileIntAdder extends JFrame implements ActionListener
{
     private JTextField txtFileIn;
     private JTextField txtFileOut;
     private JButton btnFileIn;
     private JButton btnFileOut;
     private JButton btnProcess;
     private JButton btnClear;
     public FileIntAdder()
    {
        this.setTitle("File I/O");   
        Container canvas = this.getContentPane();

        canvas.add(createCenterPanel(), BorderLayout.CENTER);
        canvas.add(createSouthPanel(), BorderLayout.SOUTH);

        this.setResizable(false);
        this.setSize(600, 150);
        this.setLocation(800, 500);
        this.setVisible(true);
        this.setDefaultCloseOperation(this.EXIT_ON_CLOSE);
    }

    private JPanel createSouthPanel()
        {
            JPanel pnlSouth = new JPanel();

            btnProcess = new JButton("Process");
            btnProcess.addActionListener(this);
            pnlSouth.add(btnProcess);

            btnClear = new JButton("Clear");
            btnClear.addActionListener(this);
            pnlSouth.add(btnClear);

            pnlSouth.setBackground(Color.DARK_GRAY);
            return pnlSouth;
        }

    private JPanel createCenterPanel()
        {

            JPanel pnlCenter = new JPanel();
            pnlCenter.setLayout(new GridLayout(2,2));

            btnFileIn = new JButton("File In");
            pnlCenter.add(PanelWrap(btnFileIn));
            btnFileIn.addActionListener(this);
            txtFileIn = new JTextField(25);
            pnlCenter.add(PanelWrap(txtFileIn));

            btnFileOut = new JButton("File Out");
            pnlCenter.add(PanelWrap(btnFileOut));
            btnFileOut.addActionListener(this);
            txtFileOut = new JTextField(25);
            pnlCenter.add(PanelWrap(txtFileOut));

            return pnlCenter;
        }

        public static void main(String[] args)
            {
                new FileIntAdder();
            }

        @Override
        public void actionPerformed(ActionEvent a)
            {
                JFileChooser fileInput = new JFileChooser();
                JFileChooser fileOutput = new JFileChooser();

                    if(a.getSource() == btnClear)

                        txtFileIn.setText("");
                        txtFileOut.setText("");

                    if(a.getSource() == btnFileIn)
                    {   

    if( fileInput.showOpenDialog(btnFileIn) != JFileChooser.CANCEL_OPTION)
                        {
            File inFile = fileInput.getSelectedFile(); 
                String fileInName =  inFile.getAbsolutePath();
                                                                              txtFileIn.setText(fileInName);
                        }
                    }
                    if(a.getSource() == btnFileOut)
                    {
    if(fileOutput.showSaveDialog(btnFileOut) != JFileChooser.CANCEL_OPTION)
                        {
                File outFile = fileOutput.getSelectedFile(); 
                String fileOutName =  outFile.getAbsolutePath();

                txtFileOut.setText(fileOutName);
                        }
                    }
                    if(a.getSource() == btnProcess)
                    {
                    PrintWriter fout = null;
                    try 
                    {
    Scanner lineScanner = new Scanner(new FileInputStream(txtFileIn.getText()));
            fout = new PrintWriter(txtFileOut.getText());
            while(lineScanner.hasNext())
                        {
            String line = lineScanner.nextLine();
                          Scanner rowScanner = new Scanner(line);
            int i=0;
            int parentAge = 0;
            int childsAge = 0;
            while(rowScanner.hasNext())
            {
                if(i==0)
                {
            fout.println("Whoes your daddy: " + rowScanner.next() + " ");
             parentAge = rowScanner.nextInt();
            }
            else
            {
                  fout.println(i +". " + rowScanner.next() + " ");
                  childsAge+= rowScanner.nextInt();
                }

                i++;
            }
            if(childsAge>parentAge)
            {
                fout.println("You are older than dirt");
            }
            else
            {
                fout.println("Just a kid still ...");
            }

             fout.println("\n");
        }
    } 
    catch (FileNotFoundException e) 
    {
       System.out.println(e.getMessage());
    }
    finally
    {
        if(fout != null)
    {
        fout.close();
     }

         }
}
  }
private JPanel PanelWrap(Component c)
{
    JPanel panel = new JPanel();
    panel.setBackground(Color.DARK_GRAY);
    panel.add(c);
    return panel;
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:50:59.730

问题在这里：

```
if (a.getSource() == btnClear)
   txtFileIn.setText("");
   txtFileOut.setText(""); <-- txtFileOut is always cleared 
```

您需要在此语句中添加大括号`if`，否则您将清除 `txtFileOut` `JTextField`. 当您写出文件时，您正在尝试写入一个名为的文件，`""`从而导致`FileNotFoundException`.

改成：

```
if (a.getSource() == btnClear) {
   txtFileIn.setText("");
   txtFileOut.setText(""); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:55:08.290

我之前遇到过 PrintWriter 的问题，因为正如[文档所说](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)

> “这个类中的方法从不抛出 I/O 异常，尽管它的一些构造函数可能会。客户端可以通过调用 checkError() 来查询是否发生了任何错误。”

我试图使用带有完整磁盘的 PrintWriter 却一无所获。

您可以使用 a`BufferedWriter`代替，这将引发 IOExceptions，或者您可以执行类似我在[此处](https://sourceforge.net/p/mysqltopostgres/code/ci/c295586d9632f1d8a5ca451eaee58c313f2d7f35/tree/mysql-to-postgresql/src/main/java/com/highfleet/sql/convert/BrittleWriter.java)所做的操作，并复制 BufferedWriter 以引发未经检查的异常。

# facebook - Facebook 页面实时更新回调内容

> ID：15351246
> 
> 赞同：0
> 
> 时间：2013-03-12T00:36:43.140
> 
> 标签：facebook, facebook-page, real-time-updates

我在使用 Facebook 实时更新时遇到问题。我在 Ruby 上使用 Koala gem 进行 FB 图形 API 访问。我订阅了页面的提要并正确获取回调，但我获取的数据不是文档中指定的格式。

[https://developers.facebook.com/docs/reference/api/page/#realtime](https://developers.facebook.com/docs/reference/api/page/#realtime)

我得到的是。

```
{"object"=>"page", "entry"=>[{"id"=>"539998079357096", "time"=>1363046743, "changed_fields"=>["feed"]}]} 
```

我期待类似的东西。

```
{
  "object": "page",
  "entry": [
    {
      "id": "408518775908252",
      "time": 1360637562,
      "changes": [
        {
          "field": "feed",
          "value": {
            "item": "post",
            "verb": "add",
            "post_id": 410746582352138
          }
        }
      ]
    }
  ]
} 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:23:33.280

除了空白之外，您收到的内容看起来像是已被 JSON 解析。

在你的代码中寻找类似的东西 `JSON.parse(request.body.read)` 并在解析之前检查 request.body 。

# php - 如何使用 preg_replace 剥离 url？

> ID：15351254
> 
> 赞同：0
> 
> 时间：2013-03-12T00:37:23.247
> 
> 标签：php, preg-replace

我有这样的代码：

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/90Omh7_I8vI" frameborder="0" allowfullscreen></iframe> 
```

我想从中获取网址，所以我最终得到“ [http://www.youtube.com/embed/90Omh7_I8vI](http://www.youtube.com/embed/90Omh7_I8vI) ”。

对不起，我对 php 的经验不够，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:59:00.343

“我怎样才能用 preg replace 去掉一个 url？”

**完全**使用OP 要求的**preg_replace**，而不是 preg_match 或 preg_match_all。

```
$string='<iframe width="560" height="315" src="http://www.youtube.com/embed/90Omh7_I8vI" frameborder="0" allowfullscreen></iframe>';
$src=preg_replace("/(.*src\=\")(.*?)(\".*)/", "$2", $string);
echo $src; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:42:43.217

使用这样的正则表达式：

```
if(preg_match_all('/src="([^"]*)"/', $str, $matches, PREG_SET_ORDER) >0){
    foreach($matches as $match){
        //$match[0] contains the whole 'src="url"' string       
        //$match[1] contains the url
    }           
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:44:19.563

此模式将仅选择您想要的 URL：`(?<=src=\")[^\"]*(?=\")`

例子：

```
preg_match("/(?<=src=\")[^\"]*(?=\")/", $subject, $matches);
print_r($matches[0]); // <--- this will contain URL. 
```

# terminal - 如何在 gui 界面而不是终端内部制作 gnuplot 绘图？

> ID：15351258
> 
> 赞同：2
> 
> 时间：2013-03-12T00:37:46.907
> 
> 标签：terminal, plot, cygwin, gnuplot, octave

如何更改 ocatave 中的绘图功能以在新的 gui 界面中获取绘图..

我曾经在白色 gui 窗口中获取图表，并且能够看到颜色等，但现在在另一台计算机中，我在终端窗口中获​​取图表，如图所示。![gnuplot](../Images/62b7cd00b9ede1a61a5cf4aff21f3165.png)

我从 cygwin 安装了 octave 和 gnuplot .. 我需要安装哪些额外的 cygwin 软件包，或者我需要在 gnuplot/octave 中更改哪些设置？

# c - libopcodes：获取指令的大小

> ID：15351259
> 
> 赞同：1
> 
> 时间：2013-03-12T00:37:50.173
> 
> 标签：c, assembly, x86, binutils

我必须找出我在内存中的一条指令的大小（实际上，我在内存中有一个小代码段并且想要获得第一条指令的大小）。我花了一些时间才找到 libopcodes 和 libbfd。我红了标题并试图提出一个简单的解决方案，但似乎我误解了一些东西，因为程序总是崩溃：

```
int main(int argc, char **argv) {
    disassemble_info *dis = malloc(sizeof(*dis));
    assert(dis != NULL);

    dis->arch = bfd_arch_i386;
    dis->read_memory_func = buffer_read_memory;
    dis->buffer_length = 64;
    dis->buffer = malloc(dis->buffer_length);
    memset(dis->buffer, 0x90, dis->buffer_length);
    disassemble_init_for_target(dis);

    int instr_size = print_insn_i386(0, dis);

    printf("instruction size is %d\n", instr_size);

    return 0;
} 
```

预期的结果是指令大小为 1 ( `nop`)。

**编辑**：

对不起各位，我是个笨人。

```
memset(dis, 0, sizeof(*dis)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:10:19.947

Linux 内核中有一些代码可以窃取。如果复制到用户模式程序中，它应该可以正常工作。

看看 arch/x86/lib 和 arch/x86/tools 那里有一个操作码映射文件，还有一个 awk 脚本读取它以在名为 innat.c 的文件中生成一个表。那里还有一些其他文件使用该表来实现解码器。

确定指令大小就足够了。

当然，这假设你对 GPL 没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:20:16.707

看起来 disassemble_info 数据结构需要比您提供的更多的初始化。从我一直在研究的例子来看，正确的初始化方法是调用 init_disassemble_info()。

看看是否有帮助。如果做不到这一点，请使用调试信息 ('-g') 编译您的程序并运行 gdb 以诊断崩溃发生的位置。

# java - 我需要实现 hashCode() 和 equals() 方法吗？

> ID：15351261
> 
> 赞同：3
> 
> 时间：2013-03-12T00:37:57.260
> 
> 标签：java, equals, hashcode

如果我有一个映射和一个对象作为映射键，那么默认的 hash 和 equals 方法是否足够？

```
class EventInfo{

    private String name;
    private Map<String, Integer> info
 } 
```

然后我想创建一个地图：

```
Map<EventInfo, String> map = new HashMap<EventInfo, String>(); 
```

我必须明确实现 hashCode() 和 equals() 吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T00:44:10.467

是的你是。`HashMap`s 通过计算密钥的哈希码并将其用作基点来工作。如果该`hashCode`函数未被（由您）覆盖，那么它将使用内存地址，并且`equals`与`==`.

如果您在 Eclipse 中，它会为您生成它们。单击**源**菜单 →**生成 hashCode() 和 equals()**。

如果您没有 Eclipse，这里有一些应该可以工作。（如上所述，我在 Eclipse 中生成了这些。）

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((info == null) ? 0 : info.hashCode());
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (!(obj instanceof EventInfo)) {
        return false;
    }
    EventInfo other = (EventInfo) obj;
    if (info == null) {
        if (other.info != null) {
            return false;
        }
    } else if (!info.equals(other.info)) {
        return false;
    }
    if (name == null) {
        if (other.name != null) {
            return false;
        }
    } else if (!name.equals(other.name)) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T00:39:45.140

是的，您需要它们，否则您将无法比较两个 EventInfo（并且您的地图将无法工作）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T00:45:59.160

严格来说，没有。hashCode() 和 equals() 的默认实现将产生*应该*工作的结果。请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode()](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode())

我的理解是 hashCode() 的默认实现通过获取对象在内存中的地址并转换为整数来工作，而 equals() 的默认实现仅在两个对象实际上是同一个对象时才返回 true。

在实践中，您可以（并且应该）改进这两种实现方式。例如，这两种方法都应该忽略不重要的对象成员。此外，equals() 可能希望递归地比较对象中的引用。

在您的特定情况下，如果两个对象引用相同的字符串或两个字符串相等*并且*两个映射相同或它们相等，您可以将 equals() 定义为 true。我认为 WChargin 给了你很好的实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T00:47:56.487

取决于你想要发生什么。如果两个不同`EventInfo`的实例具有相同的`name`and`info`应该导致两个不同的键，那么你不需要实现`equals`and `hashCode`。

所以

```
EventInfo info1 = new EventInfo();
info1.setName("myname");
info1.setInfo(null);
EventInfo info2 = new EventInfo();
info2.setName("myname");
info2.setInfo(null); 
```

`info1.equals(info2)`将返回 false`info1.hashCode()`并将返回不同的值`info2.hashCode()`。

因此，当您将它们添加到地图时：

```
map.put(info1, "test1");
map.put(info2, "test2"); 
```

你会有两个不同的条目。

现在，这可能是理想的行为。例如，如果您`EventInfo`正在收集不同的事件，则可能希望两个具有相同数据的不同事件成为两个不同的条目。

`equals`and`hashCode`合同也适用于`Set`a 。

因此，例如，如果您的事件信息包含鼠标点击，那么您可能希望最终得到：

```
Set<EventInfo> collectedEvents = new HashSet<EventInfo>();
collectedEvents.add(info1);
collectedEvents.add(info2); 
```

2 个收集的事件，而不仅仅是 1 个......

希望我在这里有意义...

编辑：

但是，如果上面的 set 和 map 应该只包含一个条目，那么您可以使用 apache commons [EqualsBuilder](http://commons.apache.org/proper/commons-lang//javadocs/api-3.1/org/apache/commons/lang3/builder/EqualsBuilder.html)和[HashCodeBuilder](http://commons.apache.org/proper/commons-lang//javadocs/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html)来简化`equals`and的实现`hashCode`：

```
@Override
public boolean equals(Object obj) {
    if (obj instanceof EventInfo) {
        EventInfo other = (EventInfo) obj;
        EqualsBuilder builder = new EqualsBuilder();
        builder.append(name, other.name);
        builder.append(info, other.info);
        return builder.isEquals();
    }
    return false;
}

@Override
public int hashCode() {
    HashCodeBuilder builder = new HashCodeBuilder();
    builder.append(name);
    builder.append(info);
    return builder.toHashCode();
} 
```

编辑2：

如果两个`EventInfo`实例被认为是相同的，如果它们具有相同的名称，例如如果`name`是一些唯一标识符（我知道它与您的特定对象有点牵强，但我在这里概括... )

# mysql - 使用 SQL 查询更新除一个之外的所有行

> ID：15351262
> 
> 赞同：-1
> 
> 时间：2013-03-12T00:38:15.790
> 
> 标签：mysql, sql, oracle-sqldeveloper

我有一张这样的桌子

```
+-------------------------------------+
| Description | ID  |  Show(1 or 0)   |
+-------------------------------------+ 
```

我有一堆具有相同描述的条目，但其中一个的 ID 为空。我必须将所有没有 null 的行的 show 设置为 0，但前提是它们具有相同描述的多于 2 行。我是 SQL 新手，我有大约 50K 行，所以我宁愿不手动执行。

美国 987655 1 - 更改为 0

美国 987658 1 - 更改为 0

美国 987617 1 - 更改为 0

美国 989876 空 - 不变

CAN 767655 1 - 未更改

CAN 957655 1 - 未更改

试过：

```
UPDATE  test1 t1,
    (
    SELECT  id, description, show AS mid
    FROM    test1 ti
    GROUP BY
            description
    ) tm
SET     show = 0
WHERE   t1.description= tm.description
    AND id is not null; 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:58:36.810

您将需要一个相关的子查询。我没有测试过这个，所以请谨慎使用。但这样的事情可能就是你所追求的。

```
UPDATE
  some_table st1
  JOIN (
    SELECT st2.description, count(*) c
    FROM some_table st2
    WHERE
      st1.description = st1.description AND
      st1.id IS NOT NULL AND
      st2.id IS NOT NULL
    GROUP by st2.description
    HAVING c > 1
  ) AS tmp ON tmp.description = st1.description
SET st1.show = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:03:40.093

这不是最终答案，但可以帮助你很多（我猜）

执行此查询以查看哪些应从 0 更新为 1

```
SELECT description, COUNT(*) as "Same Description" FROM table
WHERE id <> null
GROUP BY description
HAVING COUNT(*) > 2 
```

# visual-studio-2012 - 在 NuGet 中排除某个类型的所有文件

> ID：15351264
> 
> 赞同：8
> 
> 时间：2013-03-12T00:38:26.340
> 
> 标签：visual-studio-2012, nuget, nuget-package

**问题**：我的 Visual Studio 项目中有 .sql 文件，我想从 NuGet 包中排除这些文件。这些 .sql 文件嵌套在各种目录中，我无法从我的 nuget 包中成功排除所有 .sql 文件。

* * *

**1：**我通过在我的目标项目上运行以下命令创建了一个 .nuspec 文件：

```
nuget spec 
```

**2：**我编辑了生成的 nuspec 文件，使其看起来像这样：

```
<?xml version="1.0"?>
<package >
  <metadata>
    <id>$id$</id>
    <version>$version$</version>
    <title>$title$</title>
    <authors>$author$</authors>
    <owners>$author$</owners>
    <requireLicenseAcceptance>false</requireLicenseAcceptance>
    <description>Security Core Impl</description>
    <releaseNotes>Security Core Impl</releaseNotes>
    <copyright>Copyright 2013</copyright>
    <tags>Security Core</tags>
  </metadata>
  <files>
    <file src="**\*.dll" target="lib\net40\" exclude="**\*.sql;" />
  </files>
</package> 
```

**3：**我运行以下命令来构建我的 .nupkg：

```
nuget pack -Prop Configuration=Release 
```

* * *

但是，每当我将此包安装到另一个项目中时，都会包含 .sql 文件。我尝试了上述排除的几种不同变体，并尝试了 -Exclude 开关。似乎没有任何效果。

所有 .sql 文件都被标记：

*   构建操作：无
*   复制到输出目录：不要复制

我还尝试通过 Visual Studio 选项清除我的 NuGet 缓存。

**注意：** NuGet 包托管在专用服务器上。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-25T14:44:32.957

我刚刚遇到了完全相同的问题，但使用的是 .txt 文件。一位同事指出的解决方案是将**Build Action**从“Content”更改为“None”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T07:15:12.963

我假设你的 *.sql 文件在`content`包的文件夹下？

`<file src="**\*.dll" target="lib\net40\" exclude="**\*.sql;" />`告诉 NuGet 在 lib\net40 下添加所有 .DLL 文件。SQL 文件被忽略，因为您的 include 无论如何都没有包含它们。

您可以尝试添加`<file target="content\" exclude="**\*.sql;" />`到 nuspec 吗？

# python - Python While循环计算最小公倍数

> ID：15351266
> 
> 赞同：2
> 
> 时间：2013-03-12T00:38:40.683
> 
> 标签：python, loops, while-loop

这是为了计算 1-20 的最小公倍数。

我似乎无法弄清楚为什么 while 循环不会结束。谁能帮我吗？

```
i = 1
j = 1
factors = 0
allfactor = False
while allfactor == False:
    while j < 21:
        if i % j == 0:
            factors = factors + 1
            j = j + 1
        else:
            break
    if factors == 20:
        allfactor = True
        break
    else:
        i = i + 1
        j = 1
        factors = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:49:47.933

数字 1..20 的最小公倍数是**232792560**。

要得到这个数字，您只需要查看数字 1 到 20。您至少需要所有质数：2、3、5、7、11、13、17 和 19。

此外，您需要另外 2 来计算 4，并且需要另外两个 2 来计算 16。要获得 9，您还需要另外 3。

所以你最终得到：

```
2 * 2 * 2 * 2 * 3 * 3 * 5 * 7 * 11 * 13 * 17 * 19 = 232792560 
```

您可以使用 Python 轻松确认：

```
>>> all(map(lambda x: 232792560 % x == 0, range(1, 21)))
True 
```

即所有数字都是所述数字的除数；并且根据上面的证明（它的构造），没有更小的数字。

# android - ListFragment 应用程序崩溃

> ID：15351272
> 
> 赞同：0
> 
> 时间：2013-03-12T00:39:15.540
> 
> 标签：android, xml, parsing, fragment, android-listfragment

我有问题`ListFragment`。当我使用片段开始我的活动时，我的应用程序崩溃了。我使用选项卡主机，我想显示 XML 文件中的元素。

```
 import java.util.ArrayList;
import java.util.HashMap;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import com.poki.apeiron.XMLParser;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.AdapterView.OnItemClickListener;

public class Novosti extends ListFragment
{
     static final String URL = "http://apeiron.comyr.com/fit.xml";
        // XML node keys
        static final String KEY_NOVOST = "novost"; // parent node
        static final String KEY_NASLOV = "naslov";
        static final String KEY_DATUM = "datum";
        static final String KEY_TEXT = "text";
        static final String KEY_LINK = "link";
        static final String KEY_LINK1 = "link1";

    @Override
    public View onCreateView( LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState )
    {   View view = inflater.inflate(R.layout.activity_novosti,
            container, false);

    //String faks= (String) getActivity().getIntent().getSerializableExtra("Faks");

    //Toast.makeText(fa, faks, Toast.LENGTH_SHORT).show();
    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_NOVOST);
    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value

        map.put(KEY_NASLOV, parser.getValue(e, KEY_NASLOV));
        map.put(KEY_DATUM, "Datum: " + parser.getValue(e, KEY_DATUM));
        map.put(KEY_TEXT, "Novost: "+parser.getValue(e, KEY_TEXT));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView

    ListAdapter adapter = new SimpleAdapter(this.getActivity(), menuItems,R.layout.list_row,new String[] { KEY_NASLOV, KEY_DATUM, KEY_DATUM }, new int[] {
                    R.id.naslov, R.id.datum, R.id.novost });

    setListAdapter(adapter);
    //ListView listView = (ListView)view.findViewById(R.id.ListViewId);
    //listView.setAdapter((ListAdapter) new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items));

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String naslov = ((TextView) view.findViewById(R.id.naslov)).getText().toString();
            String datum = ((TextView) view.findViewById(R.id.datum)).getText().toString();
            String text = ((TextView) view.findViewById(R.id.novost)).getText().toString();
             //Context anAct = getActivity().getApplicationContext();
            //   Toast.makeText(anAct, "About!", Toast.LENGTH_SHORT).show(); 
            // Starting new intent
            Intent in = new Intent(getActivity(),Novost.class);
            in.putExtra(KEY_NASLOV, naslov);
            in.putExtra(KEY_DATUM, datum);
            in.putExtra(KEY_TEXT, text);
            in.putExtra("link", KEY_LINK);
            in.putExtra("link1", KEY_LINK1);
            startActivity(in);

        }
    });

        return view;
    }

} 
```

如何解决？

这是来自 logcat 的日志：

```
03-12 00:34:40.579: E/AndroidRuntime(1984): FATAL EXCEPTION: main
03-12 00:34:40.579: E/AndroidRuntime(1984): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.poki.apeiron/com.poki.apeiron.Prikaz}: java.lang.ClassCastException: com.poki.apeiron.Novosti cannot be cast to android.app.Fragment
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.os.Looper.loop(Looper.java:137)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at dalvik.system.NativeStart.main(Native Method)
03-12 00:34:40.579: E/AndroidRuntime(1984): Caused by: java.lang.ClassCastException: com.poki.apeiron.Novosti cannot be cast to android.app.Fragment
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.Fragment.instantiate(Fragment.java:585)
03-12 00:34:40.579: E/AndroidRuntime(1984):     at android.app.Fragment.instantiate(Fragment.java:560) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:19:15.147

您的 ListFragment 来自支持库

```
import android.support.v4.app.ListFragment; 
```

但是您使用的是 SDK 本身的 FragmentManager。

所以你可以按照 system32 的建议做，但你不会向后兼容。

或者，如果与 Android 版本 < 3.0 兼容对您很重要，您可以打电话`getSupportFragmentManager()`而不是打电话`getFragmentManager()``Activity`

# ios - NSUrlConnection 似乎没有工作，

> ID：15351275
> 
> 赞同：0
> 
> 时间：2013-03-12T00:39:33.760
> 
> 标签：ios

我正在尝试使用已转换的 googletts，但似乎遇到了麻烦。我认为我在结构方面正确地做了这门课。但我不认为 N​​SURLConnection 返回任何有用的数据。有人可以帮我检查它是否工作，如果不工作，为什么？

在 connectiondidfinishloading 部分，我正在检查返回 0 的下载长度 NSLog(@"hmmmm %lu", (unsigned long)[downloadedData length])。这就是我认为它不起作用的原因。

目标是让应用说出下载的内容

谢谢！！！

我的视图控制器中只有一个按钮可以启动所有内容

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
#import "RJGoogleTTS.h"

@interface ViewController : UIViewController <CLLocationManagerDelegate>

@property (weak, nonatomic) IBOutlet UILabel *userLabel;
@property (strong, nonatomic) CLLocationManager *locationManager;
@property (strong, nonatomic) CLGeocoder *geoCoder;

@property (strong, nonatomic) RJGoogleTTS *googleTTS;

- (IBAction)geoCodeLocation:(id)sender;

- (IBAction)rjGoogleButton:(id)sender;
@end 
```

这是实现文件

```
- (IBAction)rjGoogleButton:(id)sender {

    googleTTS = [[RJGoogleTTS alloc]init];

    [googleTTS convertTextToSpeech:@"How are you today user?"];

} 
```

RJGoogleTTS.h

```
#import <Foundation/Foundation.h>

@protocol RJGoogleTTSDelegate <NSObject>

@required
- (void)receivedAudio:(NSMutableData *)data;
- (void)sentAudioRequest;

@end

@interface RJGoogleTTS : NSObject {
    id <RJGoogleTTSDelegate> delegate;
    NSMutableData *downloadedData;
}

@property (nonatomic, retain) id <RJGoogleTTSDelegate> delegate;
@property (nonatomic, retain) NSMutableData *downloadedData;

- (void)convertTextToSpeech:(NSString *)searchString;

@end 
```

.m

```
#import "RJGoogleTTS.h"
#import <AVFoundation/AVFoundation.h>

@implementation RJGoogleTTS
@synthesize delegate, downloadedData;

- (id)init
{
    self = [super init];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void)convertTextToSpeech:(NSString *)searchString {
    NSString *search = [NSString stringWithFormat:@"http://translate.google.com/translate_tts?q=%@", searchString];
    search = [search stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
    NSLog(@"Search: %@", search);
    self.downloadedData = [[NSMutableData alloc] initWithLength:0];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:search]];
    [request setValue:@"Mozilla/5.0" forHTTPHeaderField:@"User-Agent"];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    [delegate sentAudioRequest];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"did you receive response user");
    [self.downloadedData setLength:0];

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"did you receive data user");
    [self.downloadedData appendData:data];

//    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc]initWithData:downloadedData error:nil];
//    [audioPlayer play];

}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"Failure");
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    NSLog(@"it worked user!!!");
    [delegate receivedAudio:self.downloadedData];
    NSLog(@"hmmmm %d", [self.downloadedData length]);

//    NSString *txt = [[NSString alloc] initWithData:downloadedData encoding: NSASCIIStringEncoding];
//    NSLog(@"%@hello",txt);

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:45:23.560

请记住，这是异步发生的。在`downloadedData`调用`NSURLConnection`.

移动：

`self.downloadedData = [[NSMutableData alloc] initWithLength:0];`

在您致电之前`NSURLConnection`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:25:51.767

您的 NSURLConnection 方法没有任何问题。您的搜索字符串错误。它应该是：

```
NSString *search = [NSString stringWithFormat:@"http://translate.google.com/translate_tts?tl=en&q=%@",searchString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:05:39.370

您没有启动 URLConnection。改成`[[NSURLConnection alloc] initWithRequest:request delegate:self];`这样`[[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];`

# javascript - 使用 javascript 函数在单独的 div 中发布 xslt 转换的内容

> ID：15351276
> 
> 赞同：0
> 
> 时间：2013-03-12T00:39:35.477
> 
> 标签：javascript, xslt

我正在尝试通过 xslt 转换读取 xml 文件并将内容放入不同的 div 中。我在某些解决方案中受到限制，因为我不能使用任何服务器端语言，此内容将在本地运行（直接从 cd 运行）并且必须在 IE 中工作（我知道为什么对吗？）每个客户端规范

本质上，我想将所有阶段放在“阶段” div 中，并使用 onClick 函数将课程加载到“课程” div

下面的一些代码是伪代码，无法运行，提前感谢您的帮助。

**XML 文件**

```
 <?xml version="1.0" encoding="utf-8"?>
        <menu frame="UH1Y" curriculum="Crew Chief Training ICW">
          <phase name='Unit 01'>
             <lesson link='lesson01/menu.htm'>lesson 01</lesson>
             <lesson link='lesson02/menu.htm'>lesson 02</lesson>
             <lesson link='lesson03/menu.htm'>lesson 03</lesson>
             <lesson link='lesson04/menu.htm'>lesson 04</lesson>
             <lesson link='lesson0/menu.htm'>lesson 05</lesson>
          </phase>
      <phase name='Unit 02'>
        <lesson link='lesson01/menu.htm'>lesson 01</lesson>
        <lesson link='lesson02/menu.htm'>lesson 02</lesson>
        <lesson link='lesson03/menu.htm'>lesson 03</lesson>
      </phase>
    </menu> 
```

**XSL 文件**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
  <xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>menu</title>
    <link href="css/styles.css" rel="stylesheet" type="text/css" />
    <script src="scripts/menu.js" type="text/javascript"></script>
    </head>
    <body>
    <div id="container2">
      <div id="phase">
        <ul>
          <xsl:for-each select="menu/phase">
            <li  onclick='loadLesson(<xsl:value-of select="menu/phase/@name[current()]"/>);'> 
            <xsl:value-of select="@name"/></li>
          </xsl:for-each>
        </ul>
      </div>
      <div id="lesson2">
        <ul>
          <xsl:for-each select="menu/phase[position() = {*the current phase*]/lesson">
            <li><xsl:value-of select="."/></li>
          </xsl:for-each>
        </ul>
      </div>
    </div>
    </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

**JS文件**

```
function loadLesson(x) {
    alert(x);
    //<xsl:value-of select="menu/phase/@name[current()]"/>
    theDiv=document.getElementById('lesson2')
    theDiv.innerHTML = x;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:42:22.447

与其在每次用户单击链接时进行另一个 XSLT 转换，不如先简单地渲染页面上所有可能的 div，然后将它们全部隐藏（使用 CSS 显示属性）。然后，当他们选择“阶段”时，只需让相关的 div 可见。

不过，您的 XSLT 的第一个问题是

```
 <li onclick='loadLesson(<xsl:value-of select="menu/phase/@name[current()]"/>);'> 
```

将 XSLT 元素嵌入到这样的属性中是无效的。在这种情况下，您确实需要使用“属性值模板”。另请注意，由于您已经定位在**阶段**元素上，因此您无需在此处编写完整路径，只需**@name 即可**。

```
 <li onclick="loadLesson('{@name}');'> 
```

注意这里的花括号，因为这表示属性值模板，并且花括号的内容是评估的，而不是字面输出。

实际上，因为每个阶段都有一个单独的 div，所以每个这样的 div 都需要一个唯一的 ID，其中没有空格，所以这样做可能会更好

```
<li onclick="loadLesson('phase_{generate-id()}');"> 
```

然后渲染每个阶段的课程，你可以这样做

```
 <xsl:for-each select="menu/phase">
  <div id="phase_{generate-id()}" style="display:none">
    <ul>
      <xsl:for-each select="lesson">
        <li><xsl:value-of select="."/></li>
      </xsl:for-each>
    </ul>
  </div>
  </xsl:for-each> 
```

再次注意使用属性值模板来设置 div 的 Id。

然后，最后，您将编写您的 javascript 函数**loadLesson**，如下所示：

```
var current_div = null;
function loadLesson(divId)
{
   if (current_div != null) current_div.style.display = 'none';

   current_div = document.getElementById(divId);
   current_div.style.display = 'block';
} 
```

在这种情况下，这是完整的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
  <xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>menu</title>
    <link href="css/styles.css" rel="stylesheet" type="text/css" />
    <script src="scripts/menu.js" type="text/javascript"></script>
    </head>
    <body>
    <div id="container2">
      <div id="phase">
        <ul>
          <xsl:for-each select="menu/phase">
            <li onclick="loadLesson('phase_{generate-id()}');"> 
               <xsl:value-of select="@name"/>
            </li>
          </xsl:for-each>
        </ul>
      </div>
      <xsl:for-each select="menu/phase">
      <div id="phase_{generate-id()}" style="display:none">
        <ul>
          <xsl:for-each select="lesson">
            <li><xsl:value-of select="."/></li>
          </xsl:for-each>
        </ul>
      </div>
      </xsl:for-each>
    </div>
    </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

# delphi - EVP_EncryptFinal_ex，delphi期间的openssl错误“断言失败”

> ID：15351281
> 
> 赞同：4
> 
> 时间：2013-03-12T00:39:52.310
> 
> 标签：delphi, openssl, assertions

在使用 openSSL 库时，我遇到了 EVP_EncryptFinal_ex 的问题。具体来说，它`./crypto/evp/evp_enc.c(348) OpenSSL internal error, assertion failed: b <= sizeof ctx -> buf`每次都失败并出现致命错误，而不取决于算法（aes 或 des）。

这是我的代码。它尽可能地简化。

```
procedure AESTest;
var
  key                       : TBytes;
  keyLen                    : Integer;
  dataIn                    : string;
  dataOut                   : TBytes;
  inLen, outLen, resLen     : integer;
  // Context of an algorithm pointer
  e_ctx                     : Pointer;
begin
  // 256 bit key
  keyLen := 32;
  setlength(key, KeyLen);
  RAND_bytes(@(key[0]), KeyLen);

  // Input data to encrypt
  dataIn := 'Simple data of 29 bits length';
  inLen := length(dataIn);    

  // Init ctx
  e_ctx := EVP_CIPHER_CTX_new();
  EVP_CIPHER_CTX_init(e_ctx);
  EVP_EncryptInit_ex(e_ctx, EVP_aes_256_cbc, nil, @key[0], nil);

  // Prepare ouput buf in order to openSSL docs
  outLen := inLen + EVP_CIPHER_CTX_block_size(e_ctx) - 1;
  setlength(dataOut, outLen);

  EVP_EncryptUpdate(e_ctx, @dataOut[0], outLen, @dataIn[1], inLen);

  EVP_EncryptFinal_ex(e_ctx, @dataOut[outLen], resLen);

  outLen := outLen + resLen;
  setlength(dataOut, outLen);
  // ... here goes decryption part but it does not matter now
end; 
```

准确地说，进口使用：

```
const
   LIB_DLL_NAME = 'libeay32.dll';
type
   PEVP_CIPHER_CTX : Pointer;
   PEVP_CIPHER : Pointer;

function EVP_CIPHER_CTX_new : PEVP_CIPHER_CTX; cdecl; external LIB_DLL_NAME;
procedure EVP_CIPHER_CTX_init(a: PEVP_CIPHER_CTX); cdecl; external LIB_DLL_NAME;
function EVP_aes_256_cbc : PEVP_CIPHER_CTX; cdecl; external LIB_DLL_NAME;
function RAND_bytes(Arr : PByte; ArrLen : integer) : integer; cdecl; external LIB_DLL_NAME;
function EVP_CIPHER_CTX_block_size(ctx: PEVP_CIPHER_CTX): integer; cdecl; external LIB_DLL_NAME;
function EVP_EncryptInit_ex(ctx: PEVP_CIPHER_CTX; cipher_type: PEVP_CIPHER; Engine : Pointer; key: PByte; iv: PByte): integer; cdecl; external LIB_DLL_NAME;
function EVP_EncryptUpdate(ctx: PEVP_CIPHER_CTX; data_out: PByte; var outl: integer; data_in: PByte; inl: integer): integer; cdecl; external LIB_DLL_NAME;
function EVP_EncryptFinal_ex(ctx: PEVP_CIPHER_CTX; data_out: PByte; var outl: integer): integer; external LIB_DLL_NAME; 
```

我实际上试图阅读源代码（evp_enc.c）并找到断言：

```
 OPENSSL_assert(b <= sizeof ctx->buf); 
```

这`b`是当前密码的块大小。这个断言是有道理的，但我仍然无法弄清楚它是如何在我的代码中失败的。

我已经尝试解决这个问题几天了，如果有任何建议，我将不胜感激。

***更新：***这里有两行来自 evp_enc.c：

```
 b=ctx->cipher->block_size;
    OPENSSL_assert(b <= sizeof ctx->buf); 
```

根据代码，b 是当前密码的块大小，对于 aes_256_cbc，它是 16 位长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:08:10.407

问题在于您对函数的声明`EVP_EncryptFinal_ex`。您应该添加`cdecl`指令（就像在所有其他功能中一样）。因此，新的声明将是：

```
function EVP_EncryptFinal_ex(ctx: PEVP_CIPHER_CTX; data_out: PByte; var outl: integer): integer; cdecl; external LIB_DLL_NAME; 
```

# ssis - 在 SSIS 包中发送 db 邮件任务失败，并出现与参数相关的错误

> ID：15351282
> 
> 赞同：0
> 
> 时间：2013-03-12T00:39:55.470
> 
> 标签：ssis, resultset, dbmail

我试图在 SSIS 包中执行这个 sql 任务，当找不到文件名时发送电子邮件。我已经在我的 ssis 包中声明了这个用户定义的变量“@PackageStartTime”。但是，当我的 SSIS 包执行此任务时，它会因以下错误而失败。

“执行查询 DECLARE @PackageStartTime Varchar(250) SET @Packag....”失败并出现错误。：“参数名称无法识别。” 可能的失败原因：查询有问题，“ResultSet”属性设置不正确，参数设置不正确，或连接未正确建立。”

```
DECLARE @PackageStartTime Varchar(250)
SET @PackageStartTime =?

IF(SELECT COUNT(*)
FROM [dbo].[Table1] WHERE RowCDate >=@PackageStartTime)>0

BEGIN

DECLARE @SUB Varchar(250)
SET @SUB = 'File Failed'+@@SERVERNAME

DECLARE @BODY Varchar(250)
SET @BODY = 'File Failed'+@@SERVERNAME

EXEC msdb.dbo.sp_send_dbmail @profile_name='default',
@recipients='dev@null.com',
@subject=@SUB,
@body=@BODY,
@query= 'SELECT DISTINCT FileLoadName
FROM [dbo].[Table1] WHERE RowCDate >=@PackageStartTime',
@attach_query_result_as_file=1 
```

我无法理解。我刚刚添加了一个变量 User::strPackageStartTime 作为 Datatype = String 并且 Value 为空。我在执行 SQL 任务编辑器的参数映射中没有该变量。我有什么遗漏吗？

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:32:41.970

我相当确定您不能将参数传递到像 SSIS 这样的脚本中，但您可以将其传递到存储过程中。因此，将所有这些包装在一个带有参数的存储过程中。以下代码创建您的存储过程。

然后你用

```
EXEC p_MyProc ? 
```

在你的包裹里

另请注意，我认为您设置了两次 @SUB - 我将其更改为 @BODY

**另请注意，将日期存储为 varchar(250) 通常是个坏主意 - 如果有机会，现在将其更改为日期或日期时间。**

```
CREATE PROC p_MyProc
@PackageStartTime Varchar(250)
AS

IF(SELECT COUNT(*)
FROM [dbo].[Table1] WHERE RowCDate >=@PackageStartTime)>0

BEGIN

DECLARE @SUB Varchar(250)
SET @SUB = 'File Failed'+@@SERVERNAME

DECLARE @BODY Varchar(250)
SET @BODY = 'File Failed'+@@SERVERNAME

EXEC sp_send_dbmail @profile_name='default',
@recipients='dev@null.com',
@subject=@SUB,
@body=@BODY,
@query= 'SELECT DISTINCT FileLoadName
FROM [dbo].[Table1] WHERE RowCDate >=@PackageStartTime',
@attach_query_result_as_file=1

GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:45:45.837

将其移至 SSIS（请注意，我无权访问 SSIS，所以我是盲目的）

1.  在其中创建一个执行 SQL 任务：

SELECT COUNT(*) As RCount, 'File Failed' + @@SERVERNAME As Msg FROM [dbo].[Table1] WHERE RowCDate >= ?

1.  传入您的参数，并将结果捕获到两个变量中，（返回单行）

2.  您的下一步是另一个执行 SQL 任务，使用您的变量调用 sp_send_dbmail。这是有条件地调用的，因此它仅在前一步返回非零值时运行

# javascript - 句子中单词的首字母大写，手动替换除外

> ID：15351286
> 
> 赞同：3
> 
> 时间：2013-03-12T00:40:12.933
> 
> 标签：javascript, jquery, html

我有一个用户将填写的输入字段，我想在他们输入时自动将每个单词的第一个字母大写。但是，如果他们手动删除大写字母并将其替换为小写字母，我希望保留它（基本上大写字母是我们建议的，但不是必需的）。我在实现某些东西时遇到了麻烦，这些东西会使他们单独手动键入的字母而不是更改它们。

这是我拥有的代码以及指向它的[Jsfiddle 链接](http://jsfiddle.net/nB4cj/1/)。

```
<input class="capitalize" /> 
```

和JS：

```
lastClick = 0;

$(document).ready(function() {
$(".capitalize").keyup(function() {
            var key = event.keyCode || event.charCode;
        if (!(lastClick == 8 || lastClick == 46)) {
                //checks if last click was delete or backspace
            str = $(this).val();  
                        //Replace first letter of each word with upper-case version.
            $(this).val(str.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();}));               
        }
        lastClick = key;
    });
}); 
```

我不允许保留用户的手动更正，但是您可以在 jsfiddle 中看到输入跳动并且无法正常工作。谁能帮助我或推荐一个最好的方法来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:04:17.760

```
$(document).ready(function() {
    var last;

    $(".capitalize").on('keyup', function(event) {
        var key = event.keyCode || event.which,
            pos = this.value.length,
            value = this.value;

        if (pos == 1 || last == 32 && (last !== 8 || last !== 46)) {
            this.value = value.substring(0, pos - 1) +
                         value.substring(pos - 1).toUpperCase();
        }

        last = key;
    });
}); 
```

[http://jsfiddle.net/userdude/tsUnH/1](http://jsfiddle.net/userdude/tsUnH/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:39:24.790

```
$(document).ready(function() {

    $(".capitalize")
    .keyup(function(event) {
        var key = event.keyCode || event.charCode;
        // store the key which was just pressed
        $(this).data('last-key', key);
    })
    .keypress(function(event) {
        var key = event.keyCode || event.charCode;
        var lastKey = $(this).data('last-key') ? $(this).data('last-key') : 0;  // we store the previous action
        var $this = $(this); // local reference to the text input
        var str = $this.val(); // local copy of what our value is
        var pos = str.length;
        if(null !== String.fromCharCode(event.which).match(/[a-z]/g)) {
            if ((pos == 0 || str.substr(pos - 1) == " ") && (!(lastKey == 8 || lastKey == 46))) {
                event.preventDefault();
                $this.val($this.val() + String.fromCharCode(event.which).toUpperCase());
            }
        }
        // store the key which was just pressed
        $(this).data('last-key', key);
    });

}); 
```

我已经更新了你的小提琴[http://jsfiddle.net/nB4cj/4/](http://jsfiddle.net/nB4cj/4/)这将显示这个工作。

# php - 引用传递失败？

> ID：15351287
> 
> 赞同：0
> 
> 时间：2013-03-12T00:40:22.817
> 
> 标签：php

当我使用 PHP 操作数组时，我遇到了问题！

这是如何运作的？

我想知道为什么！

我发现如果我不使用'unset'，这段代码可以工作！我谷歌，但没有得到答案！所以我问！

当我在 PHP 中使用引用传递时，它失败了！

谢谢！

```
<?php

$arr = array('a','b','c','d',array(1,2,3,4,5));

var_dump($arr);
foreach($arr as &$value){
    if($value == 'c'){
        unset($value);
    }
    if(is_array($value)){
        foreach ($value as $key => &$v) {
            if($v == 2){
                unset($v);
            }
        }
    }
}
var_dump($arr);

?> 
```

这是结果：

```
array (size=5)
  0 => string 'a' (length=1)
  1 => string 'b' (length=1)
  2 => string 'c' (length=1)
  3 => string 'd' (length=1)
  4 => 
    array (size=5)
      0 => int 1
      1 => int 2
      2 => int 3
      3 => int 4
      4 => int 5
array (size=5)
  0 => string 'a' (length=1)
  1 => string 'b' (length=1)
  2 => string 'c' (length=1)
  3 => string 'd' (length=1)
  4 => &
    array (size=5)
      0 => int 1
      1 => int 2
      2 => int 3
      3 => int 4
      4 => &int 5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T00:48:32.337

如果你想从你正在迭代的数组中删除一个项目 - 你需要`unset`数组的键，而不是它的值：

```
foreach($arr as $key => $value){
    if (...) {
        unset($arr[$key]);
    }
} 
```

您当前的解决方案无法按预期工作，因为`&$value`在任何特定迭代中都是对存储在`$arr`. 因此，您要取消设置局部变量，而不是原始变量。

# c++ - 枚举文件夹是否有比使用 C++ 的 FindFirstFile/FindNextFile 更快的替代方法？

> ID：15351288
> 
> 赞同：4
> 
> 时间：2013-03-12T00:40:22.780
> 
> 标签：c++, winapi, filesystems, directory

我需要获取文件夹中子文件夹的所有路径（使用 WinAPIs 和 C++。）到目前为止，我发现的唯一解决方案是递归调用[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx) / [FindNextFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx)但在具有更深层次结构的文件夹上执行此操作需要大量时间.

所以我想知道，只是为了获取文件夹名称，有没有更快的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:51:24.840

如果您真的只需要子文件夹，您应该能够使用`FindFirstFileEx`搜索 [选项](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364416%28v=vs.85%29.aspx)来过滤掉非目录。

文档建议这只是一个建议标志，但您的文件系统可能支持这种优化 - 试一试。

> **FindExSearchLimitToDirectories**
> 
> 这是一个咨询标志。如果文件系统支持目录过滤，则该函数会搜索与指定名称匹配且也是目录的文件。如果文件系统不支持目录过滤，这个标志会被忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T23:17:32.233

一种更快的方法是绕过`FindFirstFile...()`API 直接进入文件系统。您可以使用`DeviceIoControl()`控件[`FSCTL_ENUM_USN_DATA`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364563.aspx)访问主文件表，至少在 NTFS 格式的卷上。有了这些信息，您可以直接访问文件/文件夹的记录，其中包括它们的属性、父信息等。是的，它会做更多的工作，但它也应该更快，因为您可以优化代码以仅访问片段你需要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T00:46:07.067

这是你能遇到的最快的方法。您也可以考虑使用另一个线程来管理目录枚举，因为这需要很多时间。如果目录有很多子文件夹/文件，即使 Microsoft 文件资源管理器也会花费一些时间。

这里还有一件事是您可以枚举目录一次，然后注册任何更新。所以枚举文件夹的成本应该只在启动期间进行一次。

# quickbooks - QuicksBooks 进口项目和发票

> ID：15351296
> 
> 赞同：0
> 
> 时间：2013-03-12T00:40:58.013
> 
> 标签：quickbooks

我有 QuickBooks 2010 专业版，正如标题所示，我需要将产品和发票导入 Quickbooks。

**一些背景...**

我们是一家在线公司，我们在线销售产品，我的客户希望将所有产品导入到 quickbooks 中，并且每次在线销售也导入到 quickbooks 中，我们的网站是使用 ASP.NET 和 SQL Server 构建的。

我是快速书的新手，所以我不知道从这里做什么......

我听说过 IIF 导入和 SDK，遗憾的是我找不到关于它们的有价值的文档。谁能把我放在正确的方向（也许是一些示例代码）？请不要给我 quickbooks 网站的 SDK url。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T11:16:44.187

如果您不愿意查看 QuickBooks SDK，那么您就是在给自己带来*极大*的伤害。

实现您想要做的最简单的方法是通过 SDK 和 Web 连接器。我们的 wiki 上[有 QuickBooks Web 连接器](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_web_connector)的基本概述。它专门用于将数据从在线网站移动到适用于 Windows 的 QuickBooks（就像您尝试做的那样）。基本思想是它会轮询您的网站，要求您做一些事情，并且您可以向它提供 XML 请求来做一些事情（添加客户、添加发票等）。

基本协议如下所示：

> // Web 连接器要求您的 SOAP 服务进行身份验证 Web 连接器 => SOAP 服务器：使用用户名“xyz”和密码“bla”进行身份验证（身份验证）如果身份验证成功，则 SOAP 服务器返回一个票证值并继续该过程
> 
> // Web 连接器要求做一些事情 Web 连接器 => SOAP 服务器：嘿 SOAP 服务器，你有什么要我做的吗？(sendRequestXML) SOAP 服务器生成并返回一个 qbXML 请求
> 
> // Web 连接器将该请求中继到 QuickBooks，并从 QuickBooks Web 连接器接收响应 => QuickBooks：嘿 QuickBooks，SOAP 服务器给了我这个请求，你能处理它吗？QuickBooks 处理请求，并向 Web 连接器返回响应
> 
> // Web 连接器将来自 QuickBooks 的响应中继回 SOAP 服务器 Web 连接器 => SOAP 服务器：嘿 SOAP 服务器，这是来自 QuickBooks 的最后一个请求的响应 (receiveResponseXML) SOAP 服务器处理响应，处理任何错误并执行任何操作响应 SOAP 服务器返回完成百分比，如果小于 100%，则此过程继续...
> 
> // 该过程重新开始，Web 连接器向 SOAP 服务器请求下一个请求... Web 连接器 => SOAP 服务器：嘿 SOAP 服务器，您还有什么需要我做的吗？(sendRequestXML) SOAP 服务器生成并返回一个 qbXML 请求
> 
> ... 等等等等 ...

如果您下载[QuickBooks SDK](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK/010_qb)（哎呀，对不起！）*，您会发现它包含一些您要求的内容*。具体来说，它在此目录中放置了示例代码：

```
C:\Program Files (x86)\Intuit\IDN\QBSDK12.0\samples\qbdt\c-sharp\qbXML\WCWebService 
```

这是该示例代码中内容的清理、精简版本：

```
using System;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Web;
using System.Web.Services;
using System.IO;
using System.Security.Cryptography;
using Microsoft.Win32;
using System.Xml;
using System.Text.RegularExpressions;

namespace WCWebService
{
    /// <summary>
    /// Web Service Namespace="http://developer.intuit.com/"
    /// Web Service Name="WCWebService"
    /// Web Service Description="Sample WebService in ASP.NET to 
    /// demonstrate QuickBooks WebConnector"
    /// </summary>
    [WebService(
         Namespace="http://developer.intuit.com/",
         Name="WCWebService",
         Description="Sample WebService in ASP.NET to demonstrate " + 
                "QuickBooks WebConnector")]

    // Important Note:  
    // You should keep the namespace as http://developer.intuit.com/ for all web 
    // services that communicates with QuickBooks Web Connector. 

    public class WCWebService : System.Web.Services.WebService
    {
        ...

        #region WebMethods
        [WebMethod]
        /// <summary>
        /// WebMethod - authenticate()
        /// To verify username and password for the web connector that is trying to connect
        /// Signature: public string[] authenticate(string strUserName, string strPassword)
        /// 
        /// IN: 
        /// string strUserName 
        /// string strPassword
        ///
        /// OUT: 
        /// string[] authReturn
        /// Possible values: 
        /// string[0] = ticket
        /// string[1]
        /// - empty string = use current company file
        /// - "none" = no further request/no further action required
        /// - "nvu" = not valid user
        /// - any other string value = use this company file
        /// </summary>
        public string[] authenticate(string strUserName, string strPassword)
        {
            string[] authReturn = new string[2];

            // Code below uses a random GUID to use as session ticket
            // An example of a GUID is {85B41BEE-5CD9-427a-A61B-83964F1EB426}
            authReturn[0]= System.Guid.NewGuid().ToString();

            // For simplicity of sample, a hardcoded username/password is used.
            // In real world, you should handle authentication in using a standard way. 
            // For example, you could validate the username/password against an LDAP 
            // or a directory server
            string pwd="password";

            if (strUserName.Trim().Equals("username") && strPassword.Trim().Equals(pwd))
            {
                // An empty string for authReturn[1] means asking QBWebConnector 
                // to connect to the company file that is currently openned in QB
                authReturn[1]="";
            }
            else
            {
                authReturn[1]="nvu";
            }

            // You could also return "none" to indicate there is no work to do
            // or a company filename in the format C:\full\path\to\company.qbw
            // based on your program logic and requirements.
            return authReturn;
        }

        [ WebMethod(Description="This web method facilitates web service to send request XML to QuickBooks via QBWebConnector",EnableSession=true) ]
        /// <summary>
        /// WebMethod - sendRequestXML()
        /// Signature: public string sendRequestXML(string ticket, string strHCPResponse, string strCompanyFileName, 
        /// string Country, int qbXMLMajorVers, int qbXMLMinorVers)
        /// 
        /// IN: 
        /// int qbXMLMajorVers
        /// int qbXMLMinorVers
        /// string ticket
        /// string strHCPResponse 
        /// string strCompanyFileName 
        /// string Country
        /// int qbXMLMajorVers
        /// int qbXMLMinorVers
        ///
        /// OUT:
        /// string request
        /// Possible values: 
        /// - “any_string” = Request XML for QBWebConnector to process
        /// - "" = No more request XML 
        /// </summary>
        public string sendRequestXML(string ticket, string strHCPResponse, string strCompanyFileName, 
            string qbXMLCountry, int qbXMLMajorVers, int qbXMLMinorVers)
        {
            ... build some qbXML request here and return it ...

            return request;
        }

        [ WebMethod(Description="This web method facilitates web service to receive response XML from QuickBooks via QBWebConnector",EnableSession=true) ]
        /// <summary>
        /// WebMethod - receiveResponseXML()
        /// Signature: public int receiveResponseXML(string ticket, string response, string hresult, string message)
        /// 
        /// IN: 
        /// string ticket
        /// string response
        /// string hresult
        /// string message
        ///
        /// OUT: 
        /// int retVal
        /// Greater than zero  = There are more request to send
        /// 100 = Done. no more request to send
        /// Less than zero  = Custom Error codes
        /// </summary>
        public int receiveResponseXML(string ticket, string response, string hresult, string message)
        {
            ... process the response from QuickBooks here, and return an integer ... 

            return retVal;
        }
        #endregion

    } // class: WCWebService
} // namespace: WCWebService 
```

QuickBooks SDK 还包含*一个 98 页的 Web 连接器文档 PDF*，其中详细描述了实现，以及 600 页的可能有用的通用 QuickBooks SDK 文档。

# android - 捕获 android webview 图像并保存为 png/jpeg

> ID：15351298
> 
> 赞同：4
> 
> 时间：2013-03-12T00:41:06.083
> 
> 标签：android, html, cordova

我正在尝试在 android/phonegap 应用程序上实现 css3 页面翻转效果。为此，我需要将当前的 webview 动态保存为 png 或 jpeg，以便可以将其加载到页面翻转 html 中的 div 中。我注意到 android 文档中的 Picture 类，但我不确定它是否可以转换和保存。这可以通过JS完成吗？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:12:23.083

尝试使用以下代码捕获 webview 并将 jpg 保存到 sdcard。

```
webview.setWebViewClient(new WebViewClient() {

    @Override
    public void onPageFinished(WebView view, String url) {
        Picture picture = view.capturePicture();
        Bitmap b = Bitmap.createBitmap(
            picture.getWidth(), picture.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(b);
        picture.draw(c);

        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream( "/sdcard/"  + "page.jpg" );
            if ( fos != null ) {
                b.compress(Bitmap.CompressFormat.JPEG, 90, fos );
                fos.close();
            }
        } 
        catch( Exception e ) {
            System.out.println("-----error--"+e);
        }
    }
});

webview.loadUrl("http://stackoverflow.com/questions/15351298/capturing-android-webview-image-and-saving-to-png-jpeg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:49:48.873

将 a 捕获为图像的最简单方法（据我所知）`View`是创建一个新的[Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html)和一个新的[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)。然后，只需要求您`WebView`在自己的画布上绘制自己，而不是 Activity 的默认画布。

伪代码：

```
Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(bitmap);
myWebView.draw(canvas);
//save your bitmap, do whatever you need 
```

# ios - 在内部嵌套的 NSDictionary 中按值对 NSDictionary 进行排序

> ID：15351306
> 
> 赞同：0
> 
> 时间：2013-03-12T00:42:06.297
> 
> 标签：ios, objective-c, xcode, sorting, nsdictionary

我正在开发一个语言学习应用程序。所以我有一个`NSMutableDictionary`带有“单词”的键。这些键的对象`NSDictionaries`与键“频率”和“计数”嵌套。NSNumbers 是“频率”和“计数”的对象。

下面是初始化代码：

```
 NSString* path = [[NSBundle mainBundle] pathForResource:@"french_top_50000"
                                                     ofType:@"txt"];
 NSString *fh = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];
 self.userWordlist = [[NSMutableDictionary alloc] init];

 for (NSString *word in fh) {
    NSArray *keyArray = [[NSArray alloc] initWithObjects:@"frequency", @"count", nil];
    NSArray *objectArray = [[NSArray alloc] initWithObjects:frequency, count, nil];
    NSDictionary *detailsDict = [[NSDictionary alloc] initWithObjects:objectArray forKeys:keyArray];

    [self.userWordlist setObject:detailsDict forKey:word];
 } 
```

我在表格中显示了这个列表的一部分，我想按内部键之一“频率”进行排序。我不知道该怎么做。

* * *

如果第一个想法是“为什么将它存储在嵌套字典中？”，我希望单词成为键，因为在应用程序的其他部分我经常搜索以查看单词是否在 NSMutableDictionary 中。

我想过有一个带有以下键的平面字典：'word'，'frequency'，'count'......但我必须枚举以检查是否包含单词。

如果有任何关于更好的数据结构策略的建议，我很想听听。我将非常频繁地检查是否包含“单词”，而不太频繁地会根据“频率”或“计数”进行排序。

* * *

我见过很多与此类似的问题，但它们都是针对平面词典的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T00:58:56.420

如果我理解正确，请`keysSortedByValueUsingComparator:`像这样使用：

```
 NSArray *keysByFrequency = [self.userWordlist keysSortedByValueUsingComparator:^NSComparisonResult(NSDictionary* obj1, NSDictionary* obj2) {
         return [obj1[@"frequency"] compare:obj2[@"frequency"]];
    }]; 
```

然后您可以迭代按频率排序的键

```
 for (NSString *word in keysByFrequency){
         NSDictionary *detailsDict = self.userWordList[word];
         // Do whatever...
    } 
```

# java - 在 JPA 中获取数据库模式名称（来自 EntityManager/EntityManagerFactory）

> ID：15351308
> 
> 赞同：3
> 
> 时间：2013-03-12T00:42:21.140
> 
> 标签：java, jpa, eclipselink

在 JPA (EclipseLink 2.4) 中，我需要在 NativeQuery 中指定模式名称：

```
EntityManager em = emf.createEntityManager();
Query query = em.createNativeQuery("select foo from bar.table"); 
```

以上工作，但显然我不喜欢硬编码模式名称，特别是考虑到我已经在 orm.xml 中指定它的事实：

```
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm orm_2_0.xsd"
    version="2.0">
    <persistence-unit-metadata>
        <persistence-unit-defaults>
            <schema>bar</schema>
        </persistence-unit-defaults>
    </persistence-unit-metadata>   
</entity-mappings> 
```

当然必须有一种方法可以在运行时从某个地方获取模式名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-20T09:35:19.673

如果使用这样的持久性单元：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="">
<persistence-unit name="MY_PU" transaction-type="RESOURCE_LOCAL">
  ...................................
<properties>
  <property name="javax.persistence.jdbc.url" value="jdbc:postgresql://something:5432/MY_DB_NAME"/>
  <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver"/>
  <property name="javax.persistence.jdbc.user" value="user"/>
  <property name="javax.persistence.jdbc.password" value="pass"/>
  <property name="eclipselink.logging.level" value="WARNING"/>
</properties> 
```

然后，您可以使用 EntityManagerFactory 提取属性：

```
public String getDatabaseName() {
    String dbName = null;
    Map<String, Object> map = emf.getProperties();
    String url = (String) map.get("javax.persistence.jdbc.url");
    if(url != null) {
        dbName = url.substring(url.lastIndexOf("/") + 1);
    }
    return dbName;
} 
```

其中**emf**是已经创建的 EntityManagerFactory。

```
emf = Persistence.createEntityManagerFactory("MY_PU"); 
```

# perl - 在perl中将父级添加到xml doc

> ID：15351309
> 
> 赞同：1
> 
> 时间：2013-03-12T00:42:23.453
> 
> 标签：perl, parent, add, libxml2

我在将父级添加到 xml 文档时遇到问题。我得到了xml：

```
<book id="bk104">
  <author>Corets, Eva</author>
  <title>Oberon's Legacy</title>
  <genre>Fantasy</genre>
  <price>5.95</price>
  <publish_date>2001-03-10</publish_date>
  <description>In post-apocalypse England, the mysterious 
  agent known only as Oberon helps to create a new life 
  for the inhabitants of London. Sequel to Maeve 
  Ascendant.</description>
</book> 
```

我想给这本书添加父标签，所以它是：

```
<library>
 <book id="bk104">
  <author>Corets, Eva</author>
  <title>Oberon's Legacy</title>
  <genre>Fantasy</genre>
  <price>5.95</price>
  <publish_date>2001-03-10</publish_date>
  <description>In post-apocalypse England, the mysterious 
  agent known only as Oberon helps to create a new life 
  for the inhabitants of London. Sequel to Maeve 
  Ascendant.</description>
 </book>
</library> 
```

我正在使用`XML::LIBXML`，我试图获得root

```
my $root = $doc->getDocumentElement; 
```

并创建新元素

```
my $new_element= $doc->createElement("library"); 
```

接着

```
$root->insertBefore($new_element,undef); 
```

最后 ：

```
my $root = $doc->getDocumentElement;
my $new_element= $doc->createElement("library");
$parent = $root->parentNode;
$root->insertBefore($new_element,$parent); 
```

但它不会工作。还试图找到返回头节点的根的父节点，然后`addchild`它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:36:31.447

您需要创建一个新的空`library`元素并将其设置为文档的新根元素。然后将旧根添加为新子。

```
use strict;
use warnings;

use XML::LibXML;

my $doc = XML::LibXML->load_xml(string => << '__END_XML__');
<book id="bk104">
  <author>Corets, Eva</author>
  <title>Oberon's Legacy</title>
  <genre>Fantasy</genre>
  <price>5.95</price>
  <publish_date>2001-03-10</publish_date>
  <description>In post-apocalypse England, the mysterious 
  agent known only as Oberon helps to create a new life 
  for the inhabitants of London. Sequel to Maeve 
  Ascendant.</description>
</book>
__END_XML__

my $book = $doc->documentElement;
my $library = $doc->createElement('library');
$doc->setDocumentElement($library);
$library->appendChild($book);

print $doc->toString(1); 
```

**输出**

```
<?xml version="1.0"?>
<library>
  <book id="bk104">
    <author>Corets, Eva</author>
    <title>Oberon's Legacy</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2001-03-10</publish_date>
    <description>In post-apocalypse England, the mysterious 
  agent known only as Oberon helps to create a new life 
  for the inhabitants of London. Sequel to Maeve 
  Ascendant.</description>
  </book>
</library> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:35:09.160

试试这个：

```
open my $in, '<:encoding(utf-8)', 'in.xml';
my $document = XML::LibXML->load_xml(IO => $in);

my $root     = $document->documentElement();
my $new_root = $document->createElement('library');
$new_root->appendChild($root);
$document->setDocumentElement($new_root);

open my $out, '>:encoding(utf-8)', 'out.xml';
print $out $document->toString(); 
```

它创建*new_root*元素，将*根*元素作为子元素附加到*new_root并将**new_root*元素设置为文档的根元素。

# python - 使用已安装的 Trilinos 版本构建 pytrilinos

> ID：15351310
> 
> 赞同：0
> 
> 时间：2013-03-12T00:42:39.880
> 
> 标签：python, c++, compilation, trilinos

我可以访问`trilinos`已经静态构建的集群。

是否可以建立`pytrilinos`自己链接到这些库？还是唯一的方法是`trilinos`从源代码构建所有内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T16:13:33.593

我的猜测是：没有。

PyTrilinos 的安装说明提到 Trilinos 应该使用共享库构建。

> 选项 -D Trilinos_ENABLE_PyTrilions:BOOL=ON 和 -D BUILD_SHARED_LIBS:BOOL=ON。

[PyTrilinos 安装常见问题](http://trilinos.sandia.gov/packages/pytrilinos/faq.html#configuration)

# c# - 如何以编程方式创建颜色过渡

> ID：15351312
> 
> 赞同：0
> 
> 时间：2013-03-12T00:42:49.640
> 
> 标签：c#, windows-phone

我想为背景页面进行颜色转换，例如从 blue-lightblue-white- 等等。我尝试使用`.gif`文件，但它在手机上不起作用。我认为也许可以使用更改值`RGB`或以`ARGB`编程方式完成，但我不知道如何实现。谁能告诉我怎么做？之前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:55:32.793

你可以通过使用故事板来做到这一点。例如：

```
<phone:PhoneApplicationPage.Resources>
    <Storyboard x:Name="Storyboard1" RepeatBehavior="Forever">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="LayoutRoot">
            <DiscreteColorKeyFrame KeyTime="0" Value="Blue"/>
            <DiscreteColorKeyFrame KeyTime="0:0:1" Value="LightBlue"/>
            <DiscreteColorKeyFrame KeyTime="0:0:2" Value="White"/>
            <DiscreteColorKeyFrame KeyTime="0:0:3" Value="White"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
</phone:PhoneApplicationPage.Resources> 
```

加载页面后，您将启动 Storyboard：

```
this.Storyboard1.Begin(); 
```

# java - 浮点错误会导致 'a/(double)b >= a/b' 失败吗？

> ID：15351314
> 
> 赞同：1
> 
> 时间：2013-03-12T00:43:09.430
> 
> 标签：java, floating-point

可能永远`result`是假的，因为`4 / 2.0`可能会返回类似的东西`1.99999999`？比标题更笼统：

```
int a = // any valid int
int b = // any valid int
boolean result = (a/(double)b) >= a/b; 
```

如果这是可能的，任何人都可以提供一个`a`和的例子`b`吗？如果这不可能，是否有任何 java 或浮点规范可以证明这一点？

几分钟前我写了这个逻辑，突然担心它会崩溃。我一直无法打破它，但我想知道它是否在所有 JVM 中都能得到保证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T01:47:35.773

如果`a`和`b`是正值`int`，那么`a/(double)b >= a/b`。

我使用以下前提以及理解的语义，例如将 的`int`值`a/b`转换`double`为与 的其他操作数进行比较`>=`。

前提：

*   的范围`int`是 [-2,147,483,648, 2,147,483,648)。
*   `double`是 IEEE 754 64 位二进制。
*   舍入模式是舍入到最近的。
*   所有浮点运算，尤其是除法，都符合 IEEE 754。
*   整数`a/b`向零截断。

符号：

*   *a*是 的数学值`a`。
*   *b*是 的数学值`b`。
*   数学表达式（例如*a* / *b*）是精确的，与计算表达式（例如`a/b`.
*   令*L*为 为 产生的值`a/(double)b`。
*   令*R*为 为 产生的值`a/b`。

证明：

*   所有`int`值都可以在 中表示`double`，因此 IEEE 754 要求转换`int`准确`double`。
*   因此，准确`(double) a`地`(double) b`产生*a*和*b*，并`a/(double)b`产生正确舍入到最接近*的 a* / *b*`double`。
*   由于*R*是向零截断的*a* / *b ，并且**a* / *b*是正数，因此*R*是 floor( *a* / *b* )。
*   最大*的 a* / *b*可以是 2,147,483,647/1 = 2,147,483,647。这个数量级及以下的每个整数都可以精确地表示为 a `double`。
*   *L*是`double`最接近*的 a* / *b*。如果*L*通过四舍五入减少，则减少到下一个较低的`double`。由于这个量级的所有整数都是可表示的，所以 floor( *a* / *b* ) 是可表示的，所以*L*至少是 floor( *a* / *b* )。
*   因此*L* ≥ *R*。
*   *R* to的转换`double`是精确的，因此*L*与*R*的比较产生与数学*L* ≥ *R*`>=`相同的结果。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:44:12.160

对于负数，它在 a = -10, b = 3 时失败。

仅对于积极的输入，我认为您是安全的。

令 x 为 a 除以 b 的实数结果。

首先考虑 x 可以表示为 int 的情况。它也可以表示为双精度，并且两个计算都返回 x。

现在假设 x 不是 int。问题是 x 和 a/(double b) 之间的舍入误差差的绝对值是否可以超过 a/b 的截断误差。这不可以。

截断误差 t = x - a/b 必须至少为 1/b。x 不能大于 Integer.MAX_VALUE/b，因此 t/x 至少为 1/Integer.MAX_VALUE。这远大于正确舍入双精度计算的最大舍入误差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:45:27.657

`4 / 2.0`必须返回`2.0`，因为浮点除法是精确的。

但是，负数可能会导致您的比较失败。请注意，`-1/2 = 0`虽然`-1.0/2.0 = -0.5`.**

# c - 将一阶传递函数转换为c代码

> ID：15351315
> 
> 赞同：0
> 
> 时间：2013-03-12T00:43:09.610
> 
> 标签：c, function, matlab, transfer, simulink

我有一个简单的一阶传输，例如“3/s+3”或“tf(3,[1 3])”函数，我想用 c 代码实现。我有一个 C 函数，它使用自上次迭代以来的增量时间调用：

```
double output(double input, double t); //usually, t is around 0.01 second 
```

如何在 C 中实现传递函数 3/s+3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:09:45.867

这不仅仅是直接实现 3/(s+3) 的问题。您需要使用适当的技术（前向欧拉、后向欧拉、tustin、零阶保持）将其离散到 z 域，然后实现滤波器的离散版本。

以下是 Tustin 转换的简单版本。正如所写，需要初始化状态并将其存储在此函数外部的某个位置。

```
double firstOrderLag(double input, double coeff, double dT, double *state){
// Function to implement the discretization of a continuous time first
// order lag sys = coeff/(s+coeff) using the Tustin (Bilinear) transformation.

    double num = (1/(1+2/coeff/dT)); // numerator
    double den = (1-2/coeff/dT)*num; // denominator
    double temp;
    double output;

    temp = input - den*(*state);
    output = num*(temp + (*state));
    *state = temp;

    return output;
} 
```

# ruby-on-rails - 实例变量找不到 id

> ID：15351321
> 
> 赞同：1
> 
> 时间：2013-03-12T00:43:51.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有一个正在创建的画廊应用程序。我需要`@image`在类的索引操作上引用实例变量。但是，当我在类中声明它时，它会导致`Couldn't find Image without an ID`. 我该如何解决这个错误。

```
class Admin::ImagesController < ApplicationController
    before_filter :get_album, :only => [:show, :index, :destroy]
    def index
        @images = Image.all
        @image = Image.find(params[:image_id])
    end
    def new
        @album = Album.find(params[:album_id])
        @image = Image.new(params[:image_id])
    end
    def create
        @image = Image.new(params[:image])
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, :albums]
        else
            render :action => 'new'
        end
    end
    def show
        @image = Image.find(params[:id])
    end
    def destroy
        @image = Image.find(params[:image_id])
        @image.destroy
        redirect_to admin_albums_path
    end
    private
    def get_album
        @album = Album.find(params[:album_id])
    end

end 
```

**索引.html.erb**

```
<% @images.each do |image|%>
    <%= image.title %>
    <%= image.description %>
    <%= image.image_name %>
    <%= button_to "Delete", @image, :method => :delete, :style => "display: block;" %>
    <%= debug @image %>
<% end %> 
```

**图式**

```
# This file is auto-generated from the current state of the database. Instead
# of editing this file, please use the migrations feature of Active Record to
# incrementally modify your database, and then regenerate this schema definition.
#
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
#
# It's strongly recommended to check this file into your version control system.

ActiveRecord::Schema.define(:version => 20130312005119) do

  create_table "albums", :force => true do |t|
    t.string   "title",       :null => false
    t.text     "description"
    t.date     "date"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
  end

  create_table "images", :force => true do |t|
    t.string   "title"
    t.string   "description"
    t.string   "image_name"
    t.datetime "date"
    t.integer  "album_id"
    t.integer  "image_id"
  end

  create_table "users", :force => true do |t|
    t.string   "email"
    t.string   "password_digest"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

end 
```

**路线**

```
Admin::Application.routes.draw do
  get "albums/index"

  get "dashboard/index"

  namespace :admin, :shallow => true do
    root :to => "dashboard#index"
    resources :dashboard
    resources :albums do
      resources :images
     end
    get "admin/album"
    end
    get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "signup" => "users#new", :as => "signup"
    # resources :users
  resources :basic
    root :to => "basic#index" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:59:22.573

如果你想使用它，即使图像不存在于数据库中，那么你必须做 find_by_id

```
@image = Image.find_by_id(params[:image_id]) 
```

这将返回 Nil 而不是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:32:57.733

为什么在 Image 模型中使用 image_id 列。创建模型时会自动生成 id 列。从您的 Image 模型中删除 image_id 并在您的图像控制器索引中使用

@images = Image.all

# php - 渲染后如何将列表项附加到树枝中的ol？

> ID：15351322
> 
> 赞同：0
> 
> 时间：2013-03-12T00:43:51.580
> 
> 标签：php, symfony, hook, twig, template-engine

我想编写一个监听器，监听 symfony 中的事件，该事件在控制器返回其响应后运行，以便我可以使用 twig 修改视图。例如。我想将 custon li 元素附加到控制器填写的已填写 ol 元素中。现在使用 Twig 是否为时已晚，我必须将控制器的响应加载到 DomDocument 中并从那里更改它，或者 Twig 是否有本机方式“挂钩”到视图中。我宁愿使用基于 OOP 的东西，比如 dom.GetElementById(x) 而不是 str_replace 等

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:58:37.640

看看如何注入 webprofiler： [https ://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/WebProfilerBundle/EventListener/WebDebugToolbarListener.php#L93-L121](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/WebProfilerBundle/EventListener/WebDebugToolbarListener.php#L93-L121)

可以使用 Symfony 的 DomCrawler [http://symfony.com/doc/current/components/dom_crawler.html](http://symfony.com/doc/current/components/dom_crawler.html)以 OOP 方式进行操作，但出于性能原因，我不推荐它！

# facebook - 当 IE8 中的 dom 元素过多时，Facebook all.js 会崩溃 - 脚本无响应

> ID：15351334
> 
> 赞同：0
> 
> 时间：2013-03-12T00:45:02.870
> 
> 标签：facebook

我的页面上有 facebook 社交模块/api。我刚开始遇到问题，我无法从 FB 找到任何会导致此问题的 all.js 更新。

在 IE8 中，如果我包含某些页面模块（有很多 DOM 元素），facebook all.js 文件就会出错，IE 会陷入困境并返回“无响应脚本”弹出窗口。

如果我减少页面上 DOM 元素的数量，页面加载正常。我运行了一些页面启发式等，它指向 all.js，但没有给出细节。

还有其他人遇到这个吗？是否有一个设置可以放在我的 DOM 元素上，告诉 FB 不要递归或忽略它。

似乎 FB all.js 正在抓取我的页面。

任何真正解决问题的想法或方法。

ps 这个问题是在上周二的时候注意到的......当他们发布他们的代码时。

我怎么知道它是 all.js？

1.  我一一托管了我网站上的所有第三方脚本，以缩小我的页面抛出无响应错误时的范围。

2.  当我排除 facebook/all.js - 错误消失。

3.  当我在页面上包含 FB all.js 并省略一些其他模块时，有时会出错，有时不会 - 取决于页面上 dom 元素的数量（看起来）。FF 加载很好，IE8 不行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:02:06.903

当 JS SDK 使用参数初始化时`xfbml=true`，它将遍历整个 DOM，以查看其中是否有任何 Facebook HTML5/XFBML 标签需要替换为任何社交插件——因为 IE 8 不是最现代的浏览器，它没有提供非常有效的方法来查询 DOM 中的元素（如 getElementsByClassName 等），所以我认为这可能是脚本在具有许多元素的 DOM 上运行很长时间的原因。

因此，您可以尝试使用`xfbml`显式设置为 false 的参数来初始化 SDK。如果您的页面中*有*需要解析的 XFBML 标签，您可以使用[FB.XFBML.parse](https://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)让它只解析 DOM 的特定元素或部分，这将减少需要迭代的 DOM 节点的数量。

请尝试一下，看看它是否有助于加快速度。

# asp.net-mvc - 如何将淘汰赛验证应用于 MVC 传递的每个项目列表的属性？

> ID：15351336
> 
> 赞同：2
> 
> 时间：2013-03-12T00:45:19.530
> 
> 标签：asp.net-mvc, knockout.js, knockout-2.0, knockout-validation, knockout-mvc

以下是 ASP.NET MVC 中的视图模型：

```
public class Email
{
  public string Selected { get; set; }
  public string Name { get; set; }
}
public class User
{
  public string UserName { get; set; }
  public IList<Email> Emails { get; set; }
} 
```

它被传递到视图中，在定义淘汰视图模型时看起来像这样：

```
var viewModel = {
  UserName: ko.observable("@Model.UserName"),
  Emails: ko.observableArray(@Html.Json(@Model.Emails) || []),
  // many other things
} 
```

我想确保`Email.Selected`是`required`. 如何使用列表而不是单个对象来做到这一点。我知道这一定是最简单的问题，但我找不到有关该主题的任何内容。

我在客户端使用淘汰赛验证，因为 Fluent 和数据注释不幸不能与淘汰赛一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T03:03:30.653

正如我在评论中提到的剔除自定义验证可以提供帮助，这里我添加了一个示例，说明如何在您的情况下使用剔除自定义验证：

```
var viewModel = {
  UserName: ko.observable("@Model.UserName"),
  Emails: ko.observableArray(@Html.Json(@Model.Emails) || []).
          extend({
             customRequired: { message: 'Selected is required' }
          });

  // many other things
}

ko.validation.rules['customRequired'] = {
    validator: function (emailList) {
        var pass = true;
        ko.utils.arrayFirst(emailList(), function(email){
           if(email.Selected == '')       //if Selected property is empty
           {
             pass = false;
             return true;                 //break the loop
           }
        });
       return pass;
    }
}; 
```

# c++ - 移动构造函数和继承

> ID：15351341
> 
> 赞同：22
> 
> 时间：2013-03-12T00:45:53.913
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-constructor

我试图了解移动构造函数和赋值操作在 C++11 中的工作方式，但我在委派给父类时遇到问题。

编码：

```
class T0
{
public:
    T0() { puts("ctor 0"); }
    ~T0() { puts("dtor 0"); }
    T0(T0 const&) { puts("copy 0"); }
    T0(T0&&) { puts("move 0"); }
    T0& operator=(T0 const&) { puts("assign 0"); return *this; }
    T0& operator=(T0&&) { puts("move assign 0"); return *this; }
};

class T : public T0
{
public:
    T(): T0() { puts("ctor"); }
    ~T() { puts("dtor"); }
    T(T const& o): T0(o) { puts("copy"); }
    T(T&& o): T0(o) { puts("move"); }
    T& operator=(T const& o) { puts("assign"); return static_cast<T&>(T0::operator=(o)); }
    T& operator=(T&& o) { puts("move assign"); return static_cast<T&>(T0::operator=(o)); }
};

int main()
{
    T t = std::move(T());
    return 0;
} 
```

但是，当我在VS2012下编译运行时，输出显示T0成员的左值版本被调用：

```
ctor 0
ctor
copy 0  <--
move    <--
dtor
dtor 0
dtor
dtor 0 
```

移动赋值也会发生类似的情况（测试用例略有不同）——T 的移动赋值运算符称为 T0 的“正常”赋值运算符。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-12T01:04:50.133

关于将右值引用作为参数的函数，更令人困惑的事情之一是它们在内部将其参数视为左值。这是为了防止您在想要移动参数之前移动参数，但这需要一些时间来适应。为了实际移动参数，您必须在其上调用 std::move （或 std::forward）。因此，您需要将移动构造函数定义为：

```
T(T&& o): T0(std::move(o)) { puts("move"); } 
```

您的移动赋值运算符为：

```
T& operator=(T&& o) { puts("move assign"); return static_cast<T&>(T0::operator=(std::move(o))); } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T00:59:48.653

你只用左值调用你的基类的东西：

```
void foo(int&){}  // A
void foo(int&&){} // B

void example(int&& x)
{
    // while the caller had to use an rvalue expression to pass a value for x,
    // since x now has a name in here it's an lvalue:
    foo(x); // calls variant A
}

example(std::move(myinteger)); // rvalue for us, lvalue for example 
```

也就是说，您需要：

```
T(T&& o):
T0(std::move(o)) // rvalue derived converts to rvalue base
{
    puts("move");
} 
```

和：

```
T& operator=(T&& o)
{
    puts("move assign");

    T0::operator=(std::move(o)));

    return *this;
} 
```

# css - CSS 选择器 li:hover 仅当其子项未悬停时

> ID：15351349
> 
> 赞同：2
> 
> 时间：2013-03-12T00:46:14.760
> 
> 标签：css, css-selectors

说我有 HTML

```
<ul>
  <li><a>Item 1</a></li>
  <li><a>Item 2</a></li>
</ul> 
```

和 CSS

```
li { padding-left: 20px; background-image: url(arrow.png); }
li:hover { background-image: url(arrow-hover.png); } 
```

我想在悬停时将背景图像更改回 arrow.png `li > a`。
我正在寻找这样的东西。

```
li:hover:not(this > a:hover) { background-image: url(arrow-hover.png); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:07:50.673

显然在 CSS3 中没有办法做到这一点。（感谢奥斯瓦尔多和埃文）

如果有人在寻找类似的解决方案，我不得不使用这个 JavaScript。

```
$("li").hover(function () { $(this).addClass('hover'); },
              function () { $(this).removeClass('hover'); });
$("li > *").hover(function () { $(this).parent().removeClass('hover'); },
                  function () { $(this).parent().addClass('hover'); }); 
```

并将 CSS 选择器从更改`li:hover`为`li.hover`（或您在上面使用的任何类）

```
li.hover { background-image: url(arrow-hover.png); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:49:22.117

实际上，当您将鼠标悬停在 li 内的标签上时，它会触发两个悬停动作..一个用于父 li，另一个用于标签，您可以尝试制作

```
li >a:hover { background-image: url(arrow-hover.png) !important; } 
```

它没有经过测试，但你可以试试......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:21:34.860

自从我 jQuery 以来已经有一段时间了，但是

```
$("li > a").hover(
  function(){
    $this.parent("li").css("background-image", "url(arrow-hover.png)")
  },
  function(){
    $this.parent("li").css("background-image", "url(arrow.png)")
  }
); 
```

# r - 通过在 data.table 中使用 svyglm 进行分组分析

> ID：15351350
> 
> 赞同：0
> 
> 时间：2013-03-12T00:46:17.663
> 
> 标签：r, cluster-analysis, data.table

我在 data.table 中有以下数据：

```
 h           x1 y1  swNx11
    1:  1 39.075565717  0  1.03317231703408
    2:  1 40.445951251  0  7.14418755725832
    3:  1 37.800722944  0  0.435946586361557
    4:  1 41.085221504  0  0.381347141150498
    5:  1 36.318077491  0  0.497077163135359
---                                                       
24996: 25 39.110138193  0  0.942922612158002
24997: 25 39.331940413  0  1.42227399208458
24998: 25 37.479473784  0  0.390657876415799
24999: 25 35.892044242  0  0.599937357458247
25000: 25 40.699588303  0  0.486486760245521 
```

我创建了一个函数来在 svyglm 中分析它们：

```
msmMC <- function(y, x, sw, name){
msm <- svyglm(y ~ x,family=quasibinomial(link="logit"),design = svydesign(~ 1, weights = ~ sw))
out <- cbind("name",coef(summary(msm))[2,1],coef(summary(msm))[2,2])
return(out)
}

msmswNx1<-dt2[,list(dtmsm=list(msmMC(y1, x1, swNx1, Nx1))),by="h"]
outNx1 <- unlist(dt.lm[,msmswNx1]) 
```

当我运行这个函数时，我得到以下错误：

[.data.table(dt2, , list(dtmsm = list(msmMC(y1, x1, swNx1, : 'by' 或 'keyby' 的列或表达式 1 是类型列表。不要引用列名。用法： DT[,sum(colC),by=list(colA,month(colB))]

然而，它适用于不同的模型，例如 glm 或 polr。那么这里发生了什么？为什么 svyglm 对使用 data.table 进行分组处理如此挑剔？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:50:45.207

我怀疑它是否有效，`lm` `glm`或者`polr`错误是与一个参数匹配的参数。

你需要把整个东西包起来`list`

```
dt2[,list(dtmsm=list(msmMC(y1, x1, swNx1, Nx1))),by="h"] 
```

或者，您可能只是放错了`list`给定的调用，该调用`msmMC`似乎返回了一个可能是 data.frame、list 或 data.table 的对象

```
dt2[,list(dtmsm=msmMC(y1, x1, swNx1, Nx1)),by="h"] 
```

# java - android下载http视频文件

> ID：15351352
> 
> 赞同：1
> 
> 时间：2013-03-12T00:46:36.670
> 
> 标签：java, android, http, httpclient

我有一个非常简单的 http 下载程序，如下所示。该文件非常小，例如200K。

问题是当我使用3G连接时，有时一次下载会卡很长时间。但我可以用 3G 连接很好地观看 youtube，这意味着 3G 网络很好。代码有什么问题吗？

使用wifi连接时没有问题。

```
for (int chunkno = 0; chunkno < 10000000; ++chunkno)
{
try
{
    AndroidHttpClient client = AndroidHttpClient.newInstance("Android");
    HttpGet request = new HttpGet("http://ipaddress/vbr_100.mp4");   
    HttpResponse response = client.execute(request);

    recvbytes = response.getEntity().getContentLength();

    File f = new File(Environment.getExternalStoragePublicDirectory("bill"), "f");
    if (!f.exists())
    {
        f.createNewFile();
    }

    response.getEntity().writeTo(new FileOutputStream(f));

}
catch (IOException ex)
{
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:05:47.753

我建议您使用 android [DownloadManager 包](http://developer.android.com/reference/android/app/DownloadManager.html)，它可以处理与大文件下载相关的所有问题。

复制自 Android 文档站点：[这里](http://www.mysamplecode.com/2012/09/android-downloadmanager-example.html)提供了

`The download manager is a system service that handles long-running HTTP downloads. Clients may request that a URI be downloaded to a particular destination file. The download manager will conduct the download in the background, taking care of HTTP interactions and retrying downloads after failures or across connectivity changes and system reboots.`

一个非常好的使用示例。`DownloadManager`

希望这可以帮助 ！！

# css - CSS 2列布局，从上到下浮动

> ID：15351354
> 
> 赞同：1
> 
> 时间：2013-03-12T00:46:50.163
> 
> 标签：css, html, css-float, inline

我尝试实现一种设计，其中两列从上到下填充了几个不同高度的 div，从左到右有一个“溢出”，这样两列的高度几乎相同。

例子：

```
AAA  CCC
AAA  CCC
AAA  
AAA  DDD
     DDD
BBB  
BBB  EEE
BBB 
```

但我不知道让它发生。我尝试了类似的东西

```
<div class="items">
   <div class="item even">A</div>
   <div class="item odd">B</div>
   <div class="item even">C</div>
   <div class="item odd">D</div>
   <div class="item even">E</div>
</div> 
```

和

```
.item.even { float: left; }
.item.odd { float: right; } 
```

或者

```
.item { display: inline; } 
```

或者

```
.item { display: inline-block; } 
```

但由于 items-div 的高度和数量未知，我还没有找到可以接受的结果。有任何想法吗？每一个提示都值得赞赏。

这是一个示例 jsfiddle：http: [//jsfiddle.net/6W96c/](http://jsfiddle.net/6W96c/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:09:46.917

尝试类似....

```
.items .even { float: left; clear:both;}

.items .odd { float:right; } 
```

没有一些 HTML 就很难测试您的需求。也许你可以创建一个 jsFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:55:15.317

我终于通过插入带有正则表达式的关闭和打开 div 来解决它。这是php代码：

```
// $html is containing the html code
preg_match_all('#<div class="item .+?</div>#ism', $html, $matches);
$matches = $matches[0];
// Get all the lengths
$totalLength = 0;
$lengths = array();
foreach( $matches as $key=>$match )
{
   $totalLength += strlen($match);
   $lengths[$key] = $totalLength;
}
// Find the div, which is the closest to the middle
$key = 0;
$distanceFromMiddle = $middle = $totalLength / 2;
while( $distanceFromMiddle > abs($lengths[$key] - $middle) )
{
   $distanceFromMiddle = abs($lengths[$key++] - $middle);
}
// Add div in front off the next div
$replace = '</div><div class="items">'.$matches[$key + 1];
$html = str_replace($matches[$key], $replace, $html); 
```

不是很优雅，但它有效。我仍然愿意接受其他建议。谢谢！

# regex - bash 正则表达式补丁匹配

> ID：15351357
> 
> 赞同：1
> 
> 时间：2013-03-12T00:47:19.237
> 
> 标签：regex, macos, bash

我有一条这样的路径..

```
/Users/me/bla/dev/trunk/source/java/com/mecorp/sub/misc/filename.java 
```

我希望能够使用 bash 在另一个目录中创建包结构，例如

```
com/mecorp/sub/misc/ 
```

我尝试了以下但它不会工作..如果我将我的正则表达式更改为 .* 我能够得到一个匹配，这意味着我的 bash 是好的 - 我引用正则表达式或正则表达式的方式一定有问题自己。我确实看到在这里工作..

[http://regexr.com?3439m](http://regexr.com?3439m)

所以我很困惑？

```
regex="(?<=/java)(.*)(?=/)"

 [[ $fullfile =~ $regex ]]
 echo "pkg name " ${BASH_REMATCH[0]} 
```

谢谢你的时间。

编辑 - 我使用的是 OSX，所以它没有那些漂亮的 GNU 扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:52:19.743

试试这个 ：

使用`GNU` [grep](/questions/tagged/grep "显示标记为“grep”的问题")：

```
$ echo '/Users/me/bla/dev/trunk/source/java/com/mecorp/sub/misc/filename.java' | 
    grep -oP 'java/\K.*/'
com/mecorp/sub/misc/ 
```

见[http://regexr.com?3439p](http://regexr.com?3439p)

或使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")：

```
x="/Users/me/bla/dev/trunk/source/java/com/mecorp/sub/misc/filename.java"
[[ $x =~ java/(.*/) ]] && echo ${BASH_REMATCH[1]} 
```

或使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
echo "$x" | awk -F/ '{print gensub(".*/java/(.*/).*", "\\1", $0)}' 
```

或使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
echo "$x" | sed -e 's@.*/java/\(.*/\).*@\1@' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:54:00.677

如果您尝试提取路径后`/java/`可以这样做：

```
path=/Users/me/bla/dev/trunk/source/java/com/mecorp/sub/misc/filename.java
package=`echo $path | sed -r 's,^.*/java/(.*/).*$,\1,'` 
```

# ios - Cocos2D 在 -(id) init 上崩溃

> ID：15351359
> 
> 赞同：0
> 
> 时间：2013-03-12T00:47:23.340
> 
> 标签：ios, objective-c, cocos2d-iphone

我有 1 个场景，其中包含两层。一个命名为 BackgroundLayer，另一个命名为 GameplayLayer。背景层如下所示：

```
-(id) init{
self = [super init];
if(self != nil){
    CCSprite * backgroundImage;
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad){
        backgroundImage = [CCSprite spriteWithFile:@"backgroundr.png"];

    }
    else{
        backgroundImage = [CCSprite spriteWithFile:@"background.png"];
    }

    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    [backgroundImage setPosition:CGPointMake(screenSize.width/2, screenSize.height/2)];
    [self addChild:backgroundImage];

}
return self;} 
```

这很好用。但问题是，GameplayLayer 会导致游戏崩溃。GameplayLayer 看起来像这样：

```
-(id) init{
    self = [self init];
   if( self != nil){

        }

    return self;
} 
```

游戏场景也是这样的：

```
-(id) init{
self = [super init];
if(self != nil){
    BackgroundLayer * backgroundLayer = [BackgroundLayer node];
    [self addChild:backgroundLayer z:0];

    GameplayLayer * gameplayLayer = [GameplayLayer node];
    [self addChild:gameplayLayer z:5];

}
return self; 
```

}

我真的没有在这里看到问题。但是如果我删除 -(id) init 它不会崩溃。
有任何想法吗？
以下是日志的最后几行：

```
 2013-03-12 00:41:41.371 CocoTest[3574:c07] cocos2d: **** WARNING **** CC_ENABLE_GL_STATE_CACHE is disabled. To improve performance, enable it by editing ccConfig.h

2013-03-12 00:41:41.371 CocoTest[3574:c07] cocos2d: cocos2d v2.0.0
2013-03-12 00:41:41.371 CocoTest[3574:c07] cocos2d: Using Director Type:CCDirectorDisplayLink 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:52:20.773

`self = [self init];` in`GameplayLayer`将永远递归。应该`self = [super init];`

# c++ - 如何在我的 C++ 猜谜游戏中添加“重玩”功能？循环故障

> ID：15351361
> 
> 赞同：-2
> 
> 时间：2013-03-12T00:47:28.307
> 
> 标签：c++, loops, numbers

所以对于这个任务，我必须包含一个再次播放的功能。这意味着一旦人们猜对了，程序应该让用户选择是否再次播放。另外，我正在尝试包含一个功能，如果用户在 5 次或更少的猜测中正确猜测，那么程序应该打印“Good Job！” 如果他们的猜测超过 5 次，它应该显示“你可以做得更好！”。请帮帮我！我是编程的初学者，我一直在试图解决这个问题。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main( void )
{

int i, n = 0, r;
int answer;
srand( time( NULL ) );
r = rand() %100 +1;
char userName[15];

printf("Welcome to GUESS MY NUMBER!\n\nPlease type your name here: ");
scanf("%s", &userName);
printf("\n\nI am thinking of a number between 1 and 100.\n\nCan you guess what it is?  ");
while(scanf("%d", &i))
{      
if (n >= 9 && i != r)
{         
printf("\n\nSorry, the number was %d.\n", r);
printf("You should have gotten it by now.\n");        
printf("Better luck next time.\n\n");         
system ("PAUSE");
break;    
}      
if (i > r) 
{         
n++;
printf("Your guess is high. You only get 10 guesses. Try again: ");   
}     
else if (i < r) 
{         
n++;          
printf("Your guess is low. You only get 10 guesses. Try again: ");    
}     
else if (i == r) 
{             
printf("\n\nCongratulations %s!\nYou guessed the number within %d guesses!\nWould you  like to play again? y/n?\n",userName, n+1,answer);
scanf("%d", &answer);

system ("PAUSE");
break;         
}    
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:19:52.880

一个简单的方法是创建一个 bool 变量（最初设置为 true），可以在 while 语句中检查该变量，并在用户获得继续或不继续选项后进行更新。然后只需将您的休息时间更改为继续，您应该处于良好状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:21:57.340

将整个东西包裹在另一个循环中，在这个外循环结束时，询问用户是否想再玩一次。while() 或 do-while() 循环。如果用户说是，则继续循环，否则退出循环。

```
-Initialize the game
-Load any resources needed (in this case, none)

Begin looping continually
    - Handle input
    - Think
    - Show results
End looping if exited

-Free any resources (in this case, none)
-Exit 
```

# forms - Sencha Touch/Ext：如何在不禁用选项卡的情况下禁用选项卡面板（tabpanel）内的表单

> ID：15351362
> 
> 赞同：2
> 
> 时间：2013-03-12T00:47:35.067
> 
> 标签：forms, extjs, tabs, sencha-touch, sencha-touch-2

我有一个简单的选项卡面板（tabpanel），其中每个选项卡都是一个表单。默认情况下，我希望表单被禁用（只读），并且一旦用户点击编辑按钮就可以编辑。通过设置表单的“禁用”配置，选项卡也被禁用（不能点击它）。

如何在启用选项卡的同时禁用表单？我有几个解决方案可以依靠，但我希望有更清洁/更简单的东西。

到目前为止我的解决方案：

1.  制作选项卡容器并将表单放置在容器内
2.  在字段集级别禁用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:35:06.073

我当前的解决方案使用选项卡面板的“初始化”事件处理程序并在每个表单面板上调用“setDisabled(true)”。

```
onTabPanelInitializer: function(component, options){
    component.query('formpanel').forEach(function(element, index, array){
        element.setDisabled(true);
    });
} 
```

# jsp - 如何在 JPA 中为给定实体保留 OneToOne 变量

> ID：15351363
> 
> 赞同：0
> 
> 时间：2013-03-12T00:47:47.830
> 
> 标签：jsp, jakarta-ee, jpa, one-to-one

我有两个实体：学生和地址

我在 Student 类和 JSP 页面中添加了 OneTeOne 注释，我可以在 foreach JSTL 标记中使用 ${stud.address.country} 获取给定学生的地址。

它正在工作，但问题是：我必须通过 phpMyAdmin 而不是通过 JSP 页面来坚持一个新学生。

那么我应该在 JSP 代码和 servlet 代码中添加什么来添加/保留具有自己的数据地址数据的新学生？

（我是 Java 网络的新手）

[这是](https://www.dropbox.com/s/9ckn11jrsck5w2k/CRUDWebApplication%20-%207%20March%202013.zip)netbeans源项目的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:47:19.527

据我所知，phpMyAdmin 只不过是一个基于 PHP 的 MySQL 管理实用程序。因此，当您在 Java 环境中工作时，您不必也不应该使用它来持久化您的实体的简单答案。

如果您还没有，请考虑为您的项目声明一个持久性单元。根据您的环境，还可以了解如何设置连接到 MySQL 实例的数据源，然后使用[EntityManager API](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)进行持久化操作。

我建议先从[JPA](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpz.html)教程开始。特别是关于[持久性单元](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html#bnbrj)和[应用程序管理与容器管理实体管理器](http://docs.oracle.com/javaee/6/tutorial/doc/bnbqw.html#bnbqy)的部分。

抱歉，我认为没有更简单的方法可以为您指明正确的方向，我怀疑是否有更短的路线。

**更新**

我查看了您的 Dropbox 内容，您似乎主要使用 IDE 生成的代码，这些代码应该可以正常使用。您的持久性单元声明可能是您的问题所在。

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="CRUDWebApplicationPU" transaction-type="JTA">
        <jta-data-source>jdbc/studentDB2</jta-data-source>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties/>
    </persistence-unit>
</persistence> 
```

行`<jta-data-source>jdbc/studentDB2</jta-data-source>`- 是`jdbc/studentDB2`部署环境中 java.sql.Datasource 的有效 JNDI 名称吗？基本上，您必须在连接到数据库的部署环境中配置数据源（请注意，那里的配置是特定于环境的）。然后你的代码应该可以正常工作。为了获得更好的答案，您必须更具体。

# guice - @Inject 和 @AssistedInjected 之间的区别？

> ID：15351366
> 
> 赞同：4
> 
> 时间：2013-03-12T00:48:04.477
> 
> 标签：guice, guice-3

关于[辅助注入](http://code.google.com/p/google-guice/wiki/AssistedInject)的页面解释了如何通过在构造函数中注释一些参数来完成辅助注入，`@Assisted`但它没有解释`@AssistedInject`注释的用途以及它与`@Inject`. 该注释是否有某种关联？有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-14T00:00:43.797

`@Inject`并且`@AssistedInject`两者都用于注释构造函数，这些构造函数应该使用正在使用的 Guice 模块的注入器调用。

唯一的区别是，`@Inject`当工厂只有一个方法来创建类型时`@AssistedInject`使用，而当工厂有多个这样的方法对应于该类型的多个构造函数时使用。更多的是帮助Guice区分这两种情况的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:28:03.957

From [http://google-guice.googlecode.com/git/javadoc/com/google/inject/assistedinject/AssistedInject.html](http://google-guice.googlecode.com/git/javadoc/com/google/inject/assistedinject/AssistedInject.html)

> When used in tandem with FactoryModuleBuilder, constructors annotated with @AssistedInject indicate that multiple constructors can be injected, each with different parameters. AssistedInject annotations should not be mixed with @Inject annotations. The assisted parameters must exactly match one corresponding factory method within the factory interface, but the parameters do not need to be in the same order. Constructors annotated with AssistedInject are created by Guice and receive all the benefits (such as AOP).
> 
> Obsolete Usage: When used in tandem with FactoryProvider, constructors annotated with @AssistedInject trigger a "backwards compatibility mode". The assisted parameters must exactly match one corresponding factory method within the factory interface and all must be in the same order as listed in the factory. In this backwards compatable mode, constructors annotated with AssistedInject are not created by Guice and thus receive none of the benefits.
> 
> Constructor parameters must be either supplied by the factory interface and marked with @Assisted, or they must be injectable.

# javascript - 找不到变量：提示

> ID：15351367
> 
> 赞同：0
> 
> 时间：2013-03-12T00:48:22.697
> 
> 标签：javascript, prompt

```
#!/bin/sh

//Rock, Paper, Scissors

var myChoice = prompt("Rock, Paper, or Scissors?");

var computerChoice = Math.random();

if (computerChoice >= 0 && computerChoice <= .33) 
{
    computerChoice === "rock";
}
else if (computerChoice >=.34 && computerChoice <= .67) 
{
    computerChoice === "paper";
}
else 
{
    computerChoice === "scissors";
}; 
```

我理解我的代码是初级的，但我只是从 Javacript 开始。我正在尝试通过终端运行此代码并继续收到错误消息“找不到变量：提示”。我确信那里有一个简单的解释，但我似乎找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:56:14.423

`prompt()`用于浏览器。您应该使用[此处](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Introduction_to_the_JavaScript_shell#print.28.5Bexpression_....5D.29)找到的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:56:37.223

您不能在终端中使用提示功能。它仅适用于浏览器，因为它会弹出一个框，用户在其中输入内容。将其放入 html 文件中，它将起作用：

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
        // your code goes here, minus that first comment.
        </script>
    </head>
</html> 
```

# c# - 文本文件差异库（MS 许可）

> ID：15351368
> 
> 赞同：1
> 
> 时间：2013-03-12T00:48:26.283
> 
> 标签：c#, visual-studio, diff

有谁知道是否有办法利用 Visual Studios 差异库来扩展我的项目的功能？

我知道有文件差异的开源解决方案，如果我找不到足够的 Microsoft 实现，我会考虑这些解决方案。Visual Studio 带有很好的 diff 功能，可用于比较源文件。

我想使用 MS 许可的代码。视觉工作室似乎满足了这一要求并具有我需要的功能。

看起来这将是一个有用的扩展库，也许 .NET 应该包含在其中，或者已经存在？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:00:44.660

Visual Studio diff 窗口（Visual Studio 2012 的新功能）使用[`IDifferenceBufferFactoryService`](http://msdn.microsoft.com/en-us/library/hh698406.aspx)来创建[`IDifferenceBuffer`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.differencing.idifferencebuffer.aspx)它的显示。从那里它使用为每一方[`ITextDifferencingSelectorService`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.differencing.itextdifferencingselectorservice.aspx)获取适当的。[`ITextDifferencingService`](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.differencing.itextdifferencingservice.aspx)从那里你必须做大量的阅读才能理解 API。:)

如果您正在创建 Visual Studio 2012 扩展，则您感兴趣的 API 位于[Microsoft.VisualStudio.Text.Differencing](http://msdn.microsoft.com/en-us/library/dd886715.aspx)命名空间中。

# ruby-on-rails - 删除 Rails 3.2 映射中的 [""] 额外字符

> ID：15351379
> 
> 赞同：0
> 
> 时间：2013-03-12T00:49:22.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3

嗨，我在**show.html.erb中显示了估计预算**

我正在使用这段代码：

```
<%= current_user.agency.project_procurement_management_plans.map{|p| p.total_estimated_budget.to_s} %> 
```

但随后，输出变为：

```
["117000.5"] 
```

我怎样才能分离里面的输出`[""]`

打赌是因为数组**(?)**，但是我该如何防止呢？

同样，当我在控制器中执行此代码时：

```
def create
    @project_procurement_management_plan = ProjectProcurementManagementPlan.new(params[:project_procurement_management_plan])

    respond_to do |format|
      if @project_procurement_management_plan.save
        format.html { redirect_to @project_procurement_management_plan, notice:"#{@project_procurement_management_plan.code} was successfully created." }
        format.json { render json: @project_procurement_management_plan, status: :created, location: @project_procurement_management_plan }
      else
        #change me soon
        format.html { redirect_to  new_project_procurement_management_plan_path, alert:"#{@project_procurement_management_plan.errors.full_messages}"}
        format.json { render json: @project_procurement_management_plan.errors, status: :unprocessable_entity }
      end
    end
  end 
```

错误消息位于`[""]`

例如

```
["Name can't be blank","The password is incorrect"] 
```

等等。

任何解决方法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:55:07.357

是的，`map`确实返回一个包含所有元素的数组。如果您只有一个，则不应使用`map`：

```
<%= current_user.agency.project_procurement_management_plans.first.total_estimated_budget.to_s %> 
```

**编辑**

对于错误做

```
@project_procurement_management_plan.errors.full_messages.to_sentence 
```

这将用逗号分隔您的错误*和*

# ruby - Nokogiri 查询 JavaScript 中包含的 HTML 注释？

> ID：15351391
> 
> 赞同：0
> 
> 时间：2013-03-12T00:50:19.990
> 
> 标签：ruby, xpath, nokogiri

我有以下 HTML，并试图在脚本节点中获取注释：

```
<html>
    <head>
        <script language="JavaScript" type="text/javascript">
            <!--
            url = 'http://someurl.com';
            -->
        </script>
    </head>
</html> 
```

使用它，我得到脚本节点：

```
javascript_code = doc.xpath("/html/head/script") 
```

但是，当添加`comments()`到 xpath 时，它什么也不返回：

```
javascript_code = doc.xpath("/html/head/script/comment()") 
```

我不知道为什么这不起作用，看起来应该很简单。是否有可能获得评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:23:20.853

如果将文档解析为 XML，它将找到注释。但是，如果您将其解析为 HTML，Nokogiri 会将脚本标记的全部内容放入 cdata 部分。然后你可以解析出来。

```
require 'rubygems'
require 'nokogiri'

body = DATA.read

doc = Nokogiri::XML(body)
puts doc.search('/html/head/script/comment()').text.strip 
# puts "url = 'http://someurl.com';"

doc = Nokogiri::HTML(body)
puts doc.search('/html/head/script').text.strip 
# puts "<!--\n            url = 'http://someurl.com';\n            -->"

__END__
<html>
    <head>
        <script language="JavaScript" type="text/javascript">
            <!--
            url = 'http://someurl.com';
            -->
        </script>
    </head>
</html> 
```

# events - 如何获取事务事件（提交、回滚）

> ID：15351392
> 
> 赞同：0
> 
> 时间：2013-03-12T00:50:22.497
> 
> 标签：events, transactions, ejb

我创建了一个基于 CMT 的 EJB。EJB 将一条记录插入数据库，然后异步执行另一个代码(A)。ejb 继续它的处理，因此可以在异步调用之后提交或回滚事务。在代码 (A) 中，我需要等到 EJB 的事务提交或回滚。然后读取 EJB 插入的记录或跳过下一次执行。我的问题是我可以通知 EJB 的事务事件还是必须轮询直到我可以读取记录。

我正在研究 IBM WebSphere 7.0 (Java EE 5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:20:35.367

据我所知，将异步调用的代码与事务事件同步的唯一方法是使用 CDI 事件。在事务内部运行的代码中，您必须发送 CDI 事件。您可以将 CDI 事件的处理程序配置为仅在某些事务结果上运行 - 这些处理程序称为事务观察器。

我从概述语法和一般概念的 JBoss 文档中找到了这个页面 - 请参阅第 11.7 节

[http://docs.jboss.org/weld/reference/latest/en-US/html/events.html](http://docs.jboss.org/weld/reference/latest/en-US/html/events.html)

基本上它看起来像这样

```
public void refreshCategoryTree(@Observes(during = AFTER_SUCCESS) CategoryUpdateEvent event) 
{// only called after the transaction committed successfully } 
```

我不了解 WebSphere，但由于这是 CDI 规范的一部分，我认为它也应该在那里工作。我曾经将它与 JBoss 一起使用，它对我有用。如果需要，您甚至可以让处理程序在其自己的事务中运行。

# r - 在 r 中重新编码数据帧

> ID：15351394
> 
> 赞同：1
> 
> 时间：2013-03-12T00:50:31.930
> 
> 标签：r, sorting

如何在 r 中重新排序具有多个物种的数据框。每个物种都有不同数量的观察结果，我需要按降序排列最终数据框，其中观察结果最多的物种首先列出。在这个例子中，最终的数据帧应该首先查看列表物种 B，然后是物种 C，最后是物种 A。

```
colA= c("C","C","C","B","B","B","B","A","A")
colB= c(1.1,2.1,3.1,4.1,5.1,6.1,7.1,8.1,9.1)
colC= c(-1.2,-2.1,-3.1,-4.1,-5.1,-6.1,-7.1,-8.1,-9.1)
df= data.frame (spp=colA, latitude=colB, longitude=colC)
df 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:59:18.963

您必须创建一个您希望订购的列

基础解决方案

```
# add a column counting the number of rows in each species
df <- transform(df, n  = ave(latitude ,spp, FUN = length))

# order by this new column

dfordered <- df[order(df$n),] 
```

一个 data.table 解决方案（编码和内存效率）

```
library(data.table)
DT <- data.table(df)

DT[, n := .N, by = spp]

DTordered <-   DT[order(n),]
# or
setkey(DT, n) 
```

[How to sort a dataframe by column(s)](https://stackoverflow.com/questions/1296646/how-to-sort-a-dataframe-by-columns-in-r)中详细介绍了按列排序 data.frames ？

# python - 创建 4 列矩阵，其中 11 个值的所有组合从 0 到 1 增加 0.1。

> ID：15351398
> 
> 赞同：1
> 
> 时间：2013-03-12T00:50:51.537
> 
> 标签：python, matrix, numpy, python-2.7

取以下值：

```
0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0 
```

我想创建一个生成 64x4 矩阵的函数，该矩阵由 256 个元素组成，其中包括上述 11 个值的每组，总和为 1

关于最*有效*的方法的任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:03:32.350

以下代码可以满足您的需求。我使用了加到 10 的整数，以避免浮点舍入错误。您可能可以通过更早地跳出循环来使其运行得更快，并且在 raise 之前不要让它一直向下钻取`StopIteration`，但这会使代码变得不那么清晰。

```
def partitions(n=10, items=range(11), count=4) :
    if count == 0 and n == 0:
        yield []
    elif n < 0 or count < 0:
        raise StopIteration
    for j in xrange(len(items)) :
        ret = [items[j]]
        for k in partitions(n-items[j], items[j:], count-1) :
            yield ret + k

>>> [j for j in partitions()]
[[0, 0, 0, 10], [0, 0, 1, 9], [0, 0, 2, 8], [0, 0, 3, 7], [0, 0, 4, 6],
 [0, 0, 5, 5], [0, 1, 1, 8], [0, 1, 2, 7], [0, 1, 3, 6], [0, 1, 4, 5],
 [0, 2, 2, 6], [0, 2, 3, 5], [0, 2, 4, 4], [0, 3, 3, 4], [1, 1, 1, 7],
 [1, 1, 2, 6], [1, 1, 3, 5], [1, 1, 4, 4], [1, 2, 2, 5], [1, 2, 3, 4],
 [1, 3, 3, 3], [2, 2, 2, 4], [2, 2, 3, 3]] 
```

我不太确定你是从哪里想到会有 64 个这样的子集的。上面的功能想出了

```
>>> len([j for j in partitions()])
23 
```

4 个元素的有序子集。如果您不希望对子集进行排序，则可以通过调用`partitions`full来获得它`items`，而不是`items[j:]`在递归调用中。但是你得到

```
>>> len([j for j in partitions()])
286 
```

如果您不将自己限制为 4 个元素的子集，那么我们必须摆脱`0`（有无限的子集加起来 10 和任意数量的零），然后我们正在计算 10 的[分区](http://en.wikipedia.org/wiki/Partition_%28number_theory%29)，这是[对生命、宇宙和一切的终极问题的答案](http://en.wikipedia.org/wiki/Phrases_from_The_Hitchhiker%27s_Guide_to_the_Galaxy)，或者确切地说是[42](http://oeis.org/A000041)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:06:20.337

正如 Jaime 所说，动态编程在这里可能会被证明是有用的。您可以将此问题定义为对树的递归搜索，其中树中的每个节点都包含一些预先指定的元素。树的叶子包含所有总和为 1 的组合。

因此，在搜索的每一步：

1.  选择下一个总和不超过 1 的数字。
2.  将这个数字添加到你的数字集合中，这个集合将是下一个节点。
3.  从此节点重复，直到到达离开节点（总和 == 1）。

一旦节点 N 以下的所有节点都被完全探索过，或者 N 是一个离开节点：转到其父节点并重复步骤 1 到 3。

# r - install.packages() 的日志

> ID：15351404
> 
> 赞同：8
> 
> 时间：2013-03-12T00:51:28.440
> 
> 标签：r

R 默认情况下会在任何地方存储安装消息的日志吗？如果没有，有没有办法让它记录在文件中？

有时我让 R 自动安装各种包，例如

```
install.packages("caret", dependencies=c("Depends", "Suggests")) 
```

这可能需要几个小时，并且安装日志不适合滚动缓冲区，所以我看不到安装是如何进行的。如果我可以让 R 将此日志保存在某处（除了在终端上显示它），那就太好了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T01:26:27.517

如果您只需要了解安装过程（警告和错误），以下内容可能足以满足您的需求：

```
sink("sink.txt")
install.packages("caret", dependencies=c("Depends", "Suggests"))
sink() 
```

# r - rstudio-server 的全新会话

> ID：15351405
> 
> 赞同：30
> 
> 时间：2013-03-12T00:51:35.427
> 
> 标签：r, rstudio-server, vmware-player

我在虚拟化（vmware-player）ubuntu 机器上运行 rstudio-server，并将大量数据处理到 ram 中。我发现在一些不活动之后会话暂停数据。问题是恢复这个会话需要很长时间，这使得主机和虚拟机都非常滞后。

我只想终止会话并开始新的 rstudio-server 会话，但到目前为止，我发现这样做的唯一方法是`reisub`我的 ubuntu 机器。有谁知道更好的解决方案？

作为旁注，我认为按照`session-timeout-minutes=0`此处[输入](http://www.rstudio.com/ide/docs/server/configuration)应该可以解决会话暂停的问题。`/etc/rstudio/rsession.conf`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-12T22:35:28.617

我找到[了这个页面](https://support.rstudio.com/hc/en-us/articles/218730228-Resetting-a-user-s-state-on-RStudio-Server)，它处理重置 rstudio-desktop 版本。在我的主目录中，我找到了文件夹`~/.rstudio`. 我重命名/删除了这个文件夹，这会加载一个新的 rstudio-server 实例。

其实文件夹里面有个叫文件夹`suspended session`，`~/.rstudio`我怀疑是存放挂起数据的东西，所以说不定删掉这个文件夹就够了？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-05T11:10:45.040

如果里面有目录`~/.rstudio/sessions/active/`，删除它（以类似的方式`rm -rf ~/.rstudio/sessions/active/session-*`）可能足以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T09:42:30.320

您的问题是一段时间前的问题，但是在遇到这个问题无数次之后，我找到了一种无需 Rstudio Shiny Server 管理员权限即可重置 Rstudio Shiny Server 会话的方法：

*   暂时放在 server.r 中的第一行：quit("yes") # FORCE CLOSE OF SESSION server

*   转到该站点，它会崩溃（会话立即关闭）

*   删除或注释掉：#quit("yes") # FORCE CLOSE OF SESSION server
*   转到该站点，您将拥有带有新会话的闪亮应用程序 =^)

为我工作并节省大量时间搜索所有类型的系统文件夹或需要进入系统的一部分，您不允许进入或需要 Rstudio Shiny Server 上的管理员权限。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-21T04:13:36.833

我已经尝试了上述对我不起作用的解决方案。我试图杀死导致问题的 rsession。只需运行此命令即可找出用户会话的 pid。
ps -u userid
找出导致 rsession 停止的 pid。终止该过程，您就可以开始了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-06T08:51:13.587

一个快速的解决方案是重命名 ~/.rstudio 并使用 rstudio url 重新打开网页。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-20T13:39:53.337

请注意，对于较新版本的 Rstudio，此文件夹现在位于

> ~/.local/share/rstudio/sessions/

而在一些旧版本中，它也可以在 中看到`~/.rstudio-desktop`，请参阅[文档页面](https://support.rstudio.com/hc/en-us/articles/200534577-Resetting-RStudio-Desktop-s-State)

# geolocation - 如何找到地球上两点之间的航向角 - 直接穿过地球，就像它们是空旷空间中的两点一样？

> ID：15351409
> 
> 赞同：2
> 
> 时间：2013-03-12T00:52:19.533
> 
> 标签：geolocation, computational-geometry, euclidean-distance, geopoints

我想获得有关如何计算地球上两个地理坐标之间的欧几里得距离和相对于真北的航向角的公式。比如说从纽约到新德里，我在地球上画了一条直线——因为它们是空间中的两个点。如果我要在地球表面画一条直线，我如何计算从纽约到新德里的角度。为了做到这一点，将涉及什么样的数学计算/公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:42:18.633

大拇指线导航

恒向线或等角线是恒定真实航向的轨迹。除了经络和赤道外，它们与大圆不同。它们在接近任一极时都不是很有用，在那里它们会变成紧密缠绕的螺旋。如果任何点实际上是极点，则以下公式将失败。

东西方恒向线很特别。它们遵循纬度平行线并形成闭合曲线。其他恒向线从极到极延伸，无限次环绕每个极。尽管如此，它们具有由 pi/abs(cos(tc)) 给出的有限长度（在我们的角度单位中，乘以地球的半径以获得距离单位）。

当两点 (lat1,lon1), (lat2,lon2) 由具有真实航向 tc 的恒向线连接时：

```
 lon2-lon1=-tan(tc)*(log((1+sin(lat2))/cos(lat2))-
                     log((1+sin(lat1))/cos(lat1))) 
          =-tan(tc)*(log((1+tan(lat2/2))/(1-tan(lat2/2)))-
                     log((1+tan(lat1/2))/(1-tan(lat1/2))))
          =-tan(tc)*(log(tan(lat2/2+pi/4)/tan(lat1/2+pi/4))) 
```

（对数是以 e 为底的“自然”对数。）

点之间的真实路线由下式给出：

tc= mod(atan2(lon1-lon2,log(tan(lat2/2+pi/4)/tan(lat1/2+pi/4))),2*pi) 点之间的距离，d 由下式给出：

```
 if (abs(lat2-lat1) < sqrt(TOL)){
         q=cos(lat1)
     } else {
         q= (lat2-lat1)/log(tan(lat2/2+pi/4)/tan(lat1/2+pi/4))
     }
     d=sqrt((lat2-lat1)^2+ q^2*(lon2-lon1)^2) 
```

如果所讨论的恒向线穿过 180 E/W 子午线，则此公式将失败。考虑到这种可能性，连接两点的最短恒向线的真实航向 tc 和距离 d 由下式给出：

```
dlon_W=mod(lon2-lon1,2*pi)
  dlon_E=mod(lon1-lon2,2*pi)
  dphi=log(tan(lat2/2+pi/4)/tan(lat1/2+pi/4))
  if (abs(lat2-lat1) < sqrt(TOL)){
     q=cos(lat1)
  } else {
     q= (lat2-lat1)/dphi
  }
  if (dlon_W < dlon_E){// Westerly rhumb line is the shortest
      tc=mod(atan2(-dlon_W,dphi),2*pi)
      d= sqrt(q^2*dlon_W^2 + (lat2-lat1)^2)
  } else{
      tc=mod(atan2(dlon_E,dphi),2*pi)
      d= sqrt(q^2*dlon_E^2 + (lat2-lat1)^2)
      } 
```

见[http://williams.best.vwh.net/avform.htm#Rhumb](http://williams.best.vwh.net/avform.htm#Rhumb)

# css - 子 div 作为可滚动父级的视口？

> ID：15351422
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:03.853
> 
> 标签：css

这可能会更好地解释我的问题：

我需要将一个子 div 放置在另一个之上，以便最后一个子 div 仅显示在边缘周围，但是两个子 div 需要一起滚动并保持第一个子 div 的背景静态。这个台面认为视口将是第一个孩子，但第一个和第二个孩子的内容必须在容器内滚动，以便它们可以一起滚动。第一个孩子是视口。

* * *

我有以下 HTML 结构：

```
<div class="container">
    <div class="text">
        <div class="row">Row</div>
        <div class="row">Row</div>
        <div class="row">Row</div>
        <div class="row">Row</div>
        <div class="row">Row</div>
        <div class="row">Row</div>
    </div>
    <div class="bars">
        <div class="a"></div>
        <div class="a"></div>
        <div class="b"></div>
        <div class="c"></div>
        <div class="b"></div>
        <div class="a"></div>
    </div>
</div> 
```

`bars`延伸到页面的宽度，并且div`text`覆盖在它们之上，并在其周围留有边距。我定位每个`bars`div 以便它们与视觉上对应的`row`.

`text`div 被定位为每边的`x`像素，因此它周围有一个边距。这样，您可以看到`bars`它下面的末端。

标记很简单，但我无法弄清楚这个 CSS...

`text`是绝对定位的，因此它可以延伸到带有边距的页面边界。如果其中的内容保持在边界内，这很好，但在这种情况下不是。

**这一切都很难解释，但基本上，这就是问题所在**：我设置`container`为`overflow:scroll`因为我需要`bars`使用`rows`. 由于`text`有一个背景图像，并且被定位以便您可以看到`rows`它下方的末端，因此它必须是`position:absolute`. 但是，当内容超出`text. I can't add the background image to`容器栏的边界时，这`because it would cover the ends of the`不起作用。

那有意义吗？不？这是一个 jsFiddle：http: [//jsfiddle.net/charlescarver/BskaP/2/](http://jsfiddle.net/charlescarver/BskaP/2/)

它仍然没有意义吗？这是一张图片：

![在此处输入图像描述](../Images/2afe2a12d270c41f75fa9a0109c6a423.png)

有任何想法吗？问我一些问题，以便我能更好地解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:15:12.217

你不需要太多的CSS——例如.container。如果我理解正确（而且我不是 100% 确定我理解），您希望 .text div 上的图像保持固定，而页面的其余部分 - 条形图和文本滚动。

您不能将图像放在文本 div 上，因为它会滚动；相反，我建议将图像放在每个 .row 上`position: fixed`，并使用a`padding-bottom:20px`代替边距，以便所有行后面似乎都有一个图像，并且效果是连续的。这会给你我认为你追求的效果

[http://jsfiddle.net/BskaP/5/](http://jsfiddle.net/BskaP/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:12:33.453

您可以使用 jQuery 的`scrollTop()`函数来获取基于滚动的元素位置。再加上一个`scroll()`事件，你应该能够整理出一些东西。

因此，在您的`scroll`事件中添加一些内容，以将行和文本的位置偏移`scrollTop()`.

`scrollTop()`：[http ://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

`scroll`事件：[http ://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

我最初的想法是通过将`rows`and`text`元素组合在一起来避免使用 JavaScript，并*伪造*文本后面的行......但鉴于您的具体情况，我无法想出任何东西......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T01:16:58.440

你应该添加`overflow:auto`到`row`. 这是一个证明它有效的 jsfiddle：http: [//jsfiddle.net/BskaP/3/](http://jsfiddle.net/BskaP/3/) 我在其中添加了一个额外的长行作为示例。

我不知道这是否是你想要的，但我认为它是。

# bash - 如何在 BASH 中获取部分字符串

> ID：15351423
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:04.233
> 
> 标签：bash

我的代码

```
FOO="aaa;bbb;ccc"

echo ${FOO##*;} # Result: ccc
echo ${FOO%%;*} # Result: aaa 
```

如何从 var FOO 获取“bbb”？

```
echo ${FOO???*} # Result: bbb 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:18:18.313

没有明确的运算符。此外，您不能嵌套这些运算符（请参阅[嵌套外壳参数扩展](https://stackoverflow.com/questions/6724056/nested-shell-parameter-expansion)）

所以你应该使用一些临时变量来完成这项工作：

```
FOO="aaa;bbb;ccc"
tmp=${FOO%;*}
tmp=${tmp#*;}
echo $tmp 
```

或者您应该将其转换为数组。

为存档编辑，感谢您的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:45:25.590

根据[jejese的回答](https://stackoverflow.com/a/15351649/302243)，您可以使用`#`and`%`分词结构。

```
FOO="aaa;bbb;ccc"
split=${FOO%;*}
final=${split#*;}
echo $final 
```

产生：

```
bbb 
```

或者，您可以使用`IFS`设置为分号的 bash 字段分隔符变量来根据字段拆分输入。这可能更易于使用，并允许您使用单行代码获取第二个字段的值。

```
FOO="aaa;bbb;ccc"
IFS=";" read field1 field2 field3 <<< "$FOO"
echo $field1 $field2 $field3 
```

产生：

```
aaa bbb ccc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:26:00.243

另一种方式。将 $FOO 分配给位置参数：

```
IFS=';'
set -- $FOO
echo  "$2" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T01:49:22.773

这并不能很好地概括，但是`;`可以通过以下方式提取 3 分隔字段的中间部分：

```
$ shopt -s extglob
$ FOO=aaa;bbb;ccc
$ echo ${FOO//+(${FOO##*;}|${FOO%%;*}|;)}
bbb 
```

将其分解为步骤可以更容易地了解它是如何工作的：

```
$ C=${FOO##*;}     # ccc
$ A=${FOO%%;*}     # aaa
$ echo ${FOO//+($A|$C|;)}  # Removes every occurance of $A, $C, or ; from FOO 
```

# powershell - 根据 firstname lastname 确定 AD 帐户是否存在

> ID：15351425
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:14.017
> 
> 标签：powershell, active-directory

我有一个 txt 文件，其中包含格式为的名称列表

名字姓氏

如何仅通过从此列表中获取内容来检查用户是否存在于 AD 中。我在 AD 中最接近的属性是 displayName，其格式为姓氏、名字。下面不起作用。谢谢

```
get-content "c:\temp\file.txt" |
 foreach {
             if (Get-ADUser -Filter {displayName -like $_}){
                 Write-host "$_ does exist in AD"}
              else {
                   Write-host "$_ does not exist in AD"
                   }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T04:04:46.767

怎么样

```
 get-content "temp.txt" |
     foreach {
    $givenname,$surname = $_ -split ' '
                 if (Get-ADUser -Filter "surname -eq '$surname' -and givenname -eq '$givenname'"){
                     Write-host "$_ does exist in AD"}
                  else {
                       Write-host "$_ does not exist in AD"
                       }

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:19:14.787

这会更好吗？

```
get-content "c:\temp\file.txt" |
 foreach {
         $filter = [scriptblock]::create("DisplayName -like '*$_*'")
         if (Get-ADUser -Filter $filter){
             Write-host "$_ does exist in AD"}
          else {
               Write-host "$_ does not exist in AD"
               }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:00:19.493

我会这样做：

```
$users = Get-Content "C:\temp\file.txt"

Get-ADUsers -Filter * -Properties givenName,sn | % {
  if ( $users -contains ($_.givenName + " " + $_.sn) ) {
    $_.Name + " exists in AD."
  } else {
    $_.Name + " does not exist in AD."
  }
} 
```

# c++ - 使用 vc++ 2012 编译时出现奇怪的错误

> ID：15351426
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:14.697
> 
> 标签：c++, visual-c++

我遇到了一个奇怪的问题。在 Visual Studio 2012 C++ 中编译时出现以下错误：

```
#include "crew_sched.h"

    int var_tab = 7;

    for ( int = 0; i < var_tab; i++) {
        cout << i ;
    } 
```

如您所见，无法识别循环：

```
1>------ Operación Compilar iniciada: proyecto: cs_main_windows, configuración: Debug Win32 ------
1>  modelo_clasico.cpp
1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2059: error de sintaxis : 'for'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2143: error de sintaxis : falta ')' delante de ';'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2143: error de sintaxis : falta ';' delante de '<'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C4430: falta el especificador de tipo; se presupone int. Nota: C++ no admite default-int

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2143: error de sintaxis : falta ';' delante de '++'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2086: 'int i' : nueva definición

1>          d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5) : vea la declaración de 'i'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2059: error de sintaxis : ')'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2143: error de sintaxis : falta ';' delante de '{'

1>d:\visual studio c++\proj_windutygen\proj_windutygen\modelo_clasico.h(5): error C2447: '{' : falta el encabezado de función (¿lista formal de estilo anterior?)

========== Compilar: 0 correctos, 1 incorrectos, 0 actualizados, 0 omitidos ========== 
```

已解决：由于所发表的评论，我看到了问题。我需要做一个功能。非常新手错误。我需要睡觉 :) 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:58:38.837

不允许在函数之外进行赋值、循环等。另一方面，初始化是，所以

```
int var_tab = 7; 
```

在函数之外会很好，但您的实际代码必须在函数中。从一个开始，`int main() { ...your code here...}`然后从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:26:36.310

In for loop `int = 0` should be `int i = 0`

# python - 如何在一个 if 子句中使用多个语句？

> ID：15351428
> 
> 赞同：-1
> 
> 时间：2013-03-12T00:53:16.407
> 
> 标签：python, if-statement

我想在python中做到这一点：

```
if year and year.isdigit() and year > 0: 
```

但它不起作用。语句数量有限制吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:59:57.690

语句的数量不受限制。如果不确切地看到“不起作用”是什么意思，很难说清楚，但是您*可能*遇到的情况是这样的：

```
>>> year = "2013"
>>> year and year.isdigit() and year > 0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: str() > int() 
```

发生这种情况是因为 - 正如错误所说 - Python 不知道如何将字符串与数字进行比较。它只是因为`year > 0`检查而发生，如果你限制它，你会得到同样的错误（或者，在 Python 2 中，它总是为 True - 即使对于像这样的字符串`"-20"`）。如果您将其显式转换为数字来进行检查，这就会消失：

```
>>> int(year) > 0
True 
```

# drupal - 创建下拉菜单

> ID：15351429
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:17.883
> 
> 标签：drupal, drupal-7

完全披露：我觉得这是一个非常愚蠢的问题，但我对 Drupal 是全新的，并且有相当长的时间来完成如此简单的事情。我已经习惯了 Wordpress 社区，所以在 Drupal 上查找内容一直是​​个挑战。与 WP 相比，也许它缺乏帮助，或者只是我还没有完全学会如何寻找（或在哪里寻找）我需要的东西。

无论如何。我已经将设计师的作品切成薄片，并将其放在 Zurb 的基金会之上。我现在正在将其置于 Bartik 主题之上（如果这是一个糟糕的选择，请随时向我指出另一个方向......）。

以下是 Baritk 中菜单的设置方式，我稍作调整（即去掉标题）：

```
<?php if ($main_menu): ?>
            <?php print theme('links__system_main_menu', array(
              'links' => $main_menu,
              'attributes' => array(
                'id' => 'main-menu-links',
                'class' => array('main-nav'),
              )
            )); ?>
        <?php endif; ?> 
```

和

```
<?php if ($secondary_menu): ?>
        <?php print theme('links__system_secondary_menu', array(
          'links' => $secondary_menu,
          'attributes' => array(
            'id' => 'secondary-menu-links',
            'class' => array('links', 'inline', 'clearfix'),
          )
        )); ?> 
```

我已将辅助链接设置为从我设置的主菜单读取，该菜单具有主页面和后续子页面。这是最好的设置，对吧？

如果是这样，合并这两者的最佳 Drupal 式方法是什么？除了分别使用这两者之外，还有更简单的调用、函数等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:52:09.447

对您来说最简单的方法可能是使用[nice menus](http://drupal.org/project/nice_menus)模块。

# html - 保持按钮居中在流畅的图像上

> ID：15351430
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:20.697
> 
> 标签：html, css, compass-sass

最近几天，我尝试将按钮置于流畅图像的中心。到目前为止，位置是固定的和静态的。相关的 HTML 部分如下所示：

```
<ul class="moodlegrid sectionwrap">
  <li>
    <a class="ajax1" href="project1.html">
      <img title="Project 1" src="img/projectblur.jpg" alt="Project 1" />
      <img title="Project 1" src="img/project.jpg" alt="Project 1" />
      <span class="openoverlay">Click</span>
    </a>
  </li>
</ul> 
```

CSS看起来像这样：

```
.moodlegrid{
    li{
        a{
            position: relative;
            display:block;
            width: 100%;
            img:nth-child(1){
                display:block;
            }
            img:nth-child(2){
                display: none;
            }
            span{
                display:none;
            }
        }
        a:hover{    
            img:nth-child(2){
                display: block;
                position: absolute;
                z-index: 100;
                top:0;
                left:0;
            }
            span{
                display: block;
                position: absolute;
                text-align:center;
                top: 37%;
                left: 28%;
                z-index:101;
                @include border-radius(5px, 5px);
                @include box-shadow(black 2px 2px 10px);
            }
        }
    }
}

img{
    width:100%;
    max-width: 100%;
    height:auto !important;
} 
```

在鼠标悬停时，第二个图像和一个按钮应该在第一个图像的顶部居中浮动。问题是如果视口更改最近版本不再起作用并且按钮未居中。以下关于 CSS 技巧的文章有一个很有前途的解决方案：

[以未知为中心](http://css-tricks.com/centering-in-the-unknown/)

该演示工作正常：

[以未知演示为中心](http://codepen.io/rpkoller/pen/AdJDe)

但是它使用了 inline-block 元素，这使得很难对图像进行分层并最终在其顶部显示一个居中的按钮 - 当设置 display:inline-block 属性时，这些元素会一个接一个地显示。还有一个问题，与我的 HTML 相比，演示将子对象与父对象对齐。

有没有办法将上述技术应用于我的问题，或者是否有更好的适合方法？最好的问候拉尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:08:29.183

如果我理解正确，我想你就快到了。

`<a>`需要是`position: relative;`

`<span>`需要是`position: absolute;`

如果`<span>`您设置特定宽度，并应用：

```
width: 100px;
height: 100px;
top: 50%;
left: 50%;
margin-top: -50px /* Half of the height */
margin-left: -50px; /* Half of the width */ 
```

[http://codepen.io/anon/pen/xjcCf](http://codepen.io/anon/pen/xjcCf)

这能解决你想要做的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:13:32.157

嗨，这是什么样子

html

```
<div>
    <h1><span>button</span></h1>
    <img src="imageSample.jpg" alt="" />    
</div> 
```

css

```
div {
    position:relative;
    width:100%;
}
div img {
    max-width:100%;
    width:100%;
}
div h1 {
    width:100px;
    margin:auto;
}
div h1 span {
    position:absolute;
    z-index:999;
    top:200px;
    padding:5px;
    background-color:#fff;
} 
```

工作[演示](http://jsfiddle.net/CX5Dn/4/)

注意：*滚动小提琴，这样你就可以看到效果*

# hadoop - 使用 Hadoop 从两个 URI 中提取信息

> ID：15351434
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:45.827
> 
> 标签：hadoop

假设我在 HDFS 中有一个巨大的稀疏矩阵，`matrixX`另一个在`matrixY`，我想做一个巨大的矩阵乘法并写入`matrixY`. 我可以从 Hadoop 中的两个不同 URI 中提取信息吗？我该怎么做呢？我见过的所有示例都有一个输入目录和一个输出目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:54:10.527

您可以从以下多个来源阅读：

```
MultipleInputs.addInputPath(jobConf, MultipleInputs.addInputPath(jobConf, 
                     new Path(MatixX),       
                     TextInputFormat.class, 
                     ColumnReaderMapper.class);

MultipleInputs.addInputPath(jobConf, 
                     new Path(MatirxY), 
                     TextInputFormat.class, 
                     RowReaderMapper.class); 
```

假设你必须矩阵 A 和 B：

a11 a12 a13

a21 a22 a23

a31 a32 a33

b11 b12 b13

b21 b22 b23

b31 b32 b33

A * B = 总和（a 的行 * b 的列）

如何将矩阵 A 存储为主要行，将矩阵 b 存储为主要列。现在，您可以在下一个映射器中将键设置为 RowReader 中的行号和 Columnreader 中的列号，并将其发送到将进行求和并写入输出的同一个 reducer。您可以进行许多其他优化，但这应该是第一次开始。

# mysql - Mysql + Eager Loading导致ConstraintException

> ID：15351436
> 
> 赞同：0
> 
> 时间：2013-03-12T00:53:54.073
> 
> 标签：mysql, entity-framework

我尝试使用预先加载（一些简单的 Include 语句）加载几个相关实体。但是由于某种奇怪的原因，抛出了 ConstraintException。我不确定这是否是 MySql 连接器或其他地方的错误。

我的架构如下所示： ![在此处输入图像描述](../Images/fdb706d69011b5c08775030cdf1f150e.png)

当我尝试使用此语句加载数据时：

```
CurrentConnection.DynFormPresetSet
.Include("Definitions")
.Include("Definitions.FieldDefs")
.Include("Definitions.FieldDefs.Literals")
.FirstOrDefault(p => p.PresetValue == (int)presetDefinition); 
```

我得到这个例外：

```
[ConstraintException: Diese Eigenschaft kann nicht auf einen NULL-Wert festgelegt werden.]
System.Data.EntityUtil.ThrowPropertyIsNotNullable(String propertyName) +89
System.Data.Objects.DataClasses.StructuralObject.SetValidValue(String value, Boolean isNullable) +24
MyApp.Model.DynFormLiteral.set_Label(String value) in d:\Dev\CSharp\Repository\MyApp.Model\MyEntities.cs:2900
lambda_method(Closure , Shaper ) +341 
```

问题是由`Definitions.FieldDefs.Literals`关系引起的。如果我删除 Literals 上的热切加载，它就可以工作。我检查了 SQL Query 生成的 ResultSet，看起来实体框架试图创建一个 DynFormLiteral，即使没有分配。由于某种奇怪的原因，负责 Literal 的 ID 列不为空。

如果我包括`Definitions.FieldDefs.Validators`而不是`Literals`该语句也有效。但是如果我包含了`Literals`并且`Validators`SQL 语句是完全无效的：

```
[MySqlException (0x80004005): Unknown column 'Extent1.Id' in 'where clause']
MySql.Data.MySqlClient.MySqlStream.ReadPacket() +383
MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId) +116 
```

我无法真正解释那里发生了什么，但我知道这是错误的！有没有人遇到过类似的问题或知道如何解决这个问题？

我目前的设置是：

*   MariaDB 5.5.29
*   MySQL 连接器 6.6.5
*   实体框架 4
*   [按层次结构生成表](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87)

# android - 未在 ListView 的标题中显示 LinearLayout 样式

> ID：15351446
> 
> 赞同：0
> 
> 时间：2013-03-12T00:55:04.890
> 
> 标签：android, android-layout, header, android-listview, styles

我有一个`ListView`带标题的。在此标头中，a`LinearLayout`具有预定义的样式。问题是这个布局没有显示那种风格。

标头代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="?blueHardBackground"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dip"
    android:layout_marginRight="5dip"
    android:layout_marginTop="2dp"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <Spinner
            android:id="@+id/spinnerCiudad"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawSelectorOnTop="true" />

        <Spinner
            android:id="@+id/spinnerCategoria"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:drawSelectorOnTop="true" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/textNombreElemento"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:textSize="6pt"
            android:typeface="serif" >

            <requestFocus />
        </EditText>

        <ImageView
            android:id="@+id/botonFiltrar"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:contentDescription="Mostrar"
            android:src="@drawable/buscar_n" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/capaNumResultados"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="1"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textNumResultados"
            style="?textRegular"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:text="" />
    </LinearLayout>

</LinearLayout> 
```

它应该以蓝色圆角显示在中心，但它显示为透明且没有样式，并且位于左侧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:04:44.480

我相信你想要

```
style="?style/blueHardBackground"> 
```

在你的`LinearLayout`而不是

```
style="?blueHardBackground"> 
```

你错过了`style`“？”之后 告诉 xml 在哪里查找名称`blueHardBackground`

***[文档中的此链接](http://developer.android.com/guide/topics/resources/accessing-resources.html)*** 解释了有关访问`resources`

# php - 将用户重定向到另一个页面

> ID：15351451
> 
> 赞同：0
> 
> 时间：2013-03-12T00:55:21.817
> 
> 标签：php

我有这个表格：

我想知道当用户选择重定向到`directeur`时是否有某种方式，如果他选择其他值，他将被重定向到该值的页面。`niveau option field``directeur's page`

我知道使用的方法，`JavaScript`但我必须只使用`PHP`, 并且在页面所在的同一页面中对该表单进行所有操作。

我试过这个：

```
if(isset($_POST['submit']))
   {
      if($_POST['niveau'] == 'directeur')
          header('Location: directeur.php');

   } 
```

但这会将用户重定向到没有`$_POST`值的页面。我知道在那里我可以使用 url 发送一些值并检索它们使用`$_GET`，但我必须只使用`$_POST`.

那么有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:59:31.763

是的，使用[`$_SESSION`](http://www.php.net/manual/en/reserved.variables.session.php)：

```
session_start();
if(isset($_POST['submit']))
{
    if($_POST['niveau'] == 'directeur')
        $_SESSION['info'] = $_POST;
        header('Location: directeur.php');
    }
} 
```

在 directeur.php 中：

```
session_start();
$niveau = $_SESSION['info']; 
```

# android - 从我的适配器中刷新 ExpandableListView

> ID：15351452
> 
> 赞同：4
> 
> 时间：2013-03-12T00:55:25.763
> 
> 标签：android, expandablelistview, notifydatasetchanged

我只发现了一个类似的问题，但对我没有帮助。我希望你能帮助我，因为我被困住了。

这是我的自定义适配器（仅相关部分）：

`MyExpandableListAdapter`：

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {

    //...

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View view, ViewGroup parent) {     
        ChildInfo childInfo = (ChildInfo) getChild(groupPosition, childPosition);
        if (view == null) {
            LayoutInflater infalInflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = infalInflater.inflate(R.layout.prisustva_detaljno_child_row,
                    null);
        }

        Button delete = (Button) view.findViewById(R.id.delete);
        delete.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                RelativeLayout Rl = (RelativeLayout) v.getParent();
                TextView id = (TextView) Rl.findViewById(R.id.id_prisustvo);
                PrisustvaAdapter deleteByID = new PrisustvaAdapter(context);

                deleteByID.openToWrite();
                deleteByID.openToRead();
                deleteByID.deleteID(id .getText().toString());
                deleteByID.close();

                Toast.makeText(context, "Successfully deleted!",
                        Toast.LENGTH_LONG).show();
            }
        });

        // ...
        return view;
    }

// ...
} 
```

就像你可以看到我的每个子行中都有一个按钮`ExpandableListView`。当我单击该按钮时，它会触发我的数据库中的删除过程，正如您还可以看到我必须从我的适配器中进行删除，因为只有在那里我才能为子行内的按钮创建单击事件。`ExpandableListView`我想知道当我从数据库中删除数据时如何刷新我的？我必须从适配器内部进行吗？如果没有，有什么替代方案？

PS：如果你们需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T01:04:59.817

如果没有看到您的其余代码（您如何实例化您的 ），我无法确定，但是在您的方法结束时`BaseExpandableAdapter`调用应该可以解决问题。`notifyDatasetChanged()``onClick()`

# elasticsearch - 在没有预定义架构的情况下使用 ngrams 而不是通配符

> ID：15351457
> 
> 赞同：0
> 
> 时间：2013-03-12T00:55:45.993
> 
> 标签：elasticsearch

我最近发现我不应该在弹性搜索查询中使用通配符。相反，有人告诉我应该使用 ngrams。在我的实验中，这非常有效。我想做的是能够告诉 Elasticsearch 对所有映射字段（或适合特定模式的映射属性）使用 ngram。例如：

```
CURL -XPUT 'http://localhost:9200/test-ngram-7/' -d '{
     "mappings": {
         "person": {
             "properties": {
                 "name": {
                     "type": "string",
                     "analyzer": "partial"
                 }
             }
         }
     },
     "settings": {
         "analysis": {
             "filter": {
                 "lb_ngram": {
                     "max_gram": 10,
                     "min_gram": 1,
                     "type": "nGram"
                 }
             },
             "analyzer": {
                 "partial": {
                     "filter": [
                         "standard",
                         "lowercase",
                         "asciifolding",
                         "lb_ngram"
                     ],
                     "type": "custom",
                     "tokenizer": "standard"
                 }
             }
         }
     }
 }' 
```

现在，当我添加此映射时：

```
CURL -XPUT 'http://localhost:9200/test-ngram-7/person/1' -d '{
 "name" : "Cobb",
 "age" : 31
 }' 
```

我可以轻松查询“obb”并获得部分结果。在我的应用程序中，我事先不知道人们将映射哪些领域。我显然可以在客户端将其短路并在发布文档之前声明我的映射，但如果我能做这样的事情会非常酷：

```
CURL -XPUT 'http://localhost:9200/test-ngram-7/' -d '{
     "mappings": {
         "person": {
             "properties": {
                 "_default_": {
                     "type": "string",
                     "analyzer": "partial"
                 }
             }
         }
     },
     "settings": {
         "analysis": {
             "filter": {
                 "lb_ngram": {
                     "max_gram": 10,
                     "min_gram": 1,
                     "type": "nGram"
                 }
             },
             "analyzer": {
                 "partial": {
                     "filter": [
                         "standard",
                         "lowercase",
                         "asciifolding",
                         "lb_ngram"
                     ],
                     "type": "custom",
                     "tokenizer": "standard"
                 }
             }
         }
     }
 }' 
```

请注意，我使用的是“*默认*”。如果我能像 "name.*" 那样做也很酷，并且所有以 name 开头的属性都会以这种方式被过滤。我知道弹性搜索支持*默认*和通配符。*，所以我希望我只是做错了。

简而言之，我希望在*自动*创建映射时通过 ngram 过滤器运行新属性，而不是使用映射 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:49:03.357

您可以设置一个 dynamic_template，有关信息，请参阅[http://www.elasticsearch.org/guide/reference/mapping/root-object-type.html](http://www.elasticsearch.org/guide/reference/mapping/root-object-type.html)。

使用它，您可以根据匹配、模式匹配等为未知字段创建映射模板，并为这些模板应用分析器等。与设置默认分析器相比，这将为您提供更细粒度的行为控制。默认分析器通常应用于“小写”和“asciifolding”等基本内容，但如果您确定要将 nGram 应用于所有字段，它肯定是一种有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:29:09.363

所以，我发现的一个解决方案是设置一个“默认”分析器。文档说

> 默认分析器 分析器以逻辑名称注册。然后可以从映射定义或某些 API 中引用它。如果没有定义，则使用默认值。有一个选项可以定义在无法派生时默认使用哪些分析器。
> 
> 默认逻辑名称允许配置一个分析器，该分析器将用于索引和搜索 API。default_index 逻辑名可用于配置仅在索引时使用的默认分析器，而 default_search 可用于配置将仅在搜索时使用的默认分析器。

这是一个例子：

```
CURL -XPUT 'http://localhost:9200/test-ngram-7/' -d '{

     "settings": {
         "analysis": {
             "filter": {
                 "lb_ngram": {
                     "max_gram": 10,
                     "min_gram": 1,
                     "type": "nGram"
                 }
             },
             "analyzer": {
                 "default": {
                     "filter": [
                         "standard",
                         "lowercase",
                         "asciifolding",
                         "lb_ngram"
                     ],
                     "type": "custom",
                     "tokenizer": "standard"
                 }
             }
         }
     }
 }' 
```

然后这个查询将起作用：

```
CURL -XGET 'http://localhost:9200/test-ngram-7/person/_search' -d '{
  "query":
 {
     "match" : {
         "name" : "obb"
     }
 }
 }' 
```

回答我自己的问题，因为我仍然对这是否是“正确”的方法感兴趣。

# python-2.7 - PyAIML 不加载启动

> ID：15351472
> 
> 赞同：4
> 
> 时间：2013-03-12T00:57:28.330
> 
> 标签：python-2.7, aiml

我正在开始一个实现**PyAIML**的 Python 项目，我编写了以下代码来为我的项目创建大脑：

```
import aiml

k=aiml.Kernel()
k.learn("std-startup.xml")
k.respond("LOAD AIML B")
k.saveBrain("jarvis.brn") 
```

当我运行程序时，我收到此错误：`WARNING: No match found for input: LOAD AIML B`

我了解我需要下载**AIML**集才能开始开发。所以我做到了，但我被困在那里。

请帮忙。我是一个菜鸟程序员，所以不要因为这个愚蠢的错误而对我粗暴。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T01:05:26.843

如果您传递的文件不存在，该`.learn()`方法不会抛出错误，我猜您正在尝试学习模式，`"std-startup.xml"`而您的目录中没有此文件。

确保文件**std-startup.xml**位于运行脚本的目录中。您的工作目录中还应该有一个名为**standard**的目录，其中包含标准的目标文件集。基本上你的目录应该是这样的：

```
 mydir/my_script.py
 mydir/std-startup.xml
 mydir/standard/a-bunch-of-std-aiml-files.aiml 
```

这些文件可以在[pyaiml source forge 站点](http://sourceforge.net/projects/pyaiml/files/)上的“Other Files/Standard AIML Set/”文件夹中找到。转到该文件夹​​并下载其中一个 tarball 或 zip。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T05:40:47.447

一些东西：

1.  如果您的 AIML 加载正确，pyAIML 将响应如下内容： `Loading std-startup.aiml... done (1.00 seconds)` 如果找不到要加载的文件，它不一定会抛出错误，因此如果您没有看到此行，则 pyAIML 尚未加载AIML 文件。

2.  我也没有在 sourceforge 目录中看到“std-startup.xml”，但这不重要。您加载的只是任何允许您测试内核的 AIML 文件。尝试在 /aiml 目录中加载“self-test.aiml”文件。（仔细检查以确保代码中的文件后缀是 .aiml 而不是 .xml）

3.  `k.respond()`用于给机器人一些输入，“LOAD AIML B”只是一个测试短语。一旦你加载了'self-test.aiml'试试k.respond('test date')，你应该得到

`The date is Wed Mar 13 01:37:07 2013`作为回应。

# linux - 以 root 身份到远程系统的无密码 ssh

> ID：15351491
> 
> 赞同：0
> 
> 时间：2013-03-12T00:59:36.673
> 
> 标签：linux, bash, ssh

我需要 ssh（以 root 身份）到远程服务器并执行一些 root 级别的操作。我将从没有 root 权限的本地服务器 ssh。鉴于此选项，是否可以使用 (rsa) 密钥对远程系统执行无密码 ssh？

本地和远程服务器运行 linux。

顺便说一句，我在本地服务器上生成了密钥（ssh-keygen -t rsa）。将公钥复制到远程服务器的 .ssh/authorized_keys 文件。**但是它仍然不断提示输入密码。**如果本地和远程用户名（非 root）匹配，则相同的设置可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:15:52.400

1 检查您的 /etc/ssh/sshd_config 文件是否有“PermitRootLogin yes”。

2 将以下 Shell 代码存储到 nopasswd.sh 中：

```
#!/bin/sh

scp ~/.ssh/id_dsa.pub  $1@$2:~/
ssh $1@$2 "cat ~/id_dsa.pub  >> ~/.ssh/authorized_keys; chmod 644 ~/.ssh/authorized_keys; exit" 
```

3 按以下步骤使用它：

```
$ssh-keygen -t dsa
$ ./nopasswd.sh root REMOTE_HOST 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:05:40.640

是的。SSH 不会在不同系统上的帐户名称之间建立连接，因此如果您有有效的密钥对，您可以以非 root 身份 ssh 到 root。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:21:51.183

在 ~/.ssh/config 中：

```
Host rootRemoteSystem
HostName RemoteSystem
User root 
```

然后：

```
ssh-copy-id rootRemoteSystem 
```

然后你可以这样做：

```
ssh rootRemoteSystem 
```

# indexing - 将 SQS 与相关数据一起使用 (Haystack)

> ID：15351499
> 
> 赞同：2
> 
> 时间：2013-03-12T00:59:59.907
> 
> 标签：indexing, many-to-many, django-haystack

我有两个用于段落模型的字段，其中一个是 ManyToMany 字段。

```
class Tag(models.Model):
    tag = models.CharField(max_length=500)
    def __unicode__(self):
        return self.tag
admin.site.register(Tag)

class Paragraph(models.Model):
    article = models.ForeignKey(Article)
    text = models.TextField()
    tags = models.ManyToManyField(Tag)
    def __unicode__(self):
        return "Headline: " + self.article.headline + " Tags: " +  ', '.join([t.tag for t in self.tags.all()])
admin.site.register(Paragraph) 
```

我的 .txt 文件反映了与索引标签的多对多关系-

```
{{object.text}}
{% for tag in object.tags.all %}
{{tag.tag}}
{% endfor %} 
```

然后，我的 views.py 使用 SQS 搜索所有标签（我想在包含文本字段之前先完成此操作）并检索这些标签。所以在这种情况下，查询是“政治”——

```
def politics(request):
    paragraphs = []
    sqs = SearchQuerySet().filter(tag="Politics")
    paragraphs = [a.object for a in sqs[0:10]]
    return render_to_response("search/home_politics.html",{"paragraphs":paragraphs},context_instance=RequestContext(request)) 
```

编辑：和我的 search_indexes.py

```
class ParagraphIndex(indexes.SearchIndex, indexes.Indexable):
    text= indexes.CharField(document=True, use_template=True)
    tags= indexes.CharField(model_attr='tags')
    def get_model(self):
        return Paragraph
    def index_queryset(self):
        return self.get_model().objects
    def load_all_queryset(self):
        # Pull all objects related to the Paragraph in search results.                                                                                                                    
        return Paragraph.objects.all().select_related() 
```

但是，即使一些段落具有“政治”标签，这也不会检索任何内容。我在这里遗漏了什么还是应该以另一种方式处理相关数据？我是 Haystack 的初学者，因此我们将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T09:00:44.447

所以这是一篇非常[有用的文章](https://groups.google.com/forum/?fromgroups=#!msg/django-haystack/7EfL3obVIx0/2bT0Y-D1OcEJ)，帮助我解决了这个问题。

根据这篇文章，这就是我的 search_indexes.py 现在的样子：

```
class ParagraphIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    tags = indexes.MultiValueField()

    def prepare_tags(self,object):
        return [tag.tag for tag in object.tags.all()]

    def get_model(self):
        return Paragraph

    def index_queryset(self):
        return self.get_model().objects

    def load_all_queryset(self):
        # Pull all objects related to Paragraph in search results.                                                                                  
        return Paragraph.objects.all().select_related() 
```

和我的views.py：

```
def politics(request):
    paragraphs = []
    sqs = SearchQuerySet().filter(tags='Politics')
    paragraphs = [a.object for a in sqs[0:10]]
    return render_to_response("search/home.html",
            {"paragraphs":paragraphs},
            context_instance=RequestContext(request)) 
```

我正在为引擎使用elasticsearch。希望这可以帮助！

# c# - 解码 Base64 和 Inflate Zlib 压缩的 XML

> ID：15351501
> 
> 赞同：2
> 
> 时间：2013-03-12T01:00:07.550
> 
> 标签：c#, json, base64, zlib

抱歉，这篇文章很长，会尽量缩短。

我正在使用一个 json API（当然它的文档为零），它返回如下内容：

```
{
uncompressedlength: 743637,
compressedlength: 234532,
compresseddata: "lkhfdsbjhfgdsfgjhsgfjgsdkjhfgj"
} 
```

数据（在本例中为 xml）被压缩，然后是我试图提取的 base64 编码数据。我所拥有的只是他们用 perl 编写的用于解码的演示代码：

```
use Compress::Zlib qw(uncompress);
use MIME::Base64  qw(decode_base64);
my $uncompresseddata = uncompress(decode_base64($compresseddata)); 
```

看起来很简单。

我尝试了多种方法来解码 base64：

```
 private string DecodeFromBase64(string encodedData)
    {
        byte[] encodedDataAsBytes = System.Convert.FromBase64String(encodedData);
        string returnValue = System.Text.Encoding.Unicode.GetString(encodedDataAsBytes);
        return returnValue;
    }

    public string base64Decode(string data)
    {
        try
        {
            System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();
            System.Text.Decoder utf8Decode = encoder.GetDecoder();

            byte[] todecode_byte = Convert.FromBase64String(data);
            int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
            char[] decoded_char = new char[charCount];
            utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
            string result = new String(decoded_char);
            return result;
        }
        catch (Exception e)
        {
            throw new Exception("Error in base64Decode" + e.Message);
        }
    } 
```

我曾尝试使用 Ionic.Zip.dll (DotNetZip?) 和 zlib.net 来增加 Zlib 压缩。但是一切都出错了。我正在尝试找出问题出在哪里。是 base64 解码还是 Inflate？

使用 zlib 进行膨胀时总是出错：使用 zlib.net 时出现错误的幻数错误，使用 DotNetZip 时出现“状态错误（存储块长度无效）”：

```
string decoded = DecodeFromBase64(compresseddata);
string decompressed = UnZipStr(GetBytes(decoded));

 public static string UnZipStr(byte[] input)
    {

        using (MemoryStream inputStream = new MemoryStream(input))
        {
            using (Ionic.Zlib.DeflateStream zip =
              new Ionic.Zlib.DeflateStream(inputStream, Ionic.Zlib.CompressionMode.Decompress))
            {
                using (StreamReader reader =
                  new StreamReader(zip, System.Text.Encoding.UTF8))
                {
                    return reader.ReadToEnd();
                }
            }
        }
    } 
```

阅读此内容后：http: [//george.chiramattel.com/blog/2007/09/deflatestream-block-length-does-not-match.html](http://george.chiramattel.com/blog/2007/09/deflatestream-block-length-does-not-match.html) 并听取其中一条评论。我将代码更改为：

```
MemoryStream memStream = new MemoryStream(Convert.FromBase64String(compresseddata));
memStream.ReadByte();
memStream.ReadByte();
DeflateStream deflate = new DeflateStream(memStream, CompressionMode.Decompress);
string doc = new StreamReader(deflate, System.Text.Encoding.UTF8).ReadToEnd(); 
```

它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:58:55.190

这是罪魁祸首：

[http://george.chiramattel.com/blog/2007/09/deflatestream-block-length-does-not-match.html](http://george.chiramattel.com/blog/2007/09/deflatestream-block-length-does-not-match.html)

通过跳过前两个字节，我能够将其简化为：

```
MemoryStream memStream = new MemoryStream(Convert.FromBase64String(compresseddata));
memStream.ReadByte();
memStream.ReadByte();
DeflateStream deflate = new DeflateStream(memStream, CompressionMode.Decompress);
string doc = new StreamReader(deflate, System.Text.Encoding.UTF8).ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:08:12.843

首先，用于 `System.IO.Compression.DeflateStream`重新膨胀数据。您应该能够使用 a`MemoryStream`作为输入流。您可以使用`byte[]`.`Convert.FromBase64String`

尝试将 base64 结果转换为给定编码时，您可能会遇到各种麻烦；直接使用原始数据进行 Deflate。

# ios - 添加贴纸时来自 CgImageRef 的 UIImage

> ID：15351503
> 
> 赞同：0
> 
> 时间：2013-03-12T01:00:31.553
> 
> 标签：ios, uiimage, core-image, ciimage

```
UIImage *sticky = [UIImage imageNamed:@"Radio.png"];
[_imgViewSticky setImage:sticky];
CIImage *outputImage = [self.originalImage CIImage];
CIContext *context = [CIContext contextWithOptions:nil];
CGImageRef cgImg = [context createCGImage:outputImage fromRect:[outputImage extent]];
float widthRatio = [outputImage extent].size.width / 320;
float heighRatio = [outputImage extent].size.height / 480;
CGPoint cgStickyPoint = CGPointMake(_imgViewSticky.frame.origin.x * widthRatio, _imgViewSticky.frame.origin.y * heighRatio);

cgImg = [self setStickyForCGImage:cgImg withPosition:cgStickyPoint]; 
```

最后一行返回一个 CGImageRef 对象。

我将值分配给最终图像，如下所示：

`UIImage *finalImage = [UIImage ImageWithCGImageRef:cgImg];`

但是我没有得到图像。任何想法为什么？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:51:04.077

我注意到您的 CIContext 没有收到任何绘图，这可能是您没有获得图像的原因。我不清楚你想要什么，但这段代码会将一个 UIImage 叠加在另一个 UIImage 之上：

```
UIGraphicsBeginImageContextWithOptions(backgroundImage.size, NO, 0.0); //Create an image context
[backgroundImage drawInRect:CGRectMake(0, 0, backgroundImage.size.width, backgroundImage.size.height)]; //Draw the first UIImage
[stickerImage drawInRect:stickerRect]; //Draw the second UIImage wherever you want on top of the first image
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext(); //Get the final UIImage result 
```

# ios - 设备上的 MTAudioProcessingTap 问题

> ID：15351507
> 
> 赞同：4
> 
> 时间：2013-03-12T01:01:42.720
> 
> 标签：ios, core-audio

我正在尝试根据此博客条目中的教程创建一个 MTAudioProcessingTap - [http://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/](http://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/)

问题在于使用各种音频格式。我已经能够使用 M4A 成功创建一个水龙头，但它不适用于 MP3。对我来说甚至更陌生 - 代码可以在两种格式的模拟器上运行，但不能在设备上运行（只有 m4a 有效）。我在我的进程块中收到 OSStatusError 代码 50，如果我尝试使用 AudioBufferList 数据，我将无法访问。我正在使用的点击设置和回调如下。进程块似乎是罪魁祸首（我认为），但我不知道为什么。

**更新**- 似乎在休息了一段时间后第一次非常零星地工作，但只是第一次。我感觉我的音频文件有某种锁定。有谁知道在 unprepare 块中应该做什么来清理？

取消准备块 -

```
void unprepare(MTAudioProcessingTapRef tap)
{
NSLog(@"Unpreparing the Audio Tap Processor");
} 
```

进程块（将得到 OSStatus 错误 50） -

```
void process(MTAudioProcessingTapRef tap, CMItemCount numberFrames,
         MTAudioProcessingTapFlags flags, AudioBufferList *bufferListInOut,
         CMItemCount *numberFramesOut, MTAudioProcessingTapFlags *flagsOut)
{
OSStatus err = MTAudioProcessingTapGetSourceAudio(tap, numberFrames, bufferListInOut,
                                                  flagsOut, NULL, numberFramesOut);
if (err) NSLog(@"Error from GetSourceAudio: %ld", err);
} 
```

点击设置 -

```
NSURL *assetURL = [[NSBundle mainBundle] URLForResource:@"DLP" withExtension:@"mp3"];
assert(assetURL);

// Create the AVAsset
AVAsset *asset = [AVAsset assetWithURL:assetURL];
assert(asset);

// Create the AVPlayerItem
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
assert(playerItem);

assert([asset tracks]);
assert([[asset tracks] count]);

self.player = [AVPlayer playerWithPlayerItem:playerItem];
assert(self.player);

// Continuing on from where we created the AVAsset...
AVAssetTrack *audioTrack = [[asset tracks] objectAtIndex:0];
AVMutableAudioMixInputParameters *inputParams = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:audioTrack];

// Create a processing tap for the input parameters
MTAudioProcessingTapCallbacks callbacks;
callbacks.version = kMTAudioProcessingTapCallbacksVersion_0;
callbacks.clientInfo = (__bridge void *)(self);
callbacks.init = init;
callbacks.prepare = prepare;
callbacks.process = process;
callbacks.unprepare = unprepare;
callbacks.finalize = finalize;

MTAudioProcessingTapRef tap;
// The create function makes a copy of our callbacks struct
OSStatus err = MTAudioProcessingTapCreate(kCFAllocatorDefault, &callbacks,
                                          kMTAudioProcessingTapCreationFlag_PostEffects, &tap);
if (err || !tap) {
    NSLog(@"Unable to create the Audio Processing Tap");
    return;
}
assert(tap);

// Assign the tap to the input parameters
inputParams.audioTapProcessor = tap;
// Create a new AVAudioMix and assign it to our AVPlayerItem
AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
audioMix.inputParameters = @[inputParams];
playerItem.audioMix = audioMix;

// And then we create the AVPlayer with the playerItem, and send it the play message...
[self.player play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T04:20:27.927

这显然是 6.0 中的一个错误（我的设备仍在运行）。模拟器是 6.1

将设备升级到 6.1.2，错误消失了。

# javascript - 使用 WScript.shell activeX 执行命令行

> ID：15351508
> 
> 赞同：6
> 
> 时间：2013-03-12T01:02:04.303
> 
> 标签：javascript, cmd, activex

我正在使用 WScript.shell activeX 调用 .exe 文件。该文件是 wkhtmltopdf.exe，用于将 HTML 页面转换为 .pdf。当我在代码中调用 C:\wkhtmltopdf.exe 时，一切都运行良好。它运行然后正确关闭。但我的问题是您需要从 cmd 使用程序名称运行它，然后是您正在阅读的 HTML 文件名，然后是您希望将其创建为的 .pdf 名称。

例如：

```
c:\wkhtmltopdf.exe c:\PDFTestPage.html c:\TEST.pdf 
```

这将调用 wkhtmltopdf.exe，读取 c:\PDFTestPage.html，然后创建 c:\TEST.pdf。当我将它输入cmd时工作正常。

有谁知道一个activeX，它不仅会运行和.exe，而且会实际执行命令行？

这是我目前正在使用的代码。

```
function callShellApplication(){
var objShell = new ActiveXObject("WScript.shell");
objShell.run('"c:\wkhtmltopdf.exe"');
} 
```

真的希望它是以下。

```
function callShellApplication(){
var objShell = new ActiveXObject("WScript.shell");
objShell.run('"c:\wkhtmltopdf.exe c:\PDFTestPage.html c:\TEST.pdf"');
} 
```

还有旁注。出于某种原因，我无法从绝对路径启动 .exe。我必须移动到目录，然后输入 wkhtmltopdf.exe。填充路径为：

```
C:\Program Files (x86)\wkhtmltopdf\wkhtmltopdf.exe 
```

我真的只使用 UNIX，所以我不确定路径中的空格。我可以用空格做一个 chdir，但在执行它时我不能使用填充路径。任何信息都有帮助。先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T01:24:22.380

根据以下：

[http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)

您应该能够直接将命令作为`strCommand`参数的一部分传递，最好去掉包裹整个命令和参数的额外引号：

```
function callShellApplication(){
  var objShell = new ActiveXObject("WScript.shell");
  objShell.run('c:\wkhtmltopdf.exe c:\PDFTestPage.html c:\TEST.pdf');
} 
```

此外，您应该能够通过将每个项目括在引号中来处理路径中的空格，如下所示：

```
function callShellApplication(){
  var objShell = new ActiveXObject("WScript.shell");
  objShell.run('"C:\Program Files (x86)\wkhtmltopdf\wkhtmltopdf.exe" "c:\PDFTestPage.html" "c:\TEST.pdf"');
} 
```

您还应该记住您是否愿意`bWaitOnReturn`，以及`intWindowStyle`您需要哪些（某些可执行文件可能会受益于特定样式）。

也只是作为一个警告 - 我已经有一段时间没有使用了`WScript.shell`- 但你可能需要在你的路径中转义你的反斜杠。因此，路径可能需要如下所示：

```
objShell.run('"C:\\Program Files (x86)\\wkhtmltopdf\\wkhtmltopdf.exe"'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-20T16:27:04.607

对于遇到此问题的其他人，我有一个类似（但略有不同）的问题，我认为我会分享。

我也想使用`ActiveXObject("WScript.shell`. 我需要运行一个`.bat`将 Google Chrome 启动到特定 URL 的脚本。

我的JS如下：

```
var objShell = new ActiveXObject("WScript.shell");
objShell.run('"C:\\Scripts\\MyChromeBat.bat" MY_URL'); 
```

这将正确启动我的`.bat`脚本，这非常简单：

```
start "" chrome.exe %1 
```

我遇到的问题是`MY_URL`包含一些查询参数，当我使用上面的 JS 时，查询参数会在一定程度上被剥离。所以当我试图打开

```
http://localhost:8080/webapp/mypage.html?param1=test&param2=test2 
```

它实际上会打开

```
http://localhost:8080/webapp/mypage.html?param1 
```

修复结果很简单——我不得不`MY_URL`用引号括起来。所以我修改了这条线

```
objShell.run('"C:\\Scripts\\MyChromeBat.bat" MY_URL'); 
```

成为

```
objShell.run('"C:\\Scripts\\MyChromeBat.bat" "MY_URL"'); 
```

# python - 在 Python 中打印随机选择的变量

> ID：15351509
> 
> 赞同：1
> 
> 时间：2013-03-12T01:02:08.977
> 
> 标签：python, python-2.7

我正在为游戏 Heroscape 做一个掷骰子（所以我们可以和离岸的朋友一起玩）。heroscape 的骰子有 6 个面。3 面显示头骨，1 面有符号，2 面有盾牌。

我已经让它随机生成其中的 1 个，但我希望它在最后列出结果（即你滚动了 6 个头骨、2 个符号和 4 个盾牌）。

这是我当前的代码：

```
loop = 1
while loop == 1:
    diceChoose = raw_input('Pick your dice. (Press 1 for a D20 roll, and 2 for attack /defense dice.) ')
    if diceChoose == ('1'):
        import random
        for x in range(1):
            print random.randint(1,21),
            print
        raw_input("YOUR DICE ROLL(S) HAVE COMPLETED. PRESS ANY KEY TO CONTINUE.")
    elif diceChoose == ('2'):
        diceNo = int(raw_input('How many dice do you need? '))
        testvar = 0
        diceRoll = ['skull', 'skull', 'skull', 'symbol', 'shield', 'shield']
        from random import choice

        while testvar != diceNo:
            print choice(diceRoll)
            testvar = testvar + 1
            if testvar == diceNo:
                print ('YOUR DICE ROLLS HAVE COMPLETED')

        raw_input("PRESS ANY KEY TO CONTINUE.")

    else: loop = raw_input('Type 1 or 2\. Nothing else will work. Press 1 to start the program again.') 
```

我尝试的是一堆 if 语句，但我已经意识到，如果我尝试 print ('diceRoll')，我得到的只是整个数组，而不是随机选择的骰子。

我不确定如何在每个 diceRoll 发生时保存它，因此我可以稍后打印该数字。

（我的想法是

```
if diceRoll == 'skull' skullNo +1 
print('skullNo')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:29:41.527

我认为你可以使用标准库中`Counter`的模块来解决这个问题的一个好的数据结构。`collections`它有点像字典，将对象映射到整数。但是，您可以为其添加值，这将增加它们的计数。

所以，我会这样做：

```
from random import choice
from collections import Counter

diceNo = int(raw_input('How many dice do you need? '))
diceValues = ['skull', 'skull', 'skull', 'symbol', 'shield', 'shield']

counter = Counter()
counter.update(choice(diceValues) for _ in range(diceNo))

print("Rolls:")
for value, count in counter.items():
    print("{}: {}".format(value, count))

print ('YOUR DICE ROLLS HAVE COMPLETED')
raw_input("PRESS ANY KEY TO CONTINUE.") 
```

关键线是`counter.update(choice(diceValues) for _ in range(diceNo))`。这使用“生成器表达式”调用`counter.update`，生成`diceNo`随机滚动结果。如果您还没有了解生成器表达式，我建议您检查一下，因为它们非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:31:42.183

欢迎来到 SO。我更改了您的代码的一些部分，以使它们更类似于*我的*风格 - 如果有帮助，请随时将它们改回来。

将循环代码更改为：

```
while True: 
```

这完成了同样的事情，除了它更pythonic。

然后，在一个标签中并告诉设置数字值`skull, symbol`和`shield`。在这种情况下，我们将其设置为 0。

```
skull = 0
symbol = 0
shield = 0 
```

接下来，将下面的代码更改`diceNo = int(raw_input('How many dice do you need? '))`为此。它应该缩进一个。

```
 for x in xrange(diceNo):
        import random
        choice = random.randint(1,6) 

        if choice == 1:
            skull +=1
        elif choice == 2:
            skull +=1
        elif choice == 3:
            skull +=1
        elif choice == 4:
            symbol =+ 1
        elif choice == 5:
            shield += 1
        elif choice == 6:
            shield += 1 
```

此代码重复所需的骰子数量。然后，我将 1 添加到与该名称关联的变量中。

在其正下方，我们向用户显示信息。

```
print "You rolled %d skulls, %d symbols, and %d shields. Congrats." % (skull, symbol, shield) 
```

由于您似乎对代码有疑问，因此我决定将其完整发布。

```
while True:

    #Here we set the variables

    skull = 0
    symbol = 0
    shield = 0

    diceChoose = raw_input('Pick your dice. (Press 1 for a D20 roll, and 2 for attack /   defense dice.) ')
    if diceChoose == '1':
        import random
        for x in range(1):
            print random.randint(1,21),
            print
        raw_input("YOUR DICE ROLL(S) HAVE COMPLETED. PRESS ANY KEY TO CONTINUE.")
    elif diceChoose == '2':
        diceNo = int(raw_input('How many dice do you need? '))

        for x in xrange(diceNo):
            import random
            choice = random.randint(1,6) 

            if choice == 1:
                skull +=1
            elif choice == 2:
                skull +=1
            elif choice == 3:
                skull +=1
            elif choice == 4:
                symbol =+ 1
            elif choice == 5:
                shield += 1
            elif choice == 6:
                shield += 1

        print "You rolled %d skulls, %d symbols, and %d shields. Congrats." % (skull, symbol, shield)

        raw_input("PRESS ANY KEY TO CONTINUE.")

    else: loop = raw_input('Type 1 or 2\. Nothing else will work. Press 1 to start the program again.') 
```

# java - Java Space Invader 子弹运动

> ID：15351514
> 
> 赞同：0
> 
> 时间：2013-03-12T01:03:40.067
> 
> 标签：java, swing, animation, user-interface, jpanel

我正在尝试编写一个 Space Invader 游戏来提高我在 AP 计算机科学中学到的技能。我遇到了一个问题。当我按下空格键（发射按钮）时，子弹移动到顶部的动画不可见。相反，子弹只是出现在您开火的屏幕顶部。这是包含子弹发射的代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JPanel;
import javax.swing.Timer;

public class AlienInvader extends JPanel implements KeyListener, ActionListener {

    Constants constant = new Constants();
    Timer timer = new Timer(5, this);
    Sprite images = new Sprite();

    public void update() {
        timer.start();
        images.loadImage();
        addKeyListener(this);
        setFocusable(true);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.BLACK);
        g.fillRect(0, 0, 500, 500);
        g.drawImage(images.spaceship, constant.x, constant.y, null);
        g.drawImage(images.bullet, constant.bulletx, constant.bullety, null);
    }

    @Override
    public void keyPressed(KeyEvent e) {
        System.out.println(constant.x);
        switch (e.getKeyCode()) {
        case KeyEvent.VK_LEFT:
            constant.xvel = -1 * constant.STEP;
            repaint();
            break;
        case KeyEvent.VK_RIGHT:
            constant.xvel = 1 * constant.STEP;
            repaint();
            break;
        case KeyEvent.VK_SPACE:
            constant.xvel = 0;
            constant.bulletx = constant.x;
            constant.bullety = constant.y;
            while (constant.bullety > 0) {
                constant.bullety = constant.bullety - 1;
                repaint();
            }
        }
        constant.x += constant.xvel;
    }

    @Override
    public void keyReleased(KeyEvent e) {
        switch (e.getKeyCode()) {
        case KeyEvent.VK_LEFT:
            constant.xvel = -1;
            break;
        case KeyEvent.VK_RIGHT:
            constant.xvel = 1;
            break;
        }
    }

    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

我将如何做到这一点，以便用户可以看到子弹在您开火时在屏幕上移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:09:04.187

您遇到了“阻塞事件调度线程”问题，这似乎是一个非常常见的问题......

基本上，当这段代码正在执行时......

```
while (constant.bullety > 0) {
    constant.bullety = constant.bullety - 1;
    repaint();
} 
```

无法绘制任何内容，因为您阻塞了负责处理重绘的线程。

A`repaint`是向重绘管理器发出的更新屏幕上的一部分的请求。重绘管理器是为提高性能而设计的，因此它会尝试将所有各种重绘请求合并到尽可能少的调用中，然后将重绘请求添加到事件调度线程......

因此，当您阻止 EDT 时，无法重新绘制任何内容。

有关更多详细信息，请查看 Swing 中的[并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)和[AWT 和 Swing 中的绘画。](http://www.oracle.com/technetwork/java/painting-140037.html)

现在，来一个解决方案。

有很多方法可以实现这一目标。一般来说，您需要某种“引擎”或“控制器”来运行后台，更新游戏中的各种对象并将结果渲染到屏幕上。

这提出了许多重大问题。首先，与 UI 的所有交互都必须在 EDT 的上下文中执行。这意味着，您永远不应从 EDT 外部创建或更新任何 UI 组件。

第二个是确保您不会改变渲染器所依赖的游戏模型的任何部分（因为您实际上并不控制重绘过程）。

这个最简单的解决方案是使用 a `BufferedImage`，您可以将其绘制到它（在 background 中`Thread`）。

这将允许您更新游戏模型，将结果渲染到后备缓冲区，将该缓冲区重新同步到 UI，然后稍作等待以让 UI 有时间赶上。简单：D

# python - 使用 SQLAlchemy 创建金字塔会话时出现 DetachedInstanceError

> ID：15351515
> 
> 赞同：4
> 
> 时间：2013-03-12T01:03:48.963
> 
> 标签：python, sqlalchemy, pyramid, zope

我编写了自己的 Pyramid`ISession` [接口](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/_modules/pyramid/interfaces.html#ISession)实现，它应该将 Session 存储在数据库中。一切都很好，但不知何故`pyramid_tm`抛出了这个。一旦激活它就会说：

```
DetachedInstanceError: Instance <Session at 0x38036d0> is not bound to a Session;
attribute refresh operation cannot proceed 
```

（不要在这里混淆：The`<Session ...>`是模型的类名，“... to a Session”很可能是指 SQLAlchemy 的 Session（我称之为`DBSession`避免混淆）。

我查看了邮件列表和 SO，似乎任何时候有人遇到问题，他们是

*   产生一个新线程或
*   手动调用`transaction.commit()`

这些事情我都不做。然而，这里的特点是，我的会话被 Pyramid 传递了很多。首先我做`DBSession.add(session)`然后`return session`。之后我可以处理会话，显示新消息等。

但是，似乎一旦请求完成，我就会收到此异常。这是完整的回溯：

```
Traceback (most recent call last):
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/lib/python2.7/site-packages/waitress-0.8.1-py2.7.egg/waitress/channel.py", line 329, in service
    task.service()
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/lib/python2.7/site-packages/waitress-0.8.1-py2.7.egg/waitress/task.py", line 173, in service
    self.execute()
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/lib/python2.7/site-packages/waitress-0.8.1-py2.7.egg/waitress/task.py", line 380, in execute
    app_iter = self.channel.server.application(env, start_response)
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/lib/python2.7/site-packages/pyramid/router.py", line 251, in __call__
    response = self.invoke_subrequest(request, use_tweens=True)
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/lib/python2.7/site-packages/pyramid/router.py", line 231, in invoke_subrequest
    request._process_response_callbacks(response)
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/lib/python2.7/site-packages/pyramid/request.py", line 243, in _process_response_callbacks
    callback(self, response)
  File "/home/javex/data/Arbeit/libraries/python/web_projects/pyramid/miniblog/miniblog/models.py", line 218, in _set_cookie
    print("Setting cookie %s with value %s for session with id %s" % (self._cookie_name, self._cookie, self.id))
  File "build/bdist.linux-x86_64/egg/sqlalchemy/orm/attributes.py", line 168, in __get__
    return self.impl.get(instance_state(instance),dict_)
  File "build/bdist.linux-x86_64/egg/sqlalchemy/orm/attributes.py", line 451, in get
    value = callable_(passive)
  File "build/bdist.linux-x86_64/egg/sqlalchemy/orm/state.py", line 285, in __call__
    self.manager.deferred_scalar_loader(self, toload)
  File "build/bdist.linux-x86_64/egg/sqlalchemy/orm/mapper.py", line 1668, in _load_scalar_attributes
    (state_str(state)))
DetachedInstanceError: Instance <Session at 0x7f4a1c04e710> is not bound to a Session; attribute refresh operation cannot proceed 
```

对于这种情况，我停用了调试工具栏。一旦我激活它，错误就会从那里抛出。似乎这里的问题是在任何时候访问对象。

我意识到我可以尝试以某种方式分离它，但这似乎不是正确的方法，因为如果不再次明确地将其添加到会话中，就无法修改元素。

因此，当我没有产生新线程并且我没有显式调用提交时，我猜事务在请求完全消失之前提交，然后再次访问它。我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T03:11:18.550

我相信您在这里看到的是一个怪癖，即响应回调和完成的回调实际上是在补间之后执行的。它们位于应用程序的出口和中间件之间。`pyramid_tm`，作为补间，在您的响应回调执行之前提交事务 - 在以后访问时导致错误。

让这些事情的顺序正确是很困难的。我想到的一种可能性是在下面注册你自己的补间，**在** `pyramid_tm`会话上执行刷新，获取 id，并在响应上设置 cookie。

我对这个问题表示同情，因为在事务提交后发生的任何事情都是 Pyramid 中的一个真正的灰色区域，并不总是清楚不应该触及会话。我会做笔记以继续思考如何在未来改进 Pyramid 的这个工作流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:28:46.790

我首先尝试注册一个补间，它以某种方式工作，但数据没有被保存。然后我偶然发现了[SQLAlchemy Event System](http://docs.sqlalchemy.org/en/latest/core/event.html)。我找到了[after_commit](http://docs.sqlalchemy.org/en/latest/orm/events.html#sqlalchemy.orm.events.SessionEvents.after_commit)事件。使用它，我可以在提交完成后设置会话对象的分离`pyramid_tm`。我认为这提供了完全的灵活性，并且不会对订单提出任何要求。

我的最终解决方案：

```
from sqlalchemy.event import listen
from sqlalchemy.orm import Session as SASession
def detach(db_session):
    from pyramid.threadlocal import get_current_request
    request = get_current_request()
    log.debug("Expunging (detaching) session for DBSession")
    db_session.expunge(request.session)
listen(SASession, 'after_commit', detach) 
```

唯一的缺点：它需要调用[get_current_request()](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/threadlocal.html#pyramid.threadlocal.get_current_request)，这是不鼓励的。但是，我看不到以任何方式传递会话的方法，因为事件被 SQLAlchemy 调用。我想到了一些丑陋的包装材料，但我认为那将是冒险且不稳定的方式。

# java - 如何使用 Java 中的开发人员 API 获取我的微博（中国 SNS）推文列表？

> ID：15351520
> 
> 赞同：0
> 
> 时间：2013-03-12T01:04:01.530
> 
> 标签：java, timeline, weibo

我想通过 api 获取我的微博（www.weibo.com - china sns）推文列表。

我正在使用[https://code.google.com/p/weibo4j/](https://code.google.com/p/weibo4j/)库。

但他们的示例源仅包含网络身份验证。

如果我想要他们的 accessToken，他们的示例源会显示使用 Web 浏览器的教程。

```
System.setProperty("weibo4j.oauth.consumerKey", Weibo.CONSUMER_KEY);
System.setProperty("weibo4j.oauth.consumerSecret", Weibo.CONSUMER_SECRET);
Weibo weibo = new Weibo();
RequestToken requestToken = weibo.getOAuthRequestToken();
...
BareBonesBrowserLaunch.openURL(requestToken.getAuthorizationURL()); 
```

我想直接使用我的帐户登录微博api并获取我的时间线帖子列表。

但我认为他们的文档不包含这种方法。有人已经解决了它的问题吗？

所以我想编写使用weibo api的代码库，如下代码。

```
Weibo weibo = new Weibo();
weibo.setUserAndPassword('john', 'johnpassword'); // weibo4j does not support this method.
....
Paging pag = new Paging();
pag.setSinceId(3343021761165196l);
pag.setCount(200);
List<Status> statuses = weibo.getUserTimeline("john", pag); 
```

有没有使用微博api的java库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:54:31.553

**我认为没有任何图书馆可以通过简单的用户名和密码获取微博时间线！**

简史：微博api有两个版本，分别是V1和V2。在 V1 版本的 api 中，他们实际上支持这种登录，查看这个[例子](http://open.weibo.com/wiki/Statuses/show)。但是，创建 V2 版本 api 后，所有应用程序都必须使用 oauth2。

# clojure - 如何在 Clojure 中自动编译咖啡脚本？

> ID：15351521
> 
> 赞同：1
> 
> 时间：2013-03-12T01:04:01.763
> 
> 标签：clojure, coffeescript, compojure

我正在用 compojure 和 Leiningen 2 构建一个 Web 应用程序。有没有办法像 Ruby on Rails 和 sprocket 一样自动将咖啡脚本编译成 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:59:28.953

如果您熟悉 Rails 资产管道，请查看 Dieter ( [https://github.com/edgecase/dieter](https://github.com/edgecase/dieter) )。它是允许coffee、sass、less、haml等编译的环中间件。

您无需`watch`每次都手动编译文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T21:39:17.010

[https://github.com/vbauer/lein-coffeescript](https://github.com/vbauer/lein-coffeescript) - 用于运行 CoffeeScript 编译器的 Leiningen 插件。

# c# - Gridview ItemTemplate ControlStyle-Width 忽略右侧填充

> ID：15351523
> 
> 赞同：0
> 
> 时间：2013-03-12T01:04:06.513
> 
> 标签：c#, asp.net, .net, gridview

我有一个如下的 GridView 并希望使 TextBoxes 正确填充列。目前，设置 Controlstyle-Width="100%" 不能按预期工作；有填充顶部，左侧和底部，但它忽略右侧填充并扩展到列的边缘。

```
 <asp:GridView ID="gvTimesheets" runat="server" AutoGenerateColumns="False" OnRowDataBound="gvTimesheet_RowDataBound" CellPadding="4" ForeColor="#333333" ShowHeaderWhenEmpty="True">
    <Columns>
        <asp:TemplateField HeaderText="Position">
            <ItemTemplate>
                <asp:DropDownList ID="ddlPositions" runat="server" Width="200/>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Description" HeaderStyle-Width="100%" ControlStyle-Width="100%">
            <ItemTemplate>
                <asp:TextBox ID="txtDescription" runat="server" Enabled="true" Text='<%# Bind("Description") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

我将描述`HeaderStyle-Width`设置为 100% 的原因是因为我希望它在控件完全填充后填充剩余空间，这似乎工作得很好。

我曾尝试使用`box-sizing`, `ControlStyle-Width`，`ItemStyle-Width`但似乎没有任何东西可以保留右侧填充。有什么建议么？我宁愿坚持使用 .Net 并避免使用 jQuery 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T06:43:00.313

试试这个，在 ItemTemplate 中使用带有标签的 Width="100%" 属性，然后，如果需要，根据您的要求设置对齐方式。

# jquery - 移动标题并附加到下一张图片

> ID：15351535
> 
> 赞同：1
> 
> 时间：2013-03-12T01:05:39.337
> 
> 标签：jquery, clone, each

我正在尝试克隆标题并将其附加到图像 div。这是带有标题应该去哪里的注释的标记：

```
<div class="current">
<div class="project">
    <div class="col">
        <a class="projectitle" href="#">Title1</a>
    </div>

    <div class="thumb">
        <img src="image1.jpg">
        <!-- Clone title1 and move here -->
    </div>

</div>

<div class="project">
    <div class="col">
        <a class="projectitle" href="#">Title2</a>
    </div>

    <div class="thumb">
        <img src="image2.jpg">
        <!-- Clone title2 and move here -->
    </div>

</div> 
```

这可行，但会复制所有标题并将它们附加到所有 div

```
$( ".current .project .projectitle" ).each(function() {
$( this ).clone().appendTo($(".thumb"));
}); 
```

一点都不好，但我正在尝试使用 jquery 和 for each 函数

```
$( ".current .project" ).each(function() {
var ptitle = $(this)
$("ptitle .projectitle").clone().appendTo($("ptitle .thumb"));
}); 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:09:16.710

```
$(".current .project .projectitle").each(function() {
   var $this = $(this), $target = $this.parent().next();
   $this.clone().appendTo($target);
}); 
```

[http://jsfiddle.net/C42T8/](http://jsfiddle.net/C42T8/)

# github - 如何正确更新我的 Octopress 博客

> ID：15351541
> 
> 赞同：4
> 
> 时间：2013-03-12T01:05:56.957
> 
> 标签：github, push, octopress

我有一个难题：我已经完成了`rake deploy`，我的 Octopress 博客运行良好。文档说我必须再做 3 个步骤：

```
git add .
git commit -m 'message'
git push origin source 
```

好的，前两个很好用，但是第三个让我抓狂，因为 GitHub 上的源代码没有更新。相反，它会创建另一个名为的分支`source`，其中包含所有 Octopress 源代码。为什么？如果我`rake deploy`每次都必须更新我的源代码，事情就会顺利进行。但是运行这个命令对我来说需要*很多*时间，因为我有 300 多篇博客文章和图片。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:32:01.340

您可以尝试关注文章“ [Octopress：建立博客并为现有博客做贡献](http://code.dblock.org/octopress-setting-up-a-blog-and-contributing-to-an-existing-one)”：

> 那么，如何开始为现有的 Octopress 博客（或您自己从一台新计算机）做出贡献？我们想要的是与上面相同的设置，但不是从头开始。

```
git clone https://github.com/username/username.github.io.git -b source
cd username.github.com
git clone https://github.com/username/username.github.io.git -b master _deploy
cd .. 
```

[OP ThXou](https://stackoverflow.com/users/1257854/thxou) 补充[说](https://stackoverflow.com/questions/15351541/how-to-update-my-octopress-blog-correctly/15355612?noredirect=1#comment22301198_15355612)：

> 我明白，如果我想上传我的代码，**我必须`rake deploy`每次**都做。

* * *

请注意，自2013 年[4 月 5 日起](https://github.com/blog/1452-new-github-pages-domain-github-io)，所有`username.github.com`现在都是**`username.github.io`**.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T04:57:06.420

这三行所做的是将您对Octopress 博客（Jekyll 项目）的**源代码**`source`所做的所有更改上传到您的 GitHub 存储库的分支（请注意，这将包括根目录中的**所有内容**，而不仅仅是找到的少数文件在不相关的`source`文件夹中）。

另一方面，`rake deploy`生成博客，只将**结果**（所有静态 HTML 页面）上传到`gh-pages`GitHub 存储库的分支（此结果取自`_public`目录）。

从技术上讲，您不必*将*源代码上传到 GitHub，但是，如果您的硬盘驱动器出现故障，或者由于任何原因您的信息消失了，您必须从头开始重建源代码（我很漂亮确保没有脚本可以获取 HTML 页面并将其“反编译”回`_layouts`、`_includes`、`_posts`和样式）。

由于我通常在上传**结果**的同时上传**源代码**，因此我创建了一个 Bash 脚本来协助完成此操作（正如您所说，这需要一分钟才能运行，但我只是[靠边并在同时](http://xkcd.com/303/)）：

 **```
#!/bin/bash

# Load RVM into a shell session *as a function*
# NOTE: Not necessary if you already have a line similar to this in '~/.bash_profile'
[[ -s "/home/andreas/.rvm/scripts/rvm" ]] && source "/home/andreas/.rvm/scripts/rvm"  

# Create static site
rake generate

# Publish site to GitHub
rake deploy

# Fetch the optional commit message (as an argument)
if [[ -z "$1" ]]; then 
    message="Updated source `date`"
else
    message="$1"; 
fi

# Push the changes to 'source' to GitHub
echo ""
echo "## Commit source to GitHub"
git add .
git commit -a -m "$message"
git push origin source 
```

要使用它，请将其另存为`deploy.sh`，然后执行它。它需要一个可选参数，您可以在其中指定提交消息：

```
$ deploy.sh "Add blog post 'Why Pandas are going to kill us all'" 
```

如果没有提供提交消息，它会自动创建一个提交消息，类似于`Updated source Thu May 8 23:50:14 CDT 2014`.**

# javascript - Javascript / jquery如何在字符串中每次出现后删除一个字符

> ID：15351542
> 
> 赞同：1
> 
> 时间：2013-03-12T01:06:00.617
> 
> 标签：javascript, jquery, regex, string

我有一个类似于下面的字符串。我想在每次出现“名称”一词后删除字符。我怎样才能得到想要的结果。

当前字符串：

```
var str = "name0, name1, name2, name3, name4 and that will be all"; 
```

期望的结果：

```
var str = "name, name, name, name, name and that will be all"; 
```

提前谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T01:08:43.957

这个怎么样：

```
str = str.replace(/\b(name)\w\b/g, '$1'); 
```

我在这里做了两个假设：首先，你不想替换像`surname0`;这样的词。其次，您不需要删除`name,`.

如果需要替换后面的*所有*字母数字符号`name`（或某些固定单词），只需添加`+`修饰符，如下所示：

```
str = str.replace(/\b(name)\w+/g, '$1'); 
```

请注意，您在这里不需要第二个`\b`：`\w+`匹配完成后，显然有`\W`符号 - 或字符串的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:10:02.193

您可以将正则表达式与以下`String.replace`功能一起使用：

```
var str = "name0, name1, name2";
str = str.replace(/name./g, 'name'); 
```

# python - 如何从python中的unittest导入一个类？

> ID：15351546
> 
> 赞同：8
> 
> 时间：2013-03-12T01:06:09.837
> 
> 标签：python, unit-testing

我有一个关于 Python 和 unittest 的非常基本的问题。

我有这样的目录结构。

```
Project
   |
   |-lib
      |
      |-__init__.py
      |-class.py
   |
   |-tests
      |
      |-__init__.py
      |-test_class.py 
```

现在这是我的 test_class.py 的内容。如果我从根文件夹导入 lib.class 它工作正常。但是，如果我从其他地方导入文件，它就不起作用。

```
 import unittest
from lib.class import Class

class TestClass(unittest.TestCase):
    def testClass(self):
            // do some test

def main():
    unittest.main()

if __name__ == '__main__':
    main() 

```

当我运行测试时出现此错误

```
 Traceback (most recent call last):
  File "tests/test_class.py", line 2, in 
    from lib.class import Class
ImportError: No module named lib.class 

```

不知道如何从另一个不是根文件夹的文件夹中导入文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T01:11:23.823

更好的解决方案是创建一个 virtualenv 并以开发者模式安装项目。这使您无需重新安装即可修改和执行代码。

```
virtualenv venv
source venv/bin/activate
pip install -e . 
```

在测试中，您现在只需包含 fqdn。

> 从 project.lib.class 导入类

请记住，您将需要使用[setuptools](https://packaging.python.org/guides/distributing-packages-using-setuptools/)来正确定义项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T01:11:15.430

修改`sys.path`以包含项目目录

```
import sys
sys.path.append('/path/to/Project') 
```

在 Linux 上，你可以这样做

```
import sys, os
sys.path.append(os.path.abspath(sys.path[0]) + '/../') 
```

并且应该包括正在运行的 Python 测试脚本上方的目录，即 Project 文件夹

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-10-30T07:44:12.860

在TestClass的setUp方法中

添加 ：

```
file_path = Path(__file__).parent.parent / 'lib' / 'class.py'

self.assertTrue(file_path.exists())

spec = spec_from_file_location(file_path.name, location=file_path, loader=None, submodule_search_locations=None)

self.module = module_from_spec(spec)

self.module.__spec__.loader.exec_module(self.module) 
```

使用权：

```
aclass = self.module.AClass() 
```

或者

```
AClass = self.module.AClass
aclass = AClass() 
```

# profiling - 为什么 valgrind massif 不报告任何函数名称或代码引用？

> ID：15351549
> 
> 赞同：2
> 
> 时间：2013-03-12T01:06:53.693
> 
> 标签：profiling, valgrind, stack-trace, heap-memory, massif

我有一个程序意外使用大量堆（大约 3GB）。我通过 valgrind memcheck 运行它，报告没有泄漏，声称所有堆内存仍然可以访问。

所以我用调试选项重建了我所有的库，并通过 valgrind massif 运行了 prog。我正在使用我今天刚刚下载并在我的盒子上构建的 Valgrind-3.8.1。命令行是：

```
valgrind --tool=massif myprog 
```

Valgrind 没有产生任何错误或警告。生成的输出文件报告所有分配的内存，但大型分配的所有堆栈跟踪都无法识别函数名称或代码位置，例如：

```
97.34% (2,595,141,447B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.
->88.67% (2,363,882,948B) 0xCA6ACC0: ???
| ->88.67% (2,363,882,948B) 0xC7D7A71: ???
|   ->88.67% (2,363,882,948B) 0xC7D705E: ???
|     ->88.67% (2,363,882,948B) 0xA6ACB65: ???
|       ->59.01% (1,573,247,120B) 0xA6AC9BA: ???
|       | ->59.01% (1,573,247,120B) 0x9410C08: ???
|       |   ->59.01% (1,573,247,120B) 0x94123E2: ???
|       |     ->59.01% (1,573,247,120B) 0x940B3E9: ???
|       |       ->59.01% (1,573,247,120B) 0x9428BC0: ???
|       |         ->59.01% (1,573,247,120B) 0x98B0564: ???
|       |           ->59.01% (1,573,247,120B) 0x9AF0DA0: ???
|       |             ->59.01% (1,573,247,120B) 0x9AF09BE: ???
|       |               ->59.01% (1,573,247,120B) 0x9AF0E6C: ???
|       |                 ->59.01% (1,573,247,120B) 0x4CE6438: run_S (Thread.cpp:98)
|       |                   ->59.01% (1,573,247,120B) 0x3A9A40683B: start_thread (in /lib64/libpthread-2.5.so)
|       |                     ->59.01% (1,573,247,120B) 0x3A994D503B: clone (in /lib64/libc 2.5.so) 
```

我现在有点卡住了。我想知道我构建的库是否实际上没有启用调试 - 但是当我在 gdb 中运行我的代码时，它似乎确实具有所有调试信息。此外，massif 输出中还有一些其他（小得多的）内存分配结果，它们从我的代码中识别出函数名称和位置。

这些结果是否表明系统或外部库中的堆栈跟踪？这就是没有信息的原因吗？谁能建议我如何跟踪这些分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T07:43:11.450

认为答案是 RTFM ......请参阅 valgrind[常见问题解答](http://valgrind.org/docs/manual/faq.html)第 4.2 节：

> 另外，对于涉及共享对象的泄漏报告，如果共享对象在程序终止之前被卸载，Valgrind 将丢弃调试信息，错误信息将充满??? 条目。这里的解决方法是避免对这些共享对象调用 dlclose。

我的代码确实在退出之前明确卸载了它的共享库。我正在重建库卸载抑制 - 希望有更好的结果:)

# database - 如何在 postgresql 中使用 group by

> ID：15351551
> 
> 赞同：2
> 
> 时间：2013-03-12T01:07:14.737
> 
> 标签：database, postgresql, group-by

目标是使用两个不同的表进行查询；国家和城市。Country 包含 name (of Country) 和 country_code (主键)，city 包含 name (of city)、人口和 country_code (主键)。我想使用聚合函数 GROUP BY，但是下面的查询不起作用。

对于每个国家，列出其任何城市中人口最多的城市以及该城市的名称。所以我需要列出每个国家人口最多的城市。

所以应该显示的是国家，城市（人口最多），然后是那个城市的人口。每个城市应该只有一个国家。

```
$query6 = "SELECT c.name AS country, ci.name AS city,
GREATEST(ci.population) AS max_pop
FROM lab6.country c INNER JOIN lab6.city ci
ON(c.country_code = ci.country_code)
GROUP BY c.name
ORDER BY country ASC"; 
```

我也尝试过 GROUP BY country, DISTINCT c.name。

我是聚合函数的新手，所以如果有特定情况你应该使用 GROUP BY 而这不是其中之一，请告诉我。

我正在使用 PHP 来运行查询，如下所示：

```
$result = pg_query($connection, $query);
if(!$result)
{
       die("Failed to connect to database");
} 
```

错误：列“ci.name”必须出现在 GROUP BY 子句中或用于聚合函数第 1 行：SELECT DISTINCT c.name AS country, ci.name AS city 是错误。

这些桌子是给我们的，我们不制作它们，而且我不能包括制作桌子的屏幕截图，因为我没有任何声誉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T01:16:28.567

一些 DDL 可以玩。

```
create table country (
  country_code char(2) primary key, -- ISO country code
  country_name varchar(35) not null unique
);

insert into country values 
('US', 'United States of America'),
('IT', 'Italy'),
('IN', 'India');

-- The full name of a city is more than city name plus country name.
-- In the US, there are a couple of dozen cities named Springfield,
-- each in a different state. I'd be surprised if this weren't true
-- in most countries.
create table city (
  country_code char(2) not null references country (country_code),
  name varchar(35) not null,
  population integer not null check (population > 0),
  primary key (country_code, name)
);

insert into city values 
('US', 'Rome, GA', 36303),
('US', 'Washington, DC', 632323),
('US', 'Springfield, VA', 30484),
('IT', 'Rome', 277979),
('IT', 'Milan', 1324110),
('IT', 'Bari', 320475),
('IN', 'Mumbai', 12478447),
('IN', 'Patna', 1683200),
('IN', 'Cuttack', 606007); 
```

人口最多的国家。

```
select country.country_code, max(city.population) as max_population
from country
inner join city on country.country_code = city.country_code
group by country.country_code; 
```

有几种方法可以使用它以获得您想要的结果。一种方法是在公用表表达式上使用内连接。

```
with max_population as (
  select country.country_code, max(city.population) as max_population
  from country
  inner join city on country.country_code = city.country_code
  group by country.country_code
)
select city.country_code, city.name, city.population
from city
inner join max_population 
        on max_population.country_code = city.country_code
       and max_population.max_population = city.population; 
```

另一种方法是在子查询上使用内连接。（公用表表达式的文本“进入”主查询。使用别名“max_population”，查询不需要进一步更改即可工作。）

```
select city.country_code, city.name, city.population
from city
inner join (select country.country_code, max(city.population) as max_population
            from country
            inner join city on country.country_code = city.country_code
            group by country.country_code
           ) max_population 
        on max_population.country_code = city.country_code
       and max_population.max_population = city.population; 
```

还有一种方法是在子查询中使用窗口函数。您需要从子查询中进行选择，因为您不能在 WHERE 子句中直接使用 rank() 的结果。也就是说，这行得通。

```
select country_code, name, population
from (select country_code, name, population,
      rank() over (partition by country_code 
                   order by population desc) as city_population_rank
      from city
     ) city_population_rankings
where city_population_rank = 1; 
```

但事实并非如此，尽管乍一看它更有意义。

```
select country_code, name, population,
       rank() over (partition by country_code 
                    order by population desc) as city_population_rank
from city
where city_population_rank = 1;

ERROR:  column "city_population_rank" does not exist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:50:13.623

执行此操作的最佳方法是使用**窗口化的 PostgreSQL 最新版本。**（[文档](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)。）当您想要将特殊行的一些其他列（例如人口最多的行）带入最终输出时，必须做丑陋的事情之前。

```
WITH preliminary AS 
     (SELECT country_code, city_name, population,
      rank() OVER (PARTITION BY country_code ORDER BY population DESC) AS r
      FROM country
      NATURAL JOIN city) -- NATURAL JOIN collapses 2 country_code columns into 1
SELECT * FROM preliminary WHERE r=1; 
```

在一个国家的两个或多个最大城市拥有完全相同的人口这一公认不太可能的情况下，这也起到了一些聪明的作用。

**[编辑以回应评论]**

在开窗之前，我通常的做法是

```
SELECT country_code, city_name, population
FROM country co1 NATURAL JOIN city ci1
WHERE ROW(co1.country_code, ci1.population) =
    (SELECT co2.country_code, ci2.population 
     FROM country co2 NATURAL JOIN city ci2
     WHERE co1.country_code = co2.country_code 
     ORDER BY population DESC LIMIT 1) 
     AS subquery;
-- note for lurkers, some other DBs use TOP 1 instead of LIMIT 
```

这样做的性能还不错，因为如果数据库被智能索引，Postgres 会优化子查询。将此与 Mike Sherrill 答案的子查询方法的内部联接进行比较。

支持我们导师的回答，好吗？使用您目前拥有的设备，它可能效率低下、不完整，或两者兼而有之。

# python - 如何在 Python 中遍历已排序的可迭代对象

> ID：15351555
> 
> 赞同：0
> 
> 时间：2013-03-12T01:07:46.527
> 
> 标签：python

假设 S 是一个可迭代的，其中每个子元素不一定是排序的。通常我可能会

```
for element in S:
    element=sorted(element)
    ... 
```

有没有办法做类似的事情

```
for sorted(element) in S:
    ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T01:12:55.707

您可以使用 genexp，但您的原始代码已经足够好：

```
for element in (sorted(x) for x in S):
   # do things 
```

另一种使用较少代码的方法是`map`：

```
for element in map(sorted, S):
    # or itertools.imap on Python2.x if you need iterators... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:15:01.057

如果你想返回一个列表，你可以做一个列表理解

```
[sorted(element) for element in S] 
```

# ios - 为什么 Xcode 在使用 CocoaPods 后不安装我的 iOS 应用程序？

> ID：15351556
> 
> 赞同：1
> 
> 时间：2013-03-12T01:08:09.897
> 
> 标签：ios, xcode4, cocoapods

我已经安装了 CocoaPods，并将我的依赖项放在 Podfile 中。运行后`pod install`，我打开显示一个`Pods`项目和一个`MyProject`项目的 myproject.xcworkspace。

但是，当我像往常一样单击运行时，Xcode 只是说“构建成功”，而不是将应用程序安装到我的设备上。我在这里想念什么？

**简短版本：打开 CocoaPods 工作区后，如何让 Xcode 将应用程序安装到设备上？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:11:19.917

确保您的活动方案是您的应用程序方案，而不是 CocoaPods`Pod`方案。在选择方案的下拉列表中选择您的应用程序。

# r - For循环忽略我的第一项

> ID：15351564
> 
> 赞同：0
> 
> 时间：2013-03-12T01:09:03.730
> 
> 标签：r

如果您能帮助我解决以下两个问题，我将不胜感激：

1.  下面的“for”循环忽略了我的第一个循环项。下面的代码是我程序的一小部分。在这里，我正在迭代对象“num”并使用函数“Grep”循环遍历“mySet”，该函数标记了 mySet 中的某些项目。

“for”循环在“num”对象的第一个元素“0”处起作用。因此，它在 mySet 中找不到任何以“0”开头的项目。

```
num <- c(0,2,4,6,8,10,15,20,30,40,45,50,55,60,65,70,80,85,90,92,94,96,98,100)
mySet <- c("0.C.A", "2.C.A", "4.C.A", "6.C.A", "8.C.A", "10.C.A", "15.C.A", "20.C.A",
           "30.C.A", "40.C.A", "45.C.A", "50.C.A", "55.C.A", "60.C.A", "65.C.A", "70.C.A",
           "80.C.A", "85.C.A", "90.C.A", "92.C.A", "94.C.A", "96.C.A", "98.C.A", "100.C.A")
varLoop <- c()
Grep <- function(num)grep(paste("^" , num, "\\.", sep=""), mySet, value = TRUE)
for(i in num){
    varLoop[i] <- Grep(i)
    print(varLoop[i])} 
```

1.  如果我按如下方式修改脚本，第二个问题是不完整的输出和警告。警告是：“要替换的项目数不是替换长度的倍数”。不完整的输出不包括任何以字母B结尾的项目

下面的脚本会产生问题：

```
num <- rep(c(0,2,4,6,8,10,15,20,30,40,45,50,55,60,65,70,80,85,90,92,94,96,98,100), 2)
mySet <- c("0.C.A", "2.C.A", "4.C.A", "6.C.A", "8.C.A", "10.C.A", "15.C.A", "20.C.A",
           "30.C.A", "40.C.A", "45.C.A", "50.C.A", "55.C.A", "60.C.A", "65.C.A", "70.C.A",
           "80.C.A", "85.C.A", "90.C.A", "92.C.A", "94.C.A", "96.C.A", "98.C.A", "100.C.A",
           "0.C.B", "2.C.B", "4.C.B", "6.C.B", "8.C.B", "10.C.B", "15.C.B", "20.C.B",
           "30.C.B", "40.C.B", "45.C.B", "50.C.B", "55.C.B", "60.C.B", "65.C.B", "70.C.B",
           "80.C.B", "85.C.B", "90.C.B", "92.C.B", "94.C.B", "96.C.B", "98.C.B", "100.C.B")
varLoop <- c()
Grep <- function(num)grep(paste("^" , num, "\\.", sep=""), mySet, value = TRUE)
for(i in num){
    varLoop[i] <- Grep(i)
    print(varLoop[i])} 
```

提前谢谢你，拉吉·艾萨克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T01:17:19.500

在`R`, 索引从`1`not开始`0`

```
x <- 1:5
x[0] 
## integer(0) 
```

惯用的方法是做类似的事情`seq_along`，然后`num`用结果索引。

你在[R Hell 的第二个圈子里，](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)你的对象在循环中生长。

我认为在这里，但是有些东西`sapply`将有助于简化您的代码

```
sapply(num, Grep) 
```

# json - 我如何为“下一个”或“上一个”按钮创建一个永无止境的循环 [php/jquery]

> ID：15351571
> 
> 赞同：-1
> 
> 时间：2013-03-12T01:09:54.627
> 
> 标签：json, next

我如何为“下一个”或“上一个”按钮制作一个永无止境的循环？
例如：如果有 7 个记录集并且用户按下“下一个”或“上一个”按钮，那么记录集不会在到达记录集 0 或 7 时停止。

我有以下代码并尝试了很多方法来解决它们：

```
var jsonData = '
[
  {"count":1,"file":"fb305d5921e6ef7336c4ce3750b7e0a8.jpg"},  
  {"count":2,"file":"c2fce6d2d0af805b2d21159be7e0e60b.jpg"},
  {"count":3,"file":"9c49190d7c152a3891ac991ebb512885.jpg"},
  {"count":4,"file":"529eae9e455b24da93f4696f10eda3c0.jpg"},
  {"count":5,"file":"164e16bf35d331134e872be0ccd1d2aa.jpg"},
  {"count":6,"file":"f34a37b9117026139ddc297da0df2cbc.jpg"},
  {"count":7,"file":"ebafad68984e409a409e9eec86f6c7c9.jpg"}
]';

function getId(file) {
    for(var f in jsonData) {
       if(jsonData[f].file == file)
         return jsonData[f].count;
    }
}

var ActualCounter = getId("fb305d5921e6ef7336c4ce3750b7e0a8.jpg");
var TotalPics = '7';

$('.PicNext').click(function() {
    if(ActualCounter == TotalPics) return false; 
    var SetNext = ActualCounter++;
    $('#ShowPicture').attr('src', '/Media/'+ jsonData[SetNext].file);
});

$('.PicPrev').click(function() {
    if(ActualCounter == 1) return false; 
    var SetPrev = ActualCounter--;
    $('#ShowPicture').attr('src', '/Media/'+ jsonData[SetPrev].file);
});
}); 
```

所以对于 .PicNext 我也试过这个：

```
$('.PicNext').click(function() {
   if(ActualCounter == TotalPics) { var SetNext = 0; } else {
   var SetNext = ActualCounter++; }
   $('#ShowPicture').attr('src', '/Media/'+ jsonData[SetNext].file);
}); 
```

但没有运气！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:47:38.693

您正在使用一种非常复杂的方法。但无论如何，您的问题可能是您在更新`ActualCounter`时没有更新`var SetNext = 0`。由于您没有更新它，因此图片将卡在 0 上，因为`ActualCounter == TotalPics`它始终是正确的。

但是你并不真的需要这种复杂的方法。只需保留一个常规数组索引（从 0 到 n-1）并在索引更改时使用余数/模数运算符：

```
 index = (index + jsonData.length) % jsonData.length; 
```

## 更新

使用模方法的版本：

```
var jsonData = [
  "fb305d5921e6ef7336c4ce3750b7e0a8.jpg"
  "c2fce6d2d0af805b2d21159be7e0e60b.jpg",
  "9c49190d7c152a3891ac991ebb512885.jpg",
  "529eae9e455b24da93f4696f10eda3c0.jpg",
  "164e16bf35d331134e872be0ccd1d2aa.jpg",
  "f34a37b9117026139ddc297da0df2cbc.jpg",
  "ebafad68984e409a409e9eec86f6c7c9.jpg"
];

var index = 0;

$('.PicNext').click(function() {
    index += 1;
    index = (index + jsonData.length) % jsonData.length;
    $('#ShowPicture').attr('src', '/Media/'+ jsonData[index]);
});

$('.PicPrev').click(function() {
    index -= 1;
    index = (index + jsonData.length) % jsonData.length;
    $('#ShowPicture').attr('src', '/Media/'+ jsonData[index]);
}); 
```

# r - 在 R heatmap.2 中移动颜色键（gplots 包的功能）

> ID：15351575
> 
> 赞同：32
> 
> 时间：2013-03-12T01:10:30.407
> 
> 标签：r, heatmap, color-key, gplots

我现在读了几次 heatmap.2 帮助手册，而且在各种在线教程中我也没有读到关于将颜色键移动到不同位置的方法。现在，我想知道这是否可能？

如果您使用 gplots 包中的 heatmap.2 函数，颜色键默认位于左上角。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-12T14:56:48.647

图中每个元素的位置`heatmap.2`可以使用`lmat`、`lhei`和`lwid`参数来控制。这些通过以下方式传递`heatmap.2`给`layout`命令：

```
layout(mat = lmat, widths = lwid, heights = lhei) 
```

`lmat`是一个描述屏幕如何被分解的矩阵。默认情况下，heatmap.2 将屏幕划分为一个四元素网格，因此`lmat`也是一个 2x2 矩阵。矩阵的每个元素中的数字描述了绘制接下来四个图的顺序。 Heatmap.2 按以下顺序绘制其元素：

1.  热图，
2.  行树状图，
3.  列树状图，
4.  钥匙

所以默认`lmat`是：

```
> rbind(4:3,2:1)
     [,1] [,2]
[1,]    4    3
[2,]    2    1 
```

例如，如果您想将键放在您指定的热图下方：

```
> lmat = rbind(c(0,3),c(2,1),c(0,4))
> lmat
     [,1] [,2]
[1,]    0    3
[2,]    2    1
[3,]    0    4 
```

`lwid`并且`lhei`是指定每行和每列的高度和宽度的向量。默认`c(1.5,4)`为两者。如果您更改`lmat`，您将不得不或可能想要更改这些。对于上面的例子，如果我们想保持所有其他元素的大小相同，但希望底部有一个细的颜色键，我们可以设置

```
>lwid = c(1.5,4)
>lhei = c(1.5,4,1) 
```

然后我们准备绘制热图：

```
>heatmap.2(x,...,lmat = lmat, lwid = lwid, lhei = lhei) 
```

这将绘制一个热图，其中列树状图位于热图上方，行树状图位于左侧，键位于下方。不幸的是，密钥的标题和标签是硬编码的。

`?layout`有关如何`layout`工作的更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:41:25.293

在相当长的代码中，par 调用定义了指定的区域`heatmap.2`，我没有看到它的原始作者或围绕这些部分的任何“修订者”，尽管他们有时会在 R-help 上访问。主要绘图尺寸由 2 元素向量 设置`margins`。以下是您可能需要进行更改的一些地方：

```
#1) 
if (!missing(RowSideColors)) {
    par(mar = c(margins[1], 0, 0, 0.5))
    image(rbind(1:nr), col = RowSideColors[rowInd], axes = FALSE)

#2)
if (!missing(ColSideColors)) {
    par(mar = c(0.5, 0, 0, margins[2]))
    image(cbind(1:nc), col = ColSideColors[colInd], axes = FALSE)

#3)
par(mar = c(margins[1], 0, 0, margins[2]))

#4)
par(mar = c(margins[1], 0, 0, 0))

#5)
par(mar = c(0, 0, if (!is.null(main)) 5 else 0, margins[2]))

#6
if (key) {
    par(mar = c(5, 4, 2, 1), cex = 0.75) 
```

# mysql - “MySQL for Excel”中的查询超时

> ID：15351577
> 
> 赞同：0
> 
> 时间：2013-03-12T01:10:51.123
> 
> 标签：mysql, excel

有没有办法在“MySQL for Excel”中设置查询超时？我有几个 MySQL 存储过程可以从 MySQL Workbench 正常运行（慢，但很好），但是当从 Excel 调用“超时已过期。在操作完成之前超时时间已过或服务器没有响应时失败。 " 优化和/或索引以加速 SP 不是一种选择……我已经尽我所能，除了创建数据仓库。我确实尝试输入“SET SESSION wait_timeout = 300;” 在有问题的程序的顶部......没有运气。

谢谢。

# java - 你如何序列化一个番石榴集合？

> ID：15351587
> 
> 赞同：3
> 
> 时间：2013-03-12T01:11:36.437
> 
> 标签：java, serialization, deserialization, guava

我一定遗漏了一些明显的东西，但我无法序列化`TreeBasedTable`. 它被标记为`@GwtCompatible(serializable = true)`，所以我的理解是我需要使用该`guava-gwt`库来（反）序列化它。

但我找不到这样做。一个人为的代码示例将不胜感激。

有关信息，我的 pom 包含`guava`and `guava-gwt`，两个版本都是 14.0.

**编辑**

所以多亏了答案，我现在明白 TreeBasedTable 是可序列化的。所以我删除了所有 gwt 引用并让它工作。但是，这段代码仍然失败（这是让我认为 TreeBasedTable 不可序列化的代码） - 所以我猜问题出在自定义比较器上......

```
public static void main(String[] args) throws Exception {
    //with the following table it works
    //Table<Integer, String, Object> table = TreeBasedTable.create();

    //but with this one, it fails
    Table<Integer, String, Object> table = TreeBasedTable.create(new Comparator<Integer>() {
        @Override
        public int compare(Integer o1, Integer o2) {
            return o1.compareTo(o2);
        }
    }, String.CASE_INSENSITIVE_ORDER);

    table.put(1, "s", 123);

    try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(Paths.get("c:/temp/test").
            toFile()));) {
        oos.writeObject(table);
    }

    Table<Integer, String, Object> saved = null;

    try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream(Paths.get("c:/temp/test").
            toFile()));) {
        saved = (Table<Integer, String, Object>) ois.readObject();
    }

    System.out.println(table.equals(saved));
    Files.delete(Paths.get("C:/temp/test"));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:52:58.730

如果您谈论的是纯 Java 序列化，是的：`TreeBasedTable`is `Serializable`.

`TreeBasedTable`扩展`StandardRowSortedTable`哪个扩展`StandardTable`哪个实现`Serializable`。

顺便说一句：一个简单的检查会帮助你：

```
Serializable foo = TreeBasedTable.create(); 
```

由于编译器不会抱怨这一行，因此您知道`TreeBasedTable`implements `Serializable`。

* * *

**更新：**

`String.CASE_INSENSITIVE_ORDER`实现`Serializable`，所以您需要做的就是将匿名整数比较器重构为实现的内部类`Serializable`。或者：更好的是，[`Ordering.natural()`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Ordering.html#natural%28%29)改用它，这`Serializable`已经是。

# android - 从提供错误 URI 路径的电子邮件中打开 ZIP 文件

> ID：15351591
> 
> 赞同：3
> 
> 时间：2013-03-12T01:12:15.833
> 
> 标签：android, android-intent, android-contentprovider

我试图弄清楚为什么，当我尝试打开一个我有意图过滤器的电子邮件附件时，它给了我一个我无法读取的 URI。它给我的URI是：

```
content://com.android.email.attachmentprovider/1/32/RAW 
```

代替：

```
/sdcard/Download/Attachments/MYZIP.ZIP 
```

我调用来获取路径的代码是`this.getIntent().getData().getPath();`

它正确打开的唯一方法是先下载它，这样它就有一个我可以访问的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:46:42.780

这是第三方应用程序提供的自定义 URI。您应该检查他们的 API，了解使用其内容 URI 的权限。这是[一些信息](http://developer.android.com/guide/topics/providers/content-provider-basics.html#Intents)。

通常，您可以使用从该 URI[`ContentResolver.openInputStream(android.net.Uri)`](http://developer.android.com/reference/android/content/ContentResolver.html#openInputStream%28android.net.Uri%29)获取，例如：`InputStream`

```
import java.util.zip.ZipInputStream;

// ...

public static void test(Context context) throws Exception {
    Uri uri = Uri.parse("content://com.android.email.attachmentprovider/1/32/RAW");
    ZipInputStream zis = new ZipInputStream(
            context.getContentResolver().openInputStream(uri));
    try {
        // ...
    } finally {
        zis.close();
    }
} 
```

但这取决于供应商（他们是否提供此类访问权限）。所以请务必检查他们的 SDK/API...</p>

# javascript - AngularJS：ng-repeat 错误地显示数据

> ID：15351594
> 
> 赞同：0
> 
> 时间：2013-03-12T01:12:35.560
> 
> 标签：javascript, angularjs

我只是在学习使用 JavaScript、AngularJS 和 Parse，所以，如果我做错了什么，请说出来。我想尽可能多地学习。

我有一个任务，我被指示使用 Parse 和 AngularJS。我想`company`在我的`companies`对象中显示每一个，然后显示每一个的评级。在 Parse 中，这些存储为两个具有关系的独立对象。

我终于能够计算出评分，但是 Angular 正在覆盖评分的数据。它显示的是最后计算的评分，而不是每个评分。`console.log(total)`正在控制台中生成准确的数字。

这是我的控制器中用于检索的代码`companies`：

```
function getCompanies() {
    new Parse.Query(Companies).find({
        success: function(results) {
            for (var i = 0; i < results.length; i++) {
                results[i].relation("ratings").query().find({
                    success: function(ratings) {
                        // retrieve stars and calculate average rating
                        var total = 0;
                        for (var o = 0; o < ratings.length; o++) {
                            var stars = parseInt(ratings[o].attributes.stars);
                            total += stars;
                        }
                        total = total / ratings.length; // get average rating

                        $scope.$apply(function() {
                            $scope.companies = results.map(function(obj) {
                                console.log(total); // produces correct results
                                return {name: obj.get("name"), rating: total, parseObject: obj};
                            })
                        });
                    }
                });
            }
        }
    });
} 
```

在我的`view`我使用以下代码：

```
<div ng-repeat="company in companies">
    <h1>{{company.name}}</h1>
    <h3>Rating: {{company.rating}}</h3>
</div> 
```

现在，如果我有两个`companies`，而他们有`ratings`2 和 4，那么现在 Angular 都显示 4。但是，`console.log(total)`将显示 2 和 4。

如果我的代码有问题，请告诉我，我想尽可能多地学习。非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:44:40.080

你能试试下面的代码吗？

```
success: function(results) {
    for (var i = 0; i < results.length; i++) {
        var result = results[i];
        results[i].relation("ratings").query().find({
            success: function(ratings) {
                //calculate total here;
                //var total = your logic to calculate the total
                //then store the total in the result object
                result.total = total;
            }
        })
    }
    $scope.$apply(function() {
        $scope.companies = results.map(function(obj) {
            console.log(total); // produces correct results
            return {name: obj.get("name"), rating: obj.total, parseObject: obj};
        })
    });
} 
```

# javascript - 使用 jquery 在 div 内动态更改图像

> ID：15351595
> 
> 赞同：0
> 
> 时间：2013-03-12T01:12:38.687
> 
> 标签：javascript, jquery, css, html

1.  我有四个保存图像的 div

2.  我正在使用翻转卡片的效果，这目前正在工作，[这是小提琴](http://jsfiddle.net/fUsPh/7/) ，所以你可以明白我的意思。

3.  现在我想在每次用户浏览图像时更改每个 div 的图像。为此，我创建了四个数组

    ```
    var arrFirstYellowCard = ["http://i.jootix.com/r/Flower-1920x1080.jpg", "http://7art-screensavers.com/screenshots/wet-flowers/incredible-orange-flower.jpg", "http://www.hdwallpapers.in/walls/big_yellow_flower-HD.jpg"];
    var arrSecondPurpleCard = ["http://www.dazzlewallpapers.com/wp-content/uploads/2012/07/Lotus-Flower-5.jpg", "hhttp://7art-screensavers.com/screenshots/wet-flowers/wet-violet-flower.jpg"];
    var arrThirdVectorFlower = ["http://0.tqn.com/d/rubberstamping/1/0/6/m/-/-/flower-outline.png", "http://openclipart.org/people/PeterM/PeterM_Flower_2.svg"];
    var arrfourthCrazyArt = ["http://www.bitrebels.com/wp-content/uploads/2012/11/electrocuted-flowers-robert-buelteman-1.jpg", "http://loadpaper.com/large/Flowers_wallpapers_251.jpg"]; 
    ```

例如对于第一个 div：

```
<section class="card-container">
    <div class="card over" data-direction="right">
        <div class="front">
            <h2>yellow flowers</h2>

            <h4>(Right)</h4>

        </div>
        <div class="back">
            <img src="CHANGE IMAGE DYNAMICALLY USING ARRAY arrFirstYellowCard" width="100%;" height="100%;" alt="" />
        </div>
    </div>
</section> 
```

我如何根据用户是否将鼠标悬停在卡片上来动态更改每个 div 数组中的图像？

所以

1.  第一次用户悬停 div 更改数组中的第一个图像并显示
2.  第二次用户悬停div，第二张图片被数组中的第二张图片地址更改...

请看看我的小提琴。我将如何添加此功能？

# 更新：

按照我所做的回答建议：

```
var arrFirstYellowCard = ["http://7art-screensavers.com/screenshots/wet-flowers/incredible-orange-flower.jpg", "http://www.hdwallpapers.in/walls/big_yellow_flower-HD.jpg"];
var arrSecondPurpleCard = ["http://www.dazzlewallpapers.com/wp-content/uploads/2012/07/Lotus-Flower-5.jpg", "hhttp://7art-screensavers.com/screenshots/wet-flowers/wet-violet-flower.jpg"];
var arrThirdVectorFlower = ["http://0.tqn.com/d/rubberstamping/1/0/6/m/-/-/flower-outline.png", "http://openclipart.org/people/PeterM/PeterM_Flower_2.svg"];

$(function () {
    $('.over').hover(function () {

        if ($(this).attr('data-direction') == 'right') {
            $(this).addClass('flipping-right');
        }   
        if ($(this).attr('data-direction') == 'left') {
            $(this).addClass('flipping-left');
        }

    }, function () {
        if ($(this).attr('data-direction') == 'right'){    
            $(this).removeClass('flipping-right');
            var img = $(this).find('img');
            setTimeout(function() {
               img.attr('src', arrFirstYellowCard[i]);
               i++;
               if(i > arrFirstYellowCard.length-1)
                  i=0;
           }, 800);
        }
        if ($(this).attr('data-direction') == 'left'){    
            $(this).removeClass('flipping-left');
            var img = $(this).find('img');
            setTimeout(function() {
               img.attr('src', arrSecondPurpleCard[i]);
               i++;
               if(i > arrSecondPurpleCard.length-1)
                  i=0;
           }, 800);
        }

    });
}) 
```

但这似乎不起作用，有人可以帮我解决这个问题吗[？](http://jsfiddle.net/fUsPh/28/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:49:32.180

[您可以在更新的jsfiddle](http://jsfiddle.net/C7nNd/)中找到请求功能的示例。为简单起见，我只留下了一张卡片。我在数组中迭代，在部分中查找图像并更改它的 src 属性。setTimeout 用于延迟 src 的更改，以确保卡被翻转并使用后不会立即看到更改。

主要部分是：

```
var img = $(this).find('img');
img.attr('src', arrFirstYellowCard[i]); 
```

并在每次调用时增加 i 并在超过数组长度时更改回 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:52:25.323

```
$(this).find('img').attr('src', arrFirstYellowCard[i]); 
```

和`i`增值

# java - 如何在 Java 的 Bouncy Castle 中使用 V2Form？

> ID：15351596
> 
> 赞同：0
> 
> 时间：2013-03-12T01:12:45.240
> 
> 标签：java, security, certificate, bouncycastle

我正在开发一个 Profile Certificate 软件，需要使用 V2Form 作为 BasicCertificateID。

```
 issuerGenName = new GeneralNames(new GeneralName(new X500Name(issuerName)));
        ASN1Integer issuerSerialNumber = new ASN1Integer(Integer.parseInt(mainWindow.getIssuerSerialNumber()));
        //IssuerSerial baseCertificateID = new IssuerSerial(issuerGenName,  issuerSerialNumber);
        ASN1EncodableVector vec = new ASN1EncodableVector();
        ASN1EncodableVector vecS = new ASN1EncodableVector();
        vecS.add(issuerGenName);
        vecS.add(issuerSerialNumber);
        ASN1Sequence seq = new DERSequence(vecS);
        IssuerSerial baseCertificateID  = IssuerSerial.getInstance(seq);
        ASN1TaggedObject tagged = new DERTaggedObject(0, baseCertificateID);
        //TODO Refazer
        vec.add(issuerGenName);
        vec.add(tagged);
        ASN1Sequence seq2 = new DERSequence(vec);

        V2Form teste = new V2Form(seq2);

        issuer = new AttCertIssuer(teste); 
        attIssuer = new AttributeCertificateIssuer(issuer); 
```

但这不起作用，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:03:04.817

ASN1TaggedObject 标记=新DERTaggedObject（0，baseCertificateID）；

应该读

ASN1TaggedObject tagged = new DERTaggedObject(false, 0, baseCertificateID);

该对象是隐式的，而不是显式的标记。

另一件事是，在 BC 中，您应该始终使用模式 V2Form.getInstance() 而不是调用采用序列的构造函数。我们正在慢慢消除这些，主要问题是它并不安全，在某些情况下，您可能会意外地获得类转换异常，因为序列构造函数无法处理 getInstance() 可以处理的所有情况。

对于 BC 而言，V2Form 确实需要更多的构造函数，这些构造函数应该会在接下来的几天内出现在下一个 beta (149b09) 中。

问候，

大卫

# php - 我可以在 php foreach 语句声明中安全地放置一个函数吗？

> ID：15351597
> 
> 赞同：0
> 
> 时间：2013-03-12T01:12:46.703
> 
> 标签：php

将函数放在 foreach 语句中是否安全？

```
foreach( get_class_methods( $object ) as $entityMethod ) {
    // Do something
} 
```

是否会在每个循环中调用 get_class_methods() 函数？有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:16:38.053

进入循环时，该函数只会被评估一次。但是您可以通过创建一个每次调用全局变量时递增的函数来测试自己。

至于缺点，我想不到。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:17:27.877

唯一不安全的情况是函数可以返回不可迭代的东西（如`null`，或 a`string`等）。该特定功能确实会返回`null`任何错误。

# java - Unix时间戳的时间转换

> ID：15351601
> 
> 赞同：0
> 
> 时间：2013-03-12T01:13:00.400
> 
> 标签：java, date, datetime, xml-rpc

我所属的服务器有一个我要连接的 xml-rpc API。其中有一个名为“player.seen”的函数，它返回最后一次看到“player”时的 Unix 时间戳。我正在尝试使用这个数字来显示自从看到用户以来已经过了多长时间。由于某种原因，它没有给出正确的值：

旧代码： http: [//pastebin.com/tPe6mkyJ](http://pastebin.com/tPe6mkyJ)

我尝试过以许多不同的方式重写脚本，但忘记备份它们。我想知道你们中是否有人知道完成这种转换的更好方法。

编辑：编辑我的代码以使用 joda-Time 后，我仍然得到不正确的值。例如，根据游戏内 /seen 命令，玩家“pomi44”在 15 天 9 小时 10 分钟内没有出现。我的程序输出“1 天，18 小时，18 分钟，10 秒”。

新代码：

```
 Object[] params1 = new Object[]{API_KEY, playerName};
            String result = (String) client.execute("player.seen", params1);

            int timeStamp = Integer.parseInt(result);

            Date curDate = new Date();

            DateTime start = new DateTime(timeStamp * 1000L);
            DateTime end = new DateTime(curDate.getTime());
            Period period = new Period(start, end);

            int seconds = period.getSeconds();
            int minutes = period.getMinutes();
            int hours = period.getHours();
            int days = period.getDays();

            System.out.println(days + " days, " + hours + " hours, "  + minutes + " minutes, " + seconds + " seconds."); 
```

我尝试了不同的数字来代替“1000”，但都给出了不正确的值。例如，根据游戏中的 /seen 命令，玩家“pomi44”有 15 天 9 小时 10 分钟没有出现。我的程序为 pomi44 输出“1 天 18 小时 18 分钟 10 秒”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:15:39.527

转换`long`为`int`不是一个好主意：

```
int TimeStamp_now = (int) curDate.getTime(); 
```

使用上述语句，您可能会丢失一些信息。

我建议你使用[Joda Time Library](http://joda-time.sourceforge.net/index.html)。它有[句号](http://joda-time.sourceforge.net/key_period.html)的概念。

```
DateTime start = new DateTime(timeStamp * 1000L);
DateTime end = new DateTime(curDate.getTime());
Period period = new Period(start, end); 
```

`org.joda.time.Period`有方法`getDays`,`getHours`等`getMinutes`来获取时差的那些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:22:01.980

使用不使用 Jodatime 的日期，我认为 joda time 是要走的路（它只是更好）但是这应该不需要 jodatime

```
String result = (String) client.execute("player.seen", params1);
int timeStamp = Integer.parseInt(result);
Date then=new Date(timeStamp*1000L);
Date now = new Date();
long difference = now.getTime() - then.getTime(); 
```

# android - 如何检查安卓设备是否支持 SNEP 或安卓的 Ndef 推送协议？

> ID：15351602
> 
> 赞同：6
> 
> 时间：2013-03-12T01:13:00.743
> 
> 标签：android, nfc, ndef, nfc-p2p

您可以在 Android[文档](http://developer.android.com/reference/android/nfc/NfcAdapter.html#enableForegroundNdefPush%28android.app.Activity,%20android.nfc.NdefMessage%29)中找到它：

> 要使 NDEF 推送正常运行，其他 NFC 设备必须支持 NFC 论坛的 SNEP（简单 Ndef 交换协议）或 Android 的“com.android.npp”（Ndef 推送协议）。这在 Gingerbread 级别的 Android NFC 设备上是可选的，但 SNEP 在 Ice-Cream-Sandwich 及其他设备上是强制性的。

您如何检查设备是否能够与其他设备**进行 NFC P2P 通信？**因为我们尝试测试了各种示例 NFC P2P 代码，但均未成功！（NFC 标签运行良好）。

目前发生的情况是，这两款设备都会发出熟悉的 NFC 嗡嗡声，但似乎没有数据交换。

仅供参考的设备是*Sony Xperia Sole/Sola*和*LG Optimus 4X HD*，它们都相应地更新了 Android 版本 4.0.4 和 4.0.3。

另请注意：开发是在 Gingerbread 版本，*Android API 版本 10*上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T08:22:11.823

我不知道如何检查，但在我的记忆中，每台 Android > 4.0 的设备都可以执行 SNEP。

根据经验，当两个设备都发出“NFC 声音”时，就是他们已经看到对方了，但是初始化不正确，在这种情况下，数据没有传输。您可以发布一些您已经测试过的代码示例吗？

请注意，我不是安卓开发者，但我研究过 NFC 的协议，所以我的回答必须谨慎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T23:35:26.643

[根据 Android 文档](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#p2p)：

> 接收传送数据的 NFC 设备必须支持 com.android.npp NDEF 推送协议或 NFC 论坛的 SNEP（简单 NDEF 交换协议）。API 级别 9 (Android 2.3) 到 API 级别 13 (Android 3.2) 的设备需要 com.android.npp 协议。API 级别 14 (Android 4.0) 及更高版本都需要 com.android.npp 和 SNEP。

您可以使用 API 级别检查：

```
if api level >= 14, it's SNEP;    
else if api level >= 9, it's NPP;     
else P2P not supported. 
```

# java - 在Java中为图像添加边框

> ID：15351604
> 
> 赞同：1
> 
> 时间：2013-03-12T01:13:06.050
> 
> 标签：java, image, awt, border

我正在尝试创建一个图像，通过将像素从旧位置复制到新坐标来为 Java 上的现有图像添加边框。到目前为止，这就是我所做的：

```
public static NewPic border (NewPic p, int borderWidth, Pixel borderColor) {
   int w = p.getWidth();
   int h = p.getHeight();

   Pixel src[][] = p.getBitmap();
   Pixel tgt[][] = new Pixel[h][w];

   for (int x = 0; x < w; x++) {
     for (int y = 0; y < h; y++) {
       tgt[y][x + y + borderWidth]  = src[x][y]; // this is probably where I a messing up
     }
  }
  return new NewPic(tgt);
  } 
```

不确定我在评论的那一行做错了什么。我是 Java 新手。有人可以给我一些指导吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T01:38:26.520

一种方法是使用基于 Swing 的边框。

![带边框的图像](../Images/5010b2c611eb712f14edd9e6b769be73.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import javax.swing.border.*;

class ImageBorder {

    public static void main(String[] args) {
    Runnable r = new Runnable() {

        @Override
        public void run() {
        JPanel gui = new JPanel(new BorderLayout());
        // to contrast the 'picture frame' border created below
        gui.setBorder(new LineBorder(Color.BLUE, 12));

        Image image = // your image here..
            new BufferedImage(400,50,BufferedImage.TYPE_INT_RGB);
        JLabel l = new JLabel(new ImageIcon(image));
        Border b1 = new BevelBorder(
            BevelBorder.LOWERED, Color.LIGHT_GRAY, Color.DARK_GRAY);
        Border b2 = new LineBorder(Color.GRAY, 12);
        Border b3 = new BevelBorder(
            BevelBorder.LOWERED, Color.LIGHT_GRAY, Color.DARK_GRAY);
        Border bTemp = new CompoundBorder(b1,b2);
        Border b = new CompoundBorder(bTemp,b3);
        l.setBorder(b);

        gui.add(l);

        JOptionPane.showMessageDialog(null, gui);
        }
    };
    // Swing GUIs should be created and updated on the EDT
    // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
    SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T01:21:28.443

您可以创建一个`BorderedBufferedImage`接受一个`int`for `borderThickness`，一个 Color`borderColor`和一个`BufferedImage`。

[该网站](https://forums.oracle.com/forums/thread.jspa?threadID=1262581&tstart=1090)也可能提供一些帮助：

```
import java.awt.*;
import javax.swing.*;
import java.awt.image.BufferedImage;
import javax.imageio.ImageIO;
import java.io.*;
import javax.swing.BorderFactory; 

class testImagePanel{
    public static void main(String[] args){

    BufferedImage image = null;
    ImagePanel imagePanel = null;

    try{
        image = ImageIO.read(new File("Pictures/pl.jpg"));
        imagePanel = new ImagePanel(image);
    }catch(IOException  e){
         System.err.println("Trying to read in image "+e);
    }

    JFrame frame = new JFrame("Example");
    frame.add(imagePanel);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);   

    }
}

public class ImagePanel extends JPanel {

BufferedImage image;
Dimension size;

public ImagePanel(BufferedImage image) {
    this.image = image;
    this.size = new Dimension();
    size.setSize(image.getWidth(), image.getHeight());
    this.setBackground(Color.WHITE);
    this.setBorder(BorderFactory.createLineBorder(Color.RED, 1));
}

@Override
protected void paintComponent(Graphics g) {
    // Center image in this component.
    int x = (getWidth() - size.width)/2;
    int y = (getHeight() - size.height)/2;
    g.drawImage(image, x, y, this);
}
@Override
public Dimension getPreferredSize() { return size; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-05T07:19:37.540

我使用以下逻辑为任何图像添加边框：

```
BufferedImage source = ImageIO.read(original);
int borderedImageWidth = width + (borderLeft * 2);
int borderedImageHeight = height + (borderTop * 2);
BufferedImage img = new BufferedImage(borderedImageWidth, borderedImageHeight, BufferedImage.TYPE_3BYTE_BGR);
img.createGraphics();
Graphics2D g = (Graphics2D) img.getGraphics();
g.setColor(Color.YELLOW);
g.fillRect(0, 0, borderedImageWidth, borderedImageHeight);
g.drawImage(source, borderLeft, borderTop, width + borderLeft, height + borderTop, 0, 0, width, height, Color.YELLOW, null);
File output = File.createTempFile("output", ".png");
ImageIO.write(img, "png", outputFile); 
```

这将在一个尺寸大于图像的黄色矩形上绘制图像，从而为图像提供边框。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-10T17:16:30.533

清洁 Java 最简单的方法：

```
String imagePath = "this/is/your/image.jpg";
BufferedImage myPicture = ImageIO.read(new File(imagePath));
Graphics2D g = (Graphics2D) myPicture.getGraphics();
g.setStroke(new BasicStroke(3));
g.setColor(Color.BLUE);
g.drawRect(10, 10, myPicture.getWidth() - 20, myPicture.getHeight() - 20);
ImageIO.write(myPicture, "jpg", new File(imagePath)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-27T19:26:20.593

我知道这个线程是从 2013 年开始的，但我遇到了这个问题，我有一个解决方案可以保留 OP 试图做的事情：

```
public static NewPic border (NewPic p, int borderWidth, Pixel borderColor) 
{
   int w = p.getWidth();
   int h = p.getHeight();

   Pixel src[][] = p.getBitmap();
   Pixel tgt[][] = new Pixel[h + borderWidth * 2][w + borderWidth * 2];

   for (int x = 0; x < w + borderWidth; x++) 
   {
      for (int y = 0; y < h + borderWidth; y++) 
      {
         if (x >= borderWidth && x < w - borderWidth && y >= borderWidth && y < h - borderWidth)
         {
            tgt[x][y] = src[x - borderWidth][y - borderWidth];
         }
         else
         {
            tgt[x][y] = borderColor;
         }
      }
   }
   return new NewPic(tgt);
} 
```

# javascript - 如何在对象中引用 JavaScript 对象键？

> ID：15351606
> 
> 赞同：4
> 
> 时间：2013-03-12T01:13:39.857
> 
> 标签：javascript

我将如何在对象本身中引用 JavaScript 哈希键？例如，我希望能够真正使用“主题”键。我会使用“this”来引用“主题”吗？

```
window.EXAMPLE = {
config : {
    theme: 'example',
    image_path: '/wp-content/themes/' + this.theme + '/img/',
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T01:19:36.157

您可以使用一种方法：

```
window.EXAMPLE = {
    config : {
        theme: 'example',
        image_path: function () {
            return '/wp-content/themes/' + this.theme + '/img/';
        },
    }
} 
```

当然，那么您必须通过以下方式访问它`EXAMPLE.config.image_path()`

您可能不应该在`window`任何一个上定义事物，而只使用当前范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T01:19:34.447

唯一的方法是使用函数：

例如

```
windows.EXAMPLE {
  config : {
    theme: 'blah', 
    image_path: function () { return '/path/to' + this.theme } 
  } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T01:23:30.453

Without using a function, you have to split it into two separate assignments:

```
window.EXAMPLE = {
    config : {
        theme: 'example'
    }
};
window.EXAMPLE.config.image_path = '/wp-content/themes/' + window.EXAMPLE.config.theme + '/img/'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T01:21:28.093

在构造一个对象时（不是像 Kyle 的示例所给出的那样一旦创建），我认为不可能访问该对象的属性，因为它还不“存在”，除非您使用函数或一些花哨的东西。

我也认为没有理由这样做，因为您可以只输入`"example"`值`image_path`，也可以在定义之前创建一个变量以充当“配置”常量：

```
var CONF_THEME = 'example';
window.EXAMPLE = {
    config : {
        theme: CONF_THEME,
        image_path: '/wp-content/themes/' + CONF_THEME + '/img/'
    }
} 
```

# javascript - 作为字符串转换javascript中的对象

> ID：15351608
> 
> 赞同：0
> 
> 时间：2013-03-12T01:13:44.170
> 
> 标签：javascript, python, node.js

发生的事情是我正在与节点 python 通信，并且他通过套接字传递字符串成就的唯一方法，但我无法将其转换为已经在 javascript 中的对象

**Python**

```
from socket import *

if __name__ == "__main__":
    client = socket(AF_INET,SOCK_STREAM)
    client.connect(('127.0.0.1', 7000))
    C = "{id:110041134,date:2013-03-11 19:42:43.570313}"
    client.sendall(C)
    client.close()

    print 'Received', repr(data) 
```

节点

```
var HOST = '127.0.0.1';
var PORT = 7000;

net.createServer(function(python){
    console.log('Python: ' + python.remoteAddress +':'+ python.remotePort);

    // Add a 'data' event handler to this instance of python
    python.on('data', function(data) {
        console.log('' + data);
    });

    python.on('close', function(data) {
    });
}).listen(PORT, HOST); 
```

结果我得到：

```
console.log(data):
<Buffer 7b 69 64 75 6e 69 64 61 64 3a 31 31 37 32 32 30 30 30 34 31 31 35 33 34 2c 6c 61 74 69 74 75 64 3a 34 2e 37 35 31 39 37 35 34 33 33 33 33 2c 6c 6f 6e 67 ...>

console.log('' + data)
{id:110041134,date:2013-03-11 19:42:43.570313} 
```

我认为这是将信息传达给节点工作的好方法。

但是将信息传递给javascript中的可读格式？

如果这不是沟通流程的最佳方式，我能说得更好吗？

谢谢你。

# php - 如果用户变为活动状态，则在过期之前激活会话

> ID：15351612
> 
> 赞同：1
> 
> 时间：2013-03-12T01:14:25.507
> 
> 标签：php, user-management, login-script

我是 PHP 初学者。我设法创建了一个用户注册/注册系统，该系统通向仪表板面板。用户使用会话登录。

我制作了一个会话时间脚本，也使会话在 30 分钟后过期。但我的问题是如何让它只有在用户不活动时才过期，如果用户突然活跃，如何防止它过期。

这是我的登录代码和仪表板代码。请帮帮我。编码帮助将不胜感激。

谢谢

**# 登录代码**

```
 $_SESSION['username'] = $username;  
    $_SESSION['emailAddress'] = $email;  
    $_SESSION['LoggedIn'] = 1; 
    $_SESSION['start'] = time(); // taking now logged in time
    $_SESSION['expire'] = $_SESSION['start'] + (1 * 10) ; 

   header('Location: ../dashboard/'); 
```

**# 仪表板代码**

```
session_start();

if(empty($_SESSION['LoggedIn']) && empty($_SESSION['username']))  
{  

          echo  "<script>location.href='session-expired.php'</script>";

}
     elseif(!isset($_SESSION['LoggedIn']) && !isset($_SESSION['username']))
{
    echo  "<script>location.href='session-expired.php'</script>";

}
else
{

    $now = time(); 

    if($now > $_SESSION['expire'])
    {
        session_destroy();
         echo  "<script>location.href='session-expired.php'</script>";
    }

    else
    { 

?>

<!-- After all the html codes --!>

<?php
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:20:20.693

如果用户变得活跃，那么他/她将再次点击一个页面，这就是您想要移动会话过期时间的时候。如果您有所需页面使用的包含文件（例如标题包含），则可以将这些行

```
$_SESSION['start'] = time(); // taking now logged in time
$_SESSION['expire'] = $_SESSION['start'] + (1 * 10) ; 
```

包括在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:00:38.193

我建议阅读对这个问题的出色回答：[如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

但是要总结该问题的想法（并实际回答您的问题）：

不要相信 php ini 配置，自动过期不会在每个请求上运行，您也不希望它运行（它贯穿磁盘上的每个会话，而不仅仅是当前会话）。

不要`$_SESSION['expire']`从开始时间更新值。从当前时间更新。这使其更接近“x 不活动期”的实际行为。

你应该总是[`die`](http://php.net/manual/en/function.die.php)或者[`exit`](http://www.php.net/manual/en/function.exit.php)当你的代码结束时。当您执行重定向时，您已决定当前页面已完成，并且您希望另一个页面接管当前请求。

尽量不要`<script>location.href=</script>`用于重定向。您应该坚持在登录代码中使用的服务器端重定向，如下所示`header('Location: ../dashboard/');`：有几个原因。

*   在开始输出之前，您应该尝试完成所有准备工作（会话、请求处理等）。输出是任何`echo`'s 或`print`'s 或's 或标签`dumps`之外的任何东西。`<?php ?>`这些都将数据发送到客户端，一旦启动，您就无法在服务器上执行某些操作。这导致 php 开发人员遇到的一个非常常见的问题[“标头已发送”](https://www.google.com/search?q=php%20headers%20already%20sent)
*   使用服务器端重定向设置适当的[HTTP 响应代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。使用 javascript 不会。所有浏览器都支持 HTTP——这就是浏览器——但并非所有[浏览器都支持 javascript](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#JavaScript_support)。此外，即使用户的浏览器支持 javascript，用户也可能在您/未知的网站上完全阻止 javascript。Javascript 是[增强网站](http://alistapart.com/article/understandingprogressiveenhancement)的好方法，但如果您依赖它来实现关键功能，它可能会导致漏洞，从而影响您的用户甚至您的网站（如果您在 javascript 中放弃了太多网站的内部运作） ，无论您做什么，客户都可以完全访问它...）。[不要相信客户。](http://johnculviner.com/post/2011/06/22/Dont-trust-the-client-%28part-1%29.aspx)

[ 的文档`session_destroy][8]`有这样的说法：

> 为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

他们没有详细说明如何取消设置会话 ID，但它是这样的：

```
session_start();
session_unset();
session_destroy();
session_write_close();
// if using coookies
setcookie(session_name(),'',0,'/');
session_regenerate_id(true); 
```

所以我会为你的**# DASHBOARD CODE这样做**

```
session_start();
if(!isset($_SESSION['LoggedIn']) || empty($_SESSION['LoggedIn']) || !isset($_SESSION['username'] || empty($_SESSION['username']))  
{             
    header("Location: /session-expired.php");
    exit();
}
else
{
    $now = time();
    if($now > $_SESSION['expire'])
    {
        session_start();
        session_unset();
        session_destroy();
        session_write_close();
        // if using coookies
        setcookie(session_name(),'',0,'/');
        session_regenerate_id(true);
        header("Locaiton: /session-expired.php");
        exit();
    }
    else
    { 
        $_SESSION['expire'] = $now + 10;
    }
} 
```

另请注意：

*   您可以汇总未登录的初始检查，因为它们最初执行相同的操作。
*   您有 10 秒的会话到期时间。相当低，您可能出于测试目的这样做，但我想我会指出`time()`使用秒数，因为您提到您是 PHP 新手。
*   `time()`还涉及 Unix 纪元，因此请注意[2038 年](http://en.wikipedia.org/wiki/Year_2038_problem)。

# c# - 属性来自列表/字典的动态类

> ID：15351613
> 
> 赞同：2
> 
> 时间：2013-03-12T01:14:26.363
> 
> 标签：c#, .net, dynamic, properties

我想创建一个动态类，执行以下操作：

1.  我有一个字典，其中键是整数，值是字符串。

    ```
    Dictionary<int, string> PropertyNames =  new Dictionary<int, string>();
    PropertyNames.Add(2, "PropertyName1");
    PropertyNames.Add(3, "PropertyName2");
    PropertyNames.Add(5, "PropertyName3");
    PropertyNames.Add(7, "PropertyName4");
    PropertyNames.Add(11,"PropertyName5"); 
    ```

2.  我想将此字典传递给将属性构建到类实例中的类构造函数。并且假设我想为每个属性同时拥有获取和设置功能。例如：

    ```
    MyDynamicClass Props = new MyDynamicClass( PropertyNames );
    Console.WriteLine(Props.PropertyName1);
    Console.WriteLine(Props.PropertyName2);
    Console.WriteLine(Props.PropertyName3);
    Props.PropertyName4 = 13;
    Props.PropertyName5 = new byte[17]; 
    ```

我无法理解[DLR](http://msdn.microsoft.com/en-us/library/dd233052.aspx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:31:30.573

这[`DynamicObject`](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)门课似乎是你想要的。实际上，文档显示了如何完全按照您的要求进行操作。为简洁起见，此处以精简版转载：

```
public class DynamicDictionary : DynamicObject
{
    Dictionary<string, object> dictionary = new Dictionary<string, object>();

    public int Count
    {
        get { return dictionary.Count; }
    }

    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        string name = binder.Name.ToLower();
        return dictionary.TryGetValue(name, out result);
    }

    public override bool TrySetMember(SetMemberBinder binder, object value)
    {
        dictionary[binder.Name.ToLower()] = value;
        return true;
    }
} 
```

# algorithm - 从一组点中找到四边形的角点

> ID：15351616
> 
> 赞同：8
> 
> 时间：2013-03-12T01:14:54.020
> 
> 标签：algorithm, math, trigonometry, corner-detection

我尝试从一组点中获取四边形的角点。

*   这组点是有序的并描述了一个轮廓
*   有时轮廓有一些噪音（见第二张图）
*   搜索到的角点不必是给定点集之外的点（见左下角第三张图）
*   搜索到的角点描述一个凸四边形，不一定是矩形

![示例1](../Images/8d5d52c1c4986fb4cc7056acb8a82579.png) ![示例2](../Images/7eb6fc1b800c2a05e9d1dfcec625f356.png) ![示例3](../Images/52301a591682fe83b041b2207b6ef0e4.png)

第二张图片有点极端，但我的一组点的“质量”介于第一张和第二张图片之间。

首先，我想从超过 1-360° 和长度制作直方图，以下两点描述。四个最高峰将描述每条线的长度。但是由于我失去了顺序点，只知道度数和长度或一条线，不知道一条线属于哪个位置。

然后我想合并以下两条线，如果它们或多或少具有相同的度数，但我不知道如何处理这里的噪音或预测角落。

有谁知道处理这个问题或类似问题的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:35:38.573

您可以将此视为聚类问题，其中聚类“中心”实际上是直线。要计算聚类，您可以使用 k-means 算法：

1.  选择 4 对随机点。为每条线拟合一条线，因此您有 4 条线穿过点云。
2.  重复直到解决方案似乎已经收敛：
    1.  对于每个点，计算到 4 条线中每条线的距离。
    2.  将该点分配给与其最近的线相对应的存储桶。
    3.  将 4 条新线拟合到 4 个桶中的每一个中的点（您可以使用线性回归或 SVD）

为了改进第一步，您可以采用对角度进行直方图的想法，并将每个点最初分配给与最近峰值相对应的存储桶。然后将线拟合到四个桶，并开始迭代。

您也可以将此视为优化问题：选择 4 个点，使差异区域（四边形内部的白色区域和四边形外部的黑色区域）尽可能小。通用优化算法可能有效，但要使其快速，您需要一个合理的算法来计算面积。

# java - Java连续数coinFlip头，如何突出连胜事件

> ID：15351619
> 
> 赞同：3
> 
> 时间：2013-03-12T01:15:02.000
> 
> 标签：java, if-statement, nested-if

好的，所以我的代码适用于手头的任务。任务是翻转从单独的 Coin 类（此处未显示）实例化的 Coin 对象。我已经正确编写了代码，以便计算连续翻转的最大条纹，从而将 Heads 作为输出。我想知道如何才能突出显示此条纹，因此当我在控制台中查看输出时，条纹是可见的，因为很难注意到 100 次翻转列表中的条纹。

这是我的代码：

```
public class Runs
{
public static void main (String[] args)
{
final int FLIPS = 100; // number of coin flips
int currentRun =0; // length of the current run of HEADS
int maxRun =0; // length of the maximum run so far
// Create a coin objecti
Coin coin = new Coin();

// Flip the coin FLIPS times
for (int i = 0; i < FLIPS; i++)
{
// Flip the coin & print the result
    coin.flip();
    int flipCount = i + 1;
    System.out.println("Flip " + flipCount +":"+ " " + coin.toString());

// Update the run information
    if (coin.isHeads()==true)
    {

        if (maxRun<currentRun)
        {
        maxRun=currentRun;
        }
        currentRun+=1;
    }

    else
        {
        currentRun = 0;
        }

}
// Print the results
System.out.println("Maximum run of heads in a row! : " + maxRun);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:26:22.267

我不是 100% 确定您所说的“突出显示”是什么意思。如果你只是想让它更引人注目，你总是可以在数字前打印几个 *s。如果您使用的是 Eclipse，实际更改文本颜色的最简单方法是打印出您希望用 突出显示的代码`System.err.println(outputToHighlight)`。它会将其打印为红色。这是错误消息通常打印到控制台的方式。不过，这只适用于 Eclipse。

然而，解决您的问题的更好方法可能是打印更少的硬币翻转！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:42:52.117

而不是“突出显示”可能是特定于设备/操作系统的输出，而是输出一个关于它发生的*位置和持续时间的迷你报告。*

以下是代码的外观（我也为您简化了它 - 请参阅代码中的注释）：

```
int maxRun = 0;
int currentRun = 0;
int runStart = 0;

for (int i = 0; i < FLIPS; i++) {
    coin.flip();
    System.out.println("Flip " + (i+1) +": " + coin); // toString() is redundant

    if (coin.isHeads()) { // never compare a boolean with a boolean constant, just use it
        currentRun++; // use ++ in preference to +=1, and this should be before maxRun test
        if (maxRun < currentRun) {
            maxRun = currentRun;
            runStart = currentRun - i; // this will produce a 1-based position
        }
    } else {
        currentRun = 0;
    }
}

System.out.println("Largest run was " + maxRun + " long, starting at " + runStart); 
```

# python - Django：根据另一种形式动态更改表单要求

> ID：15351622
> 
> 赞同：1
> 
> 时间：2013-03-12T01:15:16.720
> 
> 标签：python, django, forms

我对 Django 表单有一点问题。基本上，我有两种形式，一种是免费术语搜索，另一种是一些过滤器。仅当用户未选择过滤器时，才应要求该术语的字段。我有这样的东西（但在同一个类中有更多过滤器）：

```
 class Term(forms.Form):
            terms = forms.CharField(
            label='Term',
            required=True, # but false if the filters is selected
            error_messages={'required': 'Please enter at least one search term'},
            widget=TextInput(attrs={
            'class':'textEntry',
            'placeholder': 'Enter search'}))

    class Filter(forms.Form):
            filter = forms.ModelChoiceField(
            choices = [1,2, 3],
            label = "Filter",
            required = False) 
```

我到处搜索，但没有找到结果。你有什么主意吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:56:59.693

当您实例化它时，您需要将其传递`filter`给您的 Term 表单，然后`terms`适当地设置 required 的值。我已经稍微修改了名称，以便您的表单类更容易区分。

```
# forms.py
class TermForm(forms.Form):
    def __init__(self, *args, **kwargs):
        filter = kwargs.pop('filter', None)
        super(self, TermForm).__init__(*args, **kwargs)
        if filter:
            self.fields['terms'].error_messages = {
                'required': 'Please enter at least one search term'
            }
        else:
            self.fields['terms'].required = False

    terms = forms.CharField(
        label='Term',
        widget=TextInput(attrs={
            'class': 'textEntry',
            'placeholder': 'Enter search'}))

# views.py, assuming Django 1.4.x+
from django.shortcuts import render
from your_app.forms import TermForm, FilterForm

def a_view(request):
    filter_form = FilterForm(request.POST or None)

    if request.method == 'POST' and filter_form.is_valid():
        term_form = TermForm(request.POST or None,
            filter_form.cleaned_data.get('filter')
        if term_form.is_valid():
            # do something

    return render(request, 'a-template.html',
        {'filter_form': filter_form, 'term_form': term_form}) 
```

所有字段都是自动必填的，除非您特别将它们设置为不需要，这就是为什么`__init__`覆盖中的逻辑可能看起来倒退的原因。如果您需要在选择 a 时直观地指示该字段是必需的，`filter`则需要添加一些 JavaScript 来执行此操作。

# javascript - 阻止在移动设备上弹出默认键盘

> ID：15351623
> 
> 赞同：1
> 
> 时间：2013-03-12T01:15:22.747
> 
> 标签：javascript, jquery, html, jquery-mobile

当我们专注于输入文本字段或文本区域等时，如何禁用或阻止默认键盘？

我已经尝试过：

1.  blur()，只读。对于初始输入标签。没关系，但错误是用户之后无法选择文本。

2.  使用 div-contenteditable="true" 替换输入的 html。但是，仍然会弹出默认键盘。

我已经有了虚拟键盘，想找到一种方法来禁用默认键盘，以免在移动设备上覆盖我的虚拟键盘。

# ruby-on-rails - Rails fields_for 未显示

> ID：15351625
> 
> 赞同：1
> 
> 时间：2013-03-12T01:15:51.033
> 
> 标签：ruby-on-rails, ruby, forms, fields-for

我被困住了。我有以下模型：个人资料、用户、工作。

用户有一个个人资料，个人资料有很多工作。

```
class Profile < ActiveRecord::Base

  belongs_to :user
  has_many :jobs

  attr_accessible :user_id, :first_name, :last_name, :headline,:jobs_attributes

  accepts_nested_attributes_for :jobs, allow_destroy: true
end

class User < ActiveRecord::Base

  has_one :profile
  attr_accessible :username,:email, :password,:profile_attributes
  accepts_nested_attributes_for :profile, allow_destroy: true
end

class Job < ActiveRecord::Base

  belongs_to :profile
  belongs_to :country

  attr_accessible :company, :country_id, :end_date, :job_title, :profile_id, :start_date
end 
```

现在，我希望用户能够编辑他的个人资料并将工作添加到他的个人资料中。为此，我使用了以下代码：

```
<%= f.fields_for :jobs do |j| %>
          <%= j.label :job_title, "Job Title" %>
          <%= j.text_field :job_title %>

          <%= j.label :company, "Company" %>
          <%= j.text_field :company %>
          ............................
<% end %> 
```

但问题是，如果用户已经在他的个人资料中有工作，这只会向我显示这些字段，并且我可以更新它。但在这种情况下，数组是空的，不会有迭代。我可以用什么来代替这个，以确保即使用户没有工作也能显示表单？

我试图添加一个“开始 - 结束时间”，但它没有用。检查 :jobs 数组是否为空和创建新的 Job 对象都没有工作......或者至少我的尝试。

你有什么想法？

谢谢！

控制器中的新方法。

```
def new

  resource = build_resource({})
  profile = resource.build_profile
  profile.jobs += [profile.jobs.build]  
  respond_with resource  

end` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T01:36:39.487

如果您想包含全新的字段，请在控制器`Job`中将其添加到数组中：`jobs`

```
profile.jobs.build 
```

就像我们经常在我们的`new`动作中建立一个虚拟记录传递给一样`form_for`，我们也必须为 建立一个虚拟记录`fields_for`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T04:21:08.810

尝试更改：
accepts_nested_attributes_for :profile, allow_destroy: true

至

accept_nested_attributes_for :profile, :update_only => true

# c# - 两个单独的 .xaml 文件到一个窗口中

> ID：15351629
> 
> 赞同：0
> 
> 时间：2013-03-12T01:16:15.283
> 
> 标签：c#, visual-studio-2010, xaml, kinect

我有 ColorStream.xaml 和 SkeletonStream.xaml 文件，我想将 SkeletonStream 视图放在 ColorStream 窗口的右下角。那可能吗？

如果是这样，我将如何连接两者，尤其是使用 xaml 文件？抱歉，我对 C# 很陌生。我觉得它应该只是一个额外的行，我尝试查看 KinectExplorer 示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:28:10.323

也许我遗漏了一些东西，但是有两个 xaml 文件有什么原因吗？我认为您可以将 xaml 代码组合到一个 xaml 文件中，并使用网格之类的东西来分隔各个部分。像这样：

```
<Grid x:Name="myGrid">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
</Grid>

// Bottom Right
<Stackpanel Grid.Row="1" Grid.Column="1"/> 
```

# vba - 批量发送电子邮件时使用 Microsoft Access 查询跳过空白条目？

> ID：15351633
> 
> 赞同：1
> 
> 时间：2013-03-12T01:16:34.277
> 
> 标签：vba, ms-access, salesforce

我有许多 Excel 工作表已导入 Access 以准备导入 Salesforce.com（将不同的字段名称统一并映射到 SFDC 将识别的字段名称），因此我可以从任何一个表（Excel 工作表）批量发送电子邮件通过 VBA 和 Outlook。

我在这里找到了非常适合我的代码：http : [//www.jephens.com/2007/05/13/how-to-send-e-mail-from-ms-access-using-outlook/](http://www.jephens.com/2007/05/13/how-to-send-e-mail-from-ms-access-using-outlook/)魅力。我特别喜欢它一一发送电子邮件，而不是作为一封大量信息发送给每个人都密件抄送。

我想做的是更改代码以充分利用此功能，但我对 VBA 的了解非常有限。

我的问题是两个方面。第一个是当我有一个表没有列表中每个条目的电子邮件地址时，查询会出错。我假设这是一个简单的问题，只需输入一些代码，告诉查询跳过丢失的电子邮件地址并转到下一个。但是，我不太了解 VBA，所以我希望有人可以帮助我解决我应该在什么地方以及在哪里放置代码以实现这一点。

第二件事是我设置了我的电子邮件，因此任何收到电子邮件的收件人都可以通过退回电子邮件取消订阅来选择退出。然后我返回到我发送电子邮件的表格（列表），并在我创建的“电子邮件退出”字段下的条目旁边放一个“1”（SFDC 也认识到这一点）。我还希望能够查询“电子邮件退出”字段并让 VBA 跳过它找到的任何带有 1 的条目，这样人们以后就不会收到电子邮件

希望我很清楚......我正在使用 Access 2013 和 Outlook 2010。

这是“SendMail”模块背后的 VBA 代码，当我启动“SendEMail”宏时，这一切都会发生：

```
Option Compare Database

Public Function SendEMail()

Dim db As DAO.Database

Dim MailList As DAO.Recordset

Dim MyOutlook As Outlook.Application

Dim MyMail As Outlook.MailItem

Dim Subjectline As String

Dim BodyFile As String

Dim fso As FileSystemObject

Dim MyBody As TextStream

Dim MyBodyText As String

Set fso = New FileSystemObject

' First, we need to know the subject.

Subjectline$ = InputBox$("Please enter the subject line for this mailing.", _

"We Need A Subject Line!")

' If there??s no subject, call it a day.

If Subjectline$ = "" Then

MsgBox "No subject line, no message." & vbNewLine & vbNewLine & _

"Quitting...", vbCritical, "E-Mail Merger"

Exit Function

End If

' Now we need to put something in our letter...

BodyFile$ = InputBox$("Please enter the filename of the body of the message.", _

"We Need A Body!")

' If there??s nothing to say, call it a day.

If BodyFile$ = "" Then

MsgBox "No body, no message." & vbNewLine & vbNewLine & _

"Quitting...", vbCritical, "I Ain??t Got No-Body!"

Exit Function

End If

' Check to make sure the file exists...

If fso.FileExists(BodyFile$) = False Then

MsgBox "The body file isn??t where you say it is. " & vbNewLine & vbNewLine & _

"Quitting...", vbCritical, "I Ain??t Got No-Body!"

Exit Function

End If

' Since we got a file, we can open it up.

Set MyBody = fso.OpenTextFile(BodyFile, ForReading, False, TristateUseDefault)

' and read it into a variable.

MyBodyText = MyBody.ReadAll

' and close the file.

MyBody.Close

' Now, we open Outlook for our own device..

Set MyOutlook = New Outlook.Application

' Set up the database and query connections

Set db = CurrentDb()

Set MailList = db.OpenRecordset("MyEmailAddresses")

' now, this is the meat and potatoes.

' this is where we loop through our list of addresses,

' adding them to e-mails and sending them.

Do Until MailList.EOF

' This creates the e-mail

Set MyMail = MyOutlook.CreateItem(olMailItem)

' This addresses it

MyMail.To = MailList("email")

'This gives it a subject

MyMail.Subject = Subjectline$

'This gives it the body

MyMail.HTMLBody = MyBodyText

'If you want to send an attachment

'uncomment the following line

'MyMail.Attachments.Add "c:myfile.txt", olByValue, 1, "My Displayname"

' To briefly describe:

' "c:myfile.txt" = the file you want to attach

' olByVaue = how to pass the file. olByValue attaches it, olByReference creates a shortcut.

' the shortcut only works if the file is available locally (via mapped or local drive)

' 1 = the position in the outlook message where to attachment goes. This is ignored by most

' other mailers, so you might want to ignore it too. Using 1 puts the attachment

' first in line.

' "My Displayname" = If you don??t want the attachment??s icon string to be "c:myfile.txt" you

' can use this property to change it to something useful, i.e. "4th Qtr Report"

'This sends it!

MyMail.Send

'Some people have asked how to see the e-mail

'instead of automaticially sending it.

'Uncomment the next line

'And comment the "MyMail.Send" line above this.

'MyMail.Display

'And on to the next one...

MailList.MoveNext

Loop

'Cleanup after ourselves

Set MyMail = Nothing

'Uncomment the next line if you want Outlook to shut down when its done.

'Otherwise, it will stay running.

'MyOutlook.Quit

Set MyOutlook = Nothing

MailList.Close

Set MailList = Nothing

db.Close

Set db = Nothing

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:09:26.633

我将通过创建如下查询来删除不需要的记录：

**代替：**

```
Set MailList = db.OpenRecordset("MyEmailAddresses") 
```

**和：**

```
Dim qd As DAO.QueryDef
Set qd = db.CreateQueryDef("")
qd.SQL = "SELECT * FROM MyEmailAddresses WHERE email IS NOT NULL And Len(Trim(email)) > 0 And OptOut <> 1"
Set MailList = qd.Openrecordset()

' adding them to e-mails and sending them.

Do Until MailList.EOF
  ... your emailing code ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:50:20.840

我不是 100% 确定这是正确的，因为我对 VBA 很生疏。
您需要确保字段名称正确，因为我猜了一下。

跳到

```
If (MailList("email") <> "" AND MailList("opt_out") <> 1) Then 
```

并确保它具有正确的字段。

第二，当你做

```
db.OpenRecordset("MyEmailAddresses") 
```

（该位在我粘贴的代码块之前）确保查询包含选择退出字段。

```
Do Until MailList.EOF
    If (MailList("email") <> "" AND MailList("opt_out")) Then
        ' This creates the e-mail
        Set MyMail = MyOutlook.CreateItem(olMailItem)

        ' This addresses it
        MyMail.To = MailList("email")

        'This gives it a subject
        MyMail.Subject = Subjectline$

        'This gives it the body
        MyMail.HTMLBody = MyBodyText

        'If you want to send an attachment
        'uncomment the following line
        'MyMail.Attachments.Add "c:myfile.txt", olByValue, 1, "My Displayname"
        ' To briefly describe:
        ' "c:myfile.txt" = the file you want to attach
        ' olByVaue = how to pass the file. olByValue attaches it, olByReference creates a shortcut.
        ' the shortcut only works if the file is available locally (via mapped or local drive)
        ' 1 = the position in the outlook message where to attachment goes. This is ignored by most
        ' other mailers, so you might want to ignore it too. Using 1 puts the attachment
        ' first in line.
        ' "My Displayname" = If you don??t want the attachment??s icon string to be "c:myfile.txt" you
        ' can use this property to change it to something useful, i.e. "4th Qtr Report"

        'This sends it!
        MyMail.Send

        'Some people have asked how to see the e-mail
        'instead of automaticially sending it.
        'Uncomment the next line
        'And comment the "MyMail.Send" line above this.
        'MyMail.Display
        'And on to the next one...
    End If
    MailList.MoveNext
Loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T01:07:43.027

我可以建议以下不涉及任何代码并且可以使您使用与最初使用的代码完全相同的代码，除了更改该代码中的表名称。让我们将您的原始表称为“X”。创建基于表 X 的选择查询，确保所有字段都出现在查询中。还要确保电子邮件地址字段出现在选择退出字段之前（左侧）。

在电子邮件列类型的“条件”行中：不为空 在“条件”字段中，选择退出列类型：<>1

将查询视图更改为“数据表”。所有没有电子邮件地址的记录 (1) 以及 (2) 有电子邮件地址但在 OptOut 字段中有 1 的记录都不会出现在数据表中。如果您对结果感到满意，请执行以下操作： 更改回设计视图，单击“设计”选项卡，然后单击“生成表” 输入与原始表相同的名称，但添加一个“X”。请注意不要输入与原始表格相同的名称。如果您犯了这个错误，那么在运行 make table 查询时，您的原始表将被替换。在您输入表名称的小窗口中单击确定。让我们将此表名称称为“Y”。要运行此查询，请单击“设计”，然后单击“运行”。您可能会收到一条警告消息。通过允许创建新表来响应。保存您的查询

最小化查询并打开它创建的表（表 Y） 该表将没有您想要排除的记录。在最初为您工作的代码中，将您最初使用的代码中的表名从 X（原始表的名称）更改为 Y（创建的新表的名称）。

替代选项如果您需要删除不需要的记录，则无需创建新表或更改您的代码。要创建将删除不需要的记录的查询，请按照与制作表查询相同的步骤操作，但不要单击“制作表”图标，而是单击“删除”图标。保存您的删除查询，关闭它并且在此阶段不要运行它。而是首先复制您的原始表，给该副本另一个名称，如果删除查询可能导致任何问题，该副本将为您服务。复制后，双击删除查询并通过允许删除来响应警告。然后检查您的原始表格。不需要的记录应该不再存在。同样已被删除。然后运行您的原始代码而不以任何方式更改它。

请让我知道这是否对您有用。有一种方法可以通过命令按钮自动执行制作表格或删除不需要的记录的过程。

# java - 我们可以在 Java 中同时使用 fork/join 和 executor 服务吗？

> ID：15351634
> 
> 赞同：2
> 
> 时间：2013-03-12T01:16:34.710
> 
> 标签：java, concurrency

本质上，我正在编写一种算法，该算法涉及将一个大数组中的所有数字相加，每个数字都带有一个参数。我有一堆参数要运行。对我来说，所有数字的总和可能是利用 Java 中的 fork/join 的一个很好的候选者，并且可以使用固定的执行器服务池有效地运行具有不同参数的算法。

但是，有人知道如何将这两者结合起来吗？或者考虑到它们都是线程池并且我们不应该同时拥有两个池，是否可以将它们组合起来？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:37:17.677

您可以拥有一个池，并将所有任务提交到该池。

主要问题是池应该有多少线程（并行度）。您可以从默认值（N=处理器数量）开始，并以不同的并行度测试吞吐量。我的猜测是峰值吞吐量介于 N 和 2N 之间。

在 Java 8 中，甚至还有一个[公共池](http://download.java.net/jdk8/docs/api/java/util/concurrent/ForkJoinPool.html)：

> 静态 commonPool() 适用于大多数应用程序。

FJP 的好处是性能接近最佳且对调优不敏感（只要配置在合理范围内，例如，不是 10*N 线程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:28:57.273

正如zhong.j.yu 所说，池的数量并不像这些池中同时活动的线程数加起来那么重要。

ForkJoinPool 最适合用于细分/组合方案的任务，正如名称所暗示的那样`RecursiveTask`。它们可能不是汇总数组值的最佳选择，这听起来像是一种缓存/内存限制的任务。

您应该进行一些分析或至少试验线程数，因为缓存抖动会在某些时候限制性能。

ForkJoinPool 是高度优化的（检查类注释），比 ThreadPoolExecutor 优化得多，但对于内存有限的作业，您不会注意到差异。

根据我的经验，提交到任一池的每个任务都应至少花费 100µs 才能达到最佳平衡。许多小型作业可能会提供最佳的线程利用率，但处理作业队列中的所有 Runnable 会产生开销。

# vb.net - 一个属性中的多个 Set 处理程序

> ID：15351636
> 
> 赞同：0
> 
> 时间：2013-03-12T01:16:53.397
> 
> 标签：vb.net, properties

我记得遇到过在一个属性中声明多个 Set 处理程序的方法，但现在我不知道它是如何完成的。这很有用，因为可以分配不同的数据类型并且 Set 处理程序进行转换，但我得到了错误

> 'Set' 已被声明

任何人的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-15T11:08:24.910

# 这是不可能的

能同时写这两个就好了

```
sQuantity = "1234" 
```

和

```
sQuantity = 1234 
```

有两个 setter 函数，但试图用错误的参数类型编写一个 setter 函数似乎注定要失败：-

```
error BC31064: 'Set' parameter must have the same type as the containing property. 
```

如果 Visual Basic 不允许在 setter 参数类型和属性类型之间进行转换，那么就不可能有两个 setter 函数。如果 setter 函数被强制与属性具有相同的类型，那么如果有多个，它就无法知道要运行哪个！

所以我会争辩说“**这不仅看起来不可能，而且实际上不可能**！”

## 有一个解决方法

但是，您可以做的是让两个不同类型的属性更改相同的基础变量，以便您可以编写

```
sQuantityFromString = "1234" 
```

和

```
sQuantityFromInt = 1234 
```

使用

```
Public Shared WriteOnly Property sQuantityFromInt () As Integer 
```

使用一个将整数作为参数的 setter 函数，并且使用两个属性 setter 函数修改相同的底层字符串成员变量。

```
Private Shared m_sQuantity As String = Nothing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:25:32.570

据我所知，一个类属性不能有多个 Set 语句。属性不能被覆盖。

您可以使用 setter 函数（这主要是 Java 中的一种范例）并在需要时对其进行重载。然后我还建议将属性设为只读。

另一种选择是将属性定义为对象，并在集合中检查`TypeOf`用于设置属性的值并执行您想要的任何业务逻辑。这种方法的唯一问题是您的属性没有类型检查。

# python - Python：闭包中的变量绑定

> ID：15351638
> 
> 赞同：0
> 
> 时间：2013-03-12T01:17:05.173
> 
> 标签：python, variables

我正在阅读 Wes McKinney 的 Python for Data Analysis，其中有一段我不太明白。下面的代码是一个有效的闭包示例：

```
def make_watcher():
    have_seen = {}
    def has_been_seen(x):
        if x in have_seen:
            return True
        else:
            have_seen[x] = True
            return False
    return has_been_seen 
```

Wes 提到要记住的一个技术限制是，虽然您可以改变任何内部状态对象（例如将键值对添加到 dict），但您不能在封闭函数范围内绑定变量。有人可以举例说明他所说的技术限制是什么意思吗？我不确定我是否可以想象一个例子。

# shell - 如何使用选项重新编译netcat？

> ID：15351646
> 
> 赞同：0
> 
> 时间：2013-03-12T01:17:52.607
> 
> 标签：shell, unix, netcat

愚蠢的问题，但我不太擅长从 shell 配置。我想在启用 -DGAPING_SECURITY_HOLE 选项的情况下重新编译我的 netcat 版本。我已经在我的电脑上下载了源代码，我可以通过运行正常安装它：

```
$ ./configure
$ make 
```

但是如何在 Unix 系统上启用此选项？谢谢。（也是一个班级项目。实际上并不是试图破解......哈哈）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-27T14:01:32.980

```
./configure  --enable-DGAPING_SECURITY_HOLE 
```

```
./make 
```

```
cd src 
```

```
./netcat --help 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:50:28.317

尝试这样做：

```
./configure -DGAPING_SECURITY_HOLE
make Linux 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T04:54:36.990

手册说：

> -=* 编译 Netcat *=-
> 
> ```
> [ Enable -DGAPING_SECURITY_HOLE ]
>   While this option makes netcat very powerfull, it is also a huge risk in the wrong hands.. 
>    Damn hackers.
> 
> [ Enable -DTELNET ]
>   Without this option netcat will be unable to connect to a telnet server. Telnet servers &
>    there clients auto negotiate there options before the login prompt is displayed. Enabling 
>    this option allows netcat to support this functionality.
> 
>   # DFLAGS = -DTEST -DDEBUG
>   DFLAGS = -DGAPING_SECURITY_HOLE -DTELNET
>   CFLAGS = -O 
> ```

因此，编辑 makefile 并调整 DFLAGS 的设置。这也意味着这可能是默认值。

# meteor - 如何在本地 (minimongo) 上更改我的收藏？

> ID：15351647
> 
> 赞同：2
> 
> 时间：2013-03-12T01:18:00.357
> 
> 标签：meteor

当我想对我的数据集合进行更改但我不想保留它时该怎么办？换句话说，我想在本地对 minimongo 进行更改，但我不想将其传播到世界各地。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-03T10:27:53.440

使用 _collection。

```
MyCollection = new Meteor.Collection('my-collection');
// Subscribe as you see fit
Meteor.subscribe('my-publication');
// Now, to make updates locally you can access the documents in the collection without
// making any calls to the sever.
MyCollection._collection.insert({key:value});
MyCollection._collection.update({key:value}, {key:value}); 
```

适用于通常的 mini-mongo 操作。

这是未记录的，可能会在 Meteor 的未来版本中更改，恕不另行通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:18:00.357

根据[文档](http://docs.meteor.com/#meteor_collection)，我们可以创建一个 Collection 并将其名称设置为*null*。它将创建一个非托管（非同步）本地集合。

不幸的是，似乎不可能在同步集合中进行本地更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T07:14:38.533

您可以创建我称之为共享集合的“本地镜像”。这是具有 baisc 功能的要点：[https ://gist.github.com/belisarius222/4715531](https://gist.github.com/belisarius222/4715531)

这个想法是你连接一个新的本地集合（`new Meteor.Collection(null)`），以便共享集合中的任何更改也适用于本地集合。

# ruby-on-rails - 在 rails 中检索两部分 params[:id] 的第一部分

> ID：15351657
> 
> 赞同：0
> 
> 时间：2013-03-12T01:19:07.427
> 
> 标签：ruby-on-rails, model-view-controller, controller, params, viewparams

我确信这已经得到了回答，但我到处都看过，所以我提前道歉。当我运行时：

```
<%= params %> 
```

我回来了：{"controller"=>"spree/taxons", "action"=>"show", "id"=>"women/long-sleeve"}

我正在尝试访问分类单元控制器的 show 操作中的 :id 。我有：

```
def show
  @taxon_id = params[:id]
end 
```

这会将“女性/长袖”分配给@taxon_id。

有没有办法从“女性/长袖”中只检索“女性”。

我想基于此渲染一个部分，例如：

```
<% if @taxon_id == params[:id] %>
  <%= render 'shared/#{#taxon_id}' %>
<% end %> 
```

但不是渲染“共享/女性”，而是尝试渲染“共享/女性/长袖”，这不是部分的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:22:47.947

如果您只想从您的参数哈希中获得“女性”，那么您可以这样做

```
@taxon_id = params[:id].split("/").first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:22:54.957

我将拆分`/`并获取结果数组中的第一个元素：

```
params[:id].split('/').first 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T01:23:53.073

如果它总是采用这种格式，你可以改变你的路线：

```
match '/spree/taxons/:id/:slug' => 'taxons#show' 
```

您的`:id`字段将正确匹配。

# php - 从数组运行 2 个数据库查询

> ID：15351662
> 
> 赞同：-1
> 
> 时间：2013-03-12T01:19:33.137
> 
> 标签：php, mysql

我正在尝试使用第一个数组的第二个数据库查询运行 2 个数据库查询，任何人都知道为什么这会阻止页面加载？

```
$query = $this->db->query("SELECT category_id FROM listings WHERE listing_id = '1' LIMIT 1");
foreach ($query->result() as $row)
{
    $query2 = $this->db->query("SELECT listing_title FROM listings WHERE listing_type =     '".$row->category_id."' ORDER BY RAND() LIMIT 2");
    foreach ($query2->result() as $row)
    {
        echo $row->listing_title;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:22:21.493

您正在覆盖内部循环中的外部 $row

```
$query = $this->db->query("SELECT category_id FROM listings WHERE listing_id = '1' LIMIT 1");
foreach ($query->result() as $row)
{
    $query2 = $this->db->query("SELECT listing_title FROM listings WHERE listing_type =     '".$row->category_id."' ORDER BY RAND() LIMIT 2");
    foreach ($query2->result() as $row2) // <--- $row2 not $row
    {
        echo $row2->listing_title;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:42:09.673

尝试这个：

（利用准备语句、prepare() 函数等）

```
$query = "SELECT category_id FROM listings WHERE listing_id = '1' LIMIT 1;";
$query2 = "SELECT listing_title FROM listings WHERE listing_type = :categoryId ORDER BY RAND() LIMIT 2;";

$db = $this->db;

$statement = $db->prepare($query);
$statement->execute();
$statement->setFetchMode(PDO::FETCH_ASSOC);
while($row = $statement->fetch())
{
    $categoryId = $row['category_id'];

    $statement2 = $db->prepare($query2);
    $statement2->execute(array(':categoryId' => $categoryId));
    $statement2->setFetchMode(PDO::FETCH_ASSOC);
    while($row2 = $statement2->fetch())
    {
        $listingTitle = $row2['listing_title'];
        echo $listingTitle;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:42:23.143

这不是很好的代码。当 Select 查询有 时为什么要使用`foreach`循环`Limit 1`？

由于您要使用 list_id=1 的类别 ID（使用 LIMIT 1），因此您的代码可以缩短为：

```
SELECT listing_title FROM listings WHERE listing_id=1 ORDER BY RAND() LIMIT 2 
```

此外，`ORDER BY RAND()`它是大桌子上的大资源杀手。我建议找到一种更合适的方式来订购您的结果。

编辑：我将使用的完整代码：

```
$db=$this->db; //Just so we don't have to keep referencing $this (assuming you are not in a class)

$sql="SELECT listing_title 
FROM listings 
WHERE listing_id=? 
ORDER BY RAND() 
LIMIT 2";

$statement=$db->prepare($sql);
$statement->execute(array(1));

while($result=$statement->fetchObject()){
    echo $result->listing_title;
} 
```

# javascript - 无线电隐藏。改为显示 div 类。单击 div 选择链接的收音机

> ID：15351672
> 
> 赞同：0
> 
> 时间：2013-03-12T01:20:47.610
> 
> 标签：javascript, jquery, css, ajax

试图让这个工作。而不是显示普通收音机，或用图像替换收音机。我想用一个 div 替换它，我可以装扮成一个按钮，悬停类更改并单击类更改。而且点击隐藏的收音机也被选中。但还要求标签（标签参考文本显示，例如如下所示 .co.uk .com .net 等）位于 div/button 内。或者能够将文本添加到 div 按钮。这可能吗？

```
$(function() {
    $("input [name='domain_ext']").each(function() {
        if ($(this).prop('checked')) {
            $(this).hide();
            $(this).after($("< class='radioButtonOff' />"));
        } else { 
            $(this).hide();
            $(this).after($("<class='radioButtonOn' />"));
        }
    });

    $("input.radio").click(function() {
        if($(this).attr('src') == 'radiobuttonOn') {
            $(this).attr('src', 'radiobuttonOff');
            $(this).prev().attr('checked', 'false');
        } else { // its not checked, so check it
            $(this).attr('src', 'radioButtonOn');
            $(this).prev().attr('checked', 'true');
        }
    });
}); 
```

HTML

```
<table class="domain_ext_ribbon">
  <tr>
    <td><label>
      <input type="radio" name="domain_ext" value="all"  />
      All</label></td>
    <td><label>
      <input type="radio" name="domain_ext" value=".co.uk"  />
      .co.uk</label></td>
    <td><label>
      <input type="radio" name="domain_ext" value=".com" />
      .com</label></td>
  </tr>
  <tr>
    <td><label>
      <input type="radio" name="domain_ext" value=".net"  />
      .net</label></td>
    <td><label>
      <input type="radio" name="domain_ext" value=".org"  />
      .net</label></td>
    <td><label>
      <input type="radio" name="domain_ext" value=".biz" />
      .net</label></td> 
  </tr>
</table> 
```

css

```
.radioButtonOff { width: 60px; height: 20px; background: #000000;}
.radioButtonHover { width: 60px; height: 20px; background: #666666;}
.radioButtonOn { width: 60px; height: 20px; background: #999999;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:24:00.183

It looks like you have a bug in your selector; you're missing the opening brace around your attribute filter. So

```
$("input name='domain_ext']") 
```

should be

```
$("input [name='domain_ext']") 
```

* * *

Also, unless you're using specifically version 1.6 of jQuery, your code should work, but,

```
if ($(this).prop('checked')) 
```

is the preferred way to check to see if a radio button is checked, as opposed to

```
if ($(this).attr('checked')) 
```

See [this link](http://blog.jquery.com/2011/05/10/jquery-1-6-1-rc-1-released/) for more information.

* * *

And of course this

```
$(this).after($("<class='radioButtonOn' />")); 
```

doesn't really make much sense at all. I think you meant:

```
$(this).after($("<div class='radioButtonOff' />")); 
```

# sql - PostgreSQL 中的交叉表查询

> ID：15351673
> 
> 赞同：1
> 
> 时间：2013-03-12T01:20:54.757
> 
> 标签：sql, postgresql, case, postgresql-9.1, crosstab

我想在交叉表中得到这个查询的结果：

```
SELECT district, sex ,count(sex)
FROM table1
GROUP BY sex, district
ORDER BY district;

district | sex | count
---------+-----+-----
dis_1    | M   | 2
dis_1    | F   | 4
dis_1    | NI  | 1
dis_2    | M   | 5
dis_2    | F   | 2 
```

像这样：

```
district | M | F | NI
---------+---+---+---
dis_1    | 2 | 4 | 1
dis_2    | 5 | 2 | 0 
```

我做了一些测试但没有成功，如下查询：

```
SELECT  row_name AS district,
        category_1::varchar(10) AS m,
        category_2::varchar(10) AS f,
        category_3::varchar(10) AS ni,
        category_4::int AS count

FROM crosstab('select district, sex, count(*)
               from table1 group by district, sex')
     AS ct  (row_name varchar(27), 
             category_1 varchar(10), 
             category_2 varchar(10), 
             category_3 varchar(10),
             category_4 int); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:37:17.547

这个交叉表函数完全符合您的要求（简化数据类型除外）：

```
SELECT *
FROM   crosstab('
         SELECT district, sex, count(*)::int
         FROM   table1
         GROUP  BY 1,2
         ORDER  BY 1,2'
        ,$$VALUES ('M'), ('F'), ('NI')$$)
AS ct (district text
      ,"M"      int
      ,"F"      int
      ,"NI"     int); 
```

您的尝试中有几个错误。
在这个密切相关的答案中查找详细信息和解释：
[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T01:48:38.893

您可以使用带有`CASE`表达式的聚合函数来获取列中的结果：

```
select district,
  sum(case when sex ='M' then 1 else 0 end) M,
  sum(case when sex ='F' then 1 else 0 end) F,
  sum(case when sex ='NI' then 1 else 0 end) NI
from table1
group by district
order by district 
```

# django - 模型管理器可以访问其模型的元属性（`Meta.unique_together`）吗？

> ID：15351676
> 
> 赞同：6
> 
> 时间：2013-03-12T01:21:31.423
> 
> 标签：django, django-models, metaclass, natural-key

这是我对广义自然键模型管理器的尝试。就像[文档](https://docs.djangoproject.com/en/1.2/topics/serialization/#deserialization-of-natural-keys)一样，除了它尝试（不成功）从 Meta.unique_together 属性中确定自然键字段名称。

```
class NaturalKeyModelManager(Manager):

    def get_by_natural_key(self, *args):
        field_dict = {}
        for i, k in enumerate(self.model.Meta.unique_together[0]):
            field_dict[k] = args[i]
        return self.get(**field_dict) 
```

如果我在 for 循环之前插入调试打印，如下所示：

```
print dir(self.model.Meta) 
```

它根本没有列出 unqiue_together 属性：

```
['__doc__', '__module__', 'abstract'] 
```

“抽象”有点让我担心，但另一个调试打印显示我尝试使用自然键管理的模型不是抽象的：

```
>>> print self.model.Meta.abstract
False 
```

我混合了很多抽象基类。这可能是问题吗？

```
class MixedModel(NamedModel, TimeStampedModel, VersionedModel, Model):
    objects = NaturalKeyModelManager()

    class Meta:
        unique_together = (('name', 'version',),) 
```

为了完整起见，这里是其中一种混合：

```
class TimeStampedModel(Model):
    created = DateTimeField(_("Created"),     auto_now_add=True, null=True, editable=False)
    updated = DateTimeField(_("Updated"),     auto_now=True,     null=True, editable=True)

    class Meta:
        abstract = True 
```

硬编码的模型管理器工作得很好：

```
class MixedModelManager(Manager):
    def get_by_natural_key(self, name, version):
        return self.get(name=name, version=version) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T19:58:33.710

为了获得传递给元的实际选项，您应该使用`self.model._meta`而不是`self.model.Meta`

# php - MySQL内部连接三个表以在日历中使用

> ID：15351680
> 
> 赞同：0
> 
> 时间：2013-03-12T01:21:55.893
> 
> 标签：php, mysql, calendar

跟进我的[问题](https://stackoverflow.com/questions/15223032/mysql-display-all-date-in-between-range)，我使用答案在我的日历上生成数据，称为维护日历，显示飞机的维护计划。这是它的 MySQL 查询：

```
SELECT DISTINCT s.reg  AS 'reg', 
                a.date AS 'date' 
FROM   (SELECT Curdate() 
               + INTERVAL (a.a + (10 * b.a) + (100 * c.a)) day AS Date 
        FROM   (SELECT 0 AS a 
                UNION ALL SELECT 1 
                UNION ALL SELECT 2 
                UNION ALL SELECT 3 
                UNION ALL SELECT 4 
                UNION ALL SELECT 5 
                UNION ALL SELECT 6 
                UNION ALL SELECT 7 
                UNION ALL SELECT 8 
                UNION ALL SELECT 9) AS a 
               CROSS JOIN (SELECT 0 AS a 
                           UNION ALL SELECT 1 
                           UNION ALL SELECT 2 
                           UNION ALL SELECT 3 
                           UNION ALL SELECT 4 
                           UNION ALL SELECT 5 
                           UNION ALL SELECT 6 
                           UNION ALL SELECT 7 
                           UNION ALL SELECT 8 
                           UNION ALL SELECT 9) AS b 
               CROSS JOIN (SELECT 0 AS a 
                           UNION ALL SELECT 1 
                           UNION ALL SELECT 2 
                           UNION ALL SELECT 3 
                           UNION ALL SELECT 4 
                           UNION ALL SELECT 5 
                           UNION ALL SELECT 6 
                           UNION ALL SELECT 7 
                           UNION ALL SELECT 8 
                           UNION ALL SELECT 9) AS c) a 
       INNER JOIN maintenance_sched s 
               ON a.date >= s.date_from 
                  AND a.date <= s.date_to 
WHERE  Month(date) = '".$month."' 
       AND Dayofmonth(date) = '".$dayArray["mday"]."' 
       AND Year(date) = '".$year."' 
```

这是 maintenance_sched 数据库：

![维护计划表](../Images/7466aceb85e137370991233245cc18a6.png)

日历看起来像这样（基于maintenance_sched 的数据）：

![在此处输入图像描述](../Images/e170fc65c8905eb6387046f3467b5e8f.png)

然后，我有另一个名为预订日历的日历，其代码与维护日历相同，但查询不同。这是预订日历查询：`SELECT acode FROM reservation WHERE month(etd) = '".$month."' AND dayofmonth(etd) = '".$dayArray["mday"]."' AND year(etd) = '".$year."' ORDER BY etd"`。

预约表是这样的：

![在此处输入图像描述](../Images/8239abd4fcf10fd719642f3f85fd36c3.png)

预订日历如下所示：

![在此处输入图像描述](../Images/54f9be21ef84c5ae754d55b1fde1f581.png)

**编辑：**

我想要做的是：将这两个日历放在**一个日历**中，并将 maintenance_sched 查询的结果输出为带有**删除线**的字符串。但我似乎无法将这两个查询合二为一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:38:46.737

由于两个表之间没有关系，我们不能进行连接，最好使用 UNION 来合并结果。

此查询使用 group_concat 因此将生成以下形式的常见结果

```
2013-03-15 | RP-C1728, RP-C1086

2013-03-08 | RP-C1728, RP-C1086, RP-C143 
```

如果您不想以这种格式记录，那么只需`group_concat`从查询中删除 , group by 子句。

询问

```
SELECT a.date, group_concat(a.reg) 
FROM 
     (SELECT DISTINCT s.reg  AS 'reg', 
                a.date AS 'date' 
        FROM   (SELECT Curdate() 
               + INTERVAL (a.a + (10 * b.a) + (100 * c.a)) day AS Date 
            FROM   (SELECT 0 AS a 
                UNION ALL SELECT 1 
                UNION ALL SELECT 2 
                UNION ALL SELECT 3 
                UNION ALL SELECT 4 
                UNION ALL SELECT 5 
                UNION ALL SELECT 6 
                UNION ALL SELECT 7 
                UNION ALL SELECT 8 
                UNION ALL SELECT 9) AS a 
               CROSS JOIN (SELECT 0 AS a 
                           UNION ALL SELECT 1 
                           UNION ALL SELECT 2 
                           UNION ALL SELECT 3 
                           UNION ALL SELECT 4 
                           UNION ALL SELECT 5 
                           UNION ALL SELECT 6 
                           UNION ALL SELECT 7 
                           UNION ALL SELECT 8 
                           UNION ALL SELECT 9) AS b 
               CROSS JOIN (SELECT 0 AS a 
                           UNION ALL SELECT 1 
                           UNION ALL SELECT 2 
                           UNION ALL SELECT 3 
                           UNION ALL SELECT 4 
                           UNION ALL SELECT 5 
                           UNION ALL SELECT 6 
                           UNION ALL SELECT 7 
                           UNION ALL SELECT 8 
                           UNION ALL SELECT 9) AS c) a 
       INNER JOIN maintenance_sched s 
               ON a.date >= s.date_from 
                  AND a.date <= s.date_to 
WHERE  Month(date) = '".$month."' 
       AND Dayofmonth(date) = '".$dayArray["mday"]."' 
       AND Year(date) = '".$year."' 
UNION ALL 
SELECT acode as 'reg', date as 'date' //Add the date logic here as per your need
FROM reservation 
WHERE month(etd) = '".$month."' AND 
dayofmonth(etd) = '".$dayArray["mday"]."' AND 
year(etd) = '".$year."' ORDER BY etd) a
GROUP BY a.date; 
```

注意对于第二个查询添加相应的日期逻辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:24:40.833

我确实认为这个问题的答案是简单地加入这两个查询。这方面的一个示例可能如下所示，您只需将不在第二个表中的任何列清空。

```
SELECT id, date, field3, description 
FROM table1 
UNION 
SELECT id, date, field3, null 
FROM table2 
```

# javascript - 滚动一个 div 并为另一个 div 设置动画

> ID：15351682
> 
> 赞同：0
> 
> 时间：2013-03-12T01:22:01.120
> 
> 标签：javascript, jquery, animation

我有 1 到 6 个动态创建的 div。我还有嵌套的 div，当我滚动父 div 时，我想在其中设置动画。现在，当我滚动它时，所有的 div 都会被动画化，我将如何将每个 div 作为参数发送？

这是我的代码的[jsfiddle](http://jsfiddle.net/qNBEJ/2/)

```
<div class="animate" id="indexJoinBanner" > 
  Roll over this should animate move1
    <div class="move">move1XXXXXXXXXXXXX</div>
  </div>
  <div class="animate" id="indexJoinBanner" > 
  Roll over this should animate move2
    <div class="move">move2XXXXXXXXXXXXX</div>
  </div>
  <div class="animate" id="indexJoinBanner" > 
  Roll over this should animate move3
    <div class="move">move3XXXXXXXXXXXXX</div>
  </div>

<script>
 $('.animate').on('mouseover', function () {
   $('.move').animate({
     left: "0px",
   },500 );
 }).on('mouseout', function () {
   $('.move').animate({
     left: "-150px",
   },500 );
 })
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:29:03.613

使用`mouseenter`和`mouseleave`。问题是`mouseoever`/`mouseout`在您不想要的子元素之间移动时触发。

[http://jsfiddle.net/ExplosionPIlls/qNBEJ/3/](http://jsfiddle.net/ExplosionPIlls/qNBEJ/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:35:27.787

通过调用`$('.move')`，您正在搜索文档中具有类移动的所有元素，并且您只想为当前悬停元素的子元素设置动画。也更好用`mouseenter`and `mouseleave`（参见文档：[mouseenter](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/mouseenter)和[mouseleave](https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/mouseleave)）

```
$('.animate').each(function () {
    var self = $(this),
        move = self.find('.move');
    self.on('mouseenter', function () {
        move.animate({
            left: "0px"
        }, 500);
    }).on('mouseleave', function () {
        move.animate({
            left: "-150px"
        }, 500);
    });
}); 
```

# php - 函数运行所需的时间

> ID：15351688
> 
> 赞同：2
> 
> 时间：2013-03-12T01:22:28.033
> 
> 标签：php

获取函数运行到完成需要多长时间然后将该数字存储在 PHP 中的变量中的最佳方法是什么？

我会如何考虑这样做是在函数执行之前和之后获取时间，然后从后者获取前者的差异，但我不知道如何在 php.ini 中获取时间。

另外，我试图让单位在十分之一秒和百分之一秒（0.42 秒）内，希望该功能需要不到一秒的时间来完成，所以如果有人可以帮助我将其转换为这些单位，我将不胜感激.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T01:23:39.520

您可以使用[microtime()](http://php.net/microtime)来做到这一点。

```
$start = microtime(true);
for ($x=0;$x<10000;$x++) {}
$end = microtime(true);
echo 'It took ' . ($end-$start) . ' seconds!'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:26:14.050

请参阅文档中的“Example #1 Timing script execution with microtime()”。

[http://docs.php.net/manual/en/function.microtime.php](http://docs.php.net/manual/en/function.microtime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:24:20.667

```
$time = time();
call_your_function();
$time = time()-$time;
echo "The function took $time seconds to run\n"; 
```

# sql - 具有多个 ROW_NUMBER 或 RANK 的 SQL

> ID：15351690
> 
> 赞同：4
> 
> 时间：2013-03-12T01:22:36.413
> 
> 标签：sql, sql-server-2008

我需要在（例如）Person 和PersonEvents 之间对同一个表进行多次连接。每个人有多个事件（0 个或更多）。我需要创建一个视图，从他们最近的事件中选择每个人的某些列，以及从下一个最近的事件中选择列。

人物资料：

```
Id    Name
1     Iain
2     Fred
3     Mary
4     Foo
5     Bar 
```

人员事件数据：

```
PersonId    DateStarted                ReasonForLeaving
1           2011-03-12 00:00:00.000    sick
1           2013-02-12 00:00:00.000    NULL
1           2012-04-12 00:00:00.000    holiday
2           2011-05-12 00:00:00.000    new baby
2           2013-06-12 00:00:00.000    NULL
2           2012-07-12 00:00:00.000    had enough
3           2011-08-12 00:00:00.000    pregnant
3           2013-09-12 00:00:00.000    NULL
4           2012-10-12 00:00:00.000    NULL 
```

输出样本将是：

```
Id   Name    MemberSince                ReasonForChange
1    Iain    2011-03-12 00:00:00.000    holiday
4    Foo     2012-10-12 00:00:00.000    NULL
... 
```

“旧方式”使用 top 1 join 或 sub-select 语句：

```
SELECT p.*,
    (
        SELECT TOP 1 DateStarted
        FROM PersonEvents e
        WHERE e.PersonId = p.Id
        ORDER BY DateFoo DESC
    ) As MemberSince
FROM Person p
.... 
```

但是，如果您需要来自此 Join 的多个列（例如 Date、Comment 和可能的其他 ID），那么您需要执行多个子选择语句，这很昂贵。

**所以问题是**：如何使用最近和以前事件的行号从连接中获取多列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T01:22:36.413

我想出的最直接（即可读的 SQL）答案使用 WITH 和 ROW_NUMBER。

首先，进行 ROW_NUMBER 查询，对事件进行排序，并为每个事件赋予该 PersonId 唯一的编号：

```
SELECT *,
    ROW_NUMBER() OVER (PARTITION BY PersonId ORDER BY DateStarted DESC) AS EventOrder
FROM PersonEvents 
```

结果：

```
PersonId    DateStarted              ReasonForLeaving    EventOrder
1           2013-02-12 00:00:00.000  NULL                1
1           2012-04-12 00:00:00.000  holiday             2
1           2011-03-12 00:00:00.000  sick                3
2           2013-06-12 00:00:00.000  NULL                1
2           2012-07-12 00:00:00.000  had enough          2
2           2011-05-12 00:00:00.000  new baby            3
3           2013-09-12 00:00:00.000  NULL                1
3           2011-08-12 00:00:00.000  pregnant            2
4           2012-10-12 00:00:00.000  NULL                1 
```

现在，每个人的“第一个”事件（在我的情况下是最近的）包含更改的日期（*现实生活中的示例*：这是跨多所学校的学生注册历史数据，包含学校 ID 和许多其他闲话）。每个人的“第二次”事件包含之前的事件和离开的原因。要将其添加在一起：

```
WITH SortedEvents AS (
     SELECT *,
         ROW_NUMBER() OVER (PARTITION BY PersonId ORDER BY ReasonForLeaving DESC) AS EventOrder
     FROM PersonEvents
)
SELECT p.*, MostRecent.DateStarted AS MemberSince, NextRecent.ReasonForLeaving AS ReasonForChange
FROM Person p
     LEFT OUTER JOIN SortedEvents AS MostRecent ON p.Id = MostRecent.PersonId AND MostRecent.EventOrder = 1
     LEFT OUTER JOIN SortedEvents AS NextRecent ON p.Id = NextRecent.PersonId AND NextRecent.EventOrder = 2 
```

它提供了格式良好的输出：

```
Id          Name   MemberSince              ReasonForChange
1           Iain   2013-02-12 00:00:00.000  holiday
2           Fred   2013-06-12 00:00:00.000  had enough
3           Mary   2013-09-12 00:00:00.000  pregnant
4           Foo    2012-10-12 00:00:00.000  NULL
5           Bar    NULL                     NULL 
```

实际上，您可以从任何行号中选择多列。现实生活中的例子（同样，学生入学历史）选择：

1.  从硕士生表：
    *   学生卡
    *   姓名
    *   出生日期等
2.  从注册历史表中作为“当前注册”
    *   学校编号
    *   各种注册状态信息
    *   开始日期
3.  从注册历史表中作为“以前的注册”
    *   离开的原因

对于大约 15 万名学生及其各自的历史，这种方法非常有效。

我的测试的完整 SQL：

```
CREATE TABLE Person
(
     Id INT NOT NULL,
     Name VARCHAR(50)
)
GO
CREATE TABLE PersonEvents
(
     PersonId INT NOT NULL,
     DateStarted DATETIME NOT NULL,
     ReasonForLeaving VARCHAR(50)
)
GO
INSERT INTO Person
     SELECT 1, 'Iain' UNION ALL
     SELECT 2, 'Fred' UNION ALL
     SELECT 3, 'Mary' UNION ALL
     SELECT 4, 'Foo'  UNION ALL
     SELECT 5, 'Bar'
GO
INSERT INTO PersonEvents
     SELECT 1, '20110312', 'sick'       UNION ALL
     SELECT 1, '20130212', NULL         UNION ALL
     SELECT 1, '20120412', 'holiday'    UNION ALL
     SELECT 2, '20110512', 'new baby'   UNION ALL
     SELECT 2, '20130612', NULL         UNION ALL
     SELECT 2, '20120712', 'had enough' UNION ALL
     SELECT 3, '20110812', 'pregnant'   UNION ALL
     SELECT 3, '20130912', NULL         UNION ALL
     SELECT 4, '20121012', NULL
GO

--SELECT *
--FROM Person
--SELECT *
--FROM PersonEvents
--GO
WITH SortedEvents AS (
    SELECT *,
        ROW_NUMBER() OVER (PARTITION BY PersonId ORDER BY DateStarted DESC) AS EventOrder
    FROM PersonEvents
)
SELECT p.*, MostRecent.DateStarted AS MemberSince, NextRecent.ReasonForLeaving AS ReasonForChange
FROM Person p
    LEFT OUTER JOIN SortedEvents AS MostRecent ON p.Id = MostRecent.PersonId AND MostRecent.EventOrder = 1
    LEFT OUTER JOIN SortedEvents AS NextRecent ON p.Id = NextRecent.PersonId AND NextRecent.EventOrder = 2
GO

SELECT p.*,
    (
        SELECT TOP 1 DateStarted
        FROM PersonEvents pe
        WHERE pe.PersonId = p.Id
        ORDER BY DateStarted DESC
    ) AS MemberSince,
    'unknown' AS ReasonForChange
FROM Person p
GO

DROP TABLE Person
DROP TABLE PersonEvents
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:23:21.297

对于最后一个事件和上一个事件日期：

```
SELECT ID,NAME,NextToMostEventDate,ReasonForLeaving
FROM PersonEvents pe
INNER JOIN(
    SELECT pe1.PersonId,TheMostEventDate,NextToMostEventDate=MAX(pe1.DateStarted)
    FROM PersonEvents pe1
    INNER JOIN(
        SELECT PersonId,TheMostEventDate=MAX(DateStarted)
        FROM PersonEvents
        GROUP BY PersonId 
    ) pe2 
    ON pe2.PersonId=pe1.PersonId
    WHERE DateStarted<TheMostEventDate
    GROUP BY pe1.PersonId,TheMostEventDate
) pe12 ON pe12.PersonId=pe.PersonId
INNER JOIN Person ON Id=pe.PersonId
WHERE pe.DateStarted=TheMostEventDate 
```

最后一个活动日期和上一个活动：

```
SELECT ID,NAME,TheMostEventDate,ReasonForLeaving
FROM PersonEvents pe
INNER JOIN(
    SELECT pe1.PersonId,TheMostEventDate,NextToMostEventDate=MAX(pe1.DateStarted)
    FROM PersonEvents pe1
    INNER JOIN(
        SELECT PersonId,TheMostEventDate=MAX(DateStarted)
        FROM PersonEvents
        GROUP BY PersonId 
    ) pe2 
    ON pe2.PersonId=pe1.PersonId
    WHERE DateStarted<TheMostEventDate
    GROUP BY pe1.PersonId,TheMostEventDate
) pe12 ON pe12.PersonId=pe.PersonId
INNER JOIN Person ON Id=pe.PersonId
WHERE pe.DateStarted=NextToMostEventDate 
```

# jquery - jquery easyui TreeGrid：如何只使列标题加粗

> ID：15351696
> 
> 赞同：2
> 
> 时间：2013-03-12T01:23:03.257
> 
> 标签：jquery, css, datagrid, jquery-easyui

我正在使用 jQuery EasyUI [TreeGrid](http://www.jeasyui.com/documentation/treegrid.php)。如何仅更改列标题的样式？

这是一个[小提琴](http://jsfiddle.net/tjdG7/3/)。有人可以展示如何制作标题`Bold`吗？

文档中没有关于如何仅设置标题样式的帮助。我假设它需要通过覆盖一些 css 来完成。我尝试通过查看 Firebug 中的样式来做到这一点

```
.datagrid-header {
    font-weight: bold !important;
} 
```

但这无济于事，因为easyui以某种方式覆盖了它。我还尝试了其他一些规则，但我无法弄清楚这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:32:53.820

试试看。

```
.datagrid-cell span {font-weight:bold;}
// or
.datagrid-row-over, .datagrid-header td.datagrid-header-over {font-weight:bold;} 
```

# scala - 从函数的返回值中提取符号

> ID：15351697
> 
> 赞同：3
> 
> 时间：2013-03-12T01:23:12.697
> 
> 标签：scala, macros, scala-macros

使用宏我想获得一个通用的解决方案来引用`Symbol`案例类数据树的字段和子字段。

受此[要点](https://gist.github.com/xeno-by/4542402)的启发，我创建了以下骨架：

```
import language.experimental.macros
import reflect.runtime.universe._
import reflect.macros.Context

object SubRef {

  case class SubRef[ SourceT, TargetT ]( symbol : Symbol )

  implicit def functionToSubRef
    [ SourceT, TargetT ]
    ( f : SourceT => TargetT ) 
    : SubRef[ SourceT, TargetT ]
    = macro functionToSubRefMacro[ SourceT, TargetT ]

  def functionToSubRefMacro
    [ SourceT : c.WeakTypeTag, TargetT : c.WeakTypeTag ]
    ( c : Context )
    ( f : c.Expr[ SourceT => TargetT ] )
    : c.Expr[ SubRef[ SourceT, TargetT ] ]
    = ???

} 
```

我希望这个解决方案能像这样工作：

```
case class A( b : B )
case class B( c : Int )

val ref : SubRef[ A, Int ] = _.b.c 
```

如果传入函数，宏转换应该失败：

*   不是单一的表达
*   不返回符号的值，它是源符号的子字段，即`targetSymbol.owner[.owner...] == sourceSymbol`

缺少的宏实现应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:27:59.100

除了 Simon 指出的你的符号在 2.10 中不起作用之外，编写这个宏应该很容易。看起来您已经知道如何执行验证，所以我将省略这部分。

这里真正的挑战是将编译时反射工件 ( `c.universe.Symbol`) 转换为运行时反射工件 ( `ru.Symbol`)。这可以通过物化来完成。已经有`c.reifyTree`and `c.reifyType`，它对树和类型执行此操作，但`c.reifySymbol`尚不存在。

幸运的是，符号具体化应该很容易实现。只需将您的符号包装在一个标识中，即 write `Ident(sym)`，然后调用`c.reifyTree`结果。然后在运行时，您只需从包装树中提取一个符号即可。

PS 现在我没有时间编写完成所有这些事情的代码。如果你们中的任何人实现宏并发布代码，我很乐意删除我的答案并为你投票:)

# ruby - Sublime Text 2 在尝试运行 Grunt 构建系统时给出 PATH 错误

> ID：15351699
> 
> 赞同：-1
> 
> 时间：2013-03-12T01:23:31.440
> 
> 标签：ruby, macos, node.js, sublimetext2, gruntjs

我为 Sublime Text 2 创建了这个构建系统来运行我的 Grunt 项目：

```
{

"cmd": ["grunt"] ,  
"selector": ["source.js", "source.less", "source.json"] ,
"working_dir": "${project_path}/MyProject" ,
"path": "/Users/me/.nvm/v0.10.0/bin",
"shell": true

} 
```

每次我尝试构建时，都会收到此错误：

```
Warning: You need to have Ruby and Sass installed and in your PATH for
this task to work. More info: 
```

尽管我已经安装了`Ruby`和`Sass`，并且两者都在终端中可用。另外，我试过`"echo $PATH"`了，看起来还可以...

> /Library/Frameworks/Python.framework/Versions/2.7/bin:/Users/me/.venvburrito/bin:/Users/me/.nvm/v0.8.22/bin:/opt/local/bin:/opt/local /sbin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/Users/me/.rvm/gems/ruby-2.0.0-p0 /bin:/Users/me/.rvm/gems/ruby-2.0.0-p0@global/bin:/Users/me/.rvm/rubies/ruby-2.0.0-p0/bin:/Users/me/ .rvm/bin:/Library/Frameworks/Python.framework/Versions/2.7/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin: /usr/local/bin:/usr/X11/bin:/usr/local/git/bin

为什么 sublime 似乎无法访问我的环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:18:07.280

该`"path"`属性将覆盖现有路径。您需要删除该属性或手动添加到 Sass 二进制文件的路径。您可以使用`which sass`.

例子：

`"path": "/usr/local/bin/:/Users/me/.nvm/v0.10.0/bin"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:39:22.200

得到它的工作。我不得不将此添加到“路径”属性中：

```
"/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/me/.rvm/rubies/ruby-2.0.0-p0/bin/ruby:/Users/me/.rvm/gems/ruby-2.0.0-p0/bin/sass:/Users/me/.nvm/v0.10.0/bin" 
```

显然你必须用你自己的名字替换“我”。感谢 Sindre Sorhus 为我指明了正确的方向。

# css - CSS drop down menu not working on IE7

> ID：15351700
> 
> 赞同：0
> 
> 时间：2013-03-12T01:23:39.263
> 
> 标签：css, internet-explorer-7

Every1,

I am building a website for an organization that still only uses IE7\. When creating this drop down menu on my laptop, the menu works without a problem. However, when trying it for the first time on a IE7 browser, it does not work.

```
<!doctype html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="./menu.css">
    <link rel="stylesheet" type="text/css" href="./styles.css">
    <title>Title</title>
</head>
<body>
    <header>
        <div id="logo">
            <img src="Crest.png">
        </div>
        <p id="name">Somename</p>
        <p id="motto">MyMotto</p>
    </header>

    <nav id="navigation">
        <ul>
            <li id="menu"><a href="#">Home</a></li>
            <li id="menu"><a href="#">Pubs</a>
                <ul id="subMenu">
                    <li><a href="#">Book 1</a></li>
                    <li><a href="#">Book 2</a></li>
                </ul>
            </li>
            <li id="menu"><a href="#">Links to Website</a>
                <ul id="subMenu">
                    <li><a href="#">Link 1</a></li>
                    <li><a href="#">Link 2</a></li>
                </ul>
            </li>
            <li id="menu"><a href="#">Departments</a></li>
            <li id="menu"><a href="#">References</a>
                <ul id="subMenu">
                    <li><a href="#">Ref 1</a></li>
                    <li><a href="#">Ref 2</a></li>
                </ul>
            </li>
            <li id="menu"><a href="#">Links</a>
                <ul id="subMenu">
                    <li><a href="#">More 1</a></li>
                    <li><a href="#">More 2</a></li>
                </ul>
            </li>
            <li id="menu"><a href="#">Forms</a>
                <ul id="subMenu">
                    <li><a href="#">Form 1</a></li>
                    <li><a href="#">Form 2</a></li>
                </ul>
            </li>
            <li id="menu"><a href="#">Orders</a></li>
            <li id="menu"><a href="#">Status</a></li>
        </ul>
    </nav>
</body> 
```

Code for the menu.css

```
/* #navigation */
ul { 
    list-style:none;
    padding:0px;     
    margin:0px;
}

ul#subMenu a:hover { color: #FF0; font-weight: bold;}

#navigation { 
    margin-top: 20px;
    float: left;
}

#navigation ul, #navigation li {
    list-style: none; 
    padding: 0; 
    margin: 0; 
    display: inline;
    background-color: #30C;
    /* box-shadow: #111 3px 3px 4px; */
}

li#menu { box-shadow: #111 3px 3px 4px; }
ul#subMenu { box-shadow: #111 3px 3px 4px; }

#navigation ul li {
    float: left; 
    position: relative;
}

#navigation ul li a {
    display: block;
    padding: 3px 20px;
    margin: 1px;
    font-size: 12px;
    white-space: nowrap;
    color: #FFF;
    text-decoration: none;
    font-size: 16px;
}

#navigation ul ul {
    position: absolute;
    top: -99999px;  /* Remove them out of viewport */
    left: 0;        
    opacity: 0;     /* Hide sub level, we will use this in transition */
    -webkit-transition: opacity .4s ease-in-out;
    -moz-transition: opacity .4s ease-in-out;
    -o-transition: opacity .4s ease-in-out;
        transition: opacity .4s ease-in-out;
    z-index: 497;
    background: #30C;
    padding: 2px;
    border: 1px solid #444;
    border-top: none;
    box-shadow: #111 0 3px 4px;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}

#navigation ul ul ul {
    position: absolute;
    top: -99999px;
    left: 100%;
    border-radius: 6px;
    border: 1px solid #444;
    background-color: #FFF;
}

#navigation ul li:hover>ul {
    opacity: 1;
    position: absolute;
    top: 99%;
    left: 0;
}

#navigation ul ul li:hover>ul {
    opacity: 1;
    position: absolute;
    top: 0%;
    left: 100%;
} 
```

Code for the styles.css

```
body {
    width: 900px;
    margin: 0 auto;
    padding: 0;
    background-color: #006;
}

@font-face {
    font-family: Cowboys;
    src: url('Bleeding_Cowboys.ttf');
}

#logo {
    margin-top: 20px;
    padding: 0;
    float: left;
}

#name {
    float: left;
    font-size: 85px;
    margin: 0;
    margin-top: 20px;
    padding: 0;
    color: #FC0;
    font-family: Cowboys;
    position: relative;
    left: 40px;
}

#motto {
    float: left;
    font-size: 25px;
    margin: 0;
    padding: 0;
    position: relative;
    left: -460px;
    top: 160px;
    color: #FC0;
    font-family: Cowboys;
    font-style: italic;
} 
```

The above code on IE7 does not even display the properties of a horizontal menu, instead it show it as vertical menu displaying all sub-menus and the font-face above also does not work.

What am I doing wrong?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:11:19.547

其他人指出`<nav>`IE7 不支持该标签。然而，问题远不止于此。IE7 不支持 HTML5 并且您的页面完全是 HTML5 - Doctype 不合适，不支持 header 标签，不支持 nav 标签。

您可以包含一些 javascript 库，以帮助推动旧版浏览器理解 HTML5。

*   [现代化者](http://modernizr.com/)
*   [HTML5 刀](https://code.google.com/p/html5shiv/)

此外，一些预先构建的框架，例如[HTML5 Boilerplate](http://html5boilerplate.com/)也可能有助于支持旧版浏览器。

如果您主要为 IE7 构建，您可能希望坚持使用 xHTML 或 HTML4 和 CSS2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:28:42.450

ie7 不知道是什么`nav`....你应该使用 html5shiv.js 将其包含在文档中，然后添加`nav{display:block}`初学者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:06:59.673

nav 不适用于 ie7 及以下使用

```
<!DOCTYPE html> 
```

在标题区域的顶部

# ios - UITable Cell not appearing on XIB when navigated from another XIB

> ID：15351706
> 
> 赞同：1
> 
> 时间：2013-03-12T01:24:17.907
> 
> 标签：ios, objective-c, uitableview

I did an empty project on UITable Cells and it worked. Using the same code I added in to an existing project where there are multiple xib linked. When navigating from another xib to this page, the table cells did appear but the content and the required number of cells did not run.

Below is the code of my current project:

**OptionViewController.m**:

```
#import "OptionViewController.h"
#import "FishAppDelegate.h"
#import "MainViewController.h"
#import "PetFishViewController.h"
#import "MarineFishViewController.h"

@interface OptionViewController ()

@end

@implementation OptionViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
     self.title =@"Choose a category :)";

    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)PetFish:(id)sender
{
    PetFishViewController *petFish = [[PetFishViewController alloc]initWithNibName:nil bundle:nil];
    [[self navigationController] pushViewController:petFish animated:YES];
}

// this is the sub class containing table cells

-(IBAction)MarineFish:(id)sender   
{
    MarineFishViewController *MarineFish = [[MarineFishViewController alloc]initWithNibName:nil bundle:nil];
    [[self navigationController] pushViewController:MarineFish animated:YES];
}

@end 
```

**At the current sub class: marine fish**

**MarineFishController.h**

```
#import <Foundation/Foundation.h>

@interface MarineFishViewController : UITableViewController
{
    NSMutableArray *fishList;
}

@end 
```

**MarineFishController.m :**

```
#import "MarineFishViewController.h"
#import "MarineFish.h"

@implementation MarineFishViewController
{
    /*NSArray *tableData;
    NSArray *thumbnail;
     */

}

-(id) init{

    //call the superclass
    self = [super initWithStyle:UITableViewStyleGrouped];

    if(self){

        fishList = [[NSMutableArray alloc] init];

        MarineFish *Item1 = [[MarineFish alloc] initWithName:@"Shark" imageName:@"Sea.jpg"];

        [fishList addObject:Item1];
    }

    return self;
}

-(id)initWithStyle:(UITableViewStyle)style{

    return [self init];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return  [fishList count];
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //create an instance of uitableviewcell
    //check for a reusable cell first, use if exist

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    //if there is no reusable cell of this type,create new one

    if(!cell)
    {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];

    }

    //set text on the cell

    MarineFish *p = [fishList objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:[[NSString alloc] initWithFormat:@"%@",[p fishName]]];

}

@end 
```

Regarding to the table. I only added one item to the fish list which is item1 and hence should only have one cell in display.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:37:42.390

您不需要覆盖`init`和`initWithStyle:`方法。将您的代码`init`从`viewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    fishList = [[NSMutableArray alloc] init];
    MarineFish *Item1 = [[MarineFish alloc] initWithName:@"Shark" imageName:@"Sea.jpg"];
    [fishList addObject:Item1];
} 
```

**编辑** 错误是如此健忘......

```
-(UITableViewCell*)tableView:(UITableView *)tableView
       cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

必须返回一个`UITableViewCell`对象。所以放在`return cell;`最后。[这里](http://pastebin.com/dS7uM8eD)是编辑的`MarineFishViewController.m`。

# html - How can I decrease the height of an element top to bottom rather than the default bottom to top?

> ID：15351712
> 
> 赞同：2
> 
> 时间：2013-03-12T01:24:53.777
> 
> 标签：html, image, css, height

I have an image that represents a gauge in a game I'm making and, from testing it, I realized that decreasing the height takes away from the bottom rather than the top. I'd like to invert this somehow. Is there anyway to?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:57:17.840

将元素属性的 y 位置值调整为`background-position`图像上方的设定距离。

例如，如果您的背景图像文件是 100 像素高，并且您将其 div 设置为 30 像素高，那么您的背景图像的 y 位置需要在 div 顶部上方 70 像素，以便像素似乎从图像顶部消失。

HTML：

```
<div id="my-div"></div> 
```

CSS：

```
#my-div {
  height: 30px;
  background-image: url( 'my-image.png' );
  background-position: 0px -70px;
} 
```

# php - 以某种格式存储变量 PHP

> ID：15351715
> 
> 赞同：0
> 
> 时间：2013-03-12T01:26:00.607
> 
> 标签：php, fwrite

我正在尝试以某种格式将数据存储在文本文件中。

这是代码：

```
<?php
header ('Location: http://myshoppingsite.com/ ');
$handle = fopen("userswhobought.txt", "a");
foreach($_POST as $variable => $value) {
    fwrite($handle, $variable);
    fwrite($handle, "=");
    fwrite($handle, $value);
    fwrite($handle, "\r\n");
}
fwrite($handle, "===============\r\n");
fclose($handle);
exit;
?> 
```

因此，在之前的 HTML 页面中，他们输入了 2 个值，即他们的姓名和位置，然后上面的 php 代码将获取他们输入的信息并将其存储在 userswhobought.txt

这是它目前的存储方式：

```
Username=John
Location=UK
commit=
=============== 
```

但我只是希望它像这样存储

```
John:UK
===============
Nextuser:USA
==============
Lee:Ukraine 
```

所以我更容易提取。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:29:47.930

```
<?php
    header ('Location: http://myshoppingsite.com/ ');
    $handle = fopen("userswhobought.txt", "a");
    fwrite($handle, $_POST['Username']);
    fwrite($handle, ":");
    fwrite($handle, $_POST['Location']);
    fwrite($handle, "===============\r\n");
    fclose($handle);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:29:51.677

```
<?php
header ('Location: http://myshoppingsite.com/ ');
$handle = fopen("userswhobought.txt", "a");
foreach($_POST as $variable => $value) {
fwrite($handle, $variable);
fwrite($handle, ":");
fwrite($handle, $value);
fwrite($handle, "===============\r\n");
}

fclose($handle);
exit;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:30:17.870

```
foreach($_POST as $variable => $value) {
    $write_this = "$variable:$value\r\n"
    fwrite($handle, $write_this );
}
fwrite($handle, "===============\r\n"); 
```

此外，我建议将 header() 调用移到退出之前。从技术上讲，这是可行的，但这不是大多数人所做的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T01:31:23.907

而不是你的 foreach，只需添加`$_POST['Username'].":".$_POST['Location']."\r\n"`你的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T01:35:23.527

只需放置`fwrite($handle, "===============\r\n");`在您的循环内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T01:36:26.053

获取您的原始代码

```
<?php
header ('Location: http://myshoppingsite.com/ ');
$handle = fopen("userswhobought.txt", "a");
foreach($_POST as $variable => $value) {
    fwrite($handle, $variable);
    fwrite($handle, "=");
    fwrite($handle, $value);
    fwrite($handle, "\r\n");
}
fwrite($handle, "===============\r\n");
fclose($handle);
exit;
?> 
```

并更改为

```
<?php
$datastring = $_POST['Username'].":".$_POST['Location']."
===============\r\n";
file_put_contents("userswhobought.txt",$datastring,FILE_APPEND);
header ('Location: http://myshoppingsite.com/ ');
exit;
?> 
```

而不是循环遍历`$_POST`数据，您需要直接操作 POST 数据，然后您可以随意使用它，但我建议您查看 mysql、postgres 或 sqlite 等数据库选项 - 您甚至可以将数据存储在 mongodb 等 nosql 选项中也是。

# java - will java bytecode of java 7 work in other versions of Java

> ID：15351719
> 
> 赞同：2
> 
> 时间：2013-03-12T01:26:15.043
> 
> 标签：java

I just wanted to know if the bytecode generated in one version of java will work on other versions of java

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T01:28:58.497

In general, bytecode will run without modification on a *newer* version of Java. It will not run on an older version unless you compile it with special arguments (`javac -target`) and take extreme care not to use the new library classes.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T01:34:00.653

**二进制兼容性**

根据 JVM 规范，Java SE 7 的类文件版本是 51，因为 JSR 292 引入了调用动态字节码。Java SE 7 编译器生成的 51 版类文件不能在 Java SE 6 中使用。

Java SE 7 与 Java SE 6 二进制兼容，但[不兼容](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html#incompatibilities)。除了提到的不兼容性之外，使用 Java SE 6 编译器构建的类文件将在 Java SE 7 中正确运行。

**Friends Words ...**
编译器不向后兼容，因为使用 Java7 JDK 生成的字节码不会在 Java 1.6 jvm 中运行（除非使用 -target 1.6 标志编译）。但是 JVM 是向后兼容的，因为它可以运行较旧的字节码。

所以他们选择从 javac 的角度考虑兼容性（因为它是 JDK 特有的部分），这意味着生成的字节码可以在 jvm 的未来版本中运行（这与 JRE 更相关，但也捆绑在 JDK 中）。

简而言之，我们可以说：

```
JDK's are (usually) forward compatible.
JRE's are (usually) backward compatible. 
```

**爪哇说**

**交叉编译选项**

默认情况下，类是针对 javac 附带的平台的引导类和扩展类编译的。但是 javac 也支持交叉编译，其中类是针对不同 Java 平台实现的引导程序和扩展类进行编译的。交叉编译时使用 -bootclasspath 和 -extdirs 很重要；请参阅下面的交叉编译示例。

```
-target version
    Generate class files that target a specified version of the VM. Class files will run on the specified target and on later versions, but not on earlier versions of the VM. Valid targets are 1.1, 1.2, 1.3, 1.4, 1.5 (also 5), 1.6 (also 6), and 1.7 (also 7).

    The default for -target depends on the value of -source:

        If -source is not specified, the value of -target is 1.7
        If -source is 1.2, the value of -target is 1.4
        If -source is 1.3, the value of -target is 1.4
        If -source is 1.5, the value of -target is 1.7
        If -source is 1.6, the value of -target is 1.7
        For all other values of -source, the value of -target is the value of -source.

-bootclasspath bootclasspath
    Cross-compile against the specified set of boot classes. As with the user class path, boot class path entries are separated by colons (:) and can be directories, JAR archives, or ZIP archives. 
```

**有关交叉编译的更多信息，请查看** [http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)

**[在http://www.oracle.com/technetwork/java/javase/compatibility-417013.html](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html)**上比我好****

# android - How to draw a shape in Android as one of other layout objects?

> ID：15351720
> 
> 赞同：2
> 
> 时间：2013-03-12T01:26:19.870
> 
> 标签：android, view, ondraw

I've been working on this for a while but can't find anything that exactly addresses my question (at least not something easy to understand).

I have a main layout XML file where I define various layout objects like a Button or a TextView (and I know I can add SurfaceView, View, and view and other things too). I want to draw a shape (in my case it's an arc) in just **one** of these objects so it doesn't take up the whole screen and so I can position it relative to other things.

(In my case it will ultimately re-draw the arc kind of like a circle with a gap in a different position every time I call a method depending on a value I pass to the method, but that's separate from my basic question.)

I know the answer will have something to do with a canvas, an onDraw method, maybe Paint, probably a view. I have been able to draw a circle from a custom View object by setting the main java file's layout as that View (as opposed to R.layouts.main), but that takes up the whole screen, and I'm unsure how I might be able to have that dynamically draw with modifications.

A really clear explanation or better yet an actual example would just be awesome.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:08:07.577

如我所见，您需要在小部件上而不是在整个屏幕上绘制特定形状。尝试使用图层列表。您可以参考此链接获取示例[链接](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

# android - 偏好背景颜色闪烁

> ID：15351725
> 
> 赞同：0
> 
> 时间：2013-03-12T01:27:09.667
> 
> 标签：android, preference

我设法更改了我的偏好活动的背景颜色，但是当我聚焦/滚动它时，它会闪烁。请帮我解决这个问题。这就是我改变背景的方式......

```
public class ConfigActivity extends PreferenceActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);     
    addPreferencesFromResource(R.xml.preference);
    findViewById(android.R.id.list).setBackgroundColor(getResources().getColor(R.color.gray));
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:53:35.900

在布局中使用 android:cacheColorHint="#00000000"。

另请参阅[http://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html](http://android-developers.blogspot.com/2009/01/why-is-my-list-black-android.html)

# cocos2d-iphone - 右对齐和定位 CCLabelTTF

> ID：15351726
> 
> 赞同：0
> 
> 时间：2013-03-12T01:27:23.130
> 
> 标签：cocos2d-iphone, alignment, cclabelttf

我希望以下代码将标签定位在屏幕的右上角。但是 x 位置出现在屏幕右侧，我必须手动将其移过。这段代码有什么问题？

```
CGSize winSize = [[CCDirector sharedDirector] winSize];

self.screenTop = winSize.height;
self.screenRight = winSize.width;
self.screenBottom = 0;
self.screenLeft = 0;

self.scoreLabel = [CCLabelTTF labelWithString:@"000000" dimensions:CGSizeMake(200,30) hAlignment:kCCTextAlignmentRight fontName:@"Helvetica" fontSize:24];
self.scoreLabel.position = ccp(self.screenRight - 20, self.screenTop - 20);
[self addChild:self.scoreLabel z:1]; 
```

该位置正确记录为 {548, 300} (iPhone5)。看来这`hAlignment:kCCTextAlignmentRight`行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:38:27.827

```
self.scoreLabel.position = ccp(self.screenRight - 100, self.screenTop - 20); 
```

更一般地说：

```
self.scoreLabel.position = ccp(self.screenRight - self.scoreLabel.contenSize.width/2,
self.screenTop - self.scoreLabel.contenSize.height/2); 
```

# javascript - Unsubscribing in Amplify.js - Prevent stacking of subscribed events

> ID：15351728
> 
> 赞同：2
> 
> 时间：2013-03-12T01:27:40.057
> 
> 标签：javascript, jquery, amplifyjs

I can't get my head around on how to unsubscribe from events using Amplify.js. The events keep stacking up and a simple amplify.unsubscribe as per the documentation is not working.

I usually use anonymous callbacks but thought a named callback will be easier to unsubscribe. So, in the below code, i am subscribing to the 'registerInterest' event which is published after a button click.

The callback for the subscribe function initiates a form submission. If this form submit fails, and the user clicks submit again, two form submission requests are fired because the 'Subscriptions' stack in amplifyjs registered two subscriptions for 'registerInterest'. This stack just grows on everytime the submit is clicked.

I want to unsubscribe from the 'registerInterest' event and i don't want duplicate events.

```
amplify.subscribe('registerInterest',function postRegisterData() {
    jcl.dataManager({
        type: 'POST',
        url: jcl.registerUrl,
        data: register,
        dataType: 'json',
        successEventName: 'registerSuccess',
        contentType: 'application/json',
        errorEventName: 'registerError',
        beforeSend: function (req) {
            req.setRequestHeader( 'Token', jcl.authToken );
            req.setRequestHeader( 'SubscriberCode', jcl.subscriberCode );
        }
    });
    return false;
});

amplify.publish( 'registerInterest' ); 
```

From the docs, adding a 'return false' in the subscribe function should work but it didn't. I also tried adding the below inside the subscribe function.

```
amplify.unsubscribe('registerInterest',postRegisterData); 
```

# windows-phone-7 - 在 windows phone 7.5 上的特定时间间隔后更改配置文件

> ID：15351729
> 
> 赞同：0
> 
> 时间：2013-03-12T01:27:52.317
> 
> 标签：windows-phone-7, windows-phone-8

这个问题出现了属于我的必需品！我希望我的个人资料在每天晚上 7:00 更改为**响铃+振动**从**静音**。我不确定是否可以实现，因为微软已经抽象了一些功能并禁止访问它们。

我想把它作为一个应用程序，它允许我为个人资料设置一个特定时期保持活跃的时间。这真的可能吗？任何在这个平台上工作过的专家，请给你宝贵的建议，因为我仍然是一个这个移动开发小镇的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:39:55.863

**不**，Windows Phone SDK 不允许您从应用程序更改配置文件。

现在，由于这不是您对这种方式的第一个问题，我强烈建议您从[**用于 Windows Phone 开发的 MSDN 文档**](http://msdn.microsoft.com/library/windowsphone/develop/ff402529%28v=vs.105%29.aspx)开始，了解该平台支持的内容。

# multithreading - Preventing threaded subprocess.popen from terminating my main script when child is killed?

> ID：15351732
> 
> 赞同：4
> 
> 时间：2013-03-12T01:28:08.917
> 
> 标签：multithreading, python-2.7, signals, subprocess, parent-child

Python 2.7.3 on Solaris 10

**Questions**

1.  When my subprocess has an internal Segmentation Fault(core) issue or a user externally kills it from the shell with a SIGTERM or SIGKILL, my main program's signal handler handles a SIGTERM(-15) and my parent program exits. **Is this real? or is it a bad python build?**

**Background and Code**

I have a python script that first spawns a worker management thread. The worker management thread then spawns one or more worker threads. I have other stuff going on in my main thread that I cannot block. My management thread stuff and worker threads are rock-solid. My services run for years without restarts but then we have this `subprocess.Popen` scenario:

In the run method of the worker thread, I am using:

```
class workerThread(threading.Thread):
    def __init__(self) :
        super(workerThread, self).__init__()
    ...
    def run(self)
        ...
        atempfile = tempfile.NamedTempFile(delete=False)

        myprocess = subprocess.Popen( ['third-party-cmd', 'with', 'arguments'],  shell=False, stdin=subprocess.PIPE, stdout=atempfile, stderr=subprocess.STDOUT,close_fds=True)
        ... 
```

I need to use `myprocess.poll()` to check for process termination because I need to scan the `atempfile` until I find relevant information (the file may be > 1 GiB) and I need to terminate the process because of user request or because the process has been running too long. Once I find what I am looking for, I will stop checking the stdout temp file. I will clean it up after the external process is dead and before the worker thread terminates. I need the stdin PIPE in case I need to inject a response to something interactive in the child's stdin stream.

In my main program, I set a SIGINT and SIGTERM handler for me to perform cleanup, if my main python program is terminated with SIGTERM or SIGINT(Ctrl-C) if running from the shell.

Does anyone have a solid 2.x recipe for child signal handling in threads? ctypes sigprocmask, etc.

Any help would be very appreciated. I am just looking for an 'official' recipe or the **BEST hack**, if one even exists.

**Notes**

I am using a restricted build of Python. I must use 2.7.3\. Third-party-cmd is a program I do not have source for - modifying it is not possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:56:14.590

你的描述中有很多看起来很奇怪的东西。首先，你有几个不同的线程和进程。谁在崩溃，谁在接收 SIGTERM，谁在接收 SIGKILL 以及由于哪些操作？

第二：为什么你的父母会收到 SIGTERM ？它不能被隐式发送。有人直接或间接地向您的父进程调用 kill（例如，通过杀死整个父组）。

第三点：当您处理 SIGTERM 时，您的程序如何终止？根据定义，如果未处理，程序将终止。如果已处理，则不会终止。到底发生了什么？

建议：

```
 $ cat crsh.c
    #include <stdio.h>

    int main(void)
    {
        int *f = 0x0;

        puts("Crashing");
        *f = 0;
        puts("Crashed");
        return 0;
    }
    $ cat a.py

    import subprocess, sys

    print('begin')
    p = subprocess.Popen('./crsh')
    a = raw_input()
    print(a)
    p.wait()
    print('end')
    $ python a.py 
    begin
    Crashing
    abcd
    abcd
    end 
```

这行得通。没有信号传递给父级。您是否在程序中隔离了问题？

如果问题是发送到多个进程的信号：您可以使用 setpgid 为子进程设置单独的进程组吗？

创建临时文件有什么理由吗？它是在您的临时目录中创建的 1 GB 文件。为什么不管道 stdout ？

如果您确实确定需要在父程序中处理信号（例如，为什么不尝试/除了 KeyboardInterrupt？）：多线程程序的 signal() 未指定行为是否会导致这些问题（例如，调度给不处理信号的线程的信号）？

```
NOTES
     The effects of signal() in a multithreaded process are unspecified. 
```

无论如何，尝试更准确地解释程序的线程和进程是什么，它们做什么，信号处理程序是如何设置的以及为什么，谁在发送信号，谁在接收等等等等等等.

# r - 基于其他列的重叠值

> ID：15351735
> 
> 赞同：-3
> 
> 时间：2013-03-12T01:28:21.417
> 
> 标签：r, dataframe

我有一个包含两列的数据框：name 和 action_id。名称通常有多个 action_id，而 action_id 也与多个名称相关联，如下所示：

```
name action_id
Bob  1
Bob  2
Bob  3
Tom  2
Tom  1
Bill 1
Bill 3 
```

这是我的问题：我正在尝试根据名称索引 action_ids 之间的重叠。因此，如果一个名称与两个 action_id 关联，而另一个名称与相同的两个 action_id 关联，则这两个 action_id 之间的重叠为 1。对于上面的数据，此函数将在 action_ids 1 和 2 之间返回 1，1介于 1 和 3 之间，其他潜在重叠为 0。我正在描绘一个包含所有潜在 action_id 重叠的数据表以及这些重叠的实例，如下所示：

```
 1 2 3
1 - 0 0 
2 1 - 0
3 1 0 - 
```

我试图通过将数据框转换为索引与用户关联的所有 action_id 的数据表来解决此问题，但是在将该数据表转换为仅 action_id 表时遇到问题，如上所示。

我想过循环遍历所有数据，但我正在处理数百万行——for/if 循环在这里不够省时，所以我试图找到一个基于向量的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:40:44.460

我认为这会以您想要的方式计算重叠：

```
overlap = function(df, id1, id2) {
  id_by_name = tapply(df$action_id, df$name, unique)
  ids_in_name = lapply(
    id_by_name,
    function(x) {
      all(c(id1, id2) %in% x)
    }
  )
  overlapping_names = names(ids_in_name)[unlist(ids_in_name)]
  if (length(overlapping_names) >= 2) {
    return(1)
  } else {
    return(0)
  }
} 
```

输出：

```
> overlap(df, 1, 2)
[1] 1
> overlap(df, 2, 3)
[1] 0 
```

# html - swfobject doesn't seem to work when adding id to element with js

> ID：15351741
> 
> 赞同：0
> 
> 时间：2013-03-12T01:28:47.997
> 
> 标签：html, click, append, embed, swfobject

I'm using the google hosted swfobject to try and embed some swf files. It works fine when I add the swfobject id to an element in the HTML. However, I've been attempting to set it up in a different way. ...when an element is clicked, a div is appended with the swfobject id. I have been unsuccessful in accomplishing this.

Does anyone know why this could be? Any help would be appreciated.

*The reason I need to set it up that way is because I don't want the swf to be visible until a certain element is clicked.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:17:37.753

我认为一旦单击 div 元素，您应该调用嵌入 swf 文件的函数。

# json - Anorm 的 JSON 反序列化器

> ID：15351746
> 
> 赞同：3
> 
> 时间：2013-03-12T01:29:03.783
> 
> 标签：json, playframework-2.0, anorm

首先，我对 Play 2 Scala 还是很陌生。我正在尝试编写一个将我的模型对象转换为 JSON 的方法。

根据这个博客[http://mandubian.com/2012/10/01/unveiling-play-2-dot-1-json-api-part2-writes-format-combinators/](http://mandubian.com/2012/10/01/unveiling-play-2-dot-1-json-api-part2-writes-format-combinators/) 这是我尝试过的

```
 case class Facility(id:Pk[Int],name:String)

object Facility{

    implicit val facilityWriter = (
     (__ \ "id").write[Pk[Int]] and
     (__ \ "name").write[String]
)(unlift(Facility.unapply)) 
```

然后它给了我一个错误，说没有为 Pk[Int] 找到 JSON 反序列化器

所以我尝试了这样的事情（经过一番谷歌搜索）

```
implicit object PkFormat extends Format[Pk[Int]] {

    def reads(json:JsValue): Pk[Int] = Id(json.as[Int])
    def writes(id:Pk[Int]):JsNumber = JsNumber(id.get)
} 
```

我不明白到底发生了什么，并且找不到有关如何序列化/反序列化异常的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:15:58.277

JSON 序列化器/反序列化器支持 JSON 规范涵盖的所有基本值。如果要序列化自定义类型，则必须告诉序列化程序如何执行此操作。

Play 的 JSON 序列化程序使用称为*type class*的 Scala（最初是 Haskell）模式。简而言之，它允许多态性而无需子类化。这是通过在范围内引入隐式值来实现的，即要处理新类型，您定义一个隐式值/方法/对象。在您的具体示例中，您为`Pk[Int]`.

您可以`Pk[Int]`在代码中手动转换，或者在许多其他框架中`Pk`直接在类中实现转换，但是类型类方法更干净（因为 JSON 转换是一个单独的问题）并且更容易重用（现在您可以在`Pk[Int]`任何地方转换即使`Pk`类本身不支持它，你也想要，想象一下扩展一个闭源系统）。

至于您的代码，它应该可以正常工作，只需确保您在范围内具有必要的导入：

```
import play.api.libs.json._
import play.api.libs.json.util._
import play.api.libs.json.Writes._
import play.api.libs.functional.syntax._ 
```

# javascript - jQuery Accordion if hasClass

> ID：15351758
> 
> 赞同：1
> 
> 时间：2013-03-12T01:30:43.797
> 
> 标签：javascript, jquery, jquery-ui, accordion

我正在尝试制作手风琴，并且我希望首先扩展具有类 current-category 的 H4 元素。

我的代码：

```
$(function() {
     $( "#category-accordion" ).accordion();
     if ($('h4').hasClass("current-category")) {
        $( "#category-accordion" ).accordion("activate", $('.current-category')); }
}); 
```

是的，我是个菜鸟。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:37:57.803

[`activate`是一个事件*^([docs])*](http://api.jqueryui.com/accordion/#event-activate)，当面板被激活时触发。我相信您想使用[`active`选项*^([docs])*](http://api.jqueryui.com/accordion/#option-active)，它采用您要打开的元素的索引：

```
$("#category-accordion").accordion({
    active: $("#category-accordion > div").index($('h4.current-category').next())
}); 
```

我假设你的 HTML 看起来像：

```
<div id="category-accordion">
    <h4>Section 1</h4>
    <div>...</div>
    <h4>Section 2</h4>
    <div>...</div>
</div> 
```

[**演示**](http://jsfiddle.net/4YwBu/)

* * *

jQuery 文档通常包含足够的信息和示例来解决此类问题。

# c - C99 分割溢出 strlen，不一致

> ID：15351763
> 
> 赞同：-3
> 
> 时间：2013-03-12T01:31:42.207
> 
> 标签：c, segmentation-fault, c99, strlen

我一直在寻找这个问题的答案，但似乎找不到解决方案。当参数长度不同时，没有错误。当它们的长度相同时，会发生段错误。该函数旨在比较两个字符串并返回一个新字符串，其中包含每个第 i 个字符中的最大值。我的功能如下：

```
 char* charMax(char* string1, char* string2) 
   {
        int length1 = strlen(string1);
        printf("%d", length1);
        int length2 = strlen(string2);

        int lengthLarge = length1 >= length2 ? length1 : length2;
        int lengthSmall = length1 <= length2 ? length1 : length2;

        char* largerString = length1 >= length2 ? string1 : string2;
        char* result = malloc(lengthLarge + 1);

        for (int i = 0; i < lengthSmall; i++) 
            result[i] = string1[i] > string2[i] ? string1[i] : string2[i];

        if (length1 != length2) 
        {
            for (int i = lengthSmall; i < lengthLarge; i++) 
                result[i] = largerString[i];

            result[lengthLarge + 1] = '\0';

            return result;

            free(result);
        }
    } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:35:04.613

好吧，这可能与以下事实有关：当两个字符串的长度完全相同时，您的函数永远不会返回任何内容，因此结果是*垃圾*。然后将其解释为指针。而且……嗯……你知道接下来会发生什么，不是吗？

让我们*适当地*缩进该代码并添加一些注释，好吗？

```
char* charMax(char* string1, char* string2) {
    int length1 = strlen(string1);
    printf("%d", length1);
    int length2 = strlen(string2);
    int lengthLarge = length1 >= length2 ? length1 : length2;
    int lengthSmall = length1 <= length2 ? length1 : length2;

    char* largerString = length1 >= length2 ? string1 : string2;
    char* result = malloc(lengthLarge + 1);

    for (int i = 0; i < lengthSmall; i++) {
        result[i] = string1[i] > string2[i] ? string1[i] : string2[i];
    }
    if (length1 != length2) {
        for (int i = lengthSmall; i < lengthLarge; i++) {
            result[i] = largerString[i];
        }

        result[lengthLarge + 1] = '\0';

        return result;

        free(result); /* uhm, what? this will never execute */
    }

    /* oops - what happens now? who knows? */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:43:05.360

有几个问题，尼克的回答指出了主要问题。另一个在这里：

```
result[lengthLarge + 1] = '\0'; // out of bounds! 
// this should be result[lengthLarge] = '\0' 
```

此外，此签名更适合您的目的：

```
char* charMax(const char *string1, const char *string2); 
```

# c - Ruby 可以调用方法或过程，如 c 调用函数吗？

> ID：15351767
> 
> 赞同：3
> 
> 时间：2013-03-12T01:32:08.373
> 
> 标签：c, ruby

我对Ruby很陌生。我是大学，刚刚上了一门涵盖常规 c 的编程课程。我的最后一个课程项目是一个 slop intercept 项目，这相当容易，但我必须对所有事情都使用函数，例如：

```
#include <stdio.h>
#include <math.h>

int get_problem(int *choice){
  do {
  printf("Select the form that you would like to convert to slope-intercept form: \n");
  printf("1) Two-Point form (you know two points on the line)\n");
  printf("2) Point-slope form (you know the line's slope and one point)\n");
  scanf("%d", &*choice);
  if (*choice < 1 || *choice > 2){
      printf("Incorrect choice\n");}
  }while (*choice != 1 && *choice !=2);
  return(*choice);
}
...
int main(void);
{
  char cont;
    do {

  int choice;
  double x1, x2, y1, y2;
  double slope, intercept;
  get_problem (&choice);
... 
```

我还有几个功能可以完成整个程序。我得到了一份新工作，我需要开始学习 Ruby，所以对于我的第一个项目，我想把这个程序转换成 Ruby，现在我可以简单地摆脱这些函数，只需要在没有方法或过程的情况下运行它。我想知道是否可以做同样的事情，定义一个方法，然后在不提供输入的情况下调用该方法，而是取回存储在方法中的变量。是否可以使用方法或过程。这是我到目前为止使用 proc 的一些内容。

```
get_problem = Proc.new {
begin
puts "Select the form that you would like to convert to slope-intercept form: "
puts "1) Two-Point form (you know two points on the line)"
puts "2) Point-slope form (you know the lines slope and one point)"
choice = gets.chomp.to_i
if (choice < 1 || choice > 2)
    puts "Incorrect choice"
    end 
end while (choice != 1 && choice !=2)
}
....
begin
get_problem.call
case choice
when 1
    get2_pt.call
    display2_pt.call
    slope_intcpt_from2_pt.call
when 2
    get_pt_slope.call
    display_pt_slope.call
    intcpt_from_pt_slope.call 
```

现在我知道我可能全都错了，但我想我会试一试。我有它作为我之前的方法

```
def get_problem(choice)
....
end
....
get_problem(choice)
.... 
```

我缺少一些基本的东西吗？如您所见，我在 c 中使用了指针，并且必须在 main.xml 中初始化变量。

感谢您花时间帮助我。罗伯特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T01:44:52.507

您不能将指针传递给 Ruby 中的变量，但我认为您不需要这样做来完成您想要做的事情。试试这个：

```
def get_problem
  puts "Select the form that you would like to convert to slope-intercept form: "
  puts "1) Two-Point form (you know two points on the line)"
  puts "2) Point-slope form (you know the lines slope and one point)"

  loop do
    choice = gets.chomp.to_i
    return choice if [1, 2].include? choice
    STDERR.puts "Incorrect choice: choose either 1 or 2"
  end
end

choice = get_problem
puts "The user chose #{choice}" 
```

这定义了一个方法，该方法`get_problem`循环直到用户选择`1`或`2`，并返回他们选择的数字，您可以将其存储在顶级变量`choice`中。

# java - 正确打印多行 xml 节点

> ID：15351768
> 
> 赞同：1
> 
> 时间：2013-03-12T01:32:14.543
> 
> 标签：java, xml

我有一个 Java 应用程序，它从一个具有多行文本节点的网站获取 xml 文件，如下所示：

```
<root>
   <node>info</node>
   <mlnode>some
multi
line
text</mlnode>
</root> 
```

我的代码目前如下所示：

```
 Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader(xml)));
    NodeList nList = doc.getElementsByTagName("mlnode");
    Node nNode = nList.item(0);

    System.out.println(nNode.getTextContent()); 
```

可悲的是，这段代码将我的多行内容放在一行中：`somemultilinetext`. 我想保留换行符。而且我希望在所有操作系统（主要是 windows 和 linux）上保留换行符。

我怎么做？

**编辑：**这个问题*不是*关于正确的缩进。这只是关于在节点的内容中保留换行符。将换行符保留在原处很重要，因为该节点的内容是配置文件的一部分，并且必须用换行符分隔。
我不关心正确的缩进（如果我这样做了：我知道在 SO 和其他论坛上有足够的资源来解释如何正确缩进）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:46:49.873

换行符被解析并按原样输出。

您的源 XML 似乎没有 Windows 需要的两个行尾字符。我猜你必须找到换行符（“\n”）并用回车和换行符（“\r\n”）替换它们。

由于附加的 "\r" 在 Unix 系统上将显示为 ^M，因此您应该检测 JVM 中的操作系统，确保它是 Windows 并进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:17:37.577

我发现了错误，它不在我在问题中发布的代码中。
问题出在获取网站内容的代码中，这是一个 xml 文件，并将其转换为字符串。我使用了以下代码，改编自[这个](https://stackoverflow.com/questions/238547/how-do-you-programmatically-download-a-webpage-in-java)问题：

```
URL url;
InputStream is = null;
DataInputStream dis;
String line;
String content

try {
    url = new URL("https://stackoverflow.com/");
    is = url.openStream();  // throws an IOException
    dis = new DataInputStream(new BufferedInputStream(is));

    while ((line = dis.readLine()) != null) {
        content += line; // I forgot to add the linebreak here!
        // I added "content += System.getProperty("line.separator");" and it solved my problem
    }
} catch (MalformedURLException mue) {
     mue.printStackTrace();
} catch (IOException ioe) {
     ioe.printStackTrace();
} finally {
    try {
        is.close();
    } catch (IOException ioe) {
        // nothing to see here
    }
} 
```

抱歉，我没有想到其他班级的问题，所以我没有将该代码添加到我的问题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T07:09:55.490

您可以按以下方式更改代码

```
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new InputSource(new StringReader(xml)));
NodeList nList = doc.getElementsByTagName("mlnode");
Node nNode = nList.item(0);
String value = nNode.getTextContent();

StringBuilder stb = new StringBuilder();
String [] strAry = value.split("\n");
for(int k = 0; k < strAry.length; k++){
   stb.append(strAry[k]);
   stb.append(System.getProperty("line.separator"));
}
System.out.println(stb.toString()); 
```

这应该根据需要打印文本

# printing - 使用 IE/Firefox/Safari 的自定义页面大小和打印预览设置进行打印

> ID：15351771
> 
> 赞同：6
> 
> 时间：2013-03-12T01:32:33.960
> 
> 标签：printing, cross-browser

我目前正在尝试添加“打印标签”功能。单击按钮后，打印预览对话框应打开并以标签格式打印（与屏幕视图不同且隐藏）。

我在 Windows 7 中的 chrome、IE、Firefox 和 safari 中进行了测试。但是，只有 chrome 可以按预期工作，以预期的页面大小和样式打印。对于 IE 和 Firefox，虽然我保存为 PDF 时标签格式保持不变，但我只能以字母（默认）页面大小打印，这意味着我使用标签打印机打印时的灾难。当我尝试将页面大小更改为自定义标签大小时，IE 崩溃，而 Firefox 不允许我在系统打印对话框中打开属性。对于 safari（在 WINDOWS 中），我可以以自定义标签大小打印，但是，我无法删除页眉和页脚，导致标签格式拆分为许多页面。

我的问题是：
1\. 罪魁祸首是自定义标签大小，还是因为其他浏览器的限制？
2\. 如何在 Safari (windows) 中删除页眉和页脚？我的发现目前对此持悲观态度...
3\. 我有什么方法可以为其他浏览器生成打印预览对话框，而不是打印对话框？（类似于 chrome）
4\. 我有什么方法可以使用 Javascript 来预设打印设置，将打印机设置为标签打印机并将页面尺寸更改为自定义标签尺寸？

如果有人能启发我，谢谢。

# javascript - 为什么 event.stopImmediatePropagation() 在除 IE 之外的所有浏览器中都有效？

> ID：15351772
> 
> 赞同：2
> 
> 时间：2013-03-12T01:32:36.773
> 
> 标签：javascript, internet-explorer, dom-events, stoppropagation

经过一些测试后，我注意到这`event.stopImmediatePropagation()`在 IE 中不起作用（按照下面的用法）。但是，它适用于 Chrome、Firefox、Safari 和 Opera。是什么赋予了？

请参阅**[此小提琴](http://jsfiddle.net/johntrepreneur/hbKMS/5/)**以在 IE 中重现（在其他浏览器中测试小提琴以使其正常工作）。

**小提琴Javascript：**

```
$(function(){

    $('#text').focus(function(event){
        $('#text').val('Use the button to test this.');
    });

    $('#button').click(function(event){

        // remove all handlers
        $('#text').off('focus');

        // now add this other handler in first position
        $('#text').one('focus', function(event){
            $('#text').val('Yay it works! stopImmediatePropagation works in your browser!!');
            event.stopImmediatePropagation();
        });

        // now add a handler in the 2nd position that shouldn't get run
        $('#text').focus(function(event){
            $('#text').val('Oh No! stopImmediatePropagation failed to work in your browser!!');
        });

        // now set the focus to test it
        $('#text').focus();
    });
}); 
```

**小提琴html：**

```
<input id='button' type="button" value="Start Test"/>
<input id='text' style='width:400px;' /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:50:35.920

自 IE 9 ( [http://msdn.microsoft.com/en-us/library/ie/ff975461(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ff975461(v=vs.85).aspx) ) 起，IE 就支持 stopImmediatePropgation，但 jquery 是问题所在。

您的代码中使用的 jquery 版本不起作用。这个[jsfiddle](http://jsfiddle.net/hbKMS/6/)在IE下完美运行，代码一模一样。唯一的区别是它使用 jQuery 1.9.1 而不是 jQuery 1.8.3

# c - 需要函数来查找数组中的最大值，将其返回给 main() 并打印出来

> ID：15351778
> 
> 赞同：0
> 
> 时间：2013-03-12T01:33:08.647
> 
> 标签：c

对我来说，我的程序看起来应该做我想做的事情：提示用户为数组输入 10 个值，然后使用函数在数组中找到这些值中的最大值，然后将最大的数字返回给主() 函数并打印出来。

但是，当我输入值时，我永远不会得到看起来像我输入的数字的数字。

例如，假设我只输入“10, 11”，我会得到“1606416648 = 最大值”。

有谁知道我做错了什么？

这是代码：

```
#include <stdio.h>
#define LIMIT 10
int largest(int pointer[]); 
int main(void)
{

int str[LIMIT];
int max;
int i = 0;

printf("Please enter 10 integer values:\n");
while (i < LIMIT)
{
    scanf("%d", &str[i]);
    i++;
}
// Thanks for your help, I've been able to make the program work with the above edit!
max = largest(str);
printf("%d = largest value\n", max);

return 0;
}

int largest(int pointer[])

{
int i;
int max = pointer[0];

for (i = 1; i < LIMIT; i++)
{
   if (max < pointer[i])
        max = pointer[i];
}
return max;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:34:59.190

`scanf("%d", &str[LIMIT]);`读入一个数字并将其放入数组末尾的内存位置。

**改动后：**

1.  你不需要`scanf()`在你的 while 条件下；它应该进入`while`体内。

2.  你的`scanf()`还是不太对。您需要告诉它要*在*数组中存储输入的位置。

3.  `str[i];`不做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:35:42.983

`printf("Please enter 10 integer values:\n"); scanf("%d", &str[LIMIT]);`

这不符合你的想法。首先，它只读取一个数字。其次，您将它读入数组的最后一个位置 + 1。

# excel - 如何在 Excel 2010 中颠倒顺序

> ID：15351779
> 
> 赞同：0
> 
> 时间：2013-03-12T01:33:34.900
> 
> 标签：excel, date, reverse

如果我在 excel 中有以下数据。

```
Date:            Stock Price:

12/12/2012       89.90      

03/10/2012       90.88

04/12/2010       72.11

05/06/2008       76.88 
```

如何同时反转日期和股票价格？所以我从`05/06/2008`股价开始`76.88`到`12/12/2012`股价`89.90`？

请一步一步帮助。

到目前为止，当我试图单独反转日期时，它只会逐年反转，所以我得到

```
03/10/2012 
12/12/2012
04/12/2010
05/06/2008 
```

这甚至不正确，我不知道如何反转日期和股价。

我正在使用 microsoft excel 2010 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:03:53.487

正如评论中指出的那样，您需要做的就是使用 Excel 的排序功能对数据进行排序：

1.  单击表格中的一个单元格
2.  单击*数据*选项卡->*排序*
3.  设置对话框如下：![在此处输入图像描述](../Images/b92355bcae5a2ffc2adea933a85429e9.png)

您最终将得到排序列表：

![在此处输入图像描述](../Images/2715e52c9a74589409c815934093f084.png)

# routes - Silex 路由不工作

> ID：15351781
> 
> 赞同：0
> 
> 时间：2013-03-12T01:33:41.897
> 
> 标签：routes, url-routing, silex

我正在做一个 Silex 项目，但我遇到了路线问题。

这有效：

```
$app->get('/', function () use ($app) {
    return $app['twig']->render('index.html', array());
})
->bind('homepage'); 
```

但这不会：

```
$app->get('/contact', function () use ($app) {
    return $app['twig']->render('contact.html', array());
})
->bind('contact'); 
```

阿帕奇说：未找到！！！，我不知道为什么第一个有效，而第二个无效。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:26:46.330

我通过更改`AllowOverride None`为`AllowOverride All`.

# django - Django 查询不存在

> ID：15351785
> 
> 赞同：1
> 
> 时间：2013-03-12T01:34:17.583
> 
> 标签：django

从昨天到今天，我一直在尝试创建一个允许用户互相关注个人资料的应用程序，但到目前为止我还没有成功。

我无法创建一个允许我从他关注的特定用户中检索用户的关注函数。

例子 。如果约翰跟随戴安娜。我希望能够检索名为 Diana 的用户并将其与我的模块一起使用。

如果这没有意义，我真的很抱歉。我正在尽力解释我的情况。

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)
class Board(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name 
```

这些解决方案中的大多数都没有给我任何查询

***这是我尝试过的解决方案之一。***

```
class UserLink(models.Model):
    from_user = models.ForeignKey(User , related_name = "following_set")
    to_user = models.ForeignKey(User , related_name = "follower_set")
    date_added = models.DateTimeField(default = datetime.now)

    def __unicode__(self):
        return "%s is following %s" % (self.from_user.username,self.to_user.username)
    def save(self,**kwargs):
        if self.from_user == self.to_user:
            raise ValueError("Cannot follow yourself ")
        super(UserLink , self).save(**kwargs)
    class Meta:
        unique_together = (('to_user','from_user'),) 
```

我试图检索特定用户关注的用户并将其用于我的模块，例如 Person，但它给了我一个错误 No query exist。

```
def Follow(request,username=""):
        if request.method == "POST":
                username = request.POST.get('follow',False)
                user = User.objects.get(username=username)
                UserLink.objects.create(from_user=request.user,to_user=user)
                return HttpResponseRedirect(reverse('world:Profile'))
        return HttpResponseRedirect(reverse('world:Profile')) 
```

***我也尝试了这个跟随功能，但它只跟随他自己，我将自己更改为用户，但它不允许我让这个人跟随***

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    follows = models.ManyToManyField('self', related_name='followed_by', symmetrical=False)

>>>from pet.models import *
>>>from django.contrib.auth.models import User
>>>user = User.objects.get(username='Peter')
>>>user1 = User.objects.get(username='Sarah')
>>>p = UserProfile.objects.filter(user=user,follows=user1)
>>>Error no field called follows 
```

如何创建一个允许检索他们关注的人并将其与我的模块（例如 Person）一起使用的关注类？

有人能帮我吗 。感谢社区！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:54:16.463

如果我理解正确，你在多对多关系的正确轨道上。您需要修改现有的 Person 类以包含此信息。

由于有关某人关注或关注谁的信息本质上是有关该人的信息，因此您实际上不需要定义一个新类来实现该功能。

我建议像这样修改你的 Person 。

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)
    following = models.ManyToManyField('self', related_name='followers', symmetrical=False, blank=True, null=True) 
```

这条线的作用是在类 Person 与其自身之间建立多对多关系。

多对多关系与其他关系的工作方式略有不同，我建议您阅读 Django 文档[https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)。

但是您现在应该能够像这样设置和访问关系。

```
>>>john = Person.objects.get(name="John")
>>>diana = Person.objects.get(name="Diana")
>>>john.following.add(diana)//setup the many to many relationship
>>>john.save()

>>>john.following.all()
//This should return a queryset of Person objects which john is following.
//eg Diana

>>>diana.followers.all()
//This should return a queryset of Person objects which are following Diana.
//eg. John. 
```

简单，Django 真棒！

# php - 通过内连接从不同的表中检索值

> ID：15351788
> 
> 赞同：0
> 
> 时间：2013-03-12T01:34:53.580
> 
> 标签：php, inner-join

我无法使用内部联接从不同的表中检索值，输出始终不检索任何内容。此外，没有错误消息，我无法确定代码中出了什么问题。有人可以帮忙吗？我会非常感激。这是我的代码的一部分..

```
<?php
    $con=mysql_connect("localhost","root","");
    mysql_select_db("student_records",$con);
    if(isset($_COOKIE['username']))
    {
        if($_COOKIE['username']!='admin')
        {
            $tbl6=mysql_query("SELECT A.LName, A.FName, A.MName, B.YearLevel
            FROM student as A INNER JOIN stud_course as B ON A.StudNo=B.StudNo INNER JOIN course as C ON B.CourseCode=C.CourseCode INNER JOIN religion as D ON A.ReligionID=D.ReligionID
            WHERE A.StudNo = '".mysql_real_escape_string($_COOKIE['username'])."' ");
            while($row=mysql_fetch_array($tbl6))
            {
                echo "<td>".$row['LName']."</td><td>".$row['FName']."</td><td>".$row['MName']."</td><td>".$row['Course']."</td><td>".$row['YearLevel']."</td><td>".$row['EAdd']."</td><td>".$row['ReligionName']."</td></tr>";

            }
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:43:15.393

内部联接要求联接中包含的两个表中都存在数据。在您的情况下，您有四个表，其中任何一个表都可能缺少相关数据：

```
SELECT A.LName, A.FName, A.MName, B.YearLevel, C.Course
FROM student as A 
INNER JOIN stud_course as B ON 
    A.StudNo=B.StudNo 
INNER JOIN course as C ON 
    B.CourseCode=C.CourseCode 
INNER JOIN religion as D ON A.ReligionID=D.ReligionID
WHERE A.StudNo = '".mysql_real_escape_string($_COOKIE['username'])."' " 
```

*   如果`student`表中没有与`StudNo`用户名 cookie 相等的记录，您将得不到任何数据。
*   如果学生在表中没有任何记录`stud_course`，您将得不到任何数据。
*   如果`CourseCode`in`stud_course`在表中不存在`course`，您将得不到任何数据。
*   如果学生的`ReligionID`为 null 或具有不在`religion`表中的宗教，您将不会获得任何数据。

我建议将 SQL 分解成更小的部分（或者可能将每个部分切换`INNER JOIN`为`LEFT OUTER JOIN`）以调试并发现问题所在。

请注意，如果您要尝试使用它，您必须确保将`Course`and （不确定来自哪个表）字段添加到您的选择列表中。`Eadd`

# vba - 在几个打开的工作簿中查找字符串

> ID：15351790
> 
> 赞同：-1
> 
> 时间：2013-03-12T01:35:00.657
> 
> 标签：vba, excel, excel-2010

如何在多个打开的工作簿中查找字符串并为行着色。字符串可以在每个工作表中重复，并且可以出现在 A、B 或 C 列中。此代码可以适应更多工作簿吗？我为一本工作簿找到了这段代码：

```
 Sub Search_String()

    Dim SearchString As String
    Dim SearchRange As Range, cl As Range
    Dim Escolhe_Cor As Long
    Dim FirstFound As String
    Dim sh As Worksheet

    ' Set Search value
    SearchString = InputBox("Digite o número a ser procurado")
    Escolhe_Cor = InputBox("Escolha uma cor para destacar esse número. De 3 a 56")
    Application.FindFormat.Clear
    ' loop through all sheets
    For Each sh In ActiveWorkbook.Worksheets
        ' Find first instance on sheet
        Set cl = sh.Cells.Find(What:=SearchString, _
            After:=sh.Cells(1, 1), _
            LookIn:=xlValues, _
            LookAt:=xlPart, _
            SearchOrder:=xlByRows, _
            SearchDirection:=xlNext, _
            MatchCase:=False, _
            SearchFormat:=False)
        If Not cl Is Nothing Then
            ' if found, remember location
            FirstFound = cl.Address
            ' format found cell
            Do
                cl.EntireRow.Font.Bold = True
                cl.EntireRow.Interior.ColorIndex = Escolhe_Cor
                ' find next instance
                Set cl = sh.Cells.FindNext(After:=cl)
                ' repeat until back where we started
            Loop Until FirstFound = cl.Address
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:07:46.483

您提供了什么信息，看起来您只需要将当前代码添加到循环中。这将查看每个打开的工作簿，因此如果您不想将其应用于所有工作簿，可以使用正则表达式来标识工作簿名称。

```
For Each wb In Workbooks
   'If you only want certain open workbooks searched use this If statement:
   If wb.name = *criteria* Then
      wb.Activate
     'run your code that loops through each sheet
   End If
Next wb 
```

# java - 跨android pc java图形界面

> ID：15351793
> 
> 赞同：0
> 
> 时间：2013-03-12T01:35:19.003
> 
> 标签：java, android, swing

是否有适用于 Android 和桌面 Java 的 UI 包？我想知道是否存在一个可以传递窗口或活动的包，并将在 Android 和 PC 上显示具有相同界面的用户定义图形。

最终目标是让代码在 Android 和 PC 上都可以工作，而且无论哪种方式都需要非常小的修改。Bluestack 之类的工具不是我想要的，因为它需要在用户端安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:23:52.513

我不认为这是可能的。您可以安装android sdk + 模拟器并在桌面上运行apk，但是您已经表示不希望在客户端安装任何东西。考虑到您的要求（相同的界面，无需修改，无需用户安装），我会说您最好的选择是具有移动视图 css 的 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T04:48:22.787

事实证明，JGame 或多或少是我想要的。它在桌面 java 和 android 设备上运行良好。

# c - C - 将函数值传递给另一个函数

> ID：15351799
> 
> 赞同：1
> 
> 时间：2013-03-12T01:35:49.907
> 
> 标签：c

我有以下程序调用两个函数，一个收集数组的总和，一个收集平均值：

```
#include <stdio.h>

float array_sum (float myNumbers[],int size)
{
    float sum = 0;
    int i; /* Variable used in loop counter */

    for (i = 0; i < size; ++i)
    {
        sum +=myNumbers[i];
    }

}

float array_average (float myNumbers[],int size)
{
    float sum = 0;
    float average = 0;
    int i; /* Variable used in loop counter */

    for (i = 0; i < size; ++i)
    {
        sum +=myNumbers[i];
    }

    average = sum/size;
    printf("avg = %5.2f", average);
}

int main (void)
{
    int size;
    int sum;

    printf ("Enter The Amount Of Numbers In Your Array: ");
    scanf("%i", &size);

    float myNumbers[size];
    int i;

    for (i = 0; i < size; ++i)
    {
        printf ("Enter the number:");
        scanf (" %f",&myNumbers[i]);
    }

    array_sum(myNumbers,size);
    array_average(myNumbers,size);

    return 0; 
} 
```

我想要做的是在我的程序结束时同时显示结果`array_sum`和结果。此外，我认为通过函数而不是再次计算数组总和`array_average`会更有效吗？任何想法将不胜感激！`array_sum``array_average`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:42:43.780

首先，您可以从 average 函数中*调用*sum 函数，使其无需重复代码即可完成工作。其次，你用返回类型声明了这两个函数，但你不返回任何东西。您需要添加一个 return 语句，然后将返回的值设置为`main()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:43:36.730

而不是调用`printf`你的函数，你应该返回值：

```
return sum; 
```

或者

```
return average; 
```

`float`无论如何，您的两个函数都期望返回值。你的编译器应该已经警告你了。无论如何，您应该可以这样调用它（假设您在 中声明了相关变量`main`）：

```
sum = array_sum(myNumbers,size);
average = array_average(myNumbers,size);
printf("sum = %5.2f", sum);
printf("avg = %5.2f", average); 
```

显然，该函数在没有添加任何附加值的情况下`array_average`做了很多相同的工作，因此您应该通过调用而不是复制代码来计算总和。`array_sum``array_sum`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T01:48:55.123

如果您的函数返回相关值，这可能是最好的。您的两个工作函数都没有返回语句，他们应该这样做。你的编译器应该警告你这一点；注意这些警告。

其次，如果您的函数不像当前那样打印值本身，那么您的函数将更具可重用性`array_average`。把这一切放在一起，修改你的工作函数以返回有问题的值；那么你可以使用这样的代码：

```
float sum = array_sum(myNumbers, size);
printf("sum = %5.2f; avg = %5.2f", sum, sum/size); 
```

还值得注意的是，您的程序可能会出现溢出和精度损失。但是，根据您的问题，我会说这些问题应该在更高级的研究中得到解决。一定要回到他们身边！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T02:11:41.220

我有一种感觉，您应该拥有这些功能，通过这些功能可以执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>

/* Pass pointer to a target variable where to save sum. 
 * Though it can be nice to return it, it all depends on usage.
 * Conventionally one often return status code, and edit params.
 */
int array_sum(float myNumbers[], int size, float *sum)
{
    int i;

    /* This would indicate you have asked for the sum of an empty set. */
    if (size < 1) {
        return 1;
    }
    *sum = 0;

    for (i = 0; i < size; ++i) {
        *sum += myNumbers[i];
    }
    return 0;
}

int array_average(float sum, unsigned int size, float *avg)
{
    /* Duh. */
    if (size == 0) {
        return 1;
    }
    *avg = sum / size;
    return 0;
}

/* A lot of redundant checks here, but only to show the concept.
 * Normally one would often call the function from context where
 * one does not have control on e.g. "size" before you actually 
 * are going to sum it.
 *
 * Here you would probably check if size is < 1 after scanf and
 * ask for new number or abort.
 */
int main(void /* int argc, char *argv[] */)
{
    int i;
    int size;
    float sum;
    float avg;
    float *myNumbers;

    printf ("Enter The Amount Of Numbers In Your Array: ");
    if (!scanf("%i", &size)) {
        fprintf(stderr,
            "Unable to read size.\n"
        );
        return 1;
    }

    if ((myNumbers = malloc(sizeof(float)* size)) ==NULL) {
        fprintf(stderr,
            "Memory error.\n"
        );
        return 2;
    }

    for (i = 0; i < size; ++i) {
        fprintf(stderr, "Enter the number: ");
        if (!scanf("%f", &myNumbers[i])) {
            fprintf(stderr,
                "Unable to read float.\n"
                "Try again."
            );
            scanf("%*s"); /* Empty out buffer. */
            --i;          /* Reset count. */
        }
    }

    if (array_sum(myNumbers, size, &sum) != 0) {
        fprintf(stderr,
                "Sum failed.\n"
        );
        return 2;
    }

    if (array_average(sum, size, &avg) != 0) {
        fprintf(stderr,
                "AVG failed.\n"
        );
        return 3;
    }

    fprintf(stdout,
        "Total numbers: %d\n"
        "Sum          : %.2f\n"
        "AVG          : %.2f\n"
        ,
        size,
        sum,
        avg
    );

    free(myNumbers);

    return 0;
} 
```

# java - 硬币变化 - 找到最大数量

> ID：15351800
> 
> 赞同：1
> 
> 时间：2013-03-12T01:36:20.130
> 
> 标签：java, max, knapsack-problem

我很难弄清楚如何解释这个问题。我目前正在尝试在我的编程课上创建一个额外学分的程序，但我什至不了解它背后的数学......所以如果有人可以帮助我，我会很高兴。好吧：

假设你有 1 美分硬币和 4 美分硬币。并且允许的硬币总数为 4。该值的**最大覆盖范围**为 11。图表如下。

```
Value | 1 cent | 4 cent
 1    | 1
 2    | 2
 3    | 3
 4    | 4
 5    | 1      | 1
 6    | 2      | 1
 7    | 3      | 1
 8    |        | 2
 9    | 1      | 2
10    | 2      | 2
11    | Maximum 
```

S0 就是一个例子。我需要为一个更大的数字做这个。但是，如果有人可以帮助我解释数学，我会很高兴。或者等式是什么……这让我发疯了。

我试图实现一个版本的背包算法，但它似乎没有起到作用。如果有人可以提供帮助，将不胜感激。我不确定我是否能够做到这一点，或者我是否需要为此解决方案使用贪心算法。这基本上是贪心算法的一个转折。

编辑：更改为 11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:00:46.203

动态规划（DP）是解决问题的方法。DP 通常涉及找到一些可以根据该属性的其他值计算的基本属性——一种归纳推理。

在您的情况下，您需要问的基本问题是：“我可以用恰好 k 个硬币赚 n 美分吗”。这是一个简单的布尔值是/否；因为你可以重复使用硬币，你不需要知道*如何*用硬币制造`n`美分`k`，只需要知道是否可能。这隐含地定义了一个布尔矩阵`A[n][k]`，`A[n][k] = TRUE`如果你可以用给定种类的硬币赚取`n`美分。`k`

研究这个真值表中各个条目之间的关系。例如，如果我可以用 2 个硬币赚 5 美分，那么我可以用 3 个硬币分别赚 6 美分和 9 美分（为什么？）；因此`A[5][2]`暗示`A[6][3]`和`A[9][3]`。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T03:16:14.020

注意：我重新发布是因为另一个答案在更新以提供更多上下文时被删除。

如果您想进一步研究，[这似乎是原始问题作者和他的 Java 源代码解决方案。](https://bitbucket.org/asraful/coin-change)

然而，这里是这个算法如何工作的总结，使用动态编程：

**假设：**
中的 每个值`T`都受`Integer.MAX_VALUE`
`T`约束`Integer.MAX_VALUE -1`

**定义：**
`D = {d1, d2, ..., dk}∀ d∈ℤ, ∀ w_d = 1`
`T = W = Total Weight of Knapsack = Total Coins Available for Use`

算法的工作原理：

1.  确保`W > 0`并通过`1 ∈ D`
2.  确保满足上述限制
3.  创建一个动态大小的数组`MinCoins[0] = 0`
4.  让`n=1`并迭代 1 为`n→∞`
    *   对于每次迭代，设置`MinCoins[ n ] = Integer.MAX_VALUE`
    *   迭代*D*`d`中的每个元素，让每个值在迭代期间 被称为
        *   如果`d > n`跳过此迭代
        *   让`z`表示此迭代的最佳硬币数量
        *   从上一次迭代中获取最佳硬币数量，然后再添加一个（这个值）：`z = MinCoins [ n - d ] + 1`
        *   `z`现在比较`MinCoins[ n ]`
        *   如果`z < MinCoins[ n ]`找到了新的最优解（保存），否则迭代到下一个`d`
    *   让为本次迭代找到的最优解定义为`q = MinCoins[ n ]`
    *   如果`q < T`则继续下一次迭代。否则，本次迭代没有找到最大解并中断循环。

[https://bitbucket.org/asraful/coin-change](https://bitbucket.org/asraful/coin-change)

# antlr3 - 权威 Antlr 参考 - 第 3 章和 AntlrWorks

> ID：15351804
> 
> 赞同：0
> 
> 时间：2013-03-12T01:36:47.283
> 
> 标签：antlr3, antlrworks

我是 Antlr 的新手，我的设置如下：Windows 7、Java JDK 1.7.0_17、AntlrWorks 1.5、Antlr 3.5。

AntlrWorks Help-About 显示以下信息：

ANTLRWorks 1.5
ANTLR 3.5
StringTemplate v3 3.2.1
StringTemplate v4 4.0.7-SNAPSHOT
Java 1.7.0_17（甲骨文公司）

Definitive Antlr Reference book 的第 3 章介绍了表达式求值的示例语法 (Expr.g)，我从本书 PDF 版本的超链接中下载了该示例语法。

这本书推荐使用 AntlrWorks，我也是，但是当我在 AntlrWorks 中生成代码 (Ctrl+Shift+G) 时，它会生成没有“throws”子句的代码。

例如，在 AntlrWorks 中生成以下内容：

```
// $ANTLR start "prog"
// C:\\Users\\Mark\\Documents\\output\\Expr.g:12:1: prog : ( stat )+ ;
public final void prog() throws  {
    try { 
```

`throws`注意关键字后面缺少的代码...

如果我使用此命令行从命令提示符生成：
java -cp antlr-3.5-complete.jar org.antlr.Tool Expr.g

我得到这个输出：

```
// $ANTLR start "prog"
// Expr.g:12:1: prog : ( stat )+ ;
public final void prog() throws RecognitionException {
    try { 
```

我的问题是——如何让 AntlrWorks 生成相同的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:09:50.023

这是 ANTLRWorks 1.5 中的一个已知问题，已在下一个版本中解决。

[#5：ANTLRworks 无法生成正确的 Java 代码](https://github.com/antlr/antlrworks/issues/5)

# swt - 将 wxPython 移植到 SWT/JFace

> ID：15351809
> 
> 赞同：0
> 
> 时间：2013-03-12T01:37:50.463
> 
> 标签：swt, eclipse-rcp, jface, nebula, opal

我在一个简单的 wxPython 应用程序中使用了一些不错的控件/小部件，我从示例演示中获得灵感。称它为我的原型。

我现在准备将我的原型迁移到 Java/SWT。

有些控件根本不存在……或者……至少……我找不到它们。

在 SWT 的 FOSS 世界中，除了通常情况之外，还有什么其他的：

*   SWT/JFace
*   星云
*   蛋白石

有一段时间我根本不知道星云和蛋白石。现在我愿意。至少你知道我在来这里之前做了一些跑腿工作。是不是我仍然没有注意到核心 SWT 的一些基本扩展集？

我现在正在做的是在左侧构建一个表格 - 我在 wxPython 中使用的控件，在右侧 - 我将在 Java/SWT 中使用的等效控件。

右栏仍然有一些空白..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:38:39.613

从 wxWidgets 中的屏幕截图中，我没有看到任何东西，这在 SWT 中丢失了。如果您分享这些差距，我们或许可以帮助您找到适合您的工具。有许多提供特定 UI 的框架可能会被使用。例如[GEF](http://www.eclipse.org/gef/)、[BIRT](http://www.eclipse.org/birt/phoenix/)或[Zest](http://www.eclipse.org/gef/zest/)。

# ios - MergExtDropBox Livecode 找不到处理程序

> ID：15351816
> 
> 赞同：1
> 
> 时间：2013-03-12T01:38:28.710
> 
> 标签：ios, dropbox, livecode

第一次尝试在 Livecode for iOS 中使用 MergExtDropBox。我已将外部文件复制到“复制文件”窗格中，但在尝试运行 mergDropboxSetup 时出现“找不到处理程序”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:35:20.287

您将外部添加到应用程序的方式很可能存在一些问题。看看[这个](https://www.youtube.com/watch?v=zFTsVu7_QOI)视频，我解释了如何做到这一点

* * *

编辑

根据评论，我不确定这是最有可能的问题。我想知道您是否在桌面而不是 iOS 上执行命令？如果这是问题所在，那么您将需要将代码包装成这样：

```
if the platform is "iPhone" then
  mergDropboxSetup ...
end if 
```

# javascript - EmberJS：如何在 ember-data RESTAdapter 中为模型提供特定的 URL？

> ID：15351817
> 
> 赞同：4
> 
> 时间：2013-03-12T01:38:34.760
> 
> 标签：javascript, ember.js, ember-data, url-routing

问题 1：如果我有一个名为“Company”的 ember-data 模型，我如何告诉它点击`/businesses`并`/businesses/:id`检索记录？有没有办法为给定模型指定 url？更好的是，像 BackboneJS 一样，我可以在运行时计算模型的 URL 吗？

问题 2：我有一些独特的要求，我的 API 是这样组织的：

`/api/v1/company/:company_id/form/:form_id/items/:item_id`

有没有办法用 EmberJS 处理这个问题？我了解 ember 具有 DS.hasMany('App.Items') 类型的关系，但他们似乎点击`/items/:item_id`URL 来获取数据而不是完整的 URL。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:12:07.653

回答您的第一个问题，当您创建商店时，您可以这样做：

```
DS.RESTAdapter.configure("plurals", {
  company: "businesses"
}); 
```

至于您的第二个问题，根据[这些指南](http://emberjs.com/guides/models/the-rest-adapter/#toc_url-conventions)，我相信您可以使用如下所示的名称空间，用您的公司和表单信息替换 id，但我之前没有这样做过，所以我无法确定这是否可行。假设您在知道这些 id 的情况下进入您的应用程序，您可以在技术上替换它们：

```
DS.RESTAdapter.reopen({
  namespace: '/api/v1/company/<replace>/form/<replace>'
}) 
```

您也可以尝试设置模型`url`。

[您可以在此处](https://stackoverflow.com/questions/12679998/why-do-i-need-to-reopenclass-to-set-the-url-for-an-ember-data-model)阅读有关此内容的更多信息

# ios - 在 Safari 而不是本机应用程序中打开 Facebook url

> ID：15351818
> 
> 赞同：10
> 
> 时间：2013-03-12T01:38:35.580
> 
> 标签：ios, objective-c, facebook

有什么方法可以在 Safari中打开 Facebook 网址（例如[http://www.facebook.com/facebook ）而不是本机应用程序？](http://www.facebook.com/facebook)我试图这样做：

```
NSURL *url = [NSURL URLWithString:@"http://www.facebook.com/facebook"];
[[UIApplication sharedApplication] openURL:url]; 
```

但是如果您尝试在 facebook 域中打开 url，iOS 会自动启动本机客户端（当然，如果它已安装）。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-12T01:49:55.360

好的，我想我找到了答案，您必须在 url 中将“www.facebook.com”替换为“facebook.com”。

像这样的东西：

```
NSString *facebookUrlString = @"http://www.facebook.com/facebook";

if ([[facebookUrlString pathComponents] count] > 0) {
    if ([[facebookUrlString pathComponents][1] isEqualToString:@"www.facebook.com"]) {
        NSMutableArray *pathComponents = [[facebookUrlString pathComponents] mutableCopy];
        [pathComponents replaceObjectAtIndex:1 withObject:@"facebook.com"];
        facebookUrlString = [NSString pathWithComponents:pathComponents];
    }
}
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:facebookUrlString]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-18T02:59:37.367

将链接复制到信使应用程序并发送给自己。打开 Messenger 应用程序上的链接并单击共享，然后将使用 facebook 应用程序打开

# c++ - C++，通过指针传递泛型数组，继承，错误：没有采用右手操作数的运算符

> ID：15351820
> 
> 赞同：0
> 
> 时间：2013-03-12T01:38:44.777
> 
> 标签：c++, arrays, pointers, inheritance, operator-overloading

我必须为一个类项目实现一个通用的二进制搜索功能。已为我提供了测试文件和头文件（类定义），无法修改。

我能够让它与我测试过的 3 种测试对象类型中的 2 种一起工作，这让我很困惑，我不知道如何进一步排除故障。

这是我的算法：

```
template <typename T, typename V>
int binarySearch(T* list[], const V& searchValue,
    const int firstIndex, const int lastIndex) { 

        int half = (firstIndex + lastIndex) /2;

        // if not completly split down already
        if(firstIndex != lastIndex && half != 0){ 

            if(searchValue < *list[half]){  
                // lower half of array
                binarySearch(list, searchValue, firstIndex, half); 
            }
            else if(searchValue > *list[half]){     
                // upper half of array
                binarySearch(list, searchValue, ++half, lastIndex); 
            }
        }
        else if(searchValue == *list[half]){
            return half; // found it
        }
        return -1; // didnt find it
} 
```

这是我的 3 组对象测试用例：

```
// pointers to child class objects
Customer* customer[] = { new Customer(1002, 100000.50, "F4", "L1"),
    new Customer(1004, 45000.90, "F1", "L3"),
    new Customer(1003, 120000, "F3", "L2"),
    new Customer(1001, 340000, "F2", "L4")
};

// pointers to child class objects
Employee* employee[] = { new Employee(102, 65000, "F2", "L1"),
    new Employee(104, 45000, "F4", "L3"),
    new Employee(103, 120000, "F1", "L2"),
    new Employee(101, 35000, "F3", "L4")
};

// pointers to parent class objects
Person* person[] = { customer[0],
    customer[3],
    employee[3],
    employee[0],
    employee[2],
    customer[1],
    employee[1],
    customer[2]
}; 
```

我用每个对象调用函数，如下所示：

```
// Search the customer array. -> WORKS
cout << endl
     << "Searching customer array for customer with cId = 1002: "
     << (binarySearch(customer, 1002, 0, 3) != -1? "found it." : "did not find it.")
     << endl;

// Search the employee array. -> WORKS
cout << "Searching employee array for employee with eId = 105: "
     << (binarySearch(employee, 105, 0, 3) != -1? "found it." : "did not find it.")
     << endl;

// Search the person array. -> OPERATOR ERRORS
cout << "Searching people array for person with name = 'Mickey Mouse': "
     << (binarySearch(person, "Mickey Mouse", 0, 7) != -1? "found it." : "did not find it.")
     << endl; 
```

搜索功能在 Employee 和 Customer 对象数组上运行良好。当尝试在 Person 数组上运行搜索时，对于使用的每个比较运算符，我都会遇到 3 个错误，例如：[binary '<' no operand which takes a right-hand operand of type 'Person'...]

对于已经提供的函数定义中的所有三个对象，我以完全相同的方式实现了运算符重载。在 person 类中，我实现了以下重载运算符：

```
bool operator ==(const Person& lhs, const Person& rhs){
    if(lhs.getKeyValue() == rhs.getKeyValue())
        return true;
    return false;
}
bool operator <(const Person& lhs, const Person& rhs){
    if(lhs.getKeyValue() < rhs.getKeyValue())
        return true;
    return false;
}
bool operator >(const Person& lhs, const Person& rhs){
    if(lhs.getKeyValue() > rhs.getKeyValue())
        return true;
    return false;
} 
```

在对两个人对象进行简化测试比较时，它们比较得很好。IE：

```
cout << "test person compare: " << ("mickey mouse" < person[1] ? "true" : "false"); 
```

我不确定从这里到哪里，方向将不胜感激。

**编辑：添加（完整的人头文件）：**

```
#ifndef PERSON_H
#define PERSON_H

#include <string>
#include <iostream>

using namespace std;

namespace P03 {
    class Person {

    private:
        string firstName;
        string lastName;

    public:
        /* Initializes the object.
         */
        Person(const string& firstName = "na", const string& lastName = "na");

        /* Getter methods retun the field value.
         */
        string getFirstName() const;
        string getLastName() const;

        /* Returns the eid.
         */
        string getKeyValue() const;

        /* Returns the compound value: <lastName><space><firstName>
         */
        string getName() const;

        /* Setter methods, set the object.
         */
        void setFirstName(const string& firstName);
        void setLastName(const string& lastName);

        /* Returns the object formatted as:
        *  Person{ firstName=<firstName>, lastName=<lastName> }
        */
        virtual string toString() const;
    }; // end Person

    /* Displays a Person to the screen.
     * Calls the toString() method.
     */
    ostream& operator <<(ostream& out, const Person& person);

    /* The following relational operators compare two instances of the
     * Person class. The comparison is made on the compound value of:
     * <lastName><space><firstName>
     */
    bool operator ==(const Person& lhs, const Person& rhs);
    bool operator !=(const Person& lhs, const Person& rhs);
    bool operator <(const Person& lhs, const Person& rhs);
    bool operator <=(const Person& lhs, const Person& rhs);
    bool operator >(const Person& lhs, const Person& rhs);
    bool operator >=(const Person& lhs, const Person& rhs);

} // end namespace P03

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:47:48.177

您无法将字符串转换为人，因此这样的行会失败：

```
 if(searchValue < *list[half]){ 
```

如果您暂时将其更改为：

```
 if (T(searchValue) < *list[half]){ 
```

这是该代码可以工作的唯一方式，因为唯一`operator<`可以采取`*list[half]`的方式需要 a`const T &`在另一边。

# php - 尊重验证多个自定义错误消息

> ID：15351821
> 
> 赞同：8
> 
> 时间：2013-03-12T01:38:50.200
> 
> 标签：php, validation, respect-validation

如何使用[Respect Validation](https://github.com/Respect/Validation)获得多个自定义错误消息。

我有一些输入要针对多个验证器进行验证。而且我想要每个验证的自定义错误消息。

这是我尝试过的：

```
try {
    Respect\Validation\Validator::create()
        ->key('foo',
            v::length(20)->setName('bar')->setTemplate('Custom length message.')
             ->alnum()->setName('baz')->setTemplate('Custom alnum message.')
        )
        ->assert([
            'foo' => 'Hello, world!',
        ]);
} catch (Respect\Validation\Exceptions\ValidationException $exception) {
    $errors = $exception->findMessages([
        'bar',
        'baz',
    ]);
    var_dump($errors);
} 
```

输出是：

```
array (size=2)
  'bar' => string '' (length=0)
  'baz' => string 'Custom alnum message.' (length=21) 
```

我希望它输出两个自定义错误消息。

理想情况下，我可以为 1 个输入获得一组消息，例如：

```
var_dump($exception->findMessages(['foo'])); 
```

会给我：

```
array (size=1)
  'foo' => 
    array (size=2)
      0 => string 'Custom length message.' (length=22)
      1 => string 'Custom alnum message.' (length=21) 
```

这个问题似乎是杂草。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T19:20:15.200

您不能将它们链接在一起并获取自定义消息，因为由于链接的实现，您调用的最后一个自定义消息将简单地分配给规则集，而不是单独的规则。

为了证明这一点，我从 git 克隆了它，创建了一个 bin 目录，并用这个 test.php 稍微修改了你的示例

```
<?php
set_include_path(implode(PATH_SEPARATOR, array(
  realpath('../library')
)));

function __autoload($class_name) {
    include $class_name . '.php';
}

use Respect\Validation\Validator as v;

try {
    $chained = Respect\Validation\Validator::create()
        ->key('foo',
            v::length(20)->setName('bar')->setTemplate('Custom length message.')
             ->alnum()->setName('baz')->setTemplate('Custom alnum message.')
        );

    print_r($chained);

    $chained->assert(array(
            'foo' => 'Hello, world!',
        ));

} catch (Respect\Validation\Exceptions\ValidationException $exception) {
    $errors = $exception->findMessages(array(
        'bar',
        'baz',
    ));
    var_dump($errors);
}

the print_r($chained) shows us:

Respect\Validation\Validator Object
(
    [rules:protected] => Array
        (
            [00000000791c0e000000000030f3f15e] => Respect\Validation\Rules\Key Object
                (
                    [mandatory] => 1
                    [reference] => foo
                    [validator] => Respect\Validation\Validator Object
                        (
                            [rules:protected] => Array
                                (
                                    [00000000791c0e030000000030f3f15e] => Respect\Validation\Rules\Length Object
                                        (
                                            [minValue] => 20
                                            [maxValue] =>
                                            [inclusive] => 1
                                            [name:protected] =>
                                            [template:protected] =>
                                        )

                                    [00000000791c0e020000000030f3f15e] => Respect\Validation\Rules\Alnum Object
                                        (
                                            [additionalChars] =>
                                            [stringFormat] => /^(\s|[a-zA-Z0-9])*$/
                                            [name:protected] =>
                                            [template:protected] =>
                                        )

                                )

                            [name:protected] => baz
                            [template:protected] => Custom alnum message.
                        )

                    [name:protected] => foo
                    [template:protected] =>
                )

        )

    [name:protected] =>
    [template:protected] =>
) 
```

您可能会注意到规则集获取了姓氏和传入的最后一个模板，并且实际的验证对象都没有获得名称或模板。我在图书馆里看不到任何实际做你想做的事情的方法。

所以我决定另辟蹊径。在我的*../bin*目录中，我创建了这个类，扩展了 Valditor 类。

```
<?php
use Respect\Validation\Validator as v;
class BubbaValidator extends v {

    public function getRuleset($rulename = null){
        if (is_null($rulename)) return $this->rules;
        foreach ($this->rules as $rule){
            if ($rule->getName() == $rulename){
                return $rule;
            }
        }
    }

    public function getValidatorRules($rulesetName, $ruleType=null){
        $ruleset = $this->getRuleset($rulesetName);
        $validators = $ruleset->validator;

        if (is_null($ruleType)){
            return $validators;
        }

        foreach ($validators->rules as $key=>$validator){
            if (get_class($validator) === 'Respect\Validation\Rules\\'.$ruleType){
                $validator->name = "bar";
                $validator->template = "bubba rocks";
                $validators->rules[$key]->name = "bar";
                $validators->rules[$key]->template = "bubba rocks";
                return $validator;
            }
        }
    }

    public function setValidatorRuleName($rulesetName, $ruleType, $name){
        $ruleset = $this->getRuleset($rulesetName);
        $validators = $ruleset->validator;
        foreach ($validators->rules as $key=>$validator){
            if (get_class($validator) === 'Respect\Validation\Rules\\'.$ruleType){
                $validators->rules[$key]->name = $name;
                return $validator;
            }
        }
    }

    public function setValidatorRuleTemplate($rulesetName, $ruleType, $template){
        $ruleset = $this->getRuleset($rulesetName);
        $validators = $ruleset->validator;
        foreach ($validators->rules as $key=>$validator){
            if (get_class($validator) === 'Respect\Validation\Rules\\'.$ruleType){
                $validators->rules[$key]->template = $template;
                return $validator;
            }
        }
    }

} 
```

然后我修改了脚本并运行了它

```
<?php
set_include_path(implode(PATH_SEPARATOR, array(
  realpath('../library'),
  realpath(__DIR__)
)));

function __autoload($class_name) {
    include $class_name . '.php';
}

use BubbaValidator as v;

try {
    $chained = new BubbaValidator();
    $chained->key('foo',
            v::length(20)->setName('bar')->setTemplate('Custom length message.')
             ->alnum()->setName('baz')->setTemplate('Custom alnum message.')
        );

    $chained->setValidatorRuleName('foo', 'Alnum', 'baz');
    $chained->setValidatorRuleTemplate('foo', 'Alnum', 'Bubba\'s Custom Alnum!');
    $chained->setValidatorRuleName('foo', 'Length', 'bar');
    $chained->setValidatorRuleTemplate('foo', 'Length', 'Bubba\'s Custom Length!');

    $chained->assert(array(
            'foo' => 'Hello, world!',
        ));

} catch (Respect\Validation\Exceptions\ValidationException $exception) {
    $errors = $exception->findMessages(array(
        'bar',
        'baz',
    ));
    var_dump($errors);
} 
```

最终得到这个输出：

```
 D:\Users\Bubba\git\Validation\bin>php test.php 
  array(2) {
    ["bar"]=> 
   string(22) "Bubba's Custom Length!" 
    ["baz"]=>   
    string(21) "Custom alnum message." } 
```

那很有趣！

# ios - iOS 应用分发 - 归档 .ipa 文件

> ID：15351825
> 
> 赞同：0
> 
> 时间：2013-03-12T01:39:22.733
> 
> 标签：ios, xcode, in-house-distribution

我有一个`.ipa`使用企业证书签名并使用内部分发配置文件的文件。我没有原始源代码。当我在开发中心浏览分发文章时，我了解到必须将其存档以用于分发目的。我不知道如何归档 .ipa 文件。你能帮我做这件事吗？我是这个 iOS 开发世界的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:01:59.737

我将假设所有内容都已正确构建和签名，并具有正确的配置文件和分发证书。

您需要 XCode 生成的`myApp.ipa`和`myApp.plist`，可能还有其他方法，但通过 Xcode 生成这些是最简单的。拥有这两个文件后，将它们上传到您的服务器（例如`public_html/app/myApp.ipa`和`public_html/app/myApp.plist`）。

您的用户通过 Safari 导航到您的下载页面。在此页面上，您包含如下链接：

```
<a href="itms-services://?action=download-manifest&url=http://mydomain.com/app/myApp.plist">Install the app</a> 
```

它指向`myApp.plist`. 这必须有（除其他外）类似以下的项目（目前不确定确切的格式，但如果您在文本编辑器中打开 .plist 文件很容易发现）：

```
<key>url</key>
<string>http://mydomain.com/app/myApp.ipa</string> 
```

这个 URL 通常也会在 XCode 的归档过程中添加，但可以轻松编辑。它指向`.ipa`（实际上是一个包含可执行文件和其他资源（如图像）的 zip 文件）。

当用户在 Safari 中点击“安装应用程序”时，它将读取 plist 文件，如果到目前为止一切都成功，将提示用户安装应用程序。

# asp.net - asp.net 创建 uzer 向导在自定义步骤中处理控件

> ID：15351826
> 
> 赞同：2
> 
> 时间：2013-03-12T01:39:28.287
> 
> 标签：asp.net, webforms, asp.net-membership

我在我的 uzerwizard 中添加了一个额外的步骤

```
<asp:TemplatedWizardStep id="stpPayment" runat="server" Title="Payment">
        <ContentTemplate>
<asp:DropDownList ID="cmbSubs" runat="server" ClientIDMode="Static" 
                            Width="200px">

                            <asp:ListItem Value="month">Monthly Subscription</asp:ListItem>
                            <asp:ListItem Value="year">Annual Subscription</asp:ListItem>
                        </asp:DropDownList> 
```

我成功导航到新的一步

```
protected void NewUserprofileWizard_NextButtonClick(object sender, WizardNavigationEventArgs e)
{
    if (NewUserprofileWizard.ActiveStepIndex == 0)
    {
        NewUserprofileWizard.ActiveStepIndex = 1;

    }
} 
```

但我无法从我的代码隐藏注释中访问下拉列表：我可以在第一步（创建用户）中获取控件的句柄。

但下一步中的任何控件始终返回 null。

这是我正在使用的代码

```
DropDownList cmb = (DropDownList)NewUserprofileWizard.WizardSteps[1].FindControl("cmbSubs"); 
```

我总是返回一个空值。

请注意，这很好用

```
TextBox tmp = (TextBox)NewUserprofileWizard.CreateUserStep.ContentTemplateContainer.FindControl("Email");
    userProfile.AccountEmail = tmp.Text; 
```

问题似乎是自定义步骤独有的

谢谢您的帮助

* * *

尝试了 Gregors 的建议。没运气。我的总是出现为空。

![在此处输入图像描述](../Images/6d8b5e769eb275925261e548f147d061.png)

如果这有帮助：我的向导在用户控件内..使用用户控件的页面在母版页内.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:30:18.860

这是我为您创建的小示例，第一个 aspx 代码：

```
 <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" OnNextButtonClick="CreateUserWizard1_NextButtonClick">
            <WizardSteps>
                <asp:WizardStep runat="server" Title="My Custom Step">
                    <asp:DropDownList ID="cmbSubs" runat="server" ClientIDMode="Static"
                        Width="200px">
                        <asp:ListItem Value="month">Monthly Subscription</asp:ListItem>
                        <asp:ListItem Value="year">Annual Subscription</asp:ListItem>
                    </asp:DropDownList>
                </asp:WizardStep>
                <asp:CreateUserWizardStep runat="server" />
                <asp:CompleteWizardStep runat="server" />
            </WizardSteps>
        </asp:CreateUserWizard> 
```

现在找到第一个下拉列表的代码：

```
 protected void CreateUserWizard1_NextButtonClick(object sender, WizardNavigationEventArgs e)
    {
        if (e.CurrentStepIndex == 0)
        {
            //get instance to dropdown...
            string selectedValue = null;
            string controlId = null;
            foreach (var item in CreateUserWizard1.WizardSteps[0].Controls)
            {
                DropDownList ddl = item as DropDownList;
                if (ddl != null)
                {
                    selectedValue = ddl.SelectedValue;
                    controlId = ddl.ClientID;
                    break;
                }
            }       
        }
    } 
```

当然你也可以像这样找到你的下拉列表：

```
DropDownList cmbSubs = CreateUserWizard1.WizardSteps[0].FindControl("cmbSubs") as DropDownList; 
```

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:51:50.637

看来今天我的 google foo 做得好多了

因为我在模板向导步骤中，所以我必须将向导步骤转换为模板向导步骤。

从这里我现在可以找到控件。哇哦！

```
TemplatedWizardStep step = (TemplatedWizardStep)NewUserprofileWizard.WizardSteps[1];
cmb = (DropDownList)step.ContentTemplateContainer.FindControl("cmbSubs"); 
```

谢谢大家的帮助

# iphone - 将用户从 iOS 应用程序登录到远程 API 的正确流程

> ID：15351829
> 
> 赞同：11
> 
> 时间：2013-03-12T01:40:39.503
> 
> 标签：iphone, ios, objective-c, login

这是我试图在我的 iPhone 应用程序中编写的逻辑流程：

![在此处输入图像描述](../Images/7924a492f6f15a367d0e55e157b4497b.png)

我想我了解实现这一点的技术细节（使用 AFNetworking，使用 Devise 作为身份验证连接到 Rails API）。登录成功后，auth_token 将存储在钥匙串中。我想不通的是最好的方法来设置我的应用程序以像上面那样运行。

我当然希望体验对用户有好处，所以在它检查令牌并尝试登录时，它可能会显示某种“加载”屏幕。

我将如何实现这一目标？我不知道我应该在 AppDelegate 中将哪个视图控制器设置为 rootviewcontroller，或者在用户登录后我应该如何设置它。我在 Facebook 应用程序中尝试过这个，当我打开它时，我看到一个空白的导航控制器看来，然后我的个人资料视图已加载。他们在幕后做什么，这是最好的方法吗？

我没有使用故事板。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T02:10:52.077

我已经实现了一个类似的，RootViewController 是一个导航控制器中的“SplashViewController”，显示一个漂亮的徽标、活动指示器并为用户提供有关身份验证状态的信息。它包含用于检查那里存储的令牌和身份验证实现的逻辑。如果认证成功，ShowUserController 通过推送到 navigationController 堆栈来显示。

如果身份验证失败，则会以模态方式显示 LoginViewController。SplashViewController 实现了 LoginViewController 的委托，它只是将用户名和密码传递给 SplashViewController。成功登录后，LoginViewController 被关闭，用户被定向到 ShowUserController。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T02:59:42.010

使用 root 控制器启动您的应用程序，作为用户在成功登录后将看到的控制器，然后将登录视图/控制器分层放在顶部，并使用模态调用。如果身份验证成功，您的用户将已经在他们想要的位置，否则您在顶部以模态方式调用登录层。一旦他们通过身份验证，您将不再需要登录视图。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-25T18:26:42.353

详细说明@Owen Hartnett 的答案，因为此文本不适合评论；这就是我看到 Facebook 的 SDK 工作的方式。如果你构建一个使用 Facebook iOS SDK 作为唯一登录机制的应用程序，那么它的工作方式是这样的：

在我的应用程序委托的`didFinishLaunchingWithOptions`方法中，我首先在`NSUserDefaults`. 如果没有找到，我需要得到一个，因此我的应用程序委托立即启动一个模式登录流程，该流程以有效的访问令牌结束，然后保存以`NSUserDefaults`供下次打开应用程序时使用。

如果我的 . 文件中确实已经有访问令牌`didFinishLaunchingWithOptions`，那么我假设快乐路径并使用我在应用程序打开时在文件中找到的访问令牌异步打开“登录用户会话”。如果我存档的用于打开会话的访问令牌是合法的，则不会显示 UX。如果我存档的访问令牌是非法访问令牌（例如，服务器说它太旧了），那么我的应用程序委托中的打开会话方法在发现这一点后，将显示正确的模式登录流程。

由于这个 openSession 方法是异步执行的，您可能想知道需要登录用户的根视图控制器在此期间将如何运行。

答案是它应该写成好像它确实有一个登录用户。它应该假设。如果它运行的代码由于没有有效的访问令牌而无法运行或成功完成执行，那么该代码应该触发登录 UI *，如果它尚未出现*（即此时在应用程序打开时检查访问令牌，已经向用户呈现了模态登录 UI）。

最后，这是 Facebook SDK 登录流程的翻译版本。例如，如果您只使用他们的 SDK，您将永远不会`NSUserDefaults`像我建议的那样与之交互。我已将他们的流程转换为登录远程 API 的“自定义实现”。

# javascript - AngularJS 中的 Firebreath 对象

> ID：15351830
> 
> 赞同：2
> 
> 时间：2013-03-12T01:40:43.293
> 
> 标签：javascript, c++, angularjs, firebreath

我试图在 AngularJS 视图中包含一个 FireBreath 插件对象，但是当我尝试渲染视图时出现此错误：

```
TypeError: Cannot read property 'nodeName' of undefined 
```

我能够成功地将对象包含在视图中，`$compile`如下所示：

```
$("body").append($compile('<object id="plugin" type="application/x-firebreathplugin" width="0" height="0></object>')($scope)); 
```

但是，在包含这样的对象后，我无法让我的插件在 JS 中触发事件。

做这样的事情：

```
plugin = document.getElementById('plugin');
console.log(plugin); 
```

退货

```
TypeError 
```

在 Chrome 控制台中。但我仍然可以这样做：

```
plugin.callFunction(); 
```

并执行一个 FireBreath 方法。问题是当我尝试在 JS 中触发事件时。无论我尝试什么，我都无法触发该事件。所以这段代码永远不会执行：

```
var addEvent = function(obj, name, func) {
    obj.addEventListener(name, func, false);
}

addEvent(document.getElementById('plugin'), 'firebreathEvent', function(data) {
    console.log('data ' + data);
});

var plugin = document.getElementById('plugin');
plugin.functionThatTriggersFireBreathEvent(); 
```

有人知道它是否与调用后访问对象有关`$compile`吗？我注意到在常规 HTML 中（在使用 AngularJS 之前）在控制台中记录插件会返回：

```
<JSAPI-Auto Javascript Object> 
```

所以我在想，我使用`document.getElementById`后得到的任何东西`$compile`都不一样。

更容易的是，如果我可以将`<object>`标签包含在 view.html 文件中并显示它，`<body class='ng-view'>`但我得到顶部的 TypeError，所以如果有人对此有任何想法，那将是首选。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T02:52:32.393

`nodeName`我遇到了同样的问题，并且能够通过在我的插件对象中创建一个只读属性来解决问题。[我在 firebreath论坛帖子](https://groups.google.com/forum/#!topic/firebreath-dev/70xKyN4tox4)中询问了这个问题，出租车司机建议将其添加到 JSAPIAuto.cpp，这也有效，所以我提交了一个包含更改的[拉取请求](https://github.com/firebreath/FireBreath/pull/120)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T00:18:37.883

如果有人有兴趣，因为我无法触发该事件，我跟着这个链接：

[http://colonelpanic.net/2010/12/firebreath-tips-asynchronous-javascript-calls/](http://colonelpanic.net/2010/12/firebreath-tips-asynchronous-javascript-calls/)

（我认为是你的博客@taxilian）将数据返回给 JS。

插件代码：链接中的好例子。

JS代码：

```
//attach FireBreath Object to AngularJS View
$("body").append($compile('<object id="plugin" type="application/x-firebreathplugin" width="1" height="1"><param name="onload" value="pluginLoaded"/></object>')($scope));

var callback = function(data) {
    //data is an object
    console.log(data.resultFromFireBreath);
}

plugin = document.getElementById("plugin");
plugin.getData(callback); 
```

这必须暂时起作用，直到有人能弄清楚如何在`$compile`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:55:24.627

我曾经花了大约 6 个小时试图让 FireBreath 插件与 jquery 一起工作；这真的很有教育意义，但最终我认为这不值得。

长话短说，这不值得。特别是因为即使你可以让它工作，它也会在 IE9 上中断，其中 FireBreath 不支持 addEventListener （IE 从不给它偶数信息，所以它有点难以支持），无论如何你都需要使用 attachEvent。

# c++ - std::multimap 和 equal_range

> ID：15351833
> 
> 赞同：3
> 
> 时间：2013-03-12T01:40:51.797
> 
> 标签：c++, iterator, range, multimap, erase

我对`std::multimap`容器有些头疼，我想知道实现目标的正确方法是什么。基本上，这是我的[SSCCE](http://sscce.org/)：

```
#include <iostream>
#include <map>

int main ()
{
    typedef std::multimap<int, int> CollectionType;
    typedef std::pair<CollectionType::iterator, CollectionType::iterator> RangeType;

    CollectionType multiMap;

    multiMap.insert(std::make_pair(1, 1));
    multiMap.insert(std::make_pair(1, 2));
    multiMap.insert(std::make_pair(2, 3));
    multiMap.insert(std::make_pair(2, 4));
    multiMap.insert(std::make_pair(2, 5));
    multiMap.insert(std::make_pair(3, 1));

    RangeType range = multiMap.equal_range(2);
    for (CollectionType::iterator iterator = range.first; iterator != range.second; ++iterator)
    {
        if (iterator->second == 4)
        {
            //multiMap.erase(iterator);//ISSUE 1
        }
        else
        {
            //iterator->first = -1;//ISSUE 2
        }
    }

    return 0;
} 
```

正如您在上面看到的，我需要`multimap`为给定键选择一个范围，然后：

1.  我需要从范围中删除某些行
2.  我需要从范围内更改其他行的键

关于 1，由于“[对已擦除元素的引用和迭代器无效](http://en.cppreference.com/w/cpp/container/multimap/erase)”，我该如何删除这些元素？我应该在某个容器中推送特定的迭代器并在循环结束后对其进行迭代吗？我看到了[这个答案](https://stackoverflow.com/a/446295/1174378)，但它似乎有点hackish/丑陋/容易出错/等等......

关于2，由于“愚蠢”的方法（显然）不起作用，那么实现我需要的好方法是什么？一旦我解决了问题 1，我可以删除元素并在它们的位置插入新元素，但是如果假设我错误地插入了一个与我刚刚删除的键相同的项目，那可能不会弄乱迭代吗？ ..

```
int second = iterator->second;
localEdges.smarter_erase(iterator);
localEdges.insert(std::make_pair(-1, second)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:25:28.393

`erase`返回一个迭代器，因此将您的迭代器重置为该迭代器，它将继续有效。

只需重新插入新密钥，擦除原始密钥

[http://ideone.com/0Pr6Qc](http://ideone.com/0Pr6Qc)：

```
#include <iostream>
#include <map>

void printMultimap(const std::multimap<int, int>& multiMap)
{
    std::cout << "MultiMap:\n";
    for (const auto& pair : multiMap)
    {
        std::cout << pair.first << ":" << pair.second << "\n";
    }
}

int main()
{
    std::multimap<int, int> multiMap;
    multiMap.insert(std::make_pair(1, 1));
    multiMap.insert(std::make_pair(1, 2));
    multiMap.insert(std::make_pair(2, 3));
    multiMap.insert(std::make_pair(2, 4));
    multiMap.insert(std::make_pair(2, 5));
    multiMap.insert(std::make_pair(3, 1));

    printMultimap(multiMap);

    auto range = multiMap.equal_range(2);
    for (auto iterator = range.first; iterator != range.second;)
    {
        if (iterator->second != 4)
        {
            multiMap.insert(std::make_pair(-1, iterator->second));
        }
        iterator = multiMap.erase(iterator);
    }

    printMultimap(multiMap);

    return 0;
} 
```

# memory - 从内存地址加载时，X86_64 程序集不返回正确的值

> ID：15351834
> 
> 赞同：0
> 
> 时间：2013-03-12T01:41:01.300
> 
> 标签：memory, assembly, load, x86-64, cpu-registers

我是 X86_64 程序集的新手，我正在尝试实现一个 brk 内存管理程序，但我在某些代码行中遇到了一些问题。

.data 部分：

```
.section .data

heap_start: .double 0

.equ HDR_AVAIL_OFFSET, 0
.equ HDR_SIZE_OFFSET,4
.equ UNAVAILABLE, 0
.equ AVAILABLE, 1 
```

有问题的文本部分：

```
.text
alloc:
    movq heap_start, %rdx
loop:
    movq HDR_AVAIL_OFFSET(%rdx), %rcx
    cmpq $UNAVAILABLE, %rcx
    jne found_space
loop2:
    movq HDR_PROX(%rdx), %rdx
    cmpq %rdx, heap_start
    jne loop
    jmp new_brk
found_space:

    cmpq HDR_SIZE_OFFSET(%rdx), %rdi
    jg loop2 
```

问题是，HDR_AVAIL_OFFSET(%rdx) 应该在 heap_start 上加载 0 寻址的内容。但是，它将完全不同的内存地址返回到 %rcx。

heap_start 指向我要检查的内存数组的开头，第一个元素是 0。当我使用 x/nfu 检查 gdb 上的内存时，它显示如下：

```
(gdb) x/nfu $rdx
0x602001:  0 
```

但是之后

```
movq HDR_AVAIL_OFFSET(%rdx), %rcx 
```

%rcx 是：

```
(gdb) print $rcx
$1 = 429496729600 
```

谁能告诉我我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:41:51.643

您使用的数据是 32 位，如偏移量相隔 4 个字节所示，但您以 64 位访问它。如果你以十六进制打印 429496729600，你会得到 0x6400000000，这表明低 32 位都是 0。

要解决此问题，请将您的数据字段更改为 64 位宽，或者通过将`q`后缀更改为`l`s 并将寄存器更改为 32 位访问，`e`而不是`r`在处理数据时使用：

```
.text
alloc:
    movq heap_start, %rdx               # Address, 64 bits
loop:
    movl HDR_AVAIL_OFFSET(%rdx), %ecx   # Data, 32 bits
    cmpl $UNAVAILABLE, %ecx             # Data
    jne found_space
loop2:
    movq HDR_PROX(%rdx), %rdx           # Address
    cmpq %rdx, heap_start               # Address
    jne loop
    jmp new_brk
found_space:
    cmpl HDR_SIZE_OFFSET(%rdx), %edi    # Data
    jg loop2 
```

# matlab - 如何在相关矩阵中将较大的值靠近矩阵对角线移动

> ID：15351835
> 
> 赞同：4
> 
> 时间：2013-03-12T01:41:03.013
> 
> 标签：matlab, matrix, correlation

我有五个元素（C1、C2、C3、C4、C5）的相关矩阵 X

```
 C1    C2    C3     C4   C5  

 C1    *     1     0     1     0
 C2    1     *     0     0     1
 C3    0     0     *     1     1
 C4    1     0     1     *     0
 C5    0     1     1     0     * 
```

我想使用 MatLab 将尽可能多的非零单元格靠近对角线，同时保持对角线单元格为“*”。

例如，您可能会注意到以下矩阵中的列和行正在移动，而对角线单元格是“*”。

```
 C1    C4    C2     C5   C3  

 C1    *     1     1     0     0
 C4    1     *     0     0     1
 C2    1     0     *     1     0
 C5    0     0     1     *     1
 C3    0     1     0     1     * 
```

因为我想做聚类，所以我希望尽可能多的非零单元格在移位后接近对角线。这是一个 NP 难题。

任何人都知道 MatLab 中的哪些功能可以实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:15:44.893

您正在寻找的可能是[反向 Cuthill-McKee 算法 (RCM)](http://en.wikipedia.org/wiki/Cuthill%E2%80%93McKee_algorithm)，它几乎可以满足您的需求：对于给定的矩阵，它会找到一个排列，其非零元素往往更接近对角线。MATLAB 中有一个内置函数[`symrcm`](http://www.mathworks.com/help/matlab/ref/symrcm.html)可以做到这一点。

因此，假设这`X`是您的矩阵，您可以执行以下操作：

```
p = symrcm(X);
Xnew = X(p, p); 
```

`Xnew`是新的重新排序矩阵，并且`p`是新的行/列顺序。

### 例子

我们先创建一个矩阵：

```
X = [10 0 0 7 0; 3 20 0 0 11; 0 0 30 0 29; 12 7 0 40 0; 0 33 0 0 50] 
```

现在让我们重新排序：

```
p = symrcm(X);
Xnew = X(p, p) 
```

结果是：

```
Xnew =    
    40    12     7     0     0
     7    10     0     0     0
     0     3    20    11     0
     0     0    33    50     0
     0     0     0    29    30 
```

似乎是对的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:11:13.253

```
A = [1 0  0 1 0;
     0 1  0 0 1;
     0 0  1 0 1;
     1 1  0 1 0;
     0 1  0 0 1]; 
N = length(A);
switched = false;

%%
% Calculate initial Global Energy
disp(A);
global_energy = 0;
for l = 1:N
    for m = 1:N
        if(A(l,m))
            global_energy = global_energy + (l-m)^2/2;
        end
    end
end
disp(global_energy); 

counter = 0;
counter_cutoff = 10000000000;
while(true)
    switched = false;
    counter = counter + 1;
    for i = 1:N
        for j = i+1:N        
            current_metric = 0; % Calculate metric of row i and j with columns i and j
            permuted_metric = 0; % Calculate metric if they were permuted        
            % Row i
            for k = 1:N
                if(k ~= i && k ~= j && A(i,k))
                    current_metric = current_metric + (i-k)^2/2;
                    permuted_metric = permuted_metric + (j-k)^2/2;
                end
            end
            % Row j
            for k = 1:N
                if(k ~= i && k ~= j && A(j,k))
                    current_metric = current_metric + (j-k)^2/2;
                    permuted_metric = permuted_metric + (i-k)^2/2;
                end
            end
            % Col i
            for k = 1:N
                if(k ~= i && k ~= j && A(k,i))
                    current_metric = current_metric + (i-k)^2/2;
                    permuted_metric = permuted_metric + (j-k)^2/2;
                end
            end
            % Col j 
            for k = 1:N
                if(k ~= i && k ~= j && A(k,j))
                    current_metric = current_metric + (j-k)^2/2;
                    permuted_metric = permuted_metric + (i-k)^2/2;
                end
            end

            % If permuted metric is less, swap columns and rows - set switched to true 
            if(permuted_metric < current_metric)
                switched = true; % there was at least one switch
                % Now switch rows and columns
                % Switch columns first
                A(:,[i j]) = A(:,[j i]);
                % Now switch rows
                A([i j],:) = A([j i],:);
            end
        end
    end
    if(~switched || counter > counter_cutoff)
        % All permutations did not lead to a switching of rows and columns
        break;
    end
end

% Calculate final Global Energy
disp(A);
global_energy = 0;
for l = 1:N
    for m = 1:N
        if(A(l,m))
            global_energy = global_energy + (l-m)^2/2;
        end
    end
end
disp(global_energy); 
```

终端：

```
 1     0     0     1     0
 0     1     0     0     1
 0     0     1     0     1
 1     1     0     1     0
 0     1     0     0     1

22

 1     1     0     0     0
 1     1     1     0     0
 0     0     1     1     0
 0     0     1     1     0
 0     0     0     1     1

 3 
```

# c++ - 使用 SFINAE 根据类模板参数的类型更改类中调用的函数

> ID：15351840
> 
> 赞同：1
> 
> 时间：2013-03-12T01:41:17.743
> 
> 标签：c++, templates, c++11, sfinae

我有一个模板类，它可以采用标量或索引类型，我想根据函数的类型调用不同版本的函数：

```
template <typename Ta, typename ... T>
struct MyClass {
    Ta tt; //can be either a scalar (double, complex<double>, int, etc), 
          //or an indexed type (MyClass, std::vector<double>, double[], etc)

    //....

    //I would like the following to be called when tt is a scalar type:
    auto operator[]( size_t i ) { return tt; };

    //I would like the following to be called when tt has [] overloaded:
    auto operator[]( size_t i ) { return tt[i]; };

}; 
```

有没有办法做到这一点？返回值 SFINAE 不起作用（因为此函数上没有模板参数），基于类的 SFINAE 似乎不起作用（因为可变参数模板使得最后有一个虚拟模板参数不起作用）。还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:31:15.223

我相信 Xeo 误解了 Andrew 所说的“标量”的含义。Xeo 遵循标量的 C/C++ 定义（根据 C++11、3.9/9），而 Andrew 的意思更接近于线性代数意义（向量空间的基础字段的一个元素）。例如，虽然 Andrew`std::complex<double>`是标量，但 Xeo 不是这种情况，因为他使用`std::is_scalar<std::complex<double>>`检查那个，当然，他得到`false`.

我相信，安德鲁想要的是`operator[](size_t i)`回归：

1.  `tt[i]`如果`tt[i]`是合法的；或者

2.  `tt`如果`tt[i]`是非法的。

我们可以轻松地将 SFINAE 排除在上面的第一个候选者之外。通过实现一个检查调用`tt[i]`是否合法的特征，我们还可以在表达式合法时 SFINAE 离开第二个候选者。创建这个特征不是很简单，并且依赖于重载决议（真正的经典`no f(...)`）。我将跳过 trait 的创建，而是直接在内部使用相同的想法`MyClass`。为了避免`operator[]()`使用虚拟参数（重载解决技巧所需）污染 ' 的签名，我将创建名为的私有方法`value()`，该方法采用虚拟参数。然后`operator[]()`只会将呼叫委托给其中一个。

代码如下。

```
#include <type_traits> // for std::declval

template <typename Ta>
class MyClass {

    // This overload is SFINAEd away when tt[i] is illegal
    template <typename T = Ta, typename R = decltype(std::declval<T>()[0])>
    R
    value(size_t i, int) { return tt[i]; }

    // This one is always present but is a worse match than the other
    // one when resolving value(i, 0).
    const Ta&
    value(size_t, ...) { return tt; }

public:

    Ta tt;

    auto operator[]( size_t i ) -> decltype(this->value(0, 0)) {
        return value(i, 0);
    }

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T01:48:51.827

只需给出`operator[]`sa 虚拟模板参数即可。

```
template<class U = Ta, EnableIf<std::is_scalar<U>>...>
auto operator[]( size_t i ){ return tt; };

template<class U = Ta, DisableIf<std::is_scalar<U>>...>
auto operator[]( size_t i ) { return tt[i]; }; 
```

有关这种特殊风格的 SFINAE 的一些解释，请参见[此处](http://rmartinho.github.com/cxx11/2012/06/01/almost-static-if.html)。

# asp.net-mvc - 在存储库中创建更新方法 - 附加/分离实体不起作用

> ID：15351846
> 
> 赞同：1
> 
> 时间：2013-03-12T01:41:44.107
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, web-applications, asp.net-mvc-4

我有以下更新方法：

```
 public Folder UpdateFolder(Folder folder)
        {
            _db.Folders.Attach(folder); // error happens here
            var entry = _db.Entry(folder);
            entry.Property(e => e.Title).IsModified = true;
            SaveChanges();
            return entry.Entity;
        } 
```

当我尝试附加时，我得到“具有相同密钥的对象已经存在”。如果我删除该行，我会得到“此上下文中不存在类型为“文件夹”的实体”。

然后我尝试以下操作：

```
 public Folder UpdateFolder(Folder folder)
    {

        var entry = _db.Entry(folder);
        entry.State= EntityState.Detached;
        _db.Folders.Attach(folder);

        entry.Property(e => e.Title).IsModified = true; 
```

当我调用 Attach 时，我得到了同样的错误。

这是我从（测试方法）调用它的地方：

```
 // Update Folder, Check Folder
        homeFolder.Title = "Updated";
        _dtoServices.UpdateFolder(homeFolder); // HERE
        Assert.AreEqual(_dtoServices.GetFolder(homeFolder.FolderId).Details, "Updated"); 
```

在我的 DtoServices 中：

```
 public FolderDto UpdateFolder(FolderDto folderDto)
        {     
            var test = _repository.UpdateFolder(folderDto.ToEntity());
            return null;
        } 
```

在我的 FolderDto 中：

```
public class FolderDto
{
    public FolderDto()
    {
    }

    public FolderDto(Folder folder)
    {
        FolderId = folder.FolderId;
        Title = folder.Title;          
    }

    [Key]
    public int FolderId { get; set; }

    [Required]
    public string Title { get; set; }

    public Folder ToEntity()

     {
        var folder = new Folder
        {
            FolderId = FolderId,
            Title = Title,
        };
        return folder;
    }
 } 
```

知道为什么会这样吗？如何为我的更新方法构建更强大的检查？我四处搜寻，但找不到任何结论性的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:34:32.730

您必须确保该实体尚未附加。我做这样的事情（TEntity：类）：

```
...
//See if entity is attached already and return if so.    
TEntity attached = GetAttached(entityToUpdate);

if(attached == null)
{
  //Entity is not attached, attach it.
}      
...

//Generic helper to check for attached entity
private TEntity GetAttached(TEntity aEntity)
{
  var lObjectContext = ((IObjectContextAdapter)context).ObjectContext;
  EntityKey lKey = GetEntityKey(aEntity);

  ObjectStateEntry entry;
  if (!lObjectContext.ObjectStateManager.TryGetObjectStateEntry(lKey, out entry)) return null;

  if (entry.State == EntityState.Detached) return null;

  return (TEntity)entry.Entity;
} 
```

# java - JQuery $('#image').addimagezoom，用于从数据库中分散的图片

> ID：15351848
> 
> 赞同：0
> 
> 时间：2013-03-12T01:42:04.000
> 
> 标签：java, javascript, jquery, mysql, sql

我有一个变量，它显示引用数据库中一行的图片。

当我使用 Javascript 进行放大时：

```
 "$('#image1').addimagezoom({ // single image zoom
        zoomrange: [3, 10],
        magnifiersize: [300,300],
        magnifierpos: 'left',
        cursorshade: true,
        largeimage: ''                "
    }) 
```

它只会放大第一张图像。然后，当我用句点更改井号，将 ID 切换为 CLASS 时，它会放大所有图像，但会分散一种类型的图像。如果您需要更多信息来帮助解决这个谜题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:59:11.030

看起来您需要在脚本中使用**largeimage**属性。

```
$('.img').addimagezoom({
zoomrange: [6, 18],
magnifiersize: [600,600],
magnifierpos: 'right',
cursorshade: true,
cursorshadecolor: 'pink',
cursorshadeopacity: 0.3,
cursorshadeborder: '1px solid red',
    /*8888888 SEE HERE 8888888*/
largeimage: $(this).attr('src') //<-- No comma after last option!
}) 
```

下面的小提琴：

[http://jsfiddle.net/s6TMs/10/](http://jsfiddle.net/s6TMs/10/)

# java - 从末尾填充数组

> ID：15351849
> 
> 赞同：0
> 
> 时间：2013-03-12T01:42:04.823
> 
> 标签：java, arrays, double

我有一个双重拆分成一个 int 数组，但是我面临的问题是我需要它从后面填写，如下所示：

```
 int[] arrayA = new int[5];
    int[] arrayB = new int[5];
    x = 23456.08;
    //code here

    //what im left with:
    arrayA [0,2,3,4,5,6];
    arrayB [0,8]; 
```

下面是我如何切割双打：

```
 public static void main(System args[])
{
    Scanner input = new Scanner(System.in);
    String answer = "";
    int count = 0;
    int thatone = 0;
    int[] splitD = new int[5]; //main num
    int[] splitDec = new int[1]; //decimal
    //Enter the Number
    System.out.print("Enter a number to convert: ");
    double num = input.nextDouble();

           // convert number to String
    String convert = num + "";
    // split the number
    String[] split = convert.split("\\.");
    String firstPart = split[0];
    char[] charArray1 = firstPart.toCharArray();
    // recreate the array with size equals firstPart length
    splitD = new int[charArray1.length];
    for (int i = 0; i < charArray1.length; i++) 
    {
        // convert char to int
        splitD[i] = Character.getNumericValue(charArray1[i]);
        count++;
    }

    // the decimal part
    if (split.length > 1) 
    {
        String secondPart = split[1];
        char[] charArray2 = secondPart.toCharArray();
        splitDec = new int[charArray2.length];
        for (int i = 0; i < charArray2.length; i++) 
        {
            // convert char to int
            splitDec[i] = Character.getNumericValue(charArray2[i]);
        }
    }
    for(int i =0; i<count;i++)
    {
        if(i ==0) // x00000.00 or 000x00.00
        {
            if(splitD[0] != "0")
            {
                switch (splitD[i])
                {
                    case 9: answer+="Nine"; break;
                    case 8: answer+="Eight"; break;
                    case 7: answer+="Seven"; break;
                    case 6: answer+="Six"; break;
                    case 5: answer+="Five"; break;
                    case 4: answer+="Four"; break;
                    case 3: answer+="Three"; break;
                    case 2: answer+="Two"; break;
                    case 1: answer+="One"; break;
                    default: answer+=""; break;
                }
                answer+= " Hundred ";
            }
            else
            {
                answer+= "";
            }
        }
        else if(i ==1)//this goes with i =2 //0x0000
        {
            if(splitD[i] == 1)
            {
                switch (splitD[i+1])
                {
                    case 9: answer+="Nineteen"; break;
                    case 8: answer+="Eighteen"; break;
                    case 7: answer+="Seventeen"; break;
                    case 6: answer+="Sixteen"; break;
                    case 5: answer+="Fifteen"; break;
                    case 4: answer+="Fourteen"; break;
                    case 3: answer+="Thirteen"; break;
                    case 2: answer+="Twelve"; break;
                    case 1: answer+="ten"; break;
                    default: answer+=""; break;
                }
                answer+= " Thousand ";
                thatone = 1;
            }
            else
            {
                switch (splitD[i])
                {
                    case 9: answer+="Ninety"; break;
                    case 8: answer+="Eighty"; break;
                    case 7: answer+="Seventy"; break;
                    case 6: answer+="Sixty"; break;
                    case 5: answer+="Fifty"; break;
                    case 4: answer+="Fourty"; break;
                    case 3: answer+="Thirty"; break;
                    case 2: answer+="Twenty"; break;
                    case 1: answer+=""; break;
                    default: answer+=""; break;
                }
            }
        }
        else if(i == 2) //00x000
        {
            if(thatone ==0)
            {
                switch (splitD[i])
                {
                    case 9: answer+=" Nine"; break;
                    case 8: answer+=" Eight"; break;
                    case 7: answer+=" Seven"; break;
                    case 6: answer+=" Six"; break;
                    case 5: answer+=" Five"; break;
                    case 4: answer+=" Four"; break;
                    case 3: answer+=" Three"; break;
                    case 2: answer+=" Two"; break;
                    case 1: answer+=" One"; break;
                    default: answer+=""; break;
                }
                answer+= " Thousand ";
            }
            else
            {
            }

        }
        else if(i ==3)
        {
             switch (splitD[i])
            {
                case 9: answer+="Nine"; break;
                case 8: answer+="Eight"; break;
                case 7: answer+="Seven"; break;
                case 6: answer+="Six"; break;
                case 5: answer+="Five"; break;
                case 4: answer+="Four"; break;
                case 3: answer+="Three"; break;
                case 2: answer+="Two"; break;
                case 1: answer+="One"; break;
                default: answer+=""; break;
            }
            answer+= " Hundred ";
        }
        else if(i ==4) //0000x0
        {
            switch (splitD[i])
            {
                case 9: answer+="Ninety"; break;
                case 8: answer+="Eighty"; break;
                case 7: answer+="Seventy"; break;
                case 6: answer+="Sixty"; break;
                case 5: answer+="Fifty"; break;
                case 4: answer+="Fourty"; break;
                case 3: answer+="Thirdy"; break;
                case 2: answer+="Twenty"; break;
                case 1: answer+=""; break;
                default: answer+=""; break;
            }
            answer+= " ";
        }
        else if(i ==5) //00000x
        {
            switch (splitD[i])
                {
                    case 9: answer+="Nine"; break;
                    case 8: answer+="Eight"; break;
                    case 7: answer+="Seven"; break;
                    case 6: answer+="Six"; break;
                    case 5: answer+="Five"; break;
                    case 4: answer+="Four"; break;
                    case 3: answer+="Three"; break;
                    case 2: answer+="Two"; break;
                    case 1: answer+="One"; break;
                    default: answer+=""; break;
                }
        }
}
       if(splitDec[0] == 0)
        {
           answer += " and 00/100 Dollars";
       }
       else if(splitDec[1] == 0)
       {
           answer += " and " +splitDec[0] + "0/100 Dollars";
       }
               else
       {
           answer += " and " +splitDec[0] +splitDec[1] +" /100 Dollars";
       }
                System.out.println(answer);
    }
    } 
```

我应该怎么做才能使数组在适当的位置添加 0？例如，如果我输入 54.00 我会得到：

```
 int[] SplitD = {0,0,0,0,5,4}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:54:09.477

考虑为每个字符（包括小数点）创建一个数组`String`，这将是一种更好的方法：`String`

```
String[] chars = String.valueOf(num).split("(?<=.)"); 
```

任务完成。

### 编辑：

要使用开关，甚至不要拆分：

```
for (byte b : String.valueOf(num).getBytes()) {
    switch(b) {
    case '.':
    case '1':
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:17:37.740

而不是重新初始化数组：

```
// recreate the array with size equals firstPart length
splitD = new int[charArray1.length];
for (int i = 0; i < charArray1.length; i++) 
{
    // convert char to int
    splitD[i] = Character.getNumericValue(charArray1[i]);
    count++;
} 
```

使用现有的（长度 = 5），从**后面**迭代：

```
if(charArray1.length > 5) // heavy hard-code, would prefer something better
    throw new IllegalArgumentException("Maximum 5 digits, on both decimal sides.");
    // watch out of ArrayIndexOutOfBoundsException

for (int i = charArray1.length - 1, j = splitD.length -1 ;
                                    i >=0 && j >=0; i--, j--) 
{
    // convert char to int
    splitD[j] = Character.getNumericValue(charArray1[i]);
    count++;
} 
```

回想一下，`int`数组在初始化时用零填充。

# php - PHP网站搜索和显示项

> ID：15351854
> 
> 赞同：-1
> 
> 时间：2013-03-12T01:42:37.040
> 
> 标签：php, html, mysql

我正在创建一个虚拟在线商店来说明一些现实世界的功能，其中之一是在网站上搜索项目，即

我已经编写了 PHP 代码来处理这种情况，但它不能正常工作。它所做的事情是它与结果和结果数量相匹配，但它不显示它们，我当然不会这样做。

一直试图在 GOOGLE 上寻找答案，但没有找到相应的解决方案或针对我的问题的提示。

这里将列出我正在使用的代码：

PHP代码（search.php）：

```
<?php 

    session_start();

    include('connect_mysql.php');

    $product_name = 'product_name';
    $product_qua = 'product_qua';
    $product_price = 'product_price';
    $product_image = 'product_image';
    $product_des = 'product_des';

    if (isset($_POST['keyword'])) 
    {
        $search = $_POST['keyword'];

        if (!empty($search))
        {
            $query = "SELECT product_name FROM products WHERE product_name='$search'";
            $query_search = mysql_query($query);

            echo mysql_num_rows($query_search);

            if (mysql_num_rows($query_search) >=1)
            {
                echo 'Results found: <br>';

                while ($query_row = mysql_fetch_row($query_search)) 
                {
                    echo $query_row['product_name'];

                }
                while($rows = mysql_fetch_array($query_search))
                { ?>
                    <table id='display'>
                    <tr><td><?php echo "<img src=$rows[$product_image] class='grow'>" ?></td></tr>

                    <tr>
                        <th></th>
                        <th><strong>Avalible</strong></th>
                        <th><strong>Price</strong></th>
                        <th><strong>Description</strong></th>
                    </tr>

                    <tr>
                    <td width='290px'><?php echo "$rows[$product_name]" ?></td>
                    <td width='290px'><?php echo "$rows[$product_qua]" ?></td>
                    <td width='290px'><?php echo "£ $rows[$product_price]" ?></td>
                    <td width='290px'><?php echo "$rows[$product_des]" ?></td>
                    </tr>
                    <tr>
                    <td><p>Please Login To purchase this item </p><br /><a href="login.php">Login</a></td>
                    </tr>
                    </table>

                <?php
                }

            } else {
              echo 'NO results found.';

            }

        }
    }

?> 
```

HTML 代码 (index.php):

```
<form action="search.php" method="post">

        <input type="text" name="keyword" size="20" placeholder="Search for products...."/>
        <input type="submit" value="Search >>" />

</form> 
```

当前结果的打印屏幕：

![在此处输入图像描述](../Images/d3f1f1d45cd7e6d5839a18ec6dc1a44c.png)

正如您已经注意到的那样，它还说找到了 3 个结果，这是正确的，因为我一直在搜索这是我的产品的通用名称，但只出现了两个表而且它们是空的。

网址：[http ://studentnet.kingston.ac.uk/~k1024026/index.php](http://studentnet.kingston.ac.uk/~k1024026/index.php)

最后我的产品表包括： product_id product_name product_qua product_price product_image product_des product_type attrebiutes/columns

任何人都可以发现我可能在哪里出错......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:52:11.930

首先，尝试删除它

```
while ($query_row = mysql_fetch_row($query_search)) 
                {
                    echo $query_row['product_name'];

                } 
```

我还注意到您的代码中有一些错误的错字：

*   table id="display" 一个 id 应该是唯一的。如果您迭代它并且仍然希望它是一个 id，请使用 display-n 代替，例如，n 是产品的唯一 id。（或使用 class="display" 而不是 id）

*   你应该看看 sql injection 以及如何打败它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:54:11.663

我可能更愿意这样做：

```
$query = "SELECT product_name FROM products WHERE product_name LIKE %" . $search . "%"; 
```

希望它会有所帮助。然后使用 foreach 循环遍历结果，例如：

```
foreach ($search as $key => $result){
      echo $result . '<br />';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:08:17.247

1.  `mysql_fetch_row( $query_search)`返回一个普通数组而不是关联数组，但您正在尝试使用键访问它的值 - `$query_row [ 'product_name' ]`。而是使用`_fetch_array`

2.  有很多语法错误。函数名和参数列表之间有一个空格。

3.  不要使用`mysql_`. 它们已被弃用（阅读：死亡）。请改用 PDO。

# javascript - Javascript生成的HTML不起作用

> ID：15351857
> 
> 赞同：0
> 
> 时间：2013-03-12T01:42:53.443
> 
> 标签：javascript, html

控制台没有给出任何错误，窗口什么也没有显示。它有什么问题？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home</title>
    <script type="text/javascript">
        function stuffify(){
            for(var a=6;a<=0;a--){
                document.getElementById("stuff").innerHTML+="<h"+a+">stuff</h"+a+"></br>";
            }
        }
    </script>
</head>
<body>
    <div id="stuff" onload="stuffify()"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:44:53.687

该`onload`功能将在`body`您的文档标签上起作用。

此外，你的 for 循环的条件不正确，它应该是： `for(var a=6; a >= 0; a--)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:47:41.643

尝试这个

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home</title>
    <script type="text/javascript">
        function stuffify(){
            for(var a=6;a<=0;a--){
                document.getElementById("stuff").innerHTML+="<h"+a+">stuff</h"+a+"></br>";
            }
        }

    </script>
</head>
<body onload="stuffify();">
    <div id="stuff" ></div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:02:33.043

以下标签支持 onload：

```
<body>, <frame>, <frameset>, <iframe>, <img>, <input type="image">, <link>, <script>, <style> 
```

这解释了为什么在加载 div 后不触发填充。
因此，您可以将 onload 函数绑定到 body 而不是 div，或者在 div 之后插入脚本，如下所示：

```
<div id="stuff" ></div>
<script type="text/javascript">
stuffify();
</script> 
```

# php - 通过 JSON 发送和解码对象数组

> ID：15351858
> 
> 赞同：0
> 
> 时间：2013-03-12T01:43:00.830
> 
> 标签：php, jquery, ajax, json, object

我有一个`People`对象数组。我将它们发送到 PHP，但是将我的对象返回到 PHP 中以便我可以操作它们的方法似乎很复杂。这就是我所拥有的，但它似乎没有将任何内容返回给我的 AJAX 调用。现在我`Person`的数组中只有 1 个对象，但我想在前进之前确保一切正常。简而言之，当我解码我的 JSON 时，它不应该将它转换为 PHP 中的对象吗？最后，我想要一个 PHP 对象数组，它们是`People`

jQuery

```
var people = new Array();
var person = new Person("Michael", "Jackson", 50);
localStorage.setItem(person.firstName + " " + person.lastName, JSON.stringify(person));

function Person(firstName, lastName, age)
{
    this.firstName=firstName;
    this.lastName=lastName;
    this.age=age;
}

function getStorage(){
    var tempPerson;
    for(var i = 0; i < localStorage.length; i++)
    {
        tempPerson = $.parseJSON(localStorage.getItem(localStorage.key(i)));
        people.push(tempPerson);
    }
}

function getPeople(){
    $.post(
        "people.php",
        {people : people},
        function(data) 
        {
            alert(data);
        }
    );
}

getStorage();
getPeople(); 
```

PHP

```
<?php
$personObj = Array();
$people = $_POST['people'];

for($i = 0; $i < count($people); $i++)
{
    foreach($people[$i] as $person)
    {
        $streamObj = json_decode($person);
    }
}

echo $personObj->$firstName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:17:07.153

除了进行@Even Hahn 建议的更改之外，您还需要更改您发布的数据，如下所示：

```
$.post(
    "people.php",
    {people : JSON.stringify(people)},
    function(data) 
    {
        alert(data);
    }
); 
```

通过这种方式发布单个名称/值对。名称是“people”，值是`Person`对象数组的 JSON 编码字符串。

然后，当您在 PHP 代码中调用以下代码时，您正在将该 JSON 编码字符串解码为 PHP 端的一个数组。

```
$people = json_decode($_POST['people']); 
```

我还看到了您分配`$personObj`给数组的位置，但我没有看到您在数组中放置任何内容的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T01:55:26.070

尝试在 PHP 中移动 JSON 解码：

```
$personObj = Array();
$people = json_decode($_POST['people']);

for($i = 0; $i < count($people); $i++)
{
    foreach($people[$i] as $person)
    {
        $streamObj = $person;
    }
}

echo $personObj->$firstName; 
```

这是因为`$_POST['people']`是需要解码的 JSON 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:38:18.833

也许 PHP 代码应该是这样的：

```
<?php
$personObj = Array();
$people = $_POST["people"];

foreach($people as $p)
{
    $val = str_replace("\\","",$p);
    $personObj = json_decode($val);
}

echo $personObj->firstName;
?> 
```

# python - 从脚本中调用魔法方法

> ID：15351865
> 
> 赞同：1
> 
> 时间：2013-03-12T01:43:49.667
> 
> 标签：python, ipython

我正在尝试更新[此处](http://mail.scipy.org/pipermail/ipython-dev/2009-May/005183.html)找到的脚本以与 IPython 0.13.1 一起使用，并达到了停顿状态。脚本调用

```
import IPython.ipapi
ip = IPython.ipapi.get()
for var in self.magic_who_ls():
        try:
            pickle.dump(user_ns[var],fout,1)
            saved_vars.append(var)
        except:
            # An object that cannot be pickled was encountered
            print("Unable to save object: %s" % var) 
```

我知道**IPython.ipapi**已移至**IPython.core.ipapi**，**expose_magic**已重命名为**define_magic**，而**magic_who_ls**已重命名为**who_ls**，但我无法从脚本中调用**who_ls**来获取命名空间变量的列表。谁能给我一个提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:14:38.450

```
import IPython
ip = IPython.core.ipapi.get()
for var in ip.run_line_magic('who_ls', ''):
  # potato 
```

# python - XAMPP + mod_wsgi + python Windows 7

> ID：15351869
> 
> 赞同：1
> 
> 时间：2013-03-12T01:44:12.413
> 
> 标签：python, django, apache, xampp, mod-wsgi

我正在尝试在本地测试服务器上安装 django [我知道 python+django 有一个]，并且我已经设置了 xampp 托管：

Apache 2.4、Python 2.7、mod_wsgi（从源代码编译：[https](https://code.google.com/p/modwsgi/wiki/InstallationOnWindows) ://code.google.com/p/modwsgi/wiki/InstallationOnWindows并使用 win32-ap22py27.mk，idk 如果我使用的 make 文件没问题，因为没有启动 apache 时出错，apache 说它加载了 wsgi 模块以及我的 python）

![xampp](../Images/28a85a08cdc01de165dbbefda2f2066b.png)

**wsgi.conf [包含在 httpd.conf 中]：**

```
WSGIScriptAlias /wsgi "C:/xampp/htdocs/wsgi/scripts/test.wsgi"
AddHandler wsgi-script .wsgi

<Directory "C:/xampp/htdocs/wsgi/scripts">
    Order deny,allow
    Allow from all
</Directory> 
```

**和一个通用的 test.wsgi 文件：**

```
def application(env, start_response):
    start_response("200 OK", [])
    output = "<html>Hello World! Request: %s</html>"
    output %= env['PATH_INFO']
    return [output] 
```

我的问题是我在测试 wsgi 应用程序时连接中断：`**http://localhost/wsgi**`

我搜索了互联网，但没有运气

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:08:36.667

好吧，make文件肯定有问题，所以如果有人感兴趣的话，这里的模块（书签这个东西）：

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi)

使用 apache2.4 和 python2.7 兼容的 mod_wsgi3.4 现在它可以工作了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T09:25:37.213

```
This topic is useful for Windows 10, xampp webserver as well.
I was struggling to find precompiled mod_wsgi.so for 
Apache/2.4.27 (Win32) 
Python/2.7.13 
This [link][1] is useful to find the appropriate version of mod_wsgi.
IF you are lucky, you can find the precompiled version [here][1]
There is a step by step guidance available [here][1]

    enter code here

  [1]: https://github.com/GrahamDumpleton/mod_wsgi/blob/develop/win32/README.rst
  [2]: http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi
  [3]: https://everything2.com/title/Installing+Python+on+XAMPP 
```

# android - 如何在运行 Android-4.2.1 的 Nexus10 中使用 systrace 分析磁盘 I/O

> ID：15351870
> 
> 赞同：1
> 
> 时间：2013-03-12T01:44:21.190
> 
> 标签：android, disk, systrace

我试图在我的桌面终端中发出以下命令行来分析来自 Nexus 10 的一些磁盘数据。

python systrace.py -d --time=10 -o mynewtrace.html

不幸的是，systrace 报告

错误：跟踪磁盘活动需要 root 权限 捕获跟踪时发生错误。未写入输出文件。

我的问题是：如何在 Nexus 10 等真正的 Android 设备中获得 root 访问权限。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T18:32:33.140

我认为您需要做的是在获取此跟踪之前以 root 模式运行 adb 守护程序。连接设备后，尝试在终端中执行此操作。

亚行根

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-22T17:41:50.203

您无权访问您选择的磁盘类别。

使用以下命令检查当前设备可以支持的所有类别。

```
$python systrace.py -l 

     gfx - Graphics
   input - Input
    view - View System
 webview - WebView
      wm - Window Manager
      am - Activity Manager
      sm - Sync Manager
   audio - Audio
   video - Video
  camera - Camera
     hal - Hardware Modules
     app - Application
     res - Resource Loading
  dalvik - Dalvik VM
      rs - RenderScript
  bionic - Bionic C Library
   power - Power Management 
```

在运行上述命令之前，root 并重新安装设备。

```
adb root
adb remount 
```

# c# - 从线程内更新 UI 上的标签

> ID：15351871
> 
> 赞同：2
> 
> 时间：2013-03-12T01:44:27.540
> 
> 标签：c#

从线程内更新 UI 的传统方法是什么？

例如，我在处理用户登录的类中有一个方法。在此方法中，我想在登录过程的各个阶段以 UI（主线程）上的标签形式向用户提供反馈。

```
public void userLogin(User _user)
{
    // 1\. Navigate to site.com
    // 2\. Update label on UI
    // 3\. Attempt login
    // 4\. Update label on UI
    // 5\. Check login status
    // 6\. Update label on UI
} 
```

我不想在方法中包含更新 UI 的代码，因为该类本身在其他项目中使用，并且由不同项目中的其他团队成员使用。在某些项目中，我可能决定将其保存到日志文件中进行调试，而不是更新 UI 上的标签。我不想创建任何形式的耦合。

最好的解决方案是什么？事件是要走的路吗？

顺便提一句。我正在使用 .NET 4.5 和 C# 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:06:19.587

我会说遵循[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)并使用事件将是您的最佳选择。这确实是它们的设计用途。

> 观察者模式是一种软件设计模式，其中称为主体的对象维护其依赖项列表（称为观察者），并自动通知他们任何状态更改，通常通过调用他们的方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:59:37.187

在 Windows 窗体中，您可以使用[BackgroundWorker](http://www.dotnetperls.com/backgroundworker)类。

# c# - 如何在 C# 中浏览对象层次结构

> ID：15351873
> 
> 赞同：0
> 
> 时间：2013-03-12T01:44:31.000
> 
> 标签：c#, .net

我最近去面试，他们问我以下问题：

编写一个组件以根据传入的数据路径遍历对象层次结构并返回实现以下方法的属性值：

公共对象 getValueFromPath(object parentObj, string dataPath);

对象层次结构将是这样的：

```
Object1
  objectRef2
    property1
    property2 
```

parentObj 将是 Object1

dataPath 将是 objectRef2.property2

有人可以给我一个想法，我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T01:53:51.603

您将需要使用反射。

第一步是拆分`dataPath`on ，并获取对表示 ( )类型的对象`.`的引用。 `System.Type``parentObj``parentObj.GetType()`

然后对于路径中的每个元素，您将使用类似对象`.GetMember(...)`的内容`Type`来查找具有该名称的成员，并`Type`相应地更新当前对象。

一旦你到达最后的属性，并且你有关联的`ProprtyInfo`对象，你就需要调用`.GetValue(...)`来获取属性的值。

# ios - UIView setNeedsDisplay 没有效果？

> ID：15351878
> 
> 赞同：1
> 
> 时间：2013-03-12T01:45:06.027
> 
> 标签：ios, uiview, drawing

我有一个 UIView 派生的视图，它只绘制**一次**并且*从不更新*。

调用`[self setNeedsDisplay]`没有效果。什么可能导致这种情况？

绘图代码是否在无关紧要

*   `drawRect:`， 或者
*   `drawLayer:inContext:` （定义了一个空的 drawRect() ）

如果 drawLayer:inContext 未定义，则调用 drawRect。但只有一次（在布局期间）。

```
- (void)drawLayer:(CALayer*)layer inContext:(CGContextRef)ctx {
  // drawing occurs, but just once (during view layout)
}

`- (void)drawRect:(CGRect) rect {
  // empty -- never called
} 
```

我尝试过的小清单：

*   [自行设置NeedsDisplay]
*   [self.layer setNeedsDisplay]
*   [self.mySubLayer setNeedsDisplay]
*   self.contentMode = UIViewContentModeRedraw;
*   手动创建视图，而不是从 .nib 加载它（无效）
*   删除图层（和子图层）的使用并仅使用 drawRect（无效果）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:12:04.917

所以这可以标记为已回答：一定要在主线程上调用 UIKit 方法。

# android - 自定义默认的 android 布局

> ID：15351879
> 
> 赞同：0
> 
> 时间：2013-03-12T01:45:11.520
> 
> 标签：android, android-layout

有没有办法自定义android为电话提供的默认布局？也就是说，我可以在结束通话按钮上方添加一个按钮吗？

像下面的图片

![在此处输入图像描述](../Images/e9b66024fc200570374de41817fe5d6c.png)

还是我必须创建自己的电话界面，拦截电话并自己处理电话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:59:39.767

尝试联系这个人[http://forum.xda-developers.com/showthread.php?t=1575395](http://forum.xda-developers.com/showthread.php?t=1575395)他应该有你正在寻找的答案。

# android - 自定义 View 的 Android Thread 实现

> ID：15351882
> 
> 赞同：0
> 
> 时间：2013-03-12T01:45:33.463
> 
> 标签：android, multithreading, graphics, custom-view

我正在尝试为 android 制作 TicTacToe 游戏。但我有以下问题。首先，我想为我的应用程序***实现线程***，但我没有成功（几乎尝试过任何东西）。其次，我想知道如何处理这两个错误（我不知道它们是否被称为错误）：将***堆（碎片情况）增加到 65.24 MB 以进行 2567824 字节分配*** ，***跳过 118 帧！该应用程序可能在其主线程上做了太多工作***（尽管我认为这可以通过线程实现来解决）

```
public class DrawClass extends View {

int index;
int x, y, RectX, RectY;
// it will hold the rectangles dimensions depending on the screen dimensions
public Rect[] rectangles = new Rect[9];
// it will be our reference array as to what does each rectangle hold
char[] isFilledWith = { ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ' };
// bitmaps
Bitmap empty, cross, circle;

// constructor
public DrawClass(Context context) {

    super(context);
    // setting bitmaps and calculating screen dimensions
    setBitmaps();
    Calculations(context);

}

public void setBitmaps() {// set the 3 bitmaps empty , circle , cross
    cross = BitmapFactory.decodeResource(getResources(), R.drawable.cross1);
    circle = BitmapFactory.decodeResource(getResources(),
            R.drawable.circle1);
    empty = BitmapFactory.decodeResource(getResources(), R.drawable.empty1);
}

@Override
public void onDraw(Canvas canvas) {

    super.onDraw(canvas);

    Paint paint = new Paint();
    // this for updates the canvas with the appropriate bitmaps cross , circle or empty 
    // depending on tyhe char array isFilledWith
    for (int i = 0; i < 9; i++) {
        if (isFilledWith[i] == ' ') {
            canvas.drawBitmap(empty, null, rectangles[i], null);
        } else if (isFilledWith[i] == 'X') {
            canvas.drawBitmap(cross, null, rectangles[i], null);
        } else if (isFilledWith[i] == 'O') {
            canvas.drawBitmap(circle, null, rectangles[i], null);
        }
        paint.setColor(Color.WHITE);
        canvas.drawLine(x, 0, x, 3 * y, paint);// 1h
        canvas.drawLine(2 * x, 0, 2 * x, 3 * y, paint);// 2h
        canvas.drawLine(0, y, 3 * x, y, paint);// 3h
        canvas.drawLine(0, 2 * y, 3 * x, 2 * y, paint);// 4h
    }
}

protected void Calculations(Context context) {
    /*
     * We calculate screen dimensions and fill the rectangles array with the
     * appropriate dimensions
     */
    DisplayMetrics metrics = context.getResources().getDisplayMetrics();
    int width = metrics.widthPixels;
    int height = metrics.heightPixels;

    x = (width / 3);
    y = (height / 3);

    int rectanglescounter = 0;
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            rectangles[rectanglescounter] = new Rect((x * j), (y * i),
                    ((x * j) + x), ((y * i) + y));
            if (rectanglescounter < 8)
                rectanglescounter++;
            else
                break;
        }
    }
    Log.d("Checks", "rectangles calculated");
}
// setter for the array 
public void setArray(int index, char character) {
    this.isFilledWith[index] = character;
}
// getter for the array
public char getArray(int index) {
    return isFilledWith[index];
}
// This method searches for tictactoe winning patterns .
public char checkForWinner() {
    if (isFilledWith[0] == isFilledWith[1]
            && isFilledWith[1] == isFilledWith[2]) {// 1st horizontal

        if (isFilledWith[0] == 'X') {
            Log.d("WINNING CHECK", "1st row win detected");
            return 'X';
        }
        if (isFilledWith[0] == 'O') {
            Log.d("WINNING CHECK", "1st row win detected");
            return 'O';
        }
    } else if (isFilledWith[3] == isFilledWith[4]
            && isFilledWith[4] == isFilledWith[5]) {// 2nd horizontal

        if (isFilledWith[3] == 'X') {
            ;
            Log.d("WINNING CHECK", "2st row win detected");
            return 'X';
        }
        if (isFilledWith[3] == 'O') {
            Log.d("WINNING CHECK", "2st row win detected");
            return 'O';
        }
    } else if (isFilledWith[6] == isFilledWith[7]
            && isFilledWith[7] == isFilledWith[8]) {// 3rd horizontal

        if (isFilledWith[6] == 'X') {
            Log.d("WINNING CHECK", "3st row win detected");
            return 'X';
        }
        if (isFilledWith[6] == 'O') {
            Log.d("WINNING CHECK", "3st row win detected");
            return 'O';
        }
    } else if (isFilledWith[0] == isFilledWith[3]
            && isFilledWith[3] == isFilledWith[6]) {// 1st vertical

        if (isFilledWith[0] == 'X') {
            Log.d("WINNING CHECK", "1st column win detected");
            return 'X';
        }
        if (isFilledWith[0] == 'O') {
            Log.d("WINNING CHECK", "1st column win detected");
            return 'O';
        }
    } else if (isFilledWith[1] == isFilledWith[4]
            && isFilledWith[4] == isFilledWith[7]) {// 2st vertical

        if (isFilledWith[1] == 'X') {

            Log.d("WINNING CHECK", "2st column win detected");
            return 'X';
        }
        if (isFilledWith[1] == 'O') {
            Log.d("WINNING CHECK", "2st column win detected");
            return 'O';
        }
    } else if (isFilledWith[2] == isFilledWith[5]
            && isFilledWith[5] == isFilledWith[8]) {// 3rd vertical

        if (isFilledWith[2] == 'X') {
            Log.d("WINNING CHECK", "3st column win detected");
            return 'X';
        }
        if (isFilledWith[2] == 'O') {
            Log.d("WINNING CHECK", "3st column win detected");
            return 'O';
        }
    } else if (isFilledWith[0] == isFilledWith[4]
            && isFilledWith[4] == isFilledWith[8]) {// diagonal
        if (isFilledWith[0] == 'X') {
            Log.d("WINNING CHECK", "1st diagonal win detected");
            return 'X';
        }
        if (isFilledWith[0] == 'O') {
            Log.d("WINNING CHECK", "1st diagonal win detected");
            return 'O';
        }
    } else if ((isFilledWith[2] == isFilledWith[4] && isFilledWith[4] == isFilledWith[6])) {// diagonal

        if (isFilledWith[2] == 'X') {
            Log.d("WINNING CHECK", "2nd diagonal win detected");
            return 'X';
        }
        if (isFilledWith[2] == 'O') {
            Log.d("WINNING CHECK", "2nd diagonal win detected");
            return 'O';
        }
    } else
        return ' ';
    return ' ';
} 
```

}

```
public class NewGame extends Activity implements OnTouchListener {

DrawClass drawing;
int movecounter = 0;
int playercounter = 0;
static {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);
}

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    drawing = new DrawClass(this);
    //setting on touch events to correspond to this class ontouchlistener
    drawing.setOnTouchListener(this);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
    setContentView(drawing);

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    int tempx = (int) event.getX();
    int tempy = (int) event.getY();

    // calculating where the user touched the screen so as to fill the char
    // array with the appropriate char 'x'or 'o' and then invalidate the
    // drawing
    for (int i = 0; i < 9; i++) {
        if (drawing.rectangles[i].contains(tempx, tempy)) {
            if (drawing.getArray(i) == ' ') {
                if (playercounter % 2 == 0)
                    drawing.setArray(i, 'X');
                else
                    drawing.setArray(i, 'O');
                playercounter++;
            } else if (drawing.getArray(i) != ' ')
                Toast.makeText(getApplicationContext(), "DONT CHEAT",
                        Toast.LENGTH_SHORT).show();

            // CHECKINK FOR WINNER or DRAW

            movecounter++;
            if (movecounter >= 5) {
                if (drawing.checkForWinner() == 'X') {
                    Toast.makeText(getApplicationContext(), "X WIN",
                            Toast.LENGTH_SHORT).show();
                    finish();
                }
                if (drawing.checkForWinner() == 'O') {
                    Toast.makeText(getApplicationContext(), "O WIN",
                            Toast.LENGTH_SHORT).show();
                    finish();
                }
                if (movecounter >= 9) {
                    Log.d("Entered Draw ", " ok ");
                    Toast.makeText(getApplicationContext(),
                            "IT'S A DRAW  ", Toast.LENGTH_SHORT).show();
                    finish();
                }
            }
            drawing.invalidate();
        } else
            continue;
    }
    return false;
} 
```

}

先感谢您 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:55:38.337

`Skipped 118 frames ! The applcation may be doing too much work on its main thread`你在 UI 线程上做了很多工作。创建线程或使用 asynctask 来完成繁重的工作将解决此错误。看看这个[http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)，它解释得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:19:43.717

为了帮助您解决线程和异步任务的难题，您必须更加具体，但要找到性能问题所在，您可以使用 Android 的[分析工具](http://developer.android.com/tools/debugging/debugging-tracing.html)。

# php - PHP 中的 Salt / Hash 与数据库中的对比

> ID：15351883
> 
> 赞同：0
> 
> 时间：2013-03-12T01:45:59.623
> 
> 标签：php, mysql, sql-server, security

在 PHP 和数据库中，密码哈希和盐的出现位置是否有优势？似乎让该过程发生在数据库内部将是最佳解决方案；因为网络服务器和数据库只需要交换密码而不是盐。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T01:53:21.017

将盐存储在数据库中是可以的。这样做是有好处的，因为您想为每个用户使用*不同*的随机盐。

我建议在应用程序中进行散列。

原因是，如果您在 SQL 表达式中进行散列处理，并且在数据库服务器上使用查询日志记录，您可能会将用户密码的纯文本样本存储在查询日志中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:01:08.017

如果您使用的东西比简单的哈希+盐更好，例如[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)，那么此时您将不得不[涉及 PHP](http://php.net/manual/en/function.hash-pbkdf2.php) AFAIK。因此，就最佳位置而言，对我而言，最佳位置在代码中，因为您可以在此处执行“最佳”密码散列方法。

# node.js - Node.js Nodemailer 和 SES - 错误：未定义传输方法

> ID：15351886
> 
> 赞同：2
> 
> 时间：2013-03-12T01:46:21.500
> 
> 标签：node.js, amazon-web-services, amazon-ses, nodemailer

我正在使用 nodemailer 发送带有 SES 的电子邮件。我是这样设置的：

```
require("nodemailer").createTransport("SES", {
    AWSAccessKeyID: "AKIAJZFUSYQJNEX3VS2A",
    AWSSecretKey: "XXX", //real information removed
    SeviceUrl:"https://email.us-west-1.amazonaws.com"
}), 
```

当我发送电子邮件时，我得到：

> 错误：未定义传输方法

关于为什么会发生这种情况的任何想法？

*编辑：*尝试了两种解决方案，但它们都不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:57:05.343

你必须使用你的传输来发送邮件。只需尝试如下，

```
var nodemailer = require("nodemailer");
var transport = nodemailer.createTransport("SES", {
    AWSAccessKeyID: "AKIAJZFUSYQJNEX3VS2A",
    AWSSecretKey: "XXX",
    SeviceUrl:"https://email.us-west-1.amazonaws.com"
}),

//On sending mail
nodemailer.sendMail({
        transport : transport, //pass your transport
        sender : 'senderid@email.com' ,
        to : 'receiverid@email.com',
        subject : "SUBJECT",
        html: '<p> Hello World </p>'
      }) 
```

注意：在这里我假设您的传输是有效的，并且您的密钥具有足够的权限（网络权限也是如此。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T00:17:20.450

你`ServiceUrl`的配置不正确。Amazon SES 目前仅[在 us-east-1](http://docs.aws.amazon.com/ses/latest/APIReference/Welcome.html)中可用。请设置`ServiceUrl`为`https://email.us-east-1.amazonaws.com`.

此外，为了将来参考，请不要分享您的 AWS 密钥。我强烈建议您轮换您的 AWS 密钥，因为它们已在您的问题前面发布。

# algorithm - 有效地查找未排序列表前缀的顺序统计信息？

> ID：15351887
> 
> 赞同：13
> 
> 时间：2013-03-12T01:46:39.267
> 
> 标签：algorithm, data-structures, language-agnostic

`A``1`是从到`n`随机顺序的整数数组。

我需要至少在日志时间内随机访问`i`第一个元素的第 th 大元素。`j`

到目前为止，我想出的是一个`n x n`矩阵，其中位置`M`中的元素是第一个中最大的。这给了我恒定时间的随机访问，但需要存储。`(i, j)``i``j``n^2`

按构造，`M`按行和列排序。此外，每一列与其相邻列的差异只有一个值。

任何人都可以建议一种方法来压缩`M`到`n log(n)`空间或更好，具有`log(n)`或更好的随机访问时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T05:52:06.623

我相信你可以在 O(log(N)) 时间内执行访问，给定 O(N log(N)) 预处理时间和 O(N log(N)) 额外空间。就是这样。

您可以扩充红黑树以支持在 O(log(N)) 时间内`select(i)`检索排名中的元素的操作。`i`例如，[请参阅此 PDF或](http://www.bowdoin.edu/~ltoma/teaching/cs231/fall07/Lectures/augtrees.pdf)*算法简介*的相应章节。

您可以以一种功能性的方式实现一棵红黑树（甚至是扩展为 support`select(i)`的），这样插入操作会返回一棵新树，该树与旧树共享除 O(log(N)) 之外的所有节点。例如，参见Chris Okasaki 的[*Purely Functional Data Structures*](https://rads.stackoverflow.com/amzn/click/com/0521663504)。

`T`我们将构建一个纯功能增强的红黑树数组，以便树`T[j]`存储从大到小排序`0 ... j-1`的第一个`j`元素的索引。`A`

基本情况：在`T[0]`创建一个只有一个节点的增强红黑树，其数据是数字 0，它是数组的前 1 个元素中第 0 个最大元素的索引`A`。

归纳步骤：对于`j`从 1 到的每一个`N-1`，在`T[j]`通过纯粹功能性地将具有索引的新节点插入树中来创建一个增强的红黑`j`树`T[j-1]`。这最多创建 O(log(j)) 个新节点；其余节点与 共享`T[j-1]`。这需要 O(log(j)) 时间。

构建数组的总时间`T`是 O(N log(N))，使用的总空间也是 O(N log(N))。

`T[j-1]`创建后，您可以通过执行访问第一个元素`i`中的第 th 大元素。这需要 O(log(j)) 时间。请注意，您可以在第一次需要时延迟创建。如果很大，总是比较小，这样会节省很多时间和空间。`j``A``T[j-1].select(i)``T[j-1]``A``j`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T05:50:18.597

除非我误解，否则您只是在找到一个数组的[k 阶统计量](http://en.wikipedia.org/wiki/Order_statistic)，它是另一个数组的前缀。

这可以使用我认为称为“快速选择”的算法或类似的算法来完成。基本上，它就像快速排序：

1.  采取随机枢轴
2.  交换数组元素，使所有较小的元素都在一侧
3.  您知道这是第 p+1 个最大元素，其中 p 是较小数组元素的数量
4.  如果 p+1 = k，这就是解决方案！如果 p+1 > k，在“较小的”子数组上重复。如果 p+1 < k，在更大的“子数组”上重复。

在 Quickselect 和 Quicker Select 标题下有一个（很多）更好的描述[，](http://www.ics.uci.edu/~eppstein/161/960125.html)如果您搜索 k 阶快速排序解决方案，通常也只是在 Internet 上。

尽管该算法的最坏情况时间是 O(n2)，如快速排序，但如果您正确选择随机枢轴，其预期情况会好得多（也类似于快速排序）。我认为空间复杂度只是 O(n); 你可以只复制一份你的前缀来弄乱订购。

# java - 管理页面控制

> ID：15351893
> 
> 赞同：0
> 
> 时间：2013-03-12T01:47:33.200
> 
> 标签：java, jsp, servlets

我是 java 新手，使用 jsps 和 servlet 以及 Netbeans IDE 作为我的应用程序的管理界面。管理员有登录页面，当他提供正确的 ID 和密码时，它会移动到下一页，其中有一个注销链接，当管理员单击该链接时，他会返回登录页面。现在的问题是通过单击浏览器的后退按钮，他会回到他退出的页面。当然，他不应该在不提供 ID 和密码的情况下移动。我正在使用会话，但不知道它究竟是如何工作的。我该如何控制这个问题。谢谢

login.jsp 的代码

```
<html>
<head>
   <title> login page </title>     
</head>
<body>
<center>    

   <form  action="Admin_Validation">

      <p>
      Admin ID: <input  type="text" name="AdminID"/>
      </p>
      <p>
      Password: <input type="password" name="Password"/>
      </P>

      <input  type="submit" value="Login" />

   </form>

  </center>
 </body>
</html> 
```

# bash - “逃离”噩梦

> ID：15351898
> 
> 赞同：1
> 
> 时间：2013-03-12T01:47:39.227
> 
> 标签：bash, escaping, special-characters, expect

我一直在尝试将以下内容放入 bash 脚本中：

```
scp /cygdrive/c/Program\ Files\ \(x86\)/Spiceworks/data/configurations/LA_$(date +%F)-firewall-5520 "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_Automation/SBOX_Dumps/08\ -\ Security/Firewalls" 
```

...通过命令行按预期工作。

当我尝试将它放在脚本中时，我显然将不得不双重转义空格，还有什么？我尝试过的多种变体都无法成功。

我会认为：

```
scp /cygdrive/c/Program\\ Files\\ \(x86\)/Spiceworks/data/configurations/LA_\$(date\ +%F)-firewall-5520 "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_Automation/SBOX_Dumps/08\\ \\-\\ Security/Firewalls" 
```

......会工作，但它没有。有什么建议，在我变灰秃之前？谢谢

我不会用我尝试过的所有变体来浪费空间，但我会说我已经尝试过逃避几乎所有的东西，基本上什么都没有，中间还有很多都没有成功。当我收到“没有这样的文件或目录”时，我显然会逃避，直到文件实际解析，但即使我没有收到路径错误，命令也没有成功完成。

我确实理解这是一个非常具体的案例，但我想它会在未来对其他人有所帮助：在 bash 脚本中转义空格，使用嵌入式`expect`（我已经使用`#!/bin/bash`shebang 和嵌入式进行了测试，`expect using expect -c ' .... '`以及`#!/usr/bin/expect`使用没有的简单`spawn scp`命令改变。

编辑（基于回复）：

我应该提到我已经尝试引用它......

引用第一（主机）部分给了我错误

> 无法读取“（日期+％F）”：执行时没有这样的变量

```
"spawn scp "/cygdrive/c/Program Files (x86)/Spiceworks/data/configurations/LA_$(date +%F)-firewall-5520" "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_..." 
```

...它不是一个变量，它是一个函数，它以格式为我提供当前日期`year-month-day`

引用目标部分而不转义任何内容会给我错误

```
scp: ambiguous target 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:03:49.347

在 bash shell 上运行的相同命令在 bash 脚本中也应该同样运行。你不应该也不能逃避它两次。

如果它不起作用，请确保您从同一个终端测试脚本，确保脚本内容和您的命令相同，然后在您执行此操作时粘贴终端的输出：

```
$ scp /cygdrive/c/Program\ Files\ \(x86\)/Spiceworks/data/configurations/LA_$(date +%F)-firewall-5520 "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_Automation/SBOX_Dumps/08\ -\ Security/Firewalls"
(successful scp output here)
$ cat testscript
(testscript contents here, should be identical to above scp command)
$ bash testscript
(unsuccessful script/scp output here) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T02:09:29.263

正如@that_other_guy 所说，只需将其放在引号中并停止打击自己，您不能也不应该尝试两次逃避，无论您有什么想法，都将其视为信息来源。（我猜它来自*“稀薄的空气”*）

```
scp "/cygdrive/c/Program Files (x86)/Spiceworks/data/configurations/LA_$(date +%F)-firewall-5520" "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_Automation/SBOX_Dumps/08 - Security/Firewalls" 
```

你甚至可以给自己一些帮手：

```
export PROGFILESx86="/cygdrive/c/Program Files (x86)"
export SPICEWORKS_CONFIGS="${PROGFILESx86}/Spiceworks/data/configurations" 
```

（将它们添加到`.bashrc`，执行它。）然后执行：

```
scp "${SPICEWORKS_CONFIGS}/LA_$(date +%F)-firewall-5520" "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_Automation/SBOX_Dumps/08 - Security/Firewalls" 
```

我还担心您尝试`scp`实际存在的文件，将其包装在一个条件下以验证它们是否存在，只有在您自动生成文件名时才有意义。

```
firewall_config="${SPICEWORKS_CONFIGS}/LA_$(date +%F)-firewall-5520"

if [ -e "${firewall_config}" ]
    then
        scp "${firewall_config}" "sf-mlawler@10.21.1.212:/home/sf-mlawler/SBOX_Automation/SBOX_Dumps/08 - Security/Firewalls"
    else         
        echo "File doesn't exist: ${firewall_config}"
fi 
```

# 更新：

既然你已经更新了你的问题，那么显然是这个`date`电话给你带来了最大的问题，再次，间接节省你做奇怪的 escape-char-yoga，只需将结果放入一个 var 并使用它。

```
fw_date=$(date +%F)
firewall_config="${SPICEWORKS_CONFIGS}/LA_${fw_date}-firewall-5520" 
```

# java - Dart 可以运行 jar 存档吗？

> ID：15351901
> 
> 赞同：0
> 
> 时间：2013-03-12T01:47:48.987
> 
> 标签：java, jar, dart

我需要从 Dart 运行 stanford-parser.jar 并使用它的方法来 POS 标记用户输入。这在 Dart 上可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:07:42.283

不，Dart 不是 Java。这里有一个 Java 到 Dart 源代码的转换实验：[https://code.google.com/p/dart/source/browse/#svn%2Ftrunk%2Fdart%2Feditor%2Futil%2Fplugins%2Fcom.google.dart。 java2dart](https://code.google.com/p/dart/source/browse/#svn%2Ftrunk%2Fdart%2Feditor%2Futil%2Fplugins%2Fcom.google.dart.java2dart)

# jquery - 阻止数量微调器变为负数

> ID：15351910
> 
> 赞同：0
> 
> 时间：2013-03-12T01:49:02.730
> 
> 标签：jquery, spinner

我的微调器有问题。如果数量为0，我想停止减少功能的工作。这是代码：

```
$(document).ready( function() {
      var elm = $('#htop');
              function spin( vl ) {
                elm.val( parseInt( elm.val(), 10 ) + vl );
              }

              $('#increase').click( function() { spin( 1 );  } );
              $('#decrease').click( function() { spin( -1 ); } );
    }); 
```

我猜我需要对

```
$('#decrease').click( function() { spin( -1 ); } ); 
```

或者我应该尝试包装一个 if 语句

```
function spin( vl ) {
                elm.val( parseInt( elm.val(), 10 ) + vl );
              } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:52:13.927

`stop the decrease function from working if the quantity is 0`

只需将其转换为代码即可：

```
function spin( vl ) {
    if(elm.val() > 0) { //as long as the spinner is above 0
        elm.val( parseInt( elm.val(), 10 ) + vl );
    }
} 
```

# ruby-on-rails - Rails - 在控制器中存储 cookie 并从 Javascript、Jquery 获取

> ID：15351911
> 
> 赞同：4
> 
> 时间：2013-03-12T01:49:09.763
> 
> 标签：ruby-on-rails, cookies, session-cookies

是否可以将用户的 Cookie 或 Session 存储在 Controller 中并通过从 JS 或 Jquery 访问它来获取 cookie？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T03:39:32.783

**会话**值在服务器上可用。

您可以[在控制器中](http://apidock.com/rails/ActionController/Base)像这样设置它们：

```
session[:user_name] = @user.name 
```

如果您想稍后在 javascript 中访问该值，您可能希望在视图中执行以下操作：

```
<%= javascript_tag do %>
  var userName = '<%= session[:user_name %>';
<% end %> 
```

* * *

**Cookie**由浏览器管理，因此访问方式不同。

在您的控制器中设置一个：

```
cookies[:user_name] = @user.name 
```

[（您还可以使用 options](http://api.rubyonrails.org/classes/ActionDispatch/Cookies.html)为 cookie 指定路径、过期等。）

然后可以使用 jQuery 访问它：

```
var userName = jQuery.cookie("user_name"); 
```

注意：您也可以通过解析[使用纯 javascript（不是 jQuery）访问 cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)`document.cookie`，但让 jQuery 为您做这件事**要**容易得多（如果您已经在使用该库）。

# c++ - c++ 中的 int i=0、int i(0)、int *p=new int、int *p=new int(0) 有什么区别

> ID：15351913
> 
> 赞同：1
> 
> 时间：2013-03-12T01:49:30.897
> 
> 标签：c++

有什么区别

```
int i=0; 
```

和

```
int i(0);

int *p=new int; 
```

和

```
int *p=new int(0); 
```

还是`int *p=new int`复制初始样式？

什么时候`int i=0;`不用`new int(0)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:04:17.453

我要先回答一个稍微不同的问题。

假设您有一个`class`或`struct`（它们几乎相同），如下所示：

```
struct Foo {
  int value; // Foo stores an int, called value
  Foo(int v):value(v) {}; // Foo can be constructed (created) from an int
  explicit Foo(double d):value(d) {}; // Foo can be constructed (created) from a double
  // ^^^ note that keyword.  It says that it can only be EXPLICITLY created from a double
}; 
```

现在，这很像`int`，但有一些区别。

```
Foo i = 0; 
```

上面创建了一个`int`文字，然后使用构造函数`Foo i`对其进行`Foo(int v)`构造。

```
Foo i(0); 
```

上面创建了一个`int`文字，然后使用构造函数`Foo i`对其进行`Foo(int v)`构造。请注意，我只是重复了自己。

```
Foo i = Foo(0); 
```

上面创建了一个`int`文字，然后使用构造函数`Foo i`对其进行构造，然后从中`Foo(int v)`复制构造。`Foo i`但是，该标准允许编译器“省略”（跳过）复制构造函数，而是`Foo i`直接从`int`文字构造`0`。

```
Foo* i = new Foo; 
```

这进入空闲存储区（通常实现并称为堆），获得足够的内存来存储 a `Foo`，然后默认构造它。然后它返回这个`Foo`对象的地址，然后用它来初始化指针`Foo* i`。现在，请注意*未初始化*`Foo`的默认构造函数。这是我在上面的实现中的一个缺陷（在我看来），除非在特殊情况下，你很少想要这样做。`value` *`Foo`*

 *令人讨厌的是，整数（`char`、`int`、`long`、`unsigned char`等）、浮点（`double`或`float`）字面量和指针字面量都共享这个属性——默认情况下，它们不会初始化为任何值。

所以你应该确保它们被显式初始化。在 的情况下`Foo`，添加一行：

```
Foo():value() {} 
```

就够了。

```
Foo* i = new Foo(0); 
```

这进入自由存储区（通常实现并称为堆），获得足够的内存来存储 a `Foo`，然后用整数文字 0 构造它。然后它返回该`Foo`对象的地址，然后用于初始化指针`Foo* i`.

现在，一旦您要求，免费存储中的内存通常会保留供您使用，直到您有时间归还它，或者您的程序关闭。为了返回它，你调用`delete`了同一个指针，这两种情况下对象（`Foo`在这种情况下）都调用了它的析构函数（`Foo`没有析构函数，所以这个被跳过），然后内存被交还给空闲存储供以后调用`new`.

跟踪这一点真的很痛苦，而且是一大堆错误的根源，所以你应该避免调用`new`. 有很多方法可以避免调用`new`，包括使用`std::vector`来管理内存块，或者在堆上使用`shared_ptr`和`make_shared`创建对象，这些对象通过一种称为 RAII 的技术来管理它们自己的生命周期，或者`unique_ptr`在您想要密切控制指针的生命周期时使用（可悲的是，`make_unique`不存在）。

现在让我们更进一步。

```
Foo i = 0.0; 
```

这*无法编译*。我说for的构造函数`Foo(double)`是显式的，上面只选择调用非显式的构造函数。另一方面：

```
Foo i(0.0);
Foo i = Foo(0.0); 
```

这些都愿意调用显式构造函数，并且工作正常。

接下来，C++11 为我们带来了统一初始化。与其把你想用 in 初始化的东西放进去，不如`()`把它放进去`{}`——一个波浪形的大括号。

```
Foo i{0.0};
Foo i = {0}; 
```

etc. 与基于语法的语法`{}`相比有一些不同`()`——最重要的是它避免了[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)问题。其他差异包括初始化列表行为，处理显式构造一些东西（`int x()`不构造`int`命名`x`，但`int x{}`确实如此）。

说到这，是时候回到你的实际问题了。

`int`在某些方面与我`struct Foo`的不同。

首先，它不是 a`class`或 a `struct`。因此，它的行为不是由您编写的某些代码决定的，而是由标准广泛描述的。碰巧的是，C++ 试图让基本类型 like`int`的行为很像简单的用户定义类型 like `Foo`，这很有用。

因此，虽然没有调用“复制构造函数”，并且`int`根本没有构造函数或析构函数，但`int`几乎完全“好像”在这些构造函数的位置。

```
int i = 0; 
```

创建整数文字 0，然后`int i`用它初始化。编译器可能会忽略这一点，直接创建`int i`值为 0 的整数。对于`int`，没有办法直接观察到差异。

```
int i(0); 
```

与 相同`int i = 0`，因为`int`没有非显式构造函数。这只是一种不同的语法。

现在，出现了最令人头疼的解析问题。如果你输入

```
int i = int(); 
```

你会得到相同的`int i = 0`，但如果你输入

```
int i(); 
```

会发生什么，编译器会说“这可能是一个名为 i 的函数，它接受零参数并返回`int`”，并且由于各种烦人的原因，更喜欢这种解释而不是默认初始化的`int`. 所以你得到一个名为`i`而不是整数的前向声明函数。

如前所述，避免这种情况的方法是始终使用以下语法：

```
int i{}; 
```

在 C++11 编译器中。

接下来，我们有

```
int* p = new int; 
```

它在自由存储上创建一个默认构造（未初始化）`int`，并将指向它的指针分配给变量`int *p`. 已发生副本，但它是指针的副本，而不是`int`.

```
int *p=new int(0); 
```

大致相同，但`int`创建的免费存储的值为 0 而不是未初始化。

在这两种情况下，您有责任对`delete`返回的值调用一次且仅一次`new`。不这样做被称为内存泄漏。这样做后使用指针值会导致未定义的行为，通常是内存损坏。程序几乎肯定不会警告您所做的事情是危险的，但是您的程序现在可以做完全随机的事情，这些事情毫无意义，仍然是一个有效的 C++ 程序。`new`将每个都与一个 精确对齐`delete`，并确保没有人在 之后使用指针`delete`，并尽可能早地调用`delete`，这是一个令人讨厌的程序，以至于已经开发了整个类别的编程语言，其主要卖点是它们使开发人员不必处理用它。

所以避免调用`new`.

哦，因为这还不够长，请注意我使用上面的“最令人烦恼的解析”并不完全正确。“最令人头疼的解析”实际上是：

```
int x(int()); 
```

而不是

```
int x(); 
```

因为第一个可以是构造函数调用或函数，而第二个不能是构造函数调用，因为标准不允许这样做。

但是，我和其他大多数人都发现了 make 的解析规则`int x();`，因此将其称为倒数第二个 vexing 解析，您不会错太多。它仍然没有做你天真地认为它应该做的事情（创建一个默认的构造函数`x`），所以它很烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:58:48.640

在 C 和早期 C++ 中，您只能使用 int i=0;

该`int i(0);`模式与通用类型的构造函数相同

```
T i(0); 
```

因此，它被添加为`int i=0;`看起来不像一般构造函数模式的替代方案。这在使用模板时很有用。所以模板可以使用 int 和 classes。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T02:05:09.963

```
int i=0; 
int i(0); 
```

它们是相同的，具有两种不同的初始化语法（第一种是 C 语言，第二种是构造函数风格）；原则上，它们在处理类时略有不同（第一个暗示 - 可能省略 - 对复制构造函数的调用，第二个没有），但对于`int`s 它们实际上是相同的。

```
int *p=new int; 
int *p=new int(0); 
```

在第一个中，`int`未初始化（它将具有恰好在该内存位置的任何值）；在第二种情况下，`int`初始化为 0。

但最重要的是，与第一个相比，这是两个完全不同的野兽。您不是在声明 type 的自动变量`int`，而是指向的*指针*`int`，它指向两个*动态分配* `int`的 s。

区别很深：`int i=0`内存是自动管理的（它具有*自动存储持续时间*），并且变量在超出范围时被销毁；与`new`您从 freestore（所谓的堆）分配内存，它没有自动释放方法 - 您必须显式释放它（`delete`尽管在现代 C++ 中，智能指针通常用于自动管理动态的生命周期对象）。

`new`通常仅用于自动存储持续时间不是一个好选择的情况（例如，您希望那些`int`s 超过当前范围，或者在多个对象之间共享或其他），或者当您分配的东西太大而无法留在一个局部变量中（在典型的实现中，局部变量在堆栈上，它的大小是有限的；仍然，对于两个`int`s 这不是一个有效的问题）。

对于“常规”，`int`必须在当前范围内“消亡”的局部变量`new`通常不是一个好主意。

不过，有关动态分配的更多信息，您应该查看您的 C++ 书籍。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T01:54:22.360

`new`意味着堆内存分配（可能会泄漏），所以不，您不想一直这样做。

`int i=0;`和`int i(0);`是等价的，但是根据实现的不同，第一个可以使用赋值运算符，而第二个可以用一个值构造。这可以让编译器针对目标架构进行优化。在类的情况下，赋值方法可能会更慢，因为它会创建一个类（通常使用默认值），然后它会进行赋值并清除它刚刚花时间分配的所有默认值。

有人可能会插话并参考语言规范以获得更准确的答案。*

# javascript - 同步 JavaScript

> ID：15351918
> 
> 赞同：2
> 
> 时间：2013-03-12T01:49:42.597
> 
> 标签：javascript, asynchronous

XCode 内置了 webkit，XCode 可以发出 JavaScript 命令并接收返回值。一切都很好——除非 JavaScript 有一个回调函数，比如 executeSql。

如何编写一个在调用回调之前不返回的函数？

你可能把它包装在另一个函数中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T02:05:05.660

有两种解决方案 - 您可以以延续传递风格编写整个程序，也可以使用蹦床来模拟真实延续。

如果您想使用延续传递风格，那么我建议您首先阅读以下 StackOverflow 线程：[延续和回调之间有什么区别？](https://stackoverflow.com/q/14019341/783743)

连续传递风格可能很难写。幸运的是，有 JavaScript 预处理器，如 jwacs（具有高级延续支持的 JavaScript），可以轻松编写此类代码：[http ://chumsley.org/jwacs/](http://chumsley.org/jwacs/)

第二个选项（使用蹦床）目前仅适用于 Firefox 和 Rhino。对不起 XCode。您可以在此处阅读有关蹦床[的更多信息：Javascript 中的蹦床和减少嵌套回调的探索](http://tobyho.com/2010/12/10/trampolines-in-javascript-and/ "Javascript 中的 Trampolines 和对更少嵌套回调的探索")

如果您感兴趣，那么我为 JavaScript 编写了一个小型光纤管理器，它允许您同步调用异步函数：[https ://github.com/aaditmshah/fiber](https://github.com/aaditmshah/fiber)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:07:29.310

我可以建议定期检查吗？

```
var executeSqlIsDone = false;
executeSql({
        callback: someCallbackFunction();
     });
waitUntilCallbackIsFinished();
//continue processing

function someCallbackFunction()
{
    executeSqlIsDone = true;
}

function waitUntilCallbackIsFinished()
{
     if(executeSqlIsDone === false)
     {
          setTimeout(waitUntilCallbackIsFinished, 100); //some low value
     }
     //else - do nothing. Wait.
} 
```

也看看

# php - 如何使用 preg_replace 函数替换 '$uid=*any digit*'？

> ID：15351923
> 
> 赞同：0
> 
> 时间：2013-03-12T01:50:29.013
> 
> 标签：php

基本上，我需要替换 php 文件中的文本，以便稍微更改 mysqli 查询。

我正在使用这个功能：

```
file_put_contents($file,preg_replace('/^($uid=)[\d]/', '$uid=' . $uid, file_get_contents($file))); 
```

取代

```
$uid=*any digit* 
```

在 $file 所代表的 php 文件中。

当我匹配基本模式时它工作得很好，但是

```
'/^($uid=)[\d]/' 
```

由于某种原因不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:00:25.433

保护`$`，因为`\$`数字是单独的？或许`\d+`

简单示例：

```
<?php
$string="\$uid=123testest space was here";
echo preg_replace('/^\$uid=(\d+)/','$1 uid lalala',$string); 
```

输出：

```
123 uid lalalatestest space was here 
```

# c# - 你怎么能只读取 HttpWebResponse 的一部分

> ID：15351924
> 
> 赞同：0
> 
> 时间：2013-03-12T01:50:29.367
> 
> 标签：c#, .net, httpwebrequest, httpwebresponse, system.net

我只想阅读 HttpWebResponse 的一部分。假设第一个 100k。我怎样才能只读取响应的前 100k 但仍然得到一个未损坏的子字符串？如果我只是将前 100k 放入一个 byte[] 中，我相信我最终可能会得到损坏的数据。

```
 HttpWebRequest request = HttpWebRequest.Create("http://www.yahoo.com") as HttpWebRequest;

        HttpWebResponse response = request.GetResponse() as HttpWebResponse;

        using (Stream responseStream = response.GetResponseStream())
        {
            using (StreamReader sr = new StreamReader(responseStream))
            {
                string content = sr.ReadToEnd();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:37:57.300

您不能期望通过限制字节长度来获得未损坏的子字符串。

更好的方法是按字符 ( `Read`, `ReadBlock`, `ReadLine`,) 阅读，直到您满意为止。

# c# - 编写单元测试的最佳方法是断言已使用新实例化的值设置对象？

> ID：15351926
> 
> 赞同：1
> 
> 时间：2013-03-12T01:50:41.823
> 
> 标签：c#, unit-testing, object, pass-by-reference

说我有一堂课：

```
public class Person
{
  public string Name { get; set; }
  public int Age { get; set; }
} 
```

并在一个方法中实例化它：

```
public void SomeMethod(Person person)
{
   person = new Person()
} 
```

在这个人被传入之前，它已经设置了值。

断言`SomeMethod`将传递的引用设置为新实例化对象的最佳方法是什么？

我能想到的就是检查所有可为空的属性是否为空，并且不可为空的值具有默认值。

还有比这更好的方法吗？

# winforms - 哪种方式在创建控件时消耗更少的处理？

> ID：15351929
> 
> 赞同：0
> 
> 时间：2013-03-12T01:51:28.830
> 
> 标签：winforms, dynamically-generated

我需要在只有一个表单的 winform 应用程序中创建 200 多个控件。它们都将被分组到面板中。我可以选择在代码中动态创建控件，或者通过将它们拖到面板上来静态创建控件。我试图找出哪种方式消耗更少的 CPU 功率和更少的内存：静态或动态。

还是两种方式都会消耗相同的？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:56:57.223

在内存和速度方面，无论它们是动态创建还是由 GUI 构建器完成，都不会产生明显的差异。

我也在寻找一种方法来避免在一个表单上使用 200 个控件（例如，将其分成一些选项卡或类似的选项卡）。您可以将问题分解得越多，GUI 构建器/拖放就越有吸引力......

# javascript - 如何将事件绑定到弹出窗口？

> ID：15351937
> 
> 赞同：0
> 
> 时间：2013-03-12T01:52:38.780
> 
> 标签：javascript, jquery, events

我似乎无法将事件绑定到弹出窗口。这样做的正确方法是什么？我知道你必须通过你想将事件绑定到的窗口，但我似乎无法在任何*地方*找到任何关于此的信息——过去一个小时一直在搜索信息，但我什至没有链接以显示我的努力。以下是我的一些尝试：

```
// the popup window is referenced by "display.window"
// #map is a <canvas> element occupying 100% of the new window

// I'll just try passing in the context first...
$(display.window, "#map").keydown(function(e) {
    // do stuff
});

// maybe the other way around?
$("#map", display.window).keydown(function(e) {
    // do stuff
});

// what if I just try to add the event right to the window?
$(display.window).keydown(function(e) {
    // do stuff
});

// nope, maybe bind will do the trick
$(display.window).bind(function(e) {
    // do stuff
});

// maybe the new window's DOM isn't loaded yet?
$(display.window).ready(function() {
    $(this).keypress(function(e) {
        // do stuff
    });
}); 
```

这些都不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:58:58.763

我认为您需要在用于创建弹出窗口的代码中执行此操作，很高兴看到代码的那部分。

此外，目前推荐的订阅事件的方法是使用`.on()`jQuery 方法。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(display.window).on('keydown', function(e) {
    //Good stuff here
}); 
```

完全未经测试，希望这可以帮助您走上正确的道路。

* * *

我想到的另一件事，你真的需要一个弹出窗口吗？那是从弹出窗口阻止程序之类的问题中找麻烦...您最好实现一个不错的模态窗口解决方案，然后您的“窗口”将成为同一个 DOM 的一部分，这应该使创建事件侦听器变得微不足道。

jQuery UI 有一个不错的“对话框”小部件

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

# java - com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException - 字段列表中的未知列

> ID：15351939
> 
> 赞同：1
> 
> 时间：2013-03-12T01:52:46.390
> 
> 标签：java, sql, web-applications, jdbc

我收到以下错误：

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“字段列表”中的未知列“userId”

导致此错误的代码是这样的：

```
PreparedStatement pstmt = 
    con.prepareStatement(
        "INSERT INTO " + 
        tableName + 
        " (userId,username,email,password) VALUES (?,?,?,?)"); 
```

我的表是由以下命令创建的

```
stmt.executeUpdate(
    "CREATE TABLE " + 
    tableName + 
    " (" + 
    " userId INT, " + 
    " userName VARCHAR(255) NOT NULL, " + 
    " email VARCHAR(255) NOT NULL, " + 
    " password VARCHAR(255), " + 
    " PRIMARY KEY(userId)" + 
    " )");
stmt.close(); 
```

有人可以帮我找出我的错误（如果有的话）。我是这方面的新手，所以我很难找到错误的确切位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T21:05:38.083

要查看的另一件事是触发器。我遇到了同样的错误，最终确定该错误是触发器语句而不是插入语句的结果。“未知列”位于触发器试图插入的表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:11:39.977

错误是因为已经存在另一个具有相同表名的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T10:42:38.050

如果您使用的是插入语句并且**列值缺失或为空**。它可以给出这个错误。我正在使用准备好的语句。对于具有数字数据类型的列，我收到此错误。其根本原因是空字符串作为列值传递。奇怪的是它抛出“未知列”e

# php - PHP/MySQL 外键和显示表

> ID：15351941
> 
> 赞同：0
> 
> 时间：2013-03-12T01:52:48.093
> 
> 标签：php, mysql, foreign-keys

我有 3 个相互引用的表格。联赛、球队和球员。

联赛有leagueid,leaguename,city
球队有teamid,teamname,numberofplayers,leagueid(fk)
玩家有playid,playername,position,teamid(fk)

如何显示诸如 Players 之类的表格以显示所有内容并使用 teamid 外键显示他们的团队名称而不是该列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:54:58.953

```
SELECT Players.*, teamname
FROM Players JOIN Teams USING (teamid) 
```

您只需要加入`teamid`两个表之间匹配的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:55:51.250

您需要加入两个表使用`INNER JOIN`.

```
SELECT a.*, b.*
FROM   Players a
       INNER JOIN Teams b 
          ON a.teamid = b.teamid 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:15:11.787

通过使用内连接

```
 SELECT  b.teamname,a.playername, a.position
       FROM   Players a
         INNER JOIN Teams b 
            ON a.teamid = b.teamid 
```

如果您指定联赛，

```
 SELECT c.leaguename, c.city ,d.* FROM
    (SELECT  b.teamname,a.playername, a.position
       FROM   Players a
         INNER JOIN Teams b 
            ON a.teamid = b.teamid) d
            INNER JOIN Leagues c
                ON d.leagueid= c.leagueid 
```

# google-api - Google API 目标在 AVD 管理器中不可用

> ID：15351945
> 
> 赞同：1
> 
> 时间：2013-03-12T01:53:31.660
> 
> 标签：google-api, avd

我是android开发的新手。我想将我的 AVD 目标配置为 Google API，但我刚刚意识到我在 AVD 管理器中只有 Android 目标。

我应该怎么办？

谢谢

# php - 如何从数据库中提取 ALL 并限制而不是特定的 id？

> ID：15351948
> 
> 赞同：0
> 
> 时间：2013-03-12T01:53:37.267
> 
> 标签：php, mysql, codeigniter

我知道这是简单的 php，但是我很难用 codeigniter 写出我的逻辑。

我正在尝试提取 12 个最近的用户并在视图中显示他们的信息。我在我的数据库表中创建了一个“created_on”字段来跟踪注册活动。

当我在控制器中指定一个 id 时，我可以提取从模型传递到控制器然后是视图的结果，但是它只会像这样拉一个用户。

模型：

```
public function newest_members()
      {

            $session = $this->session->userdata('is_logged_in');
            $user_id = $this->session->userdata('id');

            $query = $this->db->query("SELECT * FROM users WHERE status = 'active' && id = $user_id ORDER BY created_on DESC LIMIT 12");

            if($query->num_rows()==1)
            {
               $data = $query->result_array();
               return $data;
            }else{
            return array();
        }

    } 
```

控制器：

```
public function dashboard() 
    {
        $this->load->library('session');
        $this->load->helper('date');
        $session_id = $this->session->userdata('id');
        $this->load->model('account_model');
        $this->load->model('community_model');
        $user = $this->account_model->user();
        $data['user'] = $user;
        $newest_members = $this->community_model->newest_members();
        $data['newest_members'] = $newest_members;
        $data['main_content'] = 'account/dashboard';
        $this->load->view('includes/templates/main_page_template', $data);
    } 
```

看法：

```
<?php 
    foreach($newest_members as $nm)
     {
         echo $nm['first_name']; echo "<br />"; echo $nm['last_name'];
     }
 ?> 
```

这是提取最新成员和已登录成员的结果。但是我想拉所有已登录或不登录，所以我在我的模型上尝试这样的事情：

```
public function newest_members()
      {

            $query = $this->db->query("SELECT * FROM users WHERE status = 'active' ORDER BY created_on DESC LIMIT 12");
            // OR YOU CAN USE THE BELOW
            // $query = $this->db->query("SELECT * FROM users ORDER BY `created_on` DESC LIMIT 12");

            // YOU ALSO MIGHT WHAT TO ADD WHERE `status` = 'active' (or whatever applies for your db table)

            // EITHER SPIT OUT RESULTS OR EMPTY ARRAY
            if($query->num_rows()==1)
            {
               $data = $query->result_array();
               return $data;
            }else{
            return array();
        } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:12:13.320

```
SELECT TOP 12 FROM users WHERE status = 'active' ORDER BY created_on DESC 
```

我正在为此使用mssql，如果有帮助，请尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:48:43.870

由于您使用 codeigniter，它有一个很棒的功能，称为活动记录，它使使用数据库更容易和更安全，然后将原始查询编写为可能导致 SQL 注入的字符串。这是您使用活动记录并返回您期望的结果的函数。

```
public function newest_members()
{
    //Select the 12 newest users
    $result = $this->db->where('status', 'active')->order_by('created_on', 'desc')->limit(12)->get('users');

    //If results are found return an array otherwise return an empty array
    return ($result->num_rows() > 0) ? $result->result_array() : array();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:06:29.283

codeigniter num_rows() 函数不返回布尔值，而是返回从数据库中获取的结果数。因此，您的模型应该具有：

```
if($query->num_rows() > 0)
{
    ...
} 
```

看到[这里](http://ellislab.com/codeigniter/user-guide/database/results.html)了解更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T02:06:39.557

你想拉12个最新的活跃成员吗？你说得对。

```
SELECT * FROM users WHERE status = 'active' ORDER BY created_on DESC LIMIT 12 
```

此外，您不想检查是否只有一行返回。您想检查是否有超过零行返回。你需要这样做：

```
if($query->num_rows() > 0)
{
    $data = $query->result_array();
    return $data;
} 
```

# css - 删除 IE10 选择元素箭头

> ID：15351949
> 
> 赞同：75
> 
> 时间：2013-03-12T01:53:50.250
> 
> 标签：css, internet-explorer-10, conditional-statements

因此，对于 Mozilla 和 WebKit，我有一个半体面的解决方案，使用父元素替换`select`框上的箭头。`appearance: none;`

在大多数情况下，我在 IE 中禁用了此功能。对于 IE10，我实际上无法禁用它，因为我的条件注释实际上不起作用。

这是我的标记：

```
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)]>    <html class="ie10plus"> <![endif]-->
<!--[if !(IE)]><!--> <html> <!--<![endif]--> 
```

该课程`ie10plus`实际上并没有成为标记的方式。

我也觉得可能有一种合法的方式来替换 IE 中的箭头。我不反对实际解决问题。`appearance: none;`但是不起作用。那么我可以在这里做什么？

* * *

## 回答 #1

> 赞同：298
> 
> 时间：2013-04-10T18:38:46.100

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T07:52:36.900

但是！，如果我们想添加宽度，我们不能这样做：

`display:none`

所以

```
select::-ms-expand {
 /* IE 8 */
 -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
 /* IE 5-7 */
 filter: alpha(opacity=0);
 /* Good browsers :) */
 opacity:0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T02:05:00.803

[Internet Explorer 10 不支持条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)，因此您必须执行其他操作。一种解决方案是使用 JavaScript 嗅探用户代理并自己添加类：

```
<script>
if (navigator.userAgent.indexOf("MSIE 10.0") !== -1) {
    document.documentElement.className += " ie10";
}
</script> 
```

您可能应该将其添加到 中，`<head>`这样您就不会出现没有样式的内容，但这可能不是问题。

此外，如果您使用的是 jQuery，您可能需要执行以下操作：

```
if (navigator.userAgent.indexOf("MSIE 10.0") !== -1) {
    $("html").addClass("ie10");
} 
```

如果您想检查 IE10 或更高版本，请[从该 Microsoft 页面](http://msdn.microsoft.com/en-us/library/ie/ms537509%28v=vs.85%29.aspx)`getInternetExplorerVersion`复制粘贴该功能，然后将其更改为如下内容：`if`

```
if (getInternetExplorerVersion() >= 10) {
    // whatever implementation you choose
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T16:33:34.000

我正在使用**Zurb Foundation**的 IE 10 和 11 网站上的隐藏下拉箭头出现问题。_form.scss 上有一行

```
select::-ms-expand {
    display: none;
} 
```

我*删除*了它，下拉箭头开始在所有浏览器上正常显示。谢谢乔纳森在这里的回答。在搜索了很多解决方案后，这对我有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-12T04:15:32.837

仍然不确定您要完成什么，但这将检测并为 ie10 添加一个类：
`<!--[if !IE]><!--<script> if (/*@cc_on!@*/false) { document.documentElement.className+=' ie10plus'; } </script>!--<![endif]-->`

# jquery - 如何调整图像大小以适合 DIV jQuery

> ID：15351951
> 
> 赞同：3
> 
> 时间：2013-03-12T01:54:00.193
> 
> 标签：jquery, html, web

我有方形 DIV 和大型纵向和横向图像。

我需要将图像放入一个 DIV 中，并带有额外的部分`overflow:hidden`

例如。如果纵向设置宽度=div的宽度高度：自动

与风景相反。

我试过这个脚本，但它没有工作；

```
 $('.magic').each(function(){
        if($(this).css('width')>$(this).css('height')){
            $(this).css('height', '300px');
            $(this).css('width', 'auto');                
        }
        else{
            $(this).css('width', '300px');
            $(this).css('height', 'auto');

        }
    }); 
```

PS 图片不能拉伸，必须缩放

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:11:01.757

使用一些像这样的 CSS

```
.magic.portrait {
    height: 300px;
    width: auto;
}

.magic.landscape {
    width: 300px;
    height: auto;
} 
```

只需用你的 JS 添加一个类

```
$('.magic').each(function(){
    if($(this).width() > $(this).height()){
        $(this).addClass('landscape');
    }else{
        $(this).addClass('portrait');
    }
}); 
```

这也有助于保持您的应用程序逻辑和样式很好地分开。更好的是，在服务器端添加这些类，并完全避免使用 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:19:25.860

如果您真的想要一个 javascript/jquery 解决方案，请查看[jQuery AnyStretch](https://github.com/danmillar/jquery-anystretch)插件。它只是做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:02:20.783

如果事先知道图像大小，则可以使用 CSS 完成所有这些操作。

如果您决定必须使用 javascript，那么当前代码的问题是`$(this).css('width')`检索字符串`"300px"`，而不是数字，因此两个字符串的比较无法正常工作，就像您期望数字比较工作一样。

您可以将其转换为数字，也可以只使用`$(this).width()`它返回以像素为单位的数字。

工作示例：

```
$('.magic').each(function(){
    var self = $(this);
    var width = self.width();
    var height = self.height();
    if (width > height) {
        self.css({height: "300px", width: "auto"});
    } else {
        self.css({width: "300px", height: "auto"});
    }
}); 
```

演示：http: [//jsfiddle.net/jfriend00/B7hVp/](http://jsfiddle.net/jfriend00/B7hVp/)

# asp.net - ASP 自定义服务器端验证未触发

> ID：15351955
> 
> 赞同：0
> 
> 时间：2013-03-12T01:54:17.777
> 
> 标签：asp.net, validation

我一直在努力解决这个问题，但没有任何进展，所以如果有人能解释一下，我绝对会喜欢它...我有一个 ASP.Net Forms 网站，我加载了一个 jQuery 对话框让用户输入一个 ID，输入一个必填字段，并在客户端表达式验证器（它们工作正常），然后我尝试针对 SQL 表服务器端验证这一点。问题是我无法启动服务器端 CustomValidator，我已将其从实际验证脚本更改为仅“设置 args.IsValid = false”，将“Page.Validate()”添加到提交顶部按钮功能，向自定义验证子添加了一个断点，并且从所有外观来看，验证操作都没有执行，并且提交功能继续，就好像条目是有效的一样。

```
// Show the Login Dialog
        <script>
         function showLogin() {
             $("#login-dialog").dialog({
                 height: 380
                 , width: 500
                 , modal: true
                 , buttons: {
                     'Login': {
                         text: "Login"
                         //Login Dialog Login Submit button function
                         , click: function () {
                             $("#<%=LoginSubmit.ClientID()%>")[0].click();
                             return false;
                         }
                     }
                     , 'Register': {
                         text: "Register"
                         //Login Dialog Register Button
                         , click: function () {
                             $("#<%=RegisterButton.ClientID()%>")[0].click();
                             return false;
                         }
                     }
                 }
             });
         }; 
```

```
<%--Login dialog Div--%>

        <div id="login-dialog" title="Please Login or Register" hidden="hidden">

        <p>If you have already setup an Operator ID you can enter it below, otherwise please register for one.</p>

            <asp:RequiredFieldValidator runat="server" ControlToValidate="LoginOperatorID" ErrorMessage="Operator ID is required." CssClass="field-validation-error" />

            <asp:RegularExpressionValidator runat="server" ControlToValidate="LoginOperatorID" ErrorMessage="Operator ID must be 4-9 digits" CssClass="field-validation-error" ValidationExpression="[0-9]{4,9}" />

        <table id="LoginTable">
        <tr>
        <td>Operator ID:</td>
        <td><input type="password" runat="server" id="LoginOperatorID" maxlength="9" /></td>

            <asp:CustomValidator ID="LoginSubmitValidator" runat="server" EnableClientScript="true" Enabled="true" 
                ErrorMessage="Operator ID does not exist." 
                ControlToValidate="LoginOperatorID"
                OnServerValidate="CheckLoginID" CssClass="field-validation-error" />
            </tr>
        </table><br />
        <input type="button" runat="server" id="LoginSubmit" onserverclick="SubmitLogin" hidden="hidden" causesvalidation="true" />
         <input type="button" runat="server" id="RegisterButton" hidden="hidden" onserverclick="RegisterDialog" causesvalidation="false" /> 
```

```
'Validate Operator Login Sub
    Protected Sub CheckLoginID(source As Object, args As ServerValidateEventArgs)
        args.IsValid = False
    End Sub 
```

* * *

```
 'Submit Operator Login Sub
    Sub SubmitLogin()
            Page.Validate()
       .....
    End Sub 
```

提前感谢您的帮助，非常感谢！

***更新：*** 这似乎与 jQuery 对话框中的 DIV 有关，根据@ShaiCohen 的评论，我从登录按钮和用于对话框的 div 中删除了 hidden 属性，导致对话框 div 也显示在页面中，当我在对话框外使用 ASP 提交按钮时，验证工作正常，当我在对话框内使用 ASP 按钮或使用对话框按钮时，验证不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:24:13.750

我最终放弃了使用 jQuery 模态，并决定使用 CSS 构建模态，并且在那里工作的验证没有问题。

# mysql - IP 地址查找的表架构

> ID：15351958
> 
> 赞同：0
> 
> 时间：2013-03-12T01:54:26.363
> 
> 标签：mysql, database, geolocation, ip-address, lookup

我正在做一个我们需要做的项目`IP Address lookups`。因此，为此我们已经获得了数据集，现在下一步是将这些数据集填充到表中。然后有一些服务设置将接受`IP Address as an input`然后在`IP Address`. 所以下面是数据集看起来像 -

```
ip_address      country region  city           metro-code   latitude    longitude   postal-code   country-code   region-code    city-code   continent-code  country-code

24.32.116.116   usa       tx    clarksville    623           33.6103    -95.0498    75426            840           44             34918            6            us
65.29.108.232   usa       mi    novi           505           42.4637    -83.4604    48375            840           23             4339             6            us
66.169.99.69    usa       tx    ft worth       623           32.7016    -97.3823    76109            840           44             771              6            us
72.70.100.111   usa       ma    peabody        506           42.5332    -70.9726    1960             840           22             1392             6            us
174.252.116.137 usa       va    oakton         511           38.8892    -77.3222    22124            840           47             3860             6            us
68.55.144.242   usa       md    pasadena       512           39.1276    -76.5125    21122            840           21             4358             6            us
174.252.83.27   usa       pa    lancaster      566           40.0459    -76.3542    17603            840           39             333              6            us
174.78.192.31   usa       ga    warner robins  503           32.5958    -83.6384    31088            840           11             5052             6            us
98.192.146.235  usa       fl    panama city    656           30.1804    -85.5598    32404            840           10             671              6            us
71.192.181.20   usa       ma    springfield    543           42.1187    -72.5483    1109             840           22             967              6            us
76.183.54.227   usa       tx    dallas         623           32.7202    -96.6769    75217            840           44             77               6            us
69.62.143.140   usa       ca    granite bay    862           38.7442    -121.191    95746            840           5              49451            6            us
69.142.76.32    usa       nj    penns grove    504           39.707     -75.4467    8069             840           31             2335             6            us
70.173.54.93    usa       nv    las vegas      839           36.2059    -115.225    89108            840           29             173              6            us
98.242.8.222    usa       ca    fresno         866           36.7968    -119.883    93722            840           5              19               6            us 
```

**问题陈述：-**

我们预计`100 Millions calls`.`IP Address lookup`

这个数据集将是对所有国家都有意义的全球数据集。我们计划将这些数据集存储在`MySql database`其中`In Memory Database`。

现在我的问题是我应该只`single table`用上面提到的列创建一个吗？或者我应该将上表标准化为两个或三个？如果有的话，我是否需要在任何列上创建索引？

基本上我想知道我应该如何设置这个表的模式，这样查找就不会花费太多时间来处理我们预期的流量。我们将进行查找的服务应该非常快地返回响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:22:05.570

根据您的数字，我会说您正在查看 3-5k/s 的峰值，超过 40GB。假设您感兴趣的查询是 IP->record，我建议不要直接针对 mysql 运行。

如果我设计你的系统，我会计划：

1.  一个面向文档的存储，用于存储/提供来自数据提供者的原始数据。Tokyo-cabinet、Cassandra 或 HBase 之一在这里可以做得很好。

2.  一个完全规范化（可能是星型模式）的 mysql 实例，用于规范化数据以用于 QA 目的。

3.  一个 memcached 或类似的分布式内存记录缓存，用于通过轻量级 Web 服务器 shim 提供数据。

QA 后数据可以直接从 mysql 或存储在 doc-store 中的“干净”属性提供给缓存。后者可能更可取，除非您可能需要对存储执行常规的即席相关查询，在这种情况下，您最好将时间和服务器资源专用于 mysql。

坦率地说，您不希望每个事务都执行数据库查询。

# mysql - 按日期分组时间戳字段

> ID：15351960
> 
> 赞同：0
> 
> 时间：2013-03-12T01:54:45.313
> 
> 标签：mysql, sql

我正在尝试编写一个 SQL 查询来返回在过去 7 天内提交到我的网站的链接数量。到目前为止，我有这个：

```
SELECT COUNT(`id`) AS `count`
FROM `links`
WHERE `created` > NOW() - 86400
AND `created` < NOW() 
```

这工作一天，它返回一行调用`count`了过去 24 小时内提交的链接数。我需要将其更改为返回 2 列称为`date`and `count`，有 7 行（每天一行）。

我无法理解的棘手部分是它`created`是一个`timestamp`列，我无权更改它，所以我必须使用它。

编辑：查询正在进行中：

```
SELECT DAY(FROM_UNIXTIME(created)) AS day, COUNT(id) count
FROM links
GROUP BY DAY(FROM_UNIXTIME(created))
LIMIT 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:58:18.553

`NOW()`实际上不应该工作，因为它返回一个`datetime`. 此外，如果您想获取 7 天的数据，您需要`604800`从`UNIX_TIMESTAMP()`. 您可以将 then`date`和`time`函数与`FROM_UNIXTIME`. 这将使分组更容易。最佳情况下，您的列应该是`datetime`类型。

它会是这样的：

```
SELECT DAY(FROM_UNIXTIME(created)) day, COUNT(id) count
FROM links
WHERE created > UNIX_TIMESTAMP() - 604800 AND created < UNIX_TIMESTAMP()
GROUP BY DAY(FROM_UNIXTIME(created)) 
```

您也可以使用`BETWEEN`运算符：

```
WHERE created BETWEEN UNIX_TIMESTAMP() - 604800 AND UNIX_TIMESTAMP() 
```

[查看演示](http://sqlfiddle.com/#!2/c1423/1)

# java - 以编程方式指定 Java 类文字（无需硬编码）？反射？

> ID：15351963
> 
> 赞同：6
> 
> 时间：2013-03-12T01:55:28.907
> 
> 标签：java, generics, reflection, literals

## 问题：

1.  在行

    `Object o = myC.getConstructor(short.class).newInstance(myC.cast(pPrim));`

    有没有办法避免硬编码“ `short.class`”，而是从 获得文字 `pPrim`？

    我从[使用反射创建新对象](https://stackoverflow.com/questions/10470263/create-new-object-using-reflection)`short.class`的答案中得到了使用“”的想法？

2.  我不应该使用 " `T o = ...`（例如，用于字节或短）而不是`Object o = ...`？

    [我认为我的方法与Class Literals](http://docs.oracle.com/javase/tutorial/extra/generics/literals.html) 结尾处的方法几乎相同，即Runtime-Type Tokens 。

3.  是我想做的一个案例的反思吗？

## 背景：

我正在学习 Finegan 和 Liguori 编写的 OCA Java SE 7：程序员 1 学习指南一书，为 1Z0-803 做准备。所以我经常练习代码。在练习时，我写了一个类，希望看到从 char 转换时原语内部发生了什么。我在下面列出了代码......如果你看一下，请关注方法 byteToBinaryString、shortToBinaryString 和 originalToBinaryString ......这就是我的问题出现的地方。

## 让我想到问题的步骤：

2.  写了 byteToBinaryString
3.  将 byteToBinaryString 克隆为 shortToBinaryString
4.  想，“我应该能够避免这种方法重复，也许使用泛型”
5.  将 shortToBinaryString 克隆为 originalToBinaryString 并尝试转换为泛型
6.  开始认为这也是一种反思
7.  被类文字硬编码困住了

## 这是我的代码

```
 import java.util.TreeMap;
import java.util.Set;

public class StackoverflowQuestion {

  // I wrote this 1st
  public static String byteToBinaryString(byte pByte) {
    int primLength = 8;
    int count = 0;
    String s = "";
    while ( count++ < primLength ) {
      byte sm = (byte) (pByte & 0x01);
      pByte >>= 1;
      s = sm + s;
      if ( count % 4 == 0 && count != primLength ) {
        s = " " + s;
      }
    }
    return s;
  }

  // Then I cloned byteToBinaryString to this and had the thought, 
  // I shouldn' have to repeat this
  public static String shortToBinaryString(short pShort) {
    int primLength = 16;
    int count = 0;
    String s = "";
    while ( count++ < primLength ) {
      short sm = (short) (pShort & 0x0001);
      pShort >>= 1;
      s = sm + s;
      if ( count % 4 == 0 && count != primLength ) {
        s = " " + s;
      }
    }
    return s;
  }

  // So I cloned shortToBinaryString, modifidied to this and ...
  public static <T extends Number> String primitiveToBinaryString(T pPrim) {
    int primLength = 16;
    int count = 0;
    String className = pPrim.getClass().getName();
    try {
      Class<?> myC = Class.forName(className);
      // ... got stuck here
      Object o = myC.getConstructor(short.class).newInstance(myC.cast(pPrim));
      System.out.println(pPrim + "<--pPrim.equals(o)-->" + pPrim.equals(o) + "<--" + o);
    } catch ( Exception e ) {
      System.out.println("Caught exception: " + e);
    }
    String s = "";
    while ( count++ < primLength ) {
      //T sm = new Class<T>(pPrim.intValue() & 0x0001);
      //pPrim >>= 1;
      //s = sm + s;
      if ( count % 4 != 0 && count != primLength ) {
        s = "-" + s;
      }
    }
    return s;
  }

  public static void main ( String[] args ) {

    // exercise byteToBinaryString
    for ( int i = 0; i < 256; i++ ) {
      char cByte = (char) i; 
      byte b1 = (byte) cByte;
      System.out.printf( "char(%c): charValue(%05d): bin(%s): dec(%+6d)\n", cByte, (int) cByte, byteToBinaryString(b1), b1 );
    }

    // exercise shortToBinaryString
    // please ignore my use of TreeMap, just figuring out how it works
    TreeMap<Integer, String> charsTM = new TreeMap<Integer, String>();
    charsTM.put(00000, "00000");
    charsTM.put(00001, "00001");
    charsTM.put(32766, "32766");
    charsTM.put(32767, "32767");
    charsTM.put(32768, "32768");
    charsTM.put(32769, "32769");
    charsTM.put(65535, "65535");

    short s1  = 32767;
    char  ch1 = 32768;

    Set<Integer> charKeys = charsTM.keySet();
    // loop through the boundary values I selected to show what's going on in memory
    for ( Integer i : charKeys ) {
      ch1 = (char) i.intValue();
      s1 = (short) ch1;
      System.out.printf( "char(%c): charValue(%05d): bin(%s): dec(%+6d)\n", ch1, (int) ch1, shortToBinaryString(s1), s1 );
    }

    // exercise primitiveToBinaryString
    primitiveToBinaryString( (byte)  127 );
    primitiveToBinaryString( (short) 32767 );
    primitiveToBinaryString( (int)   2147483647);
    primitiveToBinaryString(         2147483648L);
    primitiveToBinaryString(         2147483648F);
    primitiveToBinaryString(         2147483648D);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:55:46.407

事实上，您可以通过强制[装箱转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)从原始值获取类文字，然后反映静态字段`TYPE`（为任何原始包装器声明）。

```
 short s = 0;
 Object obj = s;
 System.out.println(obj.getClass().getDeclaredField("TYPE").get(null)); 
```

这里`obj.getClass()==Short.class`和`Short.TYPE==short.class`。赋值`obj=s`是一个装箱转换（从`short`到`Short`），然后是一个参考扩大转换（从`Short`到`Object`）。如果您通过对方法的调用来替换赋值，它也可以工作，例如`Object box(Object obj){return obj;}`因为赋值转换和方法调用转换都允许进行装箱转换。

但是，所有这些反射都没有提供任何关于硬编码的优势`short.class`，因为您不能在原始类型上使用泛型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:56:14.303

有几件事：

这可以稍微清理一下：

```
String className = pPrim.getClass().getName();
Class<?> myC = Class.forName(className);
//Can just do
Class<?> myC = pPrim.getClass(); 
```

此外，如果您正在寻找一个采用原始值的单参数构造函数，您可以这样做：

```
public Constructor<?> getPrimitiveSingleArgConstructor(Class<?> myC) {

  for( Constructor<?> constructor : myC.getConstructors() ) {
    if( constructor.getParameterTypes().length == 1 ) {
      Class<?> paramType = constructor.getParameterTypes()[0];
      if (paramType.isPrimitive()) {
        return constructor;
      }
    }
  }
} 
```

最后，如果您尝试将数字转换为二进制字符串并且只使用整数（我假设您是），您始终可以将数字向上转换为 long 并将其转换为二进制字符串。

```
long integralValue = pPrim.longValue(); 
```

# css - 在不影响其他图标的情况下更改悬停图标大小

> ID：15351975
> 
> 赞同：2
> 
> 时间：2013-03-12T01:57:43.800
> 
> 标签：css

我正在更改悬停时的字体真棒图标以使它们更大。我遇到的问题是，通过使 1 个图标变大，它会移动它旁边的其他图标。IE图标会上下移动。

我创建了这个基础小提琴来显示问题。我弄乱了填充和边距，试图在每个图标周围创建所需的空间，这样空间就足够大，以至于其他图标不会移动。我肯定是 CSS 菜鸟，所以请放轻松；）

这是小提琴：http: [//jsfiddle.net/newmanw/MUHVD/](http://jsfiddle.net/newmanw/MUHVD/)

标记：

```
<title>Bootstrap 101 Template</title>
 <body>
    <div>
        <span>
            <i class="icon icon-warning-sign"></i>
            <i class="icon icon-ok"></i>
            <i class="icon icon-flag"></i>
        </span>
    </div>
  </body> 
```

css

```
@import url('https://netdna.bootstrapcdn.com/font-awesome/2.0/css/font-awesome.css');

.icon:hover{
    cursor: pointer;
    font-size: 28px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:02:36.597

这对你有用吗？

```
.icon:hover{
    cursor: pointer;
    font-size: 28px;
 }
 .icon{
   float:left;
   width:30px;   
  text-align:center;
} 
```

[http://jsfiddle.net/MUHVD/1/](http://jsfiddle.net/MUHVD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:00:53.910

在某种程度上，这是做不到的。如果你把一堵墙的底砖做得更大，所有其他的砖都会被推来推去。

您可以使用一些 javascript 来执行此操作，这些 javascript 会强制图标进入`absolute`位置，在调整大小时保持它们全部静止。

您还可以为图标提供足够的“填充”（不一定`padding`）以在调整大小时保持位置笔直。

[http://jsfiddle.net/MUHVD/5/](http://jsfiddle.net/MUHVD/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:11:23.627

如果您将`vertical-align`图标上的属性设置为`text-top`，它将保持它们的垂直位置相同，但仍需要水平移动它们

```
.icon {
    vertical-align: text-top;
}

.icon:hover{
    cursor: pointer;
    font-size: 28px;
} 
```

[http://jsfiddle.net/MUHVD/6/](http://jsfiddle.net/MUHVD/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T02:33:32.980

您应该使用`float: left;`并`.icon`指定在鼠标悬停后字体大小增长的宽度，例如。在这里你想增长到 28px 所以你需要指定`width: 28px;`你的`.icon`.

# jsp - 由于浏览器重定向，jsp中的注销不起作用

> ID：15351977
> 
> 赞同：0
> 
> 时间：2013-03-12T01:57:52.773
> 
> 标签：jsp

我想从我的项目中的帐户中注销。所以我写了一个jsp代码如下

```
<%@page import="java.util.*" %>
<%session.invalidate();%> You have logged out. Please <a href="adminlogin.html"><b>Login</b></a> 
```

但是每当我单击浏览器后退按钮时，它都会转到主管理页面，但不应返回上一页。我应该禁止浏览器进入管理主页。它应该只通过登录发生。请帮助我***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:04:30.290

尝试这个

```
<SCRIPT type="text/javascript">
    window.history.forward();
    function noBack() { window.history.forward(); }
</SCRIPT>
</HEAD>
<BODY onload="noBack();"
    onpageshow="if (event.persisted) noBack();" onunload=""> 
```

[看这里](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

# java - Runnable如何修改最终的局部变量

> ID：15351978
> 
> 赞同：-1
> 
> 时间：2013-03-12T01:57:55.547
> 
> 标签：java, android, multithreading, final, volatile

我试图找出我的用户界面何时运行，并且有一个聪明的想法，即向 uiThread 发布一个可运行的对象，其唯一的工作就是设置一个标志。我尝试使用`volatile`关键字 on`uiIsRunning`但 eclipse 不允许这样做，我还不明白。

但令我惊讶的是，当我尝试下面没有使用 final 修饰符的代码时`uiIsRunning`，我被正确地告知我只能在嵌入式类中使用局部变量，如果该局部变量是`final`. 因此，令`uiIsRunning final`我惊讶的是，Eclipse 对我的行完全没`uiIsRunning = true;`问题，也就是说，Eclipse 认为我可以`final`在这个嵌套类中设置变量的值！

如果有人能告诉我我需要做什么来获得我想要的操作：在我当前的线程中将一个标志设置为 false，然后在我发布它以执行它的线程时设置为 true，我将不胜感激。

```
 final boolean uiIsRunning = false;
        uiHandler.post(new Runnable() {
            @Override
            public void run() {
                uiIsRunning = true;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:08:47.120

您似乎能够修改`final`变量，这很奇怪。但更重要的是，在您的情况下，您可以执行以下操作：

```
public class SurroundingActivity extends Activity {

    volatile boolean uiIsRunning = false;
    private Handler uiHandler;

    void someMethod () { 
        uiHandler.post(new Runnable() {
            @Override
            public void run() {
                SurroundingActivity.this.uiIsRunning = true;
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:14:03.870

当您将其用作标志时，您应该使用 volatile 关键字并将其设置为您的类的变量（而不是像您所做的那样的局部变量）。注意，volatile 变量只能由唯一的线程修改。如果你想通过多个线程修改它，你应该看看同步或原子对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T02:09:06.900

您可以通过在您的方法之外实例化它来访问多个线程中的字段（这种方式，而不是“局部变量”）。

```
private int sharedInt = 0;

public void someMethod() {

    // sharedInt will be visible inside this thread.
    Thread thread = new Thread(new Runnable() {....});

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:15:48.333

> Runnable如何修改最终的局部变量

它不能。除非变量是成员变量，而不是局部变量，否则您的代码示例不会编译。

```
cannot assign a value to final variable uiIsRunning 
```

不是一个真正的问题。

# c++ - 在结构中定义函数

> ID：15351979
> 
> 赞同：-2
> 
> 时间：2013-03-12T01:58:03.697
> 
> 标签：c++, visual-studio-2010, struct

我知道 C 中的结构不支持像 C++ 中的类那样的函数/构造函数。但是，我确实尝试放入函数定义和构造函数，并且代码表现得好像我定义了一个类而不是 struct 。我将 Visual Studio 2010 用于我的代码。这是标准功能还是仅适用于 MS C++。我搜索了很多论坛，他们的反应不一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:02:36.053

在 C++ 中，结构和类是相同的，除了一件事。一个类的成员和方法默认是私有的，一个结构的默认是公共的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T02:02:37.560

`struct`并且`class`在功能上是相同的，`C++`只是 a 中的成员`struct`默认是公共的，而 a 中的成员默认`class`是私有的。事实上，这个[先前的线程](https://stackoverflow.com/questions/92859/what-are-the-differences-between-struct-and-class-in-c)涵盖了它的一些细节。

如果您编译成功，那么您一定一直在使用`C++`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T02:03:22.007

这是 C++ 的标准功能，但不是 C 的标准功能。您一定是用 C++ 编译的。

# ruby-on-rails - 使用 OmniAuth 和 Rails 4 重定向时会话不持久

> ID：15351985
> 
> 赞同：7
> 
> 时间：2013-03-12T01:58:24.423
> 
> 标签：ruby-on-rails, session, omniauth, ruby-on-rails-4

我在将[OmniAuth](https://github.com/intridea/omniauth)与 Rails 4.0.0.beta1 一起使用时遇到问题，其中 SessionsController 中设置的会话值没有在重定向中保持不变。我试图弄清楚它是否是我的代码中的某些东西，Rails 4 中的错误，或者与 OmniAuth gem 不兼容。我正在使用 OmniAuth 开发者策略。

我不确定这是否意味着什么，但是如果我`SessionsController#create`在该`session[:user_id] = user.id`行之后放置一个调试器并检查会话对象的类，我会得到：

```
ActionController::RequestForgeryProtection::ProtectionMethods::NullSession::NullSessionHash 
```

但是，如果我在运行 Rails 3.2 的不同应用程序中检查相同的会话类，我会得到：

```
Hash 
```

也许 OmniAuth 无法正确处理 NullSessionHash 对象？

**session_controller**

```
class SessionsController < ApplicationController
  skip_before_filter :authenticate_user!

  def create
    user = User.find_or_create_by_auth_hash(auth_hash)
    session[:user_id] = user.id
    redirect_to root_path
  end

  protected

  def auth_hash
    request.env['omniauth.auth']
  end

end 
```

**配置/初始化程序/secret_token.rb**

```
MyApp::Application.config.secret_key_base = 'REMOVED' 
```

**配置/初始化程序/session_store.rb**

```
MyApp::Application.config.session_store :encrypted_cookie_store, key: '_my_app_session' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T03:30:32.260

事实证明，这与 Rails 4 和使用omniauth gem 开发者策略之间的问题有关。我在[https://github.com/intridea/omniauth/pull/674中修复了它](https://github.com/intridea/omniauth/pull/674)

**更新**

由于 PR 没有合并，我想我会发布一个似乎适用于大多数人的简单解决方案。问题是开发者策略不包含 Rails 默认需要的表单真实性令牌。您可以使用以下命令在会话控制器中禁用此功能：

```
class SessionsController < ApplicationController
  skip_before_filter :verify_authenticity_token
  # ...
end 
```

# lisp - 通过嵌套列表 LISP 递归

> ID：15351988
> 
> 赞同：0
> 
> 时间：2013-03-12T01:58:35.073
> 
> 标签：lisp, common-lisp

我将如何通过嵌套列表进行递归？

例如，给定：`'((A 1 2) (B 3 4))`

如何将 2 添加到每个嵌套子列表中的第二个元素？

```
(defun get-p0 (points)
    (loop for x from 0 to
            (-  (list-length    points) 1) do
                (+ 2 (cadr (nth x points)))
    )
) 
```

我不太确定为什么`(get-p0 '((A 1 2) (B 3 4)))`返回 NIL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:56:53.723

我会用这样的东西：

```
(loop for (letter x y) in '((A 1 2) (B 3 4))
     collect (list letter (+ 2 x) y)) 
```

原因：它更短，并且您不测量列表的长度以对其进行迭代（您为什么要这样做？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T13:52:59.950

由于您要求递归解决方案：

```
(defun get-p0 (lst &optional (n 0))
  (if (null lst) 
      nil
      (let ((elt1 (first lst)) (eltn (cdr lst)))
        (if (listp elt1)
             (cons (get-p0 elt1) (get-p0 eltn))
             (cons (if (= n 1) (+ elt1 2) elt1) (get-p0 eltn (+ n 1))))))) 
```

所以

```
? (get-p0 '((A 1 2) (B 3 4)))
((A 3 2) (B 5 4)) 
```

如有必要，它会进一步向下递归：

```
? (get-p0 '((A 0 2) ((B -4 4) (C 10 4))))
((A 2 2) ((B -2 4) (C 12 4))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:28:04.563

按照您的说法，您可以将问题视为基本递归模式：您使用递归或迭代（ 、 等； 、 等）遍历列表`mapcar`并将`reduce`函数`dolist`应用于`loop`其条目。这是一个功能解决方案：

```
(defun get-p0 (points)
  (mapcar #'add-2 points)) 
```

其中辅助函数可以定义如下：

```
(defun add-2 (lst)
  "Add 2 to the 2nd item"
  (let ((res '()))
    (do ((l lst (cdr l))
         (i 1 (1+ i)))
      ((null l) (nreverse res))
      (push (if (= 2 i)
              (+ 2 (car l))
              (car l))
            res)))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T02:38:03.153

如所写，您的“循环”使用不会返回任何内容；因此返回 NIL。你的代码只是简单地迭代 x 并计算一些东西；东西没有存储在任何地方。

那么，如何得到你想要的结果呢？假设您愿意修改每个点，这应该有效：

```
(defun get-p0 (points)
  (loop for x from 0 to (- (list-length points) 1) do
    (let ((point (nth x points)))
      (setf (cadr point) (+ 2 (cadr point)))))
   points) 
```

# node.js - 错误：找不到模块“连接”

> ID：15351995
> 
> 赞同：12
> 
> 时间：2013-03-12T01:59:25.910
> 
> 标签：node.js, connect

`'connect'`看来这个简单的应用程序在我刚刚将它安装在文件目录中后找不到该模块。

```
var connect = require ('connect');

connect.createServer(function(res, req, next) {
    res.simpleBody("Connect you son of a beeeeetch");

}).listen(8000);

express@3.1.0 node_modules/express
├── methods@0.0.1
├── fresh@0.1.0
├── range-parser@0.0.4
├── cookie-signature@0.0.1
├── buffer-crc32@0.1.1
├── cookie@0.0.5
├── debug@0.7.2
├── commander@0.6.1
├── mkdirp@0.3.3
├── send@0.1.0 (mime@1.2.6)
└── connect@2.7.2 (pause@0.0.1, bytes@0.1.0, formidable@1.0.11, qs@0.5.1)
Dzs-Mac-Attax-2:PlsWrk Dz$ node test.js

module.js:340
    throw err;
      ^
Error: Cannot find module 'connect'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/Users/Dz/Documents/NodeTests/PlsWrk/test.js:1:77)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-12T02:09:19.833

[Express](http://expressjs.com/)在内部使用[Connect](http://www.senchalabs.org/connect/)作为其 node_modules 依赖项之一。

如果您希望在您的应用程序中使用 Connect，您需要将其添加到您的`package.json`并运行`npm update`.

按照设计，每个节点模块都有自己的私有内部依赖项。

如果你想使用任何，你的应用程序也需要安装它们。

这意味着您的应用可以使用不同版本的模块，并且每个模块可以在内部再次使用不同的版本而不会发生冲突。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-06T15:16:19.920

**Connect**是 Express 使用的可扩展 HTTP 服务器框架。特别是 Express 使用它为会话和 cookie 处理提供支持。源代码可在 github 上[https://github.com/senchalabs/connect](https://github.com/senchalabs/connect)获得。

通常，当节点应用程序“找不到”某些内容时，首先要尝试的是转到[https://npmjs.org/package/npm-search](https://npmjs.org/package/npm-search)并搜索找不到的内容。如果不使用 npm，在节点生态系统中将很难相处。

在这种情况下，npmsearch 会找到 connect，如果您访问[https://npmjs.org/package/connect](https://npmjs.org/package/connect)，您会找到 connect 模块的安装说明。

在这种情况下 ：

```
npm install connect

npm -g install connect 
```

为每个用户安装连接模块。

在大多数 unix 发行版上，您可能需要 root 或使用 sudo 来执行此操作。

或者，您可以将连接依赖项添加到项目的 package.json 文件中 - 我的看起来像这样：

```
"express": "3.x" ,
"connect": "2.x" 
```

我还必须使用 npm 安装模块 buffer-crc32、methods、debug、fresh、range-parser、cookie-signature 和 cookie 以获得一个工作的 express 项目。

快乐的节点黑客 :)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-28T20:06:43.710

连接模块未安装或部分安装，因此请先安装它，然后再尝试重新启动服务器

```
 npm install connect 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-29T10:00:44.430

您可以使用以下命令，如果您忘记安装 connect serve-static 模块或安装不正确，可能会发生这种情况。

```
$ npm install connect serve-static 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T02:04:18.433

因为你没有安装。你已经`express`安装了，没有`connect`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-08T15:11:31.640

我有同样的问题。节点安装到目录`C:\Program Files (x86)\nodejs`中。最初我试图从这个目录安装和运行 javascript 文件，这导致了许多权限问题。

如果您已将服务器放在该目录中，请尝试将其移动到另一个目录（可能在 中`Documents`），在您的 Node 命令提示符中导航到那里，然后再次尝试运行。

这对我来说是开箱即用的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-23T16:56:54.713

(Win7) 我以管理员身份打开了一个命令窗口 我在 C:\Program Files (x86)\NodeJS 下创建了一个目录 我通过 cd C:\Program Files (x86)\NodeJS 导航了命令窗口

我运行了命令 npm install connect

响应：[已编辑]>npm -g install connect npm ERR！Windows_NT 6.1.7601 npm 错误！argv " [redacted]\node_modules\npm\bin\npm-cli.js" "-g" "install" "connect" npm ERR! 节点 v0.12.7 npm 错误！npm v2.11.3 npm 错误！代码 ETIMEDOUT npm 错误！errno ETIMEDOUT npm 错误！系统调用连接

```
npm ERR! network connect ETIMEDOUT
npm ERR! network This is most likely not a problem with npm itself
npm ERR! network and is related to network connectivity.
npm ERR! network In most cases you are behind a proxy or have bad network settings.
npm ERR! network
npm ERR! network If you are behind a proxy, please make sure that the
npm ERR! network 'proxy' config is set properly.  See: 'npm help config'

npm ERR! Please include the following file with any support request:
npm ERR!      [redacted]\npm-debug.log 
```

我运行 npm config edit 我更改了属性行以消除每行开头的分号。

再次，我运行 npm -g install connect

同样的结果。日志文件有这个：

```
0 info it worked if it ends with ok
1 verbose cli [ ' [redacted]\\\\node.exe',
1 verbose cli   ' [redacted]\\node_modules\\npm\\bin\\npm-cli.js',
1 verbose cli   '-g',
1 verbose cli   'install',
1 verbose cli   'connect' ]
2 info using npm@2.11.3
3 info using node@v0.12.7
4 verbose install initial load of  [redacted]\package.json
5 verbose readDependencies loading dependencies from [redacted]\package.json
6 silly cache add args [ 'connect', null ]
7 verbose cache add spec connect
8 silly cache add parsed spec { raw: 'connect',
8 silly cache add   scope: null,
8 silly cache add   name: 'connect',
8 silly cache add   rawSpec: '',
8 silly cache add   spec: '*',
8 silly cache add   type: 'range' }
9 silly addNamed connect@*
10 verbose addNamed "*" is a valid semver range for connect
11 silly addNameRange { name: 'connect', range: '*', hasData: false }
12 silly mapToRegistry name connect
13 silly mapToRegistry using default registry
14 silly mapToRegistry registry ht tps://registry.npmjs.org/
15 silly mapToRegistry uri ht tps://registry.npmjs.org/connect
16 verbose addNameRange registry:ht tps://registry.npmjs.org/connect not in flight; fetching
17 verbose request uri https://registry.npmjs.org/connect
18 verbose request no auth needed
19 info attempt registry request try #1 at 12:36:52 PM
20 verbose request id 3524fc7ca91c73dc
21 http request GET https://registry.npmjs.org/connect
22 info retry will retry, error on last attempt: Error: connect ETIMEDOUT
23 info attempt registry request try #2 at 12:37:26 PM
24 http request GET https://registry.npmjs.org/connect
25 info retry will retry, error on last attempt: Error: connect ETIMEDOUT
26 info attempt registry request try #3 at 12:38:50 PM
27 http request GET https://registry.npmjs.org/connect
28 verbose stack Error: connect ETIMEDOUT
28 verbose stack     at exports._errnoException (util.js:746:11)
28 verbose stack     at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1010:19)
29 verbose cwd [redacted]
30 error Windows_NT 6.1.7601
31 error argv "[redacted]\\node_modules\\npm\\bin\\npm-cli.js" "-g"     "install" "connect"
32 error node v0.12.7
33 error npm  v2.11.3
34 error code ETIMEDOUT
35 error errno ETIMEDOUT
36 error syscall connect
37 error network connect ETIMEDOUT
37 error network This is most likely not a problem with npm itself
37 error network and is related to network connectivity.
37 error network In most cases you are behind a proxy or have bad network settings.
37 error network
37 error network If you are behind a proxy, please make sure that the
37 error network 'proxy' config is set properly.  See: 'npm help config'
38 verbose exit [ 1, true ] 
```

我想我只会使用 IIS Express。这*数百个文件要做一些*简单的事情，这超出了我的范围。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-03T14:56:20.033

我对 express-http-proxy 有同样的问题，解决方案是使用 npm 安装包。起初我全局安装（-g）并且它可以工作。在另一个安装中，我不得不使用“--save-dev”。

```
$ gulp
module.js:338
    throw err;
      ^
Error: Cannot find module 'express-http-proxy'
at Function.Module._resolveFilename (module.js:336:15)
at Function.Module._load (module.js:278:25)
at Module.require (module.js:365:17)
at require (module.js:384:17)
at Object.<anonymous> (/var/opt/jet/workspace/node-js-project/lib/authorization-to-context-header.js:1:75)
at Module._compile (module.js:460:26)
at Object.Module._extensions..js (module.js:478:10)
at Module.load (module.js:355:32)
at Function.Module._load (module.js:310:12)
at Module.require (module.js:365:17)
at require (module.js:384:17) 
```

**安装包**

```
$ npm install express-http-proxy -g
express-http-proxy@0.6.0 /opt/jet/nodejs/node-js/lib/node_modules/express-http-proxy
âââ type-is@1.6.6 (media-typer@0.3.0, mime-types@2.1.4)
âââ raw-body@1.3.4 (bytes@1.0.0, iconv-lite@0.4.8) 
```

或者如果“-g”还不够

```
$ npm install express-http-proxy --save-dev 
```

**吞咽工作**

```
$ gulp
[16:49:17] Using gulpfile /var/opt/workspace/node-js-project/gulpfile.js
[16:49:17] Starting 'dev'...
[16:49:17] Starting 'clean'...
[16:49:17] Finished 'dev' after 9.18 ms
[16:49:17] Starting 'default'...
[16:49:17] Finished 'default' after 10 Î¼s
[16:49:17] Finished 'clean' after 11 ms
[16:49:17] Starting 'build'...
[16:49:17] Starting 'clean'...
[16:49:17] Finished 'clean' after 2.13 ms
[16:49:17] Starting 'styles'...
[16:49:17] Finished 'styles' after 813 ms
... 
```