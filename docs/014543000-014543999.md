# StackOverflow 问答 14543000-14543999

# sql - 使用重命名 Oracle SQL 的列到行

> ID：14543001
> 
> 赞同：2
> 
> 时间：2013-01-27T00:09:27.677
> 
> 标签：sql, oracle, oracle10g, pivot

我有一张大桌子，如下所示：

```
section  term  percentageyr_1   percentageyr_2  percentageyr_3 ... percentageyr_25  
01          1         0.1              0.9           0.3                0.6     
01          2         0.3              0.5           0.01               0.3
01          3         0.6              0.4           0.2                0.6
01          4         0.3              0.5           0.7                0.14                  
01          5         0.4              0.2           0.6                0.6                           
            .
            .
            .
            .
            20

02          1         0.3              0.5           0.5                0.8
02          2         0.9              0.1           0                  0.6
.
.
.
20 
```

我需要创建一个看起来更像以下的新表：

```
year | section | term | percent
--------------------------------
1         01       1       0.1
2         01       1       0.9
3         01       1       0.3
.         01       1        .
20        01       1       0.6
1         01       2       0.3
2         01       2       0.5
.         01       2       0.01
.         01       2
20        01       2       0.3
...
1         01       20
2         01       20   
.         01       20
.         01       20
20        01       20
1         02       1
2         02       1    
.         02       1
.         02       1
.         02       1
20        02       1 
etc. 
```

我似乎有一些类似的示例使用 decode() 进行相反的转换，但我不确定列 -> 行方向以及如何更改转换中列的名称。

我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:09:26.173

Is your goal your output or are you trying to transform your existing table? If your goal is your output above, try something like this:

```
SELECT r.r year, t.section, t.term
FROM LargeTable t, (
    SELECT Rownum r
    FROM dual
    CONNECT By Rownum <= 20 ) r
ORDER BY t.section, t.term, r.r 
```

And here is the [SQL Fiddle](http://sqlfiddle.com/#!4/120f3/2).

--EDIT

Given your edits, you could still use the following (I only used a couple columns, but you should get the idea), and add a `CASE` statement for your percentages:

```
SELECT r.r year, t.section, t.term,
   CASE 
      WHEN r.r = 1 THEN percentageyr_1
      WHEN r.r = 2 THEN percentageyr_2
      WHEN r.r = 25 THEN percentageyr_25
   END as percent
FROM LargeTable t, (
    SELECT Rownum r
    FROM dual
    CONNECT BY Rownum <= 25 ) r
    ORDER BY t.section, t.term, r.r 
```

Here's the updated [fiddle](http://sqlfiddle.com/#!4/2f76b/1).

Good luck.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:06:29.553

这种类型的转换实际上是一个*unpivot*。Oracle 10g 没有 unpivot 函数，但您可以使用 a`UNION ALL`将数据从列转换为行：

```
select percentageyr_1 year, section, term
from yourtable
union all
select percentageyr_2 year, section, term
from yourtable
union all
select percentageyr_3 year, section, term
from yourtable
union all
select percentageyr_25 year, section, term
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/d1392/1)

编辑，根据您的更改，您应该能够使用以下内容来取消*透视*数据：

```
select 1 year, section, term, percentageyr_1 percent
from yourtable
union all
select 2 year, section, term, percentageyr_2
from yourtable
union all
select 3 year, section, term, percentageyr_3
from yourtable
union all
select 25 year, section, term, percentageyr_25
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/d1392/2)

# c - 结构中带有指针的函数名称可变性

> ID：14543003
> 
> 赞同：0
> 
> 时间：2013-01-27T00:09:51.087
> 
> 标签：c

以下代码片段中的指针函数声明允许我改变结构内每个函数的名称，对吗？这只是假设性的，因此名称还没有意义。

**头文件**

```
typedef struct
{
    bool (*enabled)(uint32_void);
    void (*start)(uint32_t);
    void (*stop)(uint32_t);
    bool (*expired)(void);
} battle_star_gallactica; 
```

**C 文件**

```
static bool Battle_v0_enabled (void) { ... }
static void Battle_v0_start (uint32_t) { ... }
static void Battle_v0_stop (uint32_t) { ... }
static bool Battle_v0_stop (void) { ... }

const battle_star_gallactica battle_v0 =
{
    enabled,
    start,
    stop,
    expired
};
... 
```

**一个示例使用**

```
battle_v0.start(1000); 
```

对于其他版本（例如 v1 或 v2 而不是 v0），将重复 C 文件片段。

这是如何运作的？

**编辑**

更正的代码：

**头文件**

```
typedef struct
{
    bool (*enabled)(uint32_void);
    void (*start)(uint32_t);
    void (*stop)(uint32_t);
    bool (*expired)(void);
} battle_star_gallactica;

extern const battle_star_gallactica battle_v0;
extern const battle_star_gallactica battle_v1;
... 
```

**C 文件**

```
static bool Battle_v0_enabled (void) { ... }
static void Battle_v0_start (uint32_t val) { ... }
static void Battle_v0_stop (uint32_t val) { ... }
static bool Battle_v0_expired (void) { ... }

const battle_star_gallactica battle_v0 =
{
    Battle_v0_enabled,
    Battle_v0_start,
    Battle_v0_stop,
    Battle_v0_expired
};
... 
```

**一个示例使用**

```
battle_v0.start(1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:18:52.720

是的。但是你有几个问题：

1) Battle_v0_stop 定义了两次 2) 初始化时`battle_v0`，您需要在值前加上前缀`Battle_v0_`

然后你可以这样做：

```
battle_v0.enabled() 
```

但我会有 currnet `battle star galactic`并使用它：

```
const battle_star_gallactica bsg = battle_v0;
bgs.enabled() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:46:44.780

您必须将目标函数分配给每个函数指针，例如

```
battle_v0.enabled = Battle_V0_enabled;
battle_v0.start   = Battle_V0_start;
// etc. 
```

或者

```
const battle_star_galactica battle_v0 = {
    Battle_V0_enabled,
    Battle_V0_start,
    Battle_V0_stop,
    Battle_V0_expired
}; 
```

然后就可以通过指针调用函数了：

```
battle_v0.start(1000);  // or battle_v0.(*start)(1000) 
```

将调用`Battle_V0_start`值为 1000 的函数。

请注意，函数签名（返回类型和参数的数量/类型）必须匹配；例如，您将函数指针声明为`start`接受 type 的参数`uint32_t`，但`Battle_V0_start`不接受任何参数。其中一个或另一个需要更改以使其匹配。

```
void Battle_V0_start(uint32_t val) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T00:17:43.713

您没有名为`enabled`、`start`等的函数。当用函数指针初始化一个对象时，传递一个指向实际函数名的指针（即`Battle_v0_start`）。也就是说，重要的是要注意您的类型不匹配。应该是`Battle_v0_start(uint32_t)`，不是`void`。

但是，是的，在正确初始化后，您将能够简单地调用`your_obj.your_struct_function_name(your_arguments, ...)`. 在您的情况下`battle_v0.start(1000)`将调用`Battle_v0_start`（如果您将此函数传递给指针）。您可以将其视为大多数其他指针类型。

# javascript - 如果在使用后将其删除，将方法附加到 String 是否安全？

> ID：14543007
> 
> 赞同：3
> 
> 时间：2013-01-27T00:10:28.300
> 
> 标签：javascript, prototype

我只是闯入 Node.js 和 CommonJS 模块，我正在*尝试*扩展 String 对象而不乱扔我的应用程序的其余部分，并提供一个干净的方法。

我想知道，是否可以将一个方法附加到全局 String 对象，然后附加到文件的底部，`delete`它可以吗？

例如：

```
// hasCondition.js

String.prototype.has = function(regex) {
    return regex.test(this);
};
exports.removeMethod = function () {
    delete String.prototype.has;
}; 
```

.

```
// someFile.js

var has = require('./hasCondition');
console.log(  "foo bar baz".has(/baz/)  );
has.removeMethod();
console.log(  "foo bar baz".has(/baz/)  );

>>> true
>>> Object foo bar baz has no method 'has' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:32:43.413

如果你不想弄乱字符串空间，你可以创建一个新的对象，从一个字符串原型。然后，为该对象分配`has`其原型中的方法。它不会传播回字符串。

这样，您就可以封装它。当然，您添加了另一个间接层，但它已经是一种[设计模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

如果您只是担心`has`以后被关在某个地方，那可能不会。即使您使用添加的`has`方法从 String 生成子对象，当它被删除时，它也会从任何继承中删除。

示例（让我们假设断言已定义）：

```
function Str1() {}
Str1.prototype = new String()
String.prototype.has = function(t) { /* code here */ }
var x = new Str1()
assert(x.has)

function Str2() {}
Str2.prototype = new Str1()

var y = new Str2()
assert(y.has)

delete String.prototype.has

assert(typeof x.has === "undefined")
assert(typeof y.has === "undefined") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:47:40.317

考虑这个案例：你创建了这个模块，它非常有用，所以你把它放在 NPM 上，很多人都在使用它。其中一些用户还认为扩展字符串对象对他们有用，他们还称他们的方法之一为“has”。

当他们使用您的模块时，它会用您的模块覆盖他们的“has”方法。不用担心，因为您会自己清理并删除您添加的方法。你知道接下来会发生什么......他们尝试使用他们的方法，突然它是未定义的！

如果您将其命名为非常晦涩的名称，那么您不太可能会遇到这种情况，但这仍然不是最好的方法。一般来说，最好尽量让你的代码尽可能地封装在模块中并避免泄漏。

在这种情况下，您可能希望创建自己的字符串构造函数，您可以使用该构造函数并使用自定义方法将其扩展到您想要的内容，而不必担心将您的增强功能泄漏到模块之外。

# google-app-engine - python后向分页

> ID：14543008
> 
> 赞同：1
> 
> 时间：2013-01-27T00:10:48.500
> 
> 标签：google-app-engine, app-engine-ndb

我试图根据 google appengine 文档的示例进行向后分页

[NDB 查询游标](https://developers.google.com/appengine/docs/python/ndb/queries#cursors)

我的问题集中在这个例子上：

```
# Set up.
q = Bar.query()
q_forward = q.order(Bar.key)
q_reverse = q.order(-Bar.key)

# Fetch a page going forward.
bars, cursor, more = q_forward.fetch_page(10)

# Fetch the same page going backward.
rev_cursor = cursor.reversed()
bars1, cursor1, more1 = q_reverse.fetch_page(10, start_cursor=rev_cursor) 
```

基于这个例子，我创建了我自己的版本（像这样）：

```
def get(self):
        #testing = Testing(t="a");
        #testing.put();
        #testing2 = Testing(t="b");
        #testing2.put();
        #testing3 = Testing(t="c");
        #testing3.put();
        #testing4 = Testing(t="d");
        #testing4.put();
        #testing5 = Testing(t="e");
        #testing5.put();

        cursor = ndb.Cursor.from_websafe_string(self.request.get("c"))

        if cursor:
                q = Testing.query()
                q_forward = q.order(Testing.key)
                q_reverse = q.order(-Testing.key)

                bars, next_cursor, more = q_forward.fetch_page(2, start_cursor=cursor)
                rev_cursor = cursor.reversed()
                bars1, prev_cursor, more1 = q_reverse.fetch_page(2, start_cursor=rev_cursor)

                self.response.write("<a href=\"?c="+prev_cursor.to_websafe_string()+"\">&laquo</a><br />")
        else:
                q = Testing.query()
                q_forward = q.order(Testing.key)
                q_reverse = q.order(-Testing.key)

                bars, next_cursor, more = q_forward.fetch_page(2)

        self.response.write('Hello world!<br />')

        for bar in bars:
                self.response.write(bar.t + "<br />")

        self.response.write("<a href=\"?c="+next_cursor.to_websafe_string()+"\">&raquo</a>") 
```

但我仍然不明白为什么，它不能完美地返回上一页......当我单击将第 1 页转发到第 2 页时：

第 1 页：a、b 第 2 页：c、d

但是当我向后点击时：

第 2 页：c、d 第 1 页：b、c（应为：a、b）

这让我很困惑，因为论坛上的某个人可以根据这个例子使它工作，没有人给出他们的示例代码......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:53:33.750

问题是您正在使用`c`来引用向后和向前光标。

因此，当您得到一个已经反转的向后光标时，您正在调用

```
rev_cursor = cursor.reversed() 
```

前

```
bars1, prev_cursor, more1 = q_reverse.fetch_page(2, start_cursor=rev_cursor) 
```

因此在开始查询之前光标开始指向另一个方向。

要对此进行更简单的测试，请定义相同的模型并预填充一些数据：

```
from google.appengine.ext import ndb
class Testing(ndb.Model):
  t = ndb.StringProperty()
ndb.put_multi([Testing(t='a'), Testing(t='b'), Testing(t='c')]) 
```

通过查询前两个元素获取游标：

```
>>> q_forward = Testing.query().order(Testing.t)
>>> result, forward_cursor, _ = q_forward.fetch_page(2)
>>> print [value.t for value in result]
[u'a', u'b'] 
```

**在反向**查询中使用该游标而不反转它

```
>>> reverse_cursor = forward_cursor.reversed()
>>> result, _, _ = q_reverse.fetch_page(2, start_cursor=reverse_cursor)
>>> print [value.t for value in result]
[u'b', u'a'] 
```

与这样做后的反向查询相比：

# c# - 应用运算符时的重载分辨率 | 到不同类型的枚举

> ID：14543012
> 
> 赞同：1
> 
> 时间：2013-01-27T00:11:16.807
> 
> 标签：c#, enums, overload-resolution

在阅读了最近的问题之后，[在另一个枚举声明中允许不同枚举类型之间的操作，但在其他地方不允许，](https://stackoverflow.com/questions/14541668/)我想出了这个例子：

```
 enum Alpha : long
    {
        X,
    }

    enum Beta : ulong
    {
        X,
    }

    enum Gamma : long
    {
        X = Alpha.X | Beta.X,   // problem?
    }

    enum Delta : ulong
    {
        X = Alpha.X | Beta.X,   // no problem?
    } 
```

编译结果：`Gamma`不会编译（*CS0266：无法将类型“ulong”隐式转换为“long”。存在显式转换（您是否缺少演员表？）*）。`Delta`编译愉快。

*这*难道不是 C# 语言规范所期望的吗？

`Alpha`（注意：如果我将要初始化的成员更改为负常量，例如`-1L`，那么既`Gamma`不会也`Delta`不会编译。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:48:34.677

是的，这是预期的，它不是特定于枚举的。您可以将其简化为：

```
long a = 1L | 1UL; // Cannot implicitly convert type 'ulong' to 'long'. An explicit conversion exists (are you missing a cast?)
ulong b = 1L | 1UL; 
```

C# 语言规范中的以下引用描述了它发生的原因。

> **6.1.9 隐式常量表达式转换**
> 
> 隐式常量表达式转换允许以下转换：
> 
> · 如果常量表达式的值在目标类型的范围内，则 int 类型的常量表达式（第 7.19 节）可以转换为 sbyte、byte、short、ushort、uint 或 ulong 类型。
> 
> · *long 类型的常量表达式可以转换为 ulong 类型，前提是常量表达式的值不是负数。*
> 
> **6.1.2 隐式数值转换**
> 
> 隐式数字转换是：
> 
> · 从 long 到 float、double 或 decimal。
> 
> · *从 ulong 到 float、double 或 decimal。*

换句话说，`Alpha.X`（如果基础值为正）可以（实际上是！）隐式转换为`ulong`. 但是`Alpha.X | Beta.X`is的结果`ulong`，根据规范，不能隐式转换为`long`.

但是，一旦将`Alpha.X`要初始化的 更改为负常量，例如`-1L`，那么根据上面的引用，它就不能再被隐式转换为`ulong`并且编译将失败并出现不同的错误：`Operator '|' cannot be applied to operands of type 'long' and 'ulong'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:35:12.650

是的，这是意料之中的，没有从 ulong 到任何整数类型的隐式转换。

一旦你告诉编译器你 long 是 -ve，你就给它足够的信息说你不想那样做。

就我个人而言，我会很高兴它对长时间感到不安 | ulong，但毫无疑问，一些 C 程序员影响了这个决定。:(

# javascript - 地理编码中的变量未定义，如何正确调用它们？

> ID：14543013
> 
> 赞同：0
> 
> 时间：2013-01-27T00:11:16.630
> 
> 标签：javascript, google-maps-api-3

我正在尝试学习 javascript 并使用 Google Maps API，但我似乎陷入了一个（希望如此）简单的问题。

我写了这个函数来获取地理编码坐标：

```
function codeAddress() {
    var st = document.getElementById('start').value;
    var dest = document.getElementById('end').value;

geocoder.geocode( { 'address': st}, function(results, status) {
 var startCoded = results[0].geometry.location;
    var startLng = results[0].geometry.location.lng();
    var startLat = results[0].geometry.location.lat();   
 document.getElementById("content1").value = startCoded;

});
    geocoder.geocode( { 'address': dest}, function(results, status) {
    var endCoded = results[0].geometry.location;
    var endLng = results[0].geometry.location.lng();
    var endLat = results[0].geometry.location.lat();        
    document.getElementById("content2").value = endCoded;
        if (status == google.maps.GeocoderStatus.OK) {
var lngSpan = startLng - endLat;  
var latSpan = startLat - endLng;
console.log(endCoded);
  }

});
    } 
```

但我收到此错误：ReferenceError: startLng is not defined

我知道这与我需要回调来阅读它们的事实有关，但我不知道如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:13:05.703

我认为这就是你声明变量的方式（它们是你的函数的本地而不是全局的）。尝试：

```
var startLng, startLat, endLng, endLat;
function codeAddress() {
    var st = document.getElementById('start').value;
    var dest = document.getElementById('end').value;

geocoder.geocode( { 'address': st}, function(results, status) {
 var startCoded = results[0].geometry.location;
    startLng = results[0].geometry.location.lng();
    startLat = results[0].geometry.location.lat();   
 document.getElementById("content1").value = startCoded;

});
    geocoder.geocode( { 'address': dest}, function(results, status) {
    var endCoded = results[0].geometry.location;
    endLng = results[0].geometry.location.lng();
    endLat = results[0].geometry.location.lat();        
    document.getElementById("content2").value = endCoded;
        if (status == google.maps.GeocoderStatus.OK) {
var lngSpan = startLng - endLat;  
var latSpan = startLat - endLng;
console.log(endCoded);
  }

});
    } 
```

# java - 解析 JSON 抛出异常

> ID：14543014
> 
> 赞同：0
> 
> 时间：2013-01-27T00:11:22.153
> 
> 标签：java, json, parsing

我正在尝试解析 JSON 以从中获取一些字段。下面是我的 JSON-

```
{
   "id": "100000224942080000",
   "name": "Tech Geeky",
   "first_name": "Tech",
   "last_name": "Geeky",
   "link": "https://www.facebook.com/tech.geeky",
   "username": "tech.geeky",
   "work": [
      {
         "employer": {
            "id": "1854993931353456",
            "name": "Tech"
         },
         "location": {
            "id": "1119482345542155151",
            "name": "Santa Cruz, California"
         },
         "position": {
            "id": "280794135283124256",
            "name": "Senior"
         },
         "start_date": "2012-01"
      }
   ],
   "education": [
      {
         "school": {
            "id": "131182196916370",
            "name": "Fatima School, Gonda"
         },
         "year": {
            "id": "113125125403208",
            "name": "2004"
         },
         "type": "High School"
      }
   ],
   "gender": "male"
} 
```

我需要从上面的 JSON中提取`id`, `name`, `first_name`, `last_name`, 。`gender`下面是我编写的程序，但它以某种方式抛出异常。我做错了什么？

```
public class JSONParser {

    private static final String URL = "https://graph.facebook.com/me?access_token=AAAG2HjMOAsEBAGBhjx2RqqLbOvnAZAxEPQ0X7ZC2JWY0YcQZDZDSSSAFTR";
    private static HashMap<String, String> output = null;

    public static void main(String[] args) throws Exception {

    StringBuilder builder = new StringBuilder();
    DefaultHttpClient httpclient = new DefaultHttpClient();
    output = new HashMap<String, String>();
    BufferedReader bufferedReader = null;
    try {
        HttpGet httpget = new HttpGet(URL);
        httpget.getRequestLine();
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        //System.out.println(response.getStatusLine());
        if (entity != null) {
        InputStream inputStream = entity.getContent();
        bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
        for (String line = null; (line = bufferedReader.readLine()) != null;) {
            builder.append(line).append("\n");
        }
        JSONObject jsonObject = new JSONObject(builder.toString());
        JSONObject info = jsonObject.getJSONObject("id");
        parseJSONObject(info, output);
        }
    } catch (Exception e) {

    } finally {
        try {
        bufferedReader.close();
        httpclient.getConnectionManager().shutdown();
        } catch (IOException e) {

        }
    }
    }

    private static HashMap<String, String> parseJSONObject(JSONObject json,
        HashMap<String, String> output) throws JSONException {

    Iterator<String> keys = json.keys();
    while (keys.hasNext()) {
        String key = keys.next();
        String val = null;
        try {
        JSONObject value = json.getJSONObject(key);
        parseJSONObject(value, output);
        } catch (Exception e) {
        val = json.getString(key);
        }
        if (val != null) {
        output.put(key, val);
        }
    }
    return output;
    }

} 
```

**例外：-**

```
org.json.JSONException: JSONObject["id"] is not a JSONObject. 
```

**注意：-** JSON 是正确的。在将 JSON 发布到此处之前，我对它进行了一些修改。因此，在此处复制粘贴可能出现问题。但是假设 JSON 是正确的.. 仍然会引发异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:21:44.190

您可以通过获取它们的数据类型值来获取字段，如下所示：

```
int id = jsonObject.getInt("id");
String name = jsonObject.getString("name");
String firstName = jsonObject.getString("first_name");
String lastName = jsonObject.getString("last_name");
String gender = jsonObject.getString("gender"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:13:08.083

文件末尾附近有一个尾随逗号：

```
"gender": "male",
----------------^ 
```

您可以在尝试解析之前使用[JSONLint](http://jsonlint.com/)来验证您的 JSON 是否有效。一些解析器可能有些松懈并原谅一些错误，但大多数都非常严格。

# python - 尝试运行简单的 PIL python 示例，无法将 jpeg 转换为浮点数

> ID：14543015
> 
> 赞同：6
> 
> 时间：2013-01-27T00:11:54.853
> 
> 标签：python, image, image-processing, python-imaging-library

所以我写了一个简单的python脚本

```
from PIL import Image
from pylab import *
im = array(Image.open('sample.jpg'))
imshow(im) 
```

我从 IDLE 得到这个错误

```
Traceback (most recent call last):
  File "/home/michael/Dropbox/OpenCV/greyscale.py", line 5, in <module>
    imshow(im)
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/pyplot.py", line 2722, in     imshow
   imlim=imlim, resample=resample, url=url, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/axes.py", line 7091, in imshow
im.set_data(X)
  File "/usr/local/lib/python2.7/dist-packages/matplotlib/image.py", line 418, in     set_data
    raise TypeError("Image data can not convert to float")
TypeError: Image data can not convert to float 
```

基本上说我不能将我的图像转换为浮动，任何人都知道我错过了什么

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-16T11:22:51.573

我知道这会很晚，但我想我应该回答以防万一其他人遇到同样的问题。我遇到了同样的问题，问题是我加载的图像在项目文件夹中不存在。所以你需要`sample.jpg`在使用它之前检查它是否存在并且它是否正确加载。

```
if os.path.isfile('sample.jpg'): im = array(Image.open('sample.jpg'))
if im == None or im.size == 0: 
   print 'Image loaded is empty'
   sys.exit(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:17:39.053

你所拥有的很接近。查看 imshow 文档，您需要传递图像或数据数组。

这应该有效：

```
from PIL import Image
from pylab import *
im = Image.open('sample.jpg')
imshow(im) 
```

这是 imshow() 所期待的：

> “X 可能是一个浮点数组、一个 uint8 数组或一个 PIL 图像。”

这里有更多细节：http:
[//matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.imshow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-27T15:21:27.870

尝试这个

```
>>> import matplotlib.pyplot as plt
>>> plt.imshow(im.reshape(im.shape[0], im.shape[1]), cmap=plt.cm.Greys) 
```

# qt-creator - QtCreator - 如何在 *.pro 文件中设置移动几个其他文件

> ID：14543016
> 
> 赞同：0
> 
> 时间：2013-01-27T00:12:08.063
> 
> 标签：qt-creator, qmake

我想用 QtCreator 做一个非常便携的项目。我只能编辑 *.pro 文件。*.pro.user 应该保持不变。环境默认编译到一个新目录。不幸的是，我也几乎没有其他文件要复制到那里。我要在 *.pro 文件中写什么来完成它？有什么很简单的吗？

如果我编写自己的 Makefile（或其他东西），我将失去与 QtCreator 的集成。这不是一个选择。

**编辑**：
它在某种程度上与这个问题重复：
[QMake - how to copy a file to the output](https://stackoverflow.com/questions/3984104/qmake-how-to-copy-a-file-to-the-output)

但是我不希望在 *.pro 文件中编写自定义脚本。我也不想使用平台特定的条件。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T14:26:56.527

查看 QMake 的[INSTALLS 变量](http://doc.qt.digia.com/4.7-snapshot/qmake-environment-reference.html#installs)。唯一的缺点是它需要你`make install`在`make`.

# html - 表格从 CSS 中间开始

> ID：14543017
> 
> 赞同：0
> 
> 时间：2013-01-27T00:12:21.887
> 
> 标签：html, css, html-table

我有一个小问题......这是我正在使用的页面 [http://www.laget.se/storvretensff/Page/179025](http://www.laget.se/storvretensff/Page/179025)但你可以看到它以空白几行开始然后我的代码开始。我想在大文本“LEDARE”之后直接提供我的信息。有人可以帮我弄这个吗？

```
<html><table width="300" border="1">
<tr> <td><div class="LedarInfo">
        <table style="width: 50" cellpadding="3" cellspacing="0">
<tr><th>Namn</th><td>Askin Ünsal</td></tr><tr><th>Position</th><td>Tränare</td></tr>      </table>
    </div> 

<div class='imagediv '><a class='fancybox' rel='single' title=' '  href='http://img.laget.se/2723013.jpg'><img class='profileImgThumb' src='http://img.laget.se/2723013.jpg' width="100" height="150"style='' /></a></div>
        </div></td> 

 <td><div class="LedarInfo">
        <table style="width: 50" cellpadding="3" cellspacing="0">
<tr><th>Namn</th><td>Burak Tütüncu </td></tr><tr><th>Position</th><td>Ass.Tränare</td></tr>        </table>
    </div> 
 <div class='imagediv ' ><a class='fancybox' rel='single' title=' ' href='http://img.laget.se/405720/2161962.jpg'><img class='profileImgThumb' src='http://img.laget.se/405720/2161962.jpg' width="100" height="150"style='' /></a></div>
        </div></td>
</tr>
<tr>

    <td><div class="LedarInfo">
        <table style="width: 50" cellpadding="3" cellspacing="0">
<tr><th>Namn</th><td>Aydin Ünsal </td></tr><tr><th>Position</th><td>Ass. Tränare </td></tr>       </table>
    </div> 
 <div class='imagediv ' ><a class='fancybox' rel='single' title=' ' href='http://img.laget.se/405720/2161962.jpg'><img class='profileImgThumb' src='http://img.laget.se/405720/2161962.jpg' width="100" height="150"style='' /></a></div>
        </div></td>
</tr>
</table>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:18:28.620

删除`<br>`下面的标签，在 div`<div class="pageContent">`

# groovy - 将方法添加到闭包

> ID：14543018
> 
> 赞同：2
> 
> 时间：2013-01-27T00:12:36.243
> 
> 标签：groovy

我已经向`Closure`'s添加了一个方法`metaClass`，但我似乎无法获得正在调用该方法的实例的引用。在此示例中，`delegate`设置为脚本实例，而不是`f`我正在调用的闭包`fixedPoint`：

```
Closure.metaClass.fixedPoint = {
    while (it != (it = delegate.call(it))) {}
    it
}
def f = { Math.round(it / 2.0) }
println f.fixedPoint(9) 
```

给

```
捕获：groovy.lang.MissingMethodException：没有方法签名：test.call() 适用于参数类型：(java.lang.Integer) 值：[9]
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:18:45.693

解释：如果你这样做了，`Closure.metaClass.fixedPoint = ...`那么类 Closure 将获得一个新的 MetaClass，即 ExpandoMetaClass。并且在下一步中添加该方法。现在闭包的默认元类是 ClosureMetaClass，它既不允许你添加方法，也不太关心其他元类。当你这样做时`def f = { Math.round(it / 2.0) }`，你实际上创建了一个新类（及其实例）。它扩展了闭包，但不是闭包本身。这个类默认将 ClosureMetaClass 作为元类，完全忽略了你对 Closure 的元类所做的事情。

解决方案：您必须强制使用 ExpandoMetaClass，因此代码的第一行（在分配 f 之前）应该是`ExpandoMetaClass.enableGlobally()`：

```
ExpandoMetaClass.enableGlobally()
Closure.metaClass.fixedPoint = {     
  while (it != (it = delegate.call(it))) {}     
  it
}

def f = { Math.round(it / 2.0) } 
assert f.fixedPoint(9) == 1 
```

至少对我来说，这段代码毫无例外地运行......

旁注：存储在元类中以形成方法的闭包通常是您提供的内容的克隆。然后元类将在副本上设置委托。例如，检查 f 的委托`println f.@delegate`不会向您显示结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T07:55:56.113

问题是，`Closure.metaclass`并且`{ -> }.metaClass`是不同的实例。

```
println (Closure.metaClass)
println ({ -> }.metaClass) 
```

产量：

```
org.codehaus.groovy.runtime.HandleMetaClass@12f5f0d
org.codehaus.groovy.runtime.metaclass.ClosureMetaClass@192d8d6 
```

# ruby-on-rails-3 - 模型方法在浏览器中有效，但在 FactoryGirl Rails 中无效

> ID：14543030
> 
> 赞同：0
> 
> 时间：2013-01-27T00:13:44.593
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

以下方法在浏览器中运行良好。它所做的所有事情都需要所有关联的交易，并将它们的总金额加在一起。

### 钱包.rb

```
has_many :transactions

# Sums the transaction amounts together
def total_spent
  transactions.map(&:amount).sum
end 
```

### 工厂.rb

```
FactoryGirl.define do
    # Create a wallet
    factory :wallet do
        title 'My wallet'
    end

    # Create a single transaction
    factory :transaction do
        association :wallet
        title 'My transaction'
        amount 15
    end
end 
```

### wallet_spec.rb

```
it "should get the sum of the transactions" do
  transaction = FactoryGirl.create(:transaction)
  wallet = transaction.wallet
  wallet.total_spent.should eq 15
end 
```

测试一直失败。我收到 0，但希望 15 是正确的数量。同样，这在浏览器中运行良好！

运行 Rails 3.2，FactoryGirl 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:36:07.950

`FactoryGirl`不识别`association`为某种功能。因此，您在上面所做的是创建一个包含`transaction.association`等于的属性的事务`:wallet`。

如果您只是简单地声明它，`wallet`那么您的事务将使用通过工厂`Wallet`创建的关联来构建。`Wallet`

但是在定义工厂时需要小心，不要在每个方向上建立关联，因为您很容易陷入无限循环。

如果您需要更多复习，这里是 FactoryGirl 的文档：

[https://github.com/thoughtbot/factory_girl/wiki/Usage](https://github.com/thoughtbot/factory_girl/wiki/Usage)

至于您的问题，我建议不要依赖 FactoryGirl 中定义的值来进行测试。工厂可以更快地定义默认值以通过某些验证检查。不过，您不应该真的根据这些默认值进行测试。我会推荐类似下面的测试：

```
it "should get the sum of the transactions" do
  wallet = FactoryGirl.create(:wallet)
  wallet.transactions << FactoryGirl.create(:transaction, amount: 15)
  wallet.transactions << FactoryGirl.create(:transaction, amount: 10)
  wallet.total_spent.should eq 25
end 
```

我希望这会有所帮助。

# java - 如何缩放词云？

> ID：14543034
> 
> 赞同：0
> 
> 时间：2013-01-27T00:14:05.393
> 
> 标签：java, size, scale, font-size, batik

我正在研究词云生成。

我的话应该出现在 (0, 0, w, h) 的矩形中，其中 w 是最大宽度，h 是最大高度。

我已经有了一个生成词云的算法，但有时这些词超出了矩形的边界，或者有太多未使用的空间。词云的真实边界是 (0, 0, maxX, maxY)。

我的缩放想法是这样的：

```
if (maxX > w) then
    if (maxY > h) then
        if (maxX / w) > (maxY / h) then
            scale(w / maxX)
        else
            scale(h / maxY)
        end if
    else
        scale(w / maxX)
    end if
else if (maxY > h) then
    scale(h / maxY)
else if ((maxX < w) and (maxY < h)) then
    if (maxX / w) > (maxY / h) then
        scale(w / maxX)
    else
        scale(h / maxY)
    end if
end if 
```

假设我在 (x1, y1, x2, y2) 的矩形中有一个单词。如果我调用 scale(1.5)，那么矩形的新位置将是 (1.5 * x1, 1.5 * y1, 1.5 * x2, 1.5 * y2)。这是非常好的和简单的，但我有一个问题：

一个词以前的大小为 S1，位于坐标 (x1, y1, x2, y2) 上。如果我想按 r 缩放它，那么新坐标将为 (r * x1, r * y1, r * x2, r * y2)。问题：如果我知道这个词会 r * 更大/更小，那么 S2 大小的值是多少，这将是在以 r 的比率缩放后单词的新大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:21:49.167

好的，我已经弄清楚了这一点。此函数计算比例：

```
public static void scale(double rate)
{
    for (int keyIndex = 0; keyIndex < keys.length; keyIndex++)
    {
        hashMap.get(keys[keyIndex]).setSize((int)(Math.sqrt(Math.pow(hashMap.get(keys[keyIndex]).getSize(), 2) * (rate * rate))));
    }
} 
```

当然，单词的位置也必须相应地更新。

# javascript - jquery 旋钮，动画和增量 alpha

> ID：14543036
> 
> 赞同：2
> 
> 时间：2013-01-27T00:14:10.607
> 
> 标签：javascript, jquery, html5-canvas

我正在使用带有百分比计的 jquery[旋钮](http://anthonyterrien.com/knob/)`.animate`，它工作得很好但是我想将旋钮的画布描边样式的不透明度设置为 alpha 值，如下所示：0% = 0.1, 100% = 1 并有这个增量动画，因此笔画将从 alpha 0 开始并在 0.7 结束（在我的示例中）

我对画布只有粗略的了解，但查看[旋钮类](https://github.com/aterrien/jQuery-Knob/blob/master/js/jquery.knob.js)，我发现 strokestyle 设置在 ln 636 上：

```
c.strokeStyle = r ? this.o.fgColor : this.fgColor ; 
```

我知道我可以将其设置为我已经测试并工作的 rgba 值，我怎样才能按照描述增加 alpha 值或者有更好的解决方案？

[jsfiddle](http://jsfiddle.net/bG478/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:55:25.280

您可以使用[pusher.color](http://tech.pusherhq.com/libraries/color)之类的库来获取颜色并在 draw() 函数或绘图钩子中更改其 alpha：

```
var color = pusher.color(current_color);
color.alpha(angle / 100); 
```

您现在可以通过以下方式提取修改后的颜色：

```
color.html() 
```

这是（我认为）所需行为的更新小提琴：http: [//jsfiddle.net/bG478/2/](http://jsfiddle.net/bG478/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:27:45.723

使用`rgba`不适合你吗？

```
var myColor = 'rgba(41,100,159,.5)'; 
```

[http://jsfiddle.net/ExplosionPIlls/bG478/1/](http://jsfiddle.net/ExplosionPIlls/bG478/1/)

# android - 将 xmpp_login 扩展权限添加到 facebook sdk

> ID：14543041
> 
> 赞同：0
> 
> 时间：2013-01-27T00:14:26.083
> 
> 标签：android

我正在使用以下代码允许用户登录并使用 facebook 进行身份验证，这给了我 access_token。如何将 xmpp_login 扩展权限添加到我的 access_token 请求中。

在[这个 Facebook](https://developers.facebook.com/docs/chat/#platauth)页面上它说“为了使用这种机制进行连接，用户必须首先登录到您的应用程序并授予 xmpp_login 扩展权限。按照客户端流程为具有 xmpp_login 扩展权限的用户获取有效的 access_token。 "

```
 Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
            Session session = Session.getActiveSession();
            if (session == null) {
                if (savedInstanceState != null) {
                    session = Session.restoreSession(this, null, statusCallback,
                            savedInstanceState);
                }
                if (session == null) {
                    session = new Session(this);
                }
                Session.setActiveSession(session);
                if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
                    session.openForRead(new Session.OpenRequest(this)
                            .setCallback(statusCallback));
                }
            }
            updateView();

@Override
    public void onStart() {
        super.onStart();
        Session.getActiveSession().addCallback(statusCallback);
    }

    @Override
    public void onStop() {
        super.onStop();
        Session.getActiveSession().removeCallback(statusCallback);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode,
                resultCode, data);
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        Session session = Session.getActiveSession();
        Session.saveSession(session, outState);
    }

    private void updateView() {
        Session session = Session.getActiveSession();
        Log.i("session log", session.toString());
        if (session.isOpened()) {
            TextView welcome = (TextView) findViewById(R.id.welcome);
            welcome.setText("Hello !");
        } else {

            doLogin();
        }
    }

    private void doLogin() {
        Session session = Session.getActiveSession();
        if (!session.isOpened() && !session.isClosed()) {
            session.openForRead(new Session.OpenRequest(this)
                    .setCallback(statusCallback));
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
    }

    private class SessionStatusCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state,
                Exception exception) {
            updateView();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:57:48.780

如果其他人遇到此问题，您需要在启动会话时通过替换此行来包含正确的权限：

```
session.openForRead(new Session.OpenRequest(this)
                            .setCallback(statusCallback)); 
```

和：

```
session.openForRead(new Session.OpenRequest(this).setPermissions(Arrays.asList("permission1", "permission2", "etc")).setCallback(statusCallback)); 
```

可以在[此处找到权限列表](https://developers.facebook.com/docs/reference/login/extended-permissions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T15:33:23.343

`xmpp_login`自 2015 年 4 月 30 日起已弃用。更多信息请参见下面的链接。

[https://developers.facebook.com/docs/chat#platauth](https://developers.facebook.com/docs/chat#platauth)

# linux - 用于非阻塞、面向行的套接字 I/O 的 C++ 库？

> ID：14543042
> 
> 赞同：3
> 
> 时间：2013-01-27T00:14:38.483
> 
> 标签：linux, sockets, select, nonblocking, epoll

我将编写一个**Linux**客户端，它将与五个（左右）服务器建立套接字连接。客户端将向每个人发送一个“line”（一个字符串后跟“\n”），并从每个人那里收到一条回复。

我想在客户端使用**select()**或**epoll()**；**但是，这是基于 TCP 和基于流的，当select()**弹出时，我不能保证系统缓冲区中有整个“行” 。我正在寻找的是一个提供类似于**epoll()**和**sysread()**的 API 的库，但它的工作基础是整**行**数据被缓冲并准备好读取。

我很惊讶在我的互联网搜索中找不到这样的东西——我原以为这是一个相当普遍的需求。（也许我没有正确地表达这个问题。）写起来似乎不太难，但我怀疑开源解决方案会更防弹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:42:07.077

看看 boost [asio](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)。特别是它有一个[`async_read_until`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/async_read_until.html)功能

> 启动异步操作，将数据读入 streambuf，直到它包含分隔符、匹配正则表达式或函数对象指示匹配。

如果您使用的是 http，我还建议您使用支持[异步客户端](http://cpp-netlib.org/0.9.4/reference/http_client.html)[的 cpp-netlib](http://cpp-netlib.org/0.9.4/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:14:40.110

My [MUSCLE networking library](http://freecode.com/projects/muscle) provides this (via the [PlainTextMessageIOGateway](https://public.msli.com/lcs/muscle/html/classmuscle_1_1PlainTextMessageIOGateway.html) class); it works well in my projects and it's BSD licensed so you're free to use it if you want. The included [portableplaintextclient](https://public.msli.com/lcs/muscle/muscle/test/portableplaintextclient.cpp) program in the tests subfolder is a very simple (94-line) example of how to use it. The other respondents are right, though, that it's not too difficult to just write the necessary buffering logic yourself, either; but if you want a pre-written/pre-debugged solution, this is one.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T00:16:58.807

哪有这回事。每个连接都需要一个缓冲区，并且需要按照 select()/poll()/epoll() 结果的指示读取它，直到有一行。这些 API 不像您那样关心行终止符。

# vb.net - 添加一个包含所有四个数学程序的多播委托？

> ID：14543045
> 
> 赞同：3
> 
> 时间：2013-01-27T00:14:56.797
> 
> 标签：vb.net, delegates, invoke, multicast

我必须为我的编程课编写如下所示的小型 vb.net 控制台程序。现在我必须这样做：

> 添加一个包含所有四个过程的多播委托。使用 DynamicInvoke() 方法调用过程。

我该怎么做？我尝试了我能想到的一切，但似乎无法弄清楚。这是我的代码。随意做任何你想做的事。任何帮助和解释表示赞赏。谢谢！

```
Imports System
Module Module1
Dim a, b, result as Integer
Private Delegate Sub myDelegate()
Sub Main()
    Dim ask As myDelegate
    ask = New myDelegate(AddressOf Ask1)
    ask()
    Dim Multiply1 As myDelegate
    Multiply1 = New myDelegate(AddressOf Multiply)
    Multiply1()
    Dim Subtraction1 As myDelegate
    Subtraction1 = New myDelegate(AddressOf Subtraction)
    Subtraction1()
    Dim Addition1 As myDelegate
    Addition1 = New myDelegate(AddressOf Addition)
    Addition1()
    Dim Division1 As myDelegate
    Division1 = New myDelegate(AddressOf Division)
    Division1()
    Console.ReadLine()
End Sub
Sub Ask1()
    Console.WriteLine("Enter First Number")
    a = Console.ReadLine()
    Console.WriteLine("Enter Second Number")
    b = Console.ReadLine()
End Sub
Sub Addition()
    Result = a + b
    Console.WriteLine("Added: " & Result)
End Sub
Sub Subtraction()
    Result = a - b
    Console.WriteLine("Subtracted: " & Result)
End Sub
Sub Multiply()
    result = a * b
    Console.WriteLine("Multiplied: " & Result)
End Sub
Sub Division()
    Console.WriteLine("Divided: " & a / b)
End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:37:46.423

像这样的东西？...在末尾添加`Main`：

```
 Dim dMultiCast As myDelegate
    dMultiCast = [Delegate].Combine(New myDelegate(AddressOf Addition),
                                    New myDelegate(AddressOf Subtraction),
                                    New myDelegate(AddressOf Division),
                                    New myDelegate(AddressOf Multiply))
    dMultiCast.DynamicInvoke()

    Console.ReadLine()
End Sub 
```

# jquery - Jquery JSON 包装所有图像

> ID：14543047
> 
> 赞同：0
> 
> 时间：2013-01-27T00:15:05.700
> 
> 标签：jquery, dom

我有这段代码使用 Jquery Json 成功地从 Behance 中提取图像：

```
$('a.link').live('click', function () {
    h = window.location.hash.replace('#', '');
    $.getJSON("http://www.behance.net/v2/projects/" + h + "?api_key=" + api + "&callback=?", function (data) {
        var project_data = "";
        for (var i = 0; i < data.project.modules.length; i++) {
            if (data.project.modules[i].type == "image") { 
                project_data += '<img src="' + data.project.modules[i].src + '" />';
            }
            if (data.project.modules[i].type == "text") {
                project_data += '<p>' + data.project.modules[i].text + '</p>';
            }
        };

        $('.portfolio-details h3').html(data.project.name);
        $('.portfolio-details div').html(project_data);
        $('.portfolio-details').fadeIn(6000);

    });
}); 
```

他们正在拉入页面，目前显示为单独的图像。但是我如何将所有图像包装在这段代码中以制作幻灯片？每个图像文本代表需要添加图像的位置

```
<div id="myCarousel" class="carousel slide">
<div class="carousel-inner">
<div class="item"> each image </div>
<div class="item"> each image </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:19:00.230

我没有`.portfolio-details`在你的 html 中看到，所以我假设它是`.carousel-inner`：

```
for (var i = 0; i < data.project.modules.length; i++) {
        ...
    $(".portfolio-details div").eq(i).html(project_data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:21:17.647

为什么不能将所需的 html 添加到`var project_data = "";`变量中？

```
var project_data = '<div id="myCarousel" class="carousel slide"><div class="carousel-inner">';

// Loop goes here...
project_data += '<div class="item"><img src="' + data.project.modules[i].src + '"> </div>';
// more code here
// end of loop

project_data += '</div></div>'; 
```

**编辑：** 这是一个简单的方法来解决这个问题。

```
(function($) {
    var user = 'userNameGoesHere',
    api = 'apiKeyGoesHere', 
    project_str = "", 
    i = 0;

    var project_images, carousel;

    for(i; i <= 3; i += 1) {
        $.getJSON("http://www.behance.net/v2/users/" + user + "/projects?api_key=" + api + "&callback=?&page=" + i, function (data) {
            if ($.type(data.projects) === 'array') {
                $.each(data.projects, function(i, obj) {
                    project_str += '<a class="tips more-info link" data-placement="bottom" href="#' + obj.id + '">';
                        project_str += '<div class="span3 portfolioitem">';
                            project_str += '<img src="' + obj.covers['404'] + '">';
                            project_str += '<div class="portfolioitem-hoverinfo"> <h3>' + obj.name + '</h3> </div>';
                        project_str += '</div>';
                    project_str += '</a>';
                });
            }

            $('#portfolio-items').append(project_str);
        });
    }

    $('a.link').live('click', function () {
        var h = window.location.hash.replace('#', '');

        $.getJSON("http://www.behance.net/v2/projects/" + h + "?api_key=" + api + "&callback=?", function (data) {
            var project_data = "";

            // "data.project.modules" here throws an error on the first click... not sure why
            for (var i = 0; i < data.project.modules.length; i++) {
                if (data.project.modules[i].type == "image") { 
                    project_data += '<img src="' + data.project.modules[i].src + '">';
                }

                if (data.project.modules[i].type == "text") {
                    project_data += '<p>' + data.project.modules[i].text + '</p>';
                }
            }

            $('.portfolio-details h3').html(data.project.name);
            $('.portfolio-details div').html(project_data);
            $('.portfolio-details').fadeIn(6000);

            project_images = $('.portfolio-details').find('img');
            carousel = '<div id="myCarousel" class="carousel slide"> <div class="carousel-inner">';

            $.each(project_images, function(i, img) {
                carousel += '<div class="item"> <img src="' + img.src + '"> </div>';
            });

            carousel += "</div></div>";

            // Do something with the carousel - append somewhere or something
            $(document.body).prepend(carousel);
        });
    });
}(jQuery)); 
```

# php - 如何获得包含猫、子猫和 2 个表的条目的总和

> ID：14543048
> 
> 赞同：1
> 
> 时间：2013-01-27T00:15:13.677
> 
> 标签：php, mysql

`table1`：

```
catid   level   entries
   57       1         0
   58       2         5
   59       2         4
   84       1         0 
```

`table2`：

```
 id  parent      type
   58      57       cat
   59      57       cat 
```

我想获取`SUM`子类别条目并将它们添加到父类别条目字段。在第一个表中，结果应该是 9 在`catid`哪里`57`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:31:33.513

试试这个：

```
select a.*, b.sum_subcat from table1 a
inner join 
(
  SELECT t2.parent, sum(entries) sum_subcat
  FROM table1 t1 inner join table2 t2 
  on t1.catid = t2.id 
  group by t2.parent
)b on a.catid = b.parent
where a.catid = 57; 
```

[SQL 演示在这里](http://sqlfiddle.com/#!2/cf975/8)

# jquery - scrollpath.js 隐藏内容

> ID：14543049
> 
> 赞同：0
> 
> 时间：2013-01-27T00:15:14.583
> 
> 标签：jquery, scroll

我之前发布了另一个问题，但由于我没有得到答案，我想我会问一个关于我遇到的不同问题的问题：

我正在尝试使用 jQuery 插件：ScrollPath。我认为让我的页面更具交互性会很有趣和有趣（它将成为一个投资组合页面。）无论如何，我已经滚动并且一切都在我创建的所需路径中工作，但我遇到了问题一旦浏览器屏幕开始变得太小，它的外观。

在我的 13 英寸 macbook pro 上，该网站看起来很棒，并且没有删减任何内容。在比我更大的屏幕上，它显示的内容更多，但看起来仍然不错。

在比我的 macbook 更低的分辨率和/或更小的屏幕上，由于插件“移动到”的方式并专注于滚动到的对象，事情开始变得不可见。

这是插件的演示站点：http: [//joelb.me/scrollpath/](http://joelb.me/scrollpath/)

以下是该网站对手机/平板电脑/等的响应测试的外观：[http ://res.ponsive.com/?resize=joelb.me%2Fscrollpath%2F&iphone=on&ipad=on&android=on](http://res.ponsive.com/?resize=joelb.me%2Fscrollpath%2F&iphone=on&ipad=on&android=on)

如您所见，该插件似乎限制了您查看内容的能力。

我会发布一个我正在使用此插件创建的网站的示例，但我宁愿暂时不向所有人展示我的东西。我认为通过发布上面的两个示例可以理解我的观点。

有没有办法解决这个问题？有没有更好的插件或方法来实现这种有趣的滚动路径效果，而不会失去在较小视口上查看内容的能力？

谢谢，如果你能帮忙！（我希望我没有说太多。）

# php - php中的foreach复选框POST

> ID：14543050
> 
> 赞同：4
> 
> 时间：2013-01-27T00:15:19.467
> 
> 标签：php, post, checkbox

基本上我的问题如下，我如何在 PHP 中执行 $_POST 请求时选择“已检查”复选框，目前我的复选框正在执行如下所示的数组。

```
<input type="checkbox" value="1" name="checkbox[]">
<input type="checkbox" value="2" name="checkbox[]">
<input type="checkbox" value="2" name="checkbox[]">
<input type="checkbox" value="3" name="checkbox[]"> 
```

我希望能够做这样的事情

```
foreach(CHECKED CHECKBOX as CHECKBOX) {
   echo CHECKBOX VALUE;
} 
```

我试过做类似的事情，它没有回应任何东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T00:18:18.387

```
foreach($_POST['checkbox'] as $value) {

} 
```

请注意，*只有*在至少一个复选框被选中时才会存在`$_POST['checkbox']`。因此，您**必须**在该循环之前添加一个检查。最简单的方法是这样的：***`isset($_POST['checkbox'])`***

 ***```
$checkboxes = isset($_POST['checkbox']) ? $_POST['checkbox'] : array();
foreach($checkboxes as $value) {
    // here you can use $value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:19:04.843

这类题型印刷很容易理解`$_POST`：`var_dump($_POST);`。您将看到 PHP 在数字数组中接收选中复选框的值。

```
foreach ( $_POST['checkbox'] as $value ) {
    echo $value;
} 
```***

# c# - 在这个例子中可以消除类型参数的重复吗？

> ID：14543052
> 
> 赞同：3
> 
> 时间：2013-01-27T00:15:53.593
> 
> 标签：c#, mvp, type-parameter

我有一个 MVP 的实现，用于域模型中的项目列表。

我的问题通常是如何（或我可以）摆脱具体 View 和 Presenter 中类型参数的重复？

我倾向于认为我遇到了限制，必须忍受重复或重新设计课程。另一种选择是我遗漏了一些明显的东西。无论如何，这就是我在这里问的原因。

具体来说，如果您有：

```
interface IA<T2, T3> { }
class C<T1, T2, T3> where T1 : IA<T2, T3> 
```

我可以通过编译来推断类型参数 T2 和 T3，结果如下：

```
interface IB : IA<int, string>
class D : C<IB> { } // can't do this 
```

这编译。重复的参数是`Note, string`和`Attachment, string`。

```
// Abstract View
public interface IView<TItem, TKey>
{
   void Fill(TItem[] items);
   event SelectEvent<TKey> SelectionChanged;
   event MessageEvent Add;
}

// Event Delegates
public delegate void SelectEvent<TKey>(TKey selectedValue);
public delegate bool MessageEvent();

// Model Entities
public class Note { }
public class Attachment { }

// Abstract Presenter
public abstract class Presenter<TView, TItem, TKey> where TView : IView<TItem, TKey>
{
   protected TKey SelectedValue { get; private set; }
   protected TView View { get; set; }
   public Presenter(TView view)
   {
       View = (TView)view;
       View.SelectionChanged += OnSelectionChangedInternal;
       View.Add += OnAdd;
   }
   void OnSelectionChangedInternal(TKey selectedValue) {
       this.SelectedValue = selectedValue;
       OnSelectionChanged(selectedValue);
   }
   protected abstract void OnSelectionChanged(TKey selectedVaule);
   protected abstract bool OnAdd();
}

// Concrete Views
public interface INotes  : IView<Note, string> {  }
public interface IAttachments : IView<Attachment, string> { }

// Concrete Presenters
public class NotesPresenter : Presenter<INotes, Note, string> { 
   public NotesPresenter(INotes view)  : base(view) { }
   protected override void OnSelectionChanged(string publisherName) { }
   protected override bool OnAdd() { return false; }
}
public class AttachmentsPresenter : Presenter<IAttachments, Attachment, string> {
   public AttachmentsPresenter(IAttachments view) : base(view) { }
   protected override void OnSelectionChanged(string publisherName) { }
   protected override bool OnAdd() { return false; }
} 
```

![在此处输入图像描述](../Images/6ae4120d330ae5713a98728e9de0e6cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:37:33.797

对您的演示者稍作改动。而是推断您的观点。由于您的具体视图实现了正确的接口，因此它可以工作。请参阅下面的代码。

```
// Abstract View
public interface IView<TItem, TKey>
{
    void Fill(TItem[] items);
    event SelectEvent<TKey> SelectionChanged;
    event MessageEvent Add;
}

// Event Delegates
public delegate void SelectEvent<TKey>(TKey selectedValue);
public delegate bool MessageEvent();

// Model Entities
public class Note { }
public class Attachment { }

// Abstract Presenter
public abstract class Presenter<TItem, TKey>
{
    protected TKey SelectedValue { get; private set; }
    protected IView<TItem, TKey> View { get; set; }
    public Presenter(IView<TItem, TKey> view)
    {
        View = view;
        View.SelectionChanged += OnSelectionChangedInternal;
        View.Add += OnAdd;
    }
    void OnSelectionChangedInternal(TKey selectedValue)
    {
        this.SelectedValue = selectedValue;
        OnSelectionChanged(selectedValue);
    }
    protected abstract void OnSelectionChanged(TKey selectedVaule);
    protected abstract bool OnAdd();
}

// Concrete Views
public interface INotes : IView<Note, string> { }
public interface IAttachments : IView<Attachment, string> { }

// Concrete Presenters
public class NotesPresenter : Presenter<Note, string>
{
    public NotesPresenter(INotes view) : base(view) { }
    protected override void OnSelectionChanged(string publisherName) { }
    protected override bool OnAdd() { return false; }
}

public class AttachmentsPresenter : Presenter<Attachment, string>
{
    public AttachmentsPresenter(IAttachments view) : base(view) { }
    protected override void OnSelectionChanged(string publisherName) { }
    protected override bool OnAdd() { return false; }
} 
```

# html - chrome 记得 html/data 吗？

> ID：14543055
> 
> 赞同：3
> 
> 时间：2013-01-27T00:16:02.680
> 
> 标签：html, forms, google-chrome, input

使用 Firefox，如果我修改 DOM 并离开页面，我可以回击，一切都会恢复原样，这很好。当我尝试使用 chrome 时，它​​完全忘记了 dom。我特别想记住用户在使用时选择的文件

```
<input type="file" name="somename" multiple> 
```

我如何让 chrome 记住它，这样后退/前进不会重置表单？

# java - Java Jackson 生成 Json 但不生成 XML

> ID：14543056
> 
> 赞同：0
> 
> 时间：2013-01-27T00:16:25.943
> 
> 标签：java, jackson

我正在用 Java 开发一个程序，我正在使用 Jackson 输出 XML 和 JSON。目前，当我以 XML 输出而不是 JSON 输出时出现错误。

错误是以下[错误消息](http://pastebin.com/hUmrTb4X)

我试图输出的类是[这个，里面有一个](http://pastebin.com/Aq1idqk6)[这个](http://pastebin.com/tQ2R6S4i)实例作为数据。当我请求 JSON 时，我有[这个输出......](http://pastebin.com/fkh504Qi)

```
Error Message
    Jan 27, 2013 12:02:55 AM com.sun.jersey.spi.container.ContainerResponse logException
SEVERE: Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: javax.xml.bind.MarshalException
 - with linked exception:
[com.sun.istack.internal.SAXException2: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.
    javax.xml.bind.JAXBException: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.]
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:159)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:306)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1448)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1360)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1350)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:716)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[com.sun.istack.internal.SAXException2: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.
javax.xml.bind.JAXBException: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.]
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:311)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:236)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:95)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:179)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:157)
    ... 27 more
Caused by: com.sun.istack.internal.SAXException2: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.
javax.xml.bind.JAXBException: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:235)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:250)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:642)
    at com.sun.xml.internal.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:143)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:343)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:582)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:325)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:483)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:308)
    ... 31 more
Caused by: javax.xml.bind.JAXBException: class pt.eoliveira.appmanager.dao.Users nor any of its super class is known to this context.
    at com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:573)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:637)
    ... 37 more 
```

消息包装器

```
package pt.eoliveira.appmanager.wrappers;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name = "message")
public class Message {

    private int error = 0;
    private String errorMessage = "";
    private Object data;

    public Message() {
    }

    public Message(int error, String errorMessage) {
        this.error = error;
        this.errorMessage = errorMessage;
    }

    public Message(Object data) {
        this.data = data;
    }

    public Message setData(Object data) {
        this.data = data;
        return this;
    }

    public Message setError(int error, String errorMessage) {
        this.error = error;
        this.errorMessage = errorMessage;
        return this;
    }

    public int getError() {
        return error;
    }

    public String getErroMessage() {
        return errorMessage;
    }

    public Object getData() {
        return data;
    }
} 
```

进入数据对象的类

```
package pt.eoliveira.appmanager.dao;

import java.io.Serializable;
import java.security.NoSuchAlgorithmException;
import java.util.Collection;
import javax.persistence.Basic;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.Table;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;
import org.codehaus.jackson.annotate.JsonIgnore;
import pt.eoliveira.appmanager.utils.MySqlTools;

@Entity
@Table(name = "users")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Users.findAll", query = "SELECT u FROM Users u"),
    @NamedQuery(name = "Users.findByUserId", query = "SELECT u FROM Users u WHERE u.userId = :userId"),
    @NamedQuery(name = "Users.findByUsername", query = "SELECT u FROM Users u WHERE u.username = :username"),
    @NamedQuery(name = "Users.findByPassword", query = "SELECT u FROM Users u WHERE u.password = :password"),
    @NamedQuery(name = "Users.findByEmail", query = "SELECT u FROM Users u WHERE u.email = :email"),
    @NamedQuery(name = "Users.findByPermissions", query = "SELECT u FROM Users u WHERE u.permissions = :permissions")
})

public class Users implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "user_id")
    private Integer userId;

    @Basic(optional = false)
    @Column(name = "username")
    private String username;

    @Basic(optional = false)
    @Column(name = "password")
    @XmlTransient
    @JsonIgnore
    private String password;

    @Basic(optional = false)
    @Column(name = "email")
    private String email;

    @Basic(optional = false)
    @Column(name = "permissions")
    private int permissions;

    @OneToOne(mappedBy = "owner")
    private Sessions sessions;

    @JoinColumn(name = "country", referencedColumnName = "country_id")
    @ManyToOne(optional = false)
    private Country country;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "owner")
    private Collection<Apps> appsCollection;

    public Users() {
    }

    public Users(String username) {
        this.username = username;
    }

    public Users(Integer userId) {
        this.userId = userId;
    }

    public Users(Integer userId, String username, String password, String email, int permissions) {
        this.userId = userId;
        this.username = username;
        this.password = password;
        this.email = email;
        this.permissions = permissions;
    }

    public Integer getUserId() {
        return userId;
    }

    public void setUserId(Integer userId) {
        this.userId = userId;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public int getPermissions() {
        return permissions;
    }

    public void setPermissions(int permissions) {
        this.permissions = permissions;
    }

    public Sessions getSessions() {
        return sessions;
    }

    public void setSessions(Sessions sessions) {
        this.sessions = sessions;
    }

    public Country getCountry() {
        return country;
    }

    public void setCountry(Country country) {
        this.country = country;
    }

    @XmlTransient
    public Collection<Apps> getAppsCollection() {
        return appsCollection;
    }

    public void setAppsCollection(Collection<Apps> appsCollection) {
        this.appsCollection = appsCollection;
    }

    public boolean isValid(String password) {
        try {
            return this.password.equals(MySqlTools.MD5Encode(password));
        } catch (NoSuchAlgorithmException ex) {
            ex.printStackTrace();
        }
        return false;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (userId != null ? userId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Users)) {
            return false;
        }
        Users other = (Users) object;
        if ((this.userId == null && other.userId != null) || (this.userId != null && !this.userId.equals(other.userId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "Users{" + "userId=" + userId + ", username=" + username + ", password=" + password + ", email=" + email + ", permissions=" + permissions + ", sessions=" + sessions + ", country=" + country + ", appsCollection=" + appsCollection + '}';
    }
} 
```

示例 Json 输出

```
 {"error":0,"data":
    {"userId":17,"username":"xxxx","password":"xxxx","email":"xxxx","permissions":1,"sessions":
    {"sessionId":8,"sessionKey":"b0880029fae3b4588c37640f8452b2da","creationStamp":2017052136},"country":{"countryId":177,"iso2":"PT","shortName":"Portugal","longName":"Portuguese Republic","iso3":"PRT","numcode":"620","unMember":"yes","callingCode":"351","cctld":".pt"}},
    "erroMessage":""} 
```

我生成输出的方法是

```
@GET
@Path("validate")
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
public Message validate(@QueryParam("username") String username, @QueryParam("password") String password) throws NoSuchAlgorithmException {
        Users rtn = validateUser(username, password);
        if (rtn != null) {
                if (rtn.getSessions() == null) {
                        rtn.setSessions(new Sessions(MySqlTools.MD5Encode(System.currentTimeMillis() + MySqlTools.SALT), (int) System.currentTimeMillis(), rtn));
                        super.edit(rtn);
                }
                return new Message(rtn);
        }
        return new Message(1,"Invalid Username or Password");
} 
```

对我来说，奇怪的是为什么它只在尝试将输出作为 XML 时给出错误？...

# ruby-on-rails - 更改 Rails 中的外部 gem 文件以便我可以在应用程序中使用 CSS 的坏主意？

> ID：14543057
> 
> 赞同：0
> 
> 时间：2013-01-27T00:16:26.950
> 
> 标签：ruby-on-rails, rubymine

对如何设置设计 gem 的视图进行了一些研究，并没有真正找到太多，所以添加了一些 html 和部分外部库的渲染以帮助设置样式并继续为我的用户提供一些链接。我有这种直觉，但它不是正确的做事方式。提供任何在线参考将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:22:12.533

这取决于你是如何做到的。

如果您只是编辑了已安装的 gem 源代码，那么这可能并不理想。

但是，如果您分叉[了 Devise github 存储库，](https://github.com/plataformatec/devise)就像今天已有 1,270 人所做的那样，您可以轻松跟踪源代码的更改并将它们与您的版本合并，如果您愿意，可以将您的更改贡献回来，您可以构建自己的 gem你可以在风格中使用。

# facebook - 如何在不撤销网站（应用）权限的情况下从 Facebook 注销用户？

> ID：14543058
> 
> 赞同：2
> 
> 时间：2013-01-27T00:16:29.660
> 
> 标签：facebook, oauth

我对正确的 facebook 授权/登录流程有一些疑问，也许你们中的一些人在这个主题上有更多的经验。

基本上，我的网站上有一个供未经身份验证的用户使用的访客区域和一个通过 Facebook 或平台登录/注册系统连接的按钮。

根据 Facebook 流程：一旦客人点击按钮，就会打开一个弹出对话框，要求登录 fb（如果需要）并授予应用程序一些权限。一旦被接受，我的网站会将用户数据保存到数据库表中，就好像用户也注册到网站本身一样。这一切都很好，一旦完成，我的用户可以按预期导航到保护区。

现在......我不完全了解是否必须从 Facebook 注销并在用户选择从我的网站注销后撤销权限，或者是否允许（以及如何）简单地将用户从 Facebook 注销（等等）应用程序），而应用程序仍保留用户权限。

我知道这听起来可能是一个愚蠢的问题，但流程的最后一部分对我来说仍然是模糊的，我发现 Facebook 文档非常稀少。我希望我能解释得足够好！

谢谢。

# emacs - elisp 阶乘计算给出不正确的结果

> ID：14543064
> 
> 赞同：7
> 
> 时间：2013-01-27T00:17:52.243
> 
> 标签：emacs, elisp

如果我在 emacs-lisp 中编写这个函数：

```
(defun factorial (n)
  (if (<= n 1)
      1
      (* n (factorial (- n 1)))))
      => factorial 
```

它适用于像 5 或 10 这样的小数，但如果我尝试计算（阶乘 33）答案是 -1211487723752259584，这显然是错误的，所有大数都会破坏函数。在 python 中，这不会发生。是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T02:17:11.283

`calc`在处理大量数字时，您总是可以调用 Emacs 的库。

```
(defun factorial (n)
  (string-to-number (factorial--1 n)))

(defun factorial--1 (n)
  (if (<= n 1)
      "1"
    (calc-eval (format "%s * %s"
                       (number-to-string n)
                       (factorial--1 (- n 1))))))

ELISP> (factorial 33)  
8.683317618811886e+036 
```

进一步阅读：

*   [http://www.masteringemacs.org/articles/2012/04/25/fun-emacs-calc/](http://www.masteringemacs.org/articles/2012/04/25/fun-emacs-calc/)
*   `C-h``i``g` `(calc)` `RET`
*   `C-h``i``g` `(calc) Calling Calc from Your Programs` `RET`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T00:59:37.170

整数有一个[特定的范围](https://www.gnu.org/software/emacs/manual/html_node/elisp/Integer-Basics.html#Integer-Basics)。超出此范围的值无法表示。这是大多数（但不是全部）编程语言的标准。您可以通过检查`most-positive-fixnum`.

转到您的`*scratch*`缓冲区（或任何 Lisp 缓冲区）并输入`most-positive-fixnum`. 将光标放在末尾，然后按`C-x C-e`。在我的电脑上，我得到 2305843009213693951 作为值。你的可能会有所不同：我在 64 位机器上，这个数字大约是`2^61`. 33 的阶乘的解是 8683317618811886495518194401280000000。大约是 2^86，这也超出了我的 Emacs 可以处理的范围。（我使用[Arc](http://arclanguage.com/)来精确计算它，因为 Arc 可以表示任何大小的整数，受制于您安装的内存量等无聊的东西）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-13T12:51:56.387

最简单的解决方案似乎是保罗的解决方案：

```
(defun factorial (n) (calc-eval (format "%s!" n)))

ELISP> (factorial 33)
8683317618811886495518194401280000000 
```

但是，我尝试通过另一种 Calc 方式来取乐，而不使用`calc-eval` and `string`。因为使用 Calc 的更复杂的 Emacs Lisp 程序可以通过这种方式完成。

Calc`defmath`和`calcFunc-`函数在 Emacs Lisp 中非常强大。

```
(defmath myFact (n) (string-to-number (format-number (calcFunc-fact n))))

ELISP> (calcFunc-myFact 33)
8.683317618811886e+36 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-24T18:55:20.100

我找到了这个问题，寻找一种在 Elisp 中计算阶乘的快速简便的方法，最好*不*实现它。

从其他答案中，我推测它是：

```
(calc-eval "10!") 
```

这相当于

```
(calc-eval "fact(10)") 
```

它与重新定义阶乘函数一样简洁且功能更强大。例如，您可以通过这种方式获得二项式系数：

```
(calc-eval "7!/3!(7-3)!") 
```

甚至这样：

```
(calc-eval "choose(7,3)") 
```

[Calc](https://www.gnu.org/software/emacs/manual/html_mono/calc.html)真的很值得探索。我建议在 Emacs 中做交互式教程。您可以使用`C-x` `*` `t`. 至于 calc，您可以将其与`C-x` `*` `c`、 或 一起使用`M-x` `calc`。

# python - 使用python将AB CD字节反转为CD AB

> ID：14543065
> 
> 赞同：6
> 
> 时间：2013-01-27T00:18:10.927
> 
> 标签：python, byte, reversing

我有一个 .bin 文件，我想简单地对十六进制数据进行字节反转。比如说@ 0x10 它读取 AD DE DE C0，希望它读取 DE AD C0 DE。

我知道有一种简单的方法可以做到这一点，但我是初学者，刚刚学习 python，正在尝试制作一些简单的程序来帮助我完成日常任务。我想以这种方式转换整个文件，而不仅仅是 0x10。

我将在起始偏移量 0x000000 处转换，块大小/长度为 1000000。

这是我的代码，也许你可以告诉我该怎么做。我确定我只是没有得到它，而且我是编程和 python 的新手。如果你能帮助我，我将不胜感激。

```
def main():
    infile = open("file.bin", "rb")
    new_pos = int("0x000000", 16)
    chunk = int("1000000", 16)
    data = infile.read(chunk)
    reverse(data)

def reverse(data):
    output(data)

def output(data):
    with open("reversed", "wb") as outfile:
        outfile.write(data)

main() 
```

您可以看到用于反转的模块，我尝试了许多不同的建议，它要么原封不动地传递文件，要么抛出错误。我知道模块反向现在是空的，但我已经尝试了各种各样的东西。我只需要模块反转即可将 AB CD 转换为 CD AB。感谢您的任何意见

编辑：文件为 16 MB，我想反转整个文件的字节顺序。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-06T12:42:54.087

在 Python 3.4 中，您可以使用：

```
>>> data = b'\xAD\xDE\xDE\xC0'
>>> swap_data = bytearray(data)
>>> swap_data.reverse() 
```

结果是

```
bytearray(b'\xc0\xde\xde\xad') 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-27T02:55:03.347

在 Python 2 中，二进制文件被读取为字符串，因此字符串切片应该可以轻松处理相邻字节的交换：

```
>>> original = '\xAD\xDE\xDE\xC0'
>>> ''.join([c for t in zip(original[1::2], original[::2]) for c in t])
'\xde\xad\xc0\xde' 
```

在 Python 3 中，二进制文件被读取为字节。只需稍作修改即可构建另一个字节数组：

```
>>> original = b'\xAD\xDE\xDE\xC0'
>>> bytes([c for t in zip(original[1::2], original[::2]) for c in t])
b'\xde\xad\xc0\xde' 
```

您还可以在[struct 模块](http://docs.python.org/2.7/library/struct.html#module-struct)`<`中使用和`>` [endianess](https://en.wikipedia.org/wiki/Endianness)格式代码来实现相同的结果：

```
>>> struct.pack('<2h', *struct.unpack('>2h', original))
'\xde\xad\xc0\xde' 
```

快乐的[字节交换](http://www.google.com/search?q=byte%20swapping%20in%20python):-)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-08T06:46:10.573

```
data = b'\xAD\xDE\xDE\xC0'
reversed_data = data[::-1]
print(reversed_data)
# b'\xc0\xde\xde\xad' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T01:17:58.587

Python 有一个列表运算符来反转列表的值 --> nameOfList[::-1]

所以，我可能会将十六进制值存储为字符串并将它们放入列表中，然后尝试类似：

```
def reverseList(aList):
rev = aList[::-1]
outString = ""
for el in rev:
    outString += el + " "
return outString 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-04T10:16:15.337

Python3

```
bytes(reversed(b'\xAD\xDE\xDE\xC0'))
# b'\xc0\xde\xde\xad' 
```

# javascript - JQuery UI 添加到手风琴

> ID：14543068
> 
> 赞同：2
> 
> 时间：2013-01-27T00:18:22.053
> 
> 标签：javascript, jquery, html, jquery-ui

[这](http://jqueryui.com/accordion/)是 JQuery UI 的手风琴小部件的演示。我的页面上有一个，将项目放入其中的方式（如演示页面所示）是这样的：

```
<div id="accordion">
  <h3>Section 1</h3>
  <div>
    <p>
    Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
    ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
    amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
    odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
    </p>
  </div>
  <h3>Section 2</h3>
  <div>
    <p>
    Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
    purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
    velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
    suscipit faucibus urna.
    </p>
  </div>
  <h3>Section 3</h3>
  <div>
    <p>
    Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis.
    Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero
    ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis
    lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui.
    </p>
    <ul>
      <li>List item one</li>
      <li>List item two</li>
      <li>List item three</li>
    </ul>
  </div>
  <h3>Section 4</h3>
  <div>
    <p>
    Cras dictum. Pellentesque habitant morbi tristique senectus et netus
    et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in
    faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia
    mauris vel est.
    </p>
    <p>
    Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
    Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
    inceptos himenaeos.
    </p>
  </div>
</div> 
```

请注意，对于每个项目，都有以下结构：`<h3>Title</h3><div><p>Text</p></div>`. 我希望能够动态添加到这个手风琴；然而，当我试图简单地将该结构添加到手风琴时，它不起作用。我查看了我的 chrome 控制台，发现 JQuery 将各种类和属性添加到项目的裸露元素中。现在，当然，解决这个问题的明显方法是而不是添加`<h3>Title</h3>`到添加

```
<h3 class="ui-accordion-header ui-helper-reset ui-state-default ui-accordion-header-active ui-state-active ui-corner-top ui-accordion-icons" role="tab" id="ui-accordion-lessonlist-header-0" aria-controls="ui-accordion-lessonlist-panel-0" aria-selected="true" tabindex="0"><span class="ui-accordion-header-icon ui-icon ui-icon-triangle-1-s"></span>Title</h3> 
```

对于所有其他元素也是如此。我知道这应该可以正常工作，但它看起来很难看，我想知道 JQuery 是否为我们提供了一些不错的功能来为我们完成所有这些工作。如果没有，任何人都可以建议一种不那么烦人的方法吗？

编辑：回应所有建议重新创建手风琴的答案：我知道这可能比上面显示的方法更好，但是是否可以只“手风琴”我需要的 HTML 块而不是整个手风琴，哪个可以变大？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T00:24:13.263

只需在向其添加新数据时重新创建手风琴：

```
$("#accordion").append(html).accordion('destroy').accordion(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:26:57.923

唯一关键的 HTML 是主要结构：

```
<div id="accordion">
  <h3>Section 1</h3>
  <div></div>
 <h3>Section 2</h3>
  <div></div>
</div> 
```

`DIV`您可以在内容面板中放置您想要的任何内容。

当您添加一组新的`h3`and`div`时，销毁并重新创建手风琴：

```
var newPanel='<h3>New section</h3><div>New content</div>';
$('#accordion').append(newPanel).accordion('destroy').accordion( /* options */ ); 
```

# fortran90 - 在 fortran 90 中使用标准数组和派生类型时内存使用量之间的差异

> ID：14543075
> 
> 赞同：4
> 
> 时间：2013-01-27T00:19:27.580
> 
> 标签：fortran90

我观察到关于派生数据类型的内存使用的奇怪行为。以下 fortran90 代码演示了该问题。

```
 module prec
  implicit none
  integer, parameter :: d_t = selected_real_kind(15,307)
  end module
  module typdef
  use prec
  implicit none
  type level_2
  real(kind=d_t), allocatable :: lev_3(:)
  end type
  type level_1
  type(level_2),allocatable :: lev_2(:,:)
  end type
  type array
  type(level_1),allocatable :: lev_1(:,:)
  end type
  end module
  program mem_test
  use prec
  use typdef
  implicit none
  integer :: n,i,j,k,l,m,egmax,niter,ncells,namom,nsmom
  real(kind=d_t),allocatable :: simple_array(:,:,:,:,:)
  type(array)                :: fancy_array
  real(kind=d_t)             :: it
  egmax=7
  niter=2
  ncells=3000000
  namom=1
  nsmom=1
  !
  !
  !  
  allocate( simple_array(egmax,niter,ncells,namom,nsmom) )
  !
  !
  !
  allocate( fancy_array%lev_1(egmax,niter))
  do i=1,niter
   do j=1,egmax
     allocate( fancy_array%lev_1(j,i)%lev_2(ncells,namom) )
   end do
 end do
 do i=1,niter
   do j=1,egmax
     do k=1,namom
       do l=1,ncells
         allocate( fancy_array%lev_1(j,i)%lev_2(l,k)%lev_3(nsmom) )
       end do
     end do 
   end do
 end do
 !
 do n=1,100000
 it=0.0_d_T
 do i=1,100000
  it=it+1.0_d_t
 end do
 end do
 ! 
 !
 deallocate(simple_array)
 deallocate(fancy_array%lev_1)
 end program 
```

我想将数据存储在一个多维数组中（例如max*niter*ncell*namom*nsmom 双精度数）。我以两种不同的方式做到了这一点：

1.  多维标准数组“simple_array(egmax,niter,...,)”
2.  我提供的代码中定义的嵌套派生数据结构“fancy_array”。

我使用编译代码

```
 ifort -g -o  test.exe file.f90 
```

我在 valgrind 中运行它并比较了 simple_array 和 fancy_array 的内存消耗。simple_array 按预期使用大约 300Mb，而 fancy_array 使用 3Gb（10 倍），即使它存储了相同数量的实数。因此，它也应该只消耗 300Mb。

运行一个更简单的测试用例，其中派生类型只有一层深，例如

```
 type level_1
        real(kind=d_t),allocatable :: subarray(:)
     end type
     type array
        type(level_1),allocatable :: lev_1(:)
     end type 
```

完全消耗我期望的内存量。它不会消耗 10 倍的内存。有没有人观察到类似的行为或有任何线索为什么会发生这种情况？对于所描述的行为，我唯一的想法是，fancy_array 分配了不连续的内存，fortran 需要以某种方式跟踪它，因此增加了内存消耗。我将不胜感激任何输入或类似的意见。

谢谢你的帮助。

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T20:27:43.373

（可分配组件是 Fortran 2003 的一项功能。）

Fortran 处理器（包括 Intel Fortran）实现可分配数组对象的典型方法是使用描述符 - 一种数据结构，其中包含诸如数组数据在内存中的位置以及数组每个维度的边界和步幅等信息，[除其他外](http://software.intel.com/sites/products/documentation/doclib/stdxe/2013/composerxe/compiler/fortran-mac/GUID-5474C7B4-78E5-4A7E-ACBD-E8A8501605A0.htm)。

对于 x64 平台上的 Intel Fortran，对于一维可分配数组，描述符占用 72 个字节。在您的派生类型案例中，您有大约 4200 万个这样的数组 - 一个用于`lev_3`您引入的每个组件，加上一个用于父可分配组件的数量要少得多。72 字节乘以 4200 万得到大约 3 GB。可能存在与底层内存分配器相关的更多开销。

在同一平台上，5 级数组的描述符占用 168 个字节，并且只有一个内存分配

这两种方法的数据存储要求大致相同。

请注意，这两种方法提供的功能有很大不同（因此开销不同）——在派生类型的情况下，您可以更改*每个* `lev_3`组件的分配状态、边界和范围。在单个数组的情况下，您没有任何接近这种灵活性的地方 - 如果分配该数组必须是矩形的。

（在 Fortran 90 中，您的组件在其声明中的维度需要是常量表达式（在编译时固定）。不会使用任何描述符，并且两种方法的内存需求会收敛。）

# objective-c - 保存 NSUserDefaults 问题？

> ID：14543079
> 
> 赞同：0
> 
> 时间：2013-01-27T00:20:15.080
> 
> 标签：objective-c, macos, nsuserdefaults

我一直在开发一个应用程序，需要存储一个字符串。我使用此代码设置默认值：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setValue:CertificateKey.stringValue forKey:@"SavedKey"];
[[NSUserDefaults standardUserDefaults] synchronize];
NSLog(@"%@",[defaults objectForKey:@"SavedKey"]); 
```

我记录了它，所以我知道它保存了……嗯，它向我展示了价值。当我打开我的应用程序时，我使用它来检索默认值：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[CertificateKey setStringValue:[defaults objectForKey:@"SavedKey"]];
[CertificateKey setTitleWithMnemonic:[defaults objectForKey:@"SavedKey"]];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

为什么它不会得到默认值？我没有完全保存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:23:09.167

不要通过按 xcode 中的停止按钮来退出应用程序。相反，通过右键单击应用程序图标并选择“退出”来退出它。

**编辑**

也许您第一次执行应用程序时，您想保存一些默认值，但您不想在应用程序运行的第二次以上设置它们。

为此，在某些类初始化方法中注册默认值，如下所示：

```
+ (void) initialize
{
    NSUserDefaults* defaults= [NSUserDefaults standardUserDefaults];
    [defaults registerDefaults: @{} ];
    // This case it's an empty dictionary, but you can put whatever you want inside it.
    // just convert it to data if it's not an object storable to a plist file.
} 
```

此外，您正在使用 setValue:forKey: ，该方法是从 NSObject 继承的。使用 setObject:forKey: 。

如果要在最后保存默认值，请使用 finalize：

```
- (void) finalize
{
    // Save the defaults here
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T00:43:39.590

您可能会遇到问题，因为您正在创建 NSUserDefaults 的实例。据我了解，您应该像这样访问它：`[[NSUserDefaults standardUserDefaults] setValue:@"Pikachu" forKey:@"Best Pokemon Ever"]; [[NSUserDefaults standardDefaults] objectForKey:@"Best Pokemon Ever"];` 而不是实际创建它的实例。

# c - 自定义头文件实现

> ID：14543080
> 
> 赞同：0
> 
> 时间：2013-01-27T00:20:19.137
> 
> 标签：c

我有一个自定义头文件 example.h，其中包含一些函数的原型。我实现了一个 .C 文件 example.c，它“包含”（#include“example.h”），并实现了在 example.h 中具有原型的函数。

现在，我有另一个函数 test.c，它必须调用在 example.h 中原型化并在 example.c 中实现的函数。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:22:19.203

就`#include "example.h"`在`test.c`（不要忘记链接所有目标文件！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:23:28.947

您需要在最后将它们全部链接起来（假设您已经将原型包含在您的`test.c`. 因此，如果您正在编译，您可以将这两个`.c`文件一起编译为一个可执行文件。然而，更常见的是在不链接的情况下编译它们（这会产生目标文件）。然后，最后，将所有目标文件链接在一起。要做到这一点取决于你的编译器，但一个例子是：

```
gcc -c -o example.o example.c
gcc -c -o test.o test.c
gcc -o my_application test.o example.o 
```

或者，对于一个小项目，这同样适用

```
gcc -o my_application example.c test.c 
```

# php - 如何创建 mysqli 动态 WHERE 子句

> ID：14543081
> 
> 赞同：1
> 
> 时间：2013-01-27T00:20:22.157
> 
> 标签：php, html, mysqli

我在这里有一个应用程序：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text30.php)

该应用程序在那里向您显示我想用作过滤器的两个下拉菜单，以便能够获得学生的答案来确定所选学生和从相应下拉菜单中选择的问题。

要查看下拉菜单，请在应用程序中`Assessment`从`Assessment`下拉菜单中选择一个并提交，您将看到下方显示的学生和问题下拉菜单。

现在我要做的是根据用户单击`Get Student Answers`按钮时从学生和问题下拉菜单中选择的选项创建一个动态 WHERE 子句。

以下是当前查询。`SessionId = ?`查询必须始终在 WHERE 子句中具有默认子句。其他子句取决于用户从两个下拉菜单中选择的选项`studentId = ?`。`questionId = ?`

```
$selectedstudentanswerqry = "
SELECT
StudentAlias, q.SessionId, QuestionNo, QuestionContent, o.OptionType, GROUP_CONCAT( DISTINCT Answer
ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, 
GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime
FROM Student s
INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
INNER JOIN Answer an ON q.QuestionId = an.QuestionId
LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
WHERE (SessionId = ?)
GROUP BY sa.StudentId, q.QuestionId
ORDER BY StudentAlias, q.SessionId, QuestionNo
";

global $mysqli;
$selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
// You only need to call bind_param once
$selectedstudentanswerstmt->bind_param("i",$_POST["session"]);
// get result and assign variables (prefix with db)
$selectedstudentanswerstmt->execute(); 
$selectedstudentanswerstmt->bind_result($detailsStudentAlias,$detailsSessionId,$detailsQuestionNo, 
$detailsQuestonContent,$detailsOptionType,$detailsAnswer,$detailsReplyType,$detailsStudentAnswer,$detailsResponseTime);
$selectedstudentanswerstmt->store_result();
$selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 
```

下面是作为示例 html 的学生和问题下拉菜单：

**学生下拉菜单：**

```
<select name="student" id="studentsDrop">
<option value="All">All</option>
<option value="3">u0499220 - Jack Briggs</option>
<option value="7">u0093220 - Mary Kay</option>
</form> 
```

**问题下拉菜单：**

```
<select name="question" id="questionsDrop">
<option value="All">All</option>
<option value="34">1</option>
<option value="35">2</option>
<option value="36">3</option>
</form> 
```

我在想，如果选择了特定的学生，则将其包含`StudentId = ?`在 WHERE 子句中，如果选择了特定的问题编号，则将其包含`QuestionId = ?`在 WHERE 子句中。但是，如果`All`在学生下拉菜单中选择了该值，`StudentId = ?`则从 WHERE 子句中删除，因为我们正在查找所有学生，而不是针对特定学生进行缩减。如果`All`从问题下拉菜单中选择值但显然处理`QuestionId = ?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:32:33.323

你知道你可以在这里写一个子查询吗？

```
WHERE (SessionId = ?) 
```

喜欢

```
WHERE SessionId IN(SELECT SessionId FROM ...) 
```

[http://dev.mysql.com/tech-resources/articles/subqueries_part_1.html](http://dev.mysql.com/tech-resources/articles/subqueries_part_1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:44:17.207

好吧，你知道吗？我想我在这里误解了真正的问题。您可能会发现这样做效果更好：

```
 $selectedstudentanswerqry = "
    SELECT
    StudentAlias, q.SessionId, QuestionNo, QuestionContent, o.OptionType, GROUP_CONCAT( DISTINCT Answer
    ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, 
    GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime
    FROM Student s
    INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
    INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
    INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
    INNER JOIN Answer an ON q.QuestionId = an.QuestionId
    LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId";

    if (studentId = something && questionId = something) {

    $selectedstudentanswerqry .= "WHERE (SessionId = ?)
    GROUP BY sa.StudentId, q.QuestionId
    ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

    } else if (studentId = somethingelse && questionId = somethingelse) {

    $selectedstudentanswerqry .= "WHERE (SessionId = ?)
    GROUP BY sa.StudentId, q.QuestionId
    ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";

    } else {
    $selectedstudentanswerqry .= "WHERE (SessionId = ?)
    GROUP BY sa.StudentId, q.QuestionId
    ORDER BY StudentAlias, q.SessionId, QuestionNo
    ";
    } 
```

# html - 是否有符合当前规范的 HTML 页面示例？

> ID：14543086
> 
> 赞同：0
> 
> 时间：2013-01-27T00:20:53.477
> 
> 标签：html

每当我（很少）开始创建 HTML 文档时，我都会查看当前的 HTML 规范并创建一个框架，据我所知，它遵循当前的标准。

是否有任何网站/服务可以生成这些骨架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:41:07.283

您需要的骨架非常简单：

```
<!DOCTYPE html>
<html>
  <head>
    <title>My Webpage</title>
  </head>
  <body>
    Body of the page
  </body>
</html> 
```

除此之外的任何内容都取决于您网站的特定需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:22:54.687

网站？从来没听说过。但我在 Mac 上使用[BBEdit](http://www.barebones.com/products/bbedit/index.html?utm_source=thedeck&utm_medium=banner&utm_campaign=bbedit)，它在创建各种基本的 HTML 和 XHTML 起始文档方面做得很好。刚打开它，它就创建了一个很好的默认 XHTML 文档，没有任何麻烦。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Untitled</title>
    <meta name="generator" content="BBEdit 10.5" />
</head>
<body>

</body>
</html> 
```

# css - 下拉菜单浮动问题

> ID：14543087
> 
> 赞同：0
> 
> 时间：2013-01-27T00:21:03.600
> 
> 标签：css, drop-down-menu, position, css-float

今天下午做了这个菜单。选项卡编号 1 有一个下拉列表，其中包含两个 div，每个 div 都应该向左浮动，因此有两个相邻的 div，但是，它不起作用，第二行在第一个下方。

这是我认为会做浮动的线：

```
/*sub container div*/
.container ul li .drop div{
float:left;
} 
```

[小提琴](http://jsfiddle.net/VqCJK/2/)

HTML

```
<!-- start menu -->
<div id="top_menu">
    <nav>
        <div class="container">
            <ul>
                <li><a href="/#"><img class="home" alt="" height="20" src="/images/trans.gif" width="20"> </a></li>
                <li><a href="/number1">number 1</a>
                    <div class="drop">
                        <div>
                            <a href="/cat1">category 1</a>
                            <ul>
                                <li><a href="/1">test1</a></li>
                                <li><a href="/2">test2</a></li>
                                <li><a href="/3">test3</a></li>
                                <li><a href="/4">test4</a></li>
                            </ul>
                            <a href="/cat2">category 2</a>
                            <ul>
                                <li><a href="/1">test1</a></li>
                            </ul>
                        </div>
                        <div>
                            <a href="/cat3">category 3</a>
                            <ul>
                                <li><a href="/1">test1</a></li>
                                <li><a href="/2">test2</a></li>
                                <li><a href="/3">test3</a></li>
                                <li><a href="/4">test4</a></li>
                            </ul>
                            <a href="/cat4">category 4</a>
                            <ul>
                                <li><a href="/1">test1</a></li>
                            </ul>
                            <a href="/cat5">category 5</a>
                            <ul>
                                <li><a href="/1">test1</a></li>
                            </ul>
                        </div>
                        <div>
                    </div>
                </li>
                <li><a href="/number2">number 2</a></li>
                <li><a href="/number3">number 3</a></li>
                <li><a href="/number4">number 4</a></li>
                <li><a href="/number5">number 5</a></li>
            </ul>
        </div>
    </nav>
</div>
<!-- end menu --> 
```

CSS

```
#top_menu{
background:#cccccc url('/images/top_menu_bg.png') repeat;
}

.container{
position:relative;
z-index:1000;
border-left:1px #b2b2b2 solid;
border-right:1px #b2b2b2 solid;
}

.container ul{
white-space:nowrap;
/*display:table;*/
}

.container ul, .container li{
padding:0;
margin:0;
list-style:none;
}

/*top level link*/
.container ul a{
display:block;
color:#666666;
text-decoration:none;
padding:0 25px;
line-height:40px;
border-right:1px #b2b2b2 solid;
}

/*sub container*/
.container ul li .drop{
position:absolute;
background:#fdfdfd;
-moz-border-radius:0 0 8px 8px;
-webkit-border-radius:0 0 8px 8px;
border-radius:0 0 8px 8px;
display:none;
border-left:1px #b2b2b2 solid;
border-right:1px #b2b2b2 solid;
border-bottom:1px #b2b2b2 solid;
}

/*sub container div*/
.container ul li .drop div{
float:left;
}

.container ul li .drop li{
display:block;
border:0;
}

.container > ul > li{
float:left;
display:block;
position:relative;
}

.container ul li:hover > .drop{
top:auto;
display:block;
}

/*sub level top link*/
.container ul li .drop a{
line-height:25px;
border:0;
padding:0 30px 0 10px;
color:#000000;
}

/*sub level top link hover*/
.container ul li .drop a:hover{
color:#00396d;
background:#c4dcec;
}

/*sub level link normal*/
.container ul li .drop li > a{
color:#666666;
}

/*sub level link hover*/
.container ul li .drop li:hover > a{
background:#c4dcec;
color:#00396d;
}

/*top level link hover*/
.container li:hover > a{        
color: #000000;
}

/*home button*/
.container ul li img.home{
background:url('/images/top_menu_home.png') 0 0;
width:20px;
height:20px;
}

/*home button hover*/
.container ul li:hover > a img.home{
background:url('/images/top_menu_home.png') -20px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T06:13:37.530

抱歉回复晚了=）不过，如果你想水平堆叠几个可变宽度的元素，我建议使用**display:inline-block**。

```
/*sub container div*/
.container ul li .drop div{
display:inline-block;
    vertical-align:top;
} 
```

[小提琴](http://jsfiddle.net/TWL39/2/)（适用于 fFF 8、Chrome 12、IE 9）。

缺点是元素之间的空间，可以[成功消除](http://css-tricks.com/fighting-the-space-between-inline-block-elements/Eo_6p3w&bvm=bv.50952593,d.Yms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:49:27.470

```
 .container ul li .drop{
    position:absolute;
    background:#fdfdfd;
    -moz-border-radius:0 0 8px 8px;
    -webkit-border-radius:0 0 8px 8px;
    border-radius:0 0 8px 8px;
    display:none;
    border-left:1px #b2b2b2 solid;
    border-right:1px #b2b2b2 solid;
    border-bottom:1px #b2b2b2 solid;
        width: 300px;                            //set width
}

/*sub container div*/
.container ul li .drop div{
    float:left;
    width:50%;                                   //optional
} 
```

# c++ - OpenCV：在一个窗口中记录素材并在第二个窗口中显示相同的视频，但只有轮廓

> ID：14543088
> 
> 赞同：1
> 
> 时间：2013-01-27T00:21:11.447
> 
> 标签：c++, opencv

我想捕捉视频并将其显示在一个窗口上，并有第二个窗口同时显示轮廓。我正在努力解决如何在第二个窗口中显示处理后的视频。请分析我的代码并提出解决方案或指出哪里出了问题，可能会给我一些在线教程或资源的指示。谢谢。

```
 #include "iostream"
    #include<opencv\cv.h>
    #include<opencv\highgui.h>
    #include<opencv\ml.h>
    #include<opencv\cxcore.h>
    #include <iostream> 
    #include <vector>
    #include <string> 
    #include <opencv2/core/core.hpp> // Basic OpenCV structures (cv::Mat)
    #include <opencv2/highgui/highgui.hpp> // Video write

    using namespace cv;
    using namespace std;

    Mat image; Mat image_gray; Mat image_gray2; Mat threshold_output;
    Mat frame;
    int thresh=100, max_thresh=255;

    int main(int argc, char** argv) {

     //Capture Video
     VideoCapture capCam(1);
     if (!capCam.isOpened()){
        cout<<"ERROR: Failed to Initialize Camera"<<endl;
        return 1;
     }
     else{
        cout<<"Camera Initialized"<<endl;
     }

 //Create Window
char* ImputFootage = "Source";
namedWindow(ImputFootage, CV_WINDOW_AUTOSIZE);
imshow(ImputFootage, frame);

char* OutputFootage = "Processed";
namedWindow(OutputFootage, CV_WINDOW_AUTOSIZE);
imshow(OutputFootage, frame);

 while(1){
    capCam>> frame;
    imshow("Source", frame);
    return(1);

    if(capCam.read(ImputFootage)){

        //Convert Image to gray & blur it
cvtColor( image, 
    image_gray, 
    CV_BGR2GRAY );

blur( image_gray, 
    image_gray2,
    Size(3,3) );
//Threshold Gray&Blur Image
threshold(image_gray2, 
    threshold_output, 
    thresh, 
    max_thresh, 
    THRESH_BINARY);

//2D Container
vector<vector<Point>> contours;

//Fnd Countours Points, (Imput Image, Storage, Mode1, Mode2, Offset??)
findContours(threshold_output,
    contours, // a vector of contours
    CV_RETR_EXTERNAL,// retrieve the external contours
    CV_CHAIN_APPROX_NONE,
    Point(0, 0)); // all pixels of each contours    

// Draw black contours on a white image
Mat result(threshold_output.size(),CV_8U,Scalar(255));
drawContours(result,contours,
    -1, // draw all contours
    Scalar(0), // in black
    2); // with a thickness of 2

    }
 }
char CheckForEscKey = waitKey(10);
return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:11:20.817

你应该打电话`imshow("Processed", result);`后打电话`drawContours`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T17:09:40.270

您甚至在用相机捕获帧之前就试图显示它们。编译器没有给你错误，因为 Mat 被声明了，但它们没有值（null），而且你试图显示 Mat 图像，但你从相机捕获的是 Mat 帧。此外，您缺少退出（esc 序列，并且您的等待键已退出相机循环。

无论如何，这是你的代码（重写），我希望这是你想要的。

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include <cstdio>
#include <iostream>
#include <stdlib.h>
#include <stdio.h>

using namespace std;
using namespace cv;

Mat image;
Mat image_gray;
Mat image_gray2;
Mat threshold_output;
Mat frame;
int thresh = 100, max_thresh = 255;

int main(int argc, char** argv)
{

    //Capture Video
    VideoCapture capCam(0);
    if (!capCam.isOpened())
    {
        cout << "ERROR: Failed to Initialize Camera" << endl;
        return 1;
    }
    else
    {
        cout << "Camera Initialized" << endl;
    }

    //Create Window
    char* ImputFootage = "Source";
    namedWindow(ImputFootage, CV_WINDOW_AUTOSIZE);

    char* OutputFootage = "Processed";
    namedWindow(OutputFootage, CV_WINDOW_AUTOSIZE);

    while (1)
    {
        capCam >> frame;
        imshow(ImputFootage, frame);

        if (capCam.read(frame))
        {

            //Convert Image to gray & blur it
            cvtColor(frame, image_gray, CV_BGR2GRAY);

            blur(image_gray, image_gray2, Size(3, 3));
            //Threshold Gray&Blur Image
            threshold(image_gray2, threshold_output, thresh, max_thresh, THRESH_BINARY);

            //2D Container
            vector<vector<Point> > contours;

            //Fnd Countours Points, (Imput Image, Storage, Mode1, Mode2, Offset??)
            findContours(threshold_output, contours, // a vector of contours
                    CV_RETR_EXTERNAL, // retrieve the external contours
                    CV_CHAIN_APPROX_NONE, Point(0, 0)); // all pixels of each contours

            // Draw black contours on a white image
            Mat result(threshold_output.size(), CV_8U, Scalar(255));
            drawContours(result, contours, -1, // draw all contours
                    Scalar(0), // in black
                    2); // with a thickness of 2

            imshow(OutputFootage, result);

            char CheckForEscKey = waitKey(10);

            //If the key pressed by user is Esc(ASCII is 27) then break out of the loop
            if (CheckForEscKey == 27)
            {
                break;
            }

        }
    }

    return 0;
} 
```

# java - java中具有继承的构造函数

> ID：14543095
> 
> 赞同：1
> 
> 时间：2013-01-27T00:21:54.563
> 
> 标签：java, inheritance

A级

```
class A {

    int a;
    int c;

    A (int a, int c) {

       this.a = a;
       this.c = c;

    }
} 
```

B类

```
class B extends A{

    public static void main (String [] args) {

        A obj = new A (5, 6);

    }
} 
```

当我编译代码时它告诉我这个错误

```
 B.java:1: error: constructor A in class A cannot be applied to given types;
    class B extends A{
    ^
      required: int,int
      found: no arguments
      reason: actual and formal argument lists differ in length
    1 error 
```

这个错误究竟是什么时候出现的？而在继承类的时候，构造函数必须是同类型的超类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T00:25:36.383

`A`指定一个带有两个参数的构造函数，`B`只指定一个无参数的（默认的）。

如果你真的想让`B`继承 from `A`，你还需要创建一个构造函数，或者一个带有两个参数的构造函数，或者一个只调用`A`具有默认值的构造函数：

```
// variant A

class B extends A {
  B (int a, int c) {
    super(a, c);
  }
}

// variant B

class B extends A {
  B () {
    super(0, 0); // replace 0 with an appropiate default value for each parameter
  }
} 
```

但是，从您的代码中，如果您`B`只想在. 在这种情况下，只需删除继承即可。`A``A``main`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:24:50.260

向类添加构造函数`B`。

编译器意识到你不能实例化类`B`！

# python - Django 重定向

> ID：14543096
> 
> 赞同：2
> 
> 时间：2013-01-27T00:21:56.313
> 
> 标签：python, django

我试图让我网站上的人们根据他们所属的用户组访问网站的一个完全独立的部分。这是我到目前为止写的逻辑：

```
if request.user:
    if request.user.groups.filter(name='A').count() >= 1:
        return HttpResponseRedirect('/pageA')
    elif request.user.groups.filter(name='B').count() >= 1:
        return HttpResponseRedirect('/pageB')
else:
    return HttpResponseRedirect('/login') 
```

然后是网址：

```
url(r'', 'main.views.getIndex'),
url(r'', include('a.urls')),
url(r'', include('b.urls')), 
```

所以基本上，我有 A 组和 B 组——如果他们属于各自的用户组，用户可以相应地访问“A”页面和“B”页面。否则，他们必须登录（占位符拒绝页面）。

逻辑似乎是有道理的，但我不断收到“重定向过多”的错误。事实上，页面实际上也得到了我想要的语句，但是在返回 HttpResponseRedirect 时，它停止工作。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T00:38:21.900

以下模式将匹配*所有*url

```
url(r'', 'main.views.getIndex'), 
```

因此，如果`getIndex`返回重定向，您将获得无限重定向循环。

如果您只希望 url 模式与索引 url (ie `/`) 匹配，则将其更改为：

```
url(r'^$', 'main.views.getIndex'), 
```

插入符号`^`匹配字符串的开头，美元`$`匹配字符串的结尾。因此`^$`只匹配空字符串`''`。相比之下，正则表达式`r''`匹配所有字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:00:16.623

好吧，我不知道你在`a.urls`and中有什么代码`b.urls`，但我会给你我应该应用重定向时几乎总是使用的方式。当然，这只是您可以拥有的一种新方式。例如，假设您有以下条目`a.urls`：

```
from django.conf.urls.defaults import *

urlpatterns = patterns('appA.views',
    url(r'^pageA/$', 'pageA_view', name='pageA'),
)

you can apply this:

from django.shortcuts import redirect

# In your code
if request.user.groups.filter(name='A').count() >= 1:
    return redirect('pageA') 
```

这是完成此任务的另一种方式。您也可以遵循您的想法，但为了更好地理解，查看您的`a.urls`和`b.urls`.

好吧，我只是在发布回复后才看到答案。无论如何，也许它可以帮助某人。

# android - BaseAdapter#getView 中的 setImageBitmap 不更新 ImageView

> ID：14543099
> 
> 赞同：0
> 
> 时间：2013-01-27T00:22:10.390
> 
> 标签：android, android-2.1-eclair

我有一个应用程序可以在后台线程中下载一堆图像。随着每个图标的下载，我将其添加到自定义适配器中的一个 ArrayList，该适配器是 BaseAdapter 的子类。ListView 中使用 BaseAdapter 的每一行都有一个 ImageView。在 getView 中，我执行以下操作。

```
public View getView(int position, View convertView, ViewGroup parent) {
    final MyCustomImageClass imageObject = data.get(position);
    View vi = convertView;

    if(convertView==null) {
        vi = inflater.inflate(R.layout.list_row, null);
    }

    ImageView thumbnail = (ImageView)vi.findViewById(R.id.list_image);
    File appDir = new File(Utils.getAppFilesDir() +"");
    File imageFolder = new File(appDir, imageObject.getImageFolderName());
    File imageDir = new File(imageFolder, imageObject.getIconFilename());
    Log.e("myapp", "row image dir: " + imageDir.toString());
    if(imageDir.exists()) {
        Bitmap imageBitmap = BitmapFactory.decodeFile(imageDir.toString());
        thumbnail.setImageBitmap(imageBitmap);
    }
    thumbnail.invalidate();
} 
```

但我看到的`thumbnail`是重新使用旧图像。就像，前几行将具有相同的缩略图图像，即使我在 logcat 中看到它们的路径不同。

如何告诉 ListView 中的行它的 ImageView 有一个新的位图图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:38:11.517

中的每一行`ListView`都会被回收，因此当一个离开屏幕时，下一个出现的将重用该容器。您可能不满足`if`新更新的声明，`ImageView`因此图像未设置为您想要的，因此它只是重用旧图像。确保您的`imageDir.exists()`遗嘱成功完成，以确保新视图将正确更新。另外，我认为没有任何理由称无效。

编辑：我明白你为什么现在打电话`invalidate()`了，但仍然没有必要。我建议使用默认图像`ImageView`，就像 android 提供的那样，然后执行以下操作：

```
if(imageBitmap != null)
  thumbnail.setImageBitmap(imageBitmap);
else
  thumbnail.setImageDrawable(R.drawable.content_picture); 
```

其中`R.drawable.content_picture`是默认的“无图片显示”图像，也是为`ImageView`XML 文件中定义的图像。

最后，您应该考虑使用 a`ViewHolder`来加快`ListView`. 这是一个示例：[如何实现视图持有者？](https://stackoverflow.com/questions/4145602/how-to-implement-a-view-holder)

如果我在这里所说的任何事情没有意义，请要求澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:39:22.173

适配器正在回收整个列表项，而不仅仅是图像。在等待新位图被解码时，您需要将图像资源重置为占位符。

附带说明一下，您真的不应该在 UI 线程上读取磁盘或解码位图。getView() 方法应该很快就可靠地返回，这排除了在那里做任何实际工作。查看开发指南，了解如何处理位图的好技巧：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# mkmapview - ViewController segues to MapViewContoller：第一次打开 MapView 区域错误

> ID：14543109
> 
> 赞同：1
> 
> 时间：2013-01-27T00:23:27.743
> 
> 标签：mkmapview, segue

晚上好，当用户按下 ViewController 上的条形按钮时，我遇到了加载 MapView 的应用程序的问题。MapViewController 被加载并且 Map 显示正确的注释（未在源代码中显示），但是第一次启动 App 并打开 MapView 时 startregion 是错误的。当我按下后退按钮一次并重新打开 MapView 时，startregion 很好。它只是第一次不起作用。

日志给了我从 plist 加载的正确值：47.572132 和 7.579397

自从我两周前开始编写 Objective-c 代码以来，请让你的答案尽可能简单；-)

**h.文件：**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>
#import "DetailViewController.h"
#import "Annotation.h"

@interface MapViewController : UIViewController<CLLocationManagerDelegate> {
    IBOutlet MKMapView *singlemapview;
}

@property (nonatomic, retain) NSArray *data;
@property int selectedBuilding;
@property (strong, nonatomic) CLLocationManager *location;
@property float longitude;
@property float latitude;
@end 
```

**m.文件：**

```
#import "MapViewController.h"

@interface MapViewController ()
@end

@implementation MapViewController
@synthesize data;
@synthesize selectedBuilding;
@synthesize location, latitude, longitude;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDictionary *dataItem = [data objectAtIndex:selectedBuilding];

    latitude = [[dataItem objectForKey:@"Latitude"] floatValue];
    longitude = [[dataItem objectForKey:@"Longitude"] floatValue];

    NSLog (@"%f",latitude);
    NSLog (@"%f",longitude);

    MKCoordinateRegion startregion = { {0.0, 0.0}, {0.0, 0.0} };
    startregion.center.latitude = latitude;
    startregion.center.longitude = longitude;
    startregion.span.latitudeDelta = 0.005;
    startregion.span.longitudeDelta = 0.005;

    [singlemapview setMapType:MKMapTypeSatellite];
    [singlemapview setZoomEnabled:YES];
    [singlemapview setScrollEnabled:YES];

    [singlemapview addAnnotation:singlebuilding];
    [singlemapview setRegion:startregion];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:15:43.193

在 viewDidLoad 或 viewWillAppear 中调用 setRegion 方法时，我的应用具有完全相同的行为。但是，在 viewDidAppear 中调用它可以解决问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T22:12:58.343

`-(void)viewWillAppear:(BOOL)animated`我现在可以通过使用函数而不是使用来解决我的问题`-(void)viewDidLoad`

据我现在了解：

*   `ViewDidLoad`在打开新视图之前（在 segue 动画开始之前）调用一次。但是，要正确绘制地图仍然为时已晚。
*   `ViewDidAppear`每次在屏幕上出现视图后（在 segue 动画结束后）调用。
*   `ViewWillApper`在打开新视图之前（在 segue 动画之前）完全调用和计算。这就是为什么当你有地图时它可以正常工作的原因。

# node.js - 如何使用 javascript 和 pdfkit 将文本添加到 pdf？

> ID：14543111
> 
> 赞同：3
> 
> 时间：2013-01-27T00:23:31.540
> 
> 标签：node.js, pdf-generation

我安装了 pdfkit，现在我正在尝试将文本添加到 pdf 并将其保存到磁盘。我正在关注来自[http://blog.nodeknockout.com/post/9134350698/countdown-to-ko-8-introduction-to-pdfkit](http://blog.nodeknockout.com/post/9134350698/countdown-to-ko-8-introduction-to-pdfkit)的教程，但我一直在下面收到错误消息。如何使用 node.js 和 pdfkit 添加文本？

谢谢你。源代码：

```
 doc = new PDFDocument();
doc.moveTo(300, 75)
   .lineTo(373, 301)
   .lineTo(181, 161)
   .lineTo(419, 161)
   .lineTo(227, 301)
   .fill('red', 'even-odd');

    var loremIpsum = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in...';

    doc.y = 320;
    doc.fillColor('black')
   .text(loremIpsum, {
       paragraphGap: 10,
       indent: 20,
       align: 'justify',
       columns: 2
   });

    doc.write('out.pdf'); 
```

错误

```
/Users/sadmin/Dropbox/Node JS/wordlets/wordCloud.js:61
   .text(loremIpsum, {
    ^
TypeError: Property 'text' of object [object PDFDocument] is not a function
    at Object.createPDF (/Users/sadmin/Dropbox/Node JS/wordlets/wordCloud.js:61:5)
    at /Users/sadmin/Dropbox/Node JS/wordlets/requestHandlers.js:62:15
    at Request._callback (/Users/sadmin/Dropbox/Node JS/wordlets/wordCloud.js:116:5)
    at Request.init.self.callback (/Users/sadmin/node_modules/request/main.js:122:22)
    at Request.EventEmitter.emit (events.js:99:17)
    at Request.<anonymous> (/Users/sadmin/node_modules/request/main.js:661:16)
    at Request.EventEmitter.emit (events.js:126:20)
    at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (/Users/sadmin/node_modules/request/main.js:623:14)
    at IncomingMessage.EventEmitter.emit (events.js:126:20)
    at IncomingMessage._emitEnd (http.js:366:10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-18T21:45:34.317

应该是`doc.text`因为在`.fill`call 和之间还有其他代码行，所以会`.text`产生语法错误。

# javascript - 借助 html 在 javascript 中播放多个音频文件

> ID：14543113
> 
> 赞同：0
> 
> 时间：2013-01-27T00:23:41.883
> 
> 标签：javascript, html

我正在尝试播放背景音乐，并且在播放背景音乐时还需要播放许多音频文件。

那么我怎样才能在“javascript”和“html”的帮助下完成它..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:38:57.300

尝试以下方法开始：

```
track1 = new Audio('track1.mp3');
track2 = new Audio('track2.mp3');
track3 = new Audio('track3.mp3');

track1.play();
track2.play();
track3.play(); 
```

您可以在此处开始阅读 HTML 音频规范：http: [//html5doctor.com/native-audio-in-the-browser/](http://html5doctor.com/native-audio-in-the-browser/)

# ruby-on-rails - 更改 Friendly_ID 序列号 Rails

> ID：14543116
> 
> 赞同：1
> 
> 时间：2013-01-27T00:24:15.817
> 
> 标签：ruby-on-rails, friendly-id

开箱即用，当存在类似条目时，Friendly_ID 会将“--2”、“--3”... 添加到 slug 的末尾。

我知道我可以在哪里更改“sequence_separator”，但是在找到我称之为“sequencer”的东西时遇到了麻烦。我的帖子每年只会重复一次，所以我想在末尾添加年份而不是随机数。

**更新 1** Yannick，感谢您为我指明正确的方向。对该方法进行了一些研究，并[找到了文档](https://github.com/FriendlyId/friendly_id/blob/master/lib/friendly_id/slugged.rb)和一个[很好的问题](https://github.com/FriendlyId/friendly_id/issues/324)来帮助我把它放在一起。

```
 extend FriendlyId
  friendly_id :race_name_and_year, use: :slugged
  before_validation :race_name_and_year

  def resolve_friendly_id_conflict(candidates)
    candidates.first + friendly_id_config.sequence_separator + SecureRandom.uuid
  end

  def normalize_friendly_id(value)
    value.to_s.parameterize
  end

  def should_generate_new_friendly_id?
    slug.blank?
  end  

  def race_name_and_year
    self.slug ||= normalize_friendly_id("#{start.year}-#{name}")
  end 
```

虽然这可行，但它看起来相当复杂和混乱。当我通过 Active Admin 添加记录（即将上传）时，它也不会生成 slug。我认为最好将记录 ID 留在 URL 中，并在末尾添加实际上不用于查找记录的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T17:48:21.733

通过配置似乎是不可能的。现在它实际上使用 uuid 来促进序列生成。

你可以试试这样的猴子补丁

```
module FriendlyId
  module Slugged

    def resolve_friendly_id_conflict(candidates)
      candidates.first + friendly_id_config.sequence_separator + Date.today.year
    end
  end
end 
```

未经测试，但似乎在上一个版本中的正确位置您使用的是哪个版本？

# html - IE HTML5音频标签支持的m4a/mp4文件

> ID：14543117
> 
> 赞同：0
> 
> 时间：2013-01-27T00:24:29.800
> 
> 标签：html, audio, internet-explorer-9

如何使用 IE9 支持 HTML5 音频标签的 AAC 音频生成 m4a/mp4 文件？我试图通过 IE9 使用 iTunes 生成这样的文件，只是显示带有红叉的黑框代替 HTML5 音频标签。

# java - 如何使用 Jackson 正确反序列化 .NET 字典？

> ID：14543119
> 
> 赞同：0
> 
> 时间：2013-01-27T00:25:00.340
> 
> 标签：java, json, dictionary, jackson, deserialization

在下面的文字墙之前总结一下:-)

*我需要有关如何使用 Jackson 和自定义反序列化器反序列化 Dictionary 的帮助。*

现在我有一个与 .NET (C#) 服务器的 Android 应用程序通信。他们使用 JSON 进行通信。

在 JAVA 方面，我使用 Jackson 来处理 JSON，而在 .NET 方面，我使用内置的 DataContractSerializer（我知道，人们会开始评论我应该使用其他东西，但我不是这样......； -))

问题是我从 C# 发送字典，我希望将其反序列化为 HashMaps om JAVA 端，但我还没有找到一个很好的资源来做到这一点。

我从 C# 发送的字典的一个示例：

```
// Here, the object Equipment is the key, and the int following indicates the amount
[DataMember]
public Dictionary<Equipment, int> EquipmentList { get; set; } 
```

仅供参考，C# 中的 Equipment 对象：

```
[DataContract]
public class Equipment
{
    [DataMember]
    public uint Id { get; set; }
    [DataMember]
    public string Name { get; set; }

    public override bool Equals(object obj)
    {
        if (obj.GetType() != this.GetType())
            return false;
        Equipment e = (Equipment)obj;
        return e.Id == this.Id;
    }
} 
```

它在 C# 端正确序列化为像样的 JSON，字典如下所示：

```
//....
"EquipmentList":[
   {
      "Key":{
         "EquipmentId":123,
         "Name":"MyName"
       },
       "Value":1
   }
//.... 
```

我添加了一个自定义序列化程序（CustomMapSerializer），如下所示：

```
public static ObjectMapper mapper = new ObjectMapper();
private static SimpleDeserializers simpleDeserializers = new SimpleDeserializers();
private static StdDeserializerProvider sp = new StdDeserializerProvider();

public static void InitSerialization()
{
    simpleDeserializers.addDeserializer(String.class, new CustomStringDeserializer());
    simpleDeserializers.addDeserializer(Map.class, new CustomMapDeserializer());
    sp.withAdditionalDeserializers(simpleDeserializers);
    mapper.setDeserializerProvider(sp);
} 
```

并像这样装饰场地：

```
@JsonDeserialize(using=CustomMapDeserializer.class)
public Map<Equipment, Integer> EquipmentList; 
```

最后，当我运行它时，我确实在自定义反序列化器类中得到了休息，但我不知道如何从这里开始：

```
public class CustomMapDeserializer extends JsonDeserializer<Map> {

    @Override
    public Map deserialize(JsonParser arg0, DeserializationContext arg1) throws IOException, JsonProcessingException 
    {
        return new HashMap<Object, Object>(); // <-- I can break here
    }   
} 
```

**所以，我想要的是一些关于如何创建具有正确值的 HashMap 的输入，即反序列化的 Equipment 作为 Key 和 Int 作为值。**

有谁可以提供帮助吗？=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:34:27.400

好的，经过一段时间的测试和研究，这就是我想出的。

自定义反序列化器如下所示：

```
 public class CustomMapCoTravellerDeserializer extends JsonDeserializer<Map> {

    @Override
    public Map deserialize(JsonParser jp, DeserializationContext arg1) throws IOException, JsonProcessingException 
    {
        HashMap<CoTravellers, Integer> myMap = new HashMap<CoTravellers, Integer>();

            CoTravellers ct = new CoTravellers();

            jp.nextToken(); // {
            jp.nextToken(); // Key
            jp.nextToken(); // {
            jp.nextToken(); // "CoTravellerId"
            jp.nextToken(); // CoTravellerId Id
            int coTravellerValue = jp.getIntValue();
            jp.nextToken(); // Name
            jp.nextToken(); // Name Value
            String coTravellerName = jp.getText();
            jp.nextToken(); // }
            jp.nextToken(); // "Value"
            jp.nextToken(); // The value
            int nbr = jp.getIntValue();

            ct.CoTravellerId = coTravellerValue;
            ct.Name = coTravellerName;

            myMap.put(ct, nbr);

            return myMap;

    }   
} 
```

我认为这会起作用，如果我只能弄清楚我得到的 JsonMappingException ......但我会单独发布=）

# ruby-on-rails - Rails：二级布局

> ID：14543125
> 
> 赞同：0
> 
> 时间：2013-01-27T00:25:51.757
> 
> 标签：ruby-on-rails, layout

我开始了我的第一个*严肃*的Rails 应用程序。我正在构建一个站点，该站点需要特定模型的另一种结构，例如 application.html.erb。我希望有一个作为 application.html.erb 的一般布局或结构，但对于我的文章模型，然后`=yield`是该模型的任何视图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:29:17.120

您可以使用关键字`layout`覆盖控制器中的默认布局约定。

按照你的例子：

```
class ArticlesController < ApplicationController
  layout 'articles_layout'
  ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:30:14.560

请参阅[布局和渲染指南中有关嵌套布局的部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts)。

# javascript - 清除上次更改下方的表单字段

> ID：14543127
> 
> 赞同：0
> 
> 时间：2013-01-27T00:26:06.610
> 
> 标签：javascript, jquery, html, ajax

我制作了一个包含多个选择的表单。当您选择一个选项时，将启用下一个选择元素并使用 Ajax 和 PHP 将其更新为值。

但是，如果您更改前一个选项，它只会在更改后重置选择字段，而不是在更改的选项下方重置所有选择。

那么如何清除最后一个更改元素下方的所有表单元素呢？

```
<form action="" method="post">
  Year: 
  <select onchange="updateField(this.value, 'brand', 'Year', 'Marke_vozila')">
    <option>Select year..</option>
    %year%
  </select>
  <br />
  Brand: 
  <select id="brand" onchange="updateField(this.value, 'model', 'Marke_vozila', 'Model_vozila')">
  </select>
  <br />
  Model: 
  <select id="model" onchange="updateField(this.value, 'type', 'Model_vozila', 'Tip_vozila')">
  </select>
  <br />
  Type: 
  <select id="type" onchange="updateField(this.value, 'uitvoering', 'Tip_vozila', 'izvedba_vozila')">
  </select>
  <br />
  Uitvoering: 
  <select id="uitvoering">
  </select>
  <br />
  <input type="submit" name="submit" class="submit" value="Submit" />
</form> 
```

阿贾克斯：

```
 <script>
    function updateField(str, id, prevvalue, value)
    {
    if (str=="")
      {
      document.getElementById(id).innerHTML="";
      return;
      } 
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById(id).innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","inc/form_rest.php?q="+str+"&prevvalue="+prevvalue+"&value="+value,true);
    xmlhttp.send();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:28:50.730

按顺序为每个表单元素提供某种形式的编号标识符，例如 inNum=0、inNum=1 等。

在 onchange 处理程序中获取此属性的值，然后选择每个 inNum 属性大于此值的元素并重置其值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:30:42.227

我没有看到 JavaScript 代码，但您可以使用 jQuery [nextAll()](http://api.jquery.com/nextAll/)函数来选择所有剩余的兄弟姐妹。

例如：

```
$(current_field).nextAll('select').val('') 
```

# c++ - 将字符串存储到整数数组

> ID：14543129
> 
> 赞同：1
> 
> 时间：2013-01-27T00:26:42.807
> 
> 标签：c++, visual-studio-2010

我正在尝试将一个数字（12 位）读取为一个字符串，然后将其复制到一个整数数组中，但没有得到正确的结果。

我的代码在这里：

```
//header files
#include<iostream>
#include<string>

// namespace 
using namespace std ;

int main ()

{
    string input ;

    do
    {
        cout << "Make sure the number of digits are exactly 12 : ";
        cin >> input ;
    } while((input.length()) != 12 );

    int code[11] ; // array to store the code

    //change string to integer
    int intVal = atoi(input.c_str());

    //
    for (int i = 12; i >= 0 ; i--)
    {
        code[i] = intVal % 10;
        intVal /= 10 ;
        cout << code[i] ;
    }

    cout << endl ;
    //now display code
    for (int i = 0 ; i < 11 ; i++)
    {
        cout << code[i];
    }

    system ("pause") ;
    return 0 ;
} 
```

因此，对于 123456789101 的基本输入，它应该存储在 code[] 数组中。

因此，当我显示代码循环时，我想确保它与 123456789101 相同。

但它来了：

在代码期间

```
for (int i = 0 ; i < 11 ; i++)
{
cout << code[i];
} 
```

它显示 00021474836 ，我希望它在其中显示我的号码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:34:59.163

To turn string to int array, try:

```
std::string input = "123456789101";
int code[12];

for (int i = 0 ; i < 12 ; i++)
{
  code[i] = input.at(i) - '0';
} 
```

Also intvVal is not big enough to hold `123456789101`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:32:06.807

`code`长度为 11，但您尝试访问`for`循环中的索引 12 和 11，这两个索引都不存在。其次，12 位数字不适合常规的 32 位整数，对于带符号的 32 位整数，最大值是 2147483647。

Try using [`atol`](http://www.cplusplus.com/reference/cstdlib/atol/) and storing the value in a `uint64_t`, and fix your array indices (The length should be 12, and the indices should be 0-11).

# javascript - 同时异步保存到 chrome 无限存储

> ID：14543131
> 
> 赞同：4
> 
> 时间：2013-01-27T00:26:52.870
> 
> 标签：javascript, google-chrome-extension, local-storage

我正在尝试编写一个涉及使用 chrome 无限存储的 Chrome 扩展程序。我目前正在从这样的存储中检索：

```
chrome.storage.local.get(null, function (items) {  
    return items;  
} 
```

然后像这样保存回存储：

```
chrome.storage.local.set(items); 
```

我的问题是，在这种情况下，“项目”是一个关联数组，我希望能够同时向该数组添加多个值。因为 get 方法是异步的，所以我不能保证两个不同的进程尝试从存储中调用 get 数组，向其中添加一个键/值对然后将其设置回来将导致两者都被保存。更糟糕的是，如果有足够的并发进程，这样做似乎会使扩展程序崩溃。

有没有更好的方法来使用 chrome.storage？还是我必须实施某种排队系统？我以前使用的是 localStorage，它没有异步方面，但是超过了最大存储容量，所以我试图切换到使用无限存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:17:29.277

我会继续使用您想到的排队系统。如果两个进程都可以访问全局对象，则让该对象管理写入，并让应用程序的其余部分使用该对象而不是`chrome.local.storage.set(...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:32:10.543

两个无限存储选项

*   [铬存储](https://developer.chrome.com/extensions/storage.html)
*   [window.webkitStorageInfo](https://developers.google.com/chrome/whitepapers/storage)

都是异步的，这在性能方面很好，我想实现多个`set`和`get`操作的同步是你解决这个问题的方法。

# c++ - sizeof 在创建数组后在 c++ 中工作异常

> ID：14543135
> 
> 赞同：-7
> 
> 时间：2013-01-27T00:26:58.950
> 
> 标签：c++, arrays, sizeof

> **可能重复：**
> [如何找到 sizeof（指向数组的指针）](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)

我正在使用以下代码创建一个数组

```
float *A;
A = (float *) malloc(100*sizeof(float));
float *B;
B = (float *) malloc(100*sizeof(float)); 
```

但是在这些之后，当我通过以下方式键入 A 和 B 的大小时，我得到 2 作为结果，因为我希望看到 100。

```
sizeof(A)/sizeof(float) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T00:27:53.887

你的期望是错误的。`A`是 a `float*`，因此`sizeof(float*)`无论您实际如何分配它，它的大小都是 。

如果您有一个静态数组 - 即`float A[100]`，那么这将起作用。

因为这是 C++，所以使用`std::array`or `std::vector`。

最坏的情况，使用`new[]`. **绝对不要用`malloc`。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T00:30:01.383

这仅适用于在当前范围内定义的静态数组。

您在示例中得到的只是指针`float`的大小除以`float`.

# vb.net - 数组到组合框？

> ID：14543137
> 
> 赞同：0
> 
> 时间：2013-01-27T00:27:12.573
> 
> 标签：vb.net

我有这个结构，带有结构类型的数组。

```
Structure CustomerAccountsRec
    Dim strFirstName As String
    Dim strLastName As String
    Dim intAge As Integer
    Dim strAddress As String
    Dim strTown As String
    Dim strPostcode As String
    Dim strCusNum As String
End Structure

Public strCusArray() As CustomerAccountsRec 
```

我希望能够获取数组的 strCusNum 并用它填充一个组合框，但不知道如何。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:53:54.847

如前所述，您还可以覆盖`ToString`结构中的方法。我还创建了一个`List(Of CustomerAccountsRec)`可以更轻松地添加值的方法，然后将列表绑定到`ComboBox's`DataSource

```
Public Class Form1
    Structure CustomerAccountsRec
        Dim strFirstName As String
        Dim strLastName As String
        Dim intAge As Integer
        Dim strAddress As String
        Dim strTown As String
        Dim strPostcode As String
        Dim strCusNum As String
        Public Overrides Function ToString() As String
            Return strCusNum
        End Function
    End Structure

    Public strCusArray As List(Of CustomerAccountsRec) = New List(Of CustomerAccountsRec)

    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.

        Dim carec As CustomerAccountsRec = New CustomerAccountsRec
        carec.strFirstName = "Hello"
        carec.strLastName = "World"
        carec.strCusNum = "Hello World"
        carec.strTown = "AnyTown"
        carec.strAddress = "AnyStreet"
        carec.strCusNum = "12345678"
        strCusArray.Add(carec)
        ComboBox1.DataSource = strCusArray

    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:45:43.647

您可以使用 LINQ 获取包含要显示的项目的数组，然后将该数组绑定到`ComboBox`.

```
Dim combo as New ComboBox
combo.DataSource = strCusArray.Select(Function(f) f.strCusNum).ToArray() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T01:31:55.547

如果我理解你的问题。

的实际结果`Public strCusArray() As CustomerAccountsRec`是 null，所以我们不能使用它来添加所有项目 from `CustomerAccountsRec`to `ComboBox`

对于`List`您的所有项目，`Structure`我们需要使用**[System.Reflection 命名空间](http://msdn.microsoft.com/en-us/library/136wx94f.aspx)**

```
 Structure CustomerAccountsRec
        Dim strFirstName As String
        Dim strLastName As String
        Dim intAge As Integer
        Dim strAddress As String
        Dim strTown As String
        Dim strPostcode As String
        Dim strCusNum As String
  End Structure

  Dim fi As FieldInfo() = GetType(CustomerAccountsRec).GetFields(BindingFlags.[Public] Or BindingFlags.Instance)
        For Each info As FieldInfo In fi
            ComboBox2.Items.Add(info.Name)
  Next 
```

来源：[C#版本](https://stackoverflow.com/a/997752/1080742)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T00:39:02.817

您可以使用 ComboBox.Items.Add 方法添加项目，并且要正确显示结构，您必须覆盖它的 ToString 方法。

看：

[ComboBox：向项目添加文本和值（无绑定源）](https://stackoverflow.com/questions/3063320/combobox-adding-text-and-value-to-an-item-no-binding-source)

[如何为组合框项添加值](https://stackoverflow.com/questions/1887388/how-to-add-value-to-combobox-item)

# ios - ios - 核心数据 - 如果在保存完成之前删除应用程序崩溃

> ID：14543146
> 
> 赞同：0
> 
> 时间：2013-01-27T00:28:31.840
> 
> 标签：ios, core-data, asynchronous, crash, nested

我的应用程序只是使用 Core Data 添加了一些用户信息（姓名、生日、缩略图……）。

我注意到，如果我在创建用户后立即删除它，我的应用程序就会停止工作（不是崩溃，xCode 不返回崩溃日志，什么也没有）。

`delete`我正在使用异步嵌套上下文来保存我的用户信息，所以我猜这种行为是由于我的语句在我的语句之前执行的事实`save`。

但由于我是 Core Data 的初学者，我真的不知道如何处理它。我什至不知道我是否以正确的方式声明了嵌套上下文。

这是我的`save`代码：

```
NSManagedObjectContext *tmpContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    tmpContext.parentContext = self.backgroundManagedObjectContext;

    BSStudent *newStudent = (BSStudent *)[NSEntityDescription insertNewObjectForEntityForName:kBSStudent inManagedObjectContext:tmpContext];

    newStudent.firstname = firstname;
    newStudent.lastname = lastname;
    newStudent.birthdate = birthdate;
    newStudent.thumbnail = thumbnail;
    newStudent.createdAt = [NSDate date];

    [self dismissViewControllerAnimated:YES completion:nil];

    [tmpContext performBlock:^{
        [tmpContext save:nil];

        [self.backgroundManagedObjectContext performBlock:^{
            NSError *error;
            if (![self.backgroundManagedObjectContext save:&error]) {
                NSLog(@"%@", [error localizedDescription]);
            }

            [self.managedObjectContext performBlock:^{
                NSError *error;
                if (![self.managedObjectContext save:&error]) {
                    NSLog(@"%@", [error localizedDescription]);
                }
            }];
        }];
    }]; 
```

为了精确，`self.managedObjectContext`is a`NSPrivateQueueConcurrencyType`和`self.backgroundManagedObjectContext`is a `NSMainQueueConcurrencyType`。并且`self.backgroundManagedObject`是 的孩子`self.managedObjectContext`。

这是我的删除代码：

```
 BSStudent *student = objc_getAssociatedObject(alertView, kDeleteStudentAlertAssociatedKey);

    // on supprimer l'objet et on sauvegarde le contexte
    [self.managedObjectContext deleteObject:student];
    NSError *error;
    if(![self.managedObjectContext save:&error]) {
        NSLog(@"%@", [error localizedDescription]);
    } 
```

有人可以知道如何正确处理这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:22:11.353

您的删除可能使用`BSStudent`由与您删除时不同的上下文创建的。下面的代码将解决这个问题。

```
NSManagedObjectContext * deleteContext = student.managedObjectContext;
[deleteContext deleteObject:student]; 
```

如果您真的想使用其他上下文，请使用 ObjectID 重新获取学生

```
NSManagedObject * studentToDelete = [self.managedObjectContext objectWithID:student.objectID];
[self.managedObjectContext deleteObject:studentToDelete]; 
```

## 嵌套上下文提示

您的上下文可能没问题，但我看到很多人不必要地到处乱扔 performBlock。对于嵌套上下文，QueueConcurrencyType 指的是它将在其上执行 Core Data 操作的线程，而不是创建它的线程。因此，在它的 performBlock 中执行诸如 save 之类的操作是不必要的，并且可能导致死锁。

当您保存子上下文时，父上下文会自动与更改同步。如果您想自动向上保存到下一个更高的父级，我建议为子级保存的 NSManagedObjectContextDidSaveNotification 注册父级。您可以通过让 AppDelegate 具有用于创建子上下文的工厂方法来简化此操作。

```
- (NSManagedObjectContext *)createChildContext
{
    NSManagedObjectContext *tmpContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    tmpContext.parentContext = self.managedObjectContext;
    //Register for NSManagedObjectContextDidSaveNotification
    return tmpContext;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:50:29.800

如果您将 delete 包装在`performBlock`调用中，则它不能与 save 同时执行`performBlock`。

例如：

```
BSStudent *student = objc_getAssociatedObject(alertView, kDeleteStudentAlertAssociatedKey);

// on supprimer l'objet et on sauvegarde le contexte
[self.managedObjectContext performBlock:^{
    [self.managedObjectContext deleteObject:student];
    NSError *error;
    if(![self.managedObjectContext save:&error]) {
        NSLog(@"%@", [error localizedDescription]);
    }
}]; 
```

这是处理上下文的“首选”方式，因为它序列化对上下文的访问并将所有这些操作保留在上下文线程上，

我假设您正在崩溃，因为 objectID 在保存完成之前变得无效或更改，在调用堆栈的顶部附近您会看到有关“hash64”等的内容

# android - 启动我的应用程序的替代方法是什么？

> ID：14543147
> 
> 赞同：16
> 
> 时间：2013-01-27T00:28:38.827
> 
> 标签：android, android-intent, intentfilter, android-launcher

我可以通过以下方式启动我的应用程序：

1.  在启动器中点击其图标
2.  注册“可见”意图过滤器（我的意思是 - 用户点击例如“Send with..”然后选择我的应用程序）
3.  在拨号器和“呼叫”中输入数字代码 - “隐形”意图，用户无法选择应用程序，他只需输入代码

还有其他方法可以启动我的应用程序吗？（我最感兴趣的是第 3 段中的“隐形”意图等其他内容）。

*   假设我们有干净的设备，只有默认系统应用程序（最流行的谷歌应用程序也被视为默认应用程序）和我的应用程序
*   通常用户的方法是首选，但更困难的方法也将有用
*   可以在一个设备上使用的变体（不需要接近其他设备）是首选，但“多于一个设备变体”也将是有用的。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T16:19:42.837

**您还可以从 Web 浏览器运行您的应用程序：**

```
<intent-filter>
<data android:scheme="my.special.scheme" />
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT"/>
<category android:name="android.intent.category.BROWSABLE"/>
</intent-filter> 
```

* * *

**您可以在 NFC 交易中启动您的应用程序：**

进入 mainfest`<uses-feature android:name="android.hardware.nfc" />`

在此处阅读有关此内容的更多信息：[链接](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

* * *

**您还可以在收到带有密码的短信时注册接收器并启动应用程序：**

```
 public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();

            Object messages[] = (Object[]) bundle.get("pdus");
            SmsMessage smsMessage[] = new SmsMessage[messages.length];
            for (int n = 0; n &lt; messages.length; n++) {
            smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
            }

            String text = smsMessage[0].getMessageBody();

if(text = "yoursecretcode") {
//launch the app 
abortBroadcast(); //if you want to hide this messeage
 } 
            } 
```

所需权限：`<uses-permission android:name="android.permission.RECEIVE_SMS"></uses-permission>`

* * *

**当您收到来自所选电话号码的呼叫时，您还可以注册接收器并启动应用程序：**

```
public class ServiceReceiver extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
    MyPhoneStateListener phoneListener=new MyPhoneStateListener();
    TelephonyManager telephony = (TelephonyManager) 
    context.getSystemService(Context.TELEPHONY_SERVICE);
    telephony.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);
  }
}

public class MyPhoneStateListener extends PhoneStateListener {
  public void onCallStateChanged(int state,String incomingNumber){
  switch(state){

    case TelephonyManager.CALL_STATE_RINGING:
      String numer = TelephonyManager.EXTRA_INCOMING_NUMBER;
   // launch your app if 'numer' is ...

 break;
        }
      } 
    } 
```

你需要这个`READ_PHONE_STATE`权限

* * *

**您也可以使用 shell 来执行此操作（手机必须植根）：**

例如 ：

```
Runtime.getRuntime().exec("su");

Runtime.getRuntime ().exec ("am start -n com.android.calculator2/.Calculator"); 
```

* * *

同事`"Arpan"`写道：

> 倾斜您的手机并挥手（基本上使用接近传感器来启动应用程序的 Intent）

我给你代码示例：

```
public class SensorActivity extends Service implements SensorEventListener {
  private SensorManager mSensorManager;
  private Sensor mProximity;

  @Override
  public final void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mProximity = mSensorManager.getDefaultSensor(Sensor.TYPE_PROXIMITY);
  }

  @Override
  public final void onAccuracyChanged(Sensor sensor, int accuracy) {
    // Do something here if sensor accuracy changes.
  }

  @Override
  public final void onSensorChanged(SensorEvent event) {
    float distance = event.values[0];
  if(!ss()) // LAUNCH YOUR APP IF ISN't RUNNNING
  }

  @Override
  protected void onResume() {
    // Register a listener for the sensor.
    super.onResume();
    mSensorManager.registerListener(this, mProximity, SensorManager.SENSOR_DELAY_NORMAL);
  }

  @Override
  protected void onPause() {
    // Be sure to unregister the sensor when the activity pauses.
    super.onPause();
    mSensorManager.unregisterListener(this);
  }
}

private boolean ss() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.packagename.something.ActivityName".equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

* * *

`"Arpan"`还写道：

> 插入任何 USB 设备并在清单中放置一个意图过滤器（如果 USB 主机模式可用）

```
public static boolean isConnected(Context context) {
        Intent intent = context.registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
        int plugged = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
        return plugged == BatteryManager.BATTERY_PLUGGED_AC || plugged == BatteryManager.BATTERY_PLUGGED_USB;
    } 
```

您可以将此粘贴到`Timer`

* * *

**我编辑了 Arpan 的帖子，我在 Android® 中添加了有关 Gesture Search 的链接。**

* * *

**您可以使用小部件启动应用程序（当用户单击此按钮时，应用程序将启动），我给您小部件类代码片段，您可以在[此处](http://www.helloandroid.com/tutorials/mastering-android-widget-development-part1)找到更多信息：**

```
package com.helloandroid.countdownexample;

import android.appwidget.AppWidgetManager;
import android.appwidget.AppWidgetProvider;
import android.content.Context;
import android.content.Intent;

public class CountdownWidget extends AppWidgetProvider {

    @Override
    public void onDeleted(Context context, int[] appWidgetIds) {
            //called when widgets are deleted
            //see that you get an array of widgetIds which are deleted
            //so handle the delete of multiple widgets in an iteration
            super.onDeleted(context, appWidgetIds);
    }

    @Override
    public void onDisabled(Context context) {
            super.onDisabled(context);
            //runs when all of the instances of the widget are deleted from
            //the home screen
            //here you can do some setup
    }

    @Override
    public void onEnabled(Context context) {
            super.onEnabled(context);
            //runs when all of the first instance of the widget are placed
            //on the home screen
    }

@Override
        public void onClick() {
         //your code to launch application...       
        }

    @Override
    public void onReceive(Context context, Intent intent) {
            //all the intents get handled by this method
            //mainly used to handle self created intents, which are not
            //handled by any other method

            //the super call delegates the action to the other methods

            //for example the APPWIDGET_UPDATE intent arrives here first
            //and the super call executes the onUpdate in this case
            //so it is even possible to handle the functionality of the
            //other methods here
            //or if you don't call super you can overwrite the standard
            //flow of intent handling
            super.onReceive(context, intent);
    }

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                    int[] appWidgetIds) {
            //runs on APPWIDGET_UPDATE
            //here is the widget content set, and updated
            //it is called once when the widget created
            //and periodically as set in the metadata xml

            //the layout modifications can be done using the AppWidgetManager
            //passed in the parameter, we will discuss it later

            //the appWidgetIds contains the Ids of all the widget instances
            //so here you want likely update all of them in an iteration

            //we will use only the first creation run
            super.onUpdate(context, appWidgetManager, appWidgetIds);
    }

} 
```

* * *

**检查耳机是否插入**

每当插入耳机时，`ACTION_HEADSET_PLUG`都会触发 Intent ( )。通过检查`BroadcastReceiver`并启动 Acitivity

```
IntentFilter f = new IntentFilter();
f.addAction(Intent.ACTION_HEADSET_PLUG);
registerReceiver(headsetPlugReceiver, f);

public BroadcastReceiver headsetPlugReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // start new Activity or do something else
    }
}; 
```

在清单中：

```
<receiver android:name="activity.to.receive.headplug.event">    
  <intent-filter>
    <action android:name="android.intent.action.HEADSET_PLUG" />
  </intent-filter>
</receiver> 
```

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T12:23:23.717

1.  倾斜您的手机并挥手（基本上使用接近传感器来启动应用程序的 Intent）
2.  屏幕点击和/或手势启动意图（您可以在[此处](http://android-developers.blogspot.com/2009/10/gestures-on-android-16.html)阅读有关此内容）
3.  插入任何 USB 设备并在清单中放置一个意图过滤器（如果 USB 主机模式可用）

# iteration - 迭代查找数字（来自指数函数）

> ID：14543148
> 
> 赞同：1
> 
> 时间：2013-01-27T00:28:41.177
> 
> 标签：iteration

我终于得到了从曲线到运行点的距离公式： `approx = 2 * (b * (Math.Log(a) * (Math.Log(k) * Math.Pow(k, (b * cycleX))) * Math.Pow(a, (Math.Pow(k, (b * cycleX)))) * (Math.Pow(a, (Math.Pow(k, (b * cycleX))))) - points[i].Y) + cycleX - points[i].X);`

因此，随着`approx`接近 0，`cycleX`给了我正确的坐标来计算到该点的距离。

这里唯一的问题是定义一种修改`cycleX`. 我尝试使用一系列`if`'，但有时`approx`最终会跳到正数（来自负数）。我应该怎么做才能正确修改cycleX的值？

注意：通常需要降低到 0.0001 才能得到 -1 到 1 范围内的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:01:36.860

For this kind of problem, it's often useful to know about [Newton's method](http://en.wikipedia.org/wiki/Newton%27s_method):

Of course, the forumula for that is

![x_{n+1} = x_n - \frac{f(x_n)}{f'(x_n)}. \,!](../Images/5237d0f8b65b238362c99dc9eac1a52f.png)

Of course, besides the fact that for some functions this quite unstable (I don't expect yours to be, though), implemented purely for your case, it would mean you would need to calculate yet another derivative (of your derivative)! However, I think for your case, you might be able to just approximate the derivative.

You didn't mention the language your implementation would eventually be in, so I'll just use javascript for convenience.

To estimate your derivative, simply choose a deltaX that would be convenient.

So if you have a function

```
var df = function (cycleX) {
  return 2 * (b * (Math.log(a) * (Math.log(k) * Math.pow(k, (b * cycleX))) * Math.pow(a, (Math.pow(k, (b * cycleX)))) * (Math.pow(a, (Math.pow(k, (b * cycleX))))) - Y) + cycleX - X);
}; 
```

you can estimate it's derivative via

```
 y = df(cycleX);
  y1 = (df(cycleX + deltaX) - y) / deltaX; 
```

And then proceed via.

```
 cycleXnew = cycleX - y / y1; 
```

And then it's just a matter of looping until it converges (or not).

See example jsFiddle: [http://jsfiddle.net/jfcox/3wRtj/](http://jsfiddle.net/jfcox/3wRtj/)

Edit: I give no guarantees as to how fast it might converge or even how well an estimated derivative would work with respect to Newton's method. For the parameters I've tried given your function `f(x) = a^(k^(bx))`, it seems to work well, but I haven't tried much.

Edit II. Of course, the above jsFiddle *also* assumes only a single solution that we'd need to search for.

# c++ - 架构 x86_64“_SDL_main”的 SDL 错误未定义符号

> ID：14543150
> 
> 赞同：11
> 
> 时间：2013-01-27T00:29:30.997
> 
> 标签：c++, xcode, macos, cocoa, sdl

我在我的 mac os x 上使用 C++ 和 SDL Cocoa 和 Foundation 框架。我收到以下错误

```
Undefined symbols for architecture x86_64:
  "_SDL_main", referenced from:
      -[SDLMain applicationDidFinishLaunching:] in SDLMain.o
ld: symbol(s) not found for architecture x86_64 
```

当我运行以下代码时

```
#import <Foundation/Foundation.h>
#import <SDL/SDL.h>
#include "SDLMain.h"
int main(int argc, const char * argv[])
{
    SDL_Init(SDL_INIT_EVERYTHING);
    SDL_SetVideoMode(640,480,32,SDL_DOUBLEBUF);
    SDL_Event event;
    bool isRunning = true;
    while(SDL_PollEvent(&event)){
        if(event.type == SDL_QUIT){
            isRunning=false;
        }
    }

    SDL_Quit();
    return 0;
} 
```

我不知道出了什么问题，尽管似乎当我进入 SDLMain.m 文件并注释掉这行代码时

```
status = SDL_main (gArgc, gArgv); 
```

程序编译没有问题。但是，它不起作用。没有窗户像它应该的那样打开。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-03T01:34:22.183

I bet your `main` function signature is incorrect. You use:

```
int main(int argc, const char * argv[])
                   ^^^^^ 
```

but SDL_main.h wants

```
int main(int argc, char *argv[]) 
```

**Why?**

You see, SDL does something really horrific when compiling: It renames your `main` function to `SDL_main`, injecting its own main function which, in turn, calls yours.

Note that if this doesn't work, then you may be compiling with wrong flags. To be sure, get the flags by typing:

```
$ sdl-config --cflags --libs 
```

For more information, see [Simply including SDL header causes linker error](https://stackoverflow.com/questions/7071971/simply-including-sdl-header-causes-linker-error)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-20T02:17:50.390

我有同样的问题，即使我的主要签名是正确的。我在这里找到了答案：[SDL in XCode 4.3.2 SDLMain.o undefined symbols](https://stackoverflow.com/questions/11032157/sdl-in-xcode-4-3-2-sdlmain-o-undefined-symbols)

> 原来问题是我将 SDLMain.m 和 SDLMain.h（根据 libSDL 网站上关于 OS X 框架的建议）添加到与 main 混淆的现有 SDL 项目中。底线是您不需要这些文件，因为您使用的是 Cocoa——SDL 自己的测试应用程序也不使用它，并且在 OS X 上运行得很好。

# python - 蟒蛇生成器

> ID：14543169
> 
> 赞同：0
> 
> 时间：2013-01-27T00:32:39.303
> 
> 标签：python, sql, methods

我有功课，我坚持。我已经尽我所能，但我被卡住了，有人能指出我正确的方向吗......我坚持让每个数据行成为一个新对象。通常我会认为我可以遍历行，但这只会返回最后一行

问题：

修改classFactory.py源码，让build_row函数返回的DataRow类多了一个方法：

检索（自我，curs，条件=无）

self 是（像往常一样）正在调用其方法的实例，curs 是现有数据库连接上的数据库游标，条件（如果存在）是条件字符串，所有接收的行都必须为真。

检索方法应该是一个生成器，产生结果集的连续行，直到它完全耗尽。每行都应该是 DataRow 类型的新对象。

这就是我所拥有的--------测试：

```
 import unittest
 from classFactory import build_row

 class DBTest(unittest.TestCase):

     def setUp(self):
         C = build_row("user", "id name email")
         self.c = C([1, "Steve Holden", "steve@holdenweb.com"])

     def test_attributes(self):
         self.assertEqual(self.c.id, 1)
         self.assertEqual(self.c.name, "Steve Holden")
         self.assertEqual(self.c.email, "steve@holdenweb.com")

     def test_repr(self):
         self.assertEqual(repr(self.c),
                     "user_record(1, 'Steve Holden', 'steve@holdenweb.com')")

 if __name__ == "__main__":
     unittest.main() 
```

我正在测试的脚本

```
 def build_row(table, cols):
     """Build a class that creates instances of specific rows"""
     class DataRow:
         """Generic data row class, specialized by surrounding function"""
         def __init__(self, data):
             """Uses data and column names to inject attributes"""
             assert len(data)==len(self.cols)
             for colname, dat in zip(self.cols, data):
                 setattr(self, colname, dat)
         def __repr__(self):
             return "{0}_record({1})".format(self.table, ", ".join(["   {0!r}".format(getattr(self, c)) for c in self.cols]))

DataRow.table = table
DataRow.cols = cols.split()
return DataRow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:59:58.137

像往常一样遍历行，但使用[`yield`](http://docs.python.org/2/tutorial/classes.html#generators)而不是`return`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:00:16.330

它应该大致类似于以下内容：

```
def retrieve(self, curs, condition=None):
    query_ = "SELECT * FROM rows"
    if condition is not None:
        query_ += " %s" %condition
    curs.execute(query_)

    for row in curs.fetchall(): # iterate over the retrieved results
        yield row               # and yield each row in turn 
```

# javascript - 将实际操作应用于右键单击上下文菜单

> ID：14543171
> 
> 赞同：1
> 
> 时间：2013-01-27T00:33:02.443
> 
> 标签：javascript, jquery, contextmenu

我正在尝试使用此右键单击上下文菜单。它可以按预期在视觉上工作，但是当单击菜单项时，我不知道从哪里开始应用实际操作。显然，现在它所说的只是点击了返回菜单项 - 目标 ID....，显然当有人点击它时，它实际上会将他们带回一个页面，只是说明他们点击了什么。

这是生成菜单的 jquery

```
<script>
    var callback = function(target,element){
        $(target).html('<span style="color:red">' +$(element).html() +'</span> menu is clicked, Target id: '+ $(target).attr('id'));
    };
    var menu = {};

    menu['back']            = {icon:'icon-arrow-left',text:'Back',click:callback};
    menu['forward']         = {icon:'icon-arrow-right',text:'Forward',click:callback};

    menu['view']            = {text:'View',click:callback};
    menu['sortby']          = {text:'Sort by',click:callback};
    menu['refresh']         = {icon:'icon-refresh',text:'Refresh',click:callback};
    menu['notepad']         = {text:'Notepad++',click:callback};

    menu['s1']          = '---';
    menu['copy']            = {text:'Copy',click:callback};
    menu['paste']           = {disabled:true,text:'Paste',click:callback};
    menu['paste_shortcut']          = {disabled:true,text:'Paste shortcut',click:callback};

    menu['s2']          = '---';
    menu['create_shortcut']         = {text:'Create shortcut',click:callback};
    menu['rename']          = {text:'Rename',click:callback};
    menu['del']         = {text:'Delete',click:callback};

    menu['s3']          = '---';
    menu['properties']      = {text:'Properties',click:callback};

    $('#id0').contextMenu(menu);

    $('body').contextMenu(menu);
    $('body').contextMenu('beforeDisplay',function(target){ console.log(target.html()) });
</script> 
```

感谢您在哪里寻找或如何提前开始的任何帮助/指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:37:15.740

代替

```
 function(target){ console.log(target.html()) } 
```

具有执行您的操作的功能。

# google-cloud-datastore - AppEngine Datastore - 更新实体会删除子实体吗？

> ID：14543172
> 
> 赞同：1
> 
> 时间：2013-01-27T00:33:11.443
> 
> 标签：google-cloud-datastore

官方文档[https://developers.google.com/appengine/docs/java/datastore/entities](https://developers.google.com/appengine/docs/java/datastore/entities)对Datastore的父关系并不清楚：“Datastore API不区分创建新实体和更新现有实体" 那么，用相同的键保存实体是否不仅会更新属性，还会删除后代实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:52:59.047

根据我的本地机器（模拟数据存储）上的测试，更新属性不会删除后代实体。因此更新是可能的，尽管没有反映在 API 的语法中。

# postgresql - postgresql - 设计具有混合节点类型的树层次结构（继承无济于事！）

> ID：14543173
> 
> 赞同：0
> 
> 时间：2013-01-27T00:33:20.710
> 
> 标签：postgresql, tree

我有一个关于在 postgresql(9.1) 中实现继承的问题。

目的是建立一个地理层级模型，可以将国家、州和大陆混合起来创建“区域”。然后这些区域也可以与国家等混合在一起，以创建一个真正令人敬畏的区域层次结构

所以在我的逻辑模型中，一切都是一种“地方”。可以通过使用两个“位置”沿边指定来构造区域树。设计如下，在Java层易于管理。

```
 create table place_t (
            place_id serial primary key,
            place_type varchar(10)
    );
    create table country_t (
            short_name varchar(30) unique, 
            name varchar(255) null
    ) inherits(place_t);
    create table region_t( 
            short_name varchar(30),
            hierarchy_id integer, -- references hierarchy_t(hierarchy_id)
            unique(short_name) -- (short_name,hierarchy_id)
    ) inherits(place_t);
    create table region_hier_t( 
            parent integer references place_t(place_id), -- would prefer FK region_t(place_id)
            child integer references place_t(place_id),
            primary key(parent,child)
    );

    insert into region_t values(DEFAULT, 'region', 'NA', 'north american ops');
    insert into region_t values(DEFAULT, 'region', 'EMEA', 'europe and middle east');
    insert into country_t values(DEFAULT, 'country', 'US', 'USD', 'united states');
    insert into country_t values(DEFAULT, 'country', 'CN', 'CND', 'canada'); 
```

到目前为止，一切都很好。但以下失败：

```
 insert  into region_hier_t
        select p.place_id, c.place_id
        from region_t as p, country_t as c
        where p.short_name = 'NA' and c.short_name = 'US'; 
```

原因是前 4 次插入没有在“place_t”中创建任何行。实时调频！Postgres 文档实际上提到了这一点。

问题是 - 有解决方法吗？通过在 region_t 和 country_t 上插入触发器来实现我自己的“继承”是我唯一能想到的。

第二个问题是 - 这种混合节点树结构是否有更好的设计？

由于某些原因，我不想过分依赖 postgres-contrib 功能。也许这很愚蠢，请随意插话，但要温和（并且仅在回答另一个问题之后）！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:31:12.803

对 region_hier_t 表中父列和子列的引用是错误的，因为如果您的引用调用另一个表，则无法从 country_t 插入键`(child integer references place_t(place_id))`；您可以删除它们或添加新的。因此，让我们采用第二个选项，并为引用的表 region_t 和 country_t 添加一个与给定键匹配的唯一约束：

```
ALTER TABLE region_t
  ADD CONSTRAINT pk_region_t PRIMARY KEY(place_id );

ALTER TABLE country_t
  ADD CONSTRAINT pk_country_t PRIMARY KEY(place_id ); 
```

region_hier_t 的正确 CREATE 语句是：

```
 create table region_hier_t( 
            parent integer references region_t(place_id),
            child integer references country_t(place_id),
            primary key(parent,child)
    ); 
```

最后你可以运行你的`INSERT`.

因此，正如您所见，您需要做许多改进。也许你应该重新考虑你的设计。看看这个答案：[如何以规范的方式存储邮政地址和政治部门？](https://stackoverflow.com/questions/12767857/how-to-store-postal-addresses-and-political-divisions-in-a-normalized-way/12905179#12905179)它比您的解决方案简单得多，并且更易于维护。

但是，如果您想坚持您的解决方案，请不要忘记在子表上设置主键（如上所示）。只有检查约束和非空约束由其子级继承，而您还没有这样做。

我看到您的其他插件无法正常工作：

```
insert into region_t values(DEFAULT, 'region', 'NA', 'north american ops');

ERROR:  invalid input syntax for integer: "north american ops"
LINE 1: ...ert into region_t values(DEFAULT, 'region', 'NA', 'north ame... 
```

所以列分配也有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T14:52:54.257

解决方法是摆脱您对 place_t 的外键并改为：

```
CREATE FUNCTION place_t_exists(id int)
RETURNS bool LANGUAGE SQL AS 
$$
   SELECT count(*) = 1 FROM place_t;
$$;

CREATE FUNCTION fkey_place_t() RETURNS TRIGGER
LANGUAGE PLPGSQL AS $$
BEGIN;
  IF place_t_exists(TG_ARGV[1]) THEN RETURN NEW
  ELSE RAISE EXCEPTION 'place_t does not exist';
  END IF;
END;
$$; 
```

当层次结构节点存在时，您还需要在子表上进行限制：

```
CREATE FUNCTION hierarchy_exists(id int) RETURNS BOOL LANGUAGE SQL AS
$$
SELECT COUNT(*) > 0 FROM region_heir_t WHERE parent = $1 or child = $1;
$$;

CREATE OR REPLACE FUNCTION fkey_hierarchy_trigger() RETURNS trigger LANGUAGE PLPGSQL AS
$$
BEGIN
   IF hierarchy_exists(old.place_id) THEN RAISE EXCEPTION 'Hierarchy node still exists';
   ELSE RETURN OLD;
END;
$$; 
```

然后你可以创建你的触发器：

```
CREATE CONSTRAINT TRIGGER fkey_place_parent AFTER INSERT OR UPDATE TO region_hier_t
FOR EACH ROW EXECUTE PROCEDURE fkey_place_t(new.parent);
CREATE CONSTRAINT TRIGGER fkey_place_child AFTER INSERT OR UPDATE TO region_hier_t
FOR EACH ROW EXECUTE PROCEDURE fkey_place_t(new.child); 
```

然后对于每个 place_t 子表：

```
CREATE CONSTRAINT TRIGGER fkey_hier_t TO [child_table]
FOR EACH ROW EXECUTE PROCEDURE fkey_hierarchy_trigger(); 
```

这个解决方案可能不值得，但如果你需要，知道如何去做是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T02:44:57.963

所以事实证明，PostgreSQL 中的继承与典型 OOP 语言中使用的继承有些不同。特别是，“超类”表不会自动填充。如果我必须使用我自己的触发器来做到这一点，我就没有继承结构的用例了。

所以我放弃了 Postgresql 继承并创建了自己的“place_t”表。以及“country_t”、“state_t”、“county_t”和“region_t”子表，通过“place_id”链接到父“place_t”。

在这些子表上，我创建了一个插入/更新前的行级触发器，以确保“place_id”引用“place_t”中的有效行，并且以后不会更改引用。IOW，子表中的“place_id”应该表现得像一次写入多次读取。

现在，我可以插入世界地理。另外，定义一个新的“区域”。我创建了一个“region_composition_t”来记录区域层次结构的边缘，父级是对“region_t”的引用，子级是对“place_t”的引用。

到目前为止，一切都很好。现在的挑战是如何抑制任何更新/删除级联效应。

# c# - Windows Azure 移动服务和序列化的困难

> ID：14543174
> 
> 赞同：2
> 
> 时间：2013-01-27T00:33:21.430
> 
> 标签：c#, json, serialization, azure, azure-mobile-services

我正在努力让我的模型类型与 Windows Azure 移动服务一起使用。它工作正常，除非我添加以下成员：

```
 [DataMemberJsonConverter(ConverterType = typeof(DictionaryJsonConverter))]
    public IDictionary<Tuple<int, int>, BoardSpaceState> pieceLocations { get; set; }

    /**
     * All of this serialization could probably be done better,
     * but I've spent enough time trying to make it work already.
     */
    public class DictionaryJsonConverter : IDataMemberJsonConverter 
    {
        public static Tuple<int, int> tupleOfString(string str)
        {
            var match = Regex.Match(str, @"\((\d+), (\d+)\)");
            // need to grab indexes 1 and 2 because 0 is the entire match
            return Tuple.Create(int.Parse(match.Groups[1].Value), int.Parse(match.Groups[2].Value));
        }

        public object ConvertFromJson(IJsonValue val)
        {
            var dict = JsonConvert.DeserializeObject<Dictionary<string, string>>(val.GetString());
            var deserialized = new Dictionary<Tuple<int, int>, BoardSpaceState>();
            foreach (var pieceLoc in dict)
            {
                deserialized[tupleOfString(pieceLoc.Key)] = (BoardSpaceState) Enum.Parse(typeof(BoardSpaceState), pieceLoc.Value);
            }
            return deserialized;
        }

        public IJsonValue ConvertToJson(object instance)
        {
            var dict = (IDictionary<Tuple<int, int>, BoardSpaceState>)instance;
            IDictionary<Tuple<int, int>, string> toSerialize = new Dictionary<Tuple<int, int>, string>();
            foreach (var pieceLoc in dict)
            {
                /** There may be an easier way to convert the enums to strings
                 * http://stackoverflow.com/questions/2441290/json-serialization-of-c-sharp-enum-as-string
                 * By default, Json.NET just converts the enum to its numeric value, which is not helpful.
                 * There could also be a way to do these dictionary conversions in a more functional way.
                 */
                toSerialize[pieceLoc.Key] = pieceLoc.Value.ToString();
            }

            var serialized = JsonConvert.SerializeObject(toSerialize);
            return JsonValue.CreateStringValue(serialized);
        }
    } 
```

**BoardSpaceState.cs**：

```
public enum BoardSpaceState
    {
        FriendlyPieceShort,
        FriendlyPieceTall,
        OpponentPieceShort,
        OpponentPieceTall,
        None
    } 
```

这在 Azure 中保持得很好，我可以在管理门户中看到数据。但是，当我尝试使用 加载数据时`toListAsync()`，出现以下异常：

```
{"Object must implement IConvertible."} System.Exception {System.InvalidCastException}

at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)\r\n
at Microsoft.WindowsAzure.MobileServices.TypeExtensions.ChangeType(Object value, Type desiredType)\r\n   
at Microsoft.WindowsAzure.MobileServices.MobileServiceTableSerializer.Deserialize(IJsonValue value, Object instance, Boolean ignoreCustomSerialization)\r\n   
at Microsoft.WindowsAzure.MobileServices.MobileServiceTableSerializer.Deserialize(IJsonValue value, Object instance)\r\n   
at Microsoft.WindowsAzure.MobileServices.MobileServiceTableSerializer.Deserialize[T](IJsonValue value)\r\n   
at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()\r\n   
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)\r\n   
at Microsoft.WindowsAzure.MobileServices.TotalCountList`1..ctor(IEnumerable`1 sequence)\r\n   
at Microsoft.WindowsAzure.MobileServices.MobileServiceTable`1.<ToListAsync>d__3f.MoveNext()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   
at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\r\n   
at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()\r\n   
at chivalry.DataManager.<withServerData>d__2.MoveNext() in c:\\Users\\Rosarch\\Documents\\Visual Studio 2012\\Projects\\chivalry\\chivalry\\DataManager.cs:line 35" string 
```

HRESULT 是 -2147467262。

我究竟做错了什么？

**更新：**

我得到错误的行是：

```
private IMobileServiceTable<Game> gameTable = App.MobileService.GetTable<Game>();
// ...
var games = await gameTable.ToListAsync();  // error here 
```

对于它的价值，如果我只是`new Dictionary<Tuple<int, int>, BoardSpaceState>()`从`DictionaryJsonConverter.ConvertFromJson`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:52:12.817

这似乎是 Azure 移动服务客户端 SDK 中的一个错误 - 我会将其提交给产品团队，感谢您报告它。

同时，有一个解决方法可以让它工作：不是`pieceLocations`用接口类型声明变量，如果你用字典类型声明它，那么它就会工作——这是我刚刚尝试过的代码。

```
public sealed partial class MainPage : Page
{
    public static MobileServiceClient MobileService = new MobileServiceClient(
        "https://YOUR-APP-NAME-HERE.azure-mobile.net/",
        "YOUR-APP-KEY-HERE"
    );

    public MainPage()
    {
        this.InitializeComponent();
    }

    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
    }

    private async void btnStart_Click_1(object sender, RoutedEventArgs e)
    {
        try
        {
            Game game = new Game();
            game.pieceLocations = new Dictionary<Tuple<int, int>, BoardSpaceState>();
            for (int i = 0; i < 5; i++)
            {
                for (int j = 0; j < 5; j++)
                {
                    game.pieceLocations[Tuple.Create(i, j)] = BoardSpaceState.None;
                }
            }

            game.pieceLocations[Tuple.Create(1, 2)] = BoardSpaceState.FriendlyPieceShort;
            game.pieceLocations[Tuple.Create(2, 1)] = BoardSpaceState.FriendlyPieceTall;
            game.pieceLocations[Tuple.Create(3, 4)] = BoardSpaceState.OpponentPieceShort;
            game.pieceLocations[Tuple.Create(4, 3)] = BoardSpaceState.OpponentPieceTall;

            var table = MobileService.GetTable<Game>();
            await table.InsertAsync(game);
            AddToDebug("Inserted game: ", game.Id);

            AddToDebug("Now trying to retrieve it...");

            var allGames = await table.ToListAsync();
            AddToDebug("All games, length = {0}", allGames.Count);
        }
        catch (Exception ex)
        {
            AddToDebug("Error: {0}", ex);
        }
    }

    void AddToDebug(string text, params object[] args)
    {
        if (args != null && args.Length > 0) text = string.Format(text, args);
        this.txtDebug.Text = this.txtDebug.Text + text + Environment.NewLine;
    }
}

[DataTable(Name = "Test")]
public class Game
{
    public int Id { get; set; }
    [DataMemberJsonConverter(ConverterType = typeof(DictionaryJsonConverter))]
    public Dictionary<Tuple<int, int>, BoardSpaceState> pieceLocations { get; set; }
}

public enum BoardSpaceState
{
    FriendlyPieceShort,
    FriendlyPieceTall,
    OpponentPieceShort,
    OpponentPieceTall,
    None
}

public class DictionaryJsonConverter : IDataMemberJsonConverter
{
    public static Tuple<int, int> tupleOfString(string str)
    {
        var match = Regex.Match(str, @"\((\d+), (\d+)\)");
        // need to grab indexes 1 and 2 because 0 is the entire match
        return Tuple.Create(int.Parse(match.Groups[1].Value), int.Parse(match.Groups[2].Value));
    }

    public object ConvertFromJson(IJsonValue val)
    {
        var dict = JsonConvert.DeserializeObject<Dictionary<string, string>>(val.GetString());
        var deserialized = new Dictionary<Tuple<int, int>, BoardSpaceState>();
        foreach (var pieceLoc in dict)
        {
            deserialized[tupleOfString(pieceLoc.Key)] = (BoardSpaceState)Enum.Parse(typeof(BoardSpaceState), pieceLoc.Value);
        }
        return deserialized;
    }

    public IJsonValue ConvertToJson(object instance)
    {
        var dict = (IDictionary<Tuple<int, int>, BoardSpaceState>)instance;
        IDictionary<Tuple<int, int>, string> toSerialize = new Dictionary<Tuple<int, int>, string>();
        foreach (var pieceLoc in dict)
        {
            /** There may be an easier way to convert the enums to strings
             * http://stackoverflow.com/questions/2441290/json-serialization-of-c-sharp-enum-as-string
             * By default, Json.NET just converts the enum to its numeric value, which is not helpful.
             * There could also be a way to do these dictionary conversions in a more functional way.
             */
            toSerialize[pieceLoc.Key] = pieceLoc.Value.ToString();
        }

        var serialized = JsonConvert.SerializeObject(toSerialize);
        return JsonValue.CreateStringValue(serialized);
    }
} 
```

# javascript - Chrome 智能网站搜索

> ID：14543177
> 
> 赞同：3
> 
> 时间：2013-01-27T00:34:48.610
> 
> 标签：javascript, google-chrome, search, google-api, google-search

我注意到有几个网站内置了 Chrome 搜索功能。如果我输入 stackoverflow.com 然后在地址栏中按空格，我会得到：![Chrome 网站搜索](../Images/e455e1659762feccf1140ec42bb33bd0.png)

* * *

* * *

* * *

这让我想到了这一点：![所以搜索](../Images/3d29f57cd63872a690f67a53e31ecd5d.png)

这是怎么做到的，像 Stackoverflow 和 github 这样的主要网站都有这个功能，但是没有实现这个功能的网站默认是常规的 google 搜索

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:15:57.320

这一行位于每个 Stack Overflow 页面的 HTML 中，负责：

```
<link rel="search" type="application/opensearchdescription+xml" title="Stack Overflow" href="/opensearch.xml"> 
```

该 XML 文件的格式记录在此处：

[http://www.opensearch.org/Specifications/OpenSearch/1.1](http://www.opensearch.org/Specifications/OpenSearch/1.1)

# asp.net - 具有自定义模型和 OData 的实体框架 5 - Web API

> ID：14543179
> 
> 赞同：2
> 
> 时间：2013-01-27T00:34:57.440
> 
> 标签：asp.net, entity-framework, asp.net-web-api, entity-framework-5, odata

我正在为新的 Web 应用程序评估一些技术。哪个应该使用带有 Web API 的 EF5 和 Knockout JS。我想在返回 IQueryable 时利用 OData 功能，但目前遇到了问题，如何将我的 EF 模型转换为我的业务模型。

据我所知，如果我想要一个更复杂的数据库（计算列、存储过程……），我应该使用 DB First 方法。（如我错了请纠正我）

因为我需要使用 DB-First 方法并希望我的模型独立于数据库，所以我需要在 EF-Models 之外创建它们。当我从 DataLayer 返回我的业务模型为 IQueryable 时，我失去了直接在数据库上执行其他查询的可能性，而是直接在 ASP.Net 服务器上执行它们。

当然，我不打算在 OData 上运行复杂的查询，并且无论如何都会将这些查询作为附加操作来实现，但在速度较慢的客户端（智能手机，...）上限制返回的数据并直接在服务器。

有没有办法摆脱这种困境，仍然能够使用 OData？

问候彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T03:21:09.073

您可以尝试使用 Code First 和 EF 迁移来创建/升级数据库。通过迁移，您可以创建自定义迁移，这些迁移可以只是 SQL 脚本，以实现 Code First 本身无法自动完成的任务。数据库优先方法也很好。

问问自己是否真的想要/需要支持多个后端。EF 可以，但很难维护。在这种情况下，我假设您的概念模型（csdl）对于所有数据库都是相同的，但您将拥有多个特定于商店的模型（ssdl 文件）。由于您的模型对于所有数据库都是相同的，因此无论您使用什么数据库，您都将拥有相同的 C# 类型。

当支持多个数据库时，您将无法对数据库运行 SQL 查询（或者更具体地说，如果您针对不同的数据库运行特定于一个数据库的 SQL 查询，则会出现异常），但理想情况下您不应该需要它。在最坏的情况下，您可能会将您希望在 SQL 中编码的逻辑包含在所有数据库中都存在的存储过程中。同样，我不知道何时需要这样做（唯一想到的是性能），但由于您计划使用 OData，除非您开始使用服务操作，否则无论如何您都无法运行这些查询。

由于无论数据库如何，您的概念模型都是相同的，因此无论数据库如何，您都将拥有相同的类型。您可以尝试将这些用于 DataLayer 和业务模型（尤其是如果您使用 POCO）。另一种方法是使用 POCO/DTO。（我没有在 Web API 中尝试过 OData 支持，但使用 WCF 数据服务，服务本身实际上会使用 EF 类型，因此您甚至无法告诉服务使用不同的类型集）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:41:39.637

只要您的转换不是太糟糕，您实际上不会失去使用 DB 优先模型对业务模型执行查询的能力。例如，我有一个 OData 服务，它有一个 PersistedCustomer（数据库模型）和一个客户（业务模型）。使用 EF5，我可以编写将 IQueryable 转换为 IQueryable 的 LINQ，针对 IQueryable 进行查询，并且 EF 可以将标准转换回原始数据库。

# c++ - c++ 换行返回类型

> ID：14543181
> 
> 赞同：2
> 
> 时间：2013-01-27T00:35:06.753
> 
> 标签：c++, types, type-conversion, wrapper

我正在包装一个我没有编写的库，以使其更加用户友好。有大量非常基本的函数，因此当真正需要的只是结果的类型转换时，必须包装所有这些函数并不理想。

一个人为的例子：

假设库有一个类 QueryService，它有这个方法：

```
WeirdInt getId() const; 
```

我想在我的界面中有一个标准的 int 但是，我可以从 WeirdInt 中得到一个 int 没问题，因为我知道如何做到这一点。在这种情况下，可以说 WeirdInt 具有：

```
int getValue() const; 
```

这是一个非常简单的例子，通常类型转换更复杂，并不总是只调用 getValue()。

从字面上看，有数百个函数调用会返回类似这些类型，并且一直在添加更多类型，所以我想尝试减轻自己的负担，每次库所做的只是为了将 WeirdType 变成类型。

我想最终得到一个 QueryServiceWrapper，它具有与 QueryService 相同的功能，但我已经转换了类型。我是否必须编写一个名称相同的方法来包装 QueryService 中的每个方法？还是我缺少一些魔法？还有更多内容，但与这个问题无关。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T00:45:34.780

我认为的第一种方法是尝试使用这样的模板

*   您为所有具有简单`getValue()`方法的包装器类型提供标准实现
*   你为所有其他人专门设计了模板

就像是：

```
class WeirdInt
{
  int v;
  public:
    WeirdInt(int v) : v(v) { }
    int getValue() { return v; }
};

class ComplexInt
{
  int v;
  public:
    ComplexInt(int v) : v(v) { }
    int getValue() { return v; }
};

template<typename A, typename B>
A wrap(B type)
{
  return type.getValue();
}

template<>
int wrap(ComplexInt type)
{
  int v = type.getValue();
  return v*2;
};

int x = wrap<int, WeirdInt>(WeirdInt(5));
int y = wrap<int, ComplexInt>(ComplexInt(10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:13:43.057

If the wrapper methods for `QueryService` have a simple pattern, you could also think of generating `QueryServiceWrapper` with some perl or python script, using some heuristics. Then you need to define some input parameters at most.

Even defining some macros would help in writing this wrapper class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T01:19:10.313

简而言之，如果您的目标是完全封装功能，`WeirdInt`并且`QueryService`不暴露给“客户端”代码，这样您就不需要在客户端代码中包含任何声明它们的标头，那么我怀疑您采用的方法会能够从任何魔法中受益。

当我之前完成此操作时，我的第一步是使用[pimpl 习惯用法](https://stackoverflow.com/questions/60570/why-should-the-pimpl-idiom-be-used)，以便您的标头不包含以下实现细节：

**QueryServiceWrapper.h**

```
class QueryServiceWrapperImpl;

class QueryServiceWrapper
{
public:
    QueryServiceWrapper();
    virtual ~QueryServiceWrapper();

    int getId();
private:
    QueryServiceWrapperImpl impl_;
}; 
```

然后在定义中，您可以将实现细节放在安全的地方，因为它不会泄露到任何下游代码中：

**QueryServiceWrapper.cpp**

```
struct QueryServiceWrapperImpl
{
public:
    QueryService svc_;
};

// ...

int QueryServiceWrapper::getValue()
{
    return impl_->svc_.getId().getValue();
} 
```

在不知道需要使用哪些不同的方法来进行转换的情况下，很难在这里添加太多，但是您当然可以使用模板函数来进行最流行的类型的转换。

这里的缺点是您必须自己实现所有内容。这可能是一把双刃剑，因为这样就可以只实现您真正需要的功能。包装从未使用过的功能通常没有意义。

我不知道将实现这些功能的“灵丹妙药” - 甚至是功能上的空包装器。我通常通过组合 shell 脚本来创建我想要的空类或获取标题的副本并使用 sed 或 Perl 使用文本操作将原始类型更改为包装类的新类型来完成此操作。

在这些情况下，很容易使用公共继承来启用对基本函数的访问，同时允许函数被覆盖。但是，这不适用于您的情况，因为您想要更改返回类型（对于重载来说还不够）并且（大概）您想要防止暴露原始`Weird`类型。

这里的前进方式必须是使用聚合，尽管在这种情况下，除非您准备自动创建类（使用代码生成），否则您无法轻松避免重新实现（某些）接口程度。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T01:09:01.003

more complex approach is to introduce a required number of [*facade*](http://en.wikipedia.org/wiki/Facade_pattern) classes over original `QueryService`, each of which has a limited set of functions for one particular query or query-type. I don't know that your particular `QueryService` do, so here is an imaginary example:

*   suppose the original class have a lot of *weired* methods worked with strange types

    ```
    struct OriginQueryService
    {
        WeirdType1 query_for_smth(...);
        WeirdType1 smth_related(...);

        WeirdType2 another_query(...);
        void smth_related_to_another_query(...);

        // and so on (a lot of other function-members)
    }; 
    ```

*   then you may write some facade classes like this:

    ```
    struct QueryFacade
    {
        OriginQueryService& m_instance;

        QueryFacade(OriginQueryService* qs) : m_instance(*qs) {}

        // Wrap original query_for_smth(), possible w/ changed type of
        // parameters (if you'd like to convert 'em from C++ native types to
        // some WeirdTypeX)...
        DesiredType1 query_for_smth(...);
        // more wrappers related to this particular query/task
        DesiredType1 smth_related(...);
    };

    struct AnotherQueryFacade
    {
        OriginQueryService& m_instance;

        AnotherQueryFacade(OriginQueryService* qs) : m_instance(*qs) {}

        DesiredType2 another_query(...);
        void smth_related_to_another_query(...);
    }; 
    ```

    every method delegate call to `m_instance` and decorated w/ input/output types conversion in a way you want it. Types conversion can be implemented as @Jack describe in his post. Or you can provide a set of free functions in your namespace (like `Desired fromWeird(const Weired&);` and `Weired toWeired(const Desired&);`) which would be choosen by [ADL](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup), so if some new type arise, all that you have to do is to provide overloads for this 2 functions... such approach work quite well in `boost::serialization`.

    Also you may provide a generic (template) version for that functions, which would call `getValue()` for example, in case if lot of your `Weired` types has such member.

# google-apps-script - 带有应用脚本的虚假数学

> ID：14543192
> 
> 赞同：0
> 
> 时间：2013-01-27T00:36:43.287
> 
> 标签：google-apps-script

有人在使用 Google Apps 脚本时遇到过虚假数学结果的问题吗？以下是代码，其中 a/b/c 是从另一个函数发送的。A/b/c 通过记录器进行验证。? StartPt 很好，但 endpt 正在生成一个错误值。

```
function calcTime(a,b,c)  {
  var x;
  var startHr = 8;
  var startMin = 0;
  var startSec=0;
  var startPt;
  var endPt; 
  startPt = (startHr * 60) + startMin + (startSec/60);
  endPt = (a * 60) + b + (c/60);
  Logger.log(endPt);
  x = endPt -startPt;

  return x;
}

flag 
```

我发现数学错误是 100 的乘法因子（计算 endPt 时，它会将结果乘以 100）。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:47:32.383

实数算术在 javascript 和 apps-script 中容易出现舍入错误。请参阅[浮点数学是否损坏？](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken). 如果您在调试器中查看函数，您会看到舍入错误，尤其是。与`(c/60)`. 但这不太可能导致 100 倍的错误。

最有可能的是，您的参数不是您想要的。例如，如果`b`以字符串形式到达，则计算`(a * 60) + b + (c/60)`将有效地忽略 b。但是，其他两个参数将变为数字以完成乘法和除法运算。（您可以通过使用来避免这种情况`b * 1`。）

无论如何，要确认您得到的参数是什么，请尝试用以下代码替换函数的前几行：

```
function calcTime(a,b,c)  {
  var params = {
    a:{type:typeof a, value:a},
    b:{type:typeof b, value:b},
    c:{type:typeof c, value:c}}
  Logger.log(params);
  var x;
  ... 
```

确认你得到了你需要的东西。例如，如果任何参数作为日期对象到达，那么您的数学将非常不正确。您可能只需要为您的数据源强制执行类型。

# vim - 如何获得与 OCaml 一起使用的综合错误检查？

> ID：14543193
> 
> 赞同：17
> 
> 时间：2013-01-27T00:37:03.720
> 
> 标签：vim, ocaml, syntastic

Syntastic 通常对我有用（例如，如果我编辑 C/C++ 文件，那么我会收到语法错误通知），但我**无法**让它**显示`OCaml`**.

否则，我的 OCaml 安装似乎很好，并且 Syntastic 文件头中提到的二进制`ocaml.vim`文件在我的路径中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-07T20:21:19.127

最可能的原因是没有安装它需要的语法检查器。例如：python 需要在 $PATH 中安装 flake8、pyflakes 或 pylint。要查看支持哪些可执行文件，只需查看 syntax_checkers//*.vim。请注意，别名不起作用；实际的可执行文件必须在您的 $PATH 中可用。符号链接没问题。您可以通过运行 :SyntasticInfo 查看 syntastic 关于可用检查器的想法。

它可能失败的另一个原因是命令行选项或语法检查器的错误输出可能已更改。在这种情况下，请确保您安装了最新版本的语法检查器。如果仍然失败，则创建一个问题 - 或者更好的是，创建一个拉取请求

来源： [https ://github.com/scrooloose/syntastic](https://github.com/scrooloose/syntastic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T15:54:26.363

[Merlin](https://github.com/the-lambda-church/merlin)提供了比 Syntastic 包含的检查器更完整的检查，并且会给出正确的类型错误并允许您使用核心之外的包。

# c# - 仅完成了 ReadProcessMemory 或 WriteProcessMemory 请求的一部分

> ID：14543196
> 
> 赞同：1
> 
> 时间：2013-01-27T00:37:42.410
> 
> 标签：c#, visual-studio-2008

我不想通过它的路径杀死一个进程。但是当我使用这段代码时，我得到了一个 win32Exception。

> 仅完成了 ReadProcessMemory 或 WriteProcessMemory 请求的一部分

我将目标构建更改为 x64，但仍然出现相同的错误。

```
 Process[] Processes = Process.GetProcessesByName("iw4");
 if (Processes.Length >= 1)
 {
    for (int i = 1; i < Processes.Length; i++)
    {
        Process Process = Processes[i];
        string processPath = Process.MainModule.FileName;

        if (processPath == s + "\\iw4.exe")
        {

            if (!File.Exists(s + "\\localization.txt"))
            {
                Log.Data("killed process!");
                Process.Kill();
            }
        }
    }
 } 
```

堆栈跟踪：

```
 at System.Diagnostics.NtProcexssManager.GetModuleInfos(Int32 processId, Boolean firstModuleOnly)
   at System.Diagnostics.Process.get_MainModule()
   at LocalizationFix.Fix.checkLocalizationFile()
   at LocalizationFix.Init.Main(String[] args)
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:00:14.980

问题不在发布的代码中。它最有可能在`LocalizationFix.Fix.checkLocalizationFile()`.

发布的有一个不相关的问题，因为您正在跳过进程列表中的第一个条目。C# 使用零相对索引。

也许你想要类似的东西：

```
foreach (var Process in Process.GetProcessesByName("iw4");
{
   ...
} 
```

此外，按照惯例，局部变量名称是小写的 Pascal 大小写。所以使用：

```
foreach (var process in Process.GetProcessesByName("iw4");
{
   ...
} 
```

# spring - jsf转换器丢失注入的属性

> ID：14543197
> 
> 赞同：1
> 
> 时间：2013-01-27T00:37:46.050
> 
> 标签：spring, jsf, converter, code-injection

我以前有这个工作，但后来我改变了一些东西，我不能让它再次工作。我正在尝试使用我的服务层来访问数据库并从我的转换器类中获取正确的对象，具体取决于用户单击的内容。我用弹簧将服务属性注入我的转换器。在调试期间，我可以看到该属性已正确设置。但是当我去调用 getService 时，它​​是空的。

```
@FacesConverter("PlaceConverter") 
```

@SessionScoped 公共类 PlaceConverter 实现 Converter {

```
private SearchQueryService searchQueryService;

/**
 * @return the searchQueryService
 */
public SearchQueryService getSearchQueryService() {
    return searchQueryService;
}

/**
 * @param searchQueryService the searchQueryService to set
 */
public void setSearchQueryService(SearchQueryService searchQueryService) {
    this.searchQueryService = searchQueryService;
}

@Override
public Object getAsObject(FacesContext arg0, UIComponent arg1, String submittedValue) {
        try {
            Criteria criteria = new Criteria();
            criteria.setId(Integer.parseInt(submittedValue));
            return getSearchQueryService().findPlaces(criteria).get(0);
        } catch (NumberFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    return null;
}

@Override
public String getAsString(FacesContext arg0, UIComponent arg1, Object value) {
    ((Place) value).setCategory(" (" + ((Place) value).getCategory() + ")");
    return String.valueOf(((Place) value).getPlaceId());
} 
```

}

```
<bean id="placeConverterBean" class="com.ghghg.converter.PlaceConverter">
    <property name="searchQueryService" ref="searchQueryServiceBean" />
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:04:58.467

只有当转换器被相关的依赖注入框架声明为托管 bean 时，转换器中的依赖注入才有效。例如 JSF 自己的`@ManagedBean`，或 CDI 的`@Named`，或 Spring 的`@Component`。您应该完全删除`@FacesConverter`并在 EL 范围内引用转换器实例，而不是通过转换器 ID 引用它。

因此，所以

```
<h:inputXxx converter="#{placeConverter}" /> 
```

或者

```
<f:converter binding="#{placeConverter}" /> 
```

代替

```
<h:inputXxx converter="PlaceConverter" /> 
```

或者

```
<f:converter converterId="PlaceConverter" /> 
```

您的具体问题表明您是通过转换器 ID 引用它（因此，通过`@FacesConverter`）。这样你最终得到一个没有任何注入依赖的转换器实例。

### 也可以看看：

*   [如何将 Spring bean 注入 JSF 转换器](https://stackoverflow.com/questions/10229396/how-to-inject-spring-bean-into-jsf-converter/10229586#10229586)

至于转换器本身的作用，这是强制性的，因为 HTML 代码表示为一个大字符串，而 HTTP 请求参数值只能表示为字符串。否则，复杂的 Java 对象将通过`Object#toString()`like so打印`com.example.Place@hashcode`，使其无法在服务器端使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:24:21.760

我找到了一种更好的方法，并且可能是更合适的方法来获得我想要的东西。我不完全确定转换器如何工作以及所选项目的值如何传递回托管 bean。我刚刚在我的方法中声明了一个新的 Place 对象，设置了所需的值。然后我看到它被传递给了我的托管 bean

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T09:35:50.573

`Converter`在更新模型 bean 之前开始播放。当用户填写一些输入并且此值首先传输到服务器时，会更新您的服务器端组件并发生下一次转换。保存在您的 bean 中的转换值（使用 method `getAsObject`）并且在渲染来自 bean 的视图值之前再次转换为，`String`因为从用户端一切都是一个字符串（然后`getAsString`调用方法）。

总而言之 -`Converter`方法是将用户输入更改为应用程序逻辑、bean 字段以及以其他方式将逻辑、bean 字段转换为用户友好字符串的最佳位置。

由于您的问题和问题。你的意思`SearchQueryService`是在方法内部不可用`getAsObject`。尝试添加`@Resource`具有适当`name`属性的附加注释，然后它应该由您的容器注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T08:15:27.937

我让它在带有 jsf 2.0 的 java EE 中像这样工作。通过使转换器成为支持 bean 的成员。我使用 CDI 实例化这个成员，但它应该与 spring 一样工作。

首先是支持bean：

```
@ViewScoped
@ManagedBean
public class SomeView implements Serializable {

    private static final long serialVersionUID = 1L;

    @Inject
    private SomeConverter converter;

    public Converter getConverter() {
        return converter;
    }
} 
```

然后这是 jsf xhtml：

```
<p:selectOneMenu id="someId" value="#{someView.value}" converter="#{someView.converter}">
    <f:selectItems value="#{someView.values}" var="object" itemLabel="#{object.name}" />
</p:selectOneMenu> 
```

# ruby-on-rails - 在 Ruby 中将 URL 存储在环境变量中

> ID：14543198
> 
> 赞同：1
> 
> 时间：2013-01-27T00:37:51.110
> 
> 标签：ruby-on-rails, ruby, environment-variables

我正在尝试将 URL 存储在我的环境变量中。所以例如

```
ENV['SET_COOKIE_URL'] = 'http://domain.com/setcookie' 
```

在我的应用程序布局页面中，我正在尝试这样做：

```
window.top.location = '<%= ENV["SET_COOKIE_URL"] %>'; 
```

当我尝试这个时，它总是返回`''`（空字符串）。

您不能在环境变量中存储和输出 URL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:09:10.223

如果您刚刚添加了这个环境变量，也许重新启动您的服务器将有助于获取环境更改。除了重新启动服务器之外，我看不出您无法在视图中使用该环境变量的任何原因。

# android - 在 JNI_OnLoad 上设置断点

> ID：14543200
> 
> 赞同：0
> 
> 时间：2013-01-27T00:38:10.353
> 
> 标签：android, android-ndk, gdb

我想在 JNI_OnLoad 中调试一些初始化代码，所以我需要在 JNI_OnLoad 中设置断点，但我尝试了 ARM DS-5 社区版 Eclipse 插件和 ADT，不走运，就是不能这样做，有人碰巧知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:34:58.143

设置程序断点 - 类似于 assert(0)。看看有没有帮助。

# c# - WPF：动画淡入/淡出的内部元素

> ID：14543201
> 
> 赞同：1
> 
> 时间：2013-01-27T00:38:10.493
> 
> 标签：c#, wpf, animation

我已经使用 WPF 大约一个星期了。我需要实现的控件之一是类似于 Treeview 的航空风格的 Windows 资源管理器，它非常接近原始版本。我看到原始的 WPF 树视图需要一些主题来实现，所以我在 Internet 上搜索了我可以使用的基本资源字典/主题。我找到了一个，从那以后我一直在调整它。我取得了一些进展，但是考虑到我一周前才开始使用 WPF，我遇到了一个我不知道如何解决的问题。

你看，7 样式资源管理器的行为之一是展开/折叠切换按钮淡入和淡出，这取决于一个人是否关注它的树视图或鼠标在它上面。

我试图通过样式和触发器（IsFocused）将其应用于实际的 TreeView 并从那里执行动画来实现该行为，但我不知道如何实际“解决”切换按钮。它们也以另一种风格定义。我一直在尝试在 XAML 中执行此操作，并且为了简单起见，我更喜欢在 XAML 中执行此操作，尽管我不知道这是否可能。

**这是资源字典（以及有关树视图元素的重要部分和我失败的尝试）：**

```
 <!-- Selected Hover Brushes -->
<LinearGradientBrush x:Key="HoverSelectedBackgroundBrushKey"
                     StartPoint="0,0"
                     EndPoint="0,1">
    <GradientStop Color="#DCEBFC"
                  Offset="0" />
    <GradientStop Color="#C1DBFC"
                  Offset="1" />
</LinearGradientBrush>
<SolidColorBrush x:Key="HoverSelectedOuterBorderBrushKey"
                 Color="#7DA2CE" />
<SolidColorBrush x:Key="HoverSelectedInnerBorderBrushKey"
                 Color="#EBF4FD" />

<!-- Hover Brushes -->
<LinearGradientBrush x:Key="HoverBackgroundBrushKey"
                     StartPoint="0,0"
                     EndPoint="0,1">
    <GradientStop Color="#FCFCFC"
                  Offset="0" />
    <GradientStop Color="#EBF3FD"
                  Offset="1" />
</LinearGradientBrush>
<SolidColorBrush x:Key="HoverOuterBorderBrushKey"
                 Color="#B8D6FB" />
<SolidColorBrush x:Key="HoverInnerBorderBrushKey"
                 Color="#F2F7FE" />

<!-- Selected (Active) Brushes -->
<LinearGradientBrush x:Key="SelectedActiveBackgroundBrushKey"
                     StartPoint="0,0"
                     EndPoint="0,1">
    <GradientStop Color="#EAF3FE"
                  Offset="0" />
    <GradientStop Color="#CFE4FE"
                  Offset="1" />
</LinearGradientBrush>
<SolidColorBrush x:Key="SelectedActiveOuterBorderBrushKey"
                 Color="#84ACDD" />
<SolidColorBrush x:Key="SelectedActiveInnerBorderBrushKey"
                 Color="#F1F7FE" />

<!-- Selected (Inactive) Brushes -->
<LinearGradientBrush x:Key="SelectedInactiveBackgroundBrushKey"
                     StartPoint="0,0"
                     EndPoint="0,1">
    <GradientStop Color="#F8F8F8"
                  Offset="0" />
    <GradientStop Color="#E5E5E5"
                  Offset="1" />
</LinearGradientBrush>
<SolidColorBrush x:Key="SelectedInactiveOuterBorderBrushKey"
                 Color="#D9D9D9" />
<SolidColorBrush x:Key="SelectedInactiveInnerBorderBrushKey"
                 Color="#F0F0F0" />

<!-- Supporting TreeViewItem Resources -->
<PathGeometry x:Key="TreeArrow">
    <PathGeometry.Figures>
        <PathFigureCollection>
            <PathFigure IsFilled="True"
                        StartPoint="0 0"
                        IsClosed="True">
                <PathFigure.Segments>
                    <PathSegmentCollection>
                        <LineSegment Point="0 6" />
                        <LineSegment Point="6 0" />
                    </PathSegmentCollection>
                </PathFigure.Segments>
            </PathFigure>
        </PathFigureCollection>
    </PathGeometry.Figures>
</PathGeometry>

<Style x:Key="ExpandCollapseToggleStyle"
       TargetType="{x:Type ToggleButton}">
    <Setter Property="Focusable"
            Value="False"/>
    <Setter Property="Width"
            Value="16"/>
    <Setter Property="Height"
            Value="16"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ToggleButton}">
                <Border 
                        x:Name="ExpandBorder"
                        Width="16"
                        Height="16"
                        Background="Transparent"
                        Padding="5,5,5,5">
                        <Path x:Name="ExpandPath"
                              Fill="Transparent"
                              Stroke="#FF989898"
                              Data="{StaticResource TreeArrow}">
                            <Path.RenderTransform>
                                <RotateTransform Angle="135"
                                                 CenterX="3"
                                                 CenterY="3"/>
                            </Path.RenderTransform>
                        </Path>
                </Border>
                <ControlTemplate.Triggers>

                    <!-- MouseOver, Collapsed -->
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="True" />
                            <Condition Property="IsChecked" Value="False" />
                        </MultiTrigger.Conditions>

                        <Setter TargetName="ExpandPath"
                                Property="Stroke"
                                Value="#FF1BBBFA"/>
                        <Setter TargetName="ExpandPath"
                                Property="Fill"
                                Value="Transparent"/>
                        <Setter TargetName="ExpandBorder"
                                Property="Background">
                            <Setter.Value>
                                <VisualBrush>
                                    <VisualBrush.Visual>
                                        <Ellipse Height="1" Width="1" Fill="#FF1BBBFA">
                                            <Ellipse.Effect>
                                                <BlurEffect Radius="2" />
                                            </Ellipse.Effect>
                                        </Ellipse>
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </Setter.Value>
                        </Setter>

                    </MultiTrigger>

                    <!-- MouseOver, Expanded -->
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsMouseOver" Value="True" />
                            <Condition Property="IsChecked" Value="True" />
                        </MultiTrigger.Conditions>

                        <Setter TargetName="ExpandPath"
                                Property="Stroke"
                                Value="#FF1BBBFA"/>
                        <Setter TargetName="ExpandPath"
                                Property="Fill"
                                Value="#82DFFB"/>
                        <Setter TargetName="ExpandBorder"
                                Property="Background">
                            <Setter.Value>
                                <VisualBrush>
                                    <VisualBrush.Visual>
                                        <Ellipse Height="1" Width="1" Fill="#FF1BBBFA">
                                            <Ellipse.Effect>
                                                <BlurEffect Radius="2" />
                                            </Ellipse.Effect>
                                        </Ellipse>
                                    </VisualBrush.Visual>
                                </VisualBrush>
                            </Setter.Value>
                        </Setter>

                        <Setter TargetName="ExpandPath"
                                Property="RenderTransform">
                            <Setter.Value>
                                <RotateTransform Angle="180"
                                                 CenterX="3"
                                                 CenterY="3"/>
                            </Setter.Value>
                        </Setter>

                    </MultiTrigger>

                    <!-- No Mouseover, Expanded -->
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsChecked" Value="True" />
                            <Condition Property="IsMouseOver" Value="False" />
                        </MultiTrigger.Conditions>
                        <Setter TargetName="ExpandPath"
                                Property="RenderTransform">
                            <Setter.Value>
                                <RotateTransform Angle="180"
                                                 CenterX="3"
                                                 CenterY="3"/>
                            </Setter.Value>
                        </Setter>
                        <Setter TargetName="ExpandPath"
                                Property="Fill"
                                Value="#FF595959"/>
                        <Setter TargetName="ExpandPath"
                                Property="Stroke"
                                Value="#FF262626"/>
                    </MultiTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!-- TreeView Style (Fade toggle buttons in and out) -->
<Style x:Key="{x:Type TreeView}"
       TargetType="{x:Type TreeView}">
    <Style.Triggers>
        <Trigger Property="IsFocused" Value="True" >
            <Trigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation
                                Storyboard.TargetProperty="Opacity"
                                From="0.0" To="1.0" Duration="0:0:5"
                                />
                    </Storyboard>
                </BeginStoryboard>
            </Trigger.EnterActions>
        </Trigger>
    </Style.Triggers>
</Style>

<!-- TreeViewItem Style -->
<Style x:Key="{x:Type TreeViewItem}"
       TargetType="{x:Type TreeViewItem}">
    <Setter Property="BorderThickness"
            Value="1" />
    <Setter Property="Padding"
            Value="2,0" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TreeViewItem}">

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="19"
                                          Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <ToggleButton x:Name="expander"
                                  Style="{StaticResource ExpandCollapseToggleStyle}"
                                  IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                                  ClickMode="Press" />
                    <Border x:Name="outerBorder"
                            Grid.Column="1"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="2"
                            SnapsToDevicePixels="true">
                        <Border x:Name="innerBorder"
                                Background="{TemplateBinding Background}"
                                BorderThickness="1"
                                CornerRadius="1"
                                Padding="{TemplateBinding Padding}"
                                SnapsToDevicePixels="true">
                            <ContentPresenter x:Name="PART_Header"
                                              ContentSource="Header"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </Border>
                    </Border>
                    <ItemsPresenter x:Name="itemsHost"
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Grid.ColumnSpan="2" />
                </Grid>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded"
                             Value="false">
                        <Setter TargetName="itemsHost"
                                Property="Visibility"
                                Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="HasItems"
                             Value="false">
                        <Setter TargetName="expander"
                                Property="Visibility"
                                Value="Hidden" />
                    </Trigger>
                    <Trigger SourceName="outerBorder"
                             Property="IsMouseOver"
                             Value="true">
                        <Setter TargetName="outerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource HoverOuterBorderBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="Background"
                                Value="{StaticResource HoverBackgroundBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource HoverInnerBorderBrushKey}" />
                    </Trigger>
                    <Trigger Property="IsSelected"
                             Value="true">
                        <Setter TargetName="outerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource SelectedActiveOuterBorderBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="Background"
                                Value="{StaticResource SelectedActiveBackgroundBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource SelectedActiveInnerBorderBrushKey}" />
                    </Trigger>

                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected"
                                       Value="true" />
                            <Condition Property="IsMouseOver"
                                       Value="true" />
                        </MultiTrigger.Conditions>
                        <Setter TargetName="outerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource HoverSelectedOuterBorderBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="Background"
                                Value="{StaticResource HoverSelectedBackgroundBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource HoverSelectedInnerBorderBrushKey}" />
                    </MultiTrigger>

                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected"
                                       Value="true" />
                            <Condition Property="Selector.IsSelectionActive"
                                       Value="false" />
                            <Condition Property="IsMouseOver"
                                       Value="false" />
                        </MultiTrigger.Conditions>
                        <Setter TargetName="outerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource SelectedInactiveOuterBorderBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="Background"
                                Value="{StaticResource SelectedInactiveBackgroundBrushKey}" />
                        <Setter TargetName="innerBorder"
                                Property="BorderBrush"
                                Value="{StaticResource SelectedInactiveInnerBorderBrushKey}" />
                    </MultiTrigger>

                    <Trigger Property="IsEnabled"
                             Value="false">
                        <Setter Property="Foreground"
                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

重要的部分是：TreeView 样式、ExpandCollapseToggleStyle 和 TreeViewItem 样式。

**这是树视图：**

```
 <TreeView Grid.Column="4" Grid.Row="2">
        <TreeViewItem Header="Item 1">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 2">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 3">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 4">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 5">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 6">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 7">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 8">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
        <TreeViewItem Header="Item 9">
            <TreeViewItem Header="Subitem 1" />
            <TreeViewItem Header="Subitem 1" />
        </TreeViewItem>
    </TreeView> 
```

# javascript - 为什么只有一些 js 库会通过 Symfony2/Twig 加载？

> ID：14543210
> 
> 赞同：2
> 
> 时间：2013-01-27T00:40:04.847
> 
> 标签：javascript, symfony, twig, assetic

尝试加载多个 js 库。使用下面的任何一种方法，bootstrap 和 facebook js 文件都可以正常加载，但是如果按名称调用，我添加的任何其他库要么抛出 500 错误，要么在使用 /* 时根本不加载文件都在同一个目录中据我所知，相同的权限。为什么会发生这种情况，我该如何解决？

方法一：

```
{% javascripts
        'bundles/onnbrun/js/*'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

方法二：

```
{% javascripts
        'bundles/onnbrun/js/jquery-1.8.0.min.js'
        'bundles/onnbrun/js/jquery-ui-1.9.0.js'
        'bundles/onnbrun/js/bootstrap.min.js'
        'bundles/onnbrun/js/facebook_enable.js'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

更新＃1：

使用下面建议的@Bundle 语法，我可以运行 php app/consoleassetic:dump 而不会出错；但是，当我尝试在浏览器中访问 app_dev.php 时出现错误：

编译“ONNBrunBundle::web.html.twig”中的模板（“无法找到文件“@ONNBrunBundle/js/jquery-1.8.0.min.js”。”）期间引发异常。

我可以通过我的 ide 和 putty 查看位于我的包的 Resources/public/js 目录中的文件。

更新#2：

根据 #symfony 中 lee 的建议，尝试在浏览器中路由到我的 js 目录，瞧！只有两个一直正常服务的 js 文件在那里 - 没有别的。

所以... /www/src/ONN/BrunBundle/Resources/public/js 向我展示了当我通过 putty 或通过我的 ide 或通过任何随机 ftp 程序查看它时我试图提供的所有 js 文件；但是，浏览器中的 /web/bundles/onnbrun/js/ 仅显示正确提供的两个 js 文件。

我已经运行了assetic:dump 和assetic:dump --env=prod --no-debug 没有错误。

我已经运行缓存：清除。

我不知道是什么导致了这种差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:01:29.987

**情况1）**

您的文件存储在一个包中

如果是这种情况，请使用下面的代码

```
{% javascripts
        '@YourBundle/Resources/public/js/*'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

**案例2）**

您的文件存储在 js 目录（不是捆绑目录）下的根 Web 目录中

```
{% javascripts
        'js/*'
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

**最后一步**

转储你的文件

```
php app/console assetic:dump --env=prod --no-debug 
```

# python - 找不到 Python 机械化模块

> ID：14543213
> 
> 赞同：1
> 
> 时间：2013-01-27T00:40:35.727
> 
> 标签：python, module, mechanize

我的 python 版本是：Python 2.7 我做了一个 easy_install mechanize 然后我尝试运行一个脚本，我得到了这个：

```
File "test.py", line 2, in <module>
import mechanize
ImportError: No module named mechanize 
```

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:41:24.103

试试这个，以防 pip 或 easy_install，无论出于何种原因，都不起作用：

[从http://pypi.python.org/packages/source/m/mechanize/mechanize-0.2.5.tar.gz](http://pypi.python.org/packages/source/m/mechanize/mechanize-0.2.5.tar.gz)下载源代码

解压包，进入命令行，进入解压后的文件夹，输入：

```
python setup.py install 
```

如果您使用的是 Linux/Mac，则可能需要键入以下内容：

```
sudo python setup.py install 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T14:26:36.697

想为一些未来的用户添加一些东西：

如果某些用户收到错误“No module named '_version'” Mechanize 但是不支持 Python 3，因此您应该安装 Python 2.x 版本（可用的最新版本是 2.7.3），在那里安装 mechanize 包然后重试运行您的脚本。

# python - 在 Python 上使用套接字进行文件传输

> ID：14543222
> 
> 赞同：4
> 
> 时间：2013-01-27T00:42:33.910
> 
> 标签：python, sockets

尝试在 Python 上使用套接字构建简单的文件传输。我被卡住了，似乎我无法发送文件的任何部分。

根据一些建议，我尝试发送文件的最后一行，以便知道何时完成连接。

但碰巧的是，一旦我发送了第一个包裹，客户就永远不会得到剩下的。

在这里你会看到我的代码（服务器端）：

```
import os
import socket
PORT = 8080
HOST = 'localhost'
socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
socket.bind((HOST,PORT))
socket.listen(10)
conn, addr = socket.accept()
print '\033[46m\033[34m\033[1mBienvenido al File Sender v.0.02 hecho en Python. Este         programa permite enviar archivos a traves de tu maquina\033[0m'
ANSI_RED = '\033[31m'
ANSI_BLUE = '\033[34m'
ESCAPEANSI = '\033[0m'
def seleccion_path():
PATH = raw_input('\033[34m\033[1mSelect the Path (./ by default)').strip('n')
if PATH == '':
    PATH = os.getcwd()   
print PATH, ESCAPEANSI
acepta_path = raw_input('\033[34m\033[1mSi o No (S/N)').lower().strip(' ')
if acepta_path == 's' or acepta_path == 'si':
    return PATH
else:
    seleccion_path()
def filesDir(path):
files = os.listdir(PATH)
for fl in files:
    i = int(files.index(fl))+1
    print ANSI_RED + str(i)+ ')' + fl
return files

PATH = seleccion_path()
print 'el PATH seleccionado es:', PATH + '\n'
filesDir(PATH)
fileSelected = int(raw_input(ANSI_BLUE + 'Select a file with the number').strip(' ').lower()) 
print PATH + filesDir(PATH)[fileSelected-1]
fileToSend = open(PATH + filesDir(PATH)[fileSelected-1], 'rb')
qLines = len(open(PATH + filesDir(PATH)[fileSelected-1], 'rb').readlines())

finalLine = cpfileToSend.readlines()[qLines-1]
conn.send(finalLine)
while True:
    data = conn.sendall(fileToSend.readline())
    conf = conn.recv(1024)
    print conf
    if conf == 'OK':
        conn.close()
        fileToSend.close()
         break
print '\033[43m File sent'
#Finaliza el programa y deja los codigos ANSI cerrados
print ESCAPEANSI
exit() 
```

这是客户端：

```
import os
import socket
PORT = 8080
HOST = 'localhost'

socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
socket.connect((HOST, PORT))
fname = open('./fileSent.pdf', 'w+')

finalLine = socket.recv(1024)
print finalLine
while True:
    strng = socket.recv(2048)
    print 'aaaaa',strng
    fname.write(strng)
    if finalLine in strng:
        fname.write(strng)
        socket.send('OK')
        socket.close()
fname.close()
print 'Data received correctly' 
exit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:44:31.913

最后我能够做到。问题出在 socket.recv() 上。我要求应用程序执行几行，但服务器没有收到任何内容。客户端从未执行该行下面的行，因为它希望数据继续运行下一行。我重新安排了代码来处理这个问题，它工作得很好。绝对喜欢 Python :)

服务器端：

```
import os
import socket
PORT = 8080
HOST = 'localhost'
socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
socket.bind((HOST,PORT))
socket.listen(1)
conn, addr = socket.accept()
print '\033[46m\033[34m\033[1mBienvenido al File Sender v.0.02 hecho en Python. Este programa permite enviar archivos a traves de tu maquina\033[0m'
ANSI_RED = '\033[31m'
ANSI_BLUE = '\033[34m'
ESCAPEANSI = '\033[0m'
def seleccion_path():
PATH = raw_input('\033[34m\033[1mSelect the Path (./ by default)').strip('n')
if PATH == '':
    PATH = os.getcwd()   
print PATH, ESCAPEANSI
acepta_path = raw_input('\033[34m\033[1mSi o No (S/N)').lower().strip(' ')
if acepta_path == 's' or acepta_path == 'si':
    return PATH
else:
    seleccion_path()
def filesDir(path):
files = os.listdir(PATH)
for fl in files:
    i = int(files.index(fl))+1
    print ANSI_RED + str(i)+ ')' + fl
return files

PATH = seleccion_path()
print 'el PATH seleccionado es:', PATH + '\n'
filesDir(PATH)
fileSelected = int(raw_input(ANSI_BLUE + 'Select a file with the number').strip(' ').lower()) 
print PATH + filesDir(PATH)[fileSelected-1]

filepath = PATH + filesDir(PATH)[fileSelected-1]
#envia nombre del file
conn.send(filepath)
qLines = len(open(PATH + filesDir(PATH)[fileSelected-1], 'rb').readlines())
fileToSend = open(filepath, 'rb')
while True:
data = fileToSend.readline()
if data:
    conn.send(data)
else:
    break
fileToSend.close()
conn.sendall('')
conn.close()

print '\033[43m File sent'  
#Finaliza el programa y deja los codigos ANSI cerrados
print ESCAPEANSI
exit() 
```

客户端：

```
import os
import socket
PORT = 8080
HOST = 'localhost'

nombrearchivo = raw_input('define a name with its extension').strip(' ')
socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
socket.connect((HOST, PORT))
filename = socket.recv(1024)

fname = open('./'+nombrearchivo, 'wb')

while True:
strng = socket.recv(1024)
if strng:
    print strng
    fname.write(strng)
else:
    fname.close()
    break
socket.close()
print 'Data received correctly' 
exit() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:57:36.523

您的问题源于您打开文件，读取所有行（带有`readlines`）然后尝试再次读取文件而不关闭它。

我分享@T_12 对您为什么要先发送文件的最后一行的担忧。但是假设您需要这样做，这里是您需要的修复：

替换你的服务器端代码的这一部分（因为我没有看到你定义的地方`cpfileToSend`，我认为它是故意的`fileToSend`）

```
fileToSend = open(PATH + filesDir(PATH)[fileSelected-1], 'rb')
qLines = len(open(PATH + filesDir(PATH)[fileSelected-1], 'rb').readlines())

finalLine = cpfileToSend.readlines()[qLines-1]
conn.send(finalLine)
while True:
    data = conn.sendall(fileToSend.readline())
    conf = conn.recv(1024)
    print conf
    if conf == 'OK':
        conn.close()
        fileToSend.close()
         break 
```

有了这个

```
filepath = PATH + filesDir(PATH)[fileSelected-1]
fileToSend = open(filepath, 'rb')
qLines = len(open(PATH + filesDir(PATH)[fileSelected-1], 'rb').readlines())

finalLine = fileToSend.readlines()[qLines-1]
conn.send(finalLine)
fileToSend.close()
fileToSend = open(filepath, 'rb')
while True:
    data = conn.sendall(fileToSend.readline())
    conf = conn.recv(1024)
    print conf
    if conf == 'OK':
        conn.close()
        fileToSend.close()
         break 
```

希望这可以帮助

# perl-module - 在 Windows 7 上的 Strawberry Perl 中安装和引用 CPAN 模块时出现问题

> ID：14543223
> 
> 赞同：0
> 
> 时间：2013-01-27T00:43:15.383
> 
> 标签：perl-module

我使用 Strawberry Perl 的 CPAN 客户端工具从 CPAN 下载了一个 perl 模块 c。它安装成功。我写了一个小的 perl 脚本来使用这个模块。但我收到以下错误：

在 C:\MyPadreFiles\UseChiSquare.pl 第 9 行调用的未定义子例程 &main::chisquare。按任意键继续。. .

我的 perl 代码如下：

使用严格；使用警告；

使用统计::Chisquare;

我的（@subwaystops）=（14,18,23,28,34,42,50,59,66,72,79,86,96,103）；

打印卡方（@subwaystops）；

我什至尝试过 Statistics::Chisquare::chisquare(@subwaystops);

但仍然是相同的未定义子程序错误。请让我知道如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:03:20.660

我的代码中有一个错字。修正后的内容如下：

使用统计::Chisquare; 错了

使用统计：：卡方；正确一个

谢谢

# objective-c - How to deal with drawRect in cocoa?

> ID：14543226
> 
> 赞同：-4
> 
> 时间：2013-01-27T00:43:20.557
> 
> 标签：objective-c, macos, cocoa, drawing, drawrect

I have to draw lines few times. I do this now:

```
- (void)drawRect:(NSRect)dirtyRect
    {
        [NSGraphicsContext saveGraphicsState];
        NSBezierPath *path = [NSBezierPath bezierPath];
        [path moveToPoint:point];

        [[NSColor blackColor] set];

        [path lineToPoint:point2];
        [path stroke];
        [NSGraphicsContext restoreGraphicsState];
    } 
```

And i call this from other class many time with other parameters:

```
 [workspace setPoint1:someValue setPoint2:someOtherValue];
    [workspace setNeedsDisplay:YES]; 
```

What i need?

I call this few times with changing parameters `someValue` and `someOtherValue` and I have to draw all lines and I want to see it. Now i see only last path. Where is the problem? How can i do this correctly?

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:47:02.990

If you want to draw more than one line, you'll need to... well... draw more than one line.

You'll need to come up with some way of storing all of the line segments that you want to draw, not just the most recent one. (Use NSMutableArray for this.) Once you've got that, you'll need to loop through that array and draw each line.

# mysql - 使用 Data Load Infile，终端显示已实现，但没有记录加载到表中

> ID：14543227
> 
> 赞同：0
> 
> 时间：2013-01-27T00:43:23.400
> 
> 标签：mysql, macos, load-data-infile

我曾经`DATA LOAD INFILE`加载一个大约 2.5MB 的 txt 文件。在 MySql 中执行查询后，它显示`0 rows effected`.
跟文件大小有关系吗？但是没有弹出错误。

我的数据导入查询是：

```
load data local infile 'trips.txt '
into table trips
columns terminated by ','
lines terminated by '/n'
ignore 1 lines; 
```

输入上述查询后，我得到：

```
Query OK, 0 rows affected (0.03 sec) 
Records: 0  Deleted: 0  Skipped: 0  Warnings: 0 
```

我已经使用类似的语法来导入另外两个文件，这很好。
谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:48:50.783

尝试

```
LINES TERMINATED BY '\n' 
```

或者

```
LINES TERMINATED BY '\r\n' 
```

# javascript - d3js 刻度定位

> ID：14543231
> 
> 赞同：4
> 
> 时间：2013-01-27T00:44:19.267
> 
> 标签：javascript, html, d3.js, timeline

我正在尝试在 d3.js 上开发时间线图。正如您将在下图中看到的那样，我无法将三角形定位在与 y 轴值相同的方向上。里程碑位于相关 y 轴组件的中间。

yaxis 启动代码片段：

```
 var x = d3.time.scale().rangeRound([0, self.config.width]);
    var y = d3.scale.ordinal().rangeRoundBands([self.config.height, 0]);

    var xAxis = d3.svg.axis().scale(x).orient("bottom").tickSubdivide(4).tickSize(6, 3, 0);//.ticks(d3.time.months,4)
    var yAxis = d3.svg.axis().scale(y).orient("left").tickSize(4); 
```

将y轴附加到svg：

```
svg.append("g")
          .attr("class", "y axis")
          .call(yAxis); 
```

里程碑的代码片段：

```
var abs = svg.selectAll(".milestone")
          .data(data)
        .enter().append("g");

        abs.selectAll("symbol")
          .data(function(d) { 
            return d.milestoneList; 
          })
        .enter().append("svg:path")
          .attr("transform", function(d) { 
            return "translate(" + x(d.deadline) + "," + y(d.name) + ")"; 
          })
          .attr("d", d3.svg.symbol().type("triangle-down")); 
```

例如 FG55 的 y 轴已设置：`translate(0,423)`虽然 FG55 的里程碑已设置`translate(<xValue for each>,376)`，但 y 上有 47px 的差异

如何正确定位 yaxis 标签和刻度？

![图表](../Images/6251b0f01d18583a11747b73c35b5fa2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T04:10:03.130

我修改了我的代码，如下所示：

旧代码

```
var y = d3.scale.ordinal().rangeRoundBands([self.config.height, 0]); 
```

新代码

```
var y = d3.scale.ordinal().rangePoints([self.config.height, 0], 1.5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-23T15:05:59.633

在 D3 中使用波段时，比例尺将为您提供波段顶部的位置，而不是中心。该比例还为您提供带的宽度，您可以使用它来计算应放置点的 y 位置。

因此，在上面的代码中，您可以将转换更改为：

```
.attr("transform", function(d) { 
  var yPosition = y(d.name) + y.bandwidth() / 2;
  return "translate(" + x(d.deadline) + "," + yPosition + ")"; 
}) 
```

# php - 如何使用 php 向数组 json 添加新数据？

> ID：14543232
> 
> 赞同：0
> 
> 时间：2013-01-27T00:44:21.757
> 
> 标签：php, jquery, json, file

我有 4 个输入，由 Ajax 4 数据发送到一个 php 文件：如何加载 json 文件，然后在 php 中添加新数据？

```
<input type="text" id="name">
<input type="text" id="surname">
<input type="text" id="mobile">
<input type="text" id="email">
<script>
var name = $("#name").val();
var surname = $("#surname").val();
var mobile = $("#mobile").val();
var email = $("#email").val();
$.ajax({type:"POST",
url:"fill.php",
data:"name="+nombre+"&surname="+surname+"&mobile="+mobile+"&email="+email,
success:function(data) { 
```

} }); JSON 文件：（people.json）

```
{
"1":
{
    "Name" : "Jhon",
    "Surname" : "Kenneth",
    "mobile" : 329129293,
    "email" : "jhon@gmail.com"
},
"2":
{
    "Name" : "Thor",
    "Surname" : "zvalk",
    "mobile" : 349229293,
    "email" : "thor@gmail.com"
}
} 
```

这里我有一个错误的 fill.php 文件：

```
<?php
$name = $_POST['name'];
$surname =$_POST['surname'];
$mobile = $_POST['mobile'];
$email =$_POST['email'];
$file = 'people.json';
$data = json_decode(file_get_contents($file));
$newdata = array('name'=>$name, 'surname' => $surname, 'mobile'=>$mobile,'email'=>$email);
$data[] = $newdata;
file_put_contents($file, json_encode($data));
?> 
```

当我执行它时，它会删除所有 people.json 日期，并且每次我添加新数据时，它都会给我下一个结果：[{},{},{},{}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:50:54.150

您需要向 json_decode 添加一个 secnod 参数，使其成为一个数组，试试这个

```
<?php
$name = $_POST['name'];
$surname =$_POST['surname'];
$mobile = $_POST['mobile'];
$email =$_POST['email'];
$file = 'people.json';
$data = json_decode(file_get_contents($file),1);
$newdata = array('name'=>$name, 'surname' => $surname, 'mobile'=>$mobile,'email'=>$email);
$data[] = $newdata;
file_put_contents($file, json_encode($data));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T00:49:34.840

json decode 接受第二个参数，设置它，你会得到数组而不是 stdClass 对象。

# sql - 返回表的 PostgreSQL 存储过程中的错误

> ID：14543236
> 
> 赞同：3
> 
> 时间：2013-01-27T00:45:06.967
> 
> 标签：sql, postgresql, stored-procedures

我正在尝试编写一个返回表的存储过程。该过程在语法上是正确的并且 psql 接受它，但它会引发运行时错误。

到目前为止我所拥有的：

```
CREATE OR REPLACE FUNCTION get_todays_appointments()
RETURNS TABLE 
(
    fname VARCHAR(32),
    lname VARCHAR(32),
    phoneno CHAR(10),
    datetime TIMESTAMP WITHOUT TIME ZONE,
    duration INTERVAL,
    caseid INTEGER
) AS $$
BEGIN
    RETURN QUERY
        SELECT
        (
            client.fname, 
            client.lname, 
            client.phoneno, 
            appointment.datetime, 
            appointment.duration, 
            photocase.caseid
        )
            FROM  (appointment NATURAL JOIN photocase NATURAL JOIN client)
            WHERE 
            (
                appointment.datetime >= current_date 
                AND appointment.datetime < current_date + 1
            );
END;
$$
LANGUAGE plpgsql; 
```

如果我手动执行查询，它的工作原理与 indended 完全相同，但使用 SP 我总是遇到以下错误：

> 错误：查询结构与函数结果类型不匹配详细信息：返回的类型记录与第 1 列中不同的预期类型字符不匹配。上下文：PL/pgSQL 函数“get_todays_appointments”第 3 行，位于 RETURN QUERY

我已经仔细检查了表模式大约 15 次，它们绝对正确。

奇怪的是，如果我修剪属性，该函数可以正常工作，因此它一次只返回一个。一旦我尝试返回多个属性，它就会引发错误。

我用谷歌搜索并找到了一些示例，但没有任何实际工作。我也看到了 SETOF 的使用，但是没有带有这个签名的表，所以它并没有真正帮助我。

我正在使用 postgresql v9.1.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:24:49.780

我现在没有方便的方法来测试这个，但我认为你将不得不失去一些括号。

```
CREATE OR REPLACE FUNCTION get_todays_appointments()
RETURNS TABLE 
(
    fname VARCHAR(32),
    lname VARCHAR(32),
    phoneno CHAR(10),
    datetime TIMESTAMP WITHOUT TIME ZONE,
    duration INTERVAL,
    caseid INTEGER
) AS $$
BEGIN
    RETURN QUERY
        SELECT
            client.fname, 
            client.lname, 
            client.phoneno, 
            appointment.datetime, 
            appointment.duration, 
            photocase.caseid
            FROM  (appointment NATURAL JOIN photocase NATURAL JOIN client)
            WHERE 
            (
                appointment.datetime >= current_date 
                AND appointment.datetime < current_date + 1
            );
END;
$$
LANGUAGE plpgsql; 
```

PostgreSQL 的错误信息通常非常好。这句话是真的。

> 错误：查询结构与函数结果类型不匹配详细信息：返回的类型记录与第 1 列中不同的预期类型字符不匹配。上下文：PL/pgSQL 函数“get_todays_appointments”第 3 行，位于 RETURN QUERY

在这种情况下，RETURN QUERY 返回一个“记录”类型的值。那是因为[行构造函数](http://www.postgresql.org/docs/9.1/static/sql-expressions.html#SQL-SYNTAX-ROW-CONSTRUCTORS)看起来像这样，`SELECT ROW(value1, column1, column2)`. 在 SELECT 语句中，关键字“ROW”是可选的，因此行构造函数如下所示`SELECT (value1, column1, column2)`：

所以这个骨架语法

```
select (column1, column2) from whatever 
```

相当于这个。

```
select row(column1, column2) from whatever 
```

但你不希望那样。你想要与*this*等价的东西。

```
select column1, column2 from whatever 
```

所以失去列列表周围的那些括号。

# objective-c - 如何在不触发 KVO 的情况下设置值

> ID：14543239
> 
> 赞同：5
> 
> 时间：2013-01-27T00:45:12.307
> 
> 标签：objective-c, key-value-observing

我使用以下代码在对象上添加 KVO。

```
[self.model addObserver:self
             forKeyPath:@"userName"
                options:NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld
                context:nil]; 
```

现在我想像下面这样设置用户名。是的，它会触发 KVO。

```
self.model.userName = @"testUser"; 
```

但是，我想在不触发 KVO 的情况下设置值。怎么做？有没有像下面这样的方法允许我这样做？

```
[self.model setValue:@"testUser" forKey:@"userName" isSilent:YES]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:24:22.643

Core Data 实现`setPrimitiveValue:forKey:`了允许你这样做。您可以在对象中实现相同的方法。

```
[self.model setPrimitiveValue:@"testUser" forKey:@"userName"]; 
```

然而，当这样做时，它应该在聚合通知的上下文中，观察者最终会通过手动`willChangeValueForKey:`和`didChangeValueForKey:`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T00:55:28.307

如果你想这样做，你的设计就会被破坏。键值观察的要点是有人想知道字段何时更改，因此他们注册通知。遵守键值观察的关键在于，您对系统的其余部分如何与您进行交互保持开放的态度。

听起来您正在做的是试图解决一些问题，您不希望有人出于某种原因知道财产的真实价值。所以他们认为他们正在获得更新，但实际上如果他们要检查房产，那么事实证明你是在故意撒谎。

如您所料，Cocoa 没有任何机制来支持此类黑客攻击。它们是非常糟糕的做法，破坏了面向对象编程的整个结构。

抛开讲课不谈，您可以编写一个直接访问实例变量的自定义设置器。所以，例如

```
- (void)setUserNameAndLieAboutItAsAShortSightedHack:(NSString *)newName
{
    _userName = newName;
} 
```

在系统级别，键值观察是通过创建一个新版本的属性设置器来实现的，该版本包含对真实设置器的调用，并在外部进行适当的观察者调用。因此，避免真正的二传手将避免通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-29T19:44:36.860

您可以使用忽略标志。[与用户驱动更新](https://developer.apple.com/documentation/coredata/nsfetchedresultscontrollerdelegate)的文档中的想法相同。

```
// update the config object with the value the user chose.
- (IBAction)valueChanged:(UISlider *)slider{
    self.ignore = YES;
    self.config.sliderValue = slider.value;
    self.ignore = NO;
}

// update the slider with the value from the config object.
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if (context == kSliderKVOContext) {
        if(!self.ignore){
            self.slider.value = [change[NSKeyValueChangeNewKey] doubleValue];
        }
    } else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

# jquery - JQuery 对话框中文本框和标签的对齐方式

> ID：14543243
> 
> 赞同：0
> 
> 时间：2013-01-27T00:45:44.613
> 
> 标签：jquery, jsp, dialog

我无法在 div 内的 JQuery 对话框中对齐标签和输入。我无法使用`<td>`，因为对话框的代码直接显示在 JSP 页面中，而不是在对话框中。

# javascript - 浏览器后退按钮处理

> ID：14543245
> 
> 赞同：30
> 
> 时间：2013-01-27T00:46:04.480
> 
> 标签：javascript, jquery, html, browser

我正在尝试处理浏览器后退按钮事件，但找不到任何解决方案。

我想问用户是否使用“确认框”单击浏览器后退按钮，如果他选择确定，我必须允许后退按钮操作，否则我必须停止后退按钮操作。

任何人都可以帮助我实现这一点。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-27T14:35:27.653

如果按下后退按钮，警告/确认用户如下。

```
window.onbeforeunload = function() { return "Your work will be lost."; }; 
```

您可以使用下面提到的链接获取更多信息。

[**使用 JavaScript 禁用浏览器中的后退按钮**](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-07-11T15:16:37.120

您还可以在页面加载时添加哈希：

```
location.hash = "noBack"; 
```

然后只需处理位置哈希更改以添加另一个哈希：

```
$(window).on('hashchange', function() {
    location.hash = "noBack";
}); 
```

**这使得哈希始终存在，并且后退按钮首先尝试删除哈希。**然后由“hashchange”处理程序再次添加哈希 - 因此页面实际上永远不会更改为前一个页面。

# jboss - JBoss 7.1：java.lang.IllegalStateException：找不到“jboss”MBeanServer

> ID：14543257
> 
> 赞同：0
> 
> 时间：2013-01-27T00:48:01.067
> 
> 标签：jboss, jboss7.x, jmx, illegalstateexception, mbeans

我的应用程序部署在 JBoss 7.1（独立）上。我在以下行遇到异常：

```
MBeanServerConnection server = MBeanServerLocator.locateJBoss(); 
```

例外是：

```
JBoss: java.lang.IllegalStateException: No 'jboss' MBeanServer found! 
```

当应用程序部署在 JBoss 5 上时，上面的代码运行良好。

从我在线阅读的内容来看，该代码应该仅在从创建 MBeanServer 的同一 JVM 调用时才有效。否则这是一个远程调用，我必须使用 JNDI。但它不是本地调用（相同的 JVM - 即 JBoss JVM）吗？那么它在 JBoss 5 上是如何工作的呢？如何在不更改此特定代码的情况下使其在 JBoss 7.1 上独立运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:51:05.220

这是解决方案：

[https://community.jboss.org/thread/221708](https://community.jboss.org/thread/221708)

引用：

上述问题是由于与旧版本的 Jboss 兼容的 locateJboss 实现。JBoss 7 使用的 MBeanServer（默认）是平台 MBeanServer。类名是com.sun.jmx.mbeanserver.JmxMBeanServer，默认域是DefaultDomain。因此，您可以简单地使用：

```
java.lang.management.ManagementFactory.getPlatformMBeanServer() 
```

或者：

```
 for(MBeanServer server: javax.management.MBeanServerFactory.findMBeanServer(null)) {

      if("DefaultDomain".equals(server.getDefaultDomain())) return server;

 }

 throw new Exception("Failed to locate MBeanServer"); 
```

另一方面，jboss.system:type=ServerInfo 对象名称在 AS 7.1 中不起作用，我必须使用 JVM 特定参数来确定 MBean 属性。'java.lang:type=Memory' 和属性为 'HeapMemoryUsage'。

# php - 哪些语言使用 $_variable 表示法以及它们如何以不同的方式使用它？在 PERL 旁边

> ID：14543259
> 
> 赞同：-4
> 
> 时间：2013-01-27T00:48:27.643
> 
> 标签：php, perl, variables

我知道 PERL 使用 $_variable，但还有哪些其他语言使用 $_variable 表示法，它与 PERL 有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:50:26.227

例如，Ruby 使用这种表示法，如`$global_variables`

# ios - 如何淡化 UIView 背景颜色 - iOS 5

> ID：14543266
> 
> 赞同：1
> 
> 时间：2013-01-27T00:49:36.877
> 
> 标签：ios, uiview, calayer, uibackgroundcolor

我在尝试让自定义 UIView 类淡化它的背景时遇到了麻烦。我已经检查了以下 StackOverflow 问题，但它们似乎对我不起作用。

[在 UIView 中将背景颜色从一种颜色淡化为另一种颜色](https://stackoverflow.com/questions/4785042/fade-background-color-from-one-color-to-another-in-a-uiview)

[你如何明确地为 CALayer 的 backgroundColor 设置动画？](https://stackoverflow.com/questions/518192/how-do-you-explicitly-animate-a-calayers-backgroundcolor)

所以我有一个自定义的 UIView，用户可以在其中绘制东西。如果他们画的东西不正确，我想让背景颜色变红然后变回白色。

我在自定义 UIView 中有这个自定义方法，称为

```
- (void)indicateMistake; 
```

当我调用该方法时，我希望它执行背景颜色动画，所以我在方法中有这个：

```
CABasicAnimation* fade = [CABasicAnimation animationWithKeyPath:@"backgroundColor"];
fade.fromValue = (id)[UIColor whiteColor].CGColor;
fade.toValue = (id)[UIColor redColor].CGColor;
[fade setDuration:3];
[self.layer addAnimation:fade forKey:@"fadeAnimation"]; 
```

但是当我这样做时似乎什么都没有发生。

所以然后我尝试了一个愚蠢的旋转动画，看看它是否有效：

```
CABasicAnimation* rotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
rotate.toValue = [NSNumber numberWithInt:M_PI];
[rotate setDuration:1];
[self.layer addAnimation:rotate forKey:@"rotateAnimation"]; 
```

出于某种原因，自定义 UIView 会旋转。

然后阅读更多 StackOverflow 答案我尝试了这个：

```
[UIView animateWithDuration:3 animations:^{
    [self setBackgroundColor: [UIColor redColor]];
} completion:^(BOOL finished) {
    [self setBackgroundColor: [UIColor whiteColor]];
}]; 
```

这会将颜色从红色变为白色，然后立即变回白色。有时它是如此之快，我有时看不到它发生。如果我评论`[self setBackgroundColor: [UIColor whiteColor]];`它保持红色。但是有节点逐渐从白色到红色的效果。

我已经没有想法了..任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T00:51:55.270

```
[UIView animateWithDuration:0.3f animations:^{
   fade.layer.backgroundColor = [UIColor redColor].CGColor;
} 
```

这假设您已将淡入淡出视图预设为您想要的白色。

您最后一次尝试动画跳回白色的原因是因为在 animateWithDuration 的完成子句中，您将视图设置回白色。

该完成子句在动画完成时执行，因此动画（白色-红色）发生，然后您的编译器完成并将淡入淡出视图跳回白色。

**作为额外的奖励：**

我敢肯定，您可能想知道如何才能变回白色。

好吧，让我们假设按下 a`UIButton`调用这个名为“animateColors”的函数。话虽如此，只需实现一个 BOOL。

```
- (void)animateColors {        
    if (!isRed) {
        [UIView animateWithDuration:0.3f animations:^{
            fade.layer.backgroundColor = [UIColor redColor].CGColor;
        }];
        isRed = YES;
    } else if (isRed) {
        [UIView animateWithDuration:0.3f animations:^{
            fade.layer.backgroundColor = [UIColor whiteColor].CGColor;
        }];
        isRed = NO;
    }
} 
```

显然，您将要在接口或头文件中对布尔值 isRed 进行属性声明。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T01:25:04.137

> 所以我有一个自定义的 UIView，用户可以在其中绘制东西。

我假设这意味着你已经实现了`-drawRect:`.

IIRC, by default (if `UIView.clearsContextBeforeDrawing` is set), the context gets filled with the view's background colour, `-drawRect:` gets called, and the resulting bitmap is drawn on screen instead of the background colour. Animating this would mean animating between the two bitmaps, which isn't something Core Animation is particularly good at. (I could be wrong about the details here, but it explains the behaviour).

The easiest fix is to set the background colour to `[UIColor clearColor]` and animate the background colour of a view *behind* the one you are drawing to. This means the view will not need to be redrawn, only recomposited over the "background".

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T01:21:28.760

我按原样尝试了您的代码。它工作得很好——它从我原来的视图中逐渐褪色到红色，慢慢地（然后又跳回白色，这是你所期望的）。因此，如果这对您不起作用，则会发生其他事情。

一个非常有用的诊断工具是提取您的麻烦代码并制作一个没有其他内容的项目。我做的就是你应该做的。创建一个全新的 Single View Application 项目。现在你有了一个视图控制器和它的视图。实现这个方法：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    CABasicAnimation* fade = [CABasicAnimation animationWithKeyPath:@"backgroundColor"];
    fade.fromValue = (id)[UIColor whiteColor].CGColor;
    fade.toValue = (id)[UIColor redColor].CGColor;
    [fade setDuration:3];
    [self.view.layer addAnimation:fade forKey:@"fadeAnimation"];
} 
```

运行项目。褪色效果很好。所以你看，任何问题都不在这段代码中！它在别的地方。也许您还有其他代码也在处理颜色 - 一个不同的动画正在破坏这个。也许某些参考不是指您认为的那样。也许有东西覆盖了该层，所以您看不到它（子层）。谁知道？你没有展示你的整个项目（你也不应该）。重要的是*向自己证明*代码*应该*可以工作，这样您就可以找出*真正*的问题所在。我已经向你展示了如何做到这一点。

# c++ - C ++删除包含新结构数组的新结构数组的正确方法？

> ID：14543267
> 
> 赞同：0
> 
> 时间：2013-01-27T00:49:45.677
> 
> 标签：c++

删除包含新结构数组的新结构数组的正确方法是什么？

```
typedef struct CALF_STRUCTURE
{
    char* Name;
    bool IsBullCalf;
} CALF;

typedef struct COW_STRUCTURE
{
    CALF* Calves;
} COW;

int main( void )
{
    COW* Cows;
    Cows = new COW[ 3 ];                // There are 3 cows.

    Cows[ 0 ].Calves = new CALF[ 2 ];   // The 1st cow has 2 calves.
    Cows[ 1 ].Calves = new CALF[ 1 ];   // The 2nd cow has only 1 calf.
    Cows[ 2 ].Calves = new CALF[ 25 ];  // The 3rd cow has 25 calves. Holy cow!

    Cows[ 2 ].Calves[ 0 ].Name = "Bob"; // The 3rd cow's 1st calf name is Bob.

    // Do more stuff... 
```

现在，是时候清理了！但是......删除牛和小牛数组或任何类型的结构数组的正确方法是什么？

我应该先在 for 循环中删除所有奶牛的小牛数组吗？像这样：

```
// First, delete all calf struct array (cows[x].calves)
for( ::UINT CowIndex = 0; CowIndex != 3; CowIndex ++ )
    delete [ ] Cows[ CowIndex ].Calves;

// Lastly, delete the cow struct array (cows)
delete [ ] Cows;

return 0;
}; 
```

或者我应该只是简单地删除牛数组并希望它也会删除所有小牛数组？像这样：

```
// Done, lets clean-up
delete [ ] Cows;

return 0;
}; 
```

或者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:53:24.910

您将不得不手动删除嵌套数组。

但是，由于您使用的是 C++，因此请忘记数组，只需使用`std::vector`：

```
typedef struct COW_STRUCTURE
{
    std::vector<CALF> calves;
} COW;

int main( void ) {
  std::vector<COW> cows; 
```

您为什么不想使用能够以高效且安全的方式为您管理一切的东西呢？

就像一个侧面信息：

*   类型名称通常不是全部大写（例如`Cow`或`cow`但很少`COW`），大写用于常量
*   变量通常是驼峰式大小写或带下划线的小写（所以`calves`不是`Calves`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T00:53:42.580

两者都不。要在 C++ 中执行此操作：

```
struct CALF
{
    std::string Name;
    bool IsBullCalf;
}; 
```

和

```
struct COW
{
    std::vector<CALF> Calves;
}; 
```

并且，在`main`：

```
std::vector<COW> Cows(3); 
```

神奇的是，您不再需要删除任何内容。

# python - IPython Pylab 配置 - imshow 插值

> ID：14543268
> 
> 赞同：0
> 
> 时间：2013-01-27T00:49:55.147
> 
> 标签：python, configuration, matplotlib, ipython

我已经使用 IPython 工作了几个月，我认为它是我用过的最好的交互式 shell 之一。我特别喜欢通过 pylab 内置的 matplotlib 支持。

我遇到的一个问题是我正在处理图像分析，并且经常使用 imshow 绘制图像和其他数组。使用纯 matplotlib 时，我可以将默认插值设置为`nearest`使用 matplotlibrc 文件。我无法在 IPython 中为内置的 matplotlib 找到这样的文件。

有没有办法将 IPython 和 Pylab 配置`nearest`为默认使用插值而不是`bilinear`？我已经阅读了有关配置和自定义的 IPython 文档，但我不确定我是否遵循如何访问这些特定属性。

# java - 切换完成后再次显示 java 控制台菜单

> ID：14543269
> 
> 赞同：1
> 
> 时间：2013-01-27T00:50:01.933
> 
> 标签：java

我正在尝试编写一个 java 控制台菜单，但我无法在控制台中呈现它。这是我到目前为止写的代码。

```
package com.registrar;

import java.util.*;

class GUIMenu {
private Course[] courses = new Course[100];
private Person[] persons = new Person[1000];

public void display_menu() {
  System.out.println("****************MENU*****************");
  System.out.println("[1] Add Course\n[2] Add Student to Course \n[3] Verify Registration \n[4] Remove Student \n[5] Add Persons");
  System.out.println("**************************************");
  System.out.println("Selection: ");
}

public GUIMenu(){
Person p = null;
Scanner in = new Scanner (System.in);
int input = in.nextInt();

switch (input){
  case 1:
    Scanner sc = new Scanner(System.in);
    System.out.println("Enter Course Name: ");
    String name = sc.nextLine();
    System.out.println("Enter Course ID:");
    Integer cID = sc.nextInt();
    System.out.println("Enter Instructor ID:");
    Integer pn = sc.nextInt();
    for(int i = 0; i < persons.length; i ++){
        System.out.println(persons[i]);
    }
    for(int i = 0; i<persons.length; i++){
        if(persons[i] !=null){
            if(persons[i].getId().intValue() == pn){
                System.out.println("Record Found");
                p  = persons[i];
            }
            else
                System.out.println("Record Not Found");
        }
    }
    Course c = new Course(name, cID);
    if(p!=null){
        Instructor ins = new Instructor(p);
        c.setInstructor(ins);
    }
    System.out.println(c + " has been created");

    for(int i = 0; i < courses.length; i ++){
        if(courses[i] == null){
            courses[i] = c;
            break;
        }
    }
    new GUIMenu();
  case 2:
      for(int i = 0; i < courses.length; i ++){
          if(courses[i] != null)
              System.out.println(courses[i]);
      }
      break;
  case 3:
    System.out.println ( "You picked option 3" );
    break;
  case 4:
    System.out.println ( "You picked option 4" );
    break;
  case 5:
      Scanner pers = new Scanner(System.in);
      System.out.println("Enter Person Name: ");
      String pname = pers.nextLine();
      System.out.println("Enter Person ID:");
      Integer oiID = pers.nextInt();
      Person per = new Person(pname, oiID);
      for(int i = 0; i < persons.length; i ++){
        if(persons[i] == null){
            persons[i] = per;
            break;
        }
      }
      display_menu();
  default:
    System.err.println("Unrecognized option");
}
}

public static void main ( String[] args ) {
    GUIMenu a = new GUIMenu();
    a.display_menu();
}
} 
```

我正在尝试在菜单上进行选择后，代码在完成与该特定选择关联的代码后再次返回菜单。我做错了什么？我根本看不到菜单显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:54:52.677

> 我做错了什么？

查看代码：这是它开始的地方：

```
public static void main ( String[] args ) {
    GUIMenu a = new GUIMenu();  // This is executed first...
    a.display_menu();
} 
```

让我们看看

```
public GUIMenu(){
    Person p = null;
    Scanner in = new Scanner (System.in);
    int input = in.nextInt(); // this is where it's waiting for your input.
    ... 
```

查看您的代码流程，很清楚为什么不显示菜单。

**编辑：**

你正在寻找这样的东西：

```
public void runApplication() {
    // init Scanner
    boolean nextRound = true;
    while(nextRound) {
        displayMenu();
        int input = sc.nextInt();
        switch(input) {
            case 1: // do stuff
                break;
            case 2: // this is the exit command
                nextRound = false;
                break;
            // more cases
            default:
                // undefined input
        }
    }
} 
```

因此，您仅将构造函数用于构造函数相关代码，然后再调用该`runApplication()`方法。

# javascript - 使用 JavaScript 以编程方式更改/编辑 JavaScript 函数

> ID：14543271
> 
> 赞同：0
> 
> 时间：2013-01-27T00:50:30.247
> 
> 标签：javascript, function

该网站用于`onLoad`加载`JavaScript`文件 ( `.js`)。我想使用 JavaScript 更改该 js 文件中的一个函数。

该函数被称为 " `Hello13`" 并且是许多其他函数（`hello5`、`hello6`等。）

该`Hello13`函数看起来像这样：

```
function hello13(x, y, z) {
    if (x == null) {
        //something, something.
    }
    if (y == null) {
        //something else, something else.
    }
    if (z == null) {
        //something diffrent, something diffrent.
    }
} 
```

正如你所看到的，当函数被调用时，它被赋予了一些值（`x, y, z`）。

我想将 z “*硬编码*”为我自己的值（在 js 文件中）。

所以在我以编程方式更改它之后它会是这样的：

```
function hello13(x, y, z) {
    z = MyValueOverride.
..... 
```

如何在 js 文件中添加我自己的“ `z`”值，在网站加载后，使用 JavaScript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T00:51:59.717

如果它是通过内联脚本标记（本地定义或在外部 JS 文件中）加载的某些 javascript 中的全局定义函数，您可以使用您自己的该函数版本重新定义它。最后出现的定义将是活动的。

所以，听起来你想要做的是在包含目标函数的外部 JS 文件之后提供你自己的定义。这样，您的定义将替换原始定义。如果你想保留原来的，你可以在替换它之前将它分配给另一个变量名。

```
// save original function reference (if desired)
var originHello13 = hello13;

// now define the new function which will replace the previous definition
function hello13(x, y, z) {
    z = MyValueOveride...
} 
```

如果外部 javascript 文件是动态加载的，那么事情会稍微复杂一些，因为您需要弄清楚如何知道动态加载的外部 JS 文件何时被加载，以便您可以定义您的覆盖。您必须向我们展示更多有关如何加载外部 JS 文件的信息，以便我们提供有关如何执行此操作的详细信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T00:53:08.640

重新定义它。如果要使用原始函数中的逻辑，请存储对原始函数的引用，然后重新定义它并从新函数中调用原始函数：

```
var originalHello13 = hello13;
hello13 = function( x, y, z ){
    z = MyValueOverride.
    return originalHello13( x, y, z );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:52:39.277

创建一个重新定义函数的闭包，然后在调用新函数时调用旧函数：

```
hello13 = (function () {
    // Keep a reference to the old function
    var _hello13 = hello13;

    // return a new function, which will be stored in hello13
    return function (x, y, z) {
        z = MyValueOverride;
        return _hello13(x, y, z);
    };
}()); 
```

这是小提琴：http: [//jsfiddle.net/hKavH/](http://jsfiddle.net/hKavH/)

# mysql - 在 mysql 中选择值，但在 WHERE 子句中检查另一个数据库

> ID：14543274
> 
> 赞同：0
> 
> 时间：2013-01-27T00:50:55.253
> 
> 标签：mysql, database, select

我正在尝试从数据库中选择值，但我需要检查另一个数据库中的另一个值。

我创建了这段代码，但只得到 1 个结果，我不知道为什么：

```
SELECT `id` FROM `mc_region` 
    WHERE `is_subregion` = 'false' 
        AND lastseen < CURDATE() - INTERVAL 20 DAY 
        AND (SELECT id_region FROM mc_region_flags 
                    WHERE flag <> 'expire' 
                    AND id_region = mc_region.id
            ) 
LIMIT 0, 30 
```

我做错了什么？

@Edit
我想我知道为什么这段代码不起作用。在数据库 mc_region_flags 中，并非主数据库中的所有记录都有标志。

我想做以下事情：

1º 选择第一个数据库上的所有记录，其中不是 subregion 并且 lastseen 超过 20 天
2º 检查第一个数据库上的任何结果是否有标记'expire'，如果是，它们不包含在结果中。

我不能在 1 个 SQL 代码中做到这一点吗？

@Edit2

我创建了这个模拟`FULL JOIN`但似乎`WHERE`不起作用的代码

```
SELECT *
    FROM mc_region AS r RIGHT OUTER JOIN
         mc_region_flags AS f ON r.id = f.id_region
UNION ALL
    SELECT * from 
        mc_region AS r LEFT OUTER JOIN 
        mc_region_flags AS f
        ON r.id = f.id_region
WHERE r.is_subregion = 'false' 
AND f.flag = 'exipre' 
AND r.lastseen < CURDATE() - INTERVAL 20 DAY 
```

不工作的问题

1.  `f.flag`不是“过期”
2.  `f.lastseen`不 > 20 天

![结果](../Images/7d12ec558e684a3bb513bb9606de6dfe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:57:01.907

在内部嵌套选择之前添加：id in (select...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:01:41.427

**更新**

```
SELECT * 
  FROM `mc_region` AS r LEFT JOIN 
       `mc_region_flags` AS f ON r.`id` = f.`id_region`
 WHERE r.`is_subregion` = 'false' AND 
       r.`lastseen` < CURDATE() - INTERVAL 20 DAY AND
       COALESCE(f.`flag`, '-') <> 'expire'
LIMIT 0, 30; 
```

# iframe - SEO 友好的 iFrames-- 不阻止父页面下载其元素

> ID：14543278
> 
> 赞同：0
> 
> 时间：2013-01-27T00:51:13.437
> 
> 标签：iframe, seo

我计划将 iFrame 包含在我的 wordpress 网站主页中，原因之一是为了 SEO 目的提高主页速度。如果我错了，请纠正我，我发现 iframe 会阻止在父页面上加载（可能是旧浏览器）。现在，想法是这样的：我想将我的主页分成两部分。顶部是父页面的轻元素，下面是 iframe，显示最近的重元素帖子。我想在 iframe 之前先加载父元素。另外，防止浏览器显示我打算仅在 iframe 上使用 GIF 图像的繁忙指示符。

概括：

带有 SEO 友好 iframe 的页面。
在加载父页面元素后，首先加载父元素，而不会被 iFrame
iframe 加载 阻止在加载 iframe 帮助
时防止显示浏览器的繁忙指示器 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:31:50.530

我不认为有像 seo 友好的 iframe 之类的东西。是的，当然在去年谷歌开始索引 iframe，但它仍然比正常情况更糟糕。（iframe 网站的链接问题，谷歌不知道如何索引它，或者使用相同的地址或其他）。速度慢比使用 iframe 更好（我确信这一点:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:23:34.107

如果您使用站点地图，蜘蛛程序会将 iframe 的原始页面视为网站结构的一部分，前提是原始页面托管在同一域中。虽然，出现在 SERP 中的索引页面将是原始页面，而不是包含 iframe 的页面。这可能会让读者感到困惑。

# jquery - 需要建议和解决方案

> ID：14543279
> 
> 赞同：-4
> 
> 时间：2013-01-27T00:51:17.577
> 
> 标签：jquery, css

```
<div class="wrapper">
  <div class="header">
   <img id="back" />
   <img id="front" />
  </div>
  <div class="body">
   ...
  </div>
  <div class="footer">
   ...
  </div>
</div>

<style type="text/css">
.wrapper {
    margin-left: auto;
margin-right: auto;
margin-top: -8px;
width: 1024px;
height: 1500px;
background-color: #CCC;
border: 1px solid;
/*display: run-in;*/
/*position:fixed;*/
text-align: center;
}

.header {
background-color: #FFC;
/*margin: 0 auto;*/
height: 150px;
width: 1000px;
display: box;
z-index: 10;
text-align:center;
vertical-align:middle;
position: fixed;
display:block;
}

#back {
position: relative;
width: 100%;
}

#front{
position: relative;
z-index: 10; 
```

}

我需要将标题固定在页面顶部（包装器是固定宽度），包装器内部的图像在标题内部水平和垂直居中。如何做到这一点？

OK 澄清 Wrapper 是固定宽度。页眉应贴在页面顶部（包装器内部）并包含两张图片/图像。图像应相互重叠，并在标题内垂直和水平居中。希望我现在足够精确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:05:52.547

怎么样：[简要说明更多未经测试的伪代码]

CSS：

```
.wrapper{
 width: 960px;
 margin-left: auto;
 margin-right: auto;
}

.banding{
/*add stuff*/
}

.header{
 position: absolute;
 top: 0px;
 width: 100%;
 min-height: 150px;
 margin-top: 40%; /*this will depend on images etc*/
} 
```

然后在html中：

```
<div class="header banding">
       <img />
       <img />
   </div>
    <div class="wrapper">

      <div class="body">
       ...
      </div>
      <div class="footer">
       ...
      </div>
    </div> 
```

# java - Android：无缘无故点击时图像按钮移动

> ID：14543281
> 
> 赞同：0
> 
> 时间：2013-01-27T00:51:56.283
> 
> 标签：java, android, xml, user-interface

我在一个有左箭头和右箭头按钮的 android 应用程序中有一个特定的视图。向左箭头位于屏幕的左边缘，右侧按钮位于右侧。当按下任一按钮时，居中文本视图中的文本应该会发生变化。就这些。我没有设置任何动画或任何东西。然而，在测试中，当任一按钮被按下时，两个按钮都会在各自的方向上移动一点，直到它们离开屏幕。这就像魔术一样。这是活动的代码：

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_stat_page);
    this.current = 1;

    this.setStats();
}

public void setStats()
{
    GameTable entry = new GameTable(this);
    entry.open();

    //Check for an empty table

    if(entry.isEmpty())
    {
        entry.createRows();
    }

    //Retrieve data from the matching row

    int[] info = entry.getStats(this.current);

    //Present the data in the GUI
    TextView title = (TextView) findViewById(R.id.statstitle);
    TextView stats = (TextView) findViewById(R.id.statpresents);

    title.setText(this.diffString());
    title.setTextSize(16);
    title.setTextColor(Color.BLACK);

    String present = "High Score: " + info[0] + "\n" +
             "Longest Time: " + ((int)info[1] / 1000) + " sec\n" +
             "Total Adds: " + info[2] + "\n" +
             "Total Subtracts: " + info[3] + "\n" +
             "Total Products: " + info[4] + "\n" +
             "Total Divides: " + info[5] + "\n" +
             "Total Squared: " + info[6] + "\n" +
             "Total Square Roots: " + info[7] + "\n";

    stats.setText(present);
    stats.setTextSize(15);
    stats.setTextColor(Color.BLACK);

    entry.close();
}

private String diffString()
{
    if(this.current == 1)
    {
        return "Freshman Stats";
    }
    else if(this.current == 2)
    {
        return "Sophomore Stats";
    }
    else if(this.current == 3)
    {
        return "Junior Stats";
    }
    else
    {
        return "Senior Stats";
    }
}

public void movel(View view)
{
    this.current--;

    if(this.current == 0)
    {
        this.current = 4;
    }

    this.setStats();
}

public void mover(View view)
{
    this.current++;

    if(this.current == 5)
    {
        this.current = 1;
    }

    this.setStats();
} 
```

movel 和 mover 方法作用于左右按钮，但不移动它们。这是接口的xml文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/blackboard"
android:baselineAligned="true"
android:orientation="horizontal" >

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:layout_weight="3"
    android:orientation="horizontal"
    android:baselineAligned="false" 
    android:gravity="center_horizontal" >

    <ImageButton
        android:id="@+id/imageButtonl"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@drawable/buttoninvisible"
        android:src="@drawable/leftarrow" 
        android:onClick="movel" />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_weight="4"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1">

        <TextView
        android:id="@+id/statstitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/rounded2" 
        android:layout_gravity="center"
        android:layout_centerInParent="true"
        android:padding="10dp"/>

    </RelativeLayout>

    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="3">

        <TextView
        android:id="@+id/statpresents"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/rounded2" 
        android:layout_gravity="center"
        android:layout_centerHorizontal="true"
        android:padding="10dp"/>

    </RelativeLayout>

</LinearLayout>

<LinearLayout
    android:layout_width="0dip"
    android:layout_height="match_parent"
    android:layout_weight="3"
    android:orientation="horizontal"
    android:gravity="center_horizontal" >

    <ImageButton
        android:id="@+id/imageButtonr"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@drawable/buttoninvisible"
        android:src="@drawable/rightarrow" 
        android:onClick="mover" />

</LinearLayout> 
```

任何人都可以提供任何解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:55:53.840

发生这种情况是因为您的文本视图是动态大小的“wrap_content”，居中，当文本长度增加时，它会将按钮推到一边。您应该尝试固定宽度，例如 200dp

```
<TextView
        android:id="@+id/statpresents"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:background="@drawable/rounded2" 
        android:layout_gravity="center"
        android:layout_centerHorizontal="true"
        android:padding="10dp"/> 
```

# ruby - susy '手动启动' - 它真的有效吗？

> ID：14543287
> 
> 赞同：0
> 
> 时间：2013-01-27T00:52:36.737
> 
> 标签：ruby, sass, compass-sass, susy-compass

在 Susy [Getting Started](http://susy.oddbird.net/guides/getting-started/)页面上，有一个标记为 的部分`'Manual Start'`，上面写着：

> “如果您不使用终端和/或 Rails 中的 Compass，您可以使用此方法”。

然后它解释了如何复制 Susy 的 Sass 定义`@import "susy"`，然后（它声称），“你很好去”。

我正在尝试将 Susy 用作我自己的构建系统的一部分，该系统使用“sass”命令行命令来编译我的样式表。显然，Susy Sass`mixins`依赖`includes`于 Compass，所以我从 Compass 发行版中提取了 Compass Sass 定义，并将它们放在 Susy 可以访问的地方。然后我尝试编译我的样式表：

`sass -I scss/compass scss/foobar.scss ${CSSDIR}/foobar.css`

当我这样做时，Susy 会发出警告：

> “您需要提供有效的布局（列数）或有效的媒体查询最小宽度断点（长度）”。

深入研究代码，问题似乎在于 Susy 调用了 Compass 提供的“紧凑”函数。实际的调用是这样的：

```
compact(false,false,false,...) 
```

其中 - 我认为 - 应该评估为：

```
false 
```

但是“紧凑”不是 Sass 的特性；它是一个 Compass 函数，在 Ruby 中作为 Compass 的一部分实现。如果 Compass 的 Ruby 扩展不可用，则该调用保持不变，因此 Susy mixin 正在处理：

```
compact(false,false,false,...) 
```

这不是`'false'`......所以事情变成了梨形。（问题发生在 susy/_grid.scss 的第 93 行）。

在我看来，似乎在没有 Compass 的情况下使用 Susy 实际上是不可能的。我对这个问题的最佳解决方案是什么？我只是使用`'compass compile ...'`而不是`'sass'`编译我的样式表吗？或者我可以以`'compact'`某种其他方式提供“sass”的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:41:22.740

你可以自己添加这个功能，虽然我真的推荐使用 Compass。它所需要的只是一个`config.rb`文件，以便 Compass 知道文件应该存放在哪里以用于各种帮助函数。使用 Compass 编译的命令更加紧凑，因为输出位置已经在配置文件中定义： `compass watch`或`compass compile`

如果您不想使用 Compass，您可以自己添加该功能。首先你需要这个`custom`函数，它来自这里： [https ://github.com/chriseppstein/compass/blob/stable/lib/compass/sass_extensions/functions/lists.rb#L18](https://github.com/chriseppstein/compass/blob/stable/lib/compass/sass_extensions/functions/lists.rb#L18)

```
def compact(*args)
sep = :comma
if args.size == 1 && args.first.is_a?(Sass::Script::List)
  list = args.first
  args = list.value
  sep = list.separator
end
Sass::Script::List.new(args.reject{|a| !a.to_bool}, sep)
end 
```

将它放在任何有意义的 ruby​​ 文件中。

你的 sass 命令现在只需要添加这个标志：`-r ./path/to/functions.rb`

# javascript - 如何在javascript中编写解析器以将编辑器中的文本解析为带有模型的JSON？

> ID：14543289
> 
> 赞同：1
> 
> 时间：2013-01-27T00:52:40.990
> 
> 标签：javascript, json, parser-generator

不知道是不是可以问这个的地方。但是我会尝试。

我需要的是，例如，如果用户在代码镜像编辑器中编写一些文本，例如：

```
a1=Some Text
    a11 = Some Child text 
```

解析器应该检查语法是否正确，并将其解析为：

```
 {
    'a1' : {
             'value' : "Some Text",
             'a11' : "some child text"
    }
 } 
```

根据语法是这样的。

那么，javascript中是否有任何解析器库或其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:13:05.593

您应该能够使用[PEG.js](http://pegjs.majda.cz/)在客户端解析文本。我还建议从为您期望用户提供的任何有效输入编写适当的语法开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T03:39:07.623

这有点旧，但会根据我编写的[codemirror 语法插件](https://github.com/foo123/codemirror-grammar)给出答案（由于一些项目需要各种自定义语言的语法高亮显示）。

一个为任何语言定义 JSON 格式的语法（或变体，因为 json 语法可以扩展其他 json 语法），并且插件会自动创建一个 codemirror 解析器，其中可以包括语法部分和语法错误、自动完成等

在此处查看[实时示例](http://foo123.github.io/examples/codemirror-grammar/)

# javascript - 使用 .map() 和 .get() 命名的数组键

> ID：14543290
> 
> 赞同：1
> 
> 时间：2013-01-27T00:52:43.443
> 
> 标签：javascript, jquery, arrays

我需要将输入及其值输出到 div 中。但是，因为我需要将正确的标签与正确的输入相匹配，并且某些字段允许空值，所以我遇到了匹配问题。使用以下代码将每个标签/输入拉入一个数组，然后输出：

```
var inputArr = $('input, select').map(function(){
    return "<p>" + $(this).val() + "</p>";
}).get()

var labelArr = $('label').map(function(){
  return "<p>" + $(this).text() + "</p>";
}).get()

function setValuesForConfirm() {
//Clear Div Contents                
  $("#test-output-1, #test-output").html('');

  for (var i = 0; i < labelArr.length; i++) {
    $("#test-output-1").append(labelArr[i]);
  }

  for (var i = 0; i < inputArr.length; i++) {
    $("#test-output").append(inputArr[i]);
  }
} 
```

因此，如果任何输入为空白，则字段与标签不匹配。

我的问题是，我可以像现在一样使用 .map() 函数将数组键命名为 JS 中的字段名称或 ID 吗？

JSFiddle[这里](http://jsfiddle.net/Mz9Vy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:02:47.290

您可以使用输入创建一个对象：

```
var formObj={};

$('input, select').each(function(){
    formObj[this.name]={val: this.value, labelText: $(this).prev('label').text()}; 

}); 
```

然后当循环对象可以将html放在一起

```
$.each(formObj, function(key, item){
    var labelHtml='<p>'+item.labelText+'</p>';
    var inputHtml='<p>Name: '+ key+', value: '+item.val+'</p>';
    /* do something with html*/
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:02:03.050

虽然你所拥有的对我来说似乎工作正常，但`.map`创建一个数组并且你只能在 JavaScript 的数组中拥有数字序号键，所以你需要一个对象。

```
var inputArr = {};
$('input, select').each(function(){
    inputArr[$(this).attr('name')] = "<p>" + $(this).val() + "</p>";
}); 
```

[http://jsfiddle.net/Mz9Vy/1/](http://jsfiddle.net/Mz9Vy/1/)

# javascript - 如何找到函数所属的对象？

> ID：14543291
> 
> 赞同：1
> 
> 时间：2013-01-27T00:52:44.053
> 
> 标签：javascript

给定一个函数，有没有办法找出持有它的对象？

```
var dog = { 
  bark: function() { alert('dfd') },
  name: 'Bill'
}

function getNameFromBark(barkFunc){
   //How to implement this method?
}

getNameFromBack(dog.bark); //I would like this to return Bill. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T00:55:51.540

为什么不只是`dog.name`？

函数可以绑定到对象。`this`它可以使用关键字访问该对象的属性。您可以使用函数重新绑定函数`bind`，这会更改`this`.

据我所知，**没有**办法询问一个函数它绑定到什么。

喜欢：

```
var my_func = dog.bark; // removing `dog` from the reference
my_func.getBoundObject().name; // would return Bill 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:02:33.003

似乎您可以在这里使用原型：

```
function Dog(name) {
  this.name = name;
}

Dog.prototype = {

  getName: function() {
    return this.name;
  },

  bark: function() {
    alert('dfd');
  }

};

var dog = new Dog('Bill');
console.log(dog.getName()); //=> 'Bill' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T01:39:58.720

您编写代码的方式`dog.bark`只是一个函数引用，一旦传递它就与任何特定对象没有关联，`dog.bark`因此当您像这样传递它时，无法从对象中获取任何其他数据：

```
getNameFromBark(dog.bark); 
```

在 内部`getNameFromBack()`，传递的参数只是一个函数。javascript 中的方法只是对象的属性，一旦您检索到属性值，它就只是一个函数。没有与函数本身关联的对象引用。除了使用`dog.name`来引用全局对象之外`dog`，您无法`dog.name`以任何其他方式从该函数中获取。

* * *

现在，您可以重组您的代码以实现这一点。例如，您可以传递对象而不是函数：

```
getNameFromBark(dog); 
```

然后，在 内部`getNameFromBark()`，您可以`.name`从传入的对象访问属性。

* * *

或者，稍微滥用一下对象系统，您可以在包含名称的函数本身上放置一个属性：

```
var dog = { 
  bark: function() { alert('dfd') },
  name: 'Bill'
}

// assign name property to the bark function too
dog.bark.name = dog.name;

function getNameFromBark(barkFunc){
   //How to implement this method?
   return(barkFunc.name);
}

getNameFromBack(dog.bark); //I would like this to return Bill. 
```

但是，这可能不是设计代码的最佳方式。如果我们了解您要解决的真正问题，我们可能会建议一种更好的面向对象架构，它不会复制属性。

# macos - 在 Mac OS X 10.8.2 上安装 Glassfish 3 在域信息设置中失败

> ID：14543296
> 
> 赞同：0
> 
> 时间：2013-01-27T00:53:24.037
> 
> 标签：macos, installation, glassfish-3

我是 Glassfish 新手，虽然是 Java 和 Unix 的老手。我正在运行 shell 脚本来安装 Java EE 6 SDK，包括我的 Mac 上的 Glassfish 3。

```
bash-3.2# sh java_ee_sdk-6u4-unix.sh 
```

一切顺利，直到我进入域信息屏幕。我坚持使用默认信息（密码除外）：

```
Domain Name: domain1
Admin Port: 4848     <- I have verified with netstat that both ports are free
Http Port: 8080      <-
Username: admin
Password: xxxxxxxxxxxx
Service Name: domain1Service
+ Start domain after creation 
```

当我单击下一步时，我收到 2 个错误对话框，告诉我以下内容：

```
Admin Port: Host name not found
Http Port: Host name not found 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-11T13:51:39.937

我确认，我通过将我的主机名更改为`localhost`在 linux 中使用命令行主机名 localhost 来纠正同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:33:16.697

看起来您的网络配置有问题。也许您的主机文件缺少 localhost 的条目。

检查文件/ **private/etc/hosts**

```
127.0.0.1 localhost 
```

您也可以尝试设置您的主机名

```
sudo hostname localhost 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:26:53.560

答案相对简单。我必须将使用 MacOS 设置配置的主机名作为 localhost 的别名添加到我的 /etc/hosts 文件中。我不确定 MacOS 将主机名保存在哪里。但是主机名命令（即 gethostname）正在返回“airguitar”，这是 Glassfish 试图连接的。由于它不在 /etc/hosts 中，因此无法找到主机名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-03T04:19:14.570

这是在许多系统上发生的问题，它也发生在我的 linux 上。解决方案非常简单，因为查克几乎得到了它。检查您的主机文件，在 linux 上位于 /etc/hosts 下。你可能会有这样的文件：

```
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6 
```

使用命令 hostname 检查您的主机名

```
[root@glassfish1 opt]# hostname 
glassfish1 
```

并将此主机名添加到您的主机文件中，如下所示：

```
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4 glassfish1
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6 
```

这对我有用。

# gcc - x64 TDM下的sqlite3_prepare错误c ++ cygwin

> ID：14543305
> 
> 赞同：1
> 
> 时间：2013-01-27T00:54:19.963
> 
> 标签：gcc, sqlite

我正在使用我的 windows x64 机器上的源代码编译一个使用 sqlite3 的示例应用程序。

```
#include "sqlite3.h"
#include <stdio.h>
#include <string.h>
#include <windows.h>

int main(int argc,char **argv)
{
  sqlite3 *db;
  sqlite3_stmt * pSqllite3_stmt=NULL;
  char *zErrMsg=0;
  int rc;

  // create a new database //
  rc =sqlite3_open( ".\\sql_lite3.db" ,&db);
  if(rc!=SQLITE_OK|| db == NULL)
  {
      MessageBox(NULL,TEXT("can't open the database") , TEXT("sql_lite example"), MB_OK);
      exit(0);
  }

  // create a table called string_index //
  char * create_query = "create table string_table (index INT ,string TEXT);" ;
  rc = sqlite3_prepare_v2( db , create_query, -1, &pSqllite3_stmt,NULL);
  if (rc != SQLITE_OK ) { 
    // if an error occurred //
    char error_code[128];
    sprintf(error_code," Error Code is %d" ,rc);

    MessageBox( NULL, error_code,TEXT("sql_lite example"), MB_OK);
    exit(0);
  }

  // step the create query //
  rc = sqlite3_step(pSqllite3_stmt);
  if(SQLITE_OK != rc)
  {
    MessageBox(NULL,TEXT("Create step have failed "),TEXT("sql lite example"),MB_OK);
    exit(0);  
  }

  // insert records to the database //
  char *insert_query = new char [ 1024];
  int i;
  sqlite3_stmt * insert_stmt ;
  char * insert_string ="This is the insert String";
  for (i=1; i<= 10;i++){
    sprintf( insert_query,"INSERT INTO string_table(index,string) VALUES(%d,?1);" , \
                   i);
    // execute the insert query //
    rc = sqlite3_prepare_v2(db , insert_query,strlen(insert_query), &insert_stmt,NULL);
    if(rc!= SQLITE_OK)
    {
      MessageBox(NULL,TEXT("INSERT INTO have been failed"), TEXT("SQLITE EXAMPLE"),MB_OK);
      exit(0);
    }

    // bind the string //
    rc =sqlite3_bind_text(insert_stmt,1,insert_string,sizeof(insert_string),SQLITE_TRANSIENT);
    if(rc != SQLITE_OK && rc != SQLITE_DONE)
    {
      MessageBox(NULL,TEXT("bind failed"),TEXT("SQLITE EXAMPLE"), MB_OK);
      exit(0);
    }
    // call step //
    rc = sqlite3_step(insert_stmt);
    if( rc != SQLITE_OK)
    {
      MessageBox(NULL,TEXT("Insertion step failed "),TEXT("SQLITE EXAMPLE"),MB_OK);
      exit(0);
    }

    // finalize the insert query //
    sqlite3_finalize(insert_stmt);
  } 

  // now we are going to execute the search query //
  char * search_query = "SELECT * FROM string_table WHERE index=10";
  sqlite3_stmt * search_stmt ;
  rc = sqlite3_prepare_v2(db,search_query,sizeof(search_query),&search_stmt,NULL); 
  if( SQLITE_OK== rc)
  {
    while( SQLITE_ROW == sqlite3_step(search_stmt ) )
    {
      // print the record //
      const int  index_value= sqlite3_column_int(search_stmt,1);
      const unsigned char * string_value = sqlite3_column_text(search_stmt,2);
      printf( "index :%d and string:%s ",index_value,string_value );

    }
  }else{
    MessageBox(NULL,TEXT("Searching query sqlite3 have been failed"),TEXT("SQLITE example"), MB_OK);
    exit(0);
  }

  // fnalize the search statement //
  sqlite3_finalize(search_stmt);

  // don't forget to close the connection //
  sqlite3_close(db);

  return 0;
 } 
```

但是当我尝试创建一个表时，它总是给我错误代码 1。这意味着，波纹管代码失败。

```
 // create a table called string_index //
  char * create_query = "create table string_table (index INT ,string TEXT);" ;
  rc = sqlite3_prepare_v2( db , create_query, -1, &pSqllite3_stmt,NULL);
  if (rc != SQLITE_OK ) { 
    // if an error occurred //
    char error_code[128];
    sprintf(error_code," Error Code is %d" ,rc);

    MessageBox( NULL, error_code,TEXT("sql_lite example"), MB_OK);
    exit(0);
  } 
```

这是为什么 ？我该如何克服这个问题？

有什么建议或改进吗？

- 提前致谢 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:00:51.440

要显示有用的错误消息，请使用[`sqlite3_errmsg`](http://www.sqlite.org/c3ref/errcode.html)：

```
MessageBox(0, sqlite3_errmsg(db), NULL, 0); 
```

* * *

至于您的 SQL 命令：`index`是一个[关键字](http://www.sqlite.org/lang_keywords.html)，因此您必须在使用时引用它：

```
CREATE TABLE string_table("index" INT, string TEXT); 
```

使用另一个列名可能更容易。

# css - 防止引导词缀将 div 向左移动

> ID：14543306
> 
> 赞同：6
> 
> 时间：2013-01-27T00:54:26.667
> 
> 标签：css, twitter-bootstrap

在使用 affix 属性后，我试图阻止我的右侧 div 向左移动。

任何 iudea 我如何做到这一点。您可以在这里看到问题，请向下滚动：-

[http://monkeygetnews.jonathanlyon.com/bs.html](http://monkeygetnews.jonathanlyon.com/bs.html)

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T04:28:37.717

激活后，scroll spy 添加类**词缀**和位置：**固定**到它正在监视的 div。这种定位使 div 脱离正常流动，结果是它向左浮动。

解决方案是添加一些 CSS 样式以将其浮动到您想要的位置。在您的页面中，我认为它会是这样的：

```
.span3.affix{
position: fixed; /* to stop the div from scrolling */
top: 0;          /* to fix the div at the top its containing element */
right: 0;        /* to fix the div at the right of its containing element */
} 
```

您可能需要稍微尝试一下才能将其放置在您想要的位置。重要的是，一旦您知道选择器（在这种情况下）是 .span3.affix，它就很容易使用。

祝你好运！

# html - 如何强制号码在移动设备上可拨打

> ID：14543309
> 
> 赞同：0
> 
> 时间：2013-01-27T00:54:38.163
> 
> 标签：html, mobile

现代智能手机会检测电话号码格式并自动将其转换为链接，单击该链接会将号码插入拨号盘，以便您拨打电话。

例如：

(310) 555 - 5555 或 310.555.5543

有没有办法强制不遵循标准电话号码格式的号码也可以拨打？

例如：3949392.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:57:08.097

[在这里](https://stackoverflow.com/questions/2774243/can-i-make-a-phone-call-from-html-on-android)回答。使用标签`tel:`中的前缀。`<a href>`

```
<a href="tel:2125551212">212-555-1212</a> 
```

至于非标准电话号码，只需像这样去掉所有非数字字符：

```
<a href="tel:39493922">Call 3949392.2</a> 
```

# python - 阅读 CSV - 初学者

> ID：14543310
> 
> 赞同：4
> 
> 时间：2013-01-27T00:54:42.757
> 
> 标签：python

我一直在尝试从我的桌面读取一个 csv 文件，但没有成功。我检查了我当前的工作目录，它指向我的桌面，所以这似乎不是问题。下面是我使用的模块和我收到的错误输出。我正在使用 Python 3.2.3

```
import csv  
reader = csv.reader(open(name.csv, mode = 'r'))  
for row in reader:  
    print (row) 
```

这是我的结果

> Traceback（最近一次通话最后）：
> 文件“C：/Users/User Name/Desktop/FileName.py”，第 2 行，in
> reader = csv.reader(open(name.csv, mode = 'r'))
> NameError:名称“Beta”未定义

帮助？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T00:59:33.520

尝试这个...

```
import csv
with open('name.csv', 'r') as csvfile:
    reader = csv.reader(csvfile, delimiter=',')
    for row in reader:
        print row 
```

# python - 为初始请求获取属于所选国家/地区的城市

> ID：14543319
> 
> 赞同：3
> 
> 时间：2013-01-27T00:55:35.843
> 
> 标签：python, django

我只需要返回属于当前所选国家的城市。

知道我该怎么做吗？

我知道我需要使用 JavaScript 来更新列表，但我如何才能为初始请求执行此操作，因为我正在使用：{{ profile_form.city }} 在我的视图中加载整个字段

City 模型有一个 Country 的外键。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:07:27.500

Check this app, sure it will help you a lot, and can save you a lot of time [https://github.com/dpnova/django-simple-cities](https://github.com/dpnova/django-simple-cities).

# php - 从 SQL 数据库动态创建内容

> ID：14543326
> 
> 赞同：-1
> 
> 时间：2013-01-27T00:56:00.600
> 
> 标签：php, javascript, html, mysql

所以基本上我想做的只是一个基本的图片上传页面。当用户填写表单时，他们从计算机或 URL 提交文件，然后图像将存储在服务器上。

然后我想在 HTML 页面上显示图像。我已经有了动态创建`div`保存上传内容的 s 的代码。

```
function AddTiles() {
    var mydiv = document.createElement("div");
    mydiv.setAttribute("id", "mydiv");
    mydiv.setAttribute("class", "tiles");
    mainContent.appendChild(mydiv);
} 
```

但是，每当您上传图像时，页面都会刷新，然后 div 将不再用于放置图像。所以我想将图像保存到数据库中，然后在页面加载时，通读数据库并生成html 内容，然后显示图像。

因此，如果您的数据库中有 4 个图像，那么程序将创建 4 个 div 标签并将每个图像放在其各自的 div 标签中。

此外，我只需要从数据库中读取代码并在加载时创建 html 内容。我可以毫无问题地创建数据库并存储图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:08:13.947

如果您要读取和输出存储在数据库中的信息，您不妨在不使用 JavaScript 的情况下在服务器端 (PHP) 生成 HTML 内容，即`echo "<img src='$url' />"`.

您还可以阅读[PHP MySQL Select](http://www.w3schools.com/php/php_mysql_select.asp)教程，了解有关从数据库中检索数据的更多信息。

# css - CSS 粘性页眉/页脚和完全拉伸的中间区域？

> ID：14543327
> 
> 赞同：13
> 
> 时间：2013-01-27T00:56:11.517
> 
> 标签：css, header, responsive-design, footer, sticky

使用 CSS，我怎样才能简单地获得一个`sticky header and footer`永远出现的页面，只要页面是`scrolling or not`. 我在网上找到了一些示例，但我还想要的是，`100% stretched area between header and footer`无论浏览器大小如何，中间内容区域都应该是。

我的意思是，我发现的大多数示例都正确地使页眉和页脚变得粘稠..，但`these are just floating`实际上`covering the Top and Bottom parts of the 'middle' content area`。那不是我真正想要的。

![在此处输入图像描述](../Images/5aa300842efaefb2b40f0771f1ae6551.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T07:37:59.500

可以对所有 3 个元素使用绝对位置。

```
#header,#footer,#content { position:absolute; right:0;left:0}

#header{
   height:100px; top:0;
}
#footer{
  height:100px; bottom:0;
}
#content{
  top:100px;
  bottom:100px;
  overflow:hidden; /* use this if don't want any window scrollbars and use an inner element for scrolling*/
} 
```

演示：http: [//jsfiddle.net/RkX8B/](http://jsfiddle.net/RkX8B/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-13T23:18:23.947

上面介绍的解决方案适用于没有边框、边距和/或填充的非常简单的布局。您可以在网上找到很多很多解决方案都可以解决这个问题。

但是，如果您只是为任何或所有 Div 添加边框、边距和/或填充，几乎所有解决方案都会完全崩溃。

Flex Boxes (CSS display:flex;) 在这方面非常强大，它们可以完美地与边框、边距和/或内边距的任意组合配合使用。

他们可以根据需要将您的屏幕空间划分为多个 Div，使用固定大小、百分比大小或“剩余的任何内容”为每个内部 Div。这些可以按任何顺序排列，因此您不仅限于页眉和/或页脚。它们也可以水平使用而不是垂直使用，并且可以下一步使用。

因此，您可以在它们之间拥有一个固定大小的页眉、一个 20% 的页脚，以及一个动态大小的“剩下的”客户区。反过来，在该客户区域内，您可以在客户区域的左边缘有一个百分比宽度的菜单栏，旁边有一个固定宽度的垂直分隔线，以及一个占用“剩下的东西”的客户区域在那个右边。

这是一个 Fiddle 来演示所有这些。相关的 CSS 非常简单。 [CSS Flex Box (display:flex;) 带边框/边距/填充的演示](http://jsfiddle.net/brebey/sm4amanj)

例如，这里有两个 CSS 类，它们创建的容器将分别水平或垂直地流动其包含的 Div：

```
.HorFlexContainer {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    flex: 1; /* this essentially means "use all parent's inner width */
}
.VertFlexContainer {
    display: flex;
    flex-direction: column;
    flex-wrap: wrap;
    flex: 1; /* this essentially means "use all parent's inner height */
} 
```

不过，上面的小提琴确实展示了这一切。

作为参考，请参阅 Chris Coyier 的这篇优秀文章： [Flexbox 教程](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

希望这一切都有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T01:01:18.667

您可能正在寻找“位置：固定；” 属性，并将标题设置为顶部：0；和底部的页脚：0；您还可以考虑对“内容区域”进行一些填充，以说明页眉和页脚空间......

从我的脑海中你会得到类似的东西：

```
header { position: fixed; top: 0; height: 100px; }
footer { position: fixed; bottom: 0; height: 100px; } 
#container {  padding: 100px 0; } 
```

如果您在容器上使用某种背景并想要拉伸它，则高度：100%；应该做...

不过，我从来没有找到使用这种布局的好方法... =\

# numbers - 为什么在求素数时取模

> ID：14543328
> 
> 赞同：-3
> 
> 时间：2013-01-27T00:56:15.213
> 
> 标签：numbers, modulo

我试图理解为什么在编写一个查找素数的程序时需要模运算符；我是一名学生为了学习目的而分析一些代码，我对为什么需要模数感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:02:23.923

不需要显式模数。考虑一个[Eratosthenes 筛子的](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)实现（在 C 中为了使用某些东西）：

```
int numbersThatMayBePrime[100];

memset(numbersThatMayBePrime, 0, sizeof(int)*100);

for(int c = 2; c < 100; c++)
{
    if(!numbersThatMayBePrime[c])
    {
        printf("%d\n", c);

        for(int strikeThrough = c; strikeThrough < 100; strikeThrough += c)
            numbersThatMayBePrime[strikeThrough] = -1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T16:01:56.080

如果 n % 的模（n 和零之间的所有数字）始终为正且从不为零，则该数字是素数。我正在尝试弄清楚如何在 javascript 中对此进行编码。

# jquery - 任何 Slider 正在堆叠列表项

> ID：14543329
> 
> 赞同：0
> 
> 时间：2013-01-27T00:56:17.350
> 
> 标签：jquery, ruby-on-rails, anythingslider

我正在尝试将 AnySlider 合并到 RoR 站点[https://amillet89.heroku.com/](https://amillet89.heroku.com/)并且无法使滑块正常工作。相反，列表图像只是堆叠在一起。我在anythingSlider 方法中放置了一条警告语句，它似乎没有被调用。我检查了 Chrome 中的资源，看起来 jQuery 和 anySlider 函数都被加载了（通过 application.js 中的资产管道），所以我不确定它为什么没有被调用。

```
<div>
  <ul id="slider">
  <li><img src="http://placekitten.com/300/200" alt="" /></li>
  <li><img src="http://placehold.it/300x200" alt="" /></li>
  <li><img src="http://placebear.com/300/200" alt="" /></li>
 <li><img src="http://dummyimage.com/300x200/000/fff.jpg" alt="" /></li>
 <li><img src="http://placedog.com/300/200" alt="" /></li>
</ul> 
```

关于可能出现问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:22:06.157

将您的 js 函数挂接到回调中`jQuery.ready()`或`jQuery(window).load()`作为回调。

它不起作用的原因是您的调用`$('#slider').anythingSlider()`放在上面`<ul id="slider">`并立即执行。当 JS 运行时，`#slider`不存在，所以该函数不做任何事情。这段代码应该可以工作，但我没有测试。

```
var slider = {
      init: function() {
          $('#slider').anythingSlider({});
     }
}

$(window).load( slider.init ) 
```

# events - 操纵杆无法使用 SDL

> ID：14543333
> 
> 赞同：1
> 
> 时间：2013-01-27T00:56:35.977
> 
> 标签：events, sdl, joystick

我正在 SDL 中构建一个简单的游戏。我经历了无数的教程，我显然错过了一些东西，因为它仍然完全忽略了我的操纵杆

在我的构造函数中

```
SDL_JoystickEventState(SDL_ENABLE);
joystick = SDL_JoystickOpen(0); 
```

在我的更新中，我正在调用一个测试来检查我是否真的初始化了操纵杆

```
if (SDL_NumJoysticks() <= 0)
{
done = true;
} 
```

这也是我的播放器更新

```
void World::playerMovement()
{
    SDL_Event event;

    while (SDL_PollEvent (&event))
    {
        switch (event.type)
        {
            case SDL_QUIT:
                done = true;
                break;
            case SDL_JOYAXISMOTION:
                if ( ( event.jaxis.value < -3200 ) || (event.jaxis.value > 3200 ) )
                {
                    test = true;
                }
                    break;
        }
   }
} 
```

测试只是一个布尔值，一旦为真将意味着我的敌人开始产卵。我还检查了 main

```
if (SDL_Init( SDL_INIT_VIDEO | SDL_INIT_JOYSTICK ) < 0)
{
    fprintf(stderr, "Couldn't initialize SDL: %s\n", SDL_GetError());
    done = true;
} 
```

当我运行游戏时，它会正常加载，但无论我移动操纵杆多少，它都不会将 test 设置为 true。

我还尝试在 while poll 事件循环中使用以下内容。

```
if (event.type == SDL_JOYAXISMOTION)
{
if(SDL_JoystickGetAxis(joystick, 1) > 0)
{
test = true;
}
} 
```

有什么想法是我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:11:00.803

我认为 emartel 拥有确保 SDL_joystick 正常工作的最佳答案。

World::playerMovement() 什么时候发生？您的程序的整体流程很难从这些片段中确定。

我很高兴与您分享我用于处理操纵杆的代码，该代码跟踪：多个操纵杆、已删除死区的轴缩放 [-1,1] 以及按住按钮。

*   [http://www.raptor007.com/code/RaptorEngine_Joystick.zip](http://www.raptor007.com/code/RaptorEngine_Joystick.zip)

以下是如何将其用作主循环的一部分的片段：

```
// FIXME: SDL needs to be initialized before we get here.

JoystickManager Joy;
Joy.Initialize();
double deadzone = 0.02;

// Main loop.
bool done = false;
while( ! done )
{
    // Keep the list of joysticks up-to-date.
    Joy.FindJoysticks();

    // Handle all user input.
    SDL_Event event;
    while( SDL_PollEvent( &event ) )
    {
        // Let the JoystickManager track events relevant to it.
        Joy.TrackEvent( &event );

        // FIXME: Handle single-press events here (next target, etc).
        // Don't handle button-held-down events like firing (see below).

        if( event.type == SDL_QUIT )
            done = true;
    }

    // Read joystick 0 analog axes.
    double roll = Joy.Axis( 0, 0, deadzone );
    double pitch = Joy.Axis( 0, 1, deadzone );
    double yaw = Joy.Axis( 0, 3, deadzone );
    double throttle = Joy.AxisScaled( 0, 2, 1., 0., 0., deadzone );

    // Read joystick 0 buttons held down.
    bool firing = Joy.ButtonDown( 0, 0 );

    // FIXME: Update game objects and draw graphics.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-27T22:04:10.843

我在 SDL2 中发现了一个奇怪的行为：

如果没有事件放入队列，请尝试在 SDL_Init 调用之前添加以下内容：

```
SDL_SetHint(SDL_HINT_JOYSTICK_ALLOW_BACKGROUND_EVENTS,"1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T18:29:12.147

您确定`joystick`指向有效的操纵杆吗？

您声明您正在使用它`Constructor`...在您初始化 SDL 之前是否碰巧调用了该构造函数`SDL_INIT_JOYSTICK`？如果您的播放器是全局变量，则可能会发生这种情况。

确保按顺序：

*   通过将其添加到您的`SDL_Init`with`| SDL_INIT_JOYSTICK`或调用来初始化 Joystick 子系统`SDL_InitSubSystem(SDL_INIT_JOYSTICK);`
*   查看`SDL_NumJoysticks() > 0`
*   获取操纵杆 0：`joystick = SDL_JoystickOpen(0);`
*   启用事件：`SDL_JoystickEventState(SDL_ENABLE);`
*   处理您的事件`SDL_PollEvent`
*   在程序结束时，关闭游戏杆： SDL_JoystickClose(joystick);

此外，确保在 Windows 中正确检测到操纵杆并正确报告其输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T12:52:04.537

看起来您的 SDL 初始化不正确。

代替

```
SDL_Init(SDL_INIT_VIDEO | SDL_INIT_JOYSTICK) 
```

和

```
SDL_Init(SDL_INIT_EVERYTHING) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-18T15:20:32.703

如果您调用`SDL_NumJoysticks`以获取连接的控制器数量，然后调用`SDL_JoystickOpen`它在您的游戏循环之前返回一个操纵杆标识符，那么您将收到`SDL_JOYAXISMOTION`事件。

例如

```
int num_joy;
num_joy = SDL_NumJoysticks();
printf("%d joysticks found\n", num_joy);
for(int i = 0; i < num_joy; i++)
{
    SDL_Joystick *joystick = SDL_JoystickOpen(i);
    printf("Joystick name: %s\n", SDL_JoystickName(joystick));
}

SDL_Event event;
bool quit = false;
// Game loop
while(!quit)
{
    // event loop
    while(SDL_PollEvent(&event))
    {
        if (event.type == SDL_JOYAXISMOTION)
        {
            printf("Joystick______EVENT!\n");
        }
        // etc..... 
```

请参阅[https://wiki.libsdl.org/SDL_JoystickName](https://wiki.libsdl.org/SDL_JoystickName)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-26T13:51:32.870

这是 SDL 1.2 还是 2.0？就我而言，2.0 SDL_PollEvent(&event) 实际上并没有在事件结构中放入任何数据。在那次通话之后，我不得不使用 SDL_JoystickGetAxis(joystick_id, axis) 和朋友来获取数据。

因此，在您的情况下，请尝试将 SDL_JoystickGetAxis 调用移出事件类型的 if-test。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-27T03:21:18.253

我不知道这对你有什么帮助，但我知道 pygame 支持操纵杆。pygame 是 SDL 库的 python 端口。如果一切都失败了，我想你总是可以在 python 中编写那段特定的代码。

# c# - XXX 的最佳重载方法匹配有一些无效参数

> ID：14543334
> 
> 赞同：0
> 
> 时间：2013-01-27T00:56:43.003
> 
> 标签：c#, asp.net, entity-framework, visual-studio-2012, entity-framework-5

我是实体框架的新手。

我尝试编写以下方法，但出现编译时错误。

```
 protected static void EntitySQLQuery(AWEntities context)
        {
            string cmd = @"SELECT VALUE c FROM AWEntities.Person AS c WHERE c.FirstName = @FirstName";

            ObjectQuery<Person> persons = new ObjectQuery<Person>(cmd, context);//Error

        } 
```

* * *

> 'System.Data.Objects.ObjectQuery.ObjectQuery(string, System.Data.Objects.ObjectContext)' 的最佳重载方法匹配有一些无效参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:10:58.367

Your `AWEntities context` object is not recongnized as an `ObjectContext`. Please check the type of your object. Take a look at definition of [ObjectContext](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx) and [ObjectQuery's constructor](http://msdn.microsoft.com/en-us/library/bb738995%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T14:48:38.330

这是 Entity Framework 比较令人困惑的地方之一。您必须意识到 ObjectContext 是执行 EntityFramework 的旧方式，大约在 2010 年。这是在 DbContext 之前（和代码优先）。您仍然可以通过将 DbContext 转换为 IOjbectContextAdapter 来访问 ObjectContext，如下所示：

```
((IObjectContextAdapter)context).ObjectContext; 
```

这将使您的查询如下所示：

```
ObjectQuery<Person> persons = new ObjectQuery<Person>(cmd, ((IObjectContextAdapter)context).ObjectContext); 
```

我不知道实体结构化查询是否被提升了。我会考虑尽可能使用 LInQ。

```
var firstname = "Fred";
return from person in AWEntities.Person
       where person.FirstName = firstname
       select person; 
```

如果您正在阅读 Julie Lerman 的书，我强烈建议您阅读所有三本书。第一个是解释所有基础知识的巨大坟墓（并且围绕 ObjectContext 做事方式编写），后两个对于当今的代码优先/dbcontext 世界更为实用。

# c# - 从 .NET Windows 服务调用 Shell32.dll

> ID：14543340
> 
> 赞同：10
> 
> 时间：2013-01-27T00:57:48.137
> 
> 标签：c#, .net, multithreading, com, shell32

我有一个 .NET 4.0 库，它使用 Shell32 和 Folder.GetDetailsOf() 从 WTV 文件中获取元数据。我已经成功地将它与控制台和 Windows 窗体应用程序一起使用，没有问题。但由于某种原因，当从 .NET 4.0 Windows 服务调用组件时，启动 Shell 类的调用会导致 COM 错误。

库内失败的代码：

Shell32.Shell shell = new Shell();

错误：

无法将“System.__ComObject”类型的 COM 对象转换为接口类型“Shell32.Shell”。此操作失败，因为 IID 为“{286E6F1B-7113-4355-9562-96B7E9D64C54}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .

我阅读了我的 Apartment Threading、COM Interops、Dynamic、PIA 等 等 :) 但我找到的解决方案组合都没有解决这个问题。它必须是来自另一个看不到互操作的线程的调用。请帮忙 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-07-26T03:38:59.513

我最近在使用命令行应用程序（控制台）时遇到了同样的问题。事实证明，需要用属性注释程序的`Main()`方法。`[STAThread]`还注意到，如果入口点被注释了，它会以完全相同的方式失败`[MTAThread]`。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T01:03:32.170

我怀疑这可能与默认情况下 Windows 服务无权与桌面交互的事实有关。

要测试该理论，请重新配置（至少临时）您的服务权限以允许桌面交互。以下链接将引导您完成此操作

[https://superuser.com/questions/415204/how-do-i-allow-interactive-services-in-windows-7](https://superuser.com/questions/415204/how-do-i-allow-interactive-services-in-windows-7)

**更新**

> Shell32 功能与 LocalSystem 一样工作得很好，即使未选中“允许服务与桌面交互”复选框，但在特定用户帐户（无论是受限用户帐户还是管理员帐户）下似乎根本不起作用

[在 Windows 服务中使用 SHFileOperation](https://stackoverflow.com/questions/202031/using-shfileoperation-within-a-windows-service)

如果你成功地让它工作，请确保你禁止任何 UI 交互。此答案中提供了有关如何执行此操作的信息：

[https://stackoverflow.com/a/202519/141172](https://stackoverflow.com/a/202519/141172)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T09:21:55.783

我创建了一个 Windows 服务，并使用 P/Invoke 调用了 Shell32。

就我而言，它是模拟右键单击文件：

首先，我需要以用户（而不是系统）的身份创建一个进程来与 Desktop 进行交互：

```
[DllImport("advapi32.dll", SetLastError=true, CharSet=CharSet.Auto)]
 static extern bool CreateProcessAsUser(
     IntPtr hToken,
     string lpApplicationName,
     string lpCommandLine,
     ref SECURITY_ATTRIBUTES lpProcessAttributes,
     ref SECURITY_ATTRIBUTES lpThreadAttributes,
     bool bInheritHandles,
     uint dwCreationFlags,
     IntPtr lpEnvironment,
     string lpCurrentDirectory,
     ref STARTUPINFO lpStartupInfo,
     out PROCESS_INFORMATION lpProcessInformation); 
```

在这个过程中，我使用了 Shell32 库（加载然后提取值）

```
[DllImport("kernel32.dll")]
private static extern IntPtr LoadLibrary(string dllName);
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static extern int LoadString(IntPtr hInstance, uint uID, StringBuilder lpBuffer, int nBufferMax); 
```

我的 Windows 服务可以通过它找到 Shell32 的不同值并像用户一样与桌面交互；-)

[您可以在此网站](http://www.pinvoke.net)上找到 P/Invoke 的更多详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-25T00:24:44.530

因为我通过搜索错误找到了我的方式，所以我想补充一点，如果您尝试从 GUI 应用程序中的非 gui 线程创建一个新的 Shell()，也会发生同样的事情 - 即使 Main 被注释为 [STAThread ]。@Eric J 的回答给了我足够的暗示，让我从那里弄清楚。

因此，如果您想要 GUI 应用程序中的 Shell()，则需要执行 if(mainForm.InvokeRequired) { mainForm.Invoke( ... ) } 舞蹈。

# python - 烧瓶文件结构

> ID：14543341
> 
> 赞同：2
> 
> 时间：2013-01-27T00:57:56.033
> 
> 标签：python, flask

我正在开发一个中等大小的烧瓶应用程序。我有两个主要模块，一个用于创建数据库以免将其称为 schema.py，另一个用于提供视图 views.py。我在[http://flask.pocoo.org/docs/patterns/packages/](http://flask.pocoo.org/docs/patterns/packages/)`app`中使用建议的结构， 我`db=SQLAlchemy(app)`在`__init__.py`. 我在这里解决循环导入问题！以下是我的文件导入：

`schema`.py：

```
from myapp import db 
```

`views`.py：

```
from myapp import app,db
import myapp.schema 
```

`__init__`.py

```
import myapp.views 
```

因此，当我运行 schema.py 时，我会收到循环导入错误。我应该如何解决这个问题？我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:29:35.997

哦，是的，我们也经常遇到循环导入，但解决它的方法是创建文档中的应用程序工厂。

[http://flask.pocoo.org/docs/patterns/appfactories/](http://flask.pocoo.org/docs/patterns/appfactories/)

您可能还会考虑创建另一个模块或另一个地方来输入组件。下面以 SQLAlchemy 为例就是一个很好的例子。

```
#: SQLalchemy object created without an attached app
db = SQLAlchemy()

def create_app():
    app = Flask(__name__)
    #: some configuration stuff

    #: Initializing app.
    db.init_app(app)

    return app 
```

如果需要，您可以将组件放在另一个模块中以使它们更加分离，但这是我们发现的“帮助”防止循环导入的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T06:58:57.840

在烧瓶中，有一个对象叫做[`g`](http://flask.pocoo.org/docs/api/#flask.g)，也有一个东西叫做[`current_app`](http://flask.pocoo.org/docs/api/#flask.current_app)。`current_app`用简单的语言是您在 init 或任何文件（初始化应用程序）中创建的应用程序，稍后它代表您应用程序，如果您导入`from flask import current_app`. 当然有一些限制，但例如，如果您需要访问应用程序的设置 - 这肯定会有所帮助。

关于`g`- 这是保持数据库连接之类的东西并在您的应用程序周围随处可见的好地方。如果你`__init__.py`有类似的东西：

```
from flask import g
g.db = connect_to_some_db(...) 
```

然后在您需要使用数据库连接的其他地方 - 简单：

```
from flask import g
# do something with your db
g.db.some_method_or_whatever(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:56:31.117

来自[http://flask.pocoo.org/docs/patterns/packages/](http://flask.pocoo.org/docs/patterns/packages/)：（添加突出显示）

> 每个 Python 程序员都讨厌它们，但我们只是添加了一些：循环导入（这是两个模块相互依赖的时候。在这种情况下，views.py 依赖于`__init__.py`）。请注意，这通常是一个坏主意，但在这里它实际上很好。这样做的原因是我们实际上并没有使用其中的视图，`__init__.py`而只是确保导入了模块，而我们在**文件的底部**这样做。

确保它`import myapp.views`位于`__init__.py`、 after`app`和的底部`db`。它违反了[pep8 指导方针](http://www.python.org/dev/peps/pep-0008/#imports)，但正如上面的引述所说，这实际上很好。

# ios - UIScrollView scrollViewDidEndDecelerating 不触发

> ID：14543342
> 
> 赞同：3
> 
> 时间：2013-01-27T00:58:00.013
> 
> 标签：ios, uiview, uiscrollview, uiscrollviewdelegate

我有一个以`UIScrollView`编程方式创建的`UIView`. 我需要做什么来确保我可以使用委托方法`scrollViewDidEndDecelerating`？

这是我设置的内容，请假设在`UIScrollView`, 中有三个`UIImageViews`. 当页面第一次加载时，我正在看中心`UIImageView`，我可以向后或向前滚动一次。我需要这个委托方法的原因是因为我打算用它来计算`UIImageView`我当前正在查看的方法。

**视图控制器.h**

```
@interface ViewController : UIViewController <UIScrollViewDelegate> 
```

**视图控制器.m**

```
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
scrollView.pagingEnabled = YES;
[self.view addSubview: scrollView];

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    NSLog(@"scrollViewDidEndDecelerating");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:54:17.463

添加

```
 scrollView.delegate = self 
```

在滚动视图初始化之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:00:40.743

在您的委托方法中，您可以测试每个 uiimageview 中心以查看哪个与 uiview 中心匹配，即您正在查看的 uiimageview。

# android - 数据库和列表视图

> ID：14543349
> 
> 赞同：0
> 
> 时间：2013-01-27T00:59:08.213
> 
> 标签：android

很抱歉这个愚蠢的问题，但这对我来说真的很困惑。我正在制作一个计划器应用程序，我希望第一个屏幕显示从数据库中提取的行程列表（但也许数组会更好用？）。我需要用户能够根据需要添加和删除它们（通过菜单按钮）A，并且我希望它们显示两行文本。

点击行程后，用户应该会进入一个类似日历的页面，显示他们创建的各种事件，这些事件也将从数据库中提取。如果我能在主屏幕上找到它，我很可能会再次找到它。我只是有点难以弄清楚这一切。我已经阅读了文档和所有这些。它只是有点过头了。我以前从来没有在数据库上动过一根棍子。

TL;博士：

我需要创建一个用户可编辑的数据库（或数组），它将显示在 ListView 中。如何创建和管理数据库，如何让内容在 ListView 中显示得很好？

谢谢大家！

MainActivity.java

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void addEvent(View view) {       

    }
} 
```

/menu/activity_main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>

    <item
        android:showAsAction="always|withText"
        android:title="@string/add_event"
        android:icon="@drawable/newcontent" />

</menu> 
```

/layout/activity_main.xml

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/ListView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

</ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:11:20.303

Most of the information is found in the android developer resources, but its hard to know what to look for if you haven't done it before. You can create a SQLite database and the interface to load data from the tables using a ContentProvider. Then use a CursorLoader to a asynchronously load the relevant records to populate your views. To change between the different pages try creating them as separate fragments which you can then change programmatically from the appropriate event handlers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:16:01.983

您应该首先查看[在 SQL 数据库中保存数据](http://developer.android.com/training/basics/data-storage/databases.html)和[ListView API 指南](http://developer.android.com/guide/topics/ui/layout/listview.html)。

# javascript - Javascript，有没有办法让 javascript 禁用除一个之外的所有链接

> ID：14543350
> 
> 赞同：0
> 
> 时间：2013-01-27T00:59:11.367
> 
> 标签：javascript, html, joomla2.5

我想将一个站点上的所有链接重定向到另一个域。除了网站中的几个菜单链接和一张图片..我能找到的只是这段代码，它只是禁用了所有链接的任何想法

```
function disable() {
  links=document.getElementsByTagName('A');
  for(var i=0; i<links.length; i++) {
    links[i].href="javascript:return false";
  }
}
window.onload=disable; 
```

我想展示大量可供人们下载的演示模板，但这些模板有各种我不希望人们浏览的链接，所以我想在模板中放一张图片，说看看更多模板。这就是我想要启用的唯一链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:08:29.440

Using the script you have as an example just set a conditional. I used the `inArray()` function described [here](https://stackoverflow.com/questions/784012/javascript-equivalent-of-phps-in-array). The basic logic is to set an array called `good_links` that is a list of links you do not want neutralized. And then by using the `inArray()` function, the `disable()` function can now logically traverse all links but ignore the `good_links`:

```
<script type="text/javascript">

    function disable(){
        var good_links = new Array();
        good_links[0] = "http://www.google.com/";
        good_links[1] = "http://www.yahoo.com/";
        good_links[2] = "http://www.bing.com/";
        links=document.getElementsByTagName('A');
        for(var i=0; i<links.length; i++) {
            if (!inArray(links[i].href, good_links)) {
                links[i].href="javascript:return false";
            }
        }
    }

    function inArray(needle, haystack) {
        var length = haystack.length;
        for(var i = 0; i < length; i++) {
            if(haystack[i] == needle) return true;
        }
        return false;
    }

    window.onload=disable;

</script> 
```

Okay, here is my whole HTML file which works. The only links that should work are: Google, Yahoo & Bing. Apple, Catmoji & StackOverflow are disabled.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>My Webpage</title>
    <script type="text/javascript">
//<![CDATA[

    function disable(){
        var good_links = new Array();
        good_links[0] = "http://www.google.com/";
        good_links[1] = "http://www.yahoo.com/";
        good_links[2] = "http://www.bing.com/";
        links=document.getElementsByTagName('A');
        for(var i=0; i<links.length; i++) {
            if (!inArray(links[i].href, good_links)) {
                links[i].href="javascript:return false";
            }
        }
    }

    function inArray(needle, haystack) {
        var length = haystack.length;
        for(var i = 0; i < length; i++) {
            if(haystack[i] == needle) return true;
        }
        return false;
    }

    window.onload=disable;

    //]]>
    </script>
</head>

<body>
    <a href="http://www.google.com/">http://www.google.com/</a><br />
    <a href="http://www.apple.com/">http://www.apple.com/</a><br />
    <a href="http://www.yahoo.com/">http://www.yahoo.com/</a><br />
    <a href="http://www.catmoji.com/">http://www.catmoji.com/</a><br />
    <a href="http://www.bing.com/">http://www.bing.com/</a><br />
    <a href="http://www.stackoverflow.com/">http://www.stackoverflow.com/</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:03:53.123

您需要找到您不想禁用的链接的某些属性，然后在循环时检查该属性。例如，如果图像和菜单链接具有`#`作为它们的`href`属性：

```
function disableLinks () {
    var allLinks=document.getElementsByTagName('A');

    for(var i=0; i<allLinks.length; i++) {
        if (allLinks[i].href !== '#') {
            allLinks[i].href="javascript:return false";
        }
    }
}

window.onload = disableLinks; 
```

值得一提的是，在没有充分理由的情况下禁用/重定向一堆链接是激怒用户并使他们永远不会返回您的网站的好方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T01:03:23.033

如果您使用的是 Apache，并且可以区分重定向链接和不重定向链接，则可以调整 Apache mod_rewrite 规则...

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.domain.com/$1 [R=301,L] 
```

必须改变，`(.*)`但这是一个开始。

# android - afterTextChanged 崩溃

> ID：14543354
> 
> 赞同：2
> 
> 时间：2013-01-27T00:59:47.263
> 
> 标签：android, textwatcher

我试图实现 Textwatcher 接口，我试图更改 中的文本`afterTextChanged()`，但它崩溃了。为什么会崩溃？：

```
 @Override
        public void afterTextChanged(Editable s) {
            Editable myText;

            if(s.toString().contains("hi")){
                myText = s.append(" ho");
                myEdit.setText(myText);

            }
        } 
```

日志猫

```
01-27 01:23:18.213: E/AndroidRuntime(2563): FATAL EXCEPTION: main
01-27 01:23:18.213: E/AndroidRuntime(2563): java.lang.StackOverflowError
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.graphics.Paint.getTextRunAdvances(Paint.java:1720)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.MeasuredText.addStyleRun(MeasuredText.java:164)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.MeasuredText.addStyleRun(MeasuredText.java:204)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.StaticLayout.generate(StaticLayout.java:281)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.DynamicLayout.reflow(DynamicLayout.java:284)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.DynamicLayout.access$000(DynamicLayout.java:35)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.DynamicLayout$ChangeWatcher.reflow(DynamicLayout.java:621)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.DynamicLayout$ChangeWatcher.onTextChanged(DynamicLayout.java:631)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendTextChanged(SpannableStringBuilder.java:962)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:496)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:247)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:30)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at com.example.textfields.MainActivity$1.afterTextChanged(MainActivity.java:45)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7108)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8805)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:497)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:247)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:30)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at com.example.textfields.MainActivity$1.afterTextChanged(MainActivity.java:45)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7108)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8805)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:497)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:247)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:30)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at com.example.textfields.MainActivity$1.afterTextChanged(MainActivity.java:45)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7108)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8805)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:497)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:247)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:30)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at com.example.textfields.MainActivity$1.afterTextChanged(MainActivity.java:45)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7108)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8805)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:497)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:247)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:30)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at com.example.textfields.MainActivity$1.afterTextChanged(MainActivity.java:45)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7108)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8805)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:497)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:247)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:30)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at com.example.textfields.MainActivity$1.afterTextChanged(MainActivity.java:45)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView.sendAfterTextChanged(TextView.java:7108)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:8805)
01-27 01:23:18.213: E/AndroidRuntime(2563):     at android.text.SpannableStringBuilder.sendAfterTextChanged(SpannableStringBuilder.java:970) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T01:35:52.703

您应该在设置其文本之前调用您的[removeTextChangedListener()](http://developer.android.com/reference/android/widget/TextView.html#removeTextChangedListener%28android.text.TextWatcher%29)`EditText`，并在更改文本后重新添加您的侦听器。否则`afterTextChanged()`会一直被调用，就像你已经注意到的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-14T07:32:22.030

你也可以试试这个：-

**这也用于在更改后更改备用 editText 值。**

```
public class MainActivity extends AppCompatActivity 
implements TextWatcher{

   EditText editText1, editText2;
   @Override
    protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

       editText1 = findViewById(R.id.editText1);
       editText2 = findViewById(R.id.editText2);

       editText1.addTextChangedListener(this);
       editText2.addTextChangedListener(this);

      }

    @Override
    public void beforeTextChanged(CharSequence s, int start, 
           int 
           count, int after) {

    }

   @Override
   public void onTextChanged(CharSequence s, int start, int 
           before, int count) {

   }

  @Override
  public void afterTextChanged(Editable s) {

      if (getCurrentFocus() == editText1) {
         // is only executed if the EditText was directly 
            changed by the user.
          Log.e("check","getCurrentFocus() == editText1");

          editText2.removeTextChangedListener(this);

          editText2.setText(String.valueOf(s));

          editText2.addTextChangedListener(this);

       //            editText1.clearFocus();
      }

      if (getCurrentFocus() == editText2) {
          // is only executed if the EditText was directly 
             changed by the user
          Log.e("check","getCurrentFocus() == editText2");

          editText1.removeTextChangedListener(this);

          editText1.setText(String.valueOf(s));

          editText1.addTextChangedListener(this);

        //            editText2.clearFocus();
        }

   }

} 
```

# ruby - 继承但不与超类共享且不共享命名空间的变量/常量

> ID：14543355
> 
> 赞同：1
> 
> 时间：2013-01-27T00:59:55.610
> 
> 标签：ruby, variables, constants

有没有办法通过以下三个属性引入一些变量/常量？

> a) 当它没有在自己的类中分配时，它继承超类的值。
> 
> b) 它不继承超类以外的其他类的值（即使它们共享名称空间）。
> 
> c) 在自己的类中分配时，它不会覆盖超类的值。

使用类实例变量，a) 不满足。

```
class A; @foo = :foo end
class B < A; @foo end # => nil  (Does not satisfy (a))
class A; class C; @foo end end # => nil (Satisfies (b))

class B < A; @foo = :bar end
class A; @foo end # => :foo  (Satisfies (c)) 
```

使用类变量，c) 不满足。

```
class A; @@foo = :foo end
class B < A; @@foo end # => :foo  (Satisfies (a))
class A; class C; @foo end end # => NameError (Satisfies (b))

class B < A; @@foo = :bar end
class A; @foo end # => :bar  (Does not satisfy (c)) 
```

使用常数，b) 不满足。

```
class A; Foo = :foo end
class B < A; Foo end # => :foo  (Satisfies (a))
class A; class C; Foo end end # => :foo (Does not satisfy (b))

class B < A; Foo = :bar end
class A; Foo end # => :foo  (Satisfies (c)) 
```

我想要这样的东西：

```
class A; something = :foo end
class B < A; something end # => :foo  (Satisfies (a))
class A; class C; something end end # => nil or Error (Satisfies (b))

class B < A; something = :bar end
class A; something end # => :foo  (Satisfies (c)) 
```

如果不能简单地通过分配和引用变量/常量来完成，那么有没有办法实现具有此属性的访问器方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T02:44:57.157

您需要使用所需的特定属性创建自己的访问器。例如，

```
module InheritableProperty
  def property
    @property || superclass.property
  end
  def property=(value)
    @property = value
  end
end

class A
  extend InheritableProperty
end
class B < A
  extend InheritableProperty
  class C
    extend InheritableProperty
  end
end

A.property = 1
A.property # => 1
B.property # => 1
B::C.property # error

A.property = 1
B.property = 2
A.property # => 1
B.property # => 2
B::C.property # error

A.property = 1
B.property = 2
B::C.property = 3
A.property # => 1
B.property # => 2
B::C.property # => 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:53:13.890

按照 joshuanapoli 的建议，我决定这样做：

```
class A
  def self.foo; defined?(@foo) ? @foo : superclass.foo end
end

class A; @foo = :foo end
class B < A; foo end # => :foo
class A; class C; foo end end # => Error
class B < A; @foo = :bar end
class A; foo end # => :foo 
```

# python - Flask/Facebook：Flask-Oauth OAuthException：缺少 redirect_uri 参数？

> ID：14543357
> 
> 赞同：3
> 
> 时间：2013-01-27T00:59:56.267
> 
> 标签：python, facebook, oauth, flask

我有一个 Flask 应用程序，我正在尝试通过 Facebook 进行身份验证。在本地，它工作得非常好。当我部署到 Heroku 时，它不起作用，抛出以下错误：

```
{u'error': {u'type': u'OAuthException', u'message': u'Missing redirect_uri parameter.', u'code': 191}}

'Invalid response from facebook' 
```

我已经在 stackoverflow 和谷歌上搜索了这个问题的答案，但我似乎无法弄清楚。

我对为什么它在本地工作而不是部署感到特别困惑。

至于我的实施，这是信中的：

```
facebook = oauth.remote_app('facebook',
    base_url='https://graph.facebook.com/',
    request_token_url=None,
    access_token_url='/oauth/access_token',
    authorize_url='https://www.facebook.com/dialog/oauth',
    consumer_key=FACEBOOK_APP_ID,
    consumer_secret=FACEBOOK_APP_SECRET,
    request_token_params={'scope':'email,user_birthday,user_education_history,user_photos,publish_actions'}
    )

@app.route('/login')
def login():
    return facebook.authorize(callback=url_for('facebook_authorized',
        next=request.args.get('next') or request.referrer or None,
        _external=True))

@app.route('/login/authorized')
@facebook.authorized_handler
def facebook_authorized(resp):
    if resp is None:
        error = 'Access denied: reason=%s error=%s' %(
            request.args['error_reason'],
            request.args['error_descriptions']
        )
        return render_template('home.html', error=error)
    xyz = (resp['access_token'], '')
    session['oauth_token'] = xyz
    me = facebook.get('/me')
    checkUser = db.session.query(User).filter(User.fid==me.data['id']).all()
    if not checkUser:
        fname = me.data['name'].split()[0]
        lname = me.data['name'].split()[-1]
        education=''
        if 'education' in me.data:
            education=me.data['education'][-1]['school']['name']
        newuser = User(me.data['id'], fname, lname, me.data['email'], me.data['username'], education)
        db.session.add(newuser)
        db.session.commit()
    flash('You were logged in')
    session['fid'] = me.data['id']
    return redirect(url_for('home'))

@facebook.tokengetter
def get_facebook_oauth_token():
    return session.get('oauth_token') 
```

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:01:18.950

尝试使您的回调 URL 成为带有域等的完整 URL。如果您在本地工作，则可以使用 localhost，但如果您不在 80 上，请指定端口。

# c++ - 输出流作为类成员

> ID：14543363
> 
> 赞同：6
> 
> 时间：2013-01-27T01:00:44.160
> 
> 标签：c++, class, iostream, output

我有一个 c++ 库，它提供了一个具有复杂逻辑的对象。在数据处理期间，这个对象向 std::cout 输出很多东西（现在是硬编码的）。我希望处理输出不要转到标准输出，而是转到 custm 小部件（一些文本显示）。我试图创建一个`std::ostream`类成员，用一个参数设置它（std::cout 用于控制台应用程序和其他一些在 GUI 应用程序中处理的 ostream）。但是编译器向我抛出了以下错误：

```
[ 14%] 构建 CXX 对象 src/core/CMakeFiles/PietCore.dir/pvirtualmachine.cpp.o
/usr/include/c++/4.6/ostream：在构造函数'PVirtualMachine::PVirtualMachine(QString)'中：                                                                        
/usr/include/c++/4.6/ostream:363:7: 错误: 'std::basic_ostream::basic_ostream() [with _CharT = char, _Traits = std::char_traits]' 受保护
/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.cpp:33:50：错误：在此上下文中
在 /usr/include/c++/4.6/ios:45:0 包含的文件中，
                 来自 /usr/include/c++/4.6/ostream:40，
                 来自 /usr/include/c++/4.6/iterator:64，
                 来自/usr/include/qt4/QtCore/qlist.h:50，
                 来自/usr/include/qt4/QtCore/qvector.h:48，
                 来自/usr/include/qt4/QtGui/qpolygon.h:45，
                 来自 /usr/include/qt4/QtGui/qmatrix.h:45，
                 来自/usr/include/qt4/QtGui/qtransform.h:44，
                 来自/usr/include/qt4/QtGui/qimage.h:45，
                 来自/usr/include/qt4/QtGui/QImage:1，
                 来自/home/tomasz/Development/C++/piet/src/core/pcodepointer.h:17，
                 来自/home/tomasz/Development/C++/piet/src/core/pblockmanager.h:9，
                 来自/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.h:10，
                 来自/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.cpp:4：
/usr/include/c++/4.6/bits/ios_base.h：在成员函数'std::basic_ios& std::basic_ios::operator=(const std::basic_ios&)'中：
/usr/include/c++/4.6/bits/ios_base.h:791:5: 错误：'std::ios_base& std::ios_base::operator=(const std::ios_base&)' 是私有的
/usr/include/c++/4.6/bits/basic_ios.h:64:11：错误：在此上下文中
在 /usr/include/c++/4.6/iterator:64:0 包含的文件中，
                 来自/usr/include/qt4/QtCore/qlist.h:50，
                 来自/usr/include/qt4/QtCore/qvector.h:48，
                 来自/usr/include/qt4/QtGui/qpolygon.h:45，
                 来自 /usr/include/qt4/QtGui/qmatrix.h:45，
                 来自/usr/include/qt4/QtGui/qtransform.h:44，
                 来自/usr/include/qt4/QtGui/qimage.h:45，
                 来自/usr/include/qt4/QtGui/QImage:1，
                 来自/home/tomasz/Development/C++/piet/src/core/pcodepointer.h:17，
                 来自/home/tomasz/Development/C++/piet/src/core/pblockmanager.h:9，
                 来自/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.h:10，
                 来自/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.cpp:4：
/usr/include/c++/4.6/ostream：在成员函数'std::basic_ostream& std::basic_ostream::operator=(const std::basic_ostream&)'中：
/usr/include/c++/4.6/ostream:57:11: 注意：这里首先需要综合方法 'std::basic_ios& std::basic_ios::operator=(const std::basic_ios&)'
/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.cpp：在成员函数'void PVirtualMachine::setOutput(std::ostream)'中：
/home/tomasz/Development/C++/piet/src/core/pvirtualmachine.cpp:216:11：注意：合成方法'std::basic_ostream& std::basic_ostream::operator=(const std::basic_ostream&)'首先需要这里

```

如果有人指出我出了什么问题，我会很高兴，因为我不知道......

我的代码如下所示：

*   .h 文件

```
类 PVirtualMachine {
  私人的：
    std::ostream 输出；
    [...]
  上市：
    无效 setOutput(std::ostream);
    [...]
};

```

*   .cpp 文件

```
无效 PVirtualMachine::setOutput(std::ostream os)
{
  输出=操作系统；
}

```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-27T01:11:24.387

您在这里有两个选择：

*   使用参考，或
*   使用指针

您不能使用普通实例，因为`ostream`它是不可复制的。

**使用引用（直接引用已经实例化的`ostream`）**

```
class PVirtualMachine {
  private:
    std::ostream & output;
    [...]
  public:
    PVirtualMachine(std::ostream &);  // Reference must be initialized on construction.
    [...]
}; 
```

*好处：*

*   没有指针语法。
*   *`std::ostream`只要不删除原始变量，就*应该*始终引用 的有效实例。*

 **缺点：*

*   该类`PVirtualMachine`必须使用初始化列表中的输出引用来构造，否则将无法编译。
*   初始化后无法更改引用。
*   不能与移动赋值运算符一起使用（即`operator=(PVirtualMachine &&)`）

**使用指针（对对象的可选引用）**

```
class PVirtualMachine {
  private:
    std::ostream * output;
    [...]
  public:
    void setOutput(std::ostream *);
    [...]
}; 
```

*好处：*

*   可以实例化为空指针。
*   可以轻松传递。
*   可以更新以指向新`std::ostream`实例。
*   可以在 PVirtualMachine 实例内部或外部创建。
*   与移动赋值运算符一起使用。

*缺点：*

*   指针语法。
*   访问 ostream 和/或在构造函数中时必须检查空引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T01:05:19.583

您可以使用对 a 的引用`std::ostream`，这将支持任何类型的输出流，例如标准输出、文件等。这很好，只要您只想使用一个流，并且流不会被破坏：

```
class PVirtualMachine {
  private:
    std::ostream & output;
    [...]
  public:
    PVirtualMachine(std::ostream & os = std::cout): output(os) { }
    // void setOutput(std::ostream & os) { output = os; } // can't change the reference
    [...]
}; 
```

如果您希望此类共享流（因此在此类的生命周期内使其保持活动状态），请使用 a`std::shared_ptr<std::ostream>`而不是引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:08:36.913

我实际上会在我可能想要调试的模块中使用一个 ostream 实例。请注意，此类型没有默认构造函数，您必须将指针传递给流缓冲区，但该指针可以为空。现在，当/如果要捕获模块的输出时，只需使用`rdbuf()`. 这个流缓冲区可以是 std::cout 的流缓冲区，但它也可以是一个`std::stringbuf`或`std::filebuf`一些自写的，自动将输出重定向到某个窗口。一个警告：没有流缓冲区的输出将设置故障位（甚至是坏位？），因此您必须`clear()`在更改流缓冲区后调用输出流。另请注意，您必须手动管理此流缓冲区和引用它的流的生命周期，不涉及所有权转移和自动清理。*

# javascript - 查找由“this”表示的元素的子元素，该元素具有某个类

> ID：14543367
> 
> 赞同：1
> 
> 时间：2013-01-27T01:01:33.827
> 
> 标签：javascript, jquery, this

如果我可以使用 a 识别此元素，我知道如何完成此操作`selector`：

```
$("selector.class") 
```

但是如果我的选择器是关键字`this`呢？显然`$(this".class")`是行不通的，我不想使用`$(this).children(".class")`，因为那时我需要使用 提取元素的 HTML `.html()`，虽然我知道在所选元素中只有一个此类的元素（我'我写 HTML），JQuery 没有，它假设`children()`在与类一起使用时返回几个元素（至少我认为这就是它的作用，因为

```
$(this).children(".class").html() 
```

返回`undefined`）。

我还有其他方法可以做到这一点吗？

请随时要求澄清，我理解这对某些人来说可能不太清楚。

**编辑**：你们中的一些人要求澄清，所以在这里。让我重新表述一下这个问题：通常，当我让 JQuery 给我一些元素并给它一个类作为选择器时，它假设我会得到多个元素，因此`$(".selector").html()`不起作用，因为你不能得到几个元素的 HTML（至少这是我的理论）。相反，我希望它认识到，在这种情况下，我只得到了 1 个元素，并且对待它就是这样。我的限制是我的选择器的一部分是`this`. 我希望这有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T01:02:37.683

我不完全清楚你在问什么问题，所以这里有几个不同的选项：

要搜索`this`与所需选择器匹配的任何从属标记（在 DOM 树中以根为根）：

```
$(this).find(".myClass"); 
```

或者，如果您只是想查看`this`元素是否具有特定的类名，则可以使用：

```
if ($(this).hasClass("myClass")) {
    // this element has the desired class
} 
```

或者，如果选择器比一个类更复杂，你可以`.is()`这样使用：

```
if ($(this).is("selector")) {
    // this element matches desired selector
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T01:06:41.900

真的`this`不是一个选择器，但我认为你可以这样做：

```
$(".class", this) 
```

[这是向](http://api.jquery.com/jQuery/#jQuery1)[(](http://api.jquery.com/jQuery/#jQuery1) [) 函数](http://api.jquery.com/jQuery/#jQuery1)`context`提供参数的示例[`jQuery``$`](http://api.jquery.com/jQuery/#jQuery1)

例如（[此处为 jsfiddle](http://jsfiddle.net/et9R7/2/)），HTML：

```
<div id="dis">hello
    <div class="cls">
        hi</div></div>
<div class="cls">
    goodbye</div> 
```

jQuery：

```
$(function () {
    $('#dis').click(function () {
        alert(
            $('.cls', this).html());
    });
}); 
```

单击“dis” div 时会提示“hi”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T01:11:01.890

Jquery 只是 JavaScript 之上的一层。

只需使用原始 javascript 即可获得所需的内容。

```
var childOfThis = this.querySelector('.myClass'); 
```

# android - 修改系统应用程序：需要原始的 AndroidManifest.xml，但为什么呢？

> ID：14543370
> 
> 赞同：4
> 
> 时间：2013-01-27T01:01:58.707
> 
> 标签：android, apk, code-signing, meta-inf

编辑系统 APK 的基本步骤：

1.  备份 APK。
2.  反编译工作 APK。
3.  做出改变。
4.  重新编译工作 APK。
5.  将META-INF 文件夹和 AndroidManifest.xml 从备份 APK（从未反编译）复制/粘贴**到重新编译的工作 APK 中。**完毕！

META-INF 包含签名：这是有道理的。***但是，AndroidManifest.xml 保留原始签名的目的是什么？***我自己对此进行了测试，Android 不会使用重新编译的 AndroidManifest.xml（即不是原始的 AndroidManifest.xml）加载 APK。

许多指南声明了将 META-INF 和 AndroidManfest.xml 从原始 APK 复制到修改后的 APK 的必要性。

我发现的最接近的答案是重新编译会损坏 AndroidManifest.xml（请参阅[http://rootzwiki.com/topic/268-guide-newbies-how-to-port-themes/](http://rootzwiki.com/topic/268-guide-newbies-how-to-port-themes/)），但我比较了原始和后期重新编译 AndroidManifest.XML 并且它们是相同的（说 WinMerge 并且它们具有相同的 MD5 和 SHA1 哈希值）。另一个人 ( [http://miuiandroid.com/community/threads/q-remove-miui-torch-app.16013/](http://miuiandroid.com/community/threads/q-remove-miui-torch-app.16013/) ) 推测 META-INF 和 AndroidManifest.xml 以某种方式相互关联。

每个人都这样做，但有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:53:41.377

在验证系统 APK 时，Android 会检查 APK 中文件子集的签名，以确保它们没有被篡改。这些文件包括`AndroidManifest.xml`、`classes.dex`和其他文件。如果原始文件的 SHA-1 摘要（存储在`META-INF/MANIFEST.MF`和`META-INF/CERT.SF`中）与修改后的 APK 中的文件的摘要不匹配，则 Android 将拒绝加载 APK。

# rspec - rspec 自定义匹配器不起作用 - 获取 NoMethodError

> ID：14543374
> 
> 赞同：2
> 
> 时间：2013-01-27T01:02:21.087
> 
> 标签：rspec, nomethoderror, matcher

我正在尝试在 Michael Hartl 的 RailsTutorial.org 的第 8 章中做练习 2。我在 spec/support/utilities.rb 文件中添加了以下内容：

```
RSpec::Matchers.define :have_title do |message|
  match do |page|
    page.should have_selector('title', text: message)
  end
end 
```

在我的 authentication_pages_spec.rb 文件中，我已更改

```
it { should have_selector('title', text: 'Sign in') } 
```

至

```
it { should have_title('Sign in') } 
```

我希望这可以正常工作，但是在运行测试时我收到以下错误消息：

带有无效信息的身份验证登录失败/错误：它{应该有_title（'登录'）} NoMethodError：未定义的方法`has_title?' for #<Capybara::Session> # ./spec/requests/authentication_pages_spec.rb:22:in`块（4级）在'

当我相信我已经正确编写了方法时，我不明白为什么它抱怨没有方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:28:17.833

解决了。我重新启动了本地服务器和 spork 的东西（我仍然不完全理解），它开始工作了。对不起。

# jquery - jQuery Slider IE 问题（不工作）

> ID：14543381
> 
> 赞同：0
> 
> 时间：2013-01-27T01:03:13.980
> 
> 标签：jquery, html, css

[http://landpros.turnpostinteractive.com/LandPros_Results_2.html](http://landpros.turnpostinteractive.com/LandPros_Results_2.html)

我在页面底部有一个滑块，可以在除 IE8 之外的所有浏览器中使用。我似乎无法弄清楚为什么它不能在这个浏览器中工作。

这是我的 HTML ..

```
<div class="row bottom-scroller">  
 <h1>
results <a href="#">view</a>
 </h1>
<div class="demo-mastercon">
<div class="advancedscroller-con">
    <div id="as2" class="advancedscroller" style="width:100%;">
        <ul class="items">
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
        <li class="item-tobe">
            <img src="images/details-page/property.jpg" alt="property" />
            <p>
                Shawnee County Sanctuary<br/>
                Shawnee County, KS<br/>
                10.91 +/- Acres<br/>
                <span><strong>$369,000</strong> <a href="#">view</a></span>
            </p>
        </li>
    </ul>
    </div>
    </div>
 </div>
 </div><!--/row--> 
```

这是我的自定义 CSS...

```
/***************************************
         ADVANCED SLIDER
 ****************************************/
 .advancedscroller{
height: 100px;
 }

 .advancedscroller-con .thumbsCon{
height: 100px;
}

 .advancedscroller-con ul.thumbsClip{
height: 100px;
}

 .advancedscroller-con li img{ 
float: left; 
padding-right: 12px; 
 }

 .advancedscroller .bulletsCon{
display: none;
 } 
```

以及这个文件...... [http://landpros.turnpostinteractive.com/advancedscroller/plugin.css](http://landpros.turnpostinteractive.com/advancedscroller/plugin.css)

最后，这是我的jquery ...

```
 <!--
**************************
    ADVANCED SCROLLER
**************************
   -->
  <script src="advancedscroller/plugin.dev.js" type="text/javascript"></script>
  <script>
jQuery(document).ready(function($){
    $("#as1").advancedscroller({
        settings_swipe: "on"
        ,design_arrowsize: "40"
        });
    $("#as2").advancedscroller({
        settings_swipe: "on"
        ,design_arrowsize: "40"
        });
    $("#as3").advancedscroller({
        settings_swipe: "on"
        ,design_arrowsize: "40"
        });
    $("#as4").advancedscroller({
        settings_mode: "onlyoneitem"
        ,design_arrowsize: "0"
        ,settings_swipe: "on"
        ,settings_swipeOnDesktopsToo: "on"
        });
     });
   </script>  
  <!--/advancedscroller--> 
```

和插件文件... [http://landpros.turnpostinteractive.com/advancedscroller/plugin.dev.js](http://landpros.turnpostinteractive.com/advancedscroller/plugin.dev.js)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:14:19.473

在 HTML 文件的标题中使用此标记。

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# c - 尝试使用循环读取 n 个图像时出错？

> ID：14543385
> 
> 赞同：-2
> 
> 时间：2013-01-27T01:03:39.520
> 
> 标签：c

```
void main() {
int frame_number = 0;
do {
    char *filename = "";
    strcpy(filename, "frame_");
    char *frame_id = "";
    itoa(frame_number, frame_id, 10);
    strcat(filename, frame_id);
    strcat(filename, ".bmp");

    FILE* f  = fopen(filename, "rb");
    if (!f) {
        printf("Could not read!");
        system("Pause");
    }
    else
        printf("Read!");
    fclose(f);
    frame_number++;
} while (frame_number < 20);
} 
```

每当我运行它时，我都会收到错误`access violation writing location`！！！文件夹中有大约 40 张图像。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:06:00.077

没有为`filename`和分配内存`frame_id`。[在使用malloc](http://pubs.opengroup.org/onlinepubs/009695399/functions/malloc.html)或[calloc](http://pubs.opengroup.org/onlinepubs/009695399/functions/calloc.html)存储字符串之前分配内存。或者只是将它们声明为静态数组。

```
char filename[256]="";
char frame_id[256] = ""; 
```

# windows-phone-7 - 如何在 Windows Phone 7 中制作重复的文本块？

> ID：14543388
> 
> 赞同：0
> 
> 时间：2013-01-27T01:03:50.537
> 
> 标签：windows-phone-7, xaml, data-binding

数据绑定仍然让我感到困惑，我不确定如何让这些控件对我拥有的每条绑定数据重复。

```
 <Grid>
                <TextBlock FontSize="25" Text="this is a header"></TextBlock>
                <TextBlock Height="30" HorizontalAlignment="Left" Margin="19,36,0,0" Name="txt" Text="line under the header" VerticalAlignment="Top" />
                <TextBlock Height="30" FontSize="25" HorizontalAlignment="Left" Margin="306,9,0,0" Name="textBlock2" Text="530" VerticalAlignment="Top" Width="91" />
                <TextBlock Height="30" HorizontalAlignment="Left" Margin="305,42,0,0" Name="textBlock3" Text="30" VerticalAlignment="Top" Width="91" />
            </Grid> 
```

![在此处输入图像描述](../Images/d838b0f4401d1c6e9273ffd9ac25c1cd.png)

如果我的数据源的计数为 50。我希望看到其中的 50 个分组（不过我可能需要一个滚动条）。

不知道如何做到这一点。我猜我需要某种数据模板？“标题下的行”也应该是可点击和突出的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:07:37.903

我认为您需要使用名为“ItemsControl”的控件。不是派生类，不是 ListBox，只是简单的`ItemsControl`.

无论是在代码中还是在 XAML 中，您都可以将 ItemsControl 的`ItemsSource`属性设置为包含您的项目的任何集合。

在 XAML 中（在 VS 或 Blend 中，要在 Blend 中做到所见即所得，您必须以某种方式提供设计数据），您将 ItemsControl 设置为`ItemTemplate`包含`DataTemplate`您想要为集合中的每个项目重复的 XAML 子树。

在 内部`DataTemplate`，将“标题下的行”替换为 Button 控件，使用`Content="line under the header"`，并根据需要设置其样式。然后，添加`CallMethodAction`到您的按钮。在 Blend 中只需点击 2 次，第一次在“资产”窗口中。指定`TargetObject="{Binding}" MethodName="actSubtitleClicked"`。这样，框架将调用`void actSubtitleClicked()`用户单击“标题下的行”的项目的方法。

为了获得最佳性能，您还应该修改 ItemsControl 的 ItemsPanel 模板，将 StackPanel 替换为 VirtualizingStackPanel（再次在 Blend 中单击几下，第一个是右键单击，然后是“编辑附加模板/ItemsPanel/编辑副本”）

# android - 从另一个 android 应用程序借用代码

> ID：14543390
> 
> 赞同：0
> 
> 时间：2013-01-27T01:04:07.503
> 
> 标签：android, eclipse

所以我正在尝试让自己成为一个学习android的小闹钟应用程序。只是为了做一些我一直想做的事情，让它成为我自己的。抛开动机不谈，在编写了界面和一堆其他功能之后，我决定借用一堆代码，如果不是大部分的话，android 闹钟源。

我已经引入了所有 res 的东西，并且我已经将所有 src 文件包含在它们原来的 com.android.alarmclock 命名空间下，这样它们仍然可以正确地相互引用。但是它拒绝为新文件生成 R 文件。

当我清理和重建所有这些时，它仍然会为我的包（com.nathantempelman.alarmapp）中的东西生成一个构建文件和一个 R 文件，但我仍然在所有 android AlarmClock 文件上遇到错误。

我是否应该更改 AlarmClock 文件，以便它们以某种方式从我的包中引用 R？或者当我更新阻止另一个 R 构建的 AndroidManifest 文件时我错过了什么？

还是完全是别的东西？尝试将另一个应用程序的源代码拖入我的源代码是一个愚蠢的想法吗？我应该在外部项目中打开它并尝试以某种方式引用它吗？

如果有人遇到类似情况，我很想听听一些想法。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:26:31.057

这不是它的完成方式。您希望您的 Alarmapp 扩展 ALarmClock 或扩展您想要或需要的 ALarmCLock 类或接口。

如果不重新分解和捆绑所有松散的末端，您就不能像那样拖动源代码，因此 alarmApp 扩展了 AlarmClock。

看看[这里](http://www.javacoffeebreak.com/java104/java104.html)希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:26:22.163

我尝试了图书馆方法，但没有奏效。最后，我只是把小项目放到大项目中，结合字符串xml和android manifest，改变android manifest中activity的intent类，把所有相关的图片都拖进去。相当多的工作最后，但它可以做到。

快速清单：

*   拼接 android 清单文件 - 如果包名不同，请确保清单顶部的包名仅在两个包相同的情况下扩展

*   确保所有资源都能完成

*   拼接 strings.xml、styles.xml 以及两个项目之间常见的任何其他内容

以为我会发布这个，以防其他人最终试图做同样的事情。祝你好运

# c# - 实体框架代码首先无法正常工作

> ID：14543395
> 
> 赞同：2
> 
> 时间：2013-01-27T01:04:57.430
> 
> 标签：c#, .net, entity-framework, ef-code-first

我有这个简单的模型

```
public class Autor
{
    [Key]
    int AutorID { get; set; }

    [Required]
    [MaxLength(100)]
    public string Nome { get; set; }

    [Required]
    [Display(Name = "Data de nascimento")]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    public DateTime Data { get; set; }

    public virtual ICollection<Livro> Livros { get; set; }
} 
```

和

```
public class Livro
{
    public int LivroID { get; set; }

    [Required(ErrorMessage = "E necessario titulo")]
    [MaxLength(100, ErrorMessage = "Titulo deve ter no maximo 100 caracteres")]
    public string Titulo { get; set; }

    [Required]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    public DateTime Data { get; set; }

    [Required]
    [Range(1, 5000, ErrorMessage = "Valor deve ser entre 1 e 5000")]
    public int Paginas { get; set; }

    [Required]
    public int AutorID { get; set; }

    [Required]
    public virtual Autor Autor { get; set;     
  } 
```

用法：

```
public class BibliotecaContext : DbContext
{
    public DbSet<Autor> Autores { get; set; }

    public DbSet<Livro> Livros { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Entity<Autor>().HasMany(p => p.Livros).WithRequired(p => p.Autor);
    }
} 
```

当我尝试为 Livro 类创建一个强类型的控制器时，我得到了这个：

![在此处输入图像描述](../Images/64bcd3a05f6a4794179bdf87697496fb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:10:14.140

我相信这是因为 AutorID 属性不是公开的。

# php - 无法在我的日历中涂黑以前的日期 - PHP

> ID：14543398
> 
> 赞同：0
> 
> 时间：2013-01-27T01:05:45.263
> 
> 标签：php

我正在使用日历，但无法使之前的日期不可用。目前，我的日历有每个日期的链接，当您单击一个日期时，它会在另一个页面上显示该值。但是，我需要全部使所有已经过去的日期不可用。我知道这与代码末尾附近的 if 语句有关，但我无法弄清楚。这是我的代码

```
<?php
$monthNames = Array("January", "February", "March", "April", "May", "June", "July", 
"August", "September", "October", "November", "December");
?>
<?php
$cMonth = isset($_REQUEST["month"]) ? $_REQUEST["month"] : date("n");
$cYear = isset($_REQUEST["year"]) ? $_REQUEST["year"] : date("Y");

$prev_year = $cYear;
$next_year = $cYear;
$prev_month = $cMonth-1;
$next_month = $cMonth+1;

if ($prev_month == 0 ) {
    $prev_month = 12;
    $prev_year = $cYear - 1;
}
if ($next_month == 13 ) {
    $next_month = 1;
    $next_year = $cYear + 1;
}
?><!DOCTYPE html>
<html>
<head>
<title>Hook Up</title>
</head>
<style type="text/css">
        table {
        border: 1px solid black;
        border-collapse: collapse;
    }
    th {
        border: 1px solid black;
        padding: 6px;
        font-weight: bold;
        background: #ccc;
    }
    td {
        border: 1px solid black;
        padding: 6px;
        vertical-align: top;
        width: 100px;
        }
</style>
<script type="text/javascript">
function eventWindow(url) {
        event_popupWin = window.open(url, 'event',
        'resizable=yes, scrollbars=yes, toolbar=no, width=400, height=400);
        event_popupWin.opener = self;
}
</script>
<body>
<h1>Select a Night Out</h1>
<table width="200">
<tr align="center">
<td bgcolor="#999999" style="color:#FFFFFF">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="50%" align="left">  <a href="<?php echo $_SERVER["PHP_SELF"] . "?month=".                     $prev_month . "&year=" . $prev_year; ?>" style="color:#FFFFFF">Previous</a></td>
<td width="50%" align="right"><a href="<?php echo $_SERVER["PHP_SELF"] . "?month=".  $next_month . "&year=" . $next_year; ?>" style="color:#FFFFFF">Next</a>  </td>
</tr>
</table>
</td>
</tr>
<tr>
<td align="center">
<table width="100%" border="0" cellpadding="2" cellspacing="2">
<tr align="center">
<td colspan="7" bgcolor="#999999" style="color:#FFFFFF"><strong><?php echo    $monthNames[$cMonth-1].' '.$cYear; ?></strong></td>
</tr>
<tr>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>S</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>M</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>T</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>W</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>T</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>F</strong></td>
<td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>S</strong></td>
</tr>
<?php 
$timestamp = mktime(0,0,0,$cMonth,1,$cYear);
$maxday = date("t",$timestamp);
$thismonth = getdate ($timestamp);
$startday = $thismonth['wday'];
$today = date('j');
$currentmonth = date('n');
for ($i=0; $i<($maxday+$startday); $i++) {
if(($i % 7) == 0 ){
echo "<tr>";
}
if($i < $startday){
echo ("<td class='cell cell_txt'> </td>");
} else {
if (($i - $startday + 1) == $today && $currentmonth == $cMonth){
echo ("<td class='cell_today cell_txt'>".($i-$startday+ 1)."</td>");
} else {
echo ("<td class='cell cell_txt'><a href=\"hook.php?day=".($i - $startday +   1)."&amp;month=".$cMonth."&amp;year=".$cYear."\">".($i - $startday + 1)."</a></td>");
}
}
if(($i % 7) == 6 ) {
echo "</tr>\n";
}
}
?>
</table>
</td>
</tr>
</table>
</body>
    </html> 
```

如果有人可以提供帮助，将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T11:36:19.050

```
<!-----use it will surely work -----!>

<?php
                        $monthNames = Array("January", "February", "March", "April", "May", "June", "July",
                            "August", "September", "October", "November", "December");
                        ?>

                        <?php
                        if (!isset($_REQUEST["day"])) $_REQUEST["day"] = date("d");
                        if (!isset($_REQUEST["month"])) $_REQUEST["month"] = date("n");
                        if (!isset($_REQUEST["year"])) $_REQUEST["year"] = date("Y");
                        ?>

                        <?php
                        $cDay = $_REQUEST["day"];
                        $cMonth = $_REQUEST["month"];
                        $cYear = $_REQUEST["year"];

                        $prev_year = $cYear;
                        $next_year = $cYear;
                        $prev_month = $cMonth - 1;
                        $next_month = $cMonth + 1;

                        if ($prev_month == 0) {
                            $prev_month = 12;
                            $prev_year = $cYear - 1;
                        }
                        if ($next_month == 13) {
                            $next_month = 1;
                            $next_year = $cYear + 1;
                        }
                        ?>
                        <div id="calendar_div" name="calendar_div">
                            <div class="table-responsive">
                                <table width="93%" style="border: none">
                                    <tr>
                                        <td>&nbsp;&nbsp;<a
                                                href="<?php echo $_SERVER["PHP_SELF"] . "?month=" . $prev_month . "&year=" . $prev_year; ?>"
                                                style="color:#FFFFFF"> < </a>
                                            <a href="<?php echo $_SERVER["PHP_SELF"] . "?month=" . $next_month . "&year=" . $next_year; ?>"
                                               style="color:#FFFFFF"> > </a></td>
                                        <td style="float: right">
                                            <h3 style="color: #ffffff;">  <?php echo $monthNames[$cMonth - 1] . ' ' . $cYear; ?></strong></h3>
                                        </td>
                                    </tr>
                                </table>

                                <table  class="table">

                                    <tr>
                                        <td style="color:#FFFFFF;border: none"><strong>Sun</strong></td>
                                        <td style="color:#FFFFFF;border: none"><strong>Mon</strong></td>
                                        <td style="color:#FFFFFF;border: none"><strong>Tue</strong></td>
                                        <td style="color:#FFFFFF;border: none"><strong>Wed</strong></td>
                                        <td style="color:#FFFFFF;border: none"><strong>Thr</strong></td>
                                        <td style="color:#FFFFFF;border: none"><strong>Fri</strong></td>
                                        <td style="color:#FFFFFF;border: none"><strong>Sat</strong></td>
                                    </tr>

                                    <?php

                                    $timestamp = mktime(0, 0, 0, $cMonth, 1, $cYear);
                                    $maxday = date("t", $timestamp);
                                    $thismonth = getdate($timestamp);
                                    $currentmonth = date('n');

                                    $startday = $thismonth['wday'];

                                    for ($i = 0; $i < ($maxday + $startday); $i++) {
                                        if (($i % 7) == 0) echo "<tr>\n";
                                        if ($i < $startday) echo "<td style='border: none'></td>\n";
                                        elseif(($i - $startday + 1) == $cDay && $currentmonth == $cMonth ){

                                            echo "<td  style='background-color: #cccccc'>". ($i - $startday + 1) ."</td>";}

                                        else{

                                            echo "<td  style='color: #ffffff; border: none'>". ($i - $startday + 1) ."</td></a>";}

                                        if(($i % 7) == 6 ) echo "</tr>";

                                    }

                                    ?>

                                </table>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:36:34.553

如果您添加以下行

```
$cDay = isset($_REQUEST["day"]) ? $_REQUEST["day"] : date("d"); 
```

在这条线以下

```
$cYear = isset($_REQUEST["year"]) ? $_REQUEST["year"] : date("Y"); 
```

并更改此行

```
if (($i - $startday + 1) == $today && $currentmonth == $cMonth){ 
```

至：

```
if ((($i - $startday + 1) == $today && $currentmonth == $cMonth) OR ( (($i - $startday + 1) == $cDay) && ($currentmonth == $cMonth))  ){ 
```

这将使传入的日期变黑。

如果您想传入多个日期，即选择一个日期 2013-01-18，页面会重新加载并清空 18 日，然后想要选择第二个日期，例如 2013-01-22 并让页面重新加载并清空两个日期18 日和 22 日，您需要将输入更改为数组，并将之前选择的日期添加到隐藏字段中以重新提交。

如果您只想涂黑一个日期，那么代码更改将起作用。

希望这可以帮助。

**更新以将所选日期的所有先前日期涂黑：**

```
<?php
    $monthNames = Array("January", "February", "March", "April", "May", "June", "July",
        "August", "September", "October", "November", "December");
    ?>
    <?php
    $sMonth = isset($_REQUEST["smonth"]) ? $_REQUEST["smonth"] : date("n");
    $sYear = isset($_REQUEST["syear"]) ? $_REQUEST["syear"] : date("Y");
    $cMonth = isset($_REQUEST["month"]) ? $_REQUEST["month"] : '';
    $cYear = isset($_REQUEST["year"]) ? $_REQUEST["year"] : '';
    $cDay = isset($_REQUEST["day"]) ? $_REQUEST["day"] : '';

    //echo __line__." Dates in ".$cDay." ".$cMonth.", ".$cYear."<br>";

    $prev_year = $sYear;
    $next_year = $sYear;
    $prev_month = $sMonth - 1;
    $next_month = $sMonth + 1;

    if ($prev_month == 0) {
        $prev_month = 12;
        $prev_year = $sYear - 1;
    }
    if ($next_month == 13) {
        $next_month = 1;
        $next_year = $sYear + 1;
    }
    $nextPrevString = "&amp;month=$cMonth&amp;year=$cYear&amp;day=$cDay";
    $selectString = "&amp;smonth=$sMonth&amp;syear=$sYear";
    ?><!DOCTYPE html>
    <html>
        <head>
            <title>Hook Up</title>
        </head>
        <style type="text/css">
            table {
                border: 1px solid black;
                border-collapse: collapse;
            }
            th {
                border: 1px solid black;
                padding: 6px;
                font-weight: bold;
                background: #ccc;
            }
            td {
                border: 1px solid black;
                padding: 6px;
                vertical-align: top;
                width: 100px;
            }
        </style>
        <script type="text/javascript">
            function eventWindow(url) {
                event_popupWin = window.open(url, 'event', resizable=yes, scrollbars=yes, toolbar=no, width=400, height=400);
                event_popupWin.opener = self;
            }
        </script>
        <body>
            <h1>Select a Night Out</h1>
            <table width="200">
                <tr align="center">
                    <td bgcolor="#999999" style="color:#FFFFFF">
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="50%" align="left">  <a href="<?php echo $_SERVER["PHP_SELF"] . "?smonth=" . $prev_month . "&syear=" . $prev_year . $nextPrevString; ?>" style="color:#FFFFFF">Previous</a></td>
                                <td width="50%" align="right"><a href="<?php echo $_SERVER["PHP_SELF"] . "?smonth=" . $next_month . "&syear=" . $next_year . $nextPrevString; ?>" style="color:#FFFFFF">Next</a>  </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td align="center">
                        <table width="100%" border="0" cellpadding="2" cellspacing="2">
                            <tr align="center">
                                <td colspan="7" bgcolor="#999999" style="color:#FFFFFF"><strong><?php echo $monthNames[$sMonth - 1] . ' ' . $sYear; ?></strong></td>
                            </tr>
                            <tr>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>S</strong></td>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>M</strong></td>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>T</strong></td>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>W</strong></td>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>T</strong></td>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>F</strong></td>
                                <td align="center" bgcolor="#999999" style="color:#FFFFFF"><strong>S</strong></td>
                            </tr>
                            <?php
                            $timestamp = mktime(0, 0, 0, $sMonth, 1, $sYear);
                            if ($cDay != '') {
                                $selectedDate = mktime(0, 0, 0, $cMonth, $cDay, $cYear);
                            } else {
                                $selectedDate = 0;
                            }
                            $maxday = date("t", $timestamp);
                            $thismonth = getdate($timestamp);
                            $startday = $thismonth['wday'];
                            $today = date('j');
                            $currentmonth = date('n');

                            for ($i = 0; $i < ($maxday + $startday); $i++) {
                                if (($i % 7) == 0) {
                                    echo "<tr>";
                                }
                                if ($i < $startday) {
                                    echo ("<td class='cell cell_txt'> </td>");
                                } else {
                                    $testDate = mktime(0, 0, 0, $sMonth, $i - $startday + 1, $sYear);
                                    if ($testDate < $selectedDate) {
                                        echo ("<td class='cell_today cell_txt'>" . ($i - $startday + 1) . "</td>");
                                    } else {
                                        echo ("<td class='cell cell_txt'><a href=\"" . $_SERVER['PHP_SELF'] . "?day=" . ($i - $startday + 1) . "&amp;month=" . $sMonth . "&amp;year=" . $sYear . $selectString . "\">" . ($i - $startday + 1) . "</a></td>");
                                    }
                                }
                                if (($i % 7) == 6) {
                                    echo "</tr>\n";
                                }
                            }
                            ?>
                        </table>
                    </td>
                </tr>
            </table>
        </body>
    </html> 
```

# c++ - std::wstring to_wstring(双值);

> ID：14543402
> 
> 赞同：2
> 
> 时间：2013-01-27T01:06:07.260
> 
> 标签：c++, visual-studio-2010, c++11, std, tostring

> **可能重复：**
> [std::to_string - 多个重载函数的实例与参数列表匹配](https://stackoverflow.com/questions/10664699/stdto-string-more-than-instance-of-overloaded-function-matches-the-argument)

```
#include <string>

int main()
{
    double randDouble = 1245.432;
    std::wstring stringDouble = std::to_wstring(randDouble);
} 
```

当我在 Visual Studio 2010 中编译它时，我得到了这个错误

> 错误 1 ​​错误 C2668: 'std::to_wstring' : 对重载函数 6 的模糊调用
> 
> 1> 错误 C2668: 'std::to_string' : 对重载函数的模糊调用
> 
> 1> d:\program files (x86)\microsoft visual studio 10.0\vc\include\string(688): 可能是 'std::string std::to_string(long double)'
> 
> 1> d:\program files (x86)\microsoft visual studio 10.0\vc\include\string(680): 或 'std::string std::to_string(_ULonglong)'
> 
> 1> d:\program files (x86)\microsoft visual studio 10.0\vc\include\string(672): 或
> 'std::string std::to_string(_Longlong)'

有人可以向我解释为什么编译器会感到困惑，我在做什么错吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:15:31.607

这是 Visual C++ 2010 中的一个错误。它已在 Visual C++ 2012 中修复。

# php - PHP函数将小数移到开头

> ID：14543407
> 
> 赞同：3
> 
> 时间：2013-01-27T01:07:05.880
> 
> 标签：php

我需要 PHP 中的一个函数将小数移到数字的开头（如果存在），否则如果没有小数，则在开头添加 0。

我有：

```
function toDecimal($input){
    return (stripos($input, ".")!==false)? $input: "0." . $input;
} 
```

这是在我的上一个问题中提供的（感谢@shiplu.mokadd.im），但我需要扩展它以将小数点移到开头，如：

```
Input        Output
0.1234       0.1234
1.2345       0.12345
1234         0.1234
0.001234     0.001234 
```

所以基本上输出的数字永远不会大于1。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:12:24.330

一点递归魔法应该可以解决问题：

```
function divideNumber($number, $divide_by, $max)
{
    if($number > $max)
    {
        return divideNumber($number/$divide_by, $divide_by, $max);
    }
    else
    {
        return $number;
    }
}

// Outputs 0.950
print(divideNumber(950, 10, 1)); 
```

**编辑：**

这是一个循环版本（首先想到的是递归）：

```
function divideNumber($number, $divide_by, $max)
{
    while($number > $max)
    {
        $number = $number / $divide_by;
    }

    return $number;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:26:05.713

有更好的方法。使用一些数学属性 - 类似这样的东西（这也会带来小于 0.1 的数字；你没有指定我们应该用 0.001234 做什么——如果你想单独留下小于 0.1 的数字，只需添加一个分支）

```
function foo($num) {
    if ($num == 0) return $num; // can't take log of 0
    return $num / pow(10, ceil(log($num, 10)));
}

echo foo(10.23); 
```

# c# - 为字符串调用适当的方法

> ID：14543408
> 
> 赞同：0
> 
> 时间：2013-01-27T01:07:08.570
> 
> 标签：c#, methods

这本身有一个游戏开发项目，但它实际上是关于编码和将数据映射到其他数据片段。这就是为什么我决定在这里发布它。

我用于外部库存项目数据存储的格式：

```
[ID:IT_FO_TROUT]
[Name:Trout]
[Description:A raw trout.]
[Value:10]

[3DModel:null]
[InventoryIcon:trout]

[Tag:Consumable]
[Tag:Food]
[Tag:Stackable]

[OnConsume:RestoreHealth(15)]
[OnConsume:RestoreFatigue(15)] 
```

问题集中在最后 2 个**OnConsume**属性上。基本上，这两个属性意味着当物品被消耗时，消费者的健康会增加 15 点，他的疲劳也会增加。这在后台调用了 2 种不同的方法：

```
void RestoreHealth(Character Subject, int Amount);
void RestoreFatigue(Character Subject, int Amount); 
```

您将如何将这些方法映射到它们的文件内字符串对应项？这是我想到的：

1.  每次消费一个项目时，都会将一个字符串列表（事件）传递给一个*项目事件管理器*。管理器解析每个字符串并调用适当的方法。非常容易设置，并且由于这不是经常发生的操作，因此对性能的影响可能不会很大（字符串的大小也会很小（最多 10-15 个字符），并且在 O(n) 时间内解析）。

2.  每个**库存项目**（类）在初始化时解析字符串事件一次且仅一次。每个字符串事件都通过**字典。就性能而言，这是我能想到的最有效的方法，但它使做其他事情变得极其困难：字典中的所有值都必须是同一类型的委托。这意味着我无法保留**

     ***a) 恢复健康(int)*

    *b) SummonMonster（位置，计数）*

    在同一个字典中，并且必须为每种可调用方法设置一个新的数据结构。这是一项巨大的工作量。** 

 **想到了一些改进这两种方法的方法：

1.  *我可以在Item 事件管理器*中使用某种临时缓存，这样一个项目的**OnConsume**事件就不会被解析两次？不过，我可能会遇到与我在 2) 中遇到的问题相同的问题，因为缓存必须是`map<InventoryItem,List<delegate>>`.

2.  .NET 库中的**哈希表**数据结构允许任何类型的对象在任何给定时间成为键和/或值（与字典不同）。我可以使用它并将**字符串 A 映射到委托 X**，同时也将**字符串 B 映射到** 同一结构中的 Y 委托。为什么我不应该这样做？你能预见这种方法会带来什么麻烦吗？

我也在思考反思的方式，但我并不完全有经验。而且我很确定每次解析字符串都会更快。

**编辑**

我的最终解决方案，考虑到 Alexey Raga 的回答。为每种事件使用接口。

```
public interface IConsumeEvent    
{    
    void ApplyConsumeEffects(BaseCharacter Consumer);   
} 
```

示例实施者（特定事件）：

```
public class RestoreHealthEvent : IConsumeEvent
{    
    private int Amount = Amount;

    public RestoreHealthEvent(int Amount)
    {
        this.Amount = Amount;
    }

    public void ApplyConsumeEffects(BaseCharacter Consumer)   
    {
        Consumer.Stats.AlterStat(CharacterStats.CharStat.Health, Amount);    
    }    
} 
```

在解析器内部（我们关心事件特殊性的唯一地方 - 因为我们正在解析数据文件本身）：

```
RestoreHealthEvent ResHealthEv = new RestoreHealthEvent (Value);
NewItem.ConsumeEvents.Add (ResHealthEv ); 
```

当角色消耗物品时：

```
foreach (IConsumeEvent ConsumeEvent in Item.ConsumeEvents)
{
    //We're inside a parent method that's inside a parent BaseCharacter class; we're consuming an item right now.
    ConsumeEvent.ApplyConsumeEffects(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:42:45.040

为什么不将它们“映射”到“命令”类一次且仅一次呢？

例如，

```
[OnConsume:RestoreHealth(15)]
[OnConsume:RestoreFatigue(15)] 
```

可以映射到可以定义为的命令类`RestoreHealth`：`RestoreFatigue`

```
public sealed class RestoreHealth : ICommand {
    public int Value { get; set; }
    //whatever else you need
}

public sealed class SummonMonster : ICommand {
    public int Count {get; set; }
    public Position Position { get; set; }
} 
```

此时将命令视为参数的包装器；）因此，您总是包装它们并只传递一个，而不是传递多个参数。它也提供了一些语义。

现在，您可以将您的库存物品映射到在消耗每个物品时需要“发送”的*命令。*

您可以实现一个简单的“总线”接口，例如：

```
public interface IBus {
    void Send(ICommand command);
    void Subscribe(object subscriber);
} 
```

现在您只需获得一个实例`IBus`并在适当的时候调用它的`Send`方法。

通过这样做，您将您的“定义”（需要做什么）和您的逻辑（*如何**执行*操作）问题分开。

对于*接收*和*反应*部分，您实现了`Subscribe`询问`subscriber`实例的方法（再次，并且只有一次），找出可以“处理”命令的所有方法。你可以`IHandle<T> where T: ICommand`在你的处理程序中提供一些接口，或者只是按照约定找到它们（任何`Handle`只接受一个参数`ICommand`并返回的方法`void`），或者任何适合你的方法。

它基本上与您所说的“委托/操作”列表的部分相同，只是现在它是*每个命令*：

```
map<CommandType, List<action>> 
```

因为现在所有操作都只接受*一个*参数（即`ICommand`），所以您可以轻松地将它们全部保存在同一个列表中。

当接收到某个命令时，您的`IBus`实现只获取给定命令类型的操作列表，并简单地调用这些操作，将给定命令作为参数传递。

希望能帮助到你。

**高级**：你可以更进一步：有一个`ConsumeItem`命令：

```
public sealed void ConsumeItem: ICommand {
    public InventoryItem Item { get; set; }
} 
```

您已经有一个类负责保存 InventoryItem 和 Commands 之间的映射，因此该类可以成为*流程管理器*：

1.  它订阅`ConsumeItem`命令（通过总线）
2.  在其`Handle`方法中，它获取给定库存项目的命令列表
3.  它将这些命令发送到总线。

好了，现在我们已经清楚地分离了这三个关注点：

1.  在消耗库存物品时，我们只是“知道”`IBus`并发送`ConsumeItem`命令，我们并不关心接下来会发生什么。
2.  “ConsumeInventoryManager”（不管你怎么称呼它）也知道`IBus', subscribes for`ConsumeItem` 命令，并且“知道”在每个项目被消耗时*需要做什么*（命令列表）。它只是发送这些命令，并不关心谁以及如何处理它们。
3.  业务逻辑（角色、怪物等）只处理对它们有意义的命令（`RestoreHealth`、`Die`等），而不关心它们来自哪里（以及为什么）。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:07:46.293

我的建议是使用反射，即定义一个基于指定名称调用所需方法的方法。这是一个工作示例：

```
class Program
{
    static void Main(string[] args)
    {
        SomeClass someInstance = new SomeClass();
        string name = Console.ReadLine();
        someInstance.Call("SayHello", name);
    }
}

class SomeClass
{
    public void SayHello(string name)
    {
        Console.WriteLine(String.Format("Hello, {0}!", name));
    }

    public void Call(string methodName, params object[] args)
    {
        this.GetType().GetMethod(methodName).Invoke(this, args);
    }
} 
```

只要满足以下条件，您就可以这样做：

1.  您绝对确定调用是可能的，即存在指定名称的方法并且参数的数量和类型正确

2.  指定名称的方法没有被重载，否则你会得到一个`System.Reflection.AmbiguousMatchException`

3.  存在一个超类，您希望`Call`从中派生该方法的所有类；您应该在该类中定义此方法

确保*满足条件 1\. 和 2\. 您可以使用更具体的版本，`Type.GetMethod`不仅要考虑方法的名称，还要考虑参数的数量和类型，并检查是否存在这样的方法在调用它之前；那么该`Call`方法将如下所示（**它不适用于参数标记为* `out` *或* `ref`的方法）：

```
public void Call(string methodName, params object[] args)
{
    //get the method with the specified name and parameter list
    Type[] argTypes = args.Select(arg => arg.GetType()).ToArray();
    MethodInfo method = this.GetType().GetMethod(methodName, argTypes);

    //check if the method exists and invoke it
    if (method != null)
        method.Invoke(this, args);
} 
```

**备注**：`MethodInfo.Invoke` *方法实际上返回一个* `object`，*因此您可以通过指定返回类型并使用* *关键字以及适当的强制转换或将结果转换为所需类型的其他方法（如果可能）来定义该*`Call` *方法以返回一些值- 请记住* `return` *检查是否是。*

如果条件 3\. 不满足，我会写一个扩展方法。这是一个返回泛型值的扩展方法的示例，**我认为**它在大多数情况下应该足够了（*同样，它不适用于* `ref` *or* `out`）并且应该适用于 .NET Framework 中几乎所有可能的对象（我会感谢您指出一个反例）：

```
public static class Extensions
{
    //invoke a method with the specified name and parameter list
    // and return a result of type T
    public static T Call<T>(this object subject, string methodName, params object[] args)
    {
        //get the method with the specified name and parameter list
        Type[] argTypes = args.Select(arg => arg.GetType()).ToArray();
        MethodInfo method = subject.GetType().GetMethod(methodName, argTypes);

        //check if the method exists
        if (method == null)
            return default(T); //or throw an exception

        //invoke the method and get the result
        object result = method.Invoke(subject, args);

        //check if something was returned
        if (result == null)
            return default(T); //or throw an exception
        //check if the result is of the expected type (or derives from it)
        if (result.GetType().Equals(typeof(T)) || result.GetType().IsSubclassOf(typeof(T)))
            return (T)result;
        else
            return default(T); //or throw an exception
    }

    //invoke a void method more conveniently
    public static void Call(this object subject, string methodName, params object[] args)
    {
        //invoke Call<object> method and ignore the result
        subject.Call<object>(methodName, args);
    }
} 
```

然后，您应该能够使用，例如，`someObject.Call<string>("ToString")`而不是`someObject.ToString()`. 最后，在这一点上，我强烈建议：

1.  `object`尽可能使用更具体的类型

2.  使用一些更复杂和唯一的名称`Call`- 如果某些类具有定义相同签名的方法，它可能会变得模糊

3.  查找*协方差*和*逆变*以获取更多有用的知识**

# php - unexpected t-variable, cant see what is causing it

> ID：14543410
> 
> 赞同：0
> 
> 时间：2013-01-27T01:07:49.777
> 
> 标签：php

I am getting an unexpected T_variable on line 445 but I can't see where the problem is, can anyone see where the problem is which is causing this error?

```
//start:procedure
$img_result = '';
if(empty($arrImageFile[$key])){
  $img_result = '&nbsp;';
}else{
  $img_$result .=  '<ul class="qandaul"><li>'; //line 445
   if(is_array( $arrImageFile[$key] )){
    foreach($arrImageFile[$key] as $filename){
     $img_$result.= CreateLink($filename, "image");
    }
   }else{
    $img_$result.= CreateLink($arrImageFile[$key], "image");
   }
   $img_result.= '</li></ul>';
}
//end:procedure

echo '<td width="11%" class="imagetd">'.$img_result.'</td>' . PHP_EOL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:03:47.777

`$img_$result`应该是：`$img_result`这也应该固定在第 448 和 451 行。请记住，`T_VARIABLE`通常指的是`$`变量符号。如果您想使用[变量](http://php.net/manual/en/language.variables.variable.php)特征的变量，您应该使用`$$img_result`或`${$img_result}`更好地理解。

# c++ - Intel TBB - Eclipse reports multiple build errors

> ID：14543413
> 
> 赞同：1
> 
> 时间：2013-01-27T01:08:15.043
> 
> 标签：c++, intel, tbb

I'm using Eclipse CDT. I downloaded 4.1 for windows.

I added the include folder to my project by going to my project's properties, then adding the folder in C/C++ General >> Paths and Symbols >> Includes.

I added an include to the make file.

Unfortunately I am receiving build errors.

```
#error Unsupported machine word size.

â€˜__TBB_CompareAndSwapWâ€™ was not declared in this scope

incomplete type â€˜tbb::internal::machine_load_store_relaxed<int, 4u>â€™ 
    used in nested name specifier

there are no arguments to â€˜__TBB_CompareAndSwapWâ€™ that depend on a template      
    parameter, so a declaration of â€˜__TBB_CompareAndSwapWâ€™ must be available 
```

What can I do to help myself?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-29T12:54:20.327

“#error 不支持的机器字长。” 然后出现 TBB 无法识别正在使用的编译器，或者在不支持的配置中使用了已知的编译器。例如，需要 32 位 mingw -march=i686 或更高版本。

# ruby - 嵌套 Ruby 列表生成

> ID：14543414
> 
> 赞同：2
> 
> 时间：2013-01-27T01:08:26.963
> 
> 标签：ruby, arrays, list, range, dynamic-arrays

我正在尝试生成一个如下所示的列表：

```
list = [[1, 1], [2, 2], [3, 3], [4, 4], ... [25, 25]] 
```

有没有一种简单的方法可以用类似于[range](http://www.ruby-doc.org/core-1.9.3/Range.html)的东西来完成这个？

**更新**：看起来 .zip 获胜

*   .map 时间经过 1184.344 毫秒
*   .zip 耗时 706.23 毫秒

测试：

```
beginning_time = Time.now
(1..2500000).map { |i| [i,i] }
end_time = Time.now
puts "Time elapsed #{(end_time - beginning_time)*1000} milliseconds"

beginning_time = Time.now
(1..2500000).zip 1..25
end_time = Time.now
puts "Time elapsed #{(end_time - beginning_time)*1000} milliseconds" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:12:47.507

试试这个：

```
(1..25).map { |i| [i,i] } 
```

输出：

```
[[1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [6, 6], [7, 7], [8, 8], [9, 9], [10, 10], [11, 11], [12, 12], [13, 13], [14, 14], [15, 15], [16, 16], [17, 17], [18, 18], [19, 19], [20, 20], [21, 21], [22, 22], [23, 23], [24, 24], [25, 25]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T01:28:50.790

```
(1..25).zip 1..25
#=> [[1, 1], [2, 2], [3, 3], [4, 4] ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T01:17:00.600

试试这个：

```
Array.new(25){|i| [i+1, i+1]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T03:35:00.927

好吧，迟到了 2 小时，而且，只是为了与众不同......

```
[[*1..25], [*1..25]].transpose
# => [[1, 1], [2, 2], [3, 3], [4, 4], ... 
```

……或者……呵呵……

```
([[*1..25]]*2).transpose 
```

# opencv - 在 OpenCV 中，CV_8U 和 CV_8UC1 有什么区别？

> ID：14543420
> 
> 赞同：29
> 
> 时间：2013-01-27T01:09:23.890
> 
> 标签：opencv, types

在 OpenCV 中，CV_8U 和 CV_8UC1 有区别吗？它们是否都指的是具有一个通道的 8 位无符号类型？如果是这样，为什么有两个名字？如果不是，有什么区别？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T16:15:00.563

您可以从[这个](https://stackoverflow.com/questions/14364563/minmaxloc-datatype/14365886#14365886)答案中看到，它们评估为相同的类型。

至于为什么有两个名称，如果您查看#defines 的结构（再次参见链接答案），OpenCV 中的类型有两个部分，深度和通道数。该系统足够灵活，可以让您定义多达 512 个通道的新类型。碰巧的是，当您指定 1 个通道时，类型的通道分量设置为 0，这使得结果等同于简单地使用深度 CV_8U。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T15:44:11.377

他们应该是一样的。对我来说，我更喜欢使用`CV_8UC1`它，因为它使我的代码更清楚我正在使用多少个频道。

但是，如果您正在处理具有 10 个或更多通道的矩阵，则需要指定通道数。

您可能想使用下面的代码片段来试验通道数。

```
#define CV_MAT_ELEM_CN( mat, elemtype, row, col ) \
    (*(elemtype*)((mat).data.ptr + (size_t)(mat).step*(row) + sizeof(elemtype)*(col)))

...

CvMat *M = cvCreateMat(4, 4, CV_32FC(10));
for(int ch = 0; ch < 10; ch++) {
  for(int i = 0; i < 4; i++) {
    for(int j = 0; j < 4; j++) {
      CV_MAT_ELEM_CN(*M, float, i, j * CV_MAT_CN(M->type) + ch) = 0.0;
      cout << CV_MAT_ELEM_CN(*M, float, i, j * CV_MAT_CN(M->type) + ch) << " ";        
    }
  }
  cout << endl << endl;
}
cvReleaseMat(&M); 
```

信用： http: [//note.sonots.com/OpenCV/MatrixOperations.html](http://note.sonots.com/OpenCV/MatrixOperations.html)

# delphi - Saving a string with null characters to a file

> ID：14543422
> 
> 赞同：1
> 
> 时间：2013-01-27T01:09:49.800
> 
> 标签：delphi, delphi-7

I have a string that contains null characters.

I've tried to save it to a file with this code:

```
myStringList.Text := myString;
myStringList.SaveToFile('c:\myfile'); 
```

Unfortunately myStringList.Text is empty if the source string has a null character at the beginning.

I thought only C string were terminated by a null character, and Delphi was always fine with it.

How to save the content of the string to a file?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:22:51.853

我认为您的意思是“保存一个包含`#0`字符的字符串”。

如果是这种情况，请不要尝试将其放入`TStringList`. 实际上，根本不要尝试将其保存为字符串；就像在 C 中一样，NULL 字符（`#0`在 Delphi 中）有时会导致字符串被截断。使用 a`TFileStream`并将其直接写为字节内容：

```
var
  FS: TFileStream;
begin
  FS := TFileStream.Create('C:\MyFile', fmCreate);
  try
    FS.Write(myString[1], Length(myString) * SizeOf(Char));
  finally
    FS.Free;
  end;
end; 
```

读回来：

```
var
  FS: TFileStream;
begin
  FS := TFileStream.Create('C:\MyFile', fmOpenRead);
  try
    SetLength(MyString, FS.Size);
    FS.Read(MyString[1], FS.Size);
  finally
    FS.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T09:28:01.803

当您设置对象的`Text`属性时`TStrings`，新值将被解析为以空字符结尾的字符串。因此，当代码到达您的空字符时，解析将停止。

我不确定为什么 Delphi RTL 代码是这样设计的，并且没有记录，但这就是设置`Text`属性的工作方式。

您可以通过使用`Add`方法而不是`Text`属性来避免这种情况。

```
myStringList.Clear;
myStringList.Add(myString);
myStringList.SaveToFile(FileName); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T17:18:51.193

关于一般将字符串写入文件。我仍然看到人们创建流或字符串列表只是为了将一些内容写入文件，然后销毁流或字符串列表。

Delphi7 还没有 IOUtuls.pas，但你错过了。

有一个方便的带有类方法的 TFile 记录，可让您使用单行将文本写入文件，而无需临时变量：

```
TFile.WriteAllText('out.txt','hi'); 
```

升级使您作为 Delphi 开发人员的生活更加轻松。这只是一个很小的例子。

# api - 带有 PhoneGap 的 CakePHP 和 RESTful

> ID：14543425
> 
> 赞同：2
> 
> 时间：2013-01-27T01:10:31.347
> 
> 标签：api, rest, cakephp, cordova

我建立了一个带有 RESTFul 调用的 cakephp 站点。很高兴地说这些调用在使用来自另一个 php 站点的 curl 时有效。（目前这是所有测试）

下一阶段是设置授权，据我了解，我将查看基本日志或摘要日志以进行 RESTful 调用。

1.  我想构建一个需要登录的 phonegap 应用程序。对 CakePHP 的 RESTful 调用会是可行的方法吗？即为我的网站制作一个 RESTful API？

2.  我想提供一个 API 密钥。如何在 phonegap 应用程序中保护此密钥？

3.  一般而言，phonegap 的安全性如何？如果一个app的文件是css,html,js 不能把app拆成文件暴露出来

只是寻找一般建议和继续研究的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:31:17.230

我相信你需要的是一个[无状态的认证系统](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#creating-stateless-authentication-systems)。CakePHP 自带 2 个内置的。看看[这个例子](https://stackoverflow.com/a/9970464/372875)

# ios6 - iOS View handling with buttons at the front

> ID：14543431
> 
> 赞同：0
> 
> 时间：2013-01-27T01:11:07.803
> 
> 标签：ios6

I'm currently learning iOS Programming and I have a (hopefully) simple problem: I wrote a drawing program that works with a customized class of UIView. That gets initialised upon startup in the main view controller in the viewDidLoad method

```
Image_DrawDraw *drawing = [[Image_DrawDraw alloc] initWithFrame:self.view.bounds];
[self.view addSubview:drawing]; 
```

I now want to change my program into a bit more sophisticated. I made a xib File containing some buttons, status bar and and image view. I still want to be able to draw in this new view, precisely over the image view, but not over the status bar or the buttons. But I have problems in initializing my Image_DrawDraw class it just overrides the whole xib and I'm back to my black screen where I can draw. Thank you for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:31:39.460

`views`当您将子视图添加到视图层次结构时，它成为超级视图数组属性中的最后一项。视图的分层顺序是基于`views`数组的，最下面的视图是位于的项目，`[views objectAtIndex:0]`最上面的视图是位于的项目`[views lastObject]`。通过在 Xib 上安排所有其他视图，然后在 Xib 加载后在代码中添加 Image_DrawDraw 视图，您将其设置为最上面的视图，从而遮挡您的按钮。

您可以直接将其放在 Xib 中，而不是将其添加到代码中。

将自定义视图添加到您的 xib。将其放置在您现有的 xib 图像视图上方和按钮下方。将视图的自定义类设置为 Image_DrawDraw。

现在您将不需要以下任何代码行：

```
Image_DrawDraw *drawing = [[Image_DrawDraw alloc] initWithFrame:self.view.bounds];
[self.view addSubview:drawing]; 
```

要在代码中引用您的 Image_DrawDraw xib 视图，您应该在 viewController 中为其创建一个 IBOutlet 属性，并通过在 Xib`@interface`文件中按住 CTRL 并拖出一条线将 Xib 视图连接到 IBOutlet。

# string - Given a phrase without spaces add spaces to make proper sentence

> ID：14543435
> 
> 赞同：5
> 
> 时间：2013-01-27T01:11:51.907
> 
> 标签：string, algorithm, dynamic-programming

This is what I've in mind, but it's O(n^2):

For ex: Input is "Thisisawesome", we need to check if adding the current character makes the older found set any longer and meaningful. But in order to see till where we need to back up we'll have to traverse all the way to the beginning. For ex: "awe" and "some" make proper words but "awesome" makes the bigger word. Please suggest how can we improve the complexity. Here is the code:

```
void update(string in)
{
   int len= in.length();
   int DS[len];
   string word;
   for(int i=0; i<len; i++) DS[i]=0;

   for(int i=0; i<len; i++)
        for(int j=i+1; j<=len; j++)
        {
            word = in.substr(i,j-i);
            if(dict.find(word)!=dict.end())
                   DS[j-1] = (DS[j-1] > word.length()) ? DS[j-1] : word.length();   
         }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T06:15:17.800

有一个动态编程解决方案，起初看起来它将是 O(n^2)，但对于足够大的 n 和固定大小的字典来说，结果只有 O(n)。

从左到右处理字符串。在第 i 个阶段，您需要确定前 i 个字符是否有解决方案。为了解决这个问题，考虑所有可能的方法将这些 i 字符分成两个块。如果第二个块是一个单词，而第一个块可以分解成单词，那么就有一个解决方案。你可以用你的字典检查第一个要求。您可以通过查看是否找到前 j 个字符的答案来检查第二个要求，其中 j 是第一个块的长度。

This would be O(n^2) because for each of 1,2,3,...n lengths you consider every possible split. However, if you know what the longest word in your dictionary is you know that there is no point considering splits which make the second chunk longer than this. So for each of 1,2,3...n lengths you consider at most w possible splits, where w is the longest word in your dictionary, and the cost is O(n).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-30T16:44:39.187

我今天已经编写了我的解决方案，明天将把它放在一个网站上。无论如何，方法如下：

1.  **将字典排成一排。**

    trie 可以帮助快速进行多个匹配，因为所有以相同字母开头的字典单词都可以同时匹配。

    （例如，“chairman”在 trie 中匹配“chair”和“chairman”。）

2.  **使用 Dijkstra 算法找到最佳匹配。**

    （例如对于“主席”，如果我们将“c”算作位置 0，那么我们就有关系 0->5、0->8、1->5、2->5、5->8。这些关系形成一个非常适合 Dijkstra 算法的网络。）

    （注意：边的权重在哪里？见下一点。）

3.  **为字典单词分配权重。**

    如果不对坏匹配加权，则对好匹配进行加权。（例如，“iamahero”变成“我是英雄”而不是“我是英雄”。）

    [http://app.aspell.net/create](http://app.aspell.net/create)上的 SCOWL 字典很好地发挥了作用，因为它有不同大小的字典。这些尺寸（10、20 等）是称重的好选择）。

    经过一些尝试，我发现需要减少以“s”结尾的单词的权重，因此“eyesandme”变成“eyes and me”而不是“eye sand me”。

我已经能够在几毫秒内分割一个段落。该算法对要拆分的字符串的长度具有线性复杂度，因此只要内存足够，该算法就可以很好地扩展。

这是转储（抱歉吹牛）。（选择的段落是维基百科中的“小说”。）

```
D:\GoogleDrive\programs\WordBreaker>"word breaker"<novelnospace.txt>output.txt

D:\GoogleDrive\programs\WordBreaker>type output.txt
Number of words after reading words-10.txt : 4101
Number of words after reading words-20.txt : 11329
Number of words after reading words-35.txt : 43292
Number of words after reading words-40.txt : 49406
Number of words after reading words-50.txt : 87966

Time elapsed in reading dictionary: 0.956782s

Enter the string to be broken into words:

Result:
a novel is along narrative normally in prose which describes fictional character
s and events usually in the form of a sequential story while i an watt in the ri
se of the novel 1957 suggests that the novel came into being in the early 18 th
century the genre has also been described as possessing a continuous and compreh
ensive history of about two thousand years with historical roots in classical gr
eece and rome medieval early modern romance and in the tradition of the novel la
the latter an italian word used to describe short stories supplied the present g
eneric english term in the 18 th century miguel de cervantes author of don quixo
te is frequently cited as the first significant europe an novelist of the modern
 era the first part of don quixote was published in 1605 while a more precise de
finition of the genre is difficult the main elements that critics discuss are ho
w the narrative and especially the plot is constructed the themes settings and c
haracterization how language is used and the way that plot character and setting
 relate to reality the romance is a related long prose narrative w alter scott d
efined it as a fictitious narrative in prose or verse the interest of which turn
s upon marvellous and uncommon incidents whereas in the novel the events are acc
ommodated to the ordinary train of human events and the modern state of society
however many romances including the historical romances of scott emily brontes w
u the ring heights and her man melvilles mo by dick are also frequently called n
ovels and scott describes romance as a kind red term romance as defined here sho
uld not be confused with the genre fiction love romance or romance novel other e
urope an languages do not distinguish between romance and novel a novel isle rom
 and err o ma nil roman z o

Time elapsed in splitting: 0.00495095s

D:\GoogleDrive\programs\WordBreaker>type novelnospace.txt
Anovelisalongnarrativenormallyinprosewhichdescribesfictionalcharactersandeventsu
suallyintheformofasequentialstoryWhileIanWattinTheRiseoftheNovel1957suggeststhat
thenovelcameintobeingintheearly18thcenturythegenrehasalsobeendescribedaspossessi
ngacontinuousandcomprehensivehistoryofabouttwothousandyearswithhistoricalrootsin
ClassicalGreeceandRomemedievalearlymodernromanceandinthetraditionofthenovellaThe
latteranItalianwordusedtodescribeshortstoriessuppliedthepresentgenericEnglishter
minthe18thcenturyMigueldeCervantesauthorofDonQuixoteisfrequentlycitedasthefirsts
ignificantEuropeannovelistofthemodernerathefirstpartofDonQuixotewaspublishedin16
05Whileamoreprecisedefinitionofthegenreisdifficultthemainelementsthatcriticsdisc
ussarehowthenarrativeandespeciallytheplotisconstructedthethemessettingsandcharac
terizationhowlanguageisusedandthewaythatplotcharacterandsettingrelatetorealityTh
eromanceisarelatedlongprosenarrativeWalterScottdefineditasafictitiousnarrativein
proseorversetheinterestofwhichturnsuponmarvellousanduncommonincidentswhereasinth
enoveltheeventsareaccommodatedtotheordinarytrainofhumaneventsandthemodernstateof
societyHowevermanyromancesincludingthehistoricalromancesofScottEmilyBrontesWuthe
ringHeightsandHermanMelvillesMobyDickarealsofrequentlycallednovelsandScottdescri
besromanceasakindredtermRomanceasdefinedhereshouldnotbeconfusedwiththegenreficti
onloveromanceorromancenovelOtherEuropeanlanguagesdonotdistinguishbetweenromancea
ndnovelanovelisleromanderRomanilromanzo
D:\GoogleDrive\programs\WordBreaker> 
```

# angularjs - AngularJS Form Validation with Directives - "myform.$valid" not quite right for me

> ID：14543437
> 
> 赞同：5
> 
> 时间：2013-01-27T01:12:18.520
> 
> 标签：angularjs

I've hacked a solution to my problem, but I am not pleased, it doesn't feel "angular" to me, and it adds to the maintenance of the code.

First, the form requirements:

1.  Modular Directives (so I can re-use them.)
2.  Each field can have multiple errors, **but only one is shown at a time**, in a logical order...
3.  Hide the submit button until the form **is complete**, not just valid.
4.  Bootstrap Themed
5.  Do it "the angular way."

The problem is #3\. I tried this:

```
<div ng-show="myform.$valid">
   <input type="submit" value="Submit" />
</div> 
```

But this just makes the submit button show up as soon as one field is valid, and then it hides again as you start the next field. My "hack fix" was to create variables on the scope and a method in the controller to check them all (mainly to keep the view clean...) But this just doesn't feel right.

Here's my fiddle: [http://jsfiddle.net/thomporter/e3jye/](http://jsfiddle.net/thomporter/e3jye/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-05T19:46:02.380

我只是在研究这个，这就是我在电子邮件字段上按逻辑顺序突出显示错误的内容（使用引导表单控制组）... [http://jsfiddle.net/kNKbJ/1/](http://jsfiddle.net/kNKbJ/1/)

```
<form name="form" ng-app>
    <div class="control-group" ng-class="{true: 'error'}[form.email.$error.email || (submitted && form.email.$error.required)]">
        <label class="control-label" for="email">Your email address</label>
        <div class="controls">
            <input type="email" name="email" ng-model="email" required />
            <span class="help-inline" ng-show="submitted && form.email.$error.required">Required</span>
            <span class="help-inline" ng-show="form.email.$error.email">Invalid email</span>
        </div>
    </div>

    <button type="submit" class="btn btn-primary btn-large" ng-click="submitted=true">Submit</button>
</form> 
```

您可以`submitted`在首次提交之前将支票添加到您不想显示的任何内容

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T01:21:52.067

人们不希望所有验证消息同时显示，这是一个常见问题，即使它们都适用。

以下表格应该符合您的要求，但是我没有“引导主题”错误验证消息。它仅使用默认的角度功能。

但简而言之，它应该显示所需的消息，如果值存在但它不是有效的电子邮件，它应该显示无效的电子邮件消息。

如果它无效，它也会隐藏提交按钮......但是......我建议只使用 ng-disabled 禁用提交按钮。不让人们知道提交按钮在哪里，IMO 的可用性很差。

```
<form name="myForm">
   <label for="email">Email</label>
   <input type="email" id="email" name="email" ng-model="formData.email" required/>
   <span ng-show="myForm.email.$error.required && myForm.email.$dirty">required</span>
   <span ng-show="!myForm.email.$error.required && myForm.email.$error.email && myForm.email.$dirty">invalid email</span>

   <button type="submit" class="btn" ng-show="myForm.$valid">Submit</button>
</form> 
```

将这些检查添加到验证中会花费一些时间，但这是执行此操作的“角度方式”。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-26T04:08:10.450

我想为此添加另一个解决方案并使其尽可能完整。此验证与 asp.net 的验证摘要控件具有相似的外观。

表单从 JSON 加载。表单字段和验证是从一个名为`requiredFields`. 在您单击按钮之前，验证不会显示，而不是在加载时出现在您的面前。

这是一些相关的代码：

**HTML**

```
<div ng-show="showValidation() &&  !formReset">
    <h4>The following errors were found:</h4>
    <ul ng-repeat="(key,val) in requiredFields()">
        <li ng-show="myForm[key].$invalid">{{val}} is required</li>
    </ul>
</div>

<form name="myForm" novalidate>
  <label>Age: <span class="ng-cloak" ng-show="myForm.age.$valid">&#10004;</span></label>
  <input type="number" name="age" ng-model="form.age" required />
  <button ng-click="clickButton()">Submit</button>
</form> 
```

**JS**

```
$scope.clickButton = function() {
  $scope.formReset = false;
  $scope.showValidation = function () { return $scope.myForm.$invalid; }
  if ($scope.myForm.$valid)
    $scope.jsonoutput = JSON.stringify($scope.form);
} 
```

**完整代码：** [http ://plnkr.co/edit/GAHHab7pEFtlyHnPWVux?p=preview](http://plnkr.co/edit/GAHHab7pEFtlyHnPWVux?p=preview)

* * *

*旁注：如果您不希望弹出工具提示出现，`novalidate`则标签中的“”很重要。`form`据我了解，' `required`' 属性是 HTML5 的一部分，与 angularjs'`required`指令冲突。*

# java - 如何在Java中的当前类中引用不同类的实例

> ID：14543442
> 
> 赞同：1
> 
> 时间：2013-01-27T01:13:19.287
> 
> 标签：java, class, object, collision

我正在研究激光与 Java 中的怪物碰撞的边界框碰撞。碰撞没有问题。问题是 OneEye 类中的 Rectangle 对象是静态的！

问题 1：如果游戏中有一个怪物，这没问题，但在我的游戏中，我将添加很多 Monster 类的实例。因此，如果我要添加多个怪物，我的 Rectangle 对象就不能是静态的。

问题 2：注意：如果 Rectangle 对象是非静态的，我的 Rectangle 的 getter 方法需要是非静态的。

但我似乎无法弄清楚如何解决这两个问题。

再次，我的碰撞有效！如果我要添加同一个类的不同实例，这更像是一个代码设计缺陷。总而言之，我如何在当前类中引用来自不同类的实例我正在编写代码而不在静态上下文中引用它。

这是我的两个类的代码：激光类和 OneEye 类

```
public class Laser {

/* use a bounding box 
     * to test collision detection
     * 
     */
    private Rectangle rect;

   public void update(long milliseconds) {

// surround a bounding box around the laser
        rect = new Rectangle((int)position.x,(int)position.y,this.getWidth(),this.getHeight());
        // collision against the OneEye monster
        if(rect.intersects(OneEye.getRectangle()))
        {
            Game.getInstance().remove(this);
        }

}

public class OneEye {

/*
     * use bounding box
     * for collision 
     * detection
     */
    private static Rectangle rect;

public void update(long milliseconds) {

        // surround a bounding box around the oneEye monster
        rect = new Rectangle((int)position.x,(int)position.y,this.getWidth(),this.getHeight());
}

// can be useful for collision detection
public static  Rectangle getRectangle()
    {
        return rect;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:18:02.890

毫无疑问，您绝对需要走非静态路线。只需使 rect Rectangle 变量和`getRectangle()`方法非静态。如果这会导致进一步的问题，那么您将需要发布这些问题的详细信息。

**编辑**你状态：

> 我试过了。但是问题来了：我不能在我的 Laser 类中调用 getRectangle 方法（在我的 Monster 类中）。

问题不在于你不能`getRectangle()`在 Laser 类中调用，而在于你不能在 OneEye 上调用它。你很少告诉我们的事情。我假设 OneEye 是 Monster*变量*而不是 Monster 子类。如果是后者，那么您的设计就失败了，因为您应该在类实例上调用方法，而不是在类本身上。

**编辑 2**
好的，现在我看到 OneEye，我看到它是一个类，而不是一个实例。不要试图以此调用方法。相反，要么创建一个包含 Monster 对象的 oneEye 变量，要么创建一个扩展 Monster 的 OneEye 类，但无论哪种方式，都不要调用`getRectangle()`类。在引用 Monster 或 Monster 子类对象的变量上调用它。

# c - In C how do you redirect stdin/stdout/stderr to files when making an execvp() or similar call?

> ID：14543443
> 
> 赞同：24
> 
> 时间：2013-01-27T01:13:28.770
> 
> 标签：c, linux, unix, exec, io-redirection

I have the following code:

```
pid_t pid = fork();
if (pid == -1)
{
    // ...
}
else if (pid == 0)
{
    stdin = someopenfile;
    stdout = someotherfile;
    stderr = somethirdopenfile;
    execvp(args[0], args);
    // handle error ...
}
else
{
    // ...
} 
```

The problem is, the input/output of the `execvp()` call is still the console, rather than the files. Clearly I am doing something wrong, what is the right way to do this?

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-27T01:20:05.747

正确的做法是替换文件描述符`STDIN_FILENO`，`STDOUT_FILENO`并`STDERR_FILENO`用打开的文件使用`dup2()`. 然后，您还应该关闭子进程中的原始文件：

```
else if (pid == 0)
{
    dup2(fileno(someopenfile), STDIN_FILENO);
    dup2(fileno(someotherfile), STDOUT_FILENO);
    dup2(fileno(somethirdopenfile), STDERR_FILENO);
    fclose(someopenfile);
    fclose(someotheropenfile);
    fclose(somethirdopenfile);
    execvp(args[0], args);
    // handle error ...
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T01:15:13.073

看看[`freopen`](http://www.cplusplus.com/reference/cstdio/freopen/)功能。

我不得不做类似的事情`stdout`并编写了两个为我工作的函数：

```
static int fd;
static fpos_t pos;

void switchStdout(const char *newStream)
{
  fflush(stdout);
  fgetpos(stdout, &pos);
  fd = dup(fileno(stdout));
  freopen(newStream, "w", stdout);
}

void revertStdout()
{
  fflush(stdout);
  dup2(fd, fileno(stdout));
  close(fd);
  clearerr(stdout);
  fsetpos(stdout, &pos);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-10T13:21:20.190

当 stdin ， stdout ， stderr 是终端时，您可以使用它-

```
//change stdin,stdout,stderr
    freopen("new_stdin","r",stdin);
    freopen("new_stdout","r",stdout);
    freopen("new_stderr","r",stderr);

    //----do something;

//reset stdin,stdout,stderr
     freopen("/dev/tty","r",stdin);
     freopen("/dev/tty","r",stdout);
     freopen("/dev/tty","r",stderr); 
```

# c++ - How to not use a singleton?

> ID：14543447
> 
> 赞同：2
> 
> 时间：2013-01-27T01:14:26.850
> 
> 标签：c++, singleton

According to [the article](http://jalf.dk/blog/2010/03/singletons-solving-problems-you-didnt-know-you-never-had-since-1995/), it is suggested to not use a singleton. However, what is the alternative or better way? For example, in my GUI, I have a log window. After an operation, no matter where it is, I can easily record some information in the log window if a singleton is used. The singleton provides a shortcut, although via a global route. If not using singleton, any good way to do it? Note the operations may scatter anywhere. Thanks a lot!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:00:58.730

做可能可行的最简单的事情。根据我的经验，进行日志记录的最简单方法是使用免费函数。

```
void logError(const std::string& message);
void logWarning(const std::string& message);
void logInfo(const std::string& message); 
```

也许实施只是一个全球性的，也许不是。你如何实现它并不重要。重要的是他们不会根据实现方式编写不同的代码。专注于暴露的界面。

恕我直言，单身人士很糟糕，因为它们以后很难改变。不是因为它们的实现方式，而是因为它们倾向于只允许背后有一个单例的接口。这很难改变。当改变很困难时，维护成本会很高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T05:00:42.233

关于 Singleton 有几个常见的误解。

首先是它具有任何兑换功能并且很有用。错误的。真是废话。

第二个误解是它的意思是“只有一个对象”。**没有**。它的意思是“执行*只能有*一个对象的规则”。那不是一回事。

Gang of Four *Design Patterns*一书中的 Singleton 模式是一种“创建模式”，因为它的作用与对象的创建方式有关。所谓模式的目的是提供一个对象的单个全局实例，*并防止创建其他实例*。例如，将构造函数设为私有并提供一个静态函数，该函数只允许创建*一个*实例。（它在一种类型中具有两种责任的事实应该是它被破坏的线索，它违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。）

如果您必须有一个全局实例，那么（尽管这可能是设计不佳的一个征兆）您**只需创建一个**. 那么你就不需要“执行规则只能有一个”属性，所以你不需要单例“模式”。

太多人说“它是 Singleton”的意思是“只有一个”，这与说“我已经使用语言规则保证*只能有*一个”是不一样的。

或者他们说“我有一个单身人士”，好像这证明有一个全局变量是合理的。给它起一个花哨的名字并不能成为垃圾设计的借口。

如果您需要一个实例，请创建一个实例。不要创建更多。宾果游戏，你有一个实例。简单的。如果您无法控制程序的其他位如何访问该实例，那么您的程序已经损坏。修复代码。停止依赖该类型的单个实例。阻止创建其他实例并不能解决您的设计问题，只会使情况变得更糟。

这是[Just Create One](http://butunclebob.com/ArticleS.UncleBob.SingletonVsJustCreateOne)模式。

如果大量代码需要访问该对象，则将其传递给代码（通过构造函数或函数参数），因此依赖关系是显式的。这是[Parameterize from Above](http://accu.org/index.php/journals/1411)模式。

对于日志记录模块，想要记录的代码不应该关心它正在记录到“单例”（即不能有多个实例的类型，）它应该记录到它传递的记录器，或者它应该通过一个*不需要是“单例”*的全局函数或对象，它可以只是一个只有一个的全局函数或对象。您是编写代码来强制执行只有一个规则`std::cout`并调用`std::cout::instance()`，还是只是接受它是一个全局规则并使用它？你打电话`printf::instance()("%s", ...)`还是只是`printf`让实施者`printf`担心它是如何工作的？

# url - URL 中的符号替换：当输入中已经存在替换时该怎么办？

> ID：14543452
> 
> 赞同：2
> 
> 时间：2013-01-27T01:14:56.320
> 
> 标签：url, url-rewriting, substitution

*如果你能想出一个更好的标题，请随时编辑。*

我正在尝试创建一个简单的 JavaScript 系统，该系统根据 URL 的#fragment 标识符（又名哈希）显示某个漫画。

当在此哈希中使用空格或类似的特殊字符时，它们将通过 URL 编码转换为 %20 或类似的序列。

这看起来不太好。因此，当您想通过 URL 中的标题来引用某个漫画、博客文章等时，我相信将所有空格和其他 URL 不安全字符替换为不同的 URL 安全符号是很常见的。事实上，StackOverflow 也是这样做的。

但是，当我要替换它的符号也存在于输入字符串中时，我该怎么办？

例如，当我用连字符 (-) 替换所有空格 () 时，我该如何处理已经存在的连字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:12:42.223

另一种解决方案是以类似于 Stack Overflow 的方式实现它。**在 URL 中同时**包含内部标识符和“用户友好”标识符。例如，这是此问题的“标准”链接：

```
http://stackoverflow.com/questions/14543452/symbol-substitution-in-urls-what-to-do-when-replacement-already-exists-in-input 
```

但以下链接也同样有效：

```
http://stackoverflow.com/questions/14543452/this-part-of-the-address-is-just-to-look-nice 
```

您可以执行类似的操作，为每个漫画和用户友好的名称添加某种标识符（可能是序号），例如：example.com/comics/#42-the-forty-second-comic-title。

这个系统有很多好处：

*   它很容易实现 - 只需解析第一个破折号 (-) 之前的片段部分并使用它来构建特定漫画的 URL
*   它允许您提供漫画的[永久链接](http://codex.wordpress.org/Introduction_to_Blogging#Pretty_Permalinks)，因为即使您碰巧更改了漫画的标题，内部标识符部分也永远不会改变
*   它允许您轻松重命名漫画，而无需担心更新 URL、图像路径等，因为漫画名称对于系统正常工作并不是绝对必要的
*   它使 Next 和 Previous 按钮易于仅使用客户端 JavaScript 实现（因为您知道 '#23-some-title' 之前的漫画将是 '#23'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:37:27.810

这是一个普遍的问题，解决方案称为[Character Escaping](http://en.wikipedia.org/wiki/Escape_character)。基本方法如下：

1.  选择一个被称为“逃生角色”的角色。在 C/C++/Java/etc 中，它是反斜杠 (\)。在 URL 中，它是百分号 (%)。你的可以是你想要的任何东西。
2.  转义后，您可以定义备用字符集和规则。例如，在 C/C++/Java/etc 中，\n 表示换行，而 \0 是空字符。在 URL 中，% 后跟两个十六进制字符。
3.  **CRITICAL**：确保转义序列包含指定转义字符本身的方法。在 C/C++/Java 中，\\ 表示 \。在 URL 编码中，它是 %25。

对于您的问题，我可以建议您选择 -、# 或 @（但任何合法的未转换 URL 编码字符都可以）。假设您使用 -，那么以下将起作用：

1.  - 是 -
2.  -= 可以是空格

（请记住，您是根据上面的元规则制定规则的。随便吧。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T09:23:56.503

您还可以使用 Wikipedia 使用的模式从帖子标题中生成一个 id，与普通的哈希标签相比，它的优点是它还传达了有关帖子的信息。编写一个接收看起来像的输入和输出的[转换器](http://en.wikipedia.org/wiki/Finite_state_transducer)应该相当简单，但您必须确保生成唯一的 id。例如，对于关键字Wikipedia 将在[http://en.wikipedia.org/wiki/Machine_(disambiguation)](http://en.wikipedia.org/wiki/Machine_%28disambiguation%29)提供一个消歧页面。`Some article``Some_Article``Machine`

# java - 搜索父文件的所有文件（以及父文件中的所有其他文件）JAVA

> ID：14543456
> 
> 赞同：0
> 
> 时间：2013-01-27T01:15:14.740
> 
> 标签：java, file

我正在尝试获取我的 jar 的父文件夹，并一直搜索它。原因是我正在修改构建路径上 jar 下的所有 .class 文件（它下面有一堆 jar）。

我目前在 searchForClasses 方法中的 dir.listFiles() 上获得 NPE，原因是当我创建文件的新实例时，它不是正确的路径。（我相信）

我目前有这个：

```
 public void searchForClasses(File dir) {
    for (File f : dir.listFiles()) {
        if (f.getName().endsWith(".class")) {
            for (byte[] bytes : NMSversions)
                fix(f.getAbsolutePath(), bytes, NMS);
            for (byte[] bytes : OBCversions)
                fix(f.getAbsolutePath(), bytes, OBC);
            System.out.println("fixing");
        } else {
            searchForClasses(f);
        }
    }
} 
```

这就是我用来尝试获取父文件的方法：

```
 File directory = new File(Main.class.getProtectionDomain().getCodeSource().getLocation().getPath());
    main.searchForClasses(directory); 
```

有人对我可以切换的内容有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:19:51.780

File.listFiles() 可以返回 null。请参阅 Javadoc。你不是在检查那个。

# java - 为什么我的角色不动？

> ID：14543462
> 
> 赞同：-1
> 
> 时间：2013-01-27T01:16:25.920
> 
> 标签：java, eclipse, keylistener

我有我的代码。

```
public void keyPressed(KeyEvent e) {
    if (e.getKeyCode() == 37){
        personx -=2;
    }
    if (e.getKeyCode() == 38){
        persony -=2;
    }
    if (e.getKeyCode() == 39){
        personx +=2;
    }
    if (e.getKeyCode() == 40){
        persony +=2;
    }
    try {
        Thread.sleep((long) 0.04);
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    } 
```

代码不会移动角色。我检查了它是否被调用并写道：

```
public void keyPressed(KeyEvent e) {
    System.out.println("Test");
} 
```

但它没有打印测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:39:17.403

您的代码表明您正在使用 Swing 或 AWT GUI。无论哪种方式，KeyListeners 都需要：

*   首先将 KeyListener 添加到可见 GUI 上的组件
*   确保该组件是*可聚焦的*
*   并且听过的组件具有 GUI 的焦点。

如果这是一个 Swing GUI，我建议您实际上不要使用 KeyListener，而是使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，因为它们比 KeyListeners 更灵活，并且允许您在程序的多个部分中重用 AbstractActions。

# c++ - '->' 标记之前的预期初始化程序

> ID：14543464
> 
> 赞同：1
> 
> 时间：2013-01-27T01:16:50.547
> 
> 标签：c++, compiler-errors, g++

我从 g++ 收到奇怪的错误。错误提示的过程在其他项目中编译得很好，但在这里不知何故。这是 g++ 抱怨的：

```
g++ -c -Wall -pedantic clear_screen.cpp -lcurses -o .clear.o
clear_screen.cpp:6:6: error: expected initializer before ‘->’ token
make: *** [.clear.o] Error 1 
```

相应的 makefile 部分如下所示：

```
CC=g++
CFLAGS=-c -Wall -pedantic
COMP=$(CC) $(CFLAGS)
.clear.o : clear_screen.cpp
    $(COMP) clear_screen.cpp -lcurses -o $@ 
```

有问题的文件由以下几行组成：

```
#include <unistd.h>
#include <term.h>

void clear_screen() {
  if ( !cur_term ) { // line 6 is here
    int result;
    setupterm( NULL, STDOUT_FILENO, &result );
    if (result <= 0) return;
  }
  putp( tigetstr( "clear" ) );
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:24:34.127

`clear_screen`被定义`term.h`为`cur_term->type.Strings[5]`（至少在我的系统上），因此`->`. 查看`g++ -E`输出以了解预处理器的作用。所以本质上你需要使用一个不同的名字`clear_screen`来避免冲突。

# image - 比较图像和文件中的数据

> ID：14543467
> 
> 赞同：2
> 
> 时间：2013-01-27T01:17:06.623
> 
> 标签：image, algorithm, image-processing

我有一个带有图形的图像文件。例如： ![美国地图](../Images/91455eaeafcee49e04b4f508dda9c330.png)

1.  如何有效地提取此图？你能给我一些例子/概念吗？

2.  我有一个包含边缘细节的数据文件，我可以将它们绘制在地图上以创建图像（如链接中显示的图像），但背景不同。我如何比较两者并说存在匹配/不匹配？

非常感谢任何帮助/评论/想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T02:23:29.077

由于这很难针对不同的图像进行复制，因此这只是对适用于该特定图像的一些东西的概述。

首先将您的图像转换为 CMYK 并考虑将第三个通道 ('Y') 进行二值化（最大值的 80%，您的顶点是相对黄色的）以找到顶点：

![在此处输入图像描述](../Images/c1ee1ecf6eb082e0ea9eb7d76f3700cd.png)

现在考虑对第二个通道（'M'）进行二值化（再次为最大值的 80%）以找到边缘：

![在此处输入图像描述](../Images/86111cebb78c4b2f66643634659cfc5c.png)

现在，如果您将每个顶点视为连接组件，并将每个边也视为连接组件，那么您可以简单地通过同时考虑两个图像并考虑给定顶点接触哪些边来构建图形。

您现在可以将输入图像转换为灰度以查找文本。在这个简单的图像中，一些特别的连接组件分析和简单的阈值将给出所有文本：

![在此处输入图像描述](../Images/2bb08d21ca459887449ad9384a1a384c.png)

如果我在最后一张图片上运行一些非常基本的文本识别，我会得到：

```
Seattle
Chicago
Bay Area DC Metro NYC
Denver
Los
Angeles
Phoenix 
```

这非常好，因为它找到了所有文本。剩下的就是为已经构建的图中的顶点命名。为此，请考虑文本块出现的位置并继续找到最近的边缘（第一张图像，到质心的欧几里德距离）。

如果重要的话，这里是获得这些结果的代码：

```
f = Import["http://i.stack.imgur.com/DP3la.png"]
cmyk = ColorSeparate[f, "CMYK"]
vertex = Binarize[cmyk[[3]], 0.8]   (* The first image *)
edge = Binarize[cmyk[[2]], 0.8]     (* The second image *)
nyctext = SelectComponents[
  DeleteSmallComponents[
   SelectComponents[Binarize[ColorConvert[f, "Grayscale"], 0.01], 
    Small]], "Length", #1 < 25 &]
alltext = ImageAdd[
  SelectComponents[
   ColorNegate[Binarize[ColorConvert[f, "Grayscale"], 0.5]], Small], 
    nyc_text]                       (* The last image *)
TextRecognize[alltext]              (* The text recognized *) 
```

# jquery - jQuery保存附加选项值

> ID：14543470
> 
> 赞同：0
> 
> 时间：2013-01-27T01:17:44.657
> 
> 标签：jquery

我如何将数据从 jQuery Ajax 传递到 PHP 选项值并将保存的选项设置为选中。

jQuery

```
var socialicons = ['Facebook', 'Twitter', 'LinkedIN'];
$.each(socialicons, function(val, text) {
    $('select').append( $('<option></option>').val(val).html(text) )
}); 
```

PHP

```
<select name="'. $id .'['.$order.'][url]" id="'. $id .'['.$order.'][url]"> 
$socialicons = array ('facebook' => 'Facebook', 'twitter' => 'Twitter', 'linkedin' => 'linkedIN') 

foreach ($socialicons as $socialicon) { <option value="'.$socialicon.'" ' . selected($data[$id][$order]['url'], $socialicon, false) . ' />'.$socialicon.'</option> } </select> 
```

例如

```
<select>
<option value="Facebook" selected="selected"></option>
<option value="Twitter"></option>
<option value="LinkeIN"></option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:33:23.040

This code works for me. Thanks to all.

```
 var socialicons ='["Facebook","Twitter","linkedIN"]';
                var parsedjson = $.parseJSON(socialicons);
                $.each( parsedjson , function( index, item ) {
                $("<option/>",{value:item,text:item}).appendTo(".select");
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:46:27.097

假设您选择的选项的 php 变量称为 $selected_option

```
 ...
  $('select').append( $('<option></option>').addClass(val).val(val).html(text) ); 
  ...
  $('select option').removeAttr('selected');
  $('.<?php echo $selected_option ?>').attr('selected','true'); 
```

您将带有选项名称的类添加到选项元素，因此您可以通过传入 php selected 选项变量轻松地将其标记为选中。

# jquery - 如果在 Draggable 项下创建，JQuery Droppable 不接受 Draggable

> ID：14543474
> 
> 赞同：0
> 
> 时间：2013-01-27T01:18:12.913
> 
> 标签：jquery, jquery-ui-draggable, jquery-ui-droppable

我有一个带有 jquery 选项卡的 div，它们在激活时会加载它们的内容。我已经使容器 div 可放置，然后当我从外部将 div 拖到容器 div 上时，它将选择选项卡索引 6。这工作正常。

在选项卡 6 中加载的内容包含我想要使用的实际 droppable ......所以当这个内容被加载时，它没有意识到可拖动对象已经在它上面。您需要先将可拖动对象移出容器，然后在选项卡 6 中的可放置对象发现其可放置对象之前将其带回。

有谁能帮忙吗？..我解释得够清楚了吗？:)

*   更新：附上示例 ![在此处输入图像描述](../Images/a50ee206945fba5c0faae227790ac449.png)

# php - 在用户友好的 URL 中将目录路径作为参数传递

> ID：14543477
> 
> 赞同：1
> 
> 时间：2013-01-27T01:18:53.290
> 
> 标签：php

我正在使用以下格式的 URL：localhost/controller/action/param1/param2/etc... 然后我使用以下内容路由请求：

```
list($controller, $action, $params) = explode('/', $request);
call_user_func_array(array(new $controller, $action), explode('/', $params)); 
```

现在我想传递一个目录路径作为参数，例如：localhost/images/gallery/path/to/somedir，但这显然将每个目录分解为一个单独的参数。

我有哪些选择？我应该使用不同的分隔符吗？我应该将它附加到查询字符串中然后使用`$_GET`吗？这是我第一次使用友好的 URL，因此我正在寻找有关如何以使 URL 尽可能干净的方式执行此操作的任何建议或最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:23:28.660

您不应该让 URL 结构限制您自己或您的用户。如果这个 url 的唯一真正的参数参数部分是他图像的路径，那么再次加入它似乎很简单：

```
class images {
   public function gallery() {
      $imagePath = implode('/', func_get_args());
   }
} 
```

# visual-studio-2010 - 使用 CR 到 VS 2010 安装 WinForms 应用程序时出错

> ID：14543479
> 
> 赞同：0
> 
> 时间：2013-01-27T01:19:05.813
> 
> 标签：visual-studio-2010, installation, crystal-reports-2010

> **可能重复：**
> [.NET ClickOnce 没有安装必备文件？](https://stackoverflow.com/questions/971651/net-clickonce-not-installing-prerequisite-files)

我有一个我不久前编写的 Windows 窗体应用程序，使用 VS 2010，它使用用于 Visual Studio 2010 的 Crystal Reports。我最初制作它是为了让它可以在“任何 CPU”上运行，这没关系，只要它在我开发的 32 位 Windows 机器上运行。但是，现在我有一台 64 位 Windows 机器，而我的许多用户都有 64 位 Windows 机器，而 VS 2010 的 CR 就是不喜欢这样。所以我对其进行了更改，现在它只能在 32 位 Windows 机器上运行。

我提到所有这些是因为我尝试使用 ClickOnce 部署将应用程序部署到我的 64 位 Windows 机器，但它失败并出现以下错误：

> 用于 .NET Framework 4.0 的组件 SAP Crystal Reports 运行时引擎安装失败，并显示以下错误消息：
> 
> '安装过程中出现Faral错误以下组件安装失败。-用于 .NET Framework 4.0 的 SAP Crystal Reports 运行时引擎'

除此之外，我不知道出了什么问题或失败的原因。

# computer-science - BigO Notation：如何在嵌套循环中计算它？（初学者）

> ID：14543481
> 
> 赞同：1
> 
> 时间：2013-01-27T01:19:22.687
> 
> 标签：computer-science, complexity-theory, big-o

**编辑：**到目前为止，我已经在 SO 上阅读了大约 3 个小时，但对我来说仍然没有多大意义（这意味着我在询问之前*已经完成了研究）。*忘记在OQ中说明了。

好吧，我对 BigO 完全不知所措，当我尝试将其他方法应用于我的代码时，这对我来说几乎没有意义。如果有人可以提供帮助，我想要一个如何计算以下 BigO 的演练。

```
int i = 0;
int t = 0;
while(i <= 4){
    // Basic instructions
    int s = 0;
    while(s <= 4){
        // Basic instructions
        t + 2;
        if(conditions){ // Checks if a value isn't in a hashset
            for(int r = 0; r <= t; r++){
                // Basic instructions
                if(conditions){ // This statement can make t equal to any number < t, checks if two strings are identical.
                    // Do stuff
                }else{
                    // Do stuff. 
                }
            }
        }else if(condition){
            i++;
        }
        s++;
    }
} 
```

如果需要，我可以将完整的代码放在那里，但据我所知，我认为这应该足以帮助我。

到目前为止，我的想法是（不包括 if 语句）符号类似于 O(n^3) 但因为它们是嵌套的（以及其他人告诉我的东西），它有点让我失望。

**请注意：**这不是直接针对作业，但我们的任务是讨论我们为作业编写的代码及其复杂性。我们被告知要展示我们理解复杂性/正确性（一般来说，不是 BigO）以及它是如何应用的，但不要将它应用到我们的代码中，因为这样做太复杂了。我只是在考虑这样做，因为我想为将来更好地理解它。上面的代码也是一个随机示例，而不是我的实际代码，这意味着我仍然必须更改它以适应任何情况。

在此先感谢，我们在课堂上只看了大约 30 分钟的 BigO，经过大量阅读后，我觉得我自己太糊涂了。正如我所说，如果该代码不合适，我可以更改它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:34:33.570

如果不清楚 N 是什么，那么您可以计算所有变量的性能，看看哪个变量的影响更大。在这种情况下，变量是 i、sr 和 t。严格来说，性能是 O(i * s * t)。r 不包括在内，因为它一直计数到 t，这是大 O 中的 t 的来源。

但问题是，由于 t 不能超过 2*s，用 t 代替 2s 会得到 O(i * s * 2s)。这与 O(2 * i * s^2) 相同。但是，在大 O 表示法中，所有[系数](http://en.wikipedia.org/wiki/Coefficient)都被视为等于 1。因此，它变为 O(i * s^2)。但是 i 和 s 不能超过 4，由于大 O 只关心最坏的情况，所以它变成 O(4 * 4^2)，因为大 O 只关心最坏的情况。这简化为 O(64)。但是，64 被认为是一个系数*。因此，实际的大 O 为 O(1)*。

*请注意，这并不完全正确，因为像 O(x + 64) 这样的情况变成了 O(x) 而不是 O(x + 1)，在这种情况下，64 实际上变成了零而不是一。

意思是，目前的算法是 O(1)，它本质上是独立于输入的。这就是为什么评论者会有些困惑。

这里的关键是，你可能有多个输入大小变量，它们独立地影响性能，你也可能有一个[输出敏感算法](http://en.wikipedia.org/wiki/Output-sensitive_algorithm)，它的性能基于输入大小和输出大小。或者，您可能有一个不受输入大小影响的算法。

有关更详细的说明，请参阅[Wikipedia 页面](http://en.wikipedia.org/wiki/Big_O_notation)。

# ruby-on-rails - Rails 关于 new 和 create 方法的一点困惑

> ID：14543488
> 
> 赞同：0
> 
> 时间：2013-01-27T01:21:07.940
> 
> 标签：ruby-on-rails, post, get

在 LessonsController 中，有`new`和`create`方法。

```
def new
  @lesson = Lesson.new
end

def create
  @lesson = Lesson.new(params[:lesson])
  if @lesson.save do something end
end 
```

我一直在我的应用程序中这样做，没有考虑。它有效，但我很困惑为什么我要在 new 和 create 操作中创建实例变量。据我了解，这是流程：

当用户单击`new lesson`按钮时，他将被定向到`LessonsController#new`。当他输入所需的值并单击时，`submit`他将被定向到`LessonsController#create`。我不需要该`create`方法的视图模板。

所以我的困惑是，你为什么要`@lesson`在方法中再次创建对象`create`？我认为这个问题的答案可能还必须涉及一些关于HTTP 方法的`GET`概念。`POST`

我很感激任何帮助！谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T01:27:03.537

这是因为 HTTP 是无会话协议，任何实例变量都不会在多个请求之间传递。

加载`#new`页面的请求是单个请求，一旦您提交表单并点击`create`按钮（或任何其他对应项），浏览器就会向您的`#create`方法发起一个新请求。

第一次在`#new`方法中 - 您正在`@lesson`使用它的默认值创建一个实例变量：

`@lesson = Lesson.new`

但是，第二次在`#create`方法中 - 新请求强制创建一个非常不同的实例变量：

`@lessong = Lesson.new(params[:lesson])`

这 ^ 第二次您使用从表单提交中收到的值（通常是带有 的`POST`请求`#create`）来启动实例变量。我希望这能澄清为什么会这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:27:37.833

该`new`操作用于呈现`Lesson`创建表单。您正在该操作中创建一个实例来构造表单。`Lesson`rails 表单助手使用在操作中创建的空`new`来构造表单字段名称、提交 url 等。除此之外，表单将可以访问在数据库迁移脚本或`after_initialize`模型回调中声明的默认值。**在操作中创建的`Lesson`实例`new`未保存**。

`create`当用户提交表单时调用该操作。在此操作中，您应该实例化一个新实例`Lesson`并保存它。

# delphi - 如何确定调用了多少级 CoInitialize？

> ID：14543496
> 
> 赞同：8
> 
> 时间：2013-01-27T01:22:38.330
> 
> 标签：delphi, activex

我正在对一个杂乱的项目进行一些调试，我之前的开发人员不知道他们在做什么，主要问题是尝试多线程应用程序失败。我现在正在清理混乱并试图找出哪里出了问题。`CoInitialize`问题之一是使用 ADO 组件的调用不一致。

继续我[之前的问题](https://stackoverflow.com/questions/14542655/can-i-check-to-see-if-coinitialize-has-been-called-or-not)，我如何确定`CoInitialize`已经调用了多少级别？

例如，考虑以下代码：

```
CoInitialize(nil);
try
  CoInitialize(nil);
  try
    //2 levels have been called, how to programatically check this?
  finally
    CoUninitialize;
  end;
finally
  CoUninitialize;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T12:28:45.463

如果我必须解决这个问题，我会通过检测对 和 的调用来`CoInitialize`解决`CoInitializeEx`它`CoUninitialize`。我会将调用挂钩到这些函数并使用线程局部变量来计算调用。

您可以通过将以下单元添加到您的项目中来做到这一点。

```
unit InstrumentCOMinit;

interface

uses
  SysUtils, Windows, ComObj, ActiveX;

threadvar
  COMinitCount: Integer;

implementation

function CoInitialize(pvReserved: Pointer): HResult; stdcall; external 'ole32.dll';
function CoInitializeEx(pvReserved: Pointer; coInit: Longint): HResult; stdcall; external 'ole32.dll';
procedure CoUninitialize; stdcall; external 'ole32.dll';

function InstrumentedCoInitialize(pvReserved: Pointer): HResult; stdcall;
begin
  Result := CoInitialize(pvReserved);
  if Succeeded(Result) then
    inc(COMinitCount);
end;

function InstrumentedCoInitializeEx(pvReserved: Pointer; coInit: Longint): HResult; stdcall;
begin
  Result := CoInitializeEx(pvReserved, coInit);
  if Succeeded(Result) then
    inc(COMinitCount);
end;

procedure InstrumentedCoUninitialize; stdcall;
begin
  CoUninitialize;
  dec(COMinitCount);
end;

procedure Fail;
begin
  raise EAssertionFailed.Create('Fixup failed.');
end;

procedure PatchCode(Address: Pointer; const NewCode; Size: Integer);
var
  OldProtect: DWORD;
begin
  if not VirtualProtect(Address, Size, PAGE_EXECUTE_READWRITE, OldProtect) then begin
    Fail;
  end;
  Move(NewCode, Address^, Size);
  FlushInstructionCache(GetCurrentProcess, nil, 0);
  if not VirtualProtect(Address, Size, OldProtect, @OldProtect) then begin
    Fail;
  end;
end;

type
  PInstruction = ^TInstruction;
  TInstruction = packed record
    Opcode: Byte;
    Offset: Integer;
  end;

procedure RedirectProcedure(OldAddress, NewAddress: Pointer);
var
  NewCode: TInstruction;
begin
  NewCode.Opcode := $E9;//jump relative
  NewCode.Offset := NativeInt(NewAddress)-NativeInt(OldAddress)-SizeOf(NewCode);
  PatchCode(OldAddress, NewCode, SizeOf(NewCode));
end;

initialization
  RedirectProcedure(@ActiveX.CoInitialize, @InstrumentedCoInitialize);
  RedirectProcedure(@ActiveX.CoInitializeEx, @InstrumentedCoInitializeEx);
  RedirectProcedure(@ActiveX.CoUninitialize, @InstrumentedCoUninitialize);
  ComObj.CoInitializeEx := InstrumentedCoInitializeEx;

end. 
```

与 Serg 的方法不同，这种技术不会改变程序的语义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-27T01:48:43.393

你可以这样做：

```
function CoInitializeCount: Integer;
var
  HR: HResult;
  I: Integer;

begin
  Result:= 0;
  repeat
    HR:= CoInitialize(nil);
    if (HR and $80000000 <> 0) then begin
      Result:= -1;
      Exit;
    end;
    CoUnInitialize;
    if (HR <> S_OK) then begin
      CoUnInitialize;
      Inc(Result);
    end
    else Break;
  until False;
  for I:= 0 to Result - 1 do
    CoInitialize(nil);
end; 
```

* * *

**警告！**由于上述函数关闭了 COM，因此不能在 COM 应用程序中使用，只能在调试时回答特定问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T07:45:18.193

如果我要清理这样的项目，我将创建一个抽象线程祖先，并覆盖 Execute 并将其拆分为三个虚拟方法，例如 BeforeExecuteTask、AfterExecuteTask 和抽象 ExecuteTask。

我会将 COM（取消）初始化移动到 Before/After 方法中，并删除所有其他发生（DRY）。在每个后代中，我会将代码从原始 Execute 方法移动到覆盖的 ExecuteTask。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T12:26:06.077

至于 Coinitialize 和 CoUninitialize 必须按线程计数，并且不应调用 CoUninitialize 进行计数，因为 COM 将被破坏，您可以使用以下代码进行调试。

```
unit CoinitCounter;

interface

uses Classes, Generics.Collections, ActiveX, SyncObjs, Windows;

Type
  TCoIniRec = Record
    ThreadID: Cardinal;
    Init: Integer;
    InvalidInit:Integer;
    CoInit: Integer;
    IsCoinitialized:Boolean;
  End;

  TCoIniList = TList<TCoIniRec>;

  TCoinitCounter = Class
  private
    FCS: TCriticalSection;
    FList: TCoIniList;

    Constructor Create;
    Destructor Destroy; override;
  public
    Function Coinitialize(p: Pointer): HRESULT;
    Procedure CoUninitialize;
    Function LeftInitCount: Integer;
    Function ValidInits: Integer;
    Function InValidInits: Integer;
    Function IsCoinitialized:Boolean;

  End;

var
  FCoinitCounter: TCoinitCounter;

implementation

{ TCoinitCounter }

function TCoinitCounter.Coinitialize(p: Pointer): HRESULT;
var
  r: TCoIniRec;
  i, x: Integer;
begin
  FCS.Enter;
  Result := ActiveX.Coinitialize(p);
  if  Succeeded(Result) then
  begin    
    x := -1;
    for i := 0 to FList.Count - 1 do
      if FList[i].ThreadID = GetCurrentThreadID then
        x := i;
    if x > -1 then
    begin
      r := FList[x];
      r.IsCoinitialized := true;
      if Result = s_OK then r.Init := r.Init + 1
      else r.InvalidInit := r.InvalidInit + 1;
      FList[x] := r;
    end
    else
    begin
      ZeroMemory(@r,SizeOf(r));
      r.ThreadID := GetCurrentThreadID;
      r.IsCoinitialized := true;
      if Result = s_OK then r.Init :=  1
      else r.InvalidInit :=  1;
      FList.Add(r);
    end;
  end;
  FCS.Leave;
end;

procedure TCoinitCounter.CoUninitialize;
var
  r: TCoIniRec;
  i, x: Integer;
begin
  FCS.Enter;
  x := -1;
  ActiveX.CoUninitialize;
  for i := 0 to FList.Count - 1 do
    if FList[i].ThreadID = GetCurrentThreadID then
      x := i;
  if x > -1 then
  begin
    r := FList[x];
    r.IsCoinitialized := false;
    r.CoInit := r.CoInit + 1;
    FList[x] := r;
  end
  else
  begin
    r.ThreadID := GetCurrentThreadID;
    r.IsCoinitialized := false;
    r.CoInit := 1;
    FList.Add(r);
  end;
  FCS.Leave;
end;

constructor TCoinitCounter.Create;
begin
  inherited;
  FCS := TCriticalSection.Create;
  FList := TCoIniList.Create;
end;

destructor TCoinitCounter.Destroy;
begin
  FCS.Free;
  FList.Free;

  inherited;
end;

function TCoinitCounter.InValidInits: Integer;
var
  i, x: Integer;
begin
  FCS.Enter;
  x := -1;
  for i := 0 to FList.Count - 1 do
    if FList[i].ThreadID = GetCurrentThreadID then
      x := i;
  if x > -1 then
    Result :=  FList[x].InvalidInit
  else
    Result := 0;
  FCS.Leave;
end;

function TCoinitCounter.LeftInitCount: Integer;
var
  i, x: Integer;
begin
  FCS.Enter;
  x := -1;
  for i := 0 to FList.Count - 1 do
    if FList[i].ThreadID = GetCurrentThreadID then
      x := i;
  if x > -1 then
    Result := FList[x].Init + FList[x].InvalidInit - FList[x].CoInit
  else
    Result := 0;
  FCS.Leave;
end;

function TCoinitCounter.IsCoinitialized: Boolean;
var
  i, x: Integer;
begin
  FCS.Enter;
  x := -1;
  for i := 0 to FList.Count - 1 do
    if FList[i].ThreadID = GetCurrentThreadID then
      x := i;
  if x > -1 then
    Result := FList[x].IsCoinitialized
  else
    Result := false;
  FCS.Leave;
end;

function TCoinitCounter.ValidInits: Integer;
var
  i, x: Integer;
begin
  FCS.Enter;
  x := -1;
  for i := 0 to FList.Count - 1 do
    if FList[i].ThreadID = GetCurrentThreadID then
      x := i;
  if x > -1 then
    Result :=  FList[x].Init
  else
    Result := 0;
  FCS.Leave;
end;

initialization

FCoinitCounter := TCoinitCounter.Create;

finalization

FCoinitCounter.Free;

end. 
```

这

```
ThreadID 6968 deserved: 0 counted: 0 valid: 0 invalid 0
ThreadID 2908 deserved: 4 counted: 4 valid: 1 invalid 3
ThreadID 5184 deserved: 1 counted: 1 valid: 1 invalid 0
ThreadID 7864 deserved: 8 counted: 8 valid: 1 invalid 7
ThreadID 7284 deserved: 2 counted: 2 valid: 1 invalid 1
ThreadID 6352 deserved: 5 counted: 5 valid: 1 invalid 4
ThreadID 3624 deserved: 4 counted: 4 valid: 1 invalid 3
ThreadID 5180 deserved: 0 counted: 0 valid: 0 invalid 0
ThreadID 7384 deserved: 6 counted: 6 valid: 1 invalid 5
ThreadID 6860 deserved: 9 counted: 9 valid: 1 invalid 8 
```

将是以下单元的示例输出：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    procedure DispOnTerminate(Sender: TObject);
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation
uses CoinitCounter;
{$R *.dfm}
Type
  TTestThread=Class(TThread)
    private
    FCounted,FTestCoinits:Integer;
    FValidInits: Integer;
    FInValidInits: Integer;
    protected
    Procedure Execute;override;
    public
    Constructor Create(cnt:Integer);overload;
    Property TestCoinits:Integer read FTestCoinits;
    Property Counted:Integer Read FCounted;
    Property ValidInits:Integer Read FValidInits;
    Property InivalidInits:Integer Read FInValidInits;
  End;

{ TTestThread }

constructor TTestThread.Create(cnt: Integer);
begin
  inherited Create(false);
  FTestCoinits:= cnt;
end;

procedure TTestThread.Execute;
var
 i:Integer;
begin
  inherited;
  for I := 1 to FTestCoinits  do
     FCoinitCounter.Coinitialize(nil);
  FCounted := FCoinitCounter.LeftInitCount;
  FValidInits := FCoinitCounter.ValidInits;
  FInValidInits := FCoinitCounter.InValidInits;
  for I := 1 to FCounted do
       FCoinitCounter.CoUninitialize;
end;

procedure TForm1.DispOnTerminate(Sender: TObject);
begin
  Memo1.Lines.Add(Format('ThreadID %d deserved: %d counted: %d valid: %d invalid %d'
     ,[TTestThread(Sender).ThreadID, TTestThread(Sender).TestCoinits,TTestThread(Sender).Counted,TTestThread(Sender).ValidInits,TTestThread(Sender).InivalidInits]));
end;
procedure TForm1.Button1Click(Sender: TObject);
var
 i:Integer;
begin

  for I := 1 to 10  do
      with TTestThread.Create(Random(10)) do OnTerminate := DispOnTerminate;
end;

end. 
```

# c - 我的 C ping 脚本安全吗？

> ID：14543503
> 
> 赞同：-1
> 
> 时间：2013-01-27T01:23:49.620
> 
> 标签：c, cgi

我刚刚用 C 语言为 CGI 编写了一个 ping 脚本。

它按预期工作，但我很确定它不安全，因为我认为用户输入是理所当然的。我不知道是否有办法将命令拼接在一起以便仍然可以识别它？

有人知道如何利用我的脚本以及我应该如何修复它吗？

**ping 脚本源**

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int main()
{
  printf("Content-Type: text/plain;charset=us-ascii\n\n");

  FILE* in = NULL;

  char buffer[100][100] = {};
  char server[100] = {};
  char concat_str[100] = {};

  char* ping = "ping ";
  char* option = " -c 4";

  int print_counter = 0;
  int read_counter = 0;

  char* query;
  query = getenv("QUERY_STRING");
  if(query == NULL)
    printf("ERROR\n");
  else
    sscanf(query,"server=%s", server);

  strcat(concat_str, ping);
  strcat(concat_str, server);
  strcat(concat_str, option);

  in = popen(concat_str, "r");
  if(in == NULL)
  {
    printf("ERROR\n");
    exit(1);
  }

  while(fgets(buffer[read_counter], 99, in) != NULL)
  {
    read_counter++;
  }

  pclose(in);

  if(read_counter != 9)
  {
    printf("ERROR\n");
    exit(1);
  }

  while(print_counter < (read_counter + 1))
  {
    printf("%s", buffer[print_counter]);
    print_counter++;
  }

  return 0;
} 
```

**html源码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>

<body>
<form action="http://xx.xx.xx.xx/ping.cgi">
<div><label>Server<input name="server" size="40"></label></div>
<div><input type="submit" value="start test"></div>
</form>

</body>
</html> 
```

在相关说明中，是否有一种简单的方法可以直接在此处发布源代码，而无需手动将其设置为 4 个空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:47:32.143

1.  所有字符串文字都应该是 const。例如：`const char *v = "value"`，或`const char v[] = "value"`。
2.  您`sscanf`可能会导致堆栈溢出。告诉它最多读取 N 个字符，它应该是安全的。例如：`sscanf(query,"server=%99s", server);`。
3.  `strcat`在没有完全控制缓冲区的情况下调用也可能导致堆栈溢出。改为使用`strncat`。例如：`strncat(concat_str, option, sizeof(concat_str)-strlen(concat_str)-1)`。
4.  您`while(fgets(buffer[read_counter], 99, in) != NULL)`还可以无限循环并访问`buffer`数组中的越界位置。您还应该检查是否`read_counter`在有效范围内，`0..99`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:50:38.187

绝对不安全。该`popen()`函数将其参数传递给子shell，因此`;`可以通过查询字符串传入shell元字符以执行任意命令。

# jquery - ajaxsubmit 目标表单输入字段

> ID：14543505
> 
> 赞同：1
> 
> 时间：2013-01-27T01:24:14.367
> 
> 标签：jquery, ajax, input-field

我试图弄清楚 ajaxSubmit 是否只能定位 #div 或其他对象。

我有一个使用 ajax 上传图像的脚本，上传图像的 url 后将显示在名为 Output 的#div 中。但是，我希望这个 url 在输入字段中可见，而不是在 div 中。

```
<script> 
    $(document).ready(function() { 
        $('#UploadForm').on('submit', function(e) {
            e.preventDefault();
            $('#SubmitButton').attr('disabled', ''); // disable upload button
            //show uploading message
            $("#output").html('<div style="padding:10px"><img src="images/ajax-loader.gif" alt="Please Wait"/> <span>Uploading...</span></div>');
            $(this).ajaxSubmit({
                target: '#output',
                success:  afterSuccess //call function after success
            });
        });
    }); 

    function afterSuccess()  { 
        $('#UploadForm').resetForm();  // reset form
        $('#SubmitButton').removeAttr('disabled'); //enable submit button

    } 
</script> 
```

那么是否可以针对输入字段的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:36:39.337

```
function afterSuccess(url){
        $('#UploadForm').resetForm();  // reset form
        $('#SubmitButton').removeAttr('disabled'); //enable submit button
        $('#output').append('input').addClass('myCssClass').val(url);
} 
```

# c# - 为什么实体框架在本地工作而不是在 Azure 上工作

> ID：14543514
> 
> 赞同：2
> 
> 时间：2013-01-27T01:25:40.453
> 
> 标签：c#, wcf, entity-framework, azure, entity-framework-4.1

我有一个 WCF 项目，它使用 AZURE SQL CONNECTION 在本地完美运行。但是当我在 Azure 上部署 WCF 项目时，它会开始出现此错误。

在没有部署的情况下测试 WCF ![在此处输入图像描述](../Images/7e4fce3e2ff6051551b2958df9d66969.png)

测试已部署的 WCF ![在此处输入图像描述](../Images/9a9d4a45850672d940320d4de1aee63d.png)

这是我最近发布的一篇文章，但答案尚未成功，但描述了我的场景的一些细节。我越来越绝望，我整天都在试图解决它

[为什么在 WCF 服务中向我抛出 FaultException？](https://stackoverflow.com/questions/14540827/why-does-throws-me-a-faultexception-in-wcf-service)

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:24:01.543

> 使用模型优先/数据库优先 (EDMX) 后，您必须使用实体连接字符串来引用 .ssdl、.msl 和 .csdl 元数据文件。另请注意，从 EDMX 创建模型时，您必须在设计时创建数据库 = 您必须生成 SQL 脚本并执行它来创建数据库。

有关更多信息，请查看[**Ladislav Mrnka**](https://stackoverflow.com/questions/5940616/model-first-with-dbcontext-fails-to-initialize-new-database)和[**Code First 与 Database First的回答**](https://stackoverflow.com/questions/8618342/code-first-vs-database-first)

我希望这对你有帮助。

# git - 使用只读和读写子模块 url

> ID：14543517
> 
> 赞同：1
> 
> 时间：2013-01-27T01:26:22.037
> 
> 标签：git, github

我有一个使用许多子模块的 github 存储库。我希望能够在本地修改它们，然后将它们推送到它们的存储库中（所以我必须使用读写存储库 url）。

但是，我还需要使用 github 的 gh-pages 服务来为存储库提供服务，而且文件中似乎需要一个只读 url `.gitmodules`。

我可以两全其美吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:02:31.020

这绝对是可能的并得到支持：

1.  使用只读 url 创建 .gitmodules 文件
2.  提交这个 .gitmodules
3.  跑`git submodule init`
4.  修改本地 .git/config 以将子模块更改为读写 url

从 git-submodule 手册页：

> 在里面
> 
> 初始化子模块，即将在.gitmodules 中找到的每个子模块名称和url 注册到.git/config 中。它还将 submodule.$name.update 的值复制到 .git/config 中。.git/config 中使用的键是 submodule.$name.url。此命令不会更改 .git/config 中的现有信息。然后，您可以在 .git/config 中为您的本地设置自定义子模块克隆 URL，并继续进行 git 子模块更新；如果您不打算自定义任何子模块位置，您也可以只使用 git submodule update --init 而不使用显式初始化步骤。

# php - 通过 md5 和 sha1 生成 rand 哈希

> ID：14543521
> 
> 赞同：-1
> 
> 时间：2013-01-27T01:26:48.160
> 
> 标签：php, encryption, random, md5, sha1

我用过

```
md5(sha1(rand())) 
```

这将为我提供 2 级加密和 32 长度的输出哈希，例如

cbc7a20f14eab9262efe0adb21074d0a

但是我怎么能让散列长度为 255（例如）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:29:05.383

无论你在做什么，现在就停下来。

重复调用相同或不同的加密函数***不会给您提供多级加密***。如果有的话，它通过更容易找到哈希冲突来*削弱加密。*

此外，md5 和 sha-1 都不是密码安全的。

如果您尝试创建密码，请使用 bcrypt 或 PBKDF2（并且仅使用*一次*）。不要忘记使用独特的盐和高迭代次数。

您可以使用 KBKDF（基于密钥的密钥派生函数），如 NIST SP 800-108 或 HKDF 中指定的函数，将 bcrypt 或 PBKDF2 的输出扩展为更多字节。但是请注意，这不会将安全级别提高到输出中的字节数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:37:59.223

如果你想创建加密随机数，任何依赖`rand()`都不会有任何好处。无论您使用哪个哈希或 KDF。

使用`mcrypt_create_iv ($size, MCRYPT_DEV_URANDOM)`它，它通常有一个`$size`参数，同时解决你的长度问题。

# c++ - C++中的多级继承

> ID：14543524
> 
> 赞同：0
> 
> 时间：2013-01-27T01:27:11.303
> 
> 标签：c++, oop

假设我有一个基类 A 和类 B 派生自它。B 类的 C 类等等...... Z 类的 Y。

当我实例化类 Z 时，谁将负责初始化类 A 的数据成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:30:09.997

从类继承时，基类的构造函数在派生类之前调用​​。您可以使用初始化列表控制传递给它的内容：

```
struct A
{
    A();
    A(int);
}

struct B
{
    B(){} // A() is called implicitly.
    B(int x) : A(x) {} // A(int) is called explicitly.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:30:45.817

沿着链派生的任何类都可以*负责*初始化数据成员，具体取决于它们的可访问性。

一种常见的方法是让类 A 的构造函数要求数据成员的值。B 类会将这些变量添加到它的构造函数中，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T01:30:50.233

它可以是 A 到 Z 中的任何一个，这完全取决于您的情况。如果 A 类在其构造函数中使用参数 ab 和 c ，则 B 类必须提供这些参数，如果它在其构造函数中又期望 abc 被传递，那么它将由 C 类提供这些等等。子类可能会选择提供一个尚未在构造函数中传递的值，因此后续子类将不再需要提供此值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T01:32:24.067

AFAIK，A 的构造函数将负责 A 的数据成员的初始化，因为类是自上而下构造的，或 Base-before-Derived。这就是为什么您不能在构造函数中使用纯虚成员函数的原因，因为尚未创建定义它的派生类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T01:36:53.337

每个类的每个构造函数都构造所有直接的非虚拟基类。这递归地解释了您的设置中发生的情况。

相比之下，虚拟基类是由最派生类的构造函数构造的。

这是一个明确提到基本构造函数的典型示例：

```
struct A { A(int, int) { /* ... */ ; };

struct B : A { B(char, bool) : A(2, 3) { /* ... */ };

struct C : B { C() : B('x', false) { /* ... */ };

C c;  // calls A::A(2, 3), then B::B('x', false), then C::C() 
```

# ruby - Ruby - 通过对象字段连接对象数组

> ID：14543530
> 
> 赞同：8
> 
> 时间：2013-01-27T01:27:58.877
> 
> 标签：ruby

我有一个对象数组，如下所示：

```
[
    #<name: "value1", field: "field_A">,
    #<name: "value2", field: "field_B">,
    #<name: "value3", field: "field_C">
] 
```

我想作为输出：

```
"value1 value2 value3" 
```

我目前在做什么：

```
variable = ''
array.each { |x| variable << x.name << ' ' } 
```

这很丑陋，而且最后也留下了额外的空间。我的事情 Array::join 是我想要去的地方，但我找不到从中访问对象字段的方法。我应该使用另一种类似于 join 的方法，还是有另一种更明智的方法？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T01:30:09.700

```
array.map(&:name).join(" ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:30:16.187

为了加入`Array`你应该使用的`join`方法。它需要一个可选的分隔符（其默认值是默认值`$,`）`nil`。

```
array.collect(&:name).join ' ' 
```

`&:method`语法只是`{ |x| x.method }`.

# html - 多种尺寸的可扩展 div 网格

> ID：14543535
> 
> 赞同：1
> 
> 时间：2013-01-27T01:29:30.090
> 
> 标签：html, css, scaling

我正在研究一个 4 列的 div 网格，当浏览器大小减小时，所有 div 的大小都会按比例缩小。
问题是我想在网格中有 2 个 div 大小（大和小），即大 div 是 2 列的宽度，而小 div 是一列的宽度。
这是我的代码和我遇到的问题：
HTML：

```
<div id="thumb-wrap">

    <div id="thumb-container-2">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #ffe413;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #8ca4a5;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #f9ded6;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #f57882;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #eaebe6;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #ffe93b;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #f3f3f4;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #003738;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #939597;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #e6e7e0;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #f14e5b;">
            some text
        </div>
    </div>

    <div id="thumb-container">
        <div class="thumb-dummy"></div>
        <div class="thumb-element" style="background-color: #de4d79;">
            some text
        </div>
    </div>  
</div> 
```

CSS：

```
#thumb-wrap {
    position: absolute;
    width: 95%;
    left: 3%;
    top: 40px;
    font-family:'Neuzeit S LT W01 Book', Helvetica, sans-serif;
    font-size: 14px;
    padding-bottom: 150px;
}

#thumb-wrap a {
    opacity: 1.0;
}

#thumb-wrap a:hover {
    opacity: 0.6;
    text-decoration: none;
}

#thumb-container {
    display: inline-block;
    position: relative;
    width: 24%;
    padding-left: 0.5%;
}

#thumb-container-2 {
    display: inline-block;
    position: relative;
    width: 49%;
    padding-left: 0.5%;
}

.thumb-dummy {
    padding-top: 66%;
}

.thumb-element {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    border: 2px solid white;
    padding-top: 19px;
    background: no-repeat 50% 50%;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这里也是一个工作演示 jsfiddle：http: [//jsfiddle.net/jzgSP/](http://jsfiddle.net/jzgSP/)
如您所见，我遇到的问题是，当引入更大的 div 大小时，较小的 div 与底部对齐，而不是所有这些都很好地融入了网格并与页面顶部齐平。
我以前使用过 masonry / isotope 插件，但我不确定它们是否真的与这样的事情相关。我不确定最好的解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:05:42.713

要包装各种 div，您需要浮动它们。我有一个可行的例子，但利润很难。

[http://jsfiddle.net/jzgSP/3/](http://jsfiddle.net/jzgSP/3/)

```
#thumb-container, #thumb-container2 {float: left;} 
```

更新：通过在#thumb-wrap 上使用边距而不是在容器上填充来接近：http: [//jsfiddle.net/jzgSP/4/](http://jsfiddle.net/jzgSP/4/)

再次更新：我在 Firefox 中工作，在设置元素时，让元素 100% 相互清除的唯一方法是使用奇数 div 宽度。我无法确定原因，但我的猜测是边界厚度计算在起作用。

[http://jsfiddle.net/jzgSP/7/](http://jsfiddle.net/jzgSP/7/)

```
#thumb-container {width: 24.01%;}
#thumb-container2 {width: 48%;} 
```

# javascript - 主干.queryparams.js 不能在 IE 上运行

> ID：14543545
> 
> 赞同：0
> 
> 时间：2013-01-27T01:31:13.037
> 
> 标签：javascript, backbone.js, internet-explorer-8

我正在尝试使应用程序在 IE 上运行，一切正常，直到我尝试使用这个主干插件：[https](https://github.com/jhudson8/backbone-query-parameters) ://github.com/jhudson8/backbone-query-parameters 。它在 firefox 或 chrome 上运行良好，但每当我尝试将它与 IE 一起使用时都会引发以下错误：对象不支持此属性或方法行 93 字符

```
rtn.paramNames = paramNames.map(function(name){
          return name.substring(1);
      }
  ); 
```

有没有人想出这个错误或任何方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T10:42:54.220

[本机`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)仅支持 IE9。

要解决您的问题，只需使用[下划线地图](http://underscorejs.org/#map)而不是本机地图：

```
rtn.paramNames = _.map(paramNames, function(name) {
  return name.substring(1);
}); 
```

# haskell - 检查过滤器的结果是否为空列表

> ID：14543551
> 
> 赞同：0
> 
> 时间：2013-01-27T01:32:29.803
> 
> 标签：haskell, higher-order-functions

我们被要求编写一个函数来查看应用过滤器函数的结果是否为空列表。我尝试了以下方法，但它给了我提到的错误。

```
isListEmpty ::((a -> Bool) -> [a] -> [a]) -> Bool
isListEmpty f       | length f == 0 = True
                    | otherwise = False 
```

错误：

```
...- Type error in application
*** Expression     : length f
*** Term           : f
*** Type           : (b -> Bool) -> [b] -> [b]
*** Does not match : [a] 
```

这个想法是练习高阶函数。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:44:05.743

```
isListEmpty ::((a -> Bool) -> [a] -> [a]) -> Bool
isListEmpty f       | length f == 0 = True
                    | otherwise = False 
```

你的函数的第一个参数`isListEmpty`是一个你给它的名字`f`和它的类型的函数，`(a -> Bool) -> [a] -> [a].`你`f`输入`length`这个函数失败了，因为这个函数`length`接受带有签名的`[a]`类型并产生一个 type `Int`。

您可以通过转到 ghci 并键入`:t length`which来查看这一点`[a] -> Int`。

如果您首先将 f 应用于具有类型的列表，`[a]`那么您可以使用`length`and`==0`检查它是否为空。然而，该函数`null`是测试列表是否为空的惯用方法，因此我建议改用它。

编辑添加如何编写类似函数的示例。

假设我想在执行另一个函数（如 drop 或 init 等）之后找到列表的长度。首先只需完整地编写包含所有参数的函数：

```
manipulateList :: ([a] -> [a]) -> [a] -> Int
manipulateList fn lst = length (fn lst) 
```

而不是`length (fn lst)`我们可以用函数组合重写它`(length.fn) lst`

```
manipulateList :: ([a] -> [a]) -> [a] -> Int
manipulateList fn lst = (length.fn) lst 
```

现在您可以像使用代数方程一样取消`lst`两边。

```
manipulateList :: ([a] -> [a]) -> Int
manipulateList fn = (length.fn) 
```

现在我们有一个高阶函数，它接受一个函数`fn`并在`fn`应用于它之后找到列表的长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T01:55:45.703

好像你有错误的类型注释。考虑以下解决方案：

```
isListEmpty :: (a -> Bool)        -- filtering function
            -> [a]                -- given list
            -> Bool               -- the result
isListEmpty f = null . filter f 
```

一些例子：

```
> isListEmpty odd [2, 4]
True
> isListEmpty odd [1, 2, 4]
False
> 
```

使用`length`不是最好的主意，因为您必须遍历整个列表来进行检查，并且列表甚至可以是无限的。`null`可以处理这种情况：

```
> isListEmpty even [1..]
False
> 
```

**编辑 1**：

> 我们的问题要求我们使用内置的过滤器函数作为参数

不太明白它的含义，但您可能想要这样做：

```
isListEmpty :: ([a] -> [a]) -> [a] -> Bool
isListEmpty = (null .) 
```

示例用法：

```
> isListEmpty (filter even) [1..]
False 
```

如果我错了，请提供预期函数调用的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T01:51:57.967

第一：发生错误是因为您将此函数视为只有一个输入，即列表。另一方面，您的类型签名请求一个函数 from `a`to`Bool`和 two`lists of type a.`

第二：您说，您必须编写一个函数，该函数测试应用了过滤器功能的列表是否为空。但是您只测试，如果列表为空，则没有应用您的过滤器功能（您没有（就像我上面描述的那样）甚至对该功能做任何事情。

第三：一点提示：从

```
isListEmpty f xs | length xs == 0 = True
                 | otherwise      = ...  ||  isListEmpty f ... 
```

你必须为`...`. `||`代表布尔“或”，如果你不知道的话。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T01:53:15.837

你可以这样做：

```
null $ (filter (>2) [2,1,0]) ==> True
null $ (filter (>2) [2,1,9]) ==> False 
```

和 ：

```
null :: [a] -> Bool
null [] = True
null _  = False 
```

或者使用 HOF（如前所述，这个解决方案是错误的，我不使用 HOF）

```
hof_null filter 
    | (null $ filter) = True
    | otherwise       = False

not_null (filter (>2) [1,1,3]) ==> False
not_null (filter (>2) [1,1,1]) ==> True 
```

……

最后一次尝试，（感谢 Davorak）

```
hof_null fn = null.fn 
```

# c# - 上下文菜单发送器

> ID：14543552
> 
> 赞同：0
> 
> 时间：2013-01-27T01:32:37.997
> 
> 标签：c#, visual-studio, windows-phone-7, windows-phone-7.1, windows-phone

所以我有一个上下文菜单，当用户点击并按住列表框项目时会出现。我有这段代码可以从被点击的项目中获取值。

```
ListBoxItem contextMenuListItem = (ListBoxItem)(myListBox.ItemContainerGenerator.ContainerFromItem(((MenuItem)sender).DataContext));

string item = (contextMenuListItem).Content.ToString(); 
```

但是变量“item”现在包含被点击的项目的值。我想从项目中获取索引。是否可以？如果是，如何？

我正在使用 Silverlight 工具包中的上下文菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:59:28.133

对于我的第一个 Windows Phone 应用程序（去年），我做了类似你的事情，我使用了 Shawn Kendrot 提议的 MVVM。

我的代码在 GitHub 上。即使它不是非凡的应用程序/代码，也可以随意查看。

[https://github.com/fabmoll/SimpleTodo](https://github.com/fabmoll/SimpleTodo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:27:32.097

你为什么要从列表中删除一个项目`ToString`？这是您要做的：使用，将其绑定到 ListBox，然后在. 绑定纯字符串列表是一个糟糕的坏主意。`ObservableCollection<`*`ModelItem`*`>`[`Remove`](http://msdn.microsoft.com/en-us/library/ms132413.aspx)`((MenuItem)sender).DataContext`

更好的是，采纳 Shawn Kendrot 的建议并以 MVVM 方式做事。当然，现在对您来说可能*看起来很*复杂，但是通过一些工作很容易将您的头脑包裹起来。我已经能够教育非编程的普通人了。如果你会编码，你应该能够学习如何使用 MVVM 模型。

# php - 如果表单未验证，则文档在重定向后过期

> ID：14543553
> 
> 赞同：1
> 
> 时间：2013-01-27T01:34:00.347
> 
> 标签：php, redirect, validation

寻找一些关于这个问题的建议。我碰巧遇到了使用 php 框架 Yii，但似乎更多的是 Web 表单的普遍问题/我对这个概念缺乏理解。

问题：在浏览器上按下后退按钮时，仅当表单出现验证错误时，用户才会收到“文档已过期”。如果在提交之前没有验证错误，则不存在“文档过期”问题（因为重定向）。

以控制器的这个简单的通用示例为例：

```
 public function actionSomething() {
    $model=new ExampleClass;

    if(isset($_POST['ExampleClass'])) {
        $model->attributes=$_POST['ExampleClass'];
        if($model->validate()) {        
            $this->redirect(Yii::app()->createUrl('some/where'));
        } 
    }

    $this->render('_form',array(
    'model'=>$model     
    ));         
} 
```

因此，当验证失败时，表单将与 $_POST 数据一起坐在那里。然后，再次提交数据，验证通过并发生重定向。接下来，当在浏览器上按下后退按钮时，它会在通过验证之前的状态下运行到表单中，并且出现“文档过期”问题。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:21:34.517

我不完全确定您愿意尝试多远或愿意尝试什么——我可能会建议使用会话来存储变量。这样做将允许您在页面刷新期间调用变量的值。

[http://us2.php.net/manual/en/session.examples.basic.php](http://us2.php.net/manual/en/session.examples.basic.php)

这是使用演示的更好链接：http: [//www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

# c++ - 如果对象数组有私有复制构造函数，为什么我不能初始化它们？

> ID：14543554
> 
> 赞同：1
> 
> 时间：2013-01-27T01:34:19.377
> 
> 标签：c++, g++, initialization, copy-constructor

我刚刚在处理 C++ 项目时遇到了一些意想不到且令人沮丧的行为。我的实际代码稍微复杂一些，但下面的示例也可以捕获它：

```
class Irritating
{
    public:  Irritating() {}
    private: Irritating(const Irritating& other) {}
};

const Irritating singleton;                // Works just fine.
const Irritating array[] = {Irritating()}; // Compilation error.

int main()
{
    return 0;
} 
```

尝试编译它会产生以下错误（以防万一抛出 GCC 版本）：

```
[holt@Michaela irritating]$ g++ --version
g++ (GCC) 4.6.3 20120306 (Red Hat 4.6.3-2)
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

[holt@Michaela irritating]$ g++ test.cpp
test.cpp:4:11: error: ‘Irritating::Irritating(const Irritating&)’ is private
test.cpp:8:41: error: within this context
[holt@Michaela irritating]$ 
```

不幸的是，有问题的对象来自外部库，并且不受我的控制。我目前的解决方法是使用指针数组；它有效，但感觉有点hackish，并增加了不必要的间接层。有一个更好的方法吗？

另外：数组是常量和全局的（在实际代码中是类静态的）；为什么它没有被初始化到位？这是预期的 C++ 行为，还是 GCC 的错误/怪癖？

**更新：**安装 Clang 只是为了看看它是否同意 GCC。可悲的是，它做到了：

```
[holt@Michaela irritating]$ clang test.cpp
test.cpp:8:29: warning: C++98 requires an accessible copy constructor for class 'Irritating' when binding a reference to a temporary; was private
      [-Wbind-to-temporary-copy]
const Irritating array[] = {Irritating()};
                            ^
test.cpp:4:11: note: declared private here
        private: Irritating(const Irritating& other) {}
                 ^
test.cpp:8:29: error: calling a private constructor of class 'Irritating'
const Irritating array[] = {Irritating()};
                            ^
test.cpp:4:11: note: declared private here
        private: Irritating(const Irritating& other) {}
                 ^
1 warning and 1 error generated.
[holt@Michaela irritating]$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T01:43:52.757

因为各个数组元素是通过 =语法指定的初始化程序的*复制初始化来初始化的。*`{...}`见 8.5/12 (C++03)

> 在参数传递、函数返回、抛出异常 (15.1)、处理异常 (15.3) 和大括号括起来的初始化列表 (8.5.1) 中发生的初始化称为复制初始化

复制初始化需要复制构造函数（即使它实际上不会使用它）。

实际上，如果您通过公开复制构造函数来编译代码，编译器最终可能会在不使用复制构造函数的情况下初始化您的数组元素。然而，抽象语言的正式规则要求在这种情况下进行复制初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T01:55:05.183

```
class Irritating
{
    public:  Irritating() {}
    private: Irritating(const Irritating& other) {}
};

enum DefaultConstruct { defaultConstruct };

class MaybeTooClever
    : public Irritating
{
public:
    MaybeTooClever( DefaultConstruct = defaultConstruct ) {}
#ifdef __GNUC__
public:
    MaybeTooClever( MaybeTooClever const& other );      // No such.
#else
private:
    MaybeTooClever( MaybeTooClever const& other );      // No such.
#endif
};    

static MaybeTooClever const array[] = { defaultConstruct };

int main()
{} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T02:01:27.947

假设 的复制构造函数`Irritating`被禁用，因为它比通过引用管理它们可能最好：

```
vector<unique_ptr<Irritating>> V = { new Irritating(), ... }; 
```

您可以使用`shared_ptr`而不是`unique_ptr`取决于使用模式。

（如果你可以修改 Irrating 你可以给它一个移动构造函数，看看移动语义）

如果您*真的*希望它们就地构建，那么您可以使用`aligned_storage`它们为它们制作一个存储阵列，然后将它们放置在适当的位置。这将生成与您想要对原始请求执行的操作几乎相同的编译代码，但它有点混乱：

```
aligned_storage <sizeof(Irritating), alignment_of<Irritating>::value>::type data[N];
new ((Irritating*) data+0) Irritating(...);
new ((Irritating*) data+1) Irritating(...);
new ((Irritating*) data+2) Irritating(...);
...
new ((Irritating*) data+N-1) Irritating(...); 
```

（不要忘记在程序退出时放置删除它们。）

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-27T01:41:04.820

尝试只创建一个大小的数组？应该调用默认 ctor。

正如在这个[来源](http://liveworkspace.org/code/1Gty7O%243)

```
struct foo {
   int x;
   foo():x(1) {}
private:
   foo( foo const& ) {}
};

foo array[10];

#include <iostream>
int main() {
   for (auto&& i:array) {
      std::cout << i.x << "\n";
   }
} 
```

`foo`它演示了在没有默认复制构造函数的数组中初始化。

如果您的问题是您实际上想`foo`使用非默认构造函数构造，也可以这样做，但这要困难得多，而且这不是您的问题。无论如何，这里有一个非常非常粗略的草图，描述了创建支持其元素的就位构造的类似数组的结构所需的那种东西。它远未完成或编译，但基本技术应该是健全的：

```
#include <cstddef>
#include <utility>
#include <type_traits>

template<typename... Args>
struct types {};

template<typename types, typename=void>
struct emplacer;

template<typename T>
struct remove_refref {
  typedef T type;
};
template<typename T>
struct remove_refref<T&&> {
  typedef T type; 
};

template<typename A1, typename... Args>
struct emplacer< types<A1, Args...>, void>:
  emplacer< types<Args...> >
{
  typename remove_refref<A1>::type val;
  emplacer( A1 arg, Args... args ):
    emplacer< types<Args...>, index+1 >( std::forward(args)... ),
    val( std::forward(arg) )
  {}
};

template< std::size_t n >
struct extract {
  template< typename A1, typename... Args >
  A1&& from( emplacer<types<A1, Args...>&& e ) {
    return extract<n-1>::from( emplacer<types<Args...>>&&(e) );
  }
};
template<>
struct extract<0> {
  template< typename A1, typename... Args >
  A1&& from( emplacer<types<A1, Args...>&& e ) {
    return std::move( e.val );
  }
};

template<std::size_t... v>
struct seq {};
template<std::size_t n, std::size_t... tail>
struct make_seq: make_seq<n-1, n-1, tail...> {};
template<std::size_t n, std::size_t... tail>
struct make_seq<0, tail...> {
  typedef seq<tail...> type;
  type val() { return type(); }
};
struct nothing {};
template<typename T, typename... Args, std::size_t... indexes>
nothing construct( T* src, emplacer<types<Args...>>&& e, seq<indexes...> s = make_seq< sizeof...(Args) >::val() ) {
  new(src)T( std::move( extract<indexes>( std::move(e) ))... );
}

template<typename... Args>
emplacer< types<Args...> > emplace( Args&&... a ) {
  return emplacer< types<Args...> >( std::forward(a)... );
}

template<typename T, std::size_t n>
struct my_array {
private:
  union T_mem {
    T t;
    char x;
    T_mem():x(0) {}
  };
  T_mem buff[n];
  template<typename... nothings>
  void do_nothing( nothings...&& ) {}
  template<typename... emplacers, std::size_t... indexes>
  my_array( emplacers&&... em, seq<indexes...> s=make_seq< sizeof...(emplacers) >::val() ) {
    do_nothing( construct( &buff[indexes].t, em)... );
  }
  ~my_array() {
    for( auto&& v:buff) {
      v.t.~T();
    }
  }
  T& operator[](std::size_t n) { return buff[n].t; }
  // etc
}; 
```

我们的想法是我们创建一个类似数组的构造，它实际上是一个`union`to`T`和 a的数组`char`。因此，我们避免实际构建我们的`T`, 同时仍然具有适当的对齐方式等。假设`char`没有非平凡对齐，则生成的缓冲区与`T[]`.

然后我们将`emplacer`对象作为构造参数，它们充当任意构造参数的包。出于恼人的原因，这些对象需要创建它们的一些参数的临时副本（我无法弄清楚如何避免生命周期问题......也许我错过了一些东西）。

的构造函数`my_array`接受任意数量的并根据它们的参数`emplacers`继续构造 的内容。`buff`

你会创建你的数组是这样的：

```
my_array< Foo, 10 > arr = {
  emplacer( a, b, c ),
  emplacer( x, y, z ),
  ...
}; 
```

更多的工作将允许在数组中默认构造未初始化的对象。

但这真的，真的很难正确地写出来。

# java - 如何在自定义搜索 API 中使用“dateRestrict”参数

> ID：14543555
> 
> 赞同：6
> 
> 时间：2013-01-27T01:34:19.900
> 
> 标签：java, google-custom-search

我正在尝试修改一些使用 Google API 的 java 代码。我无法获得的功能之一是 dateRestrict。可以在此处找到有关此的信息： [GoogleAPI](https://developers.google.com/custom-search/v1/using_rest#query-params)

为了实现这一点，我在查询后附加了以下字符串。它与完整的 URL 正确连接，因为其他参数可以使用它。

`String parameters = "&dateRestrict=2012-01-01";`

我也尝试过 1d 和 1m 但它们都不能作为参数工作

如果有人可以向我展示 dateRestrict 的示例，我将不胜感激。我只是不明白他们在 API 中使用它的意思。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-27T01:55:20.080

在[使用 REST 调用 API 中](https://developers.google.com/custom-search/v1/using_rest#st_params)，您可以找到有关`dateRestrict`参数的信息。关于参数的注意事项：将结果限制为基于日期的 URL。支持的值包括：

*   d[number]：请求过去指定天数的结果。
*   w[number]：请求过去几周指定数量的结果。
*   m[number]：请求指定过去月份数的结果。
*   y[number]：请求过去指定年数的结果。

对我来说，示例用法应该如下所示：

```
String parameters = "&dateRestrict=d20"; 
```

或者

```
String parameters = "&dateRestrict=y1"; 
```

我认为，您可以使用[此方法使用 APIs Explorer](https://developers.google.com/apis-explorer/#p/customsearch/v1/search.cse.list)来更好地理解此参数。

另见：

*   [寻找有关具有日期限制参数的 Google 自定义搜索 API 的紧急解决方案](http://productforums.google.com/forum/#!msg/customsearch/QoEQco_ejyU/Fhfxw9OPEqAJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-08T17:02:47.207

我正在尝试同样的事情，并且`dateRestrict`在绝对时间范围内似乎不起作用。不在日期范围内的页面也会出现。我发现的解决方法是使用该`sort`功能。查询将如下所示：

```
(q='search_term' , cx='search_engine_id', sort = 'date:r:yyyymmdd:yyyymmdd') 
```

该`sort`功能允许我们将结果的日期排序和过滤到指定的时间范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-12T13:57:52.443

我知道不久前有人问过这个问题，我遇到了同样的问题。

使用`dateRestrict=d1`代替`dateRestrict=d[1]`

文档使这有点令人困惑。`[]`用于将数字显示为占位符。

# c - C语言strstr分段错误

> ID：14543558
> 
> 赞同：3
> 
> 时间：2013-01-27T01:36:01.330
> 
> 标签：c, pointers, segmentation-fault, strstr

我是初学者，tracks.c：

```
#include <stdio.h>
#include <string.h>

char tracks[][5] = {
    "one",
    "two",
    "three",
    "four",
    "five",
    "six",
};

void track_search(char search_for[]) {

    int i;
    puts(search_for);
    puts(strstr(tracks[0], search_for));

    /*
    for (i = 0; i < 6; i++) {
        if (strstr(tracks[i], search_for)) {
            printf("tracks %i: %s\n", i,tracks[i]);
        } else {
            puts("Nothing found");
        }
    }
    */
}

int main() {

    char search_for[5];

    printf("enter your word: ");
    fgets(search_for, 5, stdin);
    track_search(search_for);

    return 0;
} 
```

$ gcc track.c && ./a.out

输入你的话：开

上

分段故障

但是如果我使用 puts(strstr(tracks[0], "on")); 而不是 puts(strstr(tracks[0], search_for)); 可以用酒，有人知道哪里错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:52:44.873

这有几个问题。

首先，您的常量数组未正确声明。

```
char tracks[][5] = {
    "one",
    "two",
    "three",
    "four",
    "five",
    "six",
}; 
```

这表示“声明一个任意长度的数组。*密切*`char[5]`关注该数组内容，并考虑这些字符串的长度实际上是它的字符数**加上零终止符的**1。有什么突然出现在你身上吗？也许是这个词？那将是 5+1，或**六个**字符宽，而不是五个。***`"three"`***

 *****尝试这个：

```
const char *tracks[] = 
{
    "one",
    "two",
    "three",
    "four",
    "five",
    "six"
}; 
```

并像这样修改你的 for 循环：

```
for (i = 0; i < sizeof(tracks)/sizeof(tracks[0]); ++i) 
{
    if (strstr(tracks[i], search_for))
        printf("track[%d]: %s\n", i, tracks[i]);
} 
```

注意：为了我自己的理智，我从循环中提取了多余的“未找到”。

最后，获取的字符串可能会在末尾`'\n'`附加一个行尾 ( )，如果是这样，您应该检查并将其设为空。我会显着延长输入缓冲区的大小，然后修剪 endl（如果存在）：

```
int main()
{
    char search_for[64] = {0};

    printf("enter your word: ");
    if (fgets(search_for, sizeof(search_for), stdin))
    {
        size_t len = strlen(search_for);
        if (len && search_for[len-1] == '\n')
            search_for[len-1] = 0;
        track_search(search_for);
    }
    else
    {
        perror("fgets failed.");
        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T01:45:36.327

这是因为`fgets`读取了换行符，所以`"on\n"`在 中找不到`"one"`，因此`strstr`返回 NULL，如果传递给 ，则会导致分段错误`puts`。

您可能希望在读取输入后首先删除换行符和其他空格，例如将第一次出现的换行符/空格设置为 0，例如

```
char *p;
if(p = strchr(search_for, '\n')) *p = 0;
if(p = strchr(search_for, ' ')) *p = 0; 
```

（对于 也是`char[5]`不够的`"three"`，因为您需要空终止符的额外位置。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T01:49:04.827

有两件事你必须考虑：

如果单词不在列表中，strstr() 返回一个 NULL 指针，你不能将它传递给 puts()，例如

```
 char *found = strstr(tracks[0], search_for);
if (found)
    puts(found);
else
    puts("The word '%s' was not found\n",search_for); 
```

一旦你这样做了，你就会意识到 fgets 也会读取你输入的换行符。因此，如果您输入四个并按回车键，您将搜索“four\n”所以您应该删除那个 \n 字符，例如执行

```
char *p;
if ((p = strrchr(search_for, '\n')) != NULL) {
   *p = 0;
} 
```

使用 fgets 读取输入后。*****

# mysql - 试图将时间值更改为 %r

> ID：14543560
> 
> 赞同：0
> 
> 时间：2013-01-27T01:36:34.010
> 
> 标签：mysql, phpmyadmin, date-format

我是新手，因此不胜感激。我有一个数据库表，其中有一列存储事件时间。我需要将该列的格式更改为上午/下午的时间。我认为 MySQL 说它与 %r 一起使用。我不知道如何通过 phpMyAdmin 做到这一点。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:16:35.400

> ```
> $formatted_date = date("l dS \of F Y h:i:s A", $datevariable_to_beformatted);
> echo $formatted_date
> //A is the modifier for AM/PM, if u want lowercase make it a
> Saturday 26th of January 2006 10:41:22 PM
> 
> $formatted_date = gmdate("l dS \of F Y h:i:s A", $datevariable_to_beformatted);
> echo $formatted_date
> //A is the modifier for AM/PM, if u want lowercase make it a
> Saturday 26th of January 2006 10:41:27 PM
> 
> SELECT date_format(datecolumn, '%W, %M %e, %Y @ %h:%i %p') as formatted_date from date_table
> //%p is the modifier for AM/PM
> 'Saturday, January 26, 2013 @ 10:56 PM' 
> ```

注意：在 mysql 中，日期列将存储为时间戳或日期时间。

# java - 如何使用 Collection.sort() 对集合进行排序

> ID：14543562
> 
> 赞同：1
> 
> 时间：2013-01-27T01:36:45.167
> 
> 标签：java

我正在编写一个存储对象的程序`ArrayList`（`Person`输入来自文本文件）。

这是`Person`该类的代码，我将从以下位置创建`Person`对象：

```
import java.io.Serializable;

public class Person implements Comparable<Person>, Serializable
{
private String firstName;
private String lastName;
private int age;

public Person(String firstName, String lastName, int age)
{
    this.firstName = firstName;
    this.lastName = lastName.toUpperCase();
    this.age = age;
}

public int getAge() 
{
    return age;
}

public String getName()
{
    return firstName;
}

/**
 * @return a String of the details of a person in the format:
 *      Name: <firstName> <lastName> Age: <age>
 */
public String toString()
{       
    return

            "Name: " + firstName + "" + lastName + "\t\t" + "Age: " + age;
}

/**
 * Compare the age of the current instance of Person to another age of the specified Person
 * @return negative number this < p
 * @return 0 if this == p
 * @return positive number if this > p
 */
public int compareTo(Person p) {
          return ((Integer)this.getAge()).compareTo(p.getAge());
} 
```

我创建了一个`Comparable`界面：

```
public interface Comparable<T> {
public int compareTo(T o);
} 
```

这里是调用类的代码`Collection`，它将创建一个`ArrayList`存储`Person`对象，我省略了部分不相关的代码，因为它很长：

```
import java.io.*;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.StringTokenizer;
import java.util.Iterator;

public class Collection
{
private ArrayList<Person> people;

public Collection()
{
    people = new ArrayList<Person>();
}   

public void readFromFile(String filename)
{
    // code that will get input to assign values to fields to a Person

    Person newPerson = new Person(firstNameToken, lastNameToken, ageToken);
}

/**
 * Prints the details of each person held in the people ArrayList
 */
public void printDetails()
{       
    Iterator<Person> it = people.iterator();

        while(it.hasNext())
        {
        Person p = it.next();
        System.out.println(p.toString());
        }
}

public static void main(String [] args) throws FileNotFoundException
{
    Collection c = new Collection(); 

    // check
    //for(Person person : c.people) 
    //{
    //  System.out.println(person);
    //}

    Collections.sort(c.people);
}
} 
```

但是我收到此错误，排序不起作用：

> 线程“main”java.lang.Error 中的异常：未解决的编译问题：绑定不匹配：Collections 类型的泛型方法 sort(List) 不适用于参数 (ArrayList)。推断类型 Person 不是有界参数的有效替代 >

有谁知道为什么？我在谷歌上疯狂地寻找解决方案，我看不到我错过了什么。我已经实现了可比较的..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:50:31.027

> 我创建了一个 Comparable 接口： public interface Comparable { public int compareTo(T o); }

您不应该创建自己的界面。使用[`java.lang.Comparable<T>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)，该`Collections.sort()`方法期望您的对象实现的方法

# jquery - Codeigniter 和 ajax jquery 文件上传

> ID：14543563
> 
> 赞同：0
> 
> 时间：2013-01-27T01:36:49.110
> 
> 标签：jquery, codeigniter, file-upload

我的项目上有这个表格

```
<!--START ELEMENT EXAMPLES  -->
<div class="grid_12">

    <div id="tabs">

        <ul>
            <!-- THESE ARE THE CLICKABLE TAB HEADERS -->

            <li><a href="#tabs-1"><?php echo strtoupper($title); ?></a></li>

        </ul>

        <!-- TAB-1 --> 
        <div id="tabs-1">
            <?php echo form_open_multipart('admin/shop/add_product', 'id="add_product"'); ?>
            <p><label>Nama Produk</label><br/>
                <?php
//                echo form_hidden('kode_produk', $kode_produk);
                $data = array('name' => 'nama_produk', 'class' => 'text medium');
                echo form_input($data);
                ?><br/>
<?php echo form_error('nama_produk'); ?>
            </p>
            <p><label>Deskripsi Produk</label><br/>
                <?php
                $data = array('name' => 'deskripsi', 'class' => 'wysiwyg', 'cols' => 75, 'style' => 'height: 400px;');
                echo form_textarea($data);
                ?><br/>
                <?php echo form_error('deskripsi'); ?>
            </p>
            <p><label>Harga</label><br/>
                <?php
                $data = array('name' => 'harga', 'class' => 'text small');
                echo 'Rp. '.form_input($data);
                ?><br/>
<?php echo form_error('harga'); ?>
            </p>
            <p><label>Stok</label><br/>
                <?php
                $data = array('name' => 'stok', 'class' => 'text small');
                echo form_input($data);
                ?><br/>
<?php echo form_error('stok'); ?>
            </p>
            <p><label>Foto Produk</label><br/>
                <?php
                $data = array('name' => 'foto_produk', 'id' => 'foto_produk');
                echo form_upload($data);
                ?><div id="preview"></div><br/>
<?php echo form_error('foto_produk'); ?>
            </p>
            <p><label>Kategori Produk</label><br/>
                <?php
                echo form_dropdown('id_kategori', $categories, '0', 'class="select"');
                ?><br/>
<?php echo form_error('id_kategori'); ?>
            </p>
            <p><label>Tampilkan di Halaman Publik</label><br/>
                <?php
                echo form_radio('status', 1, TRUE).' Ya '.  form_radio('status', 0, FALSE).' Tidak';
                ?><br/>
<?php echo form_error('status'); ?>
            </p>
            <p>
<?php
$data = array('value' => 'Simpan', 'class' => 'submit');
echo form_submit($data);
?>
                &nbsp;
                <input type="button" value="Batal" class="submit special" onclick="window.location.href='<?php echo site_url(); ?>admin/shop/products'" />
            </p>
<?php echo form_close(); ?>
        </div>   
        <!-- END TAB-1 --> 
    </div>
    <!-- END TABS -->

</div> 
```

我想做的是，我想上传照片/图片

```
<p><label>Foto Produk</label><br/>
                <?php
                $data = array('name' => 'foto_produk', 'id' => 'foto_produk');
                echo form_upload($data);
                ?><div id="preview"></div><br/>
<?php echo form_error('foto_produk'); ?>
            </p> 
```

并通过 id 预览显示上传的照片缩略图，但不先将所有数据保存到数据库。单击提交时，数据将保存到数据库中。应该使用什么插件？jquery表单或jquery上传文件还是什么？以及如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:42:49.620

[http://fineuploader.com/](http://fineuploader.com/)

一个非常干净的带有 PHP 示例的上传库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T01:20:26.947

您可以使用常规的 jQuery .ajax 调用来上传图像并让服务器返回上传文件的路径。成功上传后，jQuery 代码可以调用图像的 url 并显示它。交换基本上是这样的：

jQuery：上传图片 CodeIgniter：如果上传成功，返回上传图片的url和相对路径，否则返回错误。jQuery：如果成功，则根据返回的图像位置信息调用图像以显示图像并将位置信息隐藏在隐藏的表单字段中。如果失败，显示错误信息

提交表单后，您可以传递该图像信息，以便 CodeIgniter 可以拾取它并进行任何进一步的处理（缩略图、将其从上传目录移到永久主页等）。

# internet-explorer - 我应该支持什么版本的IE？

> ID：14543565
> 
> 赞同：3
> 
> 时间：2013-01-27T01:36:56.503
> 
> 标签：internet-explorer, browser, cross-browser

我的 jQuery 代码在旧的 IE 浏览器中不起作用。我应该使我的网站兼容哪个版本？

[这与What version of Internet Explorer (IE) should my web app support](https://stackoverflow.com/questions/2687827/what-version-of-internet-explorer-ie-should-my-web-app-support)几乎相同，但那是 2010 年的版本，我想听听一些新意见。

注意：我故意没有提及它正在使用的 IE 版本，因为我想要一个共同的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T02:16:35.300

根据我的个人经验，我发现大多数家庭用户使用现代浏览器（IE 9、Firefox、Chrome、Safari）。合作用户是一个非常不同的故事。他们通常使用定制的旧版软件来阻止他们使用较新的浏览器。使用 Windows XP的人也[不少（大约 40%）。](http://thenextweb.com/microsoft/2012/09/01/windows-7-finally-overtakes-windows-xp-mac-os-x-overtakes-windows-vista/)这些通常是老用户或懒惰的超级用户。

话虽如此，您的代码针对的是哪些受众？我知道开发人员会使用它，但这是面向企业还是更多基于消费者的网站？

考虑到所有因素，如果您针对公司，我会考虑 IE 6+。鉴于这是[jQuery 官方支持](http://docs.jquery.com/Browser_Compatibility)的，这是最优化的解决方案。但是，添加 IE 6（和 IE 7）兼容性说起来容易做起来难。因此，我个人建议支持 IE 8+（当然还有 Firefox/Chrome/Safari）。如果您想帮助强制用户摆脱过时的（并且可能是易受攻击的浏览器），您可以留下 IE 8 错误并说您只支持 HTML5/CSS3 浏览器。

# objective-c - MKMapView：使用未声明的标识符“ann”？

> ID：14543567
> 
> 赞同：-2
> 
> 时间：2013-01-27T01:37:14.537
> 
> 标签：objective-c, json, mkmapview, identifier

所以我将我的地图视图与 MySQL 数据库中的坐标结合在一起。我想我快到了，但出于某种原因，xcode 不断向我抛出“使用未声明的标识符'ann'”。我到底做错了什么？这是我的代码...

**MapViewAnnotation.h**

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>
#import <CoreLocation/CoreLocation.h>

@interface MapViewAnnotation : NSObject <MKAnnotation> {

    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;

}

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

@end 
```

**MapViewAnnotation.M**

```
#import "MapViewAnnotation.h"

@implementation MapViewAnnotation

@synthesize title, coordinate, subtitle;

-(void)dealloc{
    [title release];
    [super dealloc];
}

@end 
```

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface MapViewController : UIViewController  <MKMapViewDelegate> 

    @property (nonatomic, strong) IBOutlet MKMapView *mapView;
    @property (nonatomic, retain) NSMutableArray *Dispensaries;
    @property (nonatomic, retain) NSMutableData *data;

@end 
```

**MapViewController.m**

```
#import "MapViewController.h"
#import "MapViewAnnotation.h"

@implementation MapViewController
@synthesize mapView;
@synthesize Dispensaries;
@synthesize data;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad {

[super viewDidUnload];

        NSLog(@"Getting Device Locations");

        NSString *hostStr = @"http://stylerepublicmagazine.com/dispensaries.php";
        NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
        NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
        id object = [serverOutput JSONValue];
        NSMutableArray *array = (NSMutableArray *)object;

        for (NSDictionary *dictionary in array) {

            CLLocationCoordinate2D coord = {[[dictionary objectForKey:@"lat"] doubleValue], [[dictionary objectForKey:@"lng"] doubleValue]};

            Annotation *ann = [[Annotation alloc] init];
            ann.title = [dictionary objectForKey:@"Name"];
            ann.coordinate = coord;
            [mapView addAnnotation:point];

    [mapView setMapType:MKMapTypeStandard];
    [mapView setZoomEnabled:YES];
    [mapView setScrollEnabled:YES];

    self.mapView.delegate = self;

}

}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation

{
    MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(userLocation.coordinate, 800, 800);
    [self.mapView setRegion:[self.mapView regionThatFits:region] animated:YES];

MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
point.coordinate = userLocation.coordinate;
point.title = @"You Are Here";
point.subtitle = @"Your current location";

[self.mapView addAnnotation:point];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:56:19.720

所以要修复，只需将类型 Annotation 更改为 MapViewAnnotation，并制作数组药房的名称。

# wordpress - 下拉菜单在 WordPress 中不起作用

> ID：14543568
> 
> 赞同：0
> 
> 时间：2013-01-27T01:37:17.800
> 
> 标签：wordpress

[http://lasvegas.informermg.com/](http://lasvegas.informermg.com/)上的下拉菜单无法正常工作。当我使用 Firebug 删除 element.style 的可见性时，我能够让它工作：隐藏和显示：无；然后菜单起作用。

但是我在任何文件中都找不到编辑它的位置，所以它保持这种状态。尝试了所有 .css 文件和 .php 文件

```
<ul class="sub-menu" style="display: none; visibility: hidden;"> 
```

是不工作时和我放的时候的样子

```
<ul class="sub-menu"> 
```

它工作正常。但是我再次可以找到在哪里进行更改并将其永久设置，因为它的 element.style 我不认为它在 css 中，我查看了 header.php 但这就是它的全部

```
 <div id="menuwrapper">
        <ul class="mainnav dropdown">
            <?php
            if(of_get_option('of_nav1') == 1) { 
                wp_nav_menu( array('theme_location' => 'primary', 'container' => false, 'items_wrap' => '%3$s'));
            } else { ?>
                <li <?php if(is_home() ) { ?>class="current-cat first"<?php } ?>><a href="<?php echo home_url('/'); ?>" title="<?php bloginfo('description'); ?>"><?php _e('Home','snapwire'); ?></a></li>
                <?php wp_list_categories('orderby='. of_get_option('of_order_cats') .'&order='. of_get_option('of_sort_cats') .'&title_li=&exclude='. of_get_option('of_ex_cats'));
                wp_list_pages('sort_column=menu_order&title_li=&exclude='. of_get_option('of_ex_pages'));
            } ?>
        </ul>
    </div> 
```

所以再次没有看到在哪里进行更改。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T15:06:28.237

经过大量的试验和错误，我得出了以下简单的解决方案：

禁用 superfish.js

添加以下样式：

```
.current_page_item  ul {
    display:block;
}

.sub-menu {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:33:21.437

看起来 Superfish 应该负责显示和隐藏菜单，但它坏了（检查你的控制台，你会看到它正在显示`Uncaught TypeError: Cannot read property 'msie' of undefined`）。

它被破坏的原因是因为它依赖于 jQuery's `$.browser`，这在 jQuery 1.9.0 中不可用。（顺便说一下，出于同样的原因，它也破坏了 fancyBox）。

看到[这个帖子](http://www.studiopress.com/forums/topic/superfish-broken-with-jquery-1-9/)有人有同样的问题。推荐的修复包括[jQuery Migrate](http://code.jquery.com/jquery-migrate-1.0.0.min.js)。

如果您不依赖其他地方的 1.9.0 功能，另一种解决方案是使用较低版本的 jQuery。

# python - 如何使用请求和 JSON 打印变量

> ID：14543570
> 
> 赞同：10
> 
> 时间：2013-01-27T01:37:27.903
> 
> 标签：python, json, object, python-requests, nonetype

我一直在编写一个从在线 API 中提取信息的应用程序，我需要一些帮助。

我正在使用请求，我当前的代码如下

```
myData = requests.get('theapiwebsitehere.com/thispartisworking')
myRealData = myData.json()
x = myRealData['data']['playerStatSummaries']['playerStatSummarySet']['maxRating']
print x 
```

然后我得到这个错误

```
myRealData = myData.json()                                                                                                                      
TypeError: 'NoneType' object is not callable 
```

我希望能够获得变量 maxRating，并将其打印出来，但我似乎无法做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-27T02:10:36.293

两件事，首先，确保您使用的是最新版本的`requests`（它的 1.1.0）；在以前的版本`json`中不是方法而是属性。

```
>>> r = requests.get('https://api.github.com/users/burhankhalid')
>>> r.json['name']
u'Burhan Khalid'
>>> requests.__version__
'0.12.1' 
```

在最新版本中：

```
>>> import requests
>>> requests.__version__
'1.1.0'
>>> r = requests.get('https://api.github.com/users/burhankhalid')
>>> r.json()['name']
u'Burhan Khalid'
>>> r.json
<bound method Response.json of <Response [200]>> 
```

但是，您得到的错误是因为您的 URL 没有返回有效的 json，并且您正在尝试调用`None`属性返回的内容：

```
>>> r = requests.get('http://www.google.com/')
>>> r.json # Note, this returns None
>>> r.json()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'NoneType' object is not callable 
```

综上所述：

1.  升级您的`requests`( `pip install -U requests`)版本
2.  确保您的 URL 返回有效的 JSON

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:03:18.753

首先是 myData 实际上返回任何东西吗？

如果是，那么您可以尝试以下操作，而不是使用 .json() 函数

导入 Json 包并在文本上使用 Json 加载功能。

```
import json
newdata = json.loads(myData.text()) 
```

# sqlite - sql查询优化

> ID：14543574
> 
> 赞同：2
> 
> 时间：2013-01-27T01:38:55.393
> 
> 标签：sqlite, query-optimization

我正在尝试优化 SQL 查询。问题是它非常慢！我正在使用 sqlite 和中型数据集（20000row）。我的 sql 语法如下所示：

```
SELECT DISTINCT date(A.last_update) as lastUpdate,
(SELECT COUNT(*) FROM bgp_update AS B WHERE date(B.last_update) = date(A.last_update) AND B.validity = 1) AS valid,
(SELECT COUNT(*) FROM bgp_update AS B WHERE date(B.last_update) = date(A.last_update) AND B.validity = 0) AS invalid,
(SELECT COUNT(*) FROM bgp_update AS B WHERE date(B.last_update) = date(A.last_update) AND B.validity = -1) AS notFound
FROM (SELECT DISTINCT last_update FROM bgp_update ORDER BY last_update) AS A WHERE last_update BETWEEN '%var' and '%var2'; 
```

以下是我拥有的示例：

```
id   |     last_update   |  Validity

48   | 2009-1-6 18:34:38 |  notFound   
47   | 2009-1-6 18:34:38 |  valid   
46   | 2009-1-6 18:34:38 |  valid    
45   | 2009-1-3 18:34:38 |  invalid   
44   | 2009-1-3 18:34:38 |  invalid   
42   | 2009-1-4 18:34:38 |  notFound 
41   | 2009-1-4 18:34:38 |  notFound
48   | 2009-1-4 18:34:38 |  valid 
```

查询结果如下所示：

```
 Date   |  valid   |  invalid   |    notFound

  2009-1-3 |   0      |     2      |       0
  2009-1-4 |   1      |     0      |       2
  2009-1-6 |   2      |     0      |       1 
```

我需要这个来生成一个折线图。例如：[折线图](http://i.stack.imgur.com/yOmVC.jpg)！

但正如我提到的，查询非常慢！我怎样才能让它更快？

:::: 2\. 编辑 :::::

前面的描述我已经简化了问题。我的表创建语句如下所示：

```
CREATE TABLE bgp_update
    (id INTEGER PRIMARY KEY,
    ip VARCHAR(64) NOT NULL,
    mask INTEGER NOT NULL,
    asn INTEGER NOT NULL,
    validity INTEGER NOT NULL,
    last_update TIMESTAMP DEFAULT CURRENT_TIMESTAMP) 
```

如您所见，我的查询仅使用 last_update 和有效性字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:53:55.330

假设日期值采用函数可以理解的[正确格式](http://www.sqlite.org/datatype3.html#datetime)`date`，您可以简单地将要检查的条件相加（因为布尔表达式只返回 0 或 1）：

```
SELECT date(last_update) AS Date,
       sum(validity = 'valid'   ) AS valid,
       sum(validity = 'invalid' ) AS invalid,
       sum(validity = 'notFound') AS notFound
FROM bgp_update
WHERE last_update BETWEEN ? AND ?
GROUP BY date(last_update)
ORDER BY date(last_update) 
```

`last_update`如果您在列上有索引，则此查询将很有效，如果您在and列上有[覆盖索引，则效率更高。](http://www.sqlite.org/queryplanner.html#covidx)`last_update``validity`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T03:05:55.273

您可以使用 sum over case 语句，例如：

```
select last_update,
  sum(case when validity=1 then 1 else 0 end) valid,
  sum(case when validity=0 then 1 else 0 end) invalid,
  sum(case when validity=-1 then 1 else 0 end) notfound
from bgp_update
where last_update between '1/1/2013' and '1/2/2013'
group by last_update
order by last_update 
```

[SQL小提琴](http://sqlfiddle.com/#!5/06705/8/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T02:48:44.330

嵌套子查询有时会使查询效率很低。您可以考虑重写查询，以便它使用连接。

其次，您可以重新排列连接元素，其中记录最少的表最接近查询的开头。这样做将减少 MySQL 必须排序以从其他表中检索行的记录数。

此外，您可能需要考虑在 ID 列和具有您正在查看的特定值的表的列上使用索引。

如果一切都失败了，您可能会发现三个单独的查询可能是最有效的。

# ruby - 这是一个正则表达式错误还是其他东西？

> ID：14543575
> 
> 赞同：1
> 
> 时间：2013-01-27T01:39:12.933
> 
> 标签：ruby, regex

我在玩 Ruby 的 Regexp。我应该找到一个正则表达式技巧，但我不明白，为什么？

```
 p a = "This is a test!".gsub!(//,'X') 
```

上面的输出是

```
 "XTXhXiXsX XiXsX XaX XtXeXsXtX!X" 
```

它在测试字符串中的任何字符之前和之后放置“X”。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:52:56.813

`//`匹配宽度为零的子字符串，即空字符串。在任何相邻字符之间有任意多个空字符串，但该`gsub`族不会在同一位置保持匹配。如果它找到一个匹配项（即本例中的空字符串），那么它将不会在同一位置再次匹配，因此它会继续查找下一个相邻字符之间的空字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:41:20.503

您要求它匹配一个零宽度字符串 ( `//`)，并将其替换为 'X'，所以它做到了。`gsub`扫描字符串并用替换替换每个匹配项（每个字母边界）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T01:44:12.107

您要求它匹配一个空格，因此它匹配字母之间的每个空空格。

它与字母不匹配，因此所有字母都保留了下来。

# php - 每个超链接都没有出现项目符号

> ID：14543579
> 
> 赞同：0
> 
> 时间：2013-01-27T01:40:22.800
> 
> 标签：php, html

我的图像链接每个都假设以项目符号显示。问题是它只为所有图像链接显示一个项目符号，而不是为每个图像链接显示一个项目符号。我在我的 php/html 中做错了什么？

```
<table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="11%" class="image">Image</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
    <?php

                function CreateLink($filename, $type){
 if($type == 'image'){
  return '<a href="previewimage.php?filename='.$filename.'" title="Click to view in New window" target="_blank">'.htmlspecialchars($filename).'</a>';
 }
}

          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        //start:procedure
        $img_result = '';
        if(empty($arrImageFile[$key])){
          $img_result = '&nbsp;';
        }else{
          $img_result .=  '<ul class="qandaul"><li>';
           if(is_array( $arrImageFile[$key] )){
            foreach($arrImageFile[$key] as $filename){
             $img_result.= CreateLink($filename, "image");
            }
           }else{
            $img_result.= CreateLink($arrImageFile[$key], "image");
           }
           $img_result.= '</li></ul>';
        }
        //end:procedure

        echo '<td width="11%" class="imagetd">'.$img_result.'</td>' . PHP_EOL;
        echo '</tr>'.PHP_EOL;

}

?>
    </tbody>
    </table>
    </div> 
```

屏幕截图显示了它现在的样子：

![在此处输入图像描述](../Images/99fe1843135823c7b973d9a1f31cd7fe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:49:10.120

您可能希望每个链接都在`<li>`标签中：

代替：

```
$img_result.= CreateLink($filename, "image"); 
```

和：

```
$img_result.= '<li>' . CreateLink($filename, "image") . '</li>;
// the other places where you use that function as well... 
```

并确保列表仅以`<ul>`标签开头和结尾（不是附加的`<li>`）

# c# - Telerik WPF 控件

> ID：14543580
> 
> 赞同：1
> 
> 时间：2013-01-27T01:40:38.657
> 
> 标签：c#, wpf, telerik, radgridview

我将 Telerik RadGridiew 用于表格 GUI。由于它应该用于任何 MySQL 表，因此表的行和列在编译时是未知的。对于某些列，它们可能是外键，在这种情况下，我想为该列的单元格编辑器使用组合框来允许选择这些外键。但是，Telerik 似乎不支持组合框列的自动生成。那么有什么方法可以让我以某种方式劫持自动生成过程并在某个时候放入组合框列？

谢谢。

# html - 为什么是我的

> ID：14543581
> 
> 赞同：1
> 
> 时间：2013-01-27T01:40:43.330
> 
> 标签：html, css, twitter-bootstrap

所以我一直在尝试这样做大约一个小时，并且我已经用尽了我的知识如何让它发挥作用。我在做一些我看不到的小错误吗？

我的代码：

```
<div class="center">
    <ul class="inline">
        <li>
            <h1>8$:</h1>
        </li>
        <li>
            <h1><small> 512mb</small></h1>
        </li>
    </ul>
</div> 
```

先谢谢了。

（PS我正在使用引导程序）

“中心”的 CSS 代码：

```
.center {
    width: 50%;
    margin: 0px auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:46:21.990

你想要这样吗？

截屏

![](../Images/5e46c913376bce8b91f470a3960f99ed.png)

CSS 代码

```
h1 small {vertical-align: middle;} 
```

小提琴：http: [//jsfiddle.net/praveenscience/jcyam/](http://jsfiddle.net/praveenscience/jcyam/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T01:48:18.467

同时使用 h1 和 small 标签似乎违反直觉。我会使用其中一个。

标签用于标题和/或命名内容的`<H1>`一部分。

`<small>`标签通常用于页脚中的信息，例如联系信息。

我不认为它们应该在任何情况下相互嵌入。尝试其中一种，但不要同时尝试两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T01:46:05.710

这里有几点需要注意。

1.  `h1`您应该在每一页上只有一个标签。

2.  如果您不希望它是您为常规标签设置的大小，您可以随时更改标签`class`的大小。`h1``h1`

例如，您可以这样做：`<h1 class="smallClass">512mb</h1>`

# subdomain - 博客结构如：blog.domain.com（在 Shopify 上）

> ID：14543582
> 
> 赞同：1
> 
> 时间：2013-01-27T01:40:47.183
> 
> 标签：subdomain, blogs, tumblr, shopify

我正在使用 Shopify 建立一个在线商店。我想知道一些网站如何，例如：

[http://www.ksubi.com](http://www.ksubi.com)

[http://www.gamerprint.co.uk](http://www.gamerprint.co.uk)

正在管理他们的博客。显然，他们以某种方式整合了 tumblr 博客，以便它们出现在 blog.domain.com

这是我感兴趣的事情，因为我认为 domain.com/blog/blog 等的 shopify 选项相当不雅。我知道我的偏好在 SEO 方面可能不是最佳的，但我并不真正关心这一点；我不打算让博客将用户吸引到我的商店。

考虑到上述情况，我的问题如下：

1.  这些网站如何在 shopify 上设置明显的子域？（我不能访问 FTP，所以我不能这样做）——（顺便说一句：我已经从我正在使用的 shopify 购买了一个域。）

2.  他们是如何将 tumblr 集成到 blog.domain.com 地址的？

感谢阅读——希望有人能提供帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:25:40.403

来自[Shopify 文档](http://wiki.shopify.com/Register_domain#What_if_I_need_to_change_my_domain_information.3F_.28WHOIS.2C_DNS_setup.2C_etc..29)：

> # 如果我需要更改我的域信息怎么办？（WHOIS、DNS 设置等）#
> 
> Shopify 使用 OpenSRS (Tucows) 进行域注册，并且与 Shopify 集成的一部分是您将获得一个 Web 界面，您可以在其中进一步配置您的域。这些详细信息将在注册域后通过电子邮件发送给您。

因此，听起来该电子邮件中应该包含一些信息，可以将您定向到编辑域注册信息的地方。然后，您可以按照[Tumblr 的说明](http://www.tumblr.com/docs/en/custom_domains)设置子域。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T06:06:32.923

好吧……好像我有这个背对着前面……

如果有人有兴趣，解决方案如下：

“blog.domain.com”之类的地址实际上是 Tumblr 页面，被伪装成 shopify 店面。它们在以下示例中进行了解释：

[http://www.webcrate.co.uk/tumblr/using-a-custom-domain-name-on-tumblr/](http://www.webcrate.co.uk/tumblr/using-a-custom-domain-name-on-tumblr/)

[http://www.tumblr.com/docs/en/custom_domains](http://www.tumblr.com/docs/en/custom_domains)

当然，有问题的 Tumblr 页面需要包含您商店的标题和导航等项目（以便看起来像您商店的一部分），您必须手动添加这些项目，并且无法将您的迷你购物车包含在其中标题或其他地方，因为这是 Shopify 的结束。

如果像我一样，您拥有 Shopify 的域，您应该使用电子邮件信息（在您注册域时收到）来设置托管 Tumblr 博客的子域。即 blog.domain.com 子域。然后你可以使用上面的信息将你的 Tumblr 指向这个页面。

# jquery - 如何仅使用 css 将元素定位在浏览器视口的顶部？

> ID：14543589
> 
> 赞同：0
> 
> 时间：2013-01-27T01:41:38.003
> 
> 标签：jquery, html, css, css-position, viewport

我想要一个绝对定位的元素就在浏览器窗口之外——就在浏览器视口的顶部。请注意，我无法提供指定元素的确切高度。

这可以做到吗？如果没有，使用 jQuery 也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:44:17.387

**CSS：**

```
#theElement {
    position: fixed;
    bottom: 100%;
} 
```

**jQuery：**

```
var $el = $('#theElement');

$el.css({
    position: 'fixed',
    top: '-' + $el.outerHeight()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:46:20.137

如果您的元素处于`body`水平状态，则应该可以：

```
#element {
  position: absolute;
  top: -100%;
} 
```

# ruby-on-rails-3 - 路由问题 Rails

> ID：14543590
> 
> 赞同：1
> 
> 时间：2013-01-27T01:41:54.763
> 
> 标签：ruby-on-rails-3

**我对 Rails 很陌生，我在 posts_controller.rb 中创建了一个方法，其中包含以下内容**

```
def update_feeds 
    Post.get_feeds -- works via console 
    @rss_feedsTab = "/admin/posts"
    redirect_to @rss_feedsTab, :notice => 'Feeds Updated successfully'
end 
```

**并试图通过以下方式使其在我看来着火：**

```
<%= link_to 'Update Feeds', :controller => "posts", :action => "update_feeds", :method=>:post %> 
```

**我得到一个路由错误：**

```
No route matches {:action=>"update_feeds", :method=>:post, :controller=>"admin/posts"} 
```

我真的不明白整个路由是如何工作的，任何帮助将不胜感激:)

**CONTROLLER=发布 rake 路线：**

```
admin_post GET    /admin/posts/:id(.:format)      admin/posts#show
            PUT    /admin/posts/:id(.:format)      admin/posts#update
            DELETE /admin/posts/:id(.:format)      admin/posts#destroy
            GET    /admin/posts(.:format)          admin/posts#index {:collection=>{:update_feeds=>:post}}
            POST   /admin/posts(.:format)          admin/posts#create {:collection=>{:update_feeds=>:post}}
            GET    /admin/posts/new(.:format)      admin/posts#new {:collection=>{:update_feeds=>:post}}
            GET    /admin/posts/:id/edit(.:format) admin/posts#edit {:collection=>{:update_feeds=>:post}}
            GET    /admin/posts/:id(.:format)      admin/posts#show {:collection=>{:update_feeds=>:post}}
            PUT    /admin/posts/:id(.:format)      admin/posts#update {:collection=>{:update_feeds=>:post}}
            DELETE /admin/posts/:id(.:format)      admin/posts#destroy {:collection=>{:update_feeds=>:post}} 
```

**路线.rb**

```
namespace :admin do

   resources :users,:videos,:posts,:links,:rss_feeds

   resources :posts, :collection => {:update_feeds => :post}

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:48:37.337

我认为您最好在这里注意两件事：

1) 控制器中方法的名称必须与视图的名称匹配。这是 Rails 的约定之一。例如，（简称）`index`中的方法会自动查找名为 的视图。`posts_controller.rb``posts#index``posts/index.html.erb`

2）此外，您的路线确定您应该为控制器方法（也称为控制器操作）使用哪些名称。这些名称基于 HTTP 动词（index、new、create、edit、update、show、destroy）。因此，控制器动作也不是随机命名的。我建议您从路线中列出的现有操作之一开始工作。

Rails 确实允许您使用所需的名称轻松地创建自己的操作，但您可能应该首先遵循约定，然后才尝试开始自定义事物。

您收到的特定错误消息意味着没有与您刚刚创建的控制器操作关联的路由。正如我所说，创建控制器操作涉及创建关联的视图和路由——这就是为什么我现在不鼓励你这样做。从路线开始，看看你有哪些路线，然后从那里出发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:54:06.757

路由将 URL 路径与控制器操作相匹配。逻辑如下：

1.  用户导航到[http://your.domain.com/some/path](http://your.domain.com/some/path)
2.  你`routes.rb`话里有话`get '/some/path', to: posts#update_feeds`
3.  因为用户导航到 /some/path，所以 PostsController 中的 update_feeds 操作被执行。
4.  控制器操作通常要么将用户重定向到另一个路径（或域外部的 URL），要么呈现一些内容。

您遇到的问题是您需要链接到 URL 或路径，即作为标记值`link_to`有意义的东西。Rails 有时会为您提供路线助手，这只是一种方便。它们允许您说出类似而不是. 在您的中，您的操作似乎没有一个命名良好的路径。`href``a``admin_post_path(3)``/admins/post/3``rake routes``update_feeds`

改变你`routes.rb`有这样的东西：

```
resources :posts do
    collection do
        post :update_feeds
    end
end 
```

这会将 /posts/update_feeds 路由到适当的控制器和操作，并为您提供路由助手，以便您可以更改`link_to`为：

```
<%= link_to 'Update Feeds', update_feeds_posts_path, method: :post %> 
```

# svn - 保留 SVN 修订号

> ID：14543592
> 
> 赞同：0
> 
> 时间：2013-01-27T01:42:57.050
> 
> 标签：svn, revision, preserve

我是 svn 的新手，所以这可能是一个非常简单的任务。

我的供应商代码使用 svn 进行版本控制。我也将在内部使用 svn，但我想知道是否可以通过保留版本号将代码移动到我的 svn 存储库中。我有一个内部问题日志跟踪工具，它使用版本号来引用修复的问题/票证。

如果您可以提供如何执行此操作的愚蠢步骤（如果可能），那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:22:49.307

您不能以您描述的方式“合并”您的存储库和供应商的存储库。您所描述的是在 Subversion 用语中所谓的[供应商分支。](http://svnbook.red-bean.com/en/1.7/svn.advanced.vendorbr.html)简而言之，您可以执行以下操作：

*   使用您当前拥有的内容（供应商代码 + 您的自定义）“播种”存储库。为便于说明，将此称为“主干”。
*   将供应商代码的每个版本加载到存储库中的分支中
*   将当前版本和上一个版本之间的更改合并到您的主干中
*   处理任何合并冲突

# javascript - Crypto++ 低级 AES API (a la SJCL)

> ID：14543596
> 
> 赞同：0
> 
> 时间：2013-01-27T01:43:28.583
> 
> 标签：javascript, c++, encryption, aes, crypto++

我正在尝试从 javascript 实现对协议进行逆向工程，但我被困在 AES 加密方法上。我在 C++ 中使用 Crypto++ 库对此进行编程。它使用 SJCL 库，并调用`ciphertext = (new sjcl.cipher.aes(key)).encrypt(plaintext)`. 从 SJCL 文档中，我可以看到这是一个低级接口。`ciphertext`, `key`, 和`plaintext`都是 32 位整数的 4 元素数组。据我所知，并且可以在谷歌上找到，Crypto++ 只提供高级接口。有没有办法让 Crypto++ 做 SJCL 正在做的事情？另外，该方法究竟是`encrypt`做什么的？

[http://bitwiseshiftleft.github.com/sjcl/doc/symbols/sjcl.cipher.aes.html](http://bitwiseshiftleft.github.com/sjcl/doc/symbols/sjcl.cipher.aes.html)

编辑：我注意到javascript代码`plantext`从字符串转换为整数，我想我尝试了改变每个变量的字节顺序的每一种组合。无论如何，我尝试了所有有意义的组合。我还尝试创建`int32_t`'s 的数组并使用输入到该行 javascript 中的内容对其进行初始化。这是我现在得到的：

```
void crypto()
{
    SecByteBlock key(16);
    int32_t plain[4] = { 0x93C467E3, 0x7DB0C7A4, 0xD1BE3F81, 0x0152CB56 }, cipher[4];
    int32_t* keyBuf = (int32_t*) key.BytePtr();

    keyBuf[0] = 1885434739;
    keyBuf[1] = 2003792484;
    keyBuf[2] = 0;
    keyBuf[3] = 0;

    cout << "plain = [" << plain[0] << ", " << plain[1] << ", " << plain[2] << ", " << plain[3] << "]\n";

    cout << "key = [" << keyBuf[0] << ", " << keyBuf[1] << ", " << keyBuf[2] << ", " << keyBuf[3] << "]\n";

    ECB_Mode<AES>::Encryption e;
    e.SetKey(key, key.size());

    StringSource((const byte*) plain, 16, true, new StreamTransformationFilter( e, new ArraySink((byte*)cipher, 16) ) );

    cout << "cipher = [" << cipher[0] << ", " << cipher[1] << ", " << cipher[2] << ", " << cipher[3] << "]\n";

}

function crypto()
{
    var key = [1885434739, 2003792484, 1885434739, 2003792484];
    var plain = [0x93C467E3,0x7DB0C7A4,0xD1BE3F81,0x0152CB56];
    console.log("plain = "+plain);
    console.log("key = "+key);
    var cipher = (new sjcl.cipher.aes(key)).encrypt(plain);
    console.log("cipher = "+cipher);
} 
```

这是 C++ 版本的输出：

```
plain = [2479122403, 2108737444, 3518906241, 22203222]
key = [1885434739, 2003792484, 1885434739, 2003792484]
cipher = [3437909595, 1341853431, 2532744872, 2416113380] 
```

和 JavaScript：

```
plain = 2479122403,2108737444,3518906241,22203222
key = 1885434739,2003792484,1885434739,2003792484
cipher = -1974659585,-1567997661,-1863224381,-318378846 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T17:09:18.153

是的，您应该使用整数作为字节数组的大端表示。所以最高字节应该在左边。然后你得到 128 位 AES 的 16 字节输入/输出。您可以在 ECB 模式下使用 Crypto++ 或其他更高级别的加密库来执行块加密/解密。

请注意，SJCL`aes`类仅实现原语。它在 SJCL 中用作[ccm](http://bitwiseshiftleft.github.com/sjcl/doc/symbols/sjcl.mode.ccm.html)或[ocb2](http://bitwiseshiftleft.github.com/sjcl/doc/symbols/sjcl.mode.ocb2.html)加密模式之一的实现。这些模式反过来被便利库使用，但是 - 如果我没记错的话 - 直接使用 JSON 编码/解码，这对你来说可能是一个太远的步骤。

# php - 解析 URL：从字符串中删除一个字符

> ID：14543598
> 
> 赞同：1
> 
> 时间：2013-01-27T01:43:46.813
> 
> 标签：php

我目前正在尝试使用`parse_url`. 我的目标是每次在链接中包含以下字符`&p`（按该顺序）时解析链接。在决定是否解析链接之前`if statement`，是否可以检查这些字符。`url`例如，如果链接具有字符`&p`（按该顺序），那么它将解析链接并格式化为我想要的选择。我已经能够计算出解析部分，但我将如何检查这些字符`&p`（按该顺序）？如果您看到下面的示例，我只想`&`从链接中删除。

```
if($url == '&p' ) // not sure how to check
{
$parsed_url = parse_url($url);
$fragment = $parsed_url['fragment'];
$fragment_parts = explode('/', $fragment);
$formatted_url = array_pop('http://www.website.com?p=$1',$url);
}
else    
{   
// do something else
} 
```

**例子：**

输入：`http://www.website.com?&p=107`

输出：`'http://www.website.com?p=107`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T01:51:21.593

您可以使用[str_replace 函数](http://php.net/manual/en/function.str-replace.php)将此`&p`字符串替换为`p`.

```
$url = "http://www.website.com?&p=107";
$url = str_replace("&p", "p", $url);
echo $url; // will print http://www.website.com?p=107 
```

[在这里测试](http://3v4l.org/dZHDp)

对于更复杂的文本处理，您可以使用`preg_replace()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:26:16.017

如果您只需要检查 url 是否有 ?&p 只需使用[strpos](http://php.net/manual/en/function.strpos.php)：

```
<?php
if(strpos($url, '?&p') !== false) {
//your magic
}
?> 
```

否则，如果您尝试处理错误的请求，您可以执行以下操作：

```
<?php
$url = $_SERVER['REQUEST_URI']; // will have the /?&p=123
if(strpos($url, '?&p') !== false) {
    $url = str_replace("&p", "p", $url); // now you've only got ?p=123
    //then do what ever you like 
    //redirect to the appropriate URL or you can set the $_GET['p'] e.g.
    header("Location: /".$url);
    //or
    $parsed = parse_str($url, $get);
    $_GET['p'] = $get['?p'];
}
?> 
```

# file - 如何更改通过 explorer.exe 选择打开文件的默认程序打开 .rar 文件？

> ID：14543602
> 
> 赞同：0
> 
> 时间：2013-01-27T01:44:03.773
> 
> 标签：file, explorer, rar

在选择程序打开文件中选择时，我尝试使用 explorer.exe 的窗口资源管理器打开 .rar 文件。之后，我无法通过 rar 程序打开此文件，也不要更改为此文件打开的程序。如何恢复默认打开的程序文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T13:05:41.237

是的，你可以做到。。

请按照以下步骤操作

1.  通过单击开始按钮打开默认程序，或转到控制面板->默认程序->

2.  单击将文件类型或协议与程序关联。或者只需在控制面板窗口中键入 url Control Panel\Programs\Default Programs\Set Associations。

3.向下滚动并选择我们要恢复默认打开程序的类型Rar。

1.  单击更改程序。

2.  单击应该用作默认程序的程序 Rar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-08T23:44:10.220

转到默认应用程序/设置，向下滚动到底部并选择“重置”，这应该会将目录返回到推荐的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T19:07:09.790

只需在开始菜单中搜索“默认”，然后单击“设置默认程序”。单击 WinRAR 或您要使用的软件。单击“选择此程序的默认值”并检查 .rar 文件。

# php - WAMP，在 $_SERVER["SERVER_NAME"] 上获得未定义的索引

> ID：14543606
> 
> 赞同：1
> 
> 时间：2013-01-27T01:44:27.327
> 
> 标签：php, url-rewriting, aptana, wamp, xdebug

我正在使用 xdebug 和 Aptana 进行调试，当 xdebug 达到这一点时：

```
 if ($_SERVER["SERVER_PORT"] != "80") {
  $url = $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $url = $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 } 
```

我得到：

```
Error: [8] Undefined index: SERVER_PORT 
```

这是 WAMP 中的一些配置问题吗？还是问题出在 xdebug 上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T14:54:06.577

这不是 Xdebug 导致的，而是您的 PHP 安装。PHP 基本上告诉你 $_SERVER 变量不存在。正如评论已经说过的那样，那是因为您没有在网络服务器环境中运行。您需要通过您的 Web 服务器进行调试才能使其正常工作 - 但我不确定 Aptana 是否可以做到这一点。

# javascript - 类作为JS中的回调？

> ID：14543609
> 
> 赞同：0
> 
> 时间：2013-01-27T01:45:30.383
> 
> 标签：javascript, class

我需要做 3 件事。

```
$('#blah').click(TheFunc);

if(cond)
    TheFunc.Call($('#blah').get(0)) //adds a this object to the function call

$('#thing').click(function() {
    TheFunc.IsItInAReadyState() 
```

我不完全是如何把它变成一门课的。我想 A) 将它用于可以使用`this`. 对它使用 .call 以便我可以输入它`this`并最终访问其中的一个函数，以查看该函数是否完成了所有内部回调并处理了所有需要的数据等。

我有一些全局变量，我不想这就是为什么我想将所有数据包装在一个类中。问题主要是有很多回调，这就是我需要第三次使用的原因。前两个只是开始处理。

# php - 用 preg_replace() 删除“@something”

> ID：14543611
> 
> 赞同：0
> 
> 时间：2013-01-27T01:45:40.257
> 
> 标签：php, regex

[在此处](https://stackoverflow.com/questions/3303184/how-to-remove-email-addresses-and-links-from-a-string-in-php)的堆栈溢出问题中，解释说您可以使用以下代码删除电子邮件：

```
$pattern = "/[^@\s]*@[^@\s]*\.[^@\s]*/";
$replacement = "[removed]";
preg_replace($pattern, $replacement, $string); 
```

这会删除 johndoe@gmail.com 之类的内容 - 如何修改正则表达式以便从一大段文本中删除 @johnDoe 之类的内容？

我真的不太了解正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:50:08.570

利用

```
$pattern = "/@[^@\s]*/"; 
```

* * *

在`[^@\s]`：

*   `\s`代表任何空格字符
*   `[@\s]`代表一个字符组，包含`\s`（即空格）和`@`字符。它匹配`@`或`\s`
*   `[^@\s]`代表*不是的字符组* `@\s`
*   毕竟，`[^@\s]`匹配不是`@`字符或`\s`（即空格）的单个字符

`*`在它代表前一个令牌之后（即`[^@\s]`此处）可以重复零次或多次。因此，`[^@\s]*`匹配任意长度的字符串，只要它不包含`@`或`\s`

* * *

作为旁注，您的链接为匹配电子邮件提供了一个非常简化的正则表达式。[匹配电子邮件的完美方式绝非易事。](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

# python - 使用 mingus python 模块的有限声音输出

> ID：14543615
> 
> 赞同：2
> 
> 时间：2013-01-27T01:45:50.837
> 
> 标签：python, ubuntu, musicxml

我正在尝试使用 python (2.7) 包 mingus (0.4.2.3，pypi 中的最新版本) 来解析 musicxml 文档并将其转换为 midi 输出。我遇到了从源代码运行 midi_file_out.py 的障碍：

```
if __name__ == '__main__':
from mingus.containers.NoteContainer import NoteContainer
from mingus.containers.Bar import Bar
from mingus.containers.Track import Track
from mingus.containers.Instrument import MidiInstrument
b = Bar()
b2 = Bar('Ab', (3, 4))
n = NoteContainer(['A', 'C', 'E'])
t = Track()
b + n
b + []
b + n
b + n
b2 + n
b2 + n
b2 + []
t + b
t + b
m = MidiInstrument()
m.instrument_nr = 13
t.instrument = m
t.name = 'Track Name Test'
write_NoteContainer('test.mid', n)
write_Bar('test2.mid', b)
write_Bar('test3.mid', b, 200)
write_Bar('test4.mid', b2, 200, 2)
write_Track('test5.mid', t, 120) 
```

生成了五个 .mid 文件，但是当我播放它们时，只有 test5.mid 产生任何声音。其他四个有持续时间和播放发生但不产生声音。操作系统是 Ubuntu 12.0.4.1。考虑让所有文件都能播放吗？我是否缺少其他包裹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:56:23.863

似乎问题出在我的媒体播放器上，而不是代码本身。使用胆怯，文件播放得非常好。我正在使用图腾，它似乎缺少一些用于 MIDI 播放的插件/乐器。

[来自 askubuntu.com 的解决方案](https://askubuntu.com/questions/46349/not-all-mid-midi-files-working)

# javascript - JQuery ContextMenu 强制下拉

> ID：14543620
> 
> 赞同：1
> 
> 时间：2013-01-27T01:46:15.753
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 JQuery ContextMenu：[http](http://medialize.github.com/jQuery-contextMenu/index.html) ://medialize.github.com/jQuery-contextMenu/index.html 我正面临位置问题，我在论坛中搜索，但找不到我需要的东西，所以这里是：

有时我的菜单会充满大量数据，所以有时它会向上打开并且大部分列表都会消失。

我尝试了这个解决方案：[jQuery ContextMenu DropDown](https://stackoverflow.com/questions/13998244/jquery-contextmenu-dropdown)它对我不起作用，因为我也尝试解决答案但仍然没有用。

我想强制它从我的点击位置开始向下打开。

这是代码：

```
$.contextMenu({
                selector: '#vis',
                trigger: 'left',
                build: function($trigger, e) {
                     var options = { 
                        callback: function(key, options) {
                            var m = "clicked: " + key;
                            //window.console && console.log(m) || alert(m);
                            if(key!="quit")
                            {
                                SearchAddTweets(d,key);
                            }
                            else
                            {
                                $('#vis').contextMenu(false);
                            }
                        },
                        items: {disabled: false}
                    };
                    options.items["Date"] = {
                        name: d
                    };
                    options.items.sep1 = "---------";
                    $.each(BigWordsDates[d], function(k, v) {
                        for(var prop = 0; prop < OriginalTweets.length; prop++)
                        {
                            if(OriginalTweets[prop][0]!=null)
                            { 
                                if(OriginalTweets[prop][1].search(d)>=0 && OriginalTweets[prop][0].search(k)>=0)
                                {
                                     options.items[k] = {
                                        name: "Trend: "+k+", Freq:"+v
                                    };                                
                                }
                            }                            
                        }

                    });

                    options.items.sep1 = "---------";
                    options.items.quit = {
                        name: "Quit"
                    };

                    if(t>=100)
                    {
                         e.pageX=e.pageX;
                         e.pageY += 100;
                    }

                    return options;
                }
            }); 
```

# android - 在代码中点击 SmartWatch 屏幕

> ID：14543624
> 
> 赞同：0
> 
> 时间：2013-01-27T01:46:29.807
> 
> 标签：android, sony, sony-smartwatch

当我触摸 SmartWatch 屏幕时，它会从暗淡状态中唤醒。我怎样才能在代码中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:30:00.060

参考SmartExtension SDK自带的“SmartExtension API规范”文档6.2节：

> 实现控制 API 的扩展也可以控制附件显示的状态。可以通过 CONTROL_SET_SCREEN_STATE_INTENT 控制显示。
> 
> 作为 Intent 的一部分，您还需要指定要设置的状态。以下选项可用：
> * SCREEN_STATE_OFF
> * SCREEN_STATE_DIM
> * SCREEN_STATE_ON
> * SCREEN_STATE_AUTO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:45:07.050

[迈克尔所说的是正确的，并且在此线程](https://stackoverflow.com/questions/12930838/deactivate-the-standby-mode-in-the-smartwatch)中也说过（如您所知：）。当您将屏幕状态设置为 AUTO 时，屏幕状态将由 SmartWatch 自己处理。在这种状态下，当屏幕完全变暗时，您将不会获得触摸事件到您的扩展。相反，您会接到`onResume`.

所以，为了实现你想要的，我认为你需要创建一个状态机来处理状态 ON、OFF 和 DIM，并将 AUTO 排除在外。

# regex - 从字符串向量中提取数字

> ID：14543627
> 
> 赞同：134
> 
> 时间：2013-01-27T01:47:43.143
> 
> 标签：regex, r

我有这样的字符串：

```
years<-c("20 years old", "1 years old") 
```

我只想从这个向量中提取数字。预期输出是一个向量：

```
c(20, 1) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-27T01:51:05.320

怎么样

```
# pattern is by finding a set of numbers in the start and capturing them
as.numeric(gsub("([0-9]+).*$", "\\1", years)) 
```

或者

```
# pattern is to just remove _years_old
as.numeric(gsub(" years old", "", years)) 
```

或者

```
# split by space, get the element in first index
as.numeric(sapply(strsplit(years, " "), "[[", 1)) 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2016-08-02T05:23:36.470

**更新** 由于`extract_numeric`已弃用，我们可以`parse_number`从`readr`包中使用。

```
library(readr)
parse_number(years) 
```

这是另一种选择`extract_numeric`

```
library(tidyr)
extract_numeric(years)
#[1] 20  1 
```

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2013-01-27T04:31:15.833

我认为替代是解决问题的一种间接方式。如果您想检索所有数字，我建议`gregexpr`：

```
matches <- regmatches(years, gregexpr("[[:digit:]]+", years))
as.numeric(unlist(matches)) 
```

如果您在一个字符串中有多个匹配项，这将获得所有匹配项。如果您只对第一场比赛感兴趣，请使用`regexpr`而不是，`gregexpr`您可以跳过`unlist`.

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2013-01-27T02:04:55.740

这是 Arun 的第一个解决方案的替代方案，具有更简单的类似 Perl 的正则表达式：

```
as.numeric(gsub("[^\\d]+", "", years, perl=TRUE)) 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2016-07-11T22:34:32.577

或者简单地说：

```
as.numeric(gsub("\\D", "", years))
# [1] 20  1 
```

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2016-10-01T12:55:12.213

`stringr`流水线解决方案：

```
library(stringr)
years %>% str_match_all("[0-9]+") %>% unlist %>% as.numeric 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2013-01-27T02:27:38.933

你也可以去掉所有的字母：

```
as.numeric(gsub("[[:alpha:]]", "", years)) 
```

不过，这可能不太普遍。

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2019-08-28T06:14:16.963

我们也可以使用`str_extract`from`stringr`

```
years<-c("20 years old", "1 years old")
as.integer(stringr::str_extract(years, "\\d+"))
#[1] 20  1 
```

如果字符串中有多个数字并且我们想提取所有数字，我们可以使用`str_extract_all`which `str_extract`distinct 返回所有的 macthes。

```
years<-c("20 years old and 21", "1 years old")
stringr::str_extract(years, "\\d+")
#[1] "20"  "1"

stringr::str_extract_all(years, "\\d+")

#[[1]]
#[1] "20" "21"

#[[2]]
#[1] "1" 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-12-24T05:47:06.637

从开始位置的任何字符串中提取数字。

```
x <- gregexpr("^[0-9]+", years)  # Numbers with any number of digits
x2 <- as.numeric(unlist(regmatches(years, x))) 
```

从任何位置的字符串INDEPENDENT中提取数字。

```
x <- gregexpr("[0-9]+", years)  # Numbers with any number of digits
x2 <- as.numeric(unlist(regmatches(years, x))) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2019-11-06T12:08:42.387

使用*unglue*包我们可以做到：

```
# install.packages("unglue")
library(unglue)

years<-c("20 years old", "1 years old")
unglue_vec(years, "{x} years old", convert = TRUE)
#> [1] 20  1 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2019-11-06 创建)

更多信息：[https ://github.com/moodymudskipper/unglue/blob/master/README.md](https://github.com/moodymudskipper/unglue/blob/master/README.md)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-04-27T19:50:45.277

在**Gabor Grothendieck** [在 r-help 邮件列表中发帖之后](https://stat.ethz.ch/pipermail/r-help/2013-June/355435.html)

```
years<-c("20 years old", "1 years old")

library(gsubfn)
pat <- "[-+.e0-9]*\\d"
sapply(years, function(x) strapply(x, pat, as.numeric)[[1]]) 
```

# php - PHP替换api url模式中的参数

> ID：14543630
> 
> 赞同：0
> 
> 时间：2013-01-27T01:48:21.133
> 
> 标签：php, url, printf

我有一些带有参数的 api 模式 url：

`http://api.example.com/{type}/{function}?{parameters}&lang={lang}&authkey={authkey}&username={username}`

将参数替换为值的最佳方法是什么，也许有一些魔术类？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:08:40.233

我认为你不需要为这样的简单任务使用魔法。

只需用`str_replace`一些变量值替换“{function}”（在那个“模板”中）。

对于可以是多个的 {parameters}，您可以编写一个小函数，将这些参数放入一个变量中，然后像这样：`&param_1=value1&param_2=value2`从这样的数组：`$parameters = array("param_1" => "value 1", "param_2 => "value 2");`

也许**是**这样的：

```
function parameters_to_str($params)
{
    foreach(with keys as parameter names)
    {
        $ret_val = $ret_val."&".$key."=".$value;
    }

    return $ret_val;
}

... etc. 
```

我希望你能明白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:18:22.720

您可以 str_replace 在数组中。

```
$end_point = 'http://api.example.com/{type}/{function}?{parameters}&lang={lang}&authkey={authkey}&username={username}';

$tokens = array(
  '{type}',
  '{function}',
  '{lang}',
  '{authkey}',
  '{username}',
);
$values = array(
  'typeval',
  'func_name',
  'en-US',
  'abra-kadabra',
  'parrotlover',
);

if (count($tokens) == count($values)) { // just to make sure every item is present. Not necessary.
  $end_point = str_replace($tokens, $values, $end_point);
} 
```

# php - php中的相对文件路径

> ID：14543631
> 
> 赞同：1
> 
> 时间：2013-01-27T01:48:26.927
> 
> 标签：php, apache, windows-7, xampp

简短版本：
相对路径如何在 php 中工作？

长版：
我有一个本地网站 ( **[http://test.com](http://test.com)** ) 并且`E:\test\` 是它的文档根目录。这是我的目录树：

1.  E:\test\001.php
2.  E:\test\exit.php
3.  E:\test\death.txt
4.  E:\test\mysql\first.php
5.  E:\test\mysql\death.txt
6.  E:\test\mysql\exit.php

和文件内容：

E:\test\001.php

```
<?php

include('mysql/first.php');

?> 
```

E:\test\exit.php

```
<?php
die('What?');
?> 
```

E:\test\death.txt

```
Bonjour 
```

E:\test\mysql\first.php

```
<?php
echo file_get_contents('death.txt');
include('exit.php');
?> 
```

E:\test\mysql\death.txt

```
Hello there 
```

E:\test\mysql\exit.php

```
<?php
die('DONE');
?> 
```

如果我浏览`http://test.com/001.php` 并存在，我会得到这个`E:\test\exit.php`：`E:\test\death.txt`

```
BonjourWhat? 
```

如果它们不存在：

```
Warning: file_get_contents(death.txt) [function.file-get-contents]: failed to open stream: No such file or directory in E:\test\mysql\first.php on line 2
DONE 
```

相对路径如何在 php 中工作？我认为它应该给我两个文件的警告或显示正确的输出！
我正在使用 XAMPP、php 5.3 在 Win7 x64 上测试此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:59:08.757

php.net 上的文档是这样描述 PHP`include`搜索机制的：

1.  首先，它将查看 include_path： http: [//php.net/manual/en/ini.core.php#ini.include-path](http://php.net/manual/en/ini.core.php#ini.include-path)。
2.  然后，如果在 include_path 中找不到任何内容，它将尝试将文件加载到调用脚本自己的目录中。（在我们的例子中，根目录）
3.  最后，如果一切都失败了，它将尝试在当前目录中查找文件。

当我运行你的脚本时，我的包含路径`.:`默认设置为（当前目录，没有别的），所以当我尝试加载`death.txt`并`exit.php`从中`mysql/first.php`搜索时，应该在`./`当前目录的文件夹中搜索。但是......**它没有**。当前目录应该是`mysql/`但它没有指向那里......那么这里发生了什么？

PHP 在这方面很特别……让我们回滚到我们所做的第一条语句。PHP在我们`include path`使用的时候解释的`.`是什么，实际上又是一个路径解析！所以，看看我们的路径，我们有`.`哪些不能被解释（`./.`再次？）使用我们的 include_path 的任何东西。然后，PHP 必须转到第二个路径解析 (2)，它是我们脚本的根目录。（你有头疼了吗？因为我有）

使用`get_include_path()`并且`realpath()`您可以观察到这一点：

```
Included path: '.:'
Including mysql/first.php: /Users/Kouno/Development/SandBox/test-php/mysql/first.php
This is what `realpath` returns for './': /Users/Kouno/Development/SandBox/test-php
Getting content of death.txt: /Users/Kouno/Development/SandBox/test-php/death.txt
Bonjour
Including exit.php: /Users/Kouno/Development/SandBox/test-php/exit.php
What? 
```

那么，为什么一旦你从根目录中删除它，它仍然无法加载`mysql/death.txt`但仍然 find ？它应该找到他们两个，对吧？`mysql/exit.php``death.txt``exit.php`

嗯，这是因为`get_file_content`有第二个参数`include_path`默认忽略。

如果设置第二个参数：

```
echo file_get_contents('death.txt', FILE_USE_INCLUDE_PATH); 
```

然后你会得到预期的结果。

```
Included path: '.:'
Including mysql/first.php: /Users/Kouno/Development/SandBox/test-php/mysql/first.php
Getting content of death.txt: (no path returned)
Hello there
Including exit.php: (no path returned)
DONE 
```

有趣的是，`get_file_content()`它将开始使用相同的机制`include`（这在 php.net 上没有正确记录）。`realpath()`甚至根本没有实现这个机制（这就解释了为什么我会出现`no path returned`）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:25:56.243

first.php 在 E:\test\mysql 中找到文件 death.txt。您可以使用：

```
echo file_get_contents($_SERVER['DOCUMENT_ROOT'] . DIRECTORY_SEPARATOR . 'death.txt'); 
```

或者：

```
echo file_get_contents('..' . DIRECTORY_SEPARATOR . 'death.txt'); 
```

# css - IE 条件语句仅在主页上工作？

> ID：14543638
> 
> 赞同：0
> 
> 时间：2013-01-27T01:50:10.433
> 
> 标签：css, wordpress, internet-explorer, conditional-statements

我正在使用条件语句/样式表，因为我的客户想要一个用于登录的 CSS3 模式窗口，（当然）由于指针事件，它不能在 IE 中本地工作。模态窗口代码在页脚中。

我创建了一个 ie.css 样式表并将以下内容添加到 header.php 文件中：

```
<!--[if IE]> <link rel="stylesheet" type="text/css" href="<?php bloginfo('ie.css'); ?>" media="screen" />   <![endif]--> 
```

我/我很确定样式表很好，并且（理论上）命令很好，因为它可以在主页上使用。问题是我无法让它在任何其他页面上工作。任何帮助/建议表示赞赏。

要查看实际问题，[请转到此处](http://bit.ly/10YLBqd)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:53:36.687

为什么`<![endif]-->`你的行代码末尾有这样的代码？也许如果你删除它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T01:53:40.537

在您的代码中，它是以这种方式加载的：

```
<!--[if IE]><link rel="stylesheet" type="text/css" href="Ayurvega" media="screen" /><![endif]--> 
```

代码`href`错误地指定了属性，指向：`ayurvega.com/main/Ayurvega`，这不是正确的。猜猜你需要用类似的东西替换它：

```
<!--[if IE]><link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/ie.css" media="screen" /><![endif]--> 
```

或者，这个，可能是……

```
<!--[if IE]><link rel="stylesheet" type="text/css" href="<?php bloginfo('template_url'); ?>/ie.css" media="screen" /><![endif]--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T01:55:34.393

```
 href="<?php bloginfo('template_directory'); ?>/ie.css" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T01:56:04.623

试试这个...

```
<!--[if IE]> <link rel="stylesheet" type="text/css" href="<?php bloginfo('template_url'); ?>/ie.css" media="screen" />   <![endif]--> 
```

# c++ - 将 typedef 移动到函数模板参数时编译错误

> ID：14543659
> 
> 赞同：1
> 
> 时间：2013-01-27T01:53:02.657
> 
> 标签：c++, templates, c++11, typedef

在尝试将一些 boost 图形代码重构为函数模板时，我遇到了一些编译错误。

我正在尝试将该`using NODE_TYPE = int;`行移动到函数模板参数中。

我究竟做错了什么？

**编译错误**

```
Test_Dijkstra_Graph.cpp:48:28: error: expected type-specifier
Test_Dijkstra_Graph.cpp:48:28: error: expected ‘;’
Test_Dijkstra_Graph.cpp:49:28: error: expected type-specifier
Test_Dijkstra_Graph.cpp:49:28: error: expected ‘;’ 
```

**旧代码编译得很好**

```
void 
find_shortest_paths_by_pairs()
{
  using NODE_TYPE         = int;
  using EDGE              = std::pair<NODE_TYPE,NODE_TYPE>;
  using GRAPH_T           = adjacency_list< 
        listS, vecS, directedS, no_property, property< edge_weight_t, NODE_TYPE >>;
  using vertex_descriptor = graph_traits<GRAPH_T>::vertex_descriptor;
  using edge_descriptor   = graph_traits<GRAPH_T>::edge_descriptor;
  // ...
} 
```

**新代码无法编译**

```
template<typename NODE_TYPE>
void find_shortest_paths_by_pairs()
{
  using EDGE              = std::pair<NODE_TYPE,NODE_TYPE>;
  using GRAPH_T           = adjacency_list< 
        listS, vecS, directedS, no_property, property< edge_weight_t, NODE_TYPE >>;
  using vertex_descriptor = graph_traits<GRAPH_T>::vertex_descriptor;   // ERROR HERE
  using edge_descriptor   = graph_traits<GRAPH_T>::edge_descriptor;     // ERROR HERE
  // ...
}

// find_shortest_paths_by_pairs<int>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T02:03:03.997

`NODE_TYPE`原因`GRAPH_T`是一个依赖类型，所以你需要几个`typename`s：

```
using vertex_descriptor = typename graph_traits<GRAPH_T>::vertex_descriptor;
using edge_descriptor   = typename graph_traits<GRAPH_T>::edge_descriptor; 
```

（Comeau 有一个常见问题解答，我通常会链接到这里，详细说明*为什么*这是必要的，但似乎他们已经让他们的域名过期了。:-[）

编辑：嘿，Comeau 的域名又回来了。说常见问题：http: [//www.comeaucomputing.com/techtalk/templates/#typename](http://www.comeaucomputing.com/techtalk/templates/#typename)

# d3.js - NVD3 - 更新数据时不均匀的滴答声

> ID：14543660
> 
> 赞同：4
> 
> 时间：2013-01-27T01:53:02.617
> 
> 标签：d3.js, nvd3.js

当我更新现有 NVD3 图表中的数据时，沿 x 轴的刻度不会以固定间隔呈现。

我正在创建一个`multiBarChart`来自`d3.json()`. 数据代表一个日期范围内的命中。我有一个单独的日期范围选择器来更新图表的数据。

我有以下创建图表（简化）：

```
initGraph = function(url) {
  d3.json(url, function(data) {
    nv.addGraph(function() {
      chart = nv.models.multiBarChart();

      d3.select('#chart svg').datum(data).transition().duration(500).call(chart);
      nv.utils.windowResize(chart.update);

      return chart;
    });
  });
}; 
```

以及以下更新它的函数，它在日期选择器中调用：

```
redrawGraph = function(url) {
  d3.json(url, function(data) {

    d3.select('#chart svg').datum(data).transition().duration(500).call(chart);
    nv.utils.windowResize(chart.update);
  });
}; 
```

一切似乎都很好，但有时刻度间距会不一致：

![古怪的蜱虫](../Images/91eabfd8cff848dc5d0525c59a878649.png)

这仅在更新现有图表时发生。

我花了很长时间验证数据是否正确——x 值以固定值递增——所以我只能认为在重绘图表时我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-19T00:49:12.480

有点晚了，但是你需要调用`chart.update()`而不是注册一个新的窗口监听器，这样代码就变成了：

```
redrawGraph = function(url) {
  d3.json(url, function(data) {

    d3.select('#chart svg').datum(data).transition().duration(500).call(chart);
    chart.update();
  });
}; 
```

基本上每次更新 nvd3 中的图表时，都需要调用`chart.update`重新绘制它。

请注意，`nv.utils.windowResize(chart.update)`这相当于

```
// Register an event listener on windowResize
nv.utils.windowResize(function() {
  // Every time the window is resized, redraw the chart
  chart.update();
}); 
```

所以每次更新都这样做不会有好的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T07:54:35.693

我已经通过在选择日期范围时重新创建图表来解决这个问题：

```
$("#chart svg").empty(); 
```

结果并不像人们想象的那么糟糕。

# python - 制表符分隔的数据集 ValueError 具有多个元素的数组的真值是模棱两可的错误

> ID：14543663
> 
> 赞同：1
> 
> 时间：2013-01-27T01:53:29.070
> 
> 标签：python, numpy

我有这个制表符分隔的数据集，如下所示：

```
PITG_00022  start_codon 262407  262409  -
PITG_00022  stop_codon  260777  260779  -
PITG_00022  exon    260867  262409  -
PITG_00022  CDS 260867  262409  -
PITG_00022  exon    260777  260826  -
PITG_00022  CDS 260780  260826  -
PITG_00023  start_codon 273160  273162  +
PITG_00023  stop_codon  274778  274780  +
PITG_00023  exon    272998  273288  +
PITG_00023  CDS 273160  273288  +
PITG_00023  exon    273368  273652  +
PITG_00023  CDS 273368  273652  +
PITG_00023  exon    273729  273788  +
PITG_00023  CDS 273729  273788  +
PITG_00023  exon    273885  273958  +
PITG_00023  CDS 273885  273958  +
PITG_00023  exon    274022  274127  +
PITG_00023  CDS 274022  274127  +
PITG_00023  exon    274194  274346  + 
```

这是我的代码，非常亲切地发布在此处[重新编号制表符分隔的数据相对于第三列的内容在两列中进行](https://stackoverflow.com/questions/14461242/renumbering-tab-delimited-data-in-two-columns-relative-to-contents-of-a-third-co/14463536#comment20204953_14463536)了一些更改，但是在进行这些更改之前就出现了我得到的错误（见下文）：

```
import numpy
import pandas
import pandas as pd
import sys

sys.stdout = open("outtry2.txt", "w")
data = pd.read_csv('pinfestans-edited2.csv', sep='\t')#,
              #converters={'STRAND': lambda s: s[0]})
groups = data.groupby(['STRAND', 'GENE_ID'])

corrected = []

for (direction, gene_name), group in groups:
    print direction,gene_name
if group.index[group.TYPE=='start_codon']:
    start_exon = group.index[group.TYPE=='exon'][0]
if direction == '+':
    group['POSA'] = 1 + abs(group.POS1 - group.POS1[start_exon])
    group['POSB'] = 1 + abs(group.POS2 - group.POS1[start_exon])
else:
    group['POSA'] = 1 - abs(group.POS2 - group.POS2[start_exon])
    group['POSB'] = 1 - abs(group.POS1 - group.POS2[start_exon])
print group
corrected.append(group) 
```

以下是输出示例：

```
 GENE_ID     TYPE         POS1    POS2    STRAND  POSA  POSB
104  PITG_00021  start_codon  258927  258929  +       1     3   
105  PITG_00021  stop_codon   260547  260549  +       1621  1623
106  PITG_00021  exon         258927  260549  +       1     1623
107  PITG_00021  CDS          258927  260546  +       1     1620
+ PITG_00023
     GENE_ID     TYPE         POS1    POS2    STRAND  POSA  POSB
114  PITG_00023  start_codon  273160  273162  +       163   165 
115  PITG_00023  stop_codon   274778  274780  +       1781  1783
116  PITG_00023  exon         272998  273288  +       1     291 
117  PITG_00023  CDS          273160  273288  +       163   291 
118  PITG_00023  exon         273368  273652  +       371   655 
119  PITG_00023  CDS          273368  273652  +       371   655 
120  PITG_00023  exon         273729  273788  +       732   791 
121  PITG_00023  CDS          273729  273788  +       732   791 
122  PITG_00023  exon         273885  273958  +       888   961 
123  PITG_00023  CDS          273885  273958  +       888   961 
124  PITG_00023  exon         274022  274127  +       1025  1130
125  PITG_00023  CDS          274022  274127  +       1025  1130
126  PITG_00023  exon         274194  274346  +       1197  1349 
```

这是运行一段时间后我得到的错误：

```
>>>>Traceback (most recent call last):
  File "C:\Users\Chris\Documents\I.S\Part-2\Convert_to_exonfile.py", line 51, in <module>
if group.index[group.TYPE=='start_codon']:
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()
>>>> 
```

现在我手动测试了一些计算，它似乎完全按照我的意愿进行，除了以 STRAND 作为 + 列出的基因（请注意，样本输入中的 PITG_00022 基因在输出）。我认为它首先对 + STRAND 组进行计算，但是一旦到达 - STRAND 组，就会出现该错误。现在我读到了关于使用`any()`and`all()`的文章，以及一篇关于`set()`在类似的数组 valueError 线程中使用的文章，但我不知道这将如何解决我的问题或如何实现它。提前感谢任何帮助，谢谢。

# xml - XPath 从元素到元素选择祖先/后代树

> ID：14543664
> 
> 赞同：1
> 
> 时间：2013-01-27T01:53:31.400
> 
> 标签：xml, xslt, xpath

我目前有一个如下所示的 xml 文档：

```
<site>
  <body>
    <group name="content">
      <Categories>
        <item id="1" name="cat1">
          <Children>
            <item id="2" name="cat2">
              <Children>
                <item id="3" name="cat3">
                  <Children>
                    <item id="4" name="cat4" />
                  </Children>
                </item>
                <item id="5" name="cat5">
                  <Children>
                    <item id="6" name="cat6" />
                    <item id="7" name="cat7" />
                    <item id="8" name="cat8" />
                  </Children>
                </item>
                <item id="9" name="cat9" />
                <item id="10" name="cat10" />
              </Children>
            </item>
          </Children>
        </item>
      </Categories>
    </group>
  </body>
</site> 
```

如果用户选择了 id=3 的类别：

我如何[在我的 xsl 样式表中]，选择从根 Categories 元素到所选元素的所有后代，并遍历它们？也许是这样的：

```
<xsl:for-each select="//Categories//*[@id=3 and ancestor::Categories[1]]"> . .   ? 
```

留给我的只是：

```
<xsl:value-of select="@name" /> > 
```

导致：

```
cat1 > cat2 > cat3 > 
```

如果需要进一步澄清，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:36:57.750

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="item[@id=3]">
  <xsl:apply-templates mode="ancestors"
    select="ancestor-or-self::item"/>
 </xsl:template>

 <xsl:template match="item" mode="ancestors">
  <xsl:if test="not(position()=1)"> > </xsl:if>
  <xsl:value-of select="@name"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<site>
  <body>
    <group name="content">
      <Categories>
        <item id="1" name="cat1">
          <Children>
            <item id="2" name="cat2">
              <Children>
                <item id="3" name="cat3">
                  <Children>
                    <item id="4" name="cat4" />
                  </Children>
                </item>
                <item id="5" name="cat5">
                  <Children>
                    <item id="6" name="cat6" />
                    <item id="7" name="cat7" />
                    <item id="8" name="cat8" />
                  </Children>
                </item>
                <item id="9" name="cat9" />
                <item id="10" name="cat10" />
              </Children>
            </item>
          </Children>
        </item>
      </Categories>
    </group>
  </body>
</site> 
```

**产生想要的正确结果：**

```
cat1 > cat2 > cat3 
```

* * *

**更新**：

在评论中，OP 问道：

> 我怎样才能动态设置`'id'`值 `match="item[@id=3]". .`，而不是让一行说 `<xsl:template match="item[@id=3]"> . .`我可以说 `<xsl:template match="item[@id=$param]">`

假设您有一个`$pId`包含所需值的全局参数

**在 XSLT 2.0 中，只需修改`xsl:template`from：**

```
 <xsl:template match="item[@id=3]"> 
```

**至**：

```
 <xsl:template match="item[@id=$pId]"> 
```

**在 XSLT 1.0 中，不允许在匹配模式中有变量/参数引用**。下面是一个涵盖新要求的 XSLT 1.0 解决方案：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pId" select="3"/>

 <xsl:template match="item">
  <xsl:apply-templates mode="ancestors"
    select="self::*[@id=$pId]/ancestor-or-self::item"/>
  <xsl:apply-templates select="node()[not(current()/@id = $pId)]"/>
 </xsl:template>

 <xsl:template match="item" mode="ancestors">
  <xsl:if test="not(position()=1)"> > </xsl:if>
  <xsl:value-of select="@name"/>
 </xsl:template>
</xsl:stylesheet> 
```

# objective-c - 核心数据迁移错误：无法复制

> ID：14543669
> 
> 赞同：3
> 
> 时间：2013-01-27T01:54:01.113
> 
> 标签：objective-c, core-data, rubymotion

我真的陷入了一个`Core Data`似乎无法解决的错误：

```
Can't migrate SQLite store: Error Domain=NSCocoaErrorDomain Code=134110 The operation couldn’t be completed. (Cocoa error 134110.) UserInfo=0xab4b630 {NSUnderlyingError=0xab4b2e0 The operation couldn’t be completed. (Cocoa error 516.), reason=Can't copy source store to destination store path 
```

我找不到有关此错误的任何资源...

这是一个非常简单的迁移，只有一个具有 name 属性和 created_by 属性的模型“用户”，对于我的测试，我没有更改任何内容，两个模型都是相同的。我只是想让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T05:15:27.540

这个错误是由于我试图将数据迁移到已经存在的 sql 存储区引起的。最重要的是，我没有首先使用持久协调器加载原始存储。

所以吸取了教训：

1.  您的目的地应该是一条尚不存在的路径。它会为你创造它。
2.  在尝试迁移之前，首先加载您的原始商店（您要从中迁移的商店）。

希望这对其他人有帮助。

# ios - NSTimer 移动按钮

> ID：14543672
> 
> 赞同：0
> 
> 时间：2013-01-27T01:54:15.193
> 
> 标签：ios, objective-c, button, nstimer

我的目标是创建一个按钮，只要你按下它，它就会自动移动到一个随机位置。我得到这个来处理这个动作：

```
- (IBAction)move:(id)sender 
{
   int x = 0 + arc4random() % (260 - 0);
   int y = 0 + arc4random() % (400 - 0);

   frame = self.button.frame;
   frame.origin.x = x; // new x coordinate
   frame.origin.y = y; // new y coordinate
   self.button.frame = frame;
} 
```

**但是后来我尝试添加一个计时器，由一个按钮触发：**

```
- (IBAction)start:(id)sender 
{
   timer =[NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(showActivity) userInfo:nil repeats:YES];
   self.startButton.Hidden = YES;
   self.label.hidden = NO; 
} 
```

和

```
- (void)showActivity
{

   int currentTime = [self.label.text intValue];
   int newTime = currentTime - 1;
   self.label.text = [NSString stringWithFormat:@"%d", newTime];

   if (newTime == 0)
   {
       [timer invalidate];
   }
} 
```

每次计时器滴答作响，似乎都会重新绘制视图。在我启动计时器之前，可以很好地移动按钮。然后，一旦我按下启动计时器的第二个按钮，第一个按钮就植根于我最初将它放在我的 xib 文件中的位置。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:04:17.030

这个怎么样...

```
- (void)repositionViewRandomly:(UIView *)view {

    CGFloat width = view.bounds.size.width;
    CGFloat height = view.bounds.size.height;

    int x = arc4random() % (int)(view.superview.bounds.size.width - width);
    int y = arc4random() % (int)(view.superview.bounds.size.height - height);

    [UIView animateWithDuration:0.5 animations:^{
        view.frame = CGRectMake(x, y, width, height);
    }];
}

- (IBAction)buttonPressed:(id)sender {

    [self performSelector:@selector(repositionViewRandomly:) withObject:sender afterDelay:1.0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:29:00.500

这个问题很可能是自动布局的结果（iOS 6 的一项功能，它根据称为约束的算术规则控制控件的放置）。要查看是否启用了自动布局，请打开情节提要/NIB，按`option`+ `command`-`1`转到“文件检查器”（或只需单击最右侧面板上的第一个“文件检查器”选项卡）并查看“自动布局”是否选中。

如果启用自动布局，即使在更改帧之后，也会重新应用约束，并且控件将移回约束指定的位置。您可以关闭自动布局，或者保持自动布局打开，然后以编程方式删除约束或以编程方式更改约束而不是更改框架。

有关如何通过更改约束来制作动画的示例，请参见此[答案。](https://stackoverflow.com/a/14190042/1271826)但最简单的方法是关闭自动布局：

![自动布局设置](../Images/d66b4ded6005fb8bf5c215aacc436dac.png)

有关 autolaout 上各种资源的背景信息和链接，请参阅[Cocoa Auto Layout Guide](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html)。

# ant - 我如何在 Apache Ant 中过滤掉不以 INSERT 开头的行，就像我认为可以使用 grep 一样（见下文）

> ID：14543673
> 
> 赞同：1
> 
> 时间：2013-01-27T01:54:16.423
> 
> 标签：ant

我如何在 Apache Ant 中仅过滤掉不以 INSERT 开头的行，就像我认为使用 grep 可能（见下文）一样。

```
cat specialtable.inserts.sql | grep INSERT > specialtable.inserts.ONLY.sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:40:58.243

您可以使用[**linecontains**](https://ant.apache.org/manual/Types/filterchain.html#linecontains)或[**linecontainsregexp**](https://ant.apache.org/manual/Types/filterchain.html#linecontainsregexp)过滤器阅读器

```
<copy file="specialtable.inserts.sql" tofile="specialtable.inserts.ONLY.sql">
  <filterchain>
    <linecontains>
      <contains value="INSERT"/>
    </linecontains>
  </filterchain>
</copy> 
```

如果您想过滤文件以包含所有包含**INSERT**、**UPDATE**或**DELETE**的行，请使用`linecontainsregexp`：

```
<copy file="specialtable.inserts.sql" tofile="specialtable.inserts.ONLY.sql">
  <filterchain>
    <linecontainsregexp>
       <regexp pattern="INSERT|UPDATE|DELETE"/>
    </linecontainsregexp>
  </filterchain>
</copy> 
```

您还可以使用`casesensitive`属性和更复杂的 REGEX 表达式来确保行以这些单词开头。

# c - scanf 不读取输入的问题

> ID：14543675
> 
> 赞同：0
> 
> 时间：2013-01-27T01:54:39.707
> 
> 标签：c, scanf

这些是说明：
编写一个程序，开始询问用户正态分布的平均值 u 和标准差 s（参见 wiki 文章[http://en.wikipedia.org/wiki/Normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution)）然后程序要求一个 N，然后询问 N 个值 x。对于每个 x，它将 f(x) 写入屏幕。请注意，程序仅向用户询问 u、s 和 N 一次。之后，它会一一请求 x 的 N 个值。在每个值 x 之后，它会写出函数的相应值。

这是我的代码：

```
#include <stdio.h>

#define PI 3.141592653589793238462643383
#define E 2.7182818284590452353602874713526624977572470937
#include <math.h>
#include <stdlib.h>

int main()
{
    double u,s, N, x1,math1, math2, math3,n, v, x;
    printf("Enter Mean: \n");
    scanf("%d", &u);
    printf("Enter Standard Deviation: \n");
    scanf("%d", &s);
    printf("Enter number of x's \n");
    scanf("%d", &N);

for (v=1; v<=N; v++)
{
     printf("Enter Value \n");
     scanf("%d", &x);
     n=1/2;
         math1 =1/(u*sqrt(2*PI));
         math2= (x-u)/s * (x-u)/s;
         math3= E * exp(n);
         x1 = math1 * exp(math3)*exp(math2);
         printf("%d \n", x1);
    }
    system("Pause");
 } 
```

我的程序在“输入 X 的数量”之后停止。谁能帮我弄清楚这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:57:07.350

将不正确的格式字符串传递给 scanf() 会调用未定义的行为。所有格式说明符的值应`%lf`为`double`：

```
scanf("%lf", &u); 
```

等等

因此，for 循环不会进入并停止在`pause`.

# android - 从 ImageSwitcher 获取当前显示的图像

> ID：14543677
> 
> 赞同：0
> 
> 时间：2013-01-27T01:55:16.013
> 
> 标签：android, sdk, imageswitcher

您好，我用图像切换器和按钮构建了一个应用程序。当我按下按钮时，我需要将图像切换器中显示的当前图像设置为墙纸。

如何从当前显示的图像中获取完整的图像路径？（如 R.drawable.myimage）

我找到了 getDisplayedChild() 但没有做我需要的事情。

这是我的代码：

```
 WallpaperManager myWallpaperManager
             = WallpaperManager.getInstance(getApplicationContext());
            try {
                int imageid = iSwitcher.getDisplayedChild();

            myWallpaperManager.setResource(imageid);
             alerta();
             System.out.println(pics[imageid]);
            } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:04:02.110

知道了 ：）

如果有人需要这个，我创建了一个新的 int 变量，并为其分配了图库中单击图像的图像 ID。

```
iSwitcher.setImageResource(pics[arg2]);
foto = arg2; 
```

当我点击我的按钮时，我读到了“foto”var。

```
myWallpaperManager.setResource(pics[foto]); 
```

# javascript - 如何使用 jquery 和/或 javascript 获取多个用户输入并将其存储在数组中，然后访问数组中的元素

> ID：14543681
> 
> 赞同：1
> 
> 时间：2013-01-27T01:55:39.923
> 
> 标签：javascript, jquery, html

我想使用 jquery 来：

1.  多次获取用户输入并将输入附加到 div。
2.  将每个用户的输入存储在一个数组中，以便我可以保存它们。
3.  当用户单击附加到的 div 中的输入时，能够将输入值（在数组中的特定索引处）传递给 javascript 函数（搜索）。

到目前为止，这是我的代码：

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css" />
        <script type = "text/javascript" src='script.js'>
        </script>
        <title></title>
    </head>
    <body>
     <form name="searchForm">
         <input type="text" id="search" placeholder="Enter Card Name" name="searchItem"/>
     </form>
     <div id="button">Search!</div>
    <br/>
    <div id="output"></div>
    <div id="save"></div>
    </body>
</html> 
```

Javascript：

```
function Vanguard(name,grade,skill,power,shield,critical, type, nation, clan, race){
    this.name = name;
    this.grade = grade;
    this.skill = skill;
    this.power = power;
    this.shield = shield;
    this.critical = critical;
    this.type = type;
    this.nation = nation;
    this.clan = clan;
    this.race = race;
};

var asurakaiser = new Vanguard("Asura Kaiser", 3, "Twin Drive!!", 11000, 0, 1, "Normal Unit", "Star Gate", "Nova Grappler", "Battleroid");
var kingofknightsalfred = new Vanguard("King of Knights, Alfred", 3, "Twin Drive!!", 10000, 0, 1, "Normal Unit", "United Sanctuary", "Royal Paladin", "Human");

var units = new Array(asurakaiser, kingofknightsalfred);

function printVanguard(p){
    document.getElementById('output').innerHTML +=("<hr />");
    document.getElementById('output').innerHTML +=("Name: " + p.name);    
    document.getElementById('output').innerHTML +=("<br />Grade: " + p.grade);
    document.getElementById('output').innerHTML +=("<br />Skill: " + p.skill);
    document.getElementById('output').innerHTML +=("<br />Power: " + p.power);
    document.getElementById('output').innerHTML +=("<br />Shield: " + p.shield);
    document.getElementById('output').innerHTML +=("<br />Critical: " + p.critical);
    document.getElementById('output').innerHTML +=("<br />Type: " + p.type);
    document.getElementById('output').innerHTML +=("<br />Nation: " + p.nation);
    document.getElementById('output').innerHTML +=("<br />Clan: " + p.clan);
    document.getElementById('output').innerHTML +=("<br />Race: " + p.race);
    document.getElementById('output').innerHTML +=("<br />");
};

var search = function(name){
  for (i = 0; i < units.length; i++){
    if (units[i].name === name) {
        printVanguard(units[i]);
    }
  }  
};

$(document).ready(function() {
 $('#button').click(function(){
  var output = $('input[name=searchItem]').val();
    $('#output').append("<br />" + '<div class="item2">' + output + '</div>'); 
    $('#output').click(function(){
     $('#save').append(search(output));
 }); 
 });

}); 
```

所以基本上看一下 jquery 部分......如果你注意到，当用户点击按钮时，它会将输入保存到变量“输出”（我不知道为什么我选择了这个名字，因为回想起来听起来很混乱）。但无论如何，在后面的行中，变量 output 将附加到 div 输出。如果用户在 div 中单击输出本身，它将附加一个函数（搜索），该函数将用户的输入作为参数。

但是我的代码有问题......因为如果我输入“Asura Kaiser”而不带引号，单击名称，它将根据调用 search(“Asura Kaiser”) 的搜索功能显示所有正确的数据。但是当我点击这个结果时，它再次显示相同的数据。如果我尝试输入不带引号的“King of Knights, Alfred”等其他名称，除了“King of Knights, Alfred”的结果外，它仍会显示“Asura Kaiser”的结果。

基本上，似乎正在发生的是我的输出变量正在累积数据或其他东西。

我认为，如果我将每个用户的输入存储在数组的唯一元素中，并在将其放入搜索功能的参数中时调用该特定元素，我应该能够让我的程序正常工作。

任何帮助，将不胜感激。澄清一下，我正在寻找的是一种存储大量用户输入并能够根据它们在数组中的索引将它们作为唯一参数传递给搜索函数的方法。

对于数组中的某些索引，类似 search(output[i]) 的东西。

该程序的总体目标是让人们可以搜索名为 Cardfight 的流行纸牌游戏的纸牌信息！先锋。我的主要目标是创建一个程序，让您可以查找卡片并制作一副牌，这是这个漫长过程的开始。

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:38:34.813

我建议您重新开始，了解在某些时候您需要将数据远程存储在服务器上。如果没有远程存储，用户将无法访问更新。您可以使用网站主机或云或其他任何东西。

话虽如此，您会希望开始使用 JSON 作为数据传输方法。我为你创建了一个重要的演示，它完成了你提到的所有事情，并在评论中向你展示了你有时会与服务器通信的地方。

使用的 JSON 数据的基本起点是：

```
 [{
    "user_id": 1,/* will need an id system to store and retrieve data*/
        "name": "Asura Kaiser",
        "grade": 3,
        "skill": "Twin Drive!!",
        "power": 11000,
        /* some items removed for clarity but included in below demo link*/
}, {
    "user_id": 2,
        "name": "King of Knights, Alfred",
        "grade": 3,
        "skill": "Twin Drive!!",
        "power": 10000            
}] 
```

在演示中使用非常少的 html，您会发现可以从这些数据中完成很多工作。该演示还从原始数据结构创建一个表单，并允许您添加新用户并将它们存储在页面中的主对象中。

我建议你添加一些用户（只需要在表单中添加一个名称）然后玩数据显示和搜索一下。尝试在名称中添加各种字母以帮助在名称搜索中获得更多结果

大部分代码是使用 jQuery 编写的。我建议你这样做。学习原生 javascript 很有价值，但是您可以使用 jQuery 显着减少代码量，并且可以在不知道如何在原生 javascript 中做同样事情的情况下做很多事情

演示：http: [//jsfiddle.net/n3gfV/6/](http://jsfiddle.net/n3gfV/6/)

代码被大量注释，以帮助您获得想法和理解正在发生的事情

**编辑：**修改后的演示，用户更新能力有限。应用程序已经需要一些重构，但会给你一个很好的框架来从中获取想法

更新演示：（未完全测试以确保其他功能没有损坏） [http://jsfiddle.net/n3gfV/7/](http://jsfiddle.net/n3gfV/7/)

**建议您使用真正的 html 作为表单。**我用脚本创建了它们以使我更容易，但是使 javascript 更复杂一些，并且在没有额外代码的情况下对你来说可能更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:43:49.553

这将使您开始进行重构。

```
function printVanguard(unit){

 document.getElementById('output').innerHTML +=("<hr />");

  for(var p in unit){

    document.getElementById('output').innerHTML +=('<br />' + p +': ' + unit[p] );
     };
     document.getElementById('output').innerHTML +=("<br />");
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T02:40:28.200

每次单击按钮时，都会将添加新单击事件的调用添加到整个输出 div。此外，添加点击事件似乎不会删除先前附加的点击事件。

我建议在添加 div "class='item2'" 元素之前创建它，并将点击处理程序分配给该元素而不是整个输出 div。

接下来，正如我在评论中指出的那样，您似乎想要将详细数据添加到“保存”元素，但您正在调用 printVanguard 函数，该函数不返回任何内容，而是直接写入 #output div .

使用 printVanguard 构建 HTML 字符串并将其返回，而不是使用 innerHTML。还要确保您的搜索函数返回 printVanguard 返回的内容。

# c - C中的冲突类型，为什么？

> ID：14543683
> 
> 赞同：2
> 
> 时间：2013-01-27T01:55:49.520
> 
> 标签：c, binary, hex, type-conversion

我正在尝试使用 C 编写基本实践，使用二进制和十六进制。我做了一个方法来打印 2 的倍数（2 的幂）和一个单独的方法来打印出 2 的倍数的十六进制形式。

```
#include <stdlib.h>
#include <stdio.h>

const char one = 1;
const int bits = 31;

void    print2       ()
{
    unsigned int  u = (int)one;
    unsigned int j;

    printf("The powers of 2 are:\n");

    for(j=0;j<bits;j++)
    {
            unsigned int temp = u<<j;
            printf("%d\n",abs(temp));
            printhex(temp);
    }

    printf("\n\n");
}

void    printhex       (unsigned int   u)
{
    printf("0x%08X\n",u);
}

int main ()
{
    print2();
    return(EXIT_SUCCESS);
} 
```

我不明白为什么我从调用方法“printHex”中得到一个错误“冲突类型”。我特别要求一个无符号整数，当我在参数中调用方法时（我假设它是无符号整数“temp”），编译器不接受。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T01:59:17.800

您遇到问题是因为您在`printhex()`使用它之前没有提供原型。

要么在源文件`printhex()`之前物理放置`print2()`，要么添加声明：

```
extern void printhex(unsigned int u); 
```

之前`print2()`定义。（不要`printhex()`在里面声明`print2()`；即使它在语法上是合法的，但这样做是不好的做法。）

* * *

当编译器运行 call`printhex(temp)`时，它假定（根据 C89 规则）它是一个函数，它返回一个`int`带有不确定参数列表的函数（但不是一个正式的变量参数列表——像 varargs 函数`printf()`必须始终在范围内有一个原型）。当您随后将其定义为返回`void`时，它会感到不安并报告冲突类型错误。根据 C99 规则，在使用函数之前，您应该在范围内拥有原型。

我想对您的布局发表评论；这有点不正统。

函数定义不需要太多的空格（在函数定义中使用*更少*的空格）：

```
void    print2       ()
void    printhex       (unsigned int   u) 
```

将会：

```
void print2(void)
void printhex(unsigned int u) 
```

如果我正在写它们。我在定义中使用显式编写函数，`(void)`因此它与函数的原型表示法相匹配。实际上，如果我正在编写它们，它们更有可能以`static`. 如果我编写的函数不会在它所在的源文件之外使用，那么我会自动将其设为静态。此外，如果函数在使用之前被定义为静态，那么我不需要函数的第二次声明。如果一个函数不是静态的，在我的书中应该有一个声明函数的头文件，并且该头文件应该在定义函数的文件和使用函数的文件中使用。这确保了一致性。

另外，您使用`abs(temp)`的有点奇怪；`unsigned int`这是将 转换为已签名的冗长方式`int`，但您最好写：

```
 printf("%u\n", temp); 
```

最后，我建议你在循环中使用*更多*的空白：`for`

```
for (j = 0; j < bits; j++) 
```

逗号或分号前没有空格；二元运算符周围的空格（但不是一元运算符，或绑定非常紧密的运算符，例如下标或成员（`.`或`->`）运算符）。

您的输出将十六进制与十进制交错；您可能会发现使用它更好：

```
printf("%10u ", temp); 
```

将十进制值右对齐放在该行上，使十六进制出现在同一行上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T01:59:23.097

您在`printhex`声明之前尝试使用 (call) 。要么通过说向前声明它，要么`void printhex (unsigned int u)`将`void printhex (unsigned int)`定义移动到 before `print2`。

# c++ - C++ 捕获输出流

> ID：14543692
> 
> 赞同：0
> 
> 时间：2013-01-27T01:56:24.403
> 
> 标签：c++, output, stringstream

我有一个 c++ 库，它提供了一个具有复杂逻辑的对象。到目前为止，许多对象`std::cout`在执行一个库命令时打印它们的输出。我想为此创建一个 Qt GUI（在文本小部件中输出它而不是控制台输出），因此`std::cout`必须进行更改以获得更灵活的东西。我已经将`std::stringstream`参数的引用传递给主对象（并将其传递给较低的对象）并将所有“std::cout <<”替换为“stream <<”（stream 是 std::stringstream）。

它不起作用，因为我失去了大部分输出。当我想从字符串流中获取它时，它非常小（只有几个字符）。如果我这样做，似乎`stream << var1 << var2 << var3`只有 var3 可用。

不知道如何解决这个问题。如果我将引用`std::cout`作为主要对象参数传递，那么在控制台下一切都会好起来的，但它不适用于 GUI 应用程序（我想我无法从 std::cout 获取输出）。

请告诉我我是否以不好的方式使用流字符串。或者让我知道是否有更好的方法来获取输出（使用其他东西而不是字符串流）。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:31:16.650

你可以使用 freopen("out.txt","w",stdout); 在您的程序开始时。

# php - 如何使用 in_array 获得不区分大小写的匹配？

> ID：14543693
> 
> 赞同：-5
> 
> 时间：2013-01-27T01:56:48.363
> 
> 标签：php

如果我们有

```
$allowimg = array('gif','bmp','jpg','png','jpeg','tif','tiff','tga','psd'); 
```

如果我们输入这段代码，想用它制作上传中心

```
if(in_array($filetype,$allowimg)){
//pic
$error = 0;
$filedoc = 'pic';
}
else{ echo 'bad file type!';} 
```

如果用户上传 my.PNG
它的运行 Else cuz PNG is not == png for php
谁能帮我解决这个问题？
以及如何防止文件上传？

```
$filename = explode('.',$nn); 
```

好吗？那么如果用户上传
my.pic.jpg 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:58:18.537

只是[`strtolower()`](http://php.net/manual/en/function.strtolower.php)文件类型！

```
if(in_array(strtolower($filetype),$allowimg)){
//pic
$error = 0;
$filedoc = 'pic';
}
else{ echo 'bad file type!';} 
```

**你的问题的第二部分**

虽然我建议您为每个问题提出一个新问题，而不是在单个任务中提出一组问题，但这是我通常如何从字符串中获取文件名的方式。

```
$ext = pathinfo($filename, PATHINFO_EXTENSION); 
```

[`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)函数给出抛出给它的路径的信息。您可以选择通过在第二个参数中指定它来获取您想要的字符串。

`$ext`现在包含文件的扩展名：（`jpg`可能是`JPG` `JPg`等。使用上面的代码来修复它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:00:06.773

* * *

* * *

```
if(in_array(strtolower($filetype),$allowimg)){ 
```

# java - 如何制作可滚动的 JTable

> ID：14543695
> 
> 赞同：0
> 
> 时间：2013-01-27T01:57:13.283
> 
> 标签：java, mysql, swing, jtable, jscrollpane

**问题1）**我有一个JPanel ps，它有一个空布局；一个 JscolPane 滚动窗格和一个 JTable 表。我已将表格添加到 scrollPane，然后将 scrollPane 添加到 Jpanel ps。以下是我的代码： -

```
ps = new JPanel();
ps.setLayout(null);
ps.setSize(1000,600);

scrollPane = new JScrollPane();
scrollPane.setBounds(10, 119, 975, 300);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
ps.add(scrollPane);

table = new JTable(data, columns);
table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
scrollPane.setViewportView(table); 
```

它应该创建一个带有水平滚动条的scrollPane，并且当列数增加以至于无法在单个屏幕上处理时，滚动条有助于显示内容。请参阅“AUTO_RESIZE_OFF”。

但是发生的是，所有列的大小都是固定的（我不知道有多少个字符。所有列的宽度都是相同的。）。因此，列的名称不是完全可见的。

我的问题是，是否可以增加显示的列的宽度，或者显示所有具有自己宽度的列？另外，如何启用滚动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T02:20:34.773

1.  是的。见[`TableColumn`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableColumn.html)。通常我过去所做的是使用`ResultSetMeta`数据来构建列模型。查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#width)了解更多信息
2.  可以，但是`JTable`会麻烦一些。看看[打印](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)和[打印 JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)。如果你有时间看的话，有一些关于 SO 的很好的例子。
3.  在数据库端过滤数据总是更好。一旦你有一组结果，你想过滤该组，你可以使用它`ResultSetMetaData` 来确定你想要分组的列。同样，如果您还没有结果，您可以使用`DatabaseMetaData`来确定数据库中表的列

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T02:20:38.157

1.  关于问题 1 和 2 中的打印作业：我建议您查看[jasper 报告](http://community.jaspersoft.com/project/jasperreports-library)
2.  对于你的问题 3，我不知道你的数据库结构是什么，所以很难说，但看起来你正在寻找的是 JTable 中的行跨度。[所以，试着在谷歌](https://www.google.com.vn/search?q=row%20span%20jtable%20&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)周围寻找这样的东西

# android - 由于 SWT 无效的启动线程，无法启动 Android SDK Manager

> ID：14543699
> 
> 赞同：2
> 
> 时间：2013-01-27T01:58:22.287
> 
> 标签：android, eclipse, swt

通过 eclipse 或 ./android 启动 Android SDK 管理器时，我收到以下错误：

```
hamiltont$ android 
***WARNING: Display must be created on main thread due to Cocoa restrictions.
org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(Unknown Source)
    at org.eclipse.swt.SWT.error(Unknown Source)
    at org.eclipse.swt.SWT.error(Unknown Source)
    at org.eclipse.swt.widgets.Display.error(Unknown Source)
    at org.eclipse.swt.widgets.Display.createDisplay(Unknown Source)
    at org.eclipse.swt.widgets.Display.create(Unknown Source)
    at org.eclipse.swt.graphics.Device.<init>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<init>(Unknown Source)
    at org.eclipse.swt.widgets.Display.<init>(Unknown Source)
    at org.eclipse.swt.widgets.Display.getDefault(Unknown Source)
    at org.eclipse.swt.widgets.Shell.<init>(Unknown Source)
    at org.eclipse.swt.widgets.Shell.<init>(Unknown Source)
    at com.android.sdkuilib.internal.repository.ui.SdkUpdaterWindowImpl2.createShell(SdkUpdaterWindowImpl2.java:168)
    at com.android.sdkuilib.internal.repository.ui.SdkUpdaterWindowImpl2.open(SdkUpdaterWindowImpl2.java:137)
    at com.android.sdkuilib.repository.SdkUpdaterWindow.open(SdkUpdaterWindow.java:110)
    at com.android.sdkmanager.Main.showSdkManagerWindow(Main.java:344)
    at com.android.sdkmanager.Main.doAction(Main.java:322)
    at com.android.sdkmanager.Main.run(Main.java:119)
    at com.android.sdkmanager.Main.main(Main.java:102) 
```

搜索告诉我我需要提供`-XstartOnFirstThread`，但我对此没有任何控制权。我尝试删除所有“.snap”文件，删除整个工作区目录等。但是，我认为这不是问题。这是 Android ADT 的全新安装。原来的 x86_64 swt.jar 只显示一个空白的白屏，所以我从[http://www.eclipse.org/swt/](http://www.eclipse.org/swt/)下载了 swt.jar ，这让我通过了白屏，但现在我得到了上面的错误。

# xcode - 如何为 Mac OS X 10.8 创建字典？

> ID：14543700
> 
> 赞同：7
> 
> 时间：2013-01-27T01:58:47.770
> 
> 标签：xcode, macos, dictionary

Dictionary 似乎比[Apple 文档](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/DictionaryServicesProgGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006152-CH1-DontLinkElementID_23)（2007 年）早了几个版本。我找到了一篇关于它的[好博客文章](http://nagpals.com/posts/mac-dictionaries/)，但现在一切似乎都不同了。我安装了 Xcode（包括命令行工具），但没有什么是它应该在的地方（例如，没有创建开发人员，也没有字典开发工具包）。我想做一个非常复杂的字典，所以我想做这个工作而不是转换文件类型。

现在在哪里`Developer/Extras/Dictionary Development Kit`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T03:00:50.780

/Developer 中的所有内容现在都嵌入到 Xcode.app 文件夹中。有些项目默认没有带过来，必须从[https://developer.apple.com/downloads/index.action手动下载](https://developer.apple.com/downloads/index.action)

您需要适用于您的 Xcode 版本的“辅助工具”。

# debugging - console.log 如何用于调试？

> ID：14543703
> 
> 赞同：0
> 
> 时间：2013-01-27T01:59:18.873
> 
> 标签：debugging

之前研究过console.log的定义，好像大家都说是用来调试的。我是一名新手程序员，我可以看到 console.log 打印传递给它的任何内容，例如字符串或数字。那么你能解释一下console.log是如何用于调试的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:04:56.923

调试是删除导致程序意外结果的“错误”或问题的过程。例如，在一个函数中

```
function fed(){
    a = 3;
    b = 1;

    console.log( b );

    c = b + 3
}
fed(); 
```

console.log() 用于在特定行执行时“窥视” b 的值。

您还可以找到**调试器；**很有用，因为它会停在代码的特定行上。

```
function fed(){
    a = 3;
    b = 1;

    console.log( b );

    c = b + 3;
    debugger;  //<-will stop at this line
}
fed(); 
```

在您的 HTML/javascript 文件中尝试这些。你会瘦b包含什么？检查您的“控制台日志”以了解

此页面也很有帮助，可以为您的研究提供帮助 :) [http://www.netmagazine.com/tutorials/javascript-debugging-beginners](http://www.netmagazine.com/tutorials/javascript-debugging-beginners)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:05:52.747

它有助于了解变量在给定时间的值。当完整的调试器（带有断点和堆栈分析）没有任何帮助时，通常使用此方法。

因此，通过在感兴趣的点打印出感兴趣的变量，人们可能会得到想要的答案。

# c - strtol 不从 read(fd,buffer,ssize_t) 转换字符串

> ID：14543709
> 
> 赞同：1
> 
> 时间：2013-01-27T02:00:47.827
> 
> 标签：c, strtol

strtol 不会转换我从阅读文本文件中获得的字符串。

```
int getNumFiles(int archive){
off_t cur=lseek(archive,20,SEEK_SET);
if(cur==-1){
    printf("lseek ERROR\n");
    exit(-1);
}
bool b=true;
char headerSizeBuffer[4];
char *end;

while(b){
    int numRead=read(archive,headerSizeBuffer,3);
    if(numRead != 3){
        printf("read ERROR\n");
        exit(-1);
    }
    headerSizeBuffer[3]='\0';
    printf("headerSizeBuffer=%s  with length=%ld\n",headerSizeBuffer,strlen(headerSizeBuffer));
    long headerSize=strtol(headerSizeBuffer,&end,10);//atol(headerSizeBuffer);
    printf("headerSize=%ld\n",headerSize);

    if (!*end)
        printf("Converted successfully\n");
    else
        printf("Conversion error, non-convertible part: %s\n", end);
    b=false;
}

return 1; 
```

}

当我运行编译的代码时，控制台给了我这个

```
headerSizeBuffer=031l_archive  with length=12
headerSize=31
Conversion error, non-convertible part: l_archive 
```

我要做的就是将 031 转换为值为 31 的 long 或 int。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T02:19:37.557

奇怪的是您没有为 headerSizeBuffer 分配空间或足够的空间，并且在调用 printf （开始）和调用 strtol （结束）之间的一段时间内，它被覆盖了。

编辑：来自上面的评论：“char* headerSizeBuffer”

是的，我是对的。由于您没有分配任何空间，因此您有未定义的行为......这意味着可能会发生任何行为，包括您所看到的。确保为 headerSizeBuffer 分配足够的空间，方法是将其设置为指向足够的内存（可能来自 malloc，也可能是数组，或各种其他不太常见的方式），或者更适合您的情况，因为大小需要在编译时知道，将其声明为数组而不是指针：

```
char headerSizeBuffer[4]; 
```

请务必设置 headerSizeBuffer[3] = '\0` 以在将字符串传递给 strtol 之前终止该字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:06:44.483

这是因为`strtol`需要一个以空字符结尾的字符串，而您`read()`只需要 3 个字符。`strtol`然后看不到字符串的结尾并继续读取垃圾。你需要设置`headerSizeBuffer[3] = 0`.

# templates - Backbone Marionette CompositeView 在行内重复弄乱了表格

> ID：14543712
> 
> 赞同：0
> 
> 时间：2013-01-27T02:01:46.573
> 
> 标签：templates, backbone.js, requirejs, marionette, icanhaz.js

我想我显然做错了什么。
我[用 ICanHaz 替换了下划线模板](https://stackoverflow.com/questions/14386893/backbone-marionette-and-icanhaz-mustache-templates-configuration)，所以现在我不知道问题是来自那个还是来自 CompositeView 中的另一个错误。无论如何，我觉得我在 Marionette 视图类型和区域之间有点迷失。
这是我的代码：

```
//ItemView
define(['jquery','underscore','backbone','iCanHaz','models/Job','text!templates/JobItemView.tpl','marionette'], 
    function( $, _, Backbone, ich, Job, jobTemplate, Marionette) { 
        var JobView = Marionette.ItemView.extend({
            tagName: 'tr',
            template: jobTemplate,
        });
        return JobView;
});

// CompositeView  
define(['jquery','underscore','backbone','collections/JobList','views/JobItemView','marionette','text!templates/JobListView.tpl'], 
    function( $, _, Backbone, JobCollection, JobView, Marionette, JobListTpl ) { /*function for instantiating the module or object*/
        var JobListView = Marionette.CompositeView.extend({
            itemView: JobView,
            template: JobListTpl,
            itemViewContainer: "tbody",
        });
        return JobListView;
});

// Item Template (jobTemplate)
<td>
    <a href="{{ url }}" rel="nofollow" target="_blank">
        {{ title }}
    </a>
</td>
<td>{{ status }}</td>
<td>{{ created_at }}</td>

// Composite Template (JobListTpl)
<table class="table table-striped" id="jobs-table">
    <thead>
        <tr>
            <th>Title</th>
            <th>Status</th>
            <th>created</th>

        </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
        <tr>
            <td colspan="8">
                Stuff in here
            </td>
        </tr>
    </tfoot>
</table>

//Main HTML page
<div class="tab-content">
    <div class="tab-pane active" id="jobPanel">
        //stuff in here        
    </div>
//other stuff in here

//app.js
define(['backbone','marionette','iCanHaz','collections/JobList','views/JobListView'],
  function(Backbone, marionette, ich, JobList, JobListView){

    var app = new marionette.Application(),
    jobList = new JobList();

    app.addRegions({
        main   : '#content',
        jobsPanel: "#jobPanel"
    });

    app.addInitializer(function(){
        //For using Marionette with ICH
        Backbone.Marionette.Renderer.render = function(template, data){
            if (_.isUndefined(ich[templateName])){ 
                  var templateName;
                  ich.addTemplate(templateName, template);
            };
            return ich[templateName](data); 
        }

        var viewOptions = {
            collection : jobList
        };

        app.jobsPanel.show(new JobListView(viewOptions)); 
        jobList.fetch({validate:true});
    });
    return app;

  }
);

//main.js for RequireJS config
    require.config({
        shim: {
            underscore: {
                exports: '_'
            },
            backbone: {
                deps: [
                    'underscore',
                    'jquery'
                ],
                exports: 'Backbone'
            },
            backboneLocalstorage: {
                deps: ['backbone'],
                exports: 'Store'
            },
            marionette : {
                exports : 'Backbone.Marionette',
                deps : ['backbone']
            },
            iCanHaz:{
                deps: ['jquery'],
                exports: 'ich'
            }
        },
        optimize: "none", 
        paths: {
            jquery: "require-jquery",
            underscore: '../lib/backbone/underscore-min',
            backbone: '../lib/backbone/backbone',
            marionette : '../lib/backbone/backbone.marionette.min',
            iCanHaz: '../lib/backbone/ICanHaz_ReqJS_Compatible',
            backboneLocalstorage: '../lib/backbone/extras/backbone.localStorage',
            text: '../lib/require/text',
        }

    });

    require(['app','backbone'],function(app,Backbone){
      app.start();
    }); 
```

这应该创建一个包含 3 行的普通表，但它实际上创建了 3 个嵌套表。这是（非常）丑陋![在此处输入图像描述](../Images/5265d027b700260410d2e8fb9644bf93.png) 的结果：检索到 3 条记录但未显示。所以现在我不知道我在搞砸哪一部分。

# .net - 通过接口使用多重继承

> ID：14543714
> 
> 赞同：1
> 
> 时间：2013-01-27T02:02:02.143
> 
> 标签：.net, oop, design-patterns

总是说使用接口我们可以在 .NET 中实现多重继承。

在发布这个问题时，我也去了这个 A [re interfaces 冗余与多重继承？。](https://stackoverflow.com/questions/4336898/are-interfaces-redundant-with-multiple-inheritance)

到目前为止，在我的开发经验中，我还没有使用接口来实现多重继承，或者没有出现这种需求。

现在我的问题是，.NET 框架或 .NET 世界中的任何流行库中是否有多重继承的示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:22:25.337

> 总是说使用接口我们可以在 .NET 中实现多重继承。

这实际上是不正确的。.NET 中没有真正的多重继承。接口仅仅提供了一种机制来完成许多与多重继承相同的目标，而导致问题的极端情况要少得多。

> 现在我的问题是，.NET 框架或 .NET 世界中的任何流行库中是否有多重继承的示例。

同样 - .NET 中没有多重继承。但是，整个框架都使用接口来提供重用，而不必指定固定的基本类型。LINQ 就是一个很好的例子 - LINQ 提供的几乎所有功能都针对接口工作，这允许该功能跨多种类型工作，而无需多重继承。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T02:34:52.550

```
class MyBaseClass:IEnumerable,IQueryable 
```

正如您已经知道的那样，上面是通过接口实现的 c# 中多重继承的主要示例之一。

StackOverflow 为像你这样的严肃程序员大量讨论了这个话题。

# linux - Cron 作业无法在 Ubuntu 上运行

> ID：14543715
> 
> 赞同：0
> 
> 时间：2013-01-27T02:02:14.473
> 
> 标签：linux, bash, shell, ubuntu, cron

我有一个简单的 shell 脚本，在终端中打开时运行良好，但根本不会作为 cron 作业运行！

脚本如下：

```
#!/bin/sh
/usr/bin/sshfs example.com: /mnt
/usr/bin/rsync -az -v --progress -h --delete /mnt/html/ /home/user/html/
/bin/fusermount -u /mnt 
```

为什么这不应该工作的任何原因？我是 Ubuntu 和 Cron 的新手，所以它可能很简单。

谢谢！（我通过 cron GUI 添加了作业，“计划任务”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:24:33.663

尝试设置这个

```
 #!/bin/sh
    . /home/<user>/.profile 
```

crontab 是独立的，您可能需要某些配置文件详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:19:43.627

您可以`rsync`直接与 ssh 一起使用，无需 fuse/mount。

```
rsync -az -v --progress -h --delete example.com:/mnt/html/ /home/user/html/ 
```

但无论如何，我认为您的问题出在 ssh 密钥上。您必须检查 ssh 从 启动时使用了哪些密钥`cron`。并配置 ssh，使其使用正确的密钥。

# jquery-mobile - 使用弹出窗口时在 jQuery Mobile 中停止 YouTube 视频

> ID：14543717
> 
> 赞同：0
> 
> 时间：2013-01-27T02:02:19.760
> 
> 标签：jquery-mobile, youtube, popup, youtube-api

我将来自 youtube 的视频嵌入到 iFrame 中，并在弹出窗口中打开它。但是关闭窗口后，视频正在播放。如何在 jQuery Mobile 中使用 YouTube API？

我像这样嵌入了 iframe：

[在这里查看我的文件](http://mobile.whykiki-kundenserver.de/startseite.html)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:00:44.933

大声笑，经过进一步调查。当您在移动设备上演示它时，它的行为会有所不同。离开页面时视频会停止。我正在笔记本电脑上的 Firefox 上测试应用程序（呃！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T01:10:00.807

不确定这是否会解决您的特定问题，但我在此处的 stackoverflow 上找到了另一篇文章：[How to stop Youtube video playing when leave a page on Jquery mobile site](https://stackoverflow.com/questions/14503093/how-to-stop-youtube-video-playing-when-leaving-a-page-on-jquery-mobile-site)

代码如下：

```
$(document).live('pagebeforehide', function(){
    player.pauseVideo();
}); 
```

# actionscript-3 - as3 air 移动应用多字体纹理

> ID：14543722
> 
> 赞同：0
> 
> 时间：2013-01-27T02:03:57.483
> 
> 标签：actionscript-3, air

我有一个正在开发的应用程序，它需要文本字段、输入等。

我已经创建了我想使用 GlyphDesigner 使用的字体的纹理图集，它们效果很好。

我已经创建了 XML 和 PNG 文件并将字体大小设置为 20。在应用程序中使用它时效果很好。然而，我现在需要更大版本的字体 (60)，并且想知道在同一屏幕上拥有多种大小的字体的最佳程序是什么。

我尝试创建另一组 XML 和 PNG 以及纹理，但是第二个声明被忽略了。所有变量都有不同的名称，但总是调用较小的字体而不是较大的字体。如果我使用较大的字体纹理并减小其输出模糊的大小。

如果我使用完全不同的字体效果很好，但我想使用相同的字体，只是大小不同。

如果需要，很乐意分享代码。

谢谢

# asp.net-mvc - 如何在没有视图的情况下使用 BeginForm？mvc.net

> ID：14543724
> 
> 赞同：0
> 
> 时间：2013-01-27T02:04:07.263
> 
> 标签：asp.net-mvc, view

我想使用 BeginForm 将一些数据发送到服务器以检查它们而无需重新加载页面。

如果我的操作是 void 类型，我会得到一个空白页，当我使用 EmptyResult 时也是如此。也尝试使用 Html.BeginForm，结果相同。

这是代码：

看法：

```
@using(Ajax.BeginForm("putData", "Home", null,  new AjaxOptions {HttpMethod = "POST" }, new { target = "_self" }))
{
    @Html.ValidationSummary(false)
    <fieldset style="padding-bottom: 0" id="Settings">
        <legend>Settings</legend>
        ....
                <td width="180" align="right" class="noborder">
                    <button type="submit" id="checkButton">Check</button>
                </td>
            </tr>
        </table>
    </fieldset>
} 
```

控制器：

```
[HttpPost]
public EmptyResult putData(Settings settings)
{
    ...some checking and updating the model
    return new EmptyResult();
} 
```

希望你们能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:08:03.403

您可以使用 HTTP 204 No Content 状态代码：

```
return new HttpStatusCodeResult(204); 
```

# objective-c - 从 TableView 的 JSON 解析数据数组中提取额外的 NSString

> ID：14543726
> 
> 赞同：0
> 
> 时间：2013-01-27T02:04:15.547
> 
> 标签：objective-c, json

我正在解析我的 json 文件并将其显示在分组表视图中。

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];
    NSDictionary *parks = [allDataDictionary objectForKey:@"Parks"];
    NSArray *arrayOfParks = [parks objectForKey:@"Park"];

    for (NSDictionary *diction in arrayOfParks) {
        NSString *hebName = [diction objectForKey:@"hebName"];

        NSString *engName = [diction objectForKey:@"engName"];
        NSString *latitude = [diction objectForKey:@"lat"];
        NSString *longtitude = [diction objectForKey:@"long"];

        [array addObject:hebName];
    }
    [[self myTableView] reloadData];
}

-(void)tableView:(UITableView*)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *details = [array objectAtIndex:indexPath.row];
    [[[UIAlertView alloc] initWithTitle:@"B7Tour" message:details delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show];
} 
```

它工作得很好，我在我的表格视图中展示了`engName`. 单击表视图中的项目将弹出一个带有 engName 的警报`itself`。

我的问题是：如何提取特定的`latitude`并`longtitude`保存它们？我知道如何在表格视图中显示它们，但我想提取并保存它们以供额外使用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:30:30.410

您可能希望在此方法之外存在字典数组。然后，您可以随时访问它们。然后，您可以在表格视图中维护另一个 ivar，它是您当前的选择。从那里调用 objectForKey: 在当前选定的对象上非常简单。

# java - ArrayAdapter 用于 Android 中的自定义布局？

> ID：14543728
> 
> 赞同：1
> 
> 时间：2013-01-27T02:04:30.600
> 
> 标签：java, android, android-listview, android-arrayadapter

是否可以将适配器添加到非列表元素（即不使用 ListView）？

例如，我有一个 LinearLayout，我想在其中连续拍摄 3 个图像。现在我希望在 ArrayList 内容更改时更改视图。除了 ListView 之外，我找不到其他任何东西的 setAdapter 方法......但可能存在我不想使用 Listview 的情况，例如水平或对角线列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:18:31.107

这种行为似乎并不难用自定义类来模仿。就像是：

```
public class UpdatingArray { // or whatever
    private Something[] myArray; // or a list or whatever generic you like
    private mUpdateListener;

    public UpdatingArray(Something[] array){
        myArray = array;
    }

    public void replace(Something something, int index){
        myArray[index] = something;
        update();
    }

    public Something del1stAddLast(Something something){
        Something first = myArray[0];
        for(int i = 0; i < myArray.length - 1; i++){
            myArray[i] = myArray[i+1];
        }
        myArray[myArray.length - 1] = something;
        update();
        return something; // in case you want it
    }

    // getter(s), if you want them...

    public static abstract class UpdateListener{
        public abstract void onUpdate(Something[] array);
    }

    public void setUpdateListener(UpdateListener) {
        mUpdateListener = listener;
    }

    private void update(){
        this.update(myArray);
    }

    public void update(Something[] array){
        mUpdateListener.onUpdate(array);
    }
} 
```

那么在视图中：

```
public class CustomView extends View implements UpdateListener {
    UpdatingArray uArray;
    Something[] sArray;

    public CustomView(Context context, Something[] array){
        super(context);
        sArray = array;
        uArray = new UpdatingArray(sArray);
        uArray.setUpdateListener(this);
    }

    @Override
    public void onUpdate(Something[] array){
        sArray = array;
        invalidate();
    }

    @Override
    public void onDraw(Canvas canvas){
       // draw your images based on what's in sArray
    }
} 
```

如果您有任何问题，请告诉我。显然其中一些是伪代码。

另一方面，你总是可以扩展这个：http: [//developer.android.com/reference/android/widget/AbsListView.html](http://developer.android.com/reference/android/widget/AbsListView.html)

或者在您的自定义视图中放置一个私有的、未绘制的 ListView 并使用它的方法（组合而不是继承等等）。

# php - 设置 Cookie 后出现 500 内部服务器错误 (PHP)

> ID：14543729
> 
> 赞同：0
> 
> 时间：2013-01-27T02:04:32.100
> 
> 标签：php, html, internet-explorer, google-chrome

现在我的网站主页正在加载，但登录时设置了 cookie 但它说

> **内部服务器错误 服务器遇到内部错误**
> 
> > 配置错误，无法完成您的请求。请联系服务器管理员，告知错误发生的时间以及您可能所做的任何可能导致错误的事情。
> > 
> > 服务器错误日志中可能提供有关此错误的更多信息。

我已经尝试过 IE 和 Chrome --> 显示相同的错误。

**系统一直运行到昨天！不知道现在发生了什么！**

在登录设置页面中，我正在使用.. setcookie("userid",$userid[1],time()+3600); setcookie("密码",$密码,时间()+3600);

登录后它将重定向到包含以下代码的下一页...

```
<? ob_start(); ?>
<?php if (isset($_COOKIE["userid"]) and isset($_COOKIE["password"]))
  {//logged in;
  }
  else
  {
    die("You are not logged in...<meta http-equiv='Refresh' content='0; url=index.php' />");
  }?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My site</title> 
```

... 等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:11:42.130

如果之前可以正常工作突然停止工作： php 升级了，新版本中是否禁用了短标签？

更改`<?`第一行以`<?php`查看是否是问题所在。

您还可以查看服务器错误日志以获取有关 500 错误的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:35:11.497

我的主机提供商将 php 处理器设置从 fastcgi 更改为 ISAPI；

> 它现在有效！

# javascript - 如何基于单选按钮显示和隐藏 HTML 表单

> ID：14543730
> 
> 赞同：0
> 
> 时间：2013-01-27T02:04:49.350
> 
> 标签：javascript, jquery, html

我正在 Javascript/Jquery 中寻找一段代码来显示和隐藏基于单选按钮的 html 表单，以便它也可以在 iPhone/iPad 上工作。

这是我所期待的。

```
选择：
拾音器（单选按钮）
交货（单选按钮）

```

根据上面的选择

```
如果是皮卡。

显示一个带有少量输入的 HTML 表格，以显示取货地点的地址。

如果是交货

显示一个带有少量输入的 HTML 表单以接受送货地址。

并提交数据。

```

有什么建议么..？

我用选择框而不是单选框尝试了以下操作。

```
<pre>

    <!doctype html>
    <head>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>

        <script>
            $(document).ready(function (){
                $("#state").change(function() {
                    // foo is the id of the other select box 
                    if ($(this).val() != "Pickup") {
                        $("#foo").show();
                    }else{
                        $("#foo").hide();
                    } 
                });
            });
        </script>

    </head>

    <body>
    <h3> Select Pickup Or Delivery:</h3>
        <p>
            <select id="state" name="state" style="width: 212px;">
                <option value="Pickup">Pickup</option>
                <option value="Delivery">Delivery</option>
            </select>
        </p>

        <p id="foo" style="display:none;">

    <h4> Pickup Location:</h4>
            123 Main St, Edison NJ
        </p>
        <p id="foo" style="display:none;">
            <form>
    <h3> Enter your address below:</h3>
    <label>Address1</label> <input type="text" name="address1"><br>
    <label>Address2</label> <input type="text" name="address2"><br>
    <label>City</label>     <input type="text" name="city"><br>
    <label>State</label>    <input type="text" name="state"><br>
    <label>Zip Code</label> <input type="text" name="zipcode"><br>
        </p>
    </body>

</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:05:37.743

主要问题是您的 html 无效。`H`标签不能是子标签，`<p>`因此浏览器将它们呈现在外部`<p>`并`<p>`留空，这就是您看不到隐藏内容的原因

此外，您不能在页面中复制 ID，而是使用类。根据定义，ID 是唯一的

`<P>`将带有无效子代的标签更改为`<div>`并调整 ID 使代码工作

演示[http://jsfiddle.net/a2Uh6/](http://jsfiddle.net/a2Uh6/)

# mongodb - 在流星中处理“复杂”mongodb文档的好方法是什么

> ID：14543735
> 
> 赞同：2
> 
> 时间：2013-01-27T02:05:01.090
> 
> 标签：mongodb, meteor

我想存储“carpool_debts”，它基本上将保留欠其他用户的天数。它看起来像这样：

```
carpool_debts{
              _id,
              owner,
              owner_id,
              creditors:[{name,
                          id,
                          amount},
                          {name,
                           id,
                           amount}
                        ]} 
```

该数据结构对于我想要存储的内容是否合理？此外，实现该数据结构似乎维护起来很麻烦。我发现它很麻烦，主要是因为流星中还没有可用的 upsert 类型的函数。与其将债权人作为子文件的列表，不如将债权人存储为分隔字符串？我想知道我是否走在正确的道路上，或者我是否遗漏了什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:14:12.457

您可以像在关系数据库中一样构建 mongo 文档，例如，为债权人和所有者提供单独的集合，并使用 carpool_debts 作为附有金额的链接表：

```
carpool_debts{
              _id,
              owner_id,
              creditor_id,
              amount}

creditors{
          _id,
          name}

owners{
       _id,
       name} 
```

但是，这并没有充分发挥 mongodb 的潜力。特别是如果这是一个包含大量数据的数据库，您可能希望针对最常用的查询对其进行优化，否则会很慢。例如，为了优化查找所有者的债务，您可以在所有者集合中添加所需的数据，为债权人使用子文档，并再次为个人债务使用子文档，类似于您已经完成的操作：

```
owners{
       _id,
       name,
       creditors: {id,
                   name,
                   debts: {
                           amount,
                           due_date}
                  }
      } 
```

同样，如果您经常查找债权人的未偿债务，请在债权人集合中添加债务信息：

```
creditors{
          _id,
          name,
          debtors: {
                    owner_id,
                    owner_name, 
                    debts: { 
                             aount,
                             due_date
                           }
                   }
         } 
```

这样，您只需查找一条记录即可获得所需的所有信息。当然，也有陷阱。首先，这不是很干，但这是故意的。但是您必须记住在发生变化时更新其他表。例如，如果您更改债权人的姓名，您将需要更新与该债权人有债务的所有所有者文件（确保将其编入索引）。这当然会使更新变得更慢（并且数据库更大），但是如果您不经常更新并且更频繁地查找，这不会成为问题。此外，例如，如果债权人可能有数千个未偿债务，您可能必须将其分成链接表，或者更确切地说，链接集合，像这样，所以您不要超过 mongodb 的最大文档大小：

```
creditors{
          _id,
          name,
         }

debtors: {
           owner_id,
           creditor_id, 
           debts: { 
                    amount,
                    due_date
                  }
          } 
```

然后，您为每个债权人-所有者关系提供一份文件。这意味着在查看债权人时要查找更多文件，但仍然只是用于查找所有者的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:46:12.243

这看起来不错，但您也可以考虑将债权人分成自己的集合，并在债务集合中存储一个债权人 ID 数组。这将降低复杂性并使查找和过滤信息更容易。而且它会更加干燥，因为如果同一个债权人有多个债务，你只会将债权人存储在一个地方。

您还可以考虑将收债中的每份文件都作为所有者对单个债权人的单一债务。然后你就只有 id、owner_id 和 creditor_id - 就像关系数据库中的链接表。

# c# - 初次上传后上传其他文件

> ID：14543736
> 
> 赞同：1
> 
> 时间：2013-01-27T02:05:16.463
> 
> 标签：c#, asp.net, .net, asp.net-mvc, html-agility-pack

我有一个接受 .HTML 文件格式的上传脚本。如果 HTML 文本包含`<img>`标签，我需要将这些图像文件从用户硬盘上传到服务器。我正在尝试考虑解决此问题的最佳方法。

我正在使用 HTMLAgilityPack 在 HTML 中搜索 img 标签：

```
 List<string> allTags = new List<string>();

            HtmlDocument doc = new HtmlDocument();
            doc.Load(@"C:\Users\Mike\Documents\website.htm");
            HtmlNodeCollection linkNodes = doc.DocumentNode.SelectNodes("//img");

            // Run only if there are img in the document.
            if (linkNodes != null)
            {
                foreach (HtmlNode linkNode in linkNodes)
                {
                    HtmlAttribute attrib = linkNode.Attributes["src"];
                    string attribString = attrib.Value.ToString();

                    allTags.Add(attribString);
                }
            } 
```

在循环中找到每个图像文件后，如何上传它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T02:48:17.547

您可以使用 system.network.webclient 下载和上传文件，如下所示：

```
Dim b() As Byte

b = client.DownloadData(URL)
client.Credentials = New NetworkCredential(username, password, domain.com)
client.UploadData("ftp://domain.com/filename.ext", b) 
```

# javascript - 特殊字符不适用于 OSX 上的 html 按键事件

> ID：14543737
> 
> 赞同：0
> 
> 时间：2013-01-27T02:05:34.757
> 
> 标签：javascript, jquery, macos, html

以下页面将无法按预期工作。

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <script src="js/jquery.js"></script>
    </head>
    <body>
        <script>
            $('body').keypress(function(e){
                console.log('char: ',String.fromCharCode(e.keyCode));
            });
        </script>
    </body>
</html> 
```

尝试键入特殊字符，例如`á é í ó ú`将打印`a e i o u`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:17:35.527

请注意，jQuery 文档中[`keypress`](http://api.jquery.com/keypress/)说：“<strong>注意：由于该`keypress`事件未包含在任何官方规范中，因此使用它时遇到的实际行为可能因浏览器、浏览器版本和平台而异。” 它还说：“要确定输入了哪个字符，请检查`event`传递给处理函数的对象。虽然浏览器使用不同的属性来存储这些信息，但 jQuery 对`.which`属性进行了规范化，因此您可以可靠地使用它来检索字符代码。”</p>

至少在 Windows 上， using`e.which`在浏览器中给出一致的结果，而`e.keyCode`没有。它会产生输入的字符，例如当我按锐键 (´) 然后按 A 键时 á。如果这在 OSX 中没有发生，那么解释可能是处理密钥的系统级差异；您可能需要检查您是否可以更成功地使用`keydown`（`keyup`它们应该指示按下的键，并且您需要在程序逻辑中从它们中推断出字符）。

# windows-8 - 在 localFolder 中写入文件特定文件夹

> ID：14543741
> 
> 赞同：2
> 
> 时间：2013-01-27T02:06:07.850
> 
> 标签：windows-8, visual-studio-2012, winjs

我正在尝试将图像文件写入 localFolder 存储。我想将它专门写入`images/heroes/`localFolder中的文件夹。有没有办法用我现有的代码做到这一点？

```
return WinJS.xhr({ url: fileToDownloadURL, responseType: 'blob' }).then(
   function (response) {
      var input = response.response.msDetachStream();
      var filename = 'ms-appx:///local/images/heroes/image_name.png';

      Windows.Storage.ApplicationData.current.localFolder.createFileAsync(filename,
      Windows.Storage.CreationCollisionOption.replaceExisting).then(
         function (file) {
            return file.openAsync(Windows.Storage.FileAccessMode.readWrite).then(
               function (output) {
                  return Windows.Storage.Streams.RandomAccessStream.copyAsync(input, output).then(
                     function () {
                        output.flushAsync().then(function () {
                           input.close();
                           output.close();
                     });
                });
          });
     }
   }
)}; 
```

我收到此错误消息：

`0x8007007b - JavaScript runtime error: The filename, directory name, or volume label syntax is incorrect.`

`WinRT information: The specified name (ms-appx:///local/images/heroes/image_name.png) contains one or more invalid characters.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T10:19:08.340

我想到了。想知道的可以拨打

`getFolderAsync('SomeFolderName')`

来自

`Windows.Storage.ApplicationData.current.localFolder`

实例。 `getFolderAsync()`就像任何 promise 函数一样，如果文件夹不存在，将返回错误。从那里你可以运行

`createFolderAsync('SomeFolderName')`

创建文件夹，然后继续您正在执行的操作。在我的情况下，最好创建一个类似的函数`writeFileAsync()`，然后根据文件夹是否首先存在来调用它。

请记住，`getFolderAsync()`一次只能获取一个文件夹，所以像

`getFolderAsync('along/list/of/folders')`

不会工作。我相信，您必须将`getFolderAsync()`电话联系在一起（如果我错了，请纠正我！）。

# java - 带有 alpha 的 24 位 Java BufferedImage 类型

> ID：14543744
> 
> 赞同：0
> 
> 时间：2013-01-27T02:06:51.610
> 
> 标签：java, types, bufferedimage, alpha, bit

有没有办法用 alpha 创建 24 位 BufferedImage？
我使用**BufferedImage bi = new BufferedImage(100,100,BufferedImage.TYPE_INT_ARGB)**并且在文档中找不到具有 alpha 类型的 24 位 BufferedImage 的正确密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:30:09.997

你在你的问题（`BufferedImage.TYPE_INT_ARGB`旗帜）中拥有的东西会做你想做的事。关于您的评论：

> 我不介意使用 32 位 BufferedImage。问题是如何创建它。我在文档中没有找到任何允许创建大于 8 位的 BufferedImage 的标志。

[文档（链接）](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#TYPE_INT_ARGB)使用短语“ 8 位 RGBA 颜色组件”，表示每个像素每个颜色通道 8 位，每个像素总共 4x8 位（每个 RGBA 一个）。

# javascript - 将图像大小传递给周围 div 的 if else 语句

> ID：14543745
> 
> 赞同：0
> 
> 时间：2013-01-27T02:07:12.397
> 
> 标签：javascript, jquery, image, dimension

在我的网站上，主要内容中的所有图像都被包装到一个 div 容器中，如下所示：

```
<div class="imagecontainer">
  <img src="image.jpg" width="300" />
</div> 
```

我需要将图像宽度添加到其周围的 div 中。这适用于：

```
$('.imagecontainer').each(function() {
  $(this).width( $(this).find('img').attr('width') );
}); 
```

但仅当图像具有宽度属性时。如果我使用 width() 元素而不是 attr('width') ，则所有没有 width 属性的图像都显示宽度为 0。

我还尝试了几个 if-else 语句来检查：

1.  如果图像具有宽度属性，则将其添加到其周围的 div 中。
2.  否则使用图像显示的宽度并将其添加到其周围的 div 中。

但没有成功。

有没有办法抓取显示的图像大小并将其添加到其周围的 div 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:08:46.673

Using`.width()` *是*正确的方法，但是您必须等待窗口到`load`，以便在运行代码时已经加载了图像：

```
$(window).on('load', function () {
    $('.imagecontainer').each(function() {
        $(this).width( $(this).find('img').width() );
    });
}); 
```

您可能应该缓存该`$(this)`对象。

# c# - 播放大量声音文件

> ID：14543748
> 
> 赞同：2
> 
> 时间：2013-01-27T02:08:36.283
> 
> 标签：c#, wpf

我正在制作一个字母程序，如果您输入“AB C”并按下按钮，它将播放 A 的声音文件，然后播放 B 的声音文件，依此类推。

目前我使用队列来存储链接到声音文件的所有uri，如下所示

```
switch (word)
{
    case "A": 
        uriQueue.Enqueue(new Uri("Assets/A.wav", UriKind.Relative));
        break;
    case "B":
        uriQueue.Enqueue(new Uri("Assets/B.wav", UriKind.Relative));
        break;
    case "C":
... 
```

除了使用非常长的 switch 语句并在每种情况下手动键入之外，是否有更好的方法来处理大量声音文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T02:17:24.033

如果您`word`始终保证与您的文件名匹配，则可以删除整个`switch`块并将其替换为

```
uriQueue.Enqueue(new Uri("Assets/" + word + ".wav", UriKind.Relative)); 
```

否则，您可以使用

```
Dictionary<string,string> d; 
```

你用字母作为键和路径作为值填充，然后使用

```
uriQueue.Enqueue(new Uri(d[word], UriKind.Relative)); 
```

# java - 加载屏幕 - 从其他类中设置可见的 JFrame

> ID：14543753
> 
> 赞同：0
> 
> 时间：2013-01-27T02:09:29.233
> 
> 标签：java, swing, nullpointerexception, jframe

我想要一个从一帧到另一帧的过渡中的临时加载屏幕。在大型机中，我创建了创建另一个屏幕（就业框架）的加载屏幕。它只是创建它，它还没有显示它。

在就业框架中，我放置了一些在加载框架`loadingframe.setloadingbar()`中调用该`setloadingbar`方法的方法。这可以完美运行，直到达到 100。`getvalue() == 100`它应该设置`employmentframe`可见，但它给了我一个`nullpointerexception`. 这很奇怪，因为创建了就业屏幕。

代码如下 -

**就业框架：**

```
 public EmploymentFrame(int eid, JFrame thisframe) {         
        initComponents();
        //loadCaseFileList();
        e_id = eid;
        loadCourseList();
        EmploymentFrame.thisframe = thisframe;
        LoadingFrame.setLoadingBar(1);
    }
    public static void setEmploymentFrameVisible()
    {
       thisframe.setVisible(true);
    } 
```

**加载框架：**

```
private static JFrame Employmentframe;
private static int oldvalue;
private int e_id;
public LoadingFrame(int type, int eid) {
    initComponents();
    this.e_id = eid;
    if(type == 1)
    {
        Employmentframe = new EmploymentFrame(eid, Employmentframe); 
    }
}

   public static void setLoadingBar(int load)
   {
       oldvalue = LoadingBar.getValue();
       System.out.println(""+oldvalue);
       int newvalue = oldvalue+load;
       System.out.println("nv"+newvalue);
       LoadingBar.setValue(newvalue);
       if(LoadingBar.getValue() == 100)
       {
           EmploymentFrame.setEmploymentFrameVisible();
       }
   } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:53:49.037

堆栈跟踪表明这一行正在抛出`NPE`

```
thisframe.setVisible(true); 
```

`thisframe`也是`null`。_

当你`Employmentframe`在这里创建

```
Employmentframe = new EmploymentFrame(eid, Employmentframe); 
```

由于尚未初始化，您将`null`作为参数传入构造函数。`JFrame`实际上，`EmploymentFrame`不需要传递它自己的实例。

* * *

还有许多其他问题：

*   静态方法在任何 OO 语言中都被视为[糟糕的设计选择](https://stackoverflow.com/questions/4002201/why-arent-static-methods-considered-good-oo-practice)
*   多个`JFrames`被认为难以管理。首选的替代方案是 1.) [CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) on single`JFrame`或 2.) 在需要多个窗口*的*情况下，可以使用`JFrame`带有模态的单个窗口。`JDialog`也在[这里](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)讨论。
*   Java 中的代码约定表明变量应该以小写字母开头。

# php - PHP + 连接到 Amazon ElastiCache

> ID：14543755
> 
> 赞同：2
> 
> 时间：2013-01-27T02:09:44.350
> 
> 标签：php, amazon-web-services, amazon-elasticache

我正在使用以下代码连接到 Elasticache 并安装了 php-memcached 并添加了 /etc/php.d/memcached.ini - 连接没有错误并且似乎可以正常工作：

```
 $server_endpoint = "etc-etc-etc.expalp.cfg.apse1.cache.amazonaws.com";
  $server_port = 11211;
  $dynamic_client = new Memcached();
  $dynamic_client->setOption(Memcached::OPT_CLIENT_MODE, Memcached::DYNAMIC_CLIENT_MODE);
  $dynamic_client->addServer($server_endpoint, $server_port);
  $dynamic_client->set('key', 'value', 60); 
```

我有两个问题：

1.  我如何知道是否启用了一致散列 - 我已经阅读了它的重要性，但不知道如何启用它或检查它是否启用。

2.  有没有办法可以看到写入 Elasticache 的内容？我是新手，我希望能够确认数据正在写入缓存。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-19T12:37:05.567

尝试这个：

```
<?php

$server_endpoint = "xxx.xx.xfg.sae1.cache.amazonaws.com";
$server_port = 11211;

if (version_compare(PHP_VERSION, '5.4.0') < 0) {
    //PHP 5.3 with php-pecl-memcache
    $client = new Memcache;
    $client->connect($server_endpoint, $server_port);
    //If you need debug see $client->getExtendedStats();
    $client->set('myKey', 'My Value PHP 5.3');
} else {
    //PHP 5.4 with php54-pecl-memcached:
    $client = new Memcached;
    $client->addServer($server_endpoint, $server_port);
    $client->set('myKey', 'My Value PHP 5.4');
}

echo 'Data in the cluster: [' . $client->get('myKey') . ']'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:37:21.717

1.  它由 ini 设置处理[更多在手册](http://us1.php.net/manual/en/memcached.configuration.php#ini.memcached.sess-consistent-hash)
2.  我想最好的方法是使用 memcached 客户端工具。或者只是做一个测试，你能拿回你写的东西吗？

# c# - LockScreen.SetImageUri ArgumentException 尽管 Uri 工作

> ID：14543757
> 
> 赞同：1
> 
> 时间：2013-01-27T02:10:33.643
> 
> 标签：c#, windows-phone-8

我无法将锁定屏幕设置为图像，但我认为这不是 Uri 的问题，而是图像本身的问题。

当我尝试将图像设置为具有大致适合锁屏尺寸的下载图像时，它可以工作，当图像不是太大时也是如此。但是当我尝试将锁屏图像设置为来自相机（诺基亚 Lumia 920）的照片时，它给了我这个参数异常。

我的代码：

// 来自 StorageHelper 类：

```
public async Task<bool> SavePhotoAsync(Photo photo, WriteableBitmap source, int height, int width)
    {
        return await Task.Run(() =>
            {
                try
                {
                    lock (StorageLock)
                    {
                        ObservableCollection<Photo> observableCollection = photo.PhotoAlbum.Photos as ObservableCollection<Photo>;
                        if (observableCollection == null)
                        {
                            return false;
                        }

                        if (!IsolatedStorageFile.GetUserStoreForApplication().DirectoryExists(photo.PhotoAlbum.Name))
                        {
                            IsolatedStorageFile.GetUserStoreForApplication().CreateDirectory(photo.PhotoAlbum.Name);
                        }

                        string fileName = photo.PhotoAlbum.Name + "/" + observableCollection.IndexOf(photo).ToString(CultureInfo.InvariantCulture);
                        if (IsolatedStorageFile.GetUserStoreForApplication().FileExists(fileName))
                        {
                            IsolatedStorageFile.GetUserStoreForApplication().DeleteFile(fileName);
                        }

                        IsolatedStorageFileStream fileStream =
                            IsolatedStorageFile.GetUserStoreForApplication().CreateFile(fileName);

                        int targetWidth = 0;
                        int targetHeight = 0;
                        if (source.PixelWidth < width || source.PixelHeight < height)
                        {
                            targetWidth = source.PixelWidth;
                            targetHeight = source.PixelHeight;
                        }
                        else
                        {
                            if (source.PixelWidth > source.PixelHeight)
                            {
                                double percentage = ((double)height)/((double) source.PixelHeight);
                                targetHeight = height;
                                targetWidth = (int) (source.PixelWidth * percentage);
                            }
                            else
                            {
                                double percentage = ((double)width) / ((double)source.PixelWidth);
                                targetWidth = width;
                                targetHeight = (int)(source.PixelHeight * percentage);
                            }
                        }

                        source.SaveJpeg(fileStream, targetWidth, targetHeight, 0, 100);

                        fileStream.Close();
                        return true;
                    }
                }
                catch (Exception e)
                {
                    return false;
                }

            });
    } 
```

// StorageHelper 结束

// 从我的 LockscreenManager 类：

```
public static async void SetLockScreenImages()
    {
        LockScreenRequestResult result = await LockScreenManager.RequestAccessAsync();
        if (result == LockScreenRequestResult.Granted)
        {
            Uri uri = null;
            try
            {
                uri = LockScreen.GetImageUri();
            }
            catch (Exception)
            {

            }

            List<Uri> uriList = await BuildUriList();
            if (uriList.Count == 0)
            {
                return;
            }

            int index = 0;
            if (uri != null && uriList.Any(uriEntry => uri.ToString() == uriEntry.ToString()))
            {
                index = (uriList.IndexOf(uri) + 1) % uriList.Count;
            }

            if (InterfaceProvider.GetIStorageService().FileExists(uriList[index]))
            {
                try
                {
                    LockScreen.SetImageUri(uriList[index]);
                }
                catch (Exception)
                {

                }

            }
        }
    } 
```

// Lockscreenmanager 类结束

您可以忽略我缩小图像的尝试，它没有帮助（但图像仍然正确保存）。我能做什么？

# jquery - 单击时删除 div 和内容

> ID：14543760
> 
> 赞同：1
> 
> 时间：2013-01-27T02:11:19.040
> 
> 标签：jquery

我有以下代码不会从滑块中删除 div：

```
$("#slider-next").click(function(){         
    $("#shortslide img").animate({'width':'0px', 'left':'0'});
    $("#dandr-slider #shortslide").remove();
}); 
```

有人可以让我知道我做错了什么吗？提前致谢。

这是 HTML 的一部分：

```
<div id="dandr-scroller" style="border:1px solid lime;width:790px;height:477px;position:absolute; right:-790px; top:0px;z-index:2000;" class="hide">
    <div id="slider-nav">
        <a href='#' id='slider-prev' style="position:absolute; top:265px; height:27px; left:10px; width:20px; z-index:100; cursor:pointer;"><img src="dandr-arrow-left.png" style="border:0; height:27px; width:20px;" /></a>
        <a href="#" id="slider-next" style="position:absolute; top:265px; left: 740px; height:27px; width:20px; z-index:100; cursor:pointer;"><img src="dandr-arrow-right.png" style="border:0; height:29px; width:22px;" /></a>
    </div>

    <div id="dandr-slider">
        <div id="shortslide" ><img src="trendessential_2.png"  style="border:0; cursor:pointer;"   /></div>
        <div><img src="dandr-0.jpg" style="width:790px; height:477px; border:0; cursor:pointer;" /></div>
        <div><img  src="dandr-1.jpg" style="width:790px; height:477px; border:0; cursor:pointer;" /></div>
        <div><img  src="dandr-2.jpg" style="width:790px; height:477px; border:0; cursor:pointer;" /></div>
        <div><img  src="dandr-3.jpg" style="width:790px; height:477px; border:0; cursor:pointer;" /></div>
        <div><img src="dandr-4.jpg" style="width:790px; height:477px; border:0; cursor:pointer;" /></div>
        <div><img src="dandr-1.jpg" style="width:790px; height:477px; border:0; cursor:pointer;" /></div>
    </div>
</div> 
```

这是整个脚本：

```
<script language="javascript" type="text/javascript">
  fadeInterval = 2000;
  $("#dandr-right-arrow").hide();
  $("#dandr-left-arrow").hide();
  $("#dandr-scroller").hide();
  $("#dandr-slider").hide();
  $(document).ready(function () {
    $("#dandr-container").css('display', '');
    $("#message").hide();
    $("#message").delay(600).fadeIn(fadeInterval);
    $("#dandr-copy1").delay(1500).animate({ "right": "+=790px" }, "slow");
    $("#dandr-copy2").delay(1600).animate({ "right": "+=790px" }, "slow");
    $("#dandr-copy3").delay(1700).animate({ "right": "+=790px" }, "slow");
    $("#dandr-copy4").delay(1800).animate({ "right": "+=790px" }, "slow");
    $("#dandr-copy5").delay(1900).animate({ "right": "+=790px" }, "slow");
    $("#dandr-copy").delay(1400).animate({ "right": "+=790px" }, "slow", function () {
      setTimeout('ScrollInit()', 1000);
    });
  });
  function ScrollInit() {
    $("#slider-prev").hide();
    $("#dandr-scroller").delay(1000).animate({ "right": "+=390px" }, "slow").show();
    $("#slider-next").css({'position': 'absolute',  'top': '265px', 'left': '350px'});
    $("#slider-next").click(function(){
      $("#test").hide();
      $("#shortslide img").animate({'width':'0px', 'left':'0'});
      $("#dandr-slider #shortslide").remove();
      $("#dandr-copy").hide();
      $("#message").hide();
      $("#dandr-copy1").hide();
      $("#dandr-copy2").hide();
      $("#dandr-copy3").hide();
      $("#dandr-copy4").hide();
      $("#dandr-copy5").hide();
      $("#dandr-scroller").animate({ "right": "0" }, "slow");
      $("#slider-prev").show();
      $("#slider-next").css({'position': 'absolute',  'top': '265px', 'left': '740px'});
    });
    $('#dandr-slider').cycle({
      fx: 'scrollHorz',
      speed: 1200,
      timeout: 0,
      next: $('#slider-next'),
      prev: $('#slider-prev'),
      startingSlide: 0,
      easing: "easeInOutQuint"
    });
  }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:28:46.987

此问题的解决方法是在第一张幻灯片中将图像向左浮动，向右动画 +=390（半角）

# php - 动态添加输入元素的层次结构并在 php 或 jsp 中检索值

> ID：14543761
> 
> 赞同：0
> 
> 时间：2013-01-27T02:11:33.047
> 
> 标签：php, jquery, jsp, database-design

我有一个数据库结构如下：

```
 tbl_topic                                 tbl_chapter
 -pk id (AutoIncrement)                    -pk id
 -fk parent_id  (references itself)        -chapter_name
 -fk chapter_id (references tbl_chapter)
 -name
 -description
 -teaching_hours
 -teaching_periods 
```

一个主题有章节，章节有主题（主题可能有子主题等）。首先，我需要设计一个表单，用户可以在其中向特定章节添加主题，如下所示：

```
 Chapter 1: Science: (Add topic +)
    1.Topic:   Name:_____  Description: _____ Hours _____(Add topic +)
       Topic   Name:_____  Description: _____ Hours _____(Add topic +)
          Topic   Name:_____  Description: _____ Hours _____(Add topic +)
    2.Topic:   Name:_____  Description: _____ Hours _____(Add topic +)
       Topic   Name:_____  Description: _____ Hours _____(Add topic +) 
```

我只需要一个算法或步骤，或者一个关于如何分层插入元素并以某种语言（如 php 或 jsp）获取元素层次结构的提示。另外，如果这个数据库设计不好，请给我一个更好的结构方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:54:44.923

这是我在我的项目中所做的

处理主页上的新闻对象 .News 将来自数据库作为 json 字符串

然后

```
if(!(news ==null)){
         for(var i=0; i < news.list.length; i++){
        $(news.list[i]).attr("clientid" ,i);
        var listItemDiv = $("<li id="+news.list[i].clientid+"><h3>"+news.list[i].title+"</h3><span class=date>Department:"+getDepartmentName(news.list[i])+" "+getSubDepartMentName(news.list[i])+"<span><span class=date>Opening Date:"+news.list[i].startDate+"<span><a target='_blank' style='float:right' href='docdetails?docid="+news.list[i].id+" ' >Read More..</a></li></br>");
            $('#newsitems').append($(listItemDiv));

        } 
```

在你的情况下，你有另一个循环来迭代`chapter.list object`s

祝你好运 。

# c# - ASP.NET MVC 4 - 实体关系

> ID：14543764
> 
> 赞同：1
> 
> 时间：2013-01-27T02:12:08.513
> 
> 标签：c#, .net, asp.net-mvc-4, ef-code-first, entity-framework-5

我正在 MVC 4 和 Entity 5 CF 中构建一个非常基本的站点，让我的 ViewModels、Automapper 和一个通用 DAL 启动并运行，但我被困在这个问题上：

基本上，我有三张桌子；BlogPost、标签（包含 TagId 和 Name - 只是标签列表，例如 C#、.NET、Ruby 等）和 EntryTags（BlogPostId 和 TagId - BlogPost 和相关标签的列表）。我创建了一个 ViewModel，它获取所有 BlogPosts 和相关标签，它工作正常，除了标签列表仅在每个博客旁边显示 EntryTag ID，我不确定如何以及在何处将其链接到标签表获取标签的名称。

我正在使用的模型示例：

博文模型：

```
public abstract class BlogPost
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int BlogPostId { get; set; }

    [Required, MaxLength(20)]
    public string Title { get; set; }

    [Required]
    public string Content { get; set; }

    [Required]
    public DateTime DateCreated { get; set; }

    [Required]
    public DateTime DateModified { get; set; }

    public virtual ICollection<EntryTag> EntryTags { get; set; }
} 
```

标签型号：

```
[Table("Tag")]
public class Tag
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int TagId { get; set; }

    [Required]
    [MaxLength(20)]
    public string Name { get; set; }
}

[Table("EntryTag")]
public class EntryTag
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int EntryTagId { get; set; }

    [Required]
    public Entry Entry { get; set; }

    [Required]
    public Tag Tag { get; set; }
} 
```

视图模型：

```
public class BlogIndexViewModel
{
    public int EntryId { get; set; }
    public string Title { get; set; }
    public string Content { get; set; }
    public DateTime DateCreated { get; set; }
    public virtual ICollection<EntryTag> EntryTags { get; set; }
} 
```

模型和视图模型之间的控制器自动映射

```
IEnumerable<BlogPost> blogPosts = _genericRepository.GetAll();
IEnumerable<BlogIndexViewModel> viewModel = Mapper.Map<IEnumerable<BlogPost>, IEnumerable<BlogIndexViewModel>>(blogPosts); 
```

和博客索引页面：

```
@Html.DisplayFor(modelItem => item.EntryTags) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:03:22.850

您必须使用如下方式创建您的`EntryTag`课程`virtual` `navigation properties`。

```
[Table("EntryTag")]
public class EntryTag
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int EntryTagId { get; set; }

    [Required]
    public virtual Entry Entry { get; set; }

    [Required]
    public virtual Tag Tag { get; set; }
} 
```

# php - 如果文件夹中的文件名与数据库中的文件名不同，如何显示图像？

> ID：14543765
> 
> 赞同：5
> 
> 时间：2013-01-27T02:12:11.653
> 
> 标签：php, image, filenames, image-upload

我目前正在我的 PHP 页面上显示数据库中的文件名。但是，服务器文件夹上的某些文件名有不同的大小写。所以数据库可能会说image1.jpg，而服务器上的文件名可能会说“image1.JPG”大写。这对于某些文件是随机的。这些文件不会显示。有没有办法可以使用一个函数来显示它。我们在这里谈论超过 1000 个文件。因此，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T02:15:13.270

我会运行一个自定义的 file_exists() 函数来检查图像的扩展名是哪种情况。

使用此自定义函数检查大小写是否正确（将其传递为小写，如果返回 1，则使用小写，如果返回 2，则使用大写）：

```
function file_exists_case($strUrl)
{
    $realPath = str_replace('\\','/',realpath($strUrl));

    if(file_exists($strUrl) && $realPath == $strUrl)
    {
        return 1;    //File exists, with correct case
    }
    elseif(file_exists($realPath))
    {
        return 2;    //File exists, but wrong case
    }
    else
    {
        return 0;    //File does not exist
    }
} 
```

不过，当你有时间时，你真的应该进去把所有的文件扩展名都改成小写。

您可以通过以下目录运行 glob( )：http: [//php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php) 并使用 strtolower() 将每个文件扩展名重命名为小写：[http:// php.net/manual/en/function.strtolower.php](http://php.net/manual/en/function.strtolower.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:35:15.490

不确定是否可以选择将扩展名转换为小写。但是，如果没有其他系统依赖于某些要大写的扩展，那么您可以运行如下内容：

```
find . -name '*.*' -exec sh -c '
a=$(echo {} | sed -r "s/([^.]*)\$/\L\1/");
[ "$a" != "{}" ] && mv "{}" "$a" ' \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T02:32:42.603

用来`file_exists`做检查。并将其扩展以弥补您面临的问题。我正在使用`replace_extension()` [这里显示](https://stackoverflow.com/questions/193794/how-can-i-change-a-files-extension-using-php)的函数。

```
<?php

// Full path to the file.
$file_path = '/path/to/the/great.JPG';

// Call to the function.
echo check_if_image_exists($file_path, $file_ext_src);

// The function itself.
function check_if_image_exists ($file_path) {

    $file_ext_src = end(explode('.', $file_path));

    if (file_exists($file_path)) {
        return TRUE;
    }
    else {

        if (ctype_lower($file_ext_src)) {
            $file_ext_new = strtoupper($file_ext_src); // If lowercase make it uppercase.
        }
        else if (ctype_upper($file_ext_src)) {
            $file_ext_new = strtolower($file_ext_src); // If uppercase make it lowercase.
        }

        // Now create a new filepath with the new extension & check that.
        $file_path_new = replace_extension($file_path, $file_ext_new);
        if (file_exists($file_path_new)) {
            return TRUE;
        }
        else {
            return FALSE;
        }
    }
}

// Nice function taken from elsewhere.
function replace_extension($filename, $new_extension) {
    $info = pathinfo($filename);
    return $info['filename'] . '.' . $new_extension;
}

?> 
```

# python - BeautifulSoup：从子节点中提取值

> ID：14543767
> 
> 赞同：5
> 
> 时间：2013-01-27T02:12:27.943
> 
> 标签：python, python-2.7, beautifulsoup

我有以下html：

```
<td class="section">
    <div style="margin-top:2px; margin-bottom:-10px; ">
    <span class="username"><a href="user.php?id=xx">xxUsername</a></span>
    </div>
    <br>
<span class="comment">
A test comment
</span>
</td> 
```

我只想在 SPAN 标记中检索 xxUsername 和注释文本。到目前为止，我已经这样做了：

```
results = soup.findAll("td", {"class" : "section"}) 
```

它确实获取了我上面提到的模式的所有 html 块。现在我想在一个循环中检索所有子值？可能吗？如果没有，那么我如何获取子节点信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T02:28:43.077

你可以试试这样的。它基本上完成了您在上面所做的事情 - 首先遍历所有`section`-classed `td`，然后遍历其中的所有`span`文本。这会打印出类，以防万一您需要更加严格：

```
In [1]: from bs4 import BeautifulSoup

In [2]: html = # Your html here

In [3]: soup = BeautifulSoup(html)

In [4]: for td in soup.find_all('td', {'class': 'section'}):
   ...:     for span in td.find_all('span'):
   ...:         print span.attrs['class'], span.text
   ...:         
['username'] xxUsername
['comment'] 
A test comment 
```

或者使用比必要的更复杂的单线，将所有内容存储回您的列表中：

```
In [5]: results = [span.text for td in soup.find_all('td', {'class': 'section'}) for span in td.find_all('span')]

In [6]: results
Out[6]: [u'xxUsername', u'\nA test comment\n'] 
```

或者在同一个主题上，一个字典，键是类的元组，值是文本本身：

```
In [8]: results = dict((tuple(span.attrs['class']), span.text) for td in soup.find_all('td', {'class': 'section'}) for span in td.find_all('span'))

In [9]: results
Out[9]: {('comment',): u'\nA test comment\n', ('username',): u'xxUsername'} 
```

假设这个更接近你想要的，我建议重写为：

```
In [10]: results = {}

In [11]: for td in soup.find_all('td', {'class': 'section'}):
   ....:     for span in td.find_all('span'):
   ....:         results[tuple(span.attrs['class'])] = span.text
   ....:         

In [12]: results
Out[12]: {('comment',): u'\nA test comment\n', ('username',): u'xxUsername'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:55:40.357

要从其中一个`username`或`comment` `<span>`元素中获取文本：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup(html)
for el in soup('span', ['username', 'comment']):
    print el.string, 
```

### 输出

```
xxUsername 
A test comment 
```

# android - 人工退款问题

> ID：14543771
> 
> 赞同：2
> 
> 时间：2013-01-27T02:13:56.667
> 
> 标签：android, google-play, uninstallation

我有一位客户要求退款（因为他在 Play 商店中的 15 分钟窗口已过期）。如果我手动给他退款，Play商店（据我所知）仍然允许用户在卸载后重新安装，并且该应用程序仍然在他的手机上并且可以使用。

我需要知道解决这个问题的方法，也许我可以在应用程序中编码。我考虑让应用程序获取设备 ID 并将其上传到远程服务器，如果它在数据库中，那么应用程序会弹出一个窗口并且不会运行。这样做的问题是它特定于该设备，如果用户得到一部新手机，或者安装在不同的设备上，它将起作用。

我该怎么做才能做到这一点，以便在给某人手动退款后，他们无法重新安装。我不希望人们能够获得退款，然后免费使用该应用程序。

我在这里看到了一些关于这类事情的其他类似问题，但由于与编程无关，它们都被关闭了。我想确保它知道我在问一个程序问题，因为我希望对应用程序进行某种检查。

# android - 进行过多的转换“onDrawFrame”会产生滞后吗？

> ID：14543772
> 
> 赞同：0
> 
> 时间：2013-01-27T02:14:04.290
> 
> 标签：android, opengl-es, rajawali

我正在使用 Rajawali 框架制作基于 OpenGL ES 的动态壁纸。为了实现我的许多动画效果，我创建了一些从 onDrawFrame 方法调用的函数。这些函数从简单的 x,y,z 旋转到带有模拟风或其他随机运动的条件语句的更复杂的方程。它目前运行良好，并且响应速度非常快，尤其是在睡眠和唤醒设备时。

随着我的动态壁纸变得越来越复杂，我担心我的粗略解决方案最终会开始导致性能问题。是这样吗？

有没有更好的方法来进行这些类型的循环或重复更改，比如制​​作后台线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:58:54.907

尝试将尽可能多的计算转移到顶点和片段着色器中。比 CPU 限制更容易达到其他限制。没有示例并且不深入了解您要存档的内容，没有人可以轻松回答您的问题。

最佳提示：在开发过程中经常和早期进行测量。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T17:34:56.763

Rajawali onDrawFrame() 方法由计时器调用，该计时器使用 frameRate() 方法设置。这提供了比估计线程休眠更平滑的动画（不建议使用的替代解决方案）。

如果您的速度为 100 fps，这将在帧之间为您提供 10 毫秒的时间来进行计算——仅此而已，但这对于现代 CPU 来说是很多时间。

将 GPU 计算放在单独的线程中是有问题的，因为这不是线程安全的。您可以将任何非 GPU 计算放在单独的线程中，但这可能会导致同步问题。

着色器被编译为本机代码，但实际上应该仅限于在完成所有昂贵的 3D 计算后渲染实际像素（始终是瓶颈）所需的按位（整数）操作。

例如，浮雕着色器将负责覆盖两个立体帧。

希望这可以帮助！

# firefox - Firefox 无法在笛卡尔平面上的象限 2 和 4 中围绕轴旋转 3d

> ID：14543773
> 
> 赞同：2
> 
> 时间：2013-01-27T02:14:06.360
> 
> 标签：firefox, css, css-transforms

我在使用 Firefox CSS3 转换时遇到了一些奇怪的行为。

这个 JSfiddle 说明了我的问题：http: [//jsfiddle.net/R4j6G/2/](http://jsfiddle.net/R4j6G/2/)

基本上，rotate3d 变换函数将旋转轴作为前三个参数，将角度作为最后一个。仅处理 XY 平面（我尚未在 Z 维度上对此进行测试），当 x 和 y 坐标均为正或均为负时，firefox 似乎仅按预期旋转。

作品：

```
-moz-transform: rotate3d(1, 1, 0, 180deg); 
```

不起作用（显示与 ^ 相同）：

```
-moz-transform: rotate3d(1, -1, 0, 180deg); 
```

我似乎无法破译可能导致这种情况的原因，或者是否有任何变通方法可以使象限 II 或 IV 中的轴围绕轴旋转工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:02:47.257

好的，正如我所预料的那样，这是 Firefox 中的一个错误。

[https://bugzilla.mozilla.org/show_bug.cgi?id=781701](https://bugzilla.mozilla.org/show_bug.cgi?id=781701)

无论使用 rotate3d 还是 matrix3d，只要旋转角度为 180 度且旋转轴位于象限 2 或 4，问题仍然存在。

这可以通过使用 180 度以外的任何其他旋转角度来规避（我现在使用 179 度）。

# zend-framework2 - 使用 pyrus 安装 Zend Framework 2

> ID：14543774
> 
> 赞同：0
> 
> 时间：2013-01-27T02:14:13.557
> 
> 标签：zend-framework2, pear, centos5, pyrus

尝试下载 Zend Framework2 view pyrus 时出现错误。这是错误：

```
# php pyrus.phar . install zf2/Zend_Framework#Standard
Using PEAR installation found at /usr/share/pear/pyrus
PHP Warning:  Invalid argument supplied for foreach() in phar:///usr/share/pear/pyrus/pyrus.phar/Pyrus_Pharer-0.1.0/php/Pyrus/Package/Dependency/Set/PackageTree.php on line 91
PHP Notice:  Undefined variable: extra in phar:///usr/share/pear/pyrus/pyrus.phar/Pyrus_Pharer-0.1.0/php/Pyrus/Package/Dependency/Set/PackageTree.php on line 277
Pyrus\Installer\Exception: Dependency validation failed for some packages to install, installation aborted
 Pyrus\Package\Dependency\Set\Exception: No versions of </< or of its dependencies that can be installed because of 
```

我在“usr/share/pear/pyrus/”中安装了 pyrus。任何想法为什么它不起作用？我什至尝试像这样安装另一个 Zend 库，但我得到了同样的错误消息。

$ php pyrus.phar 。安装 zf2/Zend_Http

列出频道我得到这个：

```
[root@apollo pyrus]# php pyrus.phar list-channels
Using PEAR installation found at /usr/share/pear/pyrus
Listing channels [/usr/share/pear/pyrus]:
__uri (__uri)
doc.php.net (phpdocs)
packages.zendframework.com (zf2)
pear.php.net (pear)
pear2.php.net (pear2)
pecl.php.net (pecl)
pyrus.net (pyrus) 
```

然后，当我尝试从 zf2 获取远程包列表时，它给了我一个错误：

```
# php pyrus.phar remote-list zf2
Using PEAR installation found at /usr/share/pear/pyrus
Remote packages for channel zf2:
PHP Warning:  current() expects parameter 1 to be array, string given in phar:///usr/share/pear/pyrus/pyrus.phar/Pyrus_Pharer-0.1.0/php/Pyrus/Channel/RemoteCategories.php on line 66 
```

Zends 存储库中似乎一定有错误，因为如果我将它们列出为 pear，我会使用以下命令获得它们的完整列表：

```
# php pyrus.phar remote-list pear 
```

难道我做错了什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:01:51.320

FWIW 我得到的和你完全一样，并且假设 Zend repo 被搞砸了——我无法开始猜测时间尺度以期望它可能不再被搞砸。我已经改用作曲家包安装程序，这似乎更有希望；）

米

# javascript - 检查一个点是否穿过一条线

> ID：14543776
> 
> 赞同：1
> 
> 时间：2013-01-27T02:15:01.483
> 
> 标签：javascript, function, canvas, line, online-game

我正在用 HTML5 画布编写游戏。如果一条线触及自己或对手线的任何点，则该线停止移动。我写的函数如下。

```
function hasPoints(x, y) {
  for (var i = 0; i < points.length; i++) {

    if (Math.abs(points[i][0] - x) < 2 && Math.abs(points[i][1] - y) < 2) {
        return true;
        break;
    }
  }
  return false;
}

//check if this point crosses other players' points
if (hasPoints(p1.x,p1.y) || canPlay==false) {
    clearLoop();
}else{
    context.fillStyle = "green";
    context.fillRect(p1.x,p1.y, 5,5);
    addPoints(p1.x,p1.y);       
    sendMyPoints();     
    loopTimer = setTimeout('drawLine()', 50);
} 
```

它大部分时间都有效。但在某些特殊情况下（如下图所示），它根本无法返回 false。

任何人都可以帮助我改进此功能，使其完美运行吗？

![线崩溃](../Images/6a99a4abeb479f17d7a1915de18c1e8d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:02:50.943

不要使用点，使用向量。向量数组。要找出一个点是否与一条线（矢量）接触，只需用两个点安装一个三角形并进行点矢量分析，如果三角形的面积接近零（设置一个限制），那么这个接触。

y1 x1 1
y2 x2 1 = `(y1*x2*1)+(x1*1*y3)+(1*y2*x3)-(x1*y2*1)-(y1*1*x3)-(1*x2*y3)`
y3 x3 1
结果应该接近于零（0.012121 ...）
这是一种发现线是否与目标对齐的方法
[http://en.wikipedia.org/wiki/行列式](http://en.wikipedia.org/wiki/Determinant)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T03:50:15.570

对向量使用数学表达式，然后您可以检查向量是否相互交叉

# mysql - 使用此代码从 MySQL 数据库调用坐标会导致模拟器显示 SIGABRT 错误。怎么了？

> ID：14543777
> 
> 赞同：0
> 
> 时间：2013-01-27T02:15:04.160
> 
> 标签：mysql, json, crash, mkmapview, sigabrt

当我使用此代码尝试从 MySQL 数据库调用 Lat & Long 坐标（并将它们显示在 MapView 上）时，应用程序运行良好。一切似乎都正常，但由于某种原因，xcode 在地图加载之前暂停了模拟器，并向我抛出了一个 SIGABRT。知道为什么吗？见下文：

**MapViewController.h**

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

    @interface MapViewController : UIViewController  <MKMapViewDelegate> 

        @property (nonatomic, strong) IBOutlet MKMapView *mapView;
        @property (nonatomic, retain) NSMutableArray *dispensaries;
        @property (nonatomic, retain) NSMutableData *data;

    @end 
```

**MapViewController.m**

```
#import "MapViewController.h"
#import "MapViewAnnotation.h"

    @implementation MapViewController
    @synthesize mapView;
    @synthesize dispensaries;
    @synthesize data;

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
        if (self) {
            // Custom initialization
        }
        return self;
    }

    - (void)didReceiveMemoryWarning
    {
        // Releases the view if it doesn't have a superview.
        [super didReceiveMemoryWarning];

        // Release any cached data, images, etc that aren't in use.
    }

    #pragma mark - View lifecycle

    - (void)viewDidLoad {

    [super viewDidUnload];

            NSLog(@"Getting Device Locations");

            NSString *hostStr = @"http://stylerepublicmagazine.com/dispensaries.php";
            NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
            NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
            NSLog(@"server output: %@", serverOutput);
            NSMutableArray *array = (NSMutableArray *)dispensaries;
            dispensaries = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];

            for (NSDictionary *dictionary in array) {

                CLLocationCoordinate2D coord = {[[dictionary objectForKey:@"lat"] doubleValue], [[dictionary objectForKey:@"lng"] doubleValue]};

                MapViewAnnotation *ann = [[MapViewAnnotation alloc] init];
                ann.title = [dictionary objectForKey:@"Name"];
                ann.coordinate = coord;
                [mapView addAnnotation:ann];

        [mapView setMapType:MKMapTypeStandard];
        [mapView setZoomEnabled:YES];
        [mapView setScrollEnabled:YES];

        self.mapView.delegate = self;

    }

    }

    - (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation

    {
        MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(userLocation.coordinate, 800, 800);
        [self.mapView setRegion:[self.mapView regionThatFits:region] animated:YES];

    MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
    point.coordinate = userLocation.coordinate;
    point.title = @"You Are Here";
    point.subtitle = @"Your current location";

    [self.mapView addAnnotation:point];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T05:10:01.560

好的，现在你有了 JSON。您将不得不使用[NSXMLParser](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)对其进行解码。或者，如果你想把它变成对象，你可以使用我在 GitHub 上的开源库，它允许你简单地实现 NSCoding 协议并将对象实例化（或将它们编码）为 JSON。就在[这里](http://github.com/ontometrics/JSONCoding.git)。

# makefile - 调试 Makefile

> ID：14543779
> 
> 赞同：3
> 
> 时间：2013-01-27T02:15:29.347
> 
> 标签：makefile, gnu-make

一些 Makefile 包含这个 -

```
ifneq ($(call try-cc,$(SOURCE_LIBUNWIND),$(FLAGS_UNWIND),libunwind),y)
        msg := $(warning No libunwind found, disabling post unwind support. Please install libunwind-dev[el] >= 0.99);
        NO_LIBUNWIND := 1 
```

每当我运行这个 make 时，我都会收到错误消息

```
warning No libunwind found, disabling post unwind support. Please install libunwind-dev[el] >= 0.99 
```

我想调试这个问题 - 我想知道导致这个问题的值`SOURCE_LIBUNWIND`-`FLAGS_UNWIND` 我如何将这些值打印在标准输出上以进行调试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T04:22:52.840

GNU`make`提供了几个可以用来打印变量值的函数`$(error ...)`：`$(warning ...)`和`$(info ...)`. [手册在第8.12 节控制 Make 的函数](http://www.gnu.org/software/make/manual/html_node/Make-Control-Functions.html#Make-Control-Functions)中提到了它们。

此外，您可以使用命令行参数`-p`或`--print-data-base`让 make 打印所有规则和变量的值。将输出重定向到一个文件并分析它可能会让您更好地理解为什么这些值是它们的值。有关一些额外信息，请参阅第[9.7 节选项摘要。](http://www.gnu.org/software/make/manual/html_node/Options-Summary.html#Options-Summary)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T04:08:49.163

在 makefile 中打印宏 X 的值 - 只需添加行。（一种 printf ）

$(警告 X 是 $(X))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T13:41:34.890

Reinier 和 Shraddha 对所提出的问题有正确的答案，但我不确定这是正确的问题。

在我看来（仅基于发布的 makefile 片段），这些变量更有可能是您可以*设置*的变量，而不是*已经*设置的变量。那就是它们将是您控制用于定位 libunwind 的位置的方式。

因此，如果 try-cc 调用失败，我假设这意味着您根本没有安装 libunwind，或者您将它安装在非标准系统位置并且没有设置这些变量来告诉 make 关于它.

# javascript - 新的不返回构造函数function.prototype对象

> ID：14543781
> 
> 赞同：0
> 
> 时间：2013-01-27T02:16:00.797
> 
> 标签：javascript, google-chrome

我对构造函数的理解，就是`new` 返回构造函数的原型对象。但是，在下面的代码中，`new Customer()`似乎返回了 Customer 对象，我原以为它会返回 Customer.prototype，即 Person。我的理解错了吗？

```
function Person(name){
this.name = name;
}

function Customer(){
}
//* inherit from  Person This creates an object from Person.Prototype
Customer.prototype = new Person("James");

var newCustomer = new Customer();//*this should return Customer. prototype object-             
                                   which is  Person*// 

newCustomer.sayHello = function() { 
console.log( "newCustomer  " + this.name + "says Hello" ) ;         
 }
 newCustomer.sayHello(); 
```

请参阅调试器屏幕截图。

# c++ - 如何在 C++ 中使用替换创建排列？

> ID：14543782
> 
> 赞同：4
> 
> 时间：2013-01-27T02:16:01.023
> 
> 标签：c++, algorithm, permutation

注意：在阅读了 templatetypedef 的帖子后，似乎我正在尝试计算一组与自身的笛卡尔积一定次数。

我不完全确定我要解决的问题是什么，但对我来说似乎非常接近置换。

所以基本上，我的问题是这个。给定一个数组，例如：

```
{1, 2, 3} 
```

和一个大小，比如 2。我需要输出：

```
{1,1},{1,2},{1,3},{2,1},{2,2},... 
```

如果大小为 3，那么它将是

```
{1,1,1},{1,1,2},{1,1,3},{1,2,1},{1,2,2},{1,2,3},{1,3,1}... 
```

我该怎么做？

就我的问题而言，我的输入大小为 15 个数字，所以我想我可以创建 15 个 for 循环，但这对我来说似乎是一个 hack。

谢谢。

编辑：在不确定我在问什么和我真正需要的是本质上相同的问题后，我编辑了我的问题。在阅读了 templatetypedef 的帖子后，似乎我正在尝试计算一组具有自身大小的笛卡尔积。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:24:10.360

您正在尝试计算集合 {1, 2, 3} 与自身的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)十五次。您可以使用简单的递归算法非常优雅地做到这一点：

*   要计算一个集合与其自身的笛卡尔积，返回一个集合，其中包含原始集合中每个元素的单例列表。
*   计算一个集合与自身 n > 1 次的笛卡尔积：
    *   递归地计算集合与自身的笛卡尔积 n - 1 次。
    *   对于输入列表的每个元素 x：
        *   对于到目前为止产生的每个序列 S：
            *   将序列 S + x 添加到输出集。
    *   返回输出集。

在（有些低效的）C++ 代码中：

```
vector<vector<int>> CartesianPower(const vector<int>& input, unsigned k) {
    if (k == 1) {
        vector<vector<int>> result;
        for (int value: input) {
            result.push_back( {value} );
        }
        return result;
    } else {
        vector<vector<int>> result;
        vector<vector<int>> smallerPower = CartesianProduct(input, k - 1);

        for (int elem: input) {
            for (vector<int> sublist: smallerPower) {
                sublist.push_back(elem);
                result.push_back(sublist);
            }
        }

        return result;
     }
} 
```

希望这可以帮助！

# html - Firefox 不尊重可见性：隐藏在表头上

> ID：14543784
> 
> 赞同：3
> 
> 时间：2013-01-27T02:16:33.820
> 
> 标签：html, css, firefox, html-table

我希望隐藏表格中第一列的标题，以获得这样的外观：

![具有所需外观的桌子](../Images/9b6d666d87b65d7a7d3a7f0a9756a2b6.png)

所以我正在使用 CSS`visibility: hidden;`来做到这一点。上面的屏幕截图是在 Chrome 中拍摄的，它可以完美运行。但是，这发生在 Firefox 中：

![Firefox 如何处理相同的 CSS](../Images/8eca2b302642c69446615efe3037d555.png)

如何让 Firefox 隐藏表格中第一列的标题？

**编辑：**这是我的表格 CSS，根据要求：

```
.styledtable{
    width:100%;
    table-layout:fixed; /*each column same width, unless width explicitly specified*/
    border:1px solid black;
    border-collapse:collapse;
}
.styledtable td, .styledtable th{
    border:1px solid black;
    padding:3px;
}

.styledtable th{ background:#cfcfcf; }
.styledtable td{ background:white; }

/* in a table with the first columnn empty (ie. with actions in the column below it),
 * make the first column take up space, but not actually appear.
 * Usage: <th style="width:40%;" class="firstcol">&nbsp;</th>
 */
.firstcol{
    visibility:hidden;
}

/*every second row different color, if the table itself doesn't have the class "no-odd-row-highlight"*/
.styledtable:not(.no-odd-row-highlight) tr:nth-child(odd) td{ background:#eeeeee; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:26:17.540

这适用于所有主要浏览器：

```
<style type="text/css">
table {
    border: none;
    padding: 0;
    border-spacing: 0;
    border-collapse: collapse;
}

table th,
table td {
    margin: 0;
    background: #fff;
    border: 1px solid #000;
    padding: 0;
}

table th.hidden {
    border: none;
    visibility: hidden;
}
</style>

<table>
<tr>
<th class="hidden"></th>
<th>ID</th>
<th>Something</th>
</tr>
<tr>
<td>Options</td>
<td>1</td>
<td>---</td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-24T14:49:33.037

取决于您想要在样式中实现什么，但通常，将相关元素的（颜色/背景色/边框-（左上角）-颜色（在这种情况下））设置为“透明”通常适用于浏览器。

希望这可以帮助某人。

# jquery - 第二次悬停后动画 div 内容变慢

> ID：14543787
> 
> 赞同：1
> 
> 时间：2013-01-27T02:16:41.917
> 
> 标签：jquery, jquery-animate

我在 Stack Overflow 上搜索了一个类似的问题，但没有一个答案能解决我的问题。基本上，我有 2 个按钮可以使 div 的内容上下动画。它工作得很好，但我注意到，在我多次悬停后，动画效果每次都越来越慢。正如许多答案所建议的那样，我使用了“线性”缓动和 stop() 函数，但没有运气。你可以在这里看到一个活生生的例子：

[http://www.diasporadu.com](http://www.diasporaduo.com)（侨民部分）。

这是我的 Jquery 代码（html 只是一个名为“显示”的 div，在一个名为“diasporarightbottom”的 div 中）

```
<script>
$(document).ready(function(){

    var displayh= ($('#display').height()) - ($('#diasporarightbottom').height());

    $('#displayup').hover(
        function(){
            $('#display').stop().animate({'top': -displayh}, 8000, 'linear');
        },
        function() {
            $('#display').stop()
        }
    )

    $('#displaydown').hover(
        function(){
            $('#display').stop().animate({'top': '0'}, 2000, 'linear');
        },
        function() {
            $('#display').stop()
        }
    )

})

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:20:59.727

这是因为无论 div 的滚动高度如何，您都有相同的动画*时间。*因此，滚动到顶部*总是需要 2 秒，滚动到底部总是需要 8 秒。*

相反，您应该`8000 * ((height - scrollTop) / height)`（例如）获取相对于滚动的实际动画时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T18:37:58.640

好的，最后，经过大量思考（生锈......），我想出了一个答案。我必须计算速度、距离等，才能得出一个合适的方程。这里的想法是保持相同的滚动速度（向上和向下），而不管内部 div 的上边距的位置如何。我知道必须有一个更简单的解决方案，但我对这个很满意。您可以在这里看到一个工作示例：[http](http://www.diasporaduo.com) ://www.diasporadu.com （diaspora 部分）。代码：

```
<script>
$('#displaydown').hover(
    function(){
        var top1= ($('#display').height()) - ($('#diasporarightbottom').height());
        var top2= $('#display').css('top');
        top2= parseInt(top2);
        var time= 3000*((top2+top1)/top1);
        $('#display').stop().animate({'top': -top1}, time, 'linear')
    },

    function() {
        $('#display').stop()
    }
)

$('#displayup').hover(
        function(){
            var top1= ($('#display').height()) - ($('#diasporarightbottom').height());
            var top2= $('#display').css('top');
            top2= parseInt(top2);
            var time= 3000*(-top2/top1);
            $('#display').stop().animate({'top': '0'}, time, 'linear');
        },
        function() {
            $('#display').stop()

        }
)
</script> 
```

# lucene - 带有zoie的Lucene，无法覆盖索引文件

> ID：14543790
> 
> 赞同：0
> 
> 时间：2013-01-27T02:17:11.357
> 
> 标签：lucene

我正在使用 bobo 浏览 API。它支持 zoie 进行实时索引。Zoie 在内部使用 lucene。我正在尝试创建索引，但遇到了以下错误。任何帮助将不胜感激。

```
Zoie verison 3.0.0.
Lucene 2.9.2
OS : windows 7 64bit

26 Jan 2013 20:50:34,352 ERROR proj.zoie.impl.indexing.internal.RealtimeIndexDataLoader@39bc2399 proj.zoie.impl.indexing.internal.LuceneIndexDataLoader - Problem copying segments: Cannot overwrite: C:\D-Drive\ProfilerNewJourney\releases\AbbottRegulatory\FacetIndexFinal\event\_2.fdt
java.io.IOException: Cannot overwrite: C:\D-Drive\releases\FacetIndex\_2.fdt
    at org.apache.lucene.store.FSDirectory.initOutput(FSDirectory.java:362)
    at org.apache.lucene.store.SimpleFSDirectory.createOutput(SimpleFSDirectory.java:58)
    at org.apache.lucene.index.FieldsWriter.<init>(FieldsWriter.java:61)
    at org.apache.lucene.index.SegmentMerger.mergeFields(SegmentMerger.java:334)
    at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:153)
    at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5045)
    at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4630)
    at org.apache.lucene.index.IndexWriter.resolveExternalSegments(IndexWriter.java:3809)
    at org.apache.lucene.index.IndexWriter.addIndexesNoOptimize(IndexWriter.java:3718)
    at proj.zoie.impl.indexing.internal.BaseSearchIndex.loadFromIndex(BaseSearchIndex.java:234)
    at proj.zoie.impl.indexing.internal.LuceneIndexDataLoader.loadFromIndex(LuceneIndexDataLoader.java:212)
    at proj.zoie.impl.indexing.internal.DiskLuceneIndexDataLoader.loadFromIndex(DiskLuceneIndexDataLoader.java:138)
    at proj.zoie.impl.indexing.internal.RealtimeIndexDataLoader.processBatch(RealtimeIndexDataLoader.java:177)
    at proj.zoie.impl.indexing.internal.BatchedIndexDataLoader$LoaderThread.run(BatchedIndexDataLoader.java:380) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:54:04.940

问题已解决。文件处理程序由 ZoieSystem 打开。所以重启zoie系统解决了这个问题。有关此线程的更多信息 groups.google.com/forum/?fromgroups=#!topic/zoie/QmYd5-QRXMk – Rocky

# c++ - c++ typedefs中的函数类型

> ID：14543791
> 
> 赞同：1
> 
> 时间：2013-01-27T02:17:22.377
> 
> 标签：c++, template-meta-programming, generic-programming

为什么以下函数类型的 typedef 声明不能编译？

```
typedef void( int ) void_from_int_t; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:24:04.033

它应该是`typedef void(void_from_int_t)(int);`等。声明遵循使用、[螺旋规则](http://c-faq.com/decl/spiral.anderson.html)或任何你最喜欢的助记符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T17:00:57.697

通常，要创建类型定义，只需添加`typedef`到变量定义：

```
// array of ten integers, instance and type
int a[10];
typedef int a_t[10];
// function, declaration and type
void function(int);
typedef void function_t(int); 
```

请注意，这是一个函数类型，而不是函数指针类型，可以通过添加星号获得：

```
function_t* pf = &function; 
```

# php - wordpress - get_catgories 自定义排序

> ID：14543793
> 
> 赞同：1
> 
> 时间：2013-01-27T02:17:41.067
> 
> 标签：php, wordpress-theming, wordpress

我`get_categories`用来在我的首页显示一个类别中的帖子，但我想按我定义的顺序排列类别，比如：

```
$cat_order = 5,2,4,1,3 //order by category ID
or
$cat_order = cat5,cat2,cat4,cat1,cat3 // order by cat name 
```

下面是我当前的代码，它通过命令 cat`name, ASC`

```
<?php
//for each category, show all posts
$cat_args=array(
  'orderby' => 'name',
  'order' => 'ASC'
   );
$categories=get_categories($cat_args);
  foreach($categories as $category) {
    $args=array(
      'showposts' => -1,
      'category__in' => array($category->term_id),
      'caller_get_posts'=>1
    );
    $posts=get_posts($args);
      if ($posts) {
        echo '<p>Category: <a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> </p> ';
        foreach($posts as $post) {
          setup_postdata($post); ?>
          <article >
            <h3><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h3>

            <?php the_content(); ?>
          </article>
          <?php
        } // foreach($posts
      } // if ($posts
    } // foreach($categories
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:33:15.103

无法在查询本身中对此进行排序。获得结果后，您必须自己对其进行排序。要按自定义条件对数组进行排序，请使用该[`usort`](http://php.net/manual/en/function.usort.php)函数。这是一个例子：

```
$categories = get_categories();
$cat_order  = array(5, 2, 4, 1, 3);

usort($categories, function ($a, $b) {
    return ((int) array_search($a->term_id , $cat_order)) - ((int) array_search($b->term_id , $cat_order));
}); 
```

如果您确定所有类别都在您的`$cat_order`数组中，则可以放弃整数转换。

* * *

**PS**如果您使用的是 PHP < 5.2，请改用命名函数：

```
function sort_categories ($a, $b) {
    return ((int) array_search($a->term_id , $cat_order)) - ((int) array_search($b->term_id , $cat_order));
}

usort($categories, 'sort_categories'); 
```

# java - 如何在 JDBC 应用程序中使用动态对象

> ID：14543795
> 
> 赞同：0
> 
> 时间：2013-01-27T02:17:46.700
> 
> 标签：java, mysql, jdbc

该查询在 MySQL 数据库中运行良好。我的 JDBC 应用程序中有这个查询。而且我遇到了一些编译时错误。
我的输入对象是*s1*和*s2*，其中**s1 包含 january**，**s2 包含 2013**。两种数据类型都是 VARCHAR。我在引号中遇到问题。请提出一些更正。

`String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber
FROM userseven WHERE (readingmonth = '"+s1+"' AND readingyear='"+s2+"'");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:25:40.103

你应该更好地`PreparedStatement`用于这样的目的。因此，您的查询将如下所示：

```
 String QueryString = "SELECT reading,totalcost,paiddate,receiptnumber FROM userseven WHERE
 readingmonth = ? AND readingyear= ?; 
```

然后 像这样`PreparedStatement`从`connection`对象创建：

```
PreparedStatement stmt = conn.prepareStatement(QueryString); 
```

然后为该语句设置参数，如下所示：

```
stmt.setString(1, s1);
stmt.setString(2, s2); 
```

此类修改将使您免于潜在的 sql 注入，并简化构建复杂查询的过程

# android - 将值从静态类传递给非静态（android）？

> ID：14543796
> 
> 赞同：0
> 
> 时间：2013-01-27T02:18:06.667
> 
> 标签：android, class, static

我已经成功地将一个值从一个静态类传递给一个非静态类，但是当我将该值放入一个`EditText`.

```
 public class HelloBubblesActivity extends SherlockFragmentActivity  {
   public EditText editText1;

   @Override    
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_discuss);
        editText1 = (EditText) findViewById(R.id.editText1);
           }

                public static class MyDialogFragment extends SherlockDialogFragment {
                     //i fill variable emotx is "test string"
                       public void emot(String emotx){
                        HelloBubblesActivity hb=new HelloBubblesActivity();
                        hb.smiley(emotx); //send value to smiley method..
                  }
               }

          public void smiley(String name){
                Log.d("test", name); //result value is "test string" (success)
                editText1.setText(name); //here is error
          }
  } 
```

我不确定我为什么会遇到这个问题。谁能明白为什么这没有达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T18:32:52.950

```
HelloBubblesActivity hb=new HelloBubblesActivity();
hb.smiley(emotx); //send value to smiley method.. 
```

创建一个新的 HelloBubblesActivity 对象，但不调用`onCreate`，因此不向 editText1 分配任何内容。从未分配过的字段在 Java 中为空。

（当然，说代码没有做“预期”的事情是错误的——它正在做人们对场景的期望。）

（您的错误很可能是认为在任何 HelloBubblesActivity 对象中设置值会使该值出现在所有 HelloBubblesActivity 对象中。各个对象不共享实例字段，并且您在一个对象中设置的内容不会神奇地出现在另一个对象中。您可以不要只是创建某个类的对象，并期望它与该类的其他对象进行某种超自然的通信。）

（但这是那些在没有良好汇编程序编程背景的情况下被转入 OOP 的人所犯的常见错误，等等。）

# c# - 我可以让我的上下文从抽象类继承并首先使用代码吗？

> ID：14543798
> 
> 赞同：1
> 
> 时间：2013-01-27T02:18:25.747
> 
> 标签：c#, entity-framework-5

为了让我的上下文保持干净和简单，我将很多逻辑放在一个抽象类中，并让我的上下文继承自它。

[我在这里](https://github.com/kmckelvin/EFHooks)看到了这种方法，但现在因为我的类不再直接继承自我`DBContext`无法创建迁移。

我的抽象类是

```
public abstract class MyContext : DbContext
{

    public MyContext(string connString)
        : base(connString)
    {
    }
   public override int SaveChanges()
    {
        // custom code here
    }
} 
```

现在，当我尝试通过在 PM 控制台上键入 add-migration 来创建迁移时，我收到一个错误，表明`DBContext`找不到继承自的类

PM 控制台显示

```
PM> add-migration kirsten2 No migrations configuration type was found in the assembly 'DataLayer'. (In Visual Studio you can use the Enable-Migrations command from Package Manager Console to add a migrations configuration). 
PM> Enable-Migrations No context type was found in the assembly 'DataLayer'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T07:54:31.943

如果您在 EF 存储库中搜索此错误消息（“未找到迁移配置类型”），您将在 EntityFramework/Properties/Resources.cs 文件中找到此资源：

```
/// <summary>
/// A string like "No migrations configuration type was found in the assembly '{0}'. (In Visual Studio you can use the Enable-Migrations command from Package Manager Console to add a migrations configuration)."
/// </summary>
internal static string AssemblyMigrator_NoConfiguration(object p0)
{
    return EntityRes.GetString(EntityRes.AssemblyMigrator_NoConfiguration, p0);
} 
```

下一步是搜索`AssemblyMigrator_NoConfiguration`使用情况，您会发现只有一个出现在 EntityFramework/Migrations/Design/ToolingFacade.cs 中：

```
private DbMigrationsConfiguration FindConfiguration()
{
    var configurationType = FindType<DbMigrationsConfiguration>(
        ConfigurationTypeName,
        types => types
                     .Where(
                         t => t.GetConstructor(Type.EmptyTypes) != null
                              && !t.IsAbstract
                              && !t.IsGenericType)
                     .ToList(),
        Error.AssemblyMigrator_NoConfiguration,
        (assembly, types) => Error.AssemblyMigrator_MultipleConfigurations(assembly),
        Error.AssemblyMigrator_NoConfigurationWithName,
        Error.AssemblyMigrator_MultipleConfigurationsWithName);

    return configurationType.CreateInstance<DbMigrationsConfiguration>(
        Strings.CreateInstance_BadMigrationsConfigurationType,
        s => new MigrationsException(s));
} 
```

我认为现在跟踪错误并修复它会更容易。

我已经在源代码上对其进行了测试，并且消息无关紧要，结果发现 rel 原因是 app.config 中的目标框架标签。

这是正确答案的类似问题： [“Enable-Migrations”在升级到 .NET 4.5 和 EF 5 后失败](https://stackoverflow.com/questions/12021656/enable-migrations-fails-after-upgrading-to-net-4-5-and-ef-5)

有趣的是，如果您运行 Enable-Mirations 和 Add-Migration 分别准确地指向 Context 类名和 Configuratin 类名，它工作正常。但是提到的解决方案是正确的解决方案，也更容易:-)

# javascript - 编写一个带有依赖项的 jQuery 库？

> ID：14543799
> 
> 赞同：1
> 
> 时间：2013-01-27T02:18:26.743
> 
> 标签：javascript, jquery, dependencies

我正在编写一个 jQuery 库，它有几个 jQuery 库依赖项，一个是 jQuery Cookie。包含它以便我图书馆的用户使用它的最佳方式是什么？

我至少能想到三个：

1 - 不要使用 jQuery Cookie，而是包含我自己的 cookie 实用功能

2 - 在我的代码中包含 jQuery Cookie，并使用它，除非它已经出现在页面上

3 - 将 jQuery Cookie 包含为单独的文件，并声明用户必须包含 jQuery Cookie 才能使用我的库

首选方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:23:30.490

如果您对 cookie 所做的事情不是过于复杂，您可能应该编写自己的小型辅助函数来实现这一点。这将是最好的选择。

* * *

如果您*必须*使用 jQuery Cookie 插件，*请不要*将其包含在您的脚本中。将其声明为依赖项，并链接到[jQuery cookie 页面](https://github.com/carhartl/jquery-cookie)。没有将它包含在您的插件中的原因有很多，但我想到了以下两个：

1.  如果用户已经加载了该插件，在脚本中再次包含它会导致无缘无故浪费许多额外的字节。

2.  当其他插件的原始作者随后对其代码进行错误修复时，您不希望不断跟踪并发布插件更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T02:28:24.413

我建议使用#2 或#3。

由于您的库用户是开发人员，您可以在文档中提及需要哪些其他库及其版本。

如果其他库可用，请先进行故障保护，try-catch 检查，这样您自己的库就不会抛出一些错误。

# .htaccess - 在 htaccess 文件中使用重写器选择特殊字符

> ID：14543800
> 
> 赞同：0
> 
> 时间：2013-01-27T02:18:45.387
> 
> 标签：.htaccess, mod-rewrite, special-characters

我犯了一个小错误（我在现有的 php 调用中开始了一个新的 php 调用 - 哎呀）并设法让谷歌开始抓取一大堆如下所示的网址：

`http://www.mydomain.com/folder/parameter/%3C/?php%20echo%20writelink();%20?%3E`

我已经修复了采购调用，但我尝试让 .htaccess 重写页面调用

`http://www.mydomain.com/folder/parameter/`

一直没有成功。

我尝试了以下方法：

```
RewriteRule  ^folder/(.*)/(.*)%(.*) /folder/$1/ [NE,R=301,L]
RewriteRule  ^folder/(.*)/(.*)3C/?php /folder/$1/ [R=301,L]
RewriteRule  ^folder/(.*)/(.*)writelink /folder/$1/ [R=301,L]
RewriteRule  ^folder/(.*)/([^/.]+)writelink /folder/$1/ [R=301,L] 
```

但是它们都返回相同的 403。我将测试重写器作为文件中的第一个重写器，所以它没有被其他东西篡夺。

（作为参考，当我没有弄脏页面时，正确的重写规则是 RewriteRule ^folder/(.*)/$ /content/element.php?param=$1 [L] ）

我之前在路径中遇到过 %ages 问题，但这次我决定打败它——有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T09:26:50.760

你的网址是这样的：

`http://www.mydomain.com/folder/parameter/</?php echo writelink(); ?>`没有编码。

304 代码并不真正表示错误，它表示请求的 URL 的资源自上次访问或缓存以来没有更改。清除浏览器的缓存并确保已清除。

由于初始字符，错误应该是 403（禁止）`< (%3C)`。

这些错误使 .htaccess 中的任何重写规则都无用。处理此类问题的一种方法是使用脚本。

**例子**

将这些行添加到根目录下的 .htaccess 文件中：

```
Options +FollowSymlinks -MultiViews
ErrorDocument 403 /Error403.php 
```

在根目录下创建 Error403.php，内容与此类似：

```
<?php
// The following lines should be at the top of the file

/**************Only for Debugging**********************/
echo $_SERVER[ 'REDIRECT_QUERY_STRING' ] . "<br /><br />"; 
echo var_dump($_REQUEST) . "<br /><br />";
/*=====================================================
NOTE: A Header error might be generated while the above 
code is active. Use it only to display the incoming 
parameters and delete it for normal operation.
*******************************************************/

if ( isset ( $_SERVER[ 'REDIRECT_QUERY_STRING' ] ) ) {
  $QueryString = $_SERVER[ 'REDIRECT_QUERY_STRING' ]; // The query looks like this: php%20echo%20writelink();%20?%3E 

   // Check if it is the wrong URL
  if ( preg_match( '|php%20echo%20writelink()|i', $QueryString ) ) {
  header("Location: http://www.mydomain.com/folder/parameter/");
  }
}
   // Handle other errors
?> 
```

在这种特定情况下，我们利用字符串包含问号这一事实，`?`使其看起来像一个查询。所以我们尝试将查询内容与`preg_match()`.

那应该这样做。如有必要，相应地修改链接，这只是一个如何做的例子。

# c++ - ISO C++ 禁止在指向函数的指针和指向对象的指针之间进行转换

> ID：14543801
> 
> 赞同：5
> 
> 时间：2013-01-27T02:19:15.297
> 
> 标签：c++, function-pointers

我想要一个类，它能够将一个指向函数的指针和一个指向结构的指针作为其字段保存为参数。该对象的接口将是一个不带参数但将保存的参数传递给上述函数的方法 call()。用于不同参数类型和计数的此类类的家族将具有共同的抽象祖先，调用是虚拟的。

至于现在我有以下代码可以工作，尽管将 -pedantic 选项添加到 g++ 会产生错误：

```
class Function {
    protected:
    void *data;
    void *function;
    public:
    virtual void call() = 0;
};

class SingleArgumentFunction : public Function {
    public:
    SingleArgumentFunction( void (*f)(int), int i ) {
        int *icpy = new int(i);
        function = (void*) f;
        data = (void*) icpy;
    }
    ~SingleArgumentFunction() { delete (int*)data; }
    inline void call() {
        ( *((void (*)(int))function) )( *(int*)data );
    }
}; 
```

我得到的错误正如标题所说：

```
warning: ISO C++ forbids casting between pointer-to-function and pointer-to-object 
```

如何处理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T02:21:12.490

不要将*pointer-to-function*转换为*pointer-to-object*，它们不能保证具有相同的大小。`void(*)()`您将能够通过使用函数指针来解决此问题。

*C99 [6.2.5/27]：*

> 指向 void 的指针应具有与指向字符类型的指针相同的表示和对齐要求。类似地，指向兼容类型的合格或不合格版本的指针应具有相同的表示和对齐要求。所有指向结构类型的指针都应具有彼此相同的表示和对齐要求。所有指向联合类型的指针都应具有彼此相同的表示和对齐要求。指向其他类型的指针不需要具有相同的表示或对齐要求。

*C99 [6.3.2.3/8]：*

> 指向一种类型的函数的指针可以转换为指向另一种类型的函数的指针，然后再返回；结果应与原始指针比较。

取自[其他 SO answer](https://stackoverflow.com/a/3941867/927034)的参考资料。

* * *

顺便说一句，您似乎正在尝试重新创建`std::function+std::bind`.

```
std::function< void() > f;
f = std::bind( &some_function_that_takes_an_int, 42 );

f(); // look ma! no arguments 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-30T11:26:50.300

如果您被迫使用需要函数指针的 API `void*`，您可以在生成警告的语句前加上前缀以`__extension__`使该警告静音。由于它是 gcc 特定的，因此最好保护这个词，即：

```
#ifdef __GNUC__
__extension__
#endif
the_statement_that_includes_the_cast; 
```

来自[http://trac.osgeo.org/qgis/ticket/234](http://trac.osgeo.org/qgis/ticket/234)。

# php - mysqli_real_escape_string 不工作？

> ID：14543803
> 
> 赞同：0
> 
> 时间：2013-01-27T02:19:55.853
> 
> 标签：php, mysql, mysqli

```
if($_SESSION['s_logged_n'] == 'true'){
    $server = $panel->real_escape_string($_GET['ip']);
    $dn = $panel->real_escape_string($_GET['newname']);
    $query = $panel->query(
        "UPDATE `Registered` SET `displayname` = '$dn' WHERE `owner`='".$_SESSION['s_username']."' AND `server`='$server'"
    );
} 
```

以上是我正在使用的代码。$panel 是一个到数据库的连接，它可以工作。为了试图逃避引号，我已经花了好几个小时来处理这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:25:02.583

您现在没有使用`mysqli_real_escape_string`您正在使用`real_escape_string`属于对象的方法，`$panel`如果这只是另一个名称，`mysqli_real_escape_string`那么它不用于“剥离”引号，它用于进行合法的 SQL 查询。报价不是非法实体。`str_replace()`如果您想专门针对报价，我会简单地建议。

**编辑**

jeroen 在评论中击败了我：p

# bytestring - 是什么让 ByteString IO 如此之快？

> ID：14543805
> 
> 赞同：8
> 
> 时间：2013-01-27T02:20:31.563
> 
> 标签：bytestring, haskell

我一直在尝试从 Haskell 的 acm.timus.ru解决[问题 1330 。](http://acm.timus.ru/problem.aspx?space=1&num=1330&locale=en)基本上，它归结为： 1) 从标准输入中读取一个长度为 N (N < 10^4) 和 M 对整数 (M < 10^5) 的数组 A；2) 对于每个 (from, to) 对，将子数组 A[from..to] 的总和打印到标准输出。

由于 SO 不允许我在此问题中发布超过 2 个 URL，因此我将参考下面我的[Github 存储库](https://github.com/dfyz/stuff/tree/master/1330)中的文件。

我想出了两个解决方案，它们共享大部分代码。第一个（1330_slow.hs）使用 Prelude 函数（getLine/read/words）并且有点慢：

```
$ ./bench.sh slow_hs
slow_hs
    Time inside the program: 2.18
MD5 (output.slow_hs.txt) = 89bcf8fd69a7fce953595d329c8f033a 
```

另一个解决方案 (1330.hs) 抛弃了这些函数，用它们的 Data.ByteString.Char8 等效项 (B.getLine/B.readInt/B.words) 替换它们，并且表现得很好：

```
$ ./bench.sh hs
hs
    Time inside the program: 0.27
MD5 (output.hs.txt) = 89bcf8fd69a7fce953595d329c8f033a 
```

这个问题的时间限制是 500 毫秒，所以虽然 270 毫秒已经足够快（并且可以与我在其他语言中的解决方案相媲美，例如 C++ 和 Go），但 2180 毫秒并没有减少它。那么为什么我的第一个解决方案如此缓慢呢？即使按照 Real World Haskell 的分析技巧，我仍然无法理解这一点（我所能弄清楚的是大部分时间都花在了 readIntPair 函数上，这并没有太大帮助）。

如果你想自己做一些测试，我有一个 Python 输入生成器 (gen_test.py) 和一个预生成的输入文件 (input.txt)，以防你没有安装 Python。以及两种解决方案之间的差异（slow_fast_diff.txt）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T04:54:55.490

## 对比 ByteString 和 String（即为什么 String 慢？）

`Bytestring`IO 涉及将数据读取到打包缓冲区中，就像您在 C 中可能习惯的那样。 `String`另一方面，是字符的链接列表，这不仅使 IO 复杂化，而且对于处理这可能意味着更高的内存、处理、缓存、也许分支和GC。

## 为什么 ByteString 快？

另一种表达方式：`ByteString`由于相同的原因`unsigned char *` 而快速在`C`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T09:49:02.960

正如其他人所说，这不是`ByteString`很快，而是`String`非常非常慢。

A`ByteString`每个字符存储一个字节，加上一些记账开销。A`String`每个字符存储大约 12 个字节（取决于您是在 32 位还是 64 位模式下运行）。它还将每个字符存储在非连续内存中，因此每个字符必须单独分配空间，由垃圾收集器单独扫描，并最终再次单独释放。这意味着糟糕的缓存局部性、大量的分配器时间和大量的垃圾收集时间。简而言之，它非常低效。

基本上，`ByteString`C 做什么，Java 做什么，C++ 做什么，C# 做什么，VB 做什么，以及几乎所有其他编程语言对字符串做什么。我所知道的其他语言都没有像 Haskell 那样低效的默认字符串类型。（即使是 Haskell 方言的 Frege 也使用了更高效的字符串类型。）

我应该指出`ByteString.Char8`只处理 Latin-1 字符。它根本无法处理随机的 Unicode 字符。对于像这样的编程挑战来说，这可能不是问题，但对于“真实系统”来说，这很可能是一个问题。`ByteString`并没有真正处理外来字符或不同的字符编码或任何东西；它只是假设您想要纯 ASCII。这曾经是一个安全的假设；今天，没有那么多。

# javascript - 将有序 JSON 响应结果解析为无序对象

> ID：14543808
> 
> 赞同：0
> 
> 时间：2013-01-27T02:20:43.067
> 
> 标签：javascript, json, response

我正在从已经按“sort_id”排序的服务器检索 JSON 响应。

响应文本 ==>

```
{
    "status": 1,
    "complete": 1,
    "list": {
        "178432351": {
            "item_id": "178432351",
            "sort_id": 0,
        },
        "203720680": {
            "item_id": "203720680",
            "sort_id": 1,
        },
        "286082053": {
            "item_id": "286082053",
            "sort_id": 2,
        },
        "284062632": {
            "item_id": "284062632",
            "sort_id": 3,
        },
        "16137955": {
            "item_id": "16137955",
            "sort_id": 4
        }
    },
    "since": 1359248876
}

var response = JSON.parse(request.responseText); 
```

一旦我用 JSON.parse 将它解析为一个对象，然后尝试通过打印每个项目的数据

```
for(item in response) 
```

打印出来的数据是完全无序的。有没有办法按 sort_id 顺序使用“for in”循环？或以这种方式打印接收到的数据的任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:38:48.130

```
var arr = [];  

for(var item in b.list) { 
   var obj = b.list[item]; 
   var elem = {}; 
   for(var prop in obj) {
      elem[prop] = obj[prop];
   } 
  arr.push(elem);
}

arr.sort(function(a,b) { return parseInt(a.sort_id) - parseInt(b.sort_id) } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:41:17.797

默认情况下，Javascript 属性是无序的，并且它们的迭代顺序在 javascript 引擎和实现之间将不一致。要拥有有序的属性，您需要有一个数组。

正如 thikinom 的回答所暗示的，要对属性进行排序，您可以将它们放入一个数组中。

# c# - SSIS包失败c#

> ID：14543814
> 
> 赞同：0
> 
> 时间：2013-01-27T02:21:35.607
> 
> 标签：c#, ssis

这些是我在asp.net上调用SSIS包时遇到的错误

> SSIS 错误代码 DTS_E_OLEDBERROR。发生 OLE DB 错误。错误代码：0x80004005。OLE DB 记录可用。来源：“Microsoft Access 数据库引擎”Hresult：0x80004005 描述：“找不到可安装的 ISAM。”。SSIS 错误代码 DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER。对连接管理器“Excel 连接管理器”的 AcquireConnection 方法调用失败，错误代码为 0xC0202009。在此之前可能会发布错误消息，其中包含有关 AcquireConnection 方法调用失败原因的更多信息。组件“Excel Source”(1) 验证失败并返回错误代码 0xC020801C。一个或多个组件验证失败。

有什么推荐的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:34:11.740

这可能会有所帮助：

*您是否在 SSIS 包中将数据流任务的 DelayValidation 属性设置为 TRUE？有关该错误的更多信息，请参阅以下文章：*

[http://blogs.msdn.com/b/ramoji/archive/2009/03/10/the-acquireconnection-method-call-to-the-connection-manager-failed-with-error-code-0xc0202009.aspx](http://blogs.msdn.com/b/ramoji/archive/2009/03/10/the-acquireconnection-method-call-to-the-connection-manager-failed-with-error-code-0xc0202009.aspx)

# php - PHP Pow 函数需要反向

> ID：14543816
> 
> 赞同：2
> 
> 时间：2013-01-27T02:22:19.610
> 
> 标签：php

我有一些 pow 我需要返回一个完整的 inter 以获得不同的结果（基本上相反）

例如（四舍五入到小数点后 4 位）：

```
<?php
$var = 10 * pow(1.01,0); // = 10
$var = 10 * pow(1.01,1); // = 10.1
$var = 10 * pow(1.01,2); // = 10.201
$var = 10 * pow(1.01,3); // = 10.303 
```

ETC

我怎么能返回整数，`10.1150 = 1`因为它在上面`10 * pow(1.01,1);`和下面`10 * pow(1.01,2);`

`1.01`也可以是许多变量，（百分比刻度点和图形图表），为什么我只需要百分比差异的整数（1 个框 = 1 个百分比从上方或下方的框变化）

非常感谢大家，我已经以许多不同的方式与这个问题作斗争，包括将 250% 的所有价格数据点转换为一个数组，这很快，除了构建数组成为一个缓慢的问题。 `if else`是当前的解决方案，但是对于**250 个图表上的 2500 个价格点 = 2 秒**只是为了找到一个情节点，考虑到我每天要制作数百万张图表，2 秒 = 积累了大量时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T02:56:58.527

你试过使用`log`吗？这是`pow`功能的反面。

```
$orig = floor(log($var/10,1.01)); 
```

# python - Django：获取数据库中所有更改的通知

> ID：14543824
> 
> 赞同：0
> 
> 时间：2013-01-27T02:24:10.667
> 
> 标签：python, django, notifications

如果有一种方法可以通知 Django 数据库中对象的任何更改，我正在徘徊。现在，如果有人添加或更改任何内容，我只需要一封电子邮件，但最好是我可以挂钩由任何更改触发的函数并决定要做什么。

有没有简单的方法在 Django 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T05:11:29.910

想到两个想法：

1.  [覆盖预定义的模型方法](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-model-methods)进行保存。
2.  使用类似的信号[`post_save`](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)。

这是一篇很好的文章，讨论了上面列出的两件事之间的区别以及何时使用它们：

[Django 信号与自定义 save() 方法](https://web.archive.org/web/20130802081636/http://www.martin-geber.com/thought/2007/10/29/django-signals-vs-custom-save-method/)

这篇文章写于 2007 年底，也就是 Django 0.96.1 发布三天后。但是，我相信作者给出的建议在今天仍然适用。

# android - 无法复制清单

> ID：14543827
> 
> 赞同：4
> 
> 时间：2013-01-27T02:25:22.737
> 
> 标签：android, eclipse, git

我通过eclipse从git下载了一个项目。当我尝试运行我的项目时，我会收到此错误：

> [2013-01-26 21:16:43 - FOLDERNAME] /FOLDERNAME/gen 已经存在，但不是源文件夹。转换为源文件夹或重命名它。

删除 gen 文件夹后，尝试清理项目时会出现此错误：

> [2013-01-26 21:23:38 - FOLDERNAME] 无法复制清单

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T06:35:40.343

修复方法是： 通过转到*Project > Clean来清理***项目**。

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T04:37:41.513

1.  右键单击项目>属性> Java构建路径
2.  打开源选项卡
3.  单击“添加文件夹...”并同时选择 gen 和 src

如果之后您仍然遇到问题：

1.  右键单击项目>属性> Java构建路径
2.  选择库选项卡
3.  单击“添加外部 JAR...”按钮。选择您的 android 目录中的 API (android-sdk\platforms\android-yourversion)

确保之后清理项目

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-26T14:31:56.273

转到 /bin 文件夹并删除 AndroidManifest.xml。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-31T10:53:30.353

转到 manifest.xml 位置并右键单击 manifest.xml，选择属性并取消选中只读属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T10:33:09.390

解决这个问题的最简单方法是

*   在 Eclipse 中右键单击项目节点
*   选择 Android 工具子菜单
*   选择修复项目属性

您可能需要关闭并重新打开项目，但在此之后，它应该正确构建。

原因是 .classpath 和 .project 文件通常在 .gitignore 中默认被忽略，然后从 git 获取项目时这些设置会丢失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-08T02:21:02.487

加载项目时出现 Failed to copy Manifest 错误，这是项目运行的原因：

*   在“问题”选项卡中，单击错误消息
*   删除它（通过按键盘上的删除键，我是认真的）
*   右键单击 Package Explorer/Run As Android Application 中的主项目节点*

# c# - 如何以编程方式将更多窗格添加到 avalon 坞站

> ID：14543828
> 
> 赞同：0
> 
> 时间：2013-01-27T02:25:38.467
> 
> 标签：c#, avalondock

我正在使用 avalon dock v2，我想做的就是拥有它，所以当我点击一个按钮时，它会在我的布局中添加另一个窗格。

这是我现有的窗格，但我不知道按下按钮时向其中添加另一个窗格的语法。

```
avalonDock:DockingManager x:Name="dockingManager">
                <avalonDock:LayoutRoot>
                    <avalonDock:LayoutPanel Orientation="Horizontal">
                        <avalonDock:LayoutDocumentPaneGroup >
                            <avalonDock:LayoutDocumentPane x:Name="mainDocumentPaneGroup">

                            </avalonDock:LayoutDocumentPane>
                        </avalonDock:LayoutDocumentPaneGroup>
                      </avalonDock:LayoutPanel>
                </avalonDock:LayoutRoot>
  </avalonDock:DockingManager> 
```

这是我放在按钮内的内容。

```
 DockPanel CNPCTab = new DockPanel() { };
        CNPCTab.Name = "CNPCTab";

        mainDocumentPaneGroup. 
```

我真的看不到任何方法可以让我将我初始化的窗格添加到我在 xaml 中初始化的组中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-14T19:50:16.227

我不知道你是否还需要这个答案，但我也需要它，而且在任何地方都找不到好的答案，所以我在这里提供它。您需要创建一个 LayoutArchorable，将其 Content 设置为您的 UserControl，然后在 LayoutArchorable 上调用 AddToLayout 方法以使其自行添加。在我的情况下，我希望新窗口以浮动开始，以便用户可以决定将其放置在哪里，但是您仍然必须将其分配到某个地方才能浮动。

```
 LayoutAnchorable la = new LayoutAnchorable { Title = "New Window", FloatingHeight = 400, FloatingWidth = 500, Content = new YourUserControl() };
    la.AddToLayout(dockingManager, AnchorableShowStrategy.Right);
    la.Float(); 
```

在此示例中，我在 XAML 中命名了 DockingManager，以便我可以从后面的代码中访问它。

# php - 如何从数据库中查找文件名

> ID：14543835
> 
> 赞同：0
> 
> 时间：2013-01-27T02:26:26.043
> 
> 标签：php, sql, mysqli

我的 html 中有一个文件列表，其中已从`ImageFiles/`文件名中删除了该目录。例如，文件名如下所示：

```
tulips.png
koala.png
jellyfish.png 
```

现在，如果用户单击这些文件名之一，那么我想从数据库中检索文件，但在数据库中，所有文件都包含`ImageFiles/`文件名开头的目录。因此，在数据库中，文件如下所示：

```
ImageFiles/tulips.png
ImageFiles/koala.png
ImageFiles/jellyfish.png 
```

我的问题只是如何完成 WHERE 子句以便从数据库中检索正确的文件？例如，如果我正在寻找文件`tulips.png`，我怎样才能让查询能够`ImageFiles/tulips.png`从数据库中找到并且只能找到这个文件？

下面是 mysqli 查询：

```
$getimage = $_GET['filename'];

    $imagequery = "SELECT ImageFile FROM Image WHERE (ImageFile = ?)";

            if (!$imagestmt = $mysqli->prepare($imagequery)) {
            // Handle errors with prepare operation here
    }

    // Bind parameter for statement
    $imagestmt->bind_param("s", $getimage);

    // Execute the statement
    $imagestmt->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:27:44.153

只需将目录名称添加到`$getimage`变量中：

```
$getimage = 'ImageFiles/' . $_GET['filename']; 
```

# jquery - 单击jquery更改正文背景

> ID：14543836
> 
> 赞同：0
> 
> 时间：2013-01-27T02:26:58.347
> 
> 标签：jquery, css, background

我一直在为 MyBB 设计一个主题，我正在尝试实现一个 jQuery 背景切换器。我一直在尝试但没有成功。

这是html：

```
<script src="images/vhut/style/pattern.js" type="text/javascript"></script>
<script type="text/javascript" src="{$mybb->settings['bburl']}/images/image directory/script/cookie.js"></script>
<a href="#" class="pat" id="pat1" style="background:url('images/image directory/style/patterns/pat1.jpg')">click 1</a>
<a href="#" class="pat" id="pat2" style="background:url('images/imag directory/style/patterns/pat2.jpg')">click 2</a> 
```

这是我正在使用的 JS 文件：

```
$(document).ready(function(){
$('a.default').click(function(e){
        var bg = $(this).css('background');
        $('body').css('background','none')
})

$(".pat").click(function(){
    $("body").removeClass('background');
    if( $('#alpha-style').is(':checked')){
            $('#alpha-style').attr("checked",false);
            $('.bg-alpha').hide();
        }
});

$("#pat1").click(function(){
$(body).css("background", "url(patterns/1.png)");
return false;
});

$("#pat2").click(function(){
$(body).css("background", "patterns/2.png)");
return false;
});
}); 
```

图案位于文件夹 images/theme directory/style/patterns js 文件位于 images/theme 目录/style

因此，任何人都可以就我的代码提供帮助或为我得到帮助的错误提供可能的解决方案，非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:28:19.460

图像是相对于文档根目录获取的，因此客户端在`example.com/patterns/1.png`. 仅仅因为 JS 文件夹在您的 images 文件夹中并不意味着您可以在 JS 中使用资源的相对路径。只需使用

```
url(/images/image directory/style/patterns/1.png); 
```

还要看看你的控制台。它是你最好的朋友。如果使用 Chrome，请右键单击并检查元素并检查您的网络工具是否有 404 响应。如果使用 Firefox，请立即下载 Firebug 并执行相同操作。它会准确地告诉您正在获取的 URL，您可以在 JS 中进行故障排除以实现适当的响应。

# c - 如何在C中将int转换为char *？

> ID：14543837
> 
> 赞同：-5
> 
> 时间：2013-01-27T02:27:04.560
> 
> 标签：c

> **可能重复：**
> [如何在 C 中将整数转换为字符串？](https://stackoverflow.com/questions/9655202/how-to-convert-integer-to-string-in-c)

我在 C 中有一个函数，它采用 int 值 i。我需要将此 i 值转换为字符串 (char *)。

这是我到目前为止所拥有的：

```
char *str = (char *)i;
myfunction(str); 
```

我得到错误：从不同大小的整数转换为指针。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:30:55.973

这只是无效的代码。即使您解决了编译时错误，结果也可能是运行时出现某种内存访问错误。结果将是一个指向您不知道它实际指向的字符串的指针。因此，当您的程序访问该内存时，您将遇到错误。

我将推测您真正要寻找的是像`itoa()`. 这是唯一有意义的方法。

**编辑**

根据新评论，我看到您实际上确实想要一个类似`itoa()`. 简单地尝试将整数转换为字符串指针不会做你想要的。

```
char buff[80];

itoa(i, buff, 10);
myfunction(buff); 
```

# ajax - 根据 Ajax 发布请求渲染不同的 Zend 表单

> ID：14543838
> 
> 赞同：0
> 
> 时间：2013-01-27T02:27:22.163
> 
> 标签：ajax, zend-framework

我正在尝试使用 Ajax 发布请求根据用户类型显示不同的表单。请求响应工作正常，但我不知道如何显示表单。例如，如果用户选择 parent，那么我希望显示父表单，依此类推。我正在使用 ZF 1.12。

```
public function init() {
    $contextSwitch = $this->_helper->getHelper('AjaxContext');
    $contextSwitch =$this->_helper->contextSwitch();
    $contextSwitch->addActionContext('index', 'json')
    ->setAutoJsonSerialization(false)
    ->initContext();
}

public function indexAction() {
    $this->view->user = $this->_userModel->loadUser($userId);
    //if($this->_request->isXmlHttpRequest()) {
        //$this->_helper->layout->disableLayout();
        //$this->_helper->viewRenderer->setNoRender(true);
    if ($this->getRequest()->isPost()){
        $type = $_POST['type'];
        $this->view->userForm = $this->getUserForm($type)->populate(
            $this->view->user
        );
    }
} 
```

这就是我在客户端所拥有的。我需要在成功部分写什么？

```
<script type="text/javascript"> 
  $(document).ready(function(){
    $('#userType').on('change', function(){
      var type = $(this).val();
      select(type);
    });
  });

  function select(type) {
    $.ajax({
        type: "POST",
        url: "admin/index/",
        //Context: document.body,
        data: {'type':type},
        data: 'format=json',
        //dataType: "html",
        success: function(data){
         // what to do here?
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {}
    });
}
</script>
<form id="type" name="type" method="post" action="admin/index">
  <select name='userType' id='userType' size='30'>
    <option>admin</option>
    <option>parent</option>
    <option>teacher</option>
  </select>
</form>
<div id="show">
  <?php //echo $this->userForm;?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:10:25.803

如果您的 ajax 请求表单从 Zend_Form 返回您的 HTML，您可以简单地在`#show`div 中编写 HTML。

在您看来，您将需要这样做：

```
echo $this->userForm; 
```

这样，在将响应发送到 HTML 页面之前，所有需要的 HTML 都将写入服务器端。在 HTML 页面中，您只需使用方法将响应写入正确的位置`$('#show').html(data)`。您还必须确保每个表单在呈现它们时都具有正确的操作。

另一种选择是在加载时将所有三种表单（通过 Javascript）隐藏在您的页面中，并根据选择（使用 JS 生成）显示正确的表单。这样您就不必从外部源加载数据，如果有人禁用了 JS，他仍然可以使用该应用程序。另一方面，此方法将使每个页面加载大约 1/2 KB 的数据。

# android - 在 Android 中跟踪应用内的用户空闲时间

> ID：14543842
> 
> 赞同：1
> 
> 时间：2013-01-27T02:28:11.647
> 
> 标签：android, sharedpreferences, aidl

据我所知，我没有系统 API 可以获取**用户空闲时间**。当我说用户空闲时间时，我的意思是用户在我的应用程序中的触摸屏上进行了一些交互。因此，我想自己跟踪它。我想到的方法是扩展`Activity`和覆盖`onuserinteraction`方法以保存最后一个用户活动时间。

但挑战在于我的应用程序有**多个进程。**我不确定以下方法是正确有效的方法。

我想使用`SharedPreference`with `MODE_WORLD_WRITEABLE`flag 来存储用户上次活动时间。为了避免性能问题，我还在每个活动中缓存了活动内的最后活动时间。`SharedPrefernces`如果差异时间> 1秒，我只会将新时间保存到。

与使用aidl相比，这种方式有效吗？实际上，aidl 是否也使用文件共享变量？如果是，我认为这两种方式应该具有相似的性能，对吧？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T06:17:35.893

而不是每次都从任何地方写下来，让它成为你应用程序中的一个全局函数：

```
public class MyApp extends Application {
    private static SharedPreferences sPreference;

    private static final long MIN_SAVE_TIME = 1000;
    private static final String PREF_KEY_LAST_ACTIVE = "last_active";
    private static final String PREF_ID_TIME_TRACK = "time_track";

    public static void saveTimeStamp(){
        if(getElapsedTime() > MIN_SAVE_TIME){
            sPreference.edit().putLong(PREF_KEY_LAST_ACTIVE, timeNow()).commit();
        }
    }

    public static long getElapsedTime(){
        return timeNow() - sPreference.getLong(PREF_KEY_LAST_ACTIVE,0);
    }

    private static long timeNow(){
        return Calendar.getInstance().getTimeInMillis();
    }

    @Override
    public void onCreate() {
        super.onCreate();
        sPreference = getSharedPreferences(PREF_ID_TIME_TRACK,MODE_PRIVATE);
    }
} 
```

将应用程序类添加到清单：`<application android:name="com.example.MyApp"`

将保存功能放在抽象的 Activity 类中：

```
public abstract class TimedActivity extends Activity {

    @Override
    public void onUserInteraction() {
        super.onUserInteraction();
        MyApp.saveTimeStamp();
    }

    public long getElapsed(){
        return MyApp.getElapsedTime();
    }

} 
```

现在，从这个类扩展你所有的活动，它们都将自动保存时间，并且可以使用`getElapsed()`.

# python - lxml解析google搜索结果

> ID：14543843
> 
> 赞同：2
> 
> 时间：2013-01-27T02:28:23.467
> 
> 标签：python, lxml

我正在尝试解析来自谷歌搜索结果的链接并最终得到奇怪的输出。

```
import mechanize, re, lxml.html
from lxml.html import parse
br = mechanize.Browser()
br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1)     Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')] 
br.set_handle_robots(False)
url = 'https://www.google.com/search?q=test&gl=US'

response = br.open(url)
html = response.read().lower()

doc = lxml.html.document_fromstring(html)

for t in doc.xpath("//h3[@class='r']/a"):
    print t.get('href') 
```

这导致以下输出： [![截屏](../Images/8c9001b98a5d77249beb6ceadcacd0e9.png)](https://i.stack.imgur.com/9aorD.png)

任何帮助都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T07:19:55.237

目前尚不清楚您要在这里实现什么，因为您在那里得到的正是您所要求的。

```
<h3 class="r">
  <a href="/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CDUQFjAA&amp;url=http%3A%2F%2Fwww.test.com%2F&amp;ei=bdMEUYXiBefS2AXL5oGoBQ&amp;usg=AFQjCNH21KLjC0CBkjon2DwD_CZ0HApLMw&amp;sig2=KeRdw0_WAGc2Zrz1jI49wQ&amp;bvm=bv.41524429,d.b2I" 
  class="l" 
  onmousedown="return rwt(this,'','','','1','AFQjCNH21KLjC0CBkjon2DwD_CZ0HApLMw','KeRdw0_WAGc2Zrz1jI49wQ','0CDUQFjAA','','',event)">
    <em>Test</em>.com
  </a>
</h3> 
```

你得到了`href`内部`a`标签的属性，结果是：

```
"/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CDUQFjAA&amp;url=http%3A%2F%2Fwww.test.com%2F&amp;ei=bdMEUYXiBefS2AXL5oGoBQ&amp;usg=AFQjCNH21KLjC0CBkjon2DwD_CZ0HApLMw&amp;sig2=KeRdw0_WAGc2Zrz1jI49wQ&amp;bvm=bv.41524429,d.b2I" 
```

但更有可能您正在寻找链接文本和链接链接。您将被发送到的 URL（没有 Google 特殊 url 内容）位于`cite`元素中，链接文本位于`a`您已经找到的元素中。

# sql - 引用具有多个外键的两列主键

> ID：14543846
> 
> 赞同：9
> 
> 时间：2013-01-27T02:28:34.200
> 
> 标签：sql, oracle, key, sqlplus

在 Oracle 中取以下两张表：

```
Create Table A
( A int, B int, C int,
  Constraint pk_ab Primary Key(A, B),
  Unique (C)
);

Create Table B
( D int, E int, F int,
  Constraint fk_d Foreign Key (D) References A(A),
  Constraint fk_e Foreign Key (E) References A(B)
); 
```

为什么这个说法不起作用？或者更具体地说，为什么它不能工作？我试图创建这种类型的关系的原因是，将来我想删除`B.D`，但保留关系`FK_E`。

我收到错误：

> ORA-02270: 此列列表没有匹配的唯一键或主键

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T05:59:45.820

> “为什么这个说法不起作用？或者更具体地说，为什么它不起作用？”

您已将 A 上的主键定义为两列 (A,B) 的组合。任何引用 PK_AB 的外键必须在数量上与这些列匹配。这是因为外键必须标识引用表中*的单个行*，该行拥有子表中的任何给定行。复合主键意味着 AA 列可以包含重复值，AB 列也可以；只有 (A,B) 的排列是唯一的。因此，引用外键需要两列。

```
Create Table B
( D int, E int, F int,
  Constraint fk_de Foreign Key (D,E) References A(A,B)
); 
```

> “由于表 B 引用了多个 PK”

错误的。B 引用单个主键，该主键恰好包含多个列，

> “说，将来我想删除BD，但保留关系fk_e。”

那没有意义。可以这样想：D 不是 B 的属性，它是 B 通过其对表 A 的依赖而继承的属性。

避免这种情况的一种方法是使用代理（或合成）密钥。复合键通常是业务键，因此它们的列在业务上下文中是有意义的。有意义的列值的一个特征是它们可以更改，并且将此类更改级联到外键可能会很麻烦。

实现代理键如下所示：

```
Create Table A
( id int not null, A int, B int, C int,
  Constraint pk_a Primary Key(ID),
  constraint uk_ab Unique (A,B)
);

Create Table B
( a_id int, F int,
  Constraint fk_n_a Foreign Key (A_ID) References A(ID)
); 
```

当然，您可以使用您发布的模式来执行此操作，因为您已经在 A(C) 上有一个单列约束。但是，我认为引用唯一约束而不是主键是不好的做法，即使它是允许的。我认为这部分是因为独特的约束通常会强制执行业务密钥，因此意味着意义，因此可能会发生变化，但主要是因为引用主键只是行业标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:08:33.967

尝试为列`A`和`B`创建表之前创建两个单独的索引`B`

```
CREATE INDEX a_idx ON A (A);
CREATE INDEX b_idx ON A (B); 
```

但可能你需要一个复合 FK 在桌子上`B`

```
Create Table B
( D int, E int, F int,
  Constraint fk_d Foreign Key (D,E) References A(A,B)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T03:08:45.793

> 外键总是引用另一个表的 PK。A 和 B 都不是 PK 的。你有多个 PK。

```
Constraint fk_d Foreign Key (D,E) References A(A,B) 
```

此外，数据库无法验证部分空的多个外键，所以我认为检查约束也需要添加到表中。

```
alter table B add constraint check_nullness
    check ( ( D is not null and E is not null ) or
                ( D is null and E is null ) ) 
```

# versioning - 为什么版本号通常是“2.1.3”而不是 2.13？

> ID：14543848
> 
> 赞同：0
> 
> 时间：2013-01-27T02:28:47.393
> 
> 标签：versioning

为什么版本号通常是“2.1.3”而不是 2.13？

似乎后者更有意义，因为您可以在其上运行数字比较器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:57:02.377

出于同样的原因，当版本号被编码为整数时（例如 Python 的[sys.hexversion](http://docs.python.org/2/library/sys.html#sys.hexversion)），它会用零填充：

您经常必须超过 10 个。

许多项目采用*major.minor.bugfix*方案（例如[语义版本控制](http://semver.org/)）。也许版本 2.1.9 有一个需要修补的安全漏洞；您需要将其称为 2.1.10（因为将其称为 2.2.0 意味着新功能和可能的轻微不兼容性）。也许版本 3 完全改变了语法，因此您希望继续向版本 2 添加功能。

也许您的项目发布如此频繁，以至于每个主要版本都有超过 100 个次要/错误修复版本（kernel.org 列出了 2.6.34.14 和 3.0.60）。

最后，它是一个*字符串*。当然，您可以将其解析为双精度以进行比较，但许多语言/库支持“数字”字符串比较（因此“文档 9”位于“文档 10”之前）；Apache 的[mod_autoindex](http://httpd.apache.org/docs/2.4/mod/mod_autoindex.html)甚至称其为“VersionSort”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:07:47.330

三级版本控制方案通常反映major.minor.build（或major.minor.revision）。

这三个级别允许级别之间的变化的重要性降低。具有major 1、minor 13 和major 1、minor 12 的软件之间的差异应该显着大于major 1、minor 1、build 3 和major 1、minor 1、build 2 之间的差异。

您可以在 . 并单独比较每个级别。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-27T02:32:58.087

即使只有一个小数点，也不能在其上使用数字比较器。

这是示例。
考虑版本 1.13 和 1.2，显然 1.13 是更高版本。但是 1.2 > 1.13。

# python-2.7 - 滑块仅位于特定数字上

> ID：14543854
> 
> 赞同：1
> 
> 时间：2013-01-27T02:29:27.617
> 
> 标签：python-2.7, slider, tkinter

这是我的滑块，我想知道有没有办法限制滑块可以定位的数字，（仅在 1500、1200、900、600 上）

```
slider = 
Tkinter.Scale(frame,orient="vertical",length=300,width=20,sliderlength=10,
from_=1500,to=600,tickinterval=300) 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T04:01:11.650

为此使用`resolution`参数。

```
import Tkinter

root = Tkinter.Tk()

slider = Tkinter.Scale(length=300, showvalue=False,
        from_=1500, to=600, tickinterval=300, resolution=300)
slider.grid(padx=12, pady=12)

root.mainloop() 
```

# python - 无法让 Python SUDS 使用此 WSDL 查询代码

> ID：14543855
> 
> 赞同：-1
> 
> 时间：2013-01-27T02:29:35.603
> 
> 标签：python, soap, wsdl, suds

当我运行它时，我没有得到结果。不知何故，我认为当我查询有效的 HCPCS 代码（下面第 4 行中的 99213 代码）时，我应该得到的不是“什么都没有”。不知道我做错了什么。

我的代码：

```
from suds.client import Client
url = "http://www.restfulwebservices.net/wcf/HCPCSService.svc?wsdl"
client = Client(url)
print client
result = client.service.GetDetailsByCode('99213')
print result 
```

**问题：**我怎样才能让它工作？根据[这个网站，](http://www.nsmha.org/datadict/Codes/CPT.aspx) 99213 是一个有效的 HCPCS 代码，但我无法使用此代码从 Web 服务获取描述或任何其他详细信息。帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:29:52.110

代码工作正常。它返回一个类。输入 T1000 而不是 99213，你就会明白我的意思了。

HCPCS 代码与 CPT 代码重叠，但 HCPCS 由 Medicare 使用（CPT 往往由私人保险使用）。看来此 WSDL 仅返回有效 HCPCS 2 级代码的值。可以在[此处](http://en.wikipedia.org/wiki/HCPCS_Level_2)找到 HCPCS 2 级代码的更精确定义。HCPCS 代码的一般定义及其与 CPT 代码的关系可在[此处](http://en.wikipedia.org/wiki/Healthcare_Common_Procedure_Coding_System)找到。

# javascript - 尝试多次更新 Knockout Js Viewmodel

> ID：14543856
> 
> 赞同：0
> 
> 时间：2013-01-27T02:29:39.487
> 
> 标签：javascript, mvvm, knockout.js

我是 Knockout JS 领域的新手。我正在尝试在与新的 JSON 对象绑定后更新我的视图模型。然而，我的尝试都是徒劳的。谁能看到我做错了什么？（下面是我的示例小提琴）。

JS

```
var strRawJSON = "{\"CPTResults\":[{\"CPT\":{\"RecordKey\":\"b8a335ab-0dda-448d-bb64-943a3cb1b586\",\"Code\":\"82947\",\"Description\":\"Glucose quantitative blood (except reagent strip)\"},\"ErrorA\":\"\",\"ErrorB\":\"\",\"ErrorC\":\"\",\"ErrorD\":\"\",\"ErrorE\":\"\",\"ErrorF\":\"\",\"MedPolicyDesc\":\"Blood Glucose Testing\",\"MedPolicyRef\":\"190.20\",\"MedPolicyWebLink\":\"http:\/\/www.cms.gov\/medicare-coverage-database\/details\/ncd-details.aspx?NCDId=98&ncdver=2&bc=AAAAgAAAAAAA&\",\"Questions\":[{\"Question\":\"If Pre-Diabetic, does the test frequency exceed one screening per 6 months?\",\"QuestionExplanation\":\"For Individuals diagnosed with Pre-Diabetes, only 2 screening test smay be performed per year, at six-month intervals. Providers should note that these testsd with a pre-diabeted diagnosis must be billed with a V77.1 diagnosis code, and a \\\"TS\\\" modifier to reflect follow up service.\\n\\nPre-Diabetes: abnormal glocose metabolism daignosed froma previous fasting glucose level of 100 to 125 mg\/dl, or a 2-hour post-glucose challenge of 140 to 199 mg\/dl. The term \\\"pre-daibetes\\\" \\nincludes impaired fasting glucose and impaired glucose tolerance.\",\"QuestionPossibleAnswers\":[{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},{\"OptionText\":\"No\",\"OptionValue\":\"pass\"}],\"QuestionUserAnswer\":{\"OptionText\":\"No\",\"OptionValue\":\"pass\"},\"isFrequency\":true,\"ABNStatement\":\"\"},{\"Question\":\"For Routine Diabetic screening, does the test frequency exceed 1 per year?\",\"QuestionExplanation\":\"Effective for services on or after January 1, 2005, Medicare will pay for diabetic screening tests under the Medicare Clinical Laboratory Fee Schedule.\\n\\nTo indicate that the purpose of the test(s) is for diabetic screening, a screening diagnosis code (V77.1) is required in the diagnosis section of the claim.\",\"QuestionPossibleAnswers\":[{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},{\"OptionText\":\"No\",\"OptionValue\":\"pass\"}],\"QuestionUserAnswer\":{\"OptionText\":\"No\",\"OptionValue\":\"pass\"},\"isFrequency\":true,\"ABNStatement\":\"\"}]}]}";
var strRawJSON2 = "{\"CPTResults\":[{\"CPT\":{\"RecordKey\":\"b8a335ab-0dda-448d-bb64-943a3cb1b586\",\"Code\":\"82947\",\"Description\":\"Test quantitative blood (except reagent strip)\"},\"ErrorA\":\"\",\"ErrorB\":\"\",\"ErrorC\":\"\",\"ErrorD\":\"\",\"ErrorE\":\"\",\"ErrorF\":\"\",\"MedPolicyDesc\":\"Blood Glucose Testing\",\"MedPolicyRef\":\"190.20\",\"MedPolicyWebLink\":\"http:\/\/www.cms.gov\/medicare-coverage-database\/details\/ncd-details.aspx?NCDId=98&ncdver=2&bc=AAAAgAAAAAAA&\",\"Questions\":[{\"Question\":\"If Pre-Diabetic, does the test frequency exceed one screening per 6 months?\",\"QuestionExplanation\":\"For Individuals diagnosed with Pre-Diabetes, only 2 screening test smay be performed per year, at six-month intervals. Providers should note that these testsd with a pre-diabeted diagnosis must be billed with a V77.1 diagnosis code, and a \\\"TS\\\" modifier to reflect follow up service.\\n\\nPre-Diabetes: abnormal glocose metabolism daignosed froma previous fasting glucose level of 100 to 125 mg\/dl, or a 2-hour post-glucose challenge of 140 to 199 mg\/dl. The term \\\"pre-daibetes\\\" \\nincludes impaired fasting glucose and impaired glucose tolerance.\",\"QuestionPossibleAnswers\":[{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},{\"OptionText\":\"No\",\"OptionValue\":\"pass\"}],\"QuestionUserAnswer\":{\"OptionText\":\"No\",\"OptionValue\":\"pass\"},\"isFrequency\":true,\"ABNStatement\":\"\"},{\"Question\":\"For Routine Diabetic screening, does the test frequency exceed 1 per year?\",\"QuestionExplanation\":\"Effective for services on or after January 1, 2005, Medicare will pay for diabetic screening tests under the Medicare Clinical Laboratory Fee Schedule.\\n\\nTo indicate that the purpose of the test(s) is for diabetic screening, a screening diagnosis code (V77.1) is required in the diagnosis section of the claim.\",\"QuestionPossibleAnswers\":[{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},{\"OptionText\":\"No\",\"OptionValue\":\"pass\"}],\"QuestionUserAnswer\":{\"OptionText\":\"No\",\"OptionValue\":\"pass\"},\"isFrequency\":true,\"ABNStatement\":\"\"}]}]}";
var strModifiedJSON = "{\"CPTResults\":[{\"CPT\":{\"RecordKey\":\"b8a335ab-0dda-448d-bb64-943a3cb1b586\",\"Code\":\"82947\",\"Description\":\"Glucose quantitative blood (except reagent strip)\"},\"ErrorA\":\"\",\"ErrorB\":\"\",\"ErrorC\":\"\",\"ErrorD\":\"\",\"ErrorE\":\"Medicare may not pay for this test based on frequency limitations.\",\"ErrorF\":\"\",\"MedPolicyDesc\":\"Blood Glucose Testing\",\"MedPolicyRef\":\"190.20\",\"MedPolicyWebLink\":\"http:\/\/www.cms.gov\/medicare-coverage-database\/details\/ncd-details.aspx?NCDId=98&ncdver=2&bc=AAAAgAAAAAAA&\",\"Questions\":[{\"Question\":\"If Pre-Diabetic, does the test frequency exceed one screening per 6 months?\",\"QuestionExplanation\":\"For Individuals diagnosed with Pre-Diabetes, only 2 screening test smay be performed per year, at six-month intervals. Providers should note that these testsd with a pre-diabeted diagnosis must be billed with a V77.1 diagnosis code, and a \\\"TS\\\" modifier to reflect follow up service.\\n\\nPre-Diabetes: abnormal glocose metabolism daignosed froma previous fasting glucose level of 100 to 125 mg\/dl, or a 2-hour post-glucose challenge of 140 to 199 mg\/dl. The term \\\"pre-daibetes\\\" \\nincludes impaired fasting glucose and impaired glucose tolerance.\",\"QuestionPossibleAnswers\":[{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},{\"OptionText\":\"No\",\"OptionValue\":\"pass\"}],\"QuestionUserAnswer\":{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},\"isFrequency\":true,\"ABNStatement\":\"\"},{\"Question\":\"For Routine Diabetic screening, does the test frequency exceed 1 per year?\",\"QuestionExplanation\":\"Effective for services on or after January 1, 2005, Medicare will pay for diabetic screening tests under the Medicare Clinical Laboratory Fee Schedule.\\n\\nTo indicate that the purpose of the test(s) is for diabetic screening, a screening diagnosis code (V77.1) is required in the diagnosis section of the claim.\",\"QuestionPossibleAnswers\":[{\"OptionText\":\"Yes\",\"OptionValue\":\"fail\"},{\"OptionText\":\"No\",\"OptionValue\":\"pass\"}],\"QuestionUserAnswer\":null,\"isFrequency\":true,\"ABNStatement\":\"\"}]}]}";
var viewModel;

$('#MedNecContainer').removeClass('hide');
var objViewModel = ko.mapping.fromJSON(strRawJSON, CPTResultsMappingOptionsFunctions);

viewModel = { 
    list: objViewModel
};

console.log('objViewModel.CPTResults.length:' + objViewModel.CPTResults().length);
console.log('viewModel.list.length:' + viewModel.list.length);
console.log('viewModel.list.CPTResults.length:' + viewModel.list.CPTResults().length);

ko.applyBindings(viewModel, document.getElementById("MedNecContainer"));

setInterval(function() {
    var newList = ko.mapping.fromJS(strModifiedJSON);        
    viewModel.list = newList;
    console.log('reload');
},1000);

function CPTResultsMappingOptionsFunctions() {
    var self = this;
    var i = 0;
    self.setDropdownOnChange = function (elements, data) {
        $(".cpt-question").bind("change", function (event) {
        });

    }
} 
```

html/模板：

```
<div class="widget hide" id="MedNecContainer">
    <div class="widget-header">
        <h3>Med Nec Results</h3>
    </div>
    <div class="widget-content">
        <div class="controls controls-row">
            <table class="table table-bordered table-hover" >
                <thead>
                    <tr>
                        <th>#</th>
                        <th>CPT© Code</th>
                        <th>Error E</th>
                        <!--th>Description</th-->
                        <th>Question(s)</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="tbCPTResults" data-bind="template: { name: 'med-nec-results-row', foreach:list.CPTResults(), 'if': list.CPTResults() && list.CPTResults().length > 0}">  

                </tbody>
            </table>                  
        </div>
    </div>
</div>

<script type="text/html" id="tweetsTemplate">
 </script>         

<script type="text/html" id="med-nec-results-row">
    <tr>
        <td data-bind="text: $index"></td>
        <!--td data-bind="text: cptAndDescription"></td-->
        <td data-bind="text: CPT.Description"></td>
        <td data-bind="text: ErrorE"></td>
        <td>
            <table class="table table-bordered">
                <tbody data-bind="template: {   name: 'med-nec-results-question-row', 
                                                foreach: Questions(), 
                                                'if': Questions() && Questions().length > 0
                                             }">    
                </tbody>
            </table>
        </td>
        <td></td>
    </tr>
</script>

<script type="text/html" id="med-nec-results-question-row">
    <tr class="med-nec-questions">
        <td data-bind="text:Question"></td>
        <!--td data-bind="text:QuestionExplanation"></td-->
        <td>
            <select class="cpt-question" data-bind="options: QuestionPossibleAnswers,  
                                                    optionsText: 'OptionText', 
                                                    value: QuestionUserAnswer, 
                                                    optionsCaption: 'Choose...'">
            </select>
        </td>
    </tr>
</script> 
```

[http://jsfiddle.net/dagr8anil/JBby7/89/](http://jsfiddle.net/dagr8anil/JBby7/89/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:45:57.113

一些东西：

1.  您需要使其`viewModel.list`可观察，以便您的视图可以对`list`分配给新值做出反应：

    ```
    viewModel = { 
        list: ko.observable(objViewModel)
    }; 
    ```

2.  您还需要像使用初始数据调用映射函数一样调用映射函数。还要确保通过传递来更新可观察对象`newList`：

    ```
    var newList = ko.mapping.fromJSON(strModifiedJSON, CPTResultsMappingOptionsFunctions);     
    viewModel.list(newList); 
    ```

3.  最后，您需要更新您的`template`绑定`tbody`：

    ```
    <tbody id="tbCPTResults" data-bind="template: { name: 'med-nec-results-row', foreach:list().CPTResults(), 'if': list().CPTResults() && list().CPTResults().length > 0 }"> 
    ```

**更新示例：http:** [//jsfiddle.net/JBby7/91/](http://jsfiddle.net/JBby7/91/)

# c++ - 不同形状之间的交集

> ID：14543859
> 
> 赞同：1
> 
> 时间：2013-01-27T02:30:15.063
> 
> 标签：c++, inheritance, geometry, polymorphism, virtual

我正在尝试制作一个形状库。有以下类 Shape，具有此声明：

```
#include "pos.h"
#ifndef SHAPE_H
#define SHAPE_H

class Shape{
protected:
    Pos pos;
public:
    Pos getPos();
    void setPos(Pos pos);
    virtual bool intersection(Shape&);

    Shape():pos((Pos){0,0}){}
    Shape(Pos pos):pos(pos){}
    Shape(int x, int y):pos((Pos){x,y}){}
};

#endif      /*  SHAPE_H */ 
```

如您所见，有一个虚函数成员（交集）。此函数旨在计算两个形状是否相交（无论它们是圆形、矩形还是其他形状）。我还声明了这些类（圆形和矩形）：

```
#include "pos.h"
#include "shape.h"

#ifndef RECTANGLE_H
class Rectangle;
#endif      /*  RECTANGLE_H */

#ifndef CIRCLE_H
#define CIRCLE_H

class Circle : public Shape{
private:
    int radius;
public:
    int getRadius(){return radius;}
    void setRadius(int radius){this->radius=radius;}

    bool containsPos(Pos p);
    bool intersection(Circle& c);
    bool intersection(Rectangle& r);

    Circle();
    Circle(Pos pos);
    Circle(int radius);
    Circle(Pos pos, int radius);
};

#endif      /*  CIRCLE_H    */ 
```

* * *

```
#include "pos.h"
#include "shape.h"

#ifndef CIRCLE_H
class Circle;
#endif      /*  CIRCLE_H */

#ifndef RECTANGLE_H
#define RECTANGLE_H

class Rectangle : public Shape{
private:
    int width;
    int height;
public:
    int getWidth(){return width;}
    int getHeight(){return height;}

    void setWidth(int width){this->width=width;}
    void setHeight(int height){this->height=height;}

    bool containsPos(Pos pos);
    bool intersection(Rectangle& r);
    bool intersection(Circle& c);

    Rectangle():Shape(),width(0),height(0){}
    Rectangle(int w, int h):Shape(),width(w),height(h){}
    Rectangle(Pos p, int w, int h):Shape(p), width(w),height(h){}
    Rectangle(int x, int y, int w, int h):Shape(x,y), width(w), height(h){}

};

#endif      /*  RECTANGLE_H */ 
```

如您所见，我在每个 Shape 子类中为 Shape 的每个其他子类创建了一个成员函数。
看起来不错，但是有问题。当您调用交集给出形状时（我的意思是编译器不知道它的形状，例如从形状向量中获取时）作为参数它不起作用（g ++：没有匹配的调用函数）。
我想这是因为我没有覆盖 Shape 的虚函数，因为只要参数不同，功能就不同（我认为）。
好吧，我想知道是否有一种很酷的方法可以实现这个目标。

编辑：我在现代 c++ 设计的第 11 章中找到了更多关于我的问题的内容。它是关于多方法（带有必须在运行时检查其类型的参数的方法）。在本章的第 9 节中，作者提到当与 static_cast 结合使用时，dynamic_cast 是一个不错的选择。如果我找到更多关于此的信息，我将再次编辑。
编辑 2：在“现代 c++ 设计”的第 11 章中，您可以在第二节中找到作者提到游戏中不同形状之间的碰撞检测是需要使用多方法的典型问题。我没有说，但这个小图书馆是为了游戏而设计的，所以这正是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:46:27.320

设计是错误的。First Shape 需要一个名为的虚拟方法`BoundingRect`，该方法返回派生类填充区域的 Top、Left、Bottom、Right。那么 Shape.intersection 做的第一件事就是判断边界矩形是否相交；一个微不足道的练习。

现在变得更难了。每个形状都必须提供一个虚拟名称，它返回**真实**描述该区域`Paths`的线段/贝塞尔曲线的列表/数组。然后该方法确定任一形状中的任何路径是否相交。**`intersection`**

 **祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T07:25:10.080

启用[运行时类型信息](http://en.wikipedia.org/wiki/Run-time_type_information)，创建一个实际采用 Shape 类的交集方法，并使用 dynamic_cast 找出你得到的对象，然后在派生对象上调用重载的交集调用。

请注意，尽管 RTTI 会严重减慢您的代码速度，并且为每种类型的形状提供特殊功能会严重阻碍代码的灵活性和可维护性。从长远来看，像 Richard 提出的通用解决方案可能更有益。**

# python - 显示来自 MEDIA_ROOT 的图像源

> ID：14543860
> 
> 赞同：1
> 
> 时间：2013-01-27T02:30:26.843
> 
> 标签：python, django, media

我的 media_root 路径设置为

```
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), 'media')
MEDIA_URL = 'media/' 
```

我的项目结构如此

```
 Project_Name/
     media/
       profiles/
   App_Name 
```

当我尝试引用`profiles/`目录中的图像时，出现 404 no resource found 错误。

```
 src="{{ MEDIA_URL }}{{ result.photo }}"> 
```

这解决了`http://127.0.0.1:8000/media/profiles/image1.jpg`找不到。我是否缺少绝对路径，我使用的是 DJango 1.4，我的 urls.py 中没有设置媒体根目录，但我没有定义我的`STATIC_URL`定义并且我能够找到我的静态资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:56:24.573

这是您项目的主要路径

```
PROJECT_ROOT = os.path.join(os.path.dirname(__file__), '..')
SITE_ROOT = PROJECT_ROOT 
```

在这里，系统调用您上传图片存储的媒体文件夹路径

```
MEDIA_ROOT = os.path.join(SITE_ROOT, 'media')
MEDIA_URL = '/media/' 
```

这是您的静态文件，其中 css/js/img/ ... 存储

```
STATIC_ROOT = os.path.join(SITE_ROOT, 'static')
STATIC_URL = '/static/' 
```

静态文件的附加位置

```
STATICFILES_DIRS = (
    os.path.join(SITE_ROOT, 'staticfiles'),
) 
```

网址.py

```
from django.conf.urls import patterns, include, url
from django.conf.urls.static import static
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from project_name import settings
admin.autodiscover()

urlpatterns = patterns('',
     .........
     .........
) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-10T07:11:27.607

**[这是媒体文件夹中的图像未显示 django 模板](https://stackoverflow.com/questions/50177208/images-from-media-folder-is-not-displaying-django-template/68325385#68325385)**的答案****

# java - 在 spring-data-neo4j 中使用 @Transactional 的问题

> ID：14543862
> 
> 赞同：2
> 
> 时间：2013-01-27T02:30:40.780
> 
> 标签：java, cxf, spring-transactions, spring-data-neo4j

我正在混合 spring-data 和 CXF 来创建一个创建 neo4j 节点的 RESTful 端点。我的结构是一组接口，它定义了面向公众的方法，我的实现有几个私有方法，由我的公共方法调用。

我的私有方法上有 spring-tx `@Transactional`，当我尝试从我的公共方法中调用它们时，我得到一个`org.neo4j.graphdb.NotInTransactionException`. 下面是一个 GitHub 项目，用于显示我的配置，您也可以运行它来查看问题所在：

[https://github.com/NicholasAStuart/broken-spring-neo4j-cxf.git](https://github.com/NicholasAStuart/broken-spring-neo4j-cxf.git)

谁能帮我？我已按照 spring-data-neo4j 文档中的步骤进行操作，但我似乎无法使其正常工作，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:55:08.003

`@Transactional`注释不适用于私有方法。

来自[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)：

> 使用代理时，您应该仅将 @Transactional 注释应用于具有公共可见性的方法。如果您使用 @Transactional 注释对受保护的、私有的或包可见的方法进行注释，则不会引发错误，但带注释的方法不会显示配置的事务设置。如果您需要注释非公共方法，请考虑使用 AspectJ（见下文）。

您可以使用该`aspectj`模式在任何类型的方法上启用此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:57:25.110

作为[spring 手册第 11.5.6 章的](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-declarative)荧光笔：

> 方法可见性和@Transactional
> 
> 使用代理时，您应该仅将 @Transactional 注释应用于具有公共可见性的方法。如果您使用 @Transactional 注释对受保护的、私有的或包可见的方法进行注释，则不会引发错误，但带注释的方法不会显示配置的事务设置。如果您需要注释非公共方法，请考虑使用 AspectJ（见下文）。

# android - Android Cordova (PhoneGap) + GCM 未启动 JS 功能

> ID：14543864
> 
> 赞同：2
> 
> 时间：2013-01-27T02:31:41.620
> 
> 标签：android, cordova, google-cloud-messaging

我有一个通过 GCM 接收推送通知的简单应用程序。

我正在使用 Cordova + GCM 插件。我有一个显示通知的 JAVA 部分。JS 向服务器发送确认回执并在 SQlite DB 中记录消息。

应用程序启动后，一切正常。如果我清除内存或重新启动设备，设备仍会收到消息。Java 部分显示通知。但是 JS 函数调用 onMessage 不起作用（即设备不存储消息也不发送确认回执）。

这是我的两个场景的日志。对于某些未加载应用程序时调用 null，而不是 GCM_Event...

应用程序已加载，即使在后台：

```
01-26 16:19:03.958: V/GCMBroadcastReceiver(10546): onReceive: com.google.android.c2dm.intent.RECEIVE
01-26 16:19:03.958: V/GCMBroadcastReceiver(10546): GCM IntentService class: com.my.app.GCMIntentService
01-26 16:19:03.958: V/GCMBaseIntentService(10546): Acquiring wakelock
01-26 16:19:04.038: D/GCMIntentService(10546): onMessage - context: android.app.Application@4200bed0
01-26 16:19:04.063: D/GCMIntentService(10546): Dump json: {"message":"","ck":"42","cb":"9999","event":"message"}
01-26 16:19:04.063: V/GCMPlugin:sendJavascript(10546): javascript:GCM_Event({"message":"","ck":"42","cb":"9999","event":"message"})
01-26 16:19:04.068: V/GCMBaseIntentService(10546): Releasing wakelock 
```

如果应用程序被卸载，一切都完全一样，除了最后一行：

```
01-26 16:19:04.063: V/GCMPlugin:sendJavascript(10546): javascript:null({"message":"","ck":"42","cb":"9999","event":"message"})
01-26 16:19:04.068: V/GCMBaseIntentService(10546): Releasing wakelock 
```

# grails - 在单元测试中，如何替换域对象上的接口方法？

> ID：14543865
> 
> 赞同：2
> 
> 时间：2013-01-27T02:31:44.823
> 
> 标签：grails, groovy, junit

我正在使用 Groovy 1.8.6 和 Grails 2.1.1

我有一个界面

```
public interface Searchable{
    Long docVersion()
} 
```

由对象实现

```
class Book implements Searchable {
    Long docVersion() {
        System.currentTimeMillis() / 1000L
    }

    String otherMethod() {
        "toto"
    }
} 
```

和一个测试

```
@Mock([Book])
class SomeBookTester {
    @Before
    void setup() {
        Book.metaclass.docVersion = {-> 12345}
        Book.metaclass.otherMethod = {-> "xyz"}
    }

    @Test
    void test1() {
        assert 12345 == new Book().docVersion()
    }

    @Test
    void test2() {
        assert "xyz" == new Book().otherMethod()
    }
} 
```

第一次测试总是失败，因为方法替换不起作用。我该如何解决这个问题？有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T07:08:08.067

您最好使用适当的 GrailsMock 设施。你可以试试这个：

```
@Mock([Book])
class SomeBookTester {
    @Before
    void setup() {
        def mockBook = mockFor(Book)
        mockBook.demand.docVersion(0..1)  { -> 12345 }
        mockBook.demand.otherMethod(0..1) { -> "xyz" }
        Book.metaClass.constructor =  { -> mockBook.createMock() }
    }

    @Test
    void test1() {
        assert 12345 == new Book().docVersion()
    }

    @Test
    void test2() {
        assert "xyz" == new Book().otherMethod()
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:33:58.023

这对我有用

我像这样改变班级：

```
class Book implements Searchable {
    Long docVersion() {
        currentTime()
    }

    Long currentTime() {
        System.currentTimeMillis() / 1000L
    }

    String otherMethod() {
        "toto"
    }
} 
```

并且在测试中，我替换了**currentTime**方法

```
@Mock([Book])
class SomeBookTester {
    @Before
    void setup() {
        Book.metaclass.currentTime= {-> 12345}
        Book.metaclass.otherMethod = {-> "xyz"}
    }

    @Test
    void test1() {
        assert 12345 == new Book().docVersion()
    }

    @Test
    void test2() {
        assert "xyz" == new Book().otherMethod()
    }
} 
```

测试通过

# php - 控制器未加载，Apache 或 CodeIgniter 没有错误

> ID：14543867
> 
> 赞同：0
> 
> 时间：2013-01-27T02:32:16.513
> 
> 标签：php, codeigniter

我确信这是我的一个简单错误。我正在尝试向朋友演示 ci，我们创建了一个简单的控制器，如下所示：

```
<?php

class Customerlookup extends CI_Controller {

    //constructor for this class
    public function __construct()
    {

        parent::__construct();      
        $this->load->model('customerlookup_model');
    }

    public function index()
    {
        echo 'test';
    }
    public function loadcustomers()
    {
        $data['cust'] = this->customerlookup_model->get_customers();
        $this->load->view('customerlookup',$data);
    }

} 
```

这是模型的样子：

```
<?php 
class Customerlookup_model extends CI_Model
{
    public function __construct()
    {
        parent::Model();
        $this->load->database();
    }

    public function get_customers()
    {
        $query = $this->db->get('customer');
        return $query->result_array();
    }
} 
```

如果我尝试通过执行以下任一操作来测试这一点：

```
localhost/myapp/index.php/customerlookup/loadcustomers 
```

或者

```
localhost/myapp/index.php/customerlookup/ 
```

什么也没有发生，也没有错误出现，也没有数据或消息。我们正在使用最新的 CodeIgniter (2.1.3)。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:23:20.137

我发现了问题。php错误没有打开。有一些语法问题。检查了 apache 错误日志，发现错误只是没有显示

谢谢你们的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:22:42.413

你缺少你的 url 助手

$this->load->helper('url');

进入你的

类 Customerlookup 扩展 CI_Controller {

```
//constructor for this class
public function __construct()
{

    parent::__construct();      
    $this->load->model('customerlookup_model');
    $this->load->helper('url');

}

public function index()
{
    echo 'test';
}
public function loadcustomers()
{
    $data['cust'] = this->customerlookup_model->get_customers();
    $this->load->view('customerlookup',$data);
} 
```

}

# objective-c - NSMutableSet 错误 - 意外的标识符

> ID：14543868
> 
> 赞同：0
> 
> 时间：2013-01-27T02:32:23.460
> 
> 标签：objective-c

```
NSMutableSet *validOperations = [@"sin", @"cos", @"sqrt", @"π", @"+/-",@"+", @"-", @"*",@"/",nil]; 
```

我有一个意外的标识符错误，我做错了什么？

对不起，如果这个问题看起来很蹩脚，但实际上这是我第一次使用Objective-C编码所以我真的不知道这里有什么问题，所以有经验的程序员，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:39:47.073

这是你的意思吗？

```
NSMutableSet *validOperations = [NSMutableSet setWithObjects: @"sin", @"cos", @"sqrt", @"π", @"+/-",@"+", @"-", @"*",@"/",nil]; 
```

为了创建`NSSet`or `NSMutableSet`，您需要调用一个方法。没有从对象列表创建集合的内置语法。

# php - 有没有办法让当前的 Twitter 登录用户已经关注或取消关注我？

> ID：14543870
> 
> 赞同：-1
> 
> 时间：2013-01-27T02:32:39.390
> 
> 标签：php, javascript, twitter

我需要让当前的 Twitter 登录用户关注/取消关注我。这可能吗？

注意：我不想将用户转发到 Twitter 网站，我想知道我自己网站上的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:39:40.607

将用户转发到 Twitter 站点，让他们决定是否要关注/取消关注您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:46:18.287

只需去谷歌搜索“检查 twitter status js embed”，你就会找到答案。网站[http://www.sitepor500.com.br](http://www.sitepor500.com.br)也使用了一个插件。

# assembly - MIPS 汇编语言作业

> ID：14543872
> 
> 赞同：0
> 
> 时间：2013-01-27T02:32:56.987
> 
> 标签：assembly, mips

我的老师给了我们一张与 MIPS 汇编语言有关的工作表来完成。我试图弄清楚。这是她教学的第一年，我认为她还没有完全掌握它。她在课堂上造成的混乱多于理解，但也许这只是主题。

我一直在做很多研究，但我发现没有任何一种格式可以与她的问题进行比较。我相信如果我能在第一个问题上得到帮助，我可以将其与其他作业进行比较，并更好地理解它的工作方式。

**1\. 将您的首字母映射到字母，例如 A=1、B=2、C=3 等。然后编写一个 MIPS 程序，将内存位置 0 中的值加载到映射到您的第一个首字母 (Value A) 的寄存器中。 ..**

我的第一个首字母是 C=3。有人可以告诉我这应该是什么样子吗？

*   书中的加载词示例说明格式应类似于 lw $s1,20($s2)

所以在那个例子中是 20 内存位置，或者他们放入 $s2 的值？或者都不是？

提前感谢任何提供帮助的人，如果我问这个问题没有任何意义，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:14:09.333

```
lw $s1,20($s2) 
```

将 s2 + 20 内的 RAM 地址处的字加载到 s1 中。

# jquery - Popover 未正确显示数据内容

> ID：14543874
> 
> 赞同：0
> 
> 时间：2013-01-27T02:33:07.747
> 
> 标签：jquery, twitter-bootstrap, responsive-design

在表单中有一个输入

```
input(rel='popover', data-content='Precio del Alquiler.',type="text",placeholder="Precio del Alquiler",id="precio",name='precio_alquiler') 
```

当我使用 jQuery 调用 popover 引导程序时，一切正常。

```
$('#precio').popover('show); 
```

但是我不得不纠正设计中的一个问题，我改变了输入的结构，如下所示：

```
div.input-prepend
    span.add-on $
    input.prependedInput(rel='popover', data-content='Precio del Alquiler.',type="text",placeholder="Precio del Alquiler",id="precio",name='precio_alquiler') 
```

当我调用 jQuery 函数时，弹出框显示为空。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:38:31.563

解决方案很简单......只需在父 div 中执行 popover

```
div.input-prepend(rel='popover', data-content='Precio del Alquiler.')
    span.add-on $
    input.prependedInput(type="text",placeholder="Precio del Alquiler",id="precio",name='precio_alquiler') 
```

jquery代码是

```
$('#precio').parent().popover('show); 
```

全部

# networking - 网络上的静态 IP

> ID：14543876
> 
> 赞同：-2
> 
> 时间：2013-01-27T02:33:16.790
> 
> 标签：networking, ip, router

我想在具有静态 IP 的网络上维护一台计算机。我无法访问路由器，所以我无法在那里保留地址。

我的问题是；如果我这样做，路由器是否有可能将相同的 IP 地址分配给另一台计算机？

李

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:16:01.607

听起来您希望服务器始终具有相同的地址。我认为这太低级了。为什么不只需要一个特定的计算机名称，例如`myapp-server`. 然后学校可以命名服务器`myapp-server`或仅进行 DNS 转换；通过在 DNS 服务器中创建 ALIAS 记录或更改每个客户端上的 LMHOSTS 文件。

我`DNS mapping`在许多生产环境中使用过。它使开发人员和系统管理员的生活变得非常简单。每个管理员都知道如何将 DNS 主机名添加到他们的网络。最坏的情况是，如果没有真正的网络管理员，您总是可以在 LMHOSTS 文件中硬连线 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T03:17:43.767

您始终可以通过手动指示应用程序使用 DHCP。但是，只要该 IP 地址是 DHCP 池的一部分，就总是存在其他人可以抓住它的边缘情况风险——比如说——服务器出现故障，网络上的机器在服务器重新启动之前启动，再见，再见网络。

但也许您应该调查使用类似于[Avahi （](http://avahi.org) [Apple 的 Bonjour](https://developer.apple.com/bonjour/)的开源版本）的多播设置来设置`zeroconf`网络，而不是 IP 地址是静态的。

这样，您的应用程序就可以拥有唯一的广播主机名，并且 IP 问题不是问题。IP 可以随时更改，因为 Avahi 的整个概念是简单地为更改的 IP 提供一个通用别名。

使用`myapp-server`另一个答案中概述的示例，您只需要在计划安装应用程序的机器上设置 Avahi，然后您就可以通过它访问它`http://myapp-server.local`，它的美妙之处在于您永远不必弄乱路由器或 DNS 条目。

# php - mysql num_row 检查多个帖子值

> ID：14543878
> 
> 赞同：0
> 
> 时间：2013-01-27T02:33:27.980
> 
> 标签：php, html, mysql

我需要对多个输入字段执行 num_row 检查，以检查所有字段是否都有数据库中的电子邮件。如果一个字段不在数据库中，它应该回显该值不是注册的电子邮件。如果该字段为空，它会忽略它，除非所有字段都为空，在这种情况下它会回显一条消息。我所做的有缺陷，因为如果第一个输入字段为空，它就不起作用。有更好的方法吗？

```
foreach($_POST as $value){
        $usercheck =  "SELECT email FROM users WHERE email = '$value'";
        $usercheck = $db->query($usercheck);

        if($usercheck->num_rows !== 0 || $value =="") 
          {
            $valid="1";
          }
               break;
       }

     if(empty($value))
 {
    echo "none filled in";
 }  else
    if ($valid == "1")
{
   echo "all good";
}  else
{
  echo $value." is not a user";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:47:14.853

类似于以下内容：

```
$list = implode('`,`', $_POST);
$usercheck =  "SELECT email FROM users WHERE email IN ('$value')";
$usercheck = $db->query($usercheck);

if(empty($_POST)) {
    echo "all good";
} elseif($usercheck->num_rows > 0) {
    echo "none filled in";
} else {
    echo "$value is not a user";
} 
```

请注意，您的代码是不安全的，可能会被 SQL 注入利用。为了防止这种情况，您可以：

*   使用[mysqli::real_escape_string](http://php.net/manual/en/mysqli.real-escape-string.php)
*   使用[MySqli 的预处理语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)（*建议*）
*   使用 PDO（*建议*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:51:37.313

在 foreach 循环内，

你似乎在第一次迭代本身就中断了。我想知道它会怎么去下一个。我删除了中断并将其他代码移到了它之外的 foreach 循环中。

```
 foreach($_POST as $value){
            $usercheck =  "SELECT email FROM users WHERE email = '$value'";
            $usercheck = $db->query($usercheck);

            if($usercheck->num_rows !== 0 || $value =="") 
              {
                $valid="1";
              }
        if(empty($value))
     {
        echo "none filled in";
     }  else
        if ($valid == "1")
    {
       echo "all good";
    }  else
    {
      echo $value." is not a user";
    }

       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T02:40:12.447

确实。

```
// Dump all of $_POST into a long, concatenated string
// results in: field1','field2','field3
$group = implode( "','", $_POST );

$sql_statement = "SELECT email FROM users WHERE email IN ('$group'); ";
$results = $db->query( $sql_statement );

if ( $results->num_rows > 0 ){
    // valid
} else {
    // not valid
} 
```

# java - 如何使用 Java 解析 JSON 二维数组

> ID：14543881
> 
> 赞同：1
> 
> 时间：2013-01-27T02:33:59.467
> 
> 标签：java, arrays, json, parsing

我有这样的json数据：

```
{ 
    "err_code": "0", 
    "date":"20130121",
    "time_from":"1242", 
    "range":"5",
    "data":[['12313123','BOOK CODE CYFV3M
NUM CODE 3789850802600'],['089898989','BOOK CODE 1F45MN
NUM CODE 3787510241500']] 
} 
```

我试过这个程序：

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class JsonKAI {

    public static void main(String[] args) {

        String jStr = "{\"err_code\":\"0\",\"date\":\"20130121\",\"time_from\":\"1242\",\"range\":\"5\",\"data\":[['12313123','BOOK CODE CYFV3M NUM CODE 3789850802600'],['089898989','BOOK CODE 1F45MN NUM CODE 3787510241500']] }";
// Replace this try catch block for all below subsequent examples
        try {
            JSONObject rootObject = new JSONObject(jStr);
            JSONArray rows = rootObject.getJSONArray("data"); // Get all JSONArray data
            int count = rows.length();
            for(int i=0 ; i< count; i++){
                JSONArray jsonArr = rows.getJSONArray(i);
                System.out.println("jsonObject " + i + ": " + jsonArr);
                //for(int j=0 ; j< count; j++){
                //JSONArray jArr = rows.getJSONArray(j);
                //String s = jArr.toString();
                //System.out.println("jsonObject " +s);
            }}
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
} 
```

输出是：

```
jsonObject 0: ["12313123","BOOK CODE CYFV3M NUM CODE 3789850802600"]
jsonObject 1: ["089898989","BOOK CODE 1F45MN NUM CODE 3787510241500"] 
```

我想问如何从 ["12313123","BOOK CODE CYFV3M NUM CODE 3789850802600"] 获​​取/解析

to `12313123`and `BOOK CODE CYFV3M NUM CODE 3789850802600`(没有'['和'"')？请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:06:28.040

你可以试试这个：

```
 String jStr = "{\"err_code\":\"0\",\"date\":\"20130121\",\"time_from\":\"1242\",\"range\":\"5\",\"data\":[['12313123','BOOK CODE CYFV3M NUM CODE 3789850802600'],['089898989','BOOK CODE 1F45MN NUM CODE 3787510241500']] }";
        try {
          JSONObject rootObject = JSONObject.fromObject(jStr);
          JSONArray rows = rootObject.getJSONArray("data"); // Get all JSONArray data
          int count = rows.size();
          for (int i = 0; i < count; i++) {
            JSONArray jsonArr = rows.getJSONArray(i);
            System.out.println("jsonArray " + i + ": " + jsonArr);
            for (Object o : jsonArr) {          
              System.out.println(o);
            }
          }
        } catch (JSONException e) {
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T11:53:51.227

我有以下示例：

```
String str = "{\"items\":[[1,2,3],[4,5,6],[7,8,9]],\"ans\":[[\"1\",\"2\"],[\"Glad\",\"Good\"]]}";
            try{
                JSONObject jsonObj = new JSONObject(str);
                JSONArray jsonArry1 = jsonObj.getJSONArray("items");

                int[][] ints1 = new int[jsonArry1.length()][3];

                for(int i = 0; i<jsonArry1.length(); i++){
                    JSONArray jsa1 = jsonArry1.getJSONArray(i);

                    for(int j = 0; j<jsa1.length();j++){
                        ints1[i][j] = jsa1.getInt(j);
                    }

                } 
```

我测试过，它有效！

# facebook - 验证特定应用的 Facebook 访问令牌

> ID：14543882
> 
> 赞同：14
> 
> 时间：2013-01-27T02:34:28.820
> 
> 标签：facebook, api, authentication

我需要验证我的 iPhone 应用程序上的用户是否确实登录到我的 Facebook 应用程序。我可以通过使用他们的访问令牌检索它来验证他们的用户 ID：

> [https://graph.facebook.com/me?fields=id&access_token=XXXXXXXXXXXXXXX](https://graph.facebook.com/me?fields=id&access_token=XXXXXXXXXXXXXXX)

我预见的安全问题是，他们可以向我发送任何有效的访问令牌，并且它将返回他们的用户 ID。我还需要验证此令牌是否适用于我的特定应用程序。有没有办法在这个请求中返回应用程序 ID 来验证它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-12-30T17:25:23.483

Facebook 现在支持调试访问令牌。您可以通过向连接发出 GET 请求来检索与特定访问令牌相关的信息`debug_token`。就像是：

```
GET /debug_token?
     input_token={input-token}&
     access_token={access-token} 
```

其中， ***input-token***：您要获取有关信息的访问令牌和***access-token***：您的应用程序访问令牌或来自应用程序开发人员的有效用户访问令牌

这将返回以下信息：

```
{
        "data": {
            "app_id": 000000000000000, 
            "application": "Social Cafe", 
            "expires_at": 1352419328, 
            "is_valid": true, 
            "issued_at": 1347235328, 
            "scopes": [
                "email", 
                "publish_actions"
            ], 
            "user_id": 1207059
        }
    } 
```

您可以在[获取有关令牌和调试的信息](https://developers.facebook.com/docs/facebook-login/access-tokens/debugging-and-error-handling)参考中获得有关它的更多信息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-27T03:09:29.590

是的。你可以这样查询：

```
https://graph.facebook.com/app?access_token=TOKEN 
```

它将返回有关创建访问令牌的应用程序的名称、ID 和一些统计信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-08T16:23:52.677

这是我在 Python 3 中的实现，实现了单个 Facebook 批处理请求。这应该让您在一次调用中同时获得与用户的 access_token 相关联的 APP 和 USER 数据。

```
#Build the batch, and urlencode it
batchRequest = '[{"method":"GET","relative_url":"me"}, {"method":"GET","relative_url":"app"}]'
batchRequestEncoded = urllib.parse.quote_plus(batchRequest)

#Prepare the batch and access_token params
dataParams = 'access_token=%s&batch=%s' % (fb_access_token, batchRequestEncoded)
dataParamsEncoded = dataParams.encode()
fbURL = 'https://graph.facebook.com/'

#This will POST the request
response = urllib.request.urlopen(fbURL, dataParamsEncoded)

#Get the results
data = response.read()
data = json.loads(data.decode("utf-8")) 
```

可能有一种更 Pythonic 的方式来实现我编写的一些编码调用，但我只是想展示什么对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-16T09:37:23.020

您可以`appsecret_proof`在您的 api 调用中使用。

从[官方文档](https://developers.facebook.com/docs/graph-api/securing-requests)：

> 访问令牌是可移植的。可以获取 Facebook 的 SDK 在客户端上生成的访问令牌，将其发送到服务器，然后代表客户端从该服务器进行调用。

> 您可以通过将 appsecret_proof 参数添加到来自服务器的每个 API 调用并启用该设置以要求对所有调用进行证明来防止这种情况。这可以防止坏人使用他们服务器上的访问令牌进行 API 调用。

例子：

```
https://graph.facebook.com/app?access_token=TOKEN&appsecret_proof=<app secret proof> 
```

在 PHP 中：

```
$endpoint = sprintf(
    'https://graph.facebook.com/app?access_token=%s&appsecret_proof=%s',
    urlencode($accessToken),
    urlencode(
        hash_hmac('sha256', $accessToken, $appSecret)
    )
); 
```

您现在可以相信您获得的响应可用于身份验证。

# sublimetext2 - Sublime text 2 是否有任何变量重命名插件？

> ID：14543883
> 
> 赞同：12
> 
> 时间：2013-01-27T02:34:38.923
> 
> 标签：sublimetext2

我正在使用 Jetbrain WebStorm IDE，但我喜欢 Sublime Text，所以如果我有一个 Sublime 的重命名插件，我会放弃我的 WebStorm，它对我来说太重了。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-06T14:42:10.743

Sublime 2 具有内置功能。

1.  首先选择您需要重命名的单词（我使用单词而不是变量或函数，因为它适用于任何文本文件）。

2.  多次单击 Ctrl+D。每次单击 Ctrl+D 时，都会选择下一个 Occurence（大多数人会错过“多次”单击部分）。

3.  最后，您可以一次重命名所有突出显示的事件。

那里可能有一个更好的插件，但这可以直接使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T04:10:33.003

在 Will Bond 的[Community Sublime Packages](http://wbond.net/sublime_packages/community)网站上找到插件的最佳位置之一。

有一个[用于 python 重构的插件](http://sublimerope.readthedocs.org/en/latest/refactoring.html)和一个用于[javascript](https://github.com/s-a/sublime-text-refactor)的插件，但还没有通用的插件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-30T09:59:21.690

在同一个文件中，您可以使用多选。- 快速添加下一个 (cmd/ctrl + D)，它会自动添加您选择的任何内容的下一个匹配项。- 快速跳过下一步 (cmd/ctrl + K) 用于跳过发生。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-26T01:50:49.700

我快速浏览了一下：[https](https://github.com/s-a/sublime-text-refactor) ://github.com/sa/sublime-text-refactor这就是你要找的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T10:57:10.293

emartel和[james](https://stackoverflow.com/users/2014807/james)[都是](https://stackoverflow.com/users/269211/emartel)对的。目前无法进行完整的重构/重命名。

但是，如果您的代码非常简单，并且您只想在事情变得复杂之前尽早重命名变量或函数，[那么 emartel](https://stackoverflow.com/users/269211/emartel)的[评论](https://stackoverflow.com/questions/14543883/is-there-any-variable-rename-plugins-for-sublime-text-2#comment20286450_14543883)就是正确的。

使用`'Find -> Replace'`(or `CTRL-H`) 然后`Replace`or`Replace All`可能正是您有时想要的。

# asp.net-mvc - 用于测验应用程序的 WCF 服务 VS ASP.NET Web Api

> ID：14543884
> 
> 赞同：1
> 
> 时间：2013-01-27T02:34:41.433
> 
> 标签：asp.net-mvc, wcf, web-services, c#-4.0, asp.net-web-api

> **可能重复：**
> [WCF 服务或 Web API](https://stackoverflow.com/questions/9502548/wcf-service-or-web-api)

大家好，我正在开发一个测验引擎应用程序，我想创建一个可以从不同的客户端平台访问的服务，例如 android、PHP、Iphone、iPad、Java 等。在 WCF 和 Asp.net Web API 之间，您认为哪个最适合该场景？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:49:27.347

这些是我通常遵循的准则：

什么类型的客户将使用该服务？

*   如果您要访问客户端上的服务（即，将其作为服务引用添加到您的项目中），那么我将使用 WCF 服务。让 WCF 完成在代码中自动创建方法和类的所有工作比使用 Web API 手动完成要容易得多。
*   如果您打算使用 AJAX 和 JSON 访问它，我会使用 Web API。默认情况下，Web API 同时返回 XML 和 JSON，并且使用它们类似 RESTful 的 URL，通过 AJAX 调用 Web API 比调用 WCF 服务更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T04:53:04.797

我会毫不犹豫地选择 Web API。原因是：

1.  更容易设置
2.  RESTFUL 性质（为您设置路由）
3.  这就是创建 WebAPI 的目的，以取代 WCF RESTFUL 服务实现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T03:28:28.483

可以创建一个允许返回soap、pox 和json 的WCF api 应用程序。返回 json 结果时要注意的一件事是，您可能必须跳出传统的肥皂安全性才能获得响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T03:37:16.730

我会使用 Web API，因为它具有 REST 特性，基本上所有移动平台都有 REST 客户端。

# c# - C# & ServiceStack：获取 Rest Body

> ID：14543888
> 
> 赞同：1
> 
> 时间：2013-01-27T02:35:32.847
> 
> 标签：c#, rest, servicestack

我正在尝试使用 ServiceStack 编写一个 Rest 客户端 - 到目前为止，我可以成功地使用 GET 从我的数据库中提取对象并将它们视为 JSON（我在 Firefox 上使用 RESTClient 来测试我的服务）。但是，您将如何使用 REST 更新或插入数据库？我已将信息放入正文部分，但数据库中没有任何反应：S

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:27:03.883

实际上，我终于设法从“请求”属性中得到它，并调用 .RawData () 并将其反序列化为数据传输对象……现在问起来有点愚蠢，但是啊：）

# html - 设置高度属性

> ID：14543892
> 
> 赞同：0
> 
> 时间：2013-01-27T02:37:12.503
> 
> 标签：html, css, height

在这里拿两个。这个问题一直困扰着我一段时间。我有一个想要的布局，类似于这个；

```
<body>
<div id="first section">
<div id="second section">
<div id="third section">
<div id="fourth section">
<body> 
```

基本上我的目标（基本而言）是一个 400% 高度的布局，每个“部分”，可以这么说，占据所有不同尺寸屏幕的 100% 高度。我玩了很多混合，最大和高度属性无济于事，包括将身体的高度设置为 100%，每个“部分”为 25%...

这可能与基本的css有关还是我正在寻找更多技术性的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:43:49.500

让我说一些建议。

1.  您没有 的结束标签`div`，它可能会继承样式。所以关闭`div`s。
2.  你需要关闭你的`<body>`using `</body>`。
3.  没有`div`用于包装元素的父级。如果您希望文档具有类似于单个屏幕的内容，其中包含手风琴式的全部内容，您可以通过提供固定高度并定位内部`div`s 来实现。`UL`但我更喜欢你在and中做同样的事情`LI`。

因此，您的问题的解决方案可能是这样的。有这个布局...

```
<body>
    <div class="wrap">
        <div id="first section"></div>
        <div id="second section"></div>
        <div id="third section"></div>
        <div id="fourth section"></div>
    </div>
</body> 
```

现在，您需要`height`为`.wrap`，通常是屏幕的高度。现在，同样的屏幕高度也应该分配给各个部分。保留这些部分，相对定位并`overflow: hidden;`包裹起来`div`。

```
.wrap {height: 100px /* just for here */; overflow: hidden;}
.wrap .section {height: 100px /* just for here */; position: relative;} 
```

现在，当您要显示第一页时，请使用以下方式：

```
.first {top: 0;} 
```

或者，你甚至可以这样做。

```
.section {display: none;}
.first.section {display: block;} 
```

查看这个[Fiddle](http://jsfiddle.net/praveenscience/u2R28/)的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:46:59.337

几个指针：

*   你的结束`body`标签是错误的，应该是`</body>`
*   您的`div`标签未关闭。
*   您正在使用该`id`属性，就好像它是`class`.

如果我正确理解了您的问题，则这些部分不应重叠。

检查[这个jsfiddle](http://jsfiddle.net/X7kJk/)，看看它是否是你要找的。

### 编码

**标记：**

```
<div class="first section">First section</div>
<div class="second section">Second section</div>
<div class="third section">Third section</div>
<div class="fourth section">Fourth section</div> 
```

**CSS：**

```
html,body {
    min-height: 100%;
    height: 100%;
}

.section {
    min-height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T06:39:22.507

您很可能需要根据javascript 中的[浏览器窗口高度](https://stackoverflow.com/questions/3333329/javascript-get-browser-height)`DIV`设置元素的高度来执行此操作。

# java - 在输入多行输入时，仅考虑最后一行

> ID：14543893
> 
> 赞同：0
> 
> 时间：2013-01-27T02:37:17.260
> 
> 标签：java

我正在尝试一次向该程序输入一些测试用例，它只是继续输出最后一个输入的结果，而没有剩余的输入

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.Scanner;

public class BeautifulStrings2 {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        //File f=new File("input.txt");
        Scanner in=new Scanner(System.in);
        BufferedReader in1=new BufferedReader(new InputStreamReader(System.in));
        int n=in.nextInt();
        for (int i=1;i<=n;i++){
            String s=in1.readLine();
            System.out.println(s);
            String chars="";
            if (Character.isUpperCase(s.charAt(0))){
                chars+=s.charAt(0);
            }
            else {
                chars+=Character.toUpperCase(s.charAt(0));
            }
            for (int j=0;j<s.length();j++){
                boolean flag=true;
                for (int k=0;k<chars.length();k++){
                    if (Character.isLetter(s.charAt(j))){
                        if (chars.charAt(k)==Character.toUpperCase(s.charAt(j))){
                            flag=false;
                            break;
                        }
                    }
                }
                if (flag){
                    chars+=Character.toUpperCase(s.charAt(j));
                }
            }
            String temp=chars;
            chars="";
            for (int j=0;j<temp.length();j++){
                if (temp.charAt(j)>64&&temp.charAt(j)<91)
                    chars+=temp.charAt(j);
            }
            int [] numbers=new int[chars.length()];
            Arrays.fill(numbers, 0);
            for (int j=0;j<chars.length();j++){
                for (int k=0;k<s.length();k++){
                    if (chars.charAt(j)==Character.toUpperCase(s.charAt(k))){
                        numbers[j]++;
                    }
                }
            }
            Arrays.sort(numbers);
            int factor=26,sum=0;
            for (int j=chars.length()-1;j>=0;j--){
                sum+=numbers[j]*factor;
                factor--;
            }
            System.out.println("Case #"+i+": "+sum);
        }
    }

} 
```

样本输入

```
5
ABbCcc
Good luck in the Facebook Hacker Cup this year!
Ignore punctuation, please :)
Sometimes test cases are hard to make up.
So I just go consult Professor Dalves 
```

输出应该是什么

```
Case #1: 152
Case #2: 754
Case #3: 491
Case #4: 729
Case #5: 646 
```

实际输出

```
Case #1: 646 
```

编辑 ！现在我编辑了我的代码以仅使用 Scanner 对象并添加 in.nextLine() 以跳过第一行

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.Scanner;

public class BeautifulStrings2 {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        //File f=new File("input.txt");
        Scanner in=new Scanner(System.in);
        //BufferedReader in1=new BufferedReader(new InputStreamReader(System.in));
        int n=in.nextInt();
        in.nextLine();
        for (int i=1;i<=n;i++){
            String s=in.nextLine();
            System.out.println(s);
            String chars="";
            if (Character.isUpperCase(s.charAt(0))){
                chars+=s.charAt(0);
            }
            else {
                chars+=Character.toUpperCase(s.charAt(0));
            }
            for (int j=0;j<s.length();j++){
                boolean flag=true;
                for (int k=0;k<chars.length();k++){
                    if (Character.isLetter(s.charAt(j))){
                        if (chars.charAt(k)==Character.toUpperCase(s.charAt(j))){
                            flag=false;
                            break;
                        }
                    }
                }
                if (flag){
                    chars+=Character.toUpperCase(s.charAt(j));
                }
            }
            String temp=chars;
            chars="";
            for (int j=0;j<temp.length();j++){
                if (temp.charAt(j)>64&&temp.charAt(j)<91)
                    chars+=temp.charAt(j);
            }
            int [] numbers=new int[chars.length()];
            Arrays.fill(numbers, 0);
            for (int j=0;j<chars.length();j++){
                for (int k=0;k<s.length();k++){
                    if (chars.charAt(j)==Character.toUpperCase(s.charAt(k))){
                        numbers[j]++;
                    }
                }
            }
            System.out.println(chars);
            Arrays.sort(numbers);
            int factor=26,sum=0;
            for (int j=chars.length()-1;j>=0;j--){
                sum+=numbers[j]*factor;
                factor--;
            }
            System.out.println("Case #"+i+": "+sum);
        }
    }

} 
```

输出

```
Case #1: 152
Case #2: 754
Case #3: 491
Case #4: 729 
```

在我按回车后出现第五行

```
Case #5: 646 
```

我怎样才能让它出现而不必按回车？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T02:46:01.933

您在两个不同的流阅读器中使用标准输入流 System.in**两次**，一个是 Scanner，另一个是 BufferedReader：

```
Scanner in=new Scanner(System.in);
BufferedReader in1=new BufferedReader(new InputStreamReader(System.in)); 
```

这看起来是一件**非常**危险的事情，而且容易出错。为什么不简单地使用 Scanner（或 BufferedReader）来处理所有事情？

如果您确实对所有人使用扫描仪，那么是的，如果下一个令牌将在下一行，请使用`nextLine()`after 。`nextInt()`如果使用扫描仪，您甚至不需要文件顶部的 5 数字，因为您会在扫描仪`hasNextLine()`返回 false 之前读取行。

# ember.js - 通过后退按钮处理到路线的过渡

> ID：14543894
> 
> 赞同：2
> 
> 时间：2013-01-27T02:37:22.887
> 
> 标签：ember.js

这是情况。我正在编写一个 Ember.js 示例，其中我在页面上显示一个便签列表。每个注释都有一个永久链接，单击该链接时，会将列表缩小 6 列而不是 12 列，然后在空白处显示注释。单击链接时它工作得很好，但是当我使用后退按钮返回列表时，它不起作用。这是我的代码：

```
App.Router.map(function(){
  this.resource("notes", function(){
    this.resource("note", { path: "/:note_id" });
  });
});

App.NotesRoute = Ember.Route.extend({
  model: function(){
    return App.Note.find();
  },
  setupController: function(controller){
    controller.set("isShowing", false);
  }
});

App.NoteRoute = Ember.Route.extend({
  setupController: function(){
    this.controllerFor("notes").set("isShowing", true);
  }
}); 
```

每个州都有一个模板：

```
<script type="text/x-handlebars">
  <div class="row">
    <div class="twelve columns">
      <h1>Ember Stickies</h1>
      {{outlet}}
    </div>
  </div>
</script>

<script type="text/x-handlebars" data-template-name="notes">
  <div class="row">
    <div class="twelve columns">
    <h3>My Notes</h3>
    </div>
  </div>
  <div class="row">
    <div {{bindAttr class="isShowing:six:twelve :columns"}}>
      <ul class="block-grid four-up mobile-one-up">
      {{#each note in controller}}
        <li class="sticky-list-item">
          {{view Ember.TextArea classNames="sticky-note" valueBinding="note.content"}}
          {{#linkTo note note classNames="sticky-permalink"}}
            ∞
          {{/linkTo}}
        </li>
      {{/each}}
      </ul>
    </div>
    {{outlet}}
  </div>
</script> 
```

当 Ember 调用`NoteRoute`s`setupController`时，它设置`isShowing`为`true`。但是，当我使用后退按钮返回时`NotesRoute`，`setupController`不会调用，因此`isShowing`永远不会更改为 false。我认为这是有意的 Ember 行为，那么是否可以使用回调来挂钩此转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:45:36.030

从 Ember 1.0.0-rc.1 开始，`deactivate`已添加为`exit`. 你不再需要打电话`_super`，也不应该再使用`exit`了。

```
App.NoteRoute = Ember.Route.extend({
  setupController: function(){
    this.controllerFor("notes").set("isShowing", true);
  },
  deactivate: function(){
    this.controllerFor("notes").set("isShowing", false);
  }
}); 
```

[http://emberjs.com/api/classes/Ember.Route.html#method_deactivate](http://emberjs.com/api/classes/Ember.Route.html#method_deactivate)

[http://emberjs.com/blog/2013/02/15/ember-1-0-rc.html](http://emberjs.com/blog/2013/02/15/ember-1-0-rc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:29:22.720

我通过搜索 Github 问题找到了答案。路由有一个`exit`回调，会在转出时触发。`this._super()`我的路由处理程序现在看起来像（注意最后的调用`exit`-**非常重要**！）：

```
App.NoteRoute = Ember.Route.extend({
  setupController: function(){
    this.controllerFor("notes").set("isShowing", true);
  },
  exit: function(){
    this.controllerFor("notes").set("isShowing", false);
    this._super();
  }
}); 
```

# android - Android 通知问题

> ID：14543895
> 
> 赞同：2
> 
> 时间：2013-01-27T02:37:36.943
> 
> 标签：android, android-notifications, android-notification-bar

我是安卓新手，请耐心等待！

最后，我通过 GCM 从一个简单的 WCF REST API 获得了我的 XML 结果，希望使用其有效负载构建一个简单的通知。

```
@Override
protected void onMessage(Context arg0, Intent arg1) {

    String message = arg1.getStringExtra("payload");
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    Notification note = new Notification();
    note.tickerText=message;
    note.when=System.currentTimeMillis();
    note.defaults |= Notification.DEFAULT_ALL;

    notificationManager.notify(new Random().nextInt(), note);

} 
```

我听到了默认通知声音，但我的栏没有显示任何内容，我错过了什么**？**

* * *

**编辑我**

笔记：

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" /> 
```

我尝试**了 Jeeter**关于使用构建器构建通知的建议，但是需要一个 MINIMUM API 16，这并不好 + 我的 Galaxy Note 测试设备是 4.0.4，即 API 15！

```
@Override
protected void onMessage(Context arg0, Intent arg1) {

    String Message = arg1.getStringExtra("payload");
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    notificationManager.notify(
            new Random().nextInt(),
            new Notification.Builder(this)
                    .setContentTitle(Message)
                    .setContentText(Message).build());

} 
```

> public Notification build()
> API 级别 16 中添加
> 结合所有已设置的选项，并返回一个新的 Notification 对象。

* * *

**编辑二**

我尝试了关于使用 NotificationCompat 构建器**的 A--C建议。**

```
@Override
protected void onMessage(Context arg0, Intent arg1) {

    String Message = arg1.getStringExtra("payload");
    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

            notificationManager.notify(
            new Random().nextInt(),
            new NotificationCompat.Builder(this).setContentTitle("Message")
                    .setWhen(System.currentTimeMillis())
                    .setDefaults(Notification.DEFAULT_ALL)
                    .setContentText(Message).build());

} 
```

没有错误但没有任何改变，我仍然听到没有外观的声音，但是消息到达了 onMessage 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:22:28.783

Android 需要设置一个小图标才能实际显示您的状态栏通知。

从[文档](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CreateNotification)中，这些是要求：

> Notification 对象**必须**包含以下内容：
> 
> • 一个小图标，由 setSmallIcon() 设置
> 
> • 标题，由 setContentTitle() 设置
> 
> • 详细文本，由 setContentText() 设置

此外，较旧的平台（Gingerbread 及更低版本）**需要**传递一个`PendingIntent`（称为文档中的*内容`Intent`*`Notification`）才能显示。这是平台的限制。

根据您显示的`Notification`方式，如果不设置*content`Intent`*，应用程序将崩溃，并且堆栈跟踪将非常清楚原因。

使用`NotificationCompat.Builder`，很容易通过 设置*内容`Intent`*[`NotificationCompat.Builder#setContentIntent()`](https://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#setContentIntent%28android.app.PendingIntent%29)

# google-chrome - Chrome 在哪里存储扩展程序？

> ID：14543896
> 
> 赞同：190
> 
> 时间：2013-01-27T02:38:18.520
> 
> 标签：google-chrome, google-chrome-extension, path

我看了看：

```
C:\Documents and Settings\username\Local Settings\Application Data\Google\Chrome\User Data\Default\Extensions 
```

对于未打包的扩展，但该文件夹对我来说是空的。

对于较新的版本，Chrome 将文件存储在哪里？

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2013-01-27T05:26:21.557

## 解压扩展的存储位置

扩展引擎不会显式更改它们的位置或添加对其本地路径的引用，它们会留在所有**操作系统**中从中选择的位置。

**例如：**如果我从解压扩展加载一个解压扩展`E:\Chrome Extension`仍然在同一个位置

## 打包扩展的存储位置

导航`chrome://version/`并查找**Profile Path**，它是您的默认目录，而 Extensions 文件夹是所有文件的**`extensions, apps, themes`**存储位置。（如果您在 Chrome 中设置了多个浏览器配置文件，您将希望`chrome://version/`从安装了扩展程序的配置文件中查看页面。）

### 例子

#### 视窗

如果我的**配置文件路径**是，`%userprofile%\AppData\Local\Google\Chrome\User Data\Default`那么我的存储目录是：

```
C:\Users\<Your_User_Name>\AppData\Local\Google\Chrome\User Data\Default\Extensions 
```

#### Linux

```
~/.config/google-chrome/Default/Extensions/ 
```

#### 苹果系统

```
~/Library/Application\ Support/Google/Chrome/Default/Extensions 
```

#### 铬

```
~/.config/chromium/Default/Extensions 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-07-08T12:07:52.023

由于 chrome 提供了多个配置文件，因此您不会直接进入它，`C:\Users\<Your_User_Name>\AppData\Local\Google\Chrome\User Data\Default\Extensions`但您必须先输入`chrome://version/`一个选项卡，然后在其中查找配置文件路径，然后在您到达配置文件路径后查找其中的 Extensions 文件夹，然后具有所需扩展 ID 的文件夹

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-11-28T06:50:18.947

对于我的 Mac，扩展在这里：

`~/Library/Application Support/Google/Chrome/Default/Extensions/`

如果你去`chrome://extensions`你会发现每个分机的“ID”。这将是 Extensions 目录中的一个目录。在那里你会找到所有扩展的文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-21T10:35:30.623

对于旧版本的 Windows（2k、2k3、xp）

```
"%Userprofile%\Local Settings\Application Data\Google\Chrome\User Data\Default\Extensions" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-02-20T03:23:53.877

对于 Mac 上的 Chrome，如果您有多个配置文件，您可以在配置文件文件夹下找到它，`Default`或者`Profile #`. 即要么

`~/Library/Application Support/Google/Chrome/Default/Extensions/` 或者 `~/Library/Application Support/Google/Chrome/<Profile 1>/Extensions/`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-02T11:06:38.957

另一种选择是右键单击 chrome 图标，然后转到快捷方式选项卡（根据 Windows 10）。您将在那里看到“目标”，复制路径并删除“chrome.exe”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-06T18:21:57.157

有点晚了，但你可以找到它（windows 10 chrome 83）

```
%USERPROFILE%\AppData\Local\Google\Chrome\User Data\<your profile>\Extensions 
```

Chrome 现在按配置文件存储它。如果您只有一个配置文件，它位于一个名为`Default`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-01T14:45:15.723

This link "[Finding All Installed Browsers in Windows XP and Vista – beware 64bit!](http://rhizohm.azurewebsites.net/-finding-all-installed-browsers-in-windows-xp-and-vista-ndash-beware-64bit-/)" may be useful for Windows as suggested by "[How to find all the browsers installed on a machine](https://stackoverflow.com/questions/2370732/how-to-find-all-the-browsers-installed-on-a-machine)".

The installed web browsers are saved in this registry,

> HKEY_LOCAL_MACHINE\SOFTWARE\Clients\StartMenuInternet
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Clients\StartMenuInternet.

# string - Lua 字符串模式

> ID：14543910
> 
> 赞同：0
> 
> 时间：2013-01-27T02:40:46.713
> 
> 标签：string, lua, pattern-matching, string-parsing

我正在尝试解析一个字符串，但我是模式匹配的新手。这是我的代码：

```
str = "One[0:0,0,0,0,0,0,0,0,0,0,0,0:1][0:1,0,1,0,0,0,1,1,1,0,0,0:0.5]/Two[0:0,0,0,0,0,0,0,0,0,0,0,0:1.5]/"

for i in string.gmatch(str, "[%a%s]*[%[%]%d:,]*/") do
print("sequence: "..i)
end 
```

它应该打印 One[0:0,0,0,0,0,0,0,0,0,0,0,0:1][0:1,0,1,0,0,0,1, 1,1,0,0,0:0.5] 两个[0:0,0,0,0,0,0,0,0,0,0,0,0:1.5]

但它会打印

序列：5]/序列：5]/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T05:05:53.817

您的模式中缺少`.`：`"[%a%s]*[%[%]%d:%.,]*/"`，因此`0.5`或`1.5`无法匹配。它只匹配最后一个数字。

# php - PHP Autoloader 功能 - 仍然需要 require_once？

> ID：14543911
> 
> 赞同：0
> 
> 时间：2013-01-27T02:40:51.730
> 
> 标签：php, class, autoloader

我开始关注 PHP 自动加载器。如果我有以下代码：

```
 function __autoload($class) {require_once('scripts/classes/' . $class . '.class.php');} 
```

只要我的类被命名为适合上面的路径，我是否仍然需要使用 require_once

```
 require_once('scripts/classes/session.class.php'); 
```

注意：我在网站的 header() 中包含了 __autoloading（加载的第一页。我是否需要在加载的每个页面上都包含它才能使其功能正常工作？我会假设是的，但我是不确定...

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T03:09:53.127

您需要在浏览器中加载的每个页面上定义`__autoload`或调用。`spl_autoload_register`因此，如果您的所有页面都使用相同的“标题”，则将其放在那里就足够了。

一旦你这样做了，你永远不需要使用`include`或`require`其他任何地方：只需提及 class `Session`，如果 PHP 还不知道它，它将使用你的 autoload 函数来查找定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T02:50:06.660

不，您应该使用`include()`. 该类在尚未加载时**仅包含一次：**

来自 PHP 手册：

> 您可以定义一个自动调用的 __autoload() 函数，以防您尝试使用尚未定义的类/接口。

不，您可以在整个应用程序中只包含一次自动加载器功能。

使用[spl_autoload_register()](http://php.net/manual/en/function.spl-autoload-register.php)而不是`__autoload()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-21T08:40:11.110

您可以将此文件包含在脚本的开头，然后只需设置目录级别而不是此常量：`WP_CONTENT_DIR` 这将自动包含它需要的任何文件

```
<?php

class autoload
{

    private static function updatePhpFiles($dir_level, $php_files_json_name)
    {
        /**Get all files and directory using iterator.*/
        $iterator = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir_level));
        $filePaths = array();

        /**Get all php files in this directory level.*/
        foreach ($iterator as $path) {
            if (is_string(strval($path)) and pathinfo($path, PATHINFO_EXTENSION) == 'php') {
                $filePaths[] = strval($path);
            }
        }

        /**Encode and save php files dir in a local json file */
        $fileOpen = fopen($dir_level . DIRECTORY_SEPARATOR . $php_files_json_name, 'w');
        fwrite($fileOpen, json_encode($filePaths));
        fclose($fileOpen);
    }

    private static function includeMatchingFiles($dir_level, $php_files_json_name, $class_file_name)
    {
        $files = json_decode(file_get_contents($dir_level . DIRECTORY_SEPARATOR . $php_files_json_name), true);
        $inc_is_done = false;

        /**Include matching files here.*/
        foreach ($files as $path) {
            if (stripos($path, $class_file_name)) {
                require_once $path;
                $inc_is_done = true;
            }
        }
        return $inc_is_done;
    }

    public static function include_system_files($dir_level, $class_name)
    {
        $php_files_json = 'phpfiles.json';
        $class_file_name = $class_name . '.php';

        /**Include required php files.*/
        if (is_file($dir_level . DIRECTORY_SEPARATOR . $php_files_json)) {

            if (self::includeMatchingFiles($dir_level,$php_files_json, $class_file_name)) {
                return true;
            } else {
                self::updatePhpFiles($dir_level, $php_files_json);
                return self::includeMatchingFiles($dir_level, $php_files_json, $class_file_name);
            }

        } else {

            self::updatePhpFiles($dir_level, $php_files_json);
            return self::includeMatchingFiles($dir_level, $php_files_json, $class_file_name);

        }

    }

}

/**
 * Register autoloader.
 */
spl_autoload_register(function ($className) {
    autoload::include_system_files(WP_CONTENT_DIR, $className);
}); 
```

# javascript - 属性从 iframe 标记中剥离

> ID：14543914
> 
> 赞同：1
> 
> 时间：2013-01-27T02:41:24.450
> 
> 标签：javascript, wysihtml5

我想使用 wysihtml5-0.4.0pre 在我的内容中使用 iframe，我添加了

```
"iframe": {
  "remove": 0
} 
```

到我的 parserRules 并且 iframe 标记被传递，但所有属性（src、宽度、高度等）都被剥离了。这种情况发生在哪里，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-07T22:36:15.000

您需要将属性列入白名单。将以下内容添加到您的解析器规则中应该可以解决问题（它将设置宽度和高度并允许有效的 src）：

```
"iframe": {
  "check_attributes": {
     "src": "url"
  },
  "set_attributes": {
      "width": "560",
      "height": "315",
      "frameborder": "0"
  }
} 
```

# php - 其他php文件可以访问php文件中的变量吗？

> ID：14543915
> 
> 赞同：0
> 
> 时间：2013-01-27T02:41:24.687
> 
> 标签：php

在一个 php 文件的开头，我定义了一个变量`$id`，并在该文件的其余部分使用它。我很好奇——这`$id`会持续多久？之后加载的其他 php 文件是否可以访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:44:45.583

除非您在脚本中的某处取消设置变量，否则它将在脚本结束时可用。在包含（并通过 require() 包含）文件中定义的变量也可用于其他文件。

[此页面](http://php.net/manual/en/language.variables.scope.php)比微小的答案更好地解释了变量范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:44:01.597

PHP 变量的作用域最多是定义它们的请求。如果您希望它们在请求中持续存在，则需要将它们存储在其他地方，例如`$_SESSION`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T02:47:09.647

是的，在该文件之后加载的所有文件都可以访问此变量，但在 PHP 程序的一次执行中。如果您将在另一个浏览器中启动您的 PHP 文件，则会为另一个浏览器窗口创建此变量的不同实例。

# knockout.js - 可观察数组未正确绑定到复选框

> ID：14543916
> 
> 赞同：2
> 
> 时间：2013-01-27T02:42:07.547
> 
> 标签：knockout.js

当我 foreach 循环并将布尔值绑定到复选框时，复选框不会更新。

```
 function ViewModel() {
        var self = this;

        self.test = ko.observableArray([ false, false, false ]);

        return self;
    }

ko.applyBindings(new ViewModel());

<div data-bind="text: ko.toJSON(test)"></div>

<div data-bind="foreach: $root.test">
    <input type="checkbox" data-bind="checked: $data" />
</div> 
```

您可以在 jsfiddle 上查看问题：http: [//jsfiddle.net/KVWet/1/](http://jsfiddle.net/KVWet/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T04:17:13.960

[http://knockoutjs.com/documentation/checked-binding.html](http://knockoutjs.com/documentation/checked-binding.html)

> 如果您的参数解析为数组，则需要特别考虑。**在这种情况下，如果值与数组中的某个项目匹配**，KO 将设置要检查的元素，如果不包含在数组中，则不检查。

因为如果检查了一个项目，它的值就会被添加到一个数组中。如果没有检查，它就会把它拿走。我认为要使其正常工作，您需要将键添加到数组中，以便它可以与它所属的复选框匹配。一组布尔值不会帮助将其映射到其各自的复选框。

# php - 正在寻找免费的 MySQL Profiler？

> ID：14543918
> 
> 赞同：-1
> 
> 时间：2013-01-27T02:42:14.957
> 
> 标签：php, mysql, ssms, profiler

我已经非常擅长使用 Microsoft SSMS 的分析器。我曾考虑为 MySQL 找到一个类似的工具，但实际上我发现的大多数工具都相当陈旧且半功能性。有没有什么东西可以很好地工作而无需使用命令行？我检查了一些关于堆栈溢出的非常旧的帖子，但导致了一些死胡同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T14:08:46.450

好吧，经过一番搜索，当我遇到 SQL Yog 时，我想我找到了一些东西。说实话，这不是我需要的答案。我最终使用了 WinCacheGrind 和 KCacheGrind

[http://sourceforge.net/projects/wincachegrind/](http://sourceforge.net/projects/wincachegrind/)

[http://kcachegrind.sourceforge.net/html/Home.html](http://kcachegrind.sourceforge.net/html/Home.html)

它们很有趣，帮助我识别编程中较慢的部分。是一种有用的方法，但设置起来很困难。对于任何有兴趣的人来说，这都是值得的。

# java - 简单的内存全文搜索解决方案

> ID：14543919
> 
> 赞同：8
> 
> 时间：2013-01-27T02:42:19.520
> 
> 标签：java, full-text-search

我有一个在 Java 上运行的小型网站，其中可能包含十几个降价文件。我想为用户提供全文搜索以快速访问这些降价文件。由于它很小，我可以在每次启动 Web 应用程序时在内存中建立索引。有什么建议吗？

笔记

1.  我想远离任何数据库解决方案，sql 或 nosql。

2.  我更喜欢将解决方案作为库提供，而不是内置到 XX 框架中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T02:53:19.867

使用内存数据库之一，H2 或 HSQLDB。然后，对于全文搜索部分，只需使用 Hibernate Search。它可以与两个数据库中的任何一个一起使用，并且完全不必处理 Lucene：您可以只注释您的实体，然后继续：所有索引都将自动发生，如果您想做诸如提升字段之类的事情，你可以用一个简单的注释来做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-10T21:08:41.450

作为一个附带项目，我为 java 实现了一个简单的内存文本搜索解决方案。

[https://github.com/bradforj287/SimpleTextSearch](https://github.com/bradforj287/SimpleTextSearch)

主要特征：

*   倒排索引
*   带 TFIDF 排名的余弦相似度算法
*   多线程索引创建和搜索
*   词干提取（雪球词干分析器）
*   自动去除 HTML 标签
*   停用词
*   字符串标记器（斯坦福 NLP）

可能想看看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T02:54:40.380

加入 Apache Lucene，全文搜索中或多或少的黄金标准。很高兴在内存中操作。

# linux - 从虚拟框中删除已安装的 linux 系统

> ID：14543922
> 
> 赞同：0
> 
> 时间：2013-01-27T02:43:30.693
> 
> 标签：linux, windows, virtualization, virtual-machine, virtualbox

我在 Windows 机器上使用虚拟机安装了 Linux 系统。有没有办法从虚拟机中彻底删除这个 Linux 系统？我想我只需要删除一个包含在虚拟盒子上创建的这个 linux 系统的文件夹。但我不知道在哪里可以找到这个文件夹。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:12:16.953

[默认文件夹](http://www.virtualbox.org/manual/ch10.html)

默认情况下，这个“机器文件夹”放置在一个名为“VirtualBox VMs”的公共文件夹中，VirtualBox 在当前系统用户的主目录中创建该文件夹。此主目录的位置取决于主机操作系统的约定：

在 Windows 上，这是 %HOMEDRIVE%%HOMEPATH%; 通常类似于 C:\Documents and Settings\Username。

在 Mac OS X 上，这是 /Users/username。

在 Linux 和 Solaris 上，这是 /home/username。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:36:45.227

如果您想删除该虚拟机而不是右键单击设备列表，然后选择删除！这是图像！你可以从虚拟盒子中删除机器，并可以保留文件以备将来使用，也可以完全删除它！![在此处输入图像描述](../Images/77eb2830ac08e1b3a70180b9a260795c.png)

# ruby - 整个测试完成后如何报告所有失败？

> ID：14543923
> 
> 赞同：3
> 
> 时间：2013-01-27T02:43:44.810
> 
> 标签：ruby, watir-webdriver, minitest

我正在使用带有 MiniTest 的 Ruby 1.9.3。我知道最好的做法是每次测试都有一个断言，但是在某些情况下我想动态地做出断言，比如比较数组时：

```
if added_skus.each { |s| assert(skus_in_cart.include?(s), "SKUs #{added_skus} or SKU amount do not match SKUs #{skus_in_cart} on Cart page.") }
  puts "Product SKUs #{added_skus} match SKUs #{skus_in_cart} on Cart page."
end 
```

如您所知，当它遇到第一个断言失败时，测试结束。我想在测试完成后继续测试并报告所有失败。

我找到了使用旧版本的 test/unit 和 Ruby 1.8.7 的解决方案（test/unit 库中的 add_failure 方法），但我找不到适用于 MiniTest 和 Ruby 1.9.3 的好的解决方案。我真的很感激一些反馈（即使这意味着我做错了 - 请指出我正确的方向）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T03:41:33.137

**解决方案 1 - 将断言组合成一个断言：**

您可以通过将所有 skus 一起考虑，将当前代码编写为单个断言：

```
#Determine the missing skus:
missing_skus = added_skus.find_all{ |s| not(skus_in_cart.include?(s)) }

#Assert that there are no missing skus:
assert( missing_skus.empty?, "SKUs #{missing_skus} do not match SKUs on Cart page." ) 
```

**解决方案 2 - 断言多个元素的自定义方法：**

如果您真的希望断言计数是每个单独的 SKU（而不是整个集合），您可以创建自定义断言方法。虽然我不相信这比解决方案 1 增加了任何真正的好处。

运行代码示例：

需要“测试/单元”

```
module MiniTest::Assertions
    #Asserts that each element passes the test
    # Inputs:
    #   enumerable - The object to iterate over (ex an array)
    #   msg - Custom message to include in assertion failure
    #   test - A block that each element will be tested against
    def assert_each(enumerable, msg = nil, &test)
        msg ||= "No message given."

        failed_elements = Array.new
        enumerable.each do |e|
            self._assertions += 1
            failed_elements << e unless yield(e)
        end

        msg = " #{failed_elements} failed assertion. #{msg}"    
        raise( MiniTest::Assertion, msg ) unless failed_elements.empty?
    end
end

class MyTest < Test::Unit::TestCase
    def test()
        added_skus = ['b', 'a', 'c', 'd']
        skus_in_cart = ['c', 'b']

        assert_each(added_skus, "SKUs missing from cart."){ |s| skus_in_cart.include?(s) }
    end
end 
```

# asp.net - Telerik：LoadOnDemand 无法正常工作

> ID：14543927
> 
> 赞同：0
> 
> 时间：2013-01-27T02:44:15.400
> 
> 标签：asp.net, linq, telerik, datasource

我设置了 LinqDataSource 和 RadComboBox，以便组合框按需显示查询结果。该表有 1000 行左右，加载该页面需要很长时间，因为出于某种原因 RadComboBox 一直在加载所有内容。

那么下面的代码有什么问题呢？我对代码隐藏文件中的 cbAuto 一无所知

```
<asp:LinqDataSource ID="LinqDataSource1" runat="server" 
ContextTypeName="Webshop.Entities" EntityTypeName="" OrderBy="Name, FromDate, TillDate"
Select="new (AutoID, Name, FromDate, TillDate, Comment)" TableName="Autos">
</asp:LinqDataSource>

<telerik:RadComboBox ID="cbAutos" runat="server" Width="900px"
        DropDownWidth="900px" EmptyMessage="Chosse an autotype"
        HighlightTemplatedItems="True"
         Filter="Contains" LoadingMessage="Loading..." DataTextField="Name"
 MaxHeight="300px" DataValueField="AutoID" ShowDropDownOnTextboxClick="False"
DataSourceID="LinqDataSource1" EnableLoadOnDemand="True" EnableVirtualScrolling="True" 
ItemsPerRequest="100">
                            <HeaderTemplate>
                                <table style="width: 850px;">
                                    <tr>
                                        <td style="width: 300px;">Autotype</td>
                                        <td style="width: 100px;">Date (from)</td>
                                        <td style="width: 100px;">Date (till)</td>
                                        <td style="width: 150px;">Comment</td>
                                    </tr>
                                </table>
                            </HeaderTemplate>
                            <ItemTemplate>
                                <table style="width: 850px;">
                                    <tr>
                                        <td style="width: 300px;">
                                            <%# DataBinder.Eval(Container.DataItem, "Name")%>
                                        </td>
                                        <td style="width: 100px;">
                                            <%# DataBinder.Eval(Container.DataItem, "FromDate")%>
                                        </td>
                                        <td style="width: 100px;">
                                            <%# DataBinder.Eval(Container.DataItem, "TillDate")%>
                                        </td>
                                        <td style="width: 150px;">
                                            <%# DataBinder.Eval(Container.DataItem, "Comment")%>
                                        </td>
                                    </tr>
                                </table>
                            </ItemTemplate>
                        </telerik:RadComboBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T10:38:50.190

请尝试其他`Radcombobox`属性`EnableAutomaticLoadOndemand=true`，这可以帮助您解决问题

# arrays - 使用数组动态创建href

> ID：14543929
> 
> 赞同：0
> 
> 时间：2013-01-27T02:44:20.130
> 
> 标签：arrays, href

我有一个数组，并正在使用 javascript 将它填充到一个表中。其中一列是以一列作为其键的超链接。

```
for(var i=1;i<arr.length;i++) {
    cell=document.createElement('td');
    if (i == 1) {
        a = document.createElement('a');
        a.setAttribute('href',"javascript:dspl('tblbody',arr[0]);");
        a.innerHTML = arr[i];
        cell.appendChild(a);
    }
    else
        cell.appendChild(document.createTextNode(arr[i]));
    row.appendChild(cell);
} 
```

但是，单击任何超链接时，只会传递 arr[0] 的最后一个值。这段代码错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:13:33.557

看起来您正在尝试创建一个包含行和列的二维表。所以应该有 2 个嵌套迭代器，i（用于行）和 j（用于列）。j在哪里？看起来您正在尝试仅使用 i 来处理行和列，这是行不通的。

# windows-phone-8 - 如何正确卸载从 Visual Studio 部署的 Windows 8 手机应用程序？

> ID：14543932
> 
> 赞同：3
> 
> 时间：2013-01-27T02:44:58.203
> 
> 标签：windows-phone-8

我已经从 Visual Studio 部署了一些示例。我想再次从手机中删除它们并从手机卸载中完成。
现在我无法再次部署示例，它使部署失败。如果我创建一个新的电话应用程序，那么部署它就没有问题。
从 Visual Studio 部署时，我如何正确删除应用程序，以及如何让我从手机中卸载它而破坏的示例再次工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T13:05:05.610

很老但是如果有人仍然有这个问题，我在这里找到了解决方案：

[https://social.msdn.microsoft.com/Forums/en-US/0ec5dd19-330b-4575-ad41-a25399e4f083/wp-81-deployment-error-installation-of-the-application-failed-the-application-已经？forum=wptools&prof=必需](https://social.msdn.microsoft.com/Forums/en-US/0ec5dd19-330b-4575-ad41-a25399e4f083/wp-81-deployment-error-installation-of-the-application-failed-the-application-is-already?forum=wptools&prof=required)

1.  安装[Windows Phone 电动工具 (CodePlex)](https://wptools.codeplex.com/ "Windows Phone 电动工具（Codeplex）")
2.  连接到设备并从隔离存储中删除所有开发应用程序
3.  要开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:36:14.153

只需点击并按住手机或模拟器中“所有应用程序”列表中的应用程序图标，就会出现上下文菜单，然后单击“卸载”选项，仅此而已。

# php - 保存会话时出现 Codeigniter 错误：请稍后再试

> ID：14543933
> 
> 赞同：0
> 
> 时间：2013-01-27T02:45:01.620
> 
> 标签：php

我在 Codeigniter 中通过 ajax 使用登录脚本并出现错误：

> 发生错误，请稍后再试

弹出。这些是删除任何这些删除错误的两行，但我需要执行这两行：

```
$this->session->set_userdata($user_data);
$this->session->set_userdata('permissions', $permissions_from_db); 
```

这`$userdata`是一个从 db 中检索到用户信息的`$permissions_from_db`数组，也是另一个从 db 中检索到数据的数组。一个接一个地设置会话会导致问题吗？或者我可以存储为会话的项目数量是否有上限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T20:41:04.010

只需要更改此行

```
$this->session->set_userdata($user_data); 
```

到

```
$this->session->set_userdata('user_data', $user_data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T07:33:45.390

1.  将 session 的库文件加载到构造函数中。

    ```
    function __constructor() {
        $this->load->library('session');    
    } 
    ```

2.  像这样将会话变量设置到您的方法或函数中：

    ```
    $this->session->set_userdata($data);   
    $this->session->set_userdata('users_data', $data); 
    ```

# html - 为什么我的 html 没有对齐（相同的代码，不同的结果）

> ID：14543934
> 
> 赞同：0
> 
> 时间：2013-01-27T02:45:21.930
> 
> 标签：html, css, twitter-bootstrap

首先，这不是重新发布它的另一个问题，相同的代码。

所以最后一个问题我得到了`h1`和`h1:small`排队，我在不止一个地方使用该代码并且它中断了，（他们不排队）。我做错了吗？（使用 Twitter 引导）

html代码：

作品：

```
 <div class="span3">
                            <div class="packspace">
                            <div class="thumbnail">
                                <div class="well-small">
                                    <div class="center">
                                        <img src="img/Redstone.png" />
                                    </div>
                                    <h3 class="centerbg">RedStone</h3>
                                    <div class="pull-right">
                                        <ul class="inline">
                                            <li><h1>8$ |</h1></li>
                                            <li><h1><small> 512mb</small></h1></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="centerbtn">
                                    <button class="btn btn-info">Info</button>
                                </div>
                            </div> 
```

不起作用：

```
 <div class="span3">
                    <div class="packspace">
                    <div class="thumbnail">
                        <div class="well-small">
                            <div class="center">
                                <img src="img/lazuli.png" />
                            </div>
                            <h3 class="centerbg">Lazuli</h3>
                            <div class="pull-right">
                                <ul class="inline">
                                    <li><h1>15$ |</h1></li>
                                    <li><h1><small> 1024mb</small></h1></li>
                                </ul>
                            </div>
                        </div>
                        <div class="centerbtn">
                            <button class="btn btn-info">Info</button>
                        </div>
                    </div>

</div>
                        </div> 
```

CSS：

```
h1 small {
    vertical-align:middle;
}
.packspace {
    margin-top: 5px;
}
.center {
    width: 50%;
    margin: 0px auto;
} 
```

（PS 我正在使用引导程序（通过 Twitter））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:44:20.647

将列表 ( `<ul class="inline">`) 中的第二项放在第二行的原因是，最外面的 div ( ) 内没有足够的空间`<div class="span3">`来在同一行显示两个列表项。

如果您希望列表中的两个项目始终位于同一行，您可以尝试以下操作

html - 我用一个 h1 替换了列表

```
<div class="span3">
    <div class="packspace">
        <div class="thumbnail">
            <div class="well-small">
                <div class="center">
                    <img src="img/lazuli.png" />
                </div>
                <h3 class="centerbg">Lazuli</h3>
                <div class="pull-right">
                    <h1 class="inline">8$ |<small> 1024mb</small></h1>
                </div>
            </div>
            <div class="centerbtn">
                <button class="btn btn-info">Info</button>
            </div>
        </div>
    </div>
</div> 
```

css - 除了你已经拥有的 css

```
h1.inline {
    white-space:nowrap;
} 
```

这种方法的问题是，如果文本太长，它会流到最外层的 div 之外。

# ruby-on-rails - 关联的 user_id 保存在更新操作中，但未保存在创建操作中

> ID：14543936
> 
> 赞同：0
> 
> 时间：2013-01-27T02:45:59.483
> 
> 标签：ruby-on-rails, ruby, paperclip

使用 Rails 3.2。我`update`在我的行动中`shops_controller.rb`运作良好，`user_id`相应地保存了，但在`create`行动中，`user_id`并没有得到保存。我做错了什么？下面是我的代码：

```
# photo.rb
class Photo < ActiveRecord::Base
  belongs_to :attachable, :polymorphic => true, :counter_cache => true
  belongs_to :user, :counter_cache => true

  attr_accessible :data, :attachable_id, :attachable_type, :user_id
end

# shop.rb
class Shop < ActiveRecord::Base
  has_many :photos, :as => :attachable, :dependent => :destroy

  accepts_nested_attributes_for :photos
end

# user.rb
class User < ActiveRecord::Base
  has_many :photos, :as => :attachable, :dependent => :destroy
end

# shops_controller.rb
class ShopsController < ApplicationController
  before_filter :require_user, :only => [:new, :edit, :update, :create]

  def update
    @shop = Shop.find(params[:id], :include => [:photos => :user])
    ...

    photos = params[:shop][:photos_attributes]
    if !photos.blank?
      photos.each do |photo|
        photo.merge!(:user_id => current_user.id)
      end
    end

    if @shop.update_attributes(params[:shop])
      redirect_to shop_path(@shop)
    else
      render :action => :edit
    end
  end

  def create
    @shop = Shop.new(params[:shop])
    ...

    photos = params[:shop][:photos_attributes]
    if !photos.blank?
      photos.each do |photo|
        photo.merge!(:user_id => current_user.id)
      end
    end

    if @shop.save
      redirect_to shop_path(@shop)
    else
      render :action => :new
    end
  end
end

# shops/_form.html.erb
<%= form_for @shop, :url => { :action => action, :type => type }, :html => { :multipart => true } do |f| %>
  <%= f.text_field :name %>
  <h3>Pictures</h3>
  <%= f.file_field :shop_photos_data, :multiple => true, :name => "shop[photos_attributes][][data]", :accept => "image/*" %><br>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T02:55:52.627

添加一个带有 collection_select 的用户字段，或者更好地使用 config/routes.rb 中的嵌套资源，然后`form_for[@spot, @user]`在视图中使用。

# c - gdb 将变量设置为具有十六进制值的字符串

> ID：14543940
> 
> 赞同：1
> 
> 时间：2013-01-27T02:46:51.077
> 
> 标签：c, gdb

```
set argv[0] = "\x01\x02\x03"
print argv[0]
results in "x01x02x03" 
```

什么？

显示语言是 c，只设置一个字符似乎有效。

GNU gdb 6.3.50

显然它适用于 7.3，然后猜测它不是一个选项。

# sed - 如果 $4 为 1，则删除行

> ID：14543943
> 
> 赞同：2
> 
> 时间：2013-01-27T02:48:09.247
> 
> 标签：sed, awk

如果 $4 是一，我想从文本文件中删除这些行

```
123  34  A   0
23   45  A   1  
36   5   A   36
176  3   A   1 
```

期望的输出

```
123  34  A   0
36   5   A   36 
```

我需要就地编辑。如何使用 awk 或 sed 执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T03:26:53.660

在`awk`：

```
awk '$4 != 1' 
```

它是可行的`sed`，但要困难得多，我不会打扰：

```
sed '/^[^ ][^ ]*  *[^ ][^ ]*  *[^ ][^ ]*  *1 *$/d' 
```

或者，如果你有 GNU `sed`：

```
sed -r '/^[^ ]+ +[^ ]+ +[^ ]+ +1 *$/d' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T03:34:15.073

使用`GNU sed`with`-i`进行就地编辑和`-r`扩展正则表达式的一种方法：

```
sed -ri '/^\S+\s+\S+\s+\S+\s+1( |$)/d' file 
```

如果您迫切需要就地编辑，您可能还想尝试`perl`使用它的自动拆分功能。该代码也更具可读性和可移植性：

```
perl -i -ane 'print if $F[3] != 1' file 
```

结果：

```
123  34  A   0
36   5   A   36 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T03:38:57.250

只是为了与众不同...

```
$ ed << \eof
g- 1$-d
w
q
eof 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T09:13:06.613

用 awk

`awk '{if($4 != 1 ) print $0}' temp.txt`

# struts2 - 如何使用struts 2中不同包中定义的拦截器？

> ID：14543950
> 
> 赞同：7
> 
> 时间：2013-01-27T02:49:14.720
> 
> 标签：struts2, interceptor, interceptorstack

我定义了一个拦截器，如下所示：

```
<package name="default" extends="struts-default" >
  <interceptors>
       <interceptor-stack name="myStack">
          <interceptor-ref name="timer"/>
          <interceptor-ref name="logger"/>
        <interceptor-ref name="defaultStack"/>
       </interceptor-stack>
  </interceptors>

 <default-interceptor-ref name="myStack"/>

</package> 
```

然后在另一个命名空间中使用**myStack ：**

```
<package name="posts" namespace="/posts" extends="struts-default,json-default">

        <action  name="question/ask" class="someclass.QuestionAction">
            <interceptor-ref name="myStack"></interceptor-ref>
            <result name="success">/WEB-INF/jsp/post_question.jsp</result>
            <result name="input">/WEB-INF/jsp/post_question.jsp</result>
        </action>

    </package> 
```

这不起作用，因为在包**帖子**中，它找不到名为**myStack**的拦截器堆栈。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T05:28:18.813

让包“posts”扩展“default”可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:16:29.443

有两种方法可以在 struts.xml 中包含拦截器

```
First: 
```

1）如果您在其他 xml 文件中编写任何拦截器并且您想在 struts.xml 文件中使用该拦截器，则应将该文件包含在 struts.xml 中

例如：考虑`other.xml file is file.xml`& 你想包含在 struts.xml 中，所以，

在 struts.xml 你必须写

```
<struts> 
     <include file="file.xml"></include>
      <package name="posts" namespace="/posts" extends="struts-default,json-default">
         <action  name="question/ask" class="someclass.QuestionAction">
                <interceptor-ref name="myStack"></interceptor-ref>
                <result name="success">/WEB-INF/jsp/post_question.jsp</result>
                <result name="input">/WEB-INF/jsp/post_question.jsp</result>
            </action>
      </package>

</struts> 
```

`Second Way:`您应该在 struts.xml 中包含拦截器并在您的操作类中引用名称，然后它将像这样正常工作。

```
<package name="default" extends="struts-default">
   <interceptors>
        <interceptor name="timer" class=".."/>
        <interceptor name="logger" class=".."/>
        <interceptor-stack name="myStack">
           <interceptor-ref name="timer"/>
           <interceptor-ref name="logger"/>
        </interceptor-stack>
    </interceptors>

<action name="login"
     class="tutuorial.Login">
         <interceptor-ref name="myStack"/>
         <result name="input">login.jsp</result>
         <result name="success"
             type="redirect-action">/secure/home</result>
</action>
</package> 
```

我还提供了两个链接，请参阅此链接之一，例如我仅从这些链接中引用的链接之一。 [全拦截器概念](http://struts.apache.org/2.0.11/docs/interceptors.html)。 [基本拦截器](http://viralpatel.net/blogs/struts2-interceptors-tutorial-with-example/)

# php - 包含后修改PHP文件

> ID：14543955
> 
> 赞同：0
> 
> 时间：2013-01-27T02:50:53.480
> 
> 标签：php, html

我是 PHP 新手，但我认为这是可能的，但我不确定如何实现这一目标。

我在一个名为 button.php 的 PHP 文件中有一个基本的 HTML 标记，我使用 PHP 包含将其注入到网页中。

这是 button.php 文件的内容：

```
<div class="btn">
<div class="highlightBtn">
    <div class="btnTag">
        Submit
    </div>
</div>
</div> 
```

问题是 - 在我包含它之后，我如何在 class="btnTag" 标签中获取值？（即，在我将此文件包含到主页后，我希望能够根据包含的位置对其进行更改，因此不必总是说“提交”）。

所以我想它可能是这样的

```
<? php include("button.php"); 
   //some code follows to change value inside the btnTag class  
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T02:58:30.667

它确实应该事先完成，如

```
// button.php
<div class="btn">
<div class="highlightBtn">
    <div class="btnTag">
        <?php echo isset($caption) ? $caption : 'Submit' ; ?>
    </div>
</div>
</div> 
```

进而

```
<?php
    $caption = 'Click me'; // or comment out to get the default
    include('button.php');
?> 
```

### 但是，上面并不是一个真正的好方法

让文件在包含时只定义一个函数会更好，然后您可以在需要按钮时调用该函数。例如：

```
// button.php
<?php
    function button($caption = 'Submit') {
        echo <<<END_HTML;
<div class="btn">
  <div class="highlightBtn">
    <div class="btnTag">$caption</div>
  </div>
</div>
END_HTML;
    } 
```

然后，您可以在`button.php`没有任何直接影响的情况下包含，并且只要您需要一个按钮，您就可以调用`button('Click me')`或只是`button()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T02:57:46.283

您应该在包含它之前执行此操作：

```
$string = 'Submit';
include 'button.php'; 
```

在button.php里面：

```
<div class="btn">
<div class="highlightBtn">
    <div class="btnTag">
        <?php echo $string; ?>
    </div>
</div>
</div> 
```

如果您想在页面加载后更改它，那么您应该查看[AJAX](http://api.jquery.com/jQuery.ajax/)。其他解决方案（在包含后处理它）将需要输出缓冲区处理、DOM 处理和其他痛苦的例程，这些例程并不是真正的选择。

# php - 块类中的 Magento 块实例化

> ID：14543958
> 
> 赞同：1
> 
> 时间：2013-01-27T02:51:24.780
> 
> 标签：php, magento, layout, block, instantiation

我刚刚购买了 Alan Storm 的 pdf 书 No Frills Magento 布局，在第一章中，他谈到了将子块实例化绑定到特定块创建，特别是在 _beforeToHtml() 方法中。

在 Alan Storm 的书中，他使用这行代码来实例化一个子块

```
$block_2 = new Mage_Core_Block_Text (); 
```

我已经习惯了做这样的事情

```
 Mage::getModel('modulename/class'); 
```

两个问题：

1.  有没有更好的方法从块类中实例化块
2.  使用一个与另一个有什么好处

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T04:10:27.767

如果你坚持这本书，它最终会引导你找到你想要的答案。我从直接类实例化开始，以展示系统是如何工作的。

如果你等不及，这里有快速答案

1.  `$block_2 = Mage::getSingleton('core/layout')->createBlock('core/text');`

2.  当您使用其别名 ( ) 实例化该类时`core/text`，您允许您的块受到为您的类创建类重写的人的影响。

# java - 将文本文件中的单个元素拆分为java中的数组

> ID：14543960
> 
> 赞同：0
> 
> 时间：2013-01-27T02:51:45.150
> 
> 标签：java, arrays, split

我正在尝试拆分从文本文件中读取的元素并将它们写入 java 中的单独数组。输入是这样的：

> 身份证、父母身份证、姓名
> 
> 4,17,ABC
> 
> 1,0,定义
> 
> 17,0,吉
> 
> 9,17,荷航
> 
> 输出应该是：
> 
> 吉,17
> 
> 荷航,9
> 
> abc,4
> 
> 定义，1

它必须根据 id 以降序排列。我认为最有效的方法是快速排序（我有一个想法）。我的问题是我已经拆分了文本文件的所有元素，但我无法为 id、parentid 和 name 创建单独的数组。将它们拆分为数组并对 id 进行排序后，id 应该给出相应的名称。有人可以帮我写到数组部分吗？先感谢您。

我已经走了这么远：

```
import java.io.*;

public class Folder {
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    try {
        FileInputStream fstream = new FileInputStream("input.txt");
        // Get the object of DataInputStream
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String strLine;         
        //Read File Line By Line
        while ((strLine = br.readLine()) != null)   {
            // Print the content on the console
            String[] a=strLine.split(",",3);
            String id=a[0];
            String parentid=a[1];
            String name=a[2];
            for(int i=0;i<3;i++) {
                System.out.println(a[i]);
            }
            //System.out.println (strLine);
        }
        //Close the input stream
        in.close();
        //Catch exception if any
        } 
        catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
        }
    }
} 
```

这将从文本文件中拆分所有元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:48:38.470

你可以尝试一些东西。看看你的例子，我很想使用 a`Map`并使用 id 作为键，并有一个其他输入的列表，例如`Map<Integer,List<String>>`这对于你的例子来说可能是矫枉过正的。

你也可以做一个新的`Object`也许

```
public Input implements Comparable<Input>{
    private int id;
    private int parentId;
    private String name;

    public Input(int a, int b, String c){
        //set params}
    }

    @Override
    public int compareTo(Input o){
        Input input = (Input) o;
        return this.id - input.getId();
    }
} 
```

然后，如果您知道必须读取多少行，则可以创建一个数组，但如果您不知道，则使用一个集合，因为它会动态增长。

```
List<Input> inputList = new ArrayList<Input>();
while ((strLine = br.readLine()) != null){
     String[] a=strLine.split(",",3);
     inputList.add(new Input(a[0],a[1],a[2]));
     ....
} 
```

然后，您需要按 Id 排序并输出。

既然我们可以使用`Input`实现`Comparable`（[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)）对其进行排序`Collections.sort(inputList)`（[javadoc 解释了它如何处理重复项](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)），那么它只是一个迭代列表和输出的简单例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T05:05:38.103

你正在艰难地做这件事。

这里有一些建议：

*   不要从原始类型和数组构建数据结构。Java 有集合类型（例如列表、地图等），它允许您创建自定义类型。

*   当您有一个二维数据结构并且您的主要要求是对行进行排序时，请不要将列作为主要结构；即，如果您有一个数组/行列表，则按行排序比按列排序更容易。

*   Java 库中有标准（高效）的排序实现。要使自定义类（或数组）可排序，您需要将该类声明为实现`Comparable<TheClass>`或创建一个分隔符`Comparator<TheClass>`对象。

*   使用 javadoc 可帮助您了解标准库中可用的内容。

# c# - WriteableBitmapEx.DrawRectangle 厚度？

> ID：14543961
> 
> 赞同：4
> 
> 时间：2013-01-27T02:52:13.687
> 
> 标签：c#, windows-phone-7, writeablebitmap, drawrectangle, writeablebitmapex

如何更改使用 WriteableBitmapEx.DrawRectangle 扩展方法绘制的矩形轮廓的粗细/重量？我用来绘制矩形的代码是：

```
WriteableBitmap wbmp = new WriteableBitmap(bmp);
wbmp.DrawRectangle(0, 0, 480, 360, Colors.DarkGray); 
```

使用这段代码，绘制的矩形的粗细为 1px。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T08:51:19.957

WritableBitmapEx 的解决方法。[为形状添加厚度参数](http://writeablebitmapex.codeplex.com/workitem/11438)

```
//Original points for line
int x1 = (int)pts[0].X;
int y1 = (int)pts[0].Y;
int x2 = (int)pts[1].X;
int y2 = (int)pts[1].Y;

//Parallel line code from http://stackoverflow.com/questions/2825412/draw-a-parallel-line var L = Math.Sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));
var offsetPixels = 4;//Line "thickness"
// This is the second line will be parallel to the first
int x1p = (int)(x1 + offsetPixels * (y2 - y1) / L);
int x2p = (int)(x2 + offsetPixels * (y2 - y1) / L);
int y1p = (int)(y1 + offsetPixels * (x1 - x2) / L);
int y2p = (int)(y2 + offsetPixels * (x1 - x2) / L);

//writeableBmp.DrawLine(x1, y1, x2, y2, Colors.Red);
//writeableBmp.DrawLine(x1p, y1p, x2p, y2p, Colors.Blue);
//Create closed filled polygon for "thick line"
writeableBmp.FillPolygon(new int[] { x1, y1, x2, y2, x2p, y2p, x1p, y1p, x1, y1 }, Colors.Red); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T04:30:49.320

这是一个很好的解决方法，使用已经来自 'Rectangle' 的鲜为人知的 'inflate' 方法：

```
int pen_thickness = 5;

Rectangle original_rect = new Rect(0, 0, 480, 360); // using the poster's original values

for(int i = 0; i < pen_thickness; i++)
{
    Rectangle bigger_rect = Rectangle.Inflate(original_rect, i, i);
    wbmp.DrawRectangle(Pens.DarkGray, bigger_rect);
} 
```

这将创建一个从最初寻找的矩形扩展的矩形。也可以进行快速修改，使厚度向内扩展一半（膨胀为负值）和向外扩展一半（膨胀为正值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-13T04:24:37.527

创建了以下...非常适合 WriteableBitmapEx

```
private static void DrawRectangle(WriteableBitmap bitmap, 
    int left, int top, int width, int height, Color color, int thinkness)
{
    var x1 = left;
    var y1 = top;
    var x2 = left + width;
    var y2 = top + height;

    bitmap.DrawRectangle(x1, y1, x2, y2, color);

    for (var i = 0; i < thinkness; i++)
    {
        bitmap.DrawRectangle(x1--, y1--, x2++, y2++, color);
    }
} 
```

# javascript - 如何在 DOM 中导航 XML 对象的内容

> ID：14543962
> 
> 赞同：0
> 
> 时间：2013-01-27T02:52:27.867
> 
> 标签：javascript, html, dom

我有一个 XML 文件，我想提取一个名为`issueId`. 我试过了

```
alert(myXML.getElementsByTagName("issueId")[0]); 
```

我得到一个盒子说`[object element]` 我也试过

但是，我无法提取数据“12345”本身！我试过了

```
alert(myXML.getElementsByTagName("issueId")[0].nodeValue); 
```

我得到“空”。我怎样才能得到这个对象的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:15:21.017

尝试`myXML.getElementsByTagName("issueId")[0].textContent`

# java - 不理解这个带有 ComboBox 的 NullPointerException

> ID：14543963
> 
> 赞同：2
> 
> 时间：2013-01-27T02:52:31.800
> 
> 标签：java, swing, model, nullpointerexception, jcombobox

我不明白为什么我会得到这个 NullPointerException。我开始尝试修复错误的许多不同外观的代码（并改进了您所看到的），但我无法弄清楚发生了什么。

非常感谢所有帮助：

```
final JComboBox modelName = null;

//Model ComboBoxModel
final DefaultComboBoxModel termModel = new DefaultComboBoxModel(new String[]{
    "Choose One...", "Hypercom", "DejaVoo", "Nurit", "Verifone"});

...

// model drop-down      
    modelName.setModel(termModel);  //getting nullPointerException on this line

    modelName.addActionListener(this);              

    modelPanel.add(modelName);

...

@Override
public void actionPerformed(ActionEvent e) {
    if ("Hypercom".equals(modelName.getSelectedItem())){
        termName.setModel(hSpecModel);    
    } else if ("Deja Voo".equals(modelName.getSelectedItem())){
        termName.setModel(dSpecModel);    
    } else if ("Nurit".equals(modelName.getSelectedItem())){
        termName.setModel(nSpecModel);
    } else if ("Verifone".equals(modelName.getSelectedItem())){
        termName.setModel(vSpecModel);
    } else {
        termName.setModel(slctAbove);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T02:54:10.963

`modelName`尚未初始化，因此它不指向对象。

你需要类似的东西

```
final JComboBox modelName = new JComboBox(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T02:54:25.973

```
final JComboBox modelName = null; // !!!!! 
```

当您尝试使用此变量时，您真的不应该想知道为什么会得到 NPE：

```
modelName.setModel(termModel); 
```

# ruby - 装饰器模式和单例模式的区别

> ID：14543964
> 
> 赞同：1
> 
> 时间：2013-01-27T02:52:44.477
> 
> 标签：ruby, design-patterns, singleton, decorator

我试图了解装饰器和单例模式之间的区别。例如，在 Ruby 中，如果我想实现单例模式，我可以使用单例类。但是当我在 Wikipedia 中读到装饰器模式时，我觉得在这种情况下我也会使用单例类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:06:10.040

单例模式确保在任何给定时间仅存在一个类的一个实例（或有限数量的实例）。另一方面，装饰器模式是一种通过改变对象的“皮肤”来动态地向对象添加功能（职责）的机制。Singleton 是一种创建模式，而 Decorator 是一种结构模式。

他们两个之间真的没有太多共同点，你的困惑的根源是什么？在使用 Ruby 的 Singleton 模块之前，请稍等片刻，最好直接阅读原[书](https://rads.stackoverflow.com/amzn/click/com/0201633612)并了解基本概念，然后再考虑实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:25:49.970

装饰器是一个对象包装器，其目的是增强主题对象的行为。这个想法是装饰器对象可以用作包装对象的替代品（必须尊重协议）。

# c++ - CPU 缓存关键步幅测试根据访问类型给出意外结果

> ID：14543965
> 
> 赞同：15
> 
> 时间：2013-01-27T02:52:46.497
> 
> 标签：c++, performance, c++11, cpu-cache

受[最近关于 SO 的问题和给出的答案的](https://stackoverflow.com/questions/14532169/naive-c-matrix-multiplication-100-times-slower-than-blas)启发，这让我感到非常无知，我决定花一些时间来了解更多关于**CPU 缓存**的知识，并编写了一个小程序来验证我是否正确地完成了这件事（大多数恐怕不会）。我将首先写下构成我期望的**假设**，因此如果这些假设是错误的，您可能会在这里阻止我。根据我所读到的，*一般来说*：

1.  一个`n`-way关联缓存被分成`s`集合，每一个包含`n`行，每行有一个固定的大小`L`；
2.  每个主存地址`A`都可以映射到**一**组缓存线中的任何*一个*；`n`
***   地址映射到的集合`A`可以通过将地址空间划分为每个缓存行大小的槽，然后计算`A`'s slot ( `I = A / L`) 的索引，最后执行模运算将索引映射到目标设置`T`( `T = I % s`);*   高速缓存读取未命中导致比高速缓存写入未命中更高的延迟，因为 CPU 在等待获取主内存行时不太可能停止并保持空闲。**

 **我的第一个问题是：**这些假设是否正确？**

* * *

假设它们是，我尝试对这些概念进行一些尝试，以便我可以真正*看到*它们对程序产生具体影响。我写了一个简单的测试，它分配一个`B`字节的内存缓冲区，并**从缓冲区的开头**以给定*步长的***固定增量**重复访问该缓冲区的位置（这意味着如果是 14 并且步长是 3，我只重复访问位置 0 , 3, 6, 9, 和 12 - 如果是 13, 14, 或 15, 也是如此): ***`B``B`***

 ***```
int index = 0;
for (int i = 0; i < REPS; i++)
{
    index += STEP;
    if (index >= B) { index = 0; }
    buffer[index] = ...; // Do something here!
} 
```

由于上述假设，我的期望是：

1.  当设置`STEP`等于**临界步长**（即高速缓存行的大小乘以高速缓存中的集合数，或）时`L * s`，性能应该**比**`STEP`设置为（例如`L * s) + 1`，因为我们将只访问内存映射到*同一*集合中的位置，迫使缓存行更频繁地从该集合中逐出并导致更高的缓存未命中率；
2.  当`STEP`等于临界步长时，性能**不应该受**缓冲区大小`B`的影响，只要它不是太小（否则会访问的位置太少，缓存未命中率会更少）；否则，性能**应该受 影响**，`B`因为使用更大的缓冲区，我们更有可能访问映射到不同集合的位置（尤其是如果`STEP`不是 2 的倍数）；
3.  ***读取和*写入****每个缓冲区位置时**的性能*****损失*****应该****比只写入**这些位置时更糟：写入内存位置不应该需要等待相应的行被获取，因此访问映射到的内存位置的事实相同的集合（同样，通过使用临界步幅 as `STEP`）应该有轻微的影响。**

 **所以我使用[RightMark Memory Analyzer](http://cpu.rightmark.org/products/rmma.shtml)找出我的 L1 CPU 数据缓存的参数，调整我的程序的大小，并尝试了一下。这就是我编写主循环的方式（`onlyWriteToCache`是一个可以从命令行设置的标志）：

```
 ...
    for (int i = 0; i < REPS; i++)
    {
        ...
        if (onlyWriteToCache)
        {
            buffer[index] = (char)(index % 255);
        }
        else
        {
            buffer[index] = (char)(buffer[index] % 255);
        }
    } 
```

结果**简而言之**：

*   预期 1) 和 2) 得到证实；
*   预期 3)**未**得到证实。

这个事实让我印象深刻，让我觉得有些事情我做得不太对。当`B`是 256 MB 并且`STEP`等于临界步长时，测试（在 GCC 4.7.1 上使用 -O3 编译）表明：

*   该周期的只写版本遭受平均**约 6 倍**的性能损失（6.234 秒对 1.078 秒）；
*   周期的读写版本平均遭受**约 1.3 倍**的性能损失（6.671 秒对 5.25 秒）。

所以我的第二个问题是：**为什么会有这种差异？**我预计读写时的性能损失会比只写时更高。

* * *

为了完整起见，下面是我编写的用于测试的程序，其中的常量反映了我机器的硬件参数：L1 8 路关联**数据缓存**的大小为 32 KB `L`，每个缓存行的大小为64 字节，总共 64 组（CPU 有一个单独的 L1 8 路指令缓存，大小相同，行大小相同）。

```
#include <iostream>
#include <ctime>
#include <cstdlib>
#include <iterator>
#include <algorithm>

using namespace std;

// Auxiliary functions

constexpr int pow(int base, int exp)
{
    return ((exp == 0) ? 1 : base * pow(base, exp - 1));
}

int main(int argc, char* argv[])
{
    //======================================================================
    // Define behavior from command-line arguments
    //======================================================================

    bool useCriticalStep = false;
    bool onlyWriteToCache = true;
    size_t BUFFER_SIZE = pow(2, 28);
    size_t REPS = pow(2, 27);

    if (argc > 0)
    {
        for (int i = 1; i < argc; i++)
        {
            string option = argv[i];
            if (option == "-c")
            {
                useCriticalStep = true;
            }
            else if (option == "-r")
            {
                onlyWriteToCache = false;
            }
            else if (option[1] == 's')
            {
                string encodedSizeInMB = option.substr(2);
                size_t sizeInMB = atoi(encodedSizeInMB.c_str());
                BUFFER_SIZE = sizeInMB * pow(2, 20);
            }
            else if (option[1] == 'f')
            {
                string encodedNumOfReps = option.substr(2);
                size_t millionsOfReps = atoi(encodedNumOfReps.c_str());
                REPS = millionsOfReps * pow(10, 6);
            }
        }
    }

    //======================================================================
    // Machine parameters
    //======================================================================

    constexpr int CACHE_SIZE = pow(2, 15);
    constexpr int CACHE_LINE_SIZE = 64;
    constexpr int CACHE_LINES_PER_SET = 8;
    constexpr int SET_SIZE = CACHE_LINE_SIZE * CACHE_LINES_PER_SET;
    constexpr int NUM_OF_SETS = CACHE_SIZE / SET_SIZE;

    //======================================================================
    // Print out the machine parameters
    //======================================================================

    cout << "CACHE SIZE: " << CACHE_SIZE / 1024 << " KB" << endl;
    cout << "CACHE LINE SIZE: " << CACHE_LINE_SIZE << " bytes" << endl;
    cout << "CACHE LINES PER SET: " << CACHE_LINES_PER_SET << endl;
    cout << "SET SIZE: " << SET_SIZE << " bytes" << endl;
    cout << "NUMBER OF SETS: " << NUM_OF_SETS << endl;

    fill_n(ostream_iterator<char>(cout), 30, '='); cout << endl;

    //======================================================================
    // Test parameters
    //======================================================================

    const int STEP = NUM_OF_SETS * CACHE_LINE_SIZE + (useCriticalStep ? 0 : 1);

    //======================================================================
    // Print out the machine parameters
    //======================================================================

    cout << "BUFFER SIZE: " << BUFFER_SIZE / pow(2, 20) << " MB" << endl;
    cout << "STEP SIZE: " << STEP << " bytes" << endl;
    cout << "NUMBER OF REPS: " << REPS << endl;

    fill_n(ostream_iterator<char>(cout), 30, '='); cout << endl;

    //======================================================================
    // Start the test
    //======================================================================

    char* buffer = new char[BUFFER_SIZE];

    clock_t t1 = clock();

    int index = 0;
    for (size_t i = 0; i < REPS; i++)
    {
        index += STEP;
        if (index >= BUFFER_SIZE)
        {
            index = 0;
        }

        if (onlyWriteToCache)
        {
            buffer[index] = (char)(index % 255);
        }
        else
        {
            buffer[index] = (char)(buffer[index] % 255);
        }
    }

    clock_t t2 = clock();

    //======================================================================
    // Print the execution time (in clock ticks) and cleanup resources
    //======================================================================

    float executionTime = (float)(t2 - t1) / CLOCKS_PER_SEC;
    cout << "EXECUTION TIME: " << executionTime << "s" << endl;

    delete[] buffer;
} 
```

如果您设法阅读了这个长长的问题，请提前感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:44:35.167

关于您的期望 3，您是对的。正如您所期望的那样。请查看[“每个程序员应该了解的关于内存的知识”](http://lwn.net/Articles/250967/)以获取更多详细信息。这是解释内存层次结构的优秀系列文章。

那么为什么很难确认第 3 点：主要有两个原因。一种是内存分配，另一种是虚拟物理地址转换。

**内存分配**

没有严格保证分配的内存区域的实际物理地址是什么。当你想测试 CPU 缓存时，我总是建议使用`posix_memalign`强制分配到特定边界。否则你可能会看到一些奇怪的行为。

**地址翻译**

我提到的文章很好地解释了地址转换的工作方式。为了验证您的假设，您必须尝试查明预期的行为。最简单的方法如下：

**实验**

以数组的形式分配一组`k`大内存区域（大约 512MB）`int`并将它们全部对齐到 4096b 的页面边界。现在遍历内存区域中的所有元素，并逐步添加更多区域`k`到您的实验中。测量时间并通过读取的元素数量进行标准化。

代码可能如下所示：

```
#define N 10000000
for(size_t i=0; i < k; ++i) {

   size_t sum=0;
   clock_t t1= clock();
   for(size_t j=0; j < N; ++j) {
       for(size_t u=0; u<i; ++u) {
           sum += data[u][j];
       }
   }

   clock_t t2= clock();

} 
```

那么会发生什么。所有大内存区域都与 4k 对齐，并且基于之前的假设，同一行的所有元素都将映射到同一缓存集。当循环中的投影内存区域的数量大于缓存的关联性时，所有访问都将导致缓存未命中，并且每个元素的平均处理时间将增加。

**更新**

如何处理写入取决于缓存线的使用方式和 CPU。现代 CPU 应用[MESI](http://en.wikipedia.org/wiki/MESI_protocol)协议来处理对缓存行的写入，以确保各方对内存有相同的看法（缓存一致性）。通常，在您可以写入高速缓存行之前，必须先读取高速缓存行，然后再将其写回。是否识别回写取决于您访问数据的方式。如果您再次重新读取缓存行，您可能不会注意到差异。

然而，虽然程序员通常不会影响数据在 CPU 缓存中的存储方式，但在写入方面存在细微差别。可以执行所谓的流式写入，它不会污染缓存，而是直接写入内存。这些写入也称为[非临时](https://stackoverflow.com/questions/37070/what-is-the-meaning-of-non-temporal-memory-accesses-in-x86)写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T22:43:48.437

首先，需要澄清一点——在大多数情况下，写入仍然需要您将行提取到本地缓存中，因为这些行通常是 64Byte，而您的写入可能只修改其中的一部分- 合并将在缓存中进行。即使您要一口气写完整行（理论上在某些情况下是可能的），您仍然需要等待访问才能在写入之前获得该行的所有权 - 此协议称为RFO（读取所有权），它可能会很长，特别是如果您有一个多插槽系统或任何具有复杂内存层次结构的东西。

话虽如此，在某些情况下，您的第四个假设可能仍然是正确的，因为加载操作确实需要在程序前进之前获取数据，而可以缓冲存储以便稍后在可能的情况下写入。但是，负载只会在程序处于某个关键路径（意味着其他一些操作等待其结果）时才会停止程序，这是您的测试程序不会执行的行为。由于大多数现代 CPU 都提供乱序执行，因此可以自由执行以下独立指令，而无需等待加载完成。在您的程序中，除了简单的索引提前（可以轻松运行）之外，没有循环间依赖性，因此您基本上不会受到内存延迟的瓶颈，而是内存吞吐量的瓶颈，这是完全不同的事情。顺便说一句，要添加这样的依赖，您可以模拟链表遍历，甚至更简单 - 确保数组初始化为零（并将写入仅切换为零），并在每次迭代时将每个读取值的内容添加到索引中（除了增量） - 这将创建一个依赖关系而不改变地址本身。或者，做一些像这样讨厌的事情（假设编译器不够聪明，不能放弃这个......）：

```
 if (onlyWriteToCache)
    {
        buffer[index] = (char)(index % 255);
    }
    else
    {
        buffer[index] = (char)(buffer[index] % 255);
        index += buffer[index];
        index -= buffer[index];
    } 
```

现在，关于结果，当您跳过关键步骤时，写入与读取+写入的行为似乎相同，正如预期的那样（因为读取与写入发出的 RFO 并没有太大区别）。但是，对于非关键步骤，读+写操作要慢得多。现在很难在不知道确切系统的情况下判断，但这可能是因为加载（读取）和存储（写入）不在指令生命周期的同一阶段执行 - 这意味着在加载和存储之间接下来的商店，您可能已经驱逐了这条线，需要再次取回它。我不太确定，但如果你想检查一下，也许你可以在迭代之间添加一个 sfence 汇编指令（尽管这会显着减慢你的速度）。

最后一点-当您的带宽有限时，由于另一个要求，写入可能会减慢您的速度-当您写入内存时，您会从缓存中获取一行并对其进行修改。修改后的行需要写回内存（尽管实际上有一整套较低级别的缓存在路上），这需要资源并且可能会阻塞您的机器。尝试一个只读循环，看看它是怎么回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T09:21:16.620

当我读到 Agner Frog 在优化 C++ 中的缓存机制时，我也尝试过大步走。

根据这本书，您的第二个假设是错误的，因为内存地址始终属于一组中的特定缓存行。因此，每个字节都可以由相同的缓存行以不同的“方式”进行缓存。

我在用户空间中第一次尝试这样做失败了。（我有 CPU i5-4200）。

```
Total size 128kb cache set size 8kb => time 18ms; 568000000
Total size 256kb cache set size 16kb => time 13ms; 120000000
Total size 384kb cache set size 24kb => time 12ms; 688000000
Total size 512kb cache set size 32kb => time 14ms; 240000000 
```

$ g++ -std=c++11 -march=native -O3 hit-stride.cpp -o hit-stride

```
#include<iostream>
#include<chrono>

using namespace std::chrono;
using namespace std;

int main(int argc, char** argv) {
  unsigned int cacheSetSizes[] = { 8, 16, 24, 32 };
  const int ways = 8;

  for (unsigned int i = 0; i < sizeof(cacheSetSizes) / sizeof(int); ++i) {
    const unsigned int setSize = cacheSetSizes[i] * 1024;
    const unsigned int size = setSize * ways * 2;
    char* buffer = new char[size];
    for (int k = 0; k < size; ++k) {
      buffer[k] = k % 127;
    }
    const auto started = steady_clock::now();
    int sum = 0;
    for (int j = 0; j < 1000000; ++j) {
      for (int k = 0; k < size; k += setSize) {
        sum += buffer[k];
      }
    }
    const auto ended = steady_clock::now();
    cout << "Total size " << (size >> 10) << "kb cache set size " << cacheSetSizes[i]
         << "kb => time " << duration_cast<milliseconds>(ended - started).count()
         << "ms; " << sum << endl;
    delete buffer;
  }
  return 0;
} 
```

封装到内核模块中的“相同”代码看起来像命中 L2：我意识到我需要使内存在物理上是连续的。只能在内核模式下进行。我的 L1 缓存大小为 32kb。在测试中，我在内存范围内走的路数（8）更长，步长等于缓存大小。所以我在 32kb（最后一行）上得到了明显的减速。

```
Apr 26 11:13:54 diehard kernel: [24992.943076] Memory 512 kb is allocated
Apr 26 11:13:54 diehard kernel: [24992.969814] Duration  23524369 ns for cache set size         8 kb; sum = 568000000
Apr 26 11:13:54 diehard kernel: [24992.990886] Duration  21076036 ns for cache set size        16 kb; sum = 120000000
Apr 26 11:13:54 diehard kernel: [24993.013832] Duration  22950526 ns for cache set size        24 kb; sum = 688000000
Apr 26 11:13:54 diehard kernel: [24993.045584] Duration  31760368 ns for cache set size        32 kb; sum = 240000000 
```

$ make && sudo insmod hello.ko && sleep 1 && tail -n 100 /var/log/syslog

```
#include <linux/module.h>   /* Needed by all modules */
#include <linux/kernel.h>   /* Needed for KERN_INFO */
#include <linux/time.h>    

static unsigned long p = 0;
static struct timespec started, ended;
static unsigned int cacheSetSizes[] = { 8, 16, 24, 32 };
static const u32 ways = 8;
static const u32 m = 2;
static char* buffer;
static unsigned int setSize;
static unsigned int size;
static unsigned int i, j, k;
static int sum;

int init_module(void) {
  s64 st, en, duration;
  u32 max = 1*1024*1024;
  printk(KERN_INFO "Hello world 1.\n");
  p = __get_free_pages(GFP_DMA, get_order(max));
  printk(KERN_INFO "Memory %u kb is allocated\n", ways * m * 32);
  buffer = (char*) p;

  for (k = 0; k < max; ++k) {
    buffer[k] = k % 127;
  }

  for (i = 0; i < sizeof(cacheSetSizes) / sizeof(int); ++i) {
    setSize = cacheSetSizes[i] * 1024;
    size = setSize * ways * m;
    if (size > max) {
      printk(KERN_INFO "size %u is more that %u", size, max);
      return 0;
    }
    getnstimeofday(&started);
    st = timespec_to_ns(&started);

    sum = 0;
    for (j = 0; j < 1000000; ++j) {
      for (k = 0; k < size; k += setSize) {
        sum += buffer[k];
      }
    }

    getnstimeofday(&ended);
    en = timespec_to_ns(&ended);
    duration = en - st;
    printk(KERN_INFO "Duration %9lld ns for cache set size %9u kb; sum = %9d\n",
           duration, cacheSetSizes[i], sum);
  }
  return 0;
}

void cleanup_module(void) {
  printk(KERN_INFO "Goodbye world 1.\n");
  free_pages(p, get_order(1*1024*1024));
  printk(KERN_INFO "Memory is free\n");
} 
```*******

# .net - 对于使用自定义调试应用程序远程调试 .NET CLR 托管应用程序有什么建议？

> ID：14543968
> 
> 赞同：0
> 
> 时间：2013-01-27T02:53:44.837
> 
> 标签：.net, network-protocols, remote-debugging

当您安装和使用 Microsoft 远程调试工具 (vsmon.exe) 时，您将被引导然后使用 Visual Studio 附加到远程调试工具以进行实际调试。

我找不到：

*   远程调试器和 Visual Studio 之间使用的协议的任何详细信息
*   充当远程调试器客户端的任何源代码
*   作为第三方应用程序与远程调试器交互的任何 dll

这不可行吗？（即我上面的评估大部分/全部准确）

任何人都可以想出一种方法来远程调试在 MS .NET CLR 上运行的托管应用程序，而不需要 Visual Studio，而是我自己的工具集（比如在 C# 中）？

谢谢。

（笔记：

1.  MDBG - 是一个带有源代码的命令行工具。我相信这个工具只能用于调试本地托管进程，并不能连接到远程调试工具。
2.  （还有 Mono 调试堆栈，但是我的问题与调试 .Net 相关（在 .Net 上运行托管代码，而不是 Mono））

)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T03:04:30.400

我可以确认MDBG底层的Debugging API，不直接支持远程调试。

> CLR 调试 API 不直接支持远程进程调试。基于 CLR 调试 API 的调试器必须仍然存在于被调试对象的进程外。因此，此解决方案需要在具有被调试对象的计算机上具有代理进程。 [http://msdn.microsoft.com/en-au/library/bb397953.aspx](http://msdn.microsoft.com/en-au/library/bb397953.aspx)

但是请注意，在本声明中指定了一个*代理进程*作为该缺点的可能解决方案。

因此，远程调试可以被认为是可行的，利用调试 API（查看[MDBG 源代码](http://www.microsoft.com/en-us/download/confirmation.aspx?id=2282)以获取有关如何使用调试 API 的参考）公开网络 API。

# iphone - iOS 密码强度检查器

> ID：14543974
> 
> 赞同：8
> 
> 时间：2013-01-27T02:54:52.760
> 
> 标签：iphone, ios, objective-c, security, passwords

寻找有关 Objective-c 密码强度检查器的建议。我做了一些谷歌搜索，没有找到任何点击，也没有在 SO 上找到。我可以写一个，但我想我先在这里检查一下——有人实现了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T04:12:51.713

我只知道两个半点的密码强度*估计器*：[zxcvbn](https://tech.dropbox.com/2012/04/zxcvbn-realistic-password-strength-estimation/)（在 CoffeeScript 中，编译为 JavaScript）和[Passfault](http://www.passfault.com/)（在 Java 中，似乎打算用作 webapp）。

（实际上，这是一个小小的谎言；我不久前读过一篇博士论文，但我不确定我把链接放在哪里。）

我在任何细节上查看过的所有其他密码“强度”检查器都存在缺陷，通常存在*严重*缺陷（例如 GRC 的“干草堆”假设一个非常愚蠢的蛮力；即使是开源密码破解器也更加复杂）——前几天，大型英国会员卡计划的密码强度计告诉我，“1Aa”是“GOOD”密码（“GOOD”是最高评级）。

（另一个问题是所需的密码强度取决于它的使用方式：像“W1mCj6B1”这样的 48 位密码对于 Google 帐户来说很好，但作为 Windows/Mac 登录密码或 WPA 密码短语*非常弱。）*

鉴于它们的稀有性，我认为您不太可能在 Objective-C 中找到一个像样的。如果你最终写了一个，我有一些建议：

*   用 C（或者可能是 C++）编写它。这不会花费你太多，而且更便携；Objective-C 几乎将您与 OS X 和 iOS 联系在一起，就像 .NET 将您与 Windows 联系起来一样（即理论上您可以将运行时移植到其他平台；实际上它在这些平台之外的使用会少得多）。要增加使用率，您可以添加一个 Objective-C API。
*   决定如何处理非 ASCII 字符（以及一般的非英语语言）。基本上有两种选择：
    *   禁止他们（人们已经习惯了，对吧？）
    *   映射到 ASCII*以进行强度估计*，例如通过去除重音符号（参见`NSWidthInsensitiveSearch`和`NSDiacriticInsensitiveSearch`）并跳过一些箍以将 ı/İ/ß 映射到 i/I/ss。还有`kCFStringTransformToLatin`一个承诺将大多数脚本音译为拉丁字母。这个位不需要在 C 中，因为它在很大程度上依赖于 Unicode 库，尽管您可能能够使用 ICU。

最后，密码强度估计是一个难题。猜猜实力 `2jmj7l5rSw0yVb_vlWAYkK_YBwk`。现在问谷歌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T13:15:42.680

为此，我创建了一个方法。我知道这是个老问题，但我认为现在是实际的，所以这里是代码的 url：

> [https://github.com/ruben-samsonyan/PasswordStrengthChecker/blob/master/passwordChecker.m](https://github.com/ruben-samsonyan/PasswordStrengthChecker/blob/master/passwordChecker.m)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-23T00:33:29.190

Mattt Thompson 为此创建了一个库（请参阅[此答案](https://stackoverflow.com/a/22218842/924025 "这个")）。这是我找到的最佳选择。

[https://github.com/mattt/Navajo](https://github.com/mattt/Navajo)

# spring - 从tomcat 6切换到tomcat 7时启动spring应用程序时出错

> ID：14543976
> 
> 赞同：0
> 
> 时间：2013-01-27T02:55:30.293
> 
> 标签：spring, tomcat, tomcat6, tomcat7

在将相同的 spring 应用程序从 tomcat 6-0-35 切换到 tomcat 7-0-32 时，我在控制台中收到以下警告/错误消息：

```
WARNING: Failed to process TLD with path [/spring] and URI [/WEB-INF/tld/spring-form.tld]
 java.net.MalformedURLException
at java.net.URL.<init>(URL.java:601)
at java.net.URL.<init>(URL.java:464)
at java.net.URL.<init>(URL.java:413)
at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:650)
at com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:186)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:772)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
at org.apache.catalina.startup.TldConfig.tldScanStream(TldConfig.java:542)
at org.apache.catalina.startup.TldConfig.tldScanWebXml(TldConfig.java:355)
at org.apache.catalina.startup.TldConfig.execute(TldConfig.java:270)
at org.apache.catalina.startup.TldConfig.lifecycleEvent(TldConfig.java:567)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T20:15:14.537

由于某种原因，Tomcat 7.0 需要将 spring-form.tld 添加到 /WEB-INF/tld 目录，而 Tomcat 6.0 从 jar 获取此文件

# node.js - 什么是摩卡平等测试？

> ID：14543979
> 
> 赞同：4
> 
> 时间：2013-01-27T02:56:28.790
> 
> 标签：node.js, testing, equality, mocha.js

我正在使用 Mocha 测试 Express Node 应用程序。我想进行以下测试（比较两个空数组）：

```
assert.equal [], [] 
```

通过。但是，摩卡给了我以下错误： `AssertionError: [] == []`

我应该使用哪种方法来比较两个空数组以通过？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-27T09:12:38.737

如果您要比较对象（{} 或 []），则必须使用`assert.deepEqual()`，因为如果这样做，`assert.equal([], [])`您只是在比较引用：（`{} === {}`或`[] === []`）将始终为 false。

[http://nodejs.org/api/assert.html#assert_assert_deepequal_actual_expected_message](http://nodejs.org/api/assert.html#assert_assert_deepequal_actual_expected_message)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T09:47:00.370

问题是数组是 JavaScript 中的引用类型，因此只比较引用。当然，如果您创建两个彼此独立的不同空数组，它们是两个不同的对象，并且有两个不同的引用。

这就是测试失败的原因。

您基本上对对象有相同的问题（没有进行深度相等），尽管您通常对两个对象是否相同不感兴趣，但它们的内容是否相同。

这就是为什么我写了一个模块来处理这个问题：[comparejs](https://github.com/goloroden/comparejs)。这个模块 - 除了其他一些好东西 - 通过为所有（！）类型提供按值比较和按身份比较来解决这个问题。我想这就是你需要的。

当您特别询问 mocha 的上下文时，我还编写了自己的断言模块，称为[node-assertthat](https://github.com/goloroden/node-assertthat)，它在内部使用了 comparejs。作为副作用，您可以获得更易读（更流畅）的语法。代替

```
assert.equal(foo, bar); 
```

你可以写

```
assert.that(foo, is.equalTo(bar)); 
```

也许这可能是你要走的路。

*PS：我知道在 Stackoverflow 上不需要自我广告，但在这种情况下，我为自己编写的工具只是解决了原始发布者的问题。因此，请不要将此答案标记为垃圾邮件。*

# c++ - 带有 GCC 4.6 的 C++11 is_pod

> ID：14543983
> 
> 赞同：7
> 
> 时间：2013-01-27T02:57:22.910
> 
> 标签：c++, c++11, gcc

在C++11 中[对 POD 的宽松定义下](http://en.wikipedia.org/wiki/C++11#Modification_to_the_definition_of_plain_old_data)，我的理解是以下结构被视为 POD：

```
template <class T>
struct Foo 
{
    Foo()
    { }

    explicit Foo(T* obj) : m_data(obj)
    { }

    T* m_data;
}; 
```

`-std=c++0x`但是，如果我说，使用 GCC 4.6 并使用标志进行编译：

```
std::cout << std::boolalpha << std::is_pod<Foo<int>>::value << std::endl; 
```

它输出：

```
false 
```

这是一个显示完整程序的[**ideone链接。**](http://ideone.com/7yTq46)（注意 ideone 使用 GCC 4.5）

那么，我对 C++11 中 POD 的理解是错误的，还是 GCC 4.6 在 C++11 合规性方面根本不是最新的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T03:24:38.563

POD 结构必须是普通类（C++11 §9[class]/10）：

> POD 结构是一个非联合类，它既是普通类又是标准布局类，并且没有非 POD 结构、非 POD 联合（或此类类型的数组）类型的非静态数据成员。

§9[class]/6 定义了平凡的类是什么：

> 平凡类是具有平凡默认构造函数并且可以平凡复制的类。

§12.1[class.ctor]/5 定义了一个平凡的默认构造函数是什么。它始于：

> 如果默认构造函数不是用户提供的并且......

的默认构造函数`Foo<T>`是用户提供的，因此很重要。因此，`Foo<int>`不是POD。但是，它是标准布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T08:37:27.880

默认声明默认构造函数，使 Foo 成为 POD。IE

```
Foo() = default;
explicit Foo(T* obj) : m_data(obj)
{ } 
```

[http://ideone.com/vJltmA](http://ideone.com/vJltmA)

# java - 索引意外设置为 3040

> ID：14543987
> 
> 赞同：1
> 
> 时间：2013-01-27T02:57:49.537
> 
> 标签：java

我正在制作一个屏幕上会有很多敌人的游戏。到目前为止，这是部分代码：

```
private boolean update() {
    pIndex += cSpd;
    if (pIndex > path.length) return true;
    cX = path[pIndex].x;
    cY = path[pIndex].y;
    return false;
} 
```

问题是如果屏幕上有太多敌人/物体，它会抛出异常。（我不知道“太多”的确切数量，但我肯定需要超过这个数量。）这里有一个例外：

```
Exception in thread "AWT-EventQueue-1" java.lang.ArrayIndexOutOfBoundsException: 3040
    at Game$GamePanel$Circle.update(Game.java:152)
    at Game$GamePanel$Circle.access$1(Game.java:149)
    at Game$GamePanel.paintComponent(Game.java:110)
    at javax.swing.JComponent.paint(Unknown Source)
    at javax.swing.JComponent.paintToOffscreen(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(Unknown Source)
    ... 
```

我明白这意味着什么。第 152 行是：

```
cX = path[pIndex].x; 
```

但是，这令人困惑，因为它之前的行是：

```
if (pIndex > path.length) return true; 
```

我不明白为什么会这样。`pIndex`而另一个变量不是静态的，所以我不知道其他`Circle`s 会如何影响它。奇怪的是，当它抛出这个异常时，索引**总是3040。**我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T03:01:25.050

```
if (pIndex > path.length) return true; 
```

这不会返回 if `pIndex`is正是`path.length`，这会导致异常。

数组索引只能达到数组长度减 1。

# core-data - 如何更新 NSMutableSet 中的核心数据对象？

> ID：14543992
> 
> 赞同：-1
> 
> 时间：2013-01-27T02:58:59.337
> 
> 标签：core-data, one-to-many, nsmutableset

我已经看到很多帖子展示了如何从 NSMutableSet 中添加或删除核心数据对象以实现“对多”关系。但是，如何更新现有的？具体来说，我在 ViewController 中显示一对多关系的“多”端的对象表。当用户单击表格行（代表这些对象之一）时，我想通过 prepareForSegue 方法将此特定对象发送到另一个 ViewController。对于关系的“一个”方面，我没有问题。但我在关系的“多”方面遇到了麻烦。您能否发布一个示例，说明如何将对象从关系的“多”端发送到另一个 ViewController，让 VC 更新它并将其保存到核心数据？

非常感谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T11:21:53.887

如果你有一个关系并查询它，你会得到一个集合。

如果你想改变这个集合，而不是改变集合中包含的对象，你可以使用一个方便的方法：

例如

```
NSMutableSet *relatedObjects = [object mutableSetValueForKey:@"relationshipName"];
[relatedObjects addObject:anotherRelatedObject]; 
```

这样一来，您将获得一组可变的相关对象，而不仅仅是不可变的集合，并且您所做的任何更改都将在保存时保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:53:27.363

只需更新有问题的对象本身！再简单不过了。

```
NSSet *employees = department.employees;
Employee *bride = [employees lastObject];
NSLog(@"%@", bride.lastName); // "Johnson"
bride.lastName = @"Smith";
[self.managedObjectContext save:nil];

NSLog(@"%@", [department.employees.lastObject lastName]); // "Smith" 
```

# css - CSS 规则被覆盖

> ID：14543993
> 
> 赞同：0
> 
> 时间：2013-01-27T02:59:18.237
> 
> 标签：css

出于某种原因，我的“a:link”规则正在覆盖应用于链接的特定规则。

```
a:link  {color: red  ;}
.button {color: white; background: red;}

<a class="button" href="blah.com">Hello</a> 
```

最终结果是上面显示的链接具有红色文本和红色背景，而我希望颜色为 .button 规则中指定的白色

我觉得我做错了什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T03:06:59.430

选择`a:link`器具有比更高的[特异性](http://www.htmldog.com/guides/cssadvanced/specificity/)`.button`，因此对于两者都适用的元素（如您的示例），前者优先，使文本变为红色。

如果您知道按钮会在很多时候包含链接，您可以简单地明确设置这些链接的样式：

```
a:link  {color: red  ;}
.button, a.button:link {color: white; background: red;} 
```

或者，您可以人为地增加`.button`选择器的特异性，使其至少等于`a:link`：

```
a:link  {color: red  ;}
html .button {color: white; background: red;} 
```

**我不会推荐这种解决方案，因为它非常脆弱，而且看起来多余的`html`部分确实发挥了重要作用并不是很明显。**

另一种可能的解决方案是使用`!important`，尽管我也会避免这种情况，特别是因为有一个不使用核武器的完美替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T03:02:27.787

您可以将第二条规则更改为：

```
.button {color: white !important; background: red;} 
```

请注意`!important`，它使该规则自动具有更高的优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T03:04:53.457

这是因为`a:link`比 更具体`.button`。CSS 中更具体的规则总是覆盖不太具体的规则。

您可以（a）像这样将 !important 添加到颜色声明中...

```
.button {color: white !important; background: red;} 
```

...或者（b）使`.button`选择器更具体，像这样......

```
a.button {color: white; background: red;} 
```

Jsfiddle 示例：http: [//jsfiddle.net/ykHVa/](http://jsfiddle.net/ykHVa/)

就我个人而言，我更喜欢 (b) 而不是 (a)，因为`!important`随着时间的推移会使 CSS 成为调试的噩梦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T03:05:07.990

带有 :link 的规则只会被另一个带有 :link 的规则推翻。你需要一个同样具体的规则。

```
a:link  {color: red  ;}
.button,.button:link {color: white; background: red;} 
```

正如其他回答者指出的那样，您也可以使用 !important 。但这并不理想，因为当您稍后尝试添加新规则时，它会让人感到困惑。

[http://jsfiddle.net/PNxPf/](http://jsfiddle.net/PNxPf/)