# StackOverflow 问答 15636000-15636999

# ajax - 如何使 knockout.js 中的 ViewModel 绑定到从 WebAPI 返回的匿名集合？

> ID：15636003
> 
> 赞同：1
> 
> 时间：2013-03-26T11:32:52.623
> 
> 标签：ajax, asp.net-mvc-4, knockout.js, asp.net-web-api, viewmodel

下面的代码对我有用

```
<div id="TickerBox" style="float: right;">
    Newly Added Customer  :<span data-bind="text: lastCustomer"></span><br />
    Newly Added Product   :<span data-bind="text: lastProduct"></span><br />
    Newly Added Company   :<span data-bind="text: lastCompany"></span><br />
    Total No of Customers :<span data-bind="text: customerCount"></span><br />
    Total No of Products  :<span data-bind="text: productCount"></span><br />
    Total No of Companies :<span data-bind="text: companyCount"></span><br />
</div>

<script type="text/javascript">
    var myViewModel =
        {
            lastCustomer: ko.observable(''),
            lastProduct: ko.observable(''),
            lastCompany: ko.observable(''),
            productCount: ko.observable(0),
            customerCount: ko.observable(0),
            companyCount: ko.observable(0)
        }

    ko.applyBindings(myViewModel, document.getElementById('TickerBox'));

    $.getJSON('/api/product', function (data) {
        myViewModel.companyCount(data.companyCount);
        myViewModel.customerCount(data.customerCount);
        myViewModel.productCount(data.productCount);
        myViewModel.lastCompany(data.lastCompany);
        myViewModel.lastCustomer(data.lastCustomer);
        myViewModel.lastProduct(data.lastProduct);
    });
</script> 
```

但是我想制作一个 ViewModel ，它可以在调用 AJAX 请求时直接与 JSON 对象绑定。不是每次都分配每个可观察的值，而是可以将 ViewModel 优化为一个集合吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:36:04.063

你看过[淘汰赛映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)吗？

你像这样使用它：

```
var viewModel = ko.mapping.fromJSON(data); 
```

在您的 getJSON 成功函数中。

# c# - 实现自定义服务行为

> ID：15636005
> 
> 赞同：0
> 
> 时间：2013-03-26T11:32:55.550
> 
> 标签：c#, wcf

我尝试实现自定义服务行为以从响应消息中获取 cookie。我在 AfterReceiveRequest 方法中设置了一个断点。它永远不会被击中。怎么了 ？我认为需要为服务注册我的服务行为。如何 ？

**行为 ：**

```
public class HttpResponseMessageInspector : BehaviorExtensionElement, IDispatchMessageInspector, IServiceBehavior
{
    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {

        //Here is my breakpoint

        return null;
    }

} 
```

**网页配置**

```
<extensions>
  <behaviorExtensions>
    <add name="HttpResponseMessageInspector" type="MyNamespace.HttpResponseMessageInspector, myassembly, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <HttpResponseMessageInspector/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

**服务注册**

```
 RouteTable.Routes.Add(new ServiceRoute("Customers", new NinjectWebServiceHostFactory(), typeof(CustomersService)));
        RouteTable.Routes.Add(new ServiceRoute("Companies", new NinjectWebServiceHostFactory(), typeof(CompaniesService))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:39:59.773

我已经创建了一个实现`NinjectWebServiceHostFactory`并覆盖了`CreateServiceHost`函数的类。

# android - Android：在动态 onclicklistener 中创建自定义警报对话框

> ID：15636006
> 
> 赞同：1
> 
> 时间：2013-03-26T11:32:59.807
> 
> 标签：android, android-alertdialog

不确定该标题如何描述我希望做的事情，但在这里。基本上我有一个应用程序，它实用地创建一个按钮列表，当点击它时返回一个描述。

我创建了以下课程

```
public class DynamicOnClickListener implements OnClickListener
{

    String description;
    public DynamicOnClickListener(String adesc) {
        //sets the description attribute at instantiation
         this.description = adesc;
    }

    public void onClick(View v) {
        //on button click returns dialog box with description in it
        Log.v("DynamicOnClickListener","1");
        AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());
        builder.setMessage(description);
        builder.setCancelable(false);
        builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                       dialog.cancel();
                   }
               });
        AlertDialog alert = builder.create();   
        alert.show();
    }

 } 
```

这可以完美地工作，但是我非常想在某种程度上使对话框更加活跃。我一直在网上查看一些示例，根据 android 文档，他们建议定义自定义 xml 布局并使用 LayourInflator 将自定义 xml 设置为对话框的视图。（好吧，反正我就是这么理解的，可能是错误的就够了）

尽管文档示例与我的示例略有不同，但根据他们的示例，我应该添加以下几行

```
// Get the layout inflater
LayoutInflater inflater = getActivity().getLayoutInflater();

// Inflate and set the layout for the dialog
// Pass null as the parent view because its going in the dialog layout
builder.setView(inflater.inflate(R.layout.dialog_signin, null)) 
```

但是，当我将它添加到我的班级时，导致以下我在 getActivity() 上收到错误

```
public class DynamicOnClickListener implements OnClickListener
{

    String description;
    public DynamicOnClickListener(String adesc) {
        //sets the description attribute at instantiation
         this.description = adesc;
    }

    public void onClick(View v) {
        //on button click returns dialog box with program description in it
        Log.v("DynamicOnClickListener","1");
        AlertDialog.Builder builder = new AlertDialog.Builder(v.getContext());

        // Get the layout inflater
        LayoutInflater inflater = getActivity().getLayoutInflater();

        // Inflate and set the layout for the dialog
        // Pass null as the parent view because its going in the dialog layout
        builder.setView(inflater.inflate(R.layout.description_dialog, null));

        builder.setMessage(description);
        builder.setCancelable(false);
        builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) 
                   {
                       dialog.cancel();
                   }
               });
        AlertDialog alert = builder.create();   
        alert.show();
    }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-07T11:07:02.507

我用一个 EditText 输入电子邮件和一个按钮来发送数据并取消它。这个对话框通过使背景变暗来显示。并将其显示在当前活动之上。

```
 final Dialog dialog = new Dialog(this);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
               LinearLayout popUp = new LinearLayout(this);
               popUp.setBackgroundColor(Color.LTGRAY);
               popUp.setOrientation(1);

                EditText t1 = new  EditText(this);
                t1.setHint("Enter Your Email ID ");
                t1.setTextColor(Color.parseColor("#FFFFFF"));
                t1.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);          

                LinearLayout btnLayout = new LinearLayout(this);
                btnLayout.setBackgroundColor(Color.LTGRAY);
                btnLayout.setOrientation(0);
                btnLayout.setGravity(Gravity.CENTER);

                Button send = new  Button(this);
                send.setText("Send");
                send.setTextColor(Color.WHITE);
                Button cancel = new  Button(this);
                cancel.setText("Cancel");
                cancel.setTextColor(Color.WHITE);

                btnLayout.addView(send);
                btnLayout.addView(cancel);
                popUp.addView(t1);
                popUp.addView(btnLayout);

                dialog.setContentView(popUp);
              cancel.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    dialog.dismiss();
                }
            });
                dialog.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:44:18.880

```
final Context mContext = v.getContext()
inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
builder.setView(inflater.inflate(R.layout.description_dialog, null)); 
```

尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T08:27:43.597

根据 CoderDecoder 和 kleopatra 的回答，这里是带有形状的更新版本。

```
 final Dialog dialog = new Dialog(this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));

    GradientDrawable shape = new GradientDrawable();
    shape.setColor(getResources().getColor(R.color.shape_client_textview_background_color));
    shape.setStroke(10, getResources().getColor(R.color.shape_client_textview_border_color));
    shape.setCornerRadius(50);

    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
    LinearLayout popUp = new LinearLayout(this);
   // popUp.setBackgroundColor(Color.LTGRAY);
    layoutParams.setMargins(20,20,20,20);
    popUp.setOrientation(LinearLayout.VERTICAL);
    popUp.setLayoutParams(layoutParams);
    popUp.setBackground(shape);
    popUp.setPadding(20,20,20,20);

    EditText t1 = new EditText(this);
    t1.setHint("Enter Your Email ID ");
    t1.setTextColor(Color.parseColor("#FFFFFF"));
    t1.setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS);

    LinearLayout btnLayout = new LinearLayout(this);
 //   btnLayout.setBackgroundColor(Color.LTGRAY);
    btnLayout.setOrientation(LinearLayout.HORIZONTAL);
    btnLayout.setGravity(Gravity.CENTER);

    Button send = new Button(this);
    send.setText("Send");
    send.setTextColor(Color.WHITE);
    Button cancel = new Button(this);
    cancel.setText("Cancel");
    cancel.setTextColor(Color.WHITE);

    btnLayout.addView(send);
    btnLayout.addView(cancel);
    popUp.addView(t1);
    popUp.addView(btnLayout);

    dialog.setContentView(popUp);
    cancel.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            dialog.dismiss();
        }
    });

    dialog.show(); 
```

结果如下：

[![带有形状的动态对话框](../Images/cbd524d0086c0195adcd29b314d870ee.png)](https://i.stack.imgur.com/OyLPB.png)

# javascript - 当应用程序缓存回退 URL 不可加载时会发生什么？

> ID：15636007
> 
> 赞同：1
> 
> 时间：2013-03-26T11:33:08.377
> 
> 标签：javascript, html, web-applications, html5-appcache

MDC 声明当网络请求失败时浏览器会加载回退文件：

> 当尝试加载资源失败时使用回退条目。例如，假设缓存清单文件 [http://www.example.com/example.appcache](http://www.example.com/example.appcache)包含以下内容：
> 
> ```
> CACHE MANIFEST
> FALLBACK:
> example/bar/ example.html 
> ```
> 
> [对http://www.example.com/example/bar/](http://www.example.com/example/bar/)或其任何子目录及其内容的任何请求都会导致浏览器发出网络请求以尝试加载所请求的资源。**如果尝试失败，由于网络故障或某种服务器错误，浏览器会加载文件 example.html。**

从缓存中删除后备文件时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:22:12.657

在您尝试更新之前，备用文件仍将位于浏览器的应用程序缓存中。更新清单后，浏览器尝试更新将失败，根据[“下载或更新应用程序缓存”过程](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#downloading-or-updating-an-application-cache)的第 17 步第 4 项：

> 如果上一步失败（例如，服务器返回 4xx 或 5xx 响应或等效响应，或者出现 DNS 错误，或者连接超时，或者用户取消下载），或者如果服务器返回重定向，或者如果资源标有“no-store”缓存指令，然后运行以下列表中的第一个适当步骤：[HTTP]
> 
> > 如果正在处理的 URL 被标记为“显式条目”或“后备条目”
> > 
> > 如果这些步骤对文件列表中的任何其他 URL 并行运行，则中止这些其他 URL 的这些步骤。运行缓存失败步骤。

如果这是一次更新尝试，则缓存的先前版本将保持活动状态，如果是新尝试，则不会缓存任何内容。

# python - Python Groupby 语句

> ID：15636008
> 
> 赞同：3
> 
> 时间：2013-03-26T11:33:15.980
> 
> 标签：python, itertools

我正在尝试对以下详细信息列表进行分组：

```
details = [('20130325','B'), ('20130320','A'), ('20130325','B'), ('20130320','A')]

>>for k,v in itertools.groupby(details,key=operator.itemgetter(0)):
>>  print k,list(v) 
```

这是上述 groupby 语句的输出：

```
20130325 [('20130325', 'B')]

20130320 [('20130320', 'A')]

20130325 [('20130325', 'B')]

20130320 [('20130320', 'A')] 
```

**但我的预期输出是：**

```
20130325 [('20130325', 'B'),('20130325', 'B')]

20130320 [('20130320', 'A'),('20130320', 'A')] 
```

我在某处做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T11:33:56.363

您必须先对您的详细信息进行排序：

```
details.sort(key=operator.itemgetter(0)) 
```

或者

```
fst = operator.itemgetter(0)
itertools.groupby(sorted(details, key=fst), key=fst) 
```

Groupby 将连续匹配的记录组合在一起。

[文档：](http://docs.python.org/2/library/itertools.html#itertools.groupby)

> groupby() 的操作类似于 Unix 中的 uniq 过滤器。每次键函数的值发生变化时，它都会生成一个中断或新组（这就是为什么通常需要使用相同的键函数对数据进行排序的原因）。这种行为与 SQL 的 GROUP BY 不同，后者聚合公共元素，而不管它们的输入顺序如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T01:09:42.920

该[`toolz`](http://toolz.readthedocs.org/)项目提供了一个非流式 groupby

```
$ pip install toolz
$ ipython

In [1]: from toolz import groupby, first

In [2]: details = [('20130325','B'), ('20130320','A'), ('20130325','B'), ('20130320','A')]

In [3]: groupby(first, details)
Out[3]: 
{'20130320': [('20130320', 'A'), ('20130320', 'A')],
 '20130325': [('20130325', 'B'), ('20130325', 'B')]} 
```

# mysql - MySQL 查询返回关联数据而不是搜索的内容

> ID：15636010
> 
> 赞同：0
> 
> 时间：2013-03-26T11:33:18.790
> 
> 标签：mysql

我试图了解我正在尝试编写的查询的逻辑。

这相当于让某人去找一只袜子，但只返回他们找到的东西，而不是袜子本身。

好的，假设预订 54,321 有三个数据对象；123、124 和 125。我运行查询以查看数据对象 125 是否是袜子，如果是，则也返回 123 沙发和 124 地毯。或者，更具体地说，它可以找到的任何数据对象。目前，它只返回它找到的东西，即袜子。

我会解释发生了什么。每个预订可以有任意数量的相关数据对象或记录。我将其中一些记录用作标志，以标记需要特别注意的预订。所以我要找的袜子真的是一面旗帜！但我不想要标志，我想要包含实际数据的其他记录。

我还有其他查询正在工作，我在其中检索预订和所有相关记录，但不是在这种情况下。

我正在使用一个表来存储实际存储的数据类型，与客户端建立关系：

```
CREATE TABLE IF NOT EXISTS `bookings_clients_options` (
  `bookings_client_option_id` mediumint(11) NOT NULL AUTO_INCREMENT,
  `creation_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modification_date` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `client_id` mediumint(11) NOT NULL,
  `type` enum('text','textarea','checkbox','radio','select','multiselect') NOT NULL DEFAULT 'text',
  `rules` text NOT NULL,
  `value` text NOT NULL,
  `label` varchar(128) NOT NULL,
  `name` varchar(128) NOT NULL,
  `id` varchar(128) NOT NULL,
  `note` text NOT NULL,
  `process` enum('Y','N') NOT NULL DEFAULT 'N',
  `mode` enum('public','private','closed') NOT NULL DEFAULT 'public',
  PRIMARY KEY (`bookings_client_option_id`),
  KEY `index` (`client_id`)
); 
```

我正在为实际数据本身使用表格，与预订建立关系：

```
CREATE TABLE IF NOT EXISTS `bookings_clients_options_data` (
  `bookings_client_option_data_id` mediumint(11) NOT NULL AUTO_INCREMENT,
  `creation_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modification_date` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `bookings_client_option_id` mediumint(11) NOT NULL,
  `booking_attendee_id` mediumint(11) NOT NULL,
  `value` text NOT NULL,
  PRIMARY KEY (`bookings_client_option_data_id`),
  KEY `index` (`bookings_client_option_id`,`booking_attendee_id`)
); 
```

希望这是有道理的。

任何想法在伪代码或实际代码中可能是什么样的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:51:03.493

最后，我自己想通了。您将从最后四个 INNER JOIN 部分中看到我必须为表起别名：

> 选择
> 
>    bookings.booking_id, DATE_FORMAT(bookings.creation_date, '%a %D %b %y') AS creation_date, DATE_FORMAT(bookings.modification_date, '%a %D %b %y') AS modify_date, bookings.client_id,
> 
>    bookings_attendees.name, DATE_FORMAT(bookings_attendees.stay_date, '%a %D %b %y') AS stay_date, bookings_attendees.stay_nights,
> 
>    场地.venue_id AS 场地_id，场地.name 作为场地，场地.town_city，
> 
>    日期格式（（
> 
>        SELECT MAX(bookings_history.modification_date) AS booking_history FROM bookings_history WHERE (bookings_history.booking_id = bookings.booking_id)
> 
>    ), '%a %D %b %y, %H:%i') AS booking_history,
> 
>    COALESCE(GROUP_CONCAT(DISTINCT a2.value SEPARATOR 0x1D), 'NULL') AS clients_options FROM bookings_attendees INNER JOIN bookings ON (bookings.booking_id = bookings_attendees.booking_id) AND (bookings.client_id = '3') AND (bookings.status = '确认') AND (bookings.mode = 'public') INNER JOIN bookings_clients ON (bookings.booking_id = bookings_clients.booking_id) INNER JOIN clients ON (clients.client_id = bookings_clients.client_id) AND (clients.client_id = '1') INNER加入场地 (venues.venue_id = bookings.venue_id)
> 
> **内部联接 bookings_clients_options a1 ON (a1.client_id = '3')**
> 
> **内部联接 bookings_clients_options b1 ON (b1.client_id = '3') 内部联接 bookings_clients_options_data b2 ON (b1.bookings_client_option_id = b2.bookings_client_option_id) AND (b2.booking_attendee_id = bookings_attendees.booking_attendee_id) AND (b2.bookings_client_option_id = '4') AND ( b2.value = 'Y')**
> 
> GROUP BY bookings.booking_id ORDER BY bookings_attendees.stay_date

# c# - 以编程方式在 Excel 上隐藏列并再次填充时出错

> ID：15636012
> 
> 赞同：0
> 
> 时间：2013-03-26T11:33:21.087
> 
> 标签：c#, excel, excel-interop

我正在开发一个 Excel 插件，它用来自网页的信息填充工作表。

有一个按钮显示另外两列，我获取信息并填充列，然后，如果未按下“显示此列”按钮，我将它们隐藏：

```
Range gColumn = swatDataSheet.Columns["G"];
Range hColumn = swatDataSheet.Columns["H"];

if (!showOmniWorksButton.Checked)
{
    gColumn.Hidden = true;
    hColumn.Hidden = true;
}
else
{
    gColumn.Hidden = false;
    hColumn.Hidden = false;
} 
```

第一次一切正常，但如果我刷新工作表并再次填写，一切都从我之前隐藏的列开始，即使它现在没有隐藏。如果我的数据从 A1 开始，删除并再次填充后，它从我隐藏的列 G1 开始。

这是一个错误还是我做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:20:24.977

在粘贴的代码中看不到任何错误，所以我猜它可能与填充信息的代码有关。

你如何填写数据？您是否刚开始填充当前选定的列？如果是这样，也许这就是原因，您的算法只是从选择中填充。首次运行填充时，尝试从 G 列中选择一个单元格。

# windows - 如何与任何操作系统共享私有本地 git 服务器

> ID：15636013
> 
> 赞同：1
> 
> 时间：2013-03-26T11:33:22.313
> 
> 标签：windows, git, debian, repository

我已经配置了我的第一个私人 git 服务器，因为我的项目正在增长，我需要在这里进行源代码控制。顺便说一句，服务器没问题，我不想使用任何第三方软件包，我只在 Debian OS 上使用 git-core，它很完美。

问题是我无法配置终端操作系统我的意思是我有一台装有 Windows 的笔记本电脑和另一台装有 Linux 和 OSX 的终端。linux的终端已经准备好了，shell很简单，只需使用git clone就可以了。基于 OSx 的笔记本电脑也是如此

问题出现在 Windows 上，因为我不知道如何将 Windows 操作系统连接到 git 服务器。Windows 终端应该使用**[sourcetree](http://www.sourcetreeapp.com/)**，因为这很棒！

目前，服务器具有以下配置：

1.  一位名为*Git*的用户具有 root 访问权限
2.  NO SSH（它是本地**的，目前**我不需要 ssh auth）
3.  *Git*用户有一个文件夹*repos/git/[projects.git]*

就这样。我希望有人知道如何将 Windows 与我的本地服务器连接。

PS：在 Windows 上，我有 git、putty 和 sourcetree

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:35:46.847

一种选择是打开对您的 GIT 服务器的 http 访问。请[遵循本手册](http://git-scm.com/book/en/Git-on-the-Server-Public-Access)。

# javascript - 在集合中使用时未定义骨干模型中的自定义字段

> ID：15636018
> 
> 赞同：0
> 
> 时间：2013-03-26T11:33:35.217
> 
> 标签：javascript, backbone.js, collections, model

我在 Backbone 中定义了一个模型和集合，如下所示：

```
$(document).ready(function () {

DeviceModel = Backbone.Model.extend({
    urlRoot: '/ajax/mvcDevices',

    validationRules: {
        name: [{ rule: 'required'}],
        mac: [
        { rule: 'required' },
        { rule: 'isMacAddress' }
        ],
        speed: [{ rule: 'required'}]
    },

    preprocess: {
        name: ['clean', 'trim'],
        speed: ['clean', 'trim']
    }
});

DeviceCollection = Backbone.Collection.extend({
    url: '/ajax/mvcDevices',
    Model: DeviceModel
});
}); 
```

但是，当在 Collection 中使用这些模型时，列出的自定义字段都没有定义。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T12:14:43.033

您可以使用`defaults`Model 属性来强制执行默认值，如下所示：

```
var DeviceModel = Backbone.Model.extend({
    urlRoot: '/ajax/mvcDevices',

    defaults: {
        validationRules: {
            name: [{ rule: 'required'}],
            mac: [
            { rule: 'required' },
            { rule: 'isMacAddress' }
            ],
            speed: [{ rule: 'required'}]
        },

        preprocess: {
            name: ['clean', 'trim'],
            speed: ['clean', 'trim']
        }
    }
});

var DeviceCollection = Backbone.Collection.extend({
    url: '/ajax/mvcDevices',
    Model: DeviceModel
});

var collection = new DeviceCollection();

var model = new DeviceModel({id: 1});
collection.add(model);
console.log(collection.get(1).get('validationRules'));
console.log(collection.get(1).get('preprocess')); 
```

从 Backbone 文档中，如果您使用`new`运算符创建模型，所有属性都`defaults`将被复制到新对象，因此这取决于您创建模型对象的方式。

# iphone - 通过代码从控制台清除 NSlog 生成的日志

> ID：15636019
> 
> 赞同：3
> 
> 时间：2013-03-26T11:33:41.730
> 
> 标签：iphone, ios, objective-c, xcode, nslog

我想通过编码从控制台中清除日志，就像我们`clrscr()`在 c 语言中使用的一样我正在开发一个基于导航的应用程序，这个应用程序有太多由 NSLog 生成的日志。当我觉得代码到目前为止运行良好时，我想清除日志。

我从[这个问题](https://stackoverflow.com/questions/10701703/is-there-any-way-to-clear-nslog-output)中得到了一个解决方案，但是这个解决方案会添加`\n`到日志中，我想完全清除它，所以如果你有任何其他解决方案，请与我分享。

在此先感谢我正在等待您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:56:31.840

我不相信它可以从应用程序内部清除控制台。但是，如果您在 XCode 中进行开发，只需单击控制台输出窗口并按 cmd k - 这将清除所有回滚...

或者 - 只需禁用日志记录/将 nslog 调用包装在另一种限制显示量的方法中

# mongodb - 如何计算 MongoDB 中的行号以进行排序查询？

> ID：15636026
> 
> 赞同：1
> 
> 时间：2013-03-26T11:33:50.377
> 
> 标签：mongodb, mapreduce, row-number

我有照片收藏，我必须在相册中显示当前照片位置。排序条件很复杂： sort({add:1,weight:1,_id:1}) 所以没有机会检查当前之前的照片数量。

我尝试使用 MapReduce，但与 PostgreSQL（44 毫秒）相比，它的工作速度非常慢（615 毫秒）。

在 Mongo 中获取某些元素的行号的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:19:13.503

这是一个类似分页的问题。本质上，您应该在客户端执行计数。如果你想有一个稳定的顺序，你也应该按`_id`字段排序（因为它是不可变的）。显然，你已经在这样做了。

```
[pseudocode]
var criteria = { "album_id" : "foo", ... }; 
var skip = 50; // assuming we're on page 2 and each page has 50 photos 
var cursor = db.Photo.find(criteria).
       sort({"added" :1, "weight" : 1, "_id" : 1}).
       skip(skip).limit(50);
// count() doesn't honour skip or limit, so this is total number of 
// Photos matching 'criteria'
var count = cursor.count(); 

for(var i = 0; i < cursor.length; ++i)
    cursor[i].index = skip + i;
// each photo is now cursor[x].index of 'count' photos total 
```

希望有帮助

# visual-studio - 如何使用 ProjectTypeGuids 349c5851-65df-11da-9384-00065b846f21 打开 csproj？

> ID：15636034
> 
> 赞同：16
> 
> 时间：2013-03-26T11:34:10.990
> 
> 标签：visual-studio

我有 Visual Studio 2012 专业版。当我尝试打开特定的 csproj 时，我收到一条错误消息

> 此安装不支持项目类型。

它没有说明项目是什么“项目类型”，也没有说明我需要安装什么才能打开它。

在检查`.csproj`文件时，我看到了这些行

```
<ProductVersion>9.0.30729</ProductVersion>
<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

那么**我需要安装什么**才能打开这个项目？请提供链接！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-26T14:22:14.200

在旧的“添加删除程序”中找到 Visual Studio 2012，然后按“更改”。通过安装“Microsoft Web Developer Tools”修复

![在此处输入图像描述](../Images/fcb0bf5c6a78ce80803da8724dbe51ee.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T04:43:58.957

有一个非常简单的方法可以解决这个问题。

可能缺少一些依赖项，很难找出是哪一个。

去

[http://www.asp.net/downloads](http://www.asp.net/downloads)

为您的 Visual Studio 版本下载 ASP.NET 和 WebTools

将出现一个 Web 平台安装程序，它将安装所有必需的工具

这解决了我的问题

无需通过 ProjectTypeGuids

# iphone - 用于架构 i386 的目标 C 未定义符号，我不明白这个错误

> ID：15636036
> 
> 赞同：1
> 
> 时间：2013-03-26T11:34:11.870
> 
> 标签：iphone, ios, objective-c

我在目标 C 中首次亮相，我正在尝试为 iOS 做一个简单的密码生成器。在这段代码中，我尝试创建一个包含字母和数字的随机字符串。然后我尝试用 a 显示这个字符串`NSLog`（看看它是否有效）

当我运行程序时，我得到了这个错误：

![在此处输入图像描述](../Images/a2dae9ed640bda63e1bf6a29745790c9.png)

我创建了 2 个文件，有我的`viewcontroller.m`：

![在此处输入图像描述](../Images/af4a3a53bad14f3ee2496487cdedc73f.png)

我的`viewcontroller.h`：

![在此处输入图像描述](../Images/704e82b16cd5ffe5d9b72a8f9ddad404.png)

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:14:24.760

不知何故，您的项目中有一些强大的东西。

*   `start`基本上是您程序的入口点；它是 dyld 初始化的一部分，是跳转到`main()`. （尝试设置一个符号断点`start`，然后运行你的应用程序——这是一个很小的例程，`dyld`它可以计算出它在哪里`main`并对其进行尾调用，这就是为什么你永远不会在回溯中看到它，除非某些事情变得非常、疯狂、错误） .

*   `arc4random`是 C 标准库的一部分。它应该始终可用。

我看到的唯一线索是链接线使用`-nostdlib`. 这似乎很奇怪。转到您的构建设置并确保打开**与标准库的链接。**如果不是，发生了什么，还有什么可能发生了变化？

请注意，代码还有许多其他问题。

头文件中的那些非 ivar 声明会导致问题；当您第一次将该文件#import 到另一个编译单元（另一个 .m 文件）时，它们将成为重复符号。

`@interface UIViewController()`没有必要（也不应该在系统类上声明方法）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T14:35:20.187

嗨，请执行以下步骤 1) 重新启动 XCode。2）请检查您是否添加了石英代码框架。3) 清洁和建造。

请删除.m 文件中**-(NSString *)generer:(int)len**中的语句后的分号(;) 。

在以前的应用程序中，我也遇到了同样的问题。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-26T11:38:10.620

您在程序 arc4random() 中使用了 c++ 代码，这是 i386 架构的未定义符号，我不明白这个错误。

要解决此问题，只需`#include <stdlib.h>`在标题处添加 .this 即可。

# ruby-on-rails-3 - Rails 3 ActiveRecord 迁移 - ActiveRecord::StatementInvalid

> ID：15636042
> 
> 赞同：0
> 
> 时间：2013-03-26T11:34:21.300
> 
> 标签：ruby-on-rails-3, activerecord

我收到一个奇怪的错误：

```
ActiveRecord::StatementInvalid in AdminController#edit_user
NoMethodError: undefined method `empty?' for 663:Fixnum: SELECT privileges.*, ...

In: app/controllers/admin_controller.rb:75:in `edit_user' 
```

**这是有问题的行：**

```
#line #75 from admin_controller.rb
@privileges = Privilege.find_by_sql( "SELECT privileges.*, vendors.name AS vendor_name FROM privileges LEFT JOIN vendors ON vendors.id = rivileges.vendor_id WHERE user_id = ?  ORDER BY vendors.name", @user.id) 
```

我可以通过取出占位符来修复它，但我不想这样做：

```
@privileges = Privilege.find_by_sql( "SELECT privileges.*, vendors.name AS vendor_name FROM privileges LEFT JOIN vendors ON vendors.id = privileges.vendor_id WHERE b2b_user_id = "+@user.id.to_s+"  ORDER BY vendors.name") 
```

在 Rails 3 中并没有弃用 find_by_sql，我可以很好地将该查询泵入数据库。

对我来说奇怪的是没有调用“空”？在我的管理员控制器中。这是 Rails 对 empty 的内部调用吗？

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T17:10:07.890

这种语法在 Rails 3.1 中已被弃用。

你应该打电话

```
@privileges = Privilege.find_by_sql ["SELECT privileges.*, vendors.name AS vendor_name FROM privileges LEFT JOIN vendors ON vendors.id = rivileges.vendor_id WHERE user_id = ?  ORDER BY vendors.name", @user.id] 
```

# couchdb - 包含文档时视图内容的一致性

> ID：15636043
> 
> 赞同：1
> 
> 时间：2013-03-26T11:34:22.200
> 
> 标签：couchdb

关于视图的[CouchDB 文档](http://wiki.apache.org/couchdb/HTTP_view_API#Altering.2BAC8-Changing_Views)指出，`include_docs=true`在查询视图时使用时，包含的文档的修订版可能比用于生成视图的修订版更新。这对我来说似乎很奇怪，因为我知道 MVCC 旨在完全解决这些竞争条件而不会阻塞写入器。那里提出的替代方案提到在视图的值中包括文档。

与用于生成视图的请求`include_docs=true`相比，请求可能会返回更新的文档（或者没有，如果文档已被删除），还是仅在也`stale=ok`用于查询视图而不更新视图时才会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:47:16.337

不，这是真的。发生的情况是，每个查询都会检索由查询结果行的“id”属性标识的文档；与为 map 函数发出的结果一样，文档不会保存到查询索引中。请注意，这可能会使查询变慢，因为每个涉及的文档都必须被查找、检索并包含在响应中。发出完整的文档可以忽略这个问题，但当然会使您的索引文件在磁盘上更大。

# android - 我的应用程序只有一个广播接收器。它适用于所有版本的android吗？

> ID：15636044
> 
> 赞同：0
> 
> 时间：2013-03-26T11:34:25.007
> 
> 标签：android, broadcastreceiver

我开发了一个只有`BroadcastReceiver`(no `Activity`+ no `Service`) 的应用程序 - 它用于特定目的。

我能够在 v2.3.3 上测试我的应用程序，并且运行良好。它会在所有平台上都一样工作还是有例外？如果有 - 有什么替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:35:24.987

不，它不适用于所有版本。

[从 Android 3.1](http://developer.android.com/about/versions/android-3.1.html#launchcontrols) (API 12) 开始，在用户手动打开应用程序的 UI 组件（活动）至少一次之前，您无法接收广播。

# java - Selenium 上传图片

> ID：15636045
> 
> 赞同：0
> 
> 时间：2013-03-26T11:34:27.343
> 
> 标签：java, selenium

我想在 selenium webdriver 代码的帮助下上传图像。任何人都可以帮助我。我将提供在我的应用程序中上传图像的步骤。

1.  在我的应用程序中，“浏览”按钮显示在创建屏幕中。

2.  单击浏览按钮后，将显示窗口页面。

3.  我必须从窗口中选择一张图像，然后单击打开。

4.  它将使用在图像字段中选择的图像名称重定向到我的应用程序。

5.  图像字段不可编辑（它将采用您选择的图像的名称。）。

    我可以使用硒代码单击浏览按钮。

我的问题来了：窗口屏幕已打开。但我无法在窗口页面中进行交互（选择图像并单击打开按钮），因为没有火路。

谁能尽快帮助我解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:01:16.630

看看这篇博文，它对我有帮助。

[在 Remote WebDriver 中上传文件](http://sauceio.com/index.php/2012/03/selenium-tips-uploading-files-in-remote-webdriver/)

它使用本地或远程 webdriver 工作。现在我可以在 Chrome、IE 和 Firefox 上运行它。我不相信它适用于 Safari 驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T13:32:13.827

尝试这个 ：

```
driver.findElement(By.id("btn_Browse")).click(); 
driver.findElement(By.id("logo")).sendKeys("c:\\ Image.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:48:23.770

在使用 selenium 时使用 Autoit 处理文件上传窗口。请按照以下步骤操作。

1) 下载[Autoit](http://www.autoitscript.com/site/autoit/)并安装。

2）然后在记事本中写下以下代码。将以下代码中的文件路径更改为您尝试从 selenium 脚本上传的文件路径。将其另存为`uploadhandler.au3`. 请注意，扩展名应为 au3。

```
WinActivate("Choose file");
Local $file = "c:\yourpath\howtoupload.doc"
ControlSetText("Choose file", "", "Edit1", $file )
ControlClick("Choose file", "", "Button2") 
```

3）右键单击该保存的脚本文件，然后从上下文菜单中单击“编译脚本”。这将生成`uploadhandler.exe`文件。

4) 将此 uploadhandler.exe 文件放在本地驱动器中，并在 selenium-java 代码中运行此 exe 文件，无论您需要使用以下代码上传文件。

```
Process proc = Runtime.getRuntime().exec("C:\\path for your exe file\\uploadhandler.exe"); 
```

前任：-

```
driver.findelement(byid("browse")).click();
Process proc = Runtime.getRuntime().exec("C:\\path for your exe file\\uploadhandler.exe");
//rest of your selenium code continues here. 
```

# bash - 这个 bash 脚本有什么作用？

> ID：15636046
> 
> 赞同：2
> 
> 时间：2013-03-26T11:34:28.607
> 
> 标签：bash

这行 bash 有什么作用？

```
:(){ :|:& };: 
```

我猜这很讨厌，这就是为什么我没有尝试运行它来查看的原因。有人可以通过代码剖析来解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:38:11.527

这是经典的[叉子炸弹](http://en.wikipedia.org/wiki/Fork_bomb)：

> 分叉炸弹是一种拒绝服务攻击，进程不断自我复制以耗尽可用的系统资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:43:30.760

首先它创建一个名为“:”（冒号）的函数：

```
:(){ :|:& } 
```

...然后运行它（分号分隔命令）

```
; : 
```

功能

```
:() {  # Declaration
:|:&   # Runs "colon", pipes it to "colon", run in the background (&)
       # creating a loop
}      # Function end 
```

# c# - WPF 按钮中的图像在运行时不可见

> ID：15636047
> 
> 赞同：62
> 
> 时间：2013-03-26T11:34:30.163
> 
> 标签：c#, wpf, image, button

总而言之，我有一个小型应用程序的以下开始，它检查 .resx 文件的嵌入括号的一致性（这样就不会发生不匹配的“... {0}”字符串的运行时错误）。我有 MainWindow.xaml 的以下 XAML，我的特殊问题与要在按钮上显示的图像有关

```
<Window x:Class="ResxChecker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="174.383" Width="495.869">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="350*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="30*"/>
        </Grid.RowDefinitions>
        <Label Content="Select .resx file:" HorizontalAlignment="Left" Margin="10,0,0,0" VerticalAlignment="Top" Height="24" Width="Auto" Grid.ColumnSpan="1"/>
        <TextBox Grid.ColumnSpan="2" HorizontalAlignment="Stretch" Margin="10,0,0,0" Grid.Row="1" TextWrapping="Wrap" Text="" VerticalAlignment="Top"/>
        <Button Grid.Column="2" HorizontalAlignment="Right" Margin="5,0,10,0" Grid.Row="1">
            <Image VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Height="16 " Width="16" Source="pack://siteoforigin:,,,/Resources/UserCost2013Open16.png"/>
        </Button>
    </Grid>
</Window> 
```

该图像具有“构建操作 = 资源”、“复制到输出目录 = 不复制” - 图像在设计器中显示，但在运行时不显示。我已经看到以下问题并阅读了相关答案，但没有解决问题：

1.  [应用程序使用时不显示 WPF 控件图像](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/be734da0-dd00-4720-a876-1aa4ac19edae)

2.  [wpf中的图像问题（图像不显示）](https://stackoverflow.com/questions/6431568/image-problem-in-wpf-image-does-not-show-up)

3.  [按钮的背景图像未显示在 WPF 中](https://stackoverflow.com/questions/15089407/background-image-of-button-not-showing-in-wpf)

**如何让按钮图像在运行时出现？**

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-26T12:12:53.397

将构建操作更改为“资源”。你的包网址也是错误的。要么使用：

```
Source="pack://application:,,,/Resource/UserCost2013Open16.png" 
```

或者干脆

```
Source="/Resource/UserCost2013Open16.png" 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-26T12:18:02.910

有2个解决方案：

1：更改图像的设置：

```
Build Action = Content
Copy to output directory = Copy if newer
Source="pack://siteoforigin:,,,/Resources/UserCost2013Open16.png" 
```

2：在源路径中使用***application***而不是***siteoforigin***时，您必须有可能的方法：

a) 图像将位于名为“Resources”的子文件夹中，.exe 文件会很小

```
Source="pack://application:,,,/Resources/UserCost2013Open16.png"
Build Action = Content
Copy to output directory = Copy if newer 
```

b) 图像将包含在 .exe 中，并且不存在带有图像文件的子文件夹

```
Source="pack://application:,,,/Resources/UserCost2013Open16.png"
Build Action = Resource
Copy to output directory = Copy if newer 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-06-13T11:13:44.677

假设你有

*   设置`Build Action`为`Resource`

*   使用正确设置该路径[`URI-PACK-FORMAT`](https://docs.microsoft.com/en-us/dotnet/framework/wpf/app-development/pack-uris-in-wpf)

就我而言，它仍然没有显示。

`Clean & Rebuild` **不只是**为我修好它！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-04-23T04:36:39.493

在我的情况下，我将图像放在一个名为的单独项目中`Common`，并且图像位于该项目中命名的文件夹下`Resources`。在我的另一个项目中，我添加了对图像的引用`Common`并设置图像的来源，如下所示：

```
<Image Source="/Common;component/Resources/anImage.png"/> 
```

图像有`Build Action`设置 to`Resource`和`Copy to Output Directory`to `Do not copy`。但是，由于某种奇怪的原因，直到我删除了解决方案中的每个程序集文件并制作了一个`Clean Solution`和`Build Solution`. 不知道为什么，但是一旦我重建了所有东西，它就开始在运行时工作了。我仍然无法弄清楚为什么它在设计时工作。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-09T10:07:42.167

转到资源文件夹中的图像，右键单击图像，转到属性，单击构建操作属性，然后将其从无更改为资源。那会奏效的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-01T08:27:59.067

您应该在Visual Studio的**解决方案资源管理器**中添加任何内容。不只是将图像复制到 Windows 资源管理器中的文件夹，而是在解决方案资源管理器中的任何文件夹上单击右键，转到**添加 > 现有项目...**，然后选择要添加的资源的路径。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-01-13T11:00:55.117

我将我的图像定义为下一个：

```
<Image Source="/Resources/Images/icon.png"/> 
```

图像显示在*Visual Studio*设计器中，但我启动应用程序时没有显示图像！它让我疯了！我用 clean/build 尝试了所有*Build Action*，没有运气。

在我的情况下，问题是由于控件（使用*Image*）和应用程序本身位于不同的项目中这一事实引起的。*Resources/Images*文件夹位于*Controls*项目中。结果，应用程序试图在自己的 Debug 文件夹中找到 icon.png，但实际上它位于*Controls*的 Debug 文件夹中。

所以有两个解决方案对我有用：

1) 将*资源/图像*放在应用程序的项目中（当有多个项目使用*Controls*项目中的控件时不太好，但它可以工作）

*2) 在Image*中明确指定 Controls 项目的名称：

```
<Image Source="/Controls;component/Resources/Images/icon.png"/> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-11-05T22:09:27.507

Visual Studio 2022（但应该在其他版本中工作）。将您的图像添加到您想要命名的文件夹中，在此示例中，我创建了一个`Assets`命名文件夹。然后将图像的属性设置`Resource`为`Build Action`. 然后选择文件夹中的图像并拖放到`<MenuItem.Icon>`它应该正确的路径..

[![将图像拖放到项目中，设置为资源然后拖放到页面上](../Images/0d42e8e6bb6a0f0abf16dca9ebed4b81.png)](https://i.stack.imgur.com/ZScUx.png)

*   请注意，您可能需要重建项目，编译器有时不会将新资源识别为需要重建。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-15T13:55:00.930

创建一个新文件夹并将您的图片放在新文件夹中并在 XAML 中写入

```
<Image Source="/newfolder/icon.png"/> 
```

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2018-05-27T05:49:11.437

**Source="file:///D:/100x100.jpg"/>**对我有用。

# haskell - 用于简化递归的惯用 Haskell 代码

> ID：15636056
> 
> 赞同：7
> 
> 时间：2013-03-26T11:34:46.083
> 
> 标签：haskell, recursion, idioms

我需要计算`foo n = maximumBy (comparing p) [1..n]`，哪里`p :: Int -> Int`慢。但我知道这一点`p n < n`，`n > 0`并希望使用这个事实来加速这个计算，方法如下：我从down to开始计算`p x`，记住当前的最大值。一旦我达到小于或等于当前最大值的值，我就知道这个最大值必须是全局最大值，我就完成了。`x``n``1``x`

所以我的尝试看起来像这样：

```
foo n = go (0, 0) n where
    go (c, _) 1 = c
    go (c, c') !x = if c' >= x then c else go (c2, c'2) (x-1) where
        x' = p x
        (c2, c'2) = if c' >= x' then (c, c') else (x, x') 
```

这有效，但看起来不是很地道。所以我正在寻找一个更优雅的解决方案。你有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:26:12.403

您可以使用模式匹配来减少使用 if ... then ... else
另一个技巧是给变量一个数字，它可以让您记住起始案例**var0**并且对于其他递归调用，您可以使用nicer **var**
最后请注意，**如果**在相同形式的谓词之后返回相同的值并共享相同的环境，那么您可能可以将它们组合在一起。

```
foo n0 = go (0, 0) n0
  where
    go (x, y) n
        | (n  == 1) || (y >= n) = x
        | y < (p n) = go (n, (p n)) (n-1)
        | otherwise = go (x, y) (n-1) 
```

* * *

重写考虑到评论，

```
foo n0 = go 0 0 n0
  where
    go x y n
        | (n  == 1) || (y >= n) = x
        | pn > y                = go n pn (n-1)
        | otherwise             = go x y (n-1)
          where
            pn = p n 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T11:55:03.060

好的，那么让我看看我是否正确地围绕着这个问题......你这么说很`p n < n`有趣`n`。你想计算`p x`,`x = n to 1`直到`x`变得小于迄今为止`p x`看到的最大？

好吧，看起来您可以将所有的计算`p x`为惰性列表。现在问题已简化为扫描此列表，直到找到所需内容。我建议`takeWhile`，除了我们还需要*折叠*列表以找到当前最大值。嗯，也许我们可以将每个值与运行最大值配对？

就像是

```
foo n =
  let
    ps = [ p x | x <- [n, n-1 .. 1] ]
    qs = fold (\ px' (px, maxPX) -> (px', maxPX `max` px') ) ps
  in last . takeWhile (\ (px, maxPX) -> px >= maxPX) qs 
```

或类似的？

# acpi - 以编程方式即时关闭电源？

> ID：15636059
> 
> 赞同：2
> 
> 时间：2013-03-26T11:34:58.430
> 
> 标签：acpi

在网络环境中的 Windows XP Pro 下，Ctrl+Alt+Del 会为您提供 Windows 安全提示，如果您按住 Ctrl 并单击关机，则会触发紧急关机。

这似乎将系统关闭得如此之快，甚至没有什么进程可以完成，即几乎就像您刚刚拉下电源/长按电源按钮一样。

我想知道 Windows 是通过什么过程实现如此快速的关机——它是直接通过 ACPI/APM 指示 BIOS 关闭系统吗？如果是这样，如何以任何语言以编程方式实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-26T04:01:37.510

该`ExitWindowsEx`功能是标准关闭，即使`EWX_FORCE`它仍然关闭所有程序，服务等......它只是不*要求*/等待它们关闭。

那么解决方案是什么？**使用`NtShutdownSystem`.**

该函数通过刷新缓存、注册表等然后调用 BIOS 来关闭机器电源来执行实际的关机。

在此处查看使用示例： http:
[//www.codeproject.com/Articles/34194/Performing-emergency-shutdowns](http://www.codeproject.com/Articles/34194/Performing-emergency-shutdowns)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:09:44.173

这可以通过使用系统请求功能在 *nix 系统上完成。通常出于安全原因禁用此功能，但您可以使用 root 权限启用它并立即请求关闭系统电源，如下所示：

```
echo 1 > /proc/sys/kernel/sysrq-trigger ;
echo o > /proc/sysrq-trigger 
```

其中字母“o”表示“断电”。其他功能可用。[https://en.wikipedia.org/wiki/Magic_SysRq_key](https://en.wikipedia.org/wiki/Magic_SysRq_key)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:41:07.767

你可以使用[`ExitWindowsEx`](http://msdn.microsoft.com/de-de/library/windows/desktop/aa376868%28v=vs.85%29.aspx)with`EWX_POWEROFF`和`EWX_FORCE`flags set ...

# graph - 使用 JUNG 从顶点获取坐标

> ID：15636060
> 
> 赞同：2
> 
> 时间：2013-03-26T11:35:06.030
> 
> 标签：graph, jung

布局后如何在图形中获取顶点的坐标？，我正在使用 JUNG 来创建和布局图形

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:50:10.817

对于`layout`类型`jung.algorithms.layout.AbstractLayout`或任何子类，您可以调用`layout.getX(vertex)`and `layout.getY(vertex)`。`vertex`是您的顶点，无论您选择什么类型。

# ios - 多个 Fusioncharts 未在 iOS 中显示

> ID：15636061
> 
> 赞同：0
> 
> 时间：2013-03-26T11:35:08.480
> 
> 标签：ios, uiwebview, fusioncharts

我在 iOS 上使用**FusionCharts 。**我在使用融合图表加载多个**UIWebView时遇到问题。**问题是只有一个 webview 正确显示图表。第二个加载并呈现图表，但只有在我**滚动**视图后才能正确显示。

仅在滚动视图后才能正确呈现图表。什么可能导致这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:21:07.083

这个问题的问题在于 UIWebView 它自己为了清楚的解释查看下面的链接 [http://double-slash.net/2010/10/18/using-multiple-ios-uiwebview-objects/](http://double-slash.net/2010/10/18/using-multiple-ios-uiwebview-objects/)它可以通过两种方式修复通过采用自旋锁机制或通过自定义 UIWebview 增加运行循环的渲染时间。

```
@interface FCXTCustomWebView ()

@property (assign) id idelegate;

@end

@implementation FCXTCustomWebView

- (id)init
{
self = [super init];
if (self)
{
    self.delegate = self;
}

return self;
}

- (id) initWithCoder:(NSCoder *)aDecoder
{
self = [super initWithCoder:aDecoder];
if (self)
{
    self.delegate = self;
}

return self;
}

- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    self.delegate = self;
}
return self;
}

- (void)setDelegate:(id<UIWebViewDelegate>)delegate
{
_idelegate = delegate;
}

- (void)stopRunLoop
{
CFRunLoopRef runLoop = [[NSRunLoop currentRunLoop] getCFRunLoop];
CFRunLoopStop(runLoop);
}

- (void) webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
[self performSelector:@selector(stopRunLoop) withObject:nil afterDelay:.01];

if ([_idelegate respondsToSelector:@selector(webView:didFailLoadWithError:)])
{
    [_idelegate webView:webView didFailLoadWithError:error];
}
}

- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
if ([_idelegate respondsToSelector:@selector(webView:shouldStartLoadWithRequest:navigationType:)])
{
    return [_idelegate webView:webView shouldStartLoadWithRequest:request navigationType:navigationType];
}
else
{
    return YES;
}
}

- (void) webViewDidFinishLoad:(UIWebView *)webView
{
[self performSelector:@selector(stopRunLoop) withObject:nil afterDelay:.01];

if ([_idelegate respondsToSelector:@selector(webViewDidFinishLoad:)])
{
    [_idelegate webViewDidFinishLoad:webView];
}
}

- (void) webViewDidStartLoad:(UIWebView *)webView
{
[self performSelector:@selector(stopRunLoop) withObject:nil afterDelay:.1];
if ([_idelegate respondsToSelector:@selector(stopRunLoop)])
{
    [_idelegate webViewDidStartLoad:webView];
}
}

- (void) loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL
{
[super loadHTMLString:string baseURL:baseURL];
CFRunLoopRunInMode((CFStringRef)NSDefaultRunLoopMode, 1.5, NO);
}

@end 
```

# php - 简单的 html dom 解析器 $html 为空

> ID：15636072
> 
> 赞同：2
> 
> 时间：2013-03-26T11:35:27.800
> 
> 标签：php, simple-html-dom

尝试使用*简单的 html 解析器*解析 html 时，我没有得到任何响应。这是代码：

```
$html = new simple_html_dom();  
$html->file_get_html('http://thepiratebay.se/search/1080p/0/7/207'); 
```

`$html`什么都不返回。但是，当我使用这个 url 做同样的事情时`http://thepiratebay.se/browse/207/0/7`，我得到一个正常的响应。

我真的不明白为什么，因为网址完美无缺。

A `var_dump`on`$html`返回 a `bool (false)`。

我有 php 5.3.1 并且`allow_url_fopen`在**php.ini中**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:53:28.637

使用[`cURL`](http://php.net/manual/en/book.curl.php)并设置用户代理。显然 thepriatebay.se 不会在没有用户代理的情况下响应请求。

这会抓取浏览器的用户代理并将其发送到目标。

```
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']); 
```

要通过 cURL 请求网页，请使用以下命令：

```
// Start a cURL resource
$ch = curl_init();
// Set options for the cURL
curl_setopt($ch, CURLOPT_URL, 'http://thepiratebay.se/search/1080p/0/7/207'); // target
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']); // provide a user-agent
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); // follow any redirects
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // return the result
// Execute the cURL fetch
$result = curl_exec($ch);
// Close the resource
curl_close($ch);
// Output the results
echo $result; 
```

# string - 通过bash在SIFT上的“匹配”处循环连接超过4个字符串

> ID：15636074
> 
> 赞同：3
> 
> 时间：2013-03-26T11:35:35.027
> 
> 标签：string, bash, loops, concatenation, sift

刚才，我查找了 SIFT 算法来处理我的图像..

如果您曾经使用过来自[http://www.cs.ubc.ca/~lowe/keypoints/](http://www.cs.ubc.ca/~lowe/keypoints/)的 SIFT，则有一个名为“match”的可执行文件可以将一个图像与另一个图像相关联。

这是例子..

```
./match -im1 book.pgm -k1 book.key -im2 scene.pgm -k2 scene.key > out.pgm 
```

所以..

我意识到我需要使用 bash 脚本加速我的过程.. 关联两个以上的图像，即使默认的“匹配”只接受 2 个图像和与该图像相关的 2 个键.. 然后..

这是我的代码..

```
i = 1 
s = ""

for item in *.key
do
    s += "-im$((i)) ${item%.*}.pgm -k$((i++)) $item"
done

./match s > out.pgm 
```

而现在的情景，

根据我的代码，

如果我在第 6 行使用 echo

```
echo "-im$((i)) ${item%.*}.pgm -k$((i++)) $item" 
```

并评论了最后一行

```
#! ./match s > out.pgm 
```

然后我得到了我想要的清单..

但..

如果我完全运行我的代码{基于我评论的答案}，我的终端窗口中就会出现问题

```
Error: Invalid command line argument: -im3 
```

有可以帮助我吗？^^

如果我的英语不好，我很抱歉..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:22:05.970

如果任何`*.key`文件的任何名称包含空格，您在单个字符串中累积命令选项的方法将失败。在`bash`中，最好使用数组。

```
i=1 
s=()

for item in *.key
do
    s+=( "-im$i" "${item%.*}.pgm" "-k$i" "$item" )
    ((i++))
done

./match "${s[@]}" > out.pgm 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:41:17.830

变量赋值中不允许有空格，因此：

```
i=1 
s=

for item in *.key
do
    s+="-im$i ${item%.*}.pgm -k$((i++)) $item"
done

./match "$s" > out.pgm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:33:26.100

在我检查第 32 行的文件 match.c 中的“匹配”代码后，直到 52

> ```
> /* Parse command line arguments and read given files.  The command
>    line must specify two input images and two files of keypoints
>    using command line arguments as follows:
>       match -im1 i1.pgm -k1 k1.key -im2 i2.pgm -k2 k2.key > result.v
> */
> while (++arg < argc) {
>   if (! strcmp(argv[arg], "-im1")) 
> im1 = ReadPGMFile(argv[++arg]);
>   else if (! strcmp(argv[arg], "-im2")) 
> im2 = ReadPGMFile(argv[++arg]);
>   else if (! strcmp(argv[arg], "-k1"))
> k1 = ReadKeyFile(argv[++arg]);
>   else if (! strcmp(argv[arg], "-k2"))
> k2 = ReadKeyFile(argv[++arg]);
>   else
> FatalError("Invalid command line argument: %s", argv[arg]);
> }
> if (im1 == NULL || im2 == NULL || k1 == NULL || k2 == NULL)
>   FatalError("Command line does not specify all images and keys.");
> FindMatches(im1, k1, im2, k2);
> exit(0); 
> ```

在[http://www.cs.ubc.ca/~lowe/keypoints/siftDemoV4.zip](http://www.cs.ubc.ca/~lowe/keypoints/siftDemoV4.zip)

我应该在该代码中添加一些变量或使用集合来补充所有变量..因为我的真实代码是在 Java 中.. (^^)9

无论如何..感谢bash脚本的答案..所有答案都很有用..(^^)v

# php - 如何将 CSS 与 PHP while 循环和表格结合起来？

> ID：15636075
> 
> 赞同：0
> 
> 时间：2013-03-26T11:35:36.007
> 
> 标签：php, css, colors, html-table

我想知道是否有可能以一种简单的方式，当我使用 while 函数调用一堆数据并将它们放入表中但我想使用 CSS 使其成为具有常规背景的一行和具有浅色背景的一行。

希望我说的有道理......

这就是我所拥有的：

```
echo "<style type='text/css'>";
echo "th {background: #CEED5E;}";
echo "</style>";

echo "<table border=1>";
    echo "<tr><th>Product ID</th><th>Title</th><th>Author</th><th>Description</th></tr>";

while ($row = mysqli_fetch_assoc($result))
{
    echo "<tr><td>" . $row["id"] . "</td><td>" . $row["title"] . "</td><td>" . ucwords(strtolower($row["authorFirstName"] . " " . $row["authorLastName"])) . "</td><td>" . $row["description"] . "</td></tr>";

}

echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:46:24.677

```
echo "<style type='text/css'>";
echo ".normalbackground {background-color: white;}";
echo ".coloredbackground {background-color: #CEED5E;}";
echo "</style>";

echo "<table border=1>";
echo "<tr><th>Product ID</th><th>Title</th><th>Author</th><th>Description</th></tr>";

$i = 0;
while ($row = mysqli_fetch_assoc($result))
{
$i++; if (($i % 2) == 0) {$class = "coloredbackground";} else {$class = "normalbackground";};
echo "<tr><td class="$class">" . $row["id"] . "</td><td class="$class">" . $row["title"] . "</td><td class="$class">" . ucwords(strtolower($row["authorFirstName"] . " " . $row["authorLastName"])) . "</td><td class="$class">" . $row["description"] . "</td></tr>";

}

echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:55:58.987

CSS 可以非常轻松地交替颜色表行，而无需在 PHP 代码中执行任何特定操作。

您可以使用`:nth-child`or`:nth-of-type`选择器来完成。

例子：

```
.mytable tr:nth-child(even) {background: #CCC;}
.mytable tr:nth-child(odd) {background: #FFF;} 
```

另请参阅 W3C 的文档：http: [//www.w3.org/Style/Examples/007/evenodd.en.html](http://www.w3.org/Style/Examples/007/evenodd.en.html)

唯一需要注意的是，IE8 或更早版本不支持此功能。但是所有其他常用的浏览器都[支持它就好了](http://caniuse.com/#search=nth-child)，所以如果你可以在没有 IE6/7/8 支持的情况下生活，那么就这样做，你会没事的。

如果您确实需要支持 IE8 或更早版本，那么您有几个选择。

*   显而易见的选择就是离开它，让 IE8 为表格行显示单一颜色。它不会阻止人们使用该网站，所以只需将更好看的东西留给更好的浏览器。
*   但是有一些 javascript hack 可以`:nth-child`为旧版本的 IE 添加对选择器的支持。我推荐的最好的是[http://selectivizr.com/](http://selectivizr.com/)。现在您甚至可以在较旧的 IE 版本中使用高级 CSS。
*   如果您不想这样做，但确实需要在 IE 中显示行颜色，那么您剩下的唯一选择就是向行添加类。只需为奇数行和偶数行配置两个类，并根据需要将类添加到每一行。这可以在页面加载时在您的 PHP 代码或 JS 代码中完成。不过，这不是理想的解决方案；Selectivizr 更好，因为这意味着其他浏览器不会因为旧 IE 缺乏功能而受到影响。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:44:47.137

```
$i = 0;
while ($row = mysqli_fetch_assoc($result))
{
    echo "<tr ".($i%2 == 1) ? 'style="background-color:red': ''."><td>" . $row["id"] . "</td><td>" . $row["title"] . "</td><td>" . ucwords(strtolower($row["authorFirstName"] . " " . $row["authorLastName"])) . "</td><td>" . $row["description"] . "</td></tr>";

$i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:46:24.060

您需要为每个奇数行或偶数行添加一个特定的类，并将您的 CSS 应用于该类，看看下面的代码片段。

```
 echo "<style type='text/css'>
            tr {background: #999999;}
            tr.row_odd {background: #EFEFEF;}
        </style>
        <table border=1>
            <tr>
                <th>Product ID</th>
                <th>Title</th>
                <th>Author</th>
                <th>Description</th>
            </tr>
            ";

$count = 0;
while ($row = mysqli_fetch_assoc($result)) {
    echo "<tr".($count%2?'class="row_odd"':'').">
        <td>" . $row["id"] . "</td>
        <td>" . $row["title"] . "</td>
        <td>" . ucwords(strtolower($row["authorFirstName"] . " " . $row["authorLastName"])) . "</td>
        <td>" . $row["description"] . "</td>
    </tr>";

    $count++;
}

echo "</table>"; 
```

# spring - 部署我的应用程序时出错

> ID：15636076
> 
> 赞同：0
> 
> 时间：2013-03-26T11:35:39.993
> 
> 标签：spring, struts, liferay-6

启动 STRUTS-SPRING 集成时出现致命错误***** ***** 看起来 Spring 侦听器没有为您的 Web 应用程序配置！在 WebApplicationContextUtils 返回一个有效的 ApplicationContext 之前，什么都不会起作用。您可能需要将以下内容添加到 web.xml：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:37:17.560

你有没有尝试添加...

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

到你的 web.xml？错误似乎很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:37:37.167

```
Looks like the Spring listener was not configured for your web app! Nothing will work until WebApplicationContextUtils returns a valid ApplicationContext. You might need to add the following to web.xml: org.springframework.web.context.ContextLoaderListener 
```

没有比这更清楚的了。添加一个`ContextLoaderListener`以`web.xml`在启动时获取应用程序上下文。

你有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T07:21:28.003

实际上似乎这是课堂上的一个新错误

```
com.liferay.portal.tools.deploy.BaseDeployer 
```

从 Liferay 版本 6.1.1 开始，您自己指出的线程（[http://liferay.com/community/forums/-/message_boards/message/15246978](http://liferay.com/community/forums/-/message_boards/message/15246978)）最后指出：http:
[//issues.liferay.com/ browse/LPS-29103](http://issues.liferay.com/browse/LPS-29103)
因此，要么等待下一个版本修复此问题，要么将 BaseDeployer 的修补版本添加到类路径中。

如果您决定选择第二种选择，请确保遵循本指南背后的想法 [http://www.liferay.com/de/group/customer/kbase/-/knowledge_base/article/14079871](http://www.liferay.com/de/group/customer/kbase/-/knowledge_base/article/14079871) [http://www.liferay.com /de/group/customer/kbase/-/knowledge_base/article/14079952](http://www.liferay.com/de/group/customer/kbase/-/knowledge_base/article/14079952)

关于包含修补版本的类的 jar 的位置。否则，您可能会陷入一些类加载问题。

无论如何，在您开始行动之前，请查看 [http://www.liferay.com/de/community/forums/-/message_boards/message/19126821](http://www.liferay.com/de/community/forums/-/message_boards/message/19126821) 有人创建了一个社区版补丁，可以解决包括 LPS-29103 在内的 60 个问题

# android - 通知用户有新应用

> ID：15636080
> 
> 赞同：0
> 
> 时间：2013-03-26T11:35:47.563
> 
> 标签：android, push-notification, google-cloud-messaging, android-notifications

1.  假设，用户已经安装了我的 app1。有一天我开发了一个新的app2。现在我想在通知栏中通知 app1 用户我的新 app2。我想从我的服务器通知我的用户我的新 app2。我该怎么做？我已经阅读了有关 GCM 的信息，但我无法理解。

    [谷歌云消息](http://developer.android.com/google/gcm/gs.html)

2.  除了 GCM，我还在考虑另一种方式。我可以使用会敲我的服务器的警报，如果它找到任何通知，那么它将在通知栏中显示。这是一个好习惯吗？
3.  认为用户也安装了 app2。如果是这样，我不想显示有关 app2 的通知。我怎样才能做到这一点？
4.  我还可以通知用户有关已安装应用程序的更新吗？如果用户单击通知，那么我想将用户带到 Google Play。

任何教程、博客或讨论都会非常有帮助。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:40:31.193

1.  您可以在所有应用程序中集成 GCM 推送通知，并在有新应用程序或可用更新时发送通知。你说你不明白，但你不说你不明白。尝试阅读文档和示例以及第三方教程
2.  使用通知告诉用户是一种很好的做法。使用警报轮询您的服务器是一种很好的做法，只要您不经常这样做。这样做太多会影响用户的电池寿命。
3.  在显示通知之前，您可以使用 PackageManager 检查您的应用是否已经安装。
4.  Google Play 不允许您的应用检查更新，但您可以在上传更新后再次使用 GCM 向应用发送通知。之后，您可以简单地使用 Google Play 启动应用程序的页面。

    ```
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse("market://details?id=com.android.example"));
    startActivity(intent); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:41:23.687

Android Cloud to Device Messaging (C2DM) 这是一个 C2dM 文档。它采用教程的形式，它解释了一切是如何工作的，并提供了示例代码。

[http://www.vogella.de/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.de/articles/AndroidCloudToDeviceMessaging/article.html)

这是另一个教程！Android 推送通知使用谷歌云消息 gcm php 和 mysql [http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:39:22.513

[检查更新](http://www.androidsnippets.com/check-for-updates-once-a-day)此代码段肯定会帮助您。它每天检查一次是否有任何更新。如果它有效，请检查并回复我。

# scala - 如何根据个人资料信息将一个 url 用于多个操作？

> ID：15636081
> 
> 赞同：0
> 
> 时间：2013-03-26T11:35:49.300
> 
> 标签：scala, playframework-2.0

## 语境

我的应用程序中有不同类型的配置文件。（准确地说是三个）。我想为每种类型的配置文件使用相同的 url，并且仍然有不同的操作。例如 ：

*   管理员
*   公司
*   顾客

每种类型的配置文件都有一个显示不同信息的仪表板。我怎样才能`/`为每个配置文件使用路由并且仍然有不同的操作和视图？

## 例子

*   `Admins`继续`Admin.dashboard`并显示用户统计信息、连接统计信息等。
*   `Customers`继续`Customers.dashboard`显示最后的消息，
*   `Compagnies`继续`Compagnies.dashboard`并显示销售统计数据。

每种类型的用户在会话中都用一个标志标识，并通过数据库调用在服务器端确认。

## 解决方案

到目前为止，我所做的是按配置文件类型为路由添加前缀：

```
GET /admin/dashboard     Admin.dashboard
GET /customer/dashboard  Customer.dashboard
GET /compangy/dashboard  Compagny.dashboard 
```

## 问题

是否可以为这 3 个配置文件使用相同的 url（即。`/dashboard`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:58:04.983

如果配置文件应该从 URL 的角度隐藏（不是 RESTful ^^）。您可以在 flash 范围或会话一中隐藏它，以了解流的长度。

现在，对于路由部分，又是另一回事了。由于您可以使用“隐藏”值路由（在`route`文件中），因此您将无法在配置中表示这些路由。

但是，您可以拥有自己的 Action 拦截器来提取配置文件并重定向到正确的仪表板（这可能是快速和最肮脏的方式）......

最后，你不能只使用路径中的配置文件;-) 吗？

```
GET /dashboard           Dashboard.index
GET /admin/dashboard     Admin.dashboard
GET /customer/dashboard  Customer.dashboard
GET /company/dashboard   Company.dashboard 
```

控制器......但如果需要，不会扩展以进行进一步的调用......

```
object Dashboard extends Controller {

  def index = Action { implicit request =>
    request.session.get("profile").map {  p =>
      p match {
        case "admin" => Redirect( routes.Admin.dashboard() )
        case "customer" => Redirect( routes.Customer.dashboard() )
        case "company" => Redirect( routes.Company.dashboard() )
      }
    }.getOrElse { 
      Redirect( routes.Customer.dashboard() )
    } 
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:25:29.003

由于仪表板不是真正的资源，它是一个上下文敏感的东西，我不会像其他帖子建议的那样担心休息。所以，你有你的个人资料：

```
trait Profile
case object AdminProfile extends Profile
case object CustomerProfile extends Profile
case object CompanyProfile extends Profile 
```

而且您有一个从请求标头中提取配置文件的方法：

```
def extractProfile(rh: RequestHeader): Option[Profile] = rh.session.get("profile").map {
  case "admin" => AdminProfile
  case "customer" => CustomerProfile
  case "company" => CompanyProfile
} 
```

您可以在您的操作中执行此操作：

```
def dashboard = Action { req => 
  extractProfile(req).map {
    case AdminProfile => // code here that loads stuff and renders it for admin
    case CustomerProfile => // code here for customer
    case CompanyProfile => // code here for company
  } getOrElse NotFound
} 
```

假设您希望管理员能够访问客户或公司仪表板，因此您已经拥有原始帖子中描述的 3 条路线，因此您可以根据需要转到特定的路线。您可以轻松添加第四个操作，将 /dashboard 简单地委托给适当的操作。例如：

```
def dashboard = EssentialAction { req =>
  extractProfile(req).map {
    case AdminProfile => Admin.dashboard(req)
    case CustomerProfile => Customer.dashboard(req)
    case CompanyProfile => Company.dashboard(req)
  } getOrElse NotFound
} 
```

注意`EssentialAction`这里的使用。如果您想将多个动作组合成一个动作，这是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:18:10.767

我会使用一个`Action`处理路线`/dashboard`并具有三种不同视图的视图，一种用于每种用户。一旦收到请求，他们`Action`将能够知道哪种用户正在拨打电话，并会以类似`Ok(views.html.customerDashboard)`的方式进行响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:41:36.607

假设这些配置文件以某种形式保存，一个简单的机制是有一个字段来标识它们并使用该字段（来自 table(sql)/document(noSQL)）来确定哪些功能应该是活动的或哪些模板要激活利用。

# android - Android 夏洛克搜索视图

> ID：15636083
> 
> 赞同：1
> 
> 时间：2013-03-26T11:35:56.097
> 
> 标签：android, view, android-actionbar, actionbarsherlock

我在操作栏中添加了一个向上按钮 sherlock 通过使用下面

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

但是我怎样才能在后退按钮之后获取文本，如下面的链接所示。（在下面的链接中，书籍是如何在向上按钮后添加的）

[http://developer.android.com/design/patterns/navigation.html](http://developer.android.com/design/patterns/navigation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:42:59.310

您可以使用 设置标题`getSupportActionBar().setTitle("something" or R.string.someId)`，您可以使用 设置标签行或副标题`getSupportActionBar().setSubtitle("something" or R.string.someId)`。您必须确保也调用`getSupportActionBar().setDisplayShowTitleEnabled(true)`它以便实际显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:47:11.633

获取标题文本使用`getSupportActionBar().getTitle();`
设置标题使用`getSupportActionBar().setTitle(title);`或`getSupportActionBar().setTitle(resId);`
更改图标使用`getSupportActionBar().setIcon(resId);`

# android - google-api-v2中的Mapview在android中带有圆角

> ID：15636084
> 
> 赞同：2
> 
> 时间：2013-03-26T11:36:00.960
> 
> 标签：android, rounded-corners, mapfragment

我正在使用 MapFragment 在 android 中编写一个应用程序，所以我希望 mapview 的角变圆我在 xml 文件中创建一个形状并将该形状设置为地图的背景，但我没有得到我想要的结果。地图的角不是圆角的，但背景是圆角的，实际上这就是我的代码所做的，所以任何人都可以给我一个圆角地图视图的问题，任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:28:09.170

我做了一些研究，发现了一个问题。好吧，我创建了一个扩展 LinearLayout（或 framelayout）的视图，这个视图就是这样

```
public class RoundedCornerMap extends LinearLayout{

Bitmap windowFrame;
//this constructer is needed by a tool in explipse to render the layout, you can not define it
public RoundedCornerMap(Context context, AttributeSet attr){
    super(context, attr);
}
//this 
public RoundedCornerMap(Context context, AttributeSet attr, View view) {
    super(context, attr);
    init(view);
}

private void init(View view) {

    view.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.FILL_PARENT));
    view.setClickable(true);
    addView(view);
}

@Override
protected void dispatchDraw(Canvas canvas) {
    super.dispatchDraw(canvas);

    if(windowFrame==null)
        createWindowFrame();// Lazy creation of the window frame, this is needed as we don't know the width & height of the screen until draw time

    canvas.drawBitmap(windowFrame, 0, 0, null);
}

private void createWindowFrame() {

    windowFrame= Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);// Create a new image we will draw over the map
    Canvas osCanvas = new Canvas(windowFrame);// Create a    canvas to draw onto the new image

    RectF outerRectangle = new RectF(0, 0, getWidth(), getHeight());
    RectF innerRectangle = new RectF(10, 10, getWidth()-10, getHeight()-10);

    float radiusCorner = getWidth()/18f;// The angle of your corners

    Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);// Anti alias allows for smooth corners
    paint.setColor(getResources().getColor(Color.BLACK));// This is the color of your activity background
    osCanvas.drawRect(outerRectangle, paint);

    paint.setColor(Color.RED);// An obvious color to help debugging
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_OUT));// A out B http://en.wikipedia.org/wiki/File:Alpha_compositing.svg
    osCanvas.drawRoundRect(innerRectangle, radiusCorner, radiusCorner, paint);
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {

    super.onLayout(changed, l, t, r, b);

    windowFrame=null;// If the layout changes null our frame so it can be recreated with the new width and height
}

} 
```

扩展 Mapfragment 的 Fragment 的 onCreate 方法将是这样的：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    XmlPullParser parser = getResources().getXml(R.layout.rounded_corner_map);
    AttributeSet attr = Xml.asAttributeSet(parser);

    View view=new RoundedCornerMap(myActivity, attr, super.onCreateView(inflater, container, null));
    //ignore about this line below i just want to set a shape to the view
    //view.setBackgroundResource(R.drawable.map_shape);
    return view;
} 
```

我们需要像这样定义xml文件rounded_corner_map：

```
<?xml version="1.0" encoding="utf-8"?>
<com.map.RoundedCornerMap xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
/> 
```

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:42:44.790

查看我在完全相同的主题上提出的这个问题：

[有没有办法为 Mapfragment 实现圆角？](https://stackoverflow.com/questions/14469208/is-there-a-way-to-implement-rounded-corners-to-a-mapfragment)

基本上你需要创建一个适当的 9-patch 图像并使用另一个布局将其应用到它们的地图上`FrameLayout`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T11:44:48.000

将您的地图放在任何布局中，如 LinearLayout/RelativeLayout 或任何布局，并将该形状样式设置为 Layout 作为背景。

我的形状文件

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <corners android:radius="10dp"/>
    <stroke android:color="#aa6632"/>
    <padding android:left="5dp" android:top="5dp"
        android:right="5dp" android:bottom="5dp"/>
</shape> 
```

我的布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="300dp"
        android:layout_height="400dp" 
        android:layout_centerInParent="true"
        android:background="@drawable/test">
    <fragment
        xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/mapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />
    </LinearLayout>

</RelativeLayout> 
```

您也可以使用`FrameLayout`代替`LinearLayout`

# android - 谷歌dfp插页式强制人像模式android

> ID：15636091
> 
> 赞同：0
> 
> 时间：2013-03-26T11:36:17.807
> 
> 标签：android, admob, google-dfp, interstitial

我已将 google dfp 添加到我的 Android 应用程序以使用插页式广告。

我用过`GoogleAdMobAdsSdk-6.3.1.jar`.

> 我的 AndroidManifest.xml
> 
> ```
> <uses-sdk
>     android:maxSdkVersion="17"
>     android:minSdkVersion="14"
>     android:targetSdkVersion="17" />
> 
> <uses-permission android:name="android.permission.INTERNET" />
> <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
> 
> <application
>     android:allowBackup="true"
>     android:icon="@drawable/ic_launcher"
>     android:label="@string/app_name"
>     android:theme="@style/AppTheme" >
>     <activity
>         android:name=".SplashActivity"
>         android:screenOrientation="portrait"
>         android:theme="@android:style/Theme.Black.NoTitleBar" >
>         <intent-filter>
>             <action android:name="android.intent.action.MAIN" />
> 
>             <category android:name="android.intent.category.LAUNCHER" />
>         </intent-filter>
>     </activity>
> 
>     <!-- Ads Activity -->
>     <activity
>         android:name="com.google.ads.AdActivity"
>         android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
>         android:screenOrientation="portrait" >
>     </activity> ........ 
> ```
> 
> 我的 SplashActivity

```
public class SplashActivity extends Activity implements AdListener{

         /** Interstitial ad*/  
          private DfpInterstitialAd interstitialAd;         

@Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
            setContentView(R.layout.activity_splash);

 interstitialAd = new DfpInterstitialAd(SplashActivity.this, MY_INTERSTITIAL_UNIT_ID);
 AdRequest adRequest = new AdRequest();
 interstitialAd.loadAd(adRequest);
 interstitialAd.setAdListener(SplashActivity.this); 
```

但是当我改变设备的方向时，它的插页式也会改变她的方向。我想强制间隙方向只是纵向。

# java - 当我删除/重命名相应的 .java 文件时，是否可以告诉 maven-compiler-plugin 删除 .class 文件？

> ID：15636094
> 
> 赞同：3
> 
> 时间：2013-03-26T11:36:36.683
> 
> 标签：java, spring, maven, ant, inversion-of-control

我阅读了官方文档`mvn help:describe -DgroupId=org.apache.maven.plugins -DartifactId=maven-compiler-plugin -Ddetail`：

*   [http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html)

并且没有找到暗示自动删除`.class`不再存在的`.java`文件的文件的选项。

我也没有为 Ant 找到这样的选项：

*   [http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)

清理项目然后在类重命名或将其移动到另一个包后再次构建很烦人......

如果我不做这个 IoC 框架检测 bean 绑定的重复匹配。

**UPDTE**我不可能使用 maven-compiler-plugin 是否有任何插件可以检测单独的`.class`文件并删除它们？

我希望每次运行时都获得*一致*`mvn package`的构建并保持构建的增量性质（因此避免`mvn clean`）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:38:40.860

如果您遵循 Maven 约定并且您的代码在下面`src/main/java`，`src/test/java`那么您将分别将其编译为`target/classes`和`target/test-classes`. 话虽如此，`maven-clean-plugin`从您的`target`目录中删除所有内容。

考虑以下：

```
mvn clean package 
```

这将删除所有已编译的类并重建它们。

显然，当您进行涉及移动/重命名类的重构时，您需要进行干净的编译，以确保没有任何剩余。

编译器插件并不意味着处理编译以外的任何事情。Maven 的插件被严格地分成独立的功能单元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:47:16.917

据我说，除了做 maven-clean 之外没有其他解决方案。否则 .class 文件将不会被删除。如果您使用的是 Eclipse 或 STS，那么您可以将您的 Tomcat 配置为在每次资源更改后自动发布项目。

这可能会帮助你。

# node.js - 如何在 Node.js 中使用 http.request 限制响应长度

> ID：15636095
> 
> 赞同：10
> 
> 时间：2013-03-26T11:36:43.167
> 
> 标签：node.js, http

因此，在这段（简化的）代码中，当有人访问我的节点服务器时，我向另一个网站发出 GET 请求并将 HTML 页面标题打印到控制台。工作正常：

```
var http = require("http");
var cheerio = require('cheerio');

var port = 8081;
s = http.createServer(function (req, res) {
var opts = {
    method: 'GET',
    port: 80,
    hostname: "pwoing.com",
    path: "/"
};
http.request(opts, function(response) {
    console.log("Content-length: ", response.headers['content-length']);
    var str = '';
    response.on('data', function (chunk) {
        str += chunk;
    });
    response.on('end', function() {
        dom = cheerio.load(str);
        var title = dom('title');
        console.log("PAGE TITLE: ",title.html());
    });
}).end();
res.end("Done.");
}).listen(port, '127.0.0.1'); 
```

但是，在实际应用中，用户可以指定要点击的 URL。这意味着我的节点服务器可能正在下载 20GB 的电影文件或其他任何内容。不好。content-length 标头也没有用于停止此操作，因为它不是由所有服务器传输的。那么问题来了：

**我如何告诉它在收到前 10KB 之后停止 GET 请求？**

干杯!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-26T11:57:26.707

读取足够的数据后，您可以中止请求：

```
 http.request(opts, function(response) {
    var request = this;
    console.log("Content-length: ", response.headers['content-length']);
    var str = '';
    response.on('data', function (chunk) {
      str += chunk;
      if (str.length > 10000)
      {
        request.abort();
      }
    });
    response.on('end', function() {
      console.log('done', str.length);
      ...
    });
  }).end(); 
```

*这将在大约*10.000 字节时中止请求，因为数据以各种大小的块的形式到达。

# java - Java：如何找出 Web Socket 断开的原因/原因

> ID：15636096
> 
> 赞同：1
> 
> 时间：2013-03-26T11:36:43.543
> 
> 标签：java, jsp, websocket, jetty

我们在我们的应用程序中使用基于套接字的实现，下面是负责完成工作的类。

```
public class TestWebSocket  implements WebSocket, WebSocket.OnTextMessage 
{
// Overriden onConnect
// Overriden onDisconnect 
// Overriden onMessage
// Overriden onClose
} 
```

这工作正常，意味着它能够接收**数据**并将其发送到**前端**进行显示。

我的问题是，每当有一个`onDisconnect` 方法被调用时，我们都不确定用户是否有目的地关闭了浏览器（因此调用了 on Disconnect ）

或者

**由于网络问题**或任何问题等`onDisconnect`其他原因而发生。

 **请让我知道如何区分由于网络问题导致的断开连接或由于用户故意关闭浏览器而发生的断开连接？我们还能在这个类的 onDisconnect 方法中识别出一些东西吗？

提前致谢。**

# msbuild - 我可以使用 msbuild 更新非 xml 配置文件吗？

> ID：15636098
> 
> 赞同：2
> 
> 时间：2013-03-26T11:36:55.640
> 
> 标签：msbuild, configuration-files

我有一个旧样式格式的配置文件（无 xml）

```
dbpath=C:\Program Files\Mongodb\Data\Db
journal=true
smallfiles=true 
```

根据我发布的系统，我也想更新和更改 = 之后的值

MSbuild可以做到这一点吗？你能告诉我怎么做吗？

我知道如何使用 xml poke for xml 配置文件来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:04:08.627

您可以设置模板系统并使用 msbuild 扩展包中的 detokenise。请参阅此处的文档：[http ://www.msbuildextensionpack.com/help/4.0.6.0/Index.html](http://www.msbuildextensionpack.com/help/4.0.6.0/html/348d3976-920f-9aca-da50-380d11ee7cf5.htm)

这意味着您不必一直像上面那样编写自定义目标

所以你有：

```
 <ItemGroup>
      <Transforms Include="$(ReleasePath)\Yourtemplates\**"/>
    </ItemGroup>

    <MSBuild.ExtensionPack.FileSystem.Detokenise
      TaskAction="Detokenise"
      TargetFiles="%(Transforms.FullPath)"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:59:58.393

编写自己的 MSBuild 任务，

[http://msdn.microsoft.com/en-us/library/t9883dzc(v=VS.90).aspx](http://msdn.microsoft.com/en-us/library/t9883dzc(v=VS.90).aspx)

然后在您的 MSBuild 脚本中引用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T11:52:56.363

没有什么比提出问题来帮助您回答更重要了！

我要这样做

```
<Target Name="UpdateConfig">
    <CreateProperty Value="..\config.cfg">
         <Output TaskParameter="Value" PropertyName="path" />
    </CreateProperty>

    <Message Text="LogFilePath=$(LogFilePath)"/>

    <FileUpdate Files="$(path)"
        Regex="logpath=.*"
        ReplacementText="logpath=$(LogFilePath)" />
</Target> 
```

这不是我所说的优雅，但我对 msbuild 没有太多了解！

有更好的建议吗？

# c++ - 关于 const_cast<> 的行为

> ID：15636100
> 
> 赞同：0
> 
> 时间：2013-03-26T11:36:56.697
> 
> 标签：c++, const-cast

我写了一个小问题来检查 const 数据成员上 const_cast 的行为。

```
using namespace std;

     class myString{
         public:
                 myString(char * str)
                 {
                         p=str;
                 }
                 const char * getString(){
                         return p;
                 }
         private:
                 const char *p;
 } ;

int main()
{
        char *p=(char*)malloc(8);
        cin>>p;
        myString *m= new myString(p);
        char *s =const_cast<char*>(m->getString());
        s[6]='y';
        cout<<s<<endl;
        return 0;
} 
```

运行此程序后，我将输出作为“yogendra”（一个 8 个字母的字符串）。我得到的输出是“yogendya”现在我的怀疑。通过 const_cast<> 我们可以覆盖数据成员本身的行为，因为这里的字符串是 const char* 在转换之后我仍然可以修改它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:46:03.083

你已经准确地描述了`const_cast`它的用途——它允许你`const`从某些东西中移除并修改它。由你决定不要滥用这种权力。:-)

（在您的情况下，这不适用，但请注意，您可能会通过使用导致崩溃`const_cast`- 例如：

```
const char *c = "Hello";
char *s = const_cast<char*>(c);
s[0] = 'h'; 
```

可能会崩溃，因为编译器可以将字符串文字放入只读内存。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:50:45.987

是的，您可以使用`const_cast<>`这种方式，它不会是未定义的行为，因为`const char*`您的类中指向的对象确实是非 const 类型`char*`。但小心点：。C++ 标准。§7.1.​5.1/4 说

> 除了可以修改任何声明为 mutable (7.1.1) 的类成员外，任何在 const 对象的生命周期 (3.8) 期间修改它的尝试都会导致未定义的行为

const_cast 的安全使用是将 const 从 const 引用转换为非 const 对象：当有非 const 对象并且您有 const ref 时，您可以安全地从 this 中转换 const

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:49:07.257

如果你说

```
char *s =const_cast<char*>(m->getString()); 
```

然后你基本上从指针中删除“const”，并声明你`s`是一个指向char的指针，它是一个可写的字符串。所以下一行

```
s[6]='y'; 
```

很好。要保留 const，您应该声明`s`为 const 指针

```
const char *s = m->getString(); 
```

在这种情况下，您将无法覆盖常量字符串（错误：分配只读位置）。我想这就是你想要的？将`const_cast`简单地添加/删除`const`和在你的情况下，删除它。

# ios - 在特定日期触发 UILocalNotification

> ID：15636106
> 
> 赞同：1
> 
> 时间：2013-03-26T11:37:04.817
> 
> 标签：ios, objective-c, nsdate, uilocalnotification, nscalendar

我想`UILocalNotification`在特定日期触发 a。如果我使用此代码：

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorian components:NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit fromDate:[NSDate date]];

[components setHour:4];
[components setMinute:0];

NSDate *fireDate = [gregorian dateFromComponents:components]; 
```

如果现在是下午 3 点，这可以正常工作，但在例如下午 5 点时就不行了。

如何将通知触发日期设置为“下一个下午 4 点”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:22:27.707

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [gregorian components:NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit fromDate:[NSDate date]];

[components setHour:4];
[components setMinute:0];

NSDate *fireDate = [gregorian dateFromComponents:components];
 NSLog(@"Fire date : %@",fireDate);// Today 4pm is already passed. So you wont get notification 

// You need to check if the time is already passed
if ([fireDate compare:[NSDate date]] == NSOrderedAscending)
{
    // Schedule it for next day 4pm
    components.day = components.day+1;
    fireDate = [gregorian dateFromComponents:components];
}
NSLog(@"Fire date : %@",fireDate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:15:30.440

尝试以下 24 小时格式的代码：-

```
NSDate *date = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: date];
[components setHour:16];
[components setMinute:0];
[components setSecond:0];

NSDate *newDate = [gregorian dateFromComponents: components];
[gregorian release];    

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
localNotif.fireDate = newDate;
localNotif.alertBody = [NSString stringWithFormat:@"Alarm for time : %@",newDate];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
[localNotif release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-17T07:20:50.837

在**swift 3 - 4**中，您可以将其用于特定时间的本地通知。

```
 func scheduleLocal() {

        let dateComponents = DateComponents(year: 2019, month: 1, day: 17, hour: 10, minute: 20)
        let yourFireDate = Calendar.current.date(from: dateComponents)

        let notification = UILocalNotification()
        notification.fireDate = yourFireDate
        notification.alertBody = "Hey you! Yeah you! Swipe to unlock!"
        notification.alertAction = "be awesome!"
        notification.soundName = UILocalNotificationDefaultSoundName
        notification.userInfo = ["CustomField1": "w00t"]
        UIApplication.shared.scheduleLocalNotification(notification)

        guard let settings = UIApplication.shared.currentUserNotificationSettings else { return }

        if settings.types == .none {
            let ac = UIAlertController(title: "Can't schedule", message: "Either we don't have permission to schedule notifications, or we haven't asked yet.", preferredStyle: .alert)
            ac.addAction(UIAlertAction(title: "OK", style: .default, handler: nil))
            present(ac, animated: true, completion: nil)
            return
        }

    } 
```

# java - 如何使用 Ant 脚本运行 main() 方法？

> ID：15636107
> 
> 赞同：4
> 
> 时间：2013-03-26T11:37:06.333
> 
> 标签：java, ant

我只想`main()`通过在eclipse ant 视图中双击我的ant 任务来运行java 类的方法。我的问题是，我不知道如何准确地编写 ant 文件。我的 ant 文件应该是`analyzeDatabase.xml`.

我尝试过这样的事情，但总是失败：

```
<?xml version="1.0" ?>
<project name="DBAnalyzer" default="run" basedir=".">
    <target name="run" description="runs dbanalyzer">
        <java classname="DBAnalyzer">
            <arg value="-h"/>
        </java>
    </target>
</project> 
```

![在此处输入图像描述](../Images/1c144b8915b010370bf5617c3a329c68.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T11:43:33.097

更改`<java classname="DBAnalyzer">`为完全限定名称。并且不要忘记仔细检查您的类路径。

```
<java classname="com.prostep.openpdm.db.analyzer.DBAnalyzer">
    <arg value="-h"/>
    <classpath>
        <pathelement path="${your.java.class.path}"/>
    </classpath>
</java> 
```

关于 Ant Java 任务的完整描述在这里： [http ://ant.apache.org/manual/Tasks/java.html](http://ant.apache.org/manual/Tasks/java.html)

# macos - Qt + cocoa：架构 x86_64 的未定义符号

> ID：15636108
> 
> 赞同：1
> 
> 时间：2013-03-26T11:37:12.043
> 
> 标签：macos, cocoa, qt

我在 Qt 中结合可可代码，不幸的是出现了未找到符号的错误。我正在使用 MAC OSX 10.8.2 和 Qt Creator 来构建我的代码。

应用控制器.h

```
#ifndef APPCONTROLLER_H
#define APPCONTROLLER_H

// Import the Cocoa and ImageCaptureCore headers
#include <Cocoa/Cocoa.h>
#include <ImageCaptureCore/ImageCaptureCore.h>

// Create a public interface for the controller
@interface appController : NSObject

// Create delegates for the device browser and camera device classes.
<ICDeviceBrowserDelegate, ICCameraDeviceDelegate> {

// Create an instance variable for the device browser
// and an array for the cameras the browser finds
ICDeviceBrowser * mDeviceBrowser;
NSMutableArray * mCameras;

// Define Interface Builder outlets for two
// array controllers -- one for cameras,
// one for the chosen camera's files
IBOutlet NSArrayController * mCamerasController;
IBOutlet NSArrayController * mMediaFilesController;

// Define IB outlets for the tableviews used to
// display the cameras and the chosen camera's contents
IBOutlet NSTableView * mCameraContentTableView;
IBOutlet NSTableView * mCamerasTableView;
}

// Cameras are properties of the device browser stored in an array
@property(retain) NSMutableArray* cameras;

// Create a boolean to indicate whether the camera has images to download
@property(readonly) BOOL canDownload;
@end

#endif // APPCONTROLLER_H 
```

要复制到剪贴板，请将视图切换到纯文本模式

应用控制器.mm

```
#include "appcontroller.h"

// The camera device returns core graphics image refs,
// convert them to NSImages for table view
@interface NSImageFromCGImageRef: NSValueTransformer {}
@end
@implementation NSImageFromCGImageRef
+ (Class)transformedValueClass { return [NSImage class]; }
+ (BOOL)allowsReverseTransformation { return NO; }
- (id)transformedValue:(id)item
{
if ( item )
return [[[NSImage alloc] initWithCGImage:(CGImageRef)item size:NSZeroSize] autorelease];
else
return nil;
} @end
@implementation appController

// synthesize the getters and setters for camera properties
@synthesize cameras = mCameras;

// Main task -- on launch
- (void)applicationDidFinishLaunching:(NSNotification*)notification
{
mCameras = [[NSMutableArray alloc] initWithCapacity:0];

// Get an instance of ICDeviceBrowser
mDeviceBrowser = [[ICDeviceBrowser alloc] init];
// Assign a delegate
mDeviceBrowser.delegate = self;
// Look for cameras in all available locations
mDeviceBrowser.browsedDeviceTypeMask = mDeviceBrowser.browsedDeviceTypeMask
| ICDeviceTypeMaskCamera
| ICDeviceLocationTypeMaskLocal
| ICDeviceLocationTypeMaskShared
| ICDeviceLocationTypeMaskBonjour
| ICDeviceLocationTypeMaskBluetooth
| ICDeviceLocationTypeMaskRemote;
// Start browsing for cameras
[mDeviceBrowser start];

}

// Stop browser and release it when done
- (void)applicationWillTerminate:(NSNotification*)notification {
mDeviceBrowser.delegate = NULL;
[mDeviceBrowser stop];
[mDeviceBrowser release];
[mCameras release];
}

// Method delegates for device added and removed
//
// Device browser maintains list of cameras as key-value pairs, so delegate
// must call willChangeValueForKey to modify list
- (void)deviceBrowser:(ICDeviceBrowser*)browser didAddDevice:(ICDevice*)addedDevice moreComing:(BOOL)moreComing
{
if ( addedDevice.type & ICDeviceTypeCamera )
{
addedDevice.delegate = self;

// implement manual observer notification for the cameras property
[self willChangeValueForKey:@"cameras"];
[mCameras addObject:addedDevice];
[self didChangeValueForKey:@"cameras"];
}
}

- (void)deviceBrowser:(ICDeviceBrowser*)browser didRemoveDevice:(ICDevice*)device moreGoing:(BOOL)moreGoing
{
device.delegate = NULL;

// implement manual observer notification for the cameras property
[self willChangeValueForKey:@"cameras"];
[mCameras removeObject:device];
[self didChangeValueForKey:@"cameras"];
}

- (void)didRemoveDevice:(ICDevice*)removedDevice
{
[mCamerasController removeObject:removedDevice];
}

// Check to see if the camera has image files to download
- (void)observeValueForKeyPath:(NSString*)keyPath ofObject:(id)object change:(NSDictionary*)change context:(void*)context
{
if ( [keyPath isEqualToString:@"selectedObjects"] && (object == mMediaFilesController) )
{
[self willChangeValueForKey:@"canDownload"];
[self didChangeValueForKey:@"canDownload"];
}
}

- (BOOL)canDownload
{
if ( [[mMediaFilesController selectedObjects] count] )
return YES;
else
return NO;
}

// Download images
// (Add a download button in interface builder -- use boolean to enable button)
- (void)downloadFiles:(NSArray*)files
{
NSDictionary* options = [NSDictionary dictionaryWithObject:[NSURL fileURLWithPath:[@"~/Pictures" stringByExpandingTildeInPath]] forKey:ICDownloadsDirectoryURL];

for ( ICCameraFile* f in files )
{
[f.device requestDownloadFile:f options:options downloadDelegate:self didDownloadSelector:@selector(didDownloadFile:error:options:contextInfo:) contextInfo:NULL];
}
}

// Done downloading -- log results to console for debugging
- (void)didDownloadFile:(ICCameraFile*)file error:(NSError*)error options:(NSDictionary*)options contextInfo:(void*)contextInfo
{
NSLog( @"didDownloadFile called with:\n" );
NSLog( @" file: %@\n", file );
NSLog( @" error: %@\n", error );
NSLog( @" options: %@\n", options );
NSLog( @" contextInfo: %p\n", contextInfo );
}
@end 
```

要复制到剪贴板，请将视图切换到纯文本模式

和 ObjectiveC-Integrate.pro

```
QT += core gui multimedia

TARGET = ObjectiveC-Integrate
TEMPLATE = app

SOURCES += main.cpp\
mainwindow.cpp

HEADERS += mainwindow.h

FORMS += mainwindow.ui

CONFIG -= app_bundle
CONFIG += x86_64
CONFIG -= i386
LIBS += -lssl -lcrypto
LIBS += -framework AppKit

OBJECTIVE_HEADERS += \
appcontroller.h

OBJECTIVE_SOURCES += \
appcontroller.mm 
```

要复制到剪贴板，在谷歌上进行大量搜索后将视图切换到纯文本模式并查看其他帖子我无法在我的机器上构建我的代码。当我在 main.cpp 中包含上述 COCOA 标头时，就会出现数千个错误（@stray）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T10:22:02.323

您不能在 C++ 文件 (main.cpp) 中包含 Objective C 头文件 (appcontroller.h)。C++ 不理解 Objective C。

您需要使用此答案中给出的方法之一：[Calling Objective-C method from C++ method?](https://stackoverflow.com/questions/1061005/calling-objective-c-method-from-c-method)

# ios - 根据表中出现的内容重新排序 MutableArray

> ID：15636109
> 
> 赞同：0
> 
> 时间：2013-03-26T11:37:15.210
> 
> 标签：ios, uitableview, ios6, nsmutablearray, nsmutabledictionary

我有一个存储图像和一些字符串的字典（**NSMutableDictionary** ）数组（**NSMutableArray ）。**

 **```
@interface SelectViewController () {
    NSMutableArray *pictureArray;
    NSMutableDictionary *dict1;
    UIImage *key1; // UIImage
    NSString *key2; // file name
    NSString *key3; // file path
    NSString *key4; // description
    NSString *key5; // order    
} 
```

我想让用户重新排序行。

```
- (BOOL)tableView:(UITableView *)tableview canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    UIImage *image = [[pictureArray objectAtIndex:indexPath.row] objectForKey:key1];
    cell.imageView.image = image;
    NSString *filename = [[pictureArray objectAtIndex:indexPath.row] objectForKey:key2];
    cell.textLabel.text = filename;
    cell.showsReorderControl = YES;
    return cell;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
    NSLog(@"From %i to %i",fromIndexPath.row,toIndexPath.row);
} 
```

因此，每个表格行上都会出现一个灰色符号，用户可以对行重新排序。我的问题是如何根据表格上显示的内容重新排序数组（pictureArray）？我将这个数组传递给另一个类。数组的出现顺序还没有改变。

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:41:58.843

```
- (void) tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)targetIndexPath
{
    NSUInteger sourceIndex = [sourceIndexPath row];
    NSUInteger targetIndex = [targetIndexPath row];
    if (sourceIndex != targetIndex)
    {
        NSString *item = [pictureArray objectAtIndex:sourceIndex];
        [pictureArray removeObject:item];
        [pictureArray insertObject:item atIndex:targetIndex];
    }
} 
```

**就放这个****

# python - 在 python 中使用文件输入或正则表达式仅替换“文件第二行中的最后一个单词”

> ID：15636114
> 
> 赞同：0
> 
> 时间：2013-03-26T11:37:24.773
> 
> 标签：python, regex, file-io

假设我的文件包含（只读）：

```
 123.1.1.1      qwerty
          123.0.1.1      timmy
          (some text) 
```

我想换`timmy`一个新词，但我不应该在代码中的任何地方使用“timmy”这个词，因为用户可以随时更改它。

这在 python 中是否可能“转到特定行并替换最后一个单词”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:26:25.230

一般来说，遍历文件的行是很好的，因此它也适用于大文件。

我的方法是

1.  逐行读取输入
2.  分割每一行
3.  如果在第二行，则替换第二个单词
4.  再次将零件连接在一起
5.  写入输出文件

我将每一行拆分并再次加入，以便在单词之间的空格方面保持一定的一致性。如果您不关心它，请保持`line`不变，除非`idx == 1`. 然后你也可以`break`在第 2 行 ( ) 之后循环`idx==1`。

```
import shutil

input_fn = "15636114/input.txt"
output_fn = input_fn + ".tmp"

replacement_text = "hey"

with open(input_fn, "r") as f_in, open(output_fn, "w+") as f_out:
    for idx, line in enumerate(f_in):
        parts = line.split()
        if idx==1:
            parts[1] = replacement_text
        line = "    ".join(parts) + "\n"
        f_out.write(line)

shutil.move(output_fn, input_fn) 
```

我写入一个临时输出文件（为了在发生异常时保持输入文件不受影响），最后我用输出文件（`shutil.move`）覆盖输入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:08:16.963

这个功能会做你想要实现的

```
def replace_word(filename, linenum, newword):
    with open(filename, 'r') as readfile:
        contents = readfile.readlines()

    contents[linenum] = re.sub(r"[^ ]\w*\n", newword + "\n", contents[linenum])

    with open(filename, 'w') as file:
        file.writelines(contents); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:21:23.683

不幸的是，在 python 中，你不能简单地更新文件而不重写它。您必须执行以下操作。

假设您有一个名为`abcd.txt`如下的文件。

### abcd.txt

```
123.1.1.1      qwerty
123.0.1.1      timmy 
```

那么你可以做这样的事情。

```
 with open('abcd.txt', 'rw+') as new_file:
    old_lines = new_file.readlines() # Reads the lines from the files as a list
    new_file.seek(0) # Seeks back to index 0
    for line in old_lines:
        if old_lines.index(line) == 1: # Here we check if this is the second line
            line = line.split(' ')
            line[-1] = 'New Text' # replace the text
            line = ' '.join(line)
        new_file.write(line) # write to file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:43:02.350

例如：

```
text = """123.1.1.1      qwerty
          123.0.1.1      timmy
          (some text)
"""

import re
print re.sub(r'^(.*\n.*)\b(\w+)', r'\1hey', text) 
```

结果：

```
 123.1.1.1      qwerty
      123.0.1.1      hey
      (some text) 
```

随意询问您是否需要解释。

# vba - 使用 VBA 导入多个数据透视表

> ID：15636117
> 
> 赞同：0
> 
> 时间：2013-03-26T11:37:30.293
> 
> 标签：vba, excel, excel-2007

我正在尝试自动导入在 excel 中形成数据透视表的 xml 数据。要导入数据，从一张纸读取/复制链接，并将结果报告在另一张纸上。这种方法的唯一问题是我手动执行此操作。

这个宏怎么能

```
Sub retrieveXML2()
'
' pivotdataImport Macro
'

'
    Selection.Copy
    Sheets("data").Select
    ActiveWorkbook.XMLIMport url:= _
        "http://api.sba.gov/license_permit/all_by_state/al.xml", ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range("$A$2")
    Rows("2:2").Select
    Selection.EntireRow.Hidden = True
    Range("A4").Select
    Selection.End(xlDown).Select
    Range("A29").Select
    Sheets("url").Select
    Range("A3").Select
    Selection.Copy
    Sheets("data").Select
    ActiveWorkbook.XMLIMport url:= _
        "http://api.sba.gov/license_permit/all_by_state/ak.xml", ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range("$A$29")
    Rows("29:29").Select
    Selection.EntireRow.Hidden = True
    Range("Table2[[#Headers],[count]]").Select
    Selection.End(xlDown).Select
    Range("A59").Select
    Sheets("url").Select
    Range("A4").Select
    Selection.Copy
    Sheets("data").Select
    ActiveWorkbook.XMLIMport url:= _
        "http://api.sba.gov/license_permit/all_by_state/az.xml", ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range("$A$59")
    Rows("59:59").Select
    Selection.EntireRow.Hidden = True
    Range("A60").Select
    Selection.End(xlDown).Select
    Range("A85").Select
    Sheets("url").Select
    Range("A5").Select
    Selection.Copy
    Sheets("data").Select
    ActiveWorkbook.XMLIMport url:= _
        "http://api.sba.gov/license_permit/all_by_state/ar.xml", ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range("$A$85")
    Rows("85:85").Select
    Selection.EntireRow.Hidden = True
    Range("A86").Select
    Selection.End(xlDown).Select
    Range("A114").Select
    Sheets("url").Select
    Range("A6").Select
    Selection.Copy
    Sheets("data").Select
    ActiveWorkbook.XMLIMport url:= _
        "http://api.sba.gov/license_permit/all_by_state/ca.xml", ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range("$A$114")
    Rows("114:114").Select
    Selection.EntireRow.Hidden = True
    Range("A115").Select
    Selection.End(xlDown).Select
    Range("A141").Select
End Sub 
```

是否只需对任意数量的 url 执行这些步骤，而无需将它们实际放置在需要的位置？

我的另一个宏

```
Public Sub retrieveXML()

  Application.ScreenUpdating = False
  Application.EnableEvents = False
  Application.Calculation = xlManual

    Dim lngRow As Long
    Dim strXML As String
    Dim ct As Integer, XMLMap

    Const maxXMLDel = 1
    lngRow = 2

    Do While Cells(lngRow, 1) <> ""
        strXML = Cells(lngRow, 1)
        ActiveWorkbook.XMLIMport url:=strXML, ImportMap:=Nothing, Overwrite:=True, Destination:=Range("$B$" & lngRow)
        lngRow = lngRow + 1
        For Each XMLMap In ActiveWorkbook.XmlMaps
                  XMLMap.Delete
        Next
      Loop

    Application.ScreenUpdating = True
    Application.EnableEvents = True
    Application.Calculation = xlAutomatic

End Sub 
```

做类似的事情；然而，它是为只能填充一行的 xml 数据设计的。因此，如果我尝试应用于形成数据透视表的 xml 数据，当它转到下一个 url 时，我会被告知数据已经存在于单元格中。那么如何使第二个宏执行录制的宏的操作呢？

我不知道桌子的长度，但需要它放在前一张桌子的下面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:20:23.567

在工作簿的某处创建包含 url 和目标范围的列表，例如在 A 和 B 列的工作表“数据链接”中。

```
Dim rInput As Range

Set rInput = Sheets("datalinks").Range("A2:B2") 
Do While not IsEmpty(rInput)

    '.... YOUR CODE

    ActiveWorkbook.XMLIMport url:= rInput.Cells(1,1).Value2 _ 
        , ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range(rInput.Cells(1,2).Value2)

    '.... YOUR CODE

    Set rInput = rInput.Offset(1,0)
Loop 
```

# yii - 来自 CHtml::ListData 的 checkBoxList 键值

> ID：15636119
> 
> 赞同：0
> 
> 时间：2013-03-26T11:37:34.497
> 
> 标签：yii

$colors - 颜色模型：'colorName' 和 colorCode(FFFFFF) ('code'=>'FFFFFF', 'caption'=>'colorname')

```
 echo $form->checkBoxList($model, 'color', CHtml::listData($colors,'code','caption'),
        array(
            'template'=>'{label}{input}',
            'separator'=>'',
        )
    ); 
```

{label} == 'colorname'
{input} - 复选框输入

我如何在 checkboxList 模板中使用“代码”？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:18:36.723

正如@soju所说，不可能同时包含两者`colorname`，`colorcode`因为替换的唯一序列`template`是`{label}`和`{input}`。但是，如果只有常见的颜色，即白色、灰色、蓝色等是颜色选项，您可以只使用名称而不是 css 中的颜色代码。

```
echo $form->checkBoxList($model, 'color', CHtml::listData($colors,'code','caption'),
    array(
        'template'=>'<div><i style="background-color:{label}"></i>{label}{input}</div>',
        'separator'=>'',
    )
); 
```

# java - 有没有办法在 GWT 应用程序的客户端调用自定义的 Aysnc 回调函数？

> ID：15636120
> 
> 赞同：0
> 
> 时间：2013-03-26T11:37:35.947
> 
> 标签：java, gwt

有没有办法在 GWT 应用程序的客户端调用自定义的 Aysnc 回调函数？

根据我的担心，我需要在客户端调用我的自定义回调函数，而不是默认的 AsyncCallback 函数。

可能吗.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:54:25.007

是的，你可以这样做

```
import com.google.gwt.user.client.rpc.AsyncCallback;

public interface MycustomisedCallBack extends AsyncCallback<T> {

   @Override
    public void onFailure(Throwable caught);
   @Override
    public void onSuccess(T result);

    public void onmyMethod();
} 
```

并将您 的传递`MycustomisedCallBack`给 RPC。

```
rpcService.rpcMethod(new MycustomisedCallBack() {

            @Override
            public void onmyMethod() {
                // TODO Auto-generated method stub

            }

            @Override
            public void onFailure(Throwable caught) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onSuccess(T result) {

            };
        }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T16:10:49.487

首先，您需要创建自己的自定义 AsyncCallback 类，例如：

```
import com.google.gwt.user.client.rpc.AsyncCallback;

public class MyAsyncCallback<T> implements AsyncCallback<T> {

    public void onFailure(Throwable arg0) {
        // default onFailure method, invoking your method
        myOnFailure(arg0);
    }

    private void myOnFailure(Throwable arg0) {
        // Your code here
    }

    public void onSuccess(T arg0) {
        // default onSuccess method invoking your method
        myOnSuccess (arg0);
    }

    private void myOnSuccess(T arg0) {
        // Your code here
    }
} 
```

此类将从被调用的服务接收任何结果类型，将对 onSuccess 和 onFailure 方法的调用委托给您自己的方法（myOnSuccess 和 myOnFailure），您可以在其中放置代码。

下一步是使用新的 MyAsyncCallback 类来调用 rpc 服务。例如：

```
myService.sendString("foo", new MyAsyncCallback<String>()); 
```

在此示例中，被调用的方法 (sendString) 接收一个字符串，如果您想构建一个通用回调管理器，您的自定义方法必须处理正确的类型处理。另请注意，您不需要在调用时实现回调方法。

# logging - 在控制台 jboss 7 上启用日志调试

> ID：15636123
> 
> 赞同：1
> 
> 时间：2013-03-26T11:37:46.413
> 
> 标签：logging, jboss7.x

我需要在控制台上启用调试消息，我正在使用 jboss 7。我相信我应该配置我的 Standalone.xml。

```
 <subsystem xmlns="urn:jboss:domain:logging:1.1">
        <console-handler name="CONSOLE">
            <level name="DEBUG"/>
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
        </console-handler>
        <periodic-rotating-file-handler name="FILE">
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
            <file relative-to="jboss.server.log.dir" path="server.log"/>
            <suffix value=".yyyy-MM-dd"/>
            <append value="true"/>
        </periodic-rotating-file-handler>
        <logger category="com.arjuna">
            <level name="WARN"/>
        </logger>
        <logger category="org.apache.tomcat.util.modeler">
            <level name="WARN"/>
        </logger>
        <logger category="sun.rmi">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb.config">
            <level name="ERROR"/>
        </logger>
        <logger category="org.jboss.weld">
            <level name="INFO"/>
        </logger>
        <root-logger>
            <level name="DEBUG"/>
            <handlers>
                <handler name="CONSOLE"/>
                <handler name="FILE"/>
            </handlers>
        </root-logger>
    </subsystem> 
```

我需要能够使用 logger.debug() 在控制台上显示调试消息。

谢谢

# c# - 使用 Lambda 表达式从 Lambda 表达式中进行选择

> ID：15636129
> 
> 赞同：1
> 
> 时间：2013-03-26T11:37:55.717
> 
> 标签：c#, lambda, expression

我有两种表达方式：

```
 public static Expression<Func<TSource, TReturn>> Merge<TSource, TSource2, TReturn>(
      Expression<Func<TSource, TSource2>> foo1
      Expression<Func<TSource2, TReturn>> foo2)
  {
      // What to do?
  } 
```

如何将它们合并为一个表达式，以便将第一个表达式的输出用作第二个表达式的输入？我对这些很陌生，到目前为止，它只是例外。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:46:20.693

这在很大程度上取决于哪些提供商需要使用它。有些人会很好：

```
public static Expression<Func<TSource, TReturn>>
     Merge<TSource, TSource2, TReturn>(
  Expression<Func<TSource, TSource2>> foo1,
  Expression<Func<TSource2, TReturn>> foo2)
{
    return Expression.Lambda<Func<TSource, TReturn>>(
      Expression.Invoke(foo2, foo1.Body),
      foo1.Parameters);
} 
```

但是，其他人（EF）不会。您还可以使用访问者重写表达式树以内联表达式：

```
public static Expression<Func<TSource, TReturn>>
      Merge<TSource, TSource2, TReturn>(
  Expression<Func<TSource, TSource2>> foo1,
  Expression<Func<TSource2, TReturn>> foo2)
{
    var swapped = new SwapVisitor(
        foo2.Parameters.Single(), foo1.Body).Visit(foo2.Body);
    return Expression.Lambda<Func<TSource, TReturn>>(
        swapped, foo1.Parameters);
}

class SwapVisitor : ExpressionVisitor
{
    private readonly Expression from, to;
    public SwapVisitor(Expression from, Expression to)
    {
        this.from = from;
        this.to = to;
    }
    public override Expression Visit(Expression node)
    {
        return node == from ? to : base.Visit(node);
    }
} 
```

这将适用于所有提供商。

# java - 寻找自动创建 Web 应用程序并将其部署到单个 tomcat 服务器的最佳方法

> ID：15636130
> 
> 赞同：-1
> 
> 时间：2013-03-26T11:37:57.560
> 
> 标签：java, tomcat, deployment

我有如下要求，

我需要自动创建 Web 应用程序并将其部署到单个 tomcat 服务器中。

您能否就以下问题提出建议：

1\. 如果我部署一个 web 应用程序 tomcat 会自动重新加载，它会影响其他已经部署的 web 应用程序吗？

2\. 要部署新的 Web 应用程序，我选择热部署，因为我需要将其自动化，我直接将其复制到 webapps 文件夹。这个过程是否正确？最好的方法是什么？

3\. tomcat 将容纳的应用程序数量将如何计算，我的意思是基于哪些因素，我将使用大量 RAM。

任何机构都可以向我解释做到这一点的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:50:06.490

这里一般考虑链接到这种问题：

*   [使用构建部署到生产的最简单方法](https://stackoverflow.com/questions/9279441/the-simplest-way-to-deploy-to-production-with-builds/10964696#10964696)
*   [热代码使用 Maven 部署 tomcat](https://stackoverflow.com/questions/4542108/hot-code-deploy-tomcat-with-maven)
*   [将大型 *.war 部署到 tomcat 的最佳方式](https://stackoverflow.com/questions/3185057/best-way-to-deploy-large-war-to-tomcat)
*   [http://www.avajava.com/tutorials/lessons/how-do-i-deploy-a-maven-web-application-to-tomcat.html](http://www.avajava.com/tutorials/lessons/how-do-i-deploy-a-maven-web-application-to-tomcat.html)

给你直截了当的答案：

> 1.  如果我部署一个 web 应用程序 tomcat 会自动重新加载，它会影响其他已经部署的 web 应用程序吗？

不，它不会使用 tomcat 或 cargo 插件。

> 2\. 要部署新的 Web 应用程序，我选择热部署，因为我需要将其自动化，我直接将其复制到 webapps 文件夹。这个过程是否正确？最好的方法是什么？

是的，再次使用 cargo 或 tomcat 插件。您的方式是可以接受的，但不是最佳的（处理部署或订单问题）

> 3\. 如何计算tomcat将容纳的应用程序数量，我的意思是基于哪些因素，我将使用大量RAM

我不确定是否理解。您的意思是：您的 Tomcat 将能够支持多少个应用程序？这取决于每个人在内存/会话中使用或拥有多少对象，乘以会话数。没有一般的规则来计算它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:53:41.680

对于第 1 点和第 2 点，您需要查看 tomcat 中的各种热部署选项。根据您选择的解决方案，行为会有所不同。简单地将应用程序复制到 webapps 目录可能无法正常工作。我建议使用一些 HTTP 客户端库通过您的代码使用 tomcat 管理器。在您的服务器上保持启用之前，请务必阅读 tomcat 管理器的文档。还有其他技术——你可以在谷歌上搜索“Tomcat Hot Deployment”并找出答案

> 3\. tomcat 将容纳的应用程序数量将如何计算，我的意思是基于哪些因素，我将使用大量 RAM。

这取决于您的应用程序以及它们消耗的内存量。在计算您需要多少 RAM 时，请考虑每个已连接用户消耗的内存和 tomcat 自己的内存开销。

# gwt - 如何阻止我的 GWT CellList 项目丢失其 CSS 样式？

> ID：15636132
> 
> 赞同：0
> 
> 时间：2013-03-26T11:38:02.310
> 
> 标签：gwt, styles, celllist

我正在使用以下方法单独设置 CellList 项目的样式：

```
cellList.getRowElement(0).addClassName("style-name-A");
cellList.getRowElement(1).addClassName("style-name-B"); 
```

这反映在我运行应用程序时。但是，当我单击任何行项目时，所有项目都会丢失这些样式并恢复为 CellList 的标准样式（在我的 CellListResources css 文件中定义）。我怎样才能阻止这种行为？

我通过 ListDataProvider 向 CellList 添加项目；使用 MultiSelectionModel 的子类来处理选择，并将我自己的 CellListResources 传递给 CellList 构造函数以定义基本样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:55:59.030

发生这种情况是因为选择重新呈现了该行，因此丢失了您对此元素所做的任何更改。

我为此找到的解决方法是在单个单元格级别处理它。

在实践中，我将每个单元格包装成一个“StyleAwareCellDecorator”，它创建一个具有给定样式的跨度。然后我根据一些逻辑决定应用什么样式。在您的情况下，它可能基于 context.getIndex() 。

```
public class StyleAwareCellDecorator<C> extends AbtractCell<C> {

    private final Cell<C> decorated;
    private final MyLogic logic;

    public StyleAwareCellDecorator( Cell<C> decorated, MyLogic logic ) {
        this.decorated = decorated;
        this.logic = logic;
    }

    void render(Context context, C value, SafeHtmlBuilder sb) {
        String theCssClass = myLogic.decideWhatStyleToUse( context.getIndex() );
        sb.append( ... some tag with class="theCssClass" ... );
        delegated.render( context, value, sb );
        sb.append( ... close tag ... );
    }
} 
```

有了这个设施，您可以将您的代码替换为：

```
MyLogic myCellStyleLogic;
myCellStyleLogic.useStyleForRowIndex( "style-name-A", 0 );
myCellStyleLogic.useStyleForRowIndex( "style-name-B", 1 ); 
```

假设将其存储在地图中

# asp.net - 如何在 MS Chart 中设置 X 轴和 Y 轴的比例？

> ID：15636138
> 
> 赞同：2
> 
> 时间：2013-03-26T11:38:13.453
> 
> 标签：asp.net, .net, mschart

我需要使 X 轴和 Y 轴在使用 MS-Chart 创建的图表的中间相交。

X 和 Y 轴的比例需要根据从 Web 服务返回的数据点进行设置。如何使用 MS Chart 以编程方式进行操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:52:10.993

好的，有一些属性可以设置与图表相关的所有比例的最小值、最大值和间隔。它们位于以下位置：

```
chart1.ChartAreas(ChartAreaName).AxisX.Mimimum
chart1.ChartAreas(ChartAreaName).AxisX.Maximum
chart1.ChartAreas(ChartAreaName).AxisX.Interval
chart1.ChartAreas(ChartAreaName).AxisY.Mimimum
chart1.ChartAreas(ChartAreaName).AxisY.Maximum
chart1.ChartAreas(ChartAreaName).AxisY.Interval 
```

您可以将它们与图表的尺寸结合使用，以显示您想要的任何比例。

# jenkins - 詹金斯删除我的旧版本

> ID：15636141
> 
> 赞同：2
> 
> 时间：2013-03-26T11:38:19.173
> 
> 标签：jenkins

我的 Jenkins 服务器删除了旧版本，我无法查看构建历史。在配置工作中：旧版本必须可用。我不知道发生了什么。

但是在服务器上有工作，其中 biulds 没有删除并且配置是相同的。

请帮我。

詹金斯：版本。1.492

配置： ![在此处输入图像描述](../Images/6316a00c3e219fd38e0ddf2b73ebe8b5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:21:17.323

问题解决了，我升级了 Jenkins 服务器（1.508），现在所有版本都保留了。谢谢！！！

# android - 当我将在线文本放入 TextView 时应用程序崩溃

> ID：15636142
> 
> 赞同：1
> 
> 时间：2013-03-26T11:38:19.060
> 
> 标签：android, web, textview

运行此代码时，我的应用程序崩溃：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_biografie);
        setTitle("Biografie");

        try {
            // Create a URL for the desired page
            URL url = new URL("http://xxx.nl/api/biografie.php?dataid=998");

            // Read all the text returned by the server
            BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
            String str;
            while ((str = in.readLine()) != null) {
                // str is one line of text; readLine() strips the newline character(s)
                TextView text = (TextView)findViewById(R.id.biografieText);
                text.setText(str);
            }
            in.close();
        } catch (MalformedURLException e) {
        } catch (IOException e) {
        }
    } 
```

**这是我的 Logcat 输出：**

> I/Process(30127)：发送信号。PID：30127 SIG：9

我该怎么做才能将网络上的文本放入 TextView？这是一个 PHP 脚本，输出带有传记。

在此致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:51:41.413

这将是一个更好的做法，使用异步任务

```
AsyncronousTask atask = new AsyncronousTask();          
atask.execute("ur url here");
String res=atask.get();

//Asyncronous taks class goes like

public class AsyncronousTask extends AsyncTask<String, Void, String> {
String response;
Activity c;
//private ProgressDialog dialog;
//String title,msg;

@Override
protected String doInBackground(String... urls) {
    response = "";
    for (String url : urls) {
        DefaultHttpClient client = new DefaultHttpClient();

        HttpGet httpGet = new HttpGet(url);
        try {
            HttpResponse execute = client.execute(httpGet);
            InputStream content = execute.getEntity().getContent();
            BufferedReader buffer = new BufferedReader( new InputStreamReader(content));
            String s = "";
            while ((s = buffer.readLine()) != null) {
                response += s;
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return response;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:44:25.003

使用此代码，您将获得响应以返回此方法调用，然后您可以在 textView 上设置它

公共静态字符串 HitServerGET（字符串 URL）{

```
 String result = null;

    InputStream is = null;

    StringBuilder sb = null;

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(URL);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection" + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        sb = new StringBuilder();
        sb.append(reader.readLine() + "\n");
        String line = "0";

        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }

        is.close();
        result = sb.toString();

    } catch (Exception e) {
        Log.e("log_tag", "Error converting result " + e.toString());
    }
    return result; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:57:27.193

在 onPostExecute 中，您可以在 TextView 中设置文本。
我重用了 Saad Khokhar 的 HitServerGET 函数

这段代码可以放在你的 onCreate 中。

```
final URL url = new URL("http://xxx.nl/api/biografie.php?dataid=998");
new AsyncTask<String, String, String>()
{
  String text=null;         
  @Override
  protected String doInBackground(String... params)
  {
    text = HitServerGET(url)
  }

  @Override
  protected void onPostExecute(String ret)
  {
    ((TextView)findViewById(R.id.biografieText)).setText(text);
  }
}.execute(); 
```

# android - 跟踪 Android 手机的省电方式

> ID：15636143
> 
> 赞同：3
> 
> 时间：2013-03-26T11:38:20.187
> 
> 标签：android, iphone, gps

我有一队货车，我正试图创造一种廉价的追踪方式。

我需要能够请求更新他们的位置，并跟踪他们的移动，这样我才能回去查看他们的路线。

我已经尝试过应用程序，但它们似乎将电池寿命降低到一个不稳定的水平。我正在寻找一种更有效的方式。

应用程序的哪个部分会使用电池？通过 GPS 获取位置或通过 3G 发送信息？

如果是后者，我可以跟踪它们并且每 20 分钟更新一次，但保留手机上的路线以便在一天结束时更新。如果是前者，我只需要更新差距较大的位置（每 30 分钟一次，除非查询）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:48:03.800

通过 GPS 获取用户位置和使用 3G 网络发送数据都非常耗电。

您很可能会增加更新之间的时间，也可以增加向您发送位置的时间。

您还可以集成 GCM，这将允许您手动向设备发送通知（假设它们已安装 Google Play）并仅在那时请求位置更新。

另外，既然这是您的车队，您是否考虑过添加一个使用车载电池为手机充电的便携式移动充电器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:52:47.560

如果启用，大部分电池会消耗显示器。
在 iphone 4 上，我可以将 8 小时的 GPS（每秒一个位置）记录到文件系统中。
最好的解决方案是将电源线连接到汽车中的手机，就像所有跟踪系统一样。
此外，它还取决于位置序列数据包的压缩。使用标准 Web 服务，数据量可能是二进制（专有）协议的 100 倍。不幸的是，我无法告诉您从 GSM/3G 发送使用到 GPS 的功耗关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:32:39.330

GPS 肯定会消耗大量电池——我的手机在不打开 GPS 的情况下一次充电可以运行超过 24 小时。如果我在跑步后打开我的运动追踪应用程序，电池将在大约 10 小时后耗尽。如果我将应用程序配置为自动实时更新我在网络上的进度，电池将只能持续大约 3 或 4 小时。

根据跟踪所需的粒度，您可以每 15 - 30 分钟打开一次 GPS 以获取 GPS 定位，然后将其关闭。另外，我认为地理定位精度有不同程度，如果你能忍受快速定位的分辨率（它使用手机信号塔，如果可以使用 wifi 来粗略估计位置），你将使用更少的电池。

# doctrine-orm - DQL - 选择多个字段，但只获取一个 - 从结果集中隐藏字段

> ID：15636147
> 
> 赞同：5
> 
> 时间：2013-03-26T11:38:27.763
> 
> 标签：doctrine-orm, dql

给定以下 DQL 查询：

```
SELECT
    p,
    (p.views * 0.1) + (p.likes * 0.9) as ratingPhoto
FROM
    AppBundle:Photo p
ORDER BY
    ratingPhoto DESC 
```

我的结果集如下所示：

```
array (size=14)
  0 => 
    array (size=2)
      0 => object(Photo)
      'ratingPhoto' => string '1.42' (length=4)
  1 => 
    array (size=2)
      0 => object(Photo)
      'ratingPhoto' => string '1.31' (length=4)
... 
```

是否有任何 DQL 功能，以便我只检索`Photo`对象并从结果集中排除其他选定的字段？这是我期望的结果：

```
array (size=14)
  0 => object(Photo)
  1 => object(Photo)
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T12:32:54.683

您正在寻找的是`ORDER`子句和[`HIDDEN`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#select-expressions)关键字中的计算值。

通常，您必须执行以下操作：

```
SELECT
    a,
    b,
    (SOME_COMPUTATION()) AS computed
FROM
    ...
ORDER BY
    computed ASC 
```

要从结果集中“隐藏”`computed`值，从 Doctrine ORM 2.3 开始，您可以使用以下`HIDDEN`子句：

```
SELECT
    a,
    b,
    (SOME_COMPUTATION()) AS HIDDEN computed
FROM
    ...
ORDER BY
    computed ASC 
```

这就是您的 DQL 的样子：

```
SELECT 
    p,
    (p.views * 0.1) + (p.likes * 0.9) AS HIDDEN ratingPhoto
FROM
    AppBundle:Photo p
ORDER BY
    ratingPhoto DESC 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-26T15:25:56.083

您可以将 DQL 重写为：

```
$dql = "SELECT p
FROM AppBundle:Photo p
ORDER BY ((p.views * 0.1) + (p.likes * 0.9)) DESC"; 
```

# html - 如何在 phonegap 列表中显示带有标题的图像？

> ID：15636148
> 
> 赞同：1
> 
> 时间：2013-03-26T11:38:31.063
> 
> 标签：html, list, cordova

我的任务是在 phonegap 应用程序中显示带有标题的图像

我成功显示标题列表是可以的，代码为

```
 $('#listview').append('<li id='+ids[i]+'><a    onclick="myFunction1('+i+')">'+titles[i]+'</a></li>'); 
```

上面的代码只显示标题，但我有一个包含图像列表的数组，我需要显示带有标题的图像

我试过这段代码它不起作用

```
 $('#listview').append('<li id='+ids[i]+'><a    onclick="myFunction1('+i+')">'+images[i]+''+titles[i]+'</a></li>'); 
```

如何将此标题设置为中间而不像帖子图片？！[在此处输入图片描述][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:33:14.940

根据对您问题的评论，您需要这样的东西

```
var images = ["4cing.com/mobile_app/uploads/pageicon/friendship.png"];
var titles = ["test"];

var imagesLength = images.length;  //cache the length property for performance
for (var i = 0; i < imagesLength ; i++) {
    $('#listview')
        .append('<li><a><img src="http://' + images[i] + '">' + titles[i] + '</a></li>');
} 
```

垂直对齐文本的 CSS 将是

```
#listview a { display: block; }
#listview a img { vertical-align: middle; } 
```

# html - HTML 链接不起作用

> ID：15636150
> 
> 赞同：4
> 
> 时间：2013-03-26T11:38:35.393
> 
> 标签：html, hyperlink

我目前正在创建一个网站，由于某种原因，链接到另一个网页的简单任务无法正常工作。当我尝试链接我得到的东西时

> 未找到此网页。没有找到该网址的网页：C:\me\me\me etc etc”。

我要做的就是将作品链接到我网页上的另一个页面。这是我的代码：

```
<a href="C:\\users\rob\website\page.html">page link</a> 
```

我也刚刚尝试链接谷歌和亚马逊并得到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:39:36.060

```
<a href="file://C:\users\rob\website\page.html"> page link </a> 
```

此外，如果页面托管在**webserver上，****则无法**加载本地资源。这将是一个安全问题，因此是被禁止的。`file://`

 **在这种情况下，您的脚本控制台还将包含：

```
Not allowed to load local resource: file:///C:/users/rob/website/page.html 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T11:40:28.003

您没有关闭链接上的报价。尝试`<a href="URL goes here" > page link </a>`

例如，`<a href="http://www.google.com/" > Google </a>`

另外，请记住“C:...”不是网址，如果您想在本地测试，请尝试使用`file://`前缀。

例如，`<a href="file://C:\me\me\me\page.html" > My Page</a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:40:56.333

你忘了第二个“

尝试这个：

```
<a href="C:\users\rob\website\page.html"> page link </a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:42:29.180

尝试这个，

```
 <a href="file:///C|\users\rob\website\page.html" > page link < /a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-26T13:04:08.323

尝试`<a href = "../foldername/filename" > </a>`

../ 定义根。当您使用此样式时，它会从根目录搜索文件位置。**

# css - 清除级联浮动元素中的浮动

> ID：15636153
> 
> 赞同：1
> 
> 时间：2013-03-26T11:38:36.097
> 
> 标签：css, css-float

在级联浮动元素布局中；当我尝试清除内部元素的浮动时，它会扩展元素高度以覆盖外部浮动元素的大小。这是示例：

```
<div class="right">
    right
</div>
<div class="left">
    <div class="top">
        <span>top</span>
        <div class="right-float-inside">right-float-inside</div>
        <div class="clear-float"></div>
    </div>
    left
</div> 
```

对应的css

```
div {
    padding: 5px;
}
.top {
    background-color: #ee0;
}
.left {
    background-color: #e00;
    margin-right: 200px;
}
.right {
    background-color: #0e0;
    float: right;
    height: 80px;
    width: 200px;
}
.right-float-inside {
    height: 50px;
    float: right;
    background-color: #00e;
}
.clear-float {
    clear: both;
} 
```

![输出](../Images/69d7a4a3590286f1660ec5385e933efc.png)

这是现场示例：http: [//jsfiddle.net/UUpaP/4/](http://jsfiddle.net/UUpaP/4/)

我期望得到的是在蓝色 div 之后结束的黄色 div。我得到的是黄色 div 在绿色之后结束。

如何限制清除范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:58:20.853

你需要的是`overflow: hidden`你的`.left`元素。[工作示例](http://codepen.io/anon/pen/IKybC)

# .net - 更改wpf中的按钮边框厚度？

> ID：15636160
> 
> 赞同：3
> 
> 时间：2013-03-26T11:39:09.927
> 
> 标签：.net, wpf, button, border, thickness

为什么Button的边框粗细没有变化？

如果我将边框厚度更改为 1 或 100，则无关紧要。一样的。我想使用**Style**更改它，而不是**Custom Template**。

```
 <Window x:Class="GUI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <Style x:Key="newYellowButton" TargetType="{x:Type Button}">
        <Setter Property="Width" Value="100"/>
        <Setter Property="Height" Value="100"/>
        <Setter Property="Background">
            <Setter.Value>
                <RadialGradientBrush Center="0.5,0.5" GradientOrigin="0.5,0.5" RadiusX="0.5" RadiusY="0.5" SpreadMethod="Pad" ColorInterpolationMode="SRgbLinearInterpolation">
                    <GradientStop Color="#FFEEEE3B" Offset="0.5" />
                    <GradientStop Color="#FFF0E49A" Offset="1" />
                </RadialGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="BorderThickness" Value="9"/>
        <Setter Property="BorderBrush" Value="Blue" />
        <Setter Property="Padding" Value="-4"/>
    </Style>
</Window.Resources>
<Grid>
    <Button Style="{StaticResource newYellowButton}" Content="Ok"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:50:54.373

您可以通过更改[按钮的 ControlTemplate](http://msdn.microsoft.com/en-us/library/ms753328%28v=VS.90%29.aspx)来做到这一点。将这些样式、画笔和...复制到您的资源字典中，然后更改您想要的值。

要更改边框厚度，请找到以下代码并进行所需的更改：

```
...
<Border 
      x:Name="Border"  
      CornerRadius="2" 
      BorderThickness="1"                             //CHANGE THIS VALUE
      Background="{StaticResource NormalBrush}"
      BorderBrush="{StaticResource NormalBorderBrush}">
      <ContentPresenter 
        Margin="2"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        RecognizesAccessKey="True"/>
</Border>
... 
```

# google-apps-script - 有没有办法更改 Google 网站的 html head 部分？

> ID：15636165
> 
> 赞同：0
> 
> 时间：2013-03-26T11:39:14.790
> 
> 标签：google-apps-script, google-sites

我想在我的 Google 网站中包含一些来自 ShareThis.com 的分享按钮。ShareThis 创建了此代码以包含在 head 部分中：

```
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript" src="http://s.sharethis.com/loader.js"></script> 
```

为了让它进入我的 Google-Site，我用 Google-Apps-Script 编写了这个程序并执行了它：

```
function myFunction() {
  var headers = {"A": "<script type=\"text/javascript\">var switchTo5x=true;</script>",
                 "B": "<script type=\"text/javascript\" src=\"http://w.sharethis.com/button/buttons.js\"></script>",
                 "C": "<script type=\"text/javascript\" src=\"http://s.sharethis.com/loader.js\"></script>"};

  UrlFetchApp.fetch("sites.google.com/site/mysitename/home",
                {"headers": headers, "method": "post"});
} 
```

没有出现错误消息，但它不会在站点的源代码中显示任何结果。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-16T04:33:07.307

Google 不允许编辑 head 部分。免费服务有其局限性。耻辱。我还想添加一些脚本。

# c# - 在 set_range 之后调用 set_style

> ID：15636170
> 
> 赞同：2
> 
> 时间：2013-03-26T11:39:23.617
> 
> 标签：c#, ms-word, styles, interop

我正在尝试以编程方式更新 Word 文档。我选择一个单元格，然后更新其范围的文本，最后，我想在该范围的特定部分调用 set_style。但是，这样做时，样式适用于整个范围。

这是一段代码来演示我目前在做什么：

```
Cell targetCell = _myWordDocument.Tables[1].Cell(i, 4);
targetCell.Range.Text = "Here is the text I will update later on";

//position before inserting the text 
int startFormat = targetCell.Start +12;  
//end position
int endFormat = targetCell.End - 23;
//new range    
Range formatMe = targetCell;             
formatMe.SetRange(startFormat, endFormat);
// this works just fine
formatMe.Bold = 1;                          
//this, however does not as it applies to the whole text
//not only the sub range I defined above
object style_name = "Heading 1"; // or Tag or whatever...
formatMe.set_Style(ref style_name); 
```

有人有我可以使用的提示吗？

# vim - [[ 和 ]] 在 vi m 中做了什么？

> ID：15636173
> 
> 赞同：3
> 
> 时间：2013-03-26T11:39:30.603
> 
> 标签：vim, vi

在vim（和vi）中，如果我处于命令模式并且我键入`[[`它似乎会转到文件的开头，如果我键入`]]`它似乎会转到文件的末尾。但我认为这是文件命令`gg`的开始/结束，`G`所以做一些不同的事情？ `[[``]]`

我的猜测是，`[[`并且`]]`会转到下一个实例，但我不知道是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:45:50.137

尝试`:help ]]`：

> `]]`[count] 节向前或到第一列中的下一个“{”。

延伸阅读：`:help section`。

专业提示：了解如何查找命令和导航内置`:help`; 它很全面，并提供了许多提示。你不会像其他编辑器那样快速学习 Vim，但如果你致力于持续学习，它将证明是一个非常强大和高效的编辑器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-23T20:03:12.803

我从来没有发现默认行为`[[`和`]]`有用的直到我看到这个提示`:help section`

```
If your '{' or '}' are not in the first column, and you would like to use "[["
and "]]" anyway, try these mappings:

   :map [[ ?{<CR>w99[{
   :map ][ /}<CR>b99]}
   :map ]] j0[[%/{<CR>
   :map [] k$][%?}<CR> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-26T11:44:46.173

从`:help [[`,

```
[[          [count] sections backward or to the previous '{' in
            the first column.  |exclusive|
            Note that |exclusive-linewise| often applies. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T11:42:31.457

AFAIK，

```
[[ : jump to function start
]] : jump to function end 
```

编辑：我还找到了一份备忘单，其中定义了：

```
(  [count] : sentences backward
)  [count] : sentences forward
{  [count] : paragraphs backward
}  [count] : paragraphs forward
]] [count] : sections forward or to the next '{' in the first column. When used after an operator, then the '}' in the first column.
][ [count] : sections forward or to the next '}' in the first column
[[ [count] : sections backward or to the previous '{' in the first column
]] [count] : sections backward or to the previous '}' in the first column 
```

# c++ - boost::variant 访问者选择了错误的重载

> ID：15636175
> 
> 赞同：7
> 
> 时间：2013-03-26T11:39:46.323
> 
> 标签：c++, boost, boost-variant, apply-visitor

为什么会打印出以下内容`"A boolean!"`？我意识到正在进行一些奇怪的转换，因为如果我明确地构造一个 std::string 我会得到正确的行为。但是为什么`visitor::operator()(bool)`在以下情况下选择重载解析呢？

```
#include <boost/variant.hpp>
#include <string>

typedef boost::variant<bool, std::string> type;

struct visitor : public boost::static_visitor<> {
    void operator()(bool b) const {
        std::cout << "A boolean!" << std::endl;
    }

    void operator()(const std::string& str) const {
        std::cout << "A string!" << std::endl;
    }
};

int main(int argc, char* argv[]) {
    type t = "I am a string";
    t.apply_visitor(visitor());

    return 0;
} 
```

我正在运行 Visual Studio 2012（CTP 或不给出相同的结果）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T11:45:23.657

您正在`t`使用 (衰减到的类型) 进行初始化`const char*`。将指针转换`bool`为标准转换，而转换`const char*`为`std::string`用户定义的转换。标准转换优先。

# php - ZF2 - 验证失败时在输入元素下不显示 zend 验证器消息

> ID：15636176
> 
> 赞同：3
> 
> 时间：2013-03-26T11:39:46.520
> 
> 标签：php, zend-framework2

默认情况下，我不想在验证失败时在输入元素下显示 Zend 验证器消息但我需要根据我的要求提供 Zend 验证消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T15:17:56.513

抱歉，您的回答不是您最初问题的答案！

您的标题要求提供一个通用解决方案，如何在整个应用程序中禁用验证消息，解决方案是：

```
<?php
namespace YourApp;

use Zend\Form\View\Helper\FormRow;

class Module
{
    public function getViewHelperConfig()
    {
        return array(
            'factories' => array(
                'formRow' => function($sm) {
                    $helper = new FormRow();
                    $helper->setRenderErrors(false);
                    return $helper;
                }
            ),
        );
    }
?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T12:31:42.057

我得到了解决方案。解决方案在这里。

我正在使用

```
<?php echo $this->formRow($form->get('username')); ?> 
```

现在我已将其替换为

```
<?php echo $this->formElement($form->get('username')); ?> 
```

为了根据我对视图的要求获取错误消息，我使用了

```
echo $this->formElementErrors($form->get('username')); // Errors must be capital letter 
```

感谢所有回复。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T12:15:37.633

第一：不要使用`formCollection()`-ViewHelper

第二：使用`formRow()`-ViewHelper 渲染表单并将第三个参数设置为 false。你可以在这里看到这个：[`Zend\Form\View\Helper\FormRow#157`](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/Helper/FormRow.php#L157)

```
echo $this->formRow($element, $labelPosition, $renderErrors); 
```

**`$element`**应该是要呈现的表单元素，即：`$this->form->get('elementName')`

**`$labelPosition`**如果需要默认值，可以简单地设置为 null

**`$renderErrors`**是一个布尔值，指示是否应呈现错误

# sql - 创建触发器以了解谁在 SQL Server 表中进行了更改

> ID：15636180
> 
> 赞同：-4
> 
> 时间：2013-03-26T11:40:14.227
> 
> 标签：sql, sql-server, sql-server-2008, triggers

我有一张桌子`Products`和一张`Products_audit`有两列`User`和`Date`.

你能帮我写一个表触发器`Products`来处理这个要求吗：

当有人要修改 中的数据时`Products`，我需要触发器将`User`和`Date`插入 中`Products_audit`，获取修改数据的当前用户名和发生此操作的当前日期。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T14:25:03.183

尝试这个：

```
CREATE TRIGGER [Trigger_name] ON  [DBO].[Products] 
   AFTER UPDATE, INSERT
AS 
BEGIN
    SET NOCOUNT ON;
    INSERT INTO ProductsAudit
    SELECT suser_sname(),getdate() FROM inserted
END 
```

# objective-c - IOS - 以编程方式在 UIView 容器内居中 UIScrollView 并带有 Autolayout 问题

> ID：15636186
> 
> 赞同：0
> 
> 时间：2013-03-26T11:40:29.290
> 
> 标签：objective-c, uiview, ios6, uiscrollview, autolayout

我正在尝试复制 safari 页面滚动视图，它的框架比 iPhone 屏幕略窄。所以根据一些建议，我将滚动视图（450x280 点）放在“clipView”（450x320 点）内。

```
//viewController methods
-(void)viewDidAppear:(BOOL)animated{

CGRect pagingScrollViewFrame = self.clipview.frame;
pagingScrollViewFrame.size.width = 280;

NSLog(@"clipview h:%f e w:%f",self.clipview.frame.size.height,self.clipview.frame.size.width);
NSLog(@"scrollview h:%f e w:%f",pagingScrollViewFrame.size.height,pagingScrollViewFrame.size.width);
NSLog(@"center clipview :%@",NSStringFromCGPoint(self.clipview.center));

pagingScrollView = [[UIScrollView alloc] initWithFrame:pagingScrollViewFrame];
NSLog(@"center scrollview:%@",NSStringFromCGPoint(pagingScrollView.center));
pagingScrollView.contentSize = CGSizeMake(pagingScrollViewFrame.size.width *3, pagingScrollViewFrame.size.height);

pagingScrollView.clipsToBounds = NO;
pagingScrollView.center = self.clipview.center;

    [clipview addSubview:pagingScrollView];
} 
```

![在此处输入图像描述](../Images/4eaac9fb456118548487bc53e08671ce.png)

如您所见，我的滚动视图的中心向下移动了 20 点（**{140, 232}**）。我的视图 Container 的中心位于**{160, 232}**。

**我哪里错了？我应该玩什么类似内容偏移属性的东西？这个问题与自动布局有关吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:57:14.663

问题出在这一行：

```
pagingScrollView.center = self.clipview.center; 
```

应该：

```
pagingScrollView.center = CGPointMake(CGRectGetMidX(self.clipview.bounds), CGRectGetMidY(self.clipview.bounds)); 
```

将超级视图的中心分配给其子视图是常见的错误。它们位于不同的坐标系中。

# browser - 基于浏览器的游戏幕后花絮

> ID：15636187
> 
> 赞同：0
> 
> 时间：2013-03-26T11:40:30.070
> 
> 标签：browser

我对 ogame、travian 等基于浏览器的游戏如何在幕后工作有疑问。在这些游戏中，每个玩家都有自己的星球或城市，那里拥有铁、木头、石头或其他任何资源。每个星球/城市也都有相应的建筑来生产该资源。现在我的主题是，游戏在服务器上的运行情况如何？我无法想象是否在服务器上每秒对 10000 名玩家进行计算，每秒更新他们所在城市的状态，即使只有 100 名玩家在线。我认为在给定时间后有一个计算城市状态的函数，例如：

```
City calculateCityState(City databaseCity, long msTime); 
```

作为第一个参数，您从数据库中传递一个带有时间戳的城市状态，作为第二个参数，您希望在您的城市拥有资源和其他随时间变化的东西之后传递时间。如果您从数据库、luberjack 生产中知道例如您当前的木材数量，您可以在 msTime 之后轻松计算所有资源。你怎么看待这件事 ？我对吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:55:30.213

好吧，这是一个设计选择，绝对有意义的是，如果您处于离线状态，它不会每秒都这样做。另一方面，您拥有的资源可能会影响其他用户。例如。用户希望看到拥有最多资源的玩家，以便他可以攻击他。这意味着这些数字可能是在某些间隔计算的，例如。每 10 分钟一次。

# android - 制作自定义Android警报以进行提醒

> ID：15636193
> 
> 赞同：4
> 
> 时间：2013-03-26T11:40:51.593
> 
> 标签：android

我正在制作药物提醒应用程序，在该应用程序中，我包含了添加有关医生预约提醒的功能。在我的应用程序中，用户可以设置他/她自己的日期和时间，并且在该日期和时间应该触发警报..请帮助我..我已经参考了这个线程.. [如何在 Android 中设置警报？](https://stackoverflow.com/questions/6520403/how-to-set-alarm-in-android)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:46:55.163

使用以下步骤。

**对于日历中的提醒：**

1.创建一个事件：

```
// get calendar
Calendar cal = Calendar.getInstance();     
Uri EVENTS_URI = Uri.parse(getCalendarUriBase(this) + "events");
ContentResolver cr = getContentResolver();

// event insert
ContentValues values = new ContentValues();
values.put("calendar_id", 1);
values.put("title", "Reminder Title");
values.put("allDay", 0);
values.put("dtstart", cal.getTimeInMillis() + 11*60*1000); // event starts at 11     minutes from now
values.put("dtend", cal.getTimeInMillis()+60*60*1000); // ends 60 minutes from now
values.put("description", "Reminder description");
values.put("visibility", 0);
values.put("hasAlarm", 1);
Uri event = cr.insert(EVENTS_URI, values); 
```

2.然后创建提醒并将其使用代码设置为：

```
// reminder insert
Uri REMINDERS_URI = Uri.parse(getCalendarUriBase(this) + "reminders");
values = new ContentValues();
values.put( "event_id", Long.parseLong(event.getLastPathSegment()));
values.put( "method", 1 );
values.put( "minutes", 10 );
cr.insert( REMINDERS_URI, values ); 
```

3.设置权限为：

```
<uses-permission android:name="android.permission.READ_CALENDAR" />
<uses-permission android:name="android.permission.WRITE_CALENDAR" /> 
```

**仅用于警报：**

1.创建一个广播接收器：

```
public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            Bundle bundle = intent.getExtras();
            String message = bundle.getString("alarm_message");
            Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
            e.printStackTrace();
        }
    }
} 
```

2.设置权限：

```
<receiver  android:process=":remote" android:name="AlarmReceiver"></receiver> 
```

3.设置事件：

```
// get a Calendar object with current time
Calendar cal = Calendar.getInstance();
// add 5 minutes to the calendar object
cal.add(Calendar.MINUTE, 5);
Intent intent = new Intent(ctx, AlarmReceiver.class);
intent.putExtra("alarm_message", "O'Doyle Rules!");
// In reality, you would want to have a static variable for the request code instead of 192837
PendingIntent sender = PendingIntent.getBroadcast(this, 192837, intent,    PendingIntent.FLAG_UPDATE_CURRENT);

// Get the AlarmManager service
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

4.来自广播接收器的活动：

```
@Override
public void onReceive(Context context, Intent intent) {
    try {
        Bundle bundle = intent.getExtras();
        String message = bundle.getString("alarm_message");

        Intent newIntent = new Intent(context, AlarmActivity.class);
        newIntent.putExtra("alarm_message", message);
        newIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(newIntent);
    } catch (Exception e) {
        Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    }
} 
```

根据需要修改代码。

# c# - C# 字符串标记化

> ID：15636194
> 
> 赞同：0
> 
> 时间：2013-03-26T11:40:53.603
> 
> 标签：c#, .net, regex, tokenize, subtraction

我编写了一个数学 C# 应用程序，用户可以在其中以预定义的方式定义函数，例如

```
COS({x}+3*(2+SQRT({x}))) 
```

对于评估，我使用 Shutting-Yard 算法。我有一个函数来标记上面的字符串，它在列表中产生以下输入：

> FUNCTION,OPEN_PARENTHESIS,VARIABLE,OPERATOR,NUMBER,OPERATOR,OPEN_PARENTHESIS,NUMBER,OPERATOR,FUNCTION,OPEN_PARENTHESIS,VARIABLE,CLOSE_PARENTHESIS,CLOSE_PARENTHESIS,CLOSE_PARENTHESIS。

这很好用，但我有负数的问题，我不知道如何处理减法运算符，什么时候减法和什么时候负号？

该函数遍历字符串并在其中搜索模式（例如，当 i. 字符为 '{' 则 (i+1). character 必须是小写字母且 (i+2). character 必须为 '} '，存储变量并继续使用 (i+3). 字符，否则会引发语法错误。）现在这个函数接受负数，而不是减法，它接受与负数的乘法并使用 '+'，所以3-1 我必须使用 3+(-1)*1。这不是一个优雅的解决方案，您有任何解决方法的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:02:35.940

我写了一个可以解析 C# 样式表达式的小型开源库。

[https://github.com/davideicardi/DynamicExpresso](https://github.com/davideicardi/DynamicExpresso)

您可以编写自定义函数（如 COS、SQRT）、注入变量或参数 (x)。或者您可以使用内置的 C# 函数（Math.Sqrt，...）。

您可以在以下位置找到现场演示：[http ://dynamic-expresso.azurewebsites.net/](http://dynamic-expresso.azurewebsites.net/)

也许这个库可以加快你的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:45:19.367

如果您在行首、左括号之后或另一个符号后面看到 - ，则后面的数字为负数

# progress-4gl - 在 OpenEdge ABL 中使用 System.Text.RegularExpressions

> ID：15636199
> 
> 赞同：0
> 
> 时间：2013-03-26T11:41:05.307
> 
> 标签：progress-4gl

我正在尝试在我们的业务应用程序中使用 .NET 程序集 System.Text.RegularExpressions 来减轻验证负担。我已经尝试使用 OpenEdge Architect“Assembly References”选项添加程序集，但它拒绝遵守

该程序集未存储在 windows/assembly (GAC) 文件夹中，我可以通过选择 Local Assemblies 选项卡并导航到 Windows\Microsoft.NET\assembly\GAC_MSIL 来找到它，但是当我尝试添加 dll 时出现以下错误“不是一个有效的程序集”

我知道该程序集没有损坏，因为我在开发 C#.NET 应用程序时一直在使用它。我也遇到过[这篇文章](http://knowledgebase.progress.com/articles/Article/000039027?popup=true)，它演示了在 ABL 中使用的 System.Text.RegularExpressions。如果有人能够提供任何可以让我完成这项工作的建议，我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:47:52.447

今天早上来自 Progress 的 PANS 电子邮件中显示了以下内容：

[http://knowledgebase.progress.com/articles/Article/000039027?popup=true](http://knowledgebase.progress.com/articles/Article/000039027?popup=true)

以下示例显示了如何在 ABL 中使用正则表达式：

```
 /*
  * IN TESTING, THIS DOESN'T WORK WITH MY INSTALLATION OF VERSION 10.2B RHEL 6,
  * BUT IT DOES WORK WITH VERSION 10.2B WINDOWS INSTALLATION
  *
  * THE ERROR RETURNED ON THE LINUX ENVIRONMENT IS:
  * │Could not find class or interface Regex. (12886)
  */

USING System.Text.RegularExpressions.*. 
DEFINE VARIABLE chaine AS CHARACTER NO-UNDO INIT "test@test.com". 
DEFINE VARIABLE i AS INTEGER NO-UNDO. 
DEFINE VARIABLE regexp AS CLASS Regex NO-UNDO. 

regexp = NEW Regex("^[^\x00-\x1F^\(^\)^\<^\>^\@^\,^\;^\:^\\^\~"^\.^\[^\]^\s]+(\.[^\x00-\x1F^\(^\)^\<^\>^\@^\,^\;^\:^\\^\~"^\.^\[^\]^\s]+)*@([^\x00-\x1F^\(^\)^\<^\> ^\@^\,^\;^\:^\\^\~"^\.^\[^\]^\s]+(\.[^\x00-\x1F^\(^\)^\<^\>^\@^\,^\;^\:^\\^\~"^\.^\[^\]^\s]+))+$"). 

DO i = 1 TO 100: 
IF regexp:IsMatch(chaine) THEN MESSAGE "OK". 
ELSE MESSAGE "KO" . 
END. 
DELETE OBJECT regexp. 
```

上面的代码示例专门针对 Windows。要在 UNIX（或 Linux）上使用正则表达式，您需要使用适用于该操作系统的相应库。可以在这里找到一个例子：

[http://dbappraise.com/ppt/shlib.pptx](http://dbappraise.com/ppt/shlib.pptx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:46:06.490

可能只是一个长镜头，但值得告诉你，两个问题是 not a valid assembly [64 bit](http://knowledgebase.progress.com/articles/Article/P183638?retURL=/apex/progresskbsearch&popup=false)或[dynamic serialization](http://knowledgebase.progress.com/articles/Article/P189307?retURL=/apex/progresskbsearch&popup=false)。

# asp.net-mvc - 如何使用 MVC Razor 通过反馈表发送电子邮件

> ID：15636202
> 
> 赞同：0
> 
> 时间：2013-03-26T11:41:12.223
> 
> 标签：asp.net-mvc, razor

我有一个 MVC Razor Web 应用程序，它有一个反馈表和一个数据库后端。

当我完成反馈表并单击提交时，信息将进入数据库。

我的问题是如何将此信息通过电子邮件发送到电子邮件地址，代码如下：

```
[HttpPost]
        public ActionResult Feedback(FeedbackModel model)
        {
            if (ModelState.IsValid)
            {
                if (this.db.InsertFeedback(model))
                {
                    return RedirectToAction("FeedbackSuccessful");
                }
                else
                {
                    ModelState.AddModelError("", "Error! We were unable to process your feedback at this time. Please try again later.");
                }
            }
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:01:53.383

```
Try this and add required references.  (using System.Web.Helpers;)  

[HttpPost]

    public ActionResult Feedback(FeedbackModel model)
    {
    if (ModelState.IsValid)
    {
    if (this.db.InsertFeedback(model))
    {
     WebMail.SmtpServer = "smtp.gmail.com";
    WebMail.SmtpPort = 587;
    WebMail.EnableSsl = true;
    WebMail.UserName = "youremailID@gmail.com";
    WebMail.Password = "yourpassword";
    WebMail.From = "from@gmail.com";
    WebMail.Send("Email Address", "Mail Subject", "Mail Body");
return RedirectToAction("FeedbackSuccessful");
    }
    else
    {
    ModelState.AddModelError("", "Error! We were unable to process your feedback at this time. Please try again later.");
    }
    }
    return View(model);
    } 
```

# c# - 如何将连接字符串从一个配置文件附加到另一个配置文件

> ID：15636206
> 
> 赞同：0
> 
> 时间：2013-03-26T11:41:19.497
> 
> 标签：c#

我正在尝试将连接字符串从 C:\test2\web.config 复制到 c:\test1\app.config。在 web.config 中，connectionString 元素如下所示。这两个配置文件都不属于我的项目。

```
 ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();

fileMap.ExeConfigFilename = @"c:\test1\app.config";
Configuration config = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);

var connectionStringsSection = (ConnectionStringsSection)config.GetSection("connectionStrings");

ExeConfigurationFileMap fileMapWeb = new ExeConfigurationFileMap();
fileMapWeb.ExeConfigFilename = @"C:\test2\web.config";
Configuration configWeb = ConfigurationManager.OpenMappedExeConfiguration(fileMapWeb, ConfigurationUserLevel.None);

var connectionStringsWeb = (ConnectionStringsSection)configWeb.GetSection("connectionStrings");

//here I got connectionString element in connectionStringsWeb from web.config file. But how to append this connectionString element to app.config file. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:47:51.810

您可以从代码访问您的配置文件。

msdn 的示例

```
// Add a connection string to the connection
// strings section and store it in the
// configuration file.
static void AddConnectionStrings()
{

    // Get the count of the connection strings.
    int connStrCnt = 
        ConfigurationManager.ConnectionStrings.Count;

    // Define the string name.
    string csName = "ConnStr" + 
        connStrCnt.ToString();

    // Get the configuration file.
    System.Configuration.Configuration config =
        ConfigurationManager.OpenExeConfiguration(
        ConfigurationUserLevel.None);

    // Add the connection string.
    ConnectionStringsSection csSection =
        config.ConnectionStrings;
    csSection.ConnectionStrings.Add(
        new ConnectionStringSettings(csName,
            "LocalSqlServer: data source=127.0.0.1;Integrated Security=SSPI;" +
            "Initial Catalog=aspnetdb", "System.Data.SqlClient"));

    // Save the configuration file.
    config.Save(ConfigurationSaveMode.Modified);

    Console.WriteLine("Connection string added.");

} 
```

来源： http: [//msdn.microsoft.com/en-us/library/vstudio/system.configuration.connectionstringsettingscollection.add (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/system.configuration.connectionstringsettingscollection.add(v=vs.100).aspx)

# git - git rebase 交互后如何解释“被我们删除”

> ID：15636210
> 
> 赞同：6
> 
> 时间：2013-03-26T11:41:32.707
> 
> 标签：git, git-rebase

在处理特定于功能的分支（来自“开发”分支）时，我采取了错误的方法（几次：/），并且基本上想在我当前提交之前删除我在这个分支上的所有提交。

在这种情况下，我之前所做的是在`git rebase -i development`我想要保留的（最新的）之前执行并删除所有提交，然后执行 git push --force 来更新远程仓库以仅包含我最最近的黄金承诺。

完成此操作后，当我提交此 rebase 提交的更改时，看起来 git 对我的请求的响应有点奇怪。它说有几个文件

```
both modified:      app/helpers/statistics_helper.rb
deleted by us:      app/models/referrals/chart.rb
deleted by us:      app/views/statistics/_referrals.html.haml
deleted by us:      app/views/statistics/_referrals2.html.haml
deleted by us:      app/views/statistics/_referrals3.html.haml 
```

我不知道该如何回应。如果我`git add`前面有“被我们删除”的文件，它会删除这些文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T19:26:14.437

通过删除提交，就好像它们从未发生过一样。因此，如果您在之前的提交中添加了刚刚删除的任何文件，这些文件也将被删除。那可能是在您看到该消息时。这可能也会删除您想要作为最终结果的一部分的预先存在的文件的更改。我认为您使用的变基不正确。

如果在最后一次提交结束时一切都处于您希望的状态，那么您应该简单地*压缩*您的最后一次提交。你可以通过几种方式做到这一点。像您一样使用`rebase -i`并指定`s`or`squash`代替`edit`除第一个以外的所有提交行将执行此操作。

另一种方法是：

```
git reset --soft HEAD~<N>
git commit 
```

`<N>`您需要压缩的提交数量 在哪里。

# c - cpufreq.c 文件中的“for_each_possible_cpu”如何扩展？

> ID：15636214
> 
> 赞同：4
> 
> 时间：2013-03-26T11:41:49.457
> 
> 标签：c, linux-kernel, linux-device-driver

我正在浏览 driver/cpufreq/cpufreq.c 以了解它是如何工作的。我遇到了这段我无法理解的代码。

在`cpufreq_core_init`：

```
for_each_possible_cpu(cpu) {
        per_cpu(cpufreq_policy_cpu, cpu) = -1;
        init_rwsem(&per_cpu(cpu_policy_rwsem, cpu));
} 
```

当我查看定义的宏时，

```
#define for_each_possible_cpu(cpu) for_each_cpu((cpu), cpu_possible_mask)

#define per_cpu(var, cpu) \
        (*SHIFT_PERCPU_PTR(&(var), per_cpu_offset(cpu)))

#define init_rwsem(sem)                                         \
do {                                                            \
        static struct lock_class_key __key;                     \
                                                                \
        __init_rwsem((sem), #sem, &__key);                      \
} while (0) 
```

我的问题：

1.  怎么`for_each_possible_cpu`展开？
2.  为什么`#defines`叫另外两个在里面？
3.  为什么`per_cpu`输出等于-1？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T12:48:39.627

> 1.  How does it expand:

Keep in mind anytime you ask something like that wrt the Linux kernel, the answer is never easy... so... here we go:

```
#define for_each_possible_cpu(cpu) for_each_cpu((cpu), cpu_possible_mask) 
```

You can see that this macro is really just a for loop, called with an iterator as `cpu` the `for_each_cpu` is another macro which is the looping part defined as:

```
#define for_each_cpu(cpu, mask)                 \
     for ((cpu) = 0; (cpu) < 1; (cpu)++, (void)mask) 
```

And the cpu_possible_mask is a pointer to a struct:

```
extern const struct cpumask *const cpu_possible_mask; 
```

Which is seen here (consisting of another macro):

```
typedef struct cpumask { DECLARE_BITMAP(bits, NR_CPUS); } cpumask_t; 
```

That contains another macro (`DECLARE_BITMAP`) and it has another `#define` for `NR_CPUS`, that is the number of CPUs in the system, it should be system dependent and set in the kconfig. The macro in there is really just an array and an accessor:

```
#define DECLARE_BITMAP(name,bits) \
      unsigned long name[BITS_TO_LONGS(bits)] 
```

So you can see that's the array and the accessor which of course consists of another `#define`:

```
#define BITS_TO_LONGS(nr)       DIV_ROUND_UP(nr, BITS_PER_BYTE * sizeof(long)) 
```

...which consists of two more `#define`s:

```
#define DIV_ROUND_UP(n,d) (((n) + (d) - 1) / (d))
#define BITS_PER_BYTE 8 
```

Anyway... you can see that (A) this is a mess and (B) it ends up being a `for` loop that increments number of CPUs but also issues a second iterative action via the comma operator. How exactly the second operator words itself out is system dependent. (what's the sizeof a long on your system? what's the number of cpus on your system?)

> 2.Why are two others #defines are called inside?

That's kind of answered by #1\. Since it expands to a `for` loop, you need that loop to *do* something.

> 3.Why is the per_cpu output equated to -1?

The `per_cpu` macro is giving a pointer to the CPU frequency policy of each CPU in the system, that is being initialized to `-1`. I'd have to do more research to be sure, but presumably they picked that because of the define:

```
#define CPUFREQ_ETERNAL                 (-1) 
```

And the `__init_rwsem` is an architecture defined way of initializing the read/write semaphore used for each CPU's policy.

I don't know if that explanation helped much, but at least maybe it helps point you in a better direction. Good luck exploring the kernel.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-26T15:10:13.180

Mike 的答案几乎涵盖了它，除了一点点有趣的地方，即用于变量的宏`cpu_possible_mask`（与 Mike 解释的类型相反）。

所以在`cpu.c`：

```
const struct cpumask *const cpu_possible_mask = to_cpumask(cpu_possible_bits);
EXPORT_SYMBOL(cpu_possible_mask); 
```

宏`to_cpumask`定义`cpumask.h`如下：

```
#define to_cpumask(bitmap)                                              \
        ((struct cpumask *)(1 ? (bitmap)                                \
                             : (void *)sizeof(__check_is_bitmap(bitmap))))

static inline int __check_is_bitmap(const unsigned long *bitmap)
{
        return 1;
} 
```

看起来很奇怪，因为函数总是`check_is_bitmap`返回`1`，而且它的结果甚至没有在调用它的宏中使用！编译器将明确优化最终二进制文件中的调用。那么那里可能发生什么？

实际上，调用不是用于运行时，而是*在编译时*检查宏参数`bitmap`实际上是类型`unsigned long *`（因此函数的名称只是这样做）。如果`bitmap`是错误的类型，则会发出警告，并且内核构建中的编译警告*始终*是一个严重的问题。

本质上，Linux 内核人员将通常无类型的宏转换为有类型的宏，这通常在 C++ 中使用模板完成。挺整洁的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:48:14.393

for_each_cpu is defined in cpumask.h, and takes two arguments - an iterator, and a mask. The mask is a cpumask_t lvalue that defines the set of CPUs to iterate over. so for_each_possible_cpu() iterates over all CPUs that could possibly be present on this boot of the kernel.

Per-CPU variables are data - arrays containing one object for each processor on the system. per_cpu macro definition will create name, which will hold one object of the given type for each processor on the system. Variables defined in this way are actually an array of values. To get at a particular processor's value, the per_cpu() macro may be used; it works as an lvalue, so code like the following works : per_cpu(cpufreq_policy_cpu, cpu) = -1;

# c# - 正则表达式适用于 RegularExpressionValidator 但在 Regex.IsMatch 上返回 false

> ID：15636216
> 
> 赞同：1
> 
> 时间：2013-03-26T11:41:55.820
> 
> 标签：c#, webforms

我有以下正则表达式验证器：

```
<asp:RegularExpressionValidator CssClass="Validator_alert" ID="RegularExpressionValidator1" runat="server" ControlToValidate="txtPassword"
        ErrorMessage="Dit kodeord skal være mindst 6 tegn langt og indholde et tal, et stort bogstav og lille bogstav. Kodeordet må ikke indeholde tegnene &amp; og &#37;."
        ValidationExpression="(?!^[0-9]*$)(?!^[a-z])(?!^[A-Z]*$)^([a-zA-Z0-9!@_:;+]{6,50})$"
        SetFocusOnError="true" /> 
```

以下代码也用于检查表达式：

```
string pattern = @"(?!^[0-9]*$)(?!^[a-z])(?!^[A-Z]*$)^([a-zA-Z0-9!@_:;+]{6,50})$";

                Boolean meetsRequirements = false;

                meetsRequirements = System.Text.RegularExpressions.Regex.IsMatch(pattern, txtPassword.Value);
                meetsRequirements = System.Text.RegularExpressions.Regex.IsMatch(pattern, txtPasswordRepeat.Value);

                return meetsRequirements; 
```

为什么IsMatch在`txtPassword.Value`和txtPasswordRepeat.Value中的值通过前端（RegularExpressionValidator）的测试时返回false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:44:54.483

`Regex.IsMatch`接受 2 个参数 - 第一个是输入文本，第二个是模式。您的参数顺序不正确。利用：

```
string pattern = @"(?!^[0-9]*$)(?!^[a-z])(?!^[A-Z]*$)^([a-zA-Z0-9!@_:;+]{6,50})$";

Boolean meetsRequirements = false;

meetsRequirements = System.Text.RegularExpressions.Regex.IsMatch(txtPassword.Value, pattern);
meetsRequirements = System.Text.RegularExpressions.Regex.IsMatch(txtPasswordRepeat.Value, pattern);

return meetsRequirements; 
```

很可能您应该使用以下方法检查两个输入是否正确：

```
meetsRequirements = 
    System.Text.RegularExpressions.Regex.IsMatch(txtPassword.Value, pattern)
    && System.Text.RegularExpressions.Regex.IsMatch(txtPasswordRepeat.Value, pattern); 
```

# iphone - 此代码如何创建 NSMutableArray 的备份...？

> ID：15636219
> 
> 赞同：1
> 
> 时间：2013-03-26T11:42:02.417
> 
> 标签：iphone, ios, objective-c, categories

请看以下类别...据我所知，不能将实例变量添加到类别中。

**。H**

```
//
// Created by macbook on 17.01.13.
//
// To change the template use AppCode | Preferences | File Templates.
//

#import <Foundation/Foundation.h>

@interface NSMutableArray (Cache)
@property (nonatomic, strong) NSArray *backup;

- (void)restoreBackup;
@end 
```

**.m**

```
//
// Created by macbook on 17.01.13.
//
// To change the template use AppCode | Preferences | File Templates.
//
#import "NSMutableArray+Cache.h"
#import <objc/runtime.h>
#define CEBackupKey @"Backup"
@implementation NSMutableArray (Cache)
#pragma mark - Properties
- (NSArray *)backup {
    return objc_getAssociatedObject(self, CEBackupKey);
}
- (void)setBackup:(NSArray *)backup {
    objc_setAssociatedObject(self, CEBackupKey, backup, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
#pragma mark - Methods
- (void)restoreBackup {
    [self removeAllObjects];
    [self addObjectsFromArray:self.backup];
}
@end 
```

任何人都可以详细解释这里发生了什么..

**并且这种存储备份的方式会占用更少的内存，而不是拥有该数组的单独深层副本......？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:06:00.023

`objc_setAssociatedObject`允许您将值与对象-键对关联。可以将其想象为`NSMutableDictionary`与每个对象关联的隐式全局。事实上，在将关联对象添加到运行时之前，单例字典字典可能是完成同样事情的一种方式。这是一个简化的示例，说明您如何自己实现它，忽略类加载、线程安全以及如何正确使用对象作为字典键等问题：

```
// Returns the global dictionary-of-dictionaries for associated objects
static NSMutableDictionary* getAssociationDict () {
    static dispatch_once_t once;
    static NSMutableDictionary* dict;
    dispatch_once(&once, ^{ dict = [[NSMutableDictionary alloc] init]; });
    return dict;
}

id my_objc_getAssociatedObject (id object, NSString* key) {
    return [[getAssociatedDict() objectForKey:object] objectForKey:key];
}

void my_objc_setAssociatedObject(id object, NSString* key, id value) {
    NSMutableDictionary* dict = getAssociationDict();
    NSMutableDictionary* objectDict = [dict objectForKey:object];
    // Create the per-object dictionary if it's missing
    if (! objectDict) {
        objectDict = [[NSMutableDictionary alloc] init];
        [dict setObject:objectDict forKey:object];
    }
    [objectDict setObject:value forKey:key];
} 
```

尽管上述内容实际上不起作用，但它是如何完成的概述。

# facebook-graph-api - 在 MVC 4.0 中找不到 FacebookClient 的 Get 方法

> ID：15636220
> 
> 赞同：0
> 
> 时间：2013-03-26T11:42:06.610
> 
> 标签：facebook-graph-api, asp.net-mvc-4, facebook-oauth

我无法在 MVC 4.0 C# (VS2010) 中找到对象的**`Get`**方法。**`FacebookClient`**请参考以下屏幕：

![在此处输入图像描述](../Images/60ed389ebd2b6d14c3079884fab31666.png)
我正在使用`DotNetOpenAuth.AspNet.Clients`并参考以下教程从 facebook 获取朋友列表：http:
[//blue-and-orange.net/articles/facebook/facebook-friends-listing-in-aspnet-mvc-4/](http://blue-and-orange.net/articles/facebook/facebook-friends-listing-in-aspnet-mvc-4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:05:19.747

根据您的屏幕截图，您使用的是较旧版本的 SDK，即版本 6 之前的版本。从 SDK 版本 6 开始，FacebooklClient 类除了默认构造函数外仅接受单个参数。所以在 V6 之前你可以传入`appId`和`appSecret`. 从 V6 开始，您只需通过`accessToken`. 我认为 V6 之前的版本实现了 OAuth 1.0。V6 版本实现了 OAuth 2.0。

要解决您的问题，您应该[从 NuGet 获取最新版本](http://nuget.org/packages/Facebook)或[从 GitHub 获取源代码](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/)。[本教程](http://facebooksdk.net/docs/web/getting-started)可以帮助您入门。

# android - 在前后摄像头之间切换

> ID：15636223
> 
> 赞同：2
> 
> 时间：2013-03-26T11:42:16.033
> 
> 标签：android

我正在尝试创建一个自定义相机应用程序，我需要在其中切换前置和后置摄像头。那么是否必须每次都创建新的相机实例`camera-id`才能使其工作？我已经尝试设置`camera-id`相机属性，但它似乎不起作用。有没有其他方法可以在不重新实例化相机实例的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:47:50.823

重新启动活动并将相机 ID 更改为 2 以切换到后置摄像头，我猜为 1 用于前置摄像头。[从这里](https://stackoverflow.com/questions/6599454/switch-back-front-camera-on-fly)引用

```
 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.photo_camera_main);
    prepareActivity(); 
 }

 private void prepareActivity() {
    cameraView = (SurfaceView) findViewById(R.id.photo_camera_surface_view);
    turnButton = (ImageButton) findViewById(R.id.turn_button);
    turnButton.setOnClickListener(this);
 }

 @Override
 public void onClick(View v) {
    if (v.equals(turnButton)) {
       if (Camera.getNumberOfCameras() > 1 && camId < Camera.getNumberOfCameras() - 1){
          startCamera(camId + 1);
    } else {
        startCamera(Camera.CameraInfo.CAMERA_FACING_BACK);
    }
 } 
```

# html - 我的元素或背景没有显示在 Chrome 中，但显示在所有其他浏览器中，为什么？

> ID：15636224
> 
> 赞同：5
> 
> 时间：2013-03-26T11:42:19.163
> 
> 标签：html, css, google-chrome, adblock

我有一个元素或图像在 Chrome 中显示不正确，但它在所有其他浏览器中显示正常。这是什么原因造成的？

* * *

**注意：**由于它们的性质，这些问题通常过于本地化，无法标记为重复。出于这个原因，我添加了这个问题作为针对所有这些问题的一种方式。

仅在上周提出的几个此类问题的示例是：

[Chrome 不想显示 CSS 块](https://stackoverflow.com/questions/15635252/chrome-dont-want-to-display-css-block)

[chrome浏览器不显示背景图片](https://stackoverflow.com/questions/15550560/background-image-not-displaying-in-chrome-browser)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:42:19.163

这是 StackOverflow 上经常出现的一个问题。

这里的“*问题*”通常是**[AdBlock](https://chrome.google.com/webstore/detail/adblock/gighmmpiobklfepjocnamgkkbiglidom?hl=en)**；一个 Chrome 扩展程序，可从页面中过滤掉可能不需要的广告。如果您的元素具有被 AdBlock 检测到的属性（[长列表](https://easylist-downloads.adblockplus.org/easylist.txt)），它将默默地将其`display`设置为`none`.

**检测到的`class`例子：**

```
<div class="ad_box">
    <!-- Anything within this divider will not be displayed -->
</div> 
```

**检测到的图像`src`示例：**

```
<img src="../300x250/1_512648b566578.png" alt="This doesn't display either!" /> 
```

（这也适用于 CSS`background`图像！）

**为了在我的网站上进行测试，我怎样才能防止这种情况发生？**

有几种方法可以*解决*这个*问题*，但最简单的方法是：

1.  *通过左键单击屏幕右上角（默认位置）的图标并选择所需选项，*暂停*扩展程序，或阻止它在该特定页面*或您的域上运行：*

    ![示例 1：暂停或阻止 AdBlock 运行](../Images/1973e8eb9df395da5fc542f6b228d860.png)* 

**   或者，您可以通过导航到（在您的 URL 栏中）并取消选中“启用”来*禁用扩展：*`chrome://extensions/`

    ![示例 2：禁用 AdBlock](../Images/c87d0823cb7400c6901a96301d8311cc.png)* 

 ** * *

## 更新

几个月前，更新了 AdBlock 扩展程序，以显示在扩展程序图标内的页面上已屏蔽了多少广告。如果图标设置为可见，您现在可以轻松查看扩展程序阻止了多少不同的内容部分：

![AdBlock 更新截图](../Images/2a2bce3412a4cf5c65ae9902a2f5021a.png)*

# ruby-on-rails - Ominauth-evernote, OAuth::Unauthorized 401 Unauthorized

> ID：15636226
> 
> 赞同：0
> 
> 时间：2013-03-26T11:42:20.040
> 
> 标签：ruby-on-rails, oauth, omniauth, evernote

我正在使用omniauth-evernote gem

全域认证.rb

```
provider :evernote, EVERNOTE_CONSUMER_KEY, EVERNOTE_CONSUMER_SECRET ,:client_options => { :site => 'https://www.evernote.com' } 
```

我无法理解为什么会发生这种情况如果我尝试沙盒“ [https://sandbox.evernote.com](https://sandbox.evernote.com) ”，一切正常。但我需要生产。

在服务器日志中，这是错误

```
OAuth::Unauthorized (401 Unauthorized):
  oauth (0.4.7) lib/oauth/consumer.rb:216:in `token_request'
  oauth (0.4.7) lib/oauth/consumer.rb:136:in `get_request_token'
  omniauth-oauth (1.0.1) lib/omniauth/strategies/oauth.rb:29:in `request_phase' 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:26:40.860

您是否在生产中激活了您的 API 密钥？如果没有，您可以在此处执行此操作：http: [//dev.evernote.com/support/](http://dev.evernote.com/support/)

如果您已经这样做了，但问题仍然存在，您可以联系 Evernote 开发人员支持。 [http://dev.evernote.com/support/faq.php#getsupport](http://dev.evernote.com/support/faq.php#getsupport)

# javascript - ng-repeat 中的 Angularjs 函数调用了项目长度的更多倍

> ID：15636238
> 
> 赞同：0
> 
> 时间：2013-03-26T11:42:55.900
> 
> 标签：javascript, function, angularjs, ng-repeat

这种行为正常吗？[http://plnkr.co/edit/P1TsiIJbV3MvAjHuJRmF?p=preview](http://plnkr.co/edit/P1TsiIJbV3MvAjHuJRmF?p=preview) - 集合中的两个项目和 ranTimes 被调用 20 次或更多次..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:24:56.950

实际上它恰好运行了 10 次，然后中止`Error: 10 $digest() iterations reached. Aborting!`（打开控制台查看错误）。

这是预期的行为，因为 AngularJS 依靠模型的脏检查来确定何时/哪部分 DOM 重新绘制。我不想在这里重复 Misko 的出色解释（所以一定要查看这篇文章：[https](https://stackoverflow.com/a/9693933/1418796) ://stackoverflow.com/a/9693933/1418796 ），但简而言之，你得到的模型永远不会像你一样稳定有相互依赖的移动部件。

要查看方法调用的真实数量，`run()`您可以稍微修改您的 plunker 并在控制台上输出结果：[http](http://plnkr.co/edit/fYvguOiM2Y2ocOk02yEN?p=preview) ://plnkr.co/edit/fYvguOiM2Y2ocOk02yEN?p=preview正如您所看到的，此函数总共运行了 4 次（每个项目 2 次），这正好说明了工作中的脏检查。

我知道你最初的 plunker 的结果可能令人惊讶，但这只是展示了 AngularJS 机器是如何在幕后工作的。虽然它在大多数情况下都完全符合我们的要求，但我们需要了解它在某些极端情况下的内部工作。

# c# - 重新实现相同的事件调用程序

> ID：15636243
> 
> 赞同：1
> 
> 时间：2013-03-26T11:43:12.313
> 
> 标签：c#, wpf, data-binding, inotifypropertychanged

[我正在编写一些类，我想通过实现INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)使它们全部“符合数据绑定”（对于 WPF，甚至可能是更罕见的 WinForms）。

问题是重复的代码。实际上，我一遍又一遍地复制粘贴相同的方法（我不是在开玩笑）。

```
protected void OnPropertyChanged([CallerMemberName] String propertyName = null)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
} 
```

我有一段时间遇到这个问题，但今天特别是它一次又一次地发生，所以我希望你能帮助我解决问题。我有近十几个类都有这种方法，我真的很讨厌重复那段代码。

我想创建一个基类来实现它（`NotifyPropertyChangedObject`也许是为了名字），但这可能是一个坏主意，它会真正限制我的类而没有多重继承。
我也想到了一个扩展方法，但我想把它作为一种`protected`方法，所以这也行不通。

可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:51:06.450

拥有一个基类是甚至 MVVM Helper 库所做的方法。没有缺点。

是的，你只能有一个 ac# 类的基类，但让它实现多个接口。对于您的情况，您所要做的就是说有一个基类实现 INPC 并调用它`ViewModelBase`

现在，如果当前您有 Class`X`继承自 Class `A`，只需让 A 继承自`ViewModelBase`。

因此，您使您当前的基类继承自这个新的 INPC 提供类，并且您的任何派生类中的 INPC 实现都没有任何代码重复

**更新**

在您的特殊情况下，无论出于何种原因，您都与已经拥有另一个基类相关联，并且没有说诸如 INPC 的公共实现之类的东西作为成员变量传递给该对象，

你可以试试看这个：

[Fody](https://github.com/Fody/Fody/)，特别是它的插件[PropertyChanged - Addon](https://github.com/Fody/PropertyChanged)

这有望帮助您，因为它自己注入了 INPC 实现，因此不需要您复制粘贴代码，它还允许您从任何自定义基类派生（仍然需要指定 INPC，但这只是一个接口）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T00:18:49.237

通过@viv添加答案。如果您已经决定使用[Fody](https://github.com/Fody/Fody) + [PropertyChanged](https://github.com/Fody/PropertyChanged)，我建议您避免使用基类。由于 PropertyChanged 为您完成了所有的 INPC 实现，因此拥有一个基类真的没有什么价值。事实上，痛苦多于价值。只需将`PropertyChanged.ImplementPropertyChanged`属性添加到您的类，其余的将为您完成。

```
[ImplementPropertyChanged]
public class Person 
{
    public string Name { get; set; }
} 
```

关于你不拥有的类，因此可以实现 INPC。最好的方法是创建一个重复的类，代表您要绑定到的每个类的简化版本。您可以在加载和完成视图时读取和写入值。或者，如果您只想绑定到某些属性，只需将这些属性放在您的主视图模型上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:51:56.237

我通常将我的视图绑定到视图模型类型对象，即包含视图所需的所有数据的对象。这使得系统更容易工作，因为视图必须只绑定到一个对象。

然后我通常会让我的业务对象向视图模型公开数据并公开一个事件以通知视图模型其状态已更改，此时视图模型将调用相关属性特定通知给视图。即每个视图/视图模型只需要实现一次上述方法。

如果您还没有，请查看 MVVM 模型。以上只是无数方法之一，确实是我的解释，有些人可能不同意，也可能不适合您的特定情况。

# ios - 在 iOS 模拟器上记录和回放用户操作？

> ID：15636246
> 
> 赞同：7
> 
> 时间：2013-03-26T11:43:17.183
> 
> 标签：ios, objective-c, xcode, automation, ui-testing

我希望能够在 iOS 模拟器上播放一系列点击，最好是通过记录这些点击来制作。如果无法录制，那么也许我可以在程序中或使用 AppleScript 之类的外部程序在代码中进行。或者也许与仪器？

这有可能吗？我需要能够在启动应用程序**后开始播放用户操作。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T18:49:12.600

有多种原生和混合 iOS 测试框架允许您创建测试场景（例如模拟用户点击）、记录这些事件并在以后使用它们进行回放，可能在 CI 环境中。下面列出了我们研究过的一些框架以及我们在移动环境中使用过的一些框架。

## 国际电影节

概述：

KIF 代表“保持功能”。它通过利用操作系统为视觉障碍人士提供的可访问性属性，可以轻松实现 iOS 应用程序的自动化。

KIF 依赖于 iOS 的内置可访问性来执行其测试步骤。因此，您的应用程序完全可访问非常重要。这也是确保您的应用可供视障人士使用的好方法。使您的应用程序可访问通常就像为您的视图提供合理的标签一样简单。Apple 的文档中提供了更多详细信息。

带有源代码和说明的网站可以在 Github 上找到

测试用例是通过 Xcode/AppCode 在 Objective-C 中创建的。

## 坦率

概述：

Frank 是“用于原生 iOS 应用程序的 Selenium”。Frank 允许您编写结构化文本测试/验收测试/要求（使用 Cucumber）并让它们针对您的 iOS 应用程序执行。

主要前提是框架将 HTTP 服务器嵌入到应用程序的测试版本中，然后允许客户端向应用程序发送 HTTP 请求以运行测试场景。

“Frank 还包括一个强大的“应用程序检查器”（称为 Symbiote），您可以使用它来获取有关正在运行的应用程序的详细信息。这使您可以在应用程序中检查屏幕上的对象。”</p>

测试用例：测试用例使用 Cucumber 以自然语言编写。

（上面已经提到的网站）

## 蠡

概述：

Calabash 建立在与 Frank 相同的架构之上。它将 HTTP 服务器嵌入到应用程序的测试版本中，然后允许客户端向应用程序发送 HTTP 请求以运行测试场景。

“Calabash 是跨平台的，支持 Android 和 iOS 原生应用。它是开源和免费的，并且有一家名为 LessPainful 的公司支持和开发它。”</p>

“Calabash 包含使测试代码能够以编程方式与本机和混合应用程序交互的库。交互由许多最终用户操作组成。

测试用例是通过 Cucumber 以自然语言编写的。这是一个例子：

主网站： [http ://calaba.sh](http://calaba.sh)

## 猴话

（以前称为“FoneMonkey”）

概述：Monkeytalk 是一个自动化测试框架，它使用户能够记录一组指令，然后在模拟器或设备中回放这些脚本。

MonkeyTalk 是免费和开源的。它可以从命令行运行，因此它似乎是在 CI 构建环境中使用的不错选择。它还生成用于在 Jenkins 中报告测试结果的 JUnit XML 文件。

MonkeyTalk 提供编译成应用程序测试版本的库。

测试用例：MonkeyTalk 自带用于创建测试用例的 IDE。它记录在模拟器或设备上完成的动作，并可以脚本形式回放它们。它允许为输入数据（例如名称和密码）提供数据文件。IDE 可在 Windows、OSX 或 Linux 上运行，但 iOS 设备和模拟器只能在 OSX 中运行。

主要： [http ://www.gorillalogic.com/testing-tools/monkeytalk](http://www.gorillalogic.com/testing-tools/monkeytalk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:31:13.197

我认为最先进的开源技术是[Frank](http://testingwithfrank.com)。无法记录动作，但您可以在代码中指定一组点击、手势等。作为奖励，它会强制您正确设置可访问性，因为它是用来驱动测试的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T01:14:30.450

Sikuli 脚本较新，适用于 iOS 和模拟器 - [http://www.sikuli.org](http://www.sikuli.org)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T03:44:17.147

[test-studio](http://www.telerik.com/automated-testing-tools/ios-testing.aspx)可以记录用户操作，而且是免费的！

# c# - 从局部视图中单击按钮重定向到父操作方法

> ID：15636251
> 
> 赞同：6
> 
> 时间：2013-03-26T11:43:32.113
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3

我的应用程序中有一个 View 'Parent'，我正在使用 @Html.BeginForm 和一个提交按钮来保存 Parent view 的数据。我在父视图中也有一个局部视图，我试图从局部视图调用 ajax 方法（使用 jQuery），但每次它都会将我重定向到父表单的操作方法。

```
Parent View
@using (Html.BeginForm("Test1", "Home", new { id = 1 }, FormMethod.Get))
{
    @Html.Partial("TestPartial", Model)
    <div>
        <input id="Button1" type="submit" value="Parent" />
    </div>
}

Partial View
<script>
function onClientClick() {
    $.ajax({
        url: "/Home/Test2",
        type: "GET",
        dataType: "json",
        contentType: 'application/json; charset=utf-8',
        data: JSON.stringify({ ID: 1 }),
        cache: false,
        success: function (data) {
            alert('Success');
        },
        error: function (err, result) {
            alert("Error" + err.responseText);
        }
    });
}
</script>
<div>
<input type="submit" name="submit" onclick="onClientClick()" value="Submit" />
</div> 
```

每次我尝试从部分视图调用 /Home/Test2 时，它都会将我重定向到 /Home/Test1（父表单的操作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:48:14.487

问题出在这一行：

```
<input type="submit" name="submit" onclick="onClientClick()" value="Submit" /> 
```

因此，类型`submit`是提交表单并将您重定向到父级中的操作。

在您的部分视图中，有一个常规`button`的不`submit button`请求`AJAX`内容：

```
<input type="button" onclick="onClientClick()" value="Ajax Call" /> 
```

但是，您也可以`return false`相信使用标准`button`而不是`submit`更适合这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:46:49.463

调用ajax后返回`false`...在`onClientClick`函数结束时

**或**将您的提交重写为

```
<input type="submit" name="submit" id="submit" value="Submit" /> 
```

然后在 jquery bnd 中单击事件为

```
$("submit").click(function(e){
e.preventDefault()
$.ajax({
        url: "/Home/Test2",
        type: "GET",
.
.
. 

}); 
```

**或**`input`将类型从更改`submit`为`button`

# ruby-on-rails - 为什么这么多 Gems 被拉出，你如何处理依赖关系？

> ID：15636253
> 
> 赞同：10
> 
> 时间：2013-03-26T11:43:33.770
> 
> 标签：ruby-on-rails, gem

我今天遇到了一种情况，我正在维护的应用程序中使用的 gem 被猛拉。

虽然我听说过，但我以前从未见过被拉出的宝石，并认为这是一种不好的做法。

我已尝试更新 gem，但在使用以前或旧版本时应用程序开始失败。

既然 gem 是免费托管的，并且可能被应用程序使用，那么拉取它们的逻辑是什么？您如何管理被拉出的宝石？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T11:57:01.300

对于您决定在项目中使用的每个 gem，您应该有一个替代方案（另一个 gem 或您自己的实现）的想法。我看到人们强迫性地使用 gem，而不关心它的质量、作者、更新频率。盲目地依赖一个 gem 是很危险的，在 Gemfile 中添加另一行的决定不应该掉以轻心。

关于 yanked gems，如果即使是作者也从 interwebz 中删除了 gems，你可能应该考虑在你的项目中对它做同样的事情。那或者如果你真的很喜欢这颗宝石，请托管一个分叉，给予信用并不断发展它。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T12:03:13.687

[Rubygem 的文档](http://help.rubygems.org/kb/gemcutter/removing-a-published-rubygem)建议 yanking 是为了：

*   修复不完整版本的意外推送
*   防止用户毫无头绪地拉取已知安全问题的 gem

我从来不需要处理这种情况，但我看到了三个选项：

*   如果存在更高版本，则升级 gem
*   下载 gem（文档说 gem 仍然可以下载，除非它在讨论过程中有充分的理由被完全删除）并指向 gemfile 中的本地版本
*   围绕另一个 gem 或自定义代码重构您的代码

总而言之，猛拉 gem 似乎是一种极端的措施，总是有充分的理由，所以你应该更喜欢升级/重构而不是坚持使用具有潜在危险或已弃用的 gem ......我猜。

# html - Chrome 上的浮动问题。我有两个浮动列，但在 Chrome 上，第二个列出现在第一个列下方

> ID：15636255
> 
> 赞同：1
> 
> 时间：2013-03-26T11:43:39.553
> 
> 标签：html, css, css-float, wordpress-theming

我修改了一个 WordPress 模板，在内容区添加了另一列。

正如您在此处看到的：[http](http://scorejava.com/wordpress351/) ://scorejava.com/wordpress351/文章的内容区域包含两列（第一列显示最后插入的帖子，第二列显示阅读次数最多的帖子）

为此，我只是在**index.php** wordpress 模板文件中创建了两个 div，分别具有**id="column1"**和**id="column2"**

然后在我的模板的**style.css**文件中，我为这些 divs 元素声明了以下属性：

```
#column1{
    float: left;
    width: 50%;
    overflow:hidden;
    padding-top: 20px;
    padding-bottom: 20px;
}

#column2{
    width: 50%;
    padding-left: 30px;
    overflow:hidden;
    padding-top: 20px;
    padding-bottom: 20px;
} 
```

在左侧浮动 column1 div 并在其右侧有 column2。

在 Firefox 中似乎运行良好（我在我的 Ubuntu 上的 Firefx 19.0.2 上对其进行了测试）但是如果我使用**Chrome**打开它，这是不正确的，并且 column2 div 出现在 column1 div 下，相对于后者稍微向右移动.. .

为什么？我试图找到一个解决方案，但我没有更多的想法（我对 CSS 不太擅长）

你能帮我在 Chrome 浏览器上解决这个问题吗？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:59:49.060

跨浏览器简单解决方案：

```
#column1 {
    width: 48%;
}
#column2 {
    width: 48%;
    padding-left: 4%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:54:13.770

您已将每列的宽度设置为`50%`，因此右列的正确宽度为`50%`plus `padding-left: 30px`。你需要做的是设置`box-sizing: border-box`，它应该没问题。[在这里](http://css-tricks.com/box-sizing/)阅读更多。

请记住，它不会在 lt IE8 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:21:22.400

如果您希望列之间有 30px 的边距，我会执行以下操作：

```
#column1, #column2{
    float:left;
    width: 50%;
    padding-left: 30px;
    overflow:hidden;
    padding-top: 20px;
    padding-bottom: 20px;
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
}

#column1{
    padding-right:15px;
}

#column2{
    padding-left:15px;
} 
```

该`box-sizing`属性确保您可以在不更改其宽度的情况下向元素添加填充。通常一个元素的宽度是这样计算的：`total width`= `width`+ `padding`，`box-sizing:border-box`这变成了`total width`=`width`

# javascript - 在 JS 文件中访问 ViewBag - Asp.net MVC

> ID：15636256
> 
> 赞同：4
> 
> 时间：2013-03-26T11:43:48.310
> 
> 标签：javascript, asp.net-mvc, viewbag

我有一个 Viewbag。我已经在 Action result 方法中从服务器端填充了该 viewbag 值。我需要在 Js 文件中访问这个 Viewbag 值。我可以在 *.cshl 页面中正确访问这个 Viewbag。下面显示了我的示例代码，

`Var objMode = '@ViewBag.Mode';` //写在*.cshtml页面中。

但我需要像上面 *.js 文件中的语法一样访问这个值。

谢谢，尼拉夫帕里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T11:45:48.990

你不能。您可以在隐藏输入中写入`ViewBag`值，然后从 js 文件中读取它：

```
<input type="hidden" value="@ViewBag.Mode" id="mode" /> 
```

JS文件：

```
var mode = document.getElementById('mode').value; 
```

**编辑**：另一种选择：

```
<script src="..." type="text/javascript" onload="InitMyScript('@ViewBag.Mode')"></script> 
```

JS文件：

```
function InitMyScript(mode){
   //other code here
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T11:46:27.663

您不能在包含的脚本文件中引用 ViewBag 或其他上下文项，因为它们是作为静态文件提供的，而不是在服务器上处理的（如果需要，可以通过提供具有 JavaScript 内容类型的视图来解决此问题）。

您需要将值作为 JS 变量放在视图中：

```
<script type="text/javascript">
    // the object is only required if you want a nice syntax for multiple values.
    if (!window.ViewBag) window.ViewBag = {};
    window.ViewBag.Mode = @Html.Raw(Json.Encode(this.ViewBag.Mode));
</script> 
```

现在您可以在脚本文件中引用它。

# python - TypeError：字符串索引必须是整数和 ValueError

> ID：15636257
> 
> 赞同：-1
> 
> 时间：2013-03-26T11:43:51.197
> 
> 标签：python, typeerror

我想遍历数据并仅下载登录信息，但出现此错误：

```
print elem["login"]
TypeError: string indices must be integers, not str 
```

我的代码：

```
import requests
import json
import csv
import urllib

 def printContents(path):
    filein = open(path, 'r')
    instr = filein.read()
    filein.close()
 printContents("top_story_2012.txt")
 appkey = "...."
 url= "http://a.wykop.pl/ludzie/followers/"
 wykopff = open("top_story_2012.txt", 'r')
 names = [line.strip() for line in wykopff.readlines()]
 for i in names:
    p = urllib.urlopen(url + i + "/appkey/" + appkey)
    wykops = p.read()
    read = json.loads(wykops)
    for elem in wykops:
        print elem["login"] 
```

我试图将“登录”更改为整数：

```
 print elem[int("login")] 
```

我不确定这是否是这样做的方法，但它仍然不起作用，然后我收到此错误：

```
 ValueError: invalid literal for int() with base 10: 'login' 
```

我试图迭代的内容如下所示：

```
 {"login":"Josif6969","email":"a9a4525e207fcba3ac0fc221246439a3:3670009297","public_email":"","name":"","www":"","jabber":"","gg":"","city":"","about":"Hobby: Obserwator.","author_group":1,"links_added":82,"links_published":4,"comments":132,"rank":0,"followers": 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:45:57.870

你想循环`read`，解码的 JSON 结构，而不是：

```
wykops = p.read()
read = json.loads(wykops)
for elem in read:
    print elem["login"] 
```

或者，简化它以`json.load()`代替使用：

```
for elem in json.load(p):
    print elem["login"] 
```

这假设来自`json.load()`调用的数据是一个列表，但我认为您只是想将结果视为字典：

```
data = json.load(p):
print data["login"] 
```

听起来（从评论中）好像*某些*响应返回了一个列表。试试这个来弄清楚发生了什么：

```
data = json.load(p):
try:
    print data["login"]
except TypeError:
    # not a dictionary, so what is it *then*?
    print "Not a dictionary:", data 
```

您的代码是逐个字符地循环遍历 JSON 数据字符串，因此您试图将其应用于`["login"]`python 字符串：

```
>>> 'somestring'["login"]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: string indices must be integers, not str 
```

# c# - 400：错误请求

> ID：15636260
> 
> 赞同：1
> 
> 时间：2013-03-26T11:44:13.687
> 
> 标签：c#, wcf, azure

我正在使用 csmanage 访问 Azure 管理 API。这是我的代码：

```
 private const string subscriberID = "<id>";

    static void Main(string[] args)
    {
        // The thumbprint value of the management certificate.
        // You must replace the string with the thumbprint of a 
        // management certificate associated with your subscription.
        string certThumbprint = "<thumbprint>";

        // Create a reference to the My certificate store.
        X509Store certStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);

        // Try to open the store.
        try
        {
            certStore.Open(OpenFlags.ReadOnly);
        }
        catch (Exception e)
        {
            throw;
        }

        // Find the certificate that matches the thumbprint.
        X509Certificate2Collection certCollection = certStore.Certificates.Find(X509FindType.FindByThumbprint, certThumbprint, false);
        certStore.Close();

        // Check to see if our certificate was added to the collection. If no, throw an error, if yes, create a certificate using it.
        if (0 == certCollection.Count)
        {
            throw new Exception("Error: No certificate found containing thumbprint " + certThumbprint);
        }

        // Create an X509Certificate2 object using our matching certificate.
        X509Certificate2 certificate = certCollection[0];

        var serviceManagment = ServiceManagementHelper.CreateServiceManagementChannel("WindowsAzureEndPoint", new X509Certificate2(certificate));
        var x = serviceManagment.ListHostedServices(subscriberID);

        foreach (HostedService s in x)
        {
            Console.WriteLine(s.ServiceName);
        }
    } 
```

这在控制台应用程序中运行良好。但是，当我在 WCF 项目（作为服务实现）中执行完全相同的代码时，我得到`400 - Bad Request`了结果。

什么可能导致此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:19:20.417

不是真正的答案，但您可以做的一件事是通过使用类似于以下的代码捕获 Web 异常来查看有关 400 错误的更多详细信息：

```
 catch (WebException webEx)
    {
        string errorDetail = string.Empty;
        using (StreamReader streamReader = new StreamReader(webEx.Response.GetResponseStream(), true))
        {
            errorDetail = streamReader.ReadToEnd();
        }
    } 
```

这`errorDetail`将是一个可以为您提供更多信息的 XML。

# android - Android中的约会问题

> ID：15636261
> 
> 赞同：1
> 
> 时间：2013-03-26T11:44:14.603
> 
> 标签：android, appointment

我创建了一个保险应用程序，我从客户那里获得了约会日期。我必须查看特定日期（今天、明天）、周（从今天起 7 天）、月份（从今天起 30 天）和六个月、一年的约会。

创建了一个自定义适配器来显示详细信息。它适用于今天和明天，但没有显示周、月、年。请帮我。

```
<html>
private void today() {
        detail.setText("Today");

        // Convert the Current Date to SimpleDateFormat

        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        tdate = c.getTime();
        sdate = sdf.format(tdate);

        String sel = "select * from addclient where AppointDate='" + sdate
                + "'order by AppointTime";
        cur = db.rawQuery(sel, null);
        cur.moveToFirst();

         value();   
    }

private void week() {

        detail.setText("Week");

        // Convert the FromDate and ToDate to SimpleDateFormat

        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        fdate = c.getTime();
        fromdate = sdf.format(fdate);

        // 7 days to add
        c.add(Calendar.DATE, 7);
        tdate = c.getTime();
        todate = sdf.format(tdate);

        // Checking Datebase Table

        String sel = "SELECT * FROM addclient WHERE AppointDate BETWEEN '"
                + fromdate + "' AND '" + todate + "' order by AppointDate";

        cur = db.rawQuery(sel, null);
        cur.moveToFirst();

        value();
    }

private void month() {

        detail.setText("Month");

        // Convert the FromDate and ToDate for Month to SimpleDateFormat

        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        fdate = c.getTime();
        fromdate = sdf.format(fdate);

        // 1 Month to add
        c.add(Calendar.MONTH, 1);
        tdate = c.getTime();
        todate = sdf.format(tdate);

        // Checking Datebase Table
        String sel = "SELECT * FROM addclient WHERE AppointDate BETWEEN '"
                + fromdate + "' AND '" + todate + "' order by AppointDate";
        cur = db.rawQuery(sel, null);
        cur.moveToFirst();

         value();
    }

private void year() {

        detail.setText("Year");

        SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
        fdate = c.getTime();
        fromdate = sdf.format(fdate);

        // 1 Year to add
        c.add(Calendar.YEAR, 1);
        tdate = c.getTime();
        todate = sdf.format(tdate);

        // Checking Datebase Table
        String sel = "SELECT * FROM addclient WHERE AppointDate BETWEEN '"
                + fromdate + "' AND '" + todate + "' order by AppointDate";
        cur = db.rawQuery(sel, null);
        cur.moveToFirst();

         value();
}

public void value(){

        while (!cur.isAfterLast()) {
            count++;
            cur.moveToNext();
        }

        cur.moveToFirst();

        // Assigning count as the array length
        name = new String[count];
        address = new String[count];
        date = new String[count];
        time = new String[count];

        int i = 0;

        // Retrieve the database values 
        while (!cur.isAfterLast()) {
            String s1 = cur.getString(0).toString();
            String s2 = cur.getString(3).toString();
            String s3 = cur.getString(16).toString();
            String s4 = cur.getString(17).toString();

            name[i] = s1;
            address[i] = s2;
            date[i] = s3;
            time[i] = s4;
            i++;

            cur.moveToNext();
        }

        lv.setAdapter(new MyCustomAdapter(name, address, date, time));
}
</html> 
```

# java - 在 Android 上与 Hessian Servlet 进行数据通信后的 ClassCastException

> ID：15636263
> 
> 赞同：1
> 
> 时间：2013-03-26T11:44:18.020
> 
> 标签：java, android, client-server, classcastexception, hessian

嘿嘿。我正在编写一个在[Hessian Servlet](http://www.caucho.com/resin-3.0/protocols/hessian.xtp)和[Hessdroid](https://code.google.com/p/hessdroid/)之间进行通信的 android 客户端。一切都很顺利，直到我想传输这种自我实现的类型：

*   客户端和服务器在 IUserService.java 接口之间进行通信。

**服务器端：**

***odtObject.java：***

```
import java.io.Serializable;

public class odtObject implements Serializable {

    private String siteName;
    private int siteId;

    public odtObject(String siteName, int siteId) {
        this.siteName = siteName;
        this.siteId = siteId;
    }

    public String getSiteName() {
        return siteName;
    }

    public int getSiteId() {
        return siteId;
    }
} 
```

***用户服务.java：***

```
public ArrayList<odtObject> getSiteList() {
    ArrayList<odtObject> siteList = new ArrayList<odtObject>();
    siteList.add(new odtObject("hello", 1));
    System.out.println(siteList.get(0).getSiteName()); // out: hello
    return siteList;
} 
```

**客户端**

***PageOne.java：***

```
IUserService con = new IUserService();
ArrayList<odtObject> siteList = new ArrayList<odtObject>(); 
siteList = con.getSiteList();
System.out.println(siteList.get(0).getSiteName()); // 87: Exception 
```

***odtObject.java: ...***

***例外：***

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.testapp/com.testapp.PageOne}: java.lang.ClassCastException: java.util.HashMap cannot be cast to com.testapp.odtObject
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    at android.app.ActivityThread.access$600(ActivityThread.java:141)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassCastException: java.util.HashMap cannot be cast to com.testapp.odtObject
    at com.testapp.PageOne.onCreate(PageOne.java:87)
    at android.app.Activity.performCreate(Activity.java:5104)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

谢谢你的帮助！直说吧，如果你想看更多代码...

**编辑：**

RetrieveData 调用 IUserService 函数... 上面的 PageOne 代码是一种更容易理解的伪代码。

```
protected void onCreate(Bundle savedInstanceState) {        
    Thread t = new Thread() {
        public void run() {
            Intent myIntent = getIntent();
            String user = myIntent.getStringExtra("user");
            String pass = myIntent.getStringExtra("pass");
            RetrieveData r = new RetrieveData(context);               
            if(r.login(user, pass.toCharArray()) != null) {                 
                siteList = r.getSiteList();
                System.out.println("done");
            } else {
                System.out.println("error");
            }

        }
    };     
    t.start();                  
    super.onCreate(savedInstanceState);
    setContentView(R.layout.page1);

    inputSearch = (EditText) findViewById(R.id.inputSearch);
    listView = (ListView) findViewById(R.id.mylist);

    /* wait for networking thread */
    try {
        t.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }           
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1);      

    System.out.println(siteList.get(0).getSiteName()); // 87: Exception     
    for (odtObject d : siteList) {
        adapter.add(d.getSiteName());
    }   
    listView.setAdapter(adapter); 

    ...
} 
```

也许这也可能是相关的：

```
public String login(String username, char[] password) {
    HessianProxyFactory factory = new HessianProxyFactory();         
    String url = "http://192.168.56.1:8080/hessianServerX";
    factory.setHessian2Reply(false); // avoid hessian reply error
    try {
        userCon = (IUserService) factory.create(IUserService.class,  
                url+"/IUserService");                
        sessionId = userCon.login(username, password);
        secureCon = (ISecureService) factory.create(ISecureService.class,  
                url+"/restrictedArea/ISecureService;jsessionid="+sessionId);        
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
    return sessionId;
} 
```

编辑：

我在 HessianProxyFactory 上设置了 DebugMode，现在我得到了这个：

```
03-26 16:07:06.909: W/SerializerFactory(6023): Hessian/Burlap: 'com.hessian.odtObject' is an unknown class in dalvik.system.PathClassLoader[dexPath=/data/app/tsch.serviceApp-1.apk,libraryPath=/data/app-lib/tsch.serviceApp-1]:
03-26 16:07:06.909: W/SerializerFactory(6023): java.lang.ClassNotFoundException: com.hessian.odtObject
03-26 16:07:06.909: W/dalvikvm(6023): threadid=10: thread exiting with uncaught exception (group=0x9e50d908)
03-26 16:07:06.909: E/AndroidRuntime(6023): FATAL EXCEPTION: Thread-527
03-26 16:07:06.909: E/AndroidRuntime(6023): java.lang.ClassCastException: java.util.HashMap cannot be cast to tsch.serviceApp.types.odtObject
03-26 16:07:06.909: E/AndroidRuntime(6023):     at tsch.serviceApp.net.HessianConnect.<init>(HessianConnect.java:31)
03-26 16:07:06.909: E/AndroidRuntime(6023):     at tsch.serviceApp.PageLogin$1.run(PageLogin.java:17) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:42:02.430

自己解决了问题。我必须将自定义类型类 OdtObject.java 导出为 jar 并将其添加到类路径中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:12:28.363

如果这个 lop 的结果是假的：

```
 if(r.login(user, pass.toCharArray()) != null) {                 
                siteList = r.getSiteList();
                System.out.println("done");
            } else {
                System.out.println("error");
            } 
```

那么你`siteList`将是空的并且没有被初始化。

# python - 嵌入式python：多处理不起作用

> ID：15636266
> 
> 赞同：10
> 
> 时间：2013-03-26T11:44:22.927
> 
> 标签：python, multiprocessing

我正在使用作为脚本环境嵌入到应用程序（x64）中的 Python 3.1.4。到目前为止，我在使用嵌入式 python 时遇到了很多限制。不知道是不是正常，还是应用程序的程序员屏蔽了一些功能。

例如以下代码不起作用：

```
from multiprocessing import Process
def f(name):
    print('hello', name)

if __name__ == '__main__':
    p = Process(target=f, args=('bob',))
    p.start()
    p.join()

# --> error in forking.py: 'module' object has no attribute 'argv'
# print(sys.argv) gives the same error 
```

`sys.executable`返回应用程序的路径。

我也试过这个：

```
multiprocessing.forking.set_executable('C:\Python31\python.exe')
multiprocessing.set_executable('C:\Python31\python.exe') 
```

没有成功。

有没有可能的解决方法？我不太可能有能力让应用程序的开发人员更改他们的代码中的某些内容。

谢谢

**编辑**

我通过添加以下内容使其工作：

`sys.argv = ['c:/pathToScript/scipt.py']`

我也需要这条线：

`multiprocessing.set_executable('C:/Python31/python.exe')`

否则将打开应用程序的另一个实例，而不是运行代码。

我剩下的唯一问题是我不能使用控制应用程序本身的方法（如：create_project()、add_report()、..）。我的主要目标是能够调用多个方法而无需等待第一个方法完成。但我认为这是不可能的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T12:06:20.267

默认情况下，`sys.argv`在嵌入式代码中不可用：

> # [嵌入 Python](http://docs.python.org/3/c-api/intro.html#embedding-python)
> 
> 基本的初始化函数是 Py_Initialize()。这会初始化加载模块的表，并创建基本模块 builtins、__main__ 和 sys。它还初始化模块搜索路径（sys.path）。
> 
> Py_Initialize() 不设置“脚本参数列表”（sys.argv）。如果稍后将执行的 Python 代码需要此变量，则必须在调用 Py_Initialize() 之后通过调用 PySys_SetArgvEx(argc, argv, updatepath) 显式设置它

在 Windows 上，`multiprocessing`必须从头开始生成新进程。它使用命令行开关`--multiprocessing-fork`来区分子进程，并将原始文件`argv`从父进程传输到子进程。

就像您发现的那样，在创建子流程之前进行分配`sys.argv = ['c:/pathToScript/scipt.py']`似乎是一个很好的解决方法。

第二个相关的文件是[`multiprocessing.set_executable()`](http://docs.python.org/2/library/multiprocessing.html#multiprocessing.set_executable)：

> 设置启动子进程时要使用的 Python 解释器的路径。（默认 `sys.executable`使用）。嵌入者可能需要做一些事情，比如
> 
> `set_executable(os.path.join(sys.exec_prefix, 'pythonw.exe'))`
> 在他们可以创建子进程之前。（仅限 Windows）

# javascript - 避免重新绑定函数引用中的递归

> ID：15636271
> 
> 赞同：1
> 
> 时间：2013-03-26T11:44:38.457
> 
> 标签：javascript, function, recursion, reference

库`X`反复尝试调用它的方法`foo`来严重损害我的插件`Y`的用户体验。我的插件引入了在最终结果发生之前必须考虑的`Y`任意逻辑。然而，当用户旅程（发生在模态窗口中）完成时，应该能够继续进行，就好像什么都没发生一样。`shouldFooExecute``X.foo``Y``X`

```
// This is an external library. I can't modify and shouldn't overwrite it.
x = {
  // A method that completely screws my plugin
  foo: function(){
    /* nasty stuff */
  }
}

// This is my widget!
y = {
  // Init function, called when my plugin boots
  init: function(){
    // This scope handles the x.foo problem
    void function rebindFoo(){
      // Internal state
      var shouldFooExecute = false;
      // I need to be able to refer back to the original foo after I've temporarily rebound it
      var x_foo = x.foo;

      // Re-attach foo to its original definition & context
      function rebindFooToX(){
        // ECMAScript 5 browsers are fine!
        if(Function.prototype.bind){
          // x.foo is literally rebound to pretty much exactly what it was
          x.foo = x_foo.bind(x);
        }
        // Others not so good when this function executes a second time
        else {
          x.foo = function rebound_foo(){
            // An extra scope! Horrible. And it's recursive!
            return x_foo.apply(x, arguments);
          }
        }
      }

      x.foo = function y_foo(){
        // Stop and consider y's esoteric logic
        if(shouldFooExecute){
          // If it's fine, we rebind everything
          rebindFooToX();
          // This will have the intended effect
          x.foo();
        }
      }
    }
  }
} 
```

当我的插件在不支持绑定的浏览器上重新初始化时，问题就出现了。`x.foo`最终引用`rebound_foo`的是循环的。我可以编写任何逻辑来避免递归并在存在`rebound_foo`的情况下使用现有的逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:14:34.297

您可以使用[https://github.com/kriskowal/es5-shim](https://github.com/kriskowal/es5-shim)将`Function.prototype.bind`方法添加到本机不支持它的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T12:24:35.700

事发后 7 个月，所以这个问题可能是 OBE，但是我想指出，根据 X 的定义方式，您可以尝试继承：

```
var x = function() {
    this.foo = function() {
        console.log("from x");
    };

    this.bar = function() {
        console.log("from x");
    };
}

var y = function() {
    this.foo = function() {
        console.log("from y");
    }
}

y.prototype = new x();

var test = new y();
test.foo(); // will output: from y
test.bar(); // will output: from x 
```

# c++ - C++ 特定变量到一般变量

> ID：15636275
> 
> 赞同：0
> 
> 时间：2013-03-26T11:44:49.593
> 
> 标签：c++, variables

我当前的**工作**代码：

```
void GraphicFunctions::drawECM(const OpenGLCamera& camera)
{
   gl->drawECMEdges(camera, ecm, layerID);
} 
```

OpenGL 类：

```
void OpenGL::draw(const OpenGLCamera& camera)
{
   const vector<double>& cameraBBox = camera.getBoundingBox();
} 
```

* * *

是否可以使“OpenGLCamera”更通用，使其成为指针或其他东西？例如这样的：

```
void GraphicFunctions::drawECM(const OpenGLCamera& camera)
{
   const int* camerapointer = camera;
   gl->drawECMEdges(camerapointer, ecm, layerID);
} 
```

OpenGL 类：

```
void OpenGL::draw(const int& camera)
{
   const vector<double>& cameraBBox = camera->getBoundingBox();
} 
```

这样我也可以使用其他类型的相机......！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:48:26.330

只需使用继承来添加不同的相机类型。如果您通过引用传递它们，这也将起作用

```
struct Camera1 : public OpenGLCamera
{
  // reimplement something
}
struct Camera2 : public OpenGLCamera
{
} 
```

现在您可以将它们传递给`OpenGL::draw(const OpenGLCamera& camera)`

# php - 如何在不明确说明 if else 条件的情况下添加经过身份验证的方法？（代码点火器，PHP）

> ID：15636280
> 
> 赞同：0
> 
> 时间：2013-03-26T11:45:05.853
> 
> 标签：php, codeigniter, authentication

我有一个称为事件的控制器（类）。某些方法，例如 get 应该可供所有用户（公共）访问。但是，某些方法（例如添加和编辑）应该只有经过身份验证的用户才能访问。

代替：

```
public function add(){
//if user is logged in add event
}

public function edit(){
//if user is logged in edit event
} 
```

有没有更优雅的方法来实现这一点？也许每次我调用方法时都会自动检查“如果用户已登录”条件？（并且不必每次都明确说明）。

我认为可以为具有未经身份验证的方法的事件创建一个父类，然后将其扩展为包含经过身份验证的方法，但我不确定这是否/如何工作。

作为参考，我的事件控制器中有以下内容：

```
class Events extends MY_Controller{

    public function get(){
        echo "List of events";
    }

    public function add(){
        echo "Adding an event";
    }

    public function edit(){
        echo "Editing an event";
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T11:57:38.197

你可以做这样的事情

```
class Events extends MY_Controller{

    public function get(){
        echo "List of events";
    }

    public function addedit($edit_id=0){

        // check login user first
        if(!$this->session->get('userid')){ redirect('login')}

        if($this->input->post('submit'))
        {
          if($edit_id==0)
          {
              // insert record
          }
          else
          {
             // Edit record using edit_id
          }
        }

      if($edit_id>0)
      {
       // get array record using edit_id to display in form 
       $data['record']=$this->MODEL->getRecordById($edit_id)
      }

        $this->load->view('addeditform',$data)

    }

} 
```

# java - 使用mysql成功插入数据但无法通过select检索数据

> ID：15636283
> 
> 赞同：0
> 
> 时间：2013-03-26T11:45:14.987
> 
> 标签：java, mysql

我使用JDBC连接mysql。这是我的桌子：

```
Table: SensorAttr
Columns:
SID int(11) PK 
TID int(11) 
TMID    int(11) 
SensorType  varchar(45) 
TimeoutType varchar(45) 
```

我曾经`insert`将我的数据`SensorAttr`一一推送，驱动程序返回整数告诉我“您的请求已完成”。但是，我可以`t find the data in the`使用 Sensor`。

```
PreparedStatement statement = this.con.prepareStatement(sqlStatement);
int cnt = statement.executeUpdate();

sqlStatement = insert into SensorAttr(SID,TID,TMID,SensorType,TimeoutType) value(33,3,0,'Temp','T1s') 
```

调用返回 1 到 cnt。我的意思是**1**次平均调用已正确执行并且 1 行受到影响。

但是，在控制台中，我使用 select * from SensorAttr 。结果显示缺少某些行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:56:55.350

```
PreparedStatement pstmt = con.prepareStatement("SELECT column1,column2 FROM abc WHERE id=?");
pstmt.setString(1,"101");  
String firstColumn="";
String secondColumn="";
ResultSet rs = pstmt.executeQuery();
while (rs.next()) { 
     first = rs.getString(1);
     second = rs.getString(2);     
     System.out.println("column1 = " + first +`enter code here`    "column2 = " + second);
} 
rs.close();   
pstmt.close(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T11:52:27.297

如果要在表中插入项目，则必须使用执行方法（）而不是更新（）方法

尝试，

statement.execute() 而不是 statement.executeUpdate()

# asp.net - 对于 MVC 4 中带有控件和提交表单 (Html.BeginForm) 的每个循环

> ID：15636284
> 
> 赞同：8
> 
> 时间：2013-03-26T11:45:16.173
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

在我的视图模型中，我有一个对象列表。我迭代这些对象，并为每个对象创建控件。在下面的情况下，我想为每个对象显示一个文本框和一个按钮。当用户单击按钮时，会发布一个帖子，我可以将数据保存在我的控制器中。

在 UI 中，用户可以更改他们想要的表单，然后单击保存。

我的问题是模型发布到控制器时为空..

**我的剃刀代码**：

```
 using (Html.BeginForm())
        {
            foreach (var contributor in Model.Contributor)
            {

        @Html.HiddenFor(model => contributor.Id)

        <div class="formrow">
            @Html.ValidationSummary(true)
        </div>

        <h2>@Html.TextRaw("AuthorInfo", "Author")</h2>
        <div class="formrow">

            @Html.EditorFor(model => contributor.FirstName)
            <div class="formvalidation">
                @Html.ValidationMessageFor(model => contributor.FirstName)
            </div>
        </div>

        <div class="formrow right">
            <input type="hidden" name="formsubmitted" value="true" />
            <input type="submit"  class="button" value="@Html.Text("ButtonText", "Save")" />
        </div>
            }
        } 
```

**我的视图模型代码**

```
public class ProfileModel
{
    public string Message { get; set; }
    public List<PublisherModel> Publisher { get; set; }
    public List<ContributorModel> Contributor { get; set; }

    public ContributorModel NewContributor { get; set; }
} 
```

**我的控制器代码**

```
[HttpPost]
public ActionResult Mine(ProfileModel model, string newuser)
{
    //
} 
```

**如何解决？**

我想我必须以某种方式存储更改来扩展我的视图模型。但我真的看不出怎么做。

现在 ProfileModel 中的所有属性在到达控制器时都是空的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-26T12:01:55.153

基本上问题是默认模型绑定器无法在 foreach 循环中正确绑定集合项。换句话说，它错误地命名了元素，这就是集合在参数中显示为 null 的原因。

我确信有各种不同的解决方法、助手和东西，但我不熟悉这些，所以我只使用 for 循环而不是 foreach，这样元素就可以正确命名。

尝试这个：

```
 @for (int i = 0; i < Model.Contributor.Count(); i++)
    {

        @Html.HiddenFor(model => Model.Contributor[i].Id)

        <div class="formrow">
            @Html.ValidationSummary(true)
        </div>

        <h2>@Html.TextRaw("AuthorInfo", "Author")</h2>
        <div class="formrow">

            @Html.EditorFor(model => Model.Contributor[i].FirstName)
            <div class="formvalidation">
                @Html.ValidationMessageFor(model => Model.Contributor[i].FirstName)
            </div>
        </div>

        <div class="formrow right">
            <input type="hidden" name="formsubmitted" value="true" />
            <input type="submit"  class="button" value="@Html.Text("ButtonText", "Save")" />
        </div>
    } 
```

我建议您使用调试工具来查看元素是否具有正确的名称属性，在您的情况下，它们应该看起来像 Contributor[0].Id、Contributor[0].FirstName 等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T12:19:10.330

您可以将 PartialView 用于`Contributor`对象。部分视图：

```
@model Contributor
using (Html.BeginForm("ContributorUpdate", "YourController"))
{
  @Html.HiddenFor(model => Model.Id)
  <div class="formrow">
    @Html.ValidationSummary(true)
  </div>

  <h2>@Html.TextRaw("AuthorInfo", "Author")</h2>
  <div class="formrow">

   @Html.EditorFor(model => Model.FirstName)
   <div class="formvalidation">
        @Html.ValidationMessageFor(model => Model.FirstName)
   </div>
</div>
<div class="formrow right">
   <input type="hidden" name="formsubmitted" value="true" />
   <input type="submit"  class="button" value="@Html.Text("ButtonText", "Save")" />
</div>
} 
```

视图将是：

```
@foreach (var contributor in Model.Contributor)
{
   @{Html.RenderPartial("Conributor", contributor);}
} 
```

和控制器代码：

```
[HttpPost]
public ActionResult Mine(Conributor conributor, string newuser)
{
    //
} 
```

# selenium - 识别没有明显标识符的 Web 元素

> ID：15636291
> 
> 赞同：0
> 
> 时间：2013-03-26T11:45:33.770
> 
> 标签：selenium, timeout, selenium-webdriver, junit4

我编写了一个 Webdriver 测试，当运行时，有时会完成，有时不会。

我不明白为什么，我的猜测是我验证页面已加载的方式并不可靠。

我通过等待页面上的元素“id/name/css 或文本”来验证网站是否位于正确的位置，但是我可以找到一些元素：

```
<a href="javascript:doaction('1');">
<img src="images/english/go.gif" border="0" width="39" height="24"></a>

<a href="javascript:doaction('2');">
<img src="images/english/go.gif" border="0" width="39" height="24"></a>

<a href="javascript:doaction('3');">
<img src="images/english/go.gif" border="0" width="39" height="24"></a> 
```

有没有人没有找到这些元素的有效方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:09:33.553

您可以通过其属性找到元素，例如 href 和 src。

```
By link = By.cssSelector("a[href=\"javascript:doaction('1');\"]"); // The quotes are escaped out because of the single quotes in the href.  Normally I would just do like I did with src and use single quotes around the href
By src = By.cssSelector("img[src='images/english/go.gif']");

WebElement linkElement = driver.findElement(link);
linkElement.click();

WebElement srcElement = driver.findElement(src);
srcElement.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T11:56:13.713

您始终可以使用一种方法，`By`即`linkText`根据其 href="" 属性查找元素。

即（假设驱动程序已经启动）。

```
By doActionOneAnchor = By.linkText("javascript:doaction('1')");
WebElement doActionOne = driver.findElement(doActionOne); 
```

这就是您可以使用的 WebElement。如果由于某种原因您需要对图像本身采取行动，您可以随时执行以下操作：

```
WebElement imgDoActionOne = doActionOne.findElement(By.tagName("img")); 
```

希望能帮助到你。

# mysql - 计算友情度

> ID：15636293
> 
> 赞同：1
> 
> 时间：2013-03-26T11:45:35.803
> 
> 标签：mysql, algorithm, data-structures, social-networking

我创建了以下数据模型来存储用户的朋友 -

数据库 - **MySQL**

```
tbl_user [ user_id - pk ]    
tbl_user_friend [ inviter_id - fk, friend_id - fk,  status - 1/2/3 ]   

status = 2 => friend , = 1 => invite ...

select friend_id from tbl_user_friend where inviter_id = <logged_in_id> and status = 2
UNION
select inviter_id from tbl_user_friend where friend_id = <logged_in_id> and status = 2 
```

现在我需要在搜索时将它们分类为 1st、2nd、3rd 度连接。

**我能想到的一个选择——**

```
Convert above data into Graph and do BFS search.
Level of a node in BFS traversal will be its degree of connection. 
```

*   选项 1) 为此使用 MySQL OQGraph 引擎，但这需要特殊的 Mysql 构建
*   选项 2) 在 MySQL 中使用存储过程进行 BFS

你能在这里推荐一些比我已经说过的更多的算法/模型吗？

谢谢

# php - 如何使用 quercus 写入日志文件

> ID：15636295
> 
> 赞同：1
> 
> 时间：2013-03-26T11:45:38.237
> 
> 标签：php, quercus

我在 apache tomcat 1.7 上运行 quercus 4.0.25，我终于设法让 php 运行。但是，我似乎无法获得关于写入日志文件运行的 php 设置。

我在 web.xml 文件中尝试了以下设置：

1.

```
<init-param>
  <param-name>ini-file</param-name>
  <param-value>WEB-INF/php.ini</param-value>
</init-param> 
```

和 2。

```
<init>
  <ini-file>WEB-INF/php.ini</ini-file>
</init> 
```

在我的`php.ini`-file 中使用以下设置：

```
display_errors = Off 
error_reporting = E_ALL | ~E_STRICT 
html_errors =Off 
log_errors = On 
error_log = "C:/Logs/php/quercus_php.log" 
```

但由于某些原因`quercus`不写入该文件。有什么我遗漏的东西或一些不可行的配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:36:25.260

我刚刚为 4.0.36 修复了这个问题。如果您愿意，可以查看我们的 svn 存储库以尝试修复。

[http://bugs.caucho.com/view.php?id=4178](http://bugs.caucho.com/view.php?id=4178)

# tcp - Powerbuilder Winsock 库实现

> ID：15636297
> 
> 赞同：1
> 
> 时间：2013-03-26T11:45:44.137
> 
> 标签：tcp, powerbuilder, winsock2

由于我必须在我们的 Powerbuilder 12.5 项目中实现一些 winsock 服务，所以我遇到了以下问题：

假设我们有发送者 S 向接收者 R 发送（发起通信）数据。 R 如何识别发送者使用的发送者的通道（IP 和端口）以便向发送者发送回复？

提前感谢您的时间和合作。

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:30:35.240

您可以直接从 PB 调用 winsock dll（通过一些 API 结构传递可能会被欺骗），或者您可能更喜欢使用支持 TCP 和 UDP的[PB Winsock 包装器。](http://www.topwizprogramming.com/freecode_winsock.html)

# cakephp - CakePHP 2.3 中的 URL 问题

> ID：15636298
> 
> 赞同：0
> 
> 时间：2013-03-26T11:45:48.557
> 
> 标签：cakephp, cakephp-2.3

*我在 CakePHP 1.3 方面有过不错的历史，但我正在开发我的第一个 2.x（在本例中*为 2.3）应用程序，并且遇到了一些与 URL 生成有关的奇怪问题，我希望有人能提供帮助跟我。

1.  我有一个表单，我想提交给具有不同扩展名 ( `.csv`) 的相同操作。为此，我尝试了：

    ```
    # FYI, $this->here = /admin/activities/index
    $this->Form->create('Activity', 
      array( 'admin' => true, 'controller' => 'activities', 'action' => 'index', 'ext' => 'csv' ) 
    ```

    我的表单动作是`action=".csv"`.

2.  作为一种可能的解决方法，我尝试简单地将 url 设置为字符串 -- `'url' => '/admin/activities/index.csv'`。现在表单`action`看起来正确，但是当我提交表单时出现错误。

    ```
    Error: The action admin_index.csv is not defined in controller ActivitiesController 
    ```

我在这里想念什么？我已经阅读了 2.3 FormHelper & Router 文档以及我“跳过”的每个版本（2.1、2.2、2.3）的迁移文档，我没有看到任何让我兴奋的东西，但它不会这不是我第一次错过什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:05:19.583

您在 #2 中提到的不是解决方法，而是指定 url 的正确方法。你得到的错误可能是因为你`Router::parseExtensions()`在你的 routes.php中丢失了

编辑，只是为了清楚这就是您的 Form->create() 应该是什么样子。

```
$this->Form->create('Activity', 
  array('url' => array(
     'admin' => true, 'controller' => 'activities', 'action' => 'index', 'ext' => 'csv'
  ))
); 
```

并添加`Router::parseExtensions()`或者`Router::parseExtensions('csv')`如果您只想解析 .csv 扩展名到您的 routes.php

# javascript - 将点击事件附加到 .select2-result 中的元素

> ID：15636302
> 
> 赞同：32
> 
> 时间：2013-03-26T11:45:55.010
> 
> 标签：javascript, jquery-select2

我正在寻找一种将点击事件附加到 select2-result-item 的方法。我已经继续并通过格式化结果和选择

```
function format(state) {
    if (!state.id) return state.text; // optgroup
    return state.text + " <i class='info'>link</i>";
} 
```

添加一个“信息”图标我现在正在尝试将一个简单的点击事件附加到 .info-element 但无法使其正常工作：

```
$('.info').on('click', function(event){
    event.preventDefault();
    alert("CLICK");
    $('#log').text( "clicked" );
}); 
```

有什么帮助吗？有类似问题的人吗？这可能吗？

我准备了一个 jsFiddle：http: [//jsfiddle.net/s2dqh/3/](http://jsfiddle.net/s2dqh/3/)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-26T12:59:36.517

因为 Select2 lib 阻止了弹出列表上的任何单击事件，所以您不能`.info`直接将事件绑定到。但是您可以重新定义`onSelect`方法并在那里放置您想要的任何代码。

见例子：http: [//jsfiddle.net/f8q2by55/](http://jsfiddle.net/f8q2by55/)

多项选择更新：http: [//jsfiddle.net/6jaodjzq/](http://jsfiddle.net/6jaodjzq/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-12T21:35:27.150

这在概念上与 netme 的类似，但 select2 事件是错误的（可能是版本不同），您需要使用 stopPropagation 来防止项目被选中：

[http://jsfiddle.net/ZhfMg/](http://jsfiddle.net/ZhfMg/)

```
$('#mySelect2').on('select2-open', function() { 
    $('.select2-results .info').on('mouseup', function(e) { 
        e.stopPropagation();
        console.log('clicked');
    }); 
}); 
```

如果与 x-editable 一起使用。这样做是当 x-editable 进入编辑模式（显示事件）时，即存在 select2 并且您可以连接到它的 open 函数。

```
$('#myXEditable').on('shown', function () {
    $(this).data('editable').input.$input.on('select2-open', function() { 
        $('.select2-results .info').on('mouseup', function(e) { 
            e.stopPropagation();
            console.log('clicked');
        }); 
    });
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-09T13:45:01.943

对于 4.0.0 之前的 Select2 版本（所以 3.5.x 及以下），您应该参考[这个关于绑定到`onSelect`](https://stackoverflow.com/a/15637696/359284).

在较新版本的 Select2 中，事件不再在结果中被终止，因此您可以像往常一样**绑定到`mouseup`/`mousedown`事件。**您应该*避免绑定到`click`事件*，因为默认情况下浏览器不会触发它。

```
$(".select2").select2({
  templateResult: function (data) {
    if (data.id == null) {
      return data.text;
    }

    var $option = $("<spam></span>");
    var $preview = $("<a target='_blank'> (preview)</a>");
    $preview.prop("href", data.id);
    $preview.on('mouseup', function (evt) {
      // Select2 will remove the dropdown on `mouseup`, which will prevent any `click` events from being triggered
      // So we need to block the propagation of the `mouseup` event
      evt.stopPropagation();
    });

    $preview.on('click', function (evt) {
      console.log('the link was clicked');
    });

    $option.text(data.text);
    $option.append($preview);

    return $option;
  }
});
```

```
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.css" rel="stylesheet"/>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.js"></script>

<select class="select2" style="width: 200px;">
  <option value="https://google.com">Google</option>
  <option value="https://mail.google.com">GMail</option>
</select>
```

在此示例中，我们停止事件的传播，`mouseup`以便浏览器触发`click`事件​​。如果您不使用实际链接，而是只需要捕获一个`click`事件，您应该只钩入该`mouseup`事件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-08T07:21:16.100

使用默认的 select2select 事件触发器而不是使用其他 jquery 事件

```
$('#mySelect2').on('select2:select', function (e) {
    var data = e.params.data;
    console.log(data);
}); 
```

有关更多详细信息，请参阅以下链接 [https://select2.org/programmatic-control/events](https://select2.org/programmatic-control/events)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-10-13T07:05:09.490

根据文档的更简单的方法。

```
$('#mySelect2').on('select2:select', function (e) {
    var data = e.params.data;
    console.log(data);
}); 
```

很惊讶没有看到任何答案。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-12-23T16:32:28.967

对于 select2 4.0.0，上面的答案都不适合我，所以这就是我最终要做的：

```
$(document).on('mouseup', '.select2-container--open .select2-results__option', function (e) {
    // Act on the element
} 
```

具体来说，我只想对先前选择的项目采取行动：

```
$(document).on('mouseup', '.select2-container--open .select2-results__option[aria-selected=true]', function (e) {
    // Do something on the previously-selected item
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-11-27T18:29:13.077

我认为 Select2 对 mouseup 事件的处理会阻止`.info`元素获得单击事件。让`.info`元素捕获 mouseup 事件并阻止它传播似乎可以解决这个问题。

```
function format(state, container) {
    if (!state.id) return state.text; // optgroup
    container.append(state.text);
    $('<i class="info">link</i>')
        .appendTo(container)
        .mouseup(function(e) {
            e.stopPropagation();            
        })
        .click(function(e) {
            e.preventDefault();
            alert('CLICK');
        });
} 
```

也可以这样做以支持所选项目中的链接，但是需要捕获 mousedown 事件。

[jsfiddle](http://jsfiddle.net/sc147a1L/4/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-26T12:56:39.280

只需添加 'open' 监听器并为 '' 标签设置另一个 'mouseup' 监听器：

```
$("#select").on('open', function() { 
    $('.select2-results i').on('mouseup', function() { 
       alert('aaa');
    }); 
}); 
```

这是我的解决方案的链接：http: [//jsfiddle.net/EW8t7/](http://jsfiddle.net/EW8t7/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-26T12:40:05.693

事情似乎是在盒子关闭后tgas将被删除。因此无法触发 click 事件。

我已经更改了一些内容 + 将被监听的事件。现在是鼠标按下...

```
function format(state) {
    if (!state.id) return state.text; // optgroup
    return state.text + " <a class='info'>link</a>";
}

$("select").select2({
    formatResult: format,
    formatSelection: format,
    escapeMarkup: function(m) { return m; }
}).on('select2-open',function(){
    console.log($('.info'))
    $('.info').on('mousedown', function(event){
        console.log("click")
        $('#log').text( "clicked" );
        event.preventDefault();
    });
});
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/3.5.2/select2.js"></script>

<select>
  <option>red</option>
  <option>green</option>
  <option>blue</option>
</select>

<div id="log"></div>
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-20T22:36:52.240

刚刚使用 select2 v4.0.3 遇到了这个问题，最终使用了“select2:selecting”事件。这基本上是我的做法：

```
var $select2 = $savedReportsList.select2({ [stuff] });

$select2.on('select2:selecting', function(e) {
  var args = e.params.args;
  if ($(args.originalEvent.target).hasClass('[something]')) {
    if (confirm('Are you sure?')) {
       window.location = '[somewhere]' + '/' + args.data.id;
    }
    return false; // stops propogation (so select2:select never fires)
  });
});
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-08T17:34:23.183

您需要从 .select2-results__options 元素中取消绑定 mouseup 事件。我在我的 templateResult 函数中这样做：

```
function templateResult(location) {

    var $location = $([html with links]);

    $('.select2-results__options').unbind('mouseup');

    return $location;
} 
```

如果要保留 select2 选择选项并关闭下拉菜单的默认行为，则需要手动触发这些事件：

```
$('.select2-results__options').unbind('mouseup');

$('a', $location).on('click', function (e) {
    $('#locations_dropdown').select2('val', location.id);
    $('#locations_dropdown').select2('close');
});

return $location; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-06T08:46:06.923

像这样的简单 onchange 事件也有助于解决问题

```
<select id="GetClientAccounts" class="default-select2 form-control col-md-4" onchange="GetClientAccounts();">
    <option disabled selected value="-1">Select a customer from here</option>
    @{
        if (ViewBag.customers != null)
        {
            foreach (CustomerTBL customer in ((List<CustomerTBL>)ViewBag.customers).OrderBy(c => c.cusCustomerName))
            {
                <option value="@customer.cusCustomerID">@customer.cusCustomerName</option>
            }
        }
    }
</select> 
```

# java - 从 Java 中的 KML 文件中提取坐标

> ID：15636303
> 
> 赞同：6
> 
> 时间：2013-03-26T11:45:57.710
> 
> 标签：java, parsing, coordinates, kml, jak

我正在尝试用 Java 解析 Kml 文件。因为我需要获取地标的坐标，以在 java 中生成一个 poligon，并使用它。

但我的问题是，我使用[JAK](https://code.google.com/p/javaapiforkml/)这个库来解析它，我无法提取我想要的信息。（我阅读了官方页面中的“帮助”，但我没有找到任何帮助解决我的问题）

我正在尝试做这样的事情：

```
final Kml kml = Kml.unmarshal(new File("C:/Users/A556520/Documents/Proyectos/GeoFencing/res/labasa.kml"));
final Document document = (Document)kml.getFeature();       
List<Feature> listafeatures = document.getFeature(); 
```

但在这一点上，我不知道如何提取坐标。

我要解析的文件是这个：[la basa](https://docs.google.com/file/d/0B8PlqUAyTdXPNFNUWmRvVGlVUkk/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T13:24:11.730

按照[javadocs](https://code.google.com/p/javaapiforkml/downloads/detail?name=JavaAPIforKml-apidocs.zip)（[非官方](http://www.nilab.info/docs/jak091130/)），您需要检查 - 使用`instanceof`- 每个`Feature`是否是 a `Placemark`，如果是则转换为它并获取`Geometry`需要检查它本身是否是 a `Polygon`，如果是则转换为它。之后，坐标的路径如下（就像它在 kml 文件中一样）：

```
getOuterBoundaryIs > getlinearRing > getCoordinates 
```

这是它在代码中的样子：

```
@Test
public void parseKml() {
    String src = "misctests/stackoverflow/kml/labasa.kml";
    try(InputStream is = getClass().getClassLoader().getResourceAsStream(src)) {
        Assert.assertNotNull(is);
        Kml kml = Kml.unmarshal(is);
        Feature feature = kml.getFeature();
        parseFeature(feature);
    }
}

private void parseFeature(Feature feature) {
    if(feature != null) {
        if(feature instanceof Document) {
            Document document = (Document) feature;
            List<Feature> featureList = document.getFeature();
            for(Feature documentFeature : featureList) {
                if(documentFeature instanceof Placemark) {
                    Placemark placemark = (Placemark) documentFeature;
                    Geometry geometry = placemark.getGeometry();
                    parseGeometry(geometry);
                }
            }
        }
    }
}

private void parseGeometry(Geometry geometry) {
    if(geometry != null) {
        if(geometry instanceof Polygon) {
            Polygon polygon = (Polygon) geometry;
            Boundary outerBoundaryIs = polygon.getOuterBoundaryIs();
            if(outerBoundaryIs != null) {
                LinearRing linearRing = outerBoundaryIs.getLinearRing();
                if(linearRing != null) {
                    List<Coordinate> coordinates = linearRing.getCoordinates();
                    if(coordinates != null) {
                        for(Coordinate coordinate : coordinates) {
                            parseCoordinate(coordinate);
                        }
                    }
                }
            }
        }
    }
}

private void parseCoordinate(Coordinate coordinate) {
    if(coordinate != null) {
        System.out.println("Longitude: " +  coordinate.getLongitude());
        System.out.println("Latitude : " +  coordinate.getLatitude());
        System.out.println("Altitude : " +  coordinate.getAltitude());
        System.out.println("");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-16T12:33:03.360

关于 A4L 答案，非常感谢，同时我添加了一些更多的提取方法，这些方法将从文件夹和文档中获取数据，使用点线和多边形提取，使用 javaapi4kml 使用包

```
<dependency>
<groupId>de.micromata.jak</groupId>
<artifactId>JavaAPIforKml</artifactId>
<version>2.2.0</version>
</dependency> 

@RequestMapping(value = "/testKml", method = RequestMethod.POST)
public Map<String, Object> parseKml(@RequestBody Map<String, Object> data){
    Map<String, Object> response = new HashMap<String, Object>();
    List<Map<String, Object>> wktObjrow = new ArrayList<Map<String, Object>>();
    String src = data.get("kmlfile").toString();
    try {
        URL url;
        url = new URL(src);
        URLConnection conn = url.openConnection();
        InputStream is = url.openStream();
        Assert.notNull(is);
        Kml kml = Kml.unmarshal(is);
        Feature feature = kml.getFeature();
        Map<String, Object> geodata = new HashMap<String, Object>();

        if(feature != null) {
            if(feature instanceof Document) {
                Document document = (Document) feature;
                List<Feature> featureList = document.getFeature();
                for(Feature documentFeature : featureList) {
                    if(documentFeature instanceof Placemark) {
                        geodata = new HashMap<String, Object>();
                        Placemark placemark = (Placemark) documentFeature;
                        Geometry geometry = placemark.getGeometry();
                        geodata = parseGeometry(geometry, documentFeature.getName().toString());
                        if(!geodata.isEmpty())
                        {
                            wktObjrow.add(geodata);
                        }
                    }
                    else if(documentFeature instanceof Folder) 
                    {
                        Folder folder = (Folder) documentFeature;
                        List<Feature> folderfeaturList = folder.getFeature();
                        for(Feature folderfeature : folderfeaturList) 
                        {
                            geodata = new HashMap<String, Object>();
                            if(folderfeature instanceof Placemark) {
                                Placemark placemark = (Placemark) folderfeature;
                                Geometry geometry = placemark.getGeometry();
                                //push each of return store in list
                                geodata = parseGeometry(geometry, placemark.getName().toString());
                                if(!geodata.isEmpty())
                                {
                                    wktObjrow.add(geodata);
                                }
                            }
                            else
                            {
                                System.err.println("folderfeatures was not of type Placemark"); 
                            }
                        }
                    }
                    else
                    {
                        System.err.println("Was not instance of Placemark or Folder");
                    }
                }
                System.out.println("wktObjrow : "+wktObjrow);
            }
            else
            {
                System.err.println("instance of feature was Not Document");
                if(feature instanceof Folder) {
                    Folder folder = (Folder) feature;
                    List<Feature> featureList = folder.getFeature();

                    geodata = new HashMap<String, Object>();

                    for(Feature documentFeature : featureList) {

                        if(documentFeature instanceof Placemark) {
                            Placemark placemark = (Placemark) documentFeature;
                            Geometry geometry = placemark.getGeometry();
                            if(documentFeature.getName().toString().length() > 0)
                            {
                                geodata =  parseGeometry(geometry, documentFeature.getName().toString());
                                if(!geodata.isEmpty())
                                {
                                    wktObjrow.add(geodata);
                                }
                            }
                            else 
                            {
                                geodata = parseGeometry(geometry, placemark.getName().toString());
                                if(!geodata.isEmpty())
                                {
                                    wktObjrow.add(geodata);
                                }
                            }

                        }else
                        {
                            System.err.println("Was not instance of Placemark");
                        }
                    }
                    System.out.println("wktObjrow : "+wktObjrow);

                }
            }
        }
        else
        {
            System.err.println("Feature was null");
            response.put("Null", "Feature was null");
        }
    }
    catch (Exception e) {
        // TODO: handle exception
        System.err.println("Exception @ : "+ e);
    }

    if(!wktObjrow.isEmpty() && wktObjrow != null)
    {
        response.put("data", wktObjrow);
    }

    return response;
}

public Map<String, Object> parseGeometry(Geometry geometry,String name) {
    // <Point> <LinearRing> <Geometry> <Model> <LineString> <Polygon> <MultiGeometry>

    Map<String, Object> response = new HashMap<String, Object>();
    List<Map<String, Object>> wktObjrow = new ArrayList<Map<String, Object>>();

    if(geometry != null) {
        if(geometry instanceof Polygon) {
            Polygon polygon = (Polygon) geometry;
            Boundary outerBoundaryIs = polygon.getOuterBoundaryIs();
            if(outerBoundaryIs != null) {
                LinearRing linearRing = outerBoundaryIs.getLinearRing();
                if(linearRing != null) {
                    List<Coordinate> coordinates = linearRing.getCoordinates();
                    if(coordinates != null) {
                        Map<String, Object> map = new HashMap<String, Object>();
                        ArrayList<String> wkt_lonlat = new ArrayList<String>();
                        for(Coordinate coordinate : coordinates) {
                            wkt_lonlat.add(coordinate.getLongitude()+" "+coordinate.getLatitude());
                        }
                        response.put("name",name);
                        response.put("category","POLYGON");
                        response.put("row","POLYGON(("+String.join(",", wkt_lonlat)+"))");
                    }
                    else
                    {
                        System.err.println("coordinate was null");
                    }
                }
            }
        }
        else if(geometry instanceof Point)
        {
            Point point = (Point) geometry;
            List<Coordinate> coordinates = point.getCoordinates();
            if(coordinates != null  && !coordinates.isEmpty())
            {
                if(coordinates != null) {

                    for(Coordinate coordinate : coordinates) {
                        Map<String, Object> map = new HashMap<String, Object>();
                        response.put("lon",coordinate.getLongitude());
                        response.put("lat",coordinate.getLatitude());
                        response.put("name",name);
                        response.put("category","POINT");
                    }
                }
            }
        }
        else if(geometry instanceof LineString)
        {
            LineString line = (LineString) geometry;
            List<Coordinate> coordinates = line.getCoordinates();
            if(coordinates != null  && !coordinates.isEmpty())
            {
                if(coordinates != null) {
                    Map<String, Object> map = new HashMap<String, Object>();
                    ArrayList<String> wkt_lonlat = new ArrayList<String>();
                    for(Coordinate coordinate : coordinates) {
                        wkt_lonlat.add(coordinate.getLongitude()+" "+coordinate.getLatitude());
                    }
                    response.put("name",name);
                    response.put("category","LINESTRING");
                    response.put("row","LINESTRING("+String.join(",", wkt_lonlat)+")");
                }
            }
       }
       else if(geometry instanceof MultiGeometry)
       {

            MultiGeometry multigeometry = (MultiGeometry) geometry;
               for (int j = 0; j < multigeometry.getGeometry().size(); j++) {
                    if(multigeometry.getGeometry().get(j) instanceof LineString)
                    {
                        LineString line = (LineString) multigeometry.getGeometry().get(j);
                        List<Coordinate> coordinates = line.getCoordinates();
                        if(coordinates != null  && !coordinates.isEmpty())
                        {
                            if(coordinates != null) {
                                Map<String, Object> map = new HashMap<String, Object>();

                                ArrayList<String> wkt_lonlat = new ArrayList<String>();

                                for(Coordinate coordinate : coordinates) {
                                    wkt_lonlat.add(coordinate.getLongitude()+" "+coordinate.getLatitude());
                                }
                                response.put("name",name);
                                response.put("category","LINESTRING");
                                response.put("row","LINESTRING("+String.join(",", wkt_lonlat)+")");
                            }
                        }
                    }
                    else if(multigeometry.getGeometry().get(j) instanceof Point)
                    {
                        Point point = (Point) multigeometry.getGeometry().get(j);
                        List<Coordinate> coordinates = point.getCoordinates();
                           if(coordinates != null  && !coordinates.isEmpty())
                           {
                               if(coordinates != null) {
                                   for(Coordinate coordinate : coordinates) {
                                    Map<String, Object> map = new HashMap<String, Object>();
                                    response.put("lon",coordinate.getLongitude());
                                    response.put("lat",coordinate.getLatitude());
                                    response.put("name",name);
                                    response.put("category","POINT");
                                   }
                               }
                           }
                    }
                    else if(multigeometry.getGeometry().get(j) instanceof Polygon)
                    {
                        Polygon polygon = (Polygon) multigeometry.getGeometry().get(j);
                        Boundary outerBoundaryIs = polygon.getOuterBoundaryIs();
                        if(outerBoundaryIs != null) {
                            LinearRing linearRing = outerBoundaryIs.getLinearRing();
                            if(linearRing != null) {
                                List<Coordinate> coordinates = linearRing.getCoordinates();
                                if(coordinates != null) {

                                    Map<String, Object> map = new HashMap<String, Object>();

                                    ArrayList<String> wkt_lonlat = new ArrayList<String>();

                                    for(Coordinate coordinate : coordinates) {
                                        wkt_lonlat.add(coordinate.getLongitude()+" "+coordinate.getLatitude());
                                    }
                                    response.put("name",name);
                                    response.put("category","POLYGON");
                                    response.put("row","POLYGON(("+String.join(",", wkt_lonlat)+"))");
                                }
                                else
                                {
                                    System.err.println("coordinate was null");
                                }
                            }
                        }
                    }
               }

       }
    }
    else
    {
        System.err.println("geometry was null");
        response.put("Null", "geometry was null");
    }
    return response;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-30T15:17:28.177

看到这篇文章，所以这是我在我的应用程序中使用的函数代码的一部分，用于从字符串 kmlText 中提取地标名称和坐标。

```
 if (kmlText != null & kmlText.length() > 0) {
    // Change case of relevant tags to match our search string case
    kmlText = kmlText.replaceAll("(?i)<Placemark>", "<Placemark>")
        .replaceAll("(?i)</Placemark>", "</Placemark>")
        .replaceAll("(?i)<name>", "<name>")
        .replaceAll("(?i)</name>", "</name>")
        .replaceAll("(?i)<coordinates>", "<coordinates>")
        .replaceAll("(?i)</coordinates>", "</coordinates>");
    // Get <Placemark> tag
    String[] kmlPlacemarks = kmlText.split("</Placemark>");
    if (kmlPlacemarks.length > 0) {
        for (Integer i = 0; i < kmlPlacemarks.length; i++) {
            // Add '</Placemark>' to the end - actually not necessary
            kmlPlacemarks[i] += "</Placemark>";
            if (kmlPlacemarks[i].indexOf("<Placemark>") > -1)
                /* Trim front to start from '<Placemark>'
                Otherwise additional tags may be in between leading
                to parsing of incorrect values especially Name */
                kmlPlacemarks[i] = kmlPlacemarks[i].substring(kmlPlacemarks[i].indexOf("<Placemark>"));
        }
        String tmpPlacemarkName;
        String tmpPlacemarkCoordinates;
        for (String kmlPlacemark: kmlPlacemarks)
            if ((kmlPlacemark.indexOf("<name>") > -1 && kmlPlacemark.indexOf("</name>") > -1) &&
                    (kmlPlacemark.indexOf("<coordinates>") > -1 && kmlPlacemark.indexOf("</coordinates>") > -1)) {
                tmpPlacemarkCoordinates = kmlPlacemark.substring(kmlPlacemark.indexOf("<coordinates>") + 13, kmlPlacemark.indexOf("</coordinates>"));
                tmpPlacemarkName = kmlPlacemark.substring(kmlPlacemark.indexOf("<name>") + 6, kmlPlacemark.indexOf("</name>"));
            }
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-29T09:36:30.687

上面的答案使用了现在似乎不受支持的库*de.micromata.opengis.kml 。*有一个更新的库，[OSM Bonus Pack](https://github.com/MKergall/osmbonuspack)，它有一个很好的 KmlDocument 类。我用它来提取坐标如下。它只提取线（道路），而不是多边形，但它应该是可修改的。

```
List<List<GeoPoint>> roads = new ArrayList<List<GeoPoint>>();

public void parseKmlDocument(KmlDocument doc) {
    int index = 0;
    for (KmlFeature kmlf: doc.mKmlRoot.mItems) {
        if ((kmlf instanceof KmlPlacemark))
        {
            KmlPlacemark placemark = (KmlPlacemark)kmlf;
            KmlGeometry kmlg = placemark.mGeometry;
            if (kmlg instanceof KmlMultiGeometry)
            {
                KmlMultiGeometry kmlmg = (KmlMultiGeometry)kmlg;
                for (KmlGeometry thisKmlg: kmlmg.mItems)
                {
                    ArrayList<GeoPoint> mCoordinates = thisKmlg.mCoordinates;
                    roads.add(index++, mCoordinates);

                }
            }
        }
        else {
                // kmlg is a LineString
                    ArrayList<GeoPoint> mCoordinates = kmlg.mCoordinates;
                    Road road = new Road(mCoordinates);
                    roads.add(road);
                    ++rIndex;

            }
    }
    // checking the result
    int road = 0 ;
    int gpoint = 0;
    for (List<GeoPoint> listGp: roads) {
        Log.d("road ", String.valueOf(road++));
        for (GeoPoint gp: listGp) {
            gpoint++;
            Log.d("    coords ",gp.getLatitude() + " " + gp.getLongitude());
        }
    }
    Log.d("Summary ",road + " roads containing " + gpoint + " geopoints");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-30T15:22:06.090

谢谢@A4L，这确实是一个更新，也是一种更常规的方式，因此对 Groovy 进行了更改，并且尝试了比给出的示例更多的类型，并且深入挖掘了文档层：

```
 /**
     * This starts the process and reads in the uk file
     */
    public static void parseKml() {
        def src = ServletContextHolder.servletContext.getRealPath("/KML/doc.kml")
        InputStream is = new FileInputStream(src);
        Kml kml = Kml.unmarshal(is);
        Feature feature = kml.getFeature();
        parseFeature(feature);
    }

    /**
     * This is step 2 of the process it figures out if it has a direct placemark mapping on kml
     * or if this is part of some big folder structure
     * @param feature
     */
    public static void parseFeature(Feature feature) {
        if(feature) {
            if(feature instanceof Document) {
                feature?.feature?.each { documentFeature->
                    if(documentFeature instanceof Placemark) {
                        getPlacemark((Placemark) documentFeature)
                    } else if (documentFeature instanceof Folder) {
                        getFeatureList(documentFeature.feature)
                    }
                }
            }
        }
    }

    /**
     * This iterates over itself over and over again to gain access to placemarks within folders
     * The uk map boundary was nested folders within folders
     * @param features
     * @return
     */
    public static List<Feature> getFeatureList(List<Feature> features) {
        features?.each { Feature  f ->
            if (f instanceof Folder) {
                getFeatureList(f.getFeature())
            } else if (f instanceof Placemark) {
                getPlacemark((Placemark) f)
            }
        }
    }

    /**
     * This in short kicks off looking at a placemark it's name then parsing through each of its geometry points
     * This controls the listener content or should I say builds it up from within this helper
     * @param placemark
     */
    public static void getPlacemark(Placemark placemark) {
        Geometry geometry = placemark.getGeometry()
        List results = parseGeometry(geometry)
        GeoMapListener.update(placemark.name, results)
    }

    private static List parseGeometry(Geometry geometry) {
        List results=[]
        if(geometry != null) {
            if(geometry instanceof Polygon) {
                Polygon polygon = (Polygon) geometry;
                Boundary outerBoundaryIs = polygon.getOuterBoundaryIs();
                if(outerBoundaryIs != null) {
                    LinearRing linearRing = outerBoundaryIs.getLinearRing();
                    if(linearRing != null) {
                        List<Coordinate> coordinates = linearRing.getCoordinates();
                        if(coordinates != null) {
                            for(Coordinate coordinate : coordinates) {
                                results << parseCoordinate(coordinate);
                            }
                        }
                    }
                }
            } else  if (geometry instanceof LineString) {
                LineString lineString = (LineString) geometry;
                List<Coordinate> coordinates = lineString.getCoordinates();
                if (coordinates != null) {
                    for (Coordinate coordinate : coordinates) {
                        results <<  parseCoordinate(coordinate);
                    }
                }
            }
        }
        return results
    }

    private static Map parseCoordinate(Coordinate coordinate) {
        Map results=[:]
        if(coordinate) {
            results.longitude= coordinate.longitude
            results.latitude= coordinate.latitude
            results.altitude= coordinate.altitude
        }
        return results
    } 
```

# ios - 如何在 iOS 6 中使用具有多个子视图的现有自定义视图进行自动布局

> ID：15636305
> 
> 赞同：0
> 
> 时间：2013-03-26T11:46:02.460
> 
> 标签：ios, constraints, frame, autolayout, addsubview

我正在尝试使用约束来制作布局，但我有许多带有内部嵌套子视图的自定义控件。我正在将约束添加到顶视图（CustomView），但它没有正确布置子视图。

前任。我有 TextFieldWithLabel 类，它在 UITextField 的顶部和下方显示标签，我正在创建 TextFieldWithLabel 的实例并添加到带有约束的超级视图。

但它没有按预期显示结果。虽然它是可见的，但没有放在我想要的位置。为此，我不想更改整个 TextFieldWithLabel 类的敌人自动布局。

请帮忙！

```
usernameTextField = [[TextFieldWithLabel alloc] initWithFrame:CGRectMake(0, 0, 100, 50) name:@"UserName"];
    [usernameTextField setTranslatesAutoresizingMaskIntoConstraints:NO];
    [superview addSubview:usernameTextField];
    NSLayoutConstraint* myConstraint = [NSLayoutConstraint constraintWithItem:usernameTextField
                                                                    attribute:NSLayoutAttributeCenterY
                                                                    relatedBy:NSLayoutRelationEqual
                                                                       toItem:superview
                                                                    attribute:NSLayoutAttributeCenterY
                                                                   multiplier:1
                                                                     constant:0];

    [superview addConstraint:myConstraint];

    myConstraint = [NSLayoutConstraint constraintWithItem:usernameTextField
                                                attribute:NSLayoutAttributeCenterX
                                                relatedBy:NSLayoutRelationEqual
                                                   toItem:superview
                                                attribute:NSLayoutAttributeCenterX
                                               multiplier:1
                                                 constant:0];
    [superview addConstraint:myConstraint]; 
```

屏幕截图：此处未居中，并且文本字段 (RedColor) 也不可点击。标签和文本字段位于 TextFieldWithLabel 内。请注意：TextFieldWithLabel 是 ComponentView 的子类，而 ComponentView 是 UIView 的子类。所以我怀疑这可能是问题所在？我是否也需要自动布局 ComponentsView。 ![UITextField](../Images/de41265deeffe93c39e662cb35895432.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T08:34:20.943

在自动布局下，您的帧大小将被忽略（您在 期间使用的那个`initWithFrame:`）。您已经指定了定位约束，但与大小无关，因此您`TextFieldWithLabel`位于屏幕的中心，大小为零。

文本字段和标签仍然可见，因为您说您没有在此控件内部使用自动布局 - 大概您确实在那里设置了一些框架和自动调整大小的蒙版。因此，文本字段和标签超出​​了 的范围`TextFieldWithLabel`，因此它们是可见的，但可能不会响应触摸。

要解决此问题，您有两种选择：

*   在内部使用自动布局 - 例如，如果您有此约束（在 VFL 中），那么它将自动为您的控件提供高度：`"V:|-[label]-[textField]-|"`
*   在上面的代码中添加尺寸限制 - 使用与 initWithFrame 中相同的尺寸。这是一个用于设置高度的方法：

    ```
    [NSLayoutConstraint constraintWithItem:usernameTextField 
                                 attribute:NSLayoutAttributeHeight 
                                 relatedBy:NSLayoutRelationEqual 
                                    toItem:nil 
                                 attribute:NSLayoutAttributeNotAnAttribute 
                                multiplier:0.0 
                                  constant:50.0]; 
    ```

我在 UIView 上有一个类别来简化[此处](https://github.com/jrturton/UIView-Autolayout)常见约束的创建。使用您要做的类别代码`centerInView:`和`constrainToSize:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:38:36.553

不确定您如何处理 TextFieldWithLabel，我可能不清楚它实际上是 UIView 子类（我总是将 UIView 子类命名为以 View 结尾）

在这种情况下，您最终会在构建应用程序时得到一个偷偷摸摸的 View。在 InterfaceBuilder 中，您拖入了一个视图，并且可能将类设置为“TextFieldWithLabel_View_ **”**。您执行了通常的“自定义约束”，但是如果“TextFieldWithLabel_ **View_** ”类已从 UIView 子类化，则您引入了一个中间层。

在您布局标签和文本字段的 XIB 或代码中，您可能已经相对于您自己的子类的 UIView 设置了正确的约束。

问题是，子类 UIView 的约束未链接到已随 StoryBoard 拖入的视图。

这是我所做的：

```
@interface TextFieldWithLabel__View__ ()
@property (strong, nonatomic) IBOutlet UIView *backgroundView;
@property (weak, nonatomic) IBOutlet UILabel *labelText;
....
....
@end

-(id)initWithCoder:(NSCoder *)decoder{
    if ((self = [super initWithCoder:decoder])){
        [self addSubview:[[[NSBundle mainBundle] loadNibNamed:@"TextFieldWithLabel__View__" owner:self options:nil] objectAtIndex:0]];
    }

    // Set the backgroundView (the one needed for the IB to create a UIView for XIB)
    // Left, Right, Top and Bottom to 0

    _backgroundView.translatesAutoresizingMaskIntoConstraints = NO;
    [self addConstraint:[NSLayoutConstraint constraintWithItem:_backgroundView
                                                     attribute:NSLayoutAttributeLeft
                                                     relatedBy:NSLayoutRelationEqual
                                                        toItem:self
                                                     attribute:NSLayoutAttributeLeft
                                                    multiplier:0
                                                      constant:0
                         ]
     ];
    [self addConstraint:[NSLayoutConstraint constraintWithItem:_backgroundView
                                                     attribute:NSLayoutAttributeRight
                                                     relatedBy:NSLayoutRelationEqual
                                                        toItem:self
                                                     attribute:NSLayoutAttributeRight
                                                    multiplier:1
                                                      constant:0
                         ]
     ];
    [self addConstraint:[NSLayoutConstraint constraintWithItem:_backgroundView
                                                     attribute:NSLayoutAttributeTop
                                                     relatedBy:NSLayoutRelationEqual
                                                        toItem:self
                                                     attribute:NSLayoutAttributeTop
                                                    multiplier:0
                                                      constant:0
                         ]
     ];
    [self addConstraint:[NSLayoutConstraint constraintWithItem:_backgroundView
                                                     attribute:NSLayoutAttributeBottom
                                                     relatedBy:NSLayoutRelationEqual
                                                        toItem:self
                                                     attribute:NSLayoutAttributeBottom
                                                    multiplier:1
                                                      constant:0
                         ]
     ];
    return self;
} 
```

现在，当您想要重新定义 CustomView、拖动项目、调整分配区域的大小等时，它会很好地通过 CustomView 的约束表单到您*的*TextFieldWithLabel_View_

并在情节提要中勾选“AutoResize Subviews”

希望有帮助。

PS 不要放弃 AutoLayout...掌握它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:54:23.113

如果您不希望您的标签（或其他子视图）具有调整大小约束，那么...

```
 self.YourLabel.translatesAutoresizingMaskIntoConstraints = NO; 
```

# php - PHP foreach combine_array - 相同值问题

> ID：15636307
> 
> 赞同：0
> 
> 时间：2013-03-26T11:46:08.887
> 
> 标签：php, mysql

我正在使用 php&mysql 开发发票应用程序。提交发票后我的问题是我想减少数量行。我几乎完成了这段代码

html

```
<input type="text" name="qty[]" class="productQty"/>
<input type="text" name="product_id[]" class="productId" readonly/> 
```

php

```
<?php 
$result1 = mysql_query("SELECT * FROM items");
if (!$result1) {
    die("Query to show fields from table failed");
}
$qty = $_POST["qty"];
$qtys = array_values($qty);
$id= $_POST["product_id"];
$ids = array_values($id);
foreach (array_combine($qtys, $ids) as $id => $qty) {
    $show_id =  $id;
    $quantity =  $qty;
    echo "<p><b>" . $show_id . "</b></p>";
    echo "<p><b>" . $quantity . "</b></p>";
    /*
    $stock_update = "Update items set Stock= stock - '$quantity' where ID='$show_id'";
    if (mysqli_query($con, $stock_update)) {
        echo "stock done";
    } else {
        echo "Error creating table: " . mysqli_error();
    }
    */
}

?> 
```

结果
1
BKK01

2
笔01

但问题是数量值是否相等。现在结果
1
PEN01

无法显示第一项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:47:52.597

改变 ：

```
foreach (array_combine($qtys, $ids) as $id => $qty) { 
```

至 ：

```
foreach (array_combine($ids, $qtys) as $id => $qty) { 
```

您的 ID 和数量顺序不正确。而且，我想你的 id 将是一个独特的，所以不会有任何问题

```
array array_combine ( array $keys , array $values ) 
```

参考： http: [//php.net/manual/en/function.array-combine.php](http://php.net/manual/en/function.array-combine.php)

# android - 安卓吐司错误

> ID：15636309
> 
> 赞同：3
> 
> 时间：2013-03-26T11:46:19.123
> 
> 标签：android, asynchronous, toast

我收到一个`FATAL EXCEPTION: AsyncTask #1`错误。

我没有创建异步任务，我只是简单地调用了下面的代码。

我从连接到网络的类中调用以下内容：

```
Toast.makeText(context, "Connection Successful", Toast.LENGTH_LONG).show(); 
```

`context`已在构造函数中从`MainActivity`.

我不确定我在这里做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:31:17.880

`Network`从类（非活动类）显示 Toast 进行以下更改：

**步骤：1**将活动上下文传递给网络类而不是`getBaseContext()`：

```
netConnection = new Network(new Network.OnMessageReceived() { 
            @Override 
            // here the messageReceived method is implemented 
           public void messageReceived(String message) { 
                 // this method calls the onProgressUpdate 
                 publishProgress(message); 
           } 
     },Your_Current_Activity_Name.this); 
```

**第 2 步：**用于`runOnUiThread`从 Network 类显示 Toast ：

```
 public boolean connect() {
 //....your code..
 Activity activity = (Activity) context;
 activity.runOnUiThread(new Runnable() {
    public void run() {
        //show your Toast here..
       Toast.makeText(context,"Connection Successful", Toast.LENGTH_LONG).show();
    }
});
 //....your code..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:17:14.997

这里有什么奇怪的答案:)

第一个人要你扩展`Network`类[`Activity`](http://developer.android.com/reference/android/app/Activity.html#q=getbasecontext)，第二个告诉你你还没有 Android SDK :)

您只需要将正确`Context`的对象发送到您的`Network`对象，您需要`Context`从方法发送对象，因为此上下文对象对于消息[`getBaseContext()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getBaseContext%28%29)是正确的（[您可以在此处阅读有关该内容的说明](https://stackoverflow.com/questions/9605459/android-why-must-use-getbasecontext-instead-of-this)）。[`Toast`](http://developer.android.com/reference/android/widget/Toast.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:47:04.980

```
Toast.makeText(getApplicationContext(), "Connection Successful", Toast.LENGTH_LONG).show() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:51:05.430

改变：

```
Toast.makeText(context, "Connection Successful", Toast.LENGTH_LONG).show(); 
```

至

```
Toast.makeText(getBaseContext(), "Connection Successful", Toast.LENGTH_LONG).show(); 
```

# python - Django 标签/过滤器和模板

> ID：15636313
> 
> 赞同：1
> 
> 时间：2013-03-26T11:46:27.300
> 
> 标签：python, django, django-templates

我有这个项目：

```
app/
app/Items/
app/Management/
... 
```

在`Management`我有`templatetags`，我有我的整个项目的标签。

```
app/Management/templatetags/main_filters.py
app/Management/templatetags/__init__.py 
```

在这个**文件**中，我有：

```
from django import template

register = template.Library()

@register.filter(name='createmenu')
def createmenu(value):
... 
```

然后在**html**模板中我有：

```
{%load main_filters%}
...
{{dataList|createmenu}}
... 
```

和我进入 INSTALLED_APPS的**settings.py ：**

```
...
"Management.templatetags",
... 
```

最后我总是有下一个错误：

```
'main_filters' is not a valid tag library: 
Template library main_filters not found, tried django.templatetags.main_filters,
django.contrib.staticfiles.templatetags.main_filters,
django.contrib.admin.templatetags.main_filters 
```

我已经尝试将它 ( `./Management/templatetags Folder`) 放在文件夹**ITEMS**中并更改为`settings.py`, with `Items.templatetags`, 并且它可以工作。怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:22:25.800

您可能希望在`INSTALLED_APPS`. `templatetags`只要`{% load %}`被调用，已安装应用程序内的模块就会自动加载。

此外，错误显示只检查了三个路径

> > > ...尝试 django.templatetags.main_filters、django.contrib.staticfiles.templatetags.main_filters、django.contrib.admin.templatetags.main_filters

然后我们可以得出结论，`Management.templatetags.main_filters`没有得到检查，通常有几个原因：

1.  `__init__.py`目录中的缺失`templatetags`。你有一个。
2.  `Management`未正确安装。案子。
3.  奇怪的进口问题......幸运的是不是=）

# nginx - 为什么'accept_mutex''on'在Nginx中是默认的？

> ID：15636319
> 
> 赞同：7
> 
> 时间：2013-03-26T11:46:35.040
> 
> 标签：nginx, mutex

我发现'accept_mutex'在Nginx中默认为'on'，如下所示：

> [http://wiki.nginx.org/EventsModule](http://wiki.nginx.org/EventsModule)

那么接受连接是否需要互斥锁？为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-20T01:48:52.657

从 nginx 主线版本 1.11.3（2016-07-26 发布）开始，[`accept_mutex`现在默认为`off`](https://nginx.org/en/docs/ngx_core_module.html#accept_mutex). 这部分是因为新标志提供了没有额外开销`EPOLLEXCLUSIVE`的好处。`accept_mutex`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T19:20:39.773

想象一些进程在一个端口上监听并在 epoll 中等待。如果没有接受互斥锁，所有进程都会唤醒，但只有一个能够接受连接。其他进程唤醒了非生产性。这是众所周知的[http://en.wikipedia.org/wiki/Thundering_herd_problem](http://en.wikipedia.org/wiki/Thundering_herd_problem)

但这不是故事的结局。

通常或总是不成功的接受会导致上下文切换： [http ://en.wikipedia.org/wiki/Lock_convoy](http://en.wikipedia.org/wiki/Lock_convoy)

我的测试显示，如果没有接受互斥锁，性能会损失 5-10%。

更新：“接受互斥锁”不仅仅是围绕接受锁定的互斥锁。它是用于在工作人员之间序列化侦听服务器端口的技术的名称。某一时刻只有一名工作人员正在监听给定的端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-24T13:39:43.243

检查

*   *接受序列化 - 多个套接字*

*   *接受序列化 - 单套接字*

本 Apache 文档的部分内容。[https://httpd.apache.org/docs/2.4/misc/perf-tuning.html](https://httpd.apache.org/docs/2.4/misc/perf-tuning.html)。（与我发布的其他 2 个文档相比，此文档最重要）

这非常鼓舞人心，我还阅读了

[http://nginx.org/en/docs/ngx_core_module.html#accept_mutex](http://nginx.org/en/docs/ngx_core_module.html#accept_mutex)解释以及[https://www.nginx.com/blog/performance-tuning-tips-tricks/ （带有](https://www.nginx.com/blog/performance-tuning-tips-tricks/)**accept_mutex**的搜索页面）。

看完这些，我想 Nginx 在这方面与 Apache 非常相似。

# mysql - 用于过滤的 SQL

> ID：15636325
> 
> 赞同：0
> 
> 时间：2013-03-26T11:46:52.687
> 
> 标签：mysql

通过引用[MySQL 中的协作过滤？](https://stackoverflow.com/questions/2440826/collaborative-filtering-in-mysql)，我创建了以下内容：

```
CREATE TABLE `ub` (
  `user_id` int(11) NOT NULL,
  `book_id` varchar(10) NOT NULL,
  `rate` int(11) NOT NULL,
  PRIMARY KEY (`user_id`,`book_id`),
  UNIQUE KEY `book_id` (`book_id`,`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

insert into ub values (1, 'A', '8'), (1, 'B', '7'), (1, 'C', '10');
insert into ub values (2, 'A', '8'), (2, 'B', '7'), (2, 'C', '10'), (2,'D', '8'), (2,'X', '7');
insert into ub values (3, 'X', '10'), (3, 'Y', '8'), (3, 'C', '10'), (3,'Z', '10');
insert into ub values (4, 'W', '8'), (4, 'Q', '8'), (4, 'C', '10'), (4,'Z', '8'); 
```

然后，我可以得到下表并了解它是如何工作的。

```
create temporary table ub_rank as 
select similar.user_id,count(*) rank
from ub target 
join ub similar on target.book_id= similar.book_id and target.user_id != similar.user_id and target.rate= similar.rate
where target.user_id = 1
group by similar.user_id;

select * from ub_rank;

+---------+------+
| user_id | rank |
+---------+------+
|       2 |    3 |
|       3 |    1 |
|       4 |    1 |
+---------+------+ 
```

但是，在下面的代码之后，我开始感到困惑。

```
select similar.rate, similar.book_id, sum(ub_rank.rank) total_rank
from ub_rank
join ub similar on ub_rank.user_id = similar.user_id 
left join ub target on target.user_id = 1 and target.book_id = similar.book_id and target.Rate= similar.Rate 
where target.book_id is null
group by similar.book_id
order by total_rank desc, rate desc;

+---------+------------+
| book_id | total_rank |
+---------+------------+
| X       |          4 |
| D       |          3 |
| Z       |          2 |
| Y       |          1 |
| Q       |          1 |
| W       |          1 |
+---------+------------+

   (1, 'A', '8'), (1, 'B', '7'), (1, 'C', '10');

   (2, 'A', '8'), (2, 'B', '7'), (2, 'C', '10'), (2,'D', '8'), (2,'X', '7'); 
```

我想做的是，假设用户 1 和 2 具有相似的行为（在匹配评级之前选择 A、B、C），因此我会向用户 A 推荐 D ，因为它具有更高的比率。

似乎上面的代码不这样做？因为，排名第一的是 X。我如何更改代码以实现上述目标？

或者，实际上现有的方法是更好/更准确的推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:50:29.680

现有的查询是根据每本书的排名总值对结果进行排名，然后使用比率作为总排名相同的书籍的平局。（此外，rate 本质上是随机的，因为similar.rate 不会聚合、分组或在功能上依赖于查询中的分组项。）

因此，X 的排名将高于 D，因为它已被一名 3 级用户和一名 1 级用户选择，总排名为 4，而 D 仅由一名 3 级用户选择。

您可以更改查询以包含按排名加权的评级元素 - 例如：

```
select similar.book_id, 
       sum(ub_rank.rank) total_rank, 
       sum(ub_rank.rank*similar.rate) wtd_rate
from ub_rank
join ub similar on ub_rank.user_id = similar.user_id 
left join ub target on target.user_id = 1 and target.book_id = similar.book_id and target.Rate= similar.Rate 
where target.book_id is null
group by similar.book_id
order by wtd_rate desc, total_rank desc 
```

- 尽管在这种情况下，它的排名仍然会更高 X，因为它的排名为 3 的用户的评分为 7，加上排名为 1 的用户的评分为 10，总排名为 31，而 D 的总排名为24.

（[这里是 SQLFiddle](http://sqlfiddle.com/#!2/a3f33/11)）

如果您希望 X 的排名高于 D，您需要决定您将使用哪些标准将 X 的排名高于 D。

# ruby-on-rails - 为什么我的 pg_search 会出现无限循环？

> ID：15636328
> 
> 赞同：0
> 
> 时间：2013-03-26T11:46:57.280
> 
> 标签：ruby-on-rails, pg-search

当我将浏览器指向 时`http://localhost:3000/searches`，出现以下错误：

`Error 324 (net::ERR_EMPTY_RESPONSE): The server closed the connection without sending any data.`

为什么？我该如何解决这个问题？

相关代码如下...

**/config/routes.rb**：

```
resources :searches, :only => [:index] 
```

**/app/controllers/searches_controller.rb**：

```
class SearchesController < ApplicationController  
  respond_to :html
  filter_access_to :all
  def index
    @term = params[:term]
    @results = PgSearch.multisearch(@term) unless @term.blank?
    redirect_to searches_path
  end
end 
```

**/app/views/searches/index.html.haml**：

```
.textbox
  = render "shared/notice"
  %h1 Advanced Search
  = simple_form_for @searches do |f|
    = f.input :term
    = f.button :submit
  - unless @results.blank?
    - @results.each do |result|
      %h3= result.searchable.header
      %p= result.searchable.body 
```

**/config/authorization_rules.rb**：

```
authorization do
  role :admin do
    has_permission_on [...snip... :searches], :to => [:index, :show, :new, :create, :edit, :update, :destroy, :print, :none, :audit]     
  end
end 
```

**/app/models/reference.rb**：

```
class Reference < ActiveRecord::Base
  has_paper_trail
  include PgSearch
  multisearchable :against => [:source_text, :citation]
  attr_accessible :reference_ids, :question_ids
  attr_accessible :url, :citation, :details, :veracity_id, :original, :source_text
  has_many :footnotes
  def header
    self.citation
  end
  def body
    self.details
  end
end 
```

**/app/models/footnote.rb**：

```
class Footnote < ActiveRecord::Base
  has_paper_trail
  include PgSearch
  multisearchable :against => [:details]
  attr_accessible :reference_id, :details, :page_range, :relevant
  belongs_to :reference
  def header
    [self.reference.citation, " ", self.page_range].join
  end  
  def body
    self.details
  end
end 
```

**/db/migrate/20130326110126_create_pg_search_documents.rb**：

```
class CreatePgSearchDocuments < ActiveRecord::Migration
  def self.up
    say_with_time("Creating table for pg_search multisearch") do
      create_table :pg_search_documents do |t|
        t.text :content
        t.belongs_to :searchable, :polymorphic => true
        t.timestamps
      end
    end
  end
  def self.down
    say_with_time("Dropping table for pg_search multisearch") do
      drop_table :pg_search_documents
    end
  end
end 
```

**/db/migrate/20130326110723_rebuild_search_indexes.rb**：

```
class RebuildSearchIndexes < ActiveRecord::Migration
  def up
    PgSearch::Multisearch.rebuild(Reference)
    PgSearch::Multisearch.rebuild(Footnote)
  end
  def down
    PgSearch::Reference.delete_all
    PgSearch::Footnote.delete_all
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:33:02.560

你有一个循环重定向；`redirect_to searches_path`只需将请求发送回相同的操作。

试着把`redirect_to`线拿出来。这样 Rails 将`app/views/searches/index.html.haml`默认呈现。然后张贴到表格应该`index`再次请求并产生你想要的。

# multithreading - 是否需要在 perl 中锁定共享变量以进行读取访问？

> ID：15636329
> 
> 赞同：0
> 
> 时间：2013-03-26T11:47:00.233
> 
> 标签：multithreading, perl, locking

我在 perl 上使用共享变量和 use [threads::shared](http://perldoc.perl.org/threads/shared.html "线程::共享")。我们只能从单个线程修改该变量，所有其他线程只能“读取”该变量。

在“阅读”线程中是否需要锁定

```
 {
    lock $shared_var;
    if ($shared_var > 0) .... ;
  } 
```

?

在没有锁定的情况下进行简单验证是否安全（在“阅读”线程中！），比如

```
 if ($shared_var > 0) .... 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:52:02.717

在设置或获取标量时，不需要锁定来保持内部完整性。

在您的特定情况下是否需要它取决于读者、其他读者和作者的需求。不锁定几乎没有意义，但您没有提供足够的详细信息让我们确定您的需求。

例如，在编写器更新共享变量后使用旧值可能是不可接受的。对于初学者来说，这可能会导致一个线程仍在使用旧值而另一个线程正在使用新值的情况，如果这两个线程交互，这种情况可能是不可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:08:28.073

这取决于在某个时间点或其他时间点测试条件是否有意义。然而问题在于，在绝大多数情况下，布尔测试意味着其他东西，当你读完表示它代表先前状态的条件时，这些东西可能已经改变了。

想想看。如果这是一个微不足道的测试，那么它就没有什么意义——你必须质疑你为什么要做它。如果这是一个重要的测试，那么它说明了一个可能存在也可能不存在的连贯状态——除非你知道，否则你无法确定`lock`。

很多时候，比如在实时报告中，您并不真正关心数据库提供给您的快照，您只需要一个相对最新的快照。但是，作为其事务逻辑的一部分，它会完整地了解提交之前的情况。我认为您不太可能在代码中找到这一点，其中当前状态就是当前状态——甚至处于临时状态的状态也是确定状态。

我想这可能会有所不同的一次是队列的循环访问。如果一个消费者这次没有得到头条记录，那么他们中的一个将在下一次得到。您可能可以节省一些处理时间，异步访问队列计数器。但在这种情况下，它在仅一次迭代的情况下意义*不大*。

在上述情况下，您只需要在之后放置一些锁定级别的指令，即预期队列实际上可能是空的，即使您的测试表明它有数据。所以，如果它只是一个初步测试，你必须有逻辑将测试视为不可靠，因为它实际上是。

# mvvm - 使用 MVVM 在 DXGrid 中绑定所选项目

> ID：15636330
> 
> 赞同：1
> 
> 时间：2013-03-26T11:47:03.853
> 
> 标签：mvvm, devexpress, selecteditem

我在具有以下两个属性的 WPF 应用程序中有一个 ViewModel：

```
public Customer Customer { get; set; }
public ObservableCollection<Customer> Customers { get; set; } 
```

在我看来，我有一个 DXGrid。如何将所选项目绑定到客户属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:39:53.257

你应该使用[`SelectedRowsSource`](http://www.devexpress.com/Support/Center/p/E3139.aspx)财产。将其绑定到`ObservableCollection<Customer>`. 您的代码将如下所示：

```
public ObservableCollection<Customer> SelectedCustomers { get; set; }
public ObservableCollection<Customer> Customers { get; set; } 
```

……

```
 <dxg:GridControl ItemsSource="{Binding Customers}" AutoPopulateColumns="True">
        <dxg:GridControl.View>
            <dxg:TableView MultiSelectMode="Row" NavigationStyle="Row" 
                 SelectedRowsSource="{Binding SelectedCustomers}" />
        </dxg:GridControl.View>
    </dxg:GridControl> 
```

# asp.net - SQL 存储过程中的 AZ 循环

> ID：15636336
> 
> 赞同：2
> 
> 时间：2013-03-26T11:47:35.277
> 
> 标签：asp.net, sql, stored-procedures

对于一个项目，我必须遍历字母表并针对数据库中的某些值运行每个字母的搜索。该函数将返回每个字母的匹配数。

我希望能够在 SQL 存储过程中执行此操作，但我不确定如何在 SP 中执行“FOR 字母 = A 到 Z”循环。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:07:42.000

```
with ATable(c) as
(
  select cast('A' as CHAR(1)) as c
  union all
  select CHAR(ASCII(c)+1) as C from ATable where C<'Z'

)
select * from ATable 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!3/d41d8/11628)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:57:10.167

如果您只需要英文字符，则取决于字母表，您可以从 65（ascii 表示 A）和 90（Z）循环并使用`char letter = (char)i`来获取字母。

如果您还需要非英语的，只需设置一个网络配置设置“ABC......Z”并循环遍历它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T11:56:50.113

使用从 65 (A) 到 90 (Z) 的循环，并使用[T-SQL CHAR() 函数](http://msdn.microsoft.com/en-us/library/ms187323.aspx)。

当然，我假设您使用的是 SQL Server 数据库。如果没有，请发布您正在使用的数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:56:54.423

您需要使用“分组依据”并且可能在查询中也包含“计数”。你可以在这里找到更多信息[http://msdn.microsoft.com/en-us/library/ms177673.aspx](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T11:58:13.797

```
;WITH Alphabet AS 
(
    SELECT CHAR(65) AS Letter, 65 AS Code
    UNION ALL
    SELECT CHAR(Code + 1),  Code + 1
    FROM Alphabet
    WHERE Code < 90
) 

SELECT Letter 
FROM Alphabet 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-30T07:21:00.107

```
WITH alpha AS
(
    SELECT 65 AS c
    UNION ALL
    SELECT c + 1 FROM alpha
    WHERE c < 90
)
SELECT CHAR(c) FROM alpha 
```

# algorithm - 装箱优化最佳拟合

> ID：15636346
> 
> 赞同：-2
> 
> 时间：2013-03-26T11:47:59.857
> 
> 标签：algorithm, optimization, cut, bin-packing

我有这个 Bin 包装代码：

```
Public Class Cortar
    Private _Cortes() As Integer
    Public BarrasCortes()() As Integer
    Private _TamanhoBarra As Integer = 100

    Public Property TamanhoBarra() As Integer
        Get
            Return _TamanhoBarra
        End Get
        Set(ByVal Value As Integer)
            _TamanhoBarra = Value
        End Set
    End Property

    Public Property Cortes() As Integer()
        Get
            Return _Cortes
        End Get
        Set(ByVal Value As Integer())
            _Cortes = Value
        End Set
    End Property

    Public Sub MelhorCorte()
        'Checks to make sure everything is initialized
        If Cortes Is Nothing Then Exit Sub

        Dim CortesCopy(Cortes.GetUpperBound(0)) As Integer
        ReDim BarrasCortes(0)
        'Bin Number we are on, Bin Element we are on, Amount placed in the current Bin
        Dim BinNumber, BinElement, BinCount As Integer
        Dim BestBin, BestBinAmount As Integer
        Dim i, j, k As Integer

        'Make a copy of the array incase we need to sort it
        DeepCopyArray(Cortes, CortesCopy)

        'Declare the first element in the first Bin
        ReDim BarrasCortes(0)(0)

        'Loop through each Element and place in a Bin
        For i = 0 To CortesCopy.GetUpperBound(0)
            BestBin = -1
            BestBinAmount = -1

            For j = 0 To BinNumber
                BinElement = BarrasCortes(j).GetUpperBound(0)

                'Count the amount placed in this Bin
                BinCount = 0
                For k = 0 To BinElement
                    BinCount += BarrasCortes(j)(k)
                Next

                'Find the most full Bin that can hold this Element
                If BestBinAmount < BinCount AndAlso BinCount + CortesCopy(i) <= Me.TamanhoBarra Then
                    BestBinAmount = BinCount
                    BestBin = j
                End If
            Next

            If BestBin = -1 Then
                'There wasn't room for the Element in any existing Bin
                'Create a new Bin
                ReDim Preserve BarrasCortes(BinNumber + 1)
                BinNumber += 1

                'Initialize first element of new bin
                ReDim BarrasCortes(BinNumber)(1)
                BinElement = 0

                BarrasCortes(BinNumber)(BinElement) = CortesCopy(i)
            Else
                'There's room for this Element in an existing Bin
                'Place Element in "Best Bin"
                BinElement = BarrasCortes(BestBin).GetUpperBound(0)
                ReDim Preserve BarrasCortes(BestBin)(BinElement + 1)
                BarrasCortes(BestBin)(BinElement) = CortesCopy(i)
            End If
        Next

        'All Cortes have been place, now we go back and remove unused Cortes
        For i = 0 To BinNumber
            For j = 0 To BarrasCortes(i).GetUpperBound(0)
                If BarrasCortes(i)(j) = 0 Then
                    ReDim Preserve BarrasCortes(i)(j - 1)
                End If
            Next
        Next

        GC.Collect()
    End Sub

    Private Sub DeepCopyArray(ByVal ArrayStart() As Integer, ByVal ArrayEnd() As Integer)
        Dim i As Integer

        For i = 0 To ArrayStart.GetUpperBound(0)
            ArrayEnd(i) = ArrayStart(i)
        Next
    End Sub
End Class 
```

这工作正常，但有一个问题：

如果我在 C# 中定义：

```
var obj= new Cortar();
obj.TamanhoBarra = 100;
obj.Cortes = new int[] {48, 48, 26, 26};
obj.MelhorCorte();
int[][] x = obj.BarrasCortes; 
```

结果是：

```
x[0] = {48,48} //rest 4 to 100 (TamanhoBarra)
x[1] = {26,26} //rest 48 to 100 (TamanhoBarra) 
```

但是如果我只是将数组中元素的顺序更改为

```
obj.Cortes = new int[] {48, 26, 48, 26}; 
```

结果将是：

```
x[0] = {48,26,26} //rest 0 to 100 (TamanhoBarra) = best optimization
x[1] = {48} //rest 52 to 100 (TamanhoBarra) 
```

问题是：

如何对酒吧进行最佳优化？

最佳优化是元素的总和，直到最大尺寸，其余部分较少。

在上述情况下很容易。

但如果我有：

```
obj.Cortes = new int[] {48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26 }; 
```

结果将是：

```
x[0] = {48,48} //rest 4
x[1] = {48,48} //rest 4
x[2] = {48,48} //rest 4
x[3] = {48,48} //rest 4
x[4] = {48,48} //rest 4
x[5] = {26,26,26} //rest 22
x[6] = {26,26,26} //rest 22
x[7] = {26,26,26} //rest 22
x[8] = {26} //rest 74 
```

许多酒吧和全损

但是如果我这样排列数组：

```
obj.Cortes = new int[] {48, 26, 26, 48, 26, 26, 48, 26, 26, 48, 26, 26, 48, 26, 26, 48, 48, 48, 48, 48 }; 
```

结果是：

```
x[0] = {48,26,26} //rest 0
x[1] = {48,26,26} //rest 0
x[2] = {48,26,26} //rest 0
x[3] = {48,26,26} //rest 0
x[4] = {48,26,26} //rest 0
x[5] = {48,48} //rest 4
x[6] = {48,48} //rest 4
x[7] = {48} //rest 52 
```

这是最好的解决方案！

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:15:36.770

使用少量项目，您可以尝试所有可能性。然后你可以尝试动态规划。

# java - 如何使用 servlet 将请求转发到后端服务器？

> ID：15636350
> 
> 赞同：0
> 
> 时间：2013-03-26T11:48:13.737
> 
> 标签：java, servlets, forward

我有一个 servlet 引擎作为前端 Web 服务器，并希望将一些请求转发到后端服务器。重定向是不可能的。

servlet 规范中是否有任何有用的 API？或者是此类功能的一些示例？

我知道我可以通过 HttpUrlConnection 做到这一点。但是有一些更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:28:40.190

我现在从 Jetty找到了[ProxyServlet 。](http://download.eclipse.org/jetty/stable-7/xref/org/eclipse/jetty/servlets/ProxyServlet.html)这似乎是一个很好的开始示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:37:58.987

您不能*将请求转发*到另一台服务器。如果您要转发到的 servlet 位于同一服务器中，则转发工作。

所以你的选择是：

*   重定向到后端，
*   向后端发送 HTTP 请求，提取结果并作为对原始请求的响应传回原始客户端，或者
*   其他根本不涉及 HTTP 的东西。

> servlet 规范中是否有任何有用的 API？

除了您已经找到的那些（显然）之外，没有其他的。

> 但是有一些更简单的解决方案吗？

AFAIK，不。特别是，如果后端是不同的服务器，则不能选择“转发”。

# android - 为 Android ARM5TE 构建的应用程序，但设备支持 ARM5T

> ID：15636357
> 
> 赞同：2
> 
> 时间：2013-03-26T11:48:29.327
> 
> 标签：android, opengl-es, arm, avd, marmalade

我想在 Android 商店上发布我的应用程序，但我无法让我的应用程序在模拟器中运行。我无法弄清楚为什么我无法运行我的应用程序，因为过去有这么多人使用与我相同的工具发布。

我已经下载了最新的 Android SDK 并安装了所有的 API。有很多 2.3.3 设备，我的应用程序应该支持 API 级别 3，所以我假设我的应用程序应该在 API 级别 10 上运行。但是我的应用程序抱怨它是为 ARM5TE 构建的并且设备支持ARM5T。

我无法弄清楚这意味着什么，我可以使用 ARM5T 进行构建，但不知道这是否意味着我的应用程序无法在 ARM5TE 上运行。我知道大多数设备都是基于 ARM 的，但我不知道 ARM5TE 和 ARM5T 有多少。我想支持 90% 的使用支持 open GL 2.0 的应用商店的设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:54:48.590

> 为了改进数字信号处理和多媒体应用的 ARM 架构，DSP 指令被添加到集合中。 [30] 这些由 ARMv5TE 和 ARMv5TEJ 架构名称中的“E”表示。E 变体也意味着 T、D、M 和 I。
> 
> 新指令在数字信号处理器架构中很常见。它们包括有符号乘法累加、饱和加减法和计数前导零的变化。

（[来源](http://en.wikipedia.org/wiki/ARM_architecture#DSP_enhancement_instructions)）

过去几年发布的大多数 Android 手机都基于 ARMv7-A，它也支持这些 DSP 指令。

# header - 使用 RAW 套接字更改 IP 标头中的标识字段的问题

> ID：15636358
> 
> 赞同：0
> 
> 时间：2013-03-26T11:48:29.520
> 
> 标签：header, ip, field, identification

我创建了一个 RAW 套接字并将套接字选项设置为“IP_HDRINCL”。我在传出的 UDP 数据包中设置标识字段，并且

发送相同的。我看到发送数据包时该字段更改为随机数。我可以在嗅探器捕获中看到相同的内容。

在不同的 Windows XP 机器上构建和测试相同的代码时，工作正常，即。我可以看到传出数据包的 IP 标头中的标识字段带有我设置的相同值。

不知道出了什么问题。如果您有任何见解，请告诉我。

谢谢，

雷努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:04:32.960

原始套接字`IP_HDRINCL`会自动设置将要发送出去的 ip 数据包的某些字段的值。

在您的情况下，如果数据包 ID 为零，则数据包 ID 将被覆盖。（是你的情况吗？）

情况如下：（取自[Raw Socket 手册页](http://man7.org/linux/man-pages/man7/raw.7.html)）

```
 +---------------------------------------------------+
          |IP Header fields modified on sending by IP_HDRINCL |
          +----------------------+----------------------------+
          |IP Checksum           |Always filled in.           |
          +----------------------+----------------------------+
          |Source Address        |Filled in when zero.        |
          +----------------------+----------------------------+
          |Packet Id             |Filled in when zero.        |
          +----------------------+----------------------------+
          |Total Length          |Always filled in.           |
          +----------------------+----------------------------+ 
```

# mysql - 在 INSERT 期间省略“NOT NULL”值会将其默认为 0。为什么？

> ID：15636360
> 
> 赞同：4
> 
> 时间：2013-03-26T11:48:52.547
> 
> 标签：mysql, sql

我有以下表结构：

![在此处输入图像描述](../Images/408e54c548fb4636cdb0f91066233866.png)

`badge_id`并且`interface_id`是**主键**。

当我尝试仅指定 的**INSERT**操作时`badge_id`，我预计它会失败，但`interface_id` **默认为 0**。

![在此处输入图像描述](../Images/2a2a650887718c3bf37900200c517b4d.png)

我正在运行以下版本：

![在此处输入图像描述](../Images/81b3eb1d8c01776a473ad60e5bddb17c.png)

有人可以解释为什么它默认为零吗？这不应该失败吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T11:55:56.433

答案在[CREATE TABLE](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)的文档中：

> 如果列定义不包含显式 DEFAULT 值，MySQL 会根据第 11.5 节，“数据类型默认值”中的描述确定默认值。

[数据类型默认值](http://dev.mysql.com/doc/refman/5.5/en/data-type-defaults.html)中提供了更多信息：

> 隐式默认值定义如下： 对于数字类型，默认值为 0，但使用 AUTO_INCREMENT 属性声明的整数或浮点类型除外，默认值为序列中的下一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:59:10.403

看看这个：[http ://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)

> 从 MySQL 5.0.2 开始，如果列定义不包含显式 DEFAULT 值，MySQL 将按如下方式确定默认值：
> 
> 如果列可以将 NULL 作为值，则使用显式 DEFAULT NULL 子句定义该列。这与 5.0.2 之前的相同。
> 
> 如果该列不能以 NULL 作为值，MySQL 将定义没有显式 DEFAULT 子句的列。对于数据输入，如果 INSERT 或 REPLACE 语句不包含列的值，则 MySQL 根据当时有效的 SQL 模式处理该列：
> 
> 如果未启用严格 SQL 模式，MySQL 会将列设置为列数据类型的隐式默认值。

# pdf - 从扫描的 PDF 文档中检测语言

> ID：15636361
> 
> 赞同：0
> 
> 时间：2013-03-26T11:48:53.953
> 
> 标签：pdf, image-processing, ocr, tesseract, apache-tika

我正在尝试查找 PDF 文档的语言并对其进行分类。我面临的主要问题是文档是扫描的PDF文档。没有字体或Unicode的线索。

所以[Apache Tikka](http://tika.apache.org/1.3/detection.html#Language_Detection)在这里没有多大帮助。

我尝试使用 tesseract 将文档从 PDF 转换为文本，然后将提取的文本传递给谷歌服务，它工作正常。但是存在三个问题：

*   [Tesseract](http://code.google.com/p/tesseract-ocr/)只能转换高质量的图像。

*   它能够使用类似于英语的语言，如西班牙语、法语，但不能用于日语、中文等。

*   文档文本是机密的，所有操作都应在其中完成。

    现在我正在寻找一个独立的语言检测组件，它适用于扫描的 PDF 文档。

# c# - 如何从安装程序代码启动 WMI 服务？

> ID：15636364
> 
> 赞同：1
> 
> 时间：2013-03-26T11:48:54.973
> 
> 标签：c#, wmi

在使用 WMI 事件的 Visual Studio 代码中，例如

```
WqlEventQuery query = new WqlEventQuery(
                "SELECT * FROM RegistryKeyChangeEvent WHERE " +
               "Hive = 'HKEY_LOCAL_MACHINE'" +
              @"AND KeyPath = 'HARDWARE\\DEVICEMAP\\SERIALCOMM'");

            registryWatcher = new ManagementEventWatcher(managementScope, query); 
```

一些 PC 是 WMI 事件服务手动或自动停止，当我安装如何从我的代码启动此服务？

# node.js - NodeJS 需要一个全局模块/包

> ID：15636367
> 
> 赞同：199
> 
> 时间：2013-03-26T11:49:07.180
> 
> 标签：node.js, package, npm

我正在尝试全局安装，然后`forever`像`forever-monitor`这样使用：

`npm install -g forever forever-monitor`

我看到了通常的输出以及将文件复制到全局路径的操作，但是如果我尝试这样做，`require("forever");`我会收到一条错误消息，指出找不到模块。

我正在使用 node 和 npm 的最新版本，并且我已经知道 npm 在全局与本地安装中所做的更改，但我**真的不想**在每个项目上都安装本地化，我正在使用的平台没有'不支持`link`所以`npm link`在全局安装后对我来说是不可能的。

我的问题是：为什么我不能要求全局安装包？这是一个功能还是一个错误？还是我做错了什么？

PS：只是说清楚：我不想在本地安装。

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-03-26T20:28:19.417

在 Node.js 中，require 不会查看安装全局模块的文件夹。

您可以通过设置 NODE_PATH 环境变量来解决此问题。在 Linux 中，这将是：

```
export NODE_PATH=/usr/lib/node_modules 
```

^(注意：这取决于您的全局模块的实际安装位​​置。)

请参阅：[从全局文件夹加载](https://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-03-26T14:04:44.473

全局安装包后，您必须将本地项目与全局包链接

```
npm install express -g
cd ~/mynodeproject/
npm link express 
```

看[这里](https://docs.npmjs.com/cli/link)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-03-07T22:45:20.077

为死灵致歉，但我可以指定全局安装模块的硬编码路径：

```
var pg = require("/usr/local/lib/node_modules/pg"); 
```

这并不完美，但考虑到 Unity3d 尝试“编译”项目目录中包含的所有 javascript，我真的无法安装任何包。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-01-07T18:48:18.543

根据[文档](https://nodejs.org/api/modules.html#modules_loading_from_the_global_folders)，Node.js 默认会在以下位置进行搜索：

1.  **`NODE_PATH`环境变量中指定的路径**。

    ^(注意：`NODE_PATH`环境变量设置为以冒号分隔的绝对路径列表。)

2.  **当前`node_modules`文件夹。**（当地的）

3.  **`$HOME/.node_modules`**（全球的）

    ^(注意：`$HOME`是用户的主目录。)

4.  **`$HOME/.node_libraries`**（全球的）
5.  **`$PREFIX/lib/node`**（全球的）

    ^(注意：`$PREFIX`是 Node.js 配置的`node_prefix`.)

    要检查 的当前值`node_prefix`，请运行：

    ```
    node -p process.config.variables.node_prefix 
    ```

    ^(注意：前缀对应于`--prefix`构建过程中的参数，它是相对于`process.execPath`. 不要与`npm config get prefix`命令中的值混淆。^([资源](https://github.com/nodejs/node/issues/18024#issuecomment-355848073)))

如果找不到给定的模块，则意味着它不存在于上述位置之一。

安装模块的全局根文件夹的位置可以通过以下方式打印：（`npm root -g`默认情况下，路径是在运行时计算的，除非在[`npmrc`file](https://docs.npmjs.com/files/npmrc)中覆盖）。

### 解决方案

您可以尝试以下解决方法：

*   `NODE_PATH`在环境变量中指定您的全局模块位置。例如

    ```
    echo 'require("forever")' | NODE_PATH="$(npm root -g):$NODE_PATH" node 
    ```

    要测试并打印 的值`NODE_PATH`，请运行：

    ```
    echo 'console.log(process.env.NODE_PATH); require("forever")' | NODE_PATH="$(npm root -g):$NODE_PATH" node 
    ```

*   要获得更永久的解决方案，请`$HOME/.node_modules`通过运行以下命令将您的全局用户文件夹链接到根文件夹：

    ```
    ln -vs "$(npm root -g)" "$HOME"/.node_modules 
    ```

    `echo 'require("forever")' | node`然后通过：命令重新测试它。

*   在调用脚本之前，将当前文件夹临时更改为全局安装扩展的位置。例如

    ```
    npm install -g forever
    cd "$(npm root -g)"
    echo 'require("forever")' | node
    cd - 
    ```

*   [`npm`在userconfig 文件](https://docs.npmjs.com/files/npmrc)（见：）`npm help 5 npmrc`或`userconfig`参数（ ）中配置全局安装目标`--prefix`。

    要显示当前配置，请运行：`npm config list`。

    要编辑当前配置，请运行：`npm config edit`。

*   调用时指定[节点模块位置](https://docs.npmjs.com/files/folders#node-modules)的完整路径`require()`。例如

    ```
    require("/path/to/sub/module") 
    ```

*   将包安装到自定义位置，例如

    ```
    npm install forever -g --prefix "$HOME"/.node_modules 
    ```

    但是，安装会在 下进行`~/.node_modules/lib/node_modules/`，所以仍然需要添加位置。

    请参阅：[npm 本地安装包到自定义位置](https://stackoverflow.com/q/14742553/55075)

*   从全局包的位置在当前文件夹中[创建符号链接。](https://docs.npmjs.com/cli/link)例如

    ```
    npm link forever 
    ```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-07-22T20:58:14.080

我知道这是一个老问题，但是当我尝试`semver`在. 因为我知道我不能依赖安装的任何本地模块，所以我用它来要求全局文件夹（取决于它我知道它在那里）：`preinstall``package.json``semver``node_modules``npm`

```
function requireGlobal(packageName) {
  var childProcess = require('child_process');
  var path = require('path');
  var fs = require('fs');

  var globalNodeModules = childProcess.execSync('npm root -g').toString().trim();
  var packageDir = path.join(globalNodeModules, packageName);
  if (!fs.existsSync(packageDir))
    packageDir = path.join(globalNodeModules, 'npm/node_modules', packageName); //find package required by old npm

  if (!fs.existsSync(packageDir))
    throw new Error('Cannot find global module \'' + packageName + '\'');

  var packageMeta = JSON.parse(fs.readFileSync(path.join(packageDir, 'package.json')).toString());
  var main = path.join(packageDir, packageMeta.main);

  return require(main);
} 
```

我喜欢这种方法，因为它不需要安装任何特殊模块即可使用。

我没有`NODE_PATH`像其他人建议的那样采用解决方案，因为我想让它在任何人的机器上工作，而不必在运行`npm install`我的项目之前需要额外的配置/设置。

这种编码方式，只能保证找到顶级模块（使用安装`npm install -g ...`）或所需的模块（在此处`npm`列出： [https](https://github.com/npm/npm/blob/master/package.json) ://github.com/npm/npm/blob/master/package.json ）。如果您使用的是较新版本的 NPM，它可能会找到其他全局安装包的依赖项，因为现在文件夹结构更加扁平。`dependencies``node_modules`

希望这对某人有用。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-01-14T14:52:49.590

您可以使用该软件包[`requireg`](https://www.npmjs.com/package/requireg)来解决此问题：

```
var forever = require('requireg')('forever') 
```

会成功的。

此外，还有另一个模块 ，[`global-npm`](https://www.npmjs.com/package/global-npm)虽然特定于使用 global `npm`，但您可以查看[短代码](https://github.com/dracupid/global-npm/blob/master/index.js)并了解该技术是如何工作的。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-12-20T06:07:01.097

对于依赖于大​​模块的 CLI 实用程序，例如`puppeteer`，我喜欢生成 a`npm root -g`并使用它来 require 全局模块。

```
try {
  const root = require('child_process').execSync('npm root -g').toString().trim()
  var puppeteer = require(root + '/puppeteer')
} catch (err) {
  console.error(`Install puppeteer globally first with: npm install -g puppeteer`)
  process.exit(1)
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-02-11T14:37:36.580

您可以将此行放入`.profile`文件中：

> export NODE_PATH="$(npm config 获取前缀)/lib/node_modules"

这将`node`使用全局路径。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-25T23:13:56.837

我尝试遵循其他答案，但对我有用的是

```
 node_path = "C:\\Users\\{usename}\\AppData\\Roaming\\npm\\node_modules"
      const *modulename* = require(node_path + "\\" +'*modulename*');
```

# java - 在 javafx 脚本中编程延迟，这可能吗？

> ID：15636369
> 
> 赞同：1
> 
> 时间：2013-03-26T11:49:11.443
> 
> 标签：java, javafx, netbeans-6.9, javafx-1

好的，所以我对 javafx 有问题，即 netbeans 6.9.1 版本（我知道它有点旧，但我必须这样做才能完成学校的最终作业）。因此，对于作业，我必须编写一个记忆游戏（浓度）。现在我想编程一个延迟，所以当我翻转卡片时，该功能会等待 1.5 秒，以便您可以看到翻转的卡片。然而，当我做一个while循环等待1.5秒标记时，程序只是冻结并且变量“time02”不会更新。然后我必须通过任务管理器手动关闭程序，因为它只是冻结。这是带有时间线和一小部分功能的代码片段。我还包括了时钟的时间线，它奇怪地更新了变量“time01”就好了。我还将延迟代码放在评论中。

```
clock = Timeline {
    repeatCount: Timeline.INDEFINITE
    keyFrames: KeyFrame {
        time: 0.1s
        action: function() {
            updateclock();
        }
    }
}
function updateclock() {
    time01 = time01 + 1;
    text2.content = "Tijd: {time01 / 10}";
}

/*
delay = Timeline {
    repeatCount: Timeline.INDEFINITE
    keyFrames: KeyFrame {
        time: 0.1s
        action: function() {
            updatedelay();
        }
    }
}

function updatedelay() {
    time02 = time02 + 0.1;
}
*/

function control() {
    if (counter == 2) {
        /*                                    
        while (time02 < 1.2) {
            delay.play();
        }
        delay.stop();
        time02 = 0;
        */
        .............................. 
```

任何类型的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:29:42.023

是踩踏问题。你不能等待在同一个线程上计算的东西。

您可以将翻转卡片的代码放入其中，`Timeline`以使 JavaFX 关心线程而不是您。

```
backflip : Timeline {
   repeatCount: 1
   keyFrames: KeyFrame {
        time: 1.5s
        action: function() {
           // here is code which flips card back
        }
   }
} 
```

# neo4j - 如何验证密码查询中不存在特定路径

> ID：15636373
> 
> 赞同：3
> 
> 时间：2013-03-26T11:49:20.987
> 
> 标签：neo4j, cypher

我想获取没有特定关系（具有特定属性的关系）的节点。

该图包含实体节点（n's），它们出现在文件（f）中的特定行（line_nr）。

我当前的查询如下：

```
start n=node:entities("text:*")
MATCH p=(n)-[left:OCCURS]->(f) 
    , p4=(f)<-[right4?:OCCURS]-(n4) 
    , p7=(f)<-[right7?:OCCURS]-(n7)
WHERE  (  (  
   ( n4.text? =~ "nonreachablenodestextregex" AND (p4 = null OR left.line_nr < right4.line_nr - 0 OR left.line_nr > right4.line_nr + 0 OR ID(left) = ID(right4)  )  )  )  
   AND  (  
   ( n7.text? =~ "othernonreachablenodestextregex" AND (p7 = null OR left.line_nr < right7.line_nr - 0 OR left.line_nr > right7.line_nr + 0 OR ID(left) = ID(right7)  )  )  )  )  
WITH n, left, f, count(*) as group_by_cause 
RETURN ID(left) as occ_id, 
       n.text as ent_text, 
       substring(f.text, ABS(left.file_offset-1), 2 + LENGTH(n.text) ) as occ_text, 
       f.path as file_path, 
       left.line_nr as occ_line_nr, 
       ID(f) as file_id 
```

而不是 MATCH 子句中的新路径，我认为它也有可能：

```
NOT ( (f)<-[right4:OCCURS]-(n4) ) 
```

但是，我不想排除任何路径的存在，而是特定路径。

作为替代解决方案，我想包括额外的起始节点（因为我在不可访问节点上有一个索引），以删除 WHERE 子句中的文本比较。但是，如果 neo4j 中没有与通配符匹配的节点，则不会返回任何内容。

```
start n=node:entities("text:*")
    , n4=node:entities("text:nonreachablenodestextwildcard")
    , n7=node:entities("text:othernonreachablenodestextwildcard")
MATCH p=(n)-[left:OCCURS]->(f) 
    , p4=(f)<-[right4?:OCCURS]-(n4) 
    , p7=(f)<-[right7?:OCCURS]-(n7)
WHERE  (  (  
   ( (p4 = null 
      OR left.line_nr < right4.line_nr - 0 
      OR left.line_nr > right4.line_nr + 0 
      OR ID(left) = ID(right4)  )  )  )  
   AND  (  
   ( (p7 = null 
      OR left.line_nr < right7.line_nr - 0 
      OR left.line_nr > right7.line_nr + 0 
      OR ID(left) = ID(right7)  )  ) 
)  ) 
```

**旧更新：** 如答案中所述，我可以使用谓词函数来构造内部查询。因此，我将查询更新为：

```
start n=node:entities("text:*") 
MATCH p=(n)-[left:OCCURS]->(f) 
WHERE  (  (  
    (NONE(path in (f)<-[:OCCURS]-(n4) 
         WHERE  
           (LAST(nodes(path))).text =~ "nonreachablenodestextRegex"  
           AND FIRST(r4 in rels(p)).line_nr <= left.line_nr  
           AND FIRST(r4 in rels(p)).line_nr >= left.line_nr 
    )
    ) )  
    AND  (  
   (NONE(path in (f)<-[:OCCURS]-(n7) 
         WHERE  
           (LAST(nodes(path))).text =~ "othernonreachablenodestextRegex"  
           AND FIRST(r7 in rels(p)).line_nr <= left.line_nr   
           AND FIRST(r7 in rels(p)).line_nr >= left.line_nr 
    )
    ) ) 
    )
WITH n, left, f, count(*) as group_by_cause 
RETURN .... 
```

这给了我一个`java.lang.OutOfMemoryException`：

```
java.lang.OutOfMemoryError: Java heap space
at java.util.regex.Pattern.compile(Pattern.java:1432)
at java.util.regex.Pattern.<init>(Pattern.java:1133)
at java.util.regex.Pattern.compile(Pattern.java:823)
at scala.util.matching.Regex.<init>(Regex.scala:38)
at scala.collection.immutable.StringLike$class.r(StringLike.scala:226)
at scala.collection.immutable.StringOps.r(StringOps.scala:31)
at org.neo4j.cypher.internal.parser.v1_9.Base.ignoreCase(Base.scala:31)
at org.neo4j.cypher.internal.parser.v1_9.Base.ignoreCases(Base.scala:49)
at org.neo4j.cypher.internal.parser.v1_9.Base$$anonfun$ignoreCases$1.apply(Base.scala:49)
at org.neo4j.cypher.internal.parser.v1_9.Base$$anonfun$ignoreCases$1.apply(Base.scala:49)
at scala.util.parsing.combinator.Parsers$Parser.p$3(Parsers.scala:209)
at scala.util.parsing.combinator.Parsers$Parser$$anonfun$append$1$$anonfun$apply$1.apply(Parsers.scala:210)
at scala.util.parsing.combinator.Parsers$Parser$$anonfun$append$1$$anonfun$apply$1.apply(Parsers.scala:210)
at scala.util.parsing.combinator.Parsers$Failure.append(Parsers.scala:163)
at scala.util.parsing.combinator.Parsers$Parser$$anonfun$append$1.apply(Parsers.scala:210)
at scala.util.parsing.combinator.Parsers$Parser$$anonfun$append$1.apply(Parsers.scala:210)
at scala.util.parsing.combinator.Parsers$$anon$3.apply(Parsers.scala:183)
at scala.util.parsing.combinator.Parsers$Parser$$anonfun$append$1$$anonfun$apply$1.apply(Parsers.scala:210)
at scala.util.parsing.combinator.Parsers$Parser$$anonfun$append$1$$anonfun$apply$1.apply(Parsers.scala:210)
at scala.util.parsing.combinator.Parsers$Failure.append(Parsers.scala:163) 
```

（最后6行重复几次）

**解决方案** 以前的更新可能在某处包含语法错误，修复略有不同，如下所示：

```
start n=node:entities("text:*") 
MATCH p=(n)-[left:OCCURS]->(f) 
WHERE  (    
(NONE ( path in (f)<-[:OCCURS]-() 
    WHERE  
      ANY(n4 in nodes(path) 
        WHERE ID(n4) <> ID(n) 
          AND n4.type = 'ENTITY' 
          AND n4.text =~ "a regex expr" 
        ) 
      AND ALL(r4 in rels(path)  
        WHERE r4.line_nr <= left.line_nr + 0 
          AND r4.line_nr >= left.line_nr - 0 
        ) 
     )
  ) )
AND  
 NONE ( ......  )  
WITH n, left, f, count(*) as group_by_cause 
RETURN ... 
```

然而它很慢。小图的秒数 (>10)：总共 4 个实体节点和 6 个：OCCURS 关系，全部到 1 个单个目标 f 节点，line_nr 介于 0 和 3 之间。

**性能更新** 以下是大约两倍的速度：

```
start n=node:entities("text:*") 
MATCH p=(n)-[left:OCCURS]->(f) 
, p4=(f)<-[right4?:OCCURS]-(n4) 
, p7=(f)<-[right7?:OCCURS]-(n7) 
WHERE  
 ( n4.text? =~ "regex1" 
  AND (p4 = null 
       OR left.line_nr < right4.line_nr - 0 
       OR left.line_nr > right4.line_nr + 0 
       OR ID(left) = ID(right4)  
       )
 ) 
 AND  
( n7.text? =~ "regex2" 
  AND (p7 = null .....)
)
WITH n, left, f, count(*) as group_by_cause 
RETURN .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:25:42.240

我认为您应该使用 WHERE 中的模式谓词而不是可选关系，正如您所指出的那样。模式表达式实际上返回一个路径集合，因此您可以执行集合谓词，例如 ( `ALL, NONE, ANY, SINGLE`)

```
WHERE NONE(path in (f)<-[:OCCURS]-(n4) WHERE 
           ALL(r in rels(p) : r.line_nr = 42 )) 
```

见：[http ://docs.neo4j.org/chunked/milestone/query-function.html#_predicates](http://docs.neo4j.org/chunked/milestone/query-function.html#_predicates)

# java - 如何使用 Apache CXF 从类路径加载信任库？

> ID：15636374
> 
> 赞同：5
> 
> 时间：2013-03-26T11:49:32.523
> 
> 标签：java, apache, cxf, truststore

我正在使用 Apache CXF (v2.7.3) 通过 HTTPS 调用 SOAP 服务。我可以从文件加载信任库，但不能从类路径加载 - 我收到“无效的密钥库格式”错误。

我的 cfx.xml 文件中有这个配置：

```
<http:conduit name="*.http-conduit">
  <http:tlsClientParameters>
    <sec:trustManagers>
      <!--  For some reason, when I use the resource field, I get a "Invalid keystore format" exception -->
      <sec:keyStore type="JKS" password="MYPASSWORD"
                     resource="truststore.jks" />

      <!-- THIS WORKS FINE:  <sec:keyStore type="JKS" password="MYPASSWORD"
                    file="/fullPathToMyTrustStore/truststore.jks" /> -->
      </sec:trustManagers>
    </http:tlsClientParameters>
</http:conduit> 
```

我可以从文件加载信任库，但不能从类路径加载。我可以从异常中看出正在找到 truststore.jks 文件，但它是无效的。这是抛出异常的堆栈跟踪。

```
Caused by: java.io.IOException: Invalid keystore format
at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:633)
at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:38)
at java.security.KeyStore.load(KeyStore.java:1185)
at org.apache.cxf.configuration.jsse.TLSParameterJaxBUtils.getKeyStore(TLSParameterJaxBUtils.java:142)
at org.apache.cxf.configuration.jsse.TLSParameterJaxBUtils.getTrustManagers(TLSParameterJaxBUtils.java:292)
at org.apache.cxf.configuration.jsse.TLSClientParametersConfig.createTLSClientParametersFromType(TLSClientParametersConfig.java:114)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:149) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T15:49:40.903

我遇到了完全相同的问题，一开始就责怪 CXF，但实际上证书在类路径上是无效的。首先要检查jar中的文件是否与项目结构中的文件相同（在jar中打包之前）。

以下是可能受到指责的嫌疑人和可能的解决方案：

1）如果您使用的是 Maven，那么过滤过程可能会损坏二进制文件（我的情况）

**解决方案：**从 Maven 过滤过程中排除证书，例如：

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
    <filtering>true</filtering>
    <includes>
      <include>**/*</include>
    </includes>
    <excludes>
      <exclude>**/*.jks</exclude>
    </excludes>
  </resource>
  <resource>
    <directory>src/main/resources</directory>
    <filtering>false</filtering>
    <includes>
      <include>**/*.jks</include>
    </includes>
  </resource>
</resources> 
```

2) 如果您使用 maven-assembly-plugin 来构建您的发行版，它可能会损坏二进制文件：

**解决方案：http:** [//jira.codehaus.org/browse/MASSEMBLY-412](http://jira.codehaus.org/browse/MASSEMBLY-412)

# ios - 无法初始化 RenRen SDK 的 RMConnectCenter

> ID：15636375
> 
> 赞同：0
> 
> 时间：2013-03-26T11:49:37.133
> 
> 标签：ios, objective-c, xcode4.2

我尝试将人人 iOS 应用程序与 SocialPlugin 文档一起制作。

[http://wiki.mobile.renren.com/en/index.php/Social_Plugin_Download](http://wiki.mobile.renren.com/en/index.php/Social_Plugin_Download)

我在下面制作了 AppDelegate。但是每次我调用应用程序时，它都会在 RMConnectCenter 的 initializeConnectWithAPIKey 处失败。

守则是这样的。

--noriakiAppDelegate.h--

```
#import <UIKit/UIKit.h>
#import "RMConnectCenter.h"

@class noriakiViewController;

@interface noriakiAppDelegate : UIResponder <UIApplicationDelegate,RenrenMobileDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) noriakiViewController *noriakiviewcontroller;

@end 
```

--noriakiAppDelegate.hm--

```
#import "noriakiAppDelegate.h"
#import "noriakiViewController.h"

@implementation noriakiAppDelegate
@synthesize window = _window;
@synthesize noriakiviewcontroller = _noriakiviewcontroller;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    [RMConnectCenter initializeConnectWithAPIKey:@"MY API KEY" secretKey:@"MY SECRET" appId:@"2080970" mobileDelegate:self];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:52:32.170

您的意思是调用 initializeConnectWithAPIKey 时应用程序崩溃？

您没有传递您的 API 密钥和秘密

```
[RMConnectCenter initializeConnectWithAPIKey:@"MY API KEY" secretKey:@"MY SECRET" appId:@"2080970" mobileDelegate:self]; 
```

你在使用故事板吗？

# plsql - 哪个语句将成功调用该函数？

> ID：15636379
> 
> 赞同：-2
> 
> 时间：2013-03-26T11:49:48.367
> 
> 标签：plsql, oracle10g

```
 create or replace function calc_player_avg
            (v_id IN player_bat_stat.player_id%type)
         return number 
         is
         v_avg number;
         begin
             select hits / at_bats
             into v_avg
             from player_bat_stat
             where player_id = v_id;
             return (v_avg);
         end; 
```

调用包括“执行”语句，但这里以下语句被标记为错误：

```
 Execute calc_player_avg(31); 
```

正确的是：

```
 select calc_palyer_avg(player_id) from player_bat_stat; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:42:00.923

第一个是错误的，因为对象是一个函数，所以你需要一个变量来捕获返回。

```
SQL> execute calc_player_avg(31);
BEGIN calc_player_avg(31); END;

      *
ERROR at line 1:
ORA-06550: line 1, column 7:
PLS-00221: 'CALC_PLAYER_AVG' is not a procedure or is undefined
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored

SQL> var avg number;
SQL> execute :avg := calc_player_avg(31);

PL/SQL procedure successfully completed.
SQL> print avg

       AVG
----------
        .4 
```

# gwt - GWT 文件上传如何工作？

> ID：15636380
> 
> 赞同：8
> 
> 时间：2013-03-26T11:49:58.400
> 
> 标签：gwt, file-upload

有人知道`GWT`文件上传是如何工作的吗？我知道`FileUpload`小部件以及如何使用它。我想知道它的内在机制是什么。我们无法从`FileUpload`客户端的小部件中获取文件内容，以及它如何到达服务器？我用谷歌搜索了它，但我没有得到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T13:44:04.470

[**GWT 的文件上传**](http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/client/ui/FileUpload.html)使用[**HTML 的 input 元素**](http://www.w3.org/TR/html-markup/input.file.html)。html 输入元素是本机 html dom 元素，它允许**从您的系统中选择文件**。

选择后，您需要将其提交到您的服务器。这是由 GWT 的[**FormPanel**](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FormPanel.html)完成的。

特别是， FileUpload 仅在 FormPanel 中使用时才有用，因为浏览器只会使用***表单提交***来上传文件。

**笔记：**

**1）**您可以阅读有关如何使用 formpanel 和 fileupload 进行编码的信息，如在此回答 @Basic [File upload in GWT](https://stackoverflow.com/questions/1111130/basic-file-upload-in-gwt)

**2）**如果您关心在客户端处理文件而不是将文件推送到服务器，那么这里提到的选项有限@[如何从 GWT FileUpload 组件检索文件？](https://stackoverflow.com/questions/14053937/how-to-retrieve-file-from-gwt-fileupload-component)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:31:38.720

```
formPanel.setAction(GWT.getModuleBaseURL()+"uploadHandler");     
formPanel.setMethod(Method.POST); 
```

当我们使用 formPanel.submit() 时，我们可以调用 servlet 并获取文件上传详细信息。

# erlang - 如何在 Erlang 之外创建一个代表 DICT 术语的字符串？

> ID：15636384
> 
> 赞同：0
> 
> 时间：2013-03-26T11:50:03.617
> 
> 标签：erlang

我想在 Java 中构造一个表示**DICT**术语的字符串，并将其传递给 Erlang 进程，以便作为 erlang 术语（ string-to-term ）反映回来。

我可以很容易地为 ORDDICT 实现这一点，因为它们在元组列表中构造为一个简单的排序键/值对，例如： [ {field1 , "value1"} , {field2 , "value2} ]

但是，对于 DICTS，它们被编译成一个特定的术语，我想找到如何对其进行逆向工程。我知道这种结构可能会随着新版本的变化而改变，但性能和易于集成到 Java 的好处将克服这一点。不幸的是，Erlang 的 JInterface 基于简单的数据结构。高效的 DICT 类型将非常有用。

一个简单的 dict 定义如下：

```
D1 = dict:store("field1","AAA",dict:new()).
{dict,1,16,16,8,80,48,
  {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
  {{[],[],[],[],[],[],[],[],
    [["field1",65,65,65]],
    [],[],[],[],[],[],[]}}} 
```

从上面可以看出，有些坐标我不明白它们的含义（数字 1,16,16,8,80,48 和一组空列表，它们也可能代表一些东西。

添加另外两行（键值对）会导致数据如下所示：

```
D3 = dict:store("field3","CCC",D2).
{dict,3,16,16,8,80,48,
  {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
  {{[],[],
    [["field3",67,67,67]],
    [],[],[],[],[],
    [["field1",65,65,65]],
    [],[],[],[],
    [["field2",66,66,66]],
    [],[]}}} 
```

从上面我可以注意到：

*   第一个数字 (3) 表示 DICT 中的项目数。
*   第二个数字 (16) 显示第一个列表元组中的列表**槽数**
*   第三个数字（16）显示了第二种列表中的列表**槽数，其中的值最终被放置在（中间）。**
*   第四个数字 (8) 似乎是放置值的第二行元组中的槽数（一种索引指针）
*   剩下的数字（80 和 48）……不知道……
*   添加一个键“field0”不是放在最后，而是放在“field1”的数据之后。这表明了索引方法。

**所以问题**是，有没有一种方法（算法）可以从 Erlang 外部可靠地直接创建 DICT 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:20:49.680

[可以在dict.erl](https://github.com/erlang/otp/blob/maint/lib/stdlib/src/dict.erl)源代码中简单地找到如何实现 dict 的全面规范。

但我不确定在 Java 中复制 dict.erl 的实现是否值得。这只有在您想要一个需要在 Java 和 Erlang 代码之间经常传递的快速 dict 之类的数据结构时才有意义。使用 Erlang 和 Java 中的键值存储而不直接传递它可能更有意义。根据您的应用程序，这可能是例如[riak](http://basho.com/riak/)，甚至可能将您的不同语言世界与[RabbitMQ](http://www.rabbitmq.com)连接起来。这两个示例都是在 Erlang 中实现的，并且可以从两个世界轻松访问。

# c++ - 在 c++ 中 seekg 似乎包含 cr 字符，但 read() 删除了它们

> ID：15636386
> 
> 赞同：2
> 
> 时间：2013-03-26T11:50:07.387
> 
> 标签：c++, newline, ifstream

我目前正在尝试将文件的内容读入 char 数组。

例如，我在 char 数组中有以下文本。42 字节：

```
{
    type: "Backup",
    name: "BackupJob"
} 
```

该文件是在 windows 中创建的，我使用的是 Visual Studio c++，因此不存在操作系统兼容性问题。

但是，执行以下代码，在 for 循环完成时，我得到 Index: 39，在 10 之前没有显示 13。

```
// Create the file stream and open the file for reading
ifstream fs;
fs.open("task.txt", ifstream::in);

int index = 0;
int ch = fs.get();
while (fs.good()) {
    cout << ch << endl;
    ch = fs.get();
    index++;
}

cout << "----------------------------";
cout << "Index: " << index << endl;
return; 
```

但是，当尝试创建文件长度的 char 数组时，按照以下方式读取文件大小会导致 3 个额外的 CR 字符归因于总文件大小，因此`length`等于 42，这增加了数组的结尾带有狡猾的字节。

```
// Create the file stream and open the file for reading
ifstream fs;
fs.seekg(0, std::ios::end);
length = fs.tellg();
fs.seekg(0, std::ios::beg);

// Create the buffer to read the file
char* buffer = new char[length];
fs.read(buffer, length);
buffer[length] = '\0';
// Close the stream
fs.close(); 
```

使用十六进制查看器，我已经确认文件确实包含文件中的 CRLF (13 10) 字节。

获取文件末尾似乎存在差异，以及 get() 和 read() 方法实际返回的内容。

有人可以帮忙吗？

干杯，贾斯汀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:52:30.340

您应该以二进制模式打开文件。这将停止读取删除 CR。

```
fs.open("task.txt", ifstream::in|ifstream::binary); 
```

# wso2 - Wso2 BPS：没有这样的通道错误

> ID：15636388
> 
> 赞同：1
> 
> 时间：2013-03-26T11:50:20.353
> 
> 标签：wso2, bpel

我正在使用 wso2 bps 2.1.2 运行简单的 bpel 进程，并在循环中一一调用树调用。循环大约是一百次。问题是有时进程会在运行状态下挂起。在日志中我得到错误：

```
[2013-03-25 14:44:17,897] ERROR - BpelEngineImpl - Scheduled job failed; jobDetail=JobDetails( instanceId: 14109433 mexId: null processId: null type: TIMER channel: 11513 correlatorId: null correlationKeySet: null retryCount: null inMem: false detailsExt: {})
java.lang.IllegalArgumentException: No such channel; id=11513
    at org.apache.ode.jacob.vpu.ExecutionQueueImpl.findChannelFrame(ExecutionQueueImpl.java:205)
    at org.apache.ode.jacob.vpu.ExecutionQueueImpl.consumeExport(ExecutionQueueImpl.java:232)
    at org.apache.ode.jacob.vpu.JacobVPU$JacobThreadImpl.importChannel(JacobVPU.java:369)
    at org.apache.ode.jacob.JacobObject.importChannel(JacobObject.java:47)
    at org.apache.ode.bpel.engine.BpelRuntimeContextImpl$5.run(BpelRuntimeContextImpl.java:964)
    at sun.reflect.GeneratedMethodAccessor44.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at org.apache.ode.jacob.vpu.JacobVPU$JacobThreadImpl.run(JacobVPU.java:451)
    at org.apache.ode.jacob.vpu.JacobVPU.execute(JacobVPU.java:139)
    at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.execute(BpelRuntimeContextImpl.java:879)
    at org.apache.ode.bpel.engine.BpelRuntimeContextImpl.timerEvent(BpelRuntimeContextImpl.java:968)
    at org.apache.ode.bpel.engine.BpelProcess.handleJobDetails(BpelProcess.java:478)
    at org.apache.ode.bpel.engine.BpelEngineImpl.onScheduledJob(BpelEngineImpl.java:560)
    at org.apache.ode.bpel.engine.BpelServerImpl.onScheduledJob(BpelServerImpl.java:445)
    at org.apache.ode.scheduler.simple.SimpleScheduler$RunJob$1.call(SimpleScheduler.java:537)
    at org.apache.ode.scheduler.simple.SimpleScheduler$RunJob$1.call(SimpleScheduler.java:531)
    at org.apache.ode.scheduler.simple.SimpleScheduler.execTransaction(SimpleScheduler.java:284)
    at org.apache.ode.scheduler.simple.SimpleScheduler.execTransaction(SimpleScheduler.java:239)
    at org.apache.ode.scheduler.simple.SimpleScheduler$RunJob.call(SimpleScheduler.java:531)
    at org.apache.ode.scheduler.simple.SimpleScheduler$RunJob.call(SimpleScheduler.java:515)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:314)
    at java.util.concurrent.FutureTask.run(FutureTask.java:149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)
    at java.lang.Thread.run(Thread.java:738) 
```

我找不到有关此错误的任何有用信息。我正在使用 oracle 数据库。我尝试使用以下方法修改 bps.xml：

```
<tns:OpenJPAConfig>
  <tns:property name="openjpa.FlushBeforeQueries" value="true"/>
  <!-- added this line as for https://wso2.org/jira/browse/CARBON-7500  (use also Oracle 11g Driver!!) -->
  <tns:property name="openjpa.jdbc.DBDictionary" value="oracle(batchLimit=0)"/>
</tns:OpenJPAConfig> 
```

但这没有帮助。

过程非常简单，看起来像这样：

```
<forEach counterName="count"  parallel="no" >

    < doXslTransform …&gt;
    <wait 1s>
    <invoke ...>

    <doXslTransform …&gt;
    <wait 1s>
    <invoke ...>

    < doXslTransform …&gt;
    <wait 1s>
    <invoke ...>
</forEach> 
```

如何解决“没有这样的频道”错误？

谢谢托梅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:36:00.333

我们确定了导致此问题的一个问题并对其进行了修复。这是由于 BPS 中嵌入的 ode 运行时缺少流程实例锁。我们发现了这个问题并修复了它。

[https://issues.apache.org/jira/browse/ODE-989](https://issues.apache.org/jira/browse/ODE-989)

[https://wso2.org/jira/browse/BPS-218](https://wso2.org/jira/browse/BPS-218)

如果您可以将示例场景附加到 jira，它将帮助我们添加另一个测试用例。该修复程序已在主干中可用，并将在下一个版本中可用。

问候南迪卡

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T09:04:13.903

我已经从进程中删除了等待，一切都开始正常工作。WSO2 BPS 2.1.2 中的 <wait> 活动似乎存在一些错误。在 BPS 3.0.0 中，等待的接缝正在工作。

# printing - python 2中的打印命令后>>是什么？

> ID：15636389
> 
> 赞同：2
> 
> 时间：2013-03-26T11:50:20.690
> 
> 标签：printing, python-2.x, stringio

```
import cStringIO

output = cStringIO.StringIO()
output.write('First line.\n')
print >>output, 'Second line.'

# Retrieve file contents -- this will be
# 'First line.\nSecond line.\n'
contents = output.getvalue() 
```

`>>output`第 5 行的`print`语句是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:51:00.030

它将语句输出重定向`print`到一个打开的类似文件的对象。请参阅[`print`声明文档](http://docs.python.org/2/reference/simple_stmts.html#the-print-statement)：

> `print`还具有扩展形式，由上述语法的第二部分定义。这种形式有时被称为“打印人字形”。在这种形式中，后面的第一个表达式`>>`必须计算为“类文件”对象，特别是具有上述`write()`方法的对象。使用此扩展形式，后续表达式将打印到此文件对象。如果第一个表达式的计算结果为`None`，则将`sys.stdout`其用作输出文件。

本质上，该行被转换为`output.write('Second line.' + '\n') as`print` 会在其输出中添加一个换行符，除非表达式以逗号结尾。

语法基于 bash append`>>`语法（这也影响了 C++`<<`和`>>`I/O 运算符）；请参阅[PEP 214](http://www.python.org/dev/peps/pep-0214/)了解为什么选择它的完整动机。

在 Python 3 中，`print()`函数在哪里，你可以这样写：

```
print('Second line.', file=output) 
```

反而。

# javascript - Apache 反向代理内容长度

> ID：15636391
> 
> 赞同：1
> 
> 时间：2013-03-26T11:50:24.097
> 
> 标签：javascript, css, apache, jsp

全部，

我几乎成功地在 Apache/2.2.15 上实现了一个解析器，请参阅我的部分虚拟主机配置。

我仍然遇到的问题是何时对包含的两个 url 执行获取

“GET /html/js/everything.jsp?browserId=ie&themeId=newTangoModuleTheme_WAR_newTangoModuleTheme&colorSchemeId=01&minifierType=js&minifierBundleId=javascript.everything.files&languageId=fr_FR&b=6120&t=1364288620000 HTTP/1.1”200 1001584

“GET /html/js/everything.jsp?browserId=ie&themeId=classic&colorSchemeId=01&minifierType=js&minifierBundleId=javascript.everything.files&languageId=fr_FR&b=6120&t=1364288620000 HTTP/1.1”200 1001584

我总是收到两个字节的内容长度不匹配，响应头指示 1001582 但服务器返回 1001584，因此页面未正确加载。

欢迎所有信息。

仅供参考 - 其他 js 和 css 页面正确呈现只有两个 jsp 页面提供问题！！！

```
 <VirtualHost ip address>

       KeepAlive On
       RewriteEngine on
       RewriteLogLevel 4
       RewriteLog /tmp/rewrite.log
       AddDefaultCharset UTF-8
       ProxyPreserveHost On

   ProxyRequests Off
   ProxyHTMLLogVerbose On
   LogLevel Debug

   ServerName srvname

# load additional modules to adjust responses
 LoadFile      /usr/lib64/libxml2.so
LoadModule    proxy_html_module       modules/mod_proxy_html.so
LoadModule    xml2enc_module          modules/mod_xml2enc.so

# Hacked by KR in order to allow full content parsing
RequestHeader unset Accept-Encoding

# Amigo here's the declaration for W3C HTML 4.01 and XHTML 1.0

ProxyHTMLLinks  a               href
ProxyHTMLLinks  area            href
ProxyHTMLLinks  link            href
ProxyHTMLLinks  img             src longdesc usemap
ProxyHTMLLinks  object          classid codebase data usemap
ProxyHTMLLinks  q               cite
ProxyHTMLLinks  blockquote      cite
ProxyHTMLLinks  ins             cite
ProxyHTMLLinks  del             cite
ProxyHTMLLinks  form            action
ProxyHTMLLinks  input           src usemap
ProxyHTMLLinks  head            profile
ProxyHTMLLinks  base            href
ProxyHTMLLinks  script          src for
ProxyHTMLLinks  frame           src longdesc
ProxyHTMLLinks  iframe          src longdesc
ProxyHTMLLinks  body            background
ProxyHTMLLinks  applet          codebase

ProxyHTMLEvents onclick ondblclick onmousedown onmouseup \
                onmouseover onmousemove onmouseout onkeypress \
                onkeydown onkeyup onfocus onblur onload \
                onunload onsubmit onreset onselect onchange

ProxyHTMLEnable On
#ProxyHTMLExtended On
#ProxyHTMLMeta On
ProxyHTMLURLMap https://www.site1.be
ProxyHTMLURLMap http://www.site2.be

</VirtualHost> 
```

问候，

肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T21:11:49.707

`Content-Length`我在设置标题时遇到了一些问题`ProxyHTMLEnable On`。为我解决问题的是`proxy-html`在适当的位置包含输出过滤器列表。在我的情况下，我使用了一些其他过滤器，您可能会使用也可能不会使用，Apache 配置文件中的行是：

```
SetOutputFilter INFLATE;proxy-html;SUBSTITUTE;DEFLATE 
```

# python - 在python列表中提取具有最常见概率的项目

> ID：15636392
> 
> 赞同：0
> 
> 时间：2013-03-26T11:50:32.747
> 
> 标签：python, set

我有一个列表 [[1, 2, 7], [1, 2, 3], [1, 2, 3, 7], [1, 2, 3, 5, 6, 7]] 我需要 [1 ,2,3,7] 作为最终结果（这是一种逆向工程）。一种逻辑是检查交叉点 -

```
 while(i<dlistlen):
  j=i+1
  while(j<dlistlen):
   il = dlist1[i]
   jl = dlist1[j]

   tmp = list(set(il) & set(jl))
   print tmp 

  #print i,j
   j=j+1 
  i=i+1 
```

这给了我输出：

```
[1, 2]
[1, 2, 7]
[1, 2, 7]
[1, 2, 3]
[1, 2, 3]
[1, 2, 3, 7]
[] 
```

看起来我接近 [1,2,3,7] 作为我的最终答案，但不知道如何。请注意，在第一个列表中 (([[1, 2, 7], [1, 2, 3], [1, 2, 3, 7], [1, 2, 3, 5, 6, 7] ] )) 除了 [1,2,3,4] 之外，可能还有更多的项目导致更多的最终答案。但截至目前，我只需要提取 [1,2,3,7] 。请注意，这不是作业，我正在创建适合我需要的自己的聚类算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T11:59:44.043

您可以使用[Counter](http://docs.python.org/2/library/collections.html?highlight=collections#collections.Counter)类来跟踪元素出现的频率。

```
>>> from itertools import chain
>>> from collections import Counter
>>> l =  [[1, 2, 7], [1, 2, 3], [1, 2, 3, 7], [1, 2, 3, 5, 6, 7]]
>>> #use chain(*l) to flatten the lists into a single list
>>> c = Counter(chain(*l))
>>> print c
Counter({1: 4, 2: 4, 3: 3, 7: 3, 5: 1, 6: 1})
>>> #sort keys in order of descending frequency
>>> sortedValues = sorted(c.keys(), key=lambda x: c[x], reverse=True)
>>> #show the four most common values
>>> print sortedValues[:4]
[1, 2, 3, 7]
>>> #alternatively, show the values that appear in more than 50% of all lists
>>> print [value for value, freq in c.iteritems() if float(freq) / len(l) > 0.50]
[1, 2, 3, 7] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:06:27.967

看起来您正试图找到两个列表元素的最大交集。这将做到这一点：

```
from itertools import combinations

# convert all list elements to sets for speed
dlist = [set(x) for x in dlist]

intersections = (x & y for x, y in combinations(dlist, 2))
longest_intersection = max(intersections, key=len) 
```

# ms-access - 名称的组合框未返回正确的值

> ID：15636393
> 
> 赞同：0
> 
> 时间：2013-03-26T11:50:39.433
> 
> 标签：ms-access, vba

我为一个人的姓氏和名字创建了一个组合框。组合框工作正常，您可以看到所有人的完整列表，但是当我选择与其他人同姓的人时会出现问题。

例如：

```
Surname | First Name
Romas      Issac
Romas      Tony 
```

如果我在组合框中选择 Romas Tony，我会得到 Romas Issac 的值作为名字。这是一个真正的问题，因为我正在尝试根据所选内容启动查询 - 如何确保选择了正确的名字？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:34:13.790

将来自该数据的表中的主键作为第三个隐藏列添加到您的组合框（要使该列隐藏，您可以将列宽设置为 0；实际上，我通常将其添加为 FIRST 列，因为那时您可以将所有其他列的“列宽”属性中的条目留空）。将其“绑定列”属性设置为主键列的编号。对所有从表中获取数据的组合框执行此操作通常是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:49:58.230

如果您将名称存储在两个单独的列中，则必须确保同时获得 .collumn(0) 和 .collumn(1)，但 wakjah 的回答总是一个好主意；）

# android - 尝试将 APK 安装到模拟器时失败 [install_parse_failed_no_certificates]

> ID：15636396
> 
> 赞同：50
> 
> 时间：2013-03-26T11:50:39.963
> 
> 标签：android, cmd, emulation, apk

我从互联网上下载了 Myfiles.apk 并尝试将其安装到我的 Android 模拟器中。

通过命令提示符安装 Myfiles.apk 文件时，出现此错误。

我尝试在命令提示符下

```
C:\android-sdk\tools> adb -s emulator-5554 install C:\Users\Me\Desktop\MyFiles.apk 
```

如何正确将此 APK 安装到模拟器？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-01-02T07:14:48.087

这个[网站](http://vardhan-justlikethat.blogspot.com/2012/05/android-solution-install-parse-failed.html) 帮助我正确签署了未签名的 apk。但是，对于最后一个过程，即 for `jarsigner`，需要使用以下命令

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore    my_application.apk alias_name. 
```

[`unable to sign zipexception`](https://stackoverflow.com/a/8992819/739306)如果遇到任何`zipexception`错误，请进一步查看。所以总的来说，使用以下程序

1.  `keytool -genkey -v -keystore debug.keystore -alias android -keyalg RSA -keysize 2048 -validity 20000`
2.  `jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore yourapkalign.apk alias_name`
3.  `zipalign -v 4 yourapk.apk yourapkalign.apk`

现在，您可以成功安装 apk 文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T11:53:23.977

这意味着您下载的 apk 没有使用任何证书、调试或其他方式进行签名。

您可以从命令行对其进行签名，如此处[所述](http://developer.android.com/tools/publishing/app-signing.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-08T20:56:19.687

您可以使用`androiddebugkey`签名apk。

密钥库位于`~/.android`，命名为`debug.keystore`.

跑

`keytool -list -keystore ~/.android/debug.keystore`

要查看调试键，我们可以看到它的名称是`androiddebugkey`

运行以下命令对 apk 进行签名。

```
jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore ~/.android/debug.keystore yourapp-release.apk androiddebugkey 
```

# android - 如何以编程方式设置 TextView 的边距？

> ID：15636401
> 
> 赞同：88
> 
> 时间：2013-03-26T11:50:59.907
> 
> 标签：android, textview

```
TextView tv1 = new TextView(this);      
tv1.setPadding(5, 0, 5, 0);
tv1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
tv1.setBackgroundColor(Color.parseColor("#0099cc"));
tv1.setTextColor(Color.WHITE);
tv1.setTextSize(11);
tv1.setGravity(Gravity.LEFT | Gravity.BOTTOM);
tv1.setText("Test1");
ll.addView(tv1);

TextView tv2 = new TextView(this);      
tv2.setPadding(5, 0, 5, 0);
tv2.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
tv2.setBackgroundColor(Color.parseColor("#0099cc"));
tv2.setTextColor(Color.WHITE);
tv2.setTextSize(11);
tv2.setGravity(Gravity.LEFT | Gravity.BOTTOM);
tv2.setText("Test2");
ll.addView(tv2); 
```

如您所见，在这段代码中，我设置了`TextView`背景颜色。我想要做的是我想将这两个`TextView`彼此分开，这样它们的背景颜色就会被一条线分开。我不希望他们联系。据我了解，如果我可以设置 的边距，则可以这样做`TextView`，但据我所知，`TextView`' s 不能这样做。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-03-26T11:55:15.167

设置为 LayoutParams。

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.setMargins(10,10,10,10);
tv1.setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-24T12:52:19.313

这取决于您的父母观点。

如果您在 textview 上使用 LinearLayout 作为父视图，请提供如下参数

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.setMargins(10,10,10,10);
tv1.setLayoutParams(params); 
```

如果您在 textview 上使用 RelativeLayout 作为父视图，请提供如下所示的参数

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
params.setMargins(10,10,10,10);
tv1.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-03-06T11:39:32.183

对于 Kotlin，使用以下代码片段

```
(textView.layoutParams as ConstraintLayout.LayoutParams).apply {
        marginStart=8.dpToPixels()
        topMargin=8.dpToPixels()
        marginEnd=8.dpToPixels()
        bottomMargin=8.dpToPixels()
    } 
```

根据使用的布局更改 LayoutParams。谢谢。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-01-13T03:56:33.743

所有这些答案都很好，但我使用的是 ConstraintLayout，所以这里是代码：

```
ConstraintLayout.LayoutParams params = new ConstraintLayout.LayoutParams(ConstraintLayout.LayoutParams.WRAP_CONTENT, ConstraintLayout.LayoutParams.WRAP_CONTENT);
params.setMargins(10, 10, 10, 10);
textview.setLayoutParams(params); // note that textview would be your instanced TextView object 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-14T12:19:49.250

这个应该试试

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ActionBar.LayoutParams.WRAP_CONTENT, ActionBar.LayoutParams.WRAP_CONTENT);
        params.setMargins(10,20,30,20);
        txt_gender.setLayoutParams(params); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-20T16:14:16.187

**使用 Kotlin 扩展：**

这是为 textview 设置边距的简单扩展。

```
fun View.setMargins(marginLeft: Int, marginTop: Int, marginRight: Int, marginBottom: Int) {
  val params: LinearLayout.LayoutParams =
    LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT)
  params.setMargins(margin.dp, 0, margin.dp, 0)
  this.layoutParams = params
} 
```

对于`Int`转换`dp`，这是另一个扩展

```
val Int.dp: Int
  get() = (this * Resources.getSystem().displayMetrics.density).toInt() 
```

您可以调用此扩展程序以提供水平边距 8dp，如下所示

```
yourTextView.setMargins(8, 0, 8, 0) 
```

# php - php & mysql: 一个扭曲的配置

> ID：15636407
> 
> 赞同：-1
> 
> 时间：2013-03-26T11:51:08.247
> 
> 标签：php, mysql, configuration

关于 php 和 mysql 的配置，我有一个有趣的问题。我无法将它们配置为一起工作。每当尝试连接到 mysql 数据库时，我都会收到以下错误：致命错误：调用未定义的函数 mysql connect()。

我目前正在使用最新版本的 mysql 和 php，并且正在使用 Windows 7 机器作为服务器。

由于某些限制，我不能使用预配置的 Web 服务器或包（没有 xampp、apache 或 easyphp）。因此，我几乎只能使用 php 附带的内置开发服务器。到目前为止，我已经完成了对 php.ini 文件的编辑，从 php_mysql.dll 中删除了分号以删除 ; 并更改 extension_dir = "C:\PHP\ext" 以反映我的扩展文件夹。

我想我的两个问题是：

A) php 5.4 包含的开发服务器甚至可以连接到 mysql 数据库吗

B）如果是这样，任何人都可以为我提供一些可能解决此配置问题的方法吗？

感谢您提供的任何帮助。

-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:55:48.790

尝试运行`phpinfo();`并查看您是否已将其配置为与 MySQL 一起使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T12:01:42.200

您应该从 php.ini 启用 php_mysql 模块。默认为禁用。

来自 php.ini：

```
...
;extension=php_ldap.dll
extension=php_mysql.dll
extension=php_mysqli.dll
... 
```

`;`从相应的模块中删除，保存并重新启动apache 。

# android - org.json.JSONArray 无法转换为 JSONObject（从 web 服务填充微调器）

> ID：15636410
> 
> 赞同：4
> 
> 时间：2013-03-26T11:51:15.303
> 
> 标签：android, json, spinner

我在尝试解析 JSON 数据时遇到 JSON 异常，因为我正在关闭 Web 服务。

我已经查看了与此异常有关的相关问题，但我仍然无法提出解决方案。

这是来自网络服务的 Json 数组

```
[
   {
      "created_at":"2013-03-18T21:30:19Z",
      "id":1,
      "name":"latte",
      "price":"5",
      "updated_at":"2013-03-18T21:30:19Z"
   },
   {
      "created_at":"2013-03-18T21:30:41Z",
      "id":11,
      "name":"black",
      "price":"2",
      "updated_at":"2013-03-18T21:30:41Z"
   },
   {
      "created_at":"2013-03-19T09:38:31Z",
      "id":21,
      "name":"Tea",
      "price":"2",
      "updated_at":"2013-03-19T09:39:02Z"
   }
] 
```

这是使用解析器作为后台任务的类的相关部分

```
public class SpinnerDemo extends Activity {

    //JSON node names
    private static final String TAG_DATA = "data";
    private static final String TAG_CREATED_AT = "created_at";
    private static final String TAG_ID_DRINK = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_PRICE = "price";
    private static final String TAG_UPDATED_AT = "updated_at";
    private static final String MAP_API_URL = "http://notTheActualURL.com/drinks.json";
    private BackGroundTask bgt;

    Spinner drinkField;

    ArrayList<Drink> drinkList = new ArrayList<Drink>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.spinner_main);
        buildDrinkDropDown();
    }

    private void buildDrinkDropDown() {

        List<NameValuePair> apiParams = new ArrayList<NameValuePair>(1);
        apiParams.add(new BasicNameValuePair("call", "drinkList"));

        bgt = new BackGroundTask(MAP_API_URL, "GET", apiParams);

        try {
            JSONObject drinkJSON = bgt.execute().get();
            // Getting Array of drinks
            JSONArray drinks = drinkJSON.getJSONArray(TAG_DATA);

            // looping through All drinks
            for (int i = 0; i < drinks.length(); i++) {

                JSONObject d = drinks.getJSONObject(i);

                // Storing each json item in variable

                String id = d.getString(TAG_ID_DRINK);
                String createdAt = d.getString(TAG_CREATED_AT);
                String updatedAt = d.getString(TAG_UPDATED_AT);
                String price = d.getString(TAG_PRICE);
                String name = d.getString(TAG_NAME);

                // add drink
                drinkList.add(new Drink( createdAt ,id, name, price,updatedAt ));
            } 
```

这是进行解析的实际类

```
package com.android.main;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class BackGroundTask extends AsyncTask<String, String, JSONObject> {

     List<NameValuePair> postparams = new ArrayList<NameValuePair>();
     String URL = null;
     String method = null;

     static InputStream is = null;
     static JSONObject jObj = null;
     static String json = "";

     public BackGroundTask(String url, String method, List<NameValuePair> params) {
      this.URL = url;
      this.postparams = params;
      this.method = method;
     }

     @Override
     protected JSONObject doInBackground(String... params) {
      // TODO Auto-generated method stub
      // Making HTTP request
      try {
       // Making HTTP request
       // check for request method

       if (method.equals("POST")) {
        // request method is POST
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(URL);
        httpPost.setEntity(new UrlEncodedFormEntity(postparams));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

       } else if (method == "GET") {
        // request method is GET
        DefaultHttpClient httpClient = new DefaultHttpClient();
        String paramString = URLEncodedUtils
          .format(postparams, "utf-8");
        URL += "?" + paramString;
        HttpGet httpGet = new HttpGet(URL);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();
       }

      } catch (UnsupportedEncodingException e) {
       e.printStackTrace();
      } catch (ClientProtocolException e) {
       e.printStackTrace();
      } catch (IOException e) {
       e.printStackTrace();
      }

      try {

       BufferedReader reader = new BufferedReader(new InputStreamReader(
         is, "utf-8"), 8);
       StringBuilder sb = new StringBuilder();
       String line = null;
       while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
       }
       is.close();
       json = sb.toString();
      } catch (Exception e) {
       Log.e("Buffer Error", "Error converting result " + e.toString());
      }

      // try parse the string to a JSON object
      try {
       jObj = new JSONObject(json);
      } catch (JSONException e) {
       Log.e("JSON Parser", "Error parsing data TEST " + e.toString());
      }

      // return JSON String
      return jObj;

     }
    } 
```

这是日志猫的例外

```
03-26 11:32:49.637: E/JSON Parser(714): Error parsing data TEST org.json.JSONException: Value [{"id":1,"created_at":"2013-03-18T21:30:19Z","updated_at":"2013-03-18T21:30:19Z","price":"5","name":"latte"},{"id":11,"created_at":"2013-03-18T21:30:41Z","updated_at":"2013-03-18T21:30:41Z","price":"2","name":"black"},{"id":21,"created_at":"2013-03-19T09:38:31Z","updated_at":"2013-03-19T09:39:02Z","price":"2","name":"Tea"}] of type org.json.JSONArray cannot be converted to JSONObject 
```

还有另一个错误显示 spinnerDemo 类中的空点异常，尽管我认为这是上一个异常的结果

```
03-26 11:32:49.707: E/AndroidRuntime(714): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.main/com.android.main.SpinnerDemo}: java.lang.NullPointerException 
```

对此的任何建议或帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T11:53:59.027

如在日志中：

> org.json.JSONArray 无法转换为 JSONObject

因为您获得`JSONArray`的是根元素，而不是`JSONObject`但您正试图将其转换为 JSONObject。目前您正在获得以下 json 结构：

```
[     //<<<<<<<<< JSONArray
   {      //<<<<<<<<< JSONObject

   },
  ....
] 
```

您需要将 json 字符串转换为`JSONArray`然后从中`JSONObject`提取

```
JSONArray drinkJSON = bgt.execute().get(); 
```

您还需要将`doInBackground`方法返回类型更改为`JSONArray`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:56:52.613

```
 HttpResponse responseGet = client.execute(get);
        HttpEntity resEntityGet = responseGet.getEntity();

        if (resEntityGet != null) {
            String response = EntityUtils.toString(resEntityGet);
        } 
```

使用此行首先获取数组

```
JSONArray valarray = new JSONArray(response); 
```

然后循环进入对象内部

```
for (int i = 0; i < valarray.length(); i++) {

    JSONObject arr = valarray.getJSONObject(i); 

} 
```

这对我来说非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:54:30.330

你的回报 json 是`jsonarray`，但你可以得到`jsonobject`。

所以，我们可以使用，

```
 JSONArray drinkJSON = bgt.execute().get(); 
```

在`BackGroundTask`课堂上， `doInBackground`方法

```
protected JSONArray doInBackground(String... params) { 
```

以及对象创建的变化，

```
 JsonArray jobj;
try {
       jObj = new JSONArray(json);
      } catch (JSONException e) {
       Log.e("JSON Parser", "Error parsing data TEST " + e.toString());
      } 
```

# iphone - 刷新过期配置文件 Xcode 版本 4.6.1

> ID：15636414
> 
> 赞同：0
> 
> 时间：2013-03-26T11:51:22.390
> 
> 标签：iphone, ios, provisioning-profile, xcode4.6

我能否就如何最好地更新即将到期的配置文件征求一点建议。我重新订阅了开发人员计划，所以它在 2014 年之前都很好，但是当我从 Xcode Organizer 中单击“刷新”时，Xcode 只是暂停、搅动磁盘并消失。

我似乎每年都遇到这个问题，我查看了 Apple DEV 门户，我应该“撤销”“分发”和“开发”证书，重新创建它们，然后在 Xcode 中进行“刷新”还是有其他的我失踪的方式？

![在此处输入图像描述](../Images/f79d9b6c959372615f239033e2972c3d.png)

**编辑：**经过一番研究，我现在认为这是由当前 Xcode 版本中的一个错误引起的，Apple 显然已经意识到了这个错误。

# jquery - 1秒后允许按键

> ID：15636418
> 
> 赞同：3
> 
> 时间：2013-03-26T11:51:33.437
> 
> 标签：jquery, animation, delay, keyup

我在按键上为 div 设置动画，但是如果我按向上箭头 2x 则我的动画会中断，有没有办法我只能在 1 秒后允许按键？

```
$(document).keyup(function(e){
    if (e.keyCode == 38) { 
        $('.selected').animate({'top':'300px'},500);
        $('.section.selected').removeClass('selected')
                              .next('.section').animate({'top':'0'},500)
                              .addClass('selected');
        return false;
    }
    e.preventDefault();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:59:52.053

在触发进一步的动画之前检查元素是否正在被动画：

```
$(document).keyup(function(e){
  if (e.keyCode == 38) { 
    if(!$('.selected').is(':animated')){

      $('.selected').animate({'top':'300px'},500);       
      $('.section.selected').removeClass('selected').next('.section').animate({'top':'0'},500).addClass('selected');
      return false;
    } 
  }    
  e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:56:06.543

尽可能从字面上实现您的要求：

```
var allowKeyPress = true;
$(document).keyup(function(e){
if (e.keyCode == 38) { 
    if (!allowKeyPress)
        return false;
    allowKeyPress = false;
    setTimeout(function() { allowKeyPress = true; }, 1000);

    $('.selected').animate({'top':'300px'},500);
    $('.section.selected').removeClass('selected').next('.section').animate({'top':'0'},500).addClass('selected');
    return false;    
  }    
  e.preventDefault();
}); 
```

即使用一个标志，`allowKeyPress`- on keyup 测试标志是否为`false`，如果是则立即停止。否则，继续，将标志设置为`false`并使用[`setTimeout()`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)来安排功能在一秒钟后运行以将标志设置回`true`，当然还有运行动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:59:58.217

您可以查明是否有任何元素正在制作动画并取消新动画。所以把下面的代码作为你的key-up函数的第一行。

```
if($(".selected").is(":animated")) return; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:58:44.920

尝试这个：

```
$(document).keyup(function(e){
     if (e.keyCode == 38 && !$('.selected').is(':animated')) { 
          $('.selected').animate({'top':'300px'},500);
          $('.section .selected').removeClass('selected')
                               .next('.section')
                               .animate({'top':'0px','position':'relative'},500)
                               .addClass('selected');
          return false;
      }
      e.preventDefault();
}); 
```

# php - Magento：方法无效 Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio

> ID：15636423
> 
> 赞同：2
> 
> 时间：2013-03-26T11:51:50.110
> 
> 标签：php, magento, magento-1.7, magento-1.4

打开我们商店商品之一的页面时，我看到以下错误。在当前模板中它不起作用，在另一个普通模板中它起作用。该问题可能是由从 magento 1.4 升级到 1.7 引起的。

谁能解释这意味着什么以及发生了什么？我怎样才能解决这个问题？

`a:5:{i:0;s:109:"Invalid method Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio::_getDefaultValues(Array ( ) )";i:1;s:7069:"#0 /www/htdocs/app/design/frontend/base/default/template/bundle/catalog/product/view/type/bundle/option/radio.phtml(33): Varien_Object->__call('_getDefaultValu...', Array)`

下面是完整的错误报告。该产品是捆绑包的一部分。

```
a:5:{i:0;s:109:"方法无效 Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio::_getDefaultValues(Array
(
)
)";i:1;s:7069:"#0 /www/htdocs/app/design/frontend/base/default/template/bundle/catalog/product/view/type/bundle/option/radio.phtml(33 ): Varien_Object->__call('_getDefaultValu...', Array)

#1 /www/htdocs/app/design/frontend/base/default/template/bundle/catalog/product/view/type/bundle/option/radio.phtml(33): Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio->_getDefaultValues()
#2 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/www/ht...')
#3 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#4 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#5 /www/htdocs/app/code/core/Mage/Catalog/Block/Product/Price.php(154): Mage_Core_Block_Template->_toHtml()
#6 /www/htdocs/app/code/core/Mage/Bundle/Block/Catalog/Product/Price.php(97): Mage_Catalog_Block_Product_Price->_toHtml()
#7 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Bundle_Block_Catalog_Product_Price->_toHtml()
#8 /www/htdocs/app/code/core/Mage/Bundle/Block/Catalog/Product/View/Type/Bundle.php(216): Mage_Core_Block_Abstract->toHtml()
#9 /www/htdocs/app/design/frontend/base/default/template/bundle/catalog/product/view/type/bundle/options.phtml(37): Mage_Bundle_Block_Catalog_Product_View_Type_Bundle->getOptionHtml(Object(Mage_Bundle_Model_Option))
#10 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/www/ht...')
#11 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#12 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#13 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#14 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#15 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(522): Mage_Core_Block_Abstract->_getChildHtml('product.info.bu...', true)
#16 /www/htdocs/app/design/frontend/base/default/template/catalog/product/view/options/wrapper.phtml(28): Mage_Core_Block_Abstract->getChildHtml('', true, true)
#17 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/www/ht...')
#18 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#19 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#20 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#21 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#22 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(522): Mage_Core_Block_Abstract->_getChildHtml('product.info.op...', true)
#23 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(546): Mage_Core_Block_Abstract->getChildHtml('', true, true)
#24 /www/htdocs/app/design/frontend/default/shoestore/template/catalog/product/view.phtml(101): Mage_Core_Block_Abstract->getChildChildHtml('container2', '', true, true)
#25 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/www/ht...')
#26 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...')
#27 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#28 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#29 /www/htdocs/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml()
#30 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Text_List->_toHtml()
#31 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml()
#32 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#32 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true)
#33 /www/htdocs/app/design/frontend/base/default/template/page/2columns-right.phtml(48): Mage_Core_Block_Abstract->getChildHtml('content')
#34 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(241): include('/www/ht...')
#35 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/base/d...')
#36 /www/htdocs/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView()
#37 /www/htdocs/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml()
#38 /www/htdocs/app/code/core/Mage/Core/Model/Layout.php(555): Mage_Core_Block_Abstract->toHtml()
#39 /www/htdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout->getOutput()
#40 /www/htdocs/app/code/core/Mage/Cms/Helper/Page.php(137): Mage_Core_Controller_Varien_Action->renderLayout()
#41 /www/htdocs/app/code/core/Mage/Cms/Helper/Page.php(52): Mage_Cms_Helper_Page->_renderPage(Object(Mage_Cms_IndexController), 'no-route')
#42 /www/htdocs/app/code/core/Mage/Cms/controllers/IndexController.php(75): Mage_Cms_Helper_Page->renderPage(Object(Mage_Cms_IndexController), 'no-route')
#43 /www/htdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Cms_IndexController->noRouteAction()
#44 /www/htdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('noRoute')
#45 /www/htdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#46 /www/htdocs/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch()
#47 /www/htdocs/app/Mage.php(683): Mage_Core_Model_App->run(Array)
#48 /www/htdocs/index.php(119): Mage::run('', 'store')
#49 {main}";s:3:"url";s:26:"/nike-bw-black.html";s:11:"script_name";s:10:"/index.php";s :4:"皮肤";s:7:"默认";}

```

phtml文件的代码：http: [//pastebin.com/6CGq3nSR](http://pastebin.com/6CGq3nSR)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T19:19:31.163

听起来您的系统中运行的不同版本的 Magento 的代码不匹配。您也可能拥有旧类的编译版本，或社区/本地代码池覆盖。这会很长，所以我会尝试**用粗体字调出具体的调试提示**

正如其他答案已经表明的那样，PHP 正在告诉您确切的问题。

> Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio::_getDefaultValues

Magento 正在尝试在您的对象上调用该`_getDefaultValues`方法。`Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio`但是，在**您的**系统中，此对象没有此方法。如果我查看 Magento 1.7.0.1 的全新安装，则此类定义在

```
#File: app/code/core/Mage/Bundle/Block/Catalog/Product/View/Type/Bundle/Option/Radio.php
class Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio
    extends Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option
{
    /**
     * Set template
     *
     * @return void
     */
    protected function _construct()
    {
        $this->setTemplate('bundle/catalog/product/view/type/bundle/option/radio.phtml');
    }
} 
```

在它的父类`Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option`中，我们可以找到`_getDefaultValues`

```
#File: app/code/core/Mage/Bundle/Block/Catalog/Product/View/Type/Bundle/Option.php
class Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option extends Mage_Bundle_Block_Catalog_Product_Price
{
    protected function _getDefaultValues()
    {
        //...
    }
} 
```

受保护的方法可以从块的模板中调用，因此这意味着这**不是**Magento 发布版本的错误，而是您的系统的问题。

**调试步骤 1**：首先要检查的是您的文件版本

```
app/code/core/Mage/Bundle/Block/Catalog/Product/View/Type/Bundle/Option.php 
```

这个文件有`_getDefaultValues`方法吗？如果不是，或者如果它`private`不是`protected`，那么问题是您的`phtml`模板版本来自 Magento 的一个版本，但您的核心类文件来自另一个版本，或者已被修改。您可以尝试下载您正在运行的 Magento 版本的新副本并替换该文件 - 但如果这是一次拙劣的升级，您的系统可能会出现其他问题，因此请做好准备。修复比单个 Stack Overflow 问题更大的问题。

**调试步骤 2**：检查您的本地和社区代码池。

Magento 允许您使用`app/code/community`和`app/code/local`代码池替换类文件。您的系统可能在这些池之一中具有此类文件的一个版本。检查中的文件

```
app/code/community/Mage/Bundle/Block/Catalog/Product/View/Type/Bundle/Option.php
app/code/local/Mage/Bundle/Block/Catalog/Product/View/Type/Bundle/Option.php 
```

如果有文件，请检查`_getDefaultValues`方法。如果它不存在，或者它`private`不是`protected`，那么您已经找到了问题。再次解决这个问题会很棘手。如果文件放在这里，则意味着以前的开发人员添加或更改了方法。您可以通过删除`local`or`community`文件来修复上述错误，但是您将失去此自定义功能。您需要将正确的`core`文件与您的`local`/`community`文件合并，或者您需要识别`local`/`community`文件中的额外功能并重构这些以使用类重写，然后才删除该文件。同样，这是一个比单个堆栈溢出答案更复杂的过程。

**调试步骤 3**：关闭编译。

Magento 也有可能在“编译”模式下运行，并且你的类的“编译”版本。关闭编译模式

```
System -> Tools -> Compilation 
```

或从命令行使用

```
$ php shell/compiler.php disable 
```

并重新编译你的类。

**调试步骤 4**：清除 opt 代码缓存。

如果您正在运行像 APC 这样的系统来缓存 PHP 选项代码，则可能是该类的旧版本位于选项代码缓存中。由于这里有很多选项，我将把清除缓存作为练习留给读者。

**调试步骤5**：使用反射识别类文件

如果此时还没有识别出 rouge 类，在底部添加如下代码`index.php`

```
$o = Mage::getSingleton('core/layout')->createBlock('bundle/catalog_product_view_type_bundle_option_radio');
$r = new ReflectionClass($o);
echo '<h1>';
var_dump(get_class($o));
var_dump($r->getFilename());
echo '</h1>'; 
```

这将实例化一个块类并使用反射告诉你它的定义文件在哪里。从那里，您可以找出为什么这是错误的定义文件，以及您需要做些什么来删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T09:10:21.017

您似乎正在对 type 的对象调用不存在的方法`Mage_[...]_Radio`。

该类`Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio` [没有](http://docs.magentocommerce.com/Mage_Bundle/Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio.html)任何名为的公共方法`_getDefaultValues`。

* * *

经过一些研究，我发现该方法[实际上存在](http://docs.magentocommerce.com/Mage_Bundle/Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option.html#_getDefaultValues)于该类中，但它的可见性受到保护，因此要访问它，您从`Mage_[...]_Radio`该类继承并使其公开可访问或使其受到保护：

```
class YourClass extends Mage_Bundle_Block_Catalog_Product_View_Type_Bundle_Option_Radio {
    public function getDefaultValues() { return $this->_getDefaultValues(); }
} 
```

# c# - 未处理的异常阻止我在 Blend 2012 中打开项目

> ID：15636427
> 
> 赞同：1
> 
> 时间：2013-03-26T11:51:58.003
> 
> 标签：c#, visual-studio, blend

我一直在关注 MS 网站上的教程并来到这里：

[http://msdn.microsoft.com/en-us/library/windows/apps/jj129435.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj129435.aspx)

当我切换回混合时，我遇到了一个巨大的错误，我不知道这意味着什么或如何继续：

**发生了未处理的异常：**

System.InvalidCastException 返回参数的类型无效。在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion（NestedCallContext nestedCallContext，BlockingCall 调用，WaitHandle timeoutSignal）在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous（操作动作，Int32 targetApartmentId，WaitHandle 中止，WaitHandle timeoutSignal ) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle `1 targetObject, Action action, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1个目标对象，动作`1 action, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.Initialize() at Microsoft.Expression.DesignHost.IsolatedDesignerService.CreateLease(IIsolationTarget isolationTarget, CancellationToken cancelToken, DesignerServiceEntry& entry) at Microsoft.Expression.DesignHost.IsolatedDesignerService.IsolatedDesignerView.CreateDesignerViewInfo(CancellationToken cancelToken) at Microsoft.Expression.DesignHost.Isolation.IsolatedTaskScheduler.InvokeWithCulture[T](CultureInfo culture, Func`2 func, CancellationToken cancelToken) 在 Microsoft.Expression.DesignHost.Isolation.IsolatedTaskScheduler.<>c__DisplayClassa `1.<StartTask>b__6() at System.Threading.Tasks.Task`1.InnerInvoke() 在 System.Threading.Tasks.Task.Execute()

System.InvalidCastException 返回参数的类型无效。

服务器堆栈跟踪：位于 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalIn(Action action, Int32 targetApartmentId) 处的 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion(NestedCallContext nestedCallContext, BlockingCall call, WaitHandle timeoutSignal) Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn(IRemoteObject targetObject, Action action) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.Initialize() 在系统.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs) 在 System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 Microsoft.Expression 的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.b_a *(IRemoteDesignerService d) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c* _DisplayClass1`1 的 DesignHost.Isolation.Remoting.IRemoteDesignerService.Initialize()。 b__0() 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

System.InvalidCastException 返回参数的类型无效。在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.WaitForCompletion（NestedCallContext nestedCallContext，BlockingCall 调用，WaitHandle timeoutSignal）在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOutSynchronous（操作动作，Int32 targetApartmentId，WaitHandle 中止，WaitHandle timeoutSignal ) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.MarshalOut(Action action, Int32 targetApartmentId, WaitHandle aborted, CallSynchronizationMode syncMode, WaitHandle timeoutSignal) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TValue](RemoteHandle`1 targetObject, Action action, CallSynchronizationMode syncMode) at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func, CallSynchronizationMode syncMode) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.LocalHostProject.Microsoft.Expression.DesignHost.IHostProject.get_TargetAssemblyPath() 在 Microsoft.Expression.DesignSurface.DesignerService.GetComponentName(IHostProject 项目) 在Microsoft.Expression.DesignSurface.DesignerService.InitializePrimaryProject() 在 Microsoft.Expression.DesignSurface.DesignerService.Initialize() 在 Microsoft.Expression.DesignHost.Isolation.Remoting 的 Microsoft.Expression.DesignSurface.DesignerService.InitializeWindowsRuntimeContext(IHostProject contextProject, IHostAppPackage appPackage) .RemoteDesignerService.b__0() 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

System.InvalidCastException 返回参数的类型无效。在 System.Runtime.Remoting.Proxies.RealProxy.ValidateReturnArg(Object arg, Type paramType) 在 System.Runtime.Remoting.Proxies.RealProxy.PropagateOutParameters(IMessage msg, Object[] outArgs, Object returnValue) 在 System.Runtime.Remoting。 Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteHostProject.get_TargetAssemblyPath() 在 Microsoft。 Expression.DesignHost.Isolation.Remoting.LocalHostProject.b_ *1a(IRemoteHostProject p) 在 Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c*_DisplayClass4`2.b__3() 在 Microsoft.Expression.DesignHost.Isolation.Remoting.STAMarshaler.Call.InvokeWorker()

有没有人遇到过这个/知道发生了什么？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:00:16.197

微软于 2012 年 9 月 11 日 14:05 发表

> 我们从其他用户那里看到了类似的堆栈跟踪。您是否在项目中引用了 .Net 2.0 程序集？不幸的是，设计器无法处理旧（.Net 2.0）程序集中的类型，这导致设计器崩溃。您能否尝试删除任何 .Net 2.0 程序集，看看是否可以修复它。

**问题是针对.Net 2.0的链接项目！**谁会知道。当设计师不是一直在崩溃时，工作非常方便。

[http://social.msdn.microsoft.com/Forums/en-US/vswpfdesigner/thread/f4af2020-ed43-4139-9dc9-759ce3b38377/](http://social.msdn.microsoft.com/Forums/en-US/vswpfdesigner/thread/f4af2020-ed43-4139-9dc9-759ce3b38377/)

# java - 使用 5 个参数 android 登录

> ID：15636428
> 
> 赞同：2
> 
> 时间：2013-03-26T11:51:58.140
> 
> 标签：java, android

在我的应用程序中，如果结果成功，我想联系 Web 服务并返回一个布尔值。出于安全原因，我解析了 5 个字段，但我不知道如何使用soap 发送和接收输入和输出。我遵循了一个 w3school 示例，它适用于一个输入，但现在我对几个数据感到困惑。请帮忙，这是我的代码。

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapObject loginTo = new SoapObject(NAMESPACE, "LoginDetail");

PropertyInfo pi = new PropertyInfo();
loginTo.addAttribute("idCon", "124059432");
loginTo.addProperty("codeSession", "1234");
loginTo.addProperty("type","CLIENT");
loginTo.addProperty("client_number","167");
loginTo.addProperty("account_num","3403");
loginTo.addProperty("codeAuth","333");

request.addProperty("loginDetails", loginTo);

Log.e("Soap Request : ", "" + request);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE aht = new HttpTransportSE(URL);

try {
    aht.call(SOAP_ACTION, envelope);
    SoapObject response = (SoapObject) envelope.getResponse();

    Log.e ("login result", response.toString()); //lblResult.setText(results.toString());

    Boolean loginStatus = Boolean.getBoolean(response.getProperty("success").toString());

} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:39:02.563

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

request.addProperty("codeSession", "1234");
request.addProperty("type","CLIENT");
request.addProperty("client_number","167");
request.addProperty("account_num","3403");
request.addProperty("codeAuth","333");

Log.e("Soap Request : ", "" + request);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE aht = new HttpTransportSE(URL);

try

{
    aht.call(SOAP_ACTION, envelope);
    SoapObject response = (SoapObject) envelope.getResponse();

    Log.e ("login result", response.toString()); //lblResult.setText(results.toString());

    Boolean loginStatus = Boolean.getBoolean(response.getProperty("success").toString());

} 
```

像这样使用。希望它会奏效。

# javascript - Xtemplate 语句是否允许匹配字符串？

> ID：15636434
> 
> 赞同：0
> 
> 时间：2013-03-26T11:52:21.407
> 
> 标签：javascript, extjs, string-comparison

我有这个问题，我需要知道是否可以对 XTemplate 中的参数进行字符串比较操作。我需要知道字符串中是否有子字符串。那是我的代码。我需要一个检查“L”是否为 RIV_Filtro 的语句

```
var detailRivenditoreTemplate = new Ext.XTemplate(
    '<tpl for="rivenditori">',
        '<div id="boxDettaglioRivenditori">',
        '<h1>{RIV_RagioneSociale}</h1>',
        '<div>',
        '{RIV_Indirizzo}',
        '<p>{RIV_CAP} - {RIV_Localita}, {RIV_Regione}</p>',
        '{RIV_Paese}',
        '</div>',
        '</div>',
    '</tpl>'
); 
```

我想这是不可能的，但我只是问是否有人已经面临这个问题。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:22:49.840

您可以使用类似这样的模板函数：

```
var detailRivenditoreTemplate = new Ext.XTemplate(
    '<tpl for="rivenditori">',
        '<div id="boxDettaglioRivenditori">',
        '<h1>{RIV_RagioneSociale}</h1>',
        '<div>',
        '<tpl if="[this.checkFilter(RIV_Filtro)] &gt; -1">{RIV_Indirizzo}</tpl>',
        '<p>{RIV_CAP} - {RIV_Localita}, {RIV_Regione}</p>',
        '{RIV_Paese}',
        '</div>',
        '</div>',
    '</tpl>', {
        checkFilter: function(filter) {
            return filter.indexOf("L");
        }
     }
); 
```

这是一个小提琴：http: [//jsfiddle.net/johanhaest/KJfDE/](http://jsfiddle.net/johanhaest/KJfDE/)

在示例中，仅当 RIV_Filtro 包含“L”时，才会显示 RIV_Indirizzo。

# java - 无法使用 ZipInputStream 处理 zip 文件中的大文件

> ID：15636439
> 
> 赞同：0
> 
> 时间：2013-03-26T11:52:35.637
> 
> 标签：java, zip

我有一个下面提到的 java 类，它提取一个 zip，并将其内容一一转换为字符串并打印到控制台。
问题是，当 zip 中的文件很大时，大约 80KB。没有显示整个内容（只有 3/4 的数据被转换为字符串并显示在控制台中）。
其次，下面提到的代码在两者之间引入了空/空格，如果文件大小很小~1KB

下面提到的代码有什么问题。

```
 public static void main(String[] args) throws Exception {
    byte[] buf = new byte[1024];
    final int BUFFER = 1024;
    String fName = "c:\\DOC00001.zip";
    ZipInputStream zinstream = new ZipInputStream(
            new FileInputStream(fName));
    ZipEntry zentry = zinstream.getNextEntry();

    while (zentry != null) {            
    byte data[] = new byte[BUFFER];
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    while ((zinstream.read(data, 0, BUFFER)) != -1) {
        out.write(data);
    }       
    InputStream is = new ByteArrayInputStream(out.toByteArray());
    StringWriter writer = new StringWriter();
    IOUtils.copy(is, writer, "UTF-8");
    String response = writer.toString();
    System.out.println(response);
    zentry = zinstream.getNextEntry();
    }
    zinstream.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:04:33.243

该`read`方法不保证读取一个完整的缓冲区；返回已读取的字节数。从 zip 文件或任何`InputStream`一般文件中提取数据的正确方法是：

```
byte[] data = new byte[BUFFER];
ByteArrayOutputStream out = new ByteArrayOutputStream();
int bytesRead;
while ((bytesRead = zinstream.read(data, 0, BUFFER)) != -1) {
    out.write(data, 0, bytesRead);
} 
```

或者，由于您已经在使用`IOUtils`，

```
ByteArrayOutputStream out = new ByteArrayOutputStream();
IOUtils.copy(zinstream, out); 
```

或者，假设您`ByteArrayOutputStream`只写入 a 以稍后写入字符串，您可以`ByteArrayOutputStream`完全跳过：

```
while (zentry != null) {
  StringWriter writer = new StringWriter();
  IOUtils.copy(zinstream, writer, "UTF-8");
  String response = writer.toString();
  System.out.println(response);
  zentry = zinstream.getNextEntry();
} 
```

# html - 在 html 标签 lang 属性 asp.net-mvc 上设置

> ID：15636443
> 
> 赞同：1
> 
> 时间：2013-03-26T11:52:55.960
> 
> 标签：html, asp.net-mvc, lang

如何在 MVC 中的 html 标签上设置（不做可怕的黑客攻击）lang 属性

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
</html> 
```

在 Forms 3.5 中，这可以通过添加`runat='server'`到 html 标记然后设置值来完成。
我找不到这样做的“首选”方式。
我打算将它与`css:lang`选择器一起使用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-19T17:31:22.337

@Vimal Stan 在评论中提出了最简单和最“正确”的方法。

```
<html 
xmlns="http://www.w3.org/1999/xhtml" 
xml:lang="en"  
lang="@System.Threading.Thread.CurrentThread.CurrentUICulture.TwoLetterISOLanguageName"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-04T00:06:56.227

C＃

```
ElementID.Attributes.Add("attributeyoucareabout","value to give it"); 
```

# xpath - xpath试图选择一个div内的内容，除了一个，包括文本

> ID：15636450
> 
> 赞同：0
> 
> 时间：2013-03-26T11:53:18.330
> 
> 标签：xpath

我试图选择一个 div 内的内容，这个 div 里面有一些文本和一些额外的标签。我不想选择里面的第一个 div。我正在尝试使用此选择器，但只给了我标签，没有文字

```
//div[@class='contentDealDescriptionFacts cf']/div[@class='viewHalfWidthSize' and position()=2]/*[not(@class='subHeadline')] 
```

给我带来问题的 div 是这个：

```
<div class="viewHalfWidthSize">
    .......
</div>

<div class="viewHalfWidthSize">
    <div class="subHeadline firefinder-match">The Fine Print</div> <----------Except this div I want everything inside of this div!!
    <strong class="firefinder-match">Validity: </strong>
    Expires 27 June 2013.
    <br class="firefinder-match">
    <strong class="firefinder-match">Purchase: </strong>
    Limit 1 per 2 people. May buy multiple as gifts.
    <br class="firefinder-match">
    <strong class="firefinder-match">Redemption: </strong>
    Booking required online at
    <a target="_blank" href="http://grouponbookings.co.uk/lautre-pied-march/"      class="firefinder-match">http://grouponbookings.co.uk/lautre-pied-march/</a>
. 48-hour cancellation policy; late cancellation incurs a £30 surcharge per person.
    <br class="firefinder-match">
    <strong class="firefinder-match">Further information: </strong>
    Valid Mon-Sun midday-2.45pm; Mon-Wed 6pm-10.45pm. Must be 18 or older, ID may be   requested. Valid only on set tasting menu only; menu is dependent on market changes and seasonality and is subject to change. Max. two hours seating time. Discretionary service charge will be added to the bill based on original price. Original value verified 19 March 2013 at 9.01am.
   <br class="firefinder-match">
   <a target="_blank" href="http://www.groupon.co.uk/universal-fine-print" style="color: #339933;" class="firefinder-match">See the rules</a>
that apply to all deals.
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:56:43.270

匹配元素节点而`*`不是文本节点。尝试替换`*`以`node()`选择所有节点类型。

要分解您的 XPath 正在做什么：

您正在文档 ( `//`) 中的任何位置查找具有“contentDealDescriptionFacts cf”类的 div。

然后你正在寻找也有类的第二个 div `viewHalfWidthSize`。请注意，这不是具有该类的第二个 div，而是第二个 AND 具有该类的 div，因此如果具有该类的 div 是第三个和第四个，则它不会与具有该类的第二个 div 匹配`position() = 4`。如果你想要第二个`viewHalfWidthSize`div，那么你会想要`[@class='viewHalfWidthSize'][position()=2]`.

最后，您将返回没有 class 的所有元素的节点列表`subHeadline`。如果您更改为`*`，`node()`那么您将获得所有节点的节点列表。

* * *

以下 XPath：

```
//div[@class='contentDealDescriptionFacts cf']/div[@class='viewHalfWidthSize' and position()=2]/node()[not(name(.)='div' and position() = 1)] 
```

只要第一个子节点是您要忽略的 div，就应该返回您想要的内容。

如果您将其更改为：

```
//div[@class='contentDealDescriptionFacts cf']/div[@class='viewHalfWidthSize' and position()=2]/node()[position() != count(../div[1]/preceding-sibling::node()) + 1] 
```

那么它应该无论如何都可以工作。它返回您的节点列表，然后计算出第一个 div 之前有多少个前面的节点，并检查该位置是否大于该位置（即第一个 div 的位置）并将其从列表中排除。

* * *

作为另一种选择，您可以只修改原始解决方案，但`not(@class='subHeadline')`您不应该这样做

```
not(contains(concat(' ', @class, ' '), ' subHeadline ')) 
```

`subHeadline`假设您的类是空格分隔的，它将检查类属性是否包含字符串中的任何位置。然后，这将匹配您的具有类的片段`"subHeadline firefinder-match"`

# r - 在R中，Matlab中@函数句柄的等价物是什么？

> ID：15636454
> 
> 赞同：5
> 
> 时间：2013-03-26T11:53:27.177
> 
> 标签：r

在 Matlab 中，如果我有一个函数 f，例如签名是 f(a,b,c)，我可以创建一个只有一个变量 b 的函数，该函数将调用 f 并具有固定的 a=a1 和 c=c1：

```
g = @(b) f(a1, b, c1); 
```

R中是否有等价物，还是我只需要重新定义一个新函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T12:18:42.780

还有方便的`functional::Curry`功能：

```
f <- function(a, b, c) {a + b + c}
f(1, 2, 3)
# [1] 6

library(functional)
g <- Curry(f, a = a1, c = c1)
g(b=2)
# [1] 6
g(2)
# [1] 6 
```

我认为@NPE 的解决方案的一个重要区别是`g`using的定义`Curry`没有提到`b`. `f`因此，当参数数量变大时，您可能更喜欢这种方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-26T11:56:13.253

```
g <- function(b) f(a1, b, c1) 
```

# apache - Apache 重定向到 tomcat 或默认 DocumentRoot

> ID：15636455
> 
> 赞同：1
> 
> 时间：2013-03-26T11:53:29.943
> 
> 标签：apache, tomcat

我正在尝试根据 url 条件将 http 请求重定向到 tomcat 或默认 DocumentRoot。

例子：

```
IF url contains /css/ then serving the file from /var/www
else
redirect to tomcat using JKMount 
```

这是httpd.conf中的配置

```
<VirtualHost *:80>
     ServerName www.example.com
     DocumentRoot /var/www
     RewriteEngine on 
     LogLevel debug
     RewriteLogLevel 3
     RewriteLog logs/apache-mod_rewrite

     RewriteRule ^/css/(.*)$ /var/www/css/$1 [L]

     RewriteCond $1 !^portal
     RewriteRule ^/(.*)$ /portal/?user=YES [L,PT]
     JkMount  /* failover
</VirtualHost> 
```

当尝试向[http://www.example.com](http://www.example.com)请求时，它会重定向到 tomcat 并正确提供页面。

但是，当尝试请求[http://www.example.com/css/sample.css](http://www.example.com/css/sample.css)时，apache 返回错误 404。我是否可以将条件转发到默认 DocumentRoot 或 tomcat？先谢谢了。

# wcf - 底层连接被关闭：连接被意外关闭

> ID：15636456
> 
> 赞同：0
> 
> 时间：2013-03-26T11:53:33.477
> 
> 标签：wcf

我使用 Clear Image Com dll 制作了一个图像处理服务库。我有一个用于服务合同的接口 Imagery，其中包含一个 methodLoadBitmapFromFile(imgFileName)。我的服务类覆盖此方法并使用 clear image com dll 及其方法来裁剪图像。此外，我创建了一个 Windows 表单来使用此服务，但是当

```
Imagery img;
 img = new ServiceReference1.ImageryClient();

 img.LoadBitmapFromFile(imgFileName);
  pictureBox1.Image = img.GetBitmap(); 
```

图像是我的服务合同。我创建了一个称为 ServiceReference1 的服务。LoadBitmapFromFile(imgFileName)——这个方法实际上是在服务类中定义的。当它从客户端调用时，我收到以下错误：

```
{"The underlying connection was closed: The connection was closed unexpectedly."} 
```

我的情况有什么问题？是在服务层使用Com dll的问题吗？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:18:00.920

您可能想要添加 try catch 块来捕获异常，而不是创建新连接。可能的原因可能是超时。

# android - 将 Dropbox 集成到 android 应用程序中，但没有登录弹出窗口

> ID：15636457
> 
> 赞同：11
> 
> 时间：2013-03-26T11:53:33.943
> 
> 标签：android, dropbox, dropbox-api

我想在我的应用程序中使用保管箱。我开发了一个用于上传和下载文件的示例应用程序，它要求进行身份验证。

但我不想打开登录弹出窗口。

其他用户是否可以使用默认帐户（单个帐户）登录详细信息访问保管箱？因此，任何用户都可以直接使用 Dropbox，无需登录弹出窗口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T07:47:38.783

如何手动设置访问用户访问令牌对。

```
 AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
     AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
     if (mDBApi == null) {
        mDBApi = new DropboxAPI<AndroidAuthSession>(session);

//  mDBApi.getSession().startAuthentication(Main.this);  //kicks off the web-based authentication
      //you'll have to use the web-based authentication UI one-time to get the ######### values
        String token_key="#########";  
        String token_seceret="#########";
        AccessTokenPair tokens=new AccessTokenPair(token_key,token_seceret);
        mDBApi.getSession().setAccessTokenPair(tokens);     
  //  boolean v=mDBApi.getSession().authenticationSuccessful(); 
    } 
```

第一次我在带有断点的调试模式下运行应用程序时，我通过详细输入有效日志来获取令牌密钥和令牌秘密。并保存（注意）该凭证，然后我按照上面的代码手动设置它们，然后可以成功登录.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T17:36:35.773

是的。看看他们的示例应用 DBRoulette。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T09:35:54.230

请从以下链接名称下载项目，名称为**DBRoulette**

> [https://www.dropbox.com/developers/core](https://www.dropbox.com/developers/core)

[并在https://www.dropbox.com/developers](https://www.dropbox.com/developers)中创建一个应用程序并获取 api 密钥和秘密并将其添加到**DBRoulette.java**和**AndroidManifest.xml**中......它可以工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T13:17:30.773

在 onCreate() 写

```
AppKeyPair pair = new AppKeyPair(ACCESS_KEY, ACCESS_SECRET);
    session = new AndroidAuthSession(pair, AccessType.APP_FOLDER);
    dropbox = new DropboxAPI<AndroidAuthSession>(session);

    SharedPreferences prefs = getSharedPreferences(DROPBOX_NAME, 0);
    String key = prefs.getString(ACCESS_KEY, null);
    String secret = prefs.getString(ACCESS_SECRET, null);
    if (key != null && secret != null) {
        Log.d("key secret", key + "    " + secret);
        AccessTokenPair token = new AccessTokenPair(key, secret);
        dropbox.getSession().setAccessTokenPair(token);
    }
    if (key == null && secret == null)
            dropbox.getSession().startAuthentication(DropboxActivity.this); 
```

并在 onResume() 中写入

```
if (dropbox.getSession().isLinked()) {
        try {
            loggedIn(true);
            doAction();
        } catch (IllegalStateException e) {
            Toast.makeText(this, "Error during Dropbox authentication",
            Toast.LENGTH_SHORT).show();
        }

        } else if (dropbox.getSession().authenticationSuccessful()) {
            try {
                session.finishAuthentication();
                TokenPair tokens = session.getAccessTokenPair();
                SharedPreferences prefs = getSharedPreferences(DROPBOX_NAME, 0);
                Editor editor = prefs.edit();
                editor.putString(ACCESS_KEY, tokens.key);
                editor.putString(ACCESS_SECRET, tokens.secret);
                editor.commit();

                loggedIn(true);
                doAction();

            } catch (IllegalStateException e) {
                Toast.makeText(this, "Error during Dropbox authentication",
                        Toast.LENGTH_SHORT).show();
            }

        } 
```

对我来说效果很好

# php - 将另一个变量添加到数组以在 foreach 循环中使用它

> ID：15636459
> 
> 赞同：0
> 
> 时间：2013-03-26T11:53:41.193
> 
> 标签：php, arrays, foreach, smarty

我的数据库类中有一个函数，它为我提供了某个用户正在参加的事件列表

```
function getEventList($uid)
{
    $date = date('Y-m-d H:i:s');
    $eventSQL = "SELECT em.eventID, e.eventName, e.eventTime FROM eventmembers em INNER JOIN events e ON em.eventID = e.eventID WHERE userIDInvited = :uid";
    $eventPrepare = $this->prepare($eventSQL);
    $eventPrepare->bindParam(':uid', $uid);
    $eventPrepare->execute();
    return ($eventPrepare->rowCount() > 0)
        ? $eventPrepare->fetchAll() : array();
} 
```

要访问这些结果，我只是这样做

```
//php

$eventList = $db->getEventList($userid);
if($eventList == NULL){
$smarty->assign('events', 'No events'); 
}
else{
$count = sizeof($eventList);
for($i = 0; $i < $count; $i++)
{
    $smarty->assign('events', $eventList);
}   
}

html

<p>MY EVENTS</p>
    {foreach from=$events item=result}
        <a href="https://localhost/FinalYear/events/{$result.eventID}.php">{$result.eventName}</a><br>
        {$result.eventTime}<br>({$result.timeRemain} Days remaining)
        <br>
        <br>
{/foreach} 
```

我现在想做的是补充，还有说还有多少天直到这个事件发生。

我所做的只是在 for 循环中添加它。

```
$startTimeStamp = strtotime($date);
   $endTimeStapm = strtotime($eventList[$i]['eventTime']);
   $timeDiff = abs($endTimeStapm - $startTimeStamp);
   $numberDays = $timeDiff/86400;
   $numberDays = intval($numberDays); 
```

现在的问题是，当用户参加多个活动时，`$numberDays`总是会被覆盖。所以我试图添加`$numberDays`到当前数组索引的末尾。但这给了我一个无限循环。`$numberDays` `var_dump`当我必须输入时，没有给我这个输出

```
array(2) { [0]=> array(3) { ["eventID"]=> string(1) "1" ["eventName"]=> string(7) "Konzert" ["eventTime"]=> string(19) "2013-03-28 00:00:00" } [1]=> array(3) { ["eventID"]=> string(1) "2" ["eventName"]=> string(4) "Oper" ["eventTime"]=> string(19) "2013-03-30 00:00:00" } } array(2) { [0]=> array(3) { ["eventID"]=> string(1) "1" ["eventName"]=> string(7) "Konzert" ["eventTime"]=> string(19) "2013-03-28 00:00:00" } [1]=> array(3) { ["eventID"]=> string(1) "2" ["eventName"]=> string(4) "Oper" ["eventTime"]=> string(19) "2013-03-30 00:00:00" } } 
```

但我也希望在每个条目结束时剩余的天数。问题是，我不能在另一个循环中执行此操作，因为这意味着我需要在另一个循环内的 .html 文件中创建另一个循环。所以它会在另一个循环跳到下一个条目之前运行。

任何建议如何解决这个问题？

我的数据库表看起来像这样

桌子`events`

```
eventID, eventName, eventDescription, eventLocaion, eventTime, eventHost, privacy Settings 
```

桌子`eventmembers`

```
eventID, userIDInvited, InvitationStatus 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:11:40.617

您可以使用 FOR 而不是 FOREACH 循环遍历数组。

```
$data = array(0 => array('name' => 'John', 'age' => '12'), 1 => array('name' => 'Megan', 'age' => '18'));
for ($i = 0; $i < sizeof($data); $i++) {
// get your needed timestamp, for example
$time = time();
// add this to each sub-array end
$data[$i]['time'] = $time;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:13:13.150

您可以通过多种方式解决此问题：

计算循环剩余天数`foreach`，并立即打印出来；或添加一个单独的数组，剩余天数。您甚至可以为事件的每个方面创建一个包含（数组）字段的类。正如您已经观察到的那样，现在您正在覆盖值...

# c# - Windows 窗体 - 在窗体和控件之间传递参数

> ID：15636469
> 
> 赞同：2
> 
> 时间：2013-03-26T11:54:29.933
> 
> 标签：c#, winforms, controls

在我的 C# Windows Forms 项目中，我有：

*   *mycontrol*（它是键盘）

*   *myform*（它是文本框的布局，和 mycontrol ）

我想运行一些*myform*中的代码，但是通过按下*mycontrol*中的按钮）

例如：

*当我在mycontrol*中按 Backspace 按钮时，我只使用 Button Event

```
SendKeys.Send("{BACKSPACE}"); 
```

并且*myform*文本框知道我按了退格键。

但我有一些自定义按钮（功能），这些按钮应该在*myform中定义*

例如在*myform*我有：

```
private void btnOK_Click(object sender, EventArgs e)
        {
            DoSomething();

        } 
```

整个问题是 - 如何从*mycontrol运行**myform* btnOK_Click 或 DoSomething

 *更新#2：

当我删除检查它是否为空时，按下 D0，NullReference 时没有任何反应。

内部部分类 myForm : BaseForms { public myForm() { InitializeComponent(); ShowMyControl(); }

```
private void ShowMyControl(){
    KeyboardControl myControl = new KeyboardControl();
  myControl.KeyboardKeyPressed += new Action<string>(OnMyControlKeyPressed);
  this.Controls.Add(myControl);
}

private void OnMyControlKeyPressed(string key)
{
    switch (key)
    {
        case "D0":
            MessageBox.Show("A");
            break;
        case "D1":
            MessageBox.Show("B");
            break;
        default:
            MessageBox.Show("C");
            break;
    }
}
...
} 
```

和

```
public partial class KeyboardControl : UserControl
    {
    public event Action<string> KeyboardKeyPressed;
    ...
    private void HandlingMouseClick1(Point PressedItem)
        {
         ...
          case Keys.D0:
                            if (KeyboardKeyPressed != null)
                                KeyboardKeyPressed("D0");
                            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:04:41.817

在 MyForm_Load 或其他任何地方，如果你动态初始化你的 MyControl，你可以添加类似的东西`MyControl.Click += new System.KeyEventHandler(this.MyControl_Click)`并放置一个名为

```
private void MyControl_Click(sender object, KeyEventArgs e)
{
   ... //Find out which key was pressed, proceed.
} 
```

在我的表格中。当引发 Click 事件时，将调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:00:53.183

您的控件应该公开一个事件，然后表单可以订阅并采取行动。

给您的活动起一个有意义的名称。例如，如果您的控件包含一个搜索按钮并且用户单击它，则让您的控件触发一个名为 的事件`SearchButtonClicked`。

然后表单可以包含一个订阅该`SearchButtonClicked`事件的方法，然后只要用户单击“搜索”按钮，就会执行该代码。

另请参阅[MSDN 上的事件教程](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T14:42:00.427

在 MyForm 中尝试以下方法

```
 public class MyForm : Form
    {
    //.ctor
    MyForm() { }

    private void ShowMyControl(){
      MyControl myControl = new MyControl();
      myControl.KeyboardKeyPressed += new Action<string>(OnMyControlKeyPressed);
      this.Controls.Add(myControl);
    }

    private void OnMyControlKeyPressed(string key)
    {
     switch(key)
      {
       case "D0" :
        DoSomething();
        break;
       case "D1" :
        DoSomethingElse();
        break;
       default :
        SendKeys(key);
        break;
      }
    }
}

/*MyControl*/

namespace Keyboards
{
  public class MyControl : Control
  {

    public event Action<string> KeyboardKeyPressed;

    private void HandlingMouseClick(Point PressedItem)
    {
        if(KeyboardKeyPressed != null)
           KeyboardKeyPressed(PressedItem.ToString());
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T11:58:55.760

使用 a`delegate`并将其传递给第二种形式的构造函数。

```
public delegate void MyDelegate(Object SomeData); 
```

您需要根据要使用的方法签名创建一个委托。

```
MyDelegate del = form1.DoSomething;
Form2 form2 = new Form2(..., del); 
```

*然后，您可以从您的form1*封装一个方法并将其传递给*form2*，然后在*form2*中调用它。

```
public Form2(..., MyDelegate del){ }

del.Invoke(); 
```

[在这里](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)寻找代表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T11:57:48.550

在 MyControl 类中添加对 MyForm 的引用

```
class MyControl
{
    MyForm _form=null;
    MyControl(MyForm form)
    {
        _form=form;
    }

    void DoSth()
    { 
        if(_form!=null)
           _form.DoSomething();
    }
} 
```*

# jquery - 如何动态更改带有单选框的 iframe 的大小？

> ID：15636472
> 
> 赞同：-1
> 
> 时间：2013-03-26T11:54:36.737
> 
> 标签：jquery, iframe, size

我希望用户使用单选复选框切换 iframe 的大小，我该怎么做？

我尝试了类似的东西对于radiocheckboxes我做了这样的事情：

```
<input id="othersize1" type="radio" name="size"reSize(60,400) onclick="" checked="checked" /><label for="othersize1">60x400</label>
<input id="othersize2" type="radio" name="size" onclick="reSize(1280,400)" /><label for="othersize2">1280x400</label> 
```

内嵌框架：

```
<iframe src="myphphere.php">Your browser don't supports iframes.</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:05:39.067

您可以使用[`jQuery`](http://www.jquery.com).

这是我刚刚制作的一个基本示例：

HTML：

```
<iframe id="iframe1" src="http://meatballcandy.com/wp-content/uploads/2012/09/nicholas-cage-as-et.png">
    <p>Not Supported</p>
</iframe>

<div>
    <input id="item1" type="radio" name="size" value="100" checked="checked" /><label for="item1">100x100</label>
    <input id="item2" type="radio" name="size" value="200" /><label for="item2">200x200</label>
    <input id="item3" type="radio" name="size" value="300" /><label for="item3">300x300</label>
</div> 
```

JAVASCRIPT：

```
$(document).ready(function(){
    $('input[type="radio"]').click(function(){
        $('#iframe1').css({
            'height': $(this).val() + 'px',  
            'width': $(this).val() + 'px'
        });
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/fYP2Z/1/](http://jsfiddle.net/dirtyd77/fYP2Z/1/)

# c# - 无法使用 UnityPlayer.UnitySendMessage 从 java 向 Unity 发送消息

> ID：15636477
> 
> 赞同：5
> 
> 时间：2013-03-26T11:55:03.937
> 
> 标签：c#, android, plugins, unity3d

我正在尝试用 Java 创建一个 android 插件。当我尝试使用将一些消息返回给 Unity 时

```
UnityPlayer.UnitySendMessage("testObject", "testMethod", "sample message"); 
```

从统一运行代码时，

我得到以下异常

```
SendMessage: Object testObject is not found! 
```

**我在我的场景中有 testObject 作为游戏对象。**

我能够弄清楚这里的问题是什么。

我认为可以使用的另一种方法是如果我可以使用`GetComponent<>`，但为此我必须将游戏对象（testObject）传递给我不知道的java。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T17:37:11.633

1.  GameObject 的名称必须是“testObject” 检查是否为真： [http ://docs.unity3d.com/Documentation/ScriptReference/Object-name.html](http://docs.unity3d.com/Documentation/ScriptReference/Object-name.html)

2.  你需要更好地描述。可以是很多东西

# javascript - 在新窗口而不是新标签中打开 mp3 播放器？

> ID：15636481
> 
> 赞同：0
> 
> 时间：2013-03-26T11:55:19.360
> 
> 标签：javascript, html, window

我已经嵌入了 Yahoo! 播放器进入我的网站以播放我的用户上传的 MP3，但我遇到的问题是每当我尝试在新窗口中打开时，它总是在新选项卡中打开。我已经在这个网站和谷歌上搜索了 10 分钟，我所看到的只是“你无法做到”我知道这不是真的，因为我使用了大量能够打开新窗口的网站。如果有人知道如何做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:45:33.797

我假设您在他们的网站上使用[这种方法](http://webplayer.yahoo.com/get/#_)，这意味着您有指向要播放的内容的 html 链接。如何在你的 html 中使用**target="_blank"属性**

```
<a href="http://www.mymusic.com/mysong.mp3" target="_blank">Song</a> 
```

# php - 我可以将 PHP MySQL 资源变量分配/复制到其他吗？

> ID：15636483
> 
> 赞同：1
> 
> 时间：2013-03-26T11:55:24.977
> 
> 标签：php, mysql, variables, resources

我有一个问题。我可以将 PHP MySQL 资源变量分配给其他吗？

例如。

```
$query=mysql_query("SELECT * FROM sometable",$dbconn) or die("Wheewww!"); //$query, Resource variable

while($result=mysql_fetch_assoc($query))
 {
   echo $result['somefield']." ";
 }

$query_new=$query;  //Assigning mysql resource variable to other

while($result_new=mysql_fetch_assoc($query_new))
 {
   echo $result_new['somefield']." ";
 } 
```

上面的代码是否完全正确？请分享您的想法。

干杯，
简森。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T11:58:10.320

是的，你可以做到这一点，但这对你没有任何好处。您已经迭代了结果集，将资源分配给另一个变量不会重置它。您必须使用 重置结果集中的光标`mysql_data_seek`。

您还应该停止使用*已弃用*的 MySQL API 并转移到 PDO 或 Mysqli。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T11:58:38.747

这应该没问题，您只是将两个变量指向同一个资源。但是，在您可以循环 $query_new 之前，您必须使用 mysql_data_seek ( [http://www.php.net/manual/en/function.mysql-data-seek.php](http://www.php.net/manual/en/function.mysql-data-seek.php) )重置内部数据指针

编辑： deceze 答案包括关于使用非弃用代码的好建议

# android - 将 Fragment 与 ViewPager 一起使用

> ID：15636485
> 
> 赞同：0
> 
> 时间：2013-03-26T11:55:29.667
> 
> 标签：android, android-fragments, android-viewpager, swipeview

我正在使用 View pager 创建滑动视图效果

现在我想在相同的活动片段上实现不同的片段是根据条件显示的不同布局。

我被困在如何创建`pagerAdapter`和如何创建`fragment`课程上。

代码：

```
 public class mFragment extends Fragment{
    Context mContext;
public mFragment(Context context){
mContext = context;
}
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            return inflater.inflate(R.layout.main, ActivityScreen.mViewPager,false);
        }
    }

 public class mPagerAdapter extends FragmentPagerAdapter
    {
        int i=-1;

        public mPagerAdapter(FragmentManager fm)
        {
            super(fm);
            mViewPager.removeAllViews();
        }

        @Override
        public int getCount()
        {
            return data.size();
        }

        @Override
        public Fragment getItem(int pos) {
            return new mFragment(Context ctx);
        }
    } 
```

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:02:13.827

在您的 FragmentActivity 中为 FragmentPagerAdapter 添加一个适配器，然后 @Override Fragment getItem 并根据要求向其中添加 Fragments

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:40:02.903

覆盖@instantiateItem 方法并返回要在视图中更新的片段

[使用这个链接](http://android-developers.blogspot.in/2011_08_01_archive.html)

我认为会有所帮助

# tsql - 查找不在任何阻止范围内的所有记录，其中阻止范围位于表中

> ID：15636487
> 
> 赞同：0
> 
> 时间：2013-03-26T11:55:32.627
> 
> 标签：tsql

我有一个带有以下字段和数据的表**TaggedData**

```
ID  GroupID  Tag    MyData
**  *******  ***    ******
1    Texas   AA01   Peanut Butter
2    Texas   AA15   Cereal
3    Ohio    AA05   Potato Chips
4    Texas   AA08   Bread 
```

我有第二个**BlockedTags**表，如下所示：

```
ID  StartTag  EndTag
**  ********  ******
1     AA00     AA04 
2     AA15     AA15 
```

如何从中选择以返回与给定 GroupId 匹配但不在任何阻止范围（包括）内的所有数据？对于如果 GroupId 是德克萨斯州给出的数据，我不想返回 Cereal，因为它匹配第二个范围。它应该只返回面包。

我确实尝试过基于左连接的查询，但我什至没有那么接近。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:05:30.213

```
create table TaggedData (
    ID int,
    GroupID varchar(16),
    Tag char(4),
    MyData varchar(50))

create table BlockedTags (
    ID int,
    StartTag char(4),
    EndTag char(4)
)

insert into TaggedData(ID, GroupID, Tag, MyData)
values (1, 'Texas',   'AA01',   'Peanut Butter')
insert into TaggedData(ID, GroupID, Tag, MyData)
values (2, 'Texas' ,  'AA15',   'Cereal')
insert into TaggedData(ID, GroupID, Tag, MyData)
values (3, 'Ohio ',   'AA05',   'Potato Chips')
insert into TaggedData(ID, GroupID, Tag, MyData)
values (4, 'Texas',   'AA08',   'Bread')

insert into BlockedTags(ID, StartTag, EndTag)
values (1,     'AA00',     'AA04')
insert into BlockedTags(ID, StartTag, EndTag)
values (2,     'AA15',     'AA15')

select t.* from TaggedData t
left join BlockedTags b on t.Tag between b.StartTag and b.EndTag
where b.ID is null 
```

回报：

```
ID          GroupID          Tag  MyData
----------- ---------------- ---- --------------------------------------------------
3           Ohio             AA05 Potato Chips
4           Texas            AA08 Bread

(2 row(s) affected) 
```

因此，要匹配给定的 GroupID，您可以像这样更改查询：

```
select t.* from TaggedData t
left join BlockedTags b on t.Tag between b.StartTag and b.EndTag
where b.ID is null and t.GroupID=@GivenGroupID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:54:01.923

我更喜欢 NOT EXISTS 只是因为它通常在大数据中为您提供更多的可读性、可用性和更好的性能（有几种情况会得到更好的执行计划）：

会是这样的：

```
SELECT * from TaggedData
WHERE GroupID=@GivenGroupID
AND NOT EXISTS(SELECT 1 FROM BlockedTags WHERE Tag BETWEEN StartTag ANDEndTag) 
```

# c# - WPF应用程序中的自定义图形？

> ID：15636502
> 
> 赞同：0
> 
> 时间：2013-03-26T11:56:47.963
> 
> 标签：c#, wpf, windows

我有一个 WPF 应用程序，其中有一个带有图形的图片框，我需要一种能够以简单直接的方式更改此图形的方法（例如替换程序安装目录中的图像文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:20:51.607

我不确定这是否是您想要的，但是...

你可以这样做：

```
Source="pack://siteoforigin:,,,/Images/someimage.png" 
```

并使用您的 bin/app 文件夹中的图像。请查看此链接以获取更多信息...

[什么是应用程序的原始站点以及何时使用它](https://stackoverflow.com/questions/6043138/what-is-applications-site-of-origin-and-when-to-use-it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:07:58.500

定义一个从外部图像文件加载图像的函数

```
public static ImageSource LoadImage(string fileName)
{
    BitmapImage bitmap = new BitmapImage();
    bitmap.BeginInit();
    bitmap.UriSource = new Uri("file:///" + fileName.Replace("\\", "/"));
    bitmap.EndInit();
    return bitmap;
} 
```

然后，您可以将图像控件源分配给此函数的返回值。

```
someImageControl.Source = LoadImage(@"d:\\images\\image.png"); 
```

# git - 可以让 teamcity 在 git 分支中构建最新的标签吗？

> ID：15636508
> 
> 赞同：1
> 
> 时间：2013-03-26T11:56:58.390
> 
> 标签：git, continuous-integration, teamcity

我知道这个问题是一年前[在这里](https://stackoverflow.com/questions/6827063/get-teamcity-to-build-latest-tag)`git describe`提出的，并且有一个手动答案，但我想知道是否可以使用获取最新标签之类的东西，然后使用而不是之前给出的更手动的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:42:17.353

[正如我在“如何获取最新的标签名称？](https://stackoverflow.com/a/4277828/6309) ”中提到的，使用[`git describe`](http://git-scm.com/docs/git-describe)就足以获取最后一个标签：

```
git describe --abbrev=0         # shows only annotated tags.
git describe --abbrev=0 --tags  # includes lightweight (non-annotated) tags. 
```

如果 TeamCity 可以调用第一个作业，该作业设置了用于第二个作业的[源代码控制参数](http://confluence.jetbrains.com/display/TCD7/Git+%28JetBrains%29)的属性，则可以使用带有最新标记的该属性作为要构建的值。

# breeze - Breeze - 只运行一次元数据

> ID：15636512
> 
> 赞同：1
> 
> 时间：2013-03-26T11:57:03.210
> 
> 标签：breeze

我对服务器有三个查询。在每次查询微风运行“元数据”之前。有没有办法只运行一次这个功能？我认为没有必要，因为模型没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:44:26.290

如果没有更多信息，我认为可以轻而易举地在每个查询中询问元数据的唯一原因是因为您没有重用管理器并且您正在为每个查询创建一个新管理器。

如果这是原因，您可以查看文档的这一部分，其中解释了如何共享单个实体管理器：

[http://www.breezejs.com/documentation/share-entitymanager](http://www.breezejs.com/documentation/share-entitymanager)

# java - 如何以编程方式在java中将doc，docx文件转换为pdf

> ID：15636516
> 
> 赞同：3
> 
> 时间：2013-03-26T11:57:17.847
> 
> 标签：java, apache-poi, itext, docx4j

我可以使用 docx4j 从 docx 文件生成 pdf。但我需要将 doc 文件转换为 pdf，包括图像和表格。 **有没有办法在 java 中将 doc 转换为 docx**。或（doc到pdf）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T22:06:06.240

docx4j 包含 org.docx4j.convert.in.Doc，它使用 POI 来读取 .doc，但它是概念证明，而不是生产就绪代码。最后我检查了一下，POI 对二进制 .doc 的 HWPF 解析存在限制。

根据 mqchen 的评论，您可以使用 LibreOffice 或 OpenOffice 将 doc 转换为 docx。但如果你打算使用 LibreOffice 或 OpenOffice，你不妨使用它将 .doc 和 .docx 都直接转换为 PDF。谷歌'jodconverter'。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:41:49.603

抄袭[POI 单元测试](http://svn.apache.org/viewvc/poi/trunk/src/scratchpad/testcases/org/apache/poi/hwpf/)，我想出了这个从 word 文档中提取文本：

```
public String getText(String document) {
    try {
        ZipInputStream is = new ZipInputStream(new FileInputStream(document));
        try {
            is.getNextEntry();
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            try {
                IOUtils.copy(is, baos);
            } finally {
                baos.close();
            }

            byte[] byteArray = baos.toByteArray();
            ByteArrayInputStream bais = new ByteArrayInputStream(byteArray);
            HWPFDocument doc = new HWPFDocument(bais);
            extractor = new WordExtractor(doc);
            extractor.getText();
        } finally {
            is.close();
        }
    } catch (IOException e) {
        throw new RuntimeException(e);
    }
} 
```

我确实希望这会为您指明正确的方向，如果不是完全分类的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:09:50.783

您可以为此使用 jWordConvert。

> jWordConvert 是一个 Java 库，可以原生读取和渲染 Word 文档以转换为 PDF、转换为图像或自动打印文档。

详细信息可以在以下链接中找到 [http://www.qoppa.com/wordconvert/](http://www.qoppa.com/wordconvert/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-18T15:26:24.203

[https://github.com/guptachunky/Conversion-Work](https://github.com/guptachunky/Conversion-Work) 这个 Github 链接可能对此有所帮助。

[https://github.com/guptachunky/Conversion-Work/blob/main/src/main/java/com/conversion/Conversion/Service/ConversionService.java](https://github.com/guptachunky/Conversion-Work/blob/main/src/main/java/com/conversion/Conversion/Service/ConversionService.java)

```
public void docToPdf(FileDetail fileDetail, HttpServletResponse response) {
    InputStream doc;
    try {
        File docFile = converterToFile(fileDetail.getFile());
        doc = new FileInputStream(docFile);
        XWPFDocument document = new XWPFDocument(doc);
        PdfOptions options = PdfOptions.create();
        File file = File.createTempFile("output", ".pdf");
        OutputStream out = new FileOutputStream(file);
        PdfConverter.getInstance().convert(document, out, options);
        getClaimFiles(file, response);
    } catch (IOException e) {
        response.setStatus(AppConstant.SOMETHING_WENT_WRONG);
    }
}

public void getClaimFiles(File file, HttpServletResponse response) {
    try {
        response.setContentType("application/pdf");
        response.setHeader("Content-Disposition",
                "attachment; filename=dummy.pdf");
        response.getOutputStream().write(Files.readAllBytes(file.toPath()));
    } catch (Exception e) {
        response.setStatus(AppConstant.SOMETHING_WENT_WRONG);
    }
} 
```

# android - 在android中输入特定场地

> ID：15636519
> 
> 赞同：2
> 
> 时间：2013-03-26T11:57:22.233
> 
> 标签：android, google-maps, location

我想在 android 应用程序中提交表单时进入特定场地。此场地详细信息将在未来用于路由目的。

例如，该应用程序将获取某个活动的场地详细信息并向人们发送邀请，因此用户可以从他们当前的位置导航到该活动场地。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:05:45.647

看来您可以遵循以下流程：

1.  用户输入事件所在的地址/地点。

2.  使用用户输入并构建对 Google 地理编码服务的请求：http: [//developer.android.com/reference/android/location/Geocoder.html#getFromLocationName(java.lang.String, int)](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocationName%28java.lang.String,%20int%29) 或 [https://developers。 google.com/maps/documentation/geocoding/#Geocoding](https://developers.google.com/maps/documentation/geocoding/#Geocoding)

3.  如果有更多地址响应，让用户选择正确的地址。（可选的）

4.  使用带有 lat / lng 的响应进行 Google 地理编码并将其保存在数据库中。

认为这会给你最准确的结果。此外，还有可用的地址查找 API。但取决于您需要什么以及这可能适合您的国家/地区。

# javascript - 在 d3 条形图中设置自定义 x 轴标签？

> ID：15636526
> 
> 赞同：8
> 
> 时间：2013-03-26T11:57:33.923
> 
> 标签：javascript, d3.js

我在此页面上使用 d3 交叉过滤器库：

[http://jovansfreelance.com/bikestats/d3/crossfilter.php](http://jovansfreelance.com/bikestats/d3/crossfilter.php)

如果您查看第二张图，您会看到 x 轴的标签为 0.0、0.5、1.0、...、6.0。我需要这些标签是一周中的几天，所以 0.0 是星期一，0.5 根本不应该在那里，我不知道它为什么会出现，因为数据中只有整数，1.0 应该是星期二等。

谁能告诉我如何做到这一点？请注意，所有 4 个图都调用相同的函数，我只需要为这个特定的图修改标签（对它们进行硬编码就可以了）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T19:59:03.400

你应该检查序数尺度。同时，您可以很容易地制作自己的 tickFormat：

```
var weekdays = ["Mon","Tues","Wed","Thurs","Fri","Sat","Sun"];
var formatDay = function(d) {
    return weekdays[d % 7] + "day";      
} 
```

然后将其传递给秤，例如：

```
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom")
    .tickFormat(formatDay); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-08T22:48:47.300

在 D3 v4 中，我通过以下方式解决了它：

```
var data = ["Mon","Tues","Wed","Thurs","Fri","Sat","Sun"]
var xScaleLabels = d3
  .scalePoint()
  .domain(data)
  .rangeRound([50, width - 50]); // In pixels

var axisTop2 = d3
  .axisBottom()
  .scale(xScaleLabels)
  .ticks(data.length);

svg
  .append("g")
  .call(axisTop2)
  .attr("transform", "translate(" + margin.left + "," + height + ")"); 
```

# python - django模型对象过滤器

> ID：15636527
> 
> 赞同：7
> 
> 时间：2013-03-26T11:57:37.803
> 
> 标签：python, database, django, django-forms

我有名为“has_location”和“位置”的表。'has_location' 有`user_has`和`location_id`它自己的`id`，由 django 本身给出。

“位置”有更多列。

现在我想获取某个特定用户的所有位置。我所做的是..（user.id 是已知的）：

```
users_locations_id = has_location.objects.filter(user_has__exact=user.id)
locations = Location.objects.filter(id__in=users_locations_id)
print len(locations) 
```

但我得到`0`了这个`print`。我在数据库中有数据。`__in`但是我有一种不接受模型ID的感觉，是吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T12:14:44.003

在 Django 中使用`__in`这种查询是一种常见的反模式：由于它的简单性，它很诱人，但它在大多数数据库中的扩展性都很差。[请参阅Christophe Pettus 的演示文稿](http://www.slideshare.net/OReillyOSCON/unbreaking-your-django-application)中的幻灯片 66ff 。

用户和位置之间存在多对多关系，由`has_location`表表示。您通常会使用[`ManyToManyField`](https://docs.djangoproject.com/en/1.5/ref/models/fields/#django.db.models.ManyToManyField)带有`through`表的 a 向 Django 描述这一点，如下所示：

```
class Location(models.Model):
    # ...

class User(models.Model):
    locations = models.ManyToManyField(Location, through = 'LocationUser')
    # ...

class LocationUser(models.Model):
    location = models.ForeignKey(Location)
    user = models.ForeignKey(User)
    class Meta:
         db_table = 'has_location' 
```

然后您可以像这样获取用户的位置：

```
user.locations.all() 
```

您可以在过滤器操作中查询位置：

```
User.objects.filter(locations__name = 'Barcelona') 
```

[`prefetch_related()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)并且您可以使用查询集上的方法请求有效地获取用户的相关位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-26T12:04:00.037

您正在使用 has_location 自己的 id 来过滤位置。您必须使用`location_id`s 来过滤位置：

```
user_haslocations = has_location.objects.filter(user_has=user)
locations = Location.objects.filter(id__in=user_haslocations.values('location_id')) 
```

您还可以通过反向关系直接过滤位置：

```
location = Location.objects.filter(has_location__user_has=user.id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:05:04.977

你的模型是什么样的？

出于您的疑问，`__in` [确实接受](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#in)过滤后的 ID。

对于您当前的代码，解决方案：

```
locations = Location.objects.filter(id__in=has_location.objects.filter(user=user).values('location_id'))
# if you just want the length of the locations, evaluate locations.count()
locations.count()
# if you want to iterate locations to access items afterwards
len(locations) 
```

# .net - 使用 Web 服务传递具有复杂属性的对象

> ID：15636538
> 
> 赞同：5
> 
> 时间：2013-03-26T11:58:17.047
> 
> 标签：.net, web-services, serialization

我有 2 节课：

```
 public class testClass1
    {
        public string Name { get; set; }
        public testClass2 testClass2Object { get; set; }
    }

    public class testClass2
    {
        public testClass2() { }

        public testClass2(int i) { TestProperty = i; }

        public int TestProperty { get; set; }
    } 
```

我想返回头等舱的对象`webMethod`：

```
 [WebMethod]
    public testClass1 testMethod()
    {
        testClass1 test = new testClass1();
        test.Name = "stackoverflow";
        test.testClass2Object = new testClass2(2);
        return test;
    } 
```

但我没有`testClass2`从`testClass1`对象中获取属性值。

我尝试`[Serializable] [XmlInclude(typeof(testClass2))]`了注释，但没有任何改变。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T05:52:18.777

如果我“按原样”运行代码并调用 testMethod()，我得到...

```
<testClass1 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
     <Name>stackoverflow</Name>
     <testClass2Object>
          <TestProperty>2</TestProperty>
     </testClass2Object>
</testClass1> 
```

你期待不同的东西吗？也许我错过了一些东西。

如果这是一个更大项目的一部分，也许可以尝试将此代码放入一个新项目中，看看它是否可能是设置或其他配置类型的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T07:19:35.463

> 我运行你的代码，输出是我所期望的。您应该使用 xml 解析从 testclass2 获取数据。

**编辑**

我建议使用 Web API 而不是 obsolete `ASMX`，后者使用 SOAP 在输出中生成大量非结构化、无模式的 XML。

Web-API 具有快速且轻量级的输出，您可以将 JSON 和 XML 格式作为输出。非常健壮！

# jsp - 为另一个 EL 表达式组合静态文本和 EL 表达式

> ID：15636539
> 
> 赞同：0
> 
> 时间：2013-03-26T11:58:20.663
> 
> 标签：jsp, el

所以我检查了其他相同的问题，但它们并不完全相同，或者我的情况的答案不同。这就是我所拥有的：在服务器上我设置了一个属性，

> request.getSession().setAttribute(tableField.getSiglaId()+"_rowSize",new Integer(tableSize));

在 jsp 文件中我试图获取这个属性值，但是由于你不能嵌套 el 表达式，我使用核心标签库来设置一个新变量：

```
<c:set var="trueRowSize" value="${field.siglaId}_rowSize" /> 
```

输入 ${trueRowSize} 将给出输出“timers_rowSize”。但我想获得具有上述名称的属性。如果我输入 ${timers_rowSize}，它将给出我想要的正确值。

使用：

```
 ${requestScope[trueRowSize]} 
```

似乎也没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:20:23.387

你把你的属性放在会话中：

```
request.getSession().setAttribute(...); 
```

所以你不会在 requestScope 中找到它，而是在 sessionScope 中：

```
${sessionScope[trueRowSize]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T12:50:39.127

实际上你可以嵌套表达式。嗯，有点。c:set 标签可以从自身的主体中获取它的值，所以你可以有如下的东西：

```
<c:set var="trueRowSizeText">
  My true row size is: <c:out value='request.getSession().setAttribute(tableField.getSiglaId()+"_rowSize",new Integer(tableSize));'/>
</c:set> 
```

也看看这个类似的问题 - [JSP/JSTL 中的嵌套表达式](https://stackoverflow.com/questions/3351116/nested-expression-in-jsp-jstl)

# iphone - 在 iPhone 的 UIScrollview 上添加 PDF 或 PPT 文件

> ID：15636540
> 
> 赞同：0
> 
> 时间：2013-03-26T11:58:20.747
> 
> 标签：iphone, uiscrollview, uiimageview

我正在从资源文件夹中显示 PDF `UIScrollview`。但它无法添加。

我补充`UIScrollView`说`ViewController`。然后采取`UIImageView`并添加`UIScrollView`如下代码。

```
scrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0, 0.0,768,1024)];
scrollView.contentSize = CGSizeMake(768,2000);
scrollView.delegate = self;
scrollView.pagingEnabled = NO;
[self.view addSubview:scrollView];

UIImageView  *img=[[UIImageView alloc] initWithFrame:CGRectMake(00, 20, 500,900)];
NSString *url = [[NSBundle mainBundle]pathForResource:@"Acknowledgements" ofType:@"pdf"];
img.image=[UIImage imageWithContentsOfFile:url];        
[scrollView addSubview:img]; 
```

但是滚动视图上没有添加pdf。如果我添加一些图像文件，例如

```
 NSString *url = [[NSBundle mainBundle]pathForResource:@"trophy" ofType:@"png"]; 
```

它被添加。PDF 文件正确并在 Mac 中打开。PPT文件也会发生同样的情况。

出了什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:03:27.753

ppt/pdf 不能添加到 UIImageView 中，而不是添加到 UIWebView 中

```
NSString *url = [[NSBundle mainBundle]pathForResource:@"Acknowledgements" ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:url];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
[webView loadRequest:request]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:42:46.090

@interface UIWebView : UIView < NSCoding, UIScrollViewDelegate > {

UIWebView 实现 UIScrollViewDelegate。因此，您仍然可以处理与滚动相关的事件。[检查此链接以获取 UIScrollView http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)的委托方法

# extjs4 - 如何在树形面板上获取单击事件的子节点？

> ID：15636542
> 
> 赞同：1
> 
> 时间：2013-03-26T11:58:24.603
> 
> 标签：extjs4, treepanel

控制器中的代码

```
nextPages:function()
{  
var obj=Ext.getCmp('centerId');

obj.removeAll();//remove center panel to display new panel information
var myTree=Ext.getCmp('leftId');//get tree panel view
var node=myTree.getRootNode().findChild("navTree","localId",true);//for get child node
if(node){

var obj2=Ext.create('AS.view.center.Localadmin');
obj2.region='center';
obj.add(obj2);
} 
```

视图中的代码：

```
Ext.define('AS.view.left.Left',{
    extend:'Ext.tree.Panel',
    alias:'widget.Left',
    id:'leftId',
    useArrows   : true,
    hideHeaders : true,
    //title: 'About village',

    height: 150,
    root: {
        itemId:'navTree',
        rootVisible : false, 
        text:'About village',
        children:[{
        text:'Whats nearby?', 
        expanded: true,
        children: [{
           // id:'first',

            id:'localId',
            text: 'Local Administration',

            leaf: true
        }, {
            id:'bId',
             text: 'Bussiness directory',

            leaf: true
        },{
            id:'hid',
         text: 'Heritage and tourism',

         leaf: true
        },{
            id:'eid',
         text: 'Education',

         leaf: true
        }],
        },

        {
            text:'classifieds',
             leaf: true
        },{
            text:'Events',
             leaf: true

        }],//children1
    },//root

}); 
```

我想获取单击事件的特定子节点，然后在该节点的单击上显示另一个面板。告诉我如何从树形面板中获取子节点。在控制器中，我编写了一个函数来获取子节点，然后在单击特定节点时获取视图。

# ms-word - 使用 Google Script 将 Google Doc 转换为 Docx

> ID：15636543
> 
> 赞同：9
> 
> 时间：2013-03-26T11:58:26.137
> 
> 标签：ms-word, google-apps-script, google-api, google-drive-api

是否可以使用 Google Script 以编程方式将 Google 文档转换为 Word docx 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-21T19:31:39.183

这应该工作

```
function myFunction() {

  var token = ScriptApp.getOAuthToken();

  //Make sure to replace the correct file Id
  // Fetch the docx blob
  var blb = UrlFetchApp.fetch('https://docs.google.com/feeds/download/documents/export/Export?id=<ID_of_Google_Document>&exportFormat=docx', 
                              {
                                headers : {
                                  Authorization : 'Bearer '+token
                                }
                              }).getBlob();

  //Create file in Google Drive
  var file = DriveApp.createFile(blb).setName('<name_of_exported_file>.docx');

  //Put the file in a drive folder
  DriveApp.getFolderById('<FOLDER_ID>').addFile(file);

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-19T18:16:29.193

Quoting from [this item](https://code.google.com/p/google-apps-script-issues/issues/detail?id=585) on the issue tracker...

> You can convert a Google Document to docx today using the Drive Advanced Service:
> 
> [https://developers.google.com/apps-script/advanced/drive](https://developers.google.com/apps-script/advanced/drive)
> 
> Here is a small example:

```
function convertToDocx(documentId) {
  var file = Drive.Files.get(documentId);
  var url = file.exportLinks['application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
  var oauthToken = ScriptApp.getOAuthToken();
  var response = UrlFetchApp.fetch(url, {
    headers: {
      'Authorization': 'Bearer ' + oauthToken
    }
  });
  return response.getBlob();
} 
```

# html - Flash 元素在 Firefox 中不透明

> ID：15636547
> 
> 赞同：0
> 
> 时间：2013-03-26T11:58:37.873
> 
> 标签：html, flash

我在我的 HTML 页面中放置了一个 flash mp3 播放器元素。该元素具有透明背景。

```
<div id="player">
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100" height="30" id="mp3player" align="middle">
    <param name="movie" value="mp3player.swf" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#000000" />
    <param name="play" value="true" />
    <param name="loop" value="true" />
    <param name="wmode" value="transparent" />
    <param name="scale" value="showall" />
    <param name="menu" value="true" />
    <param name="devicefont" value="false" />
    <param name="salign" value="" />
    <param name="allowScriptAccess" value="sameDomain" />
<!--[if !IE]>-->
<object type="application/x-shockwave-flash" data="mp3player.swf" width="100" height="30">
    <param name="movie" value="mp3player.swf" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#000000" />
    <param name="play" value="true" />
    <param name="loop" value="true" />
    <param name="wmode" value="transparent" />
    <param name="scale" value="showall" />
    <param name="menu" value="true" />
    <param name="devicefont" value="false" />
    <param name="salign" value="" />
    <param name="allowScriptAccess" value="sameDomain" />
<!--<![endif]-->
    <a href="http://www.adobe.com/go/getflash">
        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
    </a>
    <!--[if !IE]>-->
</object>
<!--<![endif]-->
</object>
</div> 
```

Windows 7 中的 Firefox 显示透明背景，而 Windows XP 则不会。

如何解决这个问题？谢谢

编辑

我注意到我的 flash 元素在开始时有一个透明的背景，但是在鼠标悬停后背景变成黑色并保持黑色。是否可以使用 jquery 在鼠标悬停和/或鼠标悬停时强制 Flash wmode 参数透明？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:43:41.373

当你有：

```
<param name="wmode" value="transparent" /> 
```

您仍然需要它作为对象标签上的属性：

```
<object wmode="transparent" .... 
```

# python - 如何修复int溢出？

> ID：15636550
> 
> 赞同：0
> 
> 时间：2013-03-26T11:58:45.587
> 
> 标签：python, integer-overflow

我有一个使用该数字的 python 代码`2637268776`（大于`sys.maxint`32 位系统）。因此它被保存为一个`long`类型。

我在我的代码中使用了 C++ 框架绑定，所以我有一个案例，它被转换为`int32`，导致 int32 溢出：

```
2637268776 --> -1657698520 
```

在我的例子中，它只能发生一次，所以可以安全地假设如果整数为负，我们有一个单一的 int 溢出。如何在数学上反转数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:02:46.440

简而言之，你不能。有许多长整数会映射到同一个负数。在您的示例中，这些是 2637268776L、6932236072L、11227203368L、15522170664L、19817137960L 等。

此外，由于这种溢出，可能会得到一个*正数。*例如，4294967297L 将映射到 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:02:09.980

你可以添加`2 * (sys.maxint + 1)`到它：

```
>>> -1657698520 + (2 * (sys.maxint + 1))
2637268776L 
```

但这仅适用于原始值 < `2 * (sys.maxint + 1)`，因为超出此范围，溢出将变为正数，或者更糟糕的是，再次溢出。

# php - Datepicker 上的 JSON 和亮点

> ID：15636555
> 
> 赞同：0
> 
> 时间：2013-03-26T11:58:58.103
> 
> 标签：php, javascript, jquery, json, datepicker

只是一个关于 datepicker 和 json 的快速问题。我有这个代码：

```
var dates = {'2013/4/4':'some description' , '2012/6/6':'some other description'}; 

                    function date_propogate() {
                    console.log('in function');
                        $.getJSON('URL OF JSON', function(data) {
                        date_items = data.items;
                        console.log(date_items);
                            $.each(date_items, function(index, date_item) {
                                dates.push(date_item.sdate);
                            });
                        });
                    }

                    $(document).ready(function() {

                    date_propogate();

                    $('#datepicker').datepicker({                
                        beforeShowDay: function(date) {

                        var search = date.getFullYear() + "/" + (date.getMonth() + 1) + "/" + (date.getDate());

                        if (dates[search]) {
                                return [true, 'highlight', dates[search] || ''];
                                }

                                return [false, '', ''];
                            }

                        });
                    }); 
```

JSON 页面返回以下内容：

```
{"items":[{"sdate":"2013-02-25","edate":"2013-02-27","cost":"200","id":"1"}]} 
```

我有两个显示正常的静态日期，但返回的日期：date_items.sdate 未加载，我收到一条错误消息，提示“无方法：推送”。

我这样做是正确的还是有更好的方法？正如我假设我不能只在页面上使用 php，因为 js 是在 php 之前加载的，对吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:03:20.207

您已`dates`使用 声明为对象`{}`，而不是使用`[]`. 你不能调用`.push()`一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:02:33.077

日期是一个对象，而一个对象没有一个叫做 push 的函数。数组确实有这些功能。

无论如何，只需这样做：

`var dates = ['2013/4/4':'some description' , '2012/6/6':'some other description'];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:06:23.107

Dates 不是一个数组，所以你不能推送到它。您需要将日期定义为数组

```
var dates = [{'2013/4/4':'some description'} , {'2012/6/6':'some other description'} ] 
```

上面创建了一个对象数组。

# java - 如何新建一个列表 [] 在 Java 中

> ID：15636558
> 
> 赞同：-6
> 
> 时间：2013-03-26T11:59:14.667
> 
> 标签：java

```
public class XXXX{
    private List<Integer>[] a;
    public XXXX(int num)
    {
        a = new ....?
    } 
} 
```

我应该如何新建*一个*？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:04:59.870

NPE：“数组和泛型不能很好地结合在一起”

去列表列表

```
List<List<Integer>> a = new ArrayList<List<Integer>>(); 
```

或双数组

```
int[][] a = new int[5][5]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T12:30:09.957

您可以创建列表数组，但在初始化期间不能使用类型。

```
List<Integer>[] lists=new List[10];

//insertion
for(int i=0;i<10;i++){
    lists[i]=new ArrayList<Integer>();
    lists[i].add(i);
    lists[i].add(i+1);
}

//printing
for(List<Integer> list:lists){
    System.out.println(list.size());
} 
```

为什么这行得通？因为`lists`变量指向一个数组数据结构，其数据类型为`List<Integer>`. 这个数组包含一组对不同类型对象的引用`List<Integer>`，这就是为什么如果我们尝试运行`lists[i]=new ArrayList<String>();`它不会编译的原因。但是，当我们初始化数组本身时，我们不需要将 List 对象的类型提供为 List，因为从 JVM 的角度来看，Integer 对象列表和 Object 对象列表将需要与 logn 相同的字节数作为它们的尺寸是一样的。当我们将数组成员设置为一个值（List 类型 - 它必须`List<Integer>`不是其他任何东西）时，唯一的约束就出现了

您可以将类型强制`List[]`转换为 a`List<Integer>[]`但最终结果和 JVM 行为是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:12:29.567

这有效

```
int arraySize = 10;
List<Integer>[] a = (List<Integer>[]) new List[arraySize]; 
```

它创建一个可以包含整数列表的数组（大小为 10）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T12:03:44.427

```
a = (List<Integer>[]) new List[num];
for(int i = 0; i < num; i++)
    a[i] = new ArrayList<Integer>(); 
```

真的，为什么不声明`a`为`List<List<Integer>>`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T12:42:09.177

你可以做 as`List<Integer> a=new ArrayList<Integer>();` 但 a 不应该是通用的

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-03-26T12:04:06.297

List是java中的一个接口！

您可以将 ArrayList、linket 列表、向量和堆栈等实例的引用提供给具有 List 数据类型的变量

所以你可以使用以下之一，

```
a = new ArrayList<Integer>();
a = new LinkedList<Integer>();
a = new Vector()<Integer>;
a = new Stack()<Integer>; 
```

# javascript - 如何将带有自定义标头的 wget 命令转换为 vbscript 或 javascript？

> ID：15636559
> 
> 赞同：0
> 
> 时间：2013-03-26T11:59:21.640
> 
> 标签：javascript, html, dom, vbscript, hta

对于我的 html 应用程序，我需要直接下载 JDK。这个 wget 命令似乎适用于它

```
wget --no-cookies --header "Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com" "http://download.oracle.com/otn-pub/java/jdk/7/jdk-7-linux-x64.tar.gz" 
```

我如何翻译这个发送自定义标头的 wget，理想情况下是一个 vbscript 行（我更喜欢 vbscript，但如果必须的话，我会满足于 javascript）。PS 我认为 --no-cookies 是可选的，但不确定。我不能使用直接下载链接的原因是oracle要求用户在下面的下载页面上单击接受协议。

此链接用于最新的下载 HTML 页面

[http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)

这是最新的直接 .exe 链接（单击接受协议后）
[http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-x64.exe](http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-x64.exe)

或任何其他绕过接受协议问题的方法？

这是我的 vbscript 代码，它* 在第 4 行*给出一个“未指定的错误”*，带有`setRequestHeader`. gpw_e24 中的值我也尝试了上面给出的值，但没有用。

```
Set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")
URL="http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-x64.exe"
saveto="c:\java.exe"     
objXMLHTTP.setRequestHeader "Cookie", "gpw_e24=http%3A%2F%2Fwww.oracle.com"
objXMLHTTP.open "POST", URL, false
objXMLHTTP.send()

If objXMLHTTP.Status = 200 Then
Set objADOStream = CreateObject("ADODB.Stream")
objADOStream.Open
objADOStream.Type = 1 'adTypeBinary

objADOStream.Write objXMLHTTP.ResponseBody
objADOStream.Position = 0 'Set the stream position to the start

Set objFSO = Createobject("Scripting.FileSystemObject")
If objFSO.Fileexists(saveTo) Then objFSO.DeleteFile saveTo
Set objFSO = Nothing

objADOStream.SaveToFile saveTo
objADOStream.Close
Set objADOStream = Nothing
End if

Set objXMLHTTP = Nothing

' Done
WScript.Quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:17:31.970

要下载文件，您应该添加名称为**Cookie**且值为**gpw_e24=http%3A%2F%2Fwww.oracle.com的****请求标头**

 ****使用[vbscript 中的代码下载文件（绕过无效证书错误）](https://stackoverflow.com/questions/5096787/vbscript-to-download-a-file-bypassing-invalid-certificate-errors)，您应该尝试添加

```
xHttp.setRequestHeader "Cookie", "gpw_e24=http%3A%2F%2Fwww.oracle.com" 
```

或者，您可以将**wget.exe**与您的脚本一起使用并调用它

[从http://gnuwin32.sourceforge.net/packages/wget.htm](http://gnuwin32.sourceforge.net/packages/wget.htm)下载二进制包（您只需要**wget.exe**，可能有一些必需的 dll-s）

upd：可能来自这个二进制文件[http://community.openscg.com/se/oscg_nixutils.jsp的](http://community.openscg.com/se/oscg_nixutils.jsp)**wget.exe**会是一个更好的选择（因为没有依赖关系）

upd：我试过这个，但 oracle.com 返回 403。**你的 WGET 命令也不起作用**。

```
Set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")
URL="http://download.oracle.com/otn-pub/java/jdk/7u17-b02/jdk-7u17-windows-x64.exe"
saveto="c:\\Users\\Sanya_Zol\\INET_ALL\\2013\\_tmp\\20130326\\java-dl.exe"     
objXMLHTTP.open "POST", URL, false
objXMLHTTP.setRequestHeader "Cookie", "gpw_e24=http%3A%2F%2Fwww.oracle.com%2Ftechnetwork%2Fjava%2Fjavase%2Fdownloads%2Fjdk7-downloads-1880260.html"
objXMLHTTP.send()

If objXMLHTTP.Status = 200 Then
    Set objADOStream = CreateObject("ADODB.Stream")
    objADOStream.Open
    objADOStream.Type = 1 'adTypeBinary

    objADOStream.Write objXMLHTTP.ResponseBody
    objADOStream.Position = 0 'Set the stream position to the start

    Set objFSO = Createobject("Scripting.FileSystemObject")
    If objFSO.Fileexists(saveTo) Then objFSO.DeleteFile saveTo
    Set objFSO = Nothing

    objADOStream.SaveToFile saveTo
    objADOStream.Close
    Set objADOStream = Nothing
    Set objXMLHTTP = Nothing
Else
    MsgBox objXMLHTTP.Status
End if 
```****

# sql - 对大表进行自定义排序和分页

> ID：15636561
> 
> 赞同：2
> 
> 时间：2013-03-26T11:59:34.547
> 
> 标签：sql, performance, sql-server-2008, row-number

自 2005 版以来，我习惯于从 MS SQL Server 脚本中的 ROW_NUMBER 函数中获益。但我注意到使用此函数查询大表存在很大的性能劣势。

想象一下有四列的表（来自外部数据库的真实表有更多列，但我只使用那些以避免示例的复杂性）：

```
DECLARE TABLE StockItems (
  Id int PRIMARY KEY IDENTITY(1,1),
  StockNumber nvarchar(max),
  Name nvarchar(max),
  [Description] nvarchar(max)) 
```

我已经编写了使用以下参数查询该表的过程，该表由 200 000+ 行填充：

*   @SortExpression - 我要排序的列的名称
*   @SortDirection - 位信息（0=升序，1=降序）
*   @startRowIndex - 我要检索行的从零开始的索引
*   @maximumRows - 要检索的行数

询问：

```
SELECT sortedItems.Id
    ,si.StockNumber
    ,si.Name
    ,si.Description
FROM (SELECT s.Id
         ,CASE WHEN @SortDirection=1 THEN
            CASE
               WHEN CHARINDEX('Name',@SortExpression)=1 THEN
                 ROW_NUMBER() OVER (ORDER by s.Name DESC)
               WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN
                 ROW_NUMBER() OVER (ORDER by s.StockNumber DESC)
            ELSE ROW_NUMBER() OVER (ORDER by s.StockNumber DESC)
            END
          ELSE    
            CASE
               WHEN CHARINDEX('Name',@SortExpression)=1 THEN
                  ROW_NUMBER() OVER (ORDER by s.Name ASC)
               WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN
                  ROW_NUMBER() OVER (ORDER by s.StockNumber ASC)
            ELSE  ROW_NUMBER() OVER (ORDER by s.StockNumber ASC)
            END
          END AS RowNo
       FROM stockItems s
     ) as sortedItems
INNER JOIN StockItems si ON sortedItems.Id=si.Id
ORDER BY sortedItems.RowNo 
```

在行数快速增长的情况下，ROW_NUMBER 变得无效，因为必须对所有行进行排序。

请您能帮我避免这种性能劣势并加快查询速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:18:57.330

检查执行路径。`ROW_NUMBER()`只要您有正确的索引，就不会产生太大影响。您的查询的问题不在`ROW_NUMBER()`. 改用动态，它将消除由`ROW_NUMBER()`. 我在 >4mil 的记录表上对此进行了测试，它在瞬间返回：

```
DECLARE @SortExpression VARCHAR(32)  SET @SortExpression = 'StockNumber'
DECLARE @SortDirection BIT           SET @SortDirection  = 1
DECLARE @startRowIndex BIGINT        SET @startRowIndex  = 1000
DECLARE @maximumRows BIGINT          SET @maximumRows    = 5000

DECLARE @vsSQL AS NVARCHAR(MAX)
SET @vsSQL = ''
SET @vsSQL = @vsSQL + 'SELECT sortedItems.Id, sortedItems.StockNumber, sortedItems.Name, sortedItems.Description FROM ( '
SET @vsSQL = @vsSQL + 'SELECT s.Id, s.StockNumber, s.Name, s.Description, '
SET @vsSQL = @vsSQL + 'ROW_NUMBER() OVER (ORDER BY ' + @SortExpression + ' ' + CASE @SortDirection WHEN 1 THEN 'DESC' ELSE 'ASC' END + ') AS RowNo '
SET @vsSQL = @vsSQL + 'FROM StockItems s '
SET @vsSQL = @vsSQL + ') AS sortedItems '
SET @vsSQL = @vsSQL + 'WHERE RowNo BETWEEN ' + CONVERT(VARCHAR,@startRowIndex) + ' AND ' + CONVERT(VARCHAR,@startRowIndex+@maximumRows) + ' '
SET @vsSQL = @vsSQL + 'ORDER BY sortedItems.RowNo'

PRINT @vsSQL
EXEC sp_executesql @vsSQL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:53:07.547

您可以将 case 表达式移至`order by`子句：

```
order by (case when @SortDirection=1 and CHARINDEX('Name',@SortExpression)=1 then s.name end) desc,
         (case when @SortDirection=1 and CHARINDEX('StockNumber',@SortExpression)=1 then s.StockNumber end) desc,
         (case when @SortDirection=1 and (CHARINDEX('StockNumber',@SortExpression)<>1 and CHARINDEX('Name',@SortExpression)<>1) then va.match end) desc,
         (case when @SortDirection<>1 and CHARINDEX('Name',@SortExpression)=1 then s.name end) asc,
         (case when @SortDirection<>1 and CHARINDEX('StockNumber',@SortExpression)=1 then s.StockNmber end) asc,
         (case when @SortDirection<>1 and (CHARINDEX('StockNumber',@SortExpression)<>1 and CHARINDEX('Name',@SortExpression)<>1) then va.match end) asc 
```

我注意到表达式 has `va.match`，因此它与查询中的任何表都不匹配。所以，我只是在`order by`表达。

而且，是的，随着桌子变大，这将需要更多时间。我不知道`order by`会比 更有效率`row_number()`，但这是可能的。

如果您需要对行进行排序，那么您必须以一种或另一种方式进行排序（也许您可以改用索引）。如果您不关心订单，您可以抓住机会：

```
row_number() over (order by (select NULL)) 
```

在 SQL Server 中，我发现这会分配一个没有单独排序的序列号。但是，这不能保证（我还没有找到任何支持这种使用的文档）。而且，结果不一定从一轮运行到下一轮稳定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T14:39:18.243

我找到了如何在大型结果集上使用 ROW_NUMBER() 函数来避免性能损失的解决方案。我没有在我的问题中写的一个目标是避免将查询声明为 nvarchar 变量并执行它，因为它可能导致 SQL 注入打开大门。

因此，解决方案是尽可能按要求的排序顺序查询数据，然后查询结果集并切换排序并仅获取当前页面的数据。最后，我可以将结果按相反的顺序排序并再次排序。

我定义了新变量@innerCount 来查询大多数内部结果集，并将其作为查询客户端在@sortExpression 和@sortDirection 变量中指定

```
SET @innerCount = @startRowIndex + @maximumRows

Select OppositeQuery.Id
,s.StockNumber
,s.Name
,s.Description
FROM (SELECT TOP (@maximumRows) InnerItems.Id
       FROM
            (SELECT TOP (@innerCount) sti.Id
               FROM stockItems sti
               ORDER BY
                CASE WHEN @SortDirection=1 THEN
                    CASE
                        WHEN CHARINDEX('Name',@SortExpression)=1 THEN sti.Name
                        WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN sti.StockNumber
                        ELSE sti.StockNumber
                    END
                END DESC
                CASE WHEN ISNULL(@SortDirection,0)=0 THEN
                    CASE
                       WHEN CHARINDEX('Name',@SortExpression)=1 THEN sti.Name
                       WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN sti.StockNumber
                       ELSE sti.StockNumber
                    END
                END ASC
             ) as InnerQuery
          INNER JOIN StockItems si on InnerQuery.Id=si.Id
          ORDER BY
            CASE WHEN @SortDirection=1 then
                CASE
                   WHEN CHARINDEX('Name',@SortExpression)=1 THEN si.Name
                   WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN si.StockNumber
                   ELSE si.StockNumber
               END
            END ASC
            CASE WHEN ISNULL(@SortDirection,0)=0 then
                CASE
                   WHEN CHARINDEX('Name',@SortExpression)=1 THEN si.Name
                   WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN si.StockNumber
                   ELSE si.StockNumber
                END
            END ASC
    ) AS OppositeQuery
INNER JOIN StockItems s on OppositeQuery.Id=s.Id
ORDER BY
CASE WHEN @SortDirection=1 THEN
    CASE
        WHEN CHARINDEX('Name',@SortExpression)=1 THEN s.Name
        WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN s.StockNumber
        ELSE s.StockNumber
     END
END DESC
CASE WHEN ISNULL(@SortDirection,0)=0 THEN
    CASE
        WHEN CHARINDEX('Name',@SortExpression)=1 THEN s.Name
        WHEN CHARINDEX('StockNumber',@SortExpression)=1 THEN s.StockNumber
        ELSE s.StockNumber
    END
END ASC 
```

这种方法的缺点是我必须对数据进行 3 次排序，但在多个内部连接到 StockItems 表的情况下，子查询比使用 ROW_NUMBER() 函数快得多。

感谢所有贡献者的帮助。

# php - 将 Google Drive 与我的 CRM 集成，以允许创建文件并进行协作

> ID：15636562
> 
> 赞同：1
> 
> 时间：2013-03-26T11:59:36.797
> 
> 标签：php, crm, google-drive-api

这是交易 - 我们的内部 CRM 用于管理我们每天收到的大量估算请求。该软件使用 php/codeigniter/mySql 构建。它允许我们的销售团队存储大量有关潜在客户的信息，并在适当的时候生成估算甚至合同。让我们专注于合同。当用户点击“创建合同”按钮时，该软件会收集所有信息，如客户姓名、地址、社会安全号码等。使用此信息和几个开/关选项，它会动态生成合同。当然它总是需要一些编辑，这就是我的问题开始的地方。

用户必须在 TinyMCE 框中编辑文档 - 有点像所见即所得的编辑器。这个编辑器不适合复杂的编辑。

我们将 Google 应用程序用于业务，所以我想做的是：当用户点击创建合同按钮时，软件必须收集动态信息并使用我们的合同布局和信息在 Google Drive 上创建一个文件。然后用户可以使用 Google Drive 界面自由编辑文件，这很棒。

有人知道这种方法吗？

最好的问候和糟糕的英语抱歉。

# mfc - 当我尝试查找 MAC 地址时程序崩溃

> ID：15636581
> 
> 赞同：-2
> 
> 时间：2013-03-26T12:00:18.660
> 
> 标签：mfc, udp, client-server, ip-address, mac-address

我在 MFC 中有一个使用 UDP 的客户端服务器应用程序，其中服务器在列表框中显示已连接客户端的 IP 地址。如果我在同一台计算机上运行客户端和服务器，程序会显示 MAC 地址**，但如果我尝试在另一台计算机上运行客户端，程序会崩溃**。这是3个功能。I have an event handler for the listbox that displays the MAC address in a second listbox when an IP address is selected. PrintMACFromIP 是获取 MAC 地址的代码

```
void CmfcServerDlg::OnLbnSelchangeListClientaddr()
{
    BYTE Address[MAX_ADAPTER_ADDRESS_LENGTH];
    int nIndex = m_ClientAddrList.GetCurSel();
    if(nIndex < 0)
        return;

    CString s1;
    m_ClientAddrList.GetText(nIndex, s1);
    PrintMACFromIP(s1);

}

void CmfcServerDlg::PrintMACaddress(unsigned char MACData[])
{
    CString strText;
    strText.Format("%02X-%02X-%02X-%02X-%02X-%02X\n",MACData[0], MACData[1], MACData[2], MACData[3], MACData[4], MACData[5]);
    m_ClientIdList.AddString(strText); 
}

void CmfcServerDlg:: PrintMACFromIP(const CString &selected_ip_adr)
{
    IP_ADAPTER_INFO AdapterInfo[16];            
    DWORD dwBufLen = sizeof(AdapterInfo);       

    DWORD dwStatus = GetAdaptersInfo(           
        AdapterInfo,                            
        &dwBufLen);                         
    assert(dwStatus == ERROR_SUCCESS);      

    PIP_ADAPTER_INFO pAdapterInfo = AdapterInfo;
    bool found = false;
    do {
        const IP_ADDR_STRING *addr_str = &pAdapterInfo->IpAddressList;
        while(addr_str != NULL)
        {

          if(selected_ip_adr == addr_str->IpAddress.String) 
          { 
            found = true;
            break;
          }
        }
        if(found)
        {
          PrintMACaddress(pAdapterInfo->Address);
          break;
        }
        else
        {
            pAdapterInfo = pAdapterInfo->Next;      
        }
    }
    while(pAdapterInfo);                        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:54:35.350

我相信你的错误在这里：

```
while(addr_str != NULL)
{
   if(selected_ip_adr == addr_str->IpAddress.String) 
   { 
      found = true;
      break;
   }
} 
```

更改`while`为`if (addr_str != NULL)`

然后

它应该看起来像

```
if (add_str != NULL)
{
   if (selected_ip_adr == addr_str->IpAddress.String)
   {
      PrintMACaddress(pAdapterInfo->Address);
   }              
}   

pAdapterInfo = pAdapterInfo->Next; 
```

如果 pAdapterInfo 为空，这应该通过在后续`next`调用中使用 do/while 来处理。

请参阅MSDN 上的[IP_ADAPTER_INFO 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366062%28v=vs.85%29.aspx)。

# xcode - 有没有办法在集合视图控制器中启用底部工具栏？

> ID：15636584
> 
> 赞同：5
> 
> 时间：2013-03-26T12:00:24.537
> 
> 标签：xcode, ipad, uitoolbar, uicollectionview

我制作并实现了一个集合视图控制器，现在我希望添加一个用于导航的底部工具栏。在 Collection View Controller 的 Simulated Metrics 选项卡下，我启用了底部工具栏，它显示在情节提要中，我可以对其进行编辑和交互。

当我在 iPad 模拟器中运行应用程序时，底部工具栏没有出现。是否有一些我缺少的设置导致它显示在情节提要中而不是应用程序中？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-26T16:03:17.343

您可以将 UIViewController 嵌入到 UINavigationController 中。在情节提要中，将底部栏的模拟指标设置为 UINavigationController 上的工具栏选项之一。然后您会注意到 UICollectionViewController 底部的工具栏。

我已经使用 Xcode 6.3.2 完成了这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-27T10:37:50.463

我在 Interface Builder 中遇到了同样的问题。

但是，以编程方式添加工具栏可以正常工作：

```
// viewWillAppear:

// set up toolbar
UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height-44, self.view.bounds.size.width, 44)];
toolbar.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleTopMargin;
[self.view addSubview:toolbar];

// instantiate spacer, middleItem
toolbar.items = @[spacer, middleItem, spacer]; 
```

# scala - 按名称参数的模糊语义？

> ID：15636588
> 
> 赞同：2
> 
> 时间：2013-03-26T12:01:03.737
> 
> 标签：scala

考虑以下函数：

```
import java.util.concurrent.Callable;

def callable[T]( operation: =>T) : Callable[T] = {
  new Callable[T] {
    def call : T = operation
  }
} 
```

在 REPL 中，此代码执行我想要的操作：

```
scala> val myCallable = callable {
     | println("Side effect!");
     | "Hi!"
     | }
myCallable: java.util.concurrent.Callable[String] = $anon$1@11ba4552

scala> myCallable.call
Side effect!
res3: String = Hi!

scala> myCallable.call
Side effect!
res4: String = Hi! 
```

在调用函数'call'之前不会评估by-name参数，并且每次调用该函数时都会重新评估。这就是我想要的行为。

但在[规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)中，它对按名称参数进行了以下说明：

“相应的参数不会在函数应用时进行评估，而是在函数内的每次使用时进行评估。”

从这个描述中，我不清楚我可以依赖我想要的行为。“在函数内使用”是什么意思？我怎么知道这是指调用我的 Callable 的点（有时在不确定的将来），而不是定义它的点（非常“在函数内”）？

代码正在做我想做的事。但是，如果我确定这种行为是可靠的，而不是可能在某些未来版本的 scala 中“修复”的错误，我会更容易休息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:34:47.103

这不是错误 - 行为符合预期。您可以将“在函数中的每次使用时评估”递归地视为“在评估该表达式时在函数中的表达式中的每次使用时评估”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:40:38.683

“函数”是您将参数传递给的函数。这段话试图警告你的是：

```
scala> def byName(arg: => String) = arg + arg
byName: (arg: => String)java.lang.String

scala> byName({println("hi") ; "foo" })
hi
hi
res0: java.lang.String = foofoo 
```

即每次引用参数时都会发生副作用。由于您只执行一次，因此与您的情况无关（评估点除外，它在函数内部，而不是在调用站点）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:47:20.980

要扩展先前的答案并阐明避免这种情况的方法，如果您只想对其进行一次评估，则可以在函数内部的 val 中捕获该值。通过这样做，您将导致对“按名称”参数进行评估，并且不止一次地使用计算值，而不是导致对同一表达式进行 2 次评估。

```
scala> def byName(arg: => String) = {val computedArg = arg; computedArg + computedArg}
byName: (arg: => String)java.lang.String

scala> byName({"println("hi") ; "foo" })
hi
res0: java.lang.String = foofoo 
```

如果您将来需要这样做...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T13:58:12.783

最后，要对方法参数进行真正的*惰性*评估（仅零或一次评估），您可以这样做：

```
def m1(i: => Int) = {
  lazy val li = i
  ...
  // any number of static or dynamic references to li
  ...
} 
```

# python - 匹配具有已知顺序的未知字符的固定长度单词

> ID：15636592
> 
> 赞同：2
> 
> 时间：2013-03-26T12:01:25.597
> 
> 标签：python, regex

我试图在我不知道任何字符是什么的情况下暴力破解密文，但我确实知道语言、每个单词的长度和所有字符的位置。

文本中的一个单词是“avarrm”，所以我希望我可以遍历一个单词字典并尝试仅匹配第一个位置的字符与第三个位置的字符相同的字符，并且第 4 位的字符与第 5 位的字符相同，其余字符不是这两个字符中的任何一个或彼此相同。

这听起来像是一个正则表达式的工作，但我完全不知道我将如何编写它。这是可行的，如果可行，怎么做？或者我应该忘记正则表达式并用一堆ifs来做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:16:15.533

这可能是需要的：

```
^(.).\1(.)\2((?!(\1|\2)).)*$ 
```

`(.).\1(.)\2`匹配一个字符，后跟一个字符，后跟一个与第一个相同的字符，后跟两个相同的字符。

`((?!(\1|\2)).)*`匹配零个或多个既不是第一个字符也不是第四个字符的字符。

这是你的要求吗？

**编辑**

这将确保最后一部分不会有重复的字符：

```
^(.).\1(.)\2((?!(.).*\4)(?!(\1|\2)).)*$ 
```

要使第二个字符不重复，请使用：

```
^(.)((?!\1).)\1((?!(\1|\2)).)\3((?!(.).*\6)(?!(\1|\2|\3)).)*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:30:59.670

另一种方法可能是将字符串转换为数字序列：

```
str1 = 'avarrm'
str2 = 'lylbbn'

def num_sequence(str_arg):
    return [dict(zip(str_arg, range(len(str_arg))))[n] for n in str_arg]

print num_sequence(str1), num_sequence(str2) 
```

这将输出

[0, 3, 2, 3, 5, 5] [0, 3, 2, 3, 5, 5]

由于列表相等，因此“lylbbn”是候选解决方案。

# android - OpenGL ES 2.0 缩放不起作用

> ID：15636594
> 
> 赞同：1
> 
> 时间：2013-03-26T12:01:30.747
> 
> 标签：android, opengl-es-2.0

我需要在 OpenGL|ES 2.0 中缩放一个对象。着色器：

```
 private final String vertexShaderCode =
        "uniform mat4 uMVPMatrix;" +
        "attribute vec4 vPosition;" +
        "void main() {" +
        //the matrix must be included as a modifier of gl_Position
            "  gl_Position = vPosition * uMVPMatrix;" +
        "}";

    private final String fragmentShaderCode =
        "precision mediump float;" +
                "uniform vec4 vColor;" +
                "void main() {" +                   
                "  gl_FragColor = vColor;" +
                "}"; 
```

投影：

```
 Matrix.orthoM(mProjMatrix,0,
              -1.0f,           // Left
               1.0f,           // Right
              -1.0f / ratio,   // Bottom
               1.0f / ratio,   // Top
               0.01f,          // Near
               10000.0f); 
```

绘图设置：

```
 // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, -3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0); 
```

实际渲染：

```
 float[] scale = {5f,5f,1f};
    Matrix.scaleM(scale_matrix, 0, scale[0], scale[1], scale[2]);

    Matrix.multiplyMM(r_matrix, 0, scale_matrix, 0, mMVPMatrix, 0);
    // Combine the rotation matrix with the projection and camera view

    // Apply the projection and view transformation
    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, r_matrix, 0); 
```

而且它不会扩展。我可以看到三角形并且可以旋转它。但是缩放不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:24:51.390

由于向量是 OpenGL 中的列向量，因此您必须在顶点着色器中更改矩阵乘法的顺序：

gl_Position = uMVPMatrix*vPosition;

# spring - Hibernate 4 MultiTenancy Spring 3 模式导出错误

> ID：15636595
> 
> 赞同：6
> 
> 时间：2013-03-26T12:01:34.587
> 
> 标签：spring, hibernate, multi-tenant

我正在尝试使用多租户选项和自动模式创建来配置 Hibernate SessionFactory，但是我遇到了这个错误：

```
java.lang.NullPointerException
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51)
    at org.hibernate.tool.hbm2ddl.DatabaseExporter.<init>(DatabaseExporter.java:52)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:367)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:498)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1742)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1780)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:242) 
```

这是我的弹簧配置：

```
 <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource1"/>
    <property name="hibernateProperties">
        <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
         <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
         <prop key="hibernate.show_sql">true</prop>
         <prop key="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</prop>

         <prop key="hibernate.multiTenancy">DATABASE</prop>
         <prop key="hibernate.multi_tenant_connection_provider">org.springframework.webflow.samples.booking.SampleMultiTenantConnectionProvider</prop>
         <prop key="hibernate.tenant_identifier_resolver">org.springframework.webflow.samples.booking.SampleCurrentTenantIdentifierResolver</prop>
      </props>
    </property>
</bean>

<!-- Deploys a in-memory "booking" datasource populated -->
<bean id="dataSource1" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" value="jdbc:hsqldb:mem:booking1" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean>

<bean id="dataSource2" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" value="jdbc:hsqldb:mem:booking2" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean> 
```

现在我只使用 DataSource 1，并且 SampleConnectionProvider 和 TenantResolver 总是返回相同的租户和数据源。但是，当 Schema Export 运行时，它会抛出 NullPointerException。提供给 SuppliedConnectionProviderHelper 的 ConnectionProvider 为空。使用多租户时，他似乎无法选择合适的 ConnectionProvider。SuppiedConnectionProviderHelper 是在 SchemaExport 上创建的：

```
this.connectionHelper = new SuppliedConnectionProviderConnectionHelper(
            serviceRegistry.getService( ConnectionProvider.class )
    ); 
```

使用多租户时可以使用 hibernate.hbm2ddl.auto 吗？已经在休眠文档中搜索但没有找到任何东西。

任何帮助将非常感激！

此致

若昂·西马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T15:14:28.617

看起来不支持多租户`SchemaExport`。我查看了其他地方的源代码连接提供者是基于多租户策略获得的。[请参见此处](https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/internal/SessionFactoryImpl.java#L497)的第 581 行。我在 SchemaExport 中没有看到这种情况。此外，如果有多个数据源，SchemaExport 也应该自动在其他数据源中创建模式。我没有看到 SchemaExport 做这样的事情。

[请参阅](https://forum.hibernate.org/viewtopic.php?p=2468078)和[JIRA 问题](https://hibernate.atlassian.net/browse/HHH-7389)。JIRA 问题没有您描述的确切问题，但建议在评论中创建模式的解决方法。

这只是我的静态分析。您可能应该打开问题或在这里等待有人发布答案。据我所知，这似乎是错误或不受支持的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T04:33:08.693

这是休眠中的一个错误...

[https://hibernate.atlassian.net/browse/HHH-7395](https://hibernate.atlassian.net/browse/HHH-7395)

# sql-server - 向所有存储过程添加扩展属性

> ID：15636598
> 
> 赞同：0
> 
> 时间：2013-03-26T12:01:37.737
> 
> 标签：sql-server, extended-properties

我们正在尝试将版本控制添加到 ms sql 数据库。由于数据库现已部署到 400 多个分支机构，并且客户坚持交错部署，因此很难管理哪些分支机构有哪些数据库修复。

我建议我们向数据库中所有存储的过程添加一个 release_version 扩展属性，并使用它来帮助管理。扫描网页后，我想出了以下脚本，但似乎无法正常工作；任何人都可以协助获得正确的脚本吗？

```
SELECT 'EXEC sys.sp_addextendedproperty
       @name = N''Release_Version'', 
       @value = N''1.0.0'',
       @level0type = N''SCHEMA'', 
       @level0name = [' + ROUTINE_SCHEMA + '],
       @level1type = N''PROCEDURE'', 
       @level1name = [' + ROUTINE_NAME + '];'
 FROM information_schema.routines where ROUTINE_TYPE = 'PROCEDURE' ORDER BY ROUTINE_NAME 
```

当我执行此操作时，我得到了正确执行语句的结果集，但我如何实际执行它们？

```
EXEC sys.sp_addextendedproperty            @name = N'Release_Version', @value = N'1.0.0',            @level0type = N'SCHEMA', @level0name = [dbo],            @level1type = N'PROCEDURE', @level1name = [sp_AlterTicketHistoryTable];
EXEC sys.sp_addextendedproperty            @name = N'Release_Version', @value = N'1.0.0',            @level0type = N'SCHEMA', @level0name = [dbo],            @level1type = N'PROCEDURE', @level1name = [sp_AlterTicketTransTable];
EXEC sys.sp_addextendedproperty            @name = N'Release_Version', @value = N'1.0.0',            @level0type = N'SCHEMA', @level0name = [dbo],            @level1type = N'PROCEDURE', @level1name = [sp_BackupAcknowledgementHistory];
... 
```

* * *

[注意]：我的错误......我的印象是语句会自动执行，而不是我需要循环并专门执行。

# python - 遍历 JSON 数组并对其进行排序

> ID：15636601
> 
> 赞同：0
> 
> 时间：2013-03-26T12:01:52.690
> 
> 标签：python, json

我需要将 JSON 数组整理成层次结构，这里我的 JSON 文件从未排序，但遵循结构：

```
{
  "name":"Folder 2",
  "id":"zRDg",
  "parent":"OY00",
  "type":"folder"
},
{
  "name":"Folder 1",
  "id":"OY00",
  "type":"folder"
},
{
  "name":"Folder 3",
  "id":"ZDE1",
  "type":"folder"
},
{
  "name":"DX00025.jpg",
  "id":"9Xdd",
  "parent":"OY00",
  "type":"jpeg"
} 
```

进入这个：

```
{
  "name":"Folder 1",
  "id":"OY00",
  "type":"folder",
  "children": [{
    "name":"Folder 2",
    "id":"zRDg",
    "type":"folder"
    },
    {
    "name":"DX00025.jpg",
    "id":"9Xdd",
    "type":"jpeg"
  }]
},
{
    "name":"Folder 3",
    "id":"ZDE1",
    "type":"folder"
} 
```

我无法弄清楚，因为我是 python 新手，我的开始（错误）：

```
for index,item in result:
    if item['parent']:
        for item2 in result:
            if item2['id'] == item['parent']:
                item['children'] = item2
                brake 
```

这没关系，但问题是它不正确**python**，folder1/folder/folder3/ 不会为此工作，我需要一个**递归函数**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:30:44.697

我对这种情况的解决方案是这样的：

```
data = INPUT_LIST

class Item:
    def __init__(self, _id, name, type, parent):
        self._id = _id
        self.name = name
        self.type = type
        self.parent = parent
        self.children = []

    def get_dict(self):
        return {
            'id': self._id,
            'name': self.name,
            'type': self.type,
            'children': [child.get_dict() for child in self.children]
        }

lookup = dict((item['id'], Item(item['id'], item['name'], item['type'], item['parent'] if 'parent' in item else None)) for item in data)

root = []

for _id, item in lookup.items():
    if not item.parent:
        root.append(item)
    else:
        lookup[item.parent].children.append(item)

dict_result = [item.get_dict() for item in root] 
```

# html - 图片覆盖文字

> ID：15636603
> 
> 赞同：1
> 
> 时间：2013-03-26T12:01:53.597
> 
> 标签：html, css

在这里我使用 3 张图片，我需要第三张图片上的文字..
我的代码是：

```
<div style="position: relative; left: 0; top: 0;">
    <img src="Images/img1.png" style="position: relative; top: 0; left: 0;" />
    <img src="Images/img2.png" style="position: absolute; top: 10px; left:450px;" />
    <img src="Images/img3.png" style="position: absolute; top: 0px; left:720px;" />
    <div style="position:relative;top: 0px; left:720px;">
        Home<br />
        contact<br />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:06:43.023

你试过把你的文字`div`放在适当的位置`absolute`吗？它在里面`relative` `div`...

```
<div style="position: relative; left: 0; top: 0;">
    <img src="Images/img1.png" style="position: relative; top: 0; left: 0;" />
    <img src="Images/img2.png" style="position: absolute; top: 10px; left:450px;" />
    <img src="Images/img3.png" style="position: absolute; top: 0px; left:720px;" />
    <div style="position:absolute;top: 0px; left:720px;">
        Home<br />
        contact<br />
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T12:04:20.477

基本更改是这样`relative`使用的`absolute`

```
<div style="position:absolute;top: 0px; left:720px;">
                            Home<br />
                            contact<br />
</div> 
```

**相对定位**- 相对定位的元素相对于其正常位置进行定位。

**绝对定位**- 绝对位置元素相对于第一个具有非静态位置的父元素定位。

检查更多细节：[CSS定位](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:10:22.290

您应该使用 position:absolute 而不是 position:relative 以使元素脱离流动。但是，您需要调整 left 和 top 属性。

# java - 在 HTTPS 上使用重定向的 JSF 导航规则问题

> ID：15636609
> 
> 赞同：1
> 
> 时间：2013-03-26T12:02:09.117
> 
> 标签：java, jsf, redirect, https, navigation

`<redirect/`在导航规则上使用 > 时遇到问题。我的应用程序在 HTTPS 上运行，并且当导航规则使用`<redirect/`> 时，重定向完成到 HTTP，而不是 HTTPS。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T12:25:21.890

您应该实现一个自定义[`ConfigurableNavigationHandler`](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/application/ConfigurableNavigationHandler.html)，它将根据操作的源重新映射 URL（我在这里假设并非所有重定向都指向 https 目标）。举个例子：

```
 public class NavigationHandlerTest extends ConfigurableNavigationHandler {

 private NavigationHandlerTest concreteHandler;

 public NavigationHandlerTest(NavigationHandler concreteHandler) {
      this.concreteHandler = concreteHandler;
 }

 @Override
 public void handleNavigation(FacesContext context, String fromAction, String outcome) 
 {
    //here, check where navigation is going to/coming from and based on that build an appropriate URL.
     if(outcome.equals("someAction"){
        outcome = "https://foo.bar.baz"; //set destination url
          }

     concreteHandler.handleNavigation(context, fromAction, outcome);   

 }

   } 
```

*在faces-config.xml*中注册您的实现

 *```
 <application>
        <navigation-handler>com.example.NavigationHandlerTest</navigation-handler>
     </application> 
```*

# sql - 更新 SQL 语句并使用 if 存在

> ID：15636611
> 
> 赞同：0
> 
> 时间：2013-03-26T12:02:10.677
> 
> 标签：sql, sql-server, if-statement, sql-update, exists

我正在尝试从一个表中选择一个值并将其插入另一个表的特定部分。我有以下 sql (mssql 2008)

```
if exists (select datesubmitted from JADHist where datesubmitted = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()-1)))

Begin

Select JadOPNTotal from JADhist where dateSubmitted = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()-1))

end

else

begin

Select jadopntotal from JADhist where dateSubmitted = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()-2))

end 
```

这总是检索一个数据类型为 real 的值。我有另一个表，它是 2 列，一个是日期，旁边是小时，接下来的 2 周每个小时都有一个条目。格式为 2013-03-26 01:00:00.000 等等。我想将我从上面的代码中获得的值插入到第二个表中，持续 24 小时（24 个条目）。24 期将是今天早上 6 点到明天早上 6 点。

我还有以下代码，其中测试值为 10，只是为了证明代码正确更新了 opndata。

```
UPDATE [GasNominations].[dbo].[OPNData]
SET 
  [Value] = '10'
WHERE NomSubmittedDate between DATEADD(HH, 6, DATEDIFF(dd, 0, GETDATE())) 
and DATEADD(HH, 5, DATEDIFF(dd, 0, GETDATE()+1))
GO 
```

我想用 if exists 语句替换“10”值，但语法不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:26:13.267

尝试这个

```
declare @total varchar(10)

if exists (select datesubmitted from JADHist 
where datesubmitted = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()-1)))
Begin
    Select @total = JadOPNTotal from JADhist 
    where dateSubmitted = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()-1))
end
else
begin
    Select @total = jadopntotal from JADhist 
    where dateSubmitted = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()-2))
end

UPDATE [GasNominations].[dbo].[OPNData]
SET 
  [Value] = @total
WHERE NomSubmittedDate between DATEADD(HH, 6, DATEDIFF(dd, 0, GETDATE())) 
and DATEADD(HH, 5, DATEDIFF(dd, 0, GETDATE()+1))
GO 
```

# teamcity - TeamCity 不发送电子邮件通知

> ID：15636629
> 
> 赞同：8
> 
> 时间：2013-03-26T12:03:21.923
> 
> 标签：teamcity, teamcity-7.0, email-notifications

我正在尝试在我的项目失败时在 TeamCity 中设置电子邮件通知。我已经用他们的信息设置了一些用户，但是当我的项目失败时。我没有收到任何电子邮件。

我已经在“电子邮件通知”选项卡中提供了所有信息，并在“测试连接”中提供了我的电子邮件地址，它说连接成功。只是想确认一下，在测试与我的电子邮件地址的连接时，我是否应该期待/收到一封电子邮件，或者系统只是 ping/检查连接是否正常？

在我的“设置和工具”中（在管理员下），我在“电子邮件通知程序”下有一个监视项目，它监视我的项目的构建失败。

以前有没有人遇到过这个问题，任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-15T17:17:43.163

今天，我注意到在teamcity 8中按下“测试连接”按钮后，我也有一个“连接成功”对话框，但没有发送测试消息。

问题是我在下面圈出的区域中只有“TeamCity”，而不是“TeamCity@bolinger.ca”。一旦我添加了@bolinger.ca，消息就开始通过了。

我想在这种情况下，TC 中需要有一些更好的错误处理。

我正在使用 IIS 6.0 smtp 服务器，但我确信 sendmail 或任何其他邮件服务器不会理解这个错误。

![在此处输入图像描述](../Images/76f4402eb90e49141790002506f06673.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T15:50:02.523

您必须确保 TeamCity 帐户中的 VCS 用户名设置[与 VCS 根目录中的配置方式相匹配。](https://stackoverflow.com/a/27993717/495796)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T09:06:14.137

在测试与您的电子邮件地址的连接时，您应该会收到一封测试电子邮件。

如果您没有收到任何测试电子邮件但它说连接成功，我的经验是，有时该电子邮件最终会出现在您的垃圾邮件文件夹中。请检查是否是这种情况。

如果不是这种情况，我建议您按照本指南测试您的 teamcity 服务器使用的 SMTP 服务器：

[如何使用 telnet 测试 SMTP 服务器](http://www.anta.net/misc/telnet-troubleshooting/smtp.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-25T07:00:22.543

此外，要成功设置 SMTP 服务器，您必须执行以下操作：

登录 TeamCity 后，您会在右上角的用户名旁边看到一个下拉菜单。

1.  选择“我的设置和工具”。
2.  在“Watched Builds and Notifications”下，编辑“Email notifier”设置以指示您何时应通过电子邮件收到通知。

因此，在我们的案例中，我们将管理员的电子邮件 ID 配置为项目开发人员的组电子邮件 ID，这样每个人都会收到一封有关构建状态的电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-19T22:12:44.227

还要确保您的用户有电子邮件地址（我犯了这个错误！）

# list - Netlogo：迭代列表

> ID：15636630
> 
> 赞同：0
> 
> 时间：2013-03-26T12:03:24.253
> 
> 标签：list, netlogo

我想在 NetLogo 中使用这部分代码：

```
foreach [2 4 6]
  [ crt ?
    show "created " + ? + " turtles" ] 
```

它来自文档——[迭代列表](http://ccl.northwestern.edu/netlogo/2.0/docs/programming.html#lists)。但是当我运行代码时，会显示此错误消息：

> 期望这个输入是一个数字，但得到一个字符串

如果我从 show 命令中离开 +，则没有错误，但因此我不能写迭代号。问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:02:53.857

您可能使用较新版本的 NetLogo（这是 Netlogo 2.x 的帮助）在此处查看新示例：http: [//ccl.northwestern.edu/netlogo/5.0/docs/programming.html#lists](http://ccl.northwestern.edu/netlogo/5.0/docs/programming.html#lists)

以及相关的代码：

```
 foreach [2 4 6]
  [
    crt ?
    show (word "created " ? " turtles")
  ] 
```

# android - 如何修复 Pop up 的计数？

> ID：15636636
> 
> 赞同：0
> 
> 时间：2013-03-26T12:03:52.313
> 
> 标签：android, push-notification, sharedpreferences, reminders

在我的应用程序中，我正在 Mainactivity 中启动一项服务。每次打开应用程序时，我都会显示一个提醒弹出窗口。但是，我只想显示弹出窗口 1 次。

如何在多个应用程序启动时存储弹出窗口的计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:07:08.070

```
boolean mboolean = false;

SharedPreferences settings = getSharedPreferences("PREFS_NAME", 0);
mboolean = settings.getBoolean("FIRST_RUN", false);
if (!mboolean) {
 // do the thing for the first time 
  SharedPreferences settings = getSharedPreferences("PREFS_NAME", 0);
                    SharedPreferences.Editor editor = settings.edit();
                    editor.putBoolean("FIRST_RUN", true);
                    editor.commit();                    
} else {
 // other time your app loads
} 
```

此代码只会显示一次，直到您不重新安装应用程序或清除应用程序数据

解释：

好的，我给你解释一下。SharedPreferences 就像您的应用程序的私有空间，您可以在其中存储原始数据（字符串、整数、布尔值...），这些数据将一直保存到您不删除应用程序为止。我上面的代码是这样工作的，你有一个布尔值，当你启动应用程序时它是假的，只有当布尔值是假的时候你才会显示你的弹出窗口 --> if (!mbolean)。一旦你显示了你的弹出窗口，你在 sharedPreferences 中将布尔值设置为 true，系统下次会在那里检查，看看它是否为 true，并且不会再次显示弹出窗口，直到你重新安装应用程序或从应用程序管理器中清除应用程序数据.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:09:19.130

推送弹出窗口时输入此代码。

```
pref = PreferenceManager
            .getDefaultSharedPreferences(getApplicationContext());

    if (!pref.getBoolean("popupfirst", false)) {
        Editor editPref = pref.edit();
        editPref.putBoolean("popupfirst", true);
        editPref.commit();
    } 
```

当您的应用程序第一次启动并且您推送弹出窗口时，它会将 true 添加到 Preference 中，否则它无法执行任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:11:22.380

将其存储在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中。

例如，在显示弹出窗口时将其保存在您的共享首选项中：

```
// Get the shared preferences
SharedPreferences prefs = getSharedPreferences("com.example.app", Context.MODE_PRIVATE);

// Edit the shared preferences
Editor editor = prefs.edit();

// Save '1' in a key named: 'alert_count'
editor.putInt("alert_count", 1);

// Commit the changes
editor.commit(); 
```

之后，当您启动应用程序时，您可以再次提取它，以检查它之前启动了多少次：

```
// Get the shared preferences
SharedPreferences prefs = getSharedPreferences("com.example.app", Context.MODE_PRIVATE);

// Get the value of the integer stored with key: 'alert_count'
int timesLaunched = prefs.getInt("alert_count", 0); // 0 is the default value

if(timesLaunched <= 0){
    // Pop up has not been launched before
} else {
    // Pop up has been launched 'timesLaunched' times
} 
```

理想情况下，当您保存在 SharedPreferences 中启动的次数时，您可以先提取它，然后增加当前值。像这样：

```
SharedPreferences prefs = getSharedPreferences("com.example.app", Context.MODE_PRIVATE);

// Get the current value of how many times you launched the popup
int timesLaunched = prefs.getInt("alert_count", 0); // 0 is the default value
Editor editor = prefs.edit();
editor.putInt("alert_count", timesLaunched++);
editor.commit(); 
```

# linux - 如何在许多服务器中搜索他们的日志并对信息进行排序？

> ID：15636645
> 
> 赞同：0
> 
> 时间：2013-03-26T12:04:11.647
> 
> 标签：linux, shell, sorting, logging

这个想法很简单：

我想将一些单词作为`something`参数传递给某个脚本，然后这个脚本会在我所有的服务器中搜索到他们的日志中，当找到相关的东西时，他们会将这个信息扔到某个文件中，这个文件将是`rsync`某个服务器将对所有服务器的全部信息进行排序，并在何时何地传递给我`something`。

我认为这是可能的，因为我的服务器已与之同步，`NTP`这使我在两台或多台服务器上的时间不会完全相同。但我想知道这是否是个好主意，以及如何搜索和排序这些日志？

我的问题是：

1) 我如何访问我的服务器以在每个服务器中运行此搜索？

2）如何进行此搜索？

3）如何对`final`日志中的全部信息进行排序（包含所有服务器的全部信息）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:35:46.873

您可以将您的 ssh 密钥添加到每个服务器，然后从您的主服务器将其添加到您的 bashrc

```
export web_servers=(server1 server2 server3 server4 )
function grepallservers() {

      for s in ${web_servers[@]}; do echo $s; ssh $s grep "$@"; done

}

function all-serv-grep() {

        grepallservers $1 /var/log/error.log
} 
```

# android - 使用andengine在动态壁纸中显示当前时间的最佳方式是什么？

> ID：15636648
> 
> 赞同：3
> 
> 时间：2013-03-26T12:04:17.673
> 
> 标签：android, performance, andengine

我正在尝试在动态壁纸中显示当前时间。我正在使用andengine gles2 锚中心来开发它。我所做的是

向场景注册了一个更新处理程序，并**使用日历实例读取当前时间并显示它。但它使 GC 继续运行。**这是我的代码

```
 mScene.registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void onUpdate(float pSecondsElapsed) {

            c = Calendar.getInstance();
            yy = c.get(Calendar.YEAR);
            mm = c.get(Calendar.MONTH);
            dd = c.get(Calendar.DAY_OF_MONTH);

            hh = c.get(Calendar.HOUR);
            min = c.get(Calendar.MINUTE);
            amOrpm = c.get(Calendar.AM_PM);
            am_pm = "AM";
            if (amOrpm == 1) {
                am_pm = "PM";
            } else {
                am_pm = "AM";
            }
            displayString = hh + "\n" + min + "\n " + am_pm;
            mText.setText(String.valueOf(displayString));
        }

        @Override
        public void reset() {
        }
    }); 
```

我必须遵循什么方法来减少垃圾收集器的运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:52:00.153

您可以使用该[`Time`](http://developer.android.com/reference/android/text/format/Time.html)对象。您可以创建一个`Time`-instance 并使用它的[`setToNow()`](http://developer.android.com/reference/android/text/format/Time.html#setToNow%28%29)-method 对其进行更新。`year`然后，您可以从等`month`字段访问 YEAR、MONTH 等（当您调用该`setToNow()`方法时它们会更新）。

由于这不会为`Calendar`每次更新都创建相对繁重的任何新实例，因此您将体验到更少的垃圾收集。

# ios - Storyboard 将 viewcontroller 的视图添加到另一个 viewcontroller iOS5+

> ID：15636650
> 
> 赞同：0
> 
> 时间：2013-03-26T12:04:31.823
> 
> 标签：ios, objective-c, xcode

任何人都知道是否可以在情节提要中创建可用于主视图的视图？

我尝试使用标识符实例化我的视图控制器，然后从视图控制器添加视图，但框架与我在情节提要中使用的框架不同。

我知道可以在故事板中使用容器视图。但我不能在 iOS 5.0 中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:38:58.857

不要在情节提要中创建视图控制器。创建一个单独的 xib 文件，然后使用 xib 实例化控制器并将视图作为子视图添加到主视图中。

# javascript - 从 Internet Explorer 中动态添加的链接打开 fancybox 内联内容

> ID：15636655
> 
> 赞同：0
> 
> 时间：2013-03-26T12:04:39.363
> 
> 标签：javascript, jquery, html, fancybox, fancybox-2

我有两个空`<div>`的像：

```
<div id="fancyboxdiv" style="display: none;"></div>
<div id="linkdiv"></div> 
```

如果我使用 jQuery 插入其中一个（）的链接，并在使用此脚本打开 fancybox 时将`#linkdiv`内容插入到另一个（ ）：`#fancyboxdiv`

```
<script type="text/javascript">
    (function($) {
        $(document).ready(function() {
            //loading the opening link to a div with jquery
            $('#linkdiv').html('<a id="fbLink" href="#fancyboxdiv" title="fbox">see fancybox</a>');
            //opening the fancybox
            $('#fbLink').fancybox({
                'afterLoad': function() {
                    $('#fancyboxdiv').html('<h1>Fancybox</h1>');
                },
                'afterClose': function() {
                    $('#fancyboxdiv').empty();
                }
            });
        });
    })(jQuery);
</script> 
```

`#fbLink`当我在除 IE8 和更低版本之外的所有浏览器中单击动态添加的链接 ( ) 时，fancybox 会触发。

如果硬编码里面的链接，`<div id="linkdiv">`如：

```
<div id="linkdiv"><a id="fbLink" href="#fancyboxdiv" title="fbox">see fancybox</a></div> 
```

并注释掉这行代码：

```
//$('#linkdiv').html('<a id="fbLink" href="#fancyboxdiv" title="fbox">see fancybox</a>'); 
```

然后fancybox在包括IE8在内的所有浏览器中都能正常工作。

我必须做什么才能使我的脚本在 IE8 和更低版本中工作？我需要添加稍后触发fancybox的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:37:57.457

似乎 IE8 和更低版本不知道`type`应该从动态添加的链接中打开什么内容。为什么？别问我，是IE。

作为一种解决方法，您可以使用 (HTML5)属性在动态添加的链接中设置`type`内容（在这种情况下），例如：`inline``data-fancybox-type`

```
<a id="fbLink" data-fancybox-type="inline" href="#fancyboxdiv" title="fbox">see fancybox</a> 
```

您的完整脚本现在可能如下所示：

```
<script type="text/javascript">
(function ($) {
    $(document).ready(function () {
        //loading the opening link to a div with jquery
        // added data-fancybox-type to the link
        $('#linkdiv').html('<a id="fbLink" data-fancybox-type="inline" href="#fancyboxdiv" title="fbox">see fancybox</a>');
        //opening the fancybox
        $('#fbLink').fancybox({
            'afterLoad': function () {
                $('#fancyboxdiv').html('<h1>Fancybox</h1>');
            },
                'afterClose': function () {
                $('#fancyboxdiv').empty();
            }
        });
    });
})(jQuery);
</script> 
```

这应该可以解决问题（用 IE7 测试过）

# android - 添加/删除 RelativeLayout（动画）的视图时出现 NullPointerException

> ID：15636658
> 
> 赞同：6
> 
> 时间：2013-03-26T12:04:51.463
> 
> 标签：android, android-animation

嗨，我想创建一个图像并从下到上设置动画，并将 alpha 从 1.0 更改为 0.0。我有这段代码（我在 onCreate 方法中调用了 3 次以制作 3 个动画图像）：

```
/**
 * Starts to make fog
 */
private void startFogGenerator() {

    handler.postDelayed(new Runnable() {
        @Override
        public void run() {

            final ImageView img = new ImageView(Activity.this);

            boolean showN1 = r.nextBoolean();
            if (showN1) {
                img.setImageResource(R.drawable.nube_01);
            } else {
                img.setImageResource(R.drawable.nube_02);
            }

            Animation animation = AnimationUtils.loadAnimation(Activity.this, R.anim.translate_and_alpha);
            animation.setAnimationListener(new Animation.AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {
                }

                @Override
                public void onAnimationEnd(Animation animation) {

                    fogLayout.removeView(img);
                    fogLayout.invalidate();
                    // always true? Maybe but just check for for concurrency safe.
                    if (setFogN(false) < MAX_CLOUDS_ON_SCREEN) {
                        startFogGenerator();
                    }

                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                }
            });

            int pxWidth = Tools.toPx(140, getResources()); // Width of layout container
            int paddingWidth = Tools.toPx(20, getResources());
            int x = r.nextInt(pxWidth - paddingWidth - paddingWidth) + paddingWidth;

            int range = Tools.toPx(50, getResources());

            int width;
            int height;
            if (showN1) { // nube01: 167x226
                width = r.nextInt(Tools.toPx(167, getResources()) - range) + range;
                height= r.nextInt(Tools.toPx(226, getResources()) - range) + range;
            } else { // nube01: 144x177
                width = r.nextInt(Tools.toPx(144, getResources()) - range) + range;
                height= r.nextInt(Tools.toPx(177, getResources()) - range) + range;
            }

            Log.d("Animation", "X: " + x + ", Width: " + width + ", Height: " + height);

            //img.setPadding(x, 0, 0, 0);
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(width, height);
            params.leftMargin = x;
            fogLayout.addView(img, params);
            img.setBackgroundColor(Color.argb(255, r.nextInt(255),r.nextInt(255),r.nextInt(255))); // just for debug
            img.startAnimation(animation);
            setFogN(true);

        }
    }, r.nextInt(2500 - 200) + 200);

}
private final static int MAX_CLOUDS_ON_SCREEN = 3;
private AtomicInteger currentFogs = new AtomicInteger(0);
private synchronized int setFogN(boolean increment) {

    int toReturn = increment ? currentFogs.incrementAndGet() : currentFogs.decrementAndGet();

    Log.d("TeaAnim", "ToReturn: "+ toReturn);

    return toReturn;

} 
```

工作正常，但是当删除第三个视图并重新开始时，它会因 NullPointerException 而崩溃，可能是并发问题？我该如何解决？

例外：

```
ERROR/AndroidRuntime(10736): FATAL EXCEPTION: main
    java.lang.NullPointerException
    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2796)
    at android.view.View.getDisplayList(View.java:12648)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.ViewGroup.dispatchGetDisplayList(ViewGroup.java:2910)
    at android.view.View.getDisplayList(View.java:12588)
    at android.view.View.getDisplayList(View.java:12694)
    at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:1198)
    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2173)
    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    at android.view.Choreographer.doFrame(Choreographer.java:532)
    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5204)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
    at dalvik.system.NativeStart.main(Native Method) 
```

注意：fogLayout 是一个具有固定宽度和高度（以 dp 为单位）的 RelativeLayout，Tools.toPx 是一种从 DP 转换为 PX 的方法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T12:56:15.887

**已解决，**只需通知我正在删除视图的处理程序：

```
handler.post(new Runnable() {
    public void run() {
        fogLayout.removeView(img);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:59:45.517

由于我找不到如何发表评论，这是我的答案

1.  如果你做了，你没有告诉我们

    相对布局雾布局；

    onCreate(Bundle savedInstance){fogLayout = (RelativeLayout) findViewById(R.id.idOfFogLayout); }

2.  尚不清楚您的处理程序是否不为空；

3.  您正在多次重用某些变量，为什么不定义一次，然后重用它们而不是每次都完全重新定义它们

4.  而不是添加和删除视图，为什么不只是在对它们应用动画时将它们设置为不可见

# asp.net-mvc-4 - 动态表达到方法

> ID：15636659
> 
> 赞同：0
> 
> 时间：2013-03-26T12:04:54.300
> 
> 标签：asp.net-mvc-4, webgrid

我无法让它工作

```
@grid.GetHtml(
   tableStyle: "bordertable",
   columns: grid.Columns(

       grid.Column("aaaa", format: @<text> @Roles.GetRolesForUser(@item.UserName).LastOrDefault() </text>  ),
       grid.Column("UserName", "bbbb"),
       grid.Column("FirstName", "cccc"),
       grid.Column("LastName", "dddd")
     )) 
```

问题在于

```
@Roles.GetRolesForUser().LastOrDefault(@item.UserName) 
```

没有`@item.UserName`它可以完美运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T14:55:32.887

```
@Roles.GetRolesForUser(item.UserName).LastOrDefault() 
```

不是

```
@Roles.GetRolesForUser().LastOrDefault(item.UserName) 
```

也因为 @ 已经用 @Roles 定义了，你不必再次使用 @ (@Item.UserName)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:54:53.823

我不明白所有，但我假设你的方法`Roles.GetRolesForUser()`return `IEnumerable`。对于使用 linq 扩展，可以这样写：

```
@Roles.GetRolesForUser().LastOrDefault(r=> r.UserName == item.UserName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:23:50.937

它可以在没有的情况下工作，`(@item.UserName)`因为如果您不精确地默认`LastOrDefault`返回源`null`。您可以在[此处](http://msdn.microsoft.com/fr-fr/library/vstudio/bb301849.aspx)查看相关文档。因此，您可以尝试捕捉异常来查看。

# python - 使用 itertools 进行递归函数应用

> ID：15636670
> 
> 赞同：8
> 
> 时间：2013-03-26T12:05:20.000
> 
> 标签：python, functional-programming, iterator, generator, itertools

我需要一个 Python 函数`iterate(f, x)`来创建一个返回值 x、f(x)、f(f(x))、f(f(f(x))) 等的迭代器（例如[Clojure 的`iterate`](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/iterate)）。首先，我想知道：这是否已经存在于标准库中的某个地方而我只是想念它？当然，使用生成器很容易实现：

```
def iterate(f, x):
    while True:
        yield x
        x = f(x) 
```

只是出于好奇：在 Python 中是否有更实用的方法来执行此操作，例如使用一些 itertools 或 functools 魔术？

在 Python 3.3 中，这可以工作

```
def iterate(f, x):
    return accumulate(repeat(x), lambda acc, _ : f(acc)) 
```

但对我来说似乎是一种虐待。我可以做得更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:09:47.343

itertools 中似乎没有任何东西可以满足您的需求，但是 itertools 是一个很深的宝箱，所以我可能错过了一些东西。

您的生成器代码看起来很棒。我不知道为什么你会用累积来写它，除非你正在玩一个荒谬的代码高尔夫游戏，或者你试图打动 Haskell 势利小人。编写函数，使其可读、可理解和可维护。无需过于聪明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T17:36:56.057

您可以使用[变形](http://en.wikipedia.org/wiki/Anamorphism)（或*展开*）来简化 的定义`iterate`，并仅使用一个起始值。这是我曾经使用过的一个实现，基于一篇非常著名的[论文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.41.125)：

```
def ana(build, predicate):
    def h(x):
        if predicate(x):
            return
        else:
            a, b = build(x)
            yield a
            for i in h(b):
                yield i
            # with newer syntax: 
            # yield from h(b)
    return h 
```

`iterate`使用then实现`ana`如下所示：

```
def iterate(f, x):
    return ana(lambda x: (x, f(x)), lambda _: False)(x) 
```

没有 itertools，但是……我同意这不是最易读的变体。事实上，它相当神秘。

* * *

更新：有一个更简单的版本，甚至看起来相当不错。它取自[这里](http://billmill.org/python_roman.html)：

```
def unfold(f, x):
    while True:
        w, x = f(x)
        yield w 
```

这给了你：

```
def iterate(f, x):
    return unfold(lambda y: (y, f(y)), x) 
```

# ios - 如何从视图中删除最后一次绘制 UIBezierPath？

> ID：15636672
> 
> 赞同：1
> 
> 时间：2013-03-26T12:05:25.127
> 
> 标签：ios, uibezierpath

我正在使用“UIBezierPath”UIBezierPath 绘制触摸线。

我想实现 UNDO 功能，当用户按下 UNDO 按钮时，最后绘制的线应该从屏幕上删除。

我怎样才能做到这一点？我使用了“UIBezierPath”的“removeAllPoints”功能，但它不起作用。

# c# - 在 LinqToXml 查询中迭代

> ID：15636673
> 
> 赞同：0
> 
> 时间：2013-03-26T12:05:29.070
> 
> 标签：c#, xpath, linq-to-xml, xquery

由于我还没有使用 LinqToXml 我想请你帮忙

源 XML：

```
<Projects xmlns="">
   <Project id="12345">
     <Name>AName</Name>
   </Project>
   <Project id="23456">
     <Name>BName</Name>
   </Project>
</Projects> 
```

LINQ查询：

```
var q = (from xe in datasource.Descendants()
                 select new Data{ 
                                  ID = xe.Name.ToString(), 
                                  Name = xe.Value.ToString() 
                                }).ToList(); 
```

输出：

```
Project AName 
Name AName 
Project BName 
Name BName 
```

期望的输出：

```
12345 AName
23456 BName 
```

因此，查询似乎正在遍历所有后代并`Name`作为节点名称和`Value`节点值。我应该如何修改它以获得所需的输出？像这样的东西怎么样：

*   获取所有`<Name>`节点进行迭代

*   为祖先选择`Value`该节点和`id`属性

PS 你有没有推荐任何针对 LinqToXml 的特定教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:09:38.803

```
var q = (from p in datasource.Descendants("Project")
         select new Data { 
               ID = (string)p.Attribute("id"), 
               Name = (string)p.Element("Name") 
         }).ToList(); 
```

还考虑具有`ID`整数类型的属性，那么您将能够以这种方式解析它：

```
ID = (int)p.Attribute("id") 
```

您也可以使用方法（流利的）语法：

```
var q = datasource
          .Descendants("Project")
          .Select(p => new Data { 
               ID = (string)p.Attribute("id"), 
               Name = (string)p.Element("Name") })
          .ToList(); 
```

# css - 不带 div：在图片上显示带有背景的标题

> ID：15636675
> 
> 赞同：1
> 
> 时间：2013-03-26T12:05:36.530
> 
> 标签：css

我想在图像上放置带有背景颜色的标题+文本（在右上角），但我不知道如果没有围绕 h1 和 p 标签的 div 是否可以工作。它可以与链式选择器一起使用吗？我有点困惑。你将如何解决这个定位问题？

这是我的代码：

```
<div class="class1 class2 ">
        <h1>headline</h1>
        <p>text</p>
        <figure class="class3 class4">
              <img class="at2x" width="950" height="609" alt="" src="">
        </figure>
</div> 
```

和一把[小提琴](http://jsfiddle.net/HpDnS/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:13:45.020

像这样的东西会起作用，显然`class`不是`style=`更好：

```
<div class="class1 class2" style="position: relative">
    <h1 style="position: absolute; top: 20px; left: 20px; background-color: #DDD;">headline</h1>
    <p style="position: absolute; top: 40px; left: 20px; background-color: #DDD;">text</p>
    <figure class="class3 class4" style="position: absolute; top:0; left: 0;">
        <img class="at2x" width="950" height="609" alt="" src="">
    </figure>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:17:43.737

您可以尝试使用`<figcaption>`与标签相关的`<figure>`标签：

```
<div class="class1 class2 ">
    <figure class="class3 class4">
          <img class="at2x" width="950" height="609" alt="" src="">
          <figcaption>
              <h1>headline</h1>
              <p>text</p>
          </figcaption>
    </figure>
</div> 
```

我建议把你`<figure>`放在`relative`位置和`<figcaption>`。`absolute`

注意，Internet Explorer 8 及更早的版本，不支持`<figure>`标签。

[在此处](http://html5doctor.com/the-figure-figcaption-elements/)阅读有关此内容的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:56:06.587

因为你写了你不能使用图像作为背景，恕我直言，你应该像[这个例子](http://codepen.io/anon/pen/tLAxB)那样做。

**HTML**

```
<div class="class1 class2 ">
        <h1>headline</h1>
        <p>text</p>
        <figure class="class3 class4">
          <img class="at2x" width="950" height="609" alt="" src="http://placekitten.com/950/609">
        </figure>
</div> 
```

**CSS**

```
.class1 {
  position: relative;
}
.class3 {
  position: absolute;
  z-index: -1;
  top: 0;
  left: 0;
  margin: 0;
} 
```

这当然是其中一种选择。

# asp.net - ALTER LOGIN c# .net 的 SQL Server 连接

> ID：15636677
> 
> 赞同：0
> 
> 时间：2013-03-26T12:05:40.210
> 
> 标签：asp.net, .net, sql-server, login, alter

这段 c# 代码只是不想更改服务器上的密码（出于某种目的，用户 ID 和密码显然是字符串，但这只是为了让它工作）：

```
SqlConnection conn = new SqlConnection ("Data Source=ServerIP;Persist Security Info=False;User ID=UserID;Password=UserPW");
SqlCommand cmd = new SqlCommand ("ALTER LOGIN UserID WITH PASSWORD='NewPW' OLD_PASSWORD='UserPW'", conn);
cmd.CommandType = CommandType.Text;
conn.Open();
conn.Close(); 
```

使用与服务器管理工​​作室相同的命令更改密码`ALTER LOGIN UserID WITH PASSWORD='NewPW' OLD_PASSWORD='UserPW'`就像一个魅力，因此在命令行或/和该特定用户的权限内没有问题。我想我错过了 Sql Connection 行中的一些东西。已经尝试过以下组合：

```
Initial Catalog=master;
Initial Catalog=;
Integrated Security=SSPI;
Persist Security Info=True; 
```

更改命令类型、使用`ExecuteNonQuery();`和许多其他东西，但似乎没有任何效果。

“谷歌”没有给出任何有价值的结果，希望我能在这里找到我的答案，感谢您提前抽出时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:20:17.063

尝试以下方法，对我来说是一种享受：

```
SqlConnection conn = new SqlConnection ("Data Source=ServerIP;Persist Security Info=False;User ID=UserID;Password=UserPW");
SqlCommand cmd = new SqlCommand ("ALTER LOGIN UserID WITH PASSWORD='NewPW' OLD_PASSWORD='UserPW'", conn);
cmd.CommandType = CommandType.Text;
conn.Open();
cmd.ExecuteNonQuery();
conn.Close(); 
```

`cmd.ExecuteNonQuery()`打开连接后忘记放了。我刚刚对此进行了测试，它成功地更改了我本地数据库的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:21:17.323

```
string queryString = @"DECLARE @sql NVARCHAR(500)
               SET @sql = 'ALTER LOGIN ' + QuoteName(@loginName) + 
                    ' WITH PASSWORD= ' + QuoteName(@password, '''') 
               EXEC @sql ";

using (var connection = new SqlConnection(connectionString))
{
    var command = new SqlCommand(queryString, connection);
    command.Parameters.AddWithValue("@loginName", loginName);
    command.Parameters.AddWithValue("@password", password);

    connection.Open();
    command.ExecuteNonQuery()
} 
```

**更新**

使用 DDL（数据定义语言）语句（作为 ALTER LOGIN），您不能直接使用参数。这就是我使用动态 SQL 的原因。

[QuoteName](http://msdn.microsoft.com/en-us/library/ms176114.aspx)将在 SQL 中正确引用，只需将任何 [ 字符（第一次调用）或 ' 字符（第二次调用）加倍。

# mysql - 在jsp中执行注册表后出现错误

> ID：15636679
> 
> 赞同：0
> 
> 时间：2013-03-26T12:05:43.407
> 
> 标签：mysql, jsp

我正在尝试执行 registercase.jsp 页面，该页面在向 insert.jsp 提交这些详细信息后具有一些表单详细信息，在 tomcat 日志中出现以下错误。如果可能，请帮助我。

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax
 to use near ') values('null','null','null',null)' at line 1com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that c
orresponds to your MySQL server version for the right syntax to use near ') values('null','null','null',null)' at line 1
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
        at com.mysql.jdbc.Util.getInstance(Util.java:386)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4120)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2503)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2664)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2788)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1816)
        at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1730)
        at org.apache.jsp.insert_jsp._jspService(insert_jsp.java:75)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1852)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:619) 
```

**询问 -**

```
int i=st.executeUpdate ("insert into  issue_creating(issue_id,case_title,Problem_Submit,Problem_De‌​scr,) values('"+Issue_ID+"','"+Case_Title+"','"+Problem_Submit+"',‌​'"+Problem_Descr+"')‌​"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-12T15:02:16.603

您应该以格式良好的插入语句组织查询。

1.  这里不应该有任何额外的逗号（，） - **Problem_De‌​scr，**

它应该是 -

```
int i=st.executeUpdate (
"insert into issue_creating(issue_id,case_title,Problem_Submit,Problem_De‌​
scr) values('"+Issue_ID+"','"+Case_Title+"','"+Problem_Submit+"',‌​
'"+Problem_Descr+"')‌​"); 
```

以后请使用[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)以避免此类问题。

我希望这将有所帮助。

# c++ - C 和 C++ 的不同行为

> ID：15636680
> 
> 赞同：4
> 
> 时间：2013-03-26T12:05:53.283
> 
> 标签：c++, c

我在 Eclipse 中使用 CDT 插件创建了两个模板项目（一个是 C 项目，另一个是 C++），并编译了两个非常相似的项目（对我而言），但我得到了完全不同的控制台输出。为什么这个输出如此不同？C代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int numbers[5];
      int * p;
      p = numbers;  *p = 10;
      p++;  *p = 20;
      p = &numbers[2];  *p = 30;
      p = numbers + 3;  *p = 40;
      p = numbers;  *(p+4) = 50;
      int n;
      for (n=0; n<5; n++)
        printf("%c ",numbers[n]);
    return EXIT_SUCCESS;
} 
```

输出一些垃圾

C++ 代码：

```
#include <iostream>
using namespace std;

int main() {
    int numbers[5];
      int * p;
      p = numbers;  *p = 10;
      p++;  *p = 20;
      p = &numbers[2];  *p = 30;
      p = numbers + 3;  *p = 40;
      p = numbers;  *(p+4) = 50;
      for (int n=0; n<5; n++)
        cout << numbers[n] << " ";
    return 0;
} 
```

输出

10、20、30、40、50

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-26T12:08:11.183

您正在`int`像`char`在 C中一样打印。

改变

```
printf("%c ",numbers[n]); 
```

至

```
printf("%d ",numbers[n]); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-26T12:12:48.393

您正在尝试将数字输出为字符，从而导致奇数输出。代码对我来说很好。

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
int numbers[5];
  int * p;
  p = numbers;  *p = 10;
  p++;  *p = 20;
  p = &numbers[2];  *p = 30;
  p = numbers + 3;  *p = 40;
  p = numbers;  *(p+4) = 50;
  int n;
  for (n=0; n<5; n++)
    printf("%d ",numbers[n]);
return EXIT_SUCCESS;
} 
```

注意 %d，而不是 %c

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-26T12:09:50.587

您打印整数的 ASCII 值。尝试

```
printf("%i", numbers[n]) 
```

代替

```
printf("%c", numbers[n]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:15:34.213

您需要 %d 打印整数和 %c 打印 C 中的字符

[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)

看看你下面的陈述

```
printf("%c ",numbers[n]); 
```

您正在使用 %c 打印 int，这是错误的。

具体来说 printf 是从 C 中借来的，并且有一些限制。printf 最常见的限制是类型安全，因为它依赖于程序员将格式字符串与参数正确匹配。来自可变参数环境的第二个限制是您不能使用用户定义的类型扩展行为。printf 知道如何打印一组类型，这就是您将从中得到的全部内容。尽管如此，它可以用于少数几件事，使用 printf 格式化字符串比使用 c++ 流更快、更简单。

# javascript - jQuery，类似导航的样式链接

> ID：15636683
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:05:59.450
> 
> 标签：javascript, jquery, navigation

查看此页面顶部的灰色 StackOverflow 链接。徽标右侧的那些。他们说“问题”、“标签”、“用户”、“徽章”和“未回答”。请注意“问题”链接是橙色的，因为您正在查看我的问题。

我有 5 个链接，当单击它们时，它们会执行 jQuery 操作。他们不会将您重定向到另一个页面。

```
<a class="english"></a>
<a class="science"></a>
<a class="languages"></a>
[ect.] 
```

我想要的只是为`selected`我点击的链接添加一个类。然后，一旦我单击另一个链接，删除第`selected`一个链接的原始类并将其添加到我单击的新链接中。

例如，如果我单击`<a class="english"></a>`，则向其添加`selected`类。

然后，当我单击 时`<a class="science"></a>`，从 中删除`selected`该类`<a class="english"></a>`并将`selected`该类添加到`<a class="science"></a>`.

提前致谢！:]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:12:37.290

像这样的东西（未经测试）：

```
$('a').click(function() {
  $('.selected').removeClass('selected'); // remove all 'selected' classes
  $(this).addClass('selected');           // add selected class to clicked item
}); 
```

请注意，这将影响**所有**锚标记。要更具体到“菜单”项目，您可能需要使用更具体的选择器`$('a')`

**编辑**

当您遇到问题时，我在[此处](http://jsfiddle.net/ak23D/)创建了此代码的小提琴。每次单击项目时，您都可以看到文本颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:09:07.293

[单击](http://api.jquery.com/click/)链接时，您可以获得[容器](http://api.jquery.com/parent/)中的所有链接，[删除](http://api.jquery.com/removeClass/)每个链接的`selected`类，然后[将](http://api.jquery.com/addClass/)`selected`类添加到刚刚`$(this)`单击的链接中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:14:57.807

您需要的 jquery 方法是 addClass 和 removeClass

```
<div class='english selectable'>English</div>
<div class='french selectable'>French</div>

$(".selectable").click(function(){
    $(".selected").removeClass("selected");
    $(this).addClass("selected");
}); 
```

在这里试试：http: [//jsfiddle.net/p4sVN/](http://jsfiddle.net/p4sVN/)

# mysql - 带有连接查询的两个表中的mysql中每个单独的id计数

> ID：15636685
> 
> 赞同：0
> 
> 时间：2013-03-26T12:06:03.793
> 
> 标签：mysql, sql, select, join

我有两张桌子，

表格1

```
id  team_id  fav_id
1    10        1
2    10        6
3    11        5
4    12        5
5    12        1
6    25        6 
```

表_2

```
league_id   team_id   name
100          10        a 
100          11        b
100          12        c
100          13        d
101          25        e 
```

我需要在单个查询中为每个in提供所有`team_id`with `league_id = 100`from`table_2`和`join`with `count`of的结果。`fav_id``team_id``table_1`

期待结果，例如，

```
league_id   team_id  name  count of(fav_id)
-------------------------------------------------
100          10       a          2
100          11       b          1
100          12       c          2
100          13       d          0 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:10:55.217

```
SELECT
    table_2.league_id,
    table_2.team_id,
    table_2.name,
    (SELECT COUNT(*) FROM table_1 WHERE table_1.team_id=table_2.team_id)
FROM
    table_2
WHERE
    table_2.league_id=100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:14:28.117

由于您想列出`team_id`没有*fav_id*的列表中的所有内容，因此您需要使用`LEFT JOIN`. 使用的原因是因为它返回两个表在连接*左侧*`LEFT JOIN`定义的所有行，无论它在右表上有匹配还是什么都没有。

 *```
SELECT  a.league_ID, a.team_ID, 
        COUNT(b.team_ID) totalFAV,
        a.Name
FROM    table2 a
        LEFT JOIN table1 b
            ON a.team_ID = b.team_ID
WHERE   a.league_ID = 100
GROUP   BY a.league_ID, a.team_ID, a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/084c0/5)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔═══════════╦═════════╦══════════╦══════╗
║ LEAGUE_ID ║ TEAM_ID ║ TOTALFAV ║ NAME ║
╠═══════════╬═════════╬══════════╬══════╣
║       100 ║      10 ║        2 ║ a    ║
║       100 ║      11 ║        1 ║ b    ║
║       100 ║      12 ║        2 ║ c    ║
║       100 ║      13 ║        0 ║ d    ║
╚═══════════╩═════════╩══════════╩══════╝ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:15:03.190

```
SELECT a.`league_id`, a.`team_id`, a.`name`, COUNT(b.id)
FROM table_2 a
LEFT JOIN table_1 b
    ON a.team_id = b.team_id
WHERE a.league_id = 100
GROUP BY a.team_id 
```

我认为那行得通。

这是一个小提琴

[http://sqlfiddle.com/#!2/e8892/2](http://sqlfiddle.com/#!2/e8892/2)*

# python - 循环是如何工作的？我在这里做错了什么？刽子手游戏

> ID：15636695
> 
> 赞同：0
> 
> 时间：2013-03-26T12:06:38.043
> 
> 标签：python, list, turtle-graphics

```
from turtle import*
from random import*

def joonista_mees(valede_pakkumiste_arv):
    if valede_pakkumiste_arv == 1:
        ht()
        up()
        right(90)
        forward(150)
        right(90)
        forward(30)
        right(180)
        down()
        forward(200)
        back(170)
        left(90)
        forward(150)
        right(90)
        forward(100)
        right(90)
    if valede_pakkumiste_arv == 2:
        forward(15)
        right(90)
        circle(15)
        left(90)
        up()
        forward(30)
        down()
    if valede_pakkumiste_arv == 3:
        forward(45)
        backward(45)
        right(45)
        forward(20)
        backward(20)
        left(90)
    if valede_pakkumiste_arv == 4:
        forward(20)
        backward(20)
        right(45)
        forward(45)
        right(30)
    if valede_pakkumiste_arv == 5:
        forward(45)
        backward(45)
        left(60)
    if valede_pakkumiste_arv == 6:
        forward(45)
        backward(45)
        right(30)
        up()
        backward(67)
    if valede_pakkumiste_arv == 7:
        right(90)
        forward(3)
        right(45)
        down()
        forward(3)
        backward(6)
        forward(3)
        right(90)
        forward(3)
        backward(6)
        forward(3)
        right(45)
        up()
        forward(6)
        left(45)
        down()
        forward(3)
        backward(6)
        forward(3)
        right(90)
        forward(3)
        backward(6)

asjad=["arvuti", "pliit", "ideed", "piimakokteil", "pilvelõhkuja", "saun", "mikrolaineahi",
       "vannituba", "niidumets", "lamminiit", "paber",]
s6na = choice(asjad)
print("Sa pead ühe sõna ära arvama.\nSul on selleks 7 võimalust\nSõna pikkus on "+str(len(s6na))+".")
s6na_pikkus = len(s6na)
max_valede_pakkumiste_arv = 7
proovitud_t2hed = ""
pakkumiste_arv_6ige = 0
valede_pakkumiste_arv = 0
arvamiste_arv_kokku = 0

while (valede_pakkumiste_arv != max_valede_pakkumiste_arv) and (pakkumiste_arv_6ige != s6na_pikkus):
    t2ht = input("Paku täht:")
    t2ht.strip().upper()
    print("Pakkusid tähte '"+t2ht+"'.")
    if len(t2ht) == 1 and t2ht.isalpha():
        if proovitud_t2hed.find(t2ht) != -1:
            print("Sa oled juba seda tähte '" + t2ht + "' juba valinud.")
        elif s6na.count(t2ht) >= 1:
            print("See täht '" + t2ht + "' on selles sõnas olemas.")
            proovitud_t2hed += t2ht
            pakkumiste_arv_6ige += int(s6na.count(t2ht))
            arvamiste_arv_kokku += 1
        else:
            print("See täht '" + t2ht + "' ei ole selles sõnas olemas.")
            proovitud_t2hed += t2ht
            valede_pakkumiste_arv += 1
            joonista_mees(valede_pakkumiste_arv)
            arvamiste_arv_kokku += 1
else:
    print("Sa pead kirjutama ainult ühe tähe.")

for t2ht in s6na:
    if t2ht in proovitud_t2hed:
        print(t2ht)
    else:
        print("_")

print("\nSeni proovitud tähed: " + proovitud_t2hed + ".\n")

if valede_pakkumiste_arv == max_valede_pakkumiste_arv:
    print("Mäng läbi!")
    break
if pakkumiste_arv_6ige == s6na_pikkus:
    print("\nArvasid kõik tähed selles sõnas ära.\nSee sõna oli '"+s6na+"'.")
    break

input("\nVajuta ENTER, et väljuda...") 
```

这是我的编程课程项目。显然，它已完成并按预期工作，但有一个小问题。顺便说一句，这是刽子手，你可能知道这个游戏。所以，它在运行时看起来像这样......它是爱沙尼亚语，但我当然希望你能理解，因为我不想翻译这个。s6na = 单词，t2ht = 字母，proovitud_t2hed = Tryd_letters

```
Sa pead ühe sõna ära arvama.
Sul on selleks 7 võimalust
Sõna pikkus on 9.
Paku täht:l
Pakkusid tähte 'l'.
See täht 'l' ei ole selles sõnas olemas.
_
_
_
_
_
_
_
_
_

Seni proovitud tähed: l.

Paku täht:n
Pakkusid tähte 'n'.
See täht 'n' on selles sõnas olemas.
n
_
_
_
_
_
_
_
_

Seni proovitud tähed: ln. 
```

但我希望它看起来像这样。

```
n _ _ _ _ _ _ _ _ 
```

我是 Python 新手，所以请帮我解决这个问题。我只是不喜欢这种程序的外​​观，而且它占用太多空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:08:52.910

您需要告诉`print`在每个打印行之后使用空格而不是换行符：

```
if t2ht in proovitud_t2hed:
    print(t2ht, end=' ')
else:
    print("_", end=' ')
print() 
```

最后有一个额外`print()`的打印最后的换行符。

或者，将连接的字符串传递给`print()`：

```
print(' '.join(t2ht if t2ht in proovitud_t2hed else '_' for t2ht in s6na)) 
```

# symfony - 来自命令类的访问参数

> ID：15636700
> 
> 赞同：29
> 
> 时间：2013-03-26T12:07:03.647
> 
> 标签：symfony, service, parameters

我正在添加一个新的命令行。我想在我的类中访问参数（parameters.yml）的值。

我读到我应该将此类添加为服务以访问参数。所以

//config.yml

```
imports:
- { resource: services.yml } 
```

//服务.yml

```
services:
  less_css_compiler:
    class: MyVendor\MyBundle\Command\ThemeCommand
    arguments: [%less_compiler%] 
```

//参数.yml

```
parameters:
    less_compiler:     WinLess.exe 
```

据说通常参数在类的构造函数中，但如果我这样做：

```
public function __construct($less_compiler) {
    $this->less_compiler = $less_compiler;
} 
```

我有一个警告说缺少第一个参数。在 Command 母类中，有一个名称作为构造函数的唯一参数，但即使我写：

```
 public function __construct($name, $less_compiler) {
 } 
```

它不会改变任何东西..

其他可能性是在我的班级内调用服务：

```
$service = $this->getContainer()->get('less_css_compiler'); 
```

但我如何得到论点？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-26T12:29:58.783

简单的方法，让命令扩展 ContainerAwareCommand

```
$this->getContainer()->getParameter('parameter_name'); 
```

或者

您应该创建单独的服务类

```
$service = $this->getContainer()->get('less_css_compiler'); 
```

//服务.yml

```
services:
  less_css_compiler:
    class: MyVendor\MyBundle\Service\LessCompiler
    arguments: [%less_compiler%] 
```

在服务类中，像上面提到的那样创建构造函数

```
public function __construct($less_compiler) {
    $this->less_compiler = $less_compiler;
} 
```

从命令类调用服务。

而已。

**原因：**您将命令类本身作为服务，位命令类构造器期望命令名称作为第一个参数。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2020-01-11T11:22:38.130

我在使用 Symfony 4.4 时遇到了同样的问题。[这篇博](https://symfony.com/blog/new-in-symfony-4-1-getting-container-parameters-as-a-service)文很好地解释了这一点。如果您使用[自动装配](https://symfony.com/doc/4.4/service_container/autowiring.html)，只需更新您的代码，如下所示：

```
use Symfony\Component\DependencyInjection\ParameterBag\ParameterBagInterface;

class MessageGenerator
{
    private $params;

    public function __construct(ParameterBagInterface $params)
    {
        $this->params = $params;
    }

    public function someMethod()
    {
        $parameterValue = $this->params->get('parameter_name');
        // ...
    }
} 
```

# java - HtmlUnit 为无效的 css 生成警告

> ID：15636706
> 
> 赞同：2
> 
> 时间：2013-03-26T12:07:18.147
> 
> 标签：java, jquery, htmlunit

我们正在使用 htmlunit 进行功能测试，并且效果很好。我看到的问题之一是在构建中，它会生成一些警告消息：

```
ERROR [main] (StrictErrorReporter.java:80) - runtimeError: message=[An
invalid or illegal selector was specified (selector: '.page-container
.order-completed-selector[data-product-number=0022002]' error: Invalid
selectors: .page-container
.order-completed-selector[data-product-number=0022002]).]
sourceName=[http://localhost/resources/scripts/lib/jquery-1.7.2.js]
line=[5138] lineSource=[null] lineOffset=[0] 
```

我不确定确切的原因是什么，因为它在浏览器级别运行良好并且测试也通过了。但在我看来，它不喜欢 attribute `[data-product-number=0022002]`。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:46:53.557

您需要将数字放入引号中：

```
[data-product-number='0022002'] 
```

（我认为两者都是正确的，`"`并且`'`按照 CSS 规范应该是正确的。）

# python - 如何编写两个类似的 django 管理操作

> ID：15636708
> 
> 赞同：0
> 
> 时间：2013-03-26T12:07:23.147
> 
> 标签：python, django, django-admin

我想自定义我的 django 管理操作。我的目标是做出一个可以更新选定对象的操作，但要更新的不仅仅是一个模型或一个字段。所以我想我应该写不止一个动作，尽管这些代码非常相似。我的问题是如何编写这些动作，考虑代码重用。

例如，函数 update_module(modeladmin, request, queryset) 实现如下操作，

```
def update_module(modeladmin, request, queryset):
    ...
    form = module_form(request.POST)
    if form.is_valid():
        one = form.cleaned_data['module']
        ...
    ....
admin.site.add_action(update_module) 
```

现在我需要编写另一个动作，如下所示，

```
def update_src(modeladmin, request, queryset):
    ...
    form = src_form(request.POST)
    if form.is_valid():
        one = form.cleaned_data['src']
        ...
    ....
admin.site.add_action(update_src) 
```

如我们所见，这两个动作非常相似。是否有一些方法可以重用更多代码。也许应该使用装饰器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:15:57.313

我没有对此进行测试，但我认为它应该可以工作。

```
def update_func(model):
    def update(modeladmin, request, queryset):
        ...
        form = module_form(request.POST)
        if form.is_valid():
            one = form.cleaned_data[model]
            ...
        ...
    return update
admin.site.add_action(update_func('module'))
admin.site.add_action(update_func('src')) 
```

# r - 在R中为网格着色

> ID：15636711
> 
> 赞同：2
> 
> 时间：2013-03-26T12:07:30.477
> 
> 标签：r, colors

我想根据z的值给我画的图上色，比如这样

```
x<-y<-seq(-2*pi, 2*pi, pi/15)
f<-function(x,y) sin(x)*sin(y)
z<-outer(x,y, f)
#contour(x,y,z,col="blue")
persp(x,y,z,theta=30, phi=30, expand=0.7,col=heat.colors(25)) 
```

如果我想用彩虹色或热色给这张图片上色。颜色z值越大，颜色越深，我该怎么办，如何控制颜色集![在此处输入图像描述](../Images/f3b37169081bf3bae90ab242a76f3717.png)

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:55:28.697

除了帮助中的示例之外，您还可以使用`drape.plot`from`fields`包，默认情况下，它会根据 z 值从颜色条中分配颜色。它调用`drape.color`后跟 persp，最后将图例条添加到 image.plot。

```
ncol <- 5
library(fields)
drape.plot( x,y,z, col=rainbow(nbcol)) 
```

![在此处输入图像描述](../Images/c98ad55add068551ab5c7f768e2a5cb9.png)

# javascript - 将 Jquery id 放入带有 freemarker 列表的 javascript 数组中

> ID：15636712
> 
> 赞同：1
> 
> 时间：2013-03-26T12:07:30.623
> 
> 标签：javascript, jquery, freemarker

我动态生成一些图片：

```
<#list content.templates as template>
  <td>
    <img class="event_template" title="${template.getTemplateName()}" id="${template.getTemplateName()}" src="${template.getTemplatePicturePath()}" width="170px" height="140px"/>
  </td>
</#list> 
```

在我的 javascript 文件中，我想在一个数组中获取所有这些图片 id，以便在它们上使用 jQuery 函数等。

我尝试了以下方法：

```
var templates =  [<#list content.templates as temp>$("#"+${temp.getTemplateName()}),</#list>]; 
```

但我得到一个错误：

未捕获的错误：语法错误，无法识别的表达式：#[object HTMLImageElement]
(jquery-1.8.2.min.js:2)

有人知道出了什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:19:59.713

好吧，这就是您的问题：您将 templateName 放在引号之外，但它必须是一个字符串。

解决方案：

```
... $("#${temp.getTemplateName()}") ... 
```

# excel - 将多个图表复制到word文档

> ID：15636713
> 
> 赞同：2
> 
> 时间：2013-03-26T12:07:34.470
> 
> 标签：excel, ms-word, vba

我正在尝试将一张表中的一系列图表复制到一个 word 文档中，但由于某种原因，我只得到了最新的粘贴（意味着工作表上的最后一个图表）。我知道迭代会遍历所有图表，因为当我修改代码为每个图表打印一个单词文档时，它会这样做，但我希望图表在一起，所以请帮帮我

编码：

```
Sub ChartsToWord()

Dim WDApp As Word.Application
Dim WDDoc As Word.Document
Dim iCht As Integer
Dim Msg As String

Set WDApp = CreateObject("Word.Application")
Set WDDoc = WDApp.Documents.Add

For iCht = 1 To ActiveSheet.ChartObjects.Count
    ' copy chart as a picture
    ActiveSheet.ChartObjects(iCht).Chart.CopyPicture _
        Appearance:=xlScreen, Size:=xlScreen, Format:=xlPicture

    WDDoc.Content.PasteSpecial Link:=False, DataType:=wdPasteMetafilePicture, _
        Placement:=wdInLine, DisplayAsIcon:=False

    WDDoc.Content.InsertParagraphAfter
Next
WDDoc.SaveAs ("C:\Users\confidential\Documents\charts.doc")
    WDDoc.Close ' close the document

' Clean up
    Set WDDoc = Nothing
    Set WDApp = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:39:24.377

请将`PasteSpecial`行首替换为：

```
WDApp.Selection.Range.PasteSpecial ... 'and so on 
```

在您的情况下，您将图表粘贴到整个文档而不是当前段落中。

还有一个建议。您可以使用以下内容插入新段落：

```
WDApp.Selection.MoveEnd wdStory
WDApp.Selection.Move 
```

# selenium - 检查是否出现“请输入电子邮件地址”消息

> ID：15636721
> 
> 赞同：8
> 
> 时间：2013-03-26T12:08:03.597
> 
> 标签：selenium, webdriver, watir, watir-webdriver, browser-automation

给定一个简单的页面：

```
<form>
  <input type="email">
  <button>click</button>
</form> 
```

如果我在文本字段中输入任何不是电子邮件的内容并单击按钮，`Please enter an email address`则会出现消息。

有没有办法使用 Selenium 或 Watir 检查消息是否出现？据我所知，浏览器 DOM 中没有出现任何新内容。

由于该页面使用的是浏览器内置功能的电子邮件检查，因此检查是否出现错误消息是否有意义？它与检查浏览器滚动条是否工作处于同一级别。我们不再检查 Web 应用程序，而是检查平台（浏览器）。

关于 SO 的一个较早的相关问题是：[如何使用黄瓜测试 HTML5 页面中的错误条件？](https://stackoverflow.com/questions/10854357/how-do-i-test-error-conditions-in-html5-pages-with-cucumber)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:35:59.310

你可以试试这样

```
JavascriptExecutor js = (JavascriptExecutor) driver;
driver.findElement(By.cssSelector("input[type='email']")).sendKeys("asd");
Object s=js.executeScript("return document.getElementById(\"a\").validity.valid");
System.out.println(s);
driver.findElement(By.cssSelector("input[type='email']")).sendKeys("asd@gmail.com");
s=js.executeScript("return document.getElementById(\"a\").validity.valid");
System.out.println(s); 
```

以上行的输出是

```
false
true 
```

因此，基于此，您可以得出给定值是否有效的结论。

下面的javascript逻辑将根据字段的有效性返回真/假

```
document.getElementById(\"a\").validity.valid 
```

Ps：我假设输入标签的 id 为“a”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T21:24:10.203

我同意这开始接近“测试浏览器”了验证，这是你可以验证的。

[在网络艺术方面有](http://www.the-art-of-web.com/html/html5-form-validation/#.UVIWfFtATu0)一些很好的背景

浏览器端验证是由特定输入类型（您可以通过 watir 的`.type`方法检查）和新`required`属性（可能更难检查）的组合触发的Watir 中的功能。我想我们可以使用一种`.required?`方法，该方法应该支持所有支持新“必需”属性的输入元素，并且如果存在“必需”属性，则返回 true。

因此，目前您可以做的是，如果您知道您在支持此功能的 HTML5 浏览器上运行，您可以检查输入类型是否为“电子邮件”以及是否存在“必需”属性。（我不知道如何做到这一点，但也许其他人可以提出一种方法）。

要确定的另一件事是提供无效值，并确保表单不允许自己被提交。例如，验证是强制执行的，还是仅仅是建议性的。（并且不要忘记通过使用 curl 或 httparty 之类的方式提交无效数据来检查服务器端，因为敌对用户可以轻松绕过任何浏览器验证并提交带有虚假甚至“敌对”值的表单以导致缓冲区溢出或注入攻击。任何站点都不应完全依赖客户端验证。）

当然要考虑的另一件事是，如果用户使用的浏览器不支持该特定验证功能，那么页面会做什么？我假设某种客户端 javascript 和显示的消息。

在这种情况下，它实际上取决于消息“出现”的方式。在我正在测试的应用程序中，这类消息恰好位于一个方便的 div 中，这些 div 具有由 css 控制的独特类，通常被隐藏，然后在客户端 JS 检测到需要显示消息时设置为显示用户。所以当然我有类似的东西的测试。这是同意我们的条款和条件的人的示例。（注意：我们使用 Cucumber 和 Test-Factory gem 来做页面对象和数据对象）

让我们从消息开始，以及 right-click.examine-element 揭示的内容

![我们注册页面上显示的消息](../Images/729d7052079de8f18222b6441b5349a8.png)

文件上的场景`grower_selfregister.feature`是这样的

```
Scenario: self registering grower is required to agree to terms and conditions
  Given I am a unregistered grower visiting www.climate.com
  When I try to self-register without agreeing to the terms and conditions
  Then I am informed that Acceptance of the terms and conditions is required
  And I remain on the register page 
```

Cucumber 的关键步骤是：

```
When /^I try to self-register without agreeing to the terms and conditions$/ do
  @my_user.self_register(:agree_to_terms => FALSE)
end

Then /^I am informed that Acceptance of the terms and conditions is required$/ do
  on Register do |page|
    page.agree_to_terms_required_message.should be_visible
  end
end

Then /^I remain on the register page$/ do
  on Register do |page|
    #ToDo change this to checking the page title (or have the page object do it) once we get titles
    page.url.should == "#{$test_site}/preso/register.html"
  end
end 
```

`register.rb`页面对象的相关部分是

```
class Register < BasePage

  #bunch of other element definitions removed for brevity

  element(:agree_to_terms_required_message) {|b|b.div(:class => "terms-error")}

end 
```

这有助于提供一个例子吗？

注意：很容易认为第二次验证（留在页面上）是多余的，因为如果我不在页面上，我不太可能看到该消息。但它增加了场景中描述的预期用户体验的清晰度此外，如果实施更改位置可能非常重要，例如，如果决定使用类似 javascript 警报之类的东西，那么验证这一点可能很重要一旦被解雇（“我看到消息”步骤可能会做的事情），用户无论如何都没有进入该网站。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-09T20:59:08.503

我还没有找到检查实际错误消息的方法。`:invalid`但是，您可以使用CSS 伪选择器在输入非电子邮件后检查输入字段是否无效。

```
WebElement invalidInput = driver.findElement(By.cssSelector("input:invalid"));
assertThat(invalidInput.isDisplayed(), is(true)); 
```

# iphone - 将图像添加到 plist

> ID：15636722
> 
> 赞同：1
> 
> 时间：2013-03-26T12:08:06.360
> 
> 标签：iphone, ios, objective-c, ios5, plist

我正在制作一个应用程序，我使用相机拍照并希望将这些照片保存在 plist 上，以便将来使用。我还想从 plist 中检索保存的图像并将它们显示在 imageview 上。有多个图像。请任何人都可以帮助我

这是我用于添加到 plist 的代码

```
imageArray addObject:[NSString stringWithFormat:@"%@",imageView.image]];

[imageArray writeToFile:plistPath atomically:YES]; 
```

但是当我试图检索图像并将其设置在 imageview 上时，我看不到图像。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:15:02.163

您不能像这种方法一样保存到 plist。支持的格式是 NSData、NSString、NSArray、NSDictionary、NSDate 和 NSNumber。您可以将 UIImage 转换为 NSData 并可以写入 plist。

将图像转换为 NSData

```
NSData *data = UIImagePNGRepresentation(imageview.image);
[imageArray addObject:data];
[imageArray writeToFile:plistPath atomically:YES]; 
```

以及 NSLog 您的文件路径以查找 yoyr plist 的保存位置。

希望这可以帮助 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:17:22.123

看到这个，

为了节省：

```
- (IBAction)saveImage {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];
    UIImage *image = imageView.image; // imageView is my image from camera
    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:NO];   
} 
```

对于检索：

```
- (IBAction)getImage {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent:@"savedImage.png"];
    UIImage *img = [UIImage imageWithContentsOfFile:getImagePath];
} 
```

# jbpm - jbpm 5 通过bpmn文件创建Process实例并获取任务详情

> ID：15636725
> 
> 赞同：0
> 
> 时间：2013-03-26T12:08:12.627
> 
> 标签：jbpm

通过 bpmn 文件创建 processInstnace 并希望在创建后获取任务时，我收到以下异常。下面是堆栈跟踪。

```
java.lang.NoSuchMethodError: org.drools.marshalling.impl.MarshallingConfigurationImpl.getObjectMarshallingStrategyStore()Lorg/drools/marshalling/ObjectMarshallingStrategyStore;
at org.jbpm.task.utils.ContentMarshallerHelper.marshal(ContentMarshallerHelper.java:54)
at org.jbpm.process.workitem.wsht.AbstractHTWorkItemHandler.createTaskContentBasedOnWorkItemParams(AbstractHTWorkItemHandler.java:164)
at org.jbpm.process.workitem.wsht.GenericHTWorkItemHandler.executeWorkItem(GenericHTWorkItemHandler.java:179)
at org.drools.process.instance.impl.DefaultWorkItemManager.internalExecuteWorkItem(DefaultWorkItemManager.java:73)
at org.jbpm.workflow.instance.node.WorkItemNodeInstance.internalTrigger(WorkItemNodeInstance.java:101)
at org.jbpm.workflow.instance.impl.NodeInstanceImpl.trigger(NodeInstanceImpl.java:122)
at org.jbpm.workflow.instance.impl.NodeInstanceImpl.triggerConnection(NodeInstanceImpl.java:185)
at org.jbpm.workflow.instance.impl.NodeInstanceImpl.triggerCompleted(NodeInstanceImpl.java:150)
at org.jbpm.workflow.instance.node.StartNodeInstance.triggerCompleted(StartNodeInstance.java:49)
at org.jbpm.workflow.instance.node.StartNodeInstance.internalTrigger(StartNodeInstance.java:41)
at org.jbpm.workflow.instance.impl.NodeInstanceImpl.trigger(NodeInstanceImpl.java:122)
at org.jbpm.ruleflow.instance.RuleFlowProcessInstance.internalStart(RuleFlowProcessInstance.java:35)
at org.jbpm.process.instance.impl.ProcessInstanceImpl.start(ProcessInstanceImpl.java:188)
at org.jbpm.workflow.instance.impl.WorkflowProcessInstanceImpl.start(WorkflowProcessInstanceImpl.java:302)
at org.jbpm.process.instance.ProcessRuntimeImpl.startProcess(ProcessRuntimeImpl.java:124)
at org.drools.common.AbstractWorkingMemory.startProcess(AbstractWorkingMemory.java:1099)
at org.drools.impl.StatefulKnowledgeSessionImpl.startProcess(StatefulKnowledgeSessionImpl.java:302)
at com.sample.TaskServiceMinaSyncTest.regularFlowTest(TaskServiceMinaSyncTest.java:108)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

java.lang.NullPointerException
at com.sample.BaseTest.tearDown(BaseTest.java:94)
at com.sample.TaskServiceMinaSyncTest.tearDown(TaskServiceMinaSyncTest.java:73)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:36)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我正在使用以下代码片段：

```
KnowledgeBase kbase = readKnowledgeBase();
    StatefulKnowledgeSession ksession = kbase.newStatefulKnowledgeSession();
    GenericHTWorkItemHandler htHandler = createTaskHandler(ksession);
    ksession.getWorkItemManager().registerWorkItemHandler("Human Task",htHandler);

    Map<String, Object> params = new HashMap<String, Object>();
    params.put("employee", "ABC");
    ksession.startProcess("com.sample.bpmn.hello", params);
    System.out.println("Process started ...");

 //Creates a local task service and attaches it to a human task handler
    public GenericHTWorkItemHandler createTaskHandler(StatefulKnowledgeSession ksession) {
        TaskService ts = new TaskService(Persistence.createEntityManagerFactory("org.jbpm.task"),
                SystemEventListenerFactory.getSystemEventListener());
        LocalTaskService taskService = new LocalTaskService(ts);
        LocalHTWorkItemHandler taskHandler = new LocalHTWorkItemHandler(taskService, ksession);
//        taskHandler.connect();
        this.service = taskService;
        return taskHandler;
    } 
```

我使用了以下罐子（附截图）：

![在此处输入图像描述][1]

在 startProcess 行上收到此错误。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T02:40:55.807

看来您使用的 jBPM 和 Drools 版本不匹配。您使用的是哪个版本的 jBPM？假设您使用的是 jBPM 5.4，那么您应该使用 Drools 5.5 jars。

# php - PHP切换输入case 0：即使有有效的case？

> ID：15636735
> 
> 赞同：1
> 
> 时间：2013-03-26T12:08:49.317
> 
> 标签：php

以下 switch case 语句应该执行 case "january": 的值，但它正在执行 case 0: 的值，有人能告诉我为什么这样做吗？代码：

```
<?php
$a = "january";
switch ($a)
{
    case 0:
    case 3:
        echo "The value is either 0 or 3";
        break;
        echo "0/2";
        break;
    case "january":
        echo "january";
        break;
    case "march":
        echo "The value is ";
        break;
    case 2:
        echo "The value is 2";
        break;
    default:
        echo "Here is ur default message";
        break;
}
?> 
```

顺便说一句，“游行”案件也是如此……？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-26T12:11:56.697

```
$a = 'january';

var_dump($a == 0);
var_dump($a === 0);
var_dump($a == '0');
var_dump($a === '0'); 
```

输出：

```
bool(true)
bool(false)
bool(false)
bool(false) 
```

阅读[类型杂耍](http://php.net/manual/en/language.types.type-juggling.php)。[显然](http://php.net/manual/en/control-structures.switch.php) `switch`使用[松散的比较](http://www.php.net/manual/en/types.comparisons.php#types.comparisions-loose)：

> **注意：**
> 请注意 switch/case 确实[比较松散](http://www.php.net/manual/en/types.comparisons.php#types.comparisions-loose)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:14:35.997

PHP 存在一些可能导致这种行为的问题，在这种情况下，问题来自您在 Switch 上使用不同类型的事实。

试试这个代码：

```
echo (0 == "january") ? "true\n" : "false\n"; // Echoes true 
```

解决此问题的一种方法是仅在交换机上使用字符串，如下所示：

```
switch ($a)
{
    case "0":
    case "3":
        echo "The value is either 0 or 3";
        break;
        echo "0/2";
        break;
    case "january":
        echo "january";
        break;
    case "march":
        echo "The value is ";
        break;
    case "2":
        echo "The value is 2";
        break;
    default:
        echo "Here is ur default message";
        break;
} 
```

这可以正常工作，因为 0 == "0" 但 "january" != "0"

Switch 使用简单的 == 将变量的值与每种情况下的值进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:15:14.123

您需要在数字周围加上引号。使用 switch 语句时不能混合数字和字符串。

# php - 如何使用 DOMdocument 获取“innerContent”？

> ID：15636739
> 
> 赞同：1
> 
> 时间：2013-03-26T12:08:55.723
> 
> 标签：php, dom, innerxml

我需要一个类似`InnerHTML`节点的东西，它非常简单，也许我不知道如何使用`childNodes`......我需要一些函数来接收带有根的节点（DOMElement 或 DOMNode），并输出（DOM-XML 对象或 XML 字符串值）填充。所以，它是一个“DOMnode node-root remover”。

使用 PHP 和正则表达式的解决方法示例：

```
 function xsl_getInner($ele) {
    // not works with $ele->childNodes
    $xml = $ele->ownerDocument->saveXML($ele);
    return preg_replace('/^<([a-zA-Z0-9_\-])\s?[^>]*>(.*?)</\1>$/s','$2',$xml);
 } 
```

* * *

相关问题：[如何使用 DomDocument 方法更改节点的根？](https://stackoverflow.com/q/15646757/287948)

# wcf - 在异步操作中关闭 WCF 客户端

> ID：15636745
> 
> 赞同：0
> 
> 时间：2013-03-26T12:09:35.977
> 
> 标签：wcf, asynchronous

我有以下代码，它异步调用 WCF 服务：

```
var client = new MyServiceClient();
Task.Factory.FromAsync(client.BeginDo, client.EndDo, request, null).ContinueWith(t => {
    //process t.Result
}); 
```

在这种情况下，处置服务客户端实例的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:09:35.977

要考虑的两种变体。两者都应该放在延续块的开头。

1.

```
try
{
    client.Close();
}
catch (CommunicationException e)
{
    client.Abort();
}
catch (TimeoutException e)
{
    client.Abort();
}
catch (Exception e)
{
    client.Abort();
    throw;
} 
```

2.

```
if (client.State == CommunicationState.Faulted)
    client.Abort();
else
    client.Close(); 
```

# latitude-longitude - OpenStreetMaps 和 Postgis：地理点的纬度和经度错误

> ID：15636751
> 
> 赞同：1
> 
> 时间：2013-03-26T12:09:50.490
> 
> 标签：latitude-longitude, postgis, openstreetmap, srid

我下载了 italy.osm 文件并使用 postgis 导入到 postgresql。

所以我尝试从表planet_osm_point的“方式”（几何）字段中提取纬度和经度，使用函数ST_X（），ST_Y（），这些是我通过查询中心点得到的坐标米兰城。

X: 1025988.29850153 Y: 5709056.87437553

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:48:06.873

数据需要投影到WGS84：

```
SELECT ST_Y(ST_Transform(way, 4326)) AS lat, ST_X(ST_Transform(way, 4326)) AS long
FROM planet_osm_point; 
```

*不要*安装来自 spatialreference.org（即`srid=94326`）的空间参考，因为在空间启用数据库时您应该已经拥有它。如果`srid=4326`不存在，那么当您在空间上启用数据库时存在问题或跳过了步骤。

# java - 如何使用java对数字进行聚类

> ID：15636757
> 
> 赞同：-2
> 
> 时间：2013-03-26T12:09:55.330
> 
> 标签：java

我需要你的帮助来建议我的代码哪里出错了。实际上，我想要的是使用文档对形成集群。我的文本文件中有近 1000 对数字，因此它必须将第一对作为输入并将其存储在一个数组中，现在它应该采用第二对并检查是否存在任何一个元素。如果数组中只存在一个元素，则必须将另一个元素添加到同一个数组中。如果这两个元素都不存在于数组中，则必须将它们存储在新数组中。

样本输入：
(23,7)
(11,23)
(1,5)
(67,5)
(34,17)

输出：
（23,7,11）
（1,5,67）
（34,17）

我的问题是我无法从文本文件中获取输入，因为它是整数，但要拆分文本文件，它应该是字符串。我的第二个问题是我无法将它存储在另一个数组中。声明数组后，元素将被覆盖。dis 是我编写的代码，用于将数字存储在数组列表中，但我无法将元素存储在另一个数组中，我不知道在哪里声明新的数组列表

```
ArrayList a = new ArrayList();
a.add(i);
a.add(j);
if (!a.contains(i) && !a.contains(j))
{
    a.add(i);
    a.add(j);
    System.out.println("the cluster is" +a);
}
else if(a.contains(i) && !a.contains(j))
{
    a.add(j);
    System.out.println("the cluster is" +a);
}
else if(!a.contains(i) && a.contains(j))
{
    a.add(i);
    System.out.println("the cluster is" +a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:46:44.377

1）它们是整数并不重要。为此，您上面的“i”和“j”变量可以是字符串。2）您的单个 ArrayList 将永远不会保存此类信息。有一些选项需要考虑，但最直接的方法是 array-of-arrays: `ArrayList<ArrayList<String>> pairs = new ArrayList<ArrayList<String>> ();`。在这种情况下，外部列表的每个元素都是一个字符串数组 - 与您想要的输出相同。然后，您的代码将看起来更像这样：

```
// For each inner array in the outer array,
//    check to see if it contains either, neither, or both of i or j 
//    If it contains one, add the other to the inner array
//    Else if it contains neither, make a new array of strings and add that to the outer array 
```

试试看，如果你再次卡住，回来问。

# android - 在运行时控制启动器图标可见性

> ID：15636759
> 
> 赞同：1
> 
> 时间：2013-03-26T12:10:06.080
> 
> 标签：android, android-intent

我有一个应用程序，它在设备启动器屏幕中显示三个单独的活动图标。

是否可以根据运行时在其中一个活动屏幕中选择的设置来切换几个启动器图标的可见性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:08:25.060

您可以使用[`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html)：

```
import android.content.ComponentName;
import android.content.pm.PackageManager;

public static void enableComponent(Context context, Class<?> componentClass,
        boolean enabled) {
    PackageManager pm = context.getPackageManager();
    pm.setComponentEnabledSetting(
            new ComponentName(context, componentClass),
            enabled ? PackageManager.COMPONENT_ENABLED_STATE_ENABLED
                    : PackageManager.COMPONENT_ENABLED_STATE_DISABLED,
            PackageManager.DONT_KILL_APP);
} 
```

（`YourActivity.class`用于第二个参数`componentClass`）。

请注意，旧的 Android 需要重启才能生效。我在 Android 4.x 上进行了测试，并立即应用。

# windows-8 - UI测试和压力测试

> ID：15636760
> 
> 赞同：1
> 
> 时间：2013-03-26T12:10:07.657
> 
> 标签：windows-8

我发现了很多关于现代 UI 应用程序的 UI 自动化的参考资料。但我不是在寻找一种记录点击/触摸路径的方法，而不是一个只模拟随机输入（从单点触控到多点触控）的程序。某种程度上可以与 Microsoft Pixelsense 可用的压力测试工具相媲美。有人知道工具吗？

# android - Android Fragment 替换问题

> ID：15636762
> 
> 赞同：0
> 
> 时间：2013-03-26T12:10:11.180
> 
> 标签：android, fragment, replace

我正在使用以下布局进行片段交易。我正在使用以下代码将**片段**1 替换为 新片段。我还附上了布局文件以供您参考。我正在为每个列表项单击执行以下代码。

**代码：**

```
 Fragment newFragment = new Grades();
                      android.app.FragmentTransaction transaction = getFragmentManager().beginTransaction();

                          // Replace whatever is in the fragment_container view with this fragment
                       transaction.replace(R.id.fragment1, newFragment);

                          // Commit the transaction
                       transaction.commit();
Fragment newFragment = new Teachers();
                      android.app.FragmentTransaction transaction = getFragmentManager().beginTransaction();

                          // Replace whatever is in the fragment_container view with this fragment
                       transaction.replace(R.id.fragment1, newFragment);

                          // Commit the transaction
                       transaction.commit();
<LinearLayout
                android:id="@+id/slidingPanel"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="left"
                android:orientation="vertical"
                android:background="@android:color/white" 

                >

 <fragment
                    android:id="@+id/fragment1"
                    android:name="com.example.slideoutmenu.Item3"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" /> 

</Linearlayout> 
```

我的疑问是我应该在每次显示新片段时都替换**片段**1，还是应该替换现有片段，如果是这样，我该如何替换现有片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T04:30:29.253

要替换片段：-

```
FragmentTransaction fragmentTransaction  = getFragmentManager().beginTransaction(); 
YourFragment yourFragment = new YourFragment();
fragmentTransaction.replace(R.id.top_layout, yourFragment ); // top_layout is parent layout / viewgroup where you want to place your new fragment
fragmentTransaction.commit(); 
```

# git - 如何从 svn 中删除 .git 文件？

> ID：15636765
> 
> 赞同：2
> 
> 时间：2013-03-26T12:10:19.823
> 
> 标签：git, svn

我创建了一个带有 git 存储库选项集的 iOS 项目。后来我不得不搬到 SVN。.git 文件夹在我添加到 SVN 时没有被删除。现在我删除了 .git 文件夹。但是当我尝试从 SVN 存储库中删除它时，我收到以下错误：

**提交失败（详情如下）：“/Users/user1/Development/Source code/Working Copy/Sample Project/.git”的条目没有 URL**

如何从存储库中删除 .git 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:20:05.260

您需要使用`svn`命令删除文件/目录，*而不是*先手动删除它。

因此，首先使用还原您的工作副本`svn update`，然后使用`svn rm .git`正确删除 .git 目录。

接下来，您可以提交您的更改。

# iphone - 带有 segues 的 UIPageViewController

> ID：15636767
> 
> 赞同：0
> 
> 时间：2013-03-26T12:10:22.930
> 
> 标签：iphone, ios, xcode, segue, pagecontrol

我正在使用带有页面控件的 UIPageViewController 来显示 3 张图片。是否可以将每张图片链接到另一个 ViewController？喜欢图片 1 -> 新闻，图片 2 -> 视频，... 感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:59:28.333

是的，您需要使图像“可触摸”，然后从那里应用 segues。要使图像可触摸是 Interface Builder 内的属性窗格中的一个选项，您需要检查`User Interaction Enabled`，然后如果我记得正确地以正常方式构建 segue。

# flash - 将巨大的形状切割成瓷砖的最佳方法？

> ID：15636769
> 
> 赞同：0
> 
> 时间：2013-03-26T12:10:38.853
> 
> 标签：flash, actionscript, actionscript-2

我有一个大的形状，用作角色移动时移动的巨型地图（角色始终保持在舞台中央）。

现在由于地图很大，我想将地图切割成只有在舞台区域内时才会显示的图块。

我的问题是，是否有一种聪明的方法可以将地图切割成相同大小的小图块，还是我需要自己选择每个图块？

形状/地图位于符号内。问题是地图太大而无法制作动画，因此为了提高性能，我只想显示当前在 x=0 和 x = 780 之间以及 y=0 和 y=400 之间的图块。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:00:53.887

优先级 #1 绝对不为屏幕外的内容创建图形对象。为游戏目的创建所有数据和所有内容，但不要将每个图块与图形对象相关联。只创建足够的图形对象来表示任何特定时刻屏幕上的内容，并将它们与开始时屏幕上的内容相关联；然后当玩家移动时，只需更改这些图形对象与哪些游戏图块相关联。这将防止您耗尽内存并快速执行其他类似操作。

您似乎在暗示游戏地图在逻辑上被划分为图块。在这种情况下，您可以执行以下操作：

```
var x:int = 0;
var y:int = 0;

for (var i:int = firstColumnInFocus; i < firstColumnInFocus + widthRange - 1; i++)
{
    for (var j:int = firstRowInFocus; j < firstRowInFocus + heightRange - 1; j++)
    {
        tileGraphics[x][y].tile = level.tiles[i][j];
        y++;
    }
    x++;
} 
```

至于为实际游戏数据结构和内容创建逻辑图块，只需创建一个包含您需要的任何内容的图块或空间对象的 2D 数组，并确保数组中元素的位置代表它们的地理位置。

我不完全确定这是否是你在说的。在某些方面，这听起来像是您在谈论已经设计为瓷砖集合的关卡，​​而在其他方面，听起来您是在谈论采用单个精灵并简单地使用瓷砖来估计多少它应该在屏幕上。在我个人看来，您或多或少都在做两者，但您的策略可能应该在某种程度上取决于实际发生的情况。

# java - Statement.RETURN_GENERATED_KEYS 使用 ON DUPLICATE KEY UPDATE 返回 null

> ID：15636773
> 
> 赞同：2
> 
> 时间：2013-03-26T12:10:42.060
> 
> 标签：java, mysql, jdbc, prepared-statement

这是我的示例代码行

```
String query = "INSERT INTO tb_product_group values(?,?,?,?,?) ON DUPLICATE KEY UPDATE prg_name = values(prg_name)";
stmtGroups = con.prepareStatement(query,Statement.RETURN_GENERATED_KEYS);
stmtGroups.setInt(index++, java.sql.Types.NULL);
stmtGroups.setString(index++, "");
stmtGroups.setString(index++, str[1]);
stmtGroups.setString(index++, str[2]);
stmtGroups.setInt(index++, oprDto.getId());
System.out.println(stmtGroups);
ResultSet rs = stmtGroups.getGeneratedKeys();
if (rs.next()){
    groupID = rs.getLong(1);
} 
```

当我第一次插入像 (null,"1","1","1",1) 之类的数据时；我得到一个带有新生成 ID 的 groupID。但是第二次我尝试添加由于唯一键约束而触发 UPDATE 语句的相同数据。那时我将 groupID 设为空。

我尝试 REPLACE INTO tb_product_group values(?,?,?,?,?) 但也将 null 作为生成的密钥。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:27:47.023

尝试

```
INSERT INTO tb_product_group values(?,?,?,?,?) ON DUPLICATE KEY UPDATE
prg_name = values(prg_name), id = last_insert_id(id) 
```

替换`id`为您的 auto_increment 列的名称。

编辑：我没有用java api尝试过这个，所以可能还有另一个问题。

# php - 将php中的字符串拆分为数组

> ID：15636776
> 
> 赞同：-2
> 
> 时间：2013-03-26T12:10:56.840
> 
> 标签：php, arrays, split

我有一个字符串

`pid1+2+price1+20+qty1+2+pid2+3+price2+20+qty2+1+`

这是一些处理的结果......我需要创建应该像的数组

```
pid1->2
price1->20
qty1->2(first array)

pid2->2
price2->20
qty2->2(Second array) 
```

我尝试使用爆炸，但没有实现...谢谢

上面的字符串是由代码创建的

```
$a = var_export($_REQUEST);
foreach ($_REQUEST as $key=>$value) 
{
    $a = $key . "+" . $value . "+";
    echo $a;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:21:44.137

尝试这个 ：

```
$str  = "pid1+2+price1+20+qty1+2+pid2+3+price2+20+qty2+1+";

preg_match_all('/(?P<var>\w+)\+(?P<digit>\d+)/',$str,$macth);
$res   = array_chunk(array_combine($macth['var'],$macth['digit']),3,TRUE);

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [0] => Array
        (
            [pid1] => 2
            [price1] => 20
            [qty1] => 2
        )

    [1] => Array
        (
            [pid2] => 3
            [price2] => 20
            [qty2] => 1
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:19:59.863

```
$string = "pid1+2+price1+20+qty1+2+pid2+3+price2+20+qty2+1+";
$parts = explode ('+' , $string);

$data = array();
$c = 0;
for ($i = 0; $i < sizeof($parts); $i++) {
$data[$c][$parts[$i]] = $parts[++$i];
$data[$c][$parts[++$i]] = $parts[++$i];
$data[$c][$parts[++$i]] = $parts[++$i];
$c++;
}
echo '<pre>';
var_dump($data);
echo '</pre>'; 
```

可以这样做。

输出为： // 使用 rtrim($string, '+')，避免最后一个空数组

```
array(3) {
  [0]=>
  array(3) {
    ["pid1"]=>
    string(1) "2"
    ["price1"]=>
    string(2) "20"
    ["qty1"]=>
    string(1) "2"
  }
  [1]=>
  array(3) {
    ["pid2"]=>
    string(1) "3"
    ["price2"]=>
    string(2) "20"
    ["qty2"]=>
    string(1) "1"
  }
  [2]=>
  array(1) {
    [""]=>
    NULL
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T12:17:29.333

如果您可以更改创建 $a 的方式，请执行以下操作：

```
foreach($_REQUEST as $key=>$value) 
    $a[$key]=$value; 
```

如果您必须按原样工作`$a`，请执行以下操作：

```
$a = explode('+',$a);
$max = count($a);

for ($i = 0; $i < $max; $i += 2)

    $b[$a[$i]] = $a[$i+1];

var_dump($b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:22:41.510

所以这是我的解决方案：您可以使用 explode 按`+`字符拆分字符串，然后将每个值交替作为新数组的键和值。

```
$str = 'pid1+2+price1+20+qty1+2+pid2+3+price2+20+qty2+1+';
$split = explode("+",$str);
$final = array();
$lastKey = '';
foreach ($split as $index => $value) {
  if ($value){ // don't store empty values
    if ($index % 2 == 0){ // this is the alternation (odd/even index)
      $lastKey = $value;  // save the key for the next value
      $final[$value] = ''; // initialize the element for the next value
    }else{
      $final[$lastKey] = $value; // set the value for the previous key
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T12:34:16.837

你可以试试这个

```
<?php
//$_REQUEST Array is here termed as $reqArr
$reqArr['pid1'] = '2';
$reqArr['price1'] = '20';
$reqArr['qty1'] = '1';
$reqArr['pid2'] = '3';
$reqArr['price2'] = '40';
$reqArr['qty2'] = '2';

$loopCount = sizeof($reqArr)/3; // 3 is the count of items per array (ie pid, price & qty here)
for($i = 1; $i <= $loopCount; $i++) {
    $finalArr[$i]['pid'.$i] = $reqArr['pid'.$i];
    $finalArr[$i]['price'.$i] = $reqArr['price'.$i];
    $finalArr[$i]['qty'.$i] = $reqArr['qty'.$i];
}
echo '<pre>';
print_r($finalArr);
?> 
```

结果将是

```
Array
(
    [1] => Array
        (
            [pid1] => 2
            [price1] => 20
            [qty1] => 1
        )

    [2] => Array
        (
            [pid2] => 3
            [price2] => 40
            [qty2] => 2
        )

) 
```

# c# - 无法使用 Nhibernate 为 SQL Server CE 创建架构

> ID：15636779
> 
> 赞同：3
> 
> 时间：2013-03-26T12:11:00.863
> 
> 标签：c#, nhibernate, fluent-nhibernate, sql-server-ce

当我使用 Nhibernate 和以下代码为 SQL Server CE 创建架构时：

```
Fluently.Configure()
            .Database(MsSqlCeConfiguration.Standard
            .ConnectionString(c => c.Is("Data Source=" + file))
            .Dialect<NHibernate.Dialect.MsSqlCeDialect>()
            .Driver<NHibernate.Driver.SqlServerCeDriver>()
            .ShowSql())
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<NHibernateSessionFactory>())
            .ExposeConfiguration(BuildSchema)
            .BuildSessionFactory();  

private static void BuildSchema(Configuration config)
    {
       // new SchemaExport(config).Drop(false, true);
        //new SchemaExport(config).Create(true, true);

         //If DB File does not exists, create it.
        if (!File.Exists(file))
        {
            Directory.CreateDirectory(Path.GetDirectoryName(databaseFileName));
            SqlCeEngine engine = new SqlCeEngine("Data Source="+ file);
            engine.CreateDatabase();
            // this NHibernate tool takes a configuration (with mapping info in)
            // and exports a database schema from it
            new SchemaExport(config).Execute(false, true, false);
            //FormulasDAO.AddDefaultFormulaCollection();
        }
        else
        {
            new SchemaUpdate(config).Execute(false, true);
        }
    } 
```

我有一个这样的例外

> 创建 SessionFactory 时使用了无效或不完整的配置。检查 PotentialReasons 集合和 InnerException 了解更多详细信息。

内部异常是

> 找不到程序集 System.Data.SqlServerCe 中的 IDbCommand 和 IDbConnection 实现。确保程序集 System.Data.SqlServerCe 位于应用程序目录或全局程序集缓存中。如果程序集在 GAC 中，请使用应用程序配置文件中的元素来指定程序集的全名。

帮助解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T11:51:22.640

实际上问题是，在 GAC 中有 2 个版本的 dll，所以 Nhibernate 不知道需要使用哪个 dll，因为 NHibernate 仅使用 dll 名称从 GAC 获取 dll，而不使用版本名称。

所以需要在 AppConfig 中告诉 NHibernate

```
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
<qualifyAssembly partialName="System.Data.SqlServerCe" fullName="System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
</assemblyBinding> 
```

# php - php 为 DataTables 创建和填充多维数组

> ID：15636781
> 
> 赞同：1
> 
> 时间：2013-03-26T12:11:12.347
> 
> 标签：php

我正在使用 DataTables，它需要 JSON 对象的特定格式才能填充表。

它应该如下所示：

```
{"aaData": [
        [ "Trident", "Internet Explorer 5.1", "Win 95+", 4, "X" ],
        [ "Trident", "Internet Explorer 5.0", "Win 95+", 5, "C" ],
        [ "Trident", "Internet Explorer 5.5", "Win 95+", 5.5, "A" ],
        [ "Trident", "Internet Explorer 6.0", "Win 98+", 6, "A" ],
        [ "Trident", "Internet Explorer 7.0", "Win XP SP2+", 7, "A" ]
} 
```

我已经尝试了数百种不同的方法，但无法得到类似于上面的内容，因此 DataTables 不接受它。

这是我最近的尝试之一：

```
$aaData["aaData"] = array(array());
$i=0;
while($r= mysql_fetch_assoc($sql)){
    $aaData[$i][] = $r["data1"];
            $aaData[$i][] = $r["data2"] ;
            $aaData[$i][] = $r["data3"] ;
    $aaData[$i][] = $r["data4"] ;
            $aaData[$i][] = $r["data5"] ;

            $i++;
}
$aaData=json_encode($aaData);
echo $aaData; 
```

这给了我来自服务器的 JSON 响应（由 Firebug 验证），如下所示：

```
{"aaData":[
[]],
"0":["data1","data2","data3","data4","data5"],
"1":["data11","data21","data31","data41","data51"],
etc.....]
} 
```

所以，我不需要密钥（0,1...），也不需要“[]]”的东西。我确实在这里和任何地方都看过类似的帖子，但没有找到任何对我有帮助的东西。我怎样才能摆脱它们？感谢你的协助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:14:26.570

用这个

```
$aaData["aaData"] = array();
//$i=0;
while($r= mysql_fetch_assoc($sql)){
    $arr= array();
    $arr[] = $r["data1"];
    $arr[] = $r["data2"] ;
    $arr[] = $r["data3"] ;
    $arr[] = $r["data4"] ;
    $arr[] = $r["data5"] ;
    array_push($aaData["aaData"],$arr);
        //$i++;
}
$aaData=json_encode($aaData);
echo $aaData; 
```

工作示例[http://codepad.viper-7.com/gk2DO3](http://codepad.viper-7.com/gk2DO3)

# javascript - IE 对 javascript 的行为很糟糕

> ID：15636788
> 
> 赞同：-5
> 
> 时间：2013-03-26T12:11:32.140
> 
> 标签：javascript, css, internet-explorer

我自定义了我购买的主题，它在 IE 中的行为非常奇怪。:) 我记录了问题并发布在 YT 上，以便您查看：

[http://youtu.be/uG36_1WTt-k](http://youtu.be/uG36_1WTt-k)

网站是[http://test.emreza.com/?cat=4](http://test.emreza.com/?cat=4)上的临时站点，因此您可以实时查看问题所在。我认为javascript和css存在某种问题。此外，当我在 IE 中切换兼容模式时，一切正常。

知道我能用它做什么吗？

编辑：我认为这不是 javascript 这里是我使用的 css。它主要来自主题，但我添加了一些东西：

```
 /*********************************************************************************************

Theme Name: Cafe Elements
Theme URI: http://www.press75.com/
Description: Designed by Jason Schuller
Version: 2.1.4
Author: Press75.com
Author URI: http://www.press75.com/

**********************************************************************************************

Designed and Built by Jason Schuller - theSevenFive.com

CSS, XHTML and Design Files are all Copyright 2007-2010 Circa75 Media, LLC

Be inspired, but please don't steal :)

**********************************************************************************************

0\.  CSS Reset  -------------------------  All Theme Files
1\.  Basic Setup  -----------------------  All Theme Files
2\.  Header and Menu Styles  ------------  header.php
3\.  Main Content Containers  -----------  home.php, index.php, single.php, page.php
4\.  Carousel Styles  -------------------  home.php
5\.  Business Information  --------------  home.php
6\.  Category, Archive and Search Pages -  index.php
7\.  Post Content Styles ----------------  index.php, single.php, page.php
8\.  Post Comment Styles ----------------  single.php
9\.  Sidebar and Widgets  ---------------  sidebar.php
10\. Footer Styles  ---------------------  footer.php

**********************************************************************************************/

/********************************************************************************************* 

0\. CSS Reset  -------------------------  All Theme Files

*********************************************************************************************/
body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, textarea, p, blockquote, th, td {
margin: 0;
padding: 0;
}

table {
border-collapse: collapse;
border-spacing: 0;
}

fieldset, img {border: 0;}

address, caption, cite, code, dfn, em, strong, th, var {
font-style: normal;
font-weight: normal;
}

ol, ul {list-style: none;}
caption, th {text-align: left;}

h1, h2, h3, h4, h5, h6 {
font-size: 100%;
font-weight: normal;
}

q:before, q:after {content: '';}
abbr, acronym {border: 0;}

/*********************************************************************************************

1\. Basic Setup  -----------------------  All Theme Files

*********************************************************************************************/
body {
background: #323232 url(images/brck.jpg) repeat fixed;
width: auto;
height: auto;
font-family: Arial, Helvetica, Verdana, Geneva, sans-serif;
font-size: 14px;
line-height: 18px;
color: #000000;
}

h1, h1 a:link, h1 a:visited { /* For the Logo */
color: #FFFFFF;
font-size: 40px;
font-weight: normal;
margin: 0 0 5px 0;
}

h2, h2 a:link, h2 a:visited {
color: #B74718;
font-size: 18px;
font-weight: normal;
margin: 0 0 5px 0;
}

h3, h3 a:link, h3 a:visited {
color: #B74718;
font-size: 18px;
font-weight: normal;
margin: 0 0 5px 0;
}

h4 {
color: #B74718;
font-size: 14px;
font-weight: normal;
margin: 0 0 2px 0;
}

h2 a:hover, h3 a:hover, h4 a:hover {
color: #9F3F16;
}

blockquote {
padding: 0 0 0 15px;
font-style: italic;
border-left: 1px solid #CCCCCC;
}

strong {font-weight: bold;}

a:link, a:visited {
color: #003366;
}

a:hover {
color: #FFFFFF;
}

abbr,acronym {
border-bottom: 1px dotted;
cursor: help;
} 

em {font-style: italic;}
ol,ul {margin: 0;}
ol li {list-style: decimal outside;}
ul li {list-style: none;}

th,td {
border: 1px solid;
padding: 8px;
}

th {
font-weight:bold;
text-align:center;
}

caption {
margin-bottom: 8px;
text-align: center;
}

p,fieldset,table {margin-bottom: 10px;}
a:link, a:visited {text-decoration: none;}

:focus {
outline: 0;
}

.alignleft {
float: left;
}

.alignright {
float: right;
}

#logotip {
position: absolute;
top: 0px;
z-index: 10000000;
}

#social {
position: fixed;
left: -10px;
top: 200px;
}

/*********************************************************************************************

2\. Header and Menu Styles  ---------------------  header.php

*********************************************************************************************/
#header {
width: 100%;
float: left;
height: 142px;
}

#header-inside {
width: 960px;
margin: 0px auto;
padding: 40px 0 10px 0;
overflow: hidden;
}

#navigation {
background: url(images/navigation.png) center no-repeat;
width: 100%;
float: left;
font-family: "Lobster", arial, sans-serif;
font-size: 18px;
}

.navigation-inside {
width: 960px;
margin: 0px auto;
}

p.site-text {
color: #B74718;
float: left;
margin: 0;
padding: 0 0 20px 0;
}

.menu, .menu * { /* SuperFish Menu Styles */
margin: 0;
padding: 0;
list-style: none;
}

.menu {
float: right;
}

.menu a {
display: block;
position: relative;
}

.menu a, .menu a:visited  {
color: #D43E39;
}

.menu a:hover  {
color: #0B3B0B;
text-decoration:underline;
background-color:#ffffff;
}

.menu ul li {
width: 100%;
}

.menu ul {
position: absolute;
top: -15000px;
width: 160px; /* Left Offset of Sub-Menus Need to Match */
}

.menu li:hover ul, 
.menu li.sfHover ul {
left: -15px;
top: 22px; /* Match Top UL List Item Height */
z-index: 10000;
}

ul.menu li:hover li ul, 
ul.menu li.sfHover li ul {
top: -15000px;
}

ul.menu li li:hover ul, 
ul.menu li li.sfHover ul {
left: 160px; /* Match ul width. */
top: 0;
}

ul.menu li li:hover li ul, 
ul.menu li li.sfHover li ul {
top: -15000px;
}

ul.menu li li li:hover ul, 
ul.menu li li li.sfHover ul {
left: 160px; /* Match ul Width. */
top: 0;
}

.menu li {
float: left;
position: relative;
margin: 0 0 0 10px;
padding: 10px 10px 10px 10px;
}

.menu li:hover {
background-color:#ffffff;
visibility: inherit; /* Fixes IE7 Sticky Bug */
}

.menu li ul {
background: #FFFFFF;
font-size: 14px;
width: 125px;
margin: 10px 0 0 0;
padding: 10px 40px 10px 15px;
}

.menu li ul a:link, .menu li ul a:visited {
color: #555555;
}

.menu li ul a:hover {
color: #888888;
}

.menu li ul li:hover {
background: none;
}

.menu li li {
background: none;
margin: 0 0 0 0;
padding: 0 0 0 0;
text-transform: none;
}

.menu li li ul {
background: #FFFFFF;
margin: -10px 0 0 -50px;
}

.selected, .current-cat, .current_page_item {
background-color:#ffffff;
color: #D43E39;
text-decoration:underline;
}

/*********************************************************************************************

3\. Main Content Containers  -----------  home.php, index.php, single.php, page.php

*********************************************************************************************/
#content {
width: 100%;
float: left;
}

#content-inside {
background: url(images/bg1.png) repeat;
width: 920px;
margin: 0px auto;
padding: 20px 20px 0 20px;
margin-bottom: 20px;
overflow: hidden;
}

#fresh {
position: relative;
z-index: 1000000;
}
#fresh-in {
position: absolute;
top: 290px;
left: -16px;
z-index: 1000000;
}

#posts {
width: 710px;
float: left;
}

#posts-page {
width: 710px;
float: left;
}

#posts-full {
width: 940px;
float: left;
padding: 0 20px 0 0;
}

#paginate {
background: #FFFFFF;
color: #666666;
font-size: 12px;
float: left;
margin: 0 0 20px 0;
padding: 1px 8px 1px 8px;
}

#paginate a {
color: #666666;
font-weight: bold;
}

/*********************************************************************************************

4\. Carousel Styles  -------------------  home.php

*********************************************************************************************/
#featured-posts {
width: 370px;
height: 370px;
float: left;
margin: 0 0 20px 0;
}

.coda-slider, .coda-slider .panel {
background: url(images/featuredbck.png);
width: 370px;
height: 370px;
} 

.coda-slider-wrapper.arrows .coda-slider, .coda-slider-wrapper.arrows .coda-slider .panel {
width: 370px;
}

#coda-nav {
width: 370px;
position: relative;
}

.coda-nav-left a {
background: url(images/left.png) 0 0;
position: absolute;
width: 58px;
height: 102px;
top: 132px;
left: 0;
z-index: 500000;
}

.coda-nav-left a:hover {
background: url(images/left.png) 0 -102px;
}

.coda-nav-right a {
background: url(images/right.png) 0 0;
position: absolute;
width: 58px;
height: 102px;
top: 132px;
right: 5px;
z-index: 500000;
}

.coda-nav-right a:hover {
background: url(images/right.png) 0 -102px;
}

.coda-slider-wrapper {
clear: both;
overflow: auto;
}

.coda-slider {
float: left;
overflow: hidden;
position: relative;
}

.coda-slider .panel {
display: block;
float: left;
}

.coda-slider .panel-container {
position: relative;
}

.featured-post {
color: #B7B7B7;
width: 350px;
height: 350px;
margin: 10px 0 0 10px;
}

.attachment-featured {
float: left;
}

/*********************************************************************************************

5\. Business Information  --------------  home.php

*********************************************************************************************/
#welcome {
width: 300px;
float: left;
margin: 20px 20px 20px 20px;
}

#contact {
background: url(images/contact.png) top left no-repeat;
padding: 0 0 0 40px;
margin: 0 0 20px 0;
}

#hours {
background: url(images/hours.png) top left no-repeat;
padding: 0 0 0 40px;
margin: 0 0 20px 0;
}

#address {
background: url(images/location.png) top left no-repeat;
padding: 0 0 0 40px;
margin: 0 0 20px 0;
}

.number, .primary-days, .secondary-days, .street {
font-size: 18px;
font-family: "Lobster", arial, sans-serif;
color: #B74718;
}

.primary-hours {
margin-bottom: 10px;
}

/*********************************************************************************************

6\. Category, Archive and Search Pages -  index.php

*********************************************************************************************/
.post-item {
width: 680px;
float: left;
margin: 0 0 20px 0;
}

.post-thumbnail {
background: url(images/featuredbck.png);
width: 370px;
height: 370px;
float: left;
margin: 0 20px 0 0;
}

.post-thumbnail img {
padding: 10px;
}

.posted-in {
float: left;
}

.posted-in a {
background: #FFFFFF;
color: #666666;
font-size: 12px;
margin: 0 10px 0 0;
padding: 2px 8px 2px 8px;
}

.posted-in li {
margin: 0 0 10px 0;
}

/*********************************************************************************************

7\. Post Content Styles ----------------  index.php, single.php, page.php

*********************************************************************************************/
.single-post-item {
margin: 0;
}

.post-details {
width: 680px;
float: left;
margin: 0 0 20px 0;
}

ul.post-meta {
margin: 0;
}

.post-meta-post li {
padding-left: 0;
}

.post-content {
width: 680px;
float: left;
}

.post-content a {
text-decoration: underline;
}

.post-content-full { /* Full Width Pages */
width: 920px;
}

.post-content ul {
margin: 0 0 15px 15px;
}

.post-content ul li {
list-style: disc;
}

.post-content ol {
margin: 0 0 15px 20px;
}

p img {
padding: 0;
max-width: 100%;
}

.wp-caption {
background: #F6F6F6;
text-align: center;
padding: 10px 5px 5px 5px;
color: #555555;
}

.alignleft {
margin: 5px 20px 20px 0;
}

.alignright {
margin: 5px 0 20px 20px;
}

.wp-caption img {
padding: 0;
margin: 0 0 5px;
}

.wp-caption-text {
margin: 10px 0 0;
padding: 0;
}

.wp-caption .wp-caption-text, .wp-caption .wp-caption-dd {
font-size: 12px !important;
text-align: center; 
margin: 0;
padding: 0;
}

img.centered {
display: block;
margin-left: auto;
margin-right: auto;
}

img.alignright {
float: right;
padding: 5px;
margin: 0 0 2px 15px;
}

img.alignleft {
float: left;
padding: 5px;
margin: 0 15px 2px 0;
}

h4.not-here {
font-size: 14px;
}

/*********************************************************************************************

8\. Post Comment Styles ----------------  single.php

*********************************************************************************************/
#comments {
width: 670px;
float: left;
padding: 0 20px 0 0;
}

#comments-meta p {
margin: 0;
padding: 5px 0 5px 0;
}

#comments ol {
margin: 0 0 20px 0;
}

#comments ol li {
list-style: none;
}

ol.commentlist li {
background: url(images/comment.png) top left no-repeat;
padding: 10px 0 0 32px;
margin: 20px 0 20px 0;
}

ol.commentlist li.alt {
background: url(images/comment.png) top left no-repeat;
padding: 10px 0 0 32px;
margin: 20px 0 20px 0;
}

ol.commentlist li ul.children { 
list-style: none; 
text-indent: 0; 
}

ol.commentlist li ul.children li {
background: url(images/comment.png) top left no-repeat;
padding: 10px 0 0 32px;
margin: 20px 0 20px 0;
}

ol.commentlist li ul.children li.alt {
background: url(images/comment.png) top left no-repeat;
padding: 10px 0 0 32px;
margin: 20px 0 20px 0;
}

.comment-meta {
font-size: 11px;
margin: 0 0 12px 0;
}

.comment-meta a {
color: #888888; 
}

span.says {
display: none;
}

.comment-author {
font-size: 14px;
}

.avatar {
background: url(images/avatar-bg.png) repeat;
float: right;
margin: -8px 0 20px 20px;
padding: 8px;
}

div.reply {
font-size: 11px;
}

div.reply a {
background: #FFFFFF;
color: #555555;
padding: 2px 8px 3px 8px;
}

.cancel-comment-reply a {
display: none;
}

#respond {
width: 100%;
padding: 20px 0 34px 5px;
}

#author, #email, #url, #comment {
background: url(images/fields-bg.png) repeat;
border: none;
font-family: Arial, Helvetica, Verdana, Geneva, sans-serif;
font-size: 12px;
line-height: 18px;
color: #CCCCCC;
padding: 6px 10px 6px 10px;
}

#comment {
width: 98%;
max-width: 645px;
}

input#submit {
background: #FFFFFF;
border: none;
font-family: Arial, Helvetica, Verdana, Geneva, sans-serif;
font-weight: normal;
font-size: 12px;
color: #555555;
float: left;
text-align: center;
margin: 0 0 25px 0;
padding: 3px 10px 3px 10px;
cursor: pointer;
}

/*********************************************************************************************

9\. Sidebar and Widgets  ---------------  sidebar.php

*********************************************************************************************/
#sidebar {
width: 210px;
float: left;
}

.widget  {
width: 210px;
float: left;
margin: 5px 0 10px 0;
}

#featured-categories img {
background: #FFFFFF;
float: left;
margin: 0 10px 0 0;
padding: 5px;
}

#featured-categories h3 {
font-size: 14px;
margin: 0;
}

#featured-categories p {
font-size: 12px;
margin: 0;
padding: 0;
}

.featured-category {
width: 210px;
float: left;
margin: 0 0 10px 0;
}

/*********************************************************************************************

10\. Footer Styles  ---------------------  footer.php

*********************************************************************************************/
#footer {
width: 100%;
float: left;
}

#footer-inside {
width: 960px;
margin: 0px auto;
}

#featured-categories-footer {
background: url(images/bg1.png) repeat;
width: 960px;
float: left;
margin: 0 0 0 0;
padding: 20px 0 20px 0;
}

#featured-categories-footer img {
background: #128262;
float: left;
margin: 0 15px 0 0;
padding: 8px;
}

#featured-categories-infooter img {
background: #FFFFFF;
float: left;
margin: 0 0 0 10px;
padding: 8px;
}

#featured-categories-footer p {
margin: 0;
padding: 0;
}

.featured-category-footer {
width: 250px;
float: right;
margin: 0 0 0 0;
padding: 0 10px 0 0;
}

#footer-content {
background: url(images/footercont.png);
width: 960px;
height: 31px;
float: left;
padding: 0 0 0 0;
}

#footer-content h3 {
font-size: 18px;
color: #B74718;
}

#footer-content p {
color: #FFFFFF;
}

#footer-content a {
color: #FFFFFF;
}

#footer-content a:hover {
color: #CCCCCC;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:25:05.190

我发现了问题所在。为此，我使用了[IE Tester](http://www.my-debugbar.com/wiki/IETester/HomePage)。当我评论部分代码时

```
.posted-in {
float: left;
} 
```

一切正常。问题是我不明白为什么这是个问题。

# r - ggplot2中的绘图轴文本

> ID：15636792
> 
> 赞同：2
> 
> 时间：2013-03-26T12:11:50.727
> 
> 标签：r, plot, ggplot2

我是 ggplot2 的新手，我有一个平均响应的条形图，我从示例代码中提取出来。

dput() 输出以重现图形：

```
> dput(mainerrors.df)
structure(list(sex = structure(c(1L, 1L, 1L, 2L, 2L, 2L), .Label = c("Male", 
"Female"), class = "factor"), condition = structure(c(1L, 2L, 
3L, 1L, 2L, 3L), .Label = c("Weather", "Negative", "Positive"
), class = "factor"), N = c(19, 18, 26, 55, 50, 49), willingness = c(5.47368421052632, 
5.48148148148148, 5.97435897435897, 6.37575757575758, 5.88666666666667, 
6.2312925170068), sd = c(1.3067525929499, 1.41524021482219, 1.05797742854762, 
0.865560893471263, 1.13611104180873, 0.969927645336604), se = c(0.299789605098861, 
0.333575317636226, 0.207486444350194, 0.116712207066377, 0.160670364368774, 
0.138561092190943), ci = c(0.629834588787353, 0.703782401529606, 
0.427326331312926, 0.233993886626096, 0.32287918557602, 0.278595748013486
)), .Names = c("sex", "condition", "N", "willingness", "sd", 
"se", "ci"), row.names = c(NA, 6L), class = "data.frame") 
```

重现图形的代码：

```
figure.4 <- ggplot(mainerrors.df, aes(x = condition, y = willingness)) +
                facet_wrap(~sex) +
                geom_bar(stat="identity", colour="black", aes(fill=sex)) +
                geom_errorbar(aes(ymin=willingness-ci, ymax=willingness+ci),
                              size=.3,
                              width=.2,
                              position=position_dodge(.9)) +
                scale_fill_brewer(palette="Set3", name="Sex",
                                  breaks=c("Male", "Female"),
                                  labels=c("Male", "Female")) +
                scale_x_discrete("Peer Comment Frame") +
                scale_y_continuous("Willingness to use a condom (95% CI)", breaks=1:7)
                theme(plot.background = element_rect(fill = "transparent", colour = NA),
                      legend.position = "none",
                      axis.text.x = element_text(size=16),
                      axis.text.y = element_text(size=16),
                      axis.title.x = element_text(face="bold", colour="#7f7f7f", size=16, vjust=0.1),
                      axis.title.y = element_text(face="bold", colour="#7f7f7f", size=16),
                      strip.text.x = element_text(size = 16, colour = "black")) 
```

一切看起来都很好，除了无论我玩多少 vjust，我都无法按照我想要的方式获得轴标题。所以我想：为什么不把轴标题放在情节本身，而不是挂在那里呢？刻面标题是我希望图表外观的完美示例（似乎我无法直接发布图像）： http: [//postimg.org/image/cnma6zp99/](http://postimg.org/image/cnma6zp99/)

我希望 x 轴/y 轴标题沿着图的底部/左侧运行，就像男性/女性在顶部一样，因为它看起来更加连贯并避免所有定位问题。有没有办法做到这一点（或者比 vjust 允许的更精确地控制轴标题定位的方法，但这将是最佳的）？

编辑：我将我如何设想我的图表的一个粗略的例子拼凑在一起： ![在此处输入图像描述](../Images/4640689469a21f8b37193ed8a46ca481.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:08:06.593

目前尚不清楚您想做什么，但这里是受@baptiste 启发的解决方案的开始。解决方案[在这里](https://stackoverflow.com/questions/14070953/photo-alignment-with-graph-in-r/14071840#14071840)。主要思想是定义一个自定义元素来保存 x 和 y 标题的自定义。解决方案远未完成，但它显示了这个想法。你也可以使用格子。这种定制很简单`lattice`。

![在此处输入图像描述](../Images/656baf0d8a4818c2594a0d6d0c9f905d.png)

```
require(ggplot2)
require(grid)

# user-level interface to the element grob
my_axis = function(text,rot=0) {
  structure(
    list(text=text,rot=rot),
    class = c("element_custom","element_blank", "element") # inheritance test workaround
  )
}
# returns a gTree with two children: the text label, and a rasterGrob below
element_grob.element_custom <- function(element,...)  {
  g2 <- rectGrob(gp=gpar(fill='red',alpha=0.5))
  g1 <- textGrob(element$text, x=0.5,vjust=0.5,rot  =element$rot)
  gTree(children=gList(g2,g1), cl = "custom_axis")
}
# gTrees don't know their size and ggplot would squash it, so give it room
 grobHeight.custom_axis = heightDetails.custom_axis = function(x, ...)
   unit(1, "lines")

ggplot(mtcars,aes(mpg,disp))+geom_point()+facet_grid(.~vs)+
  theme_bw() +
  theme(axis.title.x = my_axis('my custom x title'),
        axis.title.y = my_axis('my custom y title',rot=90)) 
```

# django - 如何在 Django 中删除外键对象之前传输所有子对象？

> ID：15636793
> 
> 赞同：0
> 
> 时间：2013-03-26T12:11:52.933
> 
> 标签：django, foreign-keys

我知道该`on_delete`选项可以在删除现有外键时将另一个外键对象设置为替换。但是我的客户想要的是这个流程：

1.  单击删除按钮（从管理员中的更改页面或列表页面）
2.  如果此对象有子元素，则显示一个选择框，列出所有可用的外键对象。所选对象将用于填充这些子对象的外键。
3.  一旦子对象被转移到另一个外键，提供确认删除按钮。

有谁知道如何在 Django 管理员上执行此操作？例如，在删除用户时，Wordpress 具有类似的功能。它提供了将文章传输给另一个用户的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:17:10.453

您必须编写自己的视图才能获得您描述的流程。它不能在 Django Admin 中完成。

Django Admin 本身就是一个应用程序，而不是您用来创建自己的应用程序的框架或库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T08:54:22.247

项目模型.py

```
from django.db import models

class Slugged(models.Model):
    title = models.CharField(max_length=500)
    slug = models.CharField(max_length=2000, blank=True, null=True)

    class Meta:
        abstract = True

    def __unicode__(self):
        return self.title

class Item(Slugged):
    # SET_NULL for safety
    category = models.ForeignKey("Category", blank=True, null=True, on_delete=models.SET_NULL)

class Category(Slugged):
    pass 
```

项目.views.py

```
from django.views import generic
from django.views.generic.edit import FormMixin

from jsonview.decorators import json_view
# this is from @jsocol/django-jsonview but there are other ways to do this

from .models import Item, Category

class CategoryUpdateView(generic.UpdateView):
    model = Category

    def get_context_data(self, **kwargs):
        self.object = super(CategoryUpdateView, self).get_object()
        context = super(CategoryUpdateView, self).get_context_data(**kwargs)
        context['available_fks'] = Category.objects.exclude(pk=self.object.id)      
        context.update(kwargs)
        return super(CategoryUpdateView, self).get_context_data(**kwargs)

class CategoryDeleteView(generic.DeleteView, FormMixin):
    model = Task
    success_url = '/'

    @json_view
    def dispatch(self, *args, **kwargs):
        return super(CategoryDeleteView, self).dispatch(*args, **kwargs)

    def delete(self, request, *args, **kwargs):
        self.object = super(CategoryDeleteView, self).get_object()
        self.object.delete()
        return {'success':True}

    def post(self, request, *args, **kwargs):
        self.object = super(CategoryDeleteView, self).get_object()
        if request.POST.has_key('new_fk'):
            new_fk = get_object_or_404(Category, pk=request.POST['new_fk'])
            for item in self.object.item_set.all():
                item.category = new_fk
                item.save()
        else:
            return {'success': False}
        return self.delete(self, request, *args, **kwargs) 
```

items.templates.items.category_update.html

```
<form action="" method="post" enctype="multipart/form-data" id="category-delete-form">
    {% csrf_token %}
    {{ form }}
    <select id="new_fk">
        <option value="" >---------</option>
        {% for fk in available_fks %} 
             <option value="{{ fk.if }}"{% if forloop.first %} selected="selected"{% endif %}>{{ fk.title }}</option>
        {% endfor %}
    </select>
    <input type="submit" name="delete_category" value="Delete">
</form> 
```

items.static.items.deleteItem.js

```
function deleteCategory(deleteUrl, form_id) {
    var $form = $('#' + form_id);
    var new_pk = $form.find('#new_fk').val();
    $.ajax({
        url: deleteUrl,
        type: 'POST',
        data: 'csrfmiddlewaretoken=' + getCookie('csrftoken') + '&new_fk=' + new_fk,
        success: function(data) {
            if (data['success']){
                $form.remove();
                alert('success');
            }
            else {
                alert('FAIL');
            }

        }
    });
}
$('#category-delete-form').on('submit', function () {
    $this = $(this);
    deleteCategory($this.attr('action'), $this.id);
} 
```

[@goldhand 要点](https://gist.github.com/goldhand/6339278)

# python - 进行滚动线性回归的有效方法

> ID：15636796
> 
> 赞同：2
> 
> 时间：2013-03-26T12:11:57.163
> 
> 标签：python, matlab, numpy, linear-regression, rolling-computation

我有两个向量 x 和 y，我想为它们计算一个滚动回归，例如 a on`(x(1:4),y(1:4)), (x(2:5),y(2:5)), ...`
是否已经有一个函数了？我为此想到的最佳算法是 O(n)，但在每个子阵列上应用单独的线性回归将是 O(n^2)。我正在使用 Matlab 和 Python (numpy)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:52:06.417

不，没有任何函数可以进行滚动回归，返回您想要的所有统计数据，并且有效地执行此操作。

这并不意味着您不能编写这样的函数。这样做意味着多次调用 conv 或 filter 等工具。这就是 Savitsky-Golay 工具的工作方式，它可以满足您的大部分需求。对每个回归系数进行一次调用。

使用更新和更新工具来使用/修改以前的回归估计不会像调用 conv 那样有效，因为当你使用 conv 进行工作时，你只需要对线性系统进行一次因式分解。无论如何，没有必要做更新，只要点在系列中均匀分布即可。这就是 Savitsky-Golay 工作的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T22:14:10.697

```
import numpy as np
# y=x*alpha+beta
# window_size - integer, x-numpy array, y-numpy array

x2=np.power(x,2)
xy=x*y
window = np.ones(int(window_size))
a1=np.convolve(xy, window, 'full')*window_size
a2=np.convolve(x, window, 'full')*np.convolve(y, window, 'full')
b1=np.convolve(x2, window, 'full')*window_size
b2=np.power(np.convolve(x, window, 'full'),2)
alphas=(a1-a2)/(b1-b2)
betas=(np.convolve(y, window, 'full')-alphas*np.convolve(x, window, 'full'))/float(window_size)
alphas=alphas[:-1*(window_size-1)] #numpy array of rolled alpha
betas=betas[:-1*(window_size-1)]   #numpy array of rolled beta 
```

# amazon-web-services - 如何从私有云与 AWS EC2 实例通信？

> ID：15636797
> 
> 赞同：0
> 
> 时间：2013-03-26T12:12:00.063
> 
> 标签：amazon-web-services, amazon-ec2, cloud

我想通过私有云中的监控工具监控 AWS 上托管的应用程序的性能。

在私有云和亚马逊云之间建立成功连接需要遵循哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T20:48:55.320

好吧，如果您的 EC2 实例不在 Amazon VPC 中，那么 EC2 安全组只控制入站连接。因此，如果您需要从 VPC 连接到 EC2，则需要在 EC2 安全组中打开必要的端口。

另一种选择，如果您不想在 ec2 安全组上打开端口，您可以使用 SNS 在 EC2 和 VPC 之间进行通信。例如，您的 ec2 将消息放入 SNS。SNS 将消息放入 SQS 队列。VPC 上的服务不时从 SQS 中提取消息并在您的监控工具中处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T10:19:35.270

基本上，AWS 云就像您构建的任何其他网络（或服务器）一样。因此，要连接到它以进行 SNMP 监控，您需要在安全组中打开 SNMP 端口（161 和 162）。因此，基本上您将编辑入站规则并为应用程序所在的 AWS 服务器的安全组添加 udp 端口​​ 161 和 162。但同样，您构建的服务器也需要更改防火墙配置。在 linux 服务器上，您还需要编辑 iptables 以允许此类流量，Windows 有其防火墙设置等等。但正如其他人所说，您可能希望提供详细信息，例如您正在使用的监控工具等。

# c# - 在长时间运行的循环中处理超时

> ID：15636799
> 
> 赞同：2
> 
> 时间：2013-03-26T12:12:03.170
> 
> 标签：c#

我有一个应该在给定时间内执行的方法，否则它应该抛出“超时”异常。基本上它有一个很长的运行循环。在每次循环中计算超时似乎很昂贵：

```
private void DoSomethingGood(int timeoutSeconds)
{
    var startTime=DateTime.Now;
    int count=100000000; //some big number

    for(int i=0;i<count;i++)
    {
        //code to to take care of timeout.
        var ellapsedSeconds =(DateTime.Now-startTime).TotalSeconds;
        if(ellapsedSeconds>=timeoutSeconds)
        {
            throw new TimeoutException("Timeout");
        }

        /*some more code here*/

    }
} 
```

（在没有其他代码的情况下调用上述方法，本身耗时超过 2 秒，主要是由于 DateTime.Now 语句）

有人可以提出更好的方法吗？

我对 +-几毫秒没问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:13:44.837

只做定期检查吗？例如：

```
if((i % 100) == 0) { /* check for timeout */ } 
```

或调整到`1000`等，`10000`具体取决于它需要多快注意到超时。

# java - Java 关键部分似乎不起作用

> ID：15636802
> 
> 赞同：4
> 
> 时间：2013-03-26T12:12:19.860
> 
> 标签：java, android, concurrency

这是代码：

```
final CountDownLatch lineDirectionLatch = new CountDownLatch(count);
final Object lock = new Object();
for(StationLines station : stationList) {
    final String gpsNumber = station.getGpsNumber();
    for(String lineNumber : station.getLines()) {
        final TranslateToStationTask task = new TranslateToStationTask(lineNumber, gpsNumber);
        task.setCallback(new Runnable() {
            @Override
            public void run() {
                synchronized (lock) {
                    Utils.debug(TAG, "Thead " + Thread.currentThread().getId() + " enter critical section.");
                    int errorCode = task.getTaskResult().getErrorCode();
                    if (errorCode == 0) {
                        Station station = task.getTaskResult().getContent();
                        if (station != null) {
                        for(int idx = 0; idx < stationList.size(); idx++) {
                            String gpsNumber = stationList.get(idx).getGpsNumber();
                            if (gpsNumber.equals(station.getGpsNumber())) {
                                    stationList.get(idx).setDirection(station.getLineNumber(), station.getDirection());
                            }
                        }
                        }
                    } 
                    Utils.debug(TAG, "Thead " + Thread.currentThread().getId() + " leave critical section.");
                    lineDirectionLatch.countDown();
                }
            }});
        task.startTask();
    }
}
lineDirectionLatch.await(); 
```

这里是日志：

```
03-26 19:57:07.648: I/TrafficManager(20013): Thead 1501 enter critical section.
03-26 19:57:07.687: I/TrafficManager(20013): Thead 1501 leave critical section.
03-26 19:57:07.714: I/TrafficManager(20013): Thead 1502 enter critical section.
03-26 19:57:07.722: I/TrafficManager(20013): Thead 1502 leave critical section.
03-26 19:57:07.726: I/TrafficManager(20013): Thead 1503 enter critical section.
03-26 19:57:07.726: I/TrafficManager(20013): Thead 1503 leave critical section.
03-26 19:57:07.769: I/TrafficManager(20013): Thead 1509 enter critical section.
03-26 19:57:07.773: I/TrafficManager(20013): Thead 1505 enter critical section.
03-26 19:57:07.773: I/TrafficManager(20013): Thead 1505 leave critical section.
03-26 19:57:07.804: I/TrafficManager(20013): Thead 1506 enter critical section.
03-26 19:57:07.804: I/TrafficManager(20013): Thead 1506 leave critical section.
03-26 19:57:07.804: I/TrafficManager(20013): Thead 1507 enter critical section.
03-26 19:57:07.804: I/TrafficManager(20013): Thead 1507 leave critical section.
03-26 19:57:07.804: I/TrafficManager(20013): Thead 1510 enter critical section.
03-26 19:57:07.843: I/TrafficManager(20013): Thead 1511 enter critical section.
03-26 19:57:07.843: I/TrafficManager(20013): Thead 1513 enter critical section. 
```

您可以看到线程 1505 在之前进入的线程（1509）之前进入了临界区，并且线程 1509 永远不会离开临界区？这很奇怪。

每个 TranslateToStationTask 在它自己的线程中运行，当任务完成它的工作时，临界区将被调用。

我不知道为什么临界区允许多个任务进入，为什么有些任务似乎永远不会离开临界区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:16:25.687

从您的代码看来，您正在`lock`函数本身中创建对象。所以每次调用该函数时，都会有不同线程的新锁。

因此，它们都将进入您的关键部分。

要获得所需的行为，请将其移出此功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:31:41.793

请在同步块中添加一个 try-catch 子句，以查看函数是否异常离开，从而在不通知的情况下解锁对象。

像这样的东西：

```
synchronized(lock) {
  try {
    // my code
  }
  catch (Exception e) { // generic catch to look if any exception is triggered
    System.out.printf("Caused exception: %s",e.getMessage());
  }
} 
```

另一个可能的问题是您使用 new Runnable() 创建了一个匿名类，因此锁可能并不总是同一个变量。尝试创建一个实现 Runnable 的类以及 lock 变量并调用该构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:24:07.710

线程 1509 没有将关键部分留在日志中的任何位置。也许它正在等待`lock`，什么会允许其他线程进入临界区？（不太可能， as`lock`似乎没有从代码片段中的方法传递到任何地方）。

# seo - 让 Google 索引外部加载的内容（用于 SEO）

> ID：15636809
> 
> 赞同：0
> 
> 时间：2013-03-26T12:12:40.033
> 
> 标签：seo, embed

我真的很难找到一种方法来做到这一点，我希望有人能为我可以尝试的更多事情提出一些建议。

我正在尝试找到一种方法，使我的网站在一个域（例如 www.mylovelywebsite.com）上可以嵌入来自另一个域（例如 www.mysiteprovidingveryinterestingcontent.com）的内容，并使该内容被 Google 索引并归因于该网站它嵌入的位置，即 www.mylovelywebsite.com。

在这一点上，我主要只对 Google 真正感兴趣。到目前为止，我已经尝试了以下方法，但没有成功：

**使用 IFrame：**

我读过一些资料说谷歌不索引 IFrame 内容，还有一些说谷歌会索引它，但它归因于内容的原始来源，而不是嵌入 IFrame 的网站。无论哪种方式，这都不能解决我的问题。

<script type="text/javascript" src="http://mysiteprovidingveryinterestingcontent/Public/EmbeddedFeed"></script>

**使用 <object> 标签：**

我认为这与 IFrame 的情况相同。

**使用 Javascript 来记录。写出内容：**

我一直在查看[这个 chap 进行的实验](http://www.seomoz.org/ugc/can-google-really-access-content-in-javascript-really)，这些实验表明，只有当 javascript 语句在被索引的页面中是内联的时，内容才会被索引，如果它们在外部文件中，那么它们不是。

任何其他可能解决此问题的建议确实非常受欢迎。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:09:32.733

我已经看到 iframe 内容被编入索引，就好像它是页面的内容一样，但我相信这只发生在某些特定情况下。在我看到的案例中，嵌入的内容来自同一个网站，并且只在 iframe 中使用过。

我怀疑在你的情况下搜索引擎不会选择它。您所做的只是获取他们已经可以在另一个网站上找到的内容并将其放入您的网站中。当原始版本可用时，为什么 Google 想要将人们发送到您的页面。因此，我认为他们对重新索引重复的内容不感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T02:25:30.050

如果可以通过后端的 API 访问内容，这很容易实现。当页面加载时，内容可以简单地显示，Google 不会知道内容来自其他地方。

不幸的是，很少有服务提供这种集成，但这对我来说似乎很容易。

# c# - 返回调用方法 - BlockingCollection 队列项

> ID：15636815
> 
> 赞同：2
> 
> 时间：2013-03-26T12:13:19.580
> 
> 标签：c#, .net-4.0, queue

我需要一些有关 ConcurrentQueue 和 BlockingCollection 的帮助。

该场景是我试图限制请求并符合每秒 1 个请求的限制，当我从队列中取出一个项目时会发生限制。该应用程序是一个 MVC 4 应用程序，因此在任何给定时间都可能有多个生产者，并且我只联系一个消费者/Web 服务。

*   Producer`GetUser(string url)`会向队列中添加一个 Request，一个 request 只是一个 url。
*   通过执行一些检查来处理 BlockingCollection 中的第一项，以确保它不违反限制。
*   下载消费者的回复
*   然后以某种方式将下载响应返回给调用方法。节流下载

简而言之，我想处理队列中的一个项目，下载响应并将其发送回调用方法。将其发送回调用方法是我卡住的地方。我在这里有什么选择？

```
//I want to do something like this, and wait for the throttled response to return
public class WebService()
{
    public string GetUser(string name) 
    {
         var url = buildUrl(name);

         var response = string.Empty;

         var downloadTask = Task.Factory.StartNew( () => {
               response = WebServiceHelper.ThrottledDownload(url);
         });
         downloadTask.Wait();
         return response;
    }
}

public static class WebServiceHelper()
{
  private static BlockingCollection<Request> requests = new BlockingCollection<Request>();

  static WebServiceHelper()
  {
       foreach(var item in requests.GetEnumerableConsumer()) {
         string response = DoWork(item.Url);
         //How can i send this back to the calling method?
       }
  }

  public static string ThrottledDownload(string url)
  {
     //Add the request to the blocking queue 
     requests.Add(new Request(url, someId));

     //How do i get the result of the DoWork method?
  } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:30:46.600

您可能不想向该`ThrottledDown`方法“返回结果”。至少，我不会这么认为。如果您确实想这样做，则必须进行某种阻塞呼叫。或者使用`Task`带有延续的...也许`async`在 C# 5 中。

目前还不清楚主线程在做什么。我假设它正在排队消费者线程每隔一秒处理的一堆请求（大概是为了防止你被你正在查询的服务器限制）。然后，您希望通知主线程（或某事），以便它可以...做某事。

您的程序流程仍不清楚。

根据您希望主线程执行的操作（以及您希望它使用的信息），您有多种选择。你可以：

*   创建另一个`BlockingCollection`结果。当消费者完成一个请求时，它会将一个对象添加到该集合中。主线程轮询该集合以获取请求完成的通知。
*   上面的一个变体是使用管道。一个线程将请求排队。一个线程将请求出列，发出 Web 请求，然后将结果放入另一个队列。第三个线程处理第二个队列。
*   为每个对象添加一个事件（`ManualResetEventSlim`例如 ） 。`Request`消费者`Set`在完成请求后调用该事件。主线程要么等待该事件，要么定期轮询它。
*   让消费者执行一个回调函数（在编译时定义，或传入`Request`您添加到队列中的对象）。该回调函数可以通知主线程、记录结果或您喜欢的任何内容。

同样，如果没有有关您的应用程序的更多信息以及您要解决的更高级别的问题，很难提出更具体的建议。

# c++ - 获取 Qt 中文件的网络路径

> ID：15636816
> 
> 赞同：1
> 
> 时间：2013-03-26T12:13:20.490
> 
> 标签：c++, windows, qt, networking, file-io

我正在使用 Qt`QFileDialog`让用户添加文件，但我遇到了从网络驱动器添加文件的问题。我从`getOpenFileName()`函数中获得的路径始终是本地路径。所以如果一个网络共享`\\share1`被挂载在 Windows 中`J:\`，我会得到一个以 . 开头的路径`J:\`。

这没有用，因为人们可能在不同的字母下安装了相同的共享，并且当一个用户向数据库添加路径时，我希望其他用户能够访问该路径而无需猜测它应该在哪个服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:52:55.670

看来你不能单独用 Qt 来做这个，你需要使用 WinAPI。检查路径是否包含字符，然后使用[WNetGetConnection](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385453%28v=vs.85%29.aspx)`:`找出网络路径。

# scala - 在 Scala 中推断正确的 lambda 类型

> ID：15636819
> 
> 赞同：3
> 
> 时间：2013-03-26T12:13:37.277
> 
> 标签：scala, type-inference

为什么编译器不能正确推断和的`x`类型`y`？
我已经阅读了一些关于 Scala 类型推断的文章，但仍然无法弄清楚为什么它是不可能的。

```
object Test {
    def main(args: Array[String]) {
        def add(x: Int, y: Int) = x + y
        val f = (x,y) => add(y,x) // error: missing parameter type
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:18:02.627

因为`add`可能会被其他类型重载，因此实现它甚至处理像你这样的简单情况会给编译器增加很多复杂性。

**编辑**：

你可能知道，haskell 能够推断出这种声明的类型，但这仅仅是因为 haskell 不支持重载。

# c - 制作bin文件时是否会为gnu编译器中未使用的变量和函数分配空间

> ID：15636827
> 
> 赞同：1
> 
> 时间：2013-03-26T12:13:58.820
> 
> 标签：c

在制作 bin 文件时，是否会为 gnu 编译器中未使用的变量和函数分配空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:22:14.987

要看。例如在优化级别上。

如果您想确定二进制文件中是否显示了某些内容，请使用`__attribute__((used))`.

> 附加到函数的此属性意味着即使看起来未引用该函数，也必须为该函数发出代码。例如，当仅在内联汇编中引用该函数时，这很有用。当应用于 C++ 类模板的成员函数时，该属性还意味着如果类本身被实例化，则该函数被实例化。

[源代码](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)。如果您有与依赖于某些符号存在的二进制文件关联的动态链接库，则非常有用。

如果您想确保未使用的东西不会出现在您的二进制文件中，请使用调试符号对其进行编译并检查它是否不会出现。为了确保优化掉未使用的局部变量，我知道没有比单步执行反汇编编译二进制文件更好的方法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:54:53.413

GCC 会将全局变量和所有外部函数放入目标代码中，无论是否使用。但是，未初始化的数据通常不占用空间。

自动变量是在运行时分配的，因此它们不会存储在二进制文件中。

您可以要求链接器删除代码，例如，使用 GNU ld：

```
gcc -o foo foo.c -Wl,--gc-sections 
```

这可能会从最终代码中删除未使用的变量和函数。

# asp.net - 如何在 listview 的 onitemupdated 事件中添加 listviewitemeventargs 作为参数？

> ID：15636828
> 
> 赞同：0
> 
> 时间：2013-03-26T12:14:00.227
> 
> 标签：asp.net, listview, textbox

以下是我的列表视图标记

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="SNO" 
    DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" OnItemCreated="DateCalculation" OnItemUpdated="Update"> 
```

如您所见，我有两个事件**DateCalculation**和**UpdateButton**。日期计算事件如下：-

```
 protected void DateCalculation(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.InsertItem)
    {
        TextBox txtbox1 = e.Item.FindControl("DateTakenPlaceTextBox") as TextBox;
        txtbox1.Text = DateTime.Now.ToString("yyyy/MM/dd");

    }
}

Now when i try to add similar event to Update i.e.

protected void Update(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.InsertItem)
    {
        TextBox txtbox2 = e.Item.FindControl("AmountTextBox") as TextBox;
        if (txtbox2.Text == null)
        {

        }
    }
} 
```

我收到以下错误： **“更新”没有重载与委托
“System.EventHandler”匹配**

这是否意味着我必须编写 eventargs 而不是 Listviewitemeventargs？我想访问 listviewitems 所以我需要 **Listviewitemeventargs**。任何人都可以建议做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:17:09.947

您正在寻找[ListViewUpdatedEventArgs](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewupdatedeventargs.aspx)，其中包含您可以使用的属性，例如[NewValues](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewupdatedeventargs.newvalues.aspx)、[OldValues](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewupdatedeventargs.newvalues.aspx)和[AffectedRows](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listviewupdatedeventargs.affectedrows.aspx)。

**编辑**
为了防止空值和空值，您可以改用[ItemUpdating](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemupdating.aspx)事件。您需要在更新项目*之前*检查这一点。否则为时已​​晚。

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="SNO" 
              DataSourceID="SqlDataSource1" InsertItemPosition="LastItem"
              OnItemCreated="DateCalculation" OnItemUpdating="Updating"> 
```

```
protected void Updating(Object sender, ListViewUpdateEventArgs e)
{
  // Cancel the update operation if any of the fields is empty or null.
  foreach (DictionaryEntry de in e.NewValues)
  {
    // Check if the value is null or empty.
    if (de.Value == null || de.Value.ToString().Trim().Length == 0)
    {
      Message.Text = "Cannot set a field to an empty value.";
      e.Cancel = true;
    }
  }
} 
```

如果您只想检查特定字段是否为空或为空：

```
var val = e.NewValues["Amount"];
if (val == null || val.ToString().Trim().Length == 0)
{
  Message.Text = "Cannot set a field to an empty value.";
  e.Cancel = true;
} 
```

# javascript - 不确定复选框的敲除自定义绑定将不起作用

> ID：15636831
> 
> 赞同：1
> 
> 时间：2013-03-26T12:14:16.813
> 
> 标签：javascript, checkbox, knockout.js, custom-binding

简而言之：这是我的淘汰赛自定义绑定，用于将复选框置于不确定状态。

```
ko.bindingHandlers.nullableChecked = {
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (value == null) element.indeterminate = true;
        ko.bindingHandlers.checked.update(element, function () { return value; });
    }
}; 
```

如果初始值`null`一切正常并且复选框处于不确定状态，但是当我单击复选框时，它似乎没有相应地将绑定属性的值更新为 false/true。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-23T11:19:50.443

如果有人在这里希望将全选类型复选框显示为中间，如果不是所有子项都被选中，您可以使用这样的简单绑定

```
ko.bindingHandlers.indeterminateValue = {
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        element.indeterminate = value;
    }
}; 
```

那么你可以像这样使用它

```
 <input type="checkbox" data-bind="checked: selectedAllProduce, indeterminateValue: selectedProduce().length > 0 && selectedProduce().length < produce.length" title="Select all/none"/> 
```

这是一个小提琴，显示它在计算的 observable 上工作选择所有示例 [https://jsfiddle.net/deannorth/crqwac12/](https://jsfiddle.net/deannorth/crqwac12/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-09T16:02:35.677

@Fodagus 的答案适用于 Knockout <= 2.3.0，但在 Knockout >= 3.0.0 中，`ko.bindingHandlers.checked.update`未定义。

我们发现这在 Knockout 3.1.0 中对我们有用：

```
 ko.bindingHandlers.nullableChecked = {
        init: function (element, valueAccessor) {
            ko.bindingHandlers.checked.init(element, valueAccessor);
        },
        update: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor());
            if (value == null) {
                element.indeterminate = true;
            }
            else {
                element.indeterminate = false;
            }
        }
    }; 
```

我们错过了什么吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T15:42:49.303

你没有打电话给 Init。

只需像在更新中所做的那样代理 init 函数以在您的 nullableChecked 初始化函数中进行检查。

```
ko.bindingHandlers.nullableChecked = {
    init: function(element, valueAccessor) {
          ko.bindingHandlers.checked.init(element, valueAccessor);
    },
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (value == null) element.indeterminate = true;
        ko.bindingHandlers.checked.update(element, valueAccessor);
    }
}; 
```

如果没有初始化，它实际上永远不会在复选框上设置“点击”绑定来告诉淘汰赛某些事情已经改变。如果您查看调试代码 ( [http://knockoutjs.com/downloads/knockout-2.2.1.debug.js](http://knockoutjs.com/downloads/knockout-2.2.1.debug.js) )，您会看到 init 使用 jQuery 在复选框上设置“单击”事件以进行更新值变化时的可观察值。

```
ko.bindingHandlers['checked'] = {
'init': function (element, valueAccessor, allBindingsAccessor) {
    var updateHandler = function() {
        var valueToWrite;
        if (element.type == "checkbox") {
            valueToWrite = element.checked;
        } else if ((element.type == "radio") && (element.checked)) {
            valueToWrite = element.value;
        } else {
            return; // "checked" binding only responds to checkboxes and selected radio buttons
        }

        var modelValue = valueAccessor(), unwrappedValue = ko.utils.unwrapObservable(modelValue);
        if ((element.type == "checkbox") && (unwrappedValue instanceof Array)) {
            // For checkboxes bound to an array, we add/remove the checkbox value to that array
            // This works for both observable and non-observable arrays
            var existingEntryIndex = ko.utils.arrayIndexOf(unwrappedValue, element.value);
            if (element.checked && (existingEntryIndex < 0))
                modelValue.push(element.value);
            else if ((!element.checked) && (existingEntryIndex >= 0))
                modelValue.splice(existingEntryIndex, 1);
        } else {
            ko.expressionRewriting.writeValueToProperty(modelValue, allBindingsAccessor, 'checked', valueToWrite, true);
        }
    };
    ko.utils.registerEventHandler(element, "click", updateHandler);

    // IE 6 won't allow radio buttons to be selected unless they have a name
    if ((element.type == "radio") && !element.name)
        ko.bindingHandlers['uniqueName']['init'](element, function() { return true });
}, 
```

**编辑：**这是一个小提琴：http: [//jsfiddle.net/cclose/NFfVn/](http://jsfiddle.net/cclose/NFfVn/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-13T09:17:57.297

在新版本`knockout 3.0.0`及以上。`checkbox`绑定处理程序中的更新方法被删除。`click event`因此，您应该在函数中创建一个以在单击`init`时触发更新方法`checkbox`。下面是一个将 a 转换为 a 的绑定处理程序`jquery checkbox`示例`uniform checkbox`。

```
ko.bindingHandlers.checkedUniform =
{
    init: function (element, valueAccessor) {
        ko.bindingHandlers.checked.init(element, valueAccessor);
        $(element).uniform().on('click', ko.bindingHandlers.checkedUniform.update);
    },
    update: function (element, valueAccessor) 
    {
        ko.bindingHandlers.checked.update(element, valueAccessor);
        $.uniform.update($(element));
    }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T15:32:37.573

处理程序接收存储的值的`checked`访问器，而不是持有该值的可观察对象。因此，可观察对象永远不会获得由处理程序引起的任何值更改。我认为您应该能够按原样传入值访问器。

```
ko.bindingHandlers.nullableChecked = {
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (value == null) element.indeterminate = true;
        ko.bindingHandlers.checked.update(element, valueAccessor);
    }
}; 
```

# python - Python Fabric 脚本报告完成但无法正常工作

> ID：15636837
> 
> 赞同：2
> 
> 时间：2013-03-26T12:14:28.030
> 
> 标签：python, pyramid, fabric

我有如下的fabfile。当我手动 ssh 到远程服务器并完全按照 fabfile 执行命令时，它工作正常。但是，当我运行 fabfile 时，它​​输出与手动运行时相同的进度，不报告错误并以“完成”退出，但最后一行实际上不起作用。任何建议都会很棒。

# 更新：

在跟踪 pserve 日志并再尝试几次 fabfile 之后，它随机工作了一次。什么都没有改变，当我随后运行它时，它没有工作。所以我不知道发生了什么。是时间问题吗？

这是代码：

```
# kills a running pserve process and restarts it in daemon mode

from fabric.api import *

def deploy():
    pid = run("pidof -x pserve")  # works
    run("sudo kill -15 %s" % pid)  # works
    with cd('~/Repos/bessie'):
        run("sudo pserve development.ini --daemon")  # outputs "Entering
                                                     # daemon mode" but doesn't
                                                     # actually start the process 
```

输出：

```
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] Executing task 'deploy'
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] run: pidof -x pserve
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] out: 28998
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] out: 

[ec2-xxx.ap-southeast-2.compute.amazonaws.com] run: sudo kill -15 28998
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] run: sudo pserve development.ini --daemon
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] out: Entering daemon mode
[ec2-xxx.ap-southeast-2.compute.amazonaws.com] out: 

Done. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T19:55:05.363

基本上只是`sudo('pserve --daemon development.ini', pty=False)`。Fabric 使用的伪 TTY 不能很好地用于分离过程。

[http://docs.fabfile.org/en/1.5/faq.html#init-scripts-don-t-work](http://docs.fabfile.org/en/1.5/faq.html#init-scripts-don-t-work)

旁注，使用主管、新贵或其他一些真正的流程管理器，而不是`pserve --daemon`. 如果您的进程终止，您将无法真正了解如何使用此 seutp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:44:19.280

你不需要：

```
 run("sudo....") 
```

Fabric对此有一种特殊的方法，`sudo()`. 因此，首先，您可以将该行重写为：

```
sudo("pserve development.ini --daemon") 
```

其次，它看起来不是织物，而是它`pserve`本身。

# cakephp - CakePHP 2.0 Acl + Auth + 自定义用户名字段

> ID：15636846
> 
> 赞同：1
> 
> 时间：2013-03-26T12:14:57.437
> 
> 标签：cakephp, authentication, acl

在我的 AppController 我有这个设置

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        )
     ),
    'Session',
    'DebugKit.Toolbar'
); 
```

在我的用户模型中，我没有“用户名”字段，我有“电子邮件”，所以我将 $components 配置更改为：

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array(
                    'username' => 'email', 'password' => 'password'
                )
            )
        )
    ),
    'Session',
    'DebugKit.Toolbar'
); 
```

这样，我不会收到错误“模型没有字段'用户名'”，但我的登录被拒绝。所以我切换回以前的配置，改变了表格

```
ALTER TABLE users CHANGE COLUMN username email VARCHAR(45) NOT NULL UNIQUE; 
```

它有效..那么我以前的配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:49:39.747

好的，感谢@Oldskool 提示我恢复到

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array(
                    'username' => 'email', 'password' => 'password'
                )
            )
        )
    ),
    'Session',
    'DebugKit.Toolbar'
); 
```

然后我也更改了登录视图（用电子邮件替换用户名）：

```
echo $this->Form->inputs(array(
  'legend' => __('Login'),
  'email',
  'password'
)); 
```

我认为登录表单是由 auth 组件而不是由 User 模型管理的，并且用户名和电子邮件之间的映射只能在 Auth 组件配置中完成

# c# - 如何将复选框数据从一个页面传递到另一个页面

> ID：15636848
> 
> 赞同：0
> 
> 时间：2013-03-26T12:14:59.503
> 
> 标签：c#, asp.net, webforms

我正在尝试使用 asp.net 将数据从一个页面传递到另一个页面

我在第二页写了这段代码

```
protected void Page_Load(object sender, EventArgs e)
{  
    Div1.InnerHtml = "I am here";

    if (Page.PreviousPage != null)
    {
        CheckBoxList CheckBoxList1 = 
            (CheckBoxList)PreviousPage.FindControl("CheckBoxList1");

        string section = "";

        foreach (ListItem sec in CheckBoxList1.Items)
        {
            if (sec.Selected)
            {
                section += sec.Text + "<br />";
                this.d.InnerHtml = section;
            }
        }
    }
} 
```

但它不起作用:(

请帮我找出错误:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:18:15.950

将第一页中的复选框值保存在会话变量或 cookie 中，以便稍后在第二页中检索它们。

# c - PTHREAD_RECURSIVE_MUTEX_INITIALIZER 和 PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP 有什么区别？

> ID：15636850
> 
> 赞同：8
> 
> 时间：2013-03-26T12:15:01.010
> 
> 标签：c, pthreads

静态初始化递归互斥体时，有什么区别

```
static pthread_mutex_t foo_mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER; 
```

和

```
static pthread_mutex_t foo_mutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP; 
```

为什么我要一个而不是另一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T14:06:42.540

“_NP”表示该功能是不可移植的。为了保留提示，您最好使用“_NP”版本。

除此之外，我怀疑没有区别。不过，也不是 100% 确定。

# android - Android上的自定义鼠标指针

> ID：15636855
> 
> 赞同：3
> 
> 时间：2013-03-26T12:15:18.517
> 
> 标签：android, android-3.0-honeycomb

当使用现代版本的 Android --- Honeycomb 或更高版本 --- 如果硬件合适，则支持显示鼠标指针。例如，在华硕 Transformer 或东芝 AC100 笔记本电脑上。

是否有任何 API 允许在这些设备之一上运行的应用程序以编程方式更改其鼠标指针？（或者在应用程序窗口中完全隐藏指针。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-04-02T20:06:29.537

此功能是在 Android 7.0 中添加的。您可以选择一个预设系统指针或从位图中制作一个。您也可以隐藏指针。

Android 7.0 文档： [https ://developer.android.com/about/versions/nougat/android-7.0#custom_pointer_api](https://developer.android.com/about/versions/nougat/android-7.0#custom_pointer_api)

PointerIcon 类： [https ://developer.android.com/reference/android/view/PointerIcon.html](https://developer.android.com/reference/android/view/PointerIcon.html)

我用它来自定义 WebView 的指针。您需要创建一个类来扩展要更改指针的视图。

如果您使用可绘制的位图，则应将其放在适当的密度文件夹中（drawable-mdpi .. drawable-xxxhdpi。）如果不这样做，系统将自动缩放它，并且看起来非常模糊。系统默认指针似乎在 18dp 左右。

位图示例：

```
package com.example.packageName;

import android.annotation.TargetApi;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Build;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.PointerIcon;
import android.webkit.WebView;

public class CustomWebview extends WebView {

    private Bitmap bmCursor;
    private PointerIcon pntCursor;

    public CustomWebview(Context context, AttributeSet attrs) {
        super(context, attrs);
        if (Build.VERSION.SDK_INT >= 24) {
            bmCursor = BitmapFactory.decodeResource(getResources(), R.drawable.cursor);
            pntCursor = PointerIcon.create(bmCursor,0,0);
        }
    }

    @TargetApi(24)
    @Override
    public PointerIcon onResolvePointerIcon(MotionEvent me, int pointerIndex) {
        return pntCursor;
    }
} 
```

系统指针示例：

```
package com.example.packageName;

import android.annotation.TargetApi;
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.PointerIcon;
import android.webkit.WebView;

public class CustomWebview extends WebView {
    Context c;
    public CustomWebview(Context context, AttributeSet attrs) {
        super(context, attrs);
        c = context;
    }

    @TargetApi(24)
    @Override
    public PointerIcon onResolvePointerIcon(MotionEvent me, int pointerIndex) {
        return PointerIcon.getSystemIcon(c, PointerIcon.TYPE_CROSSHAIR);
    }
} 
```

使用`PointerIcon.TYPE_NULL`将隐藏光标。

因为我为 WebView 使用了自己的类，所以我不得不`com.example.packageName.CustomWebview`在我的布局的 xml 中将它的标签重命名为。像这样。

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.packageName.CustomWebview xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:padding="0px"
         android:layout_margin="0px"
         android:scrollbars="none"
         android:nestedScrollingEnabled="false"
         android:background="@drawable/webview_style"
         android:foreground="@drawable/webview_style"
         android:id="@+id/webGame" /> 
```

还有一种`view.setPointerIcon(PointerIcon)`方法，但它似乎不会永久更改视图的指针。

# ios - 替换了视图控制器

> ID：15636857
> 
> 赞同：0
> 
> 时间：2013-03-26T12:15:28.667
> 
> 标签：ios, objective-c, uiviewcontroller

我对编程有点陌生，不确定我在这里做了什么，但我正在设置一个新的 VC 类，并意外替换了标准 VC，该标准 VC 在构建新项目时自动设置在我的故事板中。这是显示的第一个 VC。 H

```
 #import <UIKit/UIKit.h>

    @interface ViewController : UIViewController

    @end 
```

这是.m

```
#import "ViewController.h"
@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

这个 VC 所拥有的只是一个按钮，它可以转到下一个屏幕，但是一旦启动并出现此错误，它就会立即崩溃。

```
Terminating app due to uncaught exception 'NSUnknownKeyException',
reason: '[<ViewController 0x7575ee0> setValue:forUndefinedKey:]:
this class is not key value coding-compliant for the key go.' 
```

无论如何我可以在不重新开始的情况下让它工作吗？因为它现在是一个大程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:23:39.550

**此错误主要是**由于错误/意外删除/忘记您`IBOutlet`与`File's Owner`.

**或者**

如果在`XIB`链接到视图控制器中的属性`IBOutlet`或方法`IBAction`的文件中，并且您已删除或重命名该属性或方法，则运行时找不到它，因为它已被重命名并因此崩溃。

检查您的`IBOutlet`And 方法`IBAction`在您的引用`XIB`中不再存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:24:56.873

好的，问题似乎是您在界面构建器中连接了一个名为“go”的插座，然后更改了情节提要中的视图控制器类。

这意味着在 IB 中仍然存在对“go”的引用，但您当前的视图控制器并不知道它。

两种解决方案（取决于您想要实现的目标）

**解决方案 1**

如果您想使用您的`ViewController`- 进入 IB 并更改`Class`视图控制器。像这样：

（在您的情况下，该类应该是“ViewController”）

![自定义视图控制器类](../Images/4f75ac6b286b74b4f8785624a3775ba2.png)

**解决方案 2**

在情节提要中选择视图控制器并移除出口连接。

# php - 在 mPDF 生成文件时显示“正在生成...”文本

> ID：15636865
> 
> 赞同：4
> 
> 时间：2013-03-26T12:15:50.333
> 
> 标签：php, mpdf

无论如何要显示一些文本，表明 mPDF 脚本仍在生成 PDF？

在运行脚本之前，我尝试做一个简单的 Echo，但它似乎没有显示，或者 mPDF 将其清除或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:08:05.000

解决方案是启用 mPDF 进度条！里面`/mpdf/config.php`

```
$this->progressBar = 1;// Shows progress-bars whilst generating file 0 off, 1 simple, 2 advanced 
```

# web-services - 使用 Moq 模拟接口仍然会触发底层方法

> ID：15636868
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:16:09.480
> 
> 标签：web-services, unit-testing, interface, moq

我有一个类使用大致如下所示的 Web 服务：

```
public class MyService : IMyService
{
    private readonly IAuxilaryService1 auxilaryService1;
    private readonly IAuxilaryService2 auxilaryService2;
    private readonly IAuxilaryService3 auxilaryService3;
    private IWebService service;

    public MyService()
    {
        auxilaryService1 = new AuxilaryService1();
        auxilaryService2 = new AuxilaryService2();
        auxilaryService3 = new AuxilaryService3();
    }

    public void DoSomething(
        string Param1,
        string Param2
        )
    {
        service = new WebService(auxilaryService1, auxilaryService2, auxilaryService3); 

        var response = service.DoSomething(Param1, Param2);
        /* ... */
    } 
```

然后一个单元测试试图测试这样做：

私人模拟网络服务；

```
 [SetUp]
    public void SetUp()
    {
       webService = new Mock<IWebService>();
    }

    [Test]
    public void MyService_DoSomethingTest()
    {
        IMyService myService = new MyService();

        webService.Setup(x => x.DoSomething(It.IsAny<string>(), It.IsAny<string>()))
                       .Returns(new Response() { Status = "Foo"});

        myService.DoSomething("Param1", "Param2");

        webService.Verify(x => x.DoSomething(It.IsAny<string>(), It.IsAny<string>()));
    } 
```

首先，这是测试“MyService”的好方法，其次，由于某种原因，接口没有被正确拦截，所以在我的测试中，即使我确实要求 myService 中的 webService 返回一个假响应，实际实例仍然被调用，并且测试失败并出现 Soap 异常。我知道 Moq 需要接口或虚拟方法，但我提供了一个接口 Mock 为什么它不拦截它？有任何想法吗？

我需要补充一点，我正在测试自定义 umbraco 轮廓工作流类型，并且我无法控制构造函数。如果我改变它，项目就会中断。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:20:27.997

为了测试您的类，您应该将模拟的依赖项*传递给被测类。*在您的情况下，所有依赖项都是硬编码的`MyService`（它们在类中实例化）。使用依赖注入提供依赖：

```
public class MyService : IMyService
{
    private readonly IAuxilaryService1 auxilaryService1;
    private readonly IAuxilaryService2 auxilaryService2;
    private readonly IAuxilaryService3 auxilaryService3;
    private IWebService service;

    // constructor injection
    public MyService(IAuxilaryService1 service1,
                     IAuxilaryService2 service2,
                     IAuxilaryService3 service3)
    {
        auxilaryService1 = service1;
        auxilaryService2 = service2;
        auxilaryService3 = service3;
    }

    // pass IWebService into method
    public void DoSomething(string Param1, string Param2, IWebService service)
    {
        this.service = service;                
        var response = service.DoSomething(Param1, Param2);
        /* ... */
    }
} 
```

现在测试应该是什么样子：

```
private IMyService myService;

[SetUp]
public void SetUp()
{
    IAuxilaryService1 service1 = new Mock<IAuxilaryService1>();
    IAuxilaryService2 service2 = new Mock<IAuxilaryService2>();
    IAuxilaryService3 service3 = new Mock<IAuxilaryService3>();
    myService = new MyService(service1.Object,
                              service2.Object,
                              service3.Object);       
}

[Test]
public void MyService_DoSomethingTest()
{
    // Arrange
    webService = new Mock<IWebService>();

    webService.Setup(x => x.DoSomething(It.IsAny<string>(), It.IsAny<string>()))
              .Returns(new Response() { Status = "Foo"});
    // Act
    myService.DoSomething("Param1", "Param2", webService.Object);
    // Assert
    webService.Verify(x => x.DoSomething(It.IsAny<string>(),It.IsAny<string>()));
} 
```

顺便说一句，您在方法内部实例化 webService`DoSomething`并将 webService 分配给类字段，这很奇怪。也许您还需要通过构造函数将 webService 传递给您的类？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:22:15.317

您永远不会将模拟实例注入到`myService`. 您可以创建一个构造函数来注入依赖项。像这样的东西

```
 public MyService(IWebService service)
  {
      this.service = service;
  } 
```

然后你必须在你的测试中使用这个构造函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:24:38.777

由于这一行，实现没有使用模拟实例：

```
service = new WebService(auxilaryService1, auxilaryService2, auxilaryService3); 
```

欢迎使用依赖注入。如果你想模拟这个对象，`MyService`需要请求它而不是制造它。

使您的代码如下所示：

```
private readonly IWebService webService;

public MyService(IWebService webService)
{
  this.webService = webService;
}

public void DoSomething(...)
{
   var response = webService.DoSomething(Param1, Param2);
    /* ... */
} 
```

在您的测试中，您需要将模拟实例传递给构造函数：

```
IMyService myService = new MyService(webService); 
```

# c# - 如何将自定义 EndPointBehavior 添加到服务的 web.config？

> ID：15636874
> 
> 赞同：11
> 
> 时间：2013-03-26T12:16:32.393
> 
> 标签：c#, asp.net, wcf

我已经关注[了这篇文章](http://www.codeproject.com/Articles/352678/Add-Custom-Message-Header-in-WCF-4-Calls)，并创建`MyMessageInspector`和`MyEndPointBehavior`分类如下：

```
public class MyMessageInspector : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    { 
        Console.WriteLine("Incoming request: {0}", request);
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
    }
}

public class MyEndPointBehavior : IEndpointBehavior
{
    #region IEndpointBehavior Members

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {
        ChannelDispatcher channelDispatcher = endpointDispatcher.ChannelDispatcher;
        if (channelDispatcher != null)
        {
            foreach (EndpointDispatcher ed in channelDispatcher.Endpoints)
            {
                ed.DispatchRuntime.MessageInspectors.Add(new MyMessageInspector());
            }
        }
    }

    public void Validate(ServiceEndpoint endpoint)
    {
    }

    #endregion
} 
```

如何将 MyEndPointBehavior 添加到 web.config？

我添加了以下扩展：

```
<extensions>
  <behaviorExtensions>
    <add name="myMessageInspector" type="MessageInspectorProject.MyEndPointBehavior, MessageInspectorProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions> 
```

但是当我尝试在下面使用它时，它会抱怨：

```
<serviceBehaviors>
    <behavior>
      <myMessageInspector/> 
```

它的抱怨如下：

> 配置中的元素无效。扩展“myMessageInspector”不是从正确的扩展基类型“System.ServiceModel.Configuration.BehaviorExtensionElement”派生的。

如何添加`MyEndPointBehavior`到 web.config？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-09-13T14:08:44.537

您还必须创建一个自定义**BehaviorExtensionElement**并在 web.config 文件中使用它。有很多文章可以帮助你喜欢这些

[http://weblogs.asp.net/paolopia/writing-a-wcf-message-inspector](http://weblogs.asp.net/paolopia/writing-a-wcf-message-inspector)

[https://github.com/geersch/WcfMessageLogging](https://github.com/geersch/WcfMessageLogging)

[http://burcakcakiroglu.com/?p=2083](http://burcakcakiroglu.com/?p=2083)

[http://trycatch.me/adding-custom-message-headers-to-a-wcf-service-using-inspectors-behaviors/](http://trycatch.me/adding-custom-message-headers-to-a-wcf-service-using-inspectors-behaviors/)

无论如何，以这种方式修复您的代码

```
public class MyMessageInspector : IDispatchMessageInspector
{
    public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
    {
        Console.WriteLine("Incoming request: {0}", request);
        return null;
    }

    public void BeforeSendReply(ref Message reply, object correlationState)
    {
    }
}

public class MyEndPointBehavior : IEndpointBehavior
{
    #region IEndpointBehavior Members

    public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
    {
    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
    {
        ChannelDispatcher channelDispatcher = endpointDispatcher.ChannelDispatcher;
        if (channelDispatcher != null)
        {
            foreach (EndpointDispatcher ed in channelDispatcher.Endpoints)
            {
                ed.DispatchRuntime.MessageInspectors.Add(new MyMessageInspector());
            }
        }
    }

    public void Validate(ServiceEndpoint endpoint)
    {
    }

    #endregion
} 
```

在这里添加新的 BehaviorExtensionElement

```
public class CustomBehaviorExtensionElement : BehaviorExtensionElement
{
    protected override object CreateBehavior()
    {
        return new MyEndPointBehavior();
    }

    public override Type BehaviorType
    {
        get
        {
            return typeof(MyEndPointBehavior);
        }
    }
} 
```

并更新您的 web.config

```
<extensions>
  <behaviorExtensions>
    <add name="myMessageInspector" type="MessageInspectorProject.CustomBehaviorExtensionElement, MessageInspectorProject"/>
  </behaviorExtensions>
</extensions>

<behaviors>
  <endpointBehaviors>
    <behavior>
      <myMessageInspector />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-12T16:52:41.530

对我来说足以删除 web.config 中的程序集版本

```
Version=3.0.0.0, Culture=neutral, PublicKeyToken=null 
```

# css - CSS链接烦人的问题

> ID：15636887
> 
> 赞同：0
> 
> 时间：2013-03-26T12:17:24.760
> 
> 标签：css, hyperlink

好的，所以我已经为我的链接设置了这样的样式：

```
a:link{ color: red; }
a:visited{ color: red; }
a:hover{ color: blue; }
a:active{ color: red; }

a { text-decoration: none; } 
```

现在我还有一个页脚部分#footer，我想对其中的所有链接应用不同的颜色，如下所示：

```
#footer a:link{ color: green; }
#footer a:visited{ color: green; }
#footer a:hover{ color: yellow; }
#footer a:active{ color: green; } 
```

问题是我还有一个与#footer 内的一类.button 的链接：

```
.button { color: cyan; background: gray; border: none; } 
```

页脚内链接的样式覆盖了我的按钮的“颜色”，因此它变为绿色而不是青色。

我已将页脚链接的样式放在我的 CSS 底部，但它不起作用。

我知道我可以在按钮的“颜色”上使用“！重要”，但我只是想知道是否有其他方法可以解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:21:02.030

尝试这个：

```
#footer a.button:link { color: cyan; background: gray; border: none; } 
```

它将覆盖其他样式，因为它更具体。它针对任何“未访问的”“a”元素，其按钮类位于 ID 为“footer”的元素内。

CSS-tricks 是一个很好的 CSS 资源，有一篇很好的文章： [http ://css-tricks.com/specifics-on-css-specificity/](http://css-tricks.com/specifics-on-css-specificity/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:20:53.273

您遇到了[specificity](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的问题。

比规则`#footer a:link`更具体`.button`（103 vs 10），因此它会覆盖它。

`button`因此，您需要针对页脚内部的 s制定更具体的规则。例如，这可能是：

```
.button, #footer a.button:link { color: cyan; background: gray; border: none; } 
```

### 也可以看看：

*   [特异性计算器](http://specificity.keegan.st/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T12:19:14.693

特异性不够高。`.button`你可以加上前缀`#footer`来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T12:21:18.437

尝试使用按钮的完整路径：

```
#footer a.button:link { color: cyan; background: gray; border: none; } 
```

或者你也可以同时保留

```
.button,
#footer a.button:link { color: cyan; background: gray; border: none; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-26T12:45:10.263

id 是比类更强的选择器。

这就是为什么你必须使用 `#footer .button`

例如在这样的标记中

```
<div class="red" id="green">Some text</div> 
```

并使用以下CSS：

```
#green{color: green}
.red{color:red } 
```

结果将是绿色的，即使类*.red*声明在样式表中比*#green 晚*

Id 规则可以被*!important*或内联样式覆盖。

在 codepen 上检查[这里](http://codepen.io/domkoscielak/pen/GHkEu)

# jpa - 按日期的日期部分分组条件 API 查询的结果

> ID：15636888
> 
> 赞同：0
> 
> 时间：2013-03-26T12:17:26.017
> 
> 标签：jpa, jpa-2.0, criteria-api

在 Criteria API 中，我必须根据查询中返回的日期列的日期部分对查询结果进行分组。你能建议如何做到这一点吗？

以下是多选查询

**cq.multiselect(root.get("id"), root.get("recievedOn")) ;**

其中 recievedOn 是日期列。我想根据日、周、月和年对查询进行分组。你能建议如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:36:06.843

如果您使用 GROUP BY，那么您只能按分组依据的字段进行选择，或者应用聚合函数（count/min/max/etc），所以我不确定您要做什么？

按日期分组很容易，但如果您只想按日期的特定部分分组，则需要使用函数。Criteria API 没有定义任何日期函数，但您可以使用 function() API 来调用特定的数据库函数。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Criteria#Group_By](http://en.wikibooks.org/wiki/Java_Persistence/Criteria#Group_By)

[http://en.wikibooks.org/wiki/Java_Persistence/Criteria#Criteria_API_special_functions](http://en.wikibooks.org/wiki/Java_Persistence/Criteria#Criteria_API_special_functions)

如果您使用的是 EclipseLink，您还可以将 Expression 对象与 Criteria 结合起来以获得额外的功能支持，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#JpaCriteriaBuilder_and_EclipseLink_Extensions](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/Criteria#JpaCriteriaBuilder_and_EclipseLink_Extensions)

或者你可以使用 JPQL，它有更多的扩展，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_extract.htm#extract](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/j_extract.htm#extract)

# jsf - 在支持 bean 方法中调用 HttpServletResponse#sendRedirect() 不适用于所有页面

> ID：15636889
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:17:28.590
> 
> 标签：jsf, redirect

我有以下 JSF 支持 bean 方法，它应该根据某些条件执行重定向。

```
public void navigationStatus() throws IOException {
    log(LogMessages.getLogString(user, currentDatasource, nomeClasse, "navigationStatus", "navigationStatus"), null);
    logger.debug("INSIDE  navigationStatus ");
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();

    if (!isUserEnabled()) {
        log(LogMessages.getLogString(user, currentDatasource, nomeClasse, "navigationStatus", "Sessione utente SCADUTA"), null);
        logger.debug("Sessione utente SCADUTA");
        response.sendRedirect("error.jsp");         
    }
} 
```

然而，这并不适用于所有页面。它适用于某些页面，但不适用于其他页面。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:45:38.367

在以下情况下肯定会失败：

1.  传入的 HTTP 请求是一个 ajax 请求。
2.  HTTP 响应已经提交。

要解决/避免它们，您需要：

1.  使用标准的 JSF API 方法来发送重定向，而不是从 JSF 的引擎盖下拖拉原始 Servlet API，而后者又对它运行的 JSF 上下文一无所知。

    ```
    context.getExternalContext().redirect("error.jsp"); 
    ```

    那么传入的 HTTP 请求是一个 ajax 请求，那么上述方法将透明地返回正确的 XML 响应，正如 JSF ajax 引擎所期望的那样。

    将来，当您需要从`javax.servlet.*`JSF 支持 bean 中的包中导入某些内容时，您应该立即停止编码并问自己是否真的没有标准的 JSF 方式来完成您的工作。

2.  在渲染响应阶段之前执行作业。如果您在例如构造函数或`@PostConstruct`请求/视图范围的支持 bean 中执行此操作，该 bean 第一次在页面“中途”被引用，那么发送重定向可能为时已晚，因为第一部分HTTP 响应已经发送到客户端。这是一个不归路，您只会`IllegalStateException`在服务器日志中找到所有位置。

    如果确实如此，那么您需要通过`<f:event>`监听来调用作业`preRenderView`。

    ```
    <f:event type="preRenderView" listener="#{bean.navigationStatus}" /> 
    ```

# android - 在 ViewPager 中显示页面标题

> ID：15636891
> 
> 赞同：3
> 
> 时间：2013-03-26T12:17:30.467
> 
> 标签：android, android-viewpager, viewpagerindicator

我正在使用`ViewPager`和开发一个应用程序`TitlePageIndicator`。`ViewPagerIndicator`我`PagerTitleStrip`用来显示每个页面的标题，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/5569a72477baad7b77929d9595f9574c.png)

标题显示在 下方`TitlePageIndicator`，但我希望标题显示在 上方`TitlePageIndicator`。有可能这样做吗？目前我正在使用`PagerTitleStrip`显示标题。

主要活动的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >
<com.viewpagerindicator.TitlePageIndicator
android:id="@+id/titles"
android:layout_height="wrap_content"
android:layout_width="fill_parent" /> 
<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_below="@id/titles"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <android.support.v4.view.PagerTitleStrip
    android:id="@+id/title_strip"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top"
    android:paddingTop="4dp"
    android:paddingBottom="4dp" />

</android.support.v4.view.ViewPager>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:48:20.000

it will be easier if you use android.support.v4.view.PagerTabStrip instead,like

```
<android.support.v4.view.PagerTabStrip
            android:id="@+id/pager_tab_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/pager"
            android:layout_gravity="top"
            android:background="#000000"
            android:paddingBottom="4dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:paddingTop="4dp"
            android:textColor="#ffffff" /> 
```

# jsp - url映射到编译的jsp（servlet）不起作用

> ID：15636893
> 
> 赞同：1
> 
> 时间：2013-03-26T12:17:33.870
> 
> 标签：jsp, tomcat, url-mapping

我直接在Tomcat的webapp目录下写了一个简单的web app，通过localhost url访问了hello.jsp文件。我现在要做的是对上一步中编译的 servlet 类进行 url 映射。我的 web.xml 代码如下：

我希望能够指向以“/hi”结尾的 url 并运行已编译的 jsp。任何帮助，将不胜感激。

```
<welcome-file-list>
    <welcome-file>hello.jsp</welcome-file>
</welcome-file-list>

<servlet>
    <servlet-name>hi</servlet-name>
        <servlet-class>org.apache.jsp.hello_jsp</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>hi</servlet-name>
    <url-pattern>/hi</url-pattern>
</servlet-mapping> 
```

目前，当我尝试从指定的 url 模式访问它时，我得到了这个堆栈跟踪：

```
type Exception report

message Error instantiating servlet class org.apache.jsp.hello_jsp

description The server encountered an internal error that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: Error instantiating servlet class org.apache.jsp.hello_jsp
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
root cause

java.lang.ClassNotFoundException: org.apache.jsp.hello_jsp
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.35 logs. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:05:33.217

这确实是不对的。您需要使用`<jsp-file>`而不是`<servlet-class>`. 毕竟，您在源代码中只是一个 JSP 文件，而不是一个 servlet 类。

```
<servlet>
    <servlet-name>hi</servlet-name>
    <jsp-file>/hello.jsp</jsp-file>
</servlet>
<servlet-mapping>
    <servlet-name>hi</servlet-name>
    <url-pattern>/hi</url-pattern>
</servlet-mapping> 
```

# php - 使用代码检测 IP 地址并根据 IP 地址更改代码

> ID：15636895
> 
> 赞同：0
> 
> 时间：2013-03-26T12:17:44.357
> 
> 标签：php, javascript, networking, routing, connection

我有一个小问题。我正在使用 PHP 中的网站在 Host Gator 上调用我的主机站点上的网页。问题是 URL 指向我自己的 IP 地址，并且端口转发到我 LAN 上的特定 PC。除非是我尝试访问该网页，否则它可以完美运行。我必须使用本地 IP 地址来访问其他人可以看到的相同结果。在我的网络中我无能为力，我正在使用带有静态 IP 的 Comcast Business，当使用我的 WAN IP 地址时，它根本不会离开 LAN 并反射回 WAN IP。所以我想了几个解决方案：

一种是使用 javascript 或其他东西来检测请求的 IP 地址，如果地址是我的，它会将 URL 更改为我的本地 IP。那我不知道该怎么办。第二种选择是在托管网站上使用 PHP 来收集结果，方法是：

```
$homepage = file_get_contents('http://MYWANURL);
echo $homepage; 
```

其中 MYWANURL 我的 URL 可以从 Internet 访问。问题是此代码返回为空。我从来没有遇到过使用 file_get_contents 从我的托管公司获取其他网站的问题。如果我在我的局域网中使用相同的代码，在本地 php 服务器上使用我的局域网地址，我正在寻找的输出工作完美。

所以我的问题是，有没有办法在我的托管公司上通过 javascript 或 PHP 使用，以便我可以看到与局域网外的人相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:25:09.763

不确定我是否正确理解了您的问题，但我有以下设置（Ubuntu，in `/etc/hosts`）

```
127.0.0.1      yourhost.com 
```

这样，数据包将永远不会离开您的计算机，并将立即重定向到指定的接口。但是，如果这是您的路由器问题，您必须将相同的更改移植到 LAN 中的所有主机（或者如果您使用一个，则更新您的本地 DNS 服务器）

# string - 字符串返回函数重定向到 Asp.Net MVC 中的其他页面

> ID：15636896
> 
> 赞同：0
> 
> 时间：2013-03-26T12:17:49.720
> 
> 标签：string, function, redirect, output

我有一个从该函数返回字符串值的函数。下面显示了我的一些代码

```
<code>
public string MainPane()
{
 if (Request.Cookies["Cookie"] != null)
 {
  try
  {
    //DO Something code here
  }
  catch (Exception ex)
  {

  }
  return("");
}
else
{
  //I need to redirect from here when cookie value is null
}
</code> 
```

谢谢，

尼拉夫·帕里克

* * *

这是我的 asp.net MVC 应用程序所以

```
Response.Redirect("Index"); 
```

此功能不可用。我试过

```
RedirectToAction("Action Name","Controller Name"); 
```

但是函数返回字符串值并且 RedirectToAction 不返回字符串。

谢谢，尼拉夫

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T12:35:44.550

您可以使用 ：

```
Response.Redirect("Index"); 
```

它会重定向您，而您无需返回 ActionResult。

# javascript - 有没有办法调试写入新窗口的代码

> ID：15636898
> 
> 赞同：0
> 
> 时间：2013-03-26T12:17:52.360
> 
> 标签：javascript, google-chrome-devtools

无论如何要调试从父级写入新窗口的代码？

我尝试过 innerHTML、textContent、document.write 和 append child。但是它们都没有出现在 chrome/ff 的源控制台中。任何关联的文件都会这样做，但源本身不会。

也许有一种方法可以使用套接字或其他一些 API 来做到这一点......

这是我执行 doc.write() 或任何其他方法后的样子，非常简单：/

![在此处输入图像描述](../Images/57967d164d7b786dc72bc2abc786cc5a.png)

*注意：如果我包含对文件的引用，`<script src="jquery.js"></script>`则可以调试该文件，但不能在根 html 页面本身中嵌入任何脚本。

我最后的方法是将所有脚本放在一个文件中并从窗口链接到它们，但如果可能的话，能够自己调试窗口脚本也会很好。因为我的解决方案将是动态的，并且在 js 中创建新窗口比创建文件更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:37:51.017

> 我尝试过 innerHTML、textContent、document.write 和 append child。但是它们都没有出现在 chrome/ff 的源控制台中。任何关联的文件都会这样做，但源本身不会。

应该是这样的。这些方法都不会生成/更改文件的源，并且您`index.html`是故意为空的。如果您使用`data:`-URI，我想您可以检查它的来源。

上面所有的方法都确实修改了 DOM，所以你可以在 DOM 检查器（`Elements`你的开发工具的选项卡）中查看结果。或者，在 的情况下`document.write`，它们会拦截导致从与源不同的流创建的 DOM 的解析器。

要检查`document.write`以纯文本形式写入的内容，您可以将它们包装在 logger 函数中：

```
(function (d) {
     var w = d.write,
         wl = d.writeln;
     d.write = function() {
         this.source = (this.source || "") + [].join.call(arguments);
         w.apply(this, arguments);
     };
     d.writeln = function() {
         this.source = (this.source || "") + [].join.call(arguments) + "\n";
         w.apply(this, arguments);
     };
})(theDocumentYoureWritingTo);

// after you're done, you can
console.log(theDocumentYouWroteTo.source); 
```

# ios - iOS 外接 USB 摄像头/网络摄像头

> ID：15636899
> 
> 赞同：5
> 
> 时间：2013-03-26T12:17:52.617
> 
> 标签：ios, camera, usb, webcam

如何通过 USB 将外部网络摄像头/摄像头连接到 iPhone/iPad 并以编程方式访问网络摄像头（从中获取图像）而无需越狱？

我很确定这对于以前的 iOS API 是不可能的，但也许使用 iOS 6 中增强的外围设备 API 可以做到？该问题要求提供有关如何执行此操作的指示。

*[Google 提供了大量关于如何将 iPad 或 iPhone**用作**网络摄像头的建议和应用程序，但这个问题涉及如何将网络摄像头连接到 iDevice 并在应用程序中使用它]*

# mysql - RDS 和 pt-table-sync。表无法同步。如何解决这个问题？

> ID：15636906
> 
> 赞同：2
> 
> 时间：2013-03-26T12:18:10.893
> 
> 标签：mysql, sync, percona, rds

我正在尝试使用 pt-table-sync 同步到表。问题是 RDS`bilong_format`设置为`MIXED`和工具需要`STATEMENT`。而且我们没有超级特权来改变它。

我怎样才能解决这个问题并同步我的表格？

错误描述如下：

```
This tool requires binlog_format=STATEMENT, but the current binlog_format is set to MIXED and an error occurred while attempting to change it.  If running MySQL 5.1.29 or newer, setting binlog_format requires the SUPER privilege.  You will need to manually set binlog_format to 'STATEMENT' before running this tool. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:49:46.860

# 建议

运行时`pt-table-sync`，不要使用该`--execute`选项，因为它可能需要所有必要的授权。尝试使用`--sync-to-master`and`--print`并将输出重定向到 SQL 文本文件。如果生成了 SQL 文本文件，请查看 SQL 文本文件的内部。

*如果 SQL 文本文件只包含`REPLACE`statements*，只需在 Master 上运行 SQL 文本文件。它会将所有内容复制到从站。

*如果它甚至包含一个`DELETE`语句*，最好放弃 RDS 从站并启动一个新的只读 RDS 从站。

试试看 ！！！

# iphone - avaudioplayer 完成播放后请求回叫或通知

> ID：15636908
> 
> 赞同：0
> 
> 时间：2013-03-26T12:18:28.600
> 
> 标签：iphone, ios, objective-c, avaudioplayer

我在音频播放器模块中工作，它需要一个音频文件并播放。我正在使用 AvAudioPlayer 播放我的音频文件，它按预期工作，一旦完成音频播放，我就会收到回调。到目前为止，我已经通过 负值的**numberOfLoops属性实现了循环，这很好。**在某种情况下，一旦当前音频第一次播放完毕，我就需要回调。有没有办法让回电或观察者通知我我的音频第一次播放。

我的想法是我们可以通过运行计时器来实现这一点。最好的方法是什么？

**通用：** 每次音频播放完成时都会收到通知，即使它也有无限循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:07:03.833

首先使 numberofloops=0 使用此委托方法，因此此方法将调用 - (void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) appSoundPlayer succeeded: (BOOL) flag

然后在该方法中，您可以使 numberofloops= -1 以便您可以获得第一个通知，然后循环继续。和[玩家玩]..

如果你在 audioPlayerDidFinishPlaying 中写入 numberofloops= 0 并播放，那么每次 audioPlayerDidFinishPlaying 都会像循环一样调用......你可以获得每个......

# android - 在另一个 Android 应用程序中打开

> ID：15636911
> 
> 赞同：6
> 
> 时间：2013-03-26T12:18:37.170
> 
> 标签：android, android-intent, android-activity

我正在尝试通过单击按钮在另一个中打开一个不同的、已安装的 android 应用程序。新应用程序应在调用应用程序内的部分屏幕中打开。

目前，我的代码创建了一个新意图并在其中运行被调用的应用程序。调用应用程序消失。这是我的代码：

```
 b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            PackageManager pm = getPackageManager();
            Intent intent = pm.getLaunchIntentForPackage("com.ritwik.camera");
            startActivity(intent);
        }

    }); 
```

理想情况下，它应该作为同一屏幕的一部分打开，而不会排挤父（调用）应用程序。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T12:26:08.737

当您启动 Intent 以执行另一个应用程序（即，因为您正在实现启动器或主菜单替换）时，您实际上是在要求 android 执行使用特定包标识的应用程序（或满足某些特定约束的应用程序，例如能够处理图像，视频等），没有任何关于它包含的活动的线索或参考（也没有能力获得任何......）。

因此，我认为当前版本的操作系统不可能实现您想要实现的目标（除非某些供应商提供扩展来做到这一点，请参阅 Pratik 的评论）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:21:07.953

据我所知，这是不可能的。您只能启动新活动，但您无法控制它。

**编辑：某些设备使用**[Cornerstone](http://www.onskreen.com/cornerstone/)或类似框架提供这种可能性，但我还没有看到开发人员可以将其用于自己的应用程序的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T13:50:39.763

> 新应用程序应在调用应用程序内的部分屏幕中打开。

这对于传统的第三方应用程序 UI 是不可能的。

> AFAIK，从 Android 3.0 开始支持分屏功能（自适应 UI）。

这与将第三方应用程序的 UI 嵌入您自己的应用程序无关。

> 所以我没有明白你的意思是“当前版本的操作系统不可能”

截至 2013 年 3 月 26 日东部时间上午 9:50 发布的任何 Android 库存版本均不提供此功能。

某些设备制造商，如三星，已通过多窗口功能扩展了 Android。但是，对这些窗口的控制权在于用户和（修改后的）操作系统。除非他们的 S-Pen SDK 中有此功能，否则您无法启动另一个窗口。

Android 也有`RemoteViews`，这是在进程之间传递简化 UI 的一种方式。使用它，一个应用程序可以嵌入`RemoteViews`另一个应用程序发布的内容。例如，您可以通过主屏幕上的应用小部件看到这一点。但是，编写这两个应用程序时都必须牢记这一点，例如发布`AppWidgetProvider`应用程序以向主屏幕提供应用程序小部件。

# jquery - 选择并拖动多个列表项（jQuery ui 可排序）

> ID：15636914
> 
> 赞同：4
> 
> 时间：2013-03-26T12:18:47.600
> 
> 标签：jquery, user-interface

我找到了很好的解决方案（最后一个答案）：

[jQuery Sortable - 选择并拖动多个列表项](https://stackoverflow.com/questions/3774755/jquery-sortable-select-and-drag-multiple-list-items)

[http://jsfiddle.net/hQnWG/480/](http://jsfiddle.net/hQnWG/480/)

**HTML：**

```
<ul>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
</ul>
<ul>
    <li>Four</li>
    <li>Five</li>
    <li>Six</li>
</ul> 
```

**JavaScript（带有 jQ​​uery 和 jQuery UI）：**

```
$("ul").on('click', 'li', function (e) {
    if (e.ctrlKey || e.metaKey) {
        $(this).toggleClass("selected");
    } else {
        $(this).addClass("selected").siblings().removeClass('selected');
    }
}).sortable({
    connectWith: "ul",
    delay: 150, //Needed to prevent accidental drag when trying to select
    revert: 0,
    helper: function (e, item) {
        var helper = $('<li/>');
        if (!item.hasClass('selected')) {
            item.addClass('selected').siblings().removeClass('selected');
        }
        var elements = item.parent().children('.selected').clone();
        item.data('multidrag', elements).siblings('.selected').remove();
        return helper.append(elements);
    },
    stop: function (e, info) {
        info.item.after(info.item.data('multidrag')).remove();
    }

}); 
```

它工作得很好，但是当我在 Google Chrome 中拖动两个或更多元素时，JS 控制台显示此错误：

> 未捕获的类型错误：无法调用 null 的方法“insertBefore”

我如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-09T13:49:49.420

我认为它是 jquery-UI _rearrange 函数中的一个错误......所以我做了一个 hack，它覆盖了那个方法......在 dom 准备好之后插入下面的代码......这将解决这个问题

```
$.ui.sortable.prototype._rearrange = function (event, i, a, hardRefresh) {

                a ? a[0].appendChild(this.placeholder[0]) : (i.item[0].parentNode) ? i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling)) : i.item[0];
                this.counter = this.counter ? ++this.counter : 1;
                var counter = this.counter;

                this._delay(function () {
                    if (counter === this.counter) {
                        this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
                    }
                });

            } 
```

这是小提琴

[http://jsfiddle.net/r83zY/](http://jsfiddle.net/r83zY/)

# windows - 通过批处理文件将没有空格的行提取到文本文件中

> ID：15636922
> 
> 赞同：0
> 
> 时间：2013-03-26T12:19:22.510
> 
> 标签：windows, batch-file

提前感谢您通过`batch`文件提供的宝贵意见，我正在尝试将那些以空格开头的内容`read line by line a text file` **除外。**

我试过这个：

for /f "eol=^"" " %%x in (file.txt) 做回显。%%x>out 我所做的也是从文件中读取以空格开头的行。

我也试过这个： for /f "tokens=*" %%a in ('find /v ^" " %1') do ( echo.%%a pause 控制台输出为空。

假设我的文件看起来像这样：

画点东西

***** ** *** ** *****第 1***步** ** *** ******

画点别的

============================= ........... …………

对于此示例，我必须逐行阅读

画点东西

画点别的

任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:34:12.837

哦，这很容易！

```
findstr /v /b /c:" " <file.txt 
```

查找以**文字字符串****开头的行****除外** `/v` **`/b` **`" "`** `/c:" "`**

 **`findstr /?`从 docco 的提示中看到...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:48:57.233

您找到了正确的 FOR /F 选项，但未能找到正确的用法。以 EOL 字符开头的所有行都将被跳过，之后的下一个字符`EOL=`始终是 EOL 字符。您只需要在等号后留一个空格。

您还想保留整行，因此您需要将 DELIMS 设置为空。

```
for /f  "eol= delims=" %%x in (file.txt) do echo. %%x>out 
```

Peter Wright 的 FINDSTR 解决方案是一种消除以空格开头的线条的更简单方法。但我假设您想对不以空格开头的每一行进行额外的处理。**

# android - Android：如何创建这样的自定义电池条？

> ID：15636923
> 
> 赞同：0
> 
> 时间：2013-03-26T12:19:24.320
> 
> 标签：android, canvas, shape, battery, indicator

![](../Images/cbccc7809cb3f09afe9e661b50e8dcbd.png) ![](../Images/998e7941e2b688948b6dfe6c705e73ae.png) ![](../Images/5c328109590f9a1d8d06de1a65d87ebf.png)

该应用程序名为：SAO Widget

电池条有不同的颜色

并且酒吧将适合独特的形状背景

电池百分比也倾斜

使用 ImageView 或 ProgressBar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:36:44.253

您可以使用具有自定义背景和自定义更新颜色的进度条来获得此结果，您可以在获取面糊百分比值后设置进度条。

# neo4j - 如何在 .net neo4j 客户端中将关系属性作为参数传递？

> ID：15636924
> 
> 赞同：1
> 
> 时间：2013-03-26T12:19:26.140
> 
> 标签：neo4j, neo4jclient

我想将参数传递到查询中，以便可以在 CreateUnique 中使用关系属性。我更喜欢使用参数而不是仅仅使用字符串格式，以便它可以保护（我是否正确假设参数受密码注入保护？）免受密码注入。

```
 var query = client.Cypher.Start(
                new CypherStartBitWithNodeIndexLookup("left", AUTOINDEX, PrimaryIndexKey, uname),
                new CypherStartBitWithNodeIndexLookupWithSingleParameter("right", AUTOINDEX, luceneQuery)
                ).CreateUnique("left-[r:Installed {DeviceId:{DeviceId},OS:{OS}}]->right").Return<Software>("right"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T15:49:18.060

**更新：**最后这是一个简单的添加，所以我继续添加它。从 1.0.0.517 开始，下面链接的提案现已在 NuGet 上实施并可用。

您的查询可以是：

```
var query = client
    .Cypher
    .Start(
        new CypherStartBitWithNodeIndexLookup("left", AUTOINDEX, PrimaryIndexKey, uname),
        new CypherStartBitWithNodeIndexLookupWithSingleParameter("right", AUTOINDEX, luceneQuery)
    )
    .CreateUnique("left-[r:Installed {DeviceId:{DeviceId},OS:{OS}}]->right")
    .WithParam("DeviceId", 123)
    .WithParam("OS", "Windows 8")
    .Return<Software>("right"); 
```

* * *

你现在不能很好地做到这一点。

是的，Cypher 参数都是安全的，不会被注入。我们以完全不同的结构将它们通过网络传递，使它们与查询文本分开。在 Neo4j 中，它们的存储独立于查询的执行计划。

我在[https://bitbucket.org/Readify/neo4jclient/issue/66/support-custom-parameters-in-cypher-fluent](https://bitbucket.org/Readify/neo4jclient/issue/66/support-custom-parameters-in-cypher-fluent)打开了一个问题，并提出了语法，以便我们可以实现它。如果您查看提案并在那里合作，我们可以很快得到它。

作为一种解决方法，您*可能*会这样做：

```
var query = client
    .Cypher
    .Start(
        new CypherStartBitWithNodeIndexLookup("left", AUTOINDEX, PrimaryIndexKey, uname),
        new CypherStartBitWithNodeIndexLookupWithSingleParameter("right", AUTOINDEX, luceneQuery)
    )
    .CreateUnique("left-[r:Installed {DeviceId:{DeviceId},OS:{OS}}]->right")
    .Return<Software>("right")
    .Query;

query.QueryParameters.Add("DeviceId", 123);
query.QueryParameters.Add("OS", "Windows 8");

var results = client.ExecuteGetCypherResults<Software>(query); 
```

不过，我在答案框中写了该代码，但尚未对其进行测试，它既可怕又丑陋，我希望您不要使用它。

# javascript - 从工具栏的 JavaScript 中显示 FireFox 工具栏

> ID：15636925
> 
> 赞同：1
> 
> 时间：2013-03-26T12:19:27.650
> 
> 标签：javascript, hide, xul, show, toolbar

我正在整理一个仅与少数网站相关的 FireFox 工具栏。

目前，我有代码可以检查用户是否正在查看其中一个站点，并根据该检查启用和禁用工具栏控件 - 这一切都很好。

但是，我想扩展它，以便如果当前未显示工具栏并且用户访问相关站点之一，则工具栏会自动显示。

我已经尝试检查和设置toolbar.hidden 属性（在我的XUL 中设置），但即使通过取消选择隐藏工具栏，它似乎也不会永久设置为“false”（根据.xul 文件中的值）它在视图->工具栏菜单中。

我为此使用的代码如下：

```
checkMyToolBarVisible: function()
{
    if ( document.getElementById("MyToolBar-Toolbar").hidden == true )
    {
        document.getElementById("MyToolBar-Toolbar").hidden = false;
    }
}, 
```

我为此添加了一个 if 语句来报告隐藏属性/属性的当前状态，但正如我所说，即使未显示工具栏，它也总是报告 hidden=false。但是，该功能正常触发，所以问题不在于工具栏未显示时我的工具栏代码被忽略。

查看文档 toolbar.hidden 甚至可能不是受支持的属性，所以如果这是可能的，那么我想我正在查看要检查和设置的错误属性。

这可能吗？如果是这样，我应该使用什么属性？

谢谢，

调频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:24:53.903

再次证明在论坛上提问意味着您自己会很快找到答案，而不是稍后我发现答案是一些示例代码，同时查看一个完全不同的问题！

参数为：.collapsed，即

```
checkMyToolBarVisible: function()
{
    if ( document.getElementById("MyToolBar-Toolbar").collapsed == true )
    {
        document.getElementById("MyToolBar-Toolbar").collapsed = false;
    }
}, 
```

所以，一切都排序了......希望有人发现这很有用，因为我在任何地方都找不到在这种情况下的任何参考。

-调频

# django - 将（使用 |add: ?）添加到 django 模板中的变量值

> ID：15636928
> 
> 赞同：0
> 
> 时间：2013-03-26T12:19:40.057
> 
> 标签：django, django-templates, django-views

我一直在尝试使用 django，并且正在尝试使用教程。所以，我现在有一个`View`类，它会吐出一个`queryset`- 我在模板中访问它，如下所示：

```
<a id="{{i.0}}" .....##whatever goes here 
```

效果很好。我想做的是在`x`{{io}} 的值之前添加字符 - 但我不确定如何执行此操作。所以，我可以附加使用：

```
<a id="{{i.0|add:"x"}}" .....##whatever goes here 
```

但是，我该怎么做？

任何指导都会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:20:26.633

```
<a id="x{{ i.0 }}" .....##whatever goes here 
```

# c# - 如何添加存储在 Label.Text 中的数字

> ID：15636931
> 
> 赞同：0
> 
> 时间：2013-03-26T12:19:51.900
> 
> 标签：c#, asp.net, string, int, label

我基本上想合计金额。金额存储在标签中。我想添加标签。基本上我想添加标签，但我不能，因为标签就是`.Text`这样，`String`所以当我添加它时，我会得到一串添加的标签，而我希望添加存储在标签中的数字。这是我下面的代码。

```
protected void DropDownList3_SelectedIndexChanged(object sender, EventArgs e)
{
    temp4 = Int32.Parse(DropDownList3.Text);
    temp5 = temp4 * 76;
    Label7.Text = temp5.ToString();
} 
```

单击按钮后，Label7 中的数量应与另一个标签一起添加。

```
protected void ImageButton3_Click(object sender, ImageClickEventArgs e)
{
    Label16.Text = Label7.Text+Label6.Text;
} 
```

这样总金额就可以查到了。

我对编程和它本身有点陌生，这是我项目的一部分，如果这个问题看起来很愚蠢，我很抱歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:21:34.740

将两个标签的 Text 属性解析为整数，然后进行加法。

```
Label16.Text = (int.Parse(Label7.Text) + int.Parse(Label6.Text)).ToString(); 
```

如果您可以使用[`int.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)which 如果文本不是数字，则可以将您从异常中拯救出来，那就更好了。

```
int number1;
int number2;
if(!int.TryParse(Label7.Text, out number1))
{
   // invalid number in Label7
}

if(!int.TryParse(Label6.Text, out number2))
{
   // invalid number in Label6
}

Label16.Text = (number1 + number2).ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T12:21:38.143

```
Label16.Text = (int.parse(Label7.Text)+int.parse(Label6.Text)).toString(); 
```

使用上面的代码。

将您的添加转换为字符串数据类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-26T12:21:43.657

Label7.Text 是字符串类型，可以加int，所以要转换。毕竟你已经将int转换回字符串

```
Label16.Text = (int.Parse(Label7.Text)+int.Parse(Label6.Text)).ToString(); 
```

尝试重命名您的控件和 var。例如 lblAmount 告诉你比 Label6 更多。请阅读有关骆驼，帕斯卡转换的信息，它将在将来对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T12:24:52.193

两种解决方案：

1-您可以解析每个文本以转换为 Int32，您可以添加然后使用 ToString() 转换为文本

```
 protected void ImageButton3_Click(object sender, ImageClickEventArgs e) 
 { 
 Label16.Text = (Int32.Parse(Label17.Text) + Int32.Parse(Label6.Text)).ToString();
 } 
```

2- 在每次转换时，您可以将值保存在 Int32 类型的私有属性中，并使用它们。

# python - 更新选择列表自定义字段 - Jira Python

> ID：15636935
> 
> 赞同：4
> 
> 时间：2013-03-26T12:20:03.487
> 
> 标签：python, jira, jira-rest-java-api

我有一个名为“ *Status* ”的自定义字段，其 id 为 10100，它是一个**选择列表**，可选值为“*一*”、“*二*”、“*三*”和“*四*”。默认值为“*一*”。

我正在编写一个 JIRA python 脚本来有条件地更新该字段的值。假设现有值为“*一*”，则应将其更改为“*二*”。

这是我的代码。

```
from jira.client import JIRA
jira_options={'server': 'http://localhost:8080'}
jira=JIRA(options=jira_options,basic_auth=('usrname','pwd'))

for issue in jira.search_issues(' cf[10100] = "One" '):
    issue.update(fields={'customfield_10100': 'Two'}) 
```

它给了我以下错误。

```
Traceback (most recent call last):
  File "test.py", line 11, in <module>
    issue.update(fields={'customfield_10100': 'Two'})
  File "C:\Python27\lib\site-packages\jira\resources.py", line 193, in update
    super(Issue, self).update(**data)
  File "C:\Python27\lib\site-packages\jira\resources.py", line 72, in update
    raise_on_error(r)
  File "C:\Python27\lib\site-packages\jira\exceptions.py", line 29, in raise_on_
error
    error = errorMessages[0]
IndexError: list index out of range 
```

你能告诉我可能出了什么问题吗？我使用相同的语法来编辑**文本字段**类型的自定义字段，并且效果很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:16:04.977

试试这样：

```
issue.update(fields={'customfield_10100': {'value':'Two'}}) 
```

或像这样：

```
issue.update(fields={'customfield_10100': {'value','Two'}}) 
```

我不确定哪一个适合你，因为我从未使用过 Python，但其中一个应该可以工作。

# javascript - 以编程方式修复 IE 中的浏览器模式

> ID：15636939
> 
> 赞同：7
> 
> 时间：2013-03-26T12:20:11.323
> 
> 标签：javascript, css, internet-explorer, cross-browser, telerik

我有一个网站**可以在包括 IE 7 到 9 在内的所有浏览器上完全兼容**

当我在 IE-10 上尝试它时，我很震惊，错误太多，而且因为我没有时间为 IE-10 修复这个问题，而且我还在使用第三方控件“Telerik”，所以我决定尝试一个简单的解决方案，转Document和浏览器模式回到ie9。

在 IE-10 的开发人员工具中，如果我手动将文档模式设置为 IE9 标准，将浏览器模式设置为 IE9，所有的错误都会消失，我找到了一种强制 IE-10 使用文档模式的方法：

```
 <meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

但是浏览器模式呢？有没有办法在渲染之前设置它的值？

* * *

**解决方案：我在这个问题中使用的方式是正确的，但是我的解决方案是更新托管服务器中的窗口，有很多更新，怀疑一个是：Windows Server 2008 R2 x64 版的 Internet Explorer 8 兼容性视图列表更新(KB2598845)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:48:13.647

You've already got the *document mode* sorted. Does that not solve the problem? It usually does the trick.

The *browser mode* shouldn't need to come into play, as it doesn't affect the rendering at all; it just changes the UA string, so it shouldn't have any impact on the page layout.... unless there is something in the code that tries to do a browser-specific hack by looking at the UA string.

If you have got something in your code that does that, then that's where the problem is and you should probably fix it. (using the UA string to affect page layout is generally frowned on as a bad practice anyway; there are usually better ways to do it)

If it's Telerik itself that's doing it, then I would imagine they'd have already been forced to find a fix for it (IE10 has been out for a while and they'd have had other users complaining), so you may find that updating to the latest version will solve the problem.

# asp.net-mvc - oracle devart 实体框架 - 添加了新列 - 现在触发 system_id 不更改为唯一的新数字？

> ID：15636942
> 
> 赞同：0
> 
> 时间：2013-03-26T12:20:17.347
> 
> 标签：asp.net-mvc, oracle, entity-framework, devart

oracle 10.4 devart dotConnect - 6.50 ...

MVC2 项目 - 网页

用户填写表格，然后控制器获取新实体并填写。在保存 = 0 之前保存数据库 System_id（它是一个 int/数字 - 所以 no 不能为空）链接的其他几个表，因此它们也有自己的 System_id。当它被保存到数据库时，一些触发器（表有一个存储的触发器，我只能理解为当 system_id=null 被触发时），为 System_id 分配一个新的数字。

这一切都很好。然后我来了，需要一些更新。这个“主”表需要另一个字段（我之前已经将列添加到另一个表，没有问题）

向此“主”表添加列 (restrict_to_me) 现在，当它尝试保存到数据库时 - 它尝试保存“system_id=0”。链接表，也使用 system_id=0 进行记录

在实体框架设计器中 - 我可以看到字段 system_id ENTITY_KEY=true 和 StoredGeneratedPatern=Idenity

因此，除了更新实体框架外，我看不到我为阻止某些东西使用实体框架所做的工作。

任何方向都非常适用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:23:52.900

添加新字段时，是否删除表并重新创建它？

如果你这样做了，那么你同时删除了触发器。所以当你重新创建表时，你还需要重新创建触发器。

尝试仅使用 SQL 语句插入数据，并查看是否生成了 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:19:45.697

这是一个实体框架问题，许多人已经遇到过。

不是每次，但有时，在更新模型时，StoredGenereatedPattern 会被放到一个部分中。

[http://www.ladislavmrnka.com/2011/03/the-bug-in-storegeneratedpattern-fixed-in-vs-2010-sp1/](http://www.ladislavmrnka.com/2011/03/the-bug-in-storegeneratedpattern-fixed-in-vs-2010-sp1/)

在查看修复程序时，不明白 SSDL 和 CSDL 部分都存储在相同的文本中。所以在上面看它有StoredGenereated Pattern。

# android - Android中的“通知”和“注意”有什么区别？

> ID：15636948
> 
> 赞同：2
> 
> 时间：2013-03-26T12:20:28.770
> 
> 标签：android, android-service, android-source, android-notifications

我正在学习android源代码并研究了`LightsService`框架。

我知道这些编码因设备而异。但是在看到以下代码时，我感到困惑。

```
static int set_light_leds(struct light_state_t const *state, int type)
{
        struct an30259a_pr_control led;

        memset(&led, 0, sizeof(led));

        switch (state->flashMode) {
        case LIGHT_FLASH_NONE:
                led.state = LED_LIGHT_OFF;
                break;
        case LIGHT_FLASH_TIMED:
        case LIGHT_FLASH_HARDWARE:
                led.state = LED_LIGHT_SLOPE;
                led.color = state->color & 0x00ffffff;
                // tweak to eliminate purplish tint from white color
                if (led.color == 0x00ffffff)
                    led.color = 0x80ff80;
                // scale slope times based on flashOnMS
                led.time_slope_up_1 = (SLOPE_UP_1 * state->flashOnMS) / 1000;
                led.time_slope_up_2 = (SLOPE_UP_2 * state->flashOnMS) / 1000;
                led.time_slope_down_1 = (SLOPE_DOWN_1 * state->flashOnMS) / 1000;
                led.time_slope_down_2 = (SLOPE_DOWN_2 * state->flashOnMS) / 1000;
                led.mid_brightness = MID_BRIGHTNESS;
                led.time_off = state->flashOffMS;
                break;
        default:
                return -EINVAL;
        }

        return write_leds(&led);
}

static int set_light_leds_notifications(struct light_device_t *dev,
                        struct light_state_t const *state)
{
        return set_light_leds(state, 0);
}

static int set_light_leds_attention(struct light_device_t *dev,
                        struct light_state_t const *state)
{
        return set_light_leds(state, 1);
} 
```

我的第一个问题是：

`set_light_leds_notifications()`并且在调用函数`set_light_leds_attention()`时使用不同的第二个参数。`set_light_leds()`

但是 set_light_leds() 函数在其定义中根本没有使用 int 类型。

然后，

*   它们之间有什么区别？

*   分别调用它们的目的是什么？

我的第二个问题是：

*   android应用程序中的通知和注意之间有什么一般区别？

我知道两者都用于通知用户有关信息。但我想了解更多关于这些差异的细节，特别是在哪些情况下，注意力比通知更重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:09:47.327

在 Lights.h 中：

```
#define LIGHT_ID_BACKLIGHT          "backlight"
#define LIGHT_ID_KEYBOARD           "keyboard"
#define LIGHT_ID_BUTTONS            "buttons"
#define LIGHT_ID_BATTERY            "battery"
#define LIGHT_ID_NOTIFICATIONS      "notifications"
#define LIGHT_ID_ATTENTION          "attention" 
```

评论说

> 这些灯 ID 对应于逻辑灯，而不是物理灯。例如，如果您的 INDICATOR 灯与您的 BUTTONS 一致，则在 BUTTONS 点亮时将 INDICATOR 灯也点亮为合理的颜色可能是有意义的。

和

```
#define LIGHT_ID_BLUETOOTH          "bluetooth"
#define LIGHT_ID_WIFI               "wifi" 
```

所以可能会有一些真光，比如一些安卓pad有wifi灯，蓝牙灯。还有一些逻辑灯，Android设计师设计这些逻辑灯，让不同的事件可以产生不同的灯光效果。

在您的代码中， the`set_light_leds_notifications`和 the`set_light_leds_attention`实际上是相同的，因为 the`set_light_leds`不能区分它们。它表明设备当前不想在通知和注意之间显示不同的灯光。但可能还有其他一些关心的设备。

Android中的lights服务会在不同的设备上得到不同的实现。

```
 devices->lights[LIGHT_INDEX_BACKLIGHT]
            = get_device(module, LIGHT_ID_BACKLIGHT);
    devices->lights[LIGHT_INDEX_KEYBOARD]
            = get_device(module, LIGHT_ID_KEYBOARD);
    devices->lights[LIGHT_INDEX_BUTTONS]
            = get_device(module, LIGHT_ID_BUTTONS);
    devices->lights[LIGHT_INDEX_BATTERY]
            = get_device(module, LIGHT_ID_BATTERY);
    devices->lights[LIGHT_INDEX_NOTIFICATIONS]
            = get_device(module, LIGHT_ID_NOTIFICATIONS);
    devices->lights[LIGHT_INDEX_ATTENTION]
            = get_device(module, LIGHT_ID_ATTENTION);
    devices->lights[LIGHT_INDEX_BLUETOOTH]
            = get_device(module, LIGHT_ID_BLUETOOTH);
    devices->lights[LIGHT_INDEX_WIFI]
            = get_device(module, LIGHT_ID_WIFI); 
```

而且我认为我不需要进一步解释这一点，因为您“知道这些编码因设备而异”。

对于您的第二个问题：Android 应用程序中的通知和注意之间的一般区别是什么？

没有大的区别。我不认为 N​​otificationManager 中有一个名为 attention 的实体。查了源码后发现，在通知中设置了 FLAG_SHOW_LIGHTS 标志时，会启用注意灯。

```
if ((n.notification.flags & Notification.FLAG_SHOW_LIGHTS) != 0) {
    mAttentionLight.pulse();
} 
```

所以我认为你可以在 Notification 中使用 flags 变量来区分注意力和通知。在某些设备中，可能没有通知灯，因此在有非紧急通知时不会有任何灯闪烁。但是可能会有注意灯，所以如果你的应用有重要的通知要通知用户，设置FLAG_SHOW_LIGHTS on，注意灯就会打开。

# css - Fontello Glyph Firefox 上的字体奇怪行为，显示 unicode 代码而不是图标

> ID：15636949
> 
> 赞同：6
> 
> 时间：2013-03-26T12:20:32.420
> 
> 标签：css, firefox, webfonts, fontello

我有一个网页。在它的右上角，我有一些社交图标。它在 Chrome（本地和网络服务器）中显示**正常**，在本地 FF 中显示正常，但在**在线**页面上，我看到里面有 Unicode 代码的方形占位符。

奇怪的是，如果我打开 Firebug 并通过*Source Edit*即时更正 fontello.css ，图标会神奇地出现，或者看起来如此，即使是添加然后删除空格等微不足道的更正也是如此。

这真的让我很困惑。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T17:03:23.223

我已经设法解决了这个奇怪的问题。原来这是一个 Apache 问题，从以下网址获得解决方案：[http ://www.fontsquirrel.com/blog/2010/11/troubleshooting-font-face-problems](http://www.fontsquirrel.com/blog/2010/11/troubleshooting-font-face-problems)

我已添加到`.htaccess`以下几行：

如果您从 Apache 提供服务，则可以将其添加到`.htaccess`文件中以允许您的站点访问字体：

```
<FilesMatch "\.(ttf|otf|woff)$">
<IfModule mod_headers.c>
        Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch> 
```

现在字体还可以。

# html - HTML5 - 根据输入选择输出元素的公式

> ID：15636953
> 
> 赞同：0
> 
> 时间：2013-03-26T12:20:52.383
> 
> 标签：html, formula, output

我正在设计一个简单的计算器，它有 3 个输入和一个输出。

我想知道是否可以根据使用的输入字段（*）更改输出元素“使用”的公式。

例如，我们有树输入：输入 A、输入 B 和输入 C

*   如果使用 A 和 B（并且 C 为空），则输出的公式应为“A+B”
*   如果使用 A 和 C（且 B 为空），则输出的公式应为“A*C”
*   如果使用 B 和 C（并且 A 为空），则输出的公式应为“B/C”

那么，如何根据使用的输入更改用于输出元素的公式？

这是一个简化的例子，我希望你明白:-)

根据要求，这是一些示例代码

```
[code]
    <!DOCTYPE html>
    <html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta charset="UTF-8"></meta>
    <script>
    function Test(){
    <!--alert('Formula change!');-->

    if (input_a.valueAsNumber && input_b.valueAsNumber){
    alert('Formula One');
    o.value=input_a.valueAsNumber+input_b.valueAsNumber;
    }

    if (input_b.value && input_c.value){
    alert('Formula Two');
    o.value=input_a.valueAsNumber*input_c.valueAsNumber;
    }

    if (input_a.value && input_c.value){
    alert('Formula Three');
    o.value=input_b.valueAsNumber/input_c.valueAsNumber;
    }
    }
    </script>
    <style>
    </style>
    <title>Example</title>
    </head>
    <body onload="">
    <form onsubmit="return false" oninput="
    Test();
    <!--o.value=input_a.valueAsNumber+input_b.valueAsNumber;-->
    ">

    <input name="input_a" id="input_a" type="number" step="any" value="" placeholder="Input A"></br>
    <input name="input_b" id="input_b" type="number" step="any" value="" placeholder="Input B"></br>
    <input name="input_c" id="input_c" type="number" step="any" value="" placeholder="Input C"></br>
    </br>
    <output name="o" for="a b c"></output>

    </form>
    </body>
[/code] 
```

(*) 另一种可能性可能是有多个输出，但隐藏那些不相关的输出（基于输入）......但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:06:37.803

通过使用 Eval 函数，我让它工作了

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="UTF-8"></meta>
<script>
function SelectFormula(){
if (input_a.valueAsNumber && input_b.valueAsNumber){
return "input_a.valueAsNumber+input_b.valueAsNumber";
} else if (input_b.value && input_c.value){
return "input_b.valueAsNumber*input_c.valueAsNumber";
} else if (input_a.value && input_c.value){
return "input_a.valueAsNumber/input_c.valueAsNumber";
}
}
</script>
<style>
</style>
<title>Example</title>
</head>
<body onload="">
<form onsubmit="return false" oninput="
o.value=eval(SelectFormula());
">
Input A: <input name="input_a" id="input_a" type="number" step="any" value="" placeholder="Input A"></br>
Input B: <input name="input_b" id="input_b" type="number" step="any" value="" placeholder="Input B"></br>
Input C: <input name="input_c" id="input_c" type="number" step="any" value="" placeholder="Input C"></br>
</br>
Output: <output name="o" for="a b c"></output>
</form>
</body> 
```

我宁愿不使用 Eval 函数，但直接在函数中设置 o.value=... 不起作用:-(

# php - 寻找一种在调用函数时停止进程而不返回的方法

> ID：15636955
> 
> 赞同：3
> 
> 时间：2013-03-26T12:20:56.333
> 
> 标签：php, zend-framework, coding-style, phpmd

我养成了使用 return 来阻止代码序列执行的习惯，即使 return 用于不返回任何内容的函数也是如此

```
$form = $this->getForm('activity');    
$this->view->form = $form;
return $this->render('create'); // Like this 
```

在 Zend Framework 中，它停止执行当前操作并呈现名称为函数参数的视图`$this->render()`。

我最近在我的代码上运行了[PHPMD](http://phpmd.org/)，所有这些语句都被标记为`Void function result used`

我想知道，这种习惯有多糟糕，什么会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:26:36.467

我看到的唯一一点是`$this->render('create')`返回**void**不应再次返回。

如果该操作不需要任何返回值（Zend Framework 1），那么您应该将您的`return`放在单独的一行上，而不需要任何返回值。

```
$form = $this->getForm('activity');    
$this->view->form = $form;
$this->render('create'); // Like this
return; 
```

这是 Zend Framework 中的常见语法，至少对于`forward`. 你也会经常看到它`redirect`，但是这个已经在 Zend 代码中有一个退出语句。根据[ZF1 文档](http://framework.zend.com/manual/1.12/de/zend.controller.action.html)，前进的目的是执行当前操作，然后执行第二个操作。但在他们的代码示例中，他们也使用`return $this->_forward()`. 然而，在我的工作中，我学会了把它`return`放到一个新的线上，以明确没有任何东西返回。

作为替代方案，您当然可以使用`if else`块。然而，在我看来，它们并不总是更清晰（而且我不喜欢这些严格的 Java 规则）。

```
if ($something) {
    $this->_forward();
} else {
    // do other code
} 
```

# xml - XML Schema - 子元素有效或不依赖于父元素

> ID：15636961
> 
> 赞同：1
> 
> 时间：2013-03-26T12:21:22.730
> 
> 标签：xml, xpath, xsd

我正在尝试为以下条件编写 XML 模式：

我有类似 HTML 的 XML。如果“b”标签是“p”、“li”、“cell”等的子元素，它可以有一个子元素“footnote”。它还可以嵌套其他子“b”标​​签。但如果它是“ht”标签的孩子，则“脚注”在其孩子树中是被禁止的。

例如：

```
<p><b>text<footnote>footnote text</footnote><b>double bold</b>more text</p>

<p><b>text<b>double <footnote>footnote text</footnote> bold</b></p> 
```

有效并且

```
<ht><b>text<footnote>footnote text</footnote><b>double bold</b></ht>

<ht><b>text<b>double <footnote>footnote text</footnote> bold</b> more text</ht> 
```

不是。我可以覆盖“ht”中的“b”标签，但它可以在其中嵌套“b”，所以我必须设置最大深度。我可以禁止 XPath 或其他东西在“ht”子树中使用“脚注”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:33:23.173

不适用于 XSD 1.0。您必须使用不同的模式语言，或使用 Schematron 扩充您的 XSD 1.0。

XSD 1.1 也可以帮助您，因为它现在支持基于 XPath 的断言；不幸的是，目前 XSD 1.1 支持仅限于 Xerces（beta 版，免费）和 Saxon EE（成熟，商业版），而且还没有被广泛使用。

# c# - 来自后台运行的服务的火灾事件

> ID：15636967
> 
> 赞同：0
> 
> 时间：2013-03-26T12:21:26.340
> 
> 标签：c#, task-parallel-library

我对 C# 和并行编程比较陌生。我有以下后台任务；

```
IsBusy = true;
Task.Factory.StartNew(() =>
    {
        reportService.CreateReport();
    }).
ContinueWith(task =>
    {
        IsBusy = false;
    },
TaskScheduler.FromCurrentSynchronizationContext()); 
```

现在，ReportService 中的 CreateReport 如下：

```
private volatile Report report; 

public Report { get { return report; } }

CreateReport() 
{
   lock(this) {
       do some work computing result

       report = result
       RaisePropertyChanged(() => Report)
   }
} 
```

`RaisePropetyChanged`应该在 UI 线程的上下文中触发一个`PropertyChanged`事件。但是，ReportService 应该不知道在后台运行。ReportService 是否有一种优雅的方法来检测它是否在后台运行，并且应该将 PropertyChangedEvent 混搭到 UI 线程？这种编组将如何实施？我可以利用`Application.Context.Dispatcher`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:20:50.440

我对您的问题的直接回答是使用`Dispatcher`，但这不会使您的解决方案特定于 UI 框架吗？

我还建议稍微重新设计您的流程。该例程的长期运行方面`CreateReport`是 ReportService 的内部细节。为什么不移动该类中的多线程/异步详细信息，如下所示：

```
public class ReportService
    {
        public event EventHandler NotifyReportGenerated;

        public Task CreateReportAsync()
        {
            return Task.Factory.StartNew(() =>
                {
                    GenrateActualReport();
                }).
            ContinueWith(task =>
                {
                    if (NotifyReportGenerated != null)
                        NotifyReportGenerated(this, new EventArgs());
                },
            TaskScheduler.FromCurrentSynchronizationContext());
        }

        private void GenrateActualReport()
        {
            var a = Task.Delay(10000);
            Task.WaitAll(a);
        }
    } 
```

我做的一个快速测试似乎让 UI 满意。这就是我在 Windows 窗体解决方案中“使用”它的方式：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private ReportService rpt = new ReportService();

        private void button1_Click(object sender, EventArgs e)
        {
            button1.Enabled = false;
            rpt.NotifyReportGenerated += rpt_NotifyReportGenerated;
            rpt.CreateReportAsync();
        }

        void rpt_NotifyReportGenerated(object sender, EventArgs e)
        {
            rpt.NotifyReportGenerated -= rpt_NotifyReportGenerated;
            button1.Enabled = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:09:02.910

我假设您正在尝试在 UI 线程上运行延续。那样的话，能不能不在reportService类中创建一个叫Notify的方法

> Notify() { RaisePropertyChanged(() => 报告); }

并从延续中调用它。这样它将在 UI 线程上执行。

```
.ContinueWith(task =>
{
    IsBusy = false;
    reportService.Notify();
}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:57:55.690

好的，感谢您提供的所有宝贵意见，我目前的解决方案如下。我已经实现了一个`DispatcherService`注入到所有需要通知的类的基类中的方法`PropertyChanged`：

```
public class WPFUIDispatcherService : IDispatcherService
{
    public void Invoke(Action action)
    {
        // check if the calling thread is the ui thread 
        if (Application.Current.Dispatcher.CheckAccess())
        {
            // current thread is ui thread -> directly fire the event
            action.DynamicInvoke();
        }
        else
        {
            // current thread is not ui thread so marshall 
            // the event to the ui thread
            Application.Current.Dispatcher.Invoke(action);
        }
    }
} 
```

，`NotifyPropertyChangedBase`关键行是`dispatcher.Invoke( .. )`：

```
public class NotifyPropertyChangedBase : INotifyPropertyChanged
{
    private IDispatcherService dispatcher;

    // inject dispatcher service by unity
    [Dependency]
    public IDispatcherService Dispatcher { set { dispatcher = value; } }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged<T>(
                          Expression<Func<T>> propertyExpression
                   )
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            MemberExpression memberExpression = 
                    propertyExpression.Body as MemberExpression;
            if (memberExpression != null)
            {
                dispatcher.Invoke(() => 
                    handler(this, new PropertyChangedEventArgs(
                                            memberExpression.Member.Name
                                      )
                           )
                );
            }
            else
            {
                throw new ArgumentException(
                     "RaisePropertyChanged event " +
                     "was not raised with a property: " + 
                     propertyExpression);
            }
        }
    }
} 
```

`ReportService`: _

```
public class ReportService : NotifyPropertyChangedBase, IReportService
{ 
    private volatile Report report; 

    public Report { get { return report; } }

    CreateReport() 
    {
       lock(this) {
           do some work computing result

           report = result
           RaisePropertyChanged(() => Report)
    }
} 
```

我的服务的调用

```
IsBusy = true;
Task.Factory.StartNew(() =>
    {
        reportService.CreateReport();
    }).
ContinueWith(task =>
    {
        IsBusy = false;
    },
TaskScheduler.FromCurrentSynchronizationContext()); 
```

`ReportService`现在可以透明地在后台任务或前台运行，无论应用程序是如何设计的。在任何情况下`RaisePropertyChanged`，结合`WPFUIDispatcherService`保证在 UI 线程中触发事件。

# php - PHP：通过 PHP 文件下载标头响应向 IOS 客户端传递国际文件名

> ID：15636968
> 
> 赞同：0
> 
> 时间：2013-03-26T12:21:30.557
> 
> 标签：php, iphone, ios

实际上我正在使用 ASIHTTPRequest 库从我的 ios 应用程序下载文件。我想在下载文件时通过 php 标头响应传递国际字符（它是一个文件名）。基本上是在构建文件下载标头响应时创建名为“ **filename-display ”的新自定义标头。**

**这是我的PHP代码：**

```
<?php

    $dir = 'c:\좋은 아침.pdf';
    $filename_display = '좋은 아침.pdf';

    if (file_exists($dir)) {
                header("HTTP/1.1 200"); 
                header('Content-Description: File Transfer');
                header('Content-Type: application/octet-stream');
                header('Content-Disposition: attachment; filename='.basename($dir));
                header('Content-Transfer-Encoding: binary');
                header('Expires: 0');
                header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
                header('Pragma: public');
                header('filename-display:' . $filename_display);
                header('Content-Length:' . filesize($dir));

                ob_clean();
                flush();
                readfile($dir);

                exit;
    } 
    else {          
            header("HTTP/1.1 404 file not found");      
            echo 'file_not_exists';
            exit(0);
    }
?> 
```

**客户端代码 ASIHTTPRequest 库委托调用：**

```
#pragma mark
#pragma ASIHTTPREQUEST delegate methods
-(void)requestStarted:(ASIHTTPRequest *)request{

    NSLog(@"\n file download start");
}

-(void)updateUploadProgress:(ASIHTTPRequest*)request
{
    [request updateUploadProgress];
}

- (void)requestFailed:(ASIHTTPRequest *)request {
//handle it
}

- (void)requestFinished:(ASIHTTPRequest *)request {
    NSDictionary *responseHeaders = [request responseHeaders];

    NSLog(@"\nresponse header dict = %@", responseHeaders);

    NSLog(@"\nfile name: %@", [responseHeaders objectForKey:@"filename-display"]);
} 
```

**我的 ios 应用程序上的输出：**

文件名：?????????.pdf 而不是显示在 php 标头端配置的实际文件名。

让我知道我可以在 php 端使用什么编码？也可以通过标头响应传递 xml 字符串？

我可能会感激的任何帮助。

-loganathan

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T13:02:01.750

使用自定义标头意味着只有自定义客户端会查找它。我不确定这是否是正确的选择，但是更好的选择是同时使用您的自定义标题*和*标准标题`Content-Disposition`标头。

基于[这个答案](https://stackoverflow.com/a/6745788/315306)，有多种策略：

*   RFC 5987 编码
*   直接 UTF-8 编码
*   IE（UTF-8，百分号）编码

您可以打开用户代理来构建您的 HTTP 响应。另一种选择是使用 UTF-8 编码的 URL 作为下载链接（因此浏览器会建议路径的最后一部分，即文件名）。

很难说出您的 iOS 应用程序失败的原因，因为它取决于所使用的 HTTP 库以及您如何解码标头中的字节，没有代码就无法分辨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:50:32.800

我在网页中遇到了类似的问题，我将正确的编码声明放在 HTTP 标头字段 Content-Type 中解决了它。

```
Content-Type: text/html;charset=utf-8 
```

也许如果你也这样做......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T09:21:31.793

最后我想出了如何做到这一点。这是我的解决方案 1\. 在 PHP 方面，我使用了 json 解码。由于我将文件名解码为 ascii 或非 ascii，然后我将其设置在 header.xml 中。2\. 在 iOS 端，我使用以下代码将编码的 json 转换为 nsstring。

```
NSString *f_Name = <your jason string>;
NSString *convertedString = [f_Name mutableCopy];

 //convert json encoded string to nsstring
 CFStringRef transform = CFSTR("Any-Hex/Java");
 //CFStringTransform((__bridge CFMutableStringRef)convertedString, NULL, transform, YES);
 CFStringTransform((CFMutableStringRef)convertedString, NULL, transform, YES);

 f_Name = convertedString;

 //remove the double quotes from first and last position
 f_Name = [f_Name substringFromIndex:1];
 f_Name = [f_Name substringToIndex:[f_Name length] - 1]; 
```

# c# - ParameterInfo 方法的属性、属性和 out ref 参数

> ID：15636969
> 
> 赞同：6
> 
> 时间：2013-03-26T12:21:30.950
> 
> 标签：c#, reflection, out, ref, parameterinfo

好吧，我对`ParameterInfo`类的属性感到困惑。
不幸的是，文档不是很清楚：示例展示了如何构建方法，但没有展示这些方法在 C# 中的外观。

甘蔗有人告诉更多关于这些属性：

*   `DefaultValue`
*   `HasDefaultValue`
*   `IsIn`
*   `IsLcid`
*   `IsOptional`
*   `IsOut`
*   `IsRetval`

哪个组合导致什么方法参数。
我做了一个简单的程序，它给出以下输出：

*方法名 M1* `void M1(object param)`
IL 签名：`.method public hidebysig instance void M1(object param) cil managed`
方法参数描述：
引用传递 False
HasDefaultValue=False
IsIn=False
IsLcid=False
IsOptional=False
IsOut=False
IsRetVal=False

*方法名 M2* `void M2(object param = null)`
IL 签名`.method public hidebysig instance void M2([opt] object param) cil managed`
方法参数描述：
引用传递 False
**HasDefaultValue=True**
DefaultValue=null
IsIn=False
IsLcid=False
**IsOptional=True**
IsOut=False
IsRetVal=False

*方法名称 M3* `void M3(out object param)`
IL 签名`.method public hidebysig instance void M3([out] object& param) cil managed`
方法参数描述：
通过**引用传递 True**
HasDefaultValue=False
IsIn=False
IsLcid=False
IsOptional=False
**IsOut=True**
IsRetVal=False

*方法名称 M4* `void M4(ref object param)`
IL 签名`.method public hidebysig instance void M4(object& param) cil managed`
方法参数说明：
通过**引用传递 True**
HasDefaultValue=False
IsIn=False
IsLcid=False
IsOptional=False
IsOut=False
IsRetVal=False

*方法名称 M5* `void M5([In] object param)`
IL 签名`.method public hidebysig instance void M5([in] object param) cil managed`
方法参数说明：
通过引用传递 False
HasDefaultValue=False
**IsIn=True**
IsLcid=False
IsOptional=False
IsOut=False
IsRetVal=False

*方法名称 M6* `void M6([Out] object param)`
IL 签名`.method public hidebysig instance void M6([out] object param) cil managed`
方法参数说明：
通过引用传递 False
HasDefaultValue=False
IsIn=False
IsLcid=False
IsOptional=False
**IsOut=True**
IsRetVal=False

*方法名称 M7* `void M7([Out] out object param)`
IL 签名`.method public hidebysig instance void M7([out] object& param) cil managed`
方法参数描述：
通过**引用传递 True**
HasDefaultValue=False
IsIn=False
IsLcid=False
IsOptional=False
**IsOut =True**
IsRetVal=False

*方法名 M8* `void M8([DefaultValue(null)] object param)`
IL 签名`.method public hidebysig instance void M8(object param) cil managed`
方法参数说明：
通过引用传递 False
HasDefaultValue=False
IsIn=False
IsLcid=False
IsOptional=False
IsOut=False
IsRetVal=False

*方法名 M9* `void M9([DefaultValue(-10)] int param = 10)`
IL 签名`.method public hidebysig instance void M9([opt] int32 param) cil managed`
方法参数说明：
参数名称 param
通过引用传递 False
**HasDefaultValue=True**
DefaultValue=10
IsIn=False
IsLcid=False
**IsOptional=True**
IsOut=False
IsRetVal=False

*方法名称 M10* `void M10([Optional] int param)`
IL 签名`.method public hidebysig instance void M10([opt] int32 param) cil managed`
方法参数说明：
通过引用传递 False
HasDefaultValue =False
IsIn=False
IsLcid=False
**IsOptional=True**
IsOut=False
IsRetVal=False

我猜`In`，`Out`并且`Optional`属性与 COM 相关，因为它们位于 System.Runtime.InteropServices 命名空间中。
但是文档又很差。:(

什么是 RetVal 以及它在哪里使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:35:51.890

这显示了其中的大部分，包括可选、out 和 defaultvalue 标志。请注意，返回值可以表示为 a `ParameterInfo`，因为它与参数共享大多数共同点，包括属性（通过`[return: Foo]`语法）。对于 retval 和 lcid，请参阅[ParameterInfo.IsLcid 或 ParameterInfo.IsRetval 何时为真？](https://stackoverflow.com/questions/11734607/when-are-parameterinfo-islcid-or-parameterinfo-isretval-true)

```
static class Program
{
    static void Main()
    {
        var method = typeof(Program).GetMethod("Test");

        Describe(method.ReturnParameter);
        foreach (var p in method.GetParameters()) Describe(p);
    }
    static void Describe(ParameterInfo param)
    {
        Console.WriteLine("{0}, {1}, {2}",
            string.IsNullOrEmpty(param.Name) ? "(no name)" : param.Name,
            param.ParameterType, param.Position);
        if (param.IsRetval) Console.WriteLine("retval");
        if (param.IsIn) Console.WriteLine("in");
        if (param.IsOut) Console.WriteLine("out");
        if (param.ParameterType.IsByRef) Console.WriteLine("by-ref");
        if (param.IsOptional) Console.WriteLine("optional");
        if (param.HasDefaultValue)
        {
            Console.WriteLine("default value: {0}", param.DefaultValue);
        }
        Console.WriteLine();
    }

    public static int Test(int j, ref int k, out int l, string foo = "abc")
    {
        throw new NotImplementedException();
    }
} 
```

# javascript - 我有代码，它可以使用 javascript 对两个文本框值求和

> ID：15636970
> 
> 赞同：0
> 
> 时间：2013-03-26T12:21:34.080
> 
> 标签：javascript, html, sum

我有代码，它可以使用 javascript 对两个文本框值求和，但问题是当我将数量输入`recamt`文本框值和 javascript 一次又一次`recamt`地计算文本框值时，它应该只计算一次`recamt`文本框值而不是一次又一次？

```
<script type="text/javascript">
function B(){
document.getElementById('advance').value
=(parseFloat(document.getElementById('advance').value))+
(parseFloat(document.getElementById('recamt').value));
return false;
}  
</script>

<input class="input_field2" type="text" readonly name="advance" 
id="advance" value="50" onfocus="return B(0);" /><br />
<input class="input_field2" type="text" name="recamt" id="recamt"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:27:55.663

您可以在只读文本字段上保留一个属性以保留旧值：

```
function B()
{
    var adv = document.getElementById('advance'),
    rec = document.getElementById('recamt');

    if (typeof adv.oldvalue === 'undefined') {
        adv.oldvalue = parseFloat(adv.value); // keep old value
    }

    adv.value = adv.oldvalue + parseFloat(rec.value));
    rec.value = '';

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:36:38.793

每次使用新值聚焦只读输入时，您都会调用 sum 函数。如果您只想将其添加到原始值，则需要将其存储在某个地方。

HTML：

```
<input type="text" id="advance" readonly="readonly" value="50" /><br />
<input type="text" id="recamt"> 
```

JS：

```
var advanceBox = document.getElementById('advance');
var originalValue = advanceBox.value;

advanceBox.onclick = function() {
    this.value = parseFloat(originalValue) +
        parseFloat(document.getElementById('recamt').value);

    return false;
}; 
```

[http://jsfiddle.net/hQbhq/](http://jsfiddle.net/hQbhq/)

笔记：

*   您应该在 javascript 中绑定您的处理程序，而不是 HTML。
*   javascript 需要存在于页面上的 HTML*之后*，或者存在于 window.load 处理程序内部，否则它将无法找到`advanceBox`.

# php - 数据库拒绝通过 AJAX 调用更新

> ID：15636974
> 
> 赞同：1
> 
> 时间：2013-03-26T12:21:42.520
> 
> 标签：php, javascript, mysql, jquery

在解决编程问题时，我尽量避免寻求帮助，但现在我很困惑，可以从你们这些好人那里得到一些意见。

**场景：**

我正在开发的网站上有一个页面，该页面允许某些用户在 Google 地图上选择位置作为访问位置，所有更新都是通过 ajax 到 mySQL 数据库完成的，所有这些都可以正常工作。当用户完成选择时，他们按下一个按钮来锁定当年的选择过程，这只需通过 AJAX 数据库更新访问访问者表上名为 Selection_Complete 的标志位来完成。

**问题：**

直到几天前，一切似乎都很好，但是我注意到当按下完成选择按钮时选择没有被锁定，这很奇怪，因为在一些环顾四周发现数据库标志已停止更新之前它已经工作了。

这是相关的代码：

JavaScript 关闭函数：

```
function closeSelection() {

var conf = confirm('Are you sure you want to finish selection ?');

if (conf === true){

    setCompletionStatus(userID,1,function(data){

        if (data === -1) {
            displayMessage ('Unable to close selection: an error occurred in update');
            console.error('setCompletionStatus() returned -1 a database error occoured during query');
            return;
        } else if (data === -2) {
            displayMessage ('Unable to close selection: an error occurred in update');
            console.error('setCompletionStatus() returned -2 a database error occurred during query');
            return;
        } else if (data === 0) {
            displayMessage ('Unable to close selection: an error occurred in update');
            console.error('Close selection returned 0 update enabled, should have been 1 to close');
            return;
        } else if (data === 1) {
            selectionComplete = data; // a global variable holding the current users selection status
            lockSelectBtns();
            displayMessage('Selection now closed for ' + dateInfo.getFullYear());
            $('#placementMessages').html('Selection closed for ' + dateInfo.getFullYear()).css({
                'color':'red' 
            }).show();
            return;
        } else {
              displayMessage ('Unable to lock selection: an error occurred in update');
              console.error('Unknown code: ' + data + ' returned by setCompletionStatus()' );
        } 
    },displayMessage);   
   }
 } 
```

javaScript Ajax 处理程序：

```
 function setCompletionStatus (userID,isComplete,callback,failCallback) {
    if ((! jQuery.type(userID)=== 'String') && (! jQuery.type(userID)=== 'number')) {
        throw new Error ('The userID parameter of function  setNumChoices() (AJAX) was of type '+ jQuery.type(userID) +
            '\n either a String or an Integer was expected.');
    }
    $.ajax({
        data: {
            mode: 'setIsComplete',
            userID: userID,
            isComplete:isComplete
        }
    }).fail(function(jqHXR,textStatus,errorThrown) {
        console.error('An error occurred while calling setCompletionStatus() \n response text was: ' + jqHXR.responseText + 
            + ' \n status was: ' +  textStatus + '\n' + 'Header contents was: ' + errorThrown);

    }).done(function(data){
        if ( (typeof data === 'undefined')||(typeof data === 'null')) {
           failCallback ('Unable to set completion status');
            console.error('An error occurred while calling setCompletionStatus.done() data was null or undefined');
        }
        else  {
                callback(data);
        }   
      });
  } 
```

以及 PHP db 查询代码：

```
public function setSelectionStatus($userID, $selectionComplete, $asJSON = TRUE) {try {
        $queryString = 'UPDATE Visitor 
                        SET Selection_Complete = :selectionComplete 
                        WHERE User_ID = :userID';

        $statementHandle = $this->_dbHandle->prepare($queryString);
        $statementHandle->bindValue(':selectionComplete', $selectionComplete);
        $statementHandle->bindValue(':userID', $userID);
         $success = $statementHandle->execute();
        $numRecords = $statementHandle->rowCount();

        if ( $success === false) {
            if ($asJSON) {
                echo json_encode(-1);
            }
            return -1;
        }
        else if ($numRecords === 0) {
            if ($asJSON) {
                echo json_encode(-2);
            }
            return -2;
        } else {
            if ($asJSON) {
                echo json_encode((int) $selectionComplete);
            }
            return (int) $selectionComplete;
        }
    } catch (PDOException $e) {
        echo 'Sorry,an error occurred while attempting update the current users selection status,administrators please check error logs for more details. <br/>' . PHP_EOL;

        error_log('An error occurred while attempting to run the query function' . __FUNCTION__ . ' of class ' . __CLASS__ . ' on server (' . $_SERVER['SERVER_NAME']
                . ')' . PHP_EOL . 'Details:' . PHP_EOL .
                'Message: ' . $e->getMessage() . PHP_EOL .
                'In file: ' . $e->getFile() . PHP_EOL .
                'On line: ' . $e->getLine() . PHP_EOL .
                'Stack trace:' . PHP_EOL . $e->getTraceAsString() . PHP_EOL, 0);
    }
} 
```

AJAX 函数在设置数据库字段时返回正确的值 日志中没有记录任何错误 PDO 或 PDO 语句都没有返回任何错误 我已经检查了通过 firebug 来回发送的数据，那就是数据库拒绝点空白更新字段。我很确定它与 AJAX 调用 cos 有关，如果我直接运行 PHP，它每次都能完美运行。抱歉，有点长，有人可以帮忙吗？我已经看了将近一天了，我很茫然。提前致谢。

# xslt-2.0 - xslt 2.0 中的选择值

> ID：15636979
> 
> 赞同：0
> 
> 时间：2013-03-26T12:21:55.747
> 
> 标签：xslt-2.0

我正在使用 xslt 2.0。我正在使用 value-of select 并由于重复元素而返回连接字符串。我尝试了 before-sibling 和 generate-id ，但都不会删除字符串的第二部分。我怎样才能做到这一点？

输出

2 11 Kenneth Street ***3755 Peachtree Road NE（第二个元素的粗体部分将被删除）***

```
 <xsl:value-of select="wd:Personal_Data/wd:Contact_Data/wd:Address_Data/wd:Address_Line_Data[@wd:Type='ADDRESS_LINE_1']"/> 
```

xml

```
 <wd:Contact_Data>
                    <wd:Address_Data wd:Effective_Date="2000-01-01-08:00" wd:Address_Format_Type="Extended" wd:Formatted_Address="Av Cmte JÃºlio Moura, 900&amp;#xa;Barra de Tijuca&amp;#xa;Rio de Janeiro- RJ&amp;#xa;22621-252&amp;#xa;Brazil" wd:Defaulted_Business_Site_Address="0">
                       <wd:Country_Reference wd:Descriptor="Brazil">
                          <wd:ID wd:type="WID">1a29bb1357b240ab99a2fa755cc87c0e</wd:ID>
                          <wd:ID wd:type="ISO_3166-1_Alpha-2_Code">BR</wd:ID>
                          <wd:ID wd:type="ISO_3166-1_Alpha-3_Code">BRA</wd:ID>
                          <wd:ID wd:type="ISO_3166-1_Numeric-3_Code">76</wd:ID>
                       </wd:Country_Reference>
                       <wd:Last_Modified>2009-06-06T20:07:49.246-07:00</wd:Last_Modified>
                       <wd:Address_Line_Data wd:Type="ADDRESS_LINE_1" wd:Descriptor="Street Name">Av Cmte JÃºlio Moura</wd:Address_Line_Data>
                       <wd:Address_Line_Data wd:Type="ADDRESS_LINE_3" wd:Descriptor="House Number">900</wd:Address_Line_Data>
                       <wd:Municipality>Rio de Janeiro</wd:Municipality>
                       <wd:Submunicipality_Data>Barra de Tijuca</wd:Submunicipality_Data>
                       <wd:Country_Region_Reference wd:Descriptor="Rio de Janeiro">
                          <wd:ID wd:type="WID">e88c3d7cdb2b4a8b8120ede0b16e2186</wd:ID>
                          <wd:ID wd:type="Country_Region_ID">BRA-RJ</wd:ID>
                       </wd:Country_Region_Reference>
                       <wd:Postal_Code>22621-252</wd:Postal_Code>
                       <wd:Usage_Data wd:Public="0">
                          <wd:Type_Data wd:Primary="1">
                             <wd:Type_Reference wd:Descriptor="Home">
                                <wd:ID wd:type="WID">836cf00ef5974ac08b786079866c946f</wd:ID>
                                <wd:ID wd:type="Communication_Usage_Type_ID">HOME</wd:ID>
                             </wd:Type_Reference>
                          </wd:Type_Data>
                          <wd:Use_For_Reference wd:Descriptor="Street Address">
                             <wd:ID wd:type="WID">f785430145674364a613cd56086942c4</wd:ID>
                             <wd:ID wd:type="Communication_Usage_Behavior_ID">STREET</wd:ID>
                          </wd:Use_For_Reference>
                          <wd:Use_For_Reference wd:Descriptor="Mailing">
                             <wd:ID wd:type="WID">9385649a0c4b4ddea7fb0d823c2f1bcd</wd:ID>
                             <wd:ID wd:type="Communication_Usage_Behavior_ID">MAILING</wd:ID>
                          </wd:Use_For_Reference>
                       </wd:Usage_Data>
                    </wd:Address_Data>
                    <wd:Address_Data wd:Effective_Date="2000-01-01-08:00" wd:Address_Format_Type="Basic" wd:Formatted_Address="3755 Peachtree Road NE&amp;#xa;Atlanta, GA 30305&amp;#xa;United States of America" wd:Defaulted_Business_Site_Address="1">
                       <wd:Country_Reference wd:Descriptor="United States of America">
                          <wd:ID wd:type="WID">bc33aa3152ec42d4995f4791a106ed09</wd:ID>
                          <wd:ID wd:type="ISO_3166-1_Alpha-2_Code">US</wd:ID>
                          <wd:ID wd:type="ISO_3166-1_Alpha-3_Code">USA</wd:ID>
                          <wd:ID wd:type="ISO_3166-1_Numeric-3_Code">840</wd:ID>
                       </wd:Country_Reference>
                       <wd:Last_Modified>2011-06-20T13:54:02.466-07:00</wd:Last_Modified>
                       <wd:Address_Line_Data wd:Type="ADDRESS_LINE_1" wd:Descriptor="Address Line 1">3755 Peachtree Road NE</wd:Address_Line_Data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:41:53.597

如果您只想输出第一个选定的元素，请使用`<xsl:value-of select="(wd:Personal_Data/wd:Contact_Data/wd:Address_Data/wd:Address_Line_Data[@wd:Type='ADDRESS_LINE_1'])[1]"/>`.

或者根据您显示的输入，我认为`<xsl:value-of select="wd:Personal_Data/wd:Contact_Data/wd:Address_Data[1]/wd:Address_Line_Data[@wd:Type='ADDRESS_LINE_1']"/>`也应该有效。

另请注意，您可以`version="1.0"`在带有 XSLT 2.0 处理器的样式表上使用，以表明您正在将 XSLT 1.0 移动到 2.0，但当前希望 XSLT 1.0 向后兼容处理（例如仅输出第一个选定的节点`xsl:value-of`）。这样你就可以逐渐调整你的代码。

# class - 使用导入的类而不在 JSP 中指定包

> ID：15636982
> 
> 赞同：0
> 
> 时间：2013-03-26T12:22:02.797
> 
> 标签：class, jsp, import, package

在我的 JSP 中，我有

```
<%@ page import "com.example.Elenco" %> 
```

但是在一个非常小的 scriptlet 中，每当我尝试实例化 Elenco 时，它都需要全名。

如果我写

```
Elenco a = new Elenco(blabla); 
```

Eclipse 给出以下错误：“Elenco 无法解析为类型”，我必须写

```
com.example.Elenco a = new com.example.Elenco(blabla); 
```

这很不舒服。是否存在使包名称不是强制性的任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:25:40.610

语法是

```
<%@ page import="com.example.Elenco" %>
               ^--- you need an equal sign here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:27:08.357

您的导入指令似乎是错误的。尝试

```
<%@ page import="com.example.Elenco" %> 
```

你错过了`=`.

# php - CakePHP URL 中的特殊字符

> ID：15636986
> 
> 赞同：-1
> 
> 时间：2013-03-26T12:22:11.587
> 
> 标签：php, url, cakephp, special-characters

我正在开发一个 Web 应用程序，其中用户拥有个人资料以及与该个人资料相关的技能。我想开发一个页面，用户可以在其中查看与特定技能对应的所有配置文件。例如，如果我想查看所有具有“HTML”技能的用户，我可以使用`http://site.com/skills/HTML`. 很简单。

我已经让它工作了，但是有些用户具有空格技能（例如`project management`），有些用户具有特殊字符（例如`C#`）。当我浏览到类似的 URL`http://site.com/skills/C#`时，Cake 会自动生成它，`http://site.com/skills/C`因为它会解析特殊字符（`#`在本例中）。

如何安全地允许 URL 中包含特殊字符的技能？这是我目前正在使用的操作：

```
public function view($name) {
    // Find skill using $name
    $skill = $this->Skill->find('first', array(
        'conditions' => array('Skill.name' => $name)
    ));

    if(!$skill) {
        // Skill doesn't exist, return 404
        // TODO: route to 404 page
        throw new NotFoundException();
    }

    $this->set('skill', $skill);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:27:33.890

这`#`是一个“特殊”字符，默认情况下会跳转到一个命名的锚点。为了在 URL 中使用特殊字符，您需要使用[urlencode()](http://www.php.net/manual/en/function.urlencode.php)。

但请注意，您的 URL 看起来并不“花哨”，它只会被编码为特殊字符的原始 HTML 实体。在你的情况下`C#`会变成`C%23`. 因此，您可能需要考虑为您的标签使用不同的 URL 别名，例如`CSharp`（您可以设置一个“背景”数据库字段以将原始值“翻译”为对 URL 友好的值）。

# java - 谷歌云sql在vaadin中的问题

> ID：15636991
> 
> 赞同：1
> 
> 时间：2013-03-26T05:03:27.393
> 
> 标签：java, google-app-engine, vaadin

我在 Vaadin 使用 google cloud sql 数据库创建了一个 Google App Engine 项目。我已经在我的本地机器上很好地测试了它，没有（任何重要的）错误。

当我将它部署到 GAE 时，它也可以工作一段时间。只有在 x 小时后它才会停止工作（与以前完全相同，并且没有对代码进行任何更改）。如果我再次部署该项目，它会再次运行。

当我查看 GAE 日志时，它似乎是

```
2013-03-25 10:26:03.071 
com.vaadin.terminal.gwt.server.GAEApplicationServlet service: An exception occurred while servicing request.
javax.servlet.ServletException: java.lang.RuntimeException
    at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.handleServiceException(AbstractApplicationServlet.java:1010)
    at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:548)
    at com.vaadin.terminal.gwt.server.GAEApplicationServlet.service(GAEApplicationServlet.java:239)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 
```

# php - 为什么我的 PHP 电子邮件表单会吸引垃圾邮件？

> ID：15636993
> 
> 赞同：2
> 
> 时间：2013-03-26T12:22:23.367
> 
> 标签：php, forms, email, captcha, spam

我已经建立了一个网站，我想在网页上有一个电子邮件联系表，以便有人可以给我发消息。

我正在使用该网站的代码：http: [//www.w3schools.com/php/php_secure_mail.asp](http://www.w3schools.com/php/php_secure_mail.asp)

我正在使用说**PHP Stopping E-mail Injections的部分**

尽管我的网站每天获得的点击量很少（比如少于 10 个访问者），但我发现我每天都会收到 3 或 4 条来自“垃圾邮件发送者”的消息，他们似乎只是向我发送与主题无关的随机消息网站的事情。

我对这一切还很陌生，所以我想问一个问题：**为什么我的 PHP 电子邮件表单会吸引垃圾邮件，我能做些什么来阻止它？**

理想情况下，我想让真实用户尽可能轻松地与我联系，如果可能的话，我更愿意使用 CAPTCHA。

非常感谢

我正在使用的代码：

```
<html>
<body>
<?php
function spamcheck($field)
  {
  //filter_var() sanitizes the e-mail
  //address using FILTER_SANITIZE_EMAIL
  $field=filter_var($field, FILTER_SANITIZE_EMAIL);

  //filter_var() validates the e-mail
  //address using FILTER_VALIDATE_EMAIL
  if(filter_var($field, FILTER_VALIDATE_EMAIL))
    {
    return TRUE;
    }
  else
    {
    return FALSE;
    }
  }

if (isset($_REQUEST['email']))
  {//if "email" is filled out, proceed

  //check if the email address is invalid
  $mailcheck = spamcheck($_REQUEST['email']);
  if ($mailcheck==FALSE)
    {
    echo "Invalid input";
    }
  else
    {//send email
    $email = $_REQUEST['email'] ;
    $subject = $_REQUEST['subject'] ;
    $message = $_REQUEST['message'] ;
    mail("someone@example.com", "Subject: $subject",
    $message, "From: $email" );
    echo "Thank you for using our mail form";
    }
  }
else
  {//if "email" is not filled out, display the form
  echo "<form method='post' action='mailform.php'>
  Email: <input name='email' type='text'><br>
  Subject: <input name='subject' type='text'><br>
  Message:<br>
  <textarea name='message' rows='15' cols='40'>
  </textarea><br>
  <input type='submit'>
  </form>";
  }
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-26T12:28:58.810

有一个简单的方法可以摆脱大多数垃圾邮件发送者：

`display: none;`在表单中输出一个作为样式的输入字段。理想情况下，这是在外部 css 文件中指定的。

将该输入字段放在您的表单中并给它一个重要的名称，例如“name2”或其他名称。

然后，在评估输入时，丢弃在该字段内具有值的所有请求，因为真实用户看不到因此无法输入值。而垃圾邮件机器人很可能会填充他们在页面上找到的所有字段。

# c++ - 如何使用包含指向对象的指针的动态数组避免程序中的内存泄漏？

> ID：15636995
> 
> 赞同：1
> 
> 时间：2013-03-26T12:22:28.610
> 
> 标签：c++, memory-leaks, valgrind

我在家庭作业程序中遇到内存使用问题，该程序用于存储有关公司及其所有者的信息。СompanyTemplate 类表示此信息。

```
public:
CompanyTemplate (const string & oName,
                 const string & oAddr,
                 const string & cName,
                 const string & cAddr); 
```

另一个类 CCompanyIndex 用于使用动态指针数组存储多条记录（我不允许使用向量）。这是 CCompanyIndex 构造函数：

```
CCompanyIndex :: CCompanyIndex (void)
{
allocated = 1000;
current_size = 0;
pole = new CompanyTemplate* [allocated];
for (int i=0; i<allocated; i++)
{
    pole[i] = NULL;
}
} 
```

CCompanyIndex 还提供方法 Add（添加记录）、Del（删除记录）、Search（搜索有关所有者公司的信息。我在使用 Add 方法时遇到了问题，尽管所有基本测试都很好，但正如 valgrind 所说，我有内存泄漏, 在 Add 方法中。

```
bool CCompanyIndex :: Add( const string & oName,
                       const string & oAddr,
                       const string & cName,
                       const string & cAddr )
{

int pos = findPos(oName, oAddr);
        if(pos != -1)
        {
            return false;
        }
if ((current_size)>=allocated)
{
    CompanyTemplate ** temp;
    allocated = allocated*2+1;
    temp = new CompanyTemplate* [allocated];
    for (int i=0; i<current_size; i++)
    {
        temp[i]=pole[i];
    }
pole = temp;

for (int i=0; i<current_size; i++ )
{
    if ((pole[i])->Compare(oName,oAddr)<0)
    {
        current_size++;
        for (int k=current_size-1; k>=i; k--)
        {

        pole[i] = new Comp   pole[k+1]=pole[k];
        }anyTemplate(oName, oAddr, cName,cAddr);
        return true;
    }
}

pole[current_size] = new CompanyTemplate(oName, oAddr, cName,cAddr);
current_size++;
return true;
} 
```

数组元素重新分配按预期工作，更有可能我在析构函数中有错误，但仍然找不到。这里是：

```
CCompanyIndex :: ~CCompanyIndex (void)
{
for (int i=0; i<allocated; i++)
{
    delete pole[i];
}
delete [] pole;
pole = NULL;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:25:18.640

如果所有权不明确，只需使用`std::shared_ptr`.

当然，在专业环境中，更好的答案可能是更好地分析并更好地了解所有权，例如，它真的是共享的吗？

但如果没有，请使用`std::shared_ptr`.

* * *

顺便说一句，您的班级似乎无法正确处理*复制*。这被称为“三规则”（或对于 c++11，称为“五规则”）。本质上，如果您定义析构函数、复制构造函数或复制赋值运算符中的任何一个，那么您很可能需要*所有三个*才能正确处理复制。

但最简单的是不定义此类操作，而是使用标准库容器，如`std::vector`，和标准库智能指针，如`std::shared_ptr`.

例如，不是将其定义`pole`为原始指针（指向数组），而是将其定义为`std::vector`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T12:31:53.010

有了这样一个笼统的标题，笼统的答案就是：使用 a `vector`of `shared_ptr`。

但我假设你的作业是实现一种`std::vector<CompanyTemplate>`使用“低”级 C++、没有 STL 和智能指针的方法（否则是使用 C++ 的最佳方式）。所以：

也许您还有其他错误，但这里有两个：

```
CompanyTemplate ** temp;
allocated = allocated*2+1;
temp = new CompanyTemplate* [allocated];
int i=0
for (; i<current_size; i++)
{
    temp[i]=pole[i];
}
for (; i<allocated ; i++)  // you want to make NULL the new pointers
{
    temp[i]=NULL
}
delete [] pole;    // delete old array.
pole=temp; 
```

# linux - 作为 cron 作业运行时，shell 脚本无法完全运行

> ID：15636997
> 
> 赞同：0
> 
> 时间：2013-03-26T12:22:32.483
> 
> 标签：linux, shell, cron, centos

我在设置为通过 crontab 每分钟运行一次的 shell 脚本时遇到了一个特殊问题。

我使用 Pelican 作为博客平台，并希望在有新帖子时半自动化网站更新的方式。为此，我创建了一个脚本来查找`respawn`在与内容相同的目录中调用的文件（它通过 Dropbox 同步，因此我只需在那里创建同步到服务器的文件）。

编写脚本是为了如果文件`respawn`存在，那么它会重建博客并将其删除。如果不是，它将退出。

这是调用的脚本`publish.sh`

```
#!/bin/bash
Respawn="/home/user/content/respawn"
if [ -f $Respawn ]
then
   sudo /home/user/sb.sh;rm $Respawn
else
    exit 0
fi
exit 0 
```

这是 shell 脚本的 crontab

`* * * * * /home/user/publish.sh`

最后，这里的内容`sb.sh`

`make html -C /var/www/site/`

现在，如果我通过 SSH 运行脚本并且`respawn`存在，它就可以完美运行。但是，如果我让 cron 执行此操作，则它不会运行 shell 脚本，但仍会删除该`respawn`文件。

我还有另一项每 4 小时运行一次的 cron 作业，它运行`sb.sh`得非常好（以防我忘记发布某些内容）。

我已经尝试使用用户的 crontab 并将其添加到 root，并且我还将用户添加到 sudoers 文件中，因此它可以在没有密码干预的情况下运行。两者似乎都不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:29:31.810

一定是`sudo`。`cron`无法输入密码。检查运行 cron 的用户的邮件以确认。类似的东西`sudo: no tty present`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:30:27.847

尝试更改`sudo /home/user/sb.sh;rm $Respawn`为

`/home/user/sb.sh;rm $Respawn`

`sudo`没有必要在这种情况下运行您的命令，因为无论如何它都会以 root 身份调用。