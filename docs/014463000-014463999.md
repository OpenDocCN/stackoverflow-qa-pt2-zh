# StackOverflow 问答 14463000-14463999

# hl7 - 实体名称必须紧跟发送 HL7 消息的实体引用中的“&”

> ID：14463000
> 
> 赞同：0
> 
> 时间：2013-01-22T16:13:09.590
> 
> 标签：hl7, mirth

全部

当我向 Mirth Http Listener 发送 hl7 消息时，我是新来的，我得到一个异常

实体名称必须紧跟实体引用中的“&”。

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:01:42.570

您使用的是什么 HTTP 侦听器设置、入站数据类型和示例消息？此外，在此处导出和发布/粘贴您的频道；它使故障排除变得更加容易。

# java - statsdclient(java) 和 statsd 之间的不一致

> ID：14463001
> 
> 赞同：0
> 
> 时间：2013-01-22T16:13:09.467
> 
> 标签：java, node.js, graphite, statsd

我使用了一个 java 客户端（在 statsd 示例中可用）来触发我的测试应用统计信息。首先我遇到了这个错误：

```
[22/Jan/2013 06:14:38] code 400, message Bad request version ('1358856879')
[22/Jan/2013 06:14:38] "stats.statsd.bad_lines_seen 0 1358856879" 400 - 
```

然后我编写了一个小型 Java 程序来确认我的应用程序是否能够正确连接到 StatsD 服务器。是的，数据包也正确送达。

然后我`debug=true`转向**statsd**。这是控制台输出：

```
22 Jan 21:32:33 - debug: Counters:
{ 'statsd.bad_lines_seen': 0,
  'statsd.packets_received': 0,
  stat1: 0,
  stat2: 0,
  stat3: 0 }
Timers:
{}
Gauges:
{} 
```

这是我写的代码：

```
graph.increment("stat1");
graph.increment("stat1", 10);
graph.increment("stat1", 10, .1);
graph.increment(10, .1, "stat3", "stat2", "stat2"); 
```

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:57:33.667

这是 StatsD 的问题。他们已经关闭了这个问题。

# angularjs - 嵌套指令

> ID：14463005
> 
> 赞同：0
> 
> 时间：2013-01-22T16:13:20.690
> 
> 标签：angularjs

我有两个指令，一个是翻译字符串，一个是创建一个带有标题的容器。（以及为使示例更短而删除的一些其他功能）

组框：

```
myapp.directive('groupbox', function () {
    return {
        restrict: 'E',
        priority: 200,
        template:
            '<fieldset>' +
            '<legend data-translate>{{title}}</legend>' +
            '<div data-ng-transclude></div>' +
            '</fieldset>',
        transclude: true,
        replace: true,
        scope: {title: '@'}
    };
}); 
```

翻译：（也简化）

```
myapp.directive('translate', ['$filter', function ($filter) {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            var e = $(element);
            var data = attrs.translate;

            var results = $filter('I')(e.html(), data);
            e.html(results.text);
            if (results.tooltip) e.attr('data-tooltip', results.tooltip);
        }
    };
}]); 
```

我这样使用它：

```
<groupbox title='settings'>
   content
</groupbox> 
```

这个想法是将“组框”的内容放在 div 中，将标题放在“图例”中。在此之后，图例需要由 translate 指令翻译。这种翻译不会发生（它只是打印设置）。当我用“设置”替换“{{title}}”时，它确实被翻译了。

如何让翻译指令对 groupbox 指令的结果进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:55:48.647

我通过添加一个编译函数来修复它，该函数将标题直接放在图例中（没有绑定）。这样，它与我的翻译指令的任何其他用途没有什么不同。

```
myapp.directive('groupbox', function () {
    return {
        restrict: 'E',
        transclude: true,
        replace: true,
        template:
            '<fieldset>' +
                '<legend>' +
                    '<span data-translate></span> - ' +
                    '<a data-ng-click="open = !open" data-translate>toggle</a>' +
                '</legend>' +
                '<div data-ng-show="open" data-ng-transclude></div>' +
            '</fieldset>',
        compile: function(element, attrs) {
            element.children('legend').children('span').html(attrs.title);
        }
    };
}); 
```

# mongodb - 消息服务：redis 还是 mongodb？

> ID：14463010
> 
> 赞同：3
> 
> 时间：2013-01-22T16:13:42.413
> 
> 标签：mongodb, redis

我正在开发一个比简单地发送接收消息更高级的消息传递系统；它看起来像 facebook 聊天/消息：它有聊天方面，但也有消息方面，如群组消息、已读/未读消息等。

在 redis 上，我会简单地使用列表来存储收到的消息，例如：

```
myID = [ "amy|how are you?", "frank|long time no see!" ]
amyID = [ "john|I'm good! you?" ] 
```

（为了便于阅读，我已经简化了很多。

但是通过这种方式，我将无法跟踪单个对话，因为一旦收到消息，它们都会被刷新（所以基本上没有“收件箱”功能。

另一方面，如果我使用 mongodb，我可以使用这样[的东西：如何使用 MongoDB 跟踪私有消息传递系统？](https://stackoverflow.com/questions/2671894/how-to-keep-track-of-a-private-messaging-system-using-mongodb)

我认为以下优点/缺点：

蒙古数据库

优点：

*   可以看到收件箱视图
*   可以检查每个对话的已读/未读消息

缺点

*   不如redis快
*   存储大小增加很多

雷迪斯

优点：

*   易于接收新消息
*   没有存储问题（消息被刷新）

缺点：

*   一旦消息发送到客户端就会丢失，因此没有已读/未读功能和
*   没有收件箱

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T23:09:14.410

我无法回答 Redis，因为我不使用它，也从未使用过，所以我不会假装我有。

但是，如果由于某种原因，您没有使用像 Facebook 这样的 XMPP 客户端：http: [//www.ibm.com/developerworks/xml/tutorials/x-realtimeXMPPtut/section3.html](http://www.ibm.com/developerworks/xml/tutorials/x-realtimeXMPPtut/section3.html)（又名 Jabber）进行聊天在这种情况下，我将描述一个纯 MongoDB 解决方案。

MongoDB 使用操作系统的 LRU 作为缓存文档和查询的一种方式，公平地说，它不提供直接查询缓存，但是如果您很聪明，您将不需要它；相反，您只需直接从 RAM 中读取所有查询。考虑到这一点，MongoDB*可以*和 Redis 一样快，因为 Redis 也使用计算机 RAM。

我认为优化查询上两者之间的速度可以忽略不计。速度的真正衡量标准来自您的架构、索引、集群设置和您执行的查询。

此处关于存储大小的说明，考虑到您的评论：

> 刷新 mongodb 的问题比我最初的问题要大：显然，当您在 mongo 上删除某些内容时，您只会删除它的引用，因此如果您删除 4mb 的文档，它不会释放那么多空间。真正释放内存的唯一方法是运行一个 dbRepair （或这一行中的某个东西），它在运行时基本上会阻塞 db....

您似乎对 MongoDB 的工作原理有一些误解。

此链接将对您有所帮助：[http](http://www.10gen.com/presentations/storage-engine-internals) ://www.10gen.com/presentations/storage-engine-internals它将描述使用过多磁盘空间的一些原因，还将解释您对的一些误解计算机如何工作以及 MongoDB 如何释放空间并重用它。

MongoDB 不会释放记录级别的空间。相反，它会发送“空”记录（记录和文档是两个不同的东西，正如演示文稿会告诉你的那样），将其推入已删除的存储桶列表，然后在新文档（或已移动的更新文档）时重用该空间) 出现并适合该空间。

确实，如果您不仔细并了解 MongoDB 在此级别上的工作方式，您可能会被迫`repairDB`相当定期地运行以在碎片后保持任何类型的性能。

至于内存处理。正如我所说，操作系统会处理这个问题。关于操作系统何时释放内存的一个很好的解释是在维基百科上：[http ://en.wikipedia.org/wiki/Paging](http://en.wikipedia.org/wiki/Paging)

> 在没有足够的 RAM 来存储所需的所有数据之前，获取空页框的过程并不涉及从 RAM 中删除另一页。

因此，操作系统将为您处理删除页面，您不应该关心这部分，而是应该关心使您的工作集适合 RAM。

如果您担心存储消息并且真的不想这样做，即您希望它们被“刷新”，您实际上可以使用后期 MongoDB 安装附带的 TTL 功能：http: [//docs.mongodb.org/manual /tutorial/expire-data/](http://docs.mongodb.org/manual/tutorial/expire-data/)基本上允许您设置一个超时时间，以便从集合中删除一条消息。

因此，就个人而言，如果设置正确，MongoDB 可以像 Facebook 那样进行消息传递和聊天，当然他们使用 XMPP 协议，然后将消息存档到 Cassandra 中进行搜索，但您不必像他们那样做，这只是一个达到相同目标的方法。

希望这是有道理的，我没有绕圈子，这是一个有点长的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:18:38.100

我认为这里的重点是存储问题。你需要很多机器或一个好的系统来刷新一些对话才能使用 MongoDB。尽管想要一种“收件箱”系统……我认为 redis 会更有利于一个运行良好的聊天系统——你只需要想出一些非常有创意的解决方法……或者放弃那个设计目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T14:12:23.513

我们使用混合设计，因此当我们需要在消息、队列和缓存方面的快速性能时，它在 Redis 上，当我们需要搜索二级索引或更新整个文档时，我们使用 MongoDB。

你也可以试试 Riak，它比 MongoDB 可以更线性、更平滑地增长。

# cakephp - Cakephp中升序的下拉列表

> ID：14463023
> 
> 赞同：2
> 
> 时间：2013-01-22T16:14:15.857
> 
> 标签：cakephp

```
echo $form->input(
    'country_id',
    array(
        'type' => 'select', 
        'label' => __('Country *', true), 
        'empty' => 'Select' , 
        'order' => array('countries.name ASC')
    )
); 
```

国家/地区列表未按升序显示。请任何人帮助我找出错误或按升序显示国家/地区列表的好方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:37:12.137

您需要添加`order`到您的`find`查询：

```
$countries = $this->Country->find('list', array(
    'fields' => array('Country.id', 'Country.name'), 
    'order' => array('Country.name' => 'ASC')
)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-24T09:42:42.990

对于 cakephp 3.*，您可以使用此代码；

```
$countries = $this->Country
           ->find('list',
           [
               'keyField' => 'Country.id',
               'valueField' => 'Country.name',
               'order' => array('Country.name' => 'ASC')
           ])
           ->toArray(); 
```

# javascript - 如何使用 CKFinder Javascript api？

> ID：14463025
> 
> 赞同：4
> 
> 时间：2013-01-22T16:14:23.117
> 
> 标签：javascript, ckfinder

有趣的问题，但老实说，我无法访问（例如）`CKFinder.dataTypes.Folder`：[http](http://docs.cksource.com/ckfinder_2.x_api/symbols/CKFinder.dataTypes.Folder.html) ://docs.cksource.com/ckfinder_2.x_api/symbols/CKFinder.dataTypes.Folder.html 。

我已经为 asp.net 下载了 CKFinder 2.x 演示来试用该实用程序，而智能感知让我可以访问的唯一东西是 window.CKFinder 对象及其一些方法，但没有别的。我也无法`Folder`在 ckfinder.js 中找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T12:16:33.140

[如文档](http://docs.cksource.com/ckfinder_2.x_api/symbols/CKFinder.dataTypes.Folder.html#constructor)中所述，您可能无法直接访问它，而是应在加载 CKFinder 对象后调用任何***文件夹 API 函数。***

> 注意：**CKFinder.dataTypes**命名空间不可直接访问（CKFinder.dataTypes 未定义）。数据类型由 CKFinder 内部使用并由许多函数返回，例如 CKFinderAPI#getSelectedFolder。

以下示例是 CKFinder 组件的 javascript 中的初始化，它显示了如何访问文件夹数据类型。

```
<script type="text/javascript">
    var finder = new CKFinder();
    finder.basePath = '/js/ckfinder/'; // The path for the installation of CKFinder (default = "/ckfinder/").
    // Setting custom width and user language.
    finder.width = '99%';
    finder.defaultLanguage = 'es';
    finder.language = 'es';

    finder.removePlugins = 'basket';
    //finder.selectActionFunction = showFileInfo;
    //finder.resourceType = 'Images';
    //finder.tabIndex = 1;
    //finder.startupPath = "Images:/";

    finder.callback = function( api ) 
    {
        api.openMsgDialog( "", "Almost ready to go!" );
        api.hideTool( "f2" );//hide flash folder
        api.openFolder('Images', '/');
        var folder = api.getSelectedFolder();
        //console.debug(folder);
        folder.createNewFolder( 'New Folder' );
        //api.setUiColor('white');
    };
    var api = (finder).create();

    //console.debug(api);
    //api.openMsgDialog("Sample title","Sample message."); //doesnt work here, CKFinder still not loaded.
</script> 
```

# statistics - 我需要哪些统计测试来找到显着性

> ID：14463027
> 
> 赞同：0
> 
> 时间：2013-01-22T16:14:29.700
> 
> 标签：statistics

我不确定我需要哪种统计测试技术来评估我的结果:(我用三种不同的技术测试了 30 个样本。如何在以下情况下从统计学上找到哪种技术更好？

比较三合一测试？

在三个不同的测试中比较对，例如 tech1 和 tech2、tech1 和 tech3、tech2 和 tech3？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:12:06.293

所以我在 Microsoft excel 中对 1 & 2、2 & 3 和 1 & 3 应用了 ttest。

因为使用 3 种不同的技术对相同的样本进行了评估，所以我使用了公式

为 A、B 做 TTest

=ttest( A 的 30 个值，B 的 30 个值，2, 1)

# javascript - 添加值以更正表的父亲部分

> ID：14463030
> 
> 赞同：0
> 
> 时间：2013-01-22T16:14:33.100
> 
> 标签：javascript, jquery, dynamic, parent-child, innerhtml

我弹出一个对话框，其中包含下拉选择、一个输入框和一个保存按钮。此保存按钮使用用户下拉/输入值更新父表，但位于表的末尾。我需要将这些值放在表中所选父亲部分的下方。我的父亲下拉菜单有独立的 ID，我只是不知道如何实现它。我试图剥离我的代码以在 jsfiddle 中工作，但演示不会向表中添加值。这是我弹出对话框的代码：

```
<script>
$("#save").click(function () {          
    for(var j=0;j<document.getElementsByName("select1").length;j++) {
        updateParent1(document.getElementsByName("select1").item(j).value + '&nbsp;' +
                      document.getElementsByName("text1").item(j).value + '&nbsp; - ' +
                      document.getElementsByName("select2").item(j).value,
                      document.getElementsByName("chooseFather").item(j).value);                     
            }
        });
</script>

<form method="post" name="shoreInfo">
<table>
      <tr>
        <td>
        <select name="select1" value="1">
          <option selected value="undefined">Select...</option>
          <option value="Value 1 (option1)">Value 1 (option1)</option>
          <option value="Value 1 (option2)">Value 1 (option2)</option>
        </select>
        </td>
        <td>
        <select name="chooseFather" value="4">
          <option selected value="undefined">Select...</option>
          <option id="father3">Choose to add this information under father3 row.</option>
          <option id="father4">Choose to add this information under father4 row.</option>
        </select>
        </td>
        <td>
        <select name="select2" value="3">
          <option selected value="undefined">Select...</option>
          <option value="Value 2 (option1)">Value 2 (option1)</option>
          <option value="Value 2 (option2)">Value 2 (option2)</option>
        </select>
        </td>
        <td>
        <input type="text" name="text1" value="2" class="text94 apni"/>
        </td>
        <td><input type="button" value="Add values to table" id="save" />
        </td>
      </tr>
</table>
</form> 
```

这是父页面的代码：

```
<script>
    function updateParent1(value1) {
            var table = document.getElementById("shore_tab");
                var rowCount = table.rows.length;
                //alert(rowCount);
                var row = table.insertRow(rowCount);

                    var cell1 = row.insertCell(0);
                    cell1.innerHTML = "";

                    var cell2 = row.insertCell(1);
                    cell2.innerHTML = value1;

                    var cell3 = row.insertCell(2);
                    var element1 = document.createElement("input");
                    element1.type = "checkbox";
                    cell3.innerHTML = "<img title='remove'  src='images/delete-row-icon1.png' class='sub_icon remove'/> &nbsp;";
                    cell3.appendChild(element1);
    }
</script>

  <table id="shore_tab" border="1">
                      <tr class="row_blue_bold father" id="father3">
                        <td colspan="2" class="father_header">Category 3</td>
                        <td class="cell_50">&nbsp;</td>
                      </tr>
                            <tr class="row_blue_bold son3">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father3, category 3)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                            <tr class="row_blue_bold son3">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father3, category 3)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                      <tr class="row_blue_bold father" id="father4">
                        <td colspan="2" class="father_header">Category 4</td>
                        <td class="cell_50">&nbsp;</td>
                      </tr>
                            <tr class="row_blue_bold son4">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father4, category 4)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                            <tr class="row_blue_bold son4">
                              <td class="cell_20 cell_no_bkg">&nbsp;</td>
                              <td class="cell_190">(information for father4, category 4)</td>
                              <td class="cell_50">&nbsp;</td>
                            </tr>
                    </table> 
```

# r - 基于列总和的分位数的子集数据（列）

> ID：14463034
> 
> 赞同：0
> 
> 时间：2013-01-22T16:14:47.543
> 
> 标签：r, dataframe, subset

有没有一种聪明的方法可以根据列总和的分位数从数据框中选择列？例如，仅从数据框中选择列总和在第一个分位数中的列。我可以对基于数据的列总和进行子集化，并且可以计算列总和的分位数，但是有没有一种结合这些的好方法？谢谢。

```
# e.g. subset data - select columns whose column sums are less than 5
mydata <- mydata[,colSums(mydata) < 5]

# e.g create quantiles on colSums
mydata_cs <- colSums(mydata)
quart.mydata_cs <- quantile(mydata_cs,probs=seq(0,1, by=0.25)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:21:38.513

使用你的`mydata_cs`，以下应该工作

```
mydata.firstquart <- mydata[,mydata_cs < quantile(mydata_cs,0.25)] 
```

根据您的第一行代码，我假设“第一个四分位数”是指最低四分位数。如果你想要最高的四分位数，只需将其更改为

```
mydata.firstquart <- mydata[,mydata_cs > quantile(mydata_cs,0.75)] 
```

您可能还想使用`<=`or`>=`而不是`<`and `>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:21:57.577

```
 x <- c(1,2,3,4,5)
 y <- c(4,6,9,2,9)
 df <- data.frame(x,y)
 q <-  quantile(colSums(df),probs=seq(0,1, by=0.25))
 df[,colSums(df) < q[2] ,drop=FALSE] 
```

# java - EJB 依赖于另一个 EJB？

> ID：14463042
> 
> 赞同：1
> 
> 时间：2013-01-22T16:15:08.653
> 
> 标签：java, ejb, jboss7.x, jndi, ejb-3.1

我正在使用 Jboss 7 并且有两个单独的部署，它们都包含单例 EJB。

我需要一个 EJB 才能访问另一个 EJB 并能够调用它的方法，但是，当应用程序服务器启动并尝试部署它们时，似乎无法保证哪个 EJB 先启动（即使您设置`Dependencies: deployment.xxx.jar`在一个到另一个）。

我似乎无法使用`@DependsOn`注释，因为它命名了一个特定的 EJB，这似乎在单独的部署中不可行，让我`@EJB(lookup=JNDI_STRING)`成为我唯一的选择。然而，这种注入似乎并不能保证您所依赖的 EJB 将在查找发生时实际*启动*，从而导致 NPE。显然，如果您只是使用`InitialContext`from`@PostContruct`方法通过 JNDI 查找第二个 EJB，也会发生这种情况。

所以，我基本上需要保证一个部署中的一个 EJB 将在另一个部署中的另一个 EJB 之前在同一个应用服务器上启动。我认为如果我要延迟初始化依赖的 EJB，比如`HttpServlet`启动时运行的集合，它可能会起作用，但这并不理想。

也许我缺少一些明智的方法来做到这一点？我真的不想在 EJB 启动之前*轮询它。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-22T15:56:02.153

您可以在 jboss-deployment-structure.xml 中配置

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure>
   <deployment>
       <dependencies>
           <module name="deployment.app1.ear" />
       </dependencies>
   </deployment>
</jboss-deployment-structure> 
```

源码[大师theboss](http://www.mastertheboss.com/jboss-server/jboss-deploy/configuring-jboss-as-7-deployment-order)

# php - 如何不使用 PHP 表单通过电子邮件发送空表单字段

> ID：14463043
> 
> 赞同：1
> 
> 时间：2013-01-22T16:15:15.140
> 
> 标签：php, html, forms

我有一个包含大约 100 个可能条目的 HTML 订单。表单发布到 PHP 文件。PHP 文件发送一封电子邮件，其中包含订单数量和每件商品的总金额。
问题是它在数量 = 0 时发送信息 - 当然，这使得生成的电子邮件非常麻烦。所以，我的问题是：当数量为 0 时我如何不发送信息

这是我对 POST 部分的编码示例：

```
if( !empty($_POST[""]) )
else
{
    $qtyG01lg = 0;
    $totalG01lg = 0;
} 
```

如果数量为“0”，这是我不想发送的部分：

```
$body .= "     G01-large: (" . $qtyG01lg . " @ $10.00ea) = " . $totalG01lg . "\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:21:59.450

检查数量是否为 0 的行应该是，

```
 if( $qtyG01lg > 0 && $totalG01lg > 0 )
  $body .= "     G01-large: (" . $qtyG01lg . " @ $10.00ea) = " . $totalG01lg . "\n"; 
```

此外，您不能将空字符串作为 $_POST ( `if( !empty($_POST[""]) )`) 中的名称/键。所以，这条线应该是，

```
 if( !empty($_POST) ) //or specify the key/index for quantity or whatever you want to check 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:20:59.247

可能是这样的：

```
if(isset($_POST)&&!empty($_POST['quantity'])) 
```

你能提供更多的代码吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:26:20.393

```
if($_POST && $_POST["quantity"]>0)
  $body .= "     G01-large: (" . $qtyG01lg . " @ $10.00ea) = " . $totalG01lg . "\n"; 
```

# jquery - jqTransform 自动提交

> ID：14463044
> 
> 赞同：0
> 
> 时间：2013-01-22T16:15:15.487
> 
> 标签：jquery, submit, onchange, jqtransform

我正在尝试在 jqTransformSelect 上实现自动提交。我努力了

```
$("div.jqTransformSelectWrapper ul li a").click(function(){     
  $("select-form").submit();            
  return false;
}); 
```

但我失败得很惨。我注定要放弃 jqTransform 还是这个脚本有破解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:18:17.287

您的选择器应该是一个 ID：

```
$("#select-form").submit(); 
```

注意选择器开头的“#”。目前您正在匹配一个标签。

# php - Laravel 4 中的 Restfull 控制器

> ID：14463054
> 
> 赞同：0
> 
> 时间：2013-01-22T16:15:46.990
> 
> 标签：php, laravel, laravel-4

我正在尝试这样做：

```
class ProjectsController extends BaseController {

public $restful = true;

public function get_admin_index()
{
    echo 'get admin index'; exit;
} 
```

但不起作用。

如果我尝试将此控制器放在**app/controller/admin/**文件夹中，并将方法更改为仅**get_index**，也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:20:08.970

L4 中的所有方法都是驼峰式的，因此 get_index() 将是 getIndex()。话虽如此，我相信您会想看看这个[Resourceful controllers](http://four.laravel.com/docs/controllers#resource-controllers)。

# c# - 为什么 WinRT 中需要 DefaultOverloadAttribute？

> ID：14463055
> 
> 赞同：6
> 
> 时间：2013-01-22T16:15:51.277
> 
> 标签：c#, javascript, .net, windows-8, windows-runtime

我最近有一个 WinRT 类定义，其方法如下：

```
public void Foo(string x){}
public void Foo(CustomClass x){} 
```

编译器虽然抛出了一个错误

> Earlz.FooBar 的 1 参数重载必须通过使用 Windows.Foundation.Metadata.DefaultOverloadAttribute 进行装饰，将一个方法指定为默认重载。

这个属性有什么样的含义？我不熟悉 WinRT 投影的工作原理，但我所写的最终将是一个可公开使用的 API。所以，我想确保我不会做任何会给使用 API 的人带来痛苦的事情。我应该将我的`Foo`方法重命名为`FooCustom`或类似，还是在更常用的函数上使用 DefaultOverload？

另外，我尝试查找此属性的作用以及为什么需要它，但[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.metadata.defaultoverloadattribute.aspx)像往常一样缺乏详细信息，只给出了单句描述“表示方法是默认的重载方法”

我认为这个属性的主要原因是因为 Javascript 只支持参数计数的重载，而不是参数类型。但是，Javascript 应用程序如何访问具有类型重载的非默认 WinRT 方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T18:46:47.757

正如 Jesse Jiang 在[此线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/17eee933-4b37-47de-beb6-60a5d46b1101)中所描述的：

> JavaScript 区分重载方法的能力有限。因此，您需要更改函数名称，或者设置 Windows::Foundation::Metadata::DefaultOverloadAttribute 来设置默认的重载函数。

# bash - 不明白如何检查命令的结果（在循环内）

> ID：14463064
> 
> 赞同：1
> 
> 时间：2013-01-22T16:16:21.443
> 
> 标签：bash

我正在做一个 bash 脚本，它应该搜索用户是否曾经登录过计算机，我已经来到下面的这一部分，不知道该怎么做。

我创建了一个循环来读取 wtmp 文件（已经复制并解压缩），并显示所有行与用户（这部分有效）。但是，当找不到用户时，脚本应该通知它，但我不知道该怎么做。

```
ls -1t $folder/wtmp* 2> /dev/null| while read filename ;
do
    last -f "${filename}" 2>/dev/null | grep $user | cut -c 1-7,40-63
done 
```

我会感谢一个好的建议，人们:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:08:24.660

`grep`如果找不到请求的正则表达式，将以非零退出状态退出，因此您可以将所有调用的输出通过管道传递到 last 通过一次调用 to `cut`，然后通过一次调用 to `grep`，这将输出匹配行，或者没有找到并导致列表的其他部分执行。

```
for filename in "$folder"/wtmp*; do
  last -f "${filename}"     
done 2> /dev/null | cut -c 1-9,40-63 | grep $user || echo "$user not found" 
```

此外，不需要调用`ls`，因为您用作参数的 glob`ls`可以直接由 for 循环使用来遍历目录中的文件。

（我调整了字符范围，以便您获得完整的 8 个字符的用户名加上一个空格来分隔用户名和时间戳。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:30:57.083

好的，在你做你的循环之前使用 pipefail。Pipefail 是一个 bash 选项，它将在命令管道中返回最右边的非零错误状态。

例如，您的问题如下

```
last -f file | grep user | cut -c 1-7

 succeeds        fails      succeeds 
```

但是 bash 默认只会使用 cut 命令的退出代码作为管道的退出代码（ $? ）

如果你

```
set -o pipefail 
```

首先将使用 grep 的退出状态

所以：

```
set -o pipefail
ls -1t $folder/wtmp* 2> /dev/null| while read filename ;
do
    last -f "${filename}" 2>/dev/null | grep $user | cut -c 1-7,40-63
    [[ $? -gt 0 ]] && echo "user not found in $filename"
done
set +o pipefail 
```

# java - 将数据写入屏幕两次而不是一次

> ID：14463066
> 
> 赞同：2
> 
> 时间：2013-01-22T16:16:23.013
> 
> 标签：java, android, terminal

我正在使用 android 中的库连接到终端仿真器，它连接到串行设备（开关）并显示发送/接收的数据。我使用另一个库通过串行发送数据。我通过终端下方的文本框或在终端本身输入并在两种情况下按键盘上的 Enter 键通过连接发送数据。当我通过`editText`一切正常发送时。数据被发送和接收并显示在终端上。

但是，当我选择终端并键入字符时，这些字符会显示在屏幕上并直接发送到 write 方法，而不是通过串行发送。如果我通过 write 方法通过串行方式发送它们，它们会在终端上显示两次。

在我的活动中，我有一个名为的方法`sendOverSerial`，它只调用一个库方法来通过串行发送数据。它发送数据，然后从串行设备接收数据并`onDataReceieved`自动调用。

```
public static void sendOverSerial(byte[] data) {

    if(mSelectedAdapter !=null && data !=null){
    mSelectedAdapter.sendData(data);

  }} 
```

接收数据时调用的方法：

```
 public void onDataReceived(int id, byte[] data) {

            dataReceived = new String(data);
            dataReceivedByte = data;
            statusBool = true;
            Log.d(TAG, "in data received " + dataReceived);
            ((MyBAIsWrapper) bis).renew(data);

            runOnUiThread(new Runnable(){

                @Override
                public void run() {

                    //this line writes to the terminal
                    mSession.appendToEmulator(dataReceivedByte, 0, dataReceivedByte.length);
                }});

            viewHandler.post(updateView);
        } 
```

通常，当我想通过串行发送数据时，我会通过 editText 和按钮调用活动中的 sendOverSerial 方法。但是当我将字符写入终端本身时，它们会在不同的类写入方法中被拾取。我的问题是，如果我从接收数据的那个实例调用 sendOverSerial 方法，它会两次写入屏幕，一次是当我按下键时，然后再次是当数据通过串行发送并调用 onDataReceived 时。

这是第二个类中的 write 方法：

```
 public void write(byte[] bytes, int offset, int count) {

//this line ends up calling onDataReceived which writes to the terminal again
//I need it to send the data over serial
             GraphicsTerminalActivity.sendOverSerial(data);
     if (isRunning()) {
                 //this line writes to the terminal
                 //I need this line for my editText data to be written to the screen
         doLocalEcho(bytes);
     }
     return;
 } 
```

做本地回声：

```
private void doLocalEcho(byte[] data) {
        String str = new String(data);
        appendToEmulator(data, 0, data.length);
        notifyUpdate();
    } 
```

我在终端上输入一个字符，这个字符是`write`自动发送的。在这里它被写入屏幕，`super.write(bytes, offset, count);`但接下来`GraphicsTerminalActivity.sendOverSerial(data);`调用它通过串行发送数据并从串行设备引起回声，这意味着`onDataReceived`将再次将字符写入屏幕。

如何更改代码以便屏幕上只显示一个字符？如果我移动 `GraphicsTerminalActivity.sendOverSerial(bytes);`到`onDataRecieved`一个无限循环发生，所以我不能把它放在那里。

# java - 如何在 Android 集合中存储 25,000 个对象（HashMap、LinkedHashMap、ArrayList、Map）

> ID：14463069
> 
> 赞同：0
> 
> 时间：2013-01-22T16:16:48.407
> 
> 标签：java, android, collections

实际上，我从 Web 服务中获取了 25,000 个 JSON 对象，并且我正在使用 Jackson 来解析它们，当我试图在集合（HashMap、LinkedHashMap、Array List、Map）中拥有它时，不幸的是我正在使用所有这些对象进入“Android中的内存不足异常”..有人可以在我的情况下使用巨大的对象对此进行过实验，它最多可能会达到50,000个对象。那么我该如何更好地处理。我试图通过扩展上述集合来创建一些自定义对象，但我还不够好，无法将其取出。请有任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:35:37.410

如果你有足够的内存，50000 或 5000 万个对象都不是问题。如果您的内存有限，一种选择是将值存储在磁盘上，例如存储卡。每个键可以有一个文件，文件的内容就是值。如果这些值很小（< 1 KB），您可以以某种方式组合这些值以减少使用。由于数据是文本，因此您也可以压缩数据以减少磁盘使用量。

您可以保留最近值的缓存。此缓存可能是最后 10 - 1000 个键/值，因此可以通过磁盘上的其余部分快速访问它们。

如果您压缩数据后，它不适合设备的存储，您可能需要将存储移动到服务器并通过网络提取您需要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:37:11.413

你真的需要内存中的对象吗？您可以解析项目并将它们存储在 sqlite 数据库中。只要您想显示项目，就只从数据库中获取所需的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:16:08.647

在Java中，有一些3party库，已经实现；将集合存储到硬盘。像 MegaMap，但在 android 上；我认为它没有经过太多测试。

[http://megamap.sourceforge.net/index.html](http://megamap.sourceforge.net/index.html)

由于可以获得 5 万个 Object，我建议您实现一个 sqlite 数据库来存储信息。这样您就可以在需要时仅获取所需的信息。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:28:33.750

一种减少内存占用的技术：

我将讨论字符串，但以下内容也适用于其他对象。

为了防止在多个实例中持有相同的（.equals）对象，请执行以下操作

```
private Map<String, String> sharedStrings = new HashMap<>().

public void shareString(String s) {
    String t = sharedStrings.get(s);
    if (t == null) {
        t = s;
        sharedStrings.put(t, t);
    }
    return t;
} 
```

# wordpress - 将缩略图添加到档案页面

> ID：14463074
> 
> 赞同：2
> 
> 时间：2013-01-22T16:17:03.600
> 
> 标签：wordpress

我是 Wordpress 的新手，并且在存档页面上使用模板 BlankSlate 广告我想显示插入到帖子中的图像的缩略图，我该怎么做？这是我的archives.php 代码。

提前致谢！

```
<?php the_post(); ?>
<?php if ( is_day() ) : ?>
<h1 class="page-title"><?php printf( __( 'Daily Archives: %s', 'blankslate' ), '<span>' . get_the_time(get_option('date_format')) . '</span>' ) ?></h1>
<?php elseif ( is_month() ) : ?>
<h1 class="page-title"><?php printf( __( 'Monthly Archives: %s', 'blankslate' ), '<span>' . get_the_time('F Y') . '</span>' ) ?></h1>
<?php elseif ( is_year() ) : ?>
<h1 class="page-title"><?php printf( __( 'Yearly Archives: %s', 'blankslate' ), '<span>' . get_the_time('Y') . '</span>' ) ?></h1>
<?php elseif ( isset($_GET['paged']) && !empty($_GET['paged']) ) : ?>
<h1 class="page-title"><?php _e('Blog Archives', 'blankslate' ); ?></h1>
<?php endif; ?>
<?php rewind_posts(); ?>
<?php while ( have_posts() ) : the_post(); ?>
<?php get_template_part( 'entry' ); ?>
<?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:23:15.373

将此代码放在您希望它出现的循环中。

`<?php if(has_post_thumbnail()) { the_post_thumbnail(); }?>`

从[文档](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)中：

> 显示当前帖子的特色图片（以前称为帖子缩略图），如该帖子的编辑屏幕中设置的那样。
> 
> 该标签必须在 The Loop 中使用。使用 get_the_post_thumbnail($id, $size, $attr) 来获取任何帖子的特色图片。
> 
> 要启用帖子缩略图，当前主题必须包含 add_theme_support( 'post-thumbnails' ); 在其functions.php文件中。另请参阅发布缩略图。

# php - 使用 PHP 将图像优化为 YSlow 标准？

> ID：14463076
> 
> 赞同：0
> 
> 时间：2013-01-22T16:17:05.420
> 
> 标签：php, yslow, image-optimization

我一直无法找到这个问题的明确答案。

我想无损地优化我的图像（主要是 jpg），使其满足 YSlow 的图像优化标准。我无法确定需要采取哪些步骤来执行此操作。

我知道像 smush.it 这样的服务，但我不想依赖 API 或服务。

基本上我正在寻找的是根据 YSlow 的标准优化图像的步骤列表。

仅仅使用GD和改变质量是不够的，我还需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:21:24.390

您是否尝试过使用[imageinterlace()](http://php.net/manual/en/function.imageinterlace.php)生成渐进式 JPG ？它使较小的图像略大，但较大的图像要小得多。这是我的图像优化代码的最后一块拼图。

### 示例代码

```
<?php
$new_img = imagecreatetruecolor($img_width, $img_height);
imageinterlace($new_img, true); // Use progressive JPGs
$white = imagecolorallocate($new_img, 255, 255, 255);
imagefilledrectangle($new_img, 0, 0, $img_width, $img_height, $white);
imagecopyresampled($new_img, $img, $x, $y, 0, 0, $new_width, $new_height, $width, $height);
header("content-type: image/jpg");
imagejpeg($new_img, NULL, 100);
imagedestroy($img);
imagedestroy($new_img);
die;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T00:27:40.850

[在 Mike Brittain 的Wesley](https://github.com/mikebrittain/Wesley)项目中实现了一个与 Smush.it 功能相当的粗略等效功能。它是 Perl 而不是 PHP，但您可以根据需要调整它，或者只是在命令行中使用它。

[它实现了Smush.it FAQ](http://developer.yahoo.com/yslow/smushit/faq.html)中描述的类似压缩工具和步骤。

# iphone - 以编程方式将 uilabel 添加到 xib 的视图控制器会导致“No Visible @Interface”错误

> ID：14463084
> 
> 赞同：1
> 
> 时间：2013-01-22T16:17:22.413
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我只习惯于 xcode 中的故事板，但我的新老板希望每个人都在 xib 文件中完成，我没有经验。

到目前为止，我所做的只是创建了一个新的单视图应用程序，并在“viewDidLoad”方法下添加了代码..

```
UILabel *scoreLabel = [ [UILabel alloc ] initWithFrame:CGRectMake(0, 0.0, 150.0, 43.0) ];

[self addSubview:scoreLabel]; 
```

和线

```
 [self addSubview:scoreLabel]; 
```

抛出错误 'No Visible @Interface for 'ViewController' 声明选择器 'addSubView'

我到底在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:18:45.787

`self`是一个`UIViewController`。您将子视图添加到`UIView`. 所有你需要的是：

```
[self.view addSubview:scoreLabel]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:18:58.423

您正在尝试向控制器添加子视图？它应该是视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:20:03.710

`viewDidLoad`是 UIViewController 的方法，不是 UIView。要使您的代码正常工作，请替换：

```
[self addSubview:scoreLabel]; 
```

和

```
[self.view addSubview:scoreLabel] 
```

To add label from the xib, you do not need any of the above code. In your .h file you must declare property with IBOutlet. Then, in your .xib add label and set its referencing outlet to the declared property. I admit, it is not intuitive at first.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T16:21:51.383

```
self.view will be the view of the view controller. 
```

so you can add view ie; sub view only to the view. not its controller. self will be the view controller here

# python - 是否可以重命名 PyMongo 中 Mongo 查询输出中的字段？

> ID：14463087
> 
> 赞同：13
> 
> 时间：2013-01-22T16:17:27.313
> 
> 标签：python, mongodb, pymongo

我在 Mongo 中有一些文件：

```
{"name" : "John", "age" : 26}
{"name" : "Paul", "age" : 34}
{"name" : "George", "age" : 36} 
```

和另一个需要表单文件的函数：

```
{"name" : "XXX", "value" : YY} 
```

是否可以在 PyMongo 的查找查询中将“年龄”字段重命名为“值”？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-22T17:08:03.567

我会使用`aggregate`带有`$project`运算符的方法。

来自 mongodb 网络文档。

> 您也可以使用 $project 重命名字段。考虑以下示例：

```
db.article.aggregate(
 { $project : {
     title : 1 ,
     page_views : "$pageViews" ,
     bar : "$other.foo"
 }} );` 
```

例如

```
db.mycol.aggregate({ $project : { name:1, value:"$age" }}); 
```

见[http://docs.mongodb.org/manual/reference/aggregation/#_S_project](http://docs.mongodb.org/manual/reference/aggregation/#_S_project)

# java - Swing's Timers 中的“快速”是什么意思？

> ID：14463090
> 
> 赞同：14
> 
> 时间：2013-01-22T16:17:46.487
> 
> 标签：java, swing, timer, timertask

来自[Java 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)：

> 请注意，`Swing`计时器的任务是在事件分派线程中执行的。这意味着任务可以安全地操作组件，但也意味着任务应该快速执行。如果任务可能需要一段时间才能执行，则考虑使用 a`SwingWorker`来代替计时器或在计时器之外使用。

“快”是什么意思？我的意思是这不准确，不到一分钟很快还是什么？

例如，如果我想用一些面板制作动画（1 分钟），通过移动它们，改变它们的透明度......并且用户只会看到面板并且不会使用它们（没有 I/ O)，现在 Timer 对于这种情况是个好主意吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T16:19:33.473

这意味着 - 它应该很快，因为 - 几乎没有可见的*延迟*。

但是，在页面的后面，他们说如果您有一个复杂的并发应用程序，请查看[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html) 类并了解有关[swing 的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

关心的不一定是一切运行得有多快，而是它的顺序是否正确。

在 SwingWorker 中，您将了解到多线程 Swing 应用程序有两个主要问题：

> *   不应在事件调度线程上运行耗时的任务。否则应用程序变得无响应。
>     
>     
>     
>     Swing 组件只能在 Event Dispatch Thread 上访问。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T17:24:25.673

回答您的具体问题。

> 如果我想用一些面板制作动画（1 分钟），通过移动它们，改变它们的透明度......并且用户只会看到面板并且不会使用它们（无 I/O） ，现在 Timer 对于这种情况是个好主意吗？

是的，流畅的动画需要 Timer。

假设您希望每秒显示 40 帧。这意味着您有 25 毫秒的时间来准备和显示每个面板。

显然，您可以在动画循环之外进行的计算越多越好。在现代个人电脑上渲染一个面板只需要几毫秒。计算面板，很容易花费超过 25 毫秒。

因此，对于一分钟的动画，您需要 2,400 个面板。预先计算这些面板，并仅渲染它们，将导致更平滑的动画。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T16:27:05.523

在这种情况下，*快速*没有固定的时间限制。但是，您应该假设任何花费超过几十毫秒的任务通常不被认为是快速的。请注意，在 EDT 上运行的任何代码都可能对应用程序的 GUI 产生各种问题。这就是文档建议您改用 a 的原因`SwingWorker`。

这也取决于你的延迟`Timer`。如果它每 50 毫秒运行一次，那么运行 30 毫秒的任务就会变慢。但是，如果您的任务每 5-10 分钟运行一次，只运行 30 毫秒，那么它是可以接受的。您将不得不运行一些测试来查看您`Timer`是否对您的应用程序有任何明显的影响。

查看[本文](http://www.oracle.com/technetwork/articles/javase/swingworker-137249.html)以获取有关 EDT 的更多信息。此外，这个[答案](https://stackoverflow.com/a/782309/994125)提供了很多关于如何使用`SwingWorker`对象的信息。

# jquery - 如何构建自定义 jQuery 缓动/弹跳动画？

> ID：14463091
> 
> 赞同：16
> 
> 时间：2013-01-22T16:17:48.140
> 
> 标签：jquery, jquery-ui, animation, jquery-animate, easing

我熟悉 jQuery animate 函数，并且我也使用过各种[jQuery UI 缓动函数](http://jqueryui.com/resources/demos/effect/easing.html)。不幸的是，它们都没有出现与我正在寻找的相同动画效果，所以是否可以创建自己的缓动函数？

我正在尝试的动画可以在[Apple Mac 网页](http://www.apple.com/mac/)上看到，顶部是动态加载的产品小部件。最初的项目似乎从顶部滑入，然后在着陆后产生反弹效果。是否可以使用自定义 jQuery 代码重新创建这种缓动样式？或者可能构建您自己的第 3 方简单功能？

我已经包含了我正在谈论的内容的屏幕，希望有人可以提供解决方案。提前致谢 ：）

![Mac 动画菜单](../Images/ff1734c70f7636d88f27a3efddb1471c.png)

![突出显示的图形](../Images/5d2c3e35d87d7268b0bf5edba6f84cdb.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T04:45:08.400

在这里查看我的**[演示](http://jsfiddle.net/gtfkm/)**

**[主要思想是使用easeOutCubic](http://jqueryui.com/resources/demos/effect/easing.html)**效果执行 2 个连续动画：

HTML：

```
<div class='left'></div>
<div class='center'></div>
<div class='right'></div> 
```

JS：

```
$('div.left').animate({top: 410, left: 10}, 300, "easeOutCubic", function(){
    $('div.left').animate({top: 400, left: 20}, 300, "easeOutCubic");
});

$('div.center').animate({top: 420}, 300, "easeOutCubic", function(){
    $('div.center').animate({top: 400}, 300, "easeOutCubic");
});

$('div.right').animate({top: 410, right: 10}, 300, "easeOutCubic", function(){
    $('div.right').animate({top: 400, right: 20}, 300, "easeOutCubic");
}); 
```

# android - Android调用包含线程的封装类，用于刷新UI的无限循环不起作用

> ID：14463093
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:17:48.723
> 
> 标签：android, multithreading, encapsulation

android 项目的目的是从硬件设备读取一些数据，然后在 UI 中更新它们。现在我们需要封装一些后台线程接收数据的代码，并提供一个函数让其他类从这个封装的类中获取数据。下面是我这个封装类的代码：

```
public class getDataFromUSB{
        private AtomicInteger usb_data = new AtomicInteger():
        private Random random;

        private Thread thread = new Thread(){
             @override
             public void run(){
                      while(!Thread.currentThread().isInterrupted()){
                          synchronized(usb_data){
                               usb_data.set(read_usb());
                               usb_notify();
                          }
                      }
        };

        public void start(){
             thread.start();
        }

        public int get_data(){
             int ret_data=0;
             synchronized(usb_data){
                     try{
                            usb_data.wait();
                     }catch(InterruptedException e){}
                     ret_data=usb_data.get();
             }
             return ret_data;
        }
        public int read_usb(){
             return random.nextInt();
        }
} 
```

在主活动类中，我想不断地实时获取 USB 的数据，然后将其放在 UI 中的 textview 中。所以我这样称呼这个类：

```
final getDataFromUSB usb1=new getDataFromUSB();
usb1.start();
for(;;){
         myTextView.setText(String.valueof(usb1.get_data()));
} 
```

但是 myTextView 中什么也没有出现。但是当我用

```
for(;;){
         Log.d(TAG,"data="+usb1.get_data());
} 
```

我总是可以在我的日志中获得实时值。任何人都可以帮助解决这个问题吗？或者，如果您对封装这种功能有更好的想法并提供简单的函数，如 get_data() 可以提供实时数据，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:23:29.830

当您使用时，`for(;;)`您会创建一个无限循环，它永远不会暂停并尽可能快地运行。

所以其他线程并没有得到（很多）时间安排来实际做一些他们自己的处理。UI 线程（将重新绘制`TextView`）具有低优先级，因此无法`TextView`重新绘制 ..！

您可能需要多考虑一下：人眼的刷新率为每秒 30 帧。您的设备还具有最大刷新率，这比您更新`TextView`. 因此，通常以 60 fps 更新 UI。当然没有必要尽可能快地刷新 UI。（这对您的电池使用也更好！）

因此，您需要使用某种定时解决方案将刷新速度降低到 60 fps。

`getDataFromUSB`这也适用于线程的无限刷新率！以比您（将要）使用的速度更快的速度获取 USB 是没有意义的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:22:11.283

你读过关于 android 中的 UI 线程的任何内容吗？

您正在阻止运行循环的 UI 线程。所有 UI 绘图都发生在 UI 线程中。setText 只是设置属性。它不会更新视图。永远不要像以前那样阻塞 UI 线程。以处理程序为例。

# xcode - 在我的 XCode 4.5 项目中对以红色显示的框架进行故障排除

> ID：14463101
> 
> 赞同：2
> 
> 时间：2013-01-22T16:18:09.203
> 
> 标签：xcode, frameworks, xcode4.5

在构建任何使用未内置于核心的任何框架（即某些第三方框架）的 Mac OS X 应用程序时，当我查看框架时，似乎很常见的问题是框架显示为红色在 XCode 4.5 中。

有两个最常见的位置可以显示为红色，一个在项目导航器窗格（左侧）中，一个在构建阶段区域。第三个位置，在 Copy Files 区域，通常显示为红色。这三个都有不同的原因。

以下是所有三个地方都显示为红色时的样子：

![在此处输入图像描述](../Images/7bde3b052231fdb15ccf5bdbe554fecf.png)

我们中间观察者的线索：红色部分后面的一些灰色文本表明 XCode 可能错误地在 XCode.app 包中寻找有问题的框架。另请注意，显示的框架没有任何框架图标，仅显示上图中无效框架的占位符图标。

如果根本找不到框架，那么在我构建时，无法导入框架的头文件，所以我得到一个“词法或预处理器问题”。解决方案通常是修复框架搜索路径。然而，即使这似乎是正确的，我仍然经常得到红色框架。

有时，图标是红色的，但是，框架搜索路径运行良好，编译工作正常（`#import <Thingy/Thingy.h>`工作正常，我没有得到任何词法或预处理器问题），但项目不会链接或**崩溃时run**，因为框架在编译阶段被准确引用，而不是在链接或复制文件阶段。

如果 XCode 无法导入框架内的头文件，下面是一个示例：

![在此处输入图像描述](../Images/8ca314352ebdb2016027041575234114.png)

这个问题应该是**通用**的，并且对将来在框架列表中看到“红色”框架的任何人都有用。是的，我已经去供应商那里向供应商寻求有关他们框架的帮助，这应该是第一步。但是，我觉得“XCode 以红色显示框架”令人困惑，它值得一个普遍有用的答案，因此这个问题。另外，我有理由相信，在这种情况下，供应商的安装程序工作得很好，这是我机器上的一个本地问题，其他人将来可能会遇到并且可能希望帮助理解和修复。

扯掉头发后，我发现我可以通过将红色显示的框架复制到其中来解决这个问题，`/Applications/Xcode.app/Contents/Developer/Library/Frameworks`但这可能不是正确的方法。这样做似乎是错误的。如果我将位于 /Developer/VendorName 中的框架复制到 xcode 应用程序包的库/框架中，我可以避免编译器找不到框架。

第三方框架当前自动安装到下面的文件夹中，该文件夹`/Developer`以制作框架的公司命名。XCode 是否应该自动搜索所有文件夹`/Developer`并以某种方式找到这些框架？
目前我在猜测，**不，它不能，所以 XCode 可能必须每次都准确地被告知找到这个第三方框架的路径**。

我无法找到有关“Xcode 如何查找框架”的 Apple 文档。[这里](https://stackoverflow.com/questions/1884426/how-does-xcode-know-where-to-look-for-a-framework/1884512#comment20144298_1884512)有一个问题就是这么问的，但答案都与 GCC 标头搜索路径有关，而不是 Xcode 如何查找框架和构建该搜索路径。

XCode 4.5 搜索哪些文件夹来定位库？`/Developer`即使 XCode 4.5 本身不再存在，是否仍在搜索该文件夹`/Developer`？

当要为 Mac OS X 客户端使用安装第三方框架时，应该将其安装到哪里，以及如何检查安装程序是否正常工作？是否有一些命令行调用可以列出 XCode 可见并安装在我的系统上的所有可用框架？

**脚注：** 第二种工作方式是使用“添加其他”按钮来查找不在已知位置的框架，如果我使用它，那么我经常会遇到一个构建的项目，但在运行时仍然失败，因为复制文件功能没有找到和复制东西，因为使用加号按钮将框架添加到复制阶段似乎在 XCode 中被破坏了。不过有一个解决方法。我最初问的是如何工作，这样您就不需要使用 Add Other，但是，如果 Add Other 是第三方框架的唯一方法，那么，我仍然会遇到 Copy Files 功能无法正常工作的问题。我相信解决这个问题的方法是 XCode 项目自己的框架搜索路径没有为我的系统正确设置，而这就是我需要做的所有事情来解决这个特殊情况。简而言之，我 我想知道全局“框架搜索路径”是什么，它在哪里设置？还是只有 XCode 项目搜索路径，而不是全局框架搜索路径？如果我清理了 Framework 搜索路径，然后使用 Add Other 添加了新的框架，并小心地右键单击并从项目导航器窗格中删除所有 Red 项，如果我只使用鼠标拖放而不使用+ 按钮将框架添加到复制文件中，然后我可以在私有搜索路径位置获取框架来构建和复制。任何尝试使用 Copy Files 区域中的 + 按钮，并通过该对话框添加框架似乎都被某种奇怪的 XCode 错误阻止，在错误的位置添加框架，如第一张图片所示以上，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:27:53.800

是的，这是一个很好的问题。我一直想来就一个相关问题发表一篇文章：为静态库项目创建一个包，其中包含一个已编译的 momd 文件我只能通过使用该包将库项目嵌套在项目下才能开始工作。也就是说，嵌套在 Xcode 中，在文件系统级别它仍然显示为对等点。这与项目如何找到其他项目的产品有关。

同时，在你的具体问题上，我多年来在每个项目中都使用了 OCHamcrest，除非我在项目中实际安装框架文件，否则我一直无法让它可靠地工作。理想情况下，我想将 OCHamcrest 安装在 /Library/Developer/Frameworks 之类的位置之一，但尝试完成这项工作非常痛苦，简直是疯了。

我已经阅读了有关 Xcode 在哪里查找框架的文档，它位于 /Developer/Library/Frameworks 和 /Library/Frameworks 中。如果你往里看，你只会看到苹果的东西。另外，请记住 /Developer 曾经是一个单独的目录，直到 Xcode 4，所以它看起来并不那么愚蠢。现在，如果你决定去使用测试版，你会被搞砸的。我很确定当 Xcode 4.5 自我更新时，在应用程序中，它会复制框架。

我希望有人有更好的想法！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:44:08.097

当我在 Xcode 项目中使用第三方框架时，对我有用的是在我的 Mac 上的 /Library/Frameworks 中安装框架，并按照您在脚注中描述的方式添加它们。如果项目构建失败，将 /Library/Frameworks 的搜索路径添加到框架搜索路径构建设置通常足以让项目构建。

如果您将框架复制到应用程序包并且复制不起作用，请将以下设置添加到运行时搜索路径构建设置：

```
`@loader_path/../Frameworks` 
```

我不确定您是否需要开头和结尾的引号。我只是引用了[我在 SDL 上写的一篇博客文章](http://meandmark.com/blog/2012/01/using-sdl-with-xcode-4/)的评论，该文章来自发现 SDL 框架没有被复制到应用程序包的人。

关于在最终用户的机器上安装第三方框架的位置的问题，如果您的应用程序使用框架并且您希望用户能够运行您的应用程序而无需安装框架，请将框架复制到您的应用程序包。如果您需要在用户的 Mac 上安装框架，/Library/Frameworks 是第三方框架的常用位置。

# css - CSS Typography - 为什么基线网格完全关闭？

> ID：14463106
> 
> 赞同：1
> 
> 时间：2013-01-22T16:18:19.257
> 
> 标签：css, sass, typography, typesetting, baseline

今天我读了一篇关于 CSS Typography 以及如何设置简单基线网格的文章。我认为尝试会很有趣，所以我设置了所有内容，但显然它看起来不像预期的那样。

这是全屏小提琴： http: [//jsfiddle.net/j5Tav/embedded/result/](http://jsfiddle.net/j5Tav/embedded/result/)
并带有代码：http: [//jsfiddle.net/j5Tav/](http://jsfiddle.net/j5Tav/)

为了可视化基线，我使用[Baseliner](http://keyes.ie/things/baseliner/)作为书签。它使用 JavaScript 显示基线。

从我的 SCSS 代码中可以看出，我将基线设置为 21px，字体大小为 14px：

```
/* Reset */
* { margin: 0; padding: 0; }

/* Variables */
$bodyFontSize: 14px;
$baseline: 21px; /* 1.5 for 14px */

body {
    font-size: $bodyFontSize;
    line-height: $baseline;
}

article {
    margin: 0 auto;
    width: 65%;
}

h1,
h2,
p {
     margin-bottom: $baseline;
}

h1 {
    font-size: $bodyFontSize * 2;
    line-height: $baseline * 2;
}

h2 {
    font-size: $bodyFontSize * 1.8;
     line-height: $baseline * 1.8;
} 
```

尽管如此，当您在全屏小提琴上使用 Baseliner 并在书签中输入 21 时，基线完全关闭。为什么？我计算错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-15T22:22:49.230

看看这篇文章的“丑陋”部分：

[http://coding.smashingmagazine.com/2012/12/17/css-baseline-the-good-the-bad-and-the-ugly/](http://coding.smashingmagazine.com/2012/12/17/css-baseline-the-good-the-bad-and-the-ugly/)

简而言之，对所有元素应用相同的 line-height 并不能确保这些元素中的文本将与您想到的基线网格对齐。这是因为，在 CSS 中，文本被设置为 line-height 值的垂直中心。

例如，如果您有一个包含 6 像素文本的段落和另一个包含 24 像素文本的段落，并且它们都具有相同的行高值（例如，30 像素），则这些段落的文本将不会与相同的基线。

为了在 CSS 中实现统一的基线网格，您必须垂直偏移具有不同字体大小的每个文本元素。您可以通过在每个元素的底部和顶部添加填充来做到这一点，其中文本恰好与您选择的行高对齐。像 John Keyes 的 Baseliner 这样的工具有助于了解“真正的”基线在哪里：

[http://keyes.ie/things/baseliner/](http://keyes.ie/things/baseliner/)

您要确保顶部和底部填充加起来等于您的行高值；例如，如果您必须在 h1 元素的顶部填充中添加 5 个像素，使其与所需的 10 像素基线网格对齐，那么您必须在底部填充中添加 5 个像素才能获得 h1 的总高度元素（包括填充）等于 10 像素的倍数（假设它的行高已设置为 10 像素的倍数，例如 10 像素、20 像素等）。您也可以为此目的使用边距，但这可能会由于边距折叠而变得混乱。此外，您希望避免 line-height 小于 font-size，并且您希望避免在一个元素中组合两种不同的字体大小，因为这也可能会偏离基线网格。正如引用的文章指出的那样，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T10:41:02.910

手动设置垂直节奏很痛苦。

你已经用 标记了你的问题`scss`，那么为什么不使用它的真棒呢？看看指南针的垂直节奏！

*   Compass 是什么：[Snugug 的培训词汇表](https://github.com/Snugug/training-glossary/wiki/Compass)
*   [官方垂直节奏文档](http://compass-style.org/reference/compass/typography/vertical_rhythm/)
*   一些关于 Compass Vertical Rhythm 的有用指南、视频和文章：
    *   [带指南针的垂直节奏](http://atendesigngroup.com/blog/vertical-rhythm-compass)
    *   [指南针教程 #10 - 垂直节奏 - YouTube](http://www.youtube.com/watch?v=ls3Clk-kz3s)
    *   [保持节奏：具有动态高度的物体的垂直节奏](http://www.gayadesign.com/diy/keep-the-rhythm-vertical-rhythm-on-objects-having-dynamic-heights/)
    *   [使用 Susy 和 Compass 的垂直节奏构建网站的介绍](http://scottdavis.github.io/blog/2011/12/30/introduction-to-building-websites-using-susy-and-compass-vertical-rhythm/)
    *   [谷歌](https://www.google.ru/search?q=compass%20vertical%20rhythm)了解更多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-23T00:49:31.010

我认为大多数基线/垂直节奏方法很难使用，因为您需要了解字体的指标。我想出了一个更容易使用的方法。它使用 HTML + CSS + Utility 字体。您不需要知道您的字体指标，甚至可以混合 + 匹配字体。

这是您的初始化设置的示例

```
/* Reset */

* {
  margin: 0;
  padding: 0;
}

:root {
  --baseline: 21px;
}

/* 1\. Include a baselined font */

@font-face {
  font-family: "Baseline Em";
  src: url("https://rawgit.com/shalanah/baseline/98e925b/BaselineEm/baselineem-webfont.woff2") format("woff2"), url("https://rawgit.com/shalanah/baseline/98e925b/BaselineEm/baselineem-webfont.woff") format("woff"), url("https://rawgit.com/shalanah/baseline/98e925b/BaselineEm/baselineem-webfont.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

/* Show grid lines */

body {
  padding: calc(var(--baseline) * 2px) 100px 100px;
  /* mult of grid */
  background-repeat: repeat-y;
  background-size: 100% var(--baseline);
  background-image: linear-gradient( to bottom, #0ff 0, rgba(255, 255, 255, 0)1px);
}

article {
  margin: 0 auto;
  width: 65%;
  margin-bottom: var(--baseline);
}

/* 2\. Setting block elements up */
h1,
h2,
p {
  font-family: "Baseline Em"; /* Baselined font only needed at block level */
  line-height: 1em;
}

/* 3\. Making sure only block leading is considered */
span {
  line-height: 0;
}

/* 4\. Set leadings + margins */
h1 {
  font-size: calc(var(--baseline) * 2); /* Your leading: Mult of baseline */
  margin-bottom: var(--baseline); /* Mult of baseline */
}
h2 {
  font-size: calc(var(--baseline) * 2);
  margin-bottom: var(--baseline);
}
p {
  font-size: calc(var(--baseline) * 1);
  margin-bottom: var(--baseline);
}

/* 5\. Set fonts + font-size */
h1 span {
  font-family: Arial; /* Whatever you want */
  font-size: calc(var(--baseline) * 2); /* Your font-size: Whatever you want */
}
h2 span {
  font-family: "Comic Sans MS", cursive, sans-serif;
  font-size: calc(var(--baseline) * 1.8);
}
p span {
  font-family: Verdana;
  font-size: 14px;
}
```

```
<article>
  <h1><span>Heading 1</span></h1>
  <h2><span>Heading 2</span></h2>
  <p><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pulvinar eleifend nisi. Aliquam ultrices laoreet ligula vel elementum. Etiam eu faucibus nisi, vel suscipit nisl.</span></p>
</article>
<article>
  <h1><span>Heading 1</span></h1>
  <h2><span>Heading 2</span></h2>
  <p><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pulvinar eleifend nisi. Aliquam ultrices laoreet ligula vel elementum. Etiam eu faucibus nisi, vel suscipit nisl.</span></p>
</article>
```

# c# - 如何使用 C# 代码启动 WinForms 应用程序并检查其中是否存在按钮？

> ID：14463107
> 
> 赞同：1
> 
> 时间：2013-01-22T16:18:23.570
> 
> 标签：c#, winforms, process.start

我必须制作一个简单的工具来执行以下操作：

*   从本地磁盘上的文件启动 WinForms 应用程序
*   检查窗口标题是否与预定义的字符串匹配
*   检查应用程序窗口中是否存在按钮

我使用此代码启动应用程序：

```
Process myApp = new Process();
myApp.StartInfo.FileName = "somePath";
app.Start(somePath); 
```

我使用该`myApp.MainWindowTitle`属性来检查窗口名称。

我想知道如何检查应用程序窗口中是否存在某些东西，例如确保存在按钮。

此工具的目的是仅检查应用程序是否正确启动。我现在正试图找出 Visual Studio CodedUI 功能到底是什么以及它如何提供帮助，但到目前为止还没有任何结果。

如果有人能给我一些信息和/或想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:06:14.063

尽管这是对另一个问题的回答，但您可能会发现[John Bartel 的帖子在这里](https://stackoverflow.com/a/14350968/239791)很有帮助。看看他的解决方案的第二部分，他标记为“更困难的解决方案”。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T22:29:40.953

我从很久以前挖掘了旧的尘土飞扬的 Delphi 代码，并翻译成 c# ：

将枚举所有子窗口的类：

```
 public static class WindowsEnumerator
  {
    private static List<IntPtr> childs = new List<IntPtr>();

    public static List<WindowInfo> EnumerateChildWindows(IntPtr parentHandle)
    {
      var result = new List<WindowInfo>();
      childs.Clear();
      EnumChildWindows(parentHandle, Enumerator, IntPtr.Zero);

      foreach (IntPtr handle in childs)
      {
        result.Add(new WindowInfo(handle));  
      }

      return result;
    }

    private static bool Enumerator(IntPtr hwnd, IntPtr lparam)
    {
      childs.Add(hwnd);
      return true;
    }

    internal delegate bool WindowEnumProc(IntPtr hwnd, IntPtr lparam);

    [DllImport("user32.dll")]
    internal static extern bool EnumChildWindows(IntPtr hwnd, WindowEnumProc func, IntPtr lParam);
  }

  public class WindowInfo
  {
    public IntPtr Handle { get; private set; }
    public string Text { get; private set; }
    public string ClassName { get; private set; }

    public WindowInfo(IntPtr hwnd)
    {
      this.Handle = hwnd;

      var sb = new StringBuilder(1024);
      var txtLen = GetWindowText(this.Handle, sb, sb.Capacity);
      if (txtLen > 0)
        this.Text = sb.ToString();
      else
        this.Text = "";

      var sbc = new StringBuilder(256);
      var clsLen = GetClassName(this.Handle, sbc, sbc.Capacity);
      if (clsLen > 0)
        this.ClassName = sbc.ToString();
      else
        this.ClassName = "";
    }

    [DllImport("user32.dll", CharSet = CharSet.Unicode, SetLastError = true)]
    private static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

    [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    static extern int GetClassName(IntPtr hWnd, StringBuilder lpClassName, int nMaxCount);
  } 
```

然后你只需要找到一个带有静态方法 WindowsEnumerator.EnumerateChildWindows 的按钮，WinForms 按钮在 ClassName 中有一个“BUTTON”字符串，让我们假设你的按钮被命名为 button1（并希望你没有使用这样的名称）：

```
private void button1_Click(object sender, EventArgs e)
{
  var exeProcess = Process.Start(@"w:\kanta\temp\ExeWithButtonInsideGroupBox.exe");
  while (exeProcess.MainWindowHandle.ToInt32() == 0)
  {
    Thread.Sleep(10);
  };     

  var windows = WindowsEnumerator.EnumerateChildWindows(exeProcess.MainWindowHandle);
  exeProcess.Kill();

  bool myButtonExists = windows.FirstOrDefault(wnd => wnd.ClassName.Contains("BUTTON") && wnd.Text == "button1") != null;

  MessageBox.Show(myButtonExists.ToString());
} 
```

# php - PHP在最后一个数字处拆分字符串，插入一个额外的字符串并合并新字符串

> ID：14463110
> 
> 赞同：1
> 
> 时间：2013-01-22T16:18:44.450
> 
> 标签：php, string, math, time, split

我已经构建了一个需要几秒钟的计算脚本，并在包含标签等的 y:d:h:m:s 中显示它们。

例如。`15768012`=`1 year 12 seconds`和`27362`= `15 hours 6 minutes 2 seconds`。

该脚本运行良好，但我想查看字符串并将其除以最后一个数字（不是第一个数字），然后插入单词`and`，以便：

`15768012`=`1 year AND 12 seconds`和`27362`= `15 hours 6 minutes AND 2 seconds`。

如果您需要，我可以编写我的脚本，但我认为它不会帮助您解决这个问题..

假设`$string = '15 hours 6 minutes 2 seconds'`您将如何拆分它并导入文本`and`？

```
<?
if (isset($_POST['number'])) {
    $x = $_POST['number'];
} else {
    $x = 54098;
}

// Labels
$lb_y = 'year';
$lb_ys = 'years';
$lb_d = 'day';
$lb_ds = 'days';
$lb_h = 'hour';
$lb_hs = 'hours';
$lb_m = 'minute';
$lb_ms = 'minutes';
$lb_s = 'second';
$lb_ss = 'seconds';
$lb_and = 'and';

//$x = 54098; // Time in seconds - change to $row['time'];

$f = 15768000; // seconds in a year
$d = 43200; // seconds in a day
$t = 3600; // seconds in an hour
$m = 60; // senconds in a minute

// Let's check if it is more than a minute
if ($x >= $m) {

    // More than a minute
    // Let's check if it is more than an hour
    if ($x >= $t) {

        // More than an hour
        // Let's check if it is more than a day
        if($x >= $d) {

            // More than a day
            // Let's check if it is more than a year
            if ($x >= $f) {

                // More than a year
                // Calculate years
                $a = $x / $f;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($a, '.'))) {
                    $a = substr($a, 0, $cal);
                }

                // $k = what's left
                $k = $x - ($f * $a);

                // Calculate days
                $b = $k / $d;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($b, '.'))) {
                    $b = substr($b, 0, $cal);
                }

                // $y = what's left
                $y = $k - ($d * $b);

                // Calculate hours
                $c = $y / $t;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($c, '.'))) {
                    $c = substr($c, 0, $cal);
                }

                // $z = what's left
                $z = $y - ($t * $c);

                // Calculate minutes
                $e = $z / $m;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($e, '.'))) {
                    $e = substr($e, 0, $cal);
                }

                // $q = what's left
                $q = $z - ($m * $e);

                // Rewrite numbers if below 9
                if ($a <= 9) { $xa = '0'.$a; } else { $xa = $a; }
                if ($b <= 9) { $xb = '0'.$b; } else { $xb = $b; }
                if ($c <= 9) { $xc = '0'.$c; } else { $xc = $c; }
                if ($e <= 9) { $xe = '0'.$e; } else { $xe = $e; }
                if ($q <= 9) { $xq = '0'.$q; } else { $xq = $q; }

                // Rewrite labels
                if ($a <= 1) { $lb_ys = $lb_y; }
                if ($b <= 1) { $lb_ds = $lb_d; }
                if ($c <= 1) { $lb_hs = $lb_h; }
                if ($e <= 1) { $lb_ms = $lb_m; }
                if ($q <= 1) { $lb_ss = $lb_s; }

                // if == 0 - do not show
                $a = $a.' '.$lb_ys.' ';
                if ($b == 0) {$b = '';} else {$b = $b.' '.$lb_ds.' ';}
                if ($c == 0) {$c = '';} else {$c = $c.' '.$lb_hs.' ';}
                if ($e == 0) {$e = '';} else {$e = $e.' '.$lb_ms.' ';}
                if ($q == 0) {$q = '';} else {$q = $q.' '.$lb_ss;}

                echo $xa.':'.$xb.':'.$xc.':'.$xe.':'.$xq;
                echo '<br>'.$a.$b.$c.$e.$q;

            } else {

                // Less than a year - but more than one day
                // Calculate days
                $b = $x / $d;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($b, '.'))) {
                    $b = substr($b, 0, $cal);
                }

                // $y = what's left
                $y = $x - ($d * $b);

                // Calculate hours
                $c = $y / $t;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($c, '.'))) {
                    $c = substr($c, 0, $cal);
                }

                // $z = what's left
                $z = $y - ($t * $c);

                // Calculate minutes
                $e = $z / $m;

                // Get everything before the separator '.'
                if (false !== ($cal = strpos($e, '.'))) {
                    $e = substr($e, 0, $cal);
                }

                // $q = what's left
                $q = $z - ($m * $e);

                // Rewrite numbers if below 9
                if ($b <= 9) { $xb = '0'.$b; } else { $xb = $b; }
                if ($c <= 9) { $xc = '0'.$c; } else { $xc = $c; }
                if ($e <= 9) { $xe = '0'.$e; } else { $xe = $e; }
                if ($q <= 9) { $xq = '0'.$q; } else { $xq = $q; }

                // Rewrite labels
                if ($b <= 1) { $lb_ds = $lb_d; }
                if ($c <= 1) { $lb_hs = $lb_h; }
                if ($e <= 1) { $lb_ms = $lb_m; }
                if ($q <= 1) { $lb_ss = $lb_s; }

                // if == 0 - do not show
                $b = $b.' '.$lb_ds.' ';
                if ($c == 0) {$c = '';} else {$c = $c.' '.$lb_hs.' ';}
                if ($e == 0) {$e = '';} else {$e = $e.' '.$lb_ms.' ';}
                if ($q == 0) {$q = '';} else {$q = $q.' '.$lb_ss;}

                echo $xb.':'.$xc.':'.$xe.':'.$xq;
                echo '<br>'.$b.$c.$e.$q;
            }

        } else {

            // Less than a day
            // Calculate hours
            $c = $x / $t;

            // Get everything before the separator '.'
            if (false !== ($cal = strpos($c, '.'))) {
                $c = substr($c, 0, $cal);
            }

            // $z = what's left
            $z = $x - ($t * $c);

            // Calculate minutes
            $e = $z / $m;

            // Get everything before the separator '.'
            if (false !== ($cal = strpos($e, '.'))) {
                $e = substr($e, 0, $cal);
            }

            // $q = what's left
            $q = $z - ($m * $e);

            // Rewrite numbers if below 9
            if ($c <= 9) { $xc = '0'.$c; } else { $xc = $c; }
            if ($e <= 9) { $xe = '0'.$e; } else { $xe = $e; }
            if ($q <= 9) { $xq = '0'.$q; } else { $xq = $q; }

            // Rewrite labels
            if ($c <= 1) { $lb_hs = $lb_h; }
            if ($e <= 1) { $lb_ms = $lb_m; }
            if ($q <= 1) { $lb_ss = $lb_s; }

            // if == 0 - do not show
            $c = $c.' '.$lb_hs.' ';
            if ($e == 0) {$e = '';} else {$e = $e.' '.$lb_ms.' ';}
            if ($q == 0) {$q = '';} else {$q = $q.' '.$lb_ss;}

            echo $xc.':'.$xe.':'.$xq;
            echo '<br>'.$c.$e.$q;

        }

    } else {

        // Less than an hour
        // Calculate minutes
        $e = $x / $m;

        // Get everything before the separator '.'
        if (false !== ($cal = strpos($e, '.'))) {
            $e = substr($e, 0, $cal);
        }

        // $q = what's left
        $q = $x - ($m * $e);

        // Rewrite numbers if below 9
        if ($e <= 9) { $xe = '0'.$e; } else { $xe = $e; }
        if ($q <= 9) { $xq = '0'.$q; } else { $xq = $q; }

        // Rewrite labels
        if ($e <= 1) { $lb_ms = $lb_m; }
        if ($q <= 1) { $lb_ss = $lb_s; }

        // if == 0 - do not show
        $e = $e.' '.$lb_ms.' ';
        if ($q == 0) {$q = '';} else {$q = $q.' '.$lb_ss;}

        echo $xe.':'.$xq;
        echo '<br>'.$e.$q;

    }

} else {

    // Less than a minute
    // Only secounds

    // Rewrite numbers if below 9
    if ($x <= 9) { $xx = '0'.$x; } else { $xx = $x; }

    // Rewrite labels
    if ($x <= 1) { $lb_ss = $lb_s; }

    // if == 0 - do not show
    $x = $x.' '.$lb_ss;

    echo '00:'.$xx;
    echo '<br>'.$x;

}
?>

<form action="" method="post"><input name="number" type="text"><input name="" type="submit" value="Submit"></form> 
```

谢谢大家的帮助..这是简化和完成的脚本..不过我有一个新问题..当您在该字段中输入少于时`1576`，它会写一些与我想要的不同的数字...

编辑：问题现已解决。欢迎使用脚本：D

```
<?
if (isset($_POST['number'])) {
    $x = $_POST['number'];
} else {
    $x = 54098;
}

// Labels
$lb_y = 'year';
$lb_ys = 'years';
$lb_d = 'day';
$lb_ds = 'days';
$lb_h = 'hour';
$lb_hs = 'hours';
$lb_m = 'minute';
$lb_ms = 'minutes';
$lb_s = 'second';
$lb_ss = 'seconds';
$lb_and = 'and';

//$x = 54098; // Time in seconds - change to $row['time'];

$f = 15768000; // seconds in a year
$d = 43200; // seconds in a day
$h = 3600; // seconds in an hour
$m = 60; // seconds in a minute

$a = $x / $f;
if (false !== ($cal = strpos($a, 'E-'))) { $a = 0; }
if (false !== ($cal = strpos($a, '.'))) { $a = substr($a, 0, $cal); }
if ($a <= 0) { $a = 0; }
$b = ($x - ($f * $a)) / $d;
if (false !== ($cal = strpos($b, 'E-'))) { $b = 0; }
if (false !== ($cal = strpos($b, '.'))) { $b = substr($b, 0, $cal); }
if ($b <= 0) { $b = 0; }
$c = ($x - ($f * $a) - ($d * $b)) / $h;
if (false !== ($cal = strpos($c, 'E-'))) { $c = 0; }
if (false !== ($cal = strpos($c, '.'))) { $c = substr($c, 0, $cal); }
if ($c <= 0) { $c = 0; }
$e = ($x - ($f * $a) - ($d * $b) - ($h * $c)) / $m;
if (false !== ($cal = strpos($e, '.'))) { $e = substr($e, 0, $cal); }
if ($e <= 0) { $e = 0; }
$q = ($x - ($f * $a) - ($d * $b) - ($h * $c) - ($m * $e));

// Rewrite numbers if below 9
if ($a <= 9) { $xa = '0'.$a; } else { $xa = $a; }
if ($b <= 9) { $xb = '0'.$b; } else { $xb = $b; }
if ($c <= 9) { $xc = '0'.$c; } else { $xc = $c; }
if ($e <= 9) { $xe = '0'.$e; } else { $xe = $e; }
if ($q <= 9) { $xq = '0'.$q; } else { $xq = $q; }

// Rewrite labels
if ($a <= 1) { $lb_ys = $lb_y; }
if ($b <= 1) { $lb_ds = $lb_d; }
if ($c <= 1) { $lb_hs = $lb_h; }
if ($e <= 1) { $lb_ms = $lb_m; }
if ($q <= 1) { $lb_ss = $lb_s; }

// if == 0 - do not show
if ($a == 0) {$a = '';} else {$a = $a.' '.$lb_ys;}
if ($b == 0) {$b = '';} else {$b = $b.' '.$lb_ds;}
if ($c == 0) {$c = '';} else {$c = $c.' '.$lb_hs;}
if ($e == 0) {$e = '';} else {$e = $e.' '.$lb_ms;}
if ($q == 0) {$q = '';} else {$q = $q.' '.$lb_ss;}

echo $xa.':'.$xb.':'.$xc.':'.$xe.':'.$xq.'<br>';

$time = array($a, $b, $c, $e, $q);

$time = array_filter($time);
$count = count($time);
$last = array_pop($time);
if ($count == 1) {
    $string = $last;
} elseif ($count == 0) {
    $string = '<i>No Time described</i>';
} else {
    $string = implode(', ', $time) . ' '.$lb_and.' ' . $last;
}

echo '<br>'.$string;

?>
<br><br>
<form action="" method="post"><input name="number" type="text"><input name="" type="submit" value="Submit"></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:32:42.127

快速修复可能是：

```
$string = '15 hours 6 minutes 2 seconds';
$pattern ='/ \d+ \w+$/';
$string = preg_replace($pattern, ' and$0', $string); 
```

但是，您可能想要研究一个更好的解决方案，从而构建以下数组：

```
$time = array($a, $b, $c, $e, $q); 
```

然后你可以这样做：

```
$time = array_filter($time);
$last = array_pop($time);
$string = implode(', ', $time) . ' and ' . $last; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:36:46.933

当您可以使用除法来帮助计算出值时，这看起来相当冗长乏味。这样，您就可以一次对它们进行逻辑处理（以确定它们最后是否需要（s）。

```
$x / $f = $years
($x - ($f * $years)) / $d = $days
($x - ($f * $years) - ($d * $days)) / $h = $hours
($x - ($f * $years) - ($d * $days) - ($h * $hours)) / $m = $minutes
($x - ($f * $years) - ($d * $days) - ($h * $hours) - ($m * $minutes)) = $seconds 
```

基本上，它会计算出之前每个计算的剩余部分还剩下多少。简单的例子是如果你的数字比 2 年大 1 秒。

年将给出 2，余数为 1。你减去你已经考虑的部分，然后继续分成更小的部分。这样，您可以更轻松地处理每个单独的数字以进行格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:27:18.797

由于您已经取得的成就相对复杂，我假设您只需要一些提示；所以：

*   `explode`功能： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)
*   如您所知，您的字符串以数字及其单位结尾，请忽略由生成的数组的最后 2 个元素`explode`
*   循环（以您认为合适的任何方式，不一定是传统`for`循环）通过数组并添加“和”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:27:45.647

如果你直接在你的函数中构建它会更有效，但同时你可以使用 preg_replace。

[http://nl3.php.net/manual/en/function.preg-replace.php](http://nl3.php.net/manual/en/function.preg-replace.php)

```
$string = '15 hours 6 minutes 2 seconds'

$pattern ='/(\d+)\sseconds/';

$string =preg_replace($pattern,' And $1 seconds',$string); 
```

# prism - WPF PRISM 模块和 AutoMapper

> ID：14463121
> 
> 赞同：2
> 
> 时间：2013-01-22T16:19:07.810
> 
> 标签：prism, automapper

我可以在棱镜模块的每个 Initialize 方法中调用 Mapper.CreateMap 来为不同模块中的对象配置映射吗？我更喜欢这种方法，因此可以单独开发模块和映射

或者我应该在一个可能位于引导程序中的中心位置调用 Mapper.CreateMap？它在引导程序中，MEFbootstrapper 的哪个覆盖方法最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T20:48:58.503

我知道这个问题很老了，但我想知道同样的事情，我遇到了你的问题。在当前状态下（Prism 5 和 AutoMapper 3.2.1），您可以在模块定义中为每个 prism 模块创建映射。

```
 public void Initialize()
    {
        this.RegisterViewsAndServices();
        this.ResolveAutomapping();
    }

 private void ResolveAutomapping()
    {
        AutoMapper.Mapper.CreateMap<Entities.Channel, Modules.EntityWrappers.ChannelWrapper>().ForMember("Selected", o => o.UseValue(false));
    } 
```

然后在我的视图模型中，我毫无问题地调用它

```
Channels = new ObservableCollection<ChannelWrapper>(data.Select(r => AutoMapper.Mapper.Map<ChannelWrapper>(r))); 
```

# kineticjs - Kineticjs 在新版本 (4.3.0+) 中调整大小问题

> ID：14463123
> 
> 赞同：1
> 
> 时间：2013-01-22T16:19:15.797
> 
> 标签：kineticjs

到目前为止，我已经使用[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)上的示例作为调整大小功能的基础。然而，在新版本的 kineticjs (4.3.0+) 中引入了一个用于拖动的特殊层。这也需要更新上面的脚本。我已经更新了上面的脚本，这导致了下面的脚本。主要区别是我直接调用拖动的锚点而不是通过组访问它（它曾经在同一层上）。该脚本运行良好，但现在有延迟。锚点移动得更慢，然后图像调整大小。任何人都知道如何解决这个问题？提前致谢。

```
function update(group, activeAnchor) {
    var topLeft = group.get(".topLeft")[0];
    var topRight = group.get(".topRight")[0];
    var bottomRight = group.get(".bottomRight")[0];
    var bottomLeft = group.get(".bottomLeft")[0];
    var image = group.get(".image")[0];

    switch (activeAnchor.getName()) {
      case "topLeft":
        var topLeft = activeAnchor;
        topRight.attrs.y = activeAnchor.attrs.y;
        bottomLeft.attrs.x = activeAnchor.attrs.x;
        break;
      case "topRight":
        var topRight = activeAnchor;
        topLeft.attrs.y = activeAnchor.attrs.y;
        bottomRight.attrs.x = activeAnchor.attrs.x;
        break;
      case "bottomRight":
        var bottomRight = activeAnchor;
        bottomLeft.attrs.y = activeAnchor.attrs.y;
        topRight.attrs.x = activeAnchor.attrs.x;
        break;
      case "bottomLeft":
        var bottomLeft = activeAnchor;
        bottomRight.attrs.y = activeAnchor.attrs.y;
        topLeft.attrs.x = activeAnchor.attrs.x;
        break;
    } 

    image.setPosition(topLeft.attrs.x, topLeft.attrs.y);

    var height = bottomLeft.attrs.y - topLeft.attrs.y;
    var width = image.getWidth()*height/image.getHeight();

    topRight.attrs.x = topLeft.attrs.x + width;
    topRight.attrs.y = topLeft.attrs.y;
    bottomRight.attrs.x = topLeft.attrs.x + width;
    bottomRight.attrs.y = topLeft.attrs.y + height;

    if(width && height) {
      image.setSize(width, height);
    }
  }
  function addAnchor(group, x, y, name) {
    var stage = group.getStage();
    var layer = group.getLayer();

    var anchor = new Kinetic.Circle({
      x: x,
      y: y,
      stroke: "#666",
      fill: "#ddd",
      strokeWidth: 2,
      radius: 8,
      name: name,
      draggable: true
    });

    anchor.on("dragmove", function() {
      update(group, this);
      layer.draw();
    });
    anchor.on("mousedown touchstart", function() {
      group.setDraggable(false);
      this.moveToTop();
    });
    anchor.on("dragend", function() {
      group.setDraggable(true);
      layer.draw();
    });
    // add hover styling
    anchor.on("mouseover", function() {
      var layer = this.getLayer();
      document.body.style.cursor = "pointer";
      this.setStrokeWidth(4);
      layer.draw();
    });
    anchor.on("mouseout", function() {
      var layer = this.getLayer();
      document.body.style.cursor = "default";
      this.setStrokeWidth(2);
      layer.draw();
    });

    group.add(anchor);
  }
  function loadImages(sources, callback) {
    var images = {};
    var loadedImages = 0;
    var numImages = 0;
    for(var src in sources) {
      numImages++;
    }
    for(var src in sources) {
      images[src] = new Image();
      images[src].onload = function() {
        if(++loadedImages >= numImages) {
          callback(images);
        }
      };
      images[src].src = sources[src];
    }
  }
  function initStage(images) {
    var stage = new Kinetic.Stage({
      container: "container",
      width: 578,
      height: 400
    });

    var yodaGroup = new Kinetic.Group({
      x: 100,
      y: 110,
      draggable: true
    });
    var layer = new Kinetic.Layer();

    /*
     * go ahead and add the groups
     * to the layer and the layer to the
     * stage so that the groups have knowledge
     * of its layer and stage
     */

    layer.add(yodaGroup);
    stage.add(layer);

    // darth vader

    // yoda
    var yodaImg = new Kinetic.Rect({
      x: 0,
      y: 0,
      fill: 'blue',
      width: 93,
      height: 104,
      name: "image"
    });

    yodaGroup.add(yodaImg);
    addAnchor(yodaGroup, 0, 0, "topLeft");
    addAnchor(yodaGroup, 93, 0, "topRight");
    addAnchor(yodaGroup, 93, 104, "bottomRight");
    addAnchor(yodaGroup, 0, 104, "bottomLeft");

    yodaGroup.on("dragstart", function() {
      this.moveToTop();
    });

    stage.draw();

  }

$(document).ready(function(){

var sources = {
      darthVader: "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg",
      yoda: "http://www.html5canvastutorials.com/demos/assets/yoda.jpg"
    };
    loadImages(sources, initStage); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:35:20.787

[http://jsfiddle.net/fQepn/](http://jsfiddle.net/fQepn/)

我查看了您提供的教程并进行了一些小改动。您的问题似乎与新的拖动层有关。您必须升级到 4.3.1，[http](http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js) ://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.3.1.js ，您可以在其中关闭新拖动层的功能。

只需添加：

```
 dragOnTop: false 
```

在锚配置内部

```
 var anchor = new Kinetic.Cir......({x: , y: , ... , dragOnTop: false}); 
```

这将防止项目被放置在拖动层中。

# sql - 复杂事务后获取数据库的“DIFF”

> ID：14463130
> 
> 赞同：0
> 
> 时间：2013-01-22T16:19:39.593
> 
> 标签：sql, database, diff

我有一个复杂的数据库，我需要执行以下操作：

在复杂的事务之后，我需要在当前数据库和表示第一个数据库早期状态的第二个数据库之间进行某种差异报告，以确定添加了什么。

无需确定已删除的数据。我有例如 5-10 个表要比较。所以我可以一件一件或一起做。

达到目标的最佳 SQL 表达式是什么？

最好的，阿斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:27:42.487

对于表 X，

```
select current_db.tableX.id
from current_db.tableX
  left outer join earlier_db.tableX
    on current_db.tableX.id = earlier_db.tableX.id
where earlier_db.tableX.id is null 
```

# synchronization - 从封装访问它的类内部还是从外部同步对象更好？

> ID：14463134
> 
> 赞同：1
> 
> 时间：2013-01-22T16:19:54.173
> 
> 标签：synchronization

想象一个基于单个私有对象变量（比如说 a `Map<Something>`）的状态构建的类，该类中的所有方法都在获取、设置或以其他方式修改该对象。

您认为这两种同步方法中哪一种更好？也许存在第三个更好的选择。

1.  使封装对象的类中的所有方法同步，或者在被修改的对象上同步
2.  使所有访问封装对象的类的实例的方法同步。

换句话说，从内部同步还是从外部同步更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:27:47.033

那些有权访问的方法`Map variable`应该包含一个`synchronized(variable) { }`块，并且对该变量的所有访问都必须在该块中。当然，`variable`不能为空。

这样，您可以**更好地处理**代码在受保护块中花费的时间（例如对 . 的读或写访问`variable`）。

其他方面：如果你的班级有多个资源需要保护，你不能这样做，因为它们会相互干扰。

# java - 如何使用 Axis 1.0 运行 WSDL2Java？

> ID：14463135
> 
> 赞同：4
> 
> 时间：2013-01-22T16:19:54.460
> 
> 标签：java, axis

我们的客户正在使用 Axis 1.0 为我们基于 WCF 的 SOAP 服务构建客户端。

这对他们不起作用，我想在我的机器上本地运行 WSDL2Java 客户端，以便进行实验。

我已经在我的机器上安装了 JDK，`java`可以从命令行运行。

阅读 Axis 1.0 的安装指南，并使用 -cp 开关，我得到以下信息：

```
java -cp E:\Temp\Axis\xml-axis-10\lib org.apache.axis.wsdl.WSDL2Java 
```

（该路径包含所有 jar 文件）

并获得以下信息：

```
Error: Could not find or load main class org.apache.axis.wsdl.WSDL2Java 
```

有人知道我在做什么错吗？

**更新1：**

我尝试将用户 CLASSPATH 设置为：

```
C:\Program Files\Java\jdk1.7.0_09\lib;E:\Temp\Axis\xml-axis-10\lib 
```

没有骰子，同样的错误。

**更新2：**

如果我尝试这个命令行，我会得到一些不同的东西，它现在似乎正在加载类：

```
E:\Temp>java -cp E:\Temp\Axis\xml-axis-10\lib\axis.jar org.apache.axis.wsdl.WSDL2Java
Exception in thread "main" java.lang.NoClassDefFoundError: org.apache.commons.logging.LogFactory
        at org.apache.axis.components.logger.LogFactory$1.class$(LogFactory.java:68)
        at org.apache.axis.components.logger.LogFactory$1.run(LogFactory.java:84)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.axis.components.logger.LogFactory.getLogFactory(LogFactory.java:80)
        at org.apache.axis.components.logger.LogFactory.<clinit>(LogFactory.java:72)
        at org.apache.axis.i18n.ProjectResourceBundle.<clinit>(ProjectResourceBundle.java:92)
        at org.apache.axis.i18n.MessagesConstants.<clinit>(MessagesConstants.java:71)
        at org.apache.axis.utils.Messages.<clinit>(Messages.java:81)
        at org.apache.axis.wsdl.WSDL2Java.<clinit>(WSDL2Java.java:106)

E:\Temp> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:36:23.740

如果您只在类路径中提供文件夹，则不会加载 jar 文件。您应该使用 jar 名称（如在您的 UPDATE2 中）或通配符（看看[这里](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)和[这里](https://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath)）。

至于您缺少 LogFactory 的问题-您应该在类路径中添加一个适当的 jar（例如 commons-logging.jar，尝试[http://www.findjar.com](http://www.findjar.com)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T16:56:29.750

试试这个： java -cp %CD%\* org.apache.axis.wsdl.WSDL2Java

用于记录的 jar 已经在 lib 目录中。如果您在 lib 目录中，上述命令应该可以工作。

# jquery-mobile - jquerymobile 字段包含调整宽度

> ID：14463140
> 
> 赞同：0
> 
> 时间：2013-01-22T16:20:07.143
> 
> 标签：jquery-mobile

我在我的 jquery 移动应用程序中使用 fieldcontain 和表单元素。这很好用，但我有一些标签相当长的字段，通常结合可能很短的输入。标签换行为 3 或 4 行文本，而输入占用了其余的宽度。问题是其中一些输入可能很短，因此将标签打碎以给输入框提供一堆它甚至不需要的空间似乎是一种浪费。

我想知道我是否可以每行更改分配给输入框的 78% 宽度，也许将其设置为 40% 并允许标签进一步扩展？有这方面的最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:56:11.963

考虑使用布局网格，它可以毫不费力地获得 50% / 50%。

[http://jquerymobile.com/demos/1.2.0/docs/content/content-grids.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-grids.html)

看起来 1.3 响应式网格将允许对列宽进行一些操作

[http://jquerymobile.com/demos/1.3.0-beta.1/docs/content/content-grids-responsive.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/content/content-grids-responsive.html)

# 3d - (X,Y,Z) 坐标移动

> ID：14463141
> 
> 赞同：0
> 
> 时间：2013-01-22T16:20:07.963
> 
> 标签：3d

我创建了一个球体，在球体（细胞）内部是另一个较小的球体（核），位于一端，球体的另一端是称为微管的结构。

微管有一个中心点，然后有一条线从该点延伸到细胞核的边缘，也延伸到细胞的边缘。

我有在整个细胞中移动的点（病毒）。一旦病毒位于微管结构上（假设它从细胞边缘附着到结构上），它必须向微管中心移动，并最终沿着线向细胞核移动。

我已经想出了如何确定病毒是否在微管结构上，但是我不知道如何将其移出。我使用象限系统在 2D 空间中找到了它，但我无法在 3D 空间中完成它。

我的问题是：一旦病毒在微管上，我如何更新坐标以将其移向中心，然后移向细胞核？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:17:55.897

您的问题是在两点 A 和 B 之间平滑插值对象 O。您可以使用线性插值、三次样条插值等。

**线性插值** 假设：

*   O 在坐标系 Fa 的位置 A；
*   O 在坐标系 Fb 的位置 B；

那么对于 Fa 和 Fb 之间的 Fc，您可以将 C 计算为：

C = A + (BA)(Fc - Fa)/(Fb - Fa)

基本上，您考虑的是起点 A，您将在此添加到现在执行的翻译。到目前为止执行的转换是执行的总转换 (B - A)，由归一化的帧数（介于 0 和 1 之间）加权，因为插值开始所以 (Fc - Fa)/(Fb - Fa)

如果 Fc = Fa（所以我们还没有开始插值），那么 C = A；如果 Fc = Fb（所以我们应该到达最终位置），那么 C = B；

这种插值将产生线性轨迹。但是，O 速度是恒定的。这意味着 O 将以完全相同的速度开始、行进和结束。在动画中，这很少能产生好的结果。其他技术使用三次插值、Kochanek–Bartels 样条等。这些插值技术实现起来要复杂得多，但可以让您更好地控制点沿直线移动的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:10:23.873

因此，您的问题归结为“如何在 3D 中将对象从一个点移动到另一个点（多帧）？”

答案完全取决于您如何实现对象移动。但基本概念是：

1.  从“到”点的位置减去“从”点的位置。结果是一个向量，它指向您希望对象移动的方向。
2.  改变这个向量的大小（不改变它的方向），这样这个向量就可以成为你对象的速度向量。
3.  既然您已经有了对象的起始位置和速度，就可以让它随着时间的推移移动，直到您到达目的地点。

# .net - 新之后什么都没有，这可能吗？

> ID：14463146
> 
> 赞同：3
> 
> 时间：2013-01-22T16:20:18.527
> 
> 标签：.net, vb.net, oop

`Nothing`之后`New`，有可能吗？

```
Dim myObj As MyClass = Nothing
myObj = New MyClass(params)
If myObj Is Nothig Then
  ' is it possible?
End If 
```

构造函数返回一个空（无）对象是否存在理论上的可能性？

*说，`Me = Nothing`在构造函数中设置？或者，如果在构造函数中抛出异常，对象的 catch 中会发生什么？或者在最后一个构造函数行中，我通过引用“Me”传递给一个方法，而这个方法将该引用设置为 Nothing？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:24:24.287

不，[`New`-operator](http://msdn.microsoft.com/en-us/library/77s47661.aspx)用于创建新的对象实例。即使该对象的所有字段都将保留`Nothing`，实例本身也不会保留`Nothing`。

[Visual Basic 语言规范：](http://www.microsoft.com/en-us/download/details.aspx?id=15039)

> **11.10 新表达式**New 运算符用于创建类型的新实例。……
> 
> **11.10.1 对象创建表达式**对象创建表达式用于创建类类型或结构类型的新实例。对象创建表达式的类型必须是类类型、结构类型或具有 New 约束的类型参数，不能是 MustInherit 类。给定 New T(A) 形式的对象创建表达式，其中 T 是类类型或结构类型，A 是可选参数列表，重载决策确定要调用的 T 的正确构造函数。具有 New 约束的类型参数被认为具有单个无参数构造函数。**如果没有可调用的构造函数，则会发生编译时错误；否则，表达式会导致使用所选构造函数创建 T 的新实例。**如果没有参数，括号可以省略。分配实例的位置取决于实例是类类型还是值类型。类类型的新实例在系统堆上创建，而值类型的新实例直接在栈上创建。对象创建表达式可以选择在构造函数参数之后指定成员初始值设定项列表。这些成员初始化器以关键字 With 为前缀，初始化器列表被解释为好像它位于 With 语句的上下文中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T09:54:15.367

除非您使用`On Error Resume Next`并且构造函数中存在异常`MyClass`，或者您创建了一个[在创建](https://stackoverflow.com/a/194671/256431)[时返回的代理`Nothing`](https://stackoverflow.com/a/194671/256431)。

在确认代理的 VB.NET 版本“有效”时，我注意到`myObj Is Nothing`它是`False`在创建之后立即发生的（就像您在 OP 中要求的那样），但是当您尝试用它做任何其他事情时，它肯定看起来像`Nothing`. `Nothing`一旦你尝试用它做更多而不是测试它的价值，它通常会变成。（在这个阶段它与 C# 相同。在这一点上我真的应该开始一个新问题......）

但我发现“空”的存在`Try Catch`足以让 VB.NET 将`Nothing`! （从 LinqPad 的 Roslyn C# 6 (Beta) 版本开始，C# 的性能相同。）

```
Sub Main()
    Dim myObj = New MyFunnyType()
    If myObj Is Nothing Then
      Call "It IS Nothing".Dump
    Else
      ' Comment out this Try and myObj will not be Nothing below.
      Try
        'Call myObj.ToString.Dump
      Catch nr As NullReferenceException
        Call "Maybe it was nothing?".Dump
      Catch ex As Exception
        Call ex.Message.Dump
      End Try
      Call myObj.Dump("Nil?")
      If myObj Is Nothing Then
        Call "Now it IS Nothing".Dump
      Else
        Call "It still is NOT Nothing!".Dump
      End If
    End If
End Sub

' Define other methods and classes here
Class MyFunnyProxyAttribute
  Inherits ProxyAttribute
    Public Overrides Function CreateInstance(ByVal ServerType As Type) As MarshalByRefObject
        Return Nothing
    End Function
End Class

<MyFunnyProxy> _
Class MyFunnyType
  Inherits ContextBoundObject
  Public Overrides Function ToString() As String
    If Me IsNot Nothing Then
      Return "Yes, I'm here!"
    Else
      Return "No, I'm really Nothing!"
    End If
  End Function
End Class 
```

请注意，调用`ToString`是要被注释掉的：当它不是时，它`Nothing`被结晶为“预期的”。

（在基于 Roslyn C# 6 的 LinqPad 之前，我在 C# 中没有看到类似的效果。即仅在 中注释掉`ToString`调用`try`就足以`myObj`保持非`null`.C# 6 LinqPad（Beta）的性能与 VB.NET 相同, 要求`try`将 去除以不`null`结晶。）

# c# - ComboBox 不会绑定到数据源

> ID：14463151
> 
> 赞同：1
> 
> 时间：2013-01-22T16:20:24.767
> 
> 标签：c#, visual-studio-2010, data-binding

我`ComboBox`在设计时将 a 绑定到数据源。数据源有效，我可以预览`ComboBoxTasks`控件中的数据。显示和值成员设置为数据源中的列，但是，当应用程序运行时。我没有数据。以前有人遇到过这个问题吗？我还尝试在运行时手动将项目添加到组合框属性中，但无济于事。

```
//bind combobox
this.cboProperty.DataSource = usersDataSet1.Tables["properties"];
this.cboProperty.DisplayMember = "propcode";
this.cboProperty.ValueMember = "value"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:29:32.203

`DisplayMember`并且`ValueMember`是用词不当。中的基础对象`Datasource`必须具有以字符串值命名的属性，而不仅仅是以字符串值命名的成员。

因此，如果您的底层对象看起来像这样，它将不会绑定

```
public class DataRow
{
    public string propcode;
    public string value;
} 
```

但这将正确绑定。

```
public class DataRow
{
    public string propcode {get; set;};
    public string value {get; set;};
} 
```

如果您使用数据集设计器生成数据集，它将为您创建对象。如果您自己在代码中创建数据集，它不会为您执行此操作。

# php - PHP，当类位于不同文件中时，每个引用将对象从一个对象传递到另一个对象

> ID：14463156
> 
> 赞同：0
> 
> 时间：2013-01-22T16:20:37.730
> 
> 标签：php

我正在开发一个网络应用程序。
到目前为止，后端是 JBoss 6.1 Application Server (Java EE)。

现在，使用相同的前端，PHP 中应该有另一个后端。
由于我喜欢 Java 后端的结构，所以我为 php 后端设计了一个类似的结构。

对 PHP 后端的每个请求都转到一个条目，它是“facade.php”，它是我的前端控制器。

前端控制器（facade.php）处理 JSON 输入和其他事情，然后有一个大的 switch 语句。每个任务（登录、获取事件对象……）都被转移到另一个流程类。

“facade.php”的片段：

```
switch ($procClass) {
  case "lgi":
    require_once("classes/Login.php");
    $login = new Login();
    $resultMap = $login->process($internalObj, $sessionObj);
    break;
  case "cst":
    require_once("classes/Cases.php");
    $cases = new Cases();
    $resultMap = $cases->process($internalObj, $sessionObj);
    break;  
  .
  . 
  .
} 
```

在 JBoss Java EE 环境中，当我在无状态会话 Bean 中并在本地查找另一个无状态会话 Bean（不同的类）时，对象通过引用传递给另一个类的方法。

现在我知道，在 PHP 中，当您在同一个类中并将一个对象传递给同一类的另一个方法时，该对象是按引用传递的（或者更准确地说，引用是按值传递的）。

但是，如上例所示，如果我将“sessionObj”对象从 facade.php 传递到另一个文件中的另一个类（案例）的实例，似乎不可能通过引用传递对象。

我的假设正确吗？

在这种情况下是否有另一种方法来传递每个引用（当类在单独的文件中时从对象到对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:32:24.873

Cases类的process方法的定义应该是

```
function process($internalObj, &$sessionObj) {
     [...]
} 
```

参数前面的“&”表示它是[通过引用传递的](http://php.net/manual/en/language.references.pass.php)

# c# - 从 MVC 4 模板中删除不显眼的验证

> ID：14463158
> 
> 赞同：1
> 
> 时间：2013-01-22T16:20:39.540
> 
> 标签：c#, asp.net-mvc, jquery-validate, unobtrusive-validation

我使用 Visual Studio 2012（表单身份验证）中的 ASP.net MVC 4 Web 应用程序模板创建了一个新项目，我想从中删除不显眼的验证。我做了以下更改：

1.  更改了 web.config -`add key="UnobtrusiveJavaScriptEnabled" value="false"`
2.  更改`BundleConfig`以删除`jquery.validate.unobtrusive.js`脚本
3.  我进行了更改`_Layout`，以便 jquery/jqueryval 包在该`<head>`部分中。

这些是我所做的唯一更改，但我没有得到任何客户端验证。在 chrome 中检查脚本时，我看到 jquery 和`jquery.validate`（不是不显眼的）并且它没有将不显眼的属性放在我的标记中，但是客户端根本不起作用。

我还需要做什么/撤消来摆脱不显眼的验证？

**编辑**
检查标记，这也在我的页面中：

```
<script type="text/javascript">
//<![CDATA[
if (!window.mvcClientValidationMetadata) { window.mvcClientValidationMetadata = []; }
    window.mvcClientValidationMetadata.push({"Fields":[],"FormId":"form0","ReplaceValidationSummary":true,"ValidationSummaryId":"validationSummary"});
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:23:09.603

删除标签，如

```
@Html.ValidationSummary(true)

@Html.ValidationMessageFor(model => model.roleId) 
```

# python - 如何从 minimock 中的模拟方法访问对象的“自我”

> ID：14463159
> 
> 赞同：0
> 
> 时间：2013-01-22T16:20:39.820
> 
> 标签：python, testing, mocking, self

在 Python 中，我想`__init__`使用 minimock 库来模拟一个类的方法。

这就是解释器所做的（ipython）：

```
In [1]: import minimock

In [2]: class A:
   ...:     def __init__(self):
   ...:         print "REAL INIT"
   ...:

In [3]: def new_init(self):
   ...:     print "NEW INIT"
   ...:

In [4]: minimock.mock("A.__init__", returns_func=new_init)

In [5]: a = A()
Called A.__init__()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-5-144b248f218a> in <module>()
----> 1 a = A()

D:\Tools\Python27\lib\site-packages\minimock\__init__.pyc in __call__(self, *args, **kw)
    492         if self.mock_tracker is not None:
    493             self.mock_tracker.call(self.mock_name, *args, **kw)
--> 494         return self._mock_return(*args, **kw)
    495
    496     def _mock_return(self, *args, **kw):

D:\Tools\Python27\lib\site-packages\minimock\__init__.pyc in _mock_return(self, *args, **kw)
    505                 raise Exception("No more mock return values are present.")
    506         elif self.mock_returns_func is not None:
--> 507             return self.mock_returns_func(*args, **kw)
    508         else:
    509             return None

TypeError: new_init() takes exactly 1 argument (0 given) 
```

但是，如果我从 new_init 中删除 self 参数：

```
def new_init():
    print "NEW INIT" 
```

实例化 A 类给出：

```
In [13]: a = A()
Called A.__init__()
NEW INIT 
```

这让我认为 minimock 对“自我”有限制。

您知道是否可以在传递给 minimock 的方法的模拟版本中使用“self”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:57:26.430

我真的不明白你为什么要这样做，无论如何答案是你不应该`A.__init__`直接打电话：

```
>>> class A(object):
...     def __init__(self):
...             print('Old init - self' + str(self))
>>> def new_init(self):
...     print('New init - self:' + str(self))
... 
>>> A.__init__ = new_init
>>> A.__init__()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unbound method new_init() must be called with A instance as first argument (got nothing instead)
>>> A()
New init - self:<__main__.A object at 0x2446d90>
<__main__.A object at 0x2446d90> 
```

图书馆`minimock`没有做错任何事。`__init__`旨在通过调用类来调用。如果显式调用它，则**必须**显式传递一个实例作为第一个参数。

无论如何，我强烈建议你重新考虑一下你在做什么，因为你不应该做这样的事情。模拟应该用于模拟整个对象，而不仅仅是一个方法。在你的情况下，我会嘲笑整个班级`A`，而不仅仅是它的`__init__`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:52:39.347

您正在定义一个函数作为类外部的参数`new_init`。`self`既然如此，您需要为该函数提供一个参数。你可能想在类中声明它，所以它是一个类方法。否则没有意义。有关如何使用的更多信息，请参阅[此问题](https://stackoverflow.com/questions/2709821/python-self-explained)`self`。

# javascript - 将特定页面加载到 iframe 中时如何调用 javascript

> ID：14463162
> 
> 赞同：1
> 
> 时间：2013-01-22T16:20:55.553
> 
> 标签：javascript, iframe

我认为这很容易。

我有一个加载和 iframe 的页面。iframe 是我正在使用的另一个网站。如果 iframe 中加载了特定页面，我想在父页面上执行一些 javascript。

那有意义吗？

例如： foo.com 是我在 iframe 中加载 foobar.com 的主页。如果用户访问 foobar.com/thanks.html，我希望 foo.com 上的脚本能够执行。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:04:00.893

至于检测iframe什么时候重定向这个很简单，你可以使用`onload`iframe元素上的属性触发一个函数，每次用户重定向都会触发。但是，由于跨站点脚本安全问题，一旦重定向后尝试访问新 url 是不可能的。

但是您提到 iframe 站点是您正在使用的站点，因为是这种情况，如果您有权访问 .htaccess 文件，您可能会追求什么

添加

```
Header add Access-Control-Allow-Origin: http://parentdomain.com 
```

然后在父域上

包括这个html：

```
<iframe src="http://childdomain" id="childsite" onload="iframeredirected();"/> 
```

和这个 javascript

```
function iframeredirected(){
var new_src = document.getElementById("childsite").documentWindow.location.href;
} 
```

# javascript - $(this).click() Internet Explorer 问题

> ID：14463163
> 
> 赞同：3
> 
> 时间：2013-01-22T16:20:57.550
> 
> 标签：javascript, jquery, internet-explorer-9

此代码/标记与 php 脚本一起呈现多选输入，其中填充了通过 php 脚本设置为文件的选项。目标是当用户单击一个选项时，读取文本文件并将其输出到 div $("#txtbx")。这在 Mozilla firefox 中按计划工作，但是 ie9 什么都不做，没有错误没有输出。正如您从评论中看到的那样，我找到了违规代码。这不是我最初想到的 .each() 问题，也不是选择器问题（我直接按类引用了它：请参阅评论）。也不是 $(this) 我也测试过......它似乎是附加到 $(this) 的事件或事件本身。输出的去向无关紧要，因为它不会超过 $(this).click(f)。知道这里发生了什么吗？

```
<div id="txtbx">
</div>

<select id="REFselect" size="1">
<option class="REFoptions" value="./TXT/css.txt">css.txt</option>
<option class="REFoptions" value="./TXT/dns.txt">dns.txt</option>
</select>

$("#REFselect option").each(function () {
    $(this).click(function(){
        alert("test")
        /*
        $("#txtbx").load($(this).val(),function(responseTxt,statusTxt,xhr){
            $(this).html("<pre>"+responseTxt+"</pre>");
            if(statusTxt=="success")
              alert("External content loaded successfully!");
            if(statusTxt=="error")
              alert("Error: "+xhr.status+": "+xhr.statusText);

        });
        */
    });
}); 
```

这是工作代码，我是该网站的新手，所以我要感谢大家的回答，他们非常好。我不知道如何授予适当的信用，我正在研究。另外我很想知道为什么旧代码在 FF 而不是 IE 中工作。

```
$("#REFselect").change(function(){
        var select = $(this).val();

        $("#txtbx").load(select,function(responseTxt,statusTxt,xhr){
            $(this).html("<pre>"+responseTxt+"</pre>");
            if(statusTxt=="success")
              alert("External content loaded successfully!");
            if(statusTxt=="error")
              alert("Error: "+xhr.status+": "+xhr.statusText);  
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:23:24.173

```
$("#REFselect").on("change", function() {
   $("#txtbx").load($(this).val(),function(responseTxt,statusTxt,xhr){
        $(this).html("<pre>"+responseTxt+"</pre>");
        if(statusTxt=="success")
          alert("External content loaded successfully!");
        if(statusTxt=="error")
          alert("Error: "+xhr.status+": "+xhr.statusText);

    });
}); 
```

您可以使用`.on()`在 select 标签的所有选项上绑定事件！并按照 bfavaretto 的建议更改事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:27:24.790

您将`.click`处理程序绑定到`<option>`元素（没有`click`要处理的事件）。

尝试将其设置为元素的`.change`事件。`<select>`

```
$("#REFselect").change(function (e) {
    alert("test")
    $("#txtbx").load($(this).val(), function (responseTxt, statusTxt, xhr) {
        $(this).html("<pre>" + responseTxt + "</pre>");
        if (statusTxt == "success") {
            alert("External content loaded successfully!");
        }
        if (statusTxt == "error") {
            alert("Error: " + xhr.status + ": " + xhr.statusText);
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:26:05.917

我认为这是内在的`$(this)`（据说是一个`<option>`元素）。尝试`<select>`使用`change`事件直接从 中获取值：

```
$("#REFselect").change(function(){
     alert("test");
     $("#txtbx").load($(this).val(),function(responseTxt,statusTxt,xhr){
         $(this).html("<pre>"+responseTxt+"</pre>");
         if(statusTxt=="success")
             alert("External content loaded successfully!");
         if(statusTxt=="error")
             alert("Error: "+xhr.status+": "+xhr.statusText);

     });
}); 
```

# php - PHP- 不使用 file_get_contents 方法下载文件

> ID：14463166
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:21:06.480
> 
> 标签：php

我需要知道的是如何下载存储在路径中的文件。是否有必要将内容存储在数据库中？当我引用另一个站点时，它给了我一个解决方案，其中文件的内容使用**file_get_content**方法存储在 db 中，并通过它下载文件。还有其他方法吗？我在没有使用该方法的情况下进行了检查，但即使发生下载，内容也没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:28:53.290

一旦文件在服务器上，您就可以停止说“下载”。正确的术语现在是“读取文件”。

老实说，`file_get_contents()`如果您只需要将整个文件读入变量然后对其进行处理，那么这是最好的选择。它*旨在*用于本地文件，但人们也喜欢使用它来获取远程文件。[那些人*错了*恕我直言。:P]

如果您一心想要使用其他东西，那么总会有[`fread()`](http://ca2.php.net/manual/en/function.fread.php)，或者使用带有 . 的循环[`fgets()`](http://ca2.php.net/manual/en/function.fgets.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:49:03.103

真的有两种选择：

**1\. 将文件存储在数据库**
中为此，您需要将文件的内容读入内存，然后将其存储在数据库中。`file_get_contents()`是读取文件以将其存储在数据库中的逻辑选择。

**优点**：更容易。**缺点**：当数据集变大时性能和可管理性更差。
**推荐用于**：小文件`&&`simpel项目。

**2\. 将文件存储在磁盘上**
另一种选择是将文件存储在磁盘上并将文件路径存储在数据库中。从磁盘获取文件并将其发送到客户端的最佳方法是`readfile()`；它从磁盘读取并将内容直接流式传输到浏览器。

**优点**：更好的可扩展性（所有*大型*网站都使用这种方法）。**缺点**：更复杂。
**推荐用于**：大文件`||`较大的项目。

# java - 使用 Java API 在 hadoop 中运行 Streaming 作业

> ID：14463169
> 
> 赞同：0
> 
> 时间：2013-01-22T16:21:14.757
> 
> 标签：java, hadoop, hadoop-streaming

我是 hadoop 新手，正在学习流媒体作业。有人可以指导我如何通过 Java 代码运行 Streaming Jobs 吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:52:07.040

如果您想使用流式 API 运行 Java 代码，您可以直接将类名作为映射器和/或化简器传递。像这样的东西：

```
$HADOOP_HOME/bin/hadoop  jar $HADOOP_HOME/hadoop-streaming.jar \
-input myInputDirs \
-output myOutputDir \
-mapper com.something.MyMapper \
-reducer com.something.MyReducer 
```

但是，如果您只想运行 Java 代码，我建议您通过常规 J​​ava API 而不是使用 Hadoop 流，它更加灵活。

我不清楚您的问题是关于在流中运行 Java 代码，还是您想通过从 Java 调用流代码来启动流代码。我假设你想运行上面的 Java 代码，但如果它是另一个选项，你可以从 Java 启动一个子进程来运行命令行实用程序，例如：

```
String cmd = "/usr/bin/hadoop  jar /path/to/hadoop-streaming.jar -input myinput -output myoutput -mapper mymapper.sh -reducer myreducer.sh";
String[] cmdSplit = cmd.split(" ");
ProcessBuilder pb = new ProcessBuilder(cmdSplit);
pb.start(); 
```

您也可以通过在类路径中添加 hadoop-streaming jar 并调用：

```
String cmd = "/usr/bin/hadoop  jar /path/to/hadoop-streaming.jar -input myinput -output myoutput -mapper mymapper.sh -reducer myreducer.sh";
String[] cmdSplit = cmd.split(" ");
HadoopStreaming.main(cmdSplit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:21:23.530

如果您希望在 Java 中调用它，请查看使用 ToolRunner 来运行您的 Hadoop Streaming 代码。它将允许您灵活地从非 hadoop 节点调用 hadoop 流。

```
JobConf conf = new JobConf();
conf.set("fs.default.name", "hdfs://hadoop-worker-node:54310");
conf.set("mapred.job.tracker", "hadoop-worker-node:54311");

StreamJob sj = new StreamJob();

String cmdArgs = "-file mymapper.sh -file myreducer.sh -input myinput -output myoutput -mapper mymapper.sh -reducer myreducer.sh";
String[] cmdArgsSplit = cmdArgs.split(" ");

int jobReturnCode = ToolRunner.run(conf, sj, cmdArgsSplit); 
```

由-file 参数指定的文件（例如映射器和reducers），以及hadoop 流运行时类，将打包在一个jar 中并发送到jobtracker。这具有在运行作业之前对 hadoop 节点进行零部署的优势。

编辑：我刚刚意识到这与查尔斯几周前在另一个线程中[发布](https://stackoverflow.com/a/14248897/1430548)的示例非常相似:)

# python - Sphinx 中的 Autodoc 单模块属性

> ID：14463173
> 
> 赞同：2
> 
> 时间：2013-01-22T16:21:22.973
> 
> 标签：python, python-sphinx, autodoc, docutils

假设我在 Python 模块中记录了一个变量，如下所示：

```
some_random_name = 'whatever'
"""The random whatever variable""" 
```

我可以在我的 .rst 文件中包含该单个变量的自动文档，*而无需*拖入模块`__doc__`字符串并为此生成文档输出吗？

我努力了

```
.. automodule: themodule
   :members: some_random_name 
```

但两者都`__doc__`拖入字符串并且不显示`some_random_name`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T22:23:16.093

我无法重现记录模块属性的问题。这个对我有用。您的模块中是否有一个`__all__`变量的值不包括在内`some_random_name`？[斯芬克斯 `__all__`](http://sphinx-doc.org/ext/autodoc.html#directive-automodule)在寻找成员时会考虑。

可以通过拦截[`autodoc-process-docstring`](http://sphinx-doc.org/ext/autodoc.html#event-autodoc-process-docstring)事件来删除模块文档字符串。这是一个演示（将代码添加到**conf.py**）：

```
import inspect

def remove_mod_docstring(app, what, name, obj, options, lines):
    """Erase module docstring in-place"""  
    if inspect.ismodule(obj):
        for i in xrange(len(lines)):
            lines[i] = ''

def setup(app):
    app.connect('autodoc-process-docstring', remove_mod_docstring) 
```

# c++ - 访问派生类成员的基类方法

> ID：14463179
> 
> 赞同：0
> 
> 时间：2013-01-22T16:21:44.647
> 
> 标签：c++

我有以下情况：

```
class num {
    public:
    void print(ostream* o); // Prints the n variable
};

class int_num : public num{
    public:
    int n; // Initialized by this class's constructor
};

class float_num : public num{
    public:
    float n; // Initialized by this class's constructor
};

class double_num : public num{
    public:
    double n; // Initialized by this class's constructor
}; 
```

我如何实施这样的计划

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:24:53.077

给它一个虚拟方法，在派生类型中实现：

```
class num {
 public:
    void print(ostream& o) const
    {  // Prints the n variable
      doPrint(o);
    }
 private:
    virtual void doPrint(ostream& os) const = 0;
};

class double_num : public num{
  public:
    double n; // Initialized by this class's constructor
 private:
  void doPrint(ostream& os) const 
  {
    os << n;
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:25:38.877

为什么不使用`template`：

```
template<typename T>
class num
{
    T n;  //data of type T

 public:

      //add constructor(s) to initialize n

      void print(std::ostream &out) { out << n ; }

      //add functions(s) to work with n
}; 
```

这样就可以打印了。

现在你有两个选择：

*   如果`typedef`代码中的所有派生类型都在做同样的事情，没有特定类型，则使用：

    ```
    //use typedefs
    typedef num<int>    int_num; 
    typedef num<float>  float_num; 
    typedef num<double> double_num; 
    ```

*   **如果**您需要在派生类中执行特定*类型*的操作，或者使用继承：

    ```
    class int_num : public num<int>
    {
       //int specific things 
    }; 
    ```

关键是`num<T>`无论您使用`typedef`还是*继承*都可以进行打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:28:19.307

你有两个选择。

`print()`正如其他人已经指出的那样，一种是制作纯虚拟并在派生类中实现它。

另一种选择是使用[Curiously recurring template pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)，如下所示：

```
template <typename Impl>
class num
{
public:
  void print(ostream &os) const
  {
    os << static_cast<const Impl*>(this)->n;
  }
};

class int_num : public num<int_num>
{
  //same as before
};

class float_num : public num<float_num>
{
  //same as before
};

//etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:25:07.923

有两种解决方案。首先是让`print`方法成为纯抽象方法，并在所有子类中实现。二是使用模板：

```
template<typename T>
class num
{
public:
    void print(std::ostream& os) const
        {
            os << num_;
        }

private:
    T num_;
};

typedef num<float> float_num;
typedef num<int>     int_num; 
```

# listview - WinJS 多列列表视图

> ID：14463181
> 
> 赞同：0
> 
> 时间：2013-01-22T16:21:45.817
> 
> 标签：listview, windows-8, datatemplate, winjs

我正在寻找一个将典型网格复制到 WinJS 中的模板示例。任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:38:24.923

CodeShow 中有大量 Jeremy Foster 的示例，您可以从 [codeplex](http://codeshow.codeplex.com)下载。

这是 codeshow 演示中与“CSS Grid”示例相关的 html、css 和 js，它包含 4 个不同的网格，从最简单的网格到更“复杂”的网格。我希望这对您有所帮助，我鼓励您下载它并使用演示。

* * *

**网格.html**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>CSS Grid</title>
    <meta name="tags" content="" />
    <meta name="keywords" content="grid layout css" />
    <meta name="description" content="Multiple ways to use a CSS grid." />
    <meta name="author" content="Jeremy Foster" />

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-light.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link href="grid.css" rel="stylesheet" />
    <script src="grid.js"></script>
</head>
<body>
    <div class="grid fragment">
        <header aria-label="Header content" role="banner">
            <button class="win-backbutton" aria-label="Back" disabled></button>
            <h1 class="titlearea win-type-ellipsis">
                <span class="pagetitle">Grid</span>
            </h1>
        </header>
        <section aria-label="Main content" role="main" class="swiper">
            <div id="simple">
                <h2>Simple</h2>
                <div class="explanation">This simple 2x2 grid has 4 elements that are each assigned their own "cell".</div>
                <div class="msgrid">
                    <div>A</div>
                    <div>B</div>
                    <div>C</div>
                    <div>D</div>
                </div>
            </div>

            <div id="rowspans">
                <h2>Rowspans</h2>
                <div class="explanation">This grid is actually 3x3\. The blue item is spanning 2 rows and the green item is spanning 2 columns</div>
                <div class="msgrid">
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>

            <div id="fancyGrid">
                <h2>Fancy</h2>
                <div class="explanation">As you can see, grids can be used to create some cool Windows 8 design.</div>
                <div class="msgrid">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>

            <div id="bigGrid">
                <h2>Big</h2>
                <div class="explanation">We would want to build a grid this big declaratively. In this demo, we start with a mere div element and then use JavaScript to easily set the grid properties and manipulate the child items. You can imagine the possibilities.</div>
                <div class="msgrid"></div>
            </div>
        </section>
    </div>
</body>
</html> 
```

* * *

**网格.css**

```
/* Simple */
.grid #simple > div.msgrid { display: -ms-grid; -ms-grid-columns: 250px 250px; -ms-grid-rows: 250px 250px; }
.grid #simple > div.msgrid > div { border: 1px solid gray; }
.grid #simple > div.msgrid > div:nth-child(2) { -ms-grid-column: 2; -ms-grid-row: 1; }
.grid #simple > div.msgrid > div:nth-child(3) { -ms-grid-row: 2; }
.grid #simple > div.msgrid > div:nth-child(4) { -ms-grid-column: 2; -ms-grid-row: 2; }

/* Rowspans */
.grid #rowspans > div.msgrid {
    display: -ms-grid;
    -ms-grid-columns: 100px 1fr 100px;
    -ms-grid-rows: 100px 1fr 100px;
    width:600px;
    height: 400px;
}

.grid #rowspans > div.msgrid > div:nth-child(1) {
    -ms-grid-column: 1;
    -ms-grid-row: 1;
    -ms-grid-row-span: 2;
    border: solid 2px blue;
}

.grid #rowspans > div.msgrid > div:nth-child(2) {
    -ms-grid-column: 2;
    -ms-grid-row: 2;
    -ms-grid-column-span: 2;
    border: solid 2px green;
}

.grid #rowspans > div.msgrid > div:nth-child(3) {
    -ms-grid-column: 2;
    -ms-grid-row: 3;
    border: solid 2px red;
}

/* Fancy Grid */
.grid #fancyGrid > div.msgrid {
    display: -ms-grid;
    -ms-grid-columns: 240px 300px 240px;
    -ms-grid-rows: 174px 174px 174px;
}

    .grid #fancyGrid > div.msgrid > div { border: 1px solid; margin: 5px; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(1) { -ms-grid-row: 1; -ms-grid-column: 1; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(2) { -ms-grid-row: 2; -ms-grid-column: 1; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(3) { -ms-grid-row: 3; -ms-grid-column: 1; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(4) { -ms-grid-row: 1; -ms-grid-column: 2; -ms-grid-row-span: 3; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(5) { -ms-grid-row: 1; -ms-grid-column: 3; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(6) { -ms-grid-row: 2; -ms-grid-column: 3; }
        .grid #fancyGrid > div.msgrid > div:nth-of-type(7) { -ms-grid-row: 3; -ms-grid-column: 3; }

/* Animate Grid */ 
```

* * *

**网格.js**

```
(function () {
    "use strict";

    var element;
    var COLS = 80;
    var ROWS = 40;

    WinJS.UI.Pages.define("/demos/grid/grid.html", {
        ready: function (e, options) {
            element = e;
            this.buildBigGrid(element);
        },
        buildBigGrid: function () {
            var grid = q("#bigGrid .msgrid", element);
            grid.style.display = "-ms-grid";
            grid.style.msGridColumns = Ocho.Array.repeat("10px",COLS).join(" ");
            grid.style.msGridRows = Ocho.Array.repeat("10px", ROWS).join(" ");
            for (var i = 1; i <= COLS; i++) {
                for (var j = 1; j <= ROWS; j++) {
                    var childDiv = document.createElement("div");
                    childDiv.style.msGridColumn = i;
                    childDiv.style.msGridRow = j;
                    childDiv.style.width = "9px";
                    childDiv.style.height = "9px";
                    childDiv.style.backgroundColor = format("rgb({0},{1},{2})", Math.floor(Math.random() * 255), Math.floor(Math.random() * 255), Math.floor(Math.random() * 255));
                    childDiv.style.margin = "1px";
                    grid.appendChild(childDiv);
                }
            }
        }
    });
})(); 
```

# arrays - CodeIgniter - 访问多维数组

> ID：14463182
> 
> 赞同：1
> 
> 时间：2013-01-22T16:21:47.463
> 
> 标签：arrays, codeigniter, multidimensional-array

所以我在访问多维数组中的值时遇到问题。这是我的 $klasemen->data 的 print_r 结果/数组结构：

> ```
> Array (
> [0] => stdClass Object
>     (
>         [team] => stdClass Object
>             (
>                 [id] => 5055
>                 [name] => Manchester United
>             )
> 
>         [breadcrumb] => Array
>             (
>                 [0] => stdClass Object
>                     (
>                         [id] => 1
>                         [name] => Bola
>                     )
> 
>                 [1] => stdClass Object
>                     (
>                         [id] => 2
>                         [name] => Internasional
>                     )
> 
>                 [2] => stdClass Object
>                     (
>                         [id] => 23
>                         [name] => Liga Premiere
>                     )
> 
>             )
> 
>         [games_played] => 23
>         [wins] => 18
>         [draws] => 2
>         [losses] => 3
>         [goals_scored] => 57
>         [goals_against] => 30
>         [goals_difference] => 27
>         [points] => 56
>     )
> 
> [1] => stdClass Object
>     (
>         [team] => stdClass Object
>             (
>                 [id] => 5057
>                 [name] => Manchester City
>             )
> 
>         [breadcrumb] => Array
>             (
>                 [0] => stdClass Object
>                     (
>                         [id] => 1
>                         [name] => Bola
>                     )
> 
>                 [1] => stdClass Object
>                     (
>                         [id] => 2
>                         [name] => Internasional
>                     )
> 
>                 [2] => stdClass Object
>                     (
>                         [id] => 23
>                         [name] => Liga Premiere
>                     )
> 
>             )
> 
>         [games_played] => 23
>         [wins] => 15
>         [draws] => 6
>         [losses] => 2
>         [goals_scored] => 45
>         [goals_against] => 19
>         [goals_difference] => 26
>         [points] => 51
>     ) 
> ```

我想访问比赛的名称（例如 Liga Premiere）并将其打印在我的视图上，但我不断收到**"Message: Trying to get property of non-object"**。我认为语法或我在面包屑数组中访问数组的方式有问题。我是新手，我对这个多维数组的东西感到困惑 T_T

这是我想打印值时视图上的行代码（我很确定它有问题）。

> echo $klasemen->数据->面包屑[2]->名称

无论如何 $klasemen 是包含所有数据的变量。任何人都可以帮助我吗？谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:14:03.407

尝试使用这个泡芙

你

```
$klasemen->data->breadcrumb[2]->name 
```

您只需要更改 $klasemen->data 的 $klasemen[1] 因为它是一个数组。您的对象中不存在 data 属性。

解决方案：

```
$klasemen[1]->breadcrumb[2]->name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:24:23.093

您对`data`. 试试这个：

```
echo $klasemen[0]->breadcrumb[2]->name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:16:57.473

以下代码：

```
echo $klasemen->data->breadcrumb[2]->name 
```

相当于：

```
echo $klasemen[0]->breadcrumb[2]->name 
```

您当前正在处理对象数组。并且您需要提供索引来指定当前对象项。

# java - 提交前页面加载的Servlet空指针异常

> ID：14463184
> 
> 赞同：0
> 
> 时间：2013-01-22T16:21:52.473
> 
> 标签：java, oracle, jsp, servlets, nullpointerexception

我下面的 servlet 正在触发一个空指针异常，但服务器控制台没有详​​细说明异常是从哪里触发的。此外，链接到 servlet 的表单所在的页面也不会加载，只会显示关于空指针异常的 HTTP 状态 500 错误。下面我复制了我的 servlet 和数据库连接代码，但真的可以看到错误来自哪里？

有人可以看看我的代码，看看是否有任何直接的问题？

我的小服务程序：

```
@WebServlet(name = "DateSearchServlet", urlPatterns = {"/Search"})
public class DateSearchServlet {

DatabaseConnector dataManager;
boolean dbOK = false;
HomeList homes = new HomeList();

public void init() {
    dataManager = new DatabaseConnector();
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String dateFrom = request.getParameter("from");
    String dateTo = request.getParameter("to");

    if (dateFrom == null || dateTo == null) {
        dbOK = false;
    } else {
        dbOK = true;
    }//end if

    if (dbOK) {
        homes = dataManager.getPropertiesSearch(dateFrom, dateTo);
        request.setAttribute("homeList", homes);
        request.getRequestDispatcher("bookings.jsp").forward(request, response);
    } else {
        System.out.println("DBNOTOK");
        //will add error messages etc...
    }
}
} 
```

JSP 页面：

```
<div class="dateSearch">
   <form name="dateSearch" action="DateSearchServlet" method="post">
   <label for="from">Date From</label>
   <input type="text" id="from" name="from" />
   <label for="to">Date To</label>
   <input type="text" id="to" name="to" />
   <input type="submit" id="submit">
   </form>
</div>
<h2>List of Properties</h2>
<%
    HomeList homes = (HomeList)request.getAttribute("homeList");
%> 
```

xml文件：

```
<servlet>
    <servlet-name>DateSearchServlet</servlet-name>
    <servlet-class>DB.DateSearchServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>DateSearchServlet</servlet-name>
    <url-pattern>/Search</url-pattern>
</servlet-mapping> 
```

数据库搜索方法：

```
 public HomeList getPropertiesSearch(String from, String to) {
    HomeList homes = new HomeList();//UserBean object to hold the user data
    Connection conn = null;
    conn = createConnection(conn);//set up the connection to the datbase

    //if connection is sucessful, create empty ResultSet and PreparedStatement
    if (conn != null) {
        ResultSet rs = null;
        PreparedStatement preparedStatement = null;
        try {
            String strQuery =
                    "SELECT homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, "
                    + "listagg(features.feature_name, '\\n') WITHIN GROUP(ORDER BY features.feature_name) features, home_type.type_name\n"
                    + "FROM homes "
                    + "INNER JOIN bookings ON bookings.home_id <> homes.home_id"
                    + "INNER JOIN home_feature ON homes.home_id = home_feature.home_id"
                    + "INNER JOIN home_type ON home_type.type_code = homes.type_code"
                    + "INNER JOIN features ON home_feature.feature_id = features.feature_id"
                    + "WHERE bookings.booking_end < date '?'"
                    + "OR bookings.booking_start > date '?'"
                    + "GROUP BY homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name";

            preparedStatement = conn.prepareStatement(strQuery);//prepare the statement
            preparedStatement.setString(1, to);//insert password into query
            preparedStatement.setString(2, from);//insert password into query
            rs = preparedStatement.executeQuery();//execute the query and store this into a ResultSet

            homes = new HomeList(rs);
        }//end try
        catch (SQLException ex) {
            ex.printStackTrace();
        } finally {
            closeConnection(conn);//call close connection the close the database connection
        }//end finally
    }//end if

    conn = closeConnection(conn);

    return homes;
} 
```

谢谢，如果有人能指出我正确的方向

堆栈跟踪：

```
WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
java.lang.NullPointerException
at org.apache.jsp.bookings_jsp._jspService(bookings_jsp.java:191)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:27:07.213

你什么时候调用 init() 方法？很可能它永远不会被调用并且你得到了一个 NPE，因为`dataManager`在这一行是 null ：

```
 homes = dataManager.getPropertiesSearch(dateFrom, dateTo); 
```

# c# - 仅将 C# Properties.Settings 值设置为空格会失败

> ID：14463185
> 
> 赞同：3
> 
> 时间：2013-01-22T16:21:56.937
> 
> 标签：c#, spaces, properties.settings

似乎 user.config 文件`Properties.Settings`可以使用 <value /> 标记正确处理空字符串值，但是仅由一个或多个空格组成的值（例如“”）不会存储为...

```
 <value>    </value> 
```

而是作为...

```
 <value>
     </value> 
```

因此包括 CRLF 和“缩进”空格。

如何保存一个或多个空格字符的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:23:04.440

如果空格很重要，请使用 CDATA：

```
<value><![CDATA[    ]]></value> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T18:39:25.813

感谢这些建议，但都没有解决问题。使用 CDATA 意味着下次将属性加载到程序中时（例如`string prop = Properties.Settings.Default.MyProp`），您将获得 CDATA 字符串（例如 prop is now `"<![CDATA..."`）。如果使用`&nbsp;`. 顺便说一句，PSDSave() 将 &、< 和 > 自动转换为`&amp;, &lt;, and &gt;`实体。

基本上，如果字符串（和字符）设置为空或包含至少一个非空格字符，则字符串（和字符）设置将被正确保存和恢复，但一个或多个空格的字符串（或一个空格的字符）未正确保存。

这个问题出现在允许用户设置字符串用作行缩进前缀（例如`"----", " "`，等）的程序中。我已经修改了程序以避免这个空格字符串错误，但在我看来，空格字符串仍然应该是一个完全有效的“属性”！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-20T07:46:21.523

For others which will looking for how to save 'SPACE' in config...

You can simple use it's decimal value from ASCII table ([http://www.asciitable.com/](http://www.asciitable.com/)). So for space character it's value 32\. Some examples...:

**EXAMPLE 1:**

Save single space in App.config

> config section:

```
<setting name="OneSpaceString" serializeAs="String">
    <value>32</value>
</setting> 
```

> Application section:

```
char space = Convert.ToChar(int.Parse(Properties.Settings.Default.OneSpaceString));
string stringSpace = space.ToString(); 
```

**EXAMPLE 2:**

Save multi space string in config (there is a lot of ways how to do it, but for example...)

> Config section

```
<setting name="MultiSpaceString" serializeAs="String">
    <value>32;32;32;32</value>
</setting> 
```

> Application section:

```
char[] spaces = Properties.Settings.Default.MultiSpaceString.GetCharsByDecimal(new char[] { ';' });
string stringSpaces = string.Join(string.Empty, spaces);

//Extension method for getting chars by decimal from our string
public static char[] GetCharsByDecimal(this string inputString, char[] delimiters)
    {
        int[] charsDecimals = inputString.Split(delimiters, StringSplitOptions.RemoveEmptyEntries).Select(s => int.Parse(s)).ToArray();
        char[] resultChars = new char[charsDecimals.Length];

        for (int i = 0; i < charsDecimals.Length; i++)
        {
            resultChars[i] = Convert.ToChar(charsDecimals[i]);
        }

        return resultChars;
    }

//Or safer variant of our extension method
public static char[] GetCharsByDecimal(this string inputString)
    {
        int[] charsDecimals = Regex.Split(inputString, @"\D+").Select(s => int.Parse(s)).ToArray();
        char[] resultChars = new char[charsDecimals.Length];

        for (int i = 0; i < charsDecimals.Length; i++)
        {
            resultChars[i] = Convert.ToChar(charsDecimals[i]);
        }

        return resultChars;
    } 
```

**EXAMPLE 3:**

Save delimiters (including space) in config

> Config section

```
<setting name="Delimiters" serializeAs="Xml">
                <value>
                    <ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                        <string>59</string>
                        <string>44</string>
                        <string>9</string>
                        <string>45</string>
                        <string>124</string>
                        <string>32</string>
                    </ArrayOfString>
                </value>
            </setting> 
```

> Application section

```
char[] delimiters = Properties.Settings.Default.Delimiters.Cast<string>().Select(s => Convert.ToChar(int.Parse(s))).ToArray(); 
```

# rackspace - vb.net 中的 Rackspace 云文件 (OpenStack Swift) TempUrl 示例

> ID：14463187
> 
> 赞同：1
> 
> 时间：2013-01-22T16:21:57.733
> 
> 标签：rackspace, openstack, cloudfiles, openstack-swift

谁能提供.net（c＃或vb.net）中机架空间云文件tempurl函数的示例？

RackSpace 站点上有文档：http: [//docs.rackspacecloud.com/files/api/v1/cf-devguide/cf-devguide-20121130.pdf](http://docs.rackspacecloud.com/files/api/v1/cf-devguide/cf-devguide-20121130.pdf) 从第 52 页开始。

Ruby 和 Python 中有一些示例，但我在移植它们时遇到了麻烦。我需要：

*   设置账户 Temp URL Metadata Key

    *   创建 HMAC-SHA1 (RFC 2104)
    *   创建临时网址

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T15:28:25.937

Athlectual 的回复似乎不适用于当前的 openstack.net NuGet 包，但我已经通过反复试验设法让它与最新版本 (1.1.2.1) 一起使用。希望这对其他人有帮助

在我的情况下，我似乎不必设置临时 URL 元数据密钥，因为已经设置了一个，必须在创建帐户时随机生成。因此，获取有效临时 URL 的代码如下。

**注意我已经使用用户名和 APIKey 进行身份验证**。**我想您可以改用密码。APIKey 可以在 Rackspace 云控制面板网站的帐户详细信息下找到。**

 **```
private static string GetCloudFilesTempUrl(Uri storageUrl, string username, string apiKey, string containerName, string filename)
{
    var cloudIdentity = new CloudIdentity()
        {
            Username = username,
            APIKey = apiKey
        };

    var provider = new CloudFilesProvider(cloudIdentity);

    var accountMetaData = provider.GetAccountMetaData();
    var tempUrlKey = accountMetaData["Temp-Url-Key"];

    //Set the link to expire after 60 seconds (in epoch time)
    var epochExpire = ((int) (DateTime.UtcNow - new DateTime(1970, 1, 1)).TotalSeconds) + 60;

    //The path to the cloud file
    var path = string.Format("{0}/{1}/{2}", storageUrl.AbsolutePath, containerName, filename);

    var hmacBody = string.Format("GET\n{0}\n{1}", epochExpire, path);

    var hashSaltBytes = Encoding.ASCII.GetBytes(tempUrlKey);

    string sig;

    using (var myhmacMd5 = new HMACSHA1(hashSaltBytes))
    {
        var ticketBytes = Encoding.ASCII.GetBytes(hmacBody);
        var checksum = myhmacMd5.ComputeHash(ticketBytes);

        var hexaHash = new StringBuilder();

        foreach (var b in checksum)
        {
            hexaHash.Append(String.Format("{0:x2}", b));
        }

        sig = hexaHash.ToString();
    }

    var cloudFileUrl = string.Format("https://{0}{1}", storageUrl.Host, path);

    //Compile the temporary URL
    return string.Format("{0}?temp_url_sig={1}&temp_url_expires={2}", cloudFileUrl, sig, epochExpire);
} 
```

我不确定您打算如何获取存储 URL，但通过更多的试验和错误，我设法做到了这一点：

```
private static string GetCloudFilesStorageUrl(string username, string apiKey)
{
    var cloudIdentity = new CloudIdentity()
    {
        Username = username,
        APIKey = apiKey
    };

    var identityProvider = new CloudIdentityProvider(cloudIdentity);

    return identityProvider.GetUserAccess(cloudIdentity)
                            .ServiceCatalog
                            .Single(x => x.Name == "cloudFiles")
                            .Endpoints[0].PublicURL;
} 
```

如前所述，我不必设置临时 URL 密钥，而且我可能不会尝试以防我破坏了一些有效的东西！如果您需要，我猜以下应该可以解决问题：

```
private static void SetCloudFilesTempUrlKey(string username, string apiKey, string tempUrlKey)
{
    var cloudIdentity = new CloudIdentity()
        {
            Username = username,
            APIKey = apiKey
        };

    var provider = new CloudFilesProvider(cloudIdentity);

    provider.UpdateAccountMetadata(new Metadata
        {
            { "Temp-Url-Key", tempUrlKey }
        });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T11:48:07.643

以下将使用 C# 生成一个临时 URL：

```
 var account = new CF_Account(conn, client);

        string tempUrlKey = account.Metadata["temp-url-key"];

        //Set the link to expire after 60 seconds (in epoch time)
        int epochExpire = ((int)(DateTime.UtcNow - new DateTime(1970, 1, 1)).TotalSeconds) + 60;

        //The path to the cloud file
        string path = string.Format("{0}/{1}/{2}", account.StorageUrl.AbsolutePath, containerName, fileName);

        string hmacBody = string.Format("GET\n{0}\n{1}", epochExpire.ToString(), path);

        byte[] hashSaltBytes = Encoding.ASCII.GetBytes(tempUrlKey);

        string sig = null;

        using (HMACSHA1 myhmacMd5 = new HMACSHA1(hashSaltBytes))
        {
            byte[] ticketBytes = Encoding.ASCII.GetBytes(hmacBody);
            byte[] checksum = myhmacMd5.ComputeHash(ticketBytes);

            StringBuilder hexaHash = new StringBuilder();

            foreach (byte b in checksum)
            {
                hexaHash.Append(String.Format("{0:x2}", b));
            }

            sig = hexaHash.ToString();
        }

        string cloudFileUrl = string.Format("https://{0}{1}", account.StorageUrl.Host, path);

        //Compile the temporary URL
        string tempUrl = string.Format("{0}?temp_url_sig={1}&temp_url_expires={2}", cloudFileUrl, sig, epochExpire); 
```**

# javascript - 在原子操作中测试和递减？

> ID：14463189
> 
> 赞同：2
> 
> 时间：2013-01-22T16:22:09.917
> 
> 标签：javascript, node.js, mongodb

我刚刚找到了一个恼人的错误，它基本上是一个竞争条件。为了论证的缘故，让我们假设一个非常简单的文档结构，例如`{ _id : 'XXX', amount : 100 }`.

数百个这样的文档存在于一个集合中，并由多个编写者访问，这些编写者有效地尝试将数量降低任何值，但从不低于 0。目前这是通过两个查询完成的：

*   第一个查询确定当前金额。
*   仅当金额大于要减去的值并减少当前金额时，才会触发第二个查询。

当多个线程同时执行此操作时，这当然容易导致混乱。但是有没有办法在原子操作中做到这一点？`test-and-set`我在文档中找不到类似操作的东西。

如果相关：运行这些操作的代码是运行多个 Node.js 实例和`mongodb`npm 包的服务器端 JavaScript。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T16:26:40.367

限定更新仅在`amount`大于 0 时更新文档：

```
db.coll.update({_id: 'XXX', amount: {$gt: 0}}, {$inc: {amount: -1}}) 
```

# validation - 仅验证 AngularJS 中的可见控件

> ID：14463192
> 
> 赞同：11
> 
> 时间：2013-01-22T16:22:11.160
> 
> 标签：validation, angularjs

我是 AngularJS 的新手，也许我用错了方法，但我在验证表单时遇到了问题。

我有一个包含多个 DIV 的表单。每个 DIV 代表表单流中的一个页面。我有一个 Next-button 将用户带到下一页（DIV）。

页面基于 $scope 中的“currentpage”字段显示，例如

```
<form> 
    <div ng-show="currentpage == 1">
        <input type="text" required />
    </div>
    <div ng-show="currentpage == 2">
        <input type="text" required />
    </div>
    <button ng-disabled="??" ng-click="next()" />
</form> 
```

我想单击 Next 按钮以仅在可见的 DIV 控件上触发表单验证，而不是在隐藏的控件上触发表单验证。根据可见控件的验证状态禁用 Next 按钮是完美的。但是怎么做？我非常想避免在我的控制器中使用 JQuery。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-30T14:56:43.477

也可以将 ng-required 的值设置为适用于条件提交/显示的值。因此，验证在不可见时通过。

然后在提交时，可以从 $scope 表单对象中删除不需要的字段。为了使其更清洁和更易于维护，可以让数组保存给定条件的一组备用的必需/非必需属性。

这种方式可以只使用一种形式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-26T20:52:15.920

```
 <!DOCTYPE html>
 <html ng-app="myapp">
 <body>
  <form name="myForm" data-ng-controller="formController" novalidate> 
    <div ng-show="currentpage==1">
       Page1<input type="text" ng-model="page1" ng-required="currentpage==1"/>
     </div>
    <div ng-show="currentpage=='2'">
        Page2<input type="text" ng-model="page2" ng-required="currentpage==2"/>
    </div>
  <input ng-disabled="myForm.$invalid" type="submit" value="NEXT" ng-click="next()"/>
</form>
</body>
</html> 
```

尝试这个。

注意：

**ng-required="currentpage==1"** 和 **ng-required="currentpage==2"**

**ng-required 的**工作方式与**ng-show**相同。所以当**currentpage==1**为真时，第一个 div 中的字段为 ng-required="true"，而第二个 div 中的字段为 ng-required="false"。

同样，在单击下一步时，当**currentpage==2**时，第二个 div 中的字段成为必填字段，因为 ng-required="true"，而对于第一个 div 中的字段，ng-required="false"。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T16:33:49.547

在我看来，如果您可以在提交时将其中一个设置为空或为空，那么这并不是真正的“必需”，是吗？

您可能应该将它们中的每一个都放在单独的形式中。因为听起来您已经根据当前页面的内容进行了某种条件提交，这将变得难以维护。

这是您的两个表单中的每一个的表单验证示例。在此示例中，如果您真的希望它采用相同的方法，每个表单仍会提交到相同的方法，但我建议让它们提交到自己的方法，而不是将所有内容都硬塞到 switch 语句中。在某些情况下，我什至可以为每个表单提供自己的控制器。

```
<form> 
    <div ng-show="currentpage == 1">
        <form name="page1Form" ng-submit="next(currentPage)">
           <input type="text" name="item1" ng-model="item1" required />
           <span ng-show="page1Form.item1.$dirty && page1Form.item1.$error.required">required</span>
           <button type="submit" ng-disabled="page1Form.$invalid">Submit</button>
        </form>
    </div>
    <div ng-show="currentpage == 2">
        <form name="page2Form" ng-submit="next(currentPage)">
           <input type="text" name="item2" ng-model="item2" required />
           <span ng-show="page2Form.item2.$dirty && page2Form.item2.$error.required">required</span>
           <button type="submit" ng-disabled="page2Form.$invalid">Submit</button>
        </form>
    </div>
</form> 
```

# slider - RichFaces Slider 在 iOS 设备上不起作用

> ID：14463193
> 
> 赞同：0
> 
> 时间：2013-01-22T16:22:13.163
> 
> 标签：slider, richfaces

我们在应用程序中使用 RichFaces 3.3 和 rich:inputNumberSlider。还没有对 iOS 设备的真正支持。我可以单击指针，但无法在 iPad 上滑动。

我现在能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:57:09.730

使用`UISlider`.

首套`IBOutlet`设备：

`.h`文件：

```
IBOutlet UISlider *Slider1; 
```

`.m`文件：

```
lbl3.text=@"slider string";
[Slider1 addTarget:self action:@selector(sliderChanged:) forControlEvents:UIControlEventValueChanged];
Slider1.value=0.0;

// Slider control
- (void)sliderChanged:(UISlider *)slider{

    lbl3.text=[NSString stringWithFormat:@"%i",(int)((slider.value)*100) ] ;     
    NSLog(@"%@",lbl3.text);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:29:37.633

不确定 Richfaces 3.3 + iOS 兼容性，但根据 Richfaces 4.3 展示说明，它应该适用于 iOS。见：[https ://github.com/richfaces/showcase](https://github.com/richfaces/showcase)

自述文件 说：

> 该展示还与基于 WebKit 的浏览器在移动设备上兼容；这包括 iOS、Android 和其他。

但是，我不确定您是否可以选择升级。此外，我不确定我是否记错了，但我相信您可以在移动设备上使用与非移动设备相同的组件（但是我认为有一些内容创建规则）。

**编辑**：

好吧，我想我有一个悲伤的消息要告诉你。听起来，你不是第一个面临这个问题的人：[https ://issues.jboss.org/browse/RF-10918](https://issues.jboss.org/browse/RF-10918)

除非它在上游得到解决，否则我认为你不能继续前进。但是，您可以尝试对错误进行一些加热（将您的环境添加为评论，并可能投票支持它，可能会在那里寻求解决方法），或者您可以尝试检查 Richfaces 源代码并自己提供修复/补丁.

# windows-phone-8 - 如何从其他 xaml 启动 xaml 页面的属性？

> ID：14463200
> 
> 赞同：0
> 
> 时间：2013-01-22T16:22:44.143
> 
> 标签：windows-phone-8

我对 wp 开发很陌生，我正在开发一个 wp8 应用程序，它有一个带有公共属性的 xaml 页面。在导航到此页面之前，必须启动该属性。因此，当页面加载时，我可以使用发起的属性来创建页面内容。我如何启动属性（来自其他 xaml 文件）？

```
public partial class MainPage : PhoneApplicationPage
        {
            public MainPage()
            {
               //initiate the property of Test.xmal here or ...???
               NavigationService.Navigate(new Uri("/Test.xaml", UriKind.Relative));

             }
        }
public partial class Test: PhoneApplicationPage  

     {
            private list<pages> _pages; //The property       

            public Test()
            {                   
                InitializeComponent();
                //Build the page dynamically using _Pages  
            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:44:40.207

您不能访问不同页面上的属性，也不应该访问。

您实际上正在寻找的是在页面之间传递数据或拥有可以从不同页面访问的 ViewModel。[请在此处](https://stackoverflow.com/questions/4953491/passing-data-from-page-to-page)查看该问题的答案

它描述了在页面之间共享数据的不同方式。

# c# - 传递多个参数时出现编译错误

> ID：14463201
> 
> 赞同：0
> 
> 时间：2013-01-22T16:22:44.177
> 
> 标签：c#, asp.net, onclick, arguments, repeater

我遇到的问题是我需要通过单击按钮传递多个参数。我有一个从 sqlquery 打印出值的转发器对象，并且该按钮具有来自同一查询的参数

这是我的中继器：

```
 <asp:Repeater ID="Edit_Repeater" runat="server" DataSourceID="Edit_Repeater_Source">
                <HeaderTemplate>
                    <table class="u_Repeater">
                        <tr>
                            <th>
                                Group Name:
                            </th>
                            <th>
                                Permission Level:
                            </th>
                            <th>
                                Remove:
                            </th>
                        </tr>
                </HeaderTemplate>
                <ItemTemplate>
                    <tr>
                        <td>
                            <%#DataBinder.Eval(Container.DataItem, "Group_Name")%>
                        </td>
                        <td>
                            <%#DataBinder.Eval(Container.DataItem, "Name")%>
                        </td>
                        <td>
                            <asp:Button ID="Submit_Remove" runat="server" Text="Remove Permission" OnClick="Remove_Permission" CommandArgument='<%# Eval("GID") + ";" + Eval("PID") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <FooterTemplate>
                    </table>
                </FooterTemplate>
            </asp:Repeater> 
```

这是我背后的代码：

```
protected void Remove_Permission(object sender, CommandEventArgs e)
    {
        string[] arg = new string[2];            
        string[] commandArgs = e.CommandArgument.ToString().Split(';');
        float GID = float.Parse(arg[0]);
        float PID = float.Parse(arg[1]);
        string UID = User_ID.SelectedValue;

        using (SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["app_migrationConnectionString"].ConnectionString))
        {
            SqlCommand cmd = new SqlCommand("DELETE FROM Membership WHERE GID = @GID AND PID = @PID AND UID = @UID", connection);
            cmd.Parameters.Add("@GID", SqlDbType.BigInt, -1);
            cmd.Parameters["@GID"].Value = GID;
            cmd.Parameters.Add("@PID", SqlDbType.BigInt, -1);
            cmd.Parameters["@PID"].Value = PID;
            cmd.Parameters.Add("@UID", SqlDbType.NVarChar, -1);
            cmd.Parameters["@UID"].Value = UID;

            try
            {
                connection.Open();
                cmd.ExecuteNonQuery();
                connection.Close();
            }

            catch (Exception ex)
            {

                throw ex;
            }
        }
    } 
```

我没有收到任何构建错误，但是当我运行该页面时，我收到一个编译错误消息：

“Remove_Permission”没有重载匹配委托“System.EventHandler”

我几乎肯定代码是正确的，那么问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:26:13.467

将您的更改`CommandEventArgs`为[EventArgs](http://msdn.microsoft.com/en-gb/library/system.eventargs.aspx) - 然后将您的发件人转换为 Button 并从那里获取命令参数。

```
protected void Remove_Permission(object sender, EventArgs e)
{
    var button = sender as Button;
    if (button !=null)
    {
        var commandArg = button.CommandArgument;
        //etc....
    }
} 
```

或者使用[命令事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.command.aspx)而不是`Click`事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:26:57.927

看来您的 Remove_Permission 函数应该是以下类型：

```
public delegate void EventHandler(
Object sender,
EventArgs e
) 
```

# php - 在mac上安装php 5.4，更改版本？？（返回旧版本？）

> ID：14463205
> 
> 赞同：0
> 
> 时间：2013-01-22T16:22:48.500
> 
> 标签：php

我试图将 php 更新到 5.4，我想我已经用[http://php-osx.liip.ch/](http://php-osx.liip.ch/)安装了它。但是当我这样做时，`php -v`它说我有 5.3.15。但如果我这样做`/usr/local/php5/bin/php -v`，它会说 5.4.9。有什么我应该更改以将 5.4 作为默认值吗？

这是终端的图片：![在此处输入图像描述](../Images/aa65b134a7c84bfb8a071078843a1143.png)

（以前从未这样做过，对不起，如果这是一个愚蠢的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:25:56.493

卸载旧版本的 php 并确保新版本目录在`$PATH`变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:46:58.540

在终端中输入它为我修复了它：`PATH=/usr/local/php5/bin:$PATH`

# php - 用于缓存目的的代码生成

> ID：14463207
> 
> 赞同：1
> 
> 时间：2013-01-22T16:22:49.963
> 
> 标签：php, caching, serialization, symfony1, symfony-1.4

我需要缓存一个非常昂贵的操作的结果，该操作涉及扫描目录并获取其文件的内容。

解决问题的一个好方法是将结果缓存在 php 文件中。由于 php 文件加载速度非常快，我正在考虑将整个结果数组序列化为 php 有效的形式，写入磁盘并准备好包含在内。

我的问题是：是否有任何工具/库/框架可以在 php 代码中执行序列化任务以用于缓存目的？如果没有，实现这一目标的最佳实践是什么？

编辑：

感谢杰克[var_export](http://www.php.net/var_export)！

关于如何向**symfony cc**添加一些代码以触发此缓存的生成的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:36:16.760

使用 symfony 的[sfCache](http://www.symfony-project.org/api/1_4/sfCache)类。它可以存储和检索对象，并使用各种缓存后端（可以使用文件、数据库或 APC 作为后端）

用法很简单：（我使用[APC 作为缓存存储](http://www.symfony-project.org/api/1_4/sfAPCCache)，因为我的服务器上已经启用了 APC。如果要将数据存储在文件中，可以使用[sfFileCache](http://www.symfony-project.org/api/1_4/sfFileCache)）

```
$cache = new sfAPCCache();
if ($cache->has('data')) {
  return $cache->get('data');
} else {
  $data = calcualte_data();
  $cache->set('data',$data);
  return $data;
} 
```

# mysql - 在 MySQL 中存储不同格式的数字

> ID：14463208
> 
> 赞同：0
> 
> 时间：2013-01-22T16:22:53.200
> 
> 标签：mysql, database-design

我正在构建一个允许用户以不同货币格式输入值的应用程序。

我最初的想法是将数据保存为以下格式。

*   金额 - 字符串
*   货币 - 具有 ISO 4217 货币代码的字符串，例如 GBP、USD、RUB

这种设计是个好主意还是应该用于金额字段、整数、小数或浮点类型？

我不确定不同样式的格式将如何影响存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:31:54.810

我的投票是：

*   数量 - `DECIMAL(18,4)`-> 您当然可以根据需要更改大小。我不太了解我的货币，无法告诉您需要多少个小数位，所以我决定使用 4 个。我知道至少存在 3 个（请参阅[iPhone-SDK 中的各个国家/地区的“货币小数位宽度”](https://stackoverflow.com/questions/2701301/various-countrys-currency-decimal-places-width-in-the-iphone-sdk)）
*   货币 - 对货币表的外键引用

为什么要使用 FK 参考和货币表？然后，您可以将更多信息与每种货币一起存储（例如相关文化或格式信息），并在必要时添加一个包含汇率的附加表，以便您可以将所有内容添加到一种基础货币中。

此外，现在存储很便宜。

* * *

笔记：

*   我不会用一个字符串来表示金额，因为你不能添加它们并且你不能（很容易地）按它们订购。您还会丢失金额确实是数字的内置验证。

*   我也不会选择浮动金额，因为货币金额应该是准确的。您不想对每个结果进行四舍五入来显示它；如果你在错误的方向上偏离了一分钱怎么办？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:38:08.223

我选择十进制，但这可能取决于“金额”的应用。

*   这可能有助于理解浮点数和小数之间的差异：

[浮点数和十进制数据类型之间的区别](https://stackoverflow.com/questions/5150274/difference-between-float-and-decimal-data-type)

# c# - 基于字段值的自定义显示注释

> ID：14463209
> 
> 赞同：1
> 
> 时间：2013-01-22T16:22:53.243
> 
> 标签：c#, asp.net-mvc, razor, viewmodel

我有一个基于字段值的视图，必须显示自定义标签。

视图模型：

```
public class CreateAdViewModel
{
     public int Operation_Id { get; set; } 

     [Display(ResourceType = typeof(HeelpResources), Name = "AdViewModel_Price_Label")]
     public decimal Price { get; set; }
} 
```

看法：

```
 <div id="price">
        @Html.DisplayNameFor(m => m.Price)
        @Html.TextBoxFor(m => m.Price) €
        @Html.ValidationMessageFor(m => m.Price)
    </div> 
```

我要显示：

```
"Price: "  if Operation_Id = 1 (For the Sale of a Car) 
```

和

```
"Price Up To: "  if Operation_Id = 2 (For someone looking for a car until value XX €) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:47:33.323

2个属性怎么样：

```
public class CreateAdViewModel
{
    public int Operation_Id { get; set; }

    [Display(ResourceType = typeof(HelpResources), Name = "AdViewModel_Price_Label")]
    public decimal? Price { get; set; }

    [Display(ResourceType = typeof(HelpResources), Name = "AdViewModel_MaxPrice_Label")]
    public decimal? MaxPrice { get; set; }
} 
```

在视图内部：

```
<div id="price">
    @if (Operation_Id == 1)
    {
        @Html.DisplayNameFor(m => m.Price)
        @Html.TextBoxFor(m => m.Price) €
        @Html.ValidationMessageFor(m => m.Price)
    }
    else
    {
        @Html.DisplayNameFor(m => m.MaxPrice)
        @Html.TextBoxFor(m => m.MaxPrice) €
        @Html.ValidationMessageFor(m => m.MaxPrice)
    }
</div> 
```

# java - 在 glassfish 中更改 JSP 编译器版本

> ID：14463210
> 
> 赞同：4
> 
> 时间：2013-01-22T16:22:54.760
> 
> 标签：java, jakarta-ee, glassfish, glassfish-3

我正在部署时预编译我的 JSP 页面，但不断收到以下错误：

```
 Caused by: org.glassfish.deployment.common.DeploymentException: JSP
 Compilation Error: org.apache.jasper.JasperException: PWC6033: Error
 in Javac compilation for JSP

 PWC6199: Generated servlet error: diamond operator is not supported in
-source 1.5   (use -source 7 or higher to enable diamond operator 
```

有谁知道如何更改编译器版本和/或设置来解决这个问题？我已经指示 glassfish 像这样使用 JDK7 作为 java home；

```
asadmin set "server.java-config.java-home=/usr/java/jdk1.7.0_09" 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:48:02.367

您需要正确设置 的`compilerSourceVM`和`compilerTargetVM`属性`jsp-config`才能使其正常工作。[在这里查看更多详细信息](http://docs.oracle.com/cd/E19798-01/821-1750/beatx/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:58:38.823

[使用 Maven 或 Ant 插件（即jspc-maven-plugin ）](http://mojo.codehaus.org/jspc/jspc-maven-plugin/usage.html)预先构建 JSP 页面。您不仅可以在构建和暂存阶段获得调试问题的好处，还可以获得部署速度和消除挫败感。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T15:39:54.693

Aravind 的回答只是漏掉了一个例子。这是我的工作`WEB-INF\glassfish-web.xml`文件：

```
<glassfish-web-app>
   <jsp-config>
     <property name="compilerSourceVM" value="8" />
     <property name="compilerTargetVM" value="8" />
   </jsp-config>
</glassfish-web-app> 
```

我把这个文件放在战争里面。

# nsis - 如何在下方区域添加链接，靠近“后退”/“下一个”按钮

> ID：14463216
> 
> 赞同：0
> 
> 时间：2013-01-22T16:23:14.733
> 
> 标签：nsis

我想在安装程序窗口的左下角添加一个指向我们公司网站的链接，但不知道怎么做，因为它超出了可编辑区域（我使用 NSIS Dialog Designer 来设计我们的自定义页面）：

![在此处输入图像描述](../Images/c55db5d0c95cce3a5013e50069ba29d1.png)

我找到了如何在[此处](https://stackoverflow.com/questions/11443620/nsis-how-to-add-custom-button-to-left-bottom-corner-and-handle-its-click)添加按钮，但我需要一个链接。

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:47:28.250

此示例使用[链接器插件](http://nsis.sourceforge.net/Linker_plug-in)将品牌文本标签转换为链接控件。如果您需要品牌文本和 URL，则需要使用 Resource Hacker + 添加另一个标签，`ChangeUI`或者在运行时使用`System::Call user32::CreateWindowEx(...)`

```
BrandingText /TRIMRIGHT "Visit our homepage"

Function .onGuiInit
GetDlgItem $0 $HWNDPARENT 0x404
EnableWindow $0 1 ; Branding text control is usually disabled
Linker::link /NOUNLOAD $0 "http://www.example.com/"
FunctionEnd

Function .onGuiEnd
Linker::unload
FunctionEnd

Page Components
Page Instfiles

Section
SectionEnd 
```

# objective-c - 使用 performSelector: 访问 BOOL 属性

> ID：14463220
> 
> 赞同：4
> 
> 时间：2013-01-22T16:23:23.790
> 
> 标签：objective-c, cocoa, declared-property

我正在使用`performSelector:`返回一个`id`对象的 来调用其他几种方法。这些方法的返回类型实际上可以是`BOOL`、`int`或`NSDate`任何其他类型的对象。

如何判断返回的对象是否`performSelector:`为 a `BOOL`？我尝试将其转换为 a`NSNumber`等，但如果对象不是`BOOL`.

我有一个具有以下属性的类：

```
@property(retain,nonatomic) NSString* A;
@property(assign,nonatomic) BOOL B;
@property(retain,nonatomic) NSArray* C;
@property(assign,nonatomic) int64_t D; 
```

这个类是由框架生成的，所以我不能改变它。但我想循环`A`, `B`, `C`,`D`来调用每个属性并检索数据。但是，如您所见，返回类型可能会有所不同，我需要对此进行调整。

我正在做类似的事情：

```
SEL s = NSSelectorFromString(@"A");
id obj = [object performSelector:s];
//check if obj is BOOL
//do something with obj 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T18:22:25.287

如果您需要做的只是获取各种属性的值，请使用键值编码，它会自动包装标量类型`int`，`BOOL`例如`NSNumber`. 因此，您只需要如下一行：

```
id value = [object valueForKey:@"somePropertyName"]; 
```

否则，您可以通过调用目标对象提前检查返回类型`methodSignatureForSelector:`，但鉴于您描述的情况，这似乎是一堆不必要的工作。

# android - 运行android应用程序时textview无法显示

> ID：14463224
> 
> 赞同：-3
> 
> 时间：2013-01-22T16:23:51.153
> 
> 标签：android, textview

我是新手android，我通过使用演示代码来学习android，这是我的代码：

```
public class MainActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView txt = (TextView) findViewById(R.id.txtHello);
        txt.setText("Hello World!");
    }
} 
```

这是 XML 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView
    android:id="@+id/txtHello"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
</LinearLayout> 
```

但是当我运行这个项目时，我看不到这个文本视图，请大家帮帮我:(，我不知道我的问题是..？ ![在此处输入图像描述](../Images/8c057f773c7568d9f5e03af28512ff96.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:31:21.873

解决方案似乎很简单。

*   将鼠标指针移到绿色锁上
*   按住鼠标按钮
*   按住左键移动鼠标，直到绿色锁到达橙色圆圈。
*   如果您在 Eclipse 中按下绿色播放按钮，您的应用程序将显示在您现在看到的屏幕下方。（称为锁屏）

不要粗鲁，但最好在[http://developer.android.com](http://developer.android.com)上开始学习 Android 。你会发现它非常有用，尤其是[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:28:59.493

这是一个锁屏，只需交换解锁栏即可解锁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:27:14.207

只需尝试解锁手机，然后运行您的应用程序。

# asp.net - 如何使用 Windows/Web 服务来提醒用户有关事件？

> ID：14463225
> 
> 赞同：0
> 
> 时间：2013-01-22T16:23:52.473
> 
> 标签：asp.net, sql-server, web-services, webforms

在这里，我正在尝试创建一个警报系统，并且在我的一个数据表中存储了一些数据（日期/时间）。我只想在当前日期/时间等于存储时间时向用户发送电子邮件警报。有人请解释我这样做的方法。提前致谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T09:44:11.583

如果所有数据都存储在 SQL Server 数据库中，则可以使用 Jobs。示例： [如何通过 T-SQL 在 SQL Server 2008 中创建计划作业？](https://stackoverflow.com/questions/15391936/how-to-create-a-scheduled-job-in-sql-server-2008-via-t-sql)

# iphone - 选择行时如何将单元格的标题保存到 NSMutableArray？

> ID：14463229
> 
> 赞同：0
> 
> 时间：2013-01-22T16:24:17.057
> 
> 标签：iphone, ios, uitableview, nsmutablearray

我有一个表格，需要将所选单元格的标题保存到数组中。我的 NSMutableArray 被称为 dataArray 我正在使用这一行

```
 [categoryItemSelected addObject: dataArray]; 
```

保存所选项目。我希望将多个项目添加到数组中 - 用户应该能够选择尽可能多或尽可能少的行。每一个都将被添加到 dataArray 中。

这是我的表 didSelectAtIndexPath: 方法

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    int index = indexPath.row; id obj = [listOfCategories objectAtIndex:index];

    //This toggles the checkmark
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

        UIImage *image = [UIImage imageNamed:@"icon-tick.png"];

        UIButton *downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];

        [downloadButton setImage:image forState:UIControlStateNormal];
        [downloadButton setFrame:CGRectMake(0, 0, 19, 19)];
        [downloadButton setBackgroundColor:[UIColor clearColor]];
        [tableView cellForRowAtIndexPath:indexPath].accessoryView = downloadButton;

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        //This sets the array

    } else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;

        UIButton *downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [downloadButton setTitle:@"" forState:UIControlStateNormal];
        [downloadButton setFrame:CGRectMake(0, 0, 0, 0)];
        [tableView cellForRowAtIndexPath:indexPath].accessoryView = downloadButton;

    }

    // Save text of the selected cell:
    UITableViewCell *cellSelected = [tableView cellForRowAtIndexPath:indexPath];

    if ([cellSelected.textLabel.text isEqualToString:@"Food & Drinks"]) {
        NSString *valueToSave = cellSelected.textLabel.text;
        [[NSUserDefaults standardUserDefaults]
         setObject:valueToSave forKey:@"preferenceName"];

    }

    NSString *valueToSave = cellSelected.textLabel.text;
    [[NSUserDefaults standardUserDefaults]
     setObject:valueToSave forKey:@"preferenceName"];

    NSString *savedValue = [[NSUserDefaults standardUserDefaults]
                            stringForKey:@"preferenceName"];

    NSLog(@"savedValue %@", savedValue);

    NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    // Customize archiver here
    [archiver encodeObject:obj forKey:@"keyForYourArrayOfNSIndexPathObjects"];
    [archiver finishEncoding];
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:@"keyForYourArrayOfNSIndexPathObjects"];

    NSKeyedUnarchiver *unarchiver;
    unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:
                  [[NSUserDefaults standardUserDefaults] objectForKey:@"keyForYourArrayOfNSIndexPathObjects"]];
    // Customize unarchiver here
    categoryItemSelected = [unarchiver decodeObjectForKey:@"keyForYourArrayOfNSIndexPathObjects"];
    [unarchiver finishDecoding];
    if (categoryItemSelected == nil) {
        //If it isn't been created - then create new array

        [categoryItemSelected addObject: dataArray];

        NSLog(@"list of categories selected in dataArray %@", dataArray);

    }

    NSLog(@"list of categories selected in dataArray %@", dataArray);      

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:34:52.480

你有向后的参数。要添加此对象，`dataArray`请执行以下操作：

```
[dataArray addObject: categoryItemSelected]; 
```

您需要先检查 categoryItemSelected 是否为 nil，因为将 nil 对象插入数组会引发异常。

# algorithm - 或每个二进制与 0x20

> ID：14463230
> 
> 赞同：0
> 
> 时间：2013-01-22T16:24:19.953
> 
> 标签：algorithm, google-maps, math

我正在阅读[谷歌地图折线编码](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)的算法。我无法理解第 8 步：

```
 00001 11111 10000 01010 00010 00001

8\. OR each value with 0x20 if another bit chunk follows:

    100001 111111 110000 101010 100010 000001 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T16:28:52.133

为除最后一个值之外的每个值添加一个前导值。

从第 7 步开始：

`00001 11111 10000 01010 00010 00001`

现在把这些读作

`000001 011111 010000 001010 000010 000001`

ORing 与`0x20`给

`100001 111111 110000 101010 100010 000001`

这就是第 8 步中的内容。

（最后一个没有改变，因为它后面没有“位块”。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:28:40.403

设置除最后一个块之外的每个块的第一位

# javascript - 在最后一项之前添加一个节点到列表

> ID：14463234
> 
> 赞同：2
> 
> 时间：2013-01-22T16:24:24.553
> 
> 标签：javascript, jquery, html

我有一个列表，我想用 JQuery 在最后一个列表项之前添加一个列表项：

```
<ul id="myList">
    <li></li>
    <li></li>
    <li></li>
    <-- here i want to add the new one
    <li id="myLastLi"></li>
</ul> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:25:10.403

当你使用 jQuery 时，你可以简单地做

```
 $('<li/>', {text:'something'}).insertBefore('#myLastLi'); 
```

[示范](http://jsbin.com/ewixiz/1/)

请注意，您不必为 last 提供 ID `LI`，您可以在没有 id 的情况下执行此操作：

```
$('<li/>', {text:'something new'}).insertBefore('#myList li:last-child'); 
```

# c# - 创建一个由许多子类组成的类库

> ID：14463235
> 
> 赞同：3
> 
> 时间：2013-01-22T16:24:24.390
> 
> 标签：c#, .net, vb.net, oop

[这是我之前的问题Stop my "Utility" from give errors between different architectures](https://stackoverflow.com/questions/14381821/stop-my-utility-from-giving-errors-between-different-architectures)的后续内容，假设我正在尝试创建一个看起来像这样的类库：

```
- Class Utility (Parent class)
     ... Utility functions and methods
         (EG: Public Sub Sub1() )

  - Class Utility_Web
       ... Functions and methods only related to Web / Web-Controls
         (EG: Public Sub Web_Sub1() )

  - Class Utility_WinForms
       ... Functions and methods only related to Winforms / WinForm-Controls
         (EG: Public Sub WinForm_Sub1() ) 
```

现在，我想做的就是将`Utility`dll 添加为对我的任何项目的引用，并能够通过简单地输入来访问所有 3 个类中的函数和方法，例如：

```
Utility.Sub1
Utility.WebSub1
Utility.WinFormSub1 
```

换句话说，**不必键入**：

```
Utility.Utility_Web.Websub1 
```

并且使最终程序员不需要知道该实用程序的内部结构，他们可以仅使用`Utility.`命名法来引用它的所有方法/函数。

我该怎么做呢？这在哪里`NameSpaces`生效？`Inheritance`? `Partial Classes`? `Modules`而不是类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:32:58.380

如果要使用相同的类名访问这些方法，似乎没有任何理由将它们放在单独的类中。

如果您想将代码拆分到多个源文件以用于组织目的，您可以使用[部分类](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:35:19.173

这似乎是一个极好的实例，您希望使用部分类，所有类都使用相同的 Utility 命名空间。这将允许您使用 Utility.WebSub1 访问方法并减少一个步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:43:33.433

一个名为`Utility`的类从一开始就是一个坏类。它的用途是什么？它对你有什么帮助？有多少其他人将命名类实用程序？

为您的类命名，将它们关联到具有逻辑和功能意义的命名空间中。

假设您正在制作一组静态方法来帮助处理表示`Month`. 为什么不把方法放进去`Month`？如果您正在编写将数据从一种表示形式转换为另一种表示形式的方法，请以这种方式命名（即`MonthDataTranslation`）。

不要担心在您的客户或您的客户代码方面打字。Intellisense 和 C# using 语句在很大程度上缓解了这一问题，并且考虑到在名称错误、模糊不清的实用程序类和长而名称良好的类之间进行选择，我每次都会选择后者。

# c# - 无法访问 LayoutRoot：无法将类型“System.Windows.UIElement”隐式转换为“System.Windows.Controls.Grid”

> ID：14463236
> 
> 赞同：1
> 
> 时间：2013-01-22T16:24:37.810
> 
> 标签：c#, xaml, grid, windows-phone

我正在尝试使用这个简单的代码访问 LayoutRoot 孩子

```
using System.Windows.Controls;
using Microsoft.Phone.Controls;

namespace PhoneApp2
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            Grid grid = this.LayoutRoot.Children[1];
        }

    }
} 
```

但是得到这个错误：

> 无法将类型“System.Windows.UIElement”隐式转换为“System.Windows.Controls.Grid”。存在显式转换（您是否缺少演员表？）

XAML 代码

```
<phone:PhoneApplicationPage x:Class="PhoneApp2.MainPage"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                            xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            mc:Ignorable="d"
                            FontFamily="{StaticResource PhoneFontFamilyNormal}"
                            FontSize="{StaticResource PhoneFontSizeNormal}"
                            Foreground="{StaticResource PhoneForegroundBrush}"
                            SupportedOrientations="Portrait"
                            Orientation="Portrait"
                            shell:SystemTray.IsVisible="True">

  <!--LayoutRoot is the root grid where all page content is placed-->
  <Grid x:Name="LayoutRoot"
        Background="Transparent">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <StackPanel x:Name="TitlePanel"
                Grid.Row="0"
                Margin="12,17,0,28">
      <TextBlock Text="MY APPLICATION"
                 Style="{StaticResource PhoneTextNormalStyle}"
                 Margin="12,0" />
      <TextBlock Text="page name"
                 Margin="9,-7,0,0"
                 Style="{StaticResource PhoneTextTitle1Style}" />
    </StackPanel>

    <Grid x:Name="ContentPanel"
          Grid.Row="1"
          Margin="12,0,12,0">

    </Grid>
  </Grid>
</phone:PhoneApplicationPage> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:25:39.427

尝试这个

```
Grid grid = this.LayoutRoot.Children[1] as Grid; 
```

错误即将到来，因为`this.LayoutRoot.Children[1]`返回的对象`UIElement`是许多 WPF 控件的基类，例如`Grid`

您需要做的是显式转换`UIElement`为`Grid`using`as`

# javascript - 限制允许选中的复选框数量

> ID：14463238
> 
> 赞同：3
> 
> 时间：2013-01-22T16:24:40.813
> 
> 标签：javascript, jquery, forms

> **可能重复：**
> [在不重新加载页面的情况下计算选中的复选框数量？](https://stackoverflow.com/questions/1304715/count-the-number-of-checkboxes-selected-without-reloading-the-page)

我有一个订单表格，询问用户他们想要哪种类型的通行证（1-3 天），并让他们可以选择他们想要通行证的日期。

目前，当他们选择 3 天时，我的 JQuery 会为他们选择所有 3 个复选框，并在他们选择 1 天或 2 天时取消选择。但是，我想做的是：

当他们选择 2 日通行证时，最多只能检查 2 个框。当他们选择 1 天通行证时，它只允许他们选中 1 个框。

我对我的`validateDays()`函数需要做什么表示空白 - 运行此验证的最佳方式，或者这是否实际上是最佳途径。

我想到的每种方法都要求复选框具有相同的名称/ID - 但由于表单的其他部分（省略），不幸的是它们不能。

任何想法/指针？

**HEAD 部分 JavaScript：**

```
<script type="text/javascript">

function validateDays() {
    $('#matthewpeckham').find('input[type="checkbox"]').click(function () {
        var pass = parseInt($('input[name="other_1"]:checked').val(), 10) //1,2,3
        var days = $('#matthewpeckham').find('input[type="checkbox"]:checked').length;
        console.log(days, pass);
        if (days == pass) {
            $('#matthewpeckham').find('input[type="checkbox"]').not(':checked').prop('disabled', true);
        }
        else {
            $('#matthewpeckham').find('input[type="checkbox"]').not(':checked').prop('disabled', false);
        }
    })
    $('input[name="other_1"]').change(function () {
        $('#matthewpeckham').find('input[type="checkbox"]').prop({
            'checked': false,
            'disabled': false
        });
        if (parseInt($(this).val(), 10) == 3) $('#matthewpeckham').find('input[type="checkbox"]').prop({
            'checked': true,
            'disabled': false
        });
    });
}

</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" ></script>

<script type="text/javascript">
$(document).ready(function() {
    jQuery('#3daypass').click(function() {
        jQuery('#other_2 , #other_3 , #other_4').prop('checked', true);
    });
    jQuery('#2daypass , #1daypass').click(function() {
        jQuery('#other_2 , #other_3 , #other_4').prop('checked', false);
    });
});

</script> 
```

**正文部分 HTML：**

```
<input name="other_1" type="radio" value="3daypass" id="3daypass" onClick="validateDays();">
<input name="other_1" type="radio" value="2daypass" id="2daypass" onClick="validateDays();">
<input name="other_1" type="radio" value="1daypass" id="1daypass" onClick="validateDays();">

<input name="other_2" type="checkbox" id="other_2" value="Tues 5 Feb">
<input name="other_3" type="checkbox" id="other_3" value="Wed 6 Feb">
<input name="other_4" type="checkbox" id="other_4" value="Thurs 7 Feb"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:32:45.153

您需要检查验证功能中的复选框数量：

```
function validateDays() {
    var numBoxesChecked = $("input:checkbox:checked").length;

    if (document.getElementById("2daypass").checked && numBoxesChecked > 2) {
        // invalid
    }

    if (document.getElementById("1daypass").checked && numBoxesChecked > 1) {
        // invalid
    }
} 
```

请记住，可以绕过任何 javascript 验证，因此请确保您也在服务器上执行某种类型的验证。

另请注意，如果页面上有其他不相关的复选框，您可能需要更改`numBoxesChecked`选择器，例如将其限制为容器，例如

```
var numBoxesChecked = $('#someContainer').find("input:checkbox:checked").length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:49:12.257

这是一个 jQuery 解决方案：**[jsFiddle 示例](http://jsfiddle.net/j08691/GH6xJ/)**

```
$('input[type="checkbox"]').click(function () {
    var pass = parseInt($('input[name="other_1"]:checked').val(), 10) //1,2,3
    var days = $('input[type="checkbox"]:checked').length;
    console.log(days, pass);
    if (days == pass) {
        $('input[type="checkbox"]').not(':checked').prop('disabled', true);
    }
})
$('input[name="other_1"]').change(function () {
    $('input[type="checkbox"]').prop({
        'checked': false,
            'disabled': false
    });
    if (parseInt($(this).val(), 10) == 3) $('input[type="checkbox"]').prop({
        'checked': true,
            'disabled': false
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:34:12.337

jQuery 公开了一个[复选框选择器](http://api.jquery.com/checkbox-selector/)，在这里应该证明是有用的。

然后你的`validateDays`函数可以按照这些思路做一些事情

```
var checkedBoxes = jQuery(":checkbox:checked");
var numChecked = checkedBoxes.length;
...
    else if (document.getElementById("2daypass").checked) {
        if (numChecked > 2) { /*do something*/ }
    }
    else if (document.getElementById("1daypass").checked) {
        if (numChecked > 1) { /*do something*/ }
    }
    else {
        // DO NOTHING
    }
... 
```

但是，您可能会遇到“还原”该框的问题。你也许可以简单地做

```
jQuery(this).prop('checked', false) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:32:27.540

我无论如何都不是这方面的专家，但这是我在我的网站上所做的，你应该能够修改它以满足你的需要......只要记住给你的输入提供相同的类名。

```
<script type="text/javascript">
function Check() {
    var count = 0;
    var checkBoxes = document.getElementsByClassName('chkValidation');
    for (var index = 0; index < checkBoxes.length; index++) {
        if (checkBoxes[index].type == 'checkbox') {
            if (!checkBoxes[index].disabled) {
                count = checkBoxes[index].checked ? (count + 1) : count;
            }
        }
    }
    if (count > 3) {
        alert('Question two - please select a maximum of 3 sub questions to ask.');
        return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T16:37:54.450

您也可以使用如下函数动态地执行此操作：

```
$('.checkbox').on('click', function(e) {
  var num_checked = 0;

  $('.checkbox').each(function() {
    if ( $(this).prop('checked') ) num_checked++;
  });

  var max_checked = $('input[name="other_1"]:checked').val();

  if ( num_checked > max_checked ) {
    $(this).prop('checked', false);
  }
}); 
```

假设对您的 html 进行一些小的修改：

```
<input name="other_1" type="radio" value="3" id="3daypass">
<input name="other_1" type="radio" value="2" id="2daypass">
<input name="other_1" type="radio" value="1" id="1daypass">

<input class="checkbox" name="other_2" type="checkbox" id="other_2" value="Tues 5 Feb">
<input class="checkbox" name="other_3" type="checkbox" id="other_3" value="Wed 6 Feb">
<input class="checkbox" name="other_4" type="checkbox" id="other_4" value="Thurs 7 Feb"> 
```

演示：http: [//jsbin.com/osecep/1/](http://jsbin.com/osecep/1/)

这并不完美，您可能希望在更改天数时清除复选框，但这应该会让您走上正确的轨道。

# python - 在 OpenERP 7 中单击按钮时关闭向导

> ID：14463241
> 
> 赞同：1
> 
> 时间：2013-01-22T16:24:48.960
> 
> 标签：python, openerp, odoo

我从 OpenERP 7 中的按钮打开向导。但是当单击向导的**计算**按钮时，我的向导关闭了，但我不想在单击**计算**按钮时关闭向导，而不是在单击向导的关闭按钮时**关闭**向导。我正在使用 OpenERP 7。

```
class test_pass_student(osv.osv_memory):
    _name = 'test.pass.student'
    _column ={  
        'pass_id': fields.many2one('pass.student', 'Passed'),
        'student_id':fields.many2one('student.student', 'Student'),
    }

test_pass_student()

def _reopen(self, res_id, model):
    return {'type': 'ir.actions.act_window',
            'view_mode': 'form',
            'view_type': 'form',
            'res_id': res_id,
            'res_model': self._name,
            'target': 'new',
            'context': {
                'default_model': model,
            },
    }

class pass_student(osv.osv_memory):
    _name = 'pass.student'

    _columns = {    
        'student_id':fields.many2one('student.student', 'Student'),
        'lines': fields.one2many('test.pass.student','pass_id', 'Passed students'),
    }

    def add_student(self, cr, uid, ids,context=None):
        lines_obj = self.pool.get('test.pass.student')
        for record in self.browse(cr,uid,ids,context):
            for line in record.student_id.scores:
                    if line.pass_score > 50:
                        lines_obj.create(cr,uid,{'pass_id': record.id,'student_id':line.student_id.id})

            return _reopen(self, record.id, record._model)

pass_student() 
```

沉S选择第一个学生检查，如果他/她的分数大于50则添加one2many，然后再次检查另一个学生，同样的事情再次重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:06:06.227

要关闭按钮上的向导，请单击在视图表单 xml 上添加此代码：

```
<button string="Cancel" class="oe_link" special="cancel"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:29:37.933

从 OpenERP 6.1（因此在 7.0 中也是如此） ，向导按钮（带有 ）的默认行为`type="object`是立即关闭向导弹出窗口。按钮调用的方法可以返回一个将被执行的动作定义字典。当您不想关闭向导时，通常是因为您有几个步骤。由于多步骤向导通常具有不同的表单视图，因此它们的按钮方法只是返回操作以使用下一步的视图打开相同的向导记录（如果需要再次显示，也可以是相同的视图）。

您可以在官方插件源代码中找到示例，例如在[模块](http://bazaar.launchpad.net/~openerp/openobject-addons/7.0/view/head:/email_template/wizard/mail_compose_message.py#L25)[修改](http://bazaar.launchpad.net/~openerp/openobject-addons/7.0/view/head:/email_template/wizard/mail_compose_message.py#L25)`mail.compose.message`的向导中，它使用类似的技巧重新打开自身。[`email_template`](http://bazaar.launchpad.net/~openerp/openobject-addons/7.0/view/head:/email_template/wizard/mail_compose_message.py#L25)

这个[问题](https://stackoverflow.com/questions/13235220/openerp-context-in-act-window/13238243#13238243)和[另一个](https://stackoverflow.com/questions/10671025/osv-methods-return-statement)问题也可能包含有用的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:08:52.937

无需编写单独的方法来再次打开向导。您可以只获取对象引用并将其与视图 ID 一起返回。例如。

```
def add_student(self, cr, uid, ids,context=None):
    model_data_obj = self.pool.get('ir.model.data')
    lines_obj = self.pool.get('test.pass.student')
    for record in self.browse(cr,uid,ids,context):
        for line in record.student_id.scores:
                if line.pass_score > 50:
                    lines_obj.create(cr,uid,{'pass_id': record.id,'student_id':line.student_id.id})
    view_rec = model_data_obj.get_object_reference(cr, uid, 'pass_student', 'add_student_form_view_id')
    view_id = view_rec and view_rec[1] or False
    return {
       'view_type': 'form',
       'view_id' : [view_id],
       'view_mode': 'form',
       'res_model': 'pass.student',
       'type': 'ir.actions.act_window',
       'target': 'new',
       'context': context
    } 
```

希望对您有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T14:19:39.307

我回答自己，在向导中，如果我放置按钮类型对象而不是按钮类型工作流，​​并且那里触发 wf 工作（不关闭），但这是正确的路径吗？

如果有人需要这是我的对象按钮事件代码（用于我的picking.import.wizard 向导）：

```
def signal_import_load_2(self, cr, uid, ids, context=None):
    import netsvc

    wf_service = netsvc.LocalService("workflow")
    wf_service.trg_validate(uid, 'picking.import.wizard', ids[0], 'signal_import_load', cr)

    view_id = self.pool.get('ir.ui.view').search(cr,uid,[('model','=','picking.import.wizard'), ('name','=','Wizard import picking from CSV')])

    return {
         'type': 'ir.actions.act_window',
         'name': "Import",
         'res_model': 'picking.import.wizard',
         'res_id': ids[0],
         'view_type': 'form',
         'view_mode': 'form',
         'view_id': view_id,
         'target': 'new',
         'nodestroy': True,
           } 
```

# youtube - 通过 YouTube API 管理 YouTube 注释

> ID：14463242
> 
> 赞同：17
> 
> 时间：2013-01-22T16:24:49.763
> 
> 标签：youtube, youtube-api

有没有办法使用 YouTube API 管理（创建、更新）注释？

我在 YouTube 上有几百个视频，我想添加注释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T01:24:28.470

[在https://code.google.com/p/gdata-issues/issues/detail?id=558](https://code.google.com/p/gdata-issues/issues/detail?id=558)跟踪到的注释的 API 访问现有功能请求

我建议对该功能请求“加注星标”，以便收到任何更新的通知。

**更新**：可以更新 InVideo 编程注释，但仅限于那些类型。请参阅[http://www.youtube.com/watch?v=rqtuSRe3QLo](http://www.youtube.com/watch?v=rqtuSRe3QLo)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-20T21:21:36.560

不，这不受支持。

[YouTube Data API v3](https://developers.google.com/youtube/v3/docs/channels/update)允许您创建 Invideo 编程注释和[水印](https://developers.google.com/youtube/v3/docs/watermarks/set)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:07:47.640

除非它刚刚问世，否则还没有记录在案的方法可以通过 API 对注释进行任何操作。不过，如果这种支持不会很快出现，我会感到惊讶。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-27T17:34:39.707

有时注释会激怒用户，但有时有助于指示重定向到其他主题。

注意：YouTube 已停产注释，因为它无法在移动设备上运行，第二个原因是 70% 的用户在移动设备上观看 YouTube 视频，因此为了更好地服务 youtube 做出了此类决定。

请观看此视频以获得完整的清晰度：[https ://youtu.be/Awl1TTUSY78](https://youtu.be/Awl1TTUSY78)

# c++ - 读取文件时获取行与读取整个文件然后根据换行符拆分

> ID：14463244
> 
> 赞同：13
> 
> 时间：2013-01-22T16:24:52.793
> 
> 标签：c++

我现在想处理硬盘上文件的每一行。将文件作为一个整体加载然后根据换行符拆分（使用 boost）更好，还是使用更好`getline()`？我的问题是`getline()`在调用时读取单行（导致多个硬盘访问）还是读取整个文件并逐行给出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:33:14.400

`getline`将`read()`在 C 库的深处作为系统调用调用。具体调用多少次，调用方式取决于C库设计。但很可能一次读取一行与整个文件没有明显区别，因为底层的操作系统一次将读取（至少）一个磁盘块，并且很可能至少读取一个“页面“（4KB），如果不是更多的话。

此外，除非您在阅读字符串后几乎什么都不做（例如，您正在编写诸如“grep”之类的内容，所以主要只是阅读以查找字符串），一次读取一行的开销不太可能是您花费的大部分时间。

但是“一次性加载整个文件”有几个不同的问题：

1.  在您阅读整个文件之前，您不会开始处理。
2.  您需要足够的内存来将整个文件读入内存 - 如果文件大小为几百 GB，该怎么办？你的程序会失败吗？

不要尝试优化某些东西，除非您使用分析来证明它是您的代码运行缓慢的部分原因。你只会给自己制造更多的问题。

编辑：所以，我写了一个程序来衡量这个，因为我认为这很有趣。

结果肯定很有趣——为了公平起见，我创建了三个每个 1297984192 字节的大文件（通过将所有源文件复制到一个包含十几个不同源文件的目录中，然后将该文件复制几次以“相乘”它，直到运行测试花费超过 1.5 秒，这是我认为您需要运行多长时间以确保时间不会太容易受到随机“网络数据包进入”或其他一些外部影响而导致超时过程）。

我还决定按流程衡量系统和用户时间。

```
$ ./bigfile
Lines=24812608
Wallclock time for mmap is 1.98 (user:1.83 system: 0.14)
Lines=24812608
Wallclock time for getline is 2.07 (user:1.68 system: 0.389)
Lines=24812608
Wallclock time for readwhole is 2.52 (user:1.79 system: 0.723)
$ ./bigfile
Lines=24812608
Wallclock time for mmap is 1.96 (user:1.83 system: 0.12)
Lines=24812608
Wallclock time for getline is 2.07 (user:1.67 system: 0.392)
Lines=24812608
Wallclock time for readwhole is 2.48 (user:1.76 system: 0.707) 
```

这是读取文件的三个不同函数（当然，还有一些代码可以测量时间和其他内容，但是为了减小这篇文章的大小，我选择不发布所有这些内容 - 我玩弄了排序看看是否这有什么不同，所以上面的结果与这里的函数顺序不同）

```
void func_readwhole(const char *name)
{
    string fullname = string("bigfile_") + name;
    ifstream f(fullname.c_str());

    if (!f) 
    {
        cerr << "could not open file for " << fullname << endl;
        exit(1);
    }

    f.seekg(0, ios::end);
    streampos size = f.tellg();

    f.seekg(0, ios::beg);

    char* buffer = new char[size];
    f.read(buffer, size);
    if (f.gcount() != size)
    {
        cerr << "Read failed ...\n";
        exit(1);
    }

    stringstream ss;
    ss.rdbuf()->pubsetbuf(buffer, size);

    int lines = 0;
    string str;
    while(getline(ss, str))
    {
        lines++;
    }

    f.close();

    cout << "Lines=" << lines << endl;

    delete [] buffer;
}

void func_getline(const char *name)
{
    string fullname = string("bigfile_") + name;
    ifstream f(fullname.c_str());

    if (!f) 
    {
        cerr << "could not open file for " << fullname << endl;
        exit(1);
    }

    string str;
    int lines = 0;

    while(getline(f, str))
    {
        lines++;
    }

    cout << "Lines=" << lines << endl;

    f.close();
}

void func_mmap(const char *name)
{
    char *buffer;

    string fullname = string("bigfile_") + name;
    int f = open(fullname.c_str(), O_RDONLY);

    off_t size = lseek(f, 0, SEEK_END);

    lseek(f, 0, SEEK_SET);

    buffer = (char *)mmap(NULL, size, PROT_READ, MAP_PRIVATE, f, 0);

    stringstream ss;
    ss.rdbuf()->pubsetbuf(buffer, size);

    int lines = 0;
    string str;
    while(getline(ss, str))
    {
        lines++;
    }

    munmap(buffer, size);
    cout << "Lines=" << lines << endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:26:04.587

操作系统将读取整个数据块（取决于磁盘的格式化方式，通常一次 4-8k）并为您做一些缓冲。让操作系统为您处理它，并以对您的程序有意义的方式读取数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T16:39:00.940

fstreams 被合理地缓冲。操作系统对硬盘的底层访问被合理缓冲。硬盘本身有合理的缓冲。如果您逐行读取文件，您肯定*不会触发更多的硬盘访问。*或者一个字符一个字符，就此而言。

所以没有理由将整个文件加载到一个大缓冲区并在该缓冲区上工作，因为它已经*在*一个缓冲区中。而且通常也没有理由一次缓冲一行。为什么要分配内存来缓冲已经在 ifstream 中缓冲的字符串中的内容？如果可以的话，直接在流上工作，不要费心将所有东西从一个缓冲区扔到下一个缓冲区两次或更多次。除非它支持可读性和/或您的分析器告诉您磁盘访问会显着减慢您的程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T16:32:07.817

如果可以在内存中容纳所有数据，则最好获取所有数据，因为每当您请求 I/O 时，您的程序都会失去处理并进入等待 Q。

![在此处输入图像描述](../Images/9b34bce95c7ea5153a797b69007f82af.png)

但是，如果文件大小很大，那么最好一次读取处理中所需的尽可能多的数据。因为较大的读取操作将花费大量时间来完成，然后是较小的。cpu 进程切换时间比整个文件读取时间要小得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-22T16:29:36.673

我相信 C++ 习惯用法是逐行读取文件，并在读取文件时创建基于行的容器。很可能 iostreams ( `getline`) 将被充分缓冲，以至于您不会注意到显着差异。

但是，对于非常大的文件，您可以通过读取较大的文件块（而不是一次读取整个文件）并在找到换行符时拆分内部来获得更好的性能。

如果您想具体了解哪种方法更快以及速度快多少，则必须分析您的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T16:27:15.590

如果它是磁盘上的一个小文件，那么读取整个文件并逐行解析它可能比一次读取一行更有效——这需要大量的磁盘访问。

# backbone.js - 将backbone.collection 映射到特定属性

> ID：14463257
> 
> 赞同：0
> 
> 时间：2013-01-22T16:25:35.997
> 
> 标签：backbone.js, collections

我正在尝试使用backbone.js 构建一个基本结构。我的问题是服务器不会直接返回 json 格式的对象数组，而是返回一个嵌入了所需对象数组的对象：

```
{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 2}, "objects": [{...},{...} {...}]} 
```

在这种情况下，我在我的集​​合中真正想要的是“对象”属性。因此，当我尝试构建主干集合时，我不确定是否应该迭代并手动添加它们，或者我可以将其直接映射到对象的 objects 属性。

希望那是可以理解的......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:28:29.307

使用[collection.parse(response)](http://backbonejs.org/#Collection-parse)函数：

> 每当服务器返回集合的模型时，Backbone 都会在 fetch 中调用 parse。该函数传递原始响应对象，并应返回要添加到集合中的模型属性数组。默认实现是无操作的，只是通过 JSON 响应。如果您需要使用预先存在的 API 或更好的响应命名空间，请覆盖此选项。

# jquery - 如何移动 jQuery 移动滑块控件的输入字段？

> ID：14463258
> 
> 赞同：1
> 
> 时间：2013-01-22T16:25:37.507
> 
> 标签：jquery, html, css, jquery-mobile

我正在尝试将 jQuery mobile 滑块的输入字段移动到控件的右侧而不是左侧（默认）。我还想在滑块控件的任一侧包含增加和减少按钮。所有这些都应该内联显示，即在一个跨越显示宽度的 div 中。

我正在执行以下操作来分离并附加输入字段：

```
var inputField = $('input#slider-1').detach();
inputField.appendTo('#more'); 
```

但是滑块控件被压扁到无法使用的地步。完整代码[在这里](http://jsfiddle.net/codecowboy/Bq2dn/)或[这里](http://jsbin.com/udiwih/1/edit)

如何在不使用固定像素值的情况下覆盖滑块的宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:02:18.047

将输入定位在右侧的要点是正确选择滑块

```
$('#control div.ui-slider').insertBefore('#slider-1'); 
```

要覆盖滑块的宽度，您可以只使用百分比值

```
#less { float:left; }
#control { float:left; width: 50%; }
#more { float:left; } 
```

修改后[的 JSFiddle](http://jsfiddle.net/Bq2dn/91/)

此外，您可以删除`#inner-div`和`#test`。没有这些它仍然可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T06:55:33.217

检查此更新演示[http://jsfiddle.net/yeyene/Bq2dn/99/](http://jsfiddle.net/yeyene/Bq2dn/99/)

我添加了脚本以根据增加/减少按钮移动滑块处理程序。

```
$('#increase').live('tap',function(e){
    var slider = $("#slider-1");
    value = parseInt(slider.val(),10);            
    slider.val(value+1);
    slider.slider('refresh');
    slider.attr('style', 'left:'+(value+1)+'%;');
});

$('#decrease').live('tap',function(e){
    var slider = $("#slider-1");
    value = parseInt(slider.val(),10);
    slider.val(value-1);
    slider.slider('refresh');         
    slider.attr('style', 'left:'+(value-1)+'%;');
});

$('#control div.ui-slider').insertBefore('#slider-1'); 
```

# php - glob() php函数数组格式

> ID：14463269
> 
> 赞同：1
> 
> 时间：2013-01-22T16:26:13.717
> 
> 标签：php, arrays, format, glob

也许我错过了一些东西，但实际上，我找不到解决方案。

我想更改从`glob`函数中获得的数组的格式。

这就是我的代码现在的样子。

```
$my_files = glob('*.php'); 
```

结果是一个数组：

```
array(
    '0' => 'about.php',
    '1' => 'admin-ajax.php',
    '2' => 'admin-footer.php',
    '3' => 'admin-functions.php',
    '4' => 'admin-header.php',
    '5' => 'admin-post.php',
    '6' => 'admin.php',
) 
```

**现在这正是我想要的**（*分别用每个数组的文本更改数字*）：

```
array(
    'about.php'         => 'about.php',
    'admin-ajax.php'    => 'admin-ajax.php',
    'admin-footer.php'  => 'admin-footer.php',
    'admin-functions.php' => 'admin-functions.php',
    'admin-header.php'  => 'admin-header.php',
    'admin-post.php'    => 'admin-post.php',
    'admin.php'         => 'admin.php',
) 
```

我需要将其作为数组以这种方式使用变量包含它：

```
array(
    'name'      => 'Intern download file name',
    'id'        => $prefix .'blog_post_intern_url',
    'type'      => 'select',
    'options'   => $my_files,
), 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:27:42.740

```
$arrayWithKeysEqualValues = array_combine($my_files, $my_files); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:28:22.110

尝试 array_combine

```
$newArray = array_combine($originalArray, $originalArray); 
```

# c# - 具有间接级别的 DataTextField？

> ID：14463272
> 
> 赞同：0
> 
> 时间：2013-01-22T16:26:32.950
> 
> 标签：c#, asp.net

我正在尝试这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
   Group g = SecurityManager.GetGroup("Programmers");

   IEnumerable<EmployeGroup> emps = 
       SecurityManager.GetEmployeesByGroup(g.GroupID);
   ListBox1.DataSource = emps;
   ListBox1.DataTextField = "Employee.EmployeName";
   ListBox1.DataBind();
} 
```

在一个`EmployeGroup`里面有一个`Employee`和一个组。我想显示员工的`EmployeName`成员。

有没有什么方法可以做到这一点：对于每个员工。添加到列表框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:04:07.583

你有几个选择。您可以扩展 Employee 类并引入一个名为 EmployeeNameAndId 的新属性

```
public string EmployeeNameAndId 
{ 
       get 
       { 
          return String.Format("{0} ({1})", EmployeeName, EmployeeId); 
       }
} 
```

另一种选择是覆盖 OnDataBinding 事件并在那里连接两个属性。我不推荐这个；除其他原因外，这是糟糕的封装，但我希望您了解该选项。

最后一个选项是从您的查询中创建一个中间数据源并绑定到该数据源：

```
var employees = SecurityManager.GetEmployeesByGroup(g.GroupID).Select(e => new { EmployeeNameAndId = e.EmployeeName + " (" + e.EmployeeId + ")"});

ListBox1.DataSource = employees ;
ListBox1.DataTextField = "EmployeeNameAndId";
ListBox1.DataBind(); 
```

# java - 如何用一副牌处理 4 手 10 张牌？

> ID：14463275
> 
> 赞同：0
> 
> 时间：2013-01-22T16:26:43.787
> 
> 标签：java, shuffle, bluej, playing-cards

所以我有一套牌的代码，但我不知道如何制作另一个类来处理每手 10 张牌的 4 手牌。其他班级应在屏幕上以文字形式打印 4 手牌，每手 10 张随机牌。有人可以向我展示如何完成此操作的代码吗？我也在使用 blueJ。

下面是我的甲板代码：

```
public class Card 
{
public static void main(String[] args) 
{
    String[] suit = { "Clubs", "Diamonds", "Hearts", "Spades" };
    String[] rank =     { "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King", "Ace" };

    int SUITS = suit.length;
    int RANKS = rank.length;
    int N = SUITS * RANKS;

    // initialize deck
    String[] deck = new String[N];
    for (int i = 0; i < RANKS; i++) {
        for (int j = 0; j < SUITS; j++) {
            deck[SUITS*i + j] = rank[i] + " of " + suit[j];
        }
    }

    // shuffle the deck
    for (int i = 0; i < N; i++) {
        int r = i + (int) (Math.random() * (N-i));
        String t = deck[r];
        deck[r] = deck[i];
        deck[i] = t;
    }

    for (int i = 0; i < N; i++) {
        System.out.println(deck[i]);
    }
   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:38:46.260

本着游戏的精神，让我们创建一个可以处理的层次结构。最大的范围是游戏，它将动作委托给其他类。我们还将有 3 个类别：Deck、Dealer、Player。

一个游戏会有一个经销商，一个玩家的 ArrayList

然后，游戏可以告诉庄家创建和洗牌。您可以调用一个 dealCards，将 Players 作为参数传递给经销商，经销商可以根据玩家的数量，为他们提供 Deck 中的下一个元素，并从 Deck 中删除该元素。

一旦你发完所有的牌，游戏就可以告诉玩家展示他们的手，打印结果。

```
public Dealer{
    private Deck deck;

    ....

    public void shuffleDeck(){...}
    public void dealCards(List<Player> players){ ...}
}

public Player{
    private List<String> hand;

    ....

    public void addToHand(String card){....}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:51:23.523

您的 Card / Deck 类应分为两个类。

Card 类将描述一张卡片。

```
public class Card {

    private String rank;
    private String suit;

    public Card(String rank, String suit) {
        this.rank = rank;
        this.suit = suit;
    }

    public String getRank() {
        return rank;
    }

    public String getSuit() {
        return suit;
    }

    @Override
    public String toString() {
        return rank + " of " + suit;
    }

} 
```

Deck 类描述一副纸牌。

```
public class Deck {

    private String[]    rank    = { "2", "3", "4", "5", "6", "7", "8", "9",
            "10", "Jack", "Queen", "King", "Ace" };
    private String[]    suit    = { "Clubs", "Diamonds", "Hearts", "Spades" };

    private Card[]      cards;

    public Deck() {
        cards = new Card[suit.length * rank.length];
        for (int i = 0; i < rank.length; i++) {
            for (int j = 0; j < suit.length; j++) {
                cards[suit.length * i + j] = new Card(rank[i], suit[j]);
            }
        }
    }

    public Card[] shuffleDeck() {
        for (int i = 0; i < cards.length; i++) {
            int r = (int) (Math.random() * (cards.length - 1));
            Card t = cards[r];
            cards[r] = cards[i];
            cards[i] = t;
        }
        return cards;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < cards.length; i++) {
            builder.append(cards[i].toString());
            builder.append(System.getProperty("line.separator"));
        }
        return builder.toString();
    }
} 
```

在您了解这两个类如何协同工作之前，没有必要介绍其他类。

Java 或任何面向对象的计算机语言的重点是将您的问题分解为更小的类，每个类都做一件事并且做得很好。

# android - Android：Facebook 3.0 SDK 请求 Galaxy S3 应用程序权限

> ID：14463276
> 
> 赞同：1
> 
> 时间：2013-01-22T16:26:45.653
> 
> 标签：android, facebook, galaxy

我正在开发一个使用最新 Facebook SDK (3.0) 的 Android 应用程序 - 在 Galaxy S3 上进行测试时；如果我通过 Facebook 从我的应用程序共享，Facebook 将启动，我会收到提示，允许三星的 Galaxy S3 FB 应用程序，而不是我自己的应用程序。其他 Android 设备上似乎不存在此问题。

# python - 如何禁用 Python 警告？

> ID：14463277
> 
> 赞同：654
> 
> 时间：2013-01-22T16:26:49.193
> 
> 标签：python, suppress-warnings

我正在处理使用该[`warnings`](https://docs.python.org/3/library/warnings.html)库引发很多（目前对我而言）无用警告的代码。阅读（/扫描）文档我只找到了一种[禁用单个功能警告的方法](https://docs.python.org/3/library/warnings.html#temporarily-suppressing-warnings)。但我不想更改太多代码。

有没有类似的标志`python -no-warning foo.py`？

你会推荐什么？

* * *

## 回答 #1

> 赞同：851
> 
> 时间：2013-01-22T16:31:00.393

查看 Python 文档的[Temporarily Suppressing Warnings](https://docs.python.org/3/library/warnings.html#temporarily-suppressing-warnings)部分：

> 如果您使用的代码您知道会引发警告，例如不推荐使用的函数，但不想看到警告，则可以使用[`catch_warnings`](https://docs.python.org/3/library/warnings.html#warnings.catch_warnings)上下文管理器抑制警告：
> 
> ```
> import warnings
> 
> def fxn():
>     warnings.warn("deprecated", DeprecationWarning)
> 
> with warnings.catch_warnings():
>     warnings.simplefilter("ignore")
>     fxn() 
> ```

我不宽恕它，但你可以用这个来**压制所有警告**：

```
import warnings
warnings.filterwarnings("ignore") 
```

前任：

```
>>> import warnings
>>> def f():
...     print('before')
...     warnings.warn('you are warned!')
...     print('after')
...
>>> f()
before
<stdin>:3: UserWarning: you are warned!
after
>>> warnings.filterwarnings("ignore")
>>> f()
before
after 
```

* * *

## 回答 #2

> 赞同：549
> 
> 时间：2013-01-22T16:28:31.550

有[`-W`选项](https://docs.python.org/3/using/cmdline.html#cmdoption-w)。

```
python -W ignore foo.py 
```

* * *

## 回答 #3

> 赞同：145
> 
> 时间：2013-07-15T12:59:26.220

您还可以定义环境变量（2010 年的新功能 - 即 python 2.7）

```
export PYTHONWARNINGS="ignore" 
```

像这样测试：*默认*

```
$ export PYTHONWARNINGS="default"
$ python
>>> import warnings
>>> warnings.warn('my warning')
__main__:1: UserWarning: my warning
>>> 
```

*忽略*警告

```
$ export PYTHONWARNINGS="ignore"
$ python
>>> import warnings
>>> warnings.warn('my warning')
>>> 
```

对于**弃用警告**，请查看[how-to-ignore-deprecation-warnings-in-python](https://stackoverflow.com/questions/879173/how-to-ignore-deprecation-warnings-in-python)

复制到这里...

从[`warnings`模块](https://docs.python.org/3/library/warnings.html)的文档：

```
 #!/usr/bin/env python -W ignore::DeprecationWarning 
```

如果您在 Windows 上：`-W ignore::DeprecationWarning`作为参数传递给 Python。最好通过强制转换为[int](http://docs.python.org/3.0/library/functions.html#int)来解决问题。

（请注意，在 Python 3.2 中，默认情况下会忽略弃用警告。）

或者：

```
import warnings

with warnings.catch_warnings():
    warnings.filterwarnings("ignore", category=DeprecationWarning)
    import md5, sha

yourcode() 
```

现在你仍然得到所有其他`DeprecationWarning`的，但不是由以下原因引起的：

```
import md5, sha 
```

* * *

## 回答 #4

> 赞同：94
> 
> 时间：2018-12-13T14:07:53.680

如果您不想要复杂的东西，那么：

```
import warnings
warnings.filterwarnings("ignore", category=FutureWarning) 
```

* * *

## 回答 #5

> 赞同：89
> 
> 时间：2018-02-06T18:48:40.087

这是一个老问题，但是[PEP 565](https://www.python.org/dev/peps/pep-0565)中有一些更新的指导，如果你正在编写一个你应该使用的 python 应用程序，可以关闭所有警告：

```
import sys
import warnings

if not sys.warnoptions:
    warnings.simplefilter("ignore") 
```

推荐这样做的原因是它默认关闭所有警告，但至关重要的是允许它们通过`python -W`命令行或`PYTHONWARNINGS`.

* * *

## 回答 #6

> 赞同：51
> 
> 时间：2021-06-16T20:36:53.360

不复杂，就用这两行

```
import warnings
warnings.filterwarnings('ignore') 
```

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2019-05-15T06:25:34.770

如果您知道您通常遇到的无用警告是什么，您可以通过消息对其进行过滤。

```
import warnings

#ignore by message
warnings.filterwarnings("ignore", message="divide by zero encountered in divide")

#part of the message is also okay
warnings.filterwarnings("ignore", message="divide by zero encountered") 
warnings.filterwarnings("ignore", message="invalid value encountered") 
```

* * *

## 回答 #8

> 赞同：32
> 
> 时间：2021-06-29T20:13:14.510

当所有其他方法都失败时，请使用：[https ://github.com/polvoazul/shutup](https://github.com/polvoazul/shutup)

`pip install shutup`

然后添加到代码的顶部：

```
import shutup; shutup.please() 
```

* * *

*免责声明：*我是该存储库的所有者。我在第五次需要这个之后写了它，但找不到任何简单的东西。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2021-02-26T10:18:11.770

```
import sys
if not sys.warnoptions:
    import warnings
    warnings.simplefilter("ignore") 
```

在处理文件或添加新功能以重新启用警告时将忽略更改为默认值。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-05-25T21:32:35.923

我意识到这仅适用于某些情况，但在`numpy`我真正喜欢使用的上下文中[`np.errstate`](https://numpy.org/doc/stable/reference/generated/numpy.errstate.html)：

```
np.sqrt(-1) 
```

```
__main__:1: RuntimeWarning: invalid value encountered in sqrt
nan 
```

但是，使用`np.errstate`：

```
with np.errstate(invalid='ignore'):
    np.sqrt(-1) 
```

```
nan 
```

最好的部分是您只能将其应用于非常特定的代码行。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-01-13T15:54:05.467

* * *

## 更多pythonic方式来忽略**警告**

* * *

由于 ' *warning.filterwarnings()* ' 没有抑制所有警告，我建议你使用以下方法：

```
import logging

for name in logging.Logger.manager.loggerDict.keys():
    logging.getLogger(name).setLevel(logging.CRITICAL)

#rest of the code starts here... 
```

**或者，**

如果您只想抑制一组*特定*的警告，那么您可以像这样过滤：

```
import logging

for name in logging.Logger.manager.loggerDict.keys():
    if ('boto' in name) or ('urllib3' in name) or ('s3transfer' in name) or ('boto3' in name) or ('botocore' in name) or ('nose' in name):
            logging.getLogger(name).setLevel(logging.CRITICAL)

#rest of the code starts here... 
```

* * *

## 回答 #12

> 赞同：-9
> 
> 时间：2017-01-23T02:43:40.967

警告通过 stderr 输出，简单的解决方案是将“2> /dev/null”附加到 CLI。这对许多用户来说很有意义，例如那些使用 centos 6 的用户，他们坚持使用 python 2.6 依赖项（如 yum），并且各种模块在其覆盖范围内被推到灭绝的边缘。

对于涉及 SNI 等的密码学尤其如此。可以使用 proc 更新 2.6 以进行 HTTPS 处理： [https ://urllib3.readthedocs.io/en/latest/user-guide.html#ssl-py2](https://urllib3.readthedocs.io/en/latest/user-guide.html#ssl-py2)

警告仍然存在，但是您想要的所有内容都已向后移植。尽管 stdout 内容本身不会改变，但 stderr 的重定向将为您提供干净的终端/shell 输出。

回应 FriendFX。第一 (1) 句以通用解决方案直接回应问题。第二 (2) 句考虑了引用的锚点重新“禁用警告”，这是特定于 python 2.6 的，并指出 RHEL/centos 6 用户不能直接不使用 2.6。尽管没有引用具体警告，但第二 (2) 段回答了我最常遇到的 2.6 问题，即密码学模块中的缺点以及如何“现代化”（即升级、反向移植、修复）python 的 HTTPS/TLS 性能. 第三 (3) 段仅解释了使用重定向和升级模块/依赖项的结果。

# android - Android：以编程方式将 id 添加到操作栏项

> ID：14463285
> 
> 赞同：4
> 
> 时间：2013-01-22T16:27:13.223
> 
> 标签：android, actionbarsherlock

我试图为actionbarsherlock的一个项目设置一个id，但我得到这个“不能在原始类型void上调用setId（int）”

```
 menu.add("new")
        .setIcon(R.drawable.icon_1)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM)
        .setId(R.id.newone); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-22T17:02:17.277

你有两个问题，一个[`setShowAsAction`](http://developer.android.com/reference/android/view/MenuItem.html#setShowAsAction%28int%29)返回`void`，所以你不能链接另一个调用它。

二`MenuItem`是没有`setID`办法。创建项目后，您无法更改 ID。要设置 ID，您必须在[2](http://developer.android.com/reference/android/view/Menu.html#add%28int,%20int,%20int,%20java.lang.CharSequence%29)`add`的 [ method] 中进行，`Menu`

```
menu.add("new", myItemId, myOrder, "TEXT" )
        .setIcon(R.drawable.icon_1, )
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM); 
```

# ruby-on-rails-3 - 当控制器中没有实例变量时如何测试respond_with

> ID：14463287
> 
> 赞同：1
> 
> 时间：2013-01-22T16:27:15.320
> 
> 标签：ruby-on-rails-3, functional-testing

我有简单的 API 控制器和`show`动作：

```
def show
  respond_with(current_api_user)
end 
```

`current_api_user`Doorkeeper gem提供的方法在哪里。最近我用`assigns`方法测试过这种情况，但是这个控制器中没有实例变量赋值。是否有一些现成的模拟控制器的测试助手`respond_with`？我应该自己嘲笑它吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-12T17:23:40.403

我刚刚遇到了同样的问题。只需传入`nil`一个实例变量的位置，例如：

```
respond_with(nil, current_api_user) 
```

# java - 检查对象为空

> ID：14463289
> 
> 赞同：34
> 
> 时间：2013-01-22T16:27:18.147
> 
> 标签：java

基本上你如何检查一个对象是空的还是空的。我的意思是，如果我实例化了一个对象，但它的所有值或字段都是空的，如果它是空的，我该如何签入代码？

我努力了;

```
if (doc != null){
.... do something 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-22T16:29:27.403

你不能直接这样做，你应该提供你自己的方式来检查它。例如。

```
class MyClass {
  Object attr1, attr2, attr3;

  public boolean isValid() {
    return attr1 != null && attr2 != null && attr3 != null;
  }
} 
```

或者将所有字段设置为最终字段并在构造函数中对其进行初始化，以便您可以确保所有内容都已初始化。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-08-12T07:27:46.900

```
import org.apache.commons.lang3.ObjectUtils;
if(ObjectUtils.isEmpty(yourObject)){
  //your block here
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-01-22T05:39:00.567

这可以通过java反射来完成，如果对象存在任何一个属性值，此方法返回false，希望它对某些人有所帮助

```
public boolean isEmpty()  {

    for (Field field : this.getClass().getDeclaredFields()) {
        try {
            field.setAccessible(true);
            if (field.get(this)!=null) {
                return false;
            }
        } catch (Exception e) {
          System.out.println("Exception occured in processing");
        }
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-22T16:29:07.483

你应该对照`null`.

如果要检查对象 x 是否为空，可以执行以下操作：

```
 if(x != null) 
```

但如果它不为 null，则它可以具有为 null 或为空的属性。您将明确检查这些：

```
 if(x.getProperty() != null) 
```

对于“空”检查，这取决于所涉及的类型。对于 Java `String`，您通常会这样做：

```
 if(str != null && !str.isEmpty()) 
```

由于您没有提到任何具体问题，因此很难说。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-05-30T15:52:10.863

我建议您添加单独的重载方法并将它们添加到您的项目实用程序/实用程序类中。

> 检查 Collection 是否为空或 null

```
public static boolean isEmpty(Collection obj) {
    return obj == null || obj.isEmpty();
} 
```

或使用 Apache Commons`CollectionUtils.isEmpty()`

> 检查 Map 是否为空或 null

```
public static boolean isEmpty(Map<?, ?> value) {
    return value == null || value.isEmpty();
} 
```

或使用 Apache Commons`MapUtils.isEmpty()`

> 检查字符串是否为空或 null

```
public static boolean isEmpty(String string) {
    return string == null || string.trim().isEmpty();
} 
```

或使用 Apache Commons`StringUtils.isBlank()`

检查一个对象是否为空很容易，但验证它是否为空却很棘手，因为对象可以有许多私有或继承的变量和嵌套对象，这些都应该是空的。为此，需要验证所有内容，或者在所有对象中使用一些 isEmpty() 方法来验证对象是否为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-22T16:29:46.640

如果您的对象包含对象，则检查它们是否为空，如果它有原语检查它们的默认值。

例如：

```
Person Object 
name Property with getter and setter

to check if name is not initialized. 

Person p = new Person();
if(p.getName()!=null) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-21T15:15:28.393

简单（它在我的项目中工作）。如果某些字段的空值检查不是强制性的，则将其从 toString() 方法中排除，如我上面的代码中所示，我已经移除了学校。

```
public class Student {
    private String name;
    private String school;
    private Integer roll;
    private String section;
    //getters and setters

    @Override
    public String toString() {
        return "Student [name=" + name + ", roll=" + roll + ", section=" + section + "]";
    }

}

public class StudentRunner {

    public static void main(String[] args) {
        Student s = new Student();
        s.setName("ved");
        s.setRoll(12);
        s.setSection("A");
        s.setSchool(null);//school set null and it removed from toString() method
        if(s.toString().contains("null")) {
            System.out.println("null value contains");
            //do your work here or throw exception
        } else {
            System.out.println("no null value");
        }
    }

} 
```

> 输出：没有空值

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-23T18:30:24.947

我有办法，你们告诉我有多好。

创建该类的新对象并将其与您的对象（您要检查是否为空）进行比较。

*为了能够正确地做到这一点：*

覆盖模型类以及类的 hashCode() 和 equals() 方法，其对象是类的成员，例如：

**人员类（主要模型类）：**

```
public class Person {

    private int age;
    private String firstName;
    private String lastName;
    private Address address;

    //getters and setters

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((address == null) ? 0 : address.hashCode());
        result = prime * result + age;
        result = prime * result + ((firstName == null) ? 0 : firstName.hashCode());
        result = prime * result + ((lastName == null) ? 0 : lastName.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Person other = (Person) obj;
        if (address == null) {
            if (other.address != null)
                return false;
        } else if (!address.equals(other.address))
            return false;
        if (age != other.age)
            return false;
        if (firstName == null) {
            if (other.firstName != null)
                return false;
        } else if (!firstName.equals(other.firstName))
            return false;
        if (lastName == null) {
            if (other.lastName != null)
                return false;
        } else if (!lastName.equals(other.lastName))
            return false;
        return true;
    }

    @Override
    public String toString() {
        return "Person [age=" + age + ", firstName=" + firstName + ", lastName=" + lastName + ", address=" + address
                + "]";
    }

} 
```

**地址类（在 Person 类中使用）：**

```
public class Address {

    private String line1;
    private String line2;

    //getters and setters

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((line1 == null) ? 0 : line1.hashCode());
        result = prime * result + ((line2 == null) ? 0 : line2.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Address other = (Address) obj;
        if (line1 == null) {
            if (other.line1 != null)
                return false;
        } else if (!line1.equals(other.line1))
            return false;
        if (line2 == null) {
            if (other.line2 != null)
                return false;
        } else if (!line2.equals(other.line2))
            return false;
        return true;
    }

    @Override
    public String toString() {
        return "Address [line1=" + line1 + ", line2=" + line2 + "]";
    }

} 
```

* * *

现在在主要课程中：

```
 Person person1 = new Person();
    person1.setAge(20);

    Person person2 = new Person();

    Person person3 = new Person();

if(person1.equals(person2)) --> this will be false

if(person2.equals(person3)) --> this will be true 
```

我希望这是最好的方法，而不是对每个成员变量都设置 if 条件。

让我知道 ！

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-04-17T12:03:19.470

假设，

```
data = {};

if( if(!$.isEmptyObject(data)))
{
     document.write("Object is empty);
}

else{
    document.write("Object is not empty);
} 
```

它对我有用，它是一种检查对象是否为空的简单方法

# wpf - 如何将用户的控件标签内容绑定到自定义依赖属性

> ID：14463294
> 
> 赞同：1
> 
> 时间：2013-01-22T16:27:24.297
> 
> 标签：wpf, binding, dependency-properties

我正在尝试将用户的控件标签内容绑定到自定义依赖项属性。我的依赖属性是：

```
public static readonly DependencyProperty DayProperty =
        DependencyProperty.Register("Day", typeof(string), typeof(MultiSlider),   new UIPropertyMetadata("some"));

    public string Day
    {
        get { return (string)GetValue(DayProperty); }
        set { SetValue(DayProperty, value); }
    } 
```

我想得到类似的东西

```
<Label Content="{TemplateBinding Day}"/> 
```

在我的用户控件内部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:11:11.997

通过添加解决：

```
DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

到我的用户控制，然后只是：

```
<Label Content="{Binding Path=Day}"/> 
```

# c# - 如何在 c# 按钮中选择某些字符串并更改字体？

> ID：14463311
> 
> 赞同：0
> 
> 时间：2013-01-22T16:28:06.510
> 
> 标签：c#, winforms, button, fonts

我有一个带有文本“button changeme”的按钮。如果我想将“changeme”的字体更改为 40 号，我该怎么做？

目前我有这个代码：

```
button1.Font = new Font(button1.Font.FontFamily, 40); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:31:15.540

我建议创建该类的子`Button`类并覆盖`OnPaint`手动输出文本的方法。默认`Button`类不支持此功能。

我建议您查看[VisualStyleRenderer](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstylerenderer.aspx)类进行进一步研究，该类对于绘制按钮背景很有用。可能有更简单的方法可以避免重新绘制整个按钮，但是使用 VisualStyleRenderer 并不是特别繁重，并且会给您最大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:45:15.913

我建议您使用此代码，它可以帮助您解决此问题。请尝试此代码：

```
this.button1.Font = new System.Drawing.Font("Microsoft Sans Serif", 15F); 
```

# jquery - 如何将一个处理程序应用于不同的表行？(jQuery)

> ID：14463318
> 
> 赞同：0
> 
> 时间：2013-01-22T16:28:23.673
> 
> 标签：jquery

我想在按下一个键（一次）后将 html 设置为“”。到目前为止，这是我的代码：

```
$(document).one("keypress","td",function(){
        $(this).html("");
}); 
```

但是，它仅适用于一个表格行。有没有我可以将它应用于我的所有表（动态加载）行？

```
<table class="table">
    <tr>
        <td contenteditable="True">Some text</td>   
    </tr>
    <tr>
        <td contenteditable="True">Some text</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:32:32.220

我会切换到 .on 并在单击一次后使 td 不再匹配选择器。

```
$(document).on("keypress","td:not(.cleared)",function(){
    $(this).empty()/*.html("")*/.addClass("cleared");
}); 
```

[http://jsfiddle.net/VBHpU/1/](http://jsfiddle.net/VBHpU/1/)

# axapta - 如何使对话框元素可折叠？

> ID：14463319
> 
> 赞同：3
> 
> 时间：2013-01-22T16:28:26.037
> 
> 标签：axapta, dynamics-ax-2009, x++

有没有办法通过 X++ 使 DialogGroup 元素可折叠？

我一直在看 MSDN 并通过课程，但我似乎没有找到有用的东西。

另一位开发人员在创建付款建议时显示的对话框中添加了两个组（CustVendPaymJournal_Vend 类），并且“确定”和“取消”按钮不再显示在较小的分辨率 (1024x768) 上。

我的方法是使某些组可折叠，以使对话框能够显示此类按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T22:42:57.627

我找到了。

在查看 MSDN 的时间比我想要的要长得多之后，我找到了解决方案：

创建 DialogGroup 后 `dialogGroupProposalType = dialog.addGroup("@SYS88520");`

有一个方法称为`frameOptionButton()`available，它接收一个FormFrameOptionButton 枚举值作为参数。

`dialogGroupProposalType.frameOptionButton(FormFrameOptionButton::Hide);`

[http://msdn.microsoft.com/en-us/library/aa845161(v=ax.50).aspx#F](http://msdn.microsoft.com/en-us/library/aa845161(v=ax.50).aspx#F)

[http://msdn.microsoft.com/en-us/library/aa627673(v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/aa627673(v=ax.50).aspx)

[http://msdn.microsoft.com/en-us/library/aa627673(v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/aa627673(v=ax.50).aspx)

[http://msdn.microsoft.com/en-us/library/aa592526(v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/aa592526(v=ax.50).aspx)

# php - 验证php中的值后，在提交表单上激活/显示fancybox弹出窗口

> ID：14463335
> 
> 赞同：0
> 
> 时间：2013-01-22T16:29:21.830
> 
> 标签：php, jquery

所需操作：用户将填写 html 表单，当按下提交按钮时，我想验证用户类型，如果它是访客，那么它应该显示一个花式框（弹出）屏幕来注册该用户，因为我不想与来宾用户一起保存值。我在问题中提到的代码很好，但我如何在验证用户后激活 FANCYBOX 屏幕。

为此，我在提交时检查/验证会话，这很好，我可以使用 php 轻松完成，但应该显示 fancybox 但如何？

```
if($_SESSION[FIRST_NAME]=="Guest")
  {
    print '<a id="loginframe" href="Signup.php">Sign Up here</a>';
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:48:50.290

首先你谈谈[http://fancybox.net/](http://fancybox.net/)吗？

你喜欢这样的东西吗？

[http://jsfiddle.net/mbD8t/](http://jsfiddle.net/mbD8t/)

如果是，试试这个：

```
if($_SESSION['FIRST_NAME']=='Guest')
{
    print '<a id="loginframe" href="Signup.php">Sign Up here</a>';
    print <<< EOL
<script type="text/javascript">
$(document).ready(function() {
   $.fancybox($('#loginframe').html());
});
</script>
EOL;
} 
```

# java - 在我的 REST 客户端中获取 REST 服务数据

> ID：14463336
> 
> 赞同：1
> 
> 时间：2013-01-22T16:29:23.787
> 
> 标签：java, web-services, rest, netbeans

使用 NetBeans 和 GlassFish，我正在开发一个简单的独立应用程序，该应用程序`Tweet`从 REST 服务获取 ' 列表。除其他外，这些对象包含一个名为 的变量`tweet`，这是我希望在其他应用程序中看到的字符串值。

我已经构建了网站应用程序并在其中创建了一个新类：

RESTService.java：

```
package service;

import domain.Tweet;
import domain.User;
import java.util.Collection;
import java.util.Date;
import javax.inject.Inject;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Path("/rest")
public class RESTService {

    @Inject
    KwetterService service;

    @GET
    @Path("/{user}")
    public User getUser(@PathParam("user") String userName)
    {
        return service.findByName(userName);
    }

    @GET
    @Path("/{user}/tweets")
    @Produces(MediaType.TEXT_XML)
    public Collection<Tweet> getTweets(@PathParam("user") String userName)
    {
        User user = service.findByName(userName);
        return user.getTweets();
    }
} 
```

在独立应用程序中，我创建了一个带有按钮的小表单。按下那个按钮，我想抓住那些推文。

在使用 NetBeans 添加 REST 客户端类时，我将其链接到网站的服务。它生成了一个名为 RestClient.java 的类：

```
package service;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.UniformInterfaceException;
import com.sun.jersey.api.client.WebResource;

public class RestClient {
    private WebResource webResource;
    private Client client;

    public RestClient() {
    }

    public <T> T getUser(Class<T> responseType, String user) throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path(java.text.MessageFormat.format("{0}", new Object[]{user}));
        return resource.get(responseType);
    }

    public <T> T getTweets(Class<T> responseType, String user) throws UniformInterfaceException {
        WebResource resource = webResource;
        resource = resource.path(java.text.MessageFormat.format("{0}/tweets", new Object[]{user}));
        return resource.accept(javax.ws.rs.core.MediaType.TEXT_XML).get(responseType);
    }
} 
```

在 actionbutton 执行方法中，我试图使用该类来获取推文。这样做时，它会要求`Class<T> responseType`在用户名旁边输入一个应该在其上发布推文的用户名。

表单的代码如下所示：

```
private void btnZoekFollowersActionPerformed(java.awt.event.ActionEvent evt) {                                              
        String userName = txtZoekTweets.getText(); //de naam van de user
        RestClient client = new RestClient();
        Collection<Tweet> tweets = client.getTweets(MediaType.TEXT_XML, userName);
        //What to insert for mediatype? Above gives an error since it requires Class<T> responseType
        System.out.println("Datasize: " + data.size());
} 
```

所以，简而言之，我的问题如下：我需要插入一个`Class<T> responseType`作为参数，为什么？我应该使用什么作为参数，或者更好的是，我怎样才能避免这样做而只插入用户名作为参数？

接下来，我是否需要自己在指定要访问哪个 URL 的地方输入代码？或者这一切都已经完成并通过生成客户端类来工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:47:11.743

Ok, there are some issues with your client code:

***Problem 1***

You are confusing media type with the response entity type. The Jersey `WebResource` class expects that when you use the method `get`, that you supply the expected *entity type* that the response should be marshaled into. If you want to specify the expected media type then you need to do that by appending an `Accept` header, via the `accept` method (which you are doing in your `getTweets` method, but not `getUser`).

***Problem 2***

Your REST client class does not need to have parameterized generic functions. You have already defined your methods to be aware of what kind of object they are returning, so use those objects in the method signature!

***Solution***

Overall I would expect your client to look like this:

```
public class RestClient {
    private Client client;
    private WebResource webResource;

    public RestClient() {
        super();
    }

    public User getUser(String userName) throws UniformInterfaceException {
        final WebResource userResource = webResource
           .path(String.format("/user/%s", userName))
           .accept(MediaType.TEXT_XML) ;
        return userResource.get(User.class);
    }

    public Collection<Tweet> getTweets(String userName) throws UniformInterfaceException {
        final WebResource tweetResource = webResource
           .path(String.format("/user/%s/tweets", userName))
           .accept(MediaType.TEXT_XML) ;
        return tweetResource.get(new GenericType<Collection<Tweet>>(){});
    }
} 
```

You will notice I added a `user` prefix to the resource URL's. You can remove it if you wish, but it will make it easier to maintain your application as you add more resource endpoints. If you decide to keep it, then you will need this modification on your server side:

```
@Path("/rest")
public class RESTService {

    @Inject
    KwetterService service;

    @GET
    @Path("/user/{userName}")
    public User getUser(@PathParam("userName") String userName)
    {
        return service.findByName(userName);
    }

    @GET
    @Path("/user/{userName}/tweets")
    @Produces(MediaType.TEXT_XML)
    public Collection<Tweet> getTweets(@PathParam("userName") String userName)
    {
        User user = service.findByName(userName);
        return user.getTweets();
    }
} 
```

# java - 避免在 Map 中存储 null

> ID：14463339
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:29:30.097
> 
> 标签：java, map

我有一个方法，我可以在其中获取`patientid`参数`scriptInfo`。但是，如果我将它们设为 null，则 null 将存储在 Map 中，并且由于存储了 null，因此 Map 大小会增加。

我希望如果我收到此参数为 null，那么我根本不想存储它们，因为 null 本身不是存储在 Map 中的值，对我没有用处。

```
private Map<String, List<String>> getValidatedPatientData(ITransaction transaction, String patientId, String scriptInfo) 
  {

      ppvValidatedinfo = new HashMap<String, List<String>>(); // 
      List<String> scriptDetails = new ArrayList<String>();
      scriptDetails.add(scriptInfo);
      ppvValidatedinfo.put(patientId, scriptDetails);
      transaction.setValue(ITransactionHashtableWag.VALIDATED_PPV_PH_NBR, ppvValidatedinfo);

    return ppvValidatedinfo;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:32:10.740

方法一开始，假设返回的map需要在别处修改：

```
if (patientId == null || scriptInfo == null)
    return new HashMap<String, List<String>>(); 
```

或者，如果我不会修改返回的地图，请使用[`emptyMap()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#emptyMap%28%29)：

```
if (patientId == null || scriptInfo == null)
    return new Collections.emptyMap(); 
```

无论哪种方式，我都提倡使用[Null Object Pattern](https://en.wikipedia.org/wiki/Null_Object_pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:43:01.577

这里有一个关于这个的讨论：[函数应该返回 null 还是空对象？](https://stackoverflow.com/questions/1626597/should-functions-return-null-or-an-empty-object).

> 如果您打算指示没有可用数据，则返回 null 通常是最好的主意。
> 
> 空对象表示已返回数据，而返回 null 则明确表示未返回任何内容。

所以，我认为你应该只返回 null 并稍后进行适当的验证

```
if (patientId == null || scriptInfo == null)
    return null;
else {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:49:39.763

只需使用`ConcurrentHashMap`，不仅支持您的要求，而且它是线程安全的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:34:40.560

`java.util.HashMap`支持`null`作为键也值。你应该`not null`检查。

```
if (patientId != null || scriptInfo != null){...} 
```

# php - Laravel 4 中的管理路由（或前缀路由）

> ID：14463344
> 
> 赞同：1
> 
> 时间：2013-01-22T16:29:42.617
> 
> 标签：php, laravel, laravel-4

如何在 Laravel 4（Restfull 控制器）中创建管理员特定的路由：

```
/admin/users        (get - /admin/users/index)
/admin/users/create (get)
/admin/users/store  (post) 
```

我想知道：

*   什么文件和我需要在哪里创建它们
*   我需要如何创建路线

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-24T21:28:23.573

`Laravel 4`您现在可以使用`prefix`：

```
Route::group(['prefix' => 'admin'], function() {

    Route::get('/', 'AdminController@home');

    Route::get('posts', 'AdminController@showPosts');

    Route::get('another', function() {
        return 'Another routing';
    });

    Route::get('foo', function() {
        return Response::make('BARRRRR', 200);
    });

    Route::get('bazz', function() {
        return View::make('bazztemplate');
    });

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T10:46:20.443

对于您的子文件夹，正如我在这里回答的["route-to-controller-in-subfolder-not-working-in-laravel-4"](https://stackoverflow.com/questions/14504082/route-to-controller-in-subfolder-not-working-in-laravel-4/14519555#14519555)，在这个 laravel 4 beta 中似乎没有“友好”的解决方案。

@Aran，如果你让它工作正常，请添加你的控制器、路由和 composer.json 文件的代码示例：

```
Route::resource('admin/users', 'admin.Users'); 
```

或者

```
Route::resource('admin', 'admin.Users'); 
```

谢谢

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T16:35:23.580

您可以使用的真正有用的工具是`artisan`CLI。

使用它，您将能够生成所需的函数文件，其中包含使其成为 RESTful 所需的所有路由。

```
php artisan controller:make users 
```

将为您生成函数文件。然后在您的 routes.php 文件中，您可以简单地添加

```
Route::resource('users', 'Users'); 
```

这将设置所有必要的路线。

有关这方面的更多信息，您应该阅读文档。

[http://four.laravel.com/docs/routing#resource-controllers](http://four.laravel.com/docs/routing#resource-controllers)

[http://four.laravel.com/docs/artisan](http://four.laravel.com/docs/artisan)

**编辑：**

为了使这个管理员特定，简单地改变如下代码并将控制器移动到控制器文件夹内的管理员文件夹。

```
Route::resource('admin/users', 'admin.Users'); 
```

第一个参数是路由，第二个是控制器文件名/文件夹。

在 Laravel 中，如果你在文件夹中放置了一个控制器，为了在路由或 URL 中指定它，你可以使用一个点来表示文件夹。

然后，您可以对此进行扩展并使用路由过滤器添加身份验证，特别是在下面页面上找到的“基于模式的过滤器”的代码。

[http://four.laravel.com/docs/routing#route-filters](http://four.laravel.com/docs/routing#route-filters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-28T14:20:18.107

> Laravel 4 - 轻松添加管理控制器

这让我发疯了很长时间，但我解决了。

**路由.php**

```
Route::resource('admin', 'Admin_HomeController@showIndex'); 
```

**/controllers/Admin/HomeController.php**

*请注意文件夹名称 Admin 必须大写“A”*

```
<?php

class Admin_HomeController extends Controller {
    public function showIndex() {
        return 'Yes it works!';
    }   
} 
```

或者，您可以使用 group 方法

```
Route::group(array('prefix' => 'admin'), function() {
    Route::get('/', 'Admin_HomeController@showIndex');
}); 
```

谢谢丹尼尔

# xcode - XCode 4 意外删除产品文件

> ID：14463348
> 
> 赞同：0
> 
> 时间：2013-01-22T16:29:49.733
> 
> 标签：xcode

我正在使用 XCode 和 Appcode 进行开发。在 Appcode 中，我不小心从 Products 文件夹中删除了 .app 文件。

之后，我可以在两个 IDE 中成功构建项目，但无法在模拟器或设备上运行，构建完成后，什么也没有发生。在派生数据目录上创建的 .app 文件很好，就像之前一样，所以这不是问题。如果我在 XCode 中检查调试方案，则在 Executable 列表中选择 None，如果我在派生数据目录中浏览生成的应用程序并进行设置，则工作正常，也在模拟器和设备上运行，但应用程序文件未显示在Products 文件夹，重新启动后，XCode 将 Executables 设置回 None，这很烦人。

如何设置 .app 文件以显示在 XCode 的 Products 目录中并像以前一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T05:58:25.057

我也面临同样的问题。

如果我们正在为 SIMULATOR 构建 - 那么目标文件仍然“不包含”。从顶部构建操作更改 - ProjectName>iOS 设备（而不是 ios 模拟器），然后生成项目目标文件并包含在项目文件夹层次结构中。

无需运行 - 只需重建就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:46:05.127

我可以通过转到项目设置，然后单击“目标”下的应用程序并触摸“删除”键来删除我自己的测试项目中的“产品”文件。

![当我们没有目标时我们看到了什么](../Images/88abae0e3156dd86eed395071f9b974d.png)

要创建新目标，请返回项目设置并单击“添加目标”按钮。

通常，这意味着您需要重置*所有*设置，但如果您有原始目标的 Info.plist（设置）文件，您可能可以从那里获取一些以前的目标设置。

![你可以创建一个新的目标](../Images/cfe05876a2307a37807a327ae46d5fd2.png)

# android - VoIP 应用程序开发问题（SIP 等）

> ID：14463350
> 
> 赞同：1
> 
> 时间：2013-01-22T16:30:11.600
> 
> 标签：android, sip, voip, rtp

我正在寻找有关为 Android 开发 VoIP 应用程序的一般建议（技术、最佳实践等）。已经发布了类似的问题，但我包括了具体问题。

我做了一些研究，我注意到有几种可能的解决方案（当然我知道 SDK 中的 SIP 堆栈（也包括语音传输），但由于它在大多数设备上不可用，我不打算使用它。此外，我阅读了有关 Adob​​e Flex 实现的信息，但我想坚持使用原生的东西）。

让我印象深刻的是：

*   使用 SIP 启动会话（服务器存在）。在消息中使用 SDP 来描述会话。

*   建立 p2p 连接（防火墙/路由可能有问题 - 可以使用 STUN - 可能涉及 DNS）

*   进行实际传输，我相信所涉及的数据包/协议是（有效负载）在 -> RTP in -> UDP in -> IP。

目前这似乎很复杂，所以我的第一个问题是：

1）这是一种标准方法吗？这是最佳实践吗？我得到一些提示，相反，MSRP 可用于传输内容，但我读过它仅适用于 IM、文件等。

2) 我应该使用哪个 SIP 堆栈以获得最佳结果/性能？我可以使用 Java/Eclipse 进行开发。我想选择 JSIP（或基于 jsip 的 tinysip），但不确定。

3）请给我一些关于如何在Java for Android（RTP）中实现数据传输的提示

最后一点，我一点也不排除 pjsip。我认为它实际上可能更快，因为它使用 NDK (我可以切换到 C++，np) 。我还读到它已经包含音频/视频传输。我只是不知道它的使用和扩展有多容易，它到底有多好。如果你用过，请告诉我！

谢谢你。

PS：虽然不紧急或不确定，但便携性可能是未来的一个重要因素。在不久的将来，我也需要视频传输。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:05:04.310

您应该查看 IMSDROID 项目。它使用 C 语言编写的 Doubango 框架，具有高度可移植性。更重要的是，它也是开源的，因此您可以使用他们的代码并可能为社区做出贡献。

[http://code.google.com/p/imsdroid/](http://code.google.com/p/imsdroid/)

干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:40:04.010

看看teamSpeak。他们提供原生 sdk-s。但它们不是免费的。这不是 P2P，需要一个服务器（至少据我所知）可能值得一分钟。 [http://www.teamspeak.com/?page=teamspeak3sdk](http://www.teamspeak.com/?page=teamspeak3sdk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T13:02:18.313

编写自己的 SIP 堆栈需要几个月的时间，而且只有基本功能。我建议使用现有的 sip 堆栈。[这里](https://stackoverflow.com/questions/13511372/voip-library-for-android/15605924#15605924)讨论了一些开放源代码。

# spring-mvc - 使用 Groovy 的 Spring MVC 控制器

> ID：14463352
> 
> 赞同：1
> 
> 时间：2013-01-22T16:30:24.360
> 
> 标签：spring-mvc, groovy

我正在设置一个 web 应用程序，我正在尝试使用 Groovy 而不是 Java。我有基本设置，webapp 启动。到目前为止，我有一个带有适当注释的控制器。在启动期间，RequestMappings 被映射，但是当我尝试访问映射时，webapp 以 404 回答。

我看过[这篇文章](https://stackoverflow.com/questions/7534529/spring-mvc-annotated-controller-in-groovy)，但它并没有解决我的问题（既不使用接口也不使用 PostProcessor）。

这是应用程序启动的日志，我看不到任何奇怪的东西：

```
17:16:10.231 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization started
17:16:10.235 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.c.s.AnnotationConfigWebApplicationContext - Refreshing Root WebApplicationContext: startup date [Tue Jan 22 17:16:10 CET 2013]; root of context hierarchy
17:16:10.296 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.c.s.AnnotationConfigWebApplicationContext - Registering annotated classes: [class de.rpr.query.config.AppConfig]
17:16:10.902 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@7d21c8c4: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,appConfig,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,queryController,delegatingWebMvcConfiguration,requestMappingHandlerMapping,viewControllerHandlerMapping,beanNameHandlerMapping,resourceHandlerMapping,defaultServletHandlerMapping,requestMappingHandlerAdapter,mvcConversionService,mvcValidator,httpRequestHandlerAdapter,simpleControllerHandlerAdapter,handlerExceptionResolver,webConfig,jacksonObjectMapper,jacksonMessageConverter,viewResolver,groovyObjectPostProcessor]; root of factory hierarchy
17:16:11.060 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped "{[/query/show],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}" onto public java.lang.Object de.rpr.query.controller.QueryController.showQueryForm()
17:16:11.124 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.h.SimpleUrlHandlerMapping - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler]
17:16:11.638 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 1403 ms
17:16:11.649 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.servlet.DispatcherServlet - FrameworkServlet 'dispatcher': initialization started
17:16:11.656 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.c.s.AnnotationConfigWebApplicationContext - Refreshing WebApplicationContext for namespace 'dispatcher-servlet': startup date [Tue Jan 22 17:16:11 CET 2013]; parent: Root WebApplicationContext
17:16:11.660 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.c.s.AnnotationConfigWebApplicationContext - Registering annotated classes: [class de.rpr.query.config.WebConfig]
17:16:11.701 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.b.f.s.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@35d0be7c: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,webConfig,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,delegatingWebMvcConfiguration,requestMappingHandlerMapping,viewControllerHandlerMapping,beanNameHandlerMapping,resourceHandlerMapping,defaultServletHandlerMapping,requestMappingHandlerAdapter,mvcConversionService,mvcValidator,httpRequestHandlerAdapter,simpleControllerHandlerAdapter,handlerExceptionResolver,jacksonObjectMapper,jacksonMessageConverter,viewResolver]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@7d21c8c4
17:16:11.829 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.w.s.h.SimpleUrlHandlerMapping - Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler]
17:16:11.971 [RMI TCP Connection(3)-127.0.0.1] INFO  o.s.web.servlet.DispatcherServlet - FrameworkServlet 'dispatcher': initialization completed in 322 ms 
```

这是控制器：

```
@Controller
@RequestMapping("/mapping")
class QueryController {

    @RequestMapping("/show")
    def show() {
        return "show";
    }
} 
```

我错过了什么或做错了什么？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:09:50.817

到底是什么，检查一下，第二个子弹：

使用 Groovy 2 配置和实现 Spring 风格的应用程序：基于 Groovy 的 bean 定义；Groovy 作为整个应用程序的首选语言

从[下一站开始：春季框架 4.0](http://blog.springsource.org/2013/01/16/next-stop-spring-framework-4-0/)

所以你在这里可能只是提前一点点:-)。但你可能已经知道了。

# php - 用户指定要在 jqplot 中绘制的 y 轴数

> ID：14463357
> 
> 赞同：1
> 
> 时间：2013-01-22T16:30:42.857
> 
> 标签：php, javascript, ajax, jqplot

请我一直在尝试这个，但似乎很难。我试图使 y 轴的数量取决于用户选择。有3个部分供用户选择，即：

1.  绘图的时间范围
2.  要绘图的 ID，将从数据库中获取
3.  在数据库中搜索的字段

如果用户选择 2 ID 和 2 Field，那么我应该在图上有 4 条不同的线。意思就是：

行数 = 选择的 ID 数 * 选择的字段数

有了这个，我知道我会得到相同的数字用于图例中的标签以及要显示的 y 轴的数量。

对于我给出的示例，它应该类似于：

*   字段_1-ID_1
*   字段_2-ID_1
*   字段_1-ID_2
*   字段_2-ID_2

用于生成图例标签和 y 轴，但这完全取决于用户的选择。

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:33:22.277

我终于找到了一种方法来解决这个问题，方法是从 php 端生成 jqplot 中系列属性的元素，以预期的格式，即

```
series:[{label:Field_1-ID_1,yaxis:'yaxis'},{label:Field_1-ID_2,yaxis:'y2axis'},{label:Field_2-ID_1,yaxis:'y3axis'},{label:Field_2-ID_2,yaxis:'y4axis'}] 
```

如果有人对它的完成方式感兴趣，请检查以下代码：

```
$con = mysql_connect($hostname, $username, $password);
if (!$con)
{
 die('Could not connect: ' . mysql_error());
}

mysql_select_db($database, $con);

$unit = mysql_real_escape_string($_GET["units"]);//ID selected by user, e.g.(ID_1,ID_2)
$stat = mysql_real_escape_string($_GET["start"]);//start time
$stop = mysql_real_escape_string($_GET["stop"]);//stop time
$field1 = mysql_real_escape_string($_GET["fieldlist"]);//Field selected by user, e.g.(Field_1,Field_2)

$first=true;
echo "Label=";
echo "[";

$field = explode(",", $field1);
$count=count($field);
$i=0;$j=1;
while($i<$count)
{ 
  $sq="SELECT su_id FROM Station_stat
  WHERE su_id in ($unit) GROUP BY su_id";

  $res = mysql_query($sq);

  while($row = mysql_fetch_array($res)){
  if ($first != true )
    {
        echo ",";
        echo "{label:\"$field[$i] ".$row['su_id']."\",yaxis:\"y".++$j."axis\"}";
    }
  else
      echo "{label:\"$field[$i] ".$row['su_id']."\",yaxis:\"yaxis\"}";
      $first = false;
 }
++$i;
}
echo "];"; 
```

该php的输出如下：

```
Label=[{label:Field_1-ID_1,yaxis:'yaxis'},{label:Field_1-ID_2,yaxis:'y2axis'},{label:Field_2-ID_1,yaxis:'y3axis'},{label:Field_2-ID_2,yaxis:'y4axis'}]; 
```

然后在 jqplot 函数中，我将系列设置为标签：

```
series:Label 
```

# sharepoint - 有人可以指出将 sharepoint 集成/连接到 TYPO3 的最佳方法吗？

> ID：14463358
> 
> 赞同：2
> 
> 时间：2013-01-22T16:30:44.033
> 
> 标签：sharepoint, integration, typo3

我目前正在开展一个项目，要求将 Sharepoint 集成或连接到 TYPO3。

共享点将以某种方式取代 TYPO3 的文件管理员。所以我所说的“整合”或“连接”是指以下几点：

*   通过 TYPO3 BE 使用某些标签或类别在 TYPO3 页面上显示来自 sharepoint 的文档列表。简而言之，访问 TYPO3 BE 中的 sharepoints 文档。
*   能够通过 TYPO3 从 Sharepoint 中搜索文档。并按类型或类别过滤它们。当然要显示结果。

* * *

我在网上找到了一些参考资料。

*   显而易见的是 TYPOTYC​​OON 的[sharepoint 连接器 SPTools，](http://www.typotycoon.com/products/sharepoint-connector/)但它似乎已死，因为网站上没有新消息，推特帐户上也没有活动。
*   我还在 2010 年 12 月上传的 TER（WSS/MOSS 阅读器和 WSS/MOSS 编写器）上发现了两个扩展。肯定已经过时了 - 有人用过它们吗？有一些反馈？
*   我还找到了一些关于[CMIS 和 TYMIS 扩展的参考资料，](http://typo3-fr.org/choisir-typo3/actu-francophone/actualite-10.html?tx_ttnews%5btt_news%5d=79&cHash=017e17350ee2714136ba820ee2600b14)但在 TER 上找不到。

* * *

这就是我来找你的原因，希望你有一些解决方案，有用的反馈或至少领导......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:47:43.537

从 TYPO3 6.0 开始，引入了新的*文件抽象层 (FAL)* [1.]。这使您可以将文件存储与 TYPO3 中使用的文件分开。结果 fileadmin 可能包含任何支持的存储的任意数量的虚拟安装点。预装了多个（本地、WebDAV）FAL 驱动程序，并且在 [2.] 处有一个 Amazon S3 驱动程序。我不知道 Sharepoint 的任何 FAL 驱动程序开发。因此，这可能由您来解决，但这些提示应该可以帮助您入门。

链接：

1.  [http://docs.typo3.org/typo3cms/FileAbstractionLayerReference/](http://docs.typo3.org/typo3cms/FileAbstractionLayerReference/)
2.  [http://git.typo3.org/TYPO3v4/Extensions/fal_amazons3.git](http://git.typo3.org/TYPO3v4/Extensions/fal_amazons3.git)

# python - NLTK 的一些问题

> ID：14463368
> 
> 赞同：1
> 
> 时间：2013-01-22T16:31:19.600
> 
> 标签：python, tokenize, nltk, counting, corpus

我对 Python 和 NLTK 很陌生，但我有一个问题。我正在写一些东西来从自制的语料库中提取长度超过 7 个字符的单词。但事实证明，它提取了每一个单词……有人知道我做错了什么吗？

```
loc="C:\Users\Dell\Desktop\CORPUS"
Corpus= CategorizedPlaintextCorpusReader(loc,'(?!\.svn).*\.txt, cat_pattern=r '(Shakespeare|Milton)/.*)
def long_words(corpus)
    for cat in corpus.categories():
        fileids=corpus.fileids(categories=cat)
        words=corpus.words(fileids)
         long_tokens=[]
         words2=set(words)
         if len(words2) >=7:
             long_tokens.append(words2)

Print long_tokens 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:34:44.530

代替

```
if len(words2) >=7:
    long_tokens.append(words2) 
```

和：

```
long_tokens += [w for w in words2 if len(w) >= 7] 
```

`corpus.words(fileids)`解释：如果单词数至少为 7（所以我想总是为您的语料库），您正在做的是附加所有单词（标记）。您真正想要做的是从标记集中过滤掉短于 7 个字符的单词，并将剩余的长单词附加到`long_tokens`.

您的函数应返回结果 - 具有 7 个或更多字符的标记。我假设您创建和处理的方式`CategorizedPlaintextCorpusReader`是可以的：

```
loc="C:\Users\Dell\Desktop\CORPUS"
Corpus= CategorizedPlaintextCorpusReader(loc,'(?!\.svn).*\.txt, cat_pattern=r'(Shakespeare|Milton)/.*)

def long_words(corpus = Corpus):
    long_tokens=[]
    for cat in corpus.categories():
        fileids = corpus.fileids(categories=cat)
        words = corpus.words(fileids)
        long_tokens += [w for w in set(words) if len(w) >= 7]
    return set(long_tokens)

print "\n".join(long_words()) 
```

以下是您在评论中提出的问题的答案：

```
for loc in ['cat1','cat2']:
  print len(long_words(corpus=CategorizedPlaintextCorpusReader(loc,'(?!\.svn).*\.txt, cat_pattern=r'(Shakespeare|Milton)/.*)), 'words over 7 in', loc 
```

# indexing - 是否有支持使用多个索引进行高效搜索的非关系数据库？

> ID：14463371
> 
> 赞同：0
> 
> 时间：2013-01-22T16:31:23.043
> 
> 标签：indexing, nosql, bulkinsert

我正准备创建一个数据库来存储数以千万计的人的联系方式和人口统计信息。鉴于大型数据集和大量使用它会得到我试图确定一个 nosql 数据库是否适合这个。

数据库的使用会涉及批量处理10,000到1,000,000条记录，检查数据库中是否已经存在记录，如果不存在则添加它（如果它存在于db中，我将要检索现有的UUID） . 所以它需要通过 UUID、姓名、地址和/或电话快速搜索。到目前为止，在我的阅读中，nosql 数据库似乎只允许一个主键。但是，我在文档中看到的一些功能对我来说并不是很清楚。是否有适合此的 nosql 数据库，或者我应该坚持使用 MySQL 并专注于改进它？在 nosql 术语中我应该关注哪些特性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:34:09.253

MongoDB支持索引，甚至多索引。

[http://docs.mongodb.org/manual/core/indexes/](http://docs.mongodb.org/manual/core/indexes/)

和 MySQL 一样。您应该关注的唯一功能是……嗯……索引。关系与非关系是您的选择。大多数拥有庞大数据库的大公司显然都在使用关系数据库——这是一种久经考验的方法。

# javascript - setTimeout 连续循环不等待

> ID：14463372
> 
> 赞同：1
> 
> 时间：2013-01-22T16:31:24.157
> 
> 标签：javascript, html, ajax

我试图让 setTimeout 在 15 秒后重新运行它内部的函数，它不是等待 15 秒，而是在一个恒定循环中执行它。

**这是我当前的代码**

```
function checkSession(x) {
http.abort();
http.open("GET", siteURL+"processes/ajax.php?call=check_session&string="+x+"&new="+Math.random(), true);
http.onreadystatechange = function() {
    if(http.readyState == 4) {
        if(http.responseText == true) {
            updateSession(x);
        } else {
            setTimeout(checkSession(x),15000);
        }
    }
}
http.send(null);
} 
```

我没有看到代码本身有任何问题，唯一错误的是它只是在执行一个恒定循环而没有等待“15000”毫秒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T16:32:13.283

将 setTimeout 调用更改为：

```
setTimeout(function(){checkSession(x)},15000); 
```

正如你现在所拥有的，checkSession 会立即被调用，然后作为参数传递给 setTimeout。将其包装在函数中允许延迟调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:38:10.357

你的解释：

函数是这样的：`setTimeout( function, delay );`

您的方法调用未将匿名函数或对函数的引用设置为函数参数。

错误的：`setTimeout(checkSession(x),15000);`

原因：`checkSession(x)`是函数调用，不是对函数或匿名函数的引用

对：`setTimeout(function() {checkSession(x) },15000);`

原因：函数调用现在被包装为一个匿名函数，并且为该`setTimeout( function, delay )`方法设置了函数参数。

希望这有助于为您清除它！

# php - 从 PHP 数组中获取表单结果中的值

> ID：14463373
> 
> 赞同：0
> 
> 时间：2013-01-22T16:31:26.897
> 
> 标签：php, arrays, forms

我的表单工作正常，但在我的结果电子邮件中，我得到了用户选择的数组编号而不是值（例如 Glove：3 与 Glove：Cherry）。我怎样才能改变这个？

这是我用于表单的 php：

```
$unpwdgloves=array(
'Bubble Gum',
'Cherry',
'Green Apple', 
'Vanilla Orange',
'Grape', 
'Mint', 
 ); 
```

这是我的表格：

```
<select name="glove-color">
<option value="">-----------------</option>
<?php
foreach($unpwdgloves as $key => $value):
echo '<option value="'.$key.'">'.$value.'</option>';
endforeach;
?>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:32:35.760

代替

```
echo '<option value="'.$key.'">'.$value.'</option>'; 
```

和

```
echo '<option>'.$value.'</option>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:47:10.817

您收到选择的位置，因为默认情况下，数组的键是从 0->n。在你的情况下：

```
$unpwdgloves=array(
[0] => 'Bubble Gum',
[1] => 'Cherry',
[2] => 'Green Apple', 
[3] => 'Vanilla Orange',
[4] => 'Grape', 
[5] => 'Mint', 
 ); 
```

因此，您的选择将如下所示：

```
<select name="glove-color">
     <option value="0">Bubble Gum</option>
     <option value="1">Cherry</option>
     [...]
</select> 
```

所以在 POST 中传递的值将是“value”属性中的值。如果您不指定它的 value 属性，默认情况下发送到服务器的值是 option tag 内的文本`<option>VALUE</option>`。

您可以将代码更改为

```
echo '<option value="'.$value.'">'.$value.'</option>';
//<option value="Bubble Gum">Bubble Gum</option> 
```

或者

```
echo '<option>'.$value.'</option>';
//<option>Bubble Gum</option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:37:10.940

只需进行以下更改，因为 key 表示您在代码中使用的数组的索引。

```
<?php
foreach($unpwdgloves as $value):
echo '<option value="'.$value.'">'.$value.'</option>';
endforeach;
?> 
```

# php - 如何使用我的应用请求发布这样的流？

> ID：14463382
> 
> 赞同：0
> 
> 时间：2013-01-22T16:31:55.660
> 
> 标签：php, javascript, facebook, sdk

我有两个问题。

1 - 我的应用程序请求如何在一个屏幕上发布这样的流？

![在此处输入图像描述](../Images/60470990f46c6111a39d08e6813a43d0.png)

2 - 是否可以制作两个或更多页面的应用程序，我已经可以让人们喜欢使用signed_request，但假设我会得到人们的许可，有没有办法让人们喜欢不同的页面？

示例：在人们“喜欢”我的应用所在页面后，我将获得许可，然后我的应用使用此权限来喜欢不同的页面或网址，无论如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:50:07.617

发布流是一个扩展权限，因此它出现在另一个身份验证对话框窗口中，您显示的屏幕截图可能是旧的。[https://developers.facebook.com/docs/reference/login/extended-permissions/](https://developers.facebook.com/docs/reference/login/extended-permissions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:00:37.470

回答第一部分：

```
$user = $facebook->getUser();
if (!$user) {
$url = $facebook->getLoginUrl(array(
           'scope'=>'publish_stream,status_update',
           'redirect_uri'=>'http://yourlink/'));
echo "<p>Redirecting to permission request...</p>";
echo "<script type=\"text/javascript\">top.location.href = '$url';</script>";
} else {
... your app.
} 
```

您将权限放在范围元素中。您获得的批准框将取决于您放在那里的任何元素。只要求您实际需要的权限。

- - 编辑 - -

针对您的评论，如果您使用 SDK 上传图片，您还需要以下内容：

```
$facebook->setFileUploadSupport(true); 
```

一旦你通过了身份验证，你就会这样做。

您还需要更多权限：

```
'scope'=> 'read_stream, publish_stream, photo_upload, user_photos, user_photo_video_tags' 
```

您可能不需要所有这些，具体取决于您要执行的操作，因此一旦您开始工作，请尝试删除视频部分。

去年我花了一段时间，你可能会发现这些帖子很有用：

[http://facebookanswers.co.uk/?p=262](http://facebookanswers.co.uk/?p=262)

[http://facebookanswers.co.uk/?p=322](http://facebookanswers.co.uk/?p=322)

# jsf - 未执行 JSF 过滤器

> ID：14463383
> 
> 赞同：0
> 
> 时间：2013-01-22T16:32:02.540
> 
> 标签：jsf, servlet-filters

```
@WebFilter(filterName = "loginFilter",  value = { "/faces/kosz.xhtml" } , dispatcherTypes = { DispatcherType.FORWARD, DispatcherType.ERROR, DispatcherType.REQUEST, DispatcherType.INCLUDE }  )
public class loginFilter implements Filter {    
    public loginFilter(){
    }

    public void doFilter(ServletRequest request, ServletResponse response,
                         FilterChain chain)
            throws IOException, ServletException{
        HttpServletRequest req = ( HttpServletRequest ) request;
        userSession auth = ( userSession ) req.getSession().getAttribute("user");
        if ( auth != null && auth.isLogged() ) {
            chain.doFilter(request, response);
             HttpServletResponse res = ( HttpServletResponse ) response;
            res.sendRedirect(req.getContextPath() + "/login.xhtml");
        }
        else {
            HttpServletResponse res = ( HttpServletResponse ) response;
            res.sendRedirect(req.getContextPath() + "/login.xhtml");
        }
      }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException
      {
        throw new UnsupportedOperationException("Not supported yet.");
      }

    @Override
    public void destroy()
      {
        throw new UnsupportedOperationException("Not supported yet.");
      }
/**
 * Return the filter configuration object for this filter.
} 
```

问题是过滤器没有执行。网址是`localhost:8080/PP2/faces/kosz.xhtml`。这样做的正确方法是什么？我的 web.xml 中没有条目，它都是基于注释的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:38:29.937

`init()`您在过滤器和`destroy()`方法中抛出异常。如果您不想在`init()`or中做任何事情`destroy()`，只需将方法体留空即可。在这种情况下，您的过滤器根本没有成功初始化。

# android - Android - 如何防止带有 Porterduff.Mode.Screen 的 ColorFilter 混合 alpha？

> ID：14463384
> 
> 赞同：2
> 
> 时间：2013-01-22T16:32:06.270
> 
> 标签：android, graphics, drawable, colormatrix, porter-duff

我在我的 GridView 中加载了一些图像，我想使用混合屏幕模式为它们应用微红色。

在我的适配器中，我有以下代码：

```
ImageView image = (ImageView) findViewById(...);
image.getDrawable().setColorFilter(channel.getSelectedColor(), Mode.SCREEN); 
```

我也试过

```
image.setColorFilter(channel.getSelectedColor(), Mode.SCREEN); 
```

但我总是以这样的方式结束： ![Alpha 通道为红色](../Images/d62a4bddb31a308d36e883a47d24754c.png)

如果我使用`Mode.Multiply`，它不会为透明背景着色，但结果太暗了。是否可以使用`Mode.Screen`而不着色透明部分？

我必须创建一个`ColorMatrix`吗？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-19T09:59:08.137

显然，您也可以使用[LightingColorFilter](http://developer.android.com/reference/android/graphics/LightingColorFilter.html)：

```
static ColorFilter screen(int c) {
    return new LightingColorFilter(0xFFFFFFFF - c, c);
} 
```

然后将其用作可绘制对象的颜色过滤器：

```
image.getDrawable().setColorFilter(screen(channel.getSelectedColor())); 
```

这似乎有效。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-14T10:42:15.353

由于标准 Mode.SCREEN 也会更改 alpha，因此您始终可以使用仅混合 RGB 并单独保留 alpha 的自定义颜色矩阵。这是示例代码：

```
static ColorFilter screen(int c) {
    float r = Color.red(c) / 256f, g = Color.green(c) / 256f, b = Color.blue(c) / 256f;

    return new ColorMatrixColorFilter(new ColorMatrix(new float[]
            {
                    1 - r, 0, 0, 0, r, // r
                    0, 1 - g, 0, 0, g, // g
                    0, 0, 1 - b, 0, b, // b
                    0, 0, 0, 1, 0, // a
            }));
} 
```

然后将其用作可绘制对象的颜色过滤器：

```
image.getDrawable().setColorFilter(screen(channel.getSelectedColor())); 
```

不幸的是，**这段代码不起作用**。看起来当前版本的 Android 只是[忽略了颜色矩阵的最右边一列](https://groups.google.com/forum/#!msg/android-developers/JZLcFqoe248/NOwlPM5RzW8J)。源代码也证明了这一点——[它只使用了原始矩阵的 4x4 部分](http://androidxref.com/5.0.0_r2/xref/external/chromium_org/cc/output/gl_renderer.cc#1307)。

# r - 计算中位数时如何将 na.rm=TRUE 传递给 sapply？

> ID：14463386
> 
> 赞同：16
> 
> 时间：2013-01-22T16:32:10.300
> 
> 标签：r, na, sapply, na.rm

我创建了一个带有 3 个变量的数据框“杀手”。尽管始终存在`NA`值，但数据是数字的。

我的目标是计算 3 个变量中每一个的平均值。

```
sapply(killers, function(x) median) 
```

这将返回：

```
$heartattack
function (x, na.rm = FALSE) 
UseMethod("median")
<bytecode: 0x103748108>
<environment: namespace:stats> 
```

我知道这个`na.rm`论点是一种忽略`NA`价值观的手段。由于`na.rm = FALSE`存在于 R 返回的内容中，因此假设有一种方法可以`TRUE`在上面的代码行中将其设置为。我尝试了一些变化：

```
sapply(killers, na.rm=TRUE function(x) median)
sapply(killers, function(x) median, na.rm=TRUE)
sapply(killers, function(x) median(na.rm=TRUE)) 
```

我不确定我是否接近或者这是否会涉及嵌套函数，正如其他类似的（尽管在我可以看到的这种情况下最终没有帮助）关于 SO 的主题的帖子。例如 [，如何将 na.rm 作为参数传递给 tapply？](https://stackoverflow.com/questions/14172556/how-to-get-na-rm-into-function-for-tapply/14172864#14172864), [忽略 sapply 函数中的 NA](https://stackoverflow.com/questions/6499905/ignore-nas-in-sapply-function)

当然，我可以只计算用于创建杀手的每个向量的平均值，但如果我的要求是可能的，那就更好了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-22T16:33:35.780

做就是了：

```
sapply(killers, median, na.rm = TRUE) 
```

另一种方法是（根据您的代码）

```
sapply(killers, function(x) median(x, na.rm=TRUE)) 
```

# objective-c - 对 Objective-c 视图、委托和出口的混淆

> ID：14463389
> 
> 赞同：2
> 
> 时间：2013-01-22T16:32:10.747
> 
> 标签：objective-c, cocoa, design-patterns, cocoa-design-patterns

我正在尝试自学 Objective-c，但来自 Python/Java 背景，事实证明这非常困难。我试图发布一堆我很困惑的观点，但它被标记为太模糊，所以我将它分成几个部分。

首先，我发现的每个委托和出口示例都使用可可视图代码来传达这个想法。不幸的是，我对代码的理解还不够，无法掌握示例的要点。那么，任何人都可以提供一个更基本的代表示例吗？我的理解是它是一种子类化方式；这比传统的子类化有什么好处？为什么每个 cocoa 项目都会自动包含 appDelegate.m？委托可以用于其他目的，而不仅仅是 GUI 的东西吗？

好吧，我想我明白了。所以委托是一个符合其他类协议的类。协议只是必须（或可以，如果设置为可选）在委托类中实现的方法和变量的列表。要创建委托，您必须使用 @interface 关键字，然后是委托的名称，然后（在 < > 符号中）协议名称？所以如果类 c1 想将自己设置为类 c 的委托，类 c 必须首先指定一个协议，对吗？然后，您将能够在 c1 中实现 c 协议中的所有内容：@interface c1; 我觉得我在那里遗漏了一些东西，但希望我的概念是正确的。:) 这也解释了神秘的小于和大于符号；他们声明委托实现的接口。

插座同样总是与查看代码相关联。它们似乎是某种对象间消息传递系统。是对的吗？同样，一个不与复杂的 GUI 语句混合的基本出口的例子会很棒。所以永远不需要网点？我知道除了与 Interface Builder 一起使用外，不需要 IBOutlet 和 IBAction，但我认为插座比这更通用？文档似乎表明它们甚至不是专门用于接口的，而是可以用于任何东西。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:51:13.707

**更新**：代表不必*遵守*协议。协议只是使*要求*某些类具有方法变得更加容易。它可以让您确定一个已设置为委托的对象实现了某个方法，因此您可以安全地调用它，并允许编译器验证该方法确实已实现（如果您将委托实例变量声明为`id<SomeProtocol> delegate`，编译器将如果您尝试设置`delegate`为不符合的类的对象，则给出警告或错误`SomeProtocol`。

协议有助于确保安全，但并非绝对必要。一个类可以有一个委托（或多个！），它们根本不必遵守任何协议。

至于插座，不，它们是专门用于且仅与 Interface Builder 一起使用的。`IBOutlet`and关键字对`IBAction`代码没有影响（它们甚至在编译之前就被去掉了）——它们只是 Interface Builder 寻找的标记，因此它知道哪些属性和方法应该在接口中可访问。术语“出口”是对标记为 的东西的直接引用`IBOutlet`，并且实际上没有用于我可以告诉的任何其他上下文中。

**同样**，如果您不立即理解这一点也没关系。仔细考虑一下，在某些时候，它会“点击”。追了*半天*，就这样，有一天，我才发现，代言人真的没有什么特别的。它们是其他对象引用的常规对象——只是这种设计模式有一个特殊的名称（委托），而这些对象仅*称为*委托。它们可以很容易地被称为`gyros`or `falafels`，并且净效果是一样的。:P
你不需要`delegate`为它命名一个对象来成为一个委托；这只是一个约定。

* * *

关于代表：首先要了解，这让我有一段时间，直到我有正确的“啊哈！” 时刻，“代表”没有什么特别之处。“委托”一词只是另一个类所依赖的一类对象的标题，通常用于内容或决策。当开发人员不想（或不能）通过名称将他们的一个类绑定到另一个类时，他们将使用委托 - 这是一种面向对象的解耦方式并使类更通用。

现在，很多时候，类将要求委托具有它们所依赖的特定方法，而确保这一点的一种方法是使用协议（通常称为 Java 中的接口）。协议定义了一系列方法；类“符合”协议，如果他们在他们的接口中声明他们这样做（例如`@interface IFObject : NSObject <SomeProtocol> { ... }`）并且如果他们实现了他们需要的所有方法。协议也可以有可选的方法。

该模型通常与视图控制器、视图和 GUI 一起使用，因为许多 AppKit 和 UIKit 类被编写为尽可能通用。`NSTableView`，例如，实现它可能实现的最基本的行为，而不需要任何特定于实现的信息；其余的，它依赖于其他对象，即符合`NSTableViewDelegate`和`NSTableViewDataSource`协议的对象。*任何*对象都可以符合协议，只要它们实现了正确的方法（在这种情况下，控制器类通常会实现两种协议的方法，但不必如此）。事实上，更好地理解这个主题的一个简单方法是看一下`NSTableView`- 它有一个`delegate`属性和一个`dataSource`属性，但实际上，它们没有什么不同。`delegate`可以被调用`monkeyButt`，并且这个概念仍然有效。关键是不要将代表视为黑匣子——它们没有什么特别之处。

代表也可以用于非 GUI 目的；正如您所提到的，一个具体的例子是应用程序委托。`NSApplication`发送一个委托通知，让它知道应用程序何时启动（除其他外），因此它可以设置商店。同样，出于*任何目的，**任何对象都可以成为**任何其他对象*的委托。这只是一个约定。

 ** * *

简要介绍出口：正如其他人所提到的，出口只是在 XIB 中定义的接口与您的代码之间的连接。它们是让 Xcode 将界面链接到适当元素的一种方式，这样当您的应用程序加载界面文件时，它可以加载正确的代码片段或执行它们。

它们通常是设置界面的一种更简单的方法 - 它们不是绝对必要的（您可以通过编程方式创建界面，而无需使用 XIB 文件），但如果您决定采用 XIB 路线，它们就是您的方式将您的界面与您的代码联系起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:53:17.180

委托是一个对象，它被一个它声明自己是委托的对象委派了一些任务。假设一个对象执行了一些任务，然后需要通知“拥有”它的对象，可以这么说。为了让对象在任何条件下都能工作，不能让它知道自己应该联系什么类型的对象，所以我们设置了它的委托并遵守它的协议。设置对象的委托就像是在说“这是我希望你使用的对象与协议中声明的消息的联系。我保证该对象实际上实现了协议中的方法。” 例如，您可能会看到这个。

```
@protocol SpriteDelegateProtocol
    @required
    - (void) projectionMatrix;
    @optional
    - (void) animation:(int)animationIndex willCompleteFrameNumber:(int)frame forSprite:(id)sender;
@end

@interface Sprite
@property (nonatomic, assign) id<SpriteDelegateProtocol> delegate;
@end 
```

我们的 sprite 对象的接口声明它有一个称为委托的属性，它的类型为`id`。它可以是任何对象，但必须遵守三角括号中的协议。如果它说它遵守协议，它*必须*实现@required 下声明的方法，并且*可以*实现@optional 下列出的方法。由我们来决定我们的委托是否真的使用类似`respondsToSelector:`. 如果我们有很多方法可以做到这一点，我们甚至可以存储返回值。

应用程序委托的特殊之处在于它是我们的 UIApplication 对象的委托。它接收有关应用程序状态的消息，例如`applicationDidEnterBackground:`. [您可以在此处查看](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)我们的应用程序委托所遵循的协议中的哪些方法。

委托可以与任何对象一起使用。任何对象都可以说它具有要设置的委托属性，并且它必须具有如上所示的以下方法。该协议本质上是一个可移植的接口，可用于告诉另一个对象我们需要它来实现什么，以便我们可以调用所述方法将部分功能委托给它。我们可以在任务完成时通知我们的委托，要求它向我们提供信息（通常称为数据源而不是委托，以便如果您愿意它们可以是不同的对象），或者询问我们是否应该在全部。

出口是将在 NIB 或情节提要中实例化的视图连接到其控制器中的属性的一种方式。因此，如果您将 UIViewController 放入主故事板并将其类更改为 MyGreatControllerSubclass 然后继续在该控制器的视图中放置一个按钮，您可能希望将该按钮连接到控制器界面中的“插座”（属性），以便您可以稍后从控制器访问该按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:37:45.147

没有代表不是子类化的一种方式。我也是 Java 出身，做 OC 已经快 5 年了。

委托通常遵循与接口等效的协议。这样做的好处在于，它为您在如何实现委托所涵盖的内容方面提供了很大的灵活性。例如，您将看到可以通过扩展 UITableViewController 或实现委托来实现表视图。这样，如果您有一个组合视图，其中用户从一个表中选择项目并将它们放入另一个表中，您可以执行单个控制器并让它为两个视图执行委托。

考虑委托的最佳方式是作为面向消息/事件的回调的示例。你有没有听过这样的说法，框架与普通编程的不同之处在于，框架告诉你它想让你做什么来确保你寻求的结果？这就是代表团。昨晚我在做一个收藏视图，但无法打开编辑菜单。只需提供三种方法的委托，对菜单的调用方式、长按手势处理程序的位置等一无所知。

请注意，委托是使 OC 世界不需要依赖注入的粘合剂。我更喜欢他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:48:45.150

代表是常见的设计模式（http://en.wikipedia.org/wiki/Delegation_pattern），它们不是特定于objective-c的。

Outlets 使控制器和视图（GUI）的绑定成为可能。你可能知道 MVC 范式（模型-视图-控制器）吗？因此，您使用 Interface Builder 构建您的 GUI（来自 MVC 的视图），并使用 outlet 将此 GUI 的元素（例如按钮、文本字段等）绑定到您的 Obj-C 代码（来自 MVC 的控制器）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T03:32:36.383

看看这篇文章：[在 C# 代码中符合 Objective-C 的协议](http://scientilla.info/index.php/conforming-objective-cs-protocols-in-c-codes/#CSharpImplementation)

不要担心标题中的“C#”这个词，你可以忽略那部分。这篇文章的主要部分讨论了 Objective-C 中的`protocols`和。`delegates`这可能会有所帮助。*

# r - 在具有嵌套因子的条形图中删除每个面板未使用的因子

> ID：14463392
> 
> 赞同：7
> 
> 时间：2013-01-22T16:32:22.103
> 
> 标签：r, plot, lattice

前段时间我问了一个关于[如何删除条形图中未使用的因素的](https://stackoverflow.com/questions/12391429/removing-per-panel-unused-factors-in-a-bar-chart)问题，感谢@Aaron，我得到了一个有用的解决方案。现在，我面临一个非常相似的问题，但我过去使用的解决方案不适用于这种情况。

这是重现我正在使用的数据框的代码：

```
set.seed(17)
df <- data.frame(BENCH = sprintf('bench-%s', sort(rep(letters[1:8], 4))),
                 CLASS.CFG = sprintf('class-%s',
                     c(rep('C', 4), rep('A', 4), rep('B', 8),
                       rep('C', 8), rep('A', 4), rep('D', 4))),
                 EXEC.CFG = rep(c('st', 'st', 'dyn', 'dyn'), 8),
                 METRIC = rep(c('ipc', 'pwr'), 16),
                 VALUE = runif(32)) 
```

绘制此数据框的直接命令是：

```
library(lattice)
barchart(VALUE ~ BENCH | EXEC.CFG + CLASS.CFG, df, groups = METRIC,
         scales = list(x = list(rot = 45, relation = 'free')),
         auto.key = list(columns = 2)) 
```

如您所见，我正在为每个 BENCH 绘制 VALUE，这些 BENCH 受限于 EXEC.CFG 和 CLASS.CFG 的每个可能组合（这就是我对嵌套因子的意思），并使用 METRIC 创建组。

这是我得到的结果：

![plot_with_gaps](../Images/db65f1b345a007305f8374443b676410.png)

即使我对 X 轴使用“自由”比例，在图中，某些条形之间（例如，在`bench-b`和之间）之间也存在一些（不必要的）间隙`bench-g`。

我尝试通过以下方式应用我为上一个问题获得的解决方案：

```
pl1 <- barchart(VALUE ~ BENCH | EXEC.CFG + CLASS.CFG,
    subset(df, CLASS.CFG == 'class-A'), groups = METRIC,
    auto.key = list(columns = 2))
pl2 <- barchart(VALUE ~ BENCH | EXEC.CFG + CLASS.CFG,
    subset(df, CLASS.CFG == 'class-B'), groups = METRIC)
pl3 <- barchart(VALUE ~ BENCH | EXEC.CFG + CLASS.CFG,
    subset(df, CLASS.CFG == 'class-C'), groups = METRIC)
pl4 <- barchart(VALUE ~ BENCH | EXEC.CFG + CLASS.CFG,
    subset(df, CLASS.CFG == 'class-D'), groups = METRIC)

pls <- c(pl1, pl2, pl3, pl4)
pls <- update(pls, scales = list(y = 'same'))
pls 
```

这是我得到的结果：

![错误的情节](../Images/8a6f161adc1ff959bb83893db1edc10d.png)

你会注意到，这个情节是不正确的。它不尊重嵌套因素，混合来自面板标题中的 CLASS.CFG 和 EXEC.CFG 的值。

我已经为此奋斗了一段时间，但没有成功。有谁知道如何做到这一点？（基本上，我想要获得的是一个像第一个一样的情节，但没有条形之间的间隙）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:32:51.127

为此，您需要提供修改后的`prepanel`函数（设置每个面板的绘图区域的限制）和修改后的`panel`函数（负责绘制数据）。在这两种情况下，关键修改是用于`x[, drop=TRUE]`删除未使用的级别：

```
library(lattice)

barchart(VALUE ~ BENCH | EXEC.CFG + CLASS.CFG, df, groups = METRIC,
         scales = list(x = list(rot = 45, relation = 'free')),
         prepanel = function(x,y,...) {
             xx <- x[, drop = TRUE]
             list(xlim = levels(xx),
                  xat=sort(unique(as.numeric(xx))))
         },
         panel = function(x,y,...) {
             xx <- x[, drop = TRUE]
             panel.barchart(xx, y, ...)
         },
         auto.key = list(columns = 2)) 
```

![在此处输入图像描述](../Images/645b81db926c67ae2981b6832bdd5005.png)

# android - PagerAdapter 内的 onClickListener

> ID：14463394
> 
> 赞同：1
> 
> 时间：2013-01-22T16:32:27.340
> 
> 标签：android, android-layout, android-viewpager, android-button, android-pageradapter

所以我一直在努力解决这个问题。我是一个相当新的 android 开发人员，所以对我来说理解一些概念仍然非常困难。

在我的布局中，我使用 PagerAdapter 在页面之间水平滑动。我想在登陆布局中有一个按钮，当点击时，滚动到相邻的布局。

现在我的问题是，一旦我点击那个按钮，我就会得到一个 NPE。所以我看到了问题，但不知道如何编写它以使其真正做到它应该做的事情。

这是我的代码。

```
public class CustomPageAdapter extends PagerAdapter {

ViewPager mPager;

public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
        case 0: {
            resId = R.layout.field01;
            break;
        }
        case 1: {
            resId = R.layout.add_site;
            break;
        }
        case 2: {
            resId = R.layout.main;
            break;
        }
    }

    View view = inflater.inflate(resId, null);
    if (position == 1) {
        Button addSiteButton = (Button) view.findViewById(R.id.addSiteButton);
        addSiteButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
             mPager.setCurrentItem(2); //NPE happens here.
            }
        });
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

@Override
public int getCount() {
    return 3;
}
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:44:48.157

发生 NPE 是因为您试图访问 mPager，它只是一个引用而不指向任何内容，由以下行创建： ViewPager mPager;

您需要从 mPager 参考中的布局中检索 viewPager，如下所示：

ViewPager mPager = (ViewPager) findViewById(R.id.pager);

# css - Inset Box-Shadow 用于 Container DIV 以覆盖其中的其他块元素

> ID：14463398
> 
> 赞同：0
> 
> 时间：2013-01-22T16:32:34.047
> 
> 标签：css

我有一个`<div>`包裹 5 个其他`<div>`s 的容器。我想为`box-shadow: inset`容器 div 应用一个属性，所以看起来该容器中的所有元素都在它的下方，并且阴影在它们的“顶部”。

问题是，`<div>`容器内的元素似乎出现在顶部，并隐藏了阴影。我已经测试了容器`<div>`，以确保`box-shadow`通过删除其中的任何一个 div 来正确应用效果。我还尝试调整`z-index`所有元素的 's 以调整哪些元素位于什么之上。

我可以使用我现在拥有的 HTML 结构来实现这种效果吗？诉诸于`position:absolute`容器上方的 div 是否能够产生这种效果？

请参阅示例 - [http://jsfiddle.net/mDcKz/](http://jsfiddle.net/mDcKz/)

非常感谢所以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T08:58:10.663

是的，试试这个：

```
.container {
position:absolute; display:block;
margin:0px;
padding:0px;
height:100%; width:100%;
box-shadow:inset 0 0 20px #000000;
background:none;
z-index:10 !important;
pointer-events:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:52:16.087

试试这个代码

```
.container {
position:absolute; display:block;
margin:0px;
padding:0px;
height:100%; width:100%;
box-shadow:inset 0 0 20px #000000;
background:none;
z-index:10 !important;
} 
.subcontainer {position:absolute; display:block;z-index:5 !important;height:100%;     width:100%;}

<div class="container">

<div class="clear"></div>
</div>
<div class="subcontainer">
<div class="divider red"></div>
<div class="divider yellow"></div>
<div class="divider green"></div>
<div class="divider orange"></div>
<div class="divider gray"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T08:48:06.650

我在将 box-shadow 应用于容器时遇到了类似的问题，这是对我有用的解决方案：-

**HTML 代码**

```
<div class="graph">

    <section>
        <div>
            <span class="danger" style="height: 29.33333333333333%;">Failed</span>
        </div>

        <div>
            <span class="safe" style="height: 70.66666666666667%;">Sent</span>
        </div>
    </section>

</div> <!-- END GRAPH --> 
```

**CSS 代码**

```
 .graph {
width: 280px;
height: 300px;
position: aboslute;
box-shadow: inset 0 0 30px rgba(0,0,0,0.5);
z-index: 999;
}

.graph section {
width: 100%;
height: 100%;
display: table;
text-align: center;
position: relative;
z-index: -1;
background: orange;
margin: 0;
padding: 0;
}

.graph section div {
display: table-row;
position: relative;
}

.graph section span {
display: table-cell;
vertical-align: middle;
position: relative;
z-index: 1;
} 
```

这样，box-shadow 就会覆盖子元素，并且子元素也可以访问。

# c# - Func 委托不链接方法

> ID：14463400
> 
> 赞同：11
> 
> 时间：2013-01-22T16:32:40.973
> 
> 标签：c#, delegates, func

让我们想象一下简单的委托调用：

```
void Main()
{
    Func<int, int, string> tfunc = null;
    tfunc += Add; // bind first method
    tfunc += Sub; // bind second method 

    Console.WriteLine(tfunc(2, 2));
}

private string Add(int a, int b)
{
    return "Add: " + (a + b).ToString();
}

private string Sub(int a, int b)
{
    return "Sub: " + (a - b).ToString();
} 
```

这个程序的结果是：

```
Sub: 0 
```

那么，为什么没有调用**Add方法呢？**我期待调用方法 Add，**然后**调用方法 Sub。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T16:34:51.613

**Add**被正确链接和调用，看看结果

```
void Main()
{
    Func<int, int, string> tfunc = null;
    tfunc += Add; // bind first method
    tfunc += Sub; // bind second method 

    Console.WriteLine(tfunc(2, 2));
}

private string Add(int a, int b)
{
    Console.WriteLine("Inside Add");
    return "Add: " + (a + b).ToString();
}

private string Sub(int a, int b)
{
    Console.WriteLine("Inside Sub");
    return "Sub: " + (a - b).ToString();
} 
```

这是：

```
Inside Add
Inside Sub
Sub: 0 
```

没有链接的，因为没有办法访问它，是 Add 方法的结果。返回值的委托，在链接的情况下，返回最后调用的方法的值，即添加到委托的最后一个方法。

这在[C# 4.0 语言规范的第 15.4 部分中指定](http://msdn.microsoft.com/en-us/library/ms228593.aspx)

> 其调用列表包含多个条目的委托实例的调用通过按顺序同步调用调用列表中的每个方法来进行。...如果委托调用包含输出参数或返回值，则它们的最终值将来自列表中最后一个委托的调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:38:10.923

问题是在方法调用之间没有传递返回值，所以输出只捕获最后一个返回的字符串。即 Add 的返回丢失。

# html - HTML 电子邮件浏览器兼容性问题

> ID：14463403
> 
> 赞同：0
> 
> 时间：2013-01-22T16:32:45.763
> 
> 标签：html, image, html-table, html-email

我正在编码的电子邮件遇到问题，但我无法找到答案。在浏览器中查看 HTML 文件时，我有一个区域显示正常，但 GMail 和 Firefox 和 IE 等浏览器会导致一些问题。对齐方式搞砸了，图像不在正确的位置，等等。我认为我遇到的问题是，在某些浏览器中，我的右侧文本列被推到我的项目符号列下方。我想知道是否有人能在我的代码中找到一些可能对我有帮助的缺陷。这是给我带来麻烦的部分：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ISSGT 2013</title>
</head>

<body>

<!--Header-->
<table border="0" align="center" cellpadding="0" cellspacing="0" style="border-collapse:0px;margin-bottom:5px;">
<tr>
<td>
<a href="http://www.ieee-isgt.org"><img src="header.jpg" alt="Header" height="86" width="600" style="display:block;border:0;vertical-align:bottom;"/></a>
</td>
</tr>
</table>

<!--Headline-->
<table width="600" border="0" align="center" cellspacing="0">
<tr>
<td align="center" style="background-color:#436ead; padding-top:10px; padding-right:30px; padding-bottom:10px; padding-left:30px;">

<table cellspacing="0">
<tr>
<td style="font-family:Arial, Helvetica, sans-serif;font-size:19px;line-height:22px;font-weight:normal;color:#fff;text-align:center;margin-top:-15px;">The 4th Annual IEEE PES Conference on<br />Innovative Smart Grid Technologies is less than<br /><span style="font-family:Arial, Helvetica, sans-serif;font-size:44px;line-height:43px;font-weight:bold;color:#fff;text-align:center;">6 WEEKS AWAY!</span></td>
</tr>
</table>

</td>
</tr>
</table>    

<!--Body-->
<table align="center" cellspacing="0" style="margin-top:10px; vertical-align:top;">
<tr>
<td width="540" style="font-family:Arial, Helvetica, sans-serif;font-size:17px;line-height:18px;font-weight:bold;color:#141313;text-align:left;">Very soon, hundreds of your colleagues &#8211; smart grid practitioners, executives, researchers and policy makers &#8211; will gather in Washington D.C. to review and discuss ground&#8211;breaking innovations in smart grid technologies.</td>
</tr>
</table>

<table align="center" cellspacing="0" style="margin-top:10px;vertical-align:top;">
<tr>
<td align="center" cellpadding="0" cellspacing="0" style="border-collapse:0px;vertical-align:top;"> 
```

```
<table width="540" align="center" cellspacing="0" style="margin-top:10px;vertical-align:top;">
<tr>
<td height="auto" width="540" style="font-family:Arial, Helvetica, sans-serif;font-size:17px;line-height:18px;font-weight:normal;color:#141313;text-align:left;margin-top:10px">In addition to the impressive roster of keynote speakers, and presentations by recognized leaders in the field, here are some compelling reasons <span style="font-family:Arial, Helvetica, sans-serif;font-size:17px;line-height:18px;font-weight:bold;color:#141313;text-align:left;">why you MUST attend this year’s event&#58;        </span></td>
</tr>
</table>

<!--Container-->
<table height="auto" width="600" align="center" cellspacing="0" cellpadding="0" style="margin-top:15px;border-collapase:0px;vertical-align:top;">
<tr>

<!--Image-->
<td height="298" width="243" cellpadding="0" cellspacing="0" style="font-size:0px;line-height:0px;border-collapse:0px;"><img src="dc1.jpg" alt="Washington DC" height="298px" width="243px" style="display:block;border:0;overflow:hidden;margin:0px;padding:0px;vertical-align:bottom;font-size:0px;line-height:0px;"/></td>

<!--Bullet Container-->
<td style="vertical-align:top;border:0;border-collapse:0;">
<table height="auto" width="357" cellspacing="0" align="center" style="vertical-align:top;border-collapse:0px;float:right;display:inline;">

<!-- Bullet 1-->

<tr>
<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;text-align:left;float:left;font-weight:bold;text-align:left;vertical-align:top;border-collapse:0px;">&bull;</td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">RESULTS&#58;</span>Learn about real-practice technology, deployment experience, and customer acceptance issues related to smart grid.</td>
</tr>

<!-- Bullet 2-->
<tr>
<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;text-align:left;float:left;font-weight:bold;text-align:left;vertical-align:top;padding-top:10px;border-collapse:0px;">&bull;</td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-top:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">NETWORKING&#58;</span>Meet and speak directly with industry leaders, regulators and entrepreneurs working with the smart grid.</td>
</tr>

<!-- Bullet 3-->
<tr>
<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;text-align:left;float:left;font-weight:bold;text-align:left;vertical-align:top;padding-top:10px;border-collapse:0px;">&bull;</td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-top:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">OPPORTUNITY&#58;</span>International speakers will report on real success stories and pitfalls – as well as current business.</td>
</tr>

<!-- Bullet 4-->
<tr>

<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:left;font-weight:bold;text-align:left;vertical-align:top;padding-top:10px;border-collapse:0px;">&bull;    </td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-top:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">RESEARCH&#58;</span>Noted academics and practitioners talk candidly about their work in making smart grid a cost-effective proposition.</td>
</tr>

</table>

</td>
</tr>
</table>

<table height="auto" width="600" align="center" cellspacing="0" cellpadding="0" style="border-collapse:0px;font-size:0px;line-height:0px;">
<tr>
<td><img src="dc2.jpg" alt="Washington DC" height="48px" width="600px" style="display:block;border:0;overflow:hidden;vertical-align:bottom"/></td>
</tr>
</table>

<table width="600px" height="auto" align="center" style="background-color:#168116;vertical-align:top;">
<tr>
<td style="font-family:Arial, Helvetica, sans-serif;font-size:27px;line-height:31px;color:#fff;text-align:center;padding-top:30px;">SEATS ARE FILLING UP FAST!
</td>
</tr>

<tr>
<td align="center" cellpadding="0" cellspacing="0" style="border-collapse:0px;">
<a href="http://www.isgtreg.com"><img src="button2.jpg" alt="Register" height="48" width="312" style="border:0px;vertical-align:top;"/></a>
</td>
</tr>

<tr>
<td style="font-family:Arial, Helvetica, sans-serif;font-size:15px;line-height:17px;color:#fff;text-align:center;padding-top:10px;padding-bottom:20px;">For more information on programs<br />and speakers, visit <span style="font-family:Arial, Helvetica, sans-serif;font-size:15px;font-style:italic;line-height:17px;color:#fff;"><a href="http://www.ieee-isgt.org" style="color:#fff;text-decoration:none;">www.ieee-isgt.org</a></span>
</td>
</tr>
</table>

<!--Footer-->
<table height="auto" width="600" border="0" align="center" style="margin-top:5px;">

<tr>
<td height="auto" width="auto" align="center" style="background-color:#e5e4e4; padding-top:10px; padding-right:30px; padding-bottom:10px; padding-left:30px;">
<p style="font-family:Arial, Helvetica, sans-serif;font-size:11px;line-height:17px;font-weight:bold;color:#3e3e3e;text-align:left;">ISGT 2013 conference co-sponsoring societies include IEEE-USA, IEEE Dielectrics and Electrical Insulation Society, IEEE Industry Applications Society, IEEE Industrial Electronics Society, IEEE Power Electronics Society, IEEE Systems Council and IEEE Signal Processing Society.</p>
</td>
</tr>

<!--Unsubscribe-->
<tr>
<td height="40" width="600" align="center">
<p style="font-family:Arial, Helvetica, sans-serif;font-size:11px;line-height:14px;font-weight:normal;color:#141313;text-align:center;">If you no longer wish to receive these types of messages from IEEE PES Media,<br />please <a href="/" style="color:#168116;text-decoration:none;">click here</a> or fax 703-860-1623, or write 445 Hoes Lane, Piscataway, N.J. 08854.</p>
</td>
</tr>
</table>

</body>
</html> 
```

[应该怎么看...](http://img132.imageshack.us/img132/908/screenshot20130122at112.png)

这是它作为 HTML 文件出现在浏览器中，这就是我希望它在每个实例中出现的方式。如果有人能说出我想念的东西，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:43:57.313

```
<style>
.content span{color:green;}
</style>
<table>
    <tr>
        <td>
            <img src="topleft_background.png"/>
        </td>
        <td>    
            <ul class="content">
            <li><span>Green Text:</span> Regular text.</li>
            <li><span>Green Text:</span> Regular text.</li>
            <li><span>Green Text:</span> Regular text.</li>
            <li><span>Green Text:</span> Regular text.</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>
            <img src="bottomleft_background.png"/>
        </td>
        <td>    
            <img src="bottomright_background.png"/>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:09:09.267

我可以推荐[mailrox.com吗](http://mailrox.com)

为你做所有这些事情。

编辑：

尝试这个：

```
<html style="width: 100%; margin-top: 0px !important; padding-top: 0px !important;"><head>

   <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title></title>
</head><body style="width: 100%; font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif; letter-spacing: normal; word-spacing: 0px; text-shadow: none; color: #000000; font-size: 13px; line-height: 17px; background-color: #FEFEFE; margin: 0px 0 0 0px; padding: 0px 0 0;" bgcolor="#FEFEFE"><table width="100%" cellspacing="0" cellpadding="0" align="center" style="border-collapse: collapse; border-spacing: 0px; background-color: #FEFEFE; margin: 0px; padding: 0px; border: 0px none;" bgcolor="#FEFEFE">
    <tbody>
        <tr align="center" style="border-collapse: collapse; border-spacing: 0px; border: 0px none;">
            <td valign="top" align="center" style="border-collapse: collapse; border-spacing: 0px; border: 0px none;">
                <table width="603" cellspacing="0" cellpadding="0" border="0" align="center" style="border-collapse: collapse; border-spacing: 0px; margin: 0px; padding: 0px; border: 0px none;">
                    <tbody>
                            <tr align="left" style="border-collapse: collapse; border-spacing: 0px; border: 0px none;">
                                <td width="603">
                                    <table width="603" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0px; margin-top: 0px !important; padding-top: 0px !important; border: 0px none;">
                                        <tbody>
                                            <tr align="left" style="border-collapse: collapse; border-spacing: 0px; border: 0px none;">
                                                <td width="603">
                                                    <table width="603" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0px; margin-top: 0px !important; padding-top: 0px !important; border: 0px none;">
                                                        <tbody>
                                                            <tr style="border-collapse: collapse; border-spacing: 0px; height: 20px; border: 0;"><td width="603" valign="top" height="20" align="left" style="background-color: #FEFEFE;" bgcolor="#FEFEFE"><img width="1" height="20" style="display: block; line-height: 1; opacity: 0; padding: 0px; border: 0;" src="images/clear.gif" alt=""></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
    </tbody>
</table>
<table align="center" cellpadding="0" cellspacing="0" width="100%" style="border-collapse: collapse; border-spacing: 0; background-color: #FEFEFE; margin: 0px 0 0; padding: 0px 0 0; border: 0;" bgcolor="#FEFEFE"><tbody><tr align="center" style="border-collapse: collapse; border-spacing: 0; border: 0;">
                        <td align="center" valign="top" style="border-collapse: collapse; border-spacing: 0; border: 0;">
                            <table width="603" align="center" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0; margin: 0px 0 0; padding: 0px 0 0; border: 0;">
                                <tbody>
                                        <tr align="left" style="border-collapse: collapse; border-spacing: 0; border: 0;">
        <td width="603">
            <table width="603" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; padding-top: 0px !important; border: 0;">
                <tbody>
                    <tr style="border-collapse: collapse; border-spacing: 0; border: 0;"><td width="242" height="376" align="left" valign="top" style="">

            <img height="376" src="images/image-268344-530390.jpg" style="display: block; line-height: 1; padding: 0; border: 0;" width="242">

</td>
<td width="361" align="left" valign="top">
    <table width="361" align="center" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0; margin: 0px 0 0; padding: 0px 0 0; border: 0;">
        <tbody>
                <tr align="left" style="border-collapse: collapse; border-spacing: 0; border: 0;">
        <td width="361">
            <table width="361" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; padding-top: 0px !important; border: 0;">
                <tbody>
                    <tr style="border-collapse: collapse; border-spacing: 0; border: 0;"><td width="361" height="257" align="left" valign="top" style="">

            <table height="auto" width="357" cellspacing="0" align="center" style="vertical-align:top;border-collapse:0px;float:right;display:inline;">

<!-- Bullet 1-->

<tbody><tr>
<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;text-align:left;float:left;font-weight:bold;text-align:left;vertical-align:top;border-collapse:0px;">•&lt;/td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">RESULTS:</span>Learn about real-practice technology, deployment experience, and customer acceptance issues related to smart grid.</td>
</tr>

<!-- Bullet 2-->
<tr>
<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;text-align:left;float:left;font-weight:bold;text-align:left;vertical-align:top;padding-top:10px;border-collapse:0px;">•&lt;/td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-top:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">NETWORKING:</span>Meet and speak directly with industry leaders, regulators and entrepreneurs working with the smart grid.</td>
</tr>

<!-- Bullet 3-->
<tr>
<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;text-align:left;float:left;font-weight:bold;text-align:left;vertical-align:top;padding-top:10px;border-collapse:0px;">•&lt;/td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-top:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">OPPORTUNITY:</span>International speakers will report on real success stories and pitfalls – as well as current business.</td>
</tr>

<!-- Bullet 4-->
<tr>

<td height="auto" width="8" cellpadding="0" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:left;font-weight:bold;text-align:left;vertical-align:top;padding-top:10px;border-collapse:0px;">•    </td>

<td height="auto" width="311" cellspacing="0" style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;color:#141313;float:right;text-align:left:10px;padding-top:10px;padding-right:30px;"><span style="font-family:Arial, Helvetica, sans-serif;font-size:14px;line-height:17px;font-weight:bold;color:#168116;text-align:left;margin-right:3px;">RESEARCH:</span>Noted academics and practitioners talk candidly about their work in making smart grid a cost-effective proposition.</td>
</tr>

</tbody></table>

</td>
</tr>                   
                </tbody>
            </table>
        </td>
  </tr>
    <tr align="left" style="border-collapse: collapse; border-spacing: 0; border: 0;">
        <td width="361">
            <table width="361" cellspacing="0" cellpadding="0" border="0" style="border-collapse: collapse; border-spacing: 0; margin-top: 0px !important; padding-top: 0px !important; border: 0;">
                <tbody>
                    <tr style="border-collapse: collapse; border-spacing: 0; border: 0;"><td width="361" height="119" align="left" valign="top" style="">

            <img height="119" src="images/image-268346-530393.jpg" style="display: block; line-height: 1; padding: 0; border: 0;" width="361">

</td>
</tr>                   
                </tbody>
            </table>
        </td>
  </tr>

        </tbody>
    </table>
</td>
</tr>                   
                </tbody>
            </table>
        </td>
  </tr>

                                </tbody>
                            </table>
                        </td>
                    </tr>
            </tbody></table>

<style type="text/css">
body { width: 100% !important; margin-top: 0px !important; padding-top: 0px !important; }
body { background-color: #FEFEFE !important; margin-top: 0px !important; padding-top: 0px !important; font-family: sans-serif !important; }
body { letter-spacing: normal !important; word-spacing: 0px !important; margin-top: 0 !important; padding-top: 0 !important; margin-right: 0 !important; padding-right: 0 !important; margin-bottom: 0 !important; padding-bottom: 0 !important; margin-left: 0 !important; padding-left: 0 !important; text-shadow: none !important; color: #000000 !important; font-size: 13px !important; line-height: 17px !important; font-family: Arial, "Helvetica Neue", Helvetica, sans-serif !important; }
</style>

</body></html> 
```

# magento - Magento 模型删除功能

> ID：14463404
> 
> 赞同：2
> 
> 时间：2013-01-22T16:32:46.917
> 
> 标签：magento, model

我有扩展**Mage_Core_Model_Abstract**的模型类。我有一个扩展**Mage_Core_Model_Mysql4_Abstract**的资源。现在我使用以下代码从控制器中删除：

```
public function deleteAction()
{
    $params = $this->getRequest()->getParams();
    $blogpost = $this->_createModel();
    $blogpost->setId($params['id']);
    $blogpost->delete();
    echo 'Post with id ' . $params['id'] . ' is deleted';
} 
```

问题是当我提供**不存在的**ID 时没有显示错误。该怎么办 ？我是否必须加载该 ID 并检查它是否存在？或者我应该使用**try/catch**。我使用了 try and catch 但没有给出任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:57:45.470

当然它不会抛出异常，该`DELETE`语句最终会在没有错误的情况下执行，它只有受影响的行数为 0。

不幸的是，行数在这里丢失了（`Mage_Core_Model_Resource_Db_Abstract`）：

```
/**
 * Delete the object
 *
 * @param Varien_Object $object
 * @return Mage_Core_Model_Resource_Db_Abstract
 */
public function delete(Mage_Core_Model_Abstract $object)
{
    $this->_beforeDelete($object);
    $this->_getWriteAdapter()->delete(
        $this->getMainTable(),
        $this->_getWriteAdapter()->quoteInto($this->getIdFieldName() . '=?', $object->getId())
    );
    $this->_afterDelete($object);
    return $this;
} 
```

`_getWriteAdapter()->delete()`因为没有在任何地方使用的返回值

看起来您确实必须在删除模型之前加载它，或者至少通过资源集合检查它的存在。

# php - Yii 框架没有返回带有 Yii-user 扩展的正确 WebUser 类

> ID：14463407
> 
> 赞同：0
> 
> 时间：2013-01-22T16:33:01.887
> 
> 标签：php, yii, yii-extensions

我在 Yii webapp 中安装了[Yii-User 。](http://www.yiiframework.com/extension/yii-user)但是，如果我使用这个打印出 User 对象：`Yii::app()->user`我得到 CWebUser 类而不是[Yii-user](http://www.yiiframework.com/extension/yii-user)扩展类 WebUser。

我的 main.php 配置设置如下：

```
 ...
    'components'=>array(
        'user'=>array(
            // enable cookie-based authentication
            'allowAutoLogin'=>true,
            'loginUrl' => '/user/login',
            'class' => 'WebUser',
         ),
    ),
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:48:10.880

我相信您已经正确配置了模块的其余部分：

```
// autoloading model and component classes
'import'=>array(
  'application.models.*',
  'application.components.*',
  'application.modules.user.models.*',
  'application.modules.user.components.*',
),
...
'modules'=>array(
        #...
       'user' => array ( ... )
 ), 
```

如果是这样，但它仍然不起作用，请尝试像这样配置用户组件：

```
...
'components'=>array(
    'user'=>array(
        // enable cookie-based authentication
        'allowAutoLogin'=>true,
        'loginUrl' => '/user/login',
        'class' => 'application.modules.user.components.WebUser',
     ),
),
... 
```

# stylecop - 您如何配置 StyleCop 以针对特定的构建配置运行？

> ID：14463414
> 
> 赞同：4
> 
> 时间：2013-01-22T16:33:15.643
> 
> 标签：stylecop, csproj

我在 csproj 文件中添加了以下导入语句：

```
<Import Project="..\..\..\packages\StyleCop 4.7\StyleCop.targets" /> 
```

这工作正常，但是我只希望样式警察分析在调试版本上运行，而不是在发布版本上运行。我的 Google Fu 今天让我失望了，虽然我发现你可以创建一个控制台命令行包装器`StyleCopConsole`并手动运行它（[http://stylecopplus.codeplex.com/wikipage?title=Running%20StyleCop%20from%20Your%20Code](http://stylecopplus.codeplex.com/wikipage?title=Running%20StyleCop%20from%20Your%20Code) )，如果可能的话，我宁愿只编辑项目文件，以便它在调试版本上自动运行。

知道这是否可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:43:35.070

您可以有条件地导入目标

```
<Import Project="..\..\..\packages\StyleCop 4.7\StyleCop.targets" Condition="$(Configuration)=='Debug'"/> 
```

# c# - 在 c# 中使用联系人 ID 检索 Lotus Notes 联系人信息

> ID：14463416
> 
> 赞同：1
> 
> 时间：2013-01-22T16:33:25.510
> 
> 标签：c#, lotus-notes

我正在开发一个工具，该工具需要访问 IBM Lotus Notes 中的 names.nsf 数据库，并使用 Lotus 联系人 ID（员工 ID）（此 ID 将由用户提供），检索此人的完整信息（姓名, 职位, 电话号码....)

[我在 Codeproject.com ( http://www.codeproject.com/Articles/18517/Lotus-Notes-Integration-with-Microsoft-NET-Platfor](http://www.codeproject.com/Articles/18517/Lotus-Notes-Integration-with-Microsoft-NET-Platfor) )上找到了一个示例，但是以这种方式获取信息大约需要 10 分钟这个例子做到了（数据库大约有 5000 个条目），所以我正在寻找一种更快的方法（如果我真的为此使用 Lotus notes 大约需要一秒钟！）。

有没有办法在不让用户等待几分钟的情况下完成这项任务？

想也许你可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:49:52.667

您正在使用的示例通过视图使用

```
NotesViewEntry viewEntry = notesViewCollection.GetNthEntry( rowCount ); 
```

这是（之一）最糟糕的方法，因为它从视图顶部进行每次迭代并遍历所有文档，直到它到达第 n 个文档。

有两种选择：1）通过使用优化此代码

```
NotesViewEntry viewEntry = notesViewCollection.GetFirstEntry(); 
```

最后

```
viewEntry = notesViewCollection.GetNextEntry(viewEntry); 
```

2）（以我的拙见，更好的方法）：更改代码：-您需要一个视图，其中第一列按您的键排序 => 联系人 ID（员工 ID）-您可以通过以下代码访问 ViewEntry

```
LotusNotesView.GetEntryByKey( EmployeeID, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:50:12.470

如果幸运的话，*names.nsf*会被全文索引。如果不是，您可以尝试询问它是否可以被全文索引。当它被索引时，您可以像这样快速获取人员文档：

```
LotusNotesView.FTSearch("[EmployeeID]=1234567", 1);
NotesDocument docPerson = LotusNotesView.GetFirstDocument(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T19:16:49.387

为什么要求用户提供他的员工 ID？您应该要求他提供他的 Notes 用户名（全名或简称）或他的电子邮件地址。其中任何一个都可以在 names.nsf 的 $Users 视图中快速查找，让您可以快速访问包含您需要的所有数据的文档。

注意：我知道有些公司实际上将他们的员工 ID 输入到 names.nsf 的 ShortName 字段中。如果您的组织是这种情况，那么您应该做的是`NotesView`使用该方法打开一个对象`NotesDatabase.getView()`，然后使用 NotesView.getDocumentByKey() 方法为用户获取文档。例如，像这样：

```
NotesView usersView = namesDb.getView("$Users");
NotesDocument userDoc = usersView.getDocumentByKey(employeeId); 
```

然后只需读取您想要的数据，对您感兴趣的每个信息字段使用 userDoc.getItemValue()。如果您真的想捕获所有内容，包括一堆，您应该只对整个 userdoc.Items 数组进行循环内部使用价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:46:20.210

使用 GetNthEntry 肯定会导致一些性能问题。我已经从该站点获取了相关代码，并将其重写为使用 GetFirst/GetNext 模式，推荐用于 Lotus Notes 中的所有视图处理。

请注意，这当然没有经过测试。关键是获取集合中的第一个条目，检查它是否是一个对象，然后处理它。在循环结束时，获取下一个条目并重复，直到您命中 null。

```
 NotesViewEntryCollection  notesViewCollection = LotusNotesView.AllEntries;
    NotesViewEntry viewEntry = notesViewCollection.GetFirstEntry();

    while (viewEntry != null)
    {
        //Get the first document of particular entry.
        NotesDocument document =  viewEntry.Document;

        object documentItems = document.Items;
        Array itemArray1 = (System.Array)documentItems;

        for( int itemCount=0 ; itemCount< itemArray1.Length; itemCount++ )
        {
            NotesItem notesItem = 
            (Domino.NotesItem)itemArray1.GetValue( itemCount );

            //compare field value with specific value entered by user
            if( notesItem.Text !=null )
            {
                if( (notesItem.Text.ToUpper()).StartsWith( fieldValue ))
                {
                    Contact contact = new Contact();
                    for( int icount=0 ; icount< itemArray1.Length; icount++ )
                    {
                        NotesItem searchedNotesItem =
            (Domino.NotesItem)itemArray1.GetValue( icount );
                        string FieldName = searchedNotesItem.Name.ToString();
                        //For FirstName
                        if( searchedNotesItem.Name == "FirstName" )
                            contact.FirstName= searchedNotesItem.Text;

                        //For LastName
                        if( searchedNotesItem.Name == "LastName" )
                            contact.LastName = searchedNotesItem.Text;
                        //For Office Phone Number
                        if( searchedNotesItem.Name == "OfficePhoneNumber" )
                            contact.OfficePhoneNumber = searchedNotesItem.Text;

                        if( searchedNotesItem.Name  == "InternetAddress" )
                            contact.EmailId = searchedNotesItem.Text;

                    }//end for
                    contactsList.Add( contact );
                    break;
                }//End if
            }
        }

        //Get the nth entry of the selected view according to the iteration.
        NotesViewEntry viewEntry = notesViewCollection.GetNextEntry(viewEntry);        
    } 
```

# java - JAXB 中的工厂方法访问元素？

> ID：14463423
> 
> 赞同：1
> 
> 时间：2013-01-22T16:33:43.517
> 
> 标签：java, jaxb

我正在尝试使用工厂方法而不是 JAXB 的无参数构造函数。

我有多个从基类继承的类，关于将要实例化的唯一指示是`type`xml 元素中的属性。

```
<tag-name type="boolean"/> 
```

将实例化一个 BooleanType，而

```
<tag-name type="integer"/> 
```

将实例化一个 IntegerType。

有什么方法可以访问从工厂方法中解组的元素的元素名称/属性值？

（这也许是使用工厂方法而不是无参数构造函数的好处吗？还有其他的吗？）

（我没有使用 MOXy）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:44:29.717

> 我有多个从基类继承的类，关于将要实例化的唯一指示是 xml 元素中的属性类型。

使用任何[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现，您可以使用`XmlAdapter`来映射继承关系，其中任意 XML 属性是继承指示符。

*   [http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html](http://blog.bdoughan.com/2012/01/jaxb-and-inhertiance-using-xmladapter.html)

但是，我不会使用任意 XML 属性，而是使用该`xsi:type`属性，以便可以通过 XML 模式正确验证内容。

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-xsitype.html)

如果您仍然想使用任意 XML 属性并且您使用[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)是您的 JAXB 提供程序，那么您可以利用`@XmlDescriminatorNode`/`@XmlDescriminatorValue`扩展：

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html)

* * *

> 有什么方法可以访问从工厂方法中解组的元素的元素名称/属性值？

JAXB 实现确实允许您通过`@XmlType`注释指定工厂类和方法，但我认为这不是您在此用例中寻找的内容。

*   [http://blog.bdoughan.com/2011/06/jaxb-and-factory-methods.html](http://blog.bdoughan.com/2011/06/jaxb-and-factory-methods.html)

要利用 XML 内容来确定要实例化的适当子类，您需要使用该`XmlAdapter`方法。

# eclipse - Run 不会在 Eclipse 中构建引用的项目

> ID：14463432
> 
> 赞同：2
> 
> 时间：2013-01-22T16:34:19.503
> 
> 标签：eclipse, build, dependencies, project

我有一个项目，有两个依赖项，我想在构建项目时构建它们。我通过转到 Project Properties-> Project References 并选择了两个依赖项来做到这一点。当我对其中一个依赖项进行更改时，我可以重建我的项目以构建它们，但如果我只是运行我的项目，则不会重建引用的依赖项。我怎样才能解决这个问题？

编辑：

按照要求，我有以下 Eclipse 设置：

*   项目->“自动构建”被选中
*   Window->Preferences->General->Workspace->"Build Automatically" 和 ->"Save automatically before Build" 都选中
*   Window->Run/Debug->Launching->GeneralOptions->“在启动前构建（如果需要）”被选中

最后一点似乎是无法正常工作的地方。选中此项**将**在启动之前构建我的项目，但**不会**构建依赖项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:23:29.667

您是否检查了“项目”菜单下的“自动构建”选项？

检查这个问题，它可能会有所帮助：

[eclipse中“自动构建”选项的目的](https://stackoverflow.com/questions/7677127/purpose-of-the-build-automatically-option-in-eclipse)

Edit2（添加评论以便于阅读）：

您是否尝试过 Preferences -> Run/Debug -> Launching -> General options panel -> Checkbox for “Build (if required) before launch”？我不太确定（并且帮助没有提及）“如果需要”到底是什么意思。但我认为这应该意味着“如果自上次启动以来项目中有修改过的文件，请重新构建”

这是一个可能有帮助的帖子：

[http://mcuoneclipse.com/2012/10/30/speeding-up-the-debug-launch-in-codewarrior/](http://mcuoneclipse.com/2012/10/30/speeding-up-the-debug-launch-in-codewarrior/)

> 这意味着它在启动和调试我的项目之前执行我的项目的“构建”（检查是否有任何更改，并在必要时编译和链接）。

因此，它绝对应该满足您的需求。

# php - 使用 CodeIgniter 如何从 cookie 中的复选框保存用户信息？

> ID：14463433
> 
> 赞同：0
> 
> 时间：2013-01-22T16:34:19.633
> 
> 标签：php, codeigniter

我正在处理的页面上有一个待办事项清单，我需要为其创建一个 cookie，以便当用户返回该页面时，他们之前检查过的所有内容都会显示出来。我已经看到了很多不同的方法来完成它，但是我很难将我看到的位转换到我的 CodeIgniter 构建页面。让它发挥作用的最佳方法是什么？这是我目前正在使用的。

> 视图文件内部

```
<section class="chkBoxes">
    <ul>
        <li><?php echo form_checkbox('toDoBox', 'reviewed', FALSE); ?> Test</li>
        <li><?php echo form_checkbox('toDoBox', 'reviewed', FALSE); ?> Test</li>
        <li><?php echo form_checkbox('toDoBox', 'reviewed', FALSE); ?> Test</li>
        <li><?php echo form_checkbox('toDoBox', 'reviewed', FALSE); ?> Test</li>
        <li><?php echo form_checkbox('toDoBox', 'reviewed', FALSE); ?> Test</li>
    </ul>
</section> 
```

在我的 test.php 页面中有此功能，但是当我将其移至 CI 时出现错误

> 控制器内部

```
$this->session->set_userdata('');

    $aDoor = $_POST['toDoBox'];
  if(empty($aDoor)) 
  {
    echo("Please mark what you have read before continuing.");
  } 
  else
  {
    $N = count($aDoor);

    echo("You have completed $N sections: ");
    for($i=0; $i < $N; $i++)
    {
      echo($aDoor[$i] . " ");
    }
  } 
```

# visual-studio-2010 - 如何自动运行 Selenium WebDriver 测试用例

> ID：14463434
> 
> 赞同：2
> 
> 时间：2013-01-22T16:34:31.107
> 
> 标签：visual-studio-2010, selenium, selenium-webdriver

我已经使用 .Net (c#) 使用 Selenium WebDriver 创建了几十个测试用例，我的问题是：

有没有办法按计划运行我的所有测试用例？

目前我正在 Visual Studio 中手动运行我的测试用例！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:37:31.947

您可以安排从 TeamCity 等持续集成服务运行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:48:08.740

CruiseControl 是开源的，可以做 TeamCity 可以做的事情（只是没有很棒的界面，可能需要一些弄清楚）

[http://cruisecontrol.sourceforge.net/](http://cruisecontrol.sourceforge.net/)

MSTest 命令行选项文档位于此处：

[http://msdn.microsoft.com/en-us/library/ms182489(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms182489(v=vs.80).aspx)

您可以将其打包成批处理文件并使用 Windows 计划任务启动它。

如果你想加载*所有*测试，这很简单，只需：

`mstest.exe /testcontainer:Assembly.dll`

替换`Assembly.dll`为已编译的测试项目程序集。MSDN 文档就足够了。如果没有，请随时回来询问

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T19:29:28.673

***Jenkins/Hudson***是另一个很棒的第三方开源持续集成工具，具有简洁的界面。相当不错的社区和大量的插件/附加组件。

非常容易设置和开始。更多信息[在这里](http://jenkins-ci.org/)。

# ubuntu - ubuntu 11.10 是否支持 LLVM 3.2

> ID：14463435
> 
> 赞同：0
> 
> 时间：2013-01-22T16:34:35.540
> 
> 标签：ubuntu, ubuntu-11.04

我想使用 LLVM、lex 和 yacc 创建一个简单的编译器。我认为，这对我来说将是这个框架的一个良好开端。我正在使用 64 位的 Ubuntu 11.10。它会支持最新发布的 LLVM 3.2 版本吗？在我的系统中编译它的步骤是什么？我通过更改 LLVM 教程中包含的一些玩具语言代码行来实现 LLVM 位码生成器。现在，我想使用 lex 和 yacc 实现相同的语法。必须纳入哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:42:30.930

Clang/LLVM 很容易在任何现代 Ubuntu 系统上自行构建。对于从主干构建（代码的最新版本），请按照[http://clang.llvm.org/get_started.html上的说明进行操作](http://clang.llvm.org/get_started.html)

如果您不想从 SVN 手动签出代码，请从[http://llvm.org/releases/download.html下载发布 tarball](http://llvm.org/releases/download.html)

# ruby-on-rails - 通过 Feedzirra 链接推文中的 URL

> ID：14463437
> 
> 赞同：0
> 
> 时间：2013-01-22T16:34:37.823
> 
> 标签：ruby-on-rails, feedzirra

我正在开发一个使用 Feedzirra 引入旋转 twitter 提要的 rails 网站。然而，这些推文并没有带来可点击的 URL——只是一个未链接的字符串。

在显示之前，是否有“rails 方式”来链接通过 Feedzirra 的 URL？还是我需要使用解析后的东西（比如 jQuery）来处理它？

编辑：

feed.rb - [http://pastebin.com/0eSEGYZq](http://pastebin.com/0eSEGYZq)

实际推文 - [http://pastebin.com/KUMGZF4X](http://pastebin.com/KUMGZF4X)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T19:25:28.393

当您遍历结果时，您可以尝试使用此 gem：[https ://github.com/tenderlove/rails_autolink](https://github.com/tenderlove/rails_autolink)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:35:54.857

您应该知道 Twitter 将在不久的将来永久关闭他们的 RSS 提要。

# android - Android：试图在 webview 下有一个 TextView，TextView 没有被创建

> ID：14463440
> 
> 赞同：2
> 
> 时间：2013-01-22T16:34:47.533
> 
> 标签：android

我有一个布局，里面有一个水平容器，然后是 2 个垂直容器。第一个垂直容器有一个 web 视图，后跟一个 textview。没有创建 textview 并且 webview 填充了高度。我试图通过 android:layout_height="60px" 设置 web 控件的高度，但它似乎不起作用。

xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <LinearLayout
        android:id="@+id/mainLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center" 
        android:orientation="horizontal">

        <LinearLayout
            android:id="@+id/mainLayout"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="vertical">

         <WebView
            android:id="@+id/webAuthor"
            android:layout_width="60px"
            android:layout_height="60px"
            android:layout_weight="1.0"  />

          <TextView
            android:id="@+id/textChats"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="hello" />

        </LinearLayout> 

        <LinearLayout
            android:id="@+id/mainLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/eventsbakground"  
            android:orientation="vertical">

            <ImageView                  
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/addbanner"
                android:id="@+id/butAdd"    
                android:layout_gravity="center"   
                android:layout_marginTop="12px" />

            <ListView
                android:id="@+id/mylist"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </ListView>    

        </LinearLayout>                    
    </LinearLayout>          
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:51:24.497

尝试`android:layout_weight="1.0"`从您的 web 视图中删除，因为它可能导致 webview 捕获整个布局并隐藏 textview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:07:11.780

正如提到的@Vikram Singh ， Remove `android:layout_weight="1.0"`，当您将视图设置`layout_weight`为“1.0”时，这意味着该视图必须填充孔父。

`layout_weight`您可以指定多个视图之间的大小比例。例如，您有一个 MapView 和一个应该向地图显示一些附加信息的表格。地图应占屏幕的 3/4，表格应占屏幕的 1/4。然后您将地图的 layout_weight 设置为 3，将表格的 layout_weight 设置为 1。但是当您将 1 设置为仅一个时，它将填充父级

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:46:03.377

我相信重量会覆盖 WebView 内部的高度，我会尝试删除它。但正如沃伦所说，你在帖子中的格式非常难以阅读，我非常感谢他编辑了它。

# javascript - jquery选择一个按钮

> ID：14463445
> 
> 赞同：0
> 
> 时间：2013-01-22T16:35:08.253
> 
> 标签：javascript, jquery, coffeescript

我有一个包含多个 Bootstrap 模式的 html 页面。我想使用 jquery 关闭它们。但是，我在选择它们时遇到了麻烦。

这是 html 的示例：

```
<div class="modal-footer span5">
  <input class="btn btn-primary" name="commit" type="submit" value="Save Material">
</div> 
```

而这个 jquery（咖啡脚本）不起作用：

```
$(".modal-footer .btn").each.click ->
  alert 'commit'
  $(this).modal "hide" 
```

或这个：

```
 $(".modal-footer .btn").click.each ->
    alert 'commit'
    $(this).modal "hide" 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:20:47.427

JS 引擎不解释 Coffeescript。相反，该块需要先编译成 javascript。（或者您可以直接编写javascript）。

如果您的 .modal-footer 类来自默认引导模式，这意味着它只是整个模式 html 块的一部分，页脚可能不是附加处理程序以关闭它的最佳位置。

开箱即用，bootstrap 带有一个默认的模态结构，如下所示：

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-    labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
        <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
       <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
       <button class="btn btn-primary">Save changes</button>
    </div>
</div> 
```

要关闭它，最简单的方法是使用内置的引导行为，但通过引用构成模式的最外层 html 元素，在本例中为 id="myModal" 的 div：

$('#myModal').modal('hide');

对于您的示例，如果您知道容器的 id：

```
$(".modal-footer .btn").click(function(){
    alert('commit');
    $('#myModal').modal('hide');
}); 
```

如果没有，您可以使用一串 .parent() 调用遍历树，就像前面响应中的示例一样。

除非我错过了什么……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:38:55.227

那不是javascript代码。试试这个：

```
$(".modal-footer .btn").click(function(){
  alert('commit');
  $(this).parent().hide();
}); 
```

无论如何，如果引导程序自动执行此操作，我不明白您为什么要使用 jquery 关闭模式。

# ruby-on-rails - 当我尝试使用 Compass 变量时导致此错误的原因是什么？

> ID：14463446
> 
> 赞同：0
> 
> 时间：2013-01-22T16:35:09.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3, compass-sass

**应用程序.css.scss**

```
@import 'compass';
$var: 28em;
@media only screen and (min-width: $var) {
  font-size: 120%;
} 
```

当我尝试访问一个页面（正在开发中）时，会发生此 Rails 错误：

```
Sass::SyntaxError at /today
Invalid CSS after "...nd (min-width: ": expected expression (e.g. 1px, bold), was "$var) {" (in /Users/ben/rails_projects/test_app/app/assets/stylesheets/application.css.scss) 
```

如果我将**application.css.scss**更改为直接使用`28em`，而不是`$var`：

```
@import 'compass';
$var: 28em;
@media only screen and (min-width: 28em) {
  font-size: 120%;
} 
```

为什么我无法使用`$var`？

我在用着

*   导轨 3.2.11
*   红宝石 1.9.3
*   指南针 0.12.2
*   指南针导轨 1.0.3
*   萨斯 3.1.12
*   sass-rails 3.2.3

宝石文件

```
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:10:46.383

我建议您避免在清单文件中添加前缀`application.css`。如果您想添加样式，请`css.scss`在其中一个目录中创建一个新文件`assets`并在清单文件中要求它。[本指南](http://guides.rubyonrails.org/asset_pipeline.html)有一些处理资产管道的有价值的规则。

# python - 在 Django 模型中拥有自定义实例属性的正确方法是什么？

> ID：14463451
> 
> 赞同：10
> 
> 时间：2013-01-22T16:35:29.180
> 
> 标签：python, django, django-models

我想向 Django 模型的实例添加自定义属性。这些属性不应存储在数据库中。在任何其他类中，属性将简单地由`__init__`方法初始化。

我已经看到了三种不同的方法，但没有一种是完全令人满意的。我想知道是否有更好/更多的 pythonic/djangoist 方式来做到这一点？

1.  [覆盖](https://stackoverflow.com/questions/5031711/python-cleanest-way-to-override-init-where-an-optional-kwarg-must-be-use)`__init__`方法：语法有点复杂，但它有效。

    ```
    from django.db.models import Model

    class Foo(Model):
      def __init__(self, *args, **kwargs):
         super(Model, self).__init__(*args, **kwargs)
         self.bar = 1 
    ```

2.  使用 Django`post_init`信号：这需要类定义之外的类代码，这不是很可读。

    ```
    from django.dispatch import receiver
    from django.db.models.signals import post_init
    @receiver(post_init, sender=Foo)
        def user_init(sender, instance, *args, **kwargs):
          instance.bar = 1 
    ```

3.  使用实例方法而不是属性：将一般异常作为默认行为引发有点令人不安。

    ```
    class Foo(Model):
      def bar(self):
        try:
          return self.bar
        except:
          self.bar = 1
        return self.bar 
    ```

在这三个选择中，第一个对我来说似乎是最糟糕的。你怎么看？有什么选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T16:37:44.633

我会使用 python 中可用的属性装饰器

```
class Foo(Model):
    @property
    def bar(self):
        if not hasattr(self, '_bar'):
            self._bar = 1

        return self._bar 
```

然后您可以像访问属性一样访问它，而不是使用 () 调用函数

您甚至可以通过内置后备而不是存储来更直接地使用它

```
class Foo(Model):
    @property
    def bar(self):
        return getattr(self, '_bar', 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T18:05:29.460

覆盖`__init__`是正确的方法。

# php - Highchart xAxis - 缩放为假

> ID：14463454
> 
> 赞同：0
> 
> 时间：2013-01-22T16:35:38.447
> 
> 标签：php, javascript, jquery

这是我的问题的图片。绘制图表后，xAxxis 正好是 1 晚（如果是 12:20 -> 在图表中是 11:20）......但是当我放大图表并重置缩放后它是正常的！

可能是什么问题呢 ？

这是有问题的图片 ![](../Images/41576b07dee3195b2bfd07cfc6e2b2d6.png)

```
var chart;
// draw chart
$(function(){   
   $.getJSON('data.php?name=<?php echo $name; ?>&mysqltablename=<?php echo       $mysqltablename; ?>&datatabletyp=<?php echo $datatabletyp ?>', 
   function(data) {  
   chart = new Highcharts.Chart
   ({
  chart: { renderTo: '<?php echo $tabname; ?>', zoomType: 'x',  type: 'line', width:800 },   
  credits: { enabled: false   },
  plotOptions: {  series: { marker : { enabled: false, states: {  hover: { enabled: true  }  }   } }   },
  xAxis: { type: 'datetime' },                             
  title: { text:' '     },   
  yAxis: { title: { text: ''  } },
  legend: { enabled: false },
  series: [{ name: '<?php echo $tabname; ?>', data: data }], 
  tooltip: { valueDecimals: 2 } ,
   });
   Highcharts.setOptions({ global: { useUTC: false } });
   Highcharts.numberFormat(this.y, 2, '.', ',');
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:49:27.920

我对 HighCharts 也有类似的问题。

第一次加载时会猜测轴极值，因此您必须设置图表的极值并重新绘制。

这应该有效：

```
var chart = new Highcharts.Chart(opts, function(chart) {
    if (min && max) {
        chart.xAxis[0].setExtremes(min, max, true, true);
    }
}); 
```

[http://api.highcharts.com/highcharts#Axis.setExtremes%28%29](http://api.highcharts.com/highcharts#Axis.setExtremes%28%29)

您还应该在创建图表之前设置选项

编辑：现在我想这可能是真正的问题：

图表是使用 useUTC = true 创建的，因此 Dateformatting 关闭了一小时。在 Zoom 上，图表被重绘并获得更新的设置。所以一定要把你的全局设置移到顶部:)

[http://api.highcharts.com/highcharts#Highcharts.setOptions%28%29](http://api.highcharts.com/highcharts#Highcharts.setOptions%28%29)

# php - 正则表达式/PHP 在哈希和任何非数字之间获取数字？

> ID：14463455
> 
> 赞同：1
> 
> 时间：2013-01-22T16:35:41.670
> 
> 标签：php, regex

我有一个文本字符串，其中有几个实例总是一个哈希，然后是一个数字（有时是标点符号），例如：

> 文字**#12321**，文字**#456**文字**#789**；文字**#0**！等等。

我需要正则表达式来 preg_match_all 每个数字（可变长度）在哈希之后但在任何不是数字之前 - 所以在上面的例子中我会得到一个数组：

> ' **12321''456''789''0** ' **_** _ **_** _ **_** _

我试过：

```
'/[#](.*?)[^0-9]/' 
```

和

```
'/(\\d+)(.*?)(\\d+)/' 
```

但第一个以一种奇怪的方式失败，第二个只匹配其他实例。

我试图通过文档来迷惑我的方式，但了解如何最好地做到这一点会很有帮助。谁能节省我几个小时的困惑并告诉我正确的正则表达式语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T16:37:20.310

使用这个正则表达式： -

```
'/#(\d+)/' 
```

你不需要`non-number`在最后检查。`\d+`无论如何只会让你得到数字，一旦遇到*非数字*就会停止。

请注意，这`#`不是正则表达式中的元字符，因此您不需要将其包含在字符类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:39:01.490

您的第一次尝试列出：

```
'/[#](.*?)[^0-9]/' 
```

似乎它会失败只是因为它消耗了一个额外的字符，这可能是下一个匹配的开始（如果你有一个像“#123#456”这样的字符串）。它非常接近，但这是：

```
'/#([0-9]+)/' 
```

我相信应该可以正常工作。

# sql - 将表移动到sql server中的新数据库

> ID：14463456
> 
> 赞同：2
> 
> 时间：2013-01-22T16:35:41.260
> 
> 标签：sql, sql-server

这是我想做的事情：我正在使用一个数据库，为简单起见，我将其命名为“d1”。我只需要从这个数据库中查询两个表。不过，我只需要从该数据库中分离出去年的数据（这是与我想做的事情相关的唯一信息 - 2012 年审计师报告：/）。请记住，我正在使用的数据库中有一个简单的 50 个表，其中包含至少 6 或 7 年的数据。

可能的解决方案： 1\. 将数据库复制到新数据库中，删除除 2012 数据之外的所有数据。2\. 复制两张表并扔到一个新的数据库中，删除除2012年数据之外的所有行。

我之前的 IT 人员为 2011 年创建了一个数据库，并能够创建审计报告。然而，我以前从未做过这种类型的任务。任何帮助将不胜感激，我将一直关注这个问题，直到美国东部时间下午 4 点。希望我的要求是具体的，但如果不是，我会在这里等着回复你:)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:49:29.020

最简单的事情是：

```
select t.*
into newdb..t
from olddb..t
where <from the last two years> 
```

对于每个表。这将获得数据。

如果您需要其他东西（索引、约束等），则编写表定义脚本，在新数据库中重新创建它们，然后从现有表中插入数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:48:11.520

我对 SQL Server 可用的实用程序并不完全了解，但基于其他可用的实用程序，

1.  查找转储实用程序以导出表上的数据。通常，此类导出实用程序将允许指定表名，并且通常会采用 where 条件。导出将在 SQL 中，可用于填充新数据库。
2.  在与源数据库相同的服务器上创建新数据库。进行跨数据库更新。所以，创建一个数据库db2012。使用数据库 db2012，运行以下更新语句：

.

```
update table1
(select * from d1.table1 where year(timestamp_x) = 2012) 
```

# sql-server - 允许最终用户向表中动态添加列

> ID：14463457
> 
> 赞同：8
> 
> 时间：2013-01-22T16:35:42.883
> 
> 标签：sql-server, dynamic, ddl, entity-attribute-value

我们正在开发一个带有 SQL Server 后端的 .NET 应用程序。客户端请求能够在部署应用程序后向实体动态添加自定义属性。

正如[在类似问题中](https://stackoverflow.com/a/4493391/137471)所建议的那样，我们可以创建一个表，然后该表将为每个自定义属性值（[实体属性值](https://stackoverflow.com/questions/tagged/entity-attribute-value)模型）包含一行。但是，我们正在考虑允许最终用户实际修改表（在同一个问题中[也建议），即添加和删除列。](https://stackoverflow.com/a/9106762/137471)

（**编辑：**如评论中所述，DDL 不会由用户或应用程序直接执行，而是通过存储过程确保一切顺利运行）

主要原因是：

*   改进的性能/可搜索属性
*   属性几乎总是需要以列的形式出现，例如在用户界面的数据网格中或在提取数据以在 Excel/PowerPivot 中进行进一步处理时。
*   数据是强类型的（而不是将所有属性值存储为 varchar）
*   简化的数据模型

**有什么我们应该注意的警告吗？**

想到的事情是：

*   可能无法处理不断变化的数据结构的备份/恢复操作
*   未正确更新以反映这些更改的依赖对象（例如视图）（依赖视图必须执行 a`select * from table`才能包含任何添加的列）。
*   ...

非常感谢有关此方法的任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:00:25.860

我与以多种方式处理此问题的第三方应用程序合作：

1.  大多数表都有一个“自定义”版本的表，其中包含各种字段来保存通用命名的数据类型：Number1、Date26、Text3 等）。因此，存在具有 1-1 关系的 Company 和 CompanyCustom。
2.  列表是在具有 ListID（以及用户设置架构的相应方式）和链接到主表的外键的表上创建的。该表有几个通用列，如 #1。

3.  创建自己的表格

4.  创建您自己的视图和存储过程并在应用程序中注册它们。这些数据集可以附加到数据网格和/或在自定义报告中使用。

有一个界面，用户可以在他们认为合适的时候标记他们的列（即 Text1 = "Blah Blah Blah"）。在这种情况下有很多浪费的字段（尽管我的公司已经设法使用了包括 Money47 在内的大部分字段）并且它对于性能并不理想，您无法击败我们拥有的近乎无限的灵活性。

这里的关键是该客户愿意为这种能力以及持续的支持支付多少费用？如果您让他们在现有表上创建自定义字段并且他们决定要更改无法顺利转换的数据类型，他们是否会期望您随机转换并转换它？

我们可以为我们为这个系统支付的费用聘请一名全职程序员。SalesForce.com 和类似站点具有此功能。我认为您不想为一次性的客户端应用程序涉足此领域。从长远来看，他们也可能会付钱让您继续更新应用程序。

# ruby-on-rails - 更新到 rails 3.2 后找不到代码转换器（UTF-8 到 LATIN1）

> ID：14463458
> 
> 赞同：1
> 
> 时间：2013-01-22T16:35:54.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在将应用程序从 rails 3.0 转换为 rails 3.2 。在这个应用程序中，我使用 csv_builder 并使用可选择的输出字符集。我的应用程序的 UTF-8 字符代码。

这些字符集在 rails 3.0、csv_builder (2.1.0) 中被称为“UTF-8”和“LATIN1”。更新到 rails 3.2、csv_builder (2.1.1) 后，出现错误

> 找不到代码转换器（UTF-8 到 LATIN1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:35:54.320

解决方案是将目标字符集重命名为

> ISO-8859-1

因此字符集的名称似乎已更改为更精确的 ISO 名称

# c# - 使用 WCF 服务自动启动无限循环

> ID：14463459
> 
> 赞同：0
> 
> 时间：2013-01-22T16:35:56.583
> 
> 标签：c#, wcf, infinite-loop

我有 WCf 服务。在几个服务中，我需要编写一段代码来始终检查 SAP 表中的更新并更新 SQL Server 数据库。

此功能需要在服务器启动时启动，并且永远不应停止。

我尝试使用 AppInitialize，但是当服务启动时，它永远不会超过此代码。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:37:06.743

您需要创建一个单独的线程来运行此功能。请参阅[线程](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:41:10.403

我认为您想创建一个 Windows 服务并让它执行此操作。如果您现在在 IIS 中托管 WCF 服务，它可以随时关闭您的 AppPool 等。

Visual Studio 中有一个 Windows 服务项目类型，可以很容易地做到这一点。

# javascript - 将内容从一个网页传输到同一网站的另一个网页？

> ID：14463461
> 
> 赞同：1
> 
> 时间：2013-01-22T16:36:05.443
> 
> 标签：javascript, html, iframe, rss

我知道你们将能够很容易地解决快速、简单的问题。

我一直未能找到解决方案，这可能是由于我对搜索的措辞方式。

基本上，我有一个包含多个客户反馈的推荐页面，我想将此信息复制到显示 2 条最新反馈的索引页面。这些信息基本包含H2、H3和简单的p结构。

我猜想使用某种 javascript 或 iframe 或可能比这更简单的东西将是答案。如果我可以将这些信息转换为 RSS 提要，那就更好了，这样我以后会省去一些 CSS 麻烦（在您阅读下一段之后才有意义）。

如果可能的话，我想重新格式化 2 个首页条目以匹配我使用 CSS 从 RSS 提要生成的另一个提要，但我可以自己管理这部分。

欢迎任何建议。

请注意，我从未使用过 AJAX，也不是最好的 jQuery。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:42:59.937

您可以使用 jQuery ajax（特别是`$().load`）从索引页面请求您的推荐页面，然后抓取您想要的内容并将其附加到索引页面。像这样的东西：

```
$('#targetElementOnIndexPage').load(
    urlToTestimonialPage + ' #sourceElementOnTestimonialPage'); 
```

有关更多示例，请参阅[$().load的文档。](http://api.jquery.com/load/)

> 如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格后面的部分是确定要加载的内容的 jQuery 选择器。

# wordpress - WordPress。如何添加一个js脚本？（托管在 wordpress.com）

> ID：14463462
> 
> 赞同：0
> 
> 时间：2013-01-22T16:36:06.647
> 
> 标签：wordpress, wordpress.com

我在 wordpress.com 上托管了一个 wordpress 博客**，**我试图添加一个自定义 js 脚本。实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:45:15.627

据我所知，您不允许将自定义 JavaScript 代码添加到您的博客。出于安全原因，Wordpress.com 不会让您使用。

来源：[WordPress 支持](http://en.support.wordpress.com/code/#javascript)

# scala - 如何生成静态成员并将其添加到类型宏中的类中？

> ID：14463463
> 
> 赞同：6
> 
> 时间：2013-01-22T16:36:07.707
> 
> 标签：scala, reflection, static, macros, scala-macros

我想将一个静态字段（`bar`在此示例中命名`Foo`）添加到具有类型宏（命名`Static`）的类（命名）中。

这就是我目前正在尝试的方式：

**宏**

```
import language.experimental.macros
import scala.reflect.macros.Context

package object statics {

  type Static = macro Statics.addStaticField

  object Statics {

    def addStaticField(c: Context): c.Tree = {
      import c.universe._

      val STATIC = 1 << 23
      type CompilerSymbol = scala.tools.nsc.Global#Symbol
      def setFlag(symbol: Symbol, flag: Long) {
        val compilerSymbol = symbol.asInstanceOf[CompilerSymbol]
        println("Setting flag ...")
        compilerSymbol.setFlag(flag)
      }
      def printFlags(symbol: Symbol) {
        println("Flags: " + symbol.asInstanceOf[CompilerSymbol].flagString)
      }

      val staticField: ValDef =
        ValDef(
          mods = Modifiers(),
          name = TermName("bar"),
          tpt  = TypeTree(),
          rhs  = Literal(Constant(42))
        )
      printFlags(staticField.symbol)
      setFlag(staticField.symbol, STATIC)
      printFlags(staticField.symbol)

      val Template(parents, _, existingCode) = c.enclosingTemplate

      Template(Nil, emptyValDef, staticField :: existingCode)
    }
  }
} 
```

在编译期间，调用`setFlag`似乎有效果，因为标志字符串发生了变化：

```
Flags: 
Setting flag ...
Flags: <static> 
```

但在使用现场似乎根本没有实际效果：

```
package statics

class Foo extends Static

object Main extends App {
  Foo.bar        // Fails to compile
  (new Foo).bar  // Compiles
} 
```

`show`也`showRaw`不要显示任何迹象`STATIC`。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:45:11.840

据我所知，您需要生成一个伴随对象来拥有一个静态字段，而目前这对于类型宏来说是不可能的。

# php - 在相等比较的结果与严格相等比较相同的情况下，应该使用两者中的哪一个？

> ID：14463465
> 
> 赞同：7
> 
> 时间：2013-01-22T16:36:15.357
> 
> 标签：php, coding-style, operators

举个例子，应该是`$name == "John Doe"`还是`$name === "John Doe"`？

我猜想相等比较的表现会更差，因为它们会进行某种类型转换。

ps 我知道选择一个而不是另一个的性能增益可以忽略不计，如果有的话。这是一个原则问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T16:40:36.513

如果您仔细接受您没有使用强类型语言的事实，那么您实际上不需要在大多数代码中检查 === ，但是当您编写 PHP 代码时，这应该是一个不变的想法。

我通常使用 ==，将 === 保留为 PHP 手册建议的内容（即 strpos() 调用和类似调用）。

这是我运行的一些经验基准。也许我应该切换到 === ;-)

```
$start = microtime(true);

for($i = 0; $i < 1000000; $i++) {
    if("1" === 1); 
}

$end = microtime(true);

echo number_format($end - $start,5,',','.') . " seconds";

// 0,06117 seconds for "thestring" === "thestring"
// 0,07601 seconds for "thestring" == "thestring"

// 0,05154 seconds for "1" === 1
// 0,09041 seconds for "1" == 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:41:42.180

我总是选择最严格的，前提是我可以防止在未来的变化中出现一些逻辑错误，否则这些错误不会被发现。我还没有对那个程序感到难过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:39:24.437

`===``type`除了平等之外，还检查。这是比较运算符的[手册。](http://php.net/manual/en/language.operators.comparison.php)

正如评论中提到的，我编辑了我的答案，

`==`当您不知道比较值的类型时使用，例如。带数字的字符串 --`if($str == $num)`其中 $str = '5' 和 $num = 5。当您还想比较它们的类型时（严格），您可以使用`===`. 多年来，我了解到使用`===`更好，在大多数情况下，作为程序员，您确实知道要比较的类型，从长远来看，严格的编程实践总是更好（效率更高，错误更少）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T19:24:37.390

除非您正在检查一个值

*   一个整数值（无论是字符串还是数字）
*   任何将直接评估为布尔值的东西

您最好使用相等运算符本身。但是，如果您不想被所有这些可能性所困扰，我相信使用严格的相等运算符将是一个更好的选择。

```
$check = array(
    array(
        'check' => array('01234','1234',01234,1234),
        'against' => array('01234',1234,01234)
    ),
    array(
        'check' => array(0,'0',FALSE,NULL,'',array()),
        'against' => array(FALSE,'')
    ),
    array(
        'check' => array(1,'1',TRUE,'ab',array('a')),
        'against' => array(TRUE,1,'ab')
    )
);

function var2Str($var) {
    if (is_string($var)) return "'$var'";
    elseif (is_bool($var)) return $var ? 'TRUE' : 'FALSE';
    elseif (is_null($var)) return 'NULL';
    elseif (is_array($var)) return 'array('.implode(',',$var).')';
    return $var;
}

foreach ($check as $arr) {
    foreach ($arr['check'] as $ch) {
        $chStr = var2Str($ch);
        foreach ($arr['against'] as $ag) {
            $e1 = $ch == $ag ? 'true' : 'false';
            $e2 = $ch === $ag ? 'true' : 'false';
            echo "$chStr\t==\t" . var2Str($ag) . "\t--> <b>$e1</b>" . PHP_EOL;
            echo "$chStr\t===\t" . var2Str($ag) . "\t--> <b>$e2</b>" . PHP_EOL;
        }
        echo PHP_EOL;
    }
} 
```

检查输出的第二个块中的前 2 行：

> '1234' == '01234' -->**真**
> '1234' === '01234' -->**假**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T17:39:25.580

我认为这取决于需要。

```
$s = '0';
echo $s == '' ? 1 : 0;  // false

$s = 0;
echo $s == '' ? 1 : 0;  // true
echo $s === '' ? 1 : 0; // false
echo $s == false ? 1 : 0;  // true
echo $s === false ? 1 : 0; // false 
```

但在你的情况下，我想这些行都一样没关系。

```
$name = 'John Doe';
echo $name == 'John Doe' ? 1 : 0;  // true
echo $name === 'John Doe' ? 1 : 0; // true 
```

# twitter-bootstrap - 带有关系列的引导扩展网格视图

> ID：14463468
> 
> 赞同：0
> 
> 时间：2013-01-22T16:36:23.250
> 
> 标签：twitter-bootstrap, yii

让我用例子来解释一下，这样就清楚了。

学生部门 - 表

```
╔════╦═════════╦═══════╦
║ ID ║ Student ║  DEPT ║ 
╠════╬═════════╬═══════╬
║  1 ║ AA      ║ EEE   ║   
║  2 ║ BB      ║ CSE   ║     
║  3 ║ CC      ║ CSE   ║     
║  4 ║ DD      ║ ECE   ║    
║  5 ║ EE      ║ EEE   ║      
╚════╩═════════╩═══════╩ 
```

在 Bootstrap 扩展网格视图中，我只需要显示部门，点击部门，我需要显示与该部门相关的所有学生。

因此，对于 Distinct DEPT 的列表，我使用了具有以下标准的 dataprovider

```
 $dataProvider = new CActiveDataProvider('StudentDept', array(
                        'criteria'=>array('select'=>'DISTINCT Dept' )
                     )); 
```

在此，由于我使用 DEPT 的 DISTINCT，我无法获取使用 tbrelationcolumn 所需的行 ID 或主键 ID。

如何解决这个问题，我想列出所有比较部门名称的学生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:57:13.453

如果我理解得很好，你不需要显示学生，只显示部门，然后当你点击部门时，另一个表会显示学生，你为什么要这样做？

# c++ - C++初学者：通过引用传递b2Body的指针到函数

> ID：14463472
> 
> 赞同：0
> 
> 时间：2013-01-22T16:36:35.123
> 
> 标签：c++, pointers, reference, box2d

对于我的生活，我无法弄清楚如何通过引用将 b2Body（Box2d 对象）传递给方法并为其赋值。

```
void GameContactListener::GetContactInfo(b2Body &hero, b2Body &ground, b2Body &enemy) {
    b2Body *b1 = thing1->GetBody();
    b2Body *b2 = thing2->GetBody();

    // EXC_BAD_ACCESS HERE
    hero = *b1;
    ground = *b2;
}

// elsewhere
b2Body *hero = NULL;
b2Body *ground = NULL;

GetContactInfo(*hero, *ground); 
```

我可以通过引用为简单`int`类型工作，但似乎缺少指针。

编辑，添加方法声明：

```
void GetContactInfo(b2Body& hero,  b2Body& ground, b2Body& enemy); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:39:40.223

假设`thing->GetBody()`返回 a `b2Body*`，则

```
void GameContactListener::GetContactInfo(b2Body*& hero, b2Body*& ground) {
    hero = thing->GetBody();
    ground = thing->GetBody();
}

// elsewhere
b2Body* hero = NULL;
b2Body* ground = NULL;

GetContactInfo(hero, ground); 
```

请注意，两者都`hero`将`ground`指向同一个`b2Body`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:39:47.003

用于`(b2Body*&)`传递对指针的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:39:58.453

在您的通话中，您应该传递指针的地址，如下所示：

```
 GetContactInfo(hero, ground); 
```

我建议您阅读[本教程](http://linuxconfig.org/c-understanding-pointers)的第 4 节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:49:14.967

正如其他人指出的那样，使用对指针的引用来更改指针。

```
void
GameContactListener::GetContactInfo(b2Body *& hero, b2Body *& ground)
{
    b2Body *b1 = thing->GetBody();
    b2Body *b2 = thing->GetBody();

    // Assign pointer to ref to pointer here.
    hero = b1;
    ground = b2;
}

// elsewhere
b2Body *hero = NULL;
b2Body *ground = NULL;

GetContactInfo(hero, ground); // Pass pointers 
```

另一种老式的方法是指针指针：

```
void
GameContactListener::GetContactInfo(b2Body **hero, b2Body **ground) {
    b2Body *b1 = thing->GetBody();
    b2Body *b2 = thing->GetBody();

    // Assign pointers to pointers.
    *hero = b1;
    *ground = b2;
}

// elsewhere
b2Body *hero = NULL;
b2Body *ground = NULL;

GetContactInfo(&hero, &ground); // Pass address of pointers. 
```

I like the first way better as it's cleaner and more modern.

# java - 如何创建一个每天自动工作一次的方法

> ID：14463475
> 
> 赞同：0
> 
> 时间：2013-01-22T16:36:55.860
> 
> 标签：java, scheduled-tasks

> **可能重复：**
> [如何在 Java 中安排定期任务？](https://stackoverflow.com/questions/7814089/how-to-schedule-a-periodic-task-in-java)

我需要编写一个方法（在一个线程中），它将在每天 00:05 自动工作。（方法将在服务器上运行）。

我在谷歌和这个网站上查过，但所有结果都是关于不同的语言（主要是 C#）。我如何在 Java 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:41:10.633

看看[Quartz](http://quartz-scheduler.org/)项目可能会很有用。

[在这里](http://quartz-scheduler.org/documentation/quartz-2.x/examples/)你可以找到一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:39:55.357

使用调度器执行器服务；它可以选择定期运行任务（固定速率）。[这](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)应该可以帮助您入门。

如果您希望基于调度程序的需求变得复杂或增长，您应该探索像quartz 这样的第三方库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:45:01.430

如果您使用的是 Java EE，则可以使用 TimerService，这里有一个教程： [http ://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:45:19.373

您可以采取多种方法。查看[Java API](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html "Java API")以获得没有很多依赖项的 Java 解决方案。

您还可以使用 Spring 来利用其他功能，并且列出的更简化的方法是 this bit of [documentation](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/scheduling.html#scheduling-annotation-support-scheduled)。

# android - 如何在 Android 中替换 decorView？

> ID：14463481
> 
> 赞同：0
> 
> 时间：2013-01-22T16:37:06.917
> 
> 标签：android

众所周知，我们可以`Views`通过`Activity.getWindow().getDecorView()`和获得 Android 顶级层次结构`Activity.findViewById(android.R.id.content)`。

是否可以替换标准的自定义视图集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:47:29.760

我不知道你想做什么，但我认为如果你对 android 视图层次结构了解更多，你就能找到答案。以下两个文档可能会有所帮助：

1、您可以使用 Hierarchy Viewer 来分析您的视图层次结构：http:
[//developer.android.com/tools/debugging/debugging-ui.html](http://developer.android.com/tools/debugging/debugging-ui.html)

2、以下博客与android视图层次结构相关：
[http ://www.curious-creature.org/category/android/page/2/](http://www.curious-creature.org/category/android/page/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T12:19:15.427

除非您可以访问框架代码，否则没有办法。

# sql - 用于从多个表中获取不同行的 SQL 查询

> ID：14463483
> 
> 赞同：1
> 
> 时间：2013-01-22T16:37:08.413
> 
> 标签：sql, postgresql

假设我们有两个表：

```
Company
+---+-----+
|id | name|
+---+-----+
|1  | bar |
|2  | foo |
+---+-----+

Branch
+----+----+-------+
|cid | id | profit|
+----+----+-------+
|1   | 10 | 100   |
|1   | 11 | 200   |
|2   | 20 | 50    |
+----+----+-------+

--cid in Branch is the foreign key to company id 
```

查询是找出至少有一个分公司利润大于 100 的独特公司。

一种方法是：

```
SELECT DISTINCT c.id, c.name 
  FROM Company c, Branch b
  WHERE c.id == b.cid AND b.profit > 100; 
```

特定情况是很少有公司有分支机构（基本上 Branch 表中的条目远少于 Company 中的条目。鉴于此信息，上述查询是最好的吗？或者有没有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:41:51.203

您的查询看起来不错，我建议使用 ANSI`JOIN`语法：

```
SELECT DISTINCT c.id, c.name 
FROM Company c
INNER JOIN Branch b
  ON c.id = b.cid 
WHERE b.profit > 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:43:15.447

更有效的方法可能是使用 EXISTS 子句：

```
SELECT c.id, c.name 
FROM Company c
WHERE EXISTS
(SELECT 1
 FROM Branch b
 WHERE c.id = b.cid AND b.profit > 100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:40:55.510

您的查询在我看来是正确的，尽管我可能使用内部联接与交叉联接，但相同。也许使用子查询可以使它更快一些——不尝试就不确定：

```
SELECT DISTINCT c.id, c.name 
  FROM Company c JOIN (
    SELECT CID FROM Branch WHERE Profit > 100) t ON c.id = t.id 
```

不确定这是否会更快。

# websocket - Dart 扩展 WebSocket

> ID：14463491
> 
> 赞同：0
> 
> 时间：2013-01-22T16:37:27.660
> 
> 标签：websocket, dart

我正在尝试通过扩展类向 WebSockets 添加一个字段。我在编译时没有收到错误，但是当我尝试分配字段时，我得到一个“没有这样的方法：myCustomString”错误。片段如下。任何帮助表示赞赏。

```
class WebSocketConnection2 extends WebSocketConnection {
  String myCustomString = "";
} 
```

...用法

```
wsHandler.onOpen = (WebSocketConnection2 conn) {
conn.onMessage = (data) {
  var event = data['aString'];
  switch (event) {
    case 'someCase':
      conn.myCustomString = nName; // This line throw the error.
      ...
      break;
  }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:11:33.850

这将是因为 的实现类`wsHandler`正在传递一个`WebSocketConnection`实例。它不知道你的`WebSocketConnection2`班级。

您需要提供自己的实现`wsHandler`才能使用`WebSocketConnection2`该类。

注意：尽管您已指定`wsHandler.onOpen = (WebSocketConnection2 conn) {`这被 dart 解释为`wsHandler.onOpen = (conn) {`- 这是可选的输入操作。

# ssl - 自签名和/或过期的 HTTPS 证书是否比仅使用 HTTP 更糟糕？

> ID：14463492
> 
> 赞同：5
> 
> 时间：2013-01-22T16:37:27.877
> 
> 标签：ssl, https, ssl-certificate, security

尽管您收到一个**红色的威胁**警告，告诉您证书尚未由其中一个证书颁发机构验证或已过期，但与仅使用 HTTP 相比，它有什么不好的呢？是不是更糟？

根据 Google Chrome ( [http://www.sslshopper.com/assets/images/chrome-beta-ssl-2.png](http://www.sslshopper.com/assets/images/chrome-beta-ssl-2.png) ) «攻击者可能试图拦截您的通信»。是什么让这个浏览器和几乎所有其他浏览器在自签名/过期证书的情况下（我没有写一个明确验证为无效的证书）而不是在使用 HTTP 浏览的情况下发出这个警告？同样，它是否比使用 HTTP 浏览更安全？

显然，使用自签名 HTTPS 证书浏览网站比使用 HTTP 浏览完全相同的网站更具威胁性，那么，这些现代浏览器行为是否是骗局，让诚实的公司购买他们**可能**不需要的 SSL 证书？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-14T00:20:21.847

自签名证书**严格来说并不**比信誉良好的 CA 签名的证书差，而且**在所有技术方面**它们都比普通的 HTTP 更好。

从签名和加密的角度来看，它们是**相同**的。两者都可以对流量进行签名和加密，因此其他人无法窥探或进行修改。

不同之处在于证书被指定为受信任的方式。使用 CA 签名证书，用户信任他们在浏览器/操作系统中安装的一组受信任的 CA。如果他们看到由其中一个签名的证书，他们会接受它，一切都很好。如果不是（例如自签名时），您会收到一个可怕的警告。

自签名证书显示此警告的原因是浏览器不知道谁控制证书。浏览器信任的 CA 以验证它们仅签署网站所有者的证书而闻名​​。因此，浏览器通过扩展信任证书的相应私钥由网站运营商控制（希望如此）。使用自签名证书，浏览器无法知道证书是由网站所有者生成的，还是中间某个想要读取您的流量的人生成的。为了安全起见，浏览器会拒绝证书，除非它被证明是有效的......并且你会收到一个大的红色警告。

此警告的重要之处在于它为您提供了一种获取证书信息的方法。如果您知道您希望获得什么证书，您可以信任该证书，并且您的浏览器会让您非常愉快地连接。如果您知道您希望获得的证书，这当然很棒。如果您愿意，它甚至允许您不信任任何 CA（任何受信任的 CA 都可以生成受信任的证书并拦截您的流量）。

如果您不验证证书，您将无法通过未加密的 HTTP 获得任何收益，因为您和服务器之间的任何人都可以生成自己的证书，而您将一无所知。这可能被认为比普通的 HTTP 更糟糕，因为我们人类情绪低落可能会被误导以为我们的连接是安全的，但 HTTP 唯一的技术缺点是一些浪费的 CPU 周期。

因此，对于只有几个人访问并且您可以分发证书的**私人站点**，自签名实际上比受信任的证书**更好。**但是，对于**公共**互联网，您不能指望用户验证证书（无论如何您将如何安全地传输详细信息），如果明智的话，他们可能会转身并运行。

至于过期证书，它们并不比有效证书差。证书过期的原因是它们在破解它们变得可行（希望如此）时失效。因此，明天到期的证书与昨天到期的证书之间的差异可以忽略不计。但是，我会非常担心几年前过期的证书。

## 机会加密

如果您想提供一点额外的安全性，有一个[新标准](https://datatracker.ietf.org/doc/html/draft-hoffman-httpbis-minimal-unauth-enc-01)（目前仅[在 Firefox](http://bitsup.blogspot.it/2015/03/opportunistic-encryption-for-firefox.html)中实现）。

机会加密在支持客户端和服务器之间提供加密，无需身份验证。它允许您使用自签名证书而不会产生任何警告。

机会加密比使用自签名证书和 HTTPS 更好的原因是**它没有向用户提供连接安全的建议**。对用户而言，该连接似乎是一个常规的未加密 HTTP 连接，但实际上，SSL 连接被用来阻止被动攻击者。

同样，如果您实际上是在验证最好的自签名 SSL 证书。但是，如果您只是试图提供未经身份验证的加密来阻止流量嗅探，机会性加密提供了好处，而不会诱使用户认为他们正在使用安全连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T16:51:25.993

在所有的评论和进一步的研究之后，我添加了我自己的答案。

我认为自签名和/或过期的 HTTPS 证书（在浏览器中引发警告）比仅使用 HTTP**更糟糕**，原因如下：

当用户使用 HTTPS 浏览时，他/她假定它是安全的，然后网站应该返回一个有效的证书。如果不是这种情况（自签名和/或过期的 HTTPS 证书），则它不安全。这可能是证书配​​置/部署中的真正威胁或简单问题，但仍然是一个问题，如果用户没有有关此站点的更多信息，则应停止浏览。

然而，有一种情况，我今天发现自己，用户有更多关于网站的信息。假设有一家小公司，其中只有两名员工需要访问网站管理平台。如果这两名员工知道该平台没有任何 CA（证书颁发机构）签署的证书，那么通过这种不安全的 HTTPS 进行通信仍然比通过不安全的 HTTP 进行通信更好，因为至少通信是加密的。这样做会减少攻击的可能性，即使它不能阻止它。

也就是说，即使今天 HTTPS 证书可以自由快速地交付，在证书成本高昂的时代，在 HTTP 和 HTTPS 之间拥有一个中间协议也将是一件好事。一种不比 HTTP 更安全的协议，其中没有 SSL 证书之类的身份验证，但数据是加密的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T02:05:38.180

自签名和证书颁发机构签名的证书仅提供加密和 HTTPS 连接，**但**这就是安全性的相似之处。不幸的是，对于自签名数字证书，只有从自己的服务器创建证书的人才知道有关它的任何信息。例如......这个人将密钥对存储在哪里？还有谁可以访问密钥对？访问者如何知道这是域的合法所有者？关键是，在不了解该过程的情况下，站点访问者（即使是技术熟练的访问者）也不知道如何处理创建该 HTTPS 连接的密钥对。例如，当站点访问者看到由信誉良好的证书颁发机构（例如 thawte（赛门铁克拥有））签署的 HTTPS 连接时，至少访问者知道域所有权已经过验证，并且签名凭据受到受信任机构的高度保护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T17:54:23.787

自签名证书在功能上等同于签名证书（假设密钥长度相同）。固有的安全性是一样的。但是，这并不是说它为最终用户提供了相同级别的安全性，因为他们无法知道谁签署了证书或者它是否应该被信任。

ISP（或任何一个）读取自签名发送的通信并不容易，因为它与证书颁发机构签名的通信相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T16:40:17.587

是的，使用自签名证书的网站没有注册或验证 - 攻击者可以交换证书并伪装成网站 - 被用来点击这些警告你不会注意到差异。

SSL 证书现在是免费的，每个不使用这些服务的“网站管理员”都是......无能，实际上您应该避免使用这些网站。

> 那些现代浏览器行为是让诚实的公司购买 SSL 证书的骗局吗

就像我说的：证书是**免费**的，网站管理员只需要注册-不到20分钟就完成了。

> 同样，它是否比使用 HTTP 浏览更安全？

在某些方面：是的，因为它“训练”用户忽略非常重要的警告

# sql - SSIS 序列容器事务选项

> ID：14463497
> 
> 赞同：7
> 
> 时间：2013-01-22T16:37:34.640
> 
> 标签：sql, sql-server, ssis

我有一个非常简单的 SSIS 包，只是一个数据导入和一个执行 SQL 任务。如果包的任何部分失败，我想回滚所有内容，因此我将这些任务放在序列容器中，并将序列容器 TransactionOption 属性设置为“必需”，并将 FailPackageonFailure 属性设置为“真”。当我以本地数据库为目标时，这工作得很好。但是，当我尝试将 OLE DB 连接更改为远程服务器时，上述属性设置会导致程序包挂起并最终失败并显示“无法获取连接”消息。我在网上看到过关于这个问题的类似描述，但建议总是检查连接。但是我知道连接很好，因为当我将 TransactionOption 属性更改回其默认值'

有谁知道为什么会发生这种情况？我假设它与我尝试连接的服务器上的不同设置有关。如果包的任何部分失败，是否有人知道确保完全回滚的不同方法。

谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T00:11:24.353

您需要使用分布式事务协调器。

*`The Distributed Transaction Coordinator (DTC) service coordinates transactions that update two or more transaction-protected resources, such as databases, message queues, files systems, and so on. These transaction-protected resources may be on a single computer or distributed across many networked computers.`*

因为您试图在服务器之间建立事务，所以它需要一个服务来协调 SQL Server 服务。[这](http://blog.arjanfraaij.com/2010/11/enabling-distributed-transaction.html)是一篇关于如何做到这一点的文章。

确保启动和配置服务，并在 Windows 防火墙中为服务器之间的服务创建例外。

有关更多信息，请参阅有关事务的文章：[http ://www.mssqltips.com/tip.asp?tip=1585](http://www.mssqltips.com/tip.asp?tip=1585)

此外，您可能需要更多地了解 MSDTC 如何与 SSIS 相关，以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T04:22:41.360

另外的选择：

利用 OLE DB 连接的 RetainSameConnection 属性，您可以在 SSIS 中针对多个任务运行常规 SQL Server 事务，而无需使用分布式事务协调器 (DTC)。[在这篇文章中，](http://consultingblogs.emc.com/jamiethomson/archive/2005/08/20/SSIS-Nugget_3A00_-RetainSameConnection-property-of-the-OLE-DB-Connection-Manager.aspx) Jamie Thomson 向我们展示了如何做。

这意味着您可以在一个执行 SQL 任务中开始事务，然后在另一个执行 SQL 任务中选择提交或回滚。

# javascript - jQuery .on() 还是 javascript:function()？

> ID：14463500
> 
> 赞同：2
> 
> 时间：2013-01-22T16:37:46.760
> 
> 标签：javascript, jquery, ajax

我正在处理一些使用对服务器的 ajax 调用构建的页面，因此我依赖于`.on()`将事件处理程序附加到新项目。

但是，我想知道，`javascript:function()`只要事件处理程序是`click`.

这是一个例子。

我从服务器得到一个链接元素`a`：

```
<a href="javascript:doMoreStuff()" class="classThatDoesMore">Do More!</a> 
```

我将它插入到文档中，如下所示：

```
// ajax call and so
$(this).html(response); 
```

为了“做更多”，我有两种方法（可能还有其他方法，但我不知道，但欢迎提出任何建议！）：

```
$(document).on("click",".clssThatDoesMore",function(){ // I need (document)
     // here something will be done
}); 
```

或者

```
doMoreStuff(){
    // here something will be done as well
} 
```

据我所知，这两种解决方案几乎都是跨浏览器的（我已经测试过`href="javascript:function()"`，至少可以追溯到 IE8），但如果我错了，请告诉我！

我想知道过多的`.on()`“侦听器”是否会对浏览器造成很大的负载，因此是否最好依赖`javascript:function()`，或者相反，`.on()`是否根本不需要太多资源并且`.on()`在页面中有多个侦听器不是问题。

PS 我已经放弃了`onclick="doMoreStuff()"`，因为在 Safari 中它不起作用，而在 FF 中，相同的代码是相同的，如果使用 e 完成，在 Safari 中也是如此`href="javascript:doMoreStuff()`。

PPS这不是同一个老问题js v.jquery，对我来说，重点不是一般来说哪个更有效，我想了解实现这一特定任务的最佳方式是什么:-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:41:39.113

`javascript:doMoreStuff()`和 一样糟糕，如果不是更糟的话`onclick="doMoreStuff()"`。您缺乏灵活性，如果未启用 JS，则没有回退，并且据`javascript:`我所知，伪协议甚至不兼容。

让我们忘记效率，只关注`.on`更清洁的事实。您可以将其从 html/ajax 中分离出来，并且非常简单地查看您在做什么并稍后进行更改。

至于效率，我认为您不会注意到差异。 `.on`效率要低得多，因为单击事件必须稍微遍历 DOM 树才能确定事件是否应该触发，但这是非常小的土豆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:09:47.833

> 在文档树顶部附近附加许多委托事件处理程序会降低性能。每次事件发生时，jQuery 必须将该类型的所有附加事件的所有选择器与从事件目标到文档顶部的路径中的每个元素进行比较。为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免过度使用 document 或 document.body 来处理大型文档的委托事件。

来自[http://api.jquery.com/on/#event-performance](http://api.jquery.com/on/#event-performance)

只是为了增加我的两分钱，我会更多地关注我的回调函数的性能而不是它们的数量。内存很便宜，除非您达到疯狂数量的事件处理程序（100 个），否则您不会看到任何基于它们的数量的性能影响。

# .net - 部署到 Azure 并引用项目

> ID：14463504
> 
> 赞同：2
> 
> 时间：2013-01-22T16:38:05.477
> 
> 标签：.net, visual-studio, azure

我正在将 PrjA 部署到 Azure 网站（通过 Git），如果 PrjA 引用 PrjB.dll，一切正常，但如果 PrjA 引用项目 PrjB，则一切正常。Azure 说它找不到 PrjB（正确，我不想为 PrjB 推送源代码和 C）。当 PrjA 参考项目 PrjB 时，我可以在 References/PrjB 的属性中读取 Copy Local 设置为 true，所以我认为它正在工作。

换句话说，我想从 PrjA 引用项目 PrjB，以便我可以按 F12 并找到正确的源，但我想将 PrjB.dll 而不是整个项目推送到 repo/Azure。

这可能吗？

# javascript - 在Javascript中分隔数字

> ID：14463505
> 
> 赞同：2
> 
> 时间：2013-01-22T16:38:06.520
> 
> 标签：javascript, input

> **可能重复：**
> [Javascript千位分隔符/字符串格式](https://stackoverflow.com/questions/3753483/javascript-thousand-separator-string-format)

我的问题是：我怎样才能分开一个数字`/1000`；所以我想做`"1243234"`to`"1 243 234"` 或`"1000"`to`"1 000"`等。（对不起我的英语=/）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:43:54.563

```
> "1243234".replace(/\d(?=(\d{3})+$)/g, "$& ")
"1 243 234" 
```

# html - 任何浏览器中站点右侧的空格

> ID：14463509
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:38:11.480
> 
> 标签：html, css, firebug, moodle

我一直在尝试动摇这一段时间，但没有成功。

有人可以在 Firebug 中查看这个并让我知道为什么当浏览器最小化时会出现滚动条，然后在滚动时会在右侧显示一大块水平空白？

我找不到任何流氓宽度样式或超大元素。

提前谢谢了

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:49:33.980

`.copyIMG`对我来说，`.copy`在 Chrome 中显示为 1024 像素宽。

这可能是你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:31:54.450

实际上并没有看到空白，而是浏览了一下，您将宽度设置为 100%，然后有这个：

```
#page-wrapper {
background: none repeat scroll 0 0 transparent;
border: 1px solid #EEEEEE;
margin: 0 auto;
min-width: 775px;
width: 90%; 
```

}

那90％可能是冲突的吗？

# django - 有没有办法覆盖模板中的表单值？

> ID：14463510
> 
> 赞同：0
> 
> 时间：2013-01-22T16:38:12.653
> 
> 标签：django

我在我`forms.py`的表单输入中定义了以下选项：

```
selection = forms.TypedChoiceField (label="Format", choices = (("Choice1", "Choice1"), ("Choice2", "Choice2"), ("Choice3", "Choice3"),widget = forms.RadioSelect, required= True) 
```

在我的模板中，我目前有以下代码行，允许人们选择其中一个选项。

```
{{ formtoaddselection.selection }} 
```

一般来说这很好，但我有一个极端情况，有时我想覆盖那些默认选择，比如`CornerCase1`and `CornerCase2`。

是否可以覆盖模板中的这些默认值，如果可以，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:30:13.620

在模板层中具有非平凡行为的唯一方法是构建[模板标签。](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)

就像是：

```
@register.simple_tag
def override_form_choices(field, *args, **kwargs):
    field.choices = [(x, x) for x in args]
    return field

{% override_form_choices formtoaddselection.selection 'foo' 'bar' 'baz' %} 
```

您可能会发现在这里分配标签更合适/可读/灵活。

# sencha-touch - Sencha Touch (Ext.device.push) for GCM (Google Cloud Messaging)

> ID：14463511
> 
> 赞同：1
> 
> 时间：2013-01-22T16:38:24.687
> 
> 标签：sencha-touch, google-cloud-messaging

（如何）我可以将 Sencha Touch 的 2.2alpha`Ext.device.push`用于 GCM（Google Cloud Messaging）吗？

向 Sencha CMD Tools 打包的 Sencha Touch WebApp 添加推送通知还有哪些其他可能的解决方案？

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:40:24.907

查看[http://www.pubnub.com/devcenter](http://www.pubnub.com/devcenter)。

他们有您可以使用的 PUB SUB 客户端。

# ruby - 如何在请求范围之外访问 Sinatra 的记录器

> ID：14463512
> 
> 赞同：10
> 
> 时间：2013-01-22T16:38:27.040
> 
> 标签：ruby, logging, sinatra

似乎 Sinatra 的记录器仅在请求处理程序中可用（请参阅[https://github.com/sinatra/sinatra#logging](https://github.com/sinatra/sinatra#logging)），但是如果我想在其他地方使用记录器怎么办，例如在辅助方法或配置中钩？Sinatra 记录器是否可以通过其他方式获得？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T17:14:47.187

[文档](http://www.sinatrarb.com/intro#Scopes%20and%20Binding)给出了一些有关范围的示例，但您可以`logger`在块中定义的方法中看到帮助`helper`程序，因为帮助程序块具有应用程序范围。在 configure 中它不可用，但我倾向于在 rackup 文件中设置我自己的日志记录作为常量或类实例变量，然后它在 configure 中可用（以及其他任何地方）。仅作为单个应用程序的示例：

```
require 'sinatra'
require 'logger'

configure do
  set :logging, nil
  logger = Logger.new STDOUT
  logger.level = Logger::INFO
  logger.datetime_format = '%a %d-%m-%Y %H%M '
  set :logger, logger
end

helpers do
  def check
    settings.logger.info "I'm inside a helper"
    # if you were using Sinatra's logger, you could just call
    # logger.info "I'm inside a helper"
    # and it would work, but only if you've not done the stuff above
    # in the configure block
  end
end

get "/" do
  check # this would work for the way above, or with the Sinatra logger
  "Hello, World!"
end

get "/another" do
  settings.logger.info "Using the settings helper this time" # this only works
  # when you've defined your own logger
  "Hello again"
end 
```

* * *

作为类实例变量的示例作为更好的“全局”：

```
class MyLogger
  def self.logger
    if @_logger.nil?
      @_logger = Logger.new STDOUT
      @_logger.level = Logger::INFO
      @_logger.datetime_format = '%a %d-%m-%Y %H%M '
    end
    @_logger
  end
end 
```

然后在需要的地方使用：

```
configure do
  set :logging, nil
  logger = MyLogger.logger
  set :logger, logger
end 
```

或在课堂上：

```
class AnotherClass

  def some_method
    MyLogger.logger.warn "I'm in some method"
  end 
```

* * *

Sinatra（从 1.3 开始）还带有[一个用于 logging 的助手](http://www.sinatrarb.com/intro.html#Logging)，[这里是一个](http://recipes.sinatrarb.com/p/middleware/rack_commonlogger)用于记录到 STDOUT 的方法和一个您可能会发现有用的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T23:24:14.310

接受的答案对我来说不太有效，所以我想出了以下内容：

```
class AppLogger
  extend SingleForwardable

  def_delegators :logger, :info, :error, :warn, :level

  class << self
    def logger
      return @_logger if @_logger

      @_logger = Logger.new STDOUT
      @_logger.level = Logger::INFO
    end

    def suppress_logging
      logger.level = Logger::FATAL
    end
  end
end 
```

`suppress_logging`对于保持规格安静很有用。

在应用程序初始化中：

```
set :logging, AppLogger.logger 
```

从一个请求：

```
logger.info "Can't touch this." 
```

从一个无权访问的类`logger`：

```
AppLogger.info "You've got mail." 
```

而且，RSpec 模拟：

```
let( :logger ){ double 'logger' }

before do
  allow( AppLogger ).to receive( :logger ).and_return logger
  allow( logger ).to receive :error
end

specify 'logs error' do
  post '/raise/error'

  expect( logger ).to have_received( :error ).with 'An error has occured.'
end 
```

# javascript - Javascript 的范围遍历是如何工作的？

> ID：14463515
> 
> 赞同：0
> 
> 时间：2013-01-22T16:38:39.383
> 
> 标签：javascript, dom, range

我目前正在阅读 Javascript 的 createRange() 函数和相关结构，并正在考虑它有哪些应用程序。

然后我发现了这个应用程序“ [https://www.warroomlaw.com/demo](https://www.warroomlaw.com/demo) ”，它使用基于鼠标单击的突出显示功能，然后保存突出显示的数据。对学习或研究非常有用。

但是它的 HTML 代码是基于表格的，我想知道它实际上是使用 createRange() 或相关函数还是使用完全不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:03:40.783

该站点确实使用范围（和浏览器[选择 API](https://developer.mozilla.org/en-US/docs/DOM/Selection)）来进行突出显示。您可以从第 822 行开始研究演示页面 HTML 中的代码，以了解它在做什么，尽管这不是一个很好的示例，因为 JavaScript 突出显示代码与页面的特定 HTML 非常紧密地耦合在一起。

# java - 新的 Facebook sdk：访问图形 api 的问题

> ID：14463521
> 
> 赞同：1
> 
> 时间：2013-01-22T16:38:56.457
> 
> 标签：java, android, facebook, facebook-graph-api

我在 android 中使用新的 facebook sdk 来获取 facebook 相册。我正在使用的代码是，

```
Session session = Session.getActiveSession();
Request request = new Request(null,
"https://graph.facebook.com/me/albums?access_token=" + session.getAccessToken());
Response response = Request.executeAndWait(request) 
```

当我执行 a 时，`https://graph.facebook.com/me/albums?access_token=ACCESSTOKEN`我看到了有效的`Json`.

请求对象是，

```
{Request:  session: {Session state:OPENED_TOKEN_UPDATED, token:
{AccessToken token:ACCESSTOKEN permissions:[photo_upload, publish_stream, video_upload, share_item, installed, user_photos, status_update, create_note, publish_actions]},  
 appId:281846961912565}, graphPath: https://graph.facebook.com/me/albums?
access_token=ACCESSTOKEN, graphObject: null, restMethod: null, httpMethod: GET, parameters: Bundle[{migration_bundle=fbsdk:20121026}]} 
```

但是当我做 a`Response response = Request.executeAndWait(request);`我得到

```
{Response:  responseCode: 400, graphObject: null, error: {HttpStatus: 400, errorCode: 190, errorType: OAuthException, errorMessage: Malformed access token ACCESSTOKEN?format=json}, isFromCache:false} 
```

完整代码如下：

```
private class FetchUserPhotos extends AsyncTask<String, Integer, Boolean> {

    private ProgressDialog pd = null;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pd = ProgressDialog.show(MainActivity.this, "WWD",
                "Fetching photos..", true, true);
    }

    @Override
    protected Boolean doInBackground(String... params) {
        Session session = Session.getActiveSession();
        Request request = new Request(null,
                "https://graph.facebook.com/me/albums?access_token="
                        + session.getAccessToken());

        Response response = request.executeAndWait();
        return true;
    }
    @Override
    protected void onPostExecute(Boolean result) {
        pd.dismiss();
    }

} 
```

你们中的任何人都可以告诉我我访问它的方式是否有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T19:03:02.827

找到了这个问题的答案。正确的代码是

```
 Session session = Session.getActiveSession();
        Request request = new Request(session, "me/albums");

        Response response = request.executeAndWait(); 
```

您不必指定整个链接和访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:01:14.607

声明这个异步任务：

```
private class FBTask extends AsyncTask<Object, Object, Response> {        
    protected Response doInBackground(Object... arg0) {
        Request request = new Request(null,
                "https://graph.facebook.com/me/albums?access_token=" + session.getAccessToken());
        // Execute the request synchronously in the background
        // and return the response.
        return request.executeAndWait();
    }

    protected void onPostExecute(Response response) {
        // When the task completes, process
        // the response on the main thread
        onPostActionResponse(response);
    }

} 
```

并调用此任务执行：

```
new FBTask().execute(); 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T08:53:43.013

//如果会话打开

```
Bundle params=new Bundle();
params.putString("message",edittext.getText().toString());

Request mrequest=new Request(msession,postid+"/comments/?access_token="+msession.getAccessToken(),params,HttpMethod.POST,new Request.Callback() {

@Override
public void onCompleted(Response response) {
Log.d("RESPONSE",response.toString());
}});
mrequest.executeAsync(); 
```

# android - 在 Android 4.2 中添加联系人不通知应用程序

> ID：14463522
> 
> 赞同：0
> 
> 时间：2013-01-22T16:39:00.913
> 
> 标签：android, contactscontract, android-4.2-jelly-bean

我正在向应用程序添加联系人选择器功能，以及将应用程序中的联系人添加到本机联系人管理器的功能。对于插入，我正在启动联系人管理器，如下所示：

```
Intent intent = new Intent(ContactsContract.Intents.Insert.ACTION);

intent.setType(ContactsContract.RawContacts.CONTENT_TYPE);
intent.putExtra(ContactsContract.Intents.Insert.PHONE, mCurrentNumber);
intent.putExtra(ContactsContract.Intents.Insert.PHONE_TYPE, "MyType");

mActivity.startActivityForResult(intent, ADD_CONTACT); 
```

这将成功打开联系人管理器并使用指定的电话号码填充它。但是，在我的 Nexus 7 平板电脑上，当联系人管理器返回时，它会返回主屏幕并且不会向我的应用发送任何类型的响应。这可以正常工作并在我的 ICS 设备上按预期返回，但我不知道这是否是因为 ICS 设备使用的是制造商的自定义联系人管理器，而 Nexus 7 是 Google 的。

任何人都可以对这个问题有所了解吗？我启动联系人管理器的方式有问题吗？

编辑：我还应该补充一点，如果我从 Nexus 7 上的联系人管理器选项菜单中选择“放弃”，它确实会按预期返回到我的应用程序。只有当我选择“完成”按钮时才会出现问题。选择“完成”导航到联系人管理器的主菜单，此时任何退出联系人管理器的尝试都会将用户带到主屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:49:46.017

原来解决这个问题的方法是添加

```
intent.putExtra("finishActivityOnSaveCompleted", true); 
```

联系意图。这绕过了联系人管理器的详细信息视图并将控制权返回给我的应用程序，并正确调用了 onActivityResult。

# ios - 待处理的 OCUnit 测试

> ID：14463526
> 
> 赞同：1
> 
> 时间：2013-01-22T16:39:01.840
> 
> 标签：ios, unit-testing, ocunit

有什么方法可以使用 OCUnit 来表示挂起的测试？当然，我可以这样做：

`STFail(@"pending test");`

但是，很容易看到失败的测试运行并假设这是我的待定测试。我正在寻找某种方式向自己表明“这个测试仍然需要编写”，但我还没有准备好去做！有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:18:27.110

我为此使用了#warning 编译器指令。这样，它们会在 Xcode 中作为持续提醒出现，但不会与失败的测试混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:43:08.357

如果您不想看到失败的测试，可以尝试在 Xcode 中使用书签。Xcode 4.x 对书签的支持发生了很大变化，但它们仍然存在，或者是 //FIXME //TODO 选项。就是这样。

我确实相信，如果有一种方法可以概述需要测试的内容并让 IDE 帮助您检查这些项目，那就太好了。如果您曾经看过 Ken Beck 的书*Test-Driven Development*，他支持使用检查表和删除线。有一些工具做得很好，你甚至可以在 xcode 中工作。

Xcode 需要更加认真地对待 TDD！

# python - 使用python增加和设置字典键值的有效方法是什么？

> ID：14463531
> 
> 赞同：0
> 
> 时间：2013-01-22T16:39:15.523
> 
> 标签：python, dictionary

这基本上是我正在尝试做的，这是行不通的。有没有办法挑选出字典的值并对其进行数学化？为了一个废话的例子：

```
dictionaryNumbers = {'a':10,'b':10,'c':1,'d':1,'e':5,'f':1}
dictionaryNumbers['a'] += 5
#The goal would be dictionaryNumbers['a'] would equal 15. 
```

* * *

编辑：

伙计们感谢您的反馈。我调用函数来修改集合的顺序似乎存在缺陷。在进行数学运算之前，我正在打印输出。再次感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T16:40:09.167

您大部分都做对了，并且您的代码运行良好：

```
>>> dictionaryNumbers = {'a':10,'b':10,'c':1,'d':1,'e':5,'f':1}
>>> dictionaryNumbers['a'] += 5
>>> dictionaryNumbers['a']
15 
```

但是对于字典中尚未包含的任何键，您必须先测试 ( `if key not in dictionaryNumbers`) 或使用`.get()`：

```
>>> dictionaryNumbers['z'] = dictionaryNumbers.get('z', 0) + 3 
```

这很快就会变老。

但我会改用一个[`collections.Counter()`类](http://docs.python.org/2/library/collections.html#collections.Counter)：

```
>>> from collections import Counter
>>> counter = Counter()
>>> counter.update({'a':10,'b':10,'c':1,'d':1,'e':5,'f':1})
>>> counter
Counter({'a': 10, 'b': 10, 'e': 5, 'c': 1, 'd': 1, 'f': 1})
>>> counter['a'] += 5
>>> counter['a'] 
15
>>> counter.most_common(3)
[('a', 15), ('b', 10), ('e', 5)] 
```

优点：

*   无需测试新密钥；访问不存在的密钥会自动分配计数 0
*   从要计数的项目列表中创建一个新计数器就像`Counter(items_to_count)`.
*   您可以对计数器求和；`counter1 + counter2`返回`Counter`所有值相加的新值。
*   您可以减去计数器（负值被删除），相交它们（找到任何一个计数的最小值），或创建一个联合（最大计数）。

# php - 我是否必须始终销毁（） Imagick 对象？

> ID：14463532
> 
> 赞同：5
> 
> 时间：2013-01-22T16:39:17.213
> 
> 标签：php, imagemagick, imagick

Imagick 中有两种方法：clear() 和 destroy()。

但我不确定何时使用它们。

例如，即使在覆盖了我拥有的唯一引用之后，我是否也必须销毁（）？

```
$img = new Imagick($path1);
// do something with $img, then load a different image
$img = new Imagick($path2); // should I have destroyed $img before doing this? 
```

如果我覆盖引用，Imagick 会释放资源吗？

如果没有，这既烦人又可怕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T17:14:16.657

我做了一个快速而肮脏的测试，image1是85kb image2是457kb

```
$start = microtime();

for($i=0; $i<10; $i++){
    $img = new Imagick('./image1.jpg');
    $img->setImageResolution(72,72);
    $img->resampleImage(72,72,imagick::FILTER_UNDEFINED,0);
    $img->destroy();

    $img = new Imagick('./image2.jpg');
    $img->setImageResolution(72,72);
    $img->resampleImage(72,72,imagick::FILTER_UNDEFINED,0);
    $img->destroy();
}

$end = microtime();
$len = $end - $start;
echo number_format($len, 2),'<br /> <br />';

function kb($n){
    return ceil($n/1024);
}

echo 'memory usage - ',kb(memory_get_usage()),' / ',kb(memory_get_peak_usage()),' <br />'; 
```

然后我注释掉了 destroy 行，然后再次运行它。奇怪的是，它在使用时似乎使用了更多的内存，`destroy()`但只有 3 或 4 k。计时器并没有太大的不同，当我运行基本的 apache bench 负载测试时

```
ab -n 20 -c 5 http://ubunty.local/sandbox/stackexchange/imagick.php 
```

里面好像没有多少。

我期待销毁使用更少的内存。即使在不同的变量中使用 image2 似乎也没有什么不同

```
$img2 = new Imagick('./image2.jpg'); 
```

如果有理由使用 ->destroy() 那么它必须归结为我忘记测量的东西，据我所知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-03T23:25:54.550

**是的。**

请注意，根据文档，这`clear()`是首选。`destroy()`

```
// clear temp files
$imagick_image->clear(); // in your case "$img->clear();" 
```

您还可以运行 cron 来为您删除临时文件，否则您的服务器可能会崩溃。这不是 php 代码，它是命令行代码。

```
# linux command
find /tmp/ -name "magick-*" -type f -delete

# cron
45 * * * * find /tmp/ -name "magick-*" -type f -delete 
```

# iphone - 在 NSFetchedResultsController 下滚动时，自定义表格视图单元格内的 UIButton 没有响应

> ID：14463533
> 
> 赞同：0
> 
> 时间：2013-01-22T16:39:18.350
> 
> 标签：iphone, ios, uitableview, uibutton, nsfetchedresultscontroller

在我的一个观点中，我遇到了一种奇怪的行为。我`NSFetchedResultsController`用来从本地存储中获取一些数据，并自定义`UITableViewCells`显示一些文本信息、用户名和个人资料图片。个人资料图片`UIButton`通过 Touch Up Inside 事件链接到控制器。

**如果单元格是加载视图时显示的单元格，则**当我点击它时，该按钮可以正常工作。但是，当我滚动表格视图时，所有按钮都显示点击反馈，而不是执行`IBAction`它们再次滚动到顶部。如果包含按钮的`IBAction`单元格不是来自加载视图时显示的单元格，则永远不会触发。

**编辑**

我无法提供相关代码，IBAction 是通过 Storyboard 链接的。我正在执行的操作如下：

```
- (IBAction)onTapUserImage:(id)sender
{
    [self performSegueWithIdentifier:@"showUserProfile" sender:sender];
} 
```

`NSFetchedResultsController`正在按预期工作，它显示了所有必需的信息。唯一的问题是，当滚动强制结果控制器加载更多单元格时，IBAction 和自定义单元格中的按钮之间的链接似乎丢失了。

# ios - 使用按下按钮和数组行的标识来执行 segue

> ID：14463539
> 
> 赞同：0
> 
> 时间：2013-01-22T16:39:33.810
> 
> 标签：ios, uitableview, uinavigationbar, segue, didselectrowatindexpath

我刚刚从 iOS 和目标 C 开始，我在当前应用程序中尝试完成的一件事是根据表格视图中行的标识和按下的按钮的标识执行 segue（这些是导航栏顶部的按钮）。我感到困惑的原因是，通常当我想用多个按钮做某事时，我对两个按钮都有一个 IBAction，然后使用发件人标签。但是，在这种情况下，我实际上想做的是有类似的东西（如果 indexPath.row ==0 && 按下按钮的身份 ==0） self performSEguewithIdentifier sender
现在我不确定第二部分会发生什么在那个 if 语句中，如果你能帮我写一些代码，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:17:12.690

如果用户需要先按下按钮，然后选择一行，则不能像问题中那样使用复合 if 语句，因为尚未选择该行。一种方法是让您的按钮方法在 ivar 上设置一个值（基于其标签），然后您将其签入 didSelectRowAtIndexPath:。所以，如果你有一个 int ivar，buttonPressed，你的 IBAction 可能是：

```
@implementation ViewController {
    int buttonPressed;
}

-(IBAction)buttonPressed:(UIButton *) sender {
    buttonPressed = sender.tag;
} 
```

然后，在 didSelectRowAtIndexPath 方法中：

```
-(NSIndexPath *)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if(buttonPressed == 1) {
        // do something with indexPath.row info
        // perform whichever segue
    }else if (buttonPressed == 2) {
       // do something with indexPath.row info
        // perform whichever segue
    }
} 
```

# c# - 如何摆脱“ArrayOfQuoteResult”？

> ID：14463554
> 
> 赞同：0
> 
> 时间：2013-01-22T16:40:13.250
> 
> 标签：c#, xml, xml-serialization, xmlserializer

我该如何下车`ArrayOfQuoteResult`？

我正在序列化`List<QuoteResult>`它，它如下所示，但我不想`ArrayOfQuoteResult`在 Xml 文件中。

请参阅随附的 XML 响应：

```
<SearchSchemesResponse xmlns="CompareYourTravelInsurance.Services">
  <SearchSchemesResult>
    <ArrayOfQuoteResult xmlns="">
       <QuoteResult>
          <Currency>GBP</Currency>
          <MedicalCost>36</MedicalCost>
          <PolicyCost>86.06</PolicyCost>
          <PolicyIPT>14.34</PolicyIPT>
          <MyProperty>0</MyProperty>
          <ReturnPage>http</ReturnPage>
          <QuoteRef>328</QuoteRef>
          <PolicyWordingDocumentURL>http</PolicyWordingDocumentURL>
          <KeyFactsDocumentURL>http</KeyFactsDocumentURL>
          <MedicalExpensesExcess>3232</MedicalExpensesExcess>
          <MedicalExpensesCover>444</MedicalExpensesCover>
          <BaggageCover>300</BaggageCover>
          <BaggageExcess>0</BaggageExcess>
          <CancellationCover>500</CancellationCover>
          <CancellationExcess>400</CancellationExcess>
          <DestinationName>test</DestinationName>
          <SchemeName>3694</SchemeName>
          <SchemeDisplayName>Economy Insurefor Direct 2012</SchemeDisplayName>
          <Countries>Sri Lanka,UK</Countries>
          <QuoteRequestRef>8bd1f476-f4e8-4a2b-a489-5291e4adc6f2</QuoteRequestRef>
          <MaxTripDays>60</MaxTripDays>
          <SchemeCoverList>
             <SchemeCover>
                <CoverSectionName>Medical</CoverSectionName>
                <CoverSectionLimit>5000000</CoverSectionLimit>
                <CoverSectionExcess>125</CoverSectionExcess>
             </SchemeCover>
             <SchemeCover>
                <CoverSectionName>Emergency Dental Treatment</CoverSectionName>
                <CoverSectionLimit>350</CoverSectionLimit>
                <CoverSectionExcess>125</CoverSectionExcess>
             </SchemeCover>
          </SchemeCoverList>
       </QuoteResult>
    </ArrayOfQuoteResult>
  </SearchSchemesResult>
</SearchSchemesResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:57:54.627

用属性装饰`XmlElement`属性：

```
[XmlElement("QuoteResult")]
List<QuoteResult> QuoteResult { get; set; } 
```

# c# - CreateProcessAsUser：服务获取“5：拒绝访问”试图访问网络共享

> ID：14463556
> 
> 赞同：3
> 
> 时间：2013-01-22T16:40:20.877
> 
> 标签：c#, networking, windows-services, impersonation

我使用 Windows 服务中的 CreateProcessAsUser 来为当前活动用户启动应用程序。到目前为止，它适用于本地驱动器上的应用程序。

但是，如果可执行文件存在于网络共享上，则当我使用完整的服务器名称 (\myserver\path\app.exe) 时，该服务会生成 5: ERROR_ACCESS_DENIED。如果我使用映射驱动器 (P:\path\app.exe)，我也可以生成 2: ERROR_FILE_NOT_FOUND。

我可以从资源管理器中很好地启动应用程序。听起来我确实无法获得正确的令牌副本，因为该服务无法在服务器上正确模拟我。

我从各种帖子中尝试了几种不同的 CreateProcessAsUser 实现，但无济于事。这对我来说是全新的（迷幻的）东西，坦率地说，我迫不及待地想回到 .NET :) 我猜有问题的行就在这里：

```
DuplicateTokenEx(
    hUserToken,
    (Int32)MAXIMUM_ALLOWED,
    ref sa,
    (Int32)SECURITY_IMPERSONATION_LEVEL.SecurityIdentification,
    (Int32)TOKEN_TYPE.TokenPrimary,
    ref hUserTokenDup);

CreateEnvironmentBlock(ref pEnv, hUserTokenDup, true);

Int32 dwCreationFlags = NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE | CREATE_UNICODE_ENVIRONMENT;

PROCESS_INFORMATION pi;
STARTUPINFO si = new STARTUPINFO();
si.cb = Marshal.SizeOf(si);
si.lpDesktop = "winsta0\\default";

CreateProcessAsUser(hUserTokenDup,    // client's access token
    null,                             // file to execute
    commandLine,                      // command line
    ref sa,                           // pointer to process SECURITY_ATTRIBUTES
    ref sa,                           // pointer to thread SECURITY_ATTRIBUTES
    false,                            // handles are not inheritable
    dwCreationFlags,                  // creation flags
    pEnv,                             // pointer to new environment block 
    workingDirectory,                 // name of current directory 
    ref si,                           // pointer to STARTUPINFO structure
    out pi);                          // receives information about new process 
```

这是完整的示例代码，我想它可能很有用：

```
using System;
using System.Text;
using System.Security;
using System.Management;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace Win32
{
    public class Win32API
    {
        [StructLayout(LayoutKind.Sequential)]
        struct SECURITY_ATTRIBUTES
        {
            public Int32 Length;
            public IntPtr lpSecurityDescriptor;
            public Boolean bInheritHandle;
        }

        enum TOKEN_TYPE
        {
            TokenPrimary = 1,
            TokenImpersonation = 2
        }

        [StructLayout(LayoutKind.Sequential)]
        struct STARTUPINFO
        {
            public Int32 cb;
            public String lpReserved;
            public String lpDesktop;
            public String lpTitle;
            public UInt32 dwX;
            public UInt32 dwY;
            public UInt32 dwXSize;
            public UInt32 dwYSize;
            public UInt32 dwXCountChars;
            public UInt32 dwYCountChars;
            public UInt32 dwFillAttribute;
            public UInt32 dwFlags;
            public short wShowWindow;
            public short cbReserved2;
            public IntPtr lpReserved2;
            public IntPtr hStdInput;
            public IntPtr hStdOutput;
            public IntPtr hStdError;
        }

        [StructLayout(LayoutKind.Sequential)]
        struct PROCESS_INFORMATION
        {
            public IntPtr hProcess;
            public IntPtr hThread;
            public UInt32 dwProcessId;
            public UInt32 dwThreadId;
        }

        enum SECURITY_IMPERSONATION_LEVEL
        {
            SecurityAnonymous = 0,
            SecurityIdentification = 1,
            SecurityImpersonation = 2,
            SecurityDelegation = 3,
        }

        const UInt32 MAXIMUM_ALLOWED = 0x2000000;
        const Int32 CREATE_UNICODE_ENVIRONMENT = 0x00000400;
        const Int32 NORMAL_PRIORITY_CLASS = 0x20;
        const Int32 CREATE_NEW_CONSOLE = 0x00000010;

        [DllImport("kernel32.dll", SetLastError = true)]
        static extern Boolean CloseHandle(IntPtr hSnapshot);

        [DllImport("kernel32.dll")]
        public static extern UInt32 WTSGetActiveConsoleSessionId();

        [DllImport("Wtsapi32.dll")]
        static extern UInt32 WTSQueryUserToken(UInt32 SessionId, ref IntPtr phToken);

        [DllImport("advapi32.dll", EntryPoint = "CreateProcessAsUser", SetLastError = true, CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
        extern static Boolean CreateProcessAsUser(
            IntPtr hToken,
            String lpApplicationName,
            String lpCommandLine,
            ref SECURITY_ATTRIBUTES lpProcessAttributes,
            ref SECURITY_ATTRIBUTES lpThreadAttributes,
            Boolean bInheritHandle,
            Int32 dwCreationFlags,
            IntPtr lpEnvironment,
            String lpCurrentDirectory,
            ref STARTUPINFO lpStartupInfo,
            out PROCESS_INFORMATION lpProcessInformation);

        [DllImport("advapi32.dll", EntryPoint = "DuplicateTokenEx")]
        extern static Boolean DuplicateTokenEx(
            IntPtr ExistingTokenHandle,
            UInt32 dwDesiredAccess,
            ref SECURITY_ATTRIBUTES lpThreadAttributes,
            Int32 TokenType,
            Int32 ImpersonationLevel,
            ref IntPtr DuplicateTokenHandle);

        [DllImport("userenv.dll", SetLastError = true)]
        static extern Boolean CreateEnvironmentBlock(
            ref IntPtr lpEnvironment,
            IntPtr hToken,
            Boolean bInherit);

        [DllImport("userenv.dll", SetLastError = true)]
        static extern Boolean DestroyEnvironmentBlock(IntPtr lpEnvironment);

        /// <summary>
        /// Creates the process in the interactive desktop with credentials of the logged in user.
        /// </summary>
        public static Boolean CreateProcessAsUser(String commandLine, String workingDirectory, out StringBuilder output)
        {
            Boolean processStarted = false;
            output = new StringBuilder();

            try
            {
                UInt32 dwSessionId = WTSGetActiveConsoleSessionId();
                output.AppendLine(String.Format("Active console session Id: {0}", dwSessionId));

                IntPtr hUserToken = IntPtr.Zero;
                WTSQueryUserToken(dwSessionId, ref hUserToken);

                SECURITY_ATTRIBUTES sa = new SECURITY_ATTRIBUTES();
                sa.Length = Marshal.SizeOf(sa);

                IntPtr hUserTokenDup = IntPtr.Zero;
                DuplicateTokenEx(
                    hUserToken,
                    (Int32)MAXIMUM_ALLOWED,
                    ref sa,
                    (Int32)SECURITY_IMPERSONATION_LEVEL.SecurityIdentification,
                    (Int32)TOKEN_TYPE.TokenPrimary,
                    ref hUserTokenDup);

                if (hUserTokenDup != IntPtr.Zero)
                {
                    output.AppendLine(String.Format("DuplicateTokenEx() OK (hToken: {0})", hUserTokenDup));

                    Int32 dwCreationFlags = NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE;

                    IntPtr pEnv = IntPtr.Zero;
                    if (CreateEnvironmentBlock(ref pEnv, hUserTokenDup, true))
                    {
                        dwCreationFlags |= CREATE_UNICODE_ENVIRONMENT;
                        output.AppendLine(String.Format("CreateEnvironmentBlock() success."));
                    }
                    else
                    {
                        output.AppendLine(String.Format("CreateEnvironmentBlock() FAILED (Last Error: {0})", Marshal.GetLastWin32Error()));
                        pEnv = IntPtr.Zero;
                    }

                    // Launch the process in the client's logon session.
                    PROCESS_INFORMATION pi;

                    STARTUPINFO si = new STARTUPINFO();
                    si.cb = Marshal.SizeOf(si);
                    si.lpDesktop = "winsta0\\default";

                    output.AppendLine(String.Format("CreateProcess (Path:{0}, CurrDir:{1})", commandLine, workingDirectory));

                    if (CreateProcessAsUser(hUserTokenDup,    // client's access token
                            null,                // file to execute
                            commandLine,        // command line
                            ref sa,                // pointer to process SECURITY_ATTRIBUTES
                            ref sa,                // pointer to thread SECURITY_ATTRIBUTES
                            false,                // handles are not inheritable
                            dwCreationFlags,    // creation flags
                            pEnv,                // pointer to new environment block 
                            workingDirectory,    // name of current directory 
                            ref si,                // pointer to STARTUPINFO structure
                            out pi                // receives information about new process
                        ))
                    {
                        processStarted = true;
                        output.AppendLine(String.Format("CreateProcessAsUser() OK (PID: {0})", pi.dwProcessId));
                    }
                    else
                    {
                        output.AppendLine(String.Format("CreateProcessAsUser() failed (Last Error: {0})", Marshal.GetLastWin32Error()));
                    }

                    if (DestroyEnvironmentBlock(pEnv))
                    {
                        output.AppendLine("DestroyEnvironmentBlock: Success");
                    }
                    else
                    {
                        output.AppendLine(String.Format("DestroyEnvironmentBlock() failed (Last Error: {0})", Marshal.GetLastWin32Error()));
                    }
                }
                else
                {
                    output.AppendLine(String.Format("DuplicateTokenEx() failed (Last Error: {0})", Marshal.GetLastWin32Error()));
                }
                CloseHandle(hUserTokenDup);
                CloseHandle(hUserToken);
            }
            catch (Exception ex)
            {
                output.AppendLine("Exception occurred: " + ex.Message);
            }
            return processStarted;
        }
    }
} 
```

它适用于像这样的本地可执行文件：

```
StringBuilder result = new StringBuilder();
Win32API.CreateProcessAsUser(@"C:\Windows\notepad.exe", @"C:\Windows\", out result); 
```

**我的问题**：需要调整什么才能使用重复令牌正确访问网络共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T14:10:19.063

当您将它用于允许访客访问的共享（即没有用户名/密码）时，该命令可以正常工作，但是当您将它用于需要身份验证才能使用它的共享时，它不起作用。

UI 调用涉及到重定向器，它会自动建立到执行所需的远程服务器的连接。

请注意，一种解决方法，但不是真正的解决方案是使用`cmd`基于中继来获取可执行文件，因此对于命令行，您可以将其设置为：

```
CreateProcessAsUser(@"cmd /c ""start \\server\share\binary.exe""", @"C:\Windows", out result); 
```

然后使用以下命令将 startupinfo 更改为`SW_HIDE`窗口`cmd`：

```
si.cb = Marshal.SizeOf(si);
si.lpDesktop = "winsta0\\default";
si.dwFlags = 0x1; // STARTF_USESHOWWINDOW
si.wShowWindow = 0; // SW_HIDE 
```

调用是在`cmd`启动命令之前完全进入用户环境的一小部分 - 这将利用所有凭据来访问服务器。

请注意，您可能需要一些逻辑来防止`SW_HIDE`for 直接调用的应用程序（例如，在命令行字符串的开头检查 cmd ？）

# authentication - 使用 MoinMoin 的 Ldap 身份验证不起作用

> ID：14463559
> 
> 赞同：0
> 
> 时间：2013-01-22T16:40:37.663
> 
> 标签：authentication, ldap, openldap, moinmoin

我正在尝试将 MoinMoin 与我的 ldap 服务器连接，但它不起作用。我是否以正确的方式进行设置？我正在使用 Ubuntu 存储库中的 MoinMoin。

在这里，我向您展示我的farmconfig.py：

```
from farmconfig import FarmConfig

# now we subclass that config (inherit from it) and change what's different:
class Config(FarmConfig):

    # basic options (you normally need to change these)
    sitename = u'MyWiki' # [Unicode]
    interwikiname = u'MyWiki' # [Unicode]

    # name of entry page / front page [Unicode], choose one of those:

    # a) if most wiki content is in a single language
    #page_front_page = u"MyStartingPage"

    # b) if wiki content is maintained in many languages
    page_front_page = u"FrontPage"

    data_dir = '/usr/share/moin/data'
    data_underlay_dir = '/usr/share/moin/underlay'

from MoinMoin.auth.ldap_login import LDAPAuth
ldap_authenticator1 = LDAPAuth(
    server_uri='ldap://192.168.1.196',
    bind_dn='cn=admin,ou=People,dc=company,dc=com',
    bind_pw='secret',
    scope=2,
    referrals=0,
    search_filter='(uid=%(username)s)',
    givenname_attribute='givenName',
    surname_attribute='sn',
    aliasname_attribute='displayName',
    email_attribute='mailRoutingAddress',
    email_callback=None,
    coding='utf-8',
    timeout=10,
    start_tls=0,
    tls_cacertdir=None,
    tls_cacertfile=None,
    tls_certfile=None,
    tls_keyfile=None,
    tls_require_cert=0,
    bind_once=True,
    autocreate=True,
)
auth = [ldap_authenticator1, ]
cookie_lifetime = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:52:19.937

这是一个缩进问题，auth 和 cookie_lifetime 必须在类 Config 中（所以只需将所有内容缩进 4 个空格）。

# android - 在 1 个 android 设备上调试 2 个应用程序

> ID：14463564
> 
> 赞同：1
> 
> 时间：2013-01-22T16:40:59.493
> 
> 标签：android, eclipse, debugging

我正在重新发布这个重要问题 - 我有一个应用程序应该调用另一个应用程序，每个应用程序都位于不同的工作区。

我想调试它们（在同一设备上）

如果有的话，我该怎么做？

（较早的问题：[SO](https://stackoverflow.com/questions/9437580/debug-multiple-android-applications-simultaneously-on-one-device)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:44:40.573

由于您拥有一台设备，因此您可以在该设备上使用一个 Eclipse IDE 的 AVD 实例。您可以将调用从 AVD 实例发送到您的物理设备，这样您就可以很好地调试或测试您的应用程序。

# facebook - 像框“数据高度”显示错误

> ID：14463565
> 
> 赞同：1
> 
> 时间：2013-01-22T16:40:59.700
> 
> 标签：facebook, styles

Like Box“数据高度”参数功能的功能最近是否发生了变化？该名称用于允许开发人员设置提要的高度，而不管“显示面孔”等其他功能的使用情况。现在看来，此参数只会响应以允许显示更多面孔，而不是实际发布。

我的公司已经建立了一些利用此功能的网站，直到上个月，小部件的“数据高度”规范运行良好。现在除非“show faces=true”，否则没有任何响应。其他几个客户端网页的显示现在受到损害，除非可以解决此问题，否则需要注意。

目前有解决此问题的方法吗？这是一个错误吗？如果没有，是否有时间表恢复以前的功能？

# asp.net-mvc - 文化改变后验证错误消息不会改变

> ID：14463569
> 
> 赞同：1
> 
> 时间：2013-01-22T16:41:10.857
> 
> 标签：asp.net-mvc, c#-4.0, localization, asp.net-mvc-4, currentuiculture

我目前正在开发一个需要支持 2 种语言的**MVC4应用程序。**我将**DataAnnotations**与以下形式的资源一起使用：

```
public class SignupModel
{
    [Required(ErrorMessageResourceName = "Registration_ValidEmailRequired", ErrorMessageResourceType = typeof(Validation))]
    [Email(ErrorMessageResourceName = "Registration_ValidEmailRequired", ErrorMessageResourceType = typeof(Validation))]
    public string Email { get; set; }

    [Required(ErrorMessageResourceName = "Registration_PasswordRequired", ErrorMessageResourceType = typeof(Validation))]
    [StringLength(100, MinimumLength = 8, ErrorMessageResourceName = "Registration_PasswordInvalidLength", ErrorMessageResourceType = typeof(Validation))]
    [DataType(DataType.Password)]
    public string Password { get; set; }
} 
```

我创建了一个**全局操作过滤器**，它读取语言 cookie（如果存在），并相应地设置当前**文化**和**uiculture**。如果 cookie 不存在，它会创建具有当前文化的 cookie。这是**OnActionExecuting**在过滤器中的样子：

```
public void OnActionExecuting(ActionExecutingContext filterContext)
{
    var langCookie = GetOrSetLanguageCookie(filterContext.HttpContext);
    var culture = new CultureInfo(langCookie.Value);

    Thread.CurrentThread.CurrentCulture = culture;
    Thread.CurrentThread.CurrentUICulture = culture;
} 
```

一切都按预期工作，除非发生这种情况：

1.  从 HTML 表单（假设家里有一个花哨的注册表单，没有客户端验证，所以它的花哨布局上没有任何东西被破坏）发布到 Home 控制器中的 Signup 操作。
2.  如果发布的数据有错误，则会以与当前文化匹配的语言显示。（好的和预期的）。
3.  通过使用我在客户端中启用的下拉菜单更改语言，该下拉菜单实际上回发到服务器。（我还没有在这里实现**PRG**模式，所以我看到了关于重新发布相同数据的警告）。
4.  该视图是使用我选择的语言呈现的，但是验证消息仍然使用它们最初的语言。

如果我调试处理语言切换的操作过滤器，我可以看到 ModelState 以原始语言保存错误，所以我的猜测是验证只在服务器中发生一次。我想我需要清理 ModelState 并强制验证，但我想知道这是否是一个 hack，是否有更好的方法来处理这个问题。

谢谢！R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T09:18:28.533

在这里阅读 Shaun Xu 的帖子：http: [//geekswithblogs.net/shaunxu/archive/2010/05/06/localization-in-asp.net-mvc-ndash-3-days-investigation-1-day.aspx](http://geekswithblogs.net/shaunxu/archive/2010/05/06/localization-in-asp.net-mvc-ndash-3-days-investigation-1-day.aspx)

ModelBinder（负责获取验证消息）在操作之前和操作过滤器之前运行，这就是为什么您的文化更改发生在验证消息文本确定之前并且不受其影响的原因。

您可以尝试将此代码移至较早的扩展点，例如控制器的 Execute 或 ControllerFactory 的 CreateController 方法。

您可以在此处查看我的问题以获取建议的解决方案： [如何控制显示模型验证错误的语言](https://stackoverflow.com/questions/17639974/how-to-control-the-language-in-which-model-validation-errors-are-displayed)

# c++ - “long”类型的 C++ 计算

> ID：14463572
> 
> 赞同：0
> 
> 时间：2013-01-22T16:41:23.567
> 
> 标签：c++, types, precision

我有一个内联函数进行频率到周期的转换。计算精度必须使用**long**类型，而不是**double**类型。否则，可能会导致一些舍入错误。然后该函数将结果转换回**double**。我想知道在下面的代码中，哪一行会保持**long**类型的计算。无论参数栏是 100、100.0 还是 33.3333。

```
double foo(long bar)
{
  return 1000000/bar;
  return 1000000.0/bar;
  return (long)1000000/bar;
  return (long)1000000.0/bar;
} 
```

我自己试过了，第 4 行有效。但只是想知道在这种情况下类型转换的概念。

**编辑：**

错误之一是 1000000/37038 = 26，而不是 26.9993。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:45:17.540

```
return 1000000/bar; 
```

这将做一个很长的数学。

```
return 1000000.0/bar; 
```

这将作为双重计算。

```
return (long)1000000.0/bar; 
```

这相当于第一个 -- 1000000.0 是一个双精度数，但是你在除法之前将它转换为 long，所以除法将在 long 上完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:46:17.713

第一行（第三行更详细）将进行数学运算`long`（在 C++ 中总是截断任何结果），然后将整数值作为双精度值返回。我不明白你在关于`bar`存在的问题中所说的，`33.3333`因为那不是可能的`long`价值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:46:29.793

正如您提出的那样，这个问题没有意义。

`bar`是整数类型，所以`1000000/bar`肯定会小于`1000000`，可以用`double`¹精确表示，所以用整数算术执行计算不可能提供更好的精度 - 实际上，你会得到整数除法，在这种情况对于 的任何值都*不太*`bar`精确，因为它会截断小数部分。在这里的转换中遇到问题的唯一方法是`long`转换为，但如果它超出除法的最终结果的范围，则为 0，就像在整数算术中一样。`double``bar``double``double`

仍然：

```
1000000/bar 
```

在 s之间进行除法`long`： 1000000 是 an`int`或 a `long`，取决于平台，`bar`是 a `long`；如果需要，第一个操作数被提升为 a `long`，然后执行整数除法。

```
1000000.0/bar 
```

`double`在s:之间执行除法`1000000.0`是`double`文字，因此在除法之前`bar`被提升`double`。

```
(long)1000000/bar 
```

相当于第一个：强制转换优先于除法，并且强制`1000000`（是 a`long`或 an `int`）成为 a `long`；`bar`是 a `long`，执行 s 之间的除法`long`。

```
(long)1000000.0/bar 
```

等效于前一个：`1000000.0`is a `double`，但您将其转换为 a`long`然后执行整数除法。

* * *

1.  The C standard, to which the C++ standard delegates the matter, asks for a minimum of 10 decimal digits for the mantissa of `double`s (`DBL_DIG`) and at least `10**37` as representable power of ten before going out of range (`DBL_MAX_10_EXP`) (C99, annex E, ¶4).

# php - php: SimpleXML 加载文件无效字符错误

> ID：14463573
> 
> 赞同：9
> 
> 时间：2013-01-22T16:41:24.473
> 
> 标签：php, character, simplexml

我有一个 php 应用程序，它有时会失败（取决于我加载的数据）并给出如下错误：

```
parser error : PCDATA invalid Char value 11
Warning: simplexml_load_file(): ath>/datadrivenbestpractices/Data-driven Best Practices in 
Warning: simplexml_load_file(): ^ in 
```

我确信有一些值会导致问题。我无法控制数据。我尝试过以下解决方案：[错误：“输入不是正确的 UTF-8，指示编码！” 使用 PHP 的 simplexml_load_string](https://stackoverflow.com/questions/2507608/error-input-is-not-proper-utf-8-indicate-encoding-using-phps-simplexml-lo)和[How to handle invalid unicode with simplexml](https://stackoverflow.com/questions/7766455/how-to-handle-invalid-unicode-with-simplexml)和[How to skip invalid characters in XML file using PHP](https://stackoverflow.com/questions/3466035/how-to-skip-invalid-characters-in-xml-file-using-php)但它们没有帮助。

罪魁祸首字符串是：“数据驱动 - 最佳实践”和“数据驱动最佳实践以招募和留住代表性不足的研究生，2011 年 5 月 12 日 - 下午 1:30-3:00，美国东部标准时间”（可能是破折号或返回字符） .

我能做些什么？我的是一个 Windows php 测试环境，但实时环境将是一个 LAMP 环境——无法触及 .ini 文件。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T17:04:26.923

在解析之前去除无效字符将是最简单的解决方法：

```
function utf8_for_xml($string)
{
    return preg_replace ('/[^\x{0009}\x{000a}\x{000d}\x{0020}-\x{D7FF}\x{E000}-\x{FFFD}]+/u', ' ', $string);
} 
```

来自：[PHP 生成的 XML 显示无效的 Char 值 27 消息](https://stackoverflow.com/questions/12229572/php-generated-xml-shows-invalid-char-value-27-message)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:11:53.683

没关系，答案：[如何使用 PHP 跳过 XML 文件中的无效字符](https://stackoverflow.com/questions/3466035/how-to-skip-invalid-characters-in-xml-file-using-php) 确实有效。这是我的代码：

```
stream_filter_register('xmlutf8', 'ValidUTF8XMLFilter');

class ValidUTF8XMLFilter extends php_user_filter
{
    protected static $pattern = '/[^\x{0009}\x{000a}\x{000d}\x{0020}-\x{D7FF}\x{E000}-\x{FFFD}]+/u';

    function filter($in, $out, &$consumed, $closing)
    {
        while ($bucket = stream_bucket_make_writeable($in)) {
            $bucket->data = preg_replace(self::$pattern, '', $bucket->data);
            $consumed += $bucket->datalen;
            stream_bucket_append($out, $bucket);
        }
        return PSFS_PASS_ON;
    }
}

$doc = simplexml_load_file("php://filter/read=xmlutf8/resource=".$serveraddress.$myparam); 
```

# php - 将变量设置为函数调用以在 PHP 中的 if 语句中使用

> ID：14463574
> 
> 赞同：0
> 
> 时间：2013-01-22T16:41:24.823
> 
> 标签：php

好的，我正在做一些 Wordpress 编辑，我写了一个 if 语句。

```
<?php $title = the_title();
if ($title != 'Designer'){ ?>
<body>
<?php }else{ ?>
<body class="noresponce">
<?php } ?> 
```

正如您所看到的，它使用函数调用作为变量。这是因为函数调用会调用当前页面的名称。这很好。

然而，当我这样做时，它也倾向于在页面上呼应标题，这是有道理的。我可能正在尝试做一些不正确的事情。谁能告诉我它是否可能？

基本上我想在 if 语句中使用函数调用而不在页面上回显它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:43:10.180

使用`get_the_title()`而不是`the_title()`.

来源：[http ://codex.wordpress.org/Function_Reference/get_the_title](http://codex.wordpress.org/Function_Reference/get_the_title)

# c# - 在负载测试中，Webtest 执行时间要长得多

> ID：14463579
> 
> 赞同：0
> 
> 时间：2013-01-22T16:41:39.717
> 
> 标签：c#, visual-studio-2012, load-testing, performance-testing

我在 VS2012 中做了一个简单的 WebPerformanceTest，它只是登录并在网站上做一些基本的工作。运行时，此测试仅运行大约一两秒钟。

现在，我做了一个负载测试，只包含这个 webtest，`Constant`负载 5 分钟，模式为`based on the number of virtual users`. 有趣的部分来了：无论我为这个负载测试分配了多少用户，执行的测试数量总是与分配的用户数量相同。我还尝试提高负载测试执行时间，得到相同的结果：`one test = 5 minutes per user`，而执行 webtest 只需要大约 1-2 秒。

有谁知道为什么在负载测试中测试需要更长的时间（300 次）？我在这里做错了什么？

编辑：这台机器是 Windows Server 2008 R2，有 4 个内核 @ 3.00ghz 和 8 GB RAM

这是一些设置的图像：

![在此处输入图像描述](../Images/d5012b694f46f43b9e766c373a3f5502.png)

![在此处输入图像描述](../Images/48b67572347ac1722c0fa15ad4ca5e0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:32:46.267

注意运行时间：5:00

您已将每个测试设置为运行五分钟。所以基本上它会运行测试，然后在剩下的时间里闲置，关闭测试，然后向你报告它花了 5 分钟。除非您更改此设置或创建运行时间可能超过 5 分钟的测试，否则您不会看到任何差异。

# ios - 难以理解 Objective-C 块文档

> ID：14463580
> 
> 赞同：7
> 
> 时间：2013-01-22T16:41:40.080
> 
> 标签：ios, objective-c, objective-c-blocks

我目前无法理解 Obj-C 块和 __block 存储类型的基础知识。**从以下文档：**

[http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW6)

**我试图理解以下段落和示例：**

复制块时，它会创建对块内使用的对象变量的强引用。如果在方法的实现中使用块：

如果通过引用访问实例变量，则会对 self 进行强引用；如果您按值访问实例变量，则会对该变量进行强引用。以下示例说明了两种不同的情况：

```
dispatch_async(queue, ^{
    // instanceVariable is used by reference, a strong reference is made to self
    doSomethingWithObject(instanceVariable);
}); 
```

* * *

```
id localVariable = instanceVariable;
dispatch_async(queue, ^{
    /*
      localVariable is used by value, a strong reference is made to localVariable
      (and not to self).
    */
    doSomethingWithObject(localVariable);
}); 
```

要覆盖特定对象变量的此行为，您可以使用 __block 存储类型修饰符对其进行标记。

**我的问题：**

1.  一个示例究竟是如何“通过引用访问”而另一个示例是通过变量访问？为什么 localVariable “按值使用”？
2.  文档中的“强烈引用自我”是什么意思？它指的是哪个“自我”？
3.  如果我在第二个示例中将 __block 存储类型添加到 localVariable ，我是否错误地假设块关闭了变量，因此它将它保留在堆中直到块被释放？还有哪些事情正在发生？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:25:59.890

> 一个示例究竟是如何“通过引用访问”而另一个示例是通过变量访问？为什么 localVariable “按值使用”？

理解这一点的一种方法如下：

1.  当您在方法中定义的块中使用局部变量时，发生的情况是变量的内容被复制到某个块私有内存中，以便在执行块时（方法退出后）可用；从这个意义上说，我们可以谈论“按值”访问（如：值被复制）；从语法上讲，编译器不知道 的内容`localVariable`指的是什么，因此它的值被视为这样；

2.  当直接访问`instanceVariable`在类的方法中定义的块时，编译器知道我们正在访问正在执行该方法的同一对象，并且不需要复制任何内容，因为该对象的生命周期比执行该方法的方法更长。找到块；但是我们需要确保块执行时对象仍然存在，因此我们得到了对它的强引用。

现在，关于“通过引用”的使用：在第一种情况下，您会获得对类成员的引用的副本：如果您可以更改其值（但您不能，因为编译器禁止它），您只是修改了一个块私有副本，所以原始对象不受影响。

在第二种情况下，您可以修改的值`instanceVariable`（例如：它是`nil`并且您分配通过它引用的对象），这将影响在定义块时执行该方法的对象。

> 文档中的“强烈引用自我”是什么意思？它指的是哪个“自我”？

`self`是当前正在执行找到块的方法的对象。进行强引用仅意味着（在 ARC 用语中）对象的保留计数增加（以确保某些其他实体不能通过释放它来释放它）。

> 如果我在第二个示例中将 __block 存储类型添加到 localVariable ，我是否错误地假设块关闭了变量，因此它将它保留在堆中直到块被释放？还有哪些事情正在发生？

Using`__block`使变量始终“通过引用”访问，因此您可以修改它们。

这是它们的处理方式：

> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧内声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供以后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。
> 
> 作为一种优化，块存储从堆栈开始——就像块本身一样。如果块是使用 Block_copy 复制的（或者在 Objective-C 中，当块被发送一个副本时），变量被复制到堆中。因此，__block 变量的地址会随着时间而改变。

# php - 将具有不同键 => 值对的数组放入表 PHP

> ID：14463589
> 
> 赞同：0
> 
> 时间：2013-01-22T16:42:02.037
> 
> 标签：php, arrays, multidimensional-array

我生成了一个看起来有点像这样的“主”数组：

```
Array ( [userID] => 152 [email] => xxxxx@googlemail.com [name] => Jay jay go go [stream] => 616 ) 
Array ( [userID] => 133 [email] => damxxxxian@indigo.com [name] => Damian T [stream] => 616 ) 
Array ( [userID] => 154 [email] => julie@indigo.com [name] => Julie1000 E [stream] => 615 [PROGRAMME] => Designer ) 
Array ( [userID] => 153 [email] => jay@indigo.com [name] => James1000 G [stream] => 616 [PROGRAMME] => Apple Develpepr ) 
```

这是通过单个数组循环的输出，因此这 4 个数组中的每一个都有键 0 - 3。

我的问题是我希望创建一个表来保存所有这些数据，每一行代表一个用户，但数组键可能略有不同。例如，前 2 个用户没有“程序”数组键/值，但我希望有一列说“程序”，但对于在他们的数组中没有这个的用户来说，它是空的。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:47:56.590

这可以通过将所有这些数组合并到一个数组中来实现。循环遍历数组中的每个项目，收集键（in_array 可能会有所帮助）。循环遍历您的键数组以打印出表中的所有列标题，然后当您的脚本需要输出数组时，您可以简单地在每个人上循环运行，在每个属性映射到列时循环遍历每个属性。这有点抽象，但我认为你可以填写其余部分。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:52:50.597

您可以列出要包含在表中的列，然后对于每个用户，使用[isset](http://php.net/manual/en/function.isset.php)检查每列是否有值：

```
$columnNames = array('userID', 'email', 'name', 'stream', 'PROGRAMME');

foreach ($users as $user) {
    echo '<tr>';
    foreach ($columnNames as $columnName) {
        echo '<td>';
        if (isset($user[$columnName])) {
            echo htmlspecialchars($user[$columnName]);
        }
        echo '</td>';
    }
    echo '</tr>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:23:05.513

如果我没有弄错您的问题，通过这样做，您可以使用最大数组键创建新数组；

```
$data = array(
    array('userID' => 152, 'email' => 'xxxxx@googlemail.com', 'name' => 'Jay jay go go', 'stream' => 616),
    array('userID' => 133, 'email' => 'damxxxxian@indigo.com', 'name' => 'Damian T', 'stream' => 616),
    array('userID' => 154, 'email' => 'julie@indigo.com', 'name' => 'Julie1000 E', 'stream' => 615, 'PROGRAMME' => 'Designer'),
    array('userID' => 153, 'email' => 'jay@indigo.com', 'name' => 'James1000 G', 'stream' => 616, 'PROGRAMME' => 'Apple Develpepr'),
);
$max_len = null;
$max_arr = null;
// First we find max array to grab its keys
foreach ($data as $i => $a) {
    $len = count($a);
    if ($max_len === null || $len > $max_len) {
        $max_len = $len;
        $max_arr = $data[$i];
    }
}
$max_arr_keys = array_keys($max_arr);
$data_new = array();
foreach ($data as $i => $a) {
    // and using max array keys here
    foreach ($max_arr_keys as $k) {
        // key exists? get value, or set as NULL
        $data_new[$i][$k] = isset($a[$k]) ? $a[$k] : null;
    }
}
print_r($data_new); 
```

输出应该是这样的；

```
Array ( [userID] => 152 [email] => xxxxx@googlemail.com [name] => Jay jay go go [stream] => 616 [PROGRAMME] => null )
Array ( [userID] => 133 [email] => damxxxxian@indigo.com [name] => Damian T [stream] => 616 [PROGRAMME] => null ) 
Array ( [userID] => 154 [email] => julie@indigo.com [name] => Julie1000 E [stream] => 615 [PROGRAMME] => Designer ) 
Array ( [userID] => 153 [email] => jay@indigo.com [name] => James1000 G [stream] => 616 [PROGRAMME] => Apple Develpepr ) 
```

# r - CGAL 工具：是否有 CGAL 的接口，或 R 中的等效工具集？

> ID：14463590
> 
> 赞同：4
> 
> 时间：2013-01-22T16:42:01.937
> 
> 标签：r, cgal, point-in-polygon

我开始学习处理复杂和简单的多边形，确定点是否在多边形内部/外部等（例如[http://geomalgorithms.com/a09-_intersect-3.html](http://geomalgorithms.com/a09-_intersect-3.html)和相关页面）。我希望找到一个提供 Bentley-Ottmann 算法、绕组数、边缘交叉等实现的 R 包。

或者，是否有 CGAL 库或类似工具集的 R 接口？Rcpp 是解决此问题的最佳（或唯一）方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:17:34.627

最接近的可能是`package:rgeos`. 用于地理空间应用、多边形叠加、缓冲、交叉点等。

CGAL 的包装会非常有趣。但是，我有一种模糊的感觉，可能存在许可问题......它部分是 LGPL，部分是 GPL，但如果您不想遵守这些许可，您可以购买商业许可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T22:41:30.083

有 CGAL SWIG 绑定：[http](http://code.google.com/p/cgal-bindings/) ://code.google.com/p/cgal-bindings/并且 SWIG 支持 R，所以它应该可以工作，但我不知道它是否已经尝试过。

# python - pyodbc 与 pypyodbc 相比有什么设计优势吗？

> ID：14463591
> 
> 赞同：15
> 
> 时间：2013-01-22T16:42:02.640
> 
> 标签：python, odbc, etl, pyodbc, pypyodbc

我知道[pyodbc](http://code.google.com/p/pyodbc/)是一个较旧的项目，可能更具功能性和健壮性，但是它的设计（基于已编译的 C 代码的组件）有什么东西可以使它比纯 Python 实现更可取，例如[pypyodbc](http://code.google.com/p/pypyodbc/)？

我做了很多 ETL 工作，并且正在考虑从 Linux/Jython/JDBC 方法切换到 Windows/Cygwin/Python/ODBC 方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-13T14:29:02.743

用 C 语言编写的`pyodbc`over的潜在优势是：`pypyodbc`

*   速度 - 请参阅[pypyodbc wiki 比较](https://code.google.com/p/pypyodbc/wiki/speed)
*   更保守的内存使用

用 Python 编写的`pypyodbc`over by 的潜在优势是：`pyodbc`

*   不太可能包含 C 指针问题
*   不太可能包含内存分配问题
*   维护更简单；高级语言意味着更少的代码行
*   安装起来更容易，没有编译问题，需要为不同版本的 Python、平台等单独构建

成熟的优势：

*   更少的错误
*   更全面的功能覆盖
*   更好地处理极端情况

成熟度很大程度上取决于`pyodbc`不出错。在我过去的经验（大约 2016 年）中，这是不正确的，它有[相当多的内存泄漏](https://code.google.com/p/pyodbc/issues/list?can=1&q=memory+leak)错误等。但从那以后 pyodbc 得到了显着改进，现在得到了[适当的维护](https://stackoverflow.com/a/57064792/120398)。

作者声称这`pypyodbc`是对`pyodbc`Python 代码的重新实现，这意味着特征覆盖率应该是等效的。不过，在较新的代码中可能存在一些很少尝试的极端情况。

免责声明：我还没有尝试过`pypyodbc`

# mysql - mysql.data 在我的实体框架项目中发生冲突

> ID：14463593
> 
> 赞同：1
> 
> 时间：2013-01-22T16:42:05.103
> 
> 标签：mysql, entity-framework, ado.net, ef-model-first, mysql.data

我在我的 Ado.Net 项目中使用 MySQL 数据库。所以我首先使用实体​​框架模型。这很好，但是当我想将“mysql.data”（我从名为 mysql 数据连接器的 mysql 网站获得）添加到引用时，它给了我这样的错误：“对象引用未设置为对象的实例”。当我从引用中删除 mysql.data 时，它工作得很好。我认为，它可能会导致 mysq.data。我想使用 mysql.data 来搜索查询。因为我不知道在我的 mysql ado.net 项目中编码搜索查询实体框架。你能帮我吗，我该如何解决这个问题？我想在我的项目中首先使用 mysql.data 和实体框架模型。您忠诚的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:33:30.677

现在，我解决了这个问题。我从 MySQL 网站提供了“mysql.data.entity.dll”，我添加到引用中，现在一切都很好。

# mysql - 使用 lambda 时 Rails 3 范围关联错误

> ID：14463594
> 
> 赞同：1
> 
> 时间：2013-01-22T16:42:06.410
> 
> 标签：mysql, ruby-on-rails-3, activerecord, lambda, scope

所以试图`scope`在我的`user`模型中写一个，我似乎无法让它工作。

我的`user`模型看起来有点像这样

```
class User < ActiveRecord::Base
   has_one :user_profile

   scope :api_user, lambda { |member_code| joins(:users, user_profiles).where('user_profiles.member_code = ?', member_code)} 
```

我的`user_profiles`模型看起来像这样：

```
class UserProfile < ActiveRecord::Base
   belongs_to :user 
```

当我`scope`像这样在rails控制台中调用时：

```
User.api_user(4321) 
```

我收到此错误：

```
ActiveRecord::ConfigurationError: Association named 'users' was not found; perhaps you misspelled it? 
```

我是范围的新手，如果我这样做，我知道如何在没有它们的情况下执行此操作：

```
User.find_by_id(UserProfile.find_by_member_code(4321).user_id) 
```

它返回的正是我想要的。但是我需要多次使用它，（写一个`api`）所以我真的很想开始`scope`工作。

[已经在这里](https://stackoverflow.com/questions/9245476/rails-3-associations-error)和[这里](https://stackoverflow.com/questions/13827242/scopes-lambda-and-rails-3)查看了这些问题，但它们并没有说明我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:16:27.000

`joins`只需要列出关联，而不是它本身。所以它应该是这样的：

```
scope :api_user, lambda { |member_code| joins(:user_profile).where('user_profiles.member_code = ?', member_code) } 
```

# iphone - 在 ARC 上使用 SCRFTPRequest 进行 iOS FTP 上传

> ID：14463595
> 
> 赞同：0
> 
> 时间：2013-01-22T16:42:11.343
> 
> 标签：iphone, ios, xcode, automatic-ref-counting

大家好，我正在使用 SCRFTPRequest，[https:](https://github.com/Hackmodford/SCRFTPRequest) //github.com/Hackmodford/SCRFTPRequest在 FTP 服务器上上传文件，我以前使用过，效果很好，但现在我有一个使用 ARC 的项目，几天前，API 被重新编码为 ARC。

我有一个崩溃，我不知道为什么，它在 startRequest 之后崩溃而没有任何错误消息，整个函数被执行，包括 startUploadRequest。我真的不知道为什么它会崩溃。我已经在 iPAD 1 和 5.0 和 iPad 3 和 6.1 上进行了测试。

我试过其他文件，同样的问题，文件是在 FTP 服务器上创建的，名称正确，但大小为 0 Kb。

```
filePath = [[NSBundle mainBundle] pathForResource:@"Spiriva Mentiones Legales" ofType:@"pdf"];
SCRFTPRequest *ftpRequest = [[SCRFTPRequest alloc] initWithURL:[NSURL URLWithString:@"ftp://ftp.belersoft.ro/"]
                                                  toUploadFile:filePath];             
ftpRequest.username = @"user";
ftpRequest.password = @"pass";

ftpRequest.delegate = self;
ftpRequest.customUploadFileName = [modifiedPathWithXLS lastPathComponent];

[ftpRequest startRequest]; 
```

我已经实现了所有的委托回调，只有 ftpRequestWillStart 会被调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T19:48:13.283

如果其他人遇到需要帮助的“零字节文件上传”问题，请尝试替换

`[ftpRequest startRequest];` 和

```
[ftpRequest startAsynchronous]; 
```

并将以下委托方法添加到您的代码中：

`- (void)ftpRequest:(SCRFTPRequest *)request didChangeStatus:(SCRFTPRequestStatus)status`

（注意方法名称与 SCRFTPRequest 文档中列出的方法名称之间的区别。）

我对这个库还不够熟悉，还不能适应更改库本身，但是调整委托方法名称和使用异步对我有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T09:51:49.710

使用 [ftpResuest startAsynchronous]

# c - 有谁知道热使用 TOPCASED 吗？

> ID：14463597
> 
> 赞同：0
> 
> 时间：2013-01-22T16:42:13.790
> 
> 标签：c, eclipse-plugin, uml, topcased

我开始使用 TOPCASED，我想知道是否可以从状态机图中生成 C 代码。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T16:07:57.440

是的，此功能并非特定于顶盖。Topcased UML 模型符合 Eclipse UML2 元模型，大多数生成器框架，如 openArchitectureWare (Xpand) 都支持该模型。当然，您必须自己实现状态机到 C 的映射。

# r - 将numpy数组转换为rpy2矩阵（预测包，xreg参数）

> ID：14463600
> 
> 赞同：4
> 
> 时间：2013-01-22T16:42:22.320
> 
> 标签：r, matrix, rpy2

我似乎无法让线路`fit = forecast.Arima(series, order=order, xreg=r_exog_train)`正常工作。它确实可以在没有 xreg 参数的情况下工作，所以我很确定这是 numpy 数组到 rpy2 矩阵的转换造成了问题。

有人在这里发现错误吗？谢谢！

这是我得到的错误（不幸的是德语部分）：

```
Fehler in `colnames<-`(`*tmp*`, value = if (ncol(xreg) == 1) nmxreg else paste(n
mxreg,  :
  Länge von 'dimnames' [2] ungleich der Arrayausdehnung
Traceback (most recent call last):
  File "r.py", line 58, in <module>
    res = do_forecast(series, horizon=horizon, exog=(exog_train, exog_test))
  File "r.py", line 39, in do_forecast
    fit = forecast.Arima(series, order=order, xreg=exog_train)
  File "C:\Python27\lib\site-packages\rpy2\robjects\functions.py", line 86, in _
_call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "C:\Python27\lib\site-packages\rpy2\robjects\functions.py", line 35, in _
_call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Fehler in `colnames<-`(`*tmp*`, value = if (ncol(
xreg) == 1) nmxreg else paste(nmxreg,  :
  Lõnge von 'dimnames' [2] ungleich der Arrayausdehnung 
```

这是代码示例：

```
# Python wrapper for R forecast stuff
import numpy as np

print 'Start importing R.'
from rpy2 import robjects 
from rpy2.robjects.packages import importr
from rpy2.robjects.numpy2ri import numpy2ri
robjects.conversion.py2ri = numpy2ri

base = importr('base')
forecast = importr('forecast')
stats = importr('stats')
ts = robjects.r['ts']
print 'Finished importing R.'

def nparray2rmatrix(x):
  nr, nc = x.shape
  xvec = robjects.FloatVector(x.transpose().reshape((x.size)))
  xr = robjects.r.matrix(xvec, nrow=nr, ncol=nc)
  return xr

def nparray2rmatrix_alternative(x):
  nr, nc = x.shape
  xvec = robjects.FloatVector(x.reshape((x.size)))
  xr = robjects.r.matrix(xvec, nrow=nr, ncol=nc, byrow=True)
  return xr

def do_forecast(series, frequency=None, horizon=30, summary=False, exog=None):
  if frequency:
    series = ts(series, frequency=frequency)
  else:
    series = ts(series)
  if exog:
    exog_train, exog_test = exog
    r_exog_train = nparray2rmatrix(exog_train)
    r_exog_test = nparray2rmatrix(exog_test)
    order = robjects.IntVector([1, 0, 2]) # c(1,0,2) # TODO find right model
    fit = forecast.Arima(series, order=order, xreg=r_exog_train)
    forecast_result = forecast.forecast(fit, h=horizon, xreg=r_exog_test)
  else:
    # fit = forecast.auto_arima(series)
    #robjects.r.plot(series)
    fit = stats.HoltWinters(series)
    forecast_result = forecast.forecast(fit, h=horizon)
  if summary:
    modsummary = base.summary(fit)
    print modsummary
  forecast_values = np.array(list(forecast_result.rx2('mean')))
  return forecast_values

# Example
series = np.arange(100)
exog_train = np.ones((100,2))
exog_test = np.ones((100,2))
horizon = 100
res = do_forecast(series, horizon=horizon, exog=(exog_train, exog_test))
print res 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:29:52.010

我通过明确说明“dimnames”来使其工作，如：`xr = robjects.r.matrix(xvec, nrow=nr, ncol=nc, dimnames=dimnames)`。显然，预测包需要这个。

# coldfusion - 无法使映射工作

> ID：14463601
> 
> 赞同：1
> 
> 时间：2013-01-22T16:42:24.050
> 
> 标签：coldfusion, mapping, coldfusion-10

我有以下目录结构：

```
| SITES_FOLDER

    |___ WEBSITE1

        |___ WEBSITE_CFC

    |___ CFC_DIR 
```

WEBSITE1 包含一个Application.cfc 和一些页面。然后我在 WEBSITE_CFC 目录中有一个组件 ShoppingCart.cfc 在会话开始时使用以下代码实例化：

```
createObject("component","WEBSITE_CFC.ShoppingCart").Init() /> 
```

这行得通。

现在我将 ShoppingCart.cfc 移动到 CFC_DIR 目录并将我的实例化代码更改为：

```
createObject("component","CFC_DIR.ShoppingCart").Init() /> 
```

显然这不起作用，因为 ColdFusion 在根目录“WEBSITE1”下搜索“CFC_DIR”目录但没有找到。

我认为这个问题可以通过使用**映射**来解决，所以我去找 CFIDE 管理员。服务器设置 > 映射。

```
Logical path: "CFC_DIR"

Directory path: "C:\some\folders\SITES_FOLDER\CFC_DIR" 
```

没运气。然后我在Application.cfc中尝试了：

```
<cfset THIS.mappings["/CFC_DIR"] = "C:\some\folders\SITES_FOLDER\CFC_DIR" /> 
```

这也不起作用！

**编辑：**

也许我明白：如果我尝试从 cfm 模板创建 CFC，它就可以工作。

当我尝试在*OnSessionStart* Application.cfc 的方法中创建它时出现错误：

> 确保名称正确且组件或接口存在。消息找不到 ColdFusion 组件或接口 C:\some\folders\SITES_FOLDER\WEBSITE1|WEBSITE_CFC\ShoppingCart.cfc。

换句话说，它一直在错误的目录中寻找它。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:34:20.607

如果您将文件更改为 /CFC_DIR 但它仍在使用 /WEBSITE_CFC 听起来缓存需要清除。

### 在 CF Admin 中清除缓存

可以在 ColdFusion Administrator 中手动清除缓存。登录后，“服务器设置”中的第三项是“缓存”。滚动到页面底部的按钮以清除缓存。

出于开发目的，您可能需要考虑完全禁用此页面上的各种缓存选项 - 它们对于实时服务器的性能改进很有用，但通常对您的开发机器来说是不必要的障碍。

### 以编程方式清除缓存

如果你有一个自动部署，你不想登录到远程服务器上的 CF Admin 并按下按钮。幸运的是，您还可以通过[编程方式清除缓存](http://www.carehart.org/blog/client/index.cfm/2012/12/13/clearing_the_template_cache_programmatically)：

```
<cfscript>
    createObject("Component", "cfide.adminapi.administrator")
        .login("**replace with admin password**");

    RuntimeService = createObject("component", "cfide.adminapi.runtime");

    // Clear whole cache:
    RuntimeService.clearTrustedCache();

    // Clear cache for individual files:
    RuntimeService.clearTrustedCache("/path/to/file1.cfm,/path/to/file2.cfm");

    // Clear component cache:
    RuntimeService.clearComponentCache();
</cfscript> 
```

^(（代码改编自[查理的博客条目](http://www.carehart.org/blog/client/index.cfm/2012/12/13/clearing_the_template_cache_programmatically)。）)

Admin Runtime 组件的 API 可以在[http://www.cfexecute.com/admin-api-documentation/runtime-cfc/找到](http://www.cfexecute.com/admin-api-documentation/runtime-cfc/)

# php - 更改产品页面上的正文背景

> ID：14463603
> 
> 赞同：0
> 
> 时间：2013-01-22T16:42:37.740
> 
> 标签：php, html, css

我正在为学校做一个项目。截止日期是明天。当 url 为 index.php?category=nieuwBinnen&product=Belair+X ch 时，我想更改 body 标签并在产品页面上添加背景图片

我怎样才能简单地实现这一点。我尝试了 if isset 方法，但没有成功。您可以在以下网址查看该网站：[http](http://alisgfx.com/lomo/) ://alisgfx.com/lomo/ 感谢您的帮助。

阿里

**索引.php**

```
# geef de HTML code voor het openen van de pagina weer
htmlOpenen('Titel van de website');

# toon de header
toonHeader();

include 'menu.php';

?>

<?php 

if (isset($_GET['category']) && isset($_GET['product']) && isset($$_GET['category'])){  //display product if provided
    $category = $$_GET['category'];
    $product = $_GET['product'];
    $error_msg = 1;  //sets a basic error catcher in case product does not exist
    foreach ($category as $item) {
       if ($item['naam'] == $product) {
        echo '
        <section>
        <article class="product">
            <h2 class="item_name">'.$item['naam'].'</h2>

            <div id="image">'.$item['foto'].'</div>
            <p>'.$item['video'].'</p>
            <p>
                '.$item['fotos'].'
            </p>
        </article>
        ';

        echo '
            <article class="product simpleCart_shelfItem">
                <div id="slider3">
                    <ul class="pager">
                        <li><a href="" class="pagenum active" rel="0">Info</a></li>
                        <li><a href="" class="pagenum" rel="1">Reviews</a></li>
                        <li><a href="" class="pagenum" rel="2">Extra\'s</a></li>
                    </ul>                           
                    <div class="viewport">
                        <ul class="overview">
                            <li class="page"><p> '.$item['info'].' <hr />'.$item['prijs'].'Beschikbaarheid: '.$item['beschik'].' <br /><br />Aantal: <input type="text" value="1" class="item_Quantity"></p></li>
                            <li class="page"><p>'.$item['reviews'].'</p></li>
                            <li class="page"><p>'.$item['extras'].'</p></li>
                        </ul>
                    </div>
                </div>
                    <h2 class="item_name hide"> '.$item['naam'].' </h2>
                    <p class="hide">'.$item['thumb'].'</p>
                    <a class="item_add" href="javascript:;"> Plaats product <br />in je winkelmandje </a>                
            </article>
        ';

        echo '
            <article class="product box-shadow">
                <p>Met deze camera<br /> kun je zulke foto\'s<br /> maken</p>
                <div id="slider4">
                    <a class="buttons prev" href="#">left</a>
                        <div class="viewport">
                            <ul class="overview">
                                '.$item['upload'].'
                            </ul>
                        </div>
                    <a class="buttons next" href="#">right</a>
                </div>
                <!-- <form action="" method="post">
                    <input type="file" name="bestand"><br>
                    <input type="submit" name="submit" value="Upload foto">
                </form> -->

                <a class="upload" href="upload">Upload je<br /> eigen foto\'s</a>   
            </article>

            <article class="product">
                <p>filmrolletje</p>
            </article>
            </section>
        ';

        // echo $item['prijs']."<br/>";
        // echo $item['product']."<br/>";

        // echo $item['info']."<br/>";

        $error_msg = 0;
       }       
    }
 if ($error_msg){ //basic error message in case product does not exist
     echo 'The selected product no longer exists';
 } 
}          
else{  //displays all product if specific product not given
?>

<!-- producten carousel -->
<section class="carousel">
    <div class="banner"><img src="img/nieuw.jpg"></div>
    <div id="slider1">
        <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <?php 
                foreach($nieuwBinnen as $new) {
                    echo '
                        <li>
                            <a href="index.php?category=nieuwBinnen&product='.urlencode($new['naam']).'">
                            <p>'.$new['product'].'</p>
                            <h2>'.$new['naam'].'</h2>
                            </a>
                        </li>
                    ';
                }
                ?>
            </ul>
        </div>
        <a class="buttons next" href="#">right</a>
    </div>
</section>

<!-- producten carousel -->
<section class="carousel">
    <div class="banner"><img src="img/best.jpg"></div>
    <div id="slider1">
        <a class="buttons prev" href="#">left</a>
        <div class="viewport">
            <ul class="overview">
                <?php 
                foreach($bestSellers as $best) {
                    echo '
                        <li>
                            <a href="index.php?category=bestSellers&product='.urlencode($best['naam']).'">
                            <p>'.$best['product'].'</p>
                            <h2>'.$best['naam'].'</h2>
                            </a>
                        </li>
                    ';
                }
                ?>
            </ul>
        </div>
        <a class="buttons next" href="#">right</a>
    </div>
</section>
<?php
}

include 'footer.php';

?> 
```

**inc.template.inc.php**

```
<?php

# Public: Echo de HTML code voor het openen van de pagina
#
# $titel    - Een tekst die tussen de <title> en </title> tags wordt geplaatst
#
# Examples:
#
#   htmlOpenen('pagina titel');
#   # => geeft onderstaande html weer
function htmlOpenen($titel){
    # Geef de HTML openen code weer
    echo '<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Lomography</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/jquery-ui.css">
        <link rel="stylesheet" href="./fancybox/source/jquery.fancybox.css">
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <section id="container" class="clearfix">
    ';
}

function htmlOpenenCart($titel){
    # Geef de HTML openen code weer
    echo '<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Lomography</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/jquery-ui-cart.css">
        <link rel="stylesheet" href="./fancybox/source/jquery.fancybox.css">
        <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <section id="container" class="clearfix">
    ';
}

function toonHeader() {
    echo '
        <header>
            <a id="logo" href="index.php"><img src="img/logo.png" alt="Lomography Shop"></a>

            <nav id="mainNavigation">
                <ul>
                    <li><a href="inloggen.php">inloggen</a></li>
                    <li><a href="registreren.php">registreren</a></li>
                    <li><a href="over-ons.php">over ons</a></li>
                </ul>
            </nav>

            <div class="cartInfo"><span class="simpleCart_quantity"></span> items</div>
            <div id="cartPopover">
                <div id="triangle">&#x25B2;</div>
                <div class="simpleCart_items"></div>
                <div id="cartData" class="clearfix">
                    <div class="left"><strong>Items: </strong><span class="simpleCart_quantity"></span></div>
                    <div class="right"><strong>Total: </strong><span class="simpleCart_total"></span></div>
                </div>
                <div id="popoverButtons" class="clearfix">
                    <a href="cart.php?stap=1" class="hudbtn left">View</a>
                    <!-- <a href="javascript:;" class="simpleCart_checkout hudbtn primary right">Checkout</a> -->
                </div>
            </div><!--End #cartPopover-->

            <div id="zoeken">
                <form method="get" action="/search" id="search">
                    <input name="q" type="text" size="40" placeholder="Search..." />
                </form>
            </div>
        </header>
    ';
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:44:00.923

您可以使用 JavaScript / JQuery 动态设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T02:42:22.703

```
$ class='no-bgimage'; if (isset($_GET['product']) {
    $class='bgimage';
} 
```

然后在你的身体里

```
<body class="<?php echo $class ?>"> 
```

然后在你的 CSS

```
.bgimage {
background-image: url('page/to/your/image');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:12:30.937

可以尝试类似：

```
$targetpage =  $_SERVER['SERVER_NAME'].'/index.php?category=nieuwBinnen&product=Belair+X'
   if (!$targetpage) {
          echo background 1;
    }else{
          echo background 2;
    } 
```

# ruby-on-rails - rails 控制台给出 method_missing，未定义

> ID：14463606
> 
> 赞同：1
> 
> 时间：2013-01-22T16:42:52.653
> 
> 标签：ruby-on-rails, rails-console

我正在关注 Rails 教程，并且必须运行 rails 控制台。我以前从未遇到过问题，但现在它无法运行。

这是错误。

```
 /Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.2.11/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `generators' for
#<Rails::Railtie::Configuration:0x007ffc41d4a9a0> (NoMethodError)
        from /Users/lexi87/.rvm/gems/ruby-1.9.2-p320/gems/rspec-rails-2.0.0.beta.18/lib/rspec-rails.rb:4:in `<class:Railtie>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:48:10.387

我注意到您的 rspec gem 与此处列出的版本相同：[“rails generate rspec:install”似乎失败了](https://stackoverflow.com/questions/9236132/rails-generate-rspecinstall-seems-to-be-failing)

也许这会有所帮助。

# html - 从 HTML iOS SDK 读取文本

> ID：14463615
> 
> 赞同：0
> 
> 时间：2013-01-22T16:43:22.743
> 
> 标签：html, ios, sdk

我的视图中有一个标签。标签的文本必须是[http://sample.com/file.html](http://sample.com/file.html)上的文本。

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:53:00.360

您可以将 URL 的内容直接“加载”到`NSString`：

```
NSString *text = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://sample.com/file.html"] encoding:NSUTF8StringEncoding error:&error]; 
```

然后相应地设置标签的文本！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:46:09.357

尝试`NSData`使用

```
+ (id)dataWithContentsOfURL:(NSURL *)aURL 
```

`NSString`然后用's转换成字符串

```
- (id)initWithData:(NSData *)data encoding:(NSStringEncoding)encoding 
```

# opengl - 使用 UBO 编译片段着色器时出现 OpenGLSL 错误

> ID：14463616
> 
> 赞同：0
> 
> 时间：2013-01-22T16:43:26.847
> 
> 标签：opengl, compiler-errors, fragment-shader

我正在尝试让 UBO 正常工作，但是在片段着色器中出现编译错误：

```
ERROR 0:5:"(": synrax error. 
```

片段着色器：

```
layout(std140) uniform Colors
{
    vec3  SCol;
    vec3  WCol;
    float DCool;
    float DWarm;
}colors; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:37:41.503

在片段着色器源文件的开头（第一行）放上：

```
#version 140 
```

这意味着您告诉 GLSL 编译器您使用的是 1.40 版的着色语言（当然，您可以使用更高的版本 - 有关详细信息，请参阅[Wikipedia](https://en.wikipedia.org/wiki/GLSL#Versions)）。

或者，如果您的 OpenGL 驱动程序（和/或硬件）不完全支持 GLSL 1.40（它是 OpenGL 3.1 的一部分），而只支持 GLSL 1.30 (OpenGL 3.0)，您可以尝试以下操作：

```
#version 130
#extension GL_ARB_uniform_buffer_object : require 
```

但是，只有当您的 OpenGL 3.0 驱动程序支持 GL_ARB_uniform_buffer_object 扩展时，这个才有效。

希望这可以帮助。

# entity-framework - EF它如何实施“删除规则”

> ID：14463617
> 
> 赞同：0
> 
> 时间：2013-01-22T16:43:32.633
> 
> 标签：entity-framework

刚刚学习 EF，来自不同的 ORM 工具。我正在寻找这些删除选项。我找不到它们，所以它们存在吗？或者他们是如何在 EF 中完成的？

删除时：我熟悉删除对象时关系的 4 个选项。到目前为止，我在 EF 中只看到一个：

1.  Cascasde（EF 有这个，我看到了，很棒）
2.  拒绝/抛出（如果您尝试删除具有给定关系的相关记录的对象，我使用的 ORM 通过抛出异常来处理此问题）

    **示例：** *客户 -> 订单* （如果我尝试删除具有相关订单的客户，则删除被拒绝）

3.  设置 Null（我使用的 ORM 通过在相关表中自动将 FK 设置为 null 来处理此问题）

4.  无（我看到 EF 有这个，很棒） - 无操作

    **示例：** *DepartmentSupervisor(Employee) <- Department*（如果删除 Employee，Department 表中的 DepartmentSupervisor FK 设置为 null）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:02:36.470

EF 不支持检查约束，您需要使用 SSMS 在表级别定义检查约束。右键单击表格，选择“设计”，然后再次右键单击并选择“检查约束”，您将能够在那里定义任何“删除规则”...

# javascript - 在页面加载时在所有站点上执行 JS

> ID：14463620
> 
> 赞同：0
> 
> 时间：2013-01-22T16:43:38.463
> 
> 标签：javascript

在浏览器中加载所有/指定页面（即预定义代码）后，我需要执行 JS 代码。哪些浏览器及其插件/组件提供了实现它？

手动方式是打开控制台（例如firebug）并执行。我想自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:14:07.457

不是完全自动化的，但[Bookmarklet](http://en.wikipedia.org/wiki/Bookmarklet)可以让您通过单击书签栏中的项目来运行 JavaScript。

为了在您的浏览器中本地实现完全自动化（假设 Firefox，因为您提到了 Firebug），您应该寻找可以解决您特定需求的插件。[例如Grease Monkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)就非常有用。

# f# - 如何向 C# 和 F# 公开尽可能友好的类型？

> ID：14463631
> 
> 赞同：7
> 
> 时间：2013-01-22T16:44:04.710
> 
> 标签：f#

例如，如果我在 F# 中编写了一个模块

```
module Lib

type A =
    member this.x1 x = ...

let helpa x = ...
let helpb x = ...

type B =
    member this.y1 x = ...

let helpc x = ...

typeA with
    member this.x2 x = ...
typeB with
    member this.y2 x = ... 
```

它在 F# by 中运行良好`open Lib`，但是，如果我想在 C# 中使用它（我只对 中的类型和成员函数感兴趣`Lib`），每次创建类型时我都必须使用`new Lib.A(...)`. 没有办法省略模块名称变得相当烦人。像这样调用静态方法`Lib.A.C()`就更麻烦了。

然后我尝试用 替换`module`，`namespace`每次我引入一些辅助函数时，我都必须用新名称创建一个新模块。有时我可以设法将所有辅助函数重新排列到 1 个模块中，但这会导致代码的可读性降低。

什么是更好的结构呢？

希望我有：`Using * = Lib.*`对于 C#。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:02:03.733

F# 在这里提供了比 C# 更大的灵活性，所以我将以标准方式将它暴露给 C#，即将类型包含在命名空间中。我认为，这样的东西提供了两全其美：

```
namespace Lib

type A =
    member this.x1 x = ()

[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
module A =
  let helpa x = ()
  let helpb x = ()

type B =
    member this.y1 x = ()

[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
module B =
  let helpb x = ()

type A with
    member this.x2 x = ()
type B with
    member this.y2 x = () 
```

F# 系列遵循类似的设计。您可以使用`[<AutoOpen>]`和`[<RequireQualifiedAccess>]`属性进一步控制如何从 F# 使用模块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T17:02:18.137

我认为您已经在答案中提到了最佳选择 -`namespace`在顶部定义带有声明的文件（这样，您可以只`using Lib`用 C# 编写），然后将所有辅助函数放在模块中。

可以将与某种类型（例如 with `A`）明确关联的辅助函数放入名为的模块中`A`（类似于`List`模块中与该`List<'T>`类型关联的 F# 函数）。

这需要做更多的工作，因为您需要使用特殊属性标记模块（以避免名称冲突），但它在 F# 和 C# 中都很容易使用（而且我认为使用得当比保存构建库时的几次击键）：

```
namespace Lib

// Declaration of the 'A' type and helper functions in 'A' module 
type A() =
  member this.x1 x = 10

[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
module A = 
  let helpa (x:A) = x.x1
  let helpb (x:A) = x.x1

// Declaration of the 'B' type and helper functions in 'B' module 
type B() =
  member this.y1 x = 10

[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
module B = 
  let helpc (x:B) = x.y1

// Member augmentations for easy use from C#
type A with
    member this.x2 x = A.helpa this
type B with
    member this.y2 x = B.helpc this 
```

# sas - 在不使用 PROC SQL 的情况下用另一个数据集更新一个数据集

> ID：14463635
> 
> 赞同：2
> 
> 时间：2013-01-22T16:44:17.943
> 
> 标签：sas

我有以下两个数据集

数据集 A

```
id age  mark
1  .    .
2  .    .
1  .    . 
```

数据集 B

```
id age mark
2  20  200
1  10  100 
```

我需要以下数据集作为输出

输出数据集

```
id age mark
1  10  100
2  20  200
1  10  100 
```

**如何在不使用PROC SQL**即使用**DATA STEP**的情况下执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:12:04.920

有很多方法可以做到这一点。最简单的方法是对两个数据集进行排序，然后使用`MERGE`. 例如：

```
proc sort data=A;
   by id;
run;
proc sort data=B;
   by id;
run;

data WANT;
  merge A(drop=age mark) B;
     by ID;
run; 
```

诀窍是从第一个数据集中**删除**`A`要添加的变量；新变量将来自第二个数据集`B`。

当然，此解决方案不会保留数据集中观察值的原始顺序，并且仅适用于**您**的第二个数据集包含 的唯一值`id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T09:51:52.517

我试过这个，它对我有用，即使你有你想在该列中保留的数据。为了完整起见，我也添加了一个 SQL 变体。

```
data a;
input id a;
datalines;
1 10
2 20
;

data b;
input id a;
datalines;
1 .
1 5
1 .
2 .
3 4
;

data c (drop=b);
merge a (rename = (a=b) in=ina) b (in = inb);
by id;
if b ne . then a = b;
run;

proc sql;
create table d as
select a.id, a.a from a right  join b on a.id=b.id where a.id is not null
union all
select b.id, b.a from a right join b on a.id = b.id where a.id is null
;
quit; 
```

# qt - Qt Desktop 使用 Node.js 和 Socket.io 监听端口

> ID：14463638
> 
> 赞同：4
> 
> 时间：2013-01-22T16:44:31.827
> 
> 标签：qt, node.js, socket.io

我使用 Qt 构建了一个桌面应用程序。目前，应用程序会定期从远程 Web 服务器上的 XML 文件中提取数据，以填充应用程序中的各种小部件。

我宁愿实现一个“推送”环境，而不是拉数据，在这个环境中，Qt 应用程序与远程 Web 服务器上的端口建立持久连接，并监听来自 node.js 的更新或“广播”。

我已经使用 node.js 和 socket.io 构建了与基于 Web 的应用程序类似的东西，所以我对此并不陌生，但我似乎无法弄清楚如何在 Qt 中完成此操作。我可以使用 QTcpSocket 连接到端口 4000，并且可以使用 node.js 启动 HTTP 服务器，但我似乎无法接收任何广播的消息。

这里缺少的一块是socket.io，但我不知道如何使用它或在Qt 中建立所需的连接——所以我不知所措。

**在 Qt 应用程序中连接并侦听端口 4000**

```
void MainWindow::connectTcp() {

client = new QTcpSocket(this);
QHostAddress hostadd("myIPaddress");
connect(client,SIGNAL(connected()),this,SLOT(isConnected()));
    connect(client,SIGNAL(error(QAbstractSocket::SocketError)),this,SLOT(connectionError(QAbstractSocket::SocketError)));
connect(client, SIGNAL(readyRead()), this, SLOT(readTcpData()));
client->connectToHost(hostadd,3000);

} 
```

**在 node.js 中创建服务器并发送更新**

```
var http = require('http'); 
var url = require('url');
var msg = '';

var port = 4000;
/* path to socket.io */
var path = '/path/to/node_modules/socket.io';

var server = http.createServer(function (req, res) {

        req.on('data', function (d) {
            data += d;
        });
        req.on('end',function(){
            msg = data;
    res.writeHead(200,{'Content-Type':'text/plain'});
    res.write(msg);
    res.end();
    console.log('SEND DATA: ',msg);
        });

}).listen(port); 
```

任何建议都非常感谢 - 我正在尝试做的甚至可能吗？

**编辑——更新**

在使用 C++ 合并 Socket.io 和 WebSocket 失败后，我尝试使用 QWebView 来实现它并且它有效。我将在下面分享我所做的详细信息，以防其他人需要帮助。

**主窗口.cpp**

这只是一个通用的 Qt Gui 应用程序，其唯一目的是创建一个加载 HTML 文件的 QWebView 实例。正在加载的 HTML 文件（在后台）包含建立套接字连接的 javascript 代码。

我创建了一个单独的 Qt 类来与 index.html 中的 javascript 接口，以对来自服务器的响应进行操作。[更多信息](http://doc.qt.digia.com/4.7-snapshot/qtwebkit-bridge.html)

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    // Set default proxy (this may not always be necessary)
    QNetworkProxyFactory::setUseSystemConfiguration(true);

    h = new Hello(this);

    view = new QWebView(this);
    view->load(QUrl("http://www.mydomain.com/startconnection.html"));

    // I don't want the webview to show, it should run in the background
    view->hide(); 

    frame = view->page()->mainFrame();
    connect(view,SIGNAL(loadFinished(bool)),this,SLOT(loadFinished(bool)));

}

void MainWindow::loadFinished(bool loaded) {

    qDebug() << "Webpage Loaded? " << loaded;

}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

**http://www.mydomain.com/startconnection.html**

这是加载到 Qt 中的页面。它只是建立到 mydomain.com 的 Socket.io 连接，该连接正在侦听端口 4000 上的连接

```
<html>
<head>
<script type="text/javascript" src="http://www.mydomain.com:4000/socket.io/socket.io.js"></script> 
<script type="text/javascript">

var socket;

window.onload = onLoad;

function onLoad() {

    socket = io.connect('http://www.mydomain.com:4000');

    socket.on('connect', function(){
        alert("Connected To Socket");
    });

    socket.on('message',function(data) {
        alert("Here Comes A Message From The Server");
    });

}

</script>
</head>
<body>
</body>
</html> 
```

**/var/www/vhosts/mydomain.com/socket/server.js**

这是启动 HTTP 服务以侦听端口 4000 上的连接的节点脚本。我使用“forever”启动服务并将所有 console.info 消息输出到这样的日志文件：forever -al /var/www/vhosts/mydomain .com/connection.log 开始 /var/www/vhosts/mydomain.dom/socket/server.js。

```
var http = require('http'); 
var url = require('url');
var qs = require('querystring');
var child_process = require('child_process');
var theSockets = {};

/* listening port */
var port = 4000;
/* path to socket.io on server */
var path = '/var/www/vhosts/mydomain.com/httpdocs/server/node_modules/socket.io';

var server = http.createServer(function (req, res) {

         var data = '';
         var msg = '';

        req.on('data', function (d) {
                data += d;
        });

        req.on('end',function(){
            msg = data;
            io.sockets.emit('message',msg);
            res.end();
        });

        }

        res.end();

}).listen(port);

var io = require(path).listen(server);

io.sockets.on('connection', function(socket) {

    var d = new Date();
    console.log('JOINED SOCKET '+d.toLocaleString()+' SOCKET ID '+socket.id);

    socket.on('disconnect',function() {

    var d = new Date();
    console.log('EXITED SOCKET '+d.toLocaleString()+' SOCKET ID '+socket.id);

    });

}); 
```

希望这对某人有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:54:28.467

有可能，是的，但是您必须了解 Socket.IO 处理 WebSocket 套接字，而不是原始 TCP。您的客户端应该与服务器进行 WebSocket 握手，等等。目前正在发生的是您在客户端创建一个“HTTP”连接，什么都不发送并等待某些事情发生。（什么都不会发生。）

当然，您也可以设计一个在原始 TCP 之上运行的协议，例如发送换行符/空值分隔（或网络字符串封装）的 JSON 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-15T21:25:42.713

你可以看看[QWebSockets](http://doc.qt.io/qt-5/qtwebsockets-index.html)，它使用 Qt 实现了 websockets。我还构建了客户端和服务器 socket.io 类，它们很快就会开源。

编辑：[在这里找到](https://github.com/Xsmael/Qt-Websocket)

# cordova - PhoneGap 使用自己的插件为一个平台构建

> ID：14463640
> 
> 赞同：0
> 
> 时间：2013-01-22T16:44:38.300
> 
> 标签：cordova, phonegap-plugins

我目前正在对 PhoneGap/Cordova 进行一些研究，并想了解是否可以将 PhoneGap Build Web Service 与平台相关的插件一起使用。

所以想象以下情况：

我想在我的应用程序中使用蓝牙，而蓝牙目前仅适用于 Android，正如我在 GitHub 的插件列表中看到的那样。所以我可能会使用 Eclipse + ADT 包含这个插件。现在我也想在 iOS 上使用它。那么是否可以将这种特定于平台的应用程序上传到PhoneGap构建并从中创建iOS应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T19:56:01.043

据我所知，目前无法使用 phonegapbuild 使用自定义插件构建应用程序。

# python - rpyc.Service 需要 10 秒来接收一个 150kB 的对象（在 localhost 上，没有 LAN 问题）

> ID：14463643
> 
> 赞同：4
> 
> 时间：2013-01-22T16:44:45.573
> 
> 标签：python, rpyc

我正在构建一个大的（腌制时为 150kB）虚拟字典并在其上运行一个快速平稳运行的虚拟函数。

当通过 rpyc.Service 公开相同的功能时，即使我的客户端和服务器位于同一主机上，所用时间也会变为 10 秒（而不是 0.0009 秒）（这里的 LAN 延迟没有问题）。

知道为什么我的 150kB 对象从客户端传送到同一主机上的服务器需要这么长时间吗？

以及为什么`dummy.dummy()`即使输入对象还不“可用”，函数也会被调用（如果是，那么在两个测试用例中，函数花费的时间将是相同的）？

参见下面的我的 python (3.2) 代码。我测量在 dummy.dummy(d) 中花费的时间。

1.  案例一：dummy.dummy 被客户端调用；执行时间 = 0.0009
2.  案例 2：dummy.dummy 被称为 rpyc 服务；执行时间 = 10 秒

**迷你服务.py**

```
import rpyc
from rpyc.utils.server import ThreadedServer
import dummy

class miniService(rpyc.Service):
    def exposed_myfunc(self,d):
        #Test case 2: call dummy.dummy from the service
        dummy.dummy(d)

if __name__=='__main__':
    t = ThreadedServer(miniService,protocol_config = {"allow_public_attrs" : True}, port = 19865)
    t.start() 
```

**迷你客户端.py**

```
import rpyc
import sys
import pickle
import dummy

def makedict(n):
    d={x:x for x in range(n)}
    return d

if __name__ == "__main__":
    d=makedict(20000)
    print(sys.getsizeof(d))             #result = 393356

#   output = open("C:\\rd\\non_mc_test_files\\mini.pkl",'wb') #117kB object for n=20k
#   pickle.dump(d,output)
#   output.close()

#RUN1 : dummy.dummy(d) out of rpyc takes 0.00099 seconds
#   dummy.dummy(d)

#RUN2 : dummy.dummy(d) via RPYC on localhost takes 9.346 seconds
    conn=rpyc.connect('localhost',19865,config={"allow_pickle":True})
    conn.root.myfunc(d)

    print('Done.') 
```

**假人.py**

```
import time

def dummy(d):
    start_ = time.time()
    for key in d:
        d[key]=0
    print('Time spent in dummy in seconds: ' + str(time.time()-start_)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:20:14.107

看起来性能损失来自 rpyc 为保持客户端和服务器之间的对象（通过引用传递）同步所做的工作。

我现在在我的应用程序中所做的是制作输入对象的**深层副本**，然后对副本进行处理，从而模拟按值传递机制。

注意：深拷贝需要`allow_picke=True`在协议配置参数中进行设置。

# javascript - 使用 d3js 显示 XML 数据

> ID：14463644
> 
> 赞同：0
> 
> 时间：2013-01-22T16:44:46.970
> 
> 标签：javascript, xml, d3.js

我正在为学校做一个小的 d3.js 作业。我查看了一些加载 XML 文件的示例，但我无法弄清楚我做错了什么。XML 文件加载正确。我只是在弄清楚 JS，所以请不要技术；p ..

这是代码：

```
d3.xml("data.xml", "application/xml", function(xml) {

    var data = d3.select(xml).selectAll("path");

    console.log("data uit de xml=  " + data);

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:50:31.367

假设`path`您的 XML 中有元素，您可以像这样选择它们：

```
var data = xml.path; 
```

XML 数据作为 JavaScript 对象返回。记录整个对象并在您选择的浏览器的调试器/JavaScript 控制台中查看它可能是最简单的方法。

# tcl - 多个版本的 Tcl

> ID：14463645
> 
> 赞同：0
> 
> 时间：2013-01-22T16:44:54.793
> 
> 标签：tcl

从源代码构建和安装（全局）新版本的 Tcl 时，除了重新链接 /usr/local/bin/tclsh 并希望使用新版本之外，还有什么特别的事情需要考虑吗？

我知道解释器可执行文件 tclsh 和 wish 以不同的名称安装，但是包含和库文件呢？当我构建eggdrop时，它会链接到最新版本吗？手册页怎么样 - 旧的被新的覆盖了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:27:00.870

这种情况的常用方法是配置构建，使其安装在单个目录下（Windows 方法），例如，在`/opt/tcltk/8.6`. 然后保证您不会与其他版本发生冲突，并且卸载是`rm -rf`在该单个目录上运行的问题。但是，这种方法有其缺点：

*   您必须在新层次结构下链接（一些）已安装的第三方 Tcl 库。这是因为 Tcl 派生了一组路径以从它自己的位置查找库。
*   `/opt/tcltk/8.6/bin`不会列在`$PATH`.

对于某些操作系统，另一种（可能更明智的）方法是进行“反向移植”，即获取所需 Tcl/Tk 版本的源包，并使其为已安装的操作系统版本构建；然后以正常方式安装生成的软件包。在可以共同安装各种版本的 Tcl/Tk 的系统上（例如，Debian 及其衍生产品），这可能提供了最明智的解决方案。

至于后一种情况下的手册页，在 Debian 中，它们最终被打包在一个单独的包中，不需要安装；所以您只需选择一个可用的文档包并安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:28:54.373

就存在多个版本而言，这是很正常的事情（通过在构建时设置`--prefix`选项来做到这一点`configure`）并且已经有很长一段时间了。如果可以的话，您可能希望避免使用单个版本的多个补丁级别，但是同时安装 8.4、8.5 和 8.6 是完全可以的。您也希望在不同的目录中进行不同的安装，并且将未版本化的`tclsh`名称链接到您通常想要的名称是正确的（尽管我只是使用版本化的可执行文件名称）。

使联机帮助页良好共存的唯一方法是将它们安装在单独的目录树中，并更新 MANPATH 环境变量以指向正确的环境变量（除非您有一个`man`可执行文件可以直接获取联机帮助页的路径——有些人会这样做，有些人不这样做 - 这几乎不方便）。如果您能忍受在线，我们在[http://www.tcl.tk/man/](http://www.tcl.tk/man/)上提供了文档的官方 HTML 版本，其中包括所有重要版本，可以追溯到很长一段时间。

# ios - CALayer 动画和颜色混合

> ID：14463649
> 
> 赞同：5
> 
> 时间：2013-01-22T16:45:14.840
> 
> 标签：ios, core-animation, core-graphics

我正在使用 CAShapeLayer 生成一些形状。实际上我有 4 个 CAShapeLayers 代表屏幕中的一些三角形。我使用 CGMutablePathRef 创建形状并设置每个 CAShapeLayer 的路径属性。三角形位于不同的 shapelayer 中，因为我必须以不同的方式为每个三角形设置动画。

我使用 CABasicAnimation 在我的视图控制器上执行一些动画，并对 CAShapeLayer 的路径属性进行动画处理，例如：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@”path”];
animation.duration = 2.0;
animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
animation.repeatCount = 1e100f;
animation.autoreverses = YES;
animation.fromValue = (id)initialPath;
animation.toValue = (id)newPath;
[shapeLayer addAnimation:animation forKey:@”animatePath”]; 
```

没关系，我可以绘制形状并为其设置动画。我的问题是，这使用默认的 alpha 混合（结果 = (alpha *foreground) + (1 - alpha) * background）来混合图像。我想要的是使用多重混合（kCGBlendModeMultiply），但我不知道如何混合 CAShapeLayer 绘图和混合模式。我已经成功地绘制了我的形状，创建了一个自定义 UIView 并覆盖了 drawRect 方法，但是我无法为这些形状设置动画。

有没有人成功改变 CAShapeLayer 的颜色混合？

# asp.net-mvc - 即使使用 AllowAnonymous，SimpleMembership 密码重置超链接 401 也会重定向

> ID：14463654
> 
> 赞同：5
> 
> 时间：2013-01-22T16:45:17.470
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-areas, simplemembership

我正在尝试将我的 MVC4 应用程序从 ASP.NET Membership 迁移到新的 SimpleMembership 并且遇到了密码重置的障碍。在我的登录视图中，我有“忘记密码”超链接，它执行 AJAX 发布到发送带有重置密码超链接的电子邮件的操作（松散地基于[MSDN 指南](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.generatepasswordresettoken%28v=vs.111%29.aspx)）：

```
[HttpPost]
[AllowAnonymous]
public ActionResult ForgotPassword(string userName)
{
    //get the user from database, validate it exists, etc.
    var token = WebSecurity.GeneratePasswordResetToken(userName);
    var resetLink = "<a href='" + Url.Action("ResetPassword", "Account", new {un = userName, rt = token}, "http") + "'>Reset Password</a>";
    //send the email
    return Json(new {result = "Email sent."});
} 
```

这工作正常，但由于某种原因，当我尝试使用重置密码链接时，我被重定向到登录屏幕并且 Fiddler 显示 401-未授权。我尝试将链接复制/粘贴到浏览器地址栏中，并创建一个带有锚标记的垃圾 HT​​ML 文件，但结果仍然是 401。这是重置密码操作（也在帐户控制器中来自MVC4 模板）：

```
[HttpPost]
[AllowAnonymous]
public ActionResult ResetPassword(string un, string rt)
{
    var model = new ResetPasswordViewModel {UserName = un, ResetToken = rt};
    return View(model);
} 
```

我也尝试删除该`HttpPost`属性，但这也会产生 401。我在这里缺少什么？

**更新**
感谢史蒂夫的评论，我完全限定了`HttpPost`属性，现在意识到它正在尝试发布到一个区域而不是直接发布到根`Account`控制器。使用[RouteDebugger](http://haacked.com/archive/2011/04/12/routedebugger-2.aspx)，我看到资源未找到错误：

```
Matched Route: {controller}/{action}/{id}
Generated URL: /SiteRoot/Reports/Account/ResetPassword?un=whatever&rt=removedForSecurity using the route "Reports/{controller}/{action}/{id}" 
```

请注意，它正在寻找该`Reports`区域。因此，我更改了`ForgotPassword`操作中的锚标记构造，在路由值对象中添加了`Area`规范，如下所示：

```
var resetLink = "<a href='" + Url.Action("ResetPassword", "Account", new {un = userName, rt = token, Area = ""}, "http") + "'>Reset Password</a>"; 
```

但它仍在尝试使用该`Reports`区域。如何确保电子邮件中的锚标记将指向站点根目录而不是区域？

**更新 2**
我删除了该`HttpPost`属性，现在得到了原始的 401 重定向。

**更新 3** `ResetPassword`查看代码：

```
@model Whatever.Web.Models.ResetPasswordViewModel
@{
    ViewBag.Title = "Reset Password";
}
@using (Html.BeginForm())
{
    <fieldset>
        <legend>Reset Password</legend>
        <table>
            <tr>
                <td>User name:</td>
                <td>@Html.TextBoxFor(m => m.UserName, new { @class="disabled-textbox", @readonly="readonly", autocomplete="off" })</td>
                <td></td>
            </tr>
            <tr>
                <td>New Password:</td>
                <td>@Html.PasswordFor(m => m.NewPassword, new { id = "resetPasswordNewPassword" })</td>
                <td></td>
            </tr>
            <tr>
                <td>Confirm New Password:</td>
                <td>@Html.Password("resetPasswordConfirmPassword", "", new { id = "resetPasswordConfirmPassword"})</td>
                <td>
                    <div id="passwordsMatch"></div>
                </td>
            </tr>
        </table>
        <input type="submit" id="submitButton" value="Submit" disabled="disabled"/>
        <div id="resetPasswordResultDiv"></div>
    </fieldset>
}
<script type="text/javascript">
    $(document).ready(function() {
        $("#resetPasswordNewPassword, #resetPasswordConfirmPassword").keyup(function() {
            if ($("#resetPasswordNewPassword").val().length > 0 && $("#resetPasswordConfirmPassword").val().length > 0 && $("#resetPasswordNewPassword").val() != $("#resetPasswordConfirmPassword").val()) {
                if ($("#resetPasswordNewPassword").val() != $("#resetPasswordConfirmPassword").val()) {
                    $("#passwordsMatch").html('<span style="color: red; font-weight: bold;>Passwords do not match</span>');
                    $("#submitButton").attr('disabled', true);
                } else {
                    $("#submitButton").removeAttr('disabled');
                }
            } else {
                $("#passwordsMatch").html('');
                $("#submitButton").attr('disabled', true);
            }
        });
    });
</script> 
```

**更新 4**
我尝试向 Account 控制器添加另一个操作方法，从而产生“hello world”样式视图。当然，添加`[AllowAnonymous]`了属性。此方法**还会**导致 401 重定向到登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:30:25.430

我认为您的设置方式没有任何问题。这里肯定有其他事情发生。检查您的 _Layout.cshmtl 文件并确保您没有对可能导致 401 的其他操作的任何调用。

这个人有类似的问题：[https ://stackoverflow.com/a/11046666/199913](https://stackoverflow.com/a/11046666/199913)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:35:51.103

很确定 `Area=""`应该是`area=""`

# c# - 只为我的应用程序静音 SoundPlayer

> ID：14463655
> 
> 赞同：2
> 
> 时间：2013-01-22T16:45:18.747
> 
> 标签：c#, audio

我希望仅为我的 WPF 应用程序静音，并让整个混音器保持用户设置的状态。

我可以使用以下代码将系统范围的声音静音/取消静音。

但是我注意到当我的应用程序正在运行并且正在播放声音时，我的应用程序出现在 Windows 混音器中，我可以通过混音器的 UI 将我的应用程序静音/取消静音，所以我的应用程序似乎应该可以通过编程方式执行此操作。

```
private const int APPCOMMAND_VOLUME_MUTE = 0x80000;
private const int WM_APPCOMMAND = 0x319;

[DllImport("user32.dll")]
public static extern IntPtr SendMessageW(IntPtr hWnd, int Msg, IntPtr wParam, IntPtr lParam);

SendMessageW(this.Handle, WM_APPCOMMAND, this.Handle, (IntPtr) APPCOMMAND_VOLUME_MUTE); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:39:27.277

这适用于 Vista/7/8，每个应用程序都有音量控制

```
DllImport("winmm.dll")]
private static extern int waveOutGetVolume(IntPtr hwo, out uint dwVolume);

[DllImport("winmm.dll")]
private static extern int waveOutSetVolume(IntPtr hwo, uint dwVolume);

/// <summary>
/// Returns volume from 0 to 10
/// </summary>
/// <returns>Volume from 0 to 10</returns>
public static int GetVolume()
{
  uint CurrVol = 0;
  waveOutGetVolume(IntPtr.Zero, out CurrVol);
  ushort CalcVol = (ushort)(CurrVol & 0x0000ffff);
  int volume = CalcVol / (ushort.MaxValue / 10);
  return volume;
}

/// <summary>
/// Sets volume from 0 to 10
/// </summary>
/// <param name="volume">Volume from 0 to 10</param>
public static void SetVolume(int volume)
{
  int NewVolume = ((ushort.MaxValue / 10) * volume);
  uint NewVolumeAllChannels = (((uint)NewVolume & 0x0000ffff) | ((uint)NewVolume << 16));
  waveOutSetVolume(IntPtr.Zero, NewVolumeAllChannels);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:43:54.163

如果您包装调用以播放声音，您可以让这些函数检查某些资源以指示用户是否选择静音，例如：

```
public void PlaySoundXYZ() 
{
   if(!MuteSource.IsMuted()) 
   {
        // play sound.
   }
} 
```

# ios - 改变绘制形状iOS的颜色

> ID：14463657
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:45:24.893
> 
> 标签：ios, xcode

当我在 xcode for ios 中绘制形状时，如何更改最终绘制形状的颜色？

```
- (void) drawArrowWithContext:(CGContextRef)context atPoint:(CGPoint)startPoint withSize:   (CGSize)size lineWidth:(float)width arrowHeight:(float)aheight
{
float width_wing = (size.width-width)/2;
float main = size.height-aheight;
CGPoint rectangle_points[] =
{
    CGPointMake(startPoint.x + width_wing, startPoint.y + 0.0),
    CGPointMake(startPoint.x + width_wing, startPoint.y + main),
    CGPointMake(startPoint.x + 0.0, startPoint.y + main), // left point
    CGPointMake(startPoint.x + size.width/2, startPoint.y + size.height),

    CGPointMake(startPoint.x + size.width, startPoint.y + main), // right point

    CGPointMake(startPoint.x + size.width-width_wing, startPoint.y + main),

    CGPointMake(startPoint.x + size.width-width_wing, startPoint.y + 0.0),
    CGPointMake(startPoint.x + width_wing, startPoint.y + 0.0),
};

CGContextAddLines(context, rectangle_points, 8);

CGContextFillPath(context);
} 
```

默认情况下，此箭头的颜色为黑色，但我希望用户能够将其更改为黑色、白色或红色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:47:11.793

我认为您正在寻找的是`CGContextSetRGBFillColor`或`CGContextSetRGBStrokeColor`

```
- (void) drawArrowWithContext:(CGContextRef)context atPoint:(CGPoint)startPoint withSize: (CGSize)size lineWidth:(float)width arrowHeight:(float)aheight andColor:(UIColor *)color
{
float width_wing = (size.width-width)/2;
float main = size.height-aheight;

CGContextSetRGBFillColor(context,color.CGColor);
CGContextSetRGBStrokeColor(context,color.CGColor);

CGPoint rectangle_points[] =
{
    CGPointMake(startPoint.x + width_wing, startPoint.y + 0.0),
    CGPointMake(startPoint.x + width_wing, startPoint.y + main),
    CGPointMake(startPoint.x + 0.0, startPoint.y + main), // left point
    CGPointMake(startPoint.x + size.width/2, startPoint.y + size.height),

    CGPointMake(startPoint.x + size.width, startPoint.y + main), // right point

    CGPointMake(startPoint.x + size.width-width_wing, startPoint.y + main),

    CGPointMake(startPoint.x + size.width-width_wing, startPoint.y + 0.0),
    CGPointMake(startPoint.x + width_wing, startPoint.y + 0.0),
};

CGContextAddLines(context, rectangle_points, 8);

CGContextFillPath(context);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:51:57.297

您需要用新颜色重新绘制它。箭头不作为具有可以动态更改的属性的对象存在。

因此，更改您的 @selector 以接受您通过`CGContextSetRGBFillColor`or应用的颜色参数`CGContextSetRGBStrokeColor`。这可以是[CGColor](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGColor/Reference/reference.html)或整数，您可以在 switch 语句中使用它来从一些预定义的颜色中选择。

# jsf - tomcat没有在ajax调用上扩展会话

> ID：14463659
> 
> 赞同：4
> 
> 时间：2013-01-22T16:45:29.650
> 
> 标签：jsf, tomcat

我有一个 JSF 2 应用程序，它使用在 Tomcat 6 上运行的 RichFaces 4 和 Spring Security 3.1（也在 Tomcat 7 上测试过）。Spring Security 处理会话超时并将用户重定向到登录页面。这完美无缺。

问题是 AJAX 调用不像普通导航调用那样具有延长会话生命周期的效果。

我读过其他文章，这些文章暗示 AJAX 调用的行为与普通导航调用不同，这就是不扩展会话的原因（不幸的是，它们都没有提供关于为什么会这样的明确解释）。该[线程](https://stackoverflow.com/questions/4525171/preventing-session-timeout-during-long-processing-time-in-jsf)表明调用将起到`getSession()`作用。但是，这对我不起作用。

我没有编写我自己的 jquery poller，而是按照[这里](http://murygin.wordpress.com/2012/11/29/jsf-primefaces-session-timeout-handling)的建议使用了 PrimeFaces idlemonitor 。由空闲监视器重置调用调用的 bean 方法`getSession()`。为了测试，我将会话超时时间设置为 4 分钟。即使在两分钟后调用带有 getSession() 的 AJAX 方法，会话仍然在我导航到该页面后正好 4 分钟到期。

知道我做错了什么吗？更重要的是，您将如何调试这种情况？

谢谢

# c# - 使用 async/await 并行执行任务继续

> ID：14463661
> 
> 赞同：7
> 
> 时间：2013-01-22T16:45:40.493
> 
> 标签：c#, multithreading, task-parallel-library, threadpool, async-await

**在使用async/await构造的****控制台**应用程序的上下文中，我想知道“延续”是否可以在不同 CPU 上的多个线程上并行运行。

 **我认为是这种情况，因为延续发布在默认任务调度程序（控制台应用程序中没有 SynchronizationContext）上，即线程池。

我知道 async/await 构造不构造任何额外的线程。仍然应该由线程池为每个 CPU 构建至少一个线程，因此如果在线程池上发布延续，它可以在不同的 CPU 上并行调度任务延续......这就是我的想法，但出于某种原因我昨天对此感到非常困惑，我不再那么确定了。

这是一些简单的代码：

```
public class AsyncTest
{
  int i;

  public async Task DoOpAsync()
  {
    await SomeOperationAsync();

    // Does the following code continuation can run 
    // in parrallel ?
    i++;       

    // some other continuation code ....
  }

  public void Start()
  {
    for (int i=0; i<1000; i++)
    { var _ = DoOpAsync(); } // dummy variable to bypass warning
  }
} 
```

**SomeOperationAsync**本身不会创建任何线程，为了示例的目的，假设它只是依赖 I/O 完成端口异步发送一些请求，因此根本不会阻塞任何线程。

现在，如果我调用将发出 1000 个异步操作的**Start**方法，是否可以在不同的 CPU 线程上并行运行异步方法的延续代码（在等待之后）？即在这种情况下我是否需要处理线程同步并同步对字段“i”的访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:17:20.450

您的理解是正确的：在控制台应用程序中，由于默认`SynchronizationContext`.

每个`async`方法都会同步启动，因此您的`for`循环将`DoOpAsync`在同一个线程上执行开头。假设`SomeOperationAsync`返回一个不完整`Task`的，继续将被安排在线程池上。

因此，每个 的调用都`DoOpAsync`可以并行继续。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T16:55:11.690

是的，您应该放置线程同步逻辑，`i++`因为多个线程可能会同时执行代码`await`。

由于您的 for 循环，将创建许多任务。这些任务将在不同的线程池线程上执行。一旦这些任务完成，延续，即等待之后的代码，将在不同的线程池线程上再次执行。这使得多个线程可以同时执行 i++**

# c# - 从一组整数创建字节数组

> ID：14463662
> 
> 赞同：6
> 
> 时间：2013-01-22T16:45:53.537
> 
> 标签：c#, bytearray, byte, concatenation, bit-manipulation

给定这些整数：

```
public uint ServerSequenceNumber;
public uint Reserved1;
public uint Reserved2;
public byte Reserved3;
public byte TotalPlayers; 
```

从它们创建`byte[]`数组的最佳方法是什么？如果它们的所有值都是`1`结果数组，则为：

```
00000000000000000000000000000001 00000000000000000000000000000001 00000000000000000000000000000001 00000001 00000001 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:49:50.097

这应该可以满足您的需求。BitConverter 按正在使用的处理器的字节顺序返回一个字节数组。对于 x86 处理器，它是 little-endian。这会将最低有效字节放在首位。

```
 int value;
 byte[] byte = BitConverter.GetBytes(value);
 Array.Reverse(byte);
 byte[] result = byte; 
```

如果您不知道您将使用该应用程序的处理器，我建议您使用：

```
int value;
byte[] bytes = BitConverter.GetBytes(value);
if (BitConverter.IsLittleEndian){
Array.Reverse(bytes);
}
byte[] result = bytes; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T16:50:47.767

这个怎么样？

```
byte[] bytes = new byte[14];
int i = 0;
foreach(uint num in new uint[]{SecureSequenceNumber, Reserved1, Reserved2})
{
    bytes[i] = (byte)(num >> 24);
    bytes[i + 1] = (byte)(num >> 16);
    bytes[i + 2] = (byte)(num >> 8);
    bytes[i + 3] = (byte)num;
    i += 4;
}
bytes[12] = Reserved3;
bytes[13] = TotalPlayers; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:32:46.693

扩展@Robert 的答案，我创建了一个简单的类，当您进行大量连接时，它可以让事情变得更整洁：

```
class ByteJoiner
{
    private int i;
    public byte[] Bytes { get; private set; }

    public ByteJoiner(int totalBytes)
    {
        i = 0;
        Bytes = new byte[totalBytes];
    }

    public void Add(byte input)
    {
        Add(BitConverter.GetBytes(input));
    }
    public void Add(uint input)
    {
        Add(BitConverter.GetBytes(input));
    }
    public void Add(ushort input)
    {
        Add(BitConverter.GetBytes(input));
    }
    public void Add(byte[] input)
    {
        System.Buffer.BlockCopy(input, 0, Bytes, i, input.Length);
        i += input.Length;
    }
} 
```

# asp.net - asp.net cookie 过期总是 12:00:00 AM

> ID：14463670
> 
> 赞同：1
> 
> 时间：2013-01-22T16:46:21.653
> 
> 标签：asp.net, cookies

无论我将 asp cookie 过期时间设置为什么，浏览器始终会正确报告日期，但时间始终是 12:00:00 AM。（2014 年 1 月 22 日，星期三 12:00:00 AM）

这是我正在使用的代码：

```
Dim UserNameCookie As New HttpCookie("Username")
    Response.Cookies.Add(UserNameCookie)
    UserNameCookie.Secure = True
    UserNameCookie.HttpOnly = True
    UserNameCookie.Expires = DateTime.Today.AddYears(1)
    UserNameCookie.Value = UserName.Text 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:49:44.943

物业`DateTime.Today`：

> 设置为今天日期的对象，时间组件设置为 00:00:00。 [http://msdn.microsoft.com/en-us/library/system.datetime.today.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.today.aspx)

尝试`DateTime.Now`改用：

> 一个对象，其值为当前本地日期和时间。 [http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.now.aspx)

# marionette - 在木偶的复合视图中出现“缺少 'itemViewcontainer'”错误

> ID：14463678
> 
> 赞同：4
> 
> 时间：2013-01-22T16:46:37.610
> 
> 标签：marionette

我有一个复合视图，当将模型添加到视图的集合时，它会引发以下错误：`Uncaught ItemViewContainerMissingError: Missing itemViewContainer`

这是我的复合视图：

```
// VIEW
B.ScrapeUpdate.View = Backbone.Marionette.CompositeView.extend({
    // ITEM VIEW
    itemView: B.ScrapeUpdateItem.View,

    // ITEM VIEW CONTAINER
    itemViewContainer: 'tbody',

    // TEMPLATE
    template: Handlebars.compile(templates.find('#scrape-update-template').html()),

    // INITIALIZE
    initialize: function(options){
        _.bindAll(this);

        // Bind events
        this.collection.bind('reset', this.renderCollection);
    }
}); 
```

我发现在绑定到集合之前在初始化中添加以下代码可以修复错误：

```
 var html = this.renderModel();
    this.$el.html(html); 
```

当我有其他可以正常工作的复合视图时，我不确定为什么需要这两行代码。这是一个工作复合视图的示例：

```
B.BusinessSearchResults.View = Backbone.Marionette.CompositeView.extend({
    // ITEM VIEW
    itemView:B.Business.View,

    // ITEM VIEW CONTAINER
    itemViewContainer: 'tbody',

    // TEMPLATE
    template: Handlebars.compile(templates.find('#business-search-results-template').html()),

    // INITIALIZE
    initialize: function(options){
        _.bindAll(this);

        // Bind events
        this.collection.bind('reset', this.renderCollection);

    }
}); 
```

观点之间似乎没有区别，所以我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:34:21.540

```
 // INITIALIZE
    initialize: function(options){
        _.bindAll(this);

        // Bind events
        this.collection.bind('reset', this.renderCollection);
    } 
```

不需要这些代码行。CompositeView 为您执行此操作，开箱即用。包含此代码可能会导致问题。注释掉该`this.collection.bind`行，看看您是否仍然收到错误。

# sql-server - SQL Server 2000 抱怨比较 TEXT/NTEXT 列，但列是 VARCHAR

> ID：14463679
> 
> 赞同：2
> 
> 时间：2013-01-22T16:46:38.163
> 
> 标签：sql-server

我有一个 SQL Server 2000 数据库，其表如下所示：

```
ModifyTime datetime
CompanyID smallint
ProductID smallint
ComponentID int
Disposition varchar(10)
Note text
NoteType varchar(256) 
```

此查询失败：

```
UPDATE NoteTable
SET Disposition = 'Modified'
WHERE Disposition = '' 
    AND CompanyID = 10
    AND ProductID = 13
    AND ComponentID = 1
    AND NoteType = 'Customer' 
```

错误是：

> *text、ntext 和 image 数据类型不能进行比较或排序，除非使用 IS NULL 或 LIKE 运算符。*

有一个`TEXT`列，但它根本不参与查询。这两个类似文本的字段都是`VARCHAR`.

我经常`JOIN`在现场做 s`NoteType`并订购，`Disposition`没有这个错误。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T01:30:12.010

正如经常发生的那样，在简化要在这里提出的问题时，我考虑到了问题的实际原因。

实际上，更新发生在 ASP 应用程序中，我在这里表示为“客户”的值作为参数传递给准备好的语句。在创建参数时，我使用了长度为 256 的 adLongVarChar，而不是长度为 256 的 adVarChar。因此，实际上是我比较 VARCHAR(256) NoteType 列时遇到的问题。当我将参数类型固定为准备好的语句时，问题就消失了。

很抱歉打扰您，感谢您的帮助。:-)

# javascript - 如果列单元格为空，则条件逻辑

> ID：14463685
> 
> 赞同：0
> 
> 时间：2013-01-22T16:47:09.250
> 
> 标签：javascript

我想遍历表上的行，并且仅在`column2`单元格不包含值或空单元格时才执行更改背景颜色。这就是我现在拥有的，但我所有的行都是彩色的，我只需要在单元格`column2`为空时应用逻辑。

JS：

```
// loops through rows
for (var i = 0; rows; rows = tbody.rows[i]; i++) {
    //loops through cells
    for (var j = 1; col; col = rows.cells[j]; j++) {
        //gets cells of current row
        cells = rows[i].getElementsByTagName('td');
        //gets cells of col 1
        ocells = rows.cells[j].getElementByTagName('td');

        while (rows.cells[j] === null) {
            //condition here>>
        }
    }
} 
```

HTML：

```
<div id="table">
    <table name="tbody" id="tbody1">
        <tr> 
            <td>col1 Val1</td>
            <td>col2 Val2</td>
        </tr>
        <tr>
            <td>col1 Val3</td>
            <td>col2 Val4</td>
        </tr>
    </table>
</div> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:57:40.067

我会重新考虑循环遍历所有内容以执行此操作的必要性：

如果您制作了表格（或已生成表格），请为第 2 列中的每个单元格添加一个类。

我们称这个类为：“column-2-cell”

现在使用 jQuery：

```
$('.column-2-cell:empty').addClass('empty'); 
```

看到这个小提琴：http: [//jsfiddle.net/Ubz6w/](http://jsfiddle.net/Ubz6w/)

或者，您也可以将其与 jQuery 一起使用：

```
$('tr').each(function(i) {
    var column2cell = $($(this).children('td')[1]);
    if (column2cell.text() == "") {
        column2cell.css('background-color', 'red');        
    }
}); 
```

看到这个小提琴：http: [//jsfiddle.net/Ubz6w/1](http://jsfiddle.net/Ubz6w/1)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:49:17.010

就用这个。`column`如果第二个为空，这将设置第二个的背景。

```
var tbody = document.getElementsByName("tbody")[0];

for (var i = 0, rows; rows = tbody.rows[i]; i++) {
    if(rows.cells[1].innerHTML == "") {
        rows.cells[1].className += "highlight";
    }
} 
```

[现场演示](http://jsfiddle.net/vXYcy/)

# objective-c - Objective-C：ARC 禁止“保留”的显式消息发送

> ID：14463690
> 
> 赞同：11
> 
> 时间：2013-01-22T16:47:20.413
> 
> 标签：objective-c, automatic-ref-counting, retain

我是 Objective-C 的新手，我尝试将用旧版本 Objective-C 编写的旧 Objective-C 项目移植到新项目，但我收到以下编译器错误：

```
ARC forbids explicit message send of 'retain'

in 
color = [aColor retain];
or 
color = [[NSColor blackColor] retain]; 
```

我正在阅读关于 clang 现在使用的新的自动引用计数。
我也尝试使用 Xcode 的重构功能，但没有运气......什么是正确的 Objective-C 代码需要替换这个旧代码？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T16:48:51.037

简单地：

```
color = [NSColor blackColor]; 
```

`release`ARC 将管理您的对象的生命周期，因此您不需要`retain`或`autorelease`不再需要。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T04:34:50.267

ARC 的主要优点是编译器会自动清除您在项目中创建的所有对象的引用。所以不需要保留、释放和自动释放。但在某些情况下，我们希望从 ARC 发布我们的特定文件。在 xcode 中从 ARC 发布您的项目。请按照以下步骤操作。

```
1.Click your project for Build Phases.
2.Click the drop down menu named as "Compile Sources".
3.Double Click the file that you want to free from ARC.
4.Type the following to set the compiler flag.

       "-fno-objc-arc" 
```

此标志将从 xcode 中编译器的 ARC 释放该特定文件。

我希望这将对您的所有项目有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T16:49:22.613

只需删除保留，因此：

```
color = [NSColor blackColor] 
```

使用 ARC，您不能使用`retain`, `release`，`autorelease`因为它会为您使用。

# sqlite - Sqlite 选择不同的行作为一个

> ID：14463693
> 
> 赞同：0
> 
> 时间：2013-01-22T16:47:30.787
> 
> 标签：sqlite

我一直在页面上搜索可能的解决方案，但在任何地方都找不到。我需要的非常简单，我需要将多行显示为一个。我试过了|| + || 等

```
select c_category_in, c_data_services, c_dispositivos, c_averia as 'Sub-Category', count() as 'Total'
from tickets
group by c_category_in,c_averia,c_data_services,c_dispositivos 
having (Total > 1) 
```

[截屏](http://imgur.com/lhIEiRX)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:51:50.190

根据您的评论，我建议采取`UNION`两个单独的分组：

1.  对数据进行分组`c_data_services`
2.  对数据进行分组`c_dispositivos`

这导致`SELECT`如下：

```
select c_category_in, c_data_services as 'Sub-Category', count() as 'Total'
from tickets
group by c_category_in, c_data_services
having (Total > 1)
union all
select c_category_in, c_dispositivos as 'Sub-Category', count() as 'Total'
from tickets
group by c_category_in, c_dispositivos
having (Total > 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:51:39.297

[COALESCE 函数](http://www.sqlite.org/lang_corefunc.html#coalesce)返回第一个非值`NULL`：

```
SELECT c_category_in,
       COALESCE(c_data_services, c_dispositivos) AS SubCategory,
       COUNT(*) AS Total
FROM tickets
GROUP BY c_category_in, SubCategory
HAVING Total > 1 
```

# variables - Python - 在下一个会话退出时更改变量值

> ID：14463698
> 
> 赞同：1
> 
> 时间：2013-01-22T16:47:46.733
> 
> 标签：variables, python-2.7, keyboardinterrupt

我想在退出时更改变量的值，以便在下一次运行时保持上次设置的值。这是我当前代码的简短版本：

```
def example():
    x = 1
    while True:
        x = x + 1
        print x 
```

在“KeyboardInterrupt”上，我希望在 while 循环中设置的最后一个值是全局变量。下次运行代码时，该值应该是第 2 行中的“x”。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:06:10.127

这有点 hacky，但希望它能让您了解您可以在当前情况下更好地实现（`pickle`/`cPickle`是您应该使用的，如果您想保留更健壮的数据结构 - 这只是一个简单的案例）：

```
import sys

def example():
    x = 1
    # Wrap in a try/except loop to catch the interrupt
    try:
        while True:
            x = x + 1
            print x
    except KeyboardInterrupt:
        # On interrupt, write to a simple file and exit
        with open('myvar', 'w') as f:
            f.write(str(x))
            sys.exit(0)

# Not sure of your implementation (probably not this :) ), but
# prompt to run the function
resp = raw_input('Run example (y/n)? ')
if resp.lower() == 'y':
    example()
else:
  # If the function isn't to be run, read the variable
  # Note that this will fail if you haven't already written
  # it, so you will have to make adjustments if necessary
  with open('myvar', 'r') as f:
      myvar = f.read()

  print int(myvar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:54:49.583

您可以将要持久保存的任何变量保存到文本文件中，然后在下次运行时将它们读回脚本。

这是用于读取和写入文本文件的链接。 [http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/2/tutorial/inputoutput.html#reading-and-writing-files)

希望能帮助到你！

# php - 从一个 URL 获取不同的提要

> ID：14463699
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:47:50.213
> 
> 标签：php, youtube-api

我正在尝试从特定的 YouTube 频道获取一些数据（统计数据）。为此，我使用以下网址： [https ://gdata.youtube.com/feeds/api/channels/rX3yH7nFEQq49lQGVk2Iqg?v=2](https://gdata.youtube.com/feeds/api/channels/rX3yH7nFEQq49lQGVk2Iqg?v=2)

当我将此 URL 直接输入到 FireFox 地址栏时，我得到了我正在寻找的结果。但是，如果我打开完全相同的 URL：

```
$data = simplexml_load_file('https://gdata.youtube.com/feeds/api/channels/rX3yH7nFEQq49lQGVk2Iqg?v=2'); 
```

我得到了完全不同的结果（使用 print_r($data)）！

对此有解释吗？我做错了什么吗？有什么遗漏吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:28:11.190

关于频道最有用的信息实际上来自 /users/ 服务，而不是 /channels/。

您也可以添加`alt=json`，除非您*真的*喜欢解析 XML 而不是使用 JSON。

最后，频道 ID 的“正确”形式有一个`UC`前缀，尽管 v2 也支持不带前缀的频道 ID。

把所有这些放在一起会给你[https://gdata.youtube.com/feeds/api/users/UCrX3yH7nFEQq49lQGVk2Iqg?v=2&alt=json](https://gdata.youtube.com/feeds/api/users/UCrX3yH7nFEQq49lQGVk2Iqg?v=2&alt=json)

（离开`alt=json`工作`simplexml_load_file()`）

# android - 如何通过“推送”在 Android 中显示 listView 中的内容

> ID：14463702
> 
> 赞同：1
> 
> 时间：2013-01-22T16:48:03.550
> 
> 标签：android, android-listview, android-fragments, stack, android-listfragment

我是一名新的 Android 开发人员。

在 iOS 中，有一个类调用`UINavigationController`，我可以将新的 viewController 推送到堆栈并通过按下“返回”按钮返回到上一个视图。

```
[self pushViewController: myViewController animated:YES] 
```

据我所知， 的实例`UINavigationController`具有保存控制器的属性。因此，每个控制器中的所有属性也都保存在堆栈中。

我想知道Android是否可以做类似的事情。现在我有两个片段来模拟iOS的*拆分视图。*我子类`ListFragment`表示左侧的`lsit view*，另一个片段表示右侧的*项目详细信息。*

当用户点击列表视图中的一个项目时，它将转到另一个列表。

```
 SecondFragment newFragment = new SecondFragment();

        FragmentTransaction transaction = getSupportFragmentManager()
                .beginTransaction();

        transaction.replace(R.id.fragment_container, newFragment);
        transaction
                .setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
        getActionBar().setTitle("new items");

        transaction.commit();

        getActionBar().setDisplayHomeAsUpEnabled(true);
        invalidateOptionsMenu(); 
```

但是，我想通过单击后退按钮返回上一个视图。我意识到我应该添加如下代码：

```
transaction.addToBackStack(null); 
```

但是，在我点击后退按钮后，我的应用程序会退出。

如果我想回去，我必须进行另一`Fragment`笔交易。问题是，我想将内容另存为项目列表，而`ListFragment`不是将其保存到`MainActivity`. 从堆栈中检索以前的列表视图内容对我来说要容易得多。

Android中有什么方法可以在iOS中做类似的事情`UINavigationController`吗？

# javascript - NodeJs 压力测试工具/方法

> ID：14463703
> 
> 赞同：37
> 
> 时间：2013-01-22T16:48:06.167
> 
> 标签：javascript, node.js, testing, stress-testing

我已经搜索了很多关于对 NodeJs 应用程序/模块进行压力测试的内容，但我没有找到任何东西。

我有一个推送服务器应用程序（类似于 socket.io），我想对其进行测试以确保没有内存泄漏并且它表现出最佳性能。

这样做的最佳方法或工具是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-27T02:28:54.087

您不需要任何特殊工具来负载测试 Node.js 应用程序。您可以使用任何负载测试工具：

*   [ApacheBench](http://httpd.apache.org/docs/2.2/programs/ab.html)
*   [围城](http://www.joedog.org/siege-home/)
*   [测量仪](http://jmeter.apache.org)
*   [宗](http://tsung.erlang-projects.org/)

从开源和免费工具中，我可以推荐 JMeter。因为它有内置的代理服务器，可以[记录 HTTP 流量](http://blazemeter.com/blog/jmeters-superpower-http-proxy-server)。JMeter 比其他工具的优势是用户友好的 GUI。您可以找到与 Node.js 负载平衡和[JMeter 测试](http://mazira.com/blog/introduction-load-balancing-nodejs/)相关的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T10:47:12.430

试试这个[phanos](https://npmjs.org/package/phanos)压力测试工具。这是基于 phantomjs 的工具，您也可以使用它加载 ajax 请求。但是这个工具不提供统计信息，你应该使用nodetime（或其他东西）来分析流量性能。

# ruby-on-rails - Formastic，ActiveAdmin 添加 javascript

> ID：14463704
> 
> 赞同：3
> 
> 时间：2013-01-22T16:48:07.803
> 
> 标签：ruby-on-rails, ruby

如何使用 formastic 和 activeadmin 添加 javascript 操作：

我有这样的形式：

```
f.input :role, :as => :select, :collection => User.display_roles.each_with_index.map{|x,i|  [x,User.roles[i]]} , :include_blank => nil

f.input :organization, :input_html => { :disabled => false } 
```

我想添加javascript，在更改角色后，组织将发生变化。怎么做？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T21:26:02.143

遵循没有突兀的 js 的想法，您也可以将其放入 js 文件中（例如：）`utils.js`：

```
$(function(){
    $('#your_model_role').change(function() {
        what you want to happen goes here
    });
}); 
```

然后在`/config/initializers/active_admin.rb`里面放一条线`config.register_javascript 'utils.js'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T19:01:18.113

我必须创建一个部分表单。

在部分 put 结束时：

```
<script type="text/javascript">     
    $(function(){
        $('#your_model_role').change(function() {
            what you want to happen goes here
        });
    });
</script> 
```

希望能帮助到你。

# asp.net - 我的 ASP.NET 网站的管理工具我可以从哪里开始？

> ID：14463712
> 
> 赞同：1
> 
> 时间：2013-01-22T16:48:17.533
> 
> 标签：asp.net, web-applications, website-admin-tool

我决定为我的 ASP.NET 4.0 网站编写一个管理工具，该工具也具有会员功能。

我已为以下活动准备好业务层，

1.  每天登录网站的用户数。
2.  登录用户的平均花费时间。
3.  登录用户访问的页面。
4.  用户每月登录的频率。
5.  尽管可以通过直接查看数据库或谷歌分析来检查上面列出的活动，但我更喜欢它们出现在一个地方，因为根据我从中看到的数据，我还有其他活动要跟进。

我更喜欢使用图表（开源 jquery 图表）。

***我**关心的是我应该从哪里开始构建管理页面，比如在用户访问的现有 Web 应用程序中或在单独的 Web 应用程序中（这真的可能吗）？*

*如果可以在单独的 Web 应用程序中使用，我如何将域映射到新的 Web 应用程序以供管理员使用。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:52:49.490

由于您使用的是内置的 ASP.NET 成员资格，因此最简单的方法可能是创建一个名为“Admin”的子文件夹（如应用程序中的任何其他文件夹）或您喜欢的任何内容，然后使用`web.config`专门在该文件夹中的文件。您可以按角色或用户轻松保护文件夹。

```
<system.web>
    <authorization>
        <allow roles="YOURRoles"/>
        <deny users="*"/>
    </authorization>
</system.web> 
```

[MSDN 入口](http://msdn.microsoft.com/en-us/library/acsd09b0%28v=vs.100%29.aspx)

对于图表，一个选项是[Highcharts](http://www.highcharts.com/)。有一个 .NET 库 ( [DotNet.Highcharts](http://dotnethighcharts.codeplex.com/) ) 可以轻松地从代码隐藏中管理 Highcharts。我以前用过它，认为它是用户友好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:50:41.927

我只是建议您可以创建一个名为“Admin”的文件夹。在那里你创建了所有的实现

1.  使用授权来确保管理员门户的安全
2.  日志记录

授权

将此添加到管理文件夹中的 web.config 中。（添加-> web.config 在管理文件夹中）

```
<location path="folder">
    <system.web>
        <authorization>
            <allow roles="Admin" />
            <deny users="*" />
        </authorization>
    </system.web
</location> 
```

对于 Jquery 图表，使用[JqPlot](http://www.jqplot.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:52:57.900

我建议您在应用程序域中创建一个子文件夹并在那里使用您的管理工具

可以通过以下方式拥有两个单独的 Web 应用程序

*   两个应用不共享代码 - 您可以让它们访问同一个数据库而不共享代码
*   两个应用程序共享代码 - 您可以将一些逻辑打包到单独的项目中，并让您的 Web 应用程序引用它们。所有这些都可以发生在同一个解决方案文件中。您甚至可以让您的新管理应用程序以相同的方式引用原始应用程序。
*   两个应用程序共享一些逻辑 - 您可以通过 API 公开一些逻辑并让另一个 Web 应用程序访问 API

我建议你只做第一个也是最简单的选择。

# php - 使用 vimeo 高级 Api 上传视频详细信息

> ID：14463713
> 
> 赞同：0
> 
> 时间：2013-01-22T16:48:20.963
> 
> 标签：php, api, thumbnails, vimeo

我想知道是否有办法使用 VIMEO 的 API 高级 API /上传 API 上传带有视频的缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:19:23.203

我正在使用 PHP 语言给出答案。

*   该库可用于 vimeo api 集成：

    [https://github.com/vimeo/vimeo-php-lib](https://github.com/vimeo/vimeo-php-lib)

*   上传视频后，尝试以下解决方案为视频创建缩略图：

    [从 Vimeo 获取 img 缩略图？](https://stackoverflow.com/questions/1361149/get-img-thumbnails-from-vimeo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:00:37.880

我向 api 开发者社区发送了一封电子邮件，询问了这一点，答案是：

> 高级 api 目前不支持为视频分配缩略图。我们将考虑在未来添加此功能，但目前我无法给您一个时间表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T22:06:07.893

我正在使用最新的 Vimeo API。
我试过这个，它对我有用。

```
$lib = new \Vimeo\Vimeo($client_id, $client_secret);
$lib->setToken($access_token);

$video_uri = $lib->upload('video.mp4', false);

$metadata = array(
    'name' => "Video Title",
    'description' => "Description comes here"
);
$response = $lib->request($video_uri, $metadata, 'PATCH'); 
```

# ruby-on-rails - 重定向并登录或登录并重定向？

> ID：14463714
> 
> 赞同：3
> 
> 时间：2013-01-22T16:48:21.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sorcery

简单的问题。什么是首选，为什么，或者根本不重要？魔法宝石示例：

```
if @user.save
  redirect_to index_path
  auto_login(@user) 
```

或者

```
if @user.save
  auto_login(@user)
  redirect_to index_path 
```

只是一个地方的跳过，一行可能并不重要，但什么更好，更安全，为什么或它真的不重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:58:49.610

只要您为调用提供有效参数，顺序并不重要`redirect_to`。`redirect_to`如果您不提供有效参数并因此`auto_login`不会运行，则会引发异常，但您不会看到错误，`redirect_to`除非您正在做一些非常错误的事情，例如传入`nil`选项或者您已经调用`redirect_to`了该方法。

我倾向于选择`redirect_to`最后一个，因为从控制流的角度来看这是有道理的。它让您大致了解 Rails 将在您的控制器操作中执行所有代码后将您带到哪里，并且它还可能有助于阻止您`redirect_to`多次调用并导致`DoubleRenderError`.

如果您查看[redirect_to 文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html#method-i-redirect_to)并单击“显示源”链接，您会发现它基本上只是设置变量，因此您可以在任何您想要的地方调用它。`redirect_to`看起来与`return`您在其他语言中看到的语句相似，但它不像一个语句，所以请记住这一点。这只是一种在控制器上设置某些状态的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:19:02.000

我会先登录然后重定向。

您重定向到的位置可能取决于登录的用户。它可能不适用于您的情况，但在其他情况下可能，并且以后可能会在您的应用程序开发中使用。

例如，如果更改索引路由，使其根据用户是否登录而转到不同的位置，那么无论您在重定向之前还是之后登录都非常重要。如果您在重定向后登录，那么您将重定向到未登录用户的路由版本。

# jquery - 一次显示或循环 3 个 div

> ID：14463715
> 
> 赞同：0
> 
> 时间：2013-01-22T16:48:23.717
> 
> 标签：jquery

我的页面上有一个部分是一次显示 3 个 div，尽管可能隐藏了其他 div。

通过单击“更多”按钮，接下来的 3 个 div 将淡入，之前的 3 个 div 将淡出。

因此，如果我们有 6 个 div，则显示前 3 个，单击“更多”按钮，将显示 4-6 个 div。

如果可能，应始终显示 3 个 div。

例如，如果我们有 5 个 div，那么当您单击“更多”按钮时，会显示 3-5 个 div。

我知道有一个名为 jCarousel 的 jquery 插件可以做到这一点，但只是想知道是否可以不使用插件，因为我正在构建一个响应式网站，而 carousel 插件使用固定大小的 DIV。

编辑：HTML：

```
<a class="more" href="#">More</a>

<div id="container">
    <div class="item"><div>One</div><div>some more text</div></div>
    <div class="item"><div>Two</div><div>some more text</div></div>
    <div class="item"><div>Three</div><div>some more text</div></div>
    <div class="item"><div>Four</div><div>some more text</div></div>
    <div class="item"><div>Five</div><div>some more text</div></div>
    <div class="item"><div>Six</div><div>some more text</div></div>

</div> 
```

Javascript：

```
$("#container .item").slice(0,3).show();

$(".more").click(function(event) { 
  var $currElements = $("#container .item:visible");
  var $nextElements = $("#container .item:hidden");

    $currElements.hide();
    $nextElements.show();

    event.preventDefault();

}); 
```

这是我目前拥有的：http: [//jsfiddle.net/Wnp5J/](http://jsfiddle.net/Wnp5J/)

现在只是想知道当您再次单击按钮时是否可以循环回到前 3 个项目。

此外，如果可能，始终显示 3 个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:42:20.440

jsFiddle：[分页](http://jsfiddle.net/Wnp5J/2/)和[转换](http://jsfiddle.net/Wnp5J/5/)

jsFiddle：[分页](http://jsfiddle.net/Wnp5J/7/)（页面总是满的）

jsFiddle：[轮播](http://jsfiddle.net/Wnp5J/6/)

适用于任意数量的元素。

**分页：**

```
$("#container .item").slice(0,3).show();

$(".more").click(function() {

    var items = $('#container .item:visible').hide().last();

    var nextItems = items.nextAll().slice(0, 3);

    if (nextItems.length === 0) {
        nextItems = $("#container .item").slice(0, 3);
    }

    nextItems.show();
}); 
```

**带转换的分页：**

```
$("#container .item").slice(0,3).show();

$(".more").click(function() {

    var items = $('#container .item:visible');

    var nextItems = items.last().nextAll().slice(0, 3);

    if (nextItems.length === 0) {
        nextItems = $("#container .item").slice(0, 3);
    }

    items.stop().hide(500, function() {
        nextItems.show(500);
    });
}); 
```

**分页（页面总是满的）：**

```
$("#container .item").slice(0,3).show();

$(".more").click(function() {

    var items = $('#container .item:visible').hide().last();

    var nextItems = items.nextAll().slice(0, 3);

    if (nextItems.length === 1) {
        nextItems = $("#container .item").slice(-3);
    }

    if (nextItems.length === 0) {
        nextItems = $("#container .item").slice(0, 3);
    }

    nextItems.show();
}); 
```

**轮播：**

```
$(function() {

    var container = $('#container');
    var cycle = function() {
        container.find('.item')
            .hide()
            .slice(0, 3)
            .appendTo(container)
            .show();
    }

    $(".more").click(function() {
        cycle();
    });

    cycle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:42:41.570

我承认我对你的要求有点困惑。这是一个想法。

```
$(".more").click(function (event) {
  $("#container .item").slice(3, 99).toggle();
}); 
```

[http://jsfiddle.net/Wnp5J/4/](http://jsfiddle.net/Wnp5J/4/)

# javascript - AngularJS：来自服务的异步 $http.jsonp 调用

> ID：14463719
> 
> 赞同：2
> 
> 时间：2013-01-22T16:48:39.237
> 
> 标签：javascript, ajax, asynchronous, angularjs

我正在尝试编写一个简单的应用程序，它执行以下操作： 1\. 用户输入 2 个参数并单击一个按钮 2\. Angular 调用一个返回 JSON 的外部 JAVA Servlet 3\. 应用程序将 json 字符串输出到屏幕

但是我有一个问题，因为当我单击按钮时没有任何反应。我相信（由于测试）发生这种情况的原因是由于调用是异步的，因此返回的变量为空。

相关代码：

**控制器.js**

```
function myAppController($scope,kdbService) {
    $scope.buttonClick = function(){
        var dat = kdbService.get($scope.tName,$scope.nRows);
        $scope.data = dat;

    }
} 
```

**服务.js**

```
angular.module('myApp.services', []).factory('kdbService',function ($rootScope,$http){
    var server="http://localhost:8080/KdbRouterServlet";
    return {
        get: function(tname,n){
            var dat;
            $http.jsonp(server+"?query=krisFunc[`"+tname+";"+n+"]&callback=JSON_CALLBACK").
                success(function(data, status, headers, config) {
                    console.log("1");
                    console.log(data);
                    dat=data;
                }).
                error(function(data, status, headers, config) {
                    alert("ERROR: Could not get data.");
                });
            console.log("2");
            console.log(dat);
            return dat;
        }
    }
}); 
```

**索引.html**

```
<!-- Boilerplate-->
<h1>Table Viewer</h1>
<div class="menu" >
    <form>
        <label for="tName">Table Name</label>
        <input id="tName" ng-model="tName"><br>
        <label for="nRows">Row Limit</label>
        <input id="nRows" ng-model="nRows"><br>
        <input type="submit" value="Submit" ng-click="buttonClick()">
    </form>
</div>
{{data}}
<!-- Boilerplate--> 
```

当我执行代码并按下按钮时，没有任何反应。但是，如果我查看我的日志，我会看到：

```
2
undefined
1 
Object {x: Array[2], x1: Array[2]} 
```

显然，发生的事情是成功函数在 get 函数返回之后返回。因此放入 $scope.data 的对象是未定义的，但是从 jsonp 调用返回的对象被留下了。

有没有正确的方法可以做到这一点？我看到的大多数教程都将数据分配给成功函数*内*的 $scope 变量，从而跳过了这个问题。如果可能的话，我希望我的服务是分离的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T16:56:29.580

我会做这样的事情：

控制器

```
function myAppController($scope,kdbService) {
    $scope.kdbService = kdbService;
    $scope.buttonClick = function(){
        $scope.kdbService.get($scope.tName,$scope.nRows);

    }
} 
```

服务

```
angular.module('myApp.services', []).factory('kdbService',function ($rootScope,$http){
    var server="http://localhost:8080/KdbRouterServlet";
    return {
        data:{},
        get: function(tname,n){
            var self = this;
            $http.jsonp(server+"?
            query=krisFunc[`"+tname+";"+n+"]&callback=JSON_CALLBACK").
                success(function(data, status, headers, config) {
                    console.log("1");
                    console.log(data);
                    self.data = data;
                }).
                error(function(data, status, headers, config) {
                    alert("ERROR: Could not get data.");
                });
        }
    }
}); 
```

html

```
{{kdbService.data}} 
```

或者

在 get 方法中使用延续：

控制器

```
function myAppController($scope,kdbService) {
    $scope.buttonClick = function(){
        kdbService.get($scope.tName,$scope.nRows,function success(data){
           $scope.data = data;
        });
    }
} 
```

服务

```
 get: function(tname,n,successCallback){
        $http.jsonp(server+"?query=krisFunc[`"+tname+";"+n+"]&callback=JSON_CALLBACK").
            success(function(data, status, headers, config) {
                successCallback(data,status,headers,config);
            }).
            error(function(data, status, headers, config) {
                alert("ERROR: Could not get data.");
            });
    } 
```

或使用 $resource 服务

[http://docs.angularjs.org/api/ngResource](http://docs.angularjs.org/api/ngResource) .$resource（你需要 angular-resource 模块

代码未测试。

> 如果可能的话，我希望我的服务是分离的。

然后将“数据对象”放入调用“数据提供者服务”的“数据服务”中。无论如何，您都必须在某处调用“数据提供者服务”。我认为没有跳过这个问题，因为这就是 javascript 的工作方式。

也使用`angular.controller("name",["$scope,"service",function($s,s){}]);`

所以你不需要关心参数是如何被调用的，只要它们被正确定义和注入。

# php - array_diff_uassoc 的实际用途是什么？

> ID：14463720
> 
> 赞同：-2
> 
> 时间：2013-01-22T16:48:43.770
> 
> 标签：php, arrays

`array_diff_assoc`并且`array_diff_uassoc`两者都做同样的事情（使用附加索引检查计算差异 b/w 数组）唯一的区别是后一个 accpet a `callback`。

区别只是回调，在这种情况下，您应该更喜欢`array_diff_uassoc`而不是`array_diff_assoc`.

我想了解，如果回调将在每种情况下都执行与以下相同的操作，那么使用`array_diff_uassoc`

```
function key_compare_func($a, $b)
{
    if ($a === $b) {
        return 0;
    }
    return ($a > $b)? 1:-1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:37:55.710

实际的区别是用户定义的函数可以是默认值以外的*任何东西。**您自己定义回调。*

仅仅因为文档只给出了一个简单的例子并不意味着这是唯一的可能性。这是一个人为的回调函数示例，您将在多维数组中使用 tom compare 元素：

```
function key_compare_func($a, $b) {
    if ($a['key']['subkey'] === $b['key']['subkey']) {
        return 0;
    }
    return ($a['key']['subkey'] > $b['key']['subkey'])? 1:-1;
} 
```

**编辑：** PHP7 有宇宙飞船！

```
function key_compare_func($a, $b) {
    return $a['key']['subkey'] <=> $b['key']['subkey']
} 
```

# python - 同一个异常的多个异常处理程序

> ID：14463722
> 
> 赞同：0
> 
> 时间：2013-01-22T16:48:45.427
> 
> 标签：python, exception

我有一个在另一个函数内部调用的函数的代码。（重构的结果）。

所以在被调用的函数中，我有一大块 try-catch 语句。

```
def Called():
     try:
         #All statements for the function in the try block.
     except A:
         # Exception handler.
     except B:
         # Exception handler.
     except A: 
         # Exception handler. 
```

我遇到的问题是我需要捕获两个相同类型的异常（在被调用函数的不同位置）。然后由调用函数处理。

一种方法是在 Called 函数中定义两个 try-except 块。但我不明白调用函数如何以不同的方式处理相同类型的两个异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T16:51:56.547

这不会像宣传的那样起作用；只有第一个`except A`子句会被执行。您需要的是子句中的一些逻辑*以*进一步检查异常，或者（如果`try`块内的代码允许）几个`try`-`except`块。

前一种方法的示例：

```
try:
    something_that_might_fail()
except A as e:
    if e.is_harmless():
        pass
    elif e.is_something_we_can_handle():
        handle_it()
    else:
        raise    # re-raise in the hope it gets handled further up the stack 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T05:50:01.177

我认为这会奏效

```
def Called():
     try:
         #All statements for the function in the try block.
     except A:
         try: 
             do_someting()
         except B:
             try:
                do_somthing_else()
             except:

     except A: 
         # Exception handler. 
```

# google-chrome - 在 Chrome 中手动安装 Web Developer 插件

> ID：14463726
> 
> 赞同：0
> 
> 时间：2013-01-22T16:48:51.203
> 
> 标签：google-chrome, github, google-chrome-extension

GitHub 上的文档很少：

> 如 Chrome 文档中所述，可以通过在 build/chrome 中加载解压后的扩展来在 Chrome 中安装该扩展。该扩展可以通过像常规扩展一样安装 web-developer-firefox.xpi 或使用 ant install.firefox 和 Extension Auto-Installer 扩展自动安装在 Firefox 中。

任何人都知道如何使用 GitHub 主 zip 在 Chrome 中安装？当我下载主文件时，我注意到没有 build/chrome 文件夹，所以这个信息可能已经过时了。

更新：使用未打包的扩展方法，我收到一个警报，让我移动多个文件以重新创建 中指定的文件结构`manifest.json`，但我遇到了一个警报，指出：

> 指定了默认语言环境，但缺少 _loacles 子树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:11:27.537

如果您想从 git-hub 加载扩展进行测试，请按照下列步骤操作：

*   在您的浏览器中访问`chrome://extensions`（或通过单击多功能框最右侧的图标打开设置菜单，然后选择工具菜单下的扩展以到达同一位置）。
*   确保选中右上角的开发人员模式复选框。
*   单击 Load unpacked extension... 以弹出文件选择对话框。
*   导航到扩展文件所在的目录（转到 manifest.json 文件的根文件夹），然后选择它。

# .htaccess - 别名和 mod_rewrite

> ID：14463729
> 
> 赞同：6
> 
> 时间：2013-01-22T16:48:57.787
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我试图让 Symfony1.4 和 Symfony2 在 Apache（2.2.22）中的同一主机上工作 - 我认为问题在于两者都使用 mod_rewrite 将请求定向到 php 控制器/脚本。这是我的配置

httpd.conf

```
# Symfony 1.4
<VirtualHost *:80>
  DocumentRoot "d:/wamp/www/wlnew/web"
  DirectoryIndex index.php
  <Directory "d:/wamp/www/wlnew/web">
    AllowOverride All
    Allow from All
  </Directory>

  Alias /sf d:/wamp/www/wlnew/lib/vendor/symfony/data/web/sf
  <Directory "d:/wamp/www/wlnew/lib/vendor/symfony/data/web/sf">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost>
# Symfony 2
Alias /another "d:/wamp/www/another/web/"
<Directory "d:/wamp/www/another/web">
    Options Indexes FollowSymlinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

然后每个版本的 Symfony 都有一个`.htaccess`用来重写请求的

Symfony 1`.htaccess`

```
Options +FollowSymLinks +ExecCGI
<IfModule mod_rewrite.c>
  RewriteEngine On

  RewriteRule ^$ index.html [QSA]
  RewriteRule ^([^.]+)$ $1.html [QSA]
  RewriteCond %{REQUEST_FILENAME} !-f

  # no, so we redirect to our front web controller
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

Symfony 2`.htaccess`

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

我希望能够使用`localhost/`重定向到 Symfony 1 前端控制器`index.php`，但是当我使用时，`localhost/another`所有请求都应该转发到 symfony2 前端控制器`app.php`，但它们不是——它们被转发到 symfony1 前端控制器（`index.php`）。如果我为 Symfony2 使用控制器的文件名，它可以工作，即`localhost/another/app.php`

`/another`当我使用别名时，如何让 apache 将请求转发到 Symfony2 控制器？

## 更新

我启用了重写日志记录......这就是我得到的：

```
[perdir D:/wamp/www/another/web/] strip per-dir prefix: D:/wamp/www/another/web/ -> 
[perdir D:/wamp/www/another/web/] applying pattern '^(.*)$' to uri ''
[perdir D:/wamp/www/another/web/] RewriteCond: input='D:/wamp/www/another/web/' pattern='!-f' => matched
[perdir D:/wamp/www/another/web/] rewrite '' -> 'app.php'
[perdir D:/wamp/www/another/web/] add per-dir prefix: app.php -> D:/wamp/www/another/web/app.php
[perdir D:/wamp/www/another/web/] internal redirect with D:/wamp/www/another/web/app.php [INTERNAL REDIRECT]
[perdir D:/wamp/www/wlnew/web/] add path info postfix: D:/wamp/www/wlnew/web/wamp -> D:/wamp/www/wlnew/web/wamp/www/another/web/app.php
[perdir D:/wamp/www/wlnew/web/] strip per-dir prefix: D:/wamp/www/wlnew/web/wamp/www/another/web/app.php -> wamp/www/another/web/app.php
[perdir D:/wamp/www/wlnew/web/] applying pattern '^$' to uri 'wamp/www/another/web/app.php'
[perdir D:/wamp/www/wlnew/web/] add path info postfix: D:/wamp/www/wlnew/web/wamp -> D:/wamp/www/wlnew/web/wamp/www/another/web/app.php
[perdir D:/wamp/www/wlnew/web/] strip per-dir prefix: D:/wamp/www/wlnew/web/wamp/www/another/web/app.php -> wamp/www/another/web/app.php
[perdir D:/wamp/www/wlnew/web/] applying pattern '^([^.]+)$' to uri 'wamp/www/another/web/app.php'
[perdir D:/wamp/www/wlnew/web/] add path info postfix: D:/wamp/www/wlnew/web/wamp -> D:/wamp/www/wlnew/web/wamp/www/another/web/app.php
[perdir D:/wamp/www/wlnew/web/] strip per-dir prefix: D:/wamp/www/wlnew/web/wamp/www/another/web/app.php -> wamp/www/another/web/app.php
[perdir D:/wamp/www/wlnew/web/] applying pattern '^(.*)$' to uri 'wamp/www/another/web/app.php'
[perdir D:/wamp/www/wlnew/web/] RewriteCond: input='D:/wamp/www/wlnew/web/wamp' pattern='!-f' => matched
[perdir D:/wamp/www/wlnew/web/] rewrite 'wamp/www/another/web/app.php' -> 'index.php'
[perdir D:/wamp/www/wlnew/web/] add per-dir prefix: index.php -> D:/wamp/www/wlnew/web/index.php
[perdir D:/wamp/www/wlnew/web/] strip document_root prefix: D:/wamp/www/wlnew/web/index.php -> /index.php
[perdir D:/wamp/www/wlnew/web/] internal redirect with /index.php [INTERNAL REDIRECT]
[perdir D:/wamp/www/wlnew/web/] strip per-dir prefix: D:/wamp/www/wlnew/web/index.php -> index.php
[perdir D:/wamp/www/wlnew/web/] applying pattern '^$' to uri 'index.php'
[perdir D:/wamp/www/wlnew/web/] strip per-dir prefix: D:/wamp/www/wlnew/web/index.php -> index.php
[perdir D:/wamp/www/wlnew/web/] applying pattern '^([^.]+)$' to uri 'index.php'
[perdir D:/wamp/www/wlnew/web/] strip per-dir prefix: D:/wamp/www/wlnew/web/index.php -> index.php
[perdir D:/wamp/www/wlnew/web/] applying pattern '^(.*)$' to uri 'index.php'
[perdir D:/wamp/www/wlnew/web/] RewriteCond: input='D:/wamp/www/wlnew/web/index.php' pattern='!-f' => not-matched
[perdir D:/wamp/www/wlnew/web/] pass through D:/wamp/www/wlnew/web/index.php 
```

似乎`.htaccess`Symfony2 ( `/another`)的`app.php`_`.htaccess``index.php``app.php`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:31:20.163

似乎`RewriteBase`需要为 .htaccess 设置配置要求。

```
RewriteBase /another 
```

这应该有效。[此链接有助于此答案。](https://stackoverflow.com/questions/12743060/htaccess-internal-redirect-not-working-for-subfolder)

此外，[这里有一些通过我们关于](https://gist.github.com/9488026f5cefd8ccee3c)其他设置如何影响以及如何`RewriteCond`纠正无限内部重定向循环的聊天讨论的注释。可能会帮助其他人。总的来说，mod_rewrite 是一个困难的模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:55:33.360

尝试在 sf2 中移动 Symfony 2 别名并为 sf2`VirtualHost`添加另一个别名：`DirectoryIndex`

```
<VirtualHost *:80>
  # Symfony 1.4
  DocumentRoot "d:/wamp/www/wlnew/web"
  <Directory "d:/wamp/www/wlnew/web">
    DirectoryIndex index.php
    AllowOverride All
    Allow from All
  </Directory>

  Alias /sf d:/wamp/www/wlnew/lib/vendor/symfony/data/web/sf
  <Directory "d:/wamp/www/wlnew/lib/vendor/symfony/data/web/sf">
    AllowOverride All
    Allow from All
  </Directory>

  # Symfony 2
  Alias /another "d:/wamp/www/another/web/"
  <Directory "d:/wamp/www/another/web">
    DirectoryIndex app.php
    Options Indexes FollowSymlinks
    AllowOverride All
    Order allow,deny
    Allow from all
  </Directory>
</VirtualHost> 
```

# java - 使用 GridBagLayout 设置坐标

> ID：14463731
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:00.090
> 
> 标签：java, swing, gridbaglayout

我对坐标 x 和 y 有疑问。我使用`GridBagLayout`gridx=0,gridy=0，但所有组件都完全居中对齐。我需要设置 align top-left 0,0 但我的使用解决方案`GridBagLayout`不起作用。

现在我展示代码和图片。需要左对齐。默认有中心对齐，但需要为组件设置左上对齐，因为我需要绘制两个图片底部 JFrame。

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.*;
public class Zobrazenie extends JPanel {
private static final long serialVersionUID = 1L;
    JButton b1,b2,b3,b4,b5;
    GridBagConstraints gbc = new GridBagConstraints();
    Zobrazenie()
    {
        setLayout(new GridBagLayout());
        gbc.insets=new Insets(10,10,10,10);

        gbc.gridx=0;
        gbc.gridy=0;
        gbc.anchor=GridBagConstraints.WEST;
        b1=new JButton("Button 1");
        add(b1,gbc);

        gbc.gridx=0;
        gbc.gridy=1;
        b2=new JButton("Button 2");
        add(b2,gbc);

        gbc.gridx=0;
        gbc.gridy=2;
        b3=new JButton("Button 3");
        add(b3,gbc);

        gbc.gridx=0;
        gbc.gridy=3;
        b4=new JButton("Button 4");
        add(b4,gbc);

        gbc.gridx=0;
        gbc.gridy=4;
        b5=new JButton("Button 5");
        add(b5,gbc);
    }
public static void main(String[] args)
{
    JFrame jf = new JFrame();
    Zobrazenie zb = new Zobrazenie();
    jf.setSize(400,300);
    jf.setTitle("Okno");
    jf.setLocationRelativeTo(null);
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.add(zb);
    jf.setVisible(true);
}
} 
```

和图片：http: [//img14.imageshack.us/img14/7243/oknouw.jpg](http://imageshack.us/photo/my-images/14/oknouw.jpg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:21:58.307

`anchor`并且`fill`仅在您指定`weighx`和/或`weighty`使用大于 0 的值时才有效。

现在的问题是您希望如何分配额外的空间。

# sql - SQL 从 2 个表中选择值

> ID：14463737
> 
> 赞同：-2
> 
> 时间：2013-01-22T16:49:16.200
> 
> 标签：sql

我有 2 张桌子：

```
Table1
ID-NAME
1-Name1
2-Name2

Table2
ID-NAME
1-Name3
4-Name4 
```

我想选择 ID=1 的所有名称值（在这种情况下，女巫将返回“Name1”和“name3”）。如果值具有相同的名称，我希望它只显示 1 条记录。

就像是：

```
SELECT NAME FROM Table1, Table2 WHERE ID = 1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-22T16:49:55.057

我认为你应该考虑使用`UNION`：

```
SELECT NAME FROM Table1 WHERE Id = 1
UNION
SELECT NAME FROM Table2 WHERE Id = 1 
```

祝你好运。

# java - 如果输入变为默认值，我如何返回到 switch 语句的顶部？

> ID：14463738
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:16.190
> 
> 标签：java, switch-statement

我正在做我的作业（从 1-10 的数字输入生成罗马数字），并且在这样做的过程中，我做了一个 switch 语句。我的问题是，如果在一个案例中没有选择任何输入，我如何返回到 switch 语句的顶部？在我们的教科书中没有任何内容，我在 java 文档中也找不到任何内容。这只是不可能发生的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T16:55:44.650

就我个人而言，我更喜欢使用 while 循环来执行此操作：

只是为了解释基本思想：您初始化一个布尔值，它将作为是否必须重复循环的标准，您启动 while 循环并将布尔值设置为 false，因为在大多数情况下您只想运行一次，您开始切换并且对于您想要重复循环的所有情况，您将布尔值再次设置为true。

```
boolean again= true;
while (again){
again= false;

switch(number){
case 1:
break;
case 2:
break;
default: again=true;
break;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:28:36.933

以下是如何做到这一点，但我强烈建议您重组代码以避免这样做。

```
public class Main {
    public static void main(String[] args) {
        int i = 0;
        loop: for (;;) {
            switch (i) {
                case 1: System.out.println(i);
                    break loop;
                case 2: // more stuff
                    break loop;
                default:
                    System.out.println(i);
                    i = 1;
                    break;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:50:54.507

如果是方法，您可以`break`从 in case 或可以编写语句。`return`

```
public int method(int i){
    int j=0;
    switch(i){
        case 1: ... return j;
        ....
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-19T11:11:46.990

```
public class Main {
    public static void main(String[] args) {
        int i=3;
            switch (i) {       
            default:
            i=1;
            case 1: 
              System.out.println(i);
              break;
            case 2: 
              break;     
            }
    }
} 
```

# java - 带有 Java 的 Netbeans：将所有方法设置为静态

> ID：14463739
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:20.033
> 
> 标签：java, netbeans, refactoring, netbeans-7, automated-refactoring

我正在开发 NetBeans 上的 Java 项目。

在某些时候，我有几个不是静态的变量和方法（比如说，大约二十个）。我想将它们全部重构为静态的。我该如何继续呢？netbeans可以做到吗？

例子：

```
public void method1() {
//...
}
public void method2() {
//...
} 
```

当我单击某处或按下某些按钮时，我希望以前的方法变为：

例子：

```
public static void method1() {
//...
}
public static void method2() {
//...
} 
```

一次全部。

--

另一个常见的变体：假设我已将所有方法设置为公开，但我不再想要它了。我怎样才能将所有方法重构为私有（所以以后我可以只将我认为必要的更改为公共）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:24:31.610

这种事情的用例非常小。将静态 API 转换为 OO 可能更常见，但是将所有内容都转换为静态对于任何 IDE 来说通常都不足以对其进行自动重构，据我所知。

我会质疑这样做是否明智，但如果你所有的方法都已经以静态方式编写，你可以简单地用“public static”搜索和替换“public”。

至于更改方法的访问级别，它会因 IDE 而异，但再次搜索和替换可能比任何单击复选框重构对话框要容易得多，特别是如果您只是打开访问权限（缩小它可能会破坏其他代码，尽管它不太可能是重构工具可以修复的任何东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-20T19:05:31.983

一年后，我发现借助良好的通用文本编辑器（例如 emacs 或 vim）而不是 IDE（NetBeans、Eclipse 等）可以更好地完成这项任务。

在这种情况下，更好的文本编辑器是用户已经习惯的，在我的例子中是 Emacs。[多个游标](https://github.com/emacsmirror/multiple-cursors)包很容易解决这个问题。另一种选择是使用本机`query-replace`函数（`M-%`默认情况下有界）。

# oracle - EntityConnection 使用什么 Provider DLL 来创建它的 StoreConnection

> ID：14463741
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:24.490
> 
> 标签：oracle, entity-framework, objectcontext, devart, entityconnection

我设置了一个这样的对象上下文：

```
public MyObjectContext(....) : this(contextName, new EntityConnection(connectionString)) 
```

连接字符串是到 Oracle 数据库的连接字符串。顺便说一句，我使用 DevArt 作为提供者。

一切正常。我可以用它来检索实体等。

但后来我想对底层连接做点什么。我做了类似的事情：

```
(OracleConnection)((EntityConnection)context.Connection.StoreConnection) 
```

这给了我以下例外：

```
SystemInvalidCastException: [A]Devart.Data.Oracle.OracleConnection cannot be converted to [B]Devart.Data.Oracle.OracleConnection. .... Type A is from C:\Windows\....\6.60.283\.... Type B is from C:\DevDirectory\...\7.2.104.0 
```

似乎 ObjectContext 使用的是旧版本的 DLL。但是，如果我检查我的项目的引用，我会看到对正确版本 7.2.104.0 的引用。当我进一步检查时，即使我在其类所在的子项目中根本没有引用，ObjectContext 仍然可以连接。

它如何解析它用来连接的 DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:03:49.427

是的，我刚刚意识到我仍然（全局）安装了错误的 devArt 版本（6），但在项目中引用了正确的版本（7）。包含 ObjectContext 的程序集没有引用，因此它需要从 GAC 获取旧版本 (6)。

谢谢。为了澄清。

# ios - UITabBar 中的 UIView 没有扩展到完整

> ID：14463742
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:24.860
> 
> 标签：ios, uitableview, uiview, uitabbarcontroller, uitabbar

我有一个名为 DashBoardViewController 的 UIViewController，它充当 UITabBar 的委托。在它的 xib 中，我放置了一个带有 3 个 UITabBarItem 的 UITabBar。

这些项目中的每一个都激活不同的视图控制器，我们称它们为 ViewController1、ViewController2、ViewController3

DashBoardViewController 应该显示 ViewController1 并在加载时选择第一个栏，所以在我的 initWithNibName 中我有以下内容：

```
...
ViewController1* vc = [[ViewController1 alloc] initWithNibName:@"ViewController1" bundle:nil];
[self.view addSubview:vc.view]; 
self.currentViewController = vc;
... 
```

我实现的 UITabBarDelegate 具有以下内容：

```
if (item == viewController1Item) {
    ViewController2 *vc2 = [self.childrenControllers objectAtIndex:1];

    [self.currentViewController.view removeFromSuperview];
    [self.view addSubview:vc2.view];
    self.currentViewController = vc2;

} ... 
```

**问题** 第一个 UITabBarItem 中的视图控制器始终按预期工作，将其扩展到 w 视图的完整大小。但是，在第二个和随后的选项卡中，这不会发生：视图不会扩展。这表明，例如，如果我将一个选项卡与 ViewController2 XIB 中的底部对齐：当在 UITabBarItem 内查看时，它不会位于底部。

**注意** 请注意，这与 XIB 无关：如果我反转 ViewController1 和 ViewController2，它将是 ViewController1 未能扩展的那个。它与 UITabBarItem 相关。

**想法** 可能，这取决于我在调用 DashBoardViewController 的 initWithNibName 时 addSubview 的方式。但我找不到解释这个的方法。

**其他细节** 所有 XIB 均设置为“Size = none”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:59:01.080

如果没有看到它，我无法真正说出您设置 XIB 的方式，但我可以提出一些建议。

您尝试通过删除和添加子视图到 DashBoardViewController 来实现的行为实际上应该由[UITabBarController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)处理。这提供了一个 UITabBar，一个内容视图，并处理 UIViewController 之间的切换逻辑，同时保持布局合理并成为 SDK 的一部分。

如果由于某种原因您不能或不想使用 UITabBarController，我建议`viewWillLayoutSubviews`您在 DashBoardViewController 上实现一个方法，如下所示：

```
- (void)viewWillLayoutSubviews
{
    if( self.currentViewController )
    {
        self.currentViewController.view.frame = self.view.bounds;
    }
} 
```

也许也可以`self.currentViewController.view.frame = self.view.bounds;`在您交换 ViewControllers 之后尝试添加该行，以获得良好的衡量标准。这将确保您当前 ViewController 视图的框架始终调整大小以填充 DashBoardViewController 视图的边界。

不过，这不是“正确”的方法，如果可以的话，我真的建议使用 UITabBarController，因为你不知道如果你开始滚动你的 UITabBarController 最终会重新实现多少自己的控制器。

任何进一步的问题很可能与子 ViewController 的内部布局有关，而不是它们在 DashBoardViewController 视图中的大小/位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:08:54.740

在您的 XIB 文件上，确保您将灵活高度设置为固定在顶部和底部，这样 UITableView 将始终具有与 4" 显示器相同的高度

![在此处输入图像描述](../Images/c92126a694ef65f516a38ec0bfd88c7a.png)

# html - 从表格中删除边框

> ID：14463743
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:25.827
> 
> 标签：html, css

如何从表格标题行中删除顶部的蓝色边框以及仅在表格的第一列中的左侧蓝色边框？

CSS：

```
<style type="text/css">
    table {
        width: 800px;
        color: #235A81;
        font-family: Arial;
        font-size: 9pt;
        border: 0px;
    }
    th, td {
        border: solid blue;
        border-width: 1px 0px 0px 1px;
        padding: 4px;
    }
    th {
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff", endColorstr="#cdcdcd");
        width: 110px;
        height: 20px;
        border-bottom: 1px solid #808080;
    }
    tbody {
        height: 200px;
    }

        div {
            position: relative;
            height: 200px;
            width: 800px;
            overflow-y: scroll;
            overflow-x: scroll;
            border: 1px solid red;
        }

        thead tr {
            position: absolute;
            top: expression(this.offsetParent.scrollTop);
        }
        tbody {
            height: auto;
        }
        table tbody tr:first-child td {
            padding: 32px 4px 4px 4px;
        }
</style> 
```

这是一个 js 小提琴：http: [//jsfiddle.net/kvbS8/](http://jsfiddle.net/kvbS8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:56:45.910

尝试通过以下方式替换您的`th, td`声明：

```
th, td {
    border-bottom: 1px solid blue;
    border-right: 1px solid;
    padding: 4px;
} 
```

# dialog - DialogTabPage 对象没有方法“frameType”

> ID：14463746
> 
> 赞同：0
> 
> 时间：2013-01-22T16:49:27.350
> 
> 标签：dialog, dynamics-ax-2009, x++, axapta

这与我在此处发布的问题有关：

[如何使对话框元素可折叠？](https://stackoverflow.com/questions/14463319/collapsible-elements-on-ax-2009-dialog-custvendpaymjournal-custvendpaymjourna)

另一位开发人员在创建付款建议时显示的对话框中添加了两个组（CustVendPaymJournal_Vend 类），并且“确定”和“取消”按钮不再显示在较小的分辨率 (1024x768) 上。

为了克服这个问题，我试图在 DialogTabPage 选项卡中对一些对话框元素进行分组。但是，我的尝试没有任何成功。

这就是我在 CustVendCreatePaymJournal_Vend 的 dialog() 方法的前几行代码中的内容

```
public Object dialog()
{
    LedgerJournalType   ledgerJournalType;
    DialogTabPage       tab;
    super();
    tab = dialog.addTabPage("First tab");
} 
```

在尝试在对话框中添加选项卡的任何地方，我都会不断收到此错误。我也尝试将它放在 CustVendPaymJournal 上（从其中继承了 CustVendPaymJournal_Vend），但无济于事。

```
DialogTabPage object does not have method 'frameType'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:55:13.177

尝试：

```
dialog = super();
tab = dialog.addTabPage("First tab"); 
```

# android - Android中的简单布局阴影

> ID：14463747
> 
> 赞同：15
> 
> 时间：2013-01-22T16:49:28.197
> 
> 标签：android, android-layout, shadow

所以我一直在网上搜索一种为布局显示简单阴影的方法，但没有合适的方法来做到这一点。
我发现的只是一种解决方法，您可以在要应用阴影的布局后面创建一个布局，然后将其调整为透明和其他一些东西。

有没有其他方法可以在不添加全新布局的情况下获得简单的布局阴影？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-22T16:49:28.197

我已经能够想出一个解决这个问题的方法，并且通过`View`在我们著名的布局下方添加一个，显示从一种颜色到另一种颜色的渐变。
通常，**第**一种颜色是某种深灰色，**第二种**是**背景**颜色（在我的情况下，我将有一个浅灰色背景，所以它不是完全白色的）。

![布局+视图](../Images/8c142a39dde30c06b72954f293ebba5c.png)

xml 会像这样：

```
...
<LinearLayout
    android:id="@+id/headerLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:background="@drawable/headerImage"
        android:orientation="vertical" />

    <View
        android:layout_width="fill_parent"
        android:layout_height="5dip"
        android:background="@drawable/drop_shadow" >
    </View>
</LinearLayout>
... 
```

drop_shadow.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">    
    <gradient
        android:startColor="#404040"
        android:endColor="#F1F1F1"
        android:angle="270"
        >
    </gradient>
</shape> 
```

我希望它会有所帮助；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-20T12:41:40.443

您可以使用`android.support.v4.view.ViewCompat`使用静态方法设置视图高度的类`setElevation`。该类是一个帮助器，用于以向后兼容的方式访问 API 级别 4 之后引入的视图中的功能。

基本高程以像素为单位，例如

```
View mFab = (View) findViewById(R.id.floating_button);
ViewCompat.setElevation(mFab, 12); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-30T13:03:56.317

对于棒棒糖及以上，您可以使用[海拔](https://developer.android.com/training/material/shadows-clipping.html)。

对于旧版本：

这是一个懒惰的黑客攻击：http: [//odedhb.blogspot.com/2013/05/android-layout-shadow-without-9-patch.html](http://odedhb.blogspot.com/2013/05/android-layout-shadow-without-9-patch.html)

（toast_frame 在 KitKat 上不起作用，从 toast 中删除了阴影）

只需使用：

```
android:background="@android:drawable/toast_frame" 
```

或者：

```
android:background="@android:drawable/dialog_frame" 
```

作为背景

例子：

```
<TextView
        android:layout_width="fill_parent"
        android:text="I am a simple textview with a shadow"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        android:padding="16dp"
        android:textColor="#fff"
        android:background="@android:drawable/toast_frame"
        /> 
```

并具有不同的背景颜色：

```
<LinearLayout
        android:layout_height="64dp"
        android:layout_width="fill_parent"
        android:gravity="center"
        android:background="@android:drawable/toast_frame"
        android:padding="4dp"
        >
    <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Button shadow"
            android:background="#33b5e5"
            android:textSize="24sp"
            android:textStyle="bold"
            android:textColor="#fff"
            android:layout_gravity="center|bottom"
            />

</LinearLayout> 
```

# kendo-ui - 如何刷新值剑道数字文本框？

> ID：14463759
> 
> 赞同：14
> 
> 时间：2013-01-22T16:49:47.613
> 
> 标签：kendo-ui, kendonumerictextbox

我有一个 kendoNumericTextBox。我有设置与 kendoNumericTextBox 关联的输入元素的值的代码。例如，代码调用：

```
$('#myId').val('test'); 
```

不幸的是，剑道数字文本框不会自动反映该值。如何告诉 kendoNumericTextBox 更新其值？我知道 kendoNumericTextBox 上有一个方法如下：

```
$('#myId').data('kendoNumericTextBox').value('test'); 
```

但是，我填充了许多字段，但不确定哪些字段将是 kendoNumericTextBox 字段。所以，我更喜欢调用类似于我对所选插件所做的事情来根据底层组件刷新值。例如，使用所选插件，我可以调用：

```
$('.chosen').trigger('liszt:updated'); 
```

根据底层选择组件的值更新所有值。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-13T15:19:30.560

```
var numerictextbox = $("#paymentAmount_" + id).data("kendoNumericTextBox");
    numerictextbox.value("0.00"); 
```

这对我有用。将元素存储在变量中并使用双引号设置值。此外，我无法在 numericTextBox 中输入“test”之类的词...我假设您的意思是作为测试数据。但这也应该对你有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-14T17:11:32.400

我在同样的事情上遇到了麻烦，但是我在没有引号的情况下让它工作......
我只能说它现在似乎工作......

```
 calCalories: function (e) {

        var totalCals = 0;
        totalCals = totalCals + ($("#Carbs").val() * 4);
        totalCals = totalCals + ($("#Protein").val() * 4);
        totalCals = totalCals + ($("#Fat").val() * 9);

        var numerictextbox = $("#Calories").data("kendoNumericTextBox");
        numerictextbox.value(totalCals);
    }, 
```

注意：显然可以使用下面的代码行从事件中获取值

```
e.sender.value() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T12:12:17.810

只需触发剑道数字文本框的更改事件

```
$('#myId').data('kendoNumericTextBox').trigger('change'); 
```

# c# - 向文字控件添加换行符

> ID：14463766
> 
> 赞同：6
> 
> 时间：2013-01-22T16:50:03.363
> 
> 标签：c#, asp.net, webforms

我对 ASP.NET 控件有一些问题，`Literal`因为它没有呈现`<br/>`标记。

代码

```
string strTemp = task.Description.ToString();
lit_description.Text = strTemp.Replace("\r\n", "<br/>"); 
```

输出：

```
LG SERVICE TICKET<br/><br/> <br/><br/>- DATE IN (eg. Feb 11, 2011):<br/><br/>- DATE OUT (eg. Feb 11, 2011):<br/><br/>- Client Has Critical Data (fees will apply):<br/><br/>- Windows Password: <br/><br/>- Accessories:<br/><br/><br/><br/><br/>Client Complaint:<br/><br/><br/><br/> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T16:53:34.777

将其设置[`Mode`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx)为`PassThrough`：

```
<asp:Literal Id="lit_description" Mode="PassThrough"></asp:Literal> 
```

> **PassThrough**控件的内容不被修改。

# php - 使用 CakePHP 分页和可包含行为创建复杂条件

> ID：14463767
> 
> 赞同：0
> 
> 时间：2013-01-22T16:50:03.823
> 
> 标签：php, cakephp, pagination, containable

我正在使用可包含的行为来查看几个表。

```
 $this->paginate = array(
        'contain' => array(
            'Co' => array('fields' => array('ref')),
            'CoItemType' => array('fields' => array('name')),
            'Casing' => array(
                'fields' => array('id','barcode','CONCAT(plant_dot,size_dot,product_line_dot,production_week) as dot'),
                'Customer' => array('fields' => array('company_name')),
            )
        )
    ); 
```

这按预期工作。但是，我将它与 jQuery 数据表和数据表传递条件的方式集成，它没有指定字段。所以我想像这样在包含之外做条件......

```
 'conditions' = array(
        'OR' => array(
            array("Table.field_name LIKE " => '%'.$parameter.'%'),
            array("Table.field_name LIKE " => '%'.$parameter.'%'),
            array("Table.field_name LIKE " => '%'.$parameter.'%')
        )
    ) 
```

当然这是不可能的，因为可包含行为希望您将条件包含在包含数组中的表键下。这令人沮丧，是否有人有解决此问题的解决方案或解决方法？

我正在使用 CakePHP 2.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:47:30.413

使用注释中提到的可链接行为。

# git - 一些 git 标签在 gitk 中不可见

> ID：14463768
> 
> 赞同：1
> 
> 时间：2013-01-22T16:50:05.230
> 
> 标签：git, gitk

在 gitk 视图中，我注意到一些（但不是全部）git 标签丢失。`git tag`显示这些标签，我也可以通过指定这些标签来结帐，因此标签被正确创建。我应该尝试什么来理解和调试这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T17:17:24.377

如果没有该`--all`参数，gitk 只显示当前 HEAD 的父提交。使用此参数调用 gitk 时，您应该会看到包含所有提交（和所有标签）的整个历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-23T10:59:12.867

# gitk <其他> --tags

### gitk <其他> --tags=<模式>

例子：

```
gitk --all --tags=save_201811* 
```

显示我这个月的所有 save_points。

单独使用该`-all`选项，gitk 不一定会显示所有标签。

我经常用 .git 之类的东西标记 git 中的当前状态`git tag save_20181123_1054`。这样，如果我的出现任何问题，我`git rebase`可以恢复当前状态，并且在 rebase 之后，我可以验证（使用`git diff save_20181123_1054`）我有相同的更改（即工作和测试的软件）但更有逻辑地组织。

在 之后`git rebase`，我有一个很好的分支，有完美的修复，但保存标签是我的开发树上的一片垂悬的叶子。

`gitk`一两天后打开不会显示这些标记的悬叶，即使使用 调用也是如此`gitk -all`。

`gitk --tags`是解决方案，但在实践中，您可能也需要 --all 或其他东西以避免仅获得标签。

您可能想尝试...

```
gitk HEAD --tags
gitk <mybranch> --tags
gitk --all --tags 
```

# javascript - javascript获取查询字符串

> ID：14463771
> 
> 赞同：13
> 
> 时间：2013-01-22T16:50:08.087
> 
> 标签：javascript, query-string

> **可能重复：**
> [从javascript中的当前url获取查询字符串？](https://stackoverflow.com/questions/9870512/obtaining-querystring-from-current-url-in-javascript)

我要在网址中的问号之后获取所有内容。我已经看到了一种不需要功能但终生无法找到它的方法。

网址

```
fsdhfbsdfj/index.html?hello 
```

得到

```
hello 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-22T16:50:57.217

利用

```
var query = window.location.search; 
```

如果您想摆脱开头的“？”，请使用

```
var query = window.location.search.slice(1); 
```

[此处描述了位置对象的属性](https://developer.mozilla.org/en-US/docs/DOM/window.location)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-22T16:53:51.500

```
var querystring=window.location.search.substring(1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T17:16:19.103

您的标题说“获取查询字符串”，但您的问题说“获取问号后的所有内容”，这是不同的，可以包括查询字符串和哈希。

我假设当您说“the” url 时，您指的是当前网页。

要获取查询字符串：

```
window.location.search 
```

在第一个之后得到一切？：

```
window.location.href.split("?").slice(1).join("?"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-22T16:51:07.730

您可以在中找到查询字符串`window.location.search`

# sql - 与其他 sql 的输出连接

> ID：14463772
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:50:09.480
> 
> 标签：sql, oracle

我有2张桌子如下`T1 and T2.`

```
T1 has one field as A  and T2  has one field B. 
```

现在我想做以下事情：对于`T1.A`我想加入的每个值`T2.B`

就像是 ：

```
select * from T1 ,(select * from where T2 where T2.B = T1.A) 
```

这个对吗？当我尝试这个时，我收到一条错误消息`T1.A is invalid indentifier`。

我知道我能做到`select * from T1,T2 where T1.A = T2.B`

但是我的用例非常复杂。查询 ( `select * from where T2 where T2.B = T1.A`) 非常复杂。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T16:52:35.673

你只需要`JOIN`表格：

```
select * 
from T1 
inner join T2 
  on T2.B = T1.A 
```

如果您在学习`JOIN`语法方面需要帮助，这里有一个很好[的 joins 可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

我使用了一个`INNER JOIN`将返回在`T1`和之间匹配的行`T2`。即使没有匹配的行，您也可能需要使用`LEFT JOIN`将返回所有行的`T1``T2`

如果您有另一个查询可供选择，那么您可以使用子查询：

```
select * 
from T1 
inner join
( 
   -- place your query here
   select *
   from T2
) T2 
  on T2.B = T1.A 
```

如果您的子查询只返回一列，那么您可以使用：

```
select t1.*, (select t2.col1 from T2 t2 where t2.B = t1.A) 
from T1 t1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T16:52:15.177

除非我弄错了，否则你不能只使用`JOIN`：

```
select * 
from t1 
join t2 on t1.field = t2.field 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:00:00.480

select A,T1.B,(select * from where T2 where T2.B = T1.A) FROM T1 。这有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T16:55:40.047

```
select * from first_table inner join second_table on first_table.X = second_table.Y 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T16:55:25.183

你可以做

```
select * 
from T1 
inner join T2 
  on T2.B = T1.A 
```

正如其他人所说。但是，仅出于可读性考虑，此“ON”版本是首选。

你也可以继续使用

```
select * from T1,T2 where T1.A = T2.B 
```

优化器会弄清楚，并做同样的事情，因为查询是等价的。

您可以继续使用它，因为它没有任何问题。

# javascript - 谷歌地图渲染不正确，无法用已经给出的答案解决这个问题

> ID：14463778
> 
> 赞同：1
> 
> 时间：2013-01-22T16:50:28.443
> 
> 标签：javascript, html, maps

我遇到了一个关于地图的问题。我正在使用 Joomla 组件 Listbingo，并制作了一个带有隐藏 div 和步骤的订单。

在第二步中，谷歌地图必须出现，但它没有以正确的方式呈现。有些部分是灰色的，位置不正确。现在我了解到谷歌地图对隐藏的 div 不满意，但我无法用已经给出的答案解决这个问题。

```
<script
    src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=<?php echo $this->params->get('map_api_key');?>"
    type="text/javascript"></script>
<script type="text/javascript">
//<!--
    var map;
    var marker;
    var markeradded=false;
    var markerfixed=false;
    var current_point;
    var catIcon;

    function initialize() 
    {
      if (GBrowserIsCompatible())
      {
        map = new GMap2(document.getElementById("map_canvas"));
        map.setUIToDefault();
         map.disableScrollWheelZoom();
        geocoder = new GClientGeocoder();   

      }
    }

    window.addEvent('domready',function()

    {

        initialize();
        //var mapSlider = new Fx.Slide('gb_maplocator', {duration: 1000});
        var mapSlider = document.getElementById('gb_maplocator');
        //var mapSlider = $('gb_maplocator');

        <?php if( $this->data->published==0){?>
            mapSlider.style.visibility = 'hidden';
            mapSlider.style.height = '0px';
            mapSlider.style.overflow = 'hidden';   
        <?php } ?>

        $$('.gb_map_controls').addEvent('click',function(){
            if(this.getProperty('value')==1)
            {
                mapSlider.style.visibility = 'visible';   
                mapSlider.style.height = 'auto';

            }
            else if(this.getProperty('value')==0)
            {
                mapSlider.style.visibility = 'hidden';
                mapSlider.style.height = '0px';
                mapSlider.style.overflow = 'hidden';   
            }
        });

        $('btnAddtomap').addEvent('click',
            function(e) {           
                $('map_level').value=map.getZoom();         
                $('map_glat').value=current_point.lat();
                $('map_glng').value=current_point.lng();
        });

        GEvent.addListener(map, "zoomend",
            function(oldlevel,newlevel) {                   
                $('map_level').value=newlevel;
        });

        GEvent.addListener(map, "dragend",
            function() {                    
                current_point=map.getCenter();
        });

        <?php 
        if( $this->pin->map_image )
        {
        ?>
            catIcon = new GIcon();              
            catIcon.image = '<?php echo JUri::root().$this->pin->map_image.".".$this->pin->extension;?>';
            catIcon.shadow = '<?php echo JUri::root().$this->pin->shadow_image.".".$this->pin->extension;?>';           
            //catIcon.iconSize = new GSize(25.0, 32.0);
            //catIcon.shadowSize = new GSize(42.0, 32.0);
            catIcon.iconAnchor = new GPoint(12.0, 16.0);
            catIcon.infoWindowAnchor = new GPoint(12.0, 16.0);
            map.disableScrollWheelZoom();

        <?php
        }
        if(abs($this->data->glat)==0&&abs($this->data->glng)==0)
          {
            $country=$mainframe->getUserState($option."countrytitle");
            $region=$mainframe->getUserState($option."regiontitle");

            $address= array();
            if($region!= JText::_('ALL') && !empty($region)){
                $address[]=$region;
            } 

            if($country!= JText::_('ALL') && !empty($country)){
                $address[]=$country;
            } 
            array_filter ($address);

            if(count($address)>0)
            {
            ?>
                showAddress('<?php echo implode(',',$address)?>');
            <?php
            }
            else
            {
            ?>          
                showAddress('<?php echo $this->params->get('map_default_address','Brisbane, Australia');?>');
            <?php
            }
        }
        else
        {
            if( ! $this->pin->map_image && $this->data->map_image )
            {
            ?>
                catIcon = new GIcon();
                catIcon.image = '<?php echo JUri::root().$this->data->map_image.".".$this->data->extension;?>';
                catIcon.shadow = '<?php echo JUri::root().$this->data->shadow_image.".".$this->data->extension;?>';
                //catIcon.iconSize = new GSize(25.0, 32.0);
                //catIcon.shadowSize = new GSize(42.0, 32.0);
                catIcon.iconAnchor = new GPoint(12.0, 16.0);
                catIcon.infoWindowAnchor = new GPoint(12.0, 16.0);

            <?php }?>

            current_point=new GLatLng(<?php echo $this->data->glat;?>,<?php echo $this->data->glng;?>);
            map.setCenter(current_point,<?php echo $this->data->level;?>);
            marker = new GMarker(current_point,{icon:catIcon,draggable:true});

            GEvent.addListener(marker, "dragend",
                function(latlng) {
                    current_point = latlng;
                    $('map_level').value=map.getZoom();
                    $('map_glat').value=latlng.lat();
                    $('map_glng').value=latlng.lng();

            });

            marker.disableDragging();
            map.addOverlay(marker);

            markeradded=true;
            markerfixed=true;
            $('addMarkerButton').disabled=true;
            $('addMarkerButton').setHTML("<?php echo JText::_('REMOVE_MARKER');?>");
            $('fixMarkerButton').setHTML("<?php echo JText::_('UNFIX_MARKER');?>");
            $('map_level').value=map.getZoom();         
            $('map_glat').value=current_point.lat();
            $('map_glng').value=current_point.lng();
            <?php if($this->data->published==0){?>

                mapSlider.style.visibility = 'hidden';
                mapSlider.style.height = "0px";
                mapSlider.style.overflow = 'hidden';   
        <?php }?>

            <?php 
        }
        ?>
        if(markeradded)
        {
            $('fixMarkerButton').disabled=false;
        }
        else
        {
            $('fixMarkerButton').disabled=true;
        }
    });

    window.addEvent('unload',function(){GUnload()});
    //-->
    </script>
<div class="gb_madata_publish">

<label><?php echo JText::_('Activeer Google Maps');?>:</label><div  class="gb_madata_publish_control"><?php echo $this->lists['status'];?></div>
</div>

<div class="gb_map_locator" id="gb_maplocator">
<a id="btnAddtomap"><?php echo JText::_('LOCATE_ADDRESS_TO_MAP');?></a>
<fieldset class="adminform"><input type="hidden" name="glat"
    id="map_glat" /> <input type="hidden" name="glng" id="map_glng" /> <input
    type="hidden" name="level" id="map_level" />

<div id="map_canvas" style="width: 310px; height: 310px"></div>
<br />
<div class="mapbuttons"><a id="addMarkerButton"><?php echo JText::_('ADD_MARKER');?></a>
<a id="fixMarkerButton"><?php echo JText::_('FIX_MARKER');?></a></div>
</fieldset>

</div> 
```

我希望有人可以帮助我，已经坚持了几个星期......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T15:44:23.327

解决了 ：）

改变了这个： map = new GMap2(document.getElementById("map_canvas")); 在：map = new GMap2(document.getElementById("map_canvas"),{ size: new GSize(430, 315) });

# vb.net - 在编译时引用 COM 库 格式较晚

> ID：14463787
> 
> 赞同：0
> 
> 时间：2013-01-22T16:50:50.320
> 
> 标签：vb.net, binding, reference, compile-time

我有一个不寻常的场景，我需要使用第三方库。

该库与产品的最后 3 个版本一起打包。通常这意味着我的软件可以与所有这些版本一起使用，我会引用这三个版本中最旧的版本（在编译时），它适用于所有三个版本。然而情况并非如此，这意味着如果我想对库使用适当的“引用”，我需要分别编译每个版本。

我的第一个选择是将我所有的特定类型代码转换为使用后期绑定格式，例如。

```
Dim item as new documentItem          ' this is not real code, just pseudo... 
```

到

```
Dim item as object = createobject("clsid.documentItem") 
```

我**绝对讨厌**做这种后期绑定格式并失去编译时间检查。特别是因为这个库很大而且非常复杂。

第二种方法似乎不可能，即安装所有 3 个产品并分别引用所有库。似乎他们“尝试”使其兼容并且 COM 组件的唯一标识符是相同的。除非有人可以解释如何在具有重叠 CLSID 和名称的同一个 DLL 中导入同一个库 3 次。（这也意味着需要对每个目标应用程序使用不同的包装器进行大量或代码修改）

**问题：** 有谁知道处理这种情况的任何其他方式？我的目标是保留编译时间检查和自动完成。可能以某种方式在客户端创建互操作库。

**更新：** 我已经通过我自己的包装 DLL 完成了对该库的所有访问，以将功能整合到一个项目中。因此，我暂时将我创建的整个包装库复制到一个新的 DLL 中，并使用正则表达式进行大规模转换为后期绑定格式。使用相同的根命名空间，我可以轻松地在它们之间切换。在这种格式中，我可以针对使用严格编译器规则的一个版本进行大部分开发。在那里完成更改并证明我将副本移动到后期绑定库并删除所有特定引用。到目前为止，这似乎是处理它的最佳方法。要发布，我将库切换到后期绑定版本。到目前为止，这似乎是一种在程序中保持尽可能多的编译时间检查的好方法，而到目前为止，额外的工作量相当少，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:54:36.460

我找到了解决我自己问题的方法。

我所做的是注册 COM 组件的每个版本并重建我的项目。这导致 .NET 为 COM 组件创建互操作库。

然后我将新的“interop.component.dll”复制到一个子目录中，并在其中将其重命名为“Version1.Component.dll”

重复这些步骤，直到创建所有 4 个互操作库，例如

*   “版本 1.Component.dll”
*   “版本 2.Component.dll”
*   “版本 3.Component.dll”
*   “版本 4.Component.dll”

在主 DLL 中将每个标记为嵌入式资源

在 References 中为 COM 库设置 Copy Local = FALSE。现在，当在代码中请求组件类时，当 .NET 尝试按需加载互操作库时，这会导致找不到互操作库。

在主 DLL 的模块中，我添加以下代码...

```
Public WithEvents CurDomain As AppDomain = AppDomain.CurrentDomain

Private Function AssemblyResolve(sender As Object, args As System.ResolveEventArgs) As System.Reflection.Assembly Handles CurDomain.AssemblyResolve
Dim resourceName As String = New Reflection.AssemblyName(args.Name).Name & ".dll"
Dim curAsm As Reflection.Assembly = Reflection.Assembly.GetExecutingAssembly
If resourceName.EndsWith("Component.dll") Then
    'supply the correct resource
    resourceName = ver & "." & resourceName  ' ver is set to the currently desired version.
    Using stc As IO.Stream = curAsm.GetManifestResourceStream(resourceName)
        Dim bt(CInt(stc.Length - 1)) As Byte
        stc.Read(bt, 0, CInt(stc.Length))   'get to a new byte array
        Return Reflection.Assembly.Load(bt) 'load actual assembly from decompressed stream data.
    End Using
End If
End Function 
```

每当 .NET 无法解析允许您手动提供它的 DLL 时，就会触发上述代码。

现在，所有 4 个略有不同的互操作库版本都可以与机器上注册的任何版本的 COM 组件一起使用。

# android - 使用大部分堆的 Android 应用程序，没有成功识别内存泄漏

> ID：14463788
> 
> 赞同：1
> 
> 时间：2013-01-22T16:50:50.553
> 
> 标签：android, garbage-collection, dalvik, android-memory

我有一个相对轻量级的应用程序，它似乎正在使用大部分堆内存（在我看来），并且在垃圾收集后它不会缩小。

通过使用 Eclipse 内存分析器，我无法识别任何内存泄漏。我对这个工具的了解虽然非常有限。

来自 LogCat 的片段：

（请注意，这只是日志转储中的一小部分。无论我在应用程序中做什么，LogCat 似乎都会持续输出垃圾收集消息。不过，可用堆的数量保持相对稳定，这表明（对我而言）没有实际的内存泄漏？）

```
01-22 17:04:51.672: D/dalvikvm(16274): GC_CONCURRENT freed 721K, 10% free 8074K/8968K, paused 4ms+7ms, total 33ms
01-22 17:04:53.742: D/dalvikvm(16274): GC_CONCURRENT freed 523K, 12% free 7977K/8968K, paused 4ms+5ms, total 29ms
01-22 17:04:54.012: D/dalvikvm(16274): GC_CONCURRENT freed 457K, 12% free 7941K/8968K, paused 3ms+2ms, total 29ms
01-22 17:04:56.432: D/dalvikvm(16274): GC_CONCURRENT freed 237K, 10% free 8116K/8968K, paused 2ms+2ms, total 22ms
01-22 17:04:58.632: D/dalvikvm(16274): GC_CONCURRENT freed 445K, 10% free 8094K/8968K, paused 3ms+3ms, total 33ms
01-22 17:05:00.332: D/dalvikvm(16274): GC_CONCURRENT freed 499K, 11% free 8013K/8968K, paused 1ms+10ms, total 33ms
01-22 17:05:00.582: D/dalvikvm(16274): GC_CONCURRENT freed 487K, 12% free 7916K/8968K, paused 3ms+6ms, total 38ms
01-22 17:05:02.382: D/dalvikvm(16274): GC_CONCURRENT freed 223K, 10% free 8107K/8968K, paused 3ms+3ms, total 23ms
01-22 17:05:03.882: D/dalvikvm(16274): GC_CONCURRENT freed 436K, 10% free 8107K/8968K, paused 9ms+12ms, total 76ms
01-22 17:05:05.392: D/dalvikvm(16274): GC_CONCURRENT freed 528K, 11% free 8059K/8968K, paused 2ms+3ms, total 35ms
01-22 17:05:06.962: D/dalvikvm(16274): GC_CONCURRENT freed 489K, 11% free 7998K/8968K, paused 4ms+3ms, total 32ms
01-22 17:05:07.212: D/dalvikvm(16274): GC_CONCURRENT freed 487K, 12% free 7928K/8968K, paused 3ms+3ms, total 29ms
01-22 17:05:08.832: D/dalvikvm(16274): GC_CONCURRENT freed 226K, 10% free 8094K/8968K, paused 3ms+3ms, total 22ms
01-22 17:05:12.152: D/dalvikvm(16274): GC_CONCURRENT freed 453K, 10% free 8080K/8968K, paused 4ms+3ms, total 48ms 
```

以上是“大量使用”的结果，涉及在按钮上发送垃圾邮件和多次更改方向。我担心的是只有大约 10% 的堆似乎是空闲的/留下来进行进一步的扩展。

供您参考，表示当前片段布局的 XML 文件（在上述输出时）是一个内部带有 TableLayout 的 ScrollView，由大约 25 个 TableRow 元素组成，也许这就是如此大的堆内存占用的原因？

这有什么好担心的吗？

如果您喜欢查看我的一些代码，请告诉我。提前致谢。

**更新：**

该应用程序基本上只是一个包含两个片段的 Activity。基于用户交互，所述片段之一与其他片段交换。将其视为典型的菜单内容应用程序（如默认的 Android 联系人应用程序）。左侧的 MenuFragment（联系人列表）和右侧的一些 ContentFragment（联系人详细信息）。到目前为止，除了设置 UI 行为之外，还没有涉及太多功能。后台没有发生任何事情，也没有保存状态或类似情况。我基本上专注于确保当我从 MenuFragment 中选择一个项目时显示正确的片段，当片段启动时绘制正确的布局，并且当用户按下后退按钮时显示正确的片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:46:03.197

堆将根据您的应用程序的需要自动调整其大小。小堆在 GC 上更快，因此如果您不需要，Android 不会从 64 MB 堆开始。当您的应用程序使用大量当前堆时，堆对于 Android 4.x 应用程序来说非常小。一个简单的 4.x 应用程序将使用 7Mb。从我看，你很好。

# mono - Mono：错误 702532 - DuplexClientBase 通道初始化损坏

> ID：14463790
> 
> 赞同：0
> 
> 时间：2013-01-22T16:50:55.640
> 
> 标签：mono

有什么办法可以解决[这个错误](https://bugzilla.novell.com/show_bug.cgi?id=702532)并`DuplexClientBase`正常工作吗？

# android - Android活动不在手机上旋转（但在平板电脑上）

> ID：14463792
> 
> 赞同：1
> 
> 时间：2013-01-22T16:50:59.587
> 
> 标签：android, rotation, orientation, admob, android-viewpager

我有一个在某些设备上不旋转但在其他设备上旋转的活动。

具体来说，它在迄今为止测试过的平板电脑上旋转，但在手机上不旋转。我的其他具有相同清单参数的活动确实按预期旋转。

此视图具有 viewpager 和 admob 广告。这些布局元素是否存在可以覆盖旋转参数的已知错误/功能？我没有说方向应该在清单或代码中坚持横向或纵向。

如果没有任何已知的东西，我可以稍后发布代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T17:22:27.623

答案是这个主题

`android:theme="@android:style/Theme.Translucent.NoTitleBar"`

不允许在某些屏幕尺寸上旋转

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T16:55:11.750

在清单中插入活动参数 android:configChanges="orientation" 而不是插入 screenOrientation 参数。

# android - Android 从网站读取文本

> ID：14463793
> 
> 赞同：0
> 
> 时间：2013-01-22T16:50:59.327
> 
> 标签：android, string, url

我对Android编程很陌生，但是我习惯于为iOS编程...

现在在 iOS 中你有了 NSString stringWithContentOfURL 的功能。现在我的问题是，如果java中也有类似的选项......？在谷歌搜索时，我遇到了一些例子，但使用它们我的应用程序总是崩溃......

我使用了这样的代码：http: [//www.coderzheaven.com/2011/07/17/how-to-read-webpage-contents-as-a-string-in-android/](http://www.coderzheaven.com/2011/07/17/how-to-read-webpage-contents-as-a-string-in-android/)但它一直在崩溃......可以你帮帮我好吗？

谢谢！

编辑：LogCat 错误：

```
01-22 19:34:12.718: E/AndroidRuntime(5481): FATAL EXCEPTION: main
01-22 19:34:12.718: E/AndroidRuntime(5481): android.os.NetworkOnMainThreadException
01-22 19:34:12.718: E/AndroidRuntime(5481): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
01-22 19:34:12.718: E/AndroidRuntime(5481): at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
01-22 19:34:12.718: E/AndroidRuntime(5481): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
01-22 19:34:12.718: E/AndroidRuntime(5481): at java.net.InetAddress.getAllByName(InetAddress.java:220)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:653)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at com.example.test4.DieActivity.meldeAn(DieActivity.java:150)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at com.example.test4.DieActivity$1.onClick(DieActivity.java:56)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at android.view.View.performClick(View.java:3511)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at android.view.View$PerformClick.run(View.java:14105)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at android.os.Handler.handleCallback(Handler.java:605)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at android.os.Looper.loop(Looper.java:137)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at android.app.ActivityThread.main(ActivityThread.java:4424)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at java.lang.reflect.Method.invokeNative(Native Method)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at java.lang.reflect.Method.invoke(Method.java:511)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-22 19:34:12.718: E/AndroidRuntime(5481):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:40:04.000

您已尝试在 UI 线程上执行（网络）IO。这是不允许的。为什么？因为如果您挂起 UI 线程，系统将向用户发布一个 ANR（活动无响应）对话框。

您必须异步执行 IO，

```
new AysyncTask<String,Void,String>() {
            protected String doInBackground(String... urls) {
              String url = urls[0];
              // do network operation, get result in a string (for example)
              return resultString;
            }

            protected void onPostExecute(String result) {
              JSONObject jo = new JSONObject(result);
              // update UI with the results of the network call here
            }
        }.execute(aUrl); 
```

这对于网络 IO 尤其重要，但对于磁盘 IO 也是如此。看看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)详情。恕我直言，界面`AsyncTask`有点迟钝。

没有什么特别之处`AsyncTask`，它围绕创建线程和根据结果更新用户界面包装了一个模式。在过去，我们曾经这样做过，

```
new Thread(new Runnable() { 
  @Override
  public void run() {
    // do network operation
    runOnUiThread(new Runnable() {
      @Override
      public void run() {
        // update UI thread here
      }
    });
  }
}}.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:39:54.903

Android 告诉你你不应该在 UI 线程上进行网络操作。它不希望您阻塞线程，并且有充分的理由。

尝试使用 an`AsyncTask`代替。将您的 HTTP 请求代码放入`doInBackground()`方法中并更新方法`TextView`中的`onPostExecute()`。

请记住，您**不能**`doInBackground()`从该方法访问 UI 线程。

# asp.net-mvc-4 - Asp net MVC 4，创建一个简单的论坛

> ID：14463798
> 
> 赞同：1
> 
> 时间：2013-01-22T16:51:17.693
> 
> 标签：asp.net-mvc-4

我对 asp net Mvc 非常陌生，我正在尝试在 mvc 4 中创建一个简单的论坛。我可以创建和列出线程和帖子，但我似乎无法弄清楚如何将新帖子添加到现有线程。换句话说，我希望能够将多个帖子连接到特定的`ThreadId`.

那么实现这一点的最佳方法是什么，我应该将一个值传递`@ActionLink`给我`PostController Create method`的`ThreadId`值吗？或者我可以在我的 PostController 中以某种方式专门处理这个问题吗？非常感谢任何代码示例或提示。

我有以下课程：

```
public class Thread
{
    public int ThreadId { get; set; }
    public DateTime ? PostDate { get; set; }
    public string ThreadText { get; set; }
    public string ThreadTitle { get; set; }
    public virtual UserProfile UserProfile { get; set; }

    public virtual ICollection<Post> Posts { get; set; }
}    

public class Post
{        
    public int PostId { get; set; }
    public string PostTitle { get; set;}
    public string PostText { get; set; }
    public DateTime ? PostDate { get; set; }
    public virtual UserProfile UserProfile { get; set; }

    public virtual Thread Thread { get; set; }
    [System.ComponentModel.DataAnnotations.Schema.ForeignKey("Thread")]
    public int ThreadId { get; set; }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:36:16.420

有几种方法可以实现您想要的。在这里，我向您介绍一种使用强类型视图的方法。

我假设您有一个名为**ViewThreadDetail**的视图，其中包含属于给定**threadId**的帖子列表，您也可以在其中提交新帖子。

线程控制器.cs：

```
public class ThreadDetailViewModel
{
    public Thread Thread { get; set; }

    public Post NewPost { get; set; }
}

public ActionResult ViewThreadDetail(int id)
{
    // load thread from database
    var thread = new Thread(){ ThreadId = id, ThreadTitle = "ASP.Net MVC 4", Posts = new List<Post>()};
    // assign ThreadId of New Post
    var newPost = new Post() { PostTitle = "", PostText = "", ThreadId = id };

    return View(new ThreadDetailViewModel() { Thread = thread, NewPost = newPost });
} 
```

查看ThreadDetail.cshtml

```
@model MvcApplication1.Models.ThreadDetailViewModel

@{
    ViewBag.Title = "ViewThreadDetail";
}

<h2>ViewThreadDetail</h2>

<p>List of Posts:</p>
@foreach (var post in Model.Thread.Posts)
{
    <div>@post.PostTitle</div>
}

<p>Add a Post:</p>
@Html.Action("NewPost", "Post", Model.NewPost) 
```

您将需要一个名为 NewPost 的 PartialView 来提交新帖子：

```
@model MvcApplication1.Models.Post

@using(Html.BeginForm("Add", "Post"))
{
    @Html.LabelFor(a=>a.PostTitle);
    @Html.TextBoxFor(a => a.PostTitle);

    @Html.LabelFor(a => a.PostText);
    @Html.TextBoxFor(a => a.PostText);

    //A hidden field to store ThreadId
    @Html.HiddenFor(a => a.ThreadId);

    <button>Submit</button>
} 
```

PostController.cs

```
public ActionResult NewPost(Post newPost)
{
     return PartialView(newPost);
}

public ActionResult Add(Post newPost)
{
     // add new post to database and redirect to thread detail page
     return RedirectToAction("ViewThreadDetail", "Thread", new { id = newPost.ThreadId });
} 
```

# jasper-reports - 在 iReport 中测试 JasperReports 补丁

> ID：14463800
> 
> 赞同：0
> 
> 时间：2013-01-22T16:51:23.207
> 
> 标签：jasper-reports, ireport, patch

我想测试我为 JasperReports 制作的补丁 - 如何让 iReport 使用打补丁的 JAR？我是否必须获取 iReport 源，放入修补的 JAR 并重新编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:16:19.513

我认为您不需要重新编译。jasperreports JAR 在里面`[install_dir]\ireport\modules\ext`。我想在那里替换 JAR 就可以了。

# android - 单击时相机手电筒项目已停止

> ID：14463804
> 
> 赞同：1
> 
> 时间：2013-01-22T16:51:28.157
> 
> 标签：android

我正在使用相机手电筒项目。

它加载到模拟器上，但是当我单击“打开”按钮时，它意外停止了。这是猫日志[https://dl.dropbox.com/u/15065300/logcat1.png](https://dl.dropbox.com/u/15065300/logcat1.png)

这是代码：

```
public class FlashLight extends Activity {

    private final static String LOG_TAG = "FlashLight";  
    private Button mOnBtn;   
    private Camera mCamera;    
    private boolean isActive;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

      //this will be inside your onCreate...
        mOnBtn = (Button) findViewById(R.id.on_btn);
        mOnBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                flipSwitch();
                processClick();

            }
        });
   }

    //these will be outside your onCreate
    public void flipSwitch() {
        isActive = !isActive;
    }

    @Override
    protected void onResume() {
        super.onResume();
        try{
            mCamera = Camera.open();
            mCamera.startPreview();
            Toast.makeText(getApplicationContext(),"Camera is  present", Toast.LENGTH_LONG).show();

        } catch( Exception e ){
            Log.e(LOG_TAG, "Impossible d'ouvrir la camera");
        }
    }

    @Override
    protected void onPause() {
        if( mCamera != null ){
            mCamera.release();
            mCamera = null;
        }
        super.onPause();
    }

    public void processClick() {
        if(isActive) {
            Parameters params = mCamera.getParameters();
            params.set("flash-mode", "torch");
            mCamera.setParameters( params );
            mCamera.startPreview();
        }

        else { 

             Parameters params = mCamera.getParameters();
             params.set("flash-mode", "off");
             mCamera.setParameters( params );
             mCamera.stopPreview();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:07:23.807

您的代码中有`NullPointerException`第 74 行`Flashlight.java`。

当它的值为空时，它可能是`mCamera` 或者正在使用。`params`检查这些值的初始化/分配。

# javascript - 谁能解释一下这两个循环之间的区别？

> ID：14463808
> 
> 赞同：4
> 
> 时间：2013-01-22T16:51:45.640
> 
> 标签：javascript

[http://jsperf.com/jquery-each-vs-for-loop/108](http://jsperf.com/jquery-each-vs-for-loop/108)

```
for (var b = a[0], len = a.length; len; b = a[--len]) {
  newArray.push(
    b
  );
} 
```

**和**

```
for (var i = 0, len = a.length; i < len; i++) {
  newArray.push(
    a[i]
  );
} 
```

1.  根据 jsref，它说第一个更快。为什么？
2.  任何人都可以向我解释一下与传统方式相比它在做什么的 for 循环吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:00:27.353

你的第一个例子只是做了一些非常不同的事情。一探究竟：

```
var a = [1,2,3,4],
    newArray = [];
for (var b = a[0], len = a.length; len; b = a[--len]) {
    newArray.push(b);
}

> newArray
[1, 4, 3, 2] 
```

您的第二个示例产生预期的`[1, 2, 3, 4]`.

* * *

如果您需要了解算法，将`for`-notation 转换为 while-loops 并扩展递减和递增运算符可能会更容易：

```
/* first example */
var b = a[0],
    len = a.length;
while (len) {
    newArray.push(b);
    len = len-1;
    b = a[len];
}

/* second example */
var i = 0,
    len = a.length;
while (i < len) {
    newArray.push( a[i] );
    i = i+1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:09:59.687

我认为第一个循环的主要收获`a`是被缓存，`len`然后用作单个布尔值：通过简化循环条件可以获得一点时间。然而！它不会产生与输出相同的数组。

假设您在 a 中有十个元素：[0,1,2,3,4,5,6,7,8,9] - 循环将首先处理 a[0]，然后是 a[--len]，这在我们的示例中是 a[9]。您的最终结果将是 newArray = [0, 9, 8, 7, 6, 5, 4, 3, 2, 1]。

所以为什么它更快并不重要，因为它做错了事。

# vim - 安装fuzzyfinder vim 插件

> ID：14463815
> 
> 赞同：0
> 
> 时间：2013-01-22T16:52:11.540
> 
> 标签：vim, vim-plugin, fuzzyfinder

我在 ~/.vimrc 目录中解压缩了 vim-fuzzyfinder 和 vim-l9 包

```
[shetye@dev03 ~/.vim/vim-fuzzyfinder]$ls
autoload  doc  plugin
[shetye@dev03 ~/.vim]$cd vim-l9/
[shetye@dev03 ~/.vim/vim-l9]$ls
autoload  doc  plugin 
```

我也尝试在我的主目录中复制相同的内容。但是 vim 没有检测到这个插件。

```
:fuf-usage
E492: Not an editor command fuf-usage

:FufBuffer
E492: Not an editor command FufBuffer 
```

我尝试将目录 ~/.vim/vim-fuzzyfinder, ~/.vim/vim-l9 添加到 $PATH 环境变量。那也没有帮助。

关于如何让模糊查找器运行的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:01:27.037

您应该正确安装它以使其工作。这是您应该具有的文件结构：

```
~/
+-.vim/
 +-autoload/
 +-doc/
 +-plugin/ 
```

一旦你达到了这一点，你应该在 Vim 中输入这个命令：

```
:helptags ~/.vim/doc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:20:35.363

您创建的`.vim`目录结构是传统 Vim（所有插件混合到单个`.vim/autoload/`,`.vim/plugin/`等目录中）和由*Pathogen*或*Vundle*`.vim/bundle/<pluginname>/autoload/`等包管理器创建的分离（到 ）之间的混合。

 **要么坚持原来的布局（即使有很多新包结构的支持者，旧的也可以正常工作；卸载插件并不容易），或者安装提到的包管理器之一并遵守他们的规定布局。**

# rest - 如何使用逗号分隔 1 次或多次的“模板”样式参数设置 SoapUI 以提供 REST 服务？

> ID：14463822
> 
> 赞同：1
> 
> 时间：2013-01-22T16:52:29.957
> 
> 标签：rest, parameters, soapui

我正在使用 SoapUI 的 REST 服务进行一些测试。有关模板参数的示例，请参见此链接：http: [//www.soapui.org/REST-Testing/understanding-rest-parameters.html](http://www.soapui.org/REST-Testing/understanding-rest-parameters.html)

我的请求需要如下所示：

```
http://www.myservice.com/endpoint/parameter1/parameter2a,parameter2b/parameter3 
```

对于 URL 的“parameter2”部分，如何使模板样式参数出现 >=1 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T14:19:41.497

用作默认值并使用`${#TestCase#Parameter2}`Groovy 脚本构建字符串，并使用以下内容设置属性：

```
testRunner.testCase.setPropertyValue( "Parameter2", "p2a,p2b,p3c" ) 
```

# tree - d3可以画pfam域吗

> ID：14463828
> 
> 赞同：0
> 
> 时间：2013-01-22T16:52:50.227
> 
> 标签：tree, d3.js, protein-database

只是一个快速的问题。我可以使用 d3 来绘制如下所示的蛋白质结构域吗？

[蛋白质结构域的图像](http://www.mrc-lmb.cam.ac.uk/rlw/text/bioinfo_tuto/images/graphic_view.jpg)

我的计划是将这些小蛋白质结构域附加到一棵树上，这看起来很棒。

提前非常感谢！

# sql - 使用级联连接比较时标识符无效

> ID：14463832
> 
> 赞同：0
> 
> 时间：2013-01-22T16:53:00.050
> 
> 标签：sql, oracle, plsql

这是我的查询。v.location 是一个包含楼层和房间信息的列，即 FL 2 RM 204。我需要将它与 mv_rooms 表进行比较，该表将房间和楼层分成两个单独的列。

```
select v.location, v.customer_name, v.street_name
from voip_validate v, mv_rooms r, mv_buildings b
left outer join voip_validate
on v.location = 'FL ' || r.floor || ' RM ' || r.room
where 'FL ' || r.floor || ' RM ' || r.room is null
and b.dps_number = r.dps_number; 
```

当我运行查询时，我收到错误：

ORA-00904: "R"."ROOM": 无效标识符 00904\. 00000 - "%s: 无效标识符" *原因:
*操作: 行错误: 4 列: 47

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:59:26.947

您的 where 子句肯定有问题，因为您需要测试 floor 字段和 room 字段是否为 NULL，而不是整个字符串。

```
select v.location, v.customer_name, v.street_name
from voip_validate v, mv_rooms r, mv_buildings b
left outer join voip_validate
on v.location = 'FL ' || r.floor || ' RM ' || r.room
where (r.floor is null or r.room is null)
and b.dps_number = r.dps_number; 
```

楼层和/或房间是整数数据类型可能存在问题。将它们转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:01:35.127

您正在混合使用 oracle 连接语法和 ANSI。

```
select v.location, v.customer_name, v.street_name
  from voip_validate v
       left outer join mv_rooms r
                    on v.location = 'FL ' || r.floor || ' RM ' || r.room
       left outer join mv_buildings b
               on b.dps_number = r.dps_number
 where r.room is null 
```

你的 where 子句也是完全错误的，因为它永远不能为空。

```
where 'FL ' || r.floor || ' RM ' || r.room is null 
```

您是否打算返回“V”中没有匹配行的行？

# deployment - 在网络外部署 SSIS (SQL Server 2012) 项目

> ID：14463839
> 
> 赞同：13
> 
> 时间：2013-01-22T16:53:22.297
> 
> 标签：deployment, ssis, sql-server-2012

我在我的 PC 上构建了一个 SSIS 项目，并在执行包时连接到我们网络外部的 SQL 2012 服务器（通过 SQL 身份验证）。现在是时候将项目部署到同一台服务器了，但我碰壁了。在通过内置部署向导时，我输入服务器名称（就像我输入它以使用连接管理器连接到数据库一样）并收到“不受信任的域”错误（它需要 Window 的身份验证而不是 SQL 身份验证）。

我认为我在项目中使用参数设置特定于环境的值也可能是相关的。

如何将 SSIS 项目部署到网络外的 SQL Server？

我还应该补充一点，在我的搜索中，我确实遇到过有人正在努力通过 VPN 连接来做到这一点（没有发布解决方案），这通常是如何完成的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T17:23:26.073

您有 3 个工具用于将 .ispac 文件部署到 SSISDB 目录中。

1.  ISDeploymentWizard.exe
2.  [托管对象模型](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.integrationservices.aspx)
3.  TSQL

您已经在使用该向导，但由于身份验证问题而无法正常工作。我认为即使使用您的 MOM 方法，您仍然会遇到身份验证问题。这留下了 TSQL 方法，并且由于您具有有效的登录，因此希望这将起作用。

以下代码将序列化您的 .ispac，如果部署文件夹不存在，则创建部署文件夹，部署项目，然后分配参数值。

在 SSMS 中，您需要将模式更改为 SQLCMD 模式，该模式在查询菜单下可用。完成此操作后，按 Ctrl-Shift-M 以调出宏，它将允许您指定可以找到 .ispac 文件的位置。

```
USE SSISDB
GO

IF ('$(isPacPath)' = '$' + '(isPacPath)')
BEGIN
    THROW 50000, N'This script must be run in SQLCMD mode.', 1;
END
GO

-- You must be in SQLCMD mode
-- setvar isPacPath "C:\sandbox\SSDTDeploy\TSQLDeploy\bin\Development\TSQLDeploy.ispac"
:setvar isPacPath "<isPacFilePath, nvarchar(4000), C:\sandbox\SSDTDeploy\TSQLDeploy\bin\Development\TSQLDeploy.ispac>"

DECLARE
    @folder_name nvarchar(128) = 'TSQLDeploy'
,   @folder_id bigint = NULL
    -- this must match the ispac
,   @project_name nvarchar(128) = 'TSQLDeploy'
,   @project_stream varbinary(max)
,   @operation_id bigint = NULL;

-- Read the zip (ispac) data in from the source file
SELECT
    @project_stream = T.stream
FROM
(
    SELECT 
        *
    FROM 
        OPENROWSET(BULK N'$(isPacPath)', SINGLE_BLOB ) AS B
) AS T (stream);

-- Test for catalog existences
IF NOT EXISTS
(
    SELECT
        CF.name
    FROM
        catalog.folders AS CF
    WHERE
        CF.name = @folder_name
)
BEGIN
    -- Create the folder for our project
    EXECUTE [catalog].[create_folder] 
        @folder_name
    ,   @folder_id OUTPUT;
END

-- Actually deploy the project
EXECUTE [catalog].[deploy_project] 
    @folder_name
,   @project_name
,   @project_stream
,   @operation_id OUTPUT;

-- Check to see if something went awry
SELECT
    OM.* 
FROM
    catalog.operation_messages AS OM;

-- Use this to set parameters
-- http://msdn.microsoft.com/en-us/library/ff878162.aspx
EXECUTE catalog.set_object_parameter_value 
    -- Use the value 20 to indicate a project parameter 
    -- or the value 30 to indicate a package parameter
    @object_type = 20 
,   @folder_name = @folder_name
,   @project_name = @project_name
,   @parameter_name = N'' -- nvarchar(128)
,   @parameter_value = NULL -- sql_variant
,   @object_name = N'' -- nvarchar(260)
,   @value_type = '' -- char(1)
--  Use the character V to indicate that parameter_value is a literal value 
-- that will be used by default if no other values are assigned prior 
-- to execution. 
-- Use the character R to indicate that parameter_value is a referenced value 
-- and has been set to the name of an environment variable. 
-- This argument is optional, the character V is used by default 
```

如果您参加了 SQL Pass 峰会 2012 会议，我在关于[2012 部署模型](http://www.sqlpass.org/summit/2012/Sessions/SessionDetails.aspx?sid=3794)的演讲中对此进行了演示，但我没有涉及[参数](http://msdn.microsoft.com/en-us/library/ff878162.aspx)部分。我相信最后一次通话是正确的，但我尚未验证。我已链接到过程调用的文档，以便您可以根据自己的特定需求对其进行定制。

示例[PowerShell 实现](https://gist.github.com/billinkc/64d2168964a6f15d45bc)

## 2013 年 8 月更新

我从我现在的客户那里学到了一些东西。我们的笔记本电脑已加入主域。我们在客户的 AD 网络上有帐户。每当我需要在客户的世界中“做”某事时，我需要启动我的流程并指示它展示我的“外国”凭据。使这成为可能的是[RunAs](http://technet.microsoft.com/en-us/library/cc771525.aspx)。备用[参考](http://ss64.com/nt/runas.html)

我创建了一套批处理文件来启动我需要的每个进程。他们采取的形式

```
runas /netonly:ForeignDomain\Doppelganger "C:\windows\system32\cmd.exe" 
```

我有一个用于命令提示符（上图）、Visual Studio、SSMS、PowerShell、PowerShell ISE 和其他一些需要使用其域的专业应用程序。

使用 runas 方法，我已经能够使用上述所有方法部署包（以及直接从使用外部凭据运行的 Visual Studio 实例进行部署）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-27T22:41:55.570

我在遇到类似问题时使用的一种方法是：

1.  在 VS 2012 中构建项目。
2.  将“*.ispac”文件复制到远程服务器。
3.  双击“*.ispac”，通过选择目标服务器和目录运行向导。
4.  连接具有所需访问级别和角色的 Windows 帐户，验证包。

唯一的问题是，如果您有多个参数并且您的包已加密，您将无法导入它（这是来自显示的警告消息，我没有测试过加密包）。

希望能帮助到你。

# objective-c - UIWebView 中的可滑动控件

> ID：14463840
> 
> 赞同：0
> 
> 时间：2013-01-22T16:53:22.717
> 
> 标签：objective-c, uiwebview, swipe, uiswipegesturerecognizer

在我的应用程序中，我有一个文件查看器，它在 UIWebView 中显示多种类型的内容（图像、pdf、文本等）。

我有用于翻到下一页的滑动控件，只要图像小于 webview 并且不需要滚动，这些控件通常可以正常工作。这是代码：

```
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self  action:@selector(swipeRightAction:)];
swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
swipeRight.delegate = self;
[webView addGestureRecognizer:swipeRight]; 
```

但是，如果图像太大，滑动控件将不再起作用。我读过其他一些问题，人们尝试过类似的事情但没有成功。

我已经看到了对 UIWebView 进行子类化的建议，但这种方法也没有任何运气。

有没有办法将滑动控件添加到 UIWebView 将始终如一地工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:08:40.897

就我而言，我最终确实设法获得了这个工作的子类 UIWebView。我还创建了一个在执行方向滑动时调用的新委托。

这可能不是最好的解决方案，但它简单、可重用且有效。

下面是一些基本代码：

```
@interface SwipableWebView : UIWebView <UIGestureRecognizerDelegate>{
   id swipeableWebViewDelegate;
}
@property (nonatomic, retain) id <SwipableWebViewDelegate> swipeableWebViewDelegate;
@end

@implementation SwipableWebView{

}

@synthesize swipeableWebViewDelegate;

- (id)initWithCoder:(NSCoder *)aDecoder{
  self = [super initWithCoder:aDecoder];
  if (self) {
      UISwipeGestureRecognizer  * swipeRight = [[UISwipeGestureRecognizer     alloc]initWithTarget:self action:@selector(swipeRight:)];
    swipeRight.direction = UISwipeGestureRecognizerDirectionRight;
    [self addGestureRecognizer:swipeRight];
    swipeRight.delegate = self;

    UISwipeGestureRecognizer  * swipeLeft = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeLeft:)];
    swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
    [self addGestureRecognizer:swipeLeft];
    swipeLeft.delegate = self;

    UISwipeGestureRecognizer  * swipUp = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeUp:)];
    swipUp.direction = UISwipeGestureRecognizerDirectionUp;
    [self addGestureRecognizer:swipUp];
    swipUp.delegate = self;

    UISwipeGestureRecognizer  * swipeDown = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipeDown:)];
    swipeDown.direction = UISwipeGestureRecognizerDirectionDown;
    [self addGestureRecognizer:swipeDown];
    swipeDown.delegate = self;
  }
  return self;
}

-(void)swipeLeft:(id)swipe{
  [swipeableWebViewDelegate webViewSwipeLeft:swipe];
}

-(void)swipeRight:(id)swipe{
  [swipeableWebViewDelegate webViewSwipeRight:swipe];
}

-(void)swipeUp:(id)swipe{
  [swipeableWebViewDelegate webViewSwipeUp:swipe];
}

-(void)swipeDown:(id)swipe{
  [swipeableWebViewDelegate webViewSwipeDown:swipe];
}

 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{
    return YES;
}

@end

@protocol SwipableWebViewDelegate <NSObject>
 -(void)webViewSwipeLeft:(id)swipe;
 -(void)webViewSwipeRight:(id)swipe;
 -(void)webViewSwipeUp:(id)swipe;
 -(void)webViewSwipeDown:(id)swipe;
@end 
```

# c# - 在有限数量的回车后限制字符数

> ID：14463841
> 
> 赞同：1
> 
> 时间：2013-01-22T16:53:25.937
> 
> 标签：c#, javascript, asp.net, html

我有一个关于多行文本区域的查询。我有一个使用 Crystal Reports 创建的报表的注释框，我想限制字符数，这很容易使用 html maxsize。但是随后用户可以多次点击返回，这会导致文本离开报告上的框区域。

我发现了一些 Javascript 来限制回车的数量，这很有效。但是，如果回车 3 次，限制为 3 个回车，那么在第 3 行，您可以输入从那时起的最大字符数限制，然后仍然会导致文本超出可打印区域。

如何限制回车，然后限制最后一行的字符数。因此，如果他们在第 3 行按回车键 3 次，他们将被限制为多个字符，因此该区域不会被破坏。如此有效地将文本保持在一个设定的区域？回车限制的javascript如下。

```
 var keynum, lines = 1;

            function limitLines(obj, e) {
                // IE
                if (window.event) {
                    keynum = e.keyCode;
                    // Netscape/Firefox/Opera
                } else if (e.which) {
                    keynum = e.which;
                }

                if (keynum == 13) {
                    if (lines == obj.rows) {
                        return false;
                    } else {
                        lines++;
                    }
                }
                        } 
```

# kendo-grid - IE8脚本错误

> ID：14463845
> 
> 赞同：0
> 
> 时间：2013-01-22T16:53:40.600
> 
> 标签：kendo-grid

我们最近下载了 Kendo UI 套件的试用版，以便在试用结束时进行购买。我们在 Ajax 绑定模式下使用 Kendo 网格控件并注意到一些问题。主要问题是删除模型中绑定到网格的最后一条记录时出现以下脚本错误：

***http:// ** *** /Scripts/kendo/2012.3.1114/kendo.web.js 0x800a138f第 18 行第 31059 列未处理的异常- Microsoft JScript 运行时错误：“_current”为空或不是对象

我们无法在 Chrome 中复制它。我们对 Kendo 很感兴趣，因为它被宣传为与 IE8 兼容。情况似乎并非如此。

这是我们的 .cshtml 文件中的网格：

```
@(Html.Kendo().Grid(Model)
    .Name("UserGrid")
    .HtmlAttributes(new { style = "height:500px" })
    .Columns(columns =>
    {
        columns.Bound(p => p.ReferenceNumber).Groupable(false);
        columns.Bound(p => p.Title).Title("Title");
        columns.Bound(p => p.AgreementDate).Title("Agreement Date");
        columns.Bound(p => p.Superseded).ClientTemplate(
        "<input type='checkbox' disabled='disabled' value='#= Superseded #' " +
            "# if (Superseded) { #" +
                "checked='checked'" +
            "# } #" +
        "/>");

        //columns.Bound(p => p.Parties.Count);
        columns.Bound(p => p.SourceDocumentLink);
        columns.Bound(p => p.RelationshipLeadDirector);
        columns.Bound(p => p.Owner);
        columns.Bound(p => p.LegalContact);
        columns.Command(command => command.Destroy()).Width(100);
        columns.Template(@<text></text>).ClientTemplate("<a class='k-button k-button-icontext k-edit-button' href='" + Url.Action("Update", "Agreement") + "/#=Id#'><span class='k-icon k-edit'></span>Edit</a>");        
    })
    .DataSource(dataSource => dataSource
        .Ajax()
        //.Server()
        //.Events(events => events.RequestStart("requeststart_handler"))
        //.Events(events => events.Error("error_handler"))              
        .Model(model => model.Id(p => p.Id))
        .Destroy("Delete", "Agreement")
        .Update("Update","Agreement")        
        .Read(read => read.Action("ListAgreements", "Agreement")
        ))
    .Navigatable()
    .Scrollable()
    .Resizable(s=>s.Columns(true))
    .Selectable(selectable => selectable.Mode(GridSelectionMode.Single))
    .Sortable()
    .Pageable(builder => builder.PageSizes(true))
      ) 
```

这是我们控制器上处理删除的操作：

```
[HttpAjaxPost]
public JsonResult Delete([DataSourceRequest] DataSourceRequest request, AgreementData agreement)
{
    try
    {
        _agreementService.DeleteAgreement(agreement);
        ModelState.Clear();
    }
    catch (Exception ex)
    {
        Logger.GetLog(Logger.ServiceLog).Error(ex);
        ModelState.AddModelError("errors", "Delete failed");
    }
    return Json(ModelState.ToDataSourceResult());
} 
```

这是剑道网格的错误还是我们错过了一些明显的东西？只是回顾一下..脚本错误仅在删除网格中的最后一条记录时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:00:41.493

好的，我刚刚在 Tekerik 论坛上找到了这个：

[http://www.kendoui.c​​om/forums/mvc/grid/deleting-only-row-on-grid-generates-a-javascript-error-and-doesn-t-execute-the-call-to-the-服务器.aspx](http://www.kendoui.com/forums/mvc/grid/deleting-only-row-on-grid-generates-a-javascript-error-and-doesn-t-execute-the-call-to-the-server.aspx)

看起来这是剑道当前发布版本（2012.3.1114）的一个错误。显然它已在最新的内部版本中修复。

# google-chrome-extension - 为什么我的 chrome 扩展清单不允许 jquery？

> ID：14463850
> 
> 赞同：0
> 
> 时间：2013-01-22T16:53:55.087
> 
> 标签：google-chrome-extension

这是我的清单：

```
{
  "name": "test.",
  "version": "1.0",
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
   "content_scripts": [
  {      
  "js": ["jquery.js"]
  }
 ],
  "browser_action": {
      "default_title": "Set this page's color.",
      "default_icon": "icon.png",
     "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

和我的 popup.js

```
function click(e) {
  chrome.tabs.executeScript(null,
  {code:"$('img').css('display','none');
  window.close();
}

document.addEventListener('DOMContentLoaded', function () {
...
  }
}); 
```

但由于某种原因，我得到了错误

未捕获的 ReferenceError：$ 未定义

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:04:27.903

# 您的代码中的问题

*   您的清单中没有匹配模式，因此 jQuery 没有在任何地方运行\注入，因此`$`or`jQuery`关键字未定义。

# 解决方案

修改您的清单以包含要注入 jQuery 的 URL（不要忘记声明 URL 的权限。

```
"content_scripts": [
    {
      "matches": ["http://www.google.com/*"]
      "js": ["jquery.js", "myscript.js"]
    }
  ], 
```

以上是在 Google Page 中注入 jQuery，用于`<all_urls>`在所有网站中注入。

# 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [匹配模式](https://developer.chrome.com/extensions/match_patterns.html)

# iphone - 应用程序未将核心数据更改与 iCloud 同步

> ID：14463851
> 
> 赞同：3
> 
> 时间：2013-01-22T16:53:57.103
> 
> 标签：iphone, ios, objective-c, core-data, icloud

我设置了一些 NSLogs 以确保我的应用程序与 iCloud 同步更改，但我已经等了半个小时并且更改没有被同步。这是我的核心数据代码。核心数据存储存储在文档目录中，因为我希望它在失去对 iCloud 的访问权限时继续工作，并且不希望它在该实例中丢失数据库。

核心数据正常设置并更改数据，但似乎与 iCloud 不同步。

```
- (void)mergeChangesFromiCloud:(NSNotification *)notification {
    NSLog(@"changes from iCloud");
    NSManagedObjectContext* moc = [self managedObjectContext];

    [moc performBlock:^{

        [moc mergeChangesFromContextDidSaveNotification:notification];

        NSNotification* refreshNotification = [NSNotification notificationWithName:@"SomethingChanged"
                                                                            object:self
                                                                          userInfo:[notification userInfo]];

        [[NSNotificationCenter defaultCenter] postNotification:refreshNotification];
    }];
}

#pragma mark - Core Data Objects

- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {

        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

        [_managedObjectContext performBlockAndWait:^{
        [_managedObjectContext setPersistentStoreCoordinator:coordinator];
        [[NSNotificationCenter defaultCenter]addObserver:self
                                                selector:@selector(mergeChangesFromiCloud:)
                                                    name:NSPersistentStoreDidImportUbiquitousContentChangesNotification
                                                  object:coordinator];
        }];

    }
    return _managedObjectContext;
}

- (NSManagedObjectModel *)managedObjectModel {

    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }

    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:DATABASE_MODEL_URL];

    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator;
    }

    NSURL *storeURL = [NSURL fileURLWithPath:STORE_PATH];

    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
    [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];
    NSLog(@"icloud: %@", iCloud);
    if (iCloud) {

        NSString *iCloudLogsDirectoryName = @"Logs";
        NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

        //Create logs directory, in case it doesn't exist
        if([fileManager fileExistsAtPath:[iCloudLogsPath path]] == NO) {
            NSLog(@"logs directory doesn't exist");
            NSError *fileSystemError;
            [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]
                   withIntermediateDirectories:YES
                                    attributes:nil
                                         error:&fileSystemError];
            if(fileSystemError != nil) {
                NSLog(@"Error creating database directory %@", fileSystemError);
            }

        NSString *iCloudEnabledAppID = @"ID REMOVED FROM STACK OVERFLOW";

        [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
        [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

        [_persistentStoreCoordinator lock];

        [_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                          configuration:nil
                                    URL:storeURL
                                options:options
                                  error:nil];

        [_persistentStoreCoordinator unlock];

        }

        else {

            [_persistentStoreCoordinator lock];

            [_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:storeURL
                                    options:options
                                      error:nil];

            [_persistentStoreCoordinator unlock];
        }

    }

    [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];

    return _persistentStoreCoordinator;
} 
```

编辑：问题是 addPersistantStore 代码在括号中的位置错误。它应该是一个较低的支架。

# android - fragmentTransaction.remove 和 setVisibility(GONE); 有什么区别？

> ID：14463852
> 
> 赞同：0
> 
> 时间：2013-01-22T16:54:09.320
> 
> 标签：android, android-fragments

使用 fragmentTransaction.remove 或将片段容器视图可见性更改为 GONE - setVisibility(GONE); 删除片段（不需要动画时）的更好做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T16:57:56.807

删除片段将导致整个片段被销毁（将调用 onStop 和 onDestroy）。

将可见性设置为 GONE 只会对用户隐藏视图。片段实例仍将存在并贯穿生命周期事件。

# c++ - 如何确保 std::map 是有序的？

> ID：14463853
> 
> 赞同：9
> 
> 时间：2013-01-22T16:54:14.513
> 
> 标签：c++, stl

使用`std::map<int, ...>`如何确保在插入时迭代它会按整数键的升序进行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-22T16:55:17.277

你不必做任何事情。地图将根据键的值升序排列。

在内部，映射执行键之间的比较以对其元素进行排序。默认情况下，它使用`std::less<KEY>`，相当于`bool operator<(int, int)`整数。对于用户定义的类型，您必须选择：

1.  在用户定义的类型之间实现`bool operator<(const MyType&, const MyType&)`严格的弱排序比较。如果您的类型具有自然顺序，请使用此选项

2.  提供一个实现严格弱排序的二元仿函数，您可以将其作为第三个模板参数传递给映射。如果您的类型没有自然顺序，或者如果您想使用`std::less<Key>`与`bool operator<(...)`从点 1 使用的顺序不同的顺序构建地图，请使用此选项。

幕后通常发生的事情是将映射实现为自平衡二叉树，并使用严格的弱排序在映射中放置新元素，并确定两个元素是否相等。顺便说一句，相同的逻辑适用于`std::set`，其中键和值是相同的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-22T16:56:27.540

`std::map`自己做的。你不必做任何事情。

默认情况下，它按升序对键进行排序。如果您希望它按降序排序，则将其[`std::greater<T>`](http://en.cppreference.com/w/cpp/utility/functional/greater)作为**第三个**模板参数传递给`std::map`.

```
std::map<int, X>  m1;                    //sorts key in increasing order
std::map<int, X, std::greater<int>>  m2; //sorts key in decreasing order
std::map<int, X, std::less<int>> m3;     //sorts key in increasing order 
```

[**第三个**](http://en.cppreference.com/w/cpp/container/map)[模板参数](http://en.cppreference.com/w/cpp/container/map)的*默认*参数是, 所以上面和是相同的类型！[](http://en.cppreference.com/w/cpp/container/map)**`std::less<T>``m1``m3`**

 **演示：

```
#include <iostream>
#include <map>
#include <string>

int main()
{
    std::cout << "\nkeys are in increasing order: \n";
    std::map<int, std::string> m1;
    m1[5] = "first insertion but higher key";
    m1[1] = "second insertion but lower key";
    for(auto const & item : m1) 
       std::cout << "{" << item.first  <<"," << item.second << "}\n";

    std::cout << "\nkeys are in decreasing order: \n";   
    std::map<int, std::string, std::greater<int> > m2;
    m2[1] = "first insertion but lower key";
    m2[2] = "second insertion but higher key";
    for(auto const & item : m2) 
       std::cout << "{" << item.first  <<"," << item.second << "}\n";
} 
```

输出：

```
keys are in increasing order: 
{1,second insertion but lower key}
{5,first insertion but higher key}

keys are in decreasing order: 
{2,second insertion but higher key}
{1,first insertion but lower key} 
```

请注意，在这两种情况下，项目的排序均由 的第三个模板参数指定`std::map`。输出不依赖于插入的顺序，而是键的顺序！

[现场演示](http://stacked-crooked.com/view?id=15de56430d77e8d0684449748d4b2a91)

还有[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)哪个不对元素进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T16:58:29.413

`map`通常实现为[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)，因此迭代器已经为您提供排序键。

如果您不关心您可能使用的订单`unordered_map`（来自 c++11 或 boost），这会给您一些订单交易的速度。**

# sqlite - Windows Runtime 3.7.15.1 的 SQLite 文件名是什么？

> ID：14463855
> 
> 赞同：1
> 
> 时间：2013-01-22T16:54:23.840
> 
> 标签：sqlite, windows-runtime, installation, windows-store-apps

自从获得最新 (3.7.15.1) 版本的 SQLite 后，我有两个应用程序在编译时出现问题。

直到今天早上，第二个一直“处于次要状态”，所以直到现在我才注意到它。

在尝试编译时，我得到：“*找不到 SDK”SQLite.WinRT，Version=3.7.15.1* “。

参考列表确实显示我安装了“SQLite for Windows Runtime”。

不过，我刚刚意识到，这些属性是：

```
(Name)  SQLite for Windows Runtime
Fiel Type   SDK
Identity    SQLite.WinRT, Version=3.7.15.1
Path    [blank]
Resolved    False
Version 0.0.0.0 
```

最后三个可能是问题（没有路径，未解决，没有版本信息）。所以不知何故，显然，安装时没有添加路径等。那么用于 Windows 运行时的 SQLite 的文件名是什么，以便我可以搜索它的位置并手动将其添加到路径中（此时也有望添加已解决和版本信息）。

## 更新

我在这里找到 sqlite3.dll：

*C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\SQLite.WinRT\3.7.15.2\Redist\Debug\x86*

这是要添加到路径的适当文件（sqlite3.dll）和位置吗？

## 更新 2

这个想法就这么多：“路径”属性不可编辑。

## 更新 3

仔细查看文件路径，我发现我安装的是 3.7.15.2，而不是 3.7.15.1。

我在“最近”中看到的三个可能的 SQLite 版本是 3.7.14、3.7.15 和 3.7.15.1。转到“扩展”选项卡后，我找到了 3.7.15.2。

它添加的路径是：C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0\ExtensionSDKs\SQLite.WinRT\3.7.15.2\（所以没有附加“\Redist\Debug\x86”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T06:06:52.077

我不能从你的问题中说你是否仍然有这个问题，但即使它现在对你有用，以下内容可能对偶然发现这个问题的人有用。

对 SQLite 的引用总是通过对话框的`Windows > Extension`一部分添加。`Add Reference...`添加引用时，它始终会添加到当时安装的 SDK 版本中。

SDK 通过`Extensions and Updates...`对话进行管理和更新，包括当有新版本的 SDK 可用时的通知。通过这种机制更新 SDK 后，旧版本的库将不再可用。仍然引用它的任何项目都将无法构建并出现您遇到的错误：

```
Could not find SDK "SQLite.WinRT, Version=#.#.#.#. 
```

要解决此问题，您需要删除现有引用并通过`Add Reference...`对话框再次添加它。这样，引用将更新为您机器上可用的最新版本的库，并且项目将再次构建。

当一个由多个开发人员组成的团队正在开发一个引用 SQLite 的项目时，此过程会产生副作用。一旦其中一个更新了 SDK 和项目中的引用并将此更改提交到源代码管理，所有开发人员都必须更新 SDK，然后才能再次构建项目。

即使在 SDK 更新到新版本后，您之前添加到项目中的旧版本 SDK 也会在对话框的`Windows > Recent`部分中列出。`Add Reference...`这意味着您仍然可以从此处添加它，但由于该库不再存在，因此它将无法工作。不幸的是，即使您尝试添加这些引用，Visual Studio 也不会从对话框中删除它们，也不会以任何其他方式警告您该问题，而不是失败的构建。不过，您可以自己从对话框中删除引用，方法是右键单击它并选择`Remove from Recent References`。

# pbs - PBS 脚本：多个作业、节点计数、变量

> ID：14463856
> 
> 赞同：0
> 
> 时间：2013-01-22T16:54:23.940
> 
> 标签：pbs

在 PBS 作业数组中的唯一作业之间，是否可以操纵使用的节点数和/或程序本身使用的变量值？

例如，一个脚本可能会在 1 个节点上运行我的程序作为不同的作业提交，然后是 2 个节点，然后是 3 个节点等。而另一个脚本可以增量地更改程序变量的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:19:12.257

没有本地方法来提交，但可以使用 qalter 来完成。你会想要这样的东西：

```
qsub script.sh -t 1-10
# for ease we'll assume this returned 0[]
for ((i=1; i<=10; i++)); do
  qalter 0[$i] -l nodes=$i 
```

至于每个作业的变量，每个数组子作业都会定义 $PBS_ARRAYID 来告诉您作业的索引。

**注意：此答案假定 TORQUE 2.5 或更高。**

# php - Magento：向集合过滤器添加多个“标签”

> ID：14463859
> 
> 赞同：0
> 
> 时间：2013-01-22T16:54:43.310
> 
> 标签：php, sql, magento

这是一个漫长的周末，我的大脑无法正常工作，我正在尝试通过多个标签过滤产品集合。在“tag/product_collection”上，我只能为“addTagFilter”提供一个值，所以我试图将自己的语句传递给 where()

```
relation.tag_id = 6 AND relation.tag_id = 9 
```

但它没有返回，即使有 6 个产品同时具有标签 6 和 9，我也可以将查询更改为 IN (6,9)，它会返回所有具有其中一个的产品并删除 AND 并选择说只有 6 或 9工作正常，但对于我的生活，我无法弄清楚为什么并且没有返回？！完整代码如下。

```
$collection = Mage::getResourceModel('tag/product_collection');
$collection->addAttributeToFilter('status', array('eq' => 1));
$collection->addAttributeToFilter('type_id','simple');
$collection->addAttributeToSelect('sku')
    ->addAttributeToSelect('name')
    ->getSelect()->where("relation.tag_id = 6 AND relation.tag_id = 9",""); 
```

提前致谢。

=== 编辑 === 好的，我没有太多运气尝试在集合上使用“SQL”方法来执行此操作，所以如果有人发现可以在下面列出它，我们都会赞成摆脱它。与此同时，我有一个稍微笨拙的方法。如果您有 1000 种产品，我不会推荐这个，我可以想象它有点慢。

```
// Load our collection
$collection = Mage::getResourceModel('tag/product_collection');
$collection->addAttributeToFilter('status', array('eq' => 1));
$collection->addAttributeToFilter('type_id','simple');
$collection->addAttributeToSelect('sku')
->addAttributeToSelect('name');

// Loop the collection  
foreach ( $collection as $_product)
    {   
    // Load ALL tags for product
    $model = Mage::getModel('tag/tag');
    $tags = $model->getResourceCollection()
        ->addPopularity()
        ->addStatusFilter($model->getApprovedStatus())
        ->addProductFilter($_product->getId())
        ->setFlag('relation', true)
        ->addStoreFilter(Mage::app()->getStore()->getId())
        ->setActiveFilter()
        ->load();

    // loop through all the tags if we find one set a flag to skip returning this product.
    $arr = array();
    foreach($tags as $_t){ $arr[$_t->getId()] = $_t->getName(); }

    $filter_tags = count($_REQUEST['tags']) > 0 ? $_REQUEST['tags'] : array();
    $tag_found = 0;
    $on_filter =  count($filter_tags) > 0 ? 1 : 0;

    foreach($arr as $key => $value){ array_key_exists($key,$filter_tags) ? $tag_found++ : 0; }

    // if all if good send the product to an array to be returned
    if($on_filter && $tag_found){ // add $_product to a return }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:58:37.873

签出此代码

```
$collection = Mage::getResourceModel('tag/product_collection');
$collection->addAttributeToFilter('status', array('eq' => 1));
$collection->addAttributeToFilter('type_id','simple');
$collection->addAttributeToSelect('sku')
    ->addAttributeToSelect('name')
    ->getSelect()->Where('relation.tag_id=?', 6)
        ->Where('relation.tag_id=?', 9); 
```

您可以放置​​多个 where 类，默认情况下添加`"AND"`，如果需要`"OR"`，您可以使用`orWhere`而不是`Where`

# c# - Linq to XML 选择匹配模式的子元素名称列表

> ID：14463860
> 
> 赞同：0
> 
> 时间：2013-01-22T16:54:45.840
> 
> 标签：c#, linq-to-xml

关于嵌套 LINQ to XML 查询的问题：

### 代码：

```
List<string> GetNames(string fooName)
{
  string fileName = "foo.xml";

  XElement myFile = XElement.Load(fileName);
  IEnumerable<XElement> bars =
     from response in myFile.Elements("foo")
     where response.Attribute("fooName").Value.Equals(fooName)
     from subResponse in response.Descendants()
     select subResponse;

  List<string> sNames = new List<string>();

  foreach (XElement el in bars)
  {
     XAttribute NameAttr = el.Attribute("Name");
     sNames.Add(NameAttr.Value);
  }
  return sNames;
} 
```

### xml:

```
<topElem>
  <foo fooname="a">
     <bar Name= "bb"/>
     <bar Name= "cc"/>
     <bar Name= "dd"/>
  </foo>
</topElem> 
```

### 问题：

当我使用参数“a”调用上述函数时，我要做的是构建一个包含“bb”、“cc”和“dd”的列表。虽然上面的代码有效，但我认为如果我更流利地使用 LINQ，我将能够直接在 LINQ 代码中生成我的列表，而不必依赖 foreach 循环来迭代 IEnumerable。我查看了该站点上的许多示例，以及其他试图找到这种确切情况的示例，但运气不佳。我已经看到了一些使用 lambda 表达式或对“select”语句执行其他操作的示例，但我没有任何运气获得从中编译出来的代码。也许添加第三个 from 声明，比如

```
from subSubResponse in subResponse.Attribute("Name")
select subResponse.Value 
```

但这给出了一个错误：

> 源类型为“System.Collections.Generic.IEnumerable”的查询表达式的后续 from 子句中不允许使用“System.Xml.Linq.XAttribute”类型的表达式。对“SelectMany”的调用中的类型推断失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:57:45.743

您只能`from`在返回集合的表达式上使用。
`.Attribute("Name")`不返回集合，因此该行没有意义。

你可能想要

```
let subSubResponse = subResponse.Attribute("Name") 
```

要不就

```
select subResponse.Attribute("Name").Value 
```

# iphone - 使用过的 iPhone 应用测试 - 基础知识

> ID：14463866
> 
> 赞同：0
> 
> 时间：2013-01-22T16:55:08.743
> 
> 标签：iphone, testing, ios6, gps, ipod

我已经看到这个问题的一部分被问了几次，但我有一些具体的问题我找不到答案。

我编写了一个简单的 iPhone 应用程序，并想在我自己的设备上对其进行测试。但是，我目前没有设备，因此在市场上购买二手 iPhone (3GS) 或 iPod touch (4thGen)。

如果我选择 iPhone（我的首选），如果 i) 它没有合同，这有关系吗？ii) 它是锁定到 AT&T 还是解锁？

您可以通过 iTunes 将非签约手机恢复/升级到 iOS 6 吗？

最后，iPhone GPS 是我喜欢它而不是 iPod touch 的主要原因。这是否仍然适用于非签约电话，即它是否适用于无线？

由于我从未拥有过智能手机，如果这些问题看起来有点愚蠢，我深表歉意。谢谢您的帮助

编辑：我的问题有点含糊，所以要澄清两个要点：i）你能在没有 SIM 卡的“合同外”iPhone 上测试应用程序吗？ii) 如果没有 3G，iPhone 是否会使用无线“估计”GPS 位置，或者 GPS api 会返回错误消息（我认为 Benmj 会回答这个问题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:12:06.590

这里有几个问题，但似乎主要的问题是“我可以在没有合同的情况下在 iPhone 上测试我的应用程序吗？”

是的。是的你可以。这就像为 iPod 开发一样。我有一部 iPhone，最近刚刚解除了合同。我仍然将它用于开发。

在 GPS 方面：如果您有电话合同，您将只能对此进行测试。GPS基于手机信号塔工作。根据您连接到的无线网络，您可能能够获得有限的位置感知（类似于桌面浏览器现在可以有一些有限的地理感知），但如果您想要获取 GPS 位置、计算距离等，您将需要有一个无线计划。

# mysql - 将所有数据库表引擎更改为 InnoDB

> ID：14463870
> 
> 赞同：3
> 
> 时间：2013-01-22T16:55:20.547
> 
> 标签：mysql, database, innodb, myisam

我想使用 sql 查询，将我的所有数据库表引擎从 MyISAM 更改为 InnoDB。
我使用了下面的查询。虽然它给了我一个成功的信息，但它不起作用。我的表的存储引擎仍然是 MyISAM。

```
SELECT CONCAT('ALTER TABLE ', table_name, ' ENGINE=InnoDB;') as ExecuteTheseSQLCommands
FROM information_schema.tables WHERE table_schema = 'name_of_the_database' 
ORDER BY table_name DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:08:31.697

*   如果您有 PHP 知识，那么此脚本将对您有所帮助：

    [如何将 MyISAM 中的所有表转换为 InnoDB？](https://stackoverflow.com/questions/3856435/how-to-convert-all-tables-from-myisam-into-innodb)

*   如果您了解 Shell 脚本，那么此链接将对您有所帮助：

    [http://shrubbery.homeip.net/c/display/W/Shell+and+MySQL#ShellandMySQL-ConvertMyISAMtablestoInnoDB](http://shrubbery.homeip.net/c/display/W/Shell+and+MySQL#ShellandMySQL-ConvertMyISAMtablestoInnoDB) （域名由wiki所有者更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-13T21:53:15.570

我的解决方案 - 启动你的 mysql shell 并粘贴：

```
SELECT CONCAT('ALTER TABLE ',CONCAT(TABLE_SCHEMA,'.',TABLE_NAME),'     
ENGINE=InnoDB;') 
FROM INFORMATION_SCHEMA.TABLES
WHERE ENGINE='MyISAM'
AND TABLE_SCHEMA NOT IN ('MYSQL','INFORMATION_SCHEMA','PERFORMANCE_SCHEMA','SYS')
INTO OUTFILE '/tmp/mysql.conversions';
SOURCE /tmp/mysql.conversions; 
```

来源 1：[https ://computingforgeeks.com/how-to-convert-all-mysql-tables-from-myisam-into-innodb-storage-engine/](https://computingforgeeks.com/how-to-convert-all-mysql-tables-from-myisam-into-innodb-storage-engine/)

来源 2：[https ://stackoverflow.com/a/16014411/3882707](https://stackoverflow.com/a/16014411/3882707)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T16:58:27.520

见[http://dev.mysql.com/doc/refman/5.0/en/converting-tables-to-innodb.html](http://dev.mysql.com/doc/refman/5.0/en/converting-tables-to-innodb.html)

```
ALTER TABLE t1 ENGINE=InnoDB; 
```

**编辑**：哦，等等，你生成了这种语句，但它们不起作用？

# php - mysql查询查询

> ID：14463879
> 
> 赞同：0
> 
> 时间：2013-01-22T16:55:51.143
> 
> 标签：php, mysql, join

我知道这是一个愚蠢的问题，但我是 php 新手，所以任何帮助都是有用的。

我有两张桌子，`product`并且`payment`：

*   产品表有`Id`, `Room_Available`, `price`, ...
*   付款表有`Id`, `Product_Id`, `Total_Room`, ...
*   产品表有很多记录

我期望的是，如果`Occupied_Room <= Room_Available`条件失败，则它会提供所有产品记录状态 = 'Y'，否则状态 = 'N'。

*   `cms_product.Room_Available`是可用房间总数
*   `cms_payment.Total_Room` 已订房

查询是：

```
SELECT SUM(cms_payment.Total_Room) as Occupied_Room,
    `cms_product`.`Room_Available` as Available_Room  
FROM 
(
    `cms_product` 
    LEFT JOIN `cms_payment` on (cms_product.`Id` = cms_payment.`Product_Id`)
)
GROUP BY `cms_product`.`Id` 
HAVING Occupied_Room <= Room_Available 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:09:07.980

这有点像在黑暗中刺伤，但我认为你想要：

```
SELECT Prod.Id, 
    CASE WHEN COALESCE(SUM(Pay.Total_Room),0) <= Prod.Room_Available THEN 'Y' 
         ELSE 'N'
    END AS Status
FROM cms_product AS Prod
LEFT JOIN cms_payment AS Pay ON Prod.Id = Pay.Product_Id
GROUP BY Prod.Id, Prod.Room_Available 
```

这将向您显示所有产品 ID 和状态（`'Y'`=available 或 fullbooked；`'N'`=overbooked）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:09:48.037

试试看：下表使用了一些示例数据。您可以将状态更改为`y`或`n`:)

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/1ecf7/6)

```
select product.id, 
case when coalesce(x.sm,0) <= product.total_room then 
'available' else 'unavailable' end status,
product.total_room, coalesce(x.sm,0) as rooms_required
from product 
left join (
select payment.product_id, 
sum(payment.room_required) sm
from payment 
group by payment.product_id)x
on x.product_id = product.id
group by product.id
;

| ID |      STATUS | TOTAL_ROOM | ROOMS_REQUIRED |
--------------------------------------------------
|  1 | unavailable |         10 |             12 |
|  2 |   available |         15 |             15 |
|  3 |   available |          5 |              4 |
|  4 |   available |         10 |              0 | 
```

# javascript - 让子属性在 Kendo Grid 中呈现 - 未定义

> ID：14463882
> 
> 赞同：0
> 
> 时间：2013-01-22T16:56:00.330
> 
> 标签：javascript, kendo-ui, kendo-grid

我正在使用 Kendo Grid，并且我正在尝试渲染子对象，但它们以“未定义”的形式出现。问题是我检查了返回的 JSON，它不是未定义的。这是一个精简版：

```
<table id="grid">
    <tr>
        <th>Id</th>
        <th>Name</th>
    </tr>
</table>
<script id="rowTemplate" type="text/x-kendo-template">
    <tr class="k-alt">
        <td>#= RecordId #</td>
        <td>#= Person.Name #</td>
    </tr>
</script> 
```

一切都很好，但据说“Person.Name”是未定义的（如果你愿意，我可以显示 javascript）。但是，如果我查看 FireBug，则会在对象中填充“Person.Name”。我错过了什么？另外，如果您想了解更多关于我在做什么的信息，请告诉我——只是尽量保持简单易读。

# c# - 创建大量小文件的最佳方法？

> ID：14463892
> 
> 赞同：3
> 
> 时间：2013-01-22T16:56:36.307
> 
> 标签：c#, .net, performance, createfile

我想尽快创建很多（100 万）个小文件，这就是我现在正在做的事情：

```
for(long i = 0; i < veryVeryLong; i++){
    using (var fs = new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.None, 4096, FileOptions.None)) {
        byte[] bytes = GetFileContent(i); // no matter
        fs.Write(bytes, 0, bytes.Length);
    }
} 
```

我可以加快速度吗？

**更新**

roomaroo 是的，我需要使用 Parallel，但我将它与我的函数结合使用，结果会更好。代码：

```
Parallel.For(0, veryVeryLogn, (i) => {
    using (var fs = new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.None, 4096, FileOptions.None)) {
        byte[] bytes = GetFileContent(i); // no matter
        fs.Write(bytes, 0, bytes.Length);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:22:37.260

正如 ChrisBint 建议的那样，使用并行循环。

我创建了三种方法来编写文件（下面的代码）。一个使用上面的代码，一个使用 File.WriteAllBytes(...) - 这两个都使用传统的 for 循环。

第三种实现使用了并行 for 循环。

以下是创建 1000 个文件的时间：

> 文件流：2658 毫秒
> 
> File.WriteAllBytes：2555 毫秒
> 
> 并行时间：617ms

所以并行循环比最慢的实现快四倍。显然，这会因不同的硬件而异，您的结果将在很大程度上取决于您的 CPU 和磁盘。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Diagnostics;
using System.Threading.Tasks;

namespace FileCreator
{
    class Program
    {
        static void Main(string[] args)
        {
            string folder = @"d:\temp";

            Clean(folder);
            CreateWithParallelFileWriteBytes(folder);

            Clean(folder);
            CreateWithFileStream(folder);

            Clean(folder);
            CreateWithFileWriteBytes(folder);
        }

        private static void Clean(string folder)
        {
            if (Directory.Exists(folder))
            {
                Directory.Delete(folder, true);
            }

            Directory.CreateDirectory(folder);
        }

        private static byte[] GetFileContent(int i)
        {
            Random r = new Random(i);
            byte[] buffer = new byte[1024];
            r.NextBytes(buffer);
            return buffer;
        }

        private static void CreateWithFileStream(string folder)
        {
            var sw = new Stopwatch();
            sw.Start();

            for (int i = 0; i < 1000; i++)
            {
                string path = Path.Combine(folder, string.Format("file{0}.dat", i));

                using (var fs = new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.None, 4096, FileOptions.None))
                {
                    byte[] bytes = GetFileContent(i);
                    fs.Write(bytes, 0, bytes.Length);
                }
            }

            Console.WriteLine("Time for CreateWithFileStream: {0}ms", sw.ElapsedMilliseconds);
        }

        private static void CreateWithFileWriteBytes(string folder)
        {
            var sw = new Stopwatch();
            sw.Start();

            for (int i = 0; i < 1000; i++)
            {
                string path = Path.Combine(folder, string.Format("file{0}.dat", i));
                File.WriteAllBytes(path, GetFileContent(i));
            }

            Console.WriteLine("Time for CreateWithFileWriteBytes: {0}ms", sw.ElapsedMilliseconds);
        }

        private static void CreateWithParallelFileWriteBytes(string folder)
        {
            var sw = new Stopwatch();
            sw.Start();

            Parallel.For(0, 1000, (i) =>
            {
                string path = Path.Combine(folder, string.Format("file{0}.dat", i));
                File.WriteAllBytes(path, GetFileContent(i));
            });

            Console.WriteLine("Time for CreateWithParallelFileWriteBytes: {0}ms", sw.ElapsedMilliseconds);
        }
    }
} 
```

# python - 使用 subprocess.Popen 运行需要多个输入重定向的 unix 工具

> ID：14463902
> 
> 赞同：1
> 
> 时间：2013-01-22T16:57:06.540
> 
> 标签：python, shell, unix

我想从 python 程序中执行这一系列命令。

```
wc -l <(comm -12 <(sort file1.txt) <(sort file2.txt)) 
```

我在以下方面取得了成功：

```
sort_a = Popen("sort file1.txt", shell=False, stdout=PIPE)
count = Popen(["wc", "-l"], shell=False, stdout=PIPE, stdin=sort_a.stdin) 
```

我无法弄清楚他如何将多个标准输出重定向到 comm -12 的标准输入。

我想也许：

```
compare = Popen(["comm", "-12"], shell=False, stdout=PIPE, stdin=[sort_a.stdin, sort_b.stdin]) 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:31:41.253

首先，让我们看看 shell 的`<(command)`命令替换是如何工作的。该命令以指向新创建的管道的输出开始。然后管道在命令行上作为*文件名*传递给外部命令。

例如：

```
$ echo wc -w <(date)
wc -l /dev/fd/63 
```

显示 shell 从`date`输出到管道开始，然后将`/dev/fd/63`引用文件描述符 63 处的新管道的伪文件作为实际命令行参数传递。

* * *

为了在 Python 中获得相同的行为，我们可以实现相同的东西：

```
from subprocess import *

date = Popen(['date'], stdout=PIPE)
Popen(["wc", "-w", "/dev/fd/%d" % date.stdout.fileno()]) 
```

打印

```
6 /dev/fd/3 
```

* * *

你可以写一个类来使它更容易做。这使用一个[`with`语句](http://www.python.org/dev/peps/pep-0343/)并临时保留对每个生成的进程的引用，否则当进程对象被垃圾收集时管道将关闭。

```
from subprocess import *

class CommandSubstituter(object):
    def __init__(self):
        self._procs = []

    def __enter__(self):
        return self

    def __exit__(self, *exc_info):
        pass

    def subst(self, *args, **kwargs):
        proc = Popen(*args, stdout=PIPE, **kwargs)
        self._procs.append(proc)
        return "/dev/fd/%d" % proc.stdout.fileno()

with CommandSubstituter() as c:
    Popen(['wc', '-l',
           c.subst(['comm', '-12',
                    c.subst(['sort', 'file1.txt']),
                    c.subst(['sort', 'file2.txt'])])]) 
```

# javascript - 不双击JQuery运行效果

> ID：14463906
> 
> 赞同：-3
> 
> 时间：2013-01-22T16:57:17.323
> 
> 标签：javascript, jquery, toggle

这是我在主题中使用的代码，我希望能够单击一次，并且单击后最新链接会拉起而不是回调。

```
<script>
jQuery( "li#menu-item-28 a" ).click(function() {
  jQuery( "div#the-latest.bg div.container" ).slideToggle( "slide" );
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:01:59.903

您可以为此使用**实时** 绑定。检查代码。这可能会有所帮助。

```
<script>
jQuery( "li#menu-item-28 a" ).live('click',function() {
  jQuery( "div#the-latest.bg div.container" ).slideToggle( "slide" );
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:08:25.470

我不确定我是否理解您的问题，但请尝试：

```
<script>
    jQuery( "li#menu-item-28 a" ).live("click", function(event) {
        event.preventDefault();
        jQuery( "div#the-latest.bg div.container" ).slideToggle( "slide" );
    });
</script> 
```

event.preventDefault() 防止单击链接时发生的默认事件。

# c++ - Visual C++ 与 QT Creator

> ID：14463907
> 
> 赞同：11
> 
> 时间：2013-01-22T16:57:21.407
> 
> 标签：c++, visual-studio-2010, qt, qt-creator

我通常用 Java 和 C# 编写代码，但有一个项目我必须使用 C++。我的问题是使用 QT Creator 而不是 Visual Studio Express 或其他方式对我来说有什么优点和缺点，我知道有类似的问题，但它们至少可以追溯到 2 年前。

我必须注意，我只为 Windows 编写我的系统，我不打算让它成为多平台。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T19:26:59.363

Visual Studio 是更好的 IDE，但 Qt Creater 免费提供 VS 不会做的事情（处理 MOC 文件、UI 文件、QRC 文件、tr 调用等），这些必须在 VS 中在构建前和构建后的步骤中手动完成。Creater 还具有在所有平台上都相同的优势。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T17:03:07.037

我发现 Qt 更易于使用，并且发现 Qt 的文档比 Microsoft 的非常好的文档更好。Qt 提供了很多功能（网络、网页浏览、声音、3D），感觉非常专注且集成良好，而在微软世界中使用这些功能确实有效，但感觉每个功能都是由十几个团队完成的，而这些团队通常没有同意他们的方法。

# jquery - jQuery - 在 XML 加载事件中加载 json

> ID：14463920
> 
> 赞同：0
> 
> 时间：2013-01-22T16:58:13.937
> 
> 标签：jquery, xml, json, load

我有一个这样的xml文件

```
<users>
    <user>
        <name>LOREM</name>
        <pic>LOREM</pic>
        <post>www.URL.com/info.json</post>
    </user>
    <user>
        <name>LOREM</name>
        <pic>LOREM</pic>
        <post>www.URL.com/info.json</post>
    </user>
</users> 
```

我用jquery解析这个xml，所以：

```
var data = {};
$.get('xmlfile.xml', function(xml){
    var oXML = $(xml);

    oxml.find('user').each(function(i){
        data[i].name = $(this).attr('name');
        data[i].pic = $(this).attr('pic');
        data[i].post = /* i must load a json file with all posts here*/
    });

}); 
```

这些帖子位于外部 json 文件中。我试图像这样在加载 xml 时加载 json

```
var data = {};
$.get('xmlfile.xml', function(xml){
    var oXML = $(xml);

    oxml.find('user').each(function(i){
        data[i].name = $(this).attr('name');
        data[i].pic = $(this).attr('pic');
        data[i].post = $.getJSON($(this).attr('post'), function(data){
            retrun data;
        });
    });

}); 
```

但它不起作用。的值为`data[i].post`空。你有在加载 xml 上加载 json 的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:03:20.153

`$.getJSON`是异步的，因为 AJAX 是异步的。您只能在`success`回调内部访问 AJAX 调用的结果。在您的示例中，您试图将`$.getJSON`调用的返回值分配给`data[i].post`变量。但这不可能起作用，因为该值可能在很久以后才可用，只有在 AJAX 调用成功之后。

所以你可以稍微颠倒你的逻辑：

```
$.get('xmlfile.xml', function(xml) {
    var oXML = $(xml);

    oxml.find('user').each(function(i) {
        var index = i;
        $.getJSON($(this).attr('post'), function(res) {
            data[index].name = $(this).attr('name');
            data[index].pic = $(this).attr('pic');
            data[index].post = res;
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:05:44.477

## 主要问题`getJSON`是异步的

您的`post`属性`data`是`null`因为您在这里做错了两件事：

1.  `getJSON``.each`是异步的，所以它在你已经执行后获取你的数据
2.  `getJSON`不返回数据而是`jqXHR`对象

尝试以这种方式更改它：

```
var data = []; // you likely want an array and not an object
var counter = 0;

$.get('xmlfile.xml', function(xml) {

    var oXML = $(xml);

    oxml.find('user').each(function(i) {
        var me = $(this);

        data.push({
            name: me.attr('name'),
            pic: me.attr('pic'),
            post: null
        });

        // increment counter
        counter++;

        $.getJSON(me.attr('post'), (function(index) {
            return function(data) {
                data[index].post = data;
                if (!--counter) // when it reaches ZERO
                {
                   setTimeout(function() {
                       // all JSONs have loaded now continue with your stuff
                   }, 0);
                }
            };
        })(i));
    });

}); 
```

上面的代码还检测所有 JOSN 对象何时已加载，以便您继续处理。

但除此之外，它以这种方式工作：

1.  它获取 XML
2.  当接收到 XML 时，它会遍历`user`元素并准备`data`对象并将它们推送到数组中
3.  对于每个对象，它也会发出一个 Ajax 调用来获取 JSON 数据
4.  每次成功调用 JSON 然后填充正确`data`对象的`post`属性并减少`counter`
5.  当计数器达到零时，一个额外的函数正在排队，您可以在其中放置应该在所有内容加载并完成后执行的代码。

如果您的 JSON 请求也可能失败，那么我建议您使用`$.ajax`而不是`getJSON`这样您也可以提供`error`函数，其中您也将 decrement `counter`。否则，如果只计算成功，它就不会达到零。

# php - 使用 laravel fluent 查询生成器从多个表中选择

> ID：14463921
> 
> 赞同：13
> 
> 时间：2013-01-22T16:58:17.980
> 
> 标签：php, mysql, laravel

我正在重写一些 PHP/MySQL 来使用 Laravel。我想做的一件事是[使用 Fluent Query Builder](http://laravel.com/docs/database/fluent)使数据库查询更加简洁，但我有点迷茫：

```
SELECT p.post_text, p.bbcode_uid, u.username, t.forum_id, t.topic_title, t.topic_time, t.topic_id, t.topic_poster
FROM phpbb_topics t, phpbb_posts p, phpbb_users u
WHERE t.forum_id = 9
AND p.post_id = t.topic_first_post_id
AND u.user_id = t.topic_poster
ORDER BY t.topic_time
DESC LIMIT 10 
```

这会查询 phpbb 论坛并获取帖子： ![在此处输入图像描述](../Images/8c609b86d15597e26466d20323576e96.png)

我如何重写它以使用 Fluent Query Builder 语法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-22T18:04:22.043

**未经测试，但这是一个开始**

```
return DB::table('phpbb_topics')
    ->join('phpbb_posts', 'phpbb_topics.topic_first_post_id', '=', 'phpbb_posts.post_id')
    ->join('phpbb_users', 'phpbb_topics.topic_poster', '=', 'phpbb_users.user_id')
    ->order_by('topic_time', 'desc')
    ->take(10)
    ->get(array(
        'post_text',
        'bbcode_uid',
        'username',
        'forum_id',
        'topic_title',
        'topic_time',
        'topic_id',
        'topic_poster'
    )); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-22T09:42:34.080

```
return DB::table(DB::raw('phpbb_topics t, phpbb_posts p, phpbb_users u')) 
->select(DB::raw('p.post_text, p.bbcode_uid, u.username, t.forum_id, t.topic_title, t.topic_time, t.topic_id, t.topic_poster'))
->where('phpbb_topics.topic_first_post_id', '=', 'phpbb_posts.post_id')
->where('phpbb_users', 'phpbb_topics.topic_poster', '=', 'phpbb_users.user_id')
->order_by('topic_time', 'desc')->take(10)->get(); 
```

# servicestack - servicestack 字段有时会在用于编辑和创建新实体的视图中保留值

> ID：14463922
> 
> 赞同：0
> 
> 时间：2013-01-22T16:58:24.650
> 
> 标签：servicestack

我有一个屏幕（视图），我用它来列出表中实体的所有实例。如果我双击一行，我会进入一个可以编辑该实体的屏幕。

列表屏幕上有一个按钮，如果单击该按钮，则会将我带到用于编辑的同一视图，但这次是空字段，用于创建实体的新实例。

有时（！），如果我编辑并保存了一个实体，返回到列表并单击“新建”按钮，当我被带到创建新实体的屏幕时，它的值是从我刚刚加入的实体填充的编辑。servicestack中是否有任何可能导致这种数据“泄漏”的东西？

非常感谢。

编辑：应该说这是一个使用 c# 的 servicestack.razor（新的 api）实现，根本不使用 mvc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:44:40.723

抱歉，我认为我指出的项目完美地突出了这个问题。我不确定你还需要什么。冒着重蹈覆辙的风险，

1.  在 d/base 中有几行数据，在列表页面中加载数据。这显示了一个数据表。

2.  双击一行以产生一个具有表格的屏幕。表单由行中的数据填充。

3.  返回列表页面。

4.  现在点击“新建”按钮。这会产生与您在步骤 2 中单击的行相同的视图。

5.  看到视图中的表单填充了先前渲染中的旧数据，而实际上它应该是空的，因为您想使用表单来创建新实体。

似乎正在发生的事情是第一次呈现视图（表单）（它们没有预编译吗？）它被放入缓存中。问题是表单元素（文本框等）中的任何数据似乎也被放入缓存中。因此，当您随后使用视图尝试创建新实体并希望所有字段为空时，它实际上已预先填充了旧数据。

不知道我怎么能更清楚这一点？或者单元测试有什么帮助？正如我所说，我放在网站上的项目清楚地显示了这种行为。我愿意花更多的时间在上面，但我不能等待在这里发帖和得到回复之间的长时间延迟。再说一次，我知道你和我们其他人一样很忙。如果您能回答我提出的关于 execute 方法如何填充缓存的问题，这可能会有所帮助？或者是吗？源代码不太清楚，因为它的内联文档很少，所以我花了相当多的时间逐步调试调试器等......而且我仍然不清楚一些事情。

无论如何，如果我遇到抱怨，我很抱歉，不是故意的。我敢肯定，该框架具有巨大的潜力。

# bash - 来源 bash 片段如何有条件地为来源 shell 提供功能？

> ID：14463928
> 
> 赞同：11
> 
> 时间：2013-01-22T16:58:32.923
> 
> 标签：bash, include

是否可以获取 Bash 代码段，但仅在某个条件成立时才从其中实际提供一个函数？

所以我要问的是，我可以无条件地从一个目录中获取所有文件，但是所获取的文件包含是否向源 shell 提供功能的逻辑。

例子：

*   `.bashrc`来源整个子文件夹`.bashrc.d`
*   `.bashrc.d/xyz`提供了一个可以在无法处理`adduser2group`的旧系统上运行的功能`usermod``-a -G`
*   `.bashrc.d/xyz`*如果*它在这样的旧系统上运行，则应*仅*向采购外壳提供该功能。

 *我目前的方法是有条件地创建一个以Debian 程序`alias`命名的程序 ( )。所以我只实现语义，但它仍然很有帮助。`adduser``alias adduser=adduser2group``adduser <user> <group>`

是否有不需要此解决方法的解决方案？毕竟这种方法意味着我希望避免的名称冲突的机会。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-22T17:02:57.910

您可以使用标准的 shell 逻辑来控制是否定义了函数。

`lib.sh`：

```
if true; then
    foo() {
        echo foo
    }
else
    bar() {
        echo bar
    }
fi 
```

`test`：

```
#!/bin/bash

. ./lib.sh
foo
bar 
```

运行时，仅`foo`定义：

```
$ bash test
foo
test: line 5: bar: command not found 
```

为您的应用程序替换`if true`更合适的逻辑......</p>

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-22T17:04:51.703

您可以定义所需的功能，并且只要满足特定条件，您只需取消设置功能：

```
$ function alpha() { echo $1; }
$ alpha 10
10 
```

评估您的状况 - 并认为它成立：

```
$ if [[ your condition ]]; then unset alpha; fi
$ alpha 10
alpha: command not found 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T23:40:43.307

作为替代方案，它似乎`return`也可以完成这项工作。所以可以说：

```
[[ condition ]] || return 
```*

# mysql - 如何重写 DELETE 查询以限制受影响的行？

> ID：14463930
> 
> 赞同：2
> 
> 时间：2013-01-22T16:59:00.940
> 
> 标签：mysql

我知道 mysql 不允许将 LIMIT 与多个表删除查询一起使用。我已经在网上寻找解决方案，但我不确定如何使它们适应我的需要。这是删除所有不在内容中的内容的查询，以保持表格与其他条件。

```
DELETE f
    FROM   field_data_body f
           INNER JOIN node n
                   ON f.entity_id = n.nid
           LEFT JOIN content_to_keep k
                  ON n.nid = k.nid
    WHERE  n.type = 'article'
           AND k.nid IS NULL 
```

那么我必须添加哪些选项来添加 LIMIT 参数。

编辑：感谢您的帮助，但大多数答案都使用该`where in`子句。当我使用它时，我收到一条错误消息“这个版本的 MySQL 还不支持 'LIMIT & IN/ALL/ANY/SOME”子查询'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:07:02.937

```
DELETE
FROM   field_data_body
WHERE id in (
    SELECT f.id
    FROM   field_data_body f
           INNER JOIN node n
                   ON f.entity_id = n.nid
           LEFT JOIN content_to_keep k
                  ON n.nid = k.nid
    WHERE  n.type = 'article'
           AND k.nid IS NULL)
LIMIT 10; --or whatever you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:13:35.830

在选择要删除的行的代码部分添加`ORDER BY`和`LIMIT`，然后将其放在派生表中并连接回要删除的表：

```
DELETE f_del
FROM field_data_body AS f_del
   JOIN
      ( SELECT f.PK                            --- the Primary Key of the table
        FROM   field_data_body f
               INNER JOIN node n
                       ON f.entity_id = n.nid
               LEFT JOIN content_to_keep k
                      ON n.nid = k.nid
        WHERE  n.type = 'article'
               AND k.nid IS NULL
        ORDER BY some_column
        LIMIT 100
      ) AS tmp
      ON tmp.PK = f_del.PK ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:04:50.823

也许能让你朝着正确的方向前进：

.... WHERE IN (SELECT ... FROM field_data_body WHERE nid IS NULL)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T20:05:48.417

[从另一个问题我能够做到以下几点](https://stackoverflow.com/questions/7124418/mysql-subquery-limit)

```
DELETE f 
FROM   field_data_body f 
WHERE  f.entity_id IN (SELECT * 
                   FROM   (SELECT f.entity_id 
                           FROM   field_data_body f 
                                  INNER JOIN node n 
                                          ON f.entity_id = n.nid 
                                  LEFT JOIN mbrd_delete_nodes_to_keep k 
                                         ON n.nid = k.nid 
                           WHERE  n.type = 'forum' 
                                  AND k.nid IS NULL 
                                  AND f.entity_type = 'node' 
                           LIMIT  1) AS t) 
```

# c# - c#根据字符数拆分字符串

> ID：14463935
> 
> 赞同：2
> 
> 时间：2013-01-22T16:59:29.350
> 
> 标签：c#

我正在查看 c# 中字符串的拆分功能的功能，我想知道是否有一种方法可以根据字符数而不是特定的分隔符拆分字符串？

例如，我能否以填充数组中前 7 个插槽的方式拆分“cat dog”，因为有 6 个字符和一个空格。

还是需要您指定要拆分的分隔符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T17:00:43.890

你在找[`String.ToCharArray()`](http://msdn.microsoft.com/en-us/library/ezftk57x.aspx)吗？这会创建一个字符数组...

但是，请记住，`string`无论如何已经支持迭代和索引：

```
// Print every third character
for (int i = 0; i < text.Length; i += 3)
{
    Console.WriteLine(text[i]);
}

// Print each character
foreach (char c in text)
{
    Console.WriteLine(c);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-22T17:00:49.830

没有内置方法可以做到这一点；你需要自己写。

*如果你想要一个单个*字符的数组，你可以简单地调用`.ToCharArray()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T17:22:14.537

`string.Substring( int startIndex, int length )`如果您需要分成多个字符的块，可能会有所帮助。

[http://msdn.microsoft.com/en-us/library/vstudio/aka44szs.aspx](http://msdn.microsoft.com/en-us/library/vstudio/aka44szs.aspx)

# ios - 您可以为 Apple TV 开发网络应用程序吗？

> ID：14463937
> 
> 赞同：1
> 
> 时间：2013-01-22T16:59:45.793
> 
> 标签：ios, apple-tv

我是应用程序开发的新手，我知道我们可以为 iPhone 和 iPad 开发应用程序。

但是，我不确定是否可以为 Apple TV 开发 Web 应用程序。您可以为 Apple TV 开发网络应用程序吗？如果是这样，我可以去哪里了解这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T18:08:49.197

Apple TV 上没有网络浏览器，因此您目前无法为未越狱的设备开发网络应用程序。本机应用程序也是如此。

越狱的 Apple TV 是另一回事，但听起来这不是您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T20:22:06.647

电视操作系统中不存在 UIWebView。这是[Apple 的 tvOS 开发人员库文档中的列表](https://developer.apple.com/library/prerelease/tvos/releasenotes/General/tvOS90APIDiffs/index.html#//apple_ref/doc/uid/TP40016577)

> tvOS 开发人员库 — PrereleaseDeveloperSearch iOS 9.1 到 tvOS 9 API 差异 iOS 9.1 到 tvOS 9.0 API 差异
> 
> **JavaScript**
> 
> TVMLJS（添加）
> 
> **Objective-C**
> 
> /usr/include Accounts (已移除) AddressBook (已移除) AddressBookUI (已移除) AssetsLibrary (已移除) AudioToolbox AVFoundation AVKit CloudKit Contacts (已移除) ContactsUI (已移除) CoreAudioKit (已移除) CoreBluetooth CoreData CoreLocation CoreMIDI (已移除) CoreMotion (已移除) CoreSpotlight CoreTelephony (已移除) EventKit (已移除) EventKitUI (已移除) ExternalAccessory (已移除) GameController GameKit GSS (已移除) HealthKit (已移除) HomeKit (已移除) iAd (已移除) LocalAuthentication (已移除) MapKit (已移除) MediaPlayer MessageUI (已移除) Metal MultipeerConnectivity (已移除) NetworkExtension (已移除) NewsstandKit (已移除) NotificationCenter (已移除) PassKit (已移除) Photos (已移除) PhotosUI (已移除) PushKit (已移除) QuickLook (已移除) ReplayKit (已移除) SafariServices (已移除) Social (已移除)StoreKit TVMLKit（已添加） TVServices（已添加） Twitter（已删除） UIKit VideoToolbox（已删除） WatchConnectivity（已删除） WatchKit（已删除） WebKit（已删除）
> 
> **迅速**
> 
> Accelerate Accounts（已删除） AddressBook（已删除） AddressBookUI（已删除） AssetsLibrary（已删除） AudioToolbox AudioUnit AVFoundation AVKit CloudKit 联系人（已删除） ContactsUI（已删除） CoreAudioKit（已删除） CoreBluetooth CoreData CoreFoundation CoreGraphics CoreLocation CoreMIDI（已删除） CoreMotion（已删除） CoreSpotlight CoreTelephony（已移除) Darwin EventKit (已移除) EventKitUI (已移除) ExternalAccessory (已移除) Foundation GameController GameKit GSS (已移除) HealthKit (已移除) HomeKit (已移除) iAd (已移除) LocalAuthentication (已移除) MachO MapKit (已移除) MediaPlayer MessageUI (已移除) Metal MultipeerConnectivity (已移除) NetworkExtension (已移除) NewsstandKit (已移除) NotificationCenter (已移除) ObjectiveC PassKit (已移除) 照片 (已移除) PhotosUI (已移除) PushKit (已移除) QuickLook (已移除)ReplayKit (已移除) SafariServices (已移除) simd Social (已移除) StoreKit Swift TVMLKit (已添加) TVServices (已添加) Twitter (已移除) UIKit VideoToolbox (已移除) WatchConnectivity (已移除) WatchKit (已移除) WebKit (已移除)

如果您想要更接近 Web 开发，请查看 TVML，它更便于 Web 开发人员使用 Apple 自己的标记语言为 TV 应用程序工作。

# android - 在android模拟器中将sqlite数据库数据导出到excel

> ID：14463938
> 
> 赞同：-1
> 
> 时间：2013-01-22T16:59:51.050
> 
> 标签：android, sqlite, export-to-excel

如何在 android 模拟器中使用 CSV 将 sqlite 数据库数据导出到 excel 表中？

这可能与否？

请给出一些想法，我是android平台的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:05:33.027

来自[Sqlite 文档](http://www.sqlite.org/sqlite.html)

将结果写入文件 默认情况下，sqlite3 将查询结果发送到标准输出。您可以使用“.output”命令更改此设置。只需将输出文件的名称作为 .output 命令的参数，所有后续查询结果都将写入该文件。使用“.output stdout”再次开始写入标准输出。例如：

```
sqlite> .mode list
sqlite> .separator |
sqlite> .output test_file_1.txt
sqlite> select * from tbl1;
sqlite> .exit
$ cat test_file_1.txt
hello|10
goodbye|20
$ 
```

如果您要替换 '|' 中的分隔符 到“，”它可能只是工作。当然，您应该学习如何`sqlite3`从 shell 中使用来查看表格内容。这要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-08T04:38:37.203

我最近在我的应用程序中实现了 excel 导出功能。我还包含了有关如何将过滤后的数据导出到 excel 而不是整个表的完整代码。

您需要为此创建第二个表。第二个将保存此操作所需的数据（在我的第二个表中，我删除了我的自动增量 ID 列，因为我不想在我的 excel 文件中使用它）。

您需要先清除第二个表，然后添加条目。

然后使用 SqLiteToExcel 对象将 db 导出到 excel 并将文件保存在某处。

然后我有一个电子邮件意图，其中附有用于共享的 excel 文件（允许与电子邮件以外的其他应用程序共享）。这是我的方法：

```
 private void ExportData() {

     //CHECK IF YOU HAVE WRITE PERMISSIONS OR RETURN
    int permission = ActivityCompat.checkSelfPermission(getActivity(), Manifest.permission.WRITE_EXTERNAL_STORAGE);

    if (permission != PackageManager.PERMISSION_GRANTED) {
        Toast.makeText(getContext(), "Storage permissions not granted", Toast.LENGTH_SHORT).show();
        return;
    }

    //get database object
    myDbhelper = new MyDbHelper(getContext());
    SQLiteDatabase database = myDbhelper.getWritableDatabase();

    //delete all entries in the second table
    database.delete("Table2",null,null);

    //Create a cursor of the main database with your filters and sort order applied
    Cursor cursor = getActivity().getContentResolver().query(
            uri,
            projections,
            selection,
            args,
            sortOrder);

    //loop through cursor and add entries from first table to second table
    try {
        while (cursor.moveToNext()) {
            final String ColumnOneIndex = cursor.getString(cursor.getColumnIndexOrThrow("COLUMN_ONE"));
            final String ColumnTwoIndex = cursor.getString(cursor.getColumnIndexOrThrow("COLUMN_TWO"));
            final String ColumnThreeIndex = cursor.getString(cursor.getColumnIndexOrThrow("COLUMN_THREE"));

      //add entries from table one into the table two
            ContentValues values = new ContentValues();
            values.put("TABLE2_COLUMN_1", ColumnOneIndex);
            values.put("TABLE2_COLUMN_2", ColumnTwoIndex );
            values.put("TABLE2_COLUMN_3", ColumnThreeIndex);

            database.insert("table2", null, values);
        }
    } finally {
        //close cursor after looping is complete
        cursor.close();
    }

     //create a string for where you want to save the excel file
    final String savePath = Environment.getExternalStorageDirectory() + "/excelfileTemp";
    File file = new File(savePath);
    if (!file.exists()) {
        file.mkdirs();
    }
     //create the sqLiteToExcel object
    SQLiteToExcel sqLiteToExcel = new SQLiteToExcel(getContext(), "databasefile.db",savePath);

    //use sqLiteToExcel object to create the excel file 
    sqLiteToExcel.exportSingleTable("table2","excelfilename.xls", new SQLiteToExcel.ExportListener() {
        @Override
        public void onStart() {

        }
        @Override
        public void onCompleted(String filePath) {
            //now attach the excel file created and be directed to email activity
            Uri newPath = Uri.parse("file://" + savePath + "/" +"excelfilename.xls");

            StrictMode.VmPolicy.Builder builder = new StrictMode.VmPolicy.Builder();
            StrictMode.setVmPolicy(builder.build());

            Intent emailintent = new Intent(Intent.ACTION_SEND);

            emailintent.setType("application/vnd.ms-excel");
            emailintent.putExtra(Intent.EXTRA_SUBJECT, "Subject");
            emailintent.putExtra(Intent.EXTRA_TEXT, "I'm email body.");
            emailintent.putExtra(Intent.EXTRA_STREAM,newPath);

            startActivity(Intent.createChooser(emailintent, "Send Email"));
        }
        @Override
        public void onError(Exception e) {
            System.out.println("Error msg: " + e);
            Toast.makeText(getContext(), "Failed to Export data", Toast.LENGTH_SHORT).show();
        }
    });
} 
```

我在我的应用程序中实现了这个方法并且它有效

# excel - 在 Excel 中将多行转换为单个堆积列

> ID：14463940
> 
> 赞同：4
> 
> 时间：2013-01-22T16:59:57.293
> 
> 标签：excel, rows, transpose, vba

我有各种品牌的巨大市场份额数据，如下所示：

```
1111 2222 3333 4444
5555      7777 8888
9999 0001 0002
0004 0005 0006 0007 
```

哪些宏代码可用于获取以下输出：

```
1111
2222
3333
4444
5555
<emptyCell>
7777
8888
9999
0001
0002
<emptyCell>
0004
0005
0006
0007 
```

还必须考虑空单元格。

还有可能在其他 Sheet 中获得输出吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T20:28:39.793

更改`INDEX`为处理器密集度较低的版本

在您要将数据复制到的任何工作表的第 1 行中：

```
=INDEX($A$1:$D$4,INT((ROW()-1)/4)+1,MOD(ROW()-1,4)+1) 
```

把它复制下来，一旦零开始出现，你就结束了。（这是唯一的问题 - 空白单元格将变为零。如果您也希望保留空白，那么您需要这个：

> =IF(ISBLANK(INDEX($A$1:$D$4,INT((ROW()-1)/4)+1,MOD(ROW()-1,4)+1)),"",INDEX( $A$1:$D$4,INT((ROW()-1)/4)+1,MOD(ROW()-1,4)+1))

)

如果您不是从第一行开始，则更`ROW()`改为`ROW()-X`X 是从顶部向下的行数（即第 2 行为 1，第 3 行为 2，第 800 行为 799）
如果有不同的列数，把4改成合适的数字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-04T19:25:31.493

从 SeanC 的回答（感谢好友）修改为通用用法，以便具有其他范围维度和起始单元格的人可以使用它：

将“$RANGE$”替换为对您的范围的引用将“$CELL$”替换为对输出列的第一个单元格的引用：

```
=INDEX( $RANGE$ ,INT((ROW()-ROW( $CELL$ ))/COLUMNS( $RANGE$ ))+1,MOD(ROW()-ROW( $CELL$ ),COLUMNS( $RANGE$ ))+1) 
```

把它拖下来。当然，请确保 $RANGE$ 和 $CELL$ 在行和列上都用“$”符号固定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:08:01.397

假设您的范围是 A1:D4，这里有一个 VBA 宏可以做到这一点（只需将值放在 E 列下）。

```
Sub RangeToColumn()

Dim varray As Variant
Dim i As Long, j As Long, k As Long

Application.ScreenUpdating = False
k = 1

varray = Range("A1:D4").value
For i = 1 To UBound(varray, 1)
    For j = 1 To UBound(varray, 2)
        Cells(k, 5).value = varray(i, j)
        k = k + 1
    Next
Next

Application.ScreenUpdating = True

End Sub 
```

您可能会喜欢并使用字典对象并将数组转置到列上，但这更简单，并且字典对象在 Mac 上不起作用。您也可以使用 "Range("E" & k)" 而不是 "Cells(k, 5)" 但 Cells() 稍微快一些，因为它不需要连接。

另请注意，通过关闭屏幕更新，这将运行得更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-16T15:17:08.213

```
Sub Makealist()

Application.ScreenUpdating = False

Dim rng As Range
' Destination of List
Worksheets("SomeWorksheet1").Activate
Worksheets("SomeWorksheet1").Range("SomeRange1").Select

' Range to Convert to list
Set rng = Worksheets("SomeWorksheet2").Range("SomeRange2")

' Makes sure that all "Blank cells are really Blank"
For Each c In rng.Cells
    If Len(c) = 0 Then
        c.Value = ""
    End If
Next

' Creates the list
For Each c In rng.Cells
    If IsEmpty(c.Value) = False Then
        Selection.Value = c.Value
        Selection.Offset(1, 0).Select
    End If
Next

Application.ScreenUpdating = True

End Sub 
```

# ios - 为交错的 PCM 音频设置音频单元格式和渲染回调

> ID：14463943
> 
> 赞同：6
> 
> 时间：2013-01-22T17:00:12.583
> 
> 标签：ios, audio, audiounit

我目前正在尝试播放我在一系列 UDP 数据包中收到的音频。这些被解码为具有以下属性的 PCM 帧：

*   2个频道
*   交错的
*   单个通道中每个样本 2 个字节（因此每帧 4 个字节）
*   采样率为 48000。

每个 UDP 数据包包含 480 帧，因此缓冲区的大小为 480 * 2(channels) * 2(bytes per channel)。

我需要设置一个音频单元来播放这些数据包。所以，我的第一个问题是，我应该如何为音频单元设置 AudioStreamBasicDescription 结构？查看文档我什至不确定交错 PCM 是否是可接受的格式。

这是我到目前为止所得到的：

```
struct AudioStreamBasicDescription {
   Float64 mSampleRate;                 //48000
   UInt32  mFormatID;                   //?????
   UInt32  mFormatFlags;                //?????
   UInt32  mBytesPerPacket;             //Not sure what "packet" means here
   UInt32  mFramesPerPacket;            //Same as above
   UInt32  mBytesPerFrame;              //Same
   UInt32  mChannelsPerFrame;           //2?
   UInt32  mBitsPerChannel;             //16?
   UInt32  mReserved;                   //???
};
typedef struct AudioStreamBasicDescription  AudioStreamBasicDescription; 
```

其次，设置后，我不确定如何从 UDP 回调中获取帧到实际的音频单元渲染函数。

我目前有一个来自套接字侦听器的回调函数，我在其中生成包含我要播放的音频的 int16 * 缓冲区。据我了解，我还必须为以下形式的音频单元实现渲染回调：

```
OSStatus RenderFrames(
    void                        *inRefCon,
    AudioUnitRenderActionFlags  *ioActionFlags,
    const AudioTimeStamp        *inTimeStamp,
    UInt32                      inBusNumber,
    UInt32                      inNumberFrames,
    AudioBufferList             *ioData)
{
    //No idea what I should do here.
    return noErr;
} 
```

综上所述，我认为我的套接字接收回调应该做的是解码帧，并将它们放在缓冲区结构中，以便 RenderFrames 回调可以从该缓冲区中获取帧，并播放它们。**这个对吗？**如果是这样，一旦我在 RenderFrames 函数中获取下一帧，**我如何实际“提交”以进行播放**？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T01:13:37.763

一次拿一个部分

## 音频流基本描述符

Apple 的 ASBD 文档在[此处](https://developer.apple.com/library/mac/#documentation/musicaudio/reference/CoreAudioDataTypesRef/Reference/reference.html)。澄清：

*   一帧音频是一组时间一致的音频样本。换句话说，每个通道一个样本。因此，对于 Stereo，这是`2`.
*   对于 PCM 格式，没有打包。据说，，`mBytesPerPacket = mBytesPerFrame`但`mFramesPerPacket=1`我不确定这是否真的被使用过。
*   `mReserved`未使用且必须使用`0`
*   请参阅和的[文档](https://developer.apple.com/library/mac/#documentation/musicaudio/reference/CoreAudioDataTypesRef/Reference/reference.html)。CoreAudioTypes.h 中有一个方便的辅助函数，用于在.`mFormatID``mFormatFlags``CalculateLPCMFlags``CoreAudioTypes.h`
*   多声道音频通常是交错的（`mFormatFlags`如果你真的不希望这样，你可以设置一点）。
*   还有另一个辅助函数可以填写整个 ASBD -`FillOutASBDForLPCM()`用于线性 PCM 的常见情况。
*   `mFormatID`remoteIO 单元不支持和`mFormatFlags`不支持的许多组合- 我发现在 iOS 上进行实验是必要的。

这是我的一个项目中的一些工作代码：

```
AudioStreamBasicDescription inputASBL = {0}; 

inputASBL.mSampleRate =          static_cast<Float64>(sampleRate);
inputASBL.mFormatID =            kAudioFormatLinearPCM;
inputASBL.mFormatFlags =         kAudioFormatFlagIsPacked | kAudioFormatFlagIsSignedInteger,
inputASBL.mFramesPerPacket =     1;
inputASBL.mChannelsPerFrame =    2;
inputASBL.mBitsPerChannel =      sizeof(short) * 8;
inputASBL.mBytesPerPacket =      sizeof(short) * 2;
inputASBL.mBytesPerFrame =       sizeof(short) * 2;
inputASBL.mReserved =            0; 
```

## 渲染回调

CoreAudio 采用 Apple 描述的*拉式*模型。也就是说，当CoreAudio需要填充缓冲区时，会从一个实时线程中调用render回调。从您的问题来看，您似乎期望相反 - 将数据推送到音频输出。

基本上有两种实现选择：

1.  在渲染回调中从 UDP 套接字执行非阻塞读取（作为一般规则，您在此处执行的任何操作都应该是快速且非阻塞的）。
2.  维护一个音频 FIFO，在接收和渲染回调使用时将样本插入其中。

第二个可能是更好的选择，但您将需要自己管理缓冲区过度和不足。

`ioData`参数指向分散-聚集控制结构。在最简单的情况下，它指向一个包含所有帧的缓冲区，但可以包含几个在它们之间有足够帧来满足的缓冲区`inNumberFrames`。通常，预先分配一个足够大的缓冲区`inNumberFrames`，将样本复制到其中，然后修改`AudioBufferList`指向 buy 的对象`ioData`以指向它。

在您的应用程序中，您可能会对解码的音频数据包采用分散收集方法，在解码时分配缓冲区。但是，您并不总能获得所需的延迟，并且可能无法安排`inNumberFrames`与解码的 UDP 音频帧相同。

# php - Javascript：postAjax 不发布任何内容

> ID：14463944
> 
> 赞同：1
> 
> 时间：2013-01-22T17:00:14.913
> 
> 标签：php, javascript, ajax, post

早上好！

我正在编写一个小型 AJAX 应用程序，使用[此](https://stackoverflow.com/questions/5350377/how-to-make-an-ajax-request-to-post-json-data-and-process-the-response)函数作为基础，并使用 php 作为服务端语言。

这是涉及的javascript代码

```
var dati = {};
dati.nome = d.getElementById('nome').value;
dati.cognome = d.getElementById('cognome').value;
console.log(dati);
url = "post.php";
jsonToPost = dati;
console.log(url);

processResponse = function(responseText){
    console.log(responseText);
    d.getElementById('response').innerHTML = responseText;
}
_SU3.postAjax(url, processResponse, jsonToPost);
}); 
```

这是我的php代码，只是一个测试ajax的后处理器

```
<?php
if(isset($_POST['nome'])){

$nome = $_POST['nome'];
$cognome = $_POST['cognome'];
$data['nome'] = $nome;
$data['cognome'] = $cognome;

$data = json_encode($data);

echo $data;
} else {
    echo "Errore!";
}
?> 
```

我从 ajaxRequest 得到的响应是“Errore！”，这意味着它没有向脚本发布任何内容。

我错过了任何明显的错误吗？还是我做错了什么？

_SU3.ajax() 函数（见[this](https://stackoverflow.com/questions/5350377/how-to-make-an-ajax-request-to-post-json-data-and-process-the-response) for reference）工作得很好，所以我很惊讶它不起作用

---编辑广告萤火虫响应---我希望我发布了正确的东西

```
request headers:
POST /~francesco/post.php HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:16.0) Gecko/2010010 Firefox/16.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: it-IT,it;q=0.8,en-US;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://localhost/~francesco/ajax.html
Content-Length: 26
Pragma: no-cache
Cache-Control: no-cache 
```

[屏幕截图](http://cl.ly/image/270z0l2n0A3E/Schermata%202013-01-22%20alle%2018.19.54.png) 中的屏幕截图还有其他信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:27:14.170

您可能想要替换该行：

```
ajaxRequest.send("data=" + encodeURIComponent(data)); 
```

在 _SU3.postAjax 中：

```
ajaxRequest.send(data); 
```

然后将第三个参数 (jsonToPost) 作为字符串发送，如下所示：

```
"nome=arg1&cognome=arg2" 
```

例如：

```
"nome="+d.getElementById("nome").value + "&cognome="+d.getElementById("cognome").value` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-22T17:54:57.933

正如 puckipedia 所建议的，您需要将要发送的对象编码为查询字符串。以下方法将根据传入的对象创建参数字符串：

```
_SU3.postAjax = function(url, callback, data) {

   var parameters = '';

   for (var p in data){
     parameters  += p + '=' + encodeURIComponent(data[p]) + '&';
   }

   var ajaxRequest = _SU3.getAjaxRequest(callback);
   ajaxRequest.open("POST", url, true);
   ajaxRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
   ajaxRequest.setRequestHeader("Connection", "close");
   ajaxRequest.send(parameters);
} 
```

您提供的链接中建议的函数假设您传递的是 JSON，而不是 js 对象。

注意：您发布的服务器代码应正确解释数据：

```
$nome = $_POST['nome']; 
```

# ruby-on-rails - form_for 和 form_tag，什么时候用哪一个？

> ID：14463946
> 
> 赞同：14
> 
> 时间：2013-01-22T17:00:23.820
> 
> 标签：ruby-on-rails

我正在阅读一本 Rails 书，到目前为止它一直`form_for`用于创建表单。在它正在为用户构建登录页面的新章节中，它正在使用`form_tag`。所以我想知道我们应该何时以及如何知道使用哪一个？难道他也做了一件教育性的事情来展示这`form_tag`一点吗？还是应该考虑更多的技术原因？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T17:09:08.510

[`form_tag`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-form_tag)只需创建一个表单。[`form_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)为模型对象创建一个表单。它们不可互换，您应该使用适合特定情况的那个。

`form_for`为模型对象创建表单更容易使用，因为它根据对象是新记录还是已保存记录来确定要使用的 url 和使用的 http 方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-22T17:10:53.730

在大多数情况下，当您使用模型将数据发送到数据库时，使用方法如`create`, `update`, `destroy`. 对于这种类型的操作，您可以使用`form_for`.

而是`form_tag`只创建一个简单的`form`html，例如，一个搜索：

```
 <%= form_tag("/search", :method => "get") do %>
   <%= label_tag(:q, "Search for:") %>
   <%= text_field_tag(:q) %>
   <%= submit_tag("Search") %>
<% end %> 
```

# excel - 如何有效地增加整个 Excel 工作表上每个单元格的字体大小？

> ID：14463947
> 
> 赞同：2
> 
> 时间：2013-01-22T17:00:26.547
> 
> 标签：excel, vsto, excel-2007, excel-2010, vba

如何有效地增加整个 Excel 工作表上每个单元格的字体大小？当我使用 foreach 循环时，excel 没有响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:15:49.047

试试这个子：

```
 Sub IncreaseFontSize()    
     ActiveSheet.Cells.Font.Size = 14
  End Sub 
```

...只需将大小更改为您想要的任何大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T21:18:49.093

不需要 VBA（当然，除非是另一个宏的一部分）：

只需选择所有工作表（激活第一个工作表，然后按下`Shift`并选择最后一个工作表），然后选择所有单元格（`Ctrl`- ）并在选项卡的字体大小下拉菜单`A`中输入所需的字体大小或使用“增加字体大小”按钮。`Home`

# python - 如何使用 python struct.unpack

> ID：14463949
> 
> 赞同：0
> 
> 时间：2013-01-22T17:00:28.623
> 
> 标签：python, struct, unpack

我有一个包含以下内容的文件

```
(dp1 
S'SomethingString1' 
p2
(dp3
S'SomethingString2' 
p4
I3
sS'SomethingString3' 
p5
I7105
sS'SomethingString4'
p6
I0 
```

如何使用 python“struct.unpack”从中获取数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:02:02.883

您有一个泡菜文件，请改用该[`pickle`模块](http://docs.python.org/2/library/pickle.html)。

该`struct`模块在这里无济于事；该模块用于按照 C 结构约定打包的二进制数据，并且您正在查看的 pickle 格式是文本的。

# java - ResultSet.next() 返回 false

> ID：14463954
> 
> 赞同：1
> 
> 时间：2013-01-22T17:00:44.707
> 
> 标签：java, sql, jdbc, db2

在 DB2 中，我执行一个 select 语句并获得如下的 ResultSet

```
PreparedStatement ps;
ps = connection.prepareStatement("myQuery");
ps.setString(1, "data");
ps.execute();
ResultSet rs;
rs = ps.getResultSet(); 
```

出于某种原因，我有时会得到`rs.next()`，`false`这意味着它返回 0 行，而如果我在数据库上执行相同的查询，我会得到 2 行。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T17:02:14.000

尝试这个：

```
PreparedStatement ps;
ps = connection.prepareStatement("myQuery");
ps.setString(1, "data");
ResultSet rs=ps.executeQuery();
; 
```

# excel - 在 Excel 中，将每一行中的一列中的所有值相加，其中另一列是特定值

> ID：14463955
> 
> 赞同：46
> 
> 时间：2013-01-22T17:00:47.080
> 
> 标签：excel, excel-formula

我想知道是否有一种简单的方法可以做我正在寻找的事情。基本上，我在 Excel 2011 中有一个包含大量数据的资产负债表。我一直希望看到的一个特定信息是尚未报销的金额。换句话说，我有一栏是支付的金额，另一栏是是否已经报销（是/否）。我想对报销字段等于“否”的所有已支付金额求和。

我承认我可以对整个列求和并过滤掉那些已报销的列，但我希望它显示全部金额，无论打开什么过滤器（或者如果没有打开过滤器）。

我无法找到好的关键字来向谷歌描述这个，所以我在这里问。我想在 Excel 中完成此操作，而不是在外部程序或脚本中。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-01-22T17:04:29.010

如果 A 列包含要报销的金额，而 B 列包含表示是否已进行报销的“是/否”，则以下任一方法都可以，但建议使用第一个选项：

```
=SUMIF(B:B,"No",A:A) 
```

或者

```
=SUMIFS(A:A,B:B,"No") 
```

这是一个示例，它将显示一小组样本数据的已付金额和未付金额。

```
 A         B            C                   D
 Amount    Reimbursed?  Total Paid:         =SUMIF(B:B,"Yes",A:A)
 $100      Yes          Total Outstanding:  =SUMIF(B:B,"No",A:A)
 $200      No           
 $300      No
 $400      Yes
 $500      No 
```

![Excel 计算结果](../Images/9e37b193bff71f85c6c5075090e3fde1.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-22T17:12:37.147

您可以使用`SUMIF`. 如果另一个单元格中的值符合指定条件，这允许您对单元格中的值求和。这是一个例子：

```
 -   A         B
 1   100       YES
 2   100       YES
 3   100       NO 
```

使用公式：`=SUMIF(B1:B3, "YES", A1:A3)`，您将得到 的结果`200`。

这是我刚刚在 Excel 中做的一个工作示例的屏幕截图：

![Excel SUMIF 示例](../Images/4cb5243e4629b1c8713e04ed196d3d90.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T17:06:20.137

您应该能够为此使用 IF 函数。语法是`=IF(condition, value_if_true, value_if_false)`. 要添加仅包含未报销金额的额外列，您可以使用以下内容：

```
=IF(B1="No", A1, 0) 
```

并总结。可能还有一种方法可以将它包含在列下方的单个单元格中，但是在我的脑海中，我想不出任何简单的东西。

# c++ - C++11，枚举类，使用 g++ 的未定义引用，使用 clang++

> ID：14463957
> 
> 赞同：4
> 
> 时间：2013-01-22T17:00:56.213
> 
> 标签：c++, c++11, enums, undefined-reference, enum-class

我使用了新的 C++11“枚举类”类型，并在使用 g++ 时观察到了“未定义的引用”问题。clang++ 不会发生这个问题。我不知道我做错了什么还是 g++ 错误。

重现问题的代码是：（4 个文件：enum.hpp、enum.cpp、main.cpp 和 Makefile）

```
// file: enum.hpp
enum class MyEnum {
  val_1,
  val_2
};

template<typename T>
struct Foo 
{
  static const MyEnum value = MyEnum::val_1;
};

template<>
struct Foo<int>
{
  static const MyEnum value = MyEnum::val_2;
};

template<typename T>
void foo(const T&); 
```

和...

```
// file: enum.cpp 
#include <iostream>
#include "enum.hpp"

template<typename T>
void foo(const T&)
{
  switch(Foo<T>::value) {
  case MyEnum::val_1:
    std::cout << "\n enum is val_1"; break;
  case MyEnum::val_2:
    std::cout << "\n enum is val_2"; break;
  default:
    std::cout << "\n unknown enum"; break;
  }
}

// Here we force instantation, thus everything should be OK!?!
//
template void foo<int>(const int&);
template void foo<double>(const double&); 
```

和...

```
// file: main.cpp
#include "enum.hpp"

int
main()
{
  foo(2.);
  foo(2);
} 
```

和Makefile...

```
COMPILER = g++ # does no work
#COMPILER = clang++ # Ok

all: main

main : main.cpp enum.cpp
    $(COMPILER) -std=c++11 -c enum.cpp -o enum.o
    $(COMPILER) -std=c++11 main.cpp enum.o -o main 
```

当我使用 g++ 时，我得到：

```
make -k 
g++  -std=c++11 -c enum.cpp -o enum.o
g++  -std=c++11 main.cpp enum.o -o main
enum.o: In function `void foo<int>(int const&)':
enum.cpp:(.text._Z3fooIiEvRKT_[_Z3fooIiEvRKT_]+0xe): undefined reference to `Foo<int>::value'
enum.o: In function `void foo<double>(double const&)':
enum.cpp:(.text._Z3fooIdEvRKT_[_Z3fooIdEvRKT_]+0xe): undefined reference to `Foo<double>::value'
collect2: error: ld returned 1 exit status
make: *** [main] Error 1
make: Target `all' not remade because of errors. 
```

但是使用 clang++ 一切都很好（没有编译错误）。

欢迎任何解释，因为我在这里迷路了。

谢谢！:)

* * *

关于我的配置：

```
g++ --version
g++ (Debian 4.7.2-5) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

clang++ --version
Debian clang version 3.0-6 (tags/RELEASE_30/final) (based on LLVM 3.0)
Target: x86_64-pc-linux-gnu
Thread model: posix

uname -a
Linux IS006139 3.2.0-4-amd64 #1 SMP Debian 3.2.35-2 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T17:20:54.010

你得到这些错误的原因是因为 g++ 期望你的静态变量被定义在某个地方。

有几种不同的方法可以解决这个问题：

由于您使用的是整数类型，因此您可以将结构更改为从integral_constant 继承。

```
template<typename T>
struct Foo : std::integral_constant<MyEnum, MyEnum::val_1>
{
};

template<>
struct Foo<int> : std::integral_constant<MyEnum, MyEnum::val_2>
{
}; 
```

您还可以声明变量 constexpr

```
template<typename T>
struct Foo
{
  static constexpr MyEnum value = MyEnum::val_1;
};

template<>
struct Foo<int>
{
  static constexpr MyEnum value = MyEnum::val_2;
}; 
```

您可以在头文件中定义静态变量。

```
template<typename T>
struct Foo
{
  static const MyEnum value = MyEnum::val_1;
};

template<typename T>
const MyEnum Foo<T>::value;

template<>
struct Foo<int>
{
  static const MyEnum value = MyEnum::val_2;
};

// enum.cpp
const MyEnum Foo<int>::value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T06:36:34.817

这是 g++ 中的一个错误。`static`如果该数据成员是*odr-used* ，则需要该数据成员的定义，但这里唯一提到`Foo<int>::value`or`Foo<double>::value`是：

```
switch(Foo<T>::value) { 
```

根据**[basic.def.odr]p2**和**p3**，这不是*odr 的使用*，`Foo<T>::value`因为：

*   左值到右值的转换立即应用于表达式`Foo<T>::value`，并且
*   实体`Foo<T>::value`在表达式*的潜在结果集中*`Foo<T>::value`，并且
*   `Foo<T>::value`满足出现在常量表达式中的要求

因此在这个程序中不需要`Foo<int>::value`nor的定义。`Foo<double>::value`

但是，建议您始终定义静态数据成员，如下所示：

```
// In your header file
template<typename T> const MyEnum Foo<T>::value;
// In your .cpp file
template<> const MyEnum Foo<int>::value; 
```

第一个必须放在标题中，因为模板的任何用户都可能需要实例化它；它的重复实例将被合并。第二个*不能*放在头文件中——在整个程序中这个实体只能有一个定义，因为它不是模板化的（而且它不是内联函数或类或枚举定义，它也允许多个定义在不同的翻译单元中）。

# sencha-touch-2 - Sencha Touch 嵌套窗体高度问题

> ID：14463958
> 
> 赞同：4
> 
> 时间：2013-01-22T17:00:58.027
> 
> 标签：sencha-touch-2

在构建视图时，我尝试在面板中嵌套一个表单面板，然后是一个面板。

所以基本上有一个这样的嵌套结构：

`Ext.Panel`
`--Ext.form.Panel`
`--Ext.Panel`

问题是，窗体没有高度。如果表单面板能够获得所需的高度，那就太好了。就像 CSS 中的 height: auto 一样。

有任何想法吗？

代码如下：

```
Ext.define('MyApp.view.MyView', {
    extend: 'Ext.Panel',
    xtype: 'myview',

    config : {
        scrollable: true,
        items : [
            {
                xtype: 'formpanel',
                items: [
                    {
                        html: 'Content in formpanel'
                    }
                ]
            },
            {
                xtype: 'panel',

                items: [
                    {
                        html: "Content in panel"
                    }
                ]
            }
        ]
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T08:58:57.803

您可以尝试使用`layout`和`flex`这样的属性：

```
Ext.define('MyApp.view.MyView', {
extend: 'Ext.Panel',
xtype: 'myview',

config : {
    scrollable: true,
    layout: 'vbox',
    defaults: {flex: 1},
    items : [
        {
            xtype: 'formpanel',
            items: [
                {
                    html: 'Content in formpanel'
                }
            ]
        },
        {
            xtype: 'panel',

            items: [
                {
                    html: "Content in panel"
                }
            ]
        }
    ]
}
}); 
```

您可以从这个[视频](http://www.sencha.com/learn/intro-to-layouts-in-sencha-touch-2)中了解更多关于 Sencha Touch 2 布局的信息。希望对您有所帮助 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T21:30:13.477

要在其他容器中正确显示表单面板（Ext.form.Panel，Sencha Touch 2.3+），您需要添加`scrollable: null`属性。查看示例

```
{
    xtype: 'formpanel',
    scrollable: null,         
    items: [
        ...
    ]
} 
```

# angularjs - AngularJS $scope 不填充视图

> ID：14463962
> 
> 赞同：0
> 
> 时间：2013-01-22T17:01:24.760
> 
> 标签：angularjs

我有这样的看法：

```
<div ng-controller= "test" ng-init = "doit()">
    <span>{{testval}}</span>
</div> 
```

视图的控制器如下所示：

```
function test($scope){
    var counter = 0;
    $scope.doit = function(){
       console.log('switched to view');
       $scope.testval = counter++; 
    };
}; 
```

我第一次切换到由“测试”控制的视图时，它显示“0”。之后，它什么也没有显示，但 console.log 继续触发。每次切换到视图并通过修改 $scope 成功更新视图时，如何将其设置为执行“doit”？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T17:21:53.033

删除 ng-init() 并将对 doit() 的调用放入您的控制器中：

```
function test($scope){
    var counter = 0;
    $scope.doit = function(){
       console.log('switched to view');
       $scope.testval = counter++; 
    };
    $scope.doit();
}; 
```

每次切换到此视图时，控制器代码都会执行。如果您希望计数器在视图更改之间保持不变，则必须将其放入服务或 $rootScope 中（因为控制器，以及它的 $scope，在您移动到另一个视图时会被销毁）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T17:28:30.103

不得不添加`$scope.digest()`到末尾`doit`。列出的示例是我在更小范围内遇到的逻辑的简化示例。实际上，它是一个调用的函数，它`getPhysOrd`执行一个异步模板化的 websocket 桥以从服务器查询数据。它必须能够即时执行此操作。调用摘要强制观察者根据模型更改更新视图。谢谢

# css - 在 IE10 的 CSS 中使用 SVG 过滤器

> ID：14463969
> 
> 赞同：4
> 
> 时间：2013-01-22T17:01:43.617
> 
> 标签：css, image, internet-explorer-10, svg-filters

IE10 已放弃对 DirectX 图像处理的支持；它现在使用 SVG 标准。但是，例如，在 Firefox 中，您可以将 svg 过滤器应用于`<img>`除 IE10 之外的任何元素，而我似乎只能让它在`<svg> <image ... /> </svg>`.

我需要为不同的浏览器编写单独的标记吗？这似乎是错误的。

我尝试使用过滤器之类的 CSS 过滤`-ms-filter`器，但这些过滤器都不适用于 IE10。

更新 1：

好吧，我想我可能不是特别清楚。

```
<!DOCTYPE html>
<style>
    .pop {

        filter: url(#pixelate);

    }

    .pop:hover {
        filter: none;
    }

    .lol {
        filter: url(#pixelate);
    }

    .lol:hover {
        filter: none;
    }

    .svgRoot
{
    height: 150px;
    width: 200px;
}
</style>
<svg class="svgRoot">
<image class="lol" x="0" y="0" width="100px" height="100px"  xlink:href="http://i.imgur.com/M5TIb.jpg" />
</svg>

<svg class="svgRoot">
    <defs>
        <filter id="pixelate">
            <feMorphology operator="erode" radius="2" />
        </filter>
    </defs>
    <image x="0" y="0" width="100px" height="100px" xlink:href="http://i.imgur.com/M5TIb.jpg" filter="url(#pixelate)" />
    <text class="svgText" x="25%" y="90%" filter="url(#pixelate)">SVG text</text>
</svg>

<img src="http://i.imgur.com/M5TIb.jpg" width="100" class="pop"> 
```

在 Firefox 中，最后一个元素 ,`<img>`过滤器有效。但是，它不在 IE10 中。我可以在这里使用带有 DX 的 IE4-IE9 实现相同的效果。效果。但是 IE10 实现了 SVG。然而，它似乎只适用于`<svg>`标签中包含的元素。那么如何在不编写不同标记的情况下在 IE10 中进行任何滤镜效果呢？我觉得我一定是错过了什么...

希望这可以清除它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:42:42.417

如果您需要 IE10+ 中的特定样式，它将在 CSS 中使用：

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) { styles here } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T00:44:09.467

如果您在公司内部执行此操作，您可以请求系统管理员[配置 IE10 的组策略以接受旧式过滤器语法](http://technet.microsoft.com/en-us/library/jj891001.aspx)。如果你在开放的互联网上这样做，那么你就是 SOL。新内容仅适用于 svg 元素，旧内容已被删除。

# java - 随机密码生成

> ID：14463970
> 
> 赞同：-2
> 
> 时间：2013-01-22T17:01:44.220
> 
> 标签：java, random

我写了一个程序，我想要一些以大写字母+数字开头的输出。然后从允许的字符中随机生成一些。

但我发现输出包含如下空格：`k r w ea`. 而我期望：`W3krwea`。

我不知道为什么这些空格会出现在我的输出中。

```
import java.util.Random;
import sun.security.util.Password;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author taskin
 */

    public class RPG
{

    public static String generate(String allowedCharacters,
                                  boolean mustHaveUppercase, boolean mustHaveDigit,
                                  int minLength, int maxLength)
    {
        Random rand=new Random();
        String rp = null; // Random Password
        int Length=allowedCharacters.length();
        char[] password=new char[25];
        int [] asc=new int[18];
        char[] UpperCase=new char[25];
        char[] Digit=new char[25];
        char[] Mixed=new char[25];
        int point1=0,point2=0,point3=0;

        for (int i=0;i<Length;i++)
        {
            asc[i]=(int)allowedCharacters.charAt(i);

        }
        for (int k=0;k<Length;k++)
        {
            if (asc[k]>=65 && asc[k]<=90)
            {
                UpperCase[point1]=(char)asc[k];
                point1++;
                continue;
            }
            else if (asc[k]>=48 && asc[k]<=57)
            {
                Digit[point2]=(char)asc[k];
                point2++;
                continue;
            }
            else
            {
                Mixed[point3]=(char)asc[k];
                point3++;
            }

        }
        StringBuilder strbld=new StringBuilder();
        int length=maxLength-minLength+1+minLength;
        strbld.append(UpperCase[rand.nextInt(UpperCase.length)]);//get a uppercase char
        strbld.append(Digit[rand.nextInt(Digit.length)]);//get a digit
        for(int i=0;i<length-2;i++){
            strbld.append(Mixed[rand.nextInt(Mixed.length)]);
        }
        rp=strbld.toString();

        // Your code to set rp appropriately goes here

        return rp;
    }

    public static void main(String[] args)
    {
        String allowedCharacters = "weakPasSWorD1234$*";
        boolean mustHaveUppercase = true;
        boolean mustHaveDigit = true;
        int minLength = 3;
        int maxLength = 20;
        String randomPassword = generate(allowedCharacters,
                                         mustHaveUppercase, mustHaveDigit, minLength,
                                         maxLength);
        System.out.println("Random password: " + randomPassword);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:56:17.443

`.length`您正在使用的内容将返回数组的总长度。`Char`大约是 25 左右。但实际上，您的长度约为 4-5 个字符。所以，它会产生一些空格。注意：功能不一样`.length()`（我认为你误解了。）

请查看[此](https://stackoverflow.com/questions/8675629/whats-the-difference-between-length-and-length)线程以使概念清晰。

使用您在循环中使用的相同长度。将块更改`StringBuilder`为：

```
 StringBuilder strbld=new StringBuilder();
    int length=maxLength-minLength+1+minLength;
    System.out.println("n     "+strbld.append(UpperCase[rand.nextInt(point1)]));//;

    //get a uppercase char
    strbld.append(Digit[rand.nextInt(point2)]);
    for(int i=0;i<length-2;i++){
        strbld.append(Mixed[rand.nextInt(point3)]); 
```

输出：

```
 W1aearere$karasa$akke 
```

没有空白。

# jquery - jQuery单击复选框不检查Firefox

> ID：14463971
> 
> 赞同：2
> 
> 时间：2013-01-22T17:01:45.613
> 
> 标签：jquery, firefox

具体来说，输入类型复选框的内存 dom 不接收 FireFox 中的“已检查”属性（或任何其他已检查指示器）。

注释行可以取消注释以查看测试通过，但目前您将在 Firefox 中看到测试失败。

[http://jsfiddle.net/mE3xb/2/](http://jsfiddle.net/mE3xb/2/)

```
var cb = $('<input type="checkbox" />')
//var cb = $('input'); 
if (cb.is(':checked')) alert("checkbox says it's already checked"); 
cb.click(); 
if (cb.is(':checked')) alert("checkbox clicked correctly!"); 
else alert("fail!"); 
```

我在做不规范的事情吗？有什么建议吗？我基本上是依靠 jQuery .click 来实际检查 UI 中的复选框（我不想使用 .attr、.prop、.val，因为它会破坏我正在进行的良好封装。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T17:04:16.367

由于您使用的是 jQuery 1.4.3，看起来您最好的选择是：

```
cb[0].setAttribute('checked', 'checked'); // plain old vanilla JS 
```

**[jsFiddle Demo](http://jsfiddle.net/mE3xb/11/)** - 在 FireFox & Chrome & IE8 中测试

`.click()`在 Firefox 中的许多奇怪情况下都不起作用（它在该浏览器中本质上是错误的/不同的）。我会假设因为它实际上在 DOM 上还不可用，所以它不知道这个事件会在哪里。这是诸如事物`.prop()`存在等的众多原因之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:05:11.143

使用`cb.prop('checked', true)`而不是`cb.click()`检查您的复选框

**小提琴更新[http://jsfiddle.net/mE3xb/7/](http://jsfiddle.net/mE3xb/7/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-15T21:04:48.433

我知道这是一个老问题，但我偶然发现了一个对我的单元测试有用的答案：

首先，我切换选中的属性：

```
checkbox4[0].checked = !checkbox4[0].checked; 
```

然后在那之后，我触发“只是”点击处理程序（通过使用 triggerHandler 它实际上并没有在其他浏览器上再次选中/取消选中该框）

```
checkbox4.triggerHandler( "click" ); 
```

这模拟了用户“单击”复选框并选中/取消选中它。不像您希望的那样封装以满足您的需求（通过阅读上述评论和答案），但它似乎比目前接受的答案做得更彻底。

# node.js - 如何使用 heroku + node.js + express 设置安全 cookie？

> ID：14463972
> 
> 赞同：14
> 
> 时间：2013-01-22T17:01:52.280
> 
> 标签：node.js, cookies, heroku, express

我在 Cedar 堆栈上运行了一个 node.js 应用程序，我很困惑为什么安全 cookie 不起作用。

```
"express": "3.0.3",
"node": ">=0.8.14",

...
app.use(express.session({
        secret : 'somesecret',
        store : // store works fine, sessions are stored
        key : 'sid',
        cookie : {
            secure : true, // it works without the secure flag (cookie is set)
            proxy : true,  // tried using this as well, no difference
            maxAge: 5184000000 // 2 months
        }
}));
... 
```

在 localhost 上一切正常，但在 heroku 上我似乎无法设置安全 cookie。我究竟做错了什么？[文档](https://devcenter.heroku.com/articles/http-routing)说负载均衡器终止了 SSL，是否需要在那里配置？
多谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T06:15:14.167

## 解决方案

问题是我设置`proxy: true`错了地方，应该是这样的：

```
...
app.enable('trust proxy'); // optional, not needed for secure cookies
app.use(express.session({
    secret : 'somesecret',
    store : ..., // store works fine, sessions are stored
    key : 'sid',
    proxy : true, // add this when behind a reverse proxy, if you need secure cookies
    cookie : {
        secure : true,
        maxAge: 5184000000 // 2 months
    }
}));
... 
```

`app.enable('trust proxy');`如果您想`req.protocol`在 Heroku 托管应用程序中的某个地方使用，请添加@friism 建议的内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-22T17:59:19.747

Heroku 在 SSL 到达您的应用程序之前终止它是正确的。这会导致 express 看到非 SSL 流量，这可能是它在 Heroku 上运行时拒绝设置 cookie 的原因。

Heroku`X-Forwarded-Proto`使用原始协议设置标头。我没有对此进行测试，但是根据文档，您必须通过设置`trust proxy`为文档的[here](https://github.com/visionmedia/express/wiki/New-features-in-3.x)来告诉 express 尊重该标题中的信息。`req.protocol` [可在此处](http://expressjs.com/api.html)找到其他详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-06T22:29:34.573

如果您使用的是[cookie-session](https://github.com/expressjs/cookie-session)，它应该如下所示：

```
app.use require('cookie-session') 
   secret: '<secret>'
   secureProxy: true 
```

# ruby-on-rails - 在 Mongoid 中引用内嵌文档

> ID：14463973
> 
> 赞同：0
> 
> 时间：2013-01-22T17:01:53.300
> 
> 标签：ruby-on-rails, mongodb, mongoid

我想得到一些关于做一些 MongoDB 数据设计的反馈。我以前从未真正使用过它，所以如果我的设计看起来很疯狂，请告诉我。

我对用户和用户执行的活动有一个概念。用户和他们执行的活动都需要有一个地址，并且他们执行的活动是该用户独有的。由于活动永远不会重叠，因此地址也不应该重叠。

我的初始数据结构如下所示：

```
User : {
  # User data,
  address : {
    # address data
  },
  address : {
    # address data,
    home : true
  },
  activity : {
    # activity data,
    _address_id: #referenced address within user
  },
  activity : {
    # activity data,
    _address_id: #referenced address within user
  },
} 
```

假设该活动可以在家中进行。

有一个更好的方法吗？我应该在活动和用户中嵌入地址吗？我应该从用户模型中完全删除它吗？

这一切都在使用 Mongoid 的 Rails 应用程序中结合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:28:05.967

您的数据结构非常好——面向文档的数据库就是这样使用的。您不应该在每个活动中重复地址，因为您最终会浪费空间。

```
User : {
  # User data,
  address_<id> : {
    # address data
  },
  address_<id> : {
    # address data,
    home : true
  },

  activity : {
    # activity data,
    _address_id: #referenced address within user
  },
  activity : {
    # activity data,
    _address_id: #referenced address within user
  },
} 
```

您需要注意两件事：
1\. 不要为单个活动检索整个文档
2\. 确保文档不超过最大大小（或重新编译）

# mahout - Myrrix 可以用于基于用户的协同过滤吗？

> ID：14463976
> 
> 赞同：1
> 
> 时间：2013-01-22T17:01:56.677
> 
> 标签：mahout, collaborative-filtering, myrrix

[我可以像使用Apache Mahout](http://mahout.apache.org)一样使用[Myrrix](http://myrrix.com)进行用户对用户的推荐吗？如果是，请描述，或提供一个链接到这样做的方法。

我想使用 Myrrix 是因为它易于使用的 REST API，并且因为它非常快速和轻量级。我需要向全新的用户推荐（新用户，但他们每个人都有 100 个项目偏好）—— `recommendToAnonymous`Myrrix 可以证明*非常*方便，但如果它不允许用户，我不确定我是否可以使用它——对用户的推荐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T19:41:10.107

这取决于您所说的用户对用户推荐是什么意思——基于用户相似性的推荐？不，这不是它的工作方式；它基于矩阵分解。但这只是一个实现细节。

我认为问题是，它是否支持您想要的操作？如果您想向新用户推荐，是的，它可以在一个用户的 1 个数据点之后做到这一点。通过 添加用户项目首选项`/preference`，然后只需调用`/recommend`。或者您可以添加所有 100，然后推荐。或者你可以使用`/recommendToAnonymous`，是的。

如果您的意思是计算最相似的用户 - 是和否。不，没有直接的 API 方法。您将必须运行第二个模型，其中项目和用户被翻转，然后计算最相似的项目。

# php - 使用连接到 iMac 的 Iphone 访问 localhost 网站

> ID：14463979
> 
> 赞同：1
> 
> 时间：2013-01-22T17:02:01.140
> 
> 标签：php, html, macos, apache

我正在尝试在我的 Iphone 中测试我在 Mountain Lion 的本地主机上运行的网站。

首先，我从名为“webdev”的mac创建了无线，然后，使用我连接到它的Iphone并且可以访问互联网，问题是当我尝试进入我的Mac localhost站点时，它一直在加载而没有结果，如果我尝试进入根目录：“http://webdev.local”我得到一个**禁止**错误。

知道为什么我无法将我的 Iphone 连接到我的 mac 上的本地站点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T17:07:13.367

我想如果您收到**Forbidden**错误，您应该检查您的网络服务器上的权限。我在我的电脑上遇到了类似的问题（使用 Fedora），我解决了这个问题，允许任何用户在我的网络服务器中执行文件，使用如下 chmod：

```
chmod +x -R /path/to/webserver-files/ 
```

希望能帮助到你！

# google-fusion-tables - 在 KML 下载中使用地图标记图标？

> ID：14463999
> 
> 赞同：0
> 
> 时间：2013-01-22T17:03:00.580
> 
> 标签：google-fusion-tables

我有一个融合表，其中有一列提供来自内置选项之一的地图标记（例如 large_red）。当我下载任一类型（静态或动态，但尤其是动态）的 KML 时，我希望使用这些相同的标记。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:55:08.740

我们最近为 KML 下载添加了样式，因此如果您下载静态或网络链接 KML，您的标记应该会出现。你试过这个并发现它没有按预期工作吗？